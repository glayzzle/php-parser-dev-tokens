[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Copyright \u00c2\u00a9 2013-2017 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n *\/",2],["T_WHITESPACE","\n",5],["T_NAMESPACE","namespace",6],["T_WHITESPACE"," ",6],["T_STRING","Magento",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Catalog",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Model",6],["T_NS_SEPARATOR","\\",6],["T_STRING","ResourceModel",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Layer",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Filter",6],";",["T_WHITESPACE","\n\n",6],["T_DOC_COMMENT","\/**\n * Catalog Layer Price Filter resource model\n *\/",8],["T_WHITESPACE","\n",10],["T_CLASS","class",11],["T_WHITESPACE"," ",11],["T_STRING","Price",11],["T_WHITESPACE"," ",11],["T_EXTENDS","extends",11],["T_WHITESPACE"," ",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Magento",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Framework",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Model",11],["T_NS_SEPARATOR","\\",11],["T_STRING","ResourceModel",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Db",11],["T_NS_SEPARATOR","\\",11],["T_STRING","AbstractDb",11],["T_WHITESPACE","\n",11],"{",["T_WHITESPACE","\n    ",12],["T_DOC_COMMENT","\/**\n     * Minimal possible price\n     *\/",13],["T_WHITESPACE","\n    ",15],["T_CONST","const",16],["T_WHITESPACE"," ",16],["T_STRING","MIN_POSSIBLE_PRICE",16],["T_WHITESPACE"," ",16],"=",["T_WHITESPACE"," ",16],["T_DNUMBER",".01",16],";",["T_WHITESPACE","\n\n    ",16],["T_DOC_COMMENT","\/**\n     * Core event manager proxy\n     *\n     * @var \\Magento\\Framework\\Event\\ManagerInterface\n     *\/",18],["T_WHITESPACE","\n    ",22],["T_PROTECTED","protected",23],["T_WHITESPACE"," ",23],["T_VARIABLE","$_eventManager",23],["T_WHITESPACE"," ",23],"=",["T_WHITESPACE"," ",23],["T_STRING","null",23],";",["T_WHITESPACE","\n\n    ",23],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Catalog\\Model\\Layer\n     *\/",25],["T_WHITESPACE","\n    ",27],["T_PRIVATE","private",28],["T_WHITESPACE"," ",28],["T_VARIABLE","$layer",28],";",["T_WHITESPACE","\n\n    ",28],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Customer\\Model\\Session\n     *\/",30],["T_WHITESPACE","\n    ",32],["T_PRIVATE","private",33],["T_WHITESPACE"," ",33],["T_VARIABLE","$session",33],";",["T_WHITESPACE","\n\n    ",33],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Store\\Model\\StoreManagerInterface\n     *\/",35],["T_WHITESPACE","\n    ",37],["T_PRIVATE","private",38],["T_WHITESPACE"," ",38],["T_VARIABLE","$storeManager",38],";",["T_WHITESPACE","\n\n    ",38],["T_DOC_COMMENT","\/**\n     * @param \\Magento\\Framework\\Model\\ResourceModel\\Db\\Context $context\n     * @param \\Magento\\Framework\\Event\\ManagerInterface $eventManager\n     * @param \\Magento\\Catalog\\Model\\Layer\\Resolver $layerResolver\n     * @param \\Magento\\Customer\\Model\\Session $session\n     * @param \\Magento\\Store\\Model\\StoreManagerInterface $storeManager\n     * @param string $connectionName\n     *\/",40],["T_WHITESPACE","\n    ",47],["T_PUBLIC","public",48],["T_WHITESPACE"," ",48],["T_FUNCTION","function",48],["T_WHITESPACE"," ",48],["T_STRING","__construct",48],"(",["T_WHITESPACE","\n        ",48],["T_NS_SEPARATOR","\\",49],["T_STRING","Magento",49],["T_NS_SEPARATOR","\\",49],["T_STRING","Framework",49],["T_NS_SEPARATOR","\\",49],["T_STRING","Model",49],["T_NS_SEPARATOR","\\",49],["T_STRING","ResourceModel",49],["T_NS_SEPARATOR","\\",49],["T_STRING","Db",49],["T_NS_SEPARATOR","\\",49],["T_STRING","Context",49],["T_WHITESPACE"," ",49],["T_VARIABLE","$context",49],",",["T_WHITESPACE","\n        ",49],["T_NS_SEPARATOR","\\",50],["T_STRING","Magento",50],["T_NS_SEPARATOR","\\",50],["T_STRING","Framework",50],["T_NS_SEPARATOR","\\",50],["T_STRING","Event",50],["T_NS_SEPARATOR","\\",50],["T_STRING","ManagerInterface",50],["T_WHITESPACE"," ",50],["T_VARIABLE","$eventManager",50],",",["T_WHITESPACE","\n        ",50],["T_NS_SEPARATOR","\\",51],["T_STRING","Magento",51],["T_NS_SEPARATOR","\\",51],["T_STRING","Catalog",51],["T_NS_SEPARATOR","\\",51],["T_STRING","Model",51],["T_NS_SEPARATOR","\\",51],["T_STRING","Layer",51],["T_NS_SEPARATOR","\\",51],["T_STRING","Resolver",51],["T_WHITESPACE"," ",51],["T_VARIABLE","$layerResolver",51],",",["T_WHITESPACE","\n        ",51],["T_NS_SEPARATOR","\\",52],["T_STRING","Magento",52],["T_NS_SEPARATOR","\\",52],["T_STRING","Customer",52],["T_NS_SEPARATOR","\\",52],["T_STRING","Model",52],["T_NS_SEPARATOR","\\",52],["T_STRING","Session",52],["T_WHITESPACE"," ",52],["T_VARIABLE","$session",52],",",["T_WHITESPACE","\n        ",52],["T_NS_SEPARATOR","\\",53],["T_STRING","Magento",53],["T_NS_SEPARATOR","\\",53],["T_STRING","Store",53],["T_NS_SEPARATOR","\\",53],["T_STRING","Model",53],["T_NS_SEPARATOR","\\",53],["T_STRING","StoreManagerInterface",53],["T_WHITESPACE"," ",53],["T_VARIABLE","$storeManager",53],",",["T_WHITESPACE","\n        ",53],["T_VARIABLE","$connectionName",54],["T_WHITESPACE"," ",54],"=",["T_WHITESPACE"," ",54],["T_STRING","null",54],["T_WHITESPACE","\n    ",54],")",["T_WHITESPACE"," ",55],"{",["T_WHITESPACE","\n        ",55],["T_VARIABLE","$this",56],["T_OBJECT_OPERATOR","->",56],["T_STRING","layer",56],["T_WHITESPACE"," ",56],"=",["T_WHITESPACE"," ",56],["T_VARIABLE","$layerResolver",56],["T_OBJECT_OPERATOR","->",56],["T_STRING","get",56],"(",")",";",["T_WHITESPACE","\n        ",56],["T_VARIABLE","$this",57],["T_OBJECT_OPERATOR","->",57],["T_STRING","session",57],["T_WHITESPACE"," ",57],"=",["T_WHITESPACE"," ",57],["T_VARIABLE","$session",57],";",["T_WHITESPACE","\n        ",57],["T_VARIABLE","$this",58],["T_OBJECT_OPERATOR","->",58],["T_STRING","storeManager",58],["T_WHITESPACE"," ",58],"=",["T_WHITESPACE"," ",58],["T_VARIABLE","$storeManager",58],";",["T_WHITESPACE","\n        ",58],["T_VARIABLE","$this",59],["T_OBJECT_OPERATOR","->",59],["T_STRING","_eventManager",59],["T_WHITESPACE"," ",59],"=",["T_WHITESPACE"," ",59],["T_VARIABLE","$eventManager",59],";",["T_WHITESPACE","\n        ",59],["T_STRING","parent",60],["T_DOUBLE_COLON","::",60],["T_STRING","__construct",60],"(",["T_VARIABLE","$context",60],",",["T_WHITESPACE"," ",60],["T_VARIABLE","$connectionName",60],")",";",["T_WHITESPACE","\n    ",60],"}",["T_WHITESPACE","\n\n    ",61],["T_DOC_COMMENT","\/**\n     * Retrieve array with products counts per price range\n     *\n     * @param int $range\n     * @return array\n     *\/",63],["T_WHITESPACE","\n    ",68],["T_PUBLIC","public",69],["T_WHITESPACE"," ",69],["T_FUNCTION","function",69],["T_WHITESPACE"," ",69],["T_STRING","getCount",69],"(",["T_VARIABLE","$range",69],")",["T_WHITESPACE","\n    ",69],"{",["T_WHITESPACE","\n        ",70],["T_VARIABLE","$select",71],["T_WHITESPACE"," ",71],"=",["T_WHITESPACE"," ",71],["T_VARIABLE","$this",71],["T_OBJECT_OPERATOR","->",71],["T_STRING","_getSelect",71],"(",")",";",["T_WHITESPACE","\n        ",71],["T_VARIABLE","$priceExpression",72],["T_WHITESPACE"," ",72],"=",["T_WHITESPACE"," ",72],["T_VARIABLE","$this",72],["T_OBJECT_OPERATOR","->",72],["T_STRING","_getFullPriceExpression",72],"(",["T_VARIABLE","$select",72],")",";",["T_WHITESPACE","\n\n        ",72],["T_DOC_COMMENT","\/**\n         * Check and set correct variable values to prevent SQL-injections\n         *\/",74],["T_WHITESPACE","\n        ",76],["T_VARIABLE","$range",77],["T_WHITESPACE"," ",77],"=",["T_WHITESPACE"," ",77],["T_STRING","floatval",77],"(",["T_VARIABLE","$range",77],")",";",["T_WHITESPACE","\n        ",77],["T_IF","if",78],["T_WHITESPACE"," ",78],"(",["T_VARIABLE","$range",78],["T_WHITESPACE"," ",78],["T_IS_EQUAL","==",78],["T_WHITESPACE"," ",78],["T_LNUMBER","0",78],")",["T_WHITESPACE"," ",78],"{",["T_WHITESPACE","\n            ",78],["T_VARIABLE","$range",79],["T_WHITESPACE"," ",79],"=",["T_WHITESPACE"," ",79],["T_LNUMBER","1",79],";",["T_WHITESPACE","\n        ",79],"}",["T_WHITESPACE","\n        ",80],["T_VARIABLE","$countExpr",81],["T_WHITESPACE"," ",81],"=",["T_WHITESPACE"," ",81],["T_NEW","new",81],["T_WHITESPACE"," ",81],["T_NS_SEPARATOR","\\",81],["T_STRING","Zend_Db_Expr",81],"(",["T_CONSTANT_ENCAPSED_STRING","'COUNT(*)'",81],")",";",["T_WHITESPACE","\n        ",81],["T_VARIABLE","$rangeExpr",82],["T_WHITESPACE"," ",82],"=",["T_WHITESPACE"," ",82],["T_NEW","new",82],["T_WHITESPACE"," ",82],["T_NS_SEPARATOR","\\",82],["T_STRING","Zend_Db_Expr",82],"(","\"",["T_ENCAPSED_AND_WHITESPACE","FLOOR((",82],["T_CURLY_OPEN","{",82],["T_VARIABLE","$priceExpression",82],"}",["T_ENCAPSED_AND_WHITESPACE",") \/ ",82],["T_CURLY_OPEN","{",82],["T_VARIABLE","$range",82],"}",["T_ENCAPSED_AND_WHITESPACE",") + 1",82],"\"",")",";",["T_WHITESPACE","\n\n        ",82],["T_VARIABLE","$select",84],["T_OBJECT_OPERATOR","->",84],["T_STRING","columns",84],"(","[",["T_CONSTANT_ENCAPSED_STRING","'range'",84],["T_WHITESPACE"," ",84],["T_DOUBLE_ARROW","=>",84],["T_WHITESPACE"," ",84],["T_VARIABLE","$rangeExpr",84],",",["T_WHITESPACE"," ",84],["T_CONSTANT_ENCAPSED_STRING","'count'",84],["T_WHITESPACE"," ",84],["T_DOUBLE_ARROW","=>",84],["T_WHITESPACE"," ",84],["T_VARIABLE","$countExpr",84],"]",")",";",["T_WHITESPACE","\n        ",84],["T_VARIABLE","$select",85],["T_OBJECT_OPERATOR","->",85],["T_STRING","group",85],"(",["T_VARIABLE","$rangeExpr",85],")",["T_OBJECT_OPERATOR","->",85],["T_STRING","order",85],"(","\"",["T_ENCAPSED_AND_WHITESPACE","(",85],["T_CURLY_OPEN","{",85],["T_VARIABLE","$rangeExpr",85],"}",["T_ENCAPSED_AND_WHITESPACE",") ASC",85],"\"",")",";",["T_WHITESPACE","\n\n        ",85],["T_RETURN","return",87],["T_WHITESPACE"," ",87],["T_VARIABLE","$this",87],["T_OBJECT_OPERATOR","->",87],["T_STRING","getConnection",87],"(",")",["T_OBJECT_OPERATOR","->",87],["T_STRING","fetchPairs",87],"(",["T_VARIABLE","$select",87],")",";",["T_WHITESPACE","\n    ",87],"}",["T_WHITESPACE","\n\n    ",88],["T_DOC_COMMENT","\/**\n     * Retrieve clean select with joined price index table\n     *\n     * @return \\Magento\\Framework\\DB\\Select\n     *\/",90],["T_WHITESPACE","\n    ",94],["T_PROTECTED","protected",95],["T_WHITESPACE"," ",95],["T_FUNCTION","function",95],["T_WHITESPACE"," ",95],["T_STRING","_getSelect",95],"(",")",["T_WHITESPACE","\n    ",95],"{",["T_WHITESPACE","\n        ",96],["T_VARIABLE","$collection",97],["T_WHITESPACE"," ",97],"=",["T_WHITESPACE"," ",97],["T_VARIABLE","$this",97],["T_OBJECT_OPERATOR","->",97],["T_STRING","layer",97],["T_OBJECT_OPERATOR","->",97],["T_STRING","getProductCollection",97],"(",")",";",["T_WHITESPACE","\n        ",97],["T_VARIABLE","$collection",98],["T_OBJECT_OPERATOR","->",98],["T_STRING","addPriceData",98],"(",["T_WHITESPACE","\n            ",98],["T_VARIABLE","$this",99],["T_OBJECT_OPERATOR","->",99],["T_STRING","session",99],["T_OBJECT_OPERATOR","->",99],["T_STRING","getCustomerGroupId",99],"(",")",",",["T_WHITESPACE","\n            ",99],["T_VARIABLE","$this",100],["T_OBJECT_OPERATOR","->",100],["T_STRING","storeManager",100],["T_OBJECT_OPERATOR","->",100],["T_STRING","getStore",100],"(",")",["T_OBJECT_OPERATOR","->",100],["T_STRING","getWebsiteId",100],"(",")",["T_WHITESPACE","\n        ",100],")",";",["T_WHITESPACE","\n\n        ",101],["T_IF","if",103],["T_WHITESPACE"," ",103],"(",["T_VARIABLE","$collection",103],["T_OBJECT_OPERATOR","->",103],["T_STRING","getCatalogPreparedSelect",103],"(",")",["T_WHITESPACE"," ",103],["T_IS_NOT_IDENTICAL","!==",103],["T_WHITESPACE"," ",103],["T_STRING","null",103],")",["T_WHITESPACE"," ",103],"{",["T_WHITESPACE","\n            ",103],["T_VARIABLE","$select",104],["T_WHITESPACE"," ",104],"=",["T_WHITESPACE"," ",104],["T_CLONE","clone",104],["T_WHITESPACE"," ",104],["T_VARIABLE","$collection",104],["T_OBJECT_OPERATOR","->",104],["T_STRING","getCatalogPreparedSelect",104],"(",")",";",["T_WHITESPACE","\n        ",104],"}",["T_WHITESPACE"," ",105],["T_ELSE","else",105],["T_WHITESPACE"," ",105],"{",["T_WHITESPACE","\n            ",105],["T_VARIABLE","$select",106],["T_WHITESPACE"," ",106],"=",["T_WHITESPACE"," ",106],["T_CLONE","clone",106],["T_WHITESPACE"," ",106],["T_VARIABLE","$collection",106],["T_OBJECT_OPERATOR","->",106],["T_STRING","getSelect",106],"(",")",";",["T_WHITESPACE","\n        ",106],"}",["T_WHITESPACE","\n\n        ",107],["T_COMMENT","\/\/ reset columns, order and limitation conditions\n",109],["T_WHITESPACE","        ",110],["T_VARIABLE","$select",110],["T_OBJECT_OPERATOR","->",110],["T_STRING","reset",110],"(",["T_NS_SEPARATOR","\\",110],["T_STRING","Magento",110],["T_NS_SEPARATOR","\\",110],["T_STRING","Framework",110],["T_NS_SEPARATOR","\\",110],["T_STRING","DB",110],["T_NS_SEPARATOR","\\",110],["T_STRING","Select",110],["T_DOUBLE_COLON","::",110],["T_STRING","COLUMNS",110],")",";",["T_WHITESPACE","\n        ",110],["T_VARIABLE","$select",111],["T_OBJECT_OPERATOR","->",111],["T_STRING","reset",111],"(",["T_NS_SEPARATOR","\\",111],["T_STRING","Magento",111],["T_NS_SEPARATOR","\\",111],["T_STRING","Framework",111],["T_NS_SEPARATOR","\\",111],["T_STRING","DB",111],["T_NS_SEPARATOR","\\",111],["T_STRING","Select",111],["T_DOUBLE_COLON","::",111],["T_STRING","ORDER",111],")",";",["T_WHITESPACE","\n        ",111],["T_VARIABLE","$select",112],["T_OBJECT_OPERATOR","->",112],["T_STRING","reset",112],"(",["T_NS_SEPARATOR","\\",112],["T_STRING","Magento",112],["T_NS_SEPARATOR","\\",112],["T_STRING","Framework",112],["T_NS_SEPARATOR","\\",112],["T_STRING","DB",112],["T_NS_SEPARATOR","\\",112],["T_STRING","Select",112],["T_DOUBLE_COLON","::",112],["T_STRING","LIMIT_COUNT",112],")",";",["T_WHITESPACE","\n        ",112],["T_VARIABLE","$select",113],["T_OBJECT_OPERATOR","->",113],["T_STRING","reset",113],"(",["T_NS_SEPARATOR","\\",113],["T_STRING","Magento",113],["T_NS_SEPARATOR","\\",113],["T_STRING","Framework",113],["T_NS_SEPARATOR","\\",113],["T_STRING","DB",113],["T_NS_SEPARATOR","\\",113],["T_STRING","Select",113],["T_DOUBLE_COLON","::",113],["T_STRING","LIMIT_OFFSET",113],")",";",["T_WHITESPACE","\n\n        ",113],["T_COMMENT","\/\/ remove join with main table\n",115],["T_WHITESPACE","        ",116],["T_VARIABLE","$fromPart",116],["T_WHITESPACE"," ",116],"=",["T_WHITESPACE"," ",116],["T_VARIABLE","$select",116],["T_OBJECT_OPERATOR","->",116],["T_STRING","getPart",116],"(",["T_NS_SEPARATOR","\\",116],["T_STRING","Magento",116],["T_NS_SEPARATOR","\\",116],["T_STRING","Framework",116],["T_NS_SEPARATOR","\\",116],["T_STRING","DB",116],["T_NS_SEPARATOR","\\",116],["T_STRING","Select",116],["T_DOUBLE_COLON","::",116],["T_STRING","FROM",116],")",";",["T_WHITESPACE","\n        ",116],["T_IF","if",117],["T_WHITESPACE"," ",117],"(","!",["T_ISSET","isset",117],"(",["T_WHITESPACE","\n                ",117],["T_VARIABLE","$fromPart",118],"[",["T_NS_SEPARATOR","\\",118],["T_STRING","Magento",118],["T_NS_SEPARATOR","\\",118],["T_STRING","Catalog",118],["T_NS_SEPARATOR","\\",118],["T_STRING","Model",118],["T_NS_SEPARATOR","\\",118],["T_STRING","ResourceModel",118],["T_NS_SEPARATOR","\\",118],["T_STRING","Product",118],["T_NS_SEPARATOR","\\",118],["T_STRING","Collection",118],["T_DOUBLE_COLON","::",118],["T_STRING","INDEX_TABLE_ALIAS",118],"]",["T_WHITESPACE","\n            ",118],")",["T_WHITESPACE"," ",119],["T_BOOLEAN_OR","||",119],["T_WHITESPACE"," ",119],"!",["T_ISSET","isset",119],"(",["T_WHITESPACE","\n                ",119],["T_VARIABLE","$fromPart",120],"[",["T_NS_SEPARATOR","\\",120],["T_STRING","Magento",120],["T_NS_SEPARATOR","\\",120],["T_STRING","Catalog",120],["T_NS_SEPARATOR","\\",120],["T_STRING","Model",120],["T_NS_SEPARATOR","\\",120],["T_STRING","ResourceModel",120],["T_NS_SEPARATOR","\\",120],["T_STRING","Product",120],["T_NS_SEPARATOR","\\",120],["T_STRING","Collection",120],["T_DOUBLE_COLON","::",120],["T_STRING","MAIN_TABLE_ALIAS",120],"]",["T_WHITESPACE","\n            ",120],")",["T_WHITESPACE","\n        ",121],")",["T_WHITESPACE"," ",122],"{",["T_WHITESPACE","\n            ",122],["T_RETURN","return",123],["T_WHITESPACE"," ",123],["T_VARIABLE","$select",123],";",["T_WHITESPACE","\n        ",123],"}",["T_WHITESPACE","\n\n        ",124],["T_COMMENT","\/\/ processing FROM part\n",126],["T_WHITESPACE","        ",127],["T_VARIABLE","$priceIndexJoinPart",127],["T_WHITESPACE"," ",127],"=",["T_WHITESPACE"," ",127],["T_VARIABLE","$fromPart",127],"[",["T_NS_SEPARATOR","\\",127],["T_STRING","Magento",127],["T_NS_SEPARATOR","\\",127],["T_STRING","Catalog",127],["T_NS_SEPARATOR","\\",127],["T_STRING","Model",127],["T_NS_SEPARATOR","\\",127],["T_STRING","ResourceModel",127],["T_NS_SEPARATOR","\\",127],["T_STRING","Product",127],["T_NS_SEPARATOR","\\",127],["T_STRING","Collection",127],["T_DOUBLE_COLON","::",127],["T_STRING","INDEX_TABLE_ALIAS",127],"]",";",["T_WHITESPACE","\n        ",127],["T_VARIABLE","$priceIndexJoinConditions",128],["T_WHITESPACE"," ",128],"=",["T_WHITESPACE"," ",128],["T_STRING","explode",128],"(",["T_CONSTANT_ENCAPSED_STRING","'AND'",128],",",["T_WHITESPACE"," ",128],["T_VARIABLE","$priceIndexJoinPart",128],"[",["T_CONSTANT_ENCAPSED_STRING","'joinCondition'",128],"]",")",";",["T_WHITESPACE","\n        ",128],["T_VARIABLE","$priceIndexJoinPart",129],"[",["T_CONSTANT_ENCAPSED_STRING","'joinType'",129],"]",["T_WHITESPACE"," ",129],"=",["T_WHITESPACE"," ",129],["T_NS_SEPARATOR","\\",129],["T_STRING","Magento",129],["T_NS_SEPARATOR","\\",129],["T_STRING","Framework",129],["T_NS_SEPARATOR","\\",129],["T_STRING","DB",129],["T_NS_SEPARATOR","\\",129],["T_STRING","Select",129],["T_DOUBLE_COLON","::",129],["T_STRING","FROM",129],";",["T_WHITESPACE","\n        ",129],["T_VARIABLE","$priceIndexJoinPart",130],"[",["T_CONSTANT_ENCAPSED_STRING","'joinCondition'",130],"]",["T_WHITESPACE"," ",130],"=",["T_WHITESPACE"," ",130],["T_STRING","null",130],";",["T_WHITESPACE","\n        ",130],["T_VARIABLE","$fromPart",131],"[",["T_NS_SEPARATOR","\\",131],["T_STRING","Magento",131],["T_NS_SEPARATOR","\\",131],["T_STRING","Catalog",131],["T_NS_SEPARATOR","\\",131],["T_STRING","Model",131],["T_NS_SEPARATOR","\\",131],["T_STRING","ResourceModel",131],["T_NS_SEPARATOR","\\",131],["T_STRING","Product",131],["T_NS_SEPARATOR","\\",131],["T_STRING","Collection",131],["T_DOUBLE_COLON","::",131],["T_STRING","MAIN_TABLE_ALIAS",131],"]",["T_WHITESPACE"," ",131],"=",["T_WHITESPACE"," ",131],["T_VARIABLE","$priceIndexJoinPart",131],";",["T_WHITESPACE","\n        ",131],["T_UNSET","unset",132],"(",["T_VARIABLE","$fromPart",132],"[",["T_NS_SEPARATOR","\\",132],["T_STRING","Magento",132],["T_NS_SEPARATOR","\\",132],["T_STRING","Catalog",132],["T_NS_SEPARATOR","\\",132],["T_STRING","Model",132],["T_NS_SEPARATOR","\\",132],["T_STRING","ResourceModel",132],["T_NS_SEPARATOR","\\",132],["T_STRING","Product",132],["T_NS_SEPARATOR","\\",132],["T_STRING","Collection",132],["T_DOUBLE_COLON","::",132],["T_STRING","INDEX_TABLE_ALIAS",132],"]",")",";",["T_WHITESPACE","\n        ",132],["T_VARIABLE","$select",133],["T_OBJECT_OPERATOR","->",133],["T_STRING","setPart",133],"(",["T_NS_SEPARATOR","\\",133],["T_STRING","Magento",133],["T_NS_SEPARATOR","\\",133],["T_STRING","Framework",133],["T_NS_SEPARATOR","\\",133],["T_STRING","DB",133],["T_NS_SEPARATOR","\\",133],["T_STRING","Select",133],["T_DOUBLE_COLON","::",133],["T_STRING","FROM",133],",",["T_WHITESPACE"," ",133],["T_VARIABLE","$fromPart",133],")",";",["T_WHITESPACE","\n        ",133],["T_FOREACH","foreach",134],["T_WHITESPACE"," ",134],"(",["T_VARIABLE","$fromPart",134],["T_WHITESPACE"," ",134],["T_AS","as",134],["T_WHITESPACE"," ",134],["T_VARIABLE","$key",134],["T_WHITESPACE"," ",134],["T_DOUBLE_ARROW","=>",134],["T_WHITESPACE"," ",134],["T_VARIABLE","$fromJoinItem",134],")",["T_WHITESPACE"," ",134],"{",["T_WHITESPACE","\n            ",134],["T_VARIABLE","$fromPart",135],"[",["T_VARIABLE","$key",135],"]","[",["T_CONSTANT_ENCAPSED_STRING","'joinCondition'",135],"]",["T_WHITESPACE"," ",135],"=",["T_WHITESPACE"," ",135],["T_VARIABLE","$this",135],["T_OBJECT_OPERATOR","->",135],["T_STRING","_replaceTableAlias",135],"(",["T_VARIABLE","$fromJoinItem",135],"[",["T_CONSTANT_ENCAPSED_STRING","'joinCondition'",135],"]",")",";",["T_WHITESPACE","\n        ",135],"}",["T_WHITESPACE","\n        ",136],["T_VARIABLE","$select",137],["T_OBJECT_OPERATOR","->",137],["T_STRING","setPart",137],"(",["T_NS_SEPARATOR","\\",137],["T_STRING","Magento",137],["T_NS_SEPARATOR","\\",137],["T_STRING","Framework",137],["T_NS_SEPARATOR","\\",137],["T_STRING","DB",137],["T_NS_SEPARATOR","\\",137],["T_STRING","Select",137],["T_DOUBLE_COLON","::",137],["T_STRING","FROM",137],",",["T_WHITESPACE"," ",137],["T_VARIABLE","$fromPart",137],")",";",["T_WHITESPACE","\n\n        ",137],["T_COMMENT","\/\/ processing WHERE part\n",139],["T_WHITESPACE","        ",140],["T_VARIABLE","$wherePart",140],["T_WHITESPACE"," ",140],"=",["T_WHITESPACE"," ",140],["T_VARIABLE","$select",140],["T_OBJECT_OPERATOR","->",140],["T_STRING","getPart",140],"(",["T_NS_SEPARATOR","\\",140],["T_STRING","Magento",140],["T_NS_SEPARATOR","\\",140],["T_STRING","Framework",140],["T_NS_SEPARATOR","\\",140],["T_STRING","DB",140],["T_NS_SEPARATOR","\\",140],["T_STRING","Select",140],["T_DOUBLE_COLON","::",140],["T_STRING","WHERE",140],")",";",["T_WHITESPACE","\n        ",140],["T_FOREACH","foreach",141],["T_WHITESPACE"," ",141],"(",["T_VARIABLE","$wherePart",141],["T_WHITESPACE"," ",141],["T_AS","as",141],["T_WHITESPACE"," ",141],["T_VARIABLE","$key",141],["T_WHITESPACE"," ",141],["T_DOUBLE_ARROW","=>",141],["T_WHITESPACE"," ",141],["T_VARIABLE","$wherePartItem",141],")",["T_WHITESPACE"," ",141],"{",["T_WHITESPACE","\n            ",141],["T_VARIABLE","$wherePart",142],"[",["T_VARIABLE","$key",142],"]",["T_WHITESPACE"," ",142],"=",["T_WHITESPACE"," ",142],["T_VARIABLE","$this",142],["T_OBJECT_OPERATOR","->",142],["T_STRING","_replaceTableAlias",142],"(",["T_VARIABLE","$wherePartItem",142],")",";",["T_WHITESPACE","\n        ",142],"}",["T_WHITESPACE","\n        ",143],["T_VARIABLE","$select",144],["T_OBJECT_OPERATOR","->",144],["T_STRING","setPart",144],"(",["T_NS_SEPARATOR","\\",144],["T_STRING","Magento",144],["T_NS_SEPARATOR","\\",144],["T_STRING","Framework",144],["T_NS_SEPARATOR","\\",144],["T_STRING","DB",144],["T_NS_SEPARATOR","\\",144],["T_STRING","Select",144],["T_DOUBLE_COLON","::",144],["T_STRING","WHERE",144],",",["T_WHITESPACE"," ",144],["T_VARIABLE","$wherePart",144],")",";",["T_WHITESPACE","\n        ",144],["T_VARIABLE","$excludeJoinPart",145],["T_WHITESPACE"," ",145],"=",["T_WHITESPACE"," ",145],["T_NS_SEPARATOR","\\",145],["T_STRING","Magento",145],["T_NS_SEPARATOR","\\",145],["T_STRING","Catalog",145],["T_NS_SEPARATOR","\\",145],["T_STRING","Model",145],["T_NS_SEPARATOR","\\",145],["T_STRING","ResourceModel",145],["T_NS_SEPARATOR","\\",145],["T_STRING","Product",145],["T_NS_SEPARATOR","\\",145],["T_STRING","Collection",145],["T_DOUBLE_COLON","::",145],["T_STRING","MAIN_TABLE_ALIAS",145],["T_WHITESPACE"," ",145],".",["T_WHITESPACE"," ",145],["T_CONSTANT_ENCAPSED_STRING","'.entity_id'",145],";",["T_WHITESPACE","\n        ",145],["T_FOREACH","foreach",146],["T_WHITESPACE"," ",146],"(",["T_VARIABLE","$priceIndexJoinConditions",146],["T_WHITESPACE"," ",146],["T_AS","as",146],["T_WHITESPACE"," ",146],["T_VARIABLE","$condition",146],")",["T_WHITESPACE"," ",146],"{",["T_WHITESPACE","\n            ",146],["T_IF","if",147],["T_WHITESPACE"," ",147],"(",["T_STRING","strpos",147],"(",["T_VARIABLE","$condition",147],",",["T_WHITESPACE"," ",147],["T_VARIABLE","$excludeJoinPart",147],")",["T_WHITESPACE"," ",147],["T_IS_NOT_IDENTICAL","!==",147],["T_WHITESPACE"," ",147],["T_STRING","false",147],")",["T_WHITESPACE"," ",147],"{",["T_WHITESPACE","\n                ",147],["T_CONTINUE","continue",148],";",["T_WHITESPACE","\n            ",148],"}",["T_WHITESPACE","\n            ",149],["T_VARIABLE","$select",150],["T_OBJECT_OPERATOR","->",150],["T_STRING","where",150],"(",["T_VARIABLE","$this",150],["T_OBJECT_OPERATOR","->",150],["T_STRING","_replaceTableAlias",150],"(",["T_VARIABLE","$condition",150],")",")",";",["T_WHITESPACE","\n        ",150],"}",["T_WHITESPACE","\n        ",151],["T_VARIABLE","$select",152],["T_OBJECT_OPERATOR","->",152],["T_STRING","where",152],"(",["T_VARIABLE","$this",152],["T_OBJECT_OPERATOR","->",152],["T_STRING","_getPriceExpression",152],"(",["T_VARIABLE","$select",152],")",["T_WHITESPACE"," ",152],".",["T_WHITESPACE"," ",152],["T_CONSTANT_ENCAPSED_STRING","' IS NOT NULL'",152],")",";",["T_WHITESPACE","\n\n        ",152],["T_RETURN","return",154],["T_WHITESPACE"," ",154],["T_VARIABLE","$select",154],";",["T_WHITESPACE","\n    ",154],"}",["T_WHITESPACE","\n\n    ",155],["T_DOC_COMMENT","\/**\n     * Replace table alias in condition string\n     *\n     * @param string|null $conditionString\n     * @return string|null\n     *\/",157],["T_WHITESPACE","\n    ",162],["T_PROTECTED","protected",163],["T_WHITESPACE"," ",163],["T_FUNCTION","function",163],["T_WHITESPACE"," ",163],["T_STRING","_replaceTableAlias",163],"(",["T_VARIABLE","$conditionString",163],")",["T_WHITESPACE","\n    ",163],"{",["T_WHITESPACE","\n        ",164],["T_IF","if",165],["T_WHITESPACE"," ",165],"(",["T_VARIABLE","$conditionString",165],["T_WHITESPACE"," ",165],["T_IS_IDENTICAL","===",165],["T_WHITESPACE"," ",165],["T_STRING","null",165],")",["T_WHITESPACE"," ",165],"{",["T_WHITESPACE","\n            ",165],["T_RETURN","return",166],["T_WHITESPACE"," ",166],["T_STRING","null",166],";",["T_WHITESPACE","\n        ",166],"}",["T_WHITESPACE","\n        ",167],["T_VARIABLE","$connection",168],["T_WHITESPACE"," ",168],"=",["T_WHITESPACE"," ",168],["T_VARIABLE","$this",168],["T_OBJECT_OPERATOR","->",168],["T_STRING","getConnection",168],"(",")",";",["T_WHITESPACE","\n        ",168],["T_VARIABLE","$oldAlias",169],["T_WHITESPACE"," ",169],"=",["T_WHITESPACE"," ",169],"[",["T_WHITESPACE","\n            ",169],["T_NS_SEPARATOR","\\",170],["T_STRING","Magento",170],["T_NS_SEPARATOR","\\",170],["T_STRING","Catalog",170],["T_NS_SEPARATOR","\\",170],["T_STRING","Model",170],["T_NS_SEPARATOR","\\",170],["T_STRING","ResourceModel",170],["T_NS_SEPARATOR","\\",170],["T_STRING","Product",170],["T_NS_SEPARATOR","\\",170],["T_STRING","Collection",170],["T_DOUBLE_COLON","::",170],["T_STRING","INDEX_TABLE_ALIAS",170],["T_WHITESPACE"," ",170],".",["T_WHITESPACE"," ",170],["T_CONSTANT_ENCAPSED_STRING","'.'",170],",",["T_WHITESPACE","\n            ",170],["T_VARIABLE","$connection",171],["T_OBJECT_OPERATOR","->",171],["T_STRING","quoteIdentifier",171],"(",["T_WHITESPACE","\n                ",171],["T_NS_SEPARATOR","\\",172],["T_STRING","Magento",172],["T_NS_SEPARATOR","\\",172],["T_STRING","Catalog",172],["T_NS_SEPARATOR","\\",172],["T_STRING","Model",172],["T_NS_SEPARATOR","\\",172],["T_STRING","ResourceModel",172],["T_NS_SEPARATOR","\\",172],["T_STRING","Product",172],["T_NS_SEPARATOR","\\",172],["T_STRING","Collection",172],["T_DOUBLE_COLON","::",172],["T_STRING","INDEX_TABLE_ALIAS",172],["T_WHITESPACE","\n            ",172],")",["T_WHITESPACE"," ",173],".",["T_WHITESPACE"," ",173],["T_CONSTANT_ENCAPSED_STRING","'.'",173],",",["T_WHITESPACE","\n        ",173],"]",";",["T_WHITESPACE","\n        ",174],["T_VARIABLE","$newAlias",175],["T_WHITESPACE"," ",175],"=",["T_WHITESPACE"," ",175],"[",["T_WHITESPACE","\n            ",175],["T_NS_SEPARATOR","\\",176],["T_STRING","Magento",176],["T_NS_SEPARATOR","\\",176],["T_STRING","Catalog",176],["T_NS_SEPARATOR","\\",176],["T_STRING","Model",176],["T_NS_SEPARATOR","\\",176],["T_STRING","ResourceModel",176],["T_NS_SEPARATOR","\\",176],["T_STRING","Product",176],["T_NS_SEPARATOR","\\",176],["T_STRING","Collection",176],["T_DOUBLE_COLON","::",176],["T_STRING","MAIN_TABLE_ALIAS",176],["T_WHITESPACE"," ",176],".",["T_WHITESPACE"," ",176],["T_CONSTANT_ENCAPSED_STRING","'.'",176],",",["T_WHITESPACE","\n            ",176],["T_VARIABLE","$connection",177],["T_OBJECT_OPERATOR","->",177],["T_STRING","quoteIdentifier",177],"(",["T_WHITESPACE","\n                ",177],["T_NS_SEPARATOR","\\",178],["T_STRING","Magento",178],["T_NS_SEPARATOR","\\",178],["T_STRING","Catalog",178],["T_NS_SEPARATOR","\\",178],["T_STRING","Model",178],["T_NS_SEPARATOR","\\",178],["T_STRING","ResourceModel",178],["T_NS_SEPARATOR","\\",178],["T_STRING","Product",178],["T_NS_SEPARATOR","\\",178],["T_STRING","Collection",178],["T_DOUBLE_COLON","::",178],["T_STRING","MAIN_TABLE_ALIAS",178],["T_WHITESPACE","\n            ",178],")",["T_WHITESPACE"," ",179],".",["T_WHITESPACE"," ",179],["T_CONSTANT_ENCAPSED_STRING","'.'",179],",",["T_WHITESPACE","\n        ",179],"]",";",["T_WHITESPACE","\n        ",180],["T_RETURN","return",181],["T_WHITESPACE"," ",181],["T_STRING","str_replace",181],"(",["T_VARIABLE","$oldAlias",181],",",["T_WHITESPACE"," ",181],["T_VARIABLE","$newAlias",181],",",["T_WHITESPACE"," ",181],["T_VARIABLE","$conditionString",181],")",";",["T_WHITESPACE","\n    ",181],"}",["T_WHITESPACE","\n\n    ",182],["T_DOC_COMMENT","\/**\n     * Price expression generated by products collection\n     *\n     * @param \\Magento\\Framework\\DB\\Select $select\n     * @param bool $replaceAlias\n     * @return string\n     *\/",184],["T_WHITESPACE","\n    ",190],["T_PROTECTED","protected",191],["T_WHITESPACE"," ",191],["T_FUNCTION","function",191],["T_WHITESPACE"," ",191],["T_STRING","_getPriceExpression",191],"(",["T_VARIABLE","$select",191],",",["T_WHITESPACE"," ",191],["T_VARIABLE","$replaceAlias",191],["T_WHITESPACE"," ",191],"=",["T_WHITESPACE"," ",191],["T_STRING","true",191],")",["T_WHITESPACE","\n    ",191],"{",["T_WHITESPACE","\n        ",192],["T_VARIABLE","$priceExpression",193],["T_WHITESPACE"," ",193],"=",["T_WHITESPACE"," ",193],["T_VARIABLE","$this",193],["T_OBJECT_OPERATOR","->",193],["T_STRING","layer",193],["T_OBJECT_OPERATOR","->",193],["T_STRING","getProductCollection",193],"(",")",["T_OBJECT_OPERATOR","->",193],["T_STRING","getPriceExpression",193],"(",["T_VARIABLE","$select",193],")",";",["T_WHITESPACE","\n        ",193],["T_VARIABLE","$additionalPriceExpression",194],["T_WHITESPACE"," ",194],"=",["T_WHITESPACE"," ",194],["T_VARIABLE","$this",194],["T_OBJECT_OPERATOR","->",194],["T_STRING","layer",194],["T_OBJECT_OPERATOR","->",194],["T_STRING","getProductCollection",194],"(",")",["T_OBJECT_OPERATOR","->",194],["T_STRING","getAdditionalPriceExpression",194],"(",["T_WHITESPACE","\n            ",194],["T_VARIABLE","$select",195],["T_WHITESPACE","\n        ",195],")",";",["T_WHITESPACE","\n        ",196],["T_VARIABLE","$result",197],["T_WHITESPACE"," ",197],"=",["T_WHITESPACE"," ",197],["T_EMPTY","empty",197],"(",["T_VARIABLE","$additionalPriceExpression",197],")",["T_WHITESPACE","\n            ",197],"?",["T_WHITESPACE"," ",198],["T_VARIABLE","$priceExpression",198],["T_WHITESPACE","\n            ",198],":",["T_WHITESPACE"," ",199],"\"",["T_ENCAPSED_AND_WHITESPACE","(",199],["T_CURLY_OPEN","{",199],["T_VARIABLE","$priceExpression",199],"}",["T_ENCAPSED_AND_WHITESPACE"," ",199],["T_CURLY_OPEN","{",199],["T_VARIABLE","$additionalPriceExpression",199],"}",["T_ENCAPSED_AND_WHITESPACE",")",199],"\"",";",["T_WHITESPACE","\n        ",199],["T_IF","if",200],["T_WHITESPACE"," ",200],"(",["T_VARIABLE","$replaceAlias",200],")",["T_WHITESPACE"," ",200],"{",["T_WHITESPACE","\n            ",200],["T_VARIABLE","$result",201],["T_WHITESPACE"," ",201],"=",["T_WHITESPACE"," ",201],["T_VARIABLE","$this",201],["T_OBJECT_OPERATOR","->",201],["T_STRING","_replaceTableAlias",201],"(",["T_VARIABLE","$result",201],")",";",["T_WHITESPACE","\n        ",201],"}",["T_WHITESPACE","\n\n        ",202],["T_RETURN","return",204],["T_WHITESPACE"," ",204],["T_VARIABLE","$result",204],";",["T_WHITESPACE","\n    ",204],"}",["T_WHITESPACE","\n\n    ",205],["T_DOC_COMMENT","\/**\n     * Get full price expression generated by products collection\n     *\n     * @param \\Magento\\Framework\\DB\\Select $select\n     * @return \\Zend_Db_Expr\n     *\/",207],["T_WHITESPACE","\n    ",212],["T_PROTECTED","protected",213],["T_WHITESPACE"," ",213],["T_FUNCTION","function",213],["T_WHITESPACE"," ",213],["T_STRING","_getFullPriceExpression",213],"(",["T_VARIABLE","$select",213],")",["T_WHITESPACE","\n    ",213],"{",["T_WHITESPACE","\n        ",214],["T_RETURN","return",215],["T_WHITESPACE"," ",215],["T_NEW","new",215],["T_WHITESPACE"," ",215],["T_NS_SEPARATOR","\\",215],["T_STRING","Zend_Db_Expr",215],"(",["T_WHITESPACE","\n            ",215],["T_CONSTANT_ENCAPSED_STRING","'ROUND(('",216],["T_WHITESPACE"," ",216],".",["T_WHITESPACE"," ",216],["T_VARIABLE","$this",216],["T_OBJECT_OPERATOR","->",216],["T_STRING","_getPriceExpression",216],"(",["T_VARIABLE","$select",216],")",["T_WHITESPACE","\n            ",216],".",["T_WHITESPACE"," ",217],["T_CONSTANT_ENCAPSED_STRING","') * '",217],["T_WHITESPACE"," ",217],".",["T_WHITESPACE"," ",217],["T_VARIABLE","$this",217],["T_OBJECT_OPERATOR","->",217],["T_STRING","layer",217],["T_OBJECT_OPERATOR","->",217],["T_STRING","getProductCollection",217],"(",")",["T_OBJECT_OPERATOR","->",217],["T_STRING","getCurrencyRate",217],"(",")",["T_WHITESPACE"," ",217],".",["T_WHITESPACE"," ",217],["T_CONSTANT_ENCAPSED_STRING","', 2)'",217],["T_WHITESPACE","\n        ",217],")",";",["T_WHITESPACE","\n    ",218],"}",["T_WHITESPACE","\n\n    ",219],["T_DOC_COMMENT","\/**\n     * Get comparing value sql part\n     *\n     * @param float $price\n     * @param bool $decrease\n     * @return float\n     *\/",221],["T_WHITESPACE","\n    ",227],["T_PROTECTED","protected",228],["T_WHITESPACE"," ",228],["T_FUNCTION","function",228],["T_WHITESPACE"," ",228],["T_STRING","_getComparingValue",228],"(",["T_VARIABLE","$price",228],",",["T_WHITESPACE"," ",228],["T_VARIABLE","$decrease",228],["T_WHITESPACE"," ",228],"=",["T_WHITESPACE"," ",228],["T_STRING","true",228],")",["T_WHITESPACE","\n    ",228],"{",["T_WHITESPACE","\n        ",229],["T_VARIABLE","$currencyRate",230],["T_WHITESPACE"," ",230],"=",["T_WHITESPACE"," ",230],["T_VARIABLE","$this",230],["T_OBJECT_OPERATOR","->",230],["T_STRING","layer",230],["T_OBJECT_OPERATOR","->",230],["T_STRING","getProductCollection",230],"(",")",["T_OBJECT_OPERATOR","->",230],["T_STRING","getCurrencyRate",230],"(",")",";",["T_WHITESPACE","\n        ",230],["T_IF","if",231],["T_WHITESPACE"," ",231],"(",["T_VARIABLE","$decrease",231],")",["T_WHITESPACE"," ",231],"{",["T_WHITESPACE","\n            ",231],["T_RETURN","return",232],["T_WHITESPACE"," ",232],"(",["T_VARIABLE","$price",232],["T_WHITESPACE"," ",232],"-",["T_WHITESPACE"," ",232],["T_STRING","self",232],["T_DOUBLE_COLON","::",232],["T_STRING","MIN_POSSIBLE_PRICE",232],["T_WHITESPACE"," ",232],"\/",["T_WHITESPACE"," ",232],["T_LNUMBER","2",232],")",["T_WHITESPACE"," ",232],"\/",["T_WHITESPACE"," ",232],["T_VARIABLE","$currencyRate",232],";",["T_WHITESPACE","\n        ",232],"}",["T_WHITESPACE","\n        ",233],["T_RETURN","return",234],["T_WHITESPACE"," ",234],"(",["T_VARIABLE","$price",234],["T_WHITESPACE"," ",234],"+",["T_WHITESPACE"," ",234],["T_STRING","self",234],["T_DOUBLE_COLON","::",234],["T_STRING","MIN_POSSIBLE_PRICE",234],["T_WHITESPACE"," ",234],"\/",["T_WHITESPACE"," ",234],["T_LNUMBER","2",234],")",["T_WHITESPACE"," ",234],"\/",["T_WHITESPACE"," ",234],["T_VARIABLE","$currencyRate",234],";",["T_WHITESPACE","\n    ",234],"}",["T_WHITESPACE","\n\n    ",235],["T_DOC_COMMENT","\/**\n     * Load range of product prices, preceding the price\n     *\n     * @param float $price\n     * @param int $index\n     * @param null|int $lowerPrice\n     * @return array|false\n     *\/",237],["T_WHITESPACE","\n    ",244],["T_PUBLIC","public",245],["T_WHITESPACE"," ",245],["T_FUNCTION","function",245],["T_WHITESPACE"," ",245],["T_STRING","loadPreviousPrices",245],"(",["T_VARIABLE","$price",245],",",["T_WHITESPACE"," ",245],["T_VARIABLE","$index",245],",",["T_WHITESPACE"," ",245],["T_VARIABLE","$lowerPrice",245],["T_WHITESPACE"," ",245],"=",["T_WHITESPACE"," ",245],["T_STRING","null",245],")",["T_WHITESPACE","\n    ",245],"{",["T_WHITESPACE","\n        ",246],["T_VARIABLE","$select",247],["T_WHITESPACE"," ",247],"=",["T_WHITESPACE"," ",247],["T_VARIABLE","$this",247],["T_OBJECT_OPERATOR","->",247],["T_STRING","_getSelect",247],"(",")",";",["T_WHITESPACE","\n        ",247],["T_VARIABLE","$priceExpression",248],["T_WHITESPACE"," ",248],"=",["T_WHITESPACE"," ",248],["T_VARIABLE","$this",248],["T_OBJECT_OPERATOR","->",248],["T_STRING","_getPriceExpression",248],"(",["T_VARIABLE","$select",248],")",";",["T_WHITESPACE","\n        ",248],["T_VARIABLE","$select",249],["T_OBJECT_OPERATOR","->",249],["T_STRING","columns",249],"(",["T_CONSTANT_ENCAPSED_STRING","'COUNT(*)'",249],")",["T_OBJECT_OPERATOR","->",249],["T_STRING","where",249],"(","\"",["T_CURLY_OPEN","{",249],["T_VARIABLE","$priceExpression",249],"}",["T_ENCAPSED_AND_WHITESPACE"," < ",249],"\"",["T_WHITESPACE"," ",249],".",["T_WHITESPACE"," ",249],["T_VARIABLE","$this",249],["T_OBJECT_OPERATOR","->",249],["T_STRING","_getComparingValue",249],"(",["T_VARIABLE","$price",249],")",")",";",["T_WHITESPACE","\n        ",249],["T_IF","if",250],["T_WHITESPACE"," ",250],"(",["T_VARIABLE","$lowerPrice",250],["T_WHITESPACE"," ",250],["T_IS_NOT_IDENTICAL","!==",250],["T_WHITESPACE"," ",250],["T_STRING","null",250],")",["T_WHITESPACE"," ",250],"{",["T_WHITESPACE","\n            ",250],["T_VARIABLE","$select",251],["T_OBJECT_OPERATOR","->",251],["T_STRING","where",251],"(","\"",["T_CURLY_OPEN","{",251],["T_VARIABLE","$priceExpression",251],"}",["T_ENCAPSED_AND_WHITESPACE"," >= ",251],"\"",["T_WHITESPACE"," ",251],".",["T_WHITESPACE"," ",251],["T_VARIABLE","$this",251],["T_OBJECT_OPERATOR","->",251],["T_STRING","_getComparingValue",251],"(",["T_VARIABLE","$lowerPrice",251],")",")",";",["T_WHITESPACE","\n        ",251],"}",["T_WHITESPACE","\n        ",252],["T_VARIABLE","$offset",253],["T_WHITESPACE"," ",253],"=",["T_WHITESPACE"," ",253],["T_VARIABLE","$this",253],["T_OBJECT_OPERATOR","->",253],["T_STRING","getConnection",253],"(",")",["T_OBJECT_OPERATOR","->",253],["T_STRING","fetchOne",253],"(",["T_VARIABLE","$select",253],")",";",["T_WHITESPACE","\n        ",253],["T_IF","if",254],["T_WHITESPACE"," ",254],"(","!",["T_VARIABLE","$offset",254],")",["T_WHITESPACE"," ",254],"{",["T_WHITESPACE","\n            ",254],["T_RETURN","return",255],["T_WHITESPACE"," ",255],["T_STRING","false",255],";",["T_WHITESPACE","\n        ",255],"}",["T_WHITESPACE","\n\n        ",256],["T_RETURN","return",258],["T_WHITESPACE"," ",258],["T_VARIABLE","$this",258],["T_OBJECT_OPERATOR","->",258],["T_STRING","loadPrices",258],"(",["T_VARIABLE","$index",258],["T_WHITESPACE"," ",258],"-",["T_WHITESPACE"," ",258],["T_VARIABLE","$offset",258],["T_WHITESPACE"," ",258],"+",["T_WHITESPACE"," ",258],["T_LNUMBER","1",258],",",["T_WHITESPACE"," ",258],["T_VARIABLE","$offset",258],["T_WHITESPACE"," ",258],"-",["T_WHITESPACE"," ",258],["T_LNUMBER","1",258],",",["T_WHITESPACE"," ",258],["T_VARIABLE","$lowerPrice",258],")",";",["T_WHITESPACE","\n    ",258],"}",["T_WHITESPACE","\n\n    ",259],["T_DOC_COMMENT","\/**\n     * Load range of product prices\n     *\n     * @param int $limit\n     * @param null|int $offset\n     * @param null|int $lowerPrice\n     * @param null|int $upperPrice\n     * @return array\n     *\/",261],["T_WHITESPACE","\n    ",269],["T_PUBLIC","public",270],["T_WHITESPACE"," ",270],["T_FUNCTION","function",270],["T_WHITESPACE"," ",270],["T_STRING","loadPrices",270],"(",["T_VARIABLE","$limit",270],",",["T_WHITESPACE"," ",270],["T_VARIABLE","$offset",270],["T_WHITESPACE"," ",270],"=",["T_WHITESPACE"," ",270],["T_STRING","null",270],",",["T_WHITESPACE"," ",270],["T_VARIABLE","$lowerPrice",270],["T_WHITESPACE"," ",270],"=",["T_WHITESPACE"," ",270],["T_STRING","null",270],",",["T_WHITESPACE"," ",270],["T_VARIABLE","$upperPrice",270],["T_WHITESPACE"," ",270],"=",["T_WHITESPACE"," ",270],["T_STRING","null",270],")",["T_WHITESPACE","\n    ",270],"{",["T_WHITESPACE","\n        ",271],["T_VARIABLE","$select",272],["T_WHITESPACE"," ",272],"=",["T_WHITESPACE"," ",272],["T_VARIABLE","$this",272],["T_OBJECT_OPERATOR","->",272],["T_STRING","_getSelect",272],"(",")",";",["T_WHITESPACE","\n        ",272],["T_VARIABLE","$priceExpression",273],["T_WHITESPACE"," ",273],"=",["T_WHITESPACE"," ",273],["T_VARIABLE","$this",273],["T_OBJECT_OPERATOR","->",273],["T_STRING","_getPriceExpression",273],"(",["T_VARIABLE","$select",273],")",";",["T_WHITESPACE","\n        ",273],["T_VARIABLE","$select",274],["T_OBJECT_OPERATOR","->",274],["T_STRING","columns",274],"(","[",["T_CONSTANT_ENCAPSED_STRING","'min_price_expr'",274],["T_WHITESPACE"," ",274],["T_DOUBLE_ARROW","=>",274],["T_WHITESPACE"," ",274],["T_VARIABLE","$this",274],["T_OBJECT_OPERATOR","->",274],["T_STRING","_getFullPriceExpression",274],"(",["T_VARIABLE","$select",274],")","]",")",";",["T_WHITESPACE","\n        ",274],["T_IF","if",275],["T_WHITESPACE"," ",275],"(",["T_VARIABLE","$lowerPrice",275],["T_WHITESPACE"," ",275],["T_IS_NOT_IDENTICAL","!==",275],["T_WHITESPACE"," ",275],["T_STRING","null",275],")",["T_WHITESPACE"," ",275],"{",["T_WHITESPACE","\n            ",275],["T_VARIABLE","$select",276],["T_OBJECT_OPERATOR","->",276],["T_STRING","where",276],"(","\"",["T_CURLY_OPEN","{",276],["T_VARIABLE","$priceExpression",276],"}",["T_ENCAPSED_AND_WHITESPACE"," >= ",276],"\"",["T_WHITESPACE"," ",276],".",["T_WHITESPACE"," ",276],["T_VARIABLE","$this",276],["T_OBJECT_OPERATOR","->",276],["T_STRING","_getComparingValue",276],"(",["T_VARIABLE","$lowerPrice",276],")",")",";",["T_WHITESPACE","\n        ",276],"}",["T_WHITESPACE","\n        ",277],["T_IF","if",278],["T_WHITESPACE"," ",278],"(",["T_VARIABLE","$upperPrice",278],["T_WHITESPACE"," ",278],["T_IS_NOT_IDENTICAL","!==",278],["T_WHITESPACE"," ",278],["T_STRING","null",278],")",["T_WHITESPACE"," ",278],"{",["T_WHITESPACE","\n            ",278],["T_VARIABLE","$select",279],["T_OBJECT_OPERATOR","->",279],["T_STRING","where",279],"(","\"",["T_CURLY_OPEN","{",279],["T_VARIABLE","$priceExpression",279],"}",["T_ENCAPSED_AND_WHITESPACE"," < ",279],"\"",["T_WHITESPACE"," ",279],".",["T_WHITESPACE"," ",279],["T_VARIABLE","$this",279],["T_OBJECT_OPERATOR","->",279],["T_STRING","_getComparingValue",279],"(",["T_VARIABLE","$upperPrice",279],")",")",";",["T_WHITESPACE","\n        ",279],"}",["T_WHITESPACE","\n        ",280],["T_VARIABLE","$select",281],["T_OBJECT_OPERATOR","->",281],["T_STRING","order",281],"(","\"",["T_CURLY_OPEN","{",281],["T_VARIABLE","$priceExpression",281],"}",["T_ENCAPSED_AND_WHITESPACE"," ASC",281],"\"",")",["T_OBJECT_OPERATOR","->",281],["T_STRING","limit",281],"(",["T_VARIABLE","$limit",281],",",["T_WHITESPACE"," ",281],["T_VARIABLE","$offset",281],")",";",["T_WHITESPACE","\n\n        ",281],["T_RETURN","return",283],["T_WHITESPACE"," ",283],["T_VARIABLE","$this",283],["T_OBJECT_OPERATOR","->",283],["T_STRING","getConnection",283],"(",")",["T_OBJECT_OPERATOR","->",283],["T_STRING","fetchCol",283],"(",["T_VARIABLE","$select",283],")",";",["T_WHITESPACE","\n    ",283],"}",["T_WHITESPACE","\n\n    ",284],["T_DOC_COMMENT","\/**\n     * Load range of product prices, next to the price\n     *\n     * @param float $price\n     * @param int $rightIndex\n     * @param null|int $upperPrice\n     * @return array|false\n     *\/",286],["T_WHITESPACE","\n    ",293],["T_PUBLIC","public",294],["T_WHITESPACE"," ",294],["T_FUNCTION","function",294],["T_WHITESPACE"," ",294],["T_STRING","loadNextPrices",294],"(",["T_VARIABLE","$price",294],",",["T_WHITESPACE"," ",294],["T_VARIABLE","$rightIndex",294],",",["T_WHITESPACE"," ",294],["T_VARIABLE","$upperPrice",294],["T_WHITESPACE"," ",294],"=",["T_WHITESPACE"," ",294],["T_STRING","null",294],")",["T_WHITESPACE","\n    ",294],"{",["T_WHITESPACE","\n        ",295],["T_VARIABLE","$select",296],["T_WHITESPACE"," ",296],"=",["T_WHITESPACE"," ",296],["T_VARIABLE","$this",296],["T_OBJECT_OPERATOR","->",296],["T_STRING","_getSelect",296],"(",")",";",["T_WHITESPACE","\n\n        ",296],["T_VARIABLE","$pricesSelect",298],["T_WHITESPACE"," ",298],"=",["T_WHITESPACE"," ",298],["T_CLONE","clone",298],["T_WHITESPACE"," ",298],["T_VARIABLE","$select",298],";",["T_WHITESPACE","\n        ",298],["T_VARIABLE","$priceExpression",299],["T_WHITESPACE"," ",299],"=",["T_WHITESPACE"," ",299],["T_VARIABLE","$this",299],["T_OBJECT_OPERATOR","->",299],["T_STRING","_getPriceExpression",299],"(",["T_VARIABLE","$pricesSelect",299],")",";",["T_WHITESPACE","\n\n        ",299],["T_VARIABLE","$select",301],["T_OBJECT_OPERATOR","->",301],["T_STRING","columns",301],"(",["T_WHITESPACE","\n            ",301],["T_CONSTANT_ENCAPSED_STRING","'COUNT(*)'",302],["T_WHITESPACE","\n        ",302],")",["T_OBJECT_OPERATOR","->",303],["T_STRING","where",303],"(",["T_WHITESPACE","\n            ",303],"\"",["T_CURLY_OPEN","{",304],["T_VARIABLE","$priceExpression",304],"}",["T_ENCAPSED_AND_WHITESPACE"," > ",304],"\"",["T_WHITESPACE"," ",304],".",["T_WHITESPACE"," ",304],["T_VARIABLE","$this",304],["T_OBJECT_OPERATOR","->",304],["T_STRING","_getComparingValue",304],"(",["T_VARIABLE","$price",304],",",["T_WHITESPACE"," ",304],["T_STRING","false",304],")",["T_WHITESPACE","\n        ",304],")",";",["T_WHITESPACE","\n        ",305],["T_IF","if",306],["T_WHITESPACE"," ",306],"(",["T_VARIABLE","$upperPrice",306],["T_WHITESPACE"," ",306],["T_IS_NOT_IDENTICAL","!==",306],["T_WHITESPACE"," ",306],["T_STRING","null",306],")",["T_WHITESPACE"," ",306],"{",["T_WHITESPACE","\n            ",306],["T_VARIABLE","$select",307],["T_OBJECT_OPERATOR","->",307],["T_STRING","where",307],"(","\"",["T_CURLY_OPEN","{",307],["T_VARIABLE","$priceExpression",307],"}",["T_ENCAPSED_AND_WHITESPACE"," < ",307],"\"",["T_WHITESPACE"," ",307],".",["T_WHITESPACE"," ",307],["T_VARIABLE","$this",307],["T_OBJECT_OPERATOR","->",307],["T_STRING","_getComparingValue",307],"(",["T_VARIABLE","$upperPrice",307],")",")",";",["T_WHITESPACE","\n        ",307],"}",["T_WHITESPACE","\n        ",308],["T_VARIABLE","$offset",309],["T_WHITESPACE"," ",309],"=",["T_WHITESPACE"," ",309],["T_VARIABLE","$this",309],["T_OBJECT_OPERATOR","->",309],["T_STRING","getConnection",309],"(",")",["T_OBJECT_OPERATOR","->",309],["T_STRING","fetchOne",309],"(",["T_VARIABLE","$select",309],")",";",["T_WHITESPACE","\n        ",309],["T_IF","if",310],["T_WHITESPACE"," ",310],"(","!",["T_VARIABLE","$offset",310],")",["T_WHITESPACE"," ",310],"{",["T_WHITESPACE","\n            ",310],["T_RETURN","return",311],["T_WHITESPACE"," ",311],["T_STRING","false",311],";",["T_WHITESPACE","\n        ",311],"}",["T_WHITESPACE","\n\n        ",312],["T_VARIABLE","$pricesSelect",314],["T_OBJECT_OPERATOR","->",314],["T_STRING","columns",314],"(",["T_WHITESPACE","\n            ",314],"[",["T_CONSTANT_ENCAPSED_STRING","'min_price_expr'",315],["T_WHITESPACE"," ",315],["T_DOUBLE_ARROW","=>",315],["T_WHITESPACE"," ",315],["T_VARIABLE","$this",315],["T_OBJECT_OPERATOR","->",315],["T_STRING","_getFullPriceExpression",315],"(",["T_VARIABLE","$pricesSelect",315],")","]",["T_WHITESPACE","\n        ",315],")",["T_OBJECT_OPERATOR","->",316],["T_STRING","where",316],"(",["T_WHITESPACE","\n            ",316],"\"",["T_CURLY_OPEN","{",317],["T_VARIABLE","$priceExpression",317],"}",["T_ENCAPSED_AND_WHITESPACE"," >= ",317],"\"",["T_WHITESPACE"," ",317],".",["T_WHITESPACE"," ",317],["T_VARIABLE","$this",317],["T_OBJECT_OPERATOR","->",317],["T_STRING","_getComparingValue",317],"(",["T_VARIABLE","$price",317],")",["T_WHITESPACE","\n        ",317],")",";",["T_WHITESPACE","\n        ",318],["T_IF","if",319],["T_WHITESPACE"," ",319],"(",["T_VARIABLE","$upperPrice",319],["T_WHITESPACE"," ",319],["T_IS_NOT_IDENTICAL","!==",319],["T_WHITESPACE"," ",319],["T_STRING","null",319],")",["T_WHITESPACE"," ",319],"{",["T_WHITESPACE","\n            ",319],["T_VARIABLE","$pricesSelect",320],["T_OBJECT_OPERATOR","->",320],["T_STRING","where",320],"(","\"",["T_CURLY_OPEN","{",320],["T_VARIABLE","$priceExpression",320],"}",["T_ENCAPSED_AND_WHITESPACE"," < ",320],"\"",["T_WHITESPACE"," ",320],".",["T_WHITESPACE"," ",320],["T_VARIABLE","$this",320],["T_OBJECT_OPERATOR","->",320],["T_STRING","_getComparingValue",320],"(",["T_VARIABLE","$upperPrice",320],")",")",";",["T_WHITESPACE","\n        ",320],"}",["T_WHITESPACE","\n        ",321],["T_VARIABLE","$pricesSelect",322],["T_OBJECT_OPERATOR","->",322],["T_STRING","order",322],"(","\"",["T_CURLY_OPEN","{",322],["T_VARIABLE","$priceExpression",322],"}",["T_ENCAPSED_AND_WHITESPACE"," DESC",322],"\"",")",["T_OBJECT_OPERATOR","->",322],["T_STRING","limit",322],"(",["T_VARIABLE","$rightIndex",322],["T_WHITESPACE"," ",322],"-",["T_WHITESPACE"," ",322],["T_VARIABLE","$offset",322],["T_WHITESPACE"," ",322],"+",["T_WHITESPACE"," ",322],["T_LNUMBER","1",322],",",["T_WHITESPACE"," ",322],["T_VARIABLE","$offset",322],["T_WHITESPACE"," ",322],"-",["T_WHITESPACE"," ",322],["T_LNUMBER","1",322],")",";",["T_WHITESPACE","\n\n        ",322],["T_RETURN","return",324],["T_WHITESPACE"," ",324],["T_STRING","array_reverse",324],"(",["T_VARIABLE","$this",324],["T_OBJECT_OPERATOR","->",324],["T_STRING","getConnection",324],"(",")",["T_OBJECT_OPERATOR","->",324],["T_STRING","fetchCol",324],"(",["T_VARIABLE","$pricesSelect",324],")",")",";",["T_WHITESPACE","\n    ",324],"}",["T_WHITESPACE","\n\n    ",325],["T_DOC_COMMENT","\/**\n     * Apply price range filter to product collection\n     *\n     * @param \\Magento\\Catalog\\Model\\Layer\\Filter\\FilterInterface $filter\n     * @param mixed $interval\n     * @return $this\n     *\/",327],["T_WHITESPACE","\n    ",333],["T_PUBLIC","public",334],["T_WHITESPACE"," ",334],["T_FUNCTION","function",334],["T_WHITESPACE"," ",334],["T_STRING","applyPriceRange",334],"(",["T_NS_SEPARATOR","\\",334],["T_STRING","Magento",334],["T_NS_SEPARATOR","\\",334],["T_STRING","Catalog",334],["T_NS_SEPARATOR","\\",334],["T_STRING","Model",334],["T_NS_SEPARATOR","\\",334],["T_STRING","Layer",334],["T_NS_SEPARATOR","\\",334],["T_STRING","Filter",334],["T_NS_SEPARATOR","\\",334],["T_STRING","FilterInterface",334],["T_WHITESPACE"," ",334],["T_VARIABLE","$filter",334],",",["T_WHITESPACE"," ",334],["T_VARIABLE","$interval",334],")",["T_WHITESPACE","\n    ",334],"{",["T_WHITESPACE","\n        ",335],["T_IF","if",336],["T_WHITESPACE"," ",336],"(","!",["T_VARIABLE","$interval",336],")",["T_WHITESPACE"," ",336],"{",["T_WHITESPACE","\n            ",336],["T_RETURN","return",337],["T_WHITESPACE"," ",337],["T_VARIABLE","$this",337],";",["T_WHITESPACE","\n        ",337],"}",["T_WHITESPACE","\n\n        ",338],["T_LIST","list",340],"(",["T_VARIABLE","$from",340],",",["T_WHITESPACE"," ",340],["T_VARIABLE","$to",340],")",["T_WHITESPACE"," ",340],"=",["T_WHITESPACE"," ",340],["T_VARIABLE","$interval",340],";",["T_WHITESPACE","\n        ",340],["T_IF","if",341],["T_WHITESPACE"," ",341],"(",["T_VARIABLE","$from",341],["T_WHITESPACE"," ",341],["T_IS_IDENTICAL","===",341],["T_WHITESPACE"," ",341],["T_CONSTANT_ENCAPSED_STRING","''",341],["T_WHITESPACE"," ",341],["T_BOOLEAN_AND","&&",341],["T_WHITESPACE"," ",341],["T_VARIABLE","$to",341],["T_WHITESPACE"," ",341],["T_IS_IDENTICAL","===",341],["T_WHITESPACE"," ",341],["T_CONSTANT_ENCAPSED_STRING","''",341],")",["T_WHITESPACE"," ",341],"{",["T_WHITESPACE","\n            ",341],["T_RETURN","return",342],["T_WHITESPACE"," ",342],["T_VARIABLE","$this",342],";",["T_WHITESPACE","\n        ",342],"}",["T_WHITESPACE","\n\n        ",343],["T_VARIABLE","$select",345],["T_WHITESPACE"," ",345],"=",["T_WHITESPACE"," ",345],["T_VARIABLE","$filter",345],["T_OBJECT_OPERATOR","->",345],["T_STRING","getLayer",345],"(",")",["T_OBJECT_OPERATOR","->",345],["T_STRING","getProductCollection",345],"(",")",["T_OBJECT_OPERATOR","->",345],["T_STRING","getSelect",345],"(",")",";",["T_WHITESPACE","\n        ",345],["T_VARIABLE","$priceExpr",346],["T_WHITESPACE"," ",346],"=",["T_WHITESPACE"," ",346],["T_VARIABLE","$this",346],["T_OBJECT_OPERATOR","->",346],["T_STRING","_getPriceExpression",346],"(",["T_VARIABLE","$select",346],",",["T_WHITESPACE"," ",346],["T_STRING","false",346],")",";",["T_WHITESPACE","\n\n        ",346],["T_IF","if",348],["T_WHITESPACE"," ",348],"(",["T_VARIABLE","$to",348],["T_WHITESPACE"," ",348],["T_IS_NOT_IDENTICAL","!==",348],["T_WHITESPACE"," ",348],["T_CONSTANT_ENCAPSED_STRING","''",348],")",["T_WHITESPACE"," ",348],"{",["T_WHITESPACE","\n            ",348],["T_VARIABLE","$to",349],["T_WHITESPACE"," ",349],"=",["T_WHITESPACE"," ",349],["T_DOUBLE_CAST","(double)",349],["T_VARIABLE","$to",349],";",["T_WHITESPACE","\n            ",349],["T_IF","if",350],["T_WHITESPACE"," ",350],"(",["T_VARIABLE","$from",350],["T_WHITESPACE"," ",350],["T_IS_EQUAL","==",350],["T_WHITESPACE"," ",350],["T_VARIABLE","$to",350],")",["T_WHITESPACE"," ",350],"{",["T_WHITESPACE","\n                ",350],["T_VARIABLE","$to",351],["T_WHITESPACE"," ",351],["T_PLUS_EQUAL","+=",351],["T_WHITESPACE"," ",351],["T_STRING","self",351],["T_DOUBLE_COLON","::",351],["T_STRING","MIN_POSSIBLE_PRICE",351],";",["T_WHITESPACE","\n            ",351],"}",["T_WHITESPACE","\n        ",352],"}",["T_WHITESPACE","\n\n        ",353],["T_IF","if",355],["T_WHITESPACE"," ",355],"(",["T_VARIABLE","$from",355],["T_WHITESPACE"," ",355],["T_IS_NOT_IDENTICAL","!==",355],["T_WHITESPACE"," ",355],["T_CONSTANT_ENCAPSED_STRING","''",355],")",["T_WHITESPACE"," ",355],"{",["T_WHITESPACE","\n            ",355],["T_VARIABLE","$select",356],["T_OBJECT_OPERATOR","->",356],["T_STRING","where",356],"(",["T_VARIABLE","$priceExpr",356],["T_WHITESPACE"," ",356],".",["T_WHITESPACE"," ",356],["T_CONSTANT_ENCAPSED_STRING","' >= '",356],["T_WHITESPACE"," ",356],".",["T_WHITESPACE"," ",356],["T_VARIABLE","$this",356],["T_OBJECT_OPERATOR","->",356],["T_STRING","_getComparingValue",356],"(",["T_VARIABLE","$from",356],")",")",";",["T_WHITESPACE","\n        ",356],"}",["T_WHITESPACE","\n        ",357],["T_IF","if",358],["T_WHITESPACE"," ",358],"(",["T_VARIABLE","$to",358],["T_WHITESPACE"," ",358],["T_IS_NOT_IDENTICAL","!==",358],["T_WHITESPACE"," ",358],["T_CONSTANT_ENCAPSED_STRING","''",358],")",["T_WHITESPACE"," ",358],"{",["T_WHITESPACE","\n            ",358],["T_VARIABLE","$select",359],["T_OBJECT_OPERATOR","->",359],["T_STRING","where",359],"(",["T_VARIABLE","$priceExpr",359],["T_WHITESPACE"," ",359],".",["T_WHITESPACE"," ",359],["T_CONSTANT_ENCAPSED_STRING","' < '",359],["T_WHITESPACE"," ",359],".",["T_WHITESPACE"," ",359],["T_VARIABLE","$this",359],["T_OBJECT_OPERATOR","->",359],["T_STRING","_getComparingValue",359],"(",["T_VARIABLE","$to",359],")",")",";",["T_WHITESPACE","\n        ",359],"}",["T_WHITESPACE","\n\n        ",360],["T_RETURN","return",362],["T_WHITESPACE"," ",362],["T_VARIABLE","$this",362],";",["T_WHITESPACE","\n    ",362],"}",["T_WHITESPACE","\n\n    ",363],["T_DOC_COMMENT","\/**\n     * Initialize connection and define main table name\n     *\n     * @return void\n     *\/",365],["T_WHITESPACE","\n    ",369],["T_PROTECTED","protected",370],["T_WHITESPACE"," ",370],["T_FUNCTION","function",370],["T_WHITESPACE"," ",370],["T_STRING","_construct",370],"(",")",["T_WHITESPACE","\n    ",370],"{",["T_WHITESPACE","\n        ",371],["T_VARIABLE","$this",372],["T_OBJECT_OPERATOR","->",372],["T_STRING","_init",372],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog_product_index_price'",372],",",["T_WHITESPACE"," ",372],["T_CONSTANT_ENCAPSED_STRING","'entity_id'",372],")",";",["T_WHITESPACE","\n    ",372],"}",["T_WHITESPACE","\n\n    ",373],["T_DOC_COMMENT","\/**\n     * Retrieve joined price index table alias\n     *\n     * @return string\n     *\/",375],["T_WHITESPACE","\n    ",379],["T_PROTECTED","protected",380],["T_WHITESPACE"," ",380],["T_FUNCTION","function",380],["T_WHITESPACE"," ",380],["T_STRING","_getIndexTableAlias",380],"(",")",["T_WHITESPACE","\n    ",380],"{",["T_WHITESPACE","\n        ",381],["T_RETURN","return",382],["T_WHITESPACE"," ",382],["T_CONSTANT_ENCAPSED_STRING","'price_index'",382],";",["T_WHITESPACE","\n    ",382],"}",["T_WHITESPACE","\n",383],"}",["T_WHITESPACE","\n",384]]
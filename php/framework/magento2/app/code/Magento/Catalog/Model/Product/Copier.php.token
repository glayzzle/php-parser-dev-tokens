[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Catalog product copier. Creates product duplicate\n *\n * Copyright \u00c2\u00a9 2013-2017 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n *\/",2],["T_WHITESPACE","\n",7],["T_NAMESPACE","namespace",8],["T_WHITESPACE"," ",8],["T_STRING","Magento",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Catalog",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Model",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Product",8],";",["T_WHITESPACE","\n\n",8],["T_USE","use",10],["T_WHITESPACE"," ",10],["T_STRING","Magento",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Catalog",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Api",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Data",10],["T_NS_SEPARATOR","\\",10],["T_STRING","ProductInterface",10],";",["T_WHITESPACE","\n\n",10],["T_CLASS","class",12],["T_WHITESPACE"," ",12],["T_STRING","Copier",12],["T_WHITESPACE","\n",12],"{",["T_WHITESPACE","\n    ",13],["T_DOC_COMMENT","\/**\n     * @var Option\\Repository\n     *\/",14],["T_WHITESPACE","\n    ",16],["T_PROTECTED","protected",17],["T_WHITESPACE"," ",17],["T_VARIABLE","$optionRepository",17],";",["T_WHITESPACE","\n\n    ",17],["T_DOC_COMMENT","\/**\n     * @var CopyConstructorInterface\n     *\/",19],["T_WHITESPACE","\n    ",21],["T_PROTECTED","protected",22],["T_WHITESPACE"," ",22],["T_VARIABLE","$copyConstructor",22],";",["T_WHITESPACE","\n\n    ",22],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Catalog\\Model\\ProductFactory\n     *\/",24],["T_WHITESPACE","\n    ",26],["T_PROTECTED","protected",27],["T_WHITESPACE"," ",27],["T_VARIABLE","$productFactory",27],";",["T_WHITESPACE","\n\n    ",27],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Framework\\EntityManager\\MetadataPool\n     *\/",29],["T_WHITESPACE","\n    ",31],["T_PROTECTED","protected",32],["T_WHITESPACE"," ",32],["T_VARIABLE","$metadataPool",32],";",["T_WHITESPACE","\n\n    ",32],["T_DOC_COMMENT","\/**\n     * @param CopyConstructorInterface $copyConstructor\n     * @param \\Magento\\Catalog\\Model\\ProductFactory $productFactory\n     *\/",34],["T_WHITESPACE","\n    ",37],["T_PUBLIC","public",38],["T_WHITESPACE"," ",38],["T_FUNCTION","function",38],["T_WHITESPACE"," ",38],["T_STRING","__construct",38],"(",["T_WHITESPACE","\n        ",38],["T_STRING","CopyConstructorInterface",39],["T_WHITESPACE"," ",39],["T_VARIABLE","$copyConstructor",39],",",["T_WHITESPACE","\n        ",39],["T_NS_SEPARATOR","\\",40],["T_STRING","Magento",40],["T_NS_SEPARATOR","\\",40],["T_STRING","Catalog",40],["T_NS_SEPARATOR","\\",40],["T_STRING","Model",40],["T_NS_SEPARATOR","\\",40],["T_STRING","ProductFactory",40],["T_WHITESPACE"," ",40],["T_VARIABLE","$productFactory",40],["T_WHITESPACE","\n    ",40],")",["T_WHITESPACE"," ",41],"{",["T_WHITESPACE","\n        ",41],["T_VARIABLE","$this",42],["T_OBJECT_OPERATOR","->",42],["T_STRING","productFactory",42],["T_WHITESPACE"," ",42],"=",["T_WHITESPACE"," ",42],["T_VARIABLE","$productFactory",42],";",["T_WHITESPACE","\n        ",42],["T_VARIABLE","$this",43],["T_OBJECT_OPERATOR","->",43],["T_STRING","copyConstructor",43],["T_WHITESPACE"," ",43],"=",["T_WHITESPACE"," ",43],["T_VARIABLE","$copyConstructor",43],";",["T_WHITESPACE","\n    ",43],"}",["T_WHITESPACE","\n\n    ",44],["T_DOC_COMMENT","\/**\n     * Create product duplicate\n     *\n     * @param \\Magento\\Catalog\\Model\\Product $product\n     * @return \\Magento\\Catalog\\Model\\Product\n     *\/",46],["T_WHITESPACE","\n    ",51],["T_PUBLIC","public",52],["T_WHITESPACE"," ",52],["T_FUNCTION","function",52],["T_WHITESPACE"," ",52],["T_STRING","copy",52],"(",["T_NS_SEPARATOR","\\",52],["T_STRING","Magento",52],["T_NS_SEPARATOR","\\",52],["T_STRING","Catalog",52],["T_NS_SEPARATOR","\\",52],["T_STRING","Model",52],["T_NS_SEPARATOR","\\",52],["T_STRING","Product",52],["T_WHITESPACE"," ",52],["T_VARIABLE","$product",52],")",["T_WHITESPACE","\n    ",52],"{",["T_WHITESPACE","\n        ",53],["T_VARIABLE","$product",54],["T_OBJECT_OPERATOR","->",54],["T_STRING","getWebsiteIds",54],"(",")",";",["T_WHITESPACE","\n        ",54],["T_VARIABLE","$product",55],["T_OBJECT_OPERATOR","->",55],["T_STRING","getCategoryIds",55],"(",")",";",["T_WHITESPACE","\n\n        ",55],["T_DOC_COMMENT","\/** @var \\Magento\\Catalog\\Model\\Product $duplicate *\/",57],["T_WHITESPACE","\n        ",57],["T_VARIABLE","$duplicate",58],["T_WHITESPACE"," ",58],"=",["T_WHITESPACE"," ",58],["T_VARIABLE","$this",58],["T_OBJECT_OPERATOR","->",58],["T_STRING","productFactory",58],["T_OBJECT_OPERATOR","->",58],["T_STRING","create",58],"(",")",";",["T_WHITESPACE","\n        ",58],["T_VARIABLE","$duplicate",59],["T_OBJECT_OPERATOR","->",59],["T_STRING","setData",59],"(",["T_VARIABLE","$product",59],["T_OBJECT_OPERATOR","->",59],["T_STRING","getData",59],"(",")",")",";",["T_WHITESPACE","\n        ",59],["T_VARIABLE","$duplicate",60],["T_OBJECT_OPERATOR","->",60],["T_STRING","setOptions",60],"(","[","]",")",";",["T_WHITESPACE","\n        ",60],["T_VARIABLE","$duplicate",61],["T_OBJECT_OPERATOR","->",61],["T_STRING","setIsDuplicate",61],"(",["T_STRING","true",61],")",";",["T_WHITESPACE","\n        ",61],["T_VARIABLE","$duplicate",62],["T_OBJECT_OPERATOR","->",62],["T_STRING","setOriginalId",62],"(",["T_VARIABLE","$product",62],["T_OBJECT_OPERATOR","->",62],["T_STRING","getEntityId",62],"(",")",")",";",["T_WHITESPACE","\n        ",62],["T_VARIABLE","$duplicate",63],["T_OBJECT_OPERATOR","->",63],["T_STRING","setStatus",63],"(",["T_NS_SEPARATOR","\\",63],["T_STRING","Magento",63],["T_NS_SEPARATOR","\\",63],["T_STRING","Catalog",63],["T_NS_SEPARATOR","\\",63],["T_STRING","Model",63],["T_NS_SEPARATOR","\\",63],["T_STRING","Product",63],["T_NS_SEPARATOR","\\",63],["T_STRING","Attribute",63],["T_NS_SEPARATOR","\\",63],["T_STRING","Source",63],["T_NS_SEPARATOR","\\",63],["T_STRING","Status",63],["T_DOUBLE_COLON","::",63],["T_STRING","STATUS_DISABLED",63],")",";",["T_WHITESPACE","\n        ",63],["T_VARIABLE","$duplicate",64],["T_OBJECT_OPERATOR","->",64],["T_STRING","setCreatedAt",64],"(",["T_STRING","null",64],")",";",["T_WHITESPACE","\n        ",64],["T_VARIABLE","$duplicate",65],["T_OBJECT_OPERATOR","->",65],["T_STRING","setUpdatedAt",65],"(",["T_STRING","null",65],")",";",["T_WHITESPACE","\n        ",65],["T_VARIABLE","$duplicate",66],["T_OBJECT_OPERATOR","->",66],["T_STRING","setId",66],"(",["T_STRING","null",66],")",";",["T_WHITESPACE","\n        ",66],["T_VARIABLE","$duplicate",67],["T_OBJECT_OPERATOR","->",67],["T_STRING","setStoreId",67],"(",["T_NS_SEPARATOR","\\",67],["T_STRING","Magento",67],["T_NS_SEPARATOR","\\",67],["T_STRING","Store",67],["T_NS_SEPARATOR","\\",67],["T_STRING","Model",67],["T_NS_SEPARATOR","\\",67],["T_STRING","Store",67],["T_DOUBLE_COLON","::",67],["T_STRING","DEFAULT_STORE_ID",67],")",";",["T_WHITESPACE","\n\n        ",67],["T_VARIABLE","$this",69],["T_OBJECT_OPERATOR","->",69],["T_STRING","copyConstructor",69],["T_OBJECT_OPERATOR","->",69],["T_STRING","build",69],"(",["T_VARIABLE","$product",69],",",["T_WHITESPACE"," ",69],["T_VARIABLE","$duplicate",69],")",";",["T_WHITESPACE","\n        ",69],["T_VARIABLE","$isDuplicateSaved",70],["T_WHITESPACE"," ",70],"=",["T_WHITESPACE"," ",70],["T_STRING","false",70],";",["T_WHITESPACE","\n        ",70],["T_DO","do",71],["T_WHITESPACE"," ",71],"{",["T_WHITESPACE","\n            ",71],["T_VARIABLE","$urlKey",72],["T_WHITESPACE"," ",72],"=",["T_WHITESPACE"," ",72],["T_VARIABLE","$duplicate",72],["T_OBJECT_OPERATOR","->",72],["T_STRING","getUrlKey",72],"(",")",";",["T_WHITESPACE","\n            ",72],["T_VARIABLE","$urlKey",73],["T_WHITESPACE"," ",73],"=",["T_WHITESPACE"," ",73],["T_STRING","preg_match",73],"(",["T_CONSTANT_ENCAPSED_STRING","'\/(.*)-(\\d+)$\/'",73],",",["T_WHITESPACE"," ",73],["T_VARIABLE","$urlKey",73],",",["T_WHITESPACE"," ",73],["T_VARIABLE","$matches",73],")",["T_WHITESPACE","\n                ",73],"?",["T_WHITESPACE"," ",74],["T_VARIABLE","$matches",74],"[",["T_LNUMBER","1",74],"]",["T_WHITESPACE"," ",74],".",["T_WHITESPACE"," ",74],["T_CONSTANT_ENCAPSED_STRING","'-'",74],["T_WHITESPACE"," ",74],".",["T_WHITESPACE"," ",74],"(",["T_VARIABLE","$matches",74],"[",["T_LNUMBER","2",74],"]",["T_WHITESPACE"," ",74],"+",["T_WHITESPACE"," ",74],["T_LNUMBER","1",74],")",["T_WHITESPACE","\n                ",74],":",["T_WHITESPACE"," ",75],["T_VARIABLE","$urlKey",75],["T_WHITESPACE"," ",75],".",["T_WHITESPACE"," ",75],["T_CONSTANT_ENCAPSED_STRING","'-1'",75],";",["T_WHITESPACE","\n            ",75],["T_VARIABLE","$duplicate",76],["T_OBJECT_OPERATOR","->",76],["T_STRING","setUrlKey",76],"(",["T_VARIABLE","$urlKey",76],")",";",["T_WHITESPACE","\n            ",76],["T_TRY","try",77],["T_WHITESPACE"," ",77],"{",["T_WHITESPACE","\n                ",77],["T_VARIABLE","$duplicate",78],["T_OBJECT_OPERATOR","->",78],["T_STRING","save",78],"(",")",";",["T_WHITESPACE","\n                ",78],["T_VARIABLE","$isDuplicateSaved",79],["T_WHITESPACE"," ",79],"=",["T_WHITESPACE"," ",79],["T_STRING","true",79],";",["T_WHITESPACE","\n            ",79],"}",["T_WHITESPACE"," ",80],["T_CATCH","catch",80],["T_WHITESPACE"," ",80],"(",["T_NS_SEPARATOR","\\",80],["T_STRING","Magento",80],["T_NS_SEPARATOR","\\",80],["T_STRING","Framework",80],["T_NS_SEPARATOR","\\",80],["T_STRING","Exception",80],["T_NS_SEPARATOR","\\",80],["T_STRING","AlreadyExistsException",80],["T_WHITESPACE"," ",80],["T_VARIABLE","$e",80],")",["T_WHITESPACE"," ",80],"{",["T_WHITESPACE","\n            ",80],"}",["T_WHITESPACE","\n        ",81],"}",["T_WHITESPACE"," ",82],["T_WHILE","while",82],["T_WHITESPACE"," ",82],"(","!",["T_VARIABLE","$isDuplicateSaved",82],")",";",["T_WHITESPACE","\n        ",82],["T_VARIABLE","$this",83],["T_OBJECT_OPERATOR","->",83],["T_STRING","getOptionRepository",83],"(",")",["T_OBJECT_OPERATOR","->",83],["T_STRING","duplicate",83],"(",["T_VARIABLE","$product",83],",",["T_WHITESPACE"," ",83],["T_VARIABLE","$duplicate",83],")",";",["T_WHITESPACE","\n        ",83],["T_VARIABLE","$metadata",84],["T_WHITESPACE"," ",84],"=",["T_WHITESPACE"," ",84],["T_VARIABLE","$this",84],["T_OBJECT_OPERATOR","->",84],["T_STRING","getMetadataPool",84],"(",")",["T_OBJECT_OPERATOR","->",84],["T_STRING","getMetadata",84],"(",["T_STRING","ProductInterface",84],["T_DOUBLE_COLON","::",84],["T_CLASS","class",84],")",";",["T_WHITESPACE","\n        ",84],["T_VARIABLE","$product",85],["T_OBJECT_OPERATOR","->",85],["T_STRING","getResource",85],"(",")",["T_OBJECT_OPERATOR","->",85],["T_STRING","duplicate",85],"(",["T_WHITESPACE","\n            ",85],["T_VARIABLE","$product",86],["T_OBJECT_OPERATOR","->",86],["T_STRING","getData",86],"(",["T_VARIABLE","$metadata",86],["T_OBJECT_OPERATOR","->",86],["T_STRING","getLinkField",86],"(",")",")",",",["T_WHITESPACE","\n            ",86],["T_VARIABLE","$duplicate",87],["T_OBJECT_OPERATOR","->",87],["T_STRING","getData",87],"(",["T_VARIABLE","$metadata",87],["T_OBJECT_OPERATOR","->",87],["T_STRING","getLinkField",87],"(",")",")",["T_WHITESPACE","\n        ",87],")",";",["T_WHITESPACE","\n        ",88],["T_RETURN","return",89],["T_WHITESPACE"," ",89],["T_VARIABLE","$duplicate",89],";",["T_WHITESPACE","\n    ",89],"}",["T_WHITESPACE","\n\n    ",90],["T_DOC_COMMENT","\/**\n     * @return Option\\Repository\n     * @deprecated\n     *\/",92],["T_WHITESPACE","\n    ",95],["T_PRIVATE","private",96],["T_WHITESPACE"," ",96],["T_FUNCTION","function",96],["T_WHITESPACE"," ",96],["T_STRING","getOptionRepository",96],"(",")",["T_WHITESPACE","\n    ",96],"{",["T_WHITESPACE","\n        ",97],["T_IF","if",98],["T_WHITESPACE"," ",98],"(",["T_STRING","null",98],["T_WHITESPACE"," ",98],["T_IS_IDENTICAL","===",98],["T_WHITESPACE"," ",98],["T_VARIABLE","$this",98],["T_OBJECT_OPERATOR","->",98],["T_STRING","optionRepository",98],")",["T_WHITESPACE"," ",98],"{",["T_WHITESPACE","\n            ",98],["T_VARIABLE","$this",99],["T_OBJECT_OPERATOR","->",99],["T_STRING","optionRepository",99],["T_WHITESPACE"," ",99],"=",["T_WHITESPACE"," ",99],["T_NS_SEPARATOR","\\",99],["T_STRING","Magento",99],["T_NS_SEPARATOR","\\",99],["T_STRING","Framework",99],["T_NS_SEPARATOR","\\",99],["T_STRING","App",99],["T_NS_SEPARATOR","\\",99],["T_STRING","ObjectManager",99],["T_DOUBLE_COLON","::",99],["T_STRING","getInstance",99],"(",")",["T_WHITESPACE","\n                ",99],["T_OBJECT_OPERATOR","->",100],["T_STRING","get",100],"(",["T_NS_SEPARATOR","\\",100],["T_STRING","Magento",100],["T_NS_SEPARATOR","\\",100],["T_STRING","Catalog",100],["T_NS_SEPARATOR","\\",100],["T_STRING","Model",100],["T_NS_SEPARATOR","\\",100],["T_STRING","Product",100],["T_NS_SEPARATOR","\\",100],["T_STRING","Option",100],["T_NS_SEPARATOR","\\",100],["T_STRING","Repository",100],["T_DOUBLE_COLON","::",100],["T_CLASS","class",100],")",";",["T_WHITESPACE","\n        ",100],"}",["T_WHITESPACE","\n        ",101],["T_RETURN","return",102],["T_WHITESPACE"," ",102],["T_VARIABLE","$this",102],["T_OBJECT_OPERATOR","->",102],["T_STRING","optionRepository",102],";",["T_WHITESPACE","\n    ",102],"}",["T_WHITESPACE","\n\n    ",103],["T_DOC_COMMENT","\/**\n     * @return \\Magento\\Framework\\EntityManager\\MetadataPool\n     * @deprecated\n     *\/",105],["T_WHITESPACE","\n    ",108],["T_PRIVATE","private",109],["T_WHITESPACE"," ",109],["T_FUNCTION","function",109],["T_WHITESPACE"," ",109],["T_STRING","getMetadataPool",109],"(",")",["T_WHITESPACE","\n    ",109],"{",["T_WHITESPACE","\n        ",110],["T_IF","if",111],["T_WHITESPACE"," ",111],"(",["T_STRING","null",111],["T_WHITESPACE"," ",111],["T_IS_IDENTICAL","===",111],["T_WHITESPACE"," ",111],["T_VARIABLE","$this",111],["T_OBJECT_OPERATOR","->",111],["T_STRING","metadataPool",111],")",["T_WHITESPACE"," ",111],"{",["T_WHITESPACE","\n            ",111],["T_VARIABLE","$this",112],["T_OBJECT_OPERATOR","->",112],["T_STRING","metadataPool",112],["T_WHITESPACE"," ",112],"=",["T_WHITESPACE"," ",112],["T_NS_SEPARATOR","\\",112],["T_STRING","Magento",112],["T_NS_SEPARATOR","\\",112],["T_STRING","Framework",112],["T_NS_SEPARATOR","\\",112],["T_STRING","App",112],["T_NS_SEPARATOR","\\",112],["T_STRING","ObjectManager",112],["T_DOUBLE_COLON","::",112],["T_STRING","getInstance",112],"(",")",["T_WHITESPACE","\n                ",112],["T_OBJECT_OPERATOR","->",113],["T_STRING","get",113],"(",["T_NS_SEPARATOR","\\",113],["T_STRING","Magento",113],["T_NS_SEPARATOR","\\",113],["T_STRING","Framework",113],["T_NS_SEPARATOR","\\",113],["T_STRING","EntityManager",113],["T_NS_SEPARATOR","\\",113],["T_STRING","MetadataPool",113],["T_DOUBLE_COLON","::",113],["T_CLASS","class",113],")",";",["T_WHITESPACE","\n        ",113],"}",["T_WHITESPACE","\n        ",114],["T_RETURN","return",115],["T_WHITESPACE"," ",115],["T_VARIABLE","$this",115],["T_OBJECT_OPERATOR","->",115],["T_STRING","metadataPool",115],";",["T_WHITESPACE","\n    ",115],"}",["T_WHITESPACE","\n",116],"}",["T_WHITESPACE","\n",117]]
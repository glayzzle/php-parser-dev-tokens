[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Copyright \u00c2\u00a9 2013-2017 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n *\/",2],["T_WHITESPACE","\n",5],["T_NAMESPACE","namespace",6],["T_WHITESPACE"," ",6],["T_STRING","Magento",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Catalog",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Model",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Indexer",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Category",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Flat",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Action",6],";",["T_WHITESPACE","\n\n",6],["T_USE","use",8],["T_WHITESPACE"," ",8],["T_STRING","Magento",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Catalog",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Api",8],["T_NS_SEPARATOR","\\",8],["T_STRING","CategoryRepositoryInterface",8],";",["T_WHITESPACE","\n",8],["T_USE","use",9],["T_WHITESPACE"," ",9],["T_STRING","Magento",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Framework",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Exception",9],["T_NS_SEPARATOR","\\",9],["T_STRING","NoSuchEntityException",9],";",["T_WHITESPACE","\n\n",9],["T_CLASS","class",11],["T_WHITESPACE"," ",11],["T_STRING","Rows",11],["T_WHITESPACE"," ",11],["T_EXTENDS","extends",11],["T_WHITESPACE"," ",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Magento",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Catalog",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Model",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Indexer",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Category",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Flat",11],["T_NS_SEPARATOR","\\",11],["T_STRING","AbstractAction",11],["T_WHITESPACE","\n",11],"{",["T_WHITESPACE","\n    ",12],["T_DOC_COMMENT","\/**\n     * @var CategoryRepositoryInterface\n     *\/",13],["T_WHITESPACE","\n    ",15],["T_PROTECTED","protected",16],["T_WHITESPACE"," ",16],["T_VARIABLE","$categoryRepository",16],";",["T_WHITESPACE","\n\n    ",16],["T_DOC_COMMENT","\/**\n     * @param \\Magento\\Framework\\App\\ResourceConnection $resource\n     * @param \\Magento\\Store\\Model\\StoreManagerInterface $storeManager\n     * @param \\Magento\\Catalog\\Model\\ResourceModel\\Helper $resourceHelper\n     * @param CategoryRepositoryInterface $categoryRepository\n     *\/",18],["T_WHITESPACE","\n    ",23],["T_PUBLIC","public",24],["T_WHITESPACE"," ",24],["T_FUNCTION","function",24],["T_WHITESPACE"," ",24],["T_STRING","__construct",24],"(",["T_WHITESPACE","\n        ",24],["T_NS_SEPARATOR","\\",25],["T_STRING","Magento",25],["T_NS_SEPARATOR","\\",25],["T_STRING","Framework",25],["T_NS_SEPARATOR","\\",25],["T_STRING","App",25],["T_NS_SEPARATOR","\\",25],["T_STRING","ResourceConnection",25],["T_WHITESPACE"," ",25],["T_VARIABLE","$resource",25],",",["T_WHITESPACE","\n        ",25],["T_NS_SEPARATOR","\\",26],["T_STRING","Magento",26],["T_NS_SEPARATOR","\\",26],["T_STRING","Store",26],["T_NS_SEPARATOR","\\",26],["T_STRING","Model",26],["T_NS_SEPARATOR","\\",26],["T_STRING","StoreManagerInterface",26],["T_WHITESPACE"," ",26],["T_VARIABLE","$storeManager",26],",",["T_WHITESPACE","\n        ",26],["T_NS_SEPARATOR","\\",27],["T_STRING","Magento",27],["T_NS_SEPARATOR","\\",27],["T_STRING","Catalog",27],["T_NS_SEPARATOR","\\",27],["T_STRING","Model",27],["T_NS_SEPARATOR","\\",27],["T_STRING","ResourceModel",27],["T_NS_SEPARATOR","\\",27],["T_STRING","Helper",27],["T_WHITESPACE"," ",27],["T_VARIABLE","$resourceHelper",27],",",["T_WHITESPACE","\n        ",27],["T_STRING","CategoryRepositoryInterface",28],["T_WHITESPACE"," ",28],["T_VARIABLE","$categoryRepository",28],["T_WHITESPACE","\n    ",28],")",["T_WHITESPACE"," ",29],"{",["T_WHITESPACE","\n        ",29],["T_VARIABLE","$this",30],["T_OBJECT_OPERATOR","->",30],["T_STRING","categoryRepository",30],["T_WHITESPACE"," ",30],"=",["T_WHITESPACE"," ",30],["T_VARIABLE","$categoryRepository",30],";",["T_WHITESPACE","\n        ",30],["T_STRING","parent",31],["T_DOUBLE_COLON","::",31],["T_STRING","__construct",31],"(",["T_VARIABLE","$resource",31],",",["T_WHITESPACE"," ",31],["T_VARIABLE","$storeManager",31],",",["T_WHITESPACE"," ",31],["T_VARIABLE","$resourceHelper",31],")",";",["T_WHITESPACE","\n    ",31],"}",["T_WHITESPACE","\n\n    ",32],["T_DOC_COMMENT","\/**\n     * Return index table name\n     *\n     * @param \\Magento\\Store\\Model\\Store $store\n     * @param bool $useTempTable\n     * @return string\n     *\/",34],["T_WHITESPACE","\n    ",40],["T_PROTECTED","protected",41],["T_WHITESPACE"," ",41],["T_FUNCTION","function",41],["T_WHITESPACE"," ",41],["T_STRING","getTableNameByStore",41],"(",["T_NS_SEPARATOR","\\",41],["T_STRING","Magento",41],["T_NS_SEPARATOR","\\",41],["T_STRING","Store",41],["T_NS_SEPARATOR","\\",41],["T_STRING","Model",41],["T_NS_SEPARATOR","\\",41],["T_STRING","Store",41],["T_WHITESPACE"," ",41],["T_VARIABLE","$store",41],",",["T_WHITESPACE"," ",41],["T_VARIABLE","$useTempTable",41],")",["T_WHITESPACE","\n    ",41],"{",["T_WHITESPACE","\n        ",42],["T_VARIABLE","$tableName",43],["T_WHITESPACE"," ",43],"=",["T_WHITESPACE"," ",43],["T_VARIABLE","$this",43],["T_OBJECT_OPERATOR","->",43],["T_STRING","getMainStoreTable",43],"(",["T_VARIABLE","$store",43],["T_OBJECT_OPERATOR","->",43],["T_STRING","getId",43],"(",")",")",";",["T_WHITESPACE","\n        ",43],["T_RETURN","return",44],["T_WHITESPACE"," ",44],["T_VARIABLE","$useTempTable",44],["T_WHITESPACE"," ",44],"?",["T_WHITESPACE"," ",44],["T_VARIABLE","$this",44],["T_OBJECT_OPERATOR","->",44],["T_STRING","addTemporaryTableSuffix",44],"(",["T_VARIABLE","$tableName",44],")",["T_WHITESPACE"," ",44],":",["T_WHITESPACE"," ",44],["T_VARIABLE","$tableName",44],";",["T_WHITESPACE","\n    ",44],"}",["T_WHITESPACE","\n\n    ",45],["T_DOC_COMMENT","\/**\n     * Refresh entities index\n     *\n     * @param int[] $entityIds\n     * @param bool $useTempTable\n     * @return Rows\n     *\/",47],["T_WHITESPACE","\n    ",53],["T_PUBLIC","public",54],["T_WHITESPACE"," ",54],["T_FUNCTION","function",54],["T_WHITESPACE"," ",54],["T_STRING","reindex",54],"(",["T_ARRAY","array",54],["T_WHITESPACE"," ",54],["T_VARIABLE","$entityIds",54],["T_WHITESPACE"," ",54],"=",["T_WHITESPACE"," ",54],"[","]",",",["T_WHITESPACE"," ",54],["T_VARIABLE","$useTempTable",54],["T_WHITESPACE"," ",54],"=",["T_WHITESPACE"," ",54],["T_STRING","false",54],")",["T_WHITESPACE","\n    ",54],"{",["T_WHITESPACE","\n        ",55],["T_VARIABLE","$stores",56],["T_WHITESPACE"," ",56],"=",["T_WHITESPACE"," ",56],["T_VARIABLE","$this",56],["T_OBJECT_OPERATOR","->",56],["T_STRING","storeManager",56],["T_OBJECT_OPERATOR","->",56],["T_STRING","getStores",56],"(",")",";",["T_WHITESPACE","\n\n        ",56],["T_COMMENT","\/* @var $store \\Magento\\Store\\Model\\Store *\/",58],["T_WHITESPACE","\n        ",58],["T_FOREACH","foreach",59],["T_WHITESPACE"," ",59],"(",["T_VARIABLE","$stores",59],["T_WHITESPACE"," ",59],["T_AS","as",59],["T_WHITESPACE"," ",59],["T_VARIABLE","$store",59],")",["T_WHITESPACE"," ",59],"{",["T_WHITESPACE","\n            ",59],["T_VARIABLE","$tableName",60],["T_WHITESPACE"," ",60],"=",["T_WHITESPACE"," ",60],["T_VARIABLE","$this",60],["T_OBJECT_OPERATOR","->",60],["T_STRING","getTableNameByStore",60],"(",["T_VARIABLE","$store",60],",",["T_WHITESPACE"," ",60],["T_VARIABLE","$useTempTable",60],")",";",["T_WHITESPACE","\n\n            ",60],["T_IF","if",62],["T_WHITESPACE"," ",62],"(","!",["T_VARIABLE","$this",62],["T_OBJECT_OPERATOR","->",62],["T_STRING","connection",62],["T_OBJECT_OPERATOR","->",62],["T_STRING","isTableExists",62],"(",["T_VARIABLE","$tableName",62],")",")",["T_WHITESPACE"," ",62],"{",["T_WHITESPACE","\n                ",62],["T_CONTINUE","continue",63],";",["T_WHITESPACE","\n            ",63],"}",["T_WHITESPACE","\n\n            ",64],["T_DOC_COMMENT","\/** @TODO Do something with chunks *\/",66],["T_WHITESPACE","\n            ",66],["T_VARIABLE","$categoriesIdsChunks",67],["T_WHITESPACE"," ",67],"=",["T_WHITESPACE"," ",67],["T_STRING","array_chunk",67],"(",["T_VARIABLE","$entityIds",67],",",["T_WHITESPACE"," ",67],["T_LNUMBER","500",67],")",";",["T_WHITESPACE","\n            ",67],["T_FOREACH","foreach",68],["T_WHITESPACE"," ",68],"(",["T_VARIABLE","$categoriesIdsChunks",68],["T_WHITESPACE"," ",68],["T_AS","as",68],["T_WHITESPACE"," ",68],["T_VARIABLE","$categoriesIdsChunk",68],")",["T_WHITESPACE"," ",68],"{",["T_WHITESPACE","\n                ",68],["T_VARIABLE","$categoriesIdsChunk",69],["T_WHITESPACE"," ",69],"=",["T_WHITESPACE"," ",69],["T_VARIABLE","$this",69],["T_OBJECT_OPERATOR","->",69],["T_STRING","filterIdsByStore",69],"(",["T_VARIABLE","$categoriesIdsChunk",69],",",["T_WHITESPACE"," ",69],["T_VARIABLE","$store",69],")",";",["T_WHITESPACE","\n\n                ",69],["T_VARIABLE","$attributesData",71],["T_WHITESPACE"," ",71],"=",["T_WHITESPACE"," ",71],["T_VARIABLE","$this",71],["T_OBJECT_OPERATOR","->",71],["T_STRING","getAttributeValues",71],"(",["T_VARIABLE","$categoriesIdsChunk",71],",",["T_WHITESPACE"," ",71],["T_VARIABLE","$store",71],["T_OBJECT_OPERATOR","->",71],["T_STRING","getId",71],"(",")",")",";",["T_WHITESPACE","\n                ",71],["T_VARIABLE","$data",72],["T_WHITESPACE"," ",72],"=",["T_WHITESPACE"," ",72],"[","]",";",["T_WHITESPACE","\n                ",72],["T_FOREACH","foreach",73],["T_WHITESPACE"," ",73],"(",["T_VARIABLE","$categoriesIdsChunk",73],["T_WHITESPACE"," ",73],["T_AS","as",73],["T_WHITESPACE"," ",73],["T_VARIABLE","$categoryId",73],")",["T_WHITESPACE"," ",73],"{",["T_WHITESPACE","\n                    ",73],["T_IF","if",74],["T_WHITESPACE"," ",74],"(","!",["T_ISSET","isset",74],"(",["T_VARIABLE","$attributesData",74],"[",["T_VARIABLE","$categoryId",74],"]",")",")",["T_WHITESPACE"," ",74],"{",["T_WHITESPACE","\n                        ",74],["T_CONTINUE","continue",75],";",["T_WHITESPACE","\n                    ",75],"}",["T_WHITESPACE","\n\n                    ",76],["T_TRY","try",78],["T_WHITESPACE"," ",78],"{",["T_WHITESPACE","\n                        ",78],["T_VARIABLE","$category",79],["T_WHITESPACE"," ",79],"=",["T_WHITESPACE"," ",79],["T_VARIABLE","$this",79],["T_OBJECT_OPERATOR","->",79],["T_STRING","categoryRepository",79],["T_OBJECT_OPERATOR","->",79],["T_STRING","get",79],"(",["T_VARIABLE","$categoryId",79],")",";",["T_WHITESPACE","\n                    ",79],"}",["T_WHITESPACE"," ",80],["T_CATCH","catch",80],["T_WHITESPACE"," ",80],"(",["T_STRING","NoSuchEntityException",80],["T_WHITESPACE"," ",80],["T_VARIABLE","$e",80],")",["T_WHITESPACE"," ",80],"{",["T_WHITESPACE","\n                        ",80],["T_CONTINUE","continue",81],";",["T_WHITESPACE","\n                    ",81],"}",["T_WHITESPACE","\n\n                    ",82],["T_VARIABLE","$data",84],"[","]",["T_WHITESPACE"," ",84],"=",["T_WHITESPACE"," ",84],["T_VARIABLE","$this",84],["T_OBJECT_OPERATOR","->",84],["T_STRING","prepareValuesToInsert",84],"(",["T_WHITESPACE","\n                        ",84],["T_STRING","array_merge",85],"(",["T_WHITESPACE","\n                            ",85],["T_VARIABLE","$category",86],["T_OBJECT_OPERATOR","->",86],["T_STRING","getData",86],"(",")",",",["T_WHITESPACE","\n                            ",86],["T_VARIABLE","$attributesData",87],"[",["T_VARIABLE","$categoryId",87],"]",",",["T_WHITESPACE","\n                            ",87],"[",["T_CONSTANT_ENCAPSED_STRING","'store_id'",88],["T_WHITESPACE"," ",88],["T_DOUBLE_ARROW","=>",88],["T_WHITESPACE"," ",88],["T_VARIABLE","$store",88],["T_OBJECT_OPERATOR","->",88],["T_STRING","getId",88],"(",")","]",["T_WHITESPACE","\n                        ",88],")",["T_WHITESPACE","\n                    ",89],")",";",["T_WHITESPACE","\n                ",90],"}",["T_WHITESPACE","\n\n                ",91],["T_FOREACH","foreach",93],["T_WHITESPACE"," ",93],"(",["T_VARIABLE","$data",93],["T_WHITESPACE"," ",93],["T_AS","as",93],["T_WHITESPACE"," ",93],["T_VARIABLE","$row",93],")",["T_WHITESPACE"," ",93],"{",["T_WHITESPACE","\n                    ",93],["T_VARIABLE","$updateFields",94],["T_WHITESPACE"," ",94],"=",["T_WHITESPACE"," ",94],"[","]",";",["T_WHITESPACE","\n                    ",94],["T_FOREACH","foreach",95],["T_WHITESPACE"," ",95],"(",["T_STRING","array_keys",95],"(",["T_VARIABLE","$row",95],")",["T_WHITESPACE"," ",95],["T_AS","as",95],["T_WHITESPACE"," ",95],["T_VARIABLE","$key",95],")",["T_WHITESPACE"," ",95],"{",["T_WHITESPACE","\n                        ",95],["T_VARIABLE","$updateFields",96],"[",["T_VARIABLE","$key",96],"]",["T_WHITESPACE"," ",96],"=",["T_WHITESPACE"," ",96],["T_VARIABLE","$key",96],";",["T_WHITESPACE","\n                    ",96],"}",["T_WHITESPACE","\n                    ",97],["T_VARIABLE","$this",98],["T_OBJECT_OPERATOR","->",98],["T_STRING","connection",98],["T_OBJECT_OPERATOR","->",98],["T_STRING","insertOnDuplicate",98],"(",["T_VARIABLE","$tableName",98],",",["T_WHITESPACE"," ",98],["T_VARIABLE","$row",98],",",["T_WHITESPACE"," ",98],["T_VARIABLE","$updateFields",98],")",";",["T_WHITESPACE","\n                ",98],"}",["T_WHITESPACE","\n            ",99],"}",["T_WHITESPACE","\n            ",100],["T_VARIABLE","$this",101],["T_OBJECT_OPERATOR","->",101],["T_STRING","deleteNonStoreCategories",101],"(",["T_VARIABLE","$store",101],",",["T_WHITESPACE"," ",101],["T_VARIABLE","$useTempTable",101],")",";",["T_WHITESPACE","\n        ",101],"}",["T_WHITESPACE","\n\n        ",102],["T_RETURN","return",104],["T_WHITESPACE"," ",104],["T_VARIABLE","$this",104],";",["T_WHITESPACE","\n    ",104],"}",["T_WHITESPACE","\n\n    ",105],["T_DOC_COMMENT","\/**\n     * Delete non stores categories\n     *\n     * @param \\Magento\\Store\\Model\\Store $store\n     * @param bool $useTempTable\n     * @return void\n     *\/",107],["T_WHITESPACE","\n    ",113],["T_PROTECTED","protected",114],["T_WHITESPACE"," ",114],["T_FUNCTION","function",114],["T_WHITESPACE"," ",114],["T_STRING","deleteNonStoreCategories",114],"(",["T_NS_SEPARATOR","\\",114],["T_STRING","Magento",114],["T_NS_SEPARATOR","\\",114],["T_STRING","Store",114],["T_NS_SEPARATOR","\\",114],["T_STRING","Model",114],["T_NS_SEPARATOR","\\",114],["T_STRING","Store",114],["T_WHITESPACE"," ",114],["T_VARIABLE","$store",114],",",["T_WHITESPACE"," ",114],["T_VARIABLE","$useTempTable",114],")",["T_WHITESPACE","\n    ",114],"{",["T_WHITESPACE","\n        ",115],["T_VARIABLE","$rootId",116],["T_WHITESPACE"," ",116],"=",["T_WHITESPACE"," ",116],["T_NS_SEPARATOR","\\",116],["T_STRING","Magento",116],["T_NS_SEPARATOR","\\",116],["T_STRING","Catalog",116],["T_NS_SEPARATOR","\\",116],["T_STRING","Model",116],["T_NS_SEPARATOR","\\",116],["T_STRING","Category",116],["T_DOUBLE_COLON","::",116],["T_STRING","TREE_ROOT_ID",116],";",["T_WHITESPACE","\n\n        ",116],["T_VARIABLE","$rootIdExpr",118],["T_WHITESPACE"," ",118],"=",["T_WHITESPACE"," ",118],["T_VARIABLE","$this",118],["T_OBJECT_OPERATOR","->",118],["T_STRING","connection",118],["T_OBJECT_OPERATOR","->",118],["T_STRING","quote",118],"(",["T_STRING_CAST","(string)",118],["T_VARIABLE","$rootId",118],")",";",["T_WHITESPACE","\n        ",118],["T_VARIABLE","$rootCatIdExpr",119],["T_WHITESPACE"," ",119],"=",["T_WHITESPACE"," ",119],["T_VARIABLE","$this",119],["T_OBJECT_OPERATOR","->",119],["T_STRING","connection",119],["T_OBJECT_OPERATOR","->",119],["T_STRING","quote",119],"(","\"",["T_CURLY_OPEN","{",119],["T_VARIABLE","$rootId",119],"}",["T_ENCAPSED_AND_WHITESPACE","\/",119],["T_CURLY_OPEN","{",119],["T_VARIABLE","$store",119],["T_OBJECT_OPERATOR","->",119],["T_STRING","getRootCategoryId",119],"(",")","}","\"",")",";",["T_WHITESPACE","\n        ",119],["T_VARIABLE","$catIdExpr",120],["T_WHITESPACE"," ",120],"=",["T_WHITESPACE"," ",120],["T_VARIABLE","$this",120],["T_OBJECT_OPERATOR","->",120],["T_STRING","connection",120],["T_OBJECT_OPERATOR","->",120],["T_STRING","quote",120],"(","\"",["T_CURLY_OPEN","{",120],["T_VARIABLE","$rootId",120],"}",["T_ENCAPSED_AND_WHITESPACE","\/",120],["T_CURLY_OPEN","{",120],["T_VARIABLE","$store",120],["T_OBJECT_OPERATOR","->",120],["T_STRING","getRootCategoryId",120],"(",")","}",["T_ENCAPSED_AND_WHITESPACE","\/%",120],"\"",")",";",["T_WHITESPACE","\n\n        ",120],["T_DOC_COMMENT","\/** @var \\Magento\\Framework\\DB\\Select $select *\/",122],["T_WHITESPACE","\n        ",122],["T_VARIABLE","$select",123],["T_WHITESPACE"," ",123],"=",["T_WHITESPACE"," ",123],["T_VARIABLE","$this",123],["T_OBJECT_OPERATOR","->",123],["T_STRING","connection",123],["T_OBJECT_OPERATOR","->",123],["T_STRING","select",123],"(",")",["T_OBJECT_OPERATOR","->",123],["T_STRING","from",123],"(",["T_WHITESPACE","\n            ",123],"[",["T_CONSTANT_ENCAPSED_STRING","'cf'",124],["T_WHITESPACE"," ",124],["T_DOUBLE_ARROW","=>",124],["T_WHITESPACE"," ",124],["T_VARIABLE","$this",124],["T_OBJECT_OPERATOR","->",124],["T_STRING","getTableNameByStore",124],"(",["T_VARIABLE","$store",124],",",["T_WHITESPACE"," ",124],["T_VARIABLE","$useTempTable",124],")","]",["T_WHITESPACE","\n        ",124],")",["T_OBJECT_OPERATOR","->",125],["T_STRING","where",125],"(",["T_WHITESPACE","\n            ",125],"\"",["T_ENCAPSED_AND_WHITESPACE","cf.path = ",126],["T_CURLY_OPEN","{",126],["T_VARIABLE","$rootIdExpr",126],"}",["T_ENCAPSED_AND_WHITESPACE"," OR cf.path = ",126],["T_CURLY_OPEN","{",126],["T_VARIABLE","$rootCatIdExpr",126],"}",["T_ENCAPSED_AND_WHITESPACE"," OR cf.path like ",126],["T_CURLY_OPEN","{",126],["T_VARIABLE","$catIdExpr",126],"}","\"",["T_WHITESPACE","\n        ",126],")",["T_OBJECT_OPERATOR","->",127],["T_STRING","where",127],"(",["T_WHITESPACE","\n            ",127],["T_CONSTANT_ENCAPSED_STRING","'cf.entity_id NOT IN (?)'",128],",",["T_WHITESPACE","\n            ",128],["T_NEW","new",129],["T_WHITESPACE"," ",129],["T_NS_SEPARATOR","\\",129],["T_STRING","Zend_Db_Expr",129],"(",["T_WHITESPACE","\n                ",129],["T_VARIABLE","$this",130],["T_OBJECT_OPERATOR","->",130],["T_STRING","connection",130],["T_OBJECT_OPERATOR","->",130],["T_STRING","select",130],"(",")",["T_OBJECT_OPERATOR","->",130],["T_STRING","from",130],"(",["T_WHITESPACE","\n                    ",130],"[",["T_CONSTANT_ENCAPSED_STRING","'ce'",131],["T_WHITESPACE"," ",131],["T_DOUBLE_ARROW","=>",131],["T_WHITESPACE"," ",131],["T_VARIABLE","$this",131],["T_OBJECT_OPERATOR","->",131],["T_STRING","getTableName",131],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog_category_entity'",131],")","]",",",["T_WHITESPACE","\n                    ",131],"[",["T_CONSTANT_ENCAPSED_STRING","'entity_id'",132],"]",["T_WHITESPACE","\n                ",132],")",["T_WHITESPACE","\n            ",133],")",["T_WHITESPACE","\n        ",134],")",";",["T_WHITESPACE","\n\n        ",135],["T_VARIABLE","$sql",137],["T_WHITESPACE"," ",137],"=",["T_WHITESPACE"," ",137],["T_VARIABLE","$select",137],["T_OBJECT_OPERATOR","->",137],["T_STRING","deleteFromSelect",137],"(",["T_CONSTANT_ENCAPSED_STRING","'cf'",137],")",";",["T_WHITESPACE","\n        ",137],["T_VARIABLE","$this",138],["T_OBJECT_OPERATOR","->",138],["T_STRING","connection",138],["T_OBJECT_OPERATOR","->",138],["T_STRING","query",138],"(",["T_VARIABLE","$sql",138],")",";",["T_WHITESPACE","\n    ",138],"}",["T_WHITESPACE","\n\n    ",139],["T_DOC_COMMENT","\/**\n     * Filter category ids by store\n     *\n     * @param int[] $ids\n     * @param \\Magento\\Store\\Model\\Store $store\n     * @return int[]\n     *\/",141],["T_WHITESPACE","\n    ",147],["T_PROTECTED","protected",148],["T_WHITESPACE"," ",148],["T_FUNCTION","function",148],["T_WHITESPACE"," ",148],["T_STRING","filterIdsByStore",148],"(",["T_ARRAY","array",148],["T_WHITESPACE"," ",148],["T_VARIABLE","$ids",148],",",["T_WHITESPACE"," ",148],["T_VARIABLE","$store",148],")",["T_WHITESPACE","\n    ",148],"{",["T_WHITESPACE","\n        ",149],["T_VARIABLE","$rootId",150],["T_WHITESPACE"," ",150],"=",["T_WHITESPACE"," ",150],["T_NS_SEPARATOR","\\",150],["T_STRING","Magento",150],["T_NS_SEPARATOR","\\",150],["T_STRING","Catalog",150],["T_NS_SEPARATOR","\\",150],["T_STRING","Model",150],["T_NS_SEPARATOR","\\",150],["T_STRING","Category",150],["T_DOUBLE_COLON","::",150],["T_STRING","TREE_ROOT_ID",150],";",["T_WHITESPACE","\n\n        ",150],["T_VARIABLE","$rootIdExpr",152],["T_WHITESPACE"," ",152],"=",["T_WHITESPACE"," ",152],["T_VARIABLE","$this",152],["T_OBJECT_OPERATOR","->",152],["T_STRING","connection",152],["T_OBJECT_OPERATOR","->",152],["T_STRING","quote",152],"(",["T_STRING_CAST","(string)",152],["T_VARIABLE","$rootId",152],")",";",["T_WHITESPACE","\n        ",152],["T_VARIABLE","$rootCatIdExpr",153],["T_WHITESPACE"," ",153],"=",["T_WHITESPACE"," ",153],["T_VARIABLE","$this",153],["T_OBJECT_OPERATOR","->",153],["T_STRING","connection",153],["T_OBJECT_OPERATOR","->",153],["T_STRING","quote",153],"(","\"",["T_CURLY_OPEN","{",153],["T_VARIABLE","$rootId",153],"}",["T_ENCAPSED_AND_WHITESPACE","\/",153],["T_CURLY_OPEN","{",153],["T_VARIABLE","$store",153],["T_OBJECT_OPERATOR","->",153],["T_STRING","getRootCategoryId",153],"(",")","}","\"",")",";",["T_WHITESPACE","\n        ",153],["T_VARIABLE","$catIdExpr",154],["T_WHITESPACE"," ",154],"=",["T_WHITESPACE"," ",154],["T_VARIABLE","$this",154],["T_OBJECT_OPERATOR","->",154],["T_STRING","connection",154],["T_OBJECT_OPERATOR","->",154],["T_STRING","quote",154],"(","\"",["T_CURLY_OPEN","{",154],["T_VARIABLE","$rootId",154],"}",["T_ENCAPSED_AND_WHITESPACE","\/",154],["T_CURLY_OPEN","{",154],["T_VARIABLE","$store",154],["T_OBJECT_OPERATOR","->",154],["T_STRING","getRootCategoryId",154],"(",")","}",["T_ENCAPSED_AND_WHITESPACE","\/%",154],"\"",")",";",["T_WHITESPACE","\n\n        ",154],["T_VARIABLE","$select",156],["T_WHITESPACE"," ",156],"=",["T_WHITESPACE"," ",156],["T_VARIABLE","$this",156],["T_OBJECT_OPERATOR","->",156],["T_STRING","connection",156],["T_OBJECT_OPERATOR","->",156],["T_STRING","select",156],"(",")",["T_OBJECT_OPERATOR","->",156],["T_STRING","from",156],"(",["T_WHITESPACE","\n            ",156],["T_VARIABLE","$this",157],["T_OBJECT_OPERATOR","->",157],["T_STRING","getTableName",157],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog_category_entity'",157],")",",",["T_WHITESPACE","\n            ",157],"[",["T_CONSTANT_ENCAPSED_STRING","'entity_id'",158],"]",["T_WHITESPACE","\n        ",158],")",["T_OBJECT_OPERATOR","->",159],["T_STRING","where",159],"(",["T_WHITESPACE","\n            ",159],"\"",["T_ENCAPSED_AND_WHITESPACE","path = ",160],["T_CURLY_OPEN","{",160],["T_VARIABLE","$rootIdExpr",160],"}",["T_ENCAPSED_AND_WHITESPACE"," OR path = ",160],["T_CURLY_OPEN","{",160],["T_VARIABLE","$rootCatIdExpr",160],"}",["T_ENCAPSED_AND_WHITESPACE"," OR path like ",160],["T_CURLY_OPEN","{",160],["T_VARIABLE","$catIdExpr",160],"}","\"",["T_WHITESPACE","\n        ",160],")",["T_OBJECT_OPERATOR","->",161],["T_STRING","where",161],"(",["T_WHITESPACE","\n            ",161],["T_CONSTANT_ENCAPSED_STRING","\"entity_id IN (?)\"",162],",",["T_WHITESPACE","\n            ",162],["T_VARIABLE","$ids",163],["T_WHITESPACE","\n        ",163],")",";",["T_WHITESPACE","\n\n        ",164],["T_VARIABLE","$resultIds",166],["T_WHITESPACE"," ",166],"=",["T_WHITESPACE"," ",166],"[","]",";",["T_WHITESPACE","\n        ",166],["T_FOREACH","foreach",167],["T_WHITESPACE"," ",167],"(",["T_VARIABLE","$this",167],["T_OBJECT_OPERATOR","->",167],["T_STRING","connection",167],["T_OBJECT_OPERATOR","->",167],["T_STRING","fetchAll",167],"(",["T_VARIABLE","$select",167],")",["T_WHITESPACE"," ",167],["T_AS","as",167],["T_WHITESPACE"," ",167],["T_VARIABLE","$category",167],")",["T_WHITESPACE"," ",167],"{",["T_WHITESPACE","\n            ",167],["T_VARIABLE","$resultIds",168],"[","]",["T_WHITESPACE"," ",168],"=",["T_WHITESPACE"," ",168],["T_VARIABLE","$category",168],"[",["T_CONSTANT_ENCAPSED_STRING","'entity_id'",168],"]",";",["T_WHITESPACE","\n        ",168],"}",["T_WHITESPACE","\n        ",169],["T_RETURN","return",170],["T_WHITESPACE"," ",170],["T_VARIABLE","$resultIds",170],";",["T_WHITESPACE","\n    ",170],"}",["T_WHITESPACE","\n",171],"}",["T_WHITESPACE","\n",172]]
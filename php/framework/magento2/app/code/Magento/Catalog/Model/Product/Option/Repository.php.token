[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Copyright \u00c2\u00a9 2013-2017 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n *\/",2],["T_WHITESPACE","\n\n",5],["T_NAMESPACE","namespace",7],["T_WHITESPACE"," ",7],["T_STRING","Magento",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Catalog",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Model",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Product",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Option",7],";",["T_WHITESPACE","\n\n",7],["T_USE","use",9],["T_WHITESPACE"," ",9],["T_STRING","Magento",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Catalog",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Api",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Data",9],["T_NS_SEPARATOR","\\",9],["T_STRING","ProductInterface",9],";",["T_WHITESPACE","\n",9],["T_USE","use",10],["T_WHITESPACE"," ",10],["T_STRING","Magento",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Framework",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Exception",10],["T_NS_SEPARATOR","\\",10],["T_STRING","CouldNotSaveException",10],";",["T_WHITESPACE","\n",10],["T_USE","use",11],["T_WHITESPACE"," ",11],["T_STRING","Magento",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Framework",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Exception",11],["T_NS_SEPARATOR","\\",11],["T_STRING","NoSuchEntityException",11],";",["T_WHITESPACE","\n",11],["T_USE","use",12],["T_WHITESPACE"," ",12],["T_STRING","Magento",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Framework",12],["T_NS_SEPARATOR","\\",12],["T_STRING","EntityManager",12],["T_NS_SEPARATOR","\\",12],["T_STRING","MetadataPool",12],";",["T_WHITESPACE","\n",12],["T_USE","use",13],["T_WHITESPACE"," ",13],["T_STRING","Magento",13],["T_NS_SEPARATOR","\\",13],["T_STRING","Framework",13],["T_NS_SEPARATOR","\\",13],["T_STRING","EntityManager",13],["T_NS_SEPARATOR","\\",13],["T_STRING","HydratorPool",13],";",["T_WHITESPACE","\n\n",13],["T_DOC_COMMENT","\/**\n * Class Repository\n * @SuppressWarnings(PHPMD.CouplingBetweenObjects)\n *\/",15],["T_WHITESPACE","\n",18],["T_CLASS","class",19],["T_WHITESPACE"," ",19],["T_STRING","Repository",19],["T_WHITESPACE"," ",19],["T_IMPLEMENTS","implements",19],["T_WHITESPACE"," ",19],["T_NS_SEPARATOR","\\",19],["T_STRING","Magento",19],["T_NS_SEPARATOR","\\",19],["T_STRING","Catalog",19],["T_NS_SEPARATOR","\\",19],["T_STRING","Api",19],["T_NS_SEPARATOR","\\",19],["T_STRING","ProductCustomOptionRepositoryInterface",19],["T_WHITESPACE","\n",19],"{",["T_WHITESPACE","\n    ",20],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Catalog\\Model\\ResourceModel\\Product\\Option\\CollectionFactory\n     *\/",21],["T_WHITESPACE","\n    ",23],["T_PROTECTED","protected",24],["T_WHITESPACE"," ",24],["T_VARIABLE","$collectionFactory",24],";",["T_WHITESPACE","\n\n    ",24],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Catalog\\Model\\Product\\OptionFactory\n     *\/",26],["T_WHITESPACE","\n    ",28],["T_PROTECTED","protected",29],["T_WHITESPACE"," ",29],["T_VARIABLE","$optionFactory",29],";",["T_WHITESPACE","\n\n    ",29],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Catalog\\Api\\ProductRepositoryInterface\n     *\/",31],["T_WHITESPACE","\n    ",33],["T_PROTECTED","protected",34],["T_WHITESPACE"," ",34],["T_VARIABLE","$productRepository",34],";",["T_WHITESPACE","\n\n    ",34],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Catalog\\Model\\ResourceModel\\Product\\Option\n     *\/",36],["T_WHITESPACE","\n    ",38],["T_PROTECTED","protected",39],["T_WHITESPACE"," ",39],["T_VARIABLE","$optionResource",39],";",["T_WHITESPACE","\n\n    ",39],["T_DOC_COMMENT","\/**\n     * @var MetadataPool\n     *\/",41],["T_WHITESPACE","\n    ",43],["T_PROTECTED","protected",44],["T_WHITESPACE"," ",44],["T_VARIABLE","$metadataPool",44],";",["T_WHITESPACE","\n\n    ",44],["T_DOC_COMMENT","\/**\n     * @var HydratorPool\n     *\/",46],["T_WHITESPACE","\n    ",48],["T_PROTECTED","protected",49],["T_WHITESPACE"," ",49],["T_VARIABLE","$hydratorPool",49],";",["T_WHITESPACE","\n\n    ",49],["T_DOC_COMMENT","\/**\n     * @var Converter\n     *\/",51],["T_WHITESPACE","\n    ",53],["T_PROTECTED","protected",54],["T_WHITESPACE"," ",54],["T_VARIABLE","$converter",54],";",["T_WHITESPACE","\n\n    ",54],["T_DOC_COMMENT","\/**\n     * Repository constructor.\n     * @param \\Magento\\Catalog\\Api\\ProductRepositoryInterface $productRepository\n     * @param \\Magento\\Catalog\\Model\\ResourceModel\\Product\\Option $optionResource\n     * @param Converter $converter\n     *\/",56],["T_WHITESPACE","\n    ",61],["T_PUBLIC","public",62],["T_WHITESPACE"," ",62],["T_FUNCTION","function",62],["T_WHITESPACE"," ",62],["T_STRING","__construct",62],"(",["T_WHITESPACE","\n        ",62],["T_NS_SEPARATOR","\\",63],["T_STRING","Magento",63],["T_NS_SEPARATOR","\\",63],["T_STRING","Catalog",63],["T_NS_SEPARATOR","\\",63],["T_STRING","Api",63],["T_NS_SEPARATOR","\\",63],["T_STRING","ProductRepositoryInterface",63],["T_WHITESPACE"," ",63],["T_VARIABLE","$productRepository",63],",",["T_WHITESPACE","\n        ",63],["T_NS_SEPARATOR","\\",64],["T_STRING","Magento",64],["T_NS_SEPARATOR","\\",64],["T_STRING","Catalog",64],["T_NS_SEPARATOR","\\",64],["T_STRING","Model",64],["T_NS_SEPARATOR","\\",64],["T_STRING","ResourceModel",64],["T_NS_SEPARATOR","\\",64],["T_STRING","Product",64],["T_NS_SEPARATOR","\\",64],["T_STRING","Option",64],["T_WHITESPACE"," ",64],["T_VARIABLE","$optionResource",64],",",["T_WHITESPACE","\n        ",64],["T_NS_SEPARATOR","\\",65],["T_STRING","Magento",65],["T_NS_SEPARATOR","\\",65],["T_STRING","Catalog",65],["T_NS_SEPARATOR","\\",65],["T_STRING","Model",65],["T_NS_SEPARATOR","\\",65],["T_STRING","Product",65],["T_NS_SEPARATOR","\\",65],["T_STRING","Option",65],["T_NS_SEPARATOR","\\",65],["T_STRING","Converter",65],["T_WHITESPACE"," ",65],["T_VARIABLE","$converter",65],["T_WHITESPACE","\n    ",65],")",["T_WHITESPACE"," ",66],"{",["T_WHITESPACE","\n        ",66],["T_VARIABLE","$this",67],["T_OBJECT_OPERATOR","->",67],["T_STRING","productRepository",67],["T_WHITESPACE"," ",67],"=",["T_WHITESPACE"," ",67],["T_VARIABLE","$productRepository",67],";",["T_WHITESPACE","\n        ",67],["T_VARIABLE","$this",68],["T_OBJECT_OPERATOR","->",68],["T_STRING","optionResource",68],["T_WHITESPACE"," ",68],"=",["T_WHITESPACE"," ",68],["T_VARIABLE","$optionResource",68],";",["T_WHITESPACE","\n        ",68],["T_VARIABLE","$this",69],["T_OBJECT_OPERATOR","->",69],["T_STRING","converter",69],["T_WHITESPACE"," ",69],"=",["T_WHITESPACE"," ",69],["T_VARIABLE","$converter",69],";",["T_WHITESPACE","\n    ",69],"}",["T_WHITESPACE","\n\n    ",70],["T_DOC_COMMENT","\/**\n     * {@inheritdoc}\n     *\/",72],["T_WHITESPACE","\n    ",74],["T_PUBLIC","public",75],["T_WHITESPACE"," ",75],["T_FUNCTION","function",75],["T_WHITESPACE"," ",75],["T_STRING","getList",75],"(",["T_VARIABLE","$sku",75],")",["T_WHITESPACE","\n    ",75],"{",["T_WHITESPACE","\n        ",76],["T_VARIABLE","$product",77],["T_WHITESPACE"," ",77],"=",["T_WHITESPACE"," ",77],["T_VARIABLE","$this",77],["T_OBJECT_OPERATOR","->",77],["T_STRING","productRepository",77],["T_OBJECT_OPERATOR","->",77],["T_STRING","get",77],"(",["T_VARIABLE","$sku",77],",",["T_WHITESPACE"," ",77],["T_STRING","true",77],")",";",["T_WHITESPACE","\n        ",77],["T_RETURN","return",78],["T_WHITESPACE"," ",78],["T_VARIABLE","$product",78],["T_OBJECT_OPERATOR","->",78],["T_STRING","getOptions",78],"(",")",["T_WHITESPACE"," ",78],"?",":",["T_WHITESPACE"," ",78],"[","]",";",["T_WHITESPACE","\n    ",78],"}",["T_WHITESPACE","\n\n    ",79],["T_DOC_COMMENT","\/**\n     * {@inheritdoc}\n     *\/",81],["T_WHITESPACE","\n    ",83],["T_PUBLIC","public",84],["T_WHITESPACE"," ",84],["T_FUNCTION","function",84],["T_WHITESPACE"," ",84],["T_STRING","getProductOptions",84],"(",["T_STRING","ProductInterface",84],["T_WHITESPACE"," ",84],["T_VARIABLE","$product",84],",",["T_WHITESPACE"," ",84],["T_VARIABLE","$requiredOnly",84],["T_WHITESPACE"," ",84],"=",["T_WHITESPACE"," ",84],["T_STRING","false",84],")",["T_WHITESPACE","\n    ",84],"{",["T_WHITESPACE","\n        ",85],["T_RETURN","return",86],["T_WHITESPACE"," ",86],["T_VARIABLE","$this",86],["T_OBJECT_OPERATOR","->",86],["T_STRING","getCollectionFactory",86],"(",")",["T_OBJECT_OPERATOR","->",86],["T_STRING","create",86],"(",")",["T_OBJECT_OPERATOR","->",86],["T_STRING","getProductOptions",86],"(",["T_WHITESPACE","\n            ",86],["T_VARIABLE","$product",87],["T_OBJECT_OPERATOR","->",87],["T_STRING","getEntityId",87],"(",")",",",["T_WHITESPACE","\n            ",87],["T_VARIABLE","$product",88],["T_OBJECT_OPERATOR","->",88],["T_STRING","getStoreId",88],"(",")",",",["T_WHITESPACE","\n            ",88],["T_VARIABLE","$requiredOnly",89],["T_WHITESPACE","\n        ",89],")",";",["T_WHITESPACE","\n    ",90],"}",["T_WHITESPACE","\n\n    ",91],["T_DOC_COMMENT","\/**\n     * {@inheritdoc}\n     *\/",93],["T_WHITESPACE","\n    ",95],["T_PUBLIC","public",96],["T_WHITESPACE"," ",96],["T_FUNCTION","function",96],["T_WHITESPACE"," ",96],["T_STRING","get",96],"(",["T_VARIABLE","$sku",96],",",["T_WHITESPACE"," ",96],["T_VARIABLE","$optionId",96],")",["T_WHITESPACE","\n    ",96],"{",["T_WHITESPACE","\n        ",97],["T_VARIABLE","$product",98],["T_WHITESPACE"," ",98],"=",["T_WHITESPACE"," ",98],["T_VARIABLE","$this",98],["T_OBJECT_OPERATOR","->",98],["T_STRING","productRepository",98],["T_OBJECT_OPERATOR","->",98],["T_STRING","get",98],"(",["T_VARIABLE","$sku",98],")",";",["T_WHITESPACE","\n        ",98],["T_VARIABLE","$option",99],["T_WHITESPACE"," ",99],"=",["T_WHITESPACE"," ",99],["T_VARIABLE","$product",99],["T_OBJECT_OPERATOR","->",99],["T_STRING","getOptionById",99],"(",["T_VARIABLE","$optionId",99],")",";",["T_WHITESPACE","\n        ",99],["T_IF","if",100],["T_WHITESPACE"," ",100],"(",["T_VARIABLE","$option",100],["T_WHITESPACE"," ",100],["T_IS_IDENTICAL","===",100],["T_WHITESPACE"," ",100],["T_STRING","null",100],")",["T_WHITESPACE"," ",100],"{",["T_WHITESPACE","\n            ",100],["T_THROW","throw",101],["T_WHITESPACE"," ",101],["T_STRING","NoSuchEntityException",101],["T_DOUBLE_COLON","::",101],["T_STRING","singleField",101],"(",["T_CONSTANT_ENCAPSED_STRING","'optionId'",101],",",["T_WHITESPACE"," ",101],["T_VARIABLE","$optionId",101],")",";",["T_WHITESPACE","\n        ",101],"}",["T_WHITESPACE","\n        ",102],["T_RETURN","return",103],["T_WHITESPACE"," ",103],["T_VARIABLE","$option",103],";",["T_WHITESPACE","\n    ",103],"}",["T_WHITESPACE","\n\n    ",104],["T_DOC_COMMENT","\/**\n     * {@inheritdoc}\n     *\/",106],["T_WHITESPACE","\n    ",108],["T_PUBLIC","public",109],["T_WHITESPACE"," ",109],["T_FUNCTION","function",109],["T_WHITESPACE"," ",109],["T_STRING","delete",109],"(",["T_NS_SEPARATOR","\\",109],["T_STRING","Magento",109],["T_NS_SEPARATOR","\\",109],["T_STRING","Catalog",109],["T_NS_SEPARATOR","\\",109],["T_STRING","Api",109],["T_NS_SEPARATOR","\\",109],["T_STRING","Data",109],["T_NS_SEPARATOR","\\",109],["T_STRING","ProductCustomOptionInterface",109],["T_WHITESPACE"," ",109],["T_VARIABLE","$entity",109],")",["T_WHITESPACE","\n    ",109],"{",["T_WHITESPACE","\n        ",110],["T_VARIABLE","$this",111],["T_OBJECT_OPERATOR","->",111],["T_STRING","optionResource",111],["T_OBJECT_OPERATOR","->",111],["T_STRING","delete",111],"(",["T_VARIABLE","$entity",111],")",";",["T_WHITESPACE","\n        ",111],["T_RETURN","return",112],["T_WHITESPACE"," ",112],["T_STRING","true",112],";",["T_WHITESPACE","\n    ",112],"}",["T_WHITESPACE","\n\n    ",113],["T_DOC_COMMENT","\/**\n     * {@inheritdoc}\n     *\/",115],["T_WHITESPACE","\n    ",117],["T_PUBLIC","public",118],["T_WHITESPACE"," ",118],["T_FUNCTION","function",118],["T_WHITESPACE"," ",118],["T_STRING","duplicate",118],"(",["T_WHITESPACE","\n        ",118],["T_NS_SEPARATOR","\\",119],["T_STRING","Magento",119],["T_NS_SEPARATOR","\\",119],["T_STRING","Catalog",119],["T_NS_SEPARATOR","\\",119],["T_STRING","Api",119],["T_NS_SEPARATOR","\\",119],["T_STRING","Data",119],["T_NS_SEPARATOR","\\",119],["T_STRING","ProductInterface",119],["T_WHITESPACE"," ",119],["T_VARIABLE","$product",119],",",["T_WHITESPACE","\n        ",119],["T_NS_SEPARATOR","\\",120],["T_STRING","Magento",120],["T_NS_SEPARATOR","\\",120],["T_STRING","Catalog",120],["T_NS_SEPARATOR","\\",120],["T_STRING","Api",120],["T_NS_SEPARATOR","\\",120],["T_STRING","Data",120],["T_NS_SEPARATOR","\\",120],["T_STRING","ProductInterface",120],["T_WHITESPACE"," ",120],["T_VARIABLE","$duplicate",120],["T_WHITESPACE","\n    ",120],")",["T_WHITESPACE"," ",121],"{",["T_WHITESPACE","\n        ",121],["T_VARIABLE","$hydrator",122],["T_WHITESPACE"," ",122],"=",["T_WHITESPACE"," ",122],["T_VARIABLE","$this",122],["T_OBJECT_OPERATOR","->",122],["T_STRING","getHydratorPool",122],"(",")",["T_OBJECT_OPERATOR","->",122],["T_STRING","getHydrator",122],"(",["T_STRING","ProductInterface",122],["T_DOUBLE_COLON","::",122],["T_CLASS","class",122],")",";",["T_WHITESPACE","\n        ",122],["T_VARIABLE","$metadata",123],["T_WHITESPACE"," ",123],"=",["T_WHITESPACE"," ",123],["T_VARIABLE","$this",123],["T_OBJECT_OPERATOR","->",123],["T_STRING","getMetadataPool",123],"(",")",["T_OBJECT_OPERATOR","->",123],["T_STRING","getMetadata",123],"(",["T_STRING","ProductInterface",123],["T_DOUBLE_COLON","::",123],["T_CLASS","class",123],")",";",["T_WHITESPACE","\n        ",123],["T_RETURN","return",124],["T_WHITESPACE"," ",124],["T_VARIABLE","$this",124],["T_OBJECT_OPERATOR","->",124],["T_STRING","optionResource",124],["T_OBJECT_OPERATOR","->",124],["T_STRING","duplicate",124],"(",["T_WHITESPACE","\n            ",124],["T_VARIABLE","$this",125],["T_OBJECT_OPERATOR","->",125],["T_STRING","getOptionFactory",125],"(",")",["T_OBJECT_OPERATOR","->",125],["T_STRING","create",125],"(","[","]",")",",",["T_WHITESPACE","\n            ",125],["T_VARIABLE","$hydrator",126],["T_OBJECT_OPERATOR","->",126],["T_STRING","extract",126],"(",["T_VARIABLE","$product",126],")","[",["T_VARIABLE","$metadata",126],["T_OBJECT_OPERATOR","->",126],["T_STRING","getLinkField",126],"(",")","]",",",["T_WHITESPACE","\n            ",126],["T_VARIABLE","$hydrator",127],["T_OBJECT_OPERATOR","->",127],["T_STRING","extract",127],"(",["T_VARIABLE","$duplicate",127],")","[",["T_VARIABLE","$metadata",127],["T_OBJECT_OPERATOR","->",127],["T_STRING","getLinkField",127],"(",")","]",["T_WHITESPACE","\n        ",127],")",";",["T_WHITESPACE","\n    ",128],"}",["T_WHITESPACE","\n\n    ",129],["T_DOC_COMMENT","\/**\n     * {@inheritdoc}\n     *\/",131],["T_WHITESPACE","\n    ",133],["T_PUBLIC","public",134],["T_WHITESPACE"," ",134],["T_FUNCTION","function",134],["T_WHITESPACE"," ",134],["T_STRING","save",134],"(",["T_NS_SEPARATOR","\\",134],["T_STRING","Magento",134],["T_NS_SEPARATOR","\\",134],["T_STRING","Catalog",134],["T_NS_SEPARATOR","\\",134],["T_STRING","Api",134],["T_NS_SEPARATOR","\\",134],["T_STRING","Data",134],["T_NS_SEPARATOR","\\",134],["T_STRING","ProductCustomOptionInterface",134],["T_WHITESPACE"," ",134],["T_VARIABLE","$option",134],")",["T_WHITESPACE","\n    ",134],"{",["T_WHITESPACE","\n        ",135],["T_VARIABLE","$productSku",136],["T_WHITESPACE"," ",136],"=",["T_WHITESPACE"," ",136],["T_VARIABLE","$option",136],["T_OBJECT_OPERATOR","->",136],["T_STRING","getProductSku",136],"(",")",";",["T_WHITESPACE","\n        ",136],["T_IF","if",137],["T_WHITESPACE"," ",137],"(","!",["T_VARIABLE","$productSku",137],")",["T_WHITESPACE"," ",137],"{",["T_WHITESPACE","\n            ",137],["T_THROW","throw",138],["T_WHITESPACE"," ",138],["T_NEW","new",138],["T_WHITESPACE"," ",138],["T_STRING","CouldNotSaveException",138],"(",["T_STRING","__",138],"(",["T_CONSTANT_ENCAPSED_STRING","'ProductSku should be specified'",138],")",")",";",["T_WHITESPACE","\n        ",138],"}",["T_WHITESPACE","\n        ",139],["T_DOC_COMMENT","\/** @var \\Magento\\Catalog\\Model\\Product $product *\/",140],["T_WHITESPACE","\n        ",140],["T_VARIABLE","$product",141],["T_WHITESPACE"," ",141],"=",["T_WHITESPACE"," ",141],["T_VARIABLE","$this",141],["T_OBJECT_OPERATOR","->",141],["T_STRING","productRepository",141],["T_OBJECT_OPERATOR","->",141],["T_STRING","get",141],"(",["T_VARIABLE","$productSku",141],")",";",["T_WHITESPACE","\n        ",141],["T_VARIABLE","$metadata",142],["T_WHITESPACE"," ",142],"=",["T_WHITESPACE"," ",142],["T_VARIABLE","$this",142],["T_OBJECT_OPERATOR","->",142],["T_STRING","getMetadataPool",142],"(",")",["T_OBJECT_OPERATOR","->",142],["T_STRING","getMetadata",142],"(",["T_STRING","ProductInterface",142],["T_DOUBLE_COLON","::",142],["T_CLASS","class",142],")",";",["T_WHITESPACE","\n        ",142],["T_VARIABLE","$option",143],["T_OBJECT_OPERATOR","->",143],["T_STRING","setData",143],"(",["T_CONSTANT_ENCAPSED_STRING","'product_id'",143],",",["T_WHITESPACE"," ",143],["T_VARIABLE","$product",143],["T_OBJECT_OPERATOR","->",143],["T_STRING","getData",143],"(",["T_VARIABLE","$metadata",143],["T_OBJECT_OPERATOR","->",143],["T_STRING","getLinkField",143],"(",")",")",")",";",["T_WHITESPACE","\n        ",143],["T_VARIABLE","$option",144],["T_OBJECT_OPERATOR","->",144],["T_STRING","setData",144],"(",["T_CONSTANT_ENCAPSED_STRING","'store_id'",144],",",["T_WHITESPACE"," ",144],["T_VARIABLE","$product",144],["T_OBJECT_OPERATOR","->",144],["T_STRING","getStoreId",144],"(",")",")",";",["T_WHITESPACE","\n\n        ",144],["T_IF","if",146],["T_WHITESPACE"," ",146],"(",["T_VARIABLE","$option",146],["T_OBJECT_OPERATOR","->",146],["T_STRING","getOptionId",146],"(",")",")",["T_WHITESPACE"," ",146],"{",["T_WHITESPACE","\n            ",146],["T_VARIABLE","$options",147],["T_WHITESPACE"," ",147],"=",["T_WHITESPACE"," ",147],["T_VARIABLE","$product",147],["T_OBJECT_OPERATOR","->",147],["T_STRING","getOptions",147],"(",")",";",["T_WHITESPACE","\n            ",147],["T_IF","if",148],["T_WHITESPACE"," ",148],"(","!",["T_VARIABLE","$options",148],")",["T_WHITESPACE"," ",148],"{",["T_WHITESPACE","\n                ",148],["T_VARIABLE","$options",149],["T_WHITESPACE"," ",149],"=",["T_WHITESPACE"," ",149],["T_VARIABLE","$this",149],["T_OBJECT_OPERATOR","->",149],["T_STRING","getProductOptions",149],"(",["T_VARIABLE","$product",149],")",";",["T_WHITESPACE","\n            ",149],"}",["T_WHITESPACE","\n\n            ",150],["T_VARIABLE","$persistedOption",152],["T_WHITESPACE"," ",152],"=",["T_WHITESPACE"," ",152],["T_STRING","array_filter",152],"(",["T_VARIABLE","$options",152],",",["T_WHITESPACE"," ",152],["T_FUNCTION","function",152],["T_WHITESPACE"," ",152],"(",["T_VARIABLE","$iOption",152],")",["T_WHITESPACE"," ",152],["T_USE","use",152],["T_WHITESPACE"," ",152],"(",["T_VARIABLE","$option",152],")",["T_WHITESPACE"," ",152],"{",["T_WHITESPACE","\n                ",152],["T_RETURN","return",153],["T_WHITESPACE"," ",153],["T_VARIABLE","$option",153],["T_OBJECT_OPERATOR","->",153],["T_STRING","getOptionId",153],"(",")",["T_WHITESPACE"," ",153],["T_IS_EQUAL","==",153],["T_WHITESPACE"," ",153],["T_VARIABLE","$iOption",153],["T_OBJECT_OPERATOR","->",153],["T_STRING","getOptionId",153],"(",")",";",["T_WHITESPACE","\n            ",153],"}",")",";",["T_WHITESPACE","\n            ",154],["T_VARIABLE","$persistedOption",155],["T_WHITESPACE"," ",155],"=",["T_WHITESPACE"," ",155],["T_STRING","reset",155],"(",["T_VARIABLE","$persistedOption",155],")",";",["T_WHITESPACE","\n\n            ",155],["T_IF","if",157],["T_WHITESPACE"," ",157],"(","!",["T_VARIABLE","$persistedOption",157],")",["T_WHITESPACE"," ",157],"{",["T_WHITESPACE","\n                ",157],["T_THROW","throw",158],["T_WHITESPACE"," ",158],["T_NEW","new",158],["T_WHITESPACE"," ",158],["T_STRING","NoSuchEntityException",158],"(",")",";",["T_WHITESPACE","\n            ",158],"}",["T_WHITESPACE","\n            ",159],["T_VARIABLE","$originalValues",160],["T_WHITESPACE"," ",160],"=",["T_WHITESPACE"," ",160],["T_VARIABLE","$persistedOption",160],["T_OBJECT_OPERATOR","->",160],["T_STRING","getValues",160],"(",")",";",["T_WHITESPACE","\n            ",160],["T_VARIABLE","$newValues",161],["T_WHITESPACE"," ",161],"=",["T_WHITESPACE"," ",161],["T_VARIABLE","$option",161],["T_OBJECT_OPERATOR","->",161],["T_STRING","getData",161],"(",["T_CONSTANT_ENCAPSED_STRING","'values'",161],")",";",["T_WHITESPACE","\n            ",161],["T_IF","if",162],["T_WHITESPACE"," ",162],"(",["T_VARIABLE","$newValues",162],")",["T_WHITESPACE"," ",162],"{",["T_WHITESPACE","\n                ",162],["T_VARIABLE","$newValues",163],["T_WHITESPACE"," ",163],"=",["T_WHITESPACE"," ",163],["T_VARIABLE","$this",163],["T_OBJECT_OPERATOR","->",163],["T_STRING","markRemovedValues",163],"(",["T_VARIABLE","$newValues",163],",",["T_WHITESPACE"," ",163],["T_VARIABLE","$originalValues",163],")",";",["T_WHITESPACE","\n                ",163],["T_VARIABLE","$option",164],["T_OBJECT_OPERATOR","->",164],["T_STRING","setData",164],"(",["T_CONSTANT_ENCAPSED_STRING","'values'",164],",",["T_WHITESPACE"," ",164],["T_VARIABLE","$newValues",164],")",";",["T_WHITESPACE","\n            ",164],"}",["T_WHITESPACE","\n        ",165],"}",["T_WHITESPACE","\n        ",166],["T_VARIABLE","$option",167],["T_OBJECT_OPERATOR","->",167],["T_STRING","save",167],"(",")",";",["T_WHITESPACE","\n        ",167],["T_RETURN","return",168],["T_WHITESPACE"," ",168],["T_VARIABLE","$option",168],";",["T_WHITESPACE","\n    ",168],"}",["T_WHITESPACE","\n\n    ",169],["T_DOC_COMMENT","\/**\n     * {@inheritdoc}\n     *\/",171],["T_WHITESPACE","\n    ",173],["T_PUBLIC","public",174],["T_WHITESPACE"," ",174],["T_FUNCTION","function",174],["T_WHITESPACE"," ",174],["T_STRING","deleteByIdentifier",174],"(",["T_VARIABLE","$sku",174],",",["T_WHITESPACE"," ",174],["T_VARIABLE","$optionId",174],")",["T_WHITESPACE","\n    ",174],"{",["T_WHITESPACE","\n        ",175],["T_VARIABLE","$product",176],["T_WHITESPACE"," ",176],"=",["T_WHITESPACE"," ",176],["T_VARIABLE","$this",176],["T_OBJECT_OPERATOR","->",176],["T_STRING","productRepository",176],["T_OBJECT_OPERATOR","->",176],["T_STRING","get",176],"(",["T_VARIABLE","$sku",176],",",["T_WHITESPACE"," ",176],["T_STRING","true",176],")",";",["T_WHITESPACE","\n        ",176],["T_VARIABLE","$options",177],["T_WHITESPACE"," ",177],"=",["T_WHITESPACE"," ",177],["T_VARIABLE","$product",177],["T_OBJECT_OPERATOR","->",177],["T_STRING","getOptions",177],"(",")",";",["T_WHITESPACE","\n        ",177],["T_VARIABLE","$option",178],["T_WHITESPACE"," ",178],"=",["T_WHITESPACE"," ",178],["T_VARIABLE","$product",178],["T_OBJECT_OPERATOR","->",178],["T_STRING","getOptionById",178],"(",["T_VARIABLE","$optionId",178],")",";",["T_WHITESPACE","\n        ",178],["T_IF","if",179],["T_WHITESPACE"," ",179],"(",["T_VARIABLE","$option",179],["T_WHITESPACE"," ",179],["T_IS_IDENTICAL","===",179],["T_WHITESPACE"," ",179],["T_STRING","null",179],")",["T_WHITESPACE"," ",179],"{",["T_WHITESPACE","\n            ",179],["T_THROW","throw",180],["T_WHITESPACE"," ",180],["T_STRING","NoSuchEntityException",180],["T_DOUBLE_COLON","::",180],["T_STRING","singleField",180],"(",["T_CONSTANT_ENCAPSED_STRING","'optionId'",180],",",["T_WHITESPACE"," ",180],["T_VARIABLE","$optionId",180],")",";",["T_WHITESPACE","\n        ",180],"}",["T_WHITESPACE","\n        ",181],["T_UNSET","unset",182],"(",["T_VARIABLE","$options",182],"[",["T_VARIABLE","$optionId",182],"]",")",";",["T_WHITESPACE","\n        ",182],["T_TRY","try",183],["T_WHITESPACE"," ",183],"{",["T_WHITESPACE","\n            ",183],["T_VARIABLE","$this",184],["T_OBJECT_OPERATOR","->",184],["T_STRING","delete",184],"(",["T_VARIABLE","$option",184],")",";",["T_WHITESPACE","\n            ",184],["T_IF","if",185],["T_WHITESPACE"," ",185],"(",["T_EMPTY","empty",185],"(",["T_VARIABLE","$options",185],")",")",["T_WHITESPACE"," ",185],"{",["T_WHITESPACE","\n                ",185],["T_VARIABLE","$this",186],["T_OBJECT_OPERATOR","->",186],["T_STRING","productRepository",186],["T_OBJECT_OPERATOR","->",186],["T_STRING","save",186],"(",["T_VARIABLE","$product",186],")",";",["T_WHITESPACE","\n            ",186],"}",["T_WHITESPACE","\n        ",187],"}",["T_WHITESPACE"," ",188],["T_CATCH","catch",188],["T_WHITESPACE"," ",188],"(",["T_NS_SEPARATOR","\\",188],["T_STRING","Exception",188],["T_WHITESPACE"," ",188],["T_VARIABLE","$e",188],")",["T_WHITESPACE"," ",188],"{",["T_WHITESPACE","\n            ",188],["T_THROW","throw",189],["T_WHITESPACE"," ",189],["T_NEW","new",189],["T_WHITESPACE"," ",189],["T_STRING","CouldNotSaveException",189],"(",["T_STRING","__",189],"(",["T_CONSTANT_ENCAPSED_STRING","'Could not remove custom option'",189],")",")",";",["T_WHITESPACE","\n        ",189],"}",["T_WHITESPACE","\n        ",190],["T_RETURN","return",191],["T_WHITESPACE"," ",191],["T_STRING","true",191],";",["T_WHITESPACE","\n    ",191],"}",["T_WHITESPACE","\n\n    ",192],["T_DOC_COMMENT","\/**\n     * Mark original values for removal if they are absent among new values\n     *\n     * @param $newValues array\n     * @param $originalValues \\Magento\\Catalog\\Model\\Product\\Option\\Value[]\n     * @return array\n     *\/",194],["T_WHITESPACE","\n    ",200],["T_PROTECTED","protected",201],["T_WHITESPACE"," ",201],["T_FUNCTION","function",201],["T_WHITESPACE"," ",201],["T_STRING","markRemovedValues",201],"(",["T_VARIABLE","$newValues",201],",",["T_WHITESPACE"," ",201],["T_VARIABLE","$originalValues",201],")",["T_WHITESPACE","\n    ",201],"{",["T_WHITESPACE","\n        ",202],["T_VARIABLE","$existingValuesIds",203],["T_WHITESPACE"," ",203],"=",["T_WHITESPACE"," ",203],"[","]",";",["T_WHITESPACE","\n\n        ",203],["T_FOREACH","foreach",205],["T_WHITESPACE"," ",205],"(",["T_VARIABLE","$newValues",205],["T_WHITESPACE"," ",205],["T_AS","as",205],["T_WHITESPACE"," ",205],["T_VARIABLE","$newValue",205],")",["T_WHITESPACE"," ",205],"{",["T_WHITESPACE","\n            ",205],["T_IF","if",206],["T_WHITESPACE"," ",206],"(",["T_STRING","array_key_exists",206],"(",["T_CONSTANT_ENCAPSED_STRING","'option_type_id'",206],",",["T_WHITESPACE"," ",206],["T_VARIABLE","$newValue",206],")",")",["T_WHITESPACE"," ",206],"{",["T_WHITESPACE","\n                ",206],["T_VARIABLE","$existingValuesIds",207],"[","]",["T_WHITESPACE"," ",207],"=",["T_WHITESPACE"," ",207],["T_VARIABLE","$newValue",207],"[",["T_CONSTANT_ENCAPSED_STRING","'option_type_id'",207],"]",";",["T_WHITESPACE","\n            ",207],"}",["T_WHITESPACE","\n        ",208],"}",["T_WHITESPACE","\n        ",209],["T_DOC_COMMENT","\/** @var $originalValue \\Magento\\Catalog\\Model\\Product\\Option\\Value *\/",210],["T_WHITESPACE","\n        ",210],["T_FOREACH","foreach",211],["T_WHITESPACE"," ",211],"(",["T_VARIABLE","$originalValues",211],["T_WHITESPACE"," ",211],["T_AS","as",211],["T_WHITESPACE"," ",211],["T_VARIABLE","$originalValue",211],")",["T_WHITESPACE"," ",211],"{",["T_WHITESPACE","\n            ",211],["T_IF","if",212],["T_WHITESPACE"," ",212],"(","!",["T_STRING","in_array",212],"(",["T_VARIABLE","$originalValue",212],["T_OBJECT_OPERATOR","->",212],["T_STRING","getData",212],"(",["T_CONSTANT_ENCAPSED_STRING","'option_type_id'",212],")",",",["T_WHITESPACE"," ",212],["T_VARIABLE","$existingValuesIds",212],")",")",["T_WHITESPACE"," ",212],"{",["T_WHITESPACE","\n                ",212],["T_VARIABLE","$originalValue",213],["T_OBJECT_OPERATOR","->",213],["T_STRING","setData",213],"(",["T_CONSTANT_ENCAPSED_STRING","'is_delete'",213],",",["T_WHITESPACE"," ",213],["T_LNUMBER","1",213],")",";",["T_WHITESPACE","\n                ",213],["T_VARIABLE","$newValues",214],"[","]",["T_WHITESPACE"," ",214],"=",["T_WHITESPACE"," ",214],["T_VARIABLE","$originalValue",214],["T_OBJECT_OPERATOR","->",214],["T_STRING","getData",214],"(",")",";",["T_WHITESPACE","\n            ",214],"}",["T_WHITESPACE","\n        ",215],"}",["T_WHITESPACE","\n\n        ",216],["T_RETURN","return",218],["T_WHITESPACE"," ",218],["T_VARIABLE","$newValues",218],";",["T_WHITESPACE","\n    ",218],"}",["T_WHITESPACE","\n\n    ",219],["T_DOC_COMMENT","\/**\n     * @return \\Magento\\Catalog\\Model\\Product\\OptionFactory\n     * @deprecated\n     *\/",221],["T_WHITESPACE","\n    ",224],["T_PRIVATE","private",225],["T_WHITESPACE"," ",225],["T_FUNCTION","function",225],["T_WHITESPACE"," ",225],["T_STRING","getOptionFactory",225],"(",")",["T_WHITESPACE","\n    ",225],"{",["T_WHITESPACE","\n        ",226],["T_IF","if",227],["T_WHITESPACE"," ",227],"(",["T_STRING","null",227],["T_WHITESPACE"," ",227],["T_IS_IDENTICAL","===",227],["T_WHITESPACE"," ",227],["T_VARIABLE","$this",227],["T_OBJECT_OPERATOR","->",227],["T_STRING","optionFactory",227],")",["T_WHITESPACE"," ",227],"{",["T_WHITESPACE","\n            ",227],["T_VARIABLE","$this",228],["T_OBJECT_OPERATOR","->",228],["T_STRING","optionFactory",228],["T_WHITESPACE"," ",228],"=",["T_WHITESPACE"," ",228],["T_NS_SEPARATOR","\\",228],["T_STRING","Magento",228],["T_NS_SEPARATOR","\\",228],["T_STRING","Framework",228],["T_NS_SEPARATOR","\\",228],["T_STRING","App",228],["T_NS_SEPARATOR","\\",228],["T_STRING","ObjectManager",228],["T_DOUBLE_COLON","::",228],["T_STRING","getInstance",228],"(",")",["T_WHITESPACE","\n                ",228],["T_OBJECT_OPERATOR","->",229],["T_STRING","get",229],"(",["T_NS_SEPARATOR","\\",229],["T_STRING","Magento",229],["T_NS_SEPARATOR","\\",229],["T_STRING","Catalog",229],["T_NS_SEPARATOR","\\",229],["T_STRING","Model",229],["T_NS_SEPARATOR","\\",229],["T_STRING","Product",229],["T_NS_SEPARATOR","\\",229],["T_STRING","OptionFactory",229],["T_DOUBLE_COLON","::",229],["T_CLASS","class",229],")",";",["T_WHITESPACE","\n        ",229],"}",["T_WHITESPACE","\n        ",230],["T_RETURN","return",231],["T_WHITESPACE"," ",231],["T_VARIABLE","$this",231],["T_OBJECT_OPERATOR","->",231],["T_STRING","optionFactory",231],";",["T_WHITESPACE","\n    ",231],"}",["T_WHITESPACE","\n\n    ",232],["T_DOC_COMMENT","\/**\n     * @return \\Magento\\Catalog\\Model\\ResourceModel\\Product\\Option\\CollectionFactory\n     * @deprecated\n     *\/",234],["T_WHITESPACE","\n    ",237],["T_PRIVATE","private",238],["T_WHITESPACE"," ",238],["T_FUNCTION","function",238],["T_WHITESPACE"," ",238],["T_STRING","getCollectionFactory",238],"(",")",["T_WHITESPACE","\n    ",238],"{",["T_WHITESPACE","\n        ",239],["T_IF","if",240],["T_WHITESPACE"," ",240],"(",["T_STRING","null",240],["T_WHITESPACE"," ",240],["T_IS_IDENTICAL","===",240],["T_WHITESPACE"," ",240],["T_VARIABLE","$this",240],["T_OBJECT_OPERATOR","->",240],["T_STRING","collectionFactory",240],")",["T_WHITESPACE"," ",240],"{",["T_WHITESPACE","\n            ",240],["T_VARIABLE","$this",241],["T_OBJECT_OPERATOR","->",241],["T_STRING","collectionFactory",241],["T_WHITESPACE"," ",241],"=",["T_WHITESPACE"," ",241],["T_NS_SEPARATOR","\\",241],["T_STRING","Magento",241],["T_NS_SEPARATOR","\\",241],["T_STRING","Framework",241],["T_NS_SEPARATOR","\\",241],["T_STRING","App",241],["T_NS_SEPARATOR","\\",241],["T_STRING","ObjectManager",241],["T_DOUBLE_COLON","::",241],["T_STRING","getInstance",241],"(",")",["T_WHITESPACE","\n                ",241],["T_OBJECT_OPERATOR","->",242],["T_STRING","get",242],"(",["T_NS_SEPARATOR","\\",242],["T_STRING","Magento",242],["T_NS_SEPARATOR","\\",242],["T_STRING","Catalog",242],["T_NS_SEPARATOR","\\",242],["T_STRING","Model",242],["T_NS_SEPARATOR","\\",242],["T_STRING","ResourceModel",242],["T_NS_SEPARATOR","\\",242],["T_STRING","Product",242],["T_NS_SEPARATOR","\\",242],["T_STRING","Option",242],["T_NS_SEPARATOR","\\",242],["T_STRING","CollectionFactory",242],["T_DOUBLE_COLON","::",242],["T_CLASS","class",242],")",";",["T_WHITESPACE","\n        ",242],"}",["T_WHITESPACE","\n        ",243],["T_RETURN","return",244],["T_WHITESPACE"," ",244],["T_VARIABLE","$this",244],["T_OBJECT_OPERATOR","->",244],["T_STRING","collectionFactory",244],";",["T_WHITESPACE","\n    ",244],"}",["T_WHITESPACE","\n\n    ",245],["T_DOC_COMMENT","\/**\n     * @return \\Magento\\Framework\\EntityManager\\MetadataPool\n     * @deprecated\n     *\/",247],["T_WHITESPACE","\n    ",250],["T_PRIVATE","private",251],["T_WHITESPACE"," ",251],["T_FUNCTION","function",251],["T_WHITESPACE"," ",251],["T_STRING","getMetadataPool",251],"(",")",["T_WHITESPACE","\n    ",251],"{",["T_WHITESPACE","\n        ",252],["T_IF","if",253],["T_WHITESPACE"," ",253],"(",["T_STRING","null",253],["T_WHITESPACE"," ",253],["T_IS_IDENTICAL","===",253],["T_WHITESPACE"," ",253],["T_VARIABLE","$this",253],["T_OBJECT_OPERATOR","->",253],["T_STRING","metadataPool",253],")",["T_WHITESPACE"," ",253],"{",["T_WHITESPACE","\n            ",253],["T_VARIABLE","$this",254],["T_OBJECT_OPERATOR","->",254],["T_STRING","metadataPool",254],["T_WHITESPACE"," ",254],"=",["T_WHITESPACE"," ",254],["T_NS_SEPARATOR","\\",254],["T_STRING","Magento",254],["T_NS_SEPARATOR","\\",254],["T_STRING","Framework",254],["T_NS_SEPARATOR","\\",254],["T_STRING","App",254],["T_NS_SEPARATOR","\\",254],["T_STRING","ObjectManager",254],["T_DOUBLE_COLON","::",254],["T_STRING","getInstance",254],"(",")",["T_WHITESPACE","\n                ",254],["T_OBJECT_OPERATOR","->",255],["T_STRING","get",255],"(",["T_NS_SEPARATOR","\\",255],["T_STRING","Magento",255],["T_NS_SEPARATOR","\\",255],["T_STRING","Framework",255],["T_NS_SEPARATOR","\\",255],["T_STRING","EntityManager",255],["T_NS_SEPARATOR","\\",255],["T_STRING","MetadataPool",255],["T_DOUBLE_COLON","::",255],["T_CLASS","class",255],")",";",["T_WHITESPACE","\n        ",255],"}",["T_WHITESPACE","\n        ",256],["T_RETURN","return",257],["T_WHITESPACE"," ",257],["T_VARIABLE","$this",257],["T_OBJECT_OPERATOR","->",257],["T_STRING","metadataPool",257],";",["T_WHITESPACE","\n    ",257],"}",["T_WHITESPACE","\n\n    ",258],["T_DOC_COMMENT","\/**\n     * @return \\Magento\\Framework\\EntityManager\\HydratorPool\n     * @deprecated\n     *\/",260],["T_WHITESPACE","\n    ",263],["T_PRIVATE","private",264],["T_WHITESPACE"," ",264],["T_FUNCTION","function",264],["T_WHITESPACE"," ",264],["T_STRING","getHydratorPool",264],"(",")",["T_WHITESPACE","\n    ",264],"{",["T_WHITESPACE","\n        ",265],["T_IF","if",266],["T_WHITESPACE"," ",266],"(",["T_STRING","null",266],["T_WHITESPACE"," ",266],["T_IS_IDENTICAL","===",266],["T_WHITESPACE"," ",266],["T_VARIABLE","$this",266],["T_OBJECT_OPERATOR","->",266],["T_STRING","hydratorPool",266],")",["T_WHITESPACE"," ",266],"{",["T_WHITESPACE","\n            ",266],["T_VARIABLE","$this",267],["T_OBJECT_OPERATOR","->",267],["T_STRING","hydratorPool",267],["T_WHITESPACE"," ",267],"=",["T_WHITESPACE"," ",267],["T_NS_SEPARATOR","\\",267],["T_STRING","Magento",267],["T_NS_SEPARATOR","\\",267],["T_STRING","Framework",267],["T_NS_SEPARATOR","\\",267],["T_STRING","App",267],["T_NS_SEPARATOR","\\",267],["T_STRING","ObjectManager",267],["T_DOUBLE_COLON","::",267],["T_STRING","getInstance",267],"(",")",["T_WHITESPACE","\n                ",267],["T_OBJECT_OPERATOR","->",268],["T_STRING","get",268],"(",["T_NS_SEPARATOR","\\",268],["T_STRING","Magento",268],["T_NS_SEPARATOR","\\",268],["T_STRING","Framework",268],["T_NS_SEPARATOR","\\",268],["T_STRING","EntityManager",268],["T_NS_SEPARATOR","\\",268],["T_STRING","HydratorPool",268],["T_DOUBLE_COLON","::",268],["T_CLASS","class",268],")",";",["T_WHITESPACE","\n        ",268],"}",["T_WHITESPACE","\n        ",269],["T_RETURN","return",270],["T_WHITESPACE"," ",270],["T_VARIABLE","$this",270],["T_OBJECT_OPERATOR","->",270],["T_STRING","hydratorPool",270],";",["T_WHITESPACE","\n    ",270],"}",["T_WHITESPACE","\n",271],"}",["T_WHITESPACE","\n",272]]
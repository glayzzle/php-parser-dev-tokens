[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Copyright \u00c2\u00a9 2013-2017 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n *\/",2],["T_WHITESPACE","\n",5],["T_NAMESPACE","namespace",6],["T_WHITESPACE"," ",6],["T_STRING","Magento",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Catalog",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Model",6],["T_NS_SEPARATOR","\\",6],["T_STRING","ResourceModel",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Category",6],";",["T_WHITESPACE","\n\n",6],["T_USE","use",8],["T_WHITESPACE"," ",8],["T_STRING","Magento",8],["T_NS_SEPARATOR","\\",8],["T_STRING","CatalogUrlRewrite",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Model",8],["T_NS_SEPARATOR","\\",8],["T_STRING","CategoryUrlRewriteGenerator",8],";",["T_WHITESPACE","\n",8],["T_USE","use",9],["T_WHITESPACE"," ",9],["T_STRING","Magento",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Catalog",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Model",9],["T_NS_SEPARATOR","\\",9],["T_STRING","ResourceModel",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Category",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Flat",9],["T_NS_SEPARATOR","\\",9],["T_STRING","CollectionFactory",9],["T_WHITESPACE"," ",9],["T_AS","as",9],["T_WHITESPACE"," ",9],["T_STRING","CategoryFlatCollectionFactory",9],";",["T_WHITESPACE","\n",9],["T_USE","use",10],["T_WHITESPACE"," ",10],["T_STRING","Magento",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Framework",10],["T_NS_SEPARATOR","\\",10],["T_STRING","App",10],["T_NS_SEPARATOR","\\",10],["T_STRING","ObjectManager",10],";",["T_WHITESPACE","\n\n",10],["T_DOC_COMMENT","\/**\n * Category flat model\n *\n * @SuppressWarnings(PHPMD.LongVariable)\n * @SuppressWarnings(PHPMD.CouplingBetweenObjects)\n *\/",12],["T_WHITESPACE","\n",17],["T_CLASS","class",18],["T_WHITESPACE"," ",18],["T_STRING","Flat",18],["T_WHITESPACE"," ",18],["T_EXTENDS","extends",18],["T_WHITESPACE"," ",18],["T_NS_SEPARATOR","\\",18],["T_STRING","Magento",18],["T_NS_SEPARATOR","\\",18],["T_STRING","Indexer",18],["T_NS_SEPARATOR","\\",18],["T_STRING","Model",18],["T_NS_SEPARATOR","\\",18],["T_STRING","ResourceModel",18],["T_NS_SEPARATOR","\\",18],["T_STRING","AbstractResource",18],["T_WHITESPACE","\n",18],"{",["T_WHITESPACE","\n    ",19],["T_DOC_COMMENT","\/**\n     * Store id\n     *\n     * @var int\n     *\/",20],["T_WHITESPACE","\n    ",24],["T_PROTECTED","protected",25],["T_WHITESPACE"," ",25],["T_VARIABLE","$_storeId",25],";",["T_WHITESPACE","\n\n    ",25],["T_DOC_COMMENT","\/**\n     * Loaded\n     *\n     * @var boolean\n     *\/",27],["T_WHITESPACE","\n    ",31],["T_PROTECTED","protected",32],["T_WHITESPACE"," ",32],["T_VARIABLE","$_loaded",32],["T_WHITESPACE"," ",32],"=",["T_WHITESPACE"," ",32],["T_STRING","false",32],";",["T_WHITESPACE","\n\n    ",32],["T_DOC_COMMENT","\/**\n     * Nodes\n     *\n     * @var array\n     *\/",34],["T_WHITESPACE","\n    ",38],["T_PROTECTED","protected",39],["T_WHITESPACE"," ",39],["T_VARIABLE","$_nodes",39],["T_WHITESPACE"," ",39],"=",["T_WHITESPACE"," ",39],"[","]",";",["T_WHITESPACE","\n\n    ",39],["T_DOC_COMMENT","\/**\n     * Inactive categories ids\n     *\n     * @var array\n     *\/",41],["T_WHITESPACE","\n    ",45],["T_PROTECTED","protected",46],["T_WHITESPACE"," ",46],["T_VARIABLE","$_inactiveCategoryIds",46],";",["T_WHITESPACE","\n\n    ",46],["T_DOC_COMMENT","\/**\n     * Core event manager proxy\n     *\n     * @var \\Magento\\Framework\\Event\\ManagerInterface\n     *\/",48],["T_WHITESPACE","\n    ",52],["T_PROTECTED","protected",53],["T_WHITESPACE"," ",53],["T_VARIABLE","$_eventManager",53],";",["T_WHITESPACE","\n\n    ",53],["T_DOC_COMMENT","\/**\n     * Catalog config\n     *\n     * @var \\Magento\\Catalog\\Model\\Config\n     *\/",55],["T_WHITESPACE","\n    ",59],["T_PROTECTED","protected",60],["T_WHITESPACE"," ",60],["T_VARIABLE","$_catalogConfig",60],";",["T_WHITESPACE","\n\n    ",60],["T_DOC_COMMENT","\/**\n     * Store manager\n     *\n     * @var \\Magento\\Store\\Model\\StoreManagerInterface\n     *\/",62],["T_WHITESPACE","\n    ",66],["T_PROTECTED","protected",67],["T_WHITESPACE"," ",67],["T_VARIABLE","$_storeManager",67],";",["T_WHITESPACE","\n\n    ",67],["T_DOC_COMMENT","\/**\n     * Category collection factory\n     *\n     * @var \\Magento\\Catalog\\Model\\ResourceModel\\Category\\CollectionFactory\n     * @deprecated\n     *\/",69],["T_WHITESPACE","\n    ",74],["T_PROTECTED","protected",75],["T_WHITESPACE"," ",75],["T_VARIABLE","$_categoryCollectionFactory",75],";",["T_WHITESPACE","\n\n    ",75],["T_DOC_COMMENT","\/**\n     * Category factory\n     *\n     * @var \\Magento\\Catalog\\Model\\CategoryFactory\n     *\/",77],["T_WHITESPACE","\n    ",81],["T_PROTECTED","protected",82],["T_WHITESPACE"," ",82],["T_VARIABLE","$_categoryFactory",82],";",["T_WHITESPACE","\n\n    ",82],["T_DOC_COMMENT","\/**\n     * @var CategoryFlatCollectionFactory\n     *\/",84],["T_WHITESPACE","\n    ",86],["T_PRIVATE","private",87],["T_WHITESPACE"," ",87],["T_VARIABLE","$categoryFlatCollectionFactory",87],";",["T_WHITESPACE","\n\n    ",87],["T_DOC_COMMENT","\/**\n     * Class constructor\n     *\n     * @param \\Magento\\Framework\\Model\\ResourceModel\\Db\\Context $context\n     * @param \\Magento\\Framework\\Indexer\\Table\\StrategyInterface $tableStrategy\n     * @param \\Magento\\Catalog\\Model\\CategoryFactory $categoryFactory\n     * @param CollectionFactory $categoryCollectionFactory\n     * @param \\Magento\\Store\\Model\\StoreManagerInterface $storeManager\n     * @param \\Magento\\Catalog\\Model\\Config $catalogConfig\n     * @param \\Magento\\Framework\\Event\\ManagerInterface $eventManager\n     * @param string $connectionName\n     *\/",89],["T_WHITESPACE","\n    ",100],["T_PUBLIC","public",101],["T_WHITESPACE"," ",101],["T_FUNCTION","function",101],["T_WHITESPACE"," ",101],["T_STRING","__construct",101],"(",["T_WHITESPACE","\n        ",101],["T_NS_SEPARATOR","\\",102],["T_STRING","Magento",102],["T_NS_SEPARATOR","\\",102],["T_STRING","Framework",102],["T_NS_SEPARATOR","\\",102],["T_STRING","Model",102],["T_NS_SEPARATOR","\\",102],["T_STRING","ResourceModel",102],["T_NS_SEPARATOR","\\",102],["T_STRING","Db",102],["T_NS_SEPARATOR","\\",102],["T_STRING","Context",102],["T_WHITESPACE"," ",102],["T_VARIABLE","$context",102],",",["T_WHITESPACE","\n        ",102],["T_NS_SEPARATOR","\\",103],["T_STRING","Magento",103],["T_NS_SEPARATOR","\\",103],["T_STRING","Framework",103],["T_NS_SEPARATOR","\\",103],["T_STRING","Indexer",103],["T_NS_SEPARATOR","\\",103],["T_STRING","Table",103],["T_NS_SEPARATOR","\\",103],["T_STRING","StrategyInterface",103],["T_WHITESPACE"," ",103],["T_VARIABLE","$tableStrategy",103],",",["T_WHITESPACE","\n        ",103],["T_NS_SEPARATOR","\\",104],["T_STRING","Magento",104],["T_NS_SEPARATOR","\\",104],["T_STRING","Catalog",104],["T_NS_SEPARATOR","\\",104],["T_STRING","Model",104],["T_NS_SEPARATOR","\\",104],["T_STRING","CategoryFactory",104],["T_WHITESPACE"," ",104],["T_VARIABLE","$categoryFactory",104],",",["T_WHITESPACE","\n        ",104],["T_NS_SEPARATOR","\\",105],["T_STRING","Magento",105],["T_NS_SEPARATOR","\\",105],["T_STRING","Catalog",105],["T_NS_SEPARATOR","\\",105],["T_STRING","Model",105],["T_NS_SEPARATOR","\\",105],["T_STRING","ResourceModel",105],["T_NS_SEPARATOR","\\",105],["T_STRING","Category",105],["T_NS_SEPARATOR","\\",105],["T_STRING","CollectionFactory",105],["T_WHITESPACE"," ",105],["T_VARIABLE","$categoryCollectionFactory",105],",",["T_WHITESPACE","\n        ",105],["T_NS_SEPARATOR","\\",106],["T_STRING","Magento",106],["T_NS_SEPARATOR","\\",106],["T_STRING","Store",106],["T_NS_SEPARATOR","\\",106],["T_STRING","Model",106],["T_NS_SEPARATOR","\\",106],["T_STRING","StoreManagerInterface",106],["T_WHITESPACE"," ",106],["T_VARIABLE","$storeManager",106],",",["T_WHITESPACE","\n        ",106],["T_NS_SEPARATOR","\\",107],["T_STRING","Magento",107],["T_NS_SEPARATOR","\\",107],["T_STRING","Catalog",107],["T_NS_SEPARATOR","\\",107],["T_STRING","Model",107],["T_NS_SEPARATOR","\\",107],["T_STRING","Config",107],["T_WHITESPACE"," ",107],["T_VARIABLE","$catalogConfig",107],",",["T_WHITESPACE","\n        ",107],["T_NS_SEPARATOR","\\",108],["T_STRING","Magento",108],["T_NS_SEPARATOR","\\",108],["T_STRING","Framework",108],["T_NS_SEPARATOR","\\",108],["T_STRING","Event",108],["T_NS_SEPARATOR","\\",108],["T_STRING","ManagerInterface",108],["T_WHITESPACE"," ",108],["T_VARIABLE","$eventManager",108],",",["T_WHITESPACE","\n        ",108],["T_VARIABLE","$connectionName",109],["T_WHITESPACE"," ",109],"=",["T_WHITESPACE"," ",109],["T_STRING","null",109],["T_WHITESPACE","\n    ",109],")",["T_WHITESPACE"," ",110],"{",["T_WHITESPACE","\n        ",110],["T_VARIABLE","$this",111],["T_OBJECT_OPERATOR","->",111],["T_STRING","_categoryFactory",111],["T_WHITESPACE"," ",111],"=",["T_WHITESPACE"," ",111],["T_VARIABLE","$categoryFactory",111],";",["T_WHITESPACE","\n        ",111],["T_VARIABLE","$this",112],["T_OBJECT_OPERATOR","->",112],["T_STRING","_categoryCollectionFactory",112],["T_WHITESPACE"," ",112],"=",["T_WHITESPACE"," ",112],["T_VARIABLE","$categoryCollectionFactory",112],";",["T_WHITESPACE","\n        ",112],["T_VARIABLE","$this",113],["T_OBJECT_OPERATOR","->",113],["T_STRING","_storeManager",113],["T_WHITESPACE"," ",113],"=",["T_WHITESPACE"," ",113],["T_VARIABLE","$storeManager",113],";",["T_WHITESPACE","\n        ",113],["T_VARIABLE","$this",114],["T_OBJECT_OPERATOR","->",114],["T_STRING","_catalogConfig",114],["T_WHITESPACE"," ",114],"=",["T_WHITESPACE"," ",114],["T_VARIABLE","$catalogConfig",114],";",["T_WHITESPACE","\n        ",114],["T_VARIABLE","$this",115],["T_OBJECT_OPERATOR","->",115],["T_STRING","_eventManager",115],["T_WHITESPACE"," ",115],"=",["T_WHITESPACE"," ",115],["T_VARIABLE","$eventManager",115],";",["T_WHITESPACE","\n        ",115],["T_STRING","parent",116],["T_DOUBLE_COLON","::",116],["T_STRING","__construct",116],"(",["T_VARIABLE","$context",116],",",["T_WHITESPACE"," ",116],["T_VARIABLE","$tableStrategy",116],",",["T_WHITESPACE"," ",116],["T_VARIABLE","$connectionName",116],")",";",["T_WHITESPACE","\n    ",116],"}",["T_WHITESPACE","\n\n    ",117],["T_DOC_COMMENT","\/**\n     * Resource initializations\n     *\n     * @return void\n     *\/",119],["T_WHITESPACE","\n    ",123],["T_PROTECTED","protected",124],["T_WHITESPACE"," ",124],["T_FUNCTION","function",124],["T_WHITESPACE"," ",124],["T_STRING","_construct",124],"(",")",["T_WHITESPACE","\n    ",124],"{",["T_WHITESPACE","\n        ",125],["T_VARIABLE","$this",126],["T_OBJECT_OPERATOR","->",126],["T_STRING","_init",126],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog_category_flat'",126],",",["T_WHITESPACE"," ",126],["T_CONSTANT_ENCAPSED_STRING","'entity_id'",126],")",";",["T_WHITESPACE","\n    ",126],"}",["T_WHITESPACE","\n\n    ",127],["T_DOC_COMMENT","\/**\n     * Set store id\n     *\n     * @param integer $storeId\n     * @return $this\n     *\/",129],["T_WHITESPACE","\n    ",134],["T_PUBLIC","public",135],["T_WHITESPACE"," ",135],["T_FUNCTION","function",135],["T_WHITESPACE"," ",135],["T_STRING","setStoreId",135],"(",["T_VARIABLE","$storeId",135],")",["T_WHITESPACE","\n    ",135],"{",["T_WHITESPACE","\n        ",136],["T_VARIABLE","$this",137],["T_OBJECT_OPERATOR","->",137],["T_STRING","_storeId",137],["T_WHITESPACE"," ",137],"=",["T_WHITESPACE"," ",137],["T_INT_CAST","(int)",137],["T_VARIABLE","$storeId",137],";",["T_WHITESPACE","\n        ",137],["T_RETURN","return",138],["T_WHITESPACE"," ",138],["T_VARIABLE","$this",138],";",["T_WHITESPACE","\n    ",138],"}",["T_WHITESPACE","\n\n    ",139],["T_DOC_COMMENT","\/**\n     * Return store id\n     *\n     * @return integer\n     *\/",141],["T_WHITESPACE","\n    ",145],["T_PUBLIC","public",146],["T_WHITESPACE"," ",146],["T_FUNCTION","function",146],["T_WHITESPACE"," ",146],["T_STRING","getStoreId",146],"(",")",["T_WHITESPACE","\n    ",146],"{",["T_WHITESPACE","\n        ",147],["T_IF","if",148],["T_WHITESPACE"," ",148],"(",["T_VARIABLE","$this",148],["T_OBJECT_OPERATOR","->",148],["T_STRING","_storeId",148],["T_WHITESPACE"," ",148],["T_IS_IDENTICAL","===",148],["T_WHITESPACE"," ",148],["T_STRING","null",148],")",["T_WHITESPACE"," ",148],"{",["T_WHITESPACE","\n            ",148],["T_RETURN","return",149],["T_WHITESPACE"," ",149],["T_INT_CAST","(int)",149],["T_VARIABLE","$this",149],["T_OBJECT_OPERATOR","->",149],["T_STRING","_storeManager",149],["T_OBJECT_OPERATOR","->",149],["T_STRING","getStore",149],"(",")",["T_OBJECT_OPERATOR","->",149],["T_STRING","getId",149],"(",")",";",["T_WHITESPACE","\n        ",149],"}",["T_WHITESPACE","\n        ",150],["T_RETURN","return",151],["T_WHITESPACE"," ",151],["T_VARIABLE","$this",151],["T_OBJECT_OPERATOR","->",151],["T_STRING","_storeId",151],";",["T_WHITESPACE","\n    ",151],"}",["T_WHITESPACE","\n\n    ",152],["T_DOC_COMMENT","\/**\n     * Get main table name\n     *\n     * @return string\n     *\/",154],["T_WHITESPACE","\n    ",158],["T_PUBLIC","public",159],["T_WHITESPACE"," ",159],["T_FUNCTION","function",159],["T_WHITESPACE"," ",159],["T_STRING","getMainTable",159],"(",")",["T_WHITESPACE","\n    ",159],"{",["T_WHITESPACE","\n        ",160],["T_RETURN","return",161],["T_WHITESPACE"," ",161],["T_VARIABLE","$this",161],["T_OBJECT_OPERATOR","->",161],["T_STRING","getMainStoreTable",161],"(",["T_VARIABLE","$this",161],["T_OBJECT_OPERATOR","->",161],["T_STRING","getStoreId",161],"(",")",")",";",["T_WHITESPACE","\n    ",161],"}",["T_WHITESPACE","\n\n    ",162],["T_DOC_COMMENT","\/**\n     * Return name of table for given $storeId.\n     *\n     * @param integer $storeId\n     * @return string\n     *\/",164],["T_WHITESPACE","\n    ",169],["T_PUBLIC","public",170],["T_WHITESPACE"," ",170],["T_FUNCTION","function",170],["T_WHITESPACE"," ",170],["T_STRING","getMainStoreTable",170],"(",["T_VARIABLE","$storeId",170],["T_WHITESPACE"," ",170],"=",["T_WHITESPACE"," ",170],["T_NS_SEPARATOR","\\",170],["T_STRING","Magento",170],["T_NS_SEPARATOR","\\",170],["T_STRING","Store",170],["T_NS_SEPARATOR","\\",170],["T_STRING","Model",170],["T_NS_SEPARATOR","\\",170],["T_STRING","Store",170],["T_DOUBLE_COLON","::",170],["T_STRING","DEFAULT_STORE_ID",170],")",["T_WHITESPACE","\n    ",170],"{",["T_WHITESPACE","\n        ",171],["T_IF","if",172],["T_WHITESPACE"," ",172],"(",["T_STRING","is_string",172],"(",["T_VARIABLE","$storeId",172],")",")",["T_WHITESPACE"," ",172],"{",["T_WHITESPACE","\n            ",172],["T_VARIABLE","$storeId",173],["T_WHITESPACE"," ",173],"=",["T_WHITESPACE"," ",173],["T_STRING","intval",173],"(",["T_VARIABLE","$storeId",173],")",";",["T_WHITESPACE","\n        ",173],"}",["T_WHITESPACE","\n\n        ",174],["T_IF","if",176],["T_WHITESPACE"," ",176],"(",["T_VARIABLE","$storeId",176],")",["T_WHITESPACE"," ",176],"{",["T_WHITESPACE","\n            ",176],["T_VARIABLE","$suffix",177],["T_WHITESPACE"," ",177],"=",["T_WHITESPACE"," ",177],["T_STRING","sprintf",177],"(",["T_CONSTANT_ENCAPSED_STRING","'store_%d'",177],",",["T_WHITESPACE"," ",177],["T_VARIABLE","$storeId",177],")",";",["T_WHITESPACE","\n            ",177],["T_VARIABLE","$table",178],["T_WHITESPACE"," ",178],"=",["T_WHITESPACE"," ",178],["T_VARIABLE","$this",178],["T_OBJECT_OPERATOR","->",178],["T_STRING","getTable",178],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog_category_flat_'",178],["T_WHITESPACE"," ",178],".",["T_WHITESPACE"," ",178],["T_VARIABLE","$suffix",178],")",";",["T_WHITESPACE","\n        ",178],"}",["T_WHITESPACE"," ",179],["T_ELSE","else",179],["T_WHITESPACE"," ",179],"{",["T_WHITESPACE","\n            ",179],["T_VARIABLE","$table",180],["T_WHITESPACE"," ",180],"=",["T_WHITESPACE"," ",180],["T_STRING","parent",180],["T_DOUBLE_COLON","::",180],["T_STRING","getMainTable",180],"(",")",";",["T_WHITESPACE","\n        ",180],"}",["T_WHITESPACE","\n\n        ",181],["T_RETURN","return",183],["T_WHITESPACE"," ",183],["T_VARIABLE","$table",183],";",["T_WHITESPACE","\n    ",183],"}",["T_WHITESPACE","\n\n    ",184],["T_DOC_COMMENT","\/**\n     * Add inactive categories ids\n     *\n     * @param array $ids\n     * @return $this\n     *\/",186],["T_WHITESPACE","\n    ",191],["T_PUBLIC","public",192],["T_WHITESPACE"," ",192],["T_FUNCTION","function",192],["T_WHITESPACE"," ",192],["T_STRING","addInactiveCategoryIds",192],"(",["T_VARIABLE","$ids",192],")",["T_WHITESPACE","\n    ",192],"{",["T_WHITESPACE","\n        ",193],["T_IF","if",194],["T_WHITESPACE"," ",194],"(","!",["T_STRING","is_array",194],"(",["T_VARIABLE","$this",194],["T_OBJECT_OPERATOR","->",194],["T_STRING","_inactiveCategoryIds",194],")",")",["T_WHITESPACE"," ",194],"{",["T_WHITESPACE","\n            ",194],["T_VARIABLE","$this",195],["T_OBJECT_OPERATOR","->",195],["T_STRING","_initInactiveCategoryIds",195],"(",")",";",["T_WHITESPACE","\n        ",195],"}",["T_WHITESPACE","\n        ",196],["T_VARIABLE","$this",197],["T_OBJECT_OPERATOR","->",197],["T_STRING","_inactiveCategoryIds",197],["T_WHITESPACE"," ",197],"=",["T_WHITESPACE"," ",197],["T_STRING","array_merge",197],"(",["T_VARIABLE","$ids",197],",",["T_WHITESPACE"," ",197],["T_VARIABLE","$this",197],["T_OBJECT_OPERATOR","->",197],["T_STRING","_inactiveCategoryIds",197],")",";",["T_WHITESPACE","\n        ",197],["T_RETURN","return",198],["T_WHITESPACE"," ",198],["T_VARIABLE","$this",198],";",["T_WHITESPACE","\n    ",198],"}",["T_WHITESPACE","\n\n    ",199],["T_DOC_COMMENT","\/**\n     * Retrieve inactive categories ids\n     *\n     * @return $this\n     *\/",201],["T_WHITESPACE","\n    ",205],["T_PROTECTED","protected",206],["T_WHITESPACE"," ",206],["T_FUNCTION","function",206],["T_WHITESPACE"," ",206],["T_STRING","_initInactiveCategoryIds",206],"(",")",["T_WHITESPACE","\n    ",206],"{",["T_WHITESPACE","\n        ",207],["T_VARIABLE","$this",208],["T_OBJECT_OPERATOR","->",208],["T_STRING","_inactiveCategoryIds",208],["T_WHITESPACE"," ",208],"=",["T_WHITESPACE"," ",208],"[","]",";",["T_WHITESPACE","\n        ",208],["T_VARIABLE","$this",209],["T_OBJECT_OPERATOR","->",209],["T_STRING","_eventManager",209],["T_OBJECT_OPERATOR","->",209],["T_STRING","dispatch",209],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog_category_tree_init_inactive_category_ids'",209],",",["T_WHITESPACE"," ",209],"[",["T_CONSTANT_ENCAPSED_STRING","'tree'",209],["T_WHITESPACE"," ",209],["T_DOUBLE_ARROW","=>",209],["T_WHITESPACE"," ",209],["T_VARIABLE","$this",209],"]",")",";",["T_WHITESPACE","\n        ",209],["T_RETURN","return",210],["T_WHITESPACE"," ",210],["T_VARIABLE","$this",210],";",["T_WHITESPACE","\n    ",210],"}",["T_WHITESPACE","\n\n    ",211],["T_DOC_COMMENT","\/**\n     * Retrieve inactive categories ids\n     *\n     * @return array\n     *\/",213],["T_WHITESPACE","\n    ",217],["T_PUBLIC","public",218],["T_WHITESPACE"," ",218],["T_FUNCTION","function",218],["T_WHITESPACE"," ",218],["T_STRING","getInactiveCategoryIds",218],"(",")",["T_WHITESPACE","\n    ",218],"{",["T_WHITESPACE","\n        ",219],["T_IF","if",220],["T_WHITESPACE"," ",220],"(","!",["T_STRING","is_array",220],"(",["T_VARIABLE","$this",220],["T_OBJECT_OPERATOR","->",220],["T_STRING","_inactiveCategoryIds",220],")",")",["T_WHITESPACE"," ",220],"{",["T_WHITESPACE","\n            ",220],["T_VARIABLE","$this",221],["T_OBJECT_OPERATOR","->",221],["T_STRING","_initInactiveCategoryIds",221],"(",")",";",["T_WHITESPACE","\n        ",221],"}",["T_WHITESPACE","\n\n        ",222],["T_RETURN","return",224],["T_WHITESPACE"," ",224],["T_VARIABLE","$this",224],["T_OBJECT_OPERATOR","->",224],["T_STRING","_inactiveCategoryIds",224],";",["T_WHITESPACE","\n    ",224],"}",["T_WHITESPACE","\n\n    ",225],["T_DOC_COMMENT","\/**\n     * Load nodes by parent id\n     *\n     * @param \\Magento\\Catalog\\Model\\Category|int $parentNode\n     * @param integer $recursionLevel\n     * @param integer $storeId\n     * @param bool $skipMenuFilter\n     * @return array\n     *\/",227],["T_WHITESPACE","\n    ",235],["T_PROTECTED","protected",236],["T_WHITESPACE"," ",236],["T_FUNCTION","function",236],["T_WHITESPACE"," ",236],["T_STRING","_loadNodes",236],"(",["T_VARIABLE","$parentNode",236],["T_WHITESPACE"," ",236],"=",["T_WHITESPACE"," ",236],["T_STRING","null",236],",",["T_WHITESPACE"," ",236],["T_VARIABLE","$recursionLevel",236],["T_WHITESPACE"," ",236],"=",["T_WHITESPACE"," ",236],["T_LNUMBER","0",236],",",["T_WHITESPACE"," ",236],["T_VARIABLE","$storeId",236],["T_WHITESPACE"," ",236],"=",["T_WHITESPACE"," ",236],["T_LNUMBER","0",236],",",["T_WHITESPACE"," ",236],["T_VARIABLE","$skipMenuFilter",236],["T_WHITESPACE"," ",236],"=",["T_WHITESPACE"," ",236],["T_STRING","false",236],")",["T_WHITESPACE","\n    ",236],"{",["T_WHITESPACE","\n        ",237],["T_VARIABLE","$_conn",238],["T_WHITESPACE"," ",238],"=",["T_WHITESPACE"," ",238],["T_VARIABLE","$this",238],["T_OBJECT_OPERATOR","->",238],["T_STRING","getConnection",238],"(",")",";",["T_WHITESPACE","\n        ",238],["T_VARIABLE","$startLevel",239],["T_WHITESPACE"," ",239],"=",["T_WHITESPACE"," ",239],["T_LNUMBER","1",239],";",["T_WHITESPACE","\n        ",239],["T_VARIABLE","$parentPath",240],["T_WHITESPACE"," ",240],"=",["T_WHITESPACE"," ",240],["T_CONSTANT_ENCAPSED_STRING","''",240],";",["T_WHITESPACE","\n        ",240],["T_IF","if",241],["T_WHITESPACE"," ",241],"(",["T_VARIABLE","$parentNode",241],["T_WHITESPACE"," ",241],["T_INSTANCEOF","instanceof",241],["T_WHITESPACE"," ",241],["T_NS_SEPARATOR","\\",241],["T_STRING","Magento",241],["T_NS_SEPARATOR","\\",241],["T_STRING","Catalog",241],["T_NS_SEPARATOR","\\",241],["T_STRING","Model",241],["T_NS_SEPARATOR","\\",241],["T_STRING","Category",241],")",["T_WHITESPACE"," ",241],"{",["T_WHITESPACE","\n            ",241],["T_VARIABLE","$parentPath",242],["T_WHITESPACE"," ",242],"=",["T_WHITESPACE"," ",242],["T_VARIABLE","$parentNode",242],["T_OBJECT_OPERATOR","->",242],["T_STRING","getPath",242],"(",")",";",["T_WHITESPACE","\n            ",242],["T_VARIABLE","$startLevel",243],["T_WHITESPACE"," ",243],"=",["T_WHITESPACE"," ",243],["T_VARIABLE","$parentNode",243],["T_OBJECT_OPERATOR","->",243],["T_STRING","getLevel",243],"(",")",";",["T_WHITESPACE","\n        ",243],"}",["T_WHITESPACE"," ",244],["T_ELSEIF","elseif",244],["T_WHITESPACE"," ",244],"(",["T_STRING","is_numeric",244],"(",["T_VARIABLE","$parentNode",244],")",")",["T_WHITESPACE"," ",244],"{",["T_WHITESPACE","\n            ",244],["T_VARIABLE","$selectParent",245],["T_WHITESPACE"," ",245],"=",["T_WHITESPACE"," ",245],["T_VARIABLE","$_conn",245],["T_OBJECT_OPERATOR","->",245],["T_STRING","select",245],"(",")",["T_OBJECT_OPERATOR","->",245],["T_STRING","from",245],"(",["T_WHITESPACE","\n                ",245],["T_VARIABLE","$this",246],["T_OBJECT_OPERATOR","->",246],["T_STRING","getMainStoreTable",246],"(",["T_VARIABLE","$storeId",246],")",["T_WHITESPACE","\n            ",246],")",["T_OBJECT_OPERATOR","->",247],["T_STRING","where",247],"(",["T_WHITESPACE","\n                ",247],["T_CONSTANT_ENCAPSED_STRING","'entity_id = ?'",248],",",["T_WHITESPACE","\n                ",248],["T_VARIABLE","$parentNode",249],["T_WHITESPACE","\n            ",249],")",["T_OBJECT_OPERATOR","->",250],["T_STRING","where",250],"(",["T_WHITESPACE","\n                ",250],["T_CONSTANT_ENCAPSED_STRING","'store_id = ?'",251],",",["T_WHITESPACE","\n                ",251],["T_VARIABLE","$storeId",252],["T_WHITESPACE","\n            ",252],")",";",["T_WHITESPACE","\n            ",253],["T_VARIABLE","$parentNode",254],["T_WHITESPACE"," ",254],"=",["T_WHITESPACE"," ",254],["T_VARIABLE","$_conn",254],["T_OBJECT_OPERATOR","->",254],["T_STRING","fetchRow",254],"(",["T_VARIABLE","$selectParent",254],")",";",["T_WHITESPACE","\n            ",254],["T_IF","if",255],["T_WHITESPACE"," ",255],"(",["T_VARIABLE","$parentNode",255],")",["T_WHITESPACE"," ",255],"{",["T_WHITESPACE","\n                ",255],["T_VARIABLE","$parentPath",256],["T_WHITESPACE"," ",256],"=",["T_WHITESPACE"," ",256],["T_VARIABLE","$parentNode",256],"[",["T_CONSTANT_ENCAPSED_STRING","'path'",256],"]",";",["T_WHITESPACE","\n                ",256],["T_VARIABLE","$startLevel",257],["T_WHITESPACE"," ",257],"=",["T_WHITESPACE"," ",257],["T_VARIABLE","$parentNode",257],"[",["T_CONSTANT_ENCAPSED_STRING","'level'",257],"]",";",["T_WHITESPACE","\n            ",257],"}",["T_WHITESPACE","\n        ",258],"}",["T_WHITESPACE","\n        ",259],["T_VARIABLE","$select",260],["T_WHITESPACE"," ",260],"=",["T_WHITESPACE"," ",260],["T_VARIABLE","$_conn",260],["T_OBJECT_OPERATOR","->",260],["T_STRING","select",260],"(",")",["T_OBJECT_OPERATOR","->",260],["T_STRING","from",260],"(",["T_WHITESPACE","\n            ",260],"[",["T_CONSTANT_ENCAPSED_STRING","'main_table'",261],["T_WHITESPACE"," ",261],["T_DOUBLE_ARROW","=>",261],["T_WHITESPACE"," ",261],["T_VARIABLE","$this",261],["T_OBJECT_OPERATOR","->",261],["T_STRING","getMainStoreTable",261],"(",["T_VARIABLE","$storeId",261],")","]",",",["T_WHITESPACE","\n            ",261],"[",["T_WHITESPACE","\n                ",262],["T_CONSTANT_ENCAPSED_STRING","'entity_id'",263],",",["T_WHITESPACE","\n                ",263],["T_NEW","new",264],["T_WHITESPACE"," ",264],["T_NS_SEPARATOR","\\",264],["T_STRING","Zend_Db_Expr",264],"(",["T_CONSTANT_ENCAPSED_STRING","'main_table.'",264],["T_WHITESPACE"," ",264],".",["T_WHITESPACE"," ",264],["T_VARIABLE","$_conn",264],["T_OBJECT_OPERATOR","->",264],["T_STRING","quoteIdentifier",264],"(",["T_CONSTANT_ENCAPSED_STRING","'name'",264],")",")",",",["T_WHITESPACE","\n                ",264],["T_NEW","new",265],["T_WHITESPACE"," ",265],["T_NS_SEPARATOR","\\",265],["T_STRING","Zend_Db_Expr",265],"(",["T_CONSTANT_ENCAPSED_STRING","'main_table.'",265],["T_WHITESPACE"," ",265],".",["T_WHITESPACE"," ",265],["T_VARIABLE","$_conn",265],["T_OBJECT_OPERATOR","->",265],["T_STRING","quoteIdentifier",265],"(",["T_CONSTANT_ENCAPSED_STRING","'path'",265],")",")",",",["T_WHITESPACE","\n                ",265],["T_CONSTANT_ENCAPSED_STRING","'is_active'",266],",",["T_WHITESPACE","\n                ",266],["T_CONSTANT_ENCAPSED_STRING","'is_anchor'",267],["T_WHITESPACE","\n            ",267],"]",["T_WHITESPACE","\n        ",268],")",["T_OBJECT_OPERATOR","->",269],["T_STRING","joinLeft",269],"(",["T_WHITESPACE","\n            ",269],"[",["T_CONSTANT_ENCAPSED_STRING","'url_rewrite'",270],["T_WHITESPACE"," ",270],["T_DOUBLE_ARROW","=>",270],["T_WHITESPACE"," ",270],["T_VARIABLE","$this",270],["T_OBJECT_OPERATOR","->",270],["T_STRING","getTable",270],"(",["T_CONSTANT_ENCAPSED_STRING","'url_rewrite'",270],")","]",",",["T_WHITESPACE","\n            ",270],["T_CONSTANT_ENCAPSED_STRING","'url_rewrite.entity_id = main_table.entity_id AND url_rewrite.is_autogenerated = 1'",271],["T_WHITESPACE","\n            ",271],".",["T_WHITESPACE"," ",272],["T_VARIABLE","$_conn",272],["T_OBJECT_OPERATOR","->",272],["T_STRING","quoteInto",272],"(",["T_CONSTANT_ENCAPSED_STRING","' AND url_rewrite.store_id = ?'",272],",",["T_WHITESPACE"," ",272],["T_VARIABLE","$storeId",272],")",["T_WHITESPACE","\n            ",272],".",["T_WHITESPACE"," ",273],["T_VARIABLE","$_conn",273],["T_OBJECT_OPERATOR","->",273],["T_STRING","quoteInto",273],"(",["T_CONSTANT_ENCAPSED_STRING","' AND url_rewrite.entity_type = ?'",273],",",["T_WHITESPACE"," ",273],["T_STRING","CategoryUrlRewriteGenerator",273],["T_DOUBLE_COLON","::",273],["T_STRING","ENTITY_TYPE",273],")",",",["T_WHITESPACE","\n            ",273],"[",["T_CONSTANT_ENCAPSED_STRING","'request_path'",274],["T_WHITESPACE"," ",274],["T_DOUBLE_ARROW","=>",274],["T_WHITESPACE"," ",274],["T_CONSTANT_ENCAPSED_STRING","'url_rewrite.request_path'",274],"]",["T_WHITESPACE","\n        ",274],")",["T_OBJECT_OPERATOR","->",275],["T_STRING","where",275],"(",["T_CONSTANT_ENCAPSED_STRING","'main_table.is_active = 1'",275],")",";",["T_WHITESPACE","\n\n        ",275],["T_IF","if",277],["T_WHITESPACE"," ",277],"(",["T_STRING","false",277],["T_WHITESPACE"," ",277],["T_IS_EQUAL","==",277],["T_WHITESPACE"," ",277],["T_VARIABLE","$skipMenuFilter",277],")",["T_WHITESPACE"," ",277],"{",["T_WHITESPACE","\n            ",277],["T_VARIABLE","$select",278],["T_OBJECT_OPERATOR","->",278],["T_STRING","where",278],"(",["T_CONSTANT_ENCAPSED_STRING","'main_table.include_in_menu = ?'",278],",",["T_WHITESPACE"," ",278],["T_CONSTANT_ENCAPSED_STRING","'1'",278],")",";",["T_WHITESPACE","\n        ",278],"}",["T_WHITESPACE","\n\n        ",279],["T_VARIABLE","$select",281],["T_OBJECT_OPERATOR","->",281],["T_STRING","order",281],"(",["T_CONSTANT_ENCAPSED_STRING","'main_table.position'",281],")",";",["T_WHITESPACE","\n\n        ",281],["T_IF","if",283],["T_WHITESPACE"," ",283],"(",["T_VARIABLE","$parentPath",283],")",["T_WHITESPACE"," ",283],"{",["T_WHITESPACE","\n            ",283],["T_VARIABLE","$select",284],["T_OBJECT_OPERATOR","->",284],["T_STRING","where",284],"(",["T_VARIABLE","$_conn",284],["T_OBJECT_OPERATOR","->",284],["T_STRING","quoteInto",284],"(",["T_CONSTANT_ENCAPSED_STRING","\"main_table.path like ?\"",284],",",["T_WHITESPACE"," ",284],"\"",["T_CURLY_OPEN","{",284],["T_VARIABLE","$parentPath",284],"}",["T_ENCAPSED_AND_WHITESPACE","\/%",284],"\"",")",")",";",["T_WHITESPACE","\n        ",284],"}",["T_WHITESPACE","\n        ",285],["T_IF","if",286],["T_WHITESPACE"," ",286],"(",["T_VARIABLE","$recursionLevel",286],["T_WHITESPACE"," ",286],["T_IS_NOT_EQUAL","!=",286],["T_WHITESPACE"," ",286],["T_LNUMBER","0",286],")",["T_WHITESPACE"," ",286],"{",["T_WHITESPACE","\n            ",286],["T_VARIABLE","$levelField",287],["T_WHITESPACE"," ",287],"=",["T_WHITESPACE"," ",287],["T_VARIABLE","$_conn",287],["T_OBJECT_OPERATOR","->",287],["T_STRING","quoteIdentifier",287],"(",["T_CONSTANT_ENCAPSED_STRING","'level'",287],")",";",["T_WHITESPACE","\n            ",287],["T_VARIABLE","$select",288],["T_OBJECT_OPERATOR","->",288],["T_STRING","where",288],"(",["T_VARIABLE","$levelField",288],["T_WHITESPACE"," ",288],".",["T_WHITESPACE"," ",288],["T_CONSTANT_ENCAPSED_STRING","' <= ?'",288],",",["T_WHITESPACE"," ",288],["T_VARIABLE","$startLevel",288],["T_WHITESPACE"," ",288],"+",["T_WHITESPACE"," ",288],["T_VARIABLE","$recursionLevel",288],")",";",["T_WHITESPACE","\n        ",288],"}",["T_WHITESPACE","\n\n        ",289],["T_VARIABLE","$inactiveCategories",291],["T_WHITESPACE"," ",291],"=",["T_WHITESPACE"," ",291],["T_VARIABLE","$this",291],["T_OBJECT_OPERATOR","->",291],["T_STRING","getInactiveCategoryIds",291],"(",")",";",["T_WHITESPACE","\n\n        ",291],["T_IF","if",293],["T_WHITESPACE"," ",293],"(","!",["T_EMPTY","empty",293],"(",["T_VARIABLE","$inactiveCategories",293],")",")",["T_WHITESPACE"," ",293],"{",["T_WHITESPACE","\n            ",293],["T_VARIABLE","$select",294],["T_OBJECT_OPERATOR","->",294],["T_STRING","where",294],"(",["T_CONSTANT_ENCAPSED_STRING","'main_table.entity_id NOT IN (?)'",294],",",["T_WHITESPACE"," ",294],["T_VARIABLE","$inactiveCategories",294],")",";",["T_WHITESPACE","\n        ",294],"}",["T_WHITESPACE","\n\n        ",295],["T_COMMENT","\/\/ Allow extensions to modify select (e.g. add custom category attributes to select)\n",297],["T_WHITESPACE","        ",298],["T_VARIABLE","$this",298],["T_OBJECT_OPERATOR","->",298],["T_STRING","_eventManager",298],["T_OBJECT_OPERATOR","->",298],["T_STRING","dispatch",298],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog_category_flat_loadnodes_before'",298],",",["T_WHITESPACE"," ",298],"[",["T_CONSTANT_ENCAPSED_STRING","'select'",298],["T_WHITESPACE"," ",298],["T_DOUBLE_ARROW","=>",298],["T_WHITESPACE"," ",298],["T_VARIABLE","$select",298],"]",")",";",["T_WHITESPACE","\n\n        ",298],["T_VARIABLE","$arrNodes",300],["T_WHITESPACE"," ",300],"=",["T_WHITESPACE"," ",300],["T_VARIABLE","$_conn",300],["T_OBJECT_OPERATOR","->",300],["T_STRING","fetchAll",300],"(",["T_VARIABLE","$select",300],")",";",["T_WHITESPACE","\n        ",300],["T_VARIABLE","$nodes",301],["T_WHITESPACE"," ",301],"=",["T_WHITESPACE"," ",301],"[","]",";",["T_WHITESPACE","\n        ",301],["T_FOREACH","foreach",302],["T_WHITESPACE"," ",302],"(",["T_VARIABLE","$arrNodes",302],["T_WHITESPACE"," ",302],["T_AS","as",302],["T_WHITESPACE"," ",302],["T_VARIABLE","$node",302],")",["T_WHITESPACE"," ",302],"{",["T_WHITESPACE","\n            ",302],["T_VARIABLE","$node",303],"[",["T_CONSTANT_ENCAPSED_STRING","'id'",303],"]",["T_WHITESPACE"," ",303],"=",["T_WHITESPACE"," ",303],["T_VARIABLE","$node",303],"[",["T_CONSTANT_ENCAPSED_STRING","'entity_id'",303],"]",";",["T_WHITESPACE","\n            ",303],["T_VARIABLE","$nodes",304],"[",["T_VARIABLE","$node",304],"[",["T_CONSTANT_ENCAPSED_STRING","'id'",304],"]","]",["T_WHITESPACE"," ",304],"=",["T_WHITESPACE"," ",304],["T_VARIABLE","$this",304],["T_OBJECT_OPERATOR","->",304],["T_STRING","_categoryFactory",304],["T_OBJECT_OPERATOR","->",304],["T_STRING","create",304],"(",")",["T_OBJECT_OPERATOR","->",304],["T_STRING","setData",304],"(",["T_VARIABLE","$node",304],")",";",["T_WHITESPACE","\n        ",304],"}",["T_WHITESPACE","\n\n        ",305],["T_RETURN","return",307],["T_WHITESPACE"," ",307],["T_VARIABLE","$nodes",307],";",["T_WHITESPACE","\n    ",307],"}",["T_WHITESPACE","\n\n    ",308],["T_DOC_COMMENT","\/**\n     * Creating sorted array of nodes\n     *\n     * @param array $children\n     * @param string $path\n     * @param \\Magento\\Framework\\DataObject $parent\n     * @return void\n     *\/",310],["T_WHITESPACE","\n    ",317],["T_PUBLIC","public",318],["T_WHITESPACE"," ",318],["T_FUNCTION","function",318],["T_WHITESPACE"," ",318],["T_STRING","addChildNodes",318],"(",["T_VARIABLE","$children",318],",",["T_WHITESPACE"," ",318],["T_VARIABLE","$path",318],",",["T_WHITESPACE"," ",318],["T_VARIABLE","$parent",318],")",["T_WHITESPACE","\n    ",318],"{",["T_WHITESPACE","\n        ",319],["T_IF","if",320],["T_WHITESPACE"," ",320],"(",["T_ISSET","isset",320],"(",["T_VARIABLE","$children",320],"[",["T_VARIABLE","$path",320],"]",")",")",["T_WHITESPACE"," ",320],"{",["T_WHITESPACE","\n            ",320],["T_FOREACH","foreach",321],["T_WHITESPACE"," ",321],"(",["T_VARIABLE","$children",321],"[",["T_VARIABLE","$path",321],"]",["T_WHITESPACE"," ",321],["T_AS","as",321],["T_WHITESPACE"," ",321],["T_VARIABLE","$child",321],")",["T_WHITESPACE"," ",321],"{",["T_WHITESPACE","\n                ",321],["T_VARIABLE","$childrenNodes",322],["T_WHITESPACE"," ",322],"=",["T_WHITESPACE"," ",322],["T_VARIABLE","$parent",322],["T_OBJECT_OPERATOR","->",322],["T_STRING","getChildrenNodes",322],"(",")",";",["T_WHITESPACE","\n                ",322],["T_IF","if",323],["T_WHITESPACE"," ",323],"(",["T_VARIABLE","$childrenNodes",323],["T_WHITESPACE"," ",323],["T_BOOLEAN_AND","&&",323],["T_WHITESPACE"," ",323],["T_ISSET","isset",323],"(",["T_VARIABLE","$childrenNodes",323],"[",["T_VARIABLE","$child",323],["T_OBJECT_OPERATOR","->",323],["T_STRING","getId",323],"(",")","]",")",")",["T_WHITESPACE"," ",323],"{",["T_WHITESPACE","\n                    ",323],["T_VARIABLE","$childrenNodes",324],"[",["T_VARIABLE","$child",324],"[",["T_CONSTANT_ENCAPSED_STRING","'entity_id'",324],"]","]",["T_OBJECT_OPERATOR","->",324],["T_STRING","setChildrenNodes",324],"(","[",["T_VARIABLE","$child",324],["T_OBJECT_OPERATOR","->",324],["T_STRING","getId",324],"(",")",["T_WHITESPACE"," ",324],["T_DOUBLE_ARROW","=>",324],["T_WHITESPACE"," ",324],["T_VARIABLE","$child",324],"]",")",";",["T_WHITESPACE","\n                ",324],"}",["T_WHITESPACE"," ",325],["T_ELSE","else",325],["T_WHITESPACE"," ",325],"{",["T_WHITESPACE","\n                    ",325],["T_IF","if",326],["T_WHITESPACE"," ",326],"(",["T_VARIABLE","$childrenNodes",326],")",["T_WHITESPACE"," ",326],"{",["T_WHITESPACE","\n                        ",326],["T_VARIABLE","$childrenNodes",327],"[",["T_VARIABLE","$child",327],["T_OBJECT_OPERATOR","->",327],["T_STRING","getId",327],"(",")","]",["T_WHITESPACE"," ",327],"=",["T_WHITESPACE"," ",327],["T_VARIABLE","$child",327],";",["T_WHITESPACE","\n                    ",327],"}",["T_WHITESPACE"," ",328],["T_ELSE","else",328],["T_WHITESPACE"," ",328],"{",["T_WHITESPACE","\n                        ",328],["T_VARIABLE","$childrenNodes",329],["T_WHITESPACE"," ",329],"=",["T_WHITESPACE"," ",329],"[",["T_VARIABLE","$child",329],["T_OBJECT_OPERATOR","->",329],["T_STRING","getId",329],"(",")",["T_WHITESPACE"," ",329],["T_DOUBLE_ARROW","=>",329],["T_WHITESPACE"," ",329],["T_VARIABLE","$child",329],"]",";",["T_WHITESPACE","\n                    ",329],"}",["T_WHITESPACE","\n                    ",330],["T_VARIABLE","$parent",331],["T_OBJECT_OPERATOR","->",331],["T_STRING","setChildrenNodes",331],"(",["T_VARIABLE","$childrenNodes",331],")",";",["T_WHITESPACE","\n                ",331],"}",["T_WHITESPACE","\n\n                ",332],["T_IF","if",334],["T_WHITESPACE"," ",334],"(",["T_VARIABLE","$path",334],")",["T_WHITESPACE"," ",334],"{",["T_WHITESPACE","\n                    ",334],["T_VARIABLE","$childrenPath",335],["T_WHITESPACE"," ",335],"=",["T_WHITESPACE"," ",335],["T_STRING","explode",335],"(",["T_CONSTANT_ENCAPSED_STRING","'\/'",335],",",["T_WHITESPACE"," ",335],["T_VARIABLE","$path",335],")",";",["T_WHITESPACE","\n                ",335],"}",["T_WHITESPACE"," ",336],["T_ELSE","else",336],["T_WHITESPACE"," ",336],"{",["T_WHITESPACE","\n                    ",336],["T_VARIABLE","$childrenPath",337],["T_WHITESPACE"," ",337],"=",["T_WHITESPACE"," ",337],"[","]",";",["T_WHITESPACE","\n                ",337],"}",["T_WHITESPACE","\n                ",338],["T_VARIABLE","$childrenPath",339],"[","]",["T_WHITESPACE"," ",339],"=",["T_WHITESPACE"," ",339],["T_VARIABLE","$child",339],["T_OBJECT_OPERATOR","->",339],["T_STRING","getId",339],"(",")",";",["T_WHITESPACE","\n                ",339],["T_VARIABLE","$childrenPath",340],["T_WHITESPACE"," ",340],"=",["T_WHITESPACE"," ",340],["T_STRING","implode",340],"(",["T_CONSTANT_ENCAPSED_STRING","'\/'",340],",",["T_WHITESPACE"," ",340],["T_VARIABLE","$childrenPath",340],")",";",["T_WHITESPACE","\n                ",340],["T_VARIABLE","$this",341],["T_OBJECT_OPERATOR","->",341],["T_STRING","addChildNodes",341],"(",["T_VARIABLE","$children",341],",",["T_WHITESPACE"," ",341],["T_VARIABLE","$childrenPath",341],",",["T_WHITESPACE"," ",341],["T_VARIABLE","$child",341],")",";",["T_WHITESPACE","\n            ",341],"}",["T_WHITESPACE","\n        ",342],"}",["T_WHITESPACE","\n    ",343],"}",["T_WHITESPACE","\n\n    ",344],["T_DOC_COMMENT","\/**\n     * Return sorted array of nodes\n     *\n     * @param integer|null $parentId\n     * @param integer $recursionLevel\n     * @param integer $storeId\n     * @return array\n     *\/",346],["T_WHITESPACE","\n    ",353],["T_PUBLIC","public",354],["T_WHITESPACE"," ",354],["T_FUNCTION","function",354],["T_WHITESPACE"," ",354],["T_STRING","getNodes",354],"(",["T_VARIABLE","$parentId",354],",",["T_WHITESPACE"," ",354],["T_VARIABLE","$recursionLevel",354],["T_WHITESPACE"," ",354],"=",["T_WHITESPACE"," ",354],["T_LNUMBER","0",354],",",["T_WHITESPACE"," ",354],["T_VARIABLE","$storeId",354],["T_WHITESPACE"," ",354],"=",["T_WHITESPACE"," ",354],["T_LNUMBER","0",354],")",["T_WHITESPACE","\n    ",354],"{",["T_WHITESPACE","\n        ",355],["T_IF","if",356],["T_WHITESPACE"," ",356],"(","!",["T_VARIABLE","$this",356],["T_OBJECT_OPERATOR","->",356],["T_STRING","_loaded",356],")",["T_WHITESPACE"," ",356],"{",["T_WHITESPACE","\n            ",356],["T_VARIABLE","$selectParent",357],["T_WHITESPACE"," ",357],"=",["T_WHITESPACE"," ",357],["T_VARIABLE","$this",357],["T_OBJECT_OPERATOR","->",357],["T_STRING","getConnection",357],"(",")",["T_OBJECT_OPERATOR","->",357],["T_STRING","select",357],"(",")",["T_OBJECT_OPERATOR","->",357],["T_STRING","from",357],"(",["T_WHITESPACE","\n                ",357],["T_VARIABLE","$this",358],["T_OBJECT_OPERATOR","->",358],["T_STRING","getMainStoreTable",358],"(",["T_VARIABLE","$storeId",358],")",["T_WHITESPACE","\n            ",358],")",["T_OBJECT_OPERATOR","->",359],["T_STRING","where",359],"(",["T_WHITESPACE","\n                ",359],["T_CONSTANT_ENCAPSED_STRING","'entity_id = ?'",360],",",["T_WHITESPACE","\n                ",360],["T_VARIABLE","$parentId",361],["T_WHITESPACE","\n            ",361],")",";",["T_WHITESPACE","\n            ",362],["T_IF","if",363],["T_WHITESPACE"," ",363],"(",["T_VARIABLE","$parentNode",363],["T_WHITESPACE"," ",363],"=",["T_WHITESPACE"," ",363],["T_VARIABLE","$this",363],["T_OBJECT_OPERATOR","->",363],["T_STRING","getConnection",363],"(",")",["T_OBJECT_OPERATOR","->",363],["T_STRING","fetchRow",363],"(",["T_VARIABLE","$selectParent",363],")",")",["T_WHITESPACE"," ",363],"{",["T_WHITESPACE","\n                ",363],["T_VARIABLE","$parentNode",364],"[",["T_CONSTANT_ENCAPSED_STRING","'id'",364],"]",["T_WHITESPACE"," ",364],"=",["T_WHITESPACE"," ",364],["T_VARIABLE","$parentNode",364],"[",["T_CONSTANT_ENCAPSED_STRING","'entity_id'",364],"]",";",["T_WHITESPACE","\n                ",364],["T_VARIABLE","$parentNode",365],["T_WHITESPACE"," ",365],"=",["T_WHITESPACE"," ",365],["T_VARIABLE","$this",365],["T_OBJECT_OPERATOR","->",365],["T_STRING","_categoryFactory",365],["T_OBJECT_OPERATOR","->",365],["T_STRING","create",365],"(",")",["T_OBJECT_OPERATOR","->",365],["T_STRING","setData",365],"(",["T_VARIABLE","$parentNode",365],")",";",["T_WHITESPACE","\n                ",365],["T_VARIABLE","$this",366],["T_OBJECT_OPERATOR","->",366],["T_STRING","_nodes",366],"[",["T_VARIABLE","$parentNode",366],["T_OBJECT_OPERATOR","->",366],["T_STRING","getId",366],"(",")","]",["T_WHITESPACE"," ",366],"=",["T_WHITESPACE"," ",366],["T_VARIABLE","$parentNode",366],";",["T_WHITESPACE","\n                ",366],["T_VARIABLE","$nodes",367],["T_WHITESPACE"," ",367],"=",["T_WHITESPACE"," ",367],["T_VARIABLE","$this",367],["T_OBJECT_OPERATOR","->",367],["T_STRING","_loadNodes",367],"(",["T_VARIABLE","$parentNode",367],",",["T_WHITESPACE"," ",367],["T_VARIABLE","$recursionLevel",367],",",["T_WHITESPACE"," ",367],["T_VARIABLE","$storeId",367],")",";",["T_WHITESPACE","\n                ",367],["T_VARIABLE","$childrenItems",368],["T_WHITESPACE"," ",368],"=",["T_WHITESPACE"," ",368],"[","]",";",["T_WHITESPACE","\n                ",368],["T_FOREACH","foreach",369],["T_WHITESPACE"," ",369],"(",["T_VARIABLE","$nodes",369],["T_WHITESPACE"," ",369],["T_AS","as",369],["T_WHITESPACE"," ",369],["T_VARIABLE","$node",369],")",["T_WHITESPACE"," ",369],"{",["T_WHITESPACE","\n                    ",369],["T_VARIABLE","$pathToParent",370],["T_WHITESPACE"," ",370],"=",["T_WHITESPACE"," ",370],["T_STRING","explode",370],"(",["T_CONSTANT_ENCAPSED_STRING","'\/'",370],",",["T_WHITESPACE"," ",370],["T_VARIABLE","$node",370],["T_OBJECT_OPERATOR","->",370],["T_STRING","getPath",370],"(",")",")",";",["T_WHITESPACE","\n                    ",370],["T_STRING","array_pop",371],"(",["T_VARIABLE","$pathToParent",371],")",";",["T_WHITESPACE","\n                    ",371],["T_VARIABLE","$pathToParent",372],["T_WHITESPACE"," ",372],"=",["T_WHITESPACE"," ",372],["T_STRING","implode",372],"(",["T_CONSTANT_ENCAPSED_STRING","'\/'",372],",",["T_WHITESPACE"," ",372],["T_VARIABLE","$pathToParent",372],")",";",["T_WHITESPACE","\n                    ",372],["T_VARIABLE","$childrenItems",373],"[",["T_VARIABLE","$pathToParent",373],"]","[","]",["T_WHITESPACE"," ",373],"=",["T_WHITESPACE"," ",373],["T_VARIABLE","$node",373],";",["T_WHITESPACE","\n                ",373],"}",["T_WHITESPACE","\n                ",374],["T_VARIABLE","$this",375],["T_OBJECT_OPERATOR","->",375],["T_STRING","addChildNodes",375],"(",["T_VARIABLE","$childrenItems",375],",",["T_WHITESPACE"," ",375],["T_VARIABLE","$parentNode",375],["T_OBJECT_OPERATOR","->",375],["T_STRING","getPath",375],"(",")",",",["T_WHITESPACE"," ",375],["T_VARIABLE","$parentNode",375],")",";",["T_WHITESPACE","\n                ",375],["T_VARIABLE","$childrenNodes",376],["T_WHITESPACE"," ",376],"=",["T_WHITESPACE"," ",376],["T_VARIABLE","$this",376],["T_OBJECT_OPERATOR","->",376],["T_STRING","_nodes",376],"[",["T_VARIABLE","$parentNode",376],["T_OBJECT_OPERATOR","->",376],["T_STRING","getId",376],"(",")","]",";",["T_WHITESPACE","\n                ",376],["T_IF","if",377],["T_WHITESPACE"," ",377],"(",["T_VARIABLE","$childrenNodes",377],["T_OBJECT_OPERATOR","->",377],["T_STRING","getChildrenNodes",377],"(",")",")",["T_WHITESPACE"," ",377],"{",["T_WHITESPACE","\n                    ",377],["T_VARIABLE","$this",378],["T_OBJECT_OPERATOR","->",378],["T_STRING","_nodes",378],["T_WHITESPACE"," ",378],"=",["T_WHITESPACE"," ",378],["T_VARIABLE","$childrenNodes",378],["T_OBJECT_OPERATOR","->",378],["T_STRING","getChildrenNodes",378],"(",")",";",["T_WHITESPACE","\n                ",378],"}",["T_WHITESPACE"," ",379],["T_ELSE","else",379],["T_WHITESPACE"," ",379],"{",["T_WHITESPACE","\n                    ",379],["T_VARIABLE","$this",380],["T_OBJECT_OPERATOR","->",380],["T_STRING","_nodes",380],["T_WHITESPACE"," ",380],"=",["T_WHITESPACE"," ",380],"[","]",";",["T_WHITESPACE","\n                ",380],"}",["T_WHITESPACE","\n                ",381],["T_VARIABLE","$this",382],["T_OBJECT_OPERATOR","->",382],["T_STRING","_loaded",382],["T_WHITESPACE"," ",382],"=",["T_WHITESPACE"," ",382],["T_STRING","true",382],";",["T_WHITESPACE","\n            ",382],"}",["T_WHITESPACE","\n        ",383],"}",["T_WHITESPACE","\n        ",384],["T_RETURN","return",385],["T_WHITESPACE"," ",385],["T_VARIABLE","$this",385],["T_OBJECT_OPERATOR","->",385],["T_STRING","_nodes",385],";",["T_WHITESPACE","\n    ",385],"}",["T_WHITESPACE","\n\n    ",386],["T_DOC_COMMENT","\/**\n     * Return array or collection of categories\n     *\n     * @param integer $parent\n     * @param integer $recursionLevel\n     * @param boolean|string $sorted\n     * @param boolean $asCollection\n     * @param boolean $toLoad\n     * @return array|\\Magento\\Framework\\Data\\Collection\n     *\/",388],["T_WHITESPACE","\n    ",397],["T_PUBLIC","public",398],["T_WHITESPACE"," ",398],["T_FUNCTION","function",398],["T_WHITESPACE"," ",398],["T_STRING","getCategories",398],"(",["T_VARIABLE","$parent",398],",",["T_WHITESPACE"," ",398],["T_VARIABLE","$recursionLevel",398],["T_WHITESPACE"," ",398],"=",["T_WHITESPACE"," ",398],["T_LNUMBER","0",398],",",["T_WHITESPACE"," ",398],["T_VARIABLE","$sorted",398],["T_WHITESPACE"," ",398],"=",["T_WHITESPACE"," ",398],["T_STRING","false",398],",",["T_WHITESPACE"," ",398],["T_VARIABLE","$asCollection",398],["T_WHITESPACE"," ",398],"=",["T_WHITESPACE"," ",398],["T_STRING","false",398],",",["T_WHITESPACE"," ",398],["T_VARIABLE","$toLoad",398],["T_WHITESPACE"," ",398],"=",["T_WHITESPACE"," ",398],["T_STRING","true",398],")",["T_WHITESPACE","\n    ",398],"{",["T_WHITESPACE","\n        ",399],["T_IF","if",400],["T_WHITESPACE"," ",400],"(",["T_VARIABLE","$asCollection",400],")",["T_WHITESPACE"," ",400],"{",["T_WHITESPACE","\n            ",400],["T_VARIABLE","$select",401],["T_WHITESPACE"," ",401],"=",["T_WHITESPACE"," ",401],["T_VARIABLE","$this",401],["T_OBJECT_OPERATOR","->",401],["T_STRING","getConnection",401],"(",")",["T_OBJECT_OPERATOR","->",401],["T_STRING","select",401],"(",")",["T_OBJECT_OPERATOR","->",401],["T_STRING","from",401],"(",["T_WHITESPACE","\n                ",401],"[",["T_CONSTANT_ENCAPSED_STRING","'mt'",402],["T_WHITESPACE"," ",402],["T_DOUBLE_ARROW","=>",402],["T_WHITESPACE"," ",402],["T_VARIABLE","$this",402],["T_OBJECT_OPERATOR","->",402],["T_STRING","getMainStoreTable",402],"(",["T_VARIABLE","$this",402],["T_OBJECT_OPERATOR","->",402],["T_STRING","getStoreId",402],"(",")",")","]",",",["T_WHITESPACE","\n                ",402],"[",["T_CONSTANT_ENCAPSED_STRING","'path'",403],"]",["T_WHITESPACE","\n            ",403],")",["T_OBJECT_OPERATOR","->",404],["T_STRING","where",404],"(",["T_WHITESPACE","\n                ",404],["T_CONSTANT_ENCAPSED_STRING","'mt.entity_id = ?'",405],",",["T_WHITESPACE","\n                ",405],["T_VARIABLE","$parent",406],["T_WHITESPACE","\n            ",406],")",";",["T_WHITESPACE","\n            ",407],["T_VARIABLE","$parentPath",408],["T_WHITESPACE"," ",408],"=",["T_WHITESPACE"," ",408],["T_VARIABLE","$this",408],["T_OBJECT_OPERATOR","->",408],["T_STRING","getConnection",408],"(",")",["T_OBJECT_OPERATOR","->",408],["T_STRING","fetchOne",408],"(",["T_VARIABLE","$select",408],")",";",["T_WHITESPACE","\n\n            ",408],["T_VARIABLE","$collection",410],["T_WHITESPACE"," ",410],"=",["T_WHITESPACE"," ",410],["T_VARIABLE","$this",410],["T_OBJECT_OPERATOR","->",410],["T_STRING","getCategoryFlatCollectionFactory",410],"(",")",["T_WHITESPACE","\n                ",410],["T_OBJECT_OPERATOR","->",411],["T_STRING","create",411],"(",")",["T_WHITESPACE","\n                ",411],["T_OBJECT_OPERATOR","->",412],["T_STRING","addNameToResult",412],"(",")",["T_WHITESPACE","\n                ",412],["T_OBJECT_OPERATOR","->",413],["T_STRING","addUrlRewriteToResult",413],"(",")",["T_WHITESPACE","\n                ",413],["T_OBJECT_OPERATOR","->",414],["T_STRING","addParentPathFilter",414],"(",["T_VARIABLE","$parentPath",414],")",["T_WHITESPACE","\n                ",414],["T_OBJECT_OPERATOR","->",415],["T_STRING","addStoreFilter",415],"(",")",["T_WHITESPACE","\n                ",415],["T_OBJECT_OPERATOR","->",416],["T_STRING","addIsActiveFilter",416],"(",")",["T_WHITESPACE","\n                ",416],["T_OBJECT_OPERATOR","->",417],["T_STRING","addAttributeToFilter",417],"(",["T_CONSTANT_ENCAPSED_STRING","'include_in_menu'",417],",",["T_WHITESPACE"," ",417],["T_LNUMBER","1",417],")",["T_WHITESPACE","\n                ",417],["T_OBJECT_OPERATOR","->",418],["T_STRING","addSortedField",418],"(",["T_VARIABLE","$sorted",418],")",";",["T_WHITESPACE","\n            ",418],["T_IF","if",419],["T_WHITESPACE"," ",419],"(",["T_VARIABLE","$toLoad",419],")",["T_WHITESPACE"," ",419],"{",["T_WHITESPACE","\n                ",419],["T_RETURN","return",420],["T_WHITESPACE"," ",420],["T_VARIABLE","$collection",420],["T_OBJECT_OPERATOR","->",420],["T_STRING","load",420],"(",")",";",["T_WHITESPACE","\n            ",420],"}",["T_WHITESPACE","\n            ",421],["T_RETURN","return",422],["T_WHITESPACE"," ",422],["T_VARIABLE","$collection",422],";",["T_WHITESPACE","\n        ",422],"}",["T_WHITESPACE","\n        ",423],["T_RETURN","return",424],["T_WHITESPACE"," ",424],["T_VARIABLE","$this",424],["T_OBJECT_OPERATOR","->",424],["T_STRING","getNodes",424],"(",["T_VARIABLE","$parent",424],",",["T_WHITESPACE"," ",424],["T_VARIABLE","$recursionLevel",424],",",["T_WHITESPACE"," ",424],["T_VARIABLE","$this",424],["T_OBJECT_OPERATOR","->",424],["T_STRING","_storeManager",424],["T_OBJECT_OPERATOR","->",424],["T_STRING","getStore",424],"(",")",["T_OBJECT_OPERATOR","->",424],["T_STRING","getId",424],"(",")",")",";",["T_WHITESPACE","\n    ",424],"}",["T_WHITESPACE","\n\n    ",425],["T_DOC_COMMENT","\/**\n     * Return node with id $nodeId\n     *\n     * @param integer $nodeId\n     * @param array $nodes\n     * @return \\Magento\\Framework\\DataObject\n     *\/",427],["T_WHITESPACE","\n    ",433],["T_PUBLIC","public",434],["T_WHITESPACE"," ",434],["T_FUNCTION","function",434],["T_WHITESPACE"," ",434],["T_STRING","getNodeById",434],"(",["T_VARIABLE","$nodeId",434],",",["T_WHITESPACE"," ",434],["T_VARIABLE","$nodes",434],["T_WHITESPACE"," ",434],"=",["T_WHITESPACE"," ",434],["T_STRING","null",434],")",["T_WHITESPACE","\n    ",434],"{",["T_WHITESPACE","\n        ",435],["T_IF","if",436],["T_WHITESPACE"," ",436],"(",["T_VARIABLE","$nodes",436],["T_WHITESPACE"," ",436],["T_IS_IDENTICAL","===",436],["T_WHITESPACE"," ",436],["T_STRING","null",436],")",["T_WHITESPACE"," ",436],"{",["T_WHITESPACE","\n            ",436],["T_VARIABLE","$nodes",437],["T_WHITESPACE"," ",437],"=",["T_WHITESPACE"," ",437],["T_VARIABLE","$this",437],["T_OBJECT_OPERATOR","->",437],["T_STRING","getNodes",437],"(",["T_VARIABLE","$nodeId",437],")",";",["T_WHITESPACE","\n        ",437],"}",["T_WHITESPACE","\n        ",438],["T_IF","if",439],["T_WHITESPACE"," ",439],"(",["T_ISSET","isset",439],"(",["T_VARIABLE","$nodes",439],"[",["T_VARIABLE","$nodeId",439],"]",")",")",["T_WHITESPACE"," ",439],"{",["T_WHITESPACE","\n            ",439],["T_RETURN","return",440],["T_WHITESPACE"," ",440],["T_VARIABLE","$nodes",440],"[",["T_VARIABLE","$nodeId",440],"]",";",["T_WHITESPACE","\n        ",440],"}",["T_WHITESPACE","\n        ",441],["T_FOREACH","foreach",442],["T_WHITESPACE"," ",442],"(",["T_VARIABLE","$nodes",442],["T_WHITESPACE"," ",442],["T_AS","as",442],["T_WHITESPACE"," ",442],["T_VARIABLE","$node",442],")",["T_WHITESPACE"," ",442],"{",["T_WHITESPACE","\n            ",442],["T_IF","if",443],["T_WHITESPACE"," ",443],"(",["T_VARIABLE","$node",443],["T_OBJECT_OPERATOR","->",443],["T_STRING","getChildrenNodes",443],"(",")",")",["T_WHITESPACE"," ",443],"{",["T_WHITESPACE","\n                ",443],["T_RETURN","return",444],["T_WHITESPACE"," ",444],["T_VARIABLE","$this",444],["T_OBJECT_OPERATOR","->",444],["T_STRING","getNodeById",444],"(",["T_VARIABLE","$nodeId",444],",",["T_WHITESPACE"," ",444],["T_VARIABLE","$node",444],["T_OBJECT_OPERATOR","->",444],["T_STRING","getChildrenNodes",444],"(",")",")",";",["T_WHITESPACE","\n            ",444],"}",["T_WHITESPACE","\n        ",445],"}",["T_WHITESPACE","\n        ",446],["T_RETURN","return",447],["T_WHITESPACE"," ",447],"[","]",";",["T_WHITESPACE","\n    ",447],"}",["T_WHITESPACE","\n\n    ",448],["T_DOC_COMMENT","\/**\n     * Retrieve attribute instance\n     *\n     * Special for non static flat table.\n     *\n     * @param mixed $attribute\n     * @return \\Magento\\Eav\\Model\\Entity\\Attribute\\AbstractAttribute\n     *\/",450],["T_WHITESPACE","\n    ",457],["T_PUBLIC","public",458],["T_WHITESPACE"," ",458],["T_FUNCTION","function",458],["T_WHITESPACE"," ",458],["T_STRING","getAttribute",458],"(",["T_VARIABLE","$attribute",458],")",["T_WHITESPACE","\n    ",458],"{",["T_WHITESPACE","\n        ",459],["T_RETURN","return",460],["T_WHITESPACE"," ",460],["T_VARIABLE","$this",460],["T_OBJECT_OPERATOR","->",460],["T_STRING","_catalogConfig",460],["T_OBJECT_OPERATOR","->",460],["T_STRING","getAttribute",460],"(",["T_NS_SEPARATOR","\\",460],["T_STRING","Magento",460],["T_NS_SEPARATOR","\\",460],["T_STRING","Catalog",460],["T_NS_SEPARATOR","\\",460],["T_STRING","Model",460],["T_NS_SEPARATOR","\\",460],["T_STRING","Category",460],["T_DOUBLE_COLON","::",460],["T_STRING","ENTITY",460],",",["T_WHITESPACE"," ",460],["T_VARIABLE","$attribute",460],")",";",["T_WHITESPACE","\n    ",460],"}",["T_WHITESPACE","\n\n    ",461],["T_DOC_COMMENT","\/**\n     * Get count of active\/not active children categories\n     *\n     * @param \\Magento\\Catalog\\Model\\Category $category\n     * @param bool $isActiveFlag\n     * @return integer\n     *\/",463],["T_WHITESPACE","\n    ",469],["T_PUBLIC","public",470],["T_WHITESPACE"," ",470],["T_FUNCTION","function",470],["T_WHITESPACE"," ",470],["T_STRING","getChildrenAmount",470],"(",["T_VARIABLE","$category",470],",",["T_WHITESPACE"," ",470],["T_VARIABLE","$isActiveFlag",470],["T_WHITESPACE"," ",470],"=",["T_WHITESPACE"," ",470],["T_STRING","true",470],")",["T_WHITESPACE","\n    ",470],"{",["T_WHITESPACE","\n        ",471],["T_VARIABLE","$_table",472],["T_WHITESPACE"," ",472],"=",["T_WHITESPACE"," ",472],["T_VARIABLE","$this",472],["T_OBJECT_OPERATOR","->",472],["T_STRING","getMainStoreTable",472],"(",["T_VARIABLE","$category",472],["T_OBJECT_OPERATOR","->",472],["T_STRING","getStoreId",472],"(",")",")",";",["T_WHITESPACE","\n        ",472],["T_VARIABLE","$select",473],["T_WHITESPACE"," ",473],"=",["T_WHITESPACE"," ",473],["T_VARIABLE","$this",473],["T_OBJECT_OPERATOR","->",473],["T_STRING","getConnection",473],"(",")",["T_OBJECT_OPERATOR","->",473],["T_STRING","select",473],"(",")",["T_OBJECT_OPERATOR","->",473],["T_STRING","from",473],"(",["T_WHITESPACE","\n            ",473],["T_VARIABLE","$_table",474],",",["T_WHITESPACE","\n            ",474],"\"",["T_ENCAPSED_AND_WHITESPACE","COUNT(",475],["T_CURLY_OPEN","{",475],["T_VARIABLE","$_table",475],"}",["T_ENCAPSED_AND_WHITESPACE",".entity_id)",475],"\"",["T_WHITESPACE","\n        ",475],")",["T_OBJECT_OPERATOR","->",476],["T_STRING","where",476],"(",["T_WHITESPACE","\n            ",476],"\"",["T_CURLY_OPEN","{",477],["T_VARIABLE","$_table",477],"}",["T_ENCAPSED_AND_WHITESPACE",".path LIKE ?",477],"\"",",",["T_WHITESPACE","\n            ",477],["T_VARIABLE","$category",478],["T_OBJECT_OPERATOR","->",478],["T_STRING","getPath",478],"(",")",["T_WHITESPACE"," ",478],".",["T_WHITESPACE"," ",478],["T_CONSTANT_ENCAPSED_STRING","'\/%'",478],["T_WHITESPACE","\n        ",478],")",["T_OBJECT_OPERATOR","->",479],["T_STRING","where",479],"(",["T_WHITESPACE","\n            ",479],"\"",["T_CURLY_OPEN","{",480],["T_VARIABLE","$_table",480],"}",["T_ENCAPSED_AND_WHITESPACE",".is_active = ?",480],"\"",",",["T_WHITESPACE","\n            ",480],["T_INT_CAST","(int)",481],["T_VARIABLE","$isActiveFlag",481],["T_WHITESPACE","\n        ",481],")",";",["T_WHITESPACE","\n        ",482],["T_RETURN","return",483],["T_WHITESPACE"," ",483],["T_INT_CAST","(int)",483],["T_VARIABLE","$this",483],["T_OBJECT_OPERATOR","->",483],["T_STRING","getConnection",483],"(",")",["T_OBJECT_OPERATOR","->",483],["T_STRING","fetchOne",483],"(",["T_VARIABLE","$select",483],")",";",["T_WHITESPACE","\n    ",483],"}",["T_WHITESPACE","\n\n    ",484],["T_DOC_COMMENT","\/**\n     * Get products count in category\n     *\n     * @param \\Magento\\Catalog\\Model\\Category $category\n     * @return integer\n     *\/",486],["T_WHITESPACE","\n    ",491],["T_PUBLIC","public",492],["T_WHITESPACE"," ",492],["T_FUNCTION","function",492],["T_WHITESPACE"," ",492],["T_STRING","getProductCount",492],"(",["T_VARIABLE","$category",492],")",["T_WHITESPACE","\n    ",492],"{",["T_WHITESPACE","\n        ",493],["T_VARIABLE","$select",494],["T_WHITESPACE"," ",494],"=",["T_WHITESPACE"," ",494],["T_VARIABLE","$this",494],["T_OBJECT_OPERATOR","->",494],["T_STRING","getConnection",494],"(",")",["T_OBJECT_OPERATOR","->",494],["T_STRING","select",494],"(",")",["T_OBJECT_OPERATOR","->",494],["T_STRING","from",494],"(",["T_WHITESPACE","\n            ",494],["T_VARIABLE","$this",495],["T_OBJECT_OPERATOR","->",495],["T_STRING","getTable",495],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog_category_product'",495],")",",",["T_WHITESPACE","\n            ",495],"\"",["T_ENCAPSED_AND_WHITESPACE","COUNT(",496],["T_CURLY_OPEN","{",496],["T_VARIABLE","$this",496],["T_OBJECT_OPERATOR","->",496],["T_STRING","getTable",496],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog_category_product'",496],")","}",["T_ENCAPSED_AND_WHITESPACE",".product_id)",496],"\"",["T_WHITESPACE","\n        ",496],")",["T_OBJECT_OPERATOR","->",497],["T_STRING","where",497],"(",["T_WHITESPACE","\n            ",497],"\"",["T_CURLY_OPEN","{",498],["T_VARIABLE","$this",498],["T_OBJECT_OPERATOR","->",498],["T_STRING","getTable",498],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog_category_product'",498],")","}",["T_ENCAPSED_AND_WHITESPACE",".category_id = ?",498],"\"",",",["T_WHITESPACE","\n            ",498],["T_VARIABLE","$category",499],["T_OBJECT_OPERATOR","->",499],["T_STRING","getId",499],"(",")",["T_WHITESPACE","\n        ",499],")",["T_OBJECT_OPERATOR","->",500],["T_STRING","group",500],"(",["T_WHITESPACE","\n            ",500],"\"",["T_CURLY_OPEN","{",501],["T_VARIABLE","$this",501],["T_OBJECT_OPERATOR","->",501],["T_STRING","getTable",501],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog_category_product'",501],")","}",["T_ENCAPSED_AND_WHITESPACE",".category_id",501],"\"",["T_WHITESPACE","\n        ",501],")",";",["T_WHITESPACE","\n        ",502],["T_RETURN","return",503],["T_WHITESPACE"," ",503],["T_INT_CAST","(int)",503],["T_VARIABLE","$this",503],["T_OBJECT_OPERATOR","->",503],["T_STRING","getConnection",503],"(",")",["T_OBJECT_OPERATOR","->",503],["T_STRING","fetchOne",503],"(",["T_VARIABLE","$select",503],")",";",["T_WHITESPACE","\n    ",503],"}",["T_WHITESPACE","\n\n    ",504],["T_DOC_COMMENT","\/**\n     * Return parent categories of category\n     *\n     * @param \\Magento\\Catalog\\Model\\Category $category\n     * @param bool $isActive\n     * @return \\Magento\\Catalog\\Model\\Category[]\n     *\/",506],["T_WHITESPACE","\n    ",512],["T_PUBLIC","public",513],["T_WHITESPACE"," ",513],["T_FUNCTION","function",513],["T_WHITESPACE"," ",513],["T_STRING","getParentCategories",513],"(",["T_VARIABLE","$category",513],",",["T_WHITESPACE"," ",513],["T_VARIABLE","$isActive",513],["T_WHITESPACE"," ",513],"=",["T_WHITESPACE"," ",513],["T_STRING","true",513],")",["T_WHITESPACE","\n    ",513],"{",["T_WHITESPACE","\n        ",514],["T_VARIABLE","$categories",515],["T_WHITESPACE"," ",515],"=",["T_WHITESPACE"," ",515],"[","]",";",["T_WHITESPACE","\n        ",515],["T_VARIABLE","$connection",516],["T_WHITESPACE"," ",516],"=",["T_WHITESPACE"," ",516],["T_VARIABLE","$this",516],["T_OBJECT_OPERATOR","->",516],["T_STRING","getConnection",516],"(",")",";",["T_WHITESPACE","\n        ",516],["T_VARIABLE","$select",517],["T_WHITESPACE"," ",517],"=",["T_WHITESPACE"," ",517],["T_VARIABLE","$connection",517],["T_OBJECT_OPERATOR","->",517],["T_STRING","select",517],"(",")",["T_OBJECT_OPERATOR","->",517],["T_STRING","from",517],"(",["T_WHITESPACE","\n            ",517],"[",["T_CONSTANT_ENCAPSED_STRING","'main_table'",518],["T_WHITESPACE"," ",518],["T_DOUBLE_ARROW","=>",518],["T_WHITESPACE"," ",518],["T_VARIABLE","$this",518],["T_OBJECT_OPERATOR","->",518],["T_STRING","getMainStoreTable",518],"(",["T_VARIABLE","$category",518],["T_OBJECT_OPERATOR","->",518],["T_STRING","getStoreId",518],"(",")",")","]",",",["T_WHITESPACE","\n            ",518],"[",["T_CONSTANT_ENCAPSED_STRING","'main_table.entity_id'",519],",",["T_WHITESPACE"," ",519],["T_CONSTANT_ENCAPSED_STRING","'main_table.name'",519],"]",["T_WHITESPACE","\n        ",519],")",["T_OBJECT_OPERATOR","->",520],["T_STRING","joinLeft",520],"(",["T_WHITESPACE","\n            ",520],"[",["T_CONSTANT_ENCAPSED_STRING","'url_rewrite'",521],["T_WHITESPACE"," ",521],["T_DOUBLE_ARROW","=>",521],["T_WHITESPACE"," ",521],["T_VARIABLE","$this",521],["T_OBJECT_OPERATOR","->",521],["T_STRING","getTable",521],"(",["T_CONSTANT_ENCAPSED_STRING","'url_rewrite'",521],")","]",",",["T_WHITESPACE","\n            ",521],["T_CONSTANT_ENCAPSED_STRING","'url_rewrite.entity_id = main_table.entity_id AND url_rewrite.is_autogenerated = 1'",522],["T_WHITESPACE","\n            ",522],".",["T_WHITESPACE"," ",523],["T_VARIABLE","$connection",523],["T_OBJECT_OPERATOR","->",523],["T_STRING","quoteInto",523],"(",["T_CONSTANT_ENCAPSED_STRING","' AND url_rewrite.store_id = ?'",523],",",["T_WHITESPACE"," ",523],["T_VARIABLE","$category",523],["T_OBJECT_OPERATOR","->",523],["T_STRING","getStoreId",523],"(",")",")",["T_WHITESPACE","\n            ",523],".",["T_WHITESPACE"," ",524],["T_VARIABLE","$connection",524],["T_OBJECT_OPERATOR","->",524],["T_STRING","quoteInto",524],"(",["T_CONSTANT_ENCAPSED_STRING","' AND url_rewrite.entity_type = ?'",524],",",["T_WHITESPACE"," ",524],["T_STRING","CategoryUrlRewriteGenerator",524],["T_DOUBLE_COLON","::",524],["T_STRING","ENTITY_TYPE",524],")",",",["T_WHITESPACE","\n            ",524],"[",["T_CONSTANT_ENCAPSED_STRING","'request_path'",525],["T_WHITESPACE"," ",525],["T_DOUBLE_ARROW","=>",525],["T_WHITESPACE"," ",525],["T_CONSTANT_ENCAPSED_STRING","'url_rewrite.request_path'",525],"]",["T_WHITESPACE","\n        ",525],")",["T_OBJECT_OPERATOR","->",526],["T_STRING","where",526],"(",["T_WHITESPACE","\n            ",526],["T_CONSTANT_ENCAPSED_STRING","'main_table.entity_id IN (?)'",527],",",["T_WHITESPACE","\n            ",527],["T_STRING","array_reverse",528],"(",["T_STRING","explode",528],"(",["T_CONSTANT_ENCAPSED_STRING","','",528],",",["T_WHITESPACE"," ",528],["T_VARIABLE","$category",528],["T_OBJECT_OPERATOR","->",528],["T_STRING","getPathInStore",528],"(",")",")",")",["T_WHITESPACE","\n        ",528],")",";",["T_WHITESPACE","\n        ",529],["T_IF","if",530],["T_WHITESPACE"," ",530],"(",["T_VARIABLE","$isActive",530],")",["T_WHITESPACE"," ",530],"{",["T_WHITESPACE","\n            ",530],["T_VARIABLE","$select",531],["T_OBJECT_OPERATOR","->",531],["T_STRING","where",531],"(",["T_CONSTANT_ENCAPSED_STRING","'main_table.is_active = ?'",531],",",["T_WHITESPACE"," ",531],["T_CONSTANT_ENCAPSED_STRING","'1'",531],")",";",["T_WHITESPACE","\n        ",531],"}",["T_WHITESPACE","\n        ",532],["T_VARIABLE","$select",533],["T_OBJECT_OPERATOR","->",533],["T_STRING","order",533],"(",["T_CONSTANT_ENCAPSED_STRING","'main_table.path ASC'",533],")",";",["T_WHITESPACE","\n        ",533],["T_VARIABLE","$result",534],["T_WHITESPACE"," ",534],"=",["T_WHITESPACE"," ",534],["T_VARIABLE","$this",534],["T_OBJECT_OPERATOR","->",534],["T_STRING","getConnection",534],"(",")",["T_OBJECT_OPERATOR","->",534],["T_STRING","fetchAll",534],"(",["T_VARIABLE","$select",534],")",";",["T_WHITESPACE","\n        ",534],["T_FOREACH","foreach",535],["T_WHITESPACE"," ",535],"(",["T_VARIABLE","$result",535],["T_WHITESPACE"," ",535],["T_AS","as",535],["T_WHITESPACE"," ",535],["T_VARIABLE","$row",535],")",["T_WHITESPACE"," ",535],"{",["T_WHITESPACE","\n            ",535],["T_VARIABLE","$row",536],"[",["T_CONSTANT_ENCAPSED_STRING","'id'",536],"]",["T_WHITESPACE"," ",536],"=",["T_WHITESPACE"," ",536],["T_VARIABLE","$row",536],"[",["T_CONSTANT_ENCAPSED_STRING","'entity_id'",536],"]",";",["T_WHITESPACE","\n            ",536],["T_VARIABLE","$categories",537],"[",["T_VARIABLE","$row",537],"[",["T_CONSTANT_ENCAPSED_STRING","'entity_id'",537],"]","]",["T_WHITESPACE"," ",537],"=",["T_WHITESPACE"," ",537],["T_VARIABLE","$this",537],["T_OBJECT_OPERATOR","->",537],["T_STRING","_categoryFactory",537],["T_OBJECT_OPERATOR","->",537],["T_STRING","create",537],"(",")",["T_OBJECT_OPERATOR","->",537],["T_STRING","setData",537],"(",["T_VARIABLE","$row",537],")",";",["T_WHITESPACE","\n        ",537],"}",["T_WHITESPACE","\n        ",538],["T_RETURN","return",539],["T_WHITESPACE"," ",539],["T_VARIABLE","$categories",539],";",["T_WHITESPACE","\n    ",539],"}",["T_WHITESPACE","\n\n    ",540],["T_DOC_COMMENT","\/**\n     * Return parent category of current category with own custom design settings\n     *\n     * @param \\Magento\\Catalog\\Model\\Category $category\n     * @return \\Magento\\Catalog\\Model\\Category\n     *\/",542],["T_WHITESPACE","\n    ",547],["T_PUBLIC","public",548],["T_WHITESPACE"," ",548],["T_FUNCTION","function",548],["T_WHITESPACE"," ",548],["T_STRING","getParentDesignCategory",548],"(",["T_VARIABLE","$category",548],")",["T_WHITESPACE","\n    ",548],"{",["T_WHITESPACE","\n        ",549],["T_VARIABLE","$pathIds",550],["T_WHITESPACE"," ",550],"=",["T_WHITESPACE"," ",550],["T_STRING","array_reverse",550],"(",["T_VARIABLE","$category",550],["T_OBJECT_OPERATOR","->",550],["T_STRING","getPathIds",550],"(",")",")",";",["T_WHITESPACE","\n        ",550],["T_VARIABLE","$collection",551],["T_WHITESPACE"," ",551],"=",["T_WHITESPACE"," ",551],["T_CLONE","clone",551],["T_WHITESPACE"," ",551],["T_VARIABLE","$category",551],["T_OBJECT_OPERATOR","->",551],["T_STRING","getCollection",551],"(",")",";",["T_WHITESPACE","\n        ",551],["T_VARIABLE","$collection",552],["T_OBJECT_OPERATOR","->",552],["T_STRING","setMainTable",552],"(",["T_WHITESPACE","\n            ",552],["T_VARIABLE","$this",553],["T_OBJECT_OPERATOR","->",553],["T_STRING","getMainStoreTable",553],"(",["T_VARIABLE","$category",553],["T_OBJECT_OPERATOR","->",553],["T_STRING","getStoreId",553],"(",")",")",["T_WHITESPACE","\n        ",553],")",["T_OBJECT_OPERATOR","->",554],["T_STRING","addFieldToSelect",554],"(",["T_WHITESPACE","\n            ",554],["T_CONSTANT_ENCAPSED_STRING","'*'",555],["T_WHITESPACE","\n        ",555],")",["T_OBJECT_OPERATOR","->",556],["T_STRING","addFieldToFilter",556],"(",["T_WHITESPACE","\n            ",556],["T_CONSTANT_ENCAPSED_STRING","'entity_id'",557],",",["T_WHITESPACE","\n            ",557],"[",["T_CONSTANT_ENCAPSED_STRING","'in'",558],["T_WHITESPACE"," ",558],["T_DOUBLE_ARROW","=>",558],["T_WHITESPACE"," ",558],["T_VARIABLE","$pathIds",558],"]",["T_WHITESPACE","\n        ",558],")",["T_OBJECT_OPERATOR","->",559],["T_STRING","addFieldToFilter",559],"(",["T_WHITESPACE","\n            ",559],["T_CONSTANT_ENCAPSED_STRING","'custom_use_parent_settings'",560],",",["T_WHITESPACE","\n            ",560],"[","[",["T_CONSTANT_ENCAPSED_STRING","'eq'",561],["T_WHITESPACE"," ",561],["T_DOUBLE_ARROW","=>",561],["T_WHITESPACE"," ",561],["T_LNUMBER","0",561],"]",",",["T_WHITESPACE"," ",561],"[",["T_CONSTANT_ENCAPSED_STRING","'null'",561],["T_WHITESPACE"," ",561],["T_DOUBLE_ARROW","=>",561],["T_WHITESPACE"," ",561],["T_LNUMBER","0",561],"]","]",["T_WHITESPACE","\n        ",561],")",["T_OBJECT_OPERATOR","->",562],["T_STRING","addFieldToFilter",562],"(",["T_WHITESPACE","\n            ",562],["T_CONSTANT_ENCAPSED_STRING","'level'",563],",",["T_WHITESPACE","\n            ",563],"[",["T_CONSTANT_ENCAPSED_STRING","'neq'",564],["T_WHITESPACE"," ",564],["T_DOUBLE_ARROW","=>",564],["T_WHITESPACE"," ",564],["T_LNUMBER","0",564],"]",["T_WHITESPACE","\n        ",564],")",["T_OBJECT_OPERATOR","->",565],["T_STRING","setOrder",565],"(",["T_WHITESPACE","\n            ",565],["T_CONSTANT_ENCAPSED_STRING","'level'",566],",",["T_WHITESPACE","\n            ",566],["T_CONSTANT_ENCAPSED_STRING","'DESC'",567],["T_WHITESPACE","\n        ",567],")",["T_OBJECT_OPERATOR","->",568],["T_STRING","load",568],"(",")",";",["T_WHITESPACE","\n        ",568],["T_RETURN","return",569],["T_WHITESPACE"," ",569],["T_VARIABLE","$collection",569],["T_OBJECT_OPERATOR","->",569],["T_STRING","getFirstItem",569],"(",")",";",["T_WHITESPACE","\n    ",569],"}",["T_WHITESPACE","\n\n    ",570],["T_DOC_COMMENT","\/**\n     * Return children categories of category\n     *\n     * @param \\Magento\\Catalog\\Model\\Category $category\n     * @return \\Magento\\Catalog\\Model\\Category[]\n     *\/",572],["T_WHITESPACE","\n    ",577],["T_PUBLIC","public",578],["T_WHITESPACE"," ",578],["T_FUNCTION","function",578],["T_WHITESPACE"," ",578],["T_STRING","getChildrenCategories",578],"(",["T_VARIABLE","$category",578],")",["T_WHITESPACE","\n    ",578],"{",["T_WHITESPACE","\n        ",579],["T_VARIABLE","$categories",580],["T_WHITESPACE"," ",580],"=",["T_WHITESPACE"," ",580],["T_VARIABLE","$this",580],["T_OBJECT_OPERATOR","->",580],["T_STRING","_loadNodes",580],"(",["T_VARIABLE","$category",580],",",["T_WHITESPACE"," ",580],["T_LNUMBER","1",580],",",["T_WHITESPACE"," ",580],["T_VARIABLE","$category",580],["T_OBJECT_OPERATOR","->",580],["T_STRING","getStoreId",580],"(",")",",",["T_WHITESPACE"," ",580],["T_STRING","true",580],")",";",["T_WHITESPACE","\n        ",580],["T_RETURN","return",581],["T_WHITESPACE"," ",581],["T_VARIABLE","$categories",581],";",["T_WHITESPACE","\n    ",581],"}",["T_WHITESPACE","\n\n    ",582],["T_DOC_COMMENT","\/**\n     * Check is category in list of store categories\n     *\n     * @param \\Magento\\Catalog\\Model\\Category $category\n     * @return boolean\n     *\/",584],["T_WHITESPACE","\n    ",589],["T_PUBLIC","public",590],["T_WHITESPACE"," ",590],["T_FUNCTION","function",590],["T_WHITESPACE"," ",590],["T_STRING","isInRootCategoryList",590],"(",["T_VARIABLE","$category",590],")",["T_WHITESPACE","\n    ",590],"{",["T_WHITESPACE","\n        ",591],["T_VARIABLE","$pathIds",592],["T_WHITESPACE"," ",592],"=",["T_WHITESPACE"," ",592],["T_VARIABLE","$category",592],["T_OBJECT_OPERATOR","->",592],["T_STRING","getParentIds",592],"(",")",";",["T_WHITESPACE","\n        ",592],["T_RETURN","return",593],["T_WHITESPACE"," ",593],["T_STRING","in_array",593],"(",["T_VARIABLE","$this",593],["T_OBJECT_OPERATOR","->",593],["T_STRING","_storeManager",593],["T_OBJECT_OPERATOR","->",593],["T_STRING","getStore",593],"(",")",["T_OBJECT_OPERATOR","->",593],["T_STRING","getRootCategoryId",593],"(",")",",",["T_WHITESPACE"," ",593],["T_VARIABLE","$pathIds",593],")",";",["T_WHITESPACE","\n    ",593],"}",["T_WHITESPACE","\n\n    ",594],["T_DOC_COMMENT","\/**\n     * Return children ids of category\n     *\n     * @param \\Magento\\Catalog\\Model\\Category $category\n     * @param bool $recursive\n     * @param bool $isActive\n     * @return array\n     *\/",596],["T_WHITESPACE","\n    ",603],["T_PUBLIC","public",604],["T_WHITESPACE"," ",604],["T_FUNCTION","function",604],["T_WHITESPACE"," ",604],["T_STRING","getChildren",604],"(",["T_VARIABLE","$category",604],",",["T_WHITESPACE"," ",604],["T_VARIABLE","$recursive",604],["T_WHITESPACE"," ",604],"=",["T_WHITESPACE"," ",604],["T_STRING","true",604],",",["T_WHITESPACE"," ",604],["T_VARIABLE","$isActive",604],["T_WHITESPACE"," ",604],"=",["T_WHITESPACE"," ",604],["T_STRING","true",604],")",["T_WHITESPACE","\n    ",604],"{",["T_WHITESPACE","\n        ",605],["T_VARIABLE","$select",606],["T_WHITESPACE"," ",606],"=",["T_WHITESPACE"," ",606],["T_VARIABLE","$this",606],["T_OBJECT_OPERATOR","->",606],["T_STRING","getConnection",606],"(",")",["T_OBJECT_OPERATOR","->",606],["T_STRING","select",606],"(",")",["T_OBJECT_OPERATOR","->",606],["T_STRING","from",606],"(",["T_WHITESPACE","\n            ",606],["T_VARIABLE","$this",607],["T_OBJECT_OPERATOR","->",607],["T_STRING","getMainStoreTable",607],"(",["T_VARIABLE","$category",607],["T_OBJECT_OPERATOR","->",607],["T_STRING","getStoreId",607],"(",")",")",",",["T_WHITESPACE","\n            ",607],["T_CONSTANT_ENCAPSED_STRING","'entity_id'",608],["T_WHITESPACE","\n        ",608],")",["T_OBJECT_OPERATOR","->",609],["T_STRING","where",609],"(",["T_WHITESPACE","\n            ",609],["T_CONSTANT_ENCAPSED_STRING","'path LIKE ?'",610],",",["T_WHITESPACE","\n            ",610],"\"",["T_CURLY_OPEN","{",611],["T_VARIABLE","$category",611],["T_OBJECT_OPERATOR","->",611],["T_STRING","getPath",611],"(",")","}",["T_ENCAPSED_AND_WHITESPACE","\/%",611],"\"",["T_WHITESPACE","\n        ",611],")",";",["T_WHITESPACE","\n        ",612],["T_IF","if",613],["T_WHITESPACE"," ",613],"(","!",["T_VARIABLE","$recursive",613],")",["T_WHITESPACE"," ",613],"{",["T_WHITESPACE","\n            ",613],["T_VARIABLE","$select",614],["T_OBJECT_OPERATOR","->",614],["T_STRING","where",614],"(",["T_CONSTANT_ENCAPSED_STRING","'level <= ?'",614],",",["T_WHITESPACE"," ",614],["T_VARIABLE","$category",614],["T_OBJECT_OPERATOR","->",614],["T_STRING","getLevel",614],"(",")",["T_WHITESPACE"," ",614],"+",["T_WHITESPACE"," ",614],["T_LNUMBER","1",614],")",";",["T_WHITESPACE","\n        ",614],"}",["T_WHITESPACE","\n        ",615],["T_IF","if",616],["T_WHITESPACE"," ",616],"(",["T_VARIABLE","$isActive",616],")",["T_WHITESPACE"," ",616],"{",["T_WHITESPACE","\n            ",616],["T_VARIABLE","$select",617],["T_OBJECT_OPERATOR","->",617],["T_STRING","where",617],"(",["T_CONSTANT_ENCAPSED_STRING","'is_active = ?'",617],",",["T_WHITESPACE"," ",617],["T_CONSTANT_ENCAPSED_STRING","'1'",617],")",";",["T_WHITESPACE","\n        ",617],"}",["T_WHITESPACE","\n        ",618],["T_VARIABLE","$_categories",619],["T_WHITESPACE"," ",619],"=",["T_WHITESPACE"," ",619],["T_VARIABLE","$this",619],["T_OBJECT_OPERATOR","->",619],["T_STRING","getConnection",619],"(",")",["T_OBJECT_OPERATOR","->",619],["T_STRING","fetchAll",619],"(",["T_VARIABLE","$select",619],")",";",["T_WHITESPACE","\n        ",619],["T_VARIABLE","$categoriesIds",620],["T_WHITESPACE"," ",620],"=",["T_WHITESPACE"," ",620],"[","]",";",["T_WHITESPACE","\n        ",620],["T_FOREACH","foreach",621],["T_WHITESPACE"," ",621],"(",["T_VARIABLE","$_categories",621],["T_WHITESPACE"," ",621],["T_AS","as",621],["T_WHITESPACE"," ",621],["T_VARIABLE","$_category",621],")",["T_WHITESPACE"," ",621],"{",["T_WHITESPACE","\n            ",621],["T_VARIABLE","$categoriesIds",622],"[","]",["T_WHITESPACE"," ",622],"=",["T_WHITESPACE"," ",622],["T_VARIABLE","$_category",622],"[",["T_CONSTANT_ENCAPSED_STRING","'entity_id'",622],"]",";",["T_WHITESPACE","\n        ",622],"}",["T_WHITESPACE","\n        ",623],["T_RETURN","return",624],["T_WHITESPACE"," ",624],["T_VARIABLE","$categoriesIds",624],";",["T_WHITESPACE","\n    ",624],"}",["T_WHITESPACE","\n\n    ",625],["T_DOC_COMMENT","\/**\n     * Return all children ids of category (with category id)\n     *\n     * @param \\Magento\\Catalog\\Model\\Category $category\n     * @return array\n     *\/",627],["T_WHITESPACE","\n    ",632],["T_PUBLIC","public",633],["T_WHITESPACE"," ",633],["T_FUNCTION","function",633],["T_WHITESPACE"," ",633],["T_STRING","getAllChildren",633],"(",["T_VARIABLE","$category",633],")",["T_WHITESPACE","\n    ",633],"{",["T_WHITESPACE","\n        ",634],["T_VARIABLE","$categoriesIds",635],["T_WHITESPACE"," ",635],"=",["T_WHITESPACE"," ",635],["T_VARIABLE","$this",635],["T_OBJECT_OPERATOR","->",635],["T_STRING","getChildren",635],"(",["T_VARIABLE","$category",635],")",";",["T_WHITESPACE","\n        ",635],["T_VARIABLE","$myId",636],["T_WHITESPACE"," ",636],"=",["T_WHITESPACE"," ",636],"[",["T_VARIABLE","$category",636],["T_OBJECT_OPERATOR","->",636],["T_STRING","getId",636],"(",")","]",";",["T_WHITESPACE","\n        ",636],["T_VARIABLE","$categoriesIds",637],["T_WHITESPACE"," ",637],"=",["T_WHITESPACE"," ",637],["T_STRING","array_merge",637],"(",["T_VARIABLE","$myId",637],",",["T_WHITESPACE"," ",637],["T_VARIABLE","$categoriesIds",637],")",";",["T_WHITESPACE","\n\n        ",637],["T_RETURN","return",639],["T_WHITESPACE"," ",639],["T_VARIABLE","$categoriesIds",639],";",["T_WHITESPACE","\n    ",639],"}",["T_WHITESPACE","\n\n    ",640],["T_DOC_COMMENT","\/**\n     * Check if category id exist\n     *\n     * @param int $id\n     * @return bool\n     *\/",642],["T_WHITESPACE","\n    ",647],["T_PUBLIC","public",648],["T_WHITESPACE"," ",648],["T_FUNCTION","function",648],["T_WHITESPACE"," ",648],["T_STRING","checkId",648],"(",["T_VARIABLE","$id",648],")",["T_WHITESPACE","\n    ",648],"{",["T_WHITESPACE","\n        ",649],["T_VARIABLE","$select",650],["T_WHITESPACE"," ",650],"=",["T_WHITESPACE"," ",650],["T_VARIABLE","$this",650],["T_OBJECT_OPERATOR","->",650],["T_STRING","getConnection",650],"(",")",["T_OBJECT_OPERATOR","->",650],["T_STRING","select",650],"(",")",["T_OBJECT_OPERATOR","->",650],["T_STRING","from",650],"(",["T_WHITESPACE","\n            ",650],["T_VARIABLE","$this",651],["T_OBJECT_OPERATOR","->",651],["T_STRING","getMainStoreTable",651],"(",["T_VARIABLE","$this",651],["T_OBJECT_OPERATOR","->",651],["T_STRING","getStoreId",651],"(",")",")",",",["T_WHITESPACE","\n            ",651],["T_CONSTANT_ENCAPSED_STRING","'entity_id'",652],["T_WHITESPACE","\n        ",652],")",["T_OBJECT_OPERATOR","->",653],["T_STRING","where",653],"(",["T_WHITESPACE","\n            ",653],["T_CONSTANT_ENCAPSED_STRING","'entity_id=?'",654],",",["T_WHITESPACE","\n            ",654],["T_VARIABLE","$id",655],["T_WHITESPACE","\n        ",655],")",";",["T_WHITESPACE","\n        ",656],["T_RETURN","return",657],["T_WHITESPACE"," ",657],["T_VARIABLE","$this",657],["T_OBJECT_OPERATOR","->",657],["T_STRING","getConnection",657],"(",")",["T_OBJECT_OPERATOR","->",657],["T_STRING","fetchOne",657],"(",["T_VARIABLE","$select",657],")",";",["T_WHITESPACE","\n    ",657],"}",["T_WHITESPACE","\n\n    ",658],["T_DOC_COMMENT","\/**\n     * Retrieve anchors above\n     *\n     * @param array $filterIds\n     * @param int $storeId\n     * @return array\n     *\/",660],["T_WHITESPACE","\n    ",666],["T_PUBLIC","public",667],["T_WHITESPACE"," ",667],["T_FUNCTION","function",667],["T_WHITESPACE"," ",667],["T_STRING","getAnchorsAbove",667],"(",["T_ARRAY","array",667],["T_WHITESPACE"," ",667],["T_VARIABLE","$filterIds",667],",",["T_WHITESPACE"," ",667],["T_VARIABLE","$storeId",667],["T_WHITESPACE"," ",667],"=",["T_WHITESPACE"," ",667],["T_LNUMBER","0",667],")",["T_WHITESPACE","\n    ",667],"{",["T_WHITESPACE","\n        ",668],["T_VARIABLE","$select",669],["T_WHITESPACE"," ",669],"=",["T_WHITESPACE"," ",669],["T_VARIABLE","$this",669],["T_OBJECT_OPERATOR","->",669],["T_STRING","getConnection",669],"(",")",["T_OBJECT_OPERATOR","->",669],["T_STRING","select",669],"(",")",["T_OBJECT_OPERATOR","->",669],["T_STRING","from",669],"(",["T_WHITESPACE","\n            ",669],"[",["T_CONSTANT_ENCAPSED_STRING","'e'",670],["T_WHITESPACE"," ",670],["T_DOUBLE_ARROW","=>",670],["T_WHITESPACE"," ",670],["T_VARIABLE","$this",670],["T_OBJECT_OPERATOR","->",670],["T_STRING","getMainStoreTable",670],"(",["T_VARIABLE","$storeId",670],")","]",",",["T_WHITESPACE","\n            ",670],["T_CONSTANT_ENCAPSED_STRING","'entity_id'",671],["T_WHITESPACE","\n        ",671],")",["T_OBJECT_OPERATOR","->",672],["T_STRING","where",672],"(",["T_WHITESPACE","\n            ",672],["T_CONSTANT_ENCAPSED_STRING","'is_anchor = ?'",673],",",["T_WHITESPACE","\n            ",673],["T_LNUMBER","1",674],["T_WHITESPACE","\n        ",674],")",["T_OBJECT_OPERATOR","->",675],["T_STRING","where",675],"(",["T_WHITESPACE","\n            ",675],["T_CONSTANT_ENCAPSED_STRING","'entity_id IN (?)'",676],",",["T_WHITESPACE","\n            ",676],["T_VARIABLE","$filterIds",677],["T_WHITESPACE","\n        ",677],")",";",["T_WHITESPACE","\n\n        ",678],["T_RETURN","return",680],["T_WHITESPACE"," ",680],["T_VARIABLE","$this",680],["T_OBJECT_OPERATOR","->",680],["T_STRING","getConnection",680],"(",")",["T_OBJECT_OPERATOR","->",680],["T_STRING","fetchCol",680],"(",["T_VARIABLE","$select",680],")",";",["T_WHITESPACE","\n    ",680],"}",["T_WHITESPACE","\n\n    ",681],["T_DOC_COMMENT","\/**\n     * Get positions of associated to category products\n     *\n     * @param \\Magento\\Catalog\\Model\\Category $category\n     * @return array\n     *\/",683],["T_WHITESPACE","\n    ",688],["T_PUBLIC","public",689],["T_WHITESPACE"," ",689],["T_FUNCTION","function",689],["T_WHITESPACE"," ",689],["T_STRING","getProductsPosition",689],"(",["T_VARIABLE","$category",689],")",["T_WHITESPACE","\n    ",689],"{",["T_WHITESPACE","\n        ",690],["T_VARIABLE","$select",691],["T_WHITESPACE"," ",691],"=",["T_WHITESPACE"," ",691],["T_VARIABLE","$this",691],["T_OBJECT_OPERATOR","->",691],["T_STRING","getConnection",691],"(",")",["T_OBJECT_OPERATOR","->",691],["T_STRING","select",691],"(",")",["T_OBJECT_OPERATOR","->",691],["T_STRING","from",691],"(",["T_WHITESPACE","\n            ",691],["T_VARIABLE","$this",692],["T_OBJECT_OPERATOR","->",692],["T_STRING","getTable",692],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog_category_product'",692],")",",",["T_WHITESPACE","\n            ",692],"[",["T_CONSTANT_ENCAPSED_STRING","'product_id'",693],",",["T_WHITESPACE"," ",693],["T_CONSTANT_ENCAPSED_STRING","'position'",693],"]",["T_WHITESPACE","\n        ",693],")",["T_OBJECT_OPERATOR","->",694],["T_STRING","where",694],"(",["T_WHITESPACE","\n            ",694],["T_CONSTANT_ENCAPSED_STRING","'category_id = :category_id'",695],["T_WHITESPACE","\n        ",695],")",";",["T_WHITESPACE","\n        ",696],["T_VARIABLE","$bind",697],["T_WHITESPACE"," ",697],"=",["T_WHITESPACE"," ",697],"[",["T_CONSTANT_ENCAPSED_STRING","'category_id'",697],["T_WHITESPACE"," ",697],["T_DOUBLE_ARROW","=>",697],["T_WHITESPACE"," ",697],["T_INT_CAST","(int)",697],["T_VARIABLE","$category",697],["T_OBJECT_OPERATOR","->",697],["T_STRING","getId",697],"(",")","]",";",["T_WHITESPACE","\n\n        ",697],["T_RETURN","return",699],["T_WHITESPACE"," ",699],["T_VARIABLE","$this",699],["T_OBJECT_OPERATOR","->",699],["T_STRING","getConnection",699],"(",")",["T_OBJECT_OPERATOR","->",699],["T_STRING","fetchPairs",699],"(",["T_VARIABLE","$select",699],",",["T_WHITESPACE"," ",699],["T_VARIABLE","$bind",699],")",";",["T_WHITESPACE","\n    ",699],"}",["T_WHITESPACE","\n\n    ",700],["T_DOC_COMMENT","\/**\n     * Get instance of CategoryFlatCollectionFactory\n     *\n     * @return CategoryFlatCollectionFactory\n     *\/",702],["T_WHITESPACE","\n    ",706],["T_PRIVATE","private",707],["T_WHITESPACE"," ",707],["T_FUNCTION","function",707],["T_WHITESPACE"," ",707],["T_STRING","getCategoryFlatCollectionFactory",707],"(",")",["T_WHITESPACE","\n    ",707],"{",["T_WHITESPACE","\n        ",708],["T_IF","if",709],["T_WHITESPACE"," ",709],"(","!",["T_VARIABLE","$this",709],["T_OBJECT_OPERATOR","->",709],["T_STRING","categoryFlatCollectionFactory",709],["T_WHITESPACE"," ",709],["T_INSTANCEOF","instanceof",709],["T_WHITESPACE"," ",709],["T_STRING","CategoryFlatCollectionFactory",709],")",["T_WHITESPACE"," ",709],"{",["T_WHITESPACE","\n            ",709],["T_VARIABLE","$this",710],["T_OBJECT_OPERATOR","->",710],["T_STRING","categoryFlatCollectionFactory",710],["T_WHITESPACE"," ",710],"=",["T_WHITESPACE"," ",710],["T_STRING","ObjectManager",710],["T_DOUBLE_COLON","::",710],["T_STRING","getInstance",710],"(",")",["T_WHITESPACE","\n                ",710],["T_OBJECT_OPERATOR","->",711],["T_STRING","get",711],"(",["T_STRING","CategoryFlatCollectionFactory",711],["T_DOUBLE_COLON","::",711],["T_CLASS","class",711],")",";",["T_WHITESPACE","\n        ",711],"}",["T_WHITESPACE","\n\n        ",712],["T_RETURN","return",714],["T_WHITESPACE"," ",714],["T_VARIABLE","$this",714],["T_OBJECT_OPERATOR","->",714],["T_STRING","categoryFlatCollectionFactory",714],";",["T_WHITESPACE","\n    ",714],"}",["T_WHITESPACE","\n",715],"}",["T_WHITESPACE","\n",716]]
[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Copyright \u00c2\u00a9 2013-2017 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n *\/",2],["T_WHITESPACE","\n\n",5],["T_COMMENT","\/\/ @codingStandardsIgnoreFile\n",7],["T_WHITESPACE","\n",8],["T_NAMESPACE","namespace",9],["T_WHITESPACE"," ",9],["T_STRING","Magento",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Catalog",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Model",9],["T_NS_SEPARATOR","\\",9],["T_STRING","ResourceModel",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Product",9],";",["T_WHITESPACE","\n\n",9],["T_USE","use",11],["T_WHITESPACE"," ",11],["T_STRING","Magento",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Catalog",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Api",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Data",11],["T_NS_SEPARATOR","\\",11],["T_STRING","ProductInterface",11],";",["T_WHITESPACE","\n",11],["T_USE","use",12],["T_WHITESPACE"," ",12],["T_STRING","Magento",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Catalog",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Model",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Product",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Attribute",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Source",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Status",12],["T_WHITESPACE"," ",12],["T_AS","as",12],["T_WHITESPACE"," ",12],["T_STRING","ProductStatus",12],";",["T_WHITESPACE","\n",12],["T_USE","use",13],["T_WHITESPACE"," ",13],["T_STRING","Magento",13],["T_NS_SEPARATOR","\\",13],["T_STRING","CatalogUrlRewrite",13],["T_NS_SEPARATOR","\\",13],["T_STRING","Model",13],["T_NS_SEPARATOR","\\",13],["T_STRING","ProductUrlRewriteGenerator",13],";",["T_WHITESPACE","\n",13],["T_USE","use",14],["T_WHITESPACE"," ",14],["T_STRING","Magento",14],["T_NS_SEPARATOR","\\",14],["T_STRING","Customer",14],["T_NS_SEPARATOR","\\",14],["T_STRING","Api",14],["T_NS_SEPARATOR","\\",14],["T_STRING","GroupManagementInterface",14],";",["T_WHITESPACE","\n",14],["T_USE","use",15],["T_WHITESPACE"," ",15],["T_STRING","Magento",15],["T_NS_SEPARATOR","\\",15],["T_STRING","Framework",15],["T_NS_SEPARATOR","\\",15],["T_STRING","DB",15],["T_NS_SEPARATOR","\\",15],["T_STRING","Select",15],";",["T_WHITESPACE","\n",15],["T_USE","use",16],["T_WHITESPACE"," ",16],["T_STRING","Magento",16],["T_NS_SEPARATOR","\\",16],["T_STRING","Framework",16],["T_NS_SEPARATOR","\\",16],["T_STRING","App",16],["T_NS_SEPARATOR","\\",16],["T_STRING","ObjectManager",16],";",["T_WHITESPACE","\n",16],["T_USE","use",17],["T_WHITESPACE"," ",17],["T_STRING","Magento",17],["T_NS_SEPARATOR","\\",17],["T_STRING","Framework",17],["T_NS_SEPARATOR","\\",17],["T_STRING","EntityManager",17],["T_NS_SEPARATOR","\\",17],["T_STRING","MetadataPool",17],";",["T_WHITESPACE","\n",17],["T_USE","use",18],["T_WHITESPACE"," ",18],["T_STRING","Magento",18],["T_NS_SEPARATOR","\\",18],["T_STRING","Store",18],["T_NS_SEPARATOR","\\",18],["T_STRING","Model",18],["T_NS_SEPARATOR","\\",18],["T_STRING","Store",18],";",["T_WHITESPACE","\n",18],["T_USE","use",19],["T_WHITESPACE"," ",19],["T_STRING","Magento",19],["T_NS_SEPARATOR","\\",19],["T_STRING","Catalog",19],["T_NS_SEPARATOR","\\",19],["T_STRING","Model",19],["T_NS_SEPARATOR","\\",19],["T_STRING","Product",19],["T_NS_SEPARATOR","\\",19],["T_STRING","Gallery",19],["T_NS_SEPARATOR","\\",19],["T_STRING","ReadHandler",19],["T_WHITESPACE"," ",19],["T_AS","as",19],["T_WHITESPACE"," ",19],["T_STRING","GalleryReadHandler",19],";",["T_WHITESPACE","\n",19],["T_USE","use",20],["T_WHITESPACE"," ",20],["T_STRING","Magento",20],["T_NS_SEPARATOR","\\",20],["T_STRING","Catalog",20],["T_NS_SEPARATOR","\\",20],["T_STRING","Model",20],["T_NS_SEPARATOR","\\",20],["T_STRING","ResourceModel",20],["T_NS_SEPARATOR","\\",20],["T_STRING","Product",20],["T_NS_SEPARATOR","\\",20],["T_STRING","Collection",20],["T_NS_SEPARATOR","\\",20],["T_STRING","ProductLimitationFactory",20],";",["T_WHITESPACE","\n\n",20],["T_DOC_COMMENT","\/**\n * Product collection\n * @SuppressWarnings(PHPMD.ExcessivePublicCount)\n * @SuppressWarnings(PHPMD.TooManyFields)\n * @SuppressWarnings(PHPMD.ExcessiveClassComplexity)\n * @SuppressWarnings(PHPMD.NumberOfChildren)\n * @SuppressWarnings(PHPMD.CouplingBetweenObjects)\n *\n * @method \\Magento\\Eav\\Model\\ResourceModel\\Attribute\\DefaultEntityAttributes\\ProviderInterface getResource()\n *\/",22],["T_WHITESPACE","\n",31],["T_CLASS","class",32],["T_WHITESPACE"," ",32],["T_STRING","Collection",32],["T_WHITESPACE"," ",32],["T_EXTENDS","extends",32],["T_WHITESPACE"," ",32],["T_NS_SEPARATOR","\\",32],["T_STRING","Magento",32],["T_NS_SEPARATOR","\\",32],["T_STRING","Catalog",32],["T_NS_SEPARATOR","\\",32],["T_STRING","Model",32],["T_NS_SEPARATOR","\\",32],["T_STRING","ResourceModel",32],["T_NS_SEPARATOR","\\",32],["T_STRING","Collection",32],["T_NS_SEPARATOR","\\",32],["T_STRING","AbstractCollection",32],["T_WHITESPACE","\n",32],"{",["T_WHITESPACE","\n    ",33],["T_DOC_COMMENT","\/**\n     * Alias for index table\n     *\/",34],["T_WHITESPACE","\n    ",36],["T_CONST","const",37],["T_WHITESPACE"," ",37],["T_STRING","INDEX_TABLE_ALIAS",37],["T_WHITESPACE"," ",37],"=",["T_WHITESPACE"," ",37],["T_CONSTANT_ENCAPSED_STRING","'price_index'",37],";",["T_WHITESPACE","\n\n    ",37],["T_DOC_COMMENT","\/**\n     * Alias for main table\n     *\/",39],["T_WHITESPACE","\n    ",41],["T_CONST","const",42],["T_WHITESPACE"," ",42],["T_STRING","MAIN_TABLE_ALIAS",42],["T_WHITESPACE"," ",42],"=",["T_WHITESPACE"," ",42],["T_CONSTANT_ENCAPSED_STRING","'e'",42],";",["T_WHITESPACE","\n\n    ",42],["T_DOC_COMMENT","\/**\n     * @var string\n     *\/",44],["T_WHITESPACE","\n    ",46],["T_PROTECTED","protected",47],["T_WHITESPACE"," ",47],["T_VARIABLE","$_idFieldName",47],["T_WHITESPACE"," ",47],"=",["T_WHITESPACE"," ",47],["T_CONSTANT_ENCAPSED_STRING","'entity_id'",47],";",["T_WHITESPACE","\n\n    ",47],["T_DOC_COMMENT","\/**\n     * Catalog Product Flat is enabled cache per store\n     *\n     * @var array\n     *\/",49],["T_WHITESPACE","\n    ",53],["T_PROTECTED","protected",54],["T_WHITESPACE"," ",54],["T_VARIABLE","$_flatEnabled",54],["T_WHITESPACE"," ",54],"=",["T_WHITESPACE"," ",54],"[","]",";",["T_WHITESPACE","\n\n    ",54],["T_DOC_COMMENT","\/**\n     * Product websites table name\n     *\n     * @var string\n     *\/",56],["T_WHITESPACE","\n    ",60],["T_PROTECTED","protected",61],["T_WHITESPACE"," ",61],["T_VARIABLE","$_productWebsiteTable",61],";",["T_WHITESPACE","\n\n    ",61],["T_DOC_COMMENT","\/**\n     * Product categories table name\n     *\n     * @var string\n     *\/",63],["T_WHITESPACE","\n    ",67],["T_PROTECTED","protected",68],["T_WHITESPACE"," ",68],["T_VARIABLE","$_productCategoryTable",68],";",["T_WHITESPACE","\n\n    ",68],["T_DOC_COMMENT","\/**\n     * Is add URL rewrites to collection flag\n     *\n     * @var bool\n     *\/",70],["T_WHITESPACE","\n    ",74],["T_PROTECTED","protected",75],["T_WHITESPACE"," ",75],["T_VARIABLE","$_addUrlRewrite",75],["T_WHITESPACE"," ",75],"=",["T_WHITESPACE"," ",75],["T_STRING","false",75],";",["T_WHITESPACE","\n\n    ",75],["T_DOC_COMMENT","\/**\n     * Add URL rewrite for category\n     *\n     * @var int\n     *\/",77],["T_WHITESPACE","\n    ",81],["T_PROTECTED","protected",82],["T_WHITESPACE"," ",82],["T_VARIABLE","$_urlRewriteCategory",82],["T_WHITESPACE"," ",82],"=",["T_WHITESPACE"," ",82],["T_CONSTANT_ENCAPSED_STRING","''",82],";",["T_WHITESPACE","\n\n    ",82],["T_DOC_COMMENT","\/**\n     * Is add final price to product collection flag\n     *\n     * @var bool\n     *\/",84],["T_WHITESPACE","\n    ",88],["T_PROTECTED","protected",89],["T_WHITESPACE"," ",89],["T_VARIABLE","$_addFinalPrice",89],["T_WHITESPACE"," ",89],"=",["T_WHITESPACE"," ",89],["T_STRING","false",89],";",["T_WHITESPACE","\n\n    ",89],["T_DOC_COMMENT","\/**\n     * Cache for all ids\n     *\n     * @var array\n     *\/",91],["T_WHITESPACE","\n    ",95],["T_PROTECTED","protected",96],["T_WHITESPACE"," ",96],["T_VARIABLE","$_allIdsCache",96],["T_WHITESPACE"," ",96],"=",["T_WHITESPACE"," ",96],["T_STRING","null",96],";",["T_WHITESPACE","\n\n    ",96],["T_DOC_COMMENT","\/**\n     * Is add tax percents to product collection flag\n     *\n     * @var bool\n     *\/",98],["T_WHITESPACE","\n    ",102],["T_PROTECTED","protected",103],["T_WHITESPACE"," ",103],["T_VARIABLE","$_addTaxPercents",103],["T_WHITESPACE"," ",103],"=",["T_WHITESPACE"," ",103],["T_STRING","false",103],";",["T_WHITESPACE","\n\n    ",103],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Catalog\\Model\\ResourceModel\\Product\\Collection\\ProductLimitation\n     *\/",105],["T_WHITESPACE","\n    ",107],["T_PROTECTED","protected",108],["T_WHITESPACE"," ",108],["T_VARIABLE","$_productLimitationFilters",108],";",["T_WHITESPACE","\n\n    ",108],["T_DOC_COMMENT","\/**\n     * Category product count select\n     *\n     * @var \\Magento\\Framework\\DB\\Select\n     *\/",110],["T_WHITESPACE","\n    ",114],["T_PROTECTED","protected",115],["T_WHITESPACE"," ",115],["T_VARIABLE","$_productCountSelect",115],["T_WHITESPACE"," ",115],"=",["T_WHITESPACE"," ",115],["T_STRING","null",115],";",["T_WHITESPACE","\n\n    ",115],["T_DOC_COMMENT","\/**\n     * @var bool\n     *\/",117],["T_WHITESPACE","\n    ",119],["T_PROTECTED","protected",120],["T_WHITESPACE"," ",120],["T_VARIABLE","$_isWebsiteFilter",120],["T_WHITESPACE"," ",120],"=",["T_WHITESPACE"," ",120],["T_STRING","false",120],";",["T_WHITESPACE","\n\n    ",120],["T_DOC_COMMENT","\/**\n     * Additional field filters, applied in _productLimitationJoinPrice()\n     *\n     * @var array\n     *\/",122],["T_WHITESPACE","\n    ",126],["T_PROTECTED","protected",127],["T_WHITESPACE"," ",127],["T_VARIABLE","$_priceDataFieldFilters",127],["T_WHITESPACE"," ",127],"=",["T_WHITESPACE"," ",127],"[","]",";",["T_WHITESPACE","\n\n    ",127],["T_DOC_COMMENT","\/**\n     * Price expression sql\n     *\n     * @var string|null\n     *\/",129],["T_WHITESPACE","\n    ",133],["T_PROTECTED","protected",134],["T_WHITESPACE"," ",134],["T_VARIABLE","$_priceExpression",134],";",["T_WHITESPACE","\n\n    ",134],["T_DOC_COMMENT","\/**\n     * Additional price expression sql part\n     *\n     * @var string|null\n     *\/",136],["T_WHITESPACE","\n    ",140],["T_PROTECTED","protected",141],["T_WHITESPACE"," ",141],["T_VARIABLE","$_additionalPriceExpression",141],";",["T_WHITESPACE","\n\n    ",141],["T_DOC_COMMENT","\/**\n     * Max prise (statistics data)\n     *\n     * @var float\n     *\/",143],["T_WHITESPACE","\n    ",147],["T_PROTECTED","protected",148],["T_WHITESPACE"," ",148],["T_VARIABLE","$_maxPrice",148],";",["T_WHITESPACE","\n\n    ",148],["T_DOC_COMMENT","\/**\n     * Min prise (statistics data)\n     *\n     * @var float\n     *\/",150],["T_WHITESPACE","\n    ",154],["T_PROTECTED","protected",155],["T_WHITESPACE"," ",155],["T_VARIABLE","$_minPrice",155],";",["T_WHITESPACE","\n\n    ",155],["T_DOC_COMMENT","\/**\n     * Prise standard deviation (statistics data)\n     *\n     * @var float\n     *\/",157],["T_WHITESPACE","\n    ",161],["T_PROTECTED","protected",162],["T_WHITESPACE"," ",162],["T_VARIABLE","$_priceStandardDeviation",162],";",["T_WHITESPACE","\n\n    ",162],["T_DOC_COMMENT","\/**\n     * Prises count (statistics data)\n     *\n     * @var int\n     *\/",164],["T_WHITESPACE","\n    ",168],["T_PROTECTED","protected",169],["T_WHITESPACE"," ",169],["T_VARIABLE","$_pricesCount",169],["T_WHITESPACE"," ",169],"=",["T_WHITESPACE"," ",169],["T_STRING","null",169],";",["T_WHITESPACE","\n\n    ",169],["T_DOC_COMMENT","\/**\n     * Cloned Select after dispatching 'catalog_prepare_price_select' event\n     *\n     * @var \\Magento\\Framework\\DB\\Select\n     *\/",171],["T_WHITESPACE","\n    ",175],["T_PROTECTED","protected",176],["T_WHITESPACE"," ",176],["T_VARIABLE","$_catalogPreparePriceSelect",176],["T_WHITESPACE"," ",176],"=",["T_WHITESPACE"," ",176],["T_STRING","null",176],";",["T_WHITESPACE","\n\n    ",176],["T_DOC_COMMENT","\/**\n     * Catalog product flat\n     *\n     * @var \\Magento\\Catalog\\Model\\Indexer\\Product\\Flat\\State\n     *\/",178],["T_WHITESPACE","\n    ",182],["T_PROTECTED","protected",183],["T_WHITESPACE"," ",183],["T_VARIABLE","$_catalogProductFlatState",183],["T_WHITESPACE"," ",183],"=",["T_WHITESPACE"," ",183],["T_STRING","null",183],";",["T_WHITESPACE","\n\n    ",183],["T_DOC_COMMENT","\/**\n     * Catalog data\n     *\n     * @var \\Magento\\Framework\\Module\\Manager\n     *\/",185],["T_WHITESPACE","\n    ",189],["T_PROTECTED","protected",190],["T_WHITESPACE"," ",190],["T_VARIABLE","$moduleManager",190],["T_WHITESPACE"," ",190],"=",["T_WHITESPACE"," ",190],["T_STRING","null",190],";",["T_WHITESPACE","\n\n    ",190],["T_DOC_COMMENT","\/**\n     * Core store config\n     *\n     * @var \\Magento\\Framework\\App\\Config\\ScopeConfigInterface\n     *\/",192],["T_WHITESPACE","\n    ",196],["T_PROTECTED","protected",197],["T_WHITESPACE"," ",197],["T_VARIABLE","$_scopeConfig",197],";",["T_WHITESPACE","\n\n    ",197],["T_DOC_COMMENT","\/**\n     * Customer session\n     *\n     * @var \\Magento\\Customer\\Model\\Session\n     *\/",199],["T_WHITESPACE","\n    ",203],["T_PROTECTED","protected",204],["T_WHITESPACE"," ",204],["T_VARIABLE","$_customerSession",204],";",["T_WHITESPACE","\n\n    ",204],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Framework\\Stdlib\\DateTime\\TimezoneInterface\n     *\/",206],["T_WHITESPACE","\n    ",208],["T_PROTECTED","protected",209],["T_WHITESPACE"," ",209],["T_VARIABLE","$_localeDate",209],";",["T_WHITESPACE","\n\n    ",209],["T_DOC_COMMENT","\/**\n     * Catalog url\n     *\n     * @var \\Magento\\Catalog\\Model\\ResourceModel\\Url\n     *\/",211],["T_WHITESPACE","\n    ",215],["T_PROTECTED","protected",216],["T_WHITESPACE"," ",216],["T_VARIABLE","$_catalogUrl",216],";",["T_WHITESPACE","\n\n    ",216],["T_DOC_COMMENT","\/**\n     * Product option factory\n     *\n     * @var \\Magento\\Catalog\\Model\\Product\\OptionFactory\n     *\/",218],["T_WHITESPACE","\n    ",222],["T_PROTECTED","protected",223],["T_WHITESPACE"," ",223],["T_VARIABLE","$_productOptionFactory",223],";",["T_WHITESPACE","\n\n    ",223],["T_DOC_COMMENT","\/**\n     * Catalog resource helper\n     *\n     * @var \\Magento\\Catalog\\Model\\ResourceModel\\Helper\n     *\/",225],["T_WHITESPACE","\n    ",229],["T_PROTECTED","protected",230],["T_WHITESPACE"," ",230],["T_VARIABLE","$_resourceHelper",230],";",["T_WHITESPACE","\n\n    ",230],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Framework\\Stdlib\\DateTime\n     *\/",232],["T_WHITESPACE","\n    ",234],["T_PROTECTED","protected",235],["T_WHITESPACE"," ",235],["T_VARIABLE","$dateTime",235],";",["T_WHITESPACE","\n\n    ",235],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Customer\\Api\\GroupManagementInterface\n     *\/",237],["T_WHITESPACE","\n    ",239],["T_PROTECTED","protected",240],["T_WHITESPACE"," ",240],["T_VARIABLE","$_groupManagement",240],";",["T_WHITESPACE","\n\n    ",240],["T_DOC_COMMENT","\/**\n     * Need to add websites to result flag\n     *\n     * @var bool\n     *\/",242],["T_WHITESPACE","\n    ",246],["T_PROTECTED","protected",247],["T_WHITESPACE"," ",247],["T_VARIABLE","$needToAddWebsiteNamesToResult",247],";",["T_WHITESPACE","\n\n    ",247],["T_DOC_COMMENT","\/**\n     * @var Gallery\n     *\/",249],["T_WHITESPACE","\n    ",251],["T_PRIVATE","private",252],["T_WHITESPACE"," ",252],["T_VARIABLE","$mediaGalleryResource",252],";",["T_WHITESPACE","\n\n    ",252],["T_DOC_COMMENT","\/**\n     * @var GalleryReadHandler\n     *\/",254],["T_WHITESPACE","\n    ",256],["T_PRIVATE","private",257],["T_WHITESPACE"," ",257],["T_VARIABLE","$productGalleryReadHandler",257],";",["T_WHITESPACE","\n\n    ",257],["T_DOC_COMMENT","\/**\n     * @var MetadataPool\n     *\/",259],["T_WHITESPACE","\n    ",261],["T_PRIVATE","private",262],["T_WHITESPACE"," ",262],["T_VARIABLE","$metadataPool",262],";",["T_WHITESPACE","\n\n    ",262],["T_DOC_COMMENT","\/**\n     * Collection constructor\n     *\n     * @param \\Magento\\Framework\\Data\\Collection\\EntityFactory $entityFactory\n     * @param \\Psr\\Log\\LoggerInterface $logger\n     * @param \\Magento\\Framework\\Data\\Collection\\Db\\FetchStrategyInterface $fetchStrategy\n     * @param \\Magento\\Framework\\Event\\ManagerInterface $eventManager\n     * @param \\Magento\\Eav\\Model\\Config $eavConfig\n     * @param \\Magento\\Framework\\App\\ResourceConnection $resource\n     * @param \\Magento\\Eav\\Model\\EntityFactory $eavEntityFactory\n     * @param \\Magento\\Catalog\\Model\\ResourceModel\\Helper $resourceHelper\n     * @param \\Magento\\Framework\\Validator\\UniversalFactory $universalFactory\n     * @param \\Magento\\Store\\Model\\StoreManagerInterface $storeManager\n     * @param \\Magento\\Framework\\Module\\Manager $moduleManager\n     * @param \\Magento\\Catalog\\Model\\Indexer\\Product\\Flat\\State $catalogProductFlatState\n     * @param \\Magento\\Framework\\App\\Config\\ScopeConfigInterface $scopeConfig\n     * @param \\Magento\\Catalog\\Model\\Product\\OptionFactory $productOptionFactory\n     * @param \\Magento\\Catalog\\Model\\ResourceModel\\Url $catalogUrl\n     * @param \\Magento\\Framework\\Stdlib\\DateTime\\TimezoneInterface $localeDate\n     * @param \\Magento\\Customer\\Model\\Session $customerSession\n     * @param \\Magento\\Framework\\Stdlib\\DateTime $dateTime\n     * @param GroupManagementInterface $groupManagement\n     * @param \\Magento\\Framework\\DB\\Adapter\\AdapterInterface|null $connection\n     * @param ProductLimitationFactory|null $productLimitationFactory\n     * @param MetadataPool|null $metadataPool\n     *\n     * @SuppressWarnings(PHPMD.ExcessiveParameterList)\n     *\/",264],["T_WHITESPACE","\n    ",291],["T_PUBLIC","public",292],["T_WHITESPACE"," ",292],["T_FUNCTION","function",292],["T_WHITESPACE"," ",292],["T_STRING","__construct",292],"(",["T_WHITESPACE","\n        ",292],["T_NS_SEPARATOR","\\",293],["T_STRING","Magento",293],["T_NS_SEPARATOR","\\",293],["T_STRING","Framework",293],["T_NS_SEPARATOR","\\",293],["T_STRING","Data",293],["T_NS_SEPARATOR","\\",293],["T_STRING","Collection",293],["T_NS_SEPARATOR","\\",293],["T_STRING","EntityFactory",293],["T_WHITESPACE"," ",293],["T_VARIABLE","$entityFactory",293],",",["T_WHITESPACE","\n        ",293],["T_NS_SEPARATOR","\\",294],["T_STRING","Psr",294],["T_NS_SEPARATOR","\\",294],["T_STRING","Log",294],["T_NS_SEPARATOR","\\",294],["T_STRING","LoggerInterface",294],["T_WHITESPACE"," ",294],["T_VARIABLE","$logger",294],",",["T_WHITESPACE","\n        ",294],["T_NS_SEPARATOR","\\",295],["T_STRING","Magento",295],["T_NS_SEPARATOR","\\",295],["T_STRING","Framework",295],["T_NS_SEPARATOR","\\",295],["T_STRING","Data",295],["T_NS_SEPARATOR","\\",295],["T_STRING","Collection",295],["T_NS_SEPARATOR","\\",295],["T_STRING","Db",295],["T_NS_SEPARATOR","\\",295],["T_STRING","FetchStrategyInterface",295],["T_WHITESPACE"," ",295],["T_VARIABLE","$fetchStrategy",295],",",["T_WHITESPACE","\n        ",295],["T_NS_SEPARATOR","\\",296],["T_STRING","Magento",296],["T_NS_SEPARATOR","\\",296],["T_STRING","Framework",296],["T_NS_SEPARATOR","\\",296],["T_STRING","Event",296],["T_NS_SEPARATOR","\\",296],["T_STRING","ManagerInterface",296],["T_WHITESPACE"," ",296],["T_VARIABLE","$eventManager",296],",",["T_WHITESPACE","\n        ",296],["T_NS_SEPARATOR","\\",297],["T_STRING","Magento",297],["T_NS_SEPARATOR","\\",297],["T_STRING","Eav",297],["T_NS_SEPARATOR","\\",297],["T_STRING","Model",297],["T_NS_SEPARATOR","\\",297],["T_STRING","Config",297],["T_WHITESPACE"," ",297],["T_VARIABLE","$eavConfig",297],",",["T_WHITESPACE","\n        ",297],["T_NS_SEPARATOR","\\",298],["T_STRING","Magento",298],["T_NS_SEPARATOR","\\",298],["T_STRING","Framework",298],["T_NS_SEPARATOR","\\",298],["T_STRING","App",298],["T_NS_SEPARATOR","\\",298],["T_STRING","ResourceConnection",298],["T_WHITESPACE"," ",298],["T_VARIABLE","$resource",298],",",["T_WHITESPACE","\n        ",298],["T_NS_SEPARATOR","\\",299],["T_STRING","Magento",299],["T_NS_SEPARATOR","\\",299],["T_STRING","Eav",299],["T_NS_SEPARATOR","\\",299],["T_STRING","Model",299],["T_NS_SEPARATOR","\\",299],["T_STRING","EntityFactory",299],["T_WHITESPACE"," ",299],["T_VARIABLE","$eavEntityFactory",299],",",["T_WHITESPACE","\n        ",299],["T_NS_SEPARATOR","\\",300],["T_STRING","Magento",300],["T_NS_SEPARATOR","\\",300],["T_STRING","Catalog",300],["T_NS_SEPARATOR","\\",300],["T_STRING","Model",300],["T_NS_SEPARATOR","\\",300],["T_STRING","ResourceModel",300],["T_NS_SEPARATOR","\\",300],["T_STRING","Helper",300],["T_WHITESPACE"," ",300],["T_VARIABLE","$resourceHelper",300],",",["T_WHITESPACE","\n        ",300],["T_NS_SEPARATOR","\\",301],["T_STRING","Magento",301],["T_NS_SEPARATOR","\\",301],["T_STRING","Framework",301],["T_NS_SEPARATOR","\\",301],["T_STRING","Validator",301],["T_NS_SEPARATOR","\\",301],["T_STRING","UniversalFactory",301],["T_WHITESPACE"," ",301],["T_VARIABLE","$universalFactory",301],",",["T_WHITESPACE","\n        ",301],["T_NS_SEPARATOR","\\",302],["T_STRING","Magento",302],["T_NS_SEPARATOR","\\",302],["T_STRING","Store",302],["T_NS_SEPARATOR","\\",302],["T_STRING","Model",302],["T_NS_SEPARATOR","\\",302],["T_STRING","StoreManagerInterface",302],["T_WHITESPACE"," ",302],["T_VARIABLE","$storeManager",302],",",["T_WHITESPACE","\n        ",302],["T_NS_SEPARATOR","\\",303],["T_STRING","Magento",303],["T_NS_SEPARATOR","\\",303],["T_STRING","Framework",303],["T_NS_SEPARATOR","\\",303],["T_STRING","Module",303],["T_NS_SEPARATOR","\\",303],["T_STRING","Manager",303],["T_WHITESPACE"," ",303],["T_VARIABLE","$moduleManager",303],",",["T_WHITESPACE","\n        ",303],["T_NS_SEPARATOR","\\",304],["T_STRING","Magento",304],["T_NS_SEPARATOR","\\",304],["T_STRING","Catalog",304],["T_NS_SEPARATOR","\\",304],["T_STRING","Model",304],["T_NS_SEPARATOR","\\",304],["T_STRING","Indexer",304],["T_NS_SEPARATOR","\\",304],["T_STRING","Product",304],["T_NS_SEPARATOR","\\",304],["T_STRING","Flat",304],["T_NS_SEPARATOR","\\",304],["T_STRING","State",304],["T_WHITESPACE"," ",304],["T_VARIABLE","$catalogProductFlatState",304],",",["T_WHITESPACE","\n        ",304],["T_NS_SEPARATOR","\\",305],["T_STRING","Magento",305],["T_NS_SEPARATOR","\\",305],["T_STRING","Framework",305],["T_NS_SEPARATOR","\\",305],["T_STRING","App",305],["T_NS_SEPARATOR","\\",305],["T_STRING","Config",305],["T_NS_SEPARATOR","\\",305],["T_STRING","ScopeConfigInterface",305],["T_WHITESPACE"," ",305],["T_VARIABLE","$scopeConfig",305],",",["T_WHITESPACE","\n        ",305],["T_NS_SEPARATOR","\\",306],["T_STRING","Magento",306],["T_NS_SEPARATOR","\\",306],["T_STRING","Catalog",306],["T_NS_SEPARATOR","\\",306],["T_STRING","Model",306],["T_NS_SEPARATOR","\\",306],["T_STRING","Product",306],["T_NS_SEPARATOR","\\",306],["T_STRING","OptionFactory",306],["T_WHITESPACE"," ",306],["T_VARIABLE","$productOptionFactory",306],",",["T_WHITESPACE","\n        ",306],["T_NS_SEPARATOR","\\",307],["T_STRING","Magento",307],["T_NS_SEPARATOR","\\",307],["T_STRING","Catalog",307],["T_NS_SEPARATOR","\\",307],["T_STRING","Model",307],["T_NS_SEPARATOR","\\",307],["T_STRING","ResourceModel",307],["T_NS_SEPARATOR","\\",307],["T_STRING","Url",307],["T_WHITESPACE"," ",307],["T_VARIABLE","$catalogUrl",307],",",["T_WHITESPACE","\n        ",307],["T_NS_SEPARATOR","\\",308],["T_STRING","Magento",308],["T_NS_SEPARATOR","\\",308],["T_STRING","Framework",308],["T_NS_SEPARATOR","\\",308],["T_STRING","Stdlib",308],["T_NS_SEPARATOR","\\",308],["T_STRING","DateTime",308],["T_NS_SEPARATOR","\\",308],["T_STRING","TimezoneInterface",308],["T_WHITESPACE"," ",308],["T_VARIABLE","$localeDate",308],",",["T_WHITESPACE","\n        ",308],["T_NS_SEPARATOR","\\",309],["T_STRING","Magento",309],["T_NS_SEPARATOR","\\",309],["T_STRING","Customer",309],["T_NS_SEPARATOR","\\",309],["T_STRING","Model",309],["T_NS_SEPARATOR","\\",309],["T_STRING","Session",309],["T_WHITESPACE"," ",309],["T_VARIABLE","$customerSession",309],",",["T_WHITESPACE","\n        ",309],["T_NS_SEPARATOR","\\",310],["T_STRING","Magento",310],["T_NS_SEPARATOR","\\",310],["T_STRING","Framework",310],["T_NS_SEPARATOR","\\",310],["T_STRING","Stdlib",310],["T_NS_SEPARATOR","\\",310],["T_STRING","DateTime",310],["T_WHITESPACE"," ",310],["T_VARIABLE","$dateTime",310],",",["T_WHITESPACE","\n        ",310],["T_STRING","GroupManagementInterface",311],["T_WHITESPACE"," ",311],["T_VARIABLE","$groupManagement",311],",",["T_WHITESPACE","\n        ",311],["T_NS_SEPARATOR","\\",312],["T_STRING","Magento",312],["T_NS_SEPARATOR","\\",312],["T_STRING","Framework",312],["T_NS_SEPARATOR","\\",312],["T_STRING","DB",312],["T_NS_SEPARATOR","\\",312],["T_STRING","Adapter",312],["T_NS_SEPARATOR","\\",312],["T_STRING","AdapterInterface",312],["T_WHITESPACE"," ",312],["T_VARIABLE","$connection",312],["T_WHITESPACE"," ",312],"=",["T_WHITESPACE"," ",312],["T_STRING","null",312],",",["T_WHITESPACE","\n        ",312],["T_STRING","ProductLimitationFactory",313],["T_WHITESPACE"," ",313],["T_VARIABLE","$productLimitationFactory",313],["T_WHITESPACE"," ",313],"=",["T_WHITESPACE"," ",313],["T_STRING","null",313],",",["T_WHITESPACE","\n        ",313],["T_STRING","MetadataPool",314],["T_WHITESPACE"," ",314],["T_VARIABLE","$metadataPool",314],["T_WHITESPACE"," ",314],"=",["T_WHITESPACE"," ",314],["T_STRING","null",314],["T_WHITESPACE","\n    ",314],")",["T_WHITESPACE"," ",315],"{",["T_WHITESPACE","\n        ",315],["T_VARIABLE","$this",316],["T_OBJECT_OPERATOR","->",316],["T_STRING","moduleManager",316],["T_WHITESPACE"," ",316],"=",["T_WHITESPACE"," ",316],["T_VARIABLE","$moduleManager",316],";",["T_WHITESPACE","\n        ",316],["T_VARIABLE","$this",317],["T_OBJECT_OPERATOR","->",317],["T_STRING","_catalogProductFlatState",317],["T_WHITESPACE"," ",317],"=",["T_WHITESPACE"," ",317],["T_VARIABLE","$catalogProductFlatState",317],";",["T_WHITESPACE","\n        ",317],["T_VARIABLE","$this",318],["T_OBJECT_OPERATOR","->",318],["T_STRING","_scopeConfig",318],["T_WHITESPACE"," ",318],"=",["T_WHITESPACE"," ",318],["T_VARIABLE","$scopeConfig",318],";",["T_WHITESPACE","\n        ",318],["T_VARIABLE","$this",319],["T_OBJECT_OPERATOR","->",319],["T_STRING","_productOptionFactory",319],["T_WHITESPACE"," ",319],"=",["T_WHITESPACE"," ",319],["T_VARIABLE","$productOptionFactory",319],";",["T_WHITESPACE","\n        ",319],["T_VARIABLE","$this",320],["T_OBJECT_OPERATOR","->",320],["T_STRING","_catalogUrl",320],["T_WHITESPACE"," ",320],"=",["T_WHITESPACE"," ",320],["T_VARIABLE","$catalogUrl",320],";",["T_WHITESPACE","\n        ",320],["T_VARIABLE","$this",321],["T_OBJECT_OPERATOR","->",321],["T_STRING","_localeDate",321],["T_WHITESPACE"," ",321],"=",["T_WHITESPACE"," ",321],["T_VARIABLE","$localeDate",321],";",["T_WHITESPACE","\n        ",321],["T_VARIABLE","$this",322],["T_OBJECT_OPERATOR","->",322],["T_STRING","_customerSession",322],["T_WHITESPACE"," ",322],"=",["T_WHITESPACE"," ",322],["T_VARIABLE","$customerSession",322],";",["T_WHITESPACE","\n        ",322],["T_VARIABLE","$this",323],["T_OBJECT_OPERATOR","->",323],["T_STRING","_resourceHelper",323],["T_WHITESPACE"," ",323],"=",["T_WHITESPACE"," ",323],["T_VARIABLE","$resourceHelper",323],";",["T_WHITESPACE","\n        ",323],["T_VARIABLE","$this",324],["T_OBJECT_OPERATOR","->",324],["T_STRING","dateTime",324],["T_WHITESPACE"," ",324],"=",["T_WHITESPACE"," ",324],["T_VARIABLE","$dateTime",324],";",["T_WHITESPACE","\n        ",324],["T_VARIABLE","$this",325],["T_OBJECT_OPERATOR","->",325],["T_STRING","_groupManagement",325],["T_WHITESPACE"," ",325],"=",["T_WHITESPACE"," ",325],["T_VARIABLE","$groupManagement",325],";",["T_WHITESPACE","\n        ",325],["T_VARIABLE","$productLimitationFactory",326],["T_WHITESPACE"," ",326],"=",["T_WHITESPACE"," ",326],["T_VARIABLE","$productLimitationFactory",326],["T_WHITESPACE"," ",326],"?",":",["T_WHITESPACE"," ",326],["T_STRING","ObjectManager",326],["T_DOUBLE_COLON","::",326],["T_STRING","getInstance",326],"(",")",["T_OBJECT_OPERATOR","->",326],["T_STRING","get",326],"(",["T_WHITESPACE","\n            ",326],["T_NS_SEPARATOR","\\",327],["T_STRING","Magento",327],["T_NS_SEPARATOR","\\",327],["T_STRING","Catalog",327],["T_NS_SEPARATOR","\\",327],["T_STRING","Model",327],["T_NS_SEPARATOR","\\",327],["T_STRING","ResourceModel",327],["T_NS_SEPARATOR","\\",327],["T_STRING","Product",327],["T_NS_SEPARATOR","\\",327],["T_STRING","Collection",327],["T_NS_SEPARATOR","\\",327],["T_STRING","ProductLimitationFactory",327],["T_DOUBLE_COLON","::",327],["T_CLASS","class",327],["T_WHITESPACE","\n        ",327],")",";",["T_WHITESPACE","\n        ",328],["T_VARIABLE","$this",329],["T_OBJECT_OPERATOR","->",329],["T_STRING","_productLimitationFilters",329],["T_WHITESPACE"," ",329],"=",["T_WHITESPACE"," ",329],["T_VARIABLE","$productLimitationFactory",329],["T_OBJECT_OPERATOR","->",329],["T_STRING","create",329],"(",")",";",["T_WHITESPACE","\n        ",329],["T_VARIABLE","$this",330],["T_OBJECT_OPERATOR","->",330],["T_STRING","metadataPool",330],["T_WHITESPACE"," ",330],"=",["T_WHITESPACE"," ",330],["T_VARIABLE","$metadataPool",330],["T_WHITESPACE"," ",330],"?",":",["T_WHITESPACE"," ",330],["T_STRING","ObjectManager",330],["T_DOUBLE_COLON","::",330],["T_STRING","getInstance",330],"(",")",["T_OBJECT_OPERATOR","->",330],["T_STRING","get",330],"(",["T_STRING","MetadataPool",330],["T_DOUBLE_COLON","::",330],["T_CLASS","class",330],")",";",["T_WHITESPACE","\n        ",330],["T_STRING","parent",331],["T_DOUBLE_COLON","::",331],["T_STRING","__construct",331],"(",["T_WHITESPACE","\n            ",331],["T_VARIABLE","$entityFactory",332],",",["T_WHITESPACE","\n            ",332],["T_VARIABLE","$logger",333],",",["T_WHITESPACE","\n            ",333],["T_VARIABLE","$fetchStrategy",334],",",["T_WHITESPACE","\n            ",334],["T_VARIABLE","$eventManager",335],",",["T_WHITESPACE","\n            ",335],["T_VARIABLE","$eavConfig",336],",",["T_WHITESPACE","\n            ",336],["T_VARIABLE","$resource",337],",",["T_WHITESPACE","\n            ",337],["T_VARIABLE","$eavEntityFactory",338],",",["T_WHITESPACE","\n            ",338],["T_VARIABLE","$resourceHelper",339],",",["T_WHITESPACE","\n            ",339],["T_VARIABLE","$universalFactory",340],",",["T_WHITESPACE","\n            ",340],["T_VARIABLE","$storeManager",341],",",["T_WHITESPACE","\n            ",341],["T_VARIABLE","$connection",342],["T_WHITESPACE","\n        ",342],")",";",["T_WHITESPACE","\n    ",343],"}",["T_WHITESPACE","\n\n    ",344],["T_DOC_COMMENT","\/**\n     * Get cloned Select after dispatching 'catalog_prepare_price_select' event\n     *\n     * @return \\Magento\\Framework\\DB\\Select\n     *\/",346],["T_WHITESPACE","\n    ",350],["T_PUBLIC","public",351],["T_WHITESPACE"," ",351],["T_FUNCTION","function",351],["T_WHITESPACE"," ",351],["T_STRING","getCatalogPreparedSelect",351],"(",")",["T_WHITESPACE","\n    ",351],"{",["T_WHITESPACE","\n        ",352],["T_RETURN","return",353],["T_WHITESPACE"," ",353],["T_VARIABLE","$this",353],["T_OBJECT_OPERATOR","->",353],["T_STRING","_catalogPreparePriceSelect",353],";",["T_WHITESPACE","\n    ",353],"}",["T_WHITESPACE","\n\n    ",354],["T_DOC_COMMENT","\/**\n     * Prepare additional price expression sql part\n     *\n     * @param \\Magento\\Framework\\DB\\Select $select\n     * @return $this\n     *\/",356],["T_WHITESPACE","\n    ",361],["T_PROTECTED","protected",362],["T_WHITESPACE"," ",362],["T_FUNCTION","function",362],["T_WHITESPACE"," ",362],["T_STRING","_preparePriceExpressionParameters",362],"(",["T_VARIABLE","$select",362],")",["T_WHITESPACE","\n    ",362],"{",["T_WHITESPACE","\n        ",363],["T_COMMENT","\/\/ prepare response object for event\n",364],["T_WHITESPACE","        ",365],["T_VARIABLE","$response",365],["T_WHITESPACE"," ",365],"=",["T_WHITESPACE"," ",365],["T_NEW","new",365],["T_WHITESPACE"," ",365],["T_NS_SEPARATOR","\\",365],["T_STRING","Magento",365],["T_NS_SEPARATOR","\\",365],["T_STRING","Framework",365],["T_NS_SEPARATOR","\\",365],["T_STRING","DataObject",365],"(",")",";",["T_WHITESPACE","\n        ",365],["T_VARIABLE","$response",366],["T_OBJECT_OPERATOR","->",366],["T_STRING","setAdditionalCalculations",366],"(","[","]",")",";",["T_WHITESPACE","\n        ",366],["T_VARIABLE","$tableAliases",367],["T_WHITESPACE"," ",367],"=",["T_WHITESPACE"," ",367],["T_STRING","array_keys",367],"(",["T_VARIABLE","$select",367],["T_OBJECT_OPERATOR","->",367],["T_STRING","getPart",367],"(",["T_NS_SEPARATOR","\\",367],["T_STRING","Magento",367],["T_NS_SEPARATOR","\\",367],["T_STRING","Framework",367],["T_NS_SEPARATOR","\\",367],["T_STRING","DB",367],["T_NS_SEPARATOR","\\",367],["T_STRING","Select",367],["T_DOUBLE_COLON","::",367],["T_STRING","FROM",367],")",")",";",["T_WHITESPACE","\n        ",367],["T_IF","if",368],["T_WHITESPACE"," ",368],"(",["T_STRING","in_array",368],"(",["T_STRING","self",368],["T_DOUBLE_COLON","::",368],["T_STRING","INDEX_TABLE_ALIAS",368],",",["T_WHITESPACE"," ",368],["T_VARIABLE","$tableAliases",368],")",")",["T_WHITESPACE"," ",368],"{",["T_WHITESPACE","\n            ",368],["T_VARIABLE","$table",369],["T_WHITESPACE"," ",369],"=",["T_WHITESPACE"," ",369],["T_STRING","self",369],["T_DOUBLE_COLON","::",369],["T_STRING","INDEX_TABLE_ALIAS",369],";",["T_WHITESPACE","\n        ",369],"}",["T_WHITESPACE"," ",370],["T_ELSE","else",370],["T_WHITESPACE"," ",370],"{",["T_WHITESPACE","\n            ",370],["T_VARIABLE","$table",371],["T_WHITESPACE"," ",371],"=",["T_WHITESPACE"," ",371],["T_STRING","reset",371],"(",["T_VARIABLE","$tableAliases",371],")",";",["T_WHITESPACE","\n        ",371],"}",["T_WHITESPACE","\n\n        ",372],["T_COMMENT","\/\/ prepare event arguments\n",374],["T_WHITESPACE","        ",375],["T_VARIABLE","$eventArgs",375],["T_WHITESPACE"," ",375],"=",["T_WHITESPACE"," ",375],"[",["T_WHITESPACE","\n            ",375],["T_CONSTANT_ENCAPSED_STRING","'select'",376],["T_WHITESPACE"," ",376],["T_DOUBLE_ARROW","=>",376],["T_WHITESPACE"," ",376],["T_VARIABLE","$select",376],",",["T_WHITESPACE","\n            ",376],["T_CONSTANT_ENCAPSED_STRING","'table'",377],["T_WHITESPACE"," ",377],["T_DOUBLE_ARROW","=>",377],["T_WHITESPACE"," ",377],["T_VARIABLE","$table",377],",",["T_WHITESPACE","\n            ",377],["T_CONSTANT_ENCAPSED_STRING","'store_id'",378],["T_WHITESPACE"," ",378],["T_DOUBLE_ARROW","=>",378],["T_WHITESPACE"," ",378],["T_VARIABLE","$this",378],["T_OBJECT_OPERATOR","->",378],["T_STRING","getStoreId",378],"(",")",",",["T_WHITESPACE","\n            ",378],["T_CONSTANT_ENCAPSED_STRING","'response_object'",379],["T_WHITESPACE"," ",379],["T_DOUBLE_ARROW","=>",379],["T_WHITESPACE"," ",379],["T_VARIABLE","$response",379],",",["T_WHITESPACE","\n        ",379],"]",";",["T_WHITESPACE","\n\n        ",380],["T_VARIABLE","$this",382],["T_OBJECT_OPERATOR","->",382],["T_STRING","_eventManager",382],["T_OBJECT_OPERATOR","->",382],["T_STRING","dispatch",382],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog_prepare_price_select'",382],",",["T_WHITESPACE"," ",382],["T_VARIABLE","$eventArgs",382],")",";",["T_WHITESPACE","\n\n        ",382],["T_VARIABLE","$additional",384],["T_WHITESPACE"," ",384],"=",["T_WHITESPACE"," ",384],["T_STRING","join",384],"(",["T_CONSTANT_ENCAPSED_STRING","''",384],",",["T_WHITESPACE"," ",384],["T_VARIABLE","$response",384],["T_OBJECT_OPERATOR","->",384],["T_STRING","getAdditionalCalculations",384],"(",")",")",";",["T_WHITESPACE","\n        ",384],["T_VARIABLE","$this",385],["T_OBJECT_OPERATOR","->",385],["T_STRING","_priceExpression",385],["T_WHITESPACE"," ",385],"=",["T_WHITESPACE"," ",385],["T_VARIABLE","$table",385],["T_WHITESPACE"," ",385],".",["T_WHITESPACE"," ",385],["T_CONSTANT_ENCAPSED_STRING","'.min_price'",385],";",["T_WHITESPACE","\n        ",385],["T_VARIABLE","$this",386],["T_OBJECT_OPERATOR","->",386],["T_STRING","_additionalPriceExpression",386],["T_WHITESPACE"," ",386],"=",["T_WHITESPACE"," ",386],["T_VARIABLE","$additional",386],";",["T_WHITESPACE","\n        ",386],["T_VARIABLE","$this",387],["T_OBJECT_OPERATOR","->",387],["T_STRING","_catalogPreparePriceSelect",387],["T_WHITESPACE"," ",387],"=",["T_WHITESPACE"," ",387],["T_CLONE","clone",387],["T_WHITESPACE"," ",387],["T_VARIABLE","$select",387],";",["T_WHITESPACE","\n\n        ",387],["T_RETURN","return",389],["T_WHITESPACE"," ",389],["T_VARIABLE","$this",389],";",["T_WHITESPACE","\n    ",389],"}",["T_WHITESPACE","\n\n    ",390],["T_DOC_COMMENT","\/**\n     * Get price expression sql part\n     *\n     * @param \\Magento\\Framework\\DB\\Select $select\n     * @return string\n     *\/",392],["T_WHITESPACE","\n    ",397],["T_PUBLIC","public",398],["T_WHITESPACE"," ",398],["T_FUNCTION","function",398],["T_WHITESPACE"," ",398],["T_STRING","getPriceExpression",398],"(",["T_VARIABLE","$select",398],")",["T_WHITESPACE","\n    ",398],"{",["T_WHITESPACE","\n        ",399],["T_COMMENT","\/\/@todo: Add caching of price expresion\n",400],["T_WHITESPACE","        ",401],["T_VARIABLE","$this",401],["T_OBJECT_OPERATOR","->",401],["T_STRING","_preparePriceExpressionParameters",401],"(",["T_VARIABLE","$select",401],")",";",["T_WHITESPACE","\n        ",401],["T_RETURN","return",402],["T_WHITESPACE"," ",402],["T_VARIABLE","$this",402],["T_OBJECT_OPERATOR","->",402],["T_STRING","_priceExpression",402],";",["T_WHITESPACE","\n    ",402],"}",["T_WHITESPACE","\n\n    ",403],["T_DOC_COMMENT","\/**\n     * Get additional price expression sql part\n     *\n     * @param \\Magento\\Framework\\DB\\Select $select\n     * @return string\n     *\/",405],["T_WHITESPACE","\n    ",410],["T_PUBLIC","public",411],["T_WHITESPACE"," ",411],["T_FUNCTION","function",411],["T_WHITESPACE"," ",411],["T_STRING","getAdditionalPriceExpression",411],"(",["T_VARIABLE","$select",411],")",["T_WHITESPACE","\n    ",411],"{",["T_WHITESPACE","\n        ",412],["T_IF","if",413],["T_WHITESPACE"," ",413],"(",["T_STRING","null",413],["T_WHITESPACE"," ",413],["T_IS_IDENTICAL","===",413],["T_WHITESPACE"," ",413],["T_VARIABLE","$this",413],["T_OBJECT_OPERATOR","->",413],["T_STRING","_additionalPriceExpression",413],")",["T_WHITESPACE"," ",413],"{",["T_WHITESPACE","\n            ",413],["T_VARIABLE","$this",414],["T_OBJECT_OPERATOR","->",414],["T_STRING","_preparePriceExpressionParameters",414],"(",["T_VARIABLE","$select",414],")",";",["T_WHITESPACE","\n        ",414],"}",["T_WHITESPACE","\n        ",415],["T_RETURN","return",416],["T_WHITESPACE"," ",416],["T_VARIABLE","$this",416],["T_OBJECT_OPERATOR","->",416],["T_STRING","_additionalPriceExpression",416],";",["T_WHITESPACE","\n    ",416],"}",["T_WHITESPACE","\n\n    ",417],["T_DOC_COMMENT","\/**\n     * Get currency rate\n     *\n     * @return float\n     *\/",419],["T_WHITESPACE","\n    ",423],["T_PUBLIC","public",424],["T_WHITESPACE"," ",424],["T_FUNCTION","function",424],["T_WHITESPACE"," ",424],["T_STRING","getCurrencyRate",424],"(",")",["T_WHITESPACE","\n    ",424],"{",["T_WHITESPACE","\n        ",425],["T_RETURN","return",426],["T_WHITESPACE"," ",426],["T_VARIABLE","$this",426],["T_OBJECT_OPERATOR","->",426],["T_STRING","_storeManager",426],["T_OBJECT_OPERATOR","->",426],["T_STRING","getStore",426],"(",["T_VARIABLE","$this",426],["T_OBJECT_OPERATOR","->",426],["T_STRING","getStoreId",426],"(",")",")",["T_OBJECT_OPERATOR","->",426],["T_STRING","getCurrentCurrencyRate",426],"(",")",";",["T_WHITESPACE","\n    ",426],"}",["T_WHITESPACE","\n\n    ",427],["T_DOC_COMMENT","\/**\n     * Retrieve Catalog Product Flat Helper object\n     *\n     * @return \\Magento\\Catalog\\Model\\Indexer\\Product\\Flat\\State\n     *\/",429],["T_WHITESPACE","\n    ",433],["T_PUBLIC","public",434],["T_WHITESPACE"," ",434],["T_FUNCTION","function",434],["T_WHITESPACE"," ",434],["T_STRING","getFlatState",434],"(",")",["T_WHITESPACE","\n    ",434],"{",["T_WHITESPACE","\n        ",435],["T_RETURN","return",436],["T_WHITESPACE"," ",436],["T_VARIABLE","$this",436],["T_OBJECT_OPERATOR","->",436],["T_STRING","_catalogProductFlatState",436],";",["T_WHITESPACE","\n    ",436],"}",["T_WHITESPACE","\n\n    ",437],["T_DOC_COMMENT","\/**\n     * Retrieve is flat enabled flag\n     * Return always false if magento run admin\n     *\n     * @return bool\n     *\/",439],["T_WHITESPACE","\n    ",444],["T_PUBLIC","public",445],["T_WHITESPACE"," ",445],["T_FUNCTION","function",445],["T_WHITESPACE"," ",445],["T_STRING","isEnabledFlat",445],"(",")",["T_WHITESPACE","\n    ",445],"{",["T_WHITESPACE","\n        ",446],["T_IF","if",447],["T_WHITESPACE"," ",447],"(","!",["T_ISSET","isset",447],"(",["T_VARIABLE","$this",447],["T_OBJECT_OPERATOR","->",447],["T_STRING","_flatEnabled",447],"[",["T_VARIABLE","$this",447],["T_OBJECT_OPERATOR","->",447],["T_STRING","getStoreId",447],"(",")","]",")",")",["T_WHITESPACE"," ",447],"{",["T_WHITESPACE","\n            ",447],["T_VARIABLE","$this",448],["T_OBJECT_OPERATOR","->",448],["T_STRING","_flatEnabled",448],"[",["T_VARIABLE","$this",448],["T_OBJECT_OPERATOR","->",448],["T_STRING","getStoreId",448],"(",")","]",["T_WHITESPACE"," ",448],"=",["T_WHITESPACE"," ",448],["T_VARIABLE","$this",448],["T_OBJECT_OPERATOR","->",448],["T_STRING","getFlatState",448],"(",")",["T_OBJECT_OPERATOR","->",448],["T_STRING","isAvailable",448],"(",")",";",["T_WHITESPACE","\n        ",448],"}",["T_WHITESPACE","\n        ",449],["T_RETURN","return",450],["T_WHITESPACE"," ",450],["T_VARIABLE","$this",450],["T_OBJECT_OPERATOR","->",450],["T_STRING","_flatEnabled",450],"[",["T_VARIABLE","$this",450],["T_OBJECT_OPERATOR","->",450],["T_STRING","getStoreId",450],"(",")","]",";",["T_WHITESPACE","\n    ",450],"}",["T_WHITESPACE","\n\n    ",451],["T_DOC_COMMENT","\/**\n     * Initialize resources\n     *\n     * @return void\n     *\/",453],["T_WHITESPACE","\n    ",457],["T_PROTECTED","protected",458],["T_WHITESPACE"," ",458],["T_FUNCTION","function",458],["T_WHITESPACE"," ",458],["T_STRING","_construct",458],"(",")",["T_WHITESPACE","\n    ",458],"{",["T_WHITESPACE","\n        ",459],["T_IF","if",460],["T_WHITESPACE"," ",460],"(",["T_VARIABLE","$this",460],["T_OBJECT_OPERATOR","->",460],["T_STRING","isEnabledFlat",460],"(",")",")",["T_WHITESPACE"," ",460],"{",["T_WHITESPACE","\n            ",460],["T_VARIABLE","$this",461],["T_OBJECT_OPERATOR","->",461],["T_STRING","_init",461],"(",["T_NS_SEPARATOR","\\",461],["T_STRING","Magento",461],["T_NS_SEPARATOR","\\",461],["T_STRING","Catalog",461],["T_NS_SEPARATOR","\\",461],["T_STRING","Model",461],["T_NS_SEPARATOR","\\",461],["T_STRING","Product",461],["T_DOUBLE_COLON","::",461],["T_CLASS","class",461],",",["T_WHITESPACE"," ",461],["T_NS_SEPARATOR","\\",461],["T_STRING","Magento",461],["T_NS_SEPARATOR","\\",461],["T_STRING","Catalog",461],["T_NS_SEPARATOR","\\",461],["T_STRING","Model",461],["T_NS_SEPARATOR","\\",461],["T_STRING","ResourceModel",461],["T_NS_SEPARATOR","\\",461],["T_STRING","Product",461],["T_NS_SEPARATOR","\\",461],["T_STRING","Flat",461],["T_DOUBLE_COLON","::",461],["T_CLASS","class",461],")",";",["T_WHITESPACE","\n        ",461],"}",["T_WHITESPACE"," ",462],["T_ELSE","else",462],["T_WHITESPACE"," ",462],"{",["T_WHITESPACE","\n            ",462],["T_VARIABLE","$this",463],["T_OBJECT_OPERATOR","->",463],["T_STRING","_init",463],"(",["T_NS_SEPARATOR","\\",463],["T_STRING","Magento",463],["T_NS_SEPARATOR","\\",463],["T_STRING","Catalog",463],["T_NS_SEPARATOR","\\",463],["T_STRING","Model",463],["T_NS_SEPARATOR","\\",463],["T_STRING","Product",463],["T_DOUBLE_COLON","::",463],["T_CLASS","class",463],",",["T_WHITESPACE"," ",463],["T_NS_SEPARATOR","\\",463],["T_STRING","Magento",463],["T_NS_SEPARATOR","\\",463],["T_STRING","Catalog",463],["T_NS_SEPARATOR","\\",463],["T_STRING","Model",463],["T_NS_SEPARATOR","\\",463],["T_STRING","ResourceModel",463],["T_NS_SEPARATOR","\\",463],["T_STRING","Product",463],["T_DOUBLE_COLON","::",463],["T_CLASS","class",463],")",";",["T_WHITESPACE","\n        ",463],"}",["T_WHITESPACE","\n        ",464],["T_VARIABLE","$this",465],["T_OBJECT_OPERATOR","->",465],["T_STRING","_initTables",465],"(",")",";",["T_WHITESPACE","\n    ",465],"}",["T_WHITESPACE","\n\n    ",466],["T_DOC_COMMENT","\/**\n     * Standard resource collection initialization\n     * Needed for child classes\n     *\n     * @param string $model\n     * @param string $entityModel\n     * @return $this\n     *\/",468],["T_WHITESPACE","\n    ",475],["T_PROTECTED","protected",476],["T_WHITESPACE"," ",476],["T_FUNCTION","function",476],["T_WHITESPACE"," ",476],["T_STRING","_init",476],"(",["T_VARIABLE","$model",476],",",["T_WHITESPACE"," ",476],["T_VARIABLE","$entityModel",476],")",["T_WHITESPACE","\n    ",476],"{",["T_WHITESPACE","\n        ",477],["T_IF","if",478],["T_WHITESPACE"," ",478],"(",["T_VARIABLE","$this",478],["T_OBJECT_OPERATOR","->",478],["T_STRING","isEnabledFlat",478],"(",")",")",["T_WHITESPACE"," ",478],"{",["T_WHITESPACE","\n            ",478],["T_VARIABLE","$entityModel",479],["T_WHITESPACE"," ",479],"=",["T_WHITESPACE"," ",479],["T_NS_SEPARATOR","\\",479],["T_STRING","Magento",479],["T_NS_SEPARATOR","\\",479],["T_STRING","Catalog",479],["T_NS_SEPARATOR","\\",479],["T_STRING","Model",479],["T_NS_SEPARATOR","\\",479],["T_STRING","ResourceModel",479],["T_NS_SEPARATOR","\\",479],["T_STRING","Product",479],["T_NS_SEPARATOR","\\",479],["T_STRING","Flat",479],["T_DOUBLE_COLON","::",479],["T_CLASS","class",479],";",["T_WHITESPACE","\n        ",479],"}",["T_WHITESPACE","\n        ",480],["T_RETURN","return",481],["T_WHITESPACE"," ",481],["T_STRING","parent",481],["T_DOUBLE_COLON","::",481],["T_STRING","_init",481],"(",["T_VARIABLE","$model",481],",",["T_WHITESPACE"," ",481],["T_VARIABLE","$entityModel",481],")",";",["T_WHITESPACE","\n    ",481],"}",["T_WHITESPACE","\n\n    ",482],["T_DOC_COMMENT","\/**\n     * Define product website and category product tables\n     *\n     * @return void\n     *\/",484],["T_WHITESPACE","\n    ",488],["T_PROTECTED","protected",489],["T_WHITESPACE"," ",489],["T_FUNCTION","function",489],["T_WHITESPACE"," ",489],["T_STRING","_initTables",489],"(",")",["T_WHITESPACE","\n    ",489],"{",["T_WHITESPACE","\n        ",490],["T_VARIABLE","$this",491],["T_OBJECT_OPERATOR","->",491],["T_STRING","_productWebsiteTable",491],["T_WHITESPACE"," ",491],"=",["T_WHITESPACE"," ",491],["T_VARIABLE","$this",491],["T_OBJECT_OPERATOR","->",491],["T_STRING","getResource",491],"(",")",["T_OBJECT_OPERATOR","->",491],["T_STRING","getTable",491],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog_product_website'",491],")",";",["T_WHITESPACE","\n        ",491],["T_VARIABLE","$this",492],["T_OBJECT_OPERATOR","->",492],["T_STRING","_productCategoryTable",492],["T_WHITESPACE"," ",492],"=",["T_WHITESPACE"," ",492],["T_VARIABLE","$this",492],["T_OBJECT_OPERATOR","->",492],["T_STRING","getResource",492],"(",")",["T_OBJECT_OPERATOR","->",492],["T_STRING","getTable",492],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog_category_product'",492],")",";",["T_WHITESPACE","\n    ",492],"}",["T_WHITESPACE","\n\n    ",493],["T_DOC_COMMENT","\/**\n     * Prepare static entity fields\n     *\n     * @return $this\n     *\/",495],["T_WHITESPACE","\n    ",499],["T_PROTECTED","protected",500],["T_WHITESPACE"," ",500],["T_FUNCTION","function",500],["T_WHITESPACE"," ",500],["T_STRING","_prepareStaticFields",500],"(",")",["T_WHITESPACE","\n    ",500],"{",["T_WHITESPACE","\n        ",501],["T_IF","if",502],["T_WHITESPACE"," ",502],"(",["T_VARIABLE","$this",502],["T_OBJECT_OPERATOR","->",502],["T_STRING","isEnabledFlat",502],"(",")",")",["T_WHITESPACE"," ",502],"{",["T_WHITESPACE","\n            ",502],["T_RETURN","return",503],["T_WHITESPACE"," ",503],["T_VARIABLE","$this",503],";",["T_WHITESPACE","\n        ",503],"}",["T_WHITESPACE","\n        ",504],["T_RETURN","return",505],["T_WHITESPACE"," ",505],["T_STRING","parent",505],["T_DOUBLE_COLON","::",505],["T_STRING","_prepareStaticFields",505],"(",")",";",["T_WHITESPACE","\n    ",505],"}",["T_WHITESPACE","\n\n    ",506],["T_DOC_COMMENT","\/**\n     * Retrieve collection empty item\n     * Redeclared for specifying id field name without getting resource model inside model\n     *\n     * @return \\Magento\\Framework\\DataObject\n     *\/",508],["T_WHITESPACE","\n    ",513],["T_PUBLIC","public",514],["T_WHITESPACE"," ",514],["T_FUNCTION","function",514],["T_WHITESPACE"," ",514],["T_STRING","getNewEmptyItem",514],"(",")",["T_WHITESPACE","\n    ",514],"{",["T_WHITESPACE","\n        ",515],["T_VARIABLE","$object",516],["T_WHITESPACE"," ",516],"=",["T_WHITESPACE"," ",516],["T_STRING","parent",516],["T_DOUBLE_COLON","::",516],["T_STRING","getNewEmptyItem",516],"(",")",";",["T_WHITESPACE","\n        ",516],["T_IF","if",517],["T_WHITESPACE"," ",517],"(",["T_VARIABLE","$this",517],["T_OBJECT_OPERATOR","->",517],["T_STRING","isEnabledFlat",517],"(",")",")",["T_WHITESPACE"," ",517],"{",["T_WHITESPACE","\n            ",517],["T_VARIABLE","$object",518],["T_OBJECT_OPERATOR","->",518],["T_STRING","setIdFieldName",518],"(",["T_VARIABLE","$this",518],["T_OBJECT_OPERATOR","->",518],["T_STRING","getEntity",518],"(",")",["T_OBJECT_OPERATOR","->",518],["T_STRING","getIdFieldName",518],"(",")",")",";",["T_WHITESPACE","\n        ",518],"}",["T_WHITESPACE","\n        ",519],["T_RETURN","return",520],["T_WHITESPACE"," ",520],["T_VARIABLE","$object",520],";",["T_WHITESPACE","\n    ",520],"}",["T_WHITESPACE","\n\n    ",521],["T_DOC_COMMENT","\/**\n     * Set entity to use for attributes\n     *\n     * @param \\Magento\\Eav\\Model\\Entity\\AbstractEntity $entity\n     * @return $this\n     *\/",523],["T_WHITESPACE","\n    ",528],["T_PUBLIC","public",529],["T_WHITESPACE"," ",529],["T_FUNCTION","function",529],["T_WHITESPACE"," ",529],["T_STRING","setEntity",529],"(",["T_VARIABLE","$entity",529],")",["T_WHITESPACE","\n    ",529],"{",["T_WHITESPACE","\n        ",530],["T_IF","if",531],["T_WHITESPACE"," ",531],"(",["T_VARIABLE","$this",531],["T_OBJECT_OPERATOR","->",531],["T_STRING","isEnabledFlat",531],"(",")",["T_WHITESPACE"," ",531],["T_BOOLEAN_AND","&&",531],["T_WHITESPACE"," ",531],["T_VARIABLE","$entity",531],["T_WHITESPACE"," ",531],["T_INSTANCEOF","instanceof",531],["T_WHITESPACE"," ",531],["T_NS_SEPARATOR","\\",531],["T_STRING","Magento",531],["T_NS_SEPARATOR","\\",531],["T_STRING","Framework",531],["T_NS_SEPARATOR","\\",531],["T_STRING","Model",531],["T_NS_SEPARATOR","\\",531],["T_STRING","ResourceModel",531],["T_NS_SEPARATOR","\\",531],["T_STRING","Db",531],["T_NS_SEPARATOR","\\",531],["T_STRING","AbstractDb",531],")",["T_WHITESPACE"," ",531],"{",["T_WHITESPACE","\n            ",531],["T_VARIABLE","$this",532],["T_OBJECT_OPERATOR","->",532],["T_STRING","_entity",532],["T_WHITESPACE"," ",532],"=",["T_WHITESPACE"," ",532],["T_VARIABLE","$entity",532],";",["T_WHITESPACE","\n            ",532],["T_RETURN","return",533],["T_WHITESPACE"," ",533],["T_VARIABLE","$this",533],";",["T_WHITESPACE","\n        ",533],"}",["T_WHITESPACE","\n        ",534],["T_RETURN","return",535],["T_WHITESPACE"," ",535],["T_STRING","parent",535],["T_DOUBLE_COLON","::",535],["T_STRING","setEntity",535],"(",["T_VARIABLE","$entity",535],")",";",["T_WHITESPACE","\n    ",535],"}",["T_WHITESPACE","\n\n    ",536],["T_DOC_COMMENT","\/**\n     * Set Store scope for collection\n     *\n     * @param mixed $store\n     * @return $this\n     *\/",538],["T_WHITESPACE","\n    ",543],["T_PUBLIC","public",544],["T_WHITESPACE"," ",544],["T_FUNCTION","function",544],["T_WHITESPACE"," ",544],["T_STRING","setStore",544],"(",["T_VARIABLE","$store",544],")",["T_WHITESPACE","\n    ",544],"{",["T_WHITESPACE","\n        ",545],["T_STRING","parent",546],["T_DOUBLE_COLON","::",546],["T_STRING","setStore",546],"(",["T_VARIABLE","$store",546],")",";",["T_WHITESPACE","\n        ",546],["T_IF","if",547],["T_WHITESPACE"," ",547],"(",["T_VARIABLE","$this",547],["T_OBJECT_OPERATOR","->",547],["T_STRING","isEnabledFlat",547],"(",")",")",["T_WHITESPACE"," ",547],"{",["T_WHITESPACE","\n            ",547],["T_VARIABLE","$this",548],["T_OBJECT_OPERATOR","->",548],["T_STRING","getEntity",548],"(",")",["T_OBJECT_OPERATOR","->",548],["T_STRING","setStoreId",548],"(",["T_VARIABLE","$this",548],["T_OBJECT_OPERATOR","->",548],["T_STRING","getStoreId",548],"(",")",")",";",["T_WHITESPACE","\n        ",548],"}",["T_WHITESPACE","\n        ",549],["T_RETURN","return",550],["T_WHITESPACE"," ",550],["T_VARIABLE","$this",550],";",["T_WHITESPACE","\n    ",550],"}",["T_WHITESPACE","\n\n    ",551],["T_DOC_COMMENT","\/**\n     * Initialize collection select\n     * Redeclared for remove entity_type_id condition\n     * in catalog_product_entity we store just products\n     *\n     * @return $this\n     *\/",553],["T_WHITESPACE","\n    ",559],["T_PROTECTED","protected",560],["T_WHITESPACE"," ",560],["T_FUNCTION","function",560],["T_WHITESPACE"," ",560],["T_STRING","_initSelect",560],"(",")",["T_WHITESPACE","\n    ",560],"{",["T_WHITESPACE","\n        ",561],["T_IF","if",562],["T_WHITESPACE"," ",562],"(",["T_VARIABLE","$this",562],["T_OBJECT_OPERATOR","->",562],["T_STRING","isEnabledFlat",562],"(",")",")",["T_WHITESPACE"," ",562],"{",["T_WHITESPACE","\n            ",562],["T_VARIABLE","$this",563],["T_OBJECT_OPERATOR","->",563],["T_STRING","getSelect",563],"(",")",["T_OBJECT_OPERATOR","->",563],["T_STRING","from",563],"(",["T_WHITESPACE","\n                ",563],"[",["T_STRING","self",564],["T_DOUBLE_COLON","::",564],["T_STRING","MAIN_TABLE_ALIAS",564],["T_WHITESPACE"," ",564],["T_DOUBLE_ARROW","=>",564],["T_WHITESPACE"," ",564],["T_VARIABLE","$this",564],["T_OBJECT_OPERATOR","->",564],["T_STRING","getEntity",564],"(",")",["T_OBJECT_OPERATOR","->",564],["T_STRING","getFlatTableName",564],"(",")","]",",",["T_WHITESPACE","\n                ",564],["T_STRING","null",565],["T_WHITESPACE","\n            ",565],")",["T_OBJECT_OPERATOR","->",566],["T_STRING","columns",566],"(",["T_WHITESPACE","\n                ",566],"[",["T_CONSTANT_ENCAPSED_STRING","'status'",567],["T_WHITESPACE"," ",567],["T_DOUBLE_ARROW","=>",567],["T_WHITESPACE"," ",567],["T_NEW","new",567],["T_WHITESPACE"," ",567],["T_NS_SEPARATOR","\\",567],["T_STRING","Zend_Db_Expr",567],"(",["T_STRING","ProductStatus",567],["T_DOUBLE_COLON","::",567],["T_STRING","STATUS_ENABLED",567],")","]",["T_WHITESPACE","\n            ",567],")",";",["T_WHITESPACE","\n            ",568],["T_VARIABLE","$this",569],["T_OBJECT_OPERATOR","->",569],["T_STRING","addAttributeToSelect",569],"(",["T_VARIABLE","$this",569],["T_OBJECT_OPERATOR","->",569],["T_STRING","getResource",569],"(",")",["T_OBJECT_OPERATOR","->",569],["T_STRING","getDefaultAttributes",569],"(",")",")",";",["T_WHITESPACE","\n            ",569],["T_IF","if",570],["T_WHITESPACE"," ",570],"(",["T_VARIABLE","$this",570],["T_OBJECT_OPERATOR","->",570],["T_STRING","_catalogProductFlatState",570],["T_OBJECT_OPERATOR","->",570],["T_STRING","getFlatIndexerHelper",570],"(",")",["T_OBJECT_OPERATOR","->",570],["T_STRING","isAddChildData",570],"(",")",")",["T_WHITESPACE"," ",570],"{",["T_WHITESPACE","\n                ",570],["T_VARIABLE","$this",571],["T_OBJECT_OPERATOR","->",571],["T_STRING","getSelect",571],"(",")",["T_OBJECT_OPERATOR","->",571],["T_STRING","where",571],"(",["T_CONSTANT_ENCAPSED_STRING","'e.is_child=?'",571],",",["T_WHITESPACE"," ",571],["T_LNUMBER","0",571],")",";",["T_WHITESPACE","\n                ",571],["T_VARIABLE","$this",572],["T_OBJECT_OPERATOR","->",572],["T_STRING","addAttributeToSelect",572],"(","[",["T_CONSTANT_ENCAPSED_STRING","'child_id'",572],",",["T_WHITESPACE"," ",572],["T_CONSTANT_ENCAPSED_STRING","'is_child'",572],"]",")",";",["T_WHITESPACE","\n            ",572],"}",["T_WHITESPACE","\n        ",573],"}",["T_WHITESPACE"," ",574],["T_ELSE","else",574],["T_WHITESPACE"," ",574],"{",["T_WHITESPACE","\n            ",574],["T_VARIABLE","$this",575],["T_OBJECT_OPERATOR","->",575],["T_STRING","getSelect",575],"(",")",["T_OBJECT_OPERATOR","->",575],["T_STRING","from",575],"(","[",["T_STRING","self",575],["T_DOUBLE_COLON","::",575],["T_STRING","MAIN_TABLE_ALIAS",575],["T_WHITESPACE"," ",575],["T_DOUBLE_ARROW","=>",575],["T_WHITESPACE"," ",575],["T_VARIABLE","$this",575],["T_OBJECT_OPERATOR","->",575],["T_STRING","getEntity",575],"(",")",["T_OBJECT_OPERATOR","->",575],["T_STRING","getEntityTable",575],"(",")","]",")",";",["T_WHITESPACE","\n        ",575],"}",["T_WHITESPACE","\n        ",576],["T_RETURN","return",577],["T_WHITESPACE"," ",577],["T_VARIABLE","$this",577],";",["T_WHITESPACE","\n    ",577],"}",["T_WHITESPACE","\n\n    ",578],["T_DOC_COMMENT","\/**\n     * Load attributes into loaded entities\n     *\n     * @param bool $printQuery\n     * @param bool $logQuery\n     * @return $this\n     *\/",580],["T_WHITESPACE","\n    ",586],["T_PUBLIC","public",587],["T_WHITESPACE"," ",587],["T_FUNCTION","function",587],["T_WHITESPACE"," ",587],["T_STRING","_loadAttributes",587],"(",["T_VARIABLE","$printQuery",587],["T_WHITESPACE"," ",587],"=",["T_WHITESPACE"," ",587],["T_STRING","false",587],",",["T_WHITESPACE"," ",587],["T_VARIABLE","$logQuery",587],["T_WHITESPACE"," ",587],"=",["T_WHITESPACE"," ",587],["T_STRING","false",587],")",["T_WHITESPACE","\n    ",587],"{",["T_WHITESPACE","\n        ",588],["T_IF","if",589],["T_WHITESPACE"," ",589],"(",["T_VARIABLE","$this",589],["T_OBJECT_OPERATOR","->",589],["T_STRING","isEnabledFlat",589],"(",")",")",["T_WHITESPACE"," ",589],"{",["T_WHITESPACE","\n            ",589],["T_RETURN","return",590],["T_WHITESPACE"," ",590],["T_VARIABLE","$this",590],";",["T_WHITESPACE","\n        ",590],"}",["T_WHITESPACE","\n        ",591],["T_RETURN","return",592],["T_WHITESPACE"," ",592],["T_STRING","parent",592],["T_DOUBLE_COLON","::",592],["T_STRING","_loadAttributes",592],"(",["T_VARIABLE","$printQuery",592],",",["T_WHITESPACE"," ",592],["T_VARIABLE","$logQuery",592],")",";",["T_WHITESPACE","\n    ",592],"}",["T_WHITESPACE","\n\n    ",593],["T_DOC_COMMENT","\/**\n     * Add attribute to entities in collection\n     * If $attribute=='*' select all attributes\n     *\n     * @param array|string|integer|\\Magento\\Framework\\App\\Config\\Element $attribute\n     * @param bool|string $joinType\n     * @return $this\n     *\/",595],["T_WHITESPACE","\n    ",602],["T_PUBLIC","public",603],["T_WHITESPACE"," ",603],["T_FUNCTION","function",603],["T_WHITESPACE"," ",603],["T_STRING","addAttributeToSelect",603],"(",["T_VARIABLE","$attribute",603],",",["T_WHITESPACE"," ",603],["T_VARIABLE","$joinType",603],["T_WHITESPACE"," ",603],"=",["T_WHITESPACE"," ",603],["T_STRING","false",603],")",["T_WHITESPACE","\n    ",603],"{",["T_WHITESPACE","\n        ",604],["T_IF","if",605],["T_WHITESPACE"," ",605],"(",["T_VARIABLE","$this",605],["T_OBJECT_OPERATOR","->",605],["T_STRING","isEnabledFlat",605],"(",")",")",["T_WHITESPACE"," ",605],"{",["T_WHITESPACE","\n            ",605],["T_IF","if",606],["T_WHITESPACE"," ",606],"(","!",["T_STRING","is_array",606],"(",["T_VARIABLE","$attribute",606],")",")",["T_WHITESPACE"," ",606],"{",["T_WHITESPACE","\n                ",606],["T_VARIABLE","$attribute",607],["T_WHITESPACE"," ",607],"=",["T_WHITESPACE"," ",607],"[",["T_VARIABLE","$attribute",607],"]",";",["T_WHITESPACE","\n            ",607],"}",["T_WHITESPACE","\n            ",608],["T_FOREACH","foreach",609],["T_WHITESPACE"," ",609],"(",["T_VARIABLE","$attribute",609],["T_WHITESPACE"," ",609],["T_AS","as",609],["T_WHITESPACE"," ",609],["T_VARIABLE","$attributeCode",609],")",["T_WHITESPACE"," ",609],"{",["T_WHITESPACE","\n                ",609],["T_IF","if",610],["T_WHITESPACE"," ",610],"(",["T_VARIABLE","$attributeCode",610],["T_WHITESPACE"," ",610],["T_IS_EQUAL","==",610],["T_WHITESPACE"," ",610],["T_CONSTANT_ENCAPSED_STRING","'*'",610],")",["T_WHITESPACE"," ",610],"{",["T_WHITESPACE","\n                    ",610],["T_FOREACH","foreach",611],["T_WHITESPACE"," ",611],"(",["T_VARIABLE","$this",611],["T_OBJECT_OPERATOR","->",611],["T_STRING","getEntity",611],"(",")",["T_OBJECT_OPERATOR","->",611],["T_STRING","getAllTableColumns",611],"(",")",["T_WHITESPACE"," ",611],["T_AS","as",611],["T_WHITESPACE"," ",611],["T_VARIABLE","$column",611],")",["T_WHITESPACE"," ",611],"{",["T_WHITESPACE","\n                        ",611],["T_VARIABLE","$this",612],["T_OBJECT_OPERATOR","->",612],["T_STRING","getSelect",612],"(",")",["T_OBJECT_OPERATOR","->",612],["T_STRING","columns",612],"(",["T_CONSTANT_ENCAPSED_STRING","'e.'",612],["T_WHITESPACE"," ",612],".",["T_WHITESPACE"," ",612],["T_VARIABLE","$column",612],")",";",["T_WHITESPACE","\n                        ",612],["T_VARIABLE","$this",613],["T_OBJECT_OPERATOR","->",613],["T_STRING","_selectAttributes",613],"[",["T_VARIABLE","$column",613],"]",["T_WHITESPACE"," ",613],"=",["T_WHITESPACE"," ",613],["T_VARIABLE","$column",613],";",["T_WHITESPACE","\n                        ",613],["T_VARIABLE","$this",614],["T_OBJECT_OPERATOR","->",614],["T_STRING","_staticFields",614],"[",["T_VARIABLE","$column",614],"]",["T_WHITESPACE"," ",614],"=",["T_WHITESPACE"," ",614],["T_VARIABLE","$column",614],";",["T_WHITESPACE","\n                    ",614],"}",["T_WHITESPACE","\n                ",615],"}",["T_WHITESPACE"," ",616],["T_ELSE","else",616],["T_WHITESPACE"," ",616],"{",["T_WHITESPACE","\n                    ",616],["T_VARIABLE","$columns",617],["T_WHITESPACE"," ",617],"=",["T_WHITESPACE"," ",617],["T_VARIABLE","$this",617],["T_OBJECT_OPERATOR","->",617],["T_STRING","getEntity",617],"(",")",["T_OBJECT_OPERATOR","->",617],["T_STRING","getAttributeForSelect",617],"(",["T_VARIABLE","$attributeCode",617],")",";",["T_WHITESPACE","\n                    ",617],["T_IF","if",618],["T_WHITESPACE"," ",618],"(",["T_VARIABLE","$columns",618],")",["T_WHITESPACE"," ",618],"{",["T_WHITESPACE","\n                        ",618],["T_FOREACH","foreach",619],["T_WHITESPACE"," ",619],"(",["T_VARIABLE","$columns",619],["T_WHITESPACE"," ",619],["T_AS","as",619],["T_WHITESPACE"," ",619],["T_VARIABLE","$alias",619],["T_WHITESPACE"," ",619],["T_DOUBLE_ARROW","=>",619],["T_WHITESPACE"," ",619],["T_VARIABLE","$column",619],")",["T_WHITESPACE"," ",619],"{",["T_WHITESPACE","\n                            ",619],["T_VARIABLE","$this",620],["T_OBJECT_OPERATOR","->",620],["T_STRING","getSelect",620],"(",")",["T_OBJECT_OPERATOR","->",620],["T_STRING","columns",620],"(","[",["T_VARIABLE","$alias",620],["T_WHITESPACE"," ",620],["T_DOUBLE_ARROW","=>",620],["T_WHITESPACE"," ",620],["T_CONSTANT_ENCAPSED_STRING","'e.'",620],["T_WHITESPACE"," ",620],".",["T_WHITESPACE"," ",620],["T_VARIABLE","$column",620],"]",")",";",["T_WHITESPACE","\n                            ",620],["T_VARIABLE","$this",621],["T_OBJECT_OPERATOR","->",621],["T_STRING","_selectAttributes",621],"[",["T_VARIABLE","$column",621],"]",["T_WHITESPACE"," ",621],"=",["T_WHITESPACE"," ",621],["T_VARIABLE","$column",621],";",["T_WHITESPACE","\n                            ",621],["T_VARIABLE","$this",622],["T_OBJECT_OPERATOR","->",622],["T_STRING","_staticFields",622],"[",["T_VARIABLE","$column",622],"]",["T_WHITESPACE"," ",622],"=",["T_WHITESPACE"," ",622],["T_VARIABLE","$column",622],";",["T_WHITESPACE","\n                        ",622],"}",["T_WHITESPACE","\n                    ",623],"}",["T_WHITESPACE","\n                ",624],"}",["T_WHITESPACE","\n            ",625],"}",["T_WHITESPACE","\n            ",626],["T_RETURN","return",627],["T_WHITESPACE"," ",627],["T_VARIABLE","$this",627],";",["T_WHITESPACE","\n        ",627],"}",["T_WHITESPACE","\n        ",628],["T_RETURN","return",629],["T_WHITESPACE"," ",629],["T_STRING","parent",629],["T_DOUBLE_COLON","::",629],["T_STRING","addAttributeToSelect",629],"(",["T_VARIABLE","$attribute",629],",",["T_WHITESPACE"," ",629],["T_VARIABLE","$joinType",629],")",";",["T_WHITESPACE","\n    ",629],"}",["T_WHITESPACE","\n\n    ",630],["T_DOC_COMMENT","\/**\n     * Processing collection items after loading\n     * Adding url rewrites, minimal prices, final prices, tax percents\n     *\n     * @return $this\n     *\/",632],["T_WHITESPACE","\n    ",637],["T_PROTECTED","protected",638],["T_WHITESPACE"," ",638],["T_FUNCTION","function",638],["T_WHITESPACE"," ",638],["T_STRING","_afterLoad",638],"(",")",["T_WHITESPACE","\n    ",638],"{",["T_WHITESPACE","\n        ",639],["T_IF","if",640],["T_WHITESPACE"," ",640],"(",["T_VARIABLE","$this",640],["T_OBJECT_OPERATOR","->",640],["T_STRING","_addUrlRewrite",640],")",["T_WHITESPACE"," ",640],"{",["T_WHITESPACE","\n            ",640],["T_VARIABLE","$this",641],["T_OBJECT_OPERATOR","->",641],["T_STRING","_addUrlRewrite",641],"(",")",";",["T_WHITESPACE","\n        ",641],"}",["T_WHITESPACE","\n\n        ",642],["T_VARIABLE","$this",644],["T_OBJECT_OPERATOR","->",644],["T_STRING","_prepareUrlDataObject",644],"(",")",";",["T_WHITESPACE","\n\n        ",644],["T_IF","if",646],["T_WHITESPACE"," ",646],"(",["T_STRING","count",646],"(",["T_VARIABLE","$this",646],")",")",["T_WHITESPACE"," ",646],"{",["T_WHITESPACE","\n            ",646],["T_VARIABLE","$this",647],["T_OBJECT_OPERATOR","->",647],["T_STRING","_eventManager",647],["T_OBJECT_OPERATOR","->",647],["T_STRING","dispatch",647],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog_product_collection_load_after'",647],",",["T_WHITESPACE"," ",647],"[",["T_CONSTANT_ENCAPSED_STRING","'collection'",647],["T_WHITESPACE"," ",647],["T_DOUBLE_ARROW","=>",647],["T_WHITESPACE"," ",647],["T_VARIABLE","$this",647],"]",")",";",["T_WHITESPACE","\n        ",647],"}",["T_WHITESPACE","\n\n        ",648],["T_RETURN","return",650],["T_WHITESPACE"," ",650],["T_VARIABLE","$this",650],";",["T_WHITESPACE","\n    ",650],"}",["T_WHITESPACE","\n\n    ",651],["T_DOC_COMMENT","\/**\n     * Prepare Url Data object\n     *\n     * @return $this\n     *\/",653],["T_WHITESPACE","\n    ",657],["T_PROTECTED","protected",658],["T_WHITESPACE"," ",658],["T_FUNCTION","function",658],["T_WHITESPACE"," ",658],["T_STRING","_prepareUrlDataObject",658],"(",")",["T_WHITESPACE","\n    ",658],"{",["T_WHITESPACE","\n        ",659],["T_VARIABLE","$objects",660],["T_WHITESPACE"," ",660],"=",["T_WHITESPACE"," ",660],"[","]",";",["T_WHITESPACE","\n        ",660],["T_DOC_COMMENT","\/** @var $item \\Magento\\Catalog\\Model\\Product *\/",661],["T_WHITESPACE","\n        ",661],["T_FOREACH","foreach",662],["T_WHITESPACE"," ",662],"(",["T_VARIABLE","$this",662],["T_OBJECT_OPERATOR","->",662],["T_STRING","_items",662],["T_WHITESPACE"," ",662],["T_AS","as",662],["T_WHITESPACE"," ",662],["T_VARIABLE","$item",662],")",["T_WHITESPACE"," ",662],"{",["T_WHITESPACE","\n            ",662],["T_IF","if",663],["T_WHITESPACE"," ",663],"(",["T_VARIABLE","$this",663],["T_OBJECT_OPERATOR","->",663],["T_STRING","getFlag",663],"(",["T_CONSTANT_ENCAPSED_STRING","'do_not_use_category_id'",663],")",")",["T_WHITESPACE"," ",663],"{",["T_WHITESPACE","\n                ",663],["T_VARIABLE","$item",664],["T_OBJECT_OPERATOR","->",664],["T_STRING","setDoNotUseCategoryId",664],"(",["T_STRING","true",664],")",";",["T_WHITESPACE","\n            ",664],"}",["T_WHITESPACE","\n            ",665],["T_IF","if",666],["T_WHITESPACE"," ",666],"(","!",["T_VARIABLE","$item",666],["T_OBJECT_OPERATOR","->",666],["T_STRING","isVisibleInSiteVisibility",666],"(",")",["T_WHITESPACE"," ",666],["T_BOOLEAN_AND","&&",666],["T_WHITESPACE"," ",666],["T_VARIABLE","$item",666],["T_OBJECT_OPERATOR","->",666],["T_STRING","getItemStoreId",666],"(",")",")",["T_WHITESPACE"," ",666],"{",["T_WHITESPACE","\n                ",666],["T_VARIABLE","$objects",667],"[",["T_VARIABLE","$item",667],["T_OBJECT_OPERATOR","->",667],["T_STRING","getEntityId",667],"(",")","]",["T_WHITESPACE"," ",667],"=",["T_WHITESPACE"," ",667],["T_VARIABLE","$item",667],["T_OBJECT_OPERATOR","->",667],["T_STRING","getItemStoreId",667],"(",")",";",["T_WHITESPACE","\n            ",667],"}",["T_WHITESPACE","\n        ",668],"}",["T_WHITESPACE","\n\n        ",669],["T_IF","if",671],["T_WHITESPACE"," ",671],"(",["T_VARIABLE","$objects",671],["T_WHITESPACE"," ",671],["T_BOOLEAN_AND","&&",671],["T_WHITESPACE"," ",671],["T_VARIABLE","$this",671],["T_OBJECT_OPERATOR","->",671],["T_STRING","hasFlag",671],"(",["T_CONSTANT_ENCAPSED_STRING","'url_data_object'",671],")",")",["T_WHITESPACE"," ",671],"{",["T_WHITESPACE","\n            ",671],["T_VARIABLE","$objects",672],["T_WHITESPACE"," ",672],"=",["T_WHITESPACE"," ",672],["T_VARIABLE","$this",672],["T_OBJECT_OPERATOR","->",672],["T_STRING","_catalogUrl",672],["T_OBJECT_OPERATOR","->",672],["T_STRING","getRewriteByProductStore",672],"(",["T_VARIABLE","$objects",672],")",";",["T_WHITESPACE","\n            ",672],["T_FOREACH","foreach",673],["T_WHITESPACE"," ",673],"(",["T_VARIABLE","$this",673],["T_OBJECT_OPERATOR","->",673],["T_STRING","_items",673],["T_WHITESPACE"," ",673],["T_AS","as",673],["T_WHITESPACE"," ",673],["T_VARIABLE","$item",673],")",["T_WHITESPACE"," ",673],"{",["T_WHITESPACE","\n                ",673],["T_IF","if",674],["T_WHITESPACE"," ",674],"(",["T_ISSET","isset",674],"(",["T_VARIABLE","$objects",674],"[",["T_VARIABLE","$item",674],["T_OBJECT_OPERATOR","->",674],["T_STRING","getEntityId",674],"(",")","]",")",")",["T_WHITESPACE"," ",674],"{",["T_WHITESPACE","\n                    ",674],["T_VARIABLE","$object",675],["T_WHITESPACE"," ",675],"=",["T_WHITESPACE"," ",675],["T_NEW","new",675],["T_WHITESPACE"," ",675],["T_NS_SEPARATOR","\\",675],["T_STRING","Magento",675],["T_NS_SEPARATOR","\\",675],["T_STRING","Framework",675],["T_NS_SEPARATOR","\\",675],["T_STRING","DataObject",675],"(",["T_VARIABLE","$objects",675],"[",["T_VARIABLE","$item",675],["T_OBJECT_OPERATOR","->",675],["T_STRING","getEntityId",675],"(",")","]",")",";",["T_WHITESPACE","\n                    ",675],["T_VARIABLE","$item",676],["T_OBJECT_OPERATOR","->",676],["T_STRING","setUrlDataObject",676],"(",["T_VARIABLE","$object",676],")",";",["T_WHITESPACE","\n                ",676],"}",["T_WHITESPACE","\n            ",677],"}",["T_WHITESPACE","\n        ",678],"}",["T_WHITESPACE","\n\n        ",679],["T_RETURN","return",681],["T_WHITESPACE"," ",681],["T_VARIABLE","$this",681],";",["T_WHITESPACE","\n    ",681],"}",["T_WHITESPACE","\n\n    ",682],["T_DOC_COMMENT","\/**\n     * Add collection filters by identifiers\n     *\n     * @param mixed $productId\n     * @param boolean $exclude\n     * @return $this\n     *\/",684],["T_WHITESPACE","\n    ",690],["T_PUBLIC","public",691],["T_WHITESPACE"," ",691],["T_FUNCTION","function",691],["T_WHITESPACE"," ",691],["T_STRING","addIdFilter",691],"(",["T_VARIABLE","$productId",691],",",["T_WHITESPACE"," ",691],["T_VARIABLE","$exclude",691],["T_WHITESPACE"," ",691],"=",["T_WHITESPACE"," ",691],["T_STRING","false",691],")",["T_WHITESPACE","\n    ",691],"{",["T_WHITESPACE","\n        ",692],["T_IF","if",693],["T_WHITESPACE"," ",693],"(",["T_EMPTY","empty",693],"(",["T_VARIABLE","$productId",693],")",")",["T_WHITESPACE"," ",693],"{",["T_WHITESPACE","\n            ",693],["T_VARIABLE","$this",694],["T_OBJECT_OPERATOR","->",694],["T_STRING","_setIsLoaded",694],"(",["T_STRING","true",694],")",";",["T_WHITESPACE","\n            ",694],["T_RETURN","return",695],["T_WHITESPACE"," ",695],["T_VARIABLE","$this",695],";",["T_WHITESPACE","\n        ",695],"}",["T_WHITESPACE","\n        ",696],["T_IF","if",697],["T_WHITESPACE"," ",697],"(",["T_STRING","is_array",697],"(",["T_VARIABLE","$productId",697],")",")",["T_WHITESPACE"," ",697],"{",["T_WHITESPACE","\n            ",697],["T_IF","if",698],["T_WHITESPACE"," ",698],"(","!",["T_EMPTY","empty",698],"(",["T_VARIABLE","$productId",698],")",")",["T_WHITESPACE"," ",698],"{",["T_WHITESPACE","\n                ",698],["T_IF","if",699],["T_WHITESPACE"," ",699],"(",["T_VARIABLE","$exclude",699],")",["T_WHITESPACE"," ",699],"{",["T_WHITESPACE","\n                    ",699],["T_VARIABLE","$condition",700],["T_WHITESPACE"," ",700],"=",["T_WHITESPACE"," ",700],"[",["T_CONSTANT_ENCAPSED_STRING","'nin'",700],["T_WHITESPACE"," ",700],["T_DOUBLE_ARROW","=>",700],["T_WHITESPACE"," ",700],["T_VARIABLE","$productId",700],"]",";",["T_WHITESPACE","\n                ",700],"}",["T_WHITESPACE"," ",701],["T_ELSE","else",701],["T_WHITESPACE"," ",701],"{",["T_WHITESPACE","\n                    ",701],["T_VARIABLE","$condition",702],["T_WHITESPACE"," ",702],"=",["T_WHITESPACE"," ",702],"[",["T_CONSTANT_ENCAPSED_STRING","'in'",702],["T_WHITESPACE"," ",702],["T_DOUBLE_ARROW","=>",702],["T_WHITESPACE"," ",702],["T_VARIABLE","$productId",702],"]",";",["T_WHITESPACE","\n                ",702],"}",["T_WHITESPACE","\n            ",703],"}",["T_WHITESPACE"," ",704],["T_ELSE","else",704],["T_WHITESPACE"," ",704],"{",["T_WHITESPACE","\n                ",704],["T_VARIABLE","$condition",705],["T_WHITESPACE"," ",705],"=",["T_WHITESPACE"," ",705],["T_CONSTANT_ENCAPSED_STRING","''",705],";",["T_WHITESPACE","\n            ",705],"}",["T_WHITESPACE","\n        ",706],"}",["T_WHITESPACE"," ",707],["T_ELSE","else",707],["T_WHITESPACE"," ",707],"{",["T_WHITESPACE","\n            ",707],["T_IF","if",708],["T_WHITESPACE"," ",708],"(",["T_VARIABLE","$exclude",708],")",["T_WHITESPACE"," ",708],"{",["T_WHITESPACE","\n                ",708],["T_VARIABLE","$condition",709],["T_WHITESPACE"," ",709],"=",["T_WHITESPACE"," ",709],"[",["T_CONSTANT_ENCAPSED_STRING","'neq'",709],["T_WHITESPACE"," ",709],["T_DOUBLE_ARROW","=>",709],["T_WHITESPACE"," ",709],["T_VARIABLE","$productId",709],"]",";",["T_WHITESPACE","\n            ",709],"}",["T_WHITESPACE"," ",710],["T_ELSE","else",710],["T_WHITESPACE"," ",710],"{",["T_WHITESPACE","\n                ",710],["T_VARIABLE","$condition",711],["T_WHITESPACE"," ",711],"=",["T_WHITESPACE"," ",711],["T_VARIABLE","$productId",711],";",["T_WHITESPACE","\n            ",711],"}",["T_WHITESPACE","\n        ",712],"}",["T_WHITESPACE","\n        ",713],["T_VARIABLE","$this",714],["T_OBJECT_OPERATOR","->",714],["T_STRING","addFieldToFilter",714],"(",["T_CONSTANT_ENCAPSED_STRING","'entity_id'",714],",",["T_WHITESPACE"," ",714],["T_VARIABLE","$condition",714],")",";",["T_WHITESPACE","\n        ",714],["T_RETURN","return",715],["T_WHITESPACE"," ",715],["T_VARIABLE","$this",715],";",["T_WHITESPACE","\n    ",715],"}",["T_WHITESPACE","\n\n    ",716],["T_DOC_COMMENT","\/**\n     * Adding product website names to result collection\n     * Add for each product websites information\n     *\n     * @return $this\n     *\/",718],["T_WHITESPACE","\n    ",723],["T_PUBLIC","public",724],["T_WHITESPACE"," ",724],["T_FUNCTION","function",724],["T_WHITESPACE"," ",724],["T_STRING","addWebsiteNamesToResult",724],"(",")",["T_WHITESPACE","\n    ",724],"{",["T_WHITESPACE","\n        ",725],["T_VARIABLE","$this",726],["T_OBJECT_OPERATOR","->",726],["T_STRING","needToAddWebsiteNamesToResult",726],["T_WHITESPACE"," ",726],"=",["T_WHITESPACE"," ",726],["T_STRING","true",726],";",["T_WHITESPACE","\n        ",726],["T_RETURN","return",727],["T_WHITESPACE"," ",727],["T_VARIABLE","$this",727],";",["T_WHITESPACE","\n    ",727],"}",["T_WHITESPACE","\n\n    ",728],["T_DOC_COMMENT","\/**\n     * {@inheritdoc}\n     *\/",730],["T_WHITESPACE","\n    ",732],["T_PUBLIC","public",733],["T_WHITESPACE"," ",733],["T_FUNCTION","function",733],["T_WHITESPACE"," ",733],["T_STRING","load",733],"(",["T_VARIABLE","$printQuery",733],["T_WHITESPACE"," ",733],"=",["T_WHITESPACE"," ",733],["T_STRING","false",733],",",["T_WHITESPACE"," ",733],["T_VARIABLE","$logQuery",733],["T_WHITESPACE"," ",733],"=",["T_WHITESPACE"," ",733],["T_STRING","false",733],")",["T_WHITESPACE","\n    ",733],"{",["T_WHITESPACE","\n        ",734],["T_IF","if",735],["T_WHITESPACE"," ",735],"(",["T_VARIABLE","$this",735],["T_OBJECT_OPERATOR","->",735],["T_STRING","isLoaded",735],"(",")",")",["T_WHITESPACE"," ",735],"{",["T_WHITESPACE","\n            ",735],["T_RETURN","return",736],["T_WHITESPACE"," ",736],["T_VARIABLE","$this",736],";",["T_WHITESPACE","\n        ",736],"}",["T_WHITESPACE","\n        ",737],["T_STRING","parent",738],["T_DOUBLE_COLON","::",738],["T_STRING","load",738],"(",["T_VARIABLE","$printQuery",738],",",["T_WHITESPACE"," ",738],["T_VARIABLE","$logQuery",738],")",";",["T_WHITESPACE","\n\n        ",738],["T_IF","if",740],["T_WHITESPACE"," ",740],"(",["T_VARIABLE","$this",740],["T_OBJECT_OPERATOR","->",740],["T_STRING","needToAddWebsiteNamesToResult",740],")",["T_WHITESPACE"," ",740],"{",["T_WHITESPACE","\n            ",740],["T_VARIABLE","$this",741],["T_OBJECT_OPERATOR","->",741],["T_STRING","doAddWebsiteNamesToResult",741],"(",")",";",["T_WHITESPACE","\n        ",741],"}",["T_WHITESPACE","\n        ",742],["T_RETURN","return",743],["T_WHITESPACE"," ",743],["T_VARIABLE","$this",743],";",["T_WHITESPACE","\n    ",743],"}",["T_WHITESPACE","\n\n    ",744],["T_DOC_COMMENT","\/**\n     * Processs adding product website names to result collection\n     *\n     * @return $this\n     *\/",746],["T_WHITESPACE","\n    ",750],["T_PROTECTED","protected",751],["T_WHITESPACE"," ",751],["T_FUNCTION","function",751],["T_WHITESPACE"," ",751],["T_STRING","doAddWebsiteNamesToResult",751],"(",")",["T_WHITESPACE","\n    ",751],"{",["T_WHITESPACE","\n        ",752],["T_VARIABLE","$productWebsites",753],["T_WHITESPACE"," ",753],"=",["T_WHITESPACE"," ",753],"[","]",";",["T_WHITESPACE","\n        ",753],["T_FOREACH","foreach",754],["T_WHITESPACE"," ",754],"(",["T_VARIABLE","$this",754],["T_WHITESPACE"," ",754],["T_AS","as",754],["T_WHITESPACE"," ",754],["T_VARIABLE","$product",754],")",["T_WHITESPACE"," ",754],"{",["T_WHITESPACE","\n            ",754],["T_VARIABLE","$productWebsites",755],"[",["T_VARIABLE","$product",755],["T_OBJECT_OPERATOR","->",755],["T_STRING","getId",755],"(",")","]",["T_WHITESPACE"," ",755],"=",["T_WHITESPACE"," ",755],"[","]",";",["T_WHITESPACE","\n        ",755],"}",["T_WHITESPACE","\n\n        ",756],["T_IF","if",758],["T_WHITESPACE"," ",758],"(","!",["T_EMPTY","empty",758],"(",["T_VARIABLE","$productWebsites",758],")",")",["T_WHITESPACE"," ",758],"{",["T_WHITESPACE","\n            ",758],["T_VARIABLE","$select",759],["T_WHITESPACE"," ",759],"=",["T_WHITESPACE"," ",759],["T_VARIABLE","$this",759],["T_OBJECT_OPERATOR","->",759],["T_STRING","getConnection",759],"(",")",["T_OBJECT_OPERATOR","->",759],["T_STRING","select",759],"(",")",["T_OBJECT_OPERATOR","->",759],["T_STRING","from",759],"(",["T_WHITESPACE","\n                ",759],"[",["T_CONSTANT_ENCAPSED_STRING","'product_website'",760],["T_WHITESPACE"," ",760],["T_DOUBLE_ARROW","=>",760],["T_WHITESPACE"," ",760],["T_VARIABLE","$this",760],["T_OBJECT_OPERATOR","->",760],["T_STRING","_productWebsiteTable",760],"]",["T_WHITESPACE","\n            ",760],")",["T_OBJECT_OPERATOR","->",761],["T_STRING","join",761],"(",["T_WHITESPACE","\n                ",761],"[",["T_CONSTANT_ENCAPSED_STRING","'website'",762],["T_WHITESPACE"," ",762],["T_DOUBLE_ARROW","=>",762],["T_WHITESPACE"," ",762],["T_VARIABLE","$this",762],["T_OBJECT_OPERATOR","->",762],["T_STRING","getResource",762],"(",")",["T_OBJECT_OPERATOR","->",762],["T_STRING","getTable",762],"(",["T_CONSTANT_ENCAPSED_STRING","'store_website'",762],")","]",",",["T_WHITESPACE","\n                ",762],["T_CONSTANT_ENCAPSED_STRING","'website.website_id = product_website.website_id'",763],",",["T_WHITESPACE","\n                ",763],"[",["T_CONSTANT_ENCAPSED_STRING","'name'",764],"]",["T_WHITESPACE","\n            ",764],")",["T_OBJECT_OPERATOR","->",765],["T_STRING","where",765],"(",["T_WHITESPACE","\n                ",765],["T_CONSTANT_ENCAPSED_STRING","'product_website.product_id IN (?)'",766],",",["T_WHITESPACE","\n                ",766],["T_STRING","array_keys",767],"(",["T_VARIABLE","$productWebsites",767],")",["T_WHITESPACE","\n            ",767],")",["T_OBJECT_OPERATOR","->",768],["T_STRING","where",768],"(",["T_WHITESPACE","\n                ",768],["T_CONSTANT_ENCAPSED_STRING","'website.website_id > ?'",769],",",["T_WHITESPACE","\n                ",769],["T_LNUMBER","0",770],["T_WHITESPACE","\n            ",770],")",";",["T_WHITESPACE","\n\n            ",771],["T_VARIABLE","$data",773],["T_WHITESPACE"," ",773],"=",["T_WHITESPACE"," ",773],["T_VARIABLE","$this",773],["T_OBJECT_OPERATOR","->",773],["T_STRING","getConnection",773],"(",")",["T_OBJECT_OPERATOR","->",773],["T_STRING","fetchAll",773],"(",["T_VARIABLE","$select",773],")",";",["T_WHITESPACE","\n            ",773],["T_FOREACH","foreach",774],["T_WHITESPACE"," ",774],"(",["T_VARIABLE","$data",774],["T_WHITESPACE"," ",774],["T_AS","as",774],["T_WHITESPACE"," ",774],["T_VARIABLE","$row",774],")",["T_WHITESPACE"," ",774],"{",["T_WHITESPACE","\n                ",774],["T_VARIABLE","$productWebsites",775],"[",["T_VARIABLE","$row",775],"[",["T_CONSTANT_ENCAPSED_STRING","'product_id'",775],"]","]","[","]",["T_WHITESPACE"," ",775],"=",["T_WHITESPACE"," ",775],["T_VARIABLE","$row",775],"[",["T_CONSTANT_ENCAPSED_STRING","'website_id'",775],"]",";",["T_WHITESPACE","\n            ",775],"}",["T_WHITESPACE","\n        ",776],"}",["T_WHITESPACE","\n\n        ",777],["T_FOREACH","foreach",779],["T_WHITESPACE"," ",779],"(",["T_VARIABLE","$this",779],["T_WHITESPACE"," ",779],["T_AS","as",779],["T_WHITESPACE"," ",779],["T_VARIABLE","$product",779],")",["T_WHITESPACE"," ",779],"{",["T_WHITESPACE","\n            ",779],["T_IF","if",780],["T_WHITESPACE"," ",780],"(",["T_ISSET","isset",780],"(",["T_VARIABLE","$productWebsites",780],"[",["T_VARIABLE","$product",780],["T_OBJECT_OPERATOR","->",780],["T_STRING","getId",780],"(",")","]",")",")",["T_WHITESPACE"," ",780],"{",["T_WHITESPACE","\n                ",780],["T_VARIABLE","$product",781],["T_OBJECT_OPERATOR","->",781],["T_STRING","setData",781],"(",["T_CONSTANT_ENCAPSED_STRING","'websites'",781],",",["T_WHITESPACE"," ",781],["T_VARIABLE","$productWebsites",781],"[",["T_VARIABLE","$product",781],["T_OBJECT_OPERATOR","->",781],["T_STRING","getId",781],"(",")","]",")",";",["T_WHITESPACE","\n            ",781],"}",["T_WHITESPACE","\n        ",782],"}",["T_WHITESPACE","\n        ",783],["T_RETURN","return",784],["T_WHITESPACE"," ",784],["T_VARIABLE","$this",784],";",["T_WHITESPACE","\n    ",784],"}",["T_WHITESPACE","\n\n    ",785],["T_DOC_COMMENT","\/**\n     * Add store availability filter. Include availability product\n     * for store website\n     *\n     * @param null|string|bool|int|Store $store\n     * @return $this\n     *\/",787],["T_WHITESPACE","\n    ",793],["T_PUBLIC","public",794],["T_WHITESPACE"," ",794],["T_FUNCTION","function",794],["T_WHITESPACE"," ",794],["T_STRING","addStoreFilter",794],"(",["T_VARIABLE","$store",794],["T_WHITESPACE"," ",794],"=",["T_WHITESPACE"," ",794],["T_STRING","null",794],")",["T_WHITESPACE","\n    ",794],"{",["T_WHITESPACE","\n        ",795],["T_IF","if",796],["T_WHITESPACE"," ",796],"(",["T_VARIABLE","$store",796],["T_WHITESPACE"," ",796],["T_IS_IDENTICAL","===",796],["T_WHITESPACE"," ",796],["T_STRING","null",796],")",["T_WHITESPACE"," ",796],"{",["T_WHITESPACE","\n            ",796],["T_VARIABLE","$store",797],["T_WHITESPACE"," ",797],"=",["T_WHITESPACE"," ",797],["T_VARIABLE","$this",797],["T_OBJECT_OPERATOR","->",797],["T_STRING","getStoreId",797],"(",")",";",["T_WHITESPACE","\n        ",797],"}",["T_WHITESPACE","\n        ",798],["T_VARIABLE","$store",799],["T_WHITESPACE"," ",799],"=",["T_WHITESPACE"," ",799],["T_VARIABLE","$this",799],["T_OBJECT_OPERATOR","->",799],["T_STRING","_storeManager",799],["T_OBJECT_OPERATOR","->",799],["T_STRING","getStore",799],"(",["T_VARIABLE","$store",799],")",";",["T_WHITESPACE","\n\n        ",799],["T_IF","if",801],["T_WHITESPACE"," ",801],"(",["T_VARIABLE","$store",801],["T_OBJECT_OPERATOR","->",801],["T_STRING","getId",801],"(",")",["T_WHITESPACE"," ",801],["T_IS_NOT_EQUAL","!=",801],["T_WHITESPACE"," ",801],["T_STRING","Store",801],["T_DOUBLE_COLON","::",801],["T_STRING","DEFAULT_STORE_ID",801],")",["T_WHITESPACE"," ",801],"{",["T_WHITESPACE","\n            ",801],["T_VARIABLE","$this",802],["T_OBJECT_OPERATOR","->",802],["T_STRING","setStoreId",802],"(",["T_VARIABLE","$store",802],")",";",["T_WHITESPACE","\n            ",802],["T_VARIABLE","$this",803],["T_OBJECT_OPERATOR","->",803],["T_STRING","_productLimitationFilters",803],"[",["T_CONSTANT_ENCAPSED_STRING","'store_id'",803],"]",["T_WHITESPACE"," ",803],"=",["T_WHITESPACE"," ",803],["T_VARIABLE","$store",803],["T_OBJECT_OPERATOR","->",803],["T_STRING","getId",803],"(",")",";",["T_WHITESPACE","\n            ",803],["T_VARIABLE","$this",804],["T_OBJECT_OPERATOR","->",804],["T_STRING","_applyProductLimitations",804],"(",")",";",["T_WHITESPACE","\n        ",804],"}",["T_WHITESPACE","\n\n        ",805],["T_RETURN","return",807],["T_WHITESPACE"," ",807],["T_VARIABLE","$this",807],";",["T_WHITESPACE","\n    ",807],"}",["T_WHITESPACE","\n\n    ",808],["T_DOC_COMMENT","\/**\n     * Add website filter to collection\n     *\n     * @param null|bool|int|string|array $websites\n     * @return $this\n     *\/",810],["T_WHITESPACE","\n    ",815],["T_PUBLIC","public",816],["T_WHITESPACE"," ",816],["T_FUNCTION","function",816],["T_WHITESPACE"," ",816],["T_STRING","addWebsiteFilter",816],"(",["T_VARIABLE","$websites",816],["T_WHITESPACE"," ",816],"=",["T_WHITESPACE"," ",816],["T_STRING","null",816],")",["T_WHITESPACE","\n    ",816],"{",["T_WHITESPACE","\n        ",817],["T_IF","if",818],["T_WHITESPACE"," ",818],"(","!",["T_STRING","is_array",818],"(",["T_VARIABLE","$websites",818],")",")",["T_WHITESPACE"," ",818],"{",["T_WHITESPACE","\n            ",818],["T_VARIABLE","$websites",819],["T_WHITESPACE"," ",819],"=",["T_WHITESPACE"," ",819],"[",["T_VARIABLE","$this",819],["T_OBJECT_OPERATOR","->",819],["T_STRING","_storeManager",819],["T_OBJECT_OPERATOR","->",819],["T_STRING","getWebsite",819],"(",["T_VARIABLE","$websites",819],")",["T_OBJECT_OPERATOR","->",819],["T_STRING","getId",819],"(",")","]",";",["T_WHITESPACE","\n        ",819],"}",["T_WHITESPACE","\n\n        ",820],["T_VARIABLE","$this",822],["T_OBJECT_OPERATOR","->",822],["T_STRING","_productLimitationFilters",822],"[",["T_CONSTANT_ENCAPSED_STRING","'website_ids'",822],"]",["T_WHITESPACE"," ",822],"=",["T_WHITESPACE"," ",822],["T_VARIABLE","$websites",822],";",["T_WHITESPACE","\n        ",822],["T_VARIABLE","$this",823],["T_OBJECT_OPERATOR","->",823],["T_STRING","_applyProductLimitations",823],"(",")",";",["T_WHITESPACE","\n\n        ",823],["T_RETURN","return",825],["T_WHITESPACE"," ",825],["T_VARIABLE","$this",825],";",["T_WHITESPACE","\n    ",825],"}",["T_WHITESPACE","\n\n    ",826],["T_DOC_COMMENT","\/**\n     * Get filters applied to collection\n     *\n     * @return \\Magento\\Catalog\\Model\\ResourceModel\\Product\\Collection\\ProductLimitation\n     *\/",828],["T_WHITESPACE","\n    ",832],["T_PUBLIC","public",833],["T_WHITESPACE"," ",833],["T_FUNCTION","function",833],["T_WHITESPACE"," ",833],["T_STRING","getLimitationFilters",833],"(",")",["T_WHITESPACE","\n    ",833],"{",["T_WHITESPACE","\n        ",834],["T_RETURN","return",835],["T_WHITESPACE"," ",835],["T_VARIABLE","$this",835],["T_OBJECT_OPERATOR","->",835],["T_STRING","_productLimitationFilters",835],";",["T_WHITESPACE","\n    ",835],"}",["T_WHITESPACE","\n\n    ",836],["T_DOC_COMMENT","\/**\n     * Specify category filter for product collection\n     *\n     * @param \\Magento\\Catalog\\Model\\Category $category\n     * @return $this\n     *\/",838],["T_WHITESPACE","\n    ",843],["T_PUBLIC","public",844],["T_WHITESPACE"," ",844],["T_FUNCTION","function",844],["T_WHITESPACE"," ",844],["T_STRING","addCategoryFilter",844],"(",["T_NS_SEPARATOR","\\",844],["T_STRING","Magento",844],["T_NS_SEPARATOR","\\",844],["T_STRING","Catalog",844],["T_NS_SEPARATOR","\\",844],["T_STRING","Model",844],["T_NS_SEPARATOR","\\",844],["T_STRING","Category",844],["T_WHITESPACE"," ",844],["T_VARIABLE","$category",844],")",["T_WHITESPACE","\n    ",844],"{",["T_WHITESPACE","\n        ",845],["T_VARIABLE","$this",846],["T_OBJECT_OPERATOR","->",846],["T_STRING","_productLimitationFilters",846],"[",["T_CONSTANT_ENCAPSED_STRING","'category_id'",846],"]",["T_WHITESPACE"," ",846],"=",["T_WHITESPACE"," ",846],["T_VARIABLE","$category",846],["T_OBJECT_OPERATOR","->",846],["T_STRING","getId",846],"(",")",";",["T_WHITESPACE","\n        ",846],["T_IF","if",847],["T_WHITESPACE"," ",847],"(",["T_VARIABLE","$category",847],["T_OBJECT_OPERATOR","->",847],["T_STRING","getIsAnchor",847],"(",")",")",["T_WHITESPACE"," ",847],"{",["T_WHITESPACE","\n            ",847],["T_UNSET","unset",848],"(",["T_VARIABLE","$this",848],["T_OBJECT_OPERATOR","->",848],["T_STRING","_productLimitationFilters",848],"[",["T_CONSTANT_ENCAPSED_STRING","'category_is_anchor'",848],"]",")",";",["T_WHITESPACE","\n        ",848],"}",["T_WHITESPACE"," ",849],["T_ELSE","else",849],["T_WHITESPACE"," ",849],"{",["T_WHITESPACE","\n            ",849],["T_VARIABLE","$this",850],["T_OBJECT_OPERATOR","->",850],["T_STRING","_productLimitationFilters",850],"[",["T_CONSTANT_ENCAPSED_STRING","'category_is_anchor'",850],"]",["T_WHITESPACE"," ",850],"=",["T_WHITESPACE"," ",850],["T_LNUMBER","1",850],";",["T_WHITESPACE","\n        ",850],"}",["T_WHITESPACE","\n\n        ",851],["T_IF","if",853],["T_WHITESPACE"," ",853],"(",["T_VARIABLE","$this",853],["T_OBJECT_OPERATOR","->",853],["T_STRING","getStoreId",853],"(",")",["T_WHITESPACE"," ",853],["T_IS_EQUAL","==",853],["T_WHITESPACE"," ",853],["T_STRING","Store",853],["T_DOUBLE_COLON","::",853],["T_STRING","DEFAULT_STORE_ID",853],")",["T_WHITESPACE"," ",853],"{",["T_WHITESPACE","\n            ",853],["T_VARIABLE","$this",854],["T_OBJECT_OPERATOR","->",854],["T_STRING","_applyZeroStoreProductLimitations",854],"(",")",";",["T_WHITESPACE","\n        ",854],"}",["T_WHITESPACE"," ",855],["T_ELSE","else",855],["T_WHITESPACE"," ",855],"{",["T_WHITESPACE","\n            ",855],["T_VARIABLE","$this",856],["T_OBJECT_OPERATOR","->",856],["T_STRING","_applyProductLimitations",856],"(",")",";",["T_WHITESPACE","\n        ",856],"}",["T_WHITESPACE","\n\n        ",857],["T_RETURN","return",859],["T_WHITESPACE"," ",859],["T_VARIABLE","$this",859],";",["T_WHITESPACE","\n    ",859],"}",["T_WHITESPACE","\n\n    ",860],["T_DOC_COMMENT","\/**\n     * Filter Product by Categories\n     *\n     * @param array $categoriesFilter\n     *\/",862],["T_WHITESPACE","\n    ",866],["T_PUBLIC","public",867],["T_WHITESPACE"," ",867],["T_FUNCTION","function",867],["T_WHITESPACE"," ",867],["T_STRING","addCategoriesFilter",867],"(",["T_ARRAY","array",867],["T_WHITESPACE"," ",867],["T_VARIABLE","$categoriesFilter",867],")",["T_WHITESPACE","\n    ",867],"{",["T_WHITESPACE","\n        ",868],["T_FOREACH","foreach",869],["T_WHITESPACE"," ",869],"(",["T_VARIABLE","$categoriesFilter",869],["T_WHITESPACE"," ",869],["T_AS","as",869],["T_WHITESPACE"," ",869],["T_VARIABLE","$conditionType",869],["T_WHITESPACE"," ",869],["T_DOUBLE_ARROW","=>",869],["T_WHITESPACE"," ",869],["T_VARIABLE","$values",869],")",["T_WHITESPACE"," ",869],"{",["T_WHITESPACE","\n            ",869],["T_VARIABLE","$categorySelect",870],["T_WHITESPACE"," ",870],"=",["T_WHITESPACE"," ",870],["T_VARIABLE","$this",870],["T_OBJECT_OPERATOR","->",870],["T_STRING","getConnection",870],"(",")",["T_OBJECT_OPERATOR","->",870],["T_STRING","select",870],"(",")",["T_OBJECT_OPERATOR","->",870],["T_STRING","from",870],"(",["T_WHITESPACE","\n                ",870],"[",["T_CONSTANT_ENCAPSED_STRING","'cat'",871],["T_WHITESPACE"," ",871],["T_DOUBLE_ARROW","=>",871],["T_WHITESPACE"," ",871],["T_VARIABLE","$this",871],["T_OBJECT_OPERATOR","->",871],["T_STRING","getTable",871],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog_category_product'",871],")","]",",",["T_WHITESPACE","\n                ",871],["T_CONSTANT_ENCAPSED_STRING","'cat.product_id'",872],["T_WHITESPACE","\n            ",872],")",["T_OBJECT_OPERATOR","->",873],["T_STRING","where",873],"(",["T_VARIABLE","$this",873],["T_OBJECT_OPERATOR","->",873],["T_STRING","getConnection",873],"(",")",["T_OBJECT_OPERATOR","->",873],["T_STRING","prepareSqlCondition",873],"(",["T_CONSTANT_ENCAPSED_STRING","'cat.category_id'",873],",",["T_WHITESPACE"," ",873],"[",["T_CONSTANT_ENCAPSED_STRING","'in'",873],["T_WHITESPACE"," ",873],["T_DOUBLE_ARROW","=>",873],["T_WHITESPACE"," ",873],["T_VARIABLE","$values",873],"]",")",")",";",["T_WHITESPACE","\n            ",873],["T_VARIABLE","$selectCondition",874],["T_WHITESPACE"," ",874],"=",["T_WHITESPACE"," ",874],"[",["T_WHITESPACE","\n                ",874],["T_VARIABLE","$this",875],["T_OBJECT_OPERATOR","->",875],["T_STRING","mapConditionType",875],"(",["T_VARIABLE","$conditionType",875],")",["T_WHITESPACE"," ",875],["T_DOUBLE_ARROW","=>",875],["T_WHITESPACE"," ",875],["T_VARIABLE","$categorySelect",875],["T_WHITESPACE","\n            ",875],"]",";",["T_WHITESPACE","\n            ",876],["T_VARIABLE","$this",877],["T_OBJECT_OPERATOR","->",877],["T_STRING","getSelect",877],"(",")",["T_OBJECT_OPERATOR","->",877],["T_STRING","where",877],"(",["T_VARIABLE","$this",877],["T_OBJECT_OPERATOR","->",877],["T_STRING","getConnection",877],"(",")",["T_OBJECT_OPERATOR","->",877],["T_STRING","prepareSqlCondition",877],"(",["T_CONSTANT_ENCAPSED_STRING","'e.entity_id'",877],["T_WHITESPACE"," ",877],",",["T_WHITESPACE"," ",877],["T_VARIABLE","$selectCondition",877],")",")",";",["T_WHITESPACE","\n        ",877],"}",["T_WHITESPACE","\n    ",878],"}",["T_WHITESPACE","\n\n    ",879],["T_DOC_COMMENT","\/**\n     * Map equal and not equal conditions to in and not in\n     *\n     * @param string $conditionType\n     * @return mixed\n     *\/",881],["T_WHITESPACE","\n    ",886],["T_PRIVATE","private",887],["T_WHITESPACE"," ",887],["T_FUNCTION","function",887],["T_WHITESPACE"," ",887],["T_STRING","mapConditionType",887],"(",["T_VARIABLE","$conditionType",887],")",["T_WHITESPACE","\n    ",887],"{",["T_WHITESPACE","\n        ",888],["T_VARIABLE","$conditionsMap",889],["T_WHITESPACE"," ",889],"=",["T_WHITESPACE"," ",889],"[",["T_WHITESPACE","\n            ",889],["T_CONSTANT_ENCAPSED_STRING","'eq'",890],["T_WHITESPACE"," ",890],["T_DOUBLE_ARROW","=>",890],["T_WHITESPACE"," ",890],["T_CONSTANT_ENCAPSED_STRING","'in'",890],",",["T_WHITESPACE","\n            ",890],["T_CONSTANT_ENCAPSED_STRING","'neq'",891],["T_WHITESPACE"," ",891],["T_DOUBLE_ARROW","=>",891],["T_WHITESPACE"," ",891],["T_CONSTANT_ENCAPSED_STRING","'nin'",891],["T_WHITESPACE","\n        ",891],"]",";",["T_WHITESPACE","\n        ",892],["T_RETURN","return",893],["T_WHITESPACE"," ",893],["T_ISSET","isset",893],"(",["T_VARIABLE","$conditionsMap",893],"[",["T_VARIABLE","$conditionType",893],"]",")",["T_WHITESPACE"," ",893],"?",["T_WHITESPACE"," ",893],["T_VARIABLE","$conditionsMap",893],"[",["T_VARIABLE","$conditionType",893],"]",["T_WHITESPACE"," ",893],":",["T_WHITESPACE"," ",893],["T_VARIABLE","$conditionType",893],";",["T_WHITESPACE","\n    ",893],"}",["T_WHITESPACE","\n\n    ",894],["T_DOC_COMMENT","\/**\n     * Join minimal price attribute to result\n     *\n     * @return $this\n     *\/",896],["T_WHITESPACE","\n    ",900],["T_PUBLIC","public",901],["T_WHITESPACE"," ",901],["T_FUNCTION","function",901],["T_WHITESPACE"," ",901],["T_STRING","joinMinimalPrice",901],"(",")",["T_WHITESPACE","\n    ",901],"{",["T_WHITESPACE","\n        ",902],["T_VARIABLE","$this",903],["T_OBJECT_OPERATOR","->",903],["T_STRING","addAttributeToSelect",903],"(",["T_CONSTANT_ENCAPSED_STRING","'price'",903],")",["T_OBJECT_OPERATOR","->",903],["T_STRING","addAttributeToSelect",903],"(",["T_CONSTANT_ENCAPSED_STRING","'minimal_price'",903],")",";",["T_WHITESPACE","\n        ",903],["T_RETURN","return",904],["T_WHITESPACE"," ",904],["T_VARIABLE","$this",904],";",["T_WHITESPACE","\n    ",904],"}",["T_WHITESPACE","\n\n    ",905],["T_DOC_COMMENT","\/**\n     * Retrieve max value by attribute\n     *\n     * @param string $attribute\n     * @return array|null\n     *\/",907],["T_WHITESPACE","\n    ",912],["T_PUBLIC","public",913],["T_WHITESPACE"," ",913],["T_FUNCTION","function",913],["T_WHITESPACE"," ",913],["T_STRING","getMaxAttributeValue",913],"(",["T_VARIABLE","$attribute",913],")",["T_WHITESPACE","\n    ",913],"{",["T_WHITESPACE","\n        ",914],["T_VARIABLE","$select",915],["T_WHITESPACE"," ",915],"=",["T_WHITESPACE"," ",915],["T_CLONE","clone",915],["T_WHITESPACE"," ",915],["T_VARIABLE","$this",915],["T_OBJECT_OPERATOR","->",915],["T_STRING","getSelect",915],"(",")",";",["T_WHITESPACE","\n        ",915],["T_VARIABLE","$attribute",916],["T_WHITESPACE"," ",916],"=",["T_WHITESPACE"," ",916],["T_VARIABLE","$this",916],["T_OBJECT_OPERATOR","->",916],["T_STRING","getEntity",916],"(",")",["T_OBJECT_OPERATOR","->",916],["T_STRING","getAttribute",916],"(",["T_VARIABLE","$attribute",916],")",";",["T_WHITESPACE","\n        ",916],["T_VARIABLE","$attributeCode",917],["T_WHITESPACE"," ",917],"=",["T_WHITESPACE"," ",917],["T_VARIABLE","$attribute",917],["T_OBJECT_OPERATOR","->",917],["T_STRING","getAttributeCode",917],"(",")",";",["T_WHITESPACE","\n        ",917],["T_VARIABLE","$tableAlias",918],["T_WHITESPACE"," ",918],"=",["T_WHITESPACE"," ",918],["T_VARIABLE","$attributeCode",918],["T_WHITESPACE"," ",918],".",["T_WHITESPACE"," ",918],["T_CONSTANT_ENCAPSED_STRING","'_max_value'",918],";",["T_WHITESPACE","\n        ",918],["T_VARIABLE","$fieldAlias",919],["T_WHITESPACE"," ",919],"=",["T_WHITESPACE"," ",919],["T_CONSTANT_ENCAPSED_STRING","'max_'",919],["T_WHITESPACE"," ",919],".",["T_WHITESPACE"," ",919],["T_VARIABLE","$attributeCode",919],";",["T_WHITESPACE","\n        ",919],["T_VARIABLE","$condition",920],["T_WHITESPACE"," ",920],"=",["T_WHITESPACE"," ",920],["T_CONSTANT_ENCAPSED_STRING","'e.entity_id = '",920],["T_WHITESPACE"," ",920],".",["T_WHITESPACE"," ",920],["T_VARIABLE","$tableAlias",920],["T_WHITESPACE"," ",920],".",["T_WHITESPACE"," ",920],["T_CONSTANT_ENCAPSED_STRING","'.entity_id AND '",920],["T_WHITESPACE"," ",920],".",["T_WHITESPACE"," ",920],["T_VARIABLE","$this",920],["T_OBJECT_OPERATOR","->",920],["T_STRING","_getConditionSql",920],"(",["T_WHITESPACE","\n            ",920],["T_VARIABLE","$tableAlias",921],["T_WHITESPACE"," ",921],".",["T_WHITESPACE"," ",921],["T_CONSTANT_ENCAPSED_STRING","'.attribute_id'",921],",",["T_WHITESPACE","\n            ",921],["T_VARIABLE","$attribute",922],["T_OBJECT_OPERATOR","->",922],["T_STRING","getId",922],"(",")",["T_WHITESPACE","\n        ",922],")",";",["T_WHITESPACE","\n\n        ",923],["T_VARIABLE","$select",925],["T_OBJECT_OPERATOR","->",925],["T_STRING","join",925],"(",["T_WHITESPACE","\n            ",925],"[",["T_VARIABLE","$tableAlias",926],["T_WHITESPACE"," ",926],["T_DOUBLE_ARROW","=>",926],["T_WHITESPACE"," ",926],["T_VARIABLE","$attribute",926],["T_OBJECT_OPERATOR","->",926],["T_STRING","getBackend",926],"(",")",["T_OBJECT_OPERATOR","->",926],["T_STRING","getTable",926],"(",")","]",",",["T_WHITESPACE","\n            ",926],["T_VARIABLE","$condition",927],",",["T_WHITESPACE","\n            ",927],"[",["T_VARIABLE","$fieldAlias",928],["T_WHITESPACE"," ",928],["T_DOUBLE_ARROW","=>",928],["T_WHITESPACE"," ",928],["T_NEW","new",928],["T_WHITESPACE"," ",928],["T_NS_SEPARATOR","\\",928],["T_STRING","Zend_Db_Expr",928],"(",["T_CONSTANT_ENCAPSED_STRING","'MAX('",928],["T_WHITESPACE"," ",928],".",["T_WHITESPACE"," ",928],["T_VARIABLE","$tableAlias",928],["T_WHITESPACE"," ",928],".",["T_WHITESPACE"," ",928],["T_CONSTANT_ENCAPSED_STRING","'.value)'",928],")","]",["T_WHITESPACE","\n        ",928],")",["T_OBJECT_OPERATOR","->",929],["T_STRING","group",929],"(",["T_WHITESPACE","\n            ",929],["T_CONSTANT_ENCAPSED_STRING","'e.entity_type_id'",930],["T_WHITESPACE","\n        ",930],")",";",["T_WHITESPACE","\n\n        ",931],["T_VARIABLE","$data",933],["T_WHITESPACE"," ",933],"=",["T_WHITESPACE"," ",933],["T_VARIABLE","$this",933],["T_OBJECT_OPERATOR","->",933],["T_STRING","getConnection",933],"(",")",["T_OBJECT_OPERATOR","->",933],["T_STRING","fetchRow",933],"(",["T_VARIABLE","$select",933],")",";",["T_WHITESPACE","\n        ",933],["T_IF","if",934],["T_WHITESPACE"," ",934],"(",["T_ISSET","isset",934],"(",["T_VARIABLE","$data",934],"[",["T_VARIABLE","$fieldAlias",934],"]",")",")",["T_WHITESPACE"," ",934],"{",["T_WHITESPACE","\n            ",934],["T_RETURN","return",935],["T_WHITESPACE"," ",935],["T_VARIABLE","$data",935],"[",["T_VARIABLE","$fieldAlias",935],"]",";",["T_WHITESPACE","\n        ",935],"}",["T_WHITESPACE","\n\n        ",936],["T_RETURN","return",938],["T_WHITESPACE"," ",938],["T_STRING","null",938],";",["T_WHITESPACE","\n    ",938],"}",["T_WHITESPACE","\n\n    ",939],["T_DOC_COMMENT","\/**\n     * Retrieve ranging product count for arrtibute range\n     *\n     * @param string $attribute\n     * @param int $range\n     * @return array\n     *\/",941],["T_WHITESPACE","\n    ",947],["T_PUBLIC","public",948],["T_WHITESPACE"," ",948],["T_FUNCTION","function",948],["T_WHITESPACE"," ",948],["T_STRING","getAttributeValueCountByRange",948],"(",["T_VARIABLE","$attribute",948],",",["T_WHITESPACE"," ",948],["T_VARIABLE","$range",948],")",["T_WHITESPACE","\n    ",948],"{",["T_WHITESPACE","\n        ",949],["T_VARIABLE","$select",950],["T_WHITESPACE"," ",950],"=",["T_WHITESPACE"," ",950],["T_CLONE","clone",950],["T_WHITESPACE"," ",950],["T_VARIABLE","$this",950],["T_OBJECT_OPERATOR","->",950],["T_STRING","getSelect",950],"(",")",";",["T_WHITESPACE","\n        ",950],["T_VARIABLE","$attribute",951],["T_WHITESPACE"," ",951],"=",["T_WHITESPACE"," ",951],["T_VARIABLE","$this",951],["T_OBJECT_OPERATOR","->",951],["T_STRING","getEntity",951],"(",")",["T_OBJECT_OPERATOR","->",951],["T_STRING","getAttribute",951],"(",["T_VARIABLE","$attribute",951],")",";",["T_WHITESPACE","\n        ",951],["T_VARIABLE","$attributeCode",952],["T_WHITESPACE"," ",952],"=",["T_WHITESPACE"," ",952],["T_VARIABLE","$attribute",952],["T_OBJECT_OPERATOR","->",952],["T_STRING","getAttributeCode",952],"(",")",";",["T_WHITESPACE","\n        ",952],["T_VARIABLE","$tableAlias",953],["T_WHITESPACE"," ",953],"=",["T_WHITESPACE"," ",953],["T_VARIABLE","$attributeCode",953],["T_WHITESPACE"," ",953],".",["T_WHITESPACE"," ",953],["T_CONSTANT_ENCAPSED_STRING","'_range_count_value'",953],";",["T_WHITESPACE","\n\n        ",953],["T_VARIABLE","$condition",955],["T_WHITESPACE"," ",955],"=",["T_WHITESPACE"," ",955],["T_CONSTANT_ENCAPSED_STRING","'e.entity_id = '",955],["T_WHITESPACE"," ",955],".",["T_WHITESPACE"," ",955],["T_VARIABLE","$tableAlias",955],["T_WHITESPACE"," ",955],".",["T_WHITESPACE"," ",955],["T_CONSTANT_ENCAPSED_STRING","'.entity_id AND '",955],["T_WHITESPACE"," ",955],".",["T_WHITESPACE"," ",955],["T_VARIABLE","$this",955],["T_OBJECT_OPERATOR","->",955],["T_STRING","_getConditionSql",955],"(",["T_WHITESPACE","\n            ",955],["T_VARIABLE","$tableAlias",956],["T_WHITESPACE"," ",956],".",["T_WHITESPACE"," ",956],["T_CONSTANT_ENCAPSED_STRING","'.attribute_id'",956],",",["T_WHITESPACE","\n            ",956],["T_VARIABLE","$attribute",957],["T_OBJECT_OPERATOR","->",957],["T_STRING","getId",957],"(",")",["T_WHITESPACE","\n        ",957],")",";",["T_WHITESPACE","\n\n        ",958],["T_VARIABLE","$select",960],["T_OBJECT_OPERATOR","->",960],["T_STRING","reset",960],"(",["T_NS_SEPARATOR","\\",960],["T_STRING","Magento",960],["T_NS_SEPARATOR","\\",960],["T_STRING","Framework",960],["T_NS_SEPARATOR","\\",960],["T_STRING","DB",960],["T_NS_SEPARATOR","\\",960],["T_STRING","Select",960],["T_DOUBLE_COLON","::",960],["T_STRING","GROUP",960],")",";",["T_WHITESPACE","\n        ",960],["T_VARIABLE","$select",961],["T_OBJECT_OPERATOR","->",961],["T_STRING","join",961],"(",["T_WHITESPACE","\n            ",961],"[",["T_VARIABLE","$tableAlias",962],["T_WHITESPACE"," ",962],["T_DOUBLE_ARROW","=>",962],["T_WHITESPACE"," ",962],["T_VARIABLE","$attribute",962],["T_OBJECT_OPERATOR","->",962],["T_STRING","getBackend",962],"(",")",["T_OBJECT_OPERATOR","->",962],["T_STRING","getTable",962],"(",")","]",",",["T_WHITESPACE","\n            ",962],["T_VARIABLE","$condition",963],",",["T_WHITESPACE","\n            ",963],"[",["T_WHITESPACE","\n                ",964],["T_CONSTANT_ENCAPSED_STRING","'count_'",965],["T_WHITESPACE"," ",965],".",["T_WHITESPACE"," ",965],["T_VARIABLE","$attributeCode",965],["T_WHITESPACE"," ",965],["T_DOUBLE_ARROW","=>",965],["T_WHITESPACE"," ",965],["T_NEW","new",965],["T_WHITESPACE"," ",965],["T_NS_SEPARATOR","\\",965],["T_STRING","Zend_Db_Expr",965],"(",["T_CONSTANT_ENCAPSED_STRING","'COUNT(DISTINCT e.entity_id)'",965],")",",",["T_WHITESPACE","\n                ",965],["T_CONSTANT_ENCAPSED_STRING","'range_'",966],["T_WHITESPACE"," ",966],".",["T_WHITESPACE"," ",966],["T_VARIABLE","$attributeCode",966],["T_WHITESPACE"," ",966],["T_DOUBLE_ARROW","=>",966],["T_WHITESPACE"," ",966],["T_NEW","new",966],["T_WHITESPACE"," ",966],["T_NS_SEPARATOR","\\",966],["T_STRING","Zend_Db_Expr",966],"(",["T_CONSTANT_ENCAPSED_STRING","'CEIL(('",966],["T_WHITESPACE"," ",966],".",["T_WHITESPACE"," ",966],["T_VARIABLE","$tableAlias",966],["T_WHITESPACE"," ",966],".",["T_WHITESPACE"," ",966],["T_CONSTANT_ENCAPSED_STRING","'.value+0.01)\/'",966],["T_WHITESPACE"," ",966],".",["T_WHITESPACE"," ",966],["T_VARIABLE","$range",966],["T_WHITESPACE"," ",966],".",["T_WHITESPACE"," ",966],["T_CONSTANT_ENCAPSED_STRING","')'",966],")",["T_WHITESPACE","\n            ",966],"]",["T_WHITESPACE","\n        ",967],")",["T_OBJECT_OPERATOR","->",968],["T_STRING","group",968],"(",["T_WHITESPACE","\n            ",968],["T_CONSTANT_ENCAPSED_STRING","'range_'",969],["T_WHITESPACE"," ",969],".",["T_WHITESPACE"," ",969],["T_VARIABLE","$attributeCode",969],["T_WHITESPACE","\n        ",969],")",";",["T_WHITESPACE","\n\n        ",970],["T_VARIABLE","$data",972],["T_WHITESPACE"," ",972],"=",["T_WHITESPACE"," ",972],["T_VARIABLE","$this",972],["T_OBJECT_OPERATOR","->",972],["T_STRING","getConnection",972],"(",")",["T_OBJECT_OPERATOR","->",972],["T_STRING","fetchAll",972],"(",["T_VARIABLE","$select",972],")",";",["T_WHITESPACE","\n        ",972],["T_VARIABLE","$res",973],["T_WHITESPACE"," ",973],"=",["T_WHITESPACE"," ",973],"[","]",";",["T_WHITESPACE","\n\n        ",973],["T_FOREACH","foreach",975],["T_WHITESPACE"," ",975],"(",["T_VARIABLE","$data",975],["T_WHITESPACE"," ",975],["T_AS","as",975],["T_WHITESPACE"," ",975],["T_VARIABLE","$row",975],")",["T_WHITESPACE"," ",975],"{",["T_WHITESPACE","\n            ",975],["T_VARIABLE","$res",976],"[",["T_VARIABLE","$row",976],"[",["T_CONSTANT_ENCAPSED_STRING","'range_'",976],["T_WHITESPACE"," ",976],".",["T_WHITESPACE"," ",976],["T_VARIABLE","$attributeCode",976],"]","]",["T_WHITESPACE"," ",976],"=",["T_WHITESPACE"," ",976],["T_VARIABLE","$row",976],"[",["T_CONSTANT_ENCAPSED_STRING","'count_'",976],["T_WHITESPACE"," ",976],".",["T_WHITESPACE"," ",976],["T_VARIABLE","$attributeCode",976],"]",";",["T_WHITESPACE","\n        ",976],"}",["T_WHITESPACE","\n        ",977],["T_RETURN","return",978],["T_WHITESPACE"," ",978],["T_VARIABLE","$res",978],";",["T_WHITESPACE","\n    ",978],"}",["T_WHITESPACE","\n\n    ",979],["T_DOC_COMMENT","\/**\n     * Retrieve product count by some value of attribute\n     *\n     * @param string $attribute\n     * @return array ($value => $count)\n     *\/",981],["T_WHITESPACE","\n    ",986],["T_PUBLIC","public",987],["T_WHITESPACE"," ",987],["T_FUNCTION","function",987],["T_WHITESPACE"," ",987],["T_STRING","getAttributeValueCount",987],"(",["T_VARIABLE","$attribute",987],")",["T_WHITESPACE","\n    ",987],"{",["T_WHITESPACE","\n        ",988],["T_VARIABLE","$select",989],["T_WHITESPACE"," ",989],"=",["T_WHITESPACE"," ",989],["T_CLONE","clone",989],["T_WHITESPACE"," ",989],["T_VARIABLE","$this",989],["T_OBJECT_OPERATOR","->",989],["T_STRING","getSelect",989],"(",")",";",["T_WHITESPACE","\n        ",989],["T_VARIABLE","$attribute",990],["T_WHITESPACE"," ",990],"=",["T_WHITESPACE"," ",990],["T_VARIABLE","$this",990],["T_OBJECT_OPERATOR","->",990],["T_STRING","getEntity",990],"(",")",["T_OBJECT_OPERATOR","->",990],["T_STRING","getAttribute",990],"(",["T_VARIABLE","$attribute",990],")",";",["T_WHITESPACE","\n        ",990],["T_VARIABLE","$attributeCode",991],["T_WHITESPACE"," ",991],"=",["T_WHITESPACE"," ",991],["T_VARIABLE","$attribute",991],["T_OBJECT_OPERATOR","->",991],["T_STRING","getAttributeCode",991],"(",")",";",["T_WHITESPACE","\n        ",991],["T_VARIABLE","$tableAlias",992],["T_WHITESPACE"," ",992],"=",["T_WHITESPACE"," ",992],["T_VARIABLE","$attributeCode",992],["T_WHITESPACE"," ",992],".",["T_WHITESPACE"," ",992],["T_CONSTANT_ENCAPSED_STRING","'_value_count'",992],";",["T_WHITESPACE","\n\n        ",992],["T_VARIABLE","$select",994],["T_OBJECT_OPERATOR","->",994],["T_STRING","reset",994],"(",["T_NS_SEPARATOR","\\",994],["T_STRING","Magento",994],["T_NS_SEPARATOR","\\",994],["T_STRING","Framework",994],["T_NS_SEPARATOR","\\",994],["T_STRING","DB",994],["T_NS_SEPARATOR","\\",994],["T_STRING","Select",994],["T_DOUBLE_COLON","::",994],["T_STRING","GROUP",994],")",";",["T_WHITESPACE","\n        ",994],["T_VARIABLE","$condition",995],["T_WHITESPACE"," ",995],"=",["T_WHITESPACE"," ",995],["T_CONSTANT_ENCAPSED_STRING","'e.entity_id='",995],["T_WHITESPACE"," ",995],".",["T_WHITESPACE"," ",995],["T_VARIABLE","$tableAlias",995],["T_WHITESPACE"," ",995],".",["T_WHITESPACE"," ",995],["T_CONSTANT_ENCAPSED_STRING","'.entity_id AND '",995],["T_WHITESPACE"," ",995],".",["T_WHITESPACE"," ",995],["T_VARIABLE","$this",995],["T_OBJECT_OPERATOR","->",995],["T_STRING","_getConditionSql",995],"(",["T_WHITESPACE","\n            ",995],["T_VARIABLE","$tableAlias",996],["T_WHITESPACE"," ",996],".",["T_WHITESPACE"," ",996],["T_CONSTANT_ENCAPSED_STRING","'.attribute_id'",996],",",["T_WHITESPACE","\n            ",996],["T_VARIABLE","$attribute",997],["T_OBJECT_OPERATOR","->",997],["T_STRING","getId",997],"(",")",["T_WHITESPACE","\n        ",997],")",";",["T_WHITESPACE","\n\n        ",998],["T_VARIABLE","$select",1000],["T_OBJECT_OPERATOR","->",1000],["T_STRING","join",1000],"(",["T_WHITESPACE","\n            ",1000],"[",["T_VARIABLE","$tableAlias",1001],["T_WHITESPACE"," ",1001],["T_DOUBLE_ARROW","=>",1001],["T_WHITESPACE"," ",1001],["T_VARIABLE","$attribute",1001],["T_OBJECT_OPERATOR","->",1001],["T_STRING","getBackend",1001],"(",")",["T_OBJECT_OPERATOR","->",1001],["T_STRING","getTable",1001],"(",")","]",",",["T_WHITESPACE","\n            ",1001],["T_VARIABLE","$condition",1002],",",["T_WHITESPACE","\n            ",1002],"[",["T_WHITESPACE","\n                ",1003],["T_CONSTANT_ENCAPSED_STRING","'count_'",1004],["T_WHITESPACE"," ",1004],".",["T_WHITESPACE"," ",1004],["T_VARIABLE","$attributeCode",1004],["T_WHITESPACE"," ",1004],["T_DOUBLE_ARROW","=>",1004],["T_WHITESPACE"," ",1004],["T_NEW","new",1004],["T_WHITESPACE"," ",1004],["T_NS_SEPARATOR","\\",1004],["T_STRING","Zend_Db_Expr",1004],"(",["T_CONSTANT_ENCAPSED_STRING","'COUNT(DISTINCT e.entity_id)'",1004],")",",",["T_WHITESPACE","\n                ",1004],["T_CONSTANT_ENCAPSED_STRING","'value_'",1005],["T_WHITESPACE"," ",1005],".",["T_WHITESPACE"," ",1005],["T_VARIABLE","$attributeCode",1005],["T_WHITESPACE"," ",1005],["T_DOUBLE_ARROW","=>",1005],["T_WHITESPACE"," ",1005],["T_NEW","new",1005],["T_WHITESPACE"," ",1005],["T_NS_SEPARATOR","\\",1005],["T_STRING","Zend_Db_Expr",1005],"(",["T_VARIABLE","$tableAlias",1005],["T_WHITESPACE"," ",1005],".",["T_WHITESPACE"," ",1005],["T_CONSTANT_ENCAPSED_STRING","'.value'",1005],")",["T_WHITESPACE","\n            ",1005],"]",["T_WHITESPACE","\n        ",1006],")",["T_OBJECT_OPERATOR","->",1007],["T_STRING","group",1007],"(",["T_WHITESPACE","\n            ",1007],["T_CONSTANT_ENCAPSED_STRING","'value_'",1008],["T_WHITESPACE"," ",1008],".",["T_WHITESPACE"," ",1008],["T_VARIABLE","$attributeCode",1008],["T_WHITESPACE","\n        ",1008],")",";",["T_WHITESPACE","\n\n        ",1009],["T_VARIABLE","$data",1011],["T_WHITESPACE"," ",1011],"=",["T_WHITESPACE"," ",1011],["T_VARIABLE","$this",1011],["T_OBJECT_OPERATOR","->",1011],["T_STRING","getConnection",1011],"(",")",["T_OBJECT_OPERATOR","->",1011],["T_STRING","fetchAll",1011],"(",["T_VARIABLE","$select",1011],")",";",["T_WHITESPACE","\n        ",1011],["T_VARIABLE","$res",1012],["T_WHITESPACE"," ",1012],"=",["T_WHITESPACE"," ",1012],"[","]",";",["T_WHITESPACE","\n\n        ",1012],["T_FOREACH","foreach",1014],["T_WHITESPACE"," ",1014],"(",["T_VARIABLE","$data",1014],["T_WHITESPACE"," ",1014],["T_AS","as",1014],["T_WHITESPACE"," ",1014],["T_VARIABLE","$row",1014],")",["T_WHITESPACE"," ",1014],"{",["T_WHITESPACE","\n            ",1014],["T_VARIABLE","$res",1015],"[",["T_VARIABLE","$row",1015],"[",["T_CONSTANT_ENCAPSED_STRING","'value_'",1015],["T_WHITESPACE"," ",1015],".",["T_WHITESPACE"," ",1015],["T_VARIABLE","$attributeCode",1015],"]","]",["T_WHITESPACE"," ",1015],"=",["T_WHITESPACE"," ",1015],["T_VARIABLE","$row",1015],"[",["T_CONSTANT_ENCAPSED_STRING","'count_'",1015],["T_WHITESPACE"," ",1015],".",["T_WHITESPACE"," ",1015],["T_VARIABLE","$attributeCode",1015],"]",";",["T_WHITESPACE","\n        ",1015],"}",["T_WHITESPACE","\n        ",1016],["T_RETURN","return",1017],["T_WHITESPACE"," ",1017],["T_VARIABLE","$res",1017],";",["T_WHITESPACE","\n    ",1017],"}",["T_WHITESPACE","\n\n    ",1018],["T_DOC_COMMENT","\/**\n     * Return all attribute values as array in form:\n     * array(\n     *   [entity_id_1] => array(\n     *          [store_id_1] => store_value_1,\n     *          [store_id_2] => store_value_2,\n     *          ...\n     *          [store_id_n] => store_value_n\n     *   ),\n     *   ...\n     * )\n     *\n     * @param string $attribute attribute code\n     * @return array\n     *\/",1020],["T_WHITESPACE","\n    ",1034],["T_PUBLIC","public",1035],["T_WHITESPACE"," ",1035],["T_FUNCTION","function",1035],["T_WHITESPACE"," ",1035],["T_STRING","getAllAttributeValues",1035],"(",["T_VARIABLE","$attribute",1035],")",["T_WHITESPACE","\n    ",1035],"{",["T_WHITESPACE","\n        ",1036],["T_DOC_COMMENT","\/** @var $select \\Magento\\Framework\\DB\\Select *\/",1037],["T_WHITESPACE","\n        ",1037],["T_VARIABLE","$select",1038],["T_WHITESPACE"," ",1038],"=",["T_WHITESPACE"," ",1038],["T_CLONE","clone",1038],["T_WHITESPACE"," ",1038],["T_VARIABLE","$this",1038],["T_OBJECT_OPERATOR","->",1038],["T_STRING","getSelect",1038],"(",")",";",["T_WHITESPACE","\n        ",1038],["T_VARIABLE","$attribute",1039],["T_WHITESPACE"," ",1039],"=",["T_WHITESPACE"," ",1039],["T_VARIABLE","$this",1039],["T_OBJECT_OPERATOR","->",1039],["T_STRING","getEntity",1039],"(",")",["T_OBJECT_OPERATOR","->",1039],["T_STRING","getAttribute",1039],"(",["T_VARIABLE","$attribute",1039],")",";",["T_WHITESPACE","\n\n        ",1039],["T_VARIABLE","$aiField",1041],["T_WHITESPACE"," ",1041],"=",["T_WHITESPACE"," ",1041],["T_VARIABLE","$this",1041],["T_OBJECT_OPERATOR","->",1041],["T_STRING","getConnection",1041],"(",")",["T_OBJECT_OPERATOR","->",1041],["T_STRING","getAutoIncrementField",1041],"(",["T_VARIABLE","$this",1041],["T_OBJECT_OPERATOR","->",1041],["T_STRING","getMainTable",1041],"(",")",")",";",["T_WHITESPACE","\n        ",1041],["T_VARIABLE","$select",1042],["T_OBJECT_OPERATOR","->",1042],["T_STRING","reset",1042],"(",")",["T_WHITESPACE","\n            ",1042],["T_OBJECT_OPERATOR","->",1043],["T_STRING","from",1043],"(",["T_WHITESPACE","\n                ",1043],"[",["T_CONSTANT_ENCAPSED_STRING","'cpe'",1044],["T_WHITESPACE"," ",1044],["T_DOUBLE_ARROW","=>",1044],["T_WHITESPACE"," ",1044],["T_VARIABLE","$this",1044],["T_OBJECT_OPERATOR","->",1044],["T_STRING","getMainTable",1044],"(",")","]",",",["T_WHITESPACE","\n                ",1044],"[",["T_CONSTANT_ENCAPSED_STRING","'entity_id'",1045],"]",["T_WHITESPACE","\n            ",1045],")",["T_OBJECT_OPERATOR","->",1046],["T_STRING","join",1046],"(",["T_WHITESPACE","\n                ",1046],"[",["T_CONSTANT_ENCAPSED_STRING","'cpa'",1047],["T_WHITESPACE"," ",1047],["T_DOUBLE_ARROW","=>",1047],["T_WHITESPACE"," ",1047],["T_VARIABLE","$attribute",1047],["T_OBJECT_OPERATOR","->",1047],["T_STRING","getBackend",1047],"(",")",["T_OBJECT_OPERATOR","->",1047],["T_STRING","getTable",1047],"(",")","]",",",["T_WHITESPACE","\n                ",1047],["T_CONSTANT_ENCAPSED_STRING","'cpe.'",1048],["T_WHITESPACE"," ",1048],".",["T_WHITESPACE"," ",1048],["T_VARIABLE","$aiField",1048],["T_WHITESPACE"," ",1048],".",["T_WHITESPACE"," ",1048],["T_CONSTANT_ENCAPSED_STRING","' = cpa.'",1048],["T_WHITESPACE"," ",1048],".",["T_WHITESPACE"," ",1048],["T_VARIABLE","$aiField",1048],",",["T_WHITESPACE","\n                ",1048],"[",["T_CONSTANT_ENCAPSED_STRING","'store_id'",1049],",",["T_WHITESPACE"," ",1049],["T_CONSTANT_ENCAPSED_STRING","'value'",1049],"]",["T_WHITESPACE","\n            ",1049],")",["T_OBJECT_OPERATOR","->",1050],["T_STRING","where",1050],"(",["T_CONSTANT_ENCAPSED_STRING","'attribute_id = ?'",1050],",",["T_WHITESPACE"," ",1050],["T_INT_CAST","(int)",1050],["T_VARIABLE","$attribute",1050],["T_OBJECT_OPERATOR","->",1050],["T_STRING","getId",1050],"(",")",")",";",["T_WHITESPACE","\n\n        ",1050],["T_VARIABLE","$data",1052],["T_WHITESPACE"," ",1052],"=",["T_WHITESPACE"," ",1052],["T_VARIABLE","$this",1052],["T_OBJECT_OPERATOR","->",1052],["T_STRING","getConnection",1052],"(",")",["T_OBJECT_OPERATOR","->",1052],["T_STRING","fetchAll",1052],"(",["T_VARIABLE","$select",1052],")",";",["T_WHITESPACE","\n        ",1052],["T_VARIABLE","$res",1053],["T_WHITESPACE"," ",1053],"=",["T_WHITESPACE"," ",1053],"[","]",";",["T_WHITESPACE","\n\n        ",1053],["T_FOREACH","foreach",1055],["T_WHITESPACE"," ",1055],"(",["T_VARIABLE","$data",1055],["T_WHITESPACE"," ",1055],["T_AS","as",1055],["T_WHITESPACE"," ",1055],["T_VARIABLE","$row",1055],")",["T_WHITESPACE"," ",1055],"{",["T_WHITESPACE","\n            ",1055],["T_VARIABLE","$res",1056],"[",["T_VARIABLE","$row",1056],"[",["T_CONSTANT_ENCAPSED_STRING","'entity_id'",1056],"]","]","[",["T_VARIABLE","$row",1056],"[",["T_CONSTANT_ENCAPSED_STRING","'store_id'",1056],"]","]",["T_WHITESPACE"," ",1056],"=",["T_WHITESPACE"," ",1056],["T_VARIABLE","$row",1056],"[",["T_CONSTANT_ENCAPSED_STRING","'value'",1056],"]",";",["T_WHITESPACE","\n        ",1056],"}",["T_WHITESPACE","\n\n        ",1057],["T_RETURN","return",1059],["T_WHITESPACE"," ",1059],["T_VARIABLE","$res",1059],";",["T_WHITESPACE","\n    ",1059],"}",["T_WHITESPACE","\n\n    ",1060],["T_DOC_COMMENT","\/**\n     * Get SQL for get record count without left JOINs\n     *\n     * @return \\Magento\\Framework\\DB\\Select\n     *\/",1062],["T_WHITESPACE","\n    ",1066],["T_PUBLIC","public",1067],["T_WHITESPACE"," ",1067],["T_FUNCTION","function",1067],["T_WHITESPACE"," ",1067],["T_STRING","getSelectCountSql",1067],"(",")",["T_WHITESPACE","\n    ",1067],"{",["T_WHITESPACE","\n        ",1068],["T_RETURN","return",1069],["T_WHITESPACE"," ",1069],["T_VARIABLE","$this",1069],["T_OBJECT_OPERATOR","->",1069],["T_STRING","_getSelectCountSql",1069],"(",")",";",["T_WHITESPACE","\n    ",1069],"}",["T_WHITESPACE","\n\n    ",1070],["T_DOC_COMMENT","\/**\n     * Get SQL for get record count\n     *\n     * @param null $select\n     * @param bool $resetLeftJoins\n     * @return \\Magento\\Framework\\DB\\Select\n     *\/",1072],["T_WHITESPACE","\n    ",1078],["T_PROTECTED","protected",1079],["T_WHITESPACE"," ",1079],["T_FUNCTION","function",1079],["T_WHITESPACE"," ",1079],["T_STRING","_getSelectCountSql",1079],"(",["T_VARIABLE","$select",1079],["T_WHITESPACE"," ",1079],"=",["T_WHITESPACE"," ",1079],["T_STRING","null",1079],",",["T_WHITESPACE"," ",1079],["T_VARIABLE","$resetLeftJoins",1079],["T_WHITESPACE"," ",1079],"=",["T_WHITESPACE"," ",1079],["T_STRING","true",1079],")",["T_WHITESPACE","\n    ",1079],"{",["T_WHITESPACE","\n        ",1080],["T_VARIABLE","$this",1081],["T_OBJECT_OPERATOR","->",1081],["T_STRING","_renderFilters",1081],"(",")",";",["T_WHITESPACE","\n        ",1081],["T_VARIABLE","$countSelect",1082],["T_WHITESPACE"," ",1082],"=",["T_WHITESPACE"," ",1082],["T_STRING","is_null",1082],"(",["T_VARIABLE","$select",1082],")",["T_WHITESPACE"," ",1082],"?",["T_WHITESPACE"," ",1082],["T_VARIABLE","$this",1082],["T_OBJECT_OPERATOR","->",1082],["T_STRING","_getClearSelect",1082],"(",")",["T_WHITESPACE"," ",1082],":",["T_WHITESPACE"," ",1082],["T_VARIABLE","$this",1082],["T_OBJECT_OPERATOR","->",1082],["T_STRING","_buildClearSelect",1082],"(",["T_VARIABLE","$select",1082],")",";",["T_WHITESPACE","\n        ",1082],["T_VARIABLE","$countSelect",1083],["T_OBJECT_OPERATOR","->",1083],["T_STRING","columns",1083],"(",["T_CONSTANT_ENCAPSED_STRING","'COUNT(DISTINCT e.entity_id)'",1083],")",";",["T_WHITESPACE","\n        ",1083],["T_IF","if",1084],["T_WHITESPACE"," ",1084],"(",["T_VARIABLE","$resetLeftJoins",1084],")",["T_WHITESPACE"," ",1084],"{",["T_WHITESPACE","\n            ",1084],["T_VARIABLE","$countSelect",1085],["T_OBJECT_OPERATOR","->",1085],["T_STRING","resetJoinLeft",1085],"(",")",";",["T_WHITESPACE","\n        ",1085],"}",["T_WHITESPACE","\n        ",1086],["T_RETURN","return",1087],["T_WHITESPACE"," ",1087],["T_VARIABLE","$countSelect",1087],";",["T_WHITESPACE","\n    ",1087],"}",["T_WHITESPACE","\n\n    ",1088],["T_DOC_COMMENT","\/**\n     * Prepare statistics data\n     *\n     * @return $this\n     *\/",1090],["T_WHITESPACE","\n    ",1094],["T_PROTECTED","protected",1095],["T_WHITESPACE"," ",1095],["T_FUNCTION","function",1095],["T_WHITESPACE"," ",1095],["T_STRING","_prepareStatisticsData",1095],"(",")",["T_WHITESPACE","\n    ",1095],"{",["T_WHITESPACE","\n        ",1096],["T_VARIABLE","$select",1097],["T_WHITESPACE"," ",1097],"=",["T_WHITESPACE"," ",1097],["T_CLONE","clone",1097],["T_WHITESPACE"," ",1097],["T_VARIABLE","$this",1097],["T_OBJECT_OPERATOR","->",1097],["T_STRING","getSelect",1097],"(",")",";",["T_WHITESPACE","\n        ",1097],["T_VARIABLE","$priceExpression",1098],["T_WHITESPACE"," ",1098],"=",["T_WHITESPACE"," ",1098],["T_VARIABLE","$this",1098],["T_OBJECT_OPERATOR","->",1098],["T_STRING","getPriceExpression",1098],"(",["T_VARIABLE","$select",1098],")",["T_WHITESPACE"," ",1098],".",["T_WHITESPACE"," ",1098],["T_CONSTANT_ENCAPSED_STRING","' '",1098],["T_WHITESPACE"," ",1098],".",["T_WHITESPACE"," ",1098],["T_VARIABLE","$this",1098],["T_OBJECT_OPERATOR","->",1098],["T_STRING","getAdditionalPriceExpression",1098],"(",["T_VARIABLE","$select",1098],")",";",["T_WHITESPACE","\n        ",1098],["T_VARIABLE","$sqlEndPart",1099],["T_WHITESPACE"," ",1099],"=",["T_WHITESPACE"," ",1099],["T_CONSTANT_ENCAPSED_STRING","') * '",1099],["T_WHITESPACE"," ",1099],".",["T_WHITESPACE"," ",1099],["T_VARIABLE","$this",1099],["T_OBJECT_OPERATOR","->",1099],["T_STRING","getCurrencyRate",1099],"(",")",["T_WHITESPACE"," ",1099],".",["T_WHITESPACE"," ",1099],["T_CONSTANT_ENCAPSED_STRING","', 2)'",1099],";",["T_WHITESPACE","\n        ",1099],["T_VARIABLE","$select",1100],["T_WHITESPACE"," ",1100],"=",["T_WHITESPACE"," ",1100],["T_VARIABLE","$this",1100],["T_OBJECT_OPERATOR","->",1100],["T_STRING","_getSelectCountSql",1100],"(",["T_VARIABLE","$select",1100],",",["T_WHITESPACE"," ",1100],["T_STRING","false",1100],")",";",["T_WHITESPACE","\n        ",1100],["T_VARIABLE","$select",1101],["T_OBJECT_OPERATOR","->",1101],["T_STRING","columns",1101],"(",["T_WHITESPACE","\n            ",1101],"[",["T_WHITESPACE","\n                ",1102],["T_CONSTANT_ENCAPSED_STRING","'max'",1103],["T_WHITESPACE"," ",1103],["T_DOUBLE_ARROW","=>",1103],["T_WHITESPACE"," ",1103],["T_CONSTANT_ENCAPSED_STRING","'ROUND(MAX('",1103],["T_WHITESPACE"," ",1103],".",["T_WHITESPACE"," ",1103],["T_VARIABLE","$priceExpression",1103],["T_WHITESPACE"," ",1103],".",["T_WHITESPACE"," ",1103],["T_VARIABLE","$sqlEndPart",1103],",",["T_WHITESPACE","\n                ",1103],["T_CONSTANT_ENCAPSED_STRING","'min'",1104],["T_WHITESPACE"," ",1104],["T_DOUBLE_ARROW","=>",1104],["T_WHITESPACE"," ",1104],["T_CONSTANT_ENCAPSED_STRING","'ROUND(MIN('",1104],["T_WHITESPACE"," ",1104],".",["T_WHITESPACE"," ",1104],["T_VARIABLE","$priceExpression",1104],["T_WHITESPACE"," ",1104],".",["T_WHITESPACE"," ",1104],["T_VARIABLE","$sqlEndPart",1104],",",["T_WHITESPACE","\n                ",1104],["T_CONSTANT_ENCAPSED_STRING","'std'",1105],["T_WHITESPACE"," ",1105],["T_DOUBLE_ARROW","=>",1105],["T_WHITESPACE"," ",1105],["T_VARIABLE","$this",1105],["T_OBJECT_OPERATOR","->",1105],["T_STRING","getConnection",1105],"(",")",["T_OBJECT_OPERATOR","->",1105],["T_STRING","getStandardDeviationSql",1105],"(",["T_CONSTANT_ENCAPSED_STRING","'ROUND(('",1105],["T_WHITESPACE"," ",1105],".",["T_WHITESPACE"," ",1105],["T_VARIABLE","$priceExpression",1105],["T_WHITESPACE"," ",1105],".",["T_WHITESPACE"," ",1105],["T_VARIABLE","$sqlEndPart",1105],")",",",["T_WHITESPACE","\n            ",1105],"]",["T_WHITESPACE","\n        ",1106],")",";",["T_WHITESPACE","\n        ",1107],["T_VARIABLE","$select",1108],["T_OBJECT_OPERATOR","->",1108],["T_STRING","where",1108],"(",["T_VARIABLE","$this",1108],["T_OBJECT_OPERATOR","->",1108],["T_STRING","getPriceExpression",1108],"(",["T_VARIABLE","$select",1108],")",["T_WHITESPACE"," ",1108],".",["T_WHITESPACE"," ",1108],["T_CONSTANT_ENCAPSED_STRING","' IS NOT NULL'",1108],")",";",["T_WHITESPACE","\n        ",1108],["T_VARIABLE","$row",1109],["T_WHITESPACE"," ",1109],"=",["T_WHITESPACE"," ",1109],["T_VARIABLE","$this",1109],["T_OBJECT_OPERATOR","->",1109],["T_STRING","getConnection",1109],"(",")",["T_OBJECT_OPERATOR","->",1109],["T_STRING","fetchRow",1109],"(",["T_VARIABLE","$select",1109],",",["T_WHITESPACE"," ",1109],["T_VARIABLE","$this",1109],["T_OBJECT_OPERATOR","->",1109],["T_STRING","_bindParams",1109],",",["T_WHITESPACE"," ",1109],["T_NS_SEPARATOR","\\",1109],["T_STRING","Zend_Db",1109],["T_DOUBLE_COLON","::",1109],["T_STRING","FETCH_NUM",1109],")",";",["T_WHITESPACE","\n        ",1109],["T_VARIABLE","$this",1110],["T_OBJECT_OPERATOR","->",1110],["T_STRING","_pricesCount",1110],["T_WHITESPACE"," ",1110],"=",["T_WHITESPACE"," ",1110],["T_INT_CAST","(int)",1110],["T_VARIABLE","$row",1110],"[",["T_LNUMBER","0",1110],"]",";",["T_WHITESPACE","\n        ",1110],["T_VARIABLE","$this",1111],["T_OBJECT_OPERATOR","->",1111],["T_STRING","_maxPrice",1111],["T_WHITESPACE"," ",1111],"=",["T_WHITESPACE"," ",1111],["T_DOUBLE_CAST","(double)",1111],["T_VARIABLE","$row",1111],"[",["T_LNUMBER","1",1111],"]",";",["T_WHITESPACE","\n        ",1111],["T_VARIABLE","$this",1112],["T_OBJECT_OPERATOR","->",1112],["T_STRING","_minPrice",1112],["T_WHITESPACE"," ",1112],"=",["T_WHITESPACE"," ",1112],["T_DOUBLE_CAST","(double)",1112],["T_VARIABLE","$row",1112],"[",["T_LNUMBER","2",1112],"]",";",["T_WHITESPACE","\n        ",1112],["T_VARIABLE","$this",1113],["T_OBJECT_OPERATOR","->",1113],["T_STRING","_priceStandardDeviation",1113],["T_WHITESPACE"," ",1113],"=",["T_WHITESPACE"," ",1113],["T_DOUBLE_CAST","(double)",1113],["T_VARIABLE","$row",1113],"[",["T_LNUMBER","3",1113],"]",";",["T_WHITESPACE","\n\n        ",1113],["T_RETURN","return",1115],["T_WHITESPACE"," ",1115],["T_VARIABLE","$this",1115],";",["T_WHITESPACE","\n    ",1115],"}",["T_WHITESPACE","\n\n    ",1116],["T_DOC_COMMENT","\/**\n     * Retrieve clear select\n     *\n     * @return \\Magento\\Framework\\DB\\Select\n     *\/",1118],["T_WHITESPACE","\n    ",1122],["T_PROTECTED","protected",1123],["T_WHITESPACE"," ",1123],["T_FUNCTION","function",1123],["T_WHITESPACE"," ",1123],["T_STRING","_getClearSelect",1123],"(",")",["T_WHITESPACE","\n    ",1123],"{",["T_WHITESPACE","\n        ",1124],["T_RETURN","return",1125],["T_WHITESPACE"," ",1125],["T_VARIABLE","$this",1125],["T_OBJECT_OPERATOR","->",1125],["T_STRING","_buildClearSelect",1125],"(",")",";",["T_WHITESPACE","\n    ",1125],"}",["T_WHITESPACE","\n\n    ",1126],["T_DOC_COMMENT","\/**\n     * Build clear select\n     *\n     * @param \\Magento\\Framework\\DB\\Select $select\n     * @return \\Magento\\Framework\\DB\\Select\n     *\/",1128],["T_WHITESPACE","\n    ",1133],["T_PROTECTED","protected",1134],["T_WHITESPACE"," ",1134],["T_FUNCTION","function",1134],["T_WHITESPACE"," ",1134],["T_STRING","_buildClearSelect",1134],"(",["T_VARIABLE","$select",1134],["T_WHITESPACE"," ",1134],"=",["T_WHITESPACE"," ",1134],["T_STRING","null",1134],")",["T_WHITESPACE","\n    ",1134],"{",["T_WHITESPACE","\n        ",1135],["T_IF","if",1136],["T_WHITESPACE"," ",1136],"(",["T_STRING","null",1136],["T_WHITESPACE"," ",1136],["T_IS_IDENTICAL","===",1136],["T_WHITESPACE"," ",1136],["T_VARIABLE","$select",1136],")",["T_WHITESPACE"," ",1136],"{",["T_WHITESPACE","\n            ",1136],["T_VARIABLE","$select",1137],["T_WHITESPACE"," ",1137],"=",["T_WHITESPACE"," ",1137],["T_CLONE","clone",1137],["T_WHITESPACE"," ",1137],["T_VARIABLE","$this",1137],["T_OBJECT_OPERATOR","->",1137],["T_STRING","getSelect",1137],"(",")",";",["T_WHITESPACE","\n        ",1137],"}",["T_WHITESPACE","\n        ",1138],["T_VARIABLE","$select",1139],["T_OBJECT_OPERATOR","->",1139],["T_STRING","reset",1139],"(",["T_NS_SEPARATOR","\\",1139],["T_STRING","Magento",1139],["T_NS_SEPARATOR","\\",1139],["T_STRING","Framework",1139],["T_NS_SEPARATOR","\\",1139],["T_STRING","DB",1139],["T_NS_SEPARATOR","\\",1139],["T_STRING","Select",1139],["T_DOUBLE_COLON","::",1139],["T_STRING","ORDER",1139],")",";",["T_WHITESPACE","\n        ",1139],["T_VARIABLE","$select",1140],["T_OBJECT_OPERATOR","->",1140],["T_STRING","reset",1140],"(",["T_NS_SEPARATOR","\\",1140],["T_STRING","Magento",1140],["T_NS_SEPARATOR","\\",1140],["T_STRING","Framework",1140],["T_NS_SEPARATOR","\\",1140],["T_STRING","DB",1140],["T_NS_SEPARATOR","\\",1140],["T_STRING","Select",1140],["T_DOUBLE_COLON","::",1140],["T_STRING","LIMIT_COUNT",1140],")",";",["T_WHITESPACE","\n        ",1140],["T_VARIABLE","$select",1141],["T_OBJECT_OPERATOR","->",1141],["T_STRING","reset",1141],"(",["T_NS_SEPARATOR","\\",1141],["T_STRING","Magento",1141],["T_NS_SEPARATOR","\\",1141],["T_STRING","Framework",1141],["T_NS_SEPARATOR","\\",1141],["T_STRING","DB",1141],["T_NS_SEPARATOR","\\",1141],["T_STRING","Select",1141],["T_DOUBLE_COLON","::",1141],["T_STRING","LIMIT_OFFSET",1141],")",";",["T_WHITESPACE","\n        ",1141],["T_VARIABLE","$select",1142],["T_OBJECT_OPERATOR","->",1142],["T_STRING","reset",1142],"(",["T_NS_SEPARATOR","\\",1142],["T_STRING","Magento",1142],["T_NS_SEPARATOR","\\",1142],["T_STRING","Framework",1142],["T_NS_SEPARATOR","\\",1142],["T_STRING","DB",1142],["T_NS_SEPARATOR","\\",1142],["T_STRING","Select",1142],["T_DOUBLE_COLON","::",1142],["T_STRING","COLUMNS",1142],")",";",["T_WHITESPACE","\n\n        ",1142],["T_RETURN","return",1144],["T_WHITESPACE"," ",1144],["T_VARIABLE","$select",1144],";",["T_WHITESPACE","\n    ",1144],"}",["T_WHITESPACE","\n\n    ",1145],["T_DOC_COMMENT","\/**\n     * Retrieve all ids for collection\n     *\n     * @param int|string $limit\n     * @param int|string $offset\n     * @return array\n     *\/",1147],["T_WHITESPACE","\n    ",1153],["T_PUBLIC","public",1154],["T_WHITESPACE"," ",1154],["T_FUNCTION","function",1154],["T_WHITESPACE"," ",1154],["T_STRING","getAllIds",1154],"(",["T_VARIABLE","$limit",1154],["T_WHITESPACE"," ",1154],"=",["T_WHITESPACE"," ",1154],["T_STRING","null",1154],",",["T_WHITESPACE"," ",1154],["T_VARIABLE","$offset",1154],["T_WHITESPACE"," ",1154],"=",["T_WHITESPACE"," ",1154],["T_STRING","null",1154],")",["T_WHITESPACE","\n    ",1154],"{",["T_WHITESPACE","\n        ",1155],["T_VARIABLE","$idsSelect",1156],["T_WHITESPACE"," ",1156],"=",["T_WHITESPACE"," ",1156],["T_VARIABLE","$this",1156],["T_OBJECT_OPERATOR","->",1156],["T_STRING","_getClearSelect",1156],"(",")",";",["T_WHITESPACE","\n        ",1156],["T_VARIABLE","$idsSelect",1157],["T_OBJECT_OPERATOR","->",1157],["T_STRING","columns",1157],"(",["T_CONSTANT_ENCAPSED_STRING","'e.'",1157],["T_WHITESPACE"," ",1157],".",["T_WHITESPACE"," ",1157],["T_VARIABLE","$this",1157],["T_OBJECT_OPERATOR","->",1157],["T_STRING","getEntity",1157],"(",")",["T_OBJECT_OPERATOR","->",1157],["T_STRING","getIdFieldName",1157],"(",")",")",";",["T_WHITESPACE","\n        ",1157],["T_VARIABLE","$idsSelect",1158],["T_OBJECT_OPERATOR","->",1158],["T_STRING","limit",1158],"(",["T_VARIABLE","$limit",1158],",",["T_WHITESPACE"," ",1158],["T_VARIABLE","$offset",1158],")",";",["T_WHITESPACE","\n        ",1158],["T_VARIABLE","$idsSelect",1159],["T_OBJECT_OPERATOR","->",1159],["T_STRING","resetJoinLeft",1159],"(",")",";",["T_WHITESPACE","\n\n        ",1159],["T_RETURN","return",1161],["T_WHITESPACE"," ",1161],["T_VARIABLE","$this",1161],["T_OBJECT_OPERATOR","->",1161],["T_STRING","getConnection",1161],"(",")",["T_OBJECT_OPERATOR","->",1161],["T_STRING","fetchCol",1161],"(",["T_VARIABLE","$idsSelect",1161],",",["T_WHITESPACE"," ",1161],["T_VARIABLE","$this",1161],["T_OBJECT_OPERATOR","->",1161],["T_STRING","_bindParams",1161],")",";",["T_WHITESPACE","\n    ",1161],"}",["T_WHITESPACE","\n\n    ",1162],["T_DOC_COMMENT","\/**\n     * Retrieve product count select for categories\n     *\n     * @return \\Magento\\Framework\\DB\\Select\n     *\/",1164],["T_WHITESPACE","\n    ",1168],["T_PUBLIC","public",1169],["T_WHITESPACE"," ",1169],["T_FUNCTION","function",1169],["T_WHITESPACE"," ",1169],["T_STRING","getProductCountSelect",1169],"(",")",["T_WHITESPACE","\n    ",1169],"{",["T_WHITESPACE","\n        ",1170],["T_IF","if",1171],["T_WHITESPACE"," ",1171],"(",["T_VARIABLE","$this",1171],["T_OBJECT_OPERATOR","->",1171],["T_STRING","_productCountSelect",1171],["T_WHITESPACE"," ",1171],["T_IS_IDENTICAL","===",1171],["T_WHITESPACE"," ",1171],["T_STRING","null",1171],")",["T_WHITESPACE"," ",1171],"{",["T_WHITESPACE","\n            ",1171],["T_VARIABLE","$this",1172],["T_OBJECT_OPERATOR","->",1172],["T_STRING","_productCountSelect",1172],["T_WHITESPACE"," ",1172],"=",["T_WHITESPACE"," ",1172],["T_CLONE","clone",1172],["T_WHITESPACE"," ",1172],["T_VARIABLE","$this",1172],["T_OBJECT_OPERATOR","->",1172],["T_STRING","getSelect",1172],"(",")",";",["T_WHITESPACE","\n            ",1172],["T_VARIABLE","$this",1173],["T_OBJECT_OPERATOR","->",1173],["T_STRING","_productCountSelect",1173],["T_OBJECT_OPERATOR","->",1173],["T_STRING","reset",1173],"(",["T_WHITESPACE","\n                ",1173],["T_NS_SEPARATOR","\\",1174],["T_STRING","Magento",1174],["T_NS_SEPARATOR","\\",1174],["T_STRING","Framework",1174],["T_NS_SEPARATOR","\\",1174],["T_STRING","DB",1174],["T_NS_SEPARATOR","\\",1174],["T_STRING","Select",1174],["T_DOUBLE_COLON","::",1174],["T_STRING","COLUMNS",1174],["T_WHITESPACE","\n            ",1174],")",["T_OBJECT_OPERATOR","->",1175],["T_STRING","reset",1175],"(",["T_WHITESPACE","\n                ",1175],["T_NS_SEPARATOR","\\",1176],["T_STRING","Magento",1176],["T_NS_SEPARATOR","\\",1176],["T_STRING","Framework",1176],["T_NS_SEPARATOR","\\",1176],["T_STRING","DB",1176],["T_NS_SEPARATOR","\\",1176],["T_STRING","Select",1176],["T_DOUBLE_COLON","::",1176],["T_STRING","GROUP",1176],["T_WHITESPACE","\n            ",1176],")",["T_OBJECT_OPERATOR","->",1177],["T_STRING","reset",1177],"(",["T_WHITESPACE","\n                ",1177],["T_NS_SEPARATOR","\\",1178],["T_STRING","Magento",1178],["T_NS_SEPARATOR","\\",1178],["T_STRING","Framework",1178],["T_NS_SEPARATOR","\\",1178],["T_STRING","DB",1178],["T_NS_SEPARATOR","\\",1178],["T_STRING","Select",1178],["T_DOUBLE_COLON","::",1178],["T_STRING","ORDER",1178],["T_WHITESPACE","\n            ",1178],")",["T_OBJECT_OPERATOR","->",1179],["T_STRING","distinct",1179],"(",["T_WHITESPACE","\n                ",1179],["T_STRING","false",1180],["T_WHITESPACE","\n            ",1180],")",["T_OBJECT_OPERATOR","->",1181],["T_STRING","join",1181],"(",["T_WHITESPACE","\n                ",1181],"[",["T_CONSTANT_ENCAPSED_STRING","'count_table'",1182],["T_WHITESPACE"," ",1182],["T_DOUBLE_ARROW","=>",1182],["T_WHITESPACE"," ",1182],["T_VARIABLE","$this",1182],["T_OBJECT_OPERATOR","->",1182],["T_STRING","getTable",1182],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog_category_product_index'",1182],")","]",",",["T_WHITESPACE","\n                ",1182],["T_CONSTANT_ENCAPSED_STRING","'count_table.product_id = e.entity_id'",1183],",",["T_WHITESPACE","\n                ",1183],"[",["T_WHITESPACE","\n                    ",1184],["T_CONSTANT_ENCAPSED_STRING","'count_table.category_id'",1185],",",["T_WHITESPACE","\n                    ",1185],["T_CONSTANT_ENCAPSED_STRING","'product_count'",1186],["T_WHITESPACE"," ",1186],["T_DOUBLE_ARROW","=>",1186],["T_WHITESPACE"," ",1186],["T_NEW","new",1186],["T_WHITESPACE"," ",1186],["T_NS_SEPARATOR","\\",1186],["T_STRING","Zend_Db_Expr",1186],"(",["T_CONSTANT_ENCAPSED_STRING","'COUNT(DISTINCT count_table.product_id)'",1186],")",["T_WHITESPACE","\n                ",1186],"]",["T_WHITESPACE","\n            ",1187],")",["T_OBJECT_OPERATOR","->",1188],["T_STRING","where",1188],"(",["T_WHITESPACE","\n                ",1188],["T_CONSTANT_ENCAPSED_STRING","'count_table.store_id = ?'",1189],",",["T_WHITESPACE","\n                ",1189],["T_VARIABLE","$this",1190],["T_OBJECT_OPERATOR","->",1190],["T_STRING","getStoreId",1190],"(",")",["T_WHITESPACE","\n            ",1190],")",["T_OBJECT_OPERATOR","->",1191],["T_STRING","group",1191],"(",["T_WHITESPACE","\n                ",1191],["T_CONSTANT_ENCAPSED_STRING","'count_table.category_id'",1192],["T_WHITESPACE","\n            ",1192],")",";",["T_WHITESPACE","\n        ",1193],"}",["T_WHITESPACE","\n\n        ",1194],["T_RETURN","return",1196],["T_WHITESPACE"," ",1196],["T_VARIABLE","$this",1196],["T_OBJECT_OPERATOR","->",1196],["T_STRING","_productCountSelect",1196],";",["T_WHITESPACE","\n    ",1196],"}",["T_WHITESPACE","\n\n    ",1197],["T_DOC_COMMENT","\/**\n     * Destruct product count select\n     *\n     * @return $this\n     *\/",1199],["T_WHITESPACE","\n    ",1203],["T_PUBLIC","public",1204],["T_WHITESPACE"," ",1204],["T_FUNCTION","function",1204],["T_WHITESPACE"," ",1204],["T_STRING","unsProductCountSelect",1204],"(",")",["T_WHITESPACE","\n    ",1204],"{",["T_WHITESPACE","\n        ",1205],["T_VARIABLE","$this",1206],["T_OBJECT_OPERATOR","->",1206],["T_STRING","_productCountSelect",1206],["T_WHITESPACE"," ",1206],"=",["T_WHITESPACE"," ",1206],["T_STRING","null",1206],";",["T_WHITESPACE","\n        ",1206],["T_RETURN","return",1207],["T_WHITESPACE"," ",1207],["T_VARIABLE","$this",1207],";",["T_WHITESPACE","\n    ",1207],"}",["T_WHITESPACE","\n\n    ",1208],["T_DOC_COMMENT","\/**\n     * Adding product count to categories collection\n     *\n     * @param \\Magento\\Eav\\Model\\Entity\\Collection\\AbstractCollection $categoryCollection\n     * @return $this\n     *\/",1210],["T_WHITESPACE","\n    ",1215],["T_PUBLIC","public",1216],["T_WHITESPACE"," ",1216],["T_FUNCTION","function",1216],["T_WHITESPACE"," ",1216],["T_STRING","addCountToCategories",1216],"(",["T_VARIABLE","$categoryCollection",1216],")",["T_WHITESPACE","\n    ",1216],"{",["T_WHITESPACE","\n        ",1217],["T_VARIABLE","$isAnchor",1218],["T_WHITESPACE"," ",1218],"=",["T_WHITESPACE"," ",1218],"[","]",";",["T_WHITESPACE","\n        ",1218],["T_VARIABLE","$isNotAnchor",1219],["T_WHITESPACE"," ",1219],"=",["T_WHITESPACE"," ",1219],"[","]",";",["T_WHITESPACE","\n        ",1219],["T_FOREACH","foreach",1220],["T_WHITESPACE"," ",1220],"(",["T_VARIABLE","$categoryCollection",1220],["T_WHITESPACE"," ",1220],["T_AS","as",1220],["T_WHITESPACE"," ",1220],["T_VARIABLE","$category",1220],")",["T_WHITESPACE"," ",1220],"{",["T_WHITESPACE","\n            ",1220],["T_IF","if",1221],["T_WHITESPACE"," ",1221],"(",["T_VARIABLE","$category",1221],["T_OBJECT_OPERATOR","->",1221],["T_STRING","getIsAnchor",1221],"(",")",")",["T_WHITESPACE"," ",1221],"{",["T_WHITESPACE","\n                ",1221],["T_VARIABLE","$isAnchor",1222],"[","]",["T_WHITESPACE"," ",1222],"=",["T_WHITESPACE"," ",1222],["T_VARIABLE","$category",1222],["T_OBJECT_OPERATOR","->",1222],["T_STRING","getId",1222],"(",")",";",["T_WHITESPACE","\n            ",1222],"}",["T_WHITESPACE"," ",1223],["T_ELSE","else",1223],["T_WHITESPACE"," ",1223],"{",["T_WHITESPACE","\n                ",1223],["T_VARIABLE","$isNotAnchor",1224],"[","]",["T_WHITESPACE"," ",1224],"=",["T_WHITESPACE"," ",1224],["T_VARIABLE","$category",1224],["T_OBJECT_OPERATOR","->",1224],["T_STRING","getId",1224],"(",")",";",["T_WHITESPACE","\n            ",1224],"}",["T_WHITESPACE","\n        ",1225],"}",["T_WHITESPACE","\n        ",1226],["T_VARIABLE","$productCounts",1227],["T_WHITESPACE"," ",1227],"=",["T_WHITESPACE"," ",1227],"[","]",";",["T_WHITESPACE","\n        ",1227],["T_IF","if",1228],["T_WHITESPACE"," ",1228],"(",["T_VARIABLE","$isAnchor",1228],["T_WHITESPACE"," ",1228],["T_BOOLEAN_OR","||",1228],["T_WHITESPACE"," ",1228],["T_VARIABLE","$isNotAnchor",1228],")",["T_WHITESPACE"," ",1228],"{",["T_WHITESPACE","\n            ",1228],["T_VARIABLE","$select",1229],["T_WHITESPACE"," ",1229],"=",["T_WHITESPACE"," ",1229],["T_VARIABLE","$this",1229],["T_OBJECT_OPERATOR","->",1229],["T_STRING","getProductCountSelect",1229],"(",")",";",["T_WHITESPACE","\n\n            ",1229],["T_VARIABLE","$this",1231],["T_OBJECT_OPERATOR","->",1231],["T_STRING","_eventManager",1231],["T_OBJECT_OPERATOR","->",1231],["T_STRING","dispatch",1231],"(",["T_WHITESPACE","\n                ",1231],["T_CONSTANT_ENCAPSED_STRING","'catalog_product_collection_before_add_count_to_categories'",1232],",",["T_WHITESPACE","\n                ",1232],"[",["T_CONSTANT_ENCAPSED_STRING","'collection'",1233],["T_WHITESPACE"," ",1233],["T_DOUBLE_ARROW","=>",1233],["T_WHITESPACE"," ",1233],["T_VARIABLE","$this",1233],"]",["T_WHITESPACE","\n            ",1233],")",";",["T_WHITESPACE","\n\n            ",1234],["T_IF","if",1236],["T_WHITESPACE"," ",1236],"(",["T_VARIABLE","$isAnchor",1236],")",["T_WHITESPACE"," ",1236],"{",["T_WHITESPACE","\n                ",1236],["T_VARIABLE","$anchorStmt",1237],["T_WHITESPACE"," ",1237],"=",["T_WHITESPACE"," ",1237],["T_CLONE","clone",1237],["T_WHITESPACE"," ",1237],["T_VARIABLE","$select",1237],";",["T_WHITESPACE","\n                ",1237],["T_VARIABLE","$anchorStmt",1238],["T_OBJECT_OPERATOR","->",1238],["T_STRING","limit",1238],"(",")",";",["T_WHITESPACE","\n                ",1238],["T_COMMENT","\/\/reset limits\n",1239],["T_WHITESPACE","                ",1240],["T_VARIABLE","$anchorStmt",1240],["T_OBJECT_OPERATOR","->",1240],["T_STRING","where",1240],"(",["T_CONSTANT_ENCAPSED_STRING","'count_table.category_id IN (?)'",1240],",",["T_WHITESPACE"," ",1240],["T_VARIABLE","$isAnchor",1240],")",";",["T_WHITESPACE","\n                ",1240],["T_VARIABLE","$productCounts",1241],["T_WHITESPACE"," ",1241],["T_PLUS_EQUAL","+=",1241],["T_WHITESPACE"," ",1241],["T_VARIABLE","$this",1241],["T_OBJECT_OPERATOR","->",1241],["T_STRING","getConnection",1241],"(",")",["T_OBJECT_OPERATOR","->",1241],["T_STRING","fetchPairs",1241],"(",["T_VARIABLE","$anchorStmt",1241],")",";",["T_WHITESPACE","\n                ",1241],["T_VARIABLE","$anchorStmt",1242],["T_WHITESPACE"," ",1242],"=",["T_WHITESPACE"," ",1242],["T_STRING","null",1242],";",["T_WHITESPACE","\n            ",1242],"}",["T_WHITESPACE","\n            ",1243],["T_IF","if",1244],["T_WHITESPACE"," ",1244],"(",["T_VARIABLE","$isNotAnchor",1244],")",["T_WHITESPACE"," ",1244],"{",["T_WHITESPACE","\n                ",1244],["T_VARIABLE","$notAnchorStmt",1245],["T_WHITESPACE"," ",1245],"=",["T_WHITESPACE"," ",1245],["T_CLONE","clone",1245],["T_WHITESPACE"," ",1245],["T_VARIABLE","$select",1245],";",["T_WHITESPACE","\n                ",1245],["T_VARIABLE","$notAnchorStmt",1246],["T_OBJECT_OPERATOR","->",1246],["T_STRING","limit",1246],"(",")",";",["T_WHITESPACE","\n                ",1246],["T_COMMENT","\/\/reset limits\n",1247],["T_WHITESPACE","                ",1248],["T_VARIABLE","$notAnchorStmt",1248],["T_OBJECT_OPERATOR","->",1248],["T_STRING","where",1248],"(",["T_CONSTANT_ENCAPSED_STRING","'count_table.category_id IN (?)'",1248],",",["T_WHITESPACE"," ",1248],["T_VARIABLE","$isNotAnchor",1248],")",";",["T_WHITESPACE","\n                ",1248],["T_VARIABLE","$notAnchorStmt",1249],["T_OBJECT_OPERATOR","->",1249],["T_STRING","where",1249],"(",["T_CONSTANT_ENCAPSED_STRING","'count_table.is_parent = 1'",1249],")",";",["T_WHITESPACE","\n                ",1249],["T_VARIABLE","$productCounts",1250],["T_WHITESPACE"," ",1250],["T_PLUS_EQUAL","+=",1250],["T_WHITESPACE"," ",1250],["T_VARIABLE","$this",1250],["T_OBJECT_OPERATOR","->",1250],["T_STRING","getConnection",1250],"(",")",["T_OBJECT_OPERATOR","->",1250],["T_STRING","fetchPairs",1250],"(",["T_VARIABLE","$notAnchorStmt",1250],")",";",["T_WHITESPACE","\n                ",1250],["T_VARIABLE","$notAnchorStmt",1251],["T_WHITESPACE"," ",1251],"=",["T_WHITESPACE"," ",1251],["T_STRING","null",1251],";",["T_WHITESPACE","\n            ",1251],"}",["T_WHITESPACE","\n            ",1252],["T_VARIABLE","$select",1253],["T_WHITESPACE"," ",1253],"=",["T_WHITESPACE"," ",1253],["T_STRING","null",1253],";",["T_WHITESPACE","\n            ",1253],["T_VARIABLE","$this",1254],["T_OBJECT_OPERATOR","->",1254],["T_STRING","unsProductCountSelect",1254],"(",")",";",["T_WHITESPACE","\n        ",1254],"}",["T_WHITESPACE","\n\n        ",1255],["T_FOREACH","foreach",1257],["T_WHITESPACE"," ",1257],"(",["T_VARIABLE","$categoryCollection",1257],["T_WHITESPACE"," ",1257],["T_AS","as",1257],["T_WHITESPACE"," ",1257],["T_VARIABLE","$category",1257],")",["T_WHITESPACE"," ",1257],"{",["T_WHITESPACE","\n            ",1257],["T_VARIABLE","$_count",1258],["T_WHITESPACE"," ",1258],"=",["T_WHITESPACE"," ",1258],["T_LNUMBER","0",1258],";",["T_WHITESPACE","\n            ",1258],["T_IF","if",1259],["T_WHITESPACE"," ",1259],"(",["T_ISSET","isset",1259],"(",["T_VARIABLE","$productCounts",1259],"[",["T_VARIABLE","$category",1259],["T_OBJECT_OPERATOR","->",1259],["T_STRING","getId",1259],"(",")","]",")",")",["T_WHITESPACE"," ",1259],"{",["T_WHITESPACE","\n                ",1259],["T_VARIABLE","$_count",1260],["T_WHITESPACE"," ",1260],"=",["T_WHITESPACE"," ",1260],["T_VARIABLE","$productCounts",1260],"[",["T_VARIABLE","$category",1260],["T_OBJECT_OPERATOR","->",1260],["T_STRING","getId",1260],"(",")","]",";",["T_WHITESPACE","\n            ",1260],"}",["T_WHITESPACE","\n            ",1261],["T_VARIABLE","$category",1262],["T_OBJECT_OPERATOR","->",1262],["T_STRING","setProductCount",1262],"(",["T_VARIABLE","$_count",1262],")",";",["T_WHITESPACE","\n        ",1262],"}",["T_WHITESPACE","\n\n        ",1263],["T_RETURN","return",1265],["T_WHITESPACE"," ",1265],["T_VARIABLE","$this",1265],";",["T_WHITESPACE","\n    ",1265],"}",["T_WHITESPACE","\n\n    ",1266],["T_DOC_COMMENT","\/**\n     * Retrieve unique attribute set ids in collection\n     *\n     * @return array\n     *\/",1268],["T_WHITESPACE","\n    ",1272],["T_PUBLIC","public",1273],["T_WHITESPACE"," ",1273],["T_FUNCTION","function",1273],["T_WHITESPACE"," ",1273],["T_STRING","getSetIds",1273],"(",")",["T_WHITESPACE","\n    ",1273],"{",["T_WHITESPACE","\n        ",1274],["T_VARIABLE","$select",1275],["T_WHITESPACE"," ",1275],"=",["T_WHITESPACE"," ",1275],["T_CLONE","clone",1275],["T_WHITESPACE"," ",1275],["T_VARIABLE","$this",1275],["T_OBJECT_OPERATOR","->",1275],["T_STRING","getSelect",1275],"(",")",";",["T_WHITESPACE","\n        ",1275],["T_DOC_COMMENT","\/** @var $select \\Magento\\Framework\\DB\\Select *\/",1276],["T_WHITESPACE","\n        ",1276],["T_VARIABLE","$select",1277],["T_OBJECT_OPERATOR","->",1277],["T_STRING","reset",1277],"(",["T_STRING","Select",1277],["T_DOUBLE_COLON","::",1277],["T_STRING","COLUMNS",1277],")",";",["T_WHITESPACE","\n        ",1277],["T_VARIABLE","$select",1278],["T_OBJECT_OPERATOR","->",1278],["T_STRING","reset",1278],"(",["T_STRING","Select",1278],["T_DOUBLE_COLON","::",1278],["T_STRING","ORDER",1278],")",";",["T_WHITESPACE","\n        ",1278],["T_VARIABLE","$select",1279],["T_OBJECT_OPERATOR","->",1279],["T_STRING","distinct",1279],"(",["T_STRING","true",1279],")",";",["T_WHITESPACE","\n        ",1279],["T_VARIABLE","$select",1280],["T_OBJECT_OPERATOR","->",1280],["T_STRING","columns",1280],"(",["T_CONSTANT_ENCAPSED_STRING","'attribute_set_id'",1280],")",";",["T_WHITESPACE","\n        ",1280],["T_RETURN","return",1281],["T_WHITESPACE"," ",1281],["T_VARIABLE","$this",1281],["T_OBJECT_OPERATOR","->",1281],["T_STRING","getConnection",1281],"(",")",["T_OBJECT_OPERATOR","->",1281],["T_STRING","fetchCol",1281],"(",["T_VARIABLE","$select",1281],")",";",["T_WHITESPACE","\n    ",1281],"}",["T_WHITESPACE","\n\n    ",1282],["T_DOC_COMMENT","\/**\n     * Return array of unique product type ids in collection\n     *\n     * @return array\n     *\/",1284],["T_WHITESPACE","\n    ",1288],["T_PUBLIC","public",1289],["T_WHITESPACE"," ",1289],["T_FUNCTION","function",1289],["T_WHITESPACE"," ",1289],["T_STRING","getProductTypeIds",1289],"(",")",["T_WHITESPACE","\n    ",1289],"{",["T_WHITESPACE","\n        ",1290],["T_VARIABLE","$select",1291],["T_WHITESPACE"," ",1291],"=",["T_WHITESPACE"," ",1291],["T_CLONE","clone",1291],["T_WHITESPACE"," ",1291],["T_VARIABLE","$this",1291],["T_OBJECT_OPERATOR","->",1291],["T_STRING","getSelect",1291],"(",")",";",["T_WHITESPACE","\n        ",1291],["T_DOC_COMMENT","\/** @var $select \\Magento\\Framework\\DB\\Select *\/",1292],["T_WHITESPACE","\n        ",1292],["T_VARIABLE","$select",1293],["T_OBJECT_OPERATOR","->",1293],["T_STRING","reset",1293],"(",["T_NS_SEPARATOR","\\",1293],["T_STRING","Magento",1293],["T_NS_SEPARATOR","\\",1293],["T_STRING","Framework",1293],["T_NS_SEPARATOR","\\",1293],["T_STRING","DB",1293],["T_NS_SEPARATOR","\\",1293],["T_STRING","Select",1293],["T_DOUBLE_COLON","::",1293],["T_STRING","COLUMNS",1293],")",";",["T_WHITESPACE","\n        ",1293],["T_VARIABLE","$select",1294],["T_OBJECT_OPERATOR","->",1294],["T_STRING","distinct",1294],"(",["T_STRING","true",1294],")",";",["T_WHITESPACE","\n        ",1294],["T_VARIABLE","$select",1295],["T_OBJECT_OPERATOR","->",1295],["T_STRING","columns",1295],"(",["T_CONSTANT_ENCAPSED_STRING","'type_id'",1295],")",";",["T_WHITESPACE","\n        ",1295],["T_RETURN","return",1296],["T_WHITESPACE"," ",1296],["T_VARIABLE","$this",1296],["T_OBJECT_OPERATOR","->",1296],["T_STRING","getConnection",1296],"(",")",["T_OBJECT_OPERATOR","->",1296],["T_STRING","fetchCol",1296],"(",["T_VARIABLE","$select",1296],")",";",["T_WHITESPACE","\n    ",1296],"}",["T_WHITESPACE","\n\n    ",1297],["T_DOC_COMMENT","\/**\n     * Joins url rewrite rules to collection\n     *\n     * @return $this\n     *\/",1299],["T_WHITESPACE","\n    ",1303],["T_PUBLIC","public",1304],["T_WHITESPACE"," ",1304],["T_FUNCTION","function",1304],["T_WHITESPACE"," ",1304],["T_STRING","joinUrlRewrite",1304],"(",")",["T_WHITESPACE","\n    ",1304],"{",["T_WHITESPACE","\n        ",1305],["T_VARIABLE","$this",1306],["T_OBJECT_OPERATOR","->",1306],["T_STRING","joinTable",1306],"(",["T_WHITESPACE","\n            ",1306],["T_CONSTANT_ENCAPSED_STRING","'url_rewrite'",1307],",",["T_WHITESPACE","\n            ",1307],["T_CONSTANT_ENCAPSED_STRING","'entity_id = entity_id'",1308],",",["T_WHITESPACE","\n            ",1308],"[",["T_CONSTANT_ENCAPSED_STRING","'request_path'",1309],"]",",",["T_WHITESPACE","\n            ",1309],["T_CONSTANT_ENCAPSED_STRING","'{{table}}.entity_type = \\''",1310],["T_WHITESPACE"," ",1310],".",["T_WHITESPACE"," ",1310],["T_STRING","ProductUrlRewriteGenerator",1310],["T_DOUBLE_COLON","::",1310],["T_STRING","ENTITY_TYPE",1310],["T_WHITESPACE"," ",1310],".",["T_WHITESPACE"," ",1310],["T_CONSTANT_ENCAPSED_STRING","'\\''",1310],",",["T_WHITESPACE","\n            ",1310],["T_CONSTANT_ENCAPSED_STRING","'left'",1311],["T_WHITESPACE","\n        ",1311],")",";",["T_WHITESPACE","\n        ",1312],["T_RETURN","return",1313],["T_WHITESPACE"," ",1313],["T_VARIABLE","$this",1313],";",["T_WHITESPACE","\n    ",1313],"}",["T_WHITESPACE","\n\n    ",1314],["T_DOC_COMMENT","\/**\n     * Add URL rewrites data to product\n     * If collection loadded - run processing else set flag\n     *\n     * @param int|string $categoryId\n     * @return $this\n     *\/",1316],["T_WHITESPACE","\n    ",1322],["T_PUBLIC","public",1323],["T_WHITESPACE"," ",1323],["T_FUNCTION","function",1323],["T_WHITESPACE"," ",1323],["T_STRING","addUrlRewrite",1323],"(",["T_VARIABLE","$categoryId",1323],["T_WHITESPACE"," ",1323],"=",["T_WHITESPACE"," ",1323],["T_CONSTANT_ENCAPSED_STRING","''",1323],")",["T_WHITESPACE","\n    ",1323],"{",["T_WHITESPACE","\n        ",1324],["T_VARIABLE","$this",1325],["T_OBJECT_OPERATOR","->",1325],["T_STRING","_addUrlRewrite",1325],["T_WHITESPACE"," ",1325],"=",["T_WHITESPACE"," ",1325],["T_STRING","true",1325],";",["T_WHITESPACE","\n        ",1325],["T_VARIABLE","$useCategoryUrl",1326],["T_WHITESPACE"," ",1326],"=",["T_WHITESPACE"," ",1326],["T_VARIABLE","$this",1326],["T_OBJECT_OPERATOR","->",1326],["T_STRING","_scopeConfig",1326],["T_OBJECT_OPERATOR","->",1326],["T_STRING","getValue",1326],"(",["T_WHITESPACE","\n            ",1326],["T_NS_SEPARATOR","\\",1327],["T_STRING","Magento",1327],["T_NS_SEPARATOR","\\",1327],["T_STRING","Catalog",1327],["T_NS_SEPARATOR","\\",1327],["T_STRING","Helper",1327],["T_NS_SEPARATOR","\\",1327],["T_STRING","Product",1327],["T_DOUBLE_COLON","::",1327],["T_STRING","XML_PATH_PRODUCT_URL_USE_CATEGORY",1327],",",["T_WHITESPACE","\n            ",1327],["T_NS_SEPARATOR","\\",1328],["T_STRING","Magento",1328],["T_NS_SEPARATOR","\\",1328],["T_STRING","Store",1328],["T_NS_SEPARATOR","\\",1328],["T_STRING","Model",1328],["T_NS_SEPARATOR","\\",1328],["T_STRING","ScopeInterface",1328],["T_DOUBLE_COLON","::",1328],["T_STRING","SCOPE_STORE",1328],",",["T_WHITESPACE","\n            ",1328],["T_VARIABLE","$this",1329],["T_OBJECT_OPERATOR","->",1329],["T_STRING","getStoreId",1329],"(",")",["T_WHITESPACE","\n        ",1329],")",";",["T_WHITESPACE","\n        ",1330],["T_IF","if",1331],["T_WHITESPACE"," ",1331],"(",["T_VARIABLE","$useCategoryUrl",1331],")",["T_WHITESPACE"," ",1331],"{",["T_WHITESPACE","\n            ",1331],["T_VARIABLE","$this",1332],["T_OBJECT_OPERATOR","->",1332],["T_STRING","_urlRewriteCategory",1332],["T_WHITESPACE"," ",1332],"=",["T_WHITESPACE"," ",1332],["T_VARIABLE","$categoryId",1332],";",["T_WHITESPACE","\n        ",1332],"}",["T_WHITESPACE"," ",1333],["T_ELSE","else",1333],["T_WHITESPACE"," ",1333],"{",["T_WHITESPACE","\n            ",1333],["T_VARIABLE","$this",1334],["T_OBJECT_OPERATOR","->",1334],["T_STRING","_urlRewriteCategory",1334],["T_WHITESPACE"," ",1334],"=",["T_WHITESPACE"," ",1334],["T_LNUMBER","0",1334],";",["T_WHITESPACE","\n        ",1334],"}",["T_WHITESPACE","\n\n        ",1335],["T_IF","if",1337],["T_WHITESPACE"," ",1337],"(",["T_VARIABLE","$this",1337],["T_OBJECT_OPERATOR","->",1337],["T_STRING","isLoaded",1337],"(",")",")",["T_WHITESPACE"," ",1337],"{",["T_WHITESPACE","\n            ",1337],["T_VARIABLE","$this",1338],["T_OBJECT_OPERATOR","->",1338],["T_STRING","_addUrlRewrite",1338],"(",")",";",["T_WHITESPACE","\n        ",1338],"}",["T_WHITESPACE","\n\n        ",1339],["T_RETURN","return",1341],["T_WHITESPACE"," ",1341],["T_VARIABLE","$this",1341],";",["T_WHITESPACE","\n    ",1341],"}",["T_WHITESPACE","\n\n    ",1342],["T_DOC_COMMENT","\/**\n     * Add URL rewrites to collection\n     *\n     * @return void\n     *\/",1344],["T_WHITESPACE","\n    ",1348],["T_PROTECTED","protected",1349],["T_WHITESPACE"," ",1349],["T_FUNCTION","function",1349],["T_WHITESPACE"," ",1349],["T_STRING","_addUrlRewrite",1349],"(",")",["T_WHITESPACE","\n    ",1349],"{",["T_WHITESPACE","\n        ",1350],["T_VARIABLE","$productIds",1351],["T_WHITESPACE"," ",1351],"=",["T_WHITESPACE"," ",1351],"[","]",";",["T_WHITESPACE","\n        ",1351],["T_FOREACH","foreach",1352],["T_WHITESPACE"," ",1352],"(",["T_VARIABLE","$this",1352],["T_OBJECT_OPERATOR","->",1352],["T_STRING","getItems",1352],"(",")",["T_WHITESPACE"," ",1352],["T_AS","as",1352],["T_WHITESPACE"," ",1352],["T_VARIABLE","$item",1352],")",["T_WHITESPACE"," ",1352],"{",["T_WHITESPACE","\n            ",1352],["T_VARIABLE","$productIds",1353],"[","]",["T_WHITESPACE"," ",1353],"=",["T_WHITESPACE"," ",1353],["T_VARIABLE","$item",1353],["T_OBJECT_OPERATOR","->",1353],["T_STRING","getEntityId",1353],"(",")",";",["T_WHITESPACE","\n        ",1353],"}",["T_WHITESPACE","\n        ",1354],["T_IF","if",1355],["T_WHITESPACE"," ",1355],"(","!",["T_VARIABLE","$productIds",1355],")",["T_WHITESPACE"," ",1355],"{",["T_WHITESPACE","\n            ",1355],["T_RETURN","return",1356],";",["T_WHITESPACE","\n        ",1356],"}",["T_WHITESPACE","\n\n        ",1357],["T_VARIABLE","$select",1359],["T_WHITESPACE"," ",1359],"=",["T_WHITESPACE"," ",1359],["T_VARIABLE","$this",1359],["T_OBJECT_OPERATOR","->",1359],["T_STRING","getConnection",1359],"(",")",["T_WHITESPACE","\n            ",1359],["T_OBJECT_OPERATOR","->",1360],["T_STRING","select",1360],"(",")",["T_WHITESPACE","\n            ",1360],["T_OBJECT_OPERATOR","->",1361],["T_STRING","from",1361],"(","[",["T_CONSTANT_ENCAPSED_STRING","'u'",1361],["T_WHITESPACE"," ",1361],["T_DOUBLE_ARROW","=>",1361],["T_WHITESPACE"," ",1361],["T_VARIABLE","$this",1361],["T_OBJECT_OPERATOR","->",1361],["T_STRING","getTable",1361],"(",["T_CONSTANT_ENCAPSED_STRING","'url_rewrite'",1361],")","]",",",["T_WHITESPACE"," ",1361],"[",["T_CONSTANT_ENCAPSED_STRING","'u.entity_id'",1361],",",["T_WHITESPACE"," ",1361],["T_CONSTANT_ENCAPSED_STRING","'u.request_path'",1361],"]",")",["T_WHITESPACE","\n            ",1361],["T_OBJECT_OPERATOR","->",1362],["T_STRING","where",1362],"(",["T_CONSTANT_ENCAPSED_STRING","'u.store_id = ?'",1362],",",["T_WHITESPACE"," ",1362],["T_VARIABLE","$this",1362],["T_OBJECT_OPERATOR","->",1362],["T_STRING","_storeManager",1362],["T_OBJECT_OPERATOR","->",1362],["T_STRING","getStore",1362],"(",["T_VARIABLE","$this",1362],["T_OBJECT_OPERATOR","->",1362],["T_STRING","getStoreId",1362],"(",")",")",["T_OBJECT_OPERATOR","->",1362],["T_STRING","getId",1362],"(",")",")",["T_WHITESPACE","\n            ",1362],["T_OBJECT_OPERATOR","->",1363],["T_STRING","where",1363],"(",["T_CONSTANT_ENCAPSED_STRING","'u.is_autogenerated = 1'",1363],")",["T_WHITESPACE","\n            ",1363],["T_OBJECT_OPERATOR","->",1364],["T_STRING","where",1364],"(",["T_CONSTANT_ENCAPSED_STRING","'u.entity_type = ?'",1364],",",["T_WHITESPACE"," ",1364],["T_STRING","ProductUrlRewriteGenerator",1364],["T_DOUBLE_COLON","::",1364],["T_STRING","ENTITY_TYPE",1364],")",["T_WHITESPACE","\n            ",1364],["T_OBJECT_OPERATOR","->",1365],["T_STRING","where",1365],"(",["T_CONSTANT_ENCAPSED_STRING","'u.entity_id IN(?)'",1365],",",["T_WHITESPACE"," ",1365],["T_VARIABLE","$productIds",1365],")",";",["T_WHITESPACE","\n\n        ",1365],["T_IF","if",1367],["T_WHITESPACE"," ",1367],"(",["T_VARIABLE","$this",1367],["T_OBJECT_OPERATOR","->",1367],["T_STRING","_urlRewriteCategory",1367],")",["T_WHITESPACE"," ",1367],"{",["T_WHITESPACE","\n            ",1367],["T_VARIABLE","$select",1368],["T_OBJECT_OPERATOR","->",1368],["T_STRING","joinInner",1368],"(",["T_WHITESPACE","\n                ",1368],"[",["T_CONSTANT_ENCAPSED_STRING","'cu'",1369],["T_WHITESPACE"," ",1369],["T_DOUBLE_ARROW","=>",1369],["T_WHITESPACE"," ",1369],["T_VARIABLE","$this",1369],["T_OBJECT_OPERATOR","->",1369],["T_STRING","getTable",1369],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog_url_rewrite_product_category'",1369],")","]",",",["T_WHITESPACE","\n                ",1369],["T_CONSTANT_ENCAPSED_STRING","'u.url_rewrite_id=cu.url_rewrite_id'",1370],["T_WHITESPACE","\n            ",1370],")",["T_OBJECT_OPERATOR","->",1371],["T_STRING","where",1371],"(",["T_CONSTANT_ENCAPSED_STRING","'cu.category_id IN (?)'",1371],",",["T_WHITESPACE"," ",1371],["T_VARIABLE","$this",1371],["T_OBJECT_OPERATOR","->",1371],["T_STRING","_urlRewriteCategory",1371],")",";",["T_WHITESPACE","\n        ",1371],"}",["T_WHITESPACE","\n\n        ",1372],["T_COMMENT","\/\/ more priority is data with category id\n",1374],["T_WHITESPACE","        ",1375],["T_VARIABLE","$urlRewrites",1375],["T_WHITESPACE"," ",1375],"=",["T_WHITESPACE"," ",1375],"[","]",";",["T_WHITESPACE","\n\n        ",1375],["T_FOREACH","foreach",1377],["T_WHITESPACE"," ",1377],"(",["T_VARIABLE","$this",1377],["T_OBJECT_OPERATOR","->",1377],["T_STRING","getConnection",1377],"(",")",["T_OBJECT_OPERATOR","->",1377],["T_STRING","fetchAll",1377],"(",["T_VARIABLE","$select",1377],")",["T_WHITESPACE"," ",1377],["T_AS","as",1377],["T_WHITESPACE"," ",1377],["T_VARIABLE","$row",1377],")",["T_WHITESPACE"," ",1377],"{",["T_WHITESPACE","\n            ",1377],["T_IF","if",1378],["T_WHITESPACE"," ",1378],"(","!",["T_ISSET","isset",1378],"(",["T_VARIABLE","$urlRewrites",1378],"[",["T_VARIABLE","$row",1378],"[",["T_CONSTANT_ENCAPSED_STRING","'entity_id'",1378],"]","]",")",")",["T_WHITESPACE"," ",1378],"{",["T_WHITESPACE","\n                ",1378],["T_VARIABLE","$urlRewrites",1379],"[",["T_VARIABLE","$row",1379],"[",["T_CONSTANT_ENCAPSED_STRING","'entity_id'",1379],"]","]",["T_WHITESPACE"," ",1379],"=",["T_WHITESPACE"," ",1379],["T_VARIABLE","$row",1379],"[",["T_CONSTANT_ENCAPSED_STRING","'request_path'",1379],"]",";",["T_WHITESPACE","\n            ",1379],"}",["T_WHITESPACE","\n        ",1380],"}",["T_WHITESPACE","\n\n        ",1381],["T_FOREACH","foreach",1383],["T_WHITESPACE"," ",1383],"(",["T_VARIABLE","$this",1383],["T_OBJECT_OPERATOR","->",1383],["T_STRING","getItems",1383],"(",")",["T_WHITESPACE"," ",1383],["T_AS","as",1383],["T_WHITESPACE"," ",1383],["T_VARIABLE","$item",1383],")",["T_WHITESPACE"," ",1383],"{",["T_WHITESPACE","\n            ",1383],["T_IF","if",1384],["T_WHITESPACE"," ",1384],"(",["T_ISSET","isset",1384],"(",["T_VARIABLE","$urlRewrites",1384],"[",["T_VARIABLE","$item",1384],["T_OBJECT_OPERATOR","->",1384],["T_STRING","getEntityId",1384],"(",")","]",")",")",["T_WHITESPACE"," ",1384],"{",["T_WHITESPACE","\n                ",1384],["T_VARIABLE","$item",1385],["T_OBJECT_OPERATOR","->",1385],["T_STRING","setData",1385],"(",["T_CONSTANT_ENCAPSED_STRING","'request_path'",1385],",",["T_WHITESPACE"," ",1385],["T_VARIABLE","$urlRewrites",1385],"[",["T_VARIABLE","$item",1385],["T_OBJECT_OPERATOR","->",1385],["T_STRING","getEntityId",1385],"(",")","]",")",";",["T_WHITESPACE","\n            ",1385],"}",["T_WHITESPACE"," ",1386],["T_ELSE","else",1386],["T_WHITESPACE"," ",1386],"{",["T_WHITESPACE","\n                ",1386],["T_VARIABLE","$item",1387],["T_OBJECT_OPERATOR","->",1387],["T_STRING","setData",1387],"(",["T_CONSTANT_ENCAPSED_STRING","'request_path'",1387],",",["T_WHITESPACE"," ",1387],["T_STRING","false",1387],")",";",["T_WHITESPACE","\n            ",1387],"}",["T_WHITESPACE","\n        ",1388],"}",["T_WHITESPACE","\n    ",1389],"}",["T_WHITESPACE","\n\n    ",1390],["T_DOC_COMMENT","\/**\n     * Add minimal price data to result\n     *\n     * @return $this\n     *\/",1392],["T_WHITESPACE","\n    ",1396],["T_PUBLIC","public",1397],["T_WHITESPACE"," ",1397],["T_FUNCTION","function",1397],["T_WHITESPACE"," ",1397],["T_STRING","addMinimalPrice",1397],"(",")",["T_WHITESPACE","\n    ",1397],"{",["T_WHITESPACE","\n        ",1398],["T_RETURN","return",1399],["T_WHITESPACE"," ",1399],["T_VARIABLE","$this",1399],["T_OBJECT_OPERATOR","->",1399],["T_STRING","addPriceData",1399],"(",")",";",["T_WHITESPACE","\n    ",1399],"}",["T_WHITESPACE","\n\n    ",1400],["T_DOC_COMMENT","\/**\n     * Add price data for calculate final price\n     *\n     * @return $this\n     *\/",1402],["T_WHITESPACE","\n    ",1406],["T_PUBLIC","public",1407],["T_WHITESPACE"," ",1407],["T_FUNCTION","function",1407],["T_WHITESPACE"," ",1407],["T_STRING","addFinalPrice",1407],"(",")",["T_WHITESPACE","\n    ",1407],"{",["T_WHITESPACE","\n        ",1408],["T_RETURN","return",1409],["T_WHITESPACE"," ",1409],["T_VARIABLE","$this",1409],["T_OBJECT_OPERATOR","->",1409],["T_STRING","addPriceData",1409],"(",")",";",["T_WHITESPACE","\n    ",1409],"}",["T_WHITESPACE","\n\n    ",1410],["T_DOC_COMMENT","\/**\n     * Retrieve all ids\n     *\n     * @param boolean $resetCache\n     * @return array\n     *\/",1412],["T_WHITESPACE","\n    ",1417],["T_PUBLIC","public",1418],["T_WHITESPACE"," ",1418],["T_FUNCTION","function",1418],["T_WHITESPACE"," ",1418],["T_STRING","getAllIdsCache",1418],"(",["T_VARIABLE","$resetCache",1418],["T_WHITESPACE"," ",1418],"=",["T_WHITESPACE"," ",1418],["T_STRING","false",1418],")",["T_WHITESPACE","\n    ",1418],"{",["T_WHITESPACE","\n        ",1419],["T_VARIABLE","$ids",1420],["T_WHITESPACE"," ",1420],"=",["T_WHITESPACE"," ",1420],["T_STRING","null",1420],";",["T_WHITESPACE","\n        ",1420],["T_IF","if",1421],["T_WHITESPACE"," ",1421],"(","!",["T_VARIABLE","$resetCache",1421],")",["T_WHITESPACE"," ",1421],"{",["T_WHITESPACE","\n            ",1421],["T_VARIABLE","$ids",1422],["T_WHITESPACE"," ",1422],"=",["T_WHITESPACE"," ",1422],["T_VARIABLE","$this",1422],["T_OBJECT_OPERATOR","->",1422],["T_STRING","_allIdsCache",1422],";",["T_WHITESPACE","\n        ",1422],"}",["T_WHITESPACE","\n\n        ",1423],["T_IF","if",1425],["T_WHITESPACE"," ",1425],"(",["T_STRING","is_null",1425],"(",["T_VARIABLE","$ids",1425],")",")",["T_WHITESPACE"," ",1425],"{",["T_WHITESPACE","\n            ",1425],["T_VARIABLE","$ids",1426],["T_WHITESPACE"," ",1426],"=",["T_WHITESPACE"," ",1426],["T_VARIABLE","$this",1426],["T_OBJECT_OPERATOR","->",1426],["T_STRING","getAllIds",1426],"(",")",";",["T_WHITESPACE","\n            ",1426],["T_VARIABLE","$this",1427],["T_OBJECT_OPERATOR","->",1427],["T_STRING","setAllIdsCache",1427],"(",["T_VARIABLE","$ids",1427],")",";",["T_WHITESPACE","\n        ",1427],"}",["T_WHITESPACE","\n\n        ",1428],["T_RETURN","return",1430],["T_WHITESPACE"," ",1430],["T_VARIABLE","$ids",1430],";",["T_WHITESPACE","\n    ",1430],"}",["T_WHITESPACE","\n\n    ",1431],["T_DOC_COMMENT","\/**\n     * Set all ids\n     *\n     * @param array $value\n     * @return $this\n     *\/",1433],["T_WHITESPACE","\n    ",1438],["T_PUBLIC","public",1439],["T_WHITESPACE"," ",1439],["T_FUNCTION","function",1439],["T_WHITESPACE"," ",1439],["T_STRING","setAllIdsCache",1439],"(",["T_VARIABLE","$value",1439],")",["T_WHITESPACE","\n    ",1439],"{",["T_WHITESPACE","\n        ",1440],["T_VARIABLE","$this",1441],["T_OBJECT_OPERATOR","->",1441],["T_STRING","_allIdsCache",1441],["T_WHITESPACE"," ",1441],"=",["T_WHITESPACE"," ",1441],["T_VARIABLE","$value",1441],";",["T_WHITESPACE","\n        ",1441],["T_RETURN","return",1442],["T_WHITESPACE"," ",1442],["T_VARIABLE","$this",1442],";",["T_WHITESPACE","\n    ",1442],"}",["T_WHITESPACE","\n\n    ",1443],["T_DOC_COMMENT","\/**\n     * Add Price Data to result\n     *\n     * @param int $customerGroupId\n     * @param int $websiteId\n     * @return $this\n     *\/",1445],["T_WHITESPACE","\n    ",1451],["T_PUBLIC","public",1452],["T_WHITESPACE"," ",1452],["T_FUNCTION","function",1452],["T_WHITESPACE"," ",1452],["T_STRING","addPriceData",1452],"(",["T_VARIABLE","$customerGroupId",1452],["T_WHITESPACE"," ",1452],"=",["T_WHITESPACE"," ",1452],["T_STRING","null",1452],",",["T_WHITESPACE"," ",1452],["T_VARIABLE","$websiteId",1452],["T_WHITESPACE"," ",1452],"=",["T_WHITESPACE"," ",1452],["T_STRING","null",1452],")",["T_WHITESPACE","\n    ",1452],"{",["T_WHITESPACE","\n        ",1453],["T_VARIABLE","$this",1454],["T_OBJECT_OPERATOR","->",1454],["T_STRING","_productLimitationFilters",1454],["T_OBJECT_OPERATOR","->",1454],["T_STRING","setUsePriceIndex",1454],"(",["T_STRING","true",1454],")",";",["T_WHITESPACE","\n\n        ",1454],["T_IF","if",1456],["T_WHITESPACE"," ",1456],"(","!",["T_ISSET","isset",1456],"(",["T_VARIABLE","$this",1456],["T_OBJECT_OPERATOR","->",1456],["T_STRING","_productLimitationFilters",1456],"[",["T_CONSTANT_ENCAPSED_STRING","'customer_group_id'",1456],"]",")",["T_WHITESPACE"," ",1456],["T_BOOLEAN_AND","&&",1456],["T_WHITESPACE"," ",1456],["T_STRING","is_null",1456],"(",["T_VARIABLE","$customerGroupId",1456],")",")",["T_WHITESPACE"," ",1456],"{",["T_WHITESPACE","\n            ",1456],["T_VARIABLE","$customerGroupId",1457],["T_WHITESPACE"," ",1457],"=",["T_WHITESPACE"," ",1457],["T_VARIABLE","$this",1457],["T_OBJECT_OPERATOR","->",1457],["T_STRING","_customerSession",1457],["T_OBJECT_OPERATOR","->",1457],["T_STRING","getCustomerGroupId",1457],"(",")",";",["T_WHITESPACE","\n        ",1457],"}",["T_WHITESPACE","\n        ",1458],["T_IF","if",1459],["T_WHITESPACE"," ",1459],"(","!",["T_ISSET","isset",1459],"(",["T_VARIABLE","$this",1459],["T_OBJECT_OPERATOR","->",1459],["T_STRING","_productLimitationFilters",1459],"[",["T_CONSTANT_ENCAPSED_STRING","'website_id'",1459],"]",")",["T_WHITESPACE"," ",1459],["T_BOOLEAN_AND","&&",1459],["T_WHITESPACE"," ",1459],["T_STRING","is_null",1459],"(",["T_VARIABLE","$websiteId",1459],")",")",["T_WHITESPACE"," ",1459],"{",["T_WHITESPACE","\n            ",1459],["T_VARIABLE","$websiteId",1460],["T_WHITESPACE"," ",1460],"=",["T_WHITESPACE"," ",1460],["T_VARIABLE","$this",1460],["T_OBJECT_OPERATOR","->",1460],["T_STRING","_storeManager",1460],["T_OBJECT_OPERATOR","->",1460],["T_STRING","getStore",1460],"(",["T_VARIABLE","$this",1460],["T_OBJECT_OPERATOR","->",1460],["T_STRING","getStoreId",1460],"(",")",")",["T_OBJECT_OPERATOR","->",1460],["T_STRING","getWebsiteId",1460],"(",")",";",["T_WHITESPACE","\n        ",1460],"}",["T_WHITESPACE","\n\n        ",1461],["T_IF","if",1463],["T_WHITESPACE"," ",1463],"(","!",["T_STRING","is_null",1463],"(",["T_VARIABLE","$customerGroupId",1463],")",")",["T_WHITESPACE"," ",1463],"{",["T_WHITESPACE","\n            ",1463],["T_VARIABLE","$this",1464],["T_OBJECT_OPERATOR","->",1464],["T_STRING","_productLimitationFilters",1464],"[",["T_CONSTANT_ENCAPSED_STRING","'customer_group_id'",1464],"]",["T_WHITESPACE"," ",1464],"=",["T_WHITESPACE"," ",1464],["T_VARIABLE","$customerGroupId",1464],";",["T_WHITESPACE","\n        ",1464],"}",["T_WHITESPACE","\n        ",1465],["T_IF","if",1466],["T_WHITESPACE"," ",1466],"(","!",["T_STRING","is_null",1466],"(",["T_VARIABLE","$websiteId",1466],")",")",["T_WHITESPACE"," ",1466],"{",["T_WHITESPACE","\n            ",1466],["T_VARIABLE","$this",1467],["T_OBJECT_OPERATOR","->",1467],["T_STRING","_productLimitationFilters",1467],"[",["T_CONSTANT_ENCAPSED_STRING","'website_id'",1467],"]",["T_WHITESPACE"," ",1467],"=",["T_WHITESPACE"," ",1467],["T_VARIABLE","$websiteId",1467],";",["T_WHITESPACE","\n        ",1467],"}",["T_WHITESPACE","\n\n        ",1468],["T_VARIABLE","$this",1470],["T_OBJECT_OPERATOR","->",1470],["T_STRING","_applyProductLimitations",1470],"(",")",";",["T_WHITESPACE","\n\n        ",1470],["T_RETURN","return",1472],["T_WHITESPACE"," ",1472],["T_VARIABLE","$this",1472],";",["T_WHITESPACE","\n    ",1472],"}",["T_WHITESPACE","\n\n    ",1473],["T_DOC_COMMENT","\/**\n     * Add attribute to filter\n     *\n     * @param \\Magento\\Eav\\Model\\Entity\\Attribute\\AbstractAttribute|string $attribute\n     * @param array $condition\n     * @param string $joinType\n     * @return $this\n     * @SuppressWarnings(PHPMD.CyclomaticComplexity)\n     *\/",1475],["T_WHITESPACE","\n    ",1483],["T_PUBLIC","public",1484],["T_WHITESPACE"," ",1484],["T_FUNCTION","function",1484],["T_WHITESPACE"," ",1484],["T_STRING","addAttributeToFilter",1484],"(",["T_VARIABLE","$attribute",1484],",",["T_WHITESPACE"," ",1484],["T_VARIABLE","$condition",1484],["T_WHITESPACE"," ",1484],"=",["T_WHITESPACE"," ",1484],["T_STRING","null",1484],",",["T_WHITESPACE"," ",1484],["T_VARIABLE","$joinType",1484],["T_WHITESPACE"," ",1484],"=",["T_WHITESPACE"," ",1484],["T_CONSTANT_ENCAPSED_STRING","'inner'",1484],")",["T_WHITESPACE","\n    ",1484],"{",["T_WHITESPACE","\n        ",1485],["T_IF","if",1486],["T_WHITESPACE"," ",1486],"(",["T_VARIABLE","$this",1486],["T_OBJECT_OPERATOR","->",1486],["T_STRING","isEnabledFlat",1486],"(",")",")",["T_WHITESPACE"," ",1486],"{",["T_WHITESPACE","\n            ",1486],["T_IF","if",1487],["T_WHITESPACE"," ",1487],"(",["T_VARIABLE","$attribute",1487],["T_WHITESPACE"," ",1487],["T_INSTANCEOF","instanceof",1487],["T_WHITESPACE"," ",1487],["T_NS_SEPARATOR","\\",1487],["T_STRING","Magento",1487],["T_NS_SEPARATOR","\\",1487],["T_STRING","Eav",1487],["T_NS_SEPARATOR","\\",1487],["T_STRING","Model",1487],["T_NS_SEPARATOR","\\",1487],["T_STRING","Entity",1487],["T_NS_SEPARATOR","\\",1487],["T_STRING","Attribute",1487],["T_NS_SEPARATOR","\\",1487],["T_STRING","AbstractAttribute",1487],")",["T_WHITESPACE"," ",1487],"{",["T_WHITESPACE","\n                ",1487],["T_VARIABLE","$attribute",1488],["T_WHITESPACE"," ",1488],"=",["T_WHITESPACE"," ",1488],["T_VARIABLE","$attribute",1488],["T_OBJECT_OPERATOR","->",1488],["T_STRING","getAttributeCode",1488],"(",")",";",["T_WHITESPACE","\n            ",1488],"}",["T_WHITESPACE","\n\n            ",1489],["T_IF","if",1491],["T_WHITESPACE"," ",1491],"(",["T_STRING","is_array",1491],"(",["T_VARIABLE","$attribute",1491],")",")",["T_WHITESPACE"," ",1491],"{",["T_WHITESPACE","\n                ",1491],["T_VARIABLE","$sqlArr",1492],["T_WHITESPACE"," ",1492],"=",["T_WHITESPACE"," ",1492],"[","]",";",["T_WHITESPACE","\n                ",1492],["T_FOREACH","foreach",1493],["T_WHITESPACE"," ",1493],"(",["T_VARIABLE","$attribute",1493],["T_WHITESPACE"," ",1493],["T_AS","as",1493],["T_WHITESPACE"," ",1493],["T_VARIABLE","$condition",1493],")",["T_WHITESPACE"," ",1493],"{",["T_WHITESPACE","\n                    ",1493],["T_VARIABLE","$sqlArr",1494],"[","]",["T_WHITESPACE"," ",1494],"=",["T_WHITESPACE"," ",1494],["T_VARIABLE","$this",1494],["T_OBJECT_OPERATOR","->",1494],["T_STRING","_getAttributeConditionSql",1494],"(",["T_VARIABLE","$condition",1494],"[",["T_CONSTANT_ENCAPSED_STRING","'attribute'",1494],"]",",",["T_WHITESPACE"," ",1494],["T_VARIABLE","$condition",1494],",",["T_WHITESPACE"," ",1494],["T_VARIABLE","$joinType",1494],")",";",["T_WHITESPACE","\n                ",1494],"}",["T_WHITESPACE","\n                ",1495],["T_VARIABLE","$conditionSql",1496],["T_WHITESPACE"," ",1496],"=",["T_WHITESPACE"," ",1496],["T_CONSTANT_ENCAPSED_STRING","'('",1496],["T_WHITESPACE"," ",1496],".",["T_WHITESPACE"," ",1496],["T_STRING","join",1496],"(",["T_CONSTANT_ENCAPSED_STRING","') OR ('",1496],",",["T_WHITESPACE"," ",1496],["T_VARIABLE","$sqlArr",1496],")",["T_WHITESPACE"," ",1496],".",["T_WHITESPACE"," ",1496],["T_CONSTANT_ENCAPSED_STRING","')'",1496],";",["T_WHITESPACE","\n                ",1496],["T_VARIABLE","$this",1497],["T_OBJECT_OPERATOR","->",1497],["T_STRING","getSelect",1497],"(",")",["T_OBJECT_OPERATOR","->",1497],["T_STRING","where",1497],"(",["T_VARIABLE","$conditionSql",1497],")",";",["T_WHITESPACE","\n                ",1497],["T_RETURN","return",1498],["T_WHITESPACE"," ",1498],["T_VARIABLE","$this",1498],";",["T_WHITESPACE","\n            ",1498],"}",["T_WHITESPACE","\n\n            ",1499],["T_IF","if",1501],["T_WHITESPACE"," ",1501],"(","!",["T_ISSET","isset",1501],"(",["T_VARIABLE","$this",1501],["T_OBJECT_OPERATOR","->",1501],["T_STRING","_selectAttributes",1501],"[",["T_VARIABLE","$attribute",1501],"]",")",")",["T_WHITESPACE"," ",1501],"{",["T_WHITESPACE","\n                ",1501],["T_VARIABLE","$this",1502],["T_OBJECT_OPERATOR","->",1502],["T_STRING","addAttributeToSelect",1502],"(",["T_VARIABLE","$attribute",1502],")",";",["T_WHITESPACE","\n            ",1502],"}",["T_WHITESPACE","\n\n            ",1503],["T_IF","if",1505],["T_WHITESPACE"," ",1505],"(",["T_ISSET","isset",1505],"(",["T_VARIABLE","$this",1505],["T_OBJECT_OPERATOR","->",1505],["T_STRING","_selectAttributes",1505],"[",["T_VARIABLE","$attribute",1505],"]",")",")",["T_WHITESPACE"," ",1505],"{",["T_WHITESPACE","\n                ",1505],["T_VARIABLE","$this",1506],["T_OBJECT_OPERATOR","->",1506],["T_STRING","getSelect",1506],"(",")",["T_OBJECT_OPERATOR","->",1506],["T_STRING","where",1506],"(",["T_VARIABLE","$this",1506],["T_OBJECT_OPERATOR","->",1506],["T_STRING","_getConditionSql",1506],"(",["T_CONSTANT_ENCAPSED_STRING","'e.'",1506],["T_WHITESPACE"," ",1506],".",["T_WHITESPACE"," ",1506],["T_VARIABLE","$attribute",1506],",",["T_WHITESPACE"," ",1506],["T_VARIABLE","$condition",1506],")",")",";",["T_WHITESPACE","\n            ",1506],"}",["T_WHITESPACE","\n\n            ",1507],["T_RETURN","return",1509],["T_WHITESPACE"," ",1509],["T_VARIABLE","$this",1509],";",["T_WHITESPACE","\n        ",1509],"}",["T_WHITESPACE","\n\n        ",1510],["T_VARIABLE","$this",1512],["T_OBJECT_OPERATOR","->",1512],["T_STRING","_allIdsCache",1512],["T_WHITESPACE"," ",1512],"=",["T_WHITESPACE"," ",1512],["T_STRING","null",1512],";",["T_WHITESPACE","\n\n        ",1512],["T_IF","if",1514],["T_WHITESPACE"," ",1514],"(",["T_STRING","is_string",1514],"(",["T_VARIABLE","$attribute",1514],")",["T_WHITESPACE"," ",1514],["T_BOOLEAN_AND","&&",1514],["T_WHITESPACE"," ",1514],["T_VARIABLE","$attribute",1514],["T_WHITESPACE"," ",1514],["T_IS_EQUAL","==",1514],["T_WHITESPACE"," ",1514],["T_CONSTANT_ENCAPSED_STRING","'is_saleable'",1514],")",["T_WHITESPACE"," ",1514],"{",["T_WHITESPACE","\n            ",1514],["T_VARIABLE","$columns",1515],["T_WHITESPACE"," ",1515],"=",["T_WHITESPACE"," ",1515],["T_VARIABLE","$this",1515],["T_OBJECT_OPERATOR","->",1515],["T_STRING","getSelect",1515],"(",")",["T_OBJECT_OPERATOR","->",1515],["T_STRING","getPart",1515],"(",["T_NS_SEPARATOR","\\",1515],["T_STRING","Magento",1515],["T_NS_SEPARATOR","\\",1515],["T_STRING","Framework",1515],["T_NS_SEPARATOR","\\",1515],["T_STRING","DB",1515],["T_NS_SEPARATOR","\\",1515],["T_STRING","Select",1515],["T_DOUBLE_COLON","::",1515],["T_STRING","COLUMNS",1515],")",";",["T_WHITESPACE","\n            ",1515],["T_FOREACH","foreach",1516],["T_WHITESPACE"," ",1516],"(",["T_VARIABLE","$columns",1516],["T_WHITESPACE"," ",1516],["T_AS","as",1516],["T_WHITESPACE"," ",1516],["T_VARIABLE","$columnEntry",1516],")",["T_WHITESPACE"," ",1516],"{",["T_WHITESPACE","\n                ",1516],["T_LIST","list",1517],"(",["T_VARIABLE","$correlationName",1517],",",["T_WHITESPACE"," ",1517],["T_VARIABLE","$column",1517],",",["T_WHITESPACE"," ",1517],["T_VARIABLE","$alias",1517],")",["T_WHITESPACE"," ",1517],"=",["T_WHITESPACE"," ",1517],["T_VARIABLE","$columnEntry",1517],";",["T_WHITESPACE","\n                ",1517],["T_IF","if",1518],["T_WHITESPACE"," ",1518],"(",["T_VARIABLE","$alias",1518],["T_WHITESPACE"," ",1518],["T_IS_EQUAL","==",1518],["T_WHITESPACE"," ",1518],["T_CONSTANT_ENCAPSED_STRING","'is_saleable'",1518],")",["T_WHITESPACE"," ",1518],"{",["T_WHITESPACE","\n                    ",1518],["T_IF","if",1519],["T_WHITESPACE"," ",1519],"(",["T_VARIABLE","$column",1519],["T_WHITESPACE"," ",1519],["T_INSTANCEOF","instanceof",1519],["T_WHITESPACE"," ",1519],["T_NS_SEPARATOR","\\",1519],["T_STRING","Zend_Db_Expr",1519],")",["T_WHITESPACE"," ",1519],"{",["T_WHITESPACE","\n                        ",1519],["T_VARIABLE","$field",1520],["T_WHITESPACE"," ",1520],"=",["T_WHITESPACE"," ",1520],["T_VARIABLE","$column",1520],";",["T_WHITESPACE","\n                    ",1520],"}",["T_WHITESPACE"," ",1521],["T_ELSE","else",1521],["T_WHITESPACE"," ",1521],"{",["T_WHITESPACE","\n                        ",1521],["T_VARIABLE","$connection",1522],["T_WHITESPACE"," ",1522],"=",["T_WHITESPACE"," ",1522],["T_VARIABLE","$this",1522],["T_OBJECT_OPERATOR","->",1522],["T_STRING","getSelect",1522],"(",")",["T_OBJECT_OPERATOR","->",1522],["T_STRING","getConnection",1522],"(",")",";",["T_WHITESPACE","\n                        ",1522],["T_IF","if",1523],["T_WHITESPACE"," ",1523],"(",["T_EMPTY","empty",1523],"(",["T_VARIABLE","$correlationName",1523],")",")",["T_WHITESPACE"," ",1523],"{",["T_WHITESPACE","\n                            ",1523],["T_VARIABLE","$field",1524],["T_WHITESPACE"," ",1524],"=",["T_WHITESPACE"," ",1524],["T_VARIABLE","$connection",1524],["T_OBJECT_OPERATOR","->",1524],["T_STRING","quoteColumnAs",1524],"(",["T_VARIABLE","$column",1524],",",["T_WHITESPACE"," ",1524],["T_VARIABLE","$alias",1524],",",["T_WHITESPACE"," ",1524],["T_STRING","true",1524],")",";",["T_WHITESPACE","\n                        ",1524],"}",["T_WHITESPACE"," ",1525],["T_ELSE","else",1525],["T_WHITESPACE"," ",1525],"{",["T_WHITESPACE","\n                            ",1525],["T_VARIABLE","$field",1526],["T_WHITESPACE"," ",1526],"=",["T_WHITESPACE"," ",1526],["T_VARIABLE","$connection",1526],["T_OBJECT_OPERATOR","->",1526],["T_STRING","quoteColumnAs",1526],"(","[",["T_VARIABLE","$correlationName",1526],",",["T_WHITESPACE"," ",1526],["T_VARIABLE","$column",1526],"]",",",["T_WHITESPACE"," ",1526],["T_VARIABLE","$alias",1526],",",["T_WHITESPACE"," ",1526],["T_STRING","true",1526],")",";",["T_WHITESPACE","\n                        ",1526],"}",["T_WHITESPACE","\n                    ",1527],"}",["T_WHITESPACE","\n                    ",1528],["T_VARIABLE","$this",1529],["T_OBJECT_OPERATOR","->",1529],["T_STRING","getSelect",1529],"(",")",["T_OBJECT_OPERATOR","->",1529],["T_STRING","where",1529],"(","\"",["T_CURLY_OPEN","{",1529],["T_VARIABLE","$field",1529],"}",["T_ENCAPSED_AND_WHITESPACE"," = ?",1529],"\"",",",["T_WHITESPACE"," ",1529],["T_VARIABLE","$condition",1529],")",";",["T_WHITESPACE","\n                    ",1529],["T_BREAK","break",1530],";",["T_WHITESPACE","\n                ",1530],"}",["T_WHITESPACE","\n            ",1531],"}",["T_WHITESPACE","\n\n            ",1532],["T_RETURN","return",1534],["T_WHITESPACE"," ",1534],["T_VARIABLE","$this",1534],";",["T_WHITESPACE","\n        ",1534],"}",["T_WHITESPACE"," ",1535],["T_ELSE","else",1535],["T_WHITESPACE"," ",1535],"{",["T_WHITESPACE","\n            ",1535],["T_RETURN","return",1536],["T_WHITESPACE"," ",1536],["T_STRING","parent",1536],["T_DOUBLE_COLON","::",1536],["T_STRING","addAttributeToFilter",1536],"(",["T_VARIABLE","$attribute",1536],",",["T_WHITESPACE"," ",1536],["T_VARIABLE","$condition",1536],",",["T_WHITESPACE"," ",1536],["T_VARIABLE","$joinType",1536],")",";",["T_WHITESPACE","\n        ",1536],"}",["T_WHITESPACE","\n    ",1537],"}",["T_WHITESPACE","\n\n    ",1538],["T_DOC_COMMENT","\/**\n     * {@inheritdoc}\n     *\/",1540],["T_WHITESPACE","\n    ",1542],["T_PROTECTED","protected",1543],["T_WHITESPACE"," ",1543],["T_FUNCTION","function",1543],["T_WHITESPACE"," ",1543],["T_STRING","getEntityPkName",1543],"(",["T_NS_SEPARATOR","\\",1543],["T_STRING","Magento",1543],["T_NS_SEPARATOR","\\",1543],["T_STRING","Eav",1543],["T_NS_SEPARATOR","\\",1543],["T_STRING","Model",1543],["T_NS_SEPARATOR","\\",1543],["T_STRING","Entity",1543],["T_NS_SEPARATOR","\\",1543],["T_STRING","AbstractEntity",1543],["T_WHITESPACE"," ",1543],["T_VARIABLE","$entity",1543],")",["T_WHITESPACE","\n    ",1543],"{",["T_WHITESPACE","\n        ",1544],["T_RETURN","return",1545],["T_WHITESPACE"," ",1545],["T_VARIABLE","$entity",1545],["T_OBJECT_OPERATOR","->",1545],["T_STRING","getLinkField",1545],"(",")",";",["T_WHITESPACE","\n    ",1545],"}",["T_WHITESPACE","\n\n    ",1546],["T_DOC_COMMENT","\/**\n     * Add requere tax percent flag for product collection\n     *\n     * @return $this\n     *\/",1548],["T_WHITESPACE","\n    ",1552],["T_PUBLIC","public",1553],["T_WHITESPACE"," ",1553],["T_FUNCTION","function",1553],["T_WHITESPACE"," ",1553],["T_STRING","addTaxPercents",1553],"(",")",["T_WHITESPACE","\n    ",1553],"{",["T_WHITESPACE","\n        ",1554],["T_VARIABLE","$this",1555],["T_OBJECT_OPERATOR","->",1555],["T_STRING","_addTaxPercents",1555],["T_WHITESPACE"," ",1555],"=",["T_WHITESPACE"," ",1555],["T_STRING","true",1555],";",["T_WHITESPACE","\n        ",1555],["T_RETURN","return",1556],["T_WHITESPACE"," ",1556],["T_VARIABLE","$this",1556],";",["T_WHITESPACE","\n    ",1556],"}",["T_WHITESPACE","\n\n    ",1557],["T_DOC_COMMENT","\/**\n     * Get require tax percent flag value\n     *\n     * @return bool\n     *\/",1559],["T_WHITESPACE","\n    ",1563],["T_PUBLIC","public",1564],["T_WHITESPACE"," ",1564],["T_FUNCTION","function",1564],["T_WHITESPACE"," ",1564],["T_STRING","requireTaxPercent",1564],"(",")",["T_WHITESPACE","\n    ",1564],"{",["T_WHITESPACE","\n        ",1565],["T_RETURN","return",1566],["T_WHITESPACE"," ",1566],["T_VARIABLE","$this",1566],["T_OBJECT_OPERATOR","->",1566],["T_STRING","_addTaxPercents",1566],";",["T_WHITESPACE","\n    ",1566],"}",["T_WHITESPACE","\n\n    ",1567],["T_DOC_COMMENT","\/**\n     * Adding product custom options to result collection\n     *\n     * @return $this\n     *\/",1569],["T_WHITESPACE","\n    ",1573],["T_PUBLIC","public",1574],["T_WHITESPACE"," ",1574],["T_FUNCTION","function",1574],["T_WHITESPACE"," ",1574],["T_STRING","addOptionsToResult",1574],"(",")",["T_WHITESPACE","\n    ",1574],"{",["T_WHITESPACE","\n        ",1575],["T_VARIABLE","$productsByLinkId",1576],["T_WHITESPACE"," ",1576],"=",["T_WHITESPACE"," ",1576],"[","]",";",["T_WHITESPACE","\n\n        ",1576],["T_FOREACH","foreach",1578],["T_WHITESPACE"," ",1578],"(",["T_VARIABLE","$this",1578],["T_WHITESPACE"," ",1578],["T_AS","as",1578],["T_WHITESPACE"," ",1578],["T_VARIABLE","$product",1578],")",["T_WHITESPACE"," ",1578],"{",["T_WHITESPACE","\n            ",1578],["T_VARIABLE","$productId",1579],["T_WHITESPACE"," ",1579],"=",["T_WHITESPACE"," ",1579],["T_VARIABLE","$product",1579],["T_OBJECT_OPERATOR","->",1579],["T_STRING","getData",1579],"(",["T_WHITESPACE","\n                ",1579],["T_VARIABLE","$product",1580],["T_OBJECT_OPERATOR","->",1580],["T_STRING","getResource",1580],"(",")",["T_OBJECT_OPERATOR","->",1580],["T_STRING","getLinkField",1580],"(",")",["T_WHITESPACE","\n            ",1580],")",";",["T_WHITESPACE","\n\n            ",1581],["T_VARIABLE","$productsByLinkId",1583],"[",["T_VARIABLE","$productId",1583],"]",["T_WHITESPACE"," ",1583],"=",["T_WHITESPACE"," ",1583],["T_VARIABLE","$product",1583],";",["T_WHITESPACE","\n        ",1583],"}",["T_WHITESPACE","\n\n        ",1584],["T_IF","if",1586],["T_WHITESPACE"," ",1586],"(","!",["T_EMPTY","empty",1586],"(",["T_VARIABLE","$productsByLinkId",1586],")",")",["T_WHITESPACE"," ",1586],"{",["T_WHITESPACE","\n            ",1586],["T_VARIABLE","$options",1587],["T_WHITESPACE"," ",1587],"=",["T_WHITESPACE"," ",1587],["T_VARIABLE","$this",1587],["T_OBJECT_OPERATOR","->",1587],["T_STRING","_productOptionFactory",1587],["T_OBJECT_OPERATOR","->",1587],["T_STRING","create",1587],"(",")",["T_OBJECT_OPERATOR","->",1587],["T_STRING","getCollection",1587],"(",")",["T_OBJECT_OPERATOR","->",1587],["T_STRING","addTitleToResult",1587],"(",["T_WHITESPACE","\n                ",1587],["T_VARIABLE","$this",1588],["T_OBJECT_OPERATOR","->",1588],["T_STRING","_storeManager",1588],["T_OBJECT_OPERATOR","->",1588],["T_STRING","getStore",1588],"(",")",["T_OBJECT_OPERATOR","->",1588],["T_STRING","getId",1588],"(",")",["T_WHITESPACE","\n            ",1588],")",["T_OBJECT_OPERATOR","->",1589],["T_STRING","addPriceToResult",1589],"(",["T_WHITESPACE","\n                ",1589],["T_VARIABLE","$this",1590],["T_OBJECT_OPERATOR","->",1590],["T_STRING","_storeManager",1590],["T_OBJECT_OPERATOR","->",1590],["T_STRING","getStore",1590],"(",")",["T_OBJECT_OPERATOR","->",1590],["T_STRING","getId",1590],"(",")",["T_WHITESPACE","\n            ",1590],")",["T_OBJECT_OPERATOR","->",1591],["T_STRING","addProductToFilter",1591],"(",["T_WHITESPACE","\n                ",1591],["T_STRING","array_keys",1592],"(",["T_VARIABLE","$productsByLinkId",1592],")",["T_WHITESPACE","\n            ",1592],")",["T_OBJECT_OPERATOR","->",1593],["T_STRING","addValuesToResult",1593],"(",")",";",["T_WHITESPACE","\n\n            ",1593],["T_FOREACH","foreach",1595],["T_WHITESPACE"," ",1595],"(",["T_VARIABLE","$options",1595],["T_WHITESPACE"," ",1595],["T_AS","as",1595],["T_WHITESPACE"," ",1595],["T_VARIABLE","$option",1595],")",["T_WHITESPACE"," ",1595],"{",["T_WHITESPACE","\n                ",1595],["T_IF","if",1596],["T_WHITESPACE"," ",1596],"(",["T_ISSET","isset",1596],"(",["T_VARIABLE","$productsByLinkId",1596],"[",["T_VARIABLE","$option",1596],["T_OBJECT_OPERATOR","->",1596],["T_STRING","getProductId",1596],"(",")","]",")",")",["T_WHITESPACE"," ",1596],"{",["T_WHITESPACE","\n                    ",1596],["T_VARIABLE","$productsByLinkId",1597],"[",["T_VARIABLE","$option",1597],["T_OBJECT_OPERATOR","->",1597],["T_STRING","getProductId",1597],"(",")","]",["T_OBJECT_OPERATOR","->",1597],["T_STRING","addOption",1597],"(",["T_VARIABLE","$option",1597],")",";",["T_WHITESPACE","\n                ",1597],"}",["T_WHITESPACE","\n            ",1598],"}",["T_WHITESPACE","\n        ",1599],"}",["T_WHITESPACE","\n\n        ",1600],["T_RETURN","return",1602],["T_WHITESPACE"," ",1602],["T_VARIABLE","$this",1602],";",["T_WHITESPACE","\n    ",1602],"}",["T_WHITESPACE","\n\n    ",1603],["T_DOC_COMMENT","\/**\n     * Filter products with required options\n     *\n     * @return $this\n     *\/",1605],["T_WHITESPACE","\n    ",1609],["T_PUBLIC","public",1610],["T_WHITESPACE"," ",1610],["T_FUNCTION","function",1610],["T_WHITESPACE"," ",1610],["T_STRING","addFilterByRequiredOptions",1610],"(",")",["T_WHITESPACE","\n    ",1610],"{",["T_WHITESPACE","\n        ",1611],["T_VARIABLE","$this",1612],["T_OBJECT_OPERATOR","->",1612],["T_STRING","addAttributeToFilter",1612],"(",["T_CONSTANT_ENCAPSED_STRING","'required_options'",1612],",",["T_WHITESPACE"," ",1612],"[","[",["T_CONSTANT_ENCAPSED_STRING","'neq'",1612],["T_WHITESPACE"," ",1612],["T_DOUBLE_ARROW","=>",1612],["T_WHITESPACE"," ",1612],["T_LNUMBER","1",1612],"]",",",["T_WHITESPACE"," ",1612],"[",["T_CONSTANT_ENCAPSED_STRING","'null'",1612],["T_WHITESPACE"," ",1612],["T_DOUBLE_ARROW","=>",1612],["T_WHITESPACE"," ",1612],["T_STRING","true",1612],"]","]",",",["T_WHITESPACE"," ",1612],["T_CONSTANT_ENCAPSED_STRING","'left'",1612],")",";",["T_WHITESPACE","\n        ",1612],["T_RETURN","return",1613],["T_WHITESPACE"," ",1613],["T_VARIABLE","$this",1613],";",["T_WHITESPACE","\n    ",1613],"}",["T_WHITESPACE","\n\n    ",1614],["T_DOC_COMMENT","\/**\n     * Set product visibility filter for enabled products\n     *\n     * @param array $visibility\n     * @return $this\n     *\/",1616],["T_WHITESPACE","\n    ",1621],["T_PUBLIC","public",1622],["T_WHITESPACE"," ",1622],["T_FUNCTION","function",1622],["T_WHITESPACE"," ",1622],["T_STRING","setVisibility",1622],"(",["T_VARIABLE","$visibility",1622],")",["T_WHITESPACE","\n    ",1622],"{",["T_WHITESPACE","\n        ",1623],["T_VARIABLE","$this",1624],["T_OBJECT_OPERATOR","->",1624],["T_STRING","_productLimitationFilters",1624],"[",["T_CONSTANT_ENCAPSED_STRING","'visibility'",1624],"]",["T_WHITESPACE"," ",1624],"=",["T_WHITESPACE"," ",1624],["T_VARIABLE","$visibility",1624],";",["T_WHITESPACE","\n        ",1624],["T_VARIABLE","$this",1625],["T_OBJECT_OPERATOR","->",1625],["T_STRING","_applyProductLimitations",1625],"(",")",";",["T_WHITESPACE","\n\n        ",1625],["T_RETURN","return",1627],["T_WHITESPACE"," ",1627],["T_VARIABLE","$this",1627],";",["T_WHITESPACE","\n    ",1627],"}",["T_WHITESPACE","\n\n    ",1628],["T_DOC_COMMENT","\/**\n     * Add attribute to sort order\n     *\n     * @param string $attribute\n     * @param string $dir\n     * @return $this\n     * @SuppressWarnings(PHPMD.CyclomaticComplexity)\n     * @SuppressWarnings(PHPMD.NPathComplexity)\n     *\/",1630],["T_WHITESPACE","\n    ",1638],["T_PUBLIC","public",1639],["T_WHITESPACE"," ",1639],["T_FUNCTION","function",1639],["T_WHITESPACE"," ",1639],["T_STRING","addAttributeToSort",1639],"(",["T_VARIABLE","$attribute",1639],",",["T_WHITESPACE"," ",1639],["T_VARIABLE","$dir",1639],["T_WHITESPACE"," ",1639],"=",["T_WHITESPACE"," ",1639],["T_STRING","self",1639],["T_DOUBLE_COLON","::",1639],["T_STRING","SORT_ORDER_ASC",1639],")",["T_WHITESPACE","\n    ",1639],"{",["T_WHITESPACE","\n        ",1640],["T_IF","if",1641],["T_WHITESPACE"," ",1641],"(",["T_VARIABLE","$attribute",1641],["T_WHITESPACE"," ",1641],["T_IS_EQUAL","==",1641],["T_WHITESPACE"," ",1641],["T_CONSTANT_ENCAPSED_STRING","'position'",1641],")",["T_WHITESPACE"," ",1641],"{",["T_WHITESPACE","\n            ",1641],["T_IF","if",1642],["T_WHITESPACE"," ",1642],"(",["T_ISSET","isset",1642],"(",["T_VARIABLE","$this",1642],["T_OBJECT_OPERATOR","->",1642],["T_STRING","_joinFields",1642],"[",["T_VARIABLE","$attribute",1642],"]",")",")",["T_WHITESPACE"," ",1642],"{",["T_WHITESPACE","\n                ",1642],["T_VARIABLE","$this",1643],["T_OBJECT_OPERATOR","->",1643],["T_STRING","getSelect",1643],"(",")",["T_OBJECT_OPERATOR","->",1643],["T_STRING","order",1643],"(",["T_VARIABLE","$this",1643],["T_OBJECT_OPERATOR","->",1643],["T_STRING","_getAttributeFieldName",1643],"(",["T_VARIABLE","$attribute",1643],")",["T_WHITESPACE"," ",1643],".",["T_WHITESPACE"," ",1643],["T_CONSTANT_ENCAPSED_STRING","' '",1643],["T_WHITESPACE"," ",1643],".",["T_WHITESPACE"," ",1643],["T_VARIABLE","$dir",1643],")",";",["T_WHITESPACE","\n                ",1643],["T_RETURN","return",1644],["T_WHITESPACE"," ",1644],["T_VARIABLE","$this",1644],";",["T_WHITESPACE","\n            ",1644],"}",["T_WHITESPACE","\n            ",1645],["T_IF","if",1646],["T_WHITESPACE"," ",1646],"(",["T_VARIABLE","$this",1646],["T_OBJECT_OPERATOR","->",1646],["T_STRING","isEnabledFlat",1646],"(",")",")",["T_WHITESPACE"," ",1646],"{",["T_WHITESPACE","\n                ",1646],["T_VARIABLE","$this",1647],["T_OBJECT_OPERATOR","->",1647],["T_STRING","getSelect",1647],"(",")",["T_OBJECT_OPERATOR","->",1647],["T_STRING","order",1647],"(","\"",["T_ENCAPSED_AND_WHITESPACE","cat_index_position ",1647],["T_CURLY_OPEN","{",1647],["T_VARIABLE","$dir",1647],"}","\"",")",";",["T_WHITESPACE","\n            ",1647],"}",["T_WHITESPACE","\n            ",1648],["T_COMMENT","\/\/ optimize if using cat index\n",1649],["T_WHITESPACE","            ",1650],["T_VARIABLE","$filters",1650],["T_WHITESPACE"," ",1650],"=",["T_WHITESPACE"," ",1650],["T_VARIABLE","$this",1650],["T_OBJECT_OPERATOR","->",1650],["T_STRING","_productLimitationFilters",1650],";",["T_WHITESPACE","\n            ",1650],["T_IF","if",1651],["T_WHITESPACE"," ",1651],"(",["T_ISSET","isset",1651],"(",["T_VARIABLE","$filters",1651],"[",["T_CONSTANT_ENCAPSED_STRING","'category_id'",1651],"]",")",["T_WHITESPACE"," ",1651],["T_BOOLEAN_OR","||",1651],["T_WHITESPACE"," ",1651],["T_ISSET","isset",1651],"(",["T_VARIABLE","$filters",1651],"[",["T_CONSTANT_ENCAPSED_STRING","'visibility'",1651],"]",")",")",["T_WHITESPACE"," ",1651],"{",["T_WHITESPACE","\n                ",1651],["T_VARIABLE","$this",1652],["T_OBJECT_OPERATOR","->",1652],["T_STRING","getSelect",1652],"(",")",["T_OBJECT_OPERATOR","->",1652],["T_STRING","order",1652],"(",["T_CONSTANT_ENCAPSED_STRING","'cat_index.position '",1652],["T_WHITESPACE"," ",1652],".",["T_WHITESPACE"," ",1652],["T_VARIABLE","$dir",1652],")",";",["T_WHITESPACE","\n            ",1652],"}",["T_WHITESPACE"," ",1653],["T_ELSE","else",1653],["T_WHITESPACE"," ",1653],"{",["T_WHITESPACE","\n                ",1653],["T_VARIABLE","$this",1654],["T_OBJECT_OPERATOR","->",1654],["T_STRING","getSelect",1654],"(",")",["T_OBJECT_OPERATOR","->",1654],["T_STRING","order",1654],"(",["T_CONSTANT_ENCAPSED_STRING","'e.entity_id '",1654],["T_WHITESPACE"," ",1654],".",["T_WHITESPACE"," ",1654],["T_VARIABLE","$dir",1654],")",";",["T_WHITESPACE","\n            ",1654],"}",["T_WHITESPACE","\n\n            ",1655],["T_RETURN","return",1657],["T_WHITESPACE"," ",1657],["T_VARIABLE","$this",1657],";",["T_WHITESPACE","\n        ",1657],"}",["T_WHITESPACE"," ",1658],["T_ELSEIF","elseif",1658],["T_WHITESPACE"," ",1658],"(",["T_VARIABLE","$attribute",1658],["T_WHITESPACE"," ",1658],["T_IS_EQUAL","==",1658],["T_WHITESPACE"," ",1658],["T_CONSTANT_ENCAPSED_STRING","'is_saleable'",1658],")",["T_WHITESPACE"," ",1658],"{",["T_WHITESPACE","\n            ",1658],["T_VARIABLE","$this",1659],["T_OBJECT_OPERATOR","->",1659],["T_STRING","getSelect",1659],"(",")",["T_OBJECT_OPERATOR","->",1659],["T_STRING","order",1659],"(",["T_CONSTANT_ENCAPSED_STRING","\"is_saleable \"",1659],["T_WHITESPACE"," ",1659],".",["T_WHITESPACE"," ",1659],["T_VARIABLE","$dir",1659],")",";",["T_WHITESPACE","\n            ",1659],["T_RETURN","return",1660],["T_WHITESPACE"," ",1660],["T_VARIABLE","$this",1660],";",["T_WHITESPACE","\n        ",1660],"}",["T_WHITESPACE","\n\n        ",1661],["T_VARIABLE","$storeId",1663],["T_WHITESPACE"," ",1663],"=",["T_WHITESPACE"," ",1663],["T_VARIABLE","$this",1663],["T_OBJECT_OPERATOR","->",1663],["T_STRING","getStoreId",1663],"(",")",";",["T_WHITESPACE","\n        ",1663],["T_IF","if",1664],["T_WHITESPACE"," ",1664],"(",["T_VARIABLE","$attribute",1664],["T_WHITESPACE"," ",1664],["T_IS_EQUAL","==",1664],["T_WHITESPACE"," ",1664],["T_CONSTANT_ENCAPSED_STRING","'price'",1664],["T_WHITESPACE"," ",1664],["T_BOOLEAN_AND","&&",1664],["T_WHITESPACE"," ",1664],["T_VARIABLE","$storeId",1664],["T_WHITESPACE"," ",1664],["T_IS_NOT_EQUAL","!=",1664],["T_WHITESPACE"," ",1664],["T_LNUMBER","0",1664],")",["T_WHITESPACE"," ",1664],"{",["T_WHITESPACE","\n            ",1664],["T_VARIABLE","$this",1665],["T_OBJECT_OPERATOR","->",1665],["T_STRING","addPriceData",1665],"(",")",";",["T_WHITESPACE","\n            ",1665],["T_IF","if",1666],["T_WHITESPACE"," ",1666],"(",["T_VARIABLE","$this",1666],["T_OBJECT_OPERATOR","->",1666],["T_STRING","_productLimitationFilters",1666],["T_OBJECT_OPERATOR","->",1666],["T_STRING","isUsingPriceIndex",1666],"(",")",")",["T_WHITESPACE"," ",1666],"{",["T_WHITESPACE","\n                ",1666],["T_VARIABLE","$this",1667],["T_OBJECT_OPERATOR","->",1667],["T_STRING","getSelect",1667],"(",")",["T_OBJECT_OPERATOR","->",1667],["T_STRING","order",1667],"(","\"",["T_ENCAPSED_AND_WHITESPACE","price_index.min_price ",1667],["T_CURLY_OPEN","{",1667],["T_VARIABLE","$dir",1667],"}","\"",")",";",["T_WHITESPACE","\n                ",1667],["T_RETURN","return",1668],["T_WHITESPACE"," ",1668],["T_VARIABLE","$this",1668],";",["T_WHITESPACE","\n            ",1668],"}",["T_WHITESPACE","\n        ",1669],"}",["T_WHITESPACE","\n\n        ",1670],["T_IF","if",1672],["T_WHITESPACE"," ",1672],"(",["T_VARIABLE","$this",1672],["T_OBJECT_OPERATOR","->",1672],["T_STRING","isEnabledFlat",1672],"(",")",")",["T_WHITESPACE"," ",1672],"{",["T_WHITESPACE","\n            ",1672],["T_VARIABLE","$column",1673],["T_WHITESPACE"," ",1673],"=",["T_WHITESPACE"," ",1673],["T_VARIABLE","$this",1673],["T_OBJECT_OPERATOR","->",1673],["T_STRING","getEntity",1673],"(",")",["T_OBJECT_OPERATOR","->",1673],["T_STRING","getAttributeSortColumn",1673],"(",["T_VARIABLE","$attribute",1673],")",";",["T_WHITESPACE","\n\n            ",1673],["T_IF","if",1675],["T_WHITESPACE"," ",1675],"(",["T_VARIABLE","$column",1675],")",["T_WHITESPACE"," ",1675],"{",["T_WHITESPACE","\n                ",1675],["T_VARIABLE","$this",1676],["T_OBJECT_OPERATOR","->",1676],["T_STRING","getSelect",1676],"(",")",["T_OBJECT_OPERATOR","->",1676],["T_STRING","order",1676],"(","\"",["T_ENCAPSED_AND_WHITESPACE","e.",1676],["T_CURLY_OPEN","{",1676],["T_VARIABLE","$column",1676],"}",["T_ENCAPSED_AND_WHITESPACE"," ",1676],["T_CURLY_OPEN","{",1676],["T_VARIABLE","$dir",1676],"}","\"",")",";",["T_WHITESPACE","\n            ",1676],"}",["T_WHITESPACE"," ",1677],["T_ELSEIF","elseif",1677],["T_WHITESPACE"," ",1677],"(",["T_ISSET","isset",1677],"(",["T_VARIABLE","$this",1677],["T_OBJECT_OPERATOR","->",1677],["T_STRING","_joinFields",1677],"[",["T_VARIABLE","$attribute",1677],"]",")",")",["T_WHITESPACE"," ",1677],"{",["T_WHITESPACE","\n                ",1677],["T_VARIABLE","$this",1678],["T_OBJECT_OPERATOR","->",1678],["T_STRING","getSelect",1678],"(",")",["T_OBJECT_OPERATOR","->",1678],["T_STRING","order",1678],"(",["T_VARIABLE","$this",1678],["T_OBJECT_OPERATOR","->",1678],["T_STRING","_getAttributeFieldName",1678],"(",["T_VARIABLE","$attribute",1678],")",["T_WHITESPACE"," ",1678],".",["T_WHITESPACE"," ",1678],["T_CONSTANT_ENCAPSED_STRING","' '",1678],["T_WHITESPACE"," ",1678],".",["T_WHITESPACE"," ",1678],["T_VARIABLE","$dir",1678],")",";",["T_WHITESPACE","\n            ",1678],"}",["T_WHITESPACE","\n\n            ",1679],["T_RETURN","return",1681],["T_WHITESPACE"," ",1681],["T_VARIABLE","$this",1681],";",["T_WHITESPACE","\n        ",1681],"}",["T_WHITESPACE"," ",1682],["T_ELSE","else",1682],["T_WHITESPACE"," ",1682],"{",["T_WHITESPACE","\n            ",1682],["T_VARIABLE","$attrInstance",1683],["T_WHITESPACE"," ",1683],"=",["T_WHITESPACE"," ",1683],["T_VARIABLE","$this",1683],["T_OBJECT_OPERATOR","->",1683],["T_STRING","getEntity",1683],"(",")",["T_OBJECT_OPERATOR","->",1683],["T_STRING","getAttribute",1683],"(",["T_VARIABLE","$attribute",1683],")",";",["T_WHITESPACE","\n            ",1683],["T_IF","if",1684],["T_WHITESPACE"," ",1684],"(",["T_VARIABLE","$attrInstance",1684],["T_WHITESPACE"," ",1684],["T_BOOLEAN_AND","&&",1684],["T_WHITESPACE"," ",1684],["T_VARIABLE","$attrInstance",1684],["T_OBJECT_OPERATOR","->",1684],["T_STRING","usesSource",1684],"(",")",")",["T_WHITESPACE"," ",1684],"{",["T_WHITESPACE","\n                ",1684],["T_VARIABLE","$attrInstance",1685],["T_OBJECT_OPERATOR","->",1685],["T_STRING","getSource",1685],"(",")",["T_OBJECT_OPERATOR","->",1685],["T_STRING","addValueSortToCollection",1685],"(",["T_VARIABLE","$this",1685],",",["T_WHITESPACE"," ",1685],["T_VARIABLE","$dir",1685],")",";",["T_WHITESPACE","\n                ",1685],["T_RETURN","return",1686],["T_WHITESPACE"," ",1686],["T_VARIABLE","$this",1686],";",["T_WHITESPACE","\n            ",1686],"}",["T_WHITESPACE","\n        ",1687],"}",["T_WHITESPACE","\n\n        ",1688],["T_RETURN","return",1690],["T_WHITESPACE"," ",1690],["T_STRING","parent",1690],["T_DOUBLE_COLON","::",1690],["T_STRING","addAttributeToSort",1690],"(",["T_VARIABLE","$attribute",1690],",",["T_WHITESPACE"," ",1690],["T_VARIABLE","$dir",1690],")",";",["T_WHITESPACE","\n    ",1690],"}",["T_WHITESPACE","\n\n    ",1691],["T_DOC_COMMENT","\/**\n     * Prepare limitation filters\n     *\n     * @return $this\n     *\/",1693],["T_WHITESPACE","\n    ",1697],["T_PROTECTED","protected",1698],["T_WHITESPACE"," ",1698],["T_FUNCTION","function",1698],["T_WHITESPACE"," ",1698],["T_STRING","_prepareProductLimitationFilters",1698],"(",")",["T_WHITESPACE","\n    ",1698],"{",["T_WHITESPACE","\n        ",1699],["T_IF","if",1700],["T_WHITESPACE"," ",1700],"(",["T_ISSET","isset",1700],"(",["T_WHITESPACE","\n            ",1700],["T_VARIABLE","$this",1701],["T_OBJECT_OPERATOR","->",1701],["T_STRING","_productLimitationFilters",1701],"[",["T_CONSTANT_ENCAPSED_STRING","'visibility'",1701],"]",["T_WHITESPACE","\n        ",1701],")",["T_WHITESPACE"," ",1702],["T_BOOLEAN_AND","&&",1702],["T_WHITESPACE"," ",1702],"!",["T_ISSET","isset",1702],"(",["T_WHITESPACE","\n            ",1702],["T_VARIABLE","$this",1703],["T_OBJECT_OPERATOR","->",1703],["T_STRING","_productLimitationFilters",1703],"[",["T_CONSTANT_ENCAPSED_STRING","'store_id'",1703],"]",["T_WHITESPACE","\n        ",1703],")",["T_WHITESPACE","\n        ",1704],")",["T_WHITESPACE"," ",1705],"{",["T_WHITESPACE","\n            ",1705],["T_VARIABLE","$this",1706],["T_OBJECT_OPERATOR","->",1706],["T_STRING","_productLimitationFilters",1706],"[",["T_CONSTANT_ENCAPSED_STRING","'store_id'",1706],"]",["T_WHITESPACE"," ",1706],"=",["T_WHITESPACE"," ",1706],["T_VARIABLE","$this",1706],["T_OBJECT_OPERATOR","->",1706],["T_STRING","getStoreId",1706],"(",")",";",["T_WHITESPACE","\n        ",1706],"}",["T_WHITESPACE","\n        ",1707],["T_IF","if",1708],["T_WHITESPACE"," ",1708],"(",["T_ISSET","isset",1708],"(",["T_WHITESPACE","\n            ",1708],["T_VARIABLE","$this",1709],["T_OBJECT_OPERATOR","->",1709],["T_STRING","_productLimitationFilters",1709],"[",["T_CONSTANT_ENCAPSED_STRING","'category_id'",1709],"]",["T_WHITESPACE","\n        ",1709],")",["T_WHITESPACE"," ",1710],["T_BOOLEAN_AND","&&",1710],["T_WHITESPACE"," ",1710],"!",["T_ISSET","isset",1710],"(",["T_WHITESPACE","\n            ",1710],["T_VARIABLE","$this",1711],["T_OBJECT_OPERATOR","->",1711],["T_STRING","_productLimitationFilters",1711],"[",["T_CONSTANT_ENCAPSED_STRING","'store_id'",1711],"]",["T_WHITESPACE","\n        ",1711],")",["T_WHITESPACE","\n        ",1712],")",["T_WHITESPACE"," ",1713],"{",["T_WHITESPACE","\n            ",1713],["T_VARIABLE","$this",1714],["T_OBJECT_OPERATOR","->",1714],["T_STRING","_productLimitationFilters",1714],"[",["T_CONSTANT_ENCAPSED_STRING","'store_id'",1714],"]",["T_WHITESPACE"," ",1714],"=",["T_WHITESPACE"," ",1714],["T_VARIABLE","$this",1714],["T_OBJECT_OPERATOR","->",1714],["T_STRING","getStoreId",1714],"(",")",";",["T_WHITESPACE","\n        ",1714],"}",["T_WHITESPACE","\n        ",1715],["T_IF","if",1716],["T_WHITESPACE"," ",1716],"(",["T_ISSET","isset",1716],"(",["T_WHITESPACE","\n            ",1716],["T_VARIABLE","$this",1717],["T_OBJECT_OPERATOR","->",1717],["T_STRING","_productLimitationFilters",1717],"[",["T_CONSTANT_ENCAPSED_STRING","'store_id'",1717],"]",["T_WHITESPACE","\n        ",1717],")",["T_WHITESPACE"," ",1718],["T_BOOLEAN_AND","&&",1718],["T_WHITESPACE"," ",1718],["T_ISSET","isset",1718],"(",["T_WHITESPACE","\n            ",1718],["T_VARIABLE","$this",1719],["T_OBJECT_OPERATOR","->",1719],["T_STRING","_productLimitationFilters",1719],"[",["T_CONSTANT_ENCAPSED_STRING","'visibility'",1719],"]",["T_WHITESPACE","\n        ",1719],")",["T_WHITESPACE"," ",1720],["T_BOOLEAN_AND","&&",1720],["T_WHITESPACE"," ",1720],"!",["T_ISSET","isset",1720],"(",["T_WHITESPACE","\n            ",1720],["T_VARIABLE","$this",1721],["T_OBJECT_OPERATOR","->",1721],["T_STRING","_productLimitationFilters",1721],"[",["T_CONSTANT_ENCAPSED_STRING","'category_id'",1721],"]",["T_WHITESPACE","\n        ",1721],")",["T_WHITESPACE","\n        ",1722],")",["T_WHITESPACE"," ",1723],"{",["T_WHITESPACE","\n            ",1723],["T_VARIABLE","$this",1724],["T_OBJECT_OPERATOR","->",1724],["T_STRING","_productLimitationFilters",1724],"[",["T_CONSTANT_ENCAPSED_STRING","'category_id'",1724],"]",["T_WHITESPACE"," ",1724],"=",["T_WHITESPACE"," ",1724],["T_VARIABLE","$this",1724],["T_OBJECT_OPERATOR","->",1724],["T_STRING","_storeManager",1724],["T_OBJECT_OPERATOR","->",1724],["T_STRING","getStore",1724],"(",["T_WHITESPACE","\n                ",1724],["T_VARIABLE","$this",1725],["T_OBJECT_OPERATOR","->",1725],["T_STRING","_productLimitationFilters",1725],"[",["T_CONSTANT_ENCAPSED_STRING","'store_id'",1725],"]",["T_WHITESPACE","\n            ",1725],")",["T_OBJECT_OPERATOR","->",1726],["T_STRING","getRootCategoryId",1726],"(",")",";",["T_WHITESPACE","\n        ",1726],"}",["T_WHITESPACE","\n\n        ",1727],["T_RETURN","return",1729],["T_WHITESPACE"," ",1729],["T_VARIABLE","$this",1729],";",["T_WHITESPACE","\n    ",1729],"}",["T_WHITESPACE","\n\n    ",1730],["T_DOC_COMMENT","\/**\n     * Join website product limitation\n     *\n     * @return $this\n     * @SuppressWarnings(PHPMD.CyclomaticComplexity)\n     *\/",1732],["T_WHITESPACE","\n    ",1737],["T_PROTECTED","protected",1738],["T_WHITESPACE"," ",1738],["T_FUNCTION","function",1738],["T_WHITESPACE"," ",1738],["T_STRING","_productLimitationJoinWebsite",1738],"(",")",["T_WHITESPACE","\n    ",1738],"{",["T_WHITESPACE","\n        ",1739],["T_VARIABLE","$joinWebsite",1740],["T_WHITESPACE"," ",1740],"=",["T_WHITESPACE"," ",1740],["T_STRING","false",1740],";",["T_WHITESPACE","\n        ",1740],["T_VARIABLE","$filters",1741],["T_WHITESPACE"," ",1741],"=",["T_WHITESPACE"," ",1741],["T_VARIABLE","$this",1741],["T_OBJECT_OPERATOR","->",1741],["T_STRING","_productLimitationFilters",1741],";",["T_WHITESPACE","\n        ",1741],["T_VARIABLE","$conditions",1742],["T_WHITESPACE"," ",1742],"=",["T_WHITESPACE"," ",1742],"[",["T_CONSTANT_ENCAPSED_STRING","'product_website.product_id = e.entity_id'",1742],"]",";",["T_WHITESPACE","\n\n        ",1742],["T_IF","if",1744],["T_WHITESPACE"," ",1744],"(",["T_ISSET","isset",1744],"(",["T_VARIABLE","$filters",1744],"[",["T_CONSTANT_ENCAPSED_STRING","'website_ids'",1744],"]",")",")",["T_WHITESPACE"," ",1744],"{",["T_WHITESPACE","\n            ",1744],["T_VARIABLE","$joinWebsite",1745],["T_WHITESPACE"," ",1745],"=",["T_WHITESPACE"," ",1745],["T_STRING","true",1745],";",["T_WHITESPACE","\n            ",1745],["T_IF","if",1746],["T_WHITESPACE"," ",1746],"(",["T_STRING","count",1746],"(",["T_VARIABLE","$filters",1746],"[",["T_CONSTANT_ENCAPSED_STRING","'website_ids'",1746],"]",")",["T_WHITESPACE"," ",1746],">",["T_WHITESPACE"," ",1746],["T_LNUMBER","1",1746],")",["T_WHITESPACE"," ",1746],"{",["T_WHITESPACE","\n                ",1746],["T_VARIABLE","$this",1747],["T_OBJECT_OPERATOR","->",1747],["T_STRING","getSelect",1747],"(",")",["T_OBJECT_OPERATOR","->",1747],["T_STRING","distinct",1747],"(",["T_STRING","true",1747],")",";",["T_WHITESPACE","\n            ",1747],"}",["T_WHITESPACE","\n            ",1748],["T_VARIABLE","$conditions",1749],"[","]",["T_WHITESPACE"," ",1749],"=",["T_WHITESPACE"," ",1749],["T_VARIABLE","$this",1749],["T_OBJECT_OPERATOR","->",1749],["T_STRING","getConnection",1749],"(",")",["T_OBJECT_OPERATOR","->",1749],["T_STRING","quoteInto",1749],"(",["T_WHITESPACE","\n                ",1749],["T_CONSTANT_ENCAPSED_STRING","'product_website.website_id IN(?)'",1750],",",["T_WHITESPACE","\n                ",1750],["T_VARIABLE","$filters",1751],"[",["T_CONSTANT_ENCAPSED_STRING","'website_ids'",1751],"]",["T_WHITESPACE","\n            ",1751],")",";",["T_WHITESPACE","\n        ",1752],"}",["T_WHITESPACE"," ",1753],["T_ELSEIF","elseif",1753],["T_WHITESPACE"," ",1753],"(",["T_ISSET","isset",1753],"(",["T_WHITESPACE","\n            ",1753],["T_VARIABLE","$filters",1754],"[",["T_CONSTANT_ENCAPSED_STRING","'store_id'",1754],"]",["T_WHITESPACE","\n        ",1754],")",["T_WHITESPACE"," ",1755],["T_BOOLEAN_AND","&&",1755],["T_WHITESPACE"," ",1755],"(","!",["T_ISSET","isset",1755],"(",["T_WHITESPACE","\n            ",1755],["T_VARIABLE","$filters",1756],"[",["T_CONSTANT_ENCAPSED_STRING","'visibility'",1756],"]",["T_WHITESPACE","\n        ",1756],")",["T_WHITESPACE"," ",1757],["T_BOOLEAN_AND","&&",1757],["T_WHITESPACE"," ",1757],"!",["T_ISSET","isset",1757],"(",["T_WHITESPACE","\n            ",1757],["T_VARIABLE","$filters",1758],"[",["T_CONSTANT_ENCAPSED_STRING","'category_id'",1758],"]",["T_WHITESPACE","\n        ",1758],")",")",["T_WHITESPACE"," ",1759],["T_BOOLEAN_AND","&&",1759],["T_WHITESPACE"," ",1759],"!",["T_VARIABLE","$this",1759],["T_OBJECT_OPERATOR","->",1759],["T_STRING","isEnabledFlat",1759],"(",")",["T_WHITESPACE","\n        ",1759],")",["T_WHITESPACE"," ",1760],"{",["T_WHITESPACE","\n            ",1760],["T_VARIABLE","$joinWebsite",1761],["T_WHITESPACE"," ",1761],"=",["T_WHITESPACE"," ",1761],["T_STRING","true",1761],";",["T_WHITESPACE","\n            ",1761],["T_VARIABLE","$websiteId",1762],["T_WHITESPACE"," ",1762],"=",["T_WHITESPACE"," ",1762],["T_VARIABLE","$this",1762],["T_OBJECT_OPERATOR","->",1762],["T_STRING","_storeManager",1762],["T_OBJECT_OPERATOR","->",1762],["T_STRING","getStore",1762],"(",["T_VARIABLE","$filters",1762],"[",["T_CONSTANT_ENCAPSED_STRING","'store_id'",1762],"]",")",["T_OBJECT_OPERATOR","->",1762],["T_STRING","getWebsiteId",1762],"(",")",";",["T_WHITESPACE","\n            ",1762],["T_VARIABLE","$conditions",1763],"[","]",["T_WHITESPACE"," ",1763],"=",["T_WHITESPACE"," ",1763],["T_VARIABLE","$this",1763],["T_OBJECT_OPERATOR","->",1763],["T_STRING","getConnection",1763],"(",")",["T_OBJECT_OPERATOR","->",1763],["T_STRING","quoteInto",1763],"(",["T_CONSTANT_ENCAPSED_STRING","'product_website.website_id = ?'",1763],",",["T_WHITESPACE"," ",1763],["T_VARIABLE","$websiteId",1763],")",";",["T_WHITESPACE","\n        ",1763],"}",["T_WHITESPACE","\n\n        ",1764],["T_VARIABLE","$fromPart",1766],["T_WHITESPACE"," ",1766],"=",["T_WHITESPACE"," ",1766],["T_VARIABLE","$this",1766],["T_OBJECT_OPERATOR","->",1766],["T_STRING","getSelect",1766],"(",")",["T_OBJECT_OPERATOR","->",1766],["T_STRING","getPart",1766],"(",["T_NS_SEPARATOR","\\",1766],["T_STRING","Magento",1766],["T_NS_SEPARATOR","\\",1766],["T_STRING","Framework",1766],["T_NS_SEPARATOR","\\",1766],["T_STRING","DB",1766],["T_NS_SEPARATOR","\\",1766],["T_STRING","Select",1766],["T_DOUBLE_COLON","::",1766],["T_STRING","FROM",1766],")",";",["T_WHITESPACE","\n        ",1766],["T_IF","if",1767],["T_WHITESPACE"," ",1767],"(",["T_ISSET","isset",1767],"(",["T_VARIABLE","$fromPart",1767],"[",["T_CONSTANT_ENCAPSED_STRING","'product_website'",1767],"]",")",")",["T_WHITESPACE"," ",1767],"{",["T_WHITESPACE","\n            ",1767],["T_IF","if",1768],["T_WHITESPACE"," ",1768],"(","!",["T_VARIABLE","$joinWebsite",1768],")",["T_WHITESPACE"," ",1768],"{",["T_WHITESPACE","\n                ",1768],["T_UNSET","unset",1769],"(",["T_VARIABLE","$fromPart",1769],"[",["T_CONSTANT_ENCAPSED_STRING","'product_website'",1769],"]",")",";",["T_WHITESPACE","\n            ",1769],"}",["T_WHITESPACE"," ",1770],["T_ELSE","else",1770],["T_WHITESPACE"," ",1770],"{",["T_WHITESPACE","\n                ",1770],["T_VARIABLE","$fromPart",1771],"[",["T_CONSTANT_ENCAPSED_STRING","'product_website'",1771],"]","[",["T_CONSTANT_ENCAPSED_STRING","'joinCondition'",1771],"]",["T_WHITESPACE"," ",1771],"=",["T_WHITESPACE"," ",1771],["T_STRING","join",1771],"(",["T_CONSTANT_ENCAPSED_STRING","' AND '",1771],",",["T_WHITESPACE"," ",1771],["T_VARIABLE","$conditions",1771],")",";",["T_WHITESPACE","\n            ",1771],"}",["T_WHITESPACE","\n            ",1772],["T_VARIABLE","$this",1773],["T_OBJECT_OPERATOR","->",1773],["T_STRING","getSelect",1773],"(",")",["T_OBJECT_OPERATOR","->",1773],["T_STRING","setPart",1773],"(",["T_NS_SEPARATOR","\\",1773],["T_STRING","Magento",1773],["T_NS_SEPARATOR","\\",1773],["T_STRING","Framework",1773],["T_NS_SEPARATOR","\\",1773],["T_STRING","DB",1773],["T_NS_SEPARATOR","\\",1773],["T_STRING","Select",1773],["T_DOUBLE_COLON","::",1773],["T_STRING","FROM",1773],",",["T_WHITESPACE"," ",1773],["T_VARIABLE","$fromPart",1773],")",";",["T_WHITESPACE","\n        ",1773],"}",["T_WHITESPACE"," ",1774],["T_ELSEIF","elseif",1774],["T_WHITESPACE"," ",1774],"(",["T_VARIABLE","$joinWebsite",1774],")",["T_WHITESPACE"," ",1774],"{",["T_WHITESPACE","\n            ",1774],["T_VARIABLE","$this",1775],["T_OBJECT_OPERATOR","->",1775],["T_STRING","getSelect",1775],"(",")",["T_OBJECT_OPERATOR","->",1775],["T_STRING","join",1775],"(",["T_WHITESPACE","\n                ",1775],"[",["T_CONSTANT_ENCAPSED_STRING","'product_website'",1776],["T_WHITESPACE"," ",1776],["T_DOUBLE_ARROW","=>",1776],["T_WHITESPACE"," ",1776],["T_VARIABLE","$this",1776],["T_OBJECT_OPERATOR","->",1776],["T_STRING","getTable",1776],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog_product_website'",1776],")","]",",",["T_WHITESPACE","\n                ",1776],["T_STRING","join",1777],"(",["T_CONSTANT_ENCAPSED_STRING","' AND '",1777],",",["T_WHITESPACE"," ",1777],["T_VARIABLE","$conditions",1777],")",",",["T_WHITESPACE","\n                ",1777],"[","]",["T_WHITESPACE","\n            ",1778],")",";",["T_WHITESPACE","\n        ",1779],"}",["T_WHITESPACE","\n\n        ",1780],["T_RETURN","return",1782],["T_WHITESPACE"," ",1782],["T_VARIABLE","$this",1782],";",["T_WHITESPACE","\n    ",1782],"}",["T_WHITESPACE","\n\n    ",1783],["T_DOC_COMMENT","\/**\n     * Join additional (alternative) store visibility filter\n     *\n     * @return $this\n     * @SuppressWarnings(PHPMD.CyclomaticComplexity)\n     * @SuppressWarnings(PHPMD.NPathComplexity)\n     *\/",1785],["T_WHITESPACE","\n    ",1791],["T_PROTECTED","protected",1792],["T_WHITESPACE"," ",1792],["T_FUNCTION","function",1792],["T_WHITESPACE"," ",1792],["T_STRING","_productLimitationJoinStore",1792],"(",")",["T_WHITESPACE","\n    ",1792],"{",["T_WHITESPACE","\n        ",1793],["T_VARIABLE","$filters",1794],["T_WHITESPACE"," ",1794],"=",["T_WHITESPACE"," ",1794],["T_VARIABLE","$this",1794],["T_OBJECT_OPERATOR","->",1794],["T_STRING","_productLimitationFilters",1794],";",["T_WHITESPACE","\n        ",1794],["T_IF","if",1795],["T_WHITESPACE"," ",1795],"(","!",["T_ISSET","isset",1795],"(",["T_VARIABLE","$filters",1795],"[",["T_CONSTANT_ENCAPSED_STRING","'store_table'",1795],"]",")",")",["T_WHITESPACE"," ",1795],"{",["T_WHITESPACE","\n            ",1795],["T_RETURN","return",1796],["T_WHITESPACE"," ",1796],["T_VARIABLE","$this",1796],";",["T_WHITESPACE","\n        ",1796],"}",["T_WHITESPACE","\n\n        ",1797],["T_VARIABLE","$hasColumn",1799],["T_WHITESPACE"," ",1799],"=",["T_WHITESPACE"," ",1799],["T_STRING","false",1799],";",["T_WHITESPACE","\n        ",1799],["T_FOREACH","foreach",1800],["T_WHITESPACE"," ",1800],"(",["T_VARIABLE","$this",1800],["T_OBJECT_OPERATOR","->",1800],["T_STRING","getSelect",1800],"(",")",["T_OBJECT_OPERATOR","->",1800],["T_STRING","getPart",1800],"(",["T_NS_SEPARATOR","\\",1800],["T_STRING","Magento",1800],["T_NS_SEPARATOR","\\",1800],["T_STRING","Framework",1800],["T_NS_SEPARATOR","\\",1800],["T_STRING","DB",1800],["T_NS_SEPARATOR","\\",1800],["T_STRING","Select",1800],["T_DOUBLE_COLON","::",1800],["T_STRING","COLUMNS",1800],")",["T_WHITESPACE"," ",1800],["T_AS","as",1800],["T_WHITESPACE"," ",1800],["T_VARIABLE","$columnEntry",1800],")",["T_WHITESPACE"," ",1800],"{",["T_WHITESPACE","\n            ",1800],["T_LIST","list",1801],"(",",",["T_WHITESPACE"," ",1801],",",["T_WHITESPACE"," ",1801],["T_VARIABLE","$alias",1801],")",["T_WHITESPACE"," ",1801],"=",["T_WHITESPACE"," ",1801],["T_VARIABLE","$columnEntry",1801],";",["T_WHITESPACE","\n            ",1801],["T_IF","if",1802],["T_WHITESPACE"," ",1802],"(",["T_VARIABLE","$alias",1802],["T_WHITESPACE"," ",1802],["T_IS_EQUAL","==",1802],["T_WHITESPACE"," ",1802],["T_CONSTANT_ENCAPSED_STRING","'visibility'",1802],")",["T_WHITESPACE"," ",1802],"{",["T_WHITESPACE","\n                ",1802],["T_VARIABLE","$hasColumn",1803],["T_WHITESPACE"," ",1803],"=",["T_WHITESPACE"," ",1803],["T_STRING","true",1803],";",["T_WHITESPACE","\n            ",1803],"}",["T_WHITESPACE","\n        ",1804],"}",["T_WHITESPACE","\n        ",1805],["T_IF","if",1806],["T_WHITESPACE"," ",1806],"(","!",["T_VARIABLE","$hasColumn",1806],")",["T_WHITESPACE"," ",1806],"{",["T_WHITESPACE","\n            ",1806],["T_VARIABLE","$this",1807],["T_OBJECT_OPERATOR","->",1807],["T_STRING","getSelect",1807],"(",")",["T_OBJECT_OPERATOR","->",1807],["T_STRING","columns",1807],"(",["T_CONSTANT_ENCAPSED_STRING","'visibility'",1807],",",["T_WHITESPACE"," ",1807],["T_CONSTANT_ENCAPSED_STRING","'cat_index'",1807],")",";",["T_WHITESPACE","\n        ",1807],"}",["T_WHITESPACE","\n\n        ",1808],["T_VARIABLE","$fromPart",1810],["T_WHITESPACE"," ",1810],"=",["T_WHITESPACE"," ",1810],["T_VARIABLE","$this",1810],["T_OBJECT_OPERATOR","->",1810],["T_STRING","getSelect",1810],"(",")",["T_OBJECT_OPERATOR","->",1810],["T_STRING","getPart",1810],"(",["T_NS_SEPARATOR","\\",1810],["T_STRING","Magento",1810],["T_NS_SEPARATOR","\\",1810],["T_STRING","Framework",1810],["T_NS_SEPARATOR","\\",1810],["T_STRING","DB",1810],["T_NS_SEPARATOR","\\",1810],["T_STRING","Select",1810],["T_DOUBLE_COLON","::",1810],["T_STRING","FROM",1810],")",";",["T_WHITESPACE","\n        ",1810],["T_IF","if",1811],["T_WHITESPACE"," ",1811],"(","!",["T_ISSET","isset",1811],"(",["T_VARIABLE","$fromPart",1811],"[",["T_CONSTANT_ENCAPSED_STRING","'store_index'",1811],"]",")",")",["T_WHITESPACE"," ",1811],"{",["T_WHITESPACE","\n            ",1811],["T_VARIABLE","$this",1812],["T_OBJECT_OPERATOR","->",1812],["T_STRING","getSelect",1812],"(",")",["T_OBJECT_OPERATOR","->",1812],["T_STRING","joinLeft",1812],"(",["T_WHITESPACE","\n                ",1812],"[",["T_CONSTANT_ENCAPSED_STRING","'store_index'",1813],["T_WHITESPACE"," ",1813],["T_DOUBLE_ARROW","=>",1813],["T_WHITESPACE"," ",1813],["T_VARIABLE","$this",1813],["T_OBJECT_OPERATOR","->",1813],["T_STRING","getTable",1813],"(",["T_CONSTANT_ENCAPSED_STRING","'store'",1813],")","]",",",["T_WHITESPACE","\n                ",1813],["T_CONSTANT_ENCAPSED_STRING","'store_index.store_id = '",1814],["T_WHITESPACE"," ",1814],".",["T_WHITESPACE"," ",1814],["T_VARIABLE","$filters",1814],"[",["T_CONSTANT_ENCAPSED_STRING","'store_table'",1814],"]",["T_WHITESPACE"," ",1814],".",["T_WHITESPACE"," ",1814],["T_CONSTANT_ENCAPSED_STRING","'.store_id'",1814],",",["T_WHITESPACE","\n                ",1814],"[","]",["T_WHITESPACE","\n            ",1815],")",";",["T_WHITESPACE","\n        ",1816],"}",["T_WHITESPACE","\n        ",1817],["T_IF","if",1818],["T_WHITESPACE"," ",1818],"(","!",["T_ISSET","isset",1818],"(",["T_VARIABLE","$fromPart",1818],"[",["T_CONSTANT_ENCAPSED_STRING","'store_group_index'",1818],"]",")",")",["T_WHITESPACE"," ",1818],"{",["T_WHITESPACE","\n            ",1818],["T_VARIABLE","$this",1819],["T_OBJECT_OPERATOR","->",1819],["T_STRING","getSelect",1819],"(",")",["T_OBJECT_OPERATOR","->",1819],["T_STRING","joinLeft",1819],"(",["T_WHITESPACE","\n                ",1819],"[",["T_CONSTANT_ENCAPSED_STRING","'store_group_index'",1820],["T_WHITESPACE"," ",1820],["T_DOUBLE_ARROW","=>",1820],["T_WHITESPACE"," ",1820],["T_VARIABLE","$this",1820],["T_OBJECT_OPERATOR","->",1820],["T_STRING","getTable",1820],"(",["T_CONSTANT_ENCAPSED_STRING","'store_group'",1820],")","]",",",["T_WHITESPACE","\n                ",1820],["T_CONSTANT_ENCAPSED_STRING","'store_index.group_id = store_group_index.group_id'",1821],",",["T_WHITESPACE","\n                ",1821],"[","]",["T_WHITESPACE","\n            ",1822],")",";",["T_WHITESPACE","\n        ",1823],"}",["T_WHITESPACE","\n        ",1824],["T_IF","if",1825],["T_WHITESPACE"," ",1825],"(","!",["T_ISSET","isset",1825],"(",["T_VARIABLE","$fromPart",1825],"[",["T_CONSTANT_ENCAPSED_STRING","'store_cat_index'",1825],"]",")",")",["T_WHITESPACE"," ",1825],"{",["T_WHITESPACE","\n            ",1825],["T_VARIABLE","$this",1826],["T_OBJECT_OPERATOR","->",1826],["T_STRING","getSelect",1826],"(",")",["T_OBJECT_OPERATOR","->",1826],["T_STRING","joinLeft",1826],"(",["T_WHITESPACE","\n                ",1826],"[",["T_CONSTANT_ENCAPSED_STRING","'store_cat_index'",1827],["T_WHITESPACE"," ",1827],["T_DOUBLE_ARROW","=>",1827],["T_WHITESPACE"," ",1827],["T_VARIABLE","$this",1827],["T_OBJECT_OPERATOR","->",1827],["T_STRING","getTable",1827],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog_category_product_index'",1827],")","]",",",["T_WHITESPACE","\n                ",1827],["T_STRING","join",1828],"(",["T_WHITESPACE","\n                    ",1828],["T_CONSTANT_ENCAPSED_STRING","' AND '",1829],",",["T_WHITESPACE","\n                    ",1829],"[",["T_WHITESPACE","\n                        ",1830],["T_CONSTANT_ENCAPSED_STRING","'store_cat_index.product_id = e.entity_id'",1831],",",["T_WHITESPACE","\n                        ",1831],["T_CONSTANT_ENCAPSED_STRING","'store_cat_index.store_id = '",1832],["T_WHITESPACE"," ",1832],".",["T_WHITESPACE"," ",1832],["T_VARIABLE","$filters",1832],"[",["T_CONSTANT_ENCAPSED_STRING","'store_table'",1832],"]",["T_WHITESPACE"," ",1832],".",["T_WHITESPACE"," ",1832],["T_CONSTANT_ENCAPSED_STRING","'.store_id'",1832],",",["T_WHITESPACE","\n                        ",1832],["T_CONSTANT_ENCAPSED_STRING","'store_cat_index.category_id=store_group_index.root_category_id'",1833],["T_WHITESPACE","\n                    ",1833],"]",["T_WHITESPACE","\n                ",1834],")",",",["T_WHITESPACE","\n                ",1835],"[",["T_CONSTANT_ENCAPSED_STRING","'store_visibility'",1836],["T_WHITESPACE"," ",1836],["T_DOUBLE_ARROW","=>",1836],["T_WHITESPACE"," ",1836],["T_CONSTANT_ENCAPSED_STRING","'visibility'",1836],"]",["T_WHITESPACE","\n            ",1836],")",";",["T_WHITESPACE","\n        ",1837],"}",["T_WHITESPACE","\n        ",1838],["T_COMMENT","\/\/ Avoid column duplication problems\n",1839],["T_WHITESPACE","        ",1840],["T_VARIABLE","$this",1840],["T_OBJECT_OPERATOR","->",1840],["T_STRING","_resourceHelper",1840],["T_OBJECT_OPERATOR","->",1840],["T_STRING","prepareColumnsList",1840],"(",["T_VARIABLE","$this",1840],["T_OBJECT_OPERATOR","->",1840],["T_STRING","getSelect",1840],"(",")",")",";",["T_WHITESPACE","\n\n        ",1840],["T_VARIABLE","$whereCond",1842],["T_WHITESPACE"," ",1842],"=",["T_WHITESPACE"," ",1842],["T_STRING","join",1842],"(",["T_WHITESPACE","\n            ",1842],["T_CONSTANT_ENCAPSED_STRING","' OR '",1843],",",["T_WHITESPACE","\n            ",1843],"[",["T_WHITESPACE","\n                ",1844],["T_VARIABLE","$this",1845],["T_OBJECT_OPERATOR","->",1845],["T_STRING","getConnection",1845],"(",")",["T_OBJECT_OPERATOR","->",1845],["T_STRING","quoteInto",1845],"(",["T_CONSTANT_ENCAPSED_STRING","'cat_index.visibility IN(?)'",1845],",",["T_WHITESPACE"," ",1845],["T_VARIABLE","$filters",1845],"[",["T_CONSTANT_ENCAPSED_STRING","'visibility'",1845],"]",")",",",["T_WHITESPACE","\n                ",1845],["T_VARIABLE","$this",1846],["T_OBJECT_OPERATOR","->",1846],["T_STRING","getConnection",1846],"(",")",["T_OBJECT_OPERATOR","->",1846],["T_STRING","quoteInto",1846],"(",["T_CONSTANT_ENCAPSED_STRING","'store_cat_index.visibility IN(?)'",1846],",",["T_WHITESPACE"," ",1846],["T_VARIABLE","$filters",1846],"[",["T_CONSTANT_ENCAPSED_STRING","'visibility'",1846],"]",")",["T_WHITESPACE","\n            ",1846],"]",["T_WHITESPACE","\n        ",1847],")",";",["T_WHITESPACE","\n\n        ",1848],["T_VARIABLE","$wherePart",1850],["T_WHITESPACE"," ",1850],"=",["T_WHITESPACE"," ",1850],["T_VARIABLE","$this",1850],["T_OBJECT_OPERATOR","->",1850],["T_STRING","getSelect",1850],"(",")",["T_OBJECT_OPERATOR","->",1850],["T_STRING","getPart",1850],"(",["T_NS_SEPARATOR","\\",1850],["T_STRING","Magento",1850],["T_NS_SEPARATOR","\\",1850],["T_STRING","Framework",1850],["T_NS_SEPARATOR","\\",1850],["T_STRING","DB",1850],["T_NS_SEPARATOR","\\",1850],["T_STRING","Select",1850],["T_DOUBLE_COLON","::",1850],["T_STRING","WHERE",1850],")",";",["T_WHITESPACE","\n        ",1850],["T_VARIABLE","$hasCond",1851],["T_WHITESPACE"," ",1851],"=",["T_WHITESPACE"," ",1851],["T_STRING","false",1851],";",["T_WHITESPACE","\n        ",1851],["T_FOREACH","foreach",1852],["T_WHITESPACE"," ",1852],"(",["T_VARIABLE","$wherePart",1852],["T_WHITESPACE"," ",1852],["T_AS","as",1852],["T_WHITESPACE"," ",1852],["T_VARIABLE","$cond",1852],")",["T_WHITESPACE"," ",1852],"{",["T_WHITESPACE","\n            ",1852],["T_IF","if",1853],["T_WHITESPACE"," ",1853],"(",["T_VARIABLE","$cond",1853],["T_WHITESPACE"," ",1853],["T_IS_EQUAL","==",1853],["T_WHITESPACE"," ",1853],["T_CONSTANT_ENCAPSED_STRING","'('",1853],["T_WHITESPACE"," ",1853],".",["T_WHITESPACE"," ",1853],["T_VARIABLE","$whereCond",1853],["T_WHITESPACE"," ",1853],".",["T_WHITESPACE"," ",1853],["T_CONSTANT_ENCAPSED_STRING","')'",1853],")",["T_WHITESPACE"," ",1853],"{",["T_WHITESPACE","\n                ",1853],["T_VARIABLE","$hasCond",1854],["T_WHITESPACE"," ",1854],"=",["T_WHITESPACE"," ",1854],["T_STRING","true",1854],";",["T_WHITESPACE","\n            ",1854],"}",["T_WHITESPACE","\n        ",1855],"}",["T_WHITESPACE","\n\n        ",1856],["T_IF","if",1858],["T_WHITESPACE"," ",1858],"(","!",["T_VARIABLE","$hasCond",1858],")",["T_WHITESPACE"," ",1858],"{",["T_WHITESPACE","\n            ",1858],["T_VARIABLE","$this",1859],["T_OBJECT_OPERATOR","->",1859],["T_STRING","getSelect",1859],"(",")",["T_OBJECT_OPERATOR","->",1859],["T_STRING","where",1859],"(",["T_VARIABLE","$whereCond",1859],")",";",["T_WHITESPACE","\n        ",1859],"}",["T_WHITESPACE","\n\n        ",1860],["T_RETURN","return",1862],["T_WHITESPACE"," ",1862],["T_VARIABLE","$this",1862],";",["T_WHITESPACE","\n    ",1862],"}",["T_WHITESPACE","\n\n    ",1863],["T_DOC_COMMENT","\/**\n     * Join Product Price Table\n     *\n     * @return $this\n     *\/",1865],["T_WHITESPACE","\n    ",1869],["T_PROTECTED","protected",1870],["T_WHITESPACE"," ",1870],["T_FUNCTION","function",1870],["T_WHITESPACE"," ",1870],["T_STRING","_productLimitationJoinPrice",1870],"(",")",["T_WHITESPACE","\n    ",1870],"{",["T_WHITESPACE","\n        ",1871],["T_RETURN","return",1872],["T_WHITESPACE"," ",1872],["T_VARIABLE","$this",1872],["T_OBJECT_OPERATOR","->",1872],["T_STRING","_productLimitationPrice",1872],"(",")",";",["T_WHITESPACE","\n    ",1872],"}",["T_WHITESPACE","\n\n    ",1873],["T_DOC_COMMENT","\/**\n     * Join Product Price Table with left-join possibility\n     *\n     * @see \\Magento\\Catalog\\Model\\ResourceModel\\Product\\Collection::_productLimitationJoinPrice()\n     * @param bool $joinLeft\n     * @return $this\n     *\/",1875],["T_WHITESPACE","\n    ",1881],["T_PROTECTED","protected",1882],["T_WHITESPACE"," ",1882],["T_FUNCTION","function",1882],["T_WHITESPACE"," ",1882],["T_STRING","_productLimitationPrice",1882],"(",["T_VARIABLE","$joinLeft",1882],["T_WHITESPACE"," ",1882],"=",["T_WHITESPACE"," ",1882],["T_STRING","false",1882],")",["T_WHITESPACE","\n    ",1882],"{",["T_WHITESPACE","\n        ",1883],["T_VARIABLE","$filters",1884],["T_WHITESPACE"," ",1884],"=",["T_WHITESPACE"," ",1884],["T_VARIABLE","$this",1884],["T_OBJECT_OPERATOR","->",1884],["T_STRING","_productLimitationFilters",1884],";",["T_WHITESPACE","\n        ",1884],["T_IF","if",1885],["T_WHITESPACE"," ",1885],"(","!",["T_VARIABLE","$filters",1885],["T_OBJECT_OPERATOR","->",1885],["T_STRING","isUsingPriceIndex",1885],"(",")",")",["T_WHITESPACE"," ",1885],"{",["T_WHITESPACE","\n            ",1885],["T_RETURN","return",1886],["T_WHITESPACE"," ",1886],["T_VARIABLE","$this",1886],";",["T_WHITESPACE","\n        ",1886],"}",["T_WHITESPACE","\n\n        ",1887],["T_COMMENT","\/\/ Preventing overriding price loaded from EAV because we want to use the one from index\n",1889],["T_WHITESPACE","        ",1890],["T_VARIABLE","$this",1890],["T_OBJECT_OPERATOR","->",1890],["T_STRING","removeAttributeToSelect",1890],"(",["T_CONSTANT_ENCAPSED_STRING","'price'",1890],")",";",["T_WHITESPACE","\n\n        ",1890],["T_VARIABLE","$connection",1892],["T_WHITESPACE"," ",1892],"=",["T_WHITESPACE"," ",1892],["T_VARIABLE","$this",1892],["T_OBJECT_OPERATOR","->",1892],["T_STRING","getConnection",1892],"(",")",";",["T_WHITESPACE","\n        ",1892],["T_VARIABLE","$select",1893],["T_WHITESPACE"," ",1893],"=",["T_WHITESPACE"," ",1893],["T_VARIABLE","$this",1893],["T_OBJECT_OPERATOR","->",1893],["T_STRING","getSelect",1893],"(",")",";",["T_WHITESPACE","\n        ",1893],["T_VARIABLE","$joinCond",1894],["T_WHITESPACE"," ",1894],"=",["T_WHITESPACE"," ",1894],["T_STRING","join",1894],"(",["T_WHITESPACE","\n            ",1894],["T_CONSTANT_ENCAPSED_STRING","' AND '",1895],",",["T_WHITESPACE","\n            ",1895],"[",["T_WHITESPACE","\n                ",1896],["T_CONSTANT_ENCAPSED_STRING","'price_index.entity_id = e.entity_id'",1897],",",["T_WHITESPACE","\n                ",1897],["T_VARIABLE","$connection",1898],["T_OBJECT_OPERATOR","->",1898],["T_STRING","quoteInto",1898],"(",["T_CONSTANT_ENCAPSED_STRING","'price_index.website_id = ?'",1898],",",["T_WHITESPACE"," ",1898],["T_VARIABLE","$filters",1898],"[",["T_CONSTANT_ENCAPSED_STRING","'website_id'",1898],"]",")",",",["T_WHITESPACE","\n                ",1898],["T_VARIABLE","$connection",1899],["T_OBJECT_OPERATOR","->",1899],["T_STRING","quoteInto",1899],"(",["T_CONSTANT_ENCAPSED_STRING","'price_index.customer_group_id = ?'",1899],",",["T_WHITESPACE"," ",1899],["T_VARIABLE","$filters",1899],"[",["T_CONSTANT_ENCAPSED_STRING","'customer_group_id'",1899],"]",")",["T_WHITESPACE","\n            ",1899],"]",["T_WHITESPACE","\n        ",1900],")",";",["T_WHITESPACE","\n\n        ",1901],["T_VARIABLE","$fromPart",1903],["T_WHITESPACE"," ",1903],"=",["T_WHITESPACE"," ",1903],["T_VARIABLE","$select",1903],["T_OBJECT_OPERATOR","->",1903],["T_STRING","getPart",1903],"(",["T_NS_SEPARATOR","\\",1903],["T_STRING","Magento",1903],["T_NS_SEPARATOR","\\",1903],["T_STRING","Framework",1903],["T_NS_SEPARATOR","\\",1903],["T_STRING","DB",1903],["T_NS_SEPARATOR","\\",1903],["T_STRING","Select",1903],["T_DOUBLE_COLON","::",1903],["T_STRING","FROM",1903],")",";",["T_WHITESPACE","\n        ",1903],["T_IF","if",1904],["T_WHITESPACE"," ",1904],"(","!",["T_ISSET","isset",1904],"(",["T_VARIABLE","$fromPart",1904],"[",["T_CONSTANT_ENCAPSED_STRING","'price_index'",1904],"]",")",")",["T_WHITESPACE"," ",1904],"{",["T_WHITESPACE","\n            ",1904],["T_VARIABLE","$least",1905],["T_WHITESPACE"," ",1905],"=",["T_WHITESPACE"," ",1905],["T_VARIABLE","$connection",1905],["T_OBJECT_OPERATOR","->",1905],["T_STRING","getLeastSql",1905],"(","[",["T_CONSTANT_ENCAPSED_STRING","'price_index.min_price'",1905],",",["T_WHITESPACE"," ",1905],["T_CONSTANT_ENCAPSED_STRING","'price_index.tier_price'",1905],"]",")",";",["T_WHITESPACE","\n            ",1905],["T_VARIABLE","$minimalExpr",1906],["T_WHITESPACE"," ",1906],"=",["T_WHITESPACE"," ",1906],["T_VARIABLE","$connection",1906],["T_OBJECT_OPERATOR","->",1906],["T_STRING","getCheckSql",1906],"(",["T_WHITESPACE","\n                ",1906],["T_CONSTANT_ENCAPSED_STRING","'price_index.tier_price IS NOT NULL'",1907],",",["T_WHITESPACE","\n                ",1907],["T_VARIABLE","$least",1908],",",["T_WHITESPACE","\n                ",1908],["T_CONSTANT_ENCAPSED_STRING","'price_index.min_price'",1909],["T_WHITESPACE","\n            ",1909],")",";",["T_WHITESPACE","\n            ",1910],["T_VARIABLE","$colls",1911],["T_WHITESPACE"," ",1911],"=",["T_WHITESPACE"," ",1911],"[",["T_WHITESPACE","\n                ",1911],["T_CONSTANT_ENCAPSED_STRING","'price'",1912],",",["T_WHITESPACE","\n                ",1912],["T_CONSTANT_ENCAPSED_STRING","'tax_class_id'",1913],",",["T_WHITESPACE","\n                ",1913],["T_CONSTANT_ENCAPSED_STRING","'final_price'",1914],",",["T_WHITESPACE","\n                ",1914],["T_CONSTANT_ENCAPSED_STRING","'minimal_price'",1915],["T_WHITESPACE"," ",1915],["T_DOUBLE_ARROW","=>",1915],["T_WHITESPACE"," ",1915],["T_VARIABLE","$minimalExpr",1915],",",["T_WHITESPACE","\n                ",1915],["T_CONSTANT_ENCAPSED_STRING","'min_price'",1916],",",["T_WHITESPACE","\n                ",1916],["T_CONSTANT_ENCAPSED_STRING","'max_price'",1917],",",["T_WHITESPACE","\n                ",1917],["T_CONSTANT_ENCAPSED_STRING","'tier_price'",1918],",",["T_WHITESPACE","\n            ",1918],"]",";",["T_WHITESPACE","\n            ",1919],["T_VARIABLE","$tableName",1920],["T_WHITESPACE"," ",1920],"=",["T_WHITESPACE"," ",1920],"[",["T_CONSTANT_ENCAPSED_STRING","'price_index'",1920],["T_WHITESPACE"," ",1920],["T_DOUBLE_ARROW","=>",1920],["T_WHITESPACE"," ",1920],["T_VARIABLE","$this",1920],["T_OBJECT_OPERATOR","->",1920],["T_STRING","getTable",1920],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog_product_index_price'",1920],")","]",";",["T_WHITESPACE","\n            ",1920],["T_IF","if",1921],["T_WHITESPACE"," ",1921],"(",["T_VARIABLE","$joinLeft",1921],")",["T_WHITESPACE"," ",1921],"{",["T_WHITESPACE","\n                ",1921],["T_VARIABLE","$select",1922],["T_OBJECT_OPERATOR","->",1922],["T_STRING","joinLeft",1922],"(",["T_VARIABLE","$tableName",1922],",",["T_WHITESPACE"," ",1922],["T_VARIABLE","$joinCond",1922],",",["T_WHITESPACE"," ",1922],["T_VARIABLE","$colls",1922],")",";",["T_WHITESPACE","\n            ",1922],"}",["T_WHITESPACE"," ",1923],["T_ELSE","else",1923],["T_WHITESPACE"," ",1923],"{",["T_WHITESPACE","\n                ",1923],["T_VARIABLE","$select",1924],["T_OBJECT_OPERATOR","->",1924],["T_STRING","join",1924],"(",["T_VARIABLE","$tableName",1924],",",["T_WHITESPACE"," ",1924],["T_VARIABLE","$joinCond",1924],",",["T_WHITESPACE"," ",1924],["T_VARIABLE","$colls",1924],")",";",["T_WHITESPACE","\n            ",1924],"}",["T_WHITESPACE","\n            ",1925],["T_COMMENT","\/\/ Set additional field filters\n",1926],["T_WHITESPACE","            ",1927],["T_FOREACH","foreach",1927],["T_WHITESPACE"," ",1927],"(",["T_VARIABLE","$this",1927],["T_OBJECT_OPERATOR","->",1927],["T_STRING","_priceDataFieldFilters",1927],["T_WHITESPACE"," ",1927],["T_AS","as",1927],["T_WHITESPACE"," ",1927],["T_VARIABLE","$filterData",1927],")",["T_WHITESPACE"," ",1927],"{",["T_WHITESPACE","\n                ",1927],["T_VARIABLE","$select",1928],["T_OBJECT_OPERATOR","->",1928],["T_STRING","where",1928],"(",["T_STRING","call_user_func_array",1928],"(",["T_CONSTANT_ENCAPSED_STRING","'sprintf'",1928],",",["T_WHITESPACE"," ",1928],["T_VARIABLE","$filterData",1928],")",")",";",["T_WHITESPACE","\n            ",1928],"}",["T_WHITESPACE","\n        ",1929],"}",["T_WHITESPACE"," ",1930],["T_ELSE","else",1930],["T_WHITESPACE"," ",1930],"{",["T_WHITESPACE","\n            ",1930],["T_VARIABLE","$fromPart",1931],"[",["T_CONSTANT_ENCAPSED_STRING","'price_index'",1931],"]","[",["T_CONSTANT_ENCAPSED_STRING","'joinCondition'",1931],"]",["T_WHITESPACE"," ",1931],"=",["T_WHITESPACE"," ",1931],["T_VARIABLE","$joinCond",1931],";",["T_WHITESPACE","\n            ",1931],["T_VARIABLE","$select",1932],["T_OBJECT_OPERATOR","->",1932],["T_STRING","setPart",1932],"(",["T_NS_SEPARATOR","\\",1932],["T_STRING","Magento",1932],["T_NS_SEPARATOR","\\",1932],["T_STRING","Framework",1932],["T_NS_SEPARATOR","\\",1932],["T_STRING","DB",1932],["T_NS_SEPARATOR","\\",1932],["T_STRING","Select",1932],["T_DOUBLE_COLON","::",1932],["T_STRING","FROM",1932],",",["T_WHITESPACE"," ",1932],["T_VARIABLE","$fromPart",1932],")",";",["T_WHITESPACE","\n        ",1932],"}",["T_WHITESPACE","\n        ",1933],["T_COMMENT","\/\/Clean duplicated fields\n",1934],["T_WHITESPACE","        ",1935],["T_VARIABLE","$this",1935],["T_OBJECT_OPERATOR","->",1935],["T_STRING","_resourceHelper",1935],["T_OBJECT_OPERATOR","->",1935],["T_STRING","prepareColumnsList",1935],"(",["T_VARIABLE","$select",1935],")",";",["T_WHITESPACE","\n\n        ",1935],["T_RETURN","return",1937],["T_WHITESPACE"," ",1937],["T_VARIABLE","$this",1937],";",["T_WHITESPACE","\n    ",1937],"}",["T_WHITESPACE","\n\n    ",1938],["T_DOC_COMMENT","\/**\n     * Apply front-end price limitation filters to the collection\n     *\n     * @return $this\n     *\/",1940],["T_WHITESPACE","\n    ",1944],["T_PUBLIC","public",1945],["T_WHITESPACE"," ",1945],["T_FUNCTION","function",1945],["T_WHITESPACE"," ",1945],["T_STRING","applyFrontendPriceLimitations",1945],"(",")",["T_WHITESPACE","\n    ",1945],"{",["T_WHITESPACE","\n        ",1946],["T_VARIABLE","$this",1947],["T_OBJECT_OPERATOR","->",1947],["T_STRING","_productLimitationFilters",1947],["T_OBJECT_OPERATOR","->",1947],["T_STRING","setUsePriceIndex",1947],"(",["T_STRING","true",1947],")",";",["T_WHITESPACE","\n        ",1947],["T_IF","if",1948],["T_WHITESPACE"," ",1948],"(","!",["T_ISSET","isset",1948],"(",["T_VARIABLE","$this",1948],["T_OBJECT_OPERATOR","->",1948],["T_STRING","_productLimitationFilters",1948],"[",["T_CONSTANT_ENCAPSED_STRING","'customer_group_id'",1948],"]",")",")",["T_WHITESPACE"," ",1948],"{",["T_WHITESPACE","\n            ",1948],["T_VARIABLE","$customerGroupId",1949],["T_WHITESPACE"," ",1949],"=",["T_WHITESPACE"," ",1949],["T_VARIABLE","$this",1949],["T_OBJECT_OPERATOR","->",1949],["T_STRING","_customerSession",1949],["T_OBJECT_OPERATOR","->",1949],["T_STRING","getCustomerGroupId",1949],"(",")",";",["T_WHITESPACE","\n            ",1949],["T_VARIABLE","$this",1950],["T_OBJECT_OPERATOR","->",1950],["T_STRING","_productLimitationFilters",1950],"[",["T_CONSTANT_ENCAPSED_STRING","'customer_group_id'",1950],"]",["T_WHITESPACE"," ",1950],"=",["T_WHITESPACE"," ",1950],["T_VARIABLE","$customerGroupId",1950],";",["T_WHITESPACE","\n        ",1950],"}",["T_WHITESPACE","\n        ",1951],["T_IF","if",1952],["T_WHITESPACE"," ",1952],"(","!",["T_ISSET","isset",1952],"(",["T_VARIABLE","$this",1952],["T_OBJECT_OPERATOR","->",1952],["T_STRING","_productLimitationFilters",1952],"[",["T_CONSTANT_ENCAPSED_STRING","'website_id'",1952],"]",")",")",["T_WHITESPACE"," ",1952],"{",["T_WHITESPACE","\n            ",1952],["T_VARIABLE","$websiteId",1953],["T_WHITESPACE"," ",1953],"=",["T_WHITESPACE"," ",1953],["T_VARIABLE","$this",1953],["T_OBJECT_OPERATOR","->",1953],["T_STRING","_storeManager",1953],["T_OBJECT_OPERATOR","->",1953],["T_STRING","getStore",1953],"(",["T_VARIABLE","$this",1953],["T_OBJECT_OPERATOR","->",1953],["T_STRING","getStoreId",1953],"(",")",")",["T_OBJECT_OPERATOR","->",1953],["T_STRING","getWebsiteId",1953],"(",")",";",["T_WHITESPACE","\n            ",1953],["T_VARIABLE","$this",1954],["T_OBJECT_OPERATOR","->",1954],["T_STRING","_productLimitationFilters",1954],"[",["T_CONSTANT_ENCAPSED_STRING","'website_id'",1954],"]",["T_WHITESPACE"," ",1954],"=",["T_WHITESPACE"," ",1954],["T_VARIABLE","$websiteId",1954],";",["T_WHITESPACE","\n        ",1954],"}",["T_WHITESPACE","\n        ",1955],["T_VARIABLE","$this",1956],["T_OBJECT_OPERATOR","->",1956],["T_STRING","_applyProductLimitations",1956],"(",")",";",["T_WHITESPACE","\n        ",1956],["T_RETURN","return",1957],["T_WHITESPACE"," ",1957],["T_VARIABLE","$this",1957],";",["T_WHITESPACE","\n    ",1957],"}",["T_WHITESPACE","\n\n    ",1958],["T_DOC_COMMENT","\/**\n     * Apply limitation filters to collection\n     * Method allows using one time category product index table (or product website table)\n     * for different combinations of store_id\/category_id\/visibility filter states\n     * Method supports multiple changes in one collection object for this parameters\n     *\n     * @return $this\n     *\/",1960],["T_WHITESPACE","\n    ",1967],["T_PROTECTED","protected",1968],["T_WHITESPACE"," ",1968],["T_FUNCTION","function",1968],["T_WHITESPACE"," ",1968],["T_STRING","_applyProductLimitations",1968],"(",")",["T_WHITESPACE","\n    ",1968],"{",["T_WHITESPACE","\n        ",1969],["T_VARIABLE","$this",1970],["T_OBJECT_OPERATOR","->",1970],["T_STRING","_prepareProductLimitationFilters",1970],"(",")",";",["T_WHITESPACE","\n        ",1970],["T_VARIABLE","$this",1971],["T_OBJECT_OPERATOR","->",1971],["T_STRING","_productLimitationJoinWebsite",1971],"(",")",";",["T_WHITESPACE","\n        ",1971],["T_VARIABLE","$this",1972],["T_OBJECT_OPERATOR","->",1972],["T_STRING","_productLimitationJoinPrice",1972],"(",")",";",["T_WHITESPACE","\n        ",1972],["T_VARIABLE","$filters",1973],["T_WHITESPACE"," ",1973],"=",["T_WHITESPACE"," ",1973],["T_VARIABLE","$this",1973],["T_OBJECT_OPERATOR","->",1973],["T_STRING","_productLimitationFilters",1973],";",["T_WHITESPACE","\n\n        ",1973],["T_IF","if",1975],["T_WHITESPACE"," ",1975],"(","!",["T_ISSET","isset",1975],"(",["T_VARIABLE","$filters",1975],"[",["T_CONSTANT_ENCAPSED_STRING","'category_id'",1975],"]",")",["T_WHITESPACE"," ",1975],["T_BOOLEAN_AND","&&",1975],["T_WHITESPACE"," ",1975],"!",["T_ISSET","isset",1975],"(",["T_VARIABLE","$filters",1975],"[",["T_CONSTANT_ENCAPSED_STRING","'visibility'",1975],"]",")",")",["T_WHITESPACE"," ",1975],"{",["T_WHITESPACE","\n            ",1975],["T_RETURN","return",1976],["T_WHITESPACE"," ",1976],["T_VARIABLE","$this",1976],";",["T_WHITESPACE","\n        ",1976],"}",["T_WHITESPACE","\n\n        ",1977],["T_VARIABLE","$conditions",1979],["T_WHITESPACE"," ",1979],"=",["T_WHITESPACE"," ",1979],"[",["T_WHITESPACE","\n            ",1979],["T_CONSTANT_ENCAPSED_STRING","'cat_index.product_id=e.entity_id'",1980],",",["T_WHITESPACE","\n            ",1980],["T_VARIABLE","$this",1981],["T_OBJECT_OPERATOR","->",1981],["T_STRING","getConnection",1981],"(",")",["T_OBJECT_OPERATOR","->",1981],["T_STRING","quoteInto",1981],"(",["T_CONSTANT_ENCAPSED_STRING","'cat_index.store_id=?'",1981],",",["T_WHITESPACE"," ",1981],["T_VARIABLE","$filters",1981],"[",["T_CONSTANT_ENCAPSED_STRING","'store_id'",1981],"]",")",",",["T_WHITESPACE","\n        ",1981],"]",";",["T_WHITESPACE","\n        ",1982],["T_IF","if",1983],["T_WHITESPACE"," ",1983],"(",["T_ISSET","isset",1983],"(",["T_VARIABLE","$filters",1983],"[",["T_CONSTANT_ENCAPSED_STRING","'visibility'",1983],"]",")",["T_WHITESPACE"," ",1983],["T_BOOLEAN_AND","&&",1983],["T_WHITESPACE"," ",1983],"!",["T_ISSET","isset",1983],"(",["T_VARIABLE","$filters",1983],"[",["T_CONSTANT_ENCAPSED_STRING","'store_table'",1983],"]",")",")",["T_WHITESPACE"," ",1983],"{",["T_WHITESPACE","\n            ",1983],["T_VARIABLE","$conditions",1984],"[","]",["T_WHITESPACE"," ",1984],"=",["T_WHITESPACE"," ",1984],["T_VARIABLE","$this",1984],["T_OBJECT_OPERATOR","->",1984],["T_STRING","getConnection",1984],"(",")",["T_OBJECT_OPERATOR","->",1984],["T_STRING","quoteInto",1984],"(",["T_CONSTANT_ENCAPSED_STRING","'cat_index.visibility IN(?)'",1984],",",["T_WHITESPACE"," ",1984],["T_VARIABLE","$filters",1984],"[",["T_CONSTANT_ENCAPSED_STRING","'visibility'",1984],"]",")",";",["T_WHITESPACE","\n        ",1984],"}",["T_WHITESPACE","\n        ",1985],["T_VARIABLE","$conditions",1986],"[","]",["T_WHITESPACE"," ",1986],"=",["T_WHITESPACE"," ",1986],["T_VARIABLE","$this",1986],["T_OBJECT_OPERATOR","->",1986],["T_STRING","getConnection",1986],"(",")",["T_OBJECT_OPERATOR","->",1986],["T_STRING","quoteInto",1986],"(",["T_CONSTANT_ENCAPSED_STRING","'cat_index.category_id=?'",1986],",",["T_WHITESPACE"," ",1986],["T_VARIABLE","$filters",1986],"[",["T_CONSTANT_ENCAPSED_STRING","'category_id'",1986],"]",")",";",["T_WHITESPACE","\n        ",1986],["T_IF","if",1987],["T_WHITESPACE"," ",1987],"(",["T_ISSET","isset",1987],"(",["T_VARIABLE","$filters",1987],"[",["T_CONSTANT_ENCAPSED_STRING","'category_is_anchor'",1987],"]",")",")",["T_WHITESPACE"," ",1987],"{",["T_WHITESPACE","\n            ",1987],["T_VARIABLE","$conditions",1988],"[","]",["T_WHITESPACE"," ",1988],"=",["T_WHITESPACE"," ",1988],["T_VARIABLE","$this",1988],["T_OBJECT_OPERATOR","->",1988],["T_STRING","getConnection",1988],"(",")",["T_OBJECT_OPERATOR","->",1988],["T_STRING","quoteInto",1988],"(",["T_CONSTANT_ENCAPSED_STRING","'cat_index.is_parent=?'",1988],",",["T_WHITESPACE"," ",1988],["T_VARIABLE","$filters",1988],"[",["T_CONSTANT_ENCAPSED_STRING","'category_is_anchor'",1988],"]",")",";",["T_WHITESPACE","\n        ",1988],"}",["T_WHITESPACE","\n\n        ",1989],["T_VARIABLE","$joinCond",1991],["T_WHITESPACE"," ",1991],"=",["T_WHITESPACE"," ",1991],["T_STRING","join",1991],"(",["T_CONSTANT_ENCAPSED_STRING","' AND '",1991],",",["T_WHITESPACE"," ",1991],["T_VARIABLE","$conditions",1991],")",";",["T_WHITESPACE","\n        ",1991],["T_VARIABLE","$fromPart",1992],["T_WHITESPACE"," ",1992],"=",["T_WHITESPACE"," ",1992],["T_VARIABLE","$this",1992],["T_OBJECT_OPERATOR","->",1992],["T_STRING","getSelect",1992],"(",")",["T_OBJECT_OPERATOR","->",1992],["T_STRING","getPart",1992],"(",["T_NS_SEPARATOR","\\",1992],["T_STRING","Magento",1992],["T_NS_SEPARATOR","\\",1992],["T_STRING","Framework",1992],["T_NS_SEPARATOR","\\",1992],["T_STRING","DB",1992],["T_NS_SEPARATOR","\\",1992],["T_STRING","Select",1992],["T_DOUBLE_COLON","::",1992],["T_STRING","FROM",1992],")",";",["T_WHITESPACE","\n        ",1992],["T_IF","if",1993],["T_WHITESPACE"," ",1993],"(",["T_ISSET","isset",1993],"(",["T_VARIABLE","$fromPart",1993],"[",["T_CONSTANT_ENCAPSED_STRING","'cat_index'",1993],"]",")",")",["T_WHITESPACE"," ",1993],"{",["T_WHITESPACE","\n            ",1993],["T_VARIABLE","$fromPart",1994],"[",["T_CONSTANT_ENCAPSED_STRING","'cat_index'",1994],"]","[",["T_CONSTANT_ENCAPSED_STRING","'joinCondition'",1994],"]",["T_WHITESPACE"," ",1994],"=",["T_WHITESPACE"," ",1994],["T_VARIABLE","$joinCond",1994],";",["T_WHITESPACE","\n            ",1994],["T_VARIABLE","$this",1995],["T_OBJECT_OPERATOR","->",1995],["T_STRING","getSelect",1995],"(",")",["T_OBJECT_OPERATOR","->",1995],["T_STRING","setPart",1995],"(",["T_NS_SEPARATOR","\\",1995],["T_STRING","Magento",1995],["T_NS_SEPARATOR","\\",1995],["T_STRING","Framework",1995],["T_NS_SEPARATOR","\\",1995],["T_STRING","DB",1995],["T_NS_SEPARATOR","\\",1995],["T_STRING","Select",1995],["T_DOUBLE_COLON","::",1995],["T_STRING","FROM",1995],",",["T_WHITESPACE"," ",1995],["T_VARIABLE","$fromPart",1995],")",";",["T_WHITESPACE","\n        ",1995],"}",["T_WHITESPACE"," ",1996],["T_ELSE","else",1996],["T_WHITESPACE"," ",1996],"{",["T_WHITESPACE","\n            ",1996],["T_VARIABLE","$this",1997],["T_OBJECT_OPERATOR","->",1997],["T_STRING","getSelect",1997],"(",")",["T_OBJECT_OPERATOR","->",1997],["T_STRING","join",1997],"(",["T_WHITESPACE","\n                ",1997],"[",["T_CONSTANT_ENCAPSED_STRING","'cat_index'",1998],["T_WHITESPACE"," ",1998],["T_DOUBLE_ARROW","=>",1998],["T_WHITESPACE"," ",1998],["T_VARIABLE","$this",1998],["T_OBJECT_OPERATOR","->",1998],["T_STRING","getTable",1998],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog_category_product_index'",1998],")","]",",",["T_WHITESPACE","\n                ",1998],["T_VARIABLE","$joinCond",1999],",",["T_WHITESPACE","\n                ",1999],"[",["T_CONSTANT_ENCAPSED_STRING","'cat_index_position'",2000],["T_WHITESPACE"," ",2000],["T_DOUBLE_ARROW","=>",2000],["T_WHITESPACE"," ",2000],["T_CONSTANT_ENCAPSED_STRING","'position'",2000],"]",["T_WHITESPACE","\n            ",2000],")",";",["T_WHITESPACE","\n        ",2001],"}",["T_WHITESPACE","\n\n        ",2002],["T_VARIABLE","$this",2004],["T_OBJECT_OPERATOR","->",2004],["T_STRING","_productLimitationJoinStore",2004],"(",")",";",["T_WHITESPACE","\n        ",2004],["T_VARIABLE","$this",2005],["T_OBJECT_OPERATOR","->",2005],["T_STRING","_eventManager",2005],["T_OBJECT_OPERATOR","->",2005],["T_STRING","dispatch",2005],"(",["T_WHITESPACE","\n            ",2005],["T_CONSTANT_ENCAPSED_STRING","'catalog_product_collection_apply_limitations_after'",2006],",",["T_WHITESPACE","\n            ",2006],"[",["T_CONSTANT_ENCAPSED_STRING","'collection'",2007],["T_WHITESPACE"," ",2007],["T_DOUBLE_ARROW","=>",2007],["T_WHITESPACE"," ",2007],["T_VARIABLE","$this",2007],"]",["T_WHITESPACE","\n        ",2007],")",";",["T_WHITESPACE","\n        ",2008],["T_RETURN","return",2009],["T_WHITESPACE"," ",2009],["T_VARIABLE","$this",2009],";",["T_WHITESPACE","\n    ",2009],"}",["T_WHITESPACE","\n\n    ",2010],["T_DOC_COMMENT","\/**\n     * Apply limitation filters to collection base on API\n     * Method allows using one time category product table\n     * for combinations of category_id filter states\n     *\n     * @return $this\n     *\/",2012],["T_WHITESPACE","\n    ",2018],["T_PROTECTED","protected",2019],["T_WHITESPACE"," ",2019],["T_FUNCTION","function",2019],["T_WHITESPACE"," ",2019],["T_STRING","_applyZeroStoreProductLimitations",2019],"(",")",["T_WHITESPACE","\n    ",2019],"{",["T_WHITESPACE","\n        ",2020],["T_VARIABLE","$filters",2021],["T_WHITESPACE"," ",2021],"=",["T_WHITESPACE"," ",2021],["T_VARIABLE","$this",2021],["T_OBJECT_OPERATOR","->",2021],["T_STRING","_productLimitationFilters",2021],";",["T_WHITESPACE","\n\n        ",2021],["T_VARIABLE","$conditions",2023],["T_WHITESPACE"," ",2023],"=",["T_WHITESPACE"," ",2023],"[",["T_WHITESPACE","\n            ",2023],["T_CONSTANT_ENCAPSED_STRING","'cat_pro.product_id=e.entity_id'",2024],",",["T_WHITESPACE","\n            ",2024],["T_VARIABLE","$this",2025],["T_OBJECT_OPERATOR","->",2025],["T_STRING","getConnection",2025],"(",")",["T_OBJECT_OPERATOR","->",2025],["T_STRING","quoteInto",2025],"(",["T_WHITESPACE","\n                ",2025],["T_CONSTANT_ENCAPSED_STRING","'cat_pro.category_id=?'",2026],",",["T_WHITESPACE","\n                ",2026],["T_VARIABLE","$filters",2027],"[",["T_CONSTANT_ENCAPSED_STRING","'category_id'",2027],"]",["T_WHITESPACE","\n            ",2027],")",",",["T_WHITESPACE","\n        ",2028],"]",";",["T_WHITESPACE","\n        ",2029],["T_VARIABLE","$joinCond",2030],["T_WHITESPACE"," ",2030],"=",["T_WHITESPACE"," ",2030],["T_STRING","join",2030],"(",["T_CONSTANT_ENCAPSED_STRING","' AND '",2030],",",["T_WHITESPACE"," ",2030],["T_VARIABLE","$conditions",2030],")",";",["T_WHITESPACE","\n\n        ",2030],["T_VARIABLE","$fromPart",2032],["T_WHITESPACE"," ",2032],"=",["T_WHITESPACE"," ",2032],["T_VARIABLE","$this",2032],["T_OBJECT_OPERATOR","->",2032],["T_STRING","getSelect",2032],"(",")",["T_OBJECT_OPERATOR","->",2032],["T_STRING","getPart",2032],"(",["T_NS_SEPARATOR","\\",2032],["T_STRING","Magento",2032],["T_NS_SEPARATOR","\\",2032],["T_STRING","Framework",2032],["T_NS_SEPARATOR","\\",2032],["T_STRING","DB",2032],["T_NS_SEPARATOR","\\",2032],["T_STRING","Select",2032],["T_DOUBLE_COLON","::",2032],["T_STRING","FROM",2032],")",";",["T_WHITESPACE","\n        ",2032],["T_IF","if",2033],["T_WHITESPACE"," ",2033],"(",["T_ISSET","isset",2033],"(",["T_VARIABLE","$fromPart",2033],"[",["T_CONSTANT_ENCAPSED_STRING","'cat_pro'",2033],"]",")",")",["T_WHITESPACE"," ",2033],"{",["T_WHITESPACE","\n            ",2033],["T_VARIABLE","$fromPart",2034],"[",["T_CONSTANT_ENCAPSED_STRING","'cat_pro'",2034],"]","[",["T_CONSTANT_ENCAPSED_STRING","'joinCondition'",2034],"]",["T_WHITESPACE"," ",2034],"=",["T_WHITESPACE"," ",2034],["T_VARIABLE","$joinCond",2034],";",["T_WHITESPACE","\n            ",2034],["T_VARIABLE","$this",2035],["T_OBJECT_OPERATOR","->",2035],["T_STRING","getSelect",2035],"(",")",["T_OBJECT_OPERATOR","->",2035],["T_STRING","setPart",2035],"(",["T_NS_SEPARATOR","\\",2035],["T_STRING","Magento",2035],["T_NS_SEPARATOR","\\",2035],["T_STRING","Framework",2035],["T_NS_SEPARATOR","\\",2035],["T_STRING","DB",2035],["T_NS_SEPARATOR","\\",2035],["T_STRING","Select",2035],["T_DOUBLE_COLON","::",2035],["T_STRING","FROM",2035],",",["T_WHITESPACE"," ",2035],["T_VARIABLE","$fromPart",2035],")",";",["T_WHITESPACE","\n        ",2035],"}",["T_WHITESPACE"," ",2036],["T_ELSE","else",2036],["T_WHITESPACE"," ",2036],"{",["T_WHITESPACE","\n            ",2036],["T_VARIABLE","$this",2037],["T_OBJECT_OPERATOR","->",2037],["T_STRING","getSelect",2037],"(",")",["T_OBJECT_OPERATOR","->",2037],["T_STRING","join",2037],"(",["T_WHITESPACE","\n                ",2037],"[",["T_CONSTANT_ENCAPSED_STRING","'cat_pro'",2038],["T_WHITESPACE"," ",2038],["T_DOUBLE_ARROW","=>",2038],["T_WHITESPACE"," ",2038],["T_VARIABLE","$this",2038],["T_OBJECT_OPERATOR","->",2038],["T_STRING","getTable",2038],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog_category_product'",2038],")","]",",",["T_WHITESPACE","\n                ",2038],["T_VARIABLE","$joinCond",2039],",",["T_WHITESPACE","\n                ",2039],"[",["T_CONSTANT_ENCAPSED_STRING","'cat_index_position'",2040],["T_WHITESPACE"," ",2040],["T_DOUBLE_ARROW","=>",2040],["T_WHITESPACE"," ",2040],["T_CONSTANT_ENCAPSED_STRING","'position'",2040],"]",["T_WHITESPACE","\n            ",2040],")",";",["T_WHITESPACE","\n        ",2041],"}",["T_WHITESPACE","\n        ",2042],["T_VARIABLE","$this",2043],["T_OBJECT_OPERATOR","->",2043],["T_STRING","_joinFields",2043],"[",["T_CONSTANT_ENCAPSED_STRING","'position'",2043],"]",["T_WHITESPACE"," ",2043],"=",["T_WHITESPACE"," ",2043],"[",["T_CONSTANT_ENCAPSED_STRING","'table'",2043],["T_WHITESPACE"," ",2043],["T_DOUBLE_ARROW","=>",2043],["T_WHITESPACE"," ",2043],["T_CONSTANT_ENCAPSED_STRING","'cat_pro'",2043],",",["T_WHITESPACE"," ",2043],["T_CONSTANT_ENCAPSED_STRING","'field'",2043],["T_WHITESPACE"," ",2043],["T_DOUBLE_ARROW","=>",2043],["T_WHITESPACE"," ",2043],["T_CONSTANT_ENCAPSED_STRING","'position'",2043],"]",";",["T_WHITESPACE","\n\n        ",2043],["T_RETURN","return",2045],["T_WHITESPACE"," ",2045],["T_VARIABLE","$this",2045],";",["T_WHITESPACE","\n    ",2045],"}",["T_WHITESPACE","\n\n    ",2046],["T_DOC_COMMENT","\/**\n     * Add category ids to loaded items\n     *\n     * @return $this\n     *\/",2048],["T_WHITESPACE","\n    ",2052],["T_PUBLIC","public",2053],["T_WHITESPACE"," ",2053],["T_FUNCTION","function",2053],["T_WHITESPACE"," ",2053],["T_STRING","addCategoryIds",2053],"(",")",["T_WHITESPACE","\n    ",2053],"{",["T_WHITESPACE","\n        ",2054],["T_IF","if",2055],["T_WHITESPACE"," ",2055],"(",["T_VARIABLE","$this",2055],["T_OBJECT_OPERATOR","->",2055],["T_STRING","getFlag",2055],"(",["T_CONSTANT_ENCAPSED_STRING","'category_ids_added'",2055],")",")",["T_WHITESPACE"," ",2055],"{",["T_WHITESPACE","\n            ",2055],["T_RETURN","return",2056],["T_WHITESPACE"," ",2056],["T_VARIABLE","$this",2056],";",["T_WHITESPACE","\n        ",2056],"}",["T_WHITESPACE","\n        ",2057],["T_VARIABLE","$ids",2058],["T_WHITESPACE"," ",2058],"=",["T_WHITESPACE"," ",2058],["T_STRING","array_keys",2058],"(",["T_VARIABLE","$this",2058],["T_OBJECT_OPERATOR","->",2058],["T_STRING","_items",2058],")",";",["T_WHITESPACE","\n        ",2058],["T_IF","if",2059],["T_WHITESPACE"," ",2059],"(",["T_EMPTY","empty",2059],"(",["T_VARIABLE","$ids",2059],")",")",["T_WHITESPACE"," ",2059],"{",["T_WHITESPACE","\n            ",2059],["T_RETURN","return",2060],["T_WHITESPACE"," ",2060],["T_VARIABLE","$this",2060],";",["T_WHITESPACE","\n        ",2060],"}",["T_WHITESPACE","\n\n        ",2061],["T_VARIABLE","$select",2063],["T_WHITESPACE"," ",2063],"=",["T_WHITESPACE"," ",2063],["T_VARIABLE","$this",2063],["T_OBJECT_OPERATOR","->",2063],["T_STRING","getConnection",2063],"(",")",["T_OBJECT_OPERATOR","->",2063],["T_STRING","select",2063],"(",")",";",["T_WHITESPACE","\n\n        ",2063],["T_VARIABLE","$select",2065],["T_OBJECT_OPERATOR","->",2065],["T_STRING","from",2065],"(",["T_VARIABLE","$this",2065],["T_OBJECT_OPERATOR","->",2065],["T_STRING","_productCategoryTable",2065],",",["T_WHITESPACE"," ",2065],"[",["T_CONSTANT_ENCAPSED_STRING","'product_id'",2065],",",["T_WHITESPACE"," ",2065],["T_CONSTANT_ENCAPSED_STRING","'category_id'",2065],"]",")",";",["T_WHITESPACE","\n        ",2065],["T_VARIABLE","$select",2066],["T_OBJECT_OPERATOR","->",2066],["T_STRING","where",2066],"(",["T_CONSTANT_ENCAPSED_STRING","'product_id IN (?)'",2066],",",["T_WHITESPACE"," ",2066],["T_VARIABLE","$ids",2066],")",";",["T_WHITESPACE","\n\n        ",2066],["T_VARIABLE","$data",2068],["T_WHITESPACE"," ",2068],"=",["T_WHITESPACE"," ",2068],["T_VARIABLE","$this",2068],["T_OBJECT_OPERATOR","->",2068],["T_STRING","getConnection",2068],"(",")",["T_OBJECT_OPERATOR","->",2068],["T_STRING","fetchAll",2068],"(",["T_VARIABLE","$select",2068],")",";",["T_WHITESPACE","\n\n        ",2068],["T_VARIABLE","$categoryIds",2070],["T_WHITESPACE"," ",2070],"=",["T_WHITESPACE"," ",2070],"[","]",";",["T_WHITESPACE","\n        ",2070],["T_FOREACH","foreach",2071],["T_WHITESPACE"," ",2071],"(",["T_VARIABLE","$data",2071],["T_WHITESPACE"," ",2071],["T_AS","as",2071],["T_WHITESPACE"," ",2071],["T_VARIABLE","$info",2071],")",["T_WHITESPACE"," ",2071],"{",["T_WHITESPACE","\n            ",2071],["T_IF","if",2072],["T_WHITESPACE"," ",2072],"(",["T_ISSET","isset",2072],"(",["T_VARIABLE","$categoryIds",2072],"[",["T_VARIABLE","$info",2072],"[",["T_CONSTANT_ENCAPSED_STRING","'product_id'",2072],"]","]",")",")",["T_WHITESPACE"," ",2072],"{",["T_WHITESPACE","\n                ",2072],["T_VARIABLE","$categoryIds",2073],"[",["T_VARIABLE","$info",2073],"[",["T_CONSTANT_ENCAPSED_STRING","'product_id'",2073],"]","]","[","]",["T_WHITESPACE"," ",2073],"=",["T_WHITESPACE"," ",2073],["T_VARIABLE","$info",2073],"[",["T_CONSTANT_ENCAPSED_STRING","'category_id'",2073],"]",";",["T_WHITESPACE","\n            ",2073],"}",["T_WHITESPACE"," ",2074],["T_ELSE","else",2074],["T_WHITESPACE"," ",2074],"{",["T_WHITESPACE","\n                ",2074],["T_VARIABLE","$categoryIds",2075],"[",["T_VARIABLE","$info",2075],"[",["T_CONSTANT_ENCAPSED_STRING","'product_id'",2075],"]","]",["T_WHITESPACE"," ",2075],"=",["T_WHITESPACE"," ",2075],"[",["T_VARIABLE","$info",2075],"[",["T_CONSTANT_ENCAPSED_STRING","'category_id'",2075],"]","]",";",["T_WHITESPACE","\n            ",2075],"}",["T_WHITESPACE","\n        ",2076],"}",["T_WHITESPACE","\n\n        ",2077],["T_FOREACH","foreach",2079],["T_WHITESPACE"," ",2079],"(",["T_VARIABLE","$this",2079],["T_OBJECT_OPERATOR","->",2079],["T_STRING","getItems",2079],"(",")",["T_WHITESPACE"," ",2079],["T_AS","as",2079],["T_WHITESPACE"," ",2079],["T_VARIABLE","$item",2079],")",["T_WHITESPACE"," ",2079],"{",["T_WHITESPACE","\n            ",2079],["T_VARIABLE","$productId",2080],["T_WHITESPACE"," ",2080],"=",["T_WHITESPACE"," ",2080],["T_VARIABLE","$item",2080],["T_OBJECT_OPERATOR","->",2080],["T_STRING","getId",2080],"(",")",";",["T_WHITESPACE","\n            ",2080],["T_IF","if",2081],["T_WHITESPACE"," ",2081],"(",["T_ISSET","isset",2081],"(",["T_VARIABLE","$categoryIds",2081],"[",["T_VARIABLE","$productId",2081],"]",")",")",["T_WHITESPACE"," ",2081],"{",["T_WHITESPACE","\n                ",2081],["T_VARIABLE","$item",2082],["T_OBJECT_OPERATOR","->",2082],["T_STRING","setCategoryIds",2082],"(",["T_VARIABLE","$categoryIds",2082],"[",["T_VARIABLE","$productId",2082],"]",")",";",["T_WHITESPACE","\n            ",2082],"}",["T_WHITESPACE"," ",2083],["T_ELSE","else",2083],["T_WHITESPACE"," ",2083],"{",["T_WHITESPACE","\n                ",2083],["T_VARIABLE","$item",2084],["T_OBJECT_OPERATOR","->",2084],["T_STRING","setCategoryIds",2084],"(","[","]",")",";",["T_WHITESPACE","\n            ",2084],"}",["T_WHITESPACE","\n        ",2085],"}",["T_WHITESPACE","\n\n        ",2086],["T_VARIABLE","$this",2088],["T_OBJECT_OPERATOR","->",2088],["T_STRING","setFlag",2088],"(",["T_CONSTANT_ENCAPSED_STRING","'category_ids_added'",2088],",",["T_WHITESPACE"," ",2088],["T_STRING","true",2088],")",";",["T_WHITESPACE","\n        ",2088],["T_RETURN","return",2089],["T_WHITESPACE"," ",2089],["T_VARIABLE","$this",2089],";",["T_WHITESPACE","\n    ",2089],"}",["T_WHITESPACE","\n\n    ",2090],["T_DOC_COMMENT","\/**\n     * Add tier price data to loaded items\n     *\n     * @return $this\n     * @SuppressWarnings(PHPMD.CyclomaticComplexity)\n     * @SuppressWarnings(PHPMD.NPathComplexity)\n     *\/",2092],["T_WHITESPACE","\n    ",2098],["T_PUBLIC","public",2099],["T_WHITESPACE"," ",2099],["T_FUNCTION","function",2099],["T_WHITESPACE"," ",2099],["T_STRING","addTierPriceData",2099],"(",")",["T_WHITESPACE","\n    ",2099],"{",["T_WHITESPACE","\n        ",2100],["T_IF","if",2101],["T_WHITESPACE"," ",2101],"(",["T_VARIABLE","$this",2101],["T_OBJECT_OPERATOR","->",2101],["T_STRING","getFlag",2101],"(",["T_CONSTANT_ENCAPSED_STRING","'tier_price_added'",2101],")",")",["T_WHITESPACE"," ",2101],"{",["T_WHITESPACE","\n            ",2101],["T_RETURN","return",2102],["T_WHITESPACE"," ",2102],["T_VARIABLE","$this",2102],";",["T_WHITESPACE","\n        ",2102],"}",["T_WHITESPACE","\n        ",2103],["T_VARIABLE","$linkField",2104],["T_WHITESPACE"," ",2104],"=",["T_WHITESPACE"," ",2104],["T_VARIABLE","$this",2104],["T_OBJECT_OPERATOR","->",2104],["T_STRING","getConnection",2104],"(",")",["T_OBJECT_OPERATOR","->",2104],["T_STRING","getAutoIncrementField",2104],"(",["T_VARIABLE","$this",2104],["T_OBJECT_OPERATOR","->",2104],["T_STRING","getTable",2104],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog_product_entity'",2104],")",")",";",["T_WHITESPACE","\n\n        ",2104],["T_VARIABLE","$tierPrices",2106],["T_WHITESPACE"," ",2106],"=",["T_WHITESPACE"," ",2106],"[","]",";",["T_WHITESPACE","\n        ",2106],["T_VARIABLE","$productIds",2107],["T_WHITESPACE"," ",2107],"=",["T_WHITESPACE"," ",2107],"[","]",";",["T_WHITESPACE","\n        ",2107],["T_FOREACH","foreach",2108],["T_WHITESPACE"," ",2108],"(",["T_VARIABLE","$this",2108],["T_OBJECT_OPERATOR","->",2108],["T_STRING","getItems",2108],"(",")",["T_WHITESPACE"," ",2108],["T_AS","as",2108],["T_WHITESPACE"," ",2108],["T_VARIABLE","$item",2108],")",["T_WHITESPACE"," ",2108],"{",["T_WHITESPACE","\n            ",2108],["T_VARIABLE","$productIds",2109],"[","]",["T_WHITESPACE"," ",2109],"=",["T_WHITESPACE"," ",2109],["T_VARIABLE","$item",2109],["T_OBJECT_OPERATOR","->",2109],["T_STRING","getData",2109],"(",["T_VARIABLE","$linkField",2109],")",";",["T_WHITESPACE","\n            ",2109],["T_VARIABLE","$tierPrices",2110],"[",["T_VARIABLE","$item",2110],["T_OBJECT_OPERATOR","->",2110],["T_STRING","getData",2110],"(",["T_VARIABLE","$linkField",2110],")","]",["T_WHITESPACE"," ",2110],"=",["T_WHITESPACE"," ",2110],"[","]",";",["T_WHITESPACE","\n        ",2110],"}",["T_WHITESPACE","\n        ",2111],["T_IF","if",2112],["T_WHITESPACE"," ",2112],"(","!",["T_VARIABLE","$productIds",2112],")",["T_WHITESPACE"," ",2112],"{",["T_WHITESPACE","\n            ",2112],["T_RETURN","return",2113],["T_WHITESPACE"," ",2113],["T_VARIABLE","$this",2113],";",["T_WHITESPACE","\n        ",2113],"}",["T_WHITESPACE","\n\n        ",2114],["T_DOC_COMMENT","\/** @var $attribute \\Magento\\Catalog\\Model\\ResourceModel\\Eav\\Attribute *\/",2116],["T_WHITESPACE","\n        ",2116],["T_VARIABLE","$attribute",2117],["T_WHITESPACE"," ",2117],"=",["T_WHITESPACE"," ",2117],["T_VARIABLE","$this",2117],["T_OBJECT_OPERATOR","->",2117],["T_STRING","getAttribute",2117],"(",["T_CONSTANT_ENCAPSED_STRING","'tier_price'",2117],")",";",["T_WHITESPACE","\n        ",2117],["T_COMMENT","\/* @var $backend \\Magento\\Catalog\\Model\\Product\\Attribute\\Backend\\Tierprice *\/",2118],["T_WHITESPACE","\n        ",2118],["T_VARIABLE","$backend",2119],["T_WHITESPACE"," ",2119],"=",["T_WHITESPACE"," ",2119],["T_VARIABLE","$attribute",2119],["T_OBJECT_OPERATOR","->",2119],["T_STRING","getBackend",2119],"(",")",";",["T_WHITESPACE","\n        ",2119],["T_VARIABLE","$websiteId",2120],["T_WHITESPACE"," ",2120],"=",["T_WHITESPACE"," ",2120],["T_LNUMBER","0",2120],";",["T_WHITESPACE","\n        ",2120],["T_IF","if",2121],["T_WHITESPACE"," ",2121],"(","!",["T_VARIABLE","$attribute",2121],["T_OBJECT_OPERATOR","->",2121],["T_STRING","isScopeGlobal",2121],"(",")",["T_WHITESPACE"," ",2121],["T_BOOLEAN_AND","&&",2121],["T_WHITESPACE"," ",2121],["T_STRING","null",2121],["T_WHITESPACE"," ",2121],["T_IS_NOT_IDENTICAL","!==",2121],["T_WHITESPACE"," ",2121],["T_VARIABLE","$this",2121],["T_OBJECT_OPERATOR","->",2121],["T_STRING","getStoreId",2121],"(",")",")",["T_WHITESPACE"," ",2121],"{",["T_WHITESPACE","\n            ",2121],["T_VARIABLE","$websiteId",2122],["T_WHITESPACE"," ",2122],"=",["T_WHITESPACE"," ",2122],["T_VARIABLE","$this",2122],["T_OBJECT_OPERATOR","->",2122],["T_STRING","_storeManager",2122],["T_OBJECT_OPERATOR","->",2122],["T_STRING","getStore",2122],"(",["T_VARIABLE","$this",2122],["T_OBJECT_OPERATOR","->",2122],["T_STRING","getStoreId",2122],"(",")",")",["T_OBJECT_OPERATOR","->",2122],["T_STRING","getWebsiteId",2122],"(",")",";",["T_WHITESPACE","\n        ",2122],"}",["T_WHITESPACE","\n\n        ",2123],["T_VARIABLE","$select",2125],["T_WHITESPACE"," ",2125],"=",["T_WHITESPACE"," ",2125],["T_VARIABLE","$backend",2125],["T_OBJECT_OPERATOR","->",2125],["T_STRING","getResource",2125],"(",")",["T_OBJECT_OPERATOR","->",2125],["T_STRING","getSelect",2125],"(",["T_VARIABLE","$websiteId",2125],")",";",["T_WHITESPACE","\n        ",2125],["T_VARIABLE","$select",2126],["T_OBJECT_OPERATOR","->",2126],["T_STRING","columns",2126],"(","[",["T_CONSTANT_ENCAPSED_STRING","'product_id'",2126],["T_WHITESPACE"," ",2126],["T_DOUBLE_ARROW","=>",2126],["T_WHITESPACE"," ",2126],["T_VARIABLE","$linkField",2126],"]",")",["T_OBJECT_OPERATOR","->",2126],["T_STRING","where",2126],"(",["T_WHITESPACE","\n            ",2126],["T_VARIABLE","$linkField",2127],["T_WHITESPACE"," ",2127],".",["T_CONSTANT_ENCAPSED_STRING","' IN(?)'",2127],",",["T_WHITESPACE","\n            ",2127],["T_VARIABLE","$productIds",2128],["T_WHITESPACE","\n        ",2128],")",["T_OBJECT_OPERATOR","->",2129],["T_STRING","order",2129],"(",["T_WHITESPACE","\n            ",2129],["T_VARIABLE","$linkField",2130],["T_WHITESPACE","\n        ",2130],")",";",["T_WHITESPACE","\n\n        ",2131],["T_FOREACH","foreach",2133],["T_WHITESPACE"," ",2133],"(",["T_VARIABLE","$this",2133],["T_OBJECT_OPERATOR","->",2133],["T_STRING","getConnection",2133],"(",")",["T_OBJECT_OPERATOR","->",2133],["T_STRING","fetchAll",2133],"(",["T_VARIABLE","$select",2133],")",["T_WHITESPACE"," ",2133],["T_AS","as",2133],["T_WHITESPACE"," ",2133],["T_VARIABLE","$row",2133],")",["T_WHITESPACE"," ",2133],"{",["T_WHITESPACE","\n            ",2133],["T_VARIABLE","$tierPrices",2134],"[",["T_VARIABLE","$row",2134],"[",["T_CONSTANT_ENCAPSED_STRING","'product_id'",2134],"]","]","[","]",["T_WHITESPACE"," ",2134],"=",["T_WHITESPACE"," ",2134],["T_VARIABLE","$row",2134],";",["T_WHITESPACE","\n        ",2134],"}",["T_WHITESPACE","\n\n        ",2135],["T_FOREACH","foreach",2137],["T_WHITESPACE"," ",2137],"(",["T_VARIABLE","$this",2137],["T_OBJECT_OPERATOR","->",2137],["T_STRING","getItems",2137],"(",")",["T_WHITESPACE"," ",2137],["T_AS","as",2137],["T_WHITESPACE"," ",2137],["T_VARIABLE","$item",2137],")",["T_WHITESPACE"," ",2137],"{",["T_WHITESPACE","\n            ",2137],["T_VARIABLE","$backend",2138],["T_OBJECT_OPERATOR","->",2138],["T_STRING","setPriceData",2138],"(",["T_VARIABLE","$item",2138],",",["T_WHITESPACE"," ",2138],["T_VARIABLE","$tierPrices",2138],"[",["T_VARIABLE","$item",2138],["T_OBJECT_OPERATOR","->",2138],["T_STRING","getData",2138],"(",["T_VARIABLE","$linkField",2138],")","]",")",";",["T_WHITESPACE","\n        ",2138],"}",["T_WHITESPACE","\n\n        ",2139],["T_VARIABLE","$this",2141],["T_OBJECT_OPERATOR","->",2141],["T_STRING","setFlag",2141],"(",["T_CONSTANT_ENCAPSED_STRING","'tier_price_added'",2141],",",["T_WHITESPACE"," ",2141],["T_STRING","true",2141],")",";",["T_WHITESPACE","\n        ",2141],["T_RETURN","return",2142],["T_WHITESPACE"," ",2142],["T_VARIABLE","$this",2142],";",["T_WHITESPACE","\n    ",2142],"}",["T_WHITESPACE","\n\n    ",2143],["T_DOC_COMMENT","\/**\n     * Add field comparison expression\n     *\n     * @param string $comparisonFormat - expression for sprintf()\n     * @param array $fields - list of fields\n     * @return $this\n     * @throws \\Exception\n     *\/",2145],["T_WHITESPACE","\n    ",2152],["T_PUBLIC","public",2153],["T_WHITESPACE"," ",2153],["T_FUNCTION","function",2153],["T_WHITESPACE"," ",2153],["T_STRING","addPriceDataFieldFilter",2153],"(",["T_VARIABLE","$comparisonFormat",2153],",",["T_WHITESPACE"," ",2153],["T_VARIABLE","$fields",2153],")",["T_WHITESPACE","\n    ",2153],"{",["T_WHITESPACE","\n        ",2154],["T_IF","if",2155],["T_WHITESPACE"," ",2155],"(","!",["T_STRING","preg_match",2155],"(",["T_CONSTANT_ENCAPSED_STRING","'\/^%s( (<|>|=|<=|>=|<>) %s)*$\/'",2155],",",["T_WHITESPACE"," ",2155],["T_VARIABLE","$comparisonFormat",2155],")",")",["T_WHITESPACE"," ",2155],"{",["T_WHITESPACE","\n            ",2155],["T_THROW","throw",2156],["T_WHITESPACE"," ",2156],["T_NEW","new",2156],["T_WHITESPACE"," ",2156],["T_NS_SEPARATOR","\\",2156],["T_STRING","Exception",2156],"(",["T_CONSTANT_ENCAPSED_STRING","'Invalid comparison format.'",2156],")",";",["T_WHITESPACE","\n        ",2156],"}",["T_WHITESPACE","\n\n        ",2157],["T_IF","if",2159],["T_WHITESPACE"," ",2159],"(","!",["T_STRING","is_array",2159],"(",["T_VARIABLE","$fields",2159],")",")",["T_WHITESPACE"," ",2159],"{",["T_WHITESPACE","\n            ",2159],["T_VARIABLE","$fields",2160],["T_WHITESPACE"," ",2160],"=",["T_WHITESPACE"," ",2160],"[",["T_VARIABLE","$fields",2160],"]",";",["T_WHITESPACE","\n        ",2160],"}",["T_WHITESPACE","\n        ",2161],["T_FOREACH","foreach",2162],["T_WHITESPACE"," ",2162],"(",["T_VARIABLE","$fields",2162],["T_WHITESPACE"," ",2162],["T_AS","as",2162],["T_WHITESPACE"," ",2162],["T_VARIABLE","$key",2162],["T_WHITESPACE"," ",2162],["T_DOUBLE_ARROW","=>",2162],["T_WHITESPACE"," ",2162],["T_VARIABLE","$field",2162],")",["T_WHITESPACE"," ",2162],"{",["T_WHITESPACE","\n            ",2162],["T_VARIABLE","$fields",2163],"[",["T_VARIABLE","$key",2163],"]",["T_WHITESPACE"," ",2163],"=",["T_WHITESPACE"," ",2163],["T_VARIABLE","$this",2163],["T_OBJECT_OPERATOR","->",2163],["T_STRING","_getMappedField",2163],"(",["T_VARIABLE","$field",2163],")",";",["T_WHITESPACE","\n        ",2163],"}",["T_WHITESPACE","\n\n        ",2164],["T_VARIABLE","$this",2166],["T_OBJECT_OPERATOR","->",2166],["T_STRING","_priceDataFieldFilters",2166],"[","]",["T_WHITESPACE"," ",2166],"=",["T_WHITESPACE"," ",2166],["T_STRING","array_merge",2166],"(","[",["T_VARIABLE","$comparisonFormat",2166],"]",",",["T_WHITESPACE"," ",2166],["T_VARIABLE","$fields",2166],")",";",["T_WHITESPACE","\n        ",2166],["T_RETURN","return",2167],["T_WHITESPACE"," ",2167],["T_VARIABLE","$this",2167],";",["T_WHITESPACE","\n    ",2167],"}",["T_WHITESPACE","\n\n    ",2168],["T_DOC_COMMENT","\/**\n     * Add media gallery data to loaded items\n     *\n     * @return $this\n     * @SuppressWarnings(PHPMD.CyclomaticComplexity)\n     * @SuppressWarnings(PHPMD.NPathComplexity)\n     *\/",2170],["T_WHITESPACE","\n    ",2176],["T_PUBLIC","public",2177],["T_WHITESPACE"," ",2177],["T_FUNCTION","function",2177],["T_WHITESPACE"," ",2177],["T_STRING","addMediaGalleryData",2177],"(",")",["T_WHITESPACE","\n    ",2177],"{",["T_WHITESPACE","\n        ",2178],["T_IF","if",2179],["T_WHITESPACE"," ",2179],"(",["T_VARIABLE","$this",2179],["T_OBJECT_OPERATOR","->",2179],["T_STRING","getFlag",2179],"(",["T_CONSTANT_ENCAPSED_STRING","'media_gallery_added'",2179],")",")",["T_WHITESPACE"," ",2179],"{",["T_WHITESPACE","\n            ",2179],["T_RETURN","return",2180],["T_WHITESPACE"," ",2180],["T_VARIABLE","$this",2180],";",["T_WHITESPACE","\n        ",2180],"}",["T_WHITESPACE","\n\n        ",2181],["T_IF","if",2183],["T_WHITESPACE"," ",2183],"(","!",["T_VARIABLE","$this",2183],["T_OBJECT_OPERATOR","->",2183],["T_STRING","count",2183],"(",")",")",["T_WHITESPACE"," ",2183],"{",["T_WHITESPACE","\n            ",2183],["T_RETURN","return",2184],["T_WHITESPACE"," ",2184],["T_VARIABLE","$this",2184],";",["T_WHITESPACE","\n        ",2184],"}",["T_WHITESPACE","\n\n        ",2185],["T_DOC_COMMENT","\/** @var $attribute \\Magento\\Catalog\\Model\\ResourceModel\\Eav\\Attribute *\/",2187],["T_WHITESPACE","\n        ",2187],["T_VARIABLE","$attribute",2188],["T_WHITESPACE"," ",2188],"=",["T_WHITESPACE"," ",2188],["T_VARIABLE","$this",2188],["T_OBJECT_OPERATOR","->",2188],["T_STRING","getAttribute",2188],"(",["T_CONSTANT_ENCAPSED_STRING","'media_gallery'",2188],")",";",["T_WHITESPACE","\n        ",2188],["T_VARIABLE","$select",2189],["T_WHITESPACE"," ",2189],"=",["T_WHITESPACE"," ",2189],["T_VARIABLE","$this",2189],["T_OBJECT_OPERATOR","->",2189],["T_STRING","getMediaGalleryResource",2189],"(",")",["T_OBJECT_OPERATOR","->",2189],["T_STRING","createBatchBaseSelect",2189],"(",["T_WHITESPACE","\n            ",2189],["T_VARIABLE","$this",2190],["T_OBJECT_OPERATOR","->",2190],["T_STRING","getStoreId",2190],"(",")",",",["T_WHITESPACE","\n            ",2190],["T_VARIABLE","$attribute",2191],["T_OBJECT_OPERATOR","->",2191],["T_STRING","getAttributeId",2191],"(",")",["T_WHITESPACE","\n        ",2191],")",";",["T_WHITESPACE","\n\n        ",2192],["T_VARIABLE","$mediaGalleries",2194],["T_WHITESPACE"," ",2194],"=",["T_WHITESPACE"," ",2194],"[","]",";",["T_WHITESPACE","\n        ",2194],["T_VARIABLE","$linkField",2195],["T_WHITESPACE"," ",2195],"=",["T_WHITESPACE"," ",2195],["T_VARIABLE","$this",2195],["T_OBJECT_OPERATOR","->",2195],["T_STRING","getProductEntityMetadata",2195],"(",")",["T_OBJECT_OPERATOR","->",2195],["T_STRING","getLinkField",2195],"(",")",";",["T_WHITESPACE","\n        ",2195],["T_VARIABLE","$items",2196],["T_WHITESPACE"," ",2196],"=",["T_WHITESPACE"," ",2196],["T_VARIABLE","$this",2196],["T_OBJECT_OPERATOR","->",2196],["T_STRING","getItems",2196],"(",")",";",["T_WHITESPACE","\n\n        ",2196],["T_VARIABLE","$select",2198],["T_OBJECT_OPERATOR","->",2198],["T_STRING","where",2198],"(",["T_WHITESPACE","\n            ",2198],["T_CONSTANT_ENCAPSED_STRING","'entity.'",2199],["T_WHITESPACE"," ",2199],".",["T_WHITESPACE"," ",2199],["T_VARIABLE","$linkField",2199],["T_WHITESPACE"," ",2199],".",["T_WHITESPACE"," ",2199],["T_CONSTANT_ENCAPSED_STRING","' IN (?)'",2199],",",["T_WHITESPACE","\n            ",2199],["T_STRING","array_map",2200],"(",["T_WHITESPACE","\n                ",2200],["T_FUNCTION","function",2201],["T_WHITESPACE"," ",2201],"(",["T_VARIABLE","$item",2201],")",["T_WHITESPACE"," ",2201],["T_USE","use",2201],["T_WHITESPACE"," ",2201],"(",["T_VARIABLE","$linkField",2201],")",["T_WHITESPACE"," ",2201],"{",["T_WHITESPACE","\n                    ",2201],["T_RETURN","return",2202],["T_WHITESPACE"," ",2202],["T_VARIABLE","$item",2202],["T_OBJECT_OPERATOR","->",2202],["T_STRING","getData",2202],"(",["T_VARIABLE","$linkField",2202],")",";",["T_WHITESPACE","\n                ",2202],"}",",",["T_WHITESPACE","\n                ",2203],["T_VARIABLE","$items",2204],["T_WHITESPACE","\n            ",2204],")",["T_WHITESPACE","\n        ",2205],")",";",["T_WHITESPACE","\n        ",2206],["T_FOREACH","foreach",2207],["T_WHITESPACE"," ",2207],"(",["T_VARIABLE","$this",2207],["T_OBJECT_OPERATOR","->",2207],["T_STRING","getConnection",2207],"(",")",["T_OBJECT_OPERATOR","->",2207],["T_STRING","fetchAll",2207],"(",["T_VARIABLE","$select",2207],")",["T_WHITESPACE"," ",2207],["T_AS","as",2207],["T_WHITESPACE"," ",2207],["T_VARIABLE","$row",2207],")",["T_WHITESPACE"," ",2207],"{",["T_WHITESPACE","\n            ",2207],["T_VARIABLE","$mediaGalleries",2208],"[",["T_VARIABLE","$row",2208],"[",["T_VARIABLE","$linkField",2208],"]","]","[","]",["T_WHITESPACE"," ",2208],"=",["T_WHITESPACE"," ",2208],["T_VARIABLE","$row",2208],";",["T_WHITESPACE","\n        ",2208],"}",["T_WHITESPACE","\n\n        ",2209],["T_FOREACH","foreach",2211],["T_WHITESPACE"," ",2211],"(",["T_VARIABLE","$items",2211],["T_WHITESPACE"," ",2211],["T_AS","as",2211],["T_WHITESPACE"," ",2211],["T_VARIABLE","$item",2211],")",["T_WHITESPACE"," ",2211],"{",["T_WHITESPACE","\n            ",2211],["T_VARIABLE","$mediaEntries",2212],["T_WHITESPACE"," ",2212],"=",["T_WHITESPACE"," ",2212],["T_ISSET","isset",2212],"(",["T_VARIABLE","$mediaGalleries",2212],"[",["T_VARIABLE","$item",2212],["T_OBJECT_OPERATOR","->",2212],["T_STRING","getData",2212],"(",["T_VARIABLE","$linkField",2212],")","]",")",["T_WHITESPACE"," ",2212],"?",["T_WHITESPACE","\n                ",2212],["T_VARIABLE","$mediaGalleries",2213],"[",["T_VARIABLE","$item",2213],["T_OBJECT_OPERATOR","->",2213],["T_STRING","getData",2213],"(",["T_VARIABLE","$linkField",2213],")","]",["T_WHITESPACE"," ",2213],":",["T_WHITESPACE"," ",2213],"[","]",";",["T_WHITESPACE","\n            ",2213],["T_VARIABLE","$this",2214],["T_OBJECT_OPERATOR","->",2214],["T_STRING","getGalleryReadHandler",2214],"(",")",["T_OBJECT_OPERATOR","->",2214],["T_STRING","addMediaDataToProduct",2214],"(",["T_VARIABLE","$item",2214],",",["T_WHITESPACE"," ",2214],["T_VARIABLE","$mediaEntries",2214],")",";",["T_WHITESPACE","\n        ",2214],"}",["T_WHITESPACE","\n\n        ",2215],["T_VARIABLE","$this",2217],["T_OBJECT_OPERATOR","->",2217],["T_STRING","setFlag",2217],"(",["T_CONSTANT_ENCAPSED_STRING","'media_gallery_added'",2217],",",["T_WHITESPACE"," ",2217],["T_STRING","true",2217],")",";",["T_WHITESPACE","\n        ",2217],["T_RETURN","return",2218],["T_WHITESPACE"," ",2218],["T_VARIABLE","$this",2218],";",["T_WHITESPACE","\n    ",2218],"}",["T_WHITESPACE","\n\n    ",2219],["T_DOC_COMMENT","\/**\n     * Get product entity metadata\n     *\n     * @return \\Magento\\Framework\\EntityManager\\EntityMetadataInterface\n     *\/",2221],["T_WHITESPACE","\n    ",2225],["T_PUBLIC","public",2226],["T_WHITESPACE"," ",2226],["T_FUNCTION","function",2226],["T_WHITESPACE"," ",2226],["T_STRING","getProductEntityMetadata",2226],"(",")",["T_WHITESPACE","\n    ",2226],"{",["T_WHITESPACE","\n        ",2227],["T_RETURN","return",2228],["T_WHITESPACE"," ",2228],["T_VARIABLE","$this",2228],["T_OBJECT_OPERATOR","->",2228],["T_STRING","metadataPool",2228],["T_OBJECT_OPERATOR","->",2228],["T_STRING","getMetadata",2228],"(",["T_STRING","ProductInterface",2228],["T_DOUBLE_COLON","::",2228],["T_CLASS","class",2228],")",";",["T_WHITESPACE","\n    ",2228],"}",["T_WHITESPACE","\n\n    ",2229],["T_DOC_COMMENT","\/**\n     * Retrieve GalleryReadHandler\n     *\n     * @return GalleryReadHandler\n     * @deprecated\n     *\/",2231],["T_WHITESPACE","\n    ",2236],["T_PRIVATE","private",2237],["T_WHITESPACE"," ",2237],["T_FUNCTION","function",2237],["T_WHITESPACE"," ",2237],["T_STRING","getGalleryReadHandler",2237],"(",")",["T_WHITESPACE","\n    ",2237],"{",["T_WHITESPACE","\n        ",2238],["T_IF","if",2239],["T_WHITESPACE"," ",2239],"(",["T_VARIABLE","$this",2239],["T_OBJECT_OPERATOR","->",2239],["T_STRING","productGalleryReadHandler",2239],["T_WHITESPACE"," ",2239],["T_IS_IDENTICAL","===",2239],["T_WHITESPACE"," ",2239],["T_STRING","null",2239],")",["T_WHITESPACE"," ",2239],"{",["T_WHITESPACE","\n            ",2239],["T_VARIABLE","$this",2240],["T_OBJECT_OPERATOR","->",2240],["T_STRING","productGalleryReadHandler",2240],["T_WHITESPACE"," ",2240],"=",["T_WHITESPACE"," ",2240],["T_STRING","ObjectManager",2240],["T_DOUBLE_COLON","::",2240],["T_STRING","getInstance",2240],"(",")",["T_OBJECT_OPERATOR","->",2240],["T_STRING","get",2240],"(",["T_STRING","GalleryReadHandler",2240],["T_DOUBLE_COLON","::",2240],["T_CLASS","class",2240],")",";",["T_WHITESPACE","\n        ",2240],"}",["T_WHITESPACE","\n        ",2241],["T_RETURN","return",2242],["T_WHITESPACE"," ",2242],["T_VARIABLE","$this",2242],["T_OBJECT_OPERATOR","->",2242],["T_STRING","productGalleryReadHandler",2242],";",["T_WHITESPACE","\n    ",2242],"}",["T_WHITESPACE","\n\n    ",2243],["T_DOC_COMMENT","\/**\n     * @deprecated\n     * @return \\Magento\\Catalog\\Model\\ResourceModel\\Product\\Gallery\n     *\/",2245],["T_WHITESPACE","\n    ",2248],["T_PRIVATE","private",2249],["T_WHITESPACE"," ",2249],["T_FUNCTION","function",2249],["T_WHITESPACE"," ",2249],["T_STRING","getMediaGalleryResource",2249],"(",")",["T_WHITESPACE","\n    ",2249],"{",["T_WHITESPACE","\n        ",2250],["T_IF","if",2251],["T_WHITESPACE"," ",2251],"(",["T_STRING","null",2251],["T_WHITESPACE"," ",2251],["T_IS_IDENTICAL","===",2251],["T_WHITESPACE"," ",2251],["T_VARIABLE","$this",2251],["T_OBJECT_OPERATOR","->",2251],["T_STRING","mediaGalleryResource",2251],")",["T_WHITESPACE"," ",2251],"{",["T_WHITESPACE","\n            ",2251],["T_VARIABLE","$this",2252],["T_OBJECT_OPERATOR","->",2252],["T_STRING","mediaGalleryResource",2252],["T_WHITESPACE"," ",2252],"=",["T_WHITESPACE"," ",2252],["T_STRING","ObjectManager",2252],["T_DOUBLE_COLON","::",2252],["T_STRING","getInstance",2252],"(",")",["T_OBJECT_OPERATOR","->",2252],["T_STRING","get",2252],"(",["T_STRING","Gallery",2252],["T_DOUBLE_COLON","::",2252],["T_CLASS","class",2252],")",";",["T_WHITESPACE","\n        ",2252],"}",["T_WHITESPACE","\n        ",2253],["T_RETURN","return",2254],["T_WHITESPACE"," ",2254],["T_VARIABLE","$this",2254],["T_OBJECT_OPERATOR","->",2254],["T_STRING","mediaGalleryResource",2254],";",["T_WHITESPACE","\n    ",2254],"}",["T_WHITESPACE","\n\n    ",2255],["T_DOC_COMMENT","\/**\n     * Clear collection\n     *\n     * @return $this\n     *\/",2257],["T_WHITESPACE","\n    ",2261],["T_PUBLIC","public",2262],["T_WHITESPACE"," ",2262],["T_FUNCTION","function",2262],["T_WHITESPACE"," ",2262],["T_STRING","clear",2262],"(",")",["T_WHITESPACE","\n    ",2262],"{",["T_WHITESPACE","\n        ",2263],["T_FOREACH","foreach",2264],["T_WHITESPACE"," ",2264],"(",["T_VARIABLE","$this",2264],["T_OBJECT_OPERATOR","->",2264],["T_STRING","_items",2264],["T_WHITESPACE"," ",2264],["T_AS","as",2264],["T_WHITESPACE"," ",2264],["T_VARIABLE","$i",2264],["T_WHITESPACE"," ",2264],["T_DOUBLE_ARROW","=>",2264],["T_WHITESPACE"," ",2264],["T_VARIABLE","$item",2264],")",["T_WHITESPACE"," ",2264],"{",["T_WHITESPACE","\n            ",2264],["T_IF","if",2265],["T_WHITESPACE"," ",2265],"(",["T_VARIABLE","$item",2265],["T_OBJECT_OPERATOR","->",2265],["T_STRING","hasStockItem",2265],"(",")",")",["T_WHITESPACE"," ",2265],"{",["T_WHITESPACE","\n                ",2265],["T_VARIABLE","$item",2266],["T_OBJECT_OPERATOR","->",2266],["T_STRING","unsStockItem",2266],"(",")",";",["T_WHITESPACE","\n            ",2266],"}",["T_WHITESPACE","\n            ",2267],["T_VARIABLE","$this",2268],["T_OBJECT_OPERATOR","->",2268],["T_STRING","_items",2268],"[",["T_VARIABLE","$i",2268],"]",["T_WHITESPACE"," ",2268],"=",["T_WHITESPACE"," ",2268],["T_STRING","null",2268],";",["T_WHITESPACE","\n        ",2268],"}",["T_WHITESPACE","\n\n        ",2269],["T_FOREACH","foreach",2271],["T_WHITESPACE"," ",2271],"(",["T_VARIABLE","$this",2271],["T_OBJECT_OPERATOR","->",2271],["T_STRING","_itemsById",2271],["T_WHITESPACE"," ",2271],["T_AS","as",2271],["T_WHITESPACE"," ",2271],["T_VARIABLE","$i",2271],["T_WHITESPACE"," ",2271],["T_DOUBLE_ARROW","=>",2271],["T_WHITESPACE"," ",2271],["T_VARIABLE","$item",2271],")",["T_WHITESPACE"," ",2271],"{",["T_WHITESPACE","\n            ",2271],["T_VARIABLE","$this",2272],["T_OBJECT_OPERATOR","->",2272],["T_STRING","_itemsById",2272],"[",["T_VARIABLE","$i",2272],"]",["T_WHITESPACE"," ",2272],"=",["T_WHITESPACE"," ",2272],["T_STRING","null",2272],";",["T_WHITESPACE","\n        ",2272],"}",["T_WHITESPACE","\n\n        ",2273],["T_UNSET","unset",2275],"(",["T_VARIABLE","$this",2275],["T_OBJECT_OPERATOR","->",2275],["T_STRING","_items",2275],",",["T_WHITESPACE"," ",2275],["T_VARIABLE","$this",2275],["T_OBJECT_OPERATOR","->",2275],["T_STRING","_data",2275],",",["T_WHITESPACE"," ",2275],["T_VARIABLE","$this",2275],["T_OBJECT_OPERATOR","->",2275],["T_STRING","_itemsById",2275],")",";",["T_WHITESPACE","\n        ",2275],["T_VARIABLE","$this",2276],["T_OBJECT_OPERATOR","->",2276],["T_STRING","_data",2276],["T_WHITESPACE"," ",2276],"=",["T_WHITESPACE"," ",2276],"[","]",";",["T_WHITESPACE","\n        ",2276],["T_RETURN","return",2277],["T_WHITESPACE"," ",2277],["T_STRING","parent",2277],["T_DOUBLE_COLON","::",2277],["T_STRING","clear",2277],"(",")",";",["T_WHITESPACE","\n    ",2277],"}",["T_WHITESPACE","\n\n    ",2278],["T_DOC_COMMENT","\/**\n     * Set Order field\n     *\n     * @param string $attribute\n     * @param string $dir\n     * @return $this\n     *\/",2280],["T_WHITESPACE","\n    ",2286],["T_PUBLIC","public",2287],["T_WHITESPACE"," ",2287],["T_FUNCTION","function",2287],["T_WHITESPACE"," ",2287],["T_STRING","setOrder",2287],"(",["T_VARIABLE","$attribute",2287],",",["T_WHITESPACE"," ",2287],["T_VARIABLE","$dir",2287],["T_WHITESPACE"," ",2287],"=",["T_WHITESPACE"," ",2287],["T_STRING","Select",2287],["T_DOUBLE_COLON","::",2287],["T_STRING","SQL_DESC",2287],")",["T_WHITESPACE","\n    ",2287],"{",["T_WHITESPACE","\n        ",2288],["T_IF","if",2289],["T_WHITESPACE"," ",2289],"(",["T_VARIABLE","$attribute",2289],["T_WHITESPACE"," ",2289],["T_IS_EQUAL","==",2289],["T_WHITESPACE"," ",2289],["T_CONSTANT_ENCAPSED_STRING","'price'",2289],")",["T_WHITESPACE"," ",2289],"{",["T_WHITESPACE","\n            ",2289],["T_VARIABLE","$this",2290],["T_OBJECT_OPERATOR","->",2290],["T_STRING","addAttributeToSort",2290],"(",["T_VARIABLE","$attribute",2290],",",["T_WHITESPACE"," ",2290],["T_VARIABLE","$dir",2290],")",";",["T_WHITESPACE","\n        ",2290],"}",["T_WHITESPACE"," ",2291],["T_ELSE","else",2291],["T_WHITESPACE"," ",2291],"{",["T_WHITESPACE","\n            ",2291],["T_STRING","parent",2292],["T_DOUBLE_COLON","::",2292],["T_STRING","setOrder",2292],"(",["T_VARIABLE","$attribute",2292],",",["T_WHITESPACE"," ",2292],["T_VARIABLE","$dir",2292],")",";",["T_WHITESPACE","\n        ",2292],"}",["T_WHITESPACE","\n        ",2293],["T_RETURN","return",2294],["T_WHITESPACE"," ",2294],["T_VARIABLE","$this",2294],";",["T_WHITESPACE","\n    ",2294],"}",["T_WHITESPACE","\n\n    ",2295],["T_DOC_COMMENT","\/**\n     * Get products max price\n     *\n     * @return float\n     *\/",2297],["T_WHITESPACE","\n    ",2301],["T_PUBLIC","public",2302],["T_WHITESPACE"," ",2302],["T_FUNCTION","function",2302],["T_WHITESPACE"," ",2302],["T_STRING","getMaxPrice",2302],"(",")",["T_WHITESPACE","\n    ",2302],"{",["T_WHITESPACE","\n        ",2303],["T_IF","if",2304],["T_WHITESPACE"," ",2304],"(",["T_STRING","is_null",2304],"(",["T_VARIABLE","$this",2304],["T_OBJECT_OPERATOR","->",2304],["T_STRING","_maxPrice",2304],")",")",["T_WHITESPACE"," ",2304],"{",["T_WHITESPACE","\n            ",2304],["T_VARIABLE","$this",2305],["T_OBJECT_OPERATOR","->",2305],["T_STRING","_prepareStatisticsData",2305],"(",")",";",["T_WHITESPACE","\n        ",2305],"}",["T_WHITESPACE","\n\n        ",2306],["T_RETURN","return",2308],["T_WHITESPACE"," ",2308],["T_VARIABLE","$this",2308],["T_OBJECT_OPERATOR","->",2308],["T_STRING","_maxPrice",2308],";",["T_WHITESPACE","\n    ",2308],"}",["T_WHITESPACE","\n\n    ",2309],["T_DOC_COMMENT","\/**\n     * Get products min price\n     *\n     * @return float\n     *\/",2311],["T_WHITESPACE","\n    ",2315],["T_PUBLIC","public",2316],["T_WHITESPACE"," ",2316],["T_FUNCTION","function",2316],["T_WHITESPACE"," ",2316],["T_STRING","getMinPrice",2316],"(",")",["T_WHITESPACE","\n    ",2316],"{",["T_WHITESPACE","\n        ",2317],["T_IF","if",2318],["T_WHITESPACE"," ",2318],"(",["T_STRING","is_null",2318],"(",["T_VARIABLE","$this",2318],["T_OBJECT_OPERATOR","->",2318],["T_STRING","_minPrice",2318],")",")",["T_WHITESPACE"," ",2318],"{",["T_WHITESPACE","\n            ",2318],["T_VARIABLE","$this",2319],["T_OBJECT_OPERATOR","->",2319],["T_STRING","_prepareStatisticsData",2319],"(",")",";",["T_WHITESPACE","\n        ",2319],"}",["T_WHITESPACE","\n\n        ",2320],["T_RETURN","return",2322],["T_WHITESPACE"," ",2322],["T_VARIABLE","$this",2322],["T_OBJECT_OPERATOR","->",2322],["T_STRING","_minPrice",2322],";",["T_WHITESPACE","\n    ",2322],"}",["T_WHITESPACE","\n\n    ",2323],["T_DOC_COMMENT","\/**\n     * Get standard deviation of products price\n     *\n     * @return float\n     *\/",2325],["T_WHITESPACE","\n    ",2329],["T_PUBLIC","public",2330],["T_WHITESPACE"," ",2330],["T_FUNCTION","function",2330],["T_WHITESPACE"," ",2330],["T_STRING","getPriceStandardDeviation",2330],"(",")",["T_WHITESPACE","\n    ",2330],"{",["T_WHITESPACE","\n        ",2331],["T_IF","if",2332],["T_WHITESPACE"," ",2332],"(",["T_STRING","is_null",2332],"(",["T_VARIABLE","$this",2332],["T_OBJECT_OPERATOR","->",2332],["T_STRING","_priceStandardDeviation",2332],")",")",["T_WHITESPACE"," ",2332],"{",["T_WHITESPACE","\n            ",2332],["T_VARIABLE","$this",2333],["T_OBJECT_OPERATOR","->",2333],["T_STRING","_prepareStatisticsData",2333],"(",")",";",["T_WHITESPACE","\n        ",2333],"}",["T_WHITESPACE","\n\n        ",2334],["T_RETURN","return",2336],["T_WHITESPACE"," ",2336],["T_VARIABLE","$this",2336],["T_OBJECT_OPERATOR","->",2336],["T_STRING","_priceStandardDeviation",2336],";",["T_WHITESPACE","\n    ",2336],"}",["T_WHITESPACE","\n\n    ",2337],["T_DOC_COMMENT","\/**\n     * Get count of product prices\n     *\n     * @return int\n     *\/",2339],["T_WHITESPACE","\n    ",2343],["T_PUBLIC","public",2344],["T_WHITESPACE"," ",2344],["T_FUNCTION","function",2344],["T_WHITESPACE"," ",2344],["T_STRING","getPricesCount",2344],"(",")",["T_WHITESPACE","\n    ",2344],"{",["T_WHITESPACE","\n        ",2345],["T_IF","if",2346],["T_WHITESPACE"," ",2346],"(",["T_STRING","is_null",2346],"(",["T_VARIABLE","$this",2346],["T_OBJECT_OPERATOR","->",2346],["T_STRING","_pricesCount",2346],")",")",["T_WHITESPACE"," ",2346],"{",["T_WHITESPACE","\n            ",2346],["T_VARIABLE","$this",2347],["T_OBJECT_OPERATOR","->",2347],["T_STRING","_prepareStatisticsData",2347],"(",")",";",["T_WHITESPACE","\n        ",2347],"}",["T_WHITESPACE","\n\n        ",2348],["T_RETURN","return",2350],["T_WHITESPACE"," ",2350],["T_VARIABLE","$this",2350],["T_OBJECT_OPERATOR","->",2350],["T_STRING","_pricesCount",2350],";",["T_WHITESPACE","\n    ",2350],"}",["T_WHITESPACE","\n",2351],"}",["T_WHITESPACE","\n",2352]]
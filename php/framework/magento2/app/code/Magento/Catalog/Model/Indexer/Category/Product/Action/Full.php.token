[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Copyright \u00c2\u00a9 2013-2017 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n *\/",2],["T_WHITESPACE","\n",5],["T_NAMESPACE","namespace",6],["T_WHITESPACE"," ",6],["T_STRING","Magento",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Catalog",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Model",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Indexer",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Category",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Product",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Action",6],";",["T_WHITESPACE","\n\n",6],["T_CLASS","class",8],["T_WHITESPACE"," ",8],["T_STRING","Full",8],["T_WHITESPACE"," ",8],["T_EXTENDS","extends",8],["T_WHITESPACE"," ",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Magento",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Catalog",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Model",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Indexer",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Category",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Product",8],["T_NS_SEPARATOR","\\",8],["T_STRING","AbstractAction",8],["T_WHITESPACE","\n",8],"{",["T_WHITESPACE","\n    ",9],["T_DOC_COMMENT","\/**\n     * Whether to use main or temporary index table\n     *\n     * @var bool\n     *\/",10],["T_WHITESPACE","\n    ",14],["T_PROTECTED","protected",15],["T_WHITESPACE"," ",15],["T_VARIABLE","$useTempTable",15],["T_WHITESPACE"," ",15],"=",["T_WHITESPACE"," ",15],["T_STRING","false",15],";",["T_WHITESPACE","\n\n    ",15],["T_DOC_COMMENT","\/**\n     * Refresh entities index\n     *\n     * @return $this\n     *\/",17],["T_WHITESPACE","\n    ",21],["T_PUBLIC","public",22],["T_WHITESPACE"," ",22],["T_FUNCTION","function",22],["T_WHITESPACE"," ",22],["T_STRING","execute",22],"(",")",["T_WHITESPACE","\n    ",22],"{",["T_WHITESPACE","\n        ",23],["T_VARIABLE","$this",24],["T_OBJECT_OPERATOR","->",24],["T_STRING","clearTmpData",24],"(",")",";",["T_WHITESPACE","\n\n        ",24],["T_VARIABLE","$this",26],["T_OBJECT_OPERATOR","->",26],["T_STRING","reindex",26],"(",")",";",["T_WHITESPACE","\n\n        ",26],["T_VARIABLE","$this",28],["T_OBJECT_OPERATOR","->",28],["T_STRING","publishData",28],"(",")",";",["T_WHITESPACE","\n        ",28],["T_VARIABLE","$this",29],["T_OBJECT_OPERATOR","->",29],["T_STRING","removeUnnecessaryData",29],"(",")",";",["T_WHITESPACE","\n\n        ",29],["T_RETURN","return",31],["T_WHITESPACE"," ",31],["T_VARIABLE","$this",31],";",["T_WHITESPACE","\n    ",31],"}",["T_WHITESPACE","\n\n    ",32],["T_DOC_COMMENT","\/**\n     * Return select for remove unnecessary data\n     *\n     * @return \\Magento\\Framework\\DB\\Select\n     *\/",34],["T_WHITESPACE","\n    ",38],["T_PROTECTED","protected",39],["T_WHITESPACE"," ",39],["T_FUNCTION","function",39],["T_WHITESPACE"," ",39],["T_STRING","getSelectUnnecessaryData",39],"(",")",["T_WHITESPACE","\n    ",39],"{",["T_WHITESPACE","\n        ",40],["T_RETURN","return",41],["T_WHITESPACE"," ",41],["T_VARIABLE","$this",41],["T_OBJECT_OPERATOR","->",41],["T_STRING","connection",41],["T_OBJECT_OPERATOR","->",41],["T_STRING","select",41],"(",")",["T_OBJECT_OPERATOR","->",41],["T_STRING","from",41],"(",["T_WHITESPACE","\n            ",41],["T_VARIABLE","$this",42],["T_OBJECT_OPERATOR","->",42],["T_STRING","getMainTable",42],"(",")",",",["T_WHITESPACE","\n            ",42],"[","]",["T_WHITESPACE","\n        ",43],")",["T_OBJECT_OPERATOR","->",44],["T_STRING","joinLeft",44],"(",["T_WHITESPACE","\n            ",44],"[",["T_CONSTANT_ENCAPSED_STRING","'t'",45],["T_WHITESPACE"," ",45],["T_DOUBLE_ARROW","=>",45],["T_WHITESPACE"," ",45],["T_VARIABLE","$this",45],["T_OBJECT_OPERATOR","->",45],["T_STRING","getMainTmpTable",45],"(",")","]",",",["T_WHITESPACE","\n            ",45],["T_VARIABLE","$this",46],["T_OBJECT_OPERATOR","->",46],["T_STRING","getMainTable",46],"(",")",["T_WHITESPACE"," ",46],".",["T_WHITESPACE","\n            ",46],["T_CONSTANT_ENCAPSED_STRING","'.category_id = t.category_id AND '",47],["T_WHITESPACE"," ",47],".",["T_WHITESPACE","\n            ",47],["T_VARIABLE","$this",48],["T_OBJECT_OPERATOR","->",48],["T_STRING","getMainTable",48],"(",")",["T_WHITESPACE"," ",48],".",["T_WHITESPACE","\n            ",48],["T_CONSTANT_ENCAPSED_STRING","'.store_id = t.store_id AND '",49],["T_WHITESPACE"," ",49],".",["T_WHITESPACE","\n            ",49],["T_VARIABLE","$this",50],["T_OBJECT_OPERATOR","->",50],["T_STRING","getMainTable",50],"(",")",["T_WHITESPACE"," ",50],".",["T_WHITESPACE","\n            ",50],["T_CONSTANT_ENCAPSED_STRING","'.product_id = t.product_id'",51],",",["T_WHITESPACE","\n            ",51],"[","]",["T_WHITESPACE","\n        ",52],")",["T_OBJECT_OPERATOR","->",53],["T_STRING","where",53],"(",["T_WHITESPACE","\n            ",53],["T_CONSTANT_ENCAPSED_STRING","'t.category_id IS NULL'",54],["T_WHITESPACE","\n        ",54],")",";",["T_WHITESPACE","\n    ",55],"}",["T_WHITESPACE","\n\n    ",56],["T_DOC_COMMENT","\/**\n     * Remove unnecessary data\n     *\n     * @return void\n     *\/",58],["T_WHITESPACE","\n    ",62],["T_PROTECTED","protected",63],["T_WHITESPACE"," ",63],["T_FUNCTION","function",63],["T_WHITESPACE"," ",63],["T_STRING","removeUnnecessaryData",63],"(",")",["T_WHITESPACE","\n    ",63],"{",["T_WHITESPACE","\n        ",64],["T_VARIABLE","$this",65],["T_OBJECT_OPERATOR","->",65],["T_STRING","connection",65],["T_OBJECT_OPERATOR","->",65],["T_STRING","query",65],"(",["T_WHITESPACE","\n            ",65],["T_VARIABLE","$this",66],["T_OBJECT_OPERATOR","->",66],["T_STRING","connection",66],["T_OBJECT_OPERATOR","->",66],["T_STRING","deleteFromSelect",66],"(",["T_VARIABLE","$this",66],["T_OBJECT_OPERATOR","->",66],["T_STRING","getSelectUnnecessaryData",66],"(",")",",",["T_WHITESPACE"," ",66],["T_VARIABLE","$this",66],["T_OBJECT_OPERATOR","->",66],["T_STRING","getMainTable",66],"(",")",")",["T_WHITESPACE","\n        ",66],")",";",["T_WHITESPACE","\n    ",67],"}",["T_WHITESPACE","\n\n    ",68],["T_DOC_COMMENT","\/**\n     * Publish data from tmp to index\n     *\n     * @return void\n     *\/",70],["T_WHITESPACE","\n    ",74],["T_PROTECTED","protected",75],["T_WHITESPACE"," ",75],["T_FUNCTION","function",75],["T_WHITESPACE"," ",75],["T_STRING","publishData",75],"(",")",["T_WHITESPACE","\n    ",75],"{",["T_WHITESPACE","\n        ",76],["T_VARIABLE","$select",77],["T_WHITESPACE"," ",77],"=",["T_WHITESPACE"," ",77],["T_VARIABLE","$this",77],["T_OBJECT_OPERATOR","->",77],["T_STRING","connection",77],["T_OBJECT_OPERATOR","->",77],["T_STRING","select",77],"(",")",["T_OBJECT_OPERATOR","->",77],["T_STRING","from",77],"(",["T_VARIABLE","$this",77],["T_OBJECT_OPERATOR","->",77],["T_STRING","getMainTmpTable",77],"(",")",")",";",["T_WHITESPACE","\n\n        ",77],["T_VARIABLE","$queries",79],["T_WHITESPACE"," ",79],"=",["T_WHITESPACE"," ",79],["T_VARIABLE","$this",79],["T_OBJECT_OPERATOR","->",79],["T_STRING","prepareSelectsByRange",79],"(",["T_VARIABLE","$select",79],",",["T_WHITESPACE"," ",79],["T_CONSTANT_ENCAPSED_STRING","'category_id'",79],")",";",["T_WHITESPACE","\n\n        ",79],["T_FOREACH","foreach",81],["T_WHITESPACE"," ",81],"(",["T_VARIABLE","$queries",81],["T_WHITESPACE"," ",81],["T_AS","as",81],["T_WHITESPACE"," ",81],["T_VARIABLE","$query",81],")",["T_WHITESPACE"," ",81],"{",["T_WHITESPACE","\n            ",81],["T_VARIABLE","$this",82],["T_OBJECT_OPERATOR","->",82],["T_STRING","connection",82],["T_OBJECT_OPERATOR","->",82],["T_STRING","query",82],"(",["T_WHITESPACE","\n                ",82],["T_VARIABLE","$this",83],["T_OBJECT_OPERATOR","->",83],["T_STRING","connection",83],["T_OBJECT_OPERATOR","->",83],["T_STRING","insertFromSelect",83],"(",["T_WHITESPACE","\n                    ",83],["T_VARIABLE","$query",84],",",["T_WHITESPACE","\n                    ",84],["T_VARIABLE","$this",85],["T_OBJECT_OPERATOR","->",85],["T_STRING","getMainTable",85],"(",")",",",["T_WHITESPACE","\n                    ",85],"[",["T_CONSTANT_ENCAPSED_STRING","'category_id'",86],",",["T_WHITESPACE"," ",86],["T_CONSTANT_ENCAPSED_STRING","'product_id'",86],",",["T_WHITESPACE"," ",86],["T_CONSTANT_ENCAPSED_STRING","'position'",86],",",["T_WHITESPACE"," ",86],["T_CONSTANT_ENCAPSED_STRING","'is_parent'",86],",",["T_WHITESPACE"," ",86],["T_CONSTANT_ENCAPSED_STRING","'store_id'",86],",",["T_WHITESPACE"," ",86],["T_CONSTANT_ENCAPSED_STRING","'visibility'",86],"]",",",["T_WHITESPACE","\n                    ",86],["T_NS_SEPARATOR","\\",87],["T_STRING","Magento",87],["T_NS_SEPARATOR","\\",87],["T_STRING","Framework",87],["T_NS_SEPARATOR","\\",87],["T_STRING","DB",87],["T_NS_SEPARATOR","\\",87],["T_STRING","Adapter",87],["T_NS_SEPARATOR","\\",87],["T_STRING","AdapterInterface",87],["T_DOUBLE_COLON","::",87],["T_STRING","INSERT_ON_DUPLICATE",87],["T_WHITESPACE","\n                ",87],")",["T_WHITESPACE","\n            ",88],")",";",["T_WHITESPACE","\n        ",89],"}",["T_WHITESPACE","\n    ",90],"}",["T_WHITESPACE","\n\n    ",91],["T_DOC_COMMENT","\/**\n     * Clear all index data\n     *\n     * @return void\n     *\/",93],["T_WHITESPACE","\n    ",97],["T_PROTECTED","protected",98],["T_WHITESPACE"," ",98],["T_FUNCTION","function",98],["T_WHITESPACE"," ",98],["T_STRING","clearTmpData",98],"(",")",["T_WHITESPACE","\n    ",98],"{",["T_WHITESPACE","\n        ",99],["T_VARIABLE","$this",100],["T_OBJECT_OPERATOR","->",100],["T_STRING","connection",100],["T_OBJECT_OPERATOR","->",100],["T_STRING","delete",100],"(",["T_VARIABLE","$this",100],["T_OBJECT_OPERATOR","->",100],["T_STRING","getMainTmpTable",100],"(",")",")",";",["T_WHITESPACE","\n    ",100],"}",["T_WHITESPACE","\n",101],"}",["T_WHITESPACE","\n",102]]
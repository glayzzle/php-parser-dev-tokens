[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Copyright \u00c2\u00a9 2013-2017 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n *\/",2],["T_WHITESPACE","\n",5],["T_NAMESPACE","namespace",6],["T_WHITESPACE"," ",6],["T_STRING","Magento",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Catalog",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Model",6],";",["T_WHITESPACE","\n\n",6],["T_DOC_COMMENT","\/**\n * Catalog Custom Category design Model\n *\n * @author     Magento Core Team <core@magentocommerce.com>\n *\/",8],["T_WHITESPACE","\n",12],["T_CLASS","class",13],["T_WHITESPACE"," ",13],["T_STRING","Design",13],["T_WHITESPACE"," ",13],["T_EXTENDS","extends",13],["T_WHITESPACE"," ",13],["T_NS_SEPARATOR","\\",13],["T_STRING","Magento",13],["T_NS_SEPARATOR","\\",13],["T_STRING","Framework",13],["T_NS_SEPARATOR","\\",13],["T_STRING","Model",13],["T_NS_SEPARATOR","\\",13],["T_STRING","AbstractModel",13],["T_WHITESPACE","\n",13],"{",["T_WHITESPACE","\n    ",14],["T_CONST","const",15],["T_WHITESPACE"," ",15],["T_STRING","APPLY_FOR_PRODUCT",15],["T_WHITESPACE"," ",15],"=",["T_WHITESPACE"," ",15],["T_LNUMBER","1",15],";",["T_WHITESPACE","\n\n    ",15],["T_CONST","const",17],["T_WHITESPACE"," ",17],["T_STRING","APPLY_FOR_CATEGORY",17],["T_WHITESPACE"," ",17],"=",["T_WHITESPACE"," ",17],["T_LNUMBER","2",17],";",["T_WHITESPACE","\n\n    ",17],["T_DOC_COMMENT","\/**\n     * Design package instance\n     *\n     * @var \\Magento\\Framework\\View\\DesignInterface\n     *\/",19],["T_WHITESPACE","\n    ",23],["T_PROTECTED","protected",24],["T_WHITESPACE"," ",24],["T_VARIABLE","$_design",24],["T_WHITESPACE"," ",24],"=",["T_WHITESPACE"," ",24],["T_STRING","null",24],";",["T_WHITESPACE","\n\n    ",24],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Framework\\Stdlib\\DateTime\\TimezoneInterface\n     *\/",26],["T_WHITESPACE","\n    ",28],["T_PROTECTED","protected",29],["T_WHITESPACE"," ",29],["T_VARIABLE","$_localeDate",29],";",["T_WHITESPACE","\n\n    ",29],["T_DOC_COMMENT","\/**\n     * @param \\Magento\\Framework\\Model\\Context $context\n     * @param \\Magento\\Framework\\Registry $registry\n     * @param \\Magento\\Framework\\Stdlib\\DateTime\\TimezoneInterface $localeDate\n     * @param \\Magento\\Framework\\View\\DesignInterface $design\n     * @param \\Magento\\Framework\\Model\\ResourceModel\\AbstractResource $resource\n     * @param \\Magento\\Framework\\Data\\Collection\\AbstractDb $resourceCollection\n     * @param array $data\n     *\/",31],["T_WHITESPACE","\n    ",39],["T_PUBLIC","public",40],["T_WHITESPACE"," ",40],["T_FUNCTION","function",40],["T_WHITESPACE"," ",40],["T_STRING","__construct",40],"(",["T_WHITESPACE","\n        ",40],["T_NS_SEPARATOR","\\",41],["T_STRING","Magento",41],["T_NS_SEPARATOR","\\",41],["T_STRING","Framework",41],["T_NS_SEPARATOR","\\",41],["T_STRING","Model",41],["T_NS_SEPARATOR","\\",41],["T_STRING","Context",41],["T_WHITESPACE"," ",41],["T_VARIABLE","$context",41],",",["T_WHITESPACE","\n        ",41],["T_NS_SEPARATOR","\\",42],["T_STRING","Magento",42],["T_NS_SEPARATOR","\\",42],["T_STRING","Framework",42],["T_NS_SEPARATOR","\\",42],["T_STRING","Registry",42],["T_WHITESPACE"," ",42],["T_VARIABLE","$registry",42],",",["T_WHITESPACE","\n        ",42],["T_NS_SEPARATOR","\\",43],["T_STRING","Magento",43],["T_NS_SEPARATOR","\\",43],["T_STRING","Framework",43],["T_NS_SEPARATOR","\\",43],["T_STRING","Stdlib",43],["T_NS_SEPARATOR","\\",43],["T_STRING","DateTime",43],["T_NS_SEPARATOR","\\",43],["T_STRING","TimezoneInterface",43],["T_WHITESPACE"," ",43],["T_VARIABLE","$localeDate",43],",",["T_WHITESPACE","\n        ",43],["T_NS_SEPARATOR","\\",44],["T_STRING","Magento",44],["T_NS_SEPARATOR","\\",44],["T_STRING","Framework",44],["T_NS_SEPARATOR","\\",44],["T_STRING","View",44],["T_NS_SEPARATOR","\\",44],["T_STRING","DesignInterface",44],["T_WHITESPACE"," ",44],["T_VARIABLE","$design",44],",",["T_WHITESPACE","\n        ",44],["T_NS_SEPARATOR","\\",45],["T_STRING","Magento",45],["T_NS_SEPARATOR","\\",45],["T_STRING","Framework",45],["T_NS_SEPARATOR","\\",45],["T_STRING","Model",45],["T_NS_SEPARATOR","\\",45],["T_STRING","ResourceModel",45],["T_NS_SEPARATOR","\\",45],["T_STRING","AbstractResource",45],["T_WHITESPACE"," ",45],["T_VARIABLE","$resource",45],["T_WHITESPACE"," ",45],"=",["T_WHITESPACE"," ",45],["T_STRING","null",45],",",["T_WHITESPACE","\n        ",45],["T_NS_SEPARATOR","\\",46],["T_STRING","Magento",46],["T_NS_SEPARATOR","\\",46],["T_STRING","Framework",46],["T_NS_SEPARATOR","\\",46],["T_STRING","Data",46],["T_NS_SEPARATOR","\\",46],["T_STRING","Collection",46],["T_NS_SEPARATOR","\\",46],["T_STRING","AbstractDb",46],["T_WHITESPACE"," ",46],["T_VARIABLE","$resourceCollection",46],["T_WHITESPACE"," ",46],"=",["T_WHITESPACE"," ",46],["T_STRING","null",46],",",["T_WHITESPACE","\n        ",46],["T_ARRAY","array",47],["T_WHITESPACE"," ",47],["T_VARIABLE","$data",47],["T_WHITESPACE"," ",47],"=",["T_WHITESPACE"," ",47],"[","]",["T_WHITESPACE","\n    ",47],")",["T_WHITESPACE"," ",48],"{",["T_WHITESPACE","\n        ",48],["T_VARIABLE","$this",49],["T_OBJECT_OPERATOR","->",49],["T_STRING","_localeDate",49],["T_WHITESPACE"," ",49],"=",["T_WHITESPACE"," ",49],["T_VARIABLE","$localeDate",49],";",["T_WHITESPACE","\n        ",49],["T_VARIABLE","$this",50],["T_OBJECT_OPERATOR","->",50],["T_STRING","_design",50],["T_WHITESPACE"," ",50],"=",["T_WHITESPACE"," ",50],["T_VARIABLE","$design",50],";",["T_WHITESPACE","\n        ",50],["T_STRING","parent",51],["T_DOUBLE_COLON","::",51],["T_STRING","__construct",51],"(",["T_VARIABLE","$context",51],",",["T_WHITESPACE"," ",51],["T_VARIABLE","$registry",51],",",["T_WHITESPACE"," ",51],["T_VARIABLE","$resource",51],",",["T_WHITESPACE"," ",51],["T_VARIABLE","$resourceCollection",51],",",["T_WHITESPACE"," ",51],["T_VARIABLE","$data",51],")",";",["T_WHITESPACE","\n    ",51],"}",["T_WHITESPACE","\n\n    ",52],["T_DOC_COMMENT","\/**\n     * Apply custom design\n     *\n     * @param string $design\n     * @return $this\n     *\/",54],["T_WHITESPACE","\n    ",59],["T_PUBLIC","public",60],["T_WHITESPACE"," ",60],["T_FUNCTION","function",60],["T_WHITESPACE"," ",60],["T_STRING","applyCustomDesign",60],"(",["T_VARIABLE","$design",60],")",["T_WHITESPACE","\n    ",60],"{",["T_WHITESPACE","\n        ",61],["T_VARIABLE","$this",62],["T_OBJECT_OPERATOR","->",62],["T_STRING","_design",62],["T_OBJECT_OPERATOR","->",62],["T_STRING","setDesignTheme",62],"(",["T_VARIABLE","$design",62],")",";",["T_WHITESPACE","\n        ",62],["T_RETURN","return",63],["T_WHITESPACE"," ",63],["T_VARIABLE","$this",63],";",["T_WHITESPACE","\n    ",63],"}",["T_WHITESPACE","\n\n    ",64],["T_DOC_COMMENT","\/**\n     * Get custom layout settings\n     *\n     * @param \\Magento\\Catalog\\Model\\Category|\\Magento\\Catalog\\Model\\Product $object\n     * @return \\Magento\\Framework\\DataObject\n     *\/",66],["T_WHITESPACE","\n    ",71],["T_PUBLIC","public",72],["T_WHITESPACE"," ",72],["T_FUNCTION","function",72],["T_WHITESPACE"," ",72],["T_STRING","getDesignSettings",72],"(",["T_VARIABLE","$object",72],")",["T_WHITESPACE","\n    ",72],"{",["T_WHITESPACE","\n        ",73],["T_IF","if",74],["T_WHITESPACE"," ",74],"(",["T_VARIABLE","$object",74],["T_WHITESPACE"," ",74],["T_INSTANCEOF","instanceof",74],["T_WHITESPACE"," ",74],["T_NS_SEPARATOR","\\",74],["T_STRING","Magento",74],["T_NS_SEPARATOR","\\",74],["T_STRING","Catalog",74],["T_NS_SEPARATOR","\\",74],["T_STRING","Model",74],["T_NS_SEPARATOR","\\",74],["T_STRING","Product",74],")",["T_WHITESPACE"," ",74],"{",["T_WHITESPACE","\n            ",74],["T_VARIABLE","$currentCategory",75],["T_WHITESPACE"," ",75],"=",["T_WHITESPACE"," ",75],["T_VARIABLE","$object",75],["T_OBJECT_OPERATOR","->",75],["T_STRING","getCategory",75],"(",")",";",["T_WHITESPACE","\n        ",75],"}",["T_WHITESPACE"," ",76],["T_ELSE","else",76],["T_WHITESPACE"," ",76],"{",["T_WHITESPACE","\n            ",76],["T_VARIABLE","$currentCategory",77],["T_WHITESPACE"," ",77],"=",["T_WHITESPACE"," ",77],["T_VARIABLE","$object",77],";",["T_WHITESPACE","\n        ",77],"}",["T_WHITESPACE","\n\n        ",78],["T_VARIABLE","$category",80],["T_WHITESPACE"," ",80],"=",["T_WHITESPACE"," ",80],["T_STRING","null",80],";",["T_WHITESPACE","\n        ",80],["T_IF","if",81],["T_WHITESPACE"," ",81],"(",["T_VARIABLE","$currentCategory",81],")",["T_WHITESPACE"," ",81],"{",["T_WHITESPACE","\n            ",81],["T_VARIABLE","$category",82],["T_WHITESPACE"," ",82],"=",["T_WHITESPACE"," ",82],["T_VARIABLE","$currentCategory",82],["T_OBJECT_OPERATOR","->",82],["T_STRING","getParentDesignCategory",82],"(",["T_VARIABLE","$currentCategory",82],")",";",["T_WHITESPACE","\n        ",82],"}",["T_WHITESPACE","\n\n        ",83],["T_IF","if",85],["T_WHITESPACE"," ",85],"(",["T_VARIABLE","$object",85],["T_WHITESPACE"," ",85],["T_INSTANCEOF","instanceof",85],["T_WHITESPACE"," ",85],["T_NS_SEPARATOR","\\",85],["T_STRING","Magento",85],["T_NS_SEPARATOR","\\",85],["T_STRING","Catalog",85],["T_NS_SEPARATOR","\\",85],["T_STRING","Model",85],["T_NS_SEPARATOR","\\",85],["T_STRING","Product",85],")",["T_WHITESPACE"," ",85],"{",["T_WHITESPACE","\n            ",85],["T_IF","if",86],["T_WHITESPACE"," ",86],"(",["T_VARIABLE","$category",86],["T_WHITESPACE"," ",86],["T_BOOLEAN_AND","&&",86],["T_WHITESPACE"," ",86],["T_VARIABLE","$category",86],["T_OBJECT_OPERATOR","->",86],["T_STRING","getCustomApplyToProducts",86],"(",")",")",["T_WHITESPACE"," ",86],"{",["T_WHITESPACE","\n                ",86],["T_RETURN","return",87],["T_WHITESPACE"," ",87],["T_VARIABLE","$this",87],["T_OBJECT_OPERATOR","->",87],["T_STRING","_mergeSettings",87],"(",["T_VARIABLE","$this",87],["T_OBJECT_OPERATOR","->",87],["T_STRING","_extractSettings",87],"(",["T_VARIABLE","$category",87],")",",",["T_WHITESPACE"," ",87],["T_VARIABLE","$this",87],["T_OBJECT_OPERATOR","->",87],["T_STRING","_extractSettings",87],"(",["T_VARIABLE","$object",87],")",")",";",["T_WHITESPACE","\n            ",87],"}",["T_WHITESPACE"," ",88],["T_ELSE","else",88],["T_WHITESPACE"," ",88],"{",["T_WHITESPACE","\n                ",88],["T_RETURN","return",89],["T_WHITESPACE"," ",89],["T_VARIABLE","$this",89],["T_OBJECT_OPERATOR","->",89],["T_STRING","_extractSettings",89],"(",["T_VARIABLE","$object",89],")",";",["T_WHITESPACE","\n            ",89],"}",["T_WHITESPACE","\n        ",90],"}",["T_WHITESPACE"," ",91],["T_ELSE","else",91],["T_WHITESPACE"," ",91],"{",["T_WHITESPACE","\n            ",91],["T_RETURN","return",92],["T_WHITESPACE"," ",92],["T_VARIABLE","$this",92],["T_OBJECT_OPERATOR","->",92],["T_STRING","_extractSettings",92],"(",["T_VARIABLE","$category",92],")",";",["T_WHITESPACE","\n        ",92],"}",["T_WHITESPACE","\n    ",93],"}",["T_WHITESPACE","\n\n    ",94],["T_DOC_COMMENT","\/**\n     * Extract custom layout settings from category or product object\n     *\n     * @param \\Magento\\Catalog\\Model\\Category|\\Magento\\Catalog\\Model\\Product $object\n     * @return \\Magento\\Framework\\DataObject\n     *\/",96],["T_WHITESPACE","\n    ",101],["T_PROTECTED","protected",102],["T_WHITESPACE"," ",102],["T_FUNCTION","function",102],["T_WHITESPACE"," ",102],["T_STRING","_extractSettings",102],"(",["T_VARIABLE","$object",102],")",["T_WHITESPACE","\n    ",102],"{",["T_WHITESPACE","\n        ",103],["T_VARIABLE","$settings",104],["T_WHITESPACE"," ",104],"=",["T_WHITESPACE"," ",104],["T_NEW","new",104],["T_WHITESPACE"," ",104],["T_NS_SEPARATOR","\\",104],["T_STRING","Magento",104],["T_NS_SEPARATOR","\\",104],["T_STRING","Framework",104],["T_NS_SEPARATOR","\\",104],["T_STRING","DataObject",104],"(",")",";",["T_WHITESPACE","\n        ",104],["T_IF","if",105],["T_WHITESPACE"," ",105],"(","!",["T_VARIABLE","$object",105],")",["T_WHITESPACE"," ",105],"{",["T_WHITESPACE","\n            ",105],["T_RETURN","return",106],["T_WHITESPACE"," ",106],["T_VARIABLE","$settings",106],";",["T_WHITESPACE","\n        ",106],"}",["T_WHITESPACE","\n        ",107],["T_VARIABLE","$date",108],["T_WHITESPACE"," ",108],"=",["T_WHITESPACE"," ",108],["T_VARIABLE","$object",108],["T_OBJECT_OPERATOR","->",108],["T_STRING","getCustomDesignDate",108],"(",")",";",["T_WHITESPACE","\n        ",108],["T_IF","if",109],["T_WHITESPACE"," ",109],"(",["T_STRING","array_key_exists",109],"(",["T_WHITESPACE","\n            ",109],["T_CONSTANT_ENCAPSED_STRING","'from'",110],",",["T_WHITESPACE","\n            ",110],["T_VARIABLE","$date",111],["T_WHITESPACE","\n        ",111],")",["T_WHITESPACE"," ",112],["T_BOOLEAN_AND","&&",112],["T_WHITESPACE"," ",112],["T_STRING","array_key_exists",112],"(",["T_WHITESPACE","\n            ",112],["T_CONSTANT_ENCAPSED_STRING","'to'",113],",",["T_WHITESPACE","\n            ",113],["T_VARIABLE","$date",114],["T_WHITESPACE","\n        ",114],")",["T_WHITESPACE"," ",115],["T_BOOLEAN_AND","&&",115],["T_WHITESPACE"," ",115],["T_VARIABLE","$this",115],["T_OBJECT_OPERATOR","->",115],["T_STRING","_localeDate",115],["T_OBJECT_OPERATOR","->",115],["T_STRING","isScopeDateInInterval",115],"(",["T_WHITESPACE","\n            ",115],["T_STRING","null",116],",",["T_WHITESPACE","\n            ",116],["T_VARIABLE","$date",117],"[",["T_CONSTANT_ENCAPSED_STRING","'from'",117],"]",",",["T_WHITESPACE","\n            ",117],["T_VARIABLE","$date",118],"[",["T_CONSTANT_ENCAPSED_STRING","'to'",118],"]",["T_WHITESPACE","\n        ",118],")",["T_WHITESPACE","\n        ",119],")",["T_WHITESPACE"," ",120],"{",["T_WHITESPACE","\n            ",120],["T_VARIABLE","$settings",121],["T_OBJECT_OPERATOR","->",121],["T_STRING","setCustomDesign",121],"(",["T_WHITESPACE","\n                ",121],["T_VARIABLE","$object",122],["T_OBJECT_OPERATOR","->",122],["T_STRING","getCustomDesign",122],"(",")",["T_WHITESPACE","\n            ",122],")",["T_OBJECT_OPERATOR","->",123],["T_STRING","setPageLayout",123],"(",["T_WHITESPACE","\n                ",123],["T_VARIABLE","$object",124],["T_OBJECT_OPERATOR","->",124],["T_STRING","getPageLayout",124],"(",")",["T_WHITESPACE","\n            ",124],")",["T_OBJECT_OPERATOR","->",125],["T_STRING","setLayoutUpdates",125],"(",["T_WHITESPACE","\n                ",125],["T_ARRAY_CAST","(array)",126],["T_VARIABLE","$object",126],["T_OBJECT_OPERATOR","->",126],["T_STRING","getCustomLayoutUpdate",126],"(",")",["T_WHITESPACE","\n            ",126],")",";",["T_WHITESPACE","\n        ",127],"}",["T_WHITESPACE","\n        ",128],["T_RETURN","return",129],["T_WHITESPACE"," ",129],["T_VARIABLE","$settings",129],";",["T_WHITESPACE","\n    ",129],"}",["T_WHITESPACE","\n\n    ",130],["T_DOC_COMMENT","\/**\n     * Merge custom design settings\n     *\n     * @param \\Magento\\Framework\\DataObject $categorySettings\n     * @param \\Magento\\Framework\\DataObject $productSettings\n     * @return \\Magento\\Framework\\DataObject\n     *\/",132],["T_WHITESPACE","\n    ",138],["T_PROTECTED","protected",139],["T_WHITESPACE"," ",139],["T_FUNCTION","function",139],["T_WHITESPACE"," ",139],["T_STRING","_mergeSettings",139],"(",["T_VARIABLE","$categorySettings",139],",",["T_WHITESPACE"," ",139],["T_VARIABLE","$productSettings",139],")",["T_WHITESPACE","\n    ",139],"{",["T_WHITESPACE","\n        ",140],["T_IF","if",141],["T_WHITESPACE"," ",141],"(",["T_VARIABLE","$productSettings",141],["T_OBJECT_OPERATOR","->",141],["T_STRING","getCustomDesign",141],"(",")",")",["T_WHITESPACE"," ",141],"{",["T_WHITESPACE","\n            ",141],["T_VARIABLE","$categorySettings",142],["T_OBJECT_OPERATOR","->",142],["T_STRING","setCustomDesign",142],"(",["T_VARIABLE","$productSettings",142],["T_OBJECT_OPERATOR","->",142],["T_STRING","getCustomDesign",142],"(",")",")",";",["T_WHITESPACE","\n        ",142],"}",["T_WHITESPACE","\n        ",143],["T_IF","if",144],["T_WHITESPACE"," ",144],"(",["T_VARIABLE","$productSettings",144],["T_OBJECT_OPERATOR","->",144],["T_STRING","getPageLayout",144],"(",")",")",["T_WHITESPACE"," ",144],"{",["T_WHITESPACE","\n            ",144],["T_VARIABLE","$categorySettings",145],["T_OBJECT_OPERATOR","->",145],["T_STRING","setPageLayout",145],"(",["T_VARIABLE","$productSettings",145],["T_OBJECT_OPERATOR","->",145],["T_STRING","getPageLayout",145],"(",")",")",";",["T_WHITESPACE","\n        ",145],"}",["T_WHITESPACE","\n        ",146],["T_IF","if",147],["T_WHITESPACE"," ",147],"(",["T_VARIABLE","$productSettings",147],["T_OBJECT_OPERATOR","->",147],["T_STRING","getLayoutUpdates",147],"(",")",")",["T_WHITESPACE"," ",147],"{",["T_WHITESPACE","\n            ",147],["T_VARIABLE","$update",148],["T_WHITESPACE"," ",148],"=",["T_WHITESPACE"," ",148],["T_STRING","array_merge",148],"(",["T_VARIABLE","$categorySettings",148],["T_OBJECT_OPERATOR","->",148],["T_STRING","getLayoutUpdates",148],"(",")",",",["T_WHITESPACE"," ",148],["T_VARIABLE","$productSettings",148],["T_OBJECT_OPERATOR","->",148],["T_STRING","getLayoutUpdates",148],"(",")",")",";",["T_WHITESPACE","\n            ",148],["T_VARIABLE","$categorySettings",149],["T_OBJECT_OPERATOR","->",149],["T_STRING","setLayoutUpdates",149],"(",["T_VARIABLE","$update",149],")",";",["T_WHITESPACE","\n        ",149],"}",["T_WHITESPACE","\n        ",150],["T_RETURN","return",151],["T_WHITESPACE"," ",151],["T_VARIABLE","$categorySettings",151],";",["T_WHITESPACE","\n    ",151],"}",["T_WHITESPACE","\n",152],"}",["T_WHITESPACE","\n",153]]
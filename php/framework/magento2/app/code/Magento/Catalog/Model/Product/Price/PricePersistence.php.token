[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Copyright \u00c2\u00a9 2013-2017 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n *\/",2],["T_WHITESPACE","\n\n",5],["T_NAMESPACE","namespace",7],["T_WHITESPACE"," ",7],["T_STRING","Magento",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Catalog",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Model",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Product",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Price",7],";",["T_WHITESPACE","\n\n",7],["T_DOC_COMMENT","\/**\n * Price persistence.\n *\/",9],["T_WHITESPACE","\n",11],["T_CLASS","class",12],["T_WHITESPACE"," ",12],["T_STRING","PricePersistence",12],["T_WHITESPACE","\n",12],"{",["T_WHITESPACE","\n    ",13],["T_DOC_COMMENT","\/**\n     * Price storage table.\n     *\n     * @var string\n     *\/",14],["T_WHITESPACE","\n    ",18],["T_PRIVATE","private",19],["T_WHITESPACE"," ",19],["T_VARIABLE","$table",19],["T_WHITESPACE"," ",19],"=",["T_WHITESPACE"," ",19],["T_CONSTANT_ENCAPSED_STRING","'catalog_product_entity_decimal'",19],";",["T_WHITESPACE","\n\n    ",19],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Catalog\\Model\\ResourceModel\\Attribute\n     *\/",21],["T_WHITESPACE","\n    ",23],["T_PRIVATE","private",24],["T_WHITESPACE"," ",24],["T_VARIABLE","$attributeResource",24],";",["T_WHITESPACE","\n\n    ",24],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Catalog\\Api\\ProductAttributeRepositoryInterface\n     *\/",26],["T_WHITESPACE","\n    ",28],["T_PRIVATE","private",29],["T_WHITESPACE"," ",29],["T_VARIABLE","$attributeRepository",29],";",["T_WHITESPACE","\n\n    ",29],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Catalog\\Model\\ProductIdLocatorInterface\n     *\/",31],["T_WHITESPACE","\n    ",33],["T_PRIVATE","private",34],["T_WHITESPACE"," ",34],["T_VARIABLE","$productIdLocator",34],";",["T_WHITESPACE","\n\n    ",34],["T_DOC_COMMENT","\/**\n     * Metadata pool.\n     *\n     * @var \\Magento\\Framework\\EntityManager\\MetadataPool\n     *\/",36],["T_WHITESPACE","\n    ",40],["T_PRIVATE","private",41],["T_WHITESPACE"," ",41],["T_VARIABLE","$metadataPool",41],";",["T_WHITESPACE","\n\n    ",41],["T_DOC_COMMENT","\/**\n     * Attribute code.\n     *\n     * @var string\n     *\/",43],["T_WHITESPACE","\n    ",47],["T_PRIVATE","private",48],["T_WHITESPACE"," ",48],["T_VARIABLE","$attributeCode",48],";",["T_WHITESPACE","\n\n    ",48],["T_DOC_COMMENT","\/**\n     * Attribute ID.\n     *\n     * @var int\n     *\/",50],["T_WHITESPACE","\n    ",54],["T_PRIVATE","private",55],["T_WHITESPACE"," ",55],["T_VARIABLE","$attributeId",55],";",["T_WHITESPACE","\n\n    ",55],["T_DOC_COMMENT","\/**\n     * Items per operation.\n     *\n     * @var int\n     *\/",57],["T_WHITESPACE","\n    ",61],["T_PRIVATE","private",62],["T_WHITESPACE"," ",62],["T_VARIABLE","$itemsPerOperation",62],["T_WHITESPACE"," ",62],"=",["T_WHITESPACE"," ",62],["T_LNUMBER","500",62],";",["T_WHITESPACE","\n\n    ",62],["T_DOC_COMMENT","\/**\n     * PricePersistence constructor.\n     *\n     * @param \\Magento\\Catalog\\Model\\ResourceModel\\Attribute $attributeResource\n     * @param \\Magento\\Catalog\\Api\\ProductAttributeRepositoryInterface $attributeRepository\n     * @param \\Magento\\Catalog\\Model\\ProductIdLocatorInterface $productIdLocator\n     * @param \\Magento\\Framework\\EntityManager\\MetadataPool $metadataPool\n     * @param string $attributeCode\n     *\/",64],["T_WHITESPACE","\n    ",72],["T_PUBLIC","public",73],["T_WHITESPACE"," ",73],["T_FUNCTION","function",73],["T_WHITESPACE"," ",73],["T_STRING","__construct",73],"(",["T_WHITESPACE","\n        ",73],["T_NS_SEPARATOR","\\",74],["T_STRING","Magento",74],["T_NS_SEPARATOR","\\",74],["T_STRING","Catalog",74],["T_NS_SEPARATOR","\\",74],["T_STRING","Model",74],["T_NS_SEPARATOR","\\",74],["T_STRING","ResourceModel",74],["T_NS_SEPARATOR","\\",74],["T_STRING","Attribute",74],["T_WHITESPACE"," ",74],["T_VARIABLE","$attributeResource",74],",",["T_WHITESPACE","\n        ",74],["T_NS_SEPARATOR","\\",75],["T_STRING","Magento",75],["T_NS_SEPARATOR","\\",75],["T_STRING","Catalog",75],["T_NS_SEPARATOR","\\",75],["T_STRING","Api",75],["T_NS_SEPARATOR","\\",75],["T_STRING","ProductAttributeRepositoryInterface",75],["T_WHITESPACE"," ",75],["T_VARIABLE","$attributeRepository",75],",",["T_WHITESPACE","\n        ",75],["T_NS_SEPARATOR","\\",76],["T_STRING","Magento",76],["T_NS_SEPARATOR","\\",76],["T_STRING","Catalog",76],["T_NS_SEPARATOR","\\",76],["T_STRING","Model",76],["T_NS_SEPARATOR","\\",76],["T_STRING","ProductIdLocatorInterface",76],["T_WHITESPACE"," ",76],["T_VARIABLE","$productIdLocator",76],",",["T_WHITESPACE","\n        ",76],["T_NS_SEPARATOR","\\",77],["T_STRING","Magento",77],["T_NS_SEPARATOR","\\",77],["T_STRING","Framework",77],["T_NS_SEPARATOR","\\",77],["T_STRING","EntityManager",77],["T_NS_SEPARATOR","\\",77],["T_STRING","MetadataPool",77],["T_WHITESPACE"," ",77],["T_VARIABLE","$metadataPool",77],",",["T_WHITESPACE","\n        ",77],["T_VARIABLE","$attributeCode",78],["T_WHITESPACE"," ",78],"=",["T_WHITESPACE"," ",78],["T_CONSTANT_ENCAPSED_STRING","''",78],["T_WHITESPACE","\n    ",78],")",["T_WHITESPACE"," ",79],"{",["T_WHITESPACE","\n        ",79],["T_VARIABLE","$this",80],["T_OBJECT_OPERATOR","->",80],["T_STRING","attributeResource",80],["T_WHITESPACE"," ",80],"=",["T_WHITESPACE"," ",80],["T_VARIABLE","$attributeResource",80],";",["T_WHITESPACE","\n        ",80],["T_VARIABLE","$this",81],["T_OBJECT_OPERATOR","->",81],["T_STRING","attributeRepository",81],["T_WHITESPACE"," ",81],"=",["T_WHITESPACE"," ",81],["T_VARIABLE","$attributeRepository",81],";",["T_WHITESPACE","\n        ",81],["T_VARIABLE","$this",82],["T_OBJECT_OPERATOR","->",82],["T_STRING","attributeCode",82],["T_WHITESPACE"," ",82],"=",["T_WHITESPACE"," ",82],["T_VARIABLE","$attributeCode",82],";",["T_WHITESPACE","\n        ",82],["T_VARIABLE","$this",83],["T_OBJECT_OPERATOR","->",83],["T_STRING","productIdLocator",83],["T_WHITESPACE"," ",83],"=",["T_WHITESPACE"," ",83],["T_VARIABLE","$productIdLocator",83],";",["T_WHITESPACE","\n        ",83],["T_VARIABLE","$this",84],["T_OBJECT_OPERATOR","->",84],["T_STRING","metadataPool",84],["T_WHITESPACE"," ",84],"=",["T_WHITESPACE"," ",84],["T_VARIABLE","$metadataPool",84],";",["T_WHITESPACE","\n    ",84],"}",["T_WHITESPACE","\n\n    ",85],["T_DOC_COMMENT","\/**\n     * Get prices by SKUs.\n     *\n     * @param array $skus\n     * @return array\n     *\/",87],["T_WHITESPACE","\n    ",92],["T_PUBLIC","public",93],["T_WHITESPACE"," ",93],["T_FUNCTION","function",93],["T_WHITESPACE"," ",93],["T_STRING","get",93],"(",["T_ARRAY","array",93],["T_WHITESPACE"," ",93],["T_VARIABLE","$skus",93],")",["T_WHITESPACE","\n    ",93],"{",["T_WHITESPACE","\n        ",94],["T_VARIABLE","$ids",95],["T_WHITESPACE"," ",95],"=",["T_WHITESPACE"," ",95],["T_VARIABLE","$this",95],["T_OBJECT_OPERATOR","->",95],["T_STRING","retrieveAffectedIds",95],"(",["T_VARIABLE","$skus",95],")",";",["T_WHITESPACE","\n        ",95],["T_VARIABLE","$select",96],["T_WHITESPACE"," ",96],"=",["T_WHITESPACE"," ",96],["T_VARIABLE","$this",96],["T_OBJECT_OPERATOR","->",96],["T_STRING","attributeResource",96],["T_OBJECT_OPERATOR","->",96],["T_STRING","getConnection",96],"(",")",["T_WHITESPACE","\n            ",96],["T_OBJECT_OPERATOR","->",97],["T_STRING","select",97],"(",")",["T_WHITESPACE","\n            ",97],["T_OBJECT_OPERATOR","->",98],["T_STRING","from",98],"(",["T_VARIABLE","$this",98],["T_OBJECT_OPERATOR","->",98],["T_STRING","attributeResource",98],["T_OBJECT_OPERATOR","->",98],["T_STRING","getTable",98],"(",["T_VARIABLE","$this",98],["T_OBJECT_OPERATOR","->",98],["T_STRING","table",98],")",")",";",["T_WHITESPACE","\n        ",98],["T_RETURN","return",99],["T_WHITESPACE"," ",99],["T_VARIABLE","$this",99],["T_OBJECT_OPERATOR","->",99],["T_STRING","attributeResource",99],["T_OBJECT_OPERATOR","->",99],["T_STRING","getConnection",99],"(",")",["T_OBJECT_OPERATOR","->",99],["T_STRING","fetchAll",99],"(",["T_WHITESPACE","\n            ",99],["T_VARIABLE","$select",100],["T_OBJECT_OPERATOR","->",100],["T_STRING","where",100],"(",["T_VARIABLE","$this",100],["T_OBJECT_OPERATOR","->",100],["T_STRING","getEntityLinkField",100],"(",")",["T_WHITESPACE"," ",100],".",["T_WHITESPACE"," ",100],["T_CONSTANT_ENCAPSED_STRING","' IN (?)'",100],",",["T_WHITESPACE"," ",100],["T_VARIABLE","$ids",100],")",["T_WHITESPACE","\n                ",100],["T_OBJECT_OPERATOR","->",101],["T_STRING","where",101],"(",["T_CONSTANT_ENCAPSED_STRING","'attribute_id = ?'",101],",",["T_WHITESPACE"," ",101],["T_VARIABLE","$this",101],["T_OBJECT_OPERATOR","->",101],["T_STRING","getAttributeId",101],"(",")",")",["T_WHITESPACE","\n        ",101],")",";",["T_WHITESPACE","\n    ",102],"}",["T_WHITESPACE","\n\n    ",103],["T_DOC_COMMENT","\/**\n     * Update prices.\n     *\n     * @param array $prices\n     * @return void\n     * @throws \\Magento\\Framework\\Exception\\CouldNotSaveException\n     *\/",105],["T_WHITESPACE","\n    ",111],["T_PUBLIC","public",112],["T_WHITESPACE"," ",112],["T_FUNCTION","function",112],["T_WHITESPACE"," ",112],["T_STRING","update",112],"(",["T_ARRAY","array",112],["T_WHITESPACE"," ",112],["T_VARIABLE","$prices",112],")",["T_WHITESPACE","\n    ",112],"{",["T_WHITESPACE","\n        ",113],["T_STRING","array_walk",114],"(",["T_VARIABLE","$prices",114],",",["T_WHITESPACE"," ",114],["T_FUNCTION","function",114],["T_WHITESPACE"," ",114],"(","&",["T_VARIABLE","$price",114],")",["T_WHITESPACE"," ",114],"{",["T_WHITESPACE","\n            ",114],["T_RETURN","return",115],["T_WHITESPACE"," ",115],["T_VARIABLE","$price",115],"[",["T_CONSTANT_ENCAPSED_STRING","'attribute_id'",115],"]",["T_WHITESPACE"," ",115],"=",["T_WHITESPACE"," ",115],["T_VARIABLE","$this",115],["T_OBJECT_OPERATOR","->",115],["T_STRING","getAttributeId",115],"(",")",";",["T_WHITESPACE","\n        ",115],"}",")",";",["T_WHITESPACE","\n        ",116],["T_VARIABLE","$connection",117],["T_WHITESPACE"," ",117],"=",["T_WHITESPACE"," ",117],["T_VARIABLE","$this",117],["T_OBJECT_OPERATOR","->",117],["T_STRING","attributeResource",117],["T_OBJECT_OPERATOR","->",117],["T_STRING","getConnection",117],"(",")",";",["T_WHITESPACE","\n        ",117],["T_VARIABLE","$connection",118],["T_OBJECT_OPERATOR","->",118],["T_STRING","beginTransaction",118],"(",")",";",["T_WHITESPACE","\n        ",118],["T_TRY","try",119],["T_WHITESPACE"," ",119],"{",["T_WHITESPACE","\n            ",119],["T_FOREACH","foreach",120],["T_WHITESPACE"," ",120],"(",["T_STRING","array_chunk",120],"(",["T_VARIABLE","$prices",120],",",["T_WHITESPACE"," ",120],["T_VARIABLE","$this",120],["T_OBJECT_OPERATOR","->",120],["T_STRING","itemsPerOperation",120],")",["T_WHITESPACE"," ",120],["T_AS","as",120],["T_WHITESPACE"," ",120],["T_VARIABLE","$pricesBunch",120],")",["T_WHITESPACE"," ",120],"{",["T_WHITESPACE","\n                ",120],["T_VARIABLE","$this",121],["T_OBJECT_OPERATOR","->",121],["T_STRING","attributeResource",121],["T_OBJECT_OPERATOR","->",121],["T_STRING","getConnection",121],"(",")",["T_OBJECT_OPERATOR","->",121],["T_STRING","insertOnDuplicate",121],"(",["T_WHITESPACE","\n                    ",121],["T_VARIABLE","$this",122],["T_OBJECT_OPERATOR","->",122],["T_STRING","attributeResource",122],["T_OBJECT_OPERATOR","->",122],["T_STRING","getTable",122],"(",["T_VARIABLE","$this",122],["T_OBJECT_OPERATOR","->",122],["T_STRING","table",122],")",",",["T_WHITESPACE","\n                    ",122],["T_VARIABLE","$pricesBunch",123],",",["T_WHITESPACE","\n                    ",123],"[",["T_CONSTANT_ENCAPSED_STRING","'value'",124],"]",["T_WHITESPACE","\n                ",124],")",";",["T_WHITESPACE","\n            ",125],"}",["T_WHITESPACE","\n            ",126],["T_VARIABLE","$connection",127],["T_OBJECT_OPERATOR","->",127],["T_STRING","commit",127],"(",")",";",["T_WHITESPACE","\n        ",127],"}",["T_WHITESPACE"," ",128],["T_CATCH","catch",128],["T_WHITESPACE"," ",128],"(",["T_NS_SEPARATOR","\\",128],["T_STRING","Exception",128],["T_WHITESPACE"," ",128],["T_VARIABLE","$e",128],")",["T_WHITESPACE"," ",128],"{",["T_WHITESPACE","\n            ",128],["T_VARIABLE","$connection",129],["T_OBJECT_OPERATOR","->",129],["T_STRING","rollBack",129],"(",")",";",["T_WHITESPACE","\n            ",129],["T_THROW","throw",130],["T_WHITESPACE"," ",130],["T_NEW","new",130],["T_WHITESPACE"," ",130],["T_NS_SEPARATOR","\\",130],["T_STRING","Magento",130],["T_NS_SEPARATOR","\\",130],["T_STRING","Framework",130],["T_NS_SEPARATOR","\\",130],["T_STRING","Exception",130],["T_NS_SEPARATOR","\\",130],["T_STRING","CouldNotSaveException",130],"(",["T_WHITESPACE","\n                ",130],["T_STRING","__",131],"(",["T_CONSTANT_ENCAPSED_STRING","'Could not save Prices.'",131],")",",",["T_WHITESPACE","\n                ",131],["T_VARIABLE","$e",132],["T_WHITESPACE","\n            ",132],")",";",["T_WHITESPACE","\n        ",133],"}",["T_WHITESPACE","\n    ",134],"}",["T_WHITESPACE","\n\n    ",135],["T_DOC_COMMENT","\/**\n     * Delete product attribute by SKU.\n     *\n     * @param array $skus\n     * @return void\n     * @throws \\Magento\\Framework\\Exception\\CouldNotDeleteException\n     *\/",137],["T_WHITESPACE","\n    ",143],["T_PUBLIC","public",144],["T_WHITESPACE"," ",144],["T_FUNCTION","function",144],["T_WHITESPACE"," ",144],["T_STRING","delete",144],"(",["T_ARRAY","array",144],["T_WHITESPACE"," ",144],["T_VARIABLE","$skus",144],")",["T_WHITESPACE","\n    ",144],"{",["T_WHITESPACE","\n        ",145],["T_VARIABLE","$ids",146],["T_WHITESPACE"," ",146],"=",["T_WHITESPACE"," ",146],["T_VARIABLE","$this",146],["T_OBJECT_OPERATOR","->",146],["T_STRING","retrieveAffectedIds",146],"(",["T_VARIABLE","$skus",146],")",";",["T_WHITESPACE","\n        ",146],["T_VARIABLE","$connection",147],["T_WHITESPACE"," ",147],"=",["T_WHITESPACE"," ",147],["T_VARIABLE","$this",147],["T_OBJECT_OPERATOR","->",147],["T_STRING","attributeResource",147],["T_OBJECT_OPERATOR","->",147],["T_STRING","getConnection",147],"(",")",";",["T_WHITESPACE","\n        ",147],["T_VARIABLE","$connection",148],["T_OBJECT_OPERATOR","->",148],["T_STRING","beginTransaction",148],"(",")",";",["T_WHITESPACE","\n        ",148],["T_TRY","try",149],["T_WHITESPACE"," ",149],"{",["T_WHITESPACE","\n            ",149],["T_FOREACH","foreach",150],["T_WHITESPACE"," ",150],"(",["T_STRING","array_chunk",150],"(",["T_VARIABLE","$ids",150],",",["T_WHITESPACE"," ",150],["T_VARIABLE","$this",150],["T_OBJECT_OPERATOR","->",150],["T_STRING","itemsPerOperation",150],")",["T_WHITESPACE"," ",150],["T_AS","as",150],["T_WHITESPACE"," ",150],["T_VARIABLE","$idsBunch",150],")",["T_WHITESPACE"," ",150],"{",["T_WHITESPACE","\n                ",150],["T_VARIABLE","$this",151],["T_OBJECT_OPERATOR","->",151],["T_STRING","attributeResource",151],["T_OBJECT_OPERATOR","->",151],["T_STRING","getConnection",151],"(",")",["T_OBJECT_OPERATOR","->",151],["T_STRING","delete",151],"(",["T_WHITESPACE","\n                    ",151],["T_VARIABLE","$this",152],["T_OBJECT_OPERATOR","->",152],["T_STRING","attributeResource",152],["T_OBJECT_OPERATOR","->",152],["T_STRING","getTable",152],"(",["T_VARIABLE","$this",152],["T_OBJECT_OPERATOR","->",152],["T_STRING","table",152],")",",",["T_WHITESPACE","\n                    ",152],"[",["T_WHITESPACE","\n                        ",153],["T_CONSTANT_ENCAPSED_STRING","'attribute_id = ?'",154],["T_WHITESPACE"," ",154],["T_DOUBLE_ARROW","=>",154],["T_WHITESPACE"," ",154],["T_VARIABLE","$this",154],["T_OBJECT_OPERATOR","->",154],["T_STRING","getAttributeId",154],"(",")",",",["T_WHITESPACE","\n                        ",154],["T_VARIABLE","$this",155],["T_OBJECT_OPERATOR","->",155],["T_STRING","getEntityLinkField",155],"(",")",["T_WHITESPACE"," ",155],".",["T_WHITESPACE"," ",155],["T_CONSTANT_ENCAPSED_STRING","' IN (?)'",155],["T_WHITESPACE"," ",155],["T_DOUBLE_ARROW","=>",155],["T_WHITESPACE"," ",155],["T_VARIABLE","$idsBunch",155],["T_WHITESPACE","\n                    ",155],"]",["T_WHITESPACE","\n                ",156],")",";",["T_WHITESPACE","\n            ",157],"}",["T_WHITESPACE","\n            ",158],["T_VARIABLE","$connection",159],["T_OBJECT_OPERATOR","->",159],["T_STRING","commit",159],"(",")",";",["T_WHITESPACE","\n        ",159],"}",["T_WHITESPACE"," ",160],["T_CATCH","catch",160],["T_WHITESPACE"," ",160],"(",["T_NS_SEPARATOR","\\",160],["T_STRING","Exception",160],["T_WHITESPACE"," ",160],["T_VARIABLE","$e",160],")",["T_WHITESPACE"," ",160],"{",["T_WHITESPACE","\n            ",160],["T_VARIABLE","$connection",161],["T_OBJECT_OPERATOR","->",161],["T_STRING","rollBack",161],"(",")",";",["T_WHITESPACE","\n            ",161],["T_THROW","throw",162],["T_WHITESPACE"," ",162],["T_NEW","new",162],["T_WHITESPACE"," ",162],["T_NS_SEPARATOR","\\",162],["T_STRING","Magento",162],["T_NS_SEPARATOR","\\",162],["T_STRING","Framework",162],["T_NS_SEPARATOR","\\",162],["T_STRING","Exception",162],["T_NS_SEPARATOR","\\",162],["T_STRING","CouldNotDeleteException",162],"(",["T_WHITESPACE","\n                ",162],["T_STRING","__",163],"(",["T_CONSTANT_ENCAPSED_STRING","'Could not delete Prices'",163],")",",",["T_WHITESPACE","\n                ",163],["T_VARIABLE","$e",164],["T_WHITESPACE","\n            ",164],")",";",["T_WHITESPACE","\n        ",165],"}",["T_WHITESPACE","\n    ",166],"}",["T_WHITESPACE","\n\n    ",167],["T_DOC_COMMENT","\/**\n     * Retrieve SKU by product ID.\n     *\n     * @param int $id\n     * @param array $skus\n     * @return int|null\n     *\/",169],["T_WHITESPACE","\n    ",175],["T_PUBLIC","public",176],["T_WHITESPACE"," ",176],["T_FUNCTION","function",176],["T_WHITESPACE"," ",176],["T_STRING","retrieveSkuById",176],"(",["T_VARIABLE","$id",176],",",["T_WHITESPACE"," ",176],["T_VARIABLE","$skus",176],")",["T_WHITESPACE","\n    ",176],"{",["T_WHITESPACE","\n        ",177],["T_FOREACH","foreach",178],["T_WHITESPACE"," ",178],"(",["T_VARIABLE","$this",178],["T_OBJECT_OPERATOR","->",178],["T_STRING","productIdLocator",178],["T_OBJECT_OPERATOR","->",178],["T_STRING","retrieveProductIdsBySkus",178],"(",["T_VARIABLE","$skus",178],")",["T_WHITESPACE"," ",178],["T_AS","as",178],["T_WHITESPACE"," ",178],["T_VARIABLE","$sku",178],["T_WHITESPACE"," ",178],["T_DOUBLE_ARROW","=>",178],["T_WHITESPACE"," ",178],["T_VARIABLE","$ids",178],")",["T_WHITESPACE"," ",178],"{",["T_WHITESPACE","\n            ",178],["T_IF","if",179],["T_WHITESPACE"," ",179],"(",["T_STRING","false",179],["T_WHITESPACE"," ",179],["T_IS_NOT_IDENTICAL","!==",179],["T_WHITESPACE"," ",179],["T_STRING","array_key_exists",179],"(",["T_VARIABLE","$id",179],",",["T_WHITESPACE"," ",179],["T_VARIABLE","$ids",179],")",")",["T_WHITESPACE"," ",179],"{",["T_WHITESPACE","\n                ",179],["T_RETURN","return",180],["T_WHITESPACE"," ",180],["T_VARIABLE","$sku",180],";",["T_WHITESPACE","\n            ",180],"}",["T_WHITESPACE","\n        ",181],"}",["T_WHITESPACE","\n\n        ",182],["T_RETURN","return",184],["T_WHITESPACE"," ",184],["T_STRING","null",184],";",["T_WHITESPACE","\n    ",184],"}",["T_WHITESPACE","\n\n    ",185],["T_DOC_COMMENT","\/**\n     * Get attribute ID.\n     *\n     * @return int\n     *\/",187],["T_WHITESPACE","\n    ",191],["T_PRIVATE","private",192],["T_WHITESPACE"," ",192],["T_FUNCTION","function",192],["T_WHITESPACE"," ",192],["T_STRING","getAttributeId",192],"(",")",["T_WHITESPACE","\n    ",192],"{",["T_WHITESPACE","\n        ",193],["T_IF","if",194],["T_WHITESPACE"," ",194],"(","!",["T_VARIABLE","$this",194],["T_OBJECT_OPERATOR","->",194],["T_STRING","attributeId",194],")",["T_WHITESPACE"," ",194],"{",["T_WHITESPACE","\n            ",194],["T_VARIABLE","$this",195],["T_OBJECT_OPERATOR","->",195],["T_STRING","attributeId",195],["T_WHITESPACE"," ",195],"=",["T_WHITESPACE"," ",195],["T_VARIABLE","$this",195],["T_OBJECT_OPERATOR","->",195],["T_STRING","attributeRepository",195],["T_OBJECT_OPERATOR","->",195],["T_STRING","get",195],"(",["T_VARIABLE","$this",195],["T_OBJECT_OPERATOR","->",195],["T_STRING","attributeCode",195],")",["T_OBJECT_OPERATOR","->",195],["T_STRING","getAttributeId",195],"(",")",";",["T_WHITESPACE","\n        ",195],"}",["T_WHITESPACE","\n\n        ",196],["T_RETURN","return",198],["T_WHITESPACE"," ",198],["T_VARIABLE","$this",198],["T_OBJECT_OPERATOR","->",198],["T_STRING","attributeId",198],";",["T_WHITESPACE","\n    ",198],"}",["T_WHITESPACE","\n\n    ",199],["T_DOC_COMMENT","\/**\n     * Retrieve affected product IDs.\n     *\n     * @param array $skus\n     * @return array\n     *\/",201],["T_WHITESPACE","\n    ",206],["T_PRIVATE","private",207],["T_WHITESPACE"," ",207],["T_FUNCTION","function",207],["T_WHITESPACE"," ",207],["T_STRING","retrieveAffectedIds",207],"(",["T_ARRAY","array",207],["T_WHITESPACE"," ",207],["T_VARIABLE","$skus",207],")",["T_WHITESPACE","\n    ",207],"{",["T_WHITESPACE","\n        ",208],["T_VARIABLE","$affectedIds",209],["T_WHITESPACE"," ",209],"=",["T_WHITESPACE"," ",209],"[","]",";",["T_WHITESPACE","\n\n        ",209],["T_FOREACH","foreach",211],["T_WHITESPACE"," ",211],"(",["T_VARIABLE","$this",211],["T_OBJECT_OPERATOR","->",211],["T_STRING","productIdLocator",211],["T_OBJECT_OPERATOR","->",211],["T_STRING","retrieveProductIdsBySkus",211],"(",["T_VARIABLE","$skus",211],")",["T_WHITESPACE"," ",211],["T_AS","as",211],["T_WHITESPACE"," ",211],["T_VARIABLE","$productIds",211],")",["T_WHITESPACE"," ",211],"{",["T_WHITESPACE","\n            ",211],["T_VARIABLE","$affectedIds",212],["T_WHITESPACE"," ",212],"=",["T_WHITESPACE"," ",212],["T_STRING","array_merge",212],"(",["T_VARIABLE","$affectedIds",212],",",["T_WHITESPACE"," ",212],["T_STRING","array_keys",212],"(",["T_VARIABLE","$productIds",212],")",")",";",["T_WHITESPACE","\n        ",212],"}",["T_WHITESPACE","\n\n        ",213],["T_RETURN","return",215],["T_WHITESPACE"," ",215],["T_STRING","array_unique",215],"(",["T_VARIABLE","$affectedIds",215],")",";",["T_WHITESPACE","\n    ",215],"}",["T_WHITESPACE","\n\n    ",216],["T_DOC_COMMENT","\/**\n     * Get link field.\n     *\n     * @return string\n     *\/",218],["T_WHITESPACE","\n    ",222],["T_PUBLIC","public",223],["T_WHITESPACE"," ",223],["T_FUNCTION","function",223],["T_WHITESPACE"," ",223],["T_STRING","getEntityLinkField",223],"(",")",["T_WHITESPACE","\n    ",223],"{",["T_WHITESPACE","\n        ",224],["T_RETURN","return",225],["T_WHITESPACE"," ",225],["T_VARIABLE","$this",225],["T_OBJECT_OPERATOR","->",225],["T_STRING","metadataPool",225],["T_OBJECT_OPERATOR","->",225],["T_STRING","getMetadata",225],"(",["T_NS_SEPARATOR","\\",225],["T_STRING","Magento",225],["T_NS_SEPARATOR","\\",225],["T_STRING","Catalog",225],["T_NS_SEPARATOR","\\",225],["T_STRING","Api",225],["T_NS_SEPARATOR","\\",225],["T_STRING","Data",225],["T_NS_SEPARATOR","\\",225],["T_STRING","ProductInterface",225],["T_DOUBLE_COLON","::",225],["T_CLASS","class",225],")",["T_WHITESPACE","\n            ",225],["T_OBJECT_OPERATOR","->",226],["T_STRING","getLinkField",226],"(",")",";",["T_WHITESPACE","\n    ",226],"}",["T_WHITESPACE","\n",227],"}",["T_WHITESPACE","\n",228]]
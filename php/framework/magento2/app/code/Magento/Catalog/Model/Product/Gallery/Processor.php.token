[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Copyright \u00c2\u00a9 2013-2017 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n *\/",2],["T_WHITESPACE","\n",5],["T_NAMESPACE","namespace",6],["T_WHITESPACE"," ",6],["T_STRING","Magento",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Catalog",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Model",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Product",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Gallery",6],";",["T_WHITESPACE","\n\n",6],["T_USE","use",8],["T_WHITESPACE"," ",8],["T_STRING","Magento",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Framework",8],["T_NS_SEPARATOR","\\",8],["T_STRING","App",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Filesystem",8],["T_NS_SEPARATOR","\\",8],["T_STRING","DirectoryList",8],";",["T_WHITESPACE","\n",8],["T_USE","use",9],["T_WHITESPACE"," ",9],["T_STRING","Magento",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Framework",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Exception",9],["T_NS_SEPARATOR","\\",9],["T_STRING","LocalizedException",9],";",["T_WHITESPACE","\n",9],["T_USE","use",10],["T_WHITESPACE"," ",10],["T_STRING","Magento",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Framework",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Filesystem",10],["T_NS_SEPARATOR","\\",10],["T_STRING","DriverInterface",10],";",["T_WHITESPACE","\n\n",10],["T_DOC_COMMENT","\/**\n * Catalog product Media Gallery attribute processor.\n * @SuppressWarnings(PHPMD.CouplingBetweenObjects)\n *\/",12],["T_WHITESPACE","\n",15],["T_CLASS","class",16],["T_WHITESPACE"," ",16],["T_STRING","Processor",16],["T_WHITESPACE","\n",16],"{",["T_WHITESPACE","\n    ",17],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Catalog\\Api\\Data\\ProductAttributeInterface\n     *\/",18],["T_WHITESPACE","\n    ",20],["T_PROTECTED","protected",21],["T_WHITESPACE"," ",21],["T_VARIABLE","$attribute",21],";",["T_WHITESPACE","\n\n    ",21],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Catalog\\Api\\ProductAttributeRepositoryInterface\n     *\/",23],["T_WHITESPACE","\n    ",25],["T_PROTECTED","protected",26],["T_WHITESPACE"," ",26],["T_VARIABLE","$attributeRepository",26],";",["T_WHITESPACE","\n\n    ",26],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\MediaStorage\\Helper\\File\\Storage\\Database\n     *\/",28],["T_WHITESPACE","\n    ",30],["T_PROTECTED","protected",31],["T_WHITESPACE"," ",31],["T_VARIABLE","$fileStorageDb",31],";",["T_WHITESPACE","\n\n    ",31],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Catalog\\Model\\Product\\Media\\Config\n     *\/",33],["T_WHITESPACE","\n    ",35],["T_PROTECTED","protected",36],["T_WHITESPACE"," ",36],["T_VARIABLE","$mediaConfig",36],";",["T_WHITESPACE","\n\n    ",36],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Framework\\Filesystem\\Directory\\WriteInterface\n     *\/",38],["T_WHITESPACE","\n    ",40],["T_PROTECTED","protected",41],["T_WHITESPACE"," ",41],["T_VARIABLE","$mediaDirectory",41],";",["T_WHITESPACE","\n\n    ",41],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Catalog\\Model\\ResourceModel\\Product\\Gallery\n     *\/",43],["T_WHITESPACE","\n    ",45],["T_PROTECTED","protected",46],["T_WHITESPACE"," ",46],["T_VARIABLE","$resourceModel",46],";",["T_WHITESPACE","\n\n    ",46],["T_DOC_COMMENT","\/**\n     * @param \\Magento\\Catalog\\Api\\ProductAttributeRepositoryInterface $attributeRepository\n     * @param \\Magento\\MediaStorage\\Helper\\File\\Storage\\Database $fileStorageDb\n     * @param \\Magento\\Catalog\\Model\\Product\\Media\\Config $mediaConfig\n     * @param \\Magento\\Framework\\Filesystem $filesystem\n     * @param \\Magento\\Catalog\\Model\\ResourceModel\\Product\\Gallery $resourceModel\n     *\/",48],["T_WHITESPACE","\n    ",54],["T_PUBLIC","public",55],["T_WHITESPACE"," ",55],["T_FUNCTION","function",55],["T_WHITESPACE"," ",55],["T_STRING","__construct",55],"(",["T_WHITESPACE","\n        ",55],["T_NS_SEPARATOR","\\",56],["T_STRING","Magento",56],["T_NS_SEPARATOR","\\",56],["T_STRING","Catalog",56],["T_NS_SEPARATOR","\\",56],["T_STRING","Api",56],["T_NS_SEPARATOR","\\",56],["T_STRING","ProductAttributeRepositoryInterface",56],["T_WHITESPACE"," ",56],["T_VARIABLE","$attributeRepository",56],",",["T_WHITESPACE","\n        ",56],["T_NS_SEPARATOR","\\",57],["T_STRING","Magento",57],["T_NS_SEPARATOR","\\",57],["T_STRING","MediaStorage",57],["T_NS_SEPARATOR","\\",57],["T_STRING","Helper",57],["T_NS_SEPARATOR","\\",57],["T_STRING","File",57],["T_NS_SEPARATOR","\\",57],["T_STRING","Storage",57],["T_NS_SEPARATOR","\\",57],["T_STRING","Database",57],["T_WHITESPACE"," ",57],["T_VARIABLE","$fileStorageDb",57],",",["T_WHITESPACE","\n        ",57],["T_NS_SEPARATOR","\\",58],["T_STRING","Magento",58],["T_NS_SEPARATOR","\\",58],["T_STRING","Catalog",58],["T_NS_SEPARATOR","\\",58],["T_STRING","Model",58],["T_NS_SEPARATOR","\\",58],["T_STRING","Product",58],["T_NS_SEPARATOR","\\",58],["T_STRING","Media",58],["T_NS_SEPARATOR","\\",58],["T_STRING","Config",58],["T_WHITESPACE"," ",58],["T_VARIABLE","$mediaConfig",58],",",["T_WHITESPACE","\n        ",58],["T_NS_SEPARATOR","\\",59],["T_STRING","Magento",59],["T_NS_SEPARATOR","\\",59],["T_STRING","Framework",59],["T_NS_SEPARATOR","\\",59],["T_STRING","Filesystem",59],["T_WHITESPACE"," ",59],["T_VARIABLE","$filesystem",59],",",["T_WHITESPACE","\n        ",59],["T_NS_SEPARATOR","\\",60],["T_STRING","Magento",60],["T_NS_SEPARATOR","\\",60],["T_STRING","Catalog",60],["T_NS_SEPARATOR","\\",60],["T_STRING","Model",60],["T_NS_SEPARATOR","\\",60],["T_STRING","ResourceModel",60],["T_NS_SEPARATOR","\\",60],["T_STRING","Product",60],["T_NS_SEPARATOR","\\",60],["T_STRING","Gallery",60],["T_WHITESPACE"," ",60],["T_VARIABLE","$resourceModel",60],["T_WHITESPACE","\n    ",60],")",["T_WHITESPACE"," ",61],"{",["T_WHITESPACE","\n        ",61],["T_VARIABLE","$this",62],["T_OBJECT_OPERATOR","->",62],["T_STRING","attributeRepository",62],["T_WHITESPACE"," ",62],"=",["T_WHITESPACE"," ",62],["T_VARIABLE","$attributeRepository",62],";",["T_WHITESPACE","\n        ",62],["T_VARIABLE","$this",63],["T_OBJECT_OPERATOR","->",63],["T_STRING","fileStorageDb",63],["T_WHITESPACE"," ",63],"=",["T_WHITESPACE"," ",63],["T_VARIABLE","$fileStorageDb",63],";",["T_WHITESPACE","\n        ",63],["T_VARIABLE","$this",64],["T_OBJECT_OPERATOR","->",64],["T_STRING","mediaConfig",64],["T_WHITESPACE"," ",64],"=",["T_WHITESPACE"," ",64],["T_VARIABLE","$mediaConfig",64],";",["T_WHITESPACE","\n        ",64],["T_VARIABLE","$this",65],["T_OBJECT_OPERATOR","->",65],["T_STRING","mediaDirectory",65],["T_WHITESPACE"," ",65],"=",["T_WHITESPACE"," ",65],["T_VARIABLE","$filesystem",65],["T_OBJECT_OPERATOR","->",65],["T_STRING","getDirectoryWrite",65],"(",["T_STRING","DirectoryList",65],["T_DOUBLE_COLON","::",65],["T_STRING","MEDIA",65],")",";",["T_WHITESPACE","\n        ",65],["T_VARIABLE","$this",66],["T_OBJECT_OPERATOR","->",66],["T_STRING","resourceModel",66],["T_WHITESPACE"," ",66],"=",["T_WHITESPACE"," ",66],["T_VARIABLE","$resourceModel",66],";",["T_WHITESPACE","\n    ",66],"}",["T_WHITESPACE","\n\n    ",67],["T_DOC_COMMENT","\/**\n     * @return \\Magento\\Catalog\\Api\\Data\\ProductAttributeInterface\n     *\/",69],["T_WHITESPACE","\n    ",71],["T_PUBLIC","public",72],["T_WHITESPACE"," ",72],["T_FUNCTION","function",72],["T_WHITESPACE"," ",72],["T_STRING","getAttribute",72],"(",")",["T_WHITESPACE","\n    ",72],"{",["T_WHITESPACE","\n        ",73],["T_IF","if",74],["T_WHITESPACE"," ",74],"(","!",["T_VARIABLE","$this",74],["T_OBJECT_OPERATOR","->",74],["T_STRING","attribute",74],")",["T_WHITESPACE"," ",74],"{",["T_WHITESPACE","\n            ",74],["T_VARIABLE","$this",75],["T_OBJECT_OPERATOR","->",75],["T_STRING","attribute",75],["T_WHITESPACE"," ",75],"=",["T_WHITESPACE"," ",75],["T_VARIABLE","$this",75],["T_OBJECT_OPERATOR","->",75],["T_STRING","attributeRepository",75],["T_OBJECT_OPERATOR","->",75],["T_STRING","get",75],"(",["T_CONSTANT_ENCAPSED_STRING","'media_gallery'",75],")",";",["T_WHITESPACE","\n        ",75],"}",["T_WHITESPACE","\n\n        ",76],["T_RETURN","return",78],["T_WHITESPACE"," ",78],["T_VARIABLE","$this",78],["T_OBJECT_OPERATOR","->",78],["T_STRING","attribute",78],";",["T_WHITESPACE","\n    ",78],"}",["T_WHITESPACE","\n\n    ",79],["T_DOC_COMMENT","\/**\n     * Validate media_gallery attribute data\n     *\n     * @param \\Magento\\Catalog\\Model\\Product $object\n     * @return bool\n     * @throws \\Magento\\Framework\\Exception\\LocalizedException\n     *\/",81],["T_WHITESPACE","\n    ",87],["T_PUBLIC","public",88],["T_WHITESPACE"," ",88],["T_FUNCTION","function",88],["T_WHITESPACE"," ",88],["T_STRING","validate",88],"(",["T_VARIABLE","$object",88],")",["T_WHITESPACE","\n    ",88],"{",["T_WHITESPACE","\n        ",89],["T_IF","if",90],["T_WHITESPACE"," ",90],"(",["T_VARIABLE","$this",90],["T_OBJECT_OPERATOR","->",90],["T_STRING","getAttribute",90],"(",")",["T_OBJECT_OPERATOR","->",90],["T_STRING","getIsRequired",90],"(",")",")",["T_WHITESPACE"," ",90],"{",["T_WHITESPACE","\n            ",90],["T_VARIABLE","$value",91],["T_WHITESPACE"," ",91],"=",["T_WHITESPACE"," ",91],["T_VARIABLE","$object",91],["T_OBJECT_OPERATOR","->",91],["T_STRING","getData",91],"(",["T_VARIABLE","$this",91],["T_OBJECT_OPERATOR","->",91],["T_STRING","getAttribute",91],"(",")",["T_OBJECT_OPERATOR","->",91],["T_STRING","getAttributeCode",91],"(",")",")",";",["T_WHITESPACE","\n            ",91],["T_IF","if",92],["T_WHITESPACE"," ",92],"(",["T_VARIABLE","$this",92],["T_OBJECT_OPERATOR","->",92],["T_STRING","getAttribute",92],"(",")",["T_OBJECT_OPERATOR","->",92],["T_STRING","isValueEmpty",92],"(",["T_VARIABLE","$value",92],")",")",["T_WHITESPACE"," ",92],"{",["T_WHITESPACE","\n                ",92],["T_RETURN","return",93],["T_WHITESPACE"," ",93],["T_STRING","false",93],";",["T_WHITESPACE","\n            ",93],"}",["T_WHITESPACE","\n        ",94],"}",["T_WHITESPACE","\n        ",95],["T_IF","if",96],["T_WHITESPACE"," ",96],"(",["T_VARIABLE","$this",96],["T_OBJECT_OPERATOR","->",96],["T_STRING","getAttribute",96],"(",")",["T_OBJECT_OPERATOR","->",96],["T_STRING","getIsUnique",96],"(",")",")",["T_WHITESPACE"," ",96],"{",["T_WHITESPACE","\n            ",96],["T_IF","if",97],["T_WHITESPACE"," ",97],"(","!",["T_VARIABLE","$this",97],["T_OBJECT_OPERATOR","->",97],["T_STRING","getAttribute",97],"(",")",["T_OBJECT_OPERATOR","->",97],["T_STRING","getEntity",97],"(",")",["T_OBJECT_OPERATOR","->",97],["T_STRING","checkAttributeUniqueValue",97],"(",["T_VARIABLE","$this",97],["T_OBJECT_OPERATOR","->",97],["T_STRING","getAttribute",97],"(",")",",",["T_WHITESPACE"," ",97],["T_VARIABLE","$object",97],")",")",["T_WHITESPACE"," ",97],"{",["T_WHITESPACE","\n                ",97],["T_VARIABLE","$label",98],["T_WHITESPACE"," ",98],"=",["T_WHITESPACE"," ",98],["T_VARIABLE","$this",98],["T_OBJECT_OPERATOR","->",98],["T_STRING","getAttribute",98],"(",")",["T_OBJECT_OPERATOR","->",98],["T_STRING","getFrontend",98],"(",")",["T_OBJECT_OPERATOR","->",98],["T_STRING","getLabel",98],"(",")",";",["T_WHITESPACE","\n                ",98],["T_THROW","throw",99],["T_WHITESPACE"," ",99],["T_NEW","new",99],["T_WHITESPACE"," ",99],["T_STRING","LocalizedException",99],"(",["T_STRING","__",99],"(",["T_CONSTANT_ENCAPSED_STRING","'The value of attribute \"%1\" must be unique.'",99],",",["T_WHITESPACE"," ",99],["T_VARIABLE","$label",99],")",")",";",["T_WHITESPACE","\n            ",99],"}",["T_WHITESPACE","\n        ",100],"}",["T_WHITESPACE","\n\n        ",101],["T_RETURN","return",103],["T_WHITESPACE"," ",103],["T_STRING","true",103],";",["T_WHITESPACE","\n    ",103],"}",["T_WHITESPACE","\n\n    ",104],["T_DOC_COMMENT","\/**\n     * Add image to media gallery and return new filename\n     *\n     * @param \\Magento\\Catalog\\Model\\Product $product\n     * @param string $file file path of image in file system\n     * @param string|string[] $mediaAttribute code of attribute with type 'media_image',\n     *                                                      leave blank if image should be only in gallery\n     * @param boolean $move if true, it will move source file\n     * @param boolean $exclude mark image as disabled in product page view\n     * @return string\n     * @throws \\Magento\\Framework\\Exception\\LocalizedException\n     * @SuppressWarnings(PHPMD.CyclomaticComplexity)\n     * @SuppressWarnings(PHPMD.NPathComplexity)\n     *\/",106],["T_WHITESPACE","\n    ",119],["T_PUBLIC","public",120],["T_WHITESPACE"," ",120],["T_FUNCTION","function",120],["T_WHITESPACE"," ",120],["T_STRING","addImage",120],"(",["T_WHITESPACE","\n        ",120],["T_NS_SEPARATOR","\\",121],["T_STRING","Magento",121],["T_NS_SEPARATOR","\\",121],["T_STRING","Catalog",121],["T_NS_SEPARATOR","\\",121],["T_STRING","Model",121],["T_NS_SEPARATOR","\\",121],["T_STRING","Product",121],["T_WHITESPACE"," ",121],["T_VARIABLE","$product",121],",",["T_WHITESPACE","\n        ",121],["T_VARIABLE","$file",122],",",["T_WHITESPACE","\n        ",122],["T_VARIABLE","$mediaAttribute",123],["T_WHITESPACE"," ",123],"=",["T_WHITESPACE"," ",123],["T_STRING","null",123],",",["T_WHITESPACE","\n        ",123],["T_VARIABLE","$move",124],["T_WHITESPACE"," ",124],"=",["T_WHITESPACE"," ",124],["T_STRING","false",124],",",["T_WHITESPACE","\n        ",124],["T_VARIABLE","$exclude",125],["T_WHITESPACE"," ",125],"=",["T_WHITESPACE"," ",125],["T_STRING","true",125],["T_WHITESPACE","\n    ",125],")",["T_WHITESPACE"," ",126],"{",["T_WHITESPACE","\n        ",126],["T_VARIABLE","$file",127],["T_WHITESPACE"," ",127],"=",["T_WHITESPACE"," ",127],["T_VARIABLE","$this",127],["T_OBJECT_OPERATOR","->",127],["T_STRING","mediaDirectory",127],["T_OBJECT_OPERATOR","->",127],["T_STRING","getRelativePath",127],"(",["T_VARIABLE","$file",127],")",";",["T_WHITESPACE","\n        ",127],["T_IF","if",128],["T_WHITESPACE"," ",128],"(","!",["T_VARIABLE","$this",128],["T_OBJECT_OPERATOR","->",128],["T_STRING","mediaDirectory",128],["T_OBJECT_OPERATOR","->",128],["T_STRING","isFile",128],"(",["T_VARIABLE","$file",128],")",")",["T_WHITESPACE"," ",128],"{",["T_WHITESPACE","\n            ",128],["T_THROW","throw",129],["T_WHITESPACE"," ",129],["T_NEW","new",129],["T_WHITESPACE"," ",129],["T_STRING","LocalizedException",129],"(",["T_STRING","__",129],"(",["T_CONSTANT_ENCAPSED_STRING","'The image does not exist.'",129],")",")",";",["T_WHITESPACE","\n        ",129],"}",["T_WHITESPACE","\n\n        ",130],["T_VARIABLE","$pathinfo",132],["T_WHITESPACE"," ",132],"=",["T_WHITESPACE"," ",132],["T_STRING","pathinfo",132],"(",["T_VARIABLE","$file",132],")",";",["T_WHITESPACE","\n        ",132],["T_VARIABLE","$imgExtensions",133],["T_WHITESPACE"," ",133],"=",["T_WHITESPACE"," ",133],"[",["T_CONSTANT_ENCAPSED_STRING","'jpg'",133],",",["T_WHITESPACE"," ",133],["T_CONSTANT_ENCAPSED_STRING","'jpeg'",133],",",["T_WHITESPACE"," ",133],["T_CONSTANT_ENCAPSED_STRING","'gif'",133],",",["T_WHITESPACE"," ",133],["T_CONSTANT_ENCAPSED_STRING","'png'",133],"]",";",["T_WHITESPACE","\n        ",133],["T_IF","if",134],["T_WHITESPACE"," ",134],"(","!",["T_ISSET","isset",134],"(",["T_VARIABLE","$pathinfo",134],"[",["T_CONSTANT_ENCAPSED_STRING","'extension'",134],"]",")",["T_WHITESPACE"," ",134],["T_BOOLEAN_OR","||",134],["T_WHITESPACE"," ",134],"!",["T_STRING","in_array",134],"(",["T_STRING","strtolower",134],"(",["T_VARIABLE","$pathinfo",134],"[",["T_CONSTANT_ENCAPSED_STRING","'extension'",134],"]",")",",",["T_WHITESPACE"," ",134],["T_VARIABLE","$imgExtensions",134],")",")",["T_WHITESPACE"," ",134],"{",["T_WHITESPACE","\n            ",134],["T_THROW","throw",135],["T_WHITESPACE"," ",135],["T_NEW","new",135],["T_WHITESPACE"," ",135],["T_STRING","LocalizedException",135],"(",["T_STRING","__",135],"(",["T_CONSTANT_ENCAPSED_STRING","'Please correct the image file type.'",135],")",")",";",["T_WHITESPACE","\n        ",135],"}",["T_WHITESPACE","\n\n        ",136],["T_VARIABLE","$fileName",138],["T_WHITESPACE"," ",138],"=",["T_WHITESPACE"," ",138],["T_NS_SEPARATOR","\\",138],["T_STRING","Magento",138],["T_NS_SEPARATOR","\\",138],["T_STRING","MediaStorage",138],["T_NS_SEPARATOR","\\",138],["T_STRING","Model",138],["T_NS_SEPARATOR","\\",138],["T_STRING","File",138],["T_NS_SEPARATOR","\\",138],["T_STRING","Uploader",138],["T_DOUBLE_COLON","::",138],["T_STRING","getCorrectFileName",138],"(",["T_VARIABLE","$pathinfo",138],"[",["T_CONSTANT_ENCAPSED_STRING","'basename'",138],"]",")",";",["T_WHITESPACE","\n        ",138],["T_VARIABLE","$dispretionPath",139],["T_WHITESPACE"," ",139],"=",["T_WHITESPACE"," ",139],["T_NS_SEPARATOR","\\",139],["T_STRING","Magento",139],["T_NS_SEPARATOR","\\",139],["T_STRING","MediaStorage",139],["T_NS_SEPARATOR","\\",139],["T_STRING","Model",139],["T_NS_SEPARATOR","\\",139],["T_STRING","File",139],["T_NS_SEPARATOR","\\",139],["T_STRING","Uploader",139],["T_DOUBLE_COLON","::",139],["T_STRING","getDispretionPath",139],"(",["T_VARIABLE","$fileName",139],")",";",["T_WHITESPACE","\n        ",139],["T_VARIABLE","$fileName",140],["T_WHITESPACE"," ",140],"=",["T_WHITESPACE"," ",140],["T_VARIABLE","$dispretionPath",140],["T_WHITESPACE"," ",140],".",["T_WHITESPACE"," ",140],["T_CONSTANT_ENCAPSED_STRING","'\/'",140],["T_WHITESPACE"," ",140],".",["T_WHITESPACE"," ",140],["T_VARIABLE","$fileName",140],";",["T_WHITESPACE","\n\n        ",140],["T_VARIABLE","$fileName",142],["T_WHITESPACE"," ",142],"=",["T_WHITESPACE"," ",142],["T_VARIABLE","$this",142],["T_OBJECT_OPERATOR","->",142],["T_STRING","getNotDuplicatedFilename",142],"(",["T_VARIABLE","$fileName",142],",",["T_WHITESPACE"," ",142],["T_VARIABLE","$dispretionPath",142],")",";",["T_WHITESPACE","\n\n        ",142],["T_VARIABLE","$destinationFile",144],["T_WHITESPACE"," ",144],"=",["T_WHITESPACE"," ",144],["T_VARIABLE","$this",144],["T_OBJECT_OPERATOR","->",144],["T_STRING","mediaConfig",144],["T_OBJECT_OPERATOR","->",144],["T_STRING","getTmpMediaPath",144],"(",["T_VARIABLE","$fileName",144],")",";",["T_WHITESPACE","\n\n        ",144],["T_TRY","try",146],["T_WHITESPACE"," ",146],"{",["T_WHITESPACE","\n            ",146],["T_DOC_COMMENT","\/** @var $storageHelper \\Magento\\MediaStorage\\Helper\\File\\Storage\\Database *\/",147],["T_WHITESPACE","\n            ",147],["T_VARIABLE","$storageHelper",148],["T_WHITESPACE"," ",148],"=",["T_WHITESPACE"," ",148],["T_VARIABLE","$this",148],["T_OBJECT_OPERATOR","->",148],["T_STRING","fileStorageDb",148],";",["T_WHITESPACE","\n            ",148],["T_IF","if",149],["T_WHITESPACE"," ",149],"(",["T_VARIABLE","$move",149],")",["T_WHITESPACE"," ",149],"{",["T_WHITESPACE","\n                ",149],["T_VARIABLE","$this",150],["T_OBJECT_OPERATOR","->",150],["T_STRING","mediaDirectory",150],["T_OBJECT_OPERATOR","->",150],["T_STRING","renameFile",150],"(",["T_VARIABLE","$file",150],",",["T_WHITESPACE"," ",150],["T_VARIABLE","$destinationFile",150],")",";",["T_WHITESPACE","\n\n                ",150],["T_COMMENT","\/\/If this is used, filesystem should be configured properly\n",152],["T_WHITESPACE","                ",153],["T_VARIABLE","$storageHelper",153],["T_OBJECT_OPERATOR","->",153],["T_STRING","saveFile",153],"(",["T_VARIABLE","$this",153],["T_OBJECT_OPERATOR","->",153],["T_STRING","mediaConfig",153],["T_OBJECT_OPERATOR","->",153],["T_STRING","getTmpMediaShortUrl",153],"(",["T_VARIABLE","$fileName",153],")",")",";",["T_WHITESPACE","\n            ",153],"}",["T_WHITESPACE"," ",154],["T_ELSE","else",154],["T_WHITESPACE"," ",154],"{",["T_WHITESPACE","\n                ",154],["T_VARIABLE","$this",155],["T_OBJECT_OPERATOR","->",155],["T_STRING","mediaDirectory",155],["T_OBJECT_OPERATOR","->",155],["T_STRING","copyFile",155],"(",["T_VARIABLE","$file",155],",",["T_WHITESPACE"," ",155],["T_VARIABLE","$destinationFile",155],")",";",["T_WHITESPACE","\n\n                ",155],["T_VARIABLE","$storageHelper",157],["T_OBJECT_OPERATOR","->",157],["T_STRING","saveFile",157],"(",["T_VARIABLE","$this",157],["T_OBJECT_OPERATOR","->",157],["T_STRING","mediaConfig",157],["T_OBJECT_OPERATOR","->",157],["T_STRING","getTmpMediaShortUrl",157],"(",["T_VARIABLE","$fileName",157],")",")",";",["T_WHITESPACE","\n            ",157],"}",["T_WHITESPACE","\n        ",158],"}",["T_WHITESPACE"," ",159],["T_CATCH","catch",159],["T_WHITESPACE"," ",159],"(",["T_NS_SEPARATOR","\\",159],["T_STRING","Exception",159],["T_WHITESPACE"," ",159],["T_VARIABLE","$e",159],")",["T_WHITESPACE"," ",159],"{",["T_WHITESPACE","\n            ",159],["T_THROW","throw",160],["T_WHITESPACE"," ",160],["T_NEW","new",160],["T_WHITESPACE"," ",160],["T_STRING","LocalizedException",160],"(",["T_STRING","__",160],"(",["T_CONSTANT_ENCAPSED_STRING","'We couldn\\'t move this file: %1.'",160],",",["T_WHITESPACE"," ",160],["T_VARIABLE","$e",160],["T_OBJECT_OPERATOR","->",160],["T_STRING","getMessage",160],"(",")",")",")",";",["T_WHITESPACE","\n        ",160],"}",["T_WHITESPACE","\n\n        ",161],["T_VARIABLE","$fileName",163],["T_WHITESPACE"," ",163],"=",["T_WHITESPACE"," ",163],["T_STRING","str_replace",163],"(",["T_CONSTANT_ENCAPSED_STRING","'\\\\'",163],",",["T_WHITESPACE"," ",163],["T_CONSTANT_ENCAPSED_STRING","'\/'",163],",",["T_WHITESPACE"," ",163],["T_VARIABLE","$fileName",163],")",";",["T_WHITESPACE","\n\n        ",163],["T_VARIABLE","$attrCode",165],["T_WHITESPACE"," ",165],"=",["T_WHITESPACE"," ",165],["T_VARIABLE","$this",165],["T_OBJECT_OPERATOR","->",165],["T_STRING","getAttribute",165],"(",")",["T_OBJECT_OPERATOR","->",165],["T_STRING","getAttributeCode",165],"(",")",";",["T_WHITESPACE","\n        ",165],["T_VARIABLE","$mediaGalleryData",166],["T_WHITESPACE"," ",166],"=",["T_WHITESPACE"," ",166],["T_VARIABLE","$product",166],["T_OBJECT_OPERATOR","->",166],["T_STRING","getData",166],"(",["T_VARIABLE","$attrCode",166],")",";",["T_WHITESPACE","\n        ",166],["T_VARIABLE","$position",167],["T_WHITESPACE"," ",167],"=",["T_WHITESPACE"," ",167],["T_LNUMBER","0",167],";",["T_WHITESPACE","\n        ",167],["T_IF","if",168],["T_WHITESPACE"," ",168],"(","!",["T_STRING","is_array",168],"(",["T_VARIABLE","$mediaGalleryData",168],")",")",["T_WHITESPACE"," ",168],"{",["T_WHITESPACE","\n            ",168],["T_VARIABLE","$mediaGalleryData",169],["T_WHITESPACE"," ",169],"=",["T_WHITESPACE"," ",169],"[",["T_CONSTANT_ENCAPSED_STRING","'images'",169],["T_WHITESPACE"," ",169],["T_DOUBLE_ARROW","=>",169],["T_WHITESPACE"," ",169],"[","]","]",";",["T_WHITESPACE","\n        ",169],"}",["T_WHITESPACE","\n\n        ",170],["T_FOREACH","foreach",172],["T_WHITESPACE"," ",172],"(",["T_VARIABLE","$mediaGalleryData",172],"[",["T_CONSTANT_ENCAPSED_STRING","'images'",172],"]",["T_WHITESPACE"," ",172],["T_AS","as",172],["T_WHITESPACE"," ",172],"&",["T_VARIABLE","$image",172],")",["T_WHITESPACE"," ",172],"{",["T_WHITESPACE","\n            ",172],["T_IF","if",173],["T_WHITESPACE"," ",173],"(",["T_ISSET","isset",173],"(",["T_VARIABLE","$image",173],"[",["T_CONSTANT_ENCAPSED_STRING","'position'",173],"]",")",["T_WHITESPACE"," ",173],["T_BOOLEAN_AND","&&",173],["T_WHITESPACE"," ",173],["T_VARIABLE","$image",173],"[",["T_CONSTANT_ENCAPSED_STRING","'position'",173],"]",["T_WHITESPACE"," ",173],">",["T_WHITESPACE"," ",173],["T_VARIABLE","$position",173],")",["T_WHITESPACE"," ",173],"{",["T_WHITESPACE","\n                ",173],["T_VARIABLE","$position",174],["T_WHITESPACE"," ",174],"=",["T_WHITESPACE"," ",174],["T_VARIABLE","$image",174],"[",["T_CONSTANT_ENCAPSED_STRING","'position'",174],"]",";",["T_WHITESPACE","\n            ",174],"}",["T_WHITESPACE","\n        ",175],"}",["T_WHITESPACE","\n\n        ",176],["T_VARIABLE","$position",178],["T_INC","++",178],";",["T_WHITESPACE","\n        ",178],["T_VARIABLE","$mediaGalleryData",179],"[",["T_CONSTANT_ENCAPSED_STRING","'images'",179],"]","[","]",["T_WHITESPACE"," ",179],"=",["T_WHITESPACE"," ",179],"[",["T_WHITESPACE","\n            ",179],["T_CONSTANT_ENCAPSED_STRING","'file'",180],["T_WHITESPACE"," ",180],["T_DOUBLE_ARROW","=>",180],["T_WHITESPACE"," ",180],["T_VARIABLE","$fileName",180],",",["T_WHITESPACE","\n            ",180],["T_CONSTANT_ENCAPSED_STRING","'position'",181],["T_WHITESPACE"," ",181],["T_DOUBLE_ARROW","=>",181],["T_WHITESPACE"," ",181],["T_VARIABLE","$position",181],",",["T_WHITESPACE","\n            ",181],["T_CONSTANT_ENCAPSED_STRING","'label'",182],["T_WHITESPACE"," ",182],["T_DOUBLE_ARROW","=>",182],["T_WHITESPACE"," ",182],["T_CONSTANT_ENCAPSED_STRING","''",182],",",["T_WHITESPACE","\n            ",182],["T_CONSTANT_ENCAPSED_STRING","'disabled'",183],["T_WHITESPACE"," ",183],["T_DOUBLE_ARROW","=>",183],["T_WHITESPACE"," ",183],["T_INT_CAST","(int)",183],["T_VARIABLE","$exclude",183],",",["T_WHITESPACE","\n        ",183],"]",";",["T_WHITESPACE","\n\n        ",184],["T_VARIABLE","$product",186],["T_OBJECT_OPERATOR","->",186],["T_STRING","setData",186],"(",["T_VARIABLE","$attrCode",186],",",["T_WHITESPACE"," ",186],["T_VARIABLE","$mediaGalleryData",186],")",";",["T_WHITESPACE","\n\n        ",186],["T_IF","if",188],["T_WHITESPACE"," ",188],"(",["T_VARIABLE","$mediaAttribute",188],["T_WHITESPACE"," ",188],["T_IS_NOT_IDENTICAL","!==",188],["T_WHITESPACE"," ",188],["T_STRING","null",188],")",["T_WHITESPACE"," ",188],"{",["T_WHITESPACE","\n            ",188],["T_VARIABLE","$this",189],["T_OBJECT_OPERATOR","->",189],["T_STRING","setMediaAttribute",189],"(",["T_VARIABLE","$product",189],",",["T_WHITESPACE"," ",189],["T_VARIABLE","$mediaAttribute",189],",",["T_WHITESPACE"," ",189],["T_VARIABLE","$fileName",189],")",";",["T_WHITESPACE","\n        ",189],"}",["T_WHITESPACE","\n\n        ",190],["T_RETURN","return",192],["T_WHITESPACE"," ",192],["T_VARIABLE","$fileName",192],";",["T_WHITESPACE","\n    ",192],"}",["T_WHITESPACE","\n\n    ",193],["T_DOC_COMMENT","\/**\n     * Update image in gallery\n     *\n     * @param \\Magento\\Catalog\\Model\\Product $product\n     * @param string $file\n     * @param array $data\n     * @return $this\n     *\/",195],["T_WHITESPACE","\n    ",202],["T_PUBLIC","public",203],["T_WHITESPACE"," ",203],["T_FUNCTION","function",203],["T_WHITESPACE"," ",203],["T_STRING","updateImage",203],"(",["T_NS_SEPARATOR","\\",203],["T_STRING","Magento",203],["T_NS_SEPARATOR","\\",203],["T_STRING","Catalog",203],["T_NS_SEPARATOR","\\",203],["T_STRING","Model",203],["T_NS_SEPARATOR","\\",203],["T_STRING","Product",203],["T_WHITESPACE"," ",203],["T_VARIABLE","$product",203],",",["T_WHITESPACE"," ",203],["T_VARIABLE","$file",203],",",["T_WHITESPACE"," ",203],["T_VARIABLE","$data",203],")",["T_WHITESPACE","\n    ",203],"{",["T_WHITESPACE","\n        ",204],["T_VARIABLE","$fieldsMap",205],["T_WHITESPACE"," ",205],"=",["T_WHITESPACE"," ",205],"[",["T_WHITESPACE","\n            ",205],["T_CONSTANT_ENCAPSED_STRING","'label'",206],["T_WHITESPACE"," ",206],["T_DOUBLE_ARROW","=>",206],["T_WHITESPACE"," ",206],["T_CONSTANT_ENCAPSED_STRING","'label'",206],",",["T_WHITESPACE","\n            ",206],["T_CONSTANT_ENCAPSED_STRING","'position'",207],["T_WHITESPACE"," ",207],["T_DOUBLE_ARROW","=>",207],["T_WHITESPACE"," ",207],["T_CONSTANT_ENCAPSED_STRING","'position'",207],",",["T_WHITESPACE","\n            ",207],["T_CONSTANT_ENCAPSED_STRING","'disabled'",208],["T_WHITESPACE"," ",208],["T_DOUBLE_ARROW","=>",208],["T_WHITESPACE"," ",208],["T_CONSTANT_ENCAPSED_STRING","'disabled'",208],",",["T_WHITESPACE","\n            ",208],["T_CONSTANT_ENCAPSED_STRING","'exclude'",209],["T_WHITESPACE"," ",209],["T_DOUBLE_ARROW","=>",209],["T_WHITESPACE"," ",209],["T_CONSTANT_ENCAPSED_STRING","'disabled'",209],",",["T_WHITESPACE","\n            ",209],["T_CONSTANT_ENCAPSED_STRING","'media_type'",210],["T_WHITESPACE"," ",210],["T_DOUBLE_ARROW","=>",210],["T_WHITESPACE"," ",210],["T_CONSTANT_ENCAPSED_STRING","'media_type'",210],",",["T_WHITESPACE","\n        ",210],"]",";",["T_WHITESPACE","\n\n        ",211],["T_VARIABLE","$attrCode",213],["T_WHITESPACE"," ",213],"=",["T_WHITESPACE"," ",213],["T_VARIABLE","$this",213],["T_OBJECT_OPERATOR","->",213],["T_STRING","getAttribute",213],"(",")",["T_OBJECT_OPERATOR","->",213],["T_STRING","getAttributeCode",213],"(",")",";",["T_WHITESPACE","\n\n        ",213],["T_VARIABLE","$mediaGalleryData",215],["T_WHITESPACE"," ",215],"=",["T_WHITESPACE"," ",215],["T_VARIABLE","$product",215],["T_OBJECT_OPERATOR","->",215],["T_STRING","getData",215],"(",["T_VARIABLE","$attrCode",215],")",";",["T_WHITESPACE","\n\n        ",215],["T_IF","if",217],["T_WHITESPACE"," ",217],"(","!",["T_ISSET","isset",217],"(",["T_VARIABLE","$mediaGalleryData",217],"[",["T_CONSTANT_ENCAPSED_STRING","'images'",217],"]",")",["T_WHITESPACE"," ",217],["T_BOOLEAN_OR","||",217],["T_WHITESPACE"," ",217],"!",["T_STRING","is_array",217],"(",["T_VARIABLE","$mediaGalleryData",217],"[",["T_CONSTANT_ENCAPSED_STRING","'images'",217],"]",")",")",["T_WHITESPACE"," ",217],"{",["T_WHITESPACE","\n            ",217],["T_RETURN","return",218],["T_WHITESPACE"," ",218],["T_VARIABLE","$this",218],";",["T_WHITESPACE","\n        ",218],"}",["T_WHITESPACE","\n\n        ",219],["T_FOREACH","foreach",221],["T_WHITESPACE"," ",221],"(",["T_VARIABLE","$mediaGalleryData",221],"[",["T_CONSTANT_ENCAPSED_STRING","'images'",221],"]",["T_WHITESPACE"," ",221],["T_AS","as",221],["T_WHITESPACE"," ",221],"&",["T_VARIABLE","$image",221],")",["T_WHITESPACE"," ",221],"{",["T_WHITESPACE","\n            ",221],["T_IF","if",222],["T_WHITESPACE"," ",222],"(",["T_VARIABLE","$image",222],"[",["T_CONSTANT_ENCAPSED_STRING","'file'",222],"]",["T_WHITESPACE"," ",222],["T_IS_EQUAL","==",222],["T_WHITESPACE"," ",222],["T_VARIABLE","$file",222],")",["T_WHITESPACE"," ",222],"{",["T_WHITESPACE","\n                ",222],["T_FOREACH","foreach",223],["T_WHITESPACE"," ",223],"(",["T_VARIABLE","$fieldsMap",223],["T_WHITESPACE"," ",223],["T_AS","as",223],["T_WHITESPACE"," ",223],["T_VARIABLE","$mappedField",223],["T_WHITESPACE"," ",223],["T_DOUBLE_ARROW","=>",223],["T_WHITESPACE"," ",223],["T_VARIABLE","$realField",223],")",["T_WHITESPACE"," ",223],"{",["T_WHITESPACE","\n                    ",223],["T_IF","if",224],["T_WHITESPACE"," ",224],"(",["T_ISSET","isset",224],"(",["T_VARIABLE","$data",224],"[",["T_VARIABLE","$mappedField",224],"]",")",")",["T_WHITESPACE"," ",224],"{",["T_WHITESPACE","\n                        ",224],["T_VARIABLE","$image",225],"[",["T_VARIABLE","$realField",225],"]",["T_WHITESPACE"," ",225],"=",["T_WHITESPACE"," ",225],["T_VARIABLE","$data",225],"[",["T_VARIABLE","$mappedField",225],"]",";",["T_WHITESPACE","\n                    ",225],"}",["T_WHITESPACE","\n                ",226],"}",["T_WHITESPACE","\n            ",227],"}",["T_WHITESPACE","\n        ",228],"}",["T_WHITESPACE","\n\n        ",229],["T_VARIABLE","$product",231],["T_OBJECT_OPERATOR","->",231],["T_STRING","setData",231],"(",["T_VARIABLE","$attrCode",231],",",["T_WHITESPACE"," ",231],["T_VARIABLE","$mediaGalleryData",231],")",";",["T_WHITESPACE","\n        ",231],["T_RETURN","return",232],["T_WHITESPACE"," ",232],["T_VARIABLE","$this",232],";",["T_WHITESPACE","\n    ",232],"}",["T_WHITESPACE","\n\n    ",233],["T_DOC_COMMENT","\/**\n     * Remove image from gallery\n     *\n     * @param \\Magento\\Catalog\\Model\\Product $product\n     * @param string $file\n     * @return $this\n     *\/",235],["T_WHITESPACE","\n    ",241],["T_PUBLIC","public",242],["T_WHITESPACE"," ",242],["T_FUNCTION","function",242],["T_WHITESPACE"," ",242],["T_STRING","removeImage",242],"(",["T_NS_SEPARATOR","\\",242],["T_STRING","Magento",242],["T_NS_SEPARATOR","\\",242],["T_STRING","Catalog",242],["T_NS_SEPARATOR","\\",242],["T_STRING","Model",242],["T_NS_SEPARATOR","\\",242],["T_STRING","Product",242],["T_WHITESPACE"," ",242],["T_VARIABLE","$product",242],",",["T_WHITESPACE"," ",242],["T_VARIABLE","$file",242],")",["T_WHITESPACE","\n    ",242],"{",["T_WHITESPACE","\n        ",243],["T_VARIABLE","$attrCode",244],["T_WHITESPACE"," ",244],"=",["T_WHITESPACE"," ",244],["T_VARIABLE","$this",244],["T_OBJECT_OPERATOR","->",244],["T_STRING","getAttribute",244],"(",")",["T_OBJECT_OPERATOR","->",244],["T_STRING","getAttributeCode",244],"(",")",";",["T_WHITESPACE","\n\n        ",244],["T_VARIABLE","$mediaGalleryData",246],["T_WHITESPACE"," ",246],"=",["T_WHITESPACE"," ",246],["T_VARIABLE","$product",246],["T_OBJECT_OPERATOR","->",246],["T_STRING","getData",246],"(",["T_VARIABLE","$attrCode",246],")",";",["T_WHITESPACE","\n\n        ",246],["T_IF","if",248],["T_WHITESPACE"," ",248],"(","!",["T_ISSET","isset",248],"(",["T_VARIABLE","$mediaGalleryData",248],"[",["T_CONSTANT_ENCAPSED_STRING","'images'",248],"]",")",["T_WHITESPACE"," ",248],["T_BOOLEAN_OR","||",248],["T_WHITESPACE"," ",248],"!",["T_STRING","is_array",248],"(",["T_VARIABLE","$mediaGalleryData",248],"[",["T_CONSTANT_ENCAPSED_STRING","'images'",248],"]",")",")",["T_WHITESPACE"," ",248],"{",["T_WHITESPACE","\n            ",248],["T_RETURN","return",249],["T_WHITESPACE"," ",249],["T_VARIABLE","$this",249],";",["T_WHITESPACE","\n        ",249],"}",["T_WHITESPACE","\n\n        ",250],["T_FOREACH","foreach",252],["T_WHITESPACE"," ",252],"(",["T_VARIABLE","$mediaGalleryData",252],"[",["T_CONSTANT_ENCAPSED_STRING","'images'",252],"]",["T_WHITESPACE"," ",252],["T_AS","as",252],["T_WHITESPACE"," ",252],"&",["T_VARIABLE","$image",252],")",["T_WHITESPACE"," ",252],"{",["T_WHITESPACE","\n            ",252],["T_IF","if",253],["T_WHITESPACE"," ",253],"(",["T_VARIABLE","$image",253],"[",["T_CONSTANT_ENCAPSED_STRING","'file'",253],"]",["T_WHITESPACE"," ",253],["T_IS_EQUAL","==",253],["T_WHITESPACE"," ",253],["T_VARIABLE","$file",253],")",["T_WHITESPACE"," ",253],"{",["T_WHITESPACE","\n                ",253],["T_VARIABLE","$image",254],"[",["T_CONSTANT_ENCAPSED_STRING","'removed'",254],"]",["T_WHITESPACE"," ",254],"=",["T_WHITESPACE"," ",254],["T_LNUMBER","1",254],";",["T_WHITESPACE","\n            ",254],"}",["T_WHITESPACE","\n        ",255],"}",["T_WHITESPACE","\n\n        ",256],["T_VARIABLE","$product",258],["T_OBJECT_OPERATOR","->",258],["T_STRING","setData",258],"(",["T_VARIABLE","$attrCode",258],",",["T_WHITESPACE"," ",258],["T_VARIABLE","$mediaGalleryData",258],")",";",["T_WHITESPACE","\n\n        ",258],["T_RETURN","return",260],["T_WHITESPACE"," ",260],["T_VARIABLE","$this",260],";",["T_WHITESPACE","\n    ",260],"}",["T_WHITESPACE","\n\n    ",261],["T_DOC_COMMENT","\/**\n     * Retrieve image from gallery\n     *\n     * @param \\Magento\\Catalog\\Model\\Product $product\n     * @param string $file\n     * @return array|boolean\n     *\/",263],["T_WHITESPACE","\n    ",269],["T_PUBLIC","public",270],["T_WHITESPACE"," ",270],["T_FUNCTION","function",270],["T_WHITESPACE"," ",270],["T_STRING","getImage",270],"(",["T_NS_SEPARATOR","\\",270],["T_STRING","Magento",270],["T_NS_SEPARATOR","\\",270],["T_STRING","Catalog",270],["T_NS_SEPARATOR","\\",270],["T_STRING","Model",270],["T_NS_SEPARATOR","\\",270],["T_STRING","Product",270],["T_WHITESPACE"," ",270],["T_VARIABLE","$product",270],",",["T_WHITESPACE"," ",270],["T_VARIABLE","$file",270],")",["T_WHITESPACE","\n    ",270],"{",["T_WHITESPACE","\n        ",271],["T_VARIABLE","$attrCode",272],["T_WHITESPACE"," ",272],"=",["T_WHITESPACE"," ",272],["T_VARIABLE","$this",272],["T_OBJECT_OPERATOR","->",272],["T_STRING","getAttribute",272],"(",")",["T_OBJECT_OPERATOR","->",272],["T_STRING","getAttributeCode",272],"(",")",";",["T_WHITESPACE","\n        ",272],["T_VARIABLE","$mediaGalleryData",273],["T_WHITESPACE"," ",273],"=",["T_WHITESPACE"," ",273],["T_VARIABLE","$product",273],["T_OBJECT_OPERATOR","->",273],["T_STRING","getData",273],"(",["T_VARIABLE","$attrCode",273],")",";",["T_WHITESPACE","\n        ",273],["T_IF","if",274],["T_WHITESPACE"," ",274],"(","!",["T_ISSET","isset",274],"(",["T_VARIABLE","$mediaGalleryData",274],"[",["T_CONSTANT_ENCAPSED_STRING","'images'",274],"]",")",["T_WHITESPACE"," ",274],["T_BOOLEAN_OR","||",274],["T_WHITESPACE"," ",274],"!",["T_STRING","is_array",274],"(",["T_VARIABLE","$mediaGalleryData",274],"[",["T_CONSTANT_ENCAPSED_STRING","'images'",274],"]",")",")",["T_WHITESPACE"," ",274],"{",["T_WHITESPACE","\n            ",274],["T_RETURN","return",275],["T_WHITESPACE"," ",275],["T_STRING","false",275],";",["T_WHITESPACE","\n        ",275],"}",["T_WHITESPACE","\n\n        ",276],["T_FOREACH","foreach",278],["T_WHITESPACE"," ",278],"(",["T_VARIABLE","$mediaGalleryData",278],"[",["T_CONSTANT_ENCAPSED_STRING","'images'",278],"]",["T_WHITESPACE"," ",278],["T_AS","as",278],["T_WHITESPACE"," ",278],["T_VARIABLE","$image",278],")",["T_WHITESPACE"," ",278],"{",["T_WHITESPACE","\n            ",278],["T_IF","if",279],["T_WHITESPACE"," ",279],"(",["T_VARIABLE","$image",279],"[",["T_CONSTANT_ENCAPSED_STRING","'file'",279],"]",["T_WHITESPACE"," ",279],["T_IS_EQUAL","==",279],["T_WHITESPACE"," ",279],["T_VARIABLE","$file",279],")",["T_WHITESPACE"," ",279],"{",["T_WHITESPACE","\n                ",279],["T_RETURN","return",280],["T_WHITESPACE"," ",280],["T_VARIABLE","$image",280],";",["T_WHITESPACE","\n            ",280],"}",["T_WHITESPACE","\n        ",281],"}",["T_WHITESPACE","\n\n        ",282],["T_RETURN","return",284],["T_WHITESPACE"," ",284],["T_STRING","false",284],";",["T_WHITESPACE","\n    ",284],"}",["T_WHITESPACE","\n\n    ",285],["T_DOC_COMMENT","\/**\n     * Clear media attribute value\n     *\n     * @param \\Magento\\Catalog\\Model\\Product $product\n     * @param string|string[] $mediaAttribute\n     * @return $this\n     *\/",287],["T_WHITESPACE","\n    ",293],["T_PUBLIC","public",294],["T_WHITESPACE"," ",294],["T_FUNCTION","function",294],["T_WHITESPACE"," ",294],["T_STRING","clearMediaAttribute",294],"(",["T_NS_SEPARATOR","\\",294],["T_STRING","Magento",294],["T_NS_SEPARATOR","\\",294],["T_STRING","Catalog",294],["T_NS_SEPARATOR","\\",294],["T_STRING","Model",294],["T_NS_SEPARATOR","\\",294],["T_STRING","Product",294],["T_WHITESPACE"," ",294],["T_VARIABLE","$product",294],",",["T_WHITESPACE"," ",294],["T_VARIABLE","$mediaAttribute",294],")",["T_WHITESPACE","\n    ",294],"{",["T_WHITESPACE","\n        ",295],["T_VARIABLE","$mediaAttributeCodes",296],["T_WHITESPACE"," ",296],"=",["T_WHITESPACE"," ",296],["T_VARIABLE","$this",296],["T_OBJECT_OPERATOR","->",296],["T_STRING","mediaConfig",296],["T_OBJECT_OPERATOR","->",296],["T_STRING","getMediaAttributeCodes",296],"(",")",";",["T_WHITESPACE","\n\n        ",296],["T_IF","if",298],["T_WHITESPACE"," ",298],"(",["T_STRING","is_array",298],"(",["T_VARIABLE","$mediaAttribute",298],")",")",["T_WHITESPACE"," ",298],"{",["T_WHITESPACE","\n            ",298],["T_FOREACH","foreach",299],["T_WHITESPACE"," ",299],"(",["T_VARIABLE","$mediaAttribute",299],["T_WHITESPACE"," ",299],["T_AS","as",299],["T_WHITESPACE"," ",299],["T_VARIABLE","$attribute",299],")",["T_WHITESPACE"," ",299],"{",["T_WHITESPACE","\n                ",299],["T_IF","if",300],["T_WHITESPACE"," ",300],"(",["T_STRING","in_array",300],"(",["T_VARIABLE","$attribute",300],",",["T_WHITESPACE"," ",300],["T_VARIABLE","$mediaAttributeCodes",300],")",")",["T_WHITESPACE"," ",300],"{",["T_WHITESPACE","\n                    ",300],["T_VARIABLE","$product",301],["T_OBJECT_OPERATOR","->",301],["T_STRING","setData",301],"(",["T_VARIABLE","$attribute",301],",",["T_WHITESPACE"," ",301],["T_CONSTANT_ENCAPSED_STRING","'no_selection'",301],")",";",["T_WHITESPACE","\n                ",301],"}",["T_WHITESPACE","\n            ",302],"}",["T_WHITESPACE","\n        ",303],"}",["T_WHITESPACE"," ",304],["T_ELSEIF","elseif",304],["T_WHITESPACE"," ",304],"(",["T_STRING","in_array",304],"(",["T_VARIABLE","$mediaAttribute",304],",",["T_WHITESPACE"," ",304],["T_VARIABLE","$mediaAttributeCodes",304],")",")",["T_WHITESPACE"," ",304],"{",["T_WHITESPACE","\n            ",304],["T_VARIABLE","$product",305],["T_OBJECT_OPERATOR","->",305],["T_STRING","setData",305],"(",["T_VARIABLE","$mediaAttribute",305],",",["T_WHITESPACE"," ",305],["T_CONSTANT_ENCAPSED_STRING","'no_selection'",305],")",";",["T_WHITESPACE","\n        ",305],"}",["T_WHITESPACE","\n\n        ",306],["T_RETURN","return",308],["T_WHITESPACE"," ",308],["T_VARIABLE","$this",308],";",["T_WHITESPACE","\n    ",308],"}",["T_WHITESPACE","\n\n    ",309],["T_DOC_COMMENT","\/**\n     * Set media attribute value\n     *\n     * @param \\Magento\\Catalog\\Model\\Product $product\n     * @param string|string[] $mediaAttribute\n     * @param string $value\n     * @return $this\n     *\/",311],["T_WHITESPACE","\n    ",318],["T_PUBLIC","public",319],["T_WHITESPACE"," ",319],["T_FUNCTION","function",319],["T_WHITESPACE"," ",319],["T_STRING","setMediaAttribute",319],"(",["T_NS_SEPARATOR","\\",319],["T_STRING","Magento",319],["T_NS_SEPARATOR","\\",319],["T_STRING","Catalog",319],["T_NS_SEPARATOR","\\",319],["T_STRING","Model",319],["T_NS_SEPARATOR","\\",319],["T_STRING","Product",319],["T_WHITESPACE"," ",319],["T_VARIABLE","$product",319],",",["T_WHITESPACE"," ",319],["T_VARIABLE","$mediaAttribute",319],",",["T_WHITESPACE"," ",319],["T_VARIABLE","$value",319],")",["T_WHITESPACE","\n    ",319],"{",["T_WHITESPACE","\n        ",320],["T_VARIABLE","$mediaAttributeCodes",321],["T_WHITESPACE"," ",321],"=",["T_WHITESPACE"," ",321],["T_VARIABLE","$this",321],["T_OBJECT_OPERATOR","->",321],["T_STRING","mediaConfig",321],["T_OBJECT_OPERATOR","->",321],["T_STRING","getMediaAttributeCodes",321],"(",")",";",["T_WHITESPACE","\n\n        ",321],["T_IF","if",323],["T_WHITESPACE"," ",323],"(",["T_STRING","is_array",323],"(",["T_VARIABLE","$mediaAttribute",323],")",")",["T_WHITESPACE"," ",323],"{",["T_WHITESPACE","\n            ",323],["T_FOREACH","foreach",324],["T_WHITESPACE"," ",324],"(",["T_VARIABLE","$mediaAttribute",324],["T_WHITESPACE"," ",324],["T_AS","as",324],["T_WHITESPACE"," ",324],["T_VARIABLE","$atttribute",324],")",["T_WHITESPACE"," ",324],"{",["T_WHITESPACE","\n                ",324],["T_IF","if",325],["T_WHITESPACE"," ",325],"(",["T_STRING","in_array",325],"(",["T_VARIABLE","$atttribute",325],",",["T_WHITESPACE"," ",325],["T_VARIABLE","$mediaAttributeCodes",325],")",")",["T_WHITESPACE"," ",325],"{",["T_WHITESPACE","\n                    ",325],["T_VARIABLE","$product",326],["T_OBJECT_OPERATOR","->",326],["T_STRING","setData",326],"(",["T_VARIABLE","$atttribute",326],",",["T_WHITESPACE"," ",326],["T_VARIABLE","$value",326],")",";",["T_WHITESPACE","\n                ",326],"}",["T_WHITESPACE","\n            ",327],"}",["T_WHITESPACE","\n        ",328],"}",["T_WHITESPACE"," ",329],["T_ELSEIF","elseif",329],["T_WHITESPACE"," ",329],"(",["T_STRING","in_array",329],"(",["T_VARIABLE","$mediaAttribute",329],",",["T_WHITESPACE"," ",329],["T_VARIABLE","$mediaAttributeCodes",329],")",")",["T_WHITESPACE"," ",329],"{",["T_WHITESPACE","\n            ",329],["T_VARIABLE","$product",330],["T_OBJECT_OPERATOR","->",330],["T_STRING","setData",330],"(",["T_VARIABLE","$mediaAttribute",330],",",["T_WHITESPACE"," ",330],["T_VARIABLE","$value",330],")",";",["T_WHITESPACE","\n        ",330],"}",["T_WHITESPACE","\n\n        ",331],["T_RETURN","return",333],["T_WHITESPACE"," ",333],["T_VARIABLE","$this",333],";",["T_WHITESPACE","\n    ",333],"}",["T_WHITESPACE","\n\n    ",334],["T_DOC_COMMENT","\/**\n     * get media attribute codes\n     * @return array\n     *\/",336],["T_WHITESPACE","\n    ",339],["T_PUBLIC","public",340],["T_WHITESPACE"," ",340],["T_FUNCTION","function",340],["T_WHITESPACE"," ",340],["T_STRING","getMediaAttributeCodes",340],"(",")",["T_WHITESPACE","\n    ",340],"{",["T_WHITESPACE","\n        ",341],["T_RETURN","return",342],["T_WHITESPACE"," ",342],["T_VARIABLE","$this",342],["T_OBJECT_OPERATOR","->",342],["T_STRING","mediaConfig",342],["T_OBJECT_OPERATOR","->",342],["T_STRING","getMediaAttributeCodes",342],"(",")",";",["T_WHITESPACE","\n    ",342],"}",["T_WHITESPACE","\n\n    ",343],["T_DOC_COMMENT","\/**\n     * @param string $file\n     * @return string\n     *\/",345],["T_WHITESPACE","\n    ",348],["T_PROTECTED","protected",349],["T_WHITESPACE"," ",349],["T_FUNCTION","function",349],["T_WHITESPACE"," ",349],["T_STRING","getFilenameFromTmp",349],"(",["T_VARIABLE","$file",349],")",["T_WHITESPACE","\n    ",349],"{",["T_WHITESPACE","\n        ",350],["T_RETURN","return",351],["T_WHITESPACE"," ",351],["T_STRING","strrpos",351],"(",["T_VARIABLE","$file",351],",",["T_WHITESPACE"," ",351],["T_CONSTANT_ENCAPSED_STRING","'.tmp'",351],")",["T_WHITESPACE"," ",351],["T_IS_EQUAL","==",351],["T_WHITESPACE"," ",351],["T_STRING","strlen",351],"(",["T_VARIABLE","$file",351],")",["T_WHITESPACE"," ",351],"-",["T_WHITESPACE"," ",351],["T_LNUMBER","4",351],["T_WHITESPACE"," ",351],"?",["T_WHITESPACE"," ",351],["T_STRING","substr",351],"(",["T_VARIABLE","$file",351],",",["T_WHITESPACE"," ",351],["T_LNUMBER","0",351],",",["T_WHITESPACE"," ",351],["T_STRING","strlen",351],"(",["T_VARIABLE","$file",351],")",["T_WHITESPACE"," ",351],"-",["T_WHITESPACE"," ",351],["T_LNUMBER","4",351],")",["T_WHITESPACE"," ",351],":",["T_WHITESPACE"," ",351],["T_VARIABLE","$file",351],";",["T_WHITESPACE","\n    ",351],"}",["T_WHITESPACE","\n\n    ",352],["T_DOC_COMMENT","\/**\n     * Duplicate temporary images\n     *\n     * @param string $file\n     * @return string\n     *\/",354],["T_WHITESPACE","\n    ",359],["T_PUBLIC","public",360],["T_WHITESPACE"," ",360],["T_FUNCTION","function",360],["T_WHITESPACE"," ",360],["T_STRING","duplicateImageFromTmp",360],"(",["T_VARIABLE","$file",360],")",["T_WHITESPACE","\n    ",360],"{",["T_WHITESPACE","\n        ",361],["T_VARIABLE","$file",362],["T_WHITESPACE"," ",362],"=",["T_WHITESPACE"," ",362],["T_VARIABLE","$this",362],["T_OBJECT_OPERATOR","->",362],["T_STRING","getFilenameFromTmp",362],"(",["T_VARIABLE","$file",362],")",";",["T_WHITESPACE","\n\n        ",362],["T_VARIABLE","$destinationFile",364],["T_WHITESPACE"," ",364],"=",["T_WHITESPACE"," ",364],["T_VARIABLE","$this",364],["T_OBJECT_OPERATOR","->",364],["T_STRING","getUniqueFileName",364],"(",["T_VARIABLE","$file",364],",",["T_WHITESPACE"," ",364],["T_STRING","true",364],")",";",["T_WHITESPACE","\n        ",364],["T_IF","if",365],["T_WHITESPACE"," ",365],"(",["T_VARIABLE","$this",365],["T_OBJECT_OPERATOR","->",365],["T_STRING","fileStorageDb",365],["T_OBJECT_OPERATOR","->",365],["T_STRING","checkDbUsage",365],"(",")",")",["T_WHITESPACE"," ",365],"{",["T_WHITESPACE","\n            ",365],["T_VARIABLE","$this",366],["T_OBJECT_OPERATOR","->",366],["T_STRING","fileStorageDb",366],["T_OBJECT_OPERATOR","->",366],["T_STRING","copyFile",366],"(",["T_WHITESPACE","\n                ",366],["T_VARIABLE","$this",367],["T_OBJECT_OPERATOR","->",367],["T_STRING","mediaDirectory",367],["T_OBJECT_OPERATOR","->",367],["T_STRING","getAbsolutePath",367],"(",["T_VARIABLE","$this",367],["T_OBJECT_OPERATOR","->",367],["T_STRING","mediaConfig",367],["T_OBJECT_OPERATOR","->",367],["T_STRING","getTmpMediaShortUrl",367],"(",["T_VARIABLE","$file",367],")",")",",",["T_WHITESPACE","\n                ",367],["T_VARIABLE","$this",368],["T_OBJECT_OPERATOR","->",368],["T_STRING","mediaConfig",368],["T_OBJECT_OPERATOR","->",368],["T_STRING","getTmpMediaShortUrl",368],"(",["T_VARIABLE","$destinationFile",368],")",["T_WHITESPACE","\n            ",368],")",";",["T_WHITESPACE","\n        ",369],"}",["T_WHITESPACE"," ",370],["T_ELSE","else",370],["T_WHITESPACE"," ",370],"{",["T_WHITESPACE","\n            ",370],["T_VARIABLE","$this",371],["T_OBJECT_OPERATOR","->",371],["T_STRING","mediaDirectory",371],["T_OBJECT_OPERATOR","->",371],["T_STRING","copyFile",371],"(",["T_WHITESPACE","\n                ",371],["T_VARIABLE","$this",372],["T_OBJECT_OPERATOR","->",372],["T_STRING","mediaConfig",372],["T_OBJECT_OPERATOR","->",372],["T_STRING","getTmpMediaPath",372],"(",["T_VARIABLE","$file",372],")",",",["T_WHITESPACE","\n                ",372],["T_VARIABLE","$this",373],["T_OBJECT_OPERATOR","->",373],["T_STRING","mediaConfig",373],["T_OBJECT_OPERATOR","->",373],["T_STRING","getTmpMediaPath",373],"(",["T_VARIABLE","$destinationFile",373],")",["T_WHITESPACE","\n            ",373],")",";",["T_WHITESPACE","\n        ",374],"}",["T_WHITESPACE","\n        ",375],["T_RETURN","return",376],["T_WHITESPACE"," ",376],["T_STRING","str_replace",376],"(",["T_CONSTANT_ENCAPSED_STRING","'\\\\'",376],",",["T_WHITESPACE"," ",376],["T_CONSTANT_ENCAPSED_STRING","'\/'",376],",",["T_WHITESPACE"," ",376],["T_VARIABLE","$destinationFile",376],")",";",["T_WHITESPACE","\n    ",376],"}",["T_WHITESPACE","\n\n    ",377],["T_DOC_COMMENT","\/**\n     * Check whether file to move exists. Getting unique name\n     *\n     * @param string $file\n     * @param bool $forTmp\n     * @return string\n     *\/",379],["T_WHITESPACE","\n    ",385],["T_PROTECTED","protected",386],["T_WHITESPACE"," ",386],["T_FUNCTION","function",386],["T_WHITESPACE"," ",386],["T_STRING","getUniqueFileName",386],"(",["T_VARIABLE","$file",386],",",["T_WHITESPACE"," ",386],["T_VARIABLE","$forTmp",386],["T_WHITESPACE"," ",386],"=",["T_WHITESPACE"," ",386],["T_STRING","false",386],")",["T_WHITESPACE","\n    ",386],"{",["T_WHITESPACE","\n        ",387],["T_IF","if",388],["T_WHITESPACE"," ",388],"(",["T_VARIABLE","$this",388],["T_OBJECT_OPERATOR","->",388],["T_STRING","fileStorageDb",388],["T_OBJECT_OPERATOR","->",388],["T_STRING","checkDbUsage",388],"(",")",")",["T_WHITESPACE"," ",388],"{",["T_WHITESPACE","\n            ",388],["T_VARIABLE","$destFile",389],["T_WHITESPACE"," ",389],"=",["T_WHITESPACE"," ",389],["T_VARIABLE","$this",389],["T_OBJECT_OPERATOR","->",389],["T_STRING","fileStorageDb",389],["T_OBJECT_OPERATOR","->",389],["T_STRING","getUniqueFilename",389],"(",["T_WHITESPACE","\n                ",389],["T_VARIABLE","$this",390],["T_OBJECT_OPERATOR","->",390],["T_STRING","mediaConfig",390],["T_OBJECT_OPERATOR","->",390],["T_STRING","getBaseMediaUrlAddition",390],"(",")",",",["T_WHITESPACE","\n                ",390],["T_VARIABLE","$file",391],["T_WHITESPACE","\n            ",391],")",";",["T_WHITESPACE","\n        ",392],"}",["T_WHITESPACE"," ",393],["T_ELSE","else",393],["T_WHITESPACE"," ",393],"{",["T_WHITESPACE","\n            ",393],["T_VARIABLE","$destinationFile",394],["T_WHITESPACE"," ",394],"=",["T_WHITESPACE"," ",394],["T_VARIABLE","$forTmp",394],["T_WHITESPACE","\n                ",394],"?",["T_WHITESPACE"," ",395],["T_VARIABLE","$this",395],["T_OBJECT_OPERATOR","->",395],["T_STRING","mediaDirectory",395],["T_OBJECT_OPERATOR","->",395],["T_STRING","getAbsolutePath",395],"(",["T_VARIABLE","$this",395],["T_OBJECT_OPERATOR","->",395],["T_STRING","mediaConfig",395],["T_OBJECT_OPERATOR","->",395],["T_STRING","getTmpMediaPath",395],"(",["T_VARIABLE","$file",395],")",")",["T_WHITESPACE","\n                ",395],":",["T_WHITESPACE"," ",396],["T_VARIABLE","$this",396],["T_OBJECT_OPERATOR","->",396],["T_STRING","mediaDirectory",396],["T_OBJECT_OPERATOR","->",396],["T_STRING","getAbsolutePath",396],"(",["T_VARIABLE","$this",396],["T_OBJECT_OPERATOR","->",396],["T_STRING","mediaConfig",396],["T_OBJECT_OPERATOR","->",396],["T_STRING","getMediaPath",396],"(",["T_VARIABLE","$file",396],")",")",";",["T_WHITESPACE","\n            ",396],["T_VARIABLE","$destFile",397],["T_WHITESPACE"," ",397],"=",["T_WHITESPACE"," ",397],["T_STRING","dirname",397],"(",["T_VARIABLE","$file",397],")",["T_WHITESPACE"," ",397],".",["T_WHITESPACE"," ",397],["T_CONSTANT_ENCAPSED_STRING","'\/'",397],["T_WHITESPACE","\n                ",397],".",["T_WHITESPACE"," ",398],["T_NS_SEPARATOR","\\",398],["T_STRING","Magento",398],["T_NS_SEPARATOR","\\",398],["T_STRING","MediaStorage",398],["T_NS_SEPARATOR","\\",398],["T_STRING","Model",398],["T_NS_SEPARATOR","\\",398],["T_STRING","File",398],["T_NS_SEPARATOR","\\",398],["T_STRING","Uploader",398],["T_DOUBLE_COLON","::",398],["T_STRING","getNewFileName",398],"(",["T_VARIABLE","$destinationFile",398],")",";",["T_WHITESPACE","\n        ",398],"}",["T_WHITESPACE","\n\n        ",399],["T_RETURN","return",401],["T_WHITESPACE"," ",401],["T_VARIABLE","$destFile",401],";",["T_WHITESPACE","\n    ",401],"}",["T_WHITESPACE","\n\n    ",402],["T_DOC_COMMENT","\/**\n     * Get filename which is not duplicated with other files in media temporary and media directories\n     *\n     * @param string $fileName\n     * @param string $dispretionPath\n     * @return string\n     *\/",404],["T_WHITESPACE","\n    ",410],["T_PROTECTED","protected",411],["T_WHITESPACE"," ",411],["T_FUNCTION","function",411],["T_WHITESPACE"," ",411],["T_STRING","getNotDuplicatedFilename",411],"(",["T_VARIABLE","$fileName",411],",",["T_WHITESPACE"," ",411],["T_VARIABLE","$dispretionPath",411],")",["T_WHITESPACE","\n    ",411],"{",["T_WHITESPACE","\n        ",412],["T_VARIABLE","$fileMediaName",413],["T_WHITESPACE"," ",413],"=",["T_WHITESPACE"," ",413],["T_VARIABLE","$dispretionPath",413],["T_WHITESPACE"," ",413],".",["T_WHITESPACE"," ",413],["T_CONSTANT_ENCAPSED_STRING","'\/'",413],["T_WHITESPACE","\n            ",413],".",["T_WHITESPACE"," ",414],["T_NS_SEPARATOR","\\",414],["T_STRING","Magento",414],["T_NS_SEPARATOR","\\",414],["T_STRING","MediaStorage",414],["T_NS_SEPARATOR","\\",414],["T_STRING","Model",414],["T_NS_SEPARATOR","\\",414],["T_STRING","File",414],["T_NS_SEPARATOR","\\",414],["T_STRING","Uploader",414],["T_DOUBLE_COLON","::",414],["T_STRING","getNewFileName",414],"(",["T_VARIABLE","$this",414],["T_OBJECT_OPERATOR","->",414],["T_STRING","mediaConfig",414],["T_OBJECT_OPERATOR","->",414],["T_STRING","getMediaPath",414],"(",["T_VARIABLE","$fileName",414],")",")",";",["T_WHITESPACE","\n        ",414],["T_VARIABLE","$fileTmpMediaName",415],["T_WHITESPACE"," ",415],"=",["T_WHITESPACE"," ",415],["T_VARIABLE","$dispretionPath",415],["T_WHITESPACE"," ",415],".",["T_WHITESPACE"," ",415],["T_CONSTANT_ENCAPSED_STRING","'\/'",415],["T_WHITESPACE","\n            ",415],".",["T_WHITESPACE"," ",416],["T_NS_SEPARATOR","\\",416],["T_STRING","Magento",416],["T_NS_SEPARATOR","\\",416],["T_STRING","MediaStorage",416],["T_NS_SEPARATOR","\\",416],["T_STRING","Model",416],["T_NS_SEPARATOR","\\",416],["T_STRING","File",416],["T_NS_SEPARATOR","\\",416],["T_STRING","Uploader",416],["T_DOUBLE_COLON","::",416],["T_STRING","getNewFileName",416],"(",["T_VARIABLE","$this",416],["T_OBJECT_OPERATOR","->",416],["T_STRING","mediaConfig",416],["T_OBJECT_OPERATOR","->",416],["T_STRING","getTmpMediaPath",416],"(",["T_VARIABLE","$fileName",416],")",")",";",["T_WHITESPACE","\n\n        ",416],["T_IF","if",418],["T_WHITESPACE"," ",418],"(",["T_VARIABLE","$fileMediaName",418],["T_WHITESPACE"," ",418],["T_IS_NOT_EQUAL","!=",418],["T_WHITESPACE"," ",418],["T_VARIABLE","$fileTmpMediaName",418],")",["T_WHITESPACE"," ",418],"{",["T_WHITESPACE","\n            ",418],["T_IF","if",419],["T_WHITESPACE"," ",419],"(",["T_VARIABLE","$fileMediaName",419],["T_WHITESPACE"," ",419],["T_IS_NOT_EQUAL","!=",419],["T_WHITESPACE"," ",419],["T_VARIABLE","$fileName",419],")",["T_WHITESPACE"," ",419],"{",["T_WHITESPACE","\n                ",419],["T_RETURN","return",420],["T_WHITESPACE"," ",420],["T_VARIABLE","$this",420],["T_OBJECT_OPERATOR","->",420],["T_STRING","getNotDuplicatedFilename",420],"(",["T_WHITESPACE","\n                    ",420],["T_VARIABLE","$fileMediaName",421],",",["T_WHITESPACE","\n                    ",421],["T_VARIABLE","$dispretionPath",422],["T_WHITESPACE","\n                ",422],")",";",["T_WHITESPACE","\n            ",423],"}",["T_WHITESPACE"," ",424],["T_ELSEIF","elseif",424],["T_WHITESPACE"," ",424],"(",["T_VARIABLE","$fileTmpMediaName",424],["T_WHITESPACE"," ",424],["T_IS_NOT_EQUAL","!=",424],["T_WHITESPACE"," ",424],["T_VARIABLE","$fileName",424],")",["T_WHITESPACE"," ",424],"{",["T_WHITESPACE","\n                ",424],["T_RETURN","return",425],["T_WHITESPACE"," ",425],["T_VARIABLE","$this",425],["T_OBJECT_OPERATOR","->",425],["T_STRING","getNotDuplicatedFilename",425],"(",["T_WHITESPACE","\n                    ",425],["T_VARIABLE","$fileTmpMediaName",426],",",["T_WHITESPACE","\n                    ",426],["T_VARIABLE","$dispretionPath",427],["T_WHITESPACE","\n                ",427],")",";",["T_WHITESPACE","\n            ",428],"}",["T_WHITESPACE","\n        ",429],"}",["T_WHITESPACE","\n\n        ",430],["T_RETURN","return",432],["T_WHITESPACE"," ",432],["T_VARIABLE","$fileMediaName",432],";",["T_WHITESPACE","\n    ",432],"}",["T_WHITESPACE","\n\n    ",433],["T_DOC_COMMENT","\/**\n     * Retrieve data for update attribute\n     *\n     * @param  \\Magento\\Catalog\\Model\\Product $object\n     * @return array\n     *\/",435],["T_WHITESPACE","\n    ",440],["T_PUBLIC","public",441],["T_WHITESPACE"," ",441],["T_FUNCTION","function",441],["T_WHITESPACE"," ",441],["T_STRING","getAffectedFields",441],"(",["T_VARIABLE","$object",441],")",["T_WHITESPACE","\n    ",441],"{",["T_WHITESPACE","\n        ",442],["T_VARIABLE","$data",443],["T_WHITESPACE"," ",443],"=",["T_WHITESPACE"," ",443],"[","]",";",["T_WHITESPACE","\n        ",443],["T_VARIABLE","$images",444],["T_WHITESPACE"," ",444],"=",["T_WHITESPACE"," ",444],["T_ARRAY_CAST","(array)",444],["T_VARIABLE","$object",444],["T_OBJECT_OPERATOR","->",444],["T_STRING","getData",444],"(",["T_VARIABLE","$this",444],["T_OBJECT_OPERATOR","->",444],["T_STRING","getAttribute",444],"(",")",["T_OBJECT_OPERATOR","->",444],["T_STRING","getName",444],"(",")",")",";",["T_WHITESPACE","\n        ",444],["T_VARIABLE","$tableName",445],["T_WHITESPACE"," ",445],"=",["T_WHITESPACE"," ",445],["T_VARIABLE","$this",445],["T_OBJECT_OPERATOR","->",445],["T_STRING","resourceModel",445],["T_OBJECT_OPERATOR","->",445],["T_STRING","getMainTable",445],"(",")",";",["T_WHITESPACE","\n        ",445],["T_FOREACH","foreach",446],["T_WHITESPACE"," ",446],"(",["T_VARIABLE","$images",446],"[",["T_CONSTANT_ENCAPSED_STRING","'images'",446],"]",["T_WHITESPACE"," ",446],["T_AS","as",446],["T_WHITESPACE"," ",446],["T_VARIABLE","$value",446],")",["T_WHITESPACE"," ",446],"{",["T_WHITESPACE","\n            ",446],["T_IF","if",447],["T_WHITESPACE"," ",447],"(",["T_EMPTY","empty",447],"(",["T_VARIABLE","$value",447],"[",["T_CONSTANT_ENCAPSED_STRING","'value_id'",447],"]",")",")",["T_WHITESPACE"," ",447],"{",["T_WHITESPACE","\n                ",447],["T_CONTINUE","continue",448],";",["T_WHITESPACE","\n            ",448],"}",["T_WHITESPACE","\n            ",449],["T_VARIABLE","$data",450],"[",["T_VARIABLE","$tableName",450],"]","[","]",["T_WHITESPACE"," ",450],"=",["T_WHITESPACE"," ",450],"[",["T_WHITESPACE","\n                ",450],["T_CONSTANT_ENCAPSED_STRING","'value_id'",451],["T_WHITESPACE"," ",451],["T_DOUBLE_ARROW","=>",451],["T_WHITESPACE"," ",451],["T_VARIABLE","$value",451],"[",["T_CONSTANT_ENCAPSED_STRING","'value_id'",451],"]",",",["T_WHITESPACE","\n                ",451],["T_CONSTANT_ENCAPSED_STRING","'attribute_id'",452],["T_WHITESPACE"," ",452],["T_DOUBLE_ARROW","=>",452],["T_WHITESPACE"," ",452],["T_VARIABLE","$this",452],["T_OBJECT_OPERATOR","->",452],["T_STRING","getAttribute",452],"(",")",["T_OBJECT_OPERATOR","->",452],["T_STRING","getAttributeId",452],"(",")",",",["T_WHITESPACE","\n                ",452],["T_CONSTANT_ENCAPSED_STRING","'entity_id'",453],["T_WHITESPACE"," ",453],["T_DOUBLE_ARROW","=>",453],["T_WHITESPACE"," ",453],["T_VARIABLE","$object",453],["T_OBJECT_OPERATOR","->",453],["T_STRING","getId",453],"(",")",",",["T_WHITESPACE","\n            ",453],"]",";",["T_WHITESPACE","\n        ",454],"}",["T_WHITESPACE","\n        ",455],["T_RETURN","return",456],["T_WHITESPACE"," ",456],["T_VARIABLE","$data",456],";",["T_WHITESPACE","\n    ",456],"}",["T_WHITESPACE","\n\n    ",457],["T_DOC_COMMENT","\/**\n     * Attribute value is not to be saved in a conventional way, separate table is used to store the complex value\n     *\n     * {@inheritdoc}\n     *\/",459],["T_WHITESPACE","\n    ",463],["T_PUBLIC","public",464],["T_WHITESPACE"," ",464],["T_FUNCTION","function",464],["T_WHITESPACE"," ",464],["T_STRING","isScalar",464],"(",")",["T_WHITESPACE","\n    ",464],"{",["T_WHITESPACE","\n        ",465],["T_RETURN","return",466],["T_WHITESPACE"," ",466],["T_STRING","false",466],";",["T_WHITESPACE","\n    ",466],"}",["T_WHITESPACE","\n",467],"}",["T_WHITESPACE","\n",468]]
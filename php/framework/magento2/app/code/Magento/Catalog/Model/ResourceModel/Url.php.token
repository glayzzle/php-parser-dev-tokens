[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Copyright \u00c2\u00a9 2013-2017 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n *\/",2],["T_WHITESPACE","\n",5],["T_NAMESPACE","namespace",6],["T_WHITESPACE"," ",6],["T_STRING","Magento",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Catalog",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Model",6],["T_NS_SEPARATOR","\\",6],["T_STRING","ResourceModel",6],";",["T_WHITESPACE","\n\n",6],["T_DOC_COMMENT","\/**\n * Catalog url rewrite resource model\n *\n * @author      Magento Core Team <core@magentocommerce.com>\n *\/",8],["T_WHITESPACE","\n",12],["T_USE","use",13],["T_WHITESPACE"," ",13],["T_STRING","Magento",13],["T_NS_SEPARATOR","\\",13],["T_STRING","CatalogUrlRewrite",13],["T_NS_SEPARATOR","\\",13],["T_STRING","Model",13],["T_NS_SEPARATOR","\\",13],["T_STRING","ProductUrlRewriteGenerator",13],";",["T_WHITESPACE","\n",13],["T_USE","use",14],["T_WHITESPACE"," ",14],["T_STRING","Magento",14],["T_NS_SEPARATOR","\\",14],["T_STRING","Catalog",14],["T_NS_SEPARATOR","\\",14],["T_STRING","Api",14],["T_NS_SEPARATOR","\\",14],["T_STRING","Data",14],["T_NS_SEPARATOR","\\",14],["T_STRING","CategoryInterface",14],";",["T_WHITESPACE","\n",14],["T_USE","use",15],["T_WHITESPACE"," ",15],["T_STRING","Magento",15],["T_NS_SEPARATOR","\\",15],["T_STRING","Framework",15],["T_NS_SEPARATOR","\\",15],["T_STRING","EntityManager",15],["T_NS_SEPARATOR","\\",15],["T_STRING","MetadataPool",15],";",["T_WHITESPACE","\n\n",15],["T_DOC_COMMENT","\/**\n * Class Url\n * @package Magento\\Catalog\\Model\\ResourceModel\n *\n * @SuppressWarnings(PHPMD.CouplingBetweenObjects)\n *\/",17],["T_WHITESPACE","\n",22],["T_CLASS","class",23],["T_WHITESPACE"," ",23],["T_STRING","Url",23],["T_WHITESPACE"," ",23],["T_EXTENDS","extends",23],["T_WHITESPACE"," ",23],["T_NS_SEPARATOR","\\",23],["T_STRING","Magento",23],["T_NS_SEPARATOR","\\",23],["T_STRING","Framework",23],["T_NS_SEPARATOR","\\",23],["T_STRING","Model",23],["T_NS_SEPARATOR","\\",23],["T_STRING","ResourceModel",23],["T_NS_SEPARATOR","\\",23],["T_STRING","Db",23],["T_NS_SEPARATOR","\\",23],["T_STRING","AbstractDb",23],["T_WHITESPACE","\n",23],"{",["T_WHITESPACE","\n    ",24],["T_DOC_COMMENT","\/**\n     * Stores configuration array\n     *\n     * @var array\n     *\/",25],["T_WHITESPACE","\n    ",29],["T_PROTECTED","protected",30],["T_WHITESPACE"," ",30],["T_VARIABLE","$_stores",30],";",["T_WHITESPACE","\n\n    ",30],["T_DOC_COMMENT","\/**\n     * Category attribute properties cache\n     *\n     * @var array\n     *\/",32],["T_WHITESPACE","\n    ",36],["T_PROTECTED","protected",37],["T_WHITESPACE"," ",37],["T_VARIABLE","$_categoryAttributes",37],["T_WHITESPACE"," ",37],"=",["T_WHITESPACE"," ",37],"[","]",";",["T_WHITESPACE","\n\n    ",37],["T_DOC_COMMENT","\/**\n     * Product attribute properties cache\n     *\n     * @var array\n     *\/",39],["T_WHITESPACE","\n    ",43],["T_PROTECTED","protected",44],["T_WHITESPACE"," ",44],["T_VARIABLE","$_productAttributes",44],["T_WHITESPACE"," ",44],"=",["T_WHITESPACE"," ",44],"[","]",";",["T_WHITESPACE","\n\n    ",44],["T_DOC_COMMENT","\/**\n     * Limit products for select\n     *\n     * @var int\n     *\/",46],["T_WHITESPACE","\n    ",50],["T_PROTECTED","protected",51],["T_WHITESPACE"," ",51],["T_VARIABLE","$_productLimit",51],["T_WHITESPACE"," ",51],"=",["T_WHITESPACE"," ",51],["T_LNUMBER","250",51],";",["T_WHITESPACE","\n\n    ",51],["T_DOC_COMMENT","\/**\n     * Cache of root category children ids\n     *\n     * @var array\n     *\/",53],["T_WHITESPACE","\n    ",57],["T_PROTECTED","protected",58],["T_WHITESPACE"," ",58],["T_VARIABLE","$_rootChildrenIds",58],["T_WHITESPACE"," ",58],"=",["T_WHITESPACE"," ",58],"[","]",";",["T_WHITESPACE","\n\n    ",58],["T_DOC_COMMENT","\/**\n     * @var \\Psr\\Log\\LoggerInterface\n     *\/",60],["T_WHITESPACE","\n    ",62],["T_PROTECTED","protected",63],["T_WHITESPACE"," ",63],["T_VARIABLE","$_logger",63],";",["T_WHITESPACE","\n\n    ",63],["T_DOC_COMMENT","\/**\n     * Catalog category\n     *\n     * @var \\Magento\\Catalog\\Model\\Category\n     *\/",65],["T_WHITESPACE","\n    ",69],["T_PROTECTED","protected",70],["T_WHITESPACE"," ",70],["T_VARIABLE","$_catalogCategory",70],";",["T_WHITESPACE","\n\n    ",70],["T_DOC_COMMENT","\/**\n     * Catalog product\n     *\n     * @var \\Magento\\Catalog\\Model\\Product\n     *\/",72],["T_WHITESPACE","\n    ",76],["T_PROTECTED","protected",77],["T_WHITESPACE"," ",77],["T_VARIABLE","$_catalogProduct",77],";",["T_WHITESPACE","\n\n    ",77],["T_DOC_COMMENT","\/**\n     * Eav config\n     *\n     * @var \\Magento\\Eav\\Model\\Config\n     *\/",79],["T_WHITESPACE","\n    ",83],["T_PROTECTED","protected",84],["T_WHITESPACE"," ",84],["T_VARIABLE","$_eavConfig",84],";",["T_WHITESPACE","\n\n    ",84],["T_DOC_COMMENT","\/**\n     * Store manager\n     *\n     * @var \\Magento\\Store\\Model\\StoreManagerInterface\n     *\/",86],["T_WHITESPACE","\n    ",90],["T_PROTECTED","protected",91],["T_WHITESPACE"," ",91],["T_VARIABLE","$_storeManager",91],";",["T_WHITESPACE","\n\n    ",91],["T_DOC_COMMENT","\/**\n     * @var Product\n     *\/",93],["T_WHITESPACE","\n    ",95],["T_PROTECTED","protected",96],["T_WHITESPACE"," ",96],["T_VARIABLE","$productResource",96],";",["T_WHITESPACE","\n\n    ",96],["T_DOC_COMMENT","\/**\n     * @var MetadataPool\n     *\/",98],["T_WHITESPACE","\n    ",100],["T_PROTECTED","protected",101],["T_WHITESPACE"," ",101],["T_VARIABLE","$metadataPool",101],";",["T_WHITESPACE","\n\n    ",101],["T_DOC_COMMENT","\/**\n     * Url constructor.\n     * @param \\Magento\\Framework\\Model\\ResourceModel\\Db\\Context $context\n     * @param \\Magento\\Store\\Model\\StoreManagerInterface $storeManager\n     * @param \\Magento\\Eav\\Model\\Config $eavConfig\n     * @param Product $productResource\n     * @param \\Magento\\Catalog\\Model\\Category $catalogCategory\n     * @param \\Psr\\Log\\LoggerInterface $logger\n     * @param null $connectionName\n     *\/",103],["T_WHITESPACE","\n    ",112],["T_PUBLIC","public",113],["T_WHITESPACE"," ",113],["T_FUNCTION","function",113],["T_WHITESPACE"," ",113],["T_STRING","__construct",113],"(",["T_WHITESPACE","\n        ",113],["T_NS_SEPARATOR","\\",114],["T_STRING","Magento",114],["T_NS_SEPARATOR","\\",114],["T_STRING","Framework",114],["T_NS_SEPARATOR","\\",114],["T_STRING","Model",114],["T_NS_SEPARATOR","\\",114],["T_STRING","ResourceModel",114],["T_NS_SEPARATOR","\\",114],["T_STRING","Db",114],["T_NS_SEPARATOR","\\",114],["T_STRING","Context",114],["T_WHITESPACE"," ",114],["T_VARIABLE","$context",114],",",["T_WHITESPACE","\n        ",114],["T_NS_SEPARATOR","\\",115],["T_STRING","Magento",115],["T_NS_SEPARATOR","\\",115],["T_STRING","Store",115],["T_NS_SEPARATOR","\\",115],["T_STRING","Model",115],["T_NS_SEPARATOR","\\",115],["T_STRING","StoreManagerInterface",115],["T_WHITESPACE"," ",115],["T_VARIABLE","$storeManager",115],",",["T_WHITESPACE","\n        ",115],["T_NS_SEPARATOR","\\",116],["T_STRING","Magento",116],["T_NS_SEPARATOR","\\",116],["T_STRING","Eav",116],["T_NS_SEPARATOR","\\",116],["T_STRING","Model",116],["T_NS_SEPARATOR","\\",116],["T_STRING","Config",116],["T_WHITESPACE"," ",116],["T_VARIABLE","$eavConfig",116],",",["T_WHITESPACE","\n        ",116],["T_STRING","Product",117],["T_WHITESPACE"," ",117],["T_VARIABLE","$productResource",117],",",["T_WHITESPACE","\n        ",117],["T_NS_SEPARATOR","\\",118],["T_STRING","Magento",118],["T_NS_SEPARATOR","\\",118],["T_STRING","Catalog",118],["T_NS_SEPARATOR","\\",118],["T_STRING","Model",118],["T_NS_SEPARATOR","\\",118],["T_STRING","Category",118],["T_WHITESPACE"," ",118],["T_VARIABLE","$catalogCategory",118],",",["T_WHITESPACE","\n        ",118],["T_NS_SEPARATOR","\\",119],["T_STRING","Psr",119],["T_NS_SEPARATOR","\\",119],["T_STRING","Log",119],["T_NS_SEPARATOR","\\",119],["T_STRING","LoggerInterface",119],["T_WHITESPACE"," ",119],["T_VARIABLE","$logger",119],",",["T_WHITESPACE","\n        ",119],["T_VARIABLE","$connectionName",120],["T_WHITESPACE"," ",120],"=",["T_WHITESPACE"," ",120],["T_STRING","null",120],["T_WHITESPACE","\n    ",120],")",["T_WHITESPACE"," ",121],"{",["T_WHITESPACE","\n        ",121],["T_VARIABLE","$this",122],["T_OBJECT_OPERATOR","->",122],["T_STRING","_storeManager",122],["T_WHITESPACE"," ",122],"=",["T_WHITESPACE"," ",122],["T_VARIABLE","$storeManager",122],";",["T_WHITESPACE","\n        ",122],["T_VARIABLE","$this",123],["T_OBJECT_OPERATOR","->",123],["T_STRING","_eavConfig",123],["T_WHITESPACE"," ",123],"=",["T_WHITESPACE"," ",123],["T_VARIABLE","$eavConfig",123],";",["T_WHITESPACE","\n        ",123],["T_VARIABLE","$this",124],["T_OBJECT_OPERATOR","->",124],["T_STRING","productResource",124],["T_WHITESPACE"," ",124],"=",["T_WHITESPACE"," ",124],["T_VARIABLE","$productResource",124],";",["T_WHITESPACE","\n        ",124],["T_VARIABLE","$this",125],["T_OBJECT_OPERATOR","->",125],["T_STRING","_catalogCategory",125],["T_WHITESPACE"," ",125],"=",["T_WHITESPACE"," ",125],["T_VARIABLE","$catalogCategory",125],";",["T_WHITESPACE","\n        ",125],["T_VARIABLE","$this",126],["T_OBJECT_OPERATOR","->",126],["T_STRING","_logger",126],["T_WHITESPACE"," ",126],"=",["T_WHITESPACE"," ",126],["T_VARIABLE","$logger",126],";",["T_WHITESPACE","\n        ",126],["T_STRING","parent",127],["T_DOUBLE_COLON","::",127],["T_STRING","__construct",127],"(",["T_VARIABLE","$context",127],",",["T_WHITESPACE"," ",127],["T_VARIABLE","$connectionName",127],")",";",["T_WHITESPACE","\n    ",127],"}",["T_WHITESPACE","\n\n    ",128],["T_DOC_COMMENT","\/**\n     * Load core Url rewrite model\n     *\n     * @return void\n     *\/",130],["T_WHITESPACE","\n    ",134],["T_PROTECTED","protected",135],["T_WHITESPACE"," ",135],["T_FUNCTION","function",135],["T_WHITESPACE"," ",135],["T_STRING","_construct",135],"(",")",["T_WHITESPACE","\n    ",135],"{",["T_WHITESPACE","\n        ",136],["T_VARIABLE","$this",137],["T_OBJECT_OPERATOR","->",137],["T_STRING","_init",137],"(",["T_CONSTANT_ENCAPSED_STRING","'url_rewrite'",137],",",["T_WHITESPACE"," ",137],["T_CONSTANT_ENCAPSED_STRING","'url_rewrite_id'",137],")",";",["T_WHITESPACE","\n    ",137],"}",["T_WHITESPACE","\n\n    ",138],["T_DOC_COMMENT","\/**\n     * Retrieve stores array or store model\n     *\n     * @param int $storeId\n     * @return \\Magento\\Store\\Model\\Store|\\Magento\\Store\\Model\\Store[]\n     *\/",140],["T_WHITESPACE","\n    ",145],["T_PUBLIC","public",146],["T_WHITESPACE"," ",146],["T_FUNCTION","function",146],["T_WHITESPACE"," ",146],["T_STRING","getStores",146],"(",["T_VARIABLE","$storeId",146],["T_WHITESPACE"," ",146],"=",["T_WHITESPACE"," ",146],["T_STRING","null",146],")",["T_WHITESPACE","\n    ",146],"{",["T_WHITESPACE","\n        ",147],["T_IF","if",148],["T_WHITESPACE"," ",148],"(",["T_VARIABLE","$this",148],["T_OBJECT_OPERATOR","->",148],["T_STRING","_stores",148],["T_WHITESPACE"," ",148],["T_IS_IDENTICAL","===",148],["T_WHITESPACE"," ",148],["T_STRING","null",148],")",["T_WHITESPACE"," ",148],"{",["T_WHITESPACE","\n            ",148],["T_VARIABLE","$this",149],["T_OBJECT_OPERATOR","->",149],["T_STRING","_stores",149],["T_WHITESPACE"," ",149],"=",["T_WHITESPACE"," ",149],["T_VARIABLE","$this",149],["T_OBJECT_OPERATOR","->",149],["T_STRING","_prepareStoreRootCategories",149],"(",["T_VARIABLE","$this",149],["T_OBJECT_OPERATOR","->",149],["T_STRING","_storeManager",149],["T_OBJECT_OPERATOR","->",149],["T_STRING","getStores",149],"(",")",")",";",["T_WHITESPACE","\n        ",149],"}",["T_WHITESPACE","\n        ",150],["T_IF","if",151],["T_WHITESPACE"," ",151],"(",["T_VARIABLE","$storeId",151],["T_WHITESPACE"," ",151],["T_BOOLEAN_AND","&&",151],["T_WHITESPACE"," ",151],["T_ISSET","isset",151],"(",["T_VARIABLE","$this",151],["T_OBJECT_OPERATOR","->",151],["T_STRING","_stores",151],"[",["T_VARIABLE","$storeId",151],"]",")",")",["T_WHITESPACE"," ",151],"{",["T_WHITESPACE","\n            ",151],["T_RETURN","return",152],["T_WHITESPACE"," ",152],["T_VARIABLE","$this",152],["T_OBJECT_OPERATOR","->",152],["T_STRING","_stores",152],"[",["T_VARIABLE","$storeId",152],"]",";",["T_WHITESPACE","\n        ",152],"}",["T_WHITESPACE","\n        ",153],["T_RETURN","return",154],["T_WHITESPACE"," ",154],["T_VARIABLE","$this",154],["T_OBJECT_OPERATOR","->",154],["T_STRING","_stores",154],";",["T_WHITESPACE","\n    ",154],"}",["T_WHITESPACE","\n\n    ",155],["T_DOC_COMMENT","\/**\n     * Retrieve category attributes\n     *\n     * @param string $attributeCode\n     * @param int|array $categoryIds\n     * @param int $storeId\n     * @return array\n     *\/",157],["T_WHITESPACE","\n    ",164],["T_PROTECTED","protected",165],["T_WHITESPACE"," ",165],["T_FUNCTION","function",165],["T_WHITESPACE"," ",165],["T_STRING","_getCategoryAttribute",165],"(",["T_VARIABLE","$attributeCode",165],",",["T_WHITESPACE"," ",165],["T_VARIABLE","$categoryIds",165],",",["T_WHITESPACE"," ",165],["T_VARIABLE","$storeId",165],")",["T_WHITESPACE","\n    ",165],"{",["T_WHITESPACE","\n        ",166],["T_VARIABLE","$linkField",167],["T_WHITESPACE"," ",167],"=",["T_WHITESPACE"," ",167],["T_VARIABLE","$this",167],["T_OBJECT_OPERATOR","->",167],["T_STRING","getMetadataPool",167],"(",")",["T_OBJECT_OPERATOR","->",167],["T_STRING","getMetadata",167],"(",["T_STRING","CategoryInterface",167],["T_DOUBLE_COLON","::",167],["T_CLASS","class",167],")",["T_OBJECT_OPERATOR","->",167],["T_STRING","getLinkField",167],"(",")",";",["T_WHITESPACE","\n        ",167],["T_VARIABLE","$identifierFiled",168],["T_WHITESPACE"," ",168],"=",["T_WHITESPACE"," ",168],["T_VARIABLE","$this",168],["T_OBJECT_OPERATOR","->",168],["T_STRING","getMetadataPool",168],"(",")",["T_OBJECT_OPERATOR","->",168],["T_STRING","getMetadata",168],"(",["T_STRING","CategoryInterface",168],["T_DOUBLE_COLON","::",168],["T_CLASS","class",168],")",["T_OBJECT_OPERATOR","->",168],["T_STRING","getIdentifierField",168],"(",")",";",["T_WHITESPACE","\n\n        ",168],["T_VARIABLE","$connection",170],["T_WHITESPACE"," ",170],"=",["T_WHITESPACE"," ",170],["T_VARIABLE","$this",170],["T_OBJECT_OPERATOR","->",170],["T_STRING","getConnection",170],"(",")",";",["T_WHITESPACE","\n        ",170],["T_IF","if",171],["T_WHITESPACE"," ",171],"(","!",["T_ISSET","isset",171],"(",["T_VARIABLE","$this",171],["T_OBJECT_OPERATOR","->",171],["T_STRING","_categoryAttributes",171],"[",["T_VARIABLE","$attributeCode",171],"]",")",")",["T_WHITESPACE"," ",171],"{",["T_WHITESPACE","\n            ",171],["T_VARIABLE","$attribute",172],["T_WHITESPACE"," ",172],"=",["T_WHITESPACE"," ",172],["T_VARIABLE","$this",172],["T_OBJECT_OPERATOR","->",172],["T_STRING","_catalogCategory",172],["T_OBJECT_OPERATOR","->",172],["T_STRING","getResource",172],"(",")",["T_OBJECT_OPERATOR","->",172],["T_STRING","getAttribute",172],"(",["T_VARIABLE","$attributeCode",172],")",";",["T_WHITESPACE","\n\n            ",172],["T_VARIABLE","$this",174],["T_OBJECT_OPERATOR","->",174],["T_STRING","_categoryAttributes",174],"[",["T_VARIABLE","$attributeCode",174],"]",["T_WHITESPACE"," ",174],"=",["T_WHITESPACE"," ",174],"[",["T_WHITESPACE","\n                ",174],["T_CONSTANT_ENCAPSED_STRING","'entity_type_id'",175],["T_WHITESPACE"," ",175],["T_DOUBLE_ARROW","=>",175],["T_WHITESPACE"," ",175],["T_VARIABLE","$attribute",175],["T_OBJECT_OPERATOR","->",175],["T_STRING","getEntityTypeId",175],"(",")",",",["T_WHITESPACE","\n                ",175],["T_CONSTANT_ENCAPSED_STRING","'attribute_id'",176],["T_WHITESPACE"," ",176],["T_DOUBLE_ARROW","=>",176],["T_WHITESPACE"," ",176],["T_VARIABLE","$attribute",176],["T_OBJECT_OPERATOR","->",176],["T_STRING","getId",176],"(",")",",",["T_WHITESPACE","\n                ",176],["T_CONSTANT_ENCAPSED_STRING","'table'",177],["T_WHITESPACE"," ",177],["T_DOUBLE_ARROW","=>",177],["T_WHITESPACE"," ",177],["T_VARIABLE","$attribute",177],["T_OBJECT_OPERATOR","->",177],["T_STRING","getBackend",177],"(",")",["T_OBJECT_OPERATOR","->",177],["T_STRING","getTable",177],"(",")",",",["T_WHITESPACE","\n                ",177],["T_CONSTANT_ENCAPSED_STRING","'is_global'",178],["T_WHITESPACE"," ",178],["T_DOUBLE_ARROW","=>",178],["T_WHITESPACE"," ",178],["T_VARIABLE","$attribute",178],["T_OBJECT_OPERATOR","->",178],["T_STRING","getIsGlobal",178],"(",")",",",["T_WHITESPACE","\n                ",178],["T_CONSTANT_ENCAPSED_STRING","'is_static'",179],["T_WHITESPACE"," ",179],["T_DOUBLE_ARROW","=>",179],["T_WHITESPACE"," ",179],["T_VARIABLE","$attribute",179],["T_OBJECT_OPERATOR","->",179],["T_STRING","isStatic",179],"(",")",",",["T_WHITESPACE","\n            ",179],"]",";",["T_WHITESPACE","\n            ",180],["T_UNSET","unset",181],"(",["T_VARIABLE","$attribute",181],")",";",["T_WHITESPACE","\n        ",181],"}",["T_WHITESPACE","\n\n        ",182],["T_IF","if",184],["T_WHITESPACE"," ",184],"(","!",["T_STRING","is_array",184],"(",["T_VARIABLE","$categoryIds",184],")",")",["T_WHITESPACE"," ",184],"{",["T_WHITESPACE","\n            ",184],["T_VARIABLE","$categoryIds",185],["T_WHITESPACE"," ",185],"=",["T_WHITESPACE"," ",185],"[",["T_VARIABLE","$categoryIds",185],"]",";",["T_WHITESPACE","\n        ",185],"}",["T_WHITESPACE","\n\n        ",186],["T_VARIABLE","$attributeTable",188],["T_WHITESPACE"," ",188],"=",["T_WHITESPACE"," ",188],["T_VARIABLE","$this",188],["T_OBJECT_OPERATOR","->",188],["T_STRING","_categoryAttributes",188],"[",["T_VARIABLE","$attributeCode",188],"]","[",["T_CONSTANT_ENCAPSED_STRING","'table'",188],"]",";",["T_WHITESPACE","\n        ",188],["T_VARIABLE","$select",189],["T_WHITESPACE"," ",189],"=",["T_WHITESPACE"," ",189],["T_VARIABLE","$connection",189],["T_OBJECT_OPERATOR","->",189],["T_STRING","select",189],"(",")",";",["T_WHITESPACE","\n        ",189],["T_VARIABLE","$bind",190],["T_WHITESPACE"," ",190],"=",["T_WHITESPACE"," ",190],"[","]",";",["T_WHITESPACE","\n        ",190],["T_IF","if",191],["T_WHITESPACE"," ",191],"(",["T_VARIABLE","$this",191],["T_OBJECT_OPERATOR","->",191],["T_STRING","_categoryAttributes",191],"[",["T_VARIABLE","$attributeCode",191],"]","[",["T_CONSTANT_ENCAPSED_STRING","'is_static'",191],"]",")",["T_WHITESPACE"," ",191],"{",["T_WHITESPACE","\n            ",191],["T_VARIABLE","$select",192],["T_OBJECT_OPERATOR","->",192],["T_STRING","from",192],"(",["T_WHITESPACE","\n                ",192],["T_VARIABLE","$this",193],["T_OBJECT_OPERATOR","->",193],["T_STRING","getTable",193],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog_category_entity'",193],")",",",["T_WHITESPACE","\n                ",193],"[",["T_CONSTANT_ENCAPSED_STRING","'value'",194],["T_WHITESPACE"," ",194],["T_DOUBLE_ARROW","=>",194],["T_WHITESPACE"," ",194],["T_VARIABLE","$attributeCode",194],",",["T_WHITESPACE"," ",194],["T_CONSTANT_ENCAPSED_STRING","'entity_id'",194],["T_WHITESPACE"," ",194],["T_DOUBLE_ARROW","=>",194],["T_WHITESPACE"," ",194],["T_CONSTANT_ENCAPSED_STRING","'entity_id'",194],"]",["T_WHITESPACE","\n            ",194],")",["T_OBJECT_OPERATOR","->",195],["T_STRING","where",195],"(",["T_WHITESPACE","\n                ",195],["T_CONSTANT_ENCAPSED_STRING","'entity_id IN(?)'",196],",",["T_WHITESPACE","\n                ",196],["T_VARIABLE","$categoryIds",197],["T_WHITESPACE","\n            ",197],")",";",["T_WHITESPACE","\n        ",198],"}",["T_WHITESPACE"," ",199],["T_ELSEIF","elseif",199],["T_WHITESPACE"," ",199],"(",["T_VARIABLE","$this",199],["T_OBJECT_OPERATOR","->",199],["T_STRING","_categoryAttributes",199],"[",["T_VARIABLE","$attributeCode",199],"]","[",["T_CONSTANT_ENCAPSED_STRING","'is_global'",199],"]",["T_WHITESPACE"," ",199],["T_BOOLEAN_OR","||",199],["T_WHITESPACE"," ",199],["T_VARIABLE","$storeId",199],["T_WHITESPACE"," ",199],["T_IS_EQUAL","==",199],["T_WHITESPACE"," ",199],["T_LNUMBER","0",199],")",["T_WHITESPACE"," ",199],"{",["T_WHITESPACE","\n            ",199],["T_VARIABLE","$select",200],["T_OBJECT_OPERATOR","->",200],["T_STRING","from",200],"(",["T_WHITESPACE","\n                ",200],"[",["T_CONSTANT_ENCAPSED_STRING","'t1'",201],["T_WHITESPACE"," ",201],["T_DOUBLE_ARROW","=>",201],["T_VARIABLE","$this",201],["T_OBJECT_OPERATOR","->",201],["T_STRING","getTable",201],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog_category_entity'",201],")","]",",",["T_WHITESPACE","\n                ",201],"[",["T_VARIABLE","$identifierFiled",202],"]",["T_WHITESPACE","\n            ",202],")",["T_OBJECT_OPERATOR","->",203],["T_STRING","joinLeft",203],"(",["T_WHITESPACE","\n                ",203],"[",["T_CONSTANT_ENCAPSED_STRING","'e'",204],["T_WHITESPACE"," ",204],["T_DOUBLE_ARROW","=>",204],["T_WHITESPACE"," ",204],["T_VARIABLE","$attributeTable",204],"]",",",["T_WHITESPACE","\n                ",204],"\"",["T_ENCAPSED_AND_WHITESPACE","t1.",205],["T_CURLY_OPEN","{",205],["T_VARIABLE","$linkField",205],"}",["T_ENCAPSED_AND_WHITESPACE"," = e.",205],["T_CURLY_OPEN","{",205],["T_VARIABLE","$linkField",205],"}","\"",",",["T_WHITESPACE","\n                ",205],"[",["T_CONSTANT_ENCAPSED_STRING","'value'",206],"]",["T_WHITESPACE","\n            ",206],")",["T_OBJECT_OPERATOR","->",207],["T_STRING","where",207],"(",["T_WHITESPACE","\n                ",207],"\"",["T_ENCAPSED_AND_WHITESPACE","t1.",208],["T_CURLY_OPEN","{",208],["T_VARIABLE","$identifierFiled",208],"}",["T_ENCAPSED_AND_WHITESPACE"," IN(?)",208],"\"",",",["T_WHITESPACE","\n                ",208],["T_VARIABLE","$categoryIds",209],["T_WHITESPACE","\n            ",209],")",["T_OBJECT_OPERATOR","->",210],["T_STRING","where",210],"(",["T_WHITESPACE","\n                ",210],["T_CONSTANT_ENCAPSED_STRING","'e.attribute_id = :attribute_id'",211],["T_WHITESPACE","\n            ",211],")",["T_OBJECT_OPERATOR","->",212],["T_STRING","where",212],"(",["T_WHITESPACE","\n                ",212],["T_CONSTANT_ENCAPSED_STRING","'e.store_id = ?'",213],",",["T_WHITESPACE","\n                ",213],["T_LNUMBER","0",214],["T_WHITESPACE","\n            ",214],")",";",["T_WHITESPACE","\n\n            ",215],["T_VARIABLE","$bind",217],"[",["T_CONSTANT_ENCAPSED_STRING","'attribute_id'",217],"]",["T_WHITESPACE"," ",217],"=",["T_WHITESPACE"," ",217],["T_VARIABLE","$this",217],["T_OBJECT_OPERATOR","->",217],["T_STRING","_categoryAttributes",217],"[",["T_VARIABLE","$attributeCode",217],"]","[",["T_CONSTANT_ENCAPSED_STRING","'attribute_id'",217],"]",";",["T_WHITESPACE","\n        ",217],"}",["T_WHITESPACE"," ",218],["T_ELSE","else",218],["T_WHITESPACE"," ",218],"{",["T_WHITESPACE","\n            ",218],["T_VARIABLE","$valueExpr",219],["T_WHITESPACE"," ",219],"=",["T_WHITESPACE"," ",219],["T_VARIABLE","$connection",219],["T_OBJECT_OPERATOR","->",219],["T_STRING","getCheckSql",219],"(",["T_CONSTANT_ENCAPSED_STRING","'t2.value_id > 0'",219],",",["T_WHITESPACE"," ",219],["T_CONSTANT_ENCAPSED_STRING","'t2.value'",219],",",["T_WHITESPACE"," ",219],["T_CONSTANT_ENCAPSED_STRING","'t1.value'",219],")",";",["T_WHITESPACE","\n            ",219],["T_VARIABLE","$select",220],["T_OBJECT_OPERATOR","->",220],["T_STRING","from",220],"(",["T_WHITESPACE","\n                ",220],"[",["T_CONSTANT_ENCAPSED_STRING","'t1'",221],["T_WHITESPACE"," ",221],["T_DOUBLE_ARROW","=>",221],["T_WHITESPACE"," ",221],["T_VARIABLE","$attributeTable",221],"]",",",["T_WHITESPACE","\n                ",221],"[",["T_VARIABLE","$identifierFiled",222],["T_WHITESPACE"," ",222],["T_DOUBLE_ARROW","=>",222],["T_WHITESPACE"," ",222],["T_CONSTANT_ENCAPSED_STRING","'e.'",222],".",["T_VARIABLE","$identifierFiled",222],",",["T_WHITESPACE"," ",222],["T_CONSTANT_ENCAPSED_STRING","'value'",222],["T_WHITESPACE"," ",222],["T_DOUBLE_ARROW","=>",222],["T_WHITESPACE"," ",222],["T_VARIABLE","$valueExpr",222],"]",["T_WHITESPACE","\n            ",222],")",["T_OBJECT_OPERATOR","->",223],["T_STRING","joinLeft",223],"(",["T_WHITESPACE","\n                ",223],"[",["T_CONSTANT_ENCAPSED_STRING","'t2'",224],["T_WHITESPACE"," ",224],["T_DOUBLE_ARROW","=>",224],["T_WHITESPACE"," ",224],["T_VARIABLE","$attributeTable",224],"]",",",["T_WHITESPACE","\n                ",224],"\"",["T_ENCAPSED_AND_WHITESPACE","t1.",225],["T_CURLY_OPEN","{",225],["T_VARIABLE","$linkField",225],"}",["T_ENCAPSED_AND_WHITESPACE"," = t2.",225],["T_CURLY_OPEN","{",225],["T_VARIABLE","$linkField",225],"}",["T_ENCAPSED_AND_WHITESPACE"," AND t1.attribute_id = t2.attribute_id AND t2.store_id = :store_id",225],"\"",",",["T_WHITESPACE","\n                ",225],"[","]",["T_WHITESPACE","\n            ",226],")",["T_OBJECT_OPERATOR","->",227],["T_STRING","joinLeft",227],"(",["T_WHITESPACE","\n                ",227],"[",["T_CONSTANT_ENCAPSED_STRING","'e'",228],["T_WHITESPACE"," ",228],["T_DOUBLE_ARROW","=>",228],["T_WHITESPACE"," ",228],["T_VARIABLE","$this",228],["T_OBJECT_OPERATOR","->",228],["T_STRING","getTable",228],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog_category_entity'",228],")","]",",",["T_WHITESPACE","\n                ",228],"\"",["T_ENCAPSED_AND_WHITESPACE","e.",229],["T_CURLY_OPEN","{",229],["T_VARIABLE","$linkField",229],"}",["T_ENCAPSED_AND_WHITESPACE"," = t1.",229],["T_CURLY_OPEN","{",229],["T_VARIABLE","$linkField",229],"}","\"",",",["T_WHITESPACE","\n                ",229],"[","]",["T_WHITESPACE","\n            ",230],")",["T_OBJECT_OPERATOR","->",231],["T_STRING","where",231],"(",["T_WHITESPACE","\n                ",231],["T_CONSTANT_ENCAPSED_STRING","'t1.store_id = ?'",232],",",["T_WHITESPACE","\n                ",232],["T_LNUMBER","0",233],["T_WHITESPACE","\n            ",233],")",["T_OBJECT_OPERATOR","->",234],["T_STRING","where",234],"(",["T_WHITESPACE","\n                ",234],["T_CONSTANT_ENCAPSED_STRING","'t1.attribute_id = :attribute_id'",235],["T_WHITESPACE","\n            ",235],")",["T_OBJECT_OPERATOR","->",236],["T_STRING","where",236],"(",["T_WHITESPACE","\n                ",236],["T_CONSTANT_ENCAPSED_STRING","\"e.entity_id IN(?)\"",237],",",["T_WHITESPACE","\n                ",237],["T_VARIABLE","$categoryIds",238],["T_WHITESPACE","\n            ",238],")",["T_OBJECT_OPERATOR","->",239],["T_STRING","group",239],"(",["T_CONSTANT_ENCAPSED_STRING","'e.entity_id'",239],")",";",["T_WHITESPACE","\n\n            ",239],["T_VARIABLE","$bind",241],"[",["T_CONSTANT_ENCAPSED_STRING","'attribute_id'",241],"]",["T_WHITESPACE"," ",241],"=",["T_WHITESPACE"," ",241],["T_VARIABLE","$this",241],["T_OBJECT_OPERATOR","->",241],["T_STRING","_categoryAttributes",241],"[",["T_VARIABLE","$attributeCode",241],"]","[",["T_CONSTANT_ENCAPSED_STRING","'attribute_id'",241],"]",";",["T_WHITESPACE","\n            ",241],["T_VARIABLE","$bind",242],"[",["T_CONSTANT_ENCAPSED_STRING","'store_id'",242],"]",["T_WHITESPACE"," ",242],"=",["T_WHITESPACE"," ",242],["T_VARIABLE","$storeId",242],";",["T_WHITESPACE","\n        ",242],"}",["T_WHITESPACE","\n\n        ",243],["T_VARIABLE","$rowSet",245],["T_WHITESPACE"," ",245],"=",["T_WHITESPACE"," ",245],["T_VARIABLE","$connection",245],["T_OBJECT_OPERATOR","->",245],["T_STRING","fetchAll",245],"(",["T_VARIABLE","$select",245],",",["T_WHITESPACE"," ",245],["T_VARIABLE","$bind",245],")",";",["T_WHITESPACE","\n\n        ",245],["T_VARIABLE","$attributes",247],["T_WHITESPACE"," ",247],"=",["T_WHITESPACE"," ",247],"[","]",";",["T_WHITESPACE","\n        ",247],["T_FOREACH","foreach",248],["T_WHITESPACE"," ",248],"(",["T_VARIABLE","$rowSet",248],["T_WHITESPACE"," ",248],["T_AS","as",248],["T_WHITESPACE"," ",248],["T_VARIABLE","$row",248],")",["T_WHITESPACE"," ",248],"{",["T_WHITESPACE","\n            ",248],["T_VARIABLE","$attributes",249],"[",["T_VARIABLE","$row",249],"[",["T_VARIABLE","$identifierFiled",249],"]","]",["T_WHITESPACE"," ",249],"=",["T_WHITESPACE"," ",249],["T_VARIABLE","$row",249],"[",["T_CONSTANT_ENCAPSED_STRING","'value'",249],"]",";",["T_WHITESPACE","\n        ",249],"}",["T_WHITESPACE","\n        ",250],["T_UNSET","unset",251],"(",["T_VARIABLE","$rowSet",251],")",";",["T_WHITESPACE","\n        ",251],["T_FOREACH","foreach",252],["T_WHITESPACE"," ",252],"(",["T_VARIABLE","$categoryIds",252],["T_WHITESPACE"," ",252],["T_AS","as",252],["T_WHITESPACE"," ",252],["T_VARIABLE","$categoryId",252],")",["T_WHITESPACE"," ",252],"{",["T_WHITESPACE","\n            ",252],["T_IF","if",253],["T_WHITESPACE"," ",253],"(","!",["T_ISSET","isset",253],"(",["T_VARIABLE","$attributes",253],"[",["T_VARIABLE","$categoryId",253],"]",")",")",["T_WHITESPACE"," ",253],"{",["T_WHITESPACE","\n                ",253],["T_VARIABLE","$attributes",254],"[",["T_VARIABLE","$categoryId",254],"]",["T_WHITESPACE"," ",254],"=",["T_WHITESPACE"," ",254],["T_STRING","null",254],";",["T_WHITESPACE","\n            ",254],"}",["T_WHITESPACE","\n        ",255],"}",["T_WHITESPACE","\n\n        ",256],["T_RETURN","return",258],["T_WHITESPACE"," ",258],["T_VARIABLE","$attributes",258],";",["T_WHITESPACE","\n    ",258],"}",["T_WHITESPACE","\n\n    ",259],["T_DOC_COMMENT","\/**\n     * Retrieve product attribute\n     *\n     * @param string $attributeCode\n     * @param int|array $productIds\n     * @param string $storeId\n     * @return array\n     *\/",261],["T_WHITESPACE","\n    ",268],["T_PUBLIC","public",269],["T_WHITESPACE"," ",269],["T_FUNCTION","function",269],["T_WHITESPACE"," ",269],["T_STRING","_getProductAttribute",269],"(",["T_VARIABLE","$attributeCode",269],",",["T_WHITESPACE"," ",269],["T_VARIABLE","$productIds",269],",",["T_WHITESPACE"," ",269],["T_VARIABLE","$storeId",269],")",["T_WHITESPACE","\n    ",269],"{",["T_WHITESPACE","\n        ",270],["T_VARIABLE","$connection",271],["T_WHITESPACE"," ",271],"=",["T_WHITESPACE"," ",271],["T_VARIABLE","$this",271],["T_OBJECT_OPERATOR","->",271],["T_STRING","getConnection",271],"(",")",";",["T_WHITESPACE","\n        ",271],["T_IF","if",272],["T_WHITESPACE"," ",272],"(","!",["T_ISSET","isset",272],"(",["T_VARIABLE","$this",272],["T_OBJECT_OPERATOR","->",272],["T_STRING","_productAttributes",272],"[",["T_VARIABLE","$attributeCode",272],"]",")",")",["T_WHITESPACE"," ",272],"{",["T_WHITESPACE","\n            ",272],["T_VARIABLE","$attribute",273],["T_WHITESPACE"," ",273],"=",["T_WHITESPACE"," ",273],["T_VARIABLE","$this",273],["T_OBJECT_OPERATOR","->",273],["T_STRING","productResource",273],["T_OBJECT_OPERATOR","->",273],["T_STRING","getAttribute",273],"(",["T_VARIABLE","$attributeCode",273],")",";",["T_WHITESPACE","\n\n            ",273],["T_VARIABLE","$this",275],["T_OBJECT_OPERATOR","->",275],["T_STRING","_productAttributes",275],"[",["T_VARIABLE","$attributeCode",275],"]",["T_WHITESPACE"," ",275],"=",["T_WHITESPACE"," ",275],"[",["T_WHITESPACE","\n                ",275],["T_CONSTANT_ENCAPSED_STRING","'entity_type_id'",276],["T_WHITESPACE"," ",276],["T_DOUBLE_ARROW","=>",276],["T_WHITESPACE"," ",276],["T_VARIABLE","$attribute",276],["T_OBJECT_OPERATOR","->",276],["T_STRING","getEntityTypeId",276],"(",")",",",["T_WHITESPACE","\n                ",276],["T_CONSTANT_ENCAPSED_STRING","'attribute_id'",277],["T_WHITESPACE"," ",277],["T_DOUBLE_ARROW","=>",277],["T_WHITESPACE"," ",277],["T_VARIABLE","$attribute",277],["T_OBJECT_OPERATOR","->",277],["T_STRING","getId",277],"(",")",",",["T_WHITESPACE","\n                ",277],["T_CONSTANT_ENCAPSED_STRING","'table'",278],["T_WHITESPACE"," ",278],["T_DOUBLE_ARROW","=>",278],["T_WHITESPACE"," ",278],["T_VARIABLE","$attribute",278],["T_OBJECT_OPERATOR","->",278],["T_STRING","getBackend",278],"(",")",["T_OBJECT_OPERATOR","->",278],["T_STRING","getTable",278],"(",")",",",["T_WHITESPACE","\n                ",278],["T_CONSTANT_ENCAPSED_STRING","'is_global'",279],["T_WHITESPACE"," ",279],["T_DOUBLE_ARROW","=>",279],["T_WHITESPACE"," ",279],["T_VARIABLE","$attribute",279],["T_OBJECT_OPERATOR","->",279],["T_STRING","getIsGlobal",279],"(",")",",",["T_WHITESPACE","\n            ",279],"]",";",["T_WHITESPACE","\n            ",280],["T_UNSET","unset",281],"(",["T_VARIABLE","$attribute",281],")",";",["T_WHITESPACE","\n        ",281],"}",["T_WHITESPACE","\n\n        ",282],["T_IF","if",284],["T_WHITESPACE"," ",284],"(","!",["T_STRING","is_array",284],"(",["T_VARIABLE","$productIds",284],")",")",["T_WHITESPACE"," ",284],"{",["T_WHITESPACE","\n            ",284],["T_VARIABLE","$productIds",285],["T_WHITESPACE"," ",285],"=",["T_WHITESPACE"," ",285],"[",["T_VARIABLE","$productIds",285],"]",";",["T_WHITESPACE","\n        ",285],"}",["T_WHITESPACE","\n        ",286],["T_VARIABLE","$bind",287],["T_WHITESPACE"," ",287],"=",["T_WHITESPACE"," ",287],"[",["T_CONSTANT_ENCAPSED_STRING","'attribute_id'",287],["T_WHITESPACE"," ",287],["T_DOUBLE_ARROW","=>",287],["T_WHITESPACE"," ",287],["T_VARIABLE","$this",287],["T_OBJECT_OPERATOR","->",287],["T_STRING","_productAttributes",287],"[",["T_VARIABLE","$attributeCode",287],"]","[",["T_CONSTANT_ENCAPSED_STRING","'attribute_id'",287],"]","]",";",["T_WHITESPACE","\n        ",287],["T_VARIABLE","$select",288],["T_WHITESPACE"," ",288],"=",["T_WHITESPACE"," ",288],["T_VARIABLE","$connection",288],["T_OBJECT_OPERATOR","->",288],["T_STRING","select",288],"(",")",";",["T_WHITESPACE","\n        ",288],["T_VARIABLE","$attributeTable",289],["T_WHITESPACE"," ",289],"=",["T_WHITESPACE"," ",289],["T_VARIABLE","$this",289],["T_OBJECT_OPERATOR","->",289],["T_STRING","_productAttributes",289],"[",["T_VARIABLE","$attributeCode",289],"]","[",["T_CONSTANT_ENCAPSED_STRING","'table'",289],"]",";",["T_WHITESPACE","\n        ",289],["T_IF","if",290],["T_WHITESPACE"," ",290],"(",["T_VARIABLE","$this",290],["T_OBJECT_OPERATOR","->",290],["T_STRING","_productAttributes",290],"[",["T_VARIABLE","$attributeCode",290],"]","[",["T_CONSTANT_ENCAPSED_STRING","'is_global'",290],"]",["T_WHITESPACE"," ",290],["T_BOOLEAN_OR","||",290],["T_WHITESPACE"," ",290],["T_VARIABLE","$storeId",290],["T_WHITESPACE"," ",290],["T_IS_EQUAL","==",290],["T_WHITESPACE"," ",290],["T_LNUMBER","0",290],")",["T_WHITESPACE"," ",290],"{",["T_WHITESPACE","\n            ",290],["T_VARIABLE","$select",291],["T_OBJECT_OPERATOR","->",291],["T_STRING","from",291],"(",["T_WHITESPACE","\n                ",291],["T_VARIABLE","$attributeTable",292],",",["T_WHITESPACE","\n                ",292],"[",["T_CONSTANT_ENCAPSED_STRING","'entity_id'",293],",",["T_WHITESPACE"," ",293],["T_CONSTANT_ENCAPSED_STRING","'value'",293],"]",["T_WHITESPACE","\n            ",293],")",["T_OBJECT_OPERATOR","->",294],["T_STRING","where",294],"(",["T_WHITESPACE","\n                ",294],["T_CONSTANT_ENCAPSED_STRING","'attribute_id = :attribute_id'",295],["T_WHITESPACE","\n            ",295],")",["T_OBJECT_OPERATOR","->",296],["T_STRING","where",296],"(",["T_WHITESPACE","\n                ",296],["T_CONSTANT_ENCAPSED_STRING","'store_id = ?'",297],",",["T_WHITESPACE","\n                ",297],["T_LNUMBER","0",298],["T_WHITESPACE","\n            ",298],")",["T_OBJECT_OPERATOR","->",299],["T_STRING","where",299],"(",["T_WHITESPACE","\n                ",299],["T_CONSTANT_ENCAPSED_STRING","'entity_id IN(?)'",300],",",["T_WHITESPACE","\n                ",300],["T_VARIABLE","$productIds",301],["T_WHITESPACE","\n            ",301],")",";",["T_WHITESPACE","\n        ",302],"}",["T_WHITESPACE"," ",303],["T_ELSE","else",303],["T_WHITESPACE"," ",303],"{",["T_WHITESPACE","\n            ",303],["T_VARIABLE","$valueExpr",304],["T_WHITESPACE"," ",304],"=",["T_WHITESPACE"," ",304],["T_VARIABLE","$connection",304],["T_OBJECT_OPERATOR","->",304],["T_STRING","getCheckSql",304],"(",["T_CONSTANT_ENCAPSED_STRING","'t2.value_id > 0'",304],",",["T_WHITESPACE"," ",304],["T_CONSTANT_ENCAPSED_STRING","'t2.value'",304],",",["T_WHITESPACE"," ",304],["T_CONSTANT_ENCAPSED_STRING","'t1.value'",304],")",";",["T_WHITESPACE","\n            ",304],["T_VARIABLE","$select",305],["T_OBJECT_OPERATOR","->",305],["T_STRING","from",305],"(",["T_WHITESPACE","\n                ",305],"[",["T_CONSTANT_ENCAPSED_STRING","'t1'",306],["T_WHITESPACE"," ",306],["T_DOUBLE_ARROW","=>",306],["T_WHITESPACE"," ",306],["T_VARIABLE","$attributeTable",306],"]",",",["T_WHITESPACE","\n                ",306],"[",["T_CONSTANT_ENCAPSED_STRING","'entity_id'",307],",",["T_WHITESPACE"," ",307],["T_CONSTANT_ENCAPSED_STRING","'value'",307],["T_WHITESPACE"," ",307],["T_DOUBLE_ARROW","=>",307],["T_WHITESPACE"," ",307],["T_VARIABLE","$valueExpr",307],"]",["T_WHITESPACE","\n            ",307],")",["T_OBJECT_OPERATOR","->",308],["T_STRING","joinLeft",308],"(",["T_WHITESPACE","\n                ",308],"[",["T_CONSTANT_ENCAPSED_STRING","'t2'",309],["T_WHITESPACE"," ",309],["T_DOUBLE_ARROW","=>",309],["T_WHITESPACE"," ",309],["T_VARIABLE","$attributeTable",309],"]",",",["T_WHITESPACE","\n                ",309],["T_CONSTANT_ENCAPSED_STRING","'t1.entity_id = t2.entity_id AND t1.attribute_id = t2.attribute_id AND t2.store_id=:store_id'",310],",",["T_WHITESPACE","\n                ",310],"[","]",["T_WHITESPACE","\n            ",311],")",["T_OBJECT_OPERATOR","->",312],["T_STRING","where",312],"(",["T_WHITESPACE","\n                ",312],["T_CONSTANT_ENCAPSED_STRING","'t1.store_id = ?'",313],",",["T_WHITESPACE","\n                ",313],["T_LNUMBER","0",314],["T_WHITESPACE","\n            ",314],")",["T_OBJECT_OPERATOR","->",315],["T_STRING","where",315],"(",["T_WHITESPACE","\n                ",315],["T_CONSTANT_ENCAPSED_STRING","'t1.attribute_id = :attribute_id'",316],["T_WHITESPACE","\n            ",316],")",["T_OBJECT_OPERATOR","->",317],["T_STRING","where",317],"(",["T_WHITESPACE","\n                ",317],["T_CONSTANT_ENCAPSED_STRING","'t1.entity_id IN(?)'",318],",",["T_WHITESPACE","\n                ",318],["T_VARIABLE","$productIds",319],["T_WHITESPACE","\n            ",319],")",";",["T_WHITESPACE","\n            ",320],["T_VARIABLE","$bind",321],"[",["T_CONSTANT_ENCAPSED_STRING","'store_id'",321],"]",["T_WHITESPACE"," ",321],"=",["T_WHITESPACE"," ",321],["T_VARIABLE","$storeId",321],";",["T_WHITESPACE","\n        ",321],"}",["T_WHITESPACE","\n\n        ",322],["T_VARIABLE","$rowSet",324],["T_WHITESPACE"," ",324],"=",["T_WHITESPACE"," ",324],["T_VARIABLE","$connection",324],["T_OBJECT_OPERATOR","->",324],["T_STRING","fetchAll",324],"(",["T_VARIABLE","$select",324],",",["T_WHITESPACE"," ",324],["T_VARIABLE","$bind",324],")",";",["T_WHITESPACE","\n\n        ",324],["T_VARIABLE","$attributes",326],["T_WHITESPACE"," ",326],"=",["T_WHITESPACE"," ",326],"[","]",";",["T_WHITESPACE","\n        ",326],["T_FOREACH","foreach",327],["T_WHITESPACE"," ",327],"(",["T_VARIABLE","$rowSet",327],["T_WHITESPACE"," ",327],["T_AS","as",327],["T_WHITESPACE"," ",327],["T_VARIABLE","$row",327],")",["T_WHITESPACE"," ",327],"{",["T_WHITESPACE","\n            ",327],["T_VARIABLE","$attributes",328],"[",["T_VARIABLE","$row",328],"[",["T_CONSTANT_ENCAPSED_STRING","'entity_id'",328],"]","]",["T_WHITESPACE"," ",328],"=",["T_WHITESPACE"," ",328],["T_VARIABLE","$row",328],"[",["T_CONSTANT_ENCAPSED_STRING","'value'",328],"]",";",["T_WHITESPACE","\n        ",328],"}",["T_WHITESPACE","\n        ",329],["T_UNSET","unset",330],"(",["T_VARIABLE","$rowSet",330],")",";",["T_WHITESPACE","\n        ",330],["T_FOREACH","foreach",331],["T_WHITESPACE"," ",331],"(",["T_VARIABLE","$productIds",331],["T_WHITESPACE"," ",331],["T_AS","as",331],["T_WHITESPACE"," ",331],["T_VARIABLE","$productId",331],")",["T_WHITESPACE"," ",331],"{",["T_WHITESPACE","\n            ",331],["T_IF","if",332],["T_WHITESPACE"," ",332],"(","!",["T_ISSET","isset",332],"(",["T_VARIABLE","$attributes",332],"[",["T_VARIABLE","$productId",332],"]",")",")",["T_WHITESPACE"," ",332],"{",["T_WHITESPACE","\n                ",332],["T_VARIABLE","$attributes",333],"[",["T_VARIABLE","$productId",333],"]",["T_WHITESPACE"," ",333],"=",["T_WHITESPACE"," ",333],["T_STRING","null",333],";",["T_WHITESPACE","\n            ",333],"}",["T_WHITESPACE","\n        ",334],"}",["T_WHITESPACE","\n\n        ",335],["T_RETURN","return",337],["T_WHITESPACE"," ",337],["T_VARIABLE","$attributes",337],";",["T_WHITESPACE","\n    ",337],"}",["T_WHITESPACE","\n\n    ",338],["T_DOC_COMMENT","\/**\n     * Prepare category parentId\n     *\n     * @param \\Magento\\Framework\\DataObject $category\n     * @return $this\n     *\/",340],["T_WHITESPACE","\n    ",345],["T_PROTECTED","protected",346],["T_WHITESPACE"," ",346],["T_FUNCTION","function",346],["T_WHITESPACE"," ",346],["T_STRING","_prepareCategoryParentId",346],"(",["T_NS_SEPARATOR","\\",346],["T_STRING","Magento",346],["T_NS_SEPARATOR","\\",346],["T_STRING","Framework",346],["T_NS_SEPARATOR","\\",346],["T_STRING","DataObject",346],["T_WHITESPACE"," ",346],["T_VARIABLE","$category",346],")",["T_WHITESPACE","\n    ",346],"{",["T_WHITESPACE","\n        ",347],["T_IF","if",348],["T_WHITESPACE"," ",348],"(",["T_VARIABLE","$category",348],["T_OBJECT_OPERATOR","->",348],["T_STRING","getPath",348],"(",")",["T_WHITESPACE"," ",348],["T_IS_NOT_EQUAL","!=",348],["T_WHITESPACE"," ",348],["T_VARIABLE","$category",348],["T_OBJECT_OPERATOR","->",348],["T_STRING","getId",348],"(",")",")",["T_WHITESPACE"," ",348],"{",["T_WHITESPACE","\n            ",348],["T_VARIABLE","$split",349],["T_WHITESPACE"," ",349],"=",["T_WHITESPACE"," ",349],["T_STRING","explode",349],"(",["T_CONSTANT_ENCAPSED_STRING","'\/'",349],",",["T_WHITESPACE"," ",349],["T_VARIABLE","$category",349],["T_OBJECT_OPERATOR","->",349],["T_STRING","getPath",349],"(",")",")",";",["T_WHITESPACE","\n            ",349],["T_VARIABLE","$category",350],["T_OBJECT_OPERATOR","->",350],["T_STRING","setParentId",350],"(",["T_VARIABLE","$split",350],"[",["T_STRING","count",350],"(",["T_VARIABLE","$split",350],")",["T_WHITESPACE"," ",350],"-",["T_WHITESPACE"," ",350],["T_LNUMBER","2",350],"]",")",";",["T_WHITESPACE","\n        ",350],"}",["T_WHITESPACE"," ",351],["T_ELSE","else",351],["T_WHITESPACE"," ",351],"{",["T_WHITESPACE","\n            ",351],["T_VARIABLE","$category",352],["T_OBJECT_OPERATOR","->",352],["T_STRING","setParentId",352],"(",["T_LNUMBER","0",352],")",";",["T_WHITESPACE","\n        ",352],"}",["T_WHITESPACE","\n        ",353],["T_RETURN","return",354],["T_WHITESPACE"," ",354],["T_VARIABLE","$this",354],";",["T_WHITESPACE","\n    ",354],"}",["T_WHITESPACE","\n\n    ",355],["T_DOC_COMMENT","\/**\n     * Prepare stores root categories\n     *\n     * @param \\Magento\\Store\\Model\\Store[] $stores\n     * @return \\Magento\\Store\\Model\\Store[]\n     *\/",357],["T_WHITESPACE","\n    ",362],["T_PROTECTED","protected",363],["T_WHITESPACE"," ",363],["T_FUNCTION","function",363],["T_WHITESPACE"," ",363],["T_STRING","_prepareStoreRootCategories",363],"(",["T_VARIABLE","$stores",363],")",["T_WHITESPACE","\n    ",363],"{",["T_WHITESPACE","\n        ",364],["T_VARIABLE","$rootCategoryIds",365],["T_WHITESPACE"," ",365],"=",["T_WHITESPACE"," ",365],"[","]",";",["T_WHITESPACE","\n        ",365],["T_FOREACH","foreach",366],["T_WHITESPACE"," ",366],"(",["T_VARIABLE","$stores",366],["T_WHITESPACE"," ",366],["T_AS","as",366],["T_WHITESPACE"," ",366],["T_VARIABLE","$store",366],")",["T_WHITESPACE"," ",366],"{",["T_WHITESPACE","\n            ",366],["T_COMMENT","\/* @var $store \\Magento\\Store\\Model\\Store *\/",367],["T_WHITESPACE","\n            ",367],["T_VARIABLE","$rootCategoryIds",368],"[",["T_VARIABLE","$store",368],["T_OBJECT_OPERATOR","->",368],["T_STRING","getRootCategoryId",368],"(",")","]",["T_WHITESPACE"," ",368],"=",["T_WHITESPACE"," ",368],["T_VARIABLE","$store",368],["T_OBJECT_OPERATOR","->",368],["T_STRING","getRootCategoryId",368],"(",")",";",["T_WHITESPACE","\n        ",368],"}",["T_WHITESPACE","\n        ",369],["T_IF","if",370],["T_WHITESPACE"," ",370],"(",["T_VARIABLE","$rootCategoryIds",370],")",["T_WHITESPACE"," ",370],"{",["T_WHITESPACE","\n            ",370],["T_VARIABLE","$categories",371],["T_WHITESPACE"," ",371],"=",["T_WHITESPACE"," ",371],["T_VARIABLE","$this",371],["T_OBJECT_OPERATOR","->",371],["T_STRING","_getCategories",371],"(",["T_VARIABLE","$rootCategoryIds",371],")",";",["T_WHITESPACE","\n        ",371],"}",["T_WHITESPACE","\n        ",372],["T_FOREACH","foreach",373],["T_WHITESPACE"," ",373],"(",["T_VARIABLE","$stores",373],["T_WHITESPACE"," ",373],["T_AS","as",373],["T_WHITESPACE"," ",373],["T_VARIABLE","$store",373],")",["T_WHITESPACE"," ",373],"{",["T_WHITESPACE","\n            ",373],["T_COMMENT","\/* @var $store \\Magento\\Store\\Model\\Store *\/",374],["T_WHITESPACE","\n            ",374],["T_VARIABLE","$rootCategoryId",375],["T_WHITESPACE"," ",375],"=",["T_WHITESPACE"," ",375],["T_VARIABLE","$store",375],["T_OBJECT_OPERATOR","->",375],["T_STRING","getRootCategoryId",375],"(",")",";",["T_WHITESPACE","\n            ",375],["T_IF","if",376],["T_WHITESPACE"," ",376],"(",["T_ISSET","isset",376],"(",["T_VARIABLE","$categories",376],"[",["T_VARIABLE","$rootCategoryId",376],"]",")",")",["T_WHITESPACE"," ",376],"{",["T_WHITESPACE","\n                ",376],["T_VARIABLE","$store",377],["T_OBJECT_OPERATOR","->",377],["T_STRING","setRootCategoryPath",377],"(",["T_VARIABLE","$categories",377],"[",["T_VARIABLE","$rootCategoryId",377],"]",["T_OBJECT_OPERATOR","->",377],["T_STRING","getPath",377],"(",")",")",";",["T_WHITESPACE","\n                ",377],["T_VARIABLE","$store",378],["T_OBJECT_OPERATOR","->",378],["T_STRING","setRootCategory",378],"(",["T_VARIABLE","$categories",378],"[",["T_VARIABLE","$rootCategoryId",378],"]",")",";",["T_WHITESPACE","\n            ",378],"}",["T_WHITESPACE"," ",379],["T_ELSE","else",379],["T_WHITESPACE"," ",379],"{",["T_WHITESPACE","\n                ",379],["T_UNSET","unset",380],"(",["T_VARIABLE","$stores",380],"[",["T_VARIABLE","$store",380],["T_OBJECT_OPERATOR","->",380],["T_STRING","getId",380],"(",")","]",")",";",["T_WHITESPACE","\n            ",380],"}",["T_WHITESPACE","\n        ",381],"}",["T_WHITESPACE","\n        ",382],["T_RETURN","return",383],["T_WHITESPACE"," ",383],["T_VARIABLE","$stores",383],";",["T_WHITESPACE","\n    ",383],"}",["T_WHITESPACE","\n\n    ",384],["T_DOC_COMMENT","\/**\n     * Retrieve categories objects\n     * Either $categoryIds or $path (with ending slash) must be specified\n     *\n     * @param int|array $categoryIds\n     * @param int $storeId\n     * @param string $path\n     * @return array\n     * @SuppressWarnings(PHPMD.CyclomaticComplexity)\n     * @SuppressWarnings(PHPMD.NPathComplexity)\n     *\/",386],["T_WHITESPACE","\n    ",396],["T_PROTECTED","protected",397],["T_WHITESPACE"," ",397],["T_FUNCTION","function",397],["T_WHITESPACE"," ",397],["T_STRING","_getCategories",397],"(",["T_VARIABLE","$categoryIds",397],",",["T_WHITESPACE"," ",397],["T_VARIABLE","$storeId",397],["T_WHITESPACE"," ",397],"=",["T_WHITESPACE"," ",397],["T_STRING","null",397],",",["T_WHITESPACE"," ",397],["T_VARIABLE","$path",397],["T_WHITESPACE"," ",397],"=",["T_WHITESPACE"," ",397],["T_STRING","null",397],")",["T_WHITESPACE","\n    ",397],"{",["T_WHITESPACE","\n        ",398],["T_VARIABLE","$isActiveAttribute",399],["T_WHITESPACE"," ",399],"=",["T_WHITESPACE"," ",399],["T_VARIABLE","$this",399],["T_OBJECT_OPERATOR","->",399],["T_STRING","_eavConfig",399],["T_OBJECT_OPERATOR","->",399],["T_STRING","getAttribute",399],"(",["T_NS_SEPARATOR","\\",399],["T_STRING","Magento",399],["T_NS_SEPARATOR","\\",399],["T_STRING","Catalog",399],["T_NS_SEPARATOR","\\",399],["T_STRING","Model",399],["T_NS_SEPARATOR","\\",399],["T_STRING","Category",399],["T_DOUBLE_COLON","::",399],["T_STRING","ENTITY",399],",",["T_WHITESPACE"," ",399],["T_CONSTANT_ENCAPSED_STRING","'is_active'",399],")",";",["T_WHITESPACE","\n        ",399],["T_VARIABLE","$categories",400],["T_WHITESPACE"," ",400],"=",["T_WHITESPACE"," ",400],"[","]",";",["T_WHITESPACE","\n        ",400],["T_VARIABLE","$connection",401],["T_WHITESPACE"," ",401],"=",["T_WHITESPACE"," ",401],["T_VARIABLE","$this",401],["T_OBJECT_OPERATOR","->",401],["T_STRING","getConnection",401],"(",")",";",["T_WHITESPACE","\n\n        ",401],["T_VARIABLE","$meta",403],["T_WHITESPACE"," ",403],"=",["T_WHITESPACE"," ",403],["T_VARIABLE","$this",403],["T_OBJECT_OPERATOR","->",403],["T_STRING","getMetadataPool",403],"(",")",["T_OBJECT_OPERATOR","->",403],["T_STRING","getMetadata",403],"(",["T_STRING","CategoryInterface",403],["T_DOUBLE_COLON","::",403],["T_CLASS","class",403],")",";",["T_WHITESPACE","\n        ",403],["T_VARIABLE","$linkField",404],["T_WHITESPACE"," ",404],"=",["T_WHITESPACE"," ",404],["T_VARIABLE","$meta",404],["T_OBJECT_OPERATOR","->",404],["T_STRING","getLinkField",404],"(",")",";",["T_WHITESPACE","\n\n        ",404],["T_IF","if",406],["T_WHITESPACE"," ",406],"(","!",["T_STRING","is_array",406],"(",["T_VARIABLE","$categoryIds",406],")",")",["T_WHITESPACE"," ",406],"{",["T_WHITESPACE","\n            ",406],["T_VARIABLE","$categoryIds",407],["T_WHITESPACE"," ",407],"=",["T_WHITESPACE"," ",407],"[",["T_VARIABLE","$categoryIds",407],"]",";",["T_WHITESPACE","\n        ",407],"}",["T_WHITESPACE","\n        ",408],["T_VARIABLE","$isActiveExpr",409],["T_WHITESPACE"," ",409],"=",["T_WHITESPACE"," ",409],["T_VARIABLE","$connection",409],["T_OBJECT_OPERATOR","->",409],["T_STRING","getCheckSql",409],"(",["T_CONSTANT_ENCAPSED_STRING","'c.value_id > 0'",409],",",["T_WHITESPACE"," ",409],["T_CONSTANT_ENCAPSED_STRING","'c.value'",409],",",["T_WHITESPACE"," ",409],["T_CONSTANT_ENCAPSED_STRING","'c.value'",409],")",";",["T_WHITESPACE","\n        ",409],["T_VARIABLE","$select",410],["T_WHITESPACE"," ",410],"=",["T_WHITESPACE"," ",410],["T_VARIABLE","$connection",410],["T_OBJECT_OPERATOR","->",410],["T_STRING","select",410],"(",")",["T_OBJECT_OPERATOR","->",410],["T_STRING","from",410],"(",["T_WHITESPACE","\n            ",410],"[",["T_CONSTANT_ENCAPSED_STRING","'main_table'",411],["T_WHITESPACE"," ",411],["T_DOUBLE_ARROW","=>",411],["T_WHITESPACE"," ",411],["T_VARIABLE","$this",411],["T_OBJECT_OPERATOR","->",411],["T_STRING","getTable",411],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog_category_entity'",411],")","]",",",["T_WHITESPACE","\n            ",411],"[",["T_WHITESPACE","\n                ",412],["T_CONSTANT_ENCAPSED_STRING","'main_table.entity_id'",413],",",["T_WHITESPACE","\n                ",413],["T_CONSTANT_ENCAPSED_STRING","'main_table.parent_id'",414],",",["T_WHITESPACE","\n                ",414],["T_CONSTANT_ENCAPSED_STRING","'main_table.level'",415],",",["T_WHITESPACE","\n                ",415],["T_CONSTANT_ENCAPSED_STRING","'is_active'",416],["T_WHITESPACE"," ",416],["T_DOUBLE_ARROW","=>",416],["T_WHITESPACE"," ",416],["T_VARIABLE","$isActiveExpr",416],",",["T_WHITESPACE","\n                ",416],["T_CONSTANT_ENCAPSED_STRING","'main_table.path'",417],["T_WHITESPACE","\n            ",417],"]",["T_WHITESPACE","\n        ",418],")",";",["T_WHITESPACE","\n\n        ",419],["T_COMMENT","\/\/ Prepare variables for checking whether categories belong to store\n",421],["T_WHITESPACE","        ",422],["T_IF","if",422],["T_WHITESPACE"," ",422],"(",["T_VARIABLE","$path",422],["T_WHITESPACE"," ",422],["T_IS_IDENTICAL","===",422],["T_WHITESPACE"," ",422],["T_STRING","null",422],")",["T_WHITESPACE"," ",422],"{",["T_WHITESPACE","\n            ",422],["T_VARIABLE","$select",423],["T_OBJECT_OPERATOR","->",423],["T_STRING","where",423],"(",["T_CONSTANT_ENCAPSED_STRING","'main_table.entity_id IN(?)'",423],",",["T_WHITESPACE"," ",423],["T_VARIABLE","$categoryIds",423],")",";",["T_WHITESPACE","\n        ",423],"}",["T_WHITESPACE"," ",424],["T_ELSE","else",424],["T_WHITESPACE"," ",424],"{",["T_WHITESPACE","\n            ",424],["T_COMMENT","\/\/ Ensure that path ends with '\/', otherwise we can get wrong results - e.g. $path = '1\/2' will get '1\/20'\n",425],["T_WHITESPACE","            ",426],["T_IF","if",426],["T_WHITESPACE"," ",426],"(",["T_STRING","substr",426],"(",["T_VARIABLE","$path",426],",",["T_WHITESPACE"," ",426],"-",["T_LNUMBER","1",426],")",["T_WHITESPACE"," ",426],["T_IS_NOT_EQUAL","!=",426],["T_WHITESPACE"," ",426],["T_CONSTANT_ENCAPSED_STRING","'\/'",426],")",["T_WHITESPACE"," ",426],"{",["T_WHITESPACE","\n                ",426],["T_VARIABLE","$path",427],["T_WHITESPACE"," ",427],["T_CONCAT_EQUAL",".=",427],["T_WHITESPACE"," ",427],["T_CONSTANT_ENCAPSED_STRING","'\/'",427],";",["T_WHITESPACE","\n            ",427],"}",["T_WHITESPACE","\n\n            ",428],["T_VARIABLE","$select",430],["T_OBJECT_OPERATOR","->",430],["T_STRING","where",430],"(",["T_CONSTANT_ENCAPSED_STRING","'main_table.path LIKE ?'",430],",",["T_WHITESPACE"," ",430],["T_VARIABLE","$path",430],["T_WHITESPACE"," ",430],".",["T_WHITESPACE"," ",430],["T_CONSTANT_ENCAPSED_STRING","'%'",430],")",["T_OBJECT_OPERATOR","->",430],["T_STRING","order",430],"(",["T_CONSTANT_ENCAPSED_STRING","'main_table.path'",430],")",";",["T_WHITESPACE","\n        ",430],"}",["T_WHITESPACE","\n        ",431],["T_VARIABLE","$table",432],["T_WHITESPACE"," ",432],"=",["T_WHITESPACE"," ",432],["T_VARIABLE","$this",432],["T_OBJECT_OPERATOR","->",432],["T_STRING","getTable",432],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog_category_entity_int'",432],")",";",["T_WHITESPACE","\n        ",432],["T_VARIABLE","$select",433],["T_OBJECT_OPERATOR","->",433],["T_STRING","joinLeft",433],"(",["T_WHITESPACE","\n            ",433],"[",["T_CONSTANT_ENCAPSED_STRING","'d'",434],["T_WHITESPACE"," ",434],["T_DOUBLE_ARROW","=>",434],["T_WHITESPACE"," ",434],["T_VARIABLE","$table",434],"]",",",["T_WHITESPACE","\n            ",434],"\"",["T_ENCAPSED_AND_WHITESPACE","d.attribute_id = :attribute_id AND d.store_id = 0 AND d.",435],["T_CURLY_OPEN","{",435],["T_VARIABLE","$linkField",435],"}",["T_ENCAPSED_AND_WHITESPACE"," = main_table.",435],["T_CURLY_OPEN","{",435],["T_VARIABLE","$linkField",435],"}","\"",",",["T_WHITESPACE","\n            ",435],"[","]",["T_WHITESPACE","\n        ",436],")",["T_OBJECT_OPERATOR","->",437],["T_STRING","joinLeft",437],"(",["T_WHITESPACE","\n            ",437],"[",["T_CONSTANT_ENCAPSED_STRING","'c'",438],["T_WHITESPACE"," ",438],["T_DOUBLE_ARROW","=>",438],["T_WHITESPACE"," ",438],["T_VARIABLE","$table",438],"]",",",["T_WHITESPACE","\n            ",438],"\"",["T_ENCAPSED_AND_WHITESPACE","c.attribute_id = :attribute_id AND c.store_id = :store_id AND c.",439],["T_CURLY_OPEN","{",439],["T_VARIABLE","$linkField",439],"}",["T_ENCAPSED_AND_WHITESPACE"," = main_table.",439],["T_CURLY_OPEN","{",439],["T_VARIABLE","$linkField",439],"}","\"",",",["T_WHITESPACE","\n            ",439],"[","]",["T_WHITESPACE","\n        ",440],")",";",["T_WHITESPACE","\n\n        ",441],["T_IF","if",443],["T_WHITESPACE"," ",443],"(",["T_VARIABLE","$storeId",443],["T_WHITESPACE"," ",443],["T_IS_NOT_IDENTICAL","!==",443],["T_WHITESPACE"," ",443],["T_STRING","null",443],")",["T_WHITESPACE"," ",443],"{",["T_WHITESPACE","\n            ",443],["T_VARIABLE","$rootCategoryPath",444],["T_WHITESPACE"," ",444],"=",["T_WHITESPACE"," ",444],["T_VARIABLE","$this",444],["T_OBJECT_OPERATOR","->",444],["T_STRING","getStores",444],"(",["T_VARIABLE","$storeId",444],")",["T_OBJECT_OPERATOR","->",444],["T_STRING","getRootCategoryPath",444],"(",")",";",["T_WHITESPACE","\n            ",444],["T_VARIABLE","$rootCategoryPathLength",445],["T_WHITESPACE"," ",445],"=",["T_WHITESPACE"," ",445],["T_STRING","strlen",445],"(",["T_VARIABLE","$rootCategoryPath",445],")",";",["T_WHITESPACE","\n        ",445],"}",["T_WHITESPACE","\n        ",446],["T_VARIABLE","$bind",447],["T_WHITESPACE"," ",447],"=",["T_WHITESPACE"," ",447],"[",["T_CONSTANT_ENCAPSED_STRING","'attribute_id'",447],["T_WHITESPACE"," ",447],["T_DOUBLE_ARROW","=>",447],["T_WHITESPACE"," ",447],["T_INT_CAST","(int)",447],["T_VARIABLE","$isActiveAttribute",447],["T_OBJECT_OPERATOR","->",447],["T_STRING","getId",447],"(",")",",",["T_WHITESPACE"," ",447],["T_CONSTANT_ENCAPSED_STRING","'store_id'",447],["T_WHITESPACE"," ",447],["T_DOUBLE_ARROW","=>",447],["T_WHITESPACE"," ",447],["T_INT_CAST","(int)",447],["T_VARIABLE","$storeId",447],"]",";",["T_WHITESPACE","\n\n        ",447],["T_VARIABLE","$rowSet",449],["T_WHITESPACE"," ",449],"=",["T_WHITESPACE"," ",449],["T_VARIABLE","$connection",449],["T_OBJECT_OPERATOR","->",449],["T_STRING","fetchAll",449],"(",["T_VARIABLE","$select",449],",",["T_WHITESPACE"," ",449],["T_VARIABLE","$bind",449],")",";",["T_WHITESPACE","\n        ",449],["T_FOREACH","foreach",450],["T_WHITESPACE"," ",450],"(",["T_VARIABLE","$rowSet",450],["T_WHITESPACE"," ",450],["T_AS","as",450],["T_WHITESPACE"," ",450],["T_VARIABLE","$row",450],")",["T_WHITESPACE"," ",450],"{",["T_WHITESPACE","\n            ",450],["T_IF","if",451],["T_WHITESPACE"," ",451],"(",["T_VARIABLE","$storeId",451],["T_WHITESPACE"," ",451],["T_IS_NOT_IDENTICAL","!==",451],["T_WHITESPACE"," ",451],["T_STRING","null",451],")",["T_WHITESPACE"," ",451],"{",["T_WHITESPACE","\n                ",451],["T_COMMENT","\/\/ Check the category to be either store's root or its descendant\n",452],["T_WHITESPACE","                ",453],["T_COMMENT","\/\/ First - check that category's start is the same as root category\n",453],["T_WHITESPACE","                ",454],["T_IF","if",454],["T_WHITESPACE"," ",454],"(",["T_STRING","substr",454],"(",["T_VARIABLE","$row",454],"[",["T_CONSTANT_ENCAPSED_STRING","'path'",454],"]",",",["T_WHITESPACE"," ",454],["T_LNUMBER","0",454],",",["T_WHITESPACE"," ",454],["T_VARIABLE","$rootCategoryPathLength",454],")",["T_WHITESPACE"," ",454],["T_IS_NOT_EQUAL","!=",454],["T_WHITESPACE"," ",454],["T_VARIABLE","$rootCategoryPath",454],")",["T_WHITESPACE"," ",454],"{",["T_WHITESPACE","\n                    ",454],["T_CONTINUE","continue",455],";",["T_WHITESPACE","\n                ",455],"}",["T_WHITESPACE","\n                ",456],["T_COMMENT","\/\/ Second - check non-root category - that it's really a descendant, not a simple string match\n",457],["T_WHITESPACE","                ",458],["T_IF","if",458],["T_WHITESPACE"," ",458],"(",["T_STRING","strlen",458],"(",["T_VARIABLE","$row",458],"[",["T_CONSTANT_ENCAPSED_STRING","'path'",458],"]",")",["T_WHITESPACE"," ",458],">",["T_WHITESPACE"," ",458],["T_VARIABLE","$rootCategoryPathLength",458],["T_WHITESPACE"," ",458],["T_BOOLEAN_AND","&&",458],["T_WHITESPACE"," ",458],["T_VARIABLE","$row",458],"[",["T_CONSTANT_ENCAPSED_STRING","'path'",458],"]","[",["T_VARIABLE","$rootCategoryPathLength",458],"]",["T_WHITESPACE"," ",458],["T_IS_NOT_EQUAL","!=",458],["T_WHITESPACE"," ",458],["T_CONSTANT_ENCAPSED_STRING","'\/'",458],")",["T_WHITESPACE"," ",458],"{",["T_WHITESPACE","\n                    ",458],["T_CONTINUE","continue",459],";",["T_WHITESPACE","\n                ",459],"}",["T_WHITESPACE","\n            ",460],"}",["T_WHITESPACE","\n\n            ",461],["T_VARIABLE","$category",463],["T_WHITESPACE"," ",463],"=",["T_WHITESPACE"," ",463],["T_NEW","new",463],["T_WHITESPACE"," ",463],["T_NS_SEPARATOR","\\",463],["T_STRING","Magento",463],["T_NS_SEPARATOR","\\",463],["T_STRING","Framework",463],["T_NS_SEPARATOR","\\",463],["T_STRING","DataObject",463],"(",["T_VARIABLE","$row",463],")",";",["T_WHITESPACE","\n            ",463],["T_VARIABLE","$category",464],["T_OBJECT_OPERATOR","->",464],["T_STRING","setId",464],"(",["T_VARIABLE","$row",464],"[",["T_CONSTANT_ENCAPSED_STRING","'entity_id'",464],"]",")",";",["T_WHITESPACE","\n            ",464],["T_VARIABLE","$category",465],["T_OBJECT_OPERATOR","->",465],["T_STRING","setEntityId",465],"(",["T_VARIABLE","$row",465],"[",["T_CONSTANT_ENCAPSED_STRING","'entity_id'",465],"]",")",";",["T_WHITESPACE","\n            ",465],["T_VARIABLE","$category",466],["T_OBJECT_OPERATOR","->",466],["T_STRING","setStoreId",466],"(",["T_VARIABLE","$storeId",466],")",";",["T_WHITESPACE","\n            ",466],["T_VARIABLE","$this",467],["T_OBJECT_OPERATOR","->",467],["T_STRING","_prepareCategoryParentId",467],"(",["T_VARIABLE","$category",467],")",";",["T_WHITESPACE","\n\n            ",467],["T_VARIABLE","$categories",469],"[",["T_VARIABLE","$category",469],["T_OBJECT_OPERATOR","->",469],["T_STRING","getId",469],"(",")","]",["T_WHITESPACE"," ",469],"=",["T_WHITESPACE"," ",469],["T_VARIABLE","$category",469],";",["T_WHITESPACE","\n        ",469],"}",["T_WHITESPACE","\n        ",470],["T_UNSET","unset",471],"(",["T_VARIABLE","$rowSet",471],")",";",["T_WHITESPACE","\n\n        ",471],["T_IF","if",473],["T_WHITESPACE"," ",473],"(",["T_VARIABLE","$storeId",473],["T_WHITESPACE"," ",473],["T_IS_NOT_IDENTICAL","!==",473],["T_WHITESPACE"," ",473],["T_STRING","null",473],["T_WHITESPACE"," ",473],["T_BOOLEAN_AND","&&",473],["T_WHITESPACE"," ",473],["T_VARIABLE","$categories",473],")",["T_WHITESPACE"," ",473],"{",["T_WHITESPACE","\n            ",473],["T_FOREACH","foreach",474],["T_WHITESPACE"," ",474],"(","[",["T_CONSTANT_ENCAPSED_STRING","'name'",474],",",["T_WHITESPACE"," ",474],["T_CONSTANT_ENCAPSED_STRING","'url_key'",474],",",["T_WHITESPACE"," ",474],["T_CONSTANT_ENCAPSED_STRING","'url_path'",474],"]",["T_WHITESPACE"," ",474],["T_AS","as",474],["T_WHITESPACE"," ",474],["T_VARIABLE","$attributeCode",474],")",["T_WHITESPACE"," ",474],"{",["T_WHITESPACE","\n                ",474],["T_VARIABLE","$attributes",475],["T_WHITESPACE"," ",475],"=",["T_WHITESPACE"," ",475],["T_VARIABLE","$this",475],["T_OBJECT_OPERATOR","->",475],["T_STRING","_getCategoryAttribute",475],"(",["T_WHITESPACE","\n                    ",475],["T_VARIABLE","$attributeCode",476],",",["T_WHITESPACE","\n                    ",476],["T_STRING","array_keys",477],"(",["T_VARIABLE","$categories",477],")",",",["T_WHITESPACE","\n                    ",477],["T_VARIABLE","$category",478],["T_OBJECT_OPERATOR","->",478],["T_STRING","getStoreId",478],"(",")",["T_WHITESPACE","\n                ",478],")",";",["T_WHITESPACE","\n                ",479],["T_FOREACH","foreach",480],["T_WHITESPACE"," ",480],"(",["T_VARIABLE","$attributes",480],["T_WHITESPACE"," ",480],["T_AS","as",480],["T_WHITESPACE"," ",480],["T_VARIABLE","$categoryId",480],["T_WHITESPACE"," ",480],["T_DOUBLE_ARROW","=>",480],["T_WHITESPACE"," ",480],["T_VARIABLE","$attributeValue",480],")",["T_WHITESPACE"," ",480],"{",["T_WHITESPACE","\n                    ",480],["T_VARIABLE","$categories",481],"[",["T_VARIABLE","$categoryId",481],"]",["T_OBJECT_OPERATOR","->",481],["T_STRING","setData",481],"(",["T_VARIABLE","$attributeCode",481],",",["T_WHITESPACE"," ",481],["T_VARIABLE","$attributeValue",481],")",";",["T_WHITESPACE","\n                ",481],"}",["T_WHITESPACE","\n            ",482],"}",["T_WHITESPACE","\n        ",483],"}",["T_WHITESPACE","\n\n        ",484],["T_RETURN","return",486],["T_WHITESPACE"," ",486],["T_VARIABLE","$categories",486],";",["T_WHITESPACE","\n    ",486],"}",["T_WHITESPACE","\n\n    ",487],["T_DOC_COMMENT","\/**\n     * Retrieve category data object\n     *\n     * @param int $categoryId\n     * @param int $storeId\n     * @return \\Magento\\Framework\\DataObject|false\n     *\/",489],["T_WHITESPACE","\n    ",495],["T_PUBLIC","public",496],["T_WHITESPACE"," ",496],["T_FUNCTION","function",496],["T_WHITESPACE"," ",496],["T_STRING","getCategory",496],"(",["T_VARIABLE","$categoryId",496],",",["T_WHITESPACE"," ",496],["T_VARIABLE","$storeId",496],")",["T_WHITESPACE","\n    ",496],"{",["T_WHITESPACE","\n        ",497],["T_IF","if",498],["T_WHITESPACE"," ",498],"(","!",["T_VARIABLE","$categoryId",498],["T_WHITESPACE"," ",498],["T_BOOLEAN_OR","||",498],["T_WHITESPACE"," ",498],"!",["T_VARIABLE","$storeId",498],")",["T_WHITESPACE"," ",498],"{",["T_WHITESPACE","\n            ",498],["T_RETURN","return",499],["T_WHITESPACE"," ",499],["T_STRING","false",499],";",["T_WHITESPACE","\n        ",499],"}",["T_WHITESPACE","\n\n        ",500],["T_VARIABLE","$categories",502],["T_WHITESPACE"," ",502],"=",["T_WHITESPACE"," ",502],["T_VARIABLE","$this",502],["T_OBJECT_OPERATOR","->",502],["T_STRING","_getCategories",502],"(",["T_VARIABLE","$categoryId",502],",",["T_WHITESPACE"," ",502],["T_VARIABLE","$storeId",502],")",";",["T_WHITESPACE","\n        ",502],["T_IF","if",503],["T_WHITESPACE"," ",503],"(",["T_ISSET","isset",503],"(",["T_VARIABLE","$categories",503],"[",["T_VARIABLE","$categoryId",503],"]",")",")",["T_WHITESPACE"," ",503],"{",["T_WHITESPACE","\n            ",503],["T_RETURN","return",504],["T_WHITESPACE"," ",504],["T_VARIABLE","$categories",504],"[",["T_VARIABLE","$categoryId",504],"]",";",["T_WHITESPACE","\n        ",504],"}",["T_WHITESPACE","\n        ",505],["T_RETURN","return",506],["T_WHITESPACE"," ",506],["T_STRING","false",506],";",["T_WHITESPACE","\n    ",506],"}",["T_WHITESPACE","\n\n    ",507],["T_DOC_COMMENT","\/**\n     * Retrieve categories data objects by their ids. Return only categories that belong to specified store.\n     *\n     * @param int|array $categoryIds\n     * @param int $storeId\n     * @return array|false\n     *\/",509],["T_WHITESPACE","\n    ",515],["T_PUBLIC","public",516],["T_WHITESPACE"," ",516],["T_FUNCTION","function",516],["T_WHITESPACE"," ",516],["T_STRING","getCategories",516],"(",["T_VARIABLE","$categoryIds",516],",",["T_WHITESPACE"," ",516],["T_VARIABLE","$storeId",516],")",["T_WHITESPACE","\n    ",516],"{",["T_WHITESPACE","\n        ",517],["T_IF","if",518],["T_WHITESPACE"," ",518],"(","!",["T_VARIABLE","$categoryIds",518],["T_WHITESPACE"," ",518],["T_BOOLEAN_OR","||",518],["T_WHITESPACE"," ",518],"!",["T_VARIABLE","$storeId",518],")",["T_WHITESPACE"," ",518],"{",["T_WHITESPACE","\n            ",518],["T_RETURN","return",519],["T_WHITESPACE"," ",519],["T_STRING","false",519],";",["T_WHITESPACE","\n        ",519],"}",["T_WHITESPACE","\n\n        ",520],["T_RETURN","return",522],["T_WHITESPACE"," ",522],["T_VARIABLE","$this",522],["T_OBJECT_OPERATOR","->",522],["T_STRING","_getCategories",522],"(",["T_VARIABLE","$categoryIds",522],",",["T_WHITESPACE"," ",522],["T_VARIABLE","$storeId",522],")",";",["T_WHITESPACE","\n    ",522],"}",["T_WHITESPACE","\n\n    ",523],["T_DOC_COMMENT","\/**\n     * Retrieve Product data objects\n     *\n     * @param int|array $productIds\n     * @param int $storeId\n     * @param int $entityId\n     * @param int &$lastEntityId\n     * @return array\n     *\/",525],["T_WHITESPACE","\n    ",533],["T_PROTECTED","protected",534],["T_WHITESPACE"," ",534],["T_FUNCTION","function",534],["T_WHITESPACE"," ",534],["T_STRING","_getProducts",534],"(",["T_VARIABLE","$productIds",534],",",["T_WHITESPACE"," ",534],["T_VARIABLE","$storeId",534],",",["T_WHITESPACE"," ",534],["T_VARIABLE","$entityId",534],",",["T_WHITESPACE"," ",534],"&",["T_VARIABLE","$lastEntityId",534],")",["T_WHITESPACE","\n    ",534],"{",["T_WHITESPACE","\n        ",535],["T_VARIABLE","$products",536],["T_WHITESPACE"," ",536],"=",["T_WHITESPACE"," ",536],"[","]",";",["T_WHITESPACE","\n        ",536],["T_VARIABLE","$websiteId",537],["T_WHITESPACE"," ",537],"=",["T_WHITESPACE"," ",537],["T_VARIABLE","$this",537],["T_OBJECT_OPERATOR","->",537],["T_STRING","_storeManager",537],["T_OBJECT_OPERATOR","->",537],["T_STRING","getStore",537],"(",["T_VARIABLE","$storeId",537],")",["T_OBJECT_OPERATOR","->",537],["T_STRING","getWebsiteId",537],"(",")",";",["T_WHITESPACE","\n        ",537],["T_VARIABLE","$connection",538],["T_WHITESPACE"," ",538],"=",["T_WHITESPACE"," ",538],["T_VARIABLE","$this",538],["T_OBJECT_OPERATOR","->",538],["T_STRING","getConnection",538],"(",")",";",["T_WHITESPACE","\n        ",538],["T_IF","if",539],["T_WHITESPACE"," ",539],"(",["T_VARIABLE","$productIds",539],["T_WHITESPACE"," ",539],["T_IS_NOT_IDENTICAL","!==",539],["T_WHITESPACE"," ",539],["T_STRING","null",539],")",["T_WHITESPACE"," ",539],"{",["T_WHITESPACE","\n            ",539],["T_IF","if",540],["T_WHITESPACE"," ",540],"(","!",["T_STRING","is_array",540],"(",["T_VARIABLE","$productIds",540],")",")",["T_WHITESPACE"," ",540],"{",["T_WHITESPACE","\n                ",540],["T_VARIABLE","$productIds",541],["T_WHITESPACE"," ",541],"=",["T_WHITESPACE"," ",541],"[",["T_VARIABLE","$productIds",541],"]",";",["T_WHITESPACE","\n            ",541],"}",["T_WHITESPACE","\n        ",542],"}",["T_WHITESPACE","\n        ",543],["T_VARIABLE","$bind",544],["T_WHITESPACE"," ",544],"=",["T_WHITESPACE"," ",544],"[",["T_CONSTANT_ENCAPSED_STRING","'website_id'",544],["T_WHITESPACE"," ",544],["T_DOUBLE_ARROW","=>",544],["T_WHITESPACE"," ",544],["T_INT_CAST","(int)",544],["T_VARIABLE","$websiteId",544],",",["T_WHITESPACE"," ",544],["T_CONSTANT_ENCAPSED_STRING","'entity_id'",544],["T_WHITESPACE"," ",544],["T_DOUBLE_ARROW","=>",544],["T_WHITESPACE"," ",544],["T_INT_CAST","(int)",544],["T_VARIABLE","$entityId",544],"]",";",["T_WHITESPACE","\n        ",544],["T_VARIABLE","$select",545],["T_WHITESPACE"," ",545],"=",["T_WHITESPACE"," ",545],["T_VARIABLE","$connection",545],["T_OBJECT_OPERATOR","->",545],["T_STRING","select",545],"(",")",["T_OBJECT_OPERATOR","->",545],["T_STRING","useStraightJoin",545],"(",["T_WHITESPACE","\n            ",545],["T_STRING","true",546],["T_WHITESPACE","\n        ",546],")",["T_OBJECT_OPERATOR","->",547],["T_STRING","from",547],"(",["T_WHITESPACE","\n            ",547],"[",["T_CONSTANT_ENCAPSED_STRING","'e'",548],["T_WHITESPACE"," ",548],["T_DOUBLE_ARROW","=>",548],["T_WHITESPACE"," ",548],["T_VARIABLE","$this",548],["T_OBJECT_OPERATOR","->",548],["T_STRING","getTable",548],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog_product_entity'",548],")","]",",",["T_WHITESPACE","\n            ",548],"[",["T_CONSTANT_ENCAPSED_STRING","'entity_id'",549],"]",["T_WHITESPACE","\n        ",549],")",["T_OBJECT_OPERATOR","->",550],["T_STRING","join",550],"(",["T_WHITESPACE","\n            ",550],"[",["T_CONSTANT_ENCAPSED_STRING","'w'",551],["T_WHITESPACE"," ",551],["T_DOUBLE_ARROW","=>",551],["T_WHITESPACE"," ",551],["T_VARIABLE","$this",551],["T_OBJECT_OPERATOR","->",551],["T_STRING","getTable",551],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog_product_website'",551],")","]",",",["T_WHITESPACE","\n            ",551],["T_CONSTANT_ENCAPSED_STRING","'e.entity_id = w.product_id AND w.website_id = :website_id'",552],",",["T_WHITESPACE","\n            ",552],"[","]",["T_WHITESPACE","\n        ",553],")",["T_OBJECT_OPERATOR","->",554],["T_STRING","where",554],"(",["T_WHITESPACE","\n            ",554],["T_CONSTANT_ENCAPSED_STRING","'e.entity_id > :entity_id'",555],["T_WHITESPACE","\n        ",555],")",["T_OBJECT_OPERATOR","->",556],["T_STRING","order",556],"(",["T_WHITESPACE","\n            ",556],["T_CONSTANT_ENCAPSED_STRING","'e.entity_id'",557],["T_WHITESPACE","\n        ",557],")",["T_OBJECT_OPERATOR","->",558],["T_STRING","limit",558],"(",["T_WHITESPACE","\n            ",558],["T_VARIABLE","$this",559],["T_OBJECT_OPERATOR","->",559],["T_STRING","_productLimit",559],["T_WHITESPACE","\n        ",559],")",";",["T_WHITESPACE","\n        ",560],["T_IF","if",561],["T_WHITESPACE"," ",561],"(",["T_VARIABLE","$productIds",561],["T_WHITESPACE"," ",561],["T_IS_NOT_IDENTICAL","!==",561],["T_WHITESPACE"," ",561],["T_STRING","null",561],")",["T_WHITESPACE"," ",561],"{",["T_WHITESPACE","\n            ",561],["T_VARIABLE","$select",562],["T_OBJECT_OPERATOR","->",562],["T_STRING","where",562],"(",["T_CONSTANT_ENCAPSED_STRING","'e.entity_id IN(?)'",562],",",["T_WHITESPACE"," ",562],["T_VARIABLE","$productIds",562],")",";",["T_WHITESPACE","\n        ",562],"}",["T_WHITESPACE","\n\n        ",563],["T_VARIABLE","$rowSet",565],["T_WHITESPACE"," ",565],"=",["T_WHITESPACE"," ",565],["T_VARIABLE","$connection",565],["T_OBJECT_OPERATOR","->",565],["T_STRING","fetchAll",565],"(",["T_VARIABLE","$select",565],",",["T_WHITESPACE"," ",565],["T_VARIABLE","$bind",565],")",";",["T_WHITESPACE","\n        ",565],["T_FOREACH","foreach",566],["T_WHITESPACE"," ",566],"(",["T_VARIABLE","$rowSet",566],["T_WHITESPACE"," ",566],["T_AS","as",566],["T_WHITESPACE"," ",566],["T_VARIABLE","$row",566],")",["T_WHITESPACE"," ",566],"{",["T_WHITESPACE","\n            ",566],["T_VARIABLE","$product",567],["T_WHITESPACE"," ",567],"=",["T_WHITESPACE"," ",567],["T_NEW","new",567],["T_WHITESPACE"," ",567],["T_NS_SEPARATOR","\\",567],["T_STRING","Magento",567],["T_NS_SEPARATOR","\\",567],["T_STRING","Framework",567],["T_NS_SEPARATOR","\\",567],["T_STRING","DataObject",567],"(",["T_VARIABLE","$row",567],")",";",["T_WHITESPACE","\n            ",567],["T_VARIABLE","$product",568],["T_OBJECT_OPERATOR","->",568],["T_STRING","setId",568],"(",["T_VARIABLE","$row",568],"[",["T_CONSTANT_ENCAPSED_STRING","'entity_id'",568],"]",")",";",["T_WHITESPACE","\n            ",568],["T_VARIABLE","$product",569],["T_OBJECT_OPERATOR","->",569],["T_STRING","setEntityId",569],"(",["T_VARIABLE","$row",569],"[",["T_CONSTANT_ENCAPSED_STRING","'entity_id'",569],"]",")",";",["T_WHITESPACE","\n            ",569],["T_VARIABLE","$product",570],["T_OBJECT_OPERATOR","->",570],["T_STRING","setCategoryIds",570],"(","[","]",")",";",["T_WHITESPACE","\n            ",570],["T_VARIABLE","$product",571],["T_OBJECT_OPERATOR","->",571],["T_STRING","setStoreId",571],"(",["T_VARIABLE","$storeId",571],")",";",["T_WHITESPACE","\n            ",571],["T_VARIABLE","$products",572],"[",["T_VARIABLE","$product",572],["T_OBJECT_OPERATOR","->",572],["T_STRING","getId",572],"(",")","]",["T_WHITESPACE"," ",572],"=",["T_WHITESPACE"," ",572],["T_VARIABLE","$product",572],";",["T_WHITESPACE","\n            ",572],["T_VARIABLE","$lastEntityId",573],["T_WHITESPACE"," ",573],"=",["T_WHITESPACE"," ",573],["T_VARIABLE","$product",573],["T_OBJECT_OPERATOR","->",573],["T_STRING","getId",573],"(",")",";",["T_WHITESPACE","\n        ",573],"}",["T_WHITESPACE","\n\n        ",574],["T_UNSET","unset",576],"(",["T_VARIABLE","$rowSet",576],")",";",["T_WHITESPACE","\n\n        ",576],["T_IF","if",578],["T_WHITESPACE"," ",578],"(",["T_VARIABLE","$products",578],")",["T_WHITESPACE"," ",578],"{",["T_WHITESPACE","\n            ",578],["T_VARIABLE","$select",579],["T_WHITESPACE"," ",579],"=",["T_WHITESPACE"," ",579],["T_VARIABLE","$connection",579],["T_OBJECT_OPERATOR","->",579],["T_STRING","select",579],"(",")",["T_OBJECT_OPERATOR","->",579],["T_STRING","from",579],"(",["T_WHITESPACE","\n                ",579],["T_VARIABLE","$this",580],["T_OBJECT_OPERATOR","->",580],["T_STRING","getTable",580],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog_category_product'",580],")",",",["T_WHITESPACE","\n                ",580],"[",["T_CONSTANT_ENCAPSED_STRING","'product_id'",581],",",["T_WHITESPACE"," ",581],["T_CONSTANT_ENCAPSED_STRING","'category_id'",581],"]",["T_WHITESPACE","\n            ",581],")",["T_OBJECT_OPERATOR","->",582],["T_STRING","where",582],"(",["T_WHITESPACE","\n                ",582],["T_CONSTANT_ENCAPSED_STRING","'product_id IN(?)'",583],",",["T_WHITESPACE","\n                ",583],["T_STRING","array_keys",584],"(",["T_VARIABLE","$products",584],")",["T_WHITESPACE","\n            ",584],")",";",["T_WHITESPACE","\n            ",585],["T_VARIABLE","$categories",586],["T_WHITESPACE"," ",586],"=",["T_WHITESPACE"," ",586],["T_VARIABLE","$connection",586],["T_OBJECT_OPERATOR","->",586],["T_STRING","fetchAll",586],"(",["T_VARIABLE","$select",586],")",";",["T_WHITESPACE","\n            ",586],["T_FOREACH","foreach",587],["T_WHITESPACE"," ",587],"(",["T_VARIABLE","$categories",587],["T_WHITESPACE"," ",587],["T_AS","as",587],["T_WHITESPACE"," ",587],["T_VARIABLE","$category",587],")",["T_WHITESPACE"," ",587],"{",["T_WHITESPACE","\n                ",587],["T_VARIABLE","$productId",588],["T_WHITESPACE"," ",588],"=",["T_WHITESPACE"," ",588],["T_VARIABLE","$category",588],"[",["T_CONSTANT_ENCAPSED_STRING","'product_id'",588],"]",";",["T_WHITESPACE","\n                ",588],["T_VARIABLE","$categoryIds",589],["T_WHITESPACE"," ",589],"=",["T_WHITESPACE"," ",589],["T_VARIABLE","$products",589],"[",["T_VARIABLE","$productId",589],"]",["T_OBJECT_OPERATOR","->",589],["T_STRING","getCategoryIds",589],"(",")",";",["T_WHITESPACE","\n                ",589],["T_VARIABLE","$categoryIds",590],"[","]",["T_WHITESPACE"," ",590],"=",["T_WHITESPACE"," ",590],["T_VARIABLE","$category",590],"[",["T_CONSTANT_ENCAPSED_STRING","'category_id'",590],"]",";",["T_WHITESPACE","\n                ",590],["T_VARIABLE","$products",591],"[",["T_VARIABLE","$productId",591],"]",["T_OBJECT_OPERATOR","->",591],["T_STRING","setCategoryIds",591],"(",["T_VARIABLE","$categoryIds",591],")",";",["T_WHITESPACE","\n            ",591],"}",["T_WHITESPACE","\n\n            ",592],["T_FOREACH","foreach",594],["T_WHITESPACE"," ",594],"(","[",["T_CONSTANT_ENCAPSED_STRING","'name'",594],",",["T_WHITESPACE"," ",594],["T_CONSTANT_ENCAPSED_STRING","'url_key'",594],",",["T_WHITESPACE"," ",594],["T_CONSTANT_ENCAPSED_STRING","'url_path'",594],"]",["T_WHITESPACE"," ",594],["T_AS","as",594],["T_WHITESPACE"," ",594],["T_VARIABLE","$attributeCode",594],")",["T_WHITESPACE"," ",594],"{",["T_WHITESPACE","\n                ",594],["T_VARIABLE","$attributes",595],["T_WHITESPACE"," ",595],"=",["T_WHITESPACE"," ",595],["T_VARIABLE","$this",595],["T_OBJECT_OPERATOR","->",595],["T_STRING","_getProductAttribute",595],"(",["T_VARIABLE","$attributeCode",595],",",["T_WHITESPACE"," ",595],["T_STRING","array_keys",595],"(",["T_VARIABLE","$products",595],")",",",["T_WHITESPACE"," ",595],["T_VARIABLE","$storeId",595],")",";",["T_WHITESPACE","\n                ",595],["T_FOREACH","foreach",596],["T_WHITESPACE"," ",596],"(",["T_VARIABLE","$attributes",596],["T_WHITESPACE"," ",596],["T_AS","as",596],["T_WHITESPACE"," ",596],["T_VARIABLE","$productId",596],["T_WHITESPACE"," ",596],["T_DOUBLE_ARROW","=>",596],["T_WHITESPACE"," ",596],["T_VARIABLE","$attributeValue",596],")",["T_WHITESPACE"," ",596],"{",["T_WHITESPACE","\n                    ",596],["T_VARIABLE","$products",597],"[",["T_VARIABLE","$productId",597],"]",["T_OBJECT_OPERATOR","->",597],["T_STRING","setData",597],"(",["T_VARIABLE","$attributeCode",597],",",["T_WHITESPACE"," ",597],["T_VARIABLE","$attributeValue",597],")",";",["T_WHITESPACE","\n                ",597],"}",["T_WHITESPACE","\n            ",598],"}",["T_WHITESPACE","\n        ",599],"}",["T_WHITESPACE","\n\n        ",600],["T_RETURN","return",602],["T_WHITESPACE"," ",602],["T_VARIABLE","$products",602],";",["T_WHITESPACE","\n    ",602],"}",["T_WHITESPACE","\n\n    ",603],["T_DOC_COMMENT","\/**\n     * Retrieve Product data object\n     *\n     * @param int $productId\n     * @param int $storeId\n     * @return \\Magento\\Framework\\DataObject|false\n     *\/",605],["T_WHITESPACE","\n    ",611],["T_PUBLIC","public",612],["T_WHITESPACE"," ",612],["T_FUNCTION","function",612],["T_WHITESPACE"," ",612],["T_STRING","getProduct",612],"(",["T_VARIABLE","$productId",612],",",["T_WHITESPACE"," ",612],["T_VARIABLE","$storeId",612],")",["T_WHITESPACE","\n    ",612],"{",["T_WHITESPACE","\n        ",613],["T_VARIABLE","$entityId",614],["T_WHITESPACE"," ",614],"=",["T_WHITESPACE"," ",614],["T_LNUMBER","0",614],";",["T_WHITESPACE","\n        ",614],["T_VARIABLE","$products",615],["T_WHITESPACE"," ",615],"=",["T_WHITESPACE"," ",615],["T_VARIABLE","$this",615],["T_OBJECT_OPERATOR","->",615],["T_STRING","_getProducts",615],"(",["T_VARIABLE","$productId",615],",",["T_WHITESPACE"," ",615],["T_VARIABLE","$storeId",615],",",["T_WHITESPACE"," ",615],["T_LNUMBER","0",615],",",["T_WHITESPACE"," ",615],["T_VARIABLE","$entityId",615],")",";",["T_WHITESPACE","\n        ",615],["T_IF","if",616],["T_WHITESPACE"," ",616],"(",["T_ISSET","isset",616],"(",["T_VARIABLE","$products",616],"[",["T_VARIABLE","$productId",616],"]",")",")",["T_WHITESPACE"," ",616],"{",["T_WHITESPACE","\n            ",616],["T_RETURN","return",617],["T_WHITESPACE"," ",617],["T_VARIABLE","$products",617],"[",["T_VARIABLE","$productId",617],"]",";",["T_WHITESPACE","\n        ",617],"}",["T_WHITESPACE","\n        ",618],["T_RETURN","return",619],["T_WHITESPACE"," ",619],["T_STRING","false",619],";",["T_WHITESPACE","\n    ",619],"}",["T_WHITESPACE","\n\n    ",620],["T_DOC_COMMENT","\/**\n     * Retrieve Product data obects for store\n     *\n     * @param int $storeId\n     * @param int &$lastEntityId\n     * @return array\n     *\/",622],["T_WHITESPACE","\n    ",628],["T_PUBLIC","public",629],["T_WHITESPACE"," ",629],["T_FUNCTION","function",629],["T_WHITESPACE"," ",629],["T_STRING","getProductsByStore",629],"(",["T_VARIABLE","$storeId",629],",",["T_WHITESPACE"," ",629],"&",["T_VARIABLE","$lastEntityId",629],")",["T_WHITESPACE","\n    ",629],"{",["T_WHITESPACE","\n        ",630],["T_RETURN","return",631],["T_WHITESPACE"," ",631],["T_VARIABLE","$this",631],["T_OBJECT_OPERATOR","->",631],["T_STRING","_getProducts",631],"(",["T_STRING","null",631],",",["T_WHITESPACE"," ",631],["T_VARIABLE","$storeId",631],",",["T_WHITESPACE"," ",631],["T_VARIABLE","$lastEntityId",631],",",["T_WHITESPACE"," ",631],["T_VARIABLE","$lastEntityId",631],")",";",["T_WHITESPACE","\n    ",631],"}",["T_WHITESPACE","\n\n    ",632],["T_DOC_COMMENT","\/**\n     * Get rewrite by product store\n     *\n     * Retrieve rewrites and visibility by store\n     * Input array format:\n     * product_id as key and store_id as value\n     * Output array format (product_id as key)\n     * store_id     int; store id\n     * visibility   int; visibility for store\n     * url_rewrite  string; rewrite URL for store\n     *\n     * @param array $products\n     * @return array\n     *\/",634],["T_WHITESPACE","\n    ",647],["T_PUBLIC","public",648],["T_WHITESPACE"," ",648],["T_FUNCTION","function",648],["T_WHITESPACE"," ",648],["T_STRING","getRewriteByProductStore",648],"(",["T_ARRAY","array",648],["T_WHITESPACE"," ",648],["T_VARIABLE","$products",648],")",["T_WHITESPACE","\n    ",648],"{",["T_WHITESPACE","\n        ",649],["T_VARIABLE","$result",650],["T_WHITESPACE"," ",650],"=",["T_WHITESPACE"," ",650],"[","]",";",["T_WHITESPACE","\n\n        ",650],["T_IF","if",652],["T_WHITESPACE"," ",652],"(",["T_EMPTY","empty",652],"(",["T_VARIABLE","$products",652],")",")",["T_WHITESPACE"," ",652],"{",["T_WHITESPACE","\n            ",652],["T_RETURN","return",653],["T_WHITESPACE"," ",653],["T_VARIABLE","$result",653],";",["T_WHITESPACE","\n        ",653],"}",["T_WHITESPACE","\n        ",654],["T_VARIABLE","$connection",655],["T_WHITESPACE"," ",655],"=",["T_WHITESPACE"," ",655],["T_VARIABLE","$this",655],["T_OBJECT_OPERATOR","->",655],["T_STRING","getConnection",655],"(",")",";",["T_WHITESPACE","\n\n        ",655],["T_VARIABLE","$select",657],["T_WHITESPACE"," ",657],"=",["T_WHITESPACE"," ",657],["T_VARIABLE","$connection",657],["T_OBJECT_OPERATOR","->",657],["T_STRING","select",657],"(",")",["T_OBJECT_OPERATOR","->",657],["T_STRING","from",657],"(",["T_WHITESPACE","\n            ",657],"[",["T_CONSTANT_ENCAPSED_STRING","'i'",658],["T_WHITESPACE"," ",658],["T_DOUBLE_ARROW","=>",658],["T_WHITESPACE"," ",658],["T_VARIABLE","$this",658],["T_OBJECT_OPERATOR","->",658],["T_STRING","getTable",658],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog_category_product_index'",658],")","]",",",["T_WHITESPACE","\n            ",658],"[",["T_CONSTANT_ENCAPSED_STRING","'product_id'",659],",",["T_WHITESPACE"," ",659],["T_CONSTANT_ENCAPSED_STRING","'store_id'",659],",",["T_WHITESPACE"," ",659],["T_CONSTANT_ENCAPSED_STRING","'visibility'",659],"]",["T_WHITESPACE","\n        ",659],")",["T_OBJECT_OPERATOR","->",660],["T_STRING","joinLeft",660],"(",["T_WHITESPACE","\n            ",660],"[",["T_CONSTANT_ENCAPSED_STRING","'u'",661],["T_WHITESPACE"," ",661],["T_DOUBLE_ARROW","=>",661],["T_WHITESPACE"," ",661],["T_VARIABLE","$this",661],["T_OBJECT_OPERATOR","->",661],["T_STRING","getMainTable",661],"(",")","]",",",["T_WHITESPACE","\n            ",661],["T_CONSTANT_ENCAPSED_STRING","'i.product_id = u.entity_id AND i.store_id = u.store_id'",662],["T_WHITESPACE","\n            ",662],".",["T_WHITESPACE"," ",663],["T_CONSTANT_ENCAPSED_STRING","' AND u.entity_type = \"'",663],["T_WHITESPACE"," ",663],".",["T_WHITESPACE"," ",663],["T_STRING","ProductUrlRewriteGenerator",663],["T_DOUBLE_COLON","::",663],["T_STRING","ENTITY_TYPE",663],["T_WHITESPACE"," ",663],".",["T_WHITESPACE"," ",663],["T_CONSTANT_ENCAPSED_STRING","'\"'",663],",",["T_WHITESPACE","\n            ",663],"[",["T_CONSTANT_ENCAPSED_STRING","'request_path'",664],"]",["T_WHITESPACE","\n        ",664],")",["T_OBJECT_OPERATOR","->",665],["T_STRING","joinLeft",665],"(",["T_WHITESPACE","\n            ",665],"[",["T_CONSTANT_ENCAPSED_STRING","'r'",666],["T_WHITESPACE"," ",666],["T_DOUBLE_ARROW","=>",666],["T_WHITESPACE"," ",666],["T_VARIABLE","$this",666],["T_OBJECT_OPERATOR","->",666],["T_STRING","getTable",666],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog_url_rewrite_product_category'",666],")","]",",",["T_WHITESPACE","\n            ",666],["T_CONSTANT_ENCAPSED_STRING","'u.url_rewrite_id = r.url_rewrite_id AND r.category_id is NULL'",667],",",["T_WHITESPACE","\n            ",667],"[","]",["T_WHITESPACE","\n        ",668],")",";",["T_WHITESPACE","\n\n        ",669],["T_VARIABLE","$bind",671],["T_WHITESPACE"," ",671],"=",["T_WHITESPACE"," ",671],"[","]",";",["T_WHITESPACE","\n        ",671],["T_FOREACH","foreach",672],["T_WHITESPACE"," ",672],"(",["T_VARIABLE","$products",672],["T_WHITESPACE"," ",672],["T_AS","as",672],["T_WHITESPACE"," ",672],["T_VARIABLE","$productId",672],["T_WHITESPACE"," ",672],["T_DOUBLE_ARROW","=>",672],["T_WHITESPACE"," ",672],["T_VARIABLE","$storeId",672],")",["T_WHITESPACE"," ",672],"{",["T_WHITESPACE","\n            ",672],["T_VARIABLE","$catId",673],["T_WHITESPACE"," ",673],"=",["T_WHITESPACE"," ",673],["T_VARIABLE","$this",673],["T_OBJECT_OPERATOR","->",673],["T_STRING","_storeManager",673],["T_OBJECT_OPERATOR","->",673],["T_STRING","getStore",673],"(",["T_VARIABLE","$storeId",673],")",["T_OBJECT_OPERATOR","->",673],["T_STRING","getRootCategoryId",673],"(",")",";",["T_WHITESPACE","\n            ",673],["T_VARIABLE","$productBind",674],["T_WHITESPACE"," ",674],"=",["T_WHITESPACE"," ",674],["T_CONSTANT_ENCAPSED_STRING","'product_id'",674],["T_WHITESPACE"," ",674],".",["T_WHITESPACE"," ",674],["T_VARIABLE","$productId",674],";",["T_WHITESPACE","\n            ",674],["T_VARIABLE","$storeBind",675],["T_WHITESPACE"," ",675],"=",["T_WHITESPACE"," ",675],["T_CONSTANT_ENCAPSED_STRING","'store_id'",675],["T_WHITESPACE"," ",675],".",["T_WHITESPACE"," ",675],["T_VARIABLE","$storeId",675],";",["T_WHITESPACE","\n            ",675],["T_VARIABLE","$catBind",676],["T_WHITESPACE"," ",676],"=",["T_WHITESPACE"," ",676],["T_CONSTANT_ENCAPSED_STRING","'category_id'",676],["T_WHITESPACE"," ",676],".",["T_WHITESPACE"," ",676],["T_VARIABLE","$catId",676],";",["T_WHITESPACE","\n            ",676],["T_VARIABLE","$cond",677],["T_WHITESPACE"," ",677],"=",["T_WHITESPACE"," ",677],["T_CONSTANT_ENCAPSED_STRING","'('",677],["T_WHITESPACE"," ",677],".",["T_WHITESPACE"," ",677],["T_STRING","implode",677],"(",["T_WHITESPACE","\n                ",677],["T_CONSTANT_ENCAPSED_STRING","' AND '",678],",",["T_WHITESPACE","\n                ",678],"[",["T_CONSTANT_ENCAPSED_STRING","'i.product_id = :'",679],["T_WHITESPACE"," ",679],".",["T_WHITESPACE"," ",679],["T_VARIABLE","$productBind",679],",",["T_WHITESPACE"," ",679],["T_CONSTANT_ENCAPSED_STRING","'i.store_id = :'",679],["T_WHITESPACE"," ",679],".",["T_WHITESPACE"," ",679],["T_VARIABLE","$storeBind",679],",",["T_WHITESPACE"," ",679],["T_CONSTANT_ENCAPSED_STRING","'i.category_id = :'",679],["T_WHITESPACE"," ",679],".",["T_WHITESPACE"," ",679],["T_VARIABLE","$catBind",679],"]",["T_WHITESPACE","\n            ",679],")",["T_WHITESPACE"," ",680],".",["T_WHITESPACE"," ",680],["T_CONSTANT_ENCAPSED_STRING","')'",680],";",["T_WHITESPACE","\n            ",680],["T_VARIABLE","$bind",681],"[",["T_VARIABLE","$productBind",681],"]",["T_WHITESPACE"," ",681],"=",["T_WHITESPACE"," ",681],["T_VARIABLE","$productId",681],";",["T_WHITESPACE","\n            ",681],["T_VARIABLE","$bind",682],"[",["T_VARIABLE","$storeBind",682],"]",["T_WHITESPACE"," ",682],"=",["T_WHITESPACE"," ",682],["T_VARIABLE","$storeId",682],";",["T_WHITESPACE","\n            ",682],["T_VARIABLE","$bind",683],"[",["T_VARIABLE","$catBind",683],"]",["T_WHITESPACE"," ",683],"=",["T_WHITESPACE"," ",683],["T_VARIABLE","$catId",683],";",["T_WHITESPACE","\n            ",683],["T_VARIABLE","$select",684],["T_OBJECT_OPERATOR","->",684],["T_STRING","orWhere",684],"(",["T_VARIABLE","$cond",684],")",";",["T_WHITESPACE","\n        ",684],"}",["T_WHITESPACE","\n\n        ",685],["T_VARIABLE","$rowSet",687],["T_WHITESPACE"," ",687],"=",["T_WHITESPACE"," ",687],["T_VARIABLE","$connection",687],["T_OBJECT_OPERATOR","->",687],["T_STRING","fetchAll",687],"(",["T_VARIABLE","$select",687],",",["T_WHITESPACE"," ",687],["T_VARIABLE","$bind",687],")",";",["T_WHITESPACE","\n        ",687],["T_FOREACH","foreach",688],["T_WHITESPACE"," ",688],"(",["T_VARIABLE","$rowSet",688],["T_WHITESPACE"," ",688],["T_AS","as",688],["T_WHITESPACE"," ",688],["T_VARIABLE","$row",688],")",["T_WHITESPACE"," ",688],"{",["T_WHITESPACE","\n            ",688],["T_VARIABLE","$result",689],"[",["T_VARIABLE","$row",689],"[",["T_CONSTANT_ENCAPSED_STRING","'product_id'",689],"]","]",["T_WHITESPACE"," ",689],"=",["T_WHITESPACE"," ",689],"[",["T_WHITESPACE","\n                ",689],["T_CONSTANT_ENCAPSED_STRING","'store_id'",690],["T_WHITESPACE"," ",690],["T_DOUBLE_ARROW","=>",690],["T_WHITESPACE"," ",690],["T_VARIABLE","$row",690],"[",["T_CONSTANT_ENCAPSED_STRING","'store_id'",690],"]",",",["T_WHITESPACE","\n                ",690],["T_CONSTANT_ENCAPSED_STRING","'visibility'",691],["T_WHITESPACE"," ",691],["T_DOUBLE_ARROW","=>",691],["T_WHITESPACE"," ",691],["T_VARIABLE","$row",691],"[",["T_CONSTANT_ENCAPSED_STRING","'visibility'",691],"]",",",["T_WHITESPACE","\n                ",691],["T_CONSTANT_ENCAPSED_STRING","'url_rewrite'",692],["T_WHITESPACE"," ",692],["T_DOUBLE_ARROW","=>",692],["T_WHITESPACE"," ",692],["T_VARIABLE","$row",692],"[",["T_CONSTANT_ENCAPSED_STRING","'request_path'",692],"]",",",["T_WHITESPACE","\n            ",692],"]",";",["T_WHITESPACE","\n        ",693],"}",["T_WHITESPACE","\n\n        ",694],["T_RETURN","return",696],["T_WHITESPACE"," ",696],["T_VARIABLE","$result",696],";",["T_WHITESPACE","\n    ",696],"}",["T_WHITESPACE","\n\n    ",697],["T_DOC_COMMENT","\/**\n     * @return \\Magento\\Framework\\EntityManager\\MetadataPool\n     *\/",699],["T_WHITESPACE","\n    ",701],["T_PRIVATE","private",702],["T_WHITESPACE"," ",702],["T_FUNCTION","function",702],["T_WHITESPACE"," ",702],["T_STRING","getMetadataPool",702],"(",")",["T_WHITESPACE","\n    ",702],"{",["T_WHITESPACE","\n        ",703],["T_IF","if",704],["T_WHITESPACE"," ",704],"(",["T_STRING","null",704],["T_WHITESPACE"," ",704],["T_IS_IDENTICAL","===",704],["T_WHITESPACE"," ",704],["T_VARIABLE","$this",704],["T_OBJECT_OPERATOR","->",704],["T_STRING","metadataPool",704],")",["T_WHITESPACE"," ",704],"{",["T_WHITESPACE","\n            ",704],["T_VARIABLE","$this",705],["T_OBJECT_OPERATOR","->",705],["T_STRING","metadataPool",705],["T_WHITESPACE"," ",705],"=",["T_WHITESPACE"," ",705],["T_NS_SEPARATOR","\\",705],["T_STRING","Magento",705],["T_NS_SEPARATOR","\\",705],["T_STRING","Framework",705],["T_NS_SEPARATOR","\\",705],["T_STRING","App",705],["T_NS_SEPARATOR","\\",705],["T_STRING","ObjectManager",705],["T_DOUBLE_COLON","::",705],["T_STRING","getInstance",705],"(",")",["T_WHITESPACE","\n                ",705],["T_OBJECT_OPERATOR","->",706],["T_STRING","get",706],"(",["T_NS_SEPARATOR","\\",706],["T_STRING","Magento",706],["T_NS_SEPARATOR","\\",706],["T_STRING","Framework",706],["T_NS_SEPARATOR","\\",706],["T_STRING","EntityManager",706],["T_NS_SEPARATOR","\\",706],["T_STRING","MetadataPool",706],["T_DOUBLE_COLON","::",706],["T_CLASS","class",706],")",";",["T_WHITESPACE","\n        ",706],"}",["T_WHITESPACE","\n        ",707],["T_RETURN","return",708],["T_WHITESPACE"," ",708],["T_VARIABLE","$this",708],["T_OBJECT_OPERATOR","->",708],["T_STRING","metadataPool",708],";",["T_WHITESPACE","\n    ",708],"}",["T_WHITESPACE","\n",709],"}",["T_WHITESPACE","\n",710]]
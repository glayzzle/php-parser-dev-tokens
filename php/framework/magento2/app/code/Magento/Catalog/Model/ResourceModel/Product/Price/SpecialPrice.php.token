[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Copyright \u00c2\u00a9 2013-2017 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n *\/",2],["T_WHITESPACE","\n\n",5],["T_NAMESPACE","namespace",7],["T_WHITESPACE"," ",7],["T_STRING","Magento",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Catalog",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Model",7],["T_NS_SEPARATOR","\\",7],["T_STRING","ResourceModel",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Product",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Price",7],";",["T_WHITESPACE","\n\n",7],["T_DOC_COMMENT","\/**\n * Special price resource.\n *\/",9],["T_WHITESPACE","\n",11],["T_CLASS","class",12],["T_WHITESPACE"," ",12],["T_STRING","SpecialPrice",12],["T_WHITESPACE"," ",12],["T_IMPLEMENTS","implements",12],["T_WHITESPACE"," ",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Magento",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Catalog",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Api",12],["T_NS_SEPARATOR","\\",12],["T_STRING","SpecialPriceInterface",12],["T_WHITESPACE","\n",12],"{",["T_WHITESPACE","\n    ",13],["T_DOC_COMMENT","\/**\n     * Price storage table.\n     *\n     * @var string\n     *\/",14],["T_WHITESPACE","\n    ",18],["T_PRIVATE","private",19],["T_WHITESPACE"," ",19],["T_VARIABLE","$priceTable",19],["T_WHITESPACE"," ",19],"=",["T_WHITESPACE"," ",19],["T_CONSTANT_ENCAPSED_STRING","'catalog_product_entity_decimal'",19],";",["T_WHITESPACE","\n\n    ",19],["T_DOC_COMMENT","\/**\n     * Datetime storage table.\n     *\n     * @var string\n     *\/",21],["T_WHITESPACE","\n    ",25],["T_PRIVATE","private",26],["T_WHITESPACE"," ",26],["T_VARIABLE","$datetimeTable",26],["T_WHITESPACE"," ",26],"=",["T_WHITESPACE"," ",26],["T_CONSTANT_ENCAPSED_STRING","'catalog_product_entity_datetime'",26],";",["T_WHITESPACE","\n\n    ",26],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Catalog\\Model\\ResourceModel\\Attribute\n     *\/",28],["T_WHITESPACE","\n    ",30],["T_PRIVATE","private",31],["T_WHITESPACE"," ",31],["T_VARIABLE","$attributeResource",31],";",["T_WHITESPACE","\n\n    ",31],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Catalog\\Api\\ProductAttributeRepositoryInterface\n     *\/",33],["T_WHITESPACE","\n    ",35],["T_PRIVATE","private",36],["T_WHITESPACE"," ",36],["T_VARIABLE","$attributeRepository",36],";",["T_WHITESPACE","\n\n    ",36],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Catalog\\Model\\ProductIdLocatorInterface\n     *\/",38],["T_WHITESPACE","\n    ",40],["T_PRIVATE","private",41],["T_WHITESPACE"," ",41],["T_VARIABLE","$productIdLocator",41],";",["T_WHITESPACE","\n\n    ",41],["T_DOC_COMMENT","\/**\n     * Metadata pool.\n     *\n     * @var \\Magento\\Framework\\EntityManager\\MetadataPool\n     *\/",43],["T_WHITESPACE","\n    ",47],["T_PRIVATE","private",48],["T_WHITESPACE"," ",48],["T_VARIABLE","$metadataPool",48],";",["T_WHITESPACE","\n\n    ",48],["T_DOC_COMMENT","\/**\n     * Special Price attribute ID.\n     *\n     * @var int\n     *\/",50],["T_WHITESPACE","\n    ",54],["T_PRIVATE","private",55],["T_WHITESPACE"," ",55],["T_VARIABLE","$priceAttributeId",55],";",["T_WHITESPACE","\n\n    ",55],["T_DOC_COMMENT","\/**\n     * Special price from attribute ID.\n     *\n     * @var int\n     *\/",57],["T_WHITESPACE","\n    ",61],["T_PRIVATE","private",62],["T_WHITESPACE"," ",62],["T_VARIABLE","$priceFromAttributeId",62],";",["T_WHITESPACE","\n\n    ",62],["T_DOC_COMMENT","\/**\n     * Special price to attribute ID.\n     *\n     * @var int\n     *\/",64],["T_WHITESPACE","\n    ",68],["T_PRIVATE","private",69],["T_WHITESPACE"," ",69],["T_VARIABLE","$priceToAttributeId",69],";",["T_WHITESPACE","\n\n    ",69],["T_DOC_COMMENT","\/**\n     * Items per operation.\n     *\n     * @var int\n     *\/",71],["T_WHITESPACE","\n    ",75],["T_PRIVATE","private",76],["T_WHITESPACE"," ",76],["T_VARIABLE","$itemsPerOperation",76],["T_WHITESPACE"," ",76],"=",["T_WHITESPACE"," ",76],["T_LNUMBER","500",76],";",["T_WHITESPACE","\n\n    ",76],["T_DOC_COMMENT","\/**\n     * @param \\Magento\\Catalog\\Model\\ResourceModel\\Attribute $attributeResource\n     * @param \\Magento\\Catalog\\Api\\ProductAttributeRepositoryInterface $attributeRepository\n     * @param \\Magento\\Catalog\\Model\\ProductIdLocatorInterface $productIdLocator\n     * @param \\Magento\\Framework\\EntityManager\\MetadataPool $metadataPool\n     *\/",78],["T_WHITESPACE","\n    ",83],["T_PUBLIC","public",84],["T_WHITESPACE"," ",84],["T_FUNCTION","function",84],["T_WHITESPACE"," ",84],["T_STRING","__construct",84],"(",["T_WHITESPACE","\n        ",84],["T_NS_SEPARATOR","\\",85],["T_STRING","Magento",85],["T_NS_SEPARATOR","\\",85],["T_STRING","Catalog",85],["T_NS_SEPARATOR","\\",85],["T_STRING","Model",85],["T_NS_SEPARATOR","\\",85],["T_STRING","ResourceModel",85],["T_NS_SEPARATOR","\\",85],["T_STRING","Attribute",85],["T_WHITESPACE"," ",85],["T_VARIABLE","$attributeResource",85],",",["T_WHITESPACE","\n        ",85],["T_NS_SEPARATOR","\\",86],["T_STRING","Magento",86],["T_NS_SEPARATOR","\\",86],["T_STRING","Catalog",86],["T_NS_SEPARATOR","\\",86],["T_STRING","Api",86],["T_NS_SEPARATOR","\\",86],["T_STRING","ProductAttributeRepositoryInterface",86],["T_WHITESPACE"," ",86],["T_VARIABLE","$attributeRepository",86],",",["T_WHITESPACE","\n        ",86],["T_NS_SEPARATOR","\\",87],["T_STRING","Magento",87],["T_NS_SEPARATOR","\\",87],["T_STRING","Catalog",87],["T_NS_SEPARATOR","\\",87],["T_STRING","Model",87],["T_NS_SEPARATOR","\\",87],["T_STRING","ProductIdLocatorInterface",87],["T_WHITESPACE"," ",87],["T_VARIABLE","$productIdLocator",87],",",["T_WHITESPACE","\n        ",87],["T_NS_SEPARATOR","\\",88],["T_STRING","Magento",88],["T_NS_SEPARATOR","\\",88],["T_STRING","Framework",88],["T_NS_SEPARATOR","\\",88],["T_STRING","EntityManager",88],["T_NS_SEPARATOR","\\",88],["T_STRING","MetadataPool",88],["T_WHITESPACE"," ",88],["T_VARIABLE","$metadataPool",88],["T_WHITESPACE","\n    ",88],")",["T_WHITESPACE"," ",89],"{",["T_WHITESPACE","\n        ",89],["T_VARIABLE","$this",90],["T_OBJECT_OPERATOR","->",90],["T_STRING","attributeResource",90],["T_WHITESPACE"," ",90],"=",["T_WHITESPACE"," ",90],["T_VARIABLE","$attributeResource",90],";",["T_WHITESPACE","\n        ",90],["T_VARIABLE","$this",91],["T_OBJECT_OPERATOR","->",91],["T_STRING","attributeRepository",91],["T_WHITESPACE"," ",91],"=",["T_WHITESPACE"," ",91],["T_VARIABLE","$attributeRepository",91],";",["T_WHITESPACE","\n        ",91],["T_VARIABLE","$this",92],["T_OBJECT_OPERATOR","->",92],["T_STRING","productIdLocator",92],["T_WHITESPACE"," ",92],"=",["T_WHITESPACE"," ",92],["T_VARIABLE","$productIdLocator",92],";",["T_WHITESPACE","\n        ",92],["T_VARIABLE","$this",93],["T_OBJECT_OPERATOR","->",93],["T_STRING","metadataPool",93],["T_WHITESPACE"," ",93],"=",["T_WHITESPACE"," ",93],["T_VARIABLE","$metadataPool",93],";",["T_WHITESPACE","\n    ",93],"}",["T_WHITESPACE","\n\n    ",94],["T_DOC_COMMENT","\/**\n     * {@inheritdoc}\n     *\/",96],["T_WHITESPACE","\n    ",98],["T_PUBLIC","public",99],["T_WHITESPACE"," ",99],["T_FUNCTION","function",99],["T_WHITESPACE"," ",99],["T_STRING","get",99],"(",["T_ARRAY","array",99],["T_WHITESPACE"," ",99],["T_VARIABLE","$skus",99],")",["T_WHITESPACE","\n    ",99],"{",["T_WHITESPACE","\n        ",100],["T_VARIABLE","$ids",101],["T_WHITESPACE"," ",101],"=",["T_WHITESPACE"," ",101],["T_VARIABLE","$this",101],["T_OBJECT_OPERATOR","->",101],["T_STRING","retrieveAffectedIds",101],"(",["T_VARIABLE","$skus",101],")",";",["T_WHITESPACE","\n        ",101],["T_VARIABLE","$priceTable",102],["T_WHITESPACE"," ",102],"=",["T_WHITESPACE"," ",102],["T_VARIABLE","$this",102],["T_OBJECT_OPERATOR","->",102],["T_STRING","attributeResource",102],["T_OBJECT_OPERATOR","->",102],["T_STRING","getTable",102],"(",["T_VARIABLE","$this",102],["T_OBJECT_OPERATOR","->",102],["T_STRING","priceTable",102],")",";",["T_WHITESPACE","\n        ",102],["T_VARIABLE","$dateTimeTable",103],["T_WHITESPACE"," ",103],"=",["T_WHITESPACE"," ",103],["T_VARIABLE","$this",103],["T_OBJECT_OPERATOR","->",103],["T_STRING","attributeResource",103],["T_OBJECT_OPERATOR","->",103],["T_STRING","getTable",103],"(",["T_VARIABLE","$this",103],["T_OBJECT_OPERATOR","->",103],["T_STRING","datetimeTable",103],")",";",["T_WHITESPACE","\n        ",103],["T_VARIABLE","$linkField",104],["T_WHITESPACE"," ",104],"=",["T_WHITESPACE"," ",104],["T_VARIABLE","$this",104],["T_OBJECT_OPERATOR","->",104],["T_STRING","getEntityLinkField",104],"(",")",";",["T_WHITESPACE","\n        ",104],["T_VARIABLE","$select",105],["T_WHITESPACE"," ",105],"=",["T_WHITESPACE"," ",105],["T_VARIABLE","$this",105],["T_OBJECT_OPERATOR","->",105],["T_STRING","attributeResource",105],["T_OBJECT_OPERATOR","->",105],["T_STRING","getConnection",105],"(",")",["T_WHITESPACE","\n            ",105],["T_OBJECT_OPERATOR","->",106],["T_STRING","select",106],"(",")",["T_WHITESPACE","\n            ",106],["T_OBJECT_OPERATOR","->",107],["T_STRING","from",107],"(",["T_WHITESPACE","\n                ",107],["T_VARIABLE","$priceTable",108],",",["T_WHITESPACE","\n                ",108],"[",["T_WHITESPACE","\n                    ",109],["T_CONSTANT_ENCAPSED_STRING","'value_id'",110],",",["T_WHITESPACE","\n                    ",110],["T_CONSTANT_ENCAPSED_STRING","'store_id'",111],",",["T_WHITESPACE","\n                    ",111],["T_VARIABLE","$this",112],["T_OBJECT_OPERATOR","->",112],["T_STRING","getEntityLinkField",112],"(",")",",",["T_WHITESPACE","\n                    ",112],["T_CONSTANT_ENCAPSED_STRING","'value'",113],",",["T_WHITESPACE","\n                ",113],"]",["T_WHITESPACE","\n            ",114],")",["T_WHITESPACE","\n            ",115],["T_OBJECT_OPERATOR","->",116],["T_STRING","joinLeft",116],"(",["T_WHITESPACE","\n                ",116],["T_VARIABLE","$dateTimeTable",117],["T_WHITESPACE"," ",117],".",["T_WHITESPACE"," ",117],["T_CONSTANT_ENCAPSED_STRING","' AS datetime_from'",117],",",["T_WHITESPACE","\n                ",117],["T_VARIABLE","$priceTable",118],["T_WHITESPACE"," ",118],".",["T_WHITESPACE"," ",118],["T_CONSTANT_ENCAPSED_STRING","'.'",118],["T_WHITESPACE"," ",118],".",["T_WHITESPACE"," ",118],["T_VARIABLE","$linkField",118],["T_WHITESPACE"," ",118],".",["T_WHITESPACE"," ",118],["T_CONSTANT_ENCAPSED_STRING","'='",118],["T_WHITESPACE"," ",118],".",["T_WHITESPACE"," ",118],["T_CONSTANT_ENCAPSED_STRING","'datetime_from.'",118],["T_WHITESPACE"," ",118],".",["T_WHITESPACE"," ",118],["T_VARIABLE","$linkField",118],["T_WHITESPACE","\n                ",118],".",["T_WHITESPACE"," ",119],["T_CONSTANT_ENCAPSED_STRING","' AND datetime_from.attribute_id='",119],["T_WHITESPACE"," ",119],".",["T_WHITESPACE"," ",119],["T_VARIABLE","$this",119],["T_OBJECT_OPERATOR","->",119],["T_STRING","getPriceFromAttributeId",119],"(",")",",",["T_WHITESPACE","\n                ",119],["T_CONSTANT_ENCAPSED_STRING","'value AS price_from'",120],["T_WHITESPACE","\n            ",120],")",["T_WHITESPACE","\n            ",121],["T_OBJECT_OPERATOR","->",122],["T_STRING","joinLeft",122],"(",["T_WHITESPACE","\n                ",122],["T_VARIABLE","$dateTimeTable",123],["T_WHITESPACE"," ",123],".",["T_WHITESPACE"," ",123],["T_CONSTANT_ENCAPSED_STRING","' AS datetime_to'",123],",",["T_WHITESPACE","\n                ",123],["T_VARIABLE","$priceTable",124],["T_WHITESPACE"," ",124],".",["T_WHITESPACE"," ",124],["T_CONSTANT_ENCAPSED_STRING","'.'",124],["T_WHITESPACE"," ",124],".",["T_WHITESPACE"," ",124],["T_VARIABLE","$linkField",124],["T_WHITESPACE"," ",124],".",["T_WHITESPACE"," ",124],["T_CONSTANT_ENCAPSED_STRING","'='",124],["T_WHITESPACE"," ",124],".",["T_WHITESPACE"," ",124],["T_CONSTANT_ENCAPSED_STRING","'datetime_to.'",124],["T_WHITESPACE"," ",124],".",["T_WHITESPACE"," ",124],["T_VARIABLE","$linkField",124],["T_WHITESPACE","\n                ",124],".",["T_WHITESPACE"," ",125],["T_CONSTANT_ENCAPSED_STRING","' AND datetime_to.attribute_id='",125],["T_WHITESPACE"," ",125],".",["T_WHITESPACE"," ",125],["T_VARIABLE","$this",125],["T_OBJECT_OPERATOR","->",125],["T_STRING","getPriceToAttributeId",125],"(",")",",",["T_WHITESPACE","\n                ",125],["T_CONSTANT_ENCAPSED_STRING","'value AS price_to'",126],["T_WHITESPACE","\n            ",126],")",["T_WHITESPACE","\n            ",127],["T_OBJECT_OPERATOR","->",128],["T_STRING","where",128],"(",["T_VARIABLE","$priceTable",128],["T_WHITESPACE"," ",128],".",["T_WHITESPACE"," ",128],["T_CONSTANT_ENCAPSED_STRING","'.'",128],["T_WHITESPACE"," ",128],".",["T_WHITESPACE"," ",128],["T_VARIABLE","$linkField",128],["T_WHITESPACE"," ",128],".",["T_WHITESPACE"," ",128],["T_CONSTANT_ENCAPSED_STRING","' IN (?)'",128],",",["T_WHITESPACE"," ",128],["T_VARIABLE","$ids",128],")",["T_WHITESPACE","\n            ",128],["T_OBJECT_OPERATOR","->",129],["T_STRING","where",129],"(",["T_VARIABLE","$priceTable",129],["T_WHITESPACE"," ",129],".",["T_WHITESPACE"," ",129],["T_CONSTANT_ENCAPSED_STRING","'.attribute_id = ?'",129],",",["T_WHITESPACE"," ",129],["T_VARIABLE","$this",129],["T_OBJECT_OPERATOR","->",129],["T_STRING","getPriceAttributeId",129],"(",")",")",";",["T_WHITESPACE","\n\n        ",129],["T_RETURN","return",131],["T_WHITESPACE"," ",131],["T_VARIABLE","$this",131],["T_OBJECT_OPERATOR","->",131],["T_STRING","attributeResource",131],["T_OBJECT_OPERATOR","->",131],["T_STRING","getConnection",131],"(",")",["T_OBJECT_OPERATOR","->",131],["T_STRING","fetchAll",131],"(",["T_VARIABLE","$select",131],")",";",["T_WHITESPACE","\n    ",131],"}",["T_WHITESPACE","\n\n    ",132],["T_DOC_COMMENT","\/**\n     * {@inheritdoc}\n     *\/",134],["T_WHITESPACE","\n    ",136],["T_PUBLIC","public",137],["T_WHITESPACE"," ",137],["T_FUNCTION","function",137],["T_WHITESPACE"," ",137],["T_STRING","update",137],"(",["T_ARRAY","array",137],["T_WHITESPACE"," ",137],["T_VARIABLE","$prices",137],")",["T_WHITESPACE","\n    ",137],"{",["T_WHITESPACE","\n        ",138],["T_VARIABLE","$formattedPrices",139],["T_WHITESPACE"," ",139],"=",["T_WHITESPACE"," ",139],"[","]",";",["T_WHITESPACE","\n        ",139],["T_VARIABLE","$formattedDates",140],["T_WHITESPACE"," ",140],"=",["T_WHITESPACE"," ",140],"[","]",";",["T_WHITESPACE","\n\n        ",140],["T_DOC_COMMENT","\/** @var \\Magento\\Catalog\\Api\\Data\\SpecialPriceInterface $price *\/",142],["T_WHITESPACE","\n        ",142],["T_FOREACH","foreach",143],["T_WHITESPACE"," ",143],"(",["T_VARIABLE","$prices",143],["T_WHITESPACE"," ",143],["T_AS","as",143],["T_WHITESPACE"," ",143],["T_VARIABLE","$price",143],")",["T_WHITESPACE"," ",143],"{",["T_WHITESPACE","\n            ",143],["T_VARIABLE","$productIdsBySku",144],["T_WHITESPACE"," ",144],"=",["T_WHITESPACE"," ",144],["T_VARIABLE","$this",144],["T_OBJECT_OPERATOR","->",144],["T_STRING","productIdLocator",144],["T_OBJECT_OPERATOR","->",144],["T_STRING","retrieveProductIdsBySkus",144],"(","[",["T_VARIABLE","$price",144],["T_OBJECT_OPERATOR","->",144],["T_STRING","getSku",144],"(",")","]",")",";",["T_WHITESPACE","\n            ",144],["T_VARIABLE","$ids",145],["T_WHITESPACE"," ",145],"=",["T_WHITESPACE"," ",145],["T_STRING","array_keys",145],"(",["T_VARIABLE","$productIdsBySku",145],"[",["T_VARIABLE","$price",145],["T_OBJECT_OPERATOR","->",145],["T_STRING","getSku",145],"(",")","]",")",";",["T_WHITESPACE","\n            ",145],["T_FOREACH","foreach",146],["T_WHITESPACE"," ",146],"(",["T_VARIABLE","$ids",146],["T_WHITESPACE"," ",146],["T_AS","as",146],["T_WHITESPACE"," ",146],["T_VARIABLE","$id",146],")",["T_WHITESPACE"," ",146],"{",["T_WHITESPACE","\n                ",146],["T_VARIABLE","$formattedPrices",147],"[","]",["T_WHITESPACE"," ",147],"=",["T_WHITESPACE"," ",147],"[",["T_WHITESPACE","\n                    ",147],["T_CONSTANT_ENCAPSED_STRING","'store_id'",148],["T_WHITESPACE"," ",148],["T_DOUBLE_ARROW","=>",148],["T_WHITESPACE"," ",148],["T_VARIABLE","$price",148],["T_OBJECT_OPERATOR","->",148],["T_STRING","getStoreId",148],"(",")",",",["T_WHITESPACE","\n                    ",148],["T_VARIABLE","$this",149],["T_OBJECT_OPERATOR","->",149],["T_STRING","getEntityLinkField",149],"(",")",["T_WHITESPACE"," ",149],["T_DOUBLE_ARROW","=>",149],["T_WHITESPACE"," ",149],["T_VARIABLE","$id",149],",",["T_WHITESPACE","\n                    ",149],["T_CONSTANT_ENCAPSED_STRING","'value'",150],["T_WHITESPACE"," ",150],["T_DOUBLE_ARROW","=>",150],["T_WHITESPACE"," ",150],["T_VARIABLE","$price",150],["T_OBJECT_OPERATOR","->",150],["T_STRING","getPrice",150],"(",")",",",["T_WHITESPACE","\n                    ",150],["T_CONSTANT_ENCAPSED_STRING","'attribute_id'",151],["T_WHITESPACE"," ",151],["T_DOUBLE_ARROW","=>",151],["T_WHITESPACE"," ",151],["T_VARIABLE","$this",151],["T_OBJECT_OPERATOR","->",151],["T_STRING","getPriceAttributeId",151],"(",")",",",["T_WHITESPACE","\n                ",151],"]",";",["T_WHITESPACE","\n                ",152],["T_IF","if",153],["T_WHITESPACE"," ",153],"(",["T_VARIABLE","$price",153],["T_OBJECT_OPERATOR","->",153],["T_STRING","getPriceFrom",153],"(",")",")",["T_WHITESPACE"," ",153],"{",["T_WHITESPACE","\n                    ",153],["T_VARIABLE","$formattedDates",154],"[","]",["T_WHITESPACE"," ",154],"=",["T_WHITESPACE"," ",154],"[",["T_WHITESPACE","\n                        ",154],["T_CONSTANT_ENCAPSED_STRING","'store_id'",155],["T_WHITESPACE"," ",155],["T_DOUBLE_ARROW","=>",155],["T_WHITESPACE"," ",155],["T_VARIABLE","$price",155],["T_OBJECT_OPERATOR","->",155],["T_STRING","getStoreId",155],"(",")",",",["T_WHITESPACE","\n                        ",155],["T_VARIABLE","$this",156],["T_OBJECT_OPERATOR","->",156],["T_STRING","getEntityLinkField",156],"(",")",["T_WHITESPACE"," ",156],["T_DOUBLE_ARROW","=>",156],["T_WHITESPACE"," ",156],["T_VARIABLE","$id",156],",",["T_WHITESPACE","\n                        ",156],["T_CONSTANT_ENCAPSED_STRING","'value'",157],["T_WHITESPACE"," ",157],["T_DOUBLE_ARROW","=>",157],["T_WHITESPACE"," ",157],["T_VARIABLE","$price",157],["T_OBJECT_OPERATOR","->",157],["T_STRING","getPriceFrom",157],"(",")",",",["T_WHITESPACE","\n                        ",157],["T_CONSTANT_ENCAPSED_STRING","'attribute_id'",158],["T_WHITESPACE"," ",158],["T_DOUBLE_ARROW","=>",158],["T_WHITESPACE"," ",158],["T_VARIABLE","$this",158],["T_OBJECT_OPERATOR","->",158],["T_STRING","getPriceFromAttributeId",158],"(",")",",",["T_WHITESPACE","\n                    ",158],"]",";",["T_WHITESPACE","\n                ",159],"}",["T_WHITESPACE","\n                ",160],["T_IF","if",161],["T_WHITESPACE"," ",161],"(",["T_VARIABLE","$price",161],["T_OBJECT_OPERATOR","->",161],["T_STRING","getPriceTo",161],"(",")",")",["T_WHITESPACE"," ",161],"{",["T_WHITESPACE","\n                    ",161],["T_VARIABLE","$formattedDates",162],"[","]",["T_WHITESPACE"," ",162],"=",["T_WHITESPACE"," ",162],"[",["T_WHITESPACE","\n                        ",162],["T_CONSTANT_ENCAPSED_STRING","'store_id'",163],["T_WHITESPACE"," ",163],["T_DOUBLE_ARROW","=>",163],["T_WHITESPACE"," ",163],["T_VARIABLE","$price",163],["T_OBJECT_OPERATOR","->",163],["T_STRING","getStoreId",163],"(",")",",",["T_WHITESPACE","\n                        ",163],["T_VARIABLE","$this",164],["T_OBJECT_OPERATOR","->",164],["T_STRING","getEntityLinkField",164],"(",")",["T_WHITESPACE"," ",164],["T_DOUBLE_ARROW","=>",164],["T_WHITESPACE"," ",164],["T_VARIABLE","$id",164],",",["T_WHITESPACE","\n                        ",164],["T_CONSTANT_ENCAPSED_STRING","'value'",165],["T_WHITESPACE"," ",165],["T_DOUBLE_ARROW","=>",165],["T_WHITESPACE"," ",165],["T_VARIABLE","$price",165],["T_OBJECT_OPERATOR","->",165],["T_STRING","getPriceTo",165],"(",")",",",["T_WHITESPACE","\n                        ",165],["T_CONSTANT_ENCAPSED_STRING","'attribute_id'",166],["T_WHITESPACE"," ",166],["T_DOUBLE_ARROW","=>",166],["T_WHITESPACE"," ",166],["T_VARIABLE","$this",166],["T_OBJECT_OPERATOR","->",166],["T_STRING","getPriceToAttributeId",166],"(",")",",",["T_WHITESPACE","\n                    ",166],"]",";",["T_WHITESPACE","\n                ",167],"}",["T_WHITESPACE","\n            ",168],"}",["T_WHITESPACE","\n        ",169],"}",["T_WHITESPACE","\n        ",170],["T_VARIABLE","$connection",171],["T_WHITESPACE"," ",171],"=",["T_WHITESPACE"," ",171],["T_VARIABLE","$this",171],["T_OBJECT_OPERATOR","->",171],["T_STRING","attributeResource",171],["T_OBJECT_OPERATOR","->",171],["T_STRING","getConnection",171],"(",")",";",["T_WHITESPACE","\n        ",171],["T_VARIABLE","$connection",172],["T_OBJECT_OPERATOR","->",172],["T_STRING","beginTransaction",172],"(",")",";",["T_WHITESPACE","\n\n        ",172],["T_TRY","try",174],["T_WHITESPACE"," ",174],"{",["T_WHITESPACE","\n            ",174],["T_VARIABLE","$this",175],["T_OBJECT_OPERATOR","->",175],["T_STRING","updateItems",175],"(",["T_VARIABLE","$formattedPrices",175],",",["T_WHITESPACE"," ",175],["T_VARIABLE","$this",175],["T_OBJECT_OPERATOR","->",175],["T_STRING","priceTable",175],")",";",["T_WHITESPACE","\n            ",175],["T_VARIABLE","$this",176],["T_OBJECT_OPERATOR","->",176],["T_STRING","updateItems",176],"(",["T_VARIABLE","$formattedDates",176],",",["T_WHITESPACE"," ",176],["T_VARIABLE","$this",176],["T_OBJECT_OPERATOR","->",176],["T_STRING","datetimeTable",176],")",";",["T_WHITESPACE","\n            ",176],["T_VARIABLE","$connection",177],["T_OBJECT_OPERATOR","->",177],["T_STRING","commit",177],"(",")",";",["T_WHITESPACE","\n        ",177],"}",["T_WHITESPACE"," ",178],["T_CATCH","catch",178],["T_WHITESPACE"," ",178],"(",["T_NS_SEPARATOR","\\",178],["T_STRING","Exception",178],["T_WHITESPACE"," ",178],["T_VARIABLE","$e",178],")",["T_WHITESPACE"," ",178],"{",["T_WHITESPACE","\n            ",178],["T_VARIABLE","$connection",179],["T_OBJECT_OPERATOR","->",179],["T_STRING","rollBack",179],"(",")",";",["T_WHITESPACE","\n            ",179],["T_THROW","throw",180],["T_WHITESPACE"," ",180],["T_NEW","new",180],["T_WHITESPACE"," ",180],["T_NS_SEPARATOR","\\",180],["T_STRING","Magento",180],["T_NS_SEPARATOR","\\",180],["T_STRING","Framework",180],["T_NS_SEPARATOR","\\",180],["T_STRING","Exception",180],["T_NS_SEPARATOR","\\",180],["T_STRING","CouldNotSaveException",180],"(",["T_WHITESPACE","\n                ",180],["T_STRING","__",181],"(",["T_CONSTANT_ENCAPSED_STRING","'Could not save Prices.'",181],")",",",["T_WHITESPACE","\n                ",181],["T_VARIABLE","$e",182],["T_WHITESPACE","\n            ",182],")",";",["T_WHITESPACE","\n        ",183],"}",["T_WHITESPACE","\n\n        ",184],["T_RETURN","return",186],["T_WHITESPACE"," ",186],["T_STRING","true",186],";",["T_WHITESPACE","\n    ",186],"}",["T_WHITESPACE","\n\n    ",187],["T_DOC_COMMENT","\/**\n     * {@inheritdoc}\n     *\/",189],["T_WHITESPACE","\n    ",191],["T_PUBLIC","public",192],["T_WHITESPACE"," ",192],["T_FUNCTION","function",192],["T_WHITESPACE"," ",192],["T_STRING","delete",192],"(",["T_ARRAY","array",192],["T_WHITESPACE"," ",192],["T_VARIABLE","$prices",192],")",["T_WHITESPACE","\n    ",192],"{",["T_WHITESPACE","\n        ",193],["T_VARIABLE","$skus",194],["T_WHITESPACE"," ",194],"=",["T_WHITESPACE"," ",194],["T_STRING","array_unique",194],"(",["T_WHITESPACE","\n            ",194],["T_STRING","array_map",195],"(",["T_FUNCTION","function",195],["T_WHITESPACE"," ",195],"(",["T_VARIABLE","$price",195],")",["T_WHITESPACE"," ",195],"{",["T_WHITESPACE","\n                ",195],["T_RETURN","return",196],["T_WHITESPACE"," ",196],["T_VARIABLE","$price",196],["T_OBJECT_OPERATOR","->",196],["T_STRING","getSku",196],"(",")",";",["T_WHITESPACE","\n            ",196],"}",",",["T_WHITESPACE"," ",197],["T_VARIABLE","$prices",197],")",["T_WHITESPACE","\n        ",197],")",";",["T_WHITESPACE","\n        ",198],["T_VARIABLE","$ids",199],["T_WHITESPACE"," ",199],"=",["T_WHITESPACE"," ",199],["T_VARIABLE","$this",199],["T_OBJECT_OPERATOR","->",199],["T_STRING","retrieveAffectedIds",199],"(",["T_VARIABLE","$skus",199],")",";",["T_WHITESPACE","\n        ",199],["T_VARIABLE","$connection",200],["T_WHITESPACE"," ",200],"=",["T_WHITESPACE"," ",200],["T_VARIABLE","$this",200],["T_OBJECT_OPERATOR","->",200],["T_STRING","attributeResource",200],["T_OBJECT_OPERATOR","->",200],["T_STRING","getConnection",200],"(",")",";",["T_WHITESPACE","\n        ",200],["T_VARIABLE","$connection",201],["T_OBJECT_OPERATOR","->",201],["T_STRING","beginTransaction",201],"(",")",";",["T_WHITESPACE","\n        ",201],["T_TRY","try",202],["T_WHITESPACE"," ",202],"{",["T_WHITESPACE","\n            ",202],["T_FOREACH","foreach",203],["T_WHITESPACE"," ",203],"(",["T_STRING","array_chunk",203],"(",["T_VARIABLE","$ids",203],",",["T_WHITESPACE"," ",203],["T_VARIABLE","$this",203],["T_OBJECT_OPERATOR","->",203],["T_STRING","itemsPerOperation",203],")",["T_WHITESPACE"," ",203],["T_AS","as",203],["T_WHITESPACE"," ",203],["T_VARIABLE","$idsBunch",203],")",["T_WHITESPACE"," ",203],"{",["T_WHITESPACE","\n                ",203],["T_VARIABLE","$this",204],["T_OBJECT_OPERATOR","->",204],["T_STRING","attributeResource",204],["T_OBJECT_OPERATOR","->",204],["T_STRING","getConnection",204],"(",")",["T_OBJECT_OPERATOR","->",204],["T_STRING","delete",204],"(",["T_WHITESPACE","\n                    ",204],["T_VARIABLE","$this",205],["T_OBJECT_OPERATOR","->",205],["T_STRING","attributeResource",205],["T_OBJECT_OPERATOR","->",205],["T_STRING","getTable",205],"(",["T_VARIABLE","$this",205],["T_OBJECT_OPERATOR","->",205],["T_STRING","priceTable",205],")",",",["T_WHITESPACE","\n                    ",205],"[",["T_WHITESPACE","\n                        ",206],["T_CONSTANT_ENCAPSED_STRING","'attribute_id = ?'",207],["T_WHITESPACE"," ",207],["T_DOUBLE_ARROW","=>",207],["T_WHITESPACE"," ",207],["T_VARIABLE","$this",207],["T_OBJECT_OPERATOR","->",207],["T_STRING","getPriceAttributeId",207],"(",")",",",["T_WHITESPACE","\n                        ",207],["T_VARIABLE","$this",208],["T_OBJECT_OPERATOR","->",208],["T_STRING","getEntityLinkField",208],"(",")",["T_WHITESPACE"," ",208],".",["T_WHITESPACE"," ",208],["T_CONSTANT_ENCAPSED_STRING","' IN (?)'",208],["T_WHITESPACE"," ",208],["T_DOUBLE_ARROW","=>",208],["T_WHITESPACE"," ",208],["T_VARIABLE","$idsBunch",208],["T_WHITESPACE","\n                    ",208],"]",["T_WHITESPACE","\n                ",209],")",";",["T_WHITESPACE","\n            ",210],"}",["T_WHITESPACE","\n            ",211],["T_FOREACH","foreach",212],["T_WHITESPACE"," ",212],"(",["T_STRING","array_chunk",212],"(",["T_VARIABLE","$ids",212],",",["T_WHITESPACE"," ",212],["T_VARIABLE","$this",212],["T_OBJECT_OPERATOR","->",212],["T_STRING","itemsPerOperation",212],")",["T_WHITESPACE"," ",212],["T_AS","as",212],["T_WHITESPACE"," ",212],["T_VARIABLE","$idsBunch",212],")",["T_WHITESPACE"," ",212],"{",["T_WHITESPACE","\n                ",212],["T_VARIABLE","$this",213],["T_OBJECT_OPERATOR","->",213],["T_STRING","attributeResource",213],["T_OBJECT_OPERATOR","->",213],["T_STRING","getConnection",213],"(",")",["T_OBJECT_OPERATOR","->",213],["T_STRING","delete",213],"(",["T_WHITESPACE","\n                    ",213],["T_VARIABLE","$this",214],["T_OBJECT_OPERATOR","->",214],["T_STRING","attributeResource",214],["T_OBJECT_OPERATOR","->",214],["T_STRING","getTable",214],"(",["T_VARIABLE","$this",214],["T_OBJECT_OPERATOR","->",214],["T_STRING","datetimeTable",214],")",",",["T_WHITESPACE","\n                    ",214],"[",["T_WHITESPACE","\n                        ",215],["T_CONSTANT_ENCAPSED_STRING","'attribute_id IN (?)'",216],["T_WHITESPACE"," ",216],["T_DOUBLE_ARROW","=>",216],["T_WHITESPACE"," ",216],"[",["T_VARIABLE","$this",216],["T_OBJECT_OPERATOR","->",216],["T_STRING","getPriceFromAttributeId",216],"(",")",",",["T_WHITESPACE"," ",216],["T_VARIABLE","$this",216],["T_OBJECT_OPERATOR","->",216],["T_STRING","getPriceToAttributeId",216],"(",")","]",",",["T_WHITESPACE","\n                        ",216],["T_VARIABLE","$this",217],["T_OBJECT_OPERATOR","->",217],["T_STRING","getEntityLinkField",217],"(",")",["T_WHITESPACE"," ",217],".",["T_WHITESPACE"," ",217],["T_CONSTANT_ENCAPSED_STRING","' IN (?)'",217],["T_WHITESPACE"," ",217],["T_DOUBLE_ARROW","=>",217],["T_WHITESPACE"," ",217],["T_VARIABLE","$idsBunch",217],["T_WHITESPACE","\n                    ",217],"]",["T_WHITESPACE","\n                ",218],")",";",["T_WHITESPACE","\n            ",219],"}",["T_WHITESPACE","\n            ",220],["T_VARIABLE","$connection",221],["T_OBJECT_OPERATOR","->",221],["T_STRING","commit",221],"(",")",";",["T_WHITESPACE","\n        ",221],"}",["T_WHITESPACE"," ",222],["T_CATCH","catch",222],["T_WHITESPACE"," ",222],"(",["T_NS_SEPARATOR","\\",222],["T_STRING","Exception",222],["T_WHITESPACE"," ",222],["T_VARIABLE","$e",222],")",["T_WHITESPACE"," ",222],"{",["T_WHITESPACE","\n            ",222],["T_VARIABLE","$connection",223],["T_OBJECT_OPERATOR","->",223],["T_STRING","rollBack",223],"(",")",";",["T_WHITESPACE","\n            ",223],["T_THROW","throw",224],["T_WHITESPACE"," ",224],["T_NEW","new",224],["T_WHITESPACE"," ",224],["T_NS_SEPARATOR","\\",224],["T_STRING","Magento",224],["T_NS_SEPARATOR","\\",224],["T_STRING","Framework",224],["T_NS_SEPARATOR","\\",224],["T_STRING","Exception",224],["T_NS_SEPARATOR","\\",224],["T_STRING","CouldNotDeleteException",224],"(",["T_WHITESPACE","\n                ",224],["T_STRING","__",225],"(",["T_CONSTANT_ENCAPSED_STRING","'Could not delete Prices'",225],")",",",["T_WHITESPACE","\n                ",225],["T_VARIABLE","$e",226],["T_WHITESPACE","\n            ",226],")",";",["T_WHITESPACE","\n        ",227],"}",["T_WHITESPACE","\n\n        ",228],["T_RETURN","return",230],["T_WHITESPACE"," ",230],["T_STRING","true",230],";",["T_WHITESPACE","\n    ",230],"}",["T_WHITESPACE","\n\n    ",231],["T_DOC_COMMENT","\/**\n     * Get link field.\n     *\n     * @return string\n     *\/",233],["T_WHITESPACE","\n    ",237],["T_PUBLIC","public",238],["T_WHITESPACE"," ",238],["T_FUNCTION","function",238],["T_WHITESPACE"," ",238],["T_STRING","getEntityLinkField",238],"(",")",["T_WHITESPACE","\n    ",238],"{",["T_WHITESPACE","\n        ",239],["T_RETURN","return",240],["T_WHITESPACE"," ",240],["T_VARIABLE","$this",240],["T_OBJECT_OPERATOR","->",240],["T_STRING","metadataPool",240],["T_OBJECT_OPERATOR","->",240],["T_STRING","getMetadata",240],"(",["T_NS_SEPARATOR","\\",240],["T_STRING","Magento",240],["T_NS_SEPARATOR","\\",240],["T_STRING","Catalog",240],["T_NS_SEPARATOR","\\",240],["T_STRING","Api",240],["T_NS_SEPARATOR","\\",240],["T_STRING","Data",240],["T_NS_SEPARATOR","\\",240],["T_STRING","ProductInterface",240],["T_DOUBLE_COLON","::",240],["T_CLASS","class",240],")",["T_WHITESPACE","\n            ",240],["T_OBJECT_OPERATOR","->",241],["T_STRING","getLinkField",241],"(",")",";",["T_WHITESPACE","\n    ",241],"}",["T_WHITESPACE","\n\n    ",242],["T_DOC_COMMENT","\/**\n     * Update items in database.\n     *\n     * @param array $items\n     * @param string $table\n     * @return void\n     *\/",244],["T_WHITESPACE","\n    ",250],["T_PRIVATE","private",251],["T_WHITESPACE"," ",251],["T_FUNCTION","function",251],["T_WHITESPACE"," ",251],["T_STRING","updateItems",251],"(",["T_ARRAY","array",251],["T_WHITESPACE"," ",251],["T_VARIABLE","$items",251],",",["T_WHITESPACE"," ",251],["T_VARIABLE","$table",251],")",["T_WHITESPACE","\n    ",251],"{",["T_WHITESPACE","\n        ",252],["T_FOREACH","foreach",253],["T_WHITESPACE"," ",253],"(",["T_STRING","array_chunk",253],"(",["T_VARIABLE","$items",253],",",["T_WHITESPACE"," ",253],["T_VARIABLE","$this",253],["T_OBJECT_OPERATOR","->",253],["T_STRING","itemsPerOperation",253],")",["T_WHITESPACE"," ",253],["T_AS","as",253],["T_WHITESPACE"," ",253],["T_VARIABLE","$itemsBunch",253],")",["T_WHITESPACE"," ",253],"{",["T_WHITESPACE","\n            ",253],["T_VARIABLE","$this",254],["T_OBJECT_OPERATOR","->",254],["T_STRING","attributeResource",254],["T_OBJECT_OPERATOR","->",254],["T_STRING","getConnection",254],"(",")",["T_OBJECT_OPERATOR","->",254],["T_STRING","insertOnDuplicate",254],"(",["T_WHITESPACE","\n                ",254],["T_VARIABLE","$this",255],["T_OBJECT_OPERATOR","->",255],["T_STRING","attributeResource",255],["T_OBJECT_OPERATOR","->",255],["T_STRING","getTable",255],"(",["T_VARIABLE","$table",255],")",",",["T_WHITESPACE","\n                ",255],["T_VARIABLE","$itemsBunch",256],",",["T_WHITESPACE","\n                ",256],"[",["T_CONSTANT_ENCAPSED_STRING","'value'",257],"]",["T_WHITESPACE","\n            ",257],")",";",["T_WHITESPACE","\n        ",258],"}",["T_WHITESPACE","\n    ",259],"}",["T_WHITESPACE","\n\n    ",260],["T_DOC_COMMENT","\/**\n     * Get special price attribute ID.\n     *\n     * @return int\n     *\/",262],["T_WHITESPACE","\n    ",266],["T_PRIVATE","private",267],["T_WHITESPACE"," ",267],["T_FUNCTION","function",267],["T_WHITESPACE"," ",267],["T_STRING","getPriceAttributeId",267],"(",")",["T_WHITESPACE","\n    ",267],"{",["T_WHITESPACE","\n        ",268],["T_IF","if",269],["T_WHITESPACE"," ",269],"(","!",["T_VARIABLE","$this",269],["T_OBJECT_OPERATOR","->",269],["T_STRING","priceAttributeId",269],")",["T_WHITESPACE"," ",269],"{",["T_WHITESPACE","\n            ",269],["T_VARIABLE","$this",270],["T_OBJECT_OPERATOR","->",270],["T_STRING","priceAttributeId",270],["T_WHITESPACE"," ",270],"=",["T_WHITESPACE"," ",270],["T_VARIABLE","$this",270],["T_OBJECT_OPERATOR","->",270],["T_STRING","attributeRepository",270],["T_OBJECT_OPERATOR","->",270],["T_STRING","get",270],"(",["T_CONSTANT_ENCAPSED_STRING","'special_price'",270],")",["T_OBJECT_OPERATOR","->",270],["T_STRING","getAttributeId",270],"(",")",";",["T_WHITESPACE","\n        ",270],"}",["T_WHITESPACE","\n\n        ",271],["T_RETURN","return",273],["T_WHITESPACE"," ",273],["T_VARIABLE","$this",273],["T_OBJECT_OPERATOR","->",273],["T_STRING","priceAttributeId",273],";",["T_WHITESPACE","\n    ",273],"}",["T_WHITESPACE","\n\n    ",274],["T_DOC_COMMENT","\/**\n     * Get special price from attribute ID.\n     *\n     * @return int\n     *\/",276],["T_WHITESPACE","\n    ",280],["T_PRIVATE","private",281],["T_WHITESPACE"," ",281],["T_FUNCTION","function",281],["T_WHITESPACE"," ",281],["T_STRING","getPriceFromAttributeId",281],"(",")",["T_WHITESPACE","\n    ",281],"{",["T_WHITESPACE","\n        ",282],["T_IF","if",283],["T_WHITESPACE"," ",283],"(","!",["T_VARIABLE","$this",283],["T_OBJECT_OPERATOR","->",283],["T_STRING","priceFromAttributeId",283],")",["T_WHITESPACE"," ",283],"{",["T_WHITESPACE","\n            ",283],["T_VARIABLE","$this",284],["T_OBJECT_OPERATOR","->",284],["T_STRING","priceFromAttributeId",284],["T_WHITESPACE"," ",284],"=",["T_WHITESPACE"," ",284],["T_VARIABLE","$this",284],["T_OBJECT_OPERATOR","->",284],["T_STRING","attributeRepository",284],["T_OBJECT_OPERATOR","->",284],["T_STRING","get",284],"(",["T_CONSTANT_ENCAPSED_STRING","'special_from_date'",284],")",["T_OBJECT_OPERATOR","->",284],["T_STRING","getAttributeId",284],"(",")",";",["T_WHITESPACE","\n        ",284],"}",["T_WHITESPACE","\n\n        ",285],["T_RETURN","return",287],["T_WHITESPACE"," ",287],["T_VARIABLE","$this",287],["T_OBJECT_OPERATOR","->",287],["T_STRING","priceFromAttributeId",287],";",["T_WHITESPACE","\n    ",287],"}",["T_WHITESPACE","\n\n    ",288],["T_DOC_COMMENT","\/**\n     * Get special price to attribute ID.\n     *\n     * @return int\n     *\/",290],["T_WHITESPACE","\n    ",294],["T_PRIVATE","private",295],["T_WHITESPACE"," ",295],["T_FUNCTION","function",295],["T_WHITESPACE"," ",295],["T_STRING","getPriceToAttributeId",295],"(",")",["T_WHITESPACE","\n    ",295],"{",["T_WHITESPACE","\n        ",296],["T_IF","if",297],["T_WHITESPACE"," ",297],"(","!",["T_VARIABLE","$this",297],["T_OBJECT_OPERATOR","->",297],["T_STRING","priceToAttributeId",297],")",["T_WHITESPACE"," ",297],"{",["T_WHITESPACE","\n            ",297],["T_VARIABLE","$this",298],["T_OBJECT_OPERATOR","->",298],["T_STRING","priceToAttributeId",298],["T_WHITESPACE"," ",298],"=",["T_WHITESPACE"," ",298],["T_VARIABLE","$this",298],["T_OBJECT_OPERATOR","->",298],["T_STRING","attributeRepository",298],["T_OBJECT_OPERATOR","->",298],["T_STRING","get",298],"(",["T_CONSTANT_ENCAPSED_STRING","'special_to_date'",298],")",["T_OBJECT_OPERATOR","->",298],["T_STRING","getAttributeId",298],"(",")",";",["T_WHITESPACE","\n        ",298],"}",["T_WHITESPACE","\n\n        ",299],["T_RETURN","return",301],["T_WHITESPACE"," ",301],["T_VARIABLE","$this",301],["T_OBJECT_OPERATOR","->",301],["T_STRING","priceToAttributeId",301],";",["T_WHITESPACE","\n    ",301],"}",["T_WHITESPACE","\n\n    ",302],["T_DOC_COMMENT","\/**\n     * Retrieve IDs of products, that were affected during price update.\n     *\n     * @param array $skus\n     * @return array\n     *\/",304],["T_WHITESPACE","\n    ",309],["T_PRIVATE","private",310],["T_WHITESPACE"," ",310],["T_FUNCTION","function",310],["T_WHITESPACE"," ",310],["T_STRING","retrieveAffectedIds",310],"(",["T_ARRAY","array",310],["T_WHITESPACE"," ",310],["T_VARIABLE","$skus",310],")",["T_WHITESPACE","\n    ",310],"{",["T_WHITESPACE","\n        ",311],["T_VARIABLE","$affectedIds",312],["T_WHITESPACE"," ",312],"=",["T_WHITESPACE"," ",312],"[","]",";",["T_WHITESPACE","\n\n        ",312],["T_FOREACH","foreach",314],["T_WHITESPACE"," ",314],"(",["T_VARIABLE","$this",314],["T_OBJECT_OPERATOR","->",314],["T_STRING","productIdLocator",314],["T_OBJECT_OPERATOR","->",314],["T_STRING","retrieveProductIdsBySkus",314],"(",["T_VARIABLE","$skus",314],")",["T_WHITESPACE"," ",314],["T_AS","as",314],["T_WHITESPACE"," ",314],["T_VARIABLE","$productIds",314],")",["T_WHITESPACE"," ",314],"{",["T_WHITESPACE","\n            ",314],["T_VARIABLE","$affectedIds",315],["T_WHITESPACE"," ",315],"=",["T_WHITESPACE"," ",315],["T_STRING","array_merge",315],"(",["T_VARIABLE","$affectedIds",315],",",["T_WHITESPACE"," ",315],["T_STRING","array_keys",315],"(",["T_VARIABLE","$productIds",315],")",")",";",["T_WHITESPACE","\n        ",315],"}",["T_WHITESPACE","\n\n        ",316],["T_RETURN","return",318],["T_WHITESPACE"," ",318],["T_STRING","array_unique",318],"(",["T_VARIABLE","$affectedIds",318],")",";",["T_WHITESPACE","\n    ",318],"}",["T_WHITESPACE","\n",319],"}",["T_WHITESPACE","\n",320]]
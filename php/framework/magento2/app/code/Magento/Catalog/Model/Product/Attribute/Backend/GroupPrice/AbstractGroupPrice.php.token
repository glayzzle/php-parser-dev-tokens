[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Copyright \u00c2\u00a9 2013-2017 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n *\/",2],["T_WHITESPACE","\n\n",5],["T_COMMENT","\/\/ @codingStandardsIgnoreFile\n",7],["T_WHITESPACE","\n",8],["T_NAMESPACE","namespace",9],["T_WHITESPACE"," ",9],["T_STRING","Magento",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Catalog",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Model",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Product",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Attribute",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Backend",9],["T_NS_SEPARATOR","\\",9],["T_STRING","GroupPrice",9],";",["T_WHITESPACE","\n\n",9],["T_USE","use",11],["T_WHITESPACE"," ",11],["T_STRING","Magento",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Catalog",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Api",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Data",11],["T_NS_SEPARATOR","\\",11],["T_STRING","ProductInterface",11],";",["T_WHITESPACE","\n",11],["T_USE","use",12],["T_WHITESPACE"," ",12],["T_STRING","Magento",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Catalog",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Model",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Attribute",12],["T_NS_SEPARATOR","\\",12],["T_STRING","ScopeOverriddenValue",12],";",["T_WHITESPACE","\n",12],["T_USE","use",13],["T_WHITESPACE"," ",13],["T_STRING","Magento",13],["T_NS_SEPARATOR","\\",13],["T_STRING","Catalog",13],["T_NS_SEPARATOR","\\",13],["T_STRING","Model",13],["T_NS_SEPARATOR","\\",13],["T_STRING","Product",13],["T_NS_SEPARATOR","\\",13],["T_STRING","Attribute",13],["T_NS_SEPARATOR","\\",13],["T_STRING","Backend",13],["T_NS_SEPARATOR","\\",13],["T_STRING","Price",13],";",["T_WHITESPACE","\n",13],["T_USE","use",14],["T_WHITESPACE"," ",14],["T_STRING","Magento",14],["T_NS_SEPARATOR","\\",14],["T_STRING","Customer",14],["T_NS_SEPARATOR","\\",14],["T_STRING","Api",14],["T_NS_SEPARATOR","\\",14],["T_STRING","GroupManagementInterface",14],";",["T_WHITESPACE","\n\n",14],["T_DOC_COMMENT","\/**\n * Catalog product abstract group price backend attribute model\n *\n * @SuppressWarnings(PHPMD.CouplingBetweenObjects)\n *\/",16],["T_WHITESPACE","\n",20],["T_ABSTRACT","abstract",21],["T_WHITESPACE"," ",21],["T_CLASS","class",21],["T_WHITESPACE"," ",21],["T_STRING","AbstractGroupPrice",21],["T_WHITESPACE"," ",21],["T_EXTENDS","extends",21],["T_WHITESPACE"," ",21],["T_STRING","Price",21],["T_WHITESPACE","\n",21],"{",["T_WHITESPACE","\n    ",22],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Framework\\EntityManager\\MetadataPool\n     *\/",23],["T_WHITESPACE","\n    ",25],["T_PROTECTED","protected",26],["T_WHITESPACE"," ",26],["T_VARIABLE","$metadataPool",26],";",["T_WHITESPACE","\n\n    ",26],["T_DOC_COMMENT","\/**\n     * Website currency codes and rates\n     *\n     * @var array\n     *\/",28],["T_WHITESPACE","\n    ",32],["T_PROTECTED","protected",33],["T_WHITESPACE"," ",33],["T_VARIABLE","$_rates",33],";",["T_WHITESPACE","\n\n    ",33],["T_DOC_COMMENT","\/**\n     * Error message when duplicates\n     *\n     * @abstract\n     * @return string\n     *\/",35],["T_WHITESPACE","\n    ",40],["T_ABSTRACT","abstract",41],["T_WHITESPACE"," ",41],["T_PROTECTED","protected",41],["T_WHITESPACE"," ",41],["T_FUNCTION","function",41],["T_WHITESPACE"," ",41],["T_STRING","_getDuplicateErrorMessage",41],"(",")",";",["T_WHITESPACE","\n\n    ",41],["T_DOC_COMMENT","\/**\n     * Catalog product type\n     *\n     * @var \\Magento\\Catalog\\Model\\Product\\Type\n     *\/",43],["T_WHITESPACE","\n    ",47],["T_PROTECTED","protected",48],["T_WHITESPACE"," ",48],["T_VARIABLE","$_catalogProductType",48],";",["T_WHITESPACE","\n\n    ",48],["T_DOC_COMMENT","\/**\n     * @var GroupManagementInterface\n     *\/",50],["T_WHITESPACE","\n    ",52],["T_PROTECTED","protected",53],["T_WHITESPACE"," ",53],["T_VARIABLE","$_groupManagement",53],";",["T_WHITESPACE","\n\n    ",53],["T_DOC_COMMENT","\/**\n     * @param \\Magento\\Directory\\Model\\CurrencyFactory $currencyFactory\n     * @param \\Magento\\Store\\Model\\StoreManagerInterface $storeManager\n     * @param \\Magento\\Catalog\\Helper\\Data $catalogData\n     * @param \\Magento\\Framework\\App\\Config\\ScopeConfigInterface $config\n     * @param \\Magento\\Framework\\Locale\\FormatInterface $localeFormat\n     * @param \\Magento\\Catalog\\Model\\Product\\Type $catalogProductType\n     * @param GroupManagementInterface $groupManagement\n     * @param ScopeOverriddenValue|null $scopeOverriddenValue\n     *\/",55],["T_WHITESPACE","\n    ",64],["T_PUBLIC","public",65],["T_WHITESPACE"," ",65],["T_FUNCTION","function",65],["T_WHITESPACE"," ",65],["T_STRING","__construct",65],"(",["T_WHITESPACE","\n        ",65],["T_NS_SEPARATOR","\\",66],["T_STRING","Magento",66],["T_NS_SEPARATOR","\\",66],["T_STRING","Directory",66],["T_NS_SEPARATOR","\\",66],["T_STRING","Model",66],["T_NS_SEPARATOR","\\",66],["T_STRING","CurrencyFactory",66],["T_WHITESPACE"," ",66],["T_VARIABLE","$currencyFactory",66],",",["T_WHITESPACE","\n        ",66],["T_NS_SEPARATOR","\\",67],["T_STRING","Magento",67],["T_NS_SEPARATOR","\\",67],["T_STRING","Store",67],["T_NS_SEPARATOR","\\",67],["T_STRING","Model",67],["T_NS_SEPARATOR","\\",67],["T_STRING","StoreManagerInterface",67],["T_WHITESPACE"," ",67],["T_VARIABLE","$storeManager",67],",",["T_WHITESPACE","\n        ",67],["T_NS_SEPARATOR","\\",68],["T_STRING","Magento",68],["T_NS_SEPARATOR","\\",68],["T_STRING","Catalog",68],["T_NS_SEPARATOR","\\",68],["T_STRING","Helper",68],["T_NS_SEPARATOR","\\",68],["T_STRING","Data",68],["T_WHITESPACE"," ",68],["T_VARIABLE","$catalogData",68],",",["T_WHITESPACE","\n        ",68],["T_NS_SEPARATOR","\\",69],["T_STRING","Magento",69],["T_NS_SEPARATOR","\\",69],["T_STRING","Framework",69],["T_NS_SEPARATOR","\\",69],["T_STRING","App",69],["T_NS_SEPARATOR","\\",69],["T_STRING","Config",69],["T_NS_SEPARATOR","\\",69],["T_STRING","ScopeConfigInterface",69],["T_WHITESPACE"," ",69],["T_VARIABLE","$config",69],",",["T_WHITESPACE","\n        ",69],["T_NS_SEPARATOR","\\",70],["T_STRING","Magento",70],["T_NS_SEPARATOR","\\",70],["T_STRING","Framework",70],["T_NS_SEPARATOR","\\",70],["T_STRING","Locale",70],["T_NS_SEPARATOR","\\",70],["T_STRING","FormatInterface",70],["T_WHITESPACE"," ",70],["T_VARIABLE","$localeFormat",70],",",["T_WHITESPACE","\n        ",70],["T_NS_SEPARATOR","\\",71],["T_STRING","Magento",71],["T_NS_SEPARATOR","\\",71],["T_STRING","Catalog",71],["T_NS_SEPARATOR","\\",71],["T_STRING","Model",71],["T_NS_SEPARATOR","\\",71],["T_STRING","Product",71],["T_NS_SEPARATOR","\\",71],["T_STRING","Type",71],["T_WHITESPACE"," ",71],["T_VARIABLE","$catalogProductType",71],",",["T_WHITESPACE","\n        ",71],["T_STRING","GroupManagementInterface",72],["T_WHITESPACE"," ",72],["T_VARIABLE","$groupManagement",72],",",["T_WHITESPACE","\n        ",72],["T_STRING","ScopeOverriddenValue",73],["T_WHITESPACE"," ",73],["T_VARIABLE","$scopeOverriddenValue",73],["T_WHITESPACE"," ",73],"=",["T_WHITESPACE"," ",73],["T_STRING","null",73],["T_WHITESPACE","\n    ",73],")",["T_WHITESPACE"," ",74],"{",["T_WHITESPACE","\n        ",74],["T_VARIABLE","$this",75],["T_OBJECT_OPERATOR","->",75],["T_STRING","_catalogProductType",75],["T_WHITESPACE"," ",75],"=",["T_WHITESPACE"," ",75],["T_VARIABLE","$catalogProductType",75],";",["T_WHITESPACE","\n        ",75],["T_VARIABLE","$this",76],["T_OBJECT_OPERATOR","->",76],["T_STRING","_groupManagement",76],["T_WHITESPACE"," ",76],"=",["T_WHITESPACE"," ",76],["T_VARIABLE","$groupManagement",76],";",["T_WHITESPACE","\n        ",76],["T_STRING","parent",77],["T_DOUBLE_COLON","::",77],["T_STRING","__construct",77],"(",["T_WHITESPACE","\n            ",77],["T_VARIABLE","$currencyFactory",78],",",["T_WHITESPACE","\n            ",78],["T_VARIABLE","$storeManager",79],",",["T_WHITESPACE","\n            ",79],["T_VARIABLE","$catalogData",80],",",["T_WHITESPACE","\n            ",80],["T_VARIABLE","$config",81],",",["T_WHITESPACE","\n            ",81],["T_VARIABLE","$localeFormat",82],",",["T_WHITESPACE","\n            ",82],["T_VARIABLE","$scopeOverriddenValue",83],["T_WHITESPACE","\n        ",83],")",";",["T_WHITESPACE","\n    ",84],"}",["T_WHITESPACE","\n\n    ",85],["T_DOC_COMMENT","\/**\n     * Retrieve websites currency rates and base currency codes\n     *\n     * @return array\n     *\/",87],["T_WHITESPACE","\n    ",91],["T_PROTECTED","protected",92],["T_WHITESPACE"," ",92],["T_FUNCTION","function",92],["T_WHITESPACE"," ",92],["T_STRING","_getWebsiteCurrencyRates",92],"(",")",["T_WHITESPACE","\n    ",92],"{",["T_WHITESPACE","\n        ",93],["T_IF","if",94],["T_WHITESPACE"," ",94],"(",["T_STRING","is_null",94],"(",["T_VARIABLE","$this",94],["T_OBJECT_OPERATOR","->",94],["T_STRING","_rates",94],")",")",["T_WHITESPACE"," ",94],"{",["T_WHITESPACE","\n            ",94],["T_VARIABLE","$this",95],["T_OBJECT_OPERATOR","->",95],["T_STRING","_rates",95],["T_WHITESPACE"," ",95],"=",["T_WHITESPACE"," ",95],"[","]",";",["T_WHITESPACE","\n            ",95],["T_VARIABLE","$baseCurrency",96],["T_WHITESPACE"," ",96],"=",["T_WHITESPACE"," ",96],["T_VARIABLE","$this",96],["T_OBJECT_OPERATOR","->",96],["T_STRING","_config",96],["T_OBJECT_OPERATOR","->",96],["T_STRING","getValue",96],"(",["T_WHITESPACE","\n                ",96],["T_NS_SEPARATOR","\\",97],["T_STRING","Magento",97],["T_NS_SEPARATOR","\\",97],["T_STRING","Directory",97],["T_NS_SEPARATOR","\\",97],["T_STRING","Model",97],["T_NS_SEPARATOR","\\",97],["T_STRING","Currency",97],["T_DOUBLE_COLON","::",97],["T_STRING","XML_PATH_CURRENCY_BASE",97],",",["T_WHITESPACE","\n                ",97],["T_CONSTANT_ENCAPSED_STRING","'default'",98],["T_WHITESPACE","\n            ",98],")",";",["T_WHITESPACE","\n            ",99],["T_FOREACH","foreach",100],["T_WHITESPACE"," ",100],"(",["T_VARIABLE","$this",100],["T_OBJECT_OPERATOR","->",100],["T_STRING","_storeManager",100],["T_OBJECT_OPERATOR","->",100],["T_STRING","getWebsites",100],"(",")",["T_WHITESPACE"," ",100],["T_AS","as",100],["T_WHITESPACE"," ",100],["T_VARIABLE","$website",100],")",["T_WHITESPACE"," ",100],"{",["T_WHITESPACE","\n                ",100],["T_COMMENT","\/* @var $website \\Magento\\Store\\Model\\Website *\/",101],["T_WHITESPACE","\n                ",101],["T_IF","if",102],["T_WHITESPACE"," ",102],"(",["T_VARIABLE","$website",102],["T_OBJECT_OPERATOR","->",102],["T_STRING","getBaseCurrencyCode",102],"(",")",["T_WHITESPACE"," ",102],["T_IS_NOT_EQUAL","!=",102],["T_WHITESPACE"," ",102],["T_VARIABLE","$baseCurrency",102],")",["T_WHITESPACE"," ",102],"{",["T_WHITESPACE","\n                    ",102],["T_VARIABLE","$rate",103],["T_WHITESPACE"," ",103],"=",["T_WHITESPACE"," ",103],["T_VARIABLE","$this",103],["T_OBJECT_OPERATOR","->",103],["T_STRING","_currencyFactory",103],["T_OBJECT_OPERATOR","->",103],["T_STRING","create",103],"(",")",["T_OBJECT_OPERATOR","->",103],["T_STRING","load",103],"(",["T_WHITESPACE","\n                        ",103],["T_VARIABLE","$baseCurrency",104],["T_WHITESPACE","\n                    ",104],")",["T_OBJECT_OPERATOR","->",105],["T_STRING","getRate",105],"(",["T_WHITESPACE","\n                        ",105],["T_VARIABLE","$website",106],["T_OBJECT_OPERATOR","->",106],["T_STRING","getBaseCurrencyCode",106],"(",")",["T_WHITESPACE","\n                    ",106],")",";",["T_WHITESPACE","\n                    ",107],["T_IF","if",108],["T_WHITESPACE"," ",108],"(","!",["T_VARIABLE","$rate",108],")",["T_WHITESPACE"," ",108],"{",["T_WHITESPACE","\n                        ",108],["T_VARIABLE","$rate",109],["T_WHITESPACE"," ",109],"=",["T_WHITESPACE"," ",109],["T_LNUMBER","1",109],";",["T_WHITESPACE","\n                    ",109],"}",["T_WHITESPACE","\n                    ",110],["T_VARIABLE","$this",111],["T_OBJECT_OPERATOR","->",111],["T_STRING","_rates",111],"[",["T_VARIABLE","$website",111],["T_OBJECT_OPERATOR","->",111],["T_STRING","getId",111],"(",")","]",["T_WHITESPACE"," ",111],"=",["T_WHITESPACE"," ",111],"[",["T_WHITESPACE","\n                        ",111],["T_CONSTANT_ENCAPSED_STRING","'code'",112],["T_WHITESPACE"," ",112],["T_DOUBLE_ARROW","=>",112],["T_WHITESPACE"," ",112],["T_VARIABLE","$website",112],["T_OBJECT_OPERATOR","->",112],["T_STRING","getBaseCurrencyCode",112],"(",")",",",["T_WHITESPACE","\n                        ",112],["T_CONSTANT_ENCAPSED_STRING","'rate'",113],["T_WHITESPACE"," ",113],["T_DOUBLE_ARROW","=>",113],["T_WHITESPACE"," ",113],["T_VARIABLE","$rate",113],",",["T_WHITESPACE","\n                    ",113],"]",";",["T_WHITESPACE","\n                ",114],"}",["T_WHITESPACE"," ",115],["T_ELSE","else",115],["T_WHITESPACE"," ",115],"{",["T_WHITESPACE","\n                    ",115],["T_VARIABLE","$this",116],["T_OBJECT_OPERATOR","->",116],["T_STRING","_rates",116],"[",["T_VARIABLE","$website",116],["T_OBJECT_OPERATOR","->",116],["T_STRING","getId",116],"(",")","]",["T_WHITESPACE"," ",116],"=",["T_WHITESPACE"," ",116],"[",["T_CONSTANT_ENCAPSED_STRING","'code'",116],["T_WHITESPACE"," ",116],["T_DOUBLE_ARROW","=>",116],["T_WHITESPACE"," ",116],["T_VARIABLE","$baseCurrency",116],",",["T_WHITESPACE"," ",116],["T_CONSTANT_ENCAPSED_STRING","'rate'",116],["T_WHITESPACE"," ",116],["T_DOUBLE_ARROW","=>",116],["T_WHITESPACE"," ",116],["T_LNUMBER","1",116],"]",";",["T_WHITESPACE","\n                ",116],"}",["T_WHITESPACE","\n            ",117],"}",["T_WHITESPACE","\n        ",118],"}",["T_WHITESPACE","\n        ",119],["T_RETURN","return",120],["T_WHITESPACE"," ",120],["T_VARIABLE","$this",120],["T_OBJECT_OPERATOR","->",120],["T_STRING","_rates",120],";",["T_WHITESPACE","\n    ",120],"}",["T_WHITESPACE","\n\n    ",121],["T_DOC_COMMENT","\/**\n     * Retrieve resource instance\n     *\n     * @return \\Magento\\Catalog\\Model\\ResourceModel\\Product\\Attribute\\Backend\\Tierprice\n     *\/",123],["T_WHITESPACE","\n    ",127],["T_ABSTRACT","abstract",128],["T_WHITESPACE"," ",128],["T_PROTECTED","protected",128],["T_WHITESPACE"," ",128],["T_FUNCTION","function",128],["T_WHITESPACE"," ",128],["T_STRING","_getResource",128],"(",")",";",["T_WHITESPACE","\n\n    ",128],["T_DOC_COMMENT","\/**\n     * Get additional unique fields\n     *\n     * @param array $objectArray\n     * @return array\n     * @SuppressWarnings(PHPMD.UnusedFormalParameter)\n     *\/",130],["T_WHITESPACE","\n    ",136],["T_PROTECTED","protected",137],["T_WHITESPACE"," ",137],["T_FUNCTION","function",137],["T_WHITESPACE"," ",137],["T_STRING","_getAdditionalUniqueFields",137],"(",["T_VARIABLE","$objectArray",137],")",["T_WHITESPACE","\n    ",137],"{",["T_WHITESPACE","\n        ",138],["T_RETURN","return",139],["T_WHITESPACE"," ",139],"[","]",";",["T_WHITESPACE","\n    ",139],"}",["T_WHITESPACE","\n\n    ",140],["T_DOC_COMMENT","\/**\n     * Get additional fields\n     *\n     * @param array $objectArray\n     * @return array\n     * @SuppressWarnings(PHPMD.UnusedFormalParameter)\n     *\/",142],["T_WHITESPACE","\n    ",148],["T_PROTECTED","protected",149],["T_WHITESPACE"," ",149],["T_FUNCTION","function",149],["T_WHITESPACE"," ",149],["T_STRING","getAdditionalFields",149],"(",["T_VARIABLE","$objectArray",149],")",["T_WHITESPACE","\n    ",149],"{",["T_WHITESPACE","\n        ",150],["T_RETURN","return",151],["T_WHITESPACE"," ",151],"[","]",";",["T_WHITESPACE","\n    ",151],"}",["T_WHITESPACE","\n\n    ",152],["T_DOC_COMMENT","\/**\n     * Whether group price value fixed or percent of original price\n     *\n     * @param \\Magento\\Catalog\\Model\\Product\\Type\\Price $priceObject\n     * @return bool\n     *\/",154],["T_WHITESPACE","\n    ",159],["T_PROTECTED","protected",160],["T_WHITESPACE"," ",160],["T_FUNCTION","function",160],["T_WHITESPACE"," ",160],["T_STRING","_isPriceFixed",160],"(",["T_VARIABLE","$priceObject",160],")",["T_WHITESPACE","\n    ",160],"{",["T_WHITESPACE","\n        ",161],["T_RETURN","return",162],["T_WHITESPACE"," ",162],["T_VARIABLE","$priceObject",162],["T_OBJECT_OPERATOR","->",162],["T_STRING","isGroupPriceFixed",162],"(",")",";",["T_WHITESPACE","\n    ",162],"}",["T_WHITESPACE","\n\n    ",163],["T_DOC_COMMENT","\/**\n     * Validate group price data\n     *\n     * @param \\Magento\\Catalog\\Model\\Product $object\n     * @throws \\Magento\\Framework\\Exception\\LocalizedException\n     * @return \\Magento\\Framework\\Phrase|bool\n     * @SuppressWarnings(PHPMD.CyclomaticComplexity)\n     * @SuppressWarnings(PHPMD.NPathComplexity)\n     *\/",165],["T_WHITESPACE","\n    ",173],["T_PUBLIC","public",174],["T_WHITESPACE"," ",174],["T_FUNCTION","function",174],["T_WHITESPACE"," ",174],["T_STRING","validate",174],"(",["T_VARIABLE","$object",174],")",["T_WHITESPACE","\n    ",174],"{",["T_WHITESPACE","\n        ",175],["T_VARIABLE","$attribute",176],["T_WHITESPACE"," ",176],"=",["T_WHITESPACE"," ",176],["T_VARIABLE","$this",176],["T_OBJECT_OPERATOR","->",176],["T_STRING","getAttribute",176],"(",")",";",["T_WHITESPACE","\n        ",176],["T_VARIABLE","$priceRows",177],["T_WHITESPACE"," ",177],"=",["T_WHITESPACE"," ",177],["T_VARIABLE","$object",177],["T_OBJECT_OPERATOR","->",177],["T_STRING","getData",177],"(",["T_VARIABLE","$attribute",177],["T_OBJECT_OPERATOR","->",177],["T_STRING","getName",177],"(",")",")",";",["T_WHITESPACE","\n        ",177],["T_VARIABLE","$priceRows",178],["T_WHITESPACE"," ",178],"=",["T_WHITESPACE"," ",178],["T_STRING","array_filter",178],"(",["T_ARRAY_CAST","(array)",178],["T_VARIABLE","$priceRows",178],")",";",["T_WHITESPACE","\n\n        ",178],["T_IF","if",180],["T_WHITESPACE"," ",180],"(",["T_EMPTY","empty",180],"(",["T_VARIABLE","$priceRows",180],")",")",["T_WHITESPACE"," ",180],"{",["T_WHITESPACE","\n            ",180],["T_RETURN","return",181],["T_WHITESPACE"," ",181],["T_STRING","true",181],";",["T_WHITESPACE","\n        ",181],"}",["T_WHITESPACE","\n\n        ",182],["T_COMMENT","\/\/ validate per website\n",184],["T_WHITESPACE","        ",185],["T_VARIABLE","$duplicates",185],["T_WHITESPACE"," ",185],"=",["T_WHITESPACE"," ",185],"[","]",";",["T_WHITESPACE","\n        ",185],["T_FOREACH","foreach",186],["T_WHITESPACE"," ",186],"(",["T_VARIABLE","$priceRows",186],["T_WHITESPACE"," ",186],["T_AS","as",186],["T_WHITESPACE"," ",186],["T_VARIABLE","$priceRow",186],")",["T_WHITESPACE"," ",186],"{",["T_WHITESPACE","\n            ",186],["T_IF","if",187],["T_WHITESPACE"," ",187],"(","!",["T_EMPTY","empty",187],"(",["T_VARIABLE","$priceRow",187],"[",["T_CONSTANT_ENCAPSED_STRING","'delete'",187],"]",")",")",["T_WHITESPACE"," ",187],"{",["T_WHITESPACE","\n                ",187],["T_CONTINUE","continue",188],";",["T_WHITESPACE","\n            ",188],"}",["T_WHITESPACE","\n            ",189],["T_VARIABLE","$compare",190],["T_WHITESPACE"," ",190],"=",["T_WHITESPACE"," ",190],["T_STRING","implode",190],"(",["T_WHITESPACE","\n                ",190],["T_CONSTANT_ENCAPSED_STRING","'-'",191],",",["T_WHITESPACE","\n                ",191],["T_STRING","array_merge",192],"(",["T_WHITESPACE","\n                    ",192],"[",["T_VARIABLE","$priceRow",193],"[",["T_CONSTANT_ENCAPSED_STRING","'website_id'",193],"]",",",["T_WHITESPACE"," ",193],["T_VARIABLE","$priceRow",193],"[",["T_CONSTANT_ENCAPSED_STRING","'cust_group'",193],"]","]",",",["T_WHITESPACE","\n                    ",193],["T_VARIABLE","$this",194],["T_OBJECT_OPERATOR","->",194],["T_STRING","_getAdditionalUniqueFields",194],"(",["T_VARIABLE","$priceRow",194],")",["T_WHITESPACE","\n                ",194],")",["T_WHITESPACE","\n            ",195],")",";",["T_WHITESPACE","\n            ",196],["T_IF","if",197],["T_WHITESPACE"," ",197],"(",["T_ISSET","isset",197],"(",["T_VARIABLE","$duplicates",197],"[",["T_VARIABLE","$compare",197],"]",")",")",["T_WHITESPACE"," ",197],"{",["T_WHITESPACE","\n                ",197],["T_THROW","throw",198],["T_WHITESPACE"," ",198],["T_NEW","new",198],["T_WHITESPACE"," ",198],["T_NS_SEPARATOR","\\",198],["T_STRING","Magento",198],["T_NS_SEPARATOR","\\",198],["T_STRING","Framework",198],["T_NS_SEPARATOR","\\",198],["T_STRING","Exception",198],["T_NS_SEPARATOR","\\",198],["T_STRING","LocalizedException",198],"(",["T_STRING","__",198],"(",["T_VARIABLE","$this",198],["T_OBJECT_OPERATOR","->",198],["T_STRING","_getDuplicateErrorMessage",198],"(",")",")",")",";",["T_WHITESPACE","\n            ",198],"}",["T_WHITESPACE","\n\n            ",199],["T_VARIABLE","$this",201],["T_OBJECT_OPERATOR","->",201],["T_STRING","validatePrice",201],"(",["T_VARIABLE","$priceRow",201],")",";",["T_WHITESPACE","\n\n            ",201],["T_VARIABLE","$duplicates",203],"[",["T_VARIABLE","$compare",203],"]",["T_WHITESPACE"," ",203],"=",["T_WHITESPACE"," ",203],["T_STRING","true",203],";",["T_WHITESPACE","\n        ",203],"}",["T_WHITESPACE","\n\n        ",204],["T_COMMENT","\/\/ if attribute scope is website and edit in store view scope\n",206],["T_WHITESPACE","        ",207],["T_COMMENT","\/\/ add global group prices for duplicates find\n",207],["T_WHITESPACE","        ",208],["T_IF","if",208],["T_WHITESPACE"," ",208],"(","!",["T_VARIABLE","$attribute",208],["T_OBJECT_OPERATOR","->",208],["T_STRING","isScopeGlobal",208],"(",")",["T_WHITESPACE"," ",208],["T_BOOLEAN_AND","&&",208],["T_WHITESPACE"," ",208],["T_VARIABLE","$object",208],["T_OBJECT_OPERATOR","->",208],["T_STRING","getStoreId",208],"(",")",")",["T_WHITESPACE"," ",208],"{",["T_WHITESPACE","\n            ",208],["T_VARIABLE","$origPrices",209],["T_WHITESPACE"," ",209],"=",["T_WHITESPACE"," ",209],["T_VARIABLE","$object",209],["T_OBJECT_OPERATOR","->",209],["T_STRING","getOrigData",209],"(",["T_VARIABLE","$attribute",209],["T_OBJECT_OPERATOR","->",209],["T_STRING","getName",209],"(",")",")",";",["T_WHITESPACE","\n            ",209],["T_IF","if",210],["T_WHITESPACE"," ",210],"(",["T_VARIABLE","$origPrices",210],")",["T_WHITESPACE"," ",210],"{",["T_WHITESPACE","\n                ",210],["T_FOREACH","foreach",211],["T_WHITESPACE"," ",211],"(",["T_VARIABLE","$origPrices",211],["T_WHITESPACE"," ",211],["T_AS","as",211],["T_WHITESPACE"," ",211],["T_VARIABLE","$price",211],")",["T_WHITESPACE"," ",211],"{",["T_WHITESPACE","\n                    ",211],["T_IF","if",212],["T_WHITESPACE"," ",212],"(",["T_VARIABLE","$price",212],"[",["T_CONSTANT_ENCAPSED_STRING","'website_id'",212],"]",["T_WHITESPACE"," ",212],["T_IS_EQUAL","==",212],["T_WHITESPACE"," ",212],["T_LNUMBER","0",212],")",["T_WHITESPACE"," ",212],"{",["T_WHITESPACE","\n                        ",212],["T_VARIABLE","$compare",213],["T_WHITESPACE"," ",213],"=",["T_WHITESPACE"," ",213],["T_STRING","implode",213],"(",["T_WHITESPACE","\n                            ",213],["T_CONSTANT_ENCAPSED_STRING","'-'",214],",",["T_WHITESPACE","\n                            ",214],["T_STRING","array_merge",215],"(",["T_WHITESPACE","\n                                ",215],"[",["T_VARIABLE","$price",216],"[",["T_CONSTANT_ENCAPSED_STRING","'website_id'",216],"]",",",["T_WHITESPACE"," ",216],["T_VARIABLE","$price",216],"[",["T_CONSTANT_ENCAPSED_STRING","'cust_group'",216],"]","]",",",["T_WHITESPACE","\n                                ",216],["T_VARIABLE","$this",217],["T_OBJECT_OPERATOR","->",217],["T_STRING","_getAdditionalUniqueFields",217],"(",["T_VARIABLE","$price",217],")",["T_WHITESPACE","\n                            ",217],")",["T_WHITESPACE","\n                        ",218],")",";",["T_WHITESPACE","\n                        ",219],["T_VARIABLE","$duplicates",220],"[",["T_VARIABLE","$compare",220],"]",["T_WHITESPACE"," ",220],"=",["T_WHITESPACE"," ",220],["T_STRING","true",220],";",["T_WHITESPACE","\n                    ",220],"}",["T_WHITESPACE","\n                ",221],"}",["T_WHITESPACE","\n            ",222],"}",["T_WHITESPACE","\n        ",223],"}",["T_WHITESPACE","\n\n        ",224],["T_COMMENT","\/\/ validate currency\n",226],["T_WHITESPACE","        ",227],["T_VARIABLE","$baseCurrency",227],["T_WHITESPACE"," ",227],"=",["T_WHITESPACE"," ",227],["T_VARIABLE","$this",227],["T_OBJECT_OPERATOR","->",227],["T_STRING","_config",227],["T_OBJECT_OPERATOR","->",227],["T_STRING","getValue",227],"(",["T_NS_SEPARATOR","\\",227],["T_STRING","Magento",227],["T_NS_SEPARATOR","\\",227],["T_STRING","Directory",227],["T_NS_SEPARATOR","\\",227],["T_STRING","Model",227],["T_NS_SEPARATOR","\\",227],["T_STRING","Currency",227],["T_DOUBLE_COLON","::",227],["T_STRING","XML_PATH_CURRENCY_BASE",227],",",["T_WHITESPACE"," ",227],["T_CONSTANT_ENCAPSED_STRING","'default'",227],")",";",["T_WHITESPACE","\n        ",227],["T_VARIABLE","$rates",228],["T_WHITESPACE"," ",228],"=",["T_WHITESPACE"," ",228],["T_VARIABLE","$this",228],["T_OBJECT_OPERATOR","->",228],["T_STRING","_getWebsiteCurrencyRates",228],"(",")",";",["T_WHITESPACE","\n        ",228],["T_FOREACH","foreach",229],["T_WHITESPACE"," ",229],"(",["T_VARIABLE","$priceRows",229],["T_WHITESPACE"," ",229],["T_AS","as",229],["T_WHITESPACE"," ",229],["T_VARIABLE","$priceRow",229],")",["T_WHITESPACE"," ",229],"{",["T_WHITESPACE","\n            ",229],["T_IF","if",230],["T_WHITESPACE"," ",230],"(","!",["T_EMPTY","empty",230],"(",["T_VARIABLE","$priceRow",230],"[",["T_CONSTANT_ENCAPSED_STRING","'delete'",230],"]",")",")",["T_WHITESPACE"," ",230],"{",["T_WHITESPACE","\n                ",230],["T_CONTINUE","continue",231],";",["T_WHITESPACE","\n            ",231],"}",["T_WHITESPACE","\n            ",232],["T_IF","if",233],["T_WHITESPACE"," ",233],"(",["T_VARIABLE","$priceRow",233],"[",["T_CONSTANT_ENCAPSED_STRING","'website_id'",233],"]",["T_WHITESPACE"," ",233],["T_IS_EQUAL","==",233],["T_WHITESPACE"," ",233],["T_LNUMBER","0",233],")",["T_WHITESPACE"," ",233],"{",["T_WHITESPACE","\n                ",233],["T_CONTINUE","continue",234],";",["T_WHITESPACE","\n            ",234],"}",["T_WHITESPACE","\n\n            ",235],["T_VARIABLE","$globalCompare",237],["T_WHITESPACE"," ",237],"=",["T_WHITESPACE"," ",237],["T_STRING","implode",237],"(",["T_WHITESPACE","\n                ",237],["T_CONSTANT_ENCAPSED_STRING","'-'",238],",",["T_WHITESPACE","\n                ",238],["T_STRING","array_merge",239],"(","[",["T_LNUMBER","0",239],",",["T_WHITESPACE"," ",239],["T_VARIABLE","$priceRow",239],"[",["T_CONSTANT_ENCAPSED_STRING","'cust_group'",239],"]","]",",",["T_WHITESPACE"," ",239],["T_VARIABLE","$this",239],["T_OBJECT_OPERATOR","->",239],["T_STRING","_getAdditionalUniqueFields",239],"(",["T_VARIABLE","$priceRow",239],")",")",["T_WHITESPACE","\n            ",239],")",";",["T_WHITESPACE","\n            ",240],["T_VARIABLE","$websiteCurrency",241],["T_WHITESPACE"," ",241],"=",["T_WHITESPACE"," ",241],["T_VARIABLE","$rates",241],"[",["T_VARIABLE","$priceRow",241],"[",["T_CONSTANT_ENCAPSED_STRING","'website_id'",241],"]","]","[",["T_CONSTANT_ENCAPSED_STRING","'code'",241],"]",";",["T_WHITESPACE","\n\n            ",241],["T_IF","if",243],["T_WHITESPACE"," ",243],"(",["T_VARIABLE","$baseCurrency",243],["T_WHITESPACE"," ",243],["T_IS_EQUAL","==",243],["T_WHITESPACE"," ",243],["T_VARIABLE","$websiteCurrency",243],["T_WHITESPACE"," ",243],["T_BOOLEAN_AND","&&",243],["T_WHITESPACE"," ",243],["T_ISSET","isset",243],"(",["T_VARIABLE","$duplicates",243],"[",["T_VARIABLE","$globalCompare",243],"]",")",")",["T_WHITESPACE"," ",243],"{",["T_WHITESPACE","\n                ",243],["T_THROW","throw",244],["T_WHITESPACE"," ",244],["T_NEW","new",244],["T_WHITESPACE"," ",244],["T_NS_SEPARATOR","\\",244],["T_STRING","Magento",244],["T_NS_SEPARATOR","\\",244],["T_STRING","Framework",244],["T_NS_SEPARATOR","\\",244],["T_STRING","Exception",244],["T_NS_SEPARATOR","\\",244],["T_STRING","LocalizedException",244],"(",["T_STRING","__",244],"(",["T_VARIABLE","$this",244],["T_OBJECT_OPERATOR","->",244],["T_STRING","_getDuplicateErrorMessage",244],"(",")",")",")",";",["T_WHITESPACE","\n            ",244],"}",["T_WHITESPACE","\n        ",245],"}",["T_WHITESPACE","\n\n        ",246],["T_RETURN","return",248],["T_WHITESPACE"," ",248],["T_STRING","true",248],";",["T_WHITESPACE","\n    ",248],"}",["T_WHITESPACE","\n\n    ",249],["T_DOC_COMMENT","\/**\n     * @param array $priceRow\n     * @return void\n     * @throws \\Magento\\Framework\\Exception\\LocalizedException\n     *\/",251],["T_WHITESPACE","\n    ",255],["T_PROTECTED","protected",256],["T_WHITESPACE"," ",256],["T_FUNCTION","function",256],["T_WHITESPACE"," ",256],["T_STRING","validatePrice",256],"(",["T_ARRAY","array",256],["T_WHITESPACE"," ",256],["T_VARIABLE","$priceRow",256],")",["T_WHITESPACE","\n    ",256],"{",["T_WHITESPACE","\n        ",257],["T_IF","if",258],["T_WHITESPACE"," ",258],"(","!",["T_ISSET","isset",258],"(",["T_VARIABLE","$priceRow",258],"[",["T_CONSTANT_ENCAPSED_STRING","'price'",258],"]",")",["T_WHITESPACE"," ",258],["T_BOOLEAN_OR","||",258],["T_WHITESPACE"," ",258],"!",["T_VARIABLE","$this",258],["T_OBJECT_OPERATOR","->",258],["T_STRING","isPositiveOrZero",258],"(",["T_VARIABLE","$priceRow",258],"[",["T_CONSTANT_ENCAPSED_STRING","'price'",258],"]",")",")",["T_WHITESPACE"," ",258],"{",["T_WHITESPACE","\n            ",258],["T_THROW","throw",259],["T_WHITESPACE"," ",259],["T_NEW","new",259],["T_WHITESPACE"," ",259],["T_NS_SEPARATOR","\\",259],["T_STRING","Magento",259],["T_NS_SEPARATOR","\\",259],["T_STRING","Framework",259],["T_NS_SEPARATOR","\\",259],["T_STRING","Exception",259],["T_NS_SEPARATOR","\\",259],["T_STRING","LocalizedException",259],"(",["T_WHITESPACE","\n                ",259],["T_STRING","__",260],"(",["T_CONSTANT_ENCAPSED_STRING","'Group price must be a number greater than 0.'",260],")",["T_WHITESPACE","\n            ",260],")",";",["T_WHITESPACE","\n        ",261],"}",["T_WHITESPACE","\n    ",262],"}",["T_WHITESPACE","\n\n    ",263],["T_DOC_COMMENT","\/**\n     * Prepare group prices data for website\n     *\n     * @param array $priceData\n     * @param string $productTypeId\n     * @param int $websiteId\n     * @return array\n     *\/",265],["T_WHITESPACE","\n    ",272],["T_PUBLIC","public",273],["T_WHITESPACE"," ",273],["T_FUNCTION","function",273],["T_WHITESPACE"," ",273],["T_STRING","preparePriceData",273],"(",["T_ARRAY","array",273],["T_WHITESPACE"," ",273],["T_VARIABLE","$priceData",273],",",["T_WHITESPACE"," ",273],["T_VARIABLE","$productTypeId",273],",",["T_WHITESPACE"," ",273],["T_VARIABLE","$websiteId",273],")",["T_WHITESPACE","\n    ",273],"{",["T_WHITESPACE","\n        ",274],["T_VARIABLE","$rates",275],["T_WHITESPACE"," ",275],"=",["T_WHITESPACE"," ",275],["T_VARIABLE","$this",275],["T_OBJECT_OPERATOR","->",275],["T_STRING","_getWebsiteCurrencyRates",275],"(",")",";",["T_WHITESPACE","\n        ",275],["T_VARIABLE","$data",276],["T_WHITESPACE"," ",276],"=",["T_WHITESPACE"," ",276],"[","]",";",["T_WHITESPACE","\n        ",276],["T_VARIABLE","$price",277],["T_WHITESPACE"," ",277],"=",["T_WHITESPACE"," ",277],["T_VARIABLE","$this",277],["T_OBJECT_OPERATOR","->",277],["T_STRING","_catalogProductType",277],["T_OBJECT_OPERATOR","->",277],["T_STRING","priceFactory",277],"(",["T_VARIABLE","$productTypeId",277],")",";",["T_WHITESPACE","\n        ",277],["T_FOREACH","foreach",278],["T_WHITESPACE"," ",278],"(",["T_VARIABLE","$priceData",278],["T_WHITESPACE"," ",278],["T_AS","as",278],["T_WHITESPACE"," ",278],["T_VARIABLE","$v",278],")",["T_WHITESPACE"," ",278],"{",["T_WHITESPACE","\n            ",278],["T_IF","if",279],["T_WHITESPACE"," ",279],"(","!",["T_STRING","array_filter",279],"(",["T_VARIABLE","$v",279],")",")",["T_WHITESPACE"," ",279],"{",["T_WHITESPACE","\n                ",279],["T_CONTINUE","continue",280],";",["T_WHITESPACE","\n            ",280],"}",["T_WHITESPACE","\n            ",281],["T_VARIABLE","$key",282],["T_WHITESPACE"," ",282],"=",["T_WHITESPACE"," ",282],["T_STRING","implode",282],"(",["T_CONSTANT_ENCAPSED_STRING","'-'",282],",",["T_WHITESPACE"," ",282],["T_STRING","array_merge",282],"(","[",["T_VARIABLE","$v",282],"[",["T_CONSTANT_ENCAPSED_STRING","'cust_group'",282],"]","]",",",["T_WHITESPACE"," ",282],["T_VARIABLE","$this",282],["T_OBJECT_OPERATOR","->",282],["T_STRING","_getAdditionalUniqueFields",282],"(",["T_VARIABLE","$v",282],")",")",")",";",["T_WHITESPACE","\n            ",282],["T_IF","if",283],["T_WHITESPACE"," ",283],"(",["T_VARIABLE","$v",283],"[",["T_CONSTANT_ENCAPSED_STRING","'website_id'",283],"]",["T_WHITESPACE"," ",283],["T_IS_EQUAL","==",283],["T_WHITESPACE"," ",283],["T_VARIABLE","$websiteId",283],")",["T_WHITESPACE"," ",283],"{",["T_WHITESPACE","\n                ",283],["T_VARIABLE","$data",284],"[",["T_VARIABLE","$key",284],"]",["T_WHITESPACE"," ",284],"=",["T_WHITESPACE"," ",284],["T_VARIABLE","$v",284],";",["T_WHITESPACE","\n                ",284],["T_VARIABLE","$data",285],"[",["T_VARIABLE","$key",285],"]","[",["T_CONSTANT_ENCAPSED_STRING","'website_price'",285],"]",["T_WHITESPACE"," ",285],"=",["T_WHITESPACE"," ",285],["T_VARIABLE","$v",285],"[",["T_CONSTANT_ENCAPSED_STRING","'price'",285],"]",";",["T_WHITESPACE","\n            ",285],"}",["T_WHITESPACE"," ",286],["T_ELSEIF","elseif",286],["T_WHITESPACE"," ",286],"(",["T_VARIABLE","$v",286],"[",["T_CONSTANT_ENCAPSED_STRING","'website_id'",286],"]",["T_WHITESPACE"," ",286],["T_IS_EQUAL","==",286],["T_WHITESPACE"," ",286],["T_LNUMBER","0",286],["T_WHITESPACE"," ",286],["T_BOOLEAN_AND","&&",286],["T_WHITESPACE"," ",286],"!",["T_ISSET","isset",286],"(",["T_VARIABLE","$data",286],"[",["T_VARIABLE","$key",286],"]",")",")",["T_WHITESPACE"," ",286],"{",["T_WHITESPACE","\n                ",286],["T_VARIABLE","$data",287],"[",["T_VARIABLE","$key",287],"]",["T_WHITESPACE"," ",287],"=",["T_WHITESPACE"," ",287],["T_VARIABLE","$v",287],";",["T_WHITESPACE","\n                ",287],["T_VARIABLE","$data",288],"[",["T_VARIABLE","$key",288],"]","[",["T_CONSTANT_ENCAPSED_STRING","'website_id'",288],"]",["T_WHITESPACE"," ",288],"=",["T_WHITESPACE"," ",288],["T_VARIABLE","$websiteId",288],";",["T_WHITESPACE","\n                ",288],["T_IF","if",289],["T_WHITESPACE"," ",289],"(",["T_VARIABLE","$this",289],["T_OBJECT_OPERATOR","->",289],["T_STRING","_isPriceFixed",289],"(",["T_VARIABLE","$price",289],")",")",["T_WHITESPACE"," ",289],"{",["T_WHITESPACE","\n                    ",289],["T_VARIABLE","$data",290],"[",["T_VARIABLE","$key",290],"]","[",["T_CONSTANT_ENCAPSED_STRING","'price'",290],"]",["T_WHITESPACE"," ",290],"=",["T_WHITESPACE"," ",290],["T_VARIABLE","$v",290],"[",["T_CONSTANT_ENCAPSED_STRING","'price'",290],"]",["T_WHITESPACE"," ",290],"*",["T_WHITESPACE"," ",290],["T_VARIABLE","$rates",290],"[",["T_VARIABLE","$websiteId",290],"]","[",["T_CONSTANT_ENCAPSED_STRING","'rate'",290],"]",";",["T_WHITESPACE","\n                    ",290],["T_VARIABLE","$data",291],"[",["T_VARIABLE","$key",291],"]","[",["T_CONSTANT_ENCAPSED_STRING","'website_price'",291],"]",["T_WHITESPACE"," ",291],"=",["T_WHITESPACE"," ",291],["T_VARIABLE","$v",291],"[",["T_CONSTANT_ENCAPSED_STRING","'price'",291],"]",["T_WHITESPACE"," ",291],"*",["T_WHITESPACE"," ",291],["T_VARIABLE","$rates",291],"[",["T_VARIABLE","$websiteId",291],"]","[",["T_CONSTANT_ENCAPSED_STRING","'rate'",291],"]",";",["T_WHITESPACE","\n                ",291],"}",["T_WHITESPACE","\n            ",292],"}",["T_WHITESPACE","\n        ",293],"}",["T_WHITESPACE","\n\n        ",294],["T_RETURN","return",296],["T_WHITESPACE"," ",296],["T_VARIABLE","$data",296],";",["T_WHITESPACE","\n    ",296],"}",["T_WHITESPACE","\n\n    ",297],["T_DOC_COMMENT","\/**\n     * Assign group prices to product data\n     *\n     * @param \\Magento\\Catalog\\Model\\Product $object\n     * @return $this\n     *\/",299],["T_WHITESPACE","\n    ",304],["T_PUBLIC","public",305],["T_WHITESPACE"," ",305],["T_FUNCTION","function",305],["T_WHITESPACE"," ",305],["T_STRING","afterLoad",305],"(",["T_VARIABLE","$object",305],")",["T_WHITESPACE","\n    ",305],"{",["T_WHITESPACE","\n        ",306],["T_VARIABLE","$data",307],["T_WHITESPACE"," ",307],"=",["T_WHITESPACE"," ",307],["T_VARIABLE","$this",307],["T_OBJECT_OPERATOR","->",307],["T_STRING","_getResource",307],"(",")",["T_OBJECT_OPERATOR","->",307],["T_STRING","loadPriceData",307],"(",["T_WHITESPACE","\n            ",307],["T_VARIABLE","$object",308],["T_OBJECT_OPERATOR","->",308],["T_STRING","getData",308],"(",["T_VARIABLE","$this",308],["T_OBJECT_OPERATOR","->",308],["T_STRING","getMetadataPool",308],"(",")",["T_OBJECT_OPERATOR","->",308],["T_STRING","getMetadata",308],"(",["T_STRING","ProductInterface",308],["T_DOUBLE_COLON","::",308],["T_CLASS","class",308],")",["T_OBJECT_OPERATOR","->",308],["T_STRING","getLinkField",308],"(",")",")",",",["T_WHITESPACE","\n            ",308],["T_VARIABLE","$this",309],["T_OBJECT_OPERATOR","->",309],["T_STRING","getWebsiteId",309],"(",["T_VARIABLE","$object",309],["T_OBJECT_OPERATOR","->",309],["T_STRING","getStoreId",309],"(",")",")",["T_WHITESPACE","\n        ",309],")",";",["T_WHITESPACE","\n        ",310],["T_VARIABLE","$this",311],["T_OBJECT_OPERATOR","->",311],["T_STRING","setPriceData",311],"(",["T_VARIABLE","$object",311],",",["T_WHITESPACE"," ",311],["T_VARIABLE","$data",311],")",";",["T_WHITESPACE","\n\n        ",311],["T_RETURN","return",313],["T_WHITESPACE"," ",313],["T_VARIABLE","$this",313],";",["T_WHITESPACE","\n    ",313],"}",["T_WHITESPACE","\n\n    ",314],["T_DOC_COMMENT","\/**\n     * @param int $storeId\n     * @return int|null\n     *\/",316],["T_WHITESPACE","\n    ",319],["T_PRIVATE","private",320],["T_WHITESPACE"," ",320],["T_FUNCTION","function",320],["T_WHITESPACE"," ",320],["T_STRING","getWebsiteId",320],"(",["T_VARIABLE","$storeId",320],")",["T_WHITESPACE","\n    ",320],"{",["T_WHITESPACE","\n        ",321],["T_VARIABLE","$websiteId",322],["T_WHITESPACE"," ",322],"=",["T_WHITESPACE"," ",322],["T_STRING","null",322],";",["T_WHITESPACE","\n        ",322],["T_IF","if",323],["T_WHITESPACE"," ",323],"(",["T_VARIABLE","$this",323],["T_OBJECT_OPERATOR","->",323],["T_STRING","getAttribute",323],"(",")",["T_OBJECT_OPERATOR","->",323],["T_STRING","isScopeGlobal",323],"(",")",")",["T_WHITESPACE"," ",323],"{",["T_WHITESPACE","\n            ",323],["T_VARIABLE","$websiteId",324],["T_WHITESPACE"," ",324],"=",["T_WHITESPACE"," ",324],["T_LNUMBER","0",324],";",["T_WHITESPACE","\n        ",324],"}",["T_WHITESPACE"," ",325],["T_ELSEIF","elseif",325],["T_WHITESPACE"," ",325],"(",["T_VARIABLE","$storeId",325],")",["T_WHITESPACE"," ",325],"{",["T_WHITESPACE","\n            ",325],["T_VARIABLE","$websiteId",326],["T_WHITESPACE"," ",326],"=",["T_WHITESPACE"," ",326],["T_VARIABLE","$this",326],["T_OBJECT_OPERATOR","->",326],["T_STRING","_storeManager",326],["T_OBJECT_OPERATOR","->",326],["T_STRING","getStore",326],"(",["T_VARIABLE","$storeId",326],")",["T_OBJECT_OPERATOR","->",326],["T_STRING","getWebsiteId",326],"(",")",";",["T_WHITESPACE","\n        ",326],"}",["T_WHITESPACE","\n        ",327],["T_RETURN","return",328],["T_WHITESPACE"," ",328],["T_VARIABLE","$websiteId",328],";",["T_WHITESPACE","\n    ",328],"}",["T_WHITESPACE","\n\n    ",329],["T_DOC_COMMENT","\/**\n     * @param \\Magento\\Catalog\\Model\\Product $object\n     * @param array $priceData\n     *\/",331],["T_WHITESPACE","\n    ",334],["T_PUBLIC","public",335],["T_WHITESPACE"," ",335],["T_FUNCTION","function",335],["T_WHITESPACE"," ",335],["T_STRING","setPriceData",335],"(",["T_VARIABLE","$object",335],",",["T_WHITESPACE"," ",335],["T_VARIABLE","$priceData",335],")",["T_WHITESPACE","\n    ",335],"{",["T_WHITESPACE","\n        ",336],["T_VARIABLE","$priceData",337],["T_WHITESPACE"," ",337],"=",["T_WHITESPACE"," ",337],["T_VARIABLE","$this",337],["T_OBJECT_OPERATOR","->",337],["T_STRING","modifyPriceData",337],"(",["T_VARIABLE","$object",337],",",["T_WHITESPACE"," ",337],["T_VARIABLE","$priceData",337],")",";",["T_WHITESPACE","\n        ",337],["T_VARIABLE","$websiteId",338],["T_WHITESPACE"," ",338],"=",["T_WHITESPACE"," ",338],["T_VARIABLE","$this",338],["T_OBJECT_OPERATOR","->",338],["T_STRING","getWebsiteId",338],"(",["T_VARIABLE","$object",338],["T_OBJECT_OPERATOR","->",338],["T_STRING","getStoreId",338],"(",")",")",";",["T_WHITESPACE","\n        ",338],["T_IF","if",339],["T_WHITESPACE"," ",339],"(","!",["T_VARIABLE","$object",339],["T_OBJECT_OPERATOR","->",339],["T_STRING","getData",339],"(",["T_CONSTANT_ENCAPSED_STRING","'_edit_mode'",339],")",["T_WHITESPACE"," ",339],["T_BOOLEAN_AND","&&",339],["T_WHITESPACE"," ",339],["T_VARIABLE","$websiteId",339],")",["T_WHITESPACE"," ",339],"{",["T_WHITESPACE","\n            ",339],["T_VARIABLE","$priceData",340],["T_WHITESPACE"," ",340],"=",["T_WHITESPACE"," ",340],["T_VARIABLE","$this",340],["T_OBJECT_OPERATOR","->",340],["T_STRING","preparePriceData",340],"(",["T_VARIABLE","$priceData",340],",",["T_WHITESPACE"," ",340],["T_VARIABLE","$object",340],["T_OBJECT_OPERATOR","->",340],["T_STRING","getTypeId",340],"(",")",",",["T_WHITESPACE"," ",340],["T_VARIABLE","$websiteId",340],")",";",["T_WHITESPACE","\n        ",340],"}",["T_WHITESPACE","\n\n        ",341],["T_VARIABLE","$object",343],["T_OBJECT_OPERATOR","->",343],["T_STRING","setData",343],"(",["T_VARIABLE","$this",343],["T_OBJECT_OPERATOR","->",343],["T_STRING","getAttribute",343],"(",")",["T_OBJECT_OPERATOR","->",343],["T_STRING","getName",343],"(",")",",",["T_WHITESPACE"," ",343],["T_VARIABLE","$priceData",343],")",";",["T_WHITESPACE","\n        ",343],["T_VARIABLE","$object",344],["T_OBJECT_OPERATOR","->",344],["T_STRING","setOrigData",344],"(",["T_VARIABLE","$this",344],["T_OBJECT_OPERATOR","->",344],["T_STRING","getAttribute",344],"(",")",["T_OBJECT_OPERATOR","->",344],["T_STRING","getName",344],"(",")",",",["T_WHITESPACE"," ",344],["T_VARIABLE","$priceData",344],")",";",["T_WHITESPACE","\n\n        ",344],["T_VARIABLE","$valueChangedKey",346],["T_WHITESPACE"," ",346],"=",["T_WHITESPACE"," ",346],["T_VARIABLE","$this",346],["T_OBJECT_OPERATOR","->",346],["T_STRING","getAttribute",346],"(",")",["T_OBJECT_OPERATOR","->",346],["T_STRING","getName",346],"(",")",["T_WHITESPACE"," ",346],".",["T_WHITESPACE"," ",346],["T_CONSTANT_ENCAPSED_STRING","'_changed'",346],";",["T_WHITESPACE","\n        ",346],["T_VARIABLE","$object",347],["T_OBJECT_OPERATOR","->",347],["T_STRING","setOrigData",347],"(",["T_VARIABLE","$valueChangedKey",347],",",["T_WHITESPACE"," ",347],["T_LNUMBER","0",347],")",";",["T_WHITESPACE","\n        ",347],["T_VARIABLE","$object",348],["T_OBJECT_OPERATOR","->",348],["T_STRING","setData",348],"(",["T_VARIABLE","$valueChangedKey",348],",",["T_WHITESPACE"," ",348],["T_LNUMBER","0",348],")",";",["T_WHITESPACE","\n    ",348],"}",["T_WHITESPACE","\n\n    ",349],["T_DOC_COMMENT","\/**\n     * Perform price modification\n     *\n     * @param \\Magento\\Catalog\\Model\\Product $object\n     * @param array $data\n     * @return array\n     * @SuppressWarnings(PHPMD.UnusedFormalParameter)\n     *\/",351],["T_WHITESPACE","\n    ",358],["T_PROTECTED","protected",359],["T_WHITESPACE"," ",359],["T_FUNCTION","function",359],["T_WHITESPACE"," ",359],["T_STRING","modifyPriceData",359],"(",["T_VARIABLE","$object",359],",",["T_WHITESPACE"," ",359],["T_VARIABLE","$data",359],")",["T_WHITESPACE","\n    ",359],"{",["T_WHITESPACE","\n        ",360],["T_DOC_COMMENT","\/** @var array $priceItem *\/",361],["T_WHITESPACE","\n        ",361],["T_FOREACH","foreach",362],["T_WHITESPACE"," ",362],"(",["T_VARIABLE","$data",362],["T_WHITESPACE"," ",362],["T_AS","as",362],["T_WHITESPACE"," ",362],["T_VARIABLE","$key",362],["T_WHITESPACE"," ",362],["T_DOUBLE_ARROW","=>",362],["T_WHITESPACE"," ",362],["T_VARIABLE","$priceItem",362],")",["T_WHITESPACE"," ",362],"{",["T_WHITESPACE","\n            ",362],["T_IF","if",363],["T_WHITESPACE"," ",363],"(",["T_ISSET","isset",363],"(",["T_VARIABLE","$priceItem",363],"[",["T_CONSTANT_ENCAPSED_STRING","'price'",363],"]",")",["T_WHITESPACE"," ",363],["T_BOOLEAN_AND","&&",363],["T_WHITESPACE"," ",363],["T_VARIABLE","$priceItem",363],"[",["T_CONSTANT_ENCAPSED_STRING","'price'",363],"]",["T_WHITESPACE"," ",363],">",["T_WHITESPACE"," ",363],["T_LNUMBER","0",363],")",["T_WHITESPACE"," ",363],"{",["T_WHITESPACE","\n                ",363],["T_VARIABLE","$data",364],"[",["T_VARIABLE","$key",364],"]","[",["T_CONSTANT_ENCAPSED_STRING","'website_price'",364],"]",["T_WHITESPACE"," ",364],"=",["T_WHITESPACE"," ",364],["T_VARIABLE","$priceItem",364],"[",["T_CONSTANT_ENCAPSED_STRING","'price'",364],"]",";",["T_WHITESPACE","\n            ",364],"}",["T_WHITESPACE","\n            ",365],["T_IF","if",366],["T_WHITESPACE"," ",366],"(",["T_VARIABLE","$priceItem",366],"[",["T_CONSTANT_ENCAPSED_STRING","'all_groups'",366],"]",")",["T_WHITESPACE"," ",366],"{",["T_WHITESPACE","\n                ",366],["T_VARIABLE","$data",367],"[",["T_VARIABLE","$key",367],"]","[",["T_CONSTANT_ENCAPSED_STRING","'cust_group'",367],"]",["T_WHITESPACE"," ",367],"=",["T_WHITESPACE"," ",367],["T_VARIABLE","$this",367],["T_OBJECT_OPERATOR","->",367],["T_STRING","_groupManagement",367],["T_OBJECT_OPERATOR","->",367],["T_STRING","getAllCustomersGroup",367],"(",")",["T_OBJECT_OPERATOR","->",367],["T_STRING","getId",367],"(",")",";",["T_WHITESPACE","\n            ",367],"}",["T_WHITESPACE","\n        ",368],"}",["T_WHITESPACE","\n        ",369],["T_RETURN","return",370],["T_WHITESPACE"," ",370],["T_VARIABLE","$data",370],";",["T_WHITESPACE","\n    ",370],"}",["T_WHITESPACE","\n\n    ",371],["T_DOC_COMMENT","\/**\n     * After Save Attribute manipulation\n     *\n     * @param \\Magento\\Catalog\\Model\\Product $object\n     * @return $this\n     * @SuppressWarnings(PHPMD.CyclomaticComplexity)\n     * @SuppressWarnings(PHPMD.NPathComplexity)\n     * @SuppressWarnings(PHPMD.ExcessiveMethodLength)\n     *\/",373],["T_WHITESPACE","\n    ",381],["T_PUBLIC","public",382],["T_WHITESPACE"," ",382],["T_FUNCTION","function",382],["T_WHITESPACE"," ",382],["T_STRING","afterSave",382],"(",["T_VARIABLE","$object",382],")",["T_WHITESPACE","\n    ",382],"{",["T_WHITESPACE","\n        ",383],["T_VARIABLE","$websiteId",384],["T_WHITESPACE"," ",384],"=",["T_WHITESPACE"," ",384],["T_VARIABLE","$this",384],["T_OBJECT_OPERATOR","->",384],["T_STRING","_storeManager",384],["T_OBJECT_OPERATOR","->",384],["T_STRING","getStore",384],"(",["T_VARIABLE","$object",384],["T_OBJECT_OPERATOR","->",384],["T_STRING","getStoreId",384],"(",")",")",["T_OBJECT_OPERATOR","->",384],["T_STRING","getWebsiteId",384],"(",")",";",["T_WHITESPACE","\n        ",384],["T_VARIABLE","$isGlobal",385],["T_WHITESPACE"," ",385],"=",["T_WHITESPACE"," ",385],["T_VARIABLE","$this",385],["T_OBJECT_OPERATOR","->",385],["T_STRING","getAttribute",385],"(",")",["T_OBJECT_OPERATOR","->",385],["T_STRING","isScopeGlobal",385],"(",")",["T_WHITESPACE"," ",385],["T_BOOLEAN_OR","||",385],["T_WHITESPACE"," ",385],["T_VARIABLE","$websiteId",385],["T_WHITESPACE"," ",385],["T_IS_EQUAL","==",385],["T_WHITESPACE"," ",385],["T_LNUMBER","0",385],";",["T_WHITESPACE","\n\n        ",385],["T_VARIABLE","$priceRows",387],["T_WHITESPACE"," ",387],"=",["T_WHITESPACE"," ",387],["T_VARIABLE","$object",387],["T_OBJECT_OPERATOR","->",387],["T_STRING","getData",387],"(",["T_VARIABLE","$this",387],["T_OBJECT_OPERATOR","->",387],["T_STRING","getAttribute",387],"(",")",["T_OBJECT_OPERATOR","->",387],["T_STRING","getName",387],"(",")",")",";",["T_WHITESPACE","\n        ",387],["T_IF","if",388],["T_WHITESPACE"," ",388],"(",["T_STRING","null",388],["T_WHITESPACE"," ",388],["T_IS_IDENTICAL","===",388],["T_WHITESPACE"," ",388],["T_VARIABLE","$priceRows",388],")",["T_WHITESPACE"," ",388],"{",["T_WHITESPACE","\n            ",388],["T_RETURN","return",389],["T_WHITESPACE"," ",389],["T_VARIABLE","$this",389],";",["T_WHITESPACE","\n        ",389],"}",["T_WHITESPACE","\n\n        ",390],["T_VARIABLE","$priceRows",392],["T_WHITESPACE"," ",392],"=",["T_WHITESPACE"," ",392],["T_STRING","array_filter",392],"(",["T_ARRAY_CAST","(array)",392],["T_VARIABLE","$priceRows",392],")",";",["T_WHITESPACE","\n\n        ",392],["T_VARIABLE","$old",394],["T_WHITESPACE"," ",394],"=",["T_WHITESPACE"," ",394],"[","]",";",["T_WHITESPACE","\n        ",394],["T_VARIABLE","$new",395],["T_WHITESPACE"," ",395],"=",["T_WHITESPACE"," ",395],"[","]",";",["T_WHITESPACE","\n\n        ",395],["T_COMMENT","\/\/ prepare original data for compare\n",397],["T_WHITESPACE","        ",398],["T_VARIABLE","$origPrices",398],["T_WHITESPACE"," ",398],"=",["T_WHITESPACE"," ",398],["T_VARIABLE","$object",398],["T_OBJECT_OPERATOR","->",398],["T_STRING","getOrigData",398],"(",["T_VARIABLE","$this",398],["T_OBJECT_OPERATOR","->",398],["T_STRING","getAttribute",398],"(",")",["T_OBJECT_OPERATOR","->",398],["T_STRING","getName",398],"(",")",")",";",["T_WHITESPACE","\n        ",398],["T_IF","if",399],["T_WHITESPACE"," ",399],"(","!",["T_STRING","is_array",399],"(",["T_VARIABLE","$origPrices",399],")",")",["T_WHITESPACE"," ",399],"{",["T_WHITESPACE","\n            ",399],["T_VARIABLE","$origPrices",400],["T_WHITESPACE"," ",400],"=",["T_WHITESPACE"," ",400],"[","]",";",["T_WHITESPACE","\n        ",400],"}",["T_WHITESPACE","\n        ",401],["T_FOREACH","foreach",402],["T_WHITESPACE"," ",402],"(",["T_VARIABLE","$origPrices",402],["T_WHITESPACE"," ",402],["T_AS","as",402],["T_WHITESPACE"," ",402],["T_VARIABLE","$data",402],")",["T_WHITESPACE"," ",402],"{",["T_WHITESPACE","\n            ",402],["T_IF","if",403],["T_WHITESPACE"," ",403],"(",["T_VARIABLE","$data",403],"[",["T_CONSTANT_ENCAPSED_STRING","'website_id'",403],"]",["T_WHITESPACE"," ",403],">",["T_WHITESPACE"," ",403],["T_LNUMBER","0",403],["T_WHITESPACE"," ",403],["T_BOOLEAN_OR","||",403],["T_WHITESPACE"," ",403],["T_VARIABLE","$data",403],"[",["T_CONSTANT_ENCAPSED_STRING","'website_id'",403],"]",["T_WHITESPACE"," ",403],["T_IS_EQUAL","==",403],["T_WHITESPACE"," ",403],["T_CONSTANT_ENCAPSED_STRING","'0'",403],["T_WHITESPACE"," ",403],["T_BOOLEAN_AND","&&",403],["T_WHITESPACE"," ",403],["T_VARIABLE","$isGlobal",403],")",["T_WHITESPACE"," ",403],"{",["T_WHITESPACE","\n                ",403],["T_VARIABLE","$key",404],["T_WHITESPACE"," ",404],"=",["T_WHITESPACE"," ",404],["T_STRING","implode",404],"(",["T_WHITESPACE","\n                    ",404],["T_CONSTANT_ENCAPSED_STRING","'-'",405],",",["T_WHITESPACE","\n                    ",405],["T_STRING","array_merge",406],"(",["T_WHITESPACE","\n                        ",406],"[",["T_VARIABLE","$data",407],"[",["T_CONSTANT_ENCAPSED_STRING","'website_id'",407],"]",",",["T_WHITESPACE"," ",407],["T_VARIABLE","$data",407],"[",["T_CONSTANT_ENCAPSED_STRING","'cust_group'",407],"]","]",",",["T_WHITESPACE","\n                        ",407],["T_VARIABLE","$this",408],["T_OBJECT_OPERATOR","->",408],["T_STRING","_getAdditionalUniqueFields",408],"(",["T_VARIABLE","$data",408],")",["T_WHITESPACE","\n                    ",408],")",["T_WHITESPACE","\n                ",409],")",";",["T_WHITESPACE","\n                ",410],["T_VARIABLE","$old",411],"[",["T_VARIABLE","$key",411],"]",["T_WHITESPACE"," ",411],"=",["T_WHITESPACE"," ",411],["T_VARIABLE","$data",411],";",["T_WHITESPACE","\n            ",411],"}",["T_WHITESPACE","\n        ",412],"}",["T_WHITESPACE","\n\n        ",413],["T_COMMENT","\/\/ prepare data for save\n",415],["T_WHITESPACE","        ",416],["T_FOREACH","foreach",416],["T_WHITESPACE"," ",416],"(",["T_VARIABLE","$priceRows",416],["T_WHITESPACE"," ",416],["T_AS","as",416],["T_WHITESPACE"," ",416],["T_VARIABLE","$data",416],")",["T_WHITESPACE"," ",416],"{",["T_WHITESPACE","\n            ",416],["T_VARIABLE","$hasEmptyData",417],["T_WHITESPACE"," ",417],"=",["T_WHITESPACE"," ",417],["T_STRING","false",417],";",["T_WHITESPACE","\n            ",417],["T_FOREACH","foreach",418],["T_WHITESPACE"," ",418],"(",["T_VARIABLE","$this",418],["T_OBJECT_OPERATOR","->",418],["T_STRING","_getAdditionalUniqueFields",418],"(",["T_VARIABLE","$data",418],")",["T_WHITESPACE"," ",418],["T_AS","as",418],["T_WHITESPACE"," ",418],["T_VARIABLE","$field",418],")",["T_WHITESPACE"," ",418],"{",["T_WHITESPACE","\n                ",418],["T_IF","if",419],["T_WHITESPACE"," ",419],"(",["T_EMPTY","empty",419],"(",["T_VARIABLE","$field",419],")",")",["T_WHITESPACE"," ",419],"{",["T_WHITESPACE","\n                    ",419],["T_VARIABLE","$hasEmptyData",420],["T_WHITESPACE"," ",420],"=",["T_WHITESPACE"," ",420],["T_STRING","true",420],";",["T_WHITESPACE","\n                    ",420],["T_BREAK","break",421],";",["T_WHITESPACE","\n                ",421],"}",["T_WHITESPACE","\n            ",422],"}",["T_WHITESPACE","\n\n            ",423],["T_IF","if",425],["T_WHITESPACE"," ",425],"(",["T_VARIABLE","$hasEmptyData",425],["T_WHITESPACE"," ",425],["T_BOOLEAN_OR","||",425],["T_WHITESPACE"," ",425],"!",["T_ISSET","isset",425],"(",["T_VARIABLE","$data",425],"[",["T_CONSTANT_ENCAPSED_STRING","'cust_group'",425],"]",")",["T_WHITESPACE"," ",425],["T_BOOLEAN_OR","||",425],["T_WHITESPACE"," ",425],"!",["T_EMPTY","empty",425],"(",["T_VARIABLE","$data",425],"[",["T_CONSTANT_ENCAPSED_STRING","'delete'",425],"]",")",")",["T_WHITESPACE"," ",425],"{",["T_WHITESPACE","\n                ",425],["T_CONTINUE","continue",426],";",["T_WHITESPACE","\n            ",426],"}",["T_WHITESPACE","\n            ",427],["T_IF","if",428],["T_WHITESPACE"," ",428],"(",["T_VARIABLE","$this",428],["T_OBJECT_OPERATOR","->",428],["T_STRING","getAttribute",428],"(",")",["T_OBJECT_OPERATOR","->",428],["T_STRING","isScopeGlobal",428],"(",")",["T_WHITESPACE"," ",428],["T_BOOLEAN_AND","&&",428],["T_WHITESPACE"," ",428],["T_VARIABLE","$data",428],"[",["T_CONSTANT_ENCAPSED_STRING","'website_id'",428],"]",["T_WHITESPACE"," ",428],">",["T_WHITESPACE"," ",428],["T_LNUMBER","0",428],")",["T_WHITESPACE"," ",428],"{",["T_WHITESPACE","\n                ",428],["T_CONTINUE","continue",429],";",["T_WHITESPACE","\n            ",429],"}",["T_WHITESPACE","\n            ",430],["T_IF","if",431],["T_WHITESPACE"," ",431],"(","!",["T_VARIABLE","$isGlobal",431],["T_WHITESPACE"," ",431],["T_BOOLEAN_AND","&&",431],["T_WHITESPACE"," ",431],["T_INT_CAST","(int)",431],["T_VARIABLE","$data",431],"[",["T_CONSTANT_ENCAPSED_STRING","'website_id'",431],"]",["T_WHITESPACE"," ",431],["T_IS_EQUAL","==",431],["T_WHITESPACE"," ",431],["T_LNUMBER","0",431],")",["T_WHITESPACE"," ",431],"{",["T_WHITESPACE","\n                ",431],["T_CONTINUE","continue",432],";",["T_WHITESPACE","\n            ",432],"}",["T_WHITESPACE","\n\n            ",433],["T_VARIABLE","$key",435],["T_WHITESPACE"," ",435],"=",["T_WHITESPACE"," ",435],["T_STRING","implode",435],"(",["T_WHITESPACE","\n                ",435],["T_CONSTANT_ENCAPSED_STRING","'-'",436],",",["T_WHITESPACE","\n                ",436],["T_STRING","array_merge",437],"(","[",["T_VARIABLE","$data",437],"[",["T_CONSTANT_ENCAPSED_STRING","'website_id'",437],"]",",",["T_WHITESPACE"," ",437],["T_VARIABLE","$data",437],"[",["T_CONSTANT_ENCAPSED_STRING","'cust_group'",437],"]","]",",",["T_WHITESPACE"," ",437],["T_VARIABLE","$this",437],["T_OBJECT_OPERATOR","->",437],["T_STRING","_getAdditionalUniqueFields",437],"(",["T_VARIABLE","$data",437],")",")",["T_WHITESPACE","\n            ",437],")",";",["T_WHITESPACE","\n\n            ",438],["T_VARIABLE","$useForAllGroups",440],["T_WHITESPACE"," ",440],"=",["T_WHITESPACE"," ",440],["T_VARIABLE","$data",440],"[",["T_CONSTANT_ENCAPSED_STRING","'cust_group'",440],"]",["T_WHITESPACE"," ",440],["T_IS_EQUAL","==",440],["T_WHITESPACE"," ",440],["T_VARIABLE","$this",440],["T_OBJECT_OPERATOR","->",440],["T_STRING","_groupManagement",440],["T_OBJECT_OPERATOR","->",440],["T_STRING","getAllCustomersGroup",440],"(",")",["T_OBJECT_OPERATOR","->",440],["T_STRING","getId",440],"(",")",";",["T_WHITESPACE","\n            ",440],["T_VARIABLE","$customerGroupId",441],["T_WHITESPACE"," ",441],"=",["T_WHITESPACE"," ",441],"!",["T_VARIABLE","$useForAllGroups",441],["T_WHITESPACE"," ",441],"?",["T_WHITESPACE"," ",441],["T_VARIABLE","$data",441],"[",["T_CONSTANT_ENCAPSED_STRING","'cust_group'",441],"]",["T_WHITESPACE"," ",441],":",["T_WHITESPACE"," ",441],["T_LNUMBER","0",441],";",["T_WHITESPACE","\n            ",441],["T_VARIABLE","$new",442],"[",["T_VARIABLE","$key",442],"]",["T_WHITESPACE"," ",442],"=",["T_WHITESPACE"," ",442],["T_STRING","array_merge",442],"(",["T_WHITESPACE","\n                ",442],["T_VARIABLE","$this",443],["T_OBJECT_OPERATOR","->",443],["T_STRING","getAdditionalFields",443],"(",["T_VARIABLE","$data",443],")",",",["T_WHITESPACE","\n                ",443],"[",["T_WHITESPACE","\n                    ",444],["T_CONSTANT_ENCAPSED_STRING","'website_id'",445],["T_WHITESPACE"," ",445],["T_DOUBLE_ARROW","=>",445],["T_WHITESPACE"," ",445],["T_VARIABLE","$data",445],"[",["T_CONSTANT_ENCAPSED_STRING","'website_id'",445],"]",",",["T_WHITESPACE","\n                    ",445],["T_CONSTANT_ENCAPSED_STRING","'all_groups'",446],["T_WHITESPACE"," ",446],["T_DOUBLE_ARROW","=>",446],["T_WHITESPACE"," ",446],["T_VARIABLE","$useForAllGroups",446],["T_WHITESPACE"," ",446],"?",["T_WHITESPACE"," ",446],["T_LNUMBER","1",446],["T_WHITESPACE"," ",446],":",["T_WHITESPACE"," ",446],["T_LNUMBER","0",446],",",["T_WHITESPACE","\n                    ",446],["T_CONSTANT_ENCAPSED_STRING","'customer_group_id'",447],["T_WHITESPACE"," ",447],["T_DOUBLE_ARROW","=>",447],["T_WHITESPACE"," ",447],["T_VARIABLE","$customerGroupId",447],",",["T_WHITESPACE","\n                    ",447],["T_CONSTANT_ENCAPSED_STRING","'value'",448],["T_WHITESPACE"," ",448],["T_DOUBLE_ARROW","=>",448],["T_WHITESPACE"," ",448],["T_ISSET","isset",448],"(",["T_VARIABLE","$data",448],"[",["T_CONSTANT_ENCAPSED_STRING","'price'",448],"]",")",["T_WHITESPACE"," ",448],"?",["T_WHITESPACE"," ",448],["T_VARIABLE","$data",448],"[",["T_CONSTANT_ENCAPSED_STRING","'price'",448],"]",["T_WHITESPACE"," ",448],":",["T_WHITESPACE"," ",448],["T_STRING","null",448],",",["T_WHITESPACE","\n                ",448],"]",",",["T_WHITESPACE","\n                ",449],["T_VARIABLE","$this",450],["T_OBJECT_OPERATOR","->",450],["T_STRING","_getAdditionalUniqueFields",450],"(",["T_VARIABLE","$data",450],")",["T_WHITESPACE","\n            ",450],")",";",["T_WHITESPACE","\n        ",451],"}",["T_WHITESPACE","\n\n        ",452],["T_VARIABLE","$delete",454],["T_WHITESPACE"," ",454],"=",["T_WHITESPACE"," ",454],["T_STRING","array_diff_key",454],"(",["T_VARIABLE","$old",454],",",["T_WHITESPACE"," ",454],["T_VARIABLE","$new",454],")",";",["T_WHITESPACE","\n        ",454],["T_VARIABLE","$insert",455],["T_WHITESPACE"," ",455],"=",["T_WHITESPACE"," ",455],["T_STRING","array_diff_key",455],"(",["T_VARIABLE","$new",455],",",["T_WHITESPACE"," ",455],["T_VARIABLE","$old",455],")",";",["T_WHITESPACE","\n        ",455],["T_VARIABLE","$update",456],["T_WHITESPACE"," ",456],"=",["T_WHITESPACE"," ",456],["T_STRING","array_intersect_key",456],"(",["T_VARIABLE","$new",456],",",["T_WHITESPACE"," ",456],["T_VARIABLE","$old",456],")",";",["T_WHITESPACE","\n\n        ",456],["T_VARIABLE","$isChanged",458],["T_WHITESPACE"," ",458],"=",["T_WHITESPACE"," ",458],["T_STRING","false",458],";",["T_WHITESPACE","\n        ",458],["T_VARIABLE","$productId",459],["T_WHITESPACE"," ",459],"=",["T_WHITESPACE"," ",459],["T_VARIABLE","$object",459],["T_OBJECT_OPERATOR","->",459],["T_STRING","getData",459],"(",["T_VARIABLE","$this",459],["T_OBJECT_OPERATOR","->",459],["T_STRING","getMetadataPool",459],"(",")",["T_OBJECT_OPERATOR","->",459],["T_STRING","getMetadata",459],"(",["T_STRING","ProductInterface",459],["T_DOUBLE_COLON","::",459],["T_CLASS","class",459],")",["T_OBJECT_OPERATOR","->",459],["T_STRING","getLinkField",459],"(",")",")",";",["T_WHITESPACE","\n\n        ",459],["T_IF","if",461],["T_WHITESPACE"," ",461],"(","!",["T_EMPTY","empty",461],"(",["T_VARIABLE","$delete",461],")",")",["T_WHITESPACE"," ",461],"{",["T_WHITESPACE","\n            ",461],["T_FOREACH","foreach",462],["T_WHITESPACE"," ",462],"(",["T_VARIABLE","$delete",462],["T_WHITESPACE"," ",462],["T_AS","as",462],["T_WHITESPACE"," ",462],["T_VARIABLE","$data",462],")",["T_WHITESPACE"," ",462],"{",["T_WHITESPACE","\n                ",462],["T_VARIABLE","$this",463],["T_OBJECT_OPERATOR","->",463],["T_STRING","_getResource",463],"(",")",["T_OBJECT_OPERATOR","->",463],["T_STRING","deletePriceData",463],"(",["T_VARIABLE","$productId",463],",",["T_WHITESPACE"," ",463],["T_STRING","null",463],",",["T_WHITESPACE"," ",463],["T_VARIABLE","$data",463],"[",["T_CONSTANT_ENCAPSED_STRING","'price_id'",463],"]",")",";",["T_WHITESPACE","\n                ",463],["T_VARIABLE","$isChanged",464],["T_WHITESPACE"," ",464],"=",["T_WHITESPACE"," ",464],["T_STRING","true",464],";",["T_WHITESPACE","\n            ",464],"}",["T_WHITESPACE","\n        ",465],"}",["T_WHITESPACE","\n\n        ",466],["T_IF","if",468],["T_WHITESPACE"," ",468],"(","!",["T_EMPTY","empty",468],"(",["T_VARIABLE","$insert",468],")",")",["T_WHITESPACE"," ",468],"{",["T_WHITESPACE","\n            ",468],["T_FOREACH","foreach",469],["T_WHITESPACE"," ",469],"(",["T_VARIABLE","$insert",469],["T_WHITESPACE"," ",469],["T_AS","as",469],["T_WHITESPACE"," ",469],["T_VARIABLE","$data",469],")",["T_WHITESPACE"," ",469],"{",["T_WHITESPACE","\n                ",469],["T_VARIABLE","$price",470],["T_WHITESPACE"," ",470],"=",["T_WHITESPACE"," ",470],["T_NEW","new",470],["T_WHITESPACE"," ",470],["T_NS_SEPARATOR","\\",470],["T_STRING","Magento",470],["T_NS_SEPARATOR","\\",470],["T_STRING","Framework",470],["T_NS_SEPARATOR","\\",470],["T_STRING","DataObject",470],"(",["T_VARIABLE","$data",470],")",";",["T_WHITESPACE","\n                ",470],["T_VARIABLE","$price",471],["T_OBJECT_OPERATOR","->",471],["T_STRING","setData",471],"(",["T_WHITESPACE","\n                    ",471],["T_VARIABLE","$this",472],["T_OBJECT_OPERATOR","->",472],["T_STRING","getMetadataPool",472],"(",")",["T_OBJECT_OPERATOR","->",472],["T_STRING","getMetadata",472],"(",["T_STRING","ProductInterface",472],["T_DOUBLE_COLON","::",472],["T_CLASS","class",472],")",["T_OBJECT_OPERATOR","->",472],["T_STRING","getLinkField",472],"(",")",",",["T_WHITESPACE","\n                    ",472],["T_VARIABLE","$productId",473],["T_WHITESPACE","\n                ",473],")",";",["T_WHITESPACE","\n                ",474],["T_VARIABLE","$this",475],["T_OBJECT_OPERATOR","->",475],["T_STRING","_getResource",475],"(",")",["T_OBJECT_OPERATOR","->",475],["T_STRING","savePriceData",475],"(",["T_VARIABLE","$price",475],")",";",["T_WHITESPACE","\n\n                ",475],["T_VARIABLE","$isChanged",477],["T_WHITESPACE"," ",477],"=",["T_WHITESPACE"," ",477],["T_STRING","true",477],";",["T_WHITESPACE","\n            ",477],"}",["T_WHITESPACE","\n        ",478],"}",["T_WHITESPACE","\n\n        ",479],["T_IF","if",481],["T_WHITESPACE"," ",481],"(","!",["T_EMPTY","empty",481],"(",["T_VARIABLE","$update",481],")",")",["T_WHITESPACE"," ",481],"{",["T_WHITESPACE","\n            ",481],["T_VARIABLE","$isChanged",482],["T_WHITESPACE"," ",482],"=",["T_WHITESPACE"," ",482],["T_VARIABLE","$this",482],["T_OBJECT_OPERATOR","->",482],["T_STRING","updateValues",482],"(",["T_VARIABLE","$update",482],",",["T_WHITESPACE"," ",482],["T_VARIABLE","$old",482],")",";",["T_WHITESPACE","\n        ",482],"}",["T_WHITESPACE","\n\n        ",483],["T_IF","if",485],["T_WHITESPACE"," ",485],"(",["T_VARIABLE","$isChanged",485],")",["T_WHITESPACE"," ",485],"{",["T_WHITESPACE","\n            ",485],["T_VARIABLE","$valueChangedKey",486],["T_WHITESPACE"," ",486],"=",["T_WHITESPACE"," ",486],["T_VARIABLE","$this",486],["T_OBJECT_OPERATOR","->",486],["T_STRING","getAttribute",486],"(",")",["T_OBJECT_OPERATOR","->",486],["T_STRING","getName",486],"(",")",["T_WHITESPACE"," ",486],".",["T_WHITESPACE"," ",486],["T_CONSTANT_ENCAPSED_STRING","'_changed'",486],";",["T_WHITESPACE","\n            ",486],["T_VARIABLE","$object",487],["T_OBJECT_OPERATOR","->",487],["T_STRING","setData",487],"(",["T_VARIABLE","$valueChangedKey",487],",",["T_WHITESPACE"," ",487],["T_LNUMBER","1",487],")",";",["T_WHITESPACE","\n        ",487],"}",["T_WHITESPACE","\n\n        ",488],["T_RETURN","return",490],["T_WHITESPACE"," ",490],["T_VARIABLE","$this",490],";",["T_WHITESPACE","\n    ",490],"}",["T_WHITESPACE","\n\n    ",491],["T_DOC_COMMENT","\/**\n     * @param array $valuesToUpdate\n     * @param array $oldValues\n     * @return boolean\n     *\/",493],["T_WHITESPACE","\n    ",497],["T_PROTECTED","protected",498],["T_WHITESPACE"," ",498],["T_FUNCTION","function",498],["T_WHITESPACE"," ",498],["T_STRING","updateValues",498],"(",["T_ARRAY","array",498],["T_WHITESPACE"," ",498],["T_VARIABLE","$valuesToUpdate",498],",",["T_WHITESPACE"," ",498],["T_ARRAY","array",498],["T_WHITESPACE"," ",498],["T_VARIABLE","$oldValues",498],")",["T_WHITESPACE","\n    ",498],"{",["T_WHITESPACE","\n        ",499],["T_VARIABLE","$isChanged",500],["T_WHITESPACE"," ",500],"=",["T_WHITESPACE"," ",500],["T_STRING","false",500],";",["T_WHITESPACE","\n        ",500],["T_FOREACH","foreach",501],["T_WHITESPACE"," ",501],"(",["T_VARIABLE","$valuesToUpdate",501],["T_WHITESPACE"," ",501],["T_AS","as",501],["T_WHITESPACE"," ",501],["T_VARIABLE","$key",501],["T_WHITESPACE"," ",501],["T_DOUBLE_ARROW","=>",501],["T_WHITESPACE"," ",501],["T_VARIABLE","$value",501],")",["T_WHITESPACE"," ",501],"{",["T_WHITESPACE","\n            ",501],["T_IF","if",502],["T_WHITESPACE"," ",502],"(",["T_VARIABLE","$oldValues",502],"[",["T_VARIABLE","$key",502],"]","[",["T_CONSTANT_ENCAPSED_STRING","'price'",502],"]",["T_WHITESPACE"," ",502],["T_IS_NOT_EQUAL","!=",502],["T_WHITESPACE"," ",502],["T_VARIABLE","$value",502],"[",["T_CONSTANT_ENCAPSED_STRING","'value'",502],"]",")",["T_WHITESPACE"," ",502],"{",["T_WHITESPACE","\n                ",502],["T_VARIABLE","$price",503],["T_WHITESPACE"," ",503],"=",["T_WHITESPACE"," ",503],["T_NEW","new",503],["T_WHITESPACE"," ",503],["T_NS_SEPARATOR","\\",503],["T_STRING","Magento",503],["T_NS_SEPARATOR","\\",503],["T_STRING","Framework",503],["T_NS_SEPARATOR","\\",503],["T_STRING","DataObject",503],"(",["T_WHITESPACE","\n                    ",503],"[",["T_WHITESPACE","\n                        ",504],["T_CONSTANT_ENCAPSED_STRING","'value_id'",505],["T_WHITESPACE"," ",505],["T_DOUBLE_ARROW","=>",505],["T_WHITESPACE"," ",505],["T_VARIABLE","$oldValues",505],"[",["T_VARIABLE","$key",505],"]","[",["T_CONSTANT_ENCAPSED_STRING","'price_id'",505],"]",",",["T_WHITESPACE","\n                        ",505],["T_CONSTANT_ENCAPSED_STRING","'value'",506],["T_WHITESPACE"," ",506],["T_DOUBLE_ARROW","=>",506],["T_WHITESPACE"," ",506],["T_VARIABLE","$value",506],"[",["T_CONSTANT_ENCAPSED_STRING","'value'",506],"]",["T_WHITESPACE","\n                    ",506],"]",["T_WHITESPACE","\n                ",507],")",";",["T_WHITESPACE","\n                ",508],["T_VARIABLE","$this",509],["T_OBJECT_OPERATOR","->",509],["T_STRING","_getResource",509],"(",")",["T_OBJECT_OPERATOR","->",509],["T_STRING","savePriceData",509],"(",["T_VARIABLE","$price",509],")",";",["T_WHITESPACE","\n                ",509],["T_VARIABLE","$isChanged",510],["T_WHITESPACE"," ",510],"=",["T_WHITESPACE"," ",510],["T_STRING","true",510],";",["T_WHITESPACE","\n            ",510],"}",["T_WHITESPACE","\n        ",511],"}",["T_WHITESPACE","\n        ",512],["T_RETURN","return",513],["T_WHITESPACE"," ",513],["T_VARIABLE","$isChanged",513],";",["T_WHITESPACE","\n    ",513],"}",["T_WHITESPACE","\n\n    ",514],["T_DOC_COMMENT","\/**\n     * Retrieve data for update attribute\n     *\n     * @param  \\Magento\\Catalog\\Model\\Product $object\n     * @return array\n     *\/",516],["T_WHITESPACE","\n    ",521],["T_PUBLIC","public",522],["T_WHITESPACE"," ",522],["T_FUNCTION","function",522],["T_WHITESPACE"," ",522],["T_STRING","getAffectedFields",522],"(",["T_VARIABLE","$object",522],")",["T_WHITESPACE","\n    ",522],"{",["T_WHITESPACE","\n        ",523],["T_VARIABLE","$data",524],["T_WHITESPACE"," ",524],"=",["T_WHITESPACE"," ",524],"[","]",";",["T_WHITESPACE","\n        ",524],["T_VARIABLE","$prices",525],["T_WHITESPACE"," ",525],"=",["T_WHITESPACE"," ",525],["T_ARRAY_CAST","(array)",525],["T_VARIABLE","$object",525],["T_OBJECT_OPERATOR","->",525],["T_STRING","getData",525],"(",["T_VARIABLE","$this",525],["T_OBJECT_OPERATOR","->",525],["T_STRING","getAttribute",525],"(",")",["T_OBJECT_OPERATOR","->",525],["T_STRING","getName",525],"(",")",")",";",["T_WHITESPACE","\n        ",525],["T_VARIABLE","$tableName",526],["T_WHITESPACE"," ",526],"=",["T_WHITESPACE"," ",526],["T_VARIABLE","$this",526],["T_OBJECT_OPERATOR","->",526],["T_STRING","_getResource",526],"(",")",["T_OBJECT_OPERATOR","->",526],["T_STRING","getMainTable",526],"(",")",";",["T_WHITESPACE","\n        ",526],["T_FOREACH","foreach",527],["T_WHITESPACE"," ",527],"(",["T_VARIABLE","$prices",527],["T_WHITESPACE"," ",527],["T_AS","as",527],["T_WHITESPACE"," ",527],["T_VARIABLE","$value",527],")",["T_WHITESPACE"," ",527],"{",["T_WHITESPACE","\n            ",527],["T_VARIABLE","$data",528],"[",["T_VARIABLE","$tableName",528],"]","[","]",["T_WHITESPACE"," ",528],"=",["T_WHITESPACE"," ",528],"[",["T_WHITESPACE","\n                ",528],["T_CONSTANT_ENCAPSED_STRING","'attribute_id'",529],["T_WHITESPACE"," ",529],["T_DOUBLE_ARROW","=>",529],["T_WHITESPACE"," ",529],["T_VARIABLE","$this",529],["T_OBJECT_OPERATOR","->",529],["T_STRING","getAttribute",529],"(",")",["T_OBJECT_OPERATOR","->",529],["T_STRING","getAttributeId",529],"(",")",",",["T_WHITESPACE","\n                ",529],["T_CONSTANT_ENCAPSED_STRING","'entity_id'",530],["T_WHITESPACE"," ",530],["T_DOUBLE_ARROW","=>",530],["T_WHITESPACE"," ",530],["T_VARIABLE","$object",530],["T_OBJECT_OPERATOR","->",530],["T_STRING","getId",530],"(",")",",",["T_WHITESPACE","\n                ",530],["T_CONSTANT_ENCAPSED_STRING","'value_id'",531],["T_WHITESPACE"," ",531],["T_DOUBLE_ARROW","=>",531],["T_WHITESPACE"," ",531],["T_VARIABLE","$value",531],"[",["T_CONSTANT_ENCAPSED_STRING","'price_id'",531],"]",",",["T_WHITESPACE","\n            ",531],"]",";",["T_WHITESPACE","\n        ",532],"}",["T_WHITESPACE","\n\n        ",533],["T_RETURN","return",535],["T_WHITESPACE"," ",535],["T_VARIABLE","$data",535],";",["T_WHITESPACE","\n    ",535],"}",["T_WHITESPACE","\n\n    ",536],["T_DOC_COMMENT","\/**\n     * Get resource model instance\n     *\n     * @return \\Magento\\Catalog\\Model\\ResourceModel\\Product\\Attribute\\Backend\\GroupPrice\\AbstractGroupPrice\n     *\/",538],["T_WHITESPACE","\n    ",542],["T_PUBLIC","public",543],["T_WHITESPACE"," ",543],["T_FUNCTION","function",543],["T_WHITESPACE"," ",543],["T_STRING","getResource",543],"(",")",["T_WHITESPACE","\n    ",543],"{",["T_WHITESPACE","\n        ",544],["T_RETURN","return",545],["T_WHITESPACE"," ",545],["T_VARIABLE","$this",545],["T_OBJECT_OPERATOR","->",545],["T_STRING","_getResource",545],"(",")",";",["T_WHITESPACE","\n    ",545],"}",["T_WHITESPACE","\n\n    ",546],["T_DOC_COMMENT","\/**\n     * @return \\Magento\\Framework\\EntityManager\\MetadataPool\n     *\/",548],["T_WHITESPACE","\n    ",550],["T_PRIVATE","private",551],["T_WHITESPACE"," ",551],["T_FUNCTION","function",551],["T_WHITESPACE"," ",551],["T_STRING","getMetadataPool",551],"(",")",["T_WHITESPACE","\n    ",551],"{",["T_WHITESPACE","\n        ",552],["T_IF","if",553],["T_WHITESPACE"," ",553],"(",["T_STRING","null",553],["T_WHITESPACE"," ",553],["T_IS_IDENTICAL","===",553],["T_WHITESPACE"," ",553],["T_VARIABLE","$this",553],["T_OBJECT_OPERATOR","->",553],["T_STRING","metadataPool",553],")",["T_WHITESPACE"," ",553],"{",["T_WHITESPACE","\n            ",553],["T_VARIABLE","$this",554],["T_OBJECT_OPERATOR","->",554],["T_STRING","metadataPool",554],["T_WHITESPACE"," ",554],"=",["T_WHITESPACE"," ",554],["T_NS_SEPARATOR","\\",554],["T_STRING","Magento",554],["T_NS_SEPARATOR","\\",554],["T_STRING","Framework",554],["T_NS_SEPARATOR","\\",554],["T_STRING","App",554],["T_NS_SEPARATOR","\\",554],["T_STRING","ObjectManager",554],["T_DOUBLE_COLON","::",554],["T_STRING","getInstance",554],"(",")",["T_WHITESPACE","\n                ",554],["T_OBJECT_OPERATOR","->",555],["T_STRING","get",555],"(",["T_NS_SEPARATOR","\\",555],["T_STRING","Magento",555],["T_NS_SEPARATOR","\\",555],["T_STRING","Framework",555],["T_NS_SEPARATOR","\\",555],["T_STRING","EntityManager",555],["T_NS_SEPARATOR","\\",555],["T_STRING","MetadataPool",555],["T_DOUBLE_COLON","::",555],["T_CLASS","class",555],")",";",["T_WHITESPACE","\n        ",555],"}",["T_WHITESPACE","\n        ",556],["T_RETURN","return",557],["T_WHITESPACE"," ",557],["T_VARIABLE","$this",557],["T_OBJECT_OPERATOR","->",557],["T_STRING","metadataPool",557],";",["T_WHITESPACE","\n    ",557],"}",["T_WHITESPACE","\n",558],"}",["T_WHITESPACE","\n",559]]
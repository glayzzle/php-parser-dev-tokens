[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Copyright \u00c2\u00a9 2013-2017 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n *\/",2],["T_WHITESPACE","\n",5],["T_NAMESPACE","namespace",6],["T_WHITESPACE"," ",6],["T_STRING","Magento",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Catalog",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Model",6],["T_NS_SEPARATOR","\\",6],["T_STRING","ResourceModel",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Product",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Link",6],";",["T_WHITESPACE","\n\n",6],["T_DOC_COMMENT","\/**\n * Catalog product links collection\n *\n * @author      Magento Core Team <core@magentocommerce.com>\n *\/",8],["T_WHITESPACE","\n",12],["T_CLASS","class",13],["T_WHITESPACE"," ",13],["T_STRING","Collection",13],["T_WHITESPACE"," ",13],["T_EXTENDS","extends",13],["T_WHITESPACE"," ",13],["T_NS_SEPARATOR","\\",13],["T_STRING","Magento",13],["T_NS_SEPARATOR","\\",13],["T_STRING","Framework",13],["T_NS_SEPARATOR","\\",13],["T_STRING","Model",13],["T_NS_SEPARATOR","\\",13],["T_STRING","ResourceModel",13],["T_NS_SEPARATOR","\\",13],["T_STRING","Db",13],["T_NS_SEPARATOR","\\",13],["T_STRING","Collection",13],["T_NS_SEPARATOR","\\",13],["T_STRING","AbstractCollection",13],["T_WHITESPACE","\n",13],"{",["T_WHITESPACE","\n    ",14],["T_DOC_COMMENT","\/**\n     * Product object\n     *\n     * @var \\Magento\\Catalog\\Model\\Product\n     *\/",15],["T_WHITESPACE","\n    ",19],["T_PROTECTED","protected",20],["T_WHITESPACE"," ",20],["T_VARIABLE","$_product",20],";",["T_WHITESPACE","\n\n    ",20],["T_DOC_COMMENT","\/**\n     * Product Link model class\n     *\n     * @var \\Magento\\Catalog\\Model\\Product\\Link\n     *\/",22],["T_WHITESPACE","\n    ",26],["T_PROTECTED","protected",27],["T_WHITESPACE"," ",27],["T_VARIABLE","$_linkModel",27],";",["T_WHITESPACE","\n\n    ",27],["T_DOC_COMMENT","\/**\n     * Product Link Type identifier\n     *\n     * @var \\Magento\\Catalog\\Model\\Product\\Type\n     *\/",29],["T_WHITESPACE","\n    ",33],["T_PROTECTED","protected",34],["T_WHITESPACE"," ",34],["T_VARIABLE","$_linkTypeId",34],";",["T_WHITESPACE","\n\n    ",34],["T_DOC_COMMENT","\/**\n     * Resource initialization\n     *\n     * @return void\n     *\/",36],["T_WHITESPACE","\n    ",40],["T_PROTECTED","protected",41],["T_WHITESPACE"," ",41],["T_FUNCTION","function",41],["T_WHITESPACE"," ",41],["T_STRING","_construct",41],"(",")",["T_WHITESPACE","\n    ",41],"{",["T_WHITESPACE","\n        ",42],["T_VARIABLE","$this",43],["T_OBJECT_OPERATOR","->",43],["T_STRING","_init",43],"(",["T_WHITESPACE","\n            ",43],["T_NS_SEPARATOR","\\",44],["T_STRING","Magento",44],["T_NS_SEPARATOR","\\",44],["T_STRING","Catalog",44],["T_NS_SEPARATOR","\\",44],["T_STRING","Model",44],["T_NS_SEPARATOR","\\",44],["T_STRING","Product",44],["T_NS_SEPARATOR","\\",44],["T_STRING","Link",44],["T_DOUBLE_COLON","::",44],["T_CLASS","class",44],",",["T_WHITESPACE","\n            ",44],["T_NS_SEPARATOR","\\",45],["T_STRING","Magento",45],["T_NS_SEPARATOR","\\",45],["T_STRING","Catalog",45],["T_NS_SEPARATOR","\\",45],["T_STRING","Model",45],["T_NS_SEPARATOR","\\",45],["T_STRING","ResourceModel",45],["T_NS_SEPARATOR","\\",45],["T_STRING","Product",45],["T_NS_SEPARATOR","\\",45],["T_STRING","Link",45],["T_DOUBLE_COLON","::",45],["T_CLASS","class",45],["T_WHITESPACE","\n        ",45],")",";",["T_WHITESPACE","\n    ",46],"}",["T_WHITESPACE","\n\n    ",47],["T_DOC_COMMENT","\/**\n     * Declare link model and initialize type attributes join\n     *\n     * @param \\Magento\\Catalog\\Model\\Product\\Link $linkModel\n     * @return $this\n     *\/",49],["T_WHITESPACE","\n    ",54],["T_PUBLIC","public",55],["T_WHITESPACE"," ",55],["T_FUNCTION","function",55],["T_WHITESPACE"," ",55],["T_STRING","setLinkModel",55],"(",["T_NS_SEPARATOR","\\",55],["T_STRING","Magento",55],["T_NS_SEPARATOR","\\",55],["T_STRING","Catalog",55],["T_NS_SEPARATOR","\\",55],["T_STRING","Model",55],["T_NS_SEPARATOR","\\",55],["T_STRING","Product",55],["T_NS_SEPARATOR","\\",55],["T_STRING","Link",55],["T_WHITESPACE"," ",55],["T_VARIABLE","$linkModel",55],")",["T_WHITESPACE","\n    ",55],"{",["T_WHITESPACE","\n        ",56],["T_VARIABLE","$this",57],["T_OBJECT_OPERATOR","->",57],["T_STRING","_linkModel",57],["T_WHITESPACE"," ",57],"=",["T_WHITESPACE"," ",57],["T_VARIABLE","$linkModel",57],";",["T_WHITESPACE","\n        ",57],["T_IF","if",58],["T_WHITESPACE"," ",58],"(",["T_VARIABLE","$linkModel",58],["T_OBJECT_OPERATOR","->",58],["T_STRING","hasLinkTypeId",58],"(",")",")",["T_WHITESPACE"," ",58],"{",["T_WHITESPACE","\n            ",58],["T_VARIABLE","$this",59],["T_OBJECT_OPERATOR","->",59],["T_STRING","_linkTypeId",59],["T_WHITESPACE"," ",59],"=",["T_WHITESPACE"," ",59],["T_VARIABLE","$linkModel",59],["T_OBJECT_OPERATOR","->",59],["T_STRING","getLinkTypeId",59],"(",")",";",["T_WHITESPACE","\n        ",59],"}",["T_WHITESPACE","\n        ",60],["T_RETURN","return",61],["T_WHITESPACE"," ",61],["T_VARIABLE","$this",61],";",["T_WHITESPACE","\n    ",61],"}",["T_WHITESPACE","\n\n    ",62],["T_DOC_COMMENT","\/**\n     * Retrieve collection link model\n     *\n     * @return \\Magento\\Catalog\\Model\\Product\\Link\n     *\/",64],["T_WHITESPACE","\n    ",68],["T_PUBLIC","public",69],["T_WHITESPACE"," ",69],["T_FUNCTION","function",69],["T_WHITESPACE"," ",69],["T_STRING","getLinkModel",69],"(",")",["T_WHITESPACE","\n    ",69],"{",["T_WHITESPACE","\n        ",70],["T_RETURN","return",71],["T_WHITESPACE"," ",71],["T_VARIABLE","$this",71],["T_OBJECT_OPERATOR","->",71],["T_STRING","_linkModel",71],";",["T_WHITESPACE","\n    ",71],"}",["T_WHITESPACE","\n\n    ",72],["T_DOC_COMMENT","\/**\n     * Initialize collection parent product and add limitation join\n     *\n     * @param \\Magento\\Catalog\\Model\\Product $product\n     * @return $this\n     *\/",74],["T_WHITESPACE","\n    ",79],["T_PUBLIC","public",80],["T_WHITESPACE"," ",80],["T_FUNCTION","function",80],["T_WHITESPACE"," ",80],["T_STRING","setProduct",80],"(",["T_NS_SEPARATOR","\\",80],["T_STRING","Magento",80],["T_NS_SEPARATOR","\\",80],["T_STRING","Catalog",80],["T_NS_SEPARATOR","\\",80],["T_STRING","Model",80],["T_NS_SEPARATOR","\\",80],["T_STRING","Product",80],["T_WHITESPACE"," ",80],["T_VARIABLE","$product",80],")",["T_WHITESPACE","\n    ",80],"{",["T_WHITESPACE","\n        ",81],["T_VARIABLE","$this",82],["T_OBJECT_OPERATOR","->",82],["T_STRING","_product",82],["T_WHITESPACE"," ",82],"=",["T_WHITESPACE"," ",82],["T_VARIABLE","$product",82],";",["T_WHITESPACE","\n        ",82],["T_RETURN","return",83],["T_WHITESPACE"," ",83],["T_VARIABLE","$this",83],";",["T_WHITESPACE","\n    ",83],"}",["T_WHITESPACE","\n\n    ",84],["T_DOC_COMMENT","\/**\n     * Retrieve collection base product object\n     *\n     * @return \\Magento\\Catalog\\Model\\Product\n     *\/",86],["T_WHITESPACE","\n    ",90],["T_PUBLIC","public",91],["T_WHITESPACE"," ",91],["T_FUNCTION","function",91],["T_WHITESPACE"," ",91],["T_STRING","getProduct",91],"(",")",["T_WHITESPACE","\n    ",91],"{",["T_WHITESPACE","\n        ",92],["T_RETURN","return",93],["T_WHITESPACE"," ",93],["T_VARIABLE","$this",93],["T_OBJECT_OPERATOR","->",93],["T_STRING","_product",93],";",["T_WHITESPACE","\n    ",93],"}",["T_WHITESPACE","\n\n    ",94],["T_DOC_COMMENT","\/**\n     * Add link's type to filter\n     *\n     * @return $this\n     *\/",96],["T_WHITESPACE","\n    ",100],["T_PUBLIC","public",101],["T_WHITESPACE"," ",101],["T_FUNCTION","function",101],["T_WHITESPACE"," ",101],["T_STRING","addLinkTypeIdFilter",101],"(",")",["T_WHITESPACE","\n    ",101],"{",["T_WHITESPACE","\n        ",102],["T_IF","if",103],["T_WHITESPACE"," ",103],"(",["T_VARIABLE","$this",103],["T_OBJECT_OPERATOR","->",103],["T_STRING","_linkTypeId",103],")",["T_WHITESPACE"," ",103],"{",["T_WHITESPACE","\n            ",103],["T_VARIABLE","$this",104],["T_OBJECT_OPERATOR","->",104],["T_STRING","addFieldToFilter",104],"(",["T_CONSTANT_ENCAPSED_STRING","'link_type_id'",104],",",["T_WHITESPACE"," ",104],"[",["T_CONSTANT_ENCAPSED_STRING","'eq'",104],["T_WHITESPACE"," ",104],["T_DOUBLE_ARROW","=>",104],["T_WHITESPACE"," ",104],["T_VARIABLE","$this",104],["T_OBJECT_OPERATOR","->",104],["T_STRING","_linkTypeId",104],"]",")",";",["T_WHITESPACE","\n        ",104],"}",["T_WHITESPACE","\n        ",105],["T_RETURN","return",106],["T_WHITESPACE"," ",106],["T_VARIABLE","$this",106],";",["T_WHITESPACE","\n    ",106],"}",["T_WHITESPACE","\n\n    ",107],["T_DOC_COMMENT","\/**\n     * Add product to filter\n     *\n     * @return $this\n     *\/",109],["T_WHITESPACE","\n    ",113],["T_PUBLIC","public",114],["T_WHITESPACE"," ",114],["T_FUNCTION","function",114],["T_WHITESPACE"," ",114],["T_STRING","addProductIdFilter",114],"(",")",["T_WHITESPACE","\n    ",114],"{",["T_WHITESPACE","\n        ",115],["T_IF","if",116],["T_WHITESPACE"," ",116],"(",["T_VARIABLE","$this",116],["T_OBJECT_OPERATOR","->",116],["T_STRING","getProduct",116],"(",")",["T_WHITESPACE"," ",116],["T_BOOLEAN_AND","&&",116],["T_WHITESPACE"," ",116],["T_VARIABLE","$this",116],["T_OBJECT_OPERATOR","->",116],["T_STRING","getProduct",116],"(",")",["T_OBJECT_OPERATOR","->",116],["T_STRING","getId",116],"(",")",")",["T_WHITESPACE"," ",116],"{",["T_WHITESPACE","\n            ",116],["T_VARIABLE","$this",117],["T_OBJECT_OPERATOR","->",117],["T_STRING","addFieldToFilter",117],"(",["T_CONSTANT_ENCAPSED_STRING","'product_id'",117],",",["T_WHITESPACE"," ",117],"[",["T_CONSTANT_ENCAPSED_STRING","'eq'",117],["T_WHITESPACE"," ",117],["T_DOUBLE_ARROW","=>",117],["T_WHITESPACE"," ",117],["T_VARIABLE","$this",117],["T_OBJECT_OPERATOR","->",117],["T_STRING","getProduct",117],"(",")",["T_OBJECT_OPERATOR","->",117],["T_STRING","getId",117],"(",")","]",")",";",["T_WHITESPACE","\n        ",117],"}",["T_WHITESPACE","\n        ",118],["T_RETURN","return",119],["T_WHITESPACE"," ",119],["T_VARIABLE","$this",119],";",["T_WHITESPACE","\n    ",119],"}",["T_WHITESPACE","\n\n    ",120],["T_DOC_COMMENT","\/**\n     * Join attributes\n     *\n     * @return $this\n     *\/",122],["T_WHITESPACE","\n    ",126],["T_PUBLIC","public",127],["T_WHITESPACE"," ",127],["T_FUNCTION","function",127],["T_WHITESPACE"," ",127],["T_STRING","joinAttributes",127],"(",")",["T_WHITESPACE","\n    ",127],"{",["T_WHITESPACE","\n        ",128],["T_IF","if",129],["T_WHITESPACE"," ",129],"(","!",["T_VARIABLE","$this",129],["T_OBJECT_OPERATOR","->",129],["T_STRING","getLinkModel",129],"(",")",")",["T_WHITESPACE"," ",129],"{",["T_WHITESPACE","\n            ",129],["T_RETURN","return",130],["T_WHITESPACE"," ",130],["T_VARIABLE","$this",130],";",["T_WHITESPACE","\n        ",130],"}",["T_WHITESPACE","\n        ",131],["T_VARIABLE","$attributes",132],["T_WHITESPACE"," ",132],"=",["T_WHITESPACE"," ",132],["T_VARIABLE","$this",132],["T_OBJECT_OPERATOR","->",132],["T_STRING","getLinkModel",132],"(",")",["T_OBJECT_OPERATOR","->",132],["T_STRING","getAttributes",132],"(",")",";",["T_WHITESPACE","\n        ",132],["T_VARIABLE","$connection",133],["T_WHITESPACE"," ",133],"=",["T_WHITESPACE"," ",133],["T_VARIABLE","$this",133],["T_OBJECT_OPERATOR","->",133],["T_STRING","getConnection",133],"(",")",";",["T_WHITESPACE","\n        ",133],["T_FOREACH","foreach",134],["T_WHITESPACE"," ",134],"(",["T_VARIABLE","$attributes",134],["T_WHITESPACE"," ",134],["T_AS","as",134],["T_WHITESPACE"," ",134],["T_VARIABLE","$attribute",134],")",["T_WHITESPACE"," ",134],"{",["T_WHITESPACE","\n            ",134],["T_VARIABLE","$table",135],["T_WHITESPACE"," ",135],"=",["T_WHITESPACE"," ",135],["T_VARIABLE","$this",135],["T_OBJECT_OPERATOR","->",135],["T_STRING","getLinkModel",135],"(",")",["T_OBJECT_OPERATOR","->",135],["T_STRING","getAttributeTypeTable",135],"(",["T_VARIABLE","$attribute",135],"[",["T_CONSTANT_ENCAPSED_STRING","'type'",135],"]",")",";",["T_WHITESPACE","\n            ",135],["T_VARIABLE","$alias",136],["T_WHITESPACE"," ",136],"=",["T_WHITESPACE"," ",136],["T_STRING","sprintf",136],"(",["T_CONSTANT_ENCAPSED_STRING","'link_attribute_%s_%s'",136],",",["T_WHITESPACE"," ",136],["T_VARIABLE","$attribute",136],"[",["T_CONSTANT_ENCAPSED_STRING","'code'",136],"]",",",["T_WHITESPACE"," ",136],["T_VARIABLE","$attribute",136],"[",["T_CONSTANT_ENCAPSED_STRING","'type'",136],"]",")",";",["T_WHITESPACE","\n\n            ",136],["T_VARIABLE","$aliasInCondition",138],["T_WHITESPACE"," ",138],"=",["T_WHITESPACE"," ",138],["T_VARIABLE","$connection",138],["T_OBJECT_OPERATOR","->",138],["T_STRING","quoteColumnAs",138],"(",["T_VARIABLE","$alias",138],",",["T_WHITESPACE"," ",138],["T_STRING","null",138],")",";",["T_WHITESPACE","\n            ",138],["T_VARIABLE","$this",139],["T_OBJECT_OPERATOR","->",139],["T_STRING","getSelect",139],"(",")",["T_OBJECT_OPERATOR","->",139],["T_STRING","joinLeft",139],"(",["T_WHITESPACE","\n                ",139],"[",["T_VARIABLE","$alias",140],["T_WHITESPACE"," ",140],["T_DOUBLE_ARROW","=>",140],["T_WHITESPACE"," ",140],["T_VARIABLE","$table",140],"]",",",["T_WHITESPACE","\n                ",140],["T_VARIABLE","$aliasInCondition",141],["T_WHITESPACE"," ",141],".",["T_WHITESPACE","\n                ",141],["T_CONSTANT_ENCAPSED_STRING","'.link_id = main_table.link_id AND '",142],["T_WHITESPACE"," ",142],".",["T_WHITESPACE","\n                ",142],["T_VARIABLE","$aliasInCondition",143],["T_WHITESPACE"," ",143],".",["T_WHITESPACE","\n                ",143],["T_CONSTANT_ENCAPSED_STRING","'.product_link_attribute_id = '",144],["T_WHITESPACE"," ",144],".",["T_WHITESPACE","\n                ",144],["T_INT_CAST","(int)",145],["T_VARIABLE","$attribute",145],"[",["T_CONSTANT_ENCAPSED_STRING","'id'",145],"]",",",["T_WHITESPACE","\n                ",145],"[",["T_VARIABLE","$attribute",146],"[",["T_CONSTANT_ENCAPSED_STRING","'code'",146],"]",["T_WHITESPACE"," ",146],["T_DOUBLE_ARROW","=>",146],["T_WHITESPACE"," ",146],["T_CONSTANT_ENCAPSED_STRING","'value'",146],"]",["T_WHITESPACE","\n            ",146],")",";",["T_WHITESPACE","\n        ",147],"}",["T_WHITESPACE","\n\n        ",148],["T_RETURN","return",150],["T_WHITESPACE"," ",150],["T_VARIABLE","$this",150],";",["T_WHITESPACE","\n    ",150],"}",["T_WHITESPACE","\n",151],"}",["T_WHITESPACE","\n",152]]
[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Copyright \u00c2\u00a9 2013-2017 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n *\/",2],["T_WHITESPACE","\n\n",5],["T_NAMESPACE","namespace",7],["T_WHITESPACE"," ",7],["T_STRING","Magento",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Catalog",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Model",7],["T_NS_SEPARATOR","\\",7],["T_STRING","ProductLink",7],";",["T_WHITESPACE","\n\n",7],["T_USE","use",9],["T_WHITESPACE"," ",9],["T_STRING","Magento",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Catalog",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Api",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Data",9],";",["T_WHITESPACE","\n",9],["T_USE","use",10],["T_WHITESPACE"," ",10],["T_STRING","Magento",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Framework",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Exception",10],["T_NS_SEPARATOR","\\",10],["T_STRING","CouldNotSaveException",10],";",["T_WHITESPACE","\n",10],["T_USE","use",11],["T_WHITESPACE"," ",11],["T_STRING","Magento",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Framework",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Exception",11],["T_NS_SEPARATOR","\\",11],["T_STRING","NoSuchEntityException",11],";",["T_WHITESPACE","\n",11],["T_USE","use",12],["T_WHITESPACE"," ",12],["T_STRING","Magento",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Framework",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Exception",12],["T_NS_SEPARATOR","\\",12],["T_STRING","InputException",12],";",["T_WHITESPACE","\n\n",12],["T_CLASS","class",14],["T_WHITESPACE"," ",14],["T_STRING","Management",14],["T_WHITESPACE"," ",14],["T_IMPLEMENTS","implements",14],["T_WHITESPACE"," ",14],["T_NS_SEPARATOR","\\",14],["T_STRING","Magento",14],["T_NS_SEPARATOR","\\",14],["T_STRING","Catalog",14],["T_NS_SEPARATOR","\\",14],["T_STRING","Api",14],["T_NS_SEPARATOR","\\",14],["T_STRING","ProductLinkManagementInterface",14],["T_WHITESPACE","\n",14],"{",["T_WHITESPACE","\n    ",15],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Catalog\\Api\\ProductRepositoryInterface\n     *\/",16],["T_WHITESPACE","\n    ",18],["T_PROTECTED","protected",19],["T_WHITESPACE"," ",19],["T_VARIABLE","$productRepository",19],";",["T_WHITESPACE","\n\n    ",19],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Catalog\\Model\\Product\\LinkTypeProvider\n     *\/",21],["T_WHITESPACE","\n    ",23],["T_PROTECTED","protected",24],["T_WHITESPACE"," ",24],["T_VARIABLE","$linkTypeProvider",24],";",["T_WHITESPACE","\n\n    ",24],["T_DOC_COMMENT","\/**\n     * @param \\Magento\\Catalog\\Api\\ProductRepositoryInterface $productRepository\n     * @param \\Magento\\Catalog\\Model\\Product\\LinkTypeProvider $linkTypeProvider\n     *\/",26],["T_WHITESPACE","\n    ",29],["T_PUBLIC","public",30],["T_WHITESPACE"," ",30],["T_FUNCTION","function",30],["T_WHITESPACE"," ",30],["T_STRING","__construct",30],"(",["T_WHITESPACE","\n        ",30],["T_NS_SEPARATOR","\\",31],["T_STRING","Magento",31],["T_NS_SEPARATOR","\\",31],["T_STRING","Catalog",31],["T_NS_SEPARATOR","\\",31],["T_STRING","Api",31],["T_NS_SEPARATOR","\\",31],["T_STRING","ProductRepositoryInterface",31],["T_WHITESPACE"," ",31],["T_VARIABLE","$productRepository",31],",",["T_WHITESPACE","\n        ",31],["T_NS_SEPARATOR","\\",32],["T_STRING","Magento",32],["T_NS_SEPARATOR","\\",32],["T_STRING","Catalog",32],["T_NS_SEPARATOR","\\",32],["T_STRING","Model",32],["T_NS_SEPARATOR","\\",32],["T_STRING","Product",32],["T_NS_SEPARATOR","\\",32],["T_STRING","LinkTypeProvider",32],["T_WHITESPACE"," ",32],["T_VARIABLE","$linkTypeProvider",32],["T_WHITESPACE","\n    ",32],")",["T_WHITESPACE"," ",33],"{",["T_WHITESPACE","\n        ",33],["T_VARIABLE","$this",34],["T_OBJECT_OPERATOR","->",34],["T_STRING","productRepository",34],["T_WHITESPACE"," ",34],"=",["T_WHITESPACE"," ",34],["T_VARIABLE","$productRepository",34],";",["T_WHITESPACE","\n        ",34],["T_VARIABLE","$this",35],["T_OBJECT_OPERATOR","->",35],["T_STRING","linkTypeProvider",35],["T_WHITESPACE"," ",35],"=",["T_WHITESPACE"," ",35],["T_VARIABLE","$linkTypeProvider",35],";",["T_WHITESPACE","\n    ",35],"}",["T_WHITESPACE","\n\n    ",36],["T_DOC_COMMENT","\/**\n     * {@inheritdoc}\n     *\/",38],["T_WHITESPACE","\n    ",40],["T_PUBLIC","public",41],["T_WHITESPACE"," ",41],["T_FUNCTION","function",41],["T_WHITESPACE"," ",41],["T_STRING","getLinkedItemsByType",41],"(",["T_VARIABLE","$sku",41],",",["T_WHITESPACE"," ",41],["T_VARIABLE","$type",41],")",["T_WHITESPACE","\n    ",41],"{",["T_WHITESPACE","\n        ",42],["T_VARIABLE","$output",43],["T_WHITESPACE"," ",43],"=",["T_WHITESPACE"," ",43],"[","]",";",["T_WHITESPACE","\n\n        ",43],["T_VARIABLE","$linkTypes",45],["T_WHITESPACE"," ",45],"=",["T_WHITESPACE"," ",45],["T_VARIABLE","$this",45],["T_OBJECT_OPERATOR","->",45],["T_STRING","linkTypeProvider",45],["T_OBJECT_OPERATOR","->",45],["T_STRING","getLinkTypes",45],"(",")",";",["T_WHITESPACE","\n\n        ",45],["T_IF","if",47],["T_WHITESPACE"," ",47],"(","!",["T_ISSET","isset",47],"(",["T_VARIABLE","$linkTypes",47],"[",["T_VARIABLE","$type",47],"]",")",")",["T_WHITESPACE"," ",47],"{",["T_WHITESPACE","\n            ",47],["T_THROW","throw",48],["T_WHITESPACE"," ",48],["T_NEW","new",48],["T_WHITESPACE"," ",48],["T_STRING","NoSuchEntityException",48],"(",["T_STRING","__",48],"(",["T_CONSTANT_ENCAPSED_STRING","'Unknown link type: %1'",48],",",["T_WHITESPACE"," ",48],["T_STRING_CAST","(string)",48],["T_VARIABLE","$type",48],")",")",";",["T_WHITESPACE","\n        ",48],"}",["T_WHITESPACE","\n        ",49],["T_VARIABLE","$product",50],["T_WHITESPACE"," ",50],"=",["T_WHITESPACE"," ",50],["T_VARIABLE","$this",50],["T_OBJECT_OPERATOR","->",50],["T_STRING","productRepository",50],["T_OBJECT_OPERATOR","->",50],["T_STRING","get",50],"(",["T_VARIABLE","$sku",50],")",";",["T_WHITESPACE","\n        ",50],["T_VARIABLE","$links",51],["T_WHITESPACE"," ",51],"=",["T_WHITESPACE"," ",51],["T_VARIABLE","$product",51],["T_OBJECT_OPERATOR","->",51],["T_STRING","getProductLinks",51],"(",")",";",["T_WHITESPACE","\n\n        ",51],["T_COMMENT","\/\/ Only return the links of type specified\n",53],["T_WHITESPACE","        ",54],["T_FOREACH","foreach",54],["T_WHITESPACE"," ",54],"(",["T_VARIABLE","$links",54],["T_WHITESPACE"," ",54],["T_AS","as",54],["T_WHITESPACE"," ",54],["T_VARIABLE","$link",54],")",["T_WHITESPACE"," ",54],"{",["T_WHITESPACE","\n            ",54],["T_IF","if",55],["T_WHITESPACE"," ",55],"(",["T_VARIABLE","$link",55],["T_OBJECT_OPERATOR","->",55],["T_STRING","getLinkType",55],"(",")",["T_WHITESPACE"," ",55],["T_IS_EQUAL","==",55],["T_WHITESPACE"," ",55],["T_VARIABLE","$type",55],")",["T_WHITESPACE"," ",55],"{",["T_WHITESPACE","\n                ",55],["T_VARIABLE","$output",56],"[","]",["T_WHITESPACE"," ",56],"=",["T_WHITESPACE"," ",56],["T_VARIABLE","$link",56],";",["T_WHITESPACE","\n            ",56],"}",["T_WHITESPACE","\n        ",57],"}",["T_WHITESPACE","\n\n        ",58],["T_RETURN","return",60],["T_WHITESPACE"," ",60],["T_VARIABLE","$output",60],";",["T_WHITESPACE","\n    ",60],"}",["T_WHITESPACE","\n\n    ",61],["T_DOC_COMMENT","\/**\n     * {@inheritdoc}\n     *\/",63],["T_WHITESPACE","\n    ",65],["T_PUBLIC","public",66],["T_WHITESPACE"," ",66],["T_FUNCTION","function",66],["T_WHITESPACE"," ",66],["T_STRING","setProductLinks",66],"(",["T_VARIABLE","$sku",66],",",["T_WHITESPACE"," ",66],["T_ARRAY","array",66],["T_WHITESPACE"," ",66],["T_VARIABLE","$items",66],")",["T_WHITESPACE","\n    ",66],"{",["T_WHITESPACE","\n        ",67],["T_VARIABLE","$linkTypes",68],["T_WHITESPACE"," ",68],"=",["T_WHITESPACE"," ",68],["T_VARIABLE","$this",68],["T_OBJECT_OPERATOR","->",68],["T_STRING","linkTypeProvider",68],["T_OBJECT_OPERATOR","->",68],["T_STRING","getLinkTypes",68],"(",")",";",["T_WHITESPACE","\n\n        ",68],["T_COMMENT","\/\/ Check if product link type is set and correct\n",70],["T_WHITESPACE","        ",71],["T_IF","if",71],["T_WHITESPACE"," ",71],"(","!",["T_EMPTY","empty",71],"(",["T_VARIABLE","$items",71],")",")",["T_WHITESPACE"," ",71],"{",["T_WHITESPACE","\n            ",71],["T_FOREACH","foreach",72],["T_WHITESPACE"," ",72],"(",["T_VARIABLE","$items",72],["T_WHITESPACE"," ",72],["T_AS","as",72],["T_WHITESPACE"," ",72],["T_VARIABLE","$newLink",72],")",["T_WHITESPACE"," ",72],"{",["T_WHITESPACE","\n                ",72],["T_VARIABLE","$type",73],["T_WHITESPACE"," ",73],"=",["T_WHITESPACE"," ",73],["T_VARIABLE","$newLink",73],["T_OBJECT_OPERATOR","->",73],["T_STRING","getLinkType",73],"(",")",";",["T_WHITESPACE","\n                ",73],["T_IF","if",74],["T_WHITESPACE"," ",74],"(",["T_VARIABLE","$type",74],["T_WHITESPACE"," ",74],["T_IS_EQUAL","==",74],["T_WHITESPACE"," ",74],["T_STRING","null",74],")",["T_WHITESPACE"," ",74],"{",["T_WHITESPACE","\n                    ",74],["T_THROW","throw",75],["T_WHITESPACE"," ",75],["T_STRING","InputException",75],["T_DOUBLE_COLON","::",75],["T_STRING","requiredField",75],"(",["T_CONSTANT_ENCAPSED_STRING","\"linkType\"",75],")",";",["T_WHITESPACE","\n                ",75],"}",["T_WHITESPACE","\n                ",76],["T_IF","if",77],["T_WHITESPACE"," ",77],"(","!",["T_ISSET","isset",77],"(",["T_VARIABLE","$linkTypes",77],"[",["T_VARIABLE","$type",77],"]",")",")",["T_WHITESPACE"," ",77],"{",["T_WHITESPACE","\n                    ",77],["T_THROW","throw",78],["T_WHITESPACE"," ",78],["T_NEW","new",78],["T_WHITESPACE"," ",78],["T_STRING","NoSuchEntityException",78],"(",["T_WHITESPACE","\n                        ",78],["T_STRING","__",79],"(",["T_CONSTANT_ENCAPSED_STRING","'Provided link type \"%1\" does not exist'",79],",",["T_WHITESPACE"," ",79],["T_VARIABLE","$type",79],")",["T_WHITESPACE","\n                    ",79],")",";",["T_WHITESPACE","\n                ",80],"}",["T_WHITESPACE","\n            ",81],"}",["T_WHITESPACE","\n        ",82],"}",["T_WHITESPACE","\n\n        ",83],["T_VARIABLE","$product",85],["T_WHITESPACE"," ",85],"=",["T_WHITESPACE"," ",85],["T_VARIABLE","$this",85],["T_OBJECT_OPERATOR","->",85],["T_STRING","productRepository",85],["T_OBJECT_OPERATOR","->",85],["T_STRING","get",85],"(",["T_VARIABLE","$sku",85],")",";",["T_WHITESPACE","\n\n        ",85],["T_COMMENT","\/\/ Replace only links of the specified type\n",87],["T_WHITESPACE","        ",88],["T_VARIABLE","$existingLinks",88],["T_WHITESPACE"," ",88],"=",["T_WHITESPACE"," ",88],["T_VARIABLE","$product",88],["T_OBJECT_OPERATOR","->",88],["T_STRING","getProductLinks",88],"(",")",";",["T_WHITESPACE","\n        ",88],["T_VARIABLE","$newLinks",89],["T_WHITESPACE"," ",89],"=",["T_WHITESPACE"," ",89],"[","]",";",["T_WHITESPACE","\n        ",89],["T_IF","if",90],["T_WHITESPACE"," ",90],"(","!",["T_EMPTY","empty",90],"(",["T_VARIABLE","$existingLinks",90],")",")",["T_WHITESPACE"," ",90],"{",["T_WHITESPACE","\n            ",90],["T_FOREACH","foreach",91],["T_WHITESPACE"," ",91],"(",["T_VARIABLE","$existingLinks",91],["T_WHITESPACE"," ",91],["T_AS","as",91],["T_WHITESPACE"," ",91],["T_VARIABLE","$link",91],")",["T_WHITESPACE"," ",91],"{",["T_WHITESPACE","\n                ",91],["T_IF","if",92],["T_WHITESPACE"," ",92],"(",["T_VARIABLE","$link",92],["T_OBJECT_OPERATOR","->",92],["T_STRING","getLinkType",92],"(",")",["T_WHITESPACE"," ",92],["T_IS_NOT_EQUAL","!=",92],["T_WHITESPACE"," ",92],["T_VARIABLE","$type",92],")",["T_WHITESPACE"," ",92],"{",["T_WHITESPACE","\n                    ",92],["T_VARIABLE","$newLinks",93],"[","]",["T_WHITESPACE"," ",93],"=",["T_WHITESPACE"," ",93],["T_VARIABLE","$link",93],";",["T_WHITESPACE","\n                ",93],"}",["T_WHITESPACE","\n            ",94],"}",["T_WHITESPACE","\n            ",95],["T_VARIABLE","$newLinks",96],["T_WHITESPACE"," ",96],"=",["T_WHITESPACE"," ",96],["T_STRING","array_merge",96],"(",["T_VARIABLE","$newLinks",96],",",["T_WHITESPACE"," ",96],["T_VARIABLE","$items",96],")",";",["T_WHITESPACE","\n        ",96],"}",["T_WHITESPACE"," ",97],["T_ELSE","else",97],["T_WHITESPACE"," ",97],"{",["T_WHITESPACE","\n            ",97],["T_VARIABLE","$newLinks",98],["T_WHITESPACE"," ",98],"=",["T_WHITESPACE"," ",98],["T_VARIABLE","$items",98],";",["T_WHITESPACE","\n        ",98],"}",["T_WHITESPACE","\n        ",99],["T_VARIABLE","$product",100],["T_OBJECT_OPERATOR","->",100],["T_STRING","setProductLinks",100],"(",["T_VARIABLE","$newLinks",100],")",";",["T_WHITESPACE","\n        ",100],["T_TRY","try",101],["T_WHITESPACE"," ",101],"{",["T_WHITESPACE","\n            ",101],["T_VARIABLE","$this",102],["T_OBJECT_OPERATOR","->",102],["T_STRING","productRepository",102],["T_OBJECT_OPERATOR","->",102],["T_STRING","save",102],"(",["T_VARIABLE","$product",102],")",";",["T_WHITESPACE","\n        ",102],"}",["T_WHITESPACE"," ",103],["T_CATCH","catch",103],["T_WHITESPACE"," ",103],"(",["T_NS_SEPARATOR","\\",103],["T_STRING","Exception",103],["T_WHITESPACE"," ",103],["T_VARIABLE","$exception",103],")",["T_WHITESPACE"," ",103],"{",["T_WHITESPACE","\n            ",103],["T_THROW","throw",104],["T_WHITESPACE"," ",104],["T_NEW","new",104],["T_WHITESPACE"," ",104],["T_STRING","CouldNotSaveException",104],"(",["T_STRING","__",104],"(",["T_CONSTANT_ENCAPSED_STRING","'Invalid data provided for linked products'",104],")",")",";",["T_WHITESPACE","\n        ",104],"}",["T_WHITESPACE","\n\n        ",105],["T_RETURN","return",107],["T_WHITESPACE"," ",107],["T_STRING","true",107],";",["T_WHITESPACE","\n    ",107],"}",["T_WHITESPACE","\n",108],"}",["T_WHITESPACE","\n",109]]
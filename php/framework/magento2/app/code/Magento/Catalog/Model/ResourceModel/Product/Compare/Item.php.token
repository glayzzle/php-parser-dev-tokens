[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Copyright \u00c2\u00a9 2013-2017 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n *\/",2],["T_WHITESPACE","\n",5],["T_NAMESPACE","namespace",6],["T_WHITESPACE"," ",6],["T_STRING","Magento",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Catalog",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Model",6],["T_NS_SEPARATOR","\\",6],["T_STRING","ResourceModel",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Product",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Compare",6],";",["T_WHITESPACE","\n\n",6],["T_DOC_COMMENT","\/**\n * Catalog compare item resource model\n *\n * @author      Magento Core Team <core@magentocommerce.com>\n *\/",8],["T_WHITESPACE","\n",12],["T_CLASS","class",13],["T_WHITESPACE"," ",13],["T_STRING","Item",13],["T_WHITESPACE"," ",13],["T_EXTENDS","extends",13],["T_WHITESPACE"," ",13],["T_NS_SEPARATOR","\\",13],["T_STRING","Magento",13],["T_NS_SEPARATOR","\\",13],["T_STRING","Framework",13],["T_NS_SEPARATOR","\\",13],["T_STRING","Model",13],["T_NS_SEPARATOR","\\",13],["T_STRING","ResourceModel",13],["T_NS_SEPARATOR","\\",13],["T_STRING","Db",13],["T_NS_SEPARATOR","\\",13],["T_STRING","AbstractDb",13],["T_WHITESPACE","\n",13],"{",["T_WHITESPACE","\n    ",14],["T_DOC_COMMENT","\/**\n     * Initialize connection\n     *\n     * @return void\n     *\/",15],["T_WHITESPACE","\n    ",19],["T_PROTECTED","protected",20],["T_WHITESPACE"," ",20],["T_FUNCTION","function",20],["T_WHITESPACE"," ",20],["T_STRING","_construct",20],"(",")",["T_WHITESPACE","\n    ",20],"{",["T_WHITESPACE","\n        ",21],["T_VARIABLE","$this",22],["T_OBJECT_OPERATOR","->",22],["T_STRING","_init",22],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog_compare_item'",22],",",["T_WHITESPACE"," ",22],["T_CONSTANT_ENCAPSED_STRING","'catalog_compare_item_id'",22],")",";",["T_WHITESPACE","\n    ",22],"}",["T_WHITESPACE","\n\n    ",23],["T_DOC_COMMENT","\/**\n     * Load object by product\n     *\n     * @param \\Magento\\Catalog\\Model\\Product\\Compare\\Item $object\n     * @param \\Magento\\Catalog\\Model\\Product|int $product\n     * @return bool\n     *\/",25],["T_WHITESPACE","\n    ",31],["T_PUBLIC","public",32],["T_WHITESPACE"," ",32],["T_FUNCTION","function",32],["T_WHITESPACE"," ",32],["T_STRING","loadByProduct",32],"(",["T_NS_SEPARATOR","\\",32],["T_STRING","Magento",32],["T_NS_SEPARATOR","\\",32],["T_STRING","Catalog",32],["T_NS_SEPARATOR","\\",32],["T_STRING","Model",32],["T_NS_SEPARATOR","\\",32],["T_STRING","Product",32],["T_NS_SEPARATOR","\\",32],["T_STRING","Compare",32],["T_NS_SEPARATOR","\\",32],["T_STRING","Item",32],["T_WHITESPACE"," ",32],["T_VARIABLE","$object",32],",",["T_WHITESPACE"," ",32],["T_VARIABLE","$product",32],")",["T_WHITESPACE","\n    ",32],"{",["T_WHITESPACE","\n        ",33],["T_VARIABLE","$connection",34],["T_WHITESPACE"," ",34],"=",["T_WHITESPACE"," ",34],["T_VARIABLE","$this",34],["T_OBJECT_OPERATOR","->",34],["T_STRING","getConnection",34],"(",")",";",["T_WHITESPACE","\n        ",34],["T_IF","if",35],["T_WHITESPACE"," ",35],"(",["T_VARIABLE","$product",35],["T_WHITESPACE"," ",35],["T_INSTANCEOF","instanceof",35],["T_WHITESPACE"," ",35],["T_NS_SEPARATOR","\\",35],["T_STRING","Magento",35],["T_NS_SEPARATOR","\\",35],["T_STRING","Catalog",35],["T_NS_SEPARATOR","\\",35],["T_STRING","Model",35],["T_NS_SEPARATOR","\\",35],["T_STRING","Product",35],")",["T_WHITESPACE"," ",35],"{",["T_WHITESPACE","\n            ",35],["T_VARIABLE","$productId",36],["T_WHITESPACE"," ",36],"=",["T_WHITESPACE"," ",36],["T_VARIABLE","$product",36],["T_OBJECT_OPERATOR","->",36],["T_STRING","getId",36],"(",")",";",["T_WHITESPACE","\n        ",36],"}",["T_WHITESPACE"," ",37],["T_ELSE","else",37],["T_WHITESPACE"," ",37],"{",["T_WHITESPACE","\n            ",37],["T_VARIABLE","$productId",38],["T_WHITESPACE"," ",38],"=",["T_WHITESPACE"," ",38],["T_VARIABLE","$product",38],";",["T_WHITESPACE","\n        ",38],"}",["T_WHITESPACE","\n        ",39],["T_VARIABLE","$select",40],["T_WHITESPACE"," ",40],"=",["T_WHITESPACE"," ",40],["T_VARIABLE","$connection",40],["T_OBJECT_OPERATOR","->",40],["T_STRING","select",40],"(",")",["T_OBJECT_OPERATOR","->",40],["T_STRING","from",40],"(",["T_VARIABLE","$this",40],["T_OBJECT_OPERATOR","->",40],["T_STRING","getMainTable",40],"(",")",")",["T_OBJECT_OPERATOR","->",40],["T_STRING","where",40],"(",["T_CONSTANT_ENCAPSED_STRING","'product_id = ?'",40],",",["T_WHITESPACE"," ",40],["T_INT_CAST","(int)",40],["T_VARIABLE","$productId",40],")",";",["T_WHITESPACE","\n\n        ",40],["T_IF","if",42],["T_WHITESPACE"," ",42],"(",["T_VARIABLE","$object",42],["T_OBJECT_OPERATOR","->",42],["T_STRING","getCustomerId",42],"(",")",")",["T_WHITESPACE"," ",42],"{",["T_WHITESPACE","\n            ",42],["T_VARIABLE","$select",43],["T_OBJECT_OPERATOR","->",43],["T_STRING","where",43],"(",["T_CONSTANT_ENCAPSED_STRING","'customer_id = ?'",43],",",["T_WHITESPACE"," ",43],["T_INT_CAST","(int)",43],["T_VARIABLE","$object",43],["T_OBJECT_OPERATOR","->",43],["T_STRING","getCustomerId",43],"(",")",")",";",["T_WHITESPACE","\n        ",43],"}",["T_WHITESPACE"," ",44],["T_ELSE","else",44],["T_WHITESPACE"," ",44],"{",["T_WHITESPACE","\n            ",44],["T_VARIABLE","$select",45],["T_OBJECT_OPERATOR","->",45],["T_STRING","where",45],"(",["T_CONSTANT_ENCAPSED_STRING","'visitor_id = ?'",45],",",["T_WHITESPACE"," ",45],["T_INT_CAST","(int)",45],["T_VARIABLE","$object",45],["T_OBJECT_OPERATOR","->",45],["T_STRING","getVisitorId",45],"(",")",")",";",["T_WHITESPACE","\n        ",45],"}",["T_WHITESPACE","\n\n        ",46],["T_VARIABLE","$data",48],["T_WHITESPACE"," ",48],"=",["T_WHITESPACE"," ",48],["T_VARIABLE","$connection",48],["T_OBJECT_OPERATOR","->",48],["T_STRING","fetchRow",48],"(",["T_VARIABLE","$select",48],")",";",["T_WHITESPACE","\n\n        ",48],["T_IF","if",50],["T_WHITESPACE"," ",50],"(","!",["T_VARIABLE","$data",50],")",["T_WHITESPACE"," ",50],"{",["T_WHITESPACE","\n            ",50],["T_RETURN","return",51],["T_WHITESPACE"," ",51],["T_STRING","false",51],";",["T_WHITESPACE","\n        ",51],"}",["T_WHITESPACE","\n\n        ",52],["T_VARIABLE","$object",54],["T_OBJECT_OPERATOR","->",54],["T_STRING","setData",54],"(",["T_VARIABLE","$data",54],")",";",["T_WHITESPACE","\n\n        ",54],["T_VARIABLE","$this",56],["T_OBJECT_OPERATOR","->",56],["T_STRING","_afterLoad",56],"(",["T_VARIABLE","$object",56],")",";",["T_WHITESPACE","\n        ",56],["T_RETURN","return",57],["T_WHITESPACE"," ",57],["T_STRING","true",57],";",["T_WHITESPACE","\n    ",57],"}",["T_WHITESPACE","\n\n    ",58],["T_DOC_COMMENT","\/**\n     * Resource retrieve count compare items\n     *\n     * @param int $customerId\n     * @param int $visitorId\n     * @return int\n     *\/",60],["T_WHITESPACE","\n    ",66],["T_PUBLIC","public",67],["T_WHITESPACE"," ",67],["T_FUNCTION","function",67],["T_WHITESPACE"," ",67],["T_STRING","getCount",67],"(",["T_VARIABLE","$customerId",67],",",["T_WHITESPACE"," ",67],["T_VARIABLE","$visitorId",67],")",["T_WHITESPACE","\n    ",67],"{",["T_WHITESPACE","\n        ",68],["T_VARIABLE","$bind",69],["T_WHITESPACE"," ",69],"=",["T_WHITESPACE"," ",69],"[",["T_CONSTANT_ENCAPSED_STRING","'visitore_id'",69],["T_WHITESPACE"," ",69],["T_DOUBLE_ARROW","=>",69],["T_WHITESPACE"," ",69],["T_INT_CAST","(int)",69],["T_VARIABLE","$visitorId",69],"]",";",["T_WHITESPACE","\n        ",69],["T_VARIABLE","$select",70],["T_WHITESPACE"," ",70],"=",["T_WHITESPACE"," ",70],["T_VARIABLE","$this",70],["T_OBJECT_OPERATOR","->",70],["T_STRING","getConnection",70],"(",")",["T_OBJECT_OPERATOR","->",70],["T_STRING","select",70],"(",")",["T_OBJECT_OPERATOR","->",70],["T_STRING","from",70],"(",["T_WHITESPACE","\n            ",70],["T_VARIABLE","$this",71],["T_OBJECT_OPERATOR","->",71],["T_STRING","getMainTable",71],"(",")",",",["T_WHITESPACE","\n            ",71],["T_CONSTANT_ENCAPSED_STRING","'COUNT(*)'",72],["T_WHITESPACE","\n        ",72],")",["T_OBJECT_OPERATOR","->",73],["T_STRING","where",73],"(",["T_WHITESPACE","\n            ",73],["T_CONSTANT_ENCAPSED_STRING","'visitor_id = :visitore_id'",74],["T_WHITESPACE","\n        ",74],")",";",["T_WHITESPACE","\n        ",75],["T_IF","if",76],["T_WHITESPACE"," ",76],"(",["T_VARIABLE","$customerId",76],")",["T_WHITESPACE"," ",76],"{",["T_WHITESPACE","\n            ",76],["T_VARIABLE","$bind",77],"[",["T_CONSTANT_ENCAPSED_STRING","'customer_id'",77],"]",["T_WHITESPACE"," ",77],"=",["T_WHITESPACE"," ",77],["T_INT_CAST","(int)",77],["T_VARIABLE","$customerId",77],";",["T_WHITESPACE","\n            ",77],["T_VARIABLE","$select",78],["T_OBJECT_OPERATOR","->",78],["T_STRING","where",78],"(",["T_CONSTANT_ENCAPSED_STRING","'customer_id = :customer_id'",78],")",";",["T_WHITESPACE","\n        ",78],"}",["T_WHITESPACE","\n        ",79],["T_RETURN","return",80],["T_WHITESPACE"," ",80],["T_VARIABLE","$this",80],["T_OBJECT_OPERATOR","->",80],["T_STRING","getConnection",80],"(",")",["T_OBJECT_OPERATOR","->",80],["T_STRING","fetchOne",80],"(",["T_VARIABLE","$select",80],",",["T_WHITESPACE"," ",80],["T_VARIABLE","$bind",80],")",";",["T_WHITESPACE","\n    ",80],"}",["T_WHITESPACE","\n\n    ",81],["T_DOC_COMMENT","\/**\n     * Clean compare table\n     *\n     * @return $this\n     *\/",83],["T_WHITESPACE","\n    ",87],["T_PUBLIC","public",88],["T_WHITESPACE"," ",88],["T_FUNCTION","function",88],["T_WHITESPACE"," ",88],["T_STRING","clean",88],"(",")",["T_WHITESPACE","\n    ",88],"{",["T_WHITESPACE","\n        ",89],["T_WHILE","while",90],["T_WHITESPACE"," ",90],"(",["T_STRING","true",90],")",["T_WHITESPACE"," ",90],"{",["T_WHITESPACE","\n            ",90],["T_VARIABLE","$select",91],["T_WHITESPACE"," ",91],"=",["T_WHITESPACE"," ",91],["T_VARIABLE","$this",91],["T_OBJECT_OPERATOR","->",91],["T_STRING","getConnection",91],"(",")",["T_OBJECT_OPERATOR","->",91],["T_STRING","select",91],"(",")",["T_OBJECT_OPERATOR","->",91],["T_STRING","from",91],"(",["T_WHITESPACE","\n                ",91],"[",["T_CONSTANT_ENCAPSED_STRING","'compare_table'",92],["T_WHITESPACE"," ",92],["T_DOUBLE_ARROW","=>",92],["T_WHITESPACE"," ",92],["T_VARIABLE","$this",92],["T_OBJECT_OPERATOR","->",92],["T_STRING","getMainTable",92],"(",")","]",",",["T_WHITESPACE","\n                ",92],"[",["T_CONSTANT_ENCAPSED_STRING","'catalog_compare_item_id'",93],"]",["T_WHITESPACE","\n            ",93],")",["T_OBJECT_OPERATOR","->",94],["T_STRING","joinLeft",94],"(",["T_WHITESPACE","\n                ",94],"[",["T_CONSTANT_ENCAPSED_STRING","'visitor_table'",95],["T_WHITESPACE"," ",95],["T_DOUBLE_ARROW","=>",95],["T_WHITESPACE"," ",95],["T_VARIABLE","$this",95],["T_OBJECT_OPERATOR","->",95],["T_STRING","getTable",95],"(",["T_CONSTANT_ENCAPSED_STRING","'customer_visitor'",95],")","]",",",["T_WHITESPACE","\n                ",95],["T_CONSTANT_ENCAPSED_STRING","'visitor_table.visitor_id=compare_table.visitor_id AND compare_table.customer_id IS NULL'",96],",",["T_WHITESPACE","\n                ",96],"[","]",["T_WHITESPACE","\n            ",97],")",["T_OBJECT_OPERATOR","->",98],["T_STRING","where",98],"(",["T_WHITESPACE","\n                ",98],["T_CONSTANT_ENCAPSED_STRING","'compare_table.visitor_id > ?'",99],",",["T_WHITESPACE","\n                ",99],["T_LNUMBER","0",100],["T_WHITESPACE","\n            ",100],")",["T_OBJECT_OPERATOR","->",101],["T_STRING","where",101],"(",["T_WHITESPACE","\n                ",101],["T_CONSTANT_ENCAPSED_STRING","'visitor_table.visitor_id IS NULL'",102],["T_WHITESPACE","\n            ",102],")",["T_OBJECT_OPERATOR","->",103],["T_STRING","limit",103],"(",["T_WHITESPACE","\n                ",103],["T_LNUMBER","100",104],["T_WHITESPACE","\n            ",104],")",";",["T_WHITESPACE","\n            ",105],["T_VARIABLE","$itemIds",106],["T_WHITESPACE"," ",106],"=",["T_WHITESPACE"," ",106],["T_VARIABLE","$this",106],["T_OBJECT_OPERATOR","->",106],["T_STRING","getConnection",106],"(",")",["T_OBJECT_OPERATOR","->",106],["T_STRING","fetchCol",106],"(",["T_VARIABLE","$select",106],")",";",["T_WHITESPACE","\n\n            ",106],["T_IF","if",108],["T_WHITESPACE"," ",108],"(","!",["T_VARIABLE","$itemIds",108],")",["T_WHITESPACE"," ",108],"{",["T_WHITESPACE","\n                ",108],["T_BREAK","break",109],";",["T_WHITESPACE","\n            ",109],"}",["T_WHITESPACE","\n\n            ",110],["T_VARIABLE","$this",112],["T_OBJECT_OPERATOR","->",112],["T_STRING","getConnection",112],"(",")",["T_OBJECT_OPERATOR","->",112],["T_STRING","delete",112],"(",["T_WHITESPACE","\n                ",112],["T_VARIABLE","$this",113],["T_OBJECT_OPERATOR","->",113],["T_STRING","getMainTable",113],"(",")",",",["T_WHITESPACE","\n                ",113],["T_VARIABLE","$this",114],["T_OBJECT_OPERATOR","->",114],["T_STRING","getConnection",114],"(",")",["T_OBJECT_OPERATOR","->",114],["T_STRING","quoteInto",114],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog_compare_item_id IN(?)'",114],",",["T_WHITESPACE"," ",114],["T_VARIABLE","$itemIds",114],")",["T_WHITESPACE","\n            ",114],")",";",["T_WHITESPACE","\n        ",115],"}",["T_WHITESPACE","\n\n        ",116],["T_RETURN","return",118],["T_WHITESPACE"," ",118],["T_VARIABLE","$this",118],";",["T_WHITESPACE","\n    ",118],"}",["T_WHITESPACE","\n\n    ",119],["T_DOC_COMMENT","\/**\n     * Purge visitor data after customer logout\n     *\n     * @param \\Magento\\Catalog\\Model\\Product\\Compare\\Item $object\n     * @return $this\n     *\/",121],["T_WHITESPACE","\n    ",126],["T_PUBLIC","public",127],["T_WHITESPACE"," ",127],["T_FUNCTION","function",127],["T_WHITESPACE"," ",127],["T_STRING","purgeVisitorByCustomer",127],"(",["T_VARIABLE","$object",127],")",["T_WHITESPACE","\n    ",127],"{",["T_WHITESPACE","\n        ",128],["T_IF","if",129],["T_WHITESPACE"," ",129],"(","!",["T_VARIABLE","$object",129],["T_OBJECT_OPERATOR","->",129],["T_STRING","getCustomerId",129],"(",")",")",["T_WHITESPACE"," ",129],"{",["T_WHITESPACE","\n            ",129],["T_RETURN","return",130],["T_WHITESPACE"," ",130],["T_VARIABLE","$this",130],";",["T_WHITESPACE","\n        ",130],"}",["T_WHITESPACE","\n\n        ",131],["T_VARIABLE","$where",133],["T_WHITESPACE"," ",133],"=",["T_WHITESPACE"," ",133],["T_VARIABLE","$this",133],["T_OBJECT_OPERATOR","->",133],["T_STRING","getConnection",133],"(",")",["T_OBJECT_OPERATOR","->",133],["T_STRING","quoteInto",133],"(",["T_CONSTANT_ENCAPSED_STRING","'customer_id=?'",133],",",["T_WHITESPACE"," ",133],["T_VARIABLE","$object",133],["T_OBJECT_OPERATOR","->",133],["T_STRING","getCustomerId",133],"(",")",")",";",["T_WHITESPACE","\n        ",133],["T_VARIABLE","$bind",134],["T_WHITESPACE"," ",134],"=",["T_WHITESPACE"," ",134],"[",["T_CONSTANT_ENCAPSED_STRING","'visitor_id'",134],["T_WHITESPACE"," ",134],["T_DOUBLE_ARROW","=>",134],["T_WHITESPACE"," ",134],["T_LNUMBER","0",134],"]",";",["T_WHITESPACE","\n\n        ",134],["T_VARIABLE","$this",136],["T_OBJECT_OPERATOR","->",136],["T_STRING","getConnection",136],"(",")",["T_OBJECT_OPERATOR","->",136],["T_STRING","update",136],"(",["T_VARIABLE","$this",136],["T_OBJECT_OPERATOR","->",136],["T_STRING","getMainTable",136],"(",")",",",["T_WHITESPACE"," ",136],["T_VARIABLE","$bind",136],",",["T_WHITESPACE"," ",136],["T_VARIABLE","$where",136],")",";",["T_WHITESPACE","\n\n        ",136],["T_RETURN","return",138],["T_WHITESPACE"," ",138],["T_VARIABLE","$this",138],";",["T_WHITESPACE","\n    ",138],"}",["T_WHITESPACE","\n\n    ",139],["T_DOC_COMMENT","\/**\n     * Update (Merge) customer data from visitor\n     * After Login process\n     *\n     * @param \\Magento\\Catalog\\Model\\Product\\Compare\\Item $object\n     * @return $this\n     *\/",141],["T_WHITESPACE","\n    ",147],["T_PUBLIC","public",148],["T_WHITESPACE"," ",148],["T_FUNCTION","function",148],["T_WHITESPACE"," ",148],["T_STRING","updateCustomerFromVisitor",148],"(",["T_VARIABLE","$object",148],")",["T_WHITESPACE","\n    ",148],"{",["T_WHITESPACE","\n        ",149],["T_IF","if",150],["T_WHITESPACE"," ",150],"(","!",["T_VARIABLE","$object",150],["T_OBJECT_OPERATOR","->",150],["T_STRING","getCustomerId",150],"(",")",")",["T_WHITESPACE"," ",150],"{",["T_WHITESPACE","\n            ",150],["T_RETURN","return",151],["T_WHITESPACE"," ",151],["T_VARIABLE","$this",151],";",["T_WHITESPACE","\n        ",151],"}",["T_WHITESPACE","\n\n        ",152],["T_COMMENT","\/\/ collect visitor compared items\n",154],["T_WHITESPACE","        ",155],["T_VARIABLE","$select",155],["T_WHITESPACE"," ",155],"=",["T_WHITESPACE"," ",155],["T_VARIABLE","$this",155],["T_OBJECT_OPERATOR","->",155],["T_STRING","getConnection",155],"(",")",["T_OBJECT_OPERATOR","->",155],["T_STRING","select",155],"(",")",["T_OBJECT_OPERATOR","->",155],["T_STRING","from",155],"(",["T_WHITESPACE","\n            ",155],["T_VARIABLE","$this",156],["T_OBJECT_OPERATOR","->",156],["T_STRING","getMainTable",156],"(",")",["T_WHITESPACE","\n        ",156],")",["T_OBJECT_OPERATOR","->",157],["T_STRING","where",157],"(",["T_WHITESPACE","\n            ",157],["T_CONSTANT_ENCAPSED_STRING","'visitor_id=?'",158],",",["T_WHITESPACE","\n            ",158],["T_VARIABLE","$object",159],["T_OBJECT_OPERATOR","->",159],["T_STRING","getVisitorId",159],"(",")",["T_WHITESPACE","\n        ",159],")",";",["T_WHITESPACE","\n        ",160],["T_VARIABLE","$visitor",161],["T_WHITESPACE"," ",161],"=",["T_WHITESPACE"," ",161],["T_VARIABLE","$this",161],["T_OBJECT_OPERATOR","->",161],["T_STRING","getConnection",161],"(",")",["T_OBJECT_OPERATOR","->",161],["T_STRING","fetchAll",161],"(",["T_VARIABLE","$select",161],")",";",["T_WHITESPACE","\n\n        ",161],["T_COMMENT","\/\/ collect customer compared items\n",163],["T_WHITESPACE","        ",164],["T_VARIABLE","$select",164],["T_WHITESPACE"," ",164],"=",["T_WHITESPACE"," ",164],["T_VARIABLE","$this",164],["T_OBJECT_OPERATOR","->",164],["T_STRING","getConnection",164],"(",")",["T_OBJECT_OPERATOR","->",164],["T_STRING","select",164],"(",")",["T_OBJECT_OPERATOR","->",164],["T_STRING","from",164],"(",["T_WHITESPACE","\n            ",164],["T_VARIABLE","$this",165],["T_OBJECT_OPERATOR","->",165],["T_STRING","getMainTable",165],"(",")",["T_WHITESPACE","\n        ",165],")",["T_OBJECT_OPERATOR","->",166],["T_STRING","where",166],"(",["T_WHITESPACE","\n            ",166],["T_CONSTANT_ENCAPSED_STRING","'customer_id = ?'",167],",",["T_WHITESPACE","\n            ",167],["T_VARIABLE","$object",168],["T_OBJECT_OPERATOR","->",168],["T_STRING","getCustomerId",168],"(",")",["T_WHITESPACE","\n        ",168],")",["T_OBJECT_OPERATOR","->",169],["T_STRING","where",169],"(",["T_WHITESPACE","\n            ",169],["T_CONSTANT_ENCAPSED_STRING","'visitor_id != ?'",170],",",["T_WHITESPACE","\n            ",170],["T_VARIABLE","$object",171],["T_OBJECT_OPERATOR","->",171],["T_STRING","getVisitorId",171],"(",")",["T_WHITESPACE","\n        ",171],")",";",["T_WHITESPACE","\n        ",172],["T_VARIABLE","$customer",173],["T_WHITESPACE"," ",173],"=",["T_WHITESPACE"," ",173],["T_VARIABLE","$this",173],["T_OBJECT_OPERATOR","->",173],["T_STRING","getConnection",173],"(",")",["T_OBJECT_OPERATOR","->",173],["T_STRING","fetchAll",173],"(",["T_VARIABLE","$select",173],")",";",["T_WHITESPACE","\n\n        ",173],["T_VARIABLE","$products",175],["T_WHITESPACE"," ",175],"=",["T_WHITESPACE"," ",175],"[","]",";",["T_WHITESPACE","\n        ",175],["T_VARIABLE","$delete",176],["T_WHITESPACE"," ",176],"=",["T_WHITESPACE"," ",176],"[","]",";",["T_WHITESPACE","\n        ",176],["T_VARIABLE","$update",177],["T_WHITESPACE"," ",177],"=",["T_WHITESPACE"," ",177],"[","]",";",["T_WHITESPACE","\n        ",177],["T_FOREACH","foreach",178],["T_WHITESPACE"," ",178],"(",["T_VARIABLE","$visitor",178],["T_WHITESPACE"," ",178],["T_AS","as",178],["T_WHITESPACE"," ",178],["T_VARIABLE","$row",178],")",["T_WHITESPACE"," ",178],"{",["T_WHITESPACE","\n            ",178],["T_VARIABLE","$products",179],"[",["T_VARIABLE","$row",179],"[",["T_CONSTANT_ENCAPSED_STRING","'product_id'",179],"]","]",["T_WHITESPACE"," ",179],"=",["T_WHITESPACE"," ",179],"[",["T_WHITESPACE","\n                ",179],["T_CONSTANT_ENCAPSED_STRING","'store_id'",180],["T_WHITESPACE"," ",180],["T_DOUBLE_ARROW","=>",180],["T_WHITESPACE"," ",180],["T_VARIABLE","$row",180],"[",["T_CONSTANT_ENCAPSED_STRING","'store_id'",180],"]",",",["T_WHITESPACE","\n                ",180],["T_CONSTANT_ENCAPSED_STRING","'customer_id'",181],["T_WHITESPACE"," ",181],["T_DOUBLE_ARROW","=>",181],["T_WHITESPACE"," ",181],["T_VARIABLE","$object",181],["T_OBJECT_OPERATOR","->",181],["T_STRING","getCustomerId",181],"(",")",",",["T_WHITESPACE","\n                ",181],["T_CONSTANT_ENCAPSED_STRING","'visitor_id'",182],["T_WHITESPACE"," ",182],["T_DOUBLE_ARROW","=>",182],["T_WHITESPACE"," ",182],["T_VARIABLE","$object",182],["T_OBJECT_OPERATOR","->",182],["T_STRING","getVisitorId",182],"(",")",",",["T_WHITESPACE","\n                ",182],["T_CONSTANT_ENCAPSED_STRING","'product_id'",183],["T_WHITESPACE"," ",183],["T_DOUBLE_ARROW","=>",183],["T_WHITESPACE"," ",183],["T_VARIABLE","$row",183],"[",["T_CONSTANT_ENCAPSED_STRING","'product_id'",183],"]",",",["T_WHITESPACE","\n            ",183],"]",";",["T_WHITESPACE","\n            ",184],["T_VARIABLE","$update",185],"[",["T_VARIABLE","$row",185],"[",["T_VARIABLE","$this",185],["T_OBJECT_OPERATOR","->",185],["T_STRING","getIdFieldName",185],"(",")","]","]",["T_WHITESPACE"," ",185],"=",["T_WHITESPACE"," ",185],["T_VARIABLE","$row",185],"[",["T_CONSTANT_ENCAPSED_STRING","'product_id'",185],"]",";",["T_WHITESPACE","\n        ",185],"}",["T_WHITESPACE","\n\n        ",186],["T_FOREACH","foreach",188],["T_WHITESPACE"," ",188],"(",["T_VARIABLE","$customer",188],["T_WHITESPACE"," ",188],["T_AS","as",188],["T_WHITESPACE"," ",188],["T_VARIABLE","$row",188],")",["T_WHITESPACE"," ",188],"{",["T_WHITESPACE","\n            ",188],["T_IF","if",189],["T_WHITESPACE"," ",189],"(",["T_ISSET","isset",189],"(",["T_VARIABLE","$products",189],"[",["T_VARIABLE","$row",189],"[",["T_CONSTANT_ENCAPSED_STRING","'product_id'",189],"]","]",")",")",["T_WHITESPACE"," ",189],"{",["T_WHITESPACE","\n                ",189],["T_VARIABLE","$delete",190],"[","]",["T_WHITESPACE"," ",190],"=",["T_WHITESPACE"," ",190],["T_VARIABLE","$row",190],"[",["T_VARIABLE","$this",190],["T_OBJECT_OPERATOR","->",190],["T_STRING","getIdFieldName",190],"(",")","]",";",["T_WHITESPACE","\n            ",190],"}",["T_WHITESPACE"," ",191],["T_ELSE","else",191],["T_WHITESPACE"," ",191],"{",["T_WHITESPACE","\n                ",191],["T_VARIABLE","$products",192],"[",["T_VARIABLE","$row",192],"[",["T_CONSTANT_ENCAPSED_STRING","'product_id'",192],"]","]",["T_WHITESPACE"," ",192],"=",["T_WHITESPACE"," ",192],"[",["T_WHITESPACE","\n                    ",192],["T_CONSTANT_ENCAPSED_STRING","'store_id'",193],["T_WHITESPACE"," ",193],["T_DOUBLE_ARROW","=>",193],["T_WHITESPACE"," ",193],["T_VARIABLE","$row",193],"[",["T_CONSTANT_ENCAPSED_STRING","'store_id'",193],"]",",",["T_WHITESPACE","\n                    ",193],["T_CONSTANT_ENCAPSED_STRING","'customer_id'",194],["T_WHITESPACE"," ",194],["T_DOUBLE_ARROW","=>",194],["T_WHITESPACE"," ",194],["T_VARIABLE","$object",194],["T_OBJECT_OPERATOR","->",194],["T_STRING","getCustomerId",194],"(",")",",",["T_WHITESPACE","\n                    ",194],["T_CONSTANT_ENCAPSED_STRING","'visitor_id'",195],["T_WHITESPACE"," ",195],["T_DOUBLE_ARROW","=>",195],["T_WHITESPACE"," ",195],["T_VARIABLE","$object",195],["T_OBJECT_OPERATOR","->",195],["T_STRING","getVisitorId",195],"(",")",",",["T_WHITESPACE","\n                    ",195],["T_CONSTANT_ENCAPSED_STRING","'product_id'",196],["T_WHITESPACE"," ",196],["T_DOUBLE_ARROW","=>",196],["T_WHITESPACE"," ",196],["T_VARIABLE","$row",196],"[",["T_CONSTANT_ENCAPSED_STRING","'product_id'",196],"]",",",["T_WHITESPACE","\n                ",196],"]",";",["T_WHITESPACE","\n            ",197],"}",["T_WHITESPACE","\n        ",198],"}",["T_WHITESPACE","\n\n        ",199],["T_IF","if",201],["T_WHITESPACE"," ",201],"(",["T_VARIABLE","$delete",201],")",["T_WHITESPACE"," ",201],"{",["T_WHITESPACE","\n            ",201],["T_VARIABLE","$this",202],["T_OBJECT_OPERATOR","->",202],["T_STRING","getConnection",202],"(",")",["T_OBJECT_OPERATOR","->",202],["T_STRING","delete",202],"(",["T_WHITESPACE","\n                ",202],["T_VARIABLE","$this",203],["T_OBJECT_OPERATOR","->",203],["T_STRING","getMainTable",203],"(",")",",",["T_WHITESPACE","\n                ",203],["T_VARIABLE","$this",204],["T_OBJECT_OPERATOR","->",204],["T_STRING","getConnection",204],"(",")",["T_OBJECT_OPERATOR","->",204],["T_STRING","quoteInto",204],"(",["T_VARIABLE","$this",204],["T_OBJECT_OPERATOR","->",204],["T_STRING","getIdFieldName",204],"(",")",["T_WHITESPACE"," ",204],".",["T_WHITESPACE"," ",204],["T_CONSTANT_ENCAPSED_STRING","' IN(?)'",204],",",["T_WHITESPACE"," ",204],["T_VARIABLE","$delete",204],")",["T_WHITESPACE","\n            ",204],")",";",["T_WHITESPACE","\n        ",205],"}",["T_WHITESPACE","\n        ",206],["T_IF","if",207],["T_WHITESPACE"," ",207],"(",["T_VARIABLE","$update",207],")",["T_WHITESPACE"," ",207],"{",["T_WHITESPACE","\n            ",207],["T_FOREACH","foreach",208],["T_WHITESPACE"," ",208],"(",["T_VARIABLE","$update",208],["T_WHITESPACE"," ",208],["T_AS","as",208],["T_WHITESPACE"," ",208],["T_VARIABLE","$itemId",208],["T_WHITESPACE"," ",208],["T_DOUBLE_ARROW","=>",208],["T_WHITESPACE"," ",208],["T_VARIABLE","$productId",208],")",["T_WHITESPACE"," ",208],"{",["T_WHITESPACE","\n                ",208],["T_VARIABLE","$bind",209],["T_WHITESPACE"," ",209],"=",["T_WHITESPACE"," ",209],["T_VARIABLE","$products",209],"[",["T_VARIABLE","$productId",209],"]",";",["T_WHITESPACE","\n                ",209],["T_VARIABLE","$this",210],["T_OBJECT_OPERATOR","->",210],["T_STRING","getConnection",210],"(",")",["T_OBJECT_OPERATOR","->",210],["T_STRING","update",210],"(",["T_WHITESPACE","\n                    ",210],["T_VARIABLE","$this",211],["T_OBJECT_OPERATOR","->",211],["T_STRING","getMainTable",211],"(",")",",",["T_WHITESPACE","\n                    ",211],["T_VARIABLE","$bind",212],",",["T_WHITESPACE","\n                    ",212],["T_VARIABLE","$this",213],["T_OBJECT_OPERATOR","->",213],["T_STRING","getConnection",213],"(",")",["T_OBJECT_OPERATOR","->",213],["T_STRING","quoteInto",213],"(",["T_VARIABLE","$this",213],["T_OBJECT_OPERATOR","->",213],["T_STRING","getIdFieldName",213],"(",")",["T_WHITESPACE"," ",213],".",["T_WHITESPACE"," ",213],["T_CONSTANT_ENCAPSED_STRING","'=?'",213],",",["T_WHITESPACE"," ",213],["T_VARIABLE","$itemId",213],")",["T_WHITESPACE","\n                ",213],")",";",["T_WHITESPACE","\n            ",214],"}",["T_WHITESPACE","\n        ",215],"}",["T_WHITESPACE","\n\n        ",216],["T_RETURN","return",218],["T_WHITESPACE"," ",218],["T_VARIABLE","$this",218],";",["T_WHITESPACE","\n    ",218],"}",["T_WHITESPACE","\n\n    ",219],["T_DOC_COMMENT","\/**\n     * Clear compare items by visitor and\/or customer\n     *\n     * @param int $visitorId\n     * @param int $customerId\n     * @return $this\n     *\/",221],["T_WHITESPACE","\n    ",227],["T_PUBLIC","public",228],["T_WHITESPACE"," ",228],["T_FUNCTION","function",228],["T_WHITESPACE"," ",228],["T_STRING","clearItems",228],"(",["T_VARIABLE","$visitorId",228],["T_WHITESPACE"," ",228],"=",["T_WHITESPACE"," ",228],["T_STRING","null",228],",",["T_WHITESPACE"," ",228],["T_VARIABLE","$customerId",228],["T_WHITESPACE"," ",228],"=",["T_WHITESPACE"," ",228],["T_STRING","null",228],")",["T_WHITESPACE","\n    ",228],"{",["T_WHITESPACE","\n        ",229],["T_VARIABLE","$where",230],["T_WHITESPACE"," ",230],"=",["T_WHITESPACE"," ",230],"[","]",";",["T_WHITESPACE","\n        ",230],["T_IF","if",231],["T_WHITESPACE"," ",231],"(",["T_VARIABLE","$customerId",231],")",["T_WHITESPACE"," ",231],"{",["T_WHITESPACE","\n            ",231],["T_VARIABLE","$customerId",232],["T_WHITESPACE"," ",232],"=",["T_WHITESPACE"," ",232],["T_INT_CAST","(int)",232],["T_VARIABLE","$customerId",232],";",["T_WHITESPACE","\n            ",232],["T_VARIABLE","$where",233],"[","]",["T_WHITESPACE"," ",233],"=",["T_WHITESPACE"," ",233],["T_VARIABLE","$this",233],["T_OBJECT_OPERATOR","->",233],["T_STRING","getConnection",233],"(",")",["T_OBJECT_OPERATOR","->",233],["T_STRING","quoteInto",233],"(",["T_CONSTANT_ENCAPSED_STRING","'customer_id = ?'",233],",",["T_WHITESPACE"," ",233],["T_VARIABLE","$customerId",233],")",";",["T_WHITESPACE","\n        ",233],"}",["T_WHITESPACE","\n        ",234],["T_IF","if",235],["T_WHITESPACE"," ",235],"(",["T_VARIABLE","$visitorId",235],")",["T_WHITESPACE"," ",235],"{",["T_WHITESPACE","\n            ",235],["T_VARIABLE","$visitorId",236],["T_WHITESPACE"," ",236],"=",["T_WHITESPACE"," ",236],["T_INT_CAST","(int)",236],["T_VARIABLE","$visitorId",236],";",["T_WHITESPACE","\n            ",236],["T_VARIABLE","$where",237],"[","]",["T_WHITESPACE"," ",237],"=",["T_WHITESPACE"," ",237],["T_VARIABLE","$this",237],["T_OBJECT_OPERATOR","->",237],["T_STRING","getConnection",237],"(",")",["T_OBJECT_OPERATOR","->",237],["T_STRING","quoteInto",237],"(",["T_CONSTANT_ENCAPSED_STRING","'visitor_id = ?'",237],",",["T_WHITESPACE"," ",237],["T_VARIABLE","$visitorId",237],")",";",["T_WHITESPACE","\n        ",237],"}",["T_WHITESPACE","\n        ",238],["T_IF","if",239],["T_WHITESPACE"," ",239],"(","!",["T_VARIABLE","$where",239],")",["T_WHITESPACE"," ",239],"{",["T_WHITESPACE","\n            ",239],["T_RETURN","return",240],["T_WHITESPACE"," ",240],["T_VARIABLE","$this",240],";",["T_WHITESPACE","\n        ",240],"}",["T_WHITESPACE","\n        ",241],["T_VARIABLE","$this",242],["T_OBJECT_OPERATOR","->",242],["T_STRING","getConnection",242],"(",")",["T_OBJECT_OPERATOR","->",242],["T_STRING","delete",242],"(",["T_VARIABLE","$this",242],["T_OBJECT_OPERATOR","->",242],["T_STRING","getMainTable",242],"(",")",",",["T_WHITESPACE"," ",242],["T_VARIABLE","$where",242],")",";",["T_WHITESPACE","\n        ",242],["T_RETURN","return",243],["T_WHITESPACE"," ",243],["T_VARIABLE","$this",243],";",["T_WHITESPACE","\n    ",243],"}",["T_WHITESPACE","\n",244],"}",["T_WHITESPACE","\n",245]]
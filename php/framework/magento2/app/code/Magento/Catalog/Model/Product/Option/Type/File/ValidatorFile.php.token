[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Copyright \u00c2\u00a9 2013-2017 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n *\/",2],["T_WHITESPACE","\n\n",5],["T_NAMESPACE","namespace",7],["T_WHITESPACE"," ",7],["T_STRING","Magento",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Catalog",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Model",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Product",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Option",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Type",7],["T_NS_SEPARATOR","\\",7],["T_STRING","File",7],";",["T_WHITESPACE","\n\n",7],["T_USE","use",9],["T_WHITESPACE"," ",9],["T_STRING","Magento",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Catalog",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Model",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Product",9],";",["T_WHITESPACE","\n",9],["T_USE","use",10],["T_WHITESPACE"," ",10],["T_STRING","Magento",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Framework",10],["T_NS_SEPARATOR","\\",10],["T_STRING","App",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Filesystem",10],["T_NS_SEPARATOR","\\",10],["T_STRING","DirectoryList",10],";",["T_WHITESPACE","\n",10],["T_USE","use",11],["T_WHITESPACE"," ",11],["T_STRING","Magento",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Catalog",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Model",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Product",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Exception",11],["T_WHITESPACE"," ",11],["T_AS","as",11],["T_WHITESPACE"," ",11],["T_STRING","ProductException",11],";",["T_WHITESPACE","\n",11],["T_USE","use",12],["T_WHITESPACE"," ",12],["T_STRING","Magento",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Framework",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Exception",12],["T_NS_SEPARATOR","\\",12],["T_STRING","LocalizedException",12],";",["T_WHITESPACE","\n\n",12],["T_DOC_COMMENT","\/**\n * @SuppressWarnings(PHPMD.CouplingBetweenObjects)\n *\/",14],["T_WHITESPACE","\n",16],["T_CLASS","class",17],["T_WHITESPACE"," ",17],["T_STRING","ValidatorFile",17],["T_WHITESPACE"," ",17],["T_EXTENDS","extends",17],["T_WHITESPACE"," ",17],["T_STRING","Validator",17],["T_WHITESPACE","\n",17],"{",["T_WHITESPACE","\n    ",18],["T_DOC_COMMENT","\/**\n     * Relative path for main destination folder\n     *\n     * @var string\n     *\/",19],["T_WHITESPACE","\n    ",23],["T_PROTECTED","protected",24],["T_WHITESPACE"," ",24],["T_VARIABLE","$path",24],["T_WHITESPACE"," ",24],"=",["T_WHITESPACE"," ",24],["T_CONSTANT_ENCAPSED_STRING","'custom_options'",24],";",["T_WHITESPACE","\n\n    ",24],["T_DOC_COMMENT","\/**\n     * Relative path for quote folder\n     *\n     * @var string\n     *\/",26],["T_WHITESPACE","\n    ",30],["T_PROTECTED","protected",31],["T_WHITESPACE"," ",31],["T_VARIABLE","$quotePath",31],["T_WHITESPACE"," ",31],"=",["T_WHITESPACE"," ",31],["T_CONSTANT_ENCAPSED_STRING","'custom_options\/quote'",31],";",["T_WHITESPACE","\n\n    ",31],["T_DOC_COMMENT","\/**\n     * Relative path for order folder\n     *\n     * @var string\n     *\/",33],["T_WHITESPACE","\n    ",37],["T_PROTECTED","protected",38],["T_WHITESPACE"," ",38],["T_VARIABLE","$orderPath",38],["T_WHITESPACE"," ",38],"=",["T_WHITESPACE"," ",38],["T_CONSTANT_ENCAPSED_STRING","'custom_options\/order'",38],";",["T_WHITESPACE","\n\n    ",38],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Framework\\Filesystem\\Directory\\WriteInterface\n     *\/",40],["T_WHITESPACE","\n    ",42],["T_PROTECTED","protected",43],["T_WHITESPACE"," ",43],["T_VARIABLE","$mediaDirectory",43],";",["T_WHITESPACE","\n\n    ",43],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Framework\\Filesystem\n     *\/",45],["T_WHITESPACE","\n    ",47],["T_PROTECTED","protected",48],["T_WHITESPACE"," ",48],["T_VARIABLE","$filesystem",48],";",["T_WHITESPACE","\n\n    ",48],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Framework\\HTTP\\Adapter\\FileTransferFactory\n     *\/",50],["T_WHITESPACE","\n    ",52],["T_PROTECTED","protected",53],["T_WHITESPACE"," ",53],["T_VARIABLE","$httpFactory",53],";",["T_WHITESPACE","\n\n    ",53],["T_DOC_COMMENT","\/**\n     * @var Product\n     *\/",55],["T_WHITESPACE","\n    ",57],["T_PROTECTED","protected",58],["T_WHITESPACE"," ",58],["T_VARIABLE","$product",58],";",["T_WHITESPACE","\n\n    ",58],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Framework\\Validator\\File\\IsImage\n     *\/",60],["T_WHITESPACE","\n    ",62],["T_PROTECTED","protected",63],["T_WHITESPACE"," ",63],["T_VARIABLE","$isImageValidator",63],";",["T_WHITESPACE","\n\n    ",63],["T_DOC_COMMENT","\/**\n     * @param \\Magento\\Framework\\App\\Config\\ScopeConfigInterface $scopeConfig\n     * @param \\Magento\\Framework\\Filesystem $filesystem\n     * @param \\Magento\\Framework\\File\\Size $fileSize\n     * @param \\Magento\\Framework\\HTTP\\Adapter\\FileTransferFactory $httpFactory\n     * @param \\Magento\\Framework\\Validator\\File\\IsImage $isImageValidator\n     * @throws \\Magento\\Framework\\Exception\\FileSystemException\n     *\/",65],["T_WHITESPACE","\n    ",72],["T_PUBLIC","public",73],["T_WHITESPACE"," ",73],["T_FUNCTION","function",73],["T_WHITESPACE"," ",73],["T_STRING","__construct",73],"(",["T_WHITESPACE","\n        ",73],["T_NS_SEPARATOR","\\",74],["T_STRING","Magento",74],["T_NS_SEPARATOR","\\",74],["T_STRING","Framework",74],["T_NS_SEPARATOR","\\",74],["T_STRING","App",74],["T_NS_SEPARATOR","\\",74],["T_STRING","Config",74],["T_NS_SEPARATOR","\\",74],["T_STRING","ScopeConfigInterface",74],["T_WHITESPACE"," ",74],["T_VARIABLE","$scopeConfig",74],",",["T_WHITESPACE","\n        ",74],["T_NS_SEPARATOR","\\",75],["T_STRING","Magento",75],["T_NS_SEPARATOR","\\",75],["T_STRING","Framework",75],["T_NS_SEPARATOR","\\",75],["T_STRING","Filesystem",75],["T_WHITESPACE"," ",75],["T_VARIABLE","$filesystem",75],",",["T_WHITESPACE","\n        ",75],["T_NS_SEPARATOR","\\",76],["T_STRING","Magento",76],["T_NS_SEPARATOR","\\",76],["T_STRING","Framework",76],["T_NS_SEPARATOR","\\",76],["T_STRING","File",76],["T_NS_SEPARATOR","\\",76],["T_STRING","Size",76],["T_WHITESPACE"," ",76],["T_VARIABLE","$fileSize",76],",",["T_WHITESPACE","\n        ",76],["T_NS_SEPARATOR","\\",77],["T_STRING","Magento",77],["T_NS_SEPARATOR","\\",77],["T_STRING","Framework",77],["T_NS_SEPARATOR","\\",77],["T_STRING","HTTP",77],["T_NS_SEPARATOR","\\",77],["T_STRING","Adapter",77],["T_NS_SEPARATOR","\\",77],["T_STRING","FileTransferFactory",77],["T_WHITESPACE"," ",77],["T_VARIABLE","$httpFactory",77],",",["T_WHITESPACE","\n        ",77],["T_NS_SEPARATOR","\\",78],["T_STRING","Magento",78],["T_NS_SEPARATOR","\\",78],["T_STRING","Framework",78],["T_NS_SEPARATOR","\\",78],["T_STRING","Validator",78],["T_NS_SEPARATOR","\\",78],["T_STRING","File",78],["T_NS_SEPARATOR","\\",78],["T_STRING","IsImage",78],["T_WHITESPACE"," ",78],["T_VARIABLE","$isImageValidator",78],["T_WHITESPACE","\n    ",78],")",["T_WHITESPACE"," ",79],"{",["T_WHITESPACE","\n        ",79],["T_VARIABLE","$this",80],["T_OBJECT_OPERATOR","->",80],["T_STRING","mediaDirectory",80],["T_WHITESPACE"," ",80],"=",["T_WHITESPACE"," ",80],["T_VARIABLE","$filesystem",80],["T_OBJECT_OPERATOR","->",80],["T_STRING","getDirectoryWrite",80],"(",["T_STRING","DirectoryList",80],["T_DOUBLE_COLON","::",80],["T_STRING","MEDIA",80],")",";",["T_WHITESPACE","\n        ",80],["T_VARIABLE","$this",81],["T_OBJECT_OPERATOR","->",81],["T_STRING","filesystem",81],["T_WHITESPACE"," ",81],"=",["T_WHITESPACE"," ",81],["T_VARIABLE","$filesystem",81],";",["T_WHITESPACE","\n        ",81],["T_VARIABLE","$this",82],["T_OBJECT_OPERATOR","->",82],["T_STRING","httpFactory",82],["T_WHITESPACE"," ",82],"=",["T_WHITESPACE"," ",82],["T_VARIABLE","$httpFactory",82],";",["T_WHITESPACE","\n        ",82],["T_VARIABLE","$this",83],["T_OBJECT_OPERATOR","->",83],["T_STRING","isImageValidator",83],["T_WHITESPACE"," ",83],"=",["T_WHITESPACE"," ",83],["T_VARIABLE","$isImageValidator",83],";",["T_WHITESPACE","\n        ",83],["T_STRING","parent",84],["T_DOUBLE_COLON","::",84],["T_STRING","__construct",84],"(",["T_VARIABLE","$scopeConfig",84],",",["T_WHITESPACE"," ",84],["T_VARIABLE","$filesystem",84],",",["T_WHITESPACE"," ",84],["T_VARIABLE","$fileSize",84],")",";",["T_WHITESPACE","\n    ",84],"}",["T_WHITESPACE","\n\n    ",85],["T_DOC_COMMENT","\/**\n     * @param Product $product\n     * @return $this\n     *\/",87],["T_WHITESPACE","\n    ",90],["T_PUBLIC","public",91],["T_WHITESPACE"," ",91],["T_FUNCTION","function",91],["T_WHITESPACE"," ",91],["T_STRING","setProduct",91],"(",["T_STRING","Product",91],["T_WHITESPACE"," ",91],["T_VARIABLE","$product",91],")",["T_WHITESPACE","\n    ",91],"{",["T_WHITESPACE","\n        ",92],["T_VARIABLE","$this",93],["T_OBJECT_OPERATOR","->",93],["T_STRING","product",93],["T_WHITESPACE"," ",93],"=",["T_WHITESPACE"," ",93],["T_VARIABLE","$product",93],";",["T_WHITESPACE","\n        ",93],["T_RETURN","return",94],["T_WHITESPACE"," ",94],["T_VARIABLE","$this",94],";",["T_WHITESPACE","\n    ",94],"}",["T_WHITESPACE","\n\n    ",95],["T_DOC_COMMENT","\/**\n     * @param \\Magento\\Framework\\DataObject $processingParams\n     * @param \\Magento\\Catalog\\Model\\Product\\Option $option\n     * @return array\n     * @throws LocalizedException\n     * @throws ProductException\n     * @throws \\Exception\n     * @throws \\Magento\\Framework\\Exception\\InputException\n     * @throws \\Magento\\Framework\\Validator\\Exception\n     * @throws \\Zend_File_Transfer_Exception\n     * @SuppressWarnings(PHPMD.CyclomaticComplexity)\n     * @SuppressWarnings(PHPMD.ExcessiveMethodLength)\n     *\/",97],["T_WHITESPACE","\n    ",109],["T_PUBLIC","public",110],["T_WHITESPACE"," ",110],["T_FUNCTION","function",110],["T_WHITESPACE"," ",110],["T_STRING","validate",110],"(",["T_VARIABLE","$processingParams",110],",",["T_WHITESPACE"," ",110],["T_VARIABLE","$option",110],")",["T_WHITESPACE","\n    ",110],"{",["T_WHITESPACE","\n        ",111],["T_VARIABLE","$upload",112],["T_WHITESPACE"," ",112],"=",["T_WHITESPACE"," ",112],["T_VARIABLE","$this",112],["T_OBJECT_OPERATOR","->",112],["T_STRING","httpFactory",112],["T_OBJECT_OPERATOR","->",112],["T_STRING","create",112],"(",")",";",["T_WHITESPACE","\n        ",112],["T_VARIABLE","$file",113],["T_WHITESPACE"," ",113],"=",["T_WHITESPACE"," ",113],["T_VARIABLE","$processingParams",113],["T_OBJECT_OPERATOR","->",113],["T_STRING","getFilesPrefix",113],"(",")",["T_WHITESPACE"," ",113],".",["T_WHITESPACE"," ",113],["T_CONSTANT_ENCAPSED_STRING","'options_'",113],["T_WHITESPACE"," ",113],".",["T_WHITESPACE"," ",113],["T_VARIABLE","$option",113],["T_OBJECT_OPERATOR","->",113],["T_STRING","getId",113],"(",")",["T_WHITESPACE"," ",113],".",["T_WHITESPACE"," ",113],["T_CONSTANT_ENCAPSED_STRING","'_file'",113],";",["T_WHITESPACE","\n        ",113],["T_TRY","try",114],["T_WHITESPACE"," ",114],"{",["T_WHITESPACE","\n            ",114],["T_VARIABLE","$runValidation",115],["T_WHITESPACE"," ",115],"=",["T_WHITESPACE"," ",115],["T_VARIABLE","$option",115],["T_OBJECT_OPERATOR","->",115],["T_STRING","getIsRequire",115],"(",")",["T_WHITESPACE"," ",115],["T_BOOLEAN_OR","||",115],["T_WHITESPACE"," ",115],["T_VARIABLE","$upload",115],["T_OBJECT_OPERATOR","->",115],["T_STRING","isUploaded",115],"(",["T_VARIABLE","$file",115],")",";",["T_WHITESPACE","\n            ",115],["T_IF","if",116],["T_WHITESPACE"," ",116],"(","!",["T_VARIABLE","$runValidation",116],")",["T_WHITESPACE"," ",116],"{",["T_WHITESPACE","\n                ",116],["T_THROW","throw",117],["T_WHITESPACE"," ",117],["T_NEW","new",117],["T_WHITESPACE"," ",117],["T_NS_SEPARATOR","\\",117],["T_STRING","Magento",117],["T_NS_SEPARATOR","\\",117],["T_STRING","Framework",117],["T_NS_SEPARATOR","\\",117],["T_STRING","Validator",117],["T_NS_SEPARATOR","\\",117],["T_STRING","Exception",117],"(",["T_WHITESPACE","\n                    ",117],["T_STRING","__",118],"(",["T_CONSTANT_ENCAPSED_STRING","'Validation failed. Required options were not filled or the file was not uploaded.'",118],")",["T_WHITESPACE","\n                ",118],")",";",["T_WHITESPACE","\n            ",119],"}",["T_WHITESPACE","\n\n            ",120],["T_VARIABLE","$fileInfo",122],["T_WHITESPACE"," ",122],"=",["T_WHITESPACE"," ",122],["T_VARIABLE","$upload",122],["T_OBJECT_OPERATOR","->",122],["T_STRING","getFileInfo",122],"(",["T_VARIABLE","$file",122],")","[",["T_VARIABLE","$file",122],"]",";",["T_WHITESPACE","\n            ",122],["T_VARIABLE","$fileInfo",123],"[",["T_CONSTANT_ENCAPSED_STRING","'title'",123],"]",["T_WHITESPACE"," ",123],"=",["T_WHITESPACE"," ",123],["T_VARIABLE","$fileInfo",123],"[",["T_CONSTANT_ENCAPSED_STRING","'name'",123],"]",";",["T_WHITESPACE","\n        ",123],"}",["T_WHITESPACE"," ",124],["T_CATCH","catch",124],["T_WHITESPACE"," ",124],"(",["T_NS_SEPARATOR","\\",124],["T_STRING","Magento",124],["T_NS_SEPARATOR","\\",124],["T_STRING","Framework",124],["T_NS_SEPARATOR","\\",124],["T_STRING","Validator",124],["T_NS_SEPARATOR","\\",124],["T_STRING","Exception",124],["T_WHITESPACE"," ",124],["T_VARIABLE","$e",124],")",["T_WHITESPACE"," ",124],"{",["T_WHITESPACE","\n            ",124],["T_THROW","throw",125],["T_WHITESPACE"," ",125],["T_VARIABLE","$e",125],";",["T_WHITESPACE","\n        ",125],"}",["T_WHITESPACE"," ",126],["T_CATCH","catch",126],["T_WHITESPACE"," ",126],"(",["T_NS_SEPARATOR","\\",126],["T_STRING","Exception",126],["T_WHITESPACE"," ",126],["T_VARIABLE","$e",126],")",["T_WHITESPACE"," ",126],"{",["T_WHITESPACE","\n            ",126],["T_COMMENT","\/\/ when file exceeds the upload_max_filesize, $_FILES is empty\n",127],["T_WHITESPACE","            ",128],["T_IF","if",128],["T_WHITESPACE"," ",128],"(",["T_VARIABLE","$this",128],["T_OBJECT_OPERATOR","->",128],["T_STRING","validateContentLength",128],"(",")",")",["T_WHITESPACE"," ",128],"{",["T_WHITESPACE","\n                ",128],["T_VARIABLE","$value",129],["T_WHITESPACE"," ",129],"=",["T_WHITESPACE"," ",129],["T_VARIABLE","$this",129],["T_OBJECT_OPERATOR","->",129],["T_STRING","fileSize",129],["T_OBJECT_OPERATOR","->",129],["T_STRING","getMaxFileSizeInMb",129],"(",")",";",["T_WHITESPACE","\n                ",129],["T_THROW","throw",130],["T_WHITESPACE"," ",130],["T_NEW","new",130],["T_WHITESPACE"," ",130],["T_STRING","LocalizedException",130],"(",["T_WHITESPACE","\n                    ",130],["T_STRING","__",131],"(",["T_CONSTANT_ENCAPSED_STRING","'The file you uploaded is larger than %1 Megabytes allowed by server'",131],",",["T_WHITESPACE"," ",131],["T_VARIABLE","$value",131],")",["T_WHITESPACE","\n                ",131],")",";",["T_WHITESPACE","\n            ",132],"}",["T_WHITESPACE"," ",133],["T_ELSE","else",133],["T_WHITESPACE"," ",133],"{",["T_WHITESPACE","\n                ",133],["T_THROW","throw",134],["T_WHITESPACE"," ",134],["T_NEW","new",134],["T_WHITESPACE"," ",134],["T_STRING","ProductException",134],"(",["T_STRING","__",134],"(",["T_CONSTANT_ENCAPSED_STRING","'Option required.'",134],")",")",";",["T_WHITESPACE","\n            ",134],"}",["T_WHITESPACE","\n        ",135],"}",["T_WHITESPACE","\n\n        ",136],["T_DOC_COMMENT","\/**\n         * Option Validations\n         *\/",138],["T_WHITESPACE","\n        ",140],["T_VARIABLE","$upload",141],["T_WHITESPACE"," ",141],"=",["T_WHITESPACE"," ",141],["T_VARIABLE","$this",141],["T_OBJECT_OPERATOR","->",141],["T_STRING","buildImageValidator",141],"(",["T_VARIABLE","$upload",141],",",["T_WHITESPACE"," ",141],["T_VARIABLE","$option",141],")",";",["T_WHITESPACE","\n\n        ",141],["T_DOC_COMMENT","\/**\n         * Upload process\n         *\/",143],["T_WHITESPACE","\n        ",145],["T_VARIABLE","$this",146],["T_OBJECT_OPERATOR","->",146],["T_STRING","initFilesystem",146],"(",")",";",["T_WHITESPACE","\n        ",146],["T_VARIABLE","$userValue",147],["T_WHITESPACE"," ",147],"=",["T_WHITESPACE"," ",147],"[","]",";",["T_WHITESPACE","\n\n        ",147],["T_IF","if",149],["T_WHITESPACE"," ",149],"(",["T_VARIABLE","$upload",149],["T_OBJECT_OPERATOR","->",149],["T_STRING","isUploaded",149],"(",["T_VARIABLE","$file",149],")",["T_WHITESPACE"," ",149],["T_BOOLEAN_AND","&&",149],["T_WHITESPACE"," ",149],["T_VARIABLE","$upload",149],["T_OBJECT_OPERATOR","->",149],["T_STRING","isValid",149],"(",["T_VARIABLE","$file",149],")",")",["T_WHITESPACE"," ",149],"{",["T_WHITESPACE","\n            ",149],["T_VARIABLE","$extension",150],["T_WHITESPACE"," ",150],"=",["T_WHITESPACE"," ",150],["T_STRING","pathinfo",150],"(",["T_STRING","strtolower",150],"(",["T_VARIABLE","$fileInfo",150],"[",["T_CONSTANT_ENCAPSED_STRING","'name'",150],"]",")",",",["T_WHITESPACE"," ",150],["T_STRING","PATHINFO_EXTENSION",150],")",";",["T_WHITESPACE","\n\n            ",150],["T_VARIABLE","$fileName",152],["T_WHITESPACE"," ",152],"=",["T_WHITESPACE"," ",152],["T_NS_SEPARATOR","\\",152],["T_STRING","Magento",152],["T_NS_SEPARATOR","\\",152],["T_STRING","MediaStorage",152],["T_NS_SEPARATOR","\\",152],["T_STRING","Model",152],["T_NS_SEPARATOR","\\",152],["T_STRING","File",152],["T_NS_SEPARATOR","\\",152],["T_STRING","Uploader",152],["T_DOUBLE_COLON","::",152],["T_STRING","getCorrectFileName",152],"(",["T_VARIABLE","$fileInfo",152],"[",["T_CONSTANT_ENCAPSED_STRING","'name'",152],"]",")",";",["T_WHITESPACE","\n            ",152],["T_VARIABLE","$dispersion",153],["T_WHITESPACE"," ",153],"=",["T_WHITESPACE"," ",153],["T_NS_SEPARATOR","\\",153],["T_STRING","Magento",153],["T_NS_SEPARATOR","\\",153],["T_STRING","MediaStorage",153],["T_NS_SEPARATOR","\\",153],["T_STRING","Model",153],["T_NS_SEPARATOR","\\",153],["T_STRING","File",153],["T_NS_SEPARATOR","\\",153],["T_STRING","Uploader",153],["T_DOUBLE_COLON","::",153],["T_STRING","getDispretionPath",153],"(",["T_VARIABLE","$fileName",153],")",";",["T_WHITESPACE","\n\n            ",153],["T_VARIABLE","$filePath",155],["T_WHITESPACE"," ",155],"=",["T_WHITESPACE"," ",155],["T_VARIABLE","$dispersion",155],";",["T_WHITESPACE","\n\n            ",155],["T_VARIABLE","$tmpDirectory",157],["T_WHITESPACE"," ",157],"=",["T_WHITESPACE"," ",157],["T_VARIABLE","$this",157],["T_OBJECT_OPERATOR","->",157],["T_STRING","filesystem",157],["T_OBJECT_OPERATOR","->",157],["T_STRING","getDirectoryRead",157],"(",["T_STRING","DirectoryList",157],["T_DOUBLE_COLON","::",157],["T_STRING","SYS_TMP",157],")",";",["T_WHITESPACE","\n            ",157],["T_VARIABLE","$fileHash",158],["T_WHITESPACE"," ",158],"=",["T_WHITESPACE"," ",158],["T_STRING","md5",158],"(",["T_VARIABLE","$tmpDirectory",158],["T_OBJECT_OPERATOR","->",158],["T_STRING","readFile",158],"(",["T_VARIABLE","$tmpDirectory",158],["T_OBJECT_OPERATOR","->",158],["T_STRING","getRelativePath",158],"(",["T_VARIABLE","$fileInfo",158],"[",["T_CONSTANT_ENCAPSED_STRING","'tmp_name'",158],"]",")",")",")",";",["T_WHITESPACE","\n            ",158],["T_VARIABLE","$filePath",159],["T_WHITESPACE"," ",159],["T_CONCAT_EQUAL",".=",159],["T_WHITESPACE"," ",159],["T_CONSTANT_ENCAPSED_STRING","'\/'",159],["T_WHITESPACE"," ",159],".",["T_WHITESPACE"," ",159],["T_VARIABLE","$fileHash",159],["T_WHITESPACE"," ",159],".",["T_WHITESPACE"," ",159],["T_CONSTANT_ENCAPSED_STRING","'.'",159],["T_WHITESPACE"," ",159],".",["T_WHITESPACE"," ",159],["T_VARIABLE","$extension",159],";",["T_WHITESPACE","\n            ",159],["T_VARIABLE","$fileFullPath",160],["T_WHITESPACE"," ",160],"=",["T_WHITESPACE"," ",160],["T_VARIABLE","$this",160],["T_OBJECT_OPERATOR","->",160],["T_STRING","mediaDirectory",160],["T_OBJECT_OPERATOR","->",160],["T_STRING","getAbsolutePath",160],"(",["T_VARIABLE","$this",160],["T_OBJECT_OPERATOR","->",160],["T_STRING","quotePath",160],["T_WHITESPACE"," ",160],".",["T_WHITESPACE"," ",160],["T_VARIABLE","$filePath",160],")",";",["T_WHITESPACE","\n\n            ",160],["T_VARIABLE","$upload",162],["T_OBJECT_OPERATOR","->",162],["T_STRING","addFilter",162],"(",["T_NEW","new",162],["T_WHITESPACE"," ",162],["T_NS_SEPARATOR","\\",162],["T_STRING","Zend_Filter_File_Rename",162],"(","[",["T_CONSTANT_ENCAPSED_STRING","'target'",162],["T_WHITESPACE"," ",162],["T_DOUBLE_ARROW","=>",162],["T_WHITESPACE"," ",162],["T_VARIABLE","$fileFullPath",162],",",["T_WHITESPACE"," ",162],["T_CONSTANT_ENCAPSED_STRING","'overwrite'",162],["T_WHITESPACE"," ",162],["T_DOUBLE_ARROW","=>",162],["T_WHITESPACE"," ",162],["T_STRING","true",162],"]",")",")",";",["T_WHITESPACE","\n\n            ",162],["T_IF","if",164],["T_WHITESPACE"," ",164],"(",["T_VARIABLE","$this",164],["T_OBJECT_OPERATOR","->",164],["T_STRING","product",164],["T_WHITESPACE"," ",164],["T_IS_NOT_IDENTICAL","!==",164],["T_WHITESPACE"," ",164],["T_STRING","null",164],")",["T_WHITESPACE"," ",164],"{",["T_WHITESPACE","\n                ",164],["T_VARIABLE","$this",165],["T_OBJECT_OPERATOR","->",165],["T_STRING","product",165],["T_OBJECT_OPERATOR","->",165],["T_STRING","getTypeInstance",165],"(",")",["T_OBJECT_OPERATOR","->",165],["T_STRING","addFileQueue",165],"(",["T_WHITESPACE","\n                    ",165],"[",["T_WHITESPACE","\n                        ",166],["T_CONSTANT_ENCAPSED_STRING","'operation'",167],["T_WHITESPACE"," ",167],["T_DOUBLE_ARROW","=>",167],["T_WHITESPACE"," ",167],["T_CONSTANT_ENCAPSED_STRING","'receive_uploaded_file'",167],",",["T_WHITESPACE","\n                        ",167],["T_CONSTANT_ENCAPSED_STRING","'src_name'",168],["T_WHITESPACE"," ",168],["T_DOUBLE_ARROW","=>",168],["T_WHITESPACE"," ",168],["T_VARIABLE","$file",168],",",["T_WHITESPACE","\n                        ",168],["T_CONSTANT_ENCAPSED_STRING","'dst_name'",169],["T_WHITESPACE"," ",169],["T_DOUBLE_ARROW","=>",169],["T_WHITESPACE"," ",169],["T_VARIABLE","$fileFullPath",169],",",["T_WHITESPACE","\n                        ",169],["T_CONSTANT_ENCAPSED_STRING","'uploader'",170],["T_WHITESPACE"," ",170],["T_DOUBLE_ARROW","=>",170],["T_WHITESPACE"," ",170],["T_VARIABLE","$upload",170],",",["T_WHITESPACE","\n                        ",170],["T_CONSTANT_ENCAPSED_STRING","'option'",171],["T_WHITESPACE"," ",171],["T_DOUBLE_ARROW","=>",171],["T_WHITESPACE"," ",171],["T_VARIABLE","$this",171],",",["T_WHITESPACE","\n                    ",171],"]",["T_WHITESPACE","\n                ",172],")",";",["T_WHITESPACE","\n            ",173],"}",["T_WHITESPACE","\n\n            ",174],["T_VARIABLE","$_width",176],["T_WHITESPACE"," ",176],"=",["T_WHITESPACE"," ",176],["T_LNUMBER","0",176],";",["T_WHITESPACE","\n            ",176],["T_VARIABLE","$_height",177],["T_WHITESPACE"," ",177],"=",["T_WHITESPACE"," ",177],["T_LNUMBER","0",177],";",["T_WHITESPACE","\n\n            ",177],["T_IF","if",179],["T_WHITESPACE"," ",179],"(",["T_VARIABLE","$tmpDirectory",179],["T_OBJECT_OPERATOR","->",179],["T_STRING","isReadable",179],"(",["T_VARIABLE","$tmpDirectory",179],["T_OBJECT_OPERATOR","->",179],["T_STRING","getRelativePath",179],"(",["T_VARIABLE","$fileInfo",179],"[",["T_CONSTANT_ENCAPSED_STRING","'tmp_name'",179],"]",")",")",")",["T_WHITESPACE"," ",179],"{",["T_WHITESPACE","\n                ",179],["T_IF","if",180],["T_WHITESPACE"," ",180],"(",["T_STRING","filesize",180],"(",["T_VARIABLE","$fileInfo",180],"[",["T_CONSTANT_ENCAPSED_STRING","'tmp_name'",180],"]",")",")",["T_WHITESPACE"," ",180],"{",["T_WHITESPACE","\n                    ",180],["T_IF","if",181],["T_WHITESPACE"," ",181],"(",["T_VARIABLE","$this",181],["T_OBJECT_OPERATOR","->",181],["T_STRING","isImageValidator",181],["T_OBJECT_OPERATOR","->",181],["T_STRING","isValid",181],"(",["T_VARIABLE","$fileInfo",181],"[",["T_CONSTANT_ENCAPSED_STRING","'tmp_name'",181],"]",")",")",["T_WHITESPACE"," ",181],"{",["T_WHITESPACE","\n                        ",181],["T_VARIABLE","$imageSize",182],["T_WHITESPACE"," ",182],"=",["T_WHITESPACE"," ",182],["T_STRING","getimagesize",182],"(",["T_VARIABLE","$fileInfo",182],"[",["T_CONSTANT_ENCAPSED_STRING","'tmp_name'",182],"]",")",";",["T_WHITESPACE","\n                    ",182],"}",["T_WHITESPACE","\n                ",183],"}",["T_WHITESPACE"," ",184],["T_ELSE","else",184],["T_WHITESPACE"," ",184],"{",["T_WHITESPACE","\n                    ",184],["T_THROW","throw",185],["T_WHITESPACE"," ",185],["T_NEW","new",185],["T_WHITESPACE"," ",185],["T_STRING","LocalizedException",185],"(",["T_STRING","__",185],"(",["T_CONSTANT_ENCAPSED_STRING","'The file is empty. Please choose another one'",185],")",")",";",["T_WHITESPACE","\n                ",185],"}",["T_WHITESPACE","\n\n                ",186],["T_IF","if",188],["T_WHITESPACE"," ",188],"(","!",["T_EMPTY","empty",188],"(",["T_VARIABLE","$imageSize",188],")",")",["T_WHITESPACE"," ",188],"{",["T_WHITESPACE","\n                    ",188],["T_VARIABLE","$_width",189],["T_WHITESPACE"," ",189],"=",["T_WHITESPACE"," ",189],["T_VARIABLE","$imageSize",189],"[",["T_LNUMBER","0",189],"]",";",["T_WHITESPACE","\n                    ",189],["T_VARIABLE","$_height",190],["T_WHITESPACE"," ",190],"=",["T_WHITESPACE"," ",190],["T_VARIABLE","$imageSize",190],"[",["T_LNUMBER","1",190],"]",";",["T_WHITESPACE","\n                ",190],"}",["T_WHITESPACE","\n            ",191],"}",["T_WHITESPACE","\n\n            ",192],["T_VARIABLE","$userValue",194],["T_WHITESPACE"," ",194],"=",["T_WHITESPACE"," ",194],"[",["T_WHITESPACE","\n                ",194],["T_CONSTANT_ENCAPSED_STRING","'type'",195],["T_WHITESPACE"," ",195],["T_DOUBLE_ARROW","=>",195],["T_WHITESPACE"," ",195],["T_VARIABLE","$fileInfo",195],"[",["T_CONSTANT_ENCAPSED_STRING","'type'",195],"]",",",["T_WHITESPACE","\n                ",195],["T_CONSTANT_ENCAPSED_STRING","'title'",196],["T_WHITESPACE"," ",196],["T_DOUBLE_ARROW","=>",196],["T_WHITESPACE"," ",196],["T_VARIABLE","$fileInfo",196],"[",["T_CONSTANT_ENCAPSED_STRING","'name'",196],"]",",",["T_WHITESPACE","\n                ",196],["T_CONSTANT_ENCAPSED_STRING","'quote_path'",197],["T_WHITESPACE"," ",197],["T_DOUBLE_ARROW","=>",197],["T_WHITESPACE"," ",197],["T_VARIABLE","$this",197],["T_OBJECT_OPERATOR","->",197],["T_STRING","quotePath",197],["T_WHITESPACE"," ",197],".",["T_WHITESPACE"," ",197],["T_VARIABLE","$filePath",197],",",["T_WHITESPACE","\n                ",197],["T_CONSTANT_ENCAPSED_STRING","'order_path'",198],["T_WHITESPACE"," ",198],["T_DOUBLE_ARROW","=>",198],["T_WHITESPACE"," ",198],["T_VARIABLE","$this",198],["T_OBJECT_OPERATOR","->",198],["T_STRING","orderPath",198],["T_WHITESPACE"," ",198],".",["T_WHITESPACE"," ",198],["T_VARIABLE","$filePath",198],",",["T_WHITESPACE","\n                ",198],["T_CONSTANT_ENCAPSED_STRING","'fullpath'",199],["T_WHITESPACE"," ",199],["T_DOUBLE_ARROW","=>",199],["T_WHITESPACE"," ",199],["T_VARIABLE","$fileFullPath",199],",",["T_WHITESPACE","\n                ",199],["T_CONSTANT_ENCAPSED_STRING","'size'",200],["T_WHITESPACE"," ",200],["T_DOUBLE_ARROW","=>",200],["T_WHITESPACE"," ",200],["T_VARIABLE","$fileInfo",200],"[",["T_CONSTANT_ENCAPSED_STRING","'size'",200],"]",",",["T_WHITESPACE","\n                ",200],["T_CONSTANT_ENCAPSED_STRING","'width'",201],["T_WHITESPACE"," ",201],["T_DOUBLE_ARROW","=>",201],["T_WHITESPACE"," ",201],["T_VARIABLE","$_width",201],",",["T_WHITESPACE","\n                ",201],["T_CONSTANT_ENCAPSED_STRING","'height'",202],["T_WHITESPACE"," ",202],["T_DOUBLE_ARROW","=>",202],["T_WHITESPACE"," ",202],["T_VARIABLE","$_height",202],",",["T_WHITESPACE","\n                ",202],["T_CONSTANT_ENCAPSED_STRING","'secret_key'",203],["T_WHITESPACE"," ",203],["T_DOUBLE_ARROW","=>",203],["T_WHITESPACE"," ",203],["T_STRING","substr",203],"(",["T_VARIABLE","$fileHash",203],",",["T_WHITESPACE"," ",203],["T_LNUMBER","0",203],",",["T_WHITESPACE"," ",203],["T_LNUMBER","20",203],")",",",["T_WHITESPACE","\n            ",203],"]",";",["T_WHITESPACE","\n        ",204],"}",["T_WHITESPACE"," ",205],["T_ELSEIF","elseif",205],["T_WHITESPACE"," ",205],"(",["T_VARIABLE","$upload",205],["T_OBJECT_OPERATOR","->",205],["T_STRING","getErrors",205],"(",")",")",["T_WHITESPACE"," ",205],"{",["T_WHITESPACE","\n            ",205],["T_VARIABLE","$errors",206],["T_WHITESPACE"," ",206],"=",["T_WHITESPACE"," ",206],["T_VARIABLE","$this",206],["T_OBJECT_OPERATOR","->",206],["T_STRING","getValidatorErrors",206],"(",["T_VARIABLE","$upload",206],["T_OBJECT_OPERATOR","->",206],["T_STRING","getErrors",206],"(",")",",",["T_WHITESPACE"," ",206],["T_VARIABLE","$fileInfo",206],",",["T_WHITESPACE"," ",206],["T_VARIABLE","$option",206],")",";",["T_WHITESPACE","\n\n            ",206],["T_IF","if",208],["T_WHITESPACE"," ",208],"(",["T_STRING","count",208],"(",["T_VARIABLE","$errors",208],")",["T_WHITESPACE"," ",208],">",["T_WHITESPACE"," ",208],["T_LNUMBER","0",208],")",["T_WHITESPACE"," ",208],"{",["T_WHITESPACE","\n                ",208],["T_THROW","throw",209],["T_WHITESPACE"," ",209],["T_NEW","new",209],["T_WHITESPACE"," ",209],["T_STRING","LocalizedException",209],"(",["T_STRING","__",209],"(",["T_STRING","implode",209],"(",["T_CONSTANT_ENCAPSED_STRING","\"\\n\"",209],",",["T_WHITESPACE"," ",209],["T_VARIABLE","$errors",209],")",")",")",";",["T_WHITESPACE","\n            ",209],"}",["T_WHITESPACE","\n        ",210],"}",["T_WHITESPACE"," ",211],["T_ELSE","else",211],["T_WHITESPACE"," ",211],"{",["T_WHITESPACE","\n            ",211],["T_THROW","throw",212],["T_WHITESPACE"," ",212],["T_NEW","new",212],["T_WHITESPACE"," ",212],["T_STRING","LocalizedException",212],"(",["T_STRING","__",212],"(",["T_CONSTANT_ENCAPSED_STRING","'Please specify product\\'s required option(s).'",212],")",")",";",["T_WHITESPACE","\n        ",212],"}",["T_WHITESPACE","\n        ",213],["T_RETURN","return",214],["T_WHITESPACE"," ",214],["T_VARIABLE","$userValue",214],";",["T_WHITESPACE","\n    ",214],"}",["T_WHITESPACE","\n\n    ",215],["T_DOC_COMMENT","\/**\n     * Directory structure initializing\n     *\n     * @return void\n     * @see \\Magento\\Catalog\\Model\\Product\\Option\\Type\\File::_initFilesystem\n     *\/",217],["T_WHITESPACE","\n    ",222],["T_PROTECTED","protected",223],["T_WHITESPACE"," ",223],["T_FUNCTION","function",223],["T_WHITESPACE"," ",223],["T_STRING","initFilesystem",223],"(",")",["T_WHITESPACE","\n    ",223],"{",["T_WHITESPACE","\n        ",224],["T_VARIABLE","$this",225],["T_OBJECT_OPERATOR","->",225],["T_STRING","mediaDirectory",225],["T_OBJECT_OPERATOR","->",225],["T_STRING","create",225],"(",["T_VARIABLE","$this",225],["T_OBJECT_OPERATOR","->",225],["T_STRING","path",225],")",";",["T_WHITESPACE","\n        ",225],["T_VARIABLE","$this",226],["T_OBJECT_OPERATOR","->",226],["T_STRING","mediaDirectory",226],["T_OBJECT_OPERATOR","->",226],["T_STRING","create",226],"(",["T_VARIABLE","$this",226],["T_OBJECT_OPERATOR","->",226],["T_STRING","quotePath",226],")",";",["T_WHITESPACE","\n        ",226],["T_VARIABLE","$this",227],["T_OBJECT_OPERATOR","->",227],["T_STRING","mediaDirectory",227],["T_OBJECT_OPERATOR","->",227],["T_STRING","create",227],"(",["T_VARIABLE","$this",227],["T_OBJECT_OPERATOR","->",227],["T_STRING","orderPath",227],")",";",["T_WHITESPACE","\n\n        ",227],["T_COMMENT","\/\/ Directory listing and hotlink secure\n",229],["T_WHITESPACE","        ",230],["T_VARIABLE","$path",230],["T_WHITESPACE"," ",230],"=",["T_WHITESPACE"," ",230],["T_VARIABLE","$this",230],["T_OBJECT_OPERATOR","->",230],["T_STRING","path",230],["T_WHITESPACE"," ",230],".",["T_WHITESPACE"," ",230],["T_CONSTANT_ENCAPSED_STRING","'\/.htaccess'",230],";",["T_WHITESPACE","\n        ",230],["T_IF","if",231],["T_WHITESPACE"," ",231],"(","!",["T_VARIABLE","$this",231],["T_OBJECT_OPERATOR","->",231],["T_STRING","mediaDirectory",231],["T_OBJECT_OPERATOR","->",231],["T_STRING","isFile",231],"(",["T_VARIABLE","$path",231],")",")",["T_WHITESPACE"," ",231],"{",["T_WHITESPACE","\n            ",231],["T_VARIABLE","$this",232],["T_OBJECT_OPERATOR","->",232],["T_STRING","mediaDirectory",232],["T_OBJECT_OPERATOR","->",232],["T_STRING","writeFile",232],"(",["T_VARIABLE","$path",232],",",["T_WHITESPACE"," ",232],["T_CONSTANT_ENCAPSED_STRING","\"Order deny,allow\\nDeny from all\"",232],")",";",["T_WHITESPACE","\n        ",232],"}",["T_WHITESPACE","\n    ",233],"}",["T_WHITESPACE","\n\n    ",234],["T_DOC_COMMENT","\/**\n     * @return bool\n     * @todo need correctly name\n     *\/",236],["T_WHITESPACE","\n    ",239],["T_PROTECTED","protected",240],["T_WHITESPACE"," ",240],["T_FUNCTION","function",240],["T_WHITESPACE"," ",240],["T_STRING","validateContentLength",240],"(",")",["T_WHITESPACE","\n    ",240],"{",["T_WHITESPACE","\n        ",241],["T_RETURN","return",242],["T_WHITESPACE"," ",242],["T_ISSET","isset",242],"(",["T_VARIABLE","$_SERVER",242],"[",["T_CONSTANT_ENCAPSED_STRING","'CONTENT_LENGTH'",242],"]",")",["T_WHITESPACE"," ",242],["T_BOOLEAN_AND","&&",242],["T_WHITESPACE"," ",242],["T_VARIABLE","$_SERVER",242],"[",["T_CONSTANT_ENCAPSED_STRING","'CONTENT_LENGTH'",242],"]",["T_WHITESPACE"," ",242],">",["T_WHITESPACE"," ",242],["T_VARIABLE","$this",242],["T_OBJECT_OPERATOR","->",242],["T_STRING","fileSize",242],["T_OBJECT_OPERATOR","->",242],["T_STRING","getMaxFileSize",242],"(",")",";",["T_WHITESPACE","\n    ",242],"}",["T_WHITESPACE","\n",243],"}",["T_WHITESPACE","\n",244]]
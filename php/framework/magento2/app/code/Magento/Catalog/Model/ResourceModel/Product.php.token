[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Copyright \u00c2\u00a9 2013-2017 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n *\/",2],["T_WHITESPACE","\n",5],["T_NAMESPACE","namespace",6],["T_WHITESPACE"," ",6],["T_STRING","Magento",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Catalog",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Model",6],["T_NS_SEPARATOR","\\",6],["T_STRING","ResourceModel",6],";",["T_WHITESPACE","\n\n",6],["T_USE","use",8],["T_WHITESPACE"," ",8],["T_STRING","Magento",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Catalog",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Api",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Data",8],["T_NS_SEPARATOR","\\",8],["T_STRING","ProductInterface",8],";",["T_WHITESPACE","\n",8],["T_USE","use",9],["T_WHITESPACE"," ",9],["T_STRING","Magento",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Catalog",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Model",9],["T_NS_SEPARATOR","\\",9],["T_STRING","ResourceModel",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Product",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Website",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Link",9],["T_WHITESPACE"," ",9],["T_AS","as",9],["T_WHITESPACE"," ",9],["T_STRING","ProductWebsiteLink",9],";",["T_WHITESPACE","\n",9],["T_USE","use",10],["T_WHITESPACE"," ",10],["T_STRING","Magento",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Framework",10],["T_NS_SEPARATOR","\\",10],["T_STRING","App",10],["T_NS_SEPARATOR","\\",10],["T_STRING","ObjectManager",10],";",["T_WHITESPACE","\n\n",10],["T_DOC_COMMENT","\/**\n * Product entity resource model\n *\n * @SuppressWarnings(PHPMD.LongVariable)\n * @SuppressWarnings(PHPMD.CouplingBetweenObjects)\n *\/",12],["T_WHITESPACE","\n",17],["T_CLASS","class",18],["T_WHITESPACE"," ",18],["T_STRING","Product",18],["T_WHITESPACE"," ",18],["T_EXTENDS","extends",18],["T_WHITESPACE"," ",18],["T_STRING","AbstractResource",18],["T_WHITESPACE","\n",18],"{",["T_WHITESPACE","\n    ",19],["T_DOC_COMMENT","\/**\n     * Product to website linkage table\n     *\n     * @var string\n     *\/",20],["T_WHITESPACE","\n    ",24],["T_PROTECTED","protected",25],["T_WHITESPACE"," ",25],["T_VARIABLE","$_productWebsiteTable",25],";",["T_WHITESPACE","\n\n    ",25],["T_DOC_COMMENT","\/**\n     * Product to category linkage table\n     *\n     * @var string\n     *\/",27],["T_WHITESPACE","\n    ",31],["T_PROTECTED","protected",32],["T_WHITESPACE"," ",32],["T_VARIABLE","$_productCategoryTable",32],";",["T_WHITESPACE","\n\n    ",32],["T_DOC_COMMENT","\/**\n     * Catalog category\n     *\n     * @var Category\n     *\/",34],["T_WHITESPACE","\n    ",38],["T_PROTECTED","protected",39],["T_WHITESPACE"," ",39],["T_VARIABLE","$_catalogCategory",39],";",["T_WHITESPACE","\n\n    ",39],["T_DOC_COMMENT","\/**\n     * Category collection factory\n     *\n     * @var \\Magento\\Catalog\\Model\\ResourceModel\\Category\\CollectionFactory\n     *\/",41],["T_WHITESPACE","\n    ",45],["T_PROTECTED","protected",46],["T_WHITESPACE"," ",46],["T_VARIABLE","$_categoryCollectionFactory",46],";",["T_WHITESPACE","\n\n    ",46],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Framework\\Event\\ManagerInterface\n     *\/",48],["T_WHITESPACE","\n    ",50],["T_PROTECTED","protected",51],["T_WHITESPACE"," ",51],["T_VARIABLE","$eventManager",51],";",["T_WHITESPACE","\n\n    ",51],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Eav\\Model\\Entity\\Attribute\\SetFactory\n     *\/",53],["T_WHITESPACE","\n    ",55],["T_PROTECTED","protected",56],["T_WHITESPACE"," ",56],["T_VARIABLE","$setFactory",56],";",["T_WHITESPACE","\n\n    ",56],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Eav\\Model\\Entity\\TypeFactory\n     *\/",58],["T_WHITESPACE","\n    ",60],["T_PROTECTED","protected",61],["T_WHITESPACE"," ",61],["T_VARIABLE","$typeFactory",61],";",["T_WHITESPACE","\n\n    ",61],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Framework\\EntityManager\\EntityManager\n     *\/",63],["T_WHITESPACE","\n    ",65],["T_PROTECTED","protected",66],["T_WHITESPACE"," ",66],["T_VARIABLE","$entityManager",66],";",["T_WHITESPACE","\n\n    ",66],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Catalog\\Model\\Product\\Attribute\\DefaultAttributes\n     *\/",68],["T_WHITESPACE","\n    ",70],["T_PROTECTED","protected",71],["T_WHITESPACE"," ",71],["T_VARIABLE","$defaultAttributes",71],";",["T_WHITESPACE","\n\n    ",71],["T_DOC_COMMENT","\/**\n     * @var array\n     *\/",73],["T_WHITESPACE","\n    ",75],["T_PROTECTED","protected",76],["T_WHITESPACE"," ",76],["T_VARIABLE","$availableCategoryIdsCache",76],["T_WHITESPACE"," ",76],"=",["T_WHITESPACE"," ",76],"[","]",";",["T_WHITESPACE","\n\n    ",76],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Catalog\\Model\\ResourceModel\\Product\\CategoryLink\n     *\/",78],["T_WHITESPACE","\n    ",80],["T_PRIVATE","private",81],["T_WHITESPACE"," ",81],["T_VARIABLE","$productCategoryLink",81],";",["T_WHITESPACE","\n\n    ",81],["T_DOC_COMMENT","\/**\n     * @param \\Magento\\Eav\\Model\\Entity\\Context $context\n     * @param \\Magento\\Store\\Model\\StoreManagerInterface $storeManager\n     * @param \\Magento\\Catalog\\Model\\Factory $modelFactory\n     * @param Category\\CollectionFactory $categoryCollectionFactory\n     * @param Category $catalogCategory\n     * @param \\Magento\\Framework\\Event\\ManagerInterface $eventManager\n     * @param \\Magento\\Eav\\Model\\Entity\\Attribute\\SetFactory $setFactory\n     * @param \\Magento\\Eav\\Model\\Entity\\TypeFactory $typeFactory\n     * @param \\Magento\\Catalog\\Model\\Product\\Attribute\\DefaultAttributes $defaultAttributes\n     * @param array $data\n     *\n     * @SuppressWarnings(PHPMD.ExcessiveParameterList)\n     *\/",83],["T_WHITESPACE","\n    ",96],["T_PUBLIC","public",97],["T_WHITESPACE"," ",97],["T_FUNCTION","function",97],["T_WHITESPACE"," ",97],["T_STRING","__construct",97],"(",["T_WHITESPACE","\n        ",97],["T_NS_SEPARATOR","\\",98],["T_STRING","Magento",98],["T_NS_SEPARATOR","\\",98],["T_STRING","Eav",98],["T_NS_SEPARATOR","\\",98],["T_STRING","Model",98],["T_NS_SEPARATOR","\\",98],["T_STRING","Entity",98],["T_NS_SEPARATOR","\\",98],["T_STRING","Context",98],["T_WHITESPACE"," ",98],["T_VARIABLE","$context",98],",",["T_WHITESPACE","\n        ",98],["T_NS_SEPARATOR","\\",99],["T_STRING","Magento",99],["T_NS_SEPARATOR","\\",99],["T_STRING","Store",99],["T_NS_SEPARATOR","\\",99],["T_STRING","Model",99],["T_NS_SEPARATOR","\\",99],["T_STRING","StoreManagerInterface",99],["T_WHITESPACE"," ",99],["T_VARIABLE","$storeManager",99],",",["T_WHITESPACE","\n        ",99],["T_NS_SEPARATOR","\\",100],["T_STRING","Magento",100],["T_NS_SEPARATOR","\\",100],["T_STRING","Catalog",100],["T_NS_SEPARATOR","\\",100],["T_STRING","Model",100],["T_NS_SEPARATOR","\\",100],["T_STRING","Factory",100],["T_WHITESPACE"," ",100],["T_VARIABLE","$modelFactory",100],",",["T_WHITESPACE","\n        ",100],["T_NS_SEPARATOR","\\",101],["T_STRING","Magento",101],["T_NS_SEPARATOR","\\",101],["T_STRING","Catalog",101],["T_NS_SEPARATOR","\\",101],["T_STRING","Model",101],["T_NS_SEPARATOR","\\",101],["T_STRING","ResourceModel",101],["T_NS_SEPARATOR","\\",101],["T_STRING","Category",101],["T_NS_SEPARATOR","\\",101],["T_STRING","CollectionFactory",101],["T_WHITESPACE"," ",101],["T_VARIABLE","$categoryCollectionFactory",101],",",["T_WHITESPACE","\n        ",101],["T_STRING","Category",102],["T_WHITESPACE"," ",102],["T_VARIABLE","$catalogCategory",102],",",["T_WHITESPACE","\n        ",102],["T_NS_SEPARATOR","\\",103],["T_STRING","Magento",103],["T_NS_SEPARATOR","\\",103],["T_STRING","Framework",103],["T_NS_SEPARATOR","\\",103],["T_STRING","Event",103],["T_NS_SEPARATOR","\\",103],["T_STRING","ManagerInterface",103],["T_WHITESPACE"," ",103],["T_VARIABLE","$eventManager",103],",",["T_WHITESPACE","\n        ",103],["T_NS_SEPARATOR","\\",104],["T_STRING","Magento",104],["T_NS_SEPARATOR","\\",104],["T_STRING","Eav",104],["T_NS_SEPARATOR","\\",104],["T_STRING","Model",104],["T_NS_SEPARATOR","\\",104],["T_STRING","Entity",104],["T_NS_SEPARATOR","\\",104],["T_STRING","Attribute",104],["T_NS_SEPARATOR","\\",104],["T_STRING","SetFactory",104],["T_WHITESPACE"," ",104],["T_VARIABLE","$setFactory",104],",",["T_WHITESPACE","\n        ",104],["T_NS_SEPARATOR","\\",105],["T_STRING","Magento",105],["T_NS_SEPARATOR","\\",105],["T_STRING","Eav",105],["T_NS_SEPARATOR","\\",105],["T_STRING","Model",105],["T_NS_SEPARATOR","\\",105],["T_STRING","Entity",105],["T_NS_SEPARATOR","\\",105],["T_STRING","TypeFactory",105],["T_WHITESPACE"," ",105],["T_VARIABLE","$typeFactory",105],",",["T_WHITESPACE","\n        ",105],["T_NS_SEPARATOR","\\",106],["T_STRING","Magento",106],["T_NS_SEPARATOR","\\",106],["T_STRING","Catalog",106],["T_NS_SEPARATOR","\\",106],["T_STRING","Model",106],["T_NS_SEPARATOR","\\",106],["T_STRING","Product",106],["T_NS_SEPARATOR","\\",106],["T_STRING","Attribute",106],["T_NS_SEPARATOR","\\",106],["T_STRING","DefaultAttributes",106],["T_WHITESPACE"," ",106],["T_VARIABLE","$defaultAttributes",106],",",["T_WHITESPACE","\n        ",106],["T_VARIABLE","$data",107],["T_WHITESPACE"," ",107],"=",["T_WHITESPACE"," ",107],"[","]",["T_WHITESPACE","\n    ",107],")",["T_WHITESPACE"," ",108],"{",["T_WHITESPACE","\n        ",108],["T_VARIABLE","$this",109],["T_OBJECT_OPERATOR","->",109],["T_STRING","_categoryCollectionFactory",109],["T_WHITESPACE"," ",109],"=",["T_WHITESPACE"," ",109],["T_VARIABLE","$categoryCollectionFactory",109],";",["T_WHITESPACE","\n        ",109],["T_VARIABLE","$this",110],["T_OBJECT_OPERATOR","->",110],["T_STRING","_catalogCategory",110],["T_WHITESPACE"," ",110],"=",["T_WHITESPACE"," ",110],["T_VARIABLE","$catalogCategory",110],";",["T_WHITESPACE","\n        ",110],["T_VARIABLE","$this",111],["T_OBJECT_OPERATOR","->",111],["T_STRING","eventManager",111],["T_WHITESPACE"," ",111],"=",["T_WHITESPACE"," ",111],["T_VARIABLE","$eventManager",111],";",["T_WHITESPACE","\n        ",111],["T_VARIABLE","$this",112],["T_OBJECT_OPERATOR","->",112],["T_STRING","setFactory",112],["T_WHITESPACE"," ",112],"=",["T_WHITESPACE"," ",112],["T_VARIABLE","$setFactory",112],";",["T_WHITESPACE","\n        ",112],["T_VARIABLE","$this",113],["T_OBJECT_OPERATOR","->",113],["T_STRING","typeFactory",113],["T_WHITESPACE"," ",113],"=",["T_WHITESPACE"," ",113],["T_VARIABLE","$typeFactory",113],";",["T_WHITESPACE","\n        ",113],["T_VARIABLE","$this",114],["T_OBJECT_OPERATOR","->",114],["T_STRING","defaultAttributes",114],["T_WHITESPACE"," ",114],"=",["T_WHITESPACE"," ",114],["T_VARIABLE","$defaultAttributes",114],";",["T_WHITESPACE","\n        ",114],["T_STRING","parent",115],["T_DOUBLE_COLON","::",115],["T_STRING","__construct",115],"(",["T_WHITESPACE","\n            ",115],["T_VARIABLE","$context",116],",",["T_WHITESPACE","\n            ",116],["T_VARIABLE","$storeManager",117],",",["T_WHITESPACE","\n            ",117],["T_VARIABLE","$modelFactory",118],",",["T_WHITESPACE","\n            ",118],["T_VARIABLE","$data",119],["T_WHITESPACE","\n        ",119],")",";",["T_WHITESPACE","\n        ",120],["T_VARIABLE","$this",121],["T_OBJECT_OPERATOR","->",121],["T_STRING","connectionName",121],["T_WHITESPACE","  ",121],"=",["T_WHITESPACE"," ",121],["T_CONSTANT_ENCAPSED_STRING","'catalog'",121],";",["T_WHITESPACE","\n    ",121],"}",["T_WHITESPACE","\n\n    ",122],["T_DOC_COMMENT","\/**\n     * Entity type getter and lazy loader\n     *\n     * @return \\Magento\\Eav\\Model\\Entity\\Type\n     * @throws \\Magento\\Framework\\Exception\\LocalizedException\n     *\/",124],["T_WHITESPACE","\n    ",129],["T_PUBLIC","public",130],["T_WHITESPACE"," ",130],["T_FUNCTION","function",130],["T_WHITESPACE"," ",130],["T_STRING","getEntityType",130],"(",")",["T_WHITESPACE","\n    ",130],"{",["T_WHITESPACE","\n        ",131],["T_IF","if",132],["T_WHITESPACE"," ",132],"(",["T_EMPTY","empty",132],"(",["T_VARIABLE","$this",132],["T_OBJECT_OPERATOR","->",132],["T_STRING","_type",132],")",")",["T_WHITESPACE"," ",132],"{",["T_WHITESPACE","\n            ",132],["T_VARIABLE","$this",133],["T_OBJECT_OPERATOR","->",133],["T_STRING","setType",133],"(",["T_NS_SEPARATOR","\\",133],["T_STRING","Magento",133],["T_NS_SEPARATOR","\\",133],["T_STRING","Catalog",133],["T_NS_SEPARATOR","\\",133],["T_STRING","Model",133],["T_NS_SEPARATOR","\\",133],["T_STRING","Product",133],["T_DOUBLE_COLON","::",133],["T_STRING","ENTITY",133],")",";",["T_WHITESPACE","\n        ",133],"}",["T_WHITESPACE","\n        ",134],["T_RETURN","return",135],["T_WHITESPACE"," ",135],["T_STRING","parent",135],["T_DOUBLE_COLON","::",135],["T_STRING","getEntityType",135],"(",")",";",["T_WHITESPACE","\n    ",135],"}",["T_WHITESPACE","\n\n    ",136],["T_DOC_COMMENT","\/**\n     * Product Website table name getter\n     *\n     * @return string\n     *\/",138],["T_WHITESPACE","\n    ",142],["T_PUBLIC","public",143],["T_WHITESPACE"," ",143],["T_FUNCTION","function",143],["T_WHITESPACE"," ",143],["T_STRING","getProductWebsiteTable",143],"(",")",["T_WHITESPACE","\n    ",143],"{",["T_WHITESPACE","\n        ",144],["T_IF","if",145],["T_WHITESPACE"," ",145],"(","!",["T_VARIABLE","$this",145],["T_OBJECT_OPERATOR","->",145],["T_STRING","_productWebsiteTable",145],")",["T_WHITESPACE"," ",145],"{",["T_WHITESPACE","\n            ",145],["T_VARIABLE","$this",146],["T_OBJECT_OPERATOR","->",146],["T_STRING","_productWebsiteTable",146],["T_WHITESPACE"," ",146],"=",["T_WHITESPACE"," ",146],["T_VARIABLE","$this",146],["T_OBJECT_OPERATOR","->",146],["T_STRING","getTable",146],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog_product_website'",146],")",";",["T_WHITESPACE","\n        ",146],"}",["T_WHITESPACE","\n        ",147],["T_RETURN","return",148],["T_WHITESPACE"," ",148],["T_VARIABLE","$this",148],["T_OBJECT_OPERATOR","->",148],["T_STRING","_productWebsiteTable",148],";",["T_WHITESPACE","\n    ",148],"}",["T_WHITESPACE","\n\n    ",149],["T_DOC_COMMENT","\/**\n     * Product Category table name getter\n     *\n     * @deprecated\n     * @return string\n     *\/",151],["T_WHITESPACE","\n    ",156],["T_PUBLIC","public",157],["T_WHITESPACE"," ",157],["T_FUNCTION","function",157],["T_WHITESPACE"," ",157],["T_STRING","getProductCategoryTable",157],"(",")",["T_WHITESPACE","\n    ",157],"{",["T_WHITESPACE","\n        ",158],["T_IF","if",159],["T_WHITESPACE"," ",159],"(","!",["T_VARIABLE","$this",159],["T_OBJECT_OPERATOR","->",159],["T_STRING","_productCategoryTable",159],")",["T_WHITESPACE"," ",159],"{",["T_WHITESPACE","\n            ",159],["T_VARIABLE","$this",160],["T_OBJECT_OPERATOR","->",160],["T_STRING","_productCategoryTable",160],["T_WHITESPACE"," ",160],"=",["T_WHITESPACE"," ",160],["T_VARIABLE","$this",160],["T_OBJECT_OPERATOR","->",160],["T_STRING","getTable",160],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog_category_product'",160],")",";",["T_WHITESPACE","\n        ",160],"}",["T_WHITESPACE","\n        ",161],["T_RETURN","return",162],["T_WHITESPACE"," ",162],["T_VARIABLE","$this",162],["T_OBJECT_OPERATOR","->",162],["T_STRING","_productCategoryTable",162],";",["T_WHITESPACE","\n    ",162],"}",["T_WHITESPACE","\n\n    ",163],["T_DOC_COMMENT","\/**\n     * Default product attributes\n     *\n     * @return string[]\n     *\/",165],["T_WHITESPACE","\n    ",169],["T_PROTECTED","protected",170],["T_WHITESPACE"," ",170],["T_FUNCTION","function",170],["T_WHITESPACE"," ",170],["T_STRING","_getDefaultAttributes",170],"(",")",["T_WHITESPACE","\n    ",170],"{",["T_WHITESPACE","\n        ",171],["T_RETURN","return",172],["T_WHITESPACE"," ",172],["T_VARIABLE","$this",172],["T_OBJECT_OPERATOR","->",172],["T_STRING","defaultAttributes",172],["T_OBJECT_OPERATOR","->",172],["T_STRING","getDefaultAttributes",172],"(",")",";",["T_WHITESPACE","\n    ",172],"}",["T_WHITESPACE","\n\n    ",173],["T_DOC_COMMENT","\/**\n     * Retrieve product website identifiers\n     *\n     * @deprecated\n     * @param \\Magento\\Catalog\\Model\\Product|int $product\n     * @return array\n     *\/",175],["T_WHITESPACE","\n    ",181],["T_PUBLIC","public",182],["T_WHITESPACE"," ",182],["T_FUNCTION","function",182],["T_WHITESPACE"," ",182],["T_STRING","getWebsiteIds",182],"(",["T_VARIABLE","$product",182],")",["T_WHITESPACE","\n    ",182],"{",["T_WHITESPACE","\n        ",183],["T_IF","if",184],["T_WHITESPACE"," ",184],"(",["T_VARIABLE","$product",184],["T_WHITESPACE"," ",184],["T_INSTANCEOF","instanceof",184],["T_WHITESPACE"," ",184],["T_NS_SEPARATOR","\\",184],["T_STRING","Magento",184],["T_NS_SEPARATOR","\\",184],["T_STRING","Catalog",184],["T_NS_SEPARATOR","\\",184],["T_STRING","Model",184],["T_NS_SEPARATOR","\\",184],["T_STRING","Product",184],")",["T_WHITESPACE"," ",184],"{",["T_WHITESPACE","\n            ",184],["T_VARIABLE","$productId",185],["T_WHITESPACE"," ",185],"=",["T_WHITESPACE"," ",185],["T_VARIABLE","$product",185],["T_OBJECT_OPERATOR","->",185],["T_STRING","getEntityId",185],"(",")",";",["T_WHITESPACE","\n        ",185],"}",["T_WHITESPACE"," ",186],["T_ELSE","else",186],["T_WHITESPACE"," ",186],"{",["T_WHITESPACE","\n            ",186],["T_VARIABLE","$productId",187],["T_WHITESPACE"," ",187],"=",["T_WHITESPACE"," ",187],["T_VARIABLE","$product",187],";",["T_WHITESPACE","\n        ",187],"}",["T_WHITESPACE","\n\n        ",188],["T_RETURN","return",190],["T_WHITESPACE"," ",190],["T_VARIABLE","$this",190],["T_OBJECT_OPERATOR","->",190],["T_STRING","getProductWebsiteLink",190],"(",")",["T_OBJECT_OPERATOR","->",190],["T_STRING","getWebsiteIdsByProductId",190],"(",["T_VARIABLE","$productId",190],")",";",["T_WHITESPACE","\n    ",190],"}",["T_WHITESPACE","\n\n    ",191],["T_DOC_COMMENT","\/**\n     * Retrieve product website identifiers by product identifiers\n     *\n     * @param   array $productIds\n     * @return  array\n     *\/",193],["T_WHITESPACE","\n    ",198],["T_PUBLIC","public",199],["T_WHITESPACE"," ",199],["T_FUNCTION","function",199],["T_WHITESPACE"," ",199],["T_STRING","getWebsiteIdsByProductIds",199],"(",["T_VARIABLE","$productIds",199],")",["T_WHITESPACE","\n    ",199],"{",["T_WHITESPACE","\n        ",200],["T_VARIABLE","$select",201],["T_WHITESPACE"," ",201],"=",["T_WHITESPACE"," ",201],["T_VARIABLE","$this",201],["T_OBJECT_OPERATOR","->",201],["T_STRING","getConnection",201],"(",")",["T_OBJECT_OPERATOR","->",201],["T_STRING","select",201],"(",")",["T_OBJECT_OPERATOR","->",201],["T_STRING","from",201],"(",["T_WHITESPACE","\n            ",201],["T_VARIABLE","$this",202],["T_OBJECT_OPERATOR","->",202],["T_STRING","getProductWebsiteTable",202],"(",")",",",["T_WHITESPACE","\n            ",202],"[",["T_CONSTANT_ENCAPSED_STRING","'product_id'",203],",",["T_WHITESPACE"," ",203],["T_CONSTANT_ENCAPSED_STRING","'website_id'",203],"]",["T_WHITESPACE","\n        ",203],")",["T_OBJECT_OPERATOR","->",204],["T_STRING","where",204],"(",["T_WHITESPACE","\n            ",204],["T_CONSTANT_ENCAPSED_STRING","'product_id IN (?)'",205],",",["T_WHITESPACE","\n            ",205],["T_VARIABLE","$productIds",206],["T_WHITESPACE","\n        ",206],")",";",["T_WHITESPACE","\n        ",207],["T_VARIABLE","$productsWebsites",208],["T_WHITESPACE"," ",208],"=",["T_WHITESPACE"," ",208],"[","]",";",["T_WHITESPACE","\n        ",208],["T_FOREACH","foreach",209],["T_WHITESPACE"," ",209],"(",["T_VARIABLE","$this",209],["T_OBJECT_OPERATOR","->",209],["T_STRING","getConnection",209],"(",")",["T_OBJECT_OPERATOR","->",209],["T_STRING","fetchAll",209],"(",["T_VARIABLE","$select",209],")",["T_WHITESPACE"," ",209],["T_AS","as",209],["T_WHITESPACE"," ",209],["T_VARIABLE","$productInfo",209],")",["T_WHITESPACE"," ",209],"{",["T_WHITESPACE","\n            ",209],["T_VARIABLE","$productId",210],["T_WHITESPACE"," ",210],"=",["T_WHITESPACE"," ",210],["T_VARIABLE","$productInfo",210],"[",["T_CONSTANT_ENCAPSED_STRING","'product_id'",210],"]",";",["T_WHITESPACE","\n            ",210],["T_IF","if",211],["T_WHITESPACE"," ",211],"(","!",["T_ISSET","isset",211],"(",["T_VARIABLE","$productsWebsites",211],"[",["T_VARIABLE","$productId",211],"]",")",")",["T_WHITESPACE"," ",211],"{",["T_WHITESPACE","\n                ",211],["T_VARIABLE","$productsWebsites",212],"[",["T_VARIABLE","$productId",212],"]",["T_WHITESPACE"," ",212],"=",["T_WHITESPACE"," ",212],"[","]",";",["T_WHITESPACE","\n            ",212],"}",["T_WHITESPACE","\n            ",213],["T_VARIABLE","$productsWebsites",214],"[",["T_VARIABLE","$productId",214],"]","[","]",["T_WHITESPACE"," ",214],"=",["T_WHITESPACE"," ",214],["T_VARIABLE","$productInfo",214],"[",["T_CONSTANT_ENCAPSED_STRING","'website_id'",214],"]",";",["T_WHITESPACE","\n        ",214],"}",["T_WHITESPACE","\n\n        ",215],["T_RETURN","return",217],["T_WHITESPACE"," ",217],["T_VARIABLE","$productsWebsites",217],";",["T_WHITESPACE","\n    ",217],"}",["T_WHITESPACE","\n\n    ",218],["T_DOC_COMMENT","\/**\n     * Retrieve product category identifiers\n     *\n     * @param \\Magento\\Catalog\\Model\\Product $product\n     * @return array\n     *\/",220],["T_WHITESPACE","\n    ",225],["T_PUBLIC","public",226],["T_WHITESPACE"," ",226],["T_FUNCTION","function",226],["T_WHITESPACE"," ",226],["T_STRING","getCategoryIds",226],"(",["T_VARIABLE","$product",226],")",["T_WHITESPACE","\n    ",226],"{",["T_WHITESPACE","\n        ",227],["T_VARIABLE","$result",228],["T_WHITESPACE"," ",228],"=",["T_WHITESPACE"," ",228],["T_VARIABLE","$this",228],["T_OBJECT_OPERATOR","->",228],["T_STRING","getProductCategoryLink",228],"(",")",["T_OBJECT_OPERATOR","->",228],["T_STRING","getCategoryLinks",228],"(",["T_VARIABLE","$product",228],")",";",["T_WHITESPACE","\n        ",228],["T_RETURN","return",229],["T_WHITESPACE"," ",229],["T_STRING","array_column",229],"(",["T_VARIABLE","$result",229],",",["T_WHITESPACE"," ",229],["T_CONSTANT_ENCAPSED_STRING","'category_id'",229],")",";",["T_WHITESPACE","\n    ",229],"}",["T_WHITESPACE","\n\n    ",230],["T_DOC_COMMENT","\/**\n     * Get product identifier by sku\n     *\n     * @param string $sku\n     * @return int|false\n     *\/",232],["T_WHITESPACE","\n    ",237],["T_PUBLIC","public",238],["T_WHITESPACE"," ",238],["T_FUNCTION","function",238],["T_WHITESPACE"," ",238],["T_STRING","getIdBySku",238],"(",["T_VARIABLE","$sku",238],")",["T_WHITESPACE","\n    ",238],"{",["T_WHITESPACE","\n        ",239],["T_VARIABLE","$connection",240],["T_WHITESPACE"," ",240],"=",["T_WHITESPACE"," ",240],["T_VARIABLE","$this",240],["T_OBJECT_OPERATOR","->",240],["T_STRING","getConnection",240],"(",")",";",["T_WHITESPACE","\n\n        ",240],["T_VARIABLE","$select",242],["T_WHITESPACE"," ",242],"=",["T_WHITESPACE"," ",242],["T_VARIABLE","$connection",242],["T_OBJECT_OPERATOR","->",242],["T_STRING","select",242],"(",")",["T_OBJECT_OPERATOR","->",242],["T_STRING","from",242],"(",["T_VARIABLE","$this",242],["T_OBJECT_OPERATOR","->",242],["T_STRING","getEntityTable",242],"(",")",",",["T_WHITESPACE"," ",242],["T_CONSTANT_ENCAPSED_STRING","'entity_id'",242],")",["T_OBJECT_OPERATOR","->",242],["T_STRING","where",242],"(",["T_CONSTANT_ENCAPSED_STRING","'sku = :sku'",242],")",";",["T_WHITESPACE","\n\n        ",242],["T_VARIABLE","$bind",244],["T_WHITESPACE"," ",244],"=",["T_WHITESPACE"," ",244],"[",["T_CONSTANT_ENCAPSED_STRING","':sku'",244],["T_WHITESPACE"," ",244],["T_DOUBLE_ARROW","=>",244],["T_WHITESPACE"," ",244],["T_STRING_CAST","(string)",244],["T_VARIABLE","$sku",244],"]",";",["T_WHITESPACE","\n\n        ",244],["T_RETURN","return",246],["T_WHITESPACE"," ",246],["T_VARIABLE","$connection",246],["T_OBJECT_OPERATOR","->",246],["T_STRING","fetchOne",246],"(",["T_VARIABLE","$select",246],",",["T_WHITESPACE"," ",246],["T_VARIABLE","$bind",246],")",";",["T_WHITESPACE","\n    ",246],"}",["T_WHITESPACE","\n\n    ",247],["T_DOC_COMMENT","\/**\n     * Process product data before save\n     *\n     * @param \\Magento\\Framework\\DataObject $object\n     * @return $this\n     *\/",249],["T_WHITESPACE","\n    ",254],["T_PROTECTED","protected",255],["T_WHITESPACE"," ",255],["T_FUNCTION","function",255],["T_WHITESPACE"," ",255],["T_STRING","_beforeSave",255],"(",["T_NS_SEPARATOR","\\",255],["T_STRING","Magento",255],["T_NS_SEPARATOR","\\",255],["T_STRING","Framework",255],["T_NS_SEPARATOR","\\",255],["T_STRING","DataObject",255],["T_WHITESPACE"," ",255],["T_VARIABLE","$object",255],")",["T_WHITESPACE","\n    ",255],"{",["T_WHITESPACE","\n        ",256],["T_VARIABLE","$self",257],["T_WHITESPACE"," ",257],"=",["T_WHITESPACE"," ",257],["T_STRING","parent",257],["T_DOUBLE_COLON","::",257],["T_STRING","_beforeSave",257],"(",["T_VARIABLE","$object",257],")",";",["T_WHITESPACE","\n        ",257],["T_DOC_COMMENT","\/**\n         * Try detect product id by sku if id is not declared\n         *\/",258],["T_WHITESPACE","\n        ",260],["T_IF","if",261],["T_WHITESPACE"," ",261],"(","!",["T_VARIABLE","$object",261],["T_OBJECT_OPERATOR","->",261],["T_STRING","getId",261],"(",")",["T_WHITESPACE"," ",261],["T_BOOLEAN_AND","&&",261],["T_WHITESPACE"," ",261],["T_VARIABLE","$object",261],["T_OBJECT_OPERATOR","->",261],["T_STRING","getSku",261],"(",")",")",["T_WHITESPACE"," ",261],"{",["T_WHITESPACE","\n            ",261],["T_VARIABLE","$object",262],["T_OBJECT_OPERATOR","->",262],["T_STRING","setId",262],"(",["T_VARIABLE","$this",262],["T_OBJECT_OPERATOR","->",262],["T_STRING","getIdBySku",262],"(",["T_VARIABLE","$object",262],["T_OBJECT_OPERATOR","->",262],["T_STRING","getSku",262],"(",")",")",")",";",["T_WHITESPACE","\n        ",262],"}",["T_WHITESPACE","\n        ",263],["T_RETURN","return",264],["T_WHITESPACE"," ",264],["T_VARIABLE","$self",264],";",["T_WHITESPACE","\n    ",264],"}",["T_WHITESPACE","\n\n    ",265],["T_DOC_COMMENT","\/**\n     * Save data related with product\n     *\n     * @param \\Magento\\Framework\\DataObject $product\n     * @return $this\n     *\/",267],["T_WHITESPACE","\n    ",272],["T_PROTECTED","protected",273],["T_WHITESPACE"," ",273],["T_FUNCTION","function",273],["T_WHITESPACE"," ",273],["T_STRING","_afterSave",273],"(",["T_NS_SEPARATOR","\\",273],["T_STRING","Magento",273],["T_NS_SEPARATOR","\\",273],["T_STRING","Framework",273],["T_NS_SEPARATOR","\\",273],["T_STRING","DataObject",273],["T_WHITESPACE"," ",273],["T_VARIABLE","$product",273],")",["T_WHITESPACE","\n    ",273],"{",["T_WHITESPACE","\n        ",274],["T_VARIABLE","$this",275],["T_OBJECT_OPERATOR","->",275],["T_STRING","_saveWebsiteIds",275],"(",["T_VARIABLE","$product",275],")",["T_OBJECT_OPERATOR","->",275],["T_STRING","_saveCategories",275],"(",["T_VARIABLE","$product",275],")",";",["T_WHITESPACE","\n        ",275],["T_RETURN","return",276],["T_WHITESPACE"," ",276],["T_STRING","parent",276],["T_DOUBLE_COLON","::",276],["T_STRING","_afterSave",276],"(",["T_VARIABLE","$product",276],")",";",["T_WHITESPACE","\n    ",276],"}",["T_WHITESPACE","\n\n    ",277],["T_DOC_COMMENT","\/**\n     * {@inheritdoc}\n     *\/",279],["T_WHITESPACE","\n    ",281],["T_PUBLIC","public",282],["T_WHITESPACE"," ",282],["T_FUNCTION","function",282],["T_WHITESPACE"," ",282],["T_STRING","delete",282],"(",["T_VARIABLE","$object",282],")",["T_WHITESPACE","\n    ",282],"{",["T_WHITESPACE","\n        ",283],["T_VARIABLE","$this",284],["T_OBJECT_OPERATOR","->",284],["T_STRING","getEntityManager",284],"(",")",["T_OBJECT_OPERATOR","->",284],["T_STRING","delete",284],"(",["T_VARIABLE","$object",284],")",";",["T_WHITESPACE","\n        ",284],["T_VARIABLE","$this",285],["T_OBJECT_OPERATOR","->",285],["T_STRING","eventManager",285],["T_OBJECT_OPERATOR","->",285],["T_STRING","dispatch",285],"(",["T_WHITESPACE","\n            ",285],["T_CONSTANT_ENCAPSED_STRING","'catalog_product_delete_after_done'",286],",",["T_WHITESPACE","\n            ",286],"[",["T_CONSTANT_ENCAPSED_STRING","'product'",287],["T_WHITESPACE"," ",287],["T_DOUBLE_ARROW","=>",287],["T_WHITESPACE"," ",287],["T_VARIABLE","$object",287],"]",["T_WHITESPACE","\n        ",287],")",";",["T_WHITESPACE","\n        ",288],["T_RETURN","return",289],["T_WHITESPACE"," ",289],["T_VARIABLE","$this",289],";",["T_WHITESPACE","\n    ",289],"}",["T_WHITESPACE","\n\n    ",290],["T_DOC_COMMENT","\/**\n     * Save product website relations\n     *\n     * @deprecated\n     * @param \\Magento\\Catalog\\Model\\Product $product\n     * @return $this\n     *\/",292],["T_WHITESPACE","\n    ",298],["T_PROTECTED","protected",299],["T_WHITESPACE"," ",299],["T_FUNCTION","function",299],["T_WHITESPACE"," ",299],["T_STRING","_saveWebsiteIds",299],"(",["T_VARIABLE","$product",299],")",["T_WHITESPACE","\n    ",299],"{",["T_WHITESPACE","\n        ",300],["T_IF","if",301],["T_WHITESPACE"," ",301],"(",["T_VARIABLE","$product",301],["T_OBJECT_OPERATOR","->",301],["T_STRING","hasWebsiteIds",301],"(",")",")",["T_WHITESPACE"," ",301],"{",["T_WHITESPACE","\n            ",301],["T_IF","if",302],["T_WHITESPACE"," ",302],"(",["T_VARIABLE","$this",302],["T_OBJECT_OPERATOR","->",302],["T_STRING","_storeManager",302],["T_OBJECT_OPERATOR","->",302],["T_STRING","isSingleStoreMode",302],"(",")",")",["T_WHITESPACE"," ",302],"{",["T_WHITESPACE","\n                ",302],["T_VARIABLE","$id",303],["T_WHITESPACE"," ",303],"=",["T_WHITESPACE"," ",303],["T_VARIABLE","$this",303],["T_OBJECT_OPERATOR","->",303],["T_STRING","_storeManager",303],["T_OBJECT_OPERATOR","->",303],["T_STRING","getDefaultStoreView",303],"(",")",["T_OBJECT_OPERATOR","->",303],["T_STRING","getWebsiteId",303],"(",")",";",["T_WHITESPACE","\n                ",303],["T_VARIABLE","$product",304],["T_OBJECT_OPERATOR","->",304],["T_STRING","setWebsiteIds",304],"(","[",["T_VARIABLE","$id",304],"]",")",";",["T_WHITESPACE","\n            ",304],"}",["T_WHITESPACE","\n            ",305],["T_VARIABLE","$websiteIds",306],["T_WHITESPACE"," ",306],"=",["T_WHITESPACE"," ",306],["T_VARIABLE","$product",306],["T_OBJECT_OPERATOR","->",306],["T_STRING","getWebsiteIds",306],"(",")",";",["T_WHITESPACE","\n            ",306],["T_VARIABLE","$product",307],["T_OBJECT_OPERATOR","->",307],["T_STRING","setIsChangedWebsites",307],"(",["T_STRING","false",307],")",";",["T_WHITESPACE","\n            ",307],["T_VARIABLE","$changed",308],["T_WHITESPACE"," ",308],"=",["T_WHITESPACE"," ",308],["T_VARIABLE","$this",308],["T_OBJECT_OPERATOR","->",308],["T_STRING","getProductWebsiteLink",308],"(",")",["T_OBJECT_OPERATOR","->",308],["T_STRING","saveWebsiteIds",308],"(",["T_VARIABLE","$product",308],",",["T_WHITESPACE"," ",308],["T_VARIABLE","$websiteIds",308],")",";",["T_WHITESPACE","\n\n            ",308],["T_IF","if",310],["T_WHITESPACE"," ",310],"(",["T_VARIABLE","$changed",310],")",["T_WHITESPACE"," ",310],"{",["T_WHITESPACE","\n                ",310],["T_VARIABLE","$product",311],["T_OBJECT_OPERATOR","->",311],["T_STRING","setIsChangedWebsites",311],"(",["T_STRING","true",311],")",";",["T_WHITESPACE","\n            ",311],"}",["T_WHITESPACE","\n        ",312],"}",["T_WHITESPACE","\n\n        ",313],["T_RETURN","return",315],["T_WHITESPACE"," ",315],["T_VARIABLE","$this",315],";",["T_WHITESPACE","\n    ",315],"}",["T_WHITESPACE","\n\n    ",316],["T_DOC_COMMENT","\/**\n     * Save product category relations\n     *\n     * @param \\Magento\\Framework\\DataObject $object\n     * @return $this\n     * @SuppressWarnings(PHPMD.UnusedFormalParameter)\n     * @deprecated\n     *\/",318],["T_WHITESPACE","\n    ",325],["T_PROTECTED","protected",326],["T_WHITESPACE"," ",326],["T_FUNCTION","function",326],["T_WHITESPACE"," ",326],["T_STRING","_saveCategories",326],"(",["T_NS_SEPARATOR","\\",326],["T_STRING","Magento",326],["T_NS_SEPARATOR","\\",326],["T_STRING","Framework",326],["T_NS_SEPARATOR","\\",326],["T_STRING","DataObject",326],["T_WHITESPACE"," ",326],["T_VARIABLE","$object",326],")",["T_WHITESPACE","\n    ",326],"{",["T_WHITESPACE","\n        ",327],["T_RETURN","return",328],["T_WHITESPACE"," ",328],["T_VARIABLE","$this",328],";",["T_WHITESPACE","\n    ",328],"}",["T_WHITESPACE","\n\n    ",329],["T_DOC_COMMENT","\/**\n     * Get collection of product categories\n     *\n     * @param \\Magento\\Catalog\\Model\\Product $product\n     * @return \\Magento\\Catalog\\Model\\ResourceModel\\Category\\Collection\n     *\/",331],["T_WHITESPACE","\n    ",336],["T_PUBLIC","public",337],["T_WHITESPACE"," ",337],["T_FUNCTION","function",337],["T_WHITESPACE"," ",337],["T_STRING","getCategoryCollection",337],"(",["T_VARIABLE","$product",337],")",["T_WHITESPACE","\n    ",337],"{",["T_WHITESPACE","\n        ",338],["T_DOC_COMMENT","\/** @var \\Magento\\Catalog\\Model\\ResourceModel\\Category\\Collection $collection *\/",339],["T_WHITESPACE","\n        ",339],["T_VARIABLE","$collection",340],["T_WHITESPACE"," ",340],"=",["T_WHITESPACE"," ",340],["T_VARIABLE","$this",340],["T_OBJECT_OPERATOR","->",340],["T_STRING","_categoryCollectionFactory",340],["T_OBJECT_OPERATOR","->",340],["T_STRING","create",340],"(",")",";",["T_WHITESPACE","\n        ",340],["T_VARIABLE","$collection",341],["T_OBJECT_OPERATOR","->",341],["T_STRING","joinField",341],"(",["T_WHITESPACE","\n            ",341],["T_CONSTANT_ENCAPSED_STRING","'product_id'",342],",",["T_WHITESPACE","\n            ",342],["T_CONSTANT_ENCAPSED_STRING","'catalog_category_product'",343],",",["T_WHITESPACE","\n            ",343],["T_CONSTANT_ENCAPSED_STRING","'product_id'",344],",",["T_WHITESPACE","\n            ",344],["T_CONSTANT_ENCAPSED_STRING","'category_id = entity_id'",345],",",["T_WHITESPACE","\n            ",345],["T_STRING","null",346],["T_WHITESPACE","\n        ",346],")",["T_OBJECT_OPERATOR","->",347],["T_STRING","addFieldToFilter",347],"(",["T_WHITESPACE","\n            ",347],["T_CONSTANT_ENCAPSED_STRING","'product_id'",348],",",["T_WHITESPACE","\n            ",348],["T_INT_CAST","(int)",349],["T_VARIABLE","$product",349],["T_OBJECT_OPERATOR","->",349],["T_STRING","getEntityId",349],"(",")",["T_WHITESPACE","\n        ",349],")",";",["T_WHITESPACE","\n        ",350],["T_RETURN","return",351],["T_WHITESPACE"," ",351],["T_VARIABLE","$collection",351],";",["T_WHITESPACE","\n    ",351],"}",["T_WHITESPACE","\n\n    ",352],["T_DOC_COMMENT","\/**\n     * Retrieve category ids where product is available\n     *\n     * @param \\Magento\\Catalog\\Model\\Product $object\n     * @return array\n     *\/",354],["T_WHITESPACE","\n    ",359],["T_PUBLIC","public",360],["T_WHITESPACE"," ",360],["T_FUNCTION","function",360],["T_WHITESPACE"," ",360],["T_STRING","getAvailableInCategories",360],"(",["T_VARIABLE","$object",360],")",["T_WHITESPACE","\n    ",360],"{",["T_WHITESPACE","\n        ",361],["T_COMMENT","\/\/ is_parent=1 ensures that we'll get only category IDs those are direct parents of the product, instead of\n",362],["T_WHITESPACE","        ",363],["T_COMMENT","\/\/ fetching all parent IDs, including those are higher on the tree\n",363],["T_WHITESPACE","        ",364],["T_VARIABLE","$entityId",364],["T_WHITESPACE"," ",364],"=",["T_WHITESPACE"," ",364],["T_INT_CAST","(int)",364],["T_VARIABLE","$object",364],["T_OBJECT_OPERATOR","->",364],["T_STRING","getEntityId",364],"(",")",";",["T_WHITESPACE","\n        ",364],["T_IF","if",365],["T_WHITESPACE"," ",365],"(","!",["T_ISSET","isset",365],"(",["T_VARIABLE","$this",365],["T_OBJECT_OPERATOR","->",365],["T_STRING","availableCategoryIdsCache",365],"[",["T_VARIABLE","$entityId",365],"]",")",")",["T_WHITESPACE"," ",365],"{",["T_WHITESPACE","\n            ",365],["T_VARIABLE","$this",366],["T_OBJECT_OPERATOR","->",366],["T_STRING","availableCategoryIdsCache",366],"[",["T_VARIABLE","$entityId",366],"]",["T_WHITESPACE"," ",366],"=",["T_WHITESPACE"," ",366],["T_VARIABLE","$this",366],["T_OBJECT_OPERATOR","->",366],["T_STRING","getConnection",366],"(",")",["T_OBJECT_OPERATOR","->",366],["T_STRING","fetchCol",366],"(",["T_WHITESPACE","\n                ",366],["T_VARIABLE","$this",367],["T_OBJECT_OPERATOR","->",367],["T_STRING","getConnection",367],"(",")",["T_OBJECT_OPERATOR","->",367],["T_STRING","select",367],"(",")",["T_OBJECT_OPERATOR","->",367],["T_STRING","distinct",367],"(",")",["T_OBJECT_OPERATOR","->",367],["T_STRING","from",367],"(",["T_WHITESPACE","\n                    ",367],["T_VARIABLE","$this",368],["T_OBJECT_OPERATOR","->",368],["T_STRING","getTable",368],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog_category_product_index'",368],")",",",["T_WHITESPACE","\n                    ",368],"[",["T_CONSTANT_ENCAPSED_STRING","'category_id'",369],"]",["T_WHITESPACE","\n                ",369],")",["T_OBJECT_OPERATOR","->",370],["T_STRING","where",370],"(",["T_WHITESPACE","\n                    ",370],["T_CONSTANT_ENCAPSED_STRING","'product_id = ? AND is_parent = 1'",371],",",["T_WHITESPACE","\n                    ",371],["T_VARIABLE","$entityId",372],["T_WHITESPACE","\n                ",372],")",["T_OBJECT_OPERATOR","->",373],["T_STRING","where",373],"(",["T_WHITESPACE","\n                    ",373],["T_CONSTANT_ENCAPSED_STRING","'visibility != ?'",374],",",["T_WHITESPACE","\n                    ",374],["T_NS_SEPARATOR","\\",375],["T_STRING","Magento",375],["T_NS_SEPARATOR","\\",375],["T_STRING","Catalog",375],["T_NS_SEPARATOR","\\",375],["T_STRING","Model",375],["T_NS_SEPARATOR","\\",375],["T_STRING","Product",375],["T_NS_SEPARATOR","\\",375],["T_STRING","Visibility",375],["T_DOUBLE_COLON","::",375],["T_STRING","VISIBILITY_NOT_VISIBLE",375],["T_WHITESPACE","\n                ",375],")",["T_WHITESPACE","\n            ",376],")",";",["T_WHITESPACE","\n        ",377],"}",["T_WHITESPACE","\n        ",378],["T_RETURN","return",379],["T_WHITESPACE"," ",379],["T_VARIABLE","$this",379],["T_OBJECT_OPERATOR","->",379],["T_STRING","availableCategoryIdsCache",379],"[",["T_VARIABLE","$entityId",379],"]",";",["T_WHITESPACE","\n    ",379],"}",["T_WHITESPACE","\n\n    ",380],["T_DOC_COMMENT","\/**\n     * Get default attribute source model\n     *\n     * @return string\n     *\/",382],["T_WHITESPACE","\n    ",386],["T_PUBLIC","public",387],["T_WHITESPACE"," ",387],["T_FUNCTION","function",387],["T_WHITESPACE"," ",387],["T_STRING","getDefaultAttributeSourceModel",387],"(",")",["T_WHITESPACE","\n    ",387],"{",["T_WHITESPACE","\n        ",388],["T_RETURN","return",389],["T_WHITESPACE"," ",389],["T_NS_SEPARATOR","\\",389],["T_STRING","Magento",389],["T_NS_SEPARATOR","\\",389],["T_STRING","Eav",389],["T_NS_SEPARATOR","\\",389],["T_STRING","Model",389],["T_NS_SEPARATOR","\\",389],["T_STRING","Entity",389],["T_NS_SEPARATOR","\\",389],["T_STRING","Attribute",389],["T_NS_SEPARATOR","\\",389],["T_STRING","Source",389],["T_NS_SEPARATOR","\\",389],["T_STRING","Table",389],["T_DOUBLE_COLON","::",389],["T_CLASS","class",389],";",["T_WHITESPACE","\n    ",389],"}",["T_WHITESPACE","\n\n    ",390],["T_DOC_COMMENT","\/**\n     * Check availability display product in category\n     *\n     * @param \\Magento\\Catalog\\Model\\Product $product\n     * @param int $categoryId\n     * @return string\n     *\/",392],["T_WHITESPACE","\n    ",398],["T_PUBLIC","public",399],["T_WHITESPACE"," ",399],["T_FUNCTION","function",399],["T_WHITESPACE"," ",399],["T_STRING","canBeShowInCategory",399],"(",["T_VARIABLE","$product",399],",",["T_WHITESPACE"," ",399],["T_VARIABLE","$categoryId",399],")",["T_WHITESPACE","\n    ",399],"{",["T_WHITESPACE","\n        ",400],["T_VARIABLE","$select",401],["T_WHITESPACE"," ",401],"=",["T_WHITESPACE"," ",401],["T_VARIABLE","$this",401],["T_OBJECT_OPERATOR","->",401],["T_STRING","getConnection",401],"(",")",["T_OBJECT_OPERATOR","->",401],["T_STRING","select",401],"(",")",["T_OBJECT_OPERATOR","->",401],["T_STRING","from",401],"(",["T_WHITESPACE","\n            ",401],["T_VARIABLE","$this",402],["T_OBJECT_OPERATOR","->",402],["T_STRING","getTable",402],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog_category_product_index'",402],")",",",["T_WHITESPACE","\n            ",402],["T_CONSTANT_ENCAPSED_STRING","'product_id'",403],["T_WHITESPACE","\n        ",403],")",["T_OBJECT_OPERATOR","->",404],["T_STRING","where",404],"(",["T_WHITESPACE","\n            ",404],["T_CONSTANT_ENCAPSED_STRING","'product_id = ?'",405],",",["T_WHITESPACE","\n            ",405],["T_INT_CAST","(int)",406],["T_VARIABLE","$product",406],["T_OBJECT_OPERATOR","->",406],["T_STRING","getEntityId",406],"(",")",["T_WHITESPACE","\n        ",406],")",["T_OBJECT_OPERATOR","->",407],["T_STRING","where",407],"(",["T_WHITESPACE","\n            ",407],["T_CONSTANT_ENCAPSED_STRING","'category_id = ?'",408],",",["T_WHITESPACE","\n            ",408],["T_INT_CAST","(int)",409],["T_VARIABLE","$categoryId",409],["T_WHITESPACE","\n        ",409],")",";",["T_WHITESPACE","\n\n        ",410],["T_RETURN","return",412],["T_WHITESPACE"," ",412],["T_VARIABLE","$this",412],["T_OBJECT_OPERATOR","->",412],["T_STRING","getConnection",412],"(",")",["T_OBJECT_OPERATOR","->",412],["T_STRING","fetchOne",412],"(",["T_VARIABLE","$select",412],")",";",["T_WHITESPACE","\n    ",412],"}",["T_WHITESPACE","\n\n    ",413],["T_DOC_COMMENT","\/**\n     * Duplicate product store values\n     *\n     * @param int $oldId\n     * @param int $newId\n     * @return $this\n     *\/",415],["T_WHITESPACE","\n    ",421],["T_PUBLIC","public",422],["T_WHITESPACE"," ",422],["T_FUNCTION","function",422],["T_WHITESPACE"," ",422],["T_STRING","duplicate",422],"(",["T_VARIABLE","$oldId",422],",",["T_WHITESPACE"," ",422],["T_VARIABLE","$newId",422],")",["T_WHITESPACE","\n    ",422],"{",["T_WHITESPACE","\n        ",423],["T_VARIABLE","$eavTables",424],["T_WHITESPACE"," ",424],"=",["T_WHITESPACE"," ",424],"[",["T_CONSTANT_ENCAPSED_STRING","'datetime'",424],",",["T_WHITESPACE"," ",424],["T_CONSTANT_ENCAPSED_STRING","'decimal'",424],",",["T_WHITESPACE"," ",424],["T_CONSTANT_ENCAPSED_STRING","'int'",424],",",["T_WHITESPACE"," ",424],["T_CONSTANT_ENCAPSED_STRING","'text'",424],",",["T_WHITESPACE"," ",424],["T_CONSTANT_ENCAPSED_STRING","'varchar'",424],"]",";",["T_WHITESPACE","\n        ",424],["T_VARIABLE","$connection",425],["T_WHITESPACE"," ",425],"=",["T_WHITESPACE"," ",425],["T_VARIABLE","$this",425],["T_OBJECT_OPERATOR","->",425],["T_STRING","getConnection",425],"(",")",";",["T_WHITESPACE","\n\n        ",425],["T_COMMENT","\/\/ duplicate EAV store values\n",427],["T_WHITESPACE","        ",428],["T_FOREACH","foreach",428],["T_WHITESPACE"," ",428],"(",["T_VARIABLE","$eavTables",428],["T_WHITESPACE"," ",428],["T_AS","as",428],["T_WHITESPACE"," ",428],["T_VARIABLE","$suffix",428],")",["T_WHITESPACE"," ",428],"{",["T_WHITESPACE","\n            ",428],["T_VARIABLE","$tableName",429],["T_WHITESPACE"," ",429],"=",["T_WHITESPACE"," ",429],["T_VARIABLE","$this",429],["T_OBJECT_OPERATOR","->",429],["T_STRING","getTable",429],"(","[",["T_CONSTANT_ENCAPSED_STRING","'catalog_product_entity'",429],",",["T_WHITESPACE"," ",429],["T_VARIABLE","$suffix",429],"]",")",";",["T_WHITESPACE","\n\n            ",429],["T_VARIABLE","$select",431],["T_WHITESPACE"," ",431],"=",["T_WHITESPACE"," ",431],["T_VARIABLE","$connection",431],["T_OBJECT_OPERATOR","->",431],["T_STRING","select",431],"(",")",["T_OBJECT_OPERATOR","->",431],["T_STRING","from",431],"(",["T_WHITESPACE","\n                ",431],["T_VARIABLE","$tableName",432],",",["T_WHITESPACE","\n                ",432],"[",["T_WHITESPACE","\n                    ",433],["T_CONSTANT_ENCAPSED_STRING","'attribute_id'",434],",",["T_WHITESPACE","\n                    ",434],["T_CONSTANT_ENCAPSED_STRING","'store_id'",435],",",["T_WHITESPACE","\n                    ",435],["T_VARIABLE","$this",436],["T_OBJECT_OPERATOR","->",436],["T_STRING","getLinkField",436],"(",")",["T_WHITESPACE"," ",436],["T_DOUBLE_ARROW","=>",436],["T_WHITESPACE"," ",436],["T_NEW","new",436],["T_WHITESPACE"," ",436],["T_NS_SEPARATOR","\\",436],["T_STRING","Zend_Db_Expr",436],"(",["T_VARIABLE","$connection",436],["T_OBJECT_OPERATOR","->",436],["T_STRING","quote",436],"(",["T_VARIABLE","$newId",436],")",")",",",["T_WHITESPACE","\n                    ",436],["T_CONSTANT_ENCAPSED_STRING","'value'",437],["T_WHITESPACE","\n                ",437],"]",["T_WHITESPACE","\n            ",438],")",["T_OBJECT_OPERATOR","->",439],["T_STRING","where",439],"(",["T_WHITESPACE","\n                ",439],["T_VARIABLE","$this",440],["T_OBJECT_OPERATOR","->",440],["T_STRING","getLinkField",440],"(",")",["T_WHITESPACE"," ",440],".",["T_WHITESPACE"," ",440],["T_CONSTANT_ENCAPSED_STRING","' = ?'",440],",",["T_WHITESPACE","\n                ",440],["T_VARIABLE","$oldId",441],["T_WHITESPACE","\n            ",441],")",";",["T_WHITESPACE","\n\n            ",442],["T_VARIABLE","$connection",444],["T_OBJECT_OPERATOR","->",444],["T_STRING","query",444],"(",["T_WHITESPACE","\n                ",444],["T_VARIABLE","$connection",445],["T_OBJECT_OPERATOR","->",445],["T_STRING","insertFromSelect",445],"(",["T_WHITESPACE","\n                    ",445],["T_VARIABLE","$select",446],",",["T_WHITESPACE","\n                    ",446],["T_VARIABLE","$tableName",447],",",["T_WHITESPACE","\n                    ",447],"[",["T_CONSTANT_ENCAPSED_STRING","'attribute_id'",448],",",["T_WHITESPACE"," ",448],["T_CONSTANT_ENCAPSED_STRING","'store_id'",448],",",["T_WHITESPACE"," ",448],["T_VARIABLE","$this",448],["T_OBJECT_OPERATOR","->",448],["T_STRING","getLinkField",448],"(",")",",",["T_WHITESPACE"," ",448],["T_CONSTANT_ENCAPSED_STRING","'value'",448],"]",",",["T_WHITESPACE","\n                    ",448],["T_NS_SEPARATOR","\\",449],["T_STRING","Magento",449],["T_NS_SEPARATOR","\\",449],["T_STRING","Framework",449],["T_NS_SEPARATOR","\\",449],["T_STRING","DB",449],["T_NS_SEPARATOR","\\",449],["T_STRING","Adapter",449],["T_NS_SEPARATOR","\\",449],["T_STRING","AdapterInterface",449],["T_DOUBLE_COLON","::",449],["T_STRING","INSERT_IGNORE",449],["T_WHITESPACE","\n                ",449],")",["T_WHITESPACE","\n            ",450],")",";",["T_WHITESPACE","\n        ",451],"}",["T_WHITESPACE","\n\n        ",452],["T_COMMENT","\/\/ set status as disabled\n",454],["T_WHITESPACE","        ",455],["T_VARIABLE","$statusAttribute",455],["T_WHITESPACE"," ",455],"=",["T_WHITESPACE"," ",455],["T_VARIABLE","$this",455],["T_OBJECT_OPERATOR","->",455],["T_STRING","getAttribute",455],"(",["T_CONSTANT_ENCAPSED_STRING","'status'",455],")",";",["T_WHITESPACE","\n        ",455],["T_VARIABLE","$statusAttributeId",456],["T_WHITESPACE"," ",456],"=",["T_WHITESPACE"," ",456],["T_VARIABLE","$statusAttribute",456],["T_OBJECT_OPERATOR","->",456],["T_STRING","getAttributeId",456],"(",")",";",["T_WHITESPACE","\n        ",456],["T_VARIABLE","$statusAttributeTable",457],["T_WHITESPACE"," ",457],"=",["T_WHITESPACE"," ",457],["T_VARIABLE","$statusAttribute",457],["T_OBJECT_OPERATOR","->",457],["T_STRING","getBackend",457],"(",")",["T_OBJECT_OPERATOR","->",457],["T_STRING","getTable",457],"(",")",";",["T_WHITESPACE","\n        ",457],["T_VARIABLE","$updateCond",458],"[","]",["T_WHITESPACE"," ",458],"=",["T_WHITESPACE"," ",458],["T_VARIABLE","$connection",458],["T_OBJECT_OPERATOR","->",458],["T_STRING","quoteInto",458],"(",["T_VARIABLE","$this",458],["T_OBJECT_OPERATOR","->",458],["T_STRING","getLinkField",458],"(",")",["T_WHITESPACE"," ",458],".",["T_WHITESPACE"," ",458],["T_CONSTANT_ENCAPSED_STRING","' = ?'",458],",",["T_WHITESPACE"," ",458],["T_VARIABLE","$newId",458],")",";",["T_WHITESPACE","\n        ",458],["T_VARIABLE","$updateCond",459],"[","]",["T_WHITESPACE"," ",459],"=",["T_WHITESPACE"," ",459],["T_VARIABLE","$connection",459],["T_OBJECT_OPERATOR","->",459],["T_STRING","quoteInto",459],"(",["T_CONSTANT_ENCAPSED_STRING","'attribute_id = ?'",459],",",["T_WHITESPACE"," ",459],["T_VARIABLE","$statusAttributeId",459],")",";",["T_WHITESPACE","\n        ",459],["T_VARIABLE","$connection",460],["T_OBJECT_OPERATOR","->",460],["T_STRING","update",460],"(",["T_WHITESPACE","\n            ",460],["T_VARIABLE","$statusAttributeTable",461],",",["T_WHITESPACE","\n            ",461],"[",["T_CONSTANT_ENCAPSED_STRING","'value'",462],["T_WHITESPACE"," ",462],["T_DOUBLE_ARROW","=>",462],["T_WHITESPACE"," ",462],["T_NS_SEPARATOR","\\",462],["T_STRING","Magento",462],["T_NS_SEPARATOR","\\",462],["T_STRING","Catalog",462],["T_NS_SEPARATOR","\\",462],["T_STRING","Model",462],["T_NS_SEPARATOR","\\",462],["T_STRING","Product",462],["T_NS_SEPARATOR","\\",462],["T_STRING","Attribute",462],["T_NS_SEPARATOR","\\",462],["T_STRING","Source",462],["T_NS_SEPARATOR","\\",462],["T_STRING","Status",462],["T_DOUBLE_COLON","::",462],["T_STRING","STATUS_DISABLED",462],"]",",",["T_WHITESPACE","\n            ",462],["T_VARIABLE","$updateCond",463],["T_WHITESPACE","\n        ",463],")",";",["T_WHITESPACE","\n\n        ",464],["T_RETURN","return",466],["T_WHITESPACE"," ",466],["T_VARIABLE","$this",466],";",["T_WHITESPACE","\n    ",466],"}",["T_WHITESPACE","\n\n    ",467],["T_DOC_COMMENT","\/**\n     * Get SKU through product identifiers\n     *\n     * @param  array $productIds\n     * @return array\n     *\/",469],["T_WHITESPACE","\n    ",474],["T_PUBLIC","public",475],["T_WHITESPACE"," ",475],["T_FUNCTION","function",475],["T_WHITESPACE"," ",475],["T_STRING","getProductsSku",475],"(",["T_ARRAY","array",475],["T_WHITESPACE"," ",475],["T_VARIABLE","$productIds",475],")",["T_WHITESPACE","\n    ",475],"{",["T_WHITESPACE","\n        ",476],["T_VARIABLE","$select",477],["T_WHITESPACE"," ",477],"=",["T_WHITESPACE"," ",477],["T_VARIABLE","$this",477],["T_OBJECT_OPERATOR","->",477],["T_STRING","getConnection",477],"(",")",["T_OBJECT_OPERATOR","->",477],["T_STRING","select",477],"(",")",["T_OBJECT_OPERATOR","->",477],["T_STRING","from",477],"(",["T_WHITESPACE","\n            ",477],["T_VARIABLE","$this",478],["T_OBJECT_OPERATOR","->",478],["T_STRING","getTable",478],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog_product_entity'",478],")",",",["T_WHITESPACE","\n            ",478],"[",["T_CONSTANT_ENCAPSED_STRING","'entity_id'",479],",",["T_WHITESPACE"," ",479],["T_CONSTANT_ENCAPSED_STRING","'sku'",479],"]",["T_WHITESPACE","\n        ",479],")",["T_OBJECT_OPERATOR","->",480],["T_STRING","where",480],"(",["T_WHITESPACE","\n            ",480],["T_CONSTANT_ENCAPSED_STRING","'entity_id IN (?)'",481],",",["T_WHITESPACE","\n            ",481],["T_VARIABLE","$productIds",482],["T_WHITESPACE","\n        ",482],")",";",["T_WHITESPACE","\n        ",483],["T_RETURN","return",484],["T_WHITESPACE"," ",484],["T_VARIABLE","$this",484],["T_OBJECT_OPERATOR","->",484],["T_STRING","getConnection",484],"(",")",["T_OBJECT_OPERATOR","->",484],["T_STRING","fetchAll",484],"(",["T_VARIABLE","$select",484],")",";",["T_WHITESPACE","\n    ",484],"}",["T_WHITESPACE","\n\n    ",485],["T_DOC_COMMENT","\/**\n     * Get product ids by their sku\n     *\n     * @param  array $productSkuList\n     * @return array\n     *\/",487],["T_WHITESPACE","\n    ",492],["T_PUBLIC","public",493],["T_WHITESPACE"," ",493],["T_FUNCTION","function",493],["T_WHITESPACE"," ",493],["T_STRING","getProductsIdsBySkus",493],"(",["T_ARRAY","array",493],["T_WHITESPACE"," ",493],["T_VARIABLE","$productSkuList",493],")",["T_WHITESPACE","\n    ",493],"{",["T_WHITESPACE","\n        ",494],["T_VARIABLE","$select",495],["T_WHITESPACE"," ",495],"=",["T_WHITESPACE"," ",495],["T_VARIABLE","$this",495],["T_OBJECT_OPERATOR","->",495],["T_STRING","getConnection",495],"(",")",["T_OBJECT_OPERATOR","->",495],["T_STRING","select",495],"(",")",["T_OBJECT_OPERATOR","->",495],["T_STRING","from",495],"(",["T_WHITESPACE","\n            ",495],["T_VARIABLE","$this",496],["T_OBJECT_OPERATOR","->",496],["T_STRING","getTable",496],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog_product_entity'",496],")",",",["T_WHITESPACE","\n            ",496],"[",["T_CONSTANT_ENCAPSED_STRING","'sku'",497],",",["T_WHITESPACE"," ",497],["T_CONSTANT_ENCAPSED_STRING","'entity_id'",497],"]",["T_WHITESPACE","\n        ",497],")",["T_OBJECT_OPERATOR","->",498],["T_STRING","where",498],"(",["T_WHITESPACE","\n            ",498],["T_CONSTANT_ENCAPSED_STRING","'sku IN (?)'",499],",",["T_WHITESPACE","\n            ",499],["T_VARIABLE","$productSkuList",500],["T_WHITESPACE","\n        ",500],")",";",["T_WHITESPACE","\n\n        ",501],["T_VARIABLE","$result",503],["T_WHITESPACE"," ",503],"=",["T_WHITESPACE"," ",503],"[","]",";",["T_WHITESPACE","\n        ",503],["T_FOREACH","foreach",504],["T_WHITESPACE"," ",504],"(",["T_VARIABLE","$this",504],["T_OBJECT_OPERATOR","->",504],["T_STRING","getConnection",504],"(",")",["T_OBJECT_OPERATOR","->",504],["T_STRING","fetchAll",504],"(",["T_VARIABLE","$select",504],")",["T_WHITESPACE"," ",504],["T_AS","as",504],["T_WHITESPACE"," ",504],["T_VARIABLE","$row",504],")",["T_WHITESPACE"," ",504],"{",["T_WHITESPACE","\n            ",504],["T_VARIABLE","$result",505],"[",["T_VARIABLE","$row",505],"[",["T_CONSTANT_ENCAPSED_STRING","'sku'",505],"]","]",["T_WHITESPACE"," ",505],"=",["T_WHITESPACE"," ",505],["T_VARIABLE","$row",505],"[",["T_CONSTANT_ENCAPSED_STRING","'entity_id'",505],"]",";",["T_WHITESPACE","\n        ",505],"}",["T_WHITESPACE","\n        ",506],["T_RETURN","return",507],["T_WHITESPACE"," ",507],["T_VARIABLE","$result",507],";",["T_WHITESPACE","\n    ",507],"}",["T_WHITESPACE","\n\n    ",508],["T_DOC_COMMENT","\/**\n     * Retrieve product entities info\n     *\n     * @param  array|string|null $columns\n     * @return array\n     *\/",510],["T_WHITESPACE","\n    ",515],["T_PUBLIC","public",516],["T_WHITESPACE"," ",516],["T_FUNCTION","function",516],["T_WHITESPACE"," ",516],["T_STRING","getProductEntitiesInfo",516],"(",["T_VARIABLE","$columns",516],["T_WHITESPACE"," ",516],"=",["T_WHITESPACE"," ",516],["T_STRING","null",516],")",["T_WHITESPACE","\n    ",516],"{",["T_WHITESPACE","\n        ",517],["T_IF","if",518],["T_WHITESPACE"," ",518],"(","!",["T_EMPTY","empty",518],"(",["T_VARIABLE","$columns",518],")",["T_WHITESPACE"," ",518],["T_BOOLEAN_AND","&&",518],["T_WHITESPACE"," ",518],["T_STRING","is_string",518],"(",["T_VARIABLE","$columns",518],")",")",["T_WHITESPACE"," ",518],"{",["T_WHITESPACE","\n            ",518],["T_VARIABLE","$columns",519],["T_WHITESPACE"," ",519],"=",["T_WHITESPACE"," ",519],"[",["T_VARIABLE","$columns",519],"]",";",["T_WHITESPACE","\n        ",519],"}",["T_WHITESPACE","\n        ",520],["T_IF","if",521],["T_WHITESPACE"," ",521],"(",["T_EMPTY","empty",521],"(",["T_VARIABLE","$columns",521],")",["T_WHITESPACE"," ",521],["T_BOOLEAN_OR","||",521],["T_WHITESPACE"," ",521],"!",["T_STRING","is_array",521],"(",["T_VARIABLE","$columns",521],")",")",["T_WHITESPACE"," ",521],"{",["T_WHITESPACE","\n            ",521],["T_VARIABLE","$columns",522],["T_WHITESPACE"," ",522],"=",["T_WHITESPACE"," ",522],["T_VARIABLE","$this",522],["T_OBJECT_OPERATOR","->",522],["T_STRING","_getDefaultAttributes",522],"(",")",";",["T_WHITESPACE","\n        ",522],"}",["T_WHITESPACE","\n\n        ",523],["T_VARIABLE","$connection",525],["T_WHITESPACE"," ",525],"=",["T_WHITESPACE"," ",525],["T_VARIABLE","$this",525],["T_OBJECT_OPERATOR","->",525],["T_STRING","getConnection",525],"(",")",";",["T_WHITESPACE","\n        ",525],["T_VARIABLE","$select",526],["T_WHITESPACE"," ",526],"=",["T_WHITESPACE"," ",526],["T_VARIABLE","$connection",526],["T_OBJECT_OPERATOR","->",526],["T_STRING","select",526],"(",")",["T_OBJECT_OPERATOR","->",526],["T_STRING","from",526],"(",["T_VARIABLE","$this",526],["T_OBJECT_OPERATOR","->",526],["T_STRING","getTable",526],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog_product_entity'",526],")",",",["T_WHITESPACE"," ",526],["T_VARIABLE","$columns",526],")",";",["T_WHITESPACE","\n\n        ",526],["T_RETURN","return",528],["T_WHITESPACE"," ",528],["T_VARIABLE","$connection",528],["T_OBJECT_OPERATOR","->",528],["T_STRING","fetchAll",528],"(",["T_VARIABLE","$select",528],")",";",["T_WHITESPACE","\n    ",528],"}",["T_WHITESPACE","\n\n    ",529],["T_DOC_COMMENT","\/**\n     * Get total number of records in the system\n     *\n     * @return int\n     *\/",531],["T_WHITESPACE","\n    ",535],["T_PUBLIC","public",536],["T_WHITESPACE"," ",536],["T_FUNCTION","function",536],["T_WHITESPACE"," ",536],["T_STRING","countAll",536],"(",")",["T_WHITESPACE","\n    ",536],"{",["T_WHITESPACE","\n        ",537],["T_VARIABLE","$connection",538],["T_WHITESPACE"," ",538],"=",["T_WHITESPACE"," ",538],["T_VARIABLE","$this",538],["T_OBJECT_OPERATOR","->",538],["T_STRING","getConnection",538],"(",")",";",["T_WHITESPACE","\n        ",538],["T_VARIABLE","$select",539],["T_WHITESPACE"," ",539],"=",["T_WHITESPACE"," ",539],["T_VARIABLE","$connection",539],["T_OBJECT_OPERATOR","->",539],["T_STRING","select",539],"(",")",";",["T_WHITESPACE","\n        ",539],["T_VARIABLE","$select",540],["T_OBJECT_OPERATOR","->",540],["T_STRING","from",540],"(",["T_VARIABLE","$this",540],["T_OBJECT_OPERATOR","->",540],["T_STRING","getEntityTable",540],"(",")",",",["T_WHITESPACE"," ",540],["T_CONSTANT_ENCAPSED_STRING","'COUNT(*)'",540],")",";",["T_WHITESPACE","\n        ",540],["T_VARIABLE","$result",541],["T_WHITESPACE"," ",541],"=",["T_WHITESPACE"," ",541],["T_INT_CAST","(int)",541],["T_VARIABLE","$connection",541],["T_OBJECT_OPERATOR","->",541],["T_STRING","fetchOne",541],"(",["T_VARIABLE","$select",541],")",";",["T_WHITESPACE","\n        ",541],["T_RETURN","return",542],["T_WHITESPACE"," ",542],["T_VARIABLE","$result",542],";",["T_WHITESPACE","\n    ",542],"}",["T_WHITESPACE","\n\n    ",543],["T_DOC_COMMENT","\/**\n     * {@inheritdoc}\n     *\/",545],["T_WHITESPACE","\n    ",547],["T_PUBLIC","public",548],["T_WHITESPACE"," ",548],["T_FUNCTION","function",548],["T_WHITESPACE"," ",548],["T_STRING","validate",548],"(",["T_VARIABLE","$object",548],")",["T_WHITESPACE","\n    ",548],"{",["T_WHITESPACE","\n        ",549],["T_COMMENT","\/\/validate attribute set entity type\n",550],["T_WHITESPACE","        ",551],["T_VARIABLE","$entityType",551],["T_WHITESPACE"," ",551],"=",["T_WHITESPACE"," ",551],["T_VARIABLE","$this",551],["T_OBJECT_OPERATOR","->",551],["T_STRING","typeFactory",551],["T_OBJECT_OPERATOR","->",551],["T_STRING","create",551],"(",")",["T_OBJECT_OPERATOR","->",551],["T_STRING","loadByCode",551],"(",["T_NS_SEPARATOR","\\",551],["T_STRING","Magento",551],["T_NS_SEPARATOR","\\",551],["T_STRING","Catalog",551],["T_NS_SEPARATOR","\\",551],["T_STRING","Model",551],["T_NS_SEPARATOR","\\",551],["T_STRING","Product",551],["T_DOUBLE_COLON","::",551],["T_STRING","ENTITY",551],")",";",["T_WHITESPACE","\n        ",551],["T_VARIABLE","$attributeSet",552],["T_WHITESPACE"," ",552],"=",["T_WHITESPACE"," ",552],["T_VARIABLE","$this",552],["T_OBJECT_OPERATOR","->",552],["T_STRING","setFactory",552],["T_OBJECT_OPERATOR","->",552],["T_STRING","create",552],"(",")",["T_OBJECT_OPERATOR","->",552],["T_STRING","load",552],"(",["T_VARIABLE","$object",552],["T_OBJECT_OPERATOR","->",552],["T_STRING","getAttributeSetId",552],"(",")",")",";",["T_WHITESPACE","\n        ",552],["T_IF","if",553],["T_WHITESPACE"," ",553],"(",["T_VARIABLE","$attributeSet",553],["T_OBJECT_OPERATOR","->",553],["T_STRING","getEntityTypeId",553],"(",")",["T_WHITESPACE"," ",553],["T_IS_NOT_EQUAL","!=",553],["T_WHITESPACE"," ",553],["T_VARIABLE","$entityType",553],["T_OBJECT_OPERATOR","->",553],["T_STRING","getId",553],"(",")",")",["T_WHITESPACE"," ",553],"{",["T_WHITESPACE","\n            ",553],["T_RETURN","return",554],["T_WHITESPACE"," ",554],"[",["T_CONSTANT_ENCAPSED_STRING","'attribute_set'",554],["T_WHITESPACE"," ",554],["T_DOUBLE_ARROW","=>",554],["T_WHITESPACE"," ",554],["T_CONSTANT_ENCAPSED_STRING","'Invalid attribute set entity type'",554],"]",";",["T_WHITESPACE","\n        ",554],"}",["T_WHITESPACE","\n\n        ",555],["T_RETURN","return",557],["T_WHITESPACE"," ",557],["T_STRING","parent",557],["T_DOUBLE_COLON","::",557],["T_STRING","validate",557],"(",["T_VARIABLE","$object",557],")",";",["T_WHITESPACE","\n    ",557],"}",["T_WHITESPACE","\n\n    ",558],["T_DOC_COMMENT","\/**\n     * Reset firstly loaded attributes\n     *\n     * @param \\Magento\\Framework\\Model\\AbstractModel $object\n     * @param integer $entityId\n     * @param array|null $attributes\n     * @return $this\n     *\/",560],["T_WHITESPACE","\n    ",567],["T_PUBLIC","public",568],["T_WHITESPACE"," ",568],["T_FUNCTION","function",568],["T_WHITESPACE"," ",568],["T_STRING","load",568],"(",["T_VARIABLE","$object",568],",",["T_WHITESPACE"," ",568],["T_VARIABLE","$entityId",568],",",["T_WHITESPACE"," ",568],["T_VARIABLE","$attributes",568],["T_WHITESPACE"," ",568],"=",["T_WHITESPACE"," ",568],"[","]",")",["T_WHITESPACE","\n    ",568],"{",["T_WHITESPACE","\n        ",569],["T_VARIABLE","$this",570],["T_OBJECT_OPERATOR","->",570],["T_STRING","loadAttributesMetadata",570],"(",["T_VARIABLE","$attributes",570],")",";",["T_WHITESPACE","\n        ",570],["T_VARIABLE","$this",571],["T_OBJECT_OPERATOR","->",571],["T_STRING","getEntityManager",571],"(",")",["T_OBJECT_OPERATOR","->",571],["T_STRING","load",571],"(",["T_VARIABLE","$object",571],",",["T_WHITESPACE"," ",571],["T_VARIABLE","$entityId",571],")",";",["T_WHITESPACE","\n        ",571],["T_RETURN","return",572],["T_WHITESPACE"," ",572],["T_VARIABLE","$this",572],";",["T_WHITESPACE","\n    ",572],"}",["T_WHITESPACE","\n\n    ",573],["T_DOC_COMMENT","\/**\n     * {@inheritdoc}\n     * @SuppressWarnings(PHPMD.UnusedLocalVariable)\n     *\/",575],["T_WHITESPACE","\n    ",578],["T_PROTECTED","protected",579],["T_WHITESPACE"," ",579],["T_FUNCTION","function",579],["T_WHITESPACE"," ",579],["T_STRING","evaluateDelete",579],"(",["T_VARIABLE","$object",579],",",["T_WHITESPACE"," ",579],["T_VARIABLE","$id",579],",",["T_WHITESPACE"," ",579],["T_VARIABLE","$connection",579],")",["T_WHITESPACE","\n    ",579],"{",["T_WHITESPACE","\n        ",580],["T_VARIABLE","$where",581],["T_WHITESPACE"," ",581],"=",["T_WHITESPACE"," ",581],"[",["T_VARIABLE","$this",581],["T_OBJECT_OPERATOR","->",581],["T_STRING","getLinkField",581],"(",")",["T_WHITESPACE"," ",581],".",["T_WHITESPACE"," ",581],["T_CONSTANT_ENCAPSED_STRING","'=?'",581],["T_WHITESPACE"," ",581],["T_DOUBLE_ARROW","=>",581],["T_WHITESPACE"," ",581],["T_VARIABLE","$id",581],"]",";",["T_WHITESPACE","\n        ",581],["T_VARIABLE","$this",582],["T_OBJECT_OPERATOR","->",582],["T_STRING","objectRelationProcessor",582],["T_OBJECT_OPERATOR","->",582],["T_STRING","delete",582],"(",["T_WHITESPACE","\n            ",582],["T_VARIABLE","$this",583],["T_OBJECT_OPERATOR","->",583],["T_STRING","transactionManager",583],",",["T_WHITESPACE","\n            ",583],["T_VARIABLE","$connection",584],",",["T_WHITESPACE","\n            ",584],["T_VARIABLE","$this",585],["T_OBJECT_OPERATOR","->",585],["T_STRING","getEntityTable",585],"(",")",",",["T_WHITESPACE","\n            ",585],["T_VARIABLE","$this",586],["T_OBJECT_OPERATOR","->",586],["T_STRING","getConnection",586],"(",")",["T_OBJECT_OPERATOR","->",586],["T_STRING","quoteInto",586],"(",["T_WHITESPACE","\n                ",586],["T_VARIABLE","$this",587],["T_OBJECT_OPERATOR","->",587],["T_STRING","getLinkField",587],"(",")",["T_WHITESPACE"," ",587],".",["T_WHITESPACE"," ",587],["T_CONSTANT_ENCAPSED_STRING","'=?'",587],",",["T_WHITESPACE","\n                ",587],["T_VARIABLE","$id",588],["T_WHITESPACE","\n            ",588],")",",",["T_WHITESPACE","\n            ",589],"[",["T_VARIABLE","$this",590],["T_OBJECT_OPERATOR","->",590],["T_STRING","getLinkField",590],"(",")",["T_WHITESPACE"," ",590],["T_DOUBLE_ARROW","=>",590],["T_WHITESPACE"," ",590],["T_VARIABLE","$id",590],"]",["T_WHITESPACE","\n        ",590],")",";",["T_WHITESPACE","\n\n        ",591],["T_VARIABLE","$this",593],["T_OBJECT_OPERATOR","->",593],["T_STRING","loadAllAttributes",593],"(",["T_VARIABLE","$object",593],")",";",["T_WHITESPACE","\n        ",593],["T_FOREACH","foreach",594],["T_WHITESPACE"," ",594],"(",["T_VARIABLE","$this",594],["T_OBJECT_OPERATOR","->",594],["T_STRING","getAttributesByTable",594],"(",")",["T_WHITESPACE"," ",594],["T_AS","as",594],["T_WHITESPACE"," ",594],["T_VARIABLE","$table",594],["T_WHITESPACE"," ",594],["T_DOUBLE_ARROW","=>",594],["T_WHITESPACE"," ",594],["T_VARIABLE","$attributes",594],")",["T_WHITESPACE"," ",594],"{",["T_WHITESPACE","\n            ",594],["T_VARIABLE","$this",595],["T_OBJECT_OPERATOR","->",595],["T_STRING","getConnection",595],"(",")",["T_OBJECT_OPERATOR","->",595],["T_STRING","delete",595],"(",["T_WHITESPACE","\n                ",595],["T_VARIABLE","$table",596],",",["T_WHITESPACE","\n                ",596],["T_VARIABLE","$where",597],["T_WHITESPACE","\n            ",597],")",";",["T_WHITESPACE","\n        ",598],"}",["T_WHITESPACE","\n    ",599],"}",["T_WHITESPACE","\n\n    ",600],["T_DOC_COMMENT","\/**\n     * Save entity's attributes into the object's resource\n     *\n     * @param  \\Magento\\Framework\\Model\\AbstractModel $object\n     * @return $this\n     * @throws \\Exception\n     *\/",602],["T_WHITESPACE","\n    ",608],["T_PUBLIC","public",609],["T_WHITESPACE"," ",609],["T_FUNCTION","function",609],["T_WHITESPACE"," ",609],["T_STRING","save",609],"(",["T_NS_SEPARATOR","\\",609],["T_STRING","Magento",609],["T_NS_SEPARATOR","\\",609],["T_STRING","Framework",609],["T_NS_SEPARATOR","\\",609],["T_STRING","Model",609],["T_NS_SEPARATOR","\\",609],["T_STRING","AbstractModel",609],["T_WHITESPACE"," ",609],["T_VARIABLE","$object",609],")",["T_WHITESPACE","\n    ",609],"{",["T_WHITESPACE","\n        ",610],["T_VARIABLE","$this",611],["T_OBJECT_OPERATOR","->",611],["T_STRING","getEntityManager",611],"(",")",["T_OBJECT_OPERATOR","->",611],["T_STRING","save",611],"(",["T_VARIABLE","$object",611],")",";",["T_WHITESPACE","\n        ",611],["T_RETURN","return",612],["T_WHITESPACE"," ",612],["T_VARIABLE","$this",612],";",["T_WHITESPACE","\n    ",612],"}",["T_WHITESPACE","\n\n    ",613],["T_DOC_COMMENT","\/**\n     * @return \\Magento\\Framework\\EntityManager\\EntityManager\n     *\/",615],["T_WHITESPACE","\n    ",617],["T_PRIVATE","private",618],["T_WHITESPACE"," ",618],["T_FUNCTION","function",618],["T_WHITESPACE"," ",618],["T_STRING","getEntityManager",618],"(",")",["T_WHITESPACE","\n    ",618],"{",["T_WHITESPACE","\n        ",619],["T_IF","if",620],["T_WHITESPACE"," ",620],"(",["T_STRING","null",620],["T_WHITESPACE"," ",620],["T_IS_IDENTICAL","===",620],["T_WHITESPACE"," ",620],["T_VARIABLE","$this",620],["T_OBJECT_OPERATOR","->",620],["T_STRING","entityManager",620],")",["T_WHITESPACE"," ",620],"{",["T_WHITESPACE","\n            ",620],["T_VARIABLE","$this",621],["T_OBJECT_OPERATOR","->",621],["T_STRING","entityManager",621],["T_WHITESPACE"," ",621],"=",["T_WHITESPACE"," ",621],["T_NS_SEPARATOR","\\",621],["T_STRING","Magento",621],["T_NS_SEPARATOR","\\",621],["T_STRING","Framework",621],["T_NS_SEPARATOR","\\",621],["T_STRING","App",621],["T_NS_SEPARATOR","\\",621],["T_STRING","ObjectManager",621],["T_DOUBLE_COLON","::",621],["T_STRING","getInstance",621],"(",")",["T_WHITESPACE","\n                ",621],["T_OBJECT_OPERATOR","->",622],["T_STRING","get",622],"(",["T_NS_SEPARATOR","\\",622],["T_STRING","Magento",622],["T_NS_SEPARATOR","\\",622],["T_STRING","Framework",622],["T_NS_SEPARATOR","\\",622],["T_STRING","EntityManager",622],["T_NS_SEPARATOR","\\",622],["T_STRING","EntityManager",622],["T_DOUBLE_COLON","::",622],["T_CLASS","class",622],")",";",["T_WHITESPACE","\n        ",622],"}",["T_WHITESPACE","\n        ",623],["T_RETURN","return",624],["T_WHITESPACE"," ",624],["T_VARIABLE","$this",624],["T_OBJECT_OPERATOR","->",624],["T_STRING","entityManager",624],";",["T_WHITESPACE","\n    ",624],"}",["T_WHITESPACE","\n\n    ",625],["T_DOC_COMMENT","\/**\n     * @deprecated\n     * @return ProductWebsiteLink\n     *\/",627],["T_WHITESPACE","\n    ",630],["T_PRIVATE","private",631],["T_WHITESPACE"," ",631],["T_FUNCTION","function",631],["T_WHITESPACE"," ",631],["T_STRING","getProductWebsiteLink",631],"(",")",["T_WHITESPACE","\n    ",631],"{",["T_WHITESPACE","\n        ",632],["T_RETURN","return",633],["T_WHITESPACE"," ",633],["T_STRING","ObjectManager",633],["T_DOUBLE_COLON","::",633],["T_STRING","getInstance",633],"(",")",["T_OBJECT_OPERATOR","->",633],["T_STRING","get",633],"(",["T_STRING","ProductWebsiteLink",633],["T_DOUBLE_COLON","::",633],["T_CLASS","class",633],")",";",["T_WHITESPACE","\n    ",633],"}",["T_WHITESPACE","\n\n    ",634],["T_DOC_COMMENT","\/**\n     * @deprecated\n     * @return \\Magento\\Catalog\\Model\\ResourceModel\\Product\\CategoryLink\n     *\/",636],["T_WHITESPACE","\n    ",639],["T_PRIVATE","private",640],["T_WHITESPACE"," ",640],["T_FUNCTION","function",640],["T_WHITESPACE"," ",640],["T_STRING","getProductCategoryLink",640],"(",")",["T_WHITESPACE","\n    ",640],"{",["T_WHITESPACE","\n        ",641],["T_IF","if",642],["T_WHITESPACE"," ",642],"(",["T_STRING","null",642],["T_WHITESPACE"," ",642],["T_IS_IDENTICAL","===",642],["T_WHITESPACE"," ",642],["T_VARIABLE","$this",642],["T_OBJECT_OPERATOR","->",642],["T_STRING","productCategoryLink",642],")",["T_WHITESPACE"," ",642],"{",["T_WHITESPACE","\n            ",642],["T_VARIABLE","$this",643],["T_OBJECT_OPERATOR","->",643],["T_STRING","productCategoryLink",643],["T_WHITESPACE"," ",643],"=",["T_WHITESPACE"," ",643],["T_NS_SEPARATOR","\\",643],["T_STRING","Magento",643],["T_NS_SEPARATOR","\\",643],["T_STRING","Framework",643],["T_NS_SEPARATOR","\\",643],["T_STRING","App",643],["T_NS_SEPARATOR","\\",643],["T_STRING","ObjectManager",643],["T_DOUBLE_COLON","::",643],["T_STRING","getInstance",643],"(",")",["T_WHITESPACE","\n                ",643],["T_OBJECT_OPERATOR","->",644],["T_STRING","get",644],"(",["T_NS_SEPARATOR","\\",644],["T_STRING","Magento",644],["T_NS_SEPARATOR","\\",644],["T_STRING","Catalog",644],["T_NS_SEPARATOR","\\",644],["T_STRING","Model",644],["T_NS_SEPARATOR","\\",644],["T_STRING","ResourceModel",644],["T_NS_SEPARATOR","\\",644],["T_STRING","Product",644],["T_NS_SEPARATOR","\\",644],["T_STRING","CategoryLink",644],["T_DOUBLE_COLON","::",644],["T_CLASS","class",644],")",";",["T_WHITESPACE","\n        ",644],"}",["T_WHITESPACE","\n        ",645],["T_RETURN","return",646],["T_WHITESPACE"," ",646],["T_VARIABLE","$this",646],["T_OBJECT_OPERATOR","->",646],["T_STRING","productCategoryLink",646],";",["T_WHITESPACE","\n    ",646],"}",["T_WHITESPACE","\n\n    ",647],["T_DOC_COMMENT","\/**\n     * Extends parent method to be appropriate for product.\n     * Store id is required to correctly identify attribute value we are working with.\n     *\n     * {@inheritdoc}\n     *\/",649],["T_WHITESPACE","\n    ",654],["T_PROTECTED","protected",655],["T_WHITESPACE"," ",655],["T_FUNCTION","function",655],["T_WHITESPACE"," ",655],["T_STRING","getAttributeRow",655],"(",["T_VARIABLE","$entity",655],",",["T_WHITESPACE"," ",655],["T_VARIABLE","$object",655],",",["T_WHITESPACE"," ",655],["T_VARIABLE","$attribute",655],")",["T_WHITESPACE","\n    ",655],"{",["T_WHITESPACE","\n        ",656],["T_VARIABLE","$data",657],["T_WHITESPACE"," ",657],"=",["T_WHITESPACE"," ",657],["T_STRING","parent",657],["T_DOUBLE_COLON","::",657],["T_STRING","getAttributeRow",657],"(",["T_VARIABLE","$entity",657],",",["T_WHITESPACE"," ",657],["T_VARIABLE","$object",657],",",["T_WHITESPACE"," ",657],["T_VARIABLE","$attribute",657],")",";",["T_WHITESPACE","\n        ",657],["T_VARIABLE","$data",658],"[",["T_CONSTANT_ENCAPSED_STRING","'store_id'",658],"]",["T_WHITESPACE"," ",658],"=",["T_WHITESPACE"," ",658],["T_VARIABLE","$object",658],["T_OBJECT_OPERATOR","->",658],["T_STRING","getStoreId",658],"(",")",";",["T_WHITESPACE","\n        ",658],["T_RETURN","return",659],["T_WHITESPACE"," ",659],["T_VARIABLE","$data",659],";",["T_WHITESPACE","\n    ",659],"}",["T_WHITESPACE","\n",660],"}",["T_WHITESPACE","\n",661]]
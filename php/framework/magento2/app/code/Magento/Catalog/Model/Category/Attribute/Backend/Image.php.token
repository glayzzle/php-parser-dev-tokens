[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Copyright \u00c2\u00a9 2013-2017 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n *\/",2],["T_WHITESPACE","\n\n",5],["T_DOC_COMMENT","\/**\n * Catalog category image attribute backend model\n *\n * @author      Magento Core Team <core@magentocommerce.com>\n *\/",7],["T_WHITESPACE","\n",11],["T_NAMESPACE","namespace",12],["T_WHITESPACE"," ",12],["T_STRING","Magento",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Catalog",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Model",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Category",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Attribute",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Backend",12],";",["T_WHITESPACE","\n\n",12],["T_CLASS","class",14],["T_WHITESPACE"," ",14],["T_STRING","Image",14],["T_WHITESPACE"," ",14],["T_EXTENDS","extends",14],["T_WHITESPACE"," ",14],["T_NS_SEPARATOR","\\",14],["T_STRING","Magento",14],["T_NS_SEPARATOR","\\",14],["T_STRING","Eav",14],["T_NS_SEPARATOR","\\",14],["T_STRING","Model",14],["T_NS_SEPARATOR","\\",14],["T_STRING","Entity",14],["T_NS_SEPARATOR","\\",14],["T_STRING","Attribute",14],["T_NS_SEPARATOR","\\",14],["T_STRING","Backend",14],["T_NS_SEPARATOR","\\",14],["T_STRING","AbstractBackend",14],["T_WHITESPACE","\n",14],"{",["T_WHITESPACE","\n    ",15],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\MediaStorage\\Model\\File\\UploaderFactory\n     *\n     * @deprecated\n     *\/",16],["T_WHITESPACE","\n    ",20],["T_PROTECTED","protected",21],["T_WHITESPACE"," ",21],["T_VARIABLE","$_uploaderFactory",21],";",["T_WHITESPACE","\n\n    ",21],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Framework\\Filesystem\n     *\n     * @deprecated\n     *\/",23],["T_WHITESPACE","\n    ",27],["T_PROTECTED","protected",28],["T_WHITESPACE"," ",28],["T_VARIABLE","$_filesystem",28],";",["T_WHITESPACE","\n\n    ",28],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\MediaStorage\\Model\\File\\UploaderFactory\n     *\n     * @deprecated\n     *\/",30],["T_WHITESPACE","\n    ",34],["T_PROTECTED","protected",35],["T_WHITESPACE"," ",35],["T_VARIABLE","$_fileUploaderFactory",35],";",["T_WHITESPACE","\n\n    ",35],["T_DOC_COMMENT","\/**\n     * @var \\Psr\\Log\\LoggerInterface\n     *\n     * @deprecated\n     *\/",37],["T_WHITESPACE","\n    ",41],["T_PROTECTED","protected",42],["T_WHITESPACE"," ",42],["T_VARIABLE","$_logger",42],";",["T_WHITESPACE","\n\n    ",42],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Catalog\\Model\\ImageUploader\n     *\/",44],["T_WHITESPACE","\n    ",46],["T_PRIVATE","private",47],["T_WHITESPACE"," ",47],["T_VARIABLE","$imageUploader",47],";",["T_WHITESPACE","\n\n    ",47],["T_DOC_COMMENT","\/**\n     * @var string\n     *\/",49],["T_WHITESPACE","\n    ",51],["T_PRIVATE","private",52],["T_WHITESPACE"," ",52],["T_VARIABLE","$additionalData",52],["T_WHITESPACE"," ",52],"=",["T_WHITESPACE"," ",52],["T_CONSTANT_ENCAPSED_STRING","'_additional_data_'",52],";",["T_WHITESPACE","\n\n    ",52],["T_DOC_COMMENT","\/**\n     * @param \\Psr\\Log\\LoggerInterface $logger\n     * @param \\Magento\\Framework\\Filesystem $filesystem\n     * @param \\Magento\\MediaStorage\\Model\\File\\UploaderFactory $fileUploaderFactory\n     *\/",54],["T_WHITESPACE","\n    ",58],["T_PUBLIC","public",59],["T_WHITESPACE"," ",59],["T_FUNCTION","function",59],["T_WHITESPACE"," ",59],["T_STRING","__construct",59],"(",["T_WHITESPACE","\n        ",59],["T_NS_SEPARATOR","\\",60],["T_STRING","Psr",60],["T_NS_SEPARATOR","\\",60],["T_STRING","Log",60],["T_NS_SEPARATOR","\\",60],["T_STRING","LoggerInterface",60],["T_WHITESPACE"," ",60],["T_VARIABLE","$logger",60],",",["T_WHITESPACE","\n        ",60],["T_NS_SEPARATOR","\\",61],["T_STRING","Magento",61],["T_NS_SEPARATOR","\\",61],["T_STRING","Framework",61],["T_NS_SEPARATOR","\\",61],["T_STRING","Filesystem",61],["T_WHITESPACE"," ",61],["T_VARIABLE","$filesystem",61],",",["T_WHITESPACE","\n        ",61],["T_NS_SEPARATOR","\\",62],["T_STRING","Magento",62],["T_NS_SEPARATOR","\\",62],["T_STRING","MediaStorage",62],["T_NS_SEPARATOR","\\",62],["T_STRING","Model",62],["T_NS_SEPARATOR","\\",62],["T_STRING","File",62],["T_NS_SEPARATOR","\\",62],["T_STRING","UploaderFactory",62],["T_WHITESPACE"," ",62],["T_VARIABLE","$fileUploaderFactory",62],["T_WHITESPACE","\n    ",62],")",["T_WHITESPACE"," ",63],"{",["T_WHITESPACE","\n        ",63],["T_VARIABLE","$this",64],["T_OBJECT_OPERATOR","->",64],["T_STRING","_filesystem",64],["T_WHITESPACE"," ",64],"=",["T_WHITESPACE"," ",64],["T_VARIABLE","$filesystem",64],";",["T_WHITESPACE","\n        ",64],["T_VARIABLE","$this",65],["T_OBJECT_OPERATOR","->",65],["T_STRING","_fileUploaderFactory",65],["T_WHITESPACE"," ",65],"=",["T_WHITESPACE"," ",65],["T_VARIABLE","$fileUploaderFactory",65],";",["T_WHITESPACE","\n        ",65],["T_VARIABLE","$this",66],["T_OBJECT_OPERATOR","->",66],["T_STRING","_logger",66],["T_WHITESPACE"," ",66],"=",["T_WHITESPACE"," ",66],["T_VARIABLE","$logger",66],";",["T_WHITESPACE","\n    ",66],"}",["T_WHITESPACE","\n\n    ",67],["T_DOC_COMMENT","\/**\n     * Gets image name from $value array.\n     * Will return empty string in a case when $value is not an array\n     *\n     * @param array $value Attribute value\n     * @return string\n     *\/",69],["T_WHITESPACE","\n    ",75],["T_PRIVATE","private",76],["T_WHITESPACE"," ",76],["T_FUNCTION","function",76],["T_WHITESPACE"," ",76],["T_STRING","getUploadedImageName",76],"(",["T_VARIABLE","$value",76],")",["T_WHITESPACE","\n    ",76],"{",["T_WHITESPACE","\n        ",77],["T_IF","if",78],["T_WHITESPACE"," ",78],"(",["T_STRING","is_array",78],"(",["T_VARIABLE","$value",78],")",["T_WHITESPACE"," ",78],["T_BOOLEAN_AND","&&",78],["T_WHITESPACE"," ",78],["T_ISSET","isset",78],"(",["T_VARIABLE","$value",78],"[",["T_LNUMBER","0",78],"]","[",["T_CONSTANT_ENCAPSED_STRING","'name'",78],"]",")",")",["T_WHITESPACE"," ",78],"{",["T_WHITESPACE","\n            ",78],["T_RETURN","return",79],["T_WHITESPACE"," ",79],["T_VARIABLE","$value",79],"[",["T_LNUMBER","0",79],"]","[",["T_CONSTANT_ENCAPSED_STRING","'name'",79],"]",";",["T_WHITESPACE","\n        ",79],"}",["T_WHITESPACE","\n\n        ",80],["T_RETURN","return",82],["T_WHITESPACE"," ",82],["T_CONSTANT_ENCAPSED_STRING","''",82],";",["T_WHITESPACE","\n    ",82],"}",["T_WHITESPACE","\n\n    ",83],["T_DOC_COMMENT","\/**\n     * Avoiding saving potential upload data to DB\n     * Will set empty image attribute value if image was not uploaded\n     *\n     * @param \\Magento\\Framework\\DataObject $object\n     * @return $this\n     *\/",85],["T_WHITESPACE","\n    ",91],["T_PUBLIC","public",92],["T_WHITESPACE"," ",92],["T_FUNCTION","function",92],["T_WHITESPACE"," ",92],["T_STRING","beforeSave",92],"(",["T_VARIABLE","$object",92],")",["T_WHITESPACE","\n    ",92],"{",["T_WHITESPACE","\n        ",93],["T_VARIABLE","$attributeName",94],["T_WHITESPACE"," ",94],"=",["T_WHITESPACE"," ",94],["T_VARIABLE","$this",94],["T_OBJECT_OPERATOR","->",94],["T_STRING","getAttribute",94],"(",")",["T_OBJECT_OPERATOR","->",94],["T_STRING","getName",94],"(",")",";",["T_WHITESPACE","\n        ",94],["T_VARIABLE","$value",95],["T_WHITESPACE"," ",95],"=",["T_WHITESPACE"," ",95],["T_VARIABLE","$object",95],["T_OBJECT_OPERATOR","->",95],["T_STRING","getData",95],"(",["T_VARIABLE","$attributeName",95],")",";",["T_WHITESPACE","\n\n        ",95],["T_IF","if",97],["T_WHITESPACE"," ",97],"(",["T_VARIABLE","$imageName",97],["T_WHITESPACE"," ",97],"=",["T_WHITESPACE"," ",97],["T_VARIABLE","$this",97],["T_OBJECT_OPERATOR","->",97],["T_STRING","getUploadedImageName",97],"(",["T_VARIABLE","$value",97],")",")",["T_WHITESPACE"," ",97],"{",["T_WHITESPACE","\n            ",97],["T_VARIABLE","$object",98],["T_OBJECT_OPERATOR","->",98],["T_STRING","setData",98],"(",["T_VARIABLE","$this",98],["T_OBJECT_OPERATOR","->",98],["T_STRING","additionalData",98],["T_WHITESPACE"," ",98],".",["T_WHITESPACE"," ",98],["T_VARIABLE","$attributeName",98],",",["T_WHITESPACE"," ",98],["T_VARIABLE","$value",98],")",";",["T_WHITESPACE","\n            ",98],["T_VARIABLE","$object",99],["T_OBJECT_OPERATOR","->",99],["T_STRING","setData",99],"(",["T_VARIABLE","$attributeName",99],",",["T_WHITESPACE"," ",99],["T_VARIABLE","$imageName",99],")",";",["T_WHITESPACE","\n        ",99],"}",["T_WHITESPACE"," ",100],["T_ELSE","else",100],["T_WHITESPACE"," ",100],["T_IF","if",100],["T_WHITESPACE"," ",100],"(","!",["T_STRING","is_string",100],"(",["T_VARIABLE","$value",100],")",")",["T_WHITESPACE"," ",100],"{",["T_WHITESPACE","\n            ",100],["T_VARIABLE","$object",101],["T_OBJECT_OPERATOR","->",101],["T_STRING","setData",101],"(",["T_VARIABLE","$attributeName",101],",",["T_WHITESPACE"," ",101],["T_CONSTANT_ENCAPSED_STRING","''",101],")",";",["T_WHITESPACE","\n        ",101],"}",["T_WHITESPACE","\n\n        ",102],["T_RETURN","return",104],["T_WHITESPACE"," ",104],["T_STRING","parent",104],["T_DOUBLE_COLON","::",104],["T_STRING","beforeSave",104],"(",["T_VARIABLE","$object",104],")",";",["T_WHITESPACE","\n    ",104],"}",["T_WHITESPACE","\n\n    ",105],["T_DOC_COMMENT","\/**\n     * @return \\Magento\\Catalog\\Model\\ImageUploader\n     *\n     * @deprecated\n     *\/",107],["T_WHITESPACE","\n    ",111],["T_PRIVATE","private",112],["T_WHITESPACE"," ",112],["T_FUNCTION","function",112],["T_WHITESPACE"," ",112],["T_STRING","getImageUploader",112],"(",")",["T_WHITESPACE","\n    ",112],"{",["T_WHITESPACE","\n        ",113],["T_IF","if",114],["T_WHITESPACE"," ",114],"(",["T_VARIABLE","$this",114],["T_OBJECT_OPERATOR","->",114],["T_STRING","imageUploader",114],["T_WHITESPACE"," ",114],["T_IS_IDENTICAL","===",114],["T_WHITESPACE"," ",114],["T_STRING","null",114],")",["T_WHITESPACE"," ",114],"{",["T_WHITESPACE","\n            ",114],["T_VARIABLE","$this",115],["T_OBJECT_OPERATOR","->",115],["T_STRING","imageUploader",115],["T_WHITESPACE"," ",115],"=",["T_WHITESPACE"," ",115],["T_NS_SEPARATOR","\\",115],["T_STRING","Magento",115],["T_NS_SEPARATOR","\\",115],["T_STRING","Framework",115],["T_NS_SEPARATOR","\\",115],["T_STRING","App",115],["T_NS_SEPARATOR","\\",115],["T_STRING","ObjectManager",115],["T_DOUBLE_COLON","::",115],["T_STRING","getInstance",115],"(",")",["T_WHITESPACE","\n                ",115],["T_OBJECT_OPERATOR","->",116],["T_STRING","get",116],"(",["T_NS_SEPARATOR","\\",116],["T_STRING","Magento",116],["T_NS_SEPARATOR","\\",116],["T_STRING","Catalog",116],["T_NS_SEPARATOR","\\",116],["T_STRING","CategoryImageUpload",116],["T_DOUBLE_COLON","::",116],["T_CLASS","class",116],")",";",["T_WHITESPACE","\n        ",116],"}",["T_WHITESPACE","\n\n        ",117],["T_RETURN","return",119],["T_WHITESPACE"," ",119],["T_VARIABLE","$this",119],["T_OBJECT_OPERATOR","->",119],["T_STRING","imageUploader",119],";",["T_WHITESPACE","\n    ",119],"}",["T_WHITESPACE","\n\n    ",120],["T_DOC_COMMENT","\/**\n     * Save uploaded file and set its name to category\n     *\n     * @param \\Magento\\Framework\\DataObject $object\n     * @return \\Magento\\Catalog\\Model\\Category\\Attribute\\Backend\\Image\n     *\/",122],["T_WHITESPACE","\n    ",127],["T_PUBLIC","public",128],["T_WHITESPACE"," ",128],["T_FUNCTION","function",128],["T_WHITESPACE"," ",128],["T_STRING","afterSave",128],"(",["T_VARIABLE","$object",128],")",["T_WHITESPACE","\n    ",128],"{",["T_WHITESPACE","\n        ",129],["T_VARIABLE","$value",130],["T_WHITESPACE"," ",130],"=",["T_WHITESPACE"," ",130],["T_VARIABLE","$object",130],["T_OBJECT_OPERATOR","->",130],["T_STRING","getData",130],"(",["T_VARIABLE","$this",130],["T_OBJECT_OPERATOR","->",130],["T_STRING","additionalData",130],["T_WHITESPACE"," ",130],".",["T_WHITESPACE"," ",130],["T_VARIABLE","$this",130],["T_OBJECT_OPERATOR","->",130],["T_STRING","getAttribute",130],"(",")",["T_OBJECT_OPERATOR","->",130],["T_STRING","getName",130],"(",")",")",";",["T_WHITESPACE","\n\n        ",130],["T_IF","if",132],["T_WHITESPACE"," ",132],"(",["T_VARIABLE","$imageName",132],["T_WHITESPACE"," ",132],"=",["T_WHITESPACE"," ",132],["T_VARIABLE","$this",132],["T_OBJECT_OPERATOR","->",132],["T_STRING","getUploadedImageName",132],"(",["T_VARIABLE","$value",132],")",")",["T_WHITESPACE"," ",132],"{",["T_WHITESPACE","\n            ",132],["T_TRY","try",133],["T_WHITESPACE"," ",133],"{",["T_WHITESPACE","\n                ",133],["T_VARIABLE","$this",134],["T_OBJECT_OPERATOR","->",134],["T_STRING","getImageUploader",134],"(",")",["T_OBJECT_OPERATOR","->",134],["T_STRING","moveFileFromTmp",134],"(",["T_VARIABLE","$imageName",134],")",";",["T_WHITESPACE","\n            ",134],"}",["T_WHITESPACE"," ",135],["T_CATCH","catch",135],["T_WHITESPACE"," ",135],"(",["T_NS_SEPARATOR","\\",135],["T_STRING","Exception",135],["T_WHITESPACE"," ",135],["T_VARIABLE","$e",135],")",["T_WHITESPACE"," ",135],"{",["T_WHITESPACE","\n                ",135],["T_VARIABLE","$this",136],["T_OBJECT_OPERATOR","->",136],["T_STRING","_logger",136],["T_OBJECT_OPERATOR","->",136],["T_STRING","critical",136],"(",["T_VARIABLE","$e",136],")",";",["T_WHITESPACE","\n            ",136],"}",["T_WHITESPACE","\n        ",137],"}",["T_WHITESPACE","\n\n        ",138],["T_RETURN","return",140],["T_WHITESPACE"," ",140],["T_VARIABLE","$this",140],";",["T_WHITESPACE","\n    ",140],"}",["T_WHITESPACE","\n",141],"}",["T_WHITESPACE","\n",142]]
[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Copyright \u00c2\u00a9 2013-2017 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n *\/",2],["T_WHITESPACE","\n",5],["T_NAMESPACE","namespace",6],["T_WHITESPACE"," ",6],["T_STRING","Magento",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Catalog",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Model",6],["T_NS_SEPARATOR","\\",6],["T_STRING","ResourceModel",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Product",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Indexer",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Eav",6],";",["T_WHITESPACE","\n\n",6],["T_USE","use",8],["T_WHITESPACE"," ",8],["T_STRING","Magento",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Catalog",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Api",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Data",8],["T_NS_SEPARATOR","\\",8],["T_STRING","ProductInterface",8],";",["T_WHITESPACE","\n\n",8],["T_DOC_COMMENT","\/**\n * Catalog Product Eav Attributes abstract indexer resource model\n *\n * @author      Magento Core Team <core@magentocommerce.com>\n *\/",10],["T_WHITESPACE","\n",14],["T_ABSTRACT","abstract",15],["T_WHITESPACE"," ",15],["T_CLASS","class",15],["T_WHITESPACE"," ",15],["T_STRING","AbstractEav",15],["T_WHITESPACE"," ",15],["T_EXTENDS","extends",15],["T_WHITESPACE"," ",15],["T_NS_SEPARATOR","\\",15],["T_STRING","Magento",15],["T_NS_SEPARATOR","\\",15],["T_STRING","Catalog",15],["T_NS_SEPARATOR","\\",15],["T_STRING","Model",15],["T_NS_SEPARATOR","\\",15],["T_STRING","ResourceModel",15],["T_NS_SEPARATOR","\\",15],["T_STRING","Product",15],["T_NS_SEPARATOR","\\",15],["T_STRING","Indexer",15],["T_NS_SEPARATOR","\\",15],["T_STRING","AbstractIndexer",15],["T_WHITESPACE","\n",15],"{",["T_WHITESPACE","\n    ",16],["T_DOC_COMMENT","\/**\n     * Core event manager proxy\n     *\n     * @var \\Magento\\Framework\\Event\\ManagerInterface\n     *\/",17],["T_WHITESPACE","\n    ",21],["T_PROTECTED","protected",22],["T_WHITESPACE"," ",22],["T_VARIABLE","$_eventManager",22],["T_WHITESPACE"," ",22],"=",["T_WHITESPACE"," ",22],["T_STRING","null",22],";",["T_WHITESPACE","\n\n    ",22],["T_DOC_COMMENT","\/**\n     * Construct\n     *\n     * @param \\Magento\\Framework\\Model\\ResourceModel\\Db\\Context $context\n     * @param \\Magento\\Framework\\Indexer\\Table\\StrategyInterface $tableStrategy\n     * @param \\Magento\\Eav\\Model\\Config $eavConfig\n     * @param \\Magento\\Framework\\Event\\ManagerInterface $eventManager\n     * @param string $connectionName\n     *\/",24],["T_WHITESPACE","\n    ",32],["T_PUBLIC","public",33],["T_WHITESPACE"," ",33],["T_FUNCTION","function",33],["T_WHITESPACE"," ",33],["T_STRING","__construct",33],"(",["T_WHITESPACE","\n        ",33],["T_NS_SEPARATOR","\\",34],["T_STRING","Magento",34],["T_NS_SEPARATOR","\\",34],["T_STRING","Framework",34],["T_NS_SEPARATOR","\\",34],["T_STRING","Model",34],["T_NS_SEPARATOR","\\",34],["T_STRING","ResourceModel",34],["T_NS_SEPARATOR","\\",34],["T_STRING","Db",34],["T_NS_SEPARATOR","\\",34],["T_STRING","Context",34],["T_WHITESPACE"," ",34],["T_VARIABLE","$context",34],",",["T_WHITESPACE","\n        ",34],["T_NS_SEPARATOR","\\",35],["T_STRING","Magento",35],["T_NS_SEPARATOR","\\",35],["T_STRING","Framework",35],["T_NS_SEPARATOR","\\",35],["T_STRING","Indexer",35],["T_NS_SEPARATOR","\\",35],["T_STRING","Table",35],["T_NS_SEPARATOR","\\",35],["T_STRING","StrategyInterface",35],["T_WHITESPACE"," ",35],["T_VARIABLE","$tableStrategy",35],",",["T_WHITESPACE","\n        ",35],["T_NS_SEPARATOR","\\",36],["T_STRING","Magento",36],["T_NS_SEPARATOR","\\",36],["T_STRING","Eav",36],["T_NS_SEPARATOR","\\",36],["T_STRING","Model",36],["T_NS_SEPARATOR","\\",36],["T_STRING","Config",36],["T_WHITESPACE"," ",36],["T_VARIABLE","$eavConfig",36],",",["T_WHITESPACE","\n        ",36],["T_NS_SEPARATOR","\\",37],["T_STRING","Magento",37],["T_NS_SEPARATOR","\\",37],["T_STRING","Framework",37],["T_NS_SEPARATOR","\\",37],["T_STRING","Event",37],["T_NS_SEPARATOR","\\",37],["T_STRING","ManagerInterface",37],["T_WHITESPACE"," ",37],["T_VARIABLE","$eventManager",37],",",["T_WHITESPACE","\n        ",37],["T_VARIABLE","$connectionName",38],["T_WHITESPACE"," ",38],"=",["T_WHITESPACE"," ",38],["T_STRING","null",38],["T_WHITESPACE","\n    ",38],")",["T_WHITESPACE"," ",39],"{",["T_WHITESPACE","\n        ",39],["T_VARIABLE","$this",40],["T_OBJECT_OPERATOR","->",40],["T_STRING","_eventManager",40],["T_WHITESPACE"," ",40],"=",["T_WHITESPACE"," ",40],["T_VARIABLE","$eventManager",40],";",["T_WHITESPACE","\n        ",40],["T_STRING","parent",41],["T_DOUBLE_COLON","::",41],["T_STRING","__construct",41],"(",["T_VARIABLE","$context",41],",",["T_WHITESPACE"," ",41],["T_VARIABLE","$tableStrategy",41],",",["T_WHITESPACE"," ",41],["T_VARIABLE","$eavConfig",41],",",["T_WHITESPACE"," ",41],["T_VARIABLE","$connectionName",41],")",";",["T_WHITESPACE","\n    ",41],"}",["T_WHITESPACE","\n\n    ",42],["T_DOC_COMMENT","\/**\n     * Rebuild all index data\n     *\n     * @return $this\n     * @throws \\Exception\n     *\/",44],["T_WHITESPACE","\n    ",49],["T_PUBLIC","public",50],["T_WHITESPACE"," ",50],["T_FUNCTION","function",50],["T_WHITESPACE"," ",50],["T_STRING","reindexAll",50],"(",")",["T_WHITESPACE","\n    ",50],"{",["T_WHITESPACE","\n        ",51],["T_VARIABLE","$this",52],["T_OBJECT_OPERATOR","->",52],["T_STRING","tableStrategy",52],["T_OBJECT_OPERATOR","->",52],["T_STRING","setUseIdxTable",52],"(",["T_STRING","true",52],")",";",["T_WHITESPACE","\n        ",52],["T_VARIABLE","$this",53],["T_OBJECT_OPERATOR","->",53],["T_STRING","beginTransaction",53],"(",")",";",["T_WHITESPACE","\n        ",53],["T_TRY","try",54],["T_WHITESPACE"," ",54],"{",["T_WHITESPACE","\n            ",54],["T_VARIABLE","$this",55],["T_OBJECT_OPERATOR","->",55],["T_STRING","clearTemporaryIndexTable",55],"(",")",";",["T_WHITESPACE","\n            ",55],["T_VARIABLE","$this",56],["T_OBJECT_OPERATOR","->",56],["T_STRING","_prepareIndex",56],"(",")",";",["T_WHITESPACE","\n            ",56],["T_VARIABLE","$this",57],["T_OBJECT_OPERATOR","->",57],["T_STRING","_prepareRelationIndex",57],"(",")",";",["T_WHITESPACE","\n            ",57],["T_VARIABLE","$this",58],["T_OBJECT_OPERATOR","->",58],["T_STRING","_removeNotVisibleEntityFromIndex",58],"(",")",";",["T_WHITESPACE","\n            ",58],["T_VARIABLE","$this",59],["T_OBJECT_OPERATOR","->",59],["T_STRING","syncData",59],"(",")",";",["T_WHITESPACE","\n            ",59],["T_VARIABLE","$this",60],["T_OBJECT_OPERATOR","->",60],["T_STRING","commit",60],"(",")",";",["T_WHITESPACE","\n        ",60],"}",["T_WHITESPACE"," ",61],["T_CATCH","catch",61],["T_WHITESPACE"," ",61],"(",["T_NS_SEPARATOR","\\",61],["T_STRING","Exception",61],["T_WHITESPACE"," ",61],["T_VARIABLE","$e",61],")",["T_WHITESPACE"," ",61],"{",["T_WHITESPACE","\n            ",61],["T_VARIABLE","$this",62],["T_OBJECT_OPERATOR","->",62],["T_STRING","rollBack",62],"(",")",";",["T_WHITESPACE","\n            ",62],["T_THROW","throw",63],["T_WHITESPACE"," ",63],["T_VARIABLE","$e",63],";",["T_WHITESPACE","\n        ",63],"}",["T_WHITESPACE","\n        ",64],["T_RETURN","return",65],["T_WHITESPACE"," ",65],["T_VARIABLE","$this",65],";",["T_WHITESPACE","\n    ",65],"}",["T_WHITESPACE","\n\n    ",66],["T_DOC_COMMENT","\/**\n     * Rebuild index data by entities\n     *\n     *\n     * @param int|array $processIds\n     * @return $this\n     * @throws \\Exception\n     *\/",68],["T_WHITESPACE","\n    ",75],["T_PUBLIC","public",76],["T_WHITESPACE"," ",76],["T_FUNCTION","function",76],["T_WHITESPACE"," ",76],["T_STRING","reindexEntities",76],"(",["T_VARIABLE","$processIds",76],")",["T_WHITESPACE","\n    ",76],"{",["T_WHITESPACE","\n        ",77],["T_VARIABLE","$connection",78],["T_WHITESPACE"," ",78],"=",["T_WHITESPACE"," ",78],["T_VARIABLE","$this",78],["T_OBJECT_OPERATOR","->",78],["T_STRING","getConnection",78],"(",")",";",["T_WHITESPACE","\n\n        ",78],["T_VARIABLE","$this",80],["T_OBJECT_OPERATOR","->",80],["T_STRING","clearTemporaryIndexTable",80],"(",")",";",["T_WHITESPACE","\n\n        ",80],["T_IF","if",82],["T_WHITESPACE"," ",82],"(","!",["T_STRING","is_array",82],"(",["T_VARIABLE","$processIds",82],")",")",["T_WHITESPACE"," ",82],"{",["T_WHITESPACE","\n            ",82],["T_VARIABLE","$processIds",83],["T_WHITESPACE"," ",83],"=",["T_WHITESPACE"," ",83],"[",["T_VARIABLE","$processIds",83],"]",";",["T_WHITESPACE","\n        ",83],"}",["T_WHITESPACE","\n\n        ",84],["T_VARIABLE","$parentIds",86],["T_WHITESPACE"," ",86],"=",["T_WHITESPACE"," ",86],["T_VARIABLE","$this",86],["T_OBJECT_OPERATOR","->",86],["T_STRING","getRelationsByChild",86],"(",["T_VARIABLE","$processIds",86],")",";",["T_WHITESPACE","\n        ",86],["T_IF","if",87],["T_WHITESPACE"," ",87],"(",["T_VARIABLE","$parentIds",87],")",["T_WHITESPACE"," ",87],"{",["T_WHITESPACE","\n            ",87],["T_VARIABLE","$processIds",88],["T_WHITESPACE"," ",88],"=",["T_WHITESPACE"," ",88],["T_STRING","array_unique",88],"(",["T_STRING","array_merge",88],"(",["T_VARIABLE","$processIds",88],",",["T_WHITESPACE"," ",88],["T_VARIABLE","$parentIds",88],")",")",";",["T_WHITESPACE","\n        ",88],"}",["T_WHITESPACE","\n        ",89],["T_VARIABLE","$childIds",90],["T_WHITESPACE"," ",90],"=",["T_WHITESPACE"," ",90],["T_VARIABLE","$this",90],["T_OBJECT_OPERATOR","->",90],["T_STRING","getRelationsByParent",90],"(",["T_VARIABLE","$processIds",90],")",";",["T_WHITESPACE","\n        ",90],["T_IF","if",91],["T_WHITESPACE"," ",91],"(",["T_VARIABLE","$childIds",91],")",["T_WHITESPACE"," ",91],"{",["T_WHITESPACE","\n            ",91],["T_VARIABLE","$processIds",92],["T_WHITESPACE"," ",92],"=",["T_WHITESPACE"," ",92],["T_STRING","array_unique",92],"(",["T_STRING","array_merge",92],"(",["T_VARIABLE","$processIds",92],",",["T_WHITESPACE"," ",92],["T_VARIABLE","$childIds",92],")",")",";",["T_WHITESPACE","\n        ",92],"}",["T_WHITESPACE","\n\n        ",93],["T_VARIABLE","$this",95],["T_OBJECT_OPERATOR","->",95],["T_STRING","_prepareIndex",95],"(",["T_VARIABLE","$processIds",95],")",";",["T_WHITESPACE","\n        ",95],["T_VARIABLE","$this",96],["T_OBJECT_OPERATOR","->",96],["T_STRING","_prepareRelationIndex",96],"(",["T_VARIABLE","$processIds",96],")",";",["T_WHITESPACE","\n        ",96],["T_VARIABLE","$this",97],["T_OBJECT_OPERATOR","->",97],["T_STRING","_removeNotVisibleEntityFromIndex",97],"(",")",";",["T_WHITESPACE","\n\n        ",97],["T_VARIABLE","$connection",99],["T_OBJECT_OPERATOR","->",99],["T_STRING","beginTransaction",99],"(",")",";",["T_WHITESPACE","\n        ",99],["T_TRY","try",100],["T_WHITESPACE"," ",100],"{",["T_WHITESPACE","\n            ",100],["T_COMMENT","\/\/ remove old index\n",101],["T_WHITESPACE","            ",102],["T_VARIABLE","$where",102],["T_WHITESPACE"," ",102],"=",["T_WHITESPACE"," ",102],["T_VARIABLE","$connection",102],["T_OBJECT_OPERATOR","->",102],["T_STRING","quoteInto",102],"(",["T_CONSTANT_ENCAPSED_STRING","'entity_id IN(?)'",102],",",["T_WHITESPACE"," ",102],["T_VARIABLE","$processIds",102],")",";",["T_WHITESPACE","\n            ",102],["T_VARIABLE","$connection",103],["T_OBJECT_OPERATOR","->",103],["T_STRING","delete",103],"(",["T_VARIABLE","$this",103],["T_OBJECT_OPERATOR","->",103],["T_STRING","getMainTable",103],"(",")",",",["T_WHITESPACE"," ",103],["T_VARIABLE","$where",103],")",";",["T_WHITESPACE","\n\n            ",103],["T_COMMENT","\/\/ insert new index\n",105],["T_WHITESPACE","            ",106],["T_VARIABLE","$this",106],["T_OBJECT_OPERATOR","->",106],["T_STRING","insertFromTable",106],"(",["T_VARIABLE","$this",106],["T_OBJECT_OPERATOR","->",106],["T_STRING","getIdxTable",106],"(",")",",",["T_WHITESPACE"," ",106],["T_VARIABLE","$this",106],["T_OBJECT_OPERATOR","->",106],["T_STRING","getMainTable",106],"(",")",")",";",["T_WHITESPACE","\n            ",106],["T_VARIABLE","$connection",107],["T_OBJECT_OPERATOR","->",107],["T_STRING","commit",107],"(",")",";",["T_WHITESPACE","\n        ",107],"}",["T_WHITESPACE"," ",108],["T_CATCH","catch",108],["T_WHITESPACE"," ",108],"(",["T_NS_SEPARATOR","\\",108],["T_STRING","Exception",108],["T_WHITESPACE"," ",108],["T_VARIABLE","$e",108],")",["T_WHITESPACE"," ",108],"{",["T_WHITESPACE","\n            ",108],["T_VARIABLE","$connection",109],["T_OBJECT_OPERATOR","->",109],["T_STRING","rollBack",109],"(",")",";",["T_WHITESPACE","\n            ",109],["T_THROW","throw",110],["T_WHITESPACE"," ",110],["T_VARIABLE","$e",110],";",["T_WHITESPACE","\n        ",110],"}",["T_WHITESPACE","\n        ",111],["T_RETURN","return",112],["T_WHITESPACE"," ",112],["T_VARIABLE","$this",112],";",["T_WHITESPACE","\n    ",112],"}",["T_WHITESPACE","\n\n    ",113],["T_DOC_COMMENT","\/**\n     * Rebuild index data by attribute id\n     * If attribute is not indexable remove data by attribute\n     *\n     *\n     * @param int $attributeId\n     * @param bool $isIndexable\n     * @return $this\n     *\/",115],["T_WHITESPACE","\n    ",123],["T_PUBLIC","public",124],["T_WHITESPACE"," ",124],["T_FUNCTION","function",124],["T_WHITESPACE"," ",124],["T_STRING","reindexAttribute",124],"(",["T_VARIABLE","$attributeId",124],",",["T_WHITESPACE"," ",124],["T_VARIABLE","$isIndexable",124],["T_WHITESPACE"," ",124],"=",["T_WHITESPACE"," ",124],["T_STRING","true",124],")",["T_WHITESPACE","\n    ",124],"{",["T_WHITESPACE","\n        ",125],["T_IF","if",126],["T_WHITESPACE"," ",126],"(","!",["T_VARIABLE","$isIndexable",126],")",["T_WHITESPACE"," ",126],"{",["T_WHITESPACE","\n            ",126],["T_VARIABLE","$this",127],["T_OBJECT_OPERATOR","->",127],["T_STRING","_removeAttributeIndexData",127],"(",["T_VARIABLE","$attributeId",127],")",";",["T_WHITESPACE","\n        ",127],"}",["T_WHITESPACE"," ",128],["T_ELSE","else",128],["T_WHITESPACE"," ",128],"{",["T_WHITESPACE","\n            ",128],["T_VARIABLE","$this",129],["T_OBJECT_OPERATOR","->",129],["T_STRING","clearTemporaryIndexTable",129],"(",")",";",["T_WHITESPACE","\n\n            ",129],["T_VARIABLE","$this",131],["T_OBJECT_OPERATOR","->",131],["T_STRING","_prepareIndex",131],"(",["T_STRING","null",131],",",["T_WHITESPACE"," ",131],["T_VARIABLE","$attributeId",131],")",";",["T_WHITESPACE","\n            ",131],["T_VARIABLE","$this",132],["T_OBJECT_OPERATOR","->",132],["T_STRING","_prepareRelationIndex",132],"(",")",";",["T_WHITESPACE","\n            ",132],["T_VARIABLE","$this",133],["T_OBJECT_OPERATOR","->",133],["T_STRING","_removeNotVisibleEntityFromIndex",133],"(",")",";",["T_WHITESPACE","\n\n            ",133],["T_VARIABLE","$this",135],["T_OBJECT_OPERATOR","->",135],["T_STRING","_synchronizeAttributeIndexData",135],"(",["T_VARIABLE","$attributeId",135],")",";",["T_WHITESPACE","\n        ",135],"}",["T_WHITESPACE","\n\n        ",136],["T_RETURN","return",138],["T_WHITESPACE"," ",138],["T_VARIABLE","$this",138],";",["T_WHITESPACE","\n    ",138],"}",["T_WHITESPACE","\n\n    ",139],["T_DOC_COMMENT","\/**\n     * Prepare data index for indexable attributes\n     *\n     * @param array $entityIds      the entity ids limitation\n     * @param int $attributeId      the attribute id limitation\n     * @return $this\n     *\/",141],["T_WHITESPACE","\n    ",147],["T_ABSTRACT","abstract",148],["T_WHITESPACE"," ",148],["T_PROTECTED","protected",148],["T_WHITESPACE"," ",148],["T_FUNCTION","function",148],["T_WHITESPACE"," ",148],["T_STRING","_prepareIndex",148],"(",["T_VARIABLE","$entityIds",148],["T_WHITESPACE"," ",148],"=",["T_WHITESPACE"," ",148],["T_STRING","null",148],",",["T_WHITESPACE"," ",148],["T_VARIABLE","$attributeId",148],["T_WHITESPACE"," ",148],"=",["T_WHITESPACE"," ",148],["T_STRING","null",148],")",";",["T_WHITESPACE","\n\n    ",148],["T_DOC_COMMENT","\/**\n     * Remove Not Visible products from temporary data index\n     *\n     * @return $this\n     *\/",150],["T_WHITESPACE","\n    ",154],["T_PROTECTED","protected",155],["T_WHITESPACE"," ",155],["T_FUNCTION","function",155],["T_WHITESPACE"," ",155],["T_STRING","_removeNotVisibleEntityFromIndex",155],"(",")",["T_WHITESPACE","\n    ",155],"{",["T_WHITESPACE","\n        ",156],["T_VARIABLE","$connection",157],["T_WHITESPACE"," ",157],"=",["T_WHITESPACE"," ",157],["T_VARIABLE","$this",157],["T_OBJECT_OPERATOR","->",157],["T_STRING","getConnection",157],"(",")",";",["T_WHITESPACE","\n        ",157],["T_VARIABLE","$idxTable",158],["T_WHITESPACE"," ",158],"=",["T_WHITESPACE"," ",158],["T_VARIABLE","$this",158],["T_OBJECT_OPERATOR","->",158],["T_STRING","getIdxTable",158],"(",")",";",["T_WHITESPACE","\n\n        ",158],["T_VARIABLE","$select",160],["T_WHITESPACE"," ",160],"=",["T_WHITESPACE"," ",160],["T_VARIABLE","$connection",160],["T_OBJECT_OPERATOR","->",160],["T_STRING","select",160],"(",")",["T_OBJECT_OPERATOR","->",160],["T_STRING","from",160],"(",["T_VARIABLE","$idxTable",160],",",["T_WHITESPACE"," ",160],["T_STRING","null",160],")",";",["T_WHITESPACE","\n\n        ",160],["T_VARIABLE","$select",162],["T_OBJECT_OPERATOR","->",162],["T_STRING","joinLeft",162],"(",["T_WHITESPACE","\n            ",162],"[",["T_CONSTANT_ENCAPSED_STRING","'cpe'",163],["T_WHITESPACE"," ",163],["T_DOUBLE_ARROW","=>",163],["T_WHITESPACE"," ",163],["T_VARIABLE","$this",163],["T_OBJECT_OPERATOR","->",163],["T_STRING","getTable",163],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog_product_entity'",163],")","]",",",["T_WHITESPACE","\n            ",163],"\"",["T_ENCAPSED_AND_WHITESPACE","cpe.entity_id = ",164],["T_CURLY_OPEN","{",164],["T_VARIABLE","$idxTable",164],"}",["T_ENCAPSED_AND_WHITESPACE",".entity_id",164],"\"",",",["T_WHITESPACE","\n            ",164],"[","]",["T_WHITESPACE","\n        ",165],")",";",["T_WHITESPACE","\n        ",166],["T_VARIABLE","$linkField",167],["T_WHITESPACE"," ",167],"=",["T_WHITESPACE"," ",167],["T_VARIABLE","$this",167],["T_OBJECT_OPERATOR","->",167],["T_STRING","getMetadataPool",167],"(",")",["T_OBJECT_OPERATOR","->",167],["T_STRING","getMetadata",167],"(",["T_STRING","ProductInterface",167],["T_DOUBLE_COLON","::",167],["T_CLASS","class",167],")",["T_OBJECT_OPERATOR","->",167],["T_STRING","getLinkField",167],"(",")",";",["T_WHITESPACE","\n        ",167],["T_VARIABLE","$condition",168],["T_WHITESPACE"," ",168],"=",["T_WHITESPACE"," ",168],["T_VARIABLE","$connection",168],["T_OBJECT_OPERATOR","->",168],["T_STRING","quoteInto",168],"(",["T_CONSTANT_ENCAPSED_STRING","'=?'",168],",",["T_WHITESPACE"," ",168],["T_NS_SEPARATOR","\\",168],["T_STRING","Magento",168],["T_NS_SEPARATOR","\\",168],["T_STRING","Catalog",168],["T_NS_SEPARATOR","\\",168],["T_STRING","Model",168],["T_NS_SEPARATOR","\\",168],["T_STRING","Product",168],["T_NS_SEPARATOR","\\",168],["T_STRING","Visibility",168],["T_DOUBLE_COLON","::",168],["T_STRING","VISIBILITY_NOT_VISIBLE",168],")",";",["T_WHITESPACE","\n        ",168],["T_VARIABLE","$this",169],["T_OBJECT_OPERATOR","->",169],["T_STRING","_addAttributeToSelect",169],"(",["T_WHITESPACE","\n            ",169],["T_VARIABLE","$select",170],",",["T_WHITESPACE","\n            ",170],["T_CONSTANT_ENCAPSED_STRING","'visibility'",171],",",["T_WHITESPACE","\n            ",171],"\"",["T_ENCAPSED_AND_WHITESPACE","cpe.",172],["T_CURLY_OPEN","{",172],["T_VARIABLE","$linkField",172],"}","\"",",",["T_WHITESPACE","\n            ",172],["T_VARIABLE","$idxTable",173],["T_WHITESPACE"," ",173],".",["T_WHITESPACE"," ",173],["T_CONSTANT_ENCAPSED_STRING","'.store_id'",173],",",["T_WHITESPACE","\n            ",173],["T_VARIABLE","$condition",174],["T_WHITESPACE","\n        ",174],")",";",["T_WHITESPACE","\n\n        ",175],["T_VARIABLE","$query",177],["T_WHITESPACE"," ",177],"=",["T_WHITESPACE"," ",177],["T_VARIABLE","$select",177],["T_OBJECT_OPERATOR","->",177],["T_STRING","deleteFromSelect",177],"(",["T_VARIABLE","$idxTable",177],")",";",["T_WHITESPACE","\n        ",177],["T_VARIABLE","$connection",178],["T_OBJECT_OPERATOR","->",178],["T_STRING","query",178],"(",["T_VARIABLE","$query",178],")",";",["T_WHITESPACE","\n\n        ",178],["T_RETURN","return",180],["T_WHITESPACE"," ",180],["T_VARIABLE","$this",180],";",["T_WHITESPACE","\n    ",180],"}",["T_WHITESPACE","\n\n    ",181],["T_DOC_COMMENT","\/**\n     * Prepare data index select for product relations\n     *\n     * @param array $parentIds the parent entity ids limitation\n     * @return \\Magento\\Framework\\DB\\Select\n     *\/",183],["T_WHITESPACE","\n    ",188],["T_PROTECTED","protected",189],["T_WHITESPACE"," ",189],["T_FUNCTION","function",189],["T_WHITESPACE"," ",189],["T_STRING","_prepareRelationIndexSelect",189],"(",["T_VARIABLE","$parentIds",189],["T_WHITESPACE"," ",189],"=",["T_WHITESPACE"," ",189],["T_STRING","null",189],")",["T_WHITESPACE","\n    ",189],"{",["T_WHITESPACE","\n        ",190],["T_VARIABLE","$connection",191],["T_WHITESPACE"," ",191],"=",["T_WHITESPACE"," ",191],["T_VARIABLE","$this",191],["T_OBJECT_OPERATOR","->",191],["T_STRING","getConnection",191],"(",")",";",["T_WHITESPACE","\n        ",191],["T_VARIABLE","$idxTable",192],["T_WHITESPACE"," ",192],"=",["T_WHITESPACE"," ",192],["T_VARIABLE","$this",192],["T_OBJECT_OPERATOR","->",192],["T_STRING","getIdxTable",192],"(",")",";",["T_WHITESPACE","\n        ",192],["T_VARIABLE","$linkField",193],["T_WHITESPACE"," ",193],"=",["T_WHITESPACE"," ",193],["T_VARIABLE","$this",193],["T_OBJECT_OPERATOR","->",193],["T_STRING","getMetadataPool",193],"(",")",["T_OBJECT_OPERATOR","->",193],["T_STRING","getMetadata",193],"(",["T_STRING","ProductInterface",193],["T_DOUBLE_COLON","::",193],["T_CLASS","class",193],")",["T_OBJECT_OPERATOR","->",193],["T_STRING","getLinkField",193],"(",")",";",["T_WHITESPACE","\n        ",193],["T_VARIABLE","$select",194],["T_WHITESPACE"," ",194],"=",["T_WHITESPACE"," ",194],["T_VARIABLE","$connection",194],["T_OBJECT_OPERATOR","->",194],["T_STRING","select",194],"(",")",["T_OBJECT_OPERATOR","->",194],["T_STRING","from",194],"(",["T_WHITESPACE","\n            ",194],"[",["T_CONSTANT_ENCAPSED_STRING","'l'",195],["T_WHITESPACE"," ",195],["T_DOUBLE_ARROW","=>",195],["T_WHITESPACE"," ",195],["T_VARIABLE","$this",195],["T_OBJECT_OPERATOR","->",195],["T_STRING","getTable",195],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog_product_relation'",195],")","]",",",["T_WHITESPACE","\n            ",195],"[","]",["T_WHITESPACE","\n        ",196],")",["T_OBJECT_OPERATOR","->",197],["T_STRING","joinLeft",197],"(",["T_WHITESPACE","\n            ",197],"[",["T_CONSTANT_ENCAPSED_STRING","'e'",198],["T_WHITESPACE"," ",198],["T_DOUBLE_ARROW","=>",198],["T_WHITESPACE"," ",198],["T_VARIABLE","$this",198],["T_OBJECT_OPERATOR","->",198],["T_STRING","getTable",198],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog_product_entity'",198],")","]",",",["T_WHITESPACE","\n            ",198],["T_CONSTANT_ENCAPSED_STRING","'e.'",199],["T_WHITESPACE"," ",199],".",["T_WHITESPACE"," ",199],["T_VARIABLE","$linkField",199],["T_WHITESPACE"," ",199],".",["T_CONSTANT_ENCAPSED_STRING","' = l.parent_id'",199],",",["T_WHITESPACE","\n            ",199],"[","]",["T_WHITESPACE","\n        ",200],")",["T_OBJECT_OPERATOR","->",201],["T_STRING","join",201],"(",["T_WHITESPACE","\n            ",201],"[",["T_CONSTANT_ENCAPSED_STRING","'cs'",202],["T_WHITESPACE"," ",202],["T_DOUBLE_ARROW","=>",202],["T_WHITESPACE"," ",202],["T_VARIABLE","$this",202],["T_OBJECT_OPERATOR","->",202],["T_STRING","getTable",202],"(",["T_CONSTANT_ENCAPSED_STRING","'store'",202],")","]",",",["T_WHITESPACE","\n            ",202],["T_CONSTANT_ENCAPSED_STRING","''",203],",",["T_WHITESPACE","\n            ",203],"[","]",["T_WHITESPACE","\n        ",204],")",["T_OBJECT_OPERATOR","->",205],["T_STRING","join",205],"(",["T_WHITESPACE","\n            ",205],"[",["T_CONSTANT_ENCAPSED_STRING","'i'",206],["T_WHITESPACE"," ",206],["T_DOUBLE_ARROW","=>",206],["T_WHITESPACE"," ",206],["T_VARIABLE","$idxTable",206],"]",",",["T_WHITESPACE","\n            ",206],["T_CONSTANT_ENCAPSED_STRING","'l.child_id = i.entity_id AND cs.store_id = i.store_id'",207],",",["T_WHITESPACE","\n            ",207],"[","]",["T_WHITESPACE","\n        ",208],")",["T_OBJECT_OPERATOR","->",209],["T_STRING","group",209],"(",["T_WHITESPACE","\n            ",209],"[",["T_CONSTANT_ENCAPSED_STRING","'parent_id'",210],",",["T_WHITESPACE"," ",210],["T_CONSTANT_ENCAPSED_STRING","'i.attribute_id'",210],",",["T_WHITESPACE"," ",210],["T_CONSTANT_ENCAPSED_STRING","'i.store_id'",210],",",["T_WHITESPACE"," ",210],["T_CONSTANT_ENCAPSED_STRING","'i.value'",210],",",["T_WHITESPACE"," ",210],["T_CONSTANT_ENCAPSED_STRING","'l.child_id'",210],"]",["T_WHITESPACE","\n        ",210],")",["T_OBJECT_OPERATOR","->",211],["T_STRING","columns",211],"(",["T_WHITESPACE","\n            ",211],"[",["T_WHITESPACE","\n                ",212],["T_CONSTANT_ENCAPSED_STRING","'parent_id'",213],["T_WHITESPACE"," ",213],["T_DOUBLE_ARROW","=>",213],["T_WHITESPACE"," ",213],["T_CONSTANT_ENCAPSED_STRING","'e.entity_id'",213],",",["T_WHITESPACE","\n                ",213],["T_CONSTANT_ENCAPSED_STRING","'attribute_id'",214],["T_WHITESPACE"," ",214],["T_DOUBLE_ARROW","=>",214],["T_WHITESPACE"," ",214],["T_CONSTANT_ENCAPSED_STRING","'i.attribute_id'",214],",",["T_WHITESPACE","\n                ",214],["T_CONSTANT_ENCAPSED_STRING","'store_id'",215],["T_WHITESPACE"," ",215],["T_DOUBLE_ARROW","=>",215],["T_WHITESPACE"," ",215],["T_CONSTANT_ENCAPSED_STRING","'i.store_id'",215],",",["T_WHITESPACE","\n                ",215],["T_CONSTANT_ENCAPSED_STRING","'value'",216],["T_WHITESPACE"," ",216],["T_DOUBLE_ARROW","=>",216],["T_WHITESPACE"," ",216],["T_CONSTANT_ENCAPSED_STRING","'i.value'",216],",",["T_WHITESPACE","\n                ",216],["T_CONSTANT_ENCAPSED_STRING","'source_id'",217],["T_WHITESPACE"," ",217],["T_DOUBLE_ARROW","=>",217],["T_WHITESPACE"," ",217],["T_CONSTANT_ENCAPSED_STRING","'l.child_id'",217],["T_WHITESPACE","\n            ",217],"]",["T_WHITESPACE","\n        ",218],")",";",["T_WHITESPACE","\n        ",219],["T_IF","if",220],["T_WHITESPACE"," ",220],"(",["T_VARIABLE","$parentIds",220],["T_WHITESPACE"," ",220],["T_IS_NOT_IDENTICAL","!==",220],["T_WHITESPACE"," ",220],["T_STRING","null",220],")",["T_WHITESPACE"," ",220],"{",["T_WHITESPACE","\n            ",220],["T_VARIABLE","$select",221],["T_OBJECT_OPERATOR","->",221],["T_STRING","where",221],"(",["T_CONSTANT_ENCAPSED_STRING","'e.entity_id IN(?)'",221],",",["T_WHITESPACE"," ",221],["T_VARIABLE","$parentIds",221],")",";",["T_WHITESPACE","\n        ",221],"}",["T_WHITESPACE","\n\n        ",222],["T_DOC_COMMENT","\/**\n         * Add additional external limitation\n         *\/",224],["T_WHITESPACE","\n        ",226],["T_VARIABLE","$this",227],["T_OBJECT_OPERATOR","->",227],["T_STRING","_eventManager",227],["T_OBJECT_OPERATOR","->",227],["T_STRING","dispatch",227],"(",["T_WHITESPACE","\n            ",227],["T_CONSTANT_ENCAPSED_STRING","'prepare_catalog_product_index_select'",228],",",["T_WHITESPACE","\n            ",228],"[",["T_WHITESPACE","\n                ",229],["T_CONSTANT_ENCAPSED_STRING","'select'",230],["T_WHITESPACE"," ",230],["T_DOUBLE_ARROW","=>",230],["T_WHITESPACE"," ",230],["T_VARIABLE","$select",230],",",["T_WHITESPACE","\n                ",230],["T_CONSTANT_ENCAPSED_STRING","'entity_field'",231],["T_WHITESPACE"," ",231],["T_DOUBLE_ARROW","=>",231],["T_WHITESPACE"," ",231],["T_NEW","new",231],["T_WHITESPACE"," ",231],["T_NS_SEPARATOR","\\",231],["T_STRING","Zend_Db_Expr",231],"(",["T_CONSTANT_ENCAPSED_STRING","'l.parent_id'",231],")",",",["T_WHITESPACE","\n                ",231],["T_CONSTANT_ENCAPSED_STRING","'website_field'",232],["T_WHITESPACE"," ",232],["T_DOUBLE_ARROW","=>",232],["T_WHITESPACE"," ",232],["T_NEW","new",232],["T_WHITESPACE"," ",232],["T_NS_SEPARATOR","\\",232],["T_STRING","Zend_Db_Expr",232],"(",["T_CONSTANT_ENCAPSED_STRING","'cs.website_id'",232],")",",",["T_WHITESPACE","\n                ",232],["T_CONSTANT_ENCAPSED_STRING","'store_field'",233],["T_WHITESPACE"," ",233],["T_DOUBLE_ARROW","=>",233],["T_WHITESPACE"," ",233],["T_NEW","new",233],["T_WHITESPACE"," ",233],["T_NS_SEPARATOR","\\",233],["T_STRING","Zend_Db_Expr",233],"(",["T_CONSTANT_ENCAPSED_STRING","'cs.store_id'",233],")",",",["T_WHITESPACE","\n            ",233],"]",["T_WHITESPACE","\n        ",234],")",";",["T_WHITESPACE","\n\n        ",235],["T_RETURN","return",237],["T_WHITESPACE"," ",237],["T_VARIABLE","$select",237],";",["T_WHITESPACE","\n    ",237],"}",["T_WHITESPACE","\n\n    ",238],["T_DOC_COMMENT","\/**\n     * Prepare data index for product relations\n     *\n     * @param array $parentIds the parent entity ids limitation\n     * @return $this\n     *\/",240],["T_WHITESPACE","\n    ",245],["T_PROTECTED","protected",246],["T_WHITESPACE"," ",246],["T_FUNCTION","function",246],["T_WHITESPACE"," ",246],["T_STRING","_prepareRelationIndex",246],"(",["T_VARIABLE","$parentIds",246],["T_WHITESPACE"," ",246],"=",["T_WHITESPACE"," ",246],["T_STRING","null",246],")",["T_WHITESPACE","\n    ",246],"{",["T_WHITESPACE","\n        ",247],["T_VARIABLE","$connection",248],["T_WHITESPACE"," ",248],"=",["T_WHITESPACE"," ",248],["T_VARIABLE","$this",248],["T_OBJECT_OPERATOR","->",248],["T_STRING","getConnection",248],"(",")",";",["T_WHITESPACE","\n        ",248],["T_VARIABLE","$idxTable",249],["T_WHITESPACE"," ",249],"=",["T_WHITESPACE"," ",249],["T_VARIABLE","$this",249],["T_OBJECT_OPERATOR","->",249],["T_STRING","getIdxTable",249],"(",")",";",["T_WHITESPACE","\n\n        ",249],["T_VARIABLE","$query",251],["T_WHITESPACE"," ",251],"=",["T_WHITESPACE"," ",251],["T_VARIABLE","$connection",251],["T_OBJECT_OPERATOR","->",251],["T_STRING","insertFromSelect",251],"(",["T_WHITESPACE","\n            ",251],["T_VARIABLE","$this",252],["T_OBJECT_OPERATOR","->",252],["T_STRING","_prepareRelationIndexSelect",252],"(",["T_VARIABLE","$parentIds",252],")",",",["T_WHITESPACE","\n            ",252],["T_VARIABLE","$idxTable",253],",",["T_WHITESPACE","\n            ",253],"[","]",",",["T_WHITESPACE","\n            ",254],["T_NS_SEPARATOR","\\",255],["T_STRING","Magento",255],["T_NS_SEPARATOR","\\",255],["T_STRING","Framework",255],["T_NS_SEPARATOR","\\",255],["T_STRING","DB",255],["T_NS_SEPARATOR","\\",255],["T_STRING","Adapter",255],["T_NS_SEPARATOR","\\",255],["T_STRING","AdapterInterface",255],["T_DOUBLE_COLON","::",255],["T_STRING","INSERT_IGNORE",255],["T_WHITESPACE","\n        ",255],")",";",["T_WHITESPACE","\n        ",256],["T_VARIABLE","$connection",257],["T_OBJECT_OPERATOR","->",257],["T_STRING","query",257],"(",["T_VARIABLE","$query",257],")",";",["T_WHITESPACE","\n\n        ",257],["T_RETURN","return",259],["T_WHITESPACE"," ",259],["T_VARIABLE","$this",259],";",["T_WHITESPACE","\n    ",259],"}",["T_WHITESPACE","\n\n    ",260],["T_DOC_COMMENT","\/**\n     * Retrieve condition for retrieve indexable attribute select\n     * the catalog\/eav_attribute table must have alias is ca\n     *\n     * @return string\n     *\/",262],["T_WHITESPACE","\n    ",267],["T_PROTECTED","protected",268],["T_WHITESPACE"," ",268],["T_FUNCTION","function",268],["T_WHITESPACE"," ",268],["T_STRING","_getIndexableAttributesCondition",268],"(",")",["T_WHITESPACE","\n    ",268],"{",["T_WHITESPACE","\n        ",269],["T_VARIABLE","$conditions",270],["T_WHITESPACE"," ",270],"=",["T_WHITESPACE"," ",270],"[",["T_WHITESPACE","\n            ",270],["T_CONSTANT_ENCAPSED_STRING","'ca.is_filterable_in_search > 0'",271],",",["T_WHITESPACE","\n            ",271],["T_CONSTANT_ENCAPSED_STRING","'ca.is_visible_in_advanced_search > 0'",272],",",["T_WHITESPACE","\n            ",272],["T_CONSTANT_ENCAPSED_STRING","'ca.is_filterable > 0'",273],",",["T_WHITESPACE","\n            ",273],["T_COMMENT","\/\/ Visibility is attribute that isn't used by search, but required to determine is product should be shown\n",274],["T_WHITESPACE","            ",275],["T_CONSTANT_ENCAPSED_STRING","\"ea.attribute_code = 'visibility'\"",275],["T_WHITESPACE","\n        ",275],"]",";",["T_WHITESPACE","\n\n        ",276],["T_RETURN","return",278],["T_WHITESPACE"," ",278],["T_STRING","implode",278],"(",["T_CONSTANT_ENCAPSED_STRING","' OR '",278],",",["T_WHITESPACE"," ",278],["T_VARIABLE","$conditions",278],")",";",["T_WHITESPACE","\n    ",278],"}",["T_WHITESPACE","\n\n    ",279],["T_DOC_COMMENT","\/**\n     * Remove index data from index by attribute id\n     *\n     * @param int $attributeId\n     * @return $this\n     * @throws \\Exception\n     *\/",281],["T_WHITESPACE","\n    ",287],["T_PROTECTED","protected",288],["T_WHITESPACE"," ",288],["T_FUNCTION","function",288],["T_WHITESPACE"," ",288],["T_STRING","_removeAttributeIndexData",288],"(",["T_VARIABLE","$attributeId",288],")",["T_WHITESPACE","\n    ",288],"{",["T_WHITESPACE","\n        ",289],["T_VARIABLE","$connection",290],["T_WHITESPACE"," ",290],"=",["T_WHITESPACE"," ",290],["T_VARIABLE","$this",290],["T_OBJECT_OPERATOR","->",290],["T_STRING","getConnection",290],"(",")",";",["T_WHITESPACE","\n        ",290],["T_VARIABLE","$connection",291],["T_OBJECT_OPERATOR","->",291],["T_STRING","beginTransaction",291],"(",")",";",["T_WHITESPACE","\n        ",291],["T_TRY","try",292],["T_WHITESPACE"," ",292],"{",["T_WHITESPACE","\n            ",292],["T_VARIABLE","$where",293],["T_WHITESPACE"," ",293],"=",["T_WHITESPACE"," ",293],["T_VARIABLE","$connection",293],["T_OBJECT_OPERATOR","->",293],["T_STRING","quoteInto",293],"(",["T_CONSTANT_ENCAPSED_STRING","'attribute_id = ?'",293],",",["T_WHITESPACE"," ",293],["T_VARIABLE","$attributeId",293],")",";",["T_WHITESPACE","\n            ",293],["T_VARIABLE","$connection",294],["T_OBJECT_OPERATOR","->",294],["T_STRING","delete",294],"(",["T_VARIABLE","$this",294],["T_OBJECT_OPERATOR","->",294],["T_STRING","getMainTable",294],"(",")",",",["T_WHITESPACE"," ",294],["T_VARIABLE","$where",294],")",";",["T_WHITESPACE","\n            ",294],["T_VARIABLE","$connection",295],["T_OBJECT_OPERATOR","->",295],["T_STRING","commit",295],"(",")",";",["T_WHITESPACE","\n        ",295],"}",["T_WHITESPACE"," ",296],["T_CATCH","catch",296],["T_WHITESPACE"," ",296],"(",["T_NS_SEPARATOR","\\",296],["T_STRING","Exception",296],["T_WHITESPACE"," ",296],["T_VARIABLE","$e",296],")",["T_WHITESPACE"," ",296],"{",["T_WHITESPACE","\n            ",296],["T_VARIABLE","$connection",297],["T_OBJECT_OPERATOR","->",297],["T_STRING","rollBack",297],"(",")",";",["T_WHITESPACE","\n            ",297],["T_THROW","throw",298],["T_WHITESPACE"," ",298],["T_VARIABLE","$e",298],";",["T_WHITESPACE","\n        ",298],"}",["T_WHITESPACE","\n        ",299],["T_RETURN","return",300],["T_WHITESPACE"," ",300],["T_VARIABLE","$this",300],";",["T_WHITESPACE","\n    ",300],"}",["T_WHITESPACE","\n\n    ",301],["T_DOC_COMMENT","\/**\n     * Synchronize temporary index table with index table by attribute id\n     *\n     * @param int $attributeId\n     * @return $this\n     * @throws \\Exception\n     *\/",303],["T_WHITESPACE","\n    ",309],["T_PROTECTED","protected",310],["T_WHITESPACE"," ",310],["T_FUNCTION","function",310],["T_WHITESPACE"," ",310],["T_STRING","_synchronizeAttributeIndexData",310],"(",["T_VARIABLE","$attributeId",310],")",["T_WHITESPACE","\n    ",310],"{",["T_WHITESPACE","\n        ",311],["T_VARIABLE","$connection",312],["T_WHITESPACE"," ",312],"=",["T_WHITESPACE"," ",312],["T_VARIABLE","$this",312],["T_OBJECT_OPERATOR","->",312],["T_STRING","getConnection",312],"(",")",";",["T_WHITESPACE","\n        ",312],["T_VARIABLE","$connection",313],["T_OBJECT_OPERATOR","->",313],["T_STRING","beginTransaction",313],"(",")",";",["T_WHITESPACE","\n        ",313],["T_TRY","try",314],["T_WHITESPACE"," ",314],"{",["T_WHITESPACE","\n            ",314],["T_COMMENT","\/\/ remove index by attribute\n",315],["T_WHITESPACE","            ",316],["T_VARIABLE","$where",316],["T_WHITESPACE"," ",316],"=",["T_WHITESPACE"," ",316],["T_VARIABLE","$connection",316],["T_OBJECT_OPERATOR","->",316],["T_STRING","quoteInto",316],"(",["T_CONSTANT_ENCAPSED_STRING","'attribute_id = ?'",316],",",["T_WHITESPACE"," ",316],["T_VARIABLE","$attributeId",316],")",";",["T_WHITESPACE","\n            ",316],["T_VARIABLE","$connection",317],["T_OBJECT_OPERATOR","->",317],["T_STRING","delete",317],"(",["T_VARIABLE","$this",317],["T_OBJECT_OPERATOR","->",317],["T_STRING","getMainTable",317],"(",")",",",["T_WHITESPACE"," ",317],["T_VARIABLE","$where",317],")",";",["T_WHITESPACE","\n\n            ",317],["T_COMMENT","\/\/ insert new index\n",319],["T_WHITESPACE","            ",320],["T_VARIABLE","$this",320],["T_OBJECT_OPERATOR","->",320],["T_STRING","insertFromTable",320],"(",["T_VARIABLE","$this",320],["T_OBJECT_OPERATOR","->",320],["T_STRING","getIdxTable",320],"(",")",",",["T_WHITESPACE"," ",320],["T_VARIABLE","$this",320],["T_OBJECT_OPERATOR","->",320],["T_STRING","getMainTable",320],"(",")",")",";",["T_WHITESPACE","\n            ",320],["T_VARIABLE","$connection",321],["T_OBJECT_OPERATOR","->",321],["T_STRING","commit",321],"(",")",";",["T_WHITESPACE","\n        ",321],"}",["T_WHITESPACE"," ",322],["T_CATCH","catch",322],["T_WHITESPACE"," ",322],"(",["T_NS_SEPARATOR","\\",322],["T_STRING","Exception",322],["T_WHITESPACE"," ",322],["T_VARIABLE","$e",322],")",["T_WHITESPACE"," ",322],"{",["T_WHITESPACE","\n            ",322],["T_VARIABLE","$connection",323],["T_OBJECT_OPERATOR","->",323],["T_STRING","rollBack",323],"(",")",";",["T_WHITESPACE","\n            ",323],["T_THROW","throw",324],["T_WHITESPACE"," ",324],["T_VARIABLE","$e",324],";",["T_WHITESPACE","\n        ",324],"}",["T_WHITESPACE","\n        ",325],["T_RETURN","return",326],["T_WHITESPACE"," ",326],["T_VARIABLE","$this",326],";",["T_WHITESPACE","\n    ",326],"}",["T_WHITESPACE","\n",327],"}",["T_WHITESPACE","\n",328]]
[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Copyright \u00c2\u00a9 2013-2017 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n *\/",2],["T_WHITESPACE","\n",5],["T_NAMESPACE","namespace",6],["T_WHITESPACE"," ",6],["T_STRING","Magento",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Catalog",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Model",6],";",["T_WHITESPACE","\n\n",6],["T_DOC_COMMENT","\/**\n * Catalog image uploader\n *\/",8],["T_WHITESPACE","\n",10],["T_CLASS","class",11],["T_WHITESPACE"," ",11],["T_STRING","ImageUploader",11],["T_WHITESPACE","\n",11],"{",["T_WHITESPACE","\n    ",12],["T_DOC_COMMENT","\/**\n     * Core file storage database\n     *\n     * @var \\Magento\\MediaStorage\\Helper\\File\\Storage\\Database\n     *\/",13],["T_WHITESPACE","\n    ",17],["T_PROTECTED","protected",18],["T_WHITESPACE"," ",18],["T_VARIABLE","$coreFileStorageDatabase",18],";",["T_WHITESPACE","\n\n    ",18],["T_DOC_COMMENT","\/**\n     * Media directory object (writable).\n     *\n     * @var \\Magento\\Framework\\Filesystem\\Directory\\WriteInterface\n     *\/",20],["T_WHITESPACE","\n    ",24],["T_PROTECTED","protected",25],["T_WHITESPACE"," ",25],["T_VARIABLE","$mediaDirectory",25],";",["T_WHITESPACE","\n\n    ",25],["T_DOC_COMMENT","\/**\n     * Uploader factory\n     *\n     * @var \\Magento\\MediaStorage\\Model\\File\\UploaderFactory\n     *\/",27],["T_WHITESPACE","\n    ",31],["T_PRIVATE","private",32],["T_WHITESPACE"," ",32],["T_VARIABLE","$uploaderFactory",32],";",["T_WHITESPACE","\n\n    ",32],["T_DOC_COMMENT","\/**\n     * Store manager\n     *\n     * @var \\Magento\\Store\\Model\\StoreManagerInterface\n     *\/",34],["T_WHITESPACE","\n    ",38],["T_PROTECTED","protected",39],["T_WHITESPACE"," ",39],["T_VARIABLE","$storeManager",39],";",["T_WHITESPACE","\n\n    ",39],["T_DOC_COMMENT","\/**\n     * @var \\Psr\\Log\\LoggerInterface\n     *\/",41],["T_WHITESPACE","\n    ",43],["T_PROTECTED","protected",44],["T_WHITESPACE"," ",44],["T_VARIABLE","$logger",44],";",["T_WHITESPACE","\n\n    ",44],["T_DOC_COMMENT","\/**\n     * Base tmp path\n     *\n     * @var string\n     *\/",46],["T_WHITESPACE","\n    ",50],["T_PROTECTED","protected",51],["T_WHITESPACE"," ",51],["T_VARIABLE","$baseTmpPath",51],";",["T_WHITESPACE","\n\n    ",51],["T_DOC_COMMENT","\/**\n     * Base path\n     *\n     * @var string\n     *\/",53],["T_WHITESPACE","\n    ",57],["T_PROTECTED","protected",58],["T_WHITESPACE"," ",58],["T_VARIABLE","$basePath",58],";",["T_WHITESPACE","\n\n    ",58],["T_DOC_COMMENT","\/**\n     * Allowed extensions\n     *\n     * @var string\n     *\/",60],["T_WHITESPACE","\n    ",64],["T_PROTECTED","protected",65],["T_WHITESPACE"," ",65],["T_VARIABLE","$allowedExtensions",65],";",["T_WHITESPACE","\n\n    ",65],["T_DOC_COMMENT","\/**\n     * ImageUploader constructor\n     *\n     * @param \\Magento\\MediaStorage\\Helper\\File\\Storage\\Database $coreFileStorageDatabase\n     * @param \\Magento\\Framework\\Filesystem $filesystem\n     * @param \\Magento\\MediaStorage\\Model\\File\\UploaderFactory $uploaderFactory\n     * @param \\Magento\\Store\\Model\\StoreManagerInterface $storeManager\n     * @param \\Psr\\Log\\LoggerInterface $logger\n     * @param string $baseTmpPath\n     * @param string $basePath\n     * @param string[] $allowedExtensions\n     *\/",67],["T_WHITESPACE","\n    ",78],["T_PUBLIC","public",79],["T_WHITESPACE"," ",79],["T_FUNCTION","function",79],["T_WHITESPACE"," ",79],["T_STRING","__construct",79],"(",["T_WHITESPACE","\n        ",79],["T_NS_SEPARATOR","\\",80],["T_STRING","Magento",80],["T_NS_SEPARATOR","\\",80],["T_STRING","MediaStorage",80],["T_NS_SEPARATOR","\\",80],["T_STRING","Helper",80],["T_NS_SEPARATOR","\\",80],["T_STRING","File",80],["T_NS_SEPARATOR","\\",80],["T_STRING","Storage",80],["T_NS_SEPARATOR","\\",80],["T_STRING","Database",80],["T_WHITESPACE"," ",80],["T_VARIABLE","$coreFileStorageDatabase",80],",",["T_WHITESPACE","\n        ",80],["T_NS_SEPARATOR","\\",81],["T_STRING","Magento",81],["T_NS_SEPARATOR","\\",81],["T_STRING","Framework",81],["T_NS_SEPARATOR","\\",81],["T_STRING","Filesystem",81],["T_WHITESPACE"," ",81],["T_VARIABLE","$filesystem",81],",",["T_WHITESPACE","\n        ",81],["T_NS_SEPARATOR","\\",82],["T_STRING","Magento",82],["T_NS_SEPARATOR","\\",82],["T_STRING","MediaStorage",82],["T_NS_SEPARATOR","\\",82],["T_STRING","Model",82],["T_NS_SEPARATOR","\\",82],["T_STRING","File",82],["T_NS_SEPARATOR","\\",82],["T_STRING","UploaderFactory",82],["T_WHITESPACE"," ",82],["T_VARIABLE","$uploaderFactory",82],",",["T_WHITESPACE","\n        ",82],["T_NS_SEPARATOR","\\",83],["T_STRING","Magento",83],["T_NS_SEPARATOR","\\",83],["T_STRING","Store",83],["T_NS_SEPARATOR","\\",83],["T_STRING","Model",83],["T_NS_SEPARATOR","\\",83],["T_STRING","StoreManagerInterface",83],["T_WHITESPACE"," ",83],["T_VARIABLE","$storeManager",83],",",["T_WHITESPACE","\n        ",83],["T_NS_SEPARATOR","\\",84],["T_STRING","Psr",84],["T_NS_SEPARATOR","\\",84],["T_STRING","Log",84],["T_NS_SEPARATOR","\\",84],["T_STRING","LoggerInterface",84],["T_WHITESPACE"," ",84],["T_VARIABLE","$logger",84],",",["T_WHITESPACE","\n        ",84],["T_VARIABLE","$baseTmpPath",85],",",["T_WHITESPACE","\n        ",85],["T_VARIABLE","$basePath",86],",",["T_WHITESPACE","\n        ",86],["T_VARIABLE","$allowedExtensions",87],["T_WHITESPACE","\n    ",87],")",["T_WHITESPACE"," ",88],"{",["T_WHITESPACE","\n        ",88],["T_VARIABLE","$this",89],["T_OBJECT_OPERATOR","->",89],["T_STRING","coreFileStorageDatabase",89],["T_WHITESPACE"," ",89],"=",["T_WHITESPACE"," ",89],["T_VARIABLE","$coreFileStorageDatabase",89],";",["T_WHITESPACE","\n        ",89],["T_VARIABLE","$this",90],["T_OBJECT_OPERATOR","->",90],["T_STRING","mediaDirectory",90],["T_WHITESPACE"," ",90],"=",["T_WHITESPACE"," ",90],["T_VARIABLE","$filesystem",90],["T_OBJECT_OPERATOR","->",90],["T_STRING","getDirectoryWrite",90],"(",["T_NS_SEPARATOR","\\",90],["T_STRING","Magento",90],["T_NS_SEPARATOR","\\",90],["T_STRING","Framework",90],["T_NS_SEPARATOR","\\",90],["T_STRING","App",90],["T_NS_SEPARATOR","\\",90],["T_STRING","Filesystem",90],["T_NS_SEPARATOR","\\",90],["T_STRING","DirectoryList",90],["T_DOUBLE_COLON","::",90],["T_STRING","MEDIA",90],")",";",["T_WHITESPACE","\n        ",90],["T_VARIABLE","$this",91],["T_OBJECT_OPERATOR","->",91],["T_STRING","uploaderFactory",91],["T_WHITESPACE"," ",91],"=",["T_WHITESPACE"," ",91],["T_VARIABLE","$uploaderFactory",91],";",["T_WHITESPACE","\n        ",91],["T_VARIABLE","$this",92],["T_OBJECT_OPERATOR","->",92],["T_STRING","storeManager",92],["T_WHITESPACE"," ",92],"=",["T_WHITESPACE"," ",92],["T_VARIABLE","$storeManager",92],";",["T_WHITESPACE","\n        ",92],["T_VARIABLE","$this",93],["T_OBJECT_OPERATOR","->",93],["T_STRING","logger",93],["T_WHITESPACE"," ",93],"=",["T_WHITESPACE"," ",93],["T_VARIABLE","$logger",93],";",["T_WHITESPACE","\n        ",93],["T_VARIABLE","$this",94],["T_OBJECT_OPERATOR","->",94],["T_STRING","baseTmpPath",94],["T_WHITESPACE"," ",94],"=",["T_WHITESPACE"," ",94],["T_VARIABLE","$baseTmpPath",94],";",["T_WHITESPACE","\n        ",94],["T_VARIABLE","$this",95],["T_OBJECT_OPERATOR","->",95],["T_STRING","basePath",95],["T_WHITESPACE"," ",95],"=",["T_WHITESPACE"," ",95],["T_VARIABLE","$basePath",95],";",["T_WHITESPACE","\n        ",95],["T_VARIABLE","$this",96],["T_OBJECT_OPERATOR","->",96],["T_STRING","allowedExtensions",96],["T_WHITESPACE"," ",96],"=",["T_WHITESPACE"," ",96],["T_VARIABLE","$allowedExtensions",96],";",["T_WHITESPACE","\n    ",96],"}",["T_WHITESPACE","\n\n    ",97],["T_DOC_COMMENT","\/**\n     * Set base tmp path\n     *\n     * @param string $baseTmpPath\n     *\n     * @return void\n     *\/",99],["T_WHITESPACE","\n    ",105],["T_PUBLIC","public",106],["T_WHITESPACE"," ",106],["T_FUNCTION","function",106],["T_WHITESPACE"," ",106],["T_STRING","setBaseTmpPath",106],"(",["T_VARIABLE","$baseTmpPath",106],")",["T_WHITESPACE","\n    ",106],"{",["T_WHITESPACE","\n        ",107],["T_VARIABLE","$this",108],["T_OBJECT_OPERATOR","->",108],["T_STRING","baseTmpPath",108],["T_WHITESPACE"," ",108],"=",["T_WHITESPACE"," ",108],["T_VARIABLE","$baseTmpPath",108],";",["T_WHITESPACE","\n    ",108],"}",["T_WHITESPACE","\n\n    ",109],["T_DOC_COMMENT","\/**\n     * Set base path\n     *\n     * @param string $basePath\n     *\n     * @return void\n     *\/",111],["T_WHITESPACE","\n    ",117],["T_PUBLIC","public",118],["T_WHITESPACE"," ",118],["T_FUNCTION","function",118],["T_WHITESPACE"," ",118],["T_STRING","setBasePath",118],"(",["T_VARIABLE","$basePath",118],")",["T_WHITESPACE","\n    ",118],"{",["T_WHITESPACE","\n        ",119],["T_VARIABLE","$this",120],["T_OBJECT_OPERATOR","->",120],["T_STRING","basePath",120],["T_WHITESPACE"," ",120],"=",["T_WHITESPACE"," ",120],["T_VARIABLE","$basePath",120],";",["T_WHITESPACE","\n    ",120],"}",["T_WHITESPACE","\n\n    ",121],["T_DOC_COMMENT","\/**\n     * Set allowed extensions\n     *\n     * @param string[] $allowedExtensions\n     *\n     * @return void\n     *\/",123],["T_WHITESPACE","\n    ",129],["T_PUBLIC","public",130],["T_WHITESPACE"," ",130],["T_FUNCTION","function",130],["T_WHITESPACE"," ",130],["T_STRING","setAllowedExtensions",130],"(",["T_VARIABLE","$allowedExtensions",130],")",["T_WHITESPACE","\n    ",130],"{",["T_WHITESPACE","\n        ",131],["T_VARIABLE","$this",132],["T_OBJECT_OPERATOR","->",132],["T_STRING","allowedExtensions",132],["T_WHITESPACE"," ",132],"=",["T_WHITESPACE"," ",132],["T_VARIABLE","$allowedExtensions",132],";",["T_WHITESPACE","\n    ",132],"}",["T_WHITESPACE","\n\n    ",133],["T_DOC_COMMENT","\/**\n     * Retrieve base tmp path\n     *\n     * @return string\n     *\/",135],["T_WHITESPACE","\n    ",139],["T_PUBLIC","public",140],["T_WHITESPACE"," ",140],["T_FUNCTION","function",140],["T_WHITESPACE"," ",140],["T_STRING","getBaseTmpPath",140],"(",")",["T_WHITESPACE","\n    ",140],"{",["T_WHITESPACE","\n        ",141],["T_RETURN","return",142],["T_WHITESPACE"," ",142],["T_VARIABLE","$this",142],["T_OBJECT_OPERATOR","->",142],["T_STRING","baseTmpPath",142],";",["T_WHITESPACE","\n    ",142],"}",["T_WHITESPACE","\n\n    ",143],["T_DOC_COMMENT","\/**\n     * Retrieve base path\n     *\n     * @return string\n     *\/",145],["T_WHITESPACE","\n    ",149],["T_PUBLIC","public",150],["T_WHITESPACE"," ",150],["T_FUNCTION","function",150],["T_WHITESPACE"," ",150],["T_STRING","getBasePath",150],"(",")",["T_WHITESPACE","\n    ",150],"{",["T_WHITESPACE","\n        ",151],["T_RETURN","return",152],["T_WHITESPACE"," ",152],["T_VARIABLE","$this",152],["T_OBJECT_OPERATOR","->",152],["T_STRING","basePath",152],";",["T_WHITESPACE","\n    ",152],"}",["T_WHITESPACE","\n\n    ",153],["T_DOC_COMMENT","\/**\n     * Retrieve base path\n     *\n     * @return string[]\n     *\/",155],["T_WHITESPACE","\n    ",159],["T_PUBLIC","public",160],["T_WHITESPACE"," ",160],["T_FUNCTION","function",160],["T_WHITESPACE"," ",160],["T_STRING","getAllowedExtensions",160],"(",")",["T_WHITESPACE","\n    ",160],"{",["T_WHITESPACE","\n        ",161],["T_RETURN","return",162],["T_WHITESPACE"," ",162],["T_VARIABLE","$this",162],["T_OBJECT_OPERATOR","->",162],["T_STRING","allowedExtensions",162],";",["T_WHITESPACE","\n    ",162],"}",["T_WHITESPACE","\n\n    ",163],["T_DOC_COMMENT","\/**\n     * Retrieve path\n     *\n     * @param string $path\n     * @param string $imageName\n     *\n     * @return string\n     *\/",165],["T_WHITESPACE","\n    ",172],["T_PUBLIC","public",173],["T_WHITESPACE"," ",173],["T_FUNCTION","function",173],["T_WHITESPACE"," ",173],["T_STRING","getFilePath",173],"(",["T_VARIABLE","$path",173],",",["T_WHITESPACE"," ",173],["T_VARIABLE","$imageName",173],")",["T_WHITESPACE","\n    ",173],"{",["T_WHITESPACE","\n        ",174],["T_RETURN","return",175],["T_WHITESPACE"," ",175],["T_STRING","rtrim",175],"(",["T_VARIABLE","$path",175],",",["T_WHITESPACE"," ",175],["T_CONSTANT_ENCAPSED_STRING","'\/'",175],")",["T_WHITESPACE"," ",175],".",["T_WHITESPACE"," ",175],["T_CONSTANT_ENCAPSED_STRING","'\/'",175],["T_WHITESPACE"," ",175],".",["T_WHITESPACE"," ",175],["T_STRING","ltrim",175],"(",["T_VARIABLE","$imageName",175],",",["T_WHITESPACE"," ",175],["T_CONSTANT_ENCAPSED_STRING","'\/'",175],")",";",["T_WHITESPACE","\n    ",175],"}",["T_WHITESPACE","\n\n    ",176],["T_DOC_COMMENT","\/**\n     * Checking file for moving and move it\n     *\n     * @param string $imageName\n     *\n     * @return string\n     *\n     * @throws \\Magento\\Framework\\Exception\\LocalizedException\n     *\/",178],["T_WHITESPACE","\n    ",186],["T_PUBLIC","public",187],["T_WHITESPACE"," ",187],["T_FUNCTION","function",187],["T_WHITESPACE"," ",187],["T_STRING","moveFileFromTmp",187],"(",["T_VARIABLE","$imageName",187],")",["T_WHITESPACE","\n    ",187],"{",["T_WHITESPACE","\n        ",188],["T_VARIABLE","$baseTmpPath",189],["T_WHITESPACE"," ",189],"=",["T_WHITESPACE"," ",189],["T_VARIABLE","$this",189],["T_OBJECT_OPERATOR","->",189],["T_STRING","getBaseTmpPath",189],"(",")",";",["T_WHITESPACE","\n        ",189],["T_VARIABLE","$basePath",190],["T_WHITESPACE"," ",190],"=",["T_WHITESPACE"," ",190],["T_VARIABLE","$this",190],["T_OBJECT_OPERATOR","->",190],["T_STRING","getBasePath",190],"(",")",";",["T_WHITESPACE","\n\n        ",190],["T_VARIABLE","$baseImagePath",192],["T_WHITESPACE"," ",192],"=",["T_WHITESPACE"," ",192],["T_VARIABLE","$this",192],["T_OBJECT_OPERATOR","->",192],["T_STRING","getFilePath",192],"(",["T_VARIABLE","$basePath",192],",",["T_WHITESPACE"," ",192],["T_VARIABLE","$imageName",192],")",";",["T_WHITESPACE","\n        ",192],["T_VARIABLE","$baseTmpImagePath",193],["T_WHITESPACE"," ",193],"=",["T_WHITESPACE"," ",193],["T_VARIABLE","$this",193],["T_OBJECT_OPERATOR","->",193],["T_STRING","getFilePath",193],"(",["T_VARIABLE","$baseTmpPath",193],",",["T_WHITESPACE"," ",193],["T_VARIABLE","$imageName",193],")",";",["T_WHITESPACE","\n\n        ",193],["T_TRY","try",195],["T_WHITESPACE"," ",195],"{",["T_WHITESPACE","\n            ",195],["T_VARIABLE","$this",196],["T_OBJECT_OPERATOR","->",196],["T_STRING","coreFileStorageDatabase",196],["T_OBJECT_OPERATOR","->",196],["T_STRING","copyFile",196],"(",["T_WHITESPACE","\n                ",196],["T_VARIABLE","$baseTmpImagePath",197],",",["T_WHITESPACE","\n                ",197],["T_VARIABLE","$baseImagePath",198],["T_WHITESPACE","\n            ",198],")",";",["T_WHITESPACE","\n            ",199],["T_VARIABLE","$this",200],["T_OBJECT_OPERATOR","->",200],["T_STRING","mediaDirectory",200],["T_OBJECT_OPERATOR","->",200],["T_STRING","renameFile",200],"(",["T_WHITESPACE","\n                ",200],["T_VARIABLE","$baseTmpImagePath",201],",",["T_WHITESPACE","\n                ",201],["T_VARIABLE","$baseImagePath",202],["T_WHITESPACE","\n            ",202],")",";",["T_WHITESPACE","\n        ",203],"}",["T_WHITESPACE"," ",204],["T_CATCH","catch",204],["T_WHITESPACE"," ",204],"(",["T_NS_SEPARATOR","\\",204],["T_STRING","Exception",204],["T_WHITESPACE"," ",204],["T_VARIABLE","$e",204],")",["T_WHITESPACE"," ",204],"{",["T_WHITESPACE","\n            ",204],["T_THROW","throw",205],["T_WHITESPACE"," ",205],["T_NEW","new",205],["T_WHITESPACE"," ",205],["T_NS_SEPARATOR","\\",205],["T_STRING","Magento",205],["T_NS_SEPARATOR","\\",205],["T_STRING","Framework",205],["T_NS_SEPARATOR","\\",205],["T_STRING","Exception",205],["T_NS_SEPARATOR","\\",205],["T_STRING","LocalizedException",205],"(",["T_WHITESPACE","\n                ",205],["T_STRING","__",206],"(",["T_CONSTANT_ENCAPSED_STRING","'Something went wrong while saving the file(s).'",206],")",["T_WHITESPACE","\n            ",206],")",";",["T_WHITESPACE","\n        ",207],"}",["T_WHITESPACE","\n\n        ",208],["T_RETURN","return",210],["T_WHITESPACE"," ",210],["T_VARIABLE","$imageName",210],";",["T_WHITESPACE","\n    ",210],"}",["T_WHITESPACE","\n\n    ",211],["T_DOC_COMMENT","\/**\n     * Checking file for save and save it to tmp dir\n     *\n     * @param string $fileId\n     *\n     * @return string[]\n     *\n     * @throws \\Magento\\Framework\\Exception\\LocalizedException\n     *\/",213],["T_WHITESPACE","\n    ",221],["T_PUBLIC","public",222],["T_WHITESPACE"," ",222],["T_FUNCTION","function",222],["T_WHITESPACE"," ",222],["T_STRING","saveFileToTmpDir",222],"(",["T_VARIABLE","$fileId",222],")",["T_WHITESPACE","\n    ",222],"{",["T_WHITESPACE","\n        ",223],["T_VARIABLE","$baseTmpPath",224],["T_WHITESPACE"," ",224],"=",["T_WHITESPACE"," ",224],["T_VARIABLE","$this",224],["T_OBJECT_OPERATOR","->",224],["T_STRING","getBaseTmpPath",224],"(",")",";",["T_WHITESPACE","\n\n        ",224],["T_VARIABLE","$uploader",226],["T_WHITESPACE"," ",226],"=",["T_WHITESPACE"," ",226],["T_VARIABLE","$this",226],["T_OBJECT_OPERATOR","->",226],["T_STRING","uploaderFactory",226],["T_OBJECT_OPERATOR","->",226],["T_STRING","create",226],"(","[",["T_CONSTANT_ENCAPSED_STRING","'fileId'",226],["T_WHITESPACE"," ",226],["T_DOUBLE_ARROW","=>",226],["T_WHITESPACE"," ",226],["T_VARIABLE","$fileId",226],"]",")",";",["T_WHITESPACE","\n        ",226],["T_VARIABLE","$uploader",227],["T_OBJECT_OPERATOR","->",227],["T_STRING","setAllowedExtensions",227],"(",["T_VARIABLE","$this",227],["T_OBJECT_OPERATOR","->",227],["T_STRING","getAllowedExtensions",227],"(",")",")",";",["T_WHITESPACE","\n        ",227],["T_VARIABLE","$uploader",228],["T_OBJECT_OPERATOR","->",228],["T_STRING","setAllowRenameFiles",228],"(",["T_STRING","true",228],")",";",["T_WHITESPACE","\n\n        ",228],["T_VARIABLE","$result",230],["T_WHITESPACE"," ",230],"=",["T_WHITESPACE"," ",230],["T_VARIABLE","$uploader",230],["T_OBJECT_OPERATOR","->",230],["T_STRING","save",230],"(",["T_VARIABLE","$this",230],["T_OBJECT_OPERATOR","->",230],["T_STRING","mediaDirectory",230],["T_OBJECT_OPERATOR","->",230],["T_STRING","getAbsolutePath",230],"(",["T_VARIABLE","$baseTmpPath",230],")",")",";",["T_WHITESPACE","\n\n        ",230],["T_IF","if",232],["T_WHITESPACE"," ",232],"(","!",["T_VARIABLE","$result",232],")",["T_WHITESPACE"," ",232],"{",["T_WHITESPACE","\n            ",232],["T_THROW","throw",233],["T_WHITESPACE"," ",233],["T_NEW","new",233],["T_WHITESPACE"," ",233],["T_NS_SEPARATOR","\\",233],["T_STRING","Magento",233],["T_NS_SEPARATOR","\\",233],["T_STRING","Framework",233],["T_NS_SEPARATOR","\\",233],["T_STRING","Exception",233],["T_NS_SEPARATOR","\\",233],["T_STRING","LocalizedException",233],"(",["T_WHITESPACE","\n                ",233],["T_STRING","__",234],"(",["T_CONSTANT_ENCAPSED_STRING","'File can not be saved to the destination folder.'",234],")",["T_WHITESPACE","\n            ",234],")",";",["T_WHITESPACE","\n        ",235],"}",["T_WHITESPACE","\n\n        ",236],["T_DOC_COMMENT","\/**\n         * Workaround for prototype 1.7 methods \"isJSON\", \"evalJSON\" on Windows OS\n         *\/",238],["T_WHITESPACE","\n        ",240],["T_VARIABLE","$result",241],"[",["T_CONSTANT_ENCAPSED_STRING","'tmp_name'",241],"]",["T_WHITESPACE"," ",241],"=",["T_WHITESPACE"," ",241],["T_STRING","str_replace",241],"(",["T_CONSTANT_ENCAPSED_STRING","'\\\\'",241],",",["T_WHITESPACE"," ",241],["T_CONSTANT_ENCAPSED_STRING","'\/'",241],",",["T_WHITESPACE"," ",241],["T_VARIABLE","$result",241],"[",["T_CONSTANT_ENCAPSED_STRING","'tmp_name'",241],"]",")",";",["T_WHITESPACE","\n        ",241],["T_VARIABLE","$result",242],"[",["T_CONSTANT_ENCAPSED_STRING","'path'",242],"]",["T_WHITESPACE"," ",242],"=",["T_WHITESPACE"," ",242],["T_STRING","str_replace",242],"(",["T_CONSTANT_ENCAPSED_STRING","'\\\\'",242],",",["T_WHITESPACE"," ",242],["T_CONSTANT_ENCAPSED_STRING","'\/'",242],",",["T_WHITESPACE"," ",242],["T_VARIABLE","$result",242],"[",["T_CONSTANT_ENCAPSED_STRING","'path'",242],"]",")",";",["T_WHITESPACE","\n        ",242],["T_VARIABLE","$result",243],"[",["T_CONSTANT_ENCAPSED_STRING","'url'",243],"]",["T_WHITESPACE"," ",243],"=",["T_WHITESPACE"," ",243],["T_VARIABLE","$this",243],["T_OBJECT_OPERATOR","->",243],["T_STRING","storeManager",243],["T_WHITESPACE","\n                ",243],["T_OBJECT_OPERATOR","->",244],["T_STRING","getStore",244],"(",")",["T_WHITESPACE","\n                ",244],["T_OBJECT_OPERATOR","->",245],["T_STRING","getBaseUrl",245],"(",["T_WHITESPACE","\n                    ",245],["T_NS_SEPARATOR","\\",246],["T_STRING","Magento",246],["T_NS_SEPARATOR","\\",246],["T_STRING","Framework",246],["T_NS_SEPARATOR","\\",246],["T_STRING","UrlInterface",246],["T_DOUBLE_COLON","::",246],["T_STRING","URL_TYPE_MEDIA",246],["T_WHITESPACE","\n                ",246],")",["T_WHITESPACE"," ",247],".",["T_WHITESPACE"," ",247],["T_VARIABLE","$this",247],["T_OBJECT_OPERATOR","->",247],["T_STRING","getFilePath",247],"(",["T_VARIABLE","$baseTmpPath",247],",",["T_WHITESPACE"," ",247],["T_VARIABLE","$result",247],"[",["T_CONSTANT_ENCAPSED_STRING","'file'",247],"]",")",";",["T_WHITESPACE","\n        ",247],["T_VARIABLE","$result",248],"[",["T_CONSTANT_ENCAPSED_STRING","'name'",248],"]",["T_WHITESPACE"," ",248],"=",["T_WHITESPACE"," ",248],["T_VARIABLE","$result",248],"[",["T_CONSTANT_ENCAPSED_STRING","'file'",248],"]",";",["T_WHITESPACE","\n\n        ",248],["T_IF","if",250],["T_WHITESPACE"," ",250],"(",["T_ISSET","isset",250],"(",["T_VARIABLE","$result",250],"[",["T_CONSTANT_ENCAPSED_STRING","'file'",250],"]",")",")",["T_WHITESPACE"," ",250],"{",["T_WHITESPACE","\n            ",250],["T_TRY","try",251],["T_WHITESPACE"," ",251],"{",["T_WHITESPACE","\n                ",251],["T_VARIABLE","$relativePath",252],["T_WHITESPACE"," ",252],"=",["T_WHITESPACE"," ",252],["T_STRING","rtrim",252],"(",["T_VARIABLE","$baseTmpPath",252],",",["T_WHITESPACE"," ",252],["T_CONSTANT_ENCAPSED_STRING","'\/'",252],")",["T_WHITESPACE"," ",252],".",["T_WHITESPACE"," ",252],["T_CONSTANT_ENCAPSED_STRING","'\/'",252],["T_WHITESPACE"," ",252],".",["T_WHITESPACE"," ",252],["T_STRING","ltrim",252],"(",["T_VARIABLE","$result",252],"[",["T_CONSTANT_ENCAPSED_STRING","'file'",252],"]",",",["T_WHITESPACE"," ",252],["T_CONSTANT_ENCAPSED_STRING","'\/'",252],")",";",["T_WHITESPACE","\n                ",252],["T_VARIABLE","$this",253],["T_OBJECT_OPERATOR","->",253],["T_STRING","coreFileStorageDatabase",253],["T_OBJECT_OPERATOR","->",253],["T_STRING","saveFile",253],"(",["T_VARIABLE","$relativePath",253],")",";",["T_WHITESPACE","\n            ",253],"}",["T_WHITESPACE"," ",254],["T_CATCH","catch",254],["T_WHITESPACE"," ",254],"(",["T_NS_SEPARATOR","\\",254],["T_STRING","Exception",254],["T_WHITESPACE"," ",254],["T_VARIABLE","$e",254],")",["T_WHITESPACE"," ",254],"{",["T_WHITESPACE","\n                ",254],["T_VARIABLE","$this",255],["T_OBJECT_OPERATOR","->",255],["T_STRING","logger",255],["T_OBJECT_OPERATOR","->",255],["T_STRING","critical",255],"(",["T_VARIABLE","$e",255],")",";",["T_WHITESPACE","\n                ",255],["T_THROW","throw",256],["T_WHITESPACE"," ",256],["T_NEW","new",256],["T_WHITESPACE"," ",256],["T_NS_SEPARATOR","\\",256],["T_STRING","Magento",256],["T_NS_SEPARATOR","\\",256],["T_STRING","Framework",256],["T_NS_SEPARATOR","\\",256],["T_STRING","Exception",256],["T_NS_SEPARATOR","\\",256],["T_STRING","LocalizedException",256],"(",["T_WHITESPACE","\n                    ",256],["T_STRING","__",257],"(",["T_CONSTANT_ENCAPSED_STRING","'Something went wrong while saving the file(s).'",257],")",["T_WHITESPACE","\n                ",257],")",";",["T_WHITESPACE","\n            ",258],"}",["T_WHITESPACE","\n        ",259],"}",["T_WHITESPACE","\n\n        ",260],["T_RETURN","return",262],["T_WHITESPACE"," ",262],["T_VARIABLE","$result",262],";",["T_WHITESPACE","\n    ",262],"}",["T_WHITESPACE","\n",263],"}",["T_WHITESPACE","\n",264]]
[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Copyright \u00c2\u00a9 2013-2017 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n *\/",2],["T_WHITESPACE","\n",5],["T_NAMESPACE","namespace",6],["T_WHITESPACE"," ",6],["T_STRING","Magento",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Catalog",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Model",6],";",["T_WHITESPACE","\n\n",6],["T_USE","use",8],["T_WHITESPACE"," ",8],["T_STRING","Magento",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Catalog",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Api",8],["T_NS_SEPARATOR","\\",8],["T_STRING","CategoryRepositoryInterface",8],";",["T_WHITESPACE","\n",8],["T_USE","use",9],["T_WHITESPACE"," ",9],["T_STRING","Magento",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Framework",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Exception",9],["T_NS_SEPARATOR","\\",9],["T_STRING","NoSuchEntityException",9],";",["T_WHITESPACE","\n",9],["T_USE","use",10],["T_WHITESPACE"," ",10],["T_STRING","Magento",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Catalog",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Model",10],["T_NS_SEPARATOR","\\",10],["T_STRING","ResourceModel",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Product",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Attribute",10],["T_NS_SEPARATOR","\\",10],["T_STRING","CollectionFactory",10],["T_WHITESPACE"," ",10],["T_AS","as",10],["T_WHITESPACE"," ",10],["T_STRING","AttributeCollectionFactory",10],";",["T_WHITESPACE","\n\n",10],["T_DOC_COMMENT","\/**\n * Catalog view layer model\n *\n * @SuppressWarnings(PHPMD.LongVariable)\n * @SuppressWarnings(PHPMD.CouplingBetweenObjects)\n *\/",12],["T_WHITESPACE","\n",17],["T_CLASS","class",18],["T_WHITESPACE"," ",18],["T_STRING","Layer",18],["T_WHITESPACE"," ",18],["T_EXTENDS","extends",18],["T_WHITESPACE"," ",18],["T_NS_SEPARATOR","\\",18],["T_STRING","Magento",18],["T_NS_SEPARATOR","\\",18],["T_STRING","Framework",18],["T_NS_SEPARATOR","\\",18],["T_STRING","DataObject",18],["T_WHITESPACE","\n",18],"{",["T_WHITESPACE","\n    ",19],["T_DOC_COMMENT","\/**\n     * Product collections array\n     *\n     * @var array\n     *\/",20],["T_WHITESPACE","\n    ",24],["T_PROTECTED","protected",25],["T_WHITESPACE"," ",25],["T_VARIABLE","$_productCollections",25],["T_WHITESPACE"," ",25],"=",["T_WHITESPACE"," ",25],"[","]",";",["T_WHITESPACE","\n\n    ",25],["T_DOC_COMMENT","\/**\n     * Key which can be used for load\/save aggregation data\n     *\n     * @var string\n     *\/",27],["T_WHITESPACE","\n    ",31],["T_PROTECTED","protected",32],["T_WHITESPACE"," ",32],["T_VARIABLE","$_stateKey",32],["T_WHITESPACE"," ",32],"=",["T_WHITESPACE"," ",32],["T_STRING","null",32],";",["T_WHITESPACE","\n\n    ",32],["T_DOC_COMMENT","\/**\n     * Core registry\n     *\n     * @var \\Magento\\Framework\\Registry\n     *\/",34],["T_WHITESPACE","\n    ",38],["T_PROTECTED","protected",39],["T_WHITESPACE"," ",39],["T_VARIABLE","$registry",39],["T_WHITESPACE"," ",39],"=",["T_WHITESPACE"," ",39],["T_STRING","null",39],";",["T_WHITESPACE","\n\n    ",39],["T_DOC_COMMENT","\/**\n     * Store manager\n     *\n     * @var \\Magento\\Store\\Model\\StoreManagerInterface\n     *\/",41],["T_WHITESPACE","\n    ",45],["T_PROTECTED","protected",46],["T_WHITESPACE"," ",46],["T_VARIABLE","$_storeManager",46],";",["T_WHITESPACE","\n\n    ",46],["T_DOC_COMMENT","\/**\n     * Catalog product\n     *\n     * @var \\Magento\\Catalog\\Model\\ResourceModel\\Product\n     *\/",48],["T_WHITESPACE","\n    ",52],["T_PROTECTED","protected",53],["T_WHITESPACE"," ",53],["T_VARIABLE","$_catalogProduct",53],";",["T_WHITESPACE","\n\n    ",53],["T_DOC_COMMENT","\/**\n     * Attribute collection factory\n     *\n     * @var AttributeCollectionFactory\n     *\/",55],["T_WHITESPACE","\n    ",59],["T_PROTECTED","protected",60],["T_WHITESPACE"," ",60],["T_VARIABLE","$_attributeCollectionFactory",60],";",["T_WHITESPACE","\n\n    ",60],["T_DOC_COMMENT","\/**\n     * Layer state factory\n     *\n     * @var \\Magento\\Catalog\\Model\\Layer\\StateFactory\n     *\/",62],["T_WHITESPACE","\n    ",66],["T_PROTECTED","protected",67],["T_WHITESPACE"," ",67],["T_VARIABLE","$_layerStateFactory",67],";",["T_WHITESPACE","\n\n    ",67],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Catalog\\Model\\Layer\\ItemCollectionProviderInterface\n     *\/",69],["T_WHITESPACE","\n    ",71],["T_PROTECTED","protected",72],["T_WHITESPACE"," ",72],["T_VARIABLE","$collectionProvider",72],";",["T_WHITESPACE","\n\n    ",72],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Catalog\\Model\\Layer\\Category\\StateKey\n     *\/",74],["T_WHITESPACE","\n    ",76],["T_PROTECTED","protected",77],["T_WHITESPACE"," ",77],["T_VARIABLE","$stateKeyGenerator",77],";",["T_WHITESPACE","\n\n    ",77],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Catalog\\Model\\Layer\\Category\\CollectionFilter\n     *\/",79],["T_WHITESPACE","\n    ",81],["T_PROTECTED","protected",82],["T_WHITESPACE"," ",82],["T_VARIABLE","$collectionFilter",82],";",["T_WHITESPACE","\n\n    ",82],["T_DOC_COMMENT","\/**\n     * @var CategoryRepositoryInterface\n     *\/",84],["T_WHITESPACE","\n    ",86],["T_PROTECTED","protected",87],["T_WHITESPACE"," ",87],["T_VARIABLE","$categoryRepository",87],";",["T_WHITESPACE","\n\n    ",87],["T_DOC_COMMENT","\/**\n     * @param Layer\\ContextInterface $context\n     * @param Layer\\StateFactory $layerStateFactory\n     * @param AttributeCollectionFactory $attributeCollectionFactory\n     * @param \\Magento\\Catalog\\Model\\ResourceModel\\Product $catalogProduct\n     * @param \\Magento\\Store\\Model\\StoreManagerInterface $storeManager\n     * @param \\Magento\\Framework\\Registry $registry\n     * @param CategoryRepositoryInterface $categoryRepository\n     * @param array $data\n     *\/",89],["T_WHITESPACE","\n    ",98],["T_PUBLIC","public",99],["T_WHITESPACE"," ",99],["T_FUNCTION","function",99],["T_WHITESPACE"," ",99],["T_STRING","__construct",99],"(",["T_WHITESPACE","\n        ",99],["T_NS_SEPARATOR","\\",100],["T_STRING","Magento",100],["T_NS_SEPARATOR","\\",100],["T_STRING","Catalog",100],["T_NS_SEPARATOR","\\",100],["T_STRING","Model",100],["T_NS_SEPARATOR","\\",100],["T_STRING","Layer",100],["T_NS_SEPARATOR","\\",100],["T_STRING","ContextInterface",100],["T_WHITESPACE"," ",100],["T_VARIABLE","$context",100],",",["T_WHITESPACE","\n        ",100],["T_NS_SEPARATOR","\\",101],["T_STRING","Magento",101],["T_NS_SEPARATOR","\\",101],["T_STRING","Catalog",101],["T_NS_SEPARATOR","\\",101],["T_STRING","Model",101],["T_NS_SEPARATOR","\\",101],["T_STRING","Layer",101],["T_NS_SEPARATOR","\\",101],["T_STRING","StateFactory",101],["T_WHITESPACE"," ",101],["T_VARIABLE","$layerStateFactory",101],",",["T_WHITESPACE","\n        ",101],["T_STRING","AttributeCollectionFactory",102],["T_WHITESPACE"," ",102],["T_VARIABLE","$attributeCollectionFactory",102],",",["T_WHITESPACE","\n        ",102],["T_NS_SEPARATOR","\\",103],["T_STRING","Magento",103],["T_NS_SEPARATOR","\\",103],["T_STRING","Catalog",103],["T_NS_SEPARATOR","\\",103],["T_STRING","Model",103],["T_NS_SEPARATOR","\\",103],["T_STRING","ResourceModel",103],["T_NS_SEPARATOR","\\",103],["T_STRING","Product",103],["T_WHITESPACE"," ",103],["T_VARIABLE","$catalogProduct",103],",",["T_WHITESPACE","\n        ",103],["T_NS_SEPARATOR","\\",104],["T_STRING","Magento",104],["T_NS_SEPARATOR","\\",104],["T_STRING","Store",104],["T_NS_SEPARATOR","\\",104],["T_STRING","Model",104],["T_NS_SEPARATOR","\\",104],["T_STRING","StoreManagerInterface",104],["T_WHITESPACE"," ",104],["T_VARIABLE","$storeManager",104],",",["T_WHITESPACE","\n        ",104],["T_NS_SEPARATOR","\\",105],["T_STRING","Magento",105],["T_NS_SEPARATOR","\\",105],["T_STRING","Framework",105],["T_NS_SEPARATOR","\\",105],["T_STRING","Registry",105],["T_WHITESPACE"," ",105],["T_VARIABLE","$registry",105],",",["T_WHITESPACE","\n        ",105],["T_STRING","CategoryRepositoryInterface",106],["T_WHITESPACE"," ",106],["T_VARIABLE","$categoryRepository",106],",",["T_WHITESPACE","\n        ",106],["T_ARRAY","array",107],["T_WHITESPACE"," ",107],["T_VARIABLE","$data",107],["T_WHITESPACE"," ",107],"=",["T_WHITESPACE"," ",107],"[","]",["T_WHITESPACE","\n    ",107],")",["T_WHITESPACE"," ",108],"{",["T_WHITESPACE","\n        ",108],["T_VARIABLE","$this",109],["T_OBJECT_OPERATOR","->",109],["T_STRING","_layerStateFactory",109],["T_WHITESPACE"," ",109],"=",["T_WHITESPACE"," ",109],["T_VARIABLE","$layerStateFactory",109],";",["T_WHITESPACE","\n        ",109],["T_VARIABLE","$this",110],["T_OBJECT_OPERATOR","->",110],["T_STRING","_attributeCollectionFactory",110],["T_WHITESPACE"," ",110],"=",["T_WHITESPACE"," ",110],["T_VARIABLE","$attributeCollectionFactory",110],";",["T_WHITESPACE","\n        ",110],["T_VARIABLE","$this",111],["T_OBJECT_OPERATOR","->",111],["T_STRING","_catalogProduct",111],["T_WHITESPACE"," ",111],"=",["T_WHITESPACE"," ",111],["T_VARIABLE","$catalogProduct",111],";",["T_WHITESPACE","\n        ",111],["T_VARIABLE","$this",112],["T_OBJECT_OPERATOR","->",112],["T_STRING","_storeManager",112],["T_WHITESPACE"," ",112],"=",["T_WHITESPACE"," ",112],["T_VARIABLE","$storeManager",112],";",["T_WHITESPACE","\n        ",112],["T_VARIABLE","$this",113],["T_OBJECT_OPERATOR","->",113],["T_STRING","registry",113],["T_WHITESPACE"," ",113],"=",["T_WHITESPACE"," ",113],["T_VARIABLE","$registry",113],";",["T_WHITESPACE","\n        ",113],["T_VARIABLE","$this",114],["T_OBJECT_OPERATOR","->",114],["T_STRING","categoryRepository",114],["T_WHITESPACE"," ",114],"=",["T_WHITESPACE"," ",114],["T_VARIABLE","$categoryRepository",114],";",["T_WHITESPACE","\n        ",114],["T_VARIABLE","$this",115],["T_OBJECT_OPERATOR","->",115],["T_STRING","collectionProvider",115],["T_WHITESPACE"," ",115],"=",["T_WHITESPACE"," ",115],["T_VARIABLE","$context",115],["T_OBJECT_OPERATOR","->",115],["T_STRING","getCollectionProvider",115],"(",")",";",["T_WHITESPACE","\n        ",115],["T_VARIABLE","$this",116],["T_OBJECT_OPERATOR","->",116],["T_STRING","stateKeyGenerator",116],["T_WHITESPACE"," ",116],"=",["T_WHITESPACE"," ",116],["T_VARIABLE","$context",116],["T_OBJECT_OPERATOR","->",116],["T_STRING","getStateKey",116],"(",")",";",["T_WHITESPACE","\n        ",116],["T_VARIABLE","$this",117],["T_OBJECT_OPERATOR","->",117],["T_STRING","collectionFilter",117],["T_WHITESPACE"," ",117],"=",["T_WHITESPACE"," ",117],["T_VARIABLE","$context",117],["T_OBJECT_OPERATOR","->",117],["T_STRING","getCollectionFilter",117],"(",")",";",["T_WHITESPACE","\n        ",117],["T_STRING","parent",118],["T_DOUBLE_COLON","::",118],["T_STRING","__construct",118],"(",["T_VARIABLE","$data",118],")",";",["T_WHITESPACE","\n    ",118],"}",["T_WHITESPACE","\n\n    ",119],["T_DOC_COMMENT","\/**\n     * Get layer state key\n     *\n     * @return string\n     *\/",121],["T_WHITESPACE","\n    ",125],["T_PUBLIC","public",126],["T_WHITESPACE"," ",126],["T_FUNCTION","function",126],["T_WHITESPACE"," ",126],["T_STRING","getStateKey",126],"(",")",["T_WHITESPACE","\n    ",126],"{",["T_WHITESPACE","\n        ",127],["T_IF","if",128],["T_WHITESPACE"," ",128],"(","!",["T_VARIABLE","$this",128],["T_OBJECT_OPERATOR","->",128],["T_STRING","_stateKey",128],")",["T_WHITESPACE"," ",128],"{",["T_WHITESPACE","\n            ",128],["T_VARIABLE","$this",129],["T_OBJECT_OPERATOR","->",129],["T_STRING","_stateKey",129],["T_WHITESPACE"," ",129],"=",["T_WHITESPACE"," ",129],["T_VARIABLE","$this",129],["T_OBJECT_OPERATOR","->",129],["T_STRING","stateKeyGenerator",129],["T_OBJECT_OPERATOR","->",129],["T_STRING","toString",129],"(",["T_VARIABLE","$this",129],["T_OBJECT_OPERATOR","->",129],["T_STRING","getCurrentCategory",129],"(",")",")",";",["T_WHITESPACE","\n        ",129],"}",["T_WHITESPACE","\n        ",130],["T_RETURN","return",131],["T_WHITESPACE"," ",131],["T_VARIABLE","$this",131],["T_OBJECT_OPERATOR","->",131],["T_STRING","_stateKey",131],";",["T_WHITESPACE","\n    ",131],"}",["T_WHITESPACE","\n\n    ",132],["T_DOC_COMMENT","\/**\n     * Retrieve current layer product collection\n     *\n     * @return \\Magento\\Catalog\\Model\\ResourceModel\\Product\\Collection\n     *\/",134],["T_WHITESPACE","\n    ",138],["T_PUBLIC","public",139],["T_WHITESPACE"," ",139],["T_FUNCTION","function",139],["T_WHITESPACE"," ",139],["T_STRING","getProductCollection",139],"(",")",["T_WHITESPACE","\n    ",139],"{",["T_WHITESPACE","\n        ",140],["T_IF","if",141],["T_WHITESPACE"," ",141],"(",["T_ISSET","isset",141],"(",["T_VARIABLE","$this",141],["T_OBJECT_OPERATOR","->",141],["T_STRING","_productCollections",141],"[",["T_VARIABLE","$this",141],["T_OBJECT_OPERATOR","->",141],["T_STRING","getCurrentCategory",141],"(",")",["T_OBJECT_OPERATOR","->",141],["T_STRING","getId",141],"(",")","]",")",")",["T_WHITESPACE"," ",141],"{",["T_WHITESPACE","\n            ",141],["T_VARIABLE","$collection",142],["T_WHITESPACE"," ",142],"=",["T_WHITESPACE"," ",142],["T_VARIABLE","$this",142],["T_OBJECT_OPERATOR","->",142],["T_STRING","_productCollections",142],"[",["T_VARIABLE","$this",142],["T_OBJECT_OPERATOR","->",142],["T_STRING","getCurrentCategory",142],"(",")",["T_OBJECT_OPERATOR","->",142],["T_STRING","getId",142],"(",")","]",";",["T_WHITESPACE","\n        ",142],"}",["T_WHITESPACE"," ",143],["T_ELSE","else",143],["T_WHITESPACE"," ",143],"{",["T_WHITESPACE","\n            ",143],["T_VARIABLE","$collection",144],["T_WHITESPACE"," ",144],"=",["T_WHITESPACE"," ",144],["T_VARIABLE","$this",144],["T_OBJECT_OPERATOR","->",144],["T_STRING","collectionProvider",144],["T_OBJECT_OPERATOR","->",144],["T_STRING","getCollection",144],"(",["T_VARIABLE","$this",144],["T_OBJECT_OPERATOR","->",144],["T_STRING","getCurrentCategory",144],"(",")",")",";",["T_WHITESPACE","\n            ",144],["T_VARIABLE","$this",145],["T_OBJECT_OPERATOR","->",145],["T_STRING","prepareProductCollection",145],"(",["T_VARIABLE","$collection",145],")",";",["T_WHITESPACE","\n            ",145],["T_VARIABLE","$this",146],["T_OBJECT_OPERATOR","->",146],["T_STRING","_productCollections",146],"[",["T_VARIABLE","$this",146],["T_OBJECT_OPERATOR","->",146],["T_STRING","getCurrentCategory",146],"(",")",["T_OBJECT_OPERATOR","->",146],["T_STRING","getId",146],"(",")","]",["T_WHITESPACE"," ",146],"=",["T_WHITESPACE"," ",146],["T_VARIABLE","$collection",146],";",["T_WHITESPACE","\n        ",146],"}",["T_WHITESPACE","\n\n        ",147],["T_RETURN","return",149],["T_WHITESPACE"," ",149],["T_VARIABLE","$collection",149],";",["T_WHITESPACE","\n    ",149],"}",["T_WHITESPACE","\n\n    ",150],["T_DOC_COMMENT","\/**\n     * Initialize product collection\n     *\n     * @param \\Magento\\Catalog\\Model\\ResourceModel\\Product\\Collection $collection\n     * @return \\Magento\\Catalog\\Model\\Layer\n     *\/",152],["T_WHITESPACE","\n    ",157],["T_PUBLIC","public",158],["T_WHITESPACE"," ",158],["T_FUNCTION","function",158],["T_WHITESPACE"," ",158],["T_STRING","prepareProductCollection",158],"(",["T_VARIABLE","$collection",158],")",["T_WHITESPACE","\n    ",158],"{",["T_WHITESPACE","\n        ",159],["T_VARIABLE","$this",160],["T_OBJECT_OPERATOR","->",160],["T_STRING","collectionFilter",160],["T_OBJECT_OPERATOR","->",160],["T_STRING","filter",160],"(",["T_VARIABLE","$collection",160],",",["T_WHITESPACE"," ",160],["T_VARIABLE","$this",160],["T_OBJECT_OPERATOR","->",160],["T_STRING","getCurrentCategory",160],"(",")",")",";",["T_WHITESPACE","\n\n        ",160],["T_RETURN","return",162],["T_WHITESPACE"," ",162],["T_VARIABLE","$this",162],";",["T_WHITESPACE","\n    ",162],"}",["T_WHITESPACE","\n\n    ",163],["T_DOC_COMMENT","\/**\n     * Apply layer\n     * Method is colling after apply all filters, can be used\n     * for prepare some index data before getting information\n     * about existing intexes\n     *\n     * @return \\Magento\\Catalog\\Model\\Layer\n     *\/",165],["T_WHITESPACE","\n    ",172],["T_PUBLIC","public",173],["T_WHITESPACE"," ",173],["T_FUNCTION","function",173],["T_WHITESPACE"," ",173],["T_STRING","apply",173],"(",")",["T_WHITESPACE","\n    ",173],"{",["T_WHITESPACE","\n        ",174],["T_VARIABLE","$stateSuffix",175],["T_WHITESPACE"," ",175],"=",["T_WHITESPACE"," ",175],["T_CONSTANT_ENCAPSED_STRING","''",175],";",["T_WHITESPACE","\n        ",175],["T_FOREACH","foreach",176],["T_WHITESPACE"," ",176],"(",["T_VARIABLE","$this",176],["T_OBJECT_OPERATOR","->",176],["T_STRING","getState",176],"(",")",["T_OBJECT_OPERATOR","->",176],["T_STRING","getFilters",176],"(",")",["T_WHITESPACE"," ",176],["T_AS","as",176],["T_WHITESPACE"," ",176],["T_VARIABLE","$filterItem",176],")",["T_WHITESPACE"," ",176],"{",["T_WHITESPACE","\n            ",176],["T_VARIABLE","$stateSuffix",177],["T_WHITESPACE"," ",177],["T_CONCAT_EQUAL",".=",177],["T_WHITESPACE"," ",177],["T_CONSTANT_ENCAPSED_STRING","'_'",177],["T_WHITESPACE"," ",177],".",["T_WHITESPACE"," ",177],["T_VARIABLE","$filterItem",177],["T_OBJECT_OPERATOR","->",177],["T_STRING","getFilter",177],"(",")",["T_OBJECT_OPERATOR","->",177],["T_STRING","getRequestVar",177],"(",")",["T_WHITESPACE"," ",177],".",["T_WHITESPACE"," ",177],["T_CONSTANT_ENCAPSED_STRING","'_'",177],["T_WHITESPACE"," ",177],".",["T_WHITESPACE"," ",177],["T_VARIABLE","$filterItem",177],["T_OBJECT_OPERATOR","->",177],["T_STRING","getValueString",177],"(",")",";",["T_WHITESPACE","\n        ",177],"}",["T_WHITESPACE","\n        ",178],["T_IF","if",179],["T_WHITESPACE"," ",179],"(","!",["T_EMPTY","empty",179],"(",["T_VARIABLE","$stateSuffix",179],")",")",["T_WHITESPACE"," ",179],"{",["T_WHITESPACE","\n            ",179],["T_VARIABLE","$this",180],["T_OBJECT_OPERATOR","->",180],["T_STRING","_stateKey",180],["T_WHITESPACE"," ",180],"=",["T_WHITESPACE"," ",180],["T_VARIABLE","$this",180],["T_OBJECT_OPERATOR","->",180],["T_STRING","getStateKey",180],"(",")",["T_WHITESPACE"," ",180],".",["T_WHITESPACE"," ",180],["T_VARIABLE","$stateSuffix",180],";",["T_WHITESPACE","\n        ",180],"}",["T_WHITESPACE","\n\n        ",181],["T_RETURN","return",183],["T_WHITESPACE"," ",183],["T_VARIABLE","$this",183],";",["T_WHITESPACE","\n    ",183],"}",["T_WHITESPACE","\n\n    ",184],["T_DOC_COMMENT","\/**\n     * Retrieve current category model\n     * If no category found in registry, the root will be taken\n     *\n     * @return \\Magento\\Catalog\\Model\\Category\n     *\/",186],["T_WHITESPACE","\n    ",191],["T_PUBLIC","public",192],["T_WHITESPACE"," ",192],["T_FUNCTION","function",192],["T_WHITESPACE"," ",192],["T_STRING","getCurrentCategory",192],"(",")",["T_WHITESPACE","\n    ",192],"{",["T_WHITESPACE","\n        ",193],["T_VARIABLE","$category",194],["T_WHITESPACE"," ",194],"=",["T_WHITESPACE"," ",194],["T_VARIABLE","$this",194],["T_OBJECT_OPERATOR","->",194],["T_STRING","getData",194],"(",["T_CONSTANT_ENCAPSED_STRING","'current_category'",194],")",";",["T_WHITESPACE","\n        ",194],["T_IF","if",195],["T_WHITESPACE"," ",195],"(",["T_VARIABLE","$category",195],["T_WHITESPACE"," ",195],["T_IS_IDENTICAL","===",195],["T_WHITESPACE"," ",195],["T_STRING","null",195],")",["T_WHITESPACE"," ",195],"{",["T_WHITESPACE","\n            ",195],["T_VARIABLE","$category",196],["T_WHITESPACE"," ",196],"=",["T_WHITESPACE"," ",196],["T_VARIABLE","$this",196],["T_OBJECT_OPERATOR","->",196],["T_STRING","registry",196],["T_OBJECT_OPERATOR","->",196],["T_STRING","registry",196],"(",["T_CONSTANT_ENCAPSED_STRING","'current_category'",196],")",";",["T_WHITESPACE","\n            ",196],["T_IF","if",197],["T_WHITESPACE"," ",197],"(",["T_VARIABLE","$category",197],")",["T_WHITESPACE"," ",197],"{",["T_WHITESPACE","\n                ",197],["T_VARIABLE","$this",198],["T_OBJECT_OPERATOR","->",198],["T_STRING","setData",198],"(",["T_CONSTANT_ENCAPSED_STRING","'current_category'",198],",",["T_WHITESPACE"," ",198],["T_VARIABLE","$category",198],")",";",["T_WHITESPACE","\n            ",198],"}",["T_WHITESPACE"," ",199],["T_ELSE","else",199],["T_WHITESPACE"," ",199],"{",["T_WHITESPACE","\n                ",199],["T_VARIABLE","$category",200],["T_WHITESPACE"," ",200],"=",["T_WHITESPACE"," ",200],["T_VARIABLE","$this",200],["T_OBJECT_OPERATOR","->",200],["T_STRING","categoryRepository",200],["T_OBJECT_OPERATOR","->",200],["T_STRING","get",200],"(",["T_VARIABLE","$this",200],["T_OBJECT_OPERATOR","->",200],["T_STRING","getCurrentStore",200],"(",")",["T_OBJECT_OPERATOR","->",200],["T_STRING","getRootCategoryId",200],"(",")",")",";",["T_WHITESPACE","\n                ",200],["T_VARIABLE","$this",201],["T_OBJECT_OPERATOR","->",201],["T_STRING","setData",201],"(",["T_CONSTANT_ENCAPSED_STRING","'current_category'",201],",",["T_WHITESPACE"," ",201],["T_VARIABLE","$category",201],")",";",["T_WHITESPACE","\n            ",201],"}",["T_WHITESPACE","\n        ",202],"}",["T_WHITESPACE","\n\n        ",203],["T_RETURN","return",205],["T_WHITESPACE"," ",205],["T_VARIABLE","$category",205],";",["T_WHITESPACE","\n    ",205],"}",["T_WHITESPACE","\n\n    ",206],["T_DOC_COMMENT","\/**\n     * Change current category object\n     *\n     * @param mixed $category\n     * @return \\Magento\\Catalog\\Model\\Layer\n     * @throws \\Magento\\Framework\\Exception\\LocalizedException\n     *\/",208],["T_WHITESPACE","\n    ",214],["T_PUBLIC","public",215],["T_WHITESPACE"," ",215],["T_FUNCTION","function",215],["T_WHITESPACE"," ",215],["T_STRING","setCurrentCategory",215],"(",["T_VARIABLE","$category",215],")",["T_WHITESPACE","\n    ",215],"{",["T_WHITESPACE","\n        ",216],["T_IF","if",217],["T_WHITESPACE"," ",217],"(",["T_STRING","is_numeric",217],"(",["T_VARIABLE","$category",217],")",")",["T_WHITESPACE"," ",217],"{",["T_WHITESPACE","\n            ",217],["T_TRY","try",218],["T_WHITESPACE"," ",218],"{",["T_WHITESPACE","\n                ",218],["T_VARIABLE","$category",219],["T_WHITESPACE"," ",219],"=",["T_WHITESPACE"," ",219],["T_VARIABLE","$this",219],["T_OBJECT_OPERATOR","->",219],["T_STRING","categoryRepository",219],["T_OBJECT_OPERATOR","->",219],["T_STRING","get",219],"(",["T_VARIABLE","$category",219],")",";",["T_WHITESPACE","\n            ",219],"}",["T_WHITESPACE"," ",220],["T_CATCH","catch",220],["T_WHITESPACE"," ",220],"(",["T_STRING","NoSuchEntityException",220],["T_WHITESPACE"," ",220],["T_VARIABLE","$e",220],")",["T_WHITESPACE"," ",220],"{",["T_WHITESPACE","\n                ",220],["T_THROW","throw",221],["T_WHITESPACE"," ",221],["T_NEW","new",221],["T_WHITESPACE"," ",221],["T_NS_SEPARATOR","\\",221],["T_STRING","Magento",221],["T_NS_SEPARATOR","\\",221],["T_STRING","Framework",221],["T_NS_SEPARATOR","\\",221],["T_STRING","Exception",221],["T_NS_SEPARATOR","\\",221],["T_STRING","LocalizedException",221],"(",["T_STRING","__",221],"(",["T_CONSTANT_ENCAPSED_STRING","'Please correct the category.'",221],")",",",["T_WHITESPACE"," ",221],["T_VARIABLE","$e",221],")",";",["T_WHITESPACE","\n            ",221],"}",["T_WHITESPACE","\n        ",222],"}",["T_WHITESPACE"," ",223],["T_ELSEIF","elseif",223],["T_WHITESPACE"," ",223],"(",["T_VARIABLE","$category",223],["T_WHITESPACE"," ",223],["T_INSTANCEOF","instanceof",223],["T_WHITESPACE"," ",223],["T_NS_SEPARATOR","\\",223],["T_STRING","Magento",223],["T_NS_SEPARATOR","\\",223],["T_STRING","Catalog",223],["T_NS_SEPARATOR","\\",223],["T_STRING","Model",223],["T_NS_SEPARATOR","\\",223],["T_STRING","Category",223],")",["T_WHITESPACE"," ",223],"{",["T_WHITESPACE","\n            ",223],["T_IF","if",224],["T_WHITESPACE"," ",224],"(","!",["T_VARIABLE","$category",224],["T_OBJECT_OPERATOR","->",224],["T_STRING","getId",224],"(",")",")",["T_WHITESPACE"," ",224],"{",["T_WHITESPACE","\n                ",224],["T_THROW","throw",225],["T_WHITESPACE"," ",225],["T_NEW","new",225],["T_WHITESPACE"," ",225],["T_NS_SEPARATOR","\\",225],["T_STRING","Magento",225],["T_NS_SEPARATOR","\\",225],["T_STRING","Framework",225],["T_NS_SEPARATOR","\\",225],["T_STRING","Exception",225],["T_NS_SEPARATOR","\\",225],["T_STRING","LocalizedException",225],"(",["T_STRING","__",225],"(",["T_CONSTANT_ENCAPSED_STRING","'Please correct the category.'",225],")",")",";",["T_WHITESPACE","\n            ",225],"}",["T_WHITESPACE","\n        ",226],"}",["T_WHITESPACE"," ",227],["T_ELSE","else",227],["T_WHITESPACE"," ",227],"{",["T_WHITESPACE","\n            ",227],["T_THROW","throw",228],["T_WHITESPACE"," ",228],["T_NEW","new",228],["T_WHITESPACE"," ",228],["T_NS_SEPARATOR","\\",228],["T_STRING","Magento",228],["T_NS_SEPARATOR","\\",228],["T_STRING","Framework",228],["T_NS_SEPARATOR","\\",228],["T_STRING","Exception",228],["T_NS_SEPARATOR","\\",228],["T_STRING","LocalizedException",228],"(",["T_WHITESPACE","\n                ",228],["T_STRING","__",229],"(",["T_CONSTANT_ENCAPSED_STRING","'Must be category model instance or its id.'",229],")",["T_WHITESPACE","\n            ",229],")",";",["T_WHITESPACE","\n        ",230],"}",["T_WHITESPACE","\n\n        ",231],["T_IF","if",233],["T_WHITESPACE"," ",233],"(",["T_VARIABLE","$category",233],["T_OBJECT_OPERATOR","->",233],["T_STRING","getId",233],"(",")",["T_WHITESPACE"," ",233],["T_IS_NOT_EQUAL","!=",233],["T_WHITESPACE"," ",233],["T_VARIABLE","$this",233],["T_OBJECT_OPERATOR","->",233],["T_STRING","getCurrentCategory",233],"(",")",["T_OBJECT_OPERATOR","->",233],["T_STRING","getId",233],"(",")",")",["T_WHITESPACE"," ",233],"{",["T_WHITESPACE","\n            ",233],["T_VARIABLE","$this",234],["T_OBJECT_OPERATOR","->",234],["T_STRING","setData",234],"(",["T_CONSTANT_ENCAPSED_STRING","'current_category'",234],",",["T_WHITESPACE"," ",234],["T_VARIABLE","$category",234],")",";",["T_WHITESPACE","\n        ",234],"}",["T_WHITESPACE","\n\n        ",235],["T_RETURN","return",237],["T_WHITESPACE"," ",237],["T_VARIABLE","$this",237],";",["T_WHITESPACE","\n    ",237],"}",["T_WHITESPACE","\n\n    ",238],["T_DOC_COMMENT","\/**\n     * Retrieve current store model\n     *\n     * @return \\Magento\\Store\\Model\\Store\n     *\/",240],["T_WHITESPACE","\n    ",244],["T_PUBLIC","public",245],["T_WHITESPACE"," ",245],["T_FUNCTION","function",245],["T_WHITESPACE"," ",245],["T_STRING","getCurrentStore",245],"(",")",["T_WHITESPACE","\n    ",245],"{",["T_WHITESPACE","\n        ",246],["T_RETURN","return",247],["T_WHITESPACE"," ",247],["T_VARIABLE","$this",247],["T_OBJECT_OPERATOR","->",247],["T_STRING","_storeManager",247],["T_OBJECT_OPERATOR","->",247],["T_STRING","getStore",247],"(",")",";",["T_WHITESPACE","\n    ",247],"}",["T_WHITESPACE","\n\n    ",248],["T_DOC_COMMENT","\/**\n     * Retrieve layer state object\n     *\n     * @return \\Magento\\Catalog\\Model\\Layer\\State\n     *\/",250],["T_WHITESPACE","\n    ",254],["T_PUBLIC","public",255],["T_WHITESPACE"," ",255],["T_FUNCTION","function",255],["T_WHITESPACE"," ",255],["T_STRING","getState",255],"(",")",["T_WHITESPACE","\n    ",255],"{",["T_WHITESPACE","\n        ",256],["T_VARIABLE","$state",257],["T_WHITESPACE"," ",257],"=",["T_WHITESPACE"," ",257],["T_VARIABLE","$this",257],["T_OBJECT_OPERATOR","->",257],["T_STRING","getData",257],"(",["T_CONSTANT_ENCAPSED_STRING","'state'",257],")",";",["T_WHITESPACE","\n        ",257],["T_IF","if",258],["T_WHITESPACE"," ",258],"(",["T_VARIABLE","$state",258],["T_WHITESPACE"," ",258],["T_IS_IDENTICAL","===",258],["T_WHITESPACE"," ",258],["T_STRING","null",258],")",["T_WHITESPACE"," ",258],"{",["T_WHITESPACE","\n            ",258],["T_NS_SEPARATOR","\\",259],["T_STRING","Magento",259],["T_NS_SEPARATOR","\\",259],["T_STRING","Framework",259],["T_NS_SEPARATOR","\\",259],["T_STRING","Profiler",259],["T_DOUBLE_COLON","::",259],["T_STRING","start",259],"(",["T_METHOD_C","__METHOD__",259],")",";",["T_WHITESPACE","\n            ",259],["T_VARIABLE","$state",260],["T_WHITESPACE"," ",260],"=",["T_WHITESPACE"," ",260],["T_VARIABLE","$this",260],["T_OBJECT_OPERATOR","->",260],["T_STRING","_layerStateFactory",260],["T_OBJECT_OPERATOR","->",260],["T_STRING","create",260],"(",")",";",["T_WHITESPACE","\n            ",260],["T_VARIABLE","$this",261],["T_OBJECT_OPERATOR","->",261],["T_STRING","setData",261],"(",["T_CONSTANT_ENCAPSED_STRING","'state'",261],",",["T_WHITESPACE"," ",261],["T_VARIABLE","$state",261],")",";",["T_WHITESPACE","\n            ",261],["T_NS_SEPARATOR","\\",262],["T_STRING","Magento",262],["T_NS_SEPARATOR","\\",262],["T_STRING","Framework",262],["T_NS_SEPARATOR","\\",262],["T_STRING","Profiler",262],["T_DOUBLE_COLON","::",262],["T_STRING","stop",262],"(",["T_METHOD_C","__METHOD__",262],")",";",["T_WHITESPACE","\n        ",262],"}",["T_WHITESPACE","\n\n        ",263],["T_RETURN","return",265],["T_WHITESPACE"," ",265],["T_VARIABLE","$state",265],";",["T_WHITESPACE","\n    ",265],"}",["T_WHITESPACE","\n",266],"}",["T_WHITESPACE","\n",267]]
[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Copyright \u00c2\u00a9 2013-2017 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n *\/",2],["T_WHITESPACE","\n",5],["T_NAMESPACE","namespace",6],["T_WHITESPACE"," ",6],["T_STRING","Magento",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Catalog",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Model",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Layer",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Filter",6],";",["T_WHITESPACE","\n\n",6],["T_DOC_COMMENT","\/**\n * Layer category filter abstract model\n *\/",8],["T_WHITESPACE","\n",10],["T_ABSTRACT","abstract",11],["T_WHITESPACE"," ",11],["T_CLASS","class",11],["T_WHITESPACE"," ",11],["T_STRING","AbstractFilter",11],["T_WHITESPACE"," ",11],["T_EXTENDS","extends",11],["T_WHITESPACE"," ",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Magento",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Framework",11],["T_NS_SEPARATOR","\\",11],["T_STRING","DataObject",11],["T_WHITESPACE"," ",11],["T_IMPLEMENTS","implements",11],["T_WHITESPACE"," ",11],["T_STRING","FilterInterface",11],["T_WHITESPACE","\n",11],"{",["T_WHITESPACE","\n    ",12],["T_CONST","const",13],["T_WHITESPACE"," ",13],["T_STRING","ATTRIBUTE_OPTIONS_ONLY_WITH_RESULTS",13],["T_WHITESPACE"," ",13],"=",["T_WHITESPACE"," ",13],["T_LNUMBER","1",13],";",["T_WHITESPACE","\n\n    ",13],["T_DOC_COMMENT","\/**\n     * Request variable name with filter value\n     *\n     * @var string\n     *\/",15],["T_WHITESPACE","\n    ",19],["T_PROTECTED","protected",20],["T_WHITESPACE"," ",20],["T_VARIABLE","$_requestVar",20],";",["T_WHITESPACE","\n\n    ",20],["T_DOC_COMMENT","\/**\n     * Array of filter items\n     *\n     * @var array\n     *\/",22],["T_WHITESPACE","\n    ",26],["T_PROTECTED","protected",27],["T_WHITESPACE"," ",27],["T_VARIABLE","$_items",27],";",["T_WHITESPACE","\n\n    ",27],["T_DOC_COMMENT","\/**\n     * Catalog layer\n     *\n     * @var \\Magento\\Catalog\\Model\\Layer\n     *\/",29],["T_WHITESPACE","\n    ",33],["T_PROTECTED","protected",34],["T_WHITESPACE"," ",34],["T_VARIABLE","$_catalogLayer",34],";",["T_WHITESPACE","\n\n    ",34],["T_DOC_COMMENT","\/**\n     * Store manager\n     *\n     * @var \\Magento\\Store\\Model\\StoreManagerInterface\n     *\/",36],["T_WHITESPACE","\n    ",40],["T_PROTECTED","protected",41],["T_WHITESPACE"," ",41],["T_VARIABLE","$_storeManager",41],";",["T_WHITESPACE","\n\n    ",41],["T_DOC_COMMENT","\/**\n     * Filter item factory\n     *\n     * @var \\Magento\\Catalog\\Model\\Layer\\Filter\\ItemFactory\n     *\/",43],["T_WHITESPACE","\n    ",47],["T_PROTECTED","protected",48],["T_WHITESPACE"," ",48],["T_VARIABLE","$_filterItemFactory",48],";",["T_WHITESPACE","\n\n    ",48],["T_DOC_COMMENT","\/**\n     * Item Data Builder\n     *\n     * @var \\Magento\\Catalog\\Model\\Layer\\Filter\\Item\\DataBuilder\n     *\/",50],["T_WHITESPACE","\n    ",54],["T_PROTECTED","protected",55],["T_WHITESPACE"," ",55],["T_VARIABLE","$itemDataBuilder",55],";",["T_WHITESPACE","\n\n    ",55],["T_DOC_COMMENT","\/**\n     * Constructor\n     *\n     * @param \\Magento\\Catalog\\Model\\Layer\\Filter\\ItemFactory $filterItemFactory\n     * @param \\Magento\\Store\\Model\\StoreManagerInterface $storeManager\n     * @param \\Magento\\Catalog\\Model\\Layer $layer\n     * @param \\Magento\\Catalog\\Model\\Layer\\Filter\\Item\\DataBuilder $itemDataBuilder\n     * @param array $data\n     * @throws \\Magento\\Framework\\Exception\\LocalizedException\n     *\/",57],["T_WHITESPACE","\n    ",66],["T_PUBLIC","public",67],["T_WHITESPACE"," ",67],["T_FUNCTION","function",67],["T_WHITESPACE"," ",67],["T_STRING","__construct",67],"(",["T_WHITESPACE","\n        ",67],["T_NS_SEPARATOR","\\",68],["T_STRING","Magento",68],["T_NS_SEPARATOR","\\",68],["T_STRING","Catalog",68],["T_NS_SEPARATOR","\\",68],["T_STRING","Model",68],["T_NS_SEPARATOR","\\",68],["T_STRING","Layer",68],["T_NS_SEPARATOR","\\",68],["T_STRING","Filter",68],["T_NS_SEPARATOR","\\",68],["T_STRING","ItemFactory",68],["T_WHITESPACE"," ",68],["T_VARIABLE","$filterItemFactory",68],",",["T_WHITESPACE","\n        ",68],["T_NS_SEPARATOR","\\",69],["T_STRING","Magento",69],["T_NS_SEPARATOR","\\",69],["T_STRING","Store",69],["T_NS_SEPARATOR","\\",69],["T_STRING","Model",69],["T_NS_SEPARATOR","\\",69],["T_STRING","StoreManagerInterface",69],["T_WHITESPACE"," ",69],["T_VARIABLE","$storeManager",69],",",["T_WHITESPACE","\n        ",69],["T_NS_SEPARATOR","\\",70],["T_STRING","Magento",70],["T_NS_SEPARATOR","\\",70],["T_STRING","Catalog",70],["T_NS_SEPARATOR","\\",70],["T_STRING","Model",70],["T_NS_SEPARATOR","\\",70],["T_STRING","Layer",70],["T_WHITESPACE"," ",70],["T_VARIABLE","$layer",70],",",["T_WHITESPACE","\n        ",70],["T_NS_SEPARATOR","\\",71],["T_STRING","Magento",71],["T_NS_SEPARATOR","\\",71],["T_STRING","Catalog",71],["T_NS_SEPARATOR","\\",71],["T_STRING","Model",71],["T_NS_SEPARATOR","\\",71],["T_STRING","Layer",71],["T_NS_SEPARATOR","\\",71],["T_STRING","Filter",71],["T_NS_SEPARATOR","\\",71],["T_STRING","Item",71],["T_NS_SEPARATOR","\\",71],["T_STRING","DataBuilder",71],["T_WHITESPACE"," ",71],["T_VARIABLE","$itemDataBuilder",71],",",["T_WHITESPACE","\n        ",71],["T_ARRAY","array",72],["T_WHITESPACE"," ",72],["T_VARIABLE","$data",72],["T_WHITESPACE"," ",72],"=",["T_WHITESPACE"," ",72],"[","]",["T_WHITESPACE","\n    ",72],")",["T_WHITESPACE"," ",73],"{",["T_WHITESPACE","\n        ",73],["T_VARIABLE","$this",74],["T_OBJECT_OPERATOR","->",74],["T_STRING","_filterItemFactory",74],["T_WHITESPACE"," ",74],"=",["T_WHITESPACE"," ",74],["T_VARIABLE","$filterItemFactory",74],";",["T_WHITESPACE","\n        ",74],["T_VARIABLE","$this",75],["T_OBJECT_OPERATOR","->",75],["T_STRING","_storeManager",75],["T_WHITESPACE"," ",75],"=",["T_WHITESPACE"," ",75],["T_VARIABLE","$storeManager",75],";",["T_WHITESPACE","\n        ",75],["T_VARIABLE","$this",76],["T_OBJECT_OPERATOR","->",76],["T_STRING","_catalogLayer",76],["T_WHITESPACE"," ",76],"=",["T_WHITESPACE"," ",76],["T_VARIABLE","$layer",76],";",["T_WHITESPACE","\n        ",76],["T_VARIABLE","$this",77],["T_OBJECT_OPERATOR","->",77],["T_STRING","itemDataBuilder",77],["T_WHITESPACE"," ",77],"=",["T_WHITESPACE"," ",77],["T_VARIABLE","$itemDataBuilder",77],";",["T_WHITESPACE","\n        ",77],["T_STRING","parent",78],["T_DOUBLE_COLON","::",78],["T_STRING","__construct",78],"(",["T_VARIABLE","$data",78],")",";",["T_WHITESPACE","\n        ",78],["T_IF","if",79],["T_WHITESPACE"," ",79],"(",["T_VARIABLE","$this",79],["T_OBJECT_OPERATOR","->",79],["T_STRING","hasAttributeModel",79],"(",")",")",["T_WHITESPACE"," ",79],"{",["T_WHITESPACE","\n            ",79],["T_VARIABLE","$this",80],["T_OBJECT_OPERATOR","->",80],["T_STRING","_requestVar",80],["T_WHITESPACE"," ",80],"=",["T_WHITESPACE"," ",80],["T_VARIABLE","$this",80],["T_OBJECT_OPERATOR","->",80],["T_STRING","getAttributeModel",80],"(",")",["T_OBJECT_OPERATOR","->",80],["T_STRING","getAttributeCode",80],"(",")",";",["T_WHITESPACE","\n        ",80],"}",["T_WHITESPACE","\n    ",81],"}",["T_WHITESPACE","\n\n    ",82],["T_DOC_COMMENT","\/**\n     * Set request variable name which is used for apply filter\n     *\n     * @param   string $varName\n     * @return  \\Magento\\Catalog\\Model\\Layer\\Filter\\AbstractFilter\n     *\/",84],["T_WHITESPACE","\n    ",89],["T_PUBLIC","public",90],["T_WHITESPACE"," ",90],["T_FUNCTION","function",90],["T_WHITESPACE"," ",90],["T_STRING","setRequestVar",90],"(",["T_VARIABLE","$varName",90],")",["T_WHITESPACE","\n    ",90],"{",["T_WHITESPACE","\n        ",91],["T_VARIABLE","$this",92],["T_OBJECT_OPERATOR","->",92],["T_STRING","_requestVar",92],["T_WHITESPACE"," ",92],"=",["T_WHITESPACE"," ",92],["T_VARIABLE","$varName",92],";",["T_WHITESPACE","\n        ",92],["T_RETURN","return",93],["T_WHITESPACE"," ",93],["T_VARIABLE","$this",93],";",["T_WHITESPACE","\n    ",93],"}",["T_WHITESPACE","\n\n    ",94],["T_DOC_COMMENT","\/**\n     * Get request variable name which is used for apply filter\n     *\n     * @return string\n     *\/",96],["T_WHITESPACE","\n    ",100],["T_PUBLIC","public",101],["T_WHITESPACE"," ",101],["T_FUNCTION","function",101],["T_WHITESPACE"," ",101],["T_STRING","getRequestVar",101],"(",")",["T_WHITESPACE","\n    ",101],"{",["T_WHITESPACE","\n        ",102],["T_RETURN","return",103],["T_WHITESPACE"," ",103],["T_VARIABLE","$this",103],["T_OBJECT_OPERATOR","->",103],["T_STRING","_requestVar",103],";",["T_WHITESPACE","\n    ",103],"}",["T_WHITESPACE","\n\n    ",104],["T_DOC_COMMENT","\/**\n     * Get filter value for reset current filter state\n     *\n     * @return mixed\n     *\/",106],["T_WHITESPACE","\n    ",110],["T_PUBLIC","public",111],["T_WHITESPACE"," ",111],["T_FUNCTION","function",111],["T_WHITESPACE"," ",111],["T_STRING","getResetValue",111],"(",")",["T_WHITESPACE","\n    ",111],"{",["T_WHITESPACE","\n        ",112],["T_RETURN","return",113],["T_WHITESPACE"," ",113],["T_STRING","null",113],";",["T_WHITESPACE","\n    ",113],"}",["T_WHITESPACE","\n\n    ",114],["T_DOC_COMMENT","\/**\n     * Retrieve filter value for Clear All Items filter state\n     *\n     * @return mixed\n     *\/",116],["T_WHITESPACE","\n    ",120],["T_PUBLIC","public",121],["T_WHITESPACE"," ",121],["T_FUNCTION","function",121],["T_WHITESPACE"," ",121],["T_STRING","getCleanValue",121],"(",")",["T_WHITESPACE","\n    ",121],"{",["T_WHITESPACE","\n        ",122],["T_RETURN","return",123],["T_WHITESPACE"," ",123],["T_STRING","null",123],";",["T_WHITESPACE","\n    ",123],"}",["T_WHITESPACE","\n\n    ",124],["T_DOC_COMMENT","\/**\n     * Apply filter to collection\n     *\n     * @param \\Magento\\Framework\\App\\RequestInterface $request\n     * @return $this\n     * @SuppressWarnings(PHPMD.UnusedFormalParameter)\n     *\/",126],["T_WHITESPACE","\n    ",132],["T_PUBLIC","public",133],["T_WHITESPACE"," ",133],["T_FUNCTION","function",133],["T_WHITESPACE"," ",133],["T_STRING","apply",133],"(",["T_NS_SEPARATOR","\\",133],["T_STRING","Magento",133],["T_NS_SEPARATOR","\\",133],["T_STRING","Framework",133],["T_NS_SEPARATOR","\\",133],["T_STRING","App",133],["T_NS_SEPARATOR","\\",133],["T_STRING","RequestInterface",133],["T_WHITESPACE"," ",133],["T_VARIABLE","$request",133],")",["T_WHITESPACE","\n    ",133],"{",["T_WHITESPACE","\n        ",134],["T_RETURN","return",135],["T_WHITESPACE"," ",135],["T_VARIABLE","$this",135],";",["T_WHITESPACE","\n    ",135],"}",["T_WHITESPACE","\n\n    ",136],["T_DOC_COMMENT","\/**\n     * Get fiter items count\n     *\n     * @return int\n     *\/",138],["T_WHITESPACE","\n    ",142],["T_PUBLIC","public",143],["T_WHITESPACE"," ",143],["T_FUNCTION","function",143],["T_WHITESPACE"," ",143],["T_STRING","getItemsCount",143],"(",")",["T_WHITESPACE","\n    ",143],"{",["T_WHITESPACE","\n        ",144],["T_RETURN","return",145],["T_WHITESPACE"," ",145],["T_STRING","count",145],"(",["T_VARIABLE","$this",145],["T_OBJECT_OPERATOR","->",145],["T_STRING","getItems",145],"(",")",")",";",["T_WHITESPACE","\n    ",145],"}",["T_WHITESPACE","\n\n    ",146],["T_DOC_COMMENT","\/**\n     * Get all filter items\n     *\n     * @return array\n     *\/",148],["T_WHITESPACE","\n    ",152],["T_PUBLIC","public",153],["T_WHITESPACE"," ",153],["T_FUNCTION","function",153],["T_WHITESPACE"," ",153],["T_STRING","getItems",153],"(",")",["T_WHITESPACE","\n    ",153],"{",["T_WHITESPACE","\n        ",154],["T_IF","if",155],["T_WHITESPACE"," ",155],"(",["T_VARIABLE","$this",155],["T_OBJECT_OPERATOR","->",155],["T_STRING","_items",155],["T_WHITESPACE"," ",155],["T_IS_IDENTICAL","===",155],["T_WHITESPACE"," ",155],["T_STRING","null",155],")",["T_WHITESPACE"," ",155],"{",["T_WHITESPACE","\n            ",155],["T_VARIABLE","$this",156],["T_OBJECT_OPERATOR","->",156],["T_STRING","_initItems",156],"(",")",";",["T_WHITESPACE","\n        ",156],"}",["T_WHITESPACE","\n        ",157],["T_RETURN","return",158],["T_WHITESPACE"," ",158],["T_VARIABLE","$this",158],["T_OBJECT_OPERATOR","->",158],["T_STRING","_items",158],";",["T_WHITESPACE","\n    ",158],"}",["T_WHITESPACE","\n\n    ",159],["T_DOC_COMMENT","\/**\n     * Set all filter items\n     *\n     * @param array $items\n     * @return $this\n     *\/",161],["T_WHITESPACE","\n    ",166],["T_PUBLIC","public",167],["T_WHITESPACE"," ",167],["T_FUNCTION","function",167],["T_WHITESPACE"," ",167],["T_STRING","setItems",167],"(",["T_ARRAY","array",167],["T_WHITESPACE"," ",167],["T_VARIABLE","$items",167],")",["T_WHITESPACE","\n    ",167],"{",["T_WHITESPACE","\n        ",168],["T_VARIABLE","$this",169],["T_OBJECT_OPERATOR","->",169],["T_STRING","_items",169],["T_WHITESPACE"," ",169],"=",["T_WHITESPACE"," ",169],["T_VARIABLE","$items",169],";",["T_WHITESPACE","\n        ",169],["T_RETURN","return",170],["T_WHITESPACE"," ",170],["T_VARIABLE","$this",170],";",["T_WHITESPACE","\n    ",170],"}",["T_WHITESPACE","\n\n    ",171],["T_DOC_COMMENT","\/**\n     * Get data array for building filter items\n     *\n     * Result array should have next structure:\n     * array(\n     *      $index => array(\n     *          'label' => $label,\n     *          'value' => $value,\n     *          'count' => $count\n     *      )\n     * )\n     *\n     * @return array\n     *\/",173],["T_WHITESPACE","\n    ",186],["T_PROTECTED","protected",187],["T_WHITESPACE"," ",187],["T_FUNCTION","function",187],["T_WHITESPACE"," ",187],["T_STRING","_getItemsData",187],"(",")",["T_WHITESPACE","\n    ",187],"{",["T_WHITESPACE","\n        ",188],["T_RETURN","return",189],["T_WHITESPACE"," ",189],"[","]",";",["T_WHITESPACE","\n    ",189],"}",["T_WHITESPACE","\n\n    ",190],["T_DOC_COMMENT","\/**\n     * Initialize filter items\n     *\n     * @return  \\Magento\\Catalog\\Model\\Layer\\Filter\\AbstractFilter\n     *\/",192],["T_WHITESPACE","\n    ",196],["T_PROTECTED","protected",197],["T_WHITESPACE"," ",197],["T_FUNCTION","function",197],["T_WHITESPACE"," ",197],["T_STRING","_initItems",197],"(",")",["T_WHITESPACE","\n    ",197],"{",["T_WHITESPACE","\n        ",198],["T_VARIABLE","$data",199],["T_WHITESPACE"," ",199],"=",["T_WHITESPACE"," ",199],["T_VARIABLE","$this",199],["T_OBJECT_OPERATOR","->",199],["T_STRING","_getItemsData",199],"(",")",";",["T_WHITESPACE","\n        ",199],["T_VARIABLE","$items",200],["T_WHITESPACE"," ",200],"=",["T_WHITESPACE"," ",200],"[","]",";",["T_WHITESPACE","\n        ",200],["T_FOREACH","foreach",201],["T_WHITESPACE"," ",201],"(",["T_VARIABLE","$data",201],["T_WHITESPACE"," ",201],["T_AS","as",201],["T_WHITESPACE"," ",201],["T_VARIABLE","$itemData",201],")",["T_WHITESPACE"," ",201],"{",["T_WHITESPACE","\n            ",201],["T_VARIABLE","$items",202],"[","]",["T_WHITESPACE"," ",202],"=",["T_WHITESPACE"," ",202],["T_VARIABLE","$this",202],["T_OBJECT_OPERATOR","->",202],["T_STRING","_createItem",202],"(",["T_VARIABLE","$itemData",202],"[",["T_CONSTANT_ENCAPSED_STRING","'label'",202],"]",",",["T_WHITESPACE"," ",202],["T_VARIABLE","$itemData",202],"[",["T_CONSTANT_ENCAPSED_STRING","'value'",202],"]",",",["T_WHITESPACE"," ",202],["T_VARIABLE","$itemData",202],"[",["T_CONSTANT_ENCAPSED_STRING","'count'",202],"]",")",";",["T_WHITESPACE","\n        ",202],"}",["T_WHITESPACE","\n        ",203],["T_VARIABLE","$this",204],["T_OBJECT_OPERATOR","->",204],["T_STRING","_items",204],["T_WHITESPACE"," ",204],"=",["T_WHITESPACE"," ",204],["T_VARIABLE","$items",204],";",["T_WHITESPACE","\n        ",204],["T_RETURN","return",205],["T_WHITESPACE"," ",205],["T_VARIABLE","$this",205],";",["T_WHITESPACE","\n    ",205],"}",["T_WHITESPACE","\n\n    ",206],["T_DOC_COMMENT","\/**\n     * Retrieve layer object\n     *\n     * @return \\Magento\\Catalog\\Model\\Layer\n     *\/",208],["T_WHITESPACE","\n    ",212],["T_PUBLIC","public",213],["T_WHITESPACE"," ",213],["T_FUNCTION","function",213],["T_WHITESPACE"," ",213],["T_STRING","getLayer",213],"(",")",["T_WHITESPACE","\n    ",213],"{",["T_WHITESPACE","\n        ",214],["T_VARIABLE","$layer",215],["T_WHITESPACE"," ",215],"=",["T_WHITESPACE"," ",215],["T_VARIABLE","$this",215],["T_OBJECT_OPERATOR","->",215],["T_STRING","_getData",215],"(",["T_CONSTANT_ENCAPSED_STRING","'layer'",215],")",";",["T_WHITESPACE","\n        ",215],["T_IF","if",216],["T_WHITESPACE"," ",216],"(",["T_VARIABLE","$layer",216],["T_WHITESPACE"," ",216],["T_IS_IDENTICAL","===",216],["T_WHITESPACE"," ",216],["T_STRING","null",216],")",["T_WHITESPACE"," ",216],"{",["T_WHITESPACE","\n            ",216],["T_VARIABLE","$layer",217],["T_WHITESPACE"," ",217],"=",["T_WHITESPACE"," ",217],["T_VARIABLE","$this",217],["T_OBJECT_OPERATOR","->",217],["T_STRING","_catalogLayer",217],";",["T_WHITESPACE","\n            ",217],["T_VARIABLE","$this",218],["T_OBJECT_OPERATOR","->",218],["T_STRING","setData",218],"(",["T_CONSTANT_ENCAPSED_STRING","'layer'",218],",",["T_WHITESPACE"," ",218],["T_VARIABLE","$layer",218],")",";",["T_WHITESPACE","\n        ",218],"}",["T_WHITESPACE","\n        ",219],["T_RETURN","return",220],["T_WHITESPACE"," ",220],["T_VARIABLE","$layer",220],";",["T_WHITESPACE","\n    ",220],"}",["T_WHITESPACE","\n\n    ",221],["T_DOC_COMMENT","\/**\n     * Create filter item object\n     *\n     * @param   string $label\n     * @param   mixed $value\n     * @param   int $count\n     * @return  \\Magento\\Catalog\\Model\\Layer\\Filter\\Item\n     *\/",223],["T_WHITESPACE","\n    ",230],["T_PROTECTED","protected",231],["T_WHITESPACE"," ",231],["T_FUNCTION","function",231],["T_WHITESPACE"," ",231],["T_STRING","_createItem",231],"(",["T_VARIABLE","$label",231],",",["T_WHITESPACE"," ",231],["T_VARIABLE","$value",231],",",["T_WHITESPACE"," ",231],["T_VARIABLE","$count",231],["T_WHITESPACE"," ",231],"=",["T_WHITESPACE"," ",231],["T_LNUMBER","0",231],")",["T_WHITESPACE","\n    ",231],"{",["T_WHITESPACE","\n        ",232],["T_RETURN","return",233],["T_WHITESPACE"," ",233],["T_VARIABLE","$this",233],["T_OBJECT_OPERATOR","->",233],["T_STRING","_filterItemFactory",233],["T_OBJECT_OPERATOR","->",233],["T_STRING","create",233],"(",")",["T_WHITESPACE","\n            ",233],["T_OBJECT_OPERATOR","->",234],["T_STRING","setFilter",234],"(",["T_VARIABLE","$this",234],")",["T_WHITESPACE","\n            ",234],["T_OBJECT_OPERATOR","->",235],["T_STRING","setLabel",235],"(",["T_VARIABLE","$label",235],")",["T_WHITESPACE","\n            ",235],["T_OBJECT_OPERATOR","->",236],["T_STRING","setValue",236],"(",["T_VARIABLE","$value",236],")",["T_WHITESPACE","\n            ",236],["T_OBJECT_OPERATOR","->",237],["T_STRING","setCount",237],"(",["T_VARIABLE","$count",237],")",";",["T_WHITESPACE","\n    ",237],"}",["T_WHITESPACE","\n\n    ",238],["T_DOC_COMMENT","\/**\n     * Get all product ids from from collection with applied filters\n     *\n     * @return array\n     *\/",240],["T_WHITESPACE","\n    ",244],["T_PROTECTED","protected",245],["T_WHITESPACE"," ",245],["T_FUNCTION","function",245],["T_WHITESPACE"," ",245],["T_STRING","_getFilterEntityIds",245],"(",")",["T_WHITESPACE","\n    ",245],"{",["T_WHITESPACE","\n        ",246],["T_RETURN","return",247],["T_WHITESPACE"," ",247],["T_VARIABLE","$this",247],["T_OBJECT_OPERATOR","->",247],["T_STRING","getLayer",247],"(",")",["T_OBJECT_OPERATOR","->",247],["T_STRING","getProductCollection",247],"(",")",["T_OBJECT_OPERATOR","->",247],["T_STRING","getAllIdsCache",247],"(",")",";",["T_WHITESPACE","\n    ",247],"}",["T_WHITESPACE","\n\n    ",248],["T_DOC_COMMENT","\/**\n     * Get product collection select object with applied filters\n     *\n     * @return \\Magento\\Framework\\DB\\Select\n     *\/",250],["T_WHITESPACE","\n    ",254],["T_PROTECTED","protected",255],["T_WHITESPACE"," ",255],["T_FUNCTION","function",255],["T_WHITESPACE"," ",255],["T_STRING","_getBaseCollectionSql",255],"(",")",["T_WHITESPACE","\n    ",255],"{",["T_WHITESPACE","\n        ",256],["T_RETURN","return",257],["T_WHITESPACE"," ",257],["T_VARIABLE","$this",257],["T_OBJECT_OPERATOR","->",257],["T_STRING","getLayer",257],"(",")",["T_OBJECT_OPERATOR","->",257],["T_STRING","getProductCollection",257],"(",")",["T_OBJECT_OPERATOR","->",257],["T_STRING","getSelect",257],"(",")",";",["T_WHITESPACE","\n    ",257],"}",["T_WHITESPACE","\n\n    ",258],["T_DOC_COMMENT","\/**\n     * Set attribute model to filter\n     *\n     * @param   \\Magento\\Eav\\Model\\Entity\\Attribute $attribute\n     * @return  \\Magento\\Catalog\\Model\\Layer\\Filter\\AbstractFilter\n     *\/",260],["T_WHITESPACE","\n    ",265],["T_PUBLIC","public",266],["T_WHITESPACE"," ",266],["T_FUNCTION","function",266],["T_WHITESPACE"," ",266],["T_STRING","setAttributeModel",266],"(",["T_VARIABLE","$attribute",266],")",["T_WHITESPACE","\n    ",266],"{",["T_WHITESPACE","\n        ",267],["T_VARIABLE","$this",268],["T_OBJECT_OPERATOR","->",268],["T_STRING","setRequestVar",268],"(",["T_VARIABLE","$attribute",268],["T_OBJECT_OPERATOR","->",268],["T_STRING","getAttributeCode",268],"(",")",")",";",["T_WHITESPACE","\n        ",268],["T_VARIABLE","$this",269],["T_OBJECT_OPERATOR","->",269],["T_STRING","setData",269],"(",["T_CONSTANT_ENCAPSED_STRING","'attribute_model'",269],",",["T_WHITESPACE"," ",269],["T_VARIABLE","$attribute",269],")",";",["T_WHITESPACE","\n        ",269],["T_RETURN","return",270],["T_WHITESPACE"," ",270],["T_VARIABLE","$this",270],";",["T_WHITESPACE","\n    ",270],"}",["T_WHITESPACE","\n\n    ",271],["T_DOC_COMMENT","\/**\n     * Get attribute model associated with filter\n     *\n     * @return \\Magento\\Catalog\\Model\\ResourceModel\\Eav\\Attribute\n     * @throws \\Magento\\Framework\\Exception\\LocalizedException\n     *\/",273],["T_WHITESPACE","\n    ",278],["T_PUBLIC","public",279],["T_WHITESPACE"," ",279],["T_FUNCTION","function",279],["T_WHITESPACE"," ",279],["T_STRING","getAttributeModel",279],"(",")",["T_WHITESPACE","\n    ",279],"{",["T_WHITESPACE","\n        ",280],["T_VARIABLE","$attribute",281],["T_WHITESPACE"," ",281],"=",["T_WHITESPACE"," ",281],["T_VARIABLE","$this",281],["T_OBJECT_OPERATOR","->",281],["T_STRING","getData",281],"(",["T_CONSTANT_ENCAPSED_STRING","'attribute_model'",281],")",";",["T_WHITESPACE","\n        ",281],["T_IF","if",282],["T_WHITESPACE"," ",282],"(",["T_VARIABLE","$attribute",282],["T_WHITESPACE"," ",282],["T_IS_IDENTICAL","===",282],["T_WHITESPACE"," ",282],["T_STRING","null",282],")",["T_WHITESPACE"," ",282],"{",["T_WHITESPACE","\n            ",282],["T_THROW","throw",283],["T_WHITESPACE"," ",283],["T_NEW","new",283],["T_WHITESPACE"," ",283],["T_NS_SEPARATOR","\\",283],["T_STRING","Magento",283],["T_NS_SEPARATOR","\\",283],["T_STRING","Framework",283],["T_NS_SEPARATOR","\\",283],["T_STRING","Exception",283],["T_NS_SEPARATOR","\\",283],["T_STRING","LocalizedException",283],"(",["T_STRING","__",283],"(",["T_CONSTANT_ENCAPSED_STRING","'The attribute model is not defined.'",283],")",")",";",["T_WHITESPACE","\n        ",283],"}",["T_WHITESPACE","\n        ",284],["T_RETURN","return",285],["T_WHITESPACE"," ",285],["T_VARIABLE","$attribute",285],";",["T_WHITESPACE","\n    ",285],"}",["T_WHITESPACE","\n\n    ",286],["T_DOC_COMMENT","\/**\n     * Get filter text label\n     *\n     * @return string\n     * @throws \\Magento\\Framework\\Exception\\LocalizedException\n     *\/",288],["T_WHITESPACE","\n    ",293],["T_PUBLIC","public",294],["T_WHITESPACE"," ",294],["T_FUNCTION","function",294],["T_WHITESPACE"," ",294],["T_STRING","getName",294],"(",")",["T_WHITESPACE","\n    ",294],"{",["T_WHITESPACE","\n        ",295],["T_RETURN","return",296],["T_WHITESPACE"," ",296],["T_VARIABLE","$this",296],["T_OBJECT_OPERATOR","->",296],["T_STRING","getAttributeModel",296],"(",")",["T_OBJECT_OPERATOR","->",296],["T_STRING","getStoreLabel",296],"(",")",";",["T_WHITESPACE","\n    ",296],"}",["T_WHITESPACE","\n\n    ",297],["T_DOC_COMMENT","\/**\n     * Retrieve current store id scope\n     *\n     * @return int\n     *\/",299],["T_WHITESPACE","\n    ",303],["T_PUBLIC","public",304],["T_WHITESPACE"," ",304],["T_FUNCTION","function",304],["T_WHITESPACE"," ",304],["T_STRING","getStoreId",304],"(",")",["T_WHITESPACE","\n    ",304],"{",["T_WHITESPACE","\n        ",305],["T_VARIABLE","$storeId",306],["T_WHITESPACE"," ",306],"=",["T_WHITESPACE"," ",306],["T_VARIABLE","$this",306],["T_OBJECT_OPERATOR","->",306],["T_STRING","_getData",306],"(",["T_CONSTANT_ENCAPSED_STRING","'store_id'",306],")",";",["T_WHITESPACE","\n        ",306],["T_IF","if",307],["T_WHITESPACE"," ",307],"(",["T_VARIABLE","$storeId",307],["T_WHITESPACE"," ",307],["T_IS_IDENTICAL","===",307],["T_WHITESPACE"," ",307],["T_STRING","null",307],")",["T_WHITESPACE"," ",307],"{",["T_WHITESPACE","\n            ",307],["T_VARIABLE","$storeId",308],["T_WHITESPACE"," ",308],"=",["T_WHITESPACE"," ",308],["T_VARIABLE","$this",308],["T_OBJECT_OPERATOR","->",308],["T_STRING","_storeManager",308],["T_OBJECT_OPERATOR","->",308],["T_STRING","getStore",308],"(",")",["T_OBJECT_OPERATOR","->",308],["T_STRING","getId",308],"(",")",";",["T_WHITESPACE","\n        ",308],"}",["T_WHITESPACE","\n        ",309],["T_RETURN","return",310],["T_WHITESPACE"," ",310],["T_VARIABLE","$storeId",310],";",["T_WHITESPACE","\n    ",310],"}",["T_WHITESPACE","\n\n    ",311],["T_DOC_COMMENT","\/**\n     * Set store id scope\n     *\n     * @param int $storeId\n     * @return $this\n     *\/",313],["T_WHITESPACE","\n    ",318],["T_PUBLIC","public",319],["T_WHITESPACE"," ",319],["T_FUNCTION","function",319],["T_WHITESPACE"," ",319],["T_STRING","setStoreId",319],"(",["T_VARIABLE","$storeId",319],")",["T_WHITESPACE","\n    ",319],"{",["T_WHITESPACE","\n        ",320],["T_RETURN","return",321],["T_WHITESPACE"," ",321],["T_VARIABLE","$this",321],["T_OBJECT_OPERATOR","->",321],["T_STRING","setData",321],"(",["T_CONSTANT_ENCAPSED_STRING","'store_id'",321],",",["T_WHITESPACE"," ",321],["T_VARIABLE","$storeId",321],")",";",["T_WHITESPACE","\n    ",321],"}",["T_WHITESPACE","\n\n    ",322],["T_DOC_COMMENT","\/**\n     * Retrieve Website ID scope\n     *\n     * @return int\n     *\/",324],["T_WHITESPACE","\n    ",328],["T_PUBLIC","public",329],["T_WHITESPACE"," ",329],["T_FUNCTION","function",329],["T_WHITESPACE"," ",329],["T_STRING","getWebsiteId",329],"(",")",["T_WHITESPACE","\n    ",329],"{",["T_WHITESPACE","\n        ",330],["T_VARIABLE","$websiteId",331],["T_WHITESPACE"," ",331],"=",["T_WHITESPACE"," ",331],["T_VARIABLE","$this",331],["T_OBJECT_OPERATOR","->",331],["T_STRING","_getData",331],"(",["T_CONSTANT_ENCAPSED_STRING","'website_id'",331],")",";",["T_WHITESPACE","\n        ",331],["T_IF","if",332],["T_WHITESPACE"," ",332],"(",["T_VARIABLE","$websiteId",332],["T_WHITESPACE"," ",332],["T_IS_IDENTICAL","===",332],["T_WHITESPACE"," ",332],["T_STRING","null",332],")",["T_WHITESPACE"," ",332],"{",["T_WHITESPACE","\n            ",332],["T_VARIABLE","$websiteId",333],["T_WHITESPACE"," ",333],"=",["T_WHITESPACE"," ",333],["T_VARIABLE","$this",333],["T_OBJECT_OPERATOR","->",333],["T_STRING","_storeManager",333],["T_OBJECT_OPERATOR","->",333],["T_STRING","getStore",333],"(",")",["T_OBJECT_OPERATOR","->",333],["T_STRING","getWebsiteId",333],"(",")",";",["T_WHITESPACE","\n        ",333],"}",["T_WHITESPACE","\n        ",334],["T_RETURN","return",335],["T_WHITESPACE"," ",335],["T_VARIABLE","$websiteId",335],";",["T_WHITESPACE","\n    ",335],"}",["T_WHITESPACE","\n\n    ",336],["T_DOC_COMMENT","\/**\n     * Set Website ID scope\n     *\n     * @param int $websiteId\n     * @return $this\n     *\/",338],["T_WHITESPACE","\n    ",343],["T_PUBLIC","public",344],["T_WHITESPACE"," ",344],["T_FUNCTION","function",344],["T_WHITESPACE"," ",344],["T_STRING","setWebsiteId",344],"(",["T_VARIABLE","$websiteId",344],")",["T_WHITESPACE","\n    ",344],"{",["T_WHITESPACE","\n        ",345],["T_RETURN","return",346],["T_WHITESPACE"," ",346],["T_VARIABLE","$this",346],["T_OBJECT_OPERATOR","->",346],["T_STRING","setData",346],"(",["T_CONSTANT_ENCAPSED_STRING","'website_id'",346],",",["T_WHITESPACE"," ",346],["T_VARIABLE","$websiteId",346],")",";",["T_WHITESPACE","\n    ",346],"}",["T_WHITESPACE","\n\n    ",347],["T_DOC_COMMENT","\/**\n     * Clear current element link text, for example 'Clear Price'\n     *\n     * @return false|string\n     *\/",349],["T_WHITESPACE","\n    ",353],["T_PUBLIC","public",354],["T_WHITESPACE"," ",354],["T_FUNCTION","function",354],["T_WHITESPACE"," ",354],["T_STRING","getClearLinkText",354],"(",")",["T_WHITESPACE","\n    ",354],"{",["T_WHITESPACE","\n        ",355],["T_RETURN","return",356],["T_WHITESPACE"," ",356],["T_STRING","false",356],";",["T_WHITESPACE","\n    ",356],"}",["T_WHITESPACE","\n\n    ",357],["T_DOC_COMMENT","\/**\n     * Get option text from frontend model by option id\n     *\n     * @param   int $optionId\n     * @throws \\Magento\\Framework\\Exception\\LocalizedException\n     * @return  string|bool\n     *\/",359],["T_WHITESPACE","\n    ",365],["T_PROTECTED","protected",366],["T_WHITESPACE"," ",366],["T_FUNCTION","function",366],["T_WHITESPACE"," ",366],["T_STRING","getOptionText",366],"(",["T_VARIABLE","$optionId",366],")",["T_WHITESPACE","\n    ",366],"{",["T_WHITESPACE","\n        ",367],["T_RETURN","return",368],["T_WHITESPACE"," ",368],["T_VARIABLE","$this",368],["T_OBJECT_OPERATOR","->",368],["T_STRING","getAttributeModel",368],"(",")",["T_OBJECT_OPERATOR","->",368],["T_STRING","getFrontend",368],"(",")",["T_OBJECT_OPERATOR","->",368],["T_STRING","getOption",368],"(",["T_VARIABLE","$optionId",368],")",";",["T_WHITESPACE","\n    ",368],"}",["T_WHITESPACE","\n\n    ",369],["T_DOC_COMMENT","\/**\n     * Check whether specified attribute can be used in LN\n     *\n     * @param \\Magento\\Catalog\\Model\\ResourceModel\\Eav\\Attribute $attribute\n     * @return int\n     *\/",371],["T_WHITESPACE","\n    ",376],["T_PROTECTED","protected",377],["T_WHITESPACE"," ",377],["T_FUNCTION","function",377],["T_WHITESPACE"," ",377],["T_STRING","getAttributeIsFilterable",377],"(",["T_VARIABLE","$attribute",377],")",["T_WHITESPACE","\n    ",377],"{",["T_WHITESPACE","\n        ",378],["T_RETURN","return",379],["T_WHITESPACE"," ",379],["T_INT_CAST","(int)",379],["T_VARIABLE","$attribute",379],["T_OBJECT_OPERATOR","->",379],["T_STRING","getIsFilterable",379],"(",")",";",["T_WHITESPACE","\n    ",379],"}",["T_WHITESPACE","\n\n    ",380],["T_DOC_COMMENT","\/**\n     * Checks whether the option reduces the number of results\n     *\n     * @param int $optionCount Count of search results with this option\n     * @param int $totalSize Current search results count\n     * @return bool\n     *\/",382],["T_WHITESPACE","\n    ",388],["T_PROTECTED","protected",389],["T_WHITESPACE"," ",389],["T_FUNCTION","function",389],["T_WHITESPACE"," ",389],["T_STRING","isOptionReducesResults",389],"(",["T_VARIABLE","$optionCount",389],",",["T_WHITESPACE"," ",389],["T_VARIABLE","$totalSize",389],")",["T_WHITESPACE","\n    ",389],"{",["T_WHITESPACE","\n        ",390],["T_RETURN","return",391],["T_WHITESPACE"," ",391],["T_VARIABLE","$optionCount",391],["T_WHITESPACE"," ",391],"<",["T_WHITESPACE"," ",391],["T_VARIABLE","$totalSize",391],";",["T_WHITESPACE","\n    ",391],"}",["T_WHITESPACE","\n",392],"}",["T_WHITESPACE","\n",393]]
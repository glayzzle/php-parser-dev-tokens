[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Copyright \u00c2\u00a9 2013-2017 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n *\/",2],["T_WHITESPACE","\n",5],["T_NAMESPACE","namespace",6],["T_WHITESPACE"," ",6],["T_STRING","Magento",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Catalog",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Model",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Product",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Option",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Type",6],";",["T_WHITESPACE","\n\n",6],["T_USE","use",8],["T_WHITESPACE"," ",8],["T_STRING","Magento",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Framework",8],["T_NS_SEPARATOR","\\",8],["T_STRING","App",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Filesystem",8],["T_NS_SEPARATOR","\\",8],["T_STRING","DirectoryList",8],";",["T_WHITESPACE","\n",8],["T_USE","use",9],["T_WHITESPACE"," ",9],["T_STRING","Magento",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Framework",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Filesystem",9],";",["T_WHITESPACE","\n",9],["T_USE","use",10],["T_WHITESPACE"," ",10],["T_STRING","Magento",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Framework",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Exception",10],["T_NS_SEPARATOR","\\",10],["T_STRING","LocalizedException",10],";",["T_WHITESPACE","\n",10],["T_USE","use",11],["T_WHITESPACE"," ",11],["T_STRING","Magento",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Catalog",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Model",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Product",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Exception",11],["T_WHITESPACE"," ",11],["T_AS","as",11],["T_WHITESPACE"," ",11],["T_STRING","ProductException",11],";",["T_WHITESPACE","\n",11],["T_USE","use",12],["T_WHITESPACE"," ",12],["T_STRING","Magento",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Framework",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Serialize",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Serializer",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Json",12],";",["T_WHITESPACE","\n",12],["T_USE","use",13],["T_WHITESPACE"," ",13],["T_STRING","Magento",13],["T_NS_SEPARATOR","\\",13],["T_STRING","Framework",13],["T_NS_SEPARATOR","\\",13],["T_STRING","App",13],["T_NS_SEPARATOR","\\",13],["T_STRING","ObjectManager",13],";",["T_WHITESPACE","\n\n",13],["T_DOC_COMMENT","\/**\n * Catalog product option file type\n *\n * @author     Magento Core Team <core@magentocommerce.com>\n * @SuppressWarnings(PHPMD.CouplingBetweenObjects)\n *\/",15],["T_WHITESPACE","\n",20],["T_CLASS","class",21],["T_WHITESPACE"," ",21],["T_STRING","File",21],["T_WHITESPACE"," ",21],["T_EXTENDS","extends",21],["T_WHITESPACE"," ",21],["T_NS_SEPARATOR","\\",21],["T_STRING","Magento",21],["T_NS_SEPARATOR","\\",21],["T_STRING","Catalog",21],["T_NS_SEPARATOR","\\",21],["T_STRING","Model",21],["T_NS_SEPARATOR","\\",21],["T_STRING","Product",21],["T_NS_SEPARATOR","\\",21],["T_STRING","Option",21],["T_NS_SEPARATOR","\\",21],["T_STRING","Type",21],["T_NS_SEPARATOR","\\",21],["T_STRING","DefaultType",21],["T_WHITESPACE","\n",21],"{",["T_WHITESPACE","\n    ",22],["T_DOC_COMMENT","\/**\n     * Url for custom option download controller\n     * @var string\n     *\/",23],["T_WHITESPACE","\n    ",26],["T_PROTECTED","protected",27],["T_WHITESPACE"," ",27],["T_VARIABLE","$_customOptionDownloadUrl",27],["T_WHITESPACE"," ",27],"=",["T_WHITESPACE"," ",27],["T_CONSTANT_ENCAPSED_STRING","'sales\/download\/downloadCustomOption'",27],";",["T_WHITESPACE","\n\n    ",27],["T_DOC_COMMENT","\/**\n     * @var string|null\n     *\/",29],["T_WHITESPACE","\n    ",31],["T_PROTECTED","protected",32],["T_WHITESPACE"," ",32],["T_VARIABLE","$_formattedOptionValue",32],["T_WHITESPACE"," ",32],"=",["T_WHITESPACE"," ",32],["T_STRING","null",32],";",["T_WHITESPACE","\n\n    ",32],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Framework\\Filesystem\\Directory\\ReadInterface\n     *\/",34],["T_WHITESPACE","\n    ",36],["T_PROTECTED","protected",37],["T_WHITESPACE"," ",37],["T_VARIABLE","$_rootDirectory",37],";",["T_WHITESPACE","\n\n    ",37],["T_DOC_COMMENT","\/**\n     * Core file storage database\n     *\n     * @var \\Magento\\MediaStorage\\Helper\\File\\Storage\\Database\n     *\/",39],["T_WHITESPACE","\n    ",43],["T_PROTECTED","protected",44],["T_WHITESPACE"," ",44],["T_VARIABLE","$_coreFileStorageDatabase",44],["T_WHITESPACE"," ",44],"=",["T_WHITESPACE"," ",44],["T_STRING","null",44],";",["T_WHITESPACE","\n\n    ",44],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Framework\\Escaper\n     *\/",46],["T_WHITESPACE","\n    ",48],["T_PROTECTED","protected",49],["T_WHITESPACE"," ",49],["T_VARIABLE","$_escaper",49],";",["T_WHITESPACE","\n\n    ",49],["T_DOC_COMMENT","\/**\n     * Url\n     *\n     * @var \\Magento\\Catalog\\Model\\Product\\Option\\UrlBuilder\n     *\/",51],["T_WHITESPACE","\n    ",55],["T_PROTECTED","protected",56],["T_WHITESPACE"," ",56],["T_VARIABLE","$_urlBuilder",56],";",["T_WHITESPACE","\n\n    ",56],["T_DOC_COMMENT","\/**\n     * Item option factory\n     *\n     * @var \\Magento\\Quote\\Model\\Quote\\Item\\OptionFactory\n     *\/",58],["T_WHITESPACE","\n    ",62],["T_PROTECTED","protected",63],["T_WHITESPACE"," ",63],["T_VARIABLE","$_itemOptionFactory",63],";",["T_WHITESPACE","\n\n    ",63],["T_DOC_COMMENT","\/**\n     * @var File\\ValidatorInfo\n     *\/",65],["T_WHITESPACE","\n    ",67],["T_PROTECTED","protected",68],["T_WHITESPACE"," ",68],["T_VARIABLE","$validatorInfo",68],";",["T_WHITESPACE","\n\n    ",68],["T_DOC_COMMENT","\/**\n     * @var File\\ValidatorFile\n     *\/",70],["T_WHITESPACE","\n    ",72],["T_PROTECTED","protected",73],["T_WHITESPACE"," ",73],["T_VARIABLE","$validatorFile",73],";",["T_WHITESPACE","\n\n    ",73],["T_DOC_COMMENT","\/**\n     * @var Json\n     *\/",75],["T_WHITESPACE","\n    ",77],["T_PRIVATE","private",78],["T_WHITESPACE"," ",78],["T_VARIABLE","$serializer",78],";",["T_WHITESPACE","\n\n    ",78],["T_DOC_COMMENT","\/**\n     * @var Filesystem\n     *\/",80],["T_WHITESPACE","\n    ",82],["T_PRIVATE","private",83],["T_WHITESPACE"," ",83],["T_VARIABLE","$filesystem",83],";",["T_WHITESPACE","\n\n    ",83],["T_DOC_COMMENT","\/**\n     * @param \\Magento\\Checkout\\Model\\Session $checkoutSession\n     * @param \\Magento\\Framework\\App\\Config\\ScopeConfigInterface $scopeConfig\n     * @param \\Magento\\Quote\\Model\\Quote\\Item\\OptionFactory $itemOptionFactory\n     * @param \\Magento\\MediaStorage\\Helper\\File\\Storage\\Database $coreFileStorageDatabase\n     * @param File\\ValidatorInfo $validatorInfo\n     * @param File\\ValidatorFile $validatorFile\n     * @param \\Magento\\Catalog\\Model\\Product\\Option\\UrlBuilder $urlBuilder\n     * @param \\Magento\\Framework\\Escaper $escaper\n     * @param array $data\n     * @param Filesystem $filesystem\n     * @param Json|null $serializer\n     * @SuppressWarnings(PHPMD.ExcessiveParameterList)\n     *\/",85],["T_WHITESPACE","\n    ",98],["T_PUBLIC","public",99],["T_WHITESPACE"," ",99],["T_FUNCTION","function",99],["T_WHITESPACE"," ",99],["T_STRING","__construct",99],"(",["T_WHITESPACE","\n        ",99],["T_NS_SEPARATOR","\\",100],["T_STRING","Magento",100],["T_NS_SEPARATOR","\\",100],["T_STRING","Checkout",100],["T_NS_SEPARATOR","\\",100],["T_STRING","Model",100],["T_NS_SEPARATOR","\\",100],["T_STRING","Session",100],["T_WHITESPACE"," ",100],["T_VARIABLE","$checkoutSession",100],",",["T_WHITESPACE","\n        ",100],["T_NS_SEPARATOR","\\",101],["T_STRING","Magento",101],["T_NS_SEPARATOR","\\",101],["T_STRING","Framework",101],["T_NS_SEPARATOR","\\",101],["T_STRING","App",101],["T_NS_SEPARATOR","\\",101],["T_STRING","Config",101],["T_NS_SEPARATOR","\\",101],["T_STRING","ScopeConfigInterface",101],["T_WHITESPACE"," ",101],["T_VARIABLE","$scopeConfig",101],",",["T_WHITESPACE","\n        ",101],["T_NS_SEPARATOR","\\",102],["T_STRING","Magento",102],["T_NS_SEPARATOR","\\",102],["T_STRING","Quote",102],["T_NS_SEPARATOR","\\",102],["T_STRING","Model",102],["T_NS_SEPARATOR","\\",102],["T_STRING","Quote",102],["T_NS_SEPARATOR","\\",102],["T_STRING","Item",102],["T_NS_SEPARATOR","\\",102],["T_STRING","OptionFactory",102],["T_WHITESPACE"," ",102],["T_VARIABLE","$itemOptionFactory",102],",",["T_WHITESPACE","\n        ",102],["T_NS_SEPARATOR","\\",103],["T_STRING","Magento",103],["T_NS_SEPARATOR","\\",103],["T_STRING","MediaStorage",103],["T_NS_SEPARATOR","\\",103],["T_STRING","Helper",103],["T_NS_SEPARATOR","\\",103],["T_STRING","File",103],["T_NS_SEPARATOR","\\",103],["T_STRING","Storage",103],["T_NS_SEPARATOR","\\",103],["T_STRING","Database",103],["T_WHITESPACE"," ",103],["T_VARIABLE","$coreFileStorageDatabase",103],",",["T_WHITESPACE","\n        ",103],["T_NS_SEPARATOR","\\",104],["T_STRING","Magento",104],["T_NS_SEPARATOR","\\",104],["T_STRING","Catalog",104],["T_NS_SEPARATOR","\\",104],["T_STRING","Model",104],["T_NS_SEPARATOR","\\",104],["T_STRING","Product",104],["T_NS_SEPARATOR","\\",104],["T_STRING","Option",104],["T_NS_SEPARATOR","\\",104],["T_STRING","Type",104],["T_NS_SEPARATOR","\\",104],["T_STRING","File",104],["T_NS_SEPARATOR","\\",104],["T_STRING","ValidatorInfo",104],["T_WHITESPACE"," ",104],["T_VARIABLE","$validatorInfo",104],",",["T_WHITESPACE","\n        ",104],["T_NS_SEPARATOR","\\",105],["T_STRING","Magento",105],["T_NS_SEPARATOR","\\",105],["T_STRING","Catalog",105],["T_NS_SEPARATOR","\\",105],["T_STRING","Model",105],["T_NS_SEPARATOR","\\",105],["T_STRING","Product",105],["T_NS_SEPARATOR","\\",105],["T_STRING","Option",105],["T_NS_SEPARATOR","\\",105],["T_STRING","Type",105],["T_NS_SEPARATOR","\\",105],["T_STRING","File",105],["T_NS_SEPARATOR","\\",105],["T_STRING","ValidatorFile",105],["T_WHITESPACE"," ",105],["T_VARIABLE","$validatorFile",105],",",["T_WHITESPACE","\n        ",105],["T_NS_SEPARATOR","\\",106],["T_STRING","Magento",106],["T_NS_SEPARATOR","\\",106],["T_STRING","Catalog",106],["T_NS_SEPARATOR","\\",106],["T_STRING","Model",106],["T_NS_SEPARATOR","\\",106],["T_STRING","Product",106],["T_NS_SEPARATOR","\\",106],["T_STRING","Option",106],["T_NS_SEPARATOR","\\",106],["T_STRING","UrlBuilder",106],["T_WHITESPACE"," ",106],["T_VARIABLE","$urlBuilder",106],",",["T_WHITESPACE","\n        ",106],["T_NS_SEPARATOR","\\",107],["T_STRING","Magento",107],["T_NS_SEPARATOR","\\",107],["T_STRING","Framework",107],["T_NS_SEPARATOR","\\",107],["T_STRING","Escaper",107],["T_WHITESPACE"," ",107],["T_VARIABLE","$escaper",107],",",["T_WHITESPACE","\n        ",107],["T_ARRAY","array",108],["T_WHITESPACE"," ",108],["T_VARIABLE","$data",108],["T_WHITESPACE"," ",108],"=",["T_WHITESPACE"," ",108],"[","]",",",["T_WHITESPACE","\n        ",108],["T_STRING","Filesystem",109],["T_WHITESPACE"," ",109],["T_VARIABLE","$filesystem",109],["T_WHITESPACE"," ",109],"=",["T_WHITESPACE"," ",109],["T_STRING","null",109],",",["T_WHITESPACE","\n        ",109],["T_STRING","Json",110],["T_WHITESPACE"," ",110],["T_VARIABLE","$serializer",110],["T_WHITESPACE"," ",110],"=",["T_WHITESPACE"," ",110],["T_STRING","null",110],["T_WHITESPACE","\n    ",110],")",["T_WHITESPACE"," ",111],"{",["T_WHITESPACE","\n        ",111],["T_VARIABLE","$this",112],["T_OBJECT_OPERATOR","->",112],["T_STRING","_itemOptionFactory",112],["T_WHITESPACE"," ",112],"=",["T_WHITESPACE"," ",112],["T_VARIABLE","$itemOptionFactory",112],";",["T_WHITESPACE","\n        ",112],["T_VARIABLE","$this",113],["T_OBJECT_OPERATOR","->",113],["T_STRING","_urlBuilder",113],["T_WHITESPACE"," ",113],"=",["T_WHITESPACE"," ",113],["T_VARIABLE","$urlBuilder",113],";",["T_WHITESPACE","\n        ",113],["T_VARIABLE","$this",114],["T_OBJECT_OPERATOR","->",114],["T_STRING","_escaper",114],["T_WHITESPACE"," ",114],"=",["T_WHITESPACE"," ",114],["T_VARIABLE","$escaper",114],";",["T_WHITESPACE","\n        ",114],["T_VARIABLE","$this",115],["T_OBJECT_OPERATOR","->",115],["T_STRING","_coreFileStorageDatabase",115],["T_WHITESPACE"," ",115],"=",["T_WHITESPACE"," ",115],["T_VARIABLE","$coreFileStorageDatabase",115],";",["T_WHITESPACE","\n        ",115],["T_VARIABLE","$this",116],["T_OBJECT_OPERATOR","->",116],["T_STRING","filesystem",116],["T_WHITESPACE"," ",116],"=",["T_WHITESPACE"," ",116],["T_VARIABLE","$filesystem",116],["T_WHITESPACE"," ",116],"?",":",["T_WHITESPACE"," ",116],["T_NS_SEPARATOR","\\",116],["T_STRING","Magento",116],["T_NS_SEPARATOR","\\",116],["T_STRING","Framework",116],["T_NS_SEPARATOR","\\",116],["T_STRING","App",116],["T_NS_SEPARATOR","\\",116],["T_STRING","ObjectManager",116],["T_DOUBLE_COLON","::",116],["T_STRING","getInstance",116],"(",")",["T_OBJECT_OPERATOR","->",116],["T_STRING","get",116],"(",["T_STRING","Filesystem",116],["T_DOUBLE_COLON","::",116],["T_CLASS","class",116],")",";",["T_WHITESPACE","\n        ",116],["T_VARIABLE","$this",117],["T_OBJECT_OPERATOR","->",117],["T_STRING","_rootDirectory",117],["T_WHITESPACE"," ",117],"=",["T_WHITESPACE"," ",117],["T_VARIABLE","$this",117],["T_OBJECT_OPERATOR","->",117],["T_STRING","filesystem",117],["T_OBJECT_OPERATOR","->",117],["T_STRING","getDirectoryRead",117],"(",["T_STRING","DirectoryList",117],["T_DOUBLE_COLON","::",117],["T_STRING","MEDIA",117],")",";",["T_WHITESPACE","\n        ",117],["T_VARIABLE","$this",118],["T_OBJECT_OPERATOR","->",118],["T_STRING","validatorInfo",118],["T_WHITESPACE"," ",118],"=",["T_WHITESPACE"," ",118],["T_VARIABLE","$validatorInfo",118],";",["T_WHITESPACE","\n        ",118],["T_VARIABLE","$this",119],["T_OBJECT_OPERATOR","->",119],["T_STRING","validatorFile",119],["T_WHITESPACE"," ",119],"=",["T_WHITESPACE"," ",119],["T_VARIABLE","$validatorFile",119],";",["T_WHITESPACE","\n        ",119],["T_VARIABLE","$this",120],["T_OBJECT_OPERATOR","->",120],["T_STRING","serializer",120],["T_WHITESPACE"," ",120],"=",["T_WHITESPACE"," ",120],["T_VARIABLE","$serializer",120],["T_WHITESPACE"," ",120],"?",["T_WHITESPACE"," ",120],["T_VARIABLE","$serializer",120],["T_WHITESPACE"," ",120],":",["T_WHITESPACE"," ",120],["T_STRING","ObjectManager",120],["T_DOUBLE_COLON","::",120],["T_STRING","getInstance",120],"(",")",["T_OBJECT_OPERATOR","->",120],["T_STRING","get",120],"(",["T_STRING","Json",120],["T_DOUBLE_COLON","::",120],["T_CLASS","class",120],")",";",["T_WHITESPACE","\n        ",120],["T_STRING","parent",121],["T_DOUBLE_COLON","::",121],["T_STRING","__construct",121],"(",["T_VARIABLE","$checkoutSession",121],",",["T_WHITESPACE"," ",121],["T_VARIABLE","$scopeConfig",121],",",["T_WHITESPACE"," ",121],["T_VARIABLE","$data",121],")",";",["T_WHITESPACE","\n    ",121],"}",["T_WHITESPACE","\n\n    ",122],["T_DOC_COMMENT","\/**\n     * Flag to indicate that custom option has own customized output (blocks, native html etc.)\n     *\n     * @return boolean\n     *\/",124],["T_WHITESPACE","\n    ",128],["T_PUBLIC","public",129],["T_WHITESPACE"," ",129],["T_FUNCTION","function",129],["T_WHITESPACE"," ",129],["T_STRING","isCustomizedView",129],"(",")",["T_WHITESPACE","\n    ",129],"{",["T_WHITESPACE","\n        ",130],["T_RETURN","return",131],["T_WHITESPACE"," ",131],["T_STRING","true",131],";",["T_WHITESPACE","\n    ",131],"}",["T_WHITESPACE","\n\n    ",132],["T_DOC_COMMENT","\/**\n     * Return option html\n     *\n     * @param array $optionInfo\n     * @return string|void\n     *\/",134],["T_WHITESPACE","\n    ",139],["T_PUBLIC","public",140],["T_WHITESPACE"," ",140],["T_FUNCTION","function",140],["T_WHITESPACE"," ",140],["T_STRING","getCustomizedView",140],"(",["T_VARIABLE","$optionInfo",140],")",["T_WHITESPACE","\n    ",140],"{",["T_WHITESPACE","\n        ",141],["T_TRY","try",142],["T_WHITESPACE"," ",142],"{",["T_WHITESPACE","\n            ",142],["T_IF","if",143],["T_WHITESPACE"," ",143],"(",["T_ISSET","isset",143],"(",["T_VARIABLE","$optionInfo",143],"[",["T_CONSTANT_ENCAPSED_STRING","'option_value'",143],"]",")",")",["T_WHITESPACE"," ",143],"{",["T_WHITESPACE","\n                ",143],["T_RETURN","return",144],["T_WHITESPACE"," ",144],["T_VARIABLE","$this",144],["T_OBJECT_OPERATOR","->",144],["T_STRING","_getOptionHtml",144],"(",["T_VARIABLE","$optionInfo",144],"[",["T_CONSTANT_ENCAPSED_STRING","'option_value'",144],"]",")",";",["T_WHITESPACE","\n            ",144],"}",["T_WHITESPACE"," ",145],["T_ELSEIF","elseif",145],["T_WHITESPACE"," ",145],"(",["T_ISSET","isset",145],"(",["T_VARIABLE","$optionInfo",145],"[",["T_CONSTANT_ENCAPSED_STRING","'value'",145],"]",")",")",["T_WHITESPACE"," ",145],"{",["T_WHITESPACE","\n                ",145],["T_RETURN","return",146],["T_WHITESPACE"," ",146],["T_VARIABLE","$optionInfo",146],"[",["T_CONSTANT_ENCAPSED_STRING","'value'",146],"]",";",["T_WHITESPACE","\n            ",146],"}",["T_WHITESPACE","\n        ",147],"}",["T_WHITESPACE"," ",148],["T_CATCH","catch",148],["T_WHITESPACE"," ",148],"(",["T_NS_SEPARATOR","\\",148],["T_STRING","Exception",148],["T_WHITESPACE"," ",148],["T_VARIABLE","$e",148],")",["T_WHITESPACE"," ",148],"{",["T_WHITESPACE","\n            ",148],["T_RETURN","return",149],["T_WHITESPACE"," ",149],["T_VARIABLE","$optionInfo",149],"[",["T_CONSTANT_ENCAPSED_STRING","'value'",149],"]",";",["T_WHITESPACE","\n        ",149],"}",["T_WHITESPACE","\n    ",150],"}",["T_WHITESPACE","\n\n    ",151],["T_DOC_COMMENT","\/**\n     * Returns additional params for processing options\n     *\n     * @return \\Magento\\Framework\\DataObject\n     *\/",153],["T_WHITESPACE","\n    ",157],["T_PROTECTED","protected",158],["T_WHITESPACE"," ",158],["T_FUNCTION","function",158],["T_WHITESPACE"," ",158],["T_STRING","_getProcessingParams",158],"(",")",["T_WHITESPACE","\n    ",158],"{",["T_WHITESPACE","\n        ",159],["T_VARIABLE","$buyRequest",160],["T_WHITESPACE"," ",160],"=",["T_WHITESPACE"," ",160],["T_VARIABLE","$this",160],["T_OBJECT_OPERATOR","->",160],["T_STRING","getRequest",160],"(",")",";",["T_WHITESPACE","\n        ",160],["T_VARIABLE","$params",161],["T_WHITESPACE"," ",161],"=",["T_WHITESPACE"," ",161],["T_VARIABLE","$buyRequest",161],["T_OBJECT_OPERATOR","->",161],["T_STRING","getData",161],"(",["T_CONSTANT_ENCAPSED_STRING","'_processing_params'",161],")",";",["T_WHITESPACE","\n        ",161],["T_COMMENT","\/*\n         * Notice check for params to be \\Magento\\Framework\\DataObject - by using object we protect from\n         * params being forged and contain data from user frontend input\n         *\/",162],["T_WHITESPACE","\n        ",165],["T_IF","if",166],["T_WHITESPACE"," ",166],"(",["T_VARIABLE","$params",166],["T_WHITESPACE"," ",166],["T_INSTANCEOF","instanceof",166],["T_WHITESPACE"," ",166],["T_NS_SEPARATOR","\\",166],["T_STRING","Magento",166],["T_NS_SEPARATOR","\\",166],["T_STRING","Framework",166],["T_NS_SEPARATOR","\\",166],["T_STRING","DataObject",166],")",["T_WHITESPACE"," ",166],"{",["T_WHITESPACE","\n            ",166],["T_RETURN","return",167],["T_WHITESPACE"," ",167],["T_VARIABLE","$params",167],";",["T_WHITESPACE","\n        ",167],"}",["T_WHITESPACE","\n        ",168],["T_RETURN","return",169],["T_WHITESPACE"," ",169],["T_NEW","new",169],["T_WHITESPACE"," ",169],["T_NS_SEPARATOR","\\",169],["T_STRING","Magento",169],["T_NS_SEPARATOR","\\",169],["T_STRING","Framework",169],["T_NS_SEPARATOR","\\",169],["T_STRING","DataObject",169],"(",")",";",["T_WHITESPACE","\n    ",169],"}",["T_WHITESPACE","\n\n    ",170],["T_DOC_COMMENT","\/**\n     * Returns file info array if we need to get file from already existing file.\n     * Or returns null, if we need to get file from uploaded array.\n     *\n     * @return null|array\n     *\/",172],["T_WHITESPACE","\n    ",177],["T_PROTECTED","protected",178],["T_WHITESPACE"," ",178],["T_FUNCTION","function",178],["T_WHITESPACE"," ",178],["T_STRING","_getCurrentConfigFileInfo",178],"(",")",["T_WHITESPACE","\n    ",178],"{",["T_WHITESPACE","\n        ",179],["T_VARIABLE","$option",180],["T_WHITESPACE"," ",180],"=",["T_WHITESPACE"," ",180],["T_VARIABLE","$this",180],["T_OBJECT_OPERATOR","->",180],["T_STRING","getOption",180],"(",")",";",["T_WHITESPACE","\n        ",180],["T_VARIABLE","$optionId",181],["T_WHITESPACE"," ",181],"=",["T_WHITESPACE"," ",181],["T_VARIABLE","$option",181],["T_OBJECT_OPERATOR","->",181],["T_STRING","getId",181],"(",")",";",["T_WHITESPACE","\n        ",181],["T_VARIABLE","$processingParams",182],["T_WHITESPACE"," ",182],"=",["T_WHITESPACE"," ",182],["T_VARIABLE","$this",182],["T_OBJECT_OPERATOR","->",182],["T_STRING","_getProcessingParams",182],"(",")",";",["T_WHITESPACE","\n        ",182],["T_VARIABLE","$buyRequest",183],["T_WHITESPACE"," ",183],"=",["T_WHITESPACE"," ",183],["T_VARIABLE","$this",183],["T_OBJECT_OPERATOR","->",183],["T_STRING","getRequest",183],"(",")",";",["T_WHITESPACE","\n\n        ",183],["T_COMMENT","\/\/ Check maybe restore file from config requested\n",185],["T_WHITESPACE","        ",186],["T_VARIABLE","$optionActionKey",186],["T_WHITESPACE"," ",186],"=",["T_WHITESPACE"," ",186],["T_CONSTANT_ENCAPSED_STRING","'options_'",186],["T_WHITESPACE"," ",186],".",["T_WHITESPACE"," ",186],["T_VARIABLE","$optionId",186],["T_WHITESPACE"," ",186],".",["T_WHITESPACE"," ",186],["T_CONSTANT_ENCAPSED_STRING","'_file_action'",186],";",["T_WHITESPACE","\n        ",186],["T_IF","if",187],["T_WHITESPACE"," ",187],"(",["T_VARIABLE","$buyRequest",187],["T_OBJECT_OPERATOR","->",187],["T_STRING","getData",187],"(",["T_VARIABLE","$optionActionKey",187],")",["T_WHITESPACE"," ",187],["T_IS_EQUAL","==",187],["T_WHITESPACE"," ",187],["T_CONSTANT_ENCAPSED_STRING","'save_old'",187],")",["T_WHITESPACE"," ",187],"{",["T_WHITESPACE","\n            ",187],["T_VARIABLE","$fileInfo",188],["T_WHITESPACE"," ",188],"=",["T_WHITESPACE"," ",188],"[","]",";",["T_WHITESPACE","\n            ",188],["T_VARIABLE","$currentConfig",189],["T_WHITESPACE"," ",189],"=",["T_WHITESPACE"," ",189],["T_VARIABLE","$processingParams",189],["T_OBJECT_OPERATOR","->",189],["T_STRING","getCurrentConfig",189],"(",")",";",["T_WHITESPACE","\n            ",189],["T_IF","if",190],["T_WHITESPACE"," ",190],"(",["T_VARIABLE","$currentConfig",190],")",["T_WHITESPACE"," ",190],"{",["T_WHITESPACE","\n                ",190],["T_VARIABLE","$fileInfo",191],["T_WHITESPACE"," ",191],"=",["T_WHITESPACE"," ",191],["T_VARIABLE","$currentConfig",191],["T_OBJECT_OPERATOR","->",191],["T_STRING","getData",191],"(",["T_CONSTANT_ENCAPSED_STRING","'options\/'",191],["T_WHITESPACE"," ",191],".",["T_WHITESPACE"," ",191],["T_VARIABLE","$optionId",191],")",";",["T_WHITESPACE","\n            ",191],"}",["T_WHITESPACE","\n            ",192],["T_RETURN","return",193],["T_WHITESPACE"," ",193],["T_VARIABLE","$fileInfo",193],";",["T_WHITESPACE","\n        ",193],"}",["T_WHITESPACE","\n        ",194],["T_RETURN","return",195],["T_WHITESPACE"," ",195],["T_STRING","null",195],";",["T_WHITESPACE","\n    ",195],"}",["T_WHITESPACE","\n\n    ",196],["T_DOC_COMMENT","\/**\n     * Validate user input for option\n     *\n     * @param array $values All product option values, i.e. array (option_id => mixed, option_id => mixed...)\n     * @return $this\n     * @throws LocalizedException\n     * @throws \\Exception\n     * @SuppressWarnings(PHPMD.CyclomaticComplexity)\n     *\/",198],["T_WHITESPACE","\n    ",206],["T_PUBLIC","public",207],["T_WHITESPACE"," ",207],["T_FUNCTION","function",207],["T_WHITESPACE"," ",207],["T_STRING","validateUserValue",207],"(",["T_VARIABLE","$values",207],")",["T_WHITESPACE","\n    ",207],"{",["T_WHITESPACE","\n        ",208],["T_VARIABLE","$this",209],["T_OBJECT_OPERATOR","->",209],["T_STRING","_checkoutSession",209],["T_OBJECT_OPERATOR","->",209],["T_STRING","setUseNotice",209],"(",["T_STRING","false",209],")",";",["T_WHITESPACE","\n\n        ",209],["T_VARIABLE","$this",211],["T_OBJECT_OPERATOR","->",211],["T_STRING","setIsValid",211],"(",["T_STRING","true",211],")",";",["T_WHITESPACE","\n        ",211],["T_VARIABLE","$option",212],["T_WHITESPACE"," ",212],"=",["T_WHITESPACE"," ",212],["T_VARIABLE","$this",212],["T_OBJECT_OPERATOR","->",212],["T_STRING","getOption",212],"(",")",";",["T_WHITESPACE","\n\n        ",212],["T_COMMENT","\/*\n         * Check whether we receive uploaded file or restore file by: reorder\/edit configuration or\n         * previous configuration with no newly uploaded file\n         *\/",214],["T_WHITESPACE","\n        ",217],["T_VARIABLE","$fileInfo",218],["T_WHITESPACE"," ",218],"=",["T_WHITESPACE"," ",218],["T_STRING","null",218],";",["T_WHITESPACE","\n        ",218],["T_IF","if",219],["T_WHITESPACE"," ",219],"(",["T_ISSET","isset",219],"(",["T_VARIABLE","$values",219],"[",["T_VARIABLE","$option",219],["T_OBJECT_OPERATOR","->",219],["T_STRING","getId",219],"(",")","]",")",["T_WHITESPACE"," ",219],["T_BOOLEAN_AND","&&",219],["T_WHITESPACE"," ",219],["T_STRING","is_array",219],"(",["T_VARIABLE","$values",219],"[",["T_VARIABLE","$option",219],["T_OBJECT_OPERATOR","->",219],["T_STRING","getId",219],"(",")","]",")",")",["T_WHITESPACE"," ",219],"{",["T_WHITESPACE","\n            ",219],["T_COMMENT","\/\/ Legacy style, file info comes in array with option id index\n",220],["T_WHITESPACE","            ",221],["T_VARIABLE","$fileInfo",221],["T_WHITESPACE"," ",221],"=",["T_WHITESPACE"," ",221],["T_VARIABLE","$values",221],"[",["T_VARIABLE","$option",221],["T_OBJECT_OPERATOR","->",221],["T_STRING","getId",221],"(",")","]",";",["T_WHITESPACE","\n        ",221],"}",["T_WHITESPACE"," ",222],["T_ELSE","else",222],["T_WHITESPACE"," ",222],"{",["T_WHITESPACE","\n            ",222],["T_COMMENT","\/*\n             * New recommended style - file info comes in request processing parameters and we\n             * sure that this file info originates from Magento, not from manually formed POST request\n             *\/",223],["T_WHITESPACE","\n            ",226],["T_VARIABLE","$fileInfo",227],["T_WHITESPACE"," ",227],"=",["T_WHITESPACE"," ",227],["T_VARIABLE","$this",227],["T_OBJECT_OPERATOR","->",227],["T_STRING","_getCurrentConfigFileInfo",227],"(",")",";",["T_WHITESPACE","\n        ",227],"}",["T_WHITESPACE","\n        ",228],["T_IF","if",229],["T_WHITESPACE"," ",229],"(",["T_VARIABLE","$fileInfo",229],["T_WHITESPACE"," ",229],["T_IS_NOT_IDENTICAL","!==",229],["T_WHITESPACE"," ",229],["T_STRING","null",229],")",["T_WHITESPACE"," ",229],"{",["T_WHITESPACE","\n            ",229],["T_TRY","try",230],["T_WHITESPACE"," ",230],"{",["T_WHITESPACE","\n                ",230],["T_VARIABLE","$value",231],["T_WHITESPACE"," ",231],"=",["T_WHITESPACE"," ",231],["T_VARIABLE","$this",231],["T_OBJECT_OPERATOR","->",231],["T_STRING","validatorInfo",231],["T_OBJECT_OPERATOR","->",231],["T_STRING","setUseQuotePath",231],"(",["T_VARIABLE","$this",231],["T_OBJECT_OPERATOR","->",231],["T_STRING","getUseQuotePath",231],"(",")",")",["T_WHITESPACE","\n                    ",231],["T_OBJECT_OPERATOR","->",232],["T_STRING","validate",232],"(",["T_VARIABLE","$fileInfo",232],",",["T_WHITESPACE"," ",232],["T_VARIABLE","$option",232],")",["T_WHITESPACE"," ",232],"?",["T_WHITESPACE"," ",232],["T_VARIABLE","$fileInfo",232],["T_WHITESPACE"," ",232],":",["T_WHITESPACE"," ",232],["T_STRING","null",232],";",["T_WHITESPACE","\n                ",232],["T_VARIABLE","$this",233],["T_OBJECT_OPERATOR","->",233],["T_STRING","setUserValue",233],"(",["T_VARIABLE","$value",233],")",";",["T_WHITESPACE","\n                ",233],["T_RETURN","return",234],["T_WHITESPACE"," ",234],["T_VARIABLE","$this",234],";",["T_WHITESPACE","\n            ",234],"}",["T_WHITESPACE"," ",235],["T_CATCH","catch",235],["T_WHITESPACE"," ",235],"(",["T_STRING","LocalizedException",235],["T_WHITESPACE"," ",235],["T_VARIABLE","$exception",235],")",["T_WHITESPACE"," ",235],"{",["T_WHITESPACE","\n                ",235],["T_VARIABLE","$this",236],["T_OBJECT_OPERATOR","->",236],["T_STRING","setIsValid",236],"(",["T_STRING","false",236],")",";",["T_WHITESPACE","\n                ",236],["T_THROW","throw",237],["T_WHITESPACE"," ",237],["T_VARIABLE","$exception",237],";",["T_WHITESPACE","\n            ",237],"}",["T_WHITESPACE","\n        ",238],"}",["T_WHITESPACE","\n\n        ",239],["T_COMMENT","\/\/ Process new uploaded file\n",241],["T_WHITESPACE","        ",242],["T_TRY","try",242],["T_WHITESPACE"," ",242],"{",["T_WHITESPACE","\n            ",242],["T_VARIABLE","$value",243],["T_WHITESPACE"," ",243],"=",["T_WHITESPACE"," ",243],["T_VARIABLE","$this",243],["T_OBJECT_OPERATOR","->",243],["T_STRING","validatorFile",243],["T_OBJECT_OPERATOR","->",243],["T_STRING","setProduct",243],"(",["T_VARIABLE","$this",243],["T_OBJECT_OPERATOR","->",243],["T_STRING","getProduct",243],"(",")",")",["T_WHITESPACE","\n                ",243],["T_OBJECT_OPERATOR","->",244],["T_STRING","validate",244],"(",["T_VARIABLE","$this",244],["T_OBJECT_OPERATOR","->",244],["T_STRING","_getProcessingParams",244],"(",")",",",["T_WHITESPACE"," ",244],["T_VARIABLE","$option",244],")",";",["T_WHITESPACE","\n            ",244],["T_VARIABLE","$this",245],["T_OBJECT_OPERATOR","->",245],["T_STRING","setUserValue",245],"(",["T_VARIABLE","$value",245],")",";",["T_WHITESPACE","\n        ",245],"}",["T_WHITESPACE"," ",246],["T_CATCH","catch",246],["T_WHITESPACE"," ",246],"(",["T_STRING","ProductException",246],["T_WHITESPACE"," ",246],["T_VARIABLE","$e",246],")",["T_WHITESPACE"," ",246],"{",["T_WHITESPACE","\n            ",246],["T_SWITCH","switch",247],["T_WHITESPACE"," ",247],"(",["T_VARIABLE","$this",247],["T_OBJECT_OPERATOR","->",247],["T_STRING","getProcessMode",247],"(",")",")",["T_WHITESPACE"," ",247],"{",["T_WHITESPACE","\n                ",247],["T_CASE","case",248],["T_WHITESPACE"," ",248],["T_NS_SEPARATOR","\\",248],["T_STRING","Magento",248],["T_NS_SEPARATOR","\\",248],["T_STRING","Catalog",248],["T_NS_SEPARATOR","\\",248],["T_STRING","Model",248],["T_NS_SEPARATOR","\\",248],["T_STRING","Product",248],["T_NS_SEPARATOR","\\",248],["T_STRING","Type",248],["T_NS_SEPARATOR","\\",248],["T_STRING","AbstractType",248],["T_DOUBLE_COLON","::",248],["T_STRING","PROCESS_MODE_FULL",248],":",["T_WHITESPACE","\n                    ",248],["T_THROW","throw",249],["T_WHITESPACE"," ",249],["T_NEW","new",249],["T_WHITESPACE"," ",249],["T_STRING","LocalizedException",249],"(",["T_STRING","__",249],"(",["T_CONSTANT_ENCAPSED_STRING","'Please specify product\\'s required option(s).'",249],")",")",";",["T_WHITESPACE","\n                    ",249],["T_BREAK","break",250],";",["T_WHITESPACE","\n                ",250],["T_DEFAULT","default",251],":",["T_WHITESPACE","\n                    ",251],["T_VARIABLE","$this",252],["T_OBJECT_OPERATOR","->",252],["T_STRING","setUserValue",252],"(",["T_STRING","null",252],")",";",["T_WHITESPACE","\n                    ",252],["T_BREAK","break",253],";",["T_WHITESPACE","\n            ",253],"}",["T_WHITESPACE","\n        ",254],"}",["T_WHITESPACE"," ",255],["T_CATCH","catch",255],["T_WHITESPACE"," ",255],"(",["T_NS_SEPARATOR","\\",255],["T_STRING","Magento",255],["T_NS_SEPARATOR","\\",255],["T_STRING","Framework",255],["T_NS_SEPARATOR","\\",255],["T_STRING","Validator",255],["T_NS_SEPARATOR","\\",255],["T_STRING","Exception",255],["T_WHITESPACE"," ",255],["T_VARIABLE","$e",255],")",["T_WHITESPACE"," ",255],"{",["T_WHITESPACE","\n            ",255],["T_VARIABLE","$this",256],["T_OBJECT_OPERATOR","->",256],["T_STRING","setUserValue",256],"(",["T_STRING","null",256],")",";",["T_WHITESPACE","\n        ",256],"}",["T_WHITESPACE"," ",257],["T_CATCH","catch",257],["T_WHITESPACE"," ",257],"(",["T_STRING","LocalizedException",257],["T_WHITESPACE"," ",257],["T_VARIABLE","$e",257],")",["T_WHITESPACE"," ",257],"{",["T_WHITESPACE","\n            ",257],["T_VARIABLE","$this",258],["T_OBJECT_OPERATOR","->",258],["T_STRING","setIsValid",258],"(",["T_STRING","false",258],")",";",["T_WHITESPACE","\n            ",258],["T_THROW","throw",259],["T_WHITESPACE"," ",259],["T_NEW","new",259],["T_WHITESPACE"," ",259],["T_STRING","LocalizedException",259],"(",["T_STRING","__",259],"(",["T_VARIABLE","$e",259],["T_OBJECT_OPERATOR","->",259],["T_STRING","getMessage",259],"(",")",")",")",";",["T_WHITESPACE","\n        ",259],"}",["T_WHITESPACE"," ",260],["T_CATCH","catch",260],["T_WHITESPACE"," ",260],"(",["T_NS_SEPARATOR","\\",260],["T_STRING","Exception",260],["T_WHITESPACE"," ",260],["T_VARIABLE","$e",260],")",["T_WHITESPACE"," ",260],"{",["T_WHITESPACE","\n            ",260],["T_IF","if",261],["T_WHITESPACE"," ",261],"(",["T_VARIABLE","$this",261],["T_OBJECT_OPERATOR","->",261],["T_STRING","getSkipCheckRequiredOption",261],"(",")",")",["T_WHITESPACE"," ",261],"{",["T_WHITESPACE","\n                ",261],["T_VARIABLE","$this",262],["T_OBJECT_OPERATOR","->",262],["T_STRING","setUserValue",262],"(",["T_STRING","null",262],")",";",["T_WHITESPACE","\n            ",262],"}",["T_WHITESPACE"," ",263],["T_ELSE","else",263],["T_WHITESPACE"," ",263],"{",["T_WHITESPACE","\n                ",263],["T_THROW","throw",264],["T_WHITESPACE"," ",264],["T_NEW","new",264],["T_WHITESPACE"," ",264],["T_STRING","LocalizedException",264],"(",["T_STRING","__",264],"(",["T_VARIABLE","$e",264],["T_OBJECT_OPERATOR","->",264],["T_STRING","getMessage",264],"(",")",")",")",";",["T_WHITESPACE","\n            ",264],"}",["T_WHITESPACE","\n        ",265],"}",["T_WHITESPACE","\n        ",266],["T_RETURN","return",267],["T_WHITESPACE"," ",267],["T_VARIABLE","$this",267],";",["T_WHITESPACE","\n    ",267],"}",["T_WHITESPACE","\n\n    ",268],["T_DOC_COMMENT","\/**\n     * Prepare option value for cart\n     *\n     * @return string|null Prepared option value\n     *\/",270],["T_WHITESPACE","\n    ",274],["T_PUBLIC","public",275],["T_WHITESPACE"," ",275],["T_FUNCTION","function",275],["T_WHITESPACE"," ",275],["T_STRING","prepareForCart",275],"(",")",["T_WHITESPACE","\n    ",275],"{",["T_WHITESPACE","\n        ",276],["T_VARIABLE","$option",277],["T_WHITESPACE"," ",277],"=",["T_WHITESPACE"," ",277],["T_VARIABLE","$this",277],["T_OBJECT_OPERATOR","->",277],["T_STRING","getOption",277],"(",")",";",["T_WHITESPACE","\n        ",277],["T_VARIABLE","$optionId",278],["T_WHITESPACE"," ",278],"=",["T_WHITESPACE"," ",278],["T_VARIABLE","$option",278],["T_OBJECT_OPERATOR","->",278],["T_STRING","getId",278],"(",")",";",["T_WHITESPACE","\n        ",278],["T_VARIABLE","$buyRequest",279],["T_WHITESPACE"," ",279],"=",["T_WHITESPACE"," ",279],["T_VARIABLE","$this",279],["T_OBJECT_OPERATOR","->",279],["T_STRING","getRequest",279],"(",")",";",["T_WHITESPACE","\n\n        ",279],["T_COMMENT","\/\/ Prepare value and fill buyRequest with option\n",281],["T_WHITESPACE","        ",282],["T_VARIABLE","$requestOptions",282],["T_WHITESPACE"," ",282],"=",["T_WHITESPACE"," ",282],["T_VARIABLE","$buyRequest",282],["T_OBJECT_OPERATOR","->",282],["T_STRING","getOptions",282],"(",")",";",["T_WHITESPACE","\n        ",282],["T_IF","if",283],["T_WHITESPACE"," ",283],"(",["T_VARIABLE","$this",283],["T_OBJECT_OPERATOR","->",283],["T_STRING","getIsValid",283],"(",")",["T_WHITESPACE"," ",283],["T_BOOLEAN_AND","&&",283],["T_WHITESPACE"," ",283],["T_VARIABLE","$this",283],["T_OBJECT_OPERATOR","->",283],["T_STRING","getUserValue",283],"(",")",["T_WHITESPACE"," ",283],["T_IS_NOT_IDENTICAL","!==",283],["T_WHITESPACE"," ",283],["T_STRING","null",283],")",["T_WHITESPACE"," ",283],"{",["T_WHITESPACE","\n            ",283],["T_VARIABLE","$value",284],["T_WHITESPACE"," ",284],"=",["T_WHITESPACE"," ",284],["T_VARIABLE","$this",284],["T_OBJECT_OPERATOR","->",284],["T_STRING","getUserValue",284],"(",")",";",["T_WHITESPACE","\n\n            ",284],["T_COMMENT","\/\/ Save option in request, because we have no $_FILES['options']\n",286],["T_WHITESPACE","            ",287],["T_VARIABLE","$requestOptions",287],"[",["T_VARIABLE","$this",287],["T_OBJECT_OPERATOR","->",287],["T_STRING","getOption",287],"(",")",["T_OBJECT_OPERATOR","->",287],["T_STRING","getId",287],"(",")","]",["T_WHITESPACE"," ",287],"=",["T_WHITESPACE"," ",287],["T_VARIABLE","$value",287],";",["T_WHITESPACE","\n            ",287],["T_VARIABLE","$result",288],["T_WHITESPACE"," ",288],"=",["T_WHITESPACE"," ",288],["T_VARIABLE","$this",288],["T_OBJECT_OPERATOR","->",288],["T_STRING","serializer",288],["T_OBJECT_OPERATOR","->",288],["T_STRING","serialize",288],"(",["T_VARIABLE","$value",288],")",";",["T_WHITESPACE","\n        ",288],"}",["T_WHITESPACE"," ",289],["T_ELSE","else",289],["T_WHITESPACE"," ",289],"{",["T_WHITESPACE","\n            ",289],["T_COMMENT","\/*\n             * Clear option info from request, so it won't be stored in our db upon\n             * unsuccessful validation. Otherwise some bad file data can happen in buyRequest\n             * and be used later in reorders and reconfigurations.\n             *\/",290],["T_WHITESPACE","\n            ",294],["T_IF","if",295],["T_WHITESPACE"," ",295],"(",["T_STRING","is_array",295],"(",["T_VARIABLE","$requestOptions",295],")",")",["T_WHITESPACE"," ",295],"{",["T_WHITESPACE","\n                ",295],["T_UNSET","unset",296],"(",["T_VARIABLE","$requestOptions",296],"[",["T_VARIABLE","$this",296],["T_OBJECT_OPERATOR","->",296],["T_STRING","getOption",296],"(",")",["T_OBJECT_OPERATOR","->",296],["T_STRING","getId",296],"(",")","]",")",";",["T_WHITESPACE","\n            ",296],"}",["T_WHITESPACE","\n            ",297],["T_VARIABLE","$result",298],["T_WHITESPACE"," ",298],"=",["T_WHITESPACE"," ",298],["T_STRING","null",298],";",["T_WHITESPACE","\n        ",298],"}",["T_WHITESPACE","\n        ",299],["T_VARIABLE","$buyRequest",300],["T_OBJECT_OPERATOR","->",300],["T_STRING","setOptions",300],"(",["T_VARIABLE","$requestOptions",300],")",";",["T_WHITESPACE","\n\n        ",300],["T_COMMENT","\/\/ Clear action key from buy request - we won't need it anymore\n",302],["T_WHITESPACE","        ",303],["T_VARIABLE","$optionActionKey",303],["T_WHITESPACE"," ",303],"=",["T_WHITESPACE"," ",303],["T_CONSTANT_ENCAPSED_STRING","'options_'",303],["T_WHITESPACE"," ",303],".",["T_WHITESPACE"," ",303],["T_VARIABLE","$optionId",303],["T_WHITESPACE"," ",303],".",["T_WHITESPACE"," ",303],["T_CONSTANT_ENCAPSED_STRING","'_file_action'",303],";",["T_WHITESPACE","\n        ",303],["T_VARIABLE","$buyRequest",304],["T_OBJECT_OPERATOR","->",304],["T_STRING","unsetData",304],"(",["T_VARIABLE","$optionActionKey",304],")",";",["T_WHITESPACE","\n\n        ",304],["T_RETURN","return",306],["T_WHITESPACE"," ",306],["T_VARIABLE","$result",306],";",["T_WHITESPACE","\n    ",306],"}",["T_WHITESPACE","\n\n    ",307],["T_DOC_COMMENT","\/**\n     * Return formatted option value for quote option\n     *\n     * @param string $optionValue Prepared for cart option value\n     * @return string\n     *\/",309],["T_WHITESPACE","\n    ",314],["T_PUBLIC","public",315],["T_WHITESPACE"," ",315],["T_FUNCTION","function",315],["T_WHITESPACE"," ",315],["T_STRING","getFormattedOptionValue",315],"(",["T_VARIABLE","$optionValue",315],")",["T_WHITESPACE","\n    ",315],"{",["T_WHITESPACE","\n        ",316],["T_IF","if",317],["T_WHITESPACE"," ",317],"(",["T_VARIABLE","$this",317],["T_OBJECT_OPERATOR","->",317],["T_STRING","_formattedOptionValue",317],["T_WHITESPACE"," ",317],["T_IS_IDENTICAL","===",317],["T_WHITESPACE"," ",317],["T_STRING","null",317],")",["T_WHITESPACE"," ",317],"{",["T_WHITESPACE","\n            ",317],["T_TRY","try",318],["T_WHITESPACE"," ",318],"{",["T_WHITESPACE","\n                ",318],["T_VARIABLE","$value",319],["T_WHITESPACE"," ",319],"=",["T_WHITESPACE"," ",319],["T_VARIABLE","$this",319],["T_OBJECT_OPERATOR","->",319],["T_STRING","serializer",319],["T_OBJECT_OPERATOR","->",319],["T_STRING","unserialize",319],"(",["T_VARIABLE","$optionValue",319],")",";",["T_WHITESPACE","\n\n                ",319],["T_VARIABLE","$customOptionUrlParams",321],["T_WHITESPACE"," ",321],"=",["T_WHITESPACE"," ",321],["T_VARIABLE","$this",321],["T_OBJECT_OPERATOR","->",321],["T_STRING","getCustomOptionUrlParams",321],"(",")",["T_WHITESPACE"," ",321],"?",["T_WHITESPACE"," ",321],["T_VARIABLE","$this",321],["T_OBJECT_OPERATOR","->",321],["T_STRING","getCustomOptionUrlParams",321],"(",")",["T_WHITESPACE"," ",321],":",["T_WHITESPACE"," ",321],"[",["T_WHITESPACE","\n                    ",321],["T_CONSTANT_ENCAPSED_STRING","'id'",322],["T_WHITESPACE"," ",322],["T_DOUBLE_ARROW","=>",322],["T_WHITESPACE"," ",322],["T_VARIABLE","$this",322],["T_OBJECT_OPERATOR","->",322],["T_STRING","getConfigurationItemOption",322],"(",")",["T_OBJECT_OPERATOR","->",322],["T_STRING","getId",322],"(",")",",",["T_WHITESPACE","\n                    ",322],["T_CONSTANT_ENCAPSED_STRING","'key'",323],["T_WHITESPACE"," ",323],["T_DOUBLE_ARROW","=>",323],["T_WHITESPACE"," ",323],["T_VARIABLE","$value",323],"[",["T_CONSTANT_ENCAPSED_STRING","'secret_key'",323],"]",["T_WHITESPACE","\n                ",323],"]",";",["T_WHITESPACE","\n\n                ",324],["T_VARIABLE","$value",326],"[",["T_CONSTANT_ENCAPSED_STRING","'url'",326],"]",["T_WHITESPACE"," ",326],"=",["T_WHITESPACE"," ",326],"[",["T_CONSTANT_ENCAPSED_STRING","'route'",326],["T_WHITESPACE"," ",326],["T_DOUBLE_ARROW","=>",326],["T_WHITESPACE"," ",326],["T_VARIABLE","$this",326],["T_OBJECT_OPERATOR","->",326],["T_STRING","_customOptionDownloadUrl",326],",",["T_WHITESPACE"," ",326],["T_CONSTANT_ENCAPSED_STRING","'params'",326],["T_WHITESPACE"," ",326],["T_DOUBLE_ARROW","=>",326],["T_WHITESPACE"," ",326],["T_VARIABLE","$customOptionUrlParams",326],"]",";",["T_WHITESPACE","\n\n                ",326],["T_VARIABLE","$this",328],["T_OBJECT_OPERATOR","->",328],["T_STRING","_formattedOptionValue",328],["T_WHITESPACE"," ",328],"=",["T_WHITESPACE"," ",328],["T_VARIABLE","$this",328],["T_OBJECT_OPERATOR","->",328],["T_STRING","_getOptionHtml",328],"(",["T_VARIABLE","$value",328],")",";",["T_WHITESPACE","\n                ",328],["T_VARIABLE","$this",329],["T_OBJECT_OPERATOR","->",329],["T_STRING","getConfigurationItemOption",329],"(",")",["T_OBJECT_OPERATOR","->",329],["T_STRING","setValue",329],"(",["T_VARIABLE","$this",329],["T_OBJECT_OPERATOR","->",329],["T_STRING","serializer",329],["T_OBJECT_OPERATOR","->",329],["T_STRING","serialize",329],"(",["T_VARIABLE","$value",329],")",")",";",["T_WHITESPACE","\n                ",329],["T_RETURN","return",330],["T_WHITESPACE"," ",330],["T_VARIABLE","$this",330],["T_OBJECT_OPERATOR","->",330],["T_STRING","_formattedOptionValue",330],";",["T_WHITESPACE","\n            ",330],"}",["T_WHITESPACE"," ",331],["T_CATCH","catch",331],["T_WHITESPACE"," ",331],"(",["T_NS_SEPARATOR","\\",331],["T_STRING","Exception",331],["T_WHITESPACE"," ",331],["T_VARIABLE","$e",331],")",["T_WHITESPACE"," ",331],"{",["T_WHITESPACE","\n                ",331],["T_RETURN","return",332],["T_WHITESPACE"," ",332],["T_VARIABLE","$optionValue",332],";",["T_WHITESPACE","\n            ",332],"}",["T_WHITESPACE","\n        ",333],"}",["T_WHITESPACE","\n        ",334],["T_RETURN","return",335],["T_WHITESPACE"," ",335],["T_VARIABLE","$this",335],["T_OBJECT_OPERATOR","->",335],["T_STRING","_formattedOptionValue",335],";",["T_WHITESPACE","\n    ",335],"}",["T_WHITESPACE","\n\n    ",336],["T_DOC_COMMENT","\/**\n     * Format File option html\n     *\n     * @param string|array $optionValue Serialized string of option data or its data array\n     * @return string\n     * @throws \\Magento\\Framework\\Exception\\LocalizedException\n     *\/",338],["T_WHITESPACE","\n    ",344],["T_PROTECTED","protected",345],["T_WHITESPACE"," ",345],["T_FUNCTION","function",345],["T_WHITESPACE"," ",345],["T_STRING","_getOptionHtml",345],"(",["T_VARIABLE","$optionValue",345],")",["T_WHITESPACE","\n    ",345],"{",["T_WHITESPACE","\n        ",346],["T_VARIABLE","$value",347],["T_WHITESPACE"," ",347],"=",["T_WHITESPACE"," ",347],["T_VARIABLE","$this",347],["T_OBJECT_OPERATOR","->",347],["T_STRING","_unserializeValue",347],"(",["T_VARIABLE","$optionValue",347],")",";",["T_WHITESPACE","\n        ",347],["T_TRY","try",348],["T_WHITESPACE"," ",348],"{",["T_WHITESPACE","\n            ",348],["T_VARIABLE","$sizes",349],["T_WHITESPACE"," ",349],"=",["T_WHITESPACE"," ",349],["T_VARIABLE","$this",349],["T_OBJECT_OPERATOR","->",349],["T_STRING","prepareSize",349],"(",["T_VARIABLE","$value",349],")",";",["T_WHITESPACE","\n\n            ",349],["T_VARIABLE","$urlRoute",351],["T_WHITESPACE"," ",351],"=",["T_WHITESPACE"," ",351],"!",["T_EMPTY","empty",351],"(",["T_VARIABLE","$value",351],"[",["T_CONSTANT_ENCAPSED_STRING","'url'",351],"]","[",["T_CONSTANT_ENCAPSED_STRING","'route'",351],"]",")",["T_WHITESPACE"," ",351],"?",["T_WHITESPACE"," ",351],["T_VARIABLE","$value",351],"[",["T_CONSTANT_ENCAPSED_STRING","'url'",351],"]","[",["T_CONSTANT_ENCAPSED_STRING","'route'",351],"]",["T_WHITESPACE"," ",351],":",["T_WHITESPACE"," ",351],["T_CONSTANT_ENCAPSED_STRING","''",351],";",["T_WHITESPACE","\n            ",351],["T_VARIABLE","$urlParams",352],["T_WHITESPACE"," ",352],"=",["T_WHITESPACE"," ",352],"!",["T_EMPTY","empty",352],"(",["T_VARIABLE","$value",352],"[",["T_CONSTANT_ENCAPSED_STRING","'url'",352],"]","[",["T_CONSTANT_ENCAPSED_STRING","'params'",352],"]",")",["T_WHITESPACE"," ",352],"?",["T_WHITESPACE"," ",352],["T_VARIABLE","$value",352],"[",["T_CONSTANT_ENCAPSED_STRING","'url'",352],"]","[",["T_CONSTANT_ENCAPSED_STRING","'params'",352],"]",["T_WHITESPACE"," ",352],":",["T_WHITESPACE"," ",352],["T_CONSTANT_ENCAPSED_STRING","''",352],";",["T_WHITESPACE","\n            ",352],["T_VARIABLE","$title",353],["T_WHITESPACE"," ",353],"=",["T_WHITESPACE"," ",353],"!",["T_EMPTY","empty",353],"(",["T_VARIABLE","$value",353],"[",["T_CONSTANT_ENCAPSED_STRING","'title'",353],"]",")",["T_WHITESPACE"," ",353],"?",["T_WHITESPACE"," ",353],["T_VARIABLE","$value",353],"[",["T_CONSTANT_ENCAPSED_STRING","'title'",353],"]",["T_WHITESPACE"," ",353],":",["T_WHITESPACE"," ",353],["T_CONSTANT_ENCAPSED_STRING","''",353],";",["T_WHITESPACE","\n\n            ",353],["T_RETURN","return",355],["T_WHITESPACE"," ",355],["T_STRING","sprintf",355],"(",["T_WHITESPACE","\n                ",355],["T_CONSTANT_ENCAPSED_STRING","'<a href=\"%s\" target=\"_blank\">%s<\/a> %s'",356],",",["T_WHITESPACE","\n                ",356],["T_VARIABLE","$this",357],["T_OBJECT_OPERATOR","->",357],["T_STRING","_getOptionDownloadUrl",357],"(",["T_VARIABLE","$urlRoute",357],",",["T_WHITESPACE"," ",357],["T_VARIABLE","$urlParams",357],")",",",["T_WHITESPACE","\n                ",357],["T_VARIABLE","$this",358],["T_OBJECT_OPERATOR","->",358],["T_STRING","_escaper",358],["T_OBJECT_OPERATOR","->",358],["T_STRING","escapeHtml",358],"(",["T_VARIABLE","$title",358],")",",",["T_WHITESPACE","\n                ",358],["T_VARIABLE","$sizes",359],["T_WHITESPACE","\n            ",359],")",";",["T_WHITESPACE","\n        ",360],"}",["T_WHITESPACE"," ",361],["T_CATCH","catch",361],["T_WHITESPACE"," ",361],"(",["T_NS_SEPARATOR","\\",361],["T_STRING","Exception",361],["T_WHITESPACE"," ",361],["T_VARIABLE","$e",361],")",["T_WHITESPACE"," ",361],"{",["T_WHITESPACE","\n            ",361],["T_THROW","throw",362],["T_WHITESPACE"," ",362],["T_NEW","new",362],["T_WHITESPACE"," ",362],["T_STRING","LocalizedException",362],"(",["T_STRING","__",362],"(",["T_CONSTANT_ENCAPSED_STRING","'The file options format is not valid.'",362],")",")",";",["T_WHITESPACE","\n        ",362],"}",["T_WHITESPACE","\n    ",363],"}",["T_WHITESPACE","\n\n    ",364],["T_DOC_COMMENT","\/**\n     * Create a value from a storable representation\n     *\n     * @param string|array $value\n     * @return array\n     *\/",366],["T_WHITESPACE","\n    ",371],["T_PROTECTED","protected",372],["T_WHITESPACE"," ",372],["T_FUNCTION","function",372],["T_WHITESPACE"," ",372],["T_STRING","_unserializeValue",372],"(",["T_VARIABLE","$value",372],")",["T_WHITESPACE","\n    ",372],"{",["T_WHITESPACE","\n        ",373],["T_IF","if",374],["T_WHITESPACE"," ",374],"(",["T_STRING","is_array",374],"(",["T_VARIABLE","$value",374],")",")",["T_WHITESPACE"," ",374],"{",["T_WHITESPACE","\n            ",374],["T_RETURN","return",375],["T_WHITESPACE"," ",375],["T_VARIABLE","$value",375],";",["T_WHITESPACE","\n        ",375],"}",["T_WHITESPACE"," ",376],["T_ELSEIF","elseif",376],["T_WHITESPACE"," ",376],"(",["T_STRING","is_string",376],"(",["T_VARIABLE","$value",376],")",["T_WHITESPACE"," ",376],["T_BOOLEAN_AND","&&",376],["T_WHITESPACE"," ",376],"!",["T_EMPTY","empty",376],"(",["T_VARIABLE","$value",376],")",")",["T_WHITESPACE"," ",376],"{",["T_WHITESPACE","\n            ",376],["T_RETURN","return",377],["T_WHITESPACE"," ",377],["T_VARIABLE","$this",377],["T_OBJECT_OPERATOR","->",377],["T_STRING","serializer",377],["T_OBJECT_OPERATOR","->",377],["T_STRING","unserialize",377],"(",["T_VARIABLE","$value",377],")",";",["T_WHITESPACE","\n        ",377],"}",["T_WHITESPACE"," ",378],["T_ELSE","else",378],["T_WHITESPACE"," ",378],"{",["T_WHITESPACE","\n            ",378],["T_RETURN","return",379],["T_WHITESPACE"," ",379],"[","]",";",["T_WHITESPACE","\n        ",379],"}",["T_WHITESPACE","\n    ",380],"}",["T_WHITESPACE","\n\n    ",381],["T_DOC_COMMENT","\/**\n     * Return printable option value\n     *\n     * @param string $optionValue Prepared for cart option value\n     * @return string\n     *\/",383],["T_WHITESPACE","\n    ",388],["T_PUBLIC","public",389],["T_WHITESPACE"," ",389],["T_FUNCTION","function",389],["T_WHITESPACE"," ",389],["T_STRING","getPrintableOptionValue",389],"(",["T_VARIABLE","$optionValue",389],")",["T_WHITESPACE","\n    ",389],"{",["T_WHITESPACE","\n        ",390],["T_RETURN","return",391],["T_WHITESPACE"," ",391],["T_STRING","strip_tags",391],"(",["T_VARIABLE","$this",391],["T_OBJECT_OPERATOR","->",391],["T_STRING","getFormattedOptionValue",391],"(",["T_VARIABLE","$optionValue",391],")",")",";",["T_WHITESPACE","\n    ",391],"}",["T_WHITESPACE","\n\n    ",392],["T_DOC_COMMENT","\/**\n     * Return formatted option value ready to edit, ready to parse\n     *\n     * @param string $optionValue Prepared for cart option value\n     * @return string\n     *\n     * @deprecated\n     *\/",394],["T_WHITESPACE","\n    ",401],["T_PUBLIC","public",402],["T_WHITESPACE"," ",402],["T_FUNCTION","function",402],["T_WHITESPACE"," ",402],["T_STRING","getEditableOptionValue",402],"(",["T_VARIABLE","$optionValue",402],")",["T_WHITESPACE","\n    ",402],"{",["T_WHITESPACE","\n        ",403],["T_TRY","try",404],["T_WHITESPACE"," ",404],"{",["T_WHITESPACE","\n            ",404],["T_VARIABLE","$value",405],["T_WHITESPACE"," ",405],"=",["T_WHITESPACE"," ",405],["T_VARIABLE","$this",405],["T_OBJECT_OPERATOR","->",405],["T_STRING","serializer",405],["T_OBJECT_OPERATOR","->",405],["T_STRING","unserialize",405],"(",["T_VARIABLE","$optionValue",405],")",";",["T_WHITESPACE","\n            ",405],["T_RETURN","return",406],["T_WHITESPACE"," ",406],["T_STRING","sprintf",406],"(",["T_WHITESPACE","\n                ",406],["T_CONSTANT_ENCAPSED_STRING","'%s [%d]'",407],",",["T_WHITESPACE","\n                ",407],["T_VARIABLE","$this",408],["T_OBJECT_OPERATOR","->",408],["T_STRING","_escaper",408],["T_OBJECT_OPERATOR","->",408],["T_STRING","escapeHtml",408],"(",["T_VARIABLE","$value",408],"[",["T_CONSTANT_ENCAPSED_STRING","'title'",408],"]",")",",",["T_WHITESPACE","\n                ",408],["T_VARIABLE","$this",409],["T_OBJECT_OPERATOR","->",409],["T_STRING","getConfigurationItemOption",409],"(",")",["T_OBJECT_OPERATOR","->",409],["T_STRING","getId",409],"(",")",["T_WHITESPACE","\n            ",409],")",";",["T_WHITESPACE","\n        ",410],"}",["T_WHITESPACE"," ",411],["T_CATCH","catch",411],["T_WHITESPACE"," ",411],"(",["T_NS_SEPARATOR","\\",411],["T_STRING","Exception",411],["T_WHITESPACE"," ",411],["T_VARIABLE","$e",411],")",["T_WHITESPACE"," ",411],"{",["T_WHITESPACE","\n            ",411],["T_RETURN","return",412],["T_WHITESPACE"," ",412],["T_VARIABLE","$optionValue",412],";",["T_WHITESPACE","\n        ",412],"}",["T_WHITESPACE","\n    ",413],"}",["T_WHITESPACE","\n\n    ",414],["T_DOC_COMMENT","\/**\n     * Parse user input value and return cart prepared value\n     *\n     * @param string $optionValue\n     * @param array $productOptionValues Values for product option\n     * @return string|null\n     *\n     * @SuppressWarnings(PHPMD.UnusedFormalParameter)\n     *\n     * @deprecated\n     *\/",416],["T_WHITESPACE","\n    ",426],["T_PUBLIC","public",427],["T_WHITESPACE"," ",427],["T_FUNCTION","function",427],["T_WHITESPACE"," ",427],["T_STRING","parseOptionValue",427],"(",["T_VARIABLE","$optionValue",427],",",["T_WHITESPACE"," ",427],["T_VARIABLE","$productOptionValues",427],")",["T_WHITESPACE","\n    ",427],"{",["T_WHITESPACE","\n        ",428],["T_COMMENT","\/\/ search quote item option Id in option value\n",429],["T_WHITESPACE","        ",430],["T_IF","if",430],["T_WHITESPACE"," ",430],"(",["T_STRING","preg_match",430],"(",["T_CONSTANT_ENCAPSED_STRING","'\/\\[([0-9]+)\\]\/'",430],",",["T_WHITESPACE"," ",430],["T_VARIABLE","$optionValue",430],",",["T_WHITESPACE"," ",430],["T_VARIABLE","$matches",430],")",")",["T_WHITESPACE"," ",430],"{",["T_WHITESPACE","\n            ",430],["T_VARIABLE","$confItemOptionId",431],["T_WHITESPACE"," ",431],"=",["T_WHITESPACE"," ",431],["T_VARIABLE","$matches",431],"[",["T_LNUMBER","1",431],"]",";",["T_WHITESPACE","\n            ",431],["T_VARIABLE","$option",432],["T_WHITESPACE"," ",432],"=",["T_WHITESPACE"," ",432],["T_VARIABLE","$this",432],["T_OBJECT_OPERATOR","->",432],["T_STRING","_itemOptionFactory",432],["T_OBJECT_OPERATOR","->",432],["T_STRING","create",432],"(",")",["T_OBJECT_OPERATOR","->",432],["T_STRING","load",432],"(",["T_VARIABLE","$confItemOptionId",432],")",";",["T_WHITESPACE","\n            ",432],["T_TRY","try",433],["T_WHITESPACE"," ",433],"{",["T_WHITESPACE","\n                ",433],["T_VARIABLE","$this",434],["T_OBJECT_OPERATOR","->",434],["T_STRING","serializer",434],["T_OBJECT_OPERATOR","->",434],["T_STRING","unserialize",434],"(",["T_VARIABLE","$option",434],["T_OBJECT_OPERATOR","->",434],["T_STRING","getValue",434],"(",")",")",";",["T_WHITESPACE","\n                ",434],["T_RETURN","return",435],["T_WHITESPACE"," ",435],["T_VARIABLE","$option",435],["T_OBJECT_OPERATOR","->",435],["T_STRING","getValue",435],"(",")",";",["T_WHITESPACE","\n            ",435],"}",["T_WHITESPACE"," ",436],["T_CATCH","catch",436],["T_WHITESPACE"," ",436],"(",["T_NS_SEPARATOR","\\",436],["T_STRING","Exception",436],["T_WHITESPACE"," ",436],["T_VARIABLE","$e",436],")",["T_WHITESPACE"," ",436],"{",["T_WHITESPACE","\n                ",436],["T_RETURN","return",437],["T_WHITESPACE"," ",437],["T_STRING","null",437],";",["T_WHITESPACE","\n            ",437],"}",["T_WHITESPACE","\n        ",438],"}",["T_WHITESPACE"," ",439],["T_ELSE","else",439],["T_WHITESPACE"," ",439],"{",["T_WHITESPACE","\n            ",439],["T_RETURN","return",440],["T_WHITESPACE"," ",440],["T_STRING","null",440],";",["T_WHITESPACE","\n        ",440],"}",["T_WHITESPACE","\n    ",441],"}",["T_WHITESPACE","\n\n    ",442],["T_DOC_COMMENT","\/**\n     * Prepare option value for info buy request\n     *\n     * @param string $optionValue\n     * @return string|null\n     *\/",444],["T_WHITESPACE","\n    ",449],["T_PUBLIC","public",450],["T_WHITESPACE"," ",450],["T_FUNCTION","function",450],["T_WHITESPACE"," ",450],["T_STRING","prepareOptionValueForRequest",450],"(",["T_VARIABLE","$optionValue",450],")",["T_WHITESPACE","\n    ",450],"{",["T_WHITESPACE","\n        ",451],["T_TRY","try",452],["T_WHITESPACE"," ",452],"{",["T_WHITESPACE","\n            ",452],["T_VARIABLE","$result",453],["T_WHITESPACE"," ",453],"=",["T_WHITESPACE"," ",453],["T_VARIABLE","$this",453],["T_OBJECT_OPERATOR","->",453],["T_STRING","serializer",453],["T_OBJECT_OPERATOR","->",453],["T_STRING","unserialize",453],"(",["T_VARIABLE","$optionValue",453],")",";",["T_WHITESPACE","\n            ",453],["T_RETURN","return",454],["T_WHITESPACE"," ",454],["T_VARIABLE","$result",454],";",["T_WHITESPACE","\n        ",454],"}",["T_WHITESPACE"," ",455],["T_CATCH","catch",455],["T_WHITESPACE"," ",455],"(",["T_NS_SEPARATOR","\\",455],["T_STRING","Exception",455],["T_WHITESPACE"," ",455],["T_VARIABLE","$e",455],")",["T_WHITESPACE"," ",455],"{",["T_WHITESPACE","\n            ",455],["T_RETURN","return",456],["T_WHITESPACE"," ",456],["T_STRING","null",456],";",["T_WHITESPACE","\n        ",456],"}",["T_WHITESPACE","\n    ",457],"}",["T_WHITESPACE","\n\n    ",458],["T_DOC_COMMENT","\/**\n     * Quote item to order item copy process\n     *\n     * @return $this\n     *\/",460],["T_WHITESPACE","\n    ",464],["T_PUBLIC","public",465],["T_WHITESPACE"," ",465],["T_FUNCTION","function",465],["T_WHITESPACE"," ",465],["T_STRING","copyQuoteToOrder",465],"(",")",["T_WHITESPACE","\n    ",465],"{",["T_WHITESPACE","\n        ",466],["T_VARIABLE","$quoteOption",467],["T_WHITESPACE"," ",467],"=",["T_WHITESPACE"," ",467],["T_VARIABLE","$this",467],["T_OBJECT_OPERATOR","->",467],["T_STRING","getConfigurationItemOption",467],"(",")",";",["T_WHITESPACE","\n        ",467],["T_TRY","try",468],["T_WHITESPACE"," ",468],"{",["T_WHITESPACE","\n            ",468],["T_VARIABLE","$value",469],["T_WHITESPACE"," ",469],"=",["T_WHITESPACE"," ",469],["T_VARIABLE","$this",469],["T_OBJECT_OPERATOR","->",469],["T_STRING","serializer",469],["T_OBJECT_OPERATOR","->",469],["T_STRING","unserialize",469],"(",["T_VARIABLE","$quoteOption",469],["T_OBJECT_OPERATOR","->",469],["T_STRING","getValue",469],"(",")",")",";",["T_WHITESPACE","\n            ",469],["T_IF","if",470],["T_WHITESPACE"," ",470],"(","!",["T_ISSET","isset",470],"(",["T_VARIABLE","$value",470],"[",["T_CONSTANT_ENCAPSED_STRING","'quote_path'",470],"]",")",")",["T_WHITESPACE"," ",470],"{",["T_WHITESPACE","\n                ",470],["T_THROW","throw",471],["T_WHITESPACE"," ",471],["T_NEW","new",471],["T_WHITESPACE"," ",471],["T_NS_SEPARATOR","\\",471],["T_STRING","Exception",471],"(",")",";",["T_WHITESPACE","\n            ",471],"}",["T_WHITESPACE","\n            ",472],["T_VARIABLE","$quotePath",473],["T_WHITESPACE"," ",473],"=",["T_WHITESPACE"," ",473],["T_VARIABLE","$value",473],"[",["T_CONSTANT_ENCAPSED_STRING","'quote_path'",473],"]",";",["T_WHITESPACE","\n            ",473],["T_VARIABLE","$orderPath",474],["T_WHITESPACE"," ",474],"=",["T_WHITESPACE"," ",474],["T_VARIABLE","$value",474],"[",["T_CONSTANT_ENCAPSED_STRING","'order_path'",474],"]",";",["T_WHITESPACE","\n\n            ",474],["T_IF","if",476],["T_WHITESPACE"," ",476],"(","!",["T_VARIABLE","$this",476],["T_OBJECT_OPERATOR","->",476],["T_STRING","_rootDirectory",476],["T_OBJECT_OPERATOR","->",476],["T_STRING","isFile",476],"(",["T_VARIABLE","$quotePath",476],")",["T_WHITESPACE"," ",476],["T_BOOLEAN_OR","||",476],["T_WHITESPACE"," ",476],"!",["T_VARIABLE","$this",476],["T_OBJECT_OPERATOR","->",476],["T_STRING","_rootDirectory",476],["T_OBJECT_OPERATOR","->",476],["T_STRING","isReadable",476],"(",["T_VARIABLE","$quotePath",476],")",")",["T_WHITESPACE"," ",476],"{",["T_WHITESPACE","\n                ",476],["T_THROW","throw",477],["T_WHITESPACE"," ",477],["T_NEW","new",477],["T_WHITESPACE"," ",477],["T_NS_SEPARATOR","\\",477],["T_STRING","Exception",477],"(",")",";",["T_WHITESPACE","\n            ",477],"}",["T_WHITESPACE","\n            ",478],["T_VARIABLE","$this",479],["T_OBJECT_OPERATOR","->",479],["T_STRING","_coreFileStorageDatabase",479],["T_OBJECT_OPERATOR","->",479],["T_STRING","copyFile",479],"(",["T_WHITESPACE","\n                ",479],["T_VARIABLE","$this",480],["T_OBJECT_OPERATOR","->",480],["T_STRING","_rootDirectory",480],["T_OBJECT_OPERATOR","->",480],["T_STRING","getAbsolutePath",480],"(",["T_VARIABLE","$quotePath",480],")",",",["T_WHITESPACE","\n                ",480],["T_VARIABLE","$this",481],["T_OBJECT_OPERATOR","->",481],["T_STRING","_rootDirectory",481],["T_OBJECT_OPERATOR","->",481],["T_STRING","getAbsolutePath",481],"(",["T_VARIABLE","$orderPath",481],")",["T_WHITESPACE","\n            ",481],")",";",["T_WHITESPACE","\n        ",482],"}",["T_WHITESPACE"," ",483],["T_CATCH","catch",483],["T_WHITESPACE"," ",483],"(",["T_NS_SEPARATOR","\\",483],["T_STRING","Exception",483],["T_WHITESPACE"," ",483],["T_VARIABLE","$e",483],")",["T_WHITESPACE"," ",483],"{",["T_WHITESPACE","\n            ",483],["T_RETURN","return",484],["T_WHITESPACE"," ",484],["T_VARIABLE","$this",484],";",["T_WHITESPACE","\n        ",484],"}",["T_WHITESPACE","\n        ",485],["T_RETURN","return",486],["T_WHITESPACE"," ",486],["T_VARIABLE","$this",486],";",["T_WHITESPACE","\n    ",486],"}",["T_WHITESPACE","\n\n    ",487],["T_DOC_COMMENT","\/**\n     * Set url to custom option download controller\n     *\n     * @param string $url\n     * @return $this\n     *\/",489],["T_WHITESPACE","\n    ",494],["T_PUBLIC","public",495],["T_WHITESPACE"," ",495],["T_FUNCTION","function",495],["T_WHITESPACE"," ",495],["T_STRING","setCustomOptionDownloadUrl",495],"(",["T_VARIABLE","$url",495],")",["T_WHITESPACE","\n    ",495],"{",["T_WHITESPACE","\n        ",496],["T_VARIABLE","$this",497],["T_OBJECT_OPERATOR","->",497],["T_STRING","_customOptionDownloadUrl",497],["T_WHITESPACE"," ",497],"=",["T_WHITESPACE"," ",497],["T_VARIABLE","$url",497],";",["T_WHITESPACE","\n        ",497],["T_RETURN","return",498],["T_WHITESPACE"," ",498],["T_VARIABLE","$this",498],";",["T_WHITESPACE","\n    ",498],"}",["T_WHITESPACE","\n\n    ",499],["T_DOC_COMMENT","\/**\n     * Return URL for option file download\n     *\n     * @param string|null $route\n     * @param array|null $params\n     * @return string\n     *\/",501],["T_WHITESPACE","\n    ",507],["T_PROTECTED","protected",508],["T_WHITESPACE"," ",508],["T_FUNCTION","function",508],["T_WHITESPACE"," ",508],["T_STRING","_getOptionDownloadUrl",508],"(",["T_VARIABLE","$route",508],",",["T_WHITESPACE"," ",508],["T_VARIABLE","$params",508],")",["T_WHITESPACE","\n    ",508],"{",["T_WHITESPACE","\n        ",509],["T_RETURN","return",510],["T_WHITESPACE"," ",510],["T_VARIABLE","$this",510],["T_OBJECT_OPERATOR","->",510],["T_STRING","_urlBuilder",510],["T_OBJECT_OPERATOR","->",510],["T_STRING","getUrl",510],"(",["T_VARIABLE","$route",510],",",["T_WHITESPACE"," ",510],["T_VARIABLE","$params",510],")",";",["T_WHITESPACE","\n    ",510],"}",["T_WHITESPACE","\n\n    ",511],["T_DOC_COMMENT","\/**\n     * @param array $value\n     * @return string\n     *\/",513],["T_WHITESPACE","\n    ",516],["T_PROTECTED","protected",517],["T_WHITESPACE"," ",517],["T_FUNCTION","function",517],["T_WHITESPACE"," ",517],["T_STRING","prepareSize",517],"(",["T_VARIABLE","$value",517],")",["T_WHITESPACE","\n    ",517],"{",["T_WHITESPACE","\n        ",518],["T_VARIABLE","$sizes",519],["T_WHITESPACE"," ",519],"=",["T_WHITESPACE"," ",519],["T_CONSTANT_ENCAPSED_STRING","''",519],";",["T_WHITESPACE","\n        ",519],["T_IF","if",520],["T_WHITESPACE"," ",520],"(","!",["T_EMPTY","empty",520],"(",["T_VARIABLE","$value",520],"[",["T_CONSTANT_ENCAPSED_STRING","'width'",520],"]",")",["T_WHITESPACE"," ",520],["T_BOOLEAN_AND","&&",520],["T_WHITESPACE"," ",520],"!",["T_EMPTY","empty",520],"(",["T_VARIABLE","$value",520],"[",["T_CONSTANT_ENCAPSED_STRING","'height'",520],"]",")",["T_WHITESPACE"," ",520],["T_BOOLEAN_AND","&&",520],["T_WHITESPACE"," ",520],["T_VARIABLE","$value",520],"[",["T_CONSTANT_ENCAPSED_STRING","'width'",520],"]",["T_WHITESPACE"," ",520],">",["T_WHITESPACE"," ",520],["T_LNUMBER","0",520],["T_WHITESPACE"," ",520],["T_BOOLEAN_AND","&&",520],["T_WHITESPACE"," ",520],["T_VARIABLE","$value",520],"[",["T_CONSTANT_ENCAPSED_STRING","'height'",520],"]",["T_WHITESPACE"," ",520],">",["T_WHITESPACE"," ",520],["T_LNUMBER","0",520],")",["T_WHITESPACE"," ",520],"{",["T_WHITESPACE","\n            ",520],["T_VARIABLE","$sizes",521],["T_WHITESPACE"," ",521],"=",["T_WHITESPACE"," ",521],["T_VARIABLE","$value",521],"[",["T_CONSTANT_ENCAPSED_STRING","'width'",521],"]",["T_WHITESPACE"," ",521],".",["T_WHITESPACE"," ",521],["T_CONSTANT_ENCAPSED_STRING","' x '",521],["T_WHITESPACE"," ",521],".",["T_WHITESPACE"," ",521],["T_VARIABLE","$value",521],"[",["T_CONSTANT_ENCAPSED_STRING","'height'",521],"]",["T_WHITESPACE"," ",521],".",["T_WHITESPACE"," ",521],["T_CONSTANT_ENCAPSED_STRING","' '",521],["T_WHITESPACE"," ",521],".",["T_WHITESPACE"," ",521],["T_STRING","__",521],"(",["T_CONSTANT_ENCAPSED_STRING","'px.'",521],")",";",["T_WHITESPACE","\n        ",521],"}",["T_WHITESPACE","\n        ",522],["T_RETURN","return",523],["T_WHITESPACE"," ",523],["T_VARIABLE","$sizes",523],";",["T_WHITESPACE","\n    ",523],"}",["T_WHITESPACE","\n",524],"}",["T_WHITESPACE","\n",525]]
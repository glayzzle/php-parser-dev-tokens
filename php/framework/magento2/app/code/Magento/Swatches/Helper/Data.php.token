[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Copyright \u00c2\u00a9 2013-2017 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n *\/",2],["T_WHITESPACE","\n",5],["T_NAMESPACE","namespace",6],["T_WHITESPACE"," ",6],["T_STRING","Magento",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Swatches",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Helper",6],";",["T_WHITESPACE","\n\n",6],["T_USE","use",8],["T_WHITESPACE"," ",8],["T_STRING","Magento",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Catalog",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Helper",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Image",8],";",["T_WHITESPACE","\n",8],["T_USE","use",9],["T_WHITESPACE"," ",9],["T_STRING","Magento",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Catalog",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Model",9],["T_NS_SEPARATOR","\\",9],["T_STRING","ResourceModel",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Product",9],["T_NS_SEPARATOR","\\",9],["T_STRING","CollectionFactory",9],";",["T_WHITESPACE","\n",9],["T_USE","use",10],["T_WHITESPACE"," ",10],["T_STRING","Magento",10],["T_NS_SEPARATOR","\\",10],["T_STRING","ConfigurableProduct",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Model",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Product",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Type",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Configurable",10],";",["T_WHITESPACE","\n",10],["T_USE","use",11],["T_WHITESPACE"," ",11],["T_STRING","Magento",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Framework",11],["T_NS_SEPARATOR","\\",11],["T_STRING","App",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Helper",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Context",11],";",["T_WHITESPACE","\n",11],["T_USE","use",12],["T_WHITESPACE"," ",12],["T_STRING","Magento",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Catalog",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Api",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Data",12],["T_NS_SEPARATOR","\\",12],["T_STRING","ProductInterface",12],["T_WHITESPACE"," ",12],["T_AS","as",12],["T_WHITESPACE"," ",12],["T_STRING","Product",12],";",["T_WHITESPACE","\n",12],["T_USE","use",13],["T_WHITESPACE"," ",13],["T_STRING","Magento",13],["T_NS_SEPARATOR","\\",13],["T_STRING","Catalog",13],["T_NS_SEPARATOR","\\",13],["T_STRING","Model",13],["T_NS_SEPARATOR","\\",13],["T_STRING","Product",13],["T_WHITESPACE"," ",13],["T_AS","as",13],["T_WHITESPACE"," ",13],["T_STRING","ModelProduct",13],";",["T_WHITESPACE","\n",13],["T_USE","use",14],["T_WHITESPACE"," ",14],["T_STRING","Magento",14],["T_NS_SEPARATOR","\\",14],["T_STRING","Store",14],["T_NS_SEPARATOR","\\",14],["T_STRING","Model",14],["T_NS_SEPARATOR","\\",14],["T_STRING","StoreManagerInterface",14],";",["T_WHITESPACE","\n",14],["T_USE","use",15],["T_WHITESPACE"," ",15],["T_STRING","Magento",15],["T_NS_SEPARATOR","\\",15],["T_STRING","Swatches",15],["T_NS_SEPARATOR","\\",15],["T_STRING","Model",15],["T_NS_SEPARATOR","\\",15],["T_STRING","ResourceModel",15],["T_NS_SEPARATOR","\\",15],["T_STRING","Swatch",15],["T_NS_SEPARATOR","\\",15],["T_STRING","CollectionFactory",15],["T_WHITESPACE"," ",15],["T_AS","as",15],["T_WHITESPACE"," ",15],["T_STRING","SwatchCollectionFactory",15],";",["T_WHITESPACE","\n",15],["T_USE","use",16],["T_WHITESPACE"," ",16],["T_STRING","Magento",16],["T_NS_SEPARATOR","\\",16],["T_STRING","Swatches",16],["T_NS_SEPARATOR","\\",16],["T_STRING","Model",16],["T_NS_SEPARATOR","\\",16],["T_STRING","Swatch",16],";",["T_WHITESPACE","\n",16],["T_USE","use",17],["T_WHITESPACE"," ",17],["T_STRING","Magento",17],["T_NS_SEPARATOR","\\",17],["T_STRING","Catalog",17],["T_NS_SEPARATOR","\\",17],["T_STRING","Model",17],["T_NS_SEPARATOR","\\",17],["T_STRING","ResourceModel",17],["T_NS_SEPARATOR","\\",17],["T_STRING","Eav",17],["T_NS_SEPARATOR","\\",17],["T_STRING","Attribute",17],";",["T_WHITESPACE","\n",17],["T_USE","use",18],["T_WHITESPACE"," ",18],["T_STRING","Magento",18],["T_NS_SEPARATOR","\\",18],["T_STRING","Framework",18],["T_NS_SEPARATOR","\\",18],["T_STRING","Exception",18],["T_NS_SEPARATOR","\\",18],["T_STRING","InputException",18],";",["T_WHITESPACE","\n",18],["T_USE","use",19],["T_WHITESPACE"," ",19],["T_STRING","Magento",19],["T_NS_SEPARATOR","\\",19],["T_STRING","Catalog",19],["T_NS_SEPARATOR","\\",19],["T_STRING","Api",19],["T_NS_SEPARATOR","\\",19],["T_STRING","ProductRepositoryInterface",19],";",["T_WHITESPACE","\n",19],["T_USE","use",20],["T_WHITESPACE"," ",20],["T_STRING","Magento",20],["T_NS_SEPARATOR","\\",20],["T_STRING","Catalog",20],["T_NS_SEPARATOR","\\",20],["T_STRING","Model",20],["T_NS_SEPARATOR","\\",20],["T_STRING","ResourceModel",20],["T_NS_SEPARATOR","\\",20],["T_STRING","Product",20],["T_NS_SEPARATOR","\\",20],["T_STRING","Collection",20],["T_WHITESPACE"," ",20],["T_AS","as",20],["T_WHITESPACE"," ",20],["T_STRING","ProductCollection",20],";",["T_WHITESPACE","\n\n",20],["T_DOC_COMMENT","\/**\n * Class Helper Data\n *\n * @SuppressWarnings(PHPMD.CouplingBetweenObjects)\n *\/",22],["T_WHITESPACE","\n",26],["T_CLASS","class",27],["T_WHITESPACE"," ",27],["T_STRING","Data",27],["T_WHITESPACE","\n",27],"{",["T_WHITESPACE","\n    ",28],["T_DOC_COMMENT","\/**\n     * When we init media gallery empty image types contain this value.\n     *\/",29],["T_WHITESPACE","\n    ",31],["T_CONST","const",32],["T_WHITESPACE"," ",32],["T_STRING","EMPTY_IMAGE_VALUE",32],["T_WHITESPACE"," ",32],"=",["T_WHITESPACE"," ",32],["T_CONSTANT_ENCAPSED_STRING","'no_selection'",32],";",["T_WHITESPACE","\n\n    ",32],["T_DOC_COMMENT","\/**\n     * Default store ID\n     *\/",34],["T_WHITESPACE","\n    ",36],["T_CONST","const",37],["T_WHITESPACE"," ",37],["T_STRING","DEFAULT_STORE_ID",37],["T_WHITESPACE"," ",37],"=",["T_WHITESPACE"," ",37],["T_LNUMBER","0",37],";",["T_WHITESPACE","\n\n    ",37],["T_DOC_COMMENT","\/**\n     * @var CollectionFactory\n     *\/",39],["T_WHITESPACE","\n    ",41],["T_PROTECTED","protected",42],["T_WHITESPACE"," ",42],["T_VARIABLE","$productCollectionFactory",42],";",["T_WHITESPACE","\n\n    ",42],["T_DOC_COMMENT","\/**\n     * @var ProductRepositoryInterface\n     *\/",44],["T_WHITESPACE","\n    ",46],["T_PROTECTED","protected",47],["T_WHITESPACE"," ",47],["T_VARIABLE","$productRepository",47],";",["T_WHITESPACE","\n\n    ",47],["T_DOC_COMMENT","\/**\n     * @var StoreManagerInterface\n     *\/",49],["T_WHITESPACE","\n    ",51],["T_PROTECTED","protected",52],["T_WHITESPACE"," ",52],["T_VARIABLE","$storeManager",52],";",["T_WHITESPACE","\n\n    ",52],["T_DOC_COMMENT","\/**\n     * @var SwatchCollectionFactory\n     *\/",54],["T_WHITESPACE","\n    ",56],["T_PROTECTED","protected",57],["T_WHITESPACE"," ",57],["T_VARIABLE","$swatchCollectionFactory",57],";",["T_WHITESPACE","\n\n    ",57],["T_DOC_COMMENT","\/**\n     * Catalog Image Helper\n     *\n     * @var Image\n     *\/",59],["T_WHITESPACE","\n    ",63],["T_PROTECTED","protected",64],["T_WHITESPACE"," ",64],["T_VARIABLE","$imageHelper",64],";",["T_WHITESPACE","\n\n    ",64],["T_DOC_COMMENT","\/**\n     * Product metadata pool\n     *\n     * @var \\Magento\\Framework\\EntityManager\\MetadataPool\n     *\/",66],["T_WHITESPACE","\n    ",70],["T_PRIVATE","private",71],["T_WHITESPACE"," ",71],["T_VARIABLE","$metadataPool",71],";",["T_WHITESPACE","\n\n    ",71],["T_DOC_COMMENT","\/**\n     * Data key which should populated to Attribute entity from \"additional_data\" field\n     *\n     * @var array\n     *\/",73],["T_WHITESPACE","\n    ",77],["T_PROTECTED","protected",78],["T_WHITESPACE"," ",78],["T_VARIABLE","$eavAttributeAdditionalDataKeys",78],["T_WHITESPACE"," ",78],"=",["T_WHITESPACE"," ",78],"[",["T_WHITESPACE","\n        ",78],["T_STRING","Swatch",79],["T_DOUBLE_COLON","::",79],["T_STRING","SWATCH_INPUT_TYPE_KEY",79],",",["T_WHITESPACE","\n        ",79],["T_CONSTANT_ENCAPSED_STRING","'update_product_preview_image'",80],",",["T_WHITESPACE","\n        ",80],["T_CONSTANT_ENCAPSED_STRING","'use_product_image_for_swatch'",81],["T_WHITESPACE","\n    ",81],"]",";",["T_WHITESPACE","\n\n    ",82],["T_DOC_COMMENT","\/**\n     * @param CollectionFactory $productCollectionFactory\n     * @param ProductRepositoryInterface $productRepository\n     * @param StoreManagerInterface $storeManager\n     * @param SwatchCollectionFactory $swatchCollectionFactory\n     * @param Image $imageHelper\n     *\/",84],["T_WHITESPACE","\n    ",90],["T_PUBLIC","public",91],["T_WHITESPACE"," ",91],["T_FUNCTION","function",91],["T_WHITESPACE"," ",91],["T_STRING","__construct",91],"(",["T_WHITESPACE","\n        ",91],["T_STRING","CollectionFactory",92],["T_WHITESPACE"," ",92],["T_VARIABLE","$productCollectionFactory",92],",",["T_WHITESPACE","\n        ",92],["T_STRING","ProductRepositoryInterface",93],["T_WHITESPACE"," ",93],["T_VARIABLE","$productRepository",93],",",["T_WHITESPACE","\n        ",93],["T_STRING","StoreManagerInterface",94],["T_WHITESPACE"," ",94],["T_VARIABLE","$storeManager",94],",",["T_WHITESPACE","\n        ",94],["T_STRING","SwatchCollectionFactory",95],["T_WHITESPACE"," ",95],["T_VARIABLE","$swatchCollectionFactory",95],",",["T_WHITESPACE","\n        ",95],["T_STRING","Image",96],["T_WHITESPACE"," ",96],["T_VARIABLE","$imageHelper",96],["T_WHITESPACE","\n    ",96],")",["T_WHITESPACE"," ",97],"{",["T_WHITESPACE","\n        ",97],["T_VARIABLE","$this",98],["T_OBJECT_OPERATOR","->",98],["T_STRING","productCollectionFactory",98],["T_WHITESPACE","   ",98],"=",["T_WHITESPACE"," ",98],["T_VARIABLE","$productCollectionFactory",98],";",["T_WHITESPACE","\n        ",98],["T_VARIABLE","$this",99],["T_OBJECT_OPERATOR","->",99],["T_STRING","productRepository",99],["T_WHITESPACE"," ",99],"=",["T_WHITESPACE"," ",99],["T_VARIABLE","$productRepository",99],";",["T_WHITESPACE","\n        ",99],["T_VARIABLE","$this",100],["T_OBJECT_OPERATOR","->",100],["T_STRING","storeManager",100],["T_WHITESPACE"," ",100],"=",["T_WHITESPACE"," ",100],["T_VARIABLE","$storeManager",100],";",["T_WHITESPACE","\n        ",100],["T_VARIABLE","$this",101],["T_OBJECT_OPERATOR","->",101],["T_STRING","swatchCollectionFactory",101],["T_WHITESPACE"," ",101],"=",["T_WHITESPACE"," ",101],["T_VARIABLE","$swatchCollectionFactory",101],";",["T_WHITESPACE","\n        ",101],["T_VARIABLE","$this",102],["T_OBJECT_OPERATOR","->",102],["T_STRING","imageHelper",102],["T_WHITESPACE"," ",102],"=",["T_WHITESPACE"," ",102],["T_VARIABLE","$imageHelper",102],";",["T_WHITESPACE","\n    ",102],"}",["T_WHITESPACE","\n\n    ",103],["T_DOC_COMMENT","\/**\n     * @param Attribute $attribute\n     * @return $this\n     *\/",105],["T_WHITESPACE","\n    ",108],["T_PUBLIC","public",109],["T_WHITESPACE"," ",109],["T_FUNCTION","function",109],["T_WHITESPACE"," ",109],["T_STRING","assembleAdditionalDataEavAttribute",109],"(",["T_STRING","Attribute",109],["T_WHITESPACE"," ",109],["T_VARIABLE","$attribute",109],")",["T_WHITESPACE","\n    ",109],"{",["T_WHITESPACE","\n        ",110],["T_VARIABLE","$initialAdditionalData",111],["T_WHITESPACE"," ",111],"=",["T_WHITESPACE"," ",111],"[","]",";",["T_WHITESPACE","\n        ",111],["T_VARIABLE","$additionalData",112],["T_WHITESPACE"," ",112],"=",["T_WHITESPACE"," ",112],["T_STRING_CAST","(string)",112],["T_WHITESPACE"," ",112],["T_VARIABLE","$attribute",112],["T_OBJECT_OPERATOR","->",112],["T_STRING","getData",112],"(",["T_CONSTANT_ENCAPSED_STRING","'additional_data'",112],")",";",["T_WHITESPACE","\n        ",112],["T_IF","if",113],["T_WHITESPACE"," ",113],"(","!",["T_EMPTY","empty",113],"(",["T_VARIABLE","$additionalData",113],")",")",["T_WHITESPACE"," ",113],"{",["T_WHITESPACE","\n            ",113],["T_VARIABLE","$additionalData",114],["T_WHITESPACE"," ",114],"=",["T_WHITESPACE"," ",114],["T_STRING","unserialize",114],"(",["T_VARIABLE","$additionalData",114],")",";",["T_WHITESPACE","\n            ",114],["T_IF","if",115],["T_WHITESPACE"," ",115],"(",["T_STRING","is_array",115],"(",["T_VARIABLE","$additionalData",115],")",")",["T_WHITESPACE"," ",115],"{",["T_WHITESPACE","\n                ",115],["T_VARIABLE","$initialAdditionalData",116],["T_WHITESPACE"," ",116],"=",["T_WHITESPACE"," ",116],["T_VARIABLE","$additionalData",116],";",["T_WHITESPACE","\n            ",116],"}",["T_WHITESPACE","\n        ",117],"}",["T_WHITESPACE","\n\n        ",118],["T_VARIABLE","$dataToAdd",120],["T_WHITESPACE"," ",120],"=",["T_WHITESPACE"," ",120],"[","]",";",["T_WHITESPACE","\n        ",120],["T_FOREACH","foreach",121],["T_WHITESPACE"," ",121],"(",["T_VARIABLE","$this",121],["T_OBJECT_OPERATOR","->",121],["T_STRING","eavAttributeAdditionalDataKeys",121],["T_WHITESPACE"," ",121],["T_AS","as",121],["T_WHITESPACE"," ",121],["T_VARIABLE","$key",121],")",["T_WHITESPACE"," ",121],"{",["T_WHITESPACE","\n            ",121],["T_VARIABLE","$dataValue",122],["T_WHITESPACE"," ",122],"=",["T_WHITESPACE"," ",122],["T_VARIABLE","$attribute",122],["T_OBJECT_OPERATOR","->",122],["T_STRING","getData",122],"(",["T_VARIABLE","$key",122],")",";",["T_WHITESPACE","\n            ",122],["T_IF","if",123],["T_WHITESPACE"," ",123],"(",["T_STRING","null",123],["T_WHITESPACE"," ",123],["T_IS_NOT_IDENTICAL","!==",123],["T_WHITESPACE"," ",123],["T_VARIABLE","$dataValue",123],")",["T_WHITESPACE"," ",123],"{",["T_WHITESPACE","\n                ",123],["T_VARIABLE","$dataToAdd",124],"[",["T_VARIABLE","$key",124],"]",["T_WHITESPACE"," ",124],"=",["T_WHITESPACE"," ",124],["T_VARIABLE","$dataValue",124],";",["T_WHITESPACE","\n            ",124],"}",["T_WHITESPACE","\n        ",125],"}",["T_WHITESPACE","\n        ",126],["T_VARIABLE","$additionalData",127],["T_WHITESPACE"," ",127],"=",["T_WHITESPACE"," ",127],["T_STRING","array_merge",127],"(",["T_VARIABLE","$initialAdditionalData",127],",",["T_WHITESPACE"," ",127],["T_VARIABLE","$dataToAdd",127],")",";",["T_WHITESPACE","\n        ",127],["T_VARIABLE","$attribute",128],["T_OBJECT_OPERATOR","->",128],["T_STRING","setData",128],"(",["T_CONSTANT_ENCAPSED_STRING","'additional_data'",128],",",["T_WHITESPACE"," ",128],["T_STRING","serialize",128],"(",["T_VARIABLE","$additionalData",128],")",")",";",["T_WHITESPACE","\n        ",128],["T_RETURN","return",129],["T_WHITESPACE"," ",129],["T_VARIABLE","$this",129],";",["T_WHITESPACE","\n    ",129],"}",["T_WHITESPACE","\n\n    ",130],["T_DOC_COMMENT","\/**\n     * @param Attribute $attribute\n     * @return $this\n     *\/",132],["T_WHITESPACE","\n    ",135],["T_PRIVATE","private",136],["T_WHITESPACE"," ",136],["T_FUNCTION","function",136],["T_WHITESPACE"," ",136],["T_STRING","populateAdditionalDataEavAttribute",136],"(",["T_STRING","Attribute",136],["T_WHITESPACE"," ",136],["T_VARIABLE","$attribute",136],")",["T_WHITESPACE","\n    ",136],"{",["T_WHITESPACE","\n        ",137],["T_VARIABLE","$additionalData",138],["T_WHITESPACE"," ",138],"=",["T_WHITESPACE"," ",138],["T_STRING","unserialize",138],"(",["T_VARIABLE","$attribute",138],["T_OBJECT_OPERATOR","->",138],["T_STRING","getData",138],"(",["T_CONSTANT_ENCAPSED_STRING","'additional_data'",138],")",")",";",["T_WHITESPACE","\n        ",138],["T_IF","if",139],["T_WHITESPACE"," ",139],"(",["T_ISSET","isset",139],"(",["T_VARIABLE","$additionalData",139],")",["T_WHITESPACE"," ",139],["T_BOOLEAN_AND","&&",139],["T_WHITESPACE"," ",139],["T_STRING","is_array",139],"(",["T_VARIABLE","$additionalData",139],")",")",["T_WHITESPACE"," ",139],"{",["T_WHITESPACE","\n            ",139],["T_FOREACH","foreach",140],["T_WHITESPACE"," ",140],"(",["T_VARIABLE","$this",140],["T_OBJECT_OPERATOR","->",140],["T_STRING","eavAttributeAdditionalDataKeys",140],["T_WHITESPACE"," ",140],["T_AS","as",140],["T_WHITESPACE"," ",140],["T_VARIABLE","$key",140],")",["T_WHITESPACE"," ",140],"{",["T_WHITESPACE","\n                ",140],["T_IF","if",141],["T_WHITESPACE"," ",141],"(",["T_ISSET","isset",141],"(",["T_VARIABLE","$additionalData",141],"[",["T_VARIABLE","$key",141],"]",")",")",["T_WHITESPACE"," ",141],"{",["T_WHITESPACE","\n                    ",141],["T_VARIABLE","$attribute",142],["T_OBJECT_OPERATOR","->",142],["T_STRING","setData",142],"(",["T_VARIABLE","$key",142],",",["T_WHITESPACE"," ",142],["T_VARIABLE","$additionalData",142],"[",["T_VARIABLE","$key",142],"]",")",";",["T_WHITESPACE","\n                ",142],"}",["T_WHITESPACE","\n            ",143],"}",["T_WHITESPACE","\n        ",144],"}",["T_WHITESPACE","\n        ",145],["T_RETURN","return",146],["T_WHITESPACE"," ",146],["T_VARIABLE","$this",146],";",["T_WHITESPACE","\n    ",146],"}",["T_WHITESPACE","\n\n    ",147],["T_DOC_COMMENT","\/**\n     * @param string $attributeCode swatch_image|image\n     * @param ModelProduct $configurableProduct\n     * @param array $requiredAttributes\n     * @return bool|Product\n     *\/",149],["T_WHITESPACE","\n    ",154],["T_PRIVATE","private",155],["T_WHITESPACE"," ",155],["T_FUNCTION","function",155],["T_WHITESPACE"," ",155],["T_STRING","loadFirstVariation",155],"(",["T_VARIABLE","$attributeCode",155],",",["T_WHITESPACE"," ",155],["T_STRING","ModelProduct",155],["T_WHITESPACE"," ",155],["T_VARIABLE","$configurableProduct",155],",",["T_WHITESPACE"," ",155],["T_ARRAY","array",155],["T_WHITESPACE"," ",155],["T_VARIABLE","$requiredAttributes",155],")",["T_WHITESPACE","\n    ",155],"{",["T_WHITESPACE","\n        ",156],["T_IF","if",157],["T_WHITESPACE"," ",157],"(",["T_VARIABLE","$this",157],["T_OBJECT_OPERATOR","->",157],["T_STRING","isProductHasSwatch",157],"(",["T_VARIABLE","$configurableProduct",157],")",")",["T_WHITESPACE"," ",157],"{",["T_WHITESPACE","\n            ",157],["T_VARIABLE","$usedProducts",158],["T_WHITESPACE"," ",158],"=",["T_WHITESPACE"," ",158],["T_VARIABLE","$configurableProduct",158],["T_OBJECT_OPERATOR","->",158],["T_STRING","getTypeInstance",158],"(",")",["T_OBJECT_OPERATOR","->",158],["T_STRING","getUsedProducts",158],"(",["T_VARIABLE","$configurableProduct",158],")",";",["T_WHITESPACE","\n\n            ",158],["T_FOREACH","foreach",160],["T_WHITESPACE"," ",160],"(",["T_VARIABLE","$usedProducts",160],["T_WHITESPACE"," ",160],["T_AS","as",160],["T_WHITESPACE"," ",160],["T_VARIABLE","$simpleProduct",160],")",["T_WHITESPACE"," ",160],"{",["T_WHITESPACE","\n                ",160],["T_IF","if",161],["T_WHITESPACE"," ",161],"(","!",["T_STRING","in_array",161],"(",["T_VARIABLE","$simpleProduct",161],["T_OBJECT_OPERATOR","->",161],["T_STRING","getData",161],"(",["T_VARIABLE","$attributeCode",161],")",",",["T_WHITESPACE"," ",161],"[",["T_STRING","null",161],",",["T_WHITESPACE"," ",161],["T_STRING","self",161],["T_DOUBLE_COLON","::",161],["T_STRING","EMPTY_IMAGE_VALUE",161],"]",",",["T_WHITESPACE"," ",161],["T_STRING","true",161],")",["T_WHITESPACE","\n                    ",161],["T_BOOLEAN_AND","&&",162],["T_WHITESPACE"," ",162],"!",["T_STRING","array_diff_assoc",162],"(",["T_VARIABLE","$requiredAttributes",162],",",["T_WHITESPACE"," ",162],["T_VARIABLE","$simpleProduct",162],["T_OBJECT_OPERATOR","->",162],["T_STRING","getData",162],"(",")",")",["T_WHITESPACE","\n                ",162],")",["T_WHITESPACE"," ",163],"{",["T_WHITESPACE","\n                    ",163],["T_RETURN","return",164],["T_WHITESPACE"," ",164],["T_VARIABLE","$simpleProduct",164],";",["T_WHITESPACE","\n                ",164],"}",["T_WHITESPACE","\n            ",165],"}",["T_WHITESPACE","\n        ",166],"}",["T_WHITESPACE","\n\n        ",167],["T_RETURN","return",169],["T_WHITESPACE"," ",169],["T_STRING","false",169],";",["T_WHITESPACE","\n    ",169],"}",["T_WHITESPACE","\n\n    ",170],["T_DOC_COMMENT","\/**\n     * @param Product $configurableProduct\n     * @param array $requiredAttributes\n     * @return bool|Product\n     *\/",172],["T_WHITESPACE","\n    ",176],["T_PUBLIC","public",177],["T_WHITESPACE"," ",177],["T_FUNCTION","function",177],["T_WHITESPACE"," ",177],["T_STRING","loadFirstVariationWithSwatchImage",177],"(",["T_STRING","Product",177],["T_WHITESPACE"," ",177],["T_VARIABLE","$configurableProduct",177],",",["T_WHITESPACE"," ",177],["T_ARRAY","array",177],["T_WHITESPACE"," ",177],["T_VARIABLE","$requiredAttributes",177],")",["T_WHITESPACE","\n    ",177],"{",["T_WHITESPACE","\n        ",178],["T_RETURN","return",179],["T_WHITESPACE"," ",179],["T_VARIABLE","$this",179],["T_OBJECT_OPERATOR","->",179],["T_STRING","loadFirstVariation",179],"(",["T_CONSTANT_ENCAPSED_STRING","'swatch_image'",179],",",["T_WHITESPACE"," ",179],["T_VARIABLE","$configurableProduct",179],",",["T_WHITESPACE"," ",179],["T_VARIABLE","$requiredAttributes",179],")",";",["T_WHITESPACE","\n    ",179],"}",["T_WHITESPACE","\n\n    ",180],["T_DOC_COMMENT","\/**\n     * @param Product $configurableProduct\n     * @param array $requiredAttributes\n     * @return bool|Product\n     *\/",182],["T_WHITESPACE","\n    ",186],["T_PUBLIC","public",187],["T_WHITESPACE"," ",187],["T_FUNCTION","function",187],["T_WHITESPACE"," ",187],["T_STRING","loadFirstVariationWithImage",187],"(",["T_STRING","Product",187],["T_WHITESPACE"," ",187],["T_VARIABLE","$configurableProduct",187],",",["T_WHITESPACE"," ",187],["T_ARRAY","array",187],["T_WHITESPACE"," ",187],["T_VARIABLE","$requiredAttributes",187],")",["T_WHITESPACE","\n    ",187],"{",["T_WHITESPACE","\n        ",188],["T_RETURN","return",189],["T_WHITESPACE"," ",189],["T_VARIABLE","$this",189],["T_OBJECT_OPERATOR","->",189],["T_STRING","loadFirstVariation",189],"(",["T_CONSTANT_ENCAPSED_STRING","'image'",189],",",["T_WHITESPACE"," ",189],["T_VARIABLE","$configurableProduct",189],",",["T_WHITESPACE"," ",189],["T_VARIABLE","$requiredAttributes",189],")",";",["T_WHITESPACE","\n    ",189],"}",["T_WHITESPACE","\n\n    ",190],["T_DOC_COMMENT","\/**\n     * Load Variation Product using fallback\n     *\n     * @param Product $parentProduct\n     * @param array $attributes\n     * @return bool|Product\n     *\/",192],["T_WHITESPACE","\n    ",198],["T_PUBLIC","public",199],["T_WHITESPACE"," ",199],["T_FUNCTION","function",199],["T_WHITESPACE"," ",199],["T_STRING","loadVariationByFallback",199],"(",["T_STRING","Product",199],["T_WHITESPACE"," ",199],["T_VARIABLE","$parentProduct",199],",",["T_WHITESPACE"," ",199],["T_ARRAY","array",199],["T_WHITESPACE"," ",199],["T_VARIABLE","$attributes",199],")",["T_WHITESPACE","\n    ",199],"{",["T_WHITESPACE","\n        ",200],["T_IF","if",201],["T_WHITESPACE"," ",201],"(","!",["T_WHITESPACE"," ",201],["T_VARIABLE","$this",201],["T_OBJECT_OPERATOR","->",201],["T_STRING","isProductHasSwatch",201],"(",["T_VARIABLE","$parentProduct",201],")",")",["T_WHITESPACE"," ",201],"{",["T_WHITESPACE","\n            ",201],["T_RETURN","return",202],["T_WHITESPACE"," ",202],["T_STRING","false",202],";",["T_WHITESPACE","\n        ",202],"}",["T_WHITESPACE","\n\n        ",203],["T_VARIABLE","$productCollection",205],["T_WHITESPACE"," ",205],"=",["T_WHITESPACE"," ",205],["T_VARIABLE","$this",205],["T_OBJECT_OPERATOR","->",205],["T_STRING","productCollectionFactory",205],["T_OBJECT_OPERATOR","->",205],["T_STRING","create",205],"(",")",";",["T_WHITESPACE","\n\n        ",205],["T_VARIABLE","$productLinkedFiled",207],["T_WHITESPACE"," ",207],"=",["T_WHITESPACE"," ",207],["T_VARIABLE","$this",207],["T_OBJECT_OPERATOR","->",207],["T_STRING","getMetadataPool",207],"(",")",["T_WHITESPACE","\n            ",207],["T_OBJECT_OPERATOR","->",208],["T_STRING","getMetadata",208],"(",["T_NS_SEPARATOR","\\",208],["T_STRING","Magento",208],["T_NS_SEPARATOR","\\",208],["T_STRING","Catalog",208],["T_NS_SEPARATOR","\\",208],["T_STRING","Api",208],["T_NS_SEPARATOR","\\",208],["T_STRING","Data",208],["T_NS_SEPARATOR","\\",208],["T_STRING","ProductInterface",208],["T_DOUBLE_COLON","::",208],["T_CLASS","class",208],")",["T_WHITESPACE","\n            ",208],["T_OBJECT_OPERATOR","->",209],["T_STRING","getLinkField",209],"(",")",";",["T_WHITESPACE","\n        ",209],["T_VARIABLE","$parentId",210],["T_WHITESPACE"," ",210],"=",["T_WHITESPACE"," ",210],["T_VARIABLE","$parentProduct",210],["T_OBJECT_OPERATOR","->",210],["T_STRING","getData",210],"(",["T_VARIABLE","$productLinkedFiled",210],")",";",["T_WHITESPACE","\n\n        ",210],["T_VARIABLE","$this",212],["T_OBJECT_OPERATOR","->",212],["T_STRING","addFilterByParent",212],"(",["T_VARIABLE","$productCollection",212],",",["T_WHITESPACE"," ",212],["T_VARIABLE","$parentId",212],")",";",["T_WHITESPACE","\n\n        ",212],["T_VARIABLE","$configurableAttributes",214],["T_WHITESPACE"," ",214],"=",["T_WHITESPACE"," ",214],["T_VARIABLE","$this",214],["T_OBJECT_OPERATOR","->",214],["T_STRING","getAttributesFromConfigurable",214],"(",["T_VARIABLE","$parentProduct",214],")",";",["T_WHITESPACE","\n        ",214],["T_VARIABLE","$allAttributesArray",215],["T_WHITESPACE"," ",215],"=",["T_WHITESPACE"," ",215],"[","]",";",["T_WHITESPACE","\n        ",215],["T_FOREACH","foreach",216],["T_WHITESPACE"," ",216],"(",["T_VARIABLE","$configurableAttributes",216],["T_WHITESPACE"," ",216],["T_AS","as",216],["T_WHITESPACE"," ",216],["T_VARIABLE","$attribute",216],")",["T_WHITESPACE"," ",216],"{",["T_WHITESPACE","\n            ",216],["T_VARIABLE","$allAttributesArray",217],"[",["T_VARIABLE","$attribute",217],"[",["T_CONSTANT_ENCAPSED_STRING","'attribute_code'",217],"]","]",["T_WHITESPACE"," ",217],"=",["T_WHITESPACE"," ",217],["T_VARIABLE","$attribute",217],"[",["T_CONSTANT_ENCAPSED_STRING","'default_value'",217],"]",";",["T_WHITESPACE","\n        ",217],"}",["T_WHITESPACE","\n\n        ",218],["T_VARIABLE","$resultAttributesToFilter",220],["T_WHITESPACE"," ",220],"=",["T_WHITESPACE"," ",220],["T_STRING","array_merge",220],"(",["T_WHITESPACE","\n            ",220],["T_VARIABLE","$attributes",221],",",["T_WHITESPACE","\n            ",221],["T_STRING","array_diff_key",222],"(",["T_VARIABLE","$allAttributesArray",222],",",["T_WHITESPACE"," ",222],["T_VARIABLE","$attributes",222],")",["T_WHITESPACE","\n        ",222],")",";",["T_WHITESPACE","\n\n        ",223],["T_VARIABLE","$this",225],["T_OBJECT_OPERATOR","->",225],["T_STRING","addFilterByAttributes",225],"(",["T_VARIABLE","$productCollection",225],",",["T_WHITESPACE"," ",225],["T_VARIABLE","$resultAttributesToFilter",225],")",";",["T_WHITESPACE","\n\n        ",225],["T_VARIABLE","$variationProduct",227],["T_WHITESPACE"," ",227],"=",["T_WHITESPACE"," ",227],["T_VARIABLE","$productCollection",227],["T_OBJECT_OPERATOR","->",227],["T_STRING","getFirstItem",227],"(",")",";",["T_WHITESPACE","\n        ",227],["T_IF","if",228],["T_WHITESPACE"," ",228],"(",["T_VARIABLE","$variationProduct",228],["T_WHITESPACE"," ",228],["T_BOOLEAN_AND","&&",228],["T_WHITESPACE"," ",228],["T_VARIABLE","$variationProduct",228],["T_OBJECT_OPERATOR","->",228],["T_STRING","getId",228],"(",")",")",["T_WHITESPACE"," ",228],"{",["T_WHITESPACE","\n            ",228],["T_RETURN","return",229],["T_WHITESPACE"," ",229],["T_VARIABLE","$this",229],["T_OBJECT_OPERATOR","->",229],["T_STRING","productRepository",229],["T_OBJECT_OPERATOR","->",229],["T_STRING","getById",229],"(",["T_VARIABLE","$variationProduct",229],["T_OBJECT_OPERATOR","->",229],["T_STRING","getId",229],"(",")",")",";",["T_WHITESPACE","\n        ",229],"}",["T_WHITESPACE","\n\n        ",230],["T_RETURN","return",232],["T_WHITESPACE"," ",232],["T_STRING","false",232],";",["T_WHITESPACE","\n    ",232],"}",["T_WHITESPACE","\n\n    ",233],["T_DOC_COMMENT","\/**\n     * @param ProductCollection $productCollection\n     * @param array $attributes\n     * @return void\n     *\/",235],["T_WHITESPACE","\n    ",239],["T_PRIVATE","private",240],["T_WHITESPACE"," ",240],["T_FUNCTION","function",240],["T_WHITESPACE"," ",240],["T_STRING","addFilterByAttributes",240],"(",["T_STRING","ProductCollection",240],["T_WHITESPACE"," ",240],["T_VARIABLE","$productCollection",240],",",["T_WHITESPACE"," ",240],["T_ARRAY","array",240],["T_WHITESPACE"," ",240],["T_VARIABLE","$attributes",240],")",["T_WHITESPACE","\n    ",240],"{",["T_WHITESPACE","\n        ",241],["T_FOREACH","foreach",242],["T_WHITESPACE"," ",242],"(",["T_VARIABLE","$attributes",242],["T_WHITESPACE"," ",242],["T_AS","as",242],["T_WHITESPACE"," ",242],["T_VARIABLE","$code",242],["T_WHITESPACE"," ",242],["T_DOUBLE_ARROW","=>",242],["T_WHITESPACE"," ",242],["T_VARIABLE","$option",242],")",["T_WHITESPACE"," ",242],"{",["T_WHITESPACE","\n            ",242],["T_VARIABLE","$productCollection",243],["T_OBJECT_OPERATOR","->",243],["T_STRING","addAttributeToFilter",243],"(",["T_VARIABLE","$code",243],",",["T_WHITESPACE"," ",243],"[",["T_CONSTANT_ENCAPSED_STRING","'eq'",243],["T_WHITESPACE"," ",243],["T_DOUBLE_ARROW","=>",243],["T_WHITESPACE"," ",243],["T_VARIABLE","$option",243],"]",")",";",["T_WHITESPACE","\n        ",243],"}",["T_WHITESPACE","\n    ",244],"}",["T_WHITESPACE","\n\n    ",245],["T_DOC_COMMENT","\/**\n     * @param ProductCollection $productCollection\n     * @param integer $parentId\n     * @return void\n     *\/",247],["T_WHITESPACE","\n    ",251],["T_PRIVATE","private",252],["T_WHITESPACE"," ",252],["T_FUNCTION","function",252],["T_WHITESPACE"," ",252],["T_STRING","addFilterByParent",252],"(",["T_STRING","ProductCollection",252],["T_WHITESPACE"," ",252],["T_VARIABLE","$productCollection",252],",",["T_WHITESPACE"," ",252],["T_VARIABLE","$parentId",252],")",["T_WHITESPACE","\n    ",252],"{",["T_WHITESPACE","\n        ",253],["T_VARIABLE","$tableProductRelation",254],["T_WHITESPACE"," ",254],"=",["T_WHITESPACE"," ",254],["T_VARIABLE","$productCollection",254],["T_OBJECT_OPERATOR","->",254],["T_STRING","getTable",254],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog_product_relation'",254],")",";",["T_WHITESPACE","\n        ",254],["T_VARIABLE","$productCollection",255],["T_WHITESPACE","\n            ",255],["T_OBJECT_OPERATOR","->",256],["T_STRING","getSelect",256],"(",")",["T_WHITESPACE","\n            ",256],["T_OBJECT_OPERATOR","->",257],["T_STRING","join",257],"(",["T_WHITESPACE","\n                ",257],"[",["T_CONSTANT_ENCAPSED_STRING","'pr'",258],["T_WHITESPACE"," ",258],["T_DOUBLE_ARROW","=>",258],["T_WHITESPACE"," ",258],["T_VARIABLE","$tableProductRelation",258],"]",",",["T_WHITESPACE","\n                ",258],["T_CONSTANT_ENCAPSED_STRING","'e.entity_id = pr.child_id'",259],["T_WHITESPACE","\n            ",259],")",["T_WHITESPACE","\n            ",260],["T_OBJECT_OPERATOR","->",261],["T_STRING","where",261],"(",["T_CONSTANT_ENCAPSED_STRING","'pr.parent_id = ?'",261],",",["T_WHITESPACE"," ",261],["T_VARIABLE","$parentId",261],")",";",["T_WHITESPACE","\n    ",261],"}",["T_WHITESPACE","\n\n    ",262],["T_DOC_COMMENT","\/**\n     * Method getting full media gallery for current Product\n     * Array structure: [\n     *  ['image'] => 'http:\/\/url\/pub\/media\/catalog\/product\/2\/0\/blabla.jpg',\n     *  ['mediaGallery'] => [\n     *      galleryImageId1 => simpleProductImage1.jpg,\n     *      galleryImageId2 => simpleProductImage2.jpg,\n     *      ...,\n     *      ]\n     * ]\n     * @param ModelProduct $product\n     * @return array\n     *\/",264],["T_WHITESPACE","\n    ",276],["T_PUBLIC","public",277],["T_WHITESPACE"," ",277],["T_FUNCTION","function",277],["T_WHITESPACE"," ",277],["T_STRING","getProductMediaGallery",277],"(",["T_STRING","ModelProduct",277],["T_WHITESPACE"," ",277],["T_VARIABLE","$product",277],")",["T_WHITESPACE","\n    ",277],"{",["T_WHITESPACE","\n        ",278],["T_IF","if",279],["T_WHITESPACE"," ",279],"(","!",["T_STRING","in_array",279],"(",["T_VARIABLE","$product",279],["T_OBJECT_OPERATOR","->",279],["T_STRING","getData",279],"(",["T_CONSTANT_ENCAPSED_STRING","'image'",279],")",",",["T_WHITESPACE"," ",279],"[",["T_STRING","null",279],",",["T_WHITESPACE"," ",279],["T_STRING","self",279],["T_DOUBLE_COLON","::",279],["T_STRING","EMPTY_IMAGE_VALUE",279],"]",",",["T_WHITESPACE"," ",279],["T_STRING","true",279],")",")",["T_WHITESPACE"," ",279],"{",["T_WHITESPACE","\n            ",279],["T_VARIABLE","$baseImage",280],["T_WHITESPACE"," ",280],"=",["T_WHITESPACE"," ",280],["T_VARIABLE","$product",280],["T_OBJECT_OPERATOR","->",280],["T_STRING","getData",280],"(",["T_CONSTANT_ENCAPSED_STRING","'image'",280],")",";",["T_WHITESPACE","\n        ",280],"}",["T_WHITESPACE"," ",281],["T_ELSE","else",281],["T_WHITESPACE"," ",281],"{",["T_WHITESPACE","\n            ",281],["T_VARIABLE","$productMediaAttributes",282],["T_WHITESPACE"," ",282],"=",["T_WHITESPACE"," ",282],["T_STRING","array_filter",282],"(",["T_VARIABLE","$product",282],["T_OBJECT_OPERATOR","->",282],["T_STRING","getMediaAttributeValues",282],"(",")",",",["T_WHITESPACE"," ",282],["T_FUNCTION","function",282],["T_WHITESPACE"," ",282],"(",["T_VARIABLE","$value",282],")",["T_WHITESPACE"," ",282],"{",["T_WHITESPACE","\n                ",282],["T_RETURN","return",283],["T_WHITESPACE"," ",283],["T_VARIABLE","$value",283],["T_WHITESPACE"," ",283],["T_IS_NOT_IDENTICAL","!==",283],["T_WHITESPACE"," ",283],["T_STRING","self",283],["T_DOUBLE_COLON","::",283],["T_STRING","EMPTY_IMAGE_VALUE",283],["T_WHITESPACE"," ",283],["T_BOOLEAN_AND","&&",283],["T_WHITESPACE"," ",283],["T_VARIABLE","$value",283],["T_WHITESPACE"," ",283],["T_IS_NOT_IDENTICAL","!==",283],["T_WHITESPACE"," ",283],["T_STRING","null",283],";",["T_WHITESPACE","\n            ",283],"}",")",";",["T_WHITESPACE","\n            ",284],["T_FOREACH","foreach",285],["T_WHITESPACE"," ",285],"(",["T_VARIABLE","$productMediaAttributes",285],["T_WHITESPACE"," ",285],["T_AS","as",285],["T_WHITESPACE"," ",285],["T_VARIABLE","$attributeCode",285],["T_WHITESPACE"," ",285],["T_DOUBLE_ARROW","=>",285],["T_WHITESPACE"," ",285],["T_VARIABLE","$value",285],")",["T_WHITESPACE"," ",285],"{",["T_WHITESPACE","\n                ",285],["T_IF","if",286],["T_WHITESPACE"," ",286],"(",["T_VARIABLE","$attributeCode",286],["T_WHITESPACE"," ",286],["T_IS_NOT_IDENTICAL","!==",286],["T_WHITESPACE"," ",286],["T_CONSTANT_ENCAPSED_STRING","'swatch_image'",286],")",["T_WHITESPACE"," ",286],"{",["T_WHITESPACE","\n                    ",286],["T_VARIABLE","$baseImage",287],["T_WHITESPACE"," ",287],"=",["T_WHITESPACE"," ",287],["T_STRING_CAST","(string)",287],["T_VARIABLE","$value",287],";",["T_WHITESPACE","\n                    ",287],["T_BREAK","break",288],";",["T_WHITESPACE","\n                ",288],"}",["T_WHITESPACE","\n            ",289],"}",["T_WHITESPACE","\n        ",290],"}",["T_WHITESPACE","\n\n        ",291],["T_IF","if",293],["T_WHITESPACE"," ",293],"(",["T_EMPTY","empty",293],"(",["T_VARIABLE","$baseImage",293],")",")",["T_WHITESPACE"," ",293],"{",["T_WHITESPACE","\n            ",293],["T_RETURN","return",294],["T_WHITESPACE"," ",294],"[","]",";",["T_WHITESPACE","\n        ",294],"}",["T_WHITESPACE","\n\n        ",295],["T_VARIABLE","$resultGallery",297],["T_WHITESPACE"," ",297],"=",["T_WHITESPACE"," ",297],["T_VARIABLE","$this",297],["T_OBJECT_OPERATOR","->",297],["T_STRING","getAllSizeImages",297],"(",["T_VARIABLE","$product",297],",",["T_WHITESPACE"," ",297],["T_VARIABLE","$baseImage",297],")",";",["T_WHITESPACE","\n        ",297],["T_VARIABLE","$resultGallery",298],"[",["T_CONSTANT_ENCAPSED_STRING","'gallery'",298],"]",["T_WHITESPACE"," ",298],"=",["T_WHITESPACE"," ",298],["T_VARIABLE","$this",298],["T_OBJECT_OPERATOR","->",298],["T_STRING","getGalleryImages",298],"(",["T_VARIABLE","$product",298],")",";",["T_WHITESPACE","\n\n        ",298],["T_RETURN","return",300],["T_WHITESPACE"," ",300],["T_VARIABLE","$resultGallery",300],";",["T_WHITESPACE","\n    ",300],"}",["T_WHITESPACE","\n\n    ",301],["T_DOC_COMMENT","\/**\n     * @param ModelProduct $product\n     * @return array\n     *\/",303],["T_WHITESPACE","\n    ",306],["T_PRIVATE","private",307],["T_WHITESPACE"," ",307],["T_FUNCTION","function",307],["T_WHITESPACE"," ",307],["T_STRING","getGalleryImages",307],"(",["T_STRING","ModelProduct",307],["T_WHITESPACE"," ",307],["T_VARIABLE","$product",307],")",["T_WHITESPACE","\n    ",307],"{",["T_WHITESPACE","\n        ",308],["T_COMMENT","\/\/TODO: remove after fix MAGETWO-48040\n",309],["T_WHITESPACE","        ",310],["T_VARIABLE","$product",310],["T_WHITESPACE"," ",310],"=",["T_WHITESPACE"," ",310],["T_VARIABLE","$this",310],["T_OBJECT_OPERATOR","->",310],["T_STRING","productRepository",310],["T_OBJECT_OPERATOR","->",310],["T_STRING","getById",310],"(",["T_VARIABLE","$product",310],["T_OBJECT_OPERATOR","->",310],["T_STRING","getId",310],"(",")",")",";",["T_WHITESPACE","\n\n        ",310],["T_VARIABLE","$result",312],["T_WHITESPACE"," ",312],"=",["T_WHITESPACE"," ",312],"[","]",";",["T_WHITESPACE","\n        ",312],["T_VARIABLE","$mediaGallery",313],["T_WHITESPACE"," ",313],"=",["T_WHITESPACE"," ",313],["T_VARIABLE","$product",313],["T_OBJECT_OPERATOR","->",313],["T_STRING","getMediaGalleryImages",313],"(",")",";",["T_WHITESPACE","\n        ",313],["T_FOREACH","foreach",314],["T_WHITESPACE"," ",314],"(",["T_VARIABLE","$mediaGallery",314],["T_WHITESPACE"," ",314],["T_AS","as",314],["T_WHITESPACE"," ",314],["T_VARIABLE","$media",314],")",["T_WHITESPACE"," ",314],"{",["T_WHITESPACE","\n            ",314],["T_VARIABLE","$result",315],"[",["T_VARIABLE","$media",315],["T_OBJECT_OPERATOR","->",315],["T_STRING","getData",315],"(",["T_CONSTANT_ENCAPSED_STRING","'value_id'",315],")","]",["T_WHITESPACE"," ",315],"=",["T_WHITESPACE"," ",315],["T_VARIABLE","$this",315],["T_OBJECT_OPERATOR","->",315],["T_STRING","getAllSizeImages",315],"(",["T_WHITESPACE","\n                ",315],["T_VARIABLE","$product",316],",",["T_WHITESPACE","\n                ",316],["T_VARIABLE","$media",317],["T_OBJECT_OPERATOR","->",317],["T_STRING","getData",317],"(",["T_CONSTANT_ENCAPSED_STRING","'file'",317],")",["T_WHITESPACE","\n            ",317],")",";",["T_WHITESPACE","\n        ",318],"}",["T_WHITESPACE","\n        ",319],["T_RETURN","return",320],["T_WHITESPACE"," ",320],["T_VARIABLE","$result",320],";",["T_WHITESPACE","\n    ",320],"}",["T_WHITESPACE","\n\n    ",321],["T_DOC_COMMENT","\/**\n     * @param ModelProduct $product\n     * @param string $imageFile\n     * @return array\n     *\/",323],["T_WHITESPACE","\n    ",327],["T_PRIVATE","private",328],["T_WHITESPACE"," ",328],["T_FUNCTION","function",328],["T_WHITESPACE"," ",328],["T_STRING","getAllSizeImages",328],"(",["T_STRING","ModelProduct",328],["T_WHITESPACE"," ",328],["T_VARIABLE","$product",328],",",["T_WHITESPACE"," ",328],["T_VARIABLE","$imageFile",328],")",["T_WHITESPACE","\n    ",328],"{",["T_WHITESPACE","\n        ",329],["T_RETURN","return",330],["T_WHITESPACE"," ",330],"[",["T_WHITESPACE","\n            ",330],["T_CONSTANT_ENCAPSED_STRING","'large'",331],["T_WHITESPACE"," ",331],["T_DOUBLE_ARROW","=>",331],["T_WHITESPACE"," ",331],["T_VARIABLE","$this",331],["T_OBJECT_OPERATOR","->",331],["T_STRING","imageHelper",331],["T_OBJECT_OPERATOR","->",331],["T_STRING","init",331],"(",["T_VARIABLE","$product",331],",",["T_WHITESPACE"," ",331],["T_CONSTANT_ENCAPSED_STRING","'product_page_image_large_no_frame'",331],")",["T_WHITESPACE","\n                ",331],["T_OBJECT_OPERATOR","->",332],["T_STRING","setImageFile",332],"(",["T_VARIABLE","$imageFile",332],")",["T_WHITESPACE","\n                ",332],["T_OBJECT_OPERATOR","->",333],["T_STRING","getUrl",333],"(",")",",",["T_WHITESPACE","\n            ",333],["T_CONSTANT_ENCAPSED_STRING","'medium'",334],["T_WHITESPACE"," ",334],["T_DOUBLE_ARROW","=>",334],["T_WHITESPACE"," ",334],["T_VARIABLE","$this",334],["T_OBJECT_OPERATOR","->",334],["T_STRING","imageHelper",334],["T_OBJECT_OPERATOR","->",334],["T_STRING","init",334],"(",["T_VARIABLE","$product",334],",",["T_WHITESPACE"," ",334],["T_CONSTANT_ENCAPSED_STRING","'product_page_image_medium_no_frame'",334],")",["T_WHITESPACE","\n                ",334],["T_OBJECT_OPERATOR","->",335],["T_STRING","setImageFile",335],"(",["T_VARIABLE","$imageFile",335],")",["T_WHITESPACE","\n                ",335],["T_OBJECT_OPERATOR","->",336],["T_STRING","getUrl",336],"(",")",",",["T_WHITESPACE","\n            ",336],["T_CONSTANT_ENCAPSED_STRING","'small'",337],["T_WHITESPACE"," ",337],["T_DOUBLE_ARROW","=>",337],["T_WHITESPACE"," ",337],["T_VARIABLE","$this",337],["T_OBJECT_OPERATOR","->",337],["T_STRING","imageHelper",337],["T_OBJECT_OPERATOR","->",337],["T_STRING","init",337],"(",["T_VARIABLE","$product",337],",",["T_WHITESPACE"," ",337],["T_CONSTANT_ENCAPSED_STRING","'product_page_image_small'",337],")",["T_WHITESPACE","\n                ",337],["T_OBJECT_OPERATOR","->",338],["T_STRING","setImageFile",338],"(",["T_VARIABLE","$imageFile",338],")",["T_WHITESPACE","\n                ",338],["T_OBJECT_OPERATOR","->",339],["T_STRING","getUrl",339],"(",")",",",["T_WHITESPACE","\n        ",339],"]",";",["T_WHITESPACE","\n    ",340],"}",["T_WHITESPACE","\n\n    ",341],["T_DOC_COMMENT","\/**\n     * Retrieve collection of Swatch attributes\n     *\n     * @param Product $product\n     * @return \\Magento\\Catalog\\Model\\ResourceModel\\Eav\\Attribute[]\n     *\/",343],["T_WHITESPACE","\n    ",348],["T_PRIVATE","private",349],["T_WHITESPACE"," ",349],["T_FUNCTION","function",349],["T_WHITESPACE"," ",349],["T_STRING","getSwatchAttributes",349],"(",["T_STRING","Product",349],["T_WHITESPACE"," ",349],["T_VARIABLE","$product",349],")",["T_WHITESPACE","\n    ",349],"{",["T_WHITESPACE","\n        ",350],["T_VARIABLE","$attributes",351],["T_WHITESPACE"," ",351],"=",["T_WHITESPACE"," ",351],["T_VARIABLE","$this",351],["T_OBJECT_OPERATOR","->",351],["T_STRING","getAttributesFromConfigurable",351],"(",["T_VARIABLE","$product",351],")",";",["T_WHITESPACE","\n        ",351],["T_VARIABLE","$result",352],["T_WHITESPACE"," ",352],"=",["T_WHITESPACE"," ",352],"[","]",";",["T_WHITESPACE","\n        ",352],["T_FOREACH","foreach",353],["T_WHITESPACE"," ",353],"(",["T_VARIABLE","$attributes",353],["T_WHITESPACE"," ",353],["T_AS","as",353],["T_WHITESPACE"," ",353],["T_VARIABLE","$attribute",353],")",["T_WHITESPACE"," ",353],"{",["T_WHITESPACE","\n            ",353],["T_IF","if",354],["T_WHITESPACE"," ",354],"(",["T_VARIABLE","$this",354],["T_OBJECT_OPERATOR","->",354],["T_STRING","isSwatchAttribute",354],"(",["T_VARIABLE","$attribute",354],")",")",["T_WHITESPACE"," ",354],"{",["T_WHITESPACE","\n                ",354],["T_VARIABLE","$result",355],"[","]",["T_WHITESPACE"," ",355],"=",["T_WHITESPACE"," ",355],["T_VARIABLE","$attribute",355],";",["T_WHITESPACE","\n            ",355],"}",["T_WHITESPACE","\n        ",356],"}",["T_WHITESPACE","\n        ",357],["T_RETURN","return",358],["T_WHITESPACE"," ",358],["T_VARIABLE","$result",358],";",["T_WHITESPACE","\n    ",358],"}",["T_WHITESPACE","\n\n    ",359],["T_DOC_COMMENT","\/**\n     * Retrieve collection of Eav Attributes from Configurable product\n     *\n     * @param Product $product\n     * @return \\Magento\\Catalog\\Model\\ResourceModel\\Eav\\Attribute[]\n     *\/",361],["T_WHITESPACE","\n    ",366],["T_PUBLIC","public",367],["T_WHITESPACE"," ",367],["T_FUNCTION","function",367],["T_WHITESPACE"," ",367],["T_STRING","getAttributesFromConfigurable",367],"(",["T_STRING","Product",367],["T_WHITESPACE"," ",367],["T_VARIABLE","$product",367],")",["T_WHITESPACE","\n    ",367],"{",["T_WHITESPACE","\n        ",368],["T_VARIABLE","$result",369],["T_WHITESPACE"," ",369],"=",["T_WHITESPACE"," ",369],"[","]",";",["T_WHITESPACE","\n        ",369],["T_VARIABLE","$typeInstance",370],["T_WHITESPACE"," ",370],"=",["T_WHITESPACE"," ",370],["T_VARIABLE","$product",370],["T_OBJECT_OPERATOR","->",370],["T_STRING","getTypeInstance",370],"(",")",";",["T_WHITESPACE","\n        ",370],["T_IF","if",371],["T_WHITESPACE"," ",371],"(",["T_VARIABLE","$typeInstance",371],["T_WHITESPACE"," ",371],["T_INSTANCEOF","instanceof",371],["T_WHITESPACE"," ",371],["T_STRING","Configurable",371],")",["T_WHITESPACE"," ",371],"{",["T_WHITESPACE","\n            ",371],["T_VARIABLE","$configurableAttributes",372],["T_WHITESPACE"," ",372],"=",["T_WHITESPACE"," ",372],["T_VARIABLE","$typeInstance",372],["T_OBJECT_OPERATOR","->",372],["T_STRING","getConfigurableAttributes",372],"(",["T_VARIABLE","$product",372],")",";",["T_WHITESPACE","\n            ",372],["T_DOC_COMMENT","\/** @var \\Magento\\ConfigurableProduct\\Model\\Product\\Type\\Configurable\\Attribute $configurableAttribute *\/",373],["T_WHITESPACE","\n            ",373],["T_FOREACH","foreach",374],["T_WHITESPACE"," ",374],"(",["T_VARIABLE","$configurableAttributes",374],["T_WHITESPACE"," ",374],["T_AS","as",374],["T_WHITESPACE"," ",374],["T_VARIABLE","$configurableAttribute",374],")",["T_WHITESPACE"," ",374],"{",["T_WHITESPACE","\n                ",374],["T_DOC_COMMENT","\/** @var \\Magento\\Catalog\\Model\\ResourceModel\\Eav\\Attribute $attribute *\/",375],["T_WHITESPACE","\n                ",375],["T_VARIABLE","$attribute",376],["T_WHITESPACE"," ",376],"=",["T_WHITESPACE"," ",376],["T_VARIABLE","$configurableAttribute",376],["T_OBJECT_OPERATOR","->",376],["T_STRING","getProductAttribute",376],"(",")",";",["T_WHITESPACE","\n                ",376],["T_VARIABLE","$result",377],"[","]",["T_WHITESPACE"," ",377],"=",["T_WHITESPACE"," ",377],["T_VARIABLE","$attribute",377],";",["T_WHITESPACE","\n            ",377],"}",["T_WHITESPACE","\n        ",378],"}",["T_WHITESPACE","\n        ",379],["T_RETURN","return",380],["T_WHITESPACE"," ",380],["T_VARIABLE","$result",380],";",["T_WHITESPACE","\n    ",380],"}",["T_WHITESPACE","\n\n    ",381],["T_DOC_COMMENT","\/**\n     * Retrieve all visible Swatch attributes for current product.\n     *\n     * @param Product $product\n     * @return array\n     *\/",383],["T_WHITESPACE","\n    ",388],["T_PUBLIC","public",389],["T_WHITESPACE"," ",389],["T_FUNCTION","function",389],["T_WHITESPACE"," ",389],["T_STRING","getSwatchAttributesAsArray",389],"(",["T_STRING","Product",389],["T_WHITESPACE"," ",389],["T_VARIABLE","$product",389],")",["T_WHITESPACE","\n    ",389],"{",["T_WHITESPACE","\n        ",390],["T_VARIABLE","$result",391],["T_WHITESPACE"," ",391],"=",["T_WHITESPACE"," ",391],"[","]",";",["T_WHITESPACE","\n        ",391],["T_VARIABLE","$swatchAttributes",392],["T_WHITESPACE"," ",392],"=",["T_WHITESPACE"," ",392],["T_VARIABLE","$this",392],["T_OBJECT_OPERATOR","->",392],["T_STRING","getSwatchAttributes",392],"(",["T_VARIABLE","$product",392],")",";",["T_WHITESPACE","\n        ",392],["T_FOREACH","foreach",393],["T_WHITESPACE"," ",393],"(",["T_VARIABLE","$swatchAttributes",393],["T_WHITESPACE"," ",393],["T_AS","as",393],["T_WHITESPACE"," ",393],["T_VARIABLE","$swatchAttribute",393],")",["T_WHITESPACE"," ",393],"{",["T_WHITESPACE","\n            ",393],["T_VARIABLE","$swatchAttribute",394],["T_OBJECT_OPERATOR","->",394],["T_STRING","setStoreId",394],"(",["T_VARIABLE","$this",394],["T_OBJECT_OPERATOR","->",394],["T_STRING","storeManager",394],["T_OBJECT_OPERATOR","->",394],["T_STRING","getStore",394],"(",")",["T_OBJECT_OPERATOR","->",394],["T_STRING","getId",394],"(",")",")",";",["T_WHITESPACE","\n            ",394],["T_VARIABLE","$attributeData",395],["T_WHITESPACE"," ",395],"=",["T_WHITESPACE"," ",395],["T_VARIABLE","$swatchAttribute",395],["T_OBJECT_OPERATOR","->",395],["T_STRING","getData",395],"(",")",";",["T_WHITESPACE","\n            ",395],["T_FOREACH","foreach",396],["T_WHITESPACE"," ",396],"(",["T_VARIABLE","$swatchAttribute",396],["T_OBJECT_OPERATOR","->",396],["T_STRING","getSource",396],"(",")",["T_OBJECT_OPERATOR","->",396],["T_STRING","getAllOptions",396],"(",["T_STRING","false",396],")",["T_WHITESPACE"," ",396],["T_AS","as",396],["T_WHITESPACE"," ",396],["T_VARIABLE","$option",396],")",["T_WHITESPACE"," ",396],"{",["T_WHITESPACE","\n                ",396],["T_VARIABLE","$attributeData",397],"[",["T_CONSTANT_ENCAPSED_STRING","'options'",397],"]","[",["T_VARIABLE","$option",397],"[",["T_CONSTANT_ENCAPSED_STRING","'value'",397],"]","]",["T_WHITESPACE"," ",397],"=",["T_WHITESPACE"," ",397],["T_VARIABLE","$option",397],"[",["T_CONSTANT_ENCAPSED_STRING","'label'",397],"]",";",["T_WHITESPACE","\n            ",397],"}",["T_WHITESPACE","\n            ",398],["T_VARIABLE","$result",399],"[",["T_VARIABLE","$attributeData",399],"[",["T_CONSTANT_ENCAPSED_STRING","'attribute_id'",399],"]","]",["T_WHITESPACE"," ",399],"=",["T_WHITESPACE"," ",399],["T_VARIABLE","$attributeData",399],";",["T_WHITESPACE","\n        ",399],"}",["T_WHITESPACE","\n\n        ",400],["T_RETURN","return",402],["T_WHITESPACE"," ",402],["T_VARIABLE","$result",402],";",["T_WHITESPACE","\n    ",402],"}",["T_WHITESPACE","\n\n    ",403],["T_DOC_COMMENT","\/**\n     * Get swatch options by option id's according to fallback logic\n     *\n     * @param array $optionIds\n     * @return array\n     *\/",405],["T_WHITESPACE","\n    ",410],["T_PUBLIC","public",411],["T_WHITESPACE"," ",411],["T_FUNCTION","function",411],["T_WHITESPACE"," ",411],["T_STRING","getSwatchesByOptionsId",411],"(",["T_ARRAY","array",411],["T_WHITESPACE"," ",411],["T_VARIABLE","$optionIds",411],")",["T_WHITESPACE","\n    ",411],"{",["T_WHITESPACE","\n        ",412],["T_DOC_COMMENT","\/** @var \\Magento\\Swatches\\Model\\ResourceModel\\Swatch\\Collection $swatchCollection *\/",413],["T_WHITESPACE","\n        ",413],["T_VARIABLE","$swatchCollection",414],["T_WHITESPACE"," ",414],"=",["T_WHITESPACE"," ",414],["T_VARIABLE","$this",414],["T_OBJECT_OPERATOR","->",414],["T_STRING","swatchCollectionFactory",414],["T_OBJECT_OPERATOR","->",414],["T_STRING","create",414],"(",")",";",["T_WHITESPACE","\n        ",414],["T_VARIABLE","$swatchCollection",415],["T_OBJECT_OPERATOR","->",415],["T_STRING","addFilterByOptionsIds",415],"(",["T_VARIABLE","$optionIds",415],")",";",["T_WHITESPACE","\n\n        ",415],["T_VARIABLE","$swatches",417],["T_WHITESPACE"," ",417],"=",["T_WHITESPACE"," ",417],"[","]",";",["T_WHITESPACE","\n        ",417],["T_VARIABLE","$currentStoreId",418],["T_WHITESPACE"," ",418],"=",["T_WHITESPACE"," ",418],["T_VARIABLE","$this",418],["T_OBJECT_OPERATOR","->",418],["T_STRING","storeManager",418],["T_OBJECT_OPERATOR","->",418],["T_STRING","getStore",418],"(",")",["T_OBJECT_OPERATOR","->",418],["T_STRING","getId",418],"(",")",";",["T_WHITESPACE","\n        ",418],["T_FOREACH","foreach",419],["T_WHITESPACE"," ",419],"(",["T_VARIABLE","$swatchCollection",419],["T_WHITESPACE"," ",419],["T_AS","as",419],["T_WHITESPACE"," ",419],["T_VARIABLE","$item",419],")",["T_WHITESPACE"," ",419],"{",["T_WHITESPACE","\n            ",419],["T_IF","if",420],["T_WHITESPACE"," ",420],"(",["T_VARIABLE","$item",420],"[",["T_CONSTANT_ENCAPSED_STRING","'type'",420],"]",["T_WHITESPACE"," ",420],["T_IS_NOT_EQUAL","!=",420],["T_WHITESPACE"," ",420],["T_STRING","Swatch",420],["T_DOUBLE_COLON","::",420],["T_STRING","SWATCH_TYPE_TEXTUAL",420],")",["T_WHITESPACE"," ",420],"{",["T_WHITESPACE","\n                ",420],["T_VARIABLE","$swatches",421],"[",["T_VARIABLE","$item",421],"[",["T_CONSTANT_ENCAPSED_STRING","'option_id'",421],"]","]",["T_WHITESPACE"," ",421],"=",["T_WHITESPACE"," ",421],["T_VARIABLE","$item",421],["T_OBJECT_OPERATOR","->",421],["T_STRING","getData",421],"(",")",";",["T_WHITESPACE","\n            ",421],"}",["T_WHITESPACE"," ",422],["T_ELSEIF","elseif",422],["T_WHITESPACE"," ",422],"(",["T_VARIABLE","$item",422],"[",["T_CONSTANT_ENCAPSED_STRING","'store_id'",422],"]",["T_WHITESPACE"," ",422],["T_IS_EQUAL","==",422],["T_WHITESPACE"," ",422],["T_VARIABLE","$currentStoreId",422],["T_WHITESPACE"," ",422],["T_BOOLEAN_AND","&&",422],["T_WHITESPACE"," ",422],["T_VARIABLE","$item",422],"[",["T_CONSTANT_ENCAPSED_STRING","'value'",422],"]",")",["T_WHITESPACE"," ",422],"{",["T_WHITESPACE","\n                ",422],["T_VARIABLE","$fallbackValues",423],"[",["T_VARIABLE","$item",423],"[",["T_CONSTANT_ENCAPSED_STRING","'option_id'",423],"]","]","[",["T_VARIABLE","$currentStoreId",423],"]",["T_WHITESPACE"," ",423],"=",["T_WHITESPACE"," ",423],["T_VARIABLE","$item",423],["T_OBJECT_OPERATOR","->",423],["T_STRING","getData",423],"(",")",";",["T_WHITESPACE","\n            ",423],"}",["T_WHITESPACE"," ",424],["T_ELSEIF","elseif",424],["T_WHITESPACE"," ",424],"(",["T_VARIABLE","$item",424],"[",["T_CONSTANT_ENCAPSED_STRING","'store_id'",424],"]",["T_WHITESPACE"," ",424],["T_IS_EQUAL","==",424],["T_WHITESPACE"," ",424],["T_STRING","self",424],["T_DOUBLE_COLON","::",424],["T_STRING","DEFAULT_STORE_ID",424],")",["T_WHITESPACE"," ",424],"{",["T_WHITESPACE","\n                ",424],["T_VARIABLE","$fallbackValues",425],"[",["T_VARIABLE","$item",425],"[",["T_CONSTANT_ENCAPSED_STRING","'option_id'",425],"]","]","[",["T_STRING","self",425],["T_DOUBLE_COLON","::",425],["T_STRING","DEFAULT_STORE_ID",425],"]",["T_WHITESPACE"," ",425],"=",["T_WHITESPACE"," ",425],["T_VARIABLE","$item",425],["T_OBJECT_OPERATOR","->",425],["T_STRING","getData",425],"(",")",";",["T_WHITESPACE","\n            ",425],"}",["T_WHITESPACE","\n        ",426],"}",["T_WHITESPACE","\n\n        ",427],["T_IF","if",429],["T_WHITESPACE"," ",429],"(","!",["T_EMPTY","empty",429],"(",["T_VARIABLE","$fallbackValues",429],")",")",["T_WHITESPACE"," ",429],"{",["T_WHITESPACE","\n            ",429],["T_VARIABLE","$swatches",430],["T_WHITESPACE"," ",430],"=",["T_WHITESPACE"," ",430],["T_VARIABLE","$this",430],["T_OBJECT_OPERATOR","->",430],["T_STRING","addFallbackOptions",430],"(",["T_VARIABLE","$fallbackValues",430],",",["T_WHITESPACE"," ",430],["T_VARIABLE","$swatches",430],")",";",["T_WHITESPACE","\n        ",430],"}",["T_WHITESPACE","\n\n        ",431],["T_RETURN","return",433],["T_WHITESPACE"," ",433],["T_VARIABLE","$swatches",433],";",["T_WHITESPACE","\n    ",433],"}",["T_WHITESPACE","\n\n    ",434],["T_DOC_COMMENT","\/**\n     * @param array $fallbackValues\n     * @param array $swatches\n     * @return array\n     *\/",436],["T_WHITESPACE","\n    ",440],["T_PRIVATE","private",441],["T_WHITESPACE"," ",441],["T_FUNCTION","function",441],["T_WHITESPACE"," ",441],["T_STRING","addFallbackOptions",441],"(",["T_ARRAY","array",441],["T_WHITESPACE"," ",441],["T_VARIABLE","$fallbackValues",441],",",["T_WHITESPACE"," ",441],["T_ARRAY","array",441],["T_WHITESPACE"," ",441],["T_VARIABLE","$swatches",441],")",["T_WHITESPACE","\n    ",441],"{",["T_WHITESPACE","\n        ",442],["T_VARIABLE","$currentStoreId",443],["T_WHITESPACE"," ",443],"=",["T_WHITESPACE"," ",443],["T_VARIABLE","$this",443],["T_OBJECT_OPERATOR","->",443],["T_STRING","storeManager",443],["T_OBJECT_OPERATOR","->",443],["T_STRING","getStore",443],"(",")",["T_OBJECT_OPERATOR","->",443],["T_STRING","getId",443],"(",")",";",["T_WHITESPACE","\n        ",443],["T_FOREACH","foreach",444],["T_WHITESPACE"," ",444],"(",["T_VARIABLE","$fallbackValues",444],["T_WHITESPACE"," ",444],["T_AS","as",444],["T_WHITESPACE"," ",444],["T_VARIABLE","$optionId",444],["T_WHITESPACE"," ",444],["T_DOUBLE_ARROW","=>",444],["T_WHITESPACE"," ",444],["T_VARIABLE","$optionsArray",444],")",["T_WHITESPACE"," ",444],"{",["T_WHITESPACE","\n            ",444],["T_IF","if",445],["T_WHITESPACE"," ",445],"(",["T_ISSET","isset",445],"(",["T_VARIABLE","$optionsArray",445],"[",["T_VARIABLE","$currentStoreId",445],"]",")",")",["T_WHITESPACE"," ",445],"{",["T_WHITESPACE","\n                ",445],["T_VARIABLE","$swatches",446],"[",["T_VARIABLE","$optionId",446],"]",["T_WHITESPACE"," ",446],"=",["T_WHITESPACE"," ",446],["T_VARIABLE","$optionsArray",446],"[",["T_VARIABLE","$currentStoreId",446],"]",";",["T_WHITESPACE","\n            ",446],"}",["T_WHITESPACE"," ",447],["T_ELSE","else",447],["T_WHITESPACE"," ",447],"{",["T_WHITESPACE","\n                ",447],["T_VARIABLE","$swatches",448],"[",["T_VARIABLE","$optionId",448],"]",["T_WHITESPACE"," ",448],"=",["T_WHITESPACE"," ",448],["T_VARIABLE","$optionsArray",448],"[",["T_STRING","self",448],["T_DOUBLE_COLON","::",448],["T_STRING","DEFAULT_STORE_ID",448],"]",";",["T_WHITESPACE","\n            ",448],"}",["T_WHITESPACE","\n        ",449],"}",["T_WHITESPACE","\n\n        ",450],["T_RETURN","return",452],["T_WHITESPACE"," ",452],["T_VARIABLE","$swatches",452],";",["T_WHITESPACE","\n    ",452],"}",["T_WHITESPACE","\n\n    ",453],["T_DOC_COMMENT","\/**\n     * Check if the Product has Swatch attributes\n     *\n     * @param Product $product\n     * @return bool\n     *\/",455],["T_WHITESPACE","\n    ",460],["T_PUBLIC","public",461],["T_WHITESPACE"," ",461],["T_FUNCTION","function",461],["T_WHITESPACE"," ",461],["T_STRING","isProductHasSwatch",461],"(",["T_STRING","Product",461],["T_WHITESPACE"," ",461],["T_VARIABLE","$product",461],")",["T_WHITESPACE","\n    ",461],"{",["T_WHITESPACE","\n        ",462],["T_RETURN","return",463],["T_WHITESPACE"," ",463],["T_STRING","sizeof",463],"(",["T_VARIABLE","$this",463],["T_OBJECT_OPERATOR","->",463],["T_STRING","getSwatchAttributes",463],"(",["T_VARIABLE","$product",463],")",")",";",["T_WHITESPACE","\n    ",463],"}",["T_WHITESPACE","\n\n    ",464],["T_DOC_COMMENT","\/**\n     * Check if an attribute is Swatch\n     *\n     * @param Attribute $attribute\n     * @return bool\n     *\/",466],["T_WHITESPACE","\n    ",471],["T_PUBLIC","public",472],["T_WHITESPACE"," ",472],["T_FUNCTION","function",472],["T_WHITESPACE"," ",472],["T_STRING","isSwatchAttribute",472],"(",["T_STRING","Attribute",472],["T_WHITESPACE"," ",472],["T_VARIABLE","$attribute",472],")",["T_WHITESPACE","\n    ",472],"{",["T_WHITESPACE","\n        ",473],["T_VARIABLE","$result",474],["T_WHITESPACE"," ",474],"=",["T_WHITESPACE"," ",474],["T_VARIABLE","$this",474],["T_OBJECT_OPERATOR","->",474],["T_STRING","isVisualSwatch",474],"(",["T_VARIABLE","$attribute",474],")",["T_WHITESPACE"," ",474],["T_BOOLEAN_OR","||",474],["T_WHITESPACE"," ",474],["T_VARIABLE","$this",474],["T_OBJECT_OPERATOR","->",474],["T_STRING","isTextSwatch",474],"(",["T_VARIABLE","$attribute",474],")",";",["T_WHITESPACE","\n        ",474],["T_RETURN","return",475],["T_WHITESPACE"," ",475],["T_VARIABLE","$result",475],";",["T_WHITESPACE","\n    ",475],"}",["T_WHITESPACE","\n\n    ",476],["T_DOC_COMMENT","\/**\n     * Is attribute Visual Swatch\n     *\n     * @param Attribute $attribute\n     * @return bool\n     *\/",478],["T_WHITESPACE","\n    ",483],["T_PUBLIC","public",484],["T_WHITESPACE"," ",484],["T_FUNCTION","function",484],["T_WHITESPACE"," ",484],["T_STRING","isVisualSwatch",484],"(",["T_STRING","Attribute",484],["T_WHITESPACE"," ",484],["T_VARIABLE","$attribute",484],")",["T_WHITESPACE","\n    ",484],"{",["T_WHITESPACE","\n        ",485],["T_IF","if",486],["T_WHITESPACE"," ",486],"(","!",["T_VARIABLE","$attribute",486],["T_OBJECT_OPERATOR","->",486],["T_STRING","hasData",486],"(",["T_STRING","Swatch",486],["T_DOUBLE_COLON","::",486],["T_STRING","SWATCH_INPUT_TYPE_KEY",486],")",")",["T_WHITESPACE"," ",486],"{",["T_WHITESPACE","\n            ",486],["T_VARIABLE","$this",487],["T_OBJECT_OPERATOR","->",487],["T_STRING","populateAdditionalDataEavAttribute",487],"(",["T_VARIABLE","$attribute",487],")",";",["T_WHITESPACE","\n        ",487],"}",["T_WHITESPACE","\n        ",488],["T_RETURN","return",489],["T_WHITESPACE"," ",489],["T_VARIABLE","$attribute",489],["T_OBJECT_OPERATOR","->",489],["T_STRING","getData",489],"(",["T_STRING","Swatch",489],["T_DOUBLE_COLON","::",489],["T_STRING","SWATCH_INPUT_TYPE_KEY",489],")",["T_WHITESPACE"," ",489],["T_IS_EQUAL","==",489],["T_WHITESPACE"," ",489],["T_STRING","Swatch",489],["T_DOUBLE_COLON","::",489],["T_STRING","SWATCH_INPUT_TYPE_VISUAL",489],";",["T_WHITESPACE","\n    ",489],"}",["T_WHITESPACE","\n\n    ",490],["T_DOC_COMMENT","\/**\n     * Is attribute Textual Swatch\n     *\n     * @param Attribute $attribute\n     * @return bool\n     *\/",492],["T_WHITESPACE","\n    ",497],["T_PUBLIC","public",498],["T_WHITESPACE"," ",498],["T_FUNCTION","function",498],["T_WHITESPACE"," ",498],["T_STRING","isTextSwatch",498],"(",["T_STRING","Attribute",498],["T_WHITESPACE"," ",498],["T_VARIABLE","$attribute",498],")",["T_WHITESPACE","\n    ",498],"{",["T_WHITESPACE","\n        ",499],["T_IF","if",500],["T_WHITESPACE"," ",500],"(","!",["T_VARIABLE","$attribute",500],["T_OBJECT_OPERATOR","->",500],["T_STRING","hasData",500],"(",["T_STRING","Swatch",500],["T_DOUBLE_COLON","::",500],["T_STRING","SWATCH_INPUT_TYPE_KEY",500],")",")",["T_WHITESPACE"," ",500],"{",["T_WHITESPACE","\n            ",500],["T_VARIABLE","$this",501],["T_OBJECT_OPERATOR","->",501],["T_STRING","populateAdditionalDataEavAttribute",501],"(",["T_VARIABLE","$attribute",501],")",";",["T_WHITESPACE","\n        ",501],"}",["T_WHITESPACE","\n        ",502],["T_RETURN","return",503],["T_WHITESPACE"," ",503],["T_VARIABLE","$attribute",503],["T_OBJECT_OPERATOR","->",503],["T_STRING","getData",503],"(",["T_STRING","Swatch",503],["T_DOUBLE_COLON","::",503],["T_STRING","SWATCH_INPUT_TYPE_KEY",503],")",["T_WHITESPACE"," ",503],["T_IS_EQUAL","==",503],["T_WHITESPACE"," ",503],["T_STRING","Swatch",503],["T_DOUBLE_COLON","::",503],["T_STRING","SWATCH_INPUT_TYPE_TEXT",503],";",["T_WHITESPACE","\n    ",503],"}",["T_WHITESPACE","\n\n    ",504],["T_DOC_COMMENT","\/**\n     * Get product metadata pool.\n     *\n     * @return \\Magento\\Framework\\EntityManager\\MetadataPool\n     * @deprecared\n     *\/",506],["T_WHITESPACE","\n    ",511],["T_PROTECTED","protected",512],["T_WHITESPACE"," ",512],["T_FUNCTION","function",512],["T_WHITESPACE"," ",512],["T_STRING","getMetadataPool",512],"(",")",["T_WHITESPACE","\n    ",512],"{",["T_WHITESPACE","\n        ",513],["T_IF","if",514],["T_WHITESPACE"," ",514],"(","!",["T_VARIABLE","$this",514],["T_OBJECT_OPERATOR","->",514],["T_STRING","metadataPool",514],")",["T_WHITESPACE"," ",514],"{",["T_WHITESPACE","\n            ",514],["T_VARIABLE","$this",515],["T_OBJECT_OPERATOR","->",515],["T_STRING","metadataPool",515],["T_WHITESPACE"," ",515],"=",["T_WHITESPACE"," ",515],["T_NS_SEPARATOR","\\",515],["T_STRING","Magento",515],["T_NS_SEPARATOR","\\",515],["T_STRING","Framework",515],["T_NS_SEPARATOR","\\",515],["T_STRING","App",515],["T_NS_SEPARATOR","\\",515],["T_STRING","ObjectManager",515],["T_DOUBLE_COLON","::",515],["T_STRING","getInstance",515],"(",")",["T_WHITESPACE","\n                ",515],["T_OBJECT_OPERATOR","->",516],["T_STRING","get",516],"(",["T_NS_SEPARATOR","\\",516],["T_STRING","Magento",516],["T_NS_SEPARATOR","\\",516],["T_STRING","Framework",516],["T_NS_SEPARATOR","\\",516],["T_STRING","EntityManager",516],["T_NS_SEPARATOR","\\",516],["T_STRING","MetadataPool",516],["T_DOUBLE_COLON","::",516],["T_CLASS","class",516],")",";",["T_WHITESPACE","\n        ",516],"}",["T_WHITESPACE","\n        ",517],["T_RETURN","return",518],["T_WHITESPACE"," ",518],["T_VARIABLE","$this",518],["T_OBJECT_OPERATOR","->",518],["T_STRING","metadataPool",518],";",["T_WHITESPACE","\n    ",518],"}",["T_WHITESPACE","\n",519],"}",["T_WHITESPACE","\n",520]]
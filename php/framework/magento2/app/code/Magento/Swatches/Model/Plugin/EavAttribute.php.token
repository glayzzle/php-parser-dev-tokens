[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Copyright \u00c2\u00a9 2013-2017 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n *\/",2],["T_WHITESPACE","\n",5],["T_NAMESPACE","namespace",6],["T_WHITESPACE"," ",6],["T_STRING","Magento",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Swatches",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Model",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Plugin",6],";",["T_WHITESPACE","\n\n",6],["T_USE","use",8],["T_WHITESPACE"," ",8],["T_STRING","Magento",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Catalog",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Model",8],["T_NS_SEPARATOR","\\",8],["T_STRING","ResourceModel",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Eav",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Attribute",8],";",["T_WHITESPACE","\n",8],["T_USE","use",9],["T_WHITESPACE"," ",9],["T_STRING","Magento",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Swatches",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Model",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Swatch",9],";",["T_WHITESPACE","\n",9],["T_USE","use",10],["T_WHITESPACE"," ",10],["T_STRING","Magento",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Framework",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Exception",10],["T_NS_SEPARATOR","\\",10],["T_STRING","InputException",10],";",["T_WHITESPACE","\n\n",10],["T_DOC_COMMENT","\/**\n * Plugin model for Catalog Resource Attribute\n *\/",12],["T_WHITESPACE","\n",14],["T_CLASS","class",15],["T_WHITESPACE"," ",15],["T_STRING","EavAttribute",15],["T_WHITESPACE","\n",15],"{",["T_WHITESPACE","\n    ",16],["T_CONST","const",17],["T_WHITESPACE"," ",17],["T_STRING","DEFAULT_STORE_ID",17],["T_WHITESPACE"," ",17],"=",["T_WHITESPACE"," ",17],["T_LNUMBER","0",17],";",["T_WHITESPACE","\n\n    ",17],["T_DOC_COMMENT","\/**\n     * Base option title used for string operations to detect is option already exists or new\n     *\/",19],["T_WHITESPACE","\n    ",21],["T_CONST","const",22],["T_WHITESPACE"," ",22],["T_STRING","BASE_OPTION_TITLE",22],["T_WHITESPACE"," ",22],"=",["T_WHITESPACE"," ",22],["T_CONSTANT_ENCAPSED_STRING","'option'",22],";",["T_WHITESPACE","\n\n    ",22],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Swatches\\Model\\ResourceModel\\Swatch\\CollectionFactory\n     *\/",24],["T_WHITESPACE","\n    ",26],["T_PROTECTED","protected",27],["T_WHITESPACE"," ",27],["T_VARIABLE","$swatchCollectionFactory",27],";",["T_WHITESPACE","\n\n    ",27],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Swatches\\Model\\SwatchFactory\n     *\/",29],["T_WHITESPACE","\n    ",31],["T_PROTECTED","protected",32],["T_WHITESPACE"," ",32],["T_VARIABLE","$swatchFactory",32],";",["T_WHITESPACE","\n\n    ",32],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Swatches\\Helper\\Data\n     *\/",34],["T_WHITESPACE","\n    ",36],["T_PROTECTED","protected",37],["T_WHITESPACE"," ",37],["T_VARIABLE","$swatchHelper",37],";",["T_WHITESPACE","\n\n    ",37],["T_DOC_COMMENT","\/**\n     * Array which contains links for new created attributes for swatches\n     *\n     * @var array\n     *\/",39],["T_WHITESPACE","\n    ",43],["T_PROTECTED","protected",44],["T_WHITESPACE"," ",44],["T_VARIABLE","$dependencyArray",44],["T_WHITESPACE"," ",44],"=",["T_WHITESPACE"," ",44],"[","]",";",["T_WHITESPACE","\n\n    ",44],["T_DOC_COMMENT","\/**\n     * Swatch existing status\n     *\n     * @var bool\n     *\/",46],["T_WHITESPACE","\n    ",50],["T_PROTECTED","protected",51],["T_WHITESPACE"," ",51],["T_VARIABLE","$isSwatchExists",51],";",["T_WHITESPACE","\n\n    ",51],["T_DOC_COMMENT","\/**\n     * @param \\Magento\\Swatches\\Model\\ResourceModel\\Swatch\\CollectionFactory $collectionFactory\n     * @param \\Magento\\Swatches\\Model\\SwatchFactory $swatchFactory\n     * @param \\Magento\\Swatches\\Helper\\Data $swatchHelper\n     *\/",53],["T_WHITESPACE","\n    ",57],["T_PUBLIC","public",58],["T_WHITESPACE"," ",58],["T_FUNCTION","function",58],["T_WHITESPACE"," ",58],["T_STRING","__construct",58],"(",["T_WHITESPACE","\n        ",58],["T_NS_SEPARATOR","\\",59],["T_STRING","Magento",59],["T_NS_SEPARATOR","\\",59],["T_STRING","Swatches",59],["T_NS_SEPARATOR","\\",59],["T_STRING","Model",59],["T_NS_SEPARATOR","\\",59],["T_STRING","ResourceModel",59],["T_NS_SEPARATOR","\\",59],["T_STRING","Swatch",59],["T_NS_SEPARATOR","\\",59],["T_STRING","CollectionFactory",59],["T_WHITESPACE"," ",59],["T_VARIABLE","$collectionFactory",59],",",["T_WHITESPACE","\n        ",59],["T_NS_SEPARATOR","\\",60],["T_STRING","Magento",60],["T_NS_SEPARATOR","\\",60],["T_STRING","Swatches",60],["T_NS_SEPARATOR","\\",60],["T_STRING","Model",60],["T_NS_SEPARATOR","\\",60],["T_STRING","SwatchFactory",60],["T_WHITESPACE"," ",60],["T_VARIABLE","$swatchFactory",60],",",["T_WHITESPACE","\n        ",60],["T_NS_SEPARATOR","\\",61],["T_STRING","Magento",61],["T_NS_SEPARATOR","\\",61],["T_STRING","Swatches",61],["T_NS_SEPARATOR","\\",61],["T_STRING","Helper",61],["T_NS_SEPARATOR","\\",61],["T_STRING","Data",61],["T_WHITESPACE"," ",61],["T_VARIABLE","$swatchHelper",61],["T_WHITESPACE","\n    ",61],")",["T_WHITESPACE"," ",62],"{",["T_WHITESPACE","\n        ",62],["T_VARIABLE","$this",63],["T_OBJECT_OPERATOR","->",63],["T_STRING","swatchCollectionFactory",63],["T_WHITESPACE"," ",63],"=",["T_WHITESPACE"," ",63],["T_VARIABLE","$collectionFactory",63],";",["T_WHITESPACE","\n        ",63],["T_VARIABLE","$this",64],["T_OBJECT_OPERATOR","->",64],["T_STRING","swatchFactory",64],["T_WHITESPACE"," ",64],"=",["T_WHITESPACE"," ",64],["T_VARIABLE","$swatchFactory",64],";",["T_WHITESPACE","\n        ",64],["T_VARIABLE","$this",65],["T_OBJECT_OPERATOR","->",65],["T_STRING","swatchHelper",65],["T_WHITESPACE"," ",65],"=",["T_WHITESPACE"," ",65],["T_VARIABLE","$swatchHelper",65],";",["T_WHITESPACE","\n    ",65],"}",["T_WHITESPACE","\n\n    ",66],["T_DOC_COMMENT","\/**\n     * Set base data to Attribute\n     *\n     * @param Attribute $attribute\n     * @return void\n     *\/",68],["T_WHITESPACE","\n    ",73],["T_PUBLIC","public",74],["T_WHITESPACE"," ",74],["T_FUNCTION","function",74],["T_WHITESPACE"," ",74],["T_STRING","beforeSave",74],"(",["T_STRING","Attribute",74],["T_WHITESPACE"," ",74],["T_VARIABLE","$attribute",74],")",["T_WHITESPACE","\n    ",74],"{",["T_WHITESPACE","\n        ",75],["T_IF","if",76],["T_WHITESPACE"," ",76],"(",["T_VARIABLE","$this",76],["T_OBJECT_OPERATOR","->",76],["T_STRING","swatchHelper",76],["T_OBJECT_OPERATOR","->",76],["T_STRING","isSwatchAttribute",76],"(",["T_VARIABLE","$attribute",76],")",")",["T_WHITESPACE"," ",76],"{",["T_WHITESPACE","\n            ",76],["T_VARIABLE","$this",77],["T_OBJECT_OPERATOR","->",77],["T_STRING","setProperOptionsArray",77],"(",["T_VARIABLE","$attribute",77],")",";",["T_WHITESPACE","\n            ",77],["T_VARIABLE","$this",78],["T_OBJECT_OPERATOR","->",78],["T_STRING","validateOptions",78],"(",["T_VARIABLE","$attribute",78],")",";",["T_WHITESPACE","\n            ",78],["T_VARIABLE","$this",79],["T_OBJECT_OPERATOR","->",79],["T_STRING","swatchHelper",79],["T_OBJECT_OPERATOR","->",79],["T_STRING","assembleAdditionalDataEavAttribute",79],"(",["T_VARIABLE","$attribute",79],")",";",["T_WHITESPACE","\n        ",79],"}",["T_WHITESPACE","\n        ",80],["T_VARIABLE","$this",81],["T_OBJECT_OPERATOR","->",81],["T_STRING","convertSwatchToDropdown",81],"(",["T_VARIABLE","$attribute",81],")",";",["T_WHITESPACE","\n    ",81],"}",["T_WHITESPACE","\n\n    ",82],["T_DOC_COMMENT","\/**\n     * Swatch save operations\n     *\n     * @param Attribute $attribute\n     * @throws \\Magento\\Framework\\Exception\\LocalizedException\n     * @return void\n     *\/",84],["T_WHITESPACE","\n    ",90],["T_PUBLIC","public",91],["T_WHITESPACE"," ",91],["T_FUNCTION","function",91],["T_WHITESPACE"," ",91],["T_STRING","afterAfterSave",91],"(",["T_STRING","Attribute",91],["T_WHITESPACE"," ",91],["T_VARIABLE","$attribute",91],")",["T_WHITESPACE","\n    ",91],"{",["T_WHITESPACE","\n        ",92],["T_IF","if",93],["T_WHITESPACE"," ",93],"(",["T_VARIABLE","$this",93],["T_OBJECT_OPERATOR","->",93],["T_STRING","swatchHelper",93],["T_OBJECT_OPERATOR","->",93],["T_STRING","isSwatchAttribute",93],"(",["T_VARIABLE","$attribute",93],")",")",["T_WHITESPACE"," ",93],"{",["T_WHITESPACE","\n            ",93],["T_VARIABLE","$this",94],["T_OBJECT_OPERATOR","->",94],["T_STRING","processSwatchOptions",94],"(",["T_VARIABLE","$attribute",94],")",";",["T_WHITESPACE","\n            ",94],["T_VARIABLE","$this",95],["T_OBJECT_OPERATOR","->",95],["T_STRING","saveDefaultSwatchOptionValue",95],"(",["T_VARIABLE","$attribute",95],")",";",["T_WHITESPACE","\n            ",95],["T_VARIABLE","$this",96],["T_OBJECT_OPERATOR","->",96],["T_STRING","saveSwatchParams",96],"(",["T_VARIABLE","$attribute",96],")",";",["T_WHITESPACE","\n        ",96],"}",["T_WHITESPACE","\n    ",97],"}",["T_WHITESPACE","\n\n    ",98],["T_DOC_COMMENT","\/**\n     * Substitute suitable options and swatches arrays\n     *\n     * @param Attribute $attribute\n     * @return void\n     *\/",100],["T_WHITESPACE","\n    ",105],["T_PROTECTED","protected",106],["T_WHITESPACE"," ",106],["T_FUNCTION","function",106],["T_WHITESPACE"," ",106],["T_STRING","setProperOptionsArray",106],"(",["T_STRING","Attribute",106],["T_WHITESPACE"," ",106],["T_VARIABLE","$attribute",106],")",["T_WHITESPACE","\n    ",106],"{",["T_WHITESPACE","\n        ",107],["T_VARIABLE","$canReplace",108],["T_WHITESPACE"," ",108],"=",["T_WHITESPACE"," ",108],["T_STRING","false",108],";",["T_WHITESPACE","\n        ",108],["T_IF","if",109],["T_WHITESPACE"," ",109],"(",["T_VARIABLE","$this",109],["T_OBJECT_OPERATOR","->",109],["T_STRING","swatchHelper",109],["T_OBJECT_OPERATOR","->",109],["T_STRING","isVisualSwatch",109],"(",["T_VARIABLE","$attribute",109],")",")",["T_WHITESPACE"," ",109],"{",["T_WHITESPACE","\n            ",109],["T_VARIABLE","$canReplace",110],["T_WHITESPACE"," ",110],"=",["T_WHITESPACE"," ",110],["T_STRING","true",110],";",["T_WHITESPACE","\n            ",110],["T_VARIABLE","$defaultValue",111],["T_WHITESPACE"," ",111],"=",["T_WHITESPACE"," ",111],["T_VARIABLE","$attribute",111],["T_OBJECT_OPERATOR","->",111],["T_STRING","getData",111],"(",["T_CONSTANT_ENCAPSED_STRING","'defaultvisual'",111],")",";",["T_WHITESPACE","\n            ",111],["T_VARIABLE","$optionsArray",112],["T_WHITESPACE"," ",112],"=",["T_WHITESPACE"," ",112],["T_VARIABLE","$attribute",112],["T_OBJECT_OPERATOR","->",112],["T_STRING","getData",112],"(",["T_CONSTANT_ENCAPSED_STRING","'optionvisual'",112],")",";",["T_WHITESPACE","\n            ",112],["T_VARIABLE","$swatchesArray",113],["T_WHITESPACE"," ",113],"=",["T_WHITESPACE"," ",113],["T_VARIABLE","$attribute",113],["T_OBJECT_OPERATOR","->",113],["T_STRING","getData",113],"(",["T_CONSTANT_ENCAPSED_STRING","'swatchvisual'",113],")",";",["T_WHITESPACE","\n        ",113],"}",["T_WHITESPACE"," ",114],["T_ELSEIF","elseif",114],["T_WHITESPACE"," ",114],"(",["T_VARIABLE","$this",114],["T_OBJECT_OPERATOR","->",114],["T_STRING","swatchHelper",114],["T_OBJECT_OPERATOR","->",114],["T_STRING","isTextSwatch",114],"(",["T_VARIABLE","$attribute",114],")",")",["T_WHITESPACE"," ",114],"{",["T_WHITESPACE","\n            ",114],["T_VARIABLE","$canReplace",115],["T_WHITESPACE"," ",115],"=",["T_WHITESPACE"," ",115],["T_STRING","true",115],";",["T_WHITESPACE","\n            ",115],["T_VARIABLE","$defaultValue",116],["T_WHITESPACE"," ",116],"=",["T_WHITESPACE"," ",116],["T_VARIABLE","$attribute",116],["T_OBJECT_OPERATOR","->",116],["T_STRING","getData",116],"(",["T_CONSTANT_ENCAPSED_STRING","'defaulttext'",116],")",";",["T_WHITESPACE","\n            ",116],["T_VARIABLE","$optionsArray",117],["T_WHITESPACE"," ",117],"=",["T_WHITESPACE"," ",117],["T_VARIABLE","$attribute",117],["T_OBJECT_OPERATOR","->",117],["T_STRING","getData",117],"(",["T_CONSTANT_ENCAPSED_STRING","'optiontext'",117],")",";",["T_WHITESPACE","\n            ",117],["T_VARIABLE","$swatchesArray",118],["T_WHITESPACE"," ",118],"=",["T_WHITESPACE"," ",118],["T_VARIABLE","$attribute",118],["T_OBJECT_OPERATOR","->",118],["T_STRING","getData",118],"(",["T_CONSTANT_ENCAPSED_STRING","'swatchtext'",118],")",";",["T_WHITESPACE","\n        ",118],"}",["T_WHITESPACE","\n        ",119],["T_IF","if",120],["T_WHITESPACE"," ",120],"(",["T_VARIABLE","$canReplace",120],["T_WHITESPACE"," ",120],["T_IS_EQUAL","==",120],["T_WHITESPACE"," ",120],["T_STRING","true",120],")",["T_WHITESPACE"," ",120],"{",["T_WHITESPACE","\n            ",120],["T_VARIABLE","$attribute",121],["T_OBJECT_OPERATOR","->",121],["T_STRING","setData",121],"(",["T_CONSTANT_ENCAPSED_STRING","'option'",121],",",["T_WHITESPACE"," ",121],["T_VARIABLE","$optionsArray",121],")",";",["T_WHITESPACE","\n            ",121],["T_VARIABLE","$attribute",122],["T_OBJECT_OPERATOR","->",122],["T_STRING","setData",122],"(",["T_CONSTANT_ENCAPSED_STRING","'default'",122],",",["T_WHITESPACE"," ",122],["T_VARIABLE","$defaultValue",122],")",";",["T_WHITESPACE","\n            ",122],["T_VARIABLE","$attribute",123],["T_OBJECT_OPERATOR","->",123],["T_STRING","setData",123],"(",["T_CONSTANT_ENCAPSED_STRING","'swatch'",123],",",["T_WHITESPACE"," ",123],["T_VARIABLE","$swatchesArray",123],")",";",["T_WHITESPACE","\n        ",123],"}",["T_WHITESPACE","\n    ",124],"}",["T_WHITESPACE","\n\n    ",125],["T_DOC_COMMENT","\/**\n     * Prepare attribute for conversion from any swatch type to dropdown\n     *\n     * @param Attribute $attribute\n     * @return void\n     *\/",127],["T_WHITESPACE","\n    ",132],["T_PROTECTED","protected",133],["T_WHITESPACE"," ",133],["T_FUNCTION","function",133],["T_WHITESPACE"," ",133],["T_STRING","convertSwatchToDropdown",133],"(",["T_STRING","Attribute",133],["T_WHITESPACE"," ",133],["T_VARIABLE","$attribute",133],")",["T_WHITESPACE","\n    ",133],"{",["T_WHITESPACE","\n        ",134],["T_IF","if",135],["T_WHITESPACE"," ",135],"(",["T_VARIABLE","$attribute",135],["T_OBJECT_OPERATOR","->",135],["T_STRING","getData",135],"(",["T_STRING","Swatch",135],["T_DOUBLE_COLON","::",135],["T_STRING","SWATCH_INPUT_TYPE_KEY",135],")",["T_WHITESPACE"," ",135],["T_IS_EQUAL","==",135],["T_WHITESPACE"," ",135],["T_STRING","Swatch",135],["T_DOUBLE_COLON","::",135],["T_STRING","SWATCH_INPUT_TYPE_DROPDOWN",135],")",["T_WHITESPACE"," ",135],"{",["T_WHITESPACE","\n            ",135],["T_VARIABLE","$additionalData",136],["T_WHITESPACE"," ",136],"=",["T_WHITESPACE"," ",136],["T_VARIABLE","$attribute",136],["T_OBJECT_OPERATOR","->",136],["T_STRING","getData",136],"(",["T_CONSTANT_ENCAPSED_STRING","'additional_data'",136],")",";",["T_WHITESPACE","\n            ",136],["T_IF","if",137],["T_WHITESPACE"," ",137],"(","!",["T_EMPTY","empty",137],"(",["T_VARIABLE","$additionalData",137],")",")",["T_WHITESPACE"," ",137],"{",["T_WHITESPACE","\n                ",137],["T_VARIABLE","$additionalData",138],["T_WHITESPACE"," ",138],"=",["T_WHITESPACE"," ",138],["T_STRING","unserialize",138],"(",["T_VARIABLE","$additionalData",138],")",";",["T_WHITESPACE","\n                ",138],["T_IF","if",139],["T_WHITESPACE"," ",139],"(",["T_STRING","is_array",139],"(",["T_VARIABLE","$additionalData",139],")",["T_WHITESPACE"," ",139],["T_BOOLEAN_AND","&&",139],["T_WHITESPACE"," ",139],["T_ISSET","isset",139],"(",["T_VARIABLE","$additionalData",139],"[",["T_STRING","Swatch",139],["T_DOUBLE_COLON","::",139],["T_STRING","SWATCH_INPUT_TYPE_KEY",139],"]",")",")",["T_WHITESPACE"," ",139],"{",["T_WHITESPACE","\n                    ",139],["T_UNSET","unset",140],"(",["T_VARIABLE","$additionalData",140],"[",["T_STRING","Swatch",140],["T_DOUBLE_COLON","::",140],["T_STRING","SWATCH_INPUT_TYPE_KEY",140],"]",")",";",["T_WHITESPACE","\n                    ",140],["T_VARIABLE","$attribute",141],["T_OBJECT_OPERATOR","->",141],["T_STRING","setData",141],"(",["T_CONSTANT_ENCAPSED_STRING","'additional_data'",141],",",["T_WHITESPACE"," ",141],["T_STRING","serialize",141],"(",["T_VARIABLE","$additionalData",141],")",")",";",["T_WHITESPACE","\n                ",141],"}",["T_WHITESPACE","\n            ",142],"}",["T_WHITESPACE","\n        ",143],"}",["T_WHITESPACE","\n    ",144],"}",["T_WHITESPACE","\n\n    ",145],["T_DOC_COMMENT","\/**\n     * Creates array which link new option ids\n     *\n     * @param Attribute $attribute\n     * @return Attribute\n     * @throws \\Magento\\Framework\\Exception\\LocalizedException\n     *\/",147],["T_WHITESPACE","\n    ",153],["T_PROTECTED","protected",154],["T_WHITESPACE"," ",154],["T_FUNCTION","function",154],["T_WHITESPACE"," ",154],["T_STRING","processSwatchOptions",154],"(",["T_STRING","Attribute",154],["T_WHITESPACE"," ",154],["T_VARIABLE","$attribute",154],")",["T_WHITESPACE","\n    ",154],"{",["T_WHITESPACE","\n        ",155],["T_VARIABLE","$optionsArray",156],["T_WHITESPACE"," ",156],"=",["T_WHITESPACE"," ",156],["T_VARIABLE","$attribute",156],["T_OBJECT_OPERATOR","->",156],["T_STRING","getData",156],"(",["T_CONSTANT_ENCAPSED_STRING","'option'",156],")",";",["T_WHITESPACE","\n\n        ",156],["T_IF","if",158],["T_WHITESPACE"," ",158],"(","!",["T_EMPTY","empty",158],"(",["T_VARIABLE","$optionsArray",158],")",["T_WHITESPACE"," ",158],["T_BOOLEAN_AND","&&",158],["T_WHITESPACE"," ",158],["T_STRING","is_array",158],"(",["T_VARIABLE","$optionsArray",158],")",")",["T_WHITESPACE"," ",158],"{",["T_WHITESPACE","\n            ",158],["T_VARIABLE","$optionsArray",159],["T_WHITESPACE"," ",159],"=",["T_WHITESPACE"," ",159],["T_VARIABLE","$this",159],["T_OBJECT_OPERATOR","->",159],["T_STRING","prepareOptionIds",159],"(",["T_VARIABLE","$optionsArray",159],")",";",["T_WHITESPACE","\n            ",159],["T_VARIABLE","$attributeSavedOptions",160],["T_WHITESPACE"," ",160],"=",["T_WHITESPACE"," ",160],["T_VARIABLE","$attribute",160],["T_OBJECT_OPERATOR","->",160],["T_STRING","getSource",160],"(",")",["T_OBJECT_OPERATOR","->",160],["T_STRING","getAllOptions",160],"(",")",";",["T_WHITESPACE","\n            ",160],["T_VARIABLE","$this",161],["T_OBJECT_OPERATOR","->",161],["T_STRING","prepareOptionLinks",161],"(",["T_VARIABLE","$optionsArray",161],",",["T_WHITESPACE"," ",161],["T_VARIABLE","$attributeSavedOptions",161],")",";",["T_WHITESPACE","\n        ",161],"}",["T_WHITESPACE","\n\n        ",162],["T_RETURN","return",164],["T_WHITESPACE"," ",164],["T_VARIABLE","$attribute",164],";",["T_WHITESPACE","\n    ",164],"}",["T_WHITESPACE","\n\n    ",165],["T_DOC_COMMENT","\/**\n     * Get options array without deleted items\n     *\n     * @param array $optionsArray\n     * @return array\n     *\/",167],["T_WHITESPACE","\n    ",172],["T_PROTECTED","protected",173],["T_WHITESPACE"," ",173],["T_FUNCTION","function",173],["T_WHITESPACE"," ",173],["T_STRING","prepareOptionIds",173],"(",["T_ARRAY","array",173],["T_WHITESPACE"," ",173],["T_VARIABLE","$optionsArray",173],")",["T_WHITESPACE","\n    ",173],"{",["T_WHITESPACE","\n        ",174],["T_IF","if",175],["T_WHITESPACE"," ",175],"(",["T_ISSET","isset",175],"(",["T_VARIABLE","$optionsArray",175],"[",["T_CONSTANT_ENCAPSED_STRING","'value'",175],"]",")",["T_WHITESPACE"," ",175],["T_BOOLEAN_AND","&&",175],["T_WHITESPACE"," ",175],["T_STRING","is_array",175],"(",["T_VARIABLE","$optionsArray",175],"[",["T_CONSTANT_ENCAPSED_STRING","'value'",175],"]",")",")",["T_WHITESPACE"," ",175],"{",["T_WHITESPACE","\n            ",175],["T_FOREACH","foreach",176],["T_WHITESPACE"," ",176],"(",["T_STRING","array_keys",176],"(",["T_VARIABLE","$optionsArray",176],"[",["T_CONSTANT_ENCAPSED_STRING","'value'",176],"]",")",["T_WHITESPACE"," ",176],["T_AS","as",176],["T_WHITESPACE"," ",176],["T_VARIABLE","$optionId",176],")",["T_WHITESPACE"," ",176],"{",["T_WHITESPACE","\n                ",176],["T_IF","if",177],["T_WHITESPACE"," ",177],"(",["T_ISSET","isset",177],"(",["T_VARIABLE","$optionsArray",177],"[",["T_CONSTANT_ENCAPSED_STRING","'delete'",177],"]",")",["T_WHITESPACE"," ",177],["T_BOOLEAN_AND","&&",177],["T_WHITESPACE"," ",177],["T_VARIABLE","$optionsArray",177],"[",["T_CONSTANT_ENCAPSED_STRING","'delete'",177],"]","[",["T_VARIABLE","$optionId",177],"]",["T_WHITESPACE"," ",177],["T_IS_EQUAL","==",177],["T_WHITESPACE"," ",177],["T_LNUMBER","1",177],")",["T_WHITESPACE"," ",177],"{",["T_WHITESPACE","\n                    ",177],["T_UNSET","unset",178],"(",["T_VARIABLE","$optionsArray",178],"[",["T_CONSTANT_ENCAPSED_STRING","'value'",178],"]","[",["T_VARIABLE","$optionId",178],"]",")",";",["T_WHITESPACE","\n                ",178],"}",["T_WHITESPACE","\n            ",179],"}",["T_WHITESPACE","\n        ",180],"}",["T_WHITESPACE","\n        ",181],["T_RETURN","return",182],["T_WHITESPACE"," ",182],["T_VARIABLE","$optionsArray",182],";",["T_WHITESPACE","\n    ",182],"}",["T_WHITESPACE","\n\n    ",183],["T_DOC_COMMENT","\/**\n     * Create links for non existed swatch options\n     *\n     * @param array $optionsArray\n     * @param array $attributeSavedOptions\n     * @return void\n     *\/",185],["T_WHITESPACE","\n    ",191],["T_PROTECTED","protected",192],["T_WHITESPACE"," ",192],["T_FUNCTION","function",192],["T_WHITESPACE"," ",192],["T_STRING","prepareOptionLinks",192],"(",["T_ARRAY","array",192],["T_WHITESPACE"," ",192],["T_VARIABLE","$optionsArray",192],",",["T_WHITESPACE"," ",192],["T_ARRAY","array",192],["T_WHITESPACE"," ",192],["T_VARIABLE","$attributeSavedOptions",192],")",["T_WHITESPACE","\n    ",192],"{",["T_WHITESPACE","\n        ",193],["T_VARIABLE","$dependencyArray",194],["T_WHITESPACE"," ",194],"=",["T_WHITESPACE"," ",194],"[","]",";",["T_WHITESPACE","\n        ",194],["T_IF","if",195],["T_WHITESPACE"," ",195],"(",["T_STRING","is_array",195],"(",["T_VARIABLE","$optionsArray",195],"[",["T_CONSTANT_ENCAPSED_STRING","'value'",195],"]",")",")",["T_WHITESPACE"," ",195],"{",["T_WHITESPACE","\n            ",195],["T_VARIABLE","$optionCounter",196],["T_WHITESPACE"," ",196],"=",["T_WHITESPACE"," ",196],["T_LNUMBER","1",196],";",["T_WHITESPACE","\n            ",196],["T_FOREACH","foreach",197],["T_WHITESPACE"," ",197],"(",["T_STRING","array_keys",197],"(",["T_VARIABLE","$optionsArray",197],"[",["T_CONSTANT_ENCAPSED_STRING","'value'",197],"]",")",["T_WHITESPACE"," ",197],["T_AS","as",197],["T_WHITESPACE"," ",197],["T_VARIABLE","$baseOptionId",197],")",["T_WHITESPACE"," ",197],"{",["T_WHITESPACE","\n                ",197],["T_VARIABLE","$dependencyArray",198],"[",["T_VARIABLE","$baseOptionId",198],"]",["T_WHITESPACE"," ",198],"=",["T_WHITESPACE"," ",198],["T_VARIABLE","$attributeSavedOptions",198],"[",["T_VARIABLE","$optionCounter",198],"]","[",["T_CONSTANT_ENCAPSED_STRING","'value'",198],"]",";",["T_WHITESPACE","\n                ",198],["T_VARIABLE","$optionCounter",199],["T_INC","++",199],";",["T_WHITESPACE","\n            ",199],"}",["T_WHITESPACE","\n        ",200],"}",["T_WHITESPACE","\n\n        ",201],["T_VARIABLE","$this",203],["T_OBJECT_OPERATOR","->",203],["T_STRING","dependencyArray",203],["T_WHITESPACE"," ",203],"=",["T_WHITESPACE"," ",203],["T_VARIABLE","$dependencyArray",203],";",["T_WHITESPACE","\n    ",203],"}",["T_WHITESPACE","\n\n    ",204],["T_DOC_COMMENT","\/**\n     * Save all Swatches data\n     *\n     * @param Attribute $attribute\n     * @return void\n     *\/",206],["T_WHITESPACE","\n    ",211],["T_PROTECTED","protected",212],["T_WHITESPACE"," ",212],["T_FUNCTION","function",212],["T_WHITESPACE"," ",212],["T_STRING","saveSwatchParams",212],"(",["T_STRING","Attribute",212],["T_WHITESPACE"," ",212],["T_VARIABLE","$attribute",212],")",["T_WHITESPACE","\n    ",212],"{",["T_WHITESPACE","\n        ",213],["T_IF","if",214],["T_WHITESPACE"," ",214],"(",["T_VARIABLE","$this",214],["T_OBJECT_OPERATOR","->",214],["T_STRING","swatchHelper",214],["T_OBJECT_OPERATOR","->",214],["T_STRING","isVisualSwatch",214],"(",["T_VARIABLE","$attribute",214],")",")",["T_WHITESPACE"," ",214],"{",["T_WHITESPACE","\n            ",214],["T_VARIABLE","$this",215],["T_OBJECT_OPERATOR","->",215],["T_STRING","processVisualSwatch",215],"(",["T_VARIABLE","$attribute",215],")",";",["T_WHITESPACE","\n        ",215],"}",["T_WHITESPACE"," ",216],["T_ELSEIF","elseif",216],["T_WHITESPACE"," ",216],"(",["T_VARIABLE","$this",216],["T_OBJECT_OPERATOR","->",216],["T_STRING","swatchHelper",216],["T_OBJECT_OPERATOR","->",216],["T_STRING","isTextSwatch",216],"(",["T_VARIABLE","$attribute",216],")",")",["T_WHITESPACE"," ",216],"{",["T_WHITESPACE","\n            ",216],["T_VARIABLE","$this",217],["T_OBJECT_OPERATOR","->",217],["T_STRING","processTextualSwatch",217],"(",["T_VARIABLE","$attribute",217],")",";",["T_WHITESPACE","\n        ",217],"}",["T_WHITESPACE","\n    ",218],"}",["T_WHITESPACE","\n\n    ",219],["T_DOC_COMMENT","\/**\n     * Save Visual Swatch data\n     *\n     * @param Attribute $attribute\n     * @return void\n     *\/",221],["T_WHITESPACE","\n    ",226],["T_PROTECTED","protected",227],["T_WHITESPACE"," ",227],["T_FUNCTION","function",227],["T_WHITESPACE"," ",227],["T_STRING","processVisualSwatch",227],"(",["T_STRING","Attribute",227],["T_WHITESPACE"," ",227],["T_VARIABLE","$attribute",227],")",["T_WHITESPACE","\n    ",227],"{",["T_WHITESPACE","\n        ",228],["T_VARIABLE","$swatchArray",229],["T_WHITESPACE"," ",229],"=",["T_WHITESPACE"," ",229],["T_VARIABLE","$attribute",229],["T_OBJECT_OPERATOR","->",229],["T_STRING","getData",229],"(",["T_CONSTANT_ENCAPSED_STRING","'swatch\/value'",229],")",";",["T_WHITESPACE","\n        ",229],["T_IF","if",230],["T_WHITESPACE"," ",230],"(",["T_ISSET","isset",230],"(",["T_VARIABLE","$swatchArray",230],")",["T_WHITESPACE"," ",230],["T_BOOLEAN_AND","&&",230],["T_WHITESPACE"," ",230],["T_STRING","is_array",230],"(",["T_VARIABLE","$swatchArray",230],")",")",["T_WHITESPACE"," ",230],"{",["T_WHITESPACE","\n            ",230],["T_FOREACH","foreach",231],["T_WHITESPACE"," ",231],"(",["T_VARIABLE","$swatchArray",231],["T_WHITESPACE"," ",231],["T_AS","as",231],["T_WHITESPACE"," ",231],["T_VARIABLE","$optionId",231],["T_WHITESPACE"," ",231],["T_DOUBLE_ARROW","=>",231],["T_WHITESPACE"," ",231],["T_VARIABLE","$value",231],")",["T_WHITESPACE"," ",231],"{",["T_WHITESPACE","\n                ",231],["T_VARIABLE","$optionId",232],["T_WHITESPACE"," ",232],"=",["T_WHITESPACE"," ",232],["T_VARIABLE","$this",232],["T_OBJECT_OPERATOR","->",232],["T_STRING","getAttributeOptionId",232],"(",["T_VARIABLE","$optionId",232],")",";",["T_WHITESPACE","\n                ",232],["T_VARIABLE","$isOptionForDelete",233],["T_WHITESPACE"," ",233],"=",["T_WHITESPACE"," ",233],["T_VARIABLE","$this",233],["T_OBJECT_OPERATOR","->",233],["T_STRING","isOptionForDelete",233],"(",["T_VARIABLE","$attribute",233],",",["T_WHITESPACE"," ",233],["T_VARIABLE","$optionId",233],")",";",["T_WHITESPACE","\n                ",233],["T_IF","if",234],["T_WHITESPACE"," ",234],"(",["T_VARIABLE","$optionId",234],["T_WHITESPACE"," ",234],["T_IS_IDENTICAL","===",234],["T_WHITESPACE"," ",234],["T_STRING","null",234],["T_WHITESPACE"," ",234],["T_BOOLEAN_OR","||",234],["T_WHITESPACE"," ",234],["T_VARIABLE","$isOptionForDelete",234],")",["T_WHITESPACE"," ",234],"{",["T_WHITESPACE","\n                    ",234],["T_COMMENT","\/\/option was deleted by button with basket\n",235],["T_WHITESPACE","                    ",236],["T_CONTINUE","continue",236],";",["T_WHITESPACE","\n                ",236],"}",["T_WHITESPACE","\n                ",237],["T_VARIABLE","$swatch",238],["T_WHITESPACE"," ",238],"=",["T_WHITESPACE"," ",238],["T_VARIABLE","$this",238],["T_OBJECT_OPERATOR","->",238],["T_STRING","loadSwatchIfExists",238],"(",["T_VARIABLE","$optionId",238],",",["T_WHITESPACE"," ",238],["T_STRING","self",238],["T_DOUBLE_COLON","::",238],["T_STRING","DEFAULT_STORE_ID",238],")",";",["T_WHITESPACE","\n\n                ",238],["T_VARIABLE","$swatchType",240],["T_WHITESPACE"," ",240],"=",["T_WHITESPACE"," ",240],["T_VARIABLE","$this",240],["T_OBJECT_OPERATOR","->",240],["T_STRING","determineSwatchType",240],"(",["T_VARIABLE","$value",240],")",";",["T_WHITESPACE","\n\n                ",240],["T_VARIABLE","$this",242],["T_OBJECT_OPERATOR","->",242],["T_STRING","saveSwatchData",242],"(",["T_VARIABLE","$swatch",242],",",["T_WHITESPACE"," ",242],["T_VARIABLE","$optionId",242],",",["T_WHITESPACE"," ",242],["T_STRING","self",242],["T_DOUBLE_COLON","::",242],["T_STRING","DEFAULT_STORE_ID",242],",",["T_WHITESPACE"," ",242],["T_VARIABLE","$swatchType",242],",",["T_WHITESPACE"," ",242],["T_VARIABLE","$value",242],")",";",["T_WHITESPACE","\n                ",242],["T_VARIABLE","$this",243],["T_OBJECT_OPERATOR","->",243],["T_STRING","isSwatchExists",243],["T_WHITESPACE"," ",243],"=",["T_WHITESPACE"," ",243],["T_STRING","null",243],";",["T_WHITESPACE","\n            ",243],"}",["T_WHITESPACE","\n        ",244],"}",["T_WHITESPACE","\n    ",245],"}",["T_WHITESPACE","\n\n    ",246],["T_DOC_COMMENT","\/**\n     * @param string $value\n     * @return int\n     *\/",248],["T_WHITESPACE","\n    ",251],["T_PRIVATE","private",252],["T_WHITESPACE"," ",252],["T_FUNCTION","function",252],["T_WHITESPACE"," ",252],["T_STRING","determineSwatchType",252],"(",["T_VARIABLE","$value",252],")",["T_WHITESPACE","\n    ",252],"{",["T_WHITESPACE","\n        ",253],["T_VARIABLE","$swatchType",254],["T_WHITESPACE"," ",254],"=",["T_WHITESPACE"," ",254],["T_STRING","Swatch",254],["T_DOUBLE_COLON","::",254],["T_STRING","SWATCH_TYPE_EMPTY",254],";",["T_WHITESPACE","\n        ",254],["T_IF","if",255],["T_WHITESPACE"," ",255],"(","!",["T_EMPTY","empty",255],"(",["T_VARIABLE","$value",255],")",["T_WHITESPACE"," ",255],["T_BOOLEAN_AND","&&",255],["T_WHITESPACE"," ",255],["T_VARIABLE","$value",255],"[",["T_LNUMBER","0",255],"]",["T_WHITESPACE"," ",255],["T_IS_EQUAL","==",255],["T_WHITESPACE"," ",255],["T_CONSTANT_ENCAPSED_STRING","'#'",255],")",["T_WHITESPACE"," ",255],"{",["T_WHITESPACE","\n            ",255],["T_VARIABLE","$swatchType",256],["T_WHITESPACE"," ",256],"=",["T_WHITESPACE"," ",256],["T_STRING","Swatch",256],["T_DOUBLE_COLON","::",256],["T_STRING","SWATCH_TYPE_VISUAL_COLOR",256],";",["T_WHITESPACE","\n        ",256],"}",["T_WHITESPACE"," ",257],["T_ELSEIF","elseif",257],["T_WHITESPACE"," ",257],"(","!",["T_EMPTY","empty",257],"(",["T_VARIABLE","$value",257],")",["T_WHITESPACE"," ",257],["T_BOOLEAN_AND","&&",257],["T_WHITESPACE"," ",257],["T_VARIABLE","$value",257],"[",["T_LNUMBER","0",257],"]",["T_WHITESPACE"," ",257],["T_IS_EQUAL","==",257],["T_WHITESPACE"," ",257],["T_CONSTANT_ENCAPSED_STRING","'\/'",257],")",["T_WHITESPACE"," ",257],"{",["T_WHITESPACE","\n            ",257],["T_VARIABLE","$swatchType",258],["T_WHITESPACE"," ",258],"=",["T_WHITESPACE"," ",258],["T_STRING","Swatch",258],["T_DOUBLE_COLON","::",258],["T_STRING","SWATCH_TYPE_VISUAL_IMAGE",258],";",["T_WHITESPACE","\n        ",258],"}",["T_WHITESPACE","\n        ",259],["T_RETURN","return",260],["T_WHITESPACE"," ",260],["T_VARIABLE","$swatchType",260],";",["T_WHITESPACE","\n    ",260],"}",["T_WHITESPACE","\n\n    ",261],["T_DOC_COMMENT","\/**\n     * Save Textual Swatch data\n     *\n     * @param Attribute $attribute\n     * @return void\n     *\/",263],["T_WHITESPACE","\n    ",268],["T_PROTECTED","protected",269],["T_WHITESPACE"," ",269],["T_FUNCTION","function",269],["T_WHITESPACE"," ",269],["T_STRING","processTextualSwatch",269],"(",["T_STRING","Attribute",269],["T_WHITESPACE"," ",269],["T_VARIABLE","$attribute",269],")",["T_WHITESPACE","\n    ",269],"{",["T_WHITESPACE","\n        ",270],["T_VARIABLE","$swatchArray",271],["T_WHITESPACE"," ",271],"=",["T_WHITESPACE"," ",271],["T_VARIABLE","$attribute",271],["T_OBJECT_OPERATOR","->",271],["T_STRING","getData",271],"(",["T_CONSTANT_ENCAPSED_STRING","'swatch\/value'",271],")",";",["T_WHITESPACE","\n        ",271],["T_IF","if",272],["T_WHITESPACE"," ",272],"(",["T_ISSET","isset",272],"(",["T_VARIABLE","$swatchArray",272],")",["T_WHITESPACE"," ",272],["T_BOOLEAN_AND","&&",272],["T_WHITESPACE"," ",272],["T_STRING","is_array",272],"(",["T_VARIABLE","$swatchArray",272],")",")",["T_WHITESPACE"," ",272],"{",["T_WHITESPACE","\n            ",272],["T_FOREACH","foreach",273],["T_WHITESPACE"," ",273],"(",["T_VARIABLE","$swatchArray",273],["T_WHITESPACE"," ",273],["T_AS","as",273],["T_WHITESPACE"," ",273],["T_VARIABLE","$optionId",273],["T_WHITESPACE"," ",273],["T_DOUBLE_ARROW","=>",273],["T_WHITESPACE"," ",273],["T_VARIABLE","$storeValues",273],")",["T_WHITESPACE"," ",273],"{",["T_WHITESPACE","\n                ",273],["T_VARIABLE","$optionId",274],["T_WHITESPACE"," ",274],"=",["T_WHITESPACE"," ",274],["T_VARIABLE","$this",274],["T_OBJECT_OPERATOR","->",274],["T_STRING","getAttributeOptionId",274],"(",["T_VARIABLE","$optionId",274],")",";",["T_WHITESPACE","\n                ",274],["T_VARIABLE","$isOptionForDelete",275],["T_WHITESPACE"," ",275],"=",["T_WHITESPACE"," ",275],["T_VARIABLE","$this",275],["T_OBJECT_OPERATOR","->",275],["T_STRING","isOptionForDelete",275],"(",["T_VARIABLE","$attribute",275],",",["T_WHITESPACE"," ",275],["T_VARIABLE","$optionId",275],")",";",["T_WHITESPACE","\n                ",275],["T_IF","if",276],["T_WHITESPACE"," ",276],"(",["T_VARIABLE","$optionId",276],["T_WHITESPACE"," ",276],["T_IS_IDENTICAL","===",276],["T_WHITESPACE"," ",276],["T_STRING","null",276],["T_WHITESPACE"," ",276],["T_BOOLEAN_OR","||",276],["T_WHITESPACE"," ",276],["T_VARIABLE","$isOptionForDelete",276],")",["T_WHITESPACE"," ",276],"{",["T_WHITESPACE","\n                    ",276],["T_COMMENT","\/\/option was deleted by button with basket\n",277],["T_WHITESPACE","                    ",278],["T_CONTINUE","continue",278],";",["T_WHITESPACE","\n                ",278],"}",["T_WHITESPACE","\n                ",279],["T_VARIABLE","$defaultSwatchValue",280],["T_WHITESPACE"," ",280],"=",["T_WHITESPACE"," ",280],["T_STRING","reset",280],"(",["T_VARIABLE","$storeValues",280],")",";",["T_WHITESPACE","\n                ",280],["T_FOREACH","foreach",281],["T_WHITESPACE"," ",281],"(",["T_VARIABLE","$storeValues",281],["T_WHITESPACE"," ",281],["T_AS","as",281],["T_WHITESPACE"," ",281],["T_VARIABLE","$storeId",281],["T_WHITESPACE"," ",281],["T_DOUBLE_ARROW","=>",281],["T_WHITESPACE"," ",281],["T_VARIABLE","$value",281],")",["T_WHITESPACE"," ",281],"{",["T_WHITESPACE","\n                    ",281],["T_IF","if",282],["T_WHITESPACE"," ",282],"(","!",["T_VARIABLE","$value",282],")",["T_WHITESPACE"," ",282],"{",["T_WHITESPACE","\n                        ",282],["T_VARIABLE","$value",283],["T_WHITESPACE"," ",283],"=",["T_WHITESPACE"," ",283],["T_VARIABLE","$defaultSwatchValue",283],";",["T_WHITESPACE","\n                    ",283],"}",["T_WHITESPACE","\n                    ",284],["T_VARIABLE","$swatch",285],["T_WHITESPACE"," ",285],"=",["T_WHITESPACE"," ",285],["T_VARIABLE","$this",285],["T_OBJECT_OPERATOR","->",285],["T_STRING","loadSwatchIfExists",285],"(",["T_VARIABLE","$optionId",285],",",["T_WHITESPACE"," ",285],["T_VARIABLE","$storeId",285],")",";",["T_WHITESPACE","\n                    ",285],["T_VARIABLE","$swatch",286],["T_OBJECT_OPERATOR","->",286],["T_STRING","isDeleted",286],"(",["T_VARIABLE","$isOptionForDelete",286],")",";",["T_WHITESPACE","\n                    ",286],["T_VARIABLE","$this",287],["T_OBJECT_OPERATOR","->",287],["T_STRING","saveSwatchData",287],"(",["T_WHITESPACE","\n                        ",287],["T_VARIABLE","$swatch",288],",",["T_WHITESPACE","\n                        ",288],["T_VARIABLE","$optionId",289],",",["T_WHITESPACE","\n                        ",289],["T_VARIABLE","$storeId",290],",",["T_WHITESPACE","\n                        ",290],["T_NS_SEPARATOR","\\",291],["T_STRING","Magento",291],["T_NS_SEPARATOR","\\",291],["T_STRING","Swatches",291],["T_NS_SEPARATOR","\\",291],["T_STRING","Model",291],["T_NS_SEPARATOR","\\",291],["T_STRING","Swatch",291],["T_DOUBLE_COLON","::",291],["T_STRING","SWATCH_TYPE_TEXTUAL",291],",",["T_WHITESPACE","\n                        ",291],["T_VARIABLE","$value",292],["T_WHITESPACE","\n                    ",292],")",";",["T_WHITESPACE","\n                    ",293],["T_VARIABLE","$this",294],["T_OBJECT_OPERATOR","->",294],["T_STRING","isSwatchExists",294],["T_WHITESPACE"," ",294],"=",["T_WHITESPACE"," ",294],["T_STRING","null",294],";",["T_WHITESPACE","\n                ",294],"}",["T_WHITESPACE","\n            ",295],"}",["T_WHITESPACE","\n        ",296],"}",["T_WHITESPACE","\n    ",297],"}",["T_WHITESPACE","\n\n    ",298],["T_DOC_COMMENT","\/**\n     * Get option id. If it not exist get it from dependency link array\n     *\n     * @param integer $optionId\n     * @return int\n     *\/",300],["T_WHITESPACE","\n    ",305],["T_PROTECTED","protected",306],["T_WHITESPACE"," ",306],["T_FUNCTION","function",306],["T_WHITESPACE"," ",306],["T_STRING","getAttributeOptionId",306],"(",["T_VARIABLE","$optionId",306],")",["T_WHITESPACE","\n    ",306],"{",["T_WHITESPACE","\n        ",307],["T_IF","if",308],["T_WHITESPACE"," ",308],"(",["T_STRING","substr",308],"(",["T_VARIABLE","$optionId",308],",",["T_WHITESPACE"," ",308],["T_LNUMBER","0",308],",",["T_WHITESPACE"," ",308],["T_LNUMBER","6",308],")",["T_WHITESPACE"," ",308],["T_IS_EQUAL","==",308],["T_WHITESPACE"," ",308],["T_STRING","self",308],["T_DOUBLE_COLON","::",308],["T_STRING","BASE_OPTION_TITLE",308],")",["T_WHITESPACE"," ",308],"{",["T_WHITESPACE","\n            ",308],["T_VARIABLE","$optionId",309],["T_WHITESPACE"," ",309],"=",["T_WHITESPACE"," ",309],["T_ISSET","isset",309],"(",["T_VARIABLE","$this",309],["T_OBJECT_OPERATOR","->",309],["T_STRING","dependencyArray",309],"[",["T_VARIABLE","$optionId",309],"]",")",["T_WHITESPACE"," ",309],"?",["T_WHITESPACE"," ",309],["T_VARIABLE","$this",309],["T_OBJECT_OPERATOR","->",309],["T_STRING","dependencyArray",309],"[",["T_VARIABLE","$optionId",309],"]",["T_WHITESPACE"," ",309],":",["T_WHITESPACE"," ",309],["T_STRING","null",309],";",["T_WHITESPACE","\n        ",309],"}",["T_WHITESPACE","\n        ",310],["T_RETURN","return",311],["T_WHITESPACE"," ",311],["T_VARIABLE","$optionId",311],";",["T_WHITESPACE","\n    ",311],"}",["T_WHITESPACE","\n\n    ",312],["T_DOC_COMMENT","\/**\n     * Check if is option for delete\n     *\n     * @param Attribute $attribute\n     * @param integer $optionId\n     * @return bool\n     *\/",314],["T_WHITESPACE","\n    ",320],["T_PROTECTED","protected",321],["T_WHITESPACE"," ",321],["T_FUNCTION","function",321],["T_WHITESPACE"," ",321],["T_STRING","isOptionForDelete",321],"(",["T_STRING","Attribute",321],["T_WHITESPACE"," ",321],["T_VARIABLE","$attribute",321],",",["T_WHITESPACE"," ",321],["T_VARIABLE","$optionId",321],")",["T_WHITESPACE","\n    ",321],"{",["T_WHITESPACE","\n        ",322],["T_VARIABLE","$isOptionForDelete",323],["T_WHITESPACE"," ",323],"=",["T_WHITESPACE"," ",323],["T_VARIABLE","$attribute",323],["T_OBJECT_OPERATOR","->",323],["T_STRING","getData",323],"(",["T_CONSTANT_ENCAPSED_STRING","'option\/delete\/'",323],".",["T_VARIABLE","$optionId",323],")",";",["T_WHITESPACE","\n        ",323],["T_RETURN","return",324],["T_WHITESPACE"," ",324],["T_ISSET","isset",324],"(",["T_VARIABLE","$isOptionForDelete",324],")",["T_WHITESPACE"," ",324],["T_BOOLEAN_AND","&&",324],["T_WHITESPACE"," ",324],["T_VARIABLE","$isOptionForDelete",324],";",["T_WHITESPACE","\n    ",324],"}",["T_WHITESPACE","\n\n    ",325],["T_DOC_COMMENT","\/**\n     * Load swatch if it exists in database\n     *\n     * @param int $optionId\n     * @param int $storeId\n     * @return Swatch\n     *\/",327],["T_WHITESPACE","\n    ",333],["T_PROTECTED","protected",334],["T_WHITESPACE"," ",334],["T_FUNCTION","function",334],["T_WHITESPACE"," ",334],["T_STRING","loadSwatchIfExists",334],"(",["T_VARIABLE","$optionId",334],",",["T_WHITESPACE"," ",334],["T_VARIABLE","$storeId",334],")",["T_WHITESPACE","\n    ",334],"{",["T_WHITESPACE","\n        ",335],["T_VARIABLE","$collection",336],["T_WHITESPACE"," ",336],"=",["T_WHITESPACE"," ",336],["T_VARIABLE","$this",336],["T_OBJECT_OPERATOR","->",336],["T_STRING","swatchCollectionFactory",336],["T_OBJECT_OPERATOR","->",336],["T_STRING","create",336],"(",")",";",["T_WHITESPACE","\n        ",336],["T_VARIABLE","$collection",337],["T_OBJECT_OPERATOR","->",337],["T_STRING","addFieldToFilter",337],"(",["T_CONSTANT_ENCAPSED_STRING","'option_id'",337],",",["T_WHITESPACE"," ",337],["T_VARIABLE","$optionId",337],")",";",["T_WHITESPACE","\n        ",337],["T_VARIABLE","$collection",338],["T_OBJECT_OPERATOR","->",338],["T_STRING","addFieldToFilter",338],"(",["T_CONSTANT_ENCAPSED_STRING","'store_id'",338],",",["T_WHITESPACE"," ",338],["T_VARIABLE","$storeId",338],")",";",["T_WHITESPACE","\n        ",338],["T_VARIABLE","$collection",339],["T_OBJECT_OPERATOR","->",339],["T_STRING","setPageSize",339],"(",["T_LNUMBER","1",339],")",";",["T_WHITESPACE","\n        \n        ",339],["T_VARIABLE","$loadedSwatch",341],["T_WHITESPACE"," ",341],"=",["T_WHITESPACE"," ",341],["T_VARIABLE","$collection",341],["T_OBJECT_OPERATOR","->",341],["T_STRING","getFirstItem",341],"(",")",";",["T_WHITESPACE","\n        ",341],["T_IF","if",342],["T_WHITESPACE"," ",342],"(",["T_VARIABLE","$loadedSwatch",342],["T_OBJECT_OPERATOR","->",342],["T_STRING","getId",342],"(",")",")",["T_WHITESPACE"," ",342],"{",["T_WHITESPACE","\n            ",342],["T_VARIABLE","$this",343],["T_OBJECT_OPERATOR","->",343],["T_STRING","isSwatchExists",343],["T_WHITESPACE"," ",343],"=",["T_WHITESPACE"," ",343],["T_STRING","true",343],";",["T_WHITESPACE","\n        ",343],"}",["T_WHITESPACE","\n        ",344],["T_RETURN","return",345],["T_WHITESPACE"," ",345],["T_VARIABLE","$loadedSwatch",345],";",["T_WHITESPACE","\n    ",345],"}",["T_WHITESPACE","\n\n    ",346],["T_DOC_COMMENT","\/**\n     * Save operation\n     *\n     * @param Swatch $swatch\n     * @param integer $optionId\n     * @param integer $storeId\n     * @param integer $type\n     * @param string $value\n     * @return void\n     *\/",348],["T_WHITESPACE","\n    ",357],["T_PROTECTED","protected",358],["T_WHITESPACE"," ",358],["T_FUNCTION","function",358],["T_WHITESPACE"," ",358],["T_STRING","saveSwatchData",358],"(",["T_VARIABLE","$swatch",358],",",["T_WHITESPACE"," ",358],["T_VARIABLE","$optionId",358],",",["T_WHITESPACE"," ",358],["T_VARIABLE","$storeId",358],",",["T_WHITESPACE"," ",358],["T_VARIABLE","$type",358],",",["T_WHITESPACE"," ",358],["T_VARIABLE","$value",358],")",["T_WHITESPACE","\n    ",358],"{",["T_WHITESPACE","\n        ",359],["T_IF","if",360],["T_WHITESPACE"," ",360],"(",["T_VARIABLE","$this",360],["T_OBJECT_OPERATOR","->",360],["T_STRING","isSwatchExists",360],")",["T_WHITESPACE"," ",360],"{",["T_WHITESPACE","\n            ",360],["T_VARIABLE","$swatch",361],["T_OBJECT_OPERATOR","->",361],["T_STRING","setData",361],"(",["T_CONSTANT_ENCAPSED_STRING","'type'",361],",",["T_WHITESPACE"," ",361],["T_VARIABLE","$type",361],")",";",["T_WHITESPACE","\n            ",361],["T_VARIABLE","$swatch",362],["T_OBJECT_OPERATOR","->",362],["T_STRING","setData",362],"(",["T_CONSTANT_ENCAPSED_STRING","'value'",362],",",["T_WHITESPACE"," ",362],["T_VARIABLE","$value",362],")",";",["T_WHITESPACE","\n\n        ",362],"}",["T_WHITESPACE"," ",364],["T_ELSE","else",364],["T_WHITESPACE"," ",364],"{",["T_WHITESPACE","\n            ",364],["T_VARIABLE","$swatch",365],["T_OBJECT_OPERATOR","->",365],["T_STRING","setData",365],"(",["T_CONSTANT_ENCAPSED_STRING","'option_id'",365],",",["T_WHITESPACE"," ",365],["T_VARIABLE","$optionId",365],")",";",["T_WHITESPACE","\n            ",365],["T_VARIABLE","$swatch",366],["T_OBJECT_OPERATOR","->",366],["T_STRING","setData",366],"(",["T_CONSTANT_ENCAPSED_STRING","'store_id'",366],",",["T_WHITESPACE"," ",366],["T_VARIABLE","$storeId",366],")",";",["T_WHITESPACE","\n            ",366],["T_VARIABLE","$swatch",367],["T_OBJECT_OPERATOR","->",367],["T_STRING","setData",367],"(",["T_CONSTANT_ENCAPSED_STRING","'type'",367],",",["T_WHITESPACE"," ",367],["T_VARIABLE","$type",367],")",";",["T_WHITESPACE","\n            ",367],["T_VARIABLE","$swatch",368],["T_OBJECT_OPERATOR","->",368],["T_STRING","setData",368],"(",["T_CONSTANT_ENCAPSED_STRING","'value'",368],",",["T_WHITESPACE"," ",368],["T_VARIABLE","$value",368],")",";",["T_WHITESPACE","\n        ",368],"}",["T_WHITESPACE","\n        ",369],["T_VARIABLE","$swatch",370],["T_OBJECT_OPERATOR","->",370],["T_STRING","save",370],"(",")",";",["T_WHITESPACE","\n    ",370],"}",["T_WHITESPACE","\n\n    ",371],["T_DOC_COMMENT","\/**\n     * Save default swatch value using Swatch model instead of Eav model\n     *\n     * @param Attribute $attribute\n     * @return void\n     *\/",373],["T_WHITESPACE","\n    ",378],["T_PROTECTED","protected",379],["T_WHITESPACE"," ",379],["T_FUNCTION","function",379],["T_WHITESPACE"," ",379],["T_STRING","saveDefaultSwatchOptionValue",379],"(",["T_STRING","Attribute",379],["T_WHITESPACE"," ",379],["T_VARIABLE","$attribute",379],")",["T_WHITESPACE","\n    ",379],"{",["T_WHITESPACE","\n        ",380],["T_IF","if",381],["T_WHITESPACE"," ",381],"(","!",["T_VARIABLE","$this",381],["T_OBJECT_OPERATOR","->",381],["T_STRING","swatchHelper",381],["T_OBJECT_OPERATOR","->",381],["T_STRING","isSwatchAttribute",381],"(",["T_VARIABLE","$attribute",381],")",")",["T_WHITESPACE"," ",381],"{",["T_WHITESPACE","\n            ",381],["T_RETURN","return",382],";",["T_WHITESPACE","\n        ",382],"}",["T_WHITESPACE","\n        ",383],["T_VARIABLE","$defaultValue",384],["T_WHITESPACE"," ",384],"=",["T_WHITESPACE"," ",384],["T_VARIABLE","$attribute",384],["T_OBJECT_OPERATOR","->",384],["T_STRING","getData",384],"(",["T_CONSTANT_ENCAPSED_STRING","'default\/0'",384],")",";",["T_WHITESPACE","\n        ",384],["T_IF","if",385],["T_WHITESPACE"," ",385],"(","!",["T_EMPTY","empty",385],"(",["T_VARIABLE","$defaultValue",385],")",")",["T_WHITESPACE"," ",385],"{",["T_WHITESPACE","\n            ",385],["T_DOC_COMMENT","\/** @var \\Magento\\Swatches\\Model\\Swatch $swatch *\/",386],["T_WHITESPACE","\n            ",386],["T_VARIABLE","$swatch",387],["T_WHITESPACE"," ",387],"=",["T_WHITESPACE"," ",387],["T_VARIABLE","$this",387],["T_OBJECT_OPERATOR","->",387],["T_STRING","swatchFactory",387],["T_OBJECT_OPERATOR","->",387],["T_STRING","create",387],"(",")",";",["T_WHITESPACE","\n            ",387],["T_COMMENT","\/\/ created and removed on frontend option not exists in dependency array\n",388],["T_WHITESPACE","            ",389],["T_IF","if",389],["T_WHITESPACE"," ",389],"(",["T_WHITESPACE","\n                ",389],["T_STRING","substr",390],"(",["T_VARIABLE","$defaultValue",390],",",["T_WHITESPACE"," ",390],["T_LNUMBER","0",390],",",["T_WHITESPACE"," ",390],["T_LNUMBER","6",390],")",["T_WHITESPACE"," ",390],["T_IS_EQUAL","==",390],["T_WHITESPACE"," ",390],["T_STRING","self",390],["T_DOUBLE_COLON","::",390],["T_STRING","BASE_OPTION_TITLE",390],["T_WHITESPACE"," ",390],["T_BOOLEAN_AND","&&",390],["T_WHITESPACE","\n                ",390],["T_ISSET","isset",391],"(",["T_VARIABLE","$this",391],["T_OBJECT_OPERATOR","->",391],["T_STRING","dependencyArray",391],"[",["T_VARIABLE","$defaultValue",391],"]",")",["T_WHITESPACE","\n            ",391],")",["T_WHITESPACE"," ",392],"{",["T_WHITESPACE","\n                ",392],["T_VARIABLE","$defaultValue",393],["T_WHITESPACE"," ",393],"=",["T_WHITESPACE"," ",393],["T_VARIABLE","$this",393],["T_OBJECT_OPERATOR","->",393],["T_STRING","dependencyArray",393],"[",["T_VARIABLE","$defaultValue",393],"]",";",["T_WHITESPACE","\n            ",393],"}",["T_WHITESPACE","\n            ",394],["T_VARIABLE","$swatch",395],["T_OBJECT_OPERATOR","->",395],["T_STRING","getResource",395],"(",")",["T_OBJECT_OPERATOR","->",395],["T_STRING","saveDefaultSwatchOption",395],"(",["T_VARIABLE","$attribute",395],["T_OBJECT_OPERATOR","->",395],["T_STRING","getId",395],"(",")",",",["T_WHITESPACE"," ",395],["T_VARIABLE","$defaultValue",395],")",";",["T_WHITESPACE","\n        ",395],"}",["T_WHITESPACE","\n    ",396],"}",["T_WHITESPACE","\n\n    ",397],["T_DOC_COMMENT","\/**\n     * Validate that attribute options exist\n     *\n     * @param Attribute $attribute\n     * @return bool\n     * @throws InputException\n     *\/",399],["T_WHITESPACE","\n    ",405],["T_PROTECTED","protected",406],["T_WHITESPACE"," ",406],["T_FUNCTION","function",406],["T_WHITESPACE"," ",406],["T_STRING","validateOptions",406],"(",["T_STRING","Attribute",406],["T_WHITESPACE"," ",406],["T_VARIABLE","$attribute",406],")",["T_WHITESPACE","\n    ",406],"{",["T_WHITESPACE","\n        ",407],["T_VARIABLE","$options",408],["T_WHITESPACE"," ",408],"=",["T_WHITESPACE"," ",408],["T_STRING","null",408],";",["T_WHITESPACE","\n        ",408],["T_IF","if",409],["T_WHITESPACE"," ",409],"(",["T_VARIABLE","$this",409],["T_OBJECT_OPERATOR","->",409],["T_STRING","swatchHelper",409],["T_OBJECT_OPERATOR","->",409],["T_STRING","isVisualSwatch",409],"(",["T_VARIABLE","$attribute",409],")",")",["T_WHITESPACE"," ",409],"{",["T_WHITESPACE","\n            ",409],["T_VARIABLE","$options",410],["T_WHITESPACE"," ",410],"=",["T_WHITESPACE"," ",410],["T_VARIABLE","$attribute",410],["T_OBJECT_OPERATOR","->",410],["T_STRING","getData",410],"(",["T_CONSTANT_ENCAPSED_STRING","'optionvisual'",410],")",";",["T_WHITESPACE","\n        ",410],"}",["T_WHITESPACE"," ",411],["T_ELSEIF","elseif",411],["T_WHITESPACE"," ",411],"(",["T_VARIABLE","$this",411],["T_OBJECT_OPERATOR","->",411],["T_STRING","swatchHelper",411],["T_OBJECT_OPERATOR","->",411],["T_STRING","isTextSwatch",411],"(",["T_VARIABLE","$attribute",411],")",")",["T_WHITESPACE"," ",411],"{",["T_WHITESPACE","\n            ",411],["T_VARIABLE","$options",412],["T_WHITESPACE"," ",412],"=",["T_WHITESPACE"," ",412],["T_VARIABLE","$attribute",412],["T_OBJECT_OPERATOR","->",412],["T_STRING","getData",412],"(",["T_CONSTANT_ENCAPSED_STRING","'optiontext'",412],")",";",["T_WHITESPACE","\n        ",412],"}",["T_WHITESPACE","\n        ",413],["T_IF","if",414],["T_WHITESPACE"," ",414],"(",["T_VARIABLE","$options",414],["T_WHITESPACE"," ",414],["T_BOOLEAN_AND","&&",414],["T_WHITESPACE"," ",414],"!",["T_VARIABLE","$this",414],["T_OBJECT_OPERATOR","->",414],["T_STRING","isOptionsValid",414],"(",["T_VARIABLE","$options",414],",",["T_WHITESPACE"," ",414],["T_VARIABLE","$attribute",414],")",")",["T_WHITESPACE"," ",414],"{",["T_WHITESPACE","\n            ",414],["T_THROW","throw",415],["T_WHITESPACE"," ",415],["T_NEW","new",415],["T_WHITESPACE"," ",415],["T_STRING","InputException",415],"(",["T_STRING","__",415],"(",["T_CONSTANT_ENCAPSED_STRING","'Admin is a required field in the each row'",415],")",")",";",["T_WHITESPACE","\n        ",415],"}",["T_WHITESPACE","\n        ",416],["T_RETURN","return",417],["T_WHITESPACE"," ",417],["T_STRING","true",417],";",["T_WHITESPACE","\n    ",417],"}",["T_WHITESPACE","\n\n    ",418],["T_DOC_COMMENT","\/**\n     * Check if attribute options are valid\n     *\n     * @param array $options\n     * @param Attribute $attribute\n     * @return bool\n     *\/",420],["T_WHITESPACE","\n    ",426],["T_PROTECTED","protected",427],["T_WHITESPACE"," ",427],["T_FUNCTION","function",427],["T_WHITESPACE"," ",427],["T_STRING","isOptionsValid",427],"(",["T_ARRAY","array",427],["T_WHITESPACE"," ",427],["T_VARIABLE","$options",427],",",["T_WHITESPACE"," ",427],["T_STRING","Attribute",427],["T_WHITESPACE"," ",427],["T_VARIABLE","$attribute",427],")",["T_WHITESPACE","\n    ",427],"{",["T_WHITESPACE","\n        ",428],["T_IF","if",429],["T_WHITESPACE"," ",429],"(","!",["T_ISSET","isset",429],"(",["T_VARIABLE","$options",429],"[",["T_CONSTANT_ENCAPSED_STRING","'value'",429],"]",")",")",["T_WHITESPACE"," ",429],"{",["T_WHITESPACE","\n            ",429],["T_RETURN","return",430],["T_WHITESPACE"," ",430],["T_STRING","false",430],";",["T_WHITESPACE","\n        ",430],"}",["T_WHITESPACE","\n        ",431],["T_FOREACH","foreach",432],["T_WHITESPACE"," ",432],"(",["T_VARIABLE","$options",432],"[",["T_CONSTANT_ENCAPSED_STRING","'value'",432],"]",["T_WHITESPACE"," ",432],["T_AS","as",432],["T_WHITESPACE"," ",432],["T_VARIABLE","$optionId",432],["T_WHITESPACE"," ",432],["T_DOUBLE_ARROW","=>",432],["T_WHITESPACE"," ",432],["T_VARIABLE","$option",432],")",["T_WHITESPACE"," ",432],"{",["T_WHITESPACE","\n            ",432],["T_COMMENT","\/\/ do not validate options marked as deleted\n",433],["T_WHITESPACE","            ",434],["T_IF","if",434],["T_WHITESPACE"," ",434],"(",["T_VARIABLE","$this",434],["T_OBJECT_OPERATOR","->",434],["T_STRING","isOptionForDelete",434],"(",["T_VARIABLE","$attribute",434],",",["T_WHITESPACE"," ",434],["T_VARIABLE","$optionId",434],")",")",["T_WHITESPACE"," ",434],"{",["T_WHITESPACE","\n                ",434],["T_CONTINUE","continue",435],";",["T_WHITESPACE","\n            ",435],"}",["T_WHITESPACE","\n            ",436],["T_IF","if",437],["T_WHITESPACE"," ",437],"(",["T_EMPTY","empty",437],"(",["T_VARIABLE","$option",437],"[",["T_LNUMBER","0",437],"]",")",")",["T_WHITESPACE"," ",437],"{",["T_WHITESPACE","\n                ",437],["T_RETURN","return",438],["T_WHITESPACE"," ",438],["T_STRING","false",438],";",["T_WHITESPACE","\n            ",438],"}",["T_WHITESPACE","\n        ",439],"}",["T_WHITESPACE","\n        ",440],["T_RETURN","return",441],["T_WHITESPACE"," ",441],["T_STRING","true",441],";",["T_WHITESPACE","\n    ",441],"}",["T_WHITESPACE","\n",442],"}",["T_WHITESPACE","\n",443]]
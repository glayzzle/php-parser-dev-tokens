[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Copyright \u00c2\u00a9 2013-2017 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n *\/",2],["T_WHITESPACE","\n",5],["T_NAMESPACE","namespace",6],["T_WHITESPACE"," ",6],["T_STRING","Magento",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Webapi",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Model",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Plugin",6],";",["T_WHITESPACE","\n\n",6],["T_USE","use",8],["T_WHITESPACE"," ",8],["T_STRING","Magento",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Integration",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Model",8],["T_NS_SEPARATOR","\\",8],["T_STRING","ConfigBasedIntegrationManager",8],";",["T_WHITESPACE","\n",8],["T_USE","use",9],["T_WHITESPACE"," ",9],["T_STRING","Magento",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Integration",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Api",9],["T_NS_SEPARATOR","\\",9],["T_STRING","AuthorizationServiceInterface",9],["T_WHITESPACE"," ",9],["T_AS","as",9],["T_WHITESPACE"," ",9],["T_STRING","IntegrationAuthorizationInterface",9],";",["T_WHITESPACE","\n",9],["T_USE","use",10],["T_WHITESPACE"," ",10],["T_STRING","Magento",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Integration",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Model",10],["T_NS_SEPARATOR","\\",10],["T_STRING","IntegrationConfig",10],";",["T_WHITESPACE","\n\n",10],["T_DOC_COMMENT","\/**\n * Plugin for ConfigBasedIntegrationManager model to manage resource permissions of\n * integration installed from config file\n *\/",12],["T_WHITESPACE","\n",15],["T_CLASS","class",16],["T_WHITESPACE"," ",16],["T_STRING","Manager",16],["T_WHITESPACE","\n",16],"{",["T_WHITESPACE","\n    ",17],["T_DOC_COMMENT","\/**\n     * Integration service\n     *\n     * @var \\Magento\\Integration\\Api\\IntegrationServiceInterface\n     *\/",18],["T_WHITESPACE","\n    ",22],["T_PROTECTED","protected",23],["T_WHITESPACE"," ",23],["T_VARIABLE","$_integrationService",23],";",["T_WHITESPACE","\n\n    ",23],["T_DOC_COMMENT","\/**\n     * @var IntegrationAuthorizationInterface\n     *\/",25],["T_WHITESPACE","\n    ",27],["T_PROTECTED","protected",28],["T_WHITESPACE"," ",28],["T_VARIABLE","$integrationAuthorizationService",28],";",["T_WHITESPACE","\n\n    ",28],["T_DOC_COMMENT","\/**\n     * API Integration config\n     *\n     * @var IntegrationConfig\n     *\/",30],["T_WHITESPACE","\n    ",34],["T_PROTECTED","protected",35],["T_WHITESPACE"," ",35],["T_VARIABLE","$integrationConfig",35],";",["T_WHITESPACE","\n\n    ",35],["T_DOC_COMMENT","\/**\n     * Construct Setup plugin instance\n     *\n     * @param IntegrationAuthorizationInterface $integrationAuthorizationService\n     * @param \\Magento\\Integration\\Api\\IntegrationServiceInterface $integrationService\n     * @param IntegrationConfig $integrationConfig\n     *\/",37],["T_WHITESPACE","\n    ",43],["T_PUBLIC","public",44],["T_WHITESPACE"," ",44],["T_FUNCTION","function",44],["T_WHITESPACE"," ",44],["T_STRING","__construct",44],"(",["T_WHITESPACE","\n        ",44],["T_STRING","IntegrationAuthorizationInterface",45],["T_WHITESPACE"," ",45],["T_VARIABLE","$integrationAuthorizationService",45],",",["T_WHITESPACE","\n        ",45],["T_NS_SEPARATOR","\\",46],["T_STRING","Magento",46],["T_NS_SEPARATOR","\\",46],["T_STRING","Integration",46],["T_NS_SEPARATOR","\\",46],["T_STRING","Api",46],["T_NS_SEPARATOR","\\",46],["T_STRING","IntegrationServiceInterface",46],["T_WHITESPACE"," ",46],["T_VARIABLE","$integrationService",46],",",["T_WHITESPACE","\n        ",46],["T_STRING","IntegrationConfig",47],["T_WHITESPACE"," ",47],["T_VARIABLE","$integrationConfig",47],["T_WHITESPACE","\n    ",47],")",["T_WHITESPACE"," ",48],"{",["T_WHITESPACE","\n        ",48],["T_VARIABLE","$this",49],["T_OBJECT_OPERATOR","->",49],["T_STRING","integrationAuthorizationService",49],["T_WHITESPACE"," ",49],"=",["T_WHITESPACE"," ",49],["T_VARIABLE","$integrationAuthorizationService",49],";",["T_WHITESPACE","\n        ",49],["T_VARIABLE","$this",50],["T_OBJECT_OPERATOR","->",50],["T_STRING","_integrationService",50],["T_WHITESPACE"," ",50],"=",["T_WHITESPACE"," ",50],["T_VARIABLE","$integrationService",50],";",["T_WHITESPACE","\n        ",50],["T_VARIABLE","$this",51],["T_OBJECT_OPERATOR","->",51],["T_STRING","integrationConfig",51],["T_WHITESPACE"," ",51],"=",["T_WHITESPACE"," ",51],["T_VARIABLE","$integrationConfig",51],";",["T_WHITESPACE","\n    ",51],"}",["T_WHITESPACE","\n\n    ",52],["T_DOC_COMMENT","\/**\n     * Process integration resource permissions after the integration is created\n     *\n     * @param ConfigBasedIntegrationManager $subject\n     * @param string[] $integrationNames Name of integrations passed as array from the invocation chain\n     *\n     * @return string[]\n     * @SuppressWarnings(PHPMD.UnusedFormalParameter)\n     * @deprecated\n     *\/",54],["T_WHITESPACE","\n    ",63],["T_PUBLIC","public",64],["T_WHITESPACE"," ",64],["T_FUNCTION","function",64],["T_WHITESPACE"," ",64],["T_STRING","afterProcessIntegrationConfig",64],"(",["T_WHITESPACE","\n        ",64],["T_STRING","ConfigBasedIntegrationManager",65],["T_WHITESPACE"," ",65],["T_VARIABLE","$subject",65],",",["T_WHITESPACE","\n        ",65],["T_VARIABLE","$integrationNames",66],["T_WHITESPACE","\n    ",66],")",["T_WHITESPACE"," ",67],"{",["T_WHITESPACE","\n        ",67],["T_IF","if",68],["T_WHITESPACE"," ",68],"(",["T_EMPTY","empty",68],"(",["T_VARIABLE","$integrationNames",68],")",")",["T_WHITESPACE"," ",68],"{",["T_WHITESPACE","\n            ",68],["T_RETURN","return",69],["T_WHITESPACE"," ",69],"[","]",";",["T_WHITESPACE","\n        ",69],"}",["T_WHITESPACE","\n        ",70],["T_DOC_COMMENT","\/** @var array $integrations *\/",71],["T_WHITESPACE","\n        ",71],["T_VARIABLE","$integrations",72],["T_WHITESPACE"," ",72],"=",["T_WHITESPACE"," ",72],["T_VARIABLE","$this",72],["T_OBJECT_OPERATOR","->",72],["T_STRING","integrationConfig",72],["T_OBJECT_OPERATOR","->",72],["T_STRING","getIntegrations",72],"(",")",";",["T_WHITESPACE","\n        ",72],["T_FOREACH","foreach",73],["T_WHITESPACE"," ",73],"(",["T_VARIABLE","$integrationNames",73],["T_WHITESPACE"," ",73],["T_AS","as",73],["T_WHITESPACE"," ",73],["T_VARIABLE","$name",73],")",["T_WHITESPACE"," ",73],"{",["T_WHITESPACE","\n            ",73],["T_IF","if",74],["T_WHITESPACE"," ",74],"(",["T_ISSET","isset",74],"(",["T_VARIABLE","$integrations",74],"[",["T_VARIABLE","$name",74],"]",")",")",["T_WHITESPACE"," ",74],"{",["T_WHITESPACE","\n                ",74],["T_VARIABLE","$integration",75],["T_WHITESPACE"," ",75],"=",["T_WHITESPACE"," ",75],["T_VARIABLE","$this",75],["T_OBJECT_OPERATOR","->",75],["T_STRING","_integrationService",75],["T_OBJECT_OPERATOR","->",75],["T_STRING","findByName",75],"(",["T_VARIABLE","$name",75],")",";",["T_WHITESPACE","\n                ",75],["T_IF","if",76],["T_WHITESPACE"," ",76],"(",["T_VARIABLE","$integration",76],["T_OBJECT_OPERATOR","->",76],["T_STRING","getId",76],"(",")",")",["T_WHITESPACE"," ",76],"{",["T_WHITESPACE","\n                    ",76],["T_VARIABLE","$this",77],["T_OBJECT_OPERATOR","->",77],["T_STRING","integrationAuthorizationService",77],["T_OBJECT_OPERATOR","->",77],["T_STRING","grantPermissions",77],"(",["T_WHITESPACE","\n                        ",77],["T_VARIABLE","$integration",78],["T_OBJECT_OPERATOR","->",78],["T_STRING","getId",78],"(",")",",",["T_WHITESPACE","\n                        ",78],["T_VARIABLE","$integrations",79],"[",["T_VARIABLE","$name",79],"]","[",["T_CONSTANT_ENCAPSED_STRING","'resource'",79],"]",["T_WHITESPACE","\n                    ",79],")",";",["T_WHITESPACE","\n                ",80],"}",["T_WHITESPACE","\n            ",81],"}",["T_WHITESPACE","\n        ",82],"}",["T_WHITESPACE","\n        ",83],["T_RETURN","return",84],["T_WHITESPACE"," ",84],["T_VARIABLE","$integrationNames",84],";",["T_WHITESPACE","\n    ",84],"}",["T_WHITESPACE","\n\n    ",85],["T_DOC_COMMENT","\/**\n     * Process integration resource permissions after the integration is created\n     *\n     * @param ConfigBasedIntegrationManager $subject\n     * @param array $integrations integrations passed as array from the invocation chain\n     *\n     * @return array\n     * @SuppressWarnings(PHPMD.UnusedFormalParameter)\n     *\/",87],["T_WHITESPACE","\n    ",95],["T_PUBLIC","public",96],["T_WHITESPACE"," ",96],["T_FUNCTION","function",96],["T_WHITESPACE"," ",96],["T_STRING","afterProcessConfigBasedIntegrations",96],"(",["T_WHITESPACE","\n        ",96],["T_STRING","ConfigBasedIntegrationManager",97],["T_WHITESPACE"," ",97],["T_VARIABLE","$subject",97],",",["T_WHITESPACE","\n        ",97],["T_VARIABLE","$integrations",98],["T_WHITESPACE","\n    ",98],")",["T_WHITESPACE"," ",99],"{",["T_WHITESPACE","\n        ",99],["T_IF","if",100],["T_WHITESPACE"," ",100],"(",["T_EMPTY","empty",100],"(",["T_VARIABLE","$integrations",100],")",")",["T_WHITESPACE"," ",100],"{",["T_WHITESPACE","\n            ",100],["T_RETURN","return",101],["T_WHITESPACE"," ",101],"[","]",";",["T_WHITESPACE","\n        ",101],"}",["T_WHITESPACE","\n\n        ",102],["T_FOREACH","foreach",104],["T_WHITESPACE"," ",104],"(",["T_STRING","array_keys",104],"(",["T_VARIABLE","$integrations",104],")",["T_WHITESPACE"," ",104],["T_AS","as",104],["T_WHITESPACE"," ",104],["T_VARIABLE","$name",104],")",["T_WHITESPACE"," ",104],"{",["T_WHITESPACE","\n            ",104],["T_VARIABLE","$integration",105],["T_WHITESPACE"," ",105],"=",["T_WHITESPACE"," ",105],["T_VARIABLE","$this",105],["T_OBJECT_OPERATOR","->",105],["T_STRING","_integrationService",105],["T_OBJECT_OPERATOR","->",105],["T_STRING","findByName",105],"(",["T_VARIABLE","$name",105],")",";",["T_WHITESPACE","\n            ",105],["T_IF","if",106],["T_WHITESPACE"," ",106],"(",["T_VARIABLE","$integration",106],["T_OBJECT_OPERATOR","->",106],["T_STRING","getId",106],"(",")",")",["T_WHITESPACE"," ",106],"{",["T_WHITESPACE","\n                ",106],["T_VARIABLE","$this",107],["T_OBJECT_OPERATOR","->",107],["T_STRING","integrationAuthorizationService",107],["T_OBJECT_OPERATOR","->",107],["T_STRING","grantPermissions",107],"(",["T_WHITESPACE","\n                    ",107],["T_VARIABLE","$integration",108],["T_OBJECT_OPERATOR","->",108],["T_STRING","getId",108],"(",")",",",["T_WHITESPACE","\n                    ",108],["T_VARIABLE","$integrations",109],"[",["T_VARIABLE","$name",109],"]","[",["T_CONSTANT_ENCAPSED_STRING","'resource'",109],"]",["T_WHITESPACE","\n                ",109],")",";",["T_WHITESPACE","\n            ",110],"}",["T_WHITESPACE","\n        ",111],"}",["T_WHITESPACE","\n        ",112],["T_RETURN","return",113],["T_WHITESPACE"," ",113],["T_VARIABLE","$integrations",113],";",["T_WHITESPACE","\n    ",113],"}",["T_WHITESPACE","\n",114],"}",["T_WHITESPACE","\n",115]]
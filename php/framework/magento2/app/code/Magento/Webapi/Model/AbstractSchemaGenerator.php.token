[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n *\n * Copyright \u00c2\u00a9 2013-2017 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n *\/",2],["T_WHITESPACE","\n",6],["T_NAMESPACE","namespace",7],["T_WHITESPACE"," ",7],["T_STRING","Magento",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Webapi",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Model",7],";",["T_WHITESPACE","\n\n",7],["T_USE","use",9],["T_WHITESPACE"," ",9],["T_STRING","Magento",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Webapi",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Controller",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Rest",9],";",["T_WHITESPACE","\n",9],["T_USE","use",10],["T_WHITESPACE"," ",10],["T_STRING","Magento",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Webapi",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Model",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Cache",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Type",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Webapi",10],";",["T_WHITESPACE","\n",10],["T_USE","use",11],["T_WHITESPACE"," ",11],["T_STRING","Magento",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Webapi",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Model",11],["T_NS_SEPARATOR","\\",11],["T_STRING","ServiceMetadata",11],";",["T_WHITESPACE","\n",11],["T_USE","use",12],["T_WHITESPACE"," ",12],["T_STRING","Magento",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Framework",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Webapi",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Authorization",12],";",["T_WHITESPACE","\n\n",12],["T_DOC_COMMENT","\/**\n * Abstract API schema generator.\n *\/",14],["T_WHITESPACE","\n",16],["T_ABSTRACT","abstract",17],["T_WHITESPACE"," ",17],["T_CLASS","class",17],["T_WHITESPACE"," ",17],["T_STRING","AbstractSchemaGenerator",17],["T_WHITESPACE","\n",17],"{",["T_WHITESPACE","\n    ",18],["T_DOC_COMMENT","\/**\n     * @var Webapi\n     *\/",19],["T_WHITESPACE","\n    ",21],["T_PROTECTED","protected",22],["T_WHITESPACE"," ",22],["T_VARIABLE","$cache",22],";",["T_WHITESPACE","\n\n    ",22],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Framework\\Reflection\\TypeProcessor\n     *\/",24],["T_WHITESPACE","\n    ",26],["T_PROTECTED","protected",27],["T_WHITESPACE"," ",27],["T_VARIABLE","$typeProcessor",27],";",["T_WHITESPACE","\n\n    ",27],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Framework\\Webapi\\CustomAttributeTypeLocatorInterface\n     *\/",29],["T_WHITESPACE","\n    ",31],["T_PROTECTED","protected",32],["T_WHITESPACE"," ",32],["T_VARIABLE","$customAttributeTypeLocator",32],";",["T_WHITESPACE","\n\n     ",32],["T_DOC_COMMENT","\/**\n      * @var ServiceMetadata\n      *\/",34],["T_WHITESPACE","\n    ",36],["T_PROTECTED","protected",37],["T_WHITESPACE"," ",37],["T_VARIABLE","$serviceMetadata",37],";",["T_WHITESPACE","\n\n    ",37],["T_DOC_COMMENT","\/**\n     * @var Authorization\n     *\/",39],["T_WHITESPACE","\n    ",41],["T_PROTECTED","protected",42],["T_WHITESPACE"," ",42],["T_VARIABLE","$authorization",42],";",["T_WHITESPACE","\n\n    ",42],["T_DOC_COMMENT","\/**\n     * Initialize dependencies.\n     *\n     * @param Webapi $cache\n     * @param \\Magento\\Framework\\Reflection\\TypeProcessor $typeProcessor\n     * @param \\Magento\\Framework\\Webapi\\CustomAttributeTypeLocatorInterface $customAttributeTypeLocator\n     * @param \\Magento\\Webapi\\Model\\ServiceMetadata $serviceMetadata\n     * @param Authorization $authorization\n     *\/",44],["T_WHITESPACE","\n    ",52],["T_PUBLIC","public",53],["T_WHITESPACE"," ",53],["T_FUNCTION","function",53],["T_WHITESPACE"," ",53],["T_STRING","__construct",53],"(",["T_WHITESPACE","\n        ",53],["T_STRING","Webapi",54],["T_WHITESPACE"," ",54],["T_VARIABLE","$cache",54],",",["T_WHITESPACE","\n        ",54],["T_NS_SEPARATOR","\\",55],["T_STRING","Magento",55],["T_NS_SEPARATOR","\\",55],["T_STRING","Framework",55],["T_NS_SEPARATOR","\\",55],["T_STRING","Reflection",55],["T_NS_SEPARATOR","\\",55],["T_STRING","TypeProcessor",55],["T_WHITESPACE"," ",55],["T_VARIABLE","$typeProcessor",55],",",["T_WHITESPACE","\n        ",55],["T_NS_SEPARATOR","\\",56],["T_STRING","Magento",56],["T_NS_SEPARATOR","\\",56],["T_STRING","Framework",56],["T_NS_SEPARATOR","\\",56],["T_STRING","Webapi",56],["T_NS_SEPARATOR","\\",56],["T_STRING","CustomAttributeTypeLocatorInterface",56],["T_WHITESPACE"," ",56],["T_VARIABLE","$customAttributeTypeLocator",56],",",["T_WHITESPACE","\n        ",56],["T_STRING","ServiceMetadata",57],["T_WHITESPACE"," ",57],["T_VARIABLE","$serviceMetadata",57],",",["T_WHITESPACE","\n        ",57],["T_STRING","Authorization",58],["T_WHITESPACE"," ",58],["T_VARIABLE","$authorization",58],["T_WHITESPACE","\n    ",58],")",["T_WHITESPACE"," ",59],"{",["T_WHITESPACE","\n        ",59],["T_VARIABLE","$this",60],["T_OBJECT_OPERATOR","->",60],["T_STRING","cache",60],["T_WHITESPACE"," ",60],"=",["T_WHITESPACE"," ",60],["T_VARIABLE","$cache",60],";",["T_WHITESPACE","\n        ",60],["T_VARIABLE","$this",61],["T_OBJECT_OPERATOR","->",61],["T_STRING","typeProcessor",61],["T_WHITESPACE"," ",61],"=",["T_WHITESPACE"," ",61],["T_VARIABLE","$typeProcessor",61],";",["T_WHITESPACE","\n        ",61],["T_VARIABLE","$this",62],["T_OBJECT_OPERATOR","->",62],["T_STRING","customAttributeTypeLocator",62],["T_WHITESPACE"," ",62],"=",["T_WHITESPACE"," ",62],["T_VARIABLE","$customAttributeTypeLocator",62],";",["T_WHITESPACE","\n        ",62],["T_VARIABLE","$this",63],["T_OBJECT_OPERATOR","->",63],["T_STRING","serviceMetadata",63],["T_WHITESPACE"," ",63],"=",["T_WHITESPACE"," ",63],["T_VARIABLE","$serviceMetadata",63],";",["T_WHITESPACE","\n        ",63],["T_VARIABLE","$this",64],["T_OBJECT_OPERATOR","->",64],["T_STRING","authorization",64],["T_WHITESPACE"," ",64],"=",["T_WHITESPACE"," ",64],["T_VARIABLE","$authorization",64],";",["T_WHITESPACE","\n    ",64],"}",["T_WHITESPACE","\n\n    ",65],["T_DOC_COMMENT","\/**\n     * Retrieve a list of services visible to current user.\n     *\n     * @return string[]\n     *\/",67],["T_WHITESPACE","\n    ",71],["T_PUBLIC","public",72],["T_WHITESPACE"," ",72],["T_FUNCTION","function",72],["T_WHITESPACE"," ",72],["T_STRING","getListOfServices",72],"(",")",["T_WHITESPACE","\n    ",72],"{",["T_WHITESPACE","\n        ",73],["T_VARIABLE","$listOfAllowedServices",74],["T_WHITESPACE"," ",74],"=",["T_WHITESPACE"," ",74],"[","]",";",["T_WHITESPACE","\n        ",74],["T_FOREACH","foreach",75],["T_WHITESPACE"," ",75],"(",["T_VARIABLE","$this",75],["T_OBJECT_OPERATOR","->",75],["T_STRING","serviceMetadata",75],["T_OBJECT_OPERATOR","->",75],["T_STRING","getServicesConfig",75],"(",")",["T_WHITESPACE"," ",75],["T_AS","as",75],["T_WHITESPACE"," ",75],["T_VARIABLE","$serviceName",75],["T_WHITESPACE"," ",75],["T_DOUBLE_ARROW","=>",75],["T_WHITESPACE"," ",75],["T_VARIABLE","$service",75],")",["T_WHITESPACE"," ",75],"{",["T_WHITESPACE","\n            ",75],["T_FOREACH","foreach",76],["T_WHITESPACE"," ",76],"(",["T_VARIABLE","$service",76],"[",["T_STRING","ServiceMetadata",76],["T_DOUBLE_COLON","::",76],["T_STRING","KEY_SERVICE_METHODS",76],"]",["T_WHITESPACE"," ",76],["T_AS","as",76],["T_WHITESPACE"," ",76],["T_VARIABLE","$method",76],")",["T_WHITESPACE"," ",76],"{",["T_WHITESPACE","\n                ",76],["T_IF","if",77],["T_WHITESPACE"," ",77],"(",["T_VARIABLE","$this",77],["T_OBJECT_OPERATOR","->",77],["T_STRING","authorization",77],["T_OBJECT_OPERATOR","->",77],["T_STRING","isAllowed",77],"(",["T_VARIABLE","$method",77],"[",["T_STRING","ServiceMetadata",77],["T_DOUBLE_COLON","::",77],["T_STRING","KEY_ACL_RESOURCES",77],"]",")",")",["T_WHITESPACE"," ",77],"{",["T_WHITESPACE","\n                    ",77],["T_VARIABLE","$listOfAllowedServices",78],"[","]",["T_WHITESPACE"," ",78],"=",["T_WHITESPACE"," ",78],["T_VARIABLE","$serviceName",78],";",["T_WHITESPACE","\n                    ",78],["T_BREAK","break",79],";",["T_WHITESPACE","\n                ",79],"}",["T_WHITESPACE","\n            ",80],"}",["T_WHITESPACE","\n        ",81],"}",["T_WHITESPACE","\n        ",82],["T_RETURN","return",83],["T_WHITESPACE"," ",83],["T_VARIABLE","$listOfAllowedServices",83],";",["T_WHITESPACE","\n    ",83],"}",["T_WHITESPACE","\n\n    ",84],["T_DOC_COMMENT","\/**\n     * Generate schema based on requested services (uses cache)\n     *\n     * @param array $requestedServices\n     * @param string $requestScheme\n     * @param string $requestHost\n     * @param string $endPointUrl\n     * @return string\n     *\/",86],["T_WHITESPACE","\n    ",94],["T_PUBLIC","public",95],["T_WHITESPACE"," ",95],["T_FUNCTION","function",95],["T_WHITESPACE"," ",95],["T_STRING","generate",95],"(",["T_VARIABLE","$requestedServices",95],",",["T_WHITESPACE"," ",95],["T_VARIABLE","$requestScheme",95],",",["T_WHITESPACE"," ",95],["T_VARIABLE","$requestHost",95],",",["T_WHITESPACE"," ",95],["T_VARIABLE","$endPointUrl",95],")",["T_WHITESPACE","\n    ",95],"{",["T_WHITESPACE","\n        ",96],["T_DOC_COMMENT","\/** Sort requested services by names to prevent caching of the same schema file more than once. *\/",97],["T_WHITESPACE","\n        ",97],["T_STRING","ksort",98],"(",["T_VARIABLE","$requestedServices",98],")",";",["T_WHITESPACE","\n        ",98],["T_VARIABLE","$cacheId",99],["T_WHITESPACE"," ",99],"=",["T_WHITESPACE"," ",99],["T_VARIABLE","$this",99],["T_OBJECT_OPERATOR","->",99],["T_STRING","cache",99],["T_OBJECT_OPERATOR","->",99],["T_STRING","generateCacheIdUsingContext",99],"(",["T_STRING","get_class",99],"(",["T_VARIABLE","$this",99],")",["T_WHITESPACE"," ",99],".",["T_WHITESPACE"," ",99],["T_STRING","serialize",99],"(",["T_VARIABLE","$requestedServices",99],")",")",";",["T_WHITESPACE","\n        ",99],["T_VARIABLE","$cachedSchemaContent",100],["T_WHITESPACE"," ",100],"=",["T_WHITESPACE"," ",100],["T_VARIABLE","$this",100],["T_OBJECT_OPERATOR","->",100],["T_STRING","cache",100],["T_OBJECT_OPERATOR","->",100],["T_STRING","load",100],"(",["T_VARIABLE","$cacheId",100],")",";",["T_WHITESPACE","\n        ",100],["T_IF","if",101],["T_WHITESPACE"," ",101],"(",["T_VARIABLE","$cachedSchemaContent",101],["T_WHITESPACE"," ",101],["T_IS_NOT_IDENTICAL","!==",101],["T_WHITESPACE"," ",101],["T_STRING","false",101],")",["T_WHITESPACE"," ",101],"{",["T_WHITESPACE","\n            ",101],["T_RETURN","return",102],["T_WHITESPACE"," ",102],["T_VARIABLE","$cachedSchemaContent",102],";",["T_WHITESPACE","\n        ",102],"}",["T_WHITESPACE","\n        ",103],["T_VARIABLE","$allowedServicesMetadata",104],["T_WHITESPACE"," ",104],"=",["T_WHITESPACE"," ",104],["T_VARIABLE","$this",104],["T_OBJECT_OPERATOR","->",104],["T_STRING","getAllowedServicesMetadata",104],"(",["T_VARIABLE","$requestedServices",104],")",";",["T_WHITESPACE","\n        ",104],["T_VARIABLE","$this",105],["T_OBJECT_OPERATOR","->",105],["T_STRING","collectCallInfo",105],"(",["T_VARIABLE","$allowedServicesMetadata",105],")",";",["T_WHITESPACE","\n        ",105],["T_VARIABLE","$schemaContent",106],["T_WHITESPACE"," ",106],"=",["T_WHITESPACE"," ",106],["T_VARIABLE","$this",106],["T_OBJECT_OPERATOR","->",106],["T_STRING","generateSchema",106],"(",["T_VARIABLE","$allowedServicesMetadata",106],",",["T_WHITESPACE"," ",106],["T_VARIABLE","$requestScheme",106],",",["T_WHITESPACE"," ",106],["T_VARIABLE","$requestHost",106],",",["T_WHITESPACE"," ",106],["T_VARIABLE","$endPointUrl",106],")",";",["T_WHITESPACE","\n        ",106],["T_VARIABLE","$this",107],["T_OBJECT_OPERATOR","->",107],["T_STRING","cache",107],["T_OBJECT_OPERATOR","->",107],["T_STRING","save",107],"(",["T_VARIABLE","$schemaContent",107],",",["T_WHITESPACE"," ",107],["T_VARIABLE","$cacheId",107],",",["T_WHITESPACE"," ",107],"[",["T_STRING","Webapi",107],["T_DOUBLE_COLON","::",107],["T_STRING","CACHE_TAG",107],"]",")",";",["T_WHITESPACE","\n\n        ",107],["T_RETURN","return",109],["T_WHITESPACE"," ",109],["T_VARIABLE","$schemaContent",109],";",["T_WHITESPACE","\n    ",109],"}",["T_WHITESPACE","\n\n    ",110],["T_DOC_COMMENT","\/**\n     * Generate schema based on requested services' metadata.\n     *\n     * @param array $requestedServiceMetadata\n     * @param string $requestScheme\n     * @param string $requestHost\n     * @param string $requestUri\n     * @return string\n     *\/",112],["T_WHITESPACE","\n    ",120],["T_ABSTRACT","abstract",121],["T_WHITESPACE"," ",121],["T_PROTECTED","protected",121],["T_WHITESPACE"," ",121],["T_FUNCTION","function",121],["T_WHITESPACE"," ",121],["T_STRING","generateSchema",121],"(",["T_VARIABLE","$requestedServiceMetadata",121],",",["T_WHITESPACE"," ",121],["T_VARIABLE","$requestScheme",121],",",["T_WHITESPACE"," ",121],["T_VARIABLE","$requestHost",121],",",["T_WHITESPACE"," ",121],["T_VARIABLE","$requestUri",121],")",";",["T_WHITESPACE","\n\n    ",121],["T_DOC_COMMENT","\/**\n     * Get service metadata\n     *\n     * @param string $serviceName\n     * @return array\n     *\/",123],["T_WHITESPACE","\n    ",128],["T_ABSTRACT","abstract",129],["T_WHITESPACE"," ",129],["T_PROTECTED","protected",129],["T_WHITESPACE"," ",129],["T_FUNCTION","function",129],["T_WHITESPACE"," ",129],["T_STRING","getServiceMetadata",129],"(",["T_VARIABLE","$serviceName",129],")",";",["T_WHITESPACE","\n\n    ",129],["T_DOC_COMMENT","\/**\n     * Get name of complexType for message element.\n     *\n     * @param string $messageName\n     * @return string\n     *\/",131],["T_WHITESPACE","\n    ",136],["T_PUBLIC","public",137],["T_WHITESPACE"," ",137],["T_FUNCTION","function",137],["T_WHITESPACE"," ",137],["T_STRING","getElementComplexTypeName",137],"(",["T_VARIABLE","$messageName",137],")",["T_WHITESPACE","\n    ",137],"{",["T_WHITESPACE","\n        ",138],["T_RETURN","return",139],["T_WHITESPACE"," ",139],["T_STRING","ucfirst",139],"(",["T_VARIABLE","$messageName",139],")",";",["T_WHITESPACE","\n    ",139],"}",["T_WHITESPACE","\n\n    ",140],["T_DOC_COMMENT","\/**\n     * Collect data about complex types call info.\n     *\n     * Walks through all requested services and checks all methods 'in' and 'out' parameters.\n     *\n     * @param array $requestedServiceMetadata\n     * @return void\n     *\/",142],["T_WHITESPACE","\n    ",149],["T_PROTECTED","protected",150],["T_WHITESPACE"," ",150],["T_FUNCTION","function",150],["T_WHITESPACE"," ",150],["T_STRING","collectCallInfo",150],"(",["T_VARIABLE","$requestedServiceMetadata",150],")",["T_WHITESPACE","\n    ",150],"{",["T_WHITESPACE","\n        ",151],["T_FOREACH","foreach",152],["T_WHITESPACE"," ",152],"(",["T_VARIABLE","$requestedServiceMetadata",152],["T_WHITESPACE"," ",152],["T_AS","as",152],["T_WHITESPACE"," ",152],["T_VARIABLE","$serviceName",152],["T_WHITESPACE"," ",152],["T_DOUBLE_ARROW","=>",152],["T_WHITESPACE"," ",152],["T_VARIABLE","$serviceData",152],")",["T_WHITESPACE"," ",152],"{",["T_WHITESPACE","\n            ",152],["T_FOREACH","foreach",153],["T_WHITESPACE"," ",153],"(",["T_VARIABLE","$serviceData",153],"[",["T_CONSTANT_ENCAPSED_STRING","'methods'",153],"]",["T_WHITESPACE"," ",153],["T_AS","as",153],["T_WHITESPACE"," ",153],["T_VARIABLE","$methodName",153],["T_WHITESPACE"," ",153],["T_DOUBLE_ARROW","=>",153],["T_WHITESPACE"," ",153],["T_VARIABLE","$methodData",153],")",["T_WHITESPACE"," ",153],"{",["T_WHITESPACE","\n                ",153],["T_VARIABLE","$this",154],["T_OBJECT_OPERATOR","->",154],["T_STRING","typeProcessor",154],["T_OBJECT_OPERATOR","->",154],["T_STRING","processInterfaceCallInfo",154],"(",["T_VARIABLE","$methodData",154],"[",["T_CONSTANT_ENCAPSED_STRING","'interface'",154],"]",",",["T_WHITESPACE"," ",154],["T_VARIABLE","$serviceName",154],",",["T_WHITESPACE"," ",154],["T_VARIABLE","$methodName",154],")",";",["T_WHITESPACE","\n            ",154],"}",["T_WHITESPACE","\n        ",155],"}",["T_WHITESPACE","\n    ",156],"}",["T_WHITESPACE","\n\n    ",157],["T_DOC_COMMENT","\/**\n     * Retrieve information only about those services\/methods which are visible to current user.\n     *\n     * @param string[] $requestedServices\n     * @return array\n     *\/",159],["T_WHITESPACE","\n    ",164],["T_PROTECTED","protected",165],["T_WHITESPACE"," ",165],["T_FUNCTION","function",165],["T_WHITESPACE"," ",165],["T_STRING","getAllowedServicesMetadata",165],"(",["T_VARIABLE","$requestedServices",165],")",["T_WHITESPACE","\n    ",165],"{",["T_WHITESPACE","\n        ",166],["T_VARIABLE","$allowedServicesMetadata",167],["T_WHITESPACE"," ",167],"=",["T_WHITESPACE"," ",167],"[","]",";",["T_WHITESPACE","\n        ",167],["T_FOREACH","foreach",168],["T_WHITESPACE"," ",168],"(",["T_VARIABLE","$requestedServices",168],["T_WHITESPACE"," ",168],["T_AS","as",168],["T_WHITESPACE"," ",168],["T_VARIABLE","$serviceName",168],")",["T_WHITESPACE"," ",168],"{",["T_WHITESPACE","\n            ",168],["T_VARIABLE","$serviceMetadata",169],["T_WHITESPACE"," ",169],"=",["T_WHITESPACE"," ",169],["T_VARIABLE","$this",169],["T_OBJECT_OPERATOR","->",169],["T_STRING","getServiceMetadata",169],"(",["T_VARIABLE","$serviceName",169],")",";",["T_WHITESPACE","\n            ",169],["T_FOREACH","foreach",170],["T_WHITESPACE"," ",170],"(",["T_VARIABLE","$serviceMetadata",170],"[",["T_STRING","ServiceMetadata",170],["T_DOUBLE_COLON","::",170],["T_STRING","KEY_SERVICE_METHODS",170],"]",["T_WHITESPACE"," ",170],["T_AS","as",170],["T_WHITESPACE"," ",170],["T_VARIABLE","$methodName",170],["T_WHITESPACE"," ",170],["T_DOUBLE_ARROW","=>",170],["T_WHITESPACE"," ",170],["T_VARIABLE","$methodData",170],")",["T_WHITESPACE"," ",170],"{",["T_WHITESPACE","\n                ",170],["T_IF","if",171],["T_WHITESPACE"," ",171],"(","!",["T_VARIABLE","$this",171],["T_OBJECT_OPERATOR","->",171],["T_STRING","authorization",171],["T_OBJECT_OPERATOR","->",171],["T_STRING","isAllowed",171],"(",["T_VARIABLE","$methodData",171],"[",["T_STRING","ServiceMetadata",171],["T_DOUBLE_COLON","::",171],["T_STRING","KEY_ACL_RESOURCES",171],"]",")",")",["T_WHITESPACE"," ",171],"{",["T_WHITESPACE","\n                    ",171],["T_UNSET","unset",172],"(",["T_VARIABLE","$serviceMetadata",172],"[",["T_STRING","ServiceMetadata",172],["T_DOUBLE_COLON","::",172],["T_STRING","KEY_SERVICE_METHODS",172],"]","[",["T_VARIABLE","$methodName",172],"]",")",";",["T_WHITESPACE","\n                ",172],"}",["T_WHITESPACE","\n            ",173],"}",["T_WHITESPACE","\n            ",174],["T_IF","if",175],["T_WHITESPACE"," ",175],"(","!",["T_EMPTY","empty",175],"(",["T_VARIABLE","$serviceMetadata",175],"[",["T_STRING","ServiceMetadata",175],["T_DOUBLE_COLON","::",175],["T_STRING","KEY_SERVICE_METHODS",175],"]",")",")",["T_WHITESPACE"," ",175],"{",["T_WHITESPACE","\n                ",175],["T_VARIABLE","$this",176],["T_OBJECT_OPERATOR","->",176],["T_STRING","removeRestrictedRoutes",176],"(",["T_VARIABLE","$serviceMetadata",176],")",";",["T_WHITESPACE","\n                ",176],["T_VARIABLE","$allowedServicesMetadata",177],"[",["T_VARIABLE","$serviceName",177],"]",["T_WHITESPACE"," ",177],"=",["T_WHITESPACE"," ",177],["T_VARIABLE","$serviceMetadata",177],";",["T_WHITESPACE","\n            ",177],"}",["T_WHITESPACE","\n        ",178],"}",["T_WHITESPACE","\n        ",179],["T_RETURN","return",180],["T_WHITESPACE"," ",180],["T_VARIABLE","$allowedServicesMetadata",180],";",["T_WHITESPACE","\n    ",180],"}",["T_WHITESPACE","\n\n    ",181],["T_DOC_COMMENT","\/**\n     * Remove routes which should not be visible to current user.\n     *\n     * @param array &$serviceMetadata\n     * @return void\n     *\/",183],["T_WHITESPACE","\n    ",188],["T_PROTECTED","protected",189],["T_WHITESPACE"," ",189],["T_FUNCTION","function",189],["T_WHITESPACE"," ",189],["T_STRING","removeRestrictedRoutes",189],"(","&",["T_VARIABLE","$serviceMetadata",189],")",["T_WHITESPACE","\n    ",189],"{",["T_WHITESPACE","\n        ",190],["T_VARIABLE","$allowedMethodNames",191],["T_WHITESPACE"," ",191],"=",["T_WHITESPACE"," ",191],["T_STRING","array_keys",191],"(",["T_VARIABLE","$serviceMetadata",191],"[",["T_STRING","ServiceMetadata",191],["T_DOUBLE_COLON","::",191],["T_STRING","KEY_SERVICE_METHODS",191],"]",")",";",["T_WHITESPACE","\n        ",191],["T_DOC_COMMENT","\/** Remove routes which reference methods not visible to current user *\/",192],["T_WHITESPACE","\n        ",192],["T_IF","if",193],["T_WHITESPACE"," ",193],"(",["T_ISSET","isset",193],"(",["T_VARIABLE","$serviceMetadata",193],"[",["T_STRING","ServiceMetadata",193],["T_DOUBLE_COLON","::",193],["T_STRING","KEY_ROUTES",193],"]",")",")",["T_WHITESPACE"," ",193],"{",["T_WHITESPACE","\n            ",193],["T_FOREACH","foreach",194],["T_WHITESPACE"," ",194],"(",["T_VARIABLE","$serviceMetadata",194],"[",["T_STRING","ServiceMetadata",194],["T_DOUBLE_COLON","::",194],["T_STRING","KEY_ROUTES",194],"]",["T_WHITESPACE"," ",194],["T_AS","as",194],["T_WHITESPACE"," ",194],["T_VARIABLE","$path",194],["T_WHITESPACE"," ",194],["T_DOUBLE_ARROW","=>",194],["T_WHITESPACE"," ",194],"&",["T_VARIABLE","$routeGroup",194],")",["T_WHITESPACE"," ",194],"{",["T_WHITESPACE","\n                ",194],["T_FOREACH","foreach",195],["T_WHITESPACE"," ",195],"(",["T_VARIABLE","$routeGroup",195],["T_WHITESPACE"," ",195],["T_AS","as",195],["T_WHITESPACE"," ",195],["T_VARIABLE","$httpMethod",195],["T_WHITESPACE"," ",195],["T_DOUBLE_ARROW","=>",195],["T_WHITESPACE"," ",195],"&",["T_VARIABLE","$route",195],")",["T_WHITESPACE"," ",195],"{",["T_WHITESPACE","\n                    ",195],["T_IF","if",196],["T_WHITESPACE"," ",196],"(","!",["T_STRING","in_array",196],"(",["T_VARIABLE","$route",196],"[",["T_STRING","ServiceMetadata",196],["T_DOUBLE_COLON","::",196],["T_STRING","KEY_ROUTE_METHOD",196],"]",",",["T_WHITESPACE"," ",196],["T_VARIABLE","$allowedMethodNames",196],")",")",["T_WHITESPACE"," ",196],"{",["T_WHITESPACE","\n                        ",196],["T_UNSET","unset",197],"(",["T_VARIABLE","$routeGroup",197],"[",["T_VARIABLE","$httpMethod",197],"]",")",";",["T_WHITESPACE","\n                    ",197],"}",["T_WHITESPACE","\n                ",198],"}",["T_WHITESPACE","\n                ",199],["T_IF","if",200],["T_WHITESPACE"," ",200],"(",["T_EMPTY","empty",200],"(",["T_VARIABLE","$routeGroup",200],")",")",["T_WHITESPACE"," ",200],"{",["T_WHITESPACE","\n                    ",200],["T_UNSET","unset",201],"(",["T_VARIABLE","$serviceMetadata",201],"[",["T_STRING","ServiceMetadata",201],["T_DOUBLE_COLON","::",201],["T_STRING","KEY_ROUTES",201],"]","[",["T_VARIABLE","$path",201],"]",")",";",["T_WHITESPACE","\n                ",201],"}",["T_WHITESPACE","\n            ",202],"}",["T_WHITESPACE","\n        ",203],"}",["T_WHITESPACE","\n    ",204],"}",["T_WHITESPACE","\n",205],"}",["T_WHITESPACE","\n",206]]
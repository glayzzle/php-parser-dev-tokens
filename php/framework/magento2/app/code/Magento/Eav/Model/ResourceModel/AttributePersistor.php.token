[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Copyright \u00c2\u00a9 2013-2017 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n *\/",2],["T_WHITESPACE","\n\n",5],["T_NAMESPACE","namespace",7],["T_WHITESPACE"," ",7],["T_STRING","Magento",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Eav",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Model",7],["T_NS_SEPARATOR","\\",7],["T_STRING","ResourceModel",7],";",["T_WHITESPACE","\n\n",7],["T_USE","use",9],["T_WHITESPACE"," ",9],["T_STRING","Magento",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Catalog",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Model",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Product",9],";",["T_WHITESPACE","\n",9],["T_USE","use",10],["T_WHITESPACE"," ",10],["T_STRING","Magento",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Eav",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Api",10],["T_NS_SEPARATOR","\\",10],["T_STRING","AttributeRepositoryInterface",10],";",["T_WHITESPACE","\n",10],["T_USE","use",11],["T_WHITESPACE"," ",11],["T_STRING","Magento",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Catalog",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Api",11],["T_NS_SEPARATOR","\\",11],["T_STRING","ProductRepositoryInterface",11],";",["T_WHITESPACE","\n",11],["T_USE","use",12],["T_WHITESPACE"," ",12],["T_STRING","Magento",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Eav",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Model",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Entity",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Attribute",12],["T_NS_SEPARATOR","\\",12],["T_STRING","AbstractAttribute",12],";",["T_WHITESPACE","\n",12],["T_USE","use",13],["T_WHITESPACE"," ",13],["T_STRING","Magento",13],["T_NS_SEPARATOR","\\",13],["T_STRING","Store",13],["T_NS_SEPARATOR","\\",13],["T_STRING","Model",13],["T_NS_SEPARATOR","\\",13],["T_STRING","StoreManagerInterface",13],";",["T_WHITESPACE","\n",13],["T_USE","use",14],["T_WHITESPACE"," ",14],["T_STRING","Magento",14],["T_NS_SEPARATOR","\\",14],["T_STRING","Framework",14],["T_NS_SEPARATOR","\\",14],["T_STRING","Locale",14],["T_NS_SEPARATOR","\\",14],["T_STRING","FormatInterface",14],";",["T_WHITESPACE","\n",14],["T_USE","use",15],["T_WHITESPACE"," ",15],["T_STRING","Magento",15],["T_NS_SEPARATOR","\\",15],["T_STRING","Framework",15],["T_NS_SEPARATOR","\\",15],["T_STRING","Model",15],["T_NS_SEPARATOR","\\",15],["T_STRING","Entity",15],["T_NS_SEPARATOR","\\",15],["T_STRING","ScopeInterface",15],";",["T_WHITESPACE","\n",15],["T_USE","use",16],["T_WHITESPACE"," ",16],["T_STRING","Magento",16],["T_NS_SEPARATOR","\\",16],["T_STRING","Framework",16],["T_NS_SEPARATOR","\\",16],["T_STRING","EntityManager",16],["T_NS_SEPARATOR","\\",16],["T_STRING","MetadataPool",16],";",["T_WHITESPACE","\n\n",16],["T_DOC_COMMENT","\/**\n * Class AttributePersistor\n *\/",18],["T_WHITESPACE","\n",20],["T_CLASS","class",21],["T_WHITESPACE"," ",21],["T_STRING","AttributePersistor",21],["T_WHITESPACE","\n",21],"{",["T_WHITESPACE","\n    ",22],["T_DOC_COMMENT","\/**\n     * @var AttributeRepositoryInterface\n     *\/",23],["T_WHITESPACE","\n    ",25],["T_PRIVATE","private",26],["T_WHITESPACE"," ",26],["T_VARIABLE","$attributeRepository",26],";",["T_WHITESPACE","\n\n    ",26],["T_DOC_COMMENT","\/**\n     * @var FormatInterface\n     *\/",28],["T_WHITESPACE","\n    ",30],["T_PRIVATE","private",31],["T_WHITESPACE"," ",31],["T_VARIABLE","$localeFormat",31],";",["T_WHITESPACE","\n\n    ",31],["T_DOC_COMMENT","\/**\n     * @var MetadataPool\n     *\/",33],["T_WHITESPACE","\n    ",35],["T_PRIVATE","private",36],["T_WHITESPACE"," ",36],["T_VARIABLE","$metadataPool",36],";",["T_WHITESPACE","\n\n    ",36],["T_DOC_COMMENT","\/**\n     * @var array\n     *\/",38],["T_WHITESPACE","\n    ",40],["T_PRIVATE","private",41],["T_WHITESPACE"," ",41],["T_VARIABLE","$insert",41],["T_WHITESPACE"," ",41],"=",["T_WHITESPACE"," ",41],"[","]",";",["T_WHITESPACE","\n\n    ",41],["T_DOC_COMMENT","\/**\n     * @var array\n     *\/",43],["T_WHITESPACE","\n    ",45],["T_PRIVATE","private",46],["T_WHITESPACE"," ",46],["T_VARIABLE","$update",46],["T_WHITESPACE"," ",46],"=",["T_WHITESPACE"," ",46],"[","]",";",["T_WHITESPACE","\n\n    ",46],["T_DOC_COMMENT","\/**\n     * @var array\n     *\/",48],["T_WHITESPACE","\n    ",50],["T_PRIVATE","private",51],["T_WHITESPACE"," ",51],["T_VARIABLE","$delete",51],["T_WHITESPACE"," ",51],"=",["T_WHITESPACE"," ",51],"[","]",";",["T_WHITESPACE","\n\n    ",51],["T_DOC_COMMENT","\/**\n     * @param FormatInterface $localeFormat\n     * @param AttributeRepositoryInterface $attributeRepository\n     * @param MetadataPool $metadataPool\n     *\/",53],["T_WHITESPACE","\n    ",57],["T_PUBLIC","public",58],["T_WHITESPACE"," ",58],["T_FUNCTION","function",58],["T_WHITESPACE"," ",58],["T_STRING","__construct",58],"(",["T_WHITESPACE","\n        ",58],["T_STRING","FormatInterface",59],["T_WHITESPACE"," ",59],["T_VARIABLE","$localeFormat",59],",",["T_WHITESPACE","\n        ",59],["T_STRING","AttributeRepositoryInterface",60],["T_WHITESPACE"," ",60],["T_VARIABLE","$attributeRepository",60],",",["T_WHITESPACE","\n        ",60],["T_STRING","MetadataPool",61],["T_WHITESPACE"," ",61],["T_VARIABLE","$metadataPool",61],["T_WHITESPACE","\n    ",61],")",["T_WHITESPACE"," ",62],"{",["T_WHITESPACE","\n        ",62],["T_VARIABLE","$this",63],["T_OBJECT_OPERATOR","->",63],["T_STRING","attributeRepository",63],["T_WHITESPACE"," ",63],"=",["T_WHITESPACE"," ",63],["T_VARIABLE","$attributeRepository",63],";",["T_WHITESPACE","\n        ",63],["T_VARIABLE","$this",64],["T_OBJECT_OPERATOR","->",64],["T_STRING","metadataPool",64],["T_WHITESPACE"," ",64],"=",["T_WHITESPACE"," ",64],["T_VARIABLE","$metadataPool",64],";",["T_WHITESPACE","\n        ",64],["T_VARIABLE","$this",65],["T_OBJECT_OPERATOR","->",65],["T_STRING","localeFormat",65],["T_WHITESPACE"," ",65],"=",["T_WHITESPACE"," ",65],["T_VARIABLE","$localeFormat",65],";",["T_WHITESPACE","\n    ",65],"}",["T_WHITESPACE","\n\n    ",66],["T_DOC_COMMENT","\/**\n     * @param string $entityType\n     * @param int $link\n     * @param string $attributeCode\n     * @return void\n     *\/",68],["T_WHITESPACE","\n    ",73],["T_PUBLIC","public",74],["T_WHITESPACE"," ",74],["T_FUNCTION","function",74],["T_WHITESPACE"," ",74],["T_STRING","registerDelete",74],"(",["T_VARIABLE","$entityType",74],",",["T_WHITESPACE"," ",74],["T_VARIABLE","$link",74],",",["T_WHITESPACE"," ",74],["T_VARIABLE","$attributeCode",74],")",["T_WHITESPACE","\n    ",74],"{",["T_WHITESPACE","\n        ",75],["T_VARIABLE","$this",76],["T_OBJECT_OPERATOR","->",76],["T_STRING","delete",76],"[",["T_VARIABLE","$entityType",76],"]","[",["T_VARIABLE","$link",76],"]","[",["T_VARIABLE","$attributeCode",76],"]",["T_WHITESPACE"," ",76],"=",["T_WHITESPACE"," ",76],["T_STRING","null",76],";",["T_WHITESPACE","\n    ",76],"}",["T_WHITESPACE","\n\n    ",77],["T_DOC_COMMENT","\/**\n     * @param string $entityType\n     * @param int $link\n     * @param string $attributeCode\n     * @param mixed $value\n     * @return void\n     *\/",79],["T_WHITESPACE","\n    ",85],["T_PUBLIC","public",86],["T_WHITESPACE"," ",86],["T_FUNCTION","function",86],["T_WHITESPACE"," ",86],["T_STRING","registerUpdate",86],"(",["T_VARIABLE","$entityType",86],",",["T_WHITESPACE"," ",86],["T_VARIABLE","$link",86],",",["T_WHITESPACE"," ",86],["T_VARIABLE","$attributeCode",86],",",["T_WHITESPACE"," ",86],["T_VARIABLE","$value",86],")",["T_WHITESPACE","\n    ",86],"{",["T_WHITESPACE","\n        ",87],["T_VARIABLE","$this",88],["T_OBJECT_OPERATOR","->",88],["T_STRING","update",88],"[",["T_VARIABLE","$entityType",88],"]","[",["T_VARIABLE","$link",88],"]","[",["T_VARIABLE","$attributeCode",88],"]",["T_WHITESPACE"," ",88],"=",["T_WHITESPACE"," ",88],["T_VARIABLE","$value",88],";",["T_WHITESPACE","\n    ",88],"}",["T_WHITESPACE","\n\n    ",89],["T_DOC_COMMENT","\/**\n     * @param string $entityType\n     * @param int $link\n     * @param string $attributeCode\n     * @param mixed $value\n     * @return void\n     *\/",91],["T_WHITESPACE","\n    ",97],["T_PUBLIC","public",98],["T_WHITESPACE"," ",98],["T_FUNCTION","function",98],["T_WHITESPACE"," ",98],["T_STRING","registerInsert",98],"(",["T_VARIABLE","$entityType",98],",",["T_WHITESPACE"," ",98],["T_VARIABLE","$link",98],",",["T_WHITESPACE"," ",98],["T_VARIABLE","$attributeCode",98],",",["T_WHITESPACE"," ",98],["T_VARIABLE","$value",98],")",["T_WHITESPACE","\n    ",98],"{",["T_WHITESPACE","\n        ",99],["T_VARIABLE","$this",100],["T_OBJECT_OPERATOR","->",100],["T_STRING","insert",100],"[",["T_VARIABLE","$entityType",100],"]","[",["T_VARIABLE","$link",100],"]","[",["T_VARIABLE","$attributeCode",100],"]",["T_WHITESPACE"," ",100],"=",["T_WHITESPACE"," ",100],["T_VARIABLE","$value",100],";",["T_WHITESPACE","\n    ",100],"}",["T_WHITESPACE","\n\n    ",101],["T_DOC_COMMENT","\/**\n     * @param string $entityType\n     * @param \\Magento\\Framework\\Model\\Entity\\ScopeInterface[] $context\n     * @return void\n     * @throws \\Exception\n     * @throws \\Magento\\Framework\\Exception\\LocalizedException\n     *\/",103],["T_WHITESPACE","\n    ",109],["T_PUBLIC","public",110],["T_WHITESPACE"," ",110],["T_FUNCTION","function",110],["T_WHITESPACE"," ",110],["T_STRING","processDeletes",110],"(",["T_VARIABLE","$entityType",110],",",["T_WHITESPACE"," ",110],["T_VARIABLE","$context",110],")",["T_WHITESPACE","\n    ",110],"{",["T_WHITESPACE","\n        ",111],["T_IF","if",112],["T_WHITESPACE"," ",112],"(","!",["T_ISSET","isset",112],"(",["T_VARIABLE","$this",112],["T_OBJECT_OPERATOR","->",112],["T_STRING","delete",112],"[",["T_VARIABLE","$entityType",112],"]",")",["T_WHITESPACE"," ",112],["T_BOOLEAN_OR","||",112],["T_WHITESPACE"," ",112],"!",["T_STRING","is_array",112],"(",["T_VARIABLE","$this",112],["T_OBJECT_OPERATOR","->",112],["T_STRING","delete",112],"[",["T_VARIABLE","$entityType",112],"]",")",")",["T_WHITESPACE"," ",112],"{",["T_WHITESPACE","\n            ",112],["T_RETURN","return",113],";",["T_WHITESPACE","\n        ",113],"}",["T_WHITESPACE","\n        ",114],["T_VARIABLE","$metadata",115],["T_WHITESPACE"," ",115],"=",["T_WHITESPACE"," ",115],["T_VARIABLE","$this",115],["T_OBJECT_OPERATOR","->",115],["T_STRING","metadataPool",115],["T_OBJECT_OPERATOR","->",115],["T_STRING","getMetadata",115],"(",["T_VARIABLE","$entityType",115],")",";",["T_WHITESPACE","\n        ",115],["T_VARIABLE","$linkField",116],["T_WHITESPACE"," ",116],"=",["T_WHITESPACE"," ",116],["T_VARIABLE","$metadata",116],["T_OBJECT_OPERATOR","->",116],["T_STRING","getLinkField",116],"(",")",";",["T_WHITESPACE","\n        ",116],["T_FOREACH","foreach",117],["T_WHITESPACE"," ",117],"(",["T_VARIABLE","$this",117],["T_OBJECT_OPERATOR","->",117],["T_STRING","delete",117],"[",["T_VARIABLE","$entityType",117],"]",["T_WHITESPACE"," ",117],["T_AS","as",117],["T_WHITESPACE"," ",117],["T_VARIABLE","$link",117],["T_WHITESPACE"," ",117],["T_DOUBLE_ARROW","=>",117],["T_WHITESPACE"," ",117],["T_VARIABLE","$data",117],")",["T_WHITESPACE"," ",117],"{",["T_WHITESPACE","\n            ",117],["T_VARIABLE","$attributeCodes",118],["T_WHITESPACE"," ",118],"=",["T_WHITESPACE"," ",118],["T_STRING","array_keys",118],"(",["T_VARIABLE","$data",118],")",";",["T_WHITESPACE","\n            ",118],["T_FOREACH","foreach",119],["T_WHITESPACE"," ",119],"(",["T_VARIABLE","$attributeCodes",119],["T_WHITESPACE"," ",119],["T_AS","as",119],["T_WHITESPACE"," ",119],["T_VARIABLE","$attributeCode",119],")",["T_WHITESPACE"," ",119],"{",["T_WHITESPACE","\n                ",119],["T_DOC_COMMENT","\/** @var AbstractAttribute $attribute *\/",120],["T_WHITESPACE","\n                ",120],["T_VARIABLE","$attribute",121],["T_WHITESPACE"," ",121],"=",["T_WHITESPACE"," ",121],["T_VARIABLE","$this",121],["T_OBJECT_OPERATOR","->",121],["T_STRING","attributeRepository",121],["T_OBJECT_OPERATOR","->",121],["T_STRING","get",121],"(",["T_VARIABLE","$metadata",121],["T_OBJECT_OPERATOR","->",121],["T_STRING","getEavEntityType",121],"(",")",",",["T_WHITESPACE"," ",121],["T_VARIABLE","$attributeCode",121],")",";",["T_WHITESPACE","\n                ",121],["T_VARIABLE","$conditions",122],["T_WHITESPACE"," ",122],"=",["T_WHITESPACE"," ",122],"[",["T_WHITESPACE","\n                    ",122],["T_VARIABLE","$linkField",123],["T_WHITESPACE"," ",123],".",["T_WHITESPACE"," ",123],["T_CONSTANT_ENCAPSED_STRING","' = ?'",123],["T_WHITESPACE"," ",123],["T_DOUBLE_ARROW","=>",123],["T_WHITESPACE"," ",123],["T_VARIABLE","$link",123],",",["T_WHITESPACE","\n                    ",123],["T_CONSTANT_ENCAPSED_STRING","'attribute_id = ?'",124],["T_WHITESPACE"," ",124],["T_DOUBLE_ARROW","=>",124],["T_WHITESPACE"," ",124],["T_VARIABLE","$attribute",124],["T_OBJECT_OPERATOR","->",124],["T_STRING","getAttributeId",124],"(",")",["T_WHITESPACE","\n                ",124],"]",";",["T_WHITESPACE","\n                ",125],["T_FOREACH","foreach",126],["T_WHITESPACE"," ",126],"(",["T_VARIABLE","$context",126],["T_WHITESPACE"," ",126],["T_AS","as",126],["T_WHITESPACE"," ",126],["T_VARIABLE","$scope",126],")",["T_WHITESPACE"," ",126],"{",["T_WHITESPACE","\n                    ",126],["T_VARIABLE","$conditions",127],"[",["T_VARIABLE","$metadata",127],["T_OBJECT_OPERATOR","->",127],["T_STRING","getEntityConnection",127],"(",")",["T_OBJECT_OPERATOR","->",127],["T_STRING","quoteIdentifier",127],"(",["T_VARIABLE","$scope",127],["T_OBJECT_OPERATOR","->",127],["T_STRING","getIdentifier",127],"(",")",")",["T_WHITESPACE"," ",127],".",["T_WHITESPACE"," ",127],["T_CONSTANT_ENCAPSED_STRING","' = ?'",127],"]",["T_WHITESPACE","\n                        ",127],"=",["T_WHITESPACE"," ",128],["T_VARIABLE","$this",128],["T_OBJECT_OPERATOR","->",128],["T_STRING","getScopeValue",128],"(",["T_VARIABLE","$scope",128],",",["T_WHITESPACE"," ",128],["T_VARIABLE","$attribute",128],")",";",["T_WHITESPACE","\n                ",128],"}",["T_WHITESPACE","\n                ",129],["T_VARIABLE","$metadata",130],["T_OBJECT_OPERATOR","->",130],["T_STRING","getEntityConnection",130],"(",")",["T_OBJECT_OPERATOR","->",130],["T_STRING","delete",130],"(",["T_WHITESPACE","\n                    ",130],["T_VARIABLE","$attribute",131],["T_OBJECT_OPERATOR","->",131],["T_STRING","getBackend",131],"(",")",["T_OBJECT_OPERATOR","->",131],["T_STRING","getTable",131],"(",")",",",["T_WHITESPACE","\n                    ",131],["T_VARIABLE","$conditions",132],["T_WHITESPACE","\n                ",132],")",";",["T_WHITESPACE","\n            ",133],"}",["T_WHITESPACE","\n        ",134],"}",["T_WHITESPACE","\n    ",135],"}",["T_WHITESPACE","\n\n    ",136],["T_DOC_COMMENT","\/**\n     * @param string $entityType\n     * @param \\Magento\\Framework\\Model\\Entity\\ScopeInterface[] $context\n     * @return void\n     * @throws \\Exception\n     * @throws \\Magento\\Framework\\Exception\\LocalizedException\n     *\/",138],["T_WHITESPACE","\n    ",144],["T_PUBLIC","public",145],["T_WHITESPACE"," ",145],["T_FUNCTION","function",145],["T_WHITESPACE"," ",145],["T_STRING","processInserts",145],"(",["T_VARIABLE","$entityType",145],",",["T_WHITESPACE"," ",145],["T_VARIABLE","$context",145],")",["T_WHITESPACE","\n    ",145],"{",["T_WHITESPACE","\n        ",146],["T_IF","if",147],["T_WHITESPACE"," ",147],"(","!",["T_ISSET","isset",147],"(",["T_VARIABLE","$this",147],["T_OBJECT_OPERATOR","->",147],["T_STRING","insert",147],"[",["T_VARIABLE","$entityType",147],"]",")",["T_WHITESPACE"," ",147],["T_BOOLEAN_OR","||",147],["T_WHITESPACE"," ",147],"!",["T_STRING","is_array",147],"(",["T_VARIABLE","$this",147],["T_OBJECT_OPERATOR","->",147],["T_STRING","insert",147],"[",["T_VARIABLE","$entityType",147],"]",")",")",["T_WHITESPACE"," ",147],"{",["T_WHITESPACE","\n            ",147],["T_RETURN","return",148],";",["T_WHITESPACE","\n        ",148],"}",["T_WHITESPACE","\n        ",149],["T_VARIABLE","$metadata",150],["T_WHITESPACE"," ",150],"=",["T_WHITESPACE"," ",150],["T_VARIABLE","$this",150],["T_OBJECT_OPERATOR","->",150],["T_STRING","metadataPool",150],["T_OBJECT_OPERATOR","->",150],["T_STRING","getMetadata",150],"(",["T_VARIABLE","$entityType",150],")",";",["T_WHITESPACE","\n        ",150],["T_VARIABLE","$linkField",151],["T_WHITESPACE"," ",151],"=",["T_WHITESPACE"," ",151],["T_VARIABLE","$metadata",151],["T_OBJECT_OPERATOR","->",151],["T_STRING","getLinkField",151],"(",")",";",["T_WHITESPACE","\n        ",151],["T_FOREACH","foreach",152],["T_WHITESPACE"," ",152],"(",["T_VARIABLE","$this",152],["T_OBJECT_OPERATOR","->",152],["T_STRING","insert",152],"[",["T_VARIABLE","$entityType",152],"]",["T_WHITESPACE"," ",152],["T_AS","as",152],["T_WHITESPACE"," ",152],["T_VARIABLE","$link",152],["T_WHITESPACE"," ",152],["T_DOUBLE_ARROW","=>",152],["T_WHITESPACE"," ",152],["T_VARIABLE","$data",152],")",["T_WHITESPACE"," ",152],"{",["T_WHITESPACE","\n            ",152],["T_FOREACH","foreach",153],["T_WHITESPACE"," ",153],"(",["T_VARIABLE","$data",153],["T_WHITESPACE"," ",153],["T_AS","as",153],["T_WHITESPACE"," ",153],["T_VARIABLE","$attributeCode",153],["T_WHITESPACE"," ",153],["T_DOUBLE_ARROW","=>",153],["T_WHITESPACE"," ",153],["T_VARIABLE","$attributeValue",153],")",["T_WHITESPACE"," ",153],"{",["T_WHITESPACE","\n                ",153],["T_DOC_COMMENT","\/** @var AbstractAttribute $attribute *\/",154],["T_WHITESPACE","\n                ",154],["T_VARIABLE","$attribute",155],["T_WHITESPACE"," ",155],"=",["T_WHITESPACE"," ",155],["T_VARIABLE","$this",155],["T_OBJECT_OPERATOR","->",155],["T_STRING","attributeRepository",155],["T_OBJECT_OPERATOR","->",155],["T_STRING","get",155],"(",["T_WHITESPACE","\n                    ",155],["T_VARIABLE","$metadata",156],["T_OBJECT_OPERATOR","->",156],["T_STRING","getEavEntityType",156],"(",")",",",["T_WHITESPACE","\n                    ",156],["T_VARIABLE","$attributeCode",157],["T_WHITESPACE","\n                ",157],")",";",["T_WHITESPACE","\n                ",158],["T_VARIABLE","$data",159],["T_WHITESPACE"," ",159],"=",["T_WHITESPACE"," ",159],"[",["T_WHITESPACE","\n                    ",159],["T_VARIABLE","$linkField",160],["T_WHITESPACE"," ",160],["T_DOUBLE_ARROW","=>",160],["T_WHITESPACE"," ",160],["T_VARIABLE","$link",160],",",["T_WHITESPACE","\n                    ",160],["T_CONSTANT_ENCAPSED_STRING","'attribute_id'",161],["T_WHITESPACE"," ",161],["T_DOUBLE_ARROW","=>",161],["T_WHITESPACE"," ",161],["T_VARIABLE","$attribute",161],["T_OBJECT_OPERATOR","->",161],["T_STRING","getAttributeId",161],"(",")",",",["T_WHITESPACE","\n                    ",161],["T_CONSTANT_ENCAPSED_STRING","'value'",162],["T_WHITESPACE"," ",162],["T_DOUBLE_ARROW","=>",162],["T_WHITESPACE"," ",162],["T_VARIABLE","$this",162],["T_OBJECT_OPERATOR","->",162],["T_STRING","prepareValue",162],"(",["T_VARIABLE","$entityType",162],",",["T_WHITESPACE"," ",162],["T_VARIABLE","$attributeValue",162],",",["T_WHITESPACE"," ",162],["T_VARIABLE","$attribute",162],")",["T_WHITESPACE","\n                ",162],"]",";",["T_WHITESPACE","\n                ",163],["T_FOREACH","foreach",164],["T_WHITESPACE"," ",164],"(",["T_VARIABLE","$context",164],["T_WHITESPACE"," ",164],["T_AS","as",164],["T_WHITESPACE"," ",164],["T_VARIABLE","$scope",164],")",["T_WHITESPACE"," ",164],"{",["T_WHITESPACE","\n                    ",164],["T_VARIABLE","$data",165],"[",["T_VARIABLE","$scope",165],["T_OBJECT_OPERATOR","->",165],["T_STRING","getIdentifier",165],"(",")","]",["T_WHITESPACE"," ",165],"=",["T_WHITESPACE"," ",165],["T_VARIABLE","$this",165],["T_OBJECT_OPERATOR","->",165],["T_STRING","getScopeValue",165],"(",["T_VARIABLE","$scope",165],",",["T_WHITESPACE"," ",165],["T_VARIABLE","$attribute",165],")",";",["T_WHITESPACE","\n                ",165],"}",["T_WHITESPACE","\n                ",166],["T_VARIABLE","$metadata",167],["T_OBJECT_OPERATOR","->",167],["T_STRING","getEntityConnection",167],"(",")",["T_OBJECT_OPERATOR","->",167],["T_STRING","insertOnDuplicate",167],"(",["T_VARIABLE","$attribute",167],["T_OBJECT_OPERATOR","->",167],["T_STRING","getBackend",167],"(",")",["T_OBJECT_OPERATOR","->",167],["T_STRING","getTable",167],"(",")",",",["T_WHITESPACE"," ",167],["T_VARIABLE","$data",167],")",";",["T_WHITESPACE","\n            ",167],"}",["T_WHITESPACE","\n        ",168],"}",["T_WHITESPACE","\n    ",169],"}",["T_WHITESPACE","\n\n    ",170],["T_DOC_COMMENT","\/**\n     * @param string $entityType\n     * @param \\Magento\\Framework\\Model\\Entity\\ScopeInterface[] $context\n     * @return void\n     * @throws \\Exception\n     * @throws \\Magento\\Framework\\Exception\\LocalizedException\n     *\/",172],["T_WHITESPACE","\n    ",178],["T_PUBLIC","public",179],["T_WHITESPACE"," ",179],["T_FUNCTION","function",179],["T_WHITESPACE"," ",179],["T_STRING","processUpdates",179],"(",["T_VARIABLE","$entityType",179],",",["T_WHITESPACE"," ",179],["T_VARIABLE","$context",179],")",["T_WHITESPACE","\n    ",179],"{",["T_WHITESPACE","\n        ",180],["T_IF","if",181],["T_WHITESPACE"," ",181],"(","!",["T_ISSET","isset",181],"(",["T_VARIABLE","$this",181],["T_OBJECT_OPERATOR","->",181],["T_STRING","update",181],"[",["T_VARIABLE","$entityType",181],"]",")",["T_WHITESPACE"," ",181],["T_BOOLEAN_OR","||",181],["T_WHITESPACE"," ",181],"!",["T_STRING","is_array",181],"(",["T_VARIABLE","$this",181],["T_OBJECT_OPERATOR","->",181],["T_STRING","update",181],"[",["T_VARIABLE","$entityType",181],"]",")",")",["T_WHITESPACE"," ",181],"{",["T_WHITESPACE","\n            ",181],["T_RETURN","return",182],";",["T_WHITESPACE","\n        ",182],"}",["T_WHITESPACE","\n        ",183],["T_VARIABLE","$metadata",184],["T_WHITESPACE"," ",184],"=",["T_WHITESPACE"," ",184],["T_VARIABLE","$this",184],["T_OBJECT_OPERATOR","->",184],["T_STRING","metadataPool",184],["T_OBJECT_OPERATOR","->",184],["T_STRING","getMetadata",184],"(",["T_VARIABLE","$entityType",184],")",";",["T_WHITESPACE","\n        ",184],["T_VARIABLE","$linkField",185],["T_WHITESPACE"," ",185],"=",["T_WHITESPACE"," ",185],["T_VARIABLE","$metadata",185],["T_OBJECT_OPERATOR","->",185],["T_STRING","getLinkField",185],"(",")",";",["T_WHITESPACE","\n        ",185],["T_FOREACH","foreach",186],["T_WHITESPACE"," ",186],"(",["T_VARIABLE","$this",186],["T_OBJECT_OPERATOR","->",186],["T_STRING","update",186],"[",["T_VARIABLE","$entityType",186],"]",["T_WHITESPACE"," ",186],["T_AS","as",186],["T_WHITESPACE"," ",186],["T_VARIABLE","$link",186],["T_WHITESPACE"," ",186],["T_DOUBLE_ARROW","=>",186],["T_WHITESPACE"," ",186],["T_VARIABLE","$data",186],")",["T_WHITESPACE"," ",186],"{",["T_WHITESPACE","\n            ",186],["T_FOREACH","foreach",187],["T_WHITESPACE"," ",187],"(",["T_VARIABLE","$data",187],["T_WHITESPACE"," ",187],["T_AS","as",187],["T_WHITESPACE"," ",187],["T_VARIABLE","$attributeCode",187],["T_WHITESPACE"," ",187],["T_DOUBLE_ARROW","=>",187],["T_WHITESPACE"," ",187],["T_VARIABLE","$attributeValue",187],")",["T_WHITESPACE"," ",187],"{",["T_WHITESPACE","\n                ",187],["T_DOC_COMMENT","\/** @var AbstractAttribute $attribute *\/",188],["T_WHITESPACE","\n                ",188],["T_VARIABLE","$attribute",189],["T_WHITESPACE"," ",189],"=",["T_WHITESPACE"," ",189],["T_VARIABLE","$this",189],["T_OBJECT_OPERATOR","->",189],["T_STRING","attributeRepository",189],["T_OBJECT_OPERATOR","->",189],["T_STRING","get",189],"(",["T_WHITESPACE","\n                    ",189],["T_VARIABLE","$metadata",190],["T_OBJECT_OPERATOR","->",190],["T_STRING","getEavEntityType",190],"(",")",",",["T_WHITESPACE","\n                    ",190],["T_VARIABLE","$attributeCode",191],["T_WHITESPACE","\n                ",191],")",";",["T_WHITESPACE","\n                ",192],["T_VARIABLE","$conditions",193],["T_WHITESPACE"," ",193],"=",["T_WHITESPACE"," ",193],"[",["T_WHITESPACE","\n                    ",193],["T_VARIABLE","$linkField",194],["T_WHITESPACE"," ",194],".",["T_WHITESPACE"," ",194],["T_CONSTANT_ENCAPSED_STRING","' = ?'",194],["T_WHITESPACE"," ",194],["T_DOUBLE_ARROW","=>",194],["T_WHITESPACE"," ",194],["T_VARIABLE","$link",194],",",["T_WHITESPACE","\n                    ",194],["T_CONSTANT_ENCAPSED_STRING","'attribute_id = ?'",195],["T_WHITESPACE"," ",195],["T_DOUBLE_ARROW","=>",195],["T_WHITESPACE"," ",195],["T_VARIABLE","$attribute",195],["T_OBJECT_OPERATOR","->",195],["T_STRING","getAttributeId",195],"(",")",",",["T_WHITESPACE","\n                ",195],"]",";",["T_WHITESPACE","\n                ",196],["T_FOREACH","foreach",197],["T_WHITESPACE"," ",197],"(",["T_VARIABLE","$context",197],["T_WHITESPACE"," ",197],["T_AS","as",197],["T_WHITESPACE"," ",197],["T_VARIABLE","$scope",197],")",["T_WHITESPACE"," ",197],"{",["T_WHITESPACE","\n                    ",197],["T_VARIABLE","$conditions",198],"[",["T_VARIABLE","$metadata",198],["T_OBJECT_OPERATOR","->",198],["T_STRING","getEntityConnection",198],"(",")",["T_OBJECT_OPERATOR","->",198],["T_STRING","quoteIdentifier",198],"(",["T_VARIABLE","$scope",198],["T_OBJECT_OPERATOR","->",198],["T_STRING","getIdentifier",198],"(",")",")",["T_WHITESPACE"," ",198],".",["T_WHITESPACE"," ",198],["T_CONSTANT_ENCAPSED_STRING","' = ?'",198],"]",["T_WHITESPACE","\n                        ",198],"=",["T_WHITESPACE"," ",199],["T_VARIABLE","$this",199],["T_OBJECT_OPERATOR","->",199],["T_STRING","getScopeValue",199],"(",["T_VARIABLE","$scope",199],",",["T_WHITESPACE"," ",199],["T_VARIABLE","$attribute",199],")",";",["T_WHITESPACE","\n                ",199],"}",["T_WHITESPACE","\n                ",200],["T_VARIABLE","$metadata",201],["T_OBJECT_OPERATOR","->",201],["T_STRING","getEntityConnection",201],"(",")",["T_OBJECT_OPERATOR","->",201],["T_STRING","update",201],"(",["T_WHITESPACE","\n                    ",201],["T_VARIABLE","$attribute",202],["T_OBJECT_OPERATOR","->",202],["T_STRING","getBackend",202],"(",")",["T_OBJECT_OPERATOR","->",202],["T_STRING","getTable",202],"(",")",",",["T_WHITESPACE","\n                    ",202],"[",["T_WHITESPACE","\n                        ",203],["T_CONSTANT_ENCAPSED_STRING","'value'",204],["T_WHITESPACE"," ",204],["T_DOUBLE_ARROW","=>",204],["T_WHITESPACE"," ",204],["T_VARIABLE","$this",204],["T_OBJECT_OPERATOR","->",204],["T_STRING","prepareValue",204],"(",["T_VARIABLE","$entityType",204],",",["T_WHITESPACE"," ",204],["T_VARIABLE","$attributeValue",204],",",["T_WHITESPACE"," ",204],["T_VARIABLE","$attribute",204],")",["T_WHITESPACE","\n                    ",204],"]",",",["T_WHITESPACE","\n                    ",205],["T_VARIABLE","$conditions",206],["T_WHITESPACE","\n                ",206],")",";",["T_WHITESPACE","\n            ",207],"}",["T_WHITESPACE","\n        ",208],"}",["T_WHITESPACE","\n    ",209],"}",["T_WHITESPACE","\n\n    ",210],["T_DOC_COMMENT","\/**\n     * Flush attributes to storage\n     *\n     * @param string $entityType\n     * @param string $context\n     * @return void\n     *\/",212],["T_WHITESPACE","\n    ",218],["T_PUBLIC","public",219],["T_WHITESPACE"," ",219],["T_FUNCTION","function",219],["T_WHITESPACE"," ",219],["T_STRING","flush",219],"(",["T_VARIABLE","$entityType",219],",",["T_WHITESPACE"," ",219],["T_VARIABLE","$context",219],")",["T_WHITESPACE","\n    ",219],"{",["T_WHITESPACE","\n        ",220],["T_VARIABLE","$this",221],["T_OBJECT_OPERATOR","->",221],["T_STRING","processDeletes",221],"(",["T_VARIABLE","$entityType",221],",",["T_WHITESPACE"," ",221],["T_VARIABLE","$context",221],")",";",["T_WHITESPACE","\n        ",221],["T_VARIABLE","$this",222],["T_OBJECT_OPERATOR","->",222],["T_STRING","processInserts",222],"(",["T_VARIABLE","$entityType",222],",",["T_WHITESPACE"," ",222],["T_VARIABLE","$context",222],")",";",["T_WHITESPACE","\n        ",222],["T_VARIABLE","$this",223],["T_OBJECT_OPERATOR","->",223],["T_STRING","processUpdates",223],"(",["T_VARIABLE","$entityType",223],",",["T_WHITESPACE"," ",223],["T_VARIABLE","$context",223],")",";",["T_WHITESPACE","\n        ",223],["T_UNSET","unset",224],"(",["T_VARIABLE","$this",224],["T_OBJECT_OPERATOR","->",224],["T_STRING","delete",224],",",["T_WHITESPACE"," ",224],["T_VARIABLE","$this",224],["T_OBJECT_OPERATOR","->",224],["T_STRING","insert",224],",",["T_WHITESPACE"," ",224],["T_VARIABLE","$this",224],["T_OBJECT_OPERATOR","->",224],["T_STRING","update",224],")",";",["T_WHITESPACE","\n    ",224],"}",["T_WHITESPACE","\n\n    ",225],["T_DOC_COMMENT","\/**\n     * @param string $entityType\n     * @param string $value\n     * @param AbstractAttribute $attribute\n     * @return mixed\n     * @throws \\Exception\n     *\/",227],["T_WHITESPACE","\n    ",233],["T_PROTECTED","protected",234],["T_WHITESPACE"," ",234],["T_FUNCTION","function",234],["T_WHITESPACE"," ",234],["T_STRING","prepareValue",234],"(",["T_VARIABLE","$entityType",234],",",["T_WHITESPACE"," ",234],["T_VARIABLE","$value",234],",",["T_WHITESPACE"," ",234],["T_STRING","AbstractAttribute",234],["T_WHITESPACE"," ",234],["T_VARIABLE","$attribute",234],")",["T_WHITESPACE","\n    ",234],"{",["T_WHITESPACE","\n        ",235],["T_VARIABLE","$metadata",236],["T_WHITESPACE"," ",236],"=",["T_WHITESPACE"," ",236],["T_VARIABLE","$this",236],["T_OBJECT_OPERATOR","->",236],["T_STRING","metadataPool",236],["T_OBJECT_OPERATOR","->",236],["T_STRING","getMetadata",236],"(",["T_VARIABLE","$entityType",236],")",";",["T_WHITESPACE","\n        ",236],["T_VARIABLE","$type",237],["T_WHITESPACE"," ",237],"=",["T_WHITESPACE"," ",237],["T_VARIABLE","$attribute",237],["T_OBJECT_OPERATOR","->",237],["T_STRING","getBackendType",237],"(",")",";",["T_WHITESPACE","\n        ",237],["T_IF","if",238],["T_WHITESPACE"," ",238],"(","(",["T_VARIABLE","$type",238],["T_WHITESPACE"," ",238],["T_IS_EQUAL","==",238],["T_WHITESPACE"," ",238],["T_CONSTANT_ENCAPSED_STRING","'int'",238],["T_WHITESPACE"," ",238],["T_BOOLEAN_OR","||",238],["T_WHITESPACE"," ",238],["T_VARIABLE","$type",238],["T_WHITESPACE"," ",238],["T_IS_EQUAL","==",238],["T_WHITESPACE"," ",238],["T_CONSTANT_ENCAPSED_STRING","'decimal'",238],["T_WHITESPACE"," ",238],["T_BOOLEAN_OR","||",238],["T_WHITESPACE"," ",238],["T_VARIABLE","$type",238],["T_WHITESPACE"," ",238],["T_IS_EQUAL","==",238],["T_WHITESPACE"," ",238],["T_CONSTANT_ENCAPSED_STRING","'datetime'",238],")",["T_WHITESPACE"," ",238],["T_BOOLEAN_AND","&&",238],["T_WHITESPACE"," ",238],["T_VARIABLE","$value",238],["T_WHITESPACE"," ",238],["T_IS_IDENTICAL","===",238],["T_WHITESPACE"," ",238],["T_CONSTANT_ENCAPSED_STRING","''",238],")",["T_WHITESPACE"," ",238],"{",["T_WHITESPACE","\n            ",238],["T_VARIABLE","$value",239],["T_WHITESPACE"," ",239],"=",["T_WHITESPACE"," ",239],["T_STRING","null",239],";",["T_WHITESPACE","\n        ",239],"}",["T_WHITESPACE"," ",240],["T_ELSEIF","elseif",240],["T_WHITESPACE"," ",240],"(",["T_VARIABLE","$type",240],["T_WHITESPACE"," ",240],["T_IS_EQUAL","==",240],["T_WHITESPACE"," ",240],["T_CONSTANT_ENCAPSED_STRING","'decimal'",240],")",["T_WHITESPACE"," ",240],"{",["T_WHITESPACE","\n            ",240],["T_VARIABLE","$value",241],["T_WHITESPACE"," ",241],"=",["T_WHITESPACE"," ",241],["T_VARIABLE","$this",241],["T_OBJECT_OPERATOR","->",241],["T_STRING","localeFormat",241],["T_OBJECT_OPERATOR","->",241],["T_STRING","getNumber",241],"(",["T_VARIABLE","$value",241],")",";",["T_WHITESPACE","\n        ",241],"}",["T_WHITESPACE"," ",242],["T_ELSEIF","elseif",242],["T_WHITESPACE"," ",242],"(",["T_VARIABLE","$type",242],["T_WHITESPACE"," ",242],["T_IS_EQUAL","==",242],["T_WHITESPACE"," ",242],["T_CONSTANT_ENCAPSED_STRING","'varchar'",242],["T_WHITESPACE"," ",242],["T_BOOLEAN_AND","&&",242],["T_WHITESPACE"," ",242],["T_STRING","is_array",242],"(",["T_VARIABLE","$value",242],")",")",["T_WHITESPACE"," ",242],"{",["T_WHITESPACE","\n            ",242],["T_VARIABLE","$value",243],["T_WHITESPACE"," ",243],"=",["T_WHITESPACE"," ",243],["T_STRING","implode",243],"(",["T_CONSTANT_ENCAPSED_STRING","','",243],",",["T_WHITESPACE"," ",243],["T_VARIABLE","$value",243],")",";",["T_WHITESPACE","\n        ",243],"}",["T_WHITESPACE","\n        ",244],["T_VARIABLE","$describe",245],["T_WHITESPACE"," ",245],"=",["T_WHITESPACE"," ",245],["T_VARIABLE","$metadata",245],["T_OBJECT_OPERATOR","->",245],["T_STRING","getEntityConnection",245],"(",")",["T_OBJECT_OPERATOR","->",245],["T_STRING","describeTable",245],"(",["T_VARIABLE","$attribute",245],["T_OBJECT_OPERATOR","->",245],["T_STRING","getBackendTable",245],"(",")",")",";",["T_WHITESPACE","\n        ",245],["T_RETURN","return",246],["T_WHITESPACE"," ",246],["T_VARIABLE","$metadata",246],["T_OBJECT_OPERATOR","->",246],["T_STRING","getEntityConnection",246],"(",")",["T_OBJECT_OPERATOR","->",246],["T_STRING","prepareColumnValue",246],"(",["T_VARIABLE","$describe",246],"[",["T_CONSTANT_ENCAPSED_STRING","'value'",246],"]",",",["T_WHITESPACE"," ",246],["T_VARIABLE","$value",246],")",";",["T_WHITESPACE","\n    ",246],"}",["T_WHITESPACE","\n\n    ",247],["T_DOC_COMMENT","\/**\n     * @param ScopeInterface $scope\n     * @param AbstractAttribute $attribute\n     * @param bool $useDefault\n     * @return string\n     * @SuppressWarnings(PHPMD.UnusedFormalParameter)\n     *\/",249],["T_WHITESPACE","\n    ",255],["T_PROTECTED","protected",256],["T_WHITESPACE"," ",256],["T_FUNCTION","function",256],["T_WHITESPACE"," ",256],["T_STRING","getScopeValue",256],"(",["T_STRING","ScopeInterface",256],["T_WHITESPACE"," ",256],["T_VARIABLE","$scope",256],",",["T_WHITESPACE"," ",256],["T_STRING","AbstractAttribute",256],["T_WHITESPACE"," ",256],["T_VARIABLE","$attribute",256],",",["T_WHITESPACE"," ",256],["T_VARIABLE","$useDefault",256],["T_WHITESPACE"," ",256],"=",["T_WHITESPACE"," ",256],["T_STRING","false",256],")",["T_WHITESPACE","\n    ",256],"{",["T_WHITESPACE","\n        ",257],["T_IF","if",258],["T_WHITESPACE"," ",258],"(",["T_VARIABLE","$useDefault",258],["T_WHITESPACE"," ",258],["T_BOOLEAN_AND","&&",258],["T_WHITESPACE"," ",258],["T_VARIABLE","$scope",258],["T_OBJECT_OPERATOR","->",258],["T_STRING","getFallback",258],"(",")",")",["T_WHITESPACE"," ",258],"{",["T_WHITESPACE","\n            ",258],["T_RETURN","return",259],["T_WHITESPACE"," ",259],["T_VARIABLE","$this",259],["T_OBJECT_OPERATOR","->",259],["T_STRING","getScopeValue",259],"(",["T_VARIABLE","$scope",259],["T_OBJECT_OPERATOR","->",259],["T_STRING","getFallback",259],"(",")",",",["T_WHITESPACE"," ",259],["T_VARIABLE","$attribute",259],",",["T_WHITESPACE"," ",259],["T_VARIABLE","$useDefault",259],")",";",["T_WHITESPACE","\n        ",259],"}",["T_WHITESPACE","\n        ",260],["T_RETURN","return",261],["T_WHITESPACE"," ",261],["T_VARIABLE","$scope",261],["T_OBJECT_OPERATOR","->",261],["T_STRING","getValue",261],"(",")",";",["T_WHITESPACE","\n    ",261],"}",["T_WHITESPACE","\n",262],"}",["T_WHITESPACE","\n",263]]
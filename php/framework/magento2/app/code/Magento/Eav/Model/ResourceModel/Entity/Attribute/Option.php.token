[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Copyright \u00c2\u00a9 2013-2017 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n *\/",2],["T_WHITESPACE","\n",5],["T_NAMESPACE","namespace",6],["T_WHITESPACE"," ",6],["T_STRING","Magento",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Eav",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Model",6],["T_NS_SEPARATOR","\\",6],["T_STRING","ResourceModel",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Entity",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Attribute",6],";",["T_WHITESPACE","\n\n",6],["T_DOC_COMMENT","\/**\n * Entity attribute option resource model\n *\n * @author      Magento Core Team <core@magentocommerce.com>\n *\/",8],["T_WHITESPACE","\n",12],["T_CLASS","class",13],["T_WHITESPACE"," ",13],["T_STRING","Option",13],["T_WHITESPACE"," ",13],["T_EXTENDS","extends",13],["T_WHITESPACE"," ",13],["T_NS_SEPARATOR","\\",13],["T_STRING","Magento",13],["T_NS_SEPARATOR","\\",13],["T_STRING","Framework",13],["T_NS_SEPARATOR","\\",13],["T_STRING","Model",13],["T_NS_SEPARATOR","\\",13],["T_STRING","ResourceModel",13],["T_NS_SEPARATOR","\\",13],["T_STRING","Db",13],["T_NS_SEPARATOR","\\",13],["T_STRING","AbstractDb",13],["T_WHITESPACE","\n",13],"{",["T_WHITESPACE","\n    ",14],["T_DOC_COMMENT","\/**\n     * Resource initialization\n     *\n     * @return void\n     * @codeCoverageIgnore\n     *\/",15],["T_WHITESPACE","\n    ",20],["T_PROTECTED","protected",21],["T_WHITESPACE"," ",21],["T_FUNCTION","function",21],["T_WHITESPACE"," ",21],["T_STRING","_construct",21],"(",")",["T_WHITESPACE","\n    ",21],"{",["T_WHITESPACE","\n        ",22],["T_VARIABLE","$this",23],["T_OBJECT_OPERATOR","->",23],["T_STRING","_init",23],"(",["T_CONSTANT_ENCAPSED_STRING","'eav_attribute_option'",23],",",["T_WHITESPACE"," ",23],["T_CONSTANT_ENCAPSED_STRING","'option_id'",23],")",";",["T_WHITESPACE","\n    ",23],"}",["T_WHITESPACE","\n\n    ",24],["T_DOC_COMMENT","\/**\n     * Add Join with option value for collection select\n     *\n     * @param \\Magento\\Eav\\Model\\Entity\\Collection\\AbstractCollection $collection\n     * @param \\Magento\\Eav\\Model\\Entity\\Attribute $attribute\n     * @param \\Zend_Db_Expr $valueExpr\n     * @return $this\n     *\/",26],["T_WHITESPACE","\n    ",33],["T_PUBLIC","public",34],["T_WHITESPACE"," ",34],["T_FUNCTION","function",34],["T_WHITESPACE"," ",34],["T_STRING","addOptionValueToCollection",34],"(",["T_VARIABLE","$collection",34],",",["T_WHITESPACE"," ",34],["T_VARIABLE","$attribute",34],",",["T_WHITESPACE"," ",34],["T_VARIABLE","$valueExpr",34],")",["T_WHITESPACE","\n    ",34],"{",["T_WHITESPACE","\n        ",35],["T_VARIABLE","$connection",36],["T_WHITESPACE"," ",36],"=",["T_WHITESPACE"," ",36],["T_VARIABLE","$this",36],["T_OBJECT_OPERATOR","->",36],["T_STRING","getConnection",36],"(",")",";",["T_WHITESPACE","\n        ",36],["T_VARIABLE","$attributeCode",37],["T_WHITESPACE"," ",37],"=",["T_WHITESPACE"," ",37],["T_VARIABLE","$attribute",37],["T_OBJECT_OPERATOR","->",37],["T_STRING","getAttributeCode",37],"(",")",";",["T_WHITESPACE","\n        ",37],["T_VARIABLE","$optionTable1",38],["T_WHITESPACE"," ",38],"=",["T_WHITESPACE"," ",38],["T_VARIABLE","$attributeCode",38],["T_WHITESPACE"," ",38],".",["T_WHITESPACE"," ",38],["T_CONSTANT_ENCAPSED_STRING","'_option_value_t1'",38],";",["T_WHITESPACE","\n        ",38],["T_VARIABLE","$optionTable2",39],["T_WHITESPACE"," ",39],"=",["T_WHITESPACE"," ",39],["T_VARIABLE","$attributeCode",39],["T_WHITESPACE"," ",39],".",["T_WHITESPACE"," ",39],["T_CONSTANT_ENCAPSED_STRING","'_option_value_t2'",39],";",["T_WHITESPACE","\n        ",39],["T_VARIABLE","$tableJoinCond1",40],["T_WHITESPACE"," ",40],"=",["T_WHITESPACE"," ",40],"\"",["T_CURLY_OPEN","{",40],["T_VARIABLE","$optionTable1",40],"}",["T_ENCAPSED_AND_WHITESPACE",".option_id=",40],["T_CURLY_OPEN","{",40],["T_VARIABLE","$valueExpr",40],"}",["T_ENCAPSED_AND_WHITESPACE"," AND ",40],["T_CURLY_OPEN","{",40],["T_VARIABLE","$optionTable1",40],"}",["T_ENCAPSED_AND_WHITESPACE",".store_id=0",40],"\"",";",["T_WHITESPACE","\n        ",40],["T_VARIABLE","$tableJoinCond2",41],["T_WHITESPACE"," ",41],"=",["T_WHITESPACE"," ",41],["T_VARIABLE","$connection",41],["T_OBJECT_OPERATOR","->",41],["T_STRING","quoteInto",41],"(",["T_WHITESPACE","\n            ",41],"\"",["T_CURLY_OPEN","{",42],["T_VARIABLE","$optionTable2",42],"}",["T_ENCAPSED_AND_WHITESPACE",".option_id=",42],["T_CURLY_OPEN","{",42],["T_VARIABLE","$valueExpr",42],"}",["T_ENCAPSED_AND_WHITESPACE"," AND ",42],["T_CURLY_OPEN","{",42],["T_VARIABLE","$optionTable2",42],"}",["T_ENCAPSED_AND_WHITESPACE",".store_id=?",42],"\"",",",["T_WHITESPACE","\n            ",42],["T_VARIABLE","$collection",43],["T_OBJECT_OPERATOR","->",43],["T_STRING","getStoreId",43],"(",")",["T_WHITESPACE","\n        ",43],")",";",["T_WHITESPACE","\n        ",44],["T_VARIABLE","$valueExpr",45],["T_WHITESPACE"," ",45],"=",["T_WHITESPACE"," ",45],["T_VARIABLE","$connection",45],["T_OBJECT_OPERATOR","->",45],["T_STRING","getCheckSql",45],"(",["T_WHITESPACE","\n            ",45],"\"",["T_CURLY_OPEN","{",46],["T_VARIABLE","$optionTable2",46],"}",["T_ENCAPSED_AND_WHITESPACE",".value_id IS NULL",46],"\"",",",["T_WHITESPACE","\n            ",46],"\"",["T_CURLY_OPEN","{",47],["T_VARIABLE","$optionTable1",47],"}",["T_ENCAPSED_AND_WHITESPACE",".value",47],"\"",",",["T_WHITESPACE","\n            ",47],"\"",["T_CURLY_OPEN","{",48],["T_VARIABLE","$optionTable2",48],"}",["T_ENCAPSED_AND_WHITESPACE",".value",48],"\"",["T_WHITESPACE","\n        ",48],")",";",["T_WHITESPACE","\n\n        ",49],["T_VARIABLE","$collection",51],["T_OBJECT_OPERATOR","->",51],["T_STRING","getSelect",51],"(",")",["T_OBJECT_OPERATOR","->",51],["T_STRING","joinLeft",51],"(",["T_WHITESPACE","\n            ",51],"[",["T_VARIABLE","$optionTable1",52],["T_WHITESPACE"," ",52],["T_DOUBLE_ARROW","=>",52],["T_WHITESPACE"," ",52],["T_VARIABLE","$this",52],["T_OBJECT_OPERATOR","->",52],["T_STRING","getTable",52],"(",["T_CONSTANT_ENCAPSED_STRING","'eav_attribute_option_value'",52],")","]",",",["T_WHITESPACE","\n            ",52],["T_VARIABLE","$tableJoinCond1",53],",",["T_WHITESPACE","\n            ",53],"[","]",["T_WHITESPACE","\n        ",54],")",["T_OBJECT_OPERATOR","->",55],["T_STRING","joinLeft",55],"(",["T_WHITESPACE","\n            ",55],"[",["T_VARIABLE","$optionTable2",56],["T_WHITESPACE"," ",56],["T_DOUBLE_ARROW","=>",56],["T_WHITESPACE"," ",56],["T_VARIABLE","$this",56],["T_OBJECT_OPERATOR","->",56],["T_STRING","getTable",56],"(",["T_CONSTANT_ENCAPSED_STRING","'eav_attribute_option_value'",56],")","]",",",["T_WHITESPACE","\n            ",56],["T_VARIABLE","$tableJoinCond2",57],",",["T_WHITESPACE","\n            ",57],"[",["T_VARIABLE","$attributeCode",58],["T_WHITESPACE"," ",58],["T_DOUBLE_ARROW","=>",58],["T_WHITESPACE"," ",58],["T_VARIABLE","$valueExpr",58],"]",["T_WHITESPACE","\n        ",58],")",";",["T_WHITESPACE","\n\n        ",59],["T_RETURN","return",61],["T_WHITESPACE"," ",61],["T_VARIABLE","$this",61],";",["T_WHITESPACE","\n    ",61],"}",["T_WHITESPACE","\n\n    ",62],["T_DOC_COMMENT","\/**\n     * Retrieve Select for update Flat data\n     *\n     * @param \\Magento\\Eav\\Model\\Entity\\Attribute\\AbstractAttribute $attribute\n     * @param int $store\n     * @param bool $hasValueField flag which require option value\n     * @return \\Magento\\Framework\\DB\\Select\n     *\/",64],["T_WHITESPACE","\n    ",71],["T_PUBLIC","public",72],["T_WHITESPACE"," ",72],["T_FUNCTION","function",72],["T_WHITESPACE"," ",72],["T_STRING","getFlatUpdateSelect",72],"(",["T_WHITESPACE","\n        ",72],["T_NS_SEPARATOR","\\",73],["T_STRING","Magento",73],["T_NS_SEPARATOR","\\",73],["T_STRING","Eav",73],["T_NS_SEPARATOR","\\",73],["T_STRING","Model",73],["T_NS_SEPARATOR","\\",73],["T_STRING","Entity",73],["T_NS_SEPARATOR","\\",73],["T_STRING","Attribute",73],["T_NS_SEPARATOR","\\",73],["T_STRING","AbstractAttribute",73],["T_WHITESPACE"," ",73],["T_VARIABLE","$attribute",73],",",["T_WHITESPACE","\n        ",73],["T_VARIABLE","$store",74],",",["T_WHITESPACE","\n        ",74],["T_VARIABLE","$hasValueField",75],["T_WHITESPACE"," ",75],"=",["T_WHITESPACE"," ",75],["T_STRING","true",75],["T_WHITESPACE","\n    ",75],")",["T_WHITESPACE"," ",76],"{",["T_WHITESPACE","\n        ",76],["T_VARIABLE","$connection",77],["T_WHITESPACE"," ",77],"=",["T_WHITESPACE"," ",77],["T_VARIABLE","$this",77],["T_OBJECT_OPERATOR","->",77],["T_STRING","getConnection",77],"(",")",";",["T_WHITESPACE","\n        ",77],["T_VARIABLE","$attributeTable",78],["T_WHITESPACE"," ",78],"=",["T_WHITESPACE"," ",78],["T_VARIABLE","$attribute",78],["T_OBJECT_OPERATOR","->",78],["T_STRING","getBackend",78],"(",")",["T_OBJECT_OPERATOR","->",78],["T_STRING","getTable",78],"(",")",";",["T_WHITESPACE","\n        ",78],["T_VARIABLE","$attributeCode",79],["T_WHITESPACE"," ",79],"=",["T_WHITESPACE"," ",79],["T_VARIABLE","$attribute",79],["T_OBJECT_OPERATOR","->",79],["T_STRING","getAttributeCode",79],"(",")",";",["T_WHITESPACE","\n\n        ",79],["T_VARIABLE","$joinConditionTemplate",81],["T_WHITESPACE"," ",81],"=",["T_WHITESPACE"," ",81],["T_CONSTANT_ENCAPSED_STRING","\"%s.entity_id = %s.entity_id\"",81],["T_WHITESPACE"," ",81],".",["T_WHITESPACE","\n            ",81],["T_CONSTANT_ENCAPSED_STRING","\" AND %s.entity_type_id = \"",82],["T_WHITESPACE"," ",82],".",["T_WHITESPACE","\n            ",82],["T_VARIABLE","$attribute",83],["T_OBJECT_OPERATOR","->",83],["T_STRING","getEntityTypeId",83],"(",")",["T_WHITESPACE"," ",83],".",["T_WHITESPACE","\n            ",83],["T_CONSTANT_ENCAPSED_STRING","\" AND %s.attribute_id = \"",84],["T_WHITESPACE"," ",84],".",["T_WHITESPACE","\n            ",84],["T_VARIABLE","$attribute",85],["T_OBJECT_OPERATOR","->",85],["T_STRING","getId",85],"(",")",["T_WHITESPACE"," ",85],".",["T_WHITESPACE","\n            ",85],["T_CONSTANT_ENCAPSED_STRING","\" AND %s.store_id = %d\"",86],";",["T_WHITESPACE","\n        ",86],["T_VARIABLE","$joinCondition",87],["T_WHITESPACE"," ",87],"=",["T_WHITESPACE"," ",87],["T_STRING","sprintf",87],"(",["T_WHITESPACE","\n            ",87],["T_VARIABLE","$joinConditionTemplate",88],",",["T_WHITESPACE","\n            ",88],["T_CONSTANT_ENCAPSED_STRING","'e'",89],",",["T_WHITESPACE","\n            ",89],["T_CONSTANT_ENCAPSED_STRING","'t1'",90],",",["T_WHITESPACE","\n            ",90],["T_CONSTANT_ENCAPSED_STRING","'t1'",91],",",["T_WHITESPACE","\n            ",91],["T_CONSTANT_ENCAPSED_STRING","'t1'",92],",",["T_WHITESPACE","\n            ",92],["T_CONSTANT_ENCAPSED_STRING","'t1'",93],",",["T_WHITESPACE","\n            ",93],["T_NS_SEPARATOR","\\",94],["T_STRING","Magento",94],["T_NS_SEPARATOR","\\",94],["T_STRING","Store",94],["T_NS_SEPARATOR","\\",94],["T_STRING","Model",94],["T_NS_SEPARATOR","\\",94],["T_STRING","Store",94],["T_DOUBLE_COLON","::",94],["T_STRING","DEFAULT_STORE_ID",94],["T_WHITESPACE","\n        ",94],")",";",["T_WHITESPACE","\n        ",95],["T_IF","if",96],["T_WHITESPACE"," ",96],"(",["T_VARIABLE","$attribute",96],["T_OBJECT_OPERATOR","->",96],["T_STRING","getFlatAddChildData",96],"(",")",")",["T_WHITESPACE"," ",96],"{",["T_WHITESPACE","\n            ",96],["T_VARIABLE","$joinCondition",97],["T_WHITESPACE"," ",97],["T_CONCAT_EQUAL",".=",97],["T_WHITESPACE"," ",97],["T_CONSTANT_ENCAPSED_STRING","' AND e.child_id = t1.entity_id'",97],";",["T_WHITESPACE","\n        ",97],"}",["T_WHITESPACE","\n\n        ",98],["T_VARIABLE","$valueExpr",100],["T_WHITESPACE"," ",100],"=",["T_WHITESPACE"," ",100],["T_VARIABLE","$connection",100],["T_OBJECT_OPERATOR","->",100],["T_STRING","getCheckSql",100],"(",["T_CONSTANT_ENCAPSED_STRING","'t2.value_id > 0'",100],",",["T_WHITESPACE"," ",100],["T_CONSTANT_ENCAPSED_STRING","'t2.value'",100],",",["T_WHITESPACE"," ",100],["T_CONSTANT_ENCAPSED_STRING","'t1.value'",100],")",";",["T_WHITESPACE","\n        ",100],["T_DOC_COMMENT","\/** @var $select \\Magento\\Framework\\DB\\Select *\/",101],["T_WHITESPACE","\n        ",101],["T_VARIABLE","$select",102],["T_WHITESPACE"," ",102],"=",["T_WHITESPACE"," ",102],["T_VARIABLE","$connection",102],["T_OBJECT_OPERATOR","->",102],["T_STRING","select",102],"(",")",["T_OBJECT_OPERATOR","->",102],["T_STRING","joinLeft",102],"(",["T_WHITESPACE","\n            ",102],"[",["T_CONSTANT_ENCAPSED_STRING","'t1'",103],["T_WHITESPACE"," ",103],["T_DOUBLE_ARROW","=>",103],["T_WHITESPACE"," ",103],["T_VARIABLE","$attributeTable",103],"]",",",["T_WHITESPACE","\n            ",103],["T_VARIABLE","$joinCondition",104],",",["T_WHITESPACE","\n            ",104],"[","]",["T_WHITESPACE","\n        ",105],")",["T_OBJECT_OPERATOR","->",106],["T_STRING","joinLeft",106],"(",["T_WHITESPACE","\n            ",106],"[",["T_CONSTANT_ENCAPSED_STRING","'t2'",107],["T_WHITESPACE"," ",107],["T_DOUBLE_ARROW","=>",107],["T_WHITESPACE"," ",107],["T_VARIABLE","$attributeTable",107],"]",",",["T_WHITESPACE","\n            ",107],["T_STRING","sprintf",108],"(",["T_VARIABLE","$joinConditionTemplate",108],",",["T_WHITESPACE"," ",108],["T_CONSTANT_ENCAPSED_STRING","'t1'",108],",",["T_WHITESPACE"," ",108],["T_CONSTANT_ENCAPSED_STRING","'t2'",108],",",["T_WHITESPACE"," ",108],["T_CONSTANT_ENCAPSED_STRING","'t2'",108],",",["T_WHITESPACE"," ",108],["T_CONSTANT_ENCAPSED_STRING","'t2'",108],",",["T_WHITESPACE"," ",108],["T_CONSTANT_ENCAPSED_STRING","'t2'",108],",",["T_WHITESPACE"," ",108],["T_VARIABLE","$store",108],")",",",["T_WHITESPACE","\n            ",108],"[",["T_VARIABLE","$attributeCode",109],["T_WHITESPACE"," ",109],["T_DOUBLE_ARROW","=>",109],["T_WHITESPACE"," ",109],["T_VARIABLE","$valueExpr",109],"]",["T_WHITESPACE","\n        ",109],")",";",["T_WHITESPACE","\n\n        ",110],["T_IF","if",112],["T_WHITESPACE"," ",112],"(",["T_VARIABLE","$attribute",112],["T_OBJECT_OPERATOR","->",112],["T_STRING","getFrontend",112],"(",")",["T_OBJECT_OPERATOR","->",112],["T_STRING","getInputType",112],"(",")",["T_WHITESPACE"," ",112],["T_IS_NOT_EQUAL","!=",112],["T_WHITESPACE"," ",112],["T_CONSTANT_ENCAPSED_STRING","'multiselect'",112],["T_WHITESPACE"," ",112],["T_BOOLEAN_AND","&&",112],["T_WHITESPACE"," ",112],["T_VARIABLE","$hasValueField",112],")",["T_WHITESPACE"," ",112],"{",["T_WHITESPACE","\n            ",112],["T_VARIABLE","$valueIdExpr",113],["T_WHITESPACE"," ",113],"=",["T_WHITESPACE"," ",113],["T_VARIABLE","$connection",113],["T_OBJECT_OPERATOR","->",113],["T_STRING","getCheckSql",113],"(",["T_CONSTANT_ENCAPSED_STRING","'to2.value_id > 0'",113],",",["T_WHITESPACE"," ",113],["T_CONSTANT_ENCAPSED_STRING","'to2.value'",113],",",["T_WHITESPACE"," ",113],["T_CONSTANT_ENCAPSED_STRING","'to1.value'",113],")",";",["T_WHITESPACE","\n            ",113],["T_VARIABLE","$select",114],["T_OBJECT_OPERATOR","->",114],["T_STRING","joinLeft",114],"(",["T_WHITESPACE","\n                ",114],"[",["T_CONSTANT_ENCAPSED_STRING","'to1'",115],["T_WHITESPACE"," ",115],["T_DOUBLE_ARROW","=>",115],["T_WHITESPACE"," ",115],["T_VARIABLE","$this",115],["T_OBJECT_OPERATOR","->",115],["T_STRING","getTable",115],"(",["T_CONSTANT_ENCAPSED_STRING","'eav_attribute_option_value'",115],")","]",",",["T_WHITESPACE","\n                ",115],"\"",["T_ENCAPSED_AND_WHITESPACE","to1.option_id = ",116],["T_CURLY_OPEN","{",116],["T_VARIABLE","$valueExpr",116],"}",["T_ENCAPSED_AND_WHITESPACE"," AND to1.store_id = 0",116],"\"",",",["T_WHITESPACE","\n                ",116],"[","]",["T_WHITESPACE","\n            ",117],")",["T_OBJECT_OPERATOR","->",118],["T_STRING","joinLeft",118],"(",["T_WHITESPACE","\n                ",118],"[",["T_CONSTANT_ENCAPSED_STRING","'to2'",119],["T_WHITESPACE"," ",119],["T_DOUBLE_ARROW","=>",119],["T_WHITESPACE"," ",119],["T_VARIABLE","$this",119],["T_OBJECT_OPERATOR","->",119],["T_STRING","getTable",119],"(",["T_CONSTANT_ENCAPSED_STRING","'eav_attribute_option_value'",119],")","]",",",["T_WHITESPACE","\n                ",119],["T_VARIABLE","$connection",120],["T_OBJECT_OPERATOR","->",120],["T_STRING","quoteInto",120],"(","\"",["T_ENCAPSED_AND_WHITESPACE","to2.option_id = ",120],["T_CURLY_OPEN","{",120],["T_VARIABLE","$valueExpr",120],"}",["T_ENCAPSED_AND_WHITESPACE"," AND to2.store_id = ?",120],"\"",",",["T_WHITESPACE"," ",120],["T_VARIABLE","$store",120],")",",",["T_WHITESPACE","\n                ",120],"[",["T_VARIABLE","$attributeCode",121],["T_WHITESPACE"," ",121],".",["T_WHITESPACE"," ",121],["T_CONSTANT_ENCAPSED_STRING","'_value'",121],["T_WHITESPACE"," ",121],["T_DOUBLE_ARROW","=>",121],["T_WHITESPACE"," ",121],["T_VARIABLE","$valueIdExpr",121],"]",["T_WHITESPACE","\n            ",121],")",";",["T_WHITESPACE","\n        ",122],"}",["T_WHITESPACE","\n\n        ",123],["T_IF","if",125],["T_WHITESPACE"," ",125],"(",["T_VARIABLE","$attribute",125],["T_OBJECT_OPERATOR","->",125],["T_STRING","getFlatAddChildData",125],"(",")",")",["T_WHITESPACE"," ",125],"{",["T_WHITESPACE","\n            ",125],["T_VARIABLE","$select",126],["T_OBJECT_OPERATOR","->",126],["T_STRING","where",126],"(",["T_CONSTANT_ENCAPSED_STRING","'e.is_child = 0'",126],")",";",["T_WHITESPACE","\n        ",126],"}",["T_WHITESPACE","\n\n        ",127],["T_RETURN","return",129],["T_WHITESPACE"," ",129],["T_VARIABLE","$select",129],";",["T_WHITESPACE","\n    ",129],"}",["T_WHITESPACE","\n",130],"}",["T_WHITESPACE","\n",131]]
[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Copyright \u00c2\u00a9 2013-2017 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n *\/",2],["T_WHITESPACE","\n",5],["T_NAMESPACE","namespace",6],["T_WHITESPACE"," ",6],["T_STRING","Magento",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Eav",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Model",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Attribute",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Data",6],";",["T_WHITESPACE","\n\n",6],["T_USE","use",8],["T_WHITESPACE"," ",8],["T_STRING","Magento",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Framework",8],["T_NS_SEPARATOR","\\",8],["T_STRING","App",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Filesystem",8],["T_NS_SEPARATOR","\\",8],["T_STRING","DirectoryList",8],";",["T_WHITESPACE","\n",8],["T_USE","use",9],["T_WHITESPACE"," ",9],["T_STRING","Magento",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Framework",9],["T_NS_SEPARATOR","\\",9],["T_STRING","App",9],["T_NS_SEPARATOR","\\",9],["T_STRING","RequestInterface",9],";",["T_WHITESPACE","\n\n",9],["T_DOC_COMMENT","\/**\n * EAV Entity Attribute File Data Model\n *\n * @author      Magento Core Team <core@magentocommerce.com>\n *\/",11],["T_WHITESPACE","\n",15],["T_CLASS","class",16],["T_WHITESPACE"," ",16],["T_STRING","File",16],["T_WHITESPACE"," ",16],["T_EXTENDS","extends",16],["T_WHITESPACE"," ",16],["T_NS_SEPARATOR","\\",16],["T_STRING","Magento",16],["T_NS_SEPARATOR","\\",16],["T_STRING","Eav",16],["T_NS_SEPARATOR","\\",16],["T_STRING","Model",16],["T_NS_SEPARATOR","\\",16],["T_STRING","Attribute",16],["T_NS_SEPARATOR","\\",16],["T_STRING","Data",16],["T_NS_SEPARATOR","\\",16],["T_STRING","AbstractData",16],["T_WHITESPACE","\n",16],"{",["T_WHITESPACE","\n    ",17],["T_DOC_COMMENT","\/**\n     * Validator for check not protected extensions\n     *\n     * @var \\Magento\\MediaStorage\\Model\\File\\Validator\\NotProtectedExtension\n     *\/",18],["T_WHITESPACE","\n    ",22],["T_PROTECTED","protected",23],["T_WHITESPACE"," ",23],["T_VARIABLE","$_validatorNotProtectedExtensions",23],";",["T_WHITESPACE","\n\n    ",23],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Framework\\Url\\EncoderInterface\n     *\/",25],["T_WHITESPACE","\n    ",27],["T_PROTECTED","protected",28],["T_WHITESPACE"," ",28],["T_VARIABLE","$urlEncoder",28],";",["T_WHITESPACE","\n\n    ",28],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\MediaStorage\\Model\\File\\Validator\\NotProtectedExtension\n     *\/",30],["T_WHITESPACE","\n    ",32],["T_PROTECTED","protected",33],["T_WHITESPACE"," ",33],["T_VARIABLE","$_fileValidator",33],";",["T_WHITESPACE","\n\n    ",33],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Framework\\Filesystem\\Directory\\Write\n     *\/",35],["T_WHITESPACE","\n    ",37],["T_PROTECTED","protected",38],["T_WHITESPACE"," ",38],["T_VARIABLE","$_directory",38],";",["T_WHITESPACE","\n\n    ",38],["T_DOC_COMMENT","\/**\n     * @param \\Magento\\Framework\\Stdlib\\DateTime\\TimezoneInterface $localeDate\n     * @param \\Psr\\Log\\LoggerInterface $logger\n     * @param \\Magento\\Framework\\Locale\\ResolverInterface $localeResolver\n     * @param \\Magento\\Framework\\Url\\EncoderInterface $urlEncoder\n     * @param \\Magento\\MediaStorage\\Model\\File\\Validator\\NotProtectedExtension $fileValidator\n     * @param \\Magento\\Framework\\Filesystem $filesystem\n     * @codeCoverageIgnore\n     *\/",40],["T_WHITESPACE","\n    ",48],["T_PUBLIC","public",49],["T_WHITESPACE"," ",49],["T_FUNCTION","function",49],["T_WHITESPACE"," ",49],["T_STRING","__construct",49],"(",["T_WHITESPACE","\n        ",49],["T_NS_SEPARATOR","\\",50],["T_STRING","Magento",50],["T_NS_SEPARATOR","\\",50],["T_STRING","Framework",50],["T_NS_SEPARATOR","\\",50],["T_STRING","Stdlib",50],["T_NS_SEPARATOR","\\",50],["T_STRING","DateTime",50],["T_NS_SEPARATOR","\\",50],["T_STRING","TimezoneInterface",50],["T_WHITESPACE"," ",50],["T_VARIABLE","$localeDate",50],",",["T_WHITESPACE","\n        ",50],["T_NS_SEPARATOR","\\",51],["T_STRING","Psr",51],["T_NS_SEPARATOR","\\",51],["T_STRING","Log",51],["T_NS_SEPARATOR","\\",51],["T_STRING","LoggerInterface",51],["T_WHITESPACE"," ",51],["T_VARIABLE","$logger",51],",",["T_WHITESPACE","\n        ",51],["T_NS_SEPARATOR","\\",52],["T_STRING","Magento",52],["T_NS_SEPARATOR","\\",52],["T_STRING","Framework",52],["T_NS_SEPARATOR","\\",52],["T_STRING","Locale",52],["T_NS_SEPARATOR","\\",52],["T_STRING","ResolverInterface",52],["T_WHITESPACE"," ",52],["T_VARIABLE","$localeResolver",52],",",["T_WHITESPACE","\n        ",52],["T_NS_SEPARATOR","\\",53],["T_STRING","Magento",53],["T_NS_SEPARATOR","\\",53],["T_STRING","Framework",53],["T_NS_SEPARATOR","\\",53],["T_STRING","Url",53],["T_NS_SEPARATOR","\\",53],["T_STRING","EncoderInterface",53],["T_WHITESPACE"," ",53],["T_VARIABLE","$urlEncoder",53],",",["T_WHITESPACE","\n        ",53],["T_NS_SEPARATOR","\\",54],["T_STRING","Magento",54],["T_NS_SEPARATOR","\\",54],["T_STRING","MediaStorage",54],["T_NS_SEPARATOR","\\",54],["T_STRING","Model",54],["T_NS_SEPARATOR","\\",54],["T_STRING","File",54],["T_NS_SEPARATOR","\\",54],["T_STRING","Validator",54],["T_NS_SEPARATOR","\\",54],["T_STRING","NotProtectedExtension",54],["T_WHITESPACE"," ",54],["T_VARIABLE","$fileValidator",54],",",["T_WHITESPACE","\n        ",54],["T_NS_SEPARATOR","\\",55],["T_STRING","Magento",55],["T_NS_SEPARATOR","\\",55],["T_STRING","Framework",55],["T_NS_SEPARATOR","\\",55],["T_STRING","Filesystem",55],["T_WHITESPACE"," ",55],["T_VARIABLE","$filesystem",55],["T_WHITESPACE","\n    ",55],")",["T_WHITESPACE"," ",56],"{",["T_WHITESPACE","\n        ",56],["T_STRING","parent",57],["T_DOUBLE_COLON","::",57],["T_STRING","__construct",57],"(",["T_VARIABLE","$localeDate",57],",",["T_WHITESPACE"," ",57],["T_VARIABLE","$logger",57],",",["T_WHITESPACE"," ",57],["T_VARIABLE","$localeResolver",57],")",";",["T_WHITESPACE","\n        ",57],["T_VARIABLE","$this",58],["T_OBJECT_OPERATOR","->",58],["T_STRING","urlEncoder",58],["T_WHITESPACE"," ",58],"=",["T_WHITESPACE"," ",58],["T_VARIABLE","$urlEncoder",58],";",["T_WHITESPACE","\n        ",58],["T_VARIABLE","$this",59],["T_OBJECT_OPERATOR","->",59],["T_STRING","_fileValidator",59],["T_WHITESPACE"," ",59],"=",["T_WHITESPACE"," ",59],["T_VARIABLE","$fileValidator",59],";",["T_WHITESPACE","\n        ",59],["T_VARIABLE","$this",60],["T_OBJECT_OPERATOR","->",60],["T_STRING","_directory",60],["T_WHITESPACE"," ",60],"=",["T_WHITESPACE"," ",60],["T_VARIABLE","$filesystem",60],["T_OBJECT_OPERATOR","->",60],["T_STRING","getDirectoryWrite",60],"(",["T_STRING","DirectoryList",60],["T_DOUBLE_COLON","::",60],["T_STRING","MEDIA",60],")",";",["T_WHITESPACE","\n    ",60],"}",["T_WHITESPACE","\n\n    ",61],["T_DOC_COMMENT","\/**\n     * Extract data from request and return value\n     *\n     * @param RequestInterface $request\n     * @return array|string|bool\n     * @SuppressWarnings(PHPMD.CyclomaticComplexity)\n     *\/",63],["T_WHITESPACE","\n    ",69],["T_PUBLIC","public",70],["T_WHITESPACE"," ",70],["T_FUNCTION","function",70],["T_WHITESPACE"," ",70],["T_STRING","extractValue",70],"(",["T_STRING","RequestInterface",70],["T_WHITESPACE"," ",70],["T_VARIABLE","$request",70],")",["T_WHITESPACE","\n    ",70],"{",["T_WHITESPACE","\n        ",71],["T_IF","if",72],["T_WHITESPACE"," ",72],"(",["T_VARIABLE","$this",72],["T_OBJECT_OPERATOR","->",72],["T_STRING","getIsAjaxRequest",72],"(",")",")",["T_WHITESPACE"," ",72],"{",["T_WHITESPACE","\n            ",72],["T_RETURN","return",73],["T_WHITESPACE"," ",73],["T_STRING","false",73],";",["T_WHITESPACE","\n        ",73],"}",["T_WHITESPACE","\n\n        ",74],["T_VARIABLE","$extend",76],["T_WHITESPACE"," ",76],"=",["T_WHITESPACE"," ",76],["T_VARIABLE","$this",76],["T_OBJECT_OPERATOR","->",76],["T_STRING","_getRequestValue",76],"(",["T_VARIABLE","$request",76],")",";",["T_WHITESPACE","\n\n        ",76],["T_VARIABLE","$attrCode",78],["T_WHITESPACE"," ",78],"=",["T_WHITESPACE"," ",78],["T_VARIABLE","$this",78],["T_OBJECT_OPERATOR","->",78],["T_STRING","getAttribute",78],"(",")",["T_OBJECT_OPERATOR","->",78],["T_STRING","getAttributeCode",78],"(",")",";",["T_WHITESPACE","\n        ",78],["T_IF","if",79],["T_WHITESPACE"," ",79],"(",["T_VARIABLE","$this",79],["T_OBJECT_OPERATOR","->",79],["T_STRING","_requestScope",79],")",["T_WHITESPACE"," ",79],"{",["T_WHITESPACE","\n            ",79],["T_VARIABLE","$value",80],["T_WHITESPACE"," ",80],"=",["T_WHITESPACE"," ",80],"[","]",";",["T_WHITESPACE","\n            ",80],["T_IF","if",81],["T_WHITESPACE"," ",81],"(",["T_STRING","strpos",81],"(",["T_VARIABLE","$this",81],["T_OBJECT_OPERATOR","->",81],["T_STRING","_requestScope",81],",",["T_WHITESPACE"," ",81],["T_CONSTANT_ENCAPSED_STRING","'\/'",81],")",["T_WHITESPACE"," ",81],["T_IS_NOT_IDENTICAL","!==",81],["T_WHITESPACE"," ",81],["T_STRING","false",81],")",["T_WHITESPACE"," ",81],"{",["T_WHITESPACE","\n                ",81],["T_VARIABLE","$scopes",82],["T_WHITESPACE"," ",82],"=",["T_WHITESPACE"," ",82],["T_STRING","explode",82],"(",["T_CONSTANT_ENCAPSED_STRING","'\/'",82],",",["T_WHITESPACE"," ",82],["T_VARIABLE","$this",82],["T_OBJECT_OPERATOR","->",82],["T_STRING","_requestScope",82],")",";",["T_WHITESPACE","\n                ",82],["T_VARIABLE","$mainScope",83],["T_WHITESPACE"," ",83],"=",["T_WHITESPACE"," ",83],["T_STRING","array_shift",83],"(",["T_VARIABLE","$scopes",83],")",";",["T_WHITESPACE","\n            ",83],"}",["T_WHITESPACE"," ",84],["T_ELSE","else",84],["T_WHITESPACE"," ",84],"{",["T_WHITESPACE","\n                ",84],["T_VARIABLE","$mainScope",85],["T_WHITESPACE"," ",85],"=",["T_WHITESPACE"," ",85],["T_VARIABLE","$this",85],["T_OBJECT_OPERATOR","->",85],["T_STRING","_requestScope",85],";",["T_WHITESPACE","\n                ",85],["T_VARIABLE","$scopes",86],["T_WHITESPACE"," ",86],"=",["T_WHITESPACE"," ",86],"[","]",";",["T_WHITESPACE","\n            ",86],"}",["T_WHITESPACE","\n\n            ",87],["T_IF","if",89],["T_WHITESPACE"," ",89],"(","!",["T_EMPTY","empty",89],"(",["T_VARIABLE","$_FILES",89],"[",["T_VARIABLE","$mainScope",89],"]",")",")",["T_WHITESPACE"," ",89],"{",["T_WHITESPACE","\n                ",89],["T_FOREACH","foreach",90],["T_WHITESPACE"," ",90],"(",["T_VARIABLE","$_FILES",90],"[",["T_VARIABLE","$mainScope",90],"]",["T_WHITESPACE"," ",90],["T_AS","as",90],["T_WHITESPACE"," ",90],["T_VARIABLE","$fileKey",90],["T_WHITESPACE"," ",90],["T_DOUBLE_ARROW","=>",90],["T_WHITESPACE"," ",90],["T_VARIABLE","$scopeData",90],")",["T_WHITESPACE"," ",90],"{",["T_WHITESPACE","\n                    ",90],["T_FOREACH","foreach",91],["T_WHITESPACE"," ",91],"(",["T_VARIABLE","$scopes",91],["T_WHITESPACE"," ",91],["T_AS","as",91],["T_WHITESPACE"," ",91],["T_VARIABLE","$scopeName",91],")",["T_WHITESPACE"," ",91],"{",["T_WHITESPACE","\n                        ",91],["T_IF","if",92],["T_WHITESPACE"," ",92],"(",["T_ISSET","isset",92],"(",["T_VARIABLE","$scopeData",92],"[",["T_VARIABLE","$scopeName",92],"]",")",")",["T_WHITESPACE"," ",92],"{",["T_WHITESPACE","\n                            ",92],["T_VARIABLE","$scopeData",93],["T_WHITESPACE"," ",93],"=",["T_WHITESPACE"," ",93],["T_VARIABLE","$scopeData",93],"[",["T_VARIABLE","$scopeName",93],"]",";",["T_WHITESPACE","\n                        ",93],"}",["T_WHITESPACE"," ",94],["T_ELSE","else",94],["T_WHITESPACE"," ",94],"{",["T_WHITESPACE","\n                            ",94],["T_VARIABLE","$scopeData",95],"[",["T_VARIABLE","$scopeName",95],"]",["T_WHITESPACE"," ",95],"=",["T_WHITESPACE"," ",95],"[","]",";",["T_WHITESPACE","\n                        ",95],"}",["T_WHITESPACE","\n                    ",96],"}",["T_WHITESPACE","\n\n                    ",97],["T_IF","if",99],["T_WHITESPACE"," ",99],"(",["T_ISSET","isset",99],"(",["T_VARIABLE","$scopeData",99],"[",["T_VARIABLE","$attrCode",99],"]",")",")",["T_WHITESPACE"," ",99],"{",["T_WHITESPACE","\n                        ",99],["T_VARIABLE","$value",100],"[",["T_VARIABLE","$fileKey",100],"]",["T_WHITESPACE"," ",100],"=",["T_WHITESPACE"," ",100],["T_VARIABLE","$scopeData",100],"[",["T_VARIABLE","$attrCode",100],"]",";",["T_WHITESPACE","\n                    ",100],"}",["T_WHITESPACE","\n                ",101],"}",["T_WHITESPACE","\n            ",102],"}",["T_WHITESPACE"," ",103],["T_ELSE","else",103],["T_WHITESPACE"," ",103],"{",["T_WHITESPACE","\n                ",103],["T_VARIABLE","$value",104],["T_WHITESPACE"," ",104],"=",["T_WHITESPACE"," ",104],"[","]",";",["T_WHITESPACE","\n            ",104],"}",["T_WHITESPACE","\n        ",105],"}",["T_WHITESPACE"," ",106],["T_ELSE","else",106],["T_WHITESPACE"," ",106],"{",["T_WHITESPACE","\n            ",106],["T_IF","if",107],["T_WHITESPACE"," ",107],"(",["T_ISSET","isset",107],"(",["T_VARIABLE","$_FILES",107],"[",["T_VARIABLE","$attrCode",107],"]",")",")",["T_WHITESPACE"," ",107],"{",["T_WHITESPACE","\n                ",107],["T_VARIABLE","$value",108],["T_WHITESPACE"," ",108],"=",["T_WHITESPACE"," ",108],["T_VARIABLE","$_FILES",108],"[",["T_VARIABLE","$attrCode",108],"]",";",["T_WHITESPACE","\n            ",108],"}",["T_WHITESPACE"," ",109],["T_ELSE","else",109],["T_WHITESPACE"," ",109],"{",["T_WHITESPACE","\n                ",109],["T_VARIABLE","$value",110],["T_WHITESPACE"," ",110],"=",["T_WHITESPACE"," ",110],"[","]",";",["T_WHITESPACE","\n            ",110],"}",["T_WHITESPACE","\n        ",111],"}",["T_WHITESPACE","\n\n        ",112],["T_IF","if",114],["T_WHITESPACE"," ",114],"(","!",["T_EMPTY","empty",114],"(",["T_VARIABLE","$extend",114],"[",["T_CONSTANT_ENCAPSED_STRING","'delete'",114],"]",")",")",["T_WHITESPACE"," ",114],"{",["T_WHITESPACE","\n            ",114],["T_VARIABLE","$value",115],"[",["T_CONSTANT_ENCAPSED_STRING","'delete'",115],"]",["T_WHITESPACE"," ",115],"=",["T_WHITESPACE"," ",115],["T_STRING","true",115],";",["T_WHITESPACE","\n        ",115],"}",["T_WHITESPACE","\n\n        ",116],["T_RETURN","return",118],["T_WHITESPACE"," ",118],["T_VARIABLE","$value",118],";",["T_WHITESPACE","\n    ",118],"}",["T_WHITESPACE","\n\n    ",119],["T_DOC_COMMENT","\/**\n     * Validate file by attribute validate rules\n     * Return array of errors\n     *\n     * @param array $value\n     * @return string[]\n     *\/",121],["T_WHITESPACE","\n    ",127],["T_PROTECTED","protected",128],["T_WHITESPACE"," ",128],["T_FUNCTION","function",128],["T_WHITESPACE"," ",128],["T_STRING","_validateByRules",128],"(",["T_VARIABLE","$value",128],")",["T_WHITESPACE","\n    ",128],"{",["T_WHITESPACE","\n        ",129],["T_VARIABLE","$label",130],["T_WHITESPACE"," ",130],"=",["T_WHITESPACE"," ",130],["T_VARIABLE","$this",130],["T_OBJECT_OPERATOR","->",130],["T_STRING","getAttribute",130],"(",")",["T_OBJECT_OPERATOR","->",130],["T_STRING","getStoreLabel",130],"(",")",";",["T_WHITESPACE","\n        ",130],["T_VARIABLE","$rules",131],["T_WHITESPACE"," ",131],"=",["T_WHITESPACE"," ",131],["T_VARIABLE","$this",131],["T_OBJECT_OPERATOR","->",131],["T_STRING","getAttribute",131],"(",")",["T_OBJECT_OPERATOR","->",131],["T_STRING","getValidateRules",131],"(",")",";",["T_WHITESPACE","\n        ",131],["T_VARIABLE","$extension",132],["T_WHITESPACE"," ",132],"=",["T_WHITESPACE"," ",132],["T_STRING","pathinfo",132],"(",["T_VARIABLE","$value",132],"[",["T_CONSTANT_ENCAPSED_STRING","'name'",132],"]",",",["T_WHITESPACE"," ",132],["T_STRING","PATHINFO_EXTENSION",132],")",";",["T_WHITESPACE","\n\n        ",132],["T_IF","if",134],["T_WHITESPACE"," ",134],"(","!",["T_EMPTY","empty",134],"(",["T_VARIABLE","$rules",134],"[",["T_CONSTANT_ENCAPSED_STRING","'file_extensions'",134],"]",")",")",["T_WHITESPACE"," ",134],"{",["T_WHITESPACE","\n            ",134],["T_VARIABLE","$extensions",135],["T_WHITESPACE"," ",135],"=",["T_WHITESPACE"," ",135],["T_STRING","explode",135],"(",["T_CONSTANT_ENCAPSED_STRING","','",135],",",["T_WHITESPACE"," ",135],["T_VARIABLE","$rules",135],"[",["T_CONSTANT_ENCAPSED_STRING","'file_extensions'",135],"]",")",";",["T_WHITESPACE","\n            ",135],["T_VARIABLE","$extensions",136],["T_WHITESPACE"," ",136],"=",["T_WHITESPACE"," ",136],["T_STRING","array_map",136],"(",["T_CONSTANT_ENCAPSED_STRING","'trim'",136],",",["T_WHITESPACE"," ",136],["T_VARIABLE","$extensions",136],")",";",["T_WHITESPACE","\n            ",136],["T_IF","if",137],["T_WHITESPACE"," ",137],"(","!",["T_STRING","in_array",137],"(",["T_VARIABLE","$extension",137],",",["T_WHITESPACE"," ",137],["T_VARIABLE","$extensions",137],")",")",["T_WHITESPACE"," ",137],"{",["T_WHITESPACE","\n                ",137],["T_RETURN","return",138],["T_WHITESPACE"," ",138],"[",["T_STRING","__",138],"(",["T_CONSTANT_ENCAPSED_STRING","'\"%1\" is not a valid file extension.'",138],",",["T_WHITESPACE"," ",138],["T_VARIABLE","$label",138],")","]",";",["T_WHITESPACE","\n            ",138],"}",["T_WHITESPACE","\n        ",139],"}",["T_WHITESPACE","\n\n        ",140],["T_DOC_COMMENT","\/**\n         * Check protected file extension\n         *\/",142],["T_WHITESPACE","\n        ",144],["T_IF","if",145],["T_WHITESPACE"," ",145],"(","!",["T_VARIABLE","$this",145],["T_OBJECT_OPERATOR","->",145],["T_STRING","_fileValidator",145],["T_OBJECT_OPERATOR","->",145],["T_STRING","isValid",145],"(",["T_VARIABLE","$extension",145],")",")",["T_WHITESPACE"," ",145],"{",["T_WHITESPACE","\n            ",145],["T_RETURN","return",146],["T_WHITESPACE"," ",146],["T_VARIABLE","$this",146],["T_OBJECT_OPERATOR","->",146],["T_STRING","_fileValidator",146],["T_OBJECT_OPERATOR","->",146],["T_STRING","getMessages",146],"(",")",";",["T_WHITESPACE","\n        ",146],"}",["T_WHITESPACE","\n\n        ",147],["T_IF","if",149],["T_WHITESPACE"," ",149],"(","!",["T_STRING","is_uploaded_file",149],"(",["T_VARIABLE","$value",149],"[",["T_CONSTANT_ENCAPSED_STRING","'tmp_name'",149],"]",")",")",["T_WHITESPACE"," ",149],"{",["T_WHITESPACE","\n            ",149],["T_RETURN","return",150],["T_WHITESPACE"," ",150],"[",["T_STRING","__",150],"(",["T_CONSTANT_ENCAPSED_STRING","'\"%1\" is not a valid file.'",150],",",["T_WHITESPACE"," ",150],["T_VARIABLE","$label",150],")","]",";",["T_WHITESPACE","\n        ",150],"}",["T_WHITESPACE","\n\n        ",151],["T_IF","if",153],["T_WHITESPACE"," ",153],"(","!",["T_EMPTY","empty",153],"(",["T_VARIABLE","$rules",153],"[",["T_CONSTANT_ENCAPSED_STRING","'max_file_size'",153],"]",")",")",["T_WHITESPACE"," ",153],"{",["T_WHITESPACE","\n            ",153],["T_VARIABLE","$size",154],["T_WHITESPACE"," ",154],"=",["T_WHITESPACE"," ",154],["T_VARIABLE","$value",154],"[",["T_CONSTANT_ENCAPSED_STRING","'size'",154],"]",";",["T_WHITESPACE","\n            ",154],["T_IF","if",155],["T_WHITESPACE"," ",155],"(",["T_VARIABLE","$rules",155],"[",["T_CONSTANT_ENCAPSED_STRING","'max_file_size'",155],"]",["T_WHITESPACE"," ",155],"<",["T_WHITESPACE"," ",155],["T_VARIABLE","$size",155],")",["T_WHITESPACE"," ",155],"{",["T_WHITESPACE","\n                ",155],["T_RETURN","return",156],["T_WHITESPACE"," ",156],"[",["T_STRING","__",156],"(",["T_CONSTANT_ENCAPSED_STRING","'\"%1\" exceeds the allowed file size.'",156],",",["T_WHITESPACE"," ",156],["T_VARIABLE","$label",156],")","]",";",["T_WHITESPACE","\n            ",156],"}",["T_WHITESPACE","\n        ",157],"}",["T_WHITESPACE","\n\n        ",158],["T_RETURN","return",160],["T_WHITESPACE"," ",160],"[","]",";",["T_WHITESPACE","\n    ",160],"}",["T_WHITESPACE","\n\n    ",161],["T_DOC_COMMENT","\/**\n     * Validate data\n     *\n     * @param array|string $value\n     * @return bool\n     * @SuppressWarnings(PHPMD.CyclomaticComplexity)\n     * @SuppressWarnings(PHPMD.NPathComplexity)\n     *\/",163],["T_WHITESPACE","\n    ",170],["T_PUBLIC","public",171],["T_WHITESPACE"," ",171],["T_FUNCTION","function",171],["T_WHITESPACE"," ",171],["T_STRING","validateValue",171],"(",["T_VARIABLE","$value",171],")",["T_WHITESPACE","\n    ",171],"{",["T_WHITESPACE","\n        ",172],["T_IF","if",173],["T_WHITESPACE"," ",173],"(",["T_VARIABLE","$this",173],["T_OBJECT_OPERATOR","->",173],["T_STRING","getIsAjaxRequest",173],"(",")",")",["T_WHITESPACE"," ",173],"{",["T_WHITESPACE","\n            ",173],["T_RETURN","return",174],["T_WHITESPACE"," ",174],["T_STRING","true",174],";",["T_WHITESPACE","\n        ",174],"}",["T_WHITESPACE","\n\n        ",175],["T_VARIABLE","$errors",177],["T_WHITESPACE"," ",177],"=",["T_WHITESPACE"," ",177],"[","]",";",["T_WHITESPACE","\n        ",177],["T_VARIABLE","$attribute",178],["T_WHITESPACE"," ",178],"=",["T_WHITESPACE"," ",178],["T_VARIABLE","$this",178],["T_OBJECT_OPERATOR","->",178],["T_STRING","getAttribute",178],"(",")",";",["T_WHITESPACE","\n        ",178],["T_VARIABLE","$label",179],["T_WHITESPACE"," ",179],"=",["T_WHITESPACE"," ",179],["T_VARIABLE","$attribute",179],["T_OBJECT_OPERATOR","->",179],["T_STRING","getStoreLabel",179],"(",")",";",["T_WHITESPACE","\n\n        ",179],["T_VARIABLE","$toDelete",181],["T_WHITESPACE"," ",181],"=",["T_WHITESPACE"," ",181],"!",["T_EMPTY","empty",181],"(",["T_VARIABLE","$value",181],"[",["T_CONSTANT_ENCAPSED_STRING","'delete'",181],"]",")",["T_WHITESPACE"," ",181],"?",["T_WHITESPACE"," ",181],["T_STRING","true",181],["T_WHITESPACE"," ",181],":",["T_WHITESPACE"," ",181],["T_STRING","false",181],";",["T_WHITESPACE","\n        ",181],["T_VARIABLE","$toUpload",182],["T_WHITESPACE"," ",182],"=",["T_WHITESPACE"," ",182],"!",["T_EMPTY","empty",182],"(",["T_VARIABLE","$value",182],"[",["T_CONSTANT_ENCAPSED_STRING","'tmp_name'",182],"]",")",["T_WHITESPACE"," ",182],"?",["T_WHITESPACE"," ",182],["T_STRING","true",182],["T_WHITESPACE"," ",182],":",["T_WHITESPACE"," ",182],["T_STRING","false",182],";",["T_WHITESPACE","\n\n        ",182],["T_IF","if",184],["T_WHITESPACE"," ",184],"(","!",["T_VARIABLE","$toUpload",184],["T_WHITESPACE"," ",184],["T_BOOLEAN_AND","&&",184],["T_WHITESPACE"," ",184],"!",["T_VARIABLE","$toDelete",184],["T_WHITESPACE"," ",184],["T_BOOLEAN_AND","&&",184],["T_WHITESPACE"," ",184],["T_VARIABLE","$this",184],["T_OBJECT_OPERATOR","->",184],["T_STRING","getEntity",184],"(",")",["T_OBJECT_OPERATOR","->",184],["T_STRING","getData",184],"(",["T_VARIABLE","$attribute",184],["T_OBJECT_OPERATOR","->",184],["T_STRING","getAttributeCode",184],"(",")",")",")",["T_WHITESPACE"," ",184],"{",["T_WHITESPACE","\n            ",184],["T_RETURN","return",185],["T_WHITESPACE"," ",185],["T_STRING","true",185],";",["T_WHITESPACE","\n        ",185],"}",["T_WHITESPACE","\n\n        ",186],["T_IF","if",188],["T_WHITESPACE"," ",188],"(","!",["T_VARIABLE","$attribute",188],["T_OBJECT_OPERATOR","->",188],["T_STRING","getIsRequired",188],"(",")",["T_WHITESPACE"," ",188],["T_BOOLEAN_AND","&&",188],["T_WHITESPACE"," ",188],"!",["T_VARIABLE","$toUpload",188],")",["T_WHITESPACE"," ",188],"{",["T_WHITESPACE","\n            ",188],["T_RETURN","return",189],["T_WHITESPACE"," ",189],["T_STRING","true",189],";",["T_WHITESPACE","\n        ",189],"}",["T_WHITESPACE","\n\n        ",190],["T_IF","if",192],["T_WHITESPACE"," ",192],"(",["T_VARIABLE","$attribute",192],["T_OBJECT_OPERATOR","->",192],["T_STRING","getIsRequired",192],"(",")",["T_WHITESPACE"," ",192],["T_BOOLEAN_AND","&&",192],["T_WHITESPACE"," ",192],"!",["T_VARIABLE","$toUpload",192],")",["T_WHITESPACE"," ",192],"{",["T_WHITESPACE","\n            ",192],["T_VARIABLE","$errors",193],"[","]",["T_WHITESPACE"," ",193],"=",["T_WHITESPACE"," ",193],["T_STRING","__",193],"(",["T_CONSTANT_ENCAPSED_STRING","'\"%1\" is a required value.'",193],",",["T_WHITESPACE"," ",193],["T_VARIABLE","$label",193],")",";",["T_WHITESPACE","\n        ",193],"}",["T_WHITESPACE","\n\n        ",194],["T_IF","if",196],["T_WHITESPACE"," ",196],"(",["T_VARIABLE","$toUpload",196],")",["T_WHITESPACE"," ",196],"{",["T_WHITESPACE","\n            ",196],["T_VARIABLE","$errors",197],["T_WHITESPACE"," ",197],"=",["T_WHITESPACE"," ",197],["T_STRING","array_merge",197],"(",["T_VARIABLE","$errors",197],",",["T_WHITESPACE"," ",197],["T_VARIABLE","$this",197],["T_OBJECT_OPERATOR","->",197],["T_STRING","_validateByRules",197],"(",["T_VARIABLE","$value",197],")",")",";",["T_WHITESPACE","\n        ",197],"}",["T_WHITESPACE","\n\n        ",198],["T_IF","if",200],["T_WHITESPACE"," ",200],"(",["T_STRING","count",200],"(",["T_VARIABLE","$errors",200],")",["T_WHITESPACE"," ",200],["T_IS_EQUAL","==",200],["T_WHITESPACE"," ",200],["T_LNUMBER","0",200],")",["T_WHITESPACE"," ",200],"{",["T_WHITESPACE","\n            ",200],["T_RETURN","return",201],["T_WHITESPACE"," ",201],["T_STRING","true",201],";",["T_WHITESPACE","\n        ",201],"}",["T_WHITESPACE","\n\n        ",202],["T_RETURN","return",204],["T_WHITESPACE"," ",204],["T_VARIABLE","$errors",204],";",["T_WHITESPACE","\n    ",204],"}",["T_WHITESPACE","\n\n    ",205],["T_DOC_COMMENT","\/**\n     * Export attribute value to entity model\n     *\n     * @param array|string $value\n     * @return $this\n     * @SuppressWarnings(PHPMD.CyclomaticComplexity)\n     *\/",207],["T_WHITESPACE","\n    ",213],["T_PUBLIC","public",214],["T_WHITESPACE"," ",214],["T_FUNCTION","function",214],["T_WHITESPACE"," ",214],["T_STRING","compactValue",214],"(",["T_VARIABLE","$value",214],")",["T_WHITESPACE","\n    ",214],"{",["T_WHITESPACE","\n        ",215],["T_IF","if",216],["T_WHITESPACE"," ",216],"(",["T_VARIABLE","$this",216],["T_OBJECT_OPERATOR","->",216],["T_STRING","getIsAjaxRequest",216],"(",")",")",["T_WHITESPACE"," ",216],"{",["T_WHITESPACE","\n            ",216],["T_RETURN","return",217],["T_WHITESPACE"," ",217],["T_VARIABLE","$this",217],";",["T_WHITESPACE","\n        ",217],"}",["T_WHITESPACE","\n\n        ",218],["T_VARIABLE","$attribute",220],["T_WHITESPACE"," ",220],"=",["T_WHITESPACE"," ",220],["T_VARIABLE","$this",220],["T_OBJECT_OPERATOR","->",220],["T_STRING","getAttribute",220],"(",")",";",["T_WHITESPACE","\n        ",220],["T_VARIABLE","$original",221],["T_WHITESPACE"," ",221],"=",["T_WHITESPACE"," ",221],["T_VARIABLE","$this",221],["T_OBJECT_OPERATOR","->",221],["T_STRING","getEntity",221],"(",")",["T_OBJECT_OPERATOR","->",221],["T_STRING","getData",221],"(",["T_VARIABLE","$attribute",221],["T_OBJECT_OPERATOR","->",221],["T_STRING","getAttributeCode",221],"(",")",")",";",["T_WHITESPACE","\n        ",221],["T_VARIABLE","$toDelete",222],["T_WHITESPACE"," ",222],"=",["T_WHITESPACE"," ",222],["T_STRING","false",222],";",["T_WHITESPACE","\n        ",222],["T_IF","if",223],["T_WHITESPACE"," ",223],"(",["T_VARIABLE","$original",223],")",["T_WHITESPACE"," ",223],"{",["T_WHITESPACE","\n            ",223],["T_IF","if",224],["T_WHITESPACE"," ",224],"(","!",["T_VARIABLE","$attribute",224],["T_OBJECT_OPERATOR","->",224],["T_STRING","getIsRequired",224],"(",")",["T_WHITESPACE"," ",224],["T_BOOLEAN_AND","&&",224],["T_WHITESPACE"," ",224],"!",["T_EMPTY","empty",224],"(",["T_VARIABLE","$value",224],"[",["T_CONSTANT_ENCAPSED_STRING","'delete'",224],"]",")",")",["T_WHITESPACE"," ",224],"{",["T_WHITESPACE","\n                ",224],["T_VARIABLE","$toDelete",225],["T_WHITESPACE"," ",225],"=",["T_WHITESPACE"," ",225],["T_STRING","true",225],";",["T_WHITESPACE","\n            ",225],"}",["T_WHITESPACE","\n            ",226],["T_IF","if",227],["T_WHITESPACE"," ",227],"(","!",["T_EMPTY","empty",227],"(",["T_VARIABLE","$value",227],"[",["T_CONSTANT_ENCAPSED_STRING","'tmp_name'",227],"]",")",")",["T_WHITESPACE"," ",227],"{",["T_WHITESPACE","\n                ",227],["T_VARIABLE","$toDelete",228],["T_WHITESPACE"," ",228],"=",["T_WHITESPACE"," ",228],["T_STRING","true",228],";",["T_WHITESPACE","\n            ",228],"}",["T_WHITESPACE","\n        ",229],"}",["T_WHITESPACE","\n\n        ",230],["T_VARIABLE","$destinationFolder",232],["T_WHITESPACE"," ",232],"=",["T_WHITESPACE"," ",232],["T_VARIABLE","$attribute",232],["T_OBJECT_OPERATOR","->",232],["T_STRING","getEntity",232],"(",")",["T_OBJECT_OPERATOR","->",232],["T_STRING","getEntityTypeCode",232],"(",")",";",["T_WHITESPACE","\n\n        ",232],["T_COMMENT","\/\/ unlink entity file\n",234],["T_WHITESPACE","        ",235],["T_IF","if",235],["T_WHITESPACE"," ",235],"(",["T_VARIABLE","$toDelete",235],")",["T_WHITESPACE"," ",235],"{",["T_WHITESPACE","\n            ",235],["T_VARIABLE","$this",236],["T_OBJECT_OPERATOR","->",236],["T_STRING","getEntity",236],"(",")",["T_OBJECT_OPERATOR","->",236],["T_STRING","setData",236],"(",["T_VARIABLE","$attribute",236],["T_OBJECT_OPERATOR","->",236],["T_STRING","getAttributeCode",236],"(",")",",",["T_WHITESPACE"," ",236],["T_CONSTANT_ENCAPSED_STRING","''",236],")",";",["T_WHITESPACE","\n            ",236],["T_VARIABLE","$file",237],["T_WHITESPACE"," ",237],"=",["T_WHITESPACE"," ",237],["T_VARIABLE","$destinationFolder",237],["T_WHITESPACE"," ",237],".",["T_WHITESPACE"," ",237],["T_VARIABLE","$original",237],";",["T_WHITESPACE","\n            ",237],["T_IF","if",238],["T_WHITESPACE"," ",238],"(",["T_VARIABLE","$this",238],["T_OBJECT_OPERATOR","->",238],["T_STRING","_directory",238],["T_OBJECT_OPERATOR","->",238],["T_STRING","isExist",238],"(",["T_VARIABLE","$file",238],")",")",["T_WHITESPACE"," ",238],"{",["T_WHITESPACE","\n                ",238],["T_VARIABLE","$this",239],["T_OBJECT_OPERATOR","->",239],["T_STRING","_directory",239],["T_OBJECT_OPERATOR","->",239],["T_STRING","delete",239],"(",["T_VARIABLE","$file",239],")",";",["T_WHITESPACE","\n            ",239],"}",["T_WHITESPACE","\n        ",240],"}",["T_WHITESPACE","\n\n        ",241],["T_IF","if",243],["T_WHITESPACE"," ",243],"(","!",["T_EMPTY","empty",243],"(",["T_VARIABLE","$value",243],"[",["T_CONSTANT_ENCAPSED_STRING","'tmp_name'",243],"]",")",")",["T_WHITESPACE"," ",243],"{",["T_WHITESPACE","\n            ",243],["T_TRY","try",244],["T_WHITESPACE"," ",244],"{",["T_WHITESPACE","\n                ",244],["T_VARIABLE","$uploader",245],["T_WHITESPACE"," ",245],"=",["T_WHITESPACE"," ",245],["T_NEW","new",245],["T_WHITESPACE"," ",245],["T_NS_SEPARATOR","\\",245],["T_STRING","Magento",245],["T_NS_SEPARATOR","\\",245],["T_STRING","Framework",245],["T_NS_SEPARATOR","\\",245],["T_STRING","File",245],["T_NS_SEPARATOR","\\",245],["T_STRING","Uploader",245],"(",["T_VARIABLE","$value",245],")",";",["T_WHITESPACE","\n                ",245],["T_VARIABLE","$uploader",246],["T_OBJECT_OPERATOR","->",246],["T_STRING","setFilesDispersion",246],"(",["T_STRING","true",246],")",";",["T_WHITESPACE","\n                ",246],["T_VARIABLE","$uploader",247],["T_OBJECT_OPERATOR","->",247],["T_STRING","setFilenamesCaseSensitivity",247],"(",["T_STRING","false",247],")",";",["T_WHITESPACE","\n                ",247],["T_VARIABLE","$uploader",248],["T_OBJECT_OPERATOR","->",248],["T_STRING","setAllowRenameFiles",248],"(",["T_STRING","true",248],")",";",["T_WHITESPACE","\n                ",248],["T_VARIABLE","$uploader",249],["T_OBJECT_OPERATOR","->",249],["T_STRING","save",249],"(",["T_VARIABLE","$this",249],["T_OBJECT_OPERATOR","->",249],["T_STRING","_directory",249],["T_OBJECT_OPERATOR","->",249],["T_STRING","getAbsolutePath",249],"(",["T_VARIABLE","$destinationFolder",249],")",",",["T_WHITESPACE"," ",249],["T_VARIABLE","$value",249],"[",["T_CONSTANT_ENCAPSED_STRING","'name'",249],"]",")",";",["T_WHITESPACE","\n                ",249],["T_VARIABLE","$fileName",250],["T_WHITESPACE"," ",250],"=",["T_WHITESPACE"," ",250],["T_VARIABLE","$uploader",250],["T_OBJECT_OPERATOR","->",250],["T_STRING","getUploadedFileName",250],"(",")",";",["T_WHITESPACE","\n                ",250],["T_VARIABLE","$this",251],["T_OBJECT_OPERATOR","->",251],["T_STRING","getEntity",251],"(",")",["T_OBJECT_OPERATOR","->",251],["T_STRING","setData",251],"(",["T_VARIABLE","$attribute",251],["T_OBJECT_OPERATOR","->",251],["T_STRING","getAttributeCode",251],"(",")",",",["T_WHITESPACE"," ",251],["T_VARIABLE","$fileName",251],")",";",["T_WHITESPACE","\n            ",251],"}",["T_WHITESPACE"," ",252],["T_CATCH","catch",252],["T_WHITESPACE"," ",252],"(",["T_NS_SEPARATOR","\\",252],["T_STRING","Exception",252],["T_WHITESPACE"," ",252],["T_VARIABLE","$e",252],")",["T_WHITESPACE"," ",252],"{",["T_WHITESPACE","\n                ",252],["T_VARIABLE","$this",253],["T_OBJECT_OPERATOR","->",253],["T_STRING","_logger",253],["T_OBJECT_OPERATOR","->",253],["T_STRING","critical",253],"(",["T_VARIABLE","$e",253],")",";",["T_WHITESPACE","\n            ",253],"}",["T_WHITESPACE","\n        ",254],"}",["T_WHITESPACE","\n\n        ",255],["T_RETURN","return",257],["T_WHITESPACE"," ",257],["T_VARIABLE","$this",257],";",["T_WHITESPACE","\n    ",257],"}",["T_WHITESPACE","\n\n    ",258],["T_DOC_COMMENT","\/**\n     * Restore attribute value from SESSION to entity model\n     *\n     * @param array|string $value\n     * @return $this\n     *\n     * @codeCoverageIgnore\n     * @SuppressWarnings(PHPMD.UnusedFormalParameter)\n     *\/",260],["T_WHITESPACE","\n    ",268],["T_PUBLIC","public",269],["T_WHITESPACE"," ",269],["T_FUNCTION","function",269],["T_WHITESPACE"," ",269],["T_STRING","restoreValue",269],"(",["T_VARIABLE","$value",269],")",["T_WHITESPACE","\n    ",269],"{",["T_WHITESPACE","\n        ",270],["T_RETURN","return",271],["T_WHITESPACE"," ",271],["T_VARIABLE","$this",271],";",["T_WHITESPACE","\n    ",271],"}",["T_WHITESPACE","\n\n    ",272],["T_DOC_COMMENT","\/**\n     * Return formated attribute value from entity model\n     *\n     * @param string $format\n     * @return string|array\n     *\/",274],["T_WHITESPACE","\n    ",279],["T_PUBLIC","public",280],["T_WHITESPACE"," ",280],["T_FUNCTION","function",280],["T_WHITESPACE"," ",280],["T_STRING","outputValue",280],"(",["T_VARIABLE","$format",280],["T_WHITESPACE"," ",280],"=",["T_WHITESPACE"," ",280],["T_NS_SEPARATOR","\\",280],["T_STRING","Magento",280],["T_NS_SEPARATOR","\\",280],["T_STRING","Eav",280],["T_NS_SEPARATOR","\\",280],["T_STRING","Model",280],["T_NS_SEPARATOR","\\",280],["T_STRING","AttributeDataFactory",280],["T_DOUBLE_COLON","::",280],["T_STRING","OUTPUT_FORMAT_TEXT",280],")",["T_WHITESPACE","\n    ",280],"{",["T_WHITESPACE","\n        ",281],["T_VARIABLE","$output",282],["T_WHITESPACE"," ",282],"=",["T_WHITESPACE"," ",282],["T_CONSTANT_ENCAPSED_STRING","''",282],";",["T_WHITESPACE","\n        ",282],["T_VARIABLE","$value",283],["T_WHITESPACE"," ",283],"=",["T_WHITESPACE"," ",283],["T_VARIABLE","$this",283],["T_OBJECT_OPERATOR","->",283],["T_STRING","getEntity",283],"(",")",["T_OBJECT_OPERATOR","->",283],["T_STRING","getData",283],"(",["T_VARIABLE","$this",283],["T_OBJECT_OPERATOR","->",283],["T_STRING","getAttribute",283],"(",")",["T_OBJECT_OPERATOR","->",283],["T_STRING","getAttributeCode",283],"(",")",")",";",["T_WHITESPACE","\n        ",283],["T_IF","if",284],["T_WHITESPACE"," ",284],"(",["T_VARIABLE","$value",284],")",["T_WHITESPACE"," ",284],"{",["T_WHITESPACE","\n            ",284],["T_SWITCH","switch",285],["T_WHITESPACE"," ",285],"(",["T_VARIABLE","$format",285],")",["T_WHITESPACE"," ",285],"{",["T_WHITESPACE","\n                ",285],["T_CASE","case",286],["T_WHITESPACE"," ",286],["T_NS_SEPARATOR","\\",286],["T_STRING","Magento",286],["T_NS_SEPARATOR","\\",286],["T_STRING","Eav",286],["T_NS_SEPARATOR","\\",286],["T_STRING","Model",286],["T_NS_SEPARATOR","\\",286],["T_STRING","AttributeDataFactory",286],["T_DOUBLE_COLON","::",286],["T_STRING","OUTPUT_FORMAT_JSON",286],":",["T_WHITESPACE","\n                    ",286],["T_VARIABLE","$output",287],["T_WHITESPACE"," ",287],"=",["T_WHITESPACE"," ",287],"[",["T_CONSTANT_ENCAPSED_STRING","'value'",287],["T_WHITESPACE"," ",287],["T_DOUBLE_ARROW","=>",287],["T_WHITESPACE"," ",287],["T_VARIABLE","$value",287],",",["T_WHITESPACE"," ",287],["T_CONSTANT_ENCAPSED_STRING","'url_key'",287],["T_WHITESPACE"," ",287],["T_DOUBLE_ARROW","=>",287],["T_WHITESPACE"," ",287],["T_VARIABLE","$this",287],["T_OBJECT_OPERATOR","->",287],["T_STRING","urlEncoder",287],["T_OBJECT_OPERATOR","->",287],["T_STRING","encode",287],"(",["T_VARIABLE","$value",287],")","]",";",["T_WHITESPACE","\n                    ",287],["T_BREAK","break",288],";",["T_WHITESPACE","\n            ",288],"}",["T_WHITESPACE","\n        ",289],"}",["T_WHITESPACE","\n\n        ",290],["T_RETURN","return",292],["T_WHITESPACE"," ",292],["T_VARIABLE","$output",292],";",["T_WHITESPACE","\n    ",292],"}",["T_WHITESPACE","\n",293],"}",["T_WHITESPACE","\n",294]]
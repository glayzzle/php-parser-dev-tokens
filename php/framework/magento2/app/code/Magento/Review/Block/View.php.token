[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Copyright \u00c2\u00a9 2013-2017 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n *\/",2],["T_WHITESPACE","\n",5],["T_NAMESPACE","namespace",6],["T_WHITESPACE"," ",6],["T_STRING","Magento",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Review",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Block",6],";",["T_WHITESPACE","\n\n",6],["T_DOC_COMMENT","\/**\n * Review detailed view block\n *\n * @author      Magento Core Team <core@magentocommerce.com>\n *\/",8],["T_WHITESPACE","\n",12],["T_CLASS","class",13],["T_WHITESPACE"," ",13],["T_STRING","View",13],["T_WHITESPACE"," ",13],["T_EXTENDS","extends",13],["T_WHITESPACE"," ",13],["T_NS_SEPARATOR","\\",13],["T_STRING","Magento",13],["T_NS_SEPARATOR","\\",13],["T_STRING","Catalog",13],["T_NS_SEPARATOR","\\",13],["T_STRING","Block",13],["T_NS_SEPARATOR","\\",13],["T_STRING","Product",13],["T_NS_SEPARATOR","\\",13],["T_STRING","AbstractProduct",13],["T_WHITESPACE","\n",13],"{",["T_WHITESPACE","\n    ",14],["T_DOC_COMMENT","\/**\n     * View template name\n     *\n     * @var string\n     *\/",15],["T_WHITESPACE","\n    ",19],["T_PROTECTED","protected",20],["T_WHITESPACE"," ",20],["T_VARIABLE","$_template",20],["T_WHITESPACE"," ",20],"=",["T_WHITESPACE"," ",20],["T_CONSTANT_ENCAPSED_STRING","'view.phtml'",20],";",["T_WHITESPACE","\n\n    ",20],["T_DOC_COMMENT","\/**\n     * Rating option model\n     *\n     * @var \\Magento\\Review\\Model\\Rating\\Option\\VoteFactory\n     *\/",22],["T_WHITESPACE","\n    ",26],["T_PROTECTED","protected",27],["T_WHITESPACE"," ",27],["T_VARIABLE","$_voteFactory",27],";",["T_WHITESPACE","\n\n    ",27],["T_DOC_COMMENT","\/**\n     * Rating model factory\n     *\n     * @var \\Magento\\Review\\Model\\RatingFactory\n     *\/",29],["T_WHITESPACE","\n    ",33],["T_PROTECTED","protected",34],["T_WHITESPACE"," ",34],["T_VARIABLE","$_ratingFactory",34],";",["T_WHITESPACE","\n\n    ",34],["T_DOC_COMMENT","\/**\n     * Review model\n     *\n     * @var \\Magento\\Review\\Model\\ReviewFactory\n     *\/",36],["T_WHITESPACE","\n    ",40],["T_PROTECTED","protected",41],["T_WHITESPACE"," ",41],["T_VARIABLE","$_reviewFactory",41],";",["T_WHITESPACE","\n\n    ",41],["T_DOC_COMMENT","\/**\n     * @param \\Magento\\Catalog\\Block\\Product\\Context $context\n     * @param \\Magento\\Review\\Model\\Rating\\Option\\VoteFactory $voteFactory\n     * @param \\Magento\\Review\\Model\\RatingFactory $ratingFactory\n     * @param \\Magento\\Review\\Model\\ReviewFactory $reviewFactory\n     * @param array $data\n     *\/",43],["T_WHITESPACE","\n    ",49],["T_PUBLIC","public",50],["T_WHITESPACE"," ",50],["T_FUNCTION","function",50],["T_WHITESPACE"," ",50],["T_STRING","__construct",50],"(",["T_WHITESPACE","\n        ",50],["T_NS_SEPARATOR","\\",51],["T_STRING","Magento",51],["T_NS_SEPARATOR","\\",51],["T_STRING","Catalog",51],["T_NS_SEPARATOR","\\",51],["T_STRING","Block",51],["T_NS_SEPARATOR","\\",51],["T_STRING","Product",51],["T_NS_SEPARATOR","\\",51],["T_STRING","Context",51],["T_WHITESPACE"," ",51],["T_VARIABLE","$context",51],",",["T_WHITESPACE","\n        ",51],["T_NS_SEPARATOR","\\",52],["T_STRING","Magento",52],["T_NS_SEPARATOR","\\",52],["T_STRING","Review",52],["T_NS_SEPARATOR","\\",52],["T_STRING","Model",52],["T_NS_SEPARATOR","\\",52],["T_STRING","Rating",52],["T_NS_SEPARATOR","\\",52],["T_STRING","Option",52],["T_NS_SEPARATOR","\\",52],["T_STRING","VoteFactory",52],["T_WHITESPACE"," ",52],["T_VARIABLE","$voteFactory",52],",",["T_WHITESPACE","\n        ",52],["T_NS_SEPARATOR","\\",53],["T_STRING","Magento",53],["T_NS_SEPARATOR","\\",53],["T_STRING","Review",53],["T_NS_SEPARATOR","\\",53],["T_STRING","Model",53],["T_NS_SEPARATOR","\\",53],["T_STRING","RatingFactory",53],["T_WHITESPACE"," ",53],["T_VARIABLE","$ratingFactory",53],",",["T_WHITESPACE","\n        ",53],["T_NS_SEPARATOR","\\",54],["T_STRING","Magento",54],["T_NS_SEPARATOR","\\",54],["T_STRING","Review",54],["T_NS_SEPARATOR","\\",54],["T_STRING","Model",54],["T_NS_SEPARATOR","\\",54],["T_STRING","ReviewFactory",54],["T_WHITESPACE"," ",54],["T_VARIABLE","$reviewFactory",54],",",["T_WHITESPACE","\n        ",54],["T_ARRAY","array",55],["T_WHITESPACE"," ",55],["T_VARIABLE","$data",55],["T_WHITESPACE"," ",55],"=",["T_WHITESPACE"," ",55],"[","]",["T_WHITESPACE","\n    ",55],")",["T_WHITESPACE"," ",56],"{",["T_WHITESPACE","\n        ",56],["T_VARIABLE","$this",57],["T_OBJECT_OPERATOR","->",57],["T_STRING","_voteFactory",57],["T_WHITESPACE"," ",57],"=",["T_WHITESPACE"," ",57],["T_VARIABLE","$voteFactory",57],";",["T_WHITESPACE","\n        ",57],["T_VARIABLE","$this",58],["T_OBJECT_OPERATOR","->",58],["T_STRING","_reviewFactory",58],["T_WHITESPACE"," ",58],"=",["T_WHITESPACE"," ",58],["T_VARIABLE","$reviewFactory",58],";",["T_WHITESPACE","\n        ",58],["T_VARIABLE","$this",59],["T_OBJECT_OPERATOR","->",59],["T_STRING","_ratingFactory",59],["T_WHITESPACE"," ",59],"=",["T_WHITESPACE"," ",59],["T_VARIABLE","$ratingFactory",59],";",["T_WHITESPACE","\n\n        ",59],["T_STRING","parent",61],["T_DOUBLE_COLON","::",61],["T_STRING","__construct",61],"(",["T_WHITESPACE","\n            ",61],["T_VARIABLE","$context",62],",",["T_WHITESPACE","\n            ",62],["T_VARIABLE","$data",63],["T_WHITESPACE","\n        ",63],")",";",["T_WHITESPACE","\n    ",64],"}",["T_WHITESPACE","\n\n    ",65],["T_DOC_COMMENT","\/**\n     * Retrieve current product model from registry\n     *\n     * @return \\Magento\\Catalog\\Model\\Product\n     *\/",67],["T_WHITESPACE","\n    ",71],["T_PUBLIC","public",72],["T_WHITESPACE"," ",72],["T_FUNCTION","function",72],["T_WHITESPACE"," ",72],["T_STRING","getProductData",72],"(",")",["T_WHITESPACE","\n    ",72],"{",["T_WHITESPACE","\n        ",73],["T_RETURN","return",74],["T_WHITESPACE"," ",74],["T_VARIABLE","$this",74],["T_OBJECT_OPERATOR","->",74],["T_STRING","_coreRegistry",74],["T_OBJECT_OPERATOR","->",74],["T_STRING","registry",74],"(",["T_CONSTANT_ENCAPSED_STRING","'current_product'",74],")",";",["T_WHITESPACE","\n    ",74],"}",["T_WHITESPACE","\n\n    ",75],["T_DOC_COMMENT","\/**\n     * Retrieve current review model from registry\n     *\n     * @return \\Magento\\Review\\Model\\Review\n     *\/",77],["T_WHITESPACE","\n    ",81],["T_PUBLIC","public",82],["T_WHITESPACE"," ",82],["T_FUNCTION","function",82],["T_WHITESPACE"," ",82],["T_STRING","getReviewData",82],"(",")",["T_WHITESPACE","\n    ",82],"{",["T_WHITESPACE","\n        ",83],["T_RETURN","return",84],["T_WHITESPACE"," ",84],["T_VARIABLE","$this",84],["T_OBJECT_OPERATOR","->",84],["T_STRING","_coreRegistry",84],["T_OBJECT_OPERATOR","->",84],["T_STRING","registry",84],"(",["T_CONSTANT_ENCAPSED_STRING","'current_review'",84],")",";",["T_WHITESPACE","\n    ",84],"}",["T_WHITESPACE","\n\n    ",85],["T_DOC_COMMENT","\/**\n     * Prepare link to review list for current product\n     *\n     * @return string\n     *\/",87],["T_WHITESPACE","\n    ",91],["T_PUBLIC","public",92],["T_WHITESPACE"," ",92],["T_FUNCTION","function",92],["T_WHITESPACE"," ",92],["T_STRING","getBackUrl",92],"(",")",["T_WHITESPACE","\n    ",92],"{",["T_WHITESPACE","\n        ",93],["T_RETURN","return",94],["T_WHITESPACE"," ",94],["T_VARIABLE","$this",94],["T_OBJECT_OPERATOR","->",94],["T_STRING","getUrl",94],"(",["T_CONSTANT_ENCAPSED_STRING","'*\/*\/list'",94],",",["T_WHITESPACE"," ",94],"[",["T_CONSTANT_ENCAPSED_STRING","'id'",94],["T_WHITESPACE"," ",94],["T_DOUBLE_ARROW","=>",94],["T_WHITESPACE"," ",94],["T_VARIABLE","$this",94],["T_OBJECT_OPERATOR","->",94],["T_STRING","getProductData",94],"(",")",["T_OBJECT_OPERATOR","->",94],["T_STRING","getId",94],"(",")","]",")",";",["T_WHITESPACE","\n    ",94],"}",["T_WHITESPACE","\n\n    ",95],["T_DOC_COMMENT","\/**\n     * Retrieve collection of ratings\n     *\n     * @return \\Magento\\Review\\Model\\ResourceModel\\Rating\\Option\\Vote\\Collection\n     *\/",97],["T_WHITESPACE","\n    ",101],["T_PUBLIC","public",102],["T_WHITESPACE"," ",102],["T_FUNCTION","function",102],["T_WHITESPACE"," ",102],["T_STRING","getRating",102],"(",")",["T_WHITESPACE","\n    ",102],"{",["T_WHITESPACE","\n        ",103],["T_IF","if",104],["T_WHITESPACE"," ",104],"(","!",["T_VARIABLE","$this",104],["T_OBJECT_OPERATOR","->",104],["T_STRING","getRatingCollection",104],"(",")",")",["T_WHITESPACE"," ",104],"{",["T_WHITESPACE","\n            ",104],["T_VARIABLE","$ratingCollection",105],["T_WHITESPACE"," ",105],"=",["T_WHITESPACE"," ",105],["T_VARIABLE","$this",105],["T_OBJECT_OPERATOR","->",105],["T_STRING","_voteFactory",105],["T_OBJECT_OPERATOR","->",105],["T_STRING","create",105],"(",")",["T_OBJECT_OPERATOR","->",105],["T_STRING","getResourceCollection",105],"(",")",["T_OBJECT_OPERATOR","->",105],["T_STRING","setReviewFilter",105],"(",["T_WHITESPACE","\n                ",105],["T_VARIABLE","$this",106],["T_OBJECT_OPERATOR","->",106],["T_STRING","getReviewId",106],"(",")",["T_WHITESPACE","\n            ",106],")",["T_OBJECT_OPERATOR","->",107],["T_STRING","setStoreFilter",107],"(",["T_WHITESPACE","\n                ",107],["T_VARIABLE","$this",108],["T_OBJECT_OPERATOR","->",108],["T_STRING","_storeManager",108],["T_OBJECT_OPERATOR","->",108],["T_STRING","getStore",108],"(",")",["T_OBJECT_OPERATOR","->",108],["T_STRING","getId",108],"(",")",["T_WHITESPACE","\n            ",108],")",["T_OBJECT_OPERATOR","->",109],["T_STRING","addRatingInfo",109],"(",["T_WHITESPACE","\n                ",109],["T_VARIABLE","$this",110],["T_OBJECT_OPERATOR","->",110],["T_STRING","_storeManager",110],["T_OBJECT_OPERATOR","->",110],["T_STRING","getStore",110],"(",")",["T_OBJECT_OPERATOR","->",110],["T_STRING","getId",110],"(",")",["T_WHITESPACE","\n            ",110],")",["T_OBJECT_OPERATOR","->",111],["T_STRING","load",111],"(",")",";",["T_WHITESPACE","\n            ",111],["T_VARIABLE","$this",112],["T_OBJECT_OPERATOR","->",112],["T_STRING","setRatingCollection",112],"(",["T_VARIABLE","$ratingCollection",112],["T_OBJECT_OPERATOR","->",112],["T_STRING","getSize",112],"(",")",["T_WHITESPACE"," ",112],"?",["T_WHITESPACE"," ",112],["T_VARIABLE","$ratingCollection",112],["T_WHITESPACE"," ",112],":",["T_WHITESPACE"," ",112],["T_STRING","false",112],")",";",["T_WHITESPACE","\n        ",112],"}",["T_WHITESPACE","\n        ",113],["T_RETURN","return",114],["T_WHITESPACE"," ",114],["T_VARIABLE","$this",114],["T_OBJECT_OPERATOR","->",114],["T_STRING","getRatingCollection",114],"(",")",";",["T_WHITESPACE","\n    ",114],"}",["T_WHITESPACE","\n\n    ",115],["T_DOC_COMMENT","\/**\n     * Retrieve rating summary for current product\n     *\n     * @return string\n     *\/",117],["T_WHITESPACE","\n    ",121],["T_PUBLIC","public",122],["T_WHITESPACE"," ",122],["T_FUNCTION","function",122],["T_WHITESPACE"," ",122],["T_STRING","getRatingSummary",122],"(",")",["T_WHITESPACE","\n    ",122],"{",["T_WHITESPACE","\n        ",123],["T_IF","if",124],["T_WHITESPACE"," ",124],"(","!",["T_VARIABLE","$this",124],["T_OBJECT_OPERATOR","->",124],["T_STRING","getRatingSummaryCache",124],"(",")",")",["T_WHITESPACE"," ",124],"{",["T_WHITESPACE","\n            ",124],["T_VARIABLE","$this",125],["T_OBJECT_OPERATOR","->",125],["T_STRING","setRatingSummaryCache",125],"(",["T_WHITESPACE","\n                ",125],["T_VARIABLE","$this",126],["T_OBJECT_OPERATOR","->",126],["T_STRING","_ratingFactory",126],["T_OBJECT_OPERATOR","->",126],["T_STRING","create",126],"(",")",["T_OBJECT_OPERATOR","->",126],["T_STRING","getEntitySummary",126],"(",["T_VARIABLE","$this",126],["T_OBJECT_OPERATOR","->",126],["T_STRING","getProductData",126],"(",")",["T_OBJECT_OPERATOR","->",126],["T_STRING","getId",126],"(",")",")",["T_WHITESPACE","\n            ",126],")",";",["T_WHITESPACE","\n        ",127],"}",["T_WHITESPACE","\n        ",128],["T_RETURN","return",129],["T_WHITESPACE"," ",129],["T_VARIABLE","$this",129],["T_OBJECT_OPERATOR","->",129],["T_STRING","getRatingSummaryCache",129],"(",")",";",["T_WHITESPACE","\n    ",129],"}",["T_WHITESPACE","\n\n    ",130],["T_DOC_COMMENT","\/**\n     * Retrieve total review count for current product\n     *\n     * @return string\n     *\/",132],["T_WHITESPACE","\n    ",136],["T_PUBLIC","public",137],["T_WHITESPACE"," ",137],["T_FUNCTION","function",137],["T_WHITESPACE"," ",137],["T_STRING","getTotalReviews",137],"(",")",["T_WHITESPACE","\n    ",137],"{",["T_WHITESPACE","\n        ",138],["T_IF","if",139],["T_WHITESPACE"," ",139],"(","!",["T_VARIABLE","$this",139],["T_OBJECT_OPERATOR","->",139],["T_STRING","getTotalReviewsCache",139],"(",")",")",["T_WHITESPACE"," ",139],"{",["T_WHITESPACE","\n            ",139],["T_VARIABLE","$this",140],["T_OBJECT_OPERATOR","->",140],["T_STRING","setTotalReviewsCache",140],"(",["T_WHITESPACE","\n                ",140],["T_VARIABLE","$this",141],["T_OBJECT_OPERATOR","->",141],["T_STRING","_reviewFactory",141],["T_OBJECT_OPERATOR","->",141],["T_STRING","create",141],"(",")",["T_OBJECT_OPERATOR","->",141],["T_STRING","getTotalReviews",141],"(",["T_WHITESPACE","\n                    ",141],["T_VARIABLE","$this",142],["T_OBJECT_OPERATOR","->",142],["T_STRING","getProductData",142],"(",")",["T_OBJECT_OPERATOR","->",142],["T_STRING","getId",142],"(",")",",",["T_WHITESPACE","\n                    ",142],["T_STRING","false",143],",",["T_WHITESPACE","\n                    ",143],["T_VARIABLE","$this",144],["T_OBJECT_OPERATOR","->",144],["T_STRING","_storeManager",144],["T_OBJECT_OPERATOR","->",144],["T_STRING","getStore",144],"(",")",["T_OBJECT_OPERATOR","->",144],["T_STRING","getId",144],"(",")",["T_WHITESPACE","\n                ",144],")",["T_WHITESPACE","\n            ",145],")",";",["T_WHITESPACE","\n        ",146],"}",["T_WHITESPACE","\n        ",147],["T_RETURN","return",148],["T_WHITESPACE"," ",148],["T_VARIABLE","$this",148],["T_OBJECT_OPERATOR","->",148],["T_STRING","getTotalReviewsCache",148],"(",")",";",["T_WHITESPACE","\n    ",148],"}",["T_WHITESPACE","\n\n    ",149],["T_DOC_COMMENT","\/**\n     * Format date in long format\n     *\n     * @param string $date\n     * @return string\n     *\/",151],["T_WHITESPACE","\n    ",156],["T_PUBLIC","public",157],["T_WHITESPACE"," ",157],["T_FUNCTION","function",157],["T_WHITESPACE"," ",157],["T_STRING","dateFormat",157],"(",["T_VARIABLE","$date",157],")",["T_WHITESPACE","\n    ",157],"{",["T_WHITESPACE","\n        ",158],["T_RETURN","return",159],["T_WHITESPACE"," ",159],["T_VARIABLE","$this",159],["T_OBJECT_OPERATOR","->",159],["T_STRING","formatDate",159],"(",["T_VARIABLE","$date",159],",",["T_WHITESPACE"," ",159],["T_NS_SEPARATOR","\\",159],["T_STRING","IntlDateFormatter",159],["T_DOUBLE_COLON","::",159],["T_STRING","LONG",159],")",";",["T_WHITESPACE","\n    ",159],"}",["T_WHITESPACE","\n\n    ",160],["T_DOC_COMMENT","\/**\n     * Get product reviews summary\n     *\n     * @param \\Magento\\Catalog\\Model\\Product $product\n     * @param bool $templateType\n     * @param bool $displayIfNoReviews\n     * @return string\n     *\/",162],["T_WHITESPACE","\n    ",169],["T_PUBLIC","public",170],["T_WHITESPACE"," ",170],["T_FUNCTION","function",170],["T_WHITESPACE"," ",170],["T_STRING","getReviewsSummaryHtml",170],"(",["T_WHITESPACE","\n        ",170],["T_NS_SEPARATOR","\\",171],["T_STRING","Magento",171],["T_NS_SEPARATOR","\\",171],["T_STRING","Catalog",171],["T_NS_SEPARATOR","\\",171],["T_STRING","Model",171],["T_NS_SEPARATOR","\\",171],["T_STRING","Product",171],["T_WHITESPACE"," ",171],["T_VARIABLE","$product",171],",",["T_WHITESPACE","\n        ",171],["T_VARIABLE","$templateType",172],["T_WHITESPACE"," ",172],"=",["T_WHITESPACE"," ",172],["T_STRING","false",172],",",["T_WHITESPACE","\n        ",172],["T_VARIABLE","$displayIfNoReviews",173],["T_WHITESPACE"," ",173],"=",["T_WHITESPACE"," ",173],["T_STRING","false",173],["T_WHITESPACE","\n    ",173],")",["T_WHITESPACE"," ",174],"{",["T_WHITESPACE","\n        ",174],["T_IF","if",175],["T_WHITESPACE"," ",175],"(","!",["T_VARIABLE","$product",175],["T_OBJECT_OPERATOR","->",175],["T_STRING","getRatingSummary",175],"(",")",")",["T_WHITESPACE"," ",175],"{",["T_WHITESPACE","\n            ",175],["T_VARIABLE","$this",176],["T_OBJECT_OPERATOR","->",176],["T_STRING","_reviewFactory",176],["T_OBJECT_OPERATOR","->",176],["T_STRING","create",176],"(",")",["T_OBJECT_OPERATOR","->",176],["T_STRING","getEntitySummary",176],"(",["T_VARIABLE","$product",176],",",["T_WHITESPACE"," ",176],["T_VARIABLE","$this",176],["T_OBJECT_OPERATOR","->",176],["T_STRING","_storeManager",176],["T_OBJECT_OPERATOR","->",176],["T_STRING","getStore",176],"(",")",["T_OBJECT_OPERATOR","->",176],["T_STRING","getId",176],"(",")",")",";",["T_WHITESPACE","\n        ",176],"}",["T_WHITESPACE","\n        ",177],["T_RETURN","return",178],["T_WHITESPACE"," ",178],["T_STRING","parent",178],["T_DOUBLE_COLON","::",178],["T_STRING","getReviewsSummaryHtml",178],"(",["T_VARIABLE","$product",178],",",["T_WHITESPACE"," ",178],["T_VARIABLE","$templateType",178],",",["T_WHITESPACE"," ",178],["T_VARIABLE","$displayIfNoReviews",178],")",";",["T_WHITESPACE","\n    ",178],"}",["T_WHITESPACE","\n",179],"}",["T_WHITESPACE","\n",180]]
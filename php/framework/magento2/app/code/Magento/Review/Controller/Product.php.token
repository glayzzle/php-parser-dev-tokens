[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Copyright \u00c2\u00a9 2013-2017 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n *\/",2],["T_WHITESPACE","\n",5],["T_NAMESPACE","namespace",6],["T_WHITESPACE"," ",6],["T_STRING","Magento",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Review",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Controller",6],";",["T_WHITESPACE","\n\n",6],["T_USE","use",8],["T_WHITESPACE"," ",8],["T_STRING","Magento",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Catalog",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Model",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Product",8],["T_WHITESPACE"," ",8],["T_AS","as",8],["T_WHITESPACE"," ",8],["T_STRING","CatalogProduct",8],";",["T_WHITESPACE","\n",8],["T_USE","use",9],["T_WHITESPACE"," ",9],["T_STRING","Magento",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Framework",9],["T_NS_SEPARATOR","\\",9],["T_STRING","App",9],["T_NS_SEPARATOR","\\",9],["T_STRING","RequestInterface",9],";",["T_WHITESPACE","\n",9],["T_USE","use",10],["T_WHITESPACE"," ",10],["T_STRING","Magento",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Framework",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Exception",10],["T_NS_SEPARATOR","\\",10],["T_STRING","NoSuchEntityException",10],";",["T_WHITESPACE","\n",10],["T_USE","use",11],["T_WHITESPACE"," ",11],["T_STRING","Magento",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Review",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Model",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Review",11],";",["T_WHITESPACE","\n\n",11],["T_DOC_COMMENT","\/**\n * Review controller\n *\n * @SuppressWarnings(PHPMD.CouplingBetweenObjects)\n *\/",13],["T_WHITESPACE","\n",17],["T_ABSTRACT","abstract",18],["T_WHITESPACE"," ",18],["T_CLASS","class",18],["T_WHITESPACE"," ",18],["T_STRING","Product",18],["T_WHITESPACE"," ",18],["T_EXTENDS","extends",18],["T_WHITESPACE"," ",18],["T_NS_SEPARATOR","\\",18],["T_STRING","Magento",18],["T_NS_SEPARATOR","\\",18],["T_STRING","Framework",18],["T_NS_SEPARATOR","\\",18],["T_STRING","App",18],["T_NS_SEPARATOR","\\",18],["T_STRING","Action",18],["T_NS_SEPARATOR","\\",18],["T_STRING","Action",18],["T_WHITESPACE","\n",18],"{",["T_WHITESPACE","\n    ",19],["T_DOC_COMMENT","\/**\n     * Core registry\n     *\n     * @var \\Magento\\Framework\\Registry\n     *\/",20],["T_WHITESPACE","\n    ",24],["T_PROTECTED","protected",25],["T_WHITESPACE"," ",25],["T_VARIABLE","$coreRegistry",25],["T_WHITESPACE"," ",25],"=",["T_WHITESPACE"," ",25],["T_STRING","null",25],";",["T_WHITESPACE","\n\n    ",25],["T_DOC_COMMENT","\/**\n     * Customer session model\n     *\n     * @var \\Magento\\Customer\\Model\\Session\n     *\/",27],["T_WHITESPACE","\n    ",31],["T_PROTECTED","protected",32],["T_WHITESPACE"," ",32],["T_VARIABLE","$customerSession",32],";",["T_WHITESPACE","\n\n    ",32],["T_DOC_COMMENT","\/**\n     * Generic session\n     *\n     * @var \\Magento\\Framework\\Session\\Generic\n     *\/",34],["T_WHITESPACE","\n    ",38],["T_PROTECTED","protected",39],["T_WHITESPACE"," ",39],["T_VARIABLE","$reviewSession",39],";",["T_WHITESPACE","\n\n    ",39],["T_DOC_COMMENT","\/**\n     * Catalog catgory model\n     *\n     * @var \\Magento\\Catalog\\Api\\CategoryRepositoryInterface\n     *\/",41],["T_WHITESPACE","\n    ",45],["T_PROTECTED","protected",46],["T_WHITESPACE"," ",46],["T_VARIABLE","$categoryRepository",46],";",["T_WHITESPACE","\n\n    ",46],["T_DOC_COMMENT","\/**\n     * Logger\n     *\n     * @var \\Psr\\Log\\LoggerInterface\n     *\/",48],["T_WHITESPACE","\n    ",52],["T_PROTECTED","protected",53],["T_WHITESPACE"," ",53],["T_VARIABLE","$logger",53],";",["T_WHITESPACE","\n\n    ",53],["T_DOC_COMMENT","\/**\n     * Catalog product model\n     *\n     * @var \\Magento\\Catalog\\Api\\ProductRepositoryInterface\n     *\/",55],["T_WHITESPACE","\n    ",59],["T_PROTECTED","protected",60],["T_WHITESPACE"," ",60],["T_VARIABLE","$productRepository",60],";",["T_WHITESPACE","\n\n    ",60],["T_DOC_COMMENT","\/**\n     * Review model\n     *\n     * @var \\Magento\\Review\\Model\\ReviewFactory\n     *\/",62],["T_WHITESPACE","\n    ",66],["T_PROTECTED","protected",67],["T_WHITESPACE"," ",67],["T_VARIABLE","$reviewFactory",67],";",["T_WHITESPACE","\n\n    ",67],["T_DOC_COMMENT","\/**\n     * Rating model\n     *\n     * @var \\Magento\\Review\\Model\\RatingFactory\n     *\/",69],["T_WHITESPACE","\n    ",73],["T_PROTECTED","protected",74],["T_WHITESPACE"," ",74],["T_VARIABLE","$ratingFactory",74],";",["T_WHITESPACE","\n\n    ",74],["T_DOC_COMMENT","\/**\n     * Catalog design model\n     *\n     * @var \\Magento\\Catalog\\Model\\Design\n     *\/",76],["T_WHITESPACE","\n    ",80],["T_PROTECTED","protected",81],["T_WHITESPACE"," ",81],["T_VARIABLE","$catalogDesign",81],";",["T_WHITESPACE","\n\n    ",81],["T_DOC_COMMENT","\/**\n     * Core model store manager interface\n     *\n     * @var \\Magento\\Store\\Model\\StoreManagerInterface\n     *\/",83],["T_WHITESPACE","\n    ",87],["T_PROTECTED","protected",88],["T_WHITESPACE"," ",88],["T_VARIABLE","$storeManager",88],";",["T_WHITESPACE","\n\n    ",88],["T_DOC_COMMENT","\/**\n     * Core form key validator\n     *\n     * @var \\Magento\\Framework\\Data\\Form\\FormKey\\Validator\n     *\/",90],["T_WHITESPACE","\n    ",94],["T_PROTECTED","protected",95],["T_WHITESPACE"," ",95],["T_VARIABLE","$formKeyValidator",95],";",["T_WHITESPACE","\n\n    ",95],["T_DOC_COMMENT","\/**\n     * @param \\Magento\\Framework\\App\\Action\\Context $context\n     * @param \\Magento\\Framework\\Registry $coreRegistry\n     * @param \\Magento\\Customer\\Model\\Session $customerSession\n     * @param \\Magento\\Catalog\\Api\\CategoryRepositoryInterface $categoryRepository\n     * @param \\Psr\\Log\\LoggerInterface $logger\n     * @param \\Magento\\Catalog\\Api\\ProductRepositoryInterface $productRepository\n     * @param \\Magento\\Review\\Model\\ReviewFactory $reviewFactory\n     * @param \\Magento\\Review\\Model\\RatingFactory $ratingFactory\n     * @param \\Magento\\Catalog\\Model\\Design $catalogDesign\n     * @param \\Magento\\Framework\\Session\\Generic $reviewSession\n     * @param \\Magento\\Store\\Model\\StoreManagerInterface $storeManager\n     * @param \\Magento\\Framework\\Data\\Form\\FormKey\\Validator $formKeyValidator\n     * @SuppressWarnings(PHPMD.ExcessiveParameterList)\n     *\/",97],["T_WHITESPACE","\n    ",111],["T_PUBLIC","public",112],["T_WHITESPACE"," ",112],["T_FUNCTION","function",112],["T_WHITESPACE"," ",112],["T_STRING","__construct",112],"(",["T_WHITESPACE","\n        ",112],["T_NS_SEPARATOR","\\",113],["T_STRING","Magento",113],["T_NS_SEPARATOR","\\",113],["T_STRING","Framework",113],["T_NS_SEPARATOR","\\",113],["T_STRING","App",113],["T_NS_SEPARATOR","\\",113],["T_STRING","Action",113],["T_NS_SEPARATOR","\\",113],["T_STRING","Context",113],["T_WHITESPACE"," ",113],["T_VARIABLE","$context",113],",",["T_WHITESPACE","\n        ",113],["T_NS_SEPARATOR","\\",114],["T_STRING","Magento",114],["T_NS_SEPARATOR","\\",114],["T_STRING","Framework",114],["T_NS_SEPARATOR","\\",114],["T_STRING","Registry",114],["T_WHITESPACE"," ",114],["T_VARIABLE","$coreRegistry",114],",",["T_WHITESPACE","\n        ",114],["T_NS_SEPARATOR","\\",115],["T_STRING","Magento",115],["T_NS_SEPARATOR","\\",115],["T_STRING","Customer",115],["T_NS_SEPARATOR","\\",115],["T_STRING","Model",115],["T_NS_SEPARATOR","\\",115],["T_STRING","Session",115],["T_WHITESPACE"," ",115],["T_VARIABLE","$customerSession",115],",",["T_WHITESPACE","\n        ",115],["T_NS_SEPARATOR","\\",116],["T_STRING","Magento",116],["T_NS_SEPARATOR","\\",116],["T_STRING","Catalog",116],["T_NS_SEPARATOR","\\",116],["T_STRING","Api",116],["T_NS_SEPARATOR","\\",116],["T_STRING","CategoryRepositoryInterface",116],["T_WHITESPACE"," ",116],["T_VARIABLE","$categoryRepository",116],",",["T_WHITESPACE","\n        ",116],["T_NS_SEPARATOR","\\",117],["T_STRING","Psr",117],["T_NS_SEPARATOR","\\",117],["T_STRING","Log",117],["T_NS_SEPARATOR","\\",117],["T_STRING","LoggerInterface",117],["T_WHITESPACE"," ",117],["T_VARIABLE","$logger",117],",",["T_WHITESPACE","\n        ",117],["T_NS_SEPARATOR","\\",118],["T_STRING","Magento",118],["T_NS_SEPARATOR","\\",118],["T_STRING","Catalog",118],["T_NS_SEPARATOR","\\",118],["T_STRING","Api",118],["T_NS_SEPARATOR","\\",118],["T_STRING","ProductRepositoryInterface",118],["T_WHITESPACE"," ",118],["T_VARIABLE","$productRepository",118],",",["T_WHITESPACE","\n        ",118],["T_NS_SEPARATOR","\\",119],["T_STRING","Magento",119],["T_NS_SEPARATOR","\\",119],["T_STRING","Review",119],["T_NS_SEPARATOR","\\",119],["T_STRING","Model",119],["T_NS_SEPARATOR","\\",119],["T_STRING","ReviewFactory",119],["T_WHITESPACE"," ",119],["T_VARIABLE","$reviewFactory",119],",",["T_WHITESPACE","\n        ",119],["T_NS_SEPARATOR","\\",120],["T_STRING","Magento",120],["T_NS_SEPARATOR","\\",120],["T_STRING","Review",120],["T_NS_SEPARATOR","\\",120],["T_STRING","Model",120],["T_NS_SEPARATOR","\\",120],["T_STRING","RatingFactory",120],["T_WHITESPACE"," ",120],["T_VARIABLE","$ratingFactory",120],",",["T_WHITESPACE","\n        ",120],["T_NS_SEPARATOR","\\",121],["T_STRING","Magento",121],["T_NS_SEPARATOR","\\",121],["T_STRING","Catalog",121],["T_NS_SEPARATOR","\\",121],["T_STRING","Model",121],["T_NS_SEPARATOR","\\",121],["T_STRING","Design",121],["T_WHITESPACE"," ",121],["T_VARIABLE","$catalogDesign",121],",",["T_WHITESPACE","\n        ",121],["T_NS_SEPARATOR","\\",122],["T_STRING","Magento",122],["T_NS_SEPARATOR","\\",122],["T_STRING","Framework",122],["T_NS_SEPARATOR","\\",122],["T_STRING","Session",122],["T_NS_SEPARATOR","\\",122],["T_STRING","Generic",122],["T_WHITESPACE"," ",122],["T_VARIABLE","$reviewSession",122],",",["T_WHITESPACE","\n        ",122],["T_NS_SEPARATOR","\\",123],["T_STRING","Magento",123],["T_NS_SEPARATOR","\\",123],["T_STRING","Store",123],["T_NS_SEPARATOR","\\",123],["T_STRING","Model",123],["T_NS_SEPARATOR","\\",123],["T_STRING","StoreManagerInterface",123],["T_WHITESPACE"," ",123],["T_VARIABLE","$storeManager",123],",",["T_WHITESPACE","\n        ",123],["T_NS_SEPARATOR","\\",124],["T_STRING","Magento",124],["T_NS_SEPARATOR","\\",124],["T_STRING","Framework",124],["T_NS_SEPARATOR","\\",124],["T_STRING","Data",124],["T_NS_SEPARATOR","\\",124],["T_STRING","Form",124],["T_NS_SEPARATOR","\\",124],["T_STRING","FormKey",124],["T_NS_SEPARATOR","\\",124],["T_STRING","Validator",124],["T_WHITESPACE"," ",124],["T_VARIABLE","$formKeyValidator",124],["T_WHITESPACE","\n    ",124],")",["T_WHITESPACE"," ",125],"{",["T_WHITESPACE","\n        ",125],["T_VARIABLE","$this",126],["T_OBJECT_OPERATOR","->",126],["T_STRING","storeManager",126],["T_WHITESPACE"," ",126],"=",["T_WHITESPACE"," ",126],["T_VARIABLE","$storeManager",126],";",["T_WHITESPACE","\n        ",126],["T_VARIABLE","$this",127],["T_OBJECT_OPERATOR","->",127],["T_STRING","coreRegistry",127],["T_WHITESPACE"," ",127],"=",["T_WHITESPACE"," ",127],["T_VARIABLE","$coreRegistry",127],";",["T_WHITESPACE","\n        ",127],["T_VARIABLE","$this",128],["T_OBJECT_OPERATOR","->",128],["T_STRING","customerSession",128],["T_WHITESPACE"," ",128],"=",["T_WHITESPACE"," ",128],["T_VARIABLE","$customerSession",128],";",["T_WHITESPACE","\n        ",128],["T_VARIABLE","$this",129],["T_OBJECT_OPERATOR","->",129],["T_STRING","reviewSession",129],["T_WHITESPACE"," ",129],"=",["T_WHITESPACE"," ",129],["T_VARIABLE","$reviewSession",129],";",["T_WHITESPACE","\n        ",129],["T_VARIABLE","$this",130],["T_OBJECT_OPERATOR","->",130],["T_STRING","categoryRepository",130],["T_WHITESPACE"," ",130],"=",["T_WHITESPACE"," ",130],["T_VARIABLE","$categoryRepository",130],";",["T_WHITESPACE","\n        ",130],["T_VARIABLE","$this",131],["T_OBJECT_OPERATOR","->",131],["T_STRING","logger",131],["T_WHITESPACE"," ",131],"=",["T_WHITESPACE"," ",131],["T_VARIABLE","$logger",131],";",["T_WHITESPACE","\n        ",131],["T_VARIABLE","$this",132],["T_OBJECT_OPERATOR","->",132],["T_STRING","productRepository",132],["T_WHITESPACE"," ",132],"=",["T_WHITESPACE"," ",132],["T_VARIABLE","$productRepository",132],";",["T_WHITESPACE","\n        ",132],["T_VARIABLE","$this",133],["T_OBJECT_OPERATOR","->",133],["T_STRING","reviewFactory",133],["T_WHITESPACE"," ",133],"=",["T_WHITESPACE"," ",133],["T_VARIABLE","$reviewFactory",133],";",["T_WHITESPACE","\n        ",133],["T_VARIABLE","$this",134],["T_OBJECT_OPERATOR","->",134],["T_STRING","ratingFactory",134],["T_WHITESPACE"," ",134],"=",["T_WHITESPACE"," ",134],["T_VARIABLE","$ratingFactory",134],";",["T_WHITESPACE","\n        ",134],["T_VARIABLE","$this",135],["T_OBJECT_OPERATOR","->",135],["T_STRING","catalogDesign",135],["T_WHITESPACE"," ",135],"=",["T_WHITESPACE"," ",135],["T_VARIABLE","$catalogDesign",135],";",["T_WHITESPACE","\n        ",135],["T_VARIABLE","$this",136],["T_OBJECT_OPERATOR","->",136],["T_STRING","formKeyValidator",136],["T_WHITESPACE"," ",136],"=",["T_WHITESPACE"," ",136],["T_VARIABLE","$formKeyValidator",136],";",["T_WHITESPACE","\n\n        ",136],["T_STRING","parent",138],["T_DOUBLE_COLON","::",138],["T_STRING","__construct",138],"(",["T_VARIABLE","$context",138],")",";",["T_WHITESPACE","\n    ",138],"}",["T_WHITESPACE","\n\n    ",139],["T_DOC_COMMENT","\/**\n     * Dispatch request\n     *\n     * @param RequestInterface $request\n     * @return \\Magento\\Framework\\App\\ResponseInterface\n     *\/",141],["T_WHITESPACE","\n    ",146],["T_PUBLIC","public",147],["T_WHITESPACE"," ",147],["T_FUNCTION","function",147],["T_WHITESPACE"," ",147],["T_STRING","dispatch",147],"(",["T_STRING","RequestInterface",147],["T_WHITESPACE"," ",147],["T_VARIABLE","$request",147],")",["T_WHITESPACE","\n    ",147],"{",["T_WHITESPACE","\n        ",148],["T_VARIABLE","$allowGuest",149],["T_WHITESPACE"," ",149],"=",["T_WHITESPACE"," ",149],["T_VARIABLE","$this",149],["T_OBJECT_OPERATOR","->",149],["T_STRING","_objectManager",149],["T_OBJECT_OPERATOR","->",149],["T_STRING","get",149],"(",["T_NS_SEPARATOR","\\",149],["T_STRING","Magento",149],["T_NS_SEPARATOR","\\",149],["T_STRING","Review",149],["T_NS_SEPARATOR","\\",149],["T_STRING","Helper",149],["T_NS_SEPARATOR","\\",149],["T_STRING","Data",149],["T_DOUBLE_COLON","::",149],["T_CLASS","class",149],")",["T_OBJECT_OPERATOR","->",149],["T_STRING","getIsGuestAllowToWrite",149],"(",")",";",["T_WHITESPACE","\n        ",149],["T_IF","if",150],["T_WHITESPACE"," ",150],"(","!",["T_VARIABLE","$request",150],["T_OBJECT_OPERATOR","->",150],["T_STRING","isDispatched",150],"(",")",")",["T_WHITESPACE"," ",150],"{",["T_WHITESPACE","\n            ",150],["T_RETURN","return",151],["T_WHITESPACE"," ",151],["T_STRING","parent",151],["T_DOUBLE_COLON","::",151],["T_STRING","dispatch",151],"(",["T_VARIABLE","$request",151],")",";",["T_WHITESPACE","\n        ",151],"}",["T_WHITESPACE","\n\n        ",152],["T_IF","if",154],["T_WHITESPACE"," ",154],"(","!",["T_VARIABLE","$allowGuest",154],["T_WHITESPACE"," ",154],["T_BOOLEAN_AND","&&",154],["T_WHITESPACE"," ",154],["T_VARIABLE","$request",154],["T_OBJECT_OPERATOR","->",154],["T_STRING","getActionName",154],"(",")",["T_WHITESPACE"," ",154],["T_IS_EQUAL","==",154],["T_WHITESPACE"," ",154],["T_CONSTANT_ENCAPSED_STRING","'post'",154],["T_WHITESPACE"," ",154],["T_BOOLEAN_AND","&&",154],["T_WHITESPACE"," ",154],["T_VARIABLE","$request",154],["T_OBJECT_OPERATOR","->",154],["T_STRING","isPost",154],"(",")",")",["T_WHITESPACE"," ",154],"{",["T_WHITESPACE","\n            ",154],["T_IF","if",155],["T_WHITESPACE"," ",155],"(","!",["T_VARIABLE","$this",155],["T_OBJECT_OPERATOR","->",155],["T_STRING","customerSession",155],["T_OBJECT_OPERATOR","->",155],["T_STRING","isLoggedIn",155],"(",")",")",["T_WHITESPACE"," ",155],"{",["T_WHITESPACE","\n                ",155],["T_VARIABLE","$this",156],["T_OBJECT_OPERATOR","->",156],["T_STRING","_actionFlag",156],["T_OBJECT_OPERATOR","->",156],["T_STRING","set",156],"(",["T_CONSTANT_ENCAPSED_STRING","''",156],",",["T_WHITESPACE"," ",156],["T_STRING","self",156],["T_DOUBLE_COLON","::",156],["T_STRING","FLAG_NO_DISPATCH",156],",",["T_WHITESPACE"," ",156],["T_STRING","true",156],")",";",["T_WHITESPACE","\n                ",156],["T_VARIABLE","$this",157],["T_OBJECT_OPERATOR","->",157],["T_STRING","customerSession",157],["T_OBJECT_OPERATOR","->",157],["T_STRING","setBeforeAuthUrl",157],"(",["T_VARIABLE","$this",157],["T_OBJECT_OPERATOR","->",157],["T_STRING","_url",157],["T_OBJECT_OPERATOR","->",157],["T_STRING","getUrl",157],"(",["T_CONSTANT_ENCAPSED_STRING","'*\/*\/*'",157],",",["T_WHITESPACE"," ",157],"[",["T_CONSTANT_ENCAPSED_STRING","'_current'",157],["T_WHITESPACE"," ",157],["T_DOUBLE_ARROW","=>",157],["T_WHITESPACE"," ",157],["T_STRING","true",157],"]",")",")",";",["T_WHITESPACE","\n                ",157],["T_VARIABLE","$this",158],["T_OBJECT_OPERATOR","->",158],["T_STRING","_reviewSession",158],["T_OBJECT_OPERATOR","->",158],["T_STRING","setFormData",158],"(",["T_WHITESPACE","\n                    ",158],["T_VARIABLE","$request",159],["T_OBJECT_OPERATOR","->",159],["T_STRING","getPostValue",159],"(",")",["T_WHITESPACE","\n                ",159],")",["T_OBJECT_OPERATOR","->",160],["T_STRING","setRedirectUrl",160],"(",["T_WHITESPACE","\n                    ",160],["T_VARIABLE","$this",161],["T_OBJECT_OPERATOR","->",161],["T_STRING","_redirect",161],["T_OBJECT_OPERATOR","->",161],["T_STRING","getRefererUrl",161],"(",")",["T_WHITESPACE","\n                ",161],")",";",["T_WHITESPACE","\n                ",162],["T_VARIABLE","$this",163],["T_OBJECT_OPERATOR","->",163],["T_STRING","getResponse",163],"(",")",["T_OBJECT_OPERATOR","->",163],["T_STRING","setRedirect",163],"(",["T_WHITESPACE","\n                    ",163],["T_VARIABLE","$this",164],["T_OBJECT_OPERATOR","->",164],["T_STRING","_objectManager",164],["T_OBJECT_OPERATOR","->",164],["T_STRING","get",164],"(",["T_NS_SEPARATOR","\\",164],["T_STRING","Magento",164],["T_NS_SEPARATOR","\\",164],["T_STRING","Customer",164],["T_NS_SEPARATOR","\\",164],["T_STRING","Model",164],["T_NS_SEPARATOR","\\",164],["T_STRING","Url",164],["T_DOUBLE_COLON","::",164],["T_CLASS","class",164],")",["T_OBJECT_OPERATOR","->",164],["T_STRING","getLoginUrl",164],"(",")",["T_WHITESPACE","\n                ",164],")",";",["T_WHITESPACE","\n            ",165],"}",["T_WHITESPACE","\n        ",166],"}",["T_WHITESPACE","\n\n        ",167],["T_RETURN","return",169],["T_WHITESPACE"," ",169],["T_STRING","parent",169],["T_DOUBLE_COLON","::",169],["T_STRING","dispatch",169],"(",["T_VARIABLE","$request",169],")",";",["T_WHITESPACE","\n    ",169],"}",["T_WHITESPACE","\n\n    ",170],["T_DOC_COMMENT","\/**\n     * Initialize and check product\n     *\n     * @return \\Magento\\Catalog\\Model\\Product|bool\n     *\/",172],["T_WHITESPACE","\n    ",176],["T_PROTECTED","protected",177],["T_WHITESPACE"," ",177],["T_FUNCTION","function",177],["T_WHITESPACE"," ",177],["T_STRING","initProduct",177],"(",")",["T_WHITESPACE","\n    ",177],"{",["T_WHITESPACE","\n        ",178],["T_VARIABLE","$this",179],["T_OBJECT_OPERATOR","->",179],["T_STRING","_eventManager",179],["T_OBJECT_OPERATOR","->",179],["T_STRING","dispatch",179],"(",["T_CONSTANT_ENCAPSED_STRING","'review_controller_product_init_before'",179],",",["T_WHITESPACE"," ",179],"[",["T_CONSTANT_ENCAPSED_STRING","'controller_action'",179],["T_WHITESPACE"," ",179],["T_DOUBLE_ARROW","=>",179],["T_WHITESPACE"," ",179],["T_VARIABLE","$this",179],"]",")",";",["T_WHITESPACE","\n        ",179],["T_VARIABLE","$categoryId",180],["T_WHITESPACE"," ",180],"=",["T_WHITESPACE"," ",180],["T_INT_CAST","(int)",180],["T_VARIABLE","$this",180],["T_OBJECT_OPERATOR","->",180],["T_STRING","getRequest",180],"(",")",["T_OBJECT_OPERATOR","->",180],["T_STRING","getParam",180],"(",["T_CONSTANT_ENCAPSED_STRING","'category'",180],",",["T_WHITESPACE"," ",180],["T_STRING","false",180],")",";",["T_WHITESPACE","\n        ",180],["T_VARIABLE","$productId",181],["T_WHITESPACE"," ",181],"=",["T_WHITESPACE"," ",181],["T_INT_CAST","(int)",181],["T_VARIABLE","$this",181],["T_OBJECT_OPERATOR","->",181],["T_STRING","getRequest",181],"(",")",["T_OBJECT_OPERATOR","->",181],["T_STRING","getParam",181],"(",["T_CONSTANT_ENCAPSED_STRING","'id'",181],")",";",["T_WHITESPACE","\n\n        ",181],["T_VARIABLE","$product",183],["T_WHITESPACE"," ",183],"=",["T_WHITESPACE"," ",183],["T_VARIABLE","$this",183],["T_OBJECT_OPERATOR","->",183],["T_STRING","loadProduct",183],"(",["T_VARIABLE","$productId",183],")",";",["T_WHITESPACE","\n        ",183],["T_IF","if",184],["T_WHITESPACE"," ",184],"(","!",["T_VARIABLE","$product",184],")",["T_WHITESPACE"," ",184],"{",["T_WHITESPACE","\n            ",184],["T_RETURN","return",185],["T_WHITESPACE"," ",185],["T_STRING","false",185],";",["T_WHITESPACE","\n        ",185],"}",["T_WHITESPACE","\n\n        ",186],["T_IF","if",188],["T_WHITESPACE"," ",188],"(",["T_VARIABLE","$categoryId",188],")",["T_WHITESPACE"," ",188],"{",["T_WHITESPACE","\n            ",188],["T_VARIABLE","$category",189],["T_WHITESPACE"," ",189],"=",["T_WHITESPACE"," ",189],["T_VARIABLE","$this",189],["T_OBJECT_OPERATOR","->",189],["T_STRING","categoryRepository",189],["T_OBJECT_OPERATOR","->",189],["T_STRING","get",189],"(",["T_VARIABLE","$categoryId",189],")",";",["T_WHITESPACE","\n            ",189],["T_VARIABLE","$this",190],["T_OBJECT_OPERATOR","->",190],["T_STRING","coreRegistry",190],["T_OBJECT_OPERATOR","->",190],["T_STRING","register",190],"(",["T_CONSTANT_ENCAPSED_STRING","'current_category'",190],",",["T_WHITESPACE"," ",190],["T_VARIABLE","$category",190],")",";",["T_WHITESPACE","\n        ",190],"}",["T_WHITESPACE","\n\n        ",191],["T_TRY","try",193],["T_WHITESPACE"," ",193],"{",["T_WHITESPACE","\n            ",193],["T_VARIABLE","$this",194],["T_OBJECT_OPERATOR","->",194],["T_STRING","_eventManager",194],["T_OBJECT_OPERATOR","->",194],["T_STRING","dispatch",194],"(",["T_CONSTANT_ENCAPSED_STRING","'review_controller_product_init'",194],",",["T_WHITESPACE"," ",194],"[",["T_CONSTANT_ENCAPSED_STRING","'product'",194],["T_WHITESPACE"," ",194],["T_DOUBLE_ARROW","=>",194],["T_WHITESPACE"," ",194],["T_VARIABLE","$product",194],"]",")",";",["T_WHITESPACE","\n            ",194],["T_VARIABLE","$this",195],["T_OBJECT_OPERATOR","->",195],["T_STRING","_eventManager",195],["T_OBJECT_OPERATOR","->",195],["T_STRING","dispatch",195],"(",["T_WHITESPACE","\n                ",195],["T_CONSTANT_ENCAPSED_STRING","'review_controller_product_init_after'",196],",",["T_WHITESPACE","\n                ",196],"[",["T_CONSTANT_ENCAPSED_STRING","'product'",197],["T_WHITESPACE"," ",197],["T_DOUBLE_ARROW","=>",197],["T_WHITESPACE"," ",197],["T_VARIABLE","$product",197],",",["T_WHITESPACE"," ",197],["T_CONSTANT_ENCAPSED_STRING","'controller_action'",197],["T_WHITESPACE"," ",197],["T_DOUBLE_ARROW","=>",197],["T_WHITESPACE"," ",197],["T_VARIABLE","$this",197],"]",["T_WHITESPACE","\n            ",197],")",";",["T_WHITESPACE","\n        ",198],"}",["T_WHITESPACE"," ",199],["T_CATCH","catch",199],["T_WHITESPACE"," ",199],"(",["T_NS_SEPARATOR","\\",199],["T_STRING","Magento",199],["T_NS_SEPARATOR","\\",199],["T_STRING","Framework",199],["T_NS_SEPARATOR","\\",199],["T_STRING","Exception",199],["T_NS_SEPARATOR","\\",199],["T_STRING","LocalizedException",199],["T_WHITESPACE"," ",199],["T_VARIABLE","$e",199],")",["T_WHITESPACE"," ",199],"{",["T_WHITESPACE","\n            ",199],["T_VARIABLE","$this",200],["T_OBJECT_OPERATOR","->",200],["T_STRING","logger",200],["T_OBJECT_OPERATOR","->",200],["T_STRING","critical",200],"(",["T_VARIABLE","$e",200],")",";",["T_WHITESPACE","\n            ",200],["T_RETURN","return",201],["T_WHITESPACE"," ",201],["T_STRING","false",201],";",["T_WHITESPACE","\n        ",201],"}",["T_WHITESPACE","\n\n        ",202],["T_RETURN","return",204],["T_WHITESPACE"," ",204],["T_VARIABLE","$product",204],";",["T_WHITESPACE","\n    ",204],"}",["T_WHITESPACE","\n\n    ",205],["T_DOC_COMMENT","\/**\n     * Load product model with data by passed id.\n     * Return false if product was not loaded or has incorrect status.\n     *\n     * @param int $productId\n     * @return bool|CatalogProduct\n     *\/",207],["T_WHITESPACE","\n    ",213],["T_PROTECTED","protected",214],["T_WHITESPACE"," ",214],["T_FUNCTION","function",214],["T_WHITESPACE"," ",214],["T_STRING","loadProduct",214],"(",["T_VARIABLE","$productId",214],")",["T_WHITESPACE","\n    ",214],"{",["T_WHITESPACE","\n        ",215],["T_IF","if",216],["T_WHITESPACE"," ",216],"(","!",["T_VARIABLE","$productId",216],")",["T_WHITESPACE"," ",216],"{",["T_WHITESPACE","\n            ",216],["T_RETURN","return",217],["T_WHITESPACE"," ",217],["T_STRING","false",217],";",["T_WHITESPACE","\n        ",217],"}",["T_WHITESPACE","\n\n        ",218],["T_TRY","try",220],["T_WHITESPACE"," ",220],"{",["T_WHITESPACE","\n            ",220],["T_VARIABLE","$product",221],["T_WHITESPACE"," ",221],"=",["T_WHITESPACE"," ",221],["T_VARIABLE","$this",221],["T_OBJECT_OPERATOR","->",221],["T_STRING","productRepository",221],["T_OBJECT_OPERATOR","->",221],["T_STRING","getById",221],"(",["T_VARIABLE","$productId",221],")",";",["T_WHITESPACE","\n            ",221],["T_IF","if",222],["T_WHITESPACE"," ",222],"(","!",["T_VARIABLE","$product",222],["T_OBJECT_OPERATOR","->",222],["T_STRING","isVisibleInCatalog",222],"(",")",["T_WHITESPACE"," ",222],["T_BOOLEAN_OR","||",222],["T_WHITESPACE"," ",222],"!",["T_VARIABLE","$product",222],["T_OBJECT_OPERATOR","->",222],["T_STRING","isVisibleInSiteVisibility",222],"(",")",")",["T_WHITESPACE"," ",222],"{",["T_WHITESPACE","\n                ",222],["T_THROW","throw",223],["T_WHITESPACE"," ",223],["T_NEW","new",223],["T_WHITESPACE"," ",223],["T_STRING","NoSuchEntityException",223],"(",")",";",["T_WHITESPACE","\n            ",223],"}",["T_WHITESPACE","\n        ",224],"}",["T_WHITESPACE"," ",225],["T_CATCH","catch",225],["T_WHITESPACE"," ",225],"(",["T_STRING","NoSuchEntityException",225],["T_WHITESPACE"," ",225],["T_VARIABLE","$noEntityException",225],")",["T_WHITESPACE"," ",225],"{",["T_WHITESPACE","\n            ",225],["T_RETURN","return",226],["T_WHITESPACE"," ",226],["T_STRING","false",226],";",["T_WHITESPACE","\n        ",226],"}",["T_WHITESPACE","\n\n        ",227],["T_VARIABLE","$this",229],["T_OBJECT_OPERATOR","->",229],["T_STRING","coreRegistry",229],["T_OBJECT_OPERATOR","->",229],["T_STRING","register",229],"(",["T_CONSTANT_ENCAPSED_STRING","'current_product'",229],",",["T_WHITESPACE"," ",229],["T_VARIABLE","$product",229],")",";",["T_WHITESPACE","\n        ",229],["T_VARIABLE","$this",230],["T_OBJECT_OPERATOR","->",230],["T_STRING","coreRegistry",230],["T_OBJECT_OPERATOR","->",230],["T_STRING","register",230],"(",["T_CONSTANT_ENCAPSED_STRING","'product'",230],",",["T_WHITESPACE"," ",230],["T_VARIABLE","$product",230],")",";",["T_WHITESPACE","\n\n        ",230],["T_RETURN","return",232],["T_WHITESPACE"," ",232],["T_VARIABLE","$product",232],";",["T_WHITESPACE","\n    ",232],"}",["T_WHITESPACE","\n",233],"}",["T_WHITESPACE","\n",234]]
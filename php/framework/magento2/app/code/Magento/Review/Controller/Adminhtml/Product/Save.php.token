[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Copyright \u00c2\u00a9 2013-2017 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n *\/",2],["T_WHITESPACE","\n",5],["T_NAMESPACE","namespace",6],["T_WHITESPACE"," ",6],["T_STRING","Magento",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Review",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Controller",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Adminhtml",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Product",6],";",["T_WHITESPACE","\n\n",6],["T_USE","use",8],["T_WHITESPACE"," ",8],["T_STRING","Magento",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Review",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Controller",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Adminhtml",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Product",8],["T_WHITESPACE"," ",8],["T_AS","as",8],["T_WHITESPACE"," ",8],["T_STRING","ProductController",8],";",["T_WHITESPACE","\n",8],["T_USE","use",9],["T_WHITESPACE"," ",9],["T_STRING","Magento",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Framework",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Controller",9],["T_NS_SEPARATOR","\\",9],["T_STRING","ResultFactory",9],";",["T_WHITESPACE","\n",9],["T_USE","use",10],["T_WHITESPACE"," ",10],["T_STRING","Magento",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Framework",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Exception",10],["T_NS_SEPARATOR","\\",10],["T_STRING","LocalizedException",10],";",["T_WHITESPACE","\n\n",10],["T_CLASS","class",12],["T_WHITESPACE"," ",12],["T_STRING","Save",12],["T_WHITESPACE"," ",12],["T_EXTENDS","extends",12],["T_WHITESPACE"," ",12],["T_STRING","ProductController",12],["T_WHITESPACE","\n",12],"{",["T_WHITESPACE","\n    ",13],["T_DOC_COMMENT","\/**\n     * @return \\Magento\\Backend\\Model\\View\\Result\\Redirect\n     * @SuppressWarnings(PHPMD.CyclomaticComplexity)\n     *\/",14],["T_WHITESPACE","\n    ",17],["T_PUBLIC","public",18],["T_WHITESPACE"," ",18],["T_FUNCTION","function",18],["T_WHITESPACE"," ",18],["T_STRING","execute",18],"(",")",["T_WHITESPACE","\n    ",18],"{",["T_WHITESPACE","\n        ",19],["T_DOC_COMMENT","\/** @var \\Magento\\Backend\\Model\\View\\Result\\Redirect $resultRedirect *\/",20],["T_WHITESPACE","\n        ",20],["T_VARIABLE","$resultRedirect",21],["T_WHITESPACE"," ",21],"=",["T_WHITESPACE"," ",21],["T_VARIABLE","$this",21],["T_OBJECT_OPERATOR","->",21],["T_STRING","resultFactory",21],["T_OBJECT_OPERATOR","->",21],["T_STRING","create",21],"(",["T_STRING","ResultFactory",21],["T_DOUBLE_COLON","::",21],["T_STRING","TYPE_REDIRECT",21],")",";",["T_WHITESPACE","\n        ",21],["T_IF","if",22],["T_WHITESPACE"," ",22],"(","(",["T_VARIABLE","$data",22],["T_WHITESPACE"," ",22],"=",["T_WHITESPACE"," ",22],["T_VARIABLE","$this",22],["T_OBJECT_OPERATOR","->",22],["T_STRING","getRequest",22],"(",")",["T_OBJECT_OPERATOR","->",22],["T_STRING","getPostValue",22],"(",")",")",["T_WHITESPACE"," ",22],["T_BOOLEAN_AND","&&",22],["T_WHITESPACE"," ",22],"(",["T_VARIABLE","$reviewId",22],["T_WHITESPACE"," ",22],"=",["T_WHITESPACE"," ",22],["T_VARIABLE","$this",22],["T_OBJECT_OPERATOR","->",22],["T_STRING","getRequest",22],"(",")",["T_OBJECT_OPERATOR","->",22],["T_STRING","getParam",22],"(",["T_CONSTANT_ENCAPSED_STRING","'id'",22],")",")",")",["T_WHITESPACE"," ",22],"{",["T_WHITESPACE","\n            ",22],["T_VARIABLE","$review",23],["T_WHITESPACE"," ",23],"=",["T_WHITESPACE"," ",23],["T_VARIABLE","$this",23],["T_OBJECT_OPERATOR","->",23],["T_STRING","reviewFactory",23],["T_OBJECT_OPERATOR","->",23],["T_STRING","create",23],"(",")",["T_OBJECT_OPERATOR","->",23],["T_STRING","load",23],"(",["T_VARIABLE","$reviewId",23],")",";",["T_WHITESPACE","\n            ",23],["T_IF","if",24],["T_WHITESPACE"," ",24],"(","!",["T_VARIABLE","$review",24],["T_OBJECT_OPERATOR","->",24],["T_STRING","getId",24],"(",")",")",["T_WHITESPACE"," ",24],"{",["T_WHITESPACE","\n                ",24],["T_VARIABLE","$this",25],["T_OBJECT_OPERATOR","->",25],["T_STRING","messageManager",25],["T_OBJECT_OPERATOR","->",25],["T_STRING","addError",25],"(",["T_STRING","__",25],"(",["T_CONSTANT_ENCAPSED_STRING","'The review was removed by another user or does not exist.'",25],")",")",";",["T_WHITESPACE","\n            ",25],"}",["T_WHITESPACE"," ",26],["T_ELSE","else",26],["T_WHITESPACE"," ",26],"{",["T_WHITESPACE","\n                ",26],["T_TRY","try",27],["T_WHITESPACE"," ",27],"{",["T_WHITESPACE","\n                    ",27],["T_VARIABLE","$review",28],["T_OBJECT_OPERATOR","->",28],["T_STRING","addData",28],"(",["T_VARIABLE","$data",28],")",["T_OBJECT_OPERATOR","->",28],["T_STRING","save",28],"(",")",";",["T_WHITESPACE","\n\n                    ",28],["T_VARIABLE","$arrRatingId",30],["T_WHITESPACE"," ",30],"=",["T_WHITESPACE"," ",30],["T_VARIABLE","$this",30],["T_OBJECT_OPERATOR","->",30],["T_STRING","getRequest",30],"(",")",["T_OBJECT_OPERATOR","->",30],["T_STRING","getParam",30],"(",["T_CONSTANT_ENCAPSED_STRING","'ratings'",30],",",["T_WHITESPACE"," ",30],"[","]",")",";",["T_WHITESPACE","\n                    ",30],["T_DOC_COMMENT","\/** @var \\Magento\\Review\\Model\\Rating\\Option\\Vote $votes *\/",31],["T_WHITESPACE","\n                    ",31],["T_VARIABLE","$votes",32],["T_WHITESPACE"," ",32],"=",["T_WHITESPACE"," ",32],["T_VARIABLE","$this",32],["T_OBJECT_OPERATOR","->",32],["T_STRING","_objectManager",32],["T_OBJECT_OPERATOR","->",32],["T_STRING","create",32],"(",["T_NS_SEPARATOR","\\",32],["T_STRING","Magento",32],["T_NS_SEPARATOR","\\",32],["T_STRING","Review",32],["T_NS_SEPARATOR","\\",32],["T_STRING","Model",32],["T_NS_SEPARATOR","\\",32],["T_STRING","Rating",32],["T_NS_SEPARATOR","\\",32],["T_STRING","Option",32],["T_NS_SEPARATOR","\\",32],["T_STRING","Vote",32],["T_DOUBLE_COLON","::",32],["T_CLASS","class",32],")",["T_WHITESPACE","\n                        ",32],["T_OBJECT_OPERATOR","->",33],["T_STRING","getResourceCollection",33],"(",")",["T_WHITESPACE","\n                        ",33],["T_OBJECT_OPERATOR","->",34],["T_STRING","setReviewFilter",34],"(",["T_VARIABLE","$reviewId",34],")",["T_WHITESPACE","\n                        ",34],["T_OBJECT_OPERATOR","->",35],["T_STRING","addOptionInfo",35],"(",")",["T_WHITESPACE","\n                        ",35],["T_OBJECT_OPERATOR","->",36],["T_STRING","load",36],"(",")",["T_WHITESPACE","\n                        ",36],["T_OBJECT_OPERATOR","->",37],["T_STRING","addRatingOptions",37],"(",")",";",["T_WHITESPACE","\n                    ",37],["T_FOREACH","foreach",38],["T_WHITESPACE"," ",38],"(",["T_VARIABLE","$arrRatingId",38],["T_WHITESPACE"," ",38],["T_AS","as",38],["T_WHITESPACE"," ",38],["T_VARIABLE","$ratingId",38],["T_WHITESPACE"," ",38],["T_DOUBLE_ARROW","=>",38],["T_WHITESPACE"," ",38],["T_VARIABLE","$optionId",38],")",["T_WHITESPACE"," ",38],"{",["T_WHITESPACE","\n                        ",38],["T_IF","if",39],["T_WHITESPACE"," ",39],"(",["T_VARIABLE","$vote",39],["T_WHITESPACE"," ",39],"=",["T_WHITESPACE"," ",39],["T_VARIABLE","$votes",39],["T_OBJECT_OPERATOR","->",39],["T_STRING","getItemByColumnValue",39],"(",["T_CONSTANT_ENCAPSED_STRING","'rating_id'",39],",",["T_WHITESPACE"," ",39],["T_VARIABLE","$ratingId",39],")",")",["T_WHITESPACE"," ",39],"{",["T_WHITESPACE","\n                            ",39],["T_VARIABLE","$this",40],["T_OBJECT_OPERATOR","->",40],["T_STRING","ratingFactory",40],["T_OBJECT_OPERATOR","->",40],["T_STRING","create",40],"(",")",["T_WHITESPACE","\n                                ",40],["T_OBJECT_OPERATOR","->",41],["T_STRING","setVoteId",41],"(",["T_VARIABLE","$vote",41],["T_OBJECT_OPERATOR","->",41],["T_STRING","getId",41],"(",")",")",["T_WHITESPACE","\n                                ",41],["T_OBJECT_OPERATOR","->",42],["T_STRING","setReviewId",42],"(",["T_VARIABLE","$review",42],["T_OBJECT_OPERATOR","->",42],["T_STRING","getId",42],"(",")",")",["T_WHITESPACE","\n                                ",42],["T_OBJECT_OPERATOR","->",43],["T_STRING","updateOptionVote",43],"(",["T_VARIABLE","$optionId",43],")",";",["T_WHITESPACE","\n                        ",43],"}",["T_WHITESPACE"," ",44],["T_ELSE","else",44],["T_WHITESPACE"," ",44],"{",["T_WHITESPACE","\n                            ",44],["T_VARIABLE","$this",45],["T_OBJECT_OPERATOR","->",45],["T_STRING","ratingFactory",45],["T_OBJECT_OPERATOR","->",45],["T_STRING","create",45],"(",")",["T_WHITESPACE","\n                                ",45],["T_OBJECT_OPERATOR","->",46],["T_STRING","setRatingId",46],"(",["T_VARIABLE","$ratingId",46],")",["T_WHITESPACE","\n                                ",46],["T_OBJECT_OPERATOR","->",47],["T_STRING","setReviewId",47],"(",["T_VARIABLE","$review",47],["T_OBJECT_OPERATOR","->",47],["T_STRING","getId",47],"(",")",")",["T_WHITESPACE","\n                                ",47],["T_OBJECT_OPERATOR","->",48],["T_STRING","addOptionVote",48],"(",["T_VARIABLE","$optionId",48],",",["T_WHITESPACE"," ",48],["T_VARIABLE","$review",48],["T_OBJECT_OPERATOR","->",48],["T_STRING","getEntityPkValue",48],"(",")",")",";",["T_WHITESPACE","\n                        ",48],"}",["T_WHITESPACE","\n                    ",49],"}",["T_WHITESPACE","\n\n                    ",50],["T_VARIABLE","$review",52],["T_OBJECT_OPERATOR","->",52],["T_STRING","aggregate",52],"(",")",";",["T_WHITESPACE","\n\n                    ",52],["T_VARIABLE","$this",54],["T_OBJECT_OPERATOR","->",54],["T_STRING","messageManager",54],["T_OBJECT_OPERATOR","->",54],["T_STRING","addSuccess",54],"(",["T_STRING","__",54],"(",["T_CONSTANT_ENCAPSED_STRING","'You saved the review.'",54],")",")",";",["T_WHITESPACE","\n                ",54],"}",["T_WHITESPACE"," ",55],["T_CATCH","catch",55],["T_WHITESPACE"," ",55],"(",["T_STRING","LocalizedException",55],["T_WHITESPACE"," ",55],["T_VARIABLE","$e",55],")",["T_WHITESPACE"," ",55],"{",["T_WHITESPACE","\n                    ",55],["T_VARIABLE","$this",56],["T_OBJECT_OPERATOR","->",56],["T_STRING","messageManager",56],["T_OBJECT_OPERATOR","->",56],["T_STRING","addError",56],"(",["T_VARIABLE","$e",56],["T_OBJECT_OPERATOR","->",56],["T_STRING","getMessage",56],"(",")",")",";",["T_WHITESPACE","\n                ",56],"}",["T_WHITESPACE"," ",57],["T_CATCH","catch",57],["T_WHITESPACE"," ",57],"(",["T_NS_SEPARATOR","\\",57],["T_STRING","Exception",57],["T_WHITESPACE"," ",57],["T_VARIABLE","$e",57],")",["T_WHITESPACE"," ",57],"{",["T_WHITESPACE","\n                    ",57],["T_VARIABLE","$this",58],["T_OBJECT_OPERATOR","->",58],["T_STRING","messageManager",58],["T_OBJECT_OPERATOR","->",58],["T_STRING","addException",58],"(",["T_VARIABLE","$e",58],",",["T_WHITESPACE"," ",58],["T_STRING","__",58],"(",["T_CONSTANT_ENCAPSED_STRING","'Something went wrong while saving this review.'",58],")",")",";",["T_WHITESPACE","\n                ",58],"}",["T_WHITESPACE","\n            ",59],"}",["T_WHITESPACE","\n\n            ",60],["T_VARIABLE","$nextId",62],["T_WHITESPACE"," ",62],"=",["T_WHITESPACE"," ",62],["T_INT_CAST","(int)",62],["T_VARIABLE","$this",62],["T_OBJECT_OPERATOR","->",62],["T_STRING","getRequest",62],"(",")",["T_OBJECT_OPERATOR","->",62],["T_STRING","getParam",62],"(",["T_CONSTANT_ENCAPSED_STRING","'next_item'",62],")",";",["T_WHITESPACE","\n            ",62],["T_IF","if",63],["T_WHITESPACE"," ",63],"(",["T_VARIABLE","$nextId",63],")",["T_WHITESPACE"," ",63],"{",["T_WHITESPACE","\n                ",63],["T_VARIABLE","$resultRedirect",64],["T_OBJECT_OPERATOR","->",64],["T_STRING","setPath",64],"(",["T_CONSTANT_ENCAPSED_STRING","'review\/*\/edit'",64],",",["T_WHITESPACE"," ",64],"[",["T_CONSTANT_ENCAPSED_STRING","'id'",64],["T_WHITESPACE"," ",64],["T_DOUBLE_ARROW","=>",64],["T_WHITESPACE"," ",64],["T_VARIABLE","$nextId",64],"]",")",";",["T_WHITESPACE","\n            ",64],"}",["T_WHITESPACE"," ",65],["T_ELSEIF","elseif",65],["T_WHITESPACE"," ",65],"(",["T_VARIABLE","$this",65],["T_OBJECT_OPERATOR","->",65],["T_STRING","getRequest",65],"(",")",["T_OBJECT_OPERATOR","->",65],["T_STRING","getParam",65],"(",["T_CONSTANT_ENCAPSED_STRING","'ret'",65],")",["T_WHITESPACE"," ",65],["T_IS_EQUAL","==",65],["T_WHITESPACE"," ",65],["T_CONSTANT_ENCAPSED_STRING","'pending'",65],")",["T_WHITESPACE"," ",65],"{",["T_WHITESPACE","\n                ",65],["T_VARIABLE","$resultRedirect",66],["T_OBJECT_OPERATOR","->",66],["T_STRING","setPath",66],"(",["T_CONSTANT_ENCAPSED_STRING","'*\/*\/pending'",66],")",";",["T_WHITESPACE","\n            ",66],"}",["T_WHITESPACE"," ",67],["T_ELSE","else",67],["T_WHITESPACE"," ",67],"{",["T_WHITESPACE","\n                ",67],["T_VARIABLE","$resultRedirect",68],["T_OBJECT_OPERATOR","->",68],["T_STRING","setPath",68],"(",["T_CONSTANT_ENCAPSED_STRING","'*\/*\/'",68],")",";",["T_WHITESPACE","\n            ",68],"}",["T_WHITESPACE","\n            ",69],["T_RETURN","return",70],["T_WHITESPACE"," ",70],["T_VARIABLE","$resultRedirect",70],";",["T_WHITESPACE","\n        ",70],"}",["T_WHITESPACE","\n        ",71],["T_VARIABLE","$resultRedirect",72],["T_OBJECT_OPERATOR","->",72],["T_STRING","setPath",72],"(",["T_CONSTANT_ENCAPSED_STRING","'review\/*\/'",72],")",";",["T_WHITESPACE","\n        ",72],["T_RETURN","return",73],["T_WHITESPACE"," ",73],["T_VARIABLE","$resultRedirect",73],";",["T_WHITESPACE","\n    ",73],"}",["T_WHITESPACE","\n",74],"}",["T_WHITESPACE","\n",75]]
[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Copyright \u00c2\u00a9 2013-2017 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n *\/",2],["T_WHITESPACE","\n",5],["T_NAMESPACE","namespace",6],["T_WHITESPACE"," ",6],["T_STRING","Magento",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Review",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Controller",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Adminhtml",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Product",6],";",["T_WHITESPACE","\n\n",6],["T_USE","use",8],["T_WHITESPACE"," ",8],["T_STRING","Magento",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Review",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Controller",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Adminhtml",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Product",8],["T_WHITESPACE"," ",8],["T_AS","as",8],["T_WHITESPACE"," ",8],["T_STRING","ProductController",8],";",["T_WHITESPACE","\n",8],["T_USE","use",9],["T_WHITESPACE"," ",9],["T_STRING","Magento",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Framework",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Controller",9],["T_NS_SEPARATOR","\\",9],["T_STRING","ResultFactory",9],";",["T_WHITESPACE","\n",9],["T_USE","use",10],["T_WHITESPACE"," ",10],["T_STRING","Magento",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Store",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Model",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Store",10],";",["T_WHITESPACE","\n",10],["T_USE","use",11],["T_WHITESPACE"," ",11],["T_STRING","Magento",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Framework",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Exception",11],["T_NS_SEPARATOR","\\",11],["T_STRING","LocalizedException",11],";",["T_WHITESPACE","\n\n",11],["T_CLASS","class",13],["T_WHITESPACE"," ",13],["T_STRING","Post",13],["T_WHITESPACE"," ",13],["T_EXTENDS","extends",13],["T_WHITESPACE"," ",13],["T_STRING","ProductController",13],["T_WHITESPACE","\n",13],"{",["T_WHITESPACE","\n    ",14],["T_DOC_COMMENT","\/**\n     * @return \\Magento\\Backend\\Model\\View\\Result\\Redirect\n     *\/",15],["T_WHITESPACE","\n    ",17],["T_PUBLIC","public",18],["T_WHITESPACE"," ",18],["T_FUNCTION","function",18],["T_WHITESPACE"," ",18],["T_STRING","execute",18],"(",")",["T_WHITESPACE","\n    ",18],"{",["T_WHITESPACE","\n        ",19],["T_VARIABLE","$productId",20],["T_WHITESPACE"," ",20],"=",["T_WHITESPACE"," ",20],["T_VARIABLE","$this",20],["T_OBJECT_OPERATOR","->",20],["T_STRING","getRequest",20],"(",")",["T_OBJECT_OPERATOR","->",20],["T_STRING","getParam",20],"(",["T_CONSTANT_ENCAPSED_STRING","'product_id'",20],",",["T_WHITESPACE"," ",20],["T_STRING","false",20],")",";",["T_WHITESPACE","\n        ",20],["T_DOC_COMMENT","\/** @var \\Magento\\Backend\\Model\\View\\Result\\Redirect $resultRedirect *\/",21],["T_WHITESPACE","\n        ",21],["T_VARIABLE","$resultRedirect",22],["T_WHITESPACE"," ",22],"=",["T_WHITESPACE"," ",22],["T_VARIABLE","$this",22],["T_OBJECT_OPERATOR","->",22],["T_STRING","resultFactory",22],["T_OBJECT_OPERATOR","->",22],["T_STRING","create",22],"(",["T_STRING","ResultFactory",22],["T_DOUBLE_COLON","::",22],["T_STRING","TYPE_REDIRECT",22],")",";",["T_WHITESPACE","\n        ",22],["T_IF","if",23],["T_WHITESPACE"," ",23],"(",["T_VARIABLE","$data",23],["T_WHITESPACE"," ",23],"=",["T_WHITESPACE"," ",23],["T_VARIABLE","$this",23],["T_OBJECT_OPERATOR","->",23],["T_STRING","getRequest",23],"(",")",["T_OBJECT_OPERATOR","->",23],["T_STRING","getPostValue",23],"(",")",")",["T_WHITESPACE"," ",23],"{",["T_WHITESPACE","\n            ",23],["T_DOC_COMMENT","\/** @var \\Magento\\Store\\Model\\StoreManagerInterface $storeManager *\/",24],["T_WHITESPACE","\n            ",24],["T_VARIABLE","$storeManager",25],["T_WHITESPACE"," ",25],"=",["T_WHITESPACE"," ",25],["T_VARIABLE","$this",25],["T_OBJECT_OPERATOR","->",25],["T_STRING","_objectManager",25],["T_OBJECT_OPERATOR","->",25],["T_STRING","get",25],"(",["T_NS_SEPARATOR","\\",25],["T_STRING","Magento",25],["T_NS_SEPARATOR","\\",25],["T_STRING","Store",25],["T_NS_SEPARATOR","\\",25],["T_STRING","Model",25],["T_NS_SEPARATOR","\\",25],["T_STRING","StoreManagerInterface",25],["T_DOUBLE_COLON","::",25],["T_CLASS","class",25],")",";",["T_WHITESPACE","\n            ",25],["T_IF","if",26],["T_WHITESPACE"," ",26],"(",["T_VARIABLE","$storeManager",26],["T_OBJECT_OPERATOR","->",26],["T_STRING","hasSingleStore",26],"(",")",")",["T_WHITESPACE"," ",26],"{",["T_WHITESPACE","\n                ",26],["T_VARIABLE","$data",27],"[",["T_CONSTANT_ENCAPSED_STRING","'stores'",27],"]",["T_WHITESPACE"," ",27],"=",["T_WHITESPACE"," ",27],"[",["T_WHITESPACE","\n                    ",27],["T_VARIABLE","$storeManager",28],["T_OBJECT_OPERATOR","->",28],["T_STRING","getStore",28],"(",["T_STRING","true",28],")",["T_OBJECT_OPERATOR","->",28],["T_STRING","getId",28],"(",")",",",["T_WHITESPACE","\n                ",28],"]",";",["T_WHITESPACE","\n            ",29],"}",["T_WHITESPACE"," ",30],["T_ELSEIF","elseif",30],["T_WHITESPACE"," ",30],"(",["T_ISSET","isset",30],"(",["T_VARIABLE","$data",30],"[",["T_CONSTANT_ENCAPSED_STRING","'select_stores'",30],"]",")",")",["T_WHITESPACE"," ",30],"{",["T_WHITESPACE","\n                ",30],["T_VARIABLE","$data",31],"[",["T_CONSTANT_ENCAPSED_STRING","'stores'",31],"]",["T_WHITESPACE"," ",31],"=",["T_WHITESPACE"," ",31],["T_VARIABLE","$data",31],"[",["T_CONSTANT_ENCAPSED_STRING","'select_stores'",31],"]",";",["T_WHITESPACE","\n            ",31],"}",["T_WHITESPACE","\n            ",32],["T_VARIABLE","$review",33],["T_WHITESPACE"," ",33],"=",["T_WHITESPACE"," ",33],["T_VARIABLE","$this",33],["T_OBJECT_OPERATOR","->",33],["T_STRING","reviewFactory",33],["T_OBJECT_OPERATOR","->",33],["T_STRING","create",33],"(",")",["T_OBJECT_OPERATOR","->",33],["T_STRING","setData",33],"(",["T_VARIABLE","$data",33],")",";",["T_WHITESPACE","\n            ",33],["T_TRY","try",34],["T_WHITESPACE"," ",34],"{",["T_WHITESPACE","\n                ",34],["T_VARIABLE","$review",35],["T_OBJECT_OPERATOR","->",35],["T_STRING","setEntityId",35],"(",["T_LNUMBER","1",35],")",["T_WHITESPACE"," ",35],["T_COMMENT","\/\/ product\n",35],["T_WHITESPACE","                    ",36],["T_OBJECT_OPERATOR","->",36],["T_STRING","setEntityPkValue",36],"(",["T_VARIABLE","$productId",36],")",["T_WHITESPACE","\n                    ",36],["T_OBJECT_OPERATOR","->",37],["T_STRING","setStoreId",37],"(",["T_STRING","Store",37],["T_DOUBLE_COLON","::",37],["T_STRING","DEFAULT_STORE_ID",37],")",["T_WHITESPACE","\n                    ",37],["T_OBJECT_OPERATOR","->",38],["T_STRING","setStatusId",38],"(",["T_VARIABLE","$data",38],"[",["T_CONSTANT_ENCAPSED_STRING","'status_id'",38],"]",")",["T_WHITESPACE","\n                    ",38],["T_OBJECT_OPERATOR","->",39],["T_STRING","setCustomerId",39],"(",["T_STRING","null",39],")",["T_COMMENT","\/\/null is for administrator only\n",39],["T_WHITESPACE","                    ",40],["T_OBJECT_OPERATOR","->",40],["T_STRING","save",40],"(",")",";",["T_WHITESPACE","\n\n                ",40],["T_VARIABLE","$arrRatingId",42],["T_WHITESPACE"," ",42],"=",["T_WHITESPACE"," ",42],["T_VARIABLE","$this",42],["T_OBJECT_OPERATOR","->",42],["T_STRING","getRequest",42],"(",")",["T_OBJECT_OPERATOR","->",42],["T_STRING","getParam",42],"(",["T_CONSTANT_ENCAPSED_STRING","'ratings'",42],",",["T_WHITESPACE"," ",42],"[","]",")",";",["T_WHITESPACE","\n                ",42],["T_FOREACH","foreach",43],["T_WHITESPACE"," ",43],"(",["T_VARIABLE","$arrRatingId",43],["T_WHITESPACE"," ",43],["T_AS","as",43],["T_WHITESPACE"," ",43],["T_VARIABLE","$ratingId",43],["T_WHITESPACE"," ",43],["T_DOUBLE_ARROW","=>",43],["T_WHITESPACE"," ",43],["T_VARIABLE","$optionId",43],")",["T_WHITESPACE"," ",43],"{",["T_WHITESPACE","\n                    ",43],["T_VARIABLE","$this",44],["T_OBJECT_OPERATOR","->",44],["T_STRING","ratingFactory",44],["T_OBJECT_OPERATOR","->",44],["T_STRING","create",44],"(",")",["T_WHITESPACE","\n                        ",44],["T_OBJECT_OPERATOR","->",45],["T_STRING","setRatingId",45],"(",["T_VARIABLE","$ratingId",45],")",["T_WHITESPACE","\n                        ",45],["T_OBJECT_OPERATOR","->",46],["T_STRING","setReviewId",46],"(",["T_VARIABLE","$review",46],["T_OBJECT_OPERATOR","->",46],["T_STRING","getId",46],"(",")",")",["T_WHITESPACE","\n                        ",46],["T_OBJECT_OPERATOR","->",47],["T_STRING","addOptionVote",47],"(",["T_VARIABLE","$optionId",47],",",["T_WHITESPACE"," ",47],["T_VARIABLE","$productId",47],")",";",["T_WHITESPACE","\n                ",47],"}",["T_WHITESPACE","\n\n                ",48],["T_VARIABLE","$review",50],["T_OBJECT_OPERATOR","->",50],["T_STRING","aggregate",50],"(",")",";",["T_WHITESPACE","\n\n                ",50],["T_VARIABLE","$this",52],["T_OBJECT_OPERATOR","->",52],["T_STRING","messageManager",52],["T_OBJECT_OPERATOR","->",52],["T_STRING","addSuccess",52],"(",["T_STRING","__",52],"(",["T_CONSTANT_ENCAPSED_STRING","'You saved the review.'",52],")",")",";",["T_WHITESPACE","\n                ",52],["T_IF","if",53],["T_WHITESPACE"," ",53],"(",["T_VARIABLE","$this",53],["T_OBJECT_OPERATOR","->",53],["T_STRING","getRequest",53],"(",")",["T_OBJECT_OPERATOR","->",53],["T_STRING","getParam",53],"(",["T_CONSTANT_ENCAPSED_STRING","'ret'",53],")",["T_WHITESPACE"," ",53],["T_IS_EQUAL","==",53],["T_WHITESPACE"," ",53],["T_CONSTANT_ENCAPSED_STRING","'pending'",53],")",["T_WHITESPACE"," ",53],"{",["T_WHITESPACE","\n                    ",53],["T_VARIABLE","$resultRedirect",54],["T_OBJECT_OPERATOR","->",54],["T_STRING","setPath",54],"(",["T_CONSTANT_ENCAPSED_STRING","'review\/*\/pending'",54],")",";",["T_WHITESPACE","\n                ",54],"}",["T_WHITESPACE"," ",55],["T_ELSE","else",55],["T_WHITESPACE"," ",55],"{",["T_WHITESPACE","\n                    ",55],["T_VARIABLE","$resultRedirect",56],["T_OBJECT_OPERATOR","->",56],["T_STRING","setPath",56],"(",["T_CONSTANT_ENCAPSED_STRING","'review\/*\/'",56],")",";",["T_WHITESPACE","\n                ",56],"}",["T_WHITESPACE","\n                ",57],["T_RETURN","return",58],["T_WHITESPACE"," ",58],["T_VARIABLE","$resultRedirect",58],";",["T_WHITESPACE","\n            ",58],"}",["T_WHITESPACE"," ",59],["T_CATCH","catch",59],["T_WHITESPACE"," ",59],"(",["T_STRING","LocalizedException",59],["T_WHITESPACE"," ",59],["T_VARIABLE","$e",59],")",["T_WHITESPACE"," ",59],"{",["T_WHITESPACE","\n                ",59],["T_VARIABLE","$this",60],["T_OBJECT_OPERATOR","->",60],["T_STRING","messageManager",60],["T_OBJECT_OPERATOR","->",60],["T_STRING","addError",60],"(",["T_VARIABLE","$e",60],["T_OBJECT_OPERATOR","->",60],["T_STRING","getMessage",60],"(",")",")",";",["T_WHITESPACE","\n            ",60],"}",["T_WHITESPACE"," ",61],["T_CATCH","catch",61],["T_WHITESPACE"," ",61],"(",["T_NS_SEPARATOR","\\",61],["T_STRING","Exception",61],["T_WHITESPACE"," ",61],["T_VARIABLE","$e",61],")",["T_WHITESPACE"," ",61],"{",["T_WHITESPACE","\n                ",61],["T_VARIABLE","$this",62],["T_OBJECT_OPERATOR","->",62],["T_STRING","messageManager",62],["T_OBJECT_OPERATOR","->",62],["T_STRING","addException",62],"(",["T_VARIABLE","$e",62],",",["T_WHITESPACE"," ",62],["T_STRING","__",62],"(",["T_CONSTANT_ENCAPSED_STRING","'Something went wrong while saving this review.'",62],")",")",";",["T_WHITESPACE","\n            ",62],"}",["T_WHITESPACE","\n        ",63],"}",["T_WHITESPACE","\n        ",64],["T_VARIABLE","$resultRedirect",65],["T_OBJECT_OPERATOR","->",65],["T_STRING","setPath",65],"(",["T_CONSTANT_ENCAPSED_STRING","'review\/*\/'",65],")",";",["T_WHITESPACE","\n        ",65],["T_RETURN","return",66],["T_WHITESPACE"," ",66],["T_VARIABLE","$resultRedirect",66],";",["T_WHITESPACE","\n    ",66],"}",["T_WHITESPACE","\n",67],"}",["T_WHITESPACE","\n",68]]
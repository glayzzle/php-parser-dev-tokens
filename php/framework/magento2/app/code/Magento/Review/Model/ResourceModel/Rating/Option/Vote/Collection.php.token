[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Copyright \u00c2\u00a9 2013-2017 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n *\/",2],["T_WHITESPACE","\n",5],["T_NAMESPACE","namespace",6],["T_WHITESPACE"," ",6],["T_STRING","Magento",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Review",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Model",6],["T_NS_SEPARATOR","\\",6],["T_STRING","ResourceModel",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Rating",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Option",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Vote",6],";",["T_WHITESPACE","\n\n",6],["T_DOC_COMMENT","\/**\n * Rating votes collection\n *\n * @author      Magento Core Team <core@magentocommerce.com>\n *\/",8],["T_WHITESPACE","\n",12],["T_CLASS","class",13],["T_WHITESPACE"," ",13],["T_STRING","Collection",13],["T_WHITESPACE"," ",13],["T_EXTENDS","extends",13],["T_WHITESPACE"," ",13],["T_NS_SEPARATOR","\\",13],["T_STRING","Magento",13],["T_NS_SEPARATOR","\\",13],["T_STRING","Framework",13],["T_NS_SEPARATOR","\\",13],["T_STRING","Model",13],["T_NS_SEPARATOR","\\",13],["T_STRING","ResourceModel",13],["T_NS_SEPARATOR","\\",13],["T_STRING","Db",13],["T_NS_SEPARATOR","\\",13],["T_STRING","Collection",13],["T_NS_SEPARATOR","\\",13],["T_STRING","AbstractCollection",13],["T_WHITESPACE","\n",13],"{",["T_WHITESPACE","\n    ",14],["T_DOC_COMMENT","\/**\n     * Store list manager\n     *\n     * @var \\Magento\\Store\\Model\\StoreManagerInterface\n     *\/",15],["T_WHITESPACE","\n    ",19],["T_PROTECTED","protected",20],["T_WHITESPACE"," ",20],["T_VARIABLE","$_storeManager",20],";",["T_WHITESPACE","\n\n    ",20],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Review\\Model\\ResourceModel\\Rating\\Option\\CollectionFactory\n     *\/",22],["T_WHITESPACE","\n    ",24],["T_PROTECTED","protected",25],["T_WHITESPACE"," ",25],["T_VARIABLE","$_ratingCollectionF",25],";",["T_WHITESPACE","\n\n    ",25],["T_DOC_COMMENT","\/**\n     * @param \\Magento\\Framework\\Data\\Collection\\EntityFactory $entityFactory\n     * @param \\Psr\\Log\\LoggerInterface $logger\n     * @param \\Magento\\Framework\\Data\\Collection\\Db\\FetchStrategyInterface $fetchStrategy\n     * @param \\Magento\\Framework\\Event\\ManagerInterface $eventManager\n     * @param \\Magento\\Store\\Model\\StoreManagerInterface $storeManager\n     * @param \\Magento\\Review\\Model\\ResourceModel\\Rating\\Option\\CollectionFactory $ratingCollectionF\n     * @param mixed $connection\n     * @param \\Magento\\Framework\\Model\\ResourceModel\\Db\\AbstractDb $resource\n     *\/",27],["T_WHITESPACE","\n    ",36],["T_PUBLIC","public",37],["T_WHITESPACE"," ",37],["T_FUNCTION","function",37],["T_WHITESPACE"," ",37],["T_STRING","__construct",37],"(",["T_WHITESPACE","\n        ",37],["T_NS_SEPARATOR","\\",38],["T_STRING","Magento",38],["T_NS_SEPARATOR","\\",38],["T_STRING","Framework",38],["T_NS_SEPARATOR","\\",38],["T_STRING","Data",38],["T_NS_SEPARATOR","\\",38],["T_STRING","Collection",38],["T_NS_SEPARATOR","\\",38],["T_STRING","EntityFactory",38],["T_WHITESPACE"," ",38],["T_VARIABLE","$entityFactory",38],",",["T_WHITESPACE","\n        ",38],["T_NS_SEPARATOR","\\",39],["T_STRING","Psr",39],["T_NS_SEPARATOR","\\",39],["T_STRING","Log",39],["T_NS_SEPARATOR","\\",39],["T_STRING","LoggerInterface",39],["T_WHITESPACE"," ",39],["T_VARIABLE","$logger",39],",",["T_WHITESPACE","\n        ",39],["T_NS_SEPARATOR","\\",40],["T_STRING","Magento",40],["T_NS_SEPARATOR","\\",40],["T_STRING","Framework",40],["T_NS_SEPARATOR","\\",40],["T_STRING","Data",40],["T_NS_SEPARATOR","\\",40],["T_STRING","Collection",40],["T_NS_SEPARATOR","\\",40],["T_STRING","Db",40],["T_NS_SEPARATOR","\\",40],["T_STRING","FetchStrategyInterface",40],["T_WHITESPACE"," ",40],["T_VARIABLE","$fetchStrategy",40],",",["T_WHITESPACE","\n        ",40],["T_NS_SEPARATOR","\\",41],["T_STRING","Magento",41],["T_NS_SEPARATOR","\\",41],["T_STRING","Framework",41],["T_NS_SEPARATOR","\\",41],["T_STRING","Event",41],["T_NS_SEPARATOR","\\",41],["T_STRING","ManagerInterface",41],["T_WHITESPACE"," ",41],["T_VARIABLE","$eventManager",41],",",["T_WHITESPACE","\n        ",41],["T_NS_SEPARATOR","\\",42],["T_STRING","Magento",42],["T_NS_SEPARATOR","\\",42],["T_STRING","Store",42],["T_NS_SEPARATOR","\\",42],["T_STRING","Model",42],["T_NS_SEPARATOR","\\",42],["T_STRING","StoreManagerInterface",42],["T_WHITESPACE"," ",42],["T_VARIABLE","$storeManager",42],",",["T_WHITESPACE","\n        ",42],["T_NS_SEPARATOR","\\",43],["T_STRING","Magento",43],["T_NS_SEPARATOR","\\",43],["T_STRING","Review",43],["T_NS_SEPARATOR","\\",43],["T_STRING","Model",43],["T_NS_SEPARATOR","\\",43],["T_STRING","ResourceModel",43],["T_NS_SEPARATOR","\\",43],["T_STRING","Rating",43],["T_NS_SEPARATOR","\\",43],["T_STRING","Option",43],["T_NS_SEPARATOR","\\",43],["T_STRING","CollectionFactory",43],["T_WHITESPACE"," ",43],["T_VARIABLE","$ratingCollectionF",43],",",["T_WHITESPACE","\n        ",43],["T_NS_SEPARATOR","\\",44],["T_STRING","Magento",44],["T_NS_SEPARATOR","\\",44],["T_STRING","Framework",44],["T_NS_SEPARATOR","\\",44],["T_STRING","DB",44],["T_NS_SEPARATOR","\\",44],["T_STRING","Adapter",44],["T_NS_SEPARATOR","\\",44],["T_STRING","AdapterInterface",44],["T_WHITESPACE"," ",44],["T_VARIABLE","$connection",44],["T_WHITESPACE"," ",44],"=",["T_WHITESPACE"," ",44],["T_STRING","null",44],",",["T_WHITESPACE","\n        ",44],["T_NS_SEPARATOR","\\",45],["T_STRING","Magento",45],["T_NS_SEPARATOR","\\",45],["T_STRING","Framework",45],["T_NS_SEPARATOR","\\",45],["T_STRING","Model",45],["T_NS_SEPARATOR","\\",45],["T_STRING","ResourceModel",45],["T_NS_SEPARATOR","\\",45],["T_STRING","Db",45],["T_NS_SEPARATOR","\\",45],["T_STRING","AbstractDb",45],["T_WHITESPACE"," ",45],["T_VARIABLE","$resource",45],["T_WHITESPACE"," ",45],"=",["T_WHITESPACE"," ",45],["T_STRING","null",45],["T_WHITESPACE","\n    ",45],")",["T_WHITESPACE"," ",46],"{",["T_WHITESPACE","\n        ",46],["T_VARIABLE","$this",47],["T_OBJECT_OPERATOR","->",47],["T_STRING","_storeManager",47],["T_WHITESPACE"," ",47],"=",["T_WHITESPACE"," ",47],["T_VARIABLE","$storeManager",47],";",["T_WHITESPACE","\n        ",47],["T_VARIABLE","$this",48],["T_OBJECT_OPERATOR","->",48],["T_STRING","_ratingCollectionF",48],["T_WHITESPACE"," ",48],"=",["T_WHITESPACE"," ",48],["T_VARIABLE","$ratingCollectionF",48],";",["T_WHITESPACE","\n        ",48],["T_STRING","parent",49],["T_DOUBLE_COLON","::",49],["T_STRING","__construct",49],"(",["T_VARIABLE","$entityFactory",49],",",["T_WHITESPACE"," ",49],["T_VARIABLE","$logger",49],",",["T_WHITESPACE"," ",49],["T_VARIABLE","$fetchStrategy",49],",",["T_WHITESPACE"," ",49],["T_VARIABLE","$eventManager",49],",",["T_WHITESPACE"," ",49],["T_VARIABLE","$connection",49],",",["T_WHITESPACE"," ",49],["T_VARIABLE","$resource",49],")",";",["T_WHITESPACE","\n    ",49],"}",["T_WHITESPACE","\n\n    ",50],["T_DOC_COMMENT","\/**\n     * Define model\n     *\n     * @return void\n     *\/",52],["T_WHITESPACE","\n    ",56],["T_PROTECTED","protected",57],["T_WHITESPACE"," ",57],["T_FUNCTION","function",57],["T_WHITESPACE"," ",57],["T_STRING","_construct",57],"(",")",["T_WHITESPACE","\n    ",57],"{",["T_WHITESPACE","\n        ",58],["T_VARIABLE","$this",59],["T_OBJECT_OPERATOR","->",59],["T_STRING","_init",59],"(",["T_WHITESPACE","\n            ",59],["T_NS_SEPARATOR","\\",60],["T_STRING","Magento",60],["T_NS_SEPARATOR","\\",60],["T_STRING","Review",60],["T_NS_SEPARATOR","\\",60],["T_STRING","Model",60],["T_NS_SEPARATOR","\\",60],["T_STRING","Rating",60],["T_NS_SEPARATOR","\\",60],["T_STRING","Option",60],["T_NS_SEPARATOR","\\",60],["T_STRING","Vote",60],["T_DOUBLE_COLON","::",60],["T_CLASS","class",60],",",["T_WHITESPACE","\n            ",60],["T_NS_SEPARATOR","\\",61],["T_STRING","Magento",61],["T_NS_SEPARATOR","\\",61],["T_STRING","Review",61],["T_NS_SEPARATOR","\\",61],["T_STRING","Model",61],["T_NS_SEPARATOR","\\",61],["T_STRING","ResourceModel",61],["T_NS_SEPARATOR","\\",61],["T_STRING","Rating",61],["T_NS_SEPARATOR","\\",61],["T_STRING","Option",61],["T_NS_SEPARATOR","\\",61],["T_STRING","Vote",61],["T_DOUBLE_COLON","::",61],["T_CLASS","class",61],["T_WHITESPACE","\n        ",61],")",";",["T_WHITESPACE","\n    ",62],"}",["T_WHITESPACE","\n\n    ",63],["T_DOC_COMMENT","\/**\n     * Set review filter\n     *\n     * @param int $reviewId\n     * @return $this\n     *\/",65],["T_WHITESPACE","\n    ",70],["T_PUBLIC","public",71],["T_WHITESPACE"," ",71],["T_FUNCTION","function",71],["T_WHITESPACE"," ",71],["T_STRING","setReviewFilter",71],"(",["T_VARIABLE","$reviewId",71],")",["T_WHITESPACE","\n    ",71],"{",["T_WHITESPACE","\n        ",72],["T_VARIABLE","$this",73],["T_OBJECT_OPERATOR","->",73],["T_STRING","getSelect",73],"(",")",["T_OBJECT_OPERATOR","->",73],["T_STRING","where",73],"(",["T_CONSTANT_ENCAPSED_STRING","\"main_table.review_id = ?\"",73],",",["T_WHITESPACE"," ",73],["T_VARIABLE","$reviewId",73],")",";",["T_WHITESPACE","\n        ",73],["T_RETURN","return",74],["T_WHITESPACE"," ",74],["T_VARIABLE","$this",74],";",["T_WHITESPACE","\n    ",74],"}",["T_WHITESPACE","\n\n    ",75],["T_DOC_COMMENT","\/**\n     * Set EntityPk filter\n     *\n     * @param int $entityId\n     * @return $this\n     *\/",77],["T_WHITESPACE","\n    ",82],["T_PUBLIC","public",83],["T_WHITESPACE"," ",83],["T_FUNCTION","function",83],["T_WHITESPACE"," ",83],["T_STRING","setEntityPkFilter",83],"(",["T_VARIABLE","$entityId",83],")",["T_WHITESPACE","\n    ",83],"{",["T_WHITESPACE","\n        ",84],["T_VARIABLE","$this",85],["T_OBJECT_OPERATOR","->",85],["T_STRING","getSelect",85],"(",")",["T_OBJECT_OPERATOR","->",85],["T_STRING","where",85],"(",["T_CONSTANT_ENCAPSED_STRING","\"entity_pk_value = ?\"",85],",",["T_WHITESPACE"," ",85],["T_VARIABLE","$entityId",85],")",";",["T_WHITESPACE","\n        ",85],["T_RETURN","return",86],["T_WHITESPACE"," ",86],["T_VARIABLE","$this",86],";",["T_WHITESPACE","\n    ",86],"}",["T_WHITESPACE","\n\n    ",87],["T_DOC_COMMENT","\/**\n     * Set store filter\n     *\n     * @param int $storeId\n     * @return $this\n     *\/",89],["T_WHITESPACE","\n    ",94],["T_PUBLIC","public",95],["T_WHITESPACE"," ",95],["T_FUNCTION","function",95],["T_WHITESPACE"," ",95],["T_STRING","setStoreFilter",95],"(",["T_VARIABLE","$storeId",95],")",["T_WHITESPACE","\n    ",95],"{",["T_WHITESPACE","\n        ",96],["T_IF","if",97],["T_WHITESPACE"," ",97],"(",["T_VARIABLE","$this",97],["T_OBJECT_OPERATOR","->",97],["T_STRING","_storeManager",97],["T_OBJECT_OPERATOR","->",97],["T_STRING","isSingleStoreMode",97],"(",")",")",["T_WHITESPACE"," ",97],"{",["T_WHITESPACE","\n            ",97],["T_RETURN","return",98],["T_WHITESPACE"," ",98],["T_VARIABLE","$this",98],";",["T_WHITESPACE","\n        ",98],"}",["T_WHITESPACE","\n        ",99],["T_VARIABLE","$this",100],["T_OBJECT_OPERATOR","->",100],["T_STRING","getSelect",100],"(",")",["T_OBJECT_OPERATOR","->",100],["T_STRING","join",100],"(",["T_WHITESPACE","\n            ",100],"[",["T_CONSTANT_ENCAPSED_STRING","'rstore'",101],["T_WHITESPACE"," ",101],["T_DOUBLE_ARROW","=>",101],["T_WHITESPACE"," ",101],["T_VARIABLE","$this",101],["T_OBJECT_OPERATOR","->",101],["T_STRING","getTable",101],"(",["T_CONSTANT_ENCAPSED_STRING","'review_store'",101],")","]",",",["T_WHITESPACE","\n            ",101],["T_VARIABLE","$this",102],["T_OBJECT_OPERATOR","->",102],["T_STRING","getConnection",102],"(",")",["T_OBJECT_OPERATOR","->",102],["T_STRING","quoteInto",102],"(",["T_WHITESPACE","\n                ",102],["T_CONSTANT_ENCAPSED_STRING","'main_table.review_id=rstore.review_id AND rstore.store_id=?'",103],",",["T_WHITESPACE","\n                ",103],["T_INT_CAST","(int)",104],["T_VARIABLE","$storeId",104],["T_WHITESPACE","\n            ",104],")",",",["T_WHITESPACE","\n            ",105],"[","]",["T_WHITESPACE","\n        ",106],")",";",["T_WHITESPACE","\n        ",107],["T_RETURN","return",108],["T_WHITESPACE"," ",108],["T_VARIABLE","$this",108],";",["T_WHITESPACE","\n    ",108],"}",["T_WHITESPACE","\n\n    ",109],["T_DOC_COMMENT","\/**\n     * Add rating info to select\n     *\n     * @param int $storeId\n     * @return $this\n     *\/",111],["T_WHITESPACE","\n    ",116],["T_PUBLIC","public",117],["T_WHITESPACE"," ",117],["T_FUNCTION","function",117],["T_WHITESPACE"," ",117],["T_STRING","addRatingInfo",117],"(",["T_VARIABLE","$storeId",117],["T_WHITESPACE"," ",117],"=",["T_WHITESPACE"," ",117],["T_STRING","null",117],")",["T_WHITESPACE","\n    ",117],"{",["T_WHITESPACE","\n        ",118],["T_VARIABLE","$connection",119],["T_WHITESPACE"," ",119],"=",["T_WHITESPACE"," ",119],["T_VARIABLE","$this",119],["T_OBJECT_OPERATOR","->",119],["T_STRING","getConnection",119],"(",")",";",["T_WHITESPACE","\n        ",119],["T_VARIABLE","$ratingCodeCond",120],["T_WHITESPACE"," ",120],"=",["T_WHITESPACE"," ",120],["T_VARIABLE","$connection",120],["T_OBJECT_OPERATOR","->",120],["T_STRING","getIfNullSql",120],"(",["T_CONSTANT_ENCAPSED_STRING","'title.value'",120],",",["T_WHITESPACE"," ",120],["T_CONSTANT_ENCAPSED_STRING","'rating.rating_code'",120],")",";",["T_WHITESPACE","\n        ",120],["T_VARIABLE","$this",121],["T_OBJECT_OPERATOR","->",121],["T_STRING","getSelect",121],"(",")",["T_OBJECT_OPERATOR","->",121],["T_STRING","join",121],"(",["T_WHITESPACE","\n            ",121],"[",["T_CONSTANT_ENCAPSED_STRING","'rating'",122],["T_WHITESPACE"," ",122],["T_DOUBLE_ARROW","=>",122],["T_WHITESPACE"," ",122],["T_VARIABLE","$this",122],["T_OBJECT_OPERATOR","->",122],["T_STRING","getTable",122],"(",["T_CONSTANT_ENCAPSED_STRING","'rating'",122],")","]",",",["T_WHITESPACE","\n            ",122],["T_CONSTANT_ENCAPSED_STRING","'rating.rating_id = main_table.rating_id'",123],",",["T_WHITESPACE","\n            ",123],"[",["T_CONSTANT_ENCAPSED_STRING","'rating_code'",124],"]",["T_WHITESPACE","\n        ",124],")",["T_OBJECT_OPERATOR","->",125],["T_STRING","joinLeft",125],"(",["T_WHITESPACE","\n            ",125],"[",["T_CONSTANT_ENCAPSED_STRING","'title'",126],["T_WHITESPACE"," ",126],["T_DOUBLE_ARROW","=>",126],["T_WHITESPACE"," ",126],["T_VARIABLE","$this",126],["T_OBJECT_OPERATOR","->",126],["T_STRING","getTable",126],"(",["T_CONSTANT_ENCAPSED_STRING","'rating_title'",126],")","]",",",["T_WHITESPACE","\n            ",126],["T_VARIABLE","$connection",127],["T_OBJECT_OPERATOR","->",127],["T_STRING","quoteInto",127],"(",["T_WHITESPACE","\n                ",127],["T_CONSTANT_ENCAPSED_STRING","'main_table.rating_id=title.rating_id AND title.store_id = ?'",128],",",["T_WHITESPACE","\n                ",128],["T_INT_CAST","(int)",129],["T_VARIABLE","$this",129],["T_OBJECT_OPERATOR","->",129],["T_STRING","_storeManager",129],["T_OBJECT_OPERATOR","->",129],["T_STRING","getStore",129],"(",")",["T_OBJECT_OPERATOR","->",129],["T_STRING","getId",129],"(",")",["T_WHITESPACE","\n            ",129],")",",",["T_WHITESPACE","\n            ",130],"[",["T_CONSTANT_ENCAPSED_STRING","'rating_code'",131],["T_WHITESPACE"," ",131],["T_DOUBLE_ARROW","=>",131],["T_WHITESPACE"," ",131],["T_VARIABLE","$ratingCodeCond",131],"]",["T_WHITESPACE","\n        ",131],")",";",["T_WHITESPACE","\n        ",132],["T_IF","if",133],["T_WHITESPACE"," ",133],"(","!",["T_VARIABLE","$this",133],["T_OBJECT_OPERATOR","->",133],["T_STRING","_storeManager",133],["T_OBJECT_OPERATOR","->",133],["T_STRING","isSingleStoreMode",133],"(",")",")",["T_WHITESPACE"," ",133],"{",["T_WHITESPACE","\n            ",133],["T_IF","if",134],["T_WHITESPACE"," ",134],"(",["T_VARIABLE","$storeId",134],["T_WHITESPACE"," ",134],["T_IS_EQUAL","==",134],["T_WHITESPACE"," ",134],["T_STRING","null",134],")",["T_WHITESPACE"," ",134],"{",["T_WHITESPACE","\n                ",134],["T_VARIABLE","$storeId",135],["T_WHITESPACE"," ",135],"=",["T_WHITESPACE"," ",135],["T_VARIABLE","$this",135],["T_OBJECT_OPERATOR","->",135],["T_STRING","_storeManager",135],["T_OBJECT_OPERATOR","->",135],["T_STRING","getStore",135],"(",")",["T_OBJECT_OPERATOR","->",135],["T_STRING","getId",135],"(",")",";",["T_WHITESPACE","\n            ",135],"}",["T_WHITESPACE","\n\n            ",136],["T_IF","if",138],["T_WHITESPACE"," ",138],"(",["T_STRING","is_array",138],"(",["T_VARIABLE","$storeId",138],")",")",["T_WHITESPACE"," ",138],"{",["T_WHITESPACE","\n                ",138],["T_VARIABLE","$condition",139],["T_WHITESPACE"," ",139],"=",["T_WHITESPACE"," ",139],["T_VARIABLE","$connection",139],["T_OBJECT_OPERATOR","->",139],["T_STRING","prepareSqlCondition",139],"(",["T_CONSTANT_ENCAPSED_STRING","'store.store_id'",139],",",["T_WHITESPACE"," ",139],"[",["T_CONSTANT_ENCAPSED_STRING","'in'",139],["T_WHITESPACE"," ",139],["T_DOUBLE_ARROW","=>",139],["T_WHITESPACE"," ",139],["T_VARIABLE","$storeId",139],"]",")",";",["T_WHITESPACE","\n            ",139],"}",["T_WHITESPACE"," ",140],["T_ELSE","else",140],["T_WHITESPACE"," ",140],"{",["T_WHITESPACE","\n                ",140],["T_VARIABLE","$condition",141],["T_WHITESPACE"," ",141],"=",["T_WHITESPACE"," ",141],["T_VARIABLE","$connection",141],["T_OBJECT_OPERATOR","->",141],["T_STRING","quoteInto",141],"(",["T_CONSTANT_ENCAPSED_STRING","'store.store_id = ?'",141],",",["T_WHITESPACE"," ",141],["T_VARIABLE","$storeId",141],")",";",["T_WHITESPACE","\n            ",141],"}",["T_WHITESPACE","\n\n            ",142],["T_VARIABLE","$this",144],["T_OBJECT_OPERATOR","->",144],["T_STRING","getSelect",144],"(",")",["T_OBJECT_OPERATOR","->",144],["T_STRING","join",144],"(",["T_WHITESPACE","\n                ",144],"[",["T_CONSTANT_ENCAPSED_STRING","'store'",145],["T_WHITESPACE"," ",145],["T_DOUBLE_ARROW","=>",145],["T_WHITESPACE"," ",145],["T_VARIABLE","$this",145],["T_OBJECT_OPERATOR","->",145],["T_STRING","getTable",145],"(",["T_CONSTANT_ENCAPSED_STRING","'rating_store'",145],")","]",",",["T_WHITESPACE","\n                ",145],["T_CONSTANT_ENCAPSED_STRING","'main_table.rating_id = store.rating_id AND '",146],["T_WHITESPACE"," ",146],".",["T_WHITESPACE"," ",146],["T_VARIABLE","$condition",146],["T_WHITESPACE","\n            ",146],")",";",["T_WHITESPACE","\n        ",147],"}",["T_WHITESPACE","\n        ",148],["T_VARIABLE","$connection",149],["T_OBJECT_OPERATOR","->",149],["T_STRING","fetchAll",149],"(",["T_VARIABLE","$this",149],["T_OBJECT_OPERATOR","->",149],["T_STRING","getSelect",149],"(",")",")",";",["T_WHITESPACE","\n        ",149],["T_RETURN","return",150],["T_WHITESPACE"," ",150],["T_VARIABLE","$this",150],";",["T_WHITESPACE","\n    ",150],"}",["T_WHITESPACE","\n\n    ",151],["T_DOC_COMMENT","\/**\n     * Add option info to select\n     *\n     * @return $this\n     *\/",153],["T_WHITESPACE","\n    ",157],["T_PUBLIC","public",158],["T_WHITESPACE"," ",158],["T_FUNCTION","function",158],["T_WHITESPACE"," ",158],["T_STRING","addOptionInfo",158],"(",")",["T_WHITESPACE","\n    ",158],"{",["T_WHITESPACE","\n        ",159],["T_VARIABLE","$this",160],["T_OBJECT_OPERATOR","->",160],["T_STRING","getSelect",160],"(",")",["T_OBJECT_OPERATOR","->",160],["T_STRING","join",160],"(",["T_WHITESPACE","\n            ",160],"[",["T_CONSTANT_ENCAPSED_STRING","'rating_option'",161],["T_WHITESPACE"," ",161],["T_DOUBLE_ARROW","=>",161],["T_WHITESPACE"," ",161],["T_VARIABLE","$this",161],["T_OBJECT_OPERATOR","->",161],["T_STRING","getTable",161],"(",["T_CONSTANT_ENCAPSED_STRING","'rating_option'",161],")","]",",",["T_WHITESPACE","\n            ",161],["T_CONSTANT_ENCAPSED_STRING","'main_table.option_id = rating_option.option_id'",162],["T_WHITESPACE","\n        ",162],")",";",["T_WHITESPACE","\n        ",163],["T_RETURN","return",164],["T_WHITESPACE"," ",164],["T_VARIABLE","$this",164],";",["T_WHITESPACE","\n    ",164],"}",["T_WHITESPACE","\n\n    ",165],["T_DOC_COMMENT","\/**\n     * Add rating options\n     *\n     * @return $this\n     *\/",167],["T_WHITESPACE","\n    ",171],["T_PUBLIC","public",172],["T_WHITESPACE"," ",172],["T_FUNCTION","function",172],["T_WHITESPACE"," ",172],["T_STRING","addRatingOptions",172],"(",")",["T_WHITESPACE","\n    ",172],"{",["T_WHITESPACE","\n        ",173],["T_IF","if",174],["T_WHITESPACE"," ",174],"(","!",["T_VARIABLE","$this",174],["T_OBJECT_OPERATOR","->",174],["T_STRING","getSize",174],"(",")",")",["T_WHITESPACE"," ",174],"{",["T_WHITESPACE","\n            ",174],["T_RETURN","return",175],["T_WHITESPACE"," ",175],["T_VARIABLE","$this",175],";",["T_WHITESPACE","\n        ",175],"}",["T_WHITESPACE","\n        ",176],["T_FOREACH","foreach",177],["T_WHITESPACE"," ",177],"(",["T_VARIABLE","$this",177],["T_OBJECT_OPERATOR","->",177],["T_STRING","getItems",177],"(",")",["T_WHITESPACE"," ",177],["T_AS","as",177],["T_WHITESPACE"," ",177],["T_VARIABLE","$item",177],")",["T_WHITESPACE"," ",177],"{",["T_WHITESPACE","\n            ",177],["T_DOC_COMMENT","\/** @var \\Magento\\Review\\Model\\ResourceModel\\Rating\\Option\\Collection $options *\/",178],["T_WHITESPACE","\n            ",178],["T_VARIABLE","$options",179],["T_WHITESPACE"," ",179],"=",["T_WHITESPACE"," ",179],["T_VARIABLE","$this",179],["T_OBJECT_OPERATOR","->",179],["T_STRING","_ratingCollectionF",179],["T_OBJECT_OPERATOR","->",179],["T_STRING","create",179],"(",")",";",["T_WHITESPACE","\n            ",179],["T_VARIABLE","$options",180],["T_OBJECT_OPERATOR","->",180],["T_STRING","addRatingFilter",180],"(",["T_VARIABLE","$item",180],["T_OBJECT_OPERATOR","->",180],["T_STRING","getRatingId",180],"(",")",")",["T_OBJECT_OPERATOR","->",180],["T_STRING","load",180],"(",")",";",["T_WHITESPACE","\n\n            ",180],["T_IF","if",182],["T_WHITESPACE"," ",182],"(",["T_VARIABLE","$item",182],["T_OBJECT_OPERATOR","->",182],["T_STRING","getRatingId",182],"(",")",")",["T_WHITESPACE"," ",182],"{",["T_WHITESPACE","\n                ",182],["T_VARIABLE","$item",183],["T_OBJECT_OPERATOR","->",183],["T_STRING","setRatingOptions",183],"(",["T_VARIABLE","$options",183],")",";",["T_WHITESPACE","\n            ",183],"}",["T_WHITESPACE"," ",184],["T_ELSE","else",184],["T_WHITESPACE"," ",184],"{",["T_WHITESPACE","\n                ",184],["T_RETURN","return",185],["T_WHITESPACE"," ",185],["T_VARIABLE","$this",185],";",["T_WHITESPACE","\n            ",185],"}",["T_WHITESPACE","\n        ",186],"}",["T_WHITESPACE","\n        ",187],["T_RETURN","return",188],["T_WHITESPACE"," ",188],["T_VARIABLE","$this",188],";",["T_WHITESPACE","\n    ",188],"}",["T_WHITESPACE","\n",189],"}",["T_WHITESPACE","\n",190]]
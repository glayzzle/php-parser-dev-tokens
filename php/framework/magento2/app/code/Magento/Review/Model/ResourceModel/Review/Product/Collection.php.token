[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Copyright \u00c2\u00a9 2013-2017 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n *\/",2],["T_WHITESPACE","\n",5],["T_NAMESPACE","namespace",6],["T_WHITESPACE"," ",6],["T_STRING","Magento",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Review",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Model",6],["T_NS_SEPARATOR","\\",6],["T_STRING","ResourceModel",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Review",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Product",6],";",["T_WHITESPACE","\n\n",6],["T_USE","use",8],["T_WHITESPACE"," ",8],["T_STRING","Magento",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Eav",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Model",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Entity",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Attribute",8],["T_NS_SEPARATOR","\\",8],["T_STRING","AbstractAttribute",8],";",["T_WHITESPACE","\n",8],["T_USE","use",9],["T_WHITESPACE"," ",9],["T_STRING","Magento",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Framework",9],["T_NS_SEPARATOR","\\",9],["T_STRING","DB",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Select",9],";",["T_WHITESPACE","\n",9],["T_USE","use",10],["T_WHITESPACE"," ",10],["T_STRING","Magento",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Framework",10],["T_NS_SEPARATOR","\\",10],["T_STRING","EntityManager",10],["T_NS_SEPARATOR","\\",10],["T_STRING","MetadataPool",10],";",["T_WHITESPACE","\n",10],["T_USE","use",11],["T_WHITESPACE"," ",11],["T_STRING","Magento",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Catalog",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Model",11],["T_NS_SEPARATOR","\\",11],["T_STRING","ResourceModel",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Product",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Collection",11],["T_NS_SEPARATOR","\\",11],["T_STRING","ProductLimitationFactory",11],";",["T_WHITESPACE","\n\n",11],["T_DOC_COMMENT","\/**\n * Review Product Collection\n *\n * @author      Magento Core Team <core@magentocommerce.com>\n * @SuppressWarnings(PHPMD.CouplingBetweenObjects)\n *\/",13],["T_WHITESPACE","\n",18],["T_CLASS","class",19],["T_WHITESPACE"," ",19],["T_STRING","Collection",19],["T_WHITESPACE"," ",19],["T_EXTENDS","extends",19],["T_WHITESPACE"," ",19],["T_NS_SEPARATOR","\\",19],["T_STRING","Magento",19],["T_NS_SEPARATOR","\\",19],["T_STRING","Catalog",19],["T_NS_SEPARATOR","\\",19],["T_STRING","Model",19],["T_NS_SEPARATOR","\\",19],["T_STRING","ResourceModel",19],["T_NS_SEPARATOR","\\",19],["T_STRING","Product",19],["T_NS_SEPARATOR","\\",19],["T_STRING","Collection",19],["T_WHITESPACE","\n",19],"{",["T_WHITESPACE","\n    ",20],["T_DOC_COMMENT","\/**\n     * Entities alias\n     *\n     * @var array\n     *\/",21],["T_WHITESPACE","\n    ",25],["T_PROTECTED","protected",26],["T_WHITESPACE"," ",26],["T_VARIABLE","$_entitiesAlias",26],["T_WHITESPACE"," ",26],"=",["T_WHITESPACE"," ",26],"[","]",";",["T_WHITESPACE","\n\n    ",26],["T_DOC_COMMENT","\/**\n     * Review store table\n     *\n     * @var string\n     *\/",28],["T_WHITESPACE","\n    ",32],["T_PROTECTED","protected",33],["T_WHITESPACE"," ",33],["T_VARIABLE","$_reviewStoreTable",33],";",["T_WHITESPACE","\n\n    ",33],["T_DOC_COMMENT","\/**\n     * Add store data flag\n     *\n     * @var bool\n     *\/",35],["T_WHITESPACE","\n    ",39],["T_PROTECTED","protected",40],["T_WHITESPACE"," ",40],["T_VARIABLE","$_addStoreDataFlag",40],["T_WHITESPACE"," ",40],"=",["T_WHITESPACE"," ",40],["T_STRING","false",40],";",["T_WHITESPACE","\n\n    ",40],["T_DOC_COMMENT","\/**\n     * Filter by stores for the collection\n     *\n     * @var array\n     *\/",42],["T_WHITESPACE","\n    ",46],["T_PROTECTED","protected",47],["T_WHITESPACE"," ",47],["T_VARIABLE","$_storesIds",47],["T_WHITESPACE"," ",47],"=",["T_WHITESPACE"," ",47],"[","]",";",["T_WHITESPACE","\n\n    ",47],["T_DOC_COMMENT","\/**\n     * Rating model\n     *\n     * @var \\Magento\\Review\\Model\\RatingFactory\n     *\/",49],["T_WHITESPACE","\n    ",53],["T_PROTECTED","protected",54],["T_WHITESPACE"," ",54],["T_VARIABLE","$_ratingFactory",54],";",["T_WHITESPACE","\n\n    ",54],["T_DOC_COMMENT","\/**\n     * Rating option vote model\n     *\n     * @var \\Magento\\Review\\Model\\Rating\\Option\\VoteFactory\n     *\/",56],["T_WHITESPACE","\n    ",60],["T_PROTECTED","protected",61],["T_WHITESPACE"," ",61],["T_VARIABLE","$_voteFactory",61],";",["T_WHITESPACE","\n\n    ",61],["T_DOC_COMMENT","\/**\n     * Collection constructor\n     *\n     * @param \\Magento\\Framework\\Data\\Collection\\EntityFactory $entityFactory\n     * @param \\Psr\\Log\\LoggerInterface $logger\n     * @param \\Magento\\Framework\\Data\\Collection\\Db\\FetchStrategyInterface $fetchStrategy\n     * @param \\Magento\\Framework\\Event\\ManagerInterface $eventManager\n     * @param \\Magento\\Eav\\Model\\Config $eavConfig\n     * @param \\Magento\\Framework\\App\\ResourceConnection $resource\n     * @param \\Magento\\Eav\\Model\\EntityFactory $eavEntityFactory\n     * @param \\Magento\\Catalog\\Model\\ResourceModel\\Helper $resourceHelper\n     * @param \\Magento\\Framework\\Validator\\UniversalFactory $universalFactory\n     * @param \\Magento\\Store\\Model\\StoreManagerInterface $storeManager\n     * @param \\Magento\\Framework\\Module\\Manager $moduleManager\n     * @param \\Magento\\Catalog\\Model\\Indexer\\Product\\Flat\\State $catalogProductFlatState\n     * @param \\Magento\\Framework\\App\\Config\\ScopeConfigInterface $scopeConfig\n     * @param \\Magento\\Catalog\\Model\\Product\\OptionFactory $productOptionFactory\n     * @param \\Magento\\Catalog\\Model\\ResourceModel\\Url $catalogUrl\n     * @param \\Magento\\Framework\\Stdlib\\DateTime\\TimezoneInterface $localeDate\n     * @param \\Magento\\Customer\\Model\\Session $customerSession\n     * @param \\Magento\\Framework\\Stdlib\\DateTime $dateTime\n     * @param \\Magento\\Customer\\Api\\GroupManagementInterface $groupManagement\n     * @param \\Magento\\Review\\Model\\RatingFactory $ratingFactory\n     * @param \\Magento\\Review\\Model\\Rating\\Option\\VoteFactory $voteFactory\n     * @param \\Magento\\Framework\\DB\\Adapter\\AdapterInterface|null $connection\n     * @param ProductLimitationFactory|null $productLimitationFactory\n     * @param MetadataPool|null $metadataPool\n     *\n     * @SuppressWarnings(PHPMD.ExcessiveParameterList)\n     *\/",63],["T_WHITESPACE","\n    ",92],["T_PUBLIC","public",93],["T_WHITESPACE"," ",93],["T_FUNCTION","function",93],["T_WHITESPACE"," ",93],["T_STRING","__construct",93],"(",["T_WHITESPACE","\n        ",93],["T_NS_SEPARATOR","\\",94],["T_STRING","Magento",94],["T_NS_SEPARATOR","\\",94],["T_STRING","Framework",94],["T_NS_SEPARATOR","\\",94],["T_STRING","Data",94],["T_NS_SEPARATOR","\\",94],["T_STRING","Collection",94],["T_NS_SEPARATOR","\\",94],["T_STRING","EntityFactory",94],["T_WHITESPACE"," ",94],["T_VARIABLE","$entityFactory",94],",",["T_WHITESPACE","\n        ",94],["T_NS_SEPARATOR","\\",95],["T_STRING","Psr",95],["T_NS_SEPARATOR","\\",95],["T_STRING","Log",95],["T_NS_SEPARATOR","\\",95],["T_STRING","LoggerInterface",95],["T_WHITESPACE"," ",95],["T_VARIABLE","$logger",95],",",["T_WHITESPACE","\n        ",95],["T_NS_SEPARATOR","\\",96],["T_STRING","Magento",96],["T_NS_SEPARATOR","\\",96],["T_STRING","Framework",96],["T_NS_SEPARATOR","\\",96],["T_STRING","Data",96],["T_NS_SEPARATOR","\\",96],["T_STRING","Collection",96],["T_NS_SEPARATOR","\\",96],["T_STRING","Db",96],["T_NS_SEPARATOR","\\",96],["T_STRING","FetchStrategyInterface",96],["T_WHITESPACE"," ",96],["T_VARIABLE","$fetchStrategy",96],",",["T_WHITESPACE","\n        ",96],["T_NS_SEPARATOR","\\",97],["T_STRING","Magento",97],["T_NS_SEPARATOR","\\",97],["T_STRING","Framework",97],["T_NS_SEPARATOR","\\",97],["T_STRING","Event",97],["T_NS_SEPARATOR","\\",97],["T_STRING","ManagerInterface",97],["T_WHITESPACE"," ",97],["T_VARIABLE","$eventManager",97],",",["T_WHITESPACE","\n        ",97],["T_NS_SEPARATOR","\\",98],["T_STRING","Magento",98],["T_NS_SEPARATOR","\\",98],["T_STRING","Eav",98],["T_NS_SEPARATOR","\\",98],["T_STRING","Model",98],["T_NS_SEPARATOR","\\",98],["T_STRING","Config",98],["T_WHITESPACE"," ",98],["T_VARIABLE","$eavConfig",98],",",["T_WHITESPACE","\n        ",98],["T_NS_SEPARATOR","\\",99],["T_STRING","Magento",99],["T_NS_SEPARATOR","\\",99],["T_STRING","Framework",99],["T_NS_SEPARATOR","\\",99],["T_STRING","App",99],["T_NS_SEPARATOR","\\",99],["T_STRING","ResourceConnection",99],["T_WHITESPACE"," ",99],["T_VARIABLE","$resource",99],",",["T_WHITESPACE","\n        ",99],["T_NS_SEPARATOR","\\",100],["T_STRING","Magento",100],["T_NS_SEPARATOR","\\",100],["T_STRING","Eav",100],["T_NS_SEPARATOR","\\",100],["T_STRING","Model",100],["T_NS_SEPARATOR","\\",100],["T_STRING","EntityFactory",100],["T_WHITESPACE"," ",100],["T_VARIABLE","$eavEntityFactory",100],",",["T_WHITESPACE","\n        ",100],["T_NS_SEPARATOR","\\",101],["T_STRING","Magento",101],["T_NS_SEPARATOR","\\",101],["T_STRING","Catalog",101],["T_NS_SEPARATOR","\\",101],["T_STRING","Model",101],["T_NS_SEPARATOR","\\",101],["T_STRING","ResourceModel",101],["T_NS_SEPARATOR","\\",101],["T_STRING","Helper",101],["T_WHITESPACE"," ",101],["T_VARIABLE","$resourceHelper",101],",",["T_WHITESPACE","\n        ",101],["T_NS_SEPARATOR","\\",102],["T_STRING","Magento",102],["T_NS_SEPARATOR","\\",102],["T_STRING","Framework",102],["T_NS_SEPARATOR","\\",102],["T_STRING","Validator",102],["T_NS_SEPARATOR","\\",102],["T_STRING","UniversalFactory",102],["T_WHITESPACE"," ",102],["T_VARIABLE","$universalFactory",102],",",["T_WHITESPACE","\n        ",102],["T_NS_SEPARATOR","\\",103],["T_STRING","Magento",103],["T_NS_SEPARATOR","\\",103],["T_STRING","Store",103],["T_NS_SEPARATOR","\\",103],["T_STRING","Model",103],["T_NS_SEPARATOR","\\",103],["T_STRING","StoreManagerInterface",103],["T_WHITESPACE"," ",103],["T_VARIABLE","$storeManager",103],",",["T_WHITESPACE","\n        ",103],["T_NS_SEPARATOR","\\",104],["T_STRING","Magento",104],["T_NS_SEPARATOR","\\",104],["T_STRING","Framework",104],["T_NS_SEPARATOR","\\",104],["T_STRING","Module",104],["T_NS_SEPARATOR","\\",104],["T_STRING","Manager",104],["T_WHITESPACE"," ",104],["T_VARIABLE","$moduleManager",104],",",["T_WHITESPACE","\n        ",104],["T_NS_SEPARATOR","\\",105],["T_STRING","Magento",105],["T_NS_SEPARATOR","\\",105],["T_STRING","Catalog",105],["T_NS_SEPARATOR","\\",105],["T_STRING","Model",105],["T_NS_SEPARATOR","\\",105],["T_STRING","Indexer",105],["T_NS_SEPARATOR","\\",105],["T_STRING","Product",105],["T_NS_SEPARATOR","\\",105],["T_STRING","Flat",105],["T_NS_SEPARATOR","\\",105],["T_STRING","State",105],["T_WHITESPACE"," ",105],["T_VARIABLE","$catalogProductFlatState",105],",",["T_WHITESPACE","\n        ",105],["T_NS_SEPARATOR","\\",106],["T_STRING","Magento",106],["T_NS_SEPARATOR","\\",106],["T_STRING","Framework",106],["T_NS_SEPARATOR","\\",106],["T_STRING","App",106],["T_NS_SEPARATOR","\\",106],["T_STRING","Config",106],["T_NS_SEPARATOR","\\",106],["T_STRING","ScopeConfigInterface",106],["T_WHITESPACE"," ",106],["T_VARIABLE","$scopeConfig",106],",",["T_WHITESPACE","\n        ",106],["T_NS_SEPARATOR","\\",107],["T_STRING","Magento",107],["T_NS_SEPARATOR","\\",107],["T_STRING","Catalog",107],["T_NS_SEPARATOR","\\",107],["T_STRING","Model",107],["T_NS_SEPARATOR","\\",107],["T_STRING","Product",107],["T_NS_SEPARATOR","\\",107],["T_STRING","OptionFactory",107],["T_WHITESPACE"," ",107],["T_VARIABLE","$productOptionFactory",107],",",["T_WHITESPACE","\n        ",107],["T_NS_SEPARATOR","\\",108],["T_STRING","Magento",108],["T_NS_SEPARATOR","\\",108],["T_STRING","Catalog",108],["T_NS_SEPARATOR","\\",108],["T_STRING","Model",108],["T_NS_SEPARATOR","\\",108],["T_STRING","ResourceModel",108],["T_NS_SEPARATOR","\\",108],["T_STRING","Url",108],["T_WHITESPACE"," ",108],["T_VARIABLE","$catalogUrl",108],",",["T_WHITESPACE","\n        ",108],["T_NS_SEPARATOR","\\",109],["T_STRING","Magento",109],["T_NS_SEPARATOR","\\",109],["T_STRING","Framework",109],["T_NS_SEPARATOR","\\",109],["T_STRING","Stdlib",109],["T_NS_SEPARATOR","\\",109],["T_STRING","DateTime",109],["T_NS_SEPARATOR","\\",109],["T_STRING","TimezoneInterface",109],["T_WHITESPACE"," ",109],["T_VARIABLE","$localeDate",109],",",["T_WHITESPACE","\n        ",109],["T_NS_SEPARATOR","\\",110],["T_STRING","Magento",110],["T_NS_SEPARATOR","\\",110],["T_STRING","Customer",110],["T_NS_SEPARATOR","\\",110],["T_STRING","Model",110],["T_NS_SEPARATOR","\\",110],["T_STRING","Session",110],["T_WHITESPACE"," ",110],["T_VARIABLE","$customerSession",110],",",["T_WHITESPACE","\n        ",110],["T_NS_SEPARATOR","\\",111],["T_STRING","Magento",111],["T_NS_SEPARATOR","\\",111],["T_STRING","Framework",111],["T_NS_SEPARATOR","\\",111],["T_STRING","Stdlib",111],["T_NS_SEPARATOR","\\",111],["T_STRING","DateTime",111],["T_WHITESPACE"," ",111],["T_VARIABLE","$dateTime",111],",",["T_WHITESPACE","\n        ",111],["T_NS_SEPARATOR","\\",112],["T_STRING","Magento",112],["T_NS_SEPARATOR","\\",112],["T_STRING","Customer",112],["T_NS_SEPARATOR","\\",112],["T_STRING","Api",112],["T_NS_SEPARATOR","\\",112],["T_STRING","GroupManagementInterface",112],["T_WHITESPACE"," ",112],["T_VARIABLE","$groupManagement",112],",",["T_WHITESPACE","\n        ",112],["T_NS_SEPARATOR","\\",113],["T_STRING","Magento",113],["T_NS_SEPARATOR","\\",113],["T_STRING","Review",113],["T_NS_SEPARATOR","\\",113],["T_STRING","Model",113],["T_NS_SEPARATOR","\\",113],["T_STRING","RatingFactory",113],["T_WHITESPACE"," ",113],["T_VARIABLE","$ratingFactory",113],",",["T_WHITESPACE","\n        ",113],["T_NS_SEPARATOR","\\",114],["T_STRING","Magento",114],["T_NS_SEPARATOR","\\",114],["T_STRING","Review",114],["T_NS_SEPARATOR","\\",114],["T_STRING","Model",114],["T_NS_SEPARATOR","\\",114],["T_STRING","Rating",114],["T_NS_SEPARATOR","\\",114],["T_STRING","Option",114],["T_NS_SEPARATOR","\\",114],["T_STRING","VoteFactory",114],["T_WHITESPACE"," ",114],["T_VARIABLE","$voteFactory",114],",",["T_WHITESPACE","\n        ",114],["T_NS_SEPARATOR","\\",115],["T_STRING","Magento",115],["T_NS_SEPARATOR","\\",115],["T_STRING","Framework",115],["T_NS_SEPARATOR","\\",115],["T_STRING","DB",115],["T_NS_SEPARATOR","\\",115],["T_STRING","Adapter",115],["T_NS_SEPARATOR","\\",115],["T_STRING","AdapterInterface",115],["T_WHITESPACE"," ",115],["T_VARIABLE","$connection",115],["T_WHITESPACE"," ",115],"=",["T_WHITESPACE"," ",115],["T_STRING","null",115],",",["T_WHITESPACE","\n        ",115],["T_STRING","ProductLimitationFactory",116],["T_WHITESPACE"," ",116],["T_VARIABLE","$productLimitationFactory",116],["T_WHITESPACE"," ",116],"=",["T_WHITESPACE"," ",116],["T_STRING","null",116],",",["T_WHITESPACE","\n        ",116],["T_STRING","MetadataPool",117],["T_WHITESPACE"," ",117],["T_VARIABLE","$metadataPool",117],["T_WHITESPACE"," ",117],"=",["T_WHITESPACE"," ",117],["T_STRING","null",117],["T_WHITESPACE","\n    ",117],")",["T_WHITESPACE"," ",118],"{",["T_WHITESPACE","\n        ",118],["T_VARIABLE","$this",119],["T_OBJECT_OPERATOR","->",119],["T_STRING","_ratingFactory",119],["T_WHITESPACE"," ",119],"=",["T_WHITESPACE"," ",119],["T_VARIABLE","$ratingFactory",119],";",["T_WHITESPACE","\n        ",119],["T_VARIABLE","$this",120],["T_OBJECT_OPERATOR","->",120],["T_STRING","_voteFactory",120],["T_WHITESPACE"," ",120],"=",["T_WHITESPACE"," ",120],["T_VARIABLE","$voteFactory",120],";",["T_WHITESPACE","\n        ",120],["T_STRING","parent",121],["T_DOUBLE_COLON","::",121],["T_STRING","__construct",121],"(",["T_WHITESPACE","\n            ",121],["T_VARIABLE","$entityFactory",122],",",["T_WHITESPACE","\n            ",122],["T_VARIABLE","$logger",123],",",["T_WHITESPACE","\n            ",123],["T_VARIABLE","$fetchStrategy",124],",",["T_WHITESPACE","\n            ",124],["T_VARIABLE","$eventManager",125],",",["T_WHITESPACE","\n            ",125],["T_VARIABLE","$eavConfig",126],",",["T_WHITESPACE","\n            ",126],["T_VARIABLE","$resource",127],",",["T_WHITESPACE","\n            ",127],["T_VARIABLE","$eavEntityFactory",128],",",["T_WHITESPACE","\n            ",128],["T_VARIABLE","$resourceHelper",129],",",["T_WHITESPACE","\n            ",129],["T_VARIABLE","$universalFactory",130],",",["T_WHITESPACE","\n            ",130],["T_VARIABLE","$storeManager",131],",",["T_WHITESPACE","\n            ",131],["T_VARIABLE","$moduleManager",132],",",["T_WHITESPACE","\n            ",132],["T_VARIABLE","$catalogProductFlatState",133],",",["T_WHITESPACE","\n            ",133],["T_VARIABLE","$scopeConfig",134],",",["T_WHITESPACE","\n            ",134],["T_VARIABLE","$productOptionFactory",135],",",["T_WHITESPACE","\n            ",135],["T_VARIABLE","$catalogUrl",136],",",["T_WHITESPACE","\n            ",136],["T_VARIABLE","$localeDate",137],",",["T_WHITESPACE","\n            ",137],["T_VARIABLE","$customerSession",138],",",["T_WHITESPACE","\n            ",138],["T_VARIABLE","$dateTime",139],",",["T_WHITESPACE","\n            ",139],["T_VARIABLE","$groupManagement",140],",",["T_WHITESPACE","\n            ",140],["T_VARIABLE","$connection",141],",",["T_WHITESPACE","\n            ",141],["T_VARIABLE","$productLimitationFactory",142],",",["T_WHITESPACE","\n            ",142],["T_VARIABLE","$metadataPool",143],["T_WHITESPACE","\n        ",143],")",";",["T_WHITESPACE","\n    ",144],"}",["T_WHITESPACE","\n\n    ",145],["T_DOC_COMMENT","\/**\n     * Define module\n     *\n     * @return void\n     *\/",147],["T_WHITESPACE","\n    ",151],["T_PROTECTED","protected",152],["T_WHITESPACE"," ",152],["T_FUNCTION","function",152],["T_WHITESPACE"," ",152],["T_STRING","_construct",152],"(",")",["T_WHITESPACE","\n    ",152],"{",["T_WHITESPACE","\n        ",153],["T_VARIABLE","$this",154],["T_OBJECT_OPERATOR","->",154],["T_STRING","_init",154],"(",["T_NS_SEPARATOR","\\",154],["T_STRING","Magento",154],["T_NS_SEPARATOR","\\",154],["T_STRING","Catalog",154],["T_NS_SEPARATOR","\\",154],["T_STRING","Model",154],["T_NS_SEPARATOR","\\",154],["T_STRING","Product",154],["T_DOUBLE_COLON","::",154],["T_CLASS","class",154],",",["T_WHITESPACE"," ",154],["T_NS_SEPARATOR","\\",154],["T_STRING","Magento",154],["T_NS_SEPARATOR","\\",154],["T_STRING","Catalog",154],["T_NS_SEPARATOR","\\",154],["T_STRING","Model",154],["T_NS_SEPARATOR","\\",154],["T_STRING","ResourceModel",154],["T_NS_SEPARATOR","\\",154],["T_STRING","Product",154],["T_DOUBLE_COLON","::",154],["T_CLASS","class",154],")",";",["T_WHITESPACE","\n        ",154],["T_VARIABLE","$this",155],["T_OBJECT_OPERATOR","->",155],["T_STRING","setRowIdFieldName",155],"(",["T_CONSTANT_ENCAPSED_STRING","'review_id'",155],")",";",["T_WHITESPACE","\n        ",155],["T_VARIABLE","$this",156],["T_OBJECT_OPERATOR","->",156],["T_STRING","_reviewStoreTable",156],["T_WHITESPACE"," ",156],"=",["T_WHITESPACE"," ",156],["T_VARIABLE","$this",156],["T_OBJECT_OPERATOR","->",156],["T_STRING","_resource",156],["T_OBJECT_OPERATOR","->",156],["T_STRING","getTableName",156],"(",["T_CONSTANT_ENCAPSED_STRING","'review_store'",156],")",";",["T_WHITESPACE","\n        ",156],["T_VARIABLE","$this",157],["T_OBJECT_OPERATOR","->",157],["T_STRING","_initTables",157],"(",")",";",["T_WHITESPACE","\n    ",157],"}",["T_WHITESPACE","\n\n    ",158],["T_DOC_COMMENT","\/**\n     * Initialize select\n     *\n     * @return $this\n     *\/",160],["T_WHITESPACE","\n    ",164],["T_PROTECTED","protected",165],["T_WHITESPACE"," ",165],["T_FUNCTION","function",165],["T_WHITESPACE"," ",165],["T_STRING","_initSelect",165],"(",")",["T_WHITESPACE","\n    ",165],"{",["T_WHITESPACE","\n        ",166],["T_STRING","parent",167],["T_DOUBLE_COLON","::",167],["T_STRING","_initSelect",167],"(",")",";",["T_WHITESPACE","\n        ",167],["T_VARIABLE","$this",168],["T_OBJECT_OPERATOR","->",168],["T_STRING","_joinFields",168],"(",")",";",["T_WHITESPACE","\n        ",168],["T_RETURN","return",169],["T_WHITESPACE"," ",169],["T_VARIABLE","$this",169],";",["T_WHITESPACE","\n    ",169],"}",["T_WHITESPACE","\n\n    ",170],["T_DOC_COMMENT","\/**\n     * Adds store filter into array\n     *\n     * @param int|int[] $storeId\n     * @return $this\n     *\/",172],["T_WHITESPACE","\n    ",177],["T_PUBLIC","public",178],["T_WHITESPACE"," ",178],["T_FUNCTION","function",178],["T_WHITESPACE"," ",178],["T_STRING","addStoreFilter",178],"(",["T_VARIABLE","$storeId",178],["T_WHITESPACE"," ",178],"=",["T_WHITESPACE"," ",178],["T_STRING","null",178],")",["T_WHITESPACE","\n    ",178],"{",["T_WHITESPACE","\n        ",179],["T_IF","if",180],["T_WHITESPACE"," ",180],"(",["T_STRING","null",180],["T_WHITESPACE"," ",180],["T_IS_IDENTICAL","===",180],["T_WHITESPACE"," ",180],["T_VARIABLE","$storeId",180],")",["T_WHITESPACE"," ",180],"{",["T_WHITESPACE","\n            ",180],["T_VARIABLE","$storeId",181],["T_WHITESPACE"," ",181],"=",["T_WHITESPACE"," ",181],["T_VARIABLE","$this",181],["T_OBJECT_OPERATOR","->",181],["T_STRING","getStoreId",181],"(",")",";",["T_WHITESPACE","\n        ",181],"}",["T_WHITESPACE","\n\n        ",182],["T_STRING","parent",184],["T_DOUBLE_COLON","::",184],["T_STRING","addStoreFilter",184],"(",["T_VARIABLE","$storeId",184],")",";",["T_WHITESPACE","\n\n        ",184],["T_IF","if",186],["T_WHITESPACE"," ",186],"(","!",["T_STRING","is_array",186],"(",["T_VARIABLE","$storeId",186],")",")",["T_WHITESPACE"," ",186],"{",["T_WHITESPACE","\n            ",186],["T_VARIABLE","$storeId",187],["T_WHITESPACE"," ",187],"=",["T_WHITESPACE"," ",187],"[",["T_VARIABLE","$storeId",187],"]",";",["T_WHITESPACE","\n        ",187],"}",["T_WHITESPACE","\n\n        ",188],["T_IF","if",190],["T_WHITESPACE"," ",190],"(","!",["T_EMPTY","empty",190],"(",["T_VARIABLE","$this",190],["T_OBJECT_OPERATOR","->",190],["T_STRING","_storesIds",190],")",")",["T_WHITESPACE"," ",190],"{",["T_WHITESPACE","\n            ",190],["T_VARIABLE","$this",191],["T_OBJECT_OPERATOR","->",191],["T_STRING","_storesIds",191],["T_WHITESPACE"," ",191],"=",["T_WHITESPACE"," ",191],["T_STRING","array_intersect",191],"(",["T_VARIABLE","$this",191],["T_OBJECT_OPERATOR","->",191],["T_STRING","_storesIds",191],",",["T_WHITESPACE"," ",191],["T_VARIABLE","$storeId",191],")",";",["T_WHITESPACE","\n        ",191],"}",["T_WHITESPACE"," ",192],["T_ELSE","else",192],["T_WHITESPACE"," ",192],"{",["T_WHITESPACE","\n            ",192],["T_VARIABLE","$this",193],["T_OBJECT_OPERATOR","->",193],["T_STRING","_storesIds",193],["T_WHITESPACE"," ",193],"=",["T_WHITESPACE"," ",193],["T_VARIABLE","$storeId",193],";",["T_WHITESPACE","\n        ",193],"}",["T_WHITESPACE","\n\n        ",194],["T_RETURN","return",196],["T_WHITESPACE"," ",196],["T_VARIABLE","$this",196],";",["T_WHITESPACE","\n    ",196],"}",["T_WHITESPACE","\n\n    ",197],["T_DOC_COMMENT","\/**\n     * Adds specific store id into array\n     *\n     * @param array $storeId\n     * @return $this\n     *\/",199],["T_WHITESPACE","\n    ",204],["T_PUBLIC","public",205],["T_WHITESPACE"," ",205],["T_FUNCTION","function",205],["T_WHITESPACE"," ",205],["T_STRING","setStoreFilter",205],"(",["T_VARIABLE","$storeId",205],")",["T_WHITESPACE","\n    ",205],"{",["T_WHITESPACE","\n        ",206],["T_IF","if",207],["T_WHITESPACE"," ",207],"(",["T_STRING","is_array",207],"(",["T_VARIABLE","$storeId",207],")",["T_WHITESPACE"," ",207],["T_BOOLEAN_AND","&&",207],["T_WHITESPACE"," ",207],["T_ISSET","isset",207],"(",["T_VARIABLE","$storeId",207],"[",["T_CONSTANT_ENCAPSED_STRING","'eq'",207],"]",")",")",["T_WHITESPACE"," ",207],"{",["T_WHITESPACE","\n            ",207],["T_VARIABLE","$storeId",208],["T_WHITESPACE"," ",208],"=",["T_WHITESPACE"," ",208],["T_STRING","array_shift",208],"(",["T_VARIABLE","$storeId",208],")",";",["T_WHITESPACE","\n        ",208],"}",["T_WHITESPACE","\n\n        ",209],["T_IF","if",211],["T_WHITESPACE"," ",211],"(","!",["T_STRING","is_array",211],"(",["T_VARIABLE","$storeId",211],")",")",["T_WHITESPACE"," ",211],"{",["T_WHITESPACE","\n            ",211],["T_VARIABLE","$storeId",212],["T_WHITESPACE"," ",212],"=",["T_WHITESPACE"," ",212],"[",["T_VARIABLE","$storeId",212],"]",";",["T_WHITESPACE","\n        ",212],"}",["T_WHITESPACE","\n\n        ",213],["T_IF","if",215],["T_WHITESPACE"," ",215],"(","!",["T_EMPTY","empty",215],"(",["T_VARIABLE","$this",215],["T_OBJECT_OPERATOR","->",215],["T_STRING","_storesIds",215],")",")",["T_WHITESPACE"," ",215],"{",["T_WHITESPACE","\n            ",215],["T_VARIABLE","$this",216],["T_OBJECT_OPERATOR","->",216],["T_STRING","_storesIds",216],["T_WHITESPACE"," ",216],"=",["T_WHITESPACE"," ",216],["T_STRING","array_intersect",216],"(",["T_VARIABLE","$this",216],["T_OBJECT_OPERATOR","->",216],["T_STRING","_storesIds",216],",",["T_WHITESPACE"," ",216],["T_VARIABLE","$storeId",216],")",";",["T_WHITESPACE","\n        ",216],"}",["T_WHITESPACE"," ",217],["T_ELSE","else",217],["T_WHITESPACE"," ",217],"{",["T_WHITESPACE","\n            ",217],["T_VARIABLE","$this",218],["T_OBJECT_OPERATOR","->",218],["T_STRING","_storesIds",218],["T_WHITESPACE"," ",218],"=",["T_WHITESPACE"," ",218],["T_VARIABLE","$storeId",218],";",["T_WHITESPACE","\n        ",218],"}",["T_WHITESPACE","\n\n        ",219],["T_RETURN","return",221],["T_WHITESPACE"," ",221],["T_VARIABLE","$this",221],";",["T_WHITESPACE","\n    ",221],"}",["T_WHITESPACE","\n\n    ",222],["T_DOC_COMMENT","\/**\n     * Applies all store filters in one place to prevent multiple joins in select\n     *\n     * @param Select $select\n     * @return $this\n     *\/",224],["T_WHITESPACE","\n    ",229],["T_PROTECTED","protected",230],["T_WHITESPACE"," ",230],["T_FUNCTION","function",230],["T_WHITESPACE"," ",230],["T_STRING","_applyStoresFilterToSelect",230],"(",["T_STRING","Select",230],["T_WHITESPACE"," ",230],["T_VARIABLE","$select",230],["T_WHITESPACE"," ",230],"=",["T_WHITESPACE"," ",230],["T_STRING","null",230],")",["T_WHITESPACE","\n    ",230],"{",["T_WHITESPACE","\n        ",231],["T_VARIABLE","$connection",232],["T_WHITESPACE"," ",232],"=",["T_WHITESPACE"," ",232],["T_VARIABLE","$this",232],["T_OBJECT_OPERATOR","->",232],["T_STRING","getConnection",232],"(",")",";",["T_WHITESPACE","\n        ",232],["T_VARIABLE","$storesIds",233],["T_WHITESPACE"," ",233],"=",["T_WHITESPACE"," ",233],["T_VARIABLE","$this",233],["T_OBJECT_OPERATOR","->",233],["T_STRING","_storesIds",233],";",["T_WHITESPACE","\n        ",233],["T_IF","if",234],["T_WHITESPACE"," ",234],"(",["T_STRING","null",234],["T_WHITESPACE"," ",234],["T_IS_IDENTICAL","===",234],["T_WHITESPACE"," ",234],["T_VARIABLE","$select",234],")",["T_WHITESPACE"," ",234],"{",["T_WHITESPACE","\n            ",234],["T_VARIABLE","$select",235],["T_WHITESPACE"," ",235],"=",["T_WHITESPACE"," ",235],["T_VARIABLE","$this",235],["T_OBJECT_OPERATOR","->",235],["T_STRING","getSelect",235],"(",")",";",["T_WHITESPACE","\n        ",235],"}",["T_WHITESPACE","\n\n        ",236],["T_IF","if",238],["T_WHITESPACE"," ",238],"(",["T_STRING","is_array",238],"(",["T_VARIABLE","$storesIds",238],")",["T_WHITESPACE"," ",238],["T_BOOLEAN_AND","&&",238],["T_WHITESPACE"," ",238],["T_STRING","count",238],"(",["T_VARIABLE","$storesIds",238],")",["T_WHITESPACE"," ",238],["T_IS_EQUAL","==",238],["T_WHITESPACE"," ",238],["T_LNUMBER","1",238],")",["T_WHITESPACE"," ",238],"{",["T_WHITESPACE","\n            ",238],["T_VARIABLE","$storesIds",239],["T_WHITESPACE"," ",239],"=",["T_WHITESPACE"," ",239],["T_STRING","array_shift",239],"(",["T_VARIABLE","$storesIds",239],")",";",["T_WHITESPACE","\n        ",239],"}",["T_WHITESPACE","\n\n        ",240],["T_IF","if",242],["T_WHITESPACE"," ",242],"(",["T_STRING","is_array",242],"(",["T_VARIABLE","$storesIds",242],")",["T_WHITESPACE"," ",242],["T_BOOLEAN_AND","&&",242],["T_WHITESPACE"," ",242],"!",["T_EMPTY","empty",242],"(",["T_VARIABLE","$storesIds",242],")",")",["T_WHITESPACE"," ",242],"{",["T_WHITESPACE","\n            ",242],["T_VARIABLE","$inCond",243],["T_WHITESPACE"," ",243],"=",["T_WHITESPACE"," ",243],["T_VARIABLE","$connection",243],["T_OBJECT_OPERATOR","->",243],["T_STRING","prepareSqlCondition",243],"(",["T_CONSTANT_ENCAPSED_STRING","'store.store_id'",243],",",["T_WHITESPACE"," ",243],"[",["T_CONSTANT_ENCAPSED_STRING","'in'",243],["T_WHITESPACE"," ",243],["T_DOUBLE_ARROW","=>",243],["T_WHITESPACE"," ",243],["T_VARIABLE","$storesIds",243],"]",")",";",["T_WHITESPACE","\n            ",243],["T_VARIABLE","$select",244],["T_OBJECT_OPERATOR","->",244],["T_STRING","join",244],"(",["T_WHITESPACE","\n                ",244],"[",["T_CONSTANT_ENCAPSED_STRING","'store'",245],["T_WHITESPACE"," ",245],["T_DOUBLE_ARROW","=>",245],["T_WHITESPACE"," ",245],["T_VARIABLE","$this",245],["T_OBJECT_OPERATOR","->",245],["T_STRING","_reviewStoreTable",245],"]",",",["T_WHITESPACE","\n                ",245],["T_CONSTANT_ENCAPSED_STRING","'rt.review_id=store.review_id AND '",246],["T_WHITESPACE"," ",246],".",["T_WHITESPACE"," ",246],["T_VARIABLE","$inCond",246],",",["T_WHITESPACE","\n                ",246],"[","]",["T_WHITESPACE","\n            ",247],")",["T_OBJECT_OPERATOR","->",248],["T_STRING","group",248],"(",["T_WHITESPACE","\n                ",248],["T_CONSTANT_ENCAPSED_STRING","'rt.review_id'",249],["T_WHITESPACE","\n            ",249],")",";",["T_WHITESPACE","\n        ",250],"}",["T_WHITESPACE"," ",251],["T_ELSE","else",251],["T_WHITESPACE"," ",251],"{",["T_WHITESPACE","\n            ",251],["T_VARIABLE","$select",252],["T_OBJECT_OPERATOR","->",252],["T_STRING","join",252],"(",["T_WHITESPACE","\n                ",252],"[",["T_CONSTANT_ENCAPSED_STRING","'store'",253],["T_WHITESPACE"," ",253],["T_DOUBLE_ARROW","=>",253],["T_WHITESPACE"," ",253],["T_VARIABLE","$this",253],["T_OBJECT_OPERATOR","->",253],["T_STRING","_reviewStoreTable",253],"]",",",["T_WHITESPACE","\n                ",253],["T_VARIABLE","$connection",254],["T_OBJECT_OPERATOR","->",254],["T_STRING","quoteInto",254],"(",["T_CONSTANT_ENCAPSED_STRING","'rt.review_id=store.review_id AND store.store_id = ?'",254],",",["T_WHITESPACE"," ",254],["T_INT_CAST","(int)",254],["T_VARIABLE","$storesIds",254],")",",",["T_WHITESPACE","\n                ",254],"[","]",["T_WHITESPACE","\n            ",255],")",";",["T_WHITESPACE","\n        ",256],"}",["T_WHITESPACE","\n\n        ",257],["T_RETURN","return",259],["T_WHITESPACE"," ",259],["T_VARIABLE","$this",259],";",["T_WHITESPACE","\n    ",259],"}",["T_WHITESPACE","\n\n    ",260],["T_DOC_COMMENT","\/**\n     * Add stores data\n     *\n     * @return $this\n     *\/",262],["T_WHITESPACE","\n    ",266],["T_PUBLIC","public",267],["T_WHITESPACE"," ",267],["T_FUNCTION","function",267],["T_WHITESPACE"," ",267],["T_STRING","addStoreData",267],"(",")",["T_WHITESPACE","\n    ",267],"{",["T_WHITESPACE","\n        ",268],["T_VARIABLE","$this",269],["T_OBJECT_OPERATOR","->",269],["T_STRING","_addStoreDataFlag",269],["T_WHITESPACE"," ",269],"=",["T_WHITESPACE"," ",269],["T_STRING","true",269],";",["T_WHITESPACE","\n        ",269],["T_RETURN","return",270],["T_WHITESPACE"," ",270],["T_VARIABLE","$this",270],";",["T_WHITESPACE","\n    ",270],"}",["T_WHITESPACE","\n\n    ",271],["T_DOC_COMMENT","\/**\n     * Add customer filter\n     *\n     * @param int $customerId\n     * @return $this\n     *\/",273],["T_WHITESPACE","\n    ",278],["T_PUBLIC","public",279],["T_WHITESPACE"," ",279],["T_FUNCTION","function",279],["T_WHITESPACE"," ",279],["T_STRING","addCustomerFilter",279],"(",["T_VARIABLE","$customerId",279],")",["T_WHITESPACE","\n    ",279],"{",["T_WHITESPACE","\n        ",280],["T_VARIABLE","$this",281],["T_OBJECT_OPERATOR","->",281],["T_STRING","getSelect",281],"(",")",["T_OBJECT_OPERATOR","->",281],["T_STRING","where",281],"(",["T_CONSTANT_ENCAPSED_STRING","'rdt.customer_id = ?'",281],",",["T_WHITESPACE"," ",281],["T_VARIABLE","$customerId",281],")",";",["T_WHITESPACE","\n        ",281],["T_RETURN","return",282],["T_WHITESPACE"," ",282],["T_VARIABLE","$this",282],";",["T_WHITESPACE","\n    ",282],"}",["T_WHITESPACE","\n\n    ",283],["T_DOC_COMMENT","\/**\n     * Add entity filter\n     *\n     * @param int $entityId\n     * @return $this\n     *\/",285],["T_WHITESPACE","\n    ",290],["T_PUBLIC","public",291],["T_WHITESPACE"," ",291],["T_FUNCTION","function",291],["T_WHITESPACE"," ",291],["T_STRING","addEntityFilter",291],"(",["T_VARIABLE","$entityId",291],")",["T_WHITESPACE","\n    ",291],"{",["T_WHITESPACE","\n        ",292],["T_VARIABLE","$this",293],["T_OBJECT_OPERATOR","->",293],["T_STRING","getSelect",293],"(",")",["T_OBJECT_OPERATOR","->",293],["T_STRING","where",293],"(",["T_CONSTANT_ENCAPSED_STRING","'rt.entity_pk_value = ?'",293],",",["T_WHITESPACE"," ",293],["T_VARIABLE","$entityId",293],")",";",["T_WHITESPACE","\n        ",293],["T_RETURN","return",294],["T_WHITESPACE"," ",294],["T_VARIABLE","$this",294],";",["T_WHITESPACE","\n    ",294],"}",["T_WHITESPACE","\n\n    ",295],["T_DOC_COMMENT","\/**\n     * Add status filter\n     *\n     * @param int $status\n     * @return $this\n     *\/",297],["T_WHITESPACE","\n    ",302],["T_PUBLIC","public",303],["T_WHITESPACE"," ",303],["T_FUNCTION","function",303],["T_WHITESPACE"," ",303],["T_STRING","addStatusFilter",303],"(",["T_VARIABLE","$status",303],")",["T_WHITESPACE","\n    ",303],"{",["T_WHITESPACE","\n        ",304],["T_VARIABLE","$this",305],["T_OBJECT_OPERATOR","->",305],["T_STRING","getSelect",305],"(",")",["T_OBJECT_OPERATOR","->",305],["T_STRING","where",305],"(",["T_CONSTANT_ENCAPSED_STRING","'rt.status_id = ?'",305],",",["T_WHITESPACE"," ",305],["T_VARIABLE","$status",305],")",";",["T_WHITESPACE","\n        ",305],["T_RETURN","return",306],["T_WHITESPACE"," ",306],["T_VARIABLE","$this",306],";",["T_WHITESPACE","\n    ",306],"}",["T_WHITESPACE","\n\n    ",307],["T_DOC_COMMENT","\/**\n     * Set date order\n     *\n     * @param string $dir\n     * @return $this\n     *\/",309],["T_WHITESPACE","\n    ",314],["T_PUBLIC","public",315],["T_WHITESPACE"," ",315],["T_FUNCTION","function",315],["T_WHITESPACE"," ",315],["T_STRING","setDateOrder",315],"(",["T_VARIABLE","$dir",315],["T_WHITESPACE"," ",315],"=",["T_WHITESPACE"," ",315],["T_CONSTANT_ENCAPSED_STRING","'DESC'",315],")",["T_WHITESPACE","\n    ",315],"{",["T_WHITESPACE","\n        ",316],["T_VARIABLE","$this",317],["T_OBJECT_OPERATOR","->",317],["T_STRING","setOrder",317],"(",["T_CONSTANT_ENCAPSED_STRING","'rt.created_at'",317],",",["T_WHITESPACE"," ",317],["T_VARIABLE","$dir",317],")",";",["T_WHITESPACE","\n        ",317],["T_RETURN","return",318],["T_WHITESPACE"," ",318],["T_VARIABLE","$this",318],";",["T_WHITESPACE","\n    ",318],"}",["T_WHITESPACE","\n\n    ",319],["T_DOC_COMMENT","\/**\n     * Add review summary\n     *\n     * @return $this\n     *\/",321],["T_WHITESPACE","\n    ",325],["T_PUBLIC","public",326],["T_WHITESPACE"," ",326],["T_FUNCTION","function",326],["T_WHITESPACE"," ",326],["T_STRING","addReviewSummary",326],"(",")",["T_WHITESPACE","\n    ",326],"{",["T_WHITESPACE","\n        ",327],["T_FOREACH","foreach",328],["T_WHITESPACE"," ",328],"(",["T_VARIABLE","$this",328],["T_OBJECT_OPERATOR","->",328],["T_STRING","getItems",328],"(",")",["T_WHITESPACE"," ",328],["T_AS","as",328],["T_WHITESPACE"," ",328],["T_VARIABLE","$item",328],")",["T_WHITESPACE"," ",328],"{",["T_WHITESPACE","\n            ",328],["T_VARIABLE","$model",329],["T_WHITESPACE"," ",329],"=",["T_WHITESPACE"," ",329],["T_VARIABLE","$this",329],["T_OBJECT_OPERATOR","->",329],["T_STRING","_ratingFactory",329],["T_OBJECT_OPERATOR","->",329],["T_STRING","create",329],"(",")",";",["T_WHITESPACE","\n            ",329],["T_VARIABLE","$model",330],["T_OBJECT_OPERATOR","->",330],["T_STRING","getReviewSummary",330],"(",["T_VARIABLE","$item",330],["T_OBJECT_OPERATOR","->",330],["T_STRING","getReviewId",330],"(",")",")",";",["T_WHITESPACE","\n            ",330],["T_VARIABLE","$item",331],["T_OBJECT_OPERATOR","->",331],["T_STRING","addData",331],"(",["T_VARIABLE","$model",331],["T_OBJECT_OPERATOR","->",331],["T_STRING","getData",331],"(",")",")",";",["T_WHITESPACE","\n        ",331],"}",["T_WHITESPACE","\n        ",332],["T_RETURN","return",333],["T_WHITESPACE"," ",333],["T_VARIABLE","$this",333],";",["T_WHITESPACE","\n    ",333],"}",["T_WHITESPACE","\n\n    ",334],["T_DOC_COMMENT","\/**\n     * Add rote votes\n     *\n     * @return $this\n     *\/",336],["T_WHITESPACE","\n    ",340],["T_PUBLIC","public",341],["T_WHITESPACE"," ",341],["T_FUNCTION","function",341],["T_WHITESPACE"," ",341],["T_STRING","addRateVotes",341],"(",")",["T_WHITESPACE","\n    ",341],"{",["T_WHITESPACE","\n        ",342],["T_FOREACH","foreach",343],["T_WHITESPACE"," ",343],"(",["T_VARIABLE","$this",343],["T_OBJECT_OPERATOR","->",343],["T_STRING","getItems",343],"(",")",["T_WHITESPACE"," ",343],["T_AS","as",343],["T_WHITESPACE"," ",343],["T_VARIABLE","$item",343],")",["T_WHITESPACE"," ",343],"{",["T_WHITESPACE","\n            ",343],["T_VARIABLE","$votesCollection",344],["T_WHITESPACE"," ",344],"=",["T_WHITESPACE"," ",344],["T_VARIABLE","$this",344],["T_OBJECT_OPERATOR","->",344],["T_STRING","_voteFactory",344],["T_OBJECT_OPERATOR","->",344],["T_STRING","create",344],"(",")",["T_OBJECT_OPERATOR","->",344],["T_STRING","getResourceCollection",344],"(",")",["T_OBJECT_OPERATOR","->",344],["T_STRING","setEntityPkFilter",344],"(",["T_WHITESPACE","\n                ",344],["T_VARIABLE","$item",345],["T_OBJECT_OPERATOR","->",345],["T_STRING","getEntityId",345],"(",")",["T_WHITESPACE","\n            ",345],")",["T_OBJECT_OPERATOR","->",346],["T_STRING","setStoreFilter",346],"(",["T_WHITESPACE","\n                ",346],["T_VARIABLE","$this",347],["T_OBJECT_OPERATOR","->",347],["T_STRING","_storeManager",347],["T_OBJECT_OPERATOR","->",347],["T_STRING","getStore",347],"(",")",["T_OBJECT_OPERATOR","->",347],["T_STRING","getId",347],"(",")",["T_WHITESPACE","\n            ",347],")",["T_OBJECT_OPERATOR","->",348],["T_STRING","load",348],"(",")",";",["T_WHITESPACE","\n            ",348],["T_VARIABLE","$item",349],["T_OBJECT_OPERATOR","->",349],["T_STRING","setRatingVotes",349],"(",["T_VARIABLE","$votesCollection",349],")",";",["T_WHITESPACE","\n        ",349],"}",["T_WHITESPACE","\n        ",350],["T_RETURN","return",351],["T_WHITESPACE"," ",351],["T_VARIABLE","$this",351],";",["T_WHITESPACE","\n    ",351],"}",["T_WHITESPACE","\n\n    ",352],["T_DOC_COMMENT","\/**\n     * Join fields to entity\n     *\n     * @return $this\n     *\/",354],["T_WHITESPACE","\n    ",358],["T_PROTECTED","protected",359],["T_WHITESPACE"," ",359],["T_FUNCTION","function",359],["T_WHITESPACE"," ",359],["T_STRING","_joinFields",359],"(",")",["T_WHITESPACE","\n    ",359],"{",["T_WHITESPACE","\n        ",360],["T_VARIABLE","$reviewTable",361],["T_WHITESPACE"," ",361],"=",["T_WHITESPACE"," ",361],["T_VARIABLE","$this",361],["T_OBJECT_OPERATOR","->",361],["T_STRING","_resource",361],["T_OBJECT_OPERATOR","->",361],["T_STRING","getTableName",361],"(",["T_CONSTANT_ENCAPSED_STRING","'review'",361],")",";",["T_WHITESPACE","\n        ",361],["T_VARIABLE","$reviewDetailTable",362],["T_WHITESPACE"," ",362],"=",["T_WHITESPACE"," ",362],["T_VARIABLE","$this",362],["T_OBJECT_OPERATOR","->",362],["T_STRING","_resource",362],["T_OBJECT_OPERATOR","->",362],["T_STRING","getTableName",362],"(",["T_CONSTANT_ENCAPSED_STRING","'review_detail'",362],")",";",["T_WHITESPACE","\n\n        ",362],["T_VARIABLE","$this",364],["T_OBJECT_OPERATOR","->",364],["T_STRING","addAttributeToSelect",364],"(",["T_CONSTANT_ENCAPSED_STRING","'name'",364],")",["T_OBJECT_OPERATOR","->",364],["T_STRING","addAttributeToSelect",364],"(",["T_CONSTANT_ENCAPSED_STRING","'sku'",364],")",";",["T_WHITESPACE","\n\n        ",364],["T_VARIABLE","$this",366],["T_OBJECT_OPERATOR","->",366],["T_STRING","getSelect",366],"(",")",["T_OBJECT_OPERATOR","->",366],["T_STRING","join",366],"(",["T_WHITESPACE","\n            ",366],"[",["T_CONSTANT_ENCAPSED_STRING","'rt'",367],["T_WHITESPACE"," ",367],["T_DOUBLE_ARROW","=>",367],["T_WHITESPACE"," ",367],["T_VARIABLE","$reviewTable",367],"]",",",["T_WHITESPACE","\n            ",367],["T_CONSTANT_ENCAPSED_STRING","'rt.entity_pk_value = e.entity_id'",368],",",["T_WHITESPACE","\n            ",368],"[",["T_CONSTANT_ENCAPSED_STRING","'rt.review_id'",369],",",["T_WHITESPACE"," ",369],["T_CONSTANT_ENCAPSED_STRING","'review_created_at'",369],["T_WHITESPACE"," ",369],["T_DOUBLE_ARROW","=>",369],["T_WHITESPACE"," ",369],["T_CONSTANT_ENCAPSED_STRING","'rt.created_at'",369],",",["T_WHITESPACE"," ",369],["T_CONSTANT_ENCAPSED_STRING","'rt.entity_pk_value'",369],",",["T_WHITESPACE"," ",369],["T_CONSTANT_ENCAPSED_STRING","'rt.status_id'",369],"]",["T_WHITESPACE","\n        ",369],")",["T_OBJECT_OPERATOR","->",370],["T_STRING","join",370],"(",["T_WHITESPACE","\n            ",370],"[",["T_CONSTANT_ENCAPSED_STRING","'rdt'",371],["T_WHITESPACE"," ",371],["T_DOUBLE_ARROW","=>",371],["T_WHITESPACE"," ",371],["T_VARIABLE","$reviewDetailTable",371],"]",",",["T_WHITESPACE","\n            ",371],["T_CONSTANT_ENCAPSED_STRING","'rdt.review_id = rt.review_id'",372],",",["T_WHITESPACE","\n            ",372],"[",["T_CONSTANT_ENCAPSED_STRING","'rdt.title'",373],",",["T_WHITESPACE"," ",373],["T_CONSTANT_ENCAPSED_STRING","'rdt.nickname'",373],",",["T_WHITESPACE"," ",373],["T_CONSTANT_ENCAPSED_STRING","'rdt.detail'",373],",",["T_WHITESPACE"," ",373],["T_CONSTANT_ENCAPSED_STRING","'rdt.customer_id'",373],",",["T_WHITESPACE"," ",373],["T_CONSTANT_ENCAPSED_STRING","'rdt.store_id'",373],"]",["T_WHITESPACE","\n        ",373],")",";",["T_WHITESPACE","\n        ",374],["T_RETURN","return",375],["T_WHITESPACE"," ",375],["T_VARIABLE","$this",375],";",["T_WHITESPACE","\n    ",375],"}",["T_WHITESPACE","\n\n    ",376],["T_DOC_COMMENT","\/**\n     * Retrieve all ids for collection\n     *\n     * @param null|int|string $limit\n     * @param null|int|string $offset\n     * @return array\n     * @SuppressWarnings(PHPMD.UnusedFormalParameter)\n     *\/",378],["T_WHITESPACE","\n    ",385],["T_PUBLIC","public",386],["T_WHITESPACE"," ",386],["T_FUNCTION","function",386],["T_WHITESPACE"," ",386],["T_STRING","getAllIds",386],"(",["T_VARIABLE","$limit",386],["T_WHITESPACE"," ",386],"=",["T_WHITESPACE"," ",386],["T_STRING","null",386],",",["T_WHITESPACE"," ",386],["T_VARIABLE","$offset",386],["T_WHITESPACE"," ",386],"=",["T_WHITESPACE"," ",386],["T_STRING","null",386],")",["T_WHITESPACE","\n    ",386],"{",["T_WHITESPACE","\n        ",387],["T_VARIABLE","$idsSelect",388],["T_WHITESPACE"," ",388],"=",["T_WHITESPACE"," ",388],["T_CLONE","clone",388],["T_WHITESPACE"," ",388],["T_VARIABLE","$this",388],["T_OBJECT_OPERATOR","->",388],["T_STRING","getSelect",388],"(",")",";",["T_WHITESPACE","\n        ",388],["T_VARIABLE","$idsSelect",389],["T_OBJECT_OPERATOR","->",389],["T_STRING","reset",389],"(",["T_STRING","Select",389],["T_DOUBLE_COLON","::",389],["T_STRING","ORDER",389],")",";",["T_WHITESPACE","\n        ",389],["T_VARIABLE","$idsSelect",390],["T_OBJECT_OPERATOR","->",390],["T_STRING","reset",390],"(",["T_STRING","Select",390],["T_DOUBLE_COLON","::",390],["T_STRING","LIMIT_COUNT",390],")",";",["T_WHITESPACE","\n        ",390],["T_VARIABLE","$idsSelect",391],["T_OBJECT_OPERATOR","->",391],["T_STRING","reset",391],"(",["T_STRING","Select",391],["T_DOUBLE_COLON","::",391],["T_STRING","LIMIT_OFFSET",391],")",";",["T_WHITESPACE","\n        ",391],["T_VARIABLE","$idsSelect",392],["T_OBJECT_OPERATOR","->",392],["T_STRING","reset",392],"(",["T_STRING","Select",392],["T_DOUBLE_COLON","::",392],["T_STRING","COLUMNS",392],")",";",["T_WHITESPACE","\n        ",392],["T_VARIABLE","$idsSelect",393],["T_OBJECT_OPERATOR","->",393],["T_STRING","columns",393],"(",["T_CONSTANT_ENCAPSED_STRING","'rt.review_id'",393],")",";",["T_WHITESPACE","\n        ",393],["T_RETURN","return",394],["T_WHITESPACE"," ",394],["T_VARIABLE","$this",394],["T_OBJECT_OPERATOR","->",394],["T_STRING","getConnection",394],"(",")",["T_OBJECT_OPERATOR","->",394],["T_STRING","fetchCol",394],"(",["T_VARIABLE","$idsSelect",394],")",";",["T_WHITESPACE","\n    ",394],"}",["T_WHITESPACE","\n\n    ",395],["T_DOC_COMMENT","\/**\n     * Get result sorted ids\n     *\n     * @return array\n     *\/",397],["T_WHITESPACE","\n    ",401],["T_PUBLIC","public",402],["T_WHITESPACE"," ",402],["T_FUNCTION","function",402],["T_WHITESPACE"," ",402],["T_STRING","getResultingIds",402],"(",")",["T_WHITESPACE","\n    ",402],"{",["T_WHITESPACE","\n        ",403],["T_VARIABLE","$idsSelect",404],["T_WHITESPACE"," ",404],"=",["T_WHITESPACE"," ",404],["T_CLONE","clone",404],["T_WHITESPACE"," ",404],["T_VARIABLE","$this",404],["T_OBJECT_OPERATOR","->",404],["T_STRING","getSelect",404],"(",")",";",["T_WHITESPACE","\n        ",404],["T_VARIABLE","$idsSelect",405],["T_OBJECT_OPERATOR","->",405],["T_STRING","reset",405],"(",["T_STRING","Select",405],["T_DOUBLE_COLON","::",405],["T_STRING","LIMIT_COUNT",405],")",";",["T_WHITESPACE","\n        ",405],["T_VARIABLE","$idsSelect",406],["T_OBJECT_OPERATOR","->",406],["T_STRING","reset",406],"(",["T_STRING","Select",406],["T_DOUBLE_COLON","::",406],["T_STRING","LIMIT_OFFSET",406],")",";",["T_WHITESPACE","\n        ",406],["T_VARIABLE","$idsSelect",407],["T_OBJECT_OPERATOR","->",407],["T_STRING","reset",407],"(",["T_STRING","Select",407],["T_DOUBLE_COLON","::",407],["T_STRING","COLUMNS",407],")",";",["T_WHITESPACE","\n        ",407],["T_VARIABLE","$idsSelect",408],["T_OBJECT_OPERATOR","->",408],["T_STRING","reset",408],"(",["T_STRING","Select",408],["T_DOUBLE_COLON","::",408],["T_STRING","ORDER",408],")",";",["T_WHITESPACE","\n        ",408],["T_VARIABLE","$idsSelect",409],["T_OBJECT_OPERATOR","->",409],["T_STRING","columns",409],"(",["T_CONSTANT_ENCAPSED_STRING","'rt.review_id'",409],")",";",["T_WHITESPACE","\n        ",409],["T_RETURN","return",410],["T_WHITESPACE"," ",410],["T_VARIABLE","$this",410],["T_OBJECT_OPERATOR","->",410],["T_STRING","getConnection",410],"(",")",["T_OBJECT_OPERATOR","->",410],["T_STRING","fetchCol",410],"(",["T_VARIABLE","$idsSelect",410],")",";",["T_WHITESPACE","\n    ",410],"}",["T_WHITESPACE","\n\n    ",411],["T_DOC_COMMENT","\/**\n     * Render SQL for retrieve product count\n     *\n     * @return string\n     *\/",413],["T_WHITESPACE","\n    ",417],["T_PUBLIC","public",418],["T_WHITESPACE"," ",418],["T_FUNCTION","function",418],["T_WHITESPACE"," ",418],["T_STRING","getSelectCountSql",418],"(",")",["T_WHITESPACE","\n    ",418],"{",["T_WHITESPACE","\n        ",419],["T_VARIABLE","$select",420],["T_WHITESPACE"," ",420],"=",["T_WHITESPACE"," ",420],["T_STRING","parent",420],["T_DOUBLE_COLON","::",420],["T_STRING","getSelectCountSql",420],"(",")",";",["T_WHITESPACE","\n        ",420],["T_VARIABLE","$select",421],["T_OBJECT_OPERATOR","->",421],["T_STRING","reset",421],"(",["T_STRING","Select",421],["T_DOUBLE_COLON","::",421],["T_STRING","COLUMNS",421],")",["T_OBJECT_OPERATOR","->",421],["T_STRING","columns",421],"(",["T_CONSTANT_ENCAPSED_STRING","'COUNT(e.entity_id)'",421],")",["T_OBJECT_OPERATOR","->",421],["T_STRING","reset",421],"(",["T_STRING","Select",421],["T_DOUBLE_COLON","::",421],["T_STRING","HAVING",421],")",";",["T_WHITESPACE","\n\n        ",421],["T_RETURN","return",423],["T_WHITESPACE"," ",423],["T_VARIABLE","$select",423],";",["T_WHITESPACE","\n    ",423],"}",["T_WHITESPACE","\n\n    ",424],["T_DOC_COMMENT","\/**\n     * Set order to attribute\n     *\n     * @param string $attribute\n     * @param string $dir\n     * @return $this\n     *\/",426],["T_WHITESPACE","\n    ",432],["T_PUBLIC","public",433],["T_WHITESPACE"," ",433],["T_FUNCTION","function",433],["T_WHITESPACE"," ",433],["T_STRING","setOrder",433],"(",["T_VARIABLE","$attribute",433],",",["T_WHITESPACE"," ",433],["T_VARIABLE","$dir",433],["T_WHITESPACE"," ",433],"=",["T_WHITESPACE"," ",433],["T_CONSTANT_ENCAPSED_STRING","'DESC'",433],")",["T_WHITESPACE","\n    ",433],"{",["T_WHITESPACE","\n        ",434],["T_SWITCH","switch",435],["T_WHITESPACE"," ",435],"(",["T_VARIABLE","$attribute",435],")",["T_WHITESPACE"," ",435],"{",["T_WHITESPACE","\n            ",435],["T_CASE","case",436],["T_WHITESPACE"," ",436],["T_CONSTANT_ENCAPSED_STRING","'rt.review_id'",436],":",["T_WHITESPACE","\n            ",436],["T_CASE","case",437],["T_WHITESPACE"," ",437],["T_CONSTANT_ENCAPSED_STRING","'rt.created_at'",437],":",["T_WHITESPACE","\n            ",437],["T_CASE","case",438],["T_WHITESPACE"," ",438],["T_CONSTANT_ENCAPSED_STRING","'rt.status_id'",438],":",["T_WHITESPACE","\n            ",438],["T_CASE","case",439],["T_WHITESPACE"," ",439],["T_CONSTANT_ENCAPSED_STRING","'rdt.title'",439],":",["T_WHITESPACE","\n            ",439],["T_CASE","case",440],["T_WHITESPACE"," ",440],["T_CONSTANT_ENCAPSED_STRING","'rdt.nickname'",440],":",["T_WHITESPACE","\n            ",440],["T_CASE","case",441],["T_WHITESPACE"," ",441],["T_CONSTANT_ENCAPSED_STRING","'rdt.detail'",441],":",["T_WHITESPACE","\n                ",441],["T_VARIABLE","$this",442],["T_OBJECT_OPERATOR","->",442],["T_STRING","getSelect",442],"(",")",["T_OBJECT_OPERATOR","->",442],["T_STRING","order",442],"(",["T_VARIABLE","$attribute",442],["T_WHITESPACE"," ",442],".",["T_WHITESPACE"," ",442],["T_CONSTANT_ENCAPSED_STRING","' '",442],["T_WHITESPACE"," ",442],".",["T_WHITESPACE"," ",442],["T_VARIABLE","$dir",442],")",";",["T_WHITESPACE","\n                ",442],["T_BREAK","break",443],";",["T_WHITESPACE","\n            ",443],["T_CASE","case",444],["T_WHITESPACE"," ",444],["T_CONSTANT_ENCAPSED_STRING","'stores'",444],":",["T_WHITESPACE","\n                ",444],["T_COMMENT","\/\/ No way to sort\n",445],["T_WHITESPACE","                ",446],["T_BREAK","break",446],";",["T_WHITESPACE","\n            ",446],["T_CASE","case",447],["T_WHITESPACE"," ",447],["T_CONSTANT_ENCAPSED_STRING","'type'",447],":",["T_WHITESPACE","\n                ",447],["T_VARIABLE","$this",448],["T_OBJECT_OPERATOR","->",448],["T_STRING","getSelect",448],"(",")",["T_OBJECT_OPERATOR","->",448],["T_STRING","order",448],"(",["T_CONSTANT_ENCAPSED_STRING","'rdt.customer_id '",448],["T_WHITESPACE"," ",448],".",["T_WHITESPACE"," ",448],["T_VARIABLE","$dir",448],")",";",["T_WHITESPACE","\n                ",448],["T_BREAK","break",449],";",["T_WHITESPACE","\n            ",449],["T_DEFAULT","default",450],":",["T_WHITESPACE","\n                ",450],["T_STRING","parent",451],["T_DOUBLE_COLON","::",451],["T_STRING","setOrder",451],"(",["T_VARIABLE","$attribute",451],",",["T_WHITESPACE"," ",451],["T_VARIABLE","$dir",451],")",";",["T_WHITESPACE","\n                ",451],["T_BREAK","break",452],";",["T_WHITESPACE","\n        ",452],"}",["T_WHITESPACE","\n        ",453],["T_RETURN","return",454],["T_WHITESPACE"," ",454],["T_VARIABLE","$this",454],";",["T_WHITESPACE","\n    ",454],"}",["T_WHITESPACE","\n\n    ",455],["T_DOC_COMMENT","\/**\n     * Add attribute to filter\n     *\n     * @param AbstractAttribute|string $attribute\n     * @param array|null $condition\n     * @param string $joinType\n     * @return $this\n     * @SuppressWarnings(PHPMD.CyclomaticComplexity)\n     *\/",457],["T_WHITESPACE","\n    ",465],["T_PUBLIC","public",466],["T_WHITESPACE"," ",466],["T_FUNCTION","function",466],["T_WHITESPACE"," ",466],["T_STRING","addAttributeToFilter",466],"(",["T_VARIABLE","$attribute",466],",",["T_WHITESPACE"," ",466],["T_VARIABLE","$condition",466],["T_WHITESPACE"," ",466],"=",["T_WHITESPACE"," ",466],["T_STRING","null",466],",",["T_WHITESPACE"," ",466],["T_VARIABLE","$joinType",466],["T_WHITESPACE"," ",466],"=",["T_WHITESPACE"," ",466],["T_CONSTANT_ENCAPSED_STRING","'inner'",466],")",["T_WHITESPACE","\n    ",466],"{",["T_WHITESPACE","\n        ",467],["T_SWITCH","switch",468],["T_WHITESPACE"," ",468],"(",["T_VARIABLE","$attribute",468],")",["T_WHITESPACE"," ",468],"{",["T_WHITESPACE","\n            ",468],["T_CASE","case",469],["T_WHITESPACE"," ",469],["T_CONSTANT_ENCAPSED_STRING","'rt.review_id'",469],":",["T_WHITESPACE","\n            ",469],["T_CASE","case",470],["T_WHITESPACE"," ",470],["T_CONSTANT_ENCAPSED_STRING","'rt.created_at'",470],":",["T_WHITESPACE","\n            ",470],["T_CASE","case",471],["T_WHITESPACE"," ",471],["T_CONSTANT_ENCAPSED_STRING","'rt.status_id'",471],":",["T_WHITESPACE","\n            ",471],["T_CASE","case",472],["T_WHITESPACE"," ",472],["T_CONSTANT_ENCAPSED_STRING","'rdt.title'",472],":",["T_WHITESPACE","\n            ",472],["T_CASE","case",473],["T_WHITESPACE"," ",473],["T_CONSTANT_ENCAPSED_STRING","'rdt.nickname'",473],":",["T_WHITESPACE","\n            ",473],["T_CASE","case",474],["T_WHITESPACE"," ",474],["T_CONSTANT_ENCAPSED_STRING","'rdt.detail'",474],":",["T_WHITESPACE","\n                ",474],["T_VARIABLE","$conditionSql",475],["T_WHITESPACE"," ",475],"=",["T_WHITESPACE"," ",475],["T_VARIABLE","$this",475],["T_OBJECT_OPERATOR","->",475],["T_STRING","_getConditionSql",475],"(",["T_VARIABLE","$attribute",475],",",["T_WHITESPACE"," ",475],["T_VARIABLE","$condition",475],")",";",["T_WHITESPACE","\n                ",475],["T_VARIABLE","$this",476],["T_OBJECT_OPERATOR","->",476],["T_STRING","getSelect",476],"(",")",["T_OBJECT_OPERATOR","->",476],["T_STRING","where",476],"(",["T_VARIABLE","$conditionSql",476],")",";",["T_WHITESPACE","\n                ",476],["T_BREAK","break",477],";",["T_WHITESPACE","\n            ",477],["T_CASE","case",478],["T_WHITESPACE"," ",478],["T_CONSTANT_ENCAPSED_STRING","'stores'",478],":",["T_WHITESPACE","\n                ",478],["T_VARIABLE","$this",479],["T_OBJECT_OPERATOR","->",479],["T_STRING","setStoreFilter",479],"(",["T_VARIABLE","$condition",479],")",";",["T_WHITESPACE","\n                ",479],["T_BREAK","break",480],";",["T_WHITESPACE","\n            ",480],["T_CASE","case",481],["T_WHITESPACE"," ",481],["T_CONSTANT_ENCAPSED_STRING","'type'",481],":",["T_WHITESPACE","\n                ",481],["T_IF","if",482],["T_WHITESPACE"," ",482],"(",["T_VARIABLE","$condition",482],["T_WHITESPACE"," ",482],["T_IS_EQUAL","==",482],["T_WHITESPACE"," ",482],["T_LNUMBER","1",482],")",["T_WHITESPACE"," ",482],"{",["T_WHITESPACE","\n                    ",482],["T_VARIABLE","$conditionParts",483],["T_WHITESPACE"," ",483],"=",["T_WHITESPACE"," ",483],"[",["T_WHITESPACE","\n                        ",483],["T_VARIABLE","$this",484],["T_OBJECT_OPERATOR","->",484],["T_STRING","_getConditionSql",484],"(",["T_CONSTANT_ENCAPSED_STRING","'rdt.customer_id'",484],",",["T_WHITESPACE"," ",484],"[",["T_CONSTANT_ENCAPSED_STRING","'is'",484],["T_WHITESPACE"," ",484],["T_DOUBLE_ARROW","=>",484],["T_WHITESPACE"," ",484],["T_NEW","new",484],["T_WHITESPACE"," ",484],["T_NS_SEPARATOR","\\",484],["T_STRING","Zend_Db_Expr",484],"(",["T_CONSTANT_ENCAPSED_STRING","'NULL'",484],")","]",")",",",["T_WHITESPACE","\n                        ",484],["T_VARIABLE","$this",485],["T_OBJECT_OPERATOR","->",485],["T_STRING","_getConditionSql",485],"(",["T_WHITESPACE","\n                            ",485],["T_CONSTANT_ENCAPSED_STRING","'rdt.store_id'",486],",",["T_WHITESPACE","\n                            ",486],"[",["T_CONSTANT_ENCAPSED_STRING","'eq'",487],["T_WHITESPACE"," ",487],["T_DOUBLE_ARROW","=>",487],["T_WHITESPACE"," ",487],["T_NS_SEPARATOR","\\",487],["T_STRING","Magento",487],["T_NS_SEPARATOR","\\",487],["T_STRING","Store",487],["T_NS_SEPARATOR","\\",487],["T_STRING","Model",487],["T_NS_SEPARATOR","\\",487],["T_STRING","Store",487],["T_DOUBLE_COLON","::",487],["T_STRING","DEFAULT_STORE_ID",487],"]",["T_WHITESPACE","\n                        ",487],")",",",["T_WHITESPACE","\n                    ",488],"]",";",["T_WHITESPACE","\n                    ",489],["T_VARIABLE","$conditionSql",490],["T_WHITESPACE"," ",490],"=",["T_WHITESPACE"," ",490],["T_STRING","implode",490],"(",["T_CONSTANT_ENCAPSED_STRING","' AND '",490],",",["T_WHITESPACE"," ",490],["T_VARIABLE","$conditionParts",490],")",";",["T_WHITESPACE","\n                ",490],"}",["T_WHITESPACE"," ",491],["T_ELSEIF","elseif",491],["T_WHITESPACE"," ",491],"(",["T_VARIABLE","$condition",491],["T_WHITESPACE"," ",491],["T_IS_EQUAL","==",491],["T_WHITESPACE"," ",491],["T_LNUMBER","2",491],")",["T_WHITESPACE"," ",491],"{",["T_WHITESPACE","\n                    ",491],["T_VARIABLE","$conditionSql",492],["T_WHITESPACE"," ",492],"=",["T_WHITESPACE"," ",492],["T_VARIABLE","$this",492],["T_OBJECT_OPERATOR","->",492],["T_STRING","_getConditionSql",492],"(",["T_CONSTANT_ENCAPSED_STRING","'rdt.customer_id'",492],",",["T_WHITESPACE"," ",492],"[",["T_CONSTANT_ENCAPSED_STRING","'gt'",492],["T_WHITESPACE"," ",492],["T_DOUBLE_ARROW","=>",492],["T_WHITESPACE"," ",492],["T_LNUMBER","0",492],"]",")",";",["T_WHITESPACE","\n                ",492],"}",["T_WHITESPACE"," ",493],["T_ELSE","else",493],["T_WHITESPACE"," ",493],"{",["T_WHITESPACE","\n                    ",493],["T_VARIABLE","$conditionParts",494],["T_WHITESPACE"," ",494],"=",["T_WHITESPACE"," ",494],"[",["T_WHITESPACE","\n                        ",494],["T_VARIABLE","$this",495],["T_OBJECT_OPERATOR","->",495],["T_STRING","_getConditionSql",495],"(",["T_CONSTANT_ENCAPSED_STRING","'rdt.customer_id'",495],",",["T_WHITESPACE"," ",495],"[",["T_CONSTANT_ENCAPSED_STRING","'is'",495],["T_WHITESPACE"," ",495],["T_DOUBLE_ARROW","=>",495],["T_WHITESPACE"," ",495],["T_NEW","new",495],["T_WHITESPACE"," ",495],["T_NS_SEPARATOR","\\",495],["T_STRING","Zend_Db_Expr",495],"(",["T_CONSTANT_ENCAPSED_STRING","'NULL'",495],")","]",")",",",["T_WHITESPACE","\n                        ",495],["T_VARIABLE","$this",496],["T_OBJECT_OPERATOR","->",496],["T_STRING","_getConditionSql",496],"(",["T_WHITESPACE","\n                            ",496],["T_CONSTANT_ENCAPSED_STRING","'rdt.store_id'",497],",",["T_WHITESPACE","\n                            ",497],"[",["T_CONSTANT_ENCAPSED_STRING","'neq'",498],["T_WHITESPACE"," ",498],["T_DOUBLE_ARROW","=>",498],["T_WHITESPACE"," ",498],["T_NS_SEPARATOR","\\",498],["T_STRING","Magento",498],["T_NS_SEPARATOR","\\",498],["T_STRING","Store",498],["T_NS_SEPARATOR","\\",498],["T_STRING","Model",498],["T_NS_SEPARATOR","\\",498],["T_STRING","Store",498],["T_DOUBLE_COLON","::",498],["T_STRING","DEFAULT_STORE_ID",498],"]",["T_WHITESPACE","\n                        ",498],")",",",["T_WHITESPACE","\n                    ",499],"]",";",["T_WHITESPACE","\n                    ",500],["T_VARIABLE","$conditionSql",501],["T_WHITESPACE"," ",501],"=",["T_WHITESPACE"," ",501],["T_STRING","implode",501],"(",["T_CONSTANT_ENCAPSED_STRING","' AND '",501],",",["T_WHITESPACE"," ",501],["T_VARIABLE","$conditionParts",501],")",";",["T_WHITESPACE","\n                ",501],"}",["T_WHITESPACE","\n                ",502],["T_VARIABLE","$this",503],["T_OBJECT_OPERATOR","->",503],["T_STRING","getSelect",503],"(",")",["T_OBJECT_OPERATOR","->",503],["T_STRING","where",503],"(",["T_VARIABLE","$conditionSql",503],")",";",["T_WHITESPACE","\n                ",503],["T_BREAK","break",504],";",["T_WHITESPACE","\n\n            ",504],["T_DEFAULT","default",506],":",["T_WHITESPACE","\n                ",506],["T_STRING","parent",507],["T_DOUBLE_COLON","::",507],["T_STRING","addAttributeToFilter",507],"(",["T_VARIABLE","$attribute",507],",",["T_WHITESPACE"," ",507],["T_VARIABLE","$condition",507],",",["T_WHITESPACE"," ",507],["T_VARIABLE","$joinType",507],")",";",["T_WHITESPACE","\n                ",507],["T_BREAK","break",508],";",["T_WHITESPACE","\n        ",508],"}",["T_WHITESPACE","\n        ",509],["T_RETURN","return",510],["T_WHITESPACE"," ",510],["T_VARIABLE","$this",510],";",["T_WHITESPACE","\n    ",510],"}",["T_WHITESPACE","\n\n    ",511],["T_DOC_COMMENT","\/**\n     * Retrieves column values\n     *\n     * @param string $colName\n     * @return array\n     *\/",513],["T_WHITESPACE","\n    ",518],["T_PUBLIC","public",519],["T_WHITESPACE"," ",519],["T_FUNCTION","function",519],["T_WHITESPACE"," ",519],["T_STRING","getColumnValues",519],"(",["T_VARIABLE","$colName",519],")",["T_WHITESPACE","\n    ",519],"{",["T_WHITESPACE","\n        ",520],["T_VARIABLE","$col",521],["T_WHITESPACE"," ",521],"=",["T_WHITESPACE"," ",521],"[","]",";",["T_WHITESPACE","\n        ",521],["T_FOREACH","foreach",522],["T_WHITESPACE"," ",522],"(",["T_VARIABLE","$this",522],["T_OBJECT_OPERATOR","->",522],["T_STRING","getItems",522],"(",")",["T_WHITESPACE"," ",522],["T_AS","as",522],["T_WHITESPACE"," ",522],["T_VARIABLE","$item",522],")",["T_WHITESPACE"," ",522],"{",["T_WHITESPACE","\n            ",522],["T_VARIABLE","$col",523],"[","]",["T_WHITESPACE"," ",523],"=",["T_WHITESPACE"," ",523],["T_VARIABLE","$item",523],["T_OBJECT_OPERATOR","->",523],["T_STRING","getData",523],"(",["T_VARIABLE","$colName",523],")",";",["T_WHITESPACE","\n        ",523],"}",["T_WHITESPACE","\n        ",524],["T_RETURN","return",525],["T_WHITESPACE"," ",525],["T_VARIABLE","$col",525],";",["T_WHITESPACE","\n    ",525],"}",["T_WHITESPACE","\n\n    ",526],["T_DOC_COMMENT","\/**\n     * Action after load\n     *\n     * @return $this\n     *\/",528],["T_WHITESPACE","\n    ",532],["T_PROTECTED","protected",533],["T_WHITESPACE"," ",533],["T_FUNCTION","function",533],["T_WHITESPACE"," ",533],["T_STRING","_afterLoad",533],"(",")",["T_WHITESPACE","\n    ",533],"{",["T_WHITESPACE","\n        ",534],["T_STRING","parent",535],["T_DOUBLE_COLON","::",535],["T_STRING","_afterLoad",535],"(",")",";",["T_WHITESPACE","\n        ",535],["T_IF","if",536],["T_WHITESPACE"," ",536],"(",["T_VARIABLE","$this",536],["T_OBJECT_OPERATOR","->",536],["T_STRING","_addStoreDataFlag",536],")",["T_WHITESPACE"," ",536],"{",["T_WHITESPACE","\n            ",536],["T_VARIABLE","$this",537],["T_OBJECT_OPERATOR","->",537],["T_STRING","_addStoreData",537],"(",")",";",["T_WHITESPACE","\n        ",537],"}",["T_WHITESPACE","\n        ",538],["T_RETURN","return",539],["T_WHITESPACE"," ",539],["T_VARIABLE","$this",539],";",["T_WHITESPACE","\n    ",539],"}",["T_WHITESPACE","\n\n    ",540],["T_DOC_COMMENT","\/**\n     * Add store data\n     *\n     * @return void\n     *\/",542],["T_WHITESPACE","\n    ",546],["T_PROTECTED","protected",547],["T_WHITESPACE"," ",547],["T_FUNCTION","function",547],["T_WHITESPACE"," ",547],["T_STRING","_addStoreData",547],"(",")",["T_WHITESPACE","\n    ",547],"{",["T_WHITESPACE","\n        ",548],["T_VARIABLE","$connection",549],["T_WHITESPACE"," ",549],"=",["T_WHITESPACE"," ",549],["T_VARIABLE","$this",549],["T_OBJECT_OPERATOR","->",549],["T_STRING","getConnection",549],"(",")",";",["T_WHITESPACE","\n        ",549],["T_COMMENT","\/\/$this->_getConditionSql('rdt.customer_id', array('null' => null));\n",550],["T_WHITESPACE","        ",551],["T_VARIABLE","$reviewsIds",551],["T_WHITESPACE"," ",551],"=",["T_WHITESPACE"," ",551],["T_VARIABLE","$this",551],["T_OBJECT_OPERATOR","->",551],["T_STRING","getColumnValues",551],"(",["T_CONSTANT_ENCAPSED_STRING","'review_id'",551],")",";",["T_WHITESPACE","\n        ",551],["T_VARIABLE","$storesToReviews",552],["T_WHITESPACE"," ",552],"=",["T_WHITESPACE"," ",552],"[","]",";",["T_WHITESPACE","\n        ",552],["T_IF","if",553],["T_WHITESPACE"," ",553],"(",["T_STRING","count",553],"(",["T_VARIABLE","$reviewsIds",553],")",["T_WHITESPACE"," ",553],">",["T_WHITESPACE"," ",553],["T_LNUMBER","0",553],")",["T_WHITESPACE"," ",553],"{",["T_WHITESPACE","\n            ",553],["T_VARIABLE","$reviewIdCondition",554],["T_WHITESPACE"," ",554],"=",["T_WHITESPACE"," ",554],["T_VARIABLE","$this",554],["T_OBJECT_OPERATOR","->",554],["T_STRING","_getConditionSql",554],"(",["T_CONSTANT_ENCAPSED_STRING","'review_id'",554],",",["T_WHITESPACE"," ",554],"[",["T_CONSTANT_ENCAPSED_STRING","'in'",554],["T_WHITESPACE"," ",554],["T_DOUBLE_ARROW","=>",554],["T_WHITESPACE"," ",554],["T_VARIABLE","$reviewsIds",554],"]",")",";",["T_WHITESPACE","\n            ",554],["T_VARIABLE","$storeIdCondition",555],["T_WHITESPACE"," ",555],"=",["T_WHITESPACE"," ",555],["T_VARIABLE","$this",555],["T_OBJECT_OPERATOR","->",555],["T_STRING","_getConditionSql",555],"(",["T_CONSTANT_ENCAPSED_STRING","'store_id'",555],",",["T_WHITESPACE"," ",555],"[",["T_CONSTANT_ENCAPSED_STRING","'gt'",555],["T_WHITESPACE"," ",555],["T_DOUBLE_ARROW","=>",555],["T_WHITESPACE"," ",555],["T_LNUMBER","0",555],"]",")",";",["T_WHITESPACE","\n            ",555],["T_VARIABLE","$select",556],["T_WHITESPACE"," ",556],"=",["T_WHITESPACE"," ",556],["T_VARIABLE","$connection",556],["T_OBJECT_OPERATOR","->",556],["T_STRING","select",556],"(",")",["T_OBJECT_OPERATOR","->",556],["T_STRING","from",556],"(",["T_WHITESPACE","\n                ",556],["T_VARIABLE","$this",557],["T_OBJECT_OPERATOR","->",557],["T_STRING","_reviewStoreTable",557],["T_WHITESPACE","\n            ",557],")",["T_OBJECT_OPERATOR","->",558],["T_STRING","where",558],"(",["T_WHITESPACE","\n                ",558],["T_VARIABLE","$reviewIdCondition",559],["T_WHITESPACE","\n            ",559],")",["T_OBJECT_OPERATOR","->",560],["T_STRING","where",560],"(",["T_WHITESPACE","\n                ",560],["T_VARIABLE","$storeIdCondition",561],["T_WHITESPACE","\n            ",561],")",";",["T_WHITESPACE","\n            ",562],["T_VARIABLE","$result",563],["T_WHITESPACE"," ",563],"=",["T_WHITESPACE"," ",563],["T_VARIABLE","$connection",563],["T_OBJECT_OPERATOR","->",563],["T_STRING","fetchAll",563],"(",["T_VARIABLE","$select",563],")",";",["T_WHITESPACE","\n            ",563],["T_FOREACH","foreach",564],["T_WHITESPACE"," ",564],"(",["T_VARIABLE","$result",564],["T_WHITESPACE"," ",564],["T_AS","as",564],["T_WHITESPACE"," ",564],["T_VARIABLE","$row",564],")",["T_WHITESPACE"," ",564],"{",["T_WHITESPACE","\n                ",564],["T_IF","if",565],["T_WHITESPACE"," ",565],"(","!",["T_ISSET","isset",565],"(",["T_VARIABLE","$storesToReviews",565],"[",["T_VARIABLE","$row",565],"[",["T_CONSTANT_ENCAPSED_STRING","'review_id'",565],"]","]",")",")",["T_WHITESPACE"," ",565],"{",["T_WHITESPACE","\n                    ",565],["T_VARIABLE","$storesToReviews",566],"[",["T_VARIABLE","$row",566],"[",["T_CONSTANT_ENCAPSED_STRING","'review_id'",566],"]","]",["T_WHITESPACE"," ",566],"=",["T_WHITESPACE"," ",566],"[","]",";",["T_WHITESPACE","\n                ",566],"}",["T_WHITESPACE","\n                ",567],["T_VARIABLE","$storesToReviews",568],"[",["T_VARIABLE","$row",568],"[",["T_CONSTANT_ENCAPSED_STRING","'review_id'",568],"]","]","[","]",["T_WHITESPACE"," ",568],"=",["T_WHITESPACE"," ",568],["T_VARIABLE","$row",568],"[",["T_CONSTANT_ENCAPSED_STRING","'store_id'",568],"]",";",["T_WHITESPACE","\n            ",568],"}",["T_WHITESPACE","\n        ",569],"}",["T_WHITESPACE","\n\n        ",570],["T_FOREACH","foreach",572],["T_WHITESPACE"," ",572],"(",["T_VARIABLE","$this",572],["T_WHITESPACE"," ",572],["T_AS","as",572],["T_WHITESPACE"," ",572],["T_VARIABLE","$item",572],")",["T_WHITESPACE"," ",572],"{",["T_WHITESPACE","\n            ",572],["T_IF","if",573],["T_WHITESPACE"," ",573],"(",["T_ISSET","isset",573],"(",["T_VARIABLE","$storesToReviews",573],"[",["T_VARIABLE","$item",573],["T_OBJECT_OPERATOR","->",573],["T_STRING","getReviewId",573],"(",")","]",")",")",["T_WHITESPACE"," ",573],"{",["T_WHITESPACE","\n                ",573],["T_VARIABLE","$item",574],["T_OBJECT_OPERATOR","->",574],["T_STRING","setData",574],"(",["T_CONSTANT_ENCAPSED_STRING","'stores'",574],",",["T_WHITESPACE"," ",574],["T_VARIABLE","$storesToReviews",574],"[",["T_VARIABLE","$item",574],["T_OBJECT_OPERATOR","->",574],["T_STRING","getReviewId",574],"(",")","]",")",";",["T_WHITESPACE","\n            ",574],"}",["T_WHITESPACE"," ",575],["T_ELSE","else",575],["T_WHITESPACE"," ",575],"{",["T_WHITESPACE","\n                ",575],["T_VARIABLE","$item",576],["T_OBJECT_OPERATOR","->",576],["T_STRING","setData",576],"(",["T_CONSTANT_ENCAPSED_STRING","'stores'",576],",",["T_WHITESPACE"," ",576],"[","]",")",";",["T_WHITESPACE","\n            ",576],"}",["T_WHITESPACE","\n        ",577],"}",["T_WHITESPACE","\n    ",578],"}",["T_WHITESPACE","\n\n    ",579],["T_DOC_COMMENT","\/**\n     * Redeclare parent method for store filters applying\n     *\n     * @return $this\n     *\/",581],["T_WHITESPACE","\n    ",585],["T_PROTECTED","protected",586],["T_WHITESPACE"," ",586],["T_FUNCTION","function",586],["T_WHITESPACE"," ",586],["T_STRING","_beforeLoad",586],"(",")",["T_WHITESPACE","\n    ",586],"{",["T_WHITESPACE","\n        ",587],["T_STRING","parent",588],["T_DOUBLE_COLON","::",588],["T_STRING","_beforeLoad",588],"(",")",";",["T_WHITESPACE","\n        ",588],["T_VARIABLE","$this",589],["T_OBJECT_OPERATOR","->",589],["T_STRING","_applyStoresFilterToSelect",589],"(",")",";",["T_WHITESPACE","\n\n        ",589],["T_RETURN","return",591],["T_WHITESPACE"," ",591],["T_VARIABLE","$this",591],";",["T_WHITESPACE","\n    ",591],"}",["T_WHITESPACE","\n",592],"}",["T_WHITESPACE","\n",593]]
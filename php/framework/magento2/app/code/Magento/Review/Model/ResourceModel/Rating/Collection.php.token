[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Copyright \u00c2\u00a9 2013-2017 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n *\/",2],["T_WHITESPACE","\n",5],["T_NAMESPACE","namespace",6],["T_WHITESPACE"," ",6],["T_STRING","Magento",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Review",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Model",6],["T_NS_SEPARATOR","\\",6],["T_STRING","ResourceModel",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Rating",6],";",["T_WHITESPACE","\n\n",6],["T_DOC_COMMENT","\/**\n * Rating collection resource model\n *\n * @author      Magento Core Team <core@magentocommerce.com>\n *\/",8],["T_WHITESPACE","\n",12],["T_CLASS","class",13],["T_WHITESPACE"," ",13],["T_STRING","Collection",13],["T_WHITESPACE"," ",13],["T_EXTENDS","extends",13],["T_WHITESPACE"," ",13],["T_NS_SEPARATOR","\\",13],["T_STRING","Magento",13],["T_NS_SEPARATOR","\\",13],["T_STRING","Framework",13],["T_NS_SEPARATOR","\\",13],["T_STRING","Model",13],["T_NS_SEPARATOR","\\",13],["T_STRING","ResourceModel",13],["T_NS_SEPARATOR","\\",13],["T_STRING","Db",13],["T_NS_SEPARATOR","\\",13],["T_STRING","Collection",13],["T_NS_SEPARATOR","\\",13],["T_STRING","AbstractCollection",13],["T_WHITESPACE","\n",13],"{",["T_WHITESPACE","\n    ",14],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Store\\Model\\StoreManagerInterface\n     *\/",15],["T_WHITESPACE","\n    ",17],["T_PROTECTED","protected",18],["T_WHITESPACE"," ",18],["T_VARIABLE","$_storeManager",18],";",["T_WHITESPACE","\n\n    ",18],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Review\\Model\\ResourceModel\\Rating\\Option\\CollectionFactory\n     *\/",20],["T_WHITESPACE","\n    ",22],["T_PROTECTED","protected",23],["T_WHITESPACE"," ",23],["T_VARIABLE","$_ratingCollectionF",23],";",["T_WHITESPACE","\n\n    ",23],["T_DOC_COMMENT","\/**\n     * Add store data flag\n     * @var bool\n     *\/",25],["T_WHITESPACE","\n    ",28],["T_PROTECTED","protected",29],["T_WHITESPACE"," ",29],["T_VARIABLE","$_addStoreDataFlag",29],["T_WHITESPACE"," ",29],"=",["T_WHITESPACE"," ",29],["T_STRING","false",29],";",["T_WHITESPACE","\n\n    ",29],["T_DOC_COMMENT","\/**\n     * @param \\Magento\\Framework\\Data\\Collection\\EntityFactory $entityFactory\n     * @param \\Psr\\Log\\LoggerInterface $logger\n     * @param \\Magento\\Framework\\Data\\Collection\\Db\\FetchStrategyInterface $fetchStrategy\n     * @param \\Magento\\Framework\\Event\\ManagerInterface $eventManager\n     * @param \\Magento\\Store\\Model\\StoreManagerInterface $storeManager\n     * @param \\Magento\\Review\\Model\\ResourceModel\\Rating\\Option\\CollectionFactory $ratingCollectionF\n     * @param mixed $connection\n     * @param \\Magento\\Framework\\Model\\ResourceModel\\Db\\AbstractDb $resource\n     *\/",31],["T_WHITESPACE","\n    ",40],["T_PUBLIC","public",41],["T_WHITESPACE"," ",41],["T_FUNCTION","function",41],["T_WHITESPACE"," ",41],["T_STRING","__construct",41],"(",["T_WHITESPACE","\n        ",41],["T_NS_SEPARATOR","\\",42],["T_STRING","Magento",42],["T_NS_SEPARATOR","\\",42],["T_STRING","Framework",42],["T_NS_SEPARATOR","\\",42],["T_STRING","Data",42],["T_NS_SEPARATOR","\\",42],["T_STRING","Collection",42],["T_NS_SEPARATOR","\\",42],["T_STRING","EntityFactory",42],["T_WHITESPACE"," ",42],["T_VARIABLE","$entityFactory",42],",",["T_WHITESPACE","\n        ",42],["T_NS_SEPARATOR","\\",43],["T_STRING","Psr",43],["T_NS_SEPARATOR","\\",43],["T_STRING","Log",43],["T_NS_SEPARATOR","\\",43],["T_STRING","LoggerInterface",43],["T_WHITESPACE"," ",43],["T_VARIABLE","$logger",43],",",["T_WHITESPACE","\n        ",43],["T_NS_SEPARATOR","\\",44],["T_STRING","Magento",44],["T_NS_SEPARATOR","\\",44],["T_STRING","Framework",44],["T_NS_SEPARATOR","\\",44],["T_STRING","Data",44],["T_NS_SEPARATOR","\\",44],["T_STRING","Collection",44],["T_NS_SEPARATOR","\\",44],["T_STRING","Db",44],["T_NS_SEPARATOR","\\",44],["T_STRING","FetchStrategyInterface",44],["T_WHITESPACE"," ",44],["T_VARIABLE","$fetchStrategy",44],",",["T_WHITESPACE","\n        ",44],["T_NS_SEPARATOR","\\",45],["T_STRING","Magento",45],["T_NS_SEPARATOR","\\",45],["T_STRING","Framework",45],["T_NS_SEPARATOR","\\",45],["T_STRING","Event",45],["T_NS_SEPARATOR","\\",45],["T_STRING","ManagerInterface",45],["T_WHITESPACE"," ",45],["T_VARIABLE","$eventManager",45],",",["T_WHITESPACE","\n        ",45],["T_NS_SEPARATOR","\\",46],["T_STRING","Magento",46],["T_NS_SEPARATOR","\\",46],["T_STRING","Store",46],["T_NS_SEPARATOR","\\",46],["T_STRING","Model",46],["T_NS_SEPARATOR","\\",46],["T_STRING","StoreManagerInterface",46],["T_WHITESPACE"," ",46],["T_VARIABLE","$storeManager",46],",",["T_WHITESPACE","\n        ",46],["T_NS_SEPARATOR","\\",47],["T_STRING","Magento",47],["T_NS_SEPARATOR","\\",47],["T_STRING","Review",47],["T_NS_SEPARATOR","\\",47],["T_STRING","Model",47],["T_NS_SEPARATOR","\\",47],["T_STRING","ResourceModel",47],["T_NS_SEPARATOR","\\",47],["T_STRING","Rating",47],["T_NS_SEPARATOR","\\",47],["T_STRING","Option",47],["T_NS_SEPARATOR","\\",47],["T_STRING","CollectionFactory",47],["T_WHITESPACE"," ",47],["T_VARIABLE","$ratingCollectionF",47],",",["T_WHITESPACE","\n        ",47],["T_NS_SEPARATOR","\\",48],["T_STRING","Magento",48],["T_NS_SEPARATOR","\\",48],["T_STRING","Framework",48],["T_NS_SEPARATOR","\\",48],["T_STRING","DB",48],["T_NS_SEPARATOR","\\",48],["T_STRING","Adapter",48],["T_NS_SEPARATOR","\\",48],["T_STRING","AdapterInterface",48],["T_WHITESPACE"," ",48],["T_VARIABLE","$connection",48],["T_WHITESPACE"," ",48],"=",["T_WHITESPACE"," ",48],["T_STRING","null",48],",",["T_WHITESPACE","\n        ",48],["T_NS_SEPARATOR","\\",49],["T_STRING","Magento",49],["T_NS_SEPARATOR","\\",49],["T_STRING","Framework",49],["T_NS_SEPARATOR","\\",49],["T_STRING","Model",49],["T_NS_SEPARATOR","\\",49],["T_STRING","ResourceModel",49],["T_NS_SEPARATOR","\\",49],["T_STRING","Db",49],["T_NS_SEPARATOR","\\",49],["T_STRING","AbstractDb",49],["T_WHITESPACE"," ",49],["T_VARIABLE","$resource",49],["T_WHITESPACE"," ",49],"=",["T_WHITESPACE"," ",49],["T_STRING","null",49],["T_WHITESPACE","\n    ",49],")",["T_WHITESPACE"," ",50],"{",["T_WHITESPACE","\n        ",50],["T_VARIABLE","$this",51],["T_OBJECT_OPERATOR","->",51],["T_STRING","_storeManager",51],["T_WHITESPACE"," ",51],"=",["T_WHITESPACE"," ",51],["T_VARIABLE","$storeManager",51],";",["T_WHITESPACE","\n        ",51],["T_VARIABLE","$this",52],["T_OBJECT_OPERATOR","->",52],["T_STRING","_ratingCollectionF",52],["T_WHITESPACE"," ",52],"=",["T_WHITESPACE"," ",52],["T_VARIABLE","$ratingCollectionF",52],";",["T_WHITESPACE","\n        ",52],["T_STRING","parent",53],["T_DOUBLE_COLON","::",53],["T_STRING","__construct",53],"(",["T_VARIABLE","$entityFactory",53],",",["T_WHITESPACE"," ",53],["T_VARIABLE","$logger",53],",",["T_WHITESPACE"," ",53],["T_VARIABLE","$fetchStrategy",53],",",["T_WHITESPACE"," ",53],["T_VARIABLE","$eventManager",53],",",["T_WHITESPACE"," ",53],["T_VARIABLE","$connection",53],",",["T_WHITESPACE"," ",53],["T_VARIABLE","$resource",53],")",";",["T_WHITESPACE","\n    ",53],"}",["T_WHITESPACE","\n\n    ",54],["T_DOC_COMMENT","\/**\n     * @var bool\n     *\/",56],["T_WHITESPACE","\n    ",58],["T_PROTECTED","protected",59],["T_WHITESPACE"," ",59],["T_VARIABLE","$_isStoreJoined",59],["T_WHITESPACE"," ",59],"=",["T_WHITESPACE"," ",59],["T_STRING","false",59],";",["T_WHITESPACE","\n\n    ",59],["T_DOC_COMMENT","\/**\n     * Resource initialization\n     *\n     * @return void\n     *\/",61],["T_WHITESPACE","\n    ",65],["T_PROTECTED","protected",66],["T_WHITESPACE"," ",66],["T_FUNCTION","function",66],["T_WHITESPACE"," ",66],["T_STRING","_construct",66],"(",")",["T_WHITESPACE","\n    ",66],"{",["T_WHITESPACE","\n        ",67],["T_VARIABLE","$this",68],["T_OBJECT_OPERATOR","->",68],["T_STRING","_init",68],"(",["T_NS_SEPARATOR","\\",68],["T_STRING","Magento",68],["T_NS_SEPARATOR","\\",68],["T_STRING","Review",68],["T_NS_SEPARATOR","\\",68],["T_STRING","Model",68],["T_NS_SEPARATOR","\\",68],["T_STRING","Rating",68],["T_DOUBLE_COLON","::",68],["T_CLASS","class",68],",",["T_WHITESPACE"," ",68],["T_NS_SEPARATOR","\\",68],["T_STRING","Magento",68],["T_NS_SEPARATOR","\\",68],["T_STRING","Review",68],["T_NS_SEPARATOR","\\",68],["T_STRING","Model",68],["T_NS_SEPARATOR","\\",68],["T_STRING","ResourceModel",68],["T_NS_SEPARATOR","\\",68],["T_STRING","Rating",68],["T_DOUBLE_COLON","::",68],["T_CLASS","class",68],")",";",["T_WHITESPACE","\n    ",68],"}",["T_WHITESPACE","\n\n    ",69],["T_DOC_COMMENT","\/**\n     * Add entity filter\n     *\n     * @param   int|string $entity\n     * @return  $this\n     *\/",71],["T_WHITESPACE","\n    ",76],["T_PUBLIC","public",77],["T_WHITESPACE"," ",77],["T_FUNCTION","function",77],["T_WHITESPACE"," ",77],["T_STRING","addEntityFilter",77],"(",["T_VARIABLE","$entity",77],")",["T_WHITESPACE","\n    ",77],"{",["T_WHITESPACE","\n        ",78],["T_VARIABLE","$connection",79],["T_WHITESPACE"," ",79],"=",["T_WHITESPACE"," ",79],["T_VARIABLE","$this",79],["T_OBJECT_OPERATOR","->",79],["T_STRING","getConnection",79],"(",")",";",["T_WHITESPACE","\n\n        ",79],["T_VARIABLE","$this",81],["T_OBJECT_OPERATOR","->",81],["T_STRING","getSelect",81],"(",")",["T_OBJECT_OPERATOR","->",81],["T_STRING","join",81],"(",["T_WHITESPACE","\n            ",81],["T_VARIABLE","$this",82],["T_OBJECT_OPERATOR","->",82],["T_STRING","getTable",82],"(",["T_CONSTANT_ENCAPSED_STRING","'rating_entity'",82],")",",",["T_WHITESPACE","\n            ",82],["T_CONSTANT_ENCAPSED_STRING","'main_table.entity_id='",83],["T_WHITESPACE"," ",83],".",["T_WHITESPACE"," ",83],["T_VARIABLE","$this",83],["T_OBJECT_OPERATOR","->",83],["T_STRING","getTable",83],"(",["T_CONSTANT_ENCAPSED_STRING","'rating_entity'",83],")",["T_WHITESPACE"," ",83],".",["T_WHITESPACE"," ",83],["T_CONSTANT_ENCAPSED_STRING","'.entity_id'",83],",",["T_WHITESPACE","\n            ",83],"[",["T_CONSTANT_ENCAPSED_STRING","'entity_code'",84],"]",["T_WHITESPACE","\n        ",84],")",";",["T_WHITESPACE","\n\n        ",85],["T_IF","if",87],["T_WHITESPACE"," ",87],"(",["T_STRING","is_numeric",87],"(",["T_VARIABLE","$entity",87],")",")",["T_WHITESPACE"," ",87],"{",["T_WHITESPACE","\n            ",87],["T_VARIABLE","$this",88],["T_OBJECT_OPERATOR","->",88],["T_STRING","addFilter",88],"(",["T_WHITESPACE","\n                ",88],["T_CONSTANT_ENCAPSED_STRING","'entity'",89],",",["T_WHITESPACE","\n                ",89],["T_VARIABLE","$connection",90],["T_OBJECT_OPERATOR","->",90],["T_STRING","quoteInto",90],"(",["T_VARIABLE","$this",90],["T_OBJECT_OPERATOR","->",90],["T_STRING","getTable",90],"(",["T_CONSTANT_ENCAPSED_STRING","'rating_entity'",90],")",["T_WHITESPACE"," ",90],".",["T_WHITESPACE"," ",90],["T_CONSTANT_ENCAPSED_STRING","'.entity_id=?'",90],",",["T_WHITESPACE"," ",90],["T_VARIABLE","$entity",90],")",",",["T_WHITESPACE","\n                ",90],["T_CONSTANT_ENCAPSED_STRING","'string'",91],["T_WHITESPACE","\n            ",91],")",";",["T_WHITESPACE","\n        ",92],"}",["T_WHITESPACE"," ",93],["T_ELSEIF","elseif",93],["T_WHITESPACE"," ",93],"(",["T_STRING","is_string",93],"(",["T_VARIABLE","$entity",93],")",")",["T_WHITESPACE"," ",93],"{",["T_WHITESPACE","\n            ",93],["T_VARIABLE","$this",94],["T_OBJECT_OPERATOR","->",94],["T_STRING","addFilter",94],"(",["T_WHITESPACE","\n                ",94],["T_CONSTANT_ENCAPSED_STRING","'entity'",95],",",["T_WHITESPACE","\n                ",95],["T_VARIABLE","$connection",96],["T_OBJECT_OPERATOR","->",96],["T_STRING","quoteInto",96],"(",["T_VARIABLE","$this",96],["T_OBJECT_OPERATOR","->",96],["T_STRING","getTable",96],"(",["T_CONSTANT_ENCAPSED_STRING","'rating_entity'",96],")",["T_WHITESPACE"," ",96],".",["T_WHITESPACE"," ",96],["T_CONSTANT_ENCAPSED_STRING","'.entity_code=?'",96],",",["T_WHITESPACE"," ",96],["T_VARIABLE","$entity",96],")",",",["T_WHITESPACE","\n                ",96],["T_CONSTANT_ENCAPSED_STRING","'string'",97],["T_WHITESPACE","\n            ",97],")",";",["T_WHITESPACE","\n        ",98],"}",["T_WHITESPACE","\n        ",99],["T_RETURN","return",100],["T_WHITESPACE"," ",100],["T_VARIABLE","$this",100],";",["T_WHITESPACE","\n    ",100],"}",["T_WHITESPACE","\n\n    ",101],["T_DOC_COMMENT","\/**\n     * Set order by position field\n     *\n     * @param   string $dir\n     * @return  $this\n     *\/",103],["T_WHITESPACE","\n    ",108],["T_PUBLIC","public",109],["T_WHITESPACE"," ",109],["T_FUNCTION","function",109],["T_WHITESPACE"," ",109],["T_STRING","setPositionOrder",109],"(",["T_VARIABLE","$dir",109],["T_WHITESPACE"," ",109],"=",["T_WHITESPACE"," ",109],["T_CONSTANT_ENCAPSED_STRING","'ASC'",109],")",["T_WHITESPACE","\n    ",109],"{",["T_WHITESPACE","\n        ",110],["T_VARIABLE","$this",111],["T_OBJECT_OPERATOR","->",111],["T_STRING","setOrder",111],"(",["T_CONSTANT_ENCAPSED_STRING","'main_table.position'",111],",",["T_WHITESPACE"," ",111],["T_VARIABLE","$dir",111],")",";",["T_WHITESPACE","\n        ",111],["T_RETURN","return",112],["T_WHITESPACE"," ",112],["T_VARIABLE","$this",112],";",["T_WHITESPACE","\n    ",112],"}",["T_WHITESPACE","\n\n    ",113],["T_DOC_COMMENT","\/**\n     * Set store filter\n     *\n     * @param int $storeId\n     * @return $this\n     *\/",115],["T_WHITESPACE","\n    ",120],["T_PUBLIC","public",121],["T_WHITESPACE"," ",121],["T_FUNCTION","function",121],["T_WHITESPACE"," ",121],["T_STRING","setStoreFilter",121],"(",["T_VARIABLE","$storeId",121],")",["T_WHITESPACE","\n    ",121],"{",["T_WHITESPACE","\n        ",122],["T_IF","if",123],["T_WHITESPACE"," ",123],"(",["T_VARIABLE","$this",123],["T_OBJECT_OPERATOR","->",123],["T_STRING","_storeManager",123],["T_OBJECT_OPERATOR","->",123],["T_STRING","isSingleStoreMode",123],"(",")",")",["T_WHITESPACE"," ",123],"{",["T_WHITESPACE","\n            ",123],["T_RETURN","return",124],["T_WHITESPACE"," ",124],["T_VARIABLE","$this",124],";",["T_WHITESPACE","\n        ",124],"}",["T_WHITESPACE","\n        ",125],["T_VARIABLE","$connection",126],["T_WHITESPACE"," ",126],"=",["T_WHITESPACE"," ",126],["T_VARIABLE","$this",126],["T_OBJECT_OPERATOR","->",126],["T_STRING","getConnection",126],"(",")",";",["T_WHITESPACE","\n        ",126],["T_IF","if",127],["T_WHITESPACE"," ",127],"(","!",["T_STRING","is_array",127],"(",["T_VARIABLE","$storeId",127],")",")",["T_WHITESPACE"," ",127],"{",["T_WHITESPACE","\n            ",127],["T_VARIABLE","$storeId",128],["T_WHITESPACE"," ",128],"=",["T_WHITESPACE"," ",128],"[",["T_VARIABLE","$storeId",128],["T_WHITESPACE"," ",128],["T_IS_IDENTICAL","===",128],["T_WHITESPACE"," ",128],["T_STRING","null",128],["T_WHITESPACE"," ",128],"?",["T_WHITESPACE"," ",128],"-",["T_LNUMBER","1",128],["T_WHITESPACE"," ",128],":",["T_WHITESPACE"," ",128],["T_VARIABLE","$storeId",128],"]",";",["T_WHITESPACE","\n        ",128],"}",["T_WHITESPACE","\n        ",129],["T_IF","if",130],["T_WHITESPACE"," ",130],"(",["T_EMPTY","empty",130],"(",["T_VARIABLE","$storeId",130],")",")",["T_WHITESPACE"," ",130],"{",["T_WHITESPACE","\n            ",130],["T_RETURN","return",131],["T_WHITESPACE"," ",131],["T_VARIABLE","$this",131],";",["T_WHITESPACE","\n        ",131],"}",["T_WHITESPACE","\n        ",132],["T_IF","if",133],["T_WHITESPACE"," ",133],"(","!",["T_VARIABLE","$this",133],["T_OBJECT_OPERATOR","->",133],["T_STRING","_isStoreJoined",133],")",["T_WHITESPACE"," ",133],"{",["T_WHITESPACE","\n            ",133],["T_VARIABLE","$this",134],["T_OBJECT_OPERATOR","->",134],["T_STRING","getSelect",134],"(",")",["T_OBJECT_OPERATOR","->",134],["T_STRING","distinct",134],"(",["T_WHITESPACE","\n                ",134],["T_STRING","true",135],["T_WHITESPACE","\n            ",135],")",["T_OBJECT_OPERATOR","->",136],["T_STRING","join",136],"(",["T_WHITESPACE","\n                ",136],"[",["T_CONSTANT_ENCAPSED_STRING","'store'",137],["T_WHITESPACE"," ",137],["T_DOUBLE_ARROW","=>",137],["T_WHITESPACE"," ",137],["T_VARIABLE","$this",137],["T_OBJECT_OPERATOR","->",137],["T_STRING","getTable",137],"(",["T_CONSTANT_ENCAPSED_STRING","'rating_store'",137],")","]",",",["T_WHITESPACE","\n                ",137],["T_CONSTANT_ENCAPSED_STRING","'main_table.rating_id = store.rating_id'",138],",",["T_WHITESPACE","\n                ",138],"[","]",["T_WHITESPACE","\n            ",139],")",";",["T_WHITESPACE","\n            ",140],["T_COMMENT","\/\/        ->group('main_table.rating_id')\n",141],["T_WHITESPACE","            ",142],["T_VARIABLE","$this",142],["T_OBJECT_OPERATOR","->",142],["T_STRING","_isStoreJoined",142],["T_WHITESPACE"," ",142],"=",["T_WHITESPACE"," ",142],["T_STRING","true",142],";",["T_WHITESPACE","\n        ",142],"}",["T_WHITESPACE","\n        ",143],["T_VARIABLE","$inCondition",144],["T_WHITESPACE"," ",144],"=",["T_WHITESPACE"," ",144],["T_VARIABLE","$connection",144],["T_OBJECT_OPERATOR","->",144],["T_STRING","prepareSqlCondition",144],"(",["T_CONSTANT_ENCAPSED_STRING","'store.store_id'",144],",",["T_WHITESPACE"," ",144],"[",["T_CONSTANT_ENCAPSED_STRING","'in'",144],["T_WHITESPACE"," ",144],["T_DOUBLE_ARROW","=>",144],["T_WHITESPACE"," ",144],["T_VARIABLE","$storeId",144],"]",")",";",["T_WHITESPACE","\n        ",144],["T_VARIABLE","$this",145],["T_OBJECT_OPERATOR","->",145],["T_STRING","getSelect",145],"(",")",["T_OBJECT_OPERATOR","->",145],["T_STRING","where",145],"(",["T_VARIABLE","$inCondition",145],")",";",["T_WHITESPACE","\n        ",145],["T_VARIABLE","$this",146],["T_OBJECT_OPERATOR","->",146],["T_STRING","setPositionOrder",146],"(",")",";",["T_WHITESPACE","\n        ",146],["T_RETURN","return",147],["T_WHITESPACE"," ",147],["T_VARIABLE","$this",147],";",["T_WHITESPACE","\n    ",147],"}",["T_WHITESPACE","\n\n    ",148],["T_DOC_COMMENT","\/**\n     * Add options to ratings in collection\n     *\n     * @return $this\n     *\/",150],["T_WHITESPACE","\n    ",154],["T_PUBLIC","public",155],["T_WHITESPACE"," ",155],["T_FUNCTION","function",155],["T_WHITESPACE"," ",155],["T_STRING","addOptionToItems",155],"(",")",["T_WHITESPACE","\n    ",155],"{",["T_WHITESPACE","\n        ",156],["T_VARIABLE","$arrRatingId",157],["T_WHITESPACE"," ",157],"=",["T_WHITESPACE"," ",157],["T_VARIABLE","$this",157],["T_OBJECT_OPERATOR","->",157],["T_STRING","getColumnValues",157],"(",["T_CONSTANT_ENCAPSED_STRING","'rating_id'",157],")",";",["T_WHITESPACE","\n\n        ",157],["T_IF","if",159],["T_WHITESPACE"," ",159],"(","!",["T_EMPTY","empty",159],"(",["T_VARIABLE","$arrRatingId",159],")",")",["T_WHITESPACE"," ",159],"{",["T_WHITESPACE","\n            ",159],["T_DOC_COMMENT","\/** @var \\Magento\\Review\\Model\\ResourceModel\\Rating\\Option\\Collection $collection *\/",160],["T_WHITESPACE","\n            ",160],["T_VARIABLE","$collection",161],["T_WHITESPACE"," ",161],"=",["T_WHITESPACE"," ",161],["T_VARIABLE","$this",161],["T_OBJECT_OPERATOR","->",161],["T_STRING","_ratingCollectionF",161],["T_OBJECT_OPERATOR","->",161],["T_STRING","create",161],"(",")",["T_OBJECT_OPERATOR","->",161],["T_STRING","addRatingFilter",161],"(",["T_WHITESPACE","\n                ",161],["T_VARIABLE","$arrRatingId",162],["T_WHITESPACE","\n            ",162],")",["T_OBJECT_OPERATOR","->",163],["T_STRING","setPositionOrder",163],"(",")",["T_OBJECT_OPERATOR","->",163],["T_STRING","load",163],"(",")",";",["T_WHITESPACE","\n\n            ",163],["T_FOREACH","foreach",165],["T_WHITESPACE"," ",165],"(",["T_VARIABLE","$this",165],["T_WHITESPACE"," ",165],["T_AS","as",165],["T_WHITESPACE"," ",165],["T_VARIABLE","$rating",165],")",["T_WHITESPACE"," ",165],"{",["T_WHITESPACE","\n                ",165],["T_VARIABLE","$rating",166],["T_OBJECT_OPERATOR","->",166],["T_STRING","setOptions",166],"(",["T_VARIABLE","$collection",166],["T_OBJECT_OPERATOR","->",166],["T_STRING","getItemsByColumnValue",166],"(",["T_CONSTANT_ENCAPSED_STRING","'rating_id'",166],",",["T_WHITESPACE"," ",166],["T_VARIABLE","$rating",166],["T_OBJECT_OPERATOR","->",166],["T_STRING","getId",166],"(",")",")",")",";",["T_WHITESPACE","\n            ",166],"}",["T_WHITESPACE","\n        ",167],"}",["T_WHITESPACE","\n\n        ",168],["T_RETURN","return",170],["T_WHITESPACE"," ",170],["T_VARIABLE","$this",170],";",["T_WHITESPACE","\n    ",170],"}",["T_WHITESPACE","\n\n    ",171],["T_DOC_COMMENT","\/**\n     * Add entity summary to item\n     *\n     * @param int $entityPkValue\n     * @param int $storeId\n     * @return $this\n     *\/",173],["T_WHITESPACE","\n    ",179],["T_PUBLIC","public",180],["T_WHITESPACE"," ",180],["T_FUNCTION","function",180],["T_WHITESPACE"," ",180],["T_STRING","addEntitySummaryToItem",180],"(",["T_VARIABLE","$entityPkValue",180],",",["T_WHITESPACE"," ",180],["T_VARIABLE","$storeId",180],")",["T_WHITESPACE","\n    ",180],"{",["T_WHITESPACE","\n        ",181],["T_VARIABLE","$arrRatingId",182],["T_WHITESPACE"," ",182],"=",["T_WHITESPACE"," ",182],["T_VARIABLE","$this",182],["T_OBJECT_OPERATOR","->",182],["T_STRING","getColumnValues",182],"(",["T_CONSTANT_ENCAPSED_STRING","'rating_id'",182],")",";",["T_WHITESPACE","\n        ",182],["T_IF","if",183],["T_WHITESPACE"," ",183],"(",["T_STRING","count",183],"(",["T_VARIABLE","$arrRatingId",183],")",["T_WHITESPACE"," ",183],["T_IS_EQUAL","==",183],["T_WHITESPACE"," ",183],["T_LNUMBER","0",183],")",["T_WHITESPACE"," ",183],"{",["T_WHITESPACE","\n            ",183],["T_RETURN","return",184],["T_WHITESPACE"," ",184],["T_VARIABLE","$this",184],";",["T_WHITESPACE","\n        ",184],"}",["T_WHITESPACE","\n\n        ",185],["T_VARIABLE","$connection",187],["T_WHITESPACE"," ",187],"=",["T_WHITESPACE"," ",187],["T_VARIABLE","$this",187],["T_OBJECT_OPERATOR","->",187],["T_STRING","getConnection",187],"(",")",";",["T_WHITESPACE","\n\n        ",187],["T_VARIABLE","$inCond",189],["T_WHITESPACE"," ",189],"=",["T_WHITESPACE"," ",189],["T_VARIABLE","$connection",189],["T_OBJECT_OPERATOR","->",189],["T_STRING","prepareSqlCondition",189],"(",["T_CONSTANT_ENCAPSED_STRING","'rating_option_vote.rating_id'",189],",",["T_WHITESPACE"," ",189],"[",["T_CONSTANT_ENCAPSED_STRING","'in'",189],["T_WHITESPACE"," ",189],["T_DOUBLE_ARROW","=>",189],["T_WHITESPACE"," ",189],["T_VARIABLE","$arrRatingId",189],"]",")",";",["T_WHITESPACE","\n        ",189],["T_VARIABLE","$sumCond",190],["T_WHITESPACE"," ",190],"=",["T_WHITESPACE"," ",190],["T_NEW","new",190],["T_WHITESPACE"," ",190],["T_NS_SEPARATOR","\\",190],["T_STRING","Zend_Db_Expr",190],"(","\"",["T_ENCAPSED_AND_WHITESPACE","SUM(rating_option_vote.",190],["T_CURLY_OPEN","{",190],["T_VARIABLE","$connection",190],["T_OBJECT_OPERATOR","->",190],["T_STRING","quoteIdentifier",190],"(",["T_CONSTANT_ENCAPSED_STRING","'percent'",190],")","}",["T_ENCAPSED_AND_WHITESPACE",")",190],"\"",")",";",["T_WHITESPACE","\n        ",190],["T_VARIABLE","$countCond",191],["T_WHITESPACE"," ",191],"=",["T_WHITESPACE"," ",191],["T_NEW","new",191],["T_WHITESPACE"," ",191],["T_NS_SEPARATOR","\\",191],["T_STRING","Zend_Db_Expr",191],"(",["T_CONSTANT_ENCAPSED_STRING","'COUNT(*)'",191],")",";",["T_WHITESPACE","\n        ",191],["T_VARIABLE","$select",192],["T_WHITESPACE"," ",192],"=",["T_WHITESPACE"," ",192],["T_VARIABLE","$connection",192],["T_OBJECT_OPERATOR","->",192],["T_STRING","select",192],"(",")",["T_OBJECT_OPERATOR","->",192],["T_STRING","from",192],"(",["T_WHITESPACE","\n            ",192],"[",["T_CONSTANT_ENCAPSED_STRING","'rating_option_vote'",193],["T_WHITESPACE"," ",193],["T_DOUBLE_ARROW","=>",193],["T_WHITESPACE"," ",193],["T_VARIABLE","$this",193],["T_OBJECT_OPERATOR","->",193],["T_STRING","getTable",193],"(",["T_CONSTANT_ENCAPSED_STRING","'rating_option_vote'",193],")","]",",",["T_WHITESPACE","\n            ",193],"[",["T_CONSTANT_ENCAPSED_STRING","'rating_id'",194],["T_WHITESPACE"," ",194],["T_DOUBLE_ARROW","=>",194],["T_WHITESPACE"," ",194],["T_CONSTANT_ENCAPSED_STRING","'rating_option_vote.rating_id'",194],",",["T_WHITESPACE"," ",194],["T_CONSTANT_ENCAPSED_STRING","'sum'",194],["T_WHITESPACE"," ",194],["T_DOUBLE_ARROW","=>",194],["T_WHITESPACE"," ",194],["T_VARIABLE","$sumCond",194],",",["T_WHITESPACE"," ",194],["T_CONSTANT_ENCAPSED_STRING","'count'",194],["T_WHITESPACE"," ",194],["T_DOUBLE_ARROW","=>",194],["T_WHITESPACE"," ",194],["T_VARIABLE","$countCond",194],"]",["T_WHITESPACE","\n        ",194],")",["T_OBJECT_OPERATOR","->",195],["T_STRING","join",195],"(",["T_WHITESPACE","\n            ",195],"[",["T_CONSTANT_ENCAPSED_STRING","'review_store'",196],["T_WHITESPACE"," ",196],["T_DOUBLE_ARROW","=>",196],["T_WHITESPACE"," ",196],["T_VARIABLE","$this",196],["T_OBJECT_OPERATOR","->",196],["T_STRING","getTable",196],"(",["T_CONSTANT_ENCAPSED_STRING","'review_store'",196],")","]",",",["T_WHITESPACE","\n            ",196],["T_CONSTANT_ENCAPSED_STRING","'rating_option_vote.review_id=review_store.review_id AND review_store.store_id = :store_id'",197],",",["T_WHITESPACE","\n            ",197],"[","]",["T_WHITESPACE","\n        ",198],")",";",["T_WHITESPACE","\n        ",199],["T_IF","if",200],["T_WHITESPACE"," ",200],"(","!",["T_VARIABLE","$this",200],["T_OBJECT_OPERATOR","->",200],["T_STRING","_storeManager",200],["T_OBJECT_OPERATOR","->",200],["T_STRING","isSingleStoreMode",200],"(",")",")",["T_WHITESPACE"," ",200],"{",["T_WHITESPACE","\n            ",200],["T_VARIABLE","$select",201],["T_OBJECT_OPERATOR","->",201],["T_STRING","join",201],"(",["T_WHITESPACE","\n                ",201],"[",["T_CONSTANT_ENCAPSED_STRING","'rst'",202],["T_WHITESPACE"," ",202],["T_DOUBLE_ARROW","=>",202],["T_WHITESPACE"," ",202],["T_VARIABLE","$this",202],["T_OBJECT_OPERATOR","->",202],["T_STRING","getTable",202],"(",["T_CONSTANT_ENCAPSED_STRING","'rating_store'",202],")","]",",",["T_WHITESPACE","\n                ",202],["T_CONSTANT_ENCAPSED_STRING","'rst.rating_id = rating_option_vote.rating_id AND rst.store_id = :rst_store_id'",203],",",["T_WHITESPACE","\n                ",203],"[","]",["T_WHITESPACE","\n            ",204],")",";",["T_WHITESPACE","\n        ",205],"}",["T_WHITESPACE","\n        ",206],["T_VARIABLE","$select",207],["T_OBJECT_OPERATOR","->",207],["T_STRING","join",207],"(",["T_WHITESPACE","\n            ",207],"[",["T_CONSTANT_ENCAPSED_STRING","'review'",208],["T_WHITESPACE"," ",208],["T_DOUBLE_ARROW","=>",208],["T_WHITESPACE"," ",208],["T_VARIABLE","$this",208],["T_OBJECT_OPERATOR","->",208],["T_STRING","getTable",208],"(",["T_CONSTANT_ENCAPSED_STRING","'review'",208],")","]",",",["T_WHITESPACE","\n            ",208],["T_CONSTANT_ENCAPSED_STRING","'review_store.review_id=review.review_id AND review.status_id=1'",209],",",["T_WHITESPACE","\n            ",209],"[","]",["T_WHITESPACE","\n        ",210],")",["T_OBJECT_OPERATOR","->",211],["T_STRING","where",211],"(",["T_WHITESPACE","\n            ",211],["T_VARIABLE","$inCond",212],["T_WHITESPACE","\n        ",212],")",["T_OBJECT_OPERATOR","->",213],["T_STRING","where",213],"(",["T_WHITESPACE","\n            ",213],["T_CONSTANT_ENCAPSED_STRING","'rating_option_vote.entity_pk_value=:pk_value'",214],["T_WHITESPACE","\n        ",214],")",["T_OBJECT_OPERATOR","->",215],["T_STRING","group",215],"(",["T_WHITESPACE","\n            ",215],["T_CONSTANT_ENCAPSED_STRING","'rating_option_vote.rating_id'",216],["T_WHITESPACE","\n        ",216],")",";",["T_WHITESPACE","\n        ",217],["T_VARIABLE","$bind",218],["T_WHITESPACE"," ",218],"=",["T_WHITESPACE"," ",218],"[",["T_CONSTANT_ENCAPSED_STRING","':store_id'",218],["T_WHITESPACE"," ",218],["T_DOUBLE_ARROW","=>",218],["T_WHITESPACE"," ",218],["T_INT_CAST","(int)",218],["T_VARIABLE","$storeId",218],",",["T_WHITESPACE"," ",218],["T_CONSTANT_ENCAPSED_STRING","':pk_value'",218],["T_WHITESPACE"," ",218],["T_DOUBLE_ARROW","=>",218],["T_WHITESPACE"," ",218],["T_VARIABLE","$entityPkValue",218],"]",";",["T_WHITESPACE","\n        ",218],["T_IF","if",219],["T_WHITESPACE"," ",219],"(","!",["T_VARIABLE","$this",219],["T_OBJECT_OPERATOR","->",219],["T_STRING","_storeManager",219],["T_OBJECT_OPERATOR","->",219],["T_STRING","isSingleStoreMode",219],"(",")",")",["T_WHITESPACE"," ",219],"{",["T_WHITESPACE","\n            ",219],["T_VARIABLE","$bind",220],"[",["T_CONSTANT_ENCAPSED_STRING","':rst_store_id'",220],"]",["T_WHITESPACE"," ",220],"=",["T_WHITESPACE"," ",220],["T_INT_CAST","(int)",220],["T_VARIABLE","$storeId",220],";",["T_WHITESPACE","\n        ",220],"}",["T_WHITESPACE","\n\n        ",221],["T_VARIABLE","$data",223],["T_WHITESPACE"," ",223],"=",["T_WHITESPACE"," ",223],["T_VARIABLE","$this",223],["T_OBJECT_OPERATOR","->",223],["T_STRING","getConnection",223],"(",")",["T_OBJECT_OPERATOR","->",223],["T_STRING","fetchAll",223],"(",["T_VARIABLE","$select",223],",",["T_WHITESPACE"," ",223],["T_VARIABLE","$bind",223],")",";",["T_WHITESPACE","\n\n        ",223],["T_FOREACH","foreach",225],["T_WHITESPACE"," ",225],"(",["T_VARIABLE","$data",225],["T_WHITESPACE"," ",225],["T_AS","as",225],["T_WHITESPACE"," ",225],["T_VARIABLE","$item",225],")",["T_WHITESPACE"," ",225],"{",["T_WHITESPACE","\n            ",225],["T_VARIABLE","$rating",226],["T_WHITESPACE"," ",226],"=",["T_WHITESPACE"," ",226],["T_VARIABLE","$this",226],["T_OBJECT_OPERATOR","->",226],["T_STRING","getItemById",226],"(",["T_VARIABLE","$item",226],"[",["T_CONSTANT_ENCAPSED_STRING","'rating_id'",226],"]",")",";",["T_WHITESPACE","\n            ",226],["T_IF","if",227],["T_WHITESPACE"," ",227],"(",["T_VARIABLE","$rating",227],["T_WHITESPACE"," ",227],["T_BOOLEAN_AND","&&",227],["T_WHITESPACE"," ",227],["T_VARIABLE","$item",227],"[",["T_CONSTANT_ENCAPSED_STRING","'count'",227],"]",["T_WHITESPACE"," ",227],">",["T_WHITESPACE"," ",227],["T_LNUMBER","0",227],")",["T_WHITESPACE"," ",227],"{",["T_WHITESPACE","\n                ",227],["T_VARIABLE","$rating",228],["T_OBJECT_OPERATOR","->",228],["T_STRING","setSummary",228],"(",["T_VARIABLE","$item",228],"[",["T_CONSTANT_ENCAPSED_STRING","'sum'",228],"]",["T_WHITESPACE"," ",228],"\/",["T_WHITESPACE"," ",228],["T_VARIABLE","$item",228],"[",["T_CONSTANT_ENCAPSED_STRING","'count'",228],"]",")",";",["T_WHITESPACE","\n            ",228],"}",["T_WHITESPACE","\n        ",229],"}",["T_WHITESPACE","\n        ",230],["T_RETURN","return",231],["T_WHITESPACE"," ",231],["T_VARIABLE","$this",231],";",["T_WHITESPACE","\n    ",231],"}",["T_WHITESPACE","\n\n    ",232],["T_DOC_COMMENT","\/**\n     * Add rating store name\n     *\n     * @param int $storeId\n     * @return $this\n     *\/",234],["T_WHITESPACE","\n    ",239],["T_PUBLIC","public",240],["T_WHITESPACE"," ",240],["T_FUNCTION","function",240],["T_WHITESPACE"," ",240],["T_STRING","addRatingPerStoreName",240],"(",["T_VARIABLE","$storeId",240],")",["T_WHITESPACE","\n    ",240],"{",["T_WHITESPACE","\n        ",241],["T_VARIABLE","$connection",242],["T_WHITESPACE"," ",242],"=",["T_WHITESPACE"," ",242],["T_VARIABLE","$this",242],["T_OBJECT_OPERATOR","->",242],["T_STRING","getConnection",242],"(",")",";",["T_WHITESPACE","\n        ",242],["T_VARIABLE","$ratingCodeCond",243],["T_WHITESPACE"," ",243],"=",["T_WHITESPACE"," ",243],["T_VARIABLE","$connection",243],["T_OBJECT_OPERATOR","->",243],["T_STRING","getIfNullSql",243],"(",["T_CONSTANT_ENCAPSED_STRING","'title.value'",243],",",["T_WHITESPACE"," ",243],["T_CONSTANT_ENCAPSED_STRING","'main_table.rating_code'",243],")",";",["T_WHITESPACE","\n        ",243],["T_VARIABLE","$this",244],["T_OBJECT_OPERATOR","->",244],["T_STRING","getSelect",244],"(",")",["T_OBJECT_OPERATOR","->",244],["T_STRING","joinLeft",244],"(",["T_WHITESPACE","\n            ",244],"[",["T_CONSTANT_ENCAPSED_STRING","'title'",245],["T_WHITESPACE"," ",245],["T_DOUBLE_ARROW","=>",245],["T_WHITESPACE"," ",245],["T_VARIABLE","$this",245],["T_OBJECT_OPERATOR","->",245],["T_STRING","getTable",245],"(",["T_CONSTANT_ENCAPSED_STRING","'rating_title'",245],")","]",",",["T_WHITESPACE","\n            ",245],["T_VARIABLE","$connection",246],["T_OBJECT_OPERATOR","->",246],["T_STRING","quoteInto",246],"(",["T_CONSTANT_ENCAPSED_STRING","'main_table.rating_id=title.rating_id AND title.store_id = ?'",246],",",["T_WHITESPACE"," ",246],["T_INT_CAST","(int)",246],["T_VARIABLE","$storeId",246],")",",",["T_WHITESPACE","\n            ",246],"[",["T_CONSTANT_ENCAPSED_STRING","'rating_code'",247],["T_WHITESPACE"," ",247],["T_DOUBLE_ARROW","=>",247],["T_WHITESPACE"," ",247],["T_VARIABLE","$ratingCodeCond",247],"]",["T_WHITESPACE","\n        ",247],")",";",["T_WHITESPACE","\n        ",248],["T_RETURN","return",249],["T_WHITESPACE"," ",249],["T_VARIABLE","$this",249],";",["T_WHITESPACE","\n    ",249],"}",["T_WHITESPACE","\n\n    ",250],["T_DOC_COMMENT","\/**\n     * Add stores data to collection\n     *\n     * @return $this\n     *\/",252],["T_WHITESPACE","\n    ",256],["T_PUBLIC","public",257],["T_WHITESPACE"," ",257],["T_FUNCTION","function",257],["T_WHITESPACE"," ",257],["T_STRING","addStoreData",257],"(",")",["T_WHITESPACE","\n    ",257],"{",["T_WHITESPACE","\n        ",258],["T_IF","if",259],["T_WHITESPACE"," ",259],"(","!",["T_VARIABLE","$this",259],["T_OBJECT_OPERATOR","->",259],["T_STRING","_storeManager",259],["T_OBJECT_OPERATOR","->",259],["T_STRING","isSingleStoreMode",259],"(",")",")",["T_WHITESPACE"," ",259],"{",["T_WHITESPACE","\n            ",259],["T_IF","if",260],["T_WHITESPACE"," ",260],"(","!",["T_VARIABLE","$this",260],["T_OBJECT_OPERATOR","->",260],["T_STRING","_isCollectionLoaded",260],")",["T_WHITESPACE"," ",260],"{",["T_WHITESPACE","\n                ",260],["T_VARIABLE","$this",261],["T_OBJECT_OPERATOR","->",261],["T_STRING","_addStoreDataFlag",261],["T_WHITESPACE"," ",261],"=",["T_WHITESPACE"," ",261],["T_STRING","true",261],";",["T_WHITESPACE","\n            ",261],"}",["T_WHITESPACE"," ",262],["T_ELSEIF","elseif",262],["T_WHITESPACE"," ",262],"(","!",["T_VARIABLE","$this",262],["T_OBJECT_OPERATOR","->",262],["T_STRING","_addStoreDataFlag",262],")",["T_WHITESPACE"," ",262],"{",["T_WHITESPACE","\n                ",262],["T_VARIABLE","$this",263],["T_OBJECT_OPERATOR","->",263],["T_STRING","_addStoreData",263],"(",")",";",["T_WHITESPACE","\n            ",263],"}",["T_WHITESPACE","\n        ",264],"}",["T_WHITESPACE","\n\n        ",265],["T_RETURN","return",267],["T_WHITESPACE"," ",267],["T_VARIABLE","$this",267],";",["T_WHITESPACE","\n    ",267],"}",["T_WHITESPACE","\n\n    ",268],["T_DOC_COMMENT","\/**\n     * Load data\n     *\n     * @param bool $printQuery\n     * @param bool $logQuery\n     * @return $this\n     *\/",270],["T_WHITESPACE","\n    ",276],["T_PUBLIC","public",277],["T_WHITESPACE"," ",277],["T_FUNCTION","function",277],["T_WHITESPACE"," ",277],["T_STRING","load",277],"(",["T_VARIABLE","$printQuery",277],["T_WHITESPACE"," ",277],"=",["T_WHITESPACE"," ",277],["T_STRING","false",277],",",["T_WHITESPACE"," ",277],["T_VARIABLE","$logQuery",277],["T_WHITESPACE"," ",277],"=",["T_WHITESPACE"," ",277],["T_STRING","false",277],")",["T_WHITESPACE","\n    ",277],"{",["T_WHITESPACE","\n        ",278],["T_IF","if",279],["T_WHITESPACE"," ",279],"(",["T_VARIABLE","$this",279],["T_OBJECT_OPERATOR","->",279],["T_STRING","isLoaded",279],"(",")",")",["T_WHITESPACE"," ",279],"{",["T_WHITESPACE","\n            ",279],["T_RETURN","return",280],["T_WHITESPACE"," ",280],["T_VARIABLE","$this",280],";",["T_WHITESPACE","\n        ",280],"}",["T_WHITESPACE","\n        ",281],["T_VARIABLE","$this",282],["T_OBJECT_OPERATOR","->",282],["T_STRING","_eventManager",282],["T_OBJECT_OPERATOR","->",282],["T_STRING","dispatch",282],"(",["T_CONSTANT_ENCAPSED_STRING","'rating_rating_collection_load_before'",282],",",["T_WHITESPACE"," ",282],"[",["T_CONSTANT_ENCAPSED_STRING","'collection'",282],["T_WHITESPACE"," ",282],["T_DOUBLE_ARROW","=>",282],["T_WHITESPACE"," ",282],["T_VARIABLE","$this",282],"]",")",";",["T_WHITESPACE","\n        ",282],["T_STRING","parent",283],["T_DOUBLE_COLON","::",283],["T_STRING","load",283],"(",["T_VARIABLE","$printQuery",283],",",["T_WHITESPACE"," ",283],["T_VARIABLE","$logQuery",283],")",";",["T_WHITESPACE","\n        ",283],["T_IF","if",284],["T_WHITESPACE"," ",284],"(",["T_VARIABLE","$this",284],["T_OBJECT_OPERATOR","->",284],["T_STRING","_addStoreDataFlag",284],")",["T_WHITESPACE"," ",284],"{",["T_WHITESPACE","\n            ",284],["T_VARIABLE","$this",285],["T_OBJECT_OPERATOR","->",285],["T_STRING","_addStoreData",285],"(",")",";",["T_WHITESPACE","\n        ",285],"}",["T_WHITESPACE","\n        ",286],["T_RETURN","return",287],["T_WHITESPACE"," ",287],["T_VARIABLE","$this",287],";",["T_WHITESPACE","\n    ",287],"}",["T_WHITESPACE","\n\n    ",288],["T_DOC_COMMENT","\/**\n     * Add store data\n     *\n     * @return $this\n     *\/",290],["T_WHITESPACE","\n    ",294],["T_PROTECTED","protected",295],["T_WHITESPACE"," ",295],["T_FUNCTION","function",295],["T_WHITESPACE"," ",295],["T_STRING","_addStoreData",295],"(",")",["T_WHITESPACE","\n    ",295],"{",["T_WHITESPACE","\n        ",296],["T_VARIABLE","$ratingIds",297],["T_WHITESPACE"," ",297],"=",["T_WHITESPACE"," ",297],"[","]",";",["T_WHITESPACE","\n        ",297],["T_FOREACH","foreach",298],["T_WHITESPACE"," ",298],"(",["T_VARIABLE","$this",298],["T_WHITESPACE"," ",298],["T_AS","as",298],["T_WHITESPACE"," ",298],["T_VARIABLE","$item",298],")",["T_WHITESPACE"," ",298],"{",["T_WHITESPACE","\n            ",298],["T_VARIABLE","$ratingIds",299],"[","]",["T_WHITESPACE"," ",299],"=",["T_WHITESPACE"," ",299],["T_VARIABLE","$item",299],["T_OBJECT_OPERATOR","->",299],["T_STRING","getId",299],"(",")",";",["T_WHITESPACE","\n            ",299],["T_VARIABLE","$item",300],["T_OBJECT_OPERATOR","->",300],["T_STRING","setStores",300],"(","[","]",")",";",["T_WHITESPACE","\n        ",300],"}",["T_WHITESPACE","\n        ",301],["T_IF","if",302],["T_WHITESPACE"," ",302],"(","!",["T_VARIABLE","$ratingIds",302],")",["T_WHITESPACE"," ",302],"{",["T_WHITESPACE","\n            ",302],["T_RETURN","return",303],["T_WHITESPACE"," ",303],["T_VARIABLE","$this",303],";",["T_WHITESPACE","\n        ",303],"}",["T_WHITESPACE","\n        ",304],["T_VARIABLE","$connection",305],["T_WHITESPACE"," ",305],"=",["T_WHITESPACE"," ",305],["T_VARIABLE","$this",305],["T_OBJECT_OPERATOR","->",305],["T_STRING","getConnection",305],"(",")",";",["T_WHITESPACE","\n\n        ",305],["T_VARIABLE","$inCondition",307],["T_WHITESPACE"," ",307],"=",["T_WHITESPACE"," ",307],["T_VARIABLE","$connection",307],["T_OBJECT_OPERATOR","->",307],["T_STRING","prepareSqlCondition",307],"(",["T_CONSTANT_ENCAPSED_STRING","'rating_id'",307],",",["T_WHITESPACE"," ",307],"[",["T_CONSTANT_ENCAPSED_STRING","'in'",307],["T_WHITESPACE"," ",307],["T_DOUBLE_ARROW","=>",307],["T_WHITESPACE"," ",307],["T_VARIABLE","$ratingIds",307],"]",")",";",["T_WHITESPACE","\n\n        ",307],["T_VARIABLE","$this",309],["T_OBJECT_OPERATOR","->",309],["T_STRING","_select",309],["T_WHITESPACE"," ",309],"=",["T_WHITESPACE"," ",309],["T_VARIABLE","$connection",309],["T_OBJECT_OPERATOR","->",309],["T_STRING","select",309],"(",")",["T_OBJECT_OPERATOR","->",309],["T_STRING","from",309],"(",["T_VARIABLE","$this",309],["T_OBJECT_OPERATOR","->",309],["T_STRING","getTable",309],"(",["T_CONSTANT_ENCAPSED_STRING","'rating_store'",309],")",")",["T_OBJECT_OPERATOR","->",309],["T_STRING","where",309],"(",["T_VARIABLE","$inCondition",309],")",";",["T_WHITESPACE","\n\n        ",309],["T_VARIABLE","$data",311],["T_WHITESPACE"," ",311],"=",["T_WHITESPACE"," ",311],["T_VARIABLE","$connection",311],["T_OBJECT_OPERATOR","->",311],["T_STRING","fetchAll",311],"(",["T_VARIABLE","$this",311],["T_OBJECT_OPERATOR","->",311],["T_STRING","_select",311],")",";",["T_WHITESPACE","\n        ",311],["T_IF","if",312],["T_WHITESPACE"," ",312],"(",["T_STRING","is_array",312],"(",["T_VARIABLE","$data",312],")",["T_WHITESPACE"," ",312],["T_BOOLEAN_AND","&&",312],["T_WHITESPACE"," ",312],["T_STRING","count",312],"(",["T_VARIABLE","$data",312],")",["T_WHITESPACE"," ",312],">",["T_WHITESPACE"," ",312],["T_LNUMBER","0",312],")",["T_WHITESPACE"," ",312],"{",["T_WHITESPACE","\n            ",312],["T_FOREACH","foreach",313],["T_WHITESPACE"," ",313],"(",["T_VARIABLE","$data",313],["T_WHITESPACE"," ",313],["T_AS","as",313],["T_WHITESPACE"," ",313],["T_VARIABLE","$row",313],")",["T_WHITESPACE"," ",313],"{",["T_WHITESPACE","\n                ",313],["T_VARIABLE","$item",314],["T_WHITESPACE"," ",314],"=",["T_WHITESPACE"," ",314],["T_VARIABLE","$this",314],["T_OBJECT_OPERATOR","->",314],["T_STRING","getItemById",314],"(",["T_VARIABLE","$row",314],"[",["T_CONSTANT_ENCAPSED_STRING","'rating_id'",314],"]",")",";",["T_WHITESPACE","\n                ",314],["T_VARIABLE","$item",315],["T_OBJECT_OPERATOR","->",315],["T_STRING","setStores",315],"(",["T_STRING","array_merge",315],"(",["T_VARIABLE","$item",315],["T_OBJECT_OPERATOR","->",315],["T_STRING","getStores",315],"(",")",",",["T_WHITESPACE"," ",315],"[",["T_VARIABLE","$row",315],"[",["T_CONSTANT_ENCAPSED_STRING","'store_id'",315],"]","]",")",")",";",["T_WHITESPACE","\n            ",315],"}",["T_WHITESPACE","\n        ",316],"}",["T_WHITESPACE","\n        ",317],["T_RETURN","return",318],["T_WHITESPACE"," ",318],["T_VARIABLE","$this",318],";",["T_WHITESPACE","\n    ",318],"}",["T_WHITESPACE","\n\n    ",319],["T_DOC_COMMENT","\/**\n     * Set Active Filter\n     *\n     * @param bool $isActive\n     * @return $this\n     *\/",321],["T_WHITESPACE","\n    ",326],["T_PUBLIC","public",327],["T_WHITESPACE"," ",327],["T_FUNCTION","function",327],["T_WHITESPACE"," ",327],["T_STRING","setActiveFilter",327],"(",["T_VARIABLE","$isActive",327],["T_WHITESPACE"," ",327],"=",["T_WHITESPACE"," ",327],["T_STRING","true",327],")",["T_WHITESPACE","\n    ",327],"{",["T_WHITESPACE","\n        ",328],["T_VARIABLE","$this",329],["T_OBJECT_OPERATOR","->",329],["T_STRING","getSelect",329],"(",")",["T_OBJECT_OPERATOR","->",329],["T_STRING","where",329],"(",["T_CONSTANT_ENCAPSED_STRING","'main_table.is_active=?'",329],",",["T_WHITESPACE"," ",329],["T_VARIABLE","$isActive",329],")",";",["T_WHITESPACE","\n        ",329],["T_RETURN","return",330],["T_WHITESPACE"," ",330],["T_VARIABLE","$this",330],";",["T_WHITESPACE","\n    ",330],"}",["T_WHITESPACE","\n",331],"}",["T_WHITESPACE","\n",332]]
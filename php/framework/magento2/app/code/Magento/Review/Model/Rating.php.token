[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Copyright \u00c2\u00a9 2013-2017 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n *\/",2],["T_WHITESPACE","\n",5],["T_NAMESPACE","namespace",6],["T_WHITESPACE"," ",6],["T_STRING","Magento",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Review",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Model",6],";",["T_WHITESPACE","\n\n",6],["T_USE","use",8],["T_WHITESPACE"," ",8],["T_STRING","Magento",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Framework",8],["T_NS_SEPARATOR","\\",8],["T_STRING","DataObject",8],["T_NS_SEPARATOR","\\",8],["T_STRING","IdentityInterface",8],";",["T_WHITESPACE","\n\n",8],["T_DOC_COMMENT","\/**\n * Rating model\n *\n * @method \\Magento\\Review\\Model\\ResourceModel\\Rating getResource()\n * @method \\Magento\\Review\\Model\\ResourceModel\\Rating _getResource()\n * @method array getRatingCodes()\n * @method \\Magento\\Review\\Model\\Rating setRatingCodes(array $value)\n * @method array getStores()\n * @method \\Magento\\Review\\Model\\Rating setStores(array $value)\n * @method string getRatingCode()\n *\n * @author      Magento Core Team <core@magentocommerce.com>\n *\/",10],["T_WHITESPACE","\n",22],["T_CLASS","class",23],["T_WHITESPACE"," ",23],["T_STRING","Rating",23],["T_WHITESPACE"," ",23],["T_EXTENDS","extends",23],["T_WHITESPACE"," ",23],["T_NS_SEPARATOR","\\",23],["T_STRING","Magento",23],["T_NS_SEPARATOR","\\",23],["T_STRING","Framework",23],["T_NS_SEPARATOR","\\",23],["T_STRING","Model",23],["T_NS_SEPARATOR","\\",23],["T_STRING","AbstractModel",23],["T_WHITESPACE"," ",23],["T_IMPLEMENTS","implements",23],["T_WHITESPACE"," ",23],["T_STRING","IdentityInterface",23],["T_WHITESPACE","\n",23],"{",["T_WHITESPACE","\n    ",24],["T_DOC_COMMENT","\/**\n     * rating entity codes\n     *\/",25],["T_WHITESPACE","\n    ",27],["T_CONST","const",28],["T_WHITESPACE"," ",28],["T_STRING","ENTITY_PRODUCT_CODE",28],["T_WHITESPACE"," ",28],"=",["T_WHITESPACE"," ",28],["T_CONSTANT_ENCAPSED_STRING","'product'",28],";",["T_WHITESPACE","\n\n    ",28],["T_CONST","const",30],["T_WHITESPACE"," ",30],["T_STRING","ENTITY_PRODUCT_REVIEW_CODE",30],["T_WHITESPACE"," ",30],"=",["T_WHITESPACE"," ",30],["T_CONSTANT_ENCAPSED_STRING","'product_review'",30],";",["T_WHITESPACE","\n\n    ",30],["T_CONST","const",32],["T_WHITESPACE"," ",32],["T_STRING","ENTITY_REVIEW_CODE",32],["T_WHITESPACE"," ",32],"=",["T_WHITESPACE"," ",32],["T_CONSTANT_ENCAPSED_STRING","'review'",32],";",["T_WHITESPACE","\n\n    ",32],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Review\\Model\\Rating\\OptionFactory\n     *\/",34],["T_WHITESPACE","\n    ",36],["T_PROTECTED","protected",37],["T_WHITESPACE"," ",37],["T_VARIABLE","$_ratingOptionFactory",37],";",["T_WHITESPACE","\n\n    ",37],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Review\\Model\\ResourceModel\\Rating\\Option\\CollectionFactory\n     *\/",39],["T_WHITESPACE","\n    ",41],["T_PROTECTED","protected",42],["T_WHITESPACE"," ",42],["T_VARIABLE","$_ratingCollectionF",42],";",["T_WHITESPACE","\n\n    ",42],["T_DOC_COMMENT","\/**\n     * @param \\Magento\\Framework\\Model\\Context $context\n     * @param \\Magento\\Framework\\Registry $registry\n     * @param \\Magento\\Review\\Model\\Rating\\OptionFactory $ratingOptionFactory\n     * @param \\Magento\\Review\\Model\\ResourceModel\\Rating\\Option\\CollectionFactory $ratingCollectionF\n     * @param \\Magento\\Framework\\Model\\ResourceModel\\AbstractResource $resource\n     * @param \\Magento\\Framework\\Data\\Collection\\AbstractDb $resourceCollection\n     * @param array $data\n     *\/",44],["T_WHITESPACE","\n    ",52],["T_PUBLIC","public",53],["T_WHITESPACE"," ",53],["T_FUNCTION","function",53],["T_WHITESPACE"," ",53],["T_STRING","__construct",53],"(",["T_WHITESPACE","\n        ",53],["T_NS_SEPARATOR","\\",54],["T_STRING","Magento",54],["T_NS_SEPARATOR","\\",54],["T_STRING","Framework",54],["T_NS_SEPARATOR","\\",54],["T_STRING","Model",54],["T_NS_SEPARATOR","\\",54],["T_STRING","Context",54],["T_WHITESPACE"," ",54],["T_VARIABLE","$context",54],",",["T_WHITESPACE","\n        ",54],["T_NS_SEPARATOR","\\",55],["T_STRING","Magento",55],["T_NS_SEPARATOR","\\",55],["T_STRING","Framework",55],["T_NS_SEPARATOR","\\",55],["T_STRING","Registry",55],["T_WHITESPACE"," ",55],["T_VARIABLE","$registry",55],",",["T_WHITESPACE","\n        ",55],["T_NS_SEPARATOR","\\",56],["T_STRING","Magento",56],["T_NS_SEPARATOR","\\",56],["T_STRING","Review",56],["T_NS_SEPARATOR","\\",56],["T_STRING","Model",56],["T_NS_SEPARATOR","\\",56],["T_STRING","Rating",56],["T_NS_SEPARATOR","\\",56],["T_STRING","OptionFactory",56],["T_WHITESPACE"," ",56],["T_VARIABLE","$ratingOptionFactory",56],",",["T_WHITESPACE","\n        ",56],["T_NS_SEPARATOR","\\",57],["T_STRING","Magento",57],["T_NS_SEPARATOR","\\",57],["T_STRING","Review",57],["T_NS_SEPARATOR","\\",57],["T_STRING","Model",57],["T_NS_SEPARATOR","\\",57],["T_STRING","ResourceModel",57],["T_NS_SEPARATOR","\\",57],["T_STRING","Rating",57],["T_NS_SEPARATOR","\\",57],["T_STRING","Option",57],["T_NS_SEPARATOR","\\",57],["T_STRING","CollectionFactory",57],["T_WHITESPACE"," ",57],["T_VARIABLE","$ratingCollectionF",57],",",["T_WHITESPACE","\n        ",57],["T_NS_SEPARATOR","\\",58],["T_STRING","Magento",58],["T_NS_SEPARATOR","\\",58],["T_STRING","Framework",58],["T_NS_SEPARATOR","\\",58],["T_STRING","Model",58],["T_NS_SEPARATOR","\\",58],["T_STRING","ResourceModel",58],["T_NS_SEPARATOR","\\",58],["T_STRING","AbstractResource",58],["T_WHITESPACE"," ",58],["T_VARIABLE","$resource",58],["T_WHITESPACE"," ",58],"=",["T_WHITESPACE"," ",58],["T_STRING","null",58],",",["T_WHITESPACE","\n        ",58],["T_NS_SEPARATOR","\\",59],["T_STRING","Magento",59],["T_NS_SEPARATOR","\\",59],["T_STRING","Framework",59],["T_NS_SEPARATOR","\\",59],["T_STRING","Data",59],["T_NS_SEPARATOR","\\",59],["T_STRING","Collection",59],["T_NS_SEPARATOR","\\",59],["T_STRING","AbstractDb",59],["T_WHITESPACE"," ",59],["T_VARIABLE","$resourceCollection",59],["T_WHITESPACE"," ",59],"=",["T_WHITESPACE"," ",59],["T_STRING","null",59],",",["T_WHITESPACE","\n        ",59],["T_ARRAY","array",60],["T_WHITESPACE"," ",60],["T_VARIABLE","$data",60],["T_WHITESPACE"," ",60],"=",["T_WHITESPACE"," ",60],"[","]",["T_WHITESPACE","\n    ",60],")",["T_WHITESPACE"," ",61],"{",["T_WHITESPACE","\n        ",61],["T_VARIABLE","$this",62],["T_OBJECT_OPERATOR","->",62],["T_STRING","_ratingOptionFactory",62],["T_WHITESPACE"," ",62],"=",["T_WHITESPACE"," ",62],["T_VARIABLE","$ratingOptionFactory",62],";",["T_WHITESPACE","\n        ",62],["T_VARIABLE","$this",63],["T_OBJECT_OPERATOR","->",63],["T_STRING","_ratingCollectionF",63],["T_WHITESPACE"," ",63],"=",["T_WHITESPACE"," ",63],["T_VARIABLE","$ratingCollectionF",63],";",["T_WHITESPACE","\n        ",63],["T_STRING","parent",64],["T_DOUBLE_COLON","::",64],["T_STRING","__construct",64],"(",["T_VARIABLE","$context",64],",",["T_WHITESPACE"," ",64],["T_VARIABLE","$registry",64],",",["T_WHITESPACE"," ",64],["T_VARIABLE","$resource",64],",",["T_WHITESPACE"," ",64],["T_VARIABLE","$resourceCollection",64],",",["T_WHITESPACE"," ",64],["T_VARIABLE","$data",64],")",";",["T_WHITESPACE","\n    ",64],"}",["T_WHITESPACE","\n\n    ",65],["T_DOC_COMMENT","\/**\n     * Define resource model\n     *\n     * @return void\n     *\/",67],["T_WHITESPACE","\n    ",71],["T_PROTECTED","protected",72],["T_WHITESPACE"," ",72],["T_FUNCTION","function",72],["T_WHITESPACE"," ",72],["T_STRING","_construct",72],"(",")",["T_WHITESPACE","\n    ",72],"{",["T_WHITESPACE","\n        ",73],["T_VARIABLE","$this",74],["T_OBJECT_OPERATOR","->",74],["T_STRING","_init",74],"(",["T_NS_SEPARATOR","\\",74],["T_STRING","Magento",74],["T_NS_SEPARATOR","\\",74],["T_STRING","Review",74],["T_NS_SEPARATOR","\\",74],["T_STRING","Model",74],["T_NS_SEPARATOR","\\",74],["T_STRING","ResourceModel",74],["T_NS_SEPARATOR","\\",74],["T_STRING","Rating",74],["T_DOUBLE_COLON","::",74],["T_CLASS","class",74],")",";",["T_WHITESPACE","\n    ",74],"}",["T_WHITESPACE","\n\n    ",75],["T_DOC_COMMENT","\/**\n     * @param int $optionId\n     * @param int $entityPkValue\n     * @return $this\n     *\/",77],["T_WHITESPACE","\n    ",81],["T_PUBLIC","public",82],["T_WHITESPACE"," ",82],["T_FUNCTION","function",82],["T_WHITESPACE"," ",82],["T_STRING","addOptionVote",82],"(",["T_VARIABLE","$optionId",82],",",["T_WHITESPACE"," ",82],["T_VARIABLE","$entityPkValue",82],")",["T_WHITESPACE","\n    ",82],"{",["T_WHITESPACE","\n        ",83],["T_VARIABLE","$this",84],["T_OBJECT_OPERATOR","->",84],["T_STRING","_ratingOptionFactory",84],["T_OBJECT_OPERATOR","->",84],["T_STRING","create",84],"(",")",["T_OBJECT_OPERATOR","->",84],["T_STRING","setOptionId",84],"(",["T_WHITESPACE","\n            ",84],["T_VARIABLE","$optionId",85],["T_WHITESPACE","\n        ",85],")",["T_OBJECT_OPERATOR","->",86],["T_STRING","setRatingId",86],"(",["T_WHITESPACE","\n            ",86],["T_VARIABLE","$this",87],["T_OBJECT_OPERATOR","->",87],["T_STRING","getId",87],"(",")",["T_WHITESPACE","\n        ",87],")",["T_OBJECT_OPERATOR","->",88],["T_STRING","setReviewId",88],"(",["T_WHITESPACE","\n            ",88],["T_VARIABLE","$this",89],["T_OBJECT_OPERATOR","->",89],["T_STRING","getReviewId",89],"(",")",["T_WHITESPACE","\n        ",89],")",["T_OBJECT_OPERATOR","->",90],["T_STRING","setEntityPkValue",90],"(",["T_WHITESPACE","\n            ",90],["T_VARIABLE","$entityPkValue",91],["T_WHITESPACE","\n        ",91],")",["T_OBJECT_OPERATOR","->",92],["T_STRING","addVote",92],"(",")",";",["T_WHITESPACE","\n        ",92],["T_RETURN","return",93],["T_WHITESPACE"," ",93],["T_VARIABLE","$this",93],";",["T_WHITESPACE","\n    ",93],"}",["T_WHITESPACE","\n\n    ",94],["T_DOC_COMMENT","\/**\n     * @param int $optionId\n     * @return $this\n     *\/",96],["T_WHITESPACE","\n    ",99],["T_PUBLIC","public",100],["T_WHITESPACE"," ",100],["T_FUNCTION","function",100],["T_WHITESPACE"," ",100],["T_STRING","updateOptionVote",100],"(",["T_VARIABLE","$optionId",100],")",["T_WHITESPACE","\n    ",100],"{",["T_WHITESPACE","\n        ",101],["T_VARIABLE","$this",102],["T_OBJECT_OPERATOR","->",102],["T_STRING","_ratingOptionFactory",102],["T_OBJECT_OPERATOR","->",102],["T_STRING","create",102],"(",")",["T_OBJECT_OPERATOR","->",102],["T_STRING","setOptionId",102],"(",["T_WHITESPACE","\n            ",102],["T_VARIABLE","$optionId",103],["T_WHITESPACE","\n        ",103],")",["T_OBJECT_OPERATOR","->",104],["T_STRING","setVoteId",104],"(",["T_WHITESPACE","\n            ",104],["T_VARIABLE","$this",105],["T_OBJECT_OPERATOR","->",105],["T_STRING","getVoteId",105],"(",")",["T_WHITESPACE","\n        ",105],")",["T_OBJECT_OPERATOR","->",106],["T_STRING","setReviewId",106],"(",["T_WHITESPACE","\n            ",106],["T_VARIABLE","$this",107],["T_OBJECT_OPERATOR","->",107],["T_STRING","getReviewId",107],"(",")",["T_WHITESPACE","\n        ",107],")",["T_OBJECT_OPERATOR","->",108],["T_STRING","setDoUpdate",108],"(",["T_WHITESPACE","\n            ",108],["T_LNUMBER","1",109],["T_WHITESPACE","\n        ",109],")",["T_OBJECT_OPERATOR","->",110],["T_STRING","addVote",110],"(",")",";",["T_WHITESPACE","\n        ",110],["T_RETURN","return",111],["T_WHITESPACE"," ",111],["T_VARIABLE","$this",111],";",["T_WHITESPACE","\n    ",111],"}",["T_WHITESPACE","\n\n    ",112],["T_DOC_COMMENT","\/**\n     * retrieve rating options\n     *\n     * @return array\n     *\/",114],["T_WHITESPACE","\n    ",118],["T_PUBLIC","public",119],["T_WHITESPACE"," ",119],["T_FUNCTION","function",119],["T_WHITESPACE"," ",119],["T_STRING","getOptions",119],"(",")",["T_WHITESPACE","\n    ",119],"{",["T_WHITESPACE","\n        ",120],["T_VARIABLE","$options",121],["T_WHITESPACE"," ",121],"=",["T_WHITESPACE"," ",121],["T_VARIABLE","$this",121],["T_OBJECT_OPERATOR","->",121],["T_STRING","getData",121],"(",["T_CONSTANT_ENCAPSED_STRING","'options'",121],")",";",["T_WHITESPACE","\n        ",121],["T_IF","if",122],["T_WHITESPACE"," ",122],"(",["T_VARIABLE","$options",122],")",["T_WHITESPACE"," ",122],"{",["T_WHITESPACE","\n            ",122],["T_RETURN","return",123],["T_WHITESPACE"," ",123],["T_VARIABLE","$options",123],";",["T_WHITESPACE","\n        ",123],"}",["T_WHITESPACE"," ",124],["T_ELSEIF","elseif",124],["T_WHITESPACE"," ",124],"(",["T_VARIABLE","$this",124],["T_OBJECT_OPERATOR","->",124],["T_STRING","getId",124],"(",")",")",["T_WHITESPACE"," ",124],"{",["T_WHITESPACE","\n            ",124],["T_RETURN","return",125],["T_WHITESPACE"," ",125],["T_VARIABLE","$this",125],["T_OBJECT_OPERATOR","->",125],["T_STRING","_ratingCollectionF",125],["T_OBJECT_OPERATOR","->",125],["T_STRING","create",125],"(",")",["T_OBJECT_OPERATOR","->",125],["T_STRING","addRatingFilter",125],"(",["T_WHITESPACE","\n                ",125],["T_VARIABLE","$this",126],["T_OBJECT_OPERATOR","->",126],["T_STRING","getId",126],"(",")",["T_WHITESPACE","\n            ",126],")",["T_OBJECT_OPERATOR","->",127],["T_STRING","setPositionOrder",127],"(",")",["T_OBJECT_OPERATOR","->",127],["T_STRING","load",127],"(",")",["T_OBJECT_OPERATOR","->",127],["T_STRING","getItems",127],"(",")",";",["T_WHITESPACE","\n        ",127],"}",["T_WHITESPACE","\n        ",128],["T_RETURN","return",129],["T_WHITESPACE"," ",129],"[","]",";",["T_WHITESPACE","\n    ",129],"}",["T_WHITESPACE","\n\n    ",130],["T_DOC_COMMENT","\/**\n     * Get rating collection object\n     *\n     * @param int $entityPkValue\n     * @param bool $onlyForCurrentStore\n     * @return \\Magento\\Framework\\Data\\Collection\\AbstractDb\n     *\/",132],["T_WHITESPACE","\n    ",138],["T_PUBLIC","public",139],["T_WHITESPACE"," ",139],["T_FUNCTION","function",139],["T_WHITESPACE"," ",139],["T_STRING","getEntitySummary",139],"(",["T_VARIABLE","$entityPkValue",139],",",["T_WHITESPACE"," ",139],["T_VARIABLE","$onlyForCurrentStore",139],["T_WHITESPACE"," ",139],"=",["T_WHITESPACE"," ",139],["T_STRING","true",139],")",["T_WHITESPACE","\n    ",139],"{",["T_WHITESPACE","\n        ",140],["T_VARIABLE","$this",141],["T_OBJECT_OPERATOR","->",141],["T_STRING","setEntityPkValue",141],"(",["T_VARIABLE","$entityPkValue",141],")",";",["T_WHITESPACE","\n        ",141],["T_RETURN","return",142],["T_WHITESPACE"," ",142],["T_VARIABLE","$this",142],["T_OBJECT_OPERATOR","->",142],["T_STRING","_getResource",142],"(",")",["T_OBJECT_OPERATOR","->",142],["T_STRING","getEntitySummary",142],"(",["T_VARIABLE","$this",142],",",["T_WHITESPACE"," ",142],["T_VARIABLE","$onlyForCurrentStore",142],")",";",["T_WHITESPACE","\n    ",142],"}",["T_WHITESPACE","\n\n    ",143],["T_DOC_COMMENT","\/**\n     * @param int $reviewId\n     * @param bool $onlyForCurrentStore\n     * @return array\n     *\/",145],["T_WHITESPACE","\n    ",149],["T_PUBLIC","public",150],["T_WHITESPACE"," ",150],["T_FUNCTION","function",150],["T_WHITESPACE"," ",150],["T_STRING","getReviewSummary",150],"(",["T_VARIABLE","$reviewId",150],",",["T_WHITESPACE"," ",150],["T_VARIABLE","$onlyForCurrentStore",150],["T_WHITESPACE"," ",150],"=",["T_WHITESPACE"," ",150],["T_STRING","true",150],")",["T_WHITESPACE","\n    ",150],"{",["T_WHITESPACE","\n        ",151],["T_VARIABLE","$this",152],["T_OBJECT_OPERATOR","->",152],["T_STRING","setReviewId",152],"(",["T_VARIABLE","$reviewId",152],")",";",["T_WHITESPACE","\n        ",152],["T_RETURN","return",153],["T_WHITESPACE"," ",153],["T_VARIABLE","$this",153],["T_OBJECT_OPERATOR","->",153],["T_STRING","_getResource",153],"(",")",["T_OBJECT_OPERATOR","->",153],["T_STRING","getReviewSummary",153],"(",["T_VARIABLE","$this",153],",",["T_WHITESPACE"," ",153],["T_VARIABLE","$onlyForCurrentStore",153],")",";",["T_WHITESPACE","\n    ",153],"}",["T_WHITESPACE","\n\n    ",154],["T_DOC_COMMENT","\/**\n     * Get rating entity type id by code\n     *\n     * @param string $entityCode\n     * @return int\n     *\/",156],["T_WHITESPACE","\n    ",161],["T_PUBLIC","public",162],["T_WHITESPACE"," ",162],["T_FUNCTION","function",162],["T_WHITESPACE"," ",162],["T_STRING","getEntityIdByCode",162],"(",["T_VARIABLE","$entityCode",162],")",["T_WHITESPACE","\n    ",162],"{",["T_WHITESPACE","\n        ",163],["T_RETURN","return",164],["T_WHITESPACE"," ",164],["T_VARIABLE","$this",164],["T_OBJECT_OPERATOR","->",164],["T_STRING","getResource",164],"(",")",["T_OBJECT_OPERATOR","->",164],["T_STRING","getEntityIdByCode",164],"(",["T_VARIABLE","$entityCode",164],")",";",["T_WHITESPACE","\n    ",164],"}",["T_WHITESPACE","\n\n    ",165],["T_DOC_COMMENT","\/**\n     * Return unique ID(s) for each object in system\n     *\n     * @return array\n     *\/",167],["T_WHITESPACE","\n    ",171],["T_PUBLIC","public",172],["T_WHITESPACE"," ",172],["T_FUNCTION","function",172],["T_WHITESPACE"," ",172],["T_STRING","getIdentities",172],"(",")",["T_WHITESPACE","\n    ",172],"{",["T_WHITESPACE","\n        ",173],["T_COMMENT","\/\/ clear cache for all reviews\n",174],["T_WHITESPACE","        ",175],["T_RETURN","return",175],["T_WHITESPACE"," ",175],"[",["T_STRING","Review",175],["T_DOUBLE_COLON","::",175],["T_STRING","CACHE_TAG",175],"]",";",["T_WHITESPACE","\n    ",175],"}",["T_WHITESPACE","\n",176],"}",["T_WHITESPACE","\n",177]]
[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Copyright \u00c2\u00a9 2013-2017 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n *\/",2],["T_WHITESPACE","\n",5],["T_NAMESPACE","namespace",6],["T_WHITESPACE"," ",6],["T_STRING","Magento",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Braintree",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Model",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Adapter",6],";",["T_WHITESPACE","\n\n",6],["T_USE","use",8],["T_WHITESPACE"," ",8],["T_STRING","Braintree",8],["T_NS_SEPARATOR","\\",8],["T_STRING","ClientToken",8],";",["T_WHITESPACE","\n",8],["T_USE","use",9],["T_WHITESPACE"," ",9],["T_STRING","Braintree",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Configuration",9],";",["T_WHITESPACE","\n",9],["T_USE","use",10],["T_WHITESPACE"," ",10],["T_STRING","Braintree",10],["T_NS_SEPARATOR","\\",10],["T_STRING","CreditCard",10],";",["T_WHITESPACE","\n",10],["T_USE","use",11],["T_WHITESPACE"," ",11],["T_STRING","Braintree",11],["T_NS_SEPARATOR","\\",11],["T_STRING","PaymentMethodNonce",11],";",["T_WHITESPACE","\n",11],["T_USE","use",12],["T_WHITESPACE"," ",12],["T_STRING","Braintree",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Transaction",12],";",["T_WHITESPACE","\n",12],["T_USE","use",13],["T_WHITESPACE"," ",13],["T_STRING","Magento",13],["T_NS_SEPARATOR","\\",13],["T_STRING","Braintree",13],["T_NS_SEPARATOR","\\",13],["T_STRING","Gateway",13],["T_NS_SEPARATOR","\\",13],["T_STRING","Config",13],["T_NS_SEPARATOR","\\",13],["T_STRING","Config",13],";",["T_WHITESPACE","\n",13],["T_USE","use",14],["T_WHITESPACE"," ",14],["T_STRING","Magento",14],["T_NS_SEPARATOR","\\",14],["T_STRING","Braintree",14],["T_NS_SEPARATOR","\\",14],["T_STRING","Model",14],["T_NS_SEPARATOR","\\",14],["T_STRING","Adminhtml",14],["T_NS_SEPARATOR","\\",14],["T_STRING","Source",14],["T_NS_SEPARATOR","\\",14],["T_STRING","Environment",14],";",["T_WHITESPACE","\n\n",14],["T_DOC_COMMENT","\/**\n * Class BraintreeAdapter\n * @codeCoverageIgnore\n *\/",16],["T_WHITESPACE","\n",19],["T_CLASS","class",20],["T_WHITESPACE"," ",20],["T_STRING","BraintreeAdapter",20],["T_WHITESPACE","\n",20],"{",["T_WHITESPACE","\n\n    ",21],["T_DOC_COMMENT","\/**\n     * @var Config\n     *\/",23],["T_WHITESPACE","\n    ",25],["T_PRIVATE","private",26],["T_WHITESPACE"," ",26],["T_VARIABLE","$config",26],";",["T_WHITESPACE","\n\n    ",26],["T_DOC_COMMENT","\/**\n     * @param Config $config\n     *\/",28],["T_WHITESPACE","\n    ",30],["T_PUBLIC","public",31],["T_WHITESPACE"," ",31],["T_FUNCTION","function",31],["T_WHITESPACE"," ",31],["T_STRING","__construct",31],"(",["T_STRING","Config",31],["T_WHITESPACE"," ",31],["T_VARIABLE","$config",31],")",["T_WHITESPACE","\n    ",31],"{",["T_WHITESPACE","\n        ",32],["T_VARIABLE","$this",33],["T_OBJECT_OPERATOR","->",33],["T_STRING","config",33],["T_WHITESPACE"," ",33],"=",["T_WHITESPACE"," ",33],["T_VARIABLE","$config",33],";",["T_WHITESPACE","\n        ",33],["T_VARIABLE","$this",34],["T_OBJECT_OPERATOR","->",34],["T_STRING","initCredentials",34],"(",")",";",["T_WHITESPACE","\n    ",34],"}",["T_WHITESPACE","\n\n    ",35],["T_DOC_COMMENT","\/**\n     * Initializes credentials.\n     *\n     * @return void\n     *\/",37],["T_WHITESPACE","\n    ",41],["T_PROTECTED","protected",42],["T_WHITESPACE"," ",42],["T_FUNCTION","function",42],["T_WHITESPACE"," ",42],["T_STRING","initCredentials",42],"(",")",["T_WHITESPACE","\n    ",42],"{",["T_WHITESPACE","\n        ",43],["T_IF","if",44],["T_WHITESPACE"," ",44],"(",["T_VARIABLE","$this",44],["T_OBJECT_OPERATOR","->",44],["T_STRING","config",44],["T_OBJECT_OPERATOR","->",44],["T_STRING","getValue",44],"(",["T_STRING","Config",44],["T_DOUBLE_COLON","::",44],["T_STRING","KEY_ENVIRONMENT",44],")",["T_WHITESPACE"," ",44],["T_IS_EQUAL","==",44],["T_WHITESPACE"," ",44],["T_STRING","Environment",44],["T_DOUBLE_COLON","::",44],["T_STRING","ENVIRONMENT_PRODUCTION",44],")",["T_WHITESPACE"," ",44],"{",["T_WHITESPACE","\n            ",44],["T_VARIABLE","$this",45],["T_OBJECT_OPERATOR","->",45],["T_STRING","environment",45],"(",["T_STRING","Environment",45],["T_DOUBLE_COLON","::",45],["T_STRING","ENVIRONMENT_PRODUCTION",45],")",";",["T_WHITESPACE","\n        ",45],"}",["T_WHITESPACE"," ",46],["T_ELSE","else",46],["T_WHITESPACE"," ",46],"{",["T_WHITESPACE","\n            ",46],["T_VARIABLE","$this",47],["T_OBJECT_OPERATOR","->",47],["T_STRING","environment",47],"(",["T_STRING","Environment",47],["T_DOUBLE_COLON","::",47],["T_STRING","ENVIRONMENT_SANDBOX",47],")",";",["T_WHITESPACE","\n        ",47],"}",["T_WHITESPACE","\n        ",48],["T_VARIABLE","$this",49],["T_OBJECT_OPERATOR","->",49],["T_STRING","merchantId",49],"(",["T_VARIABLE","$this",49],["T_OBJECT_OPERATOR","->",49],["T_STRING","config",49],["T_OBJECT_OPERATOR","->",49],["T_STRING","getValue",49],"(",["T_STRING","Config",49],["T_DOUBLE_COLON","::",49],["T_STRING","KEY_MERCHANT_ID",49],")",")",";",["T_WHITESPACE","\n        ",49],["T_VARIABLE","$this",50],["T_OBJECT_OPERATOR","->",50],["T_STRING","publicKey",50],"(",["T_VARIABLE","$this",50],["T_OBJECT_OPERATOR","->",50],["T_STRING","config",50],["T_OBJECT_OPERATOR","->",50],["T_STRING","getValue",50],"(",["T_STRING","Config",50],["T_DOUBLE_COLON","::",50],["T_STRING","KEY_PUBLIC_KEY",50],")",")",";",["T_WHITESPACE","\n        ",50],["T_VARIABLE","$this",51],["T_OBJECT_OPERATOR","->",51],["T_STRING","privateKey",51],"(",["T_VARIABLE","$this",51],["T_OBJECT_OPERATOR","->",51],["T_STRING","config",51],["T_OBJECT_OPERATOR","->",51],["T_STRING","getValue",51],"(",["T_STRING","Config",51],["T_DOUBLE_COLON","::",51],["T_STRING","KEY_PRIVATE_KEY",51],")",")",";",["T_WHITESPACE","\n    ",51],"}",["T_WHITESPACE","\n\n    ",52],["T_DOC_COMMENT","\/**\n     * @param string|null $value\n     * @return mixed\n     *\/",54],["T_WHITESPACE","\n    ",57],["T_PUBLIC","public",58],["T_WHITESPACE"," ",58],["T_FUNCTION","function",58],["T_WHITESPACE"," ",58],["T_STRING","environment",58],"(",["T_VARIABLE","$value",58],["T_WHITESPACE"," ",58],"=",["T_WHITESPACE"," ",58],["T_STRING","null",58],")",["T_WHITESPACE","\n    ",58],"{",["T_WHITESPACE","\n        ",59],["T_RETURN","return",60],["T_WHITESPACE"," ",60],["T_STRING","Configuration",60],["T_DOUBLE_COLON","::",60],["T_STRING","environment",60],"(",["T_VARIABLE","$value",60],")",";",["T_WHITESPACE","\n    ",60],"}",["T_WHITESPACE","\n\n    ",61],["T_DOC_COMMENT","\/**\n     * @param string|null $value\n     * @return mixed\n     *\/",63],["T_WHITESPACE","\n    ",66],["T_PUBLIC","public",67],["T_WHITESPACE"," ",67],["T_FUNCTION","function",67],["T_WHITESPACE"," ",67],["T_STRING","merchantId",67],"(",["T_VARIABLE","$value",67],["T_WHITESPACE"," ",67],"=",["T_WHITESPACE"," ",67],["T_STRING","null",67],")",["T_WHITESPACE","\n    ",67],"{",["T_WHITESPACE","\n        ",68],["T_RETURN","return",69],["T_WHITESPACE"," ",69],["T_STRING","Configuration",69],["T_DOUBLE_COLON","::",69],["T_STRING","merchantId",69],"(",["T_VARIABLE","$value",69],")",";",["T_WHITESPACE","\n    ",69],"}",["T_WHITESPACE","\n\n    ",70],["T_DOC_COMMENT","\/**\n     * @param string|null $value\n     * @return mixed\n     *\/",72],["T_WHITESPACE","\n    ",75],["T_PUBLIC","public",76],["T_WHITESPACE"," ",76],["T_FUNCTION","function",76],["T_WHITESPACE"," ",76],["T_STRING","publicKey",76],"(",["T_VARIABLE","$value",76],["T_WHITESPACE"," ",76],"=",["T_WHITESPACE"," ",76],["T_STRING","null",76],")",["T_WHITESPACE","\n    ",76],"{",["T_WHITESPACE","\n        ",77],["T_RETURN","return",78],["T_WHITESPACE"," ",78],["T_STRING","Configuration",78],["T_DOUBLE_COLON","::",78],["T_STRING","publicKey",78],"(",["T_VARIABLE","$value",78],")",";",["T_WHITESPACE","\n    ",78],"}",["T_WHITESPACE","\n\n    ",79],["T_DOC_COMMENT","\/**\n     * @param string|null $value\n     * @return mixed\n     *\/",81],["T_WHITESPACE","\n    ",84],["T_PUBLIC","public",85],["T_WHITESPACE"," ",85],["T_FUNCTION","function",85],["T_WHITESPACE"," ",85],["T_STRING","privateKey",85],"(",["T_VARIABLE","$value",85],["T_WHITESPACE"," ",85],"=",["T_WHITESPACE"," ",85],["T_STRING","null",85],")",["T_WHITESPACE","\n    ",85],"{",["T_WHITESPACE","\n        ",86],["T_RETURN","return",87],["T_WHITESPACE"," ",87],["T_STRING","Configuration",87],["T_DOUBLE_COLON","::",87],["T_STRING","privateKey",87],"(",["T_VARIABLE","$value",87],")",";",["T_WHITESPACE","\n    ",87],"}",["T_WHITESPACE","\n\n    ",88],["T_DOC_COMMENT","\/**\n     * @param array $params\n     * @return \\Braintree\\Result\\Successful|\\Braintree\\Result\\Error|null\n     *\/",90],["T_WHITESPACE","\n    ",93],["T_PUBLIC","public",94],["T_WHITESPACE"," ",94],["T_FUNCTION","function",94],["T_WHITESPACE"," ",94],["T_STRING","generate",94],"(",["T_ARRAY","array",94],["T_WHITESPACE"," ",94],["T_VARIABLE","$params",94],["T_WHITESPACE"," ",94],"=",["T_WHITESPACE"," ",94],"[","]",")",["T_WHITESPACE","\n    ",94],"{",["T_WHITESPACE","\n        ",95],["T_TRY","try",96],["T_WHITESPACE"," ",96],"{",["T_WHITESPACE","\n            ",96],["T_RETURN","return",97],["T_WHITESPACE"," ",97],["T_STRING","ClientToken",97],["T_DOUBLE_COLON","::",97],["T_STRING","generate",97],"(",["T_VARIABLE","$params",97],")",";",["T_WHITESPACE","\n        ",97],"}",["T_WHITESPACE"," ",98],["T_CATCH","catch",98],["T_WHITESPACE"," ",98],"(",["T_NS_SEPARATOR","\\",98],["T_STRING","Exception",98],["T_WHITESPACE"," ",98],["T_VARIABLE","$e",98],")",["T_WHITESPACE"," ",98],"{",["T_WHITESPACE","\n            ",98],["T_RETURN","return",99],["T_WHITESPACE"," ",99],["T_STRING","null",99],";",["T_WHITESPACE","\n        ",99],"}",["T_WHITESPACE","\n    ",100],"}",["T_WHITESPACE","\n\n    ",101],["T_DOC_COMMENT","\/**\n     * @param string $token\n     * @return \\Braintree\\CreditCard|null\n     *\/",103],["T_WHITESPACE","\n    ",106],["T_PUBLIC","public",107],["T_WHITESPACE"," ",107],["T_FUNCTION","function",107],["T_WHITESPACE"," ",107],["T_STRING","find",107],"(",["T_VARIABLE","$token",107],")",["T_WHITESPACE","\n    ",107],"{",["T_WHITESPACE","\n        ",108],["T_TRY","try",109],["T_WHITESPACE"," ",109],"{",["T_WHITESPACE","\n            ",109],["T_RETURN","return",110],["T_WHITESPACE"," ",110],["T_STRING","CreditCard",110],["T_DOUBLE_COLON","::",110],["T_STRING","find",110],"(",["T_VARIABLE","$token",110],")",";",["T_WHITESPACE","\n        ",110],"}",["T_WHITESPACE"," ",111],["T_CATCH","catch",111],["T_WHITESPACE"," ",111],"(",["T_NS_SEPARATOR","\\",111],["T_STRING","Exception",111],["T_WHITESPACE"," ",111],["T_VARIABLE","$e",111],")",["T_WHITESPACE"," ",111],"{",["T_WHITESPACE","\n            ",111],["T_RETURN","return",112],["T_WHITESPACE"," ",112],["T_STRING","null",112],";",["T_WHITESPACE","\n        ",112],"}",["T_WHITESPACE","\n    ",113],"}",["T_WHITESPACE","\n\n    ",114],["T_DOC_COMMENT","\/**\n     * @param array $filters\n     * @return \\Braintree\\ResourceCollection\n     *\/",116],["T_WHITESPACE","\n    ",119],["T_PUBLIC","public",120],["T_WHITESPACE"," ",120],["T_FUNCTION","function",120],["T_WHITESPACE"," ",120],["T_STRING","search",120],"(",["T_ARRAY","array",120],["T_WHITESPACE"," ",120],["T_VARIABLE","$filters",120],")",["T_WHITESPACE","\n    ",120],"{",["T_WHITESPACE","\n        ",121],["T_RETURN","return",122],["T_WHITESPACE"," ",122],["T_STRING","Transaction",122],["T_DOUBLE_COLON","::",122],["T_STRING","search",122],"(",["T_VARIABLE","$filters",122],")",";",["T_WHITESPACE","\n    ",122],"}",["T_WHITESPACE","\n\n    ",123],["T_DOC_COMMENT","\/**\n     * @param string $token\n     * @return \\Braintree\\Result\\Successful|\\Braintree\\Result\\Error\n     *\/",125],["T_WHITESPACE","\n    ",128],["T_PUBLIC","public",129],["T_WHITESPACE"," ",129],["T_FUNCTION","function",129],["T_WHITESPACE"," ",129],["T_STRING","createNonce",129],"(",["T_VARIABLE","$token",129],")",["T_WHITESPACE","\n    ",129],"{",["T_WHITESPACE","\n        ",130],["T_RETURN","return",131],["T_WHITESPACE"," ",131],["T_STRING","PaymentMethodNonce",131],["T_DOUBLE_COLON","::",131],["T_STRING","create",131],"(",["T_VARIABLE","$token",131],")",";",["T_WHITESPACE","\n    ",131],"}",["T_WHITESPACE","\n\n    ",132],["T_DOC_COMMENT","\/**\n     * @param array $attributes\n     * @return \\Braintree\\Result\\Successful|\\Braintree\\Result\\Error\n     *\/",134],["T_WHITESPACE","\n    ",137],["T_PUBLIC","public",138],["T_WHITESPACE"," ",138],["T_FUNCTION","function",138],["T_WHITESPACE"," ",138],["T_STRING","sale",138],"(",["T_ARRAY","array",138],["T_WHITESPACE"," ",138],["T_VARIABLE","$attributes",138],")",["T_WHITESPACE","\n    ",138],"{",["T_WHITESPACE","\n        ",139],["T_RETURN","return",140],["T_WHITESPACE"," ",140],["T_STRING","Transaction",140],["T_DOUBLE_COLON","::",140],["T_STRING","sale",140],"(",["T_VARIABLE","$attributes",140],")",";",["T_WHITESPACE","\n    ",140],"}",["T_WHITESPACE","\n\n    ",141],["T_DOC_COMMENT","\/**\n     * @param string $transactionId\n     * @param null|float $amount\n     * @return \\Braintree\\Result\\Successful|\\Braintree\\Result\\Error\n     *\/",143],["T_WHITESPACE","\n    ",147],["T_PUBLIC","public",148],["T_WHITESPACE"," ",148],["T_FUNCTION","function",148],["T_WHITESPACE"," ",148],["T_STRING","submitForSettlement",148],"(",["T_VARIABLE","$transactionId",148],",",["T_WHITESPACE"," ",148],["T_VARIABLE","$amount",148],["T_WHITESPACE"," ",148],"=",["T_WHITESPACE"," ",148],["T_STRING","null",148],")",["T_WHITESPACE","\n    ",148],"{",["T_WHITESPACE","\n        ",149],["T_RETURN","return",150],["T_WHITESPACE"," ",150],["T_STRING","Transaction",150],["T_DOUBLE_COLON","::",150],["T_STRING","submitForSettlement",150],"(",["T_VARIABLE","$transactionId",150],",",["T_WHITESPACE"," ",150],["T_VARIABLE","$amount",150],")",";",["T_WHITESPACE","\n    ",150],"}",["T_WHITESPACE","\n\n    ",151],["T_DOC_COMMENT","\/**\n     * @param string $transactionId\n     * @return \\Braintree\\Result\\Successful|\\Braintree\\Result\\Error\n     *\/",153],["T_WHITESPACE","\n    ",156],["T_PUBLIC","public",157],["T_WHITESPACE"," ",157],["T_FUNCTION","function",157],["T_WHITESPACE"," ",157],["T_STRING","void",157],"(",["T_VARIABLE","$transactionId",157],")",["T_WHITESPACE","\n    ",157],"{",["T_WHITESPACE","\n        ",158],["T_RETURN","return",159],["T_WHITESPACE"," ",159],["T_STRING","Transaction",159],["T_DOUBLE_COLON","::",159],["T_STRING","void",159],"(",["T_VARIABLE","$transactionId",159],")",";",["T_WHITESPACE","\n    ",159],"}",["T_WHITESPACE","\n\n    ",160],["T_DOC_COMMENT","\/**\n     * @param string $transactionId\n     * @param null|float $amount\n     * @return \\Braintree\\Result\\Successful|\\Braintree\\Result\\Error\n     *\/",162],["T_WHITESPACE","\n    ",166],["T_PUBLIC","public",167],["T_WHITESPACE"," ",167],["T_FUNCTION","function",167],["T_WHITESPACE"," ",167],["T_STRING","refund",167],"(",["T_VARIABLE","$transactionId",167],",",["T_WHITESPACE"," ",167],["T_VARIABLE","$amount",167],["T_WHITESPACE"," ",167],"=",["T_WHITESPACE"," ",167],["T_STRING","null",167],")",["T_WHITESPACE","\n    ",167],"{",["T_WHITESPACE","\n        ",168],["T_RETURN","return",169],["T_WHITESPACE"," ",169],["T_STRING","Transaction",169],["T_DOUBLE_COLON","::",169],["T_STRING","refund",169],"(",["T_VARIABLE","$transactionId",169],",",["T_WHITESPACE"," ",169],["T_VARIABLE","$amount",169],")",";",["T_WHITESPACE","\n    ",169],"}",["T_WHITESPACE","\n\n    ",170],["T_DOC_COMMENT","\/**\n     * Clone original transaction\n     * @param string $transactionId\n     * @param array $attributes\n     * @return mixed\n     *\/",172],["T_WHITESPACE","\n    ",177],["T_PUBLIC","public",178],["T_WHITESPACE"," ",178],["T_FUNCTION","function",178],["T_WHITESPACE"," ",178],["T_STRING","cloneTransaction",178],"(",["T_VARIABLE","$transactionId",178],",",["T_WHITESPACE"," ",178],["T_ARRAY","array",178],["T_WHITESPACE"," ",178],["T_VARIABLE","$attributes",178],")",["T_WHITESPACE","\n    ",178],"{",["T_WHITESPACE","\n        ",179],["T_RETURN","return",180],["T_WHITESPACE"," ",180],["T_STRING","Transaction",180],["T_DOUBLE_COLON","::",180],["T_STRING","cloneTransaction",180],"(",["T_VARIABLE","$transactionId",180],",",["T_WHITESPACE"," ",180],["T_VARIABLE","$attributes",180],")",";",["T_WHITESPACE","\n    ",180],"}",["T_WHITESPACE","\n",181],"}",["T_WHITESPACE","\n",182]]
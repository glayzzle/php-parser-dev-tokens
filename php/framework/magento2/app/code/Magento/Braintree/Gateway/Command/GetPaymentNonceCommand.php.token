[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Copyright \u00c2\u00a9 2013-2017 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n *\/",2],["T_WHITESPACE","\n\n",5],["T_NAMESPACE","namespace",7],["T_WHITESPACE"," ",7],["T_STRING","Magento",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Braintree",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Gateway",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Command",7],";",["T_WHITESPACE","\n\n",7],["T_USE","use",9],["T_WHITESPACE"," ",9],["T_STRING","Exception",9],";",["T_WHITESPACE","\n",9],["T_USE","use",10],["T_WHITESPACE"," ",10],["T_STRING","Magento",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Braintree",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Gateway",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Helper",10],["T_NS_SEPARATOR","\\",10],["T_STRING","SubjectReader",10],";",["T_WHITESPACE","\n",10],["T_USE","use",11],["T_WHITESPACE"," ",11],["T_STRING","Magento",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Braintree",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Gateway",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Validator",11],["T_NS_SEPARATOR","\\",11],["T_STRING","PaymentNonceResponseValidator",11],";",["T_WHITESPACE","\n",11],["T_USE","use",12],["T_WHITESPACE"," ",12],["T_STRING","Magento",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Braintree",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Model",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Adapter",12],["T_NS_SEPARATOR","\\",12],["T_STRING","BraintreeAdapter",12],";",["T_WHITESPACE","\n",12],["T_USE","use",13],["T_WHITESPACE"," ",13],["T_STRING","Magento",13],["T_NS_SEPARATOR","\\",13],["T_STRING","Payment",13],["T_NS_SEPARATOR","\\",13],["T_STRING","Gateway",13],["T_NS_SEPARATOR","\\",13],["T_STRING","Command",13],";",["T_WHITESPACE","\n",13],["T_USE","use",14],["T_WHITESPACE"," ",14],["T_STRING","Magento",14],["T_NS_SEPARATOR","\\",14],["T_STRING","Payment",14],["T_NS_SEPARATOR","\\",14],["T_STRING","Gateway",14],["T_NS_SEPARATOR","\\",14],["T_STRING","Command",14],["T_NS_SEPARATOR","\\",14],["T_STRING","Result",14],["T_NS_SEPARATOR","\\",14],["T_STRING","ArrayResultFactory",14],";",["T_WHITESPACE","\n",14],["T_USE","use",15],["T_WHITESPACE"," ",15],["T_STRING","Magento",15],["T_NS_SEPARATOR","\\",15],["T_STRING","Payment",15],["T_NS_SEPARATOR","\\",15],["T_STRING","Gateway",15],["T_NS_SEPARATOR","\\",15],["T_STRING","CommandInterface",15],";",["T_WHITESPACE","\n",15],["T_USE","use",16],["T_WHITESPACE"," ",16],["T_STRING","Magento",16],["T_NS_SEPARATOR","\\",16],["T_STRING","Vault",16],["T_NS_SEPARATOR","\\",16],["T_STRING","Api",16],["T_NS_SEPARATOR","\\",16],["T_STRING","PaymentTokenManagementInterface",16],";",["T_WHITESPACE","\n\n",16],["T_DOC_COMMENT","\/**\n * Class GetPaymentNonceCommand\n *\/",18],["T_WHITESPACE","\n",20],["T_CLASS","class",21],["T_WHITESPACE"," ",21],["T_STRING","GetPaymentNonceCommand",21],["T_WHITESPACE"," ",21],["T_IMPLEMENTS","implements",21],["T_WHITESPACE"," ",21],["T_STRING","CommandInterface",21],["T_WHITESPACE","\n",21],"{",["T_WHITESPACE","\n\n    ",22],["T_DOC_COMMENT","\/**\n     * @var PaymentTokenManagementInterface\n     *\/",24],["T_WHITESPACE","\n    ",26],["T_PRIVATE","private",27],["T_WHITESPACE"," ",27],["T_VARIABLE","$tokenManagement",27],";",["T_WHITESPACE","\n\n    ",27],["T_DOC_COMMENT","\/**\n     * @var BraintreeAdapter\n     *\/",29],["T_WHITESPACE","\n    ",31],["T_PRIVATE","private",32],["T_WHITESPACE"," ",32],["T_VARIABLE","$adapter",32],";",["T_WHITESPACE","\n\n    ",32],["T_DOC_COMMENT","\/**\n     * @var ArrayResultFactory\n     *\/",34],["T_WHITESPACE","\n    ",36],["T_PRIVATE","private",37],["T_WHITESPACE"," ",37],["T_VARIABLE","$resultFactory",37],";",["T_WHITESPACE","\n\n    ",37],["T_DOC_COMMENT","\/**\n     * @var SubjectReader\n     *\/",39],["T_WHITESPACE","\n    ",41],["T_PRIVATE","private",42],["T_WHITESPACE"," ",42],["T_VARIABLE","$subjectReader",42],";",["T_WHITESPACE","\n\n    ",42],["T_DOC_COMMENT","\/**\n     * @var PaymentNonceResponseValidator\n     *\/",44],["T_WHITESPACE","\n    ",46],["T_PRIVATE","private",47],["T_WHITESPACE"," ",47],["T_VARIABLE","$responseValidator",47],";",["T_WHITESPACE","\n\n    ",47],["T_DOC_COMMENT","\/**\n     * @param PaymentTokenManagementInterface $tokenManagement\n     * @param BraintreeAdapter $adapter\n     * @param ArrayResultFactory $resultFactory\n     * @param SubjectReader $subjectReader\n     * @param PaymentNonceResponseValidator $responseValidator\n     *\/",49],["T_WHITESPACE","\n    ",55],["T_PUBLIC","public",56],["T_WHITESPACE"," ",56],["T_FUNCTION","function",56],["T_WHITESPACE"," ",56],["T_STRING","__construct",56],"(",["T_WHITESPACE","\n        ",56],["T_STRING","PaymentTokenManagementInterface",57],["T_WHITESPACE"," ",57],["T_VARIABLE","$tokenManagement",57],",",["T_WHITESPACE","\n        ",57],["T_STRING","BraintreeAdapter",58],["T_WHITESPACE"," ",58],["T_VARIABLE","$adapter",58],",",["T_WHITESPACE","\n        ",58],["T_STRING","ArrayResultFactory",59],["T_WHITESPACE"," ",59],["T_VARIABLE","$resultFactory",59],",",["T_WHITESPACE","\n        ",59],["T_STRING","SubjectReader",60],["T_WHITESPACE"," ",60],["T_VARIABLE","$subjectReader",60],",",["T_WHITESPACE","\n        ",60],["T_STRING","PaymentNonceResponseValidator",61],["T_WHITESPACE"," ",61],["T_VARIABLE","$responseValidator",61],["T_WHITESPACE","\n    ",61],")",["T_WHITESPACE"," ",62],"{",["T_WHITESPACE","\n        ",62],["T_VARIABLE","$this",63],["T_OBJECT_OPERATOR","->",63],["T_STRING","tokenManagement",63],["T_WHITESPACE"," ",63],"=",["T_WHITESPACE"," ",63],["T_VARIABLE","$tokenManagement",63],";",["T_WHITESPACE","\n        ",63],["T_VARIABLE","$this",64],["T_OBJECT_OPERATOR","->",64],["T_STRING","adapter",64],["T_WHITESPACE"," ",64],"=",["T_WHITESPACE"," ",64],["T_VARIABLE","$adapter",64],";",["T_WHITESPACE","\n        ",64],["T_VARIABLE","$this",65],["T_OBJECT_OPERATOR","->",65],["T_STRING","resultFactory",65],["T_WHITESPACE"," ",65],"=",["T_WHITESPACE"," ",65],["T_VARIABLE","$resultFactory",65],";",["T_WHITESPACE","\n        ",65],["T_VARIABLE","$this",66],["T_OBJECT_OPERATOR","->",66],["T_STRING","subjectReader",66],["T_WHITESPACE"," ",66],"=",["T_WHITESPACE"," ",66],["T_VARIABLE","$subjectReader",66],";",["T_WHITESPACE","\n        ",66],["T_VARIABLE","$this",67],["T_OBJECT_OPERATOR","->",67],["T_STRING","responseValidator",67],["T_WHITESPACE"," ",67],"=",["T_WHITESPACE"," ",67],["T_VARIABLE","$responseValidator",67],";",["T_WHITESPACE","\n    ",67],"}",["T_WHITESPACE","\n\n    ",68],["T_DOC_COMMENT","\/**\n     * @inheritdoc\n     * @throws \\Exception\n     *\/",70],["T_WHITESPACE","\n    ",73],["T_PUBLIC","public",74],["T_WHITESPACE"," ",74],["T_FUNCTION","function",74],["T_WHITESPACE"," ",74],["T_STRING","execute",74],"(",["T_ARRAY","array",74],["T_WHITESPACE"," ",74],["T_VARIABLE","$commandSubject",74],")",["T_WHITESPACE","\n    ",74],"{",["T_WHITESPACE","\n        ",75],["T_VARIABLE","$publicHash",76],["T_WHITESPACE"," ",76],"=",["T_WHITESPACE"," ",76],["T_VARIABLE","$this",76],["T_OBJECT_OPERATOR","->",76],["T_STRING","subjectReader",76],["T_OBJECT_OPERATOR","->",76],["T_STRING","readPublicHash",76],"(",["T_VARIABLE","$commandSubject",76],")",";",["T_WHITESPACE","\n        ",76],["T_VARIABLE","$customerId",77],["T_WHITESPACE"," ",77],"=",["T_WHITESPACE"," ",77],["T_VARIABLE","$this",77],["T_OBJECT_OPERATOR","->",77],["T_STRING","subjectReader",77],["T_OBJECT_OPERATOR","->",77],["T_STRING","readCustomerId",77],"(",["T_VARIABLE","$commandSubject",77],")",";",["T_WHITESPACE","\n        ",77],["T_VARIABLE","$paymentToken",78],["T_WHITESPACE"," ",78],"=",["T_WHITESPACE"," ",78],["T_VARIABLE","$this",78],["T_OBJECT_OPERATOR","->",78],["T_STRING","tokenManagement",78],["T_OBJECT_OPERATOR","->",78],["T_STRING","getByPublicHash",78],"(",["T_VARIABLE","$publicHash",78],",",["T_WHITESPACE"," ",78],["T_VARIABLE","$customerId",78],")",";",["T_WHITESPACE","\n        ",78],["T_IF","if",79],["T_WHITESPACE"," ",79],"(","!",["T_VARIABLE","$paymentToken",79],")",["T_WHITESPACE"," ",79],"{",["T_WHITESPACE","\n            ",79],["T_THROW","throw",80],["T_WHITESPACE"," ",80],["T_NEW","new",80],["T_WHITESPACE"," ",80],["T_STRING","Exception",80],"(",["T_CONSTANT_ENCAPSED_STRING","'No available payment tokens'",80],")",";",["T_WHITESPACE","\n        ",80],"}",["T_WHITESPACE","\n\n        ",81],["T_VARIABLE","$data",83],["T_WHITESPACE"," ",83],"=",["T_WHITESPACE"," ",83],["T_VARIABLE","$this",83],["T_OBJECT_OPERATOR","->",83],["T_STRING","adapter",83],["T_OBJECT_OPERATOR","->",83],["T_STRING","createNonce",83],"(",["T_VARIABLE","$paymentToken",83],["T_OBJECT_OPERATOR","->",83],["T_STRING","getGatewayToken",83],"(",")",")",";",["T_WHITESPACE","\n        ",83],["T_VARIABLE","$result",84],["T_WHITESPACE"," ",84],"=",["T_WHITESPACE"," ",84],["T_VARIABLE","$this",84],["T_OBJECT_OPERATOR","->",84],["T_STRING","responseValidator",84],["T_OBJECT_OPERATOR","->",84],["T_STRING","validate",84],"(","[",["T_CONSTANT_ENCAPSED_STRING","'response'",84],["T_WHITESPACE"," ",84],["T_DOUBLE_ARROW","=>",84],["T_WHITESPACE"," ",84],"[",["T_CONSTANT_ENCAPSED_STRING","'object'",84],["T_WHITESPACE"," ",84],["T_DOUBLE_ARROW","=>",84],["T_WHITESPACE"," ",84],["T_VARIABLE","$data",84],"]","]",")",";",["T_WHITESPACE","\n\n        ",84],["T_IF","if",86],["T_WHITESPACE"," ",86],"(","!",["T_VARIABLE","$result",86],["T_OBJECT_OPERATOR","->",86],["T_STRING","isValid",86],"(",")",")",["T_WHITESPACE"," ",86],"{",["T_WHITESPACE","\n            ",86],["T_THROW","throw",87],["T_WHITESPACE"," ",87],["T_NEW","new",87],["T_WHITESPACE"," ",87],["T_STRING","Exception",87],"(",["T_STRING","__",87],"(",["T_STRING","implode",87],"(",["T_CONSTANT_ENCAPSED_STRING","\"\\n\"",87],",",["T_WHITESPACE"," ",87],["T_VARIABLE","$result",87],["T_OBJECT_OPERATOR","->",87],["T_STRING","getFailsDescription",87],"(",")",")",")",")",";",["T_WHITESPACE","\n        ",87],"}",["T_WHITESPACE","\n\n        ",88],["T_RETURN","return",90],["T_WHITESPACE"," ",90],["T_VARIABLE","$this",90],["T_OBJECT_OPERATOR","->",90],["T_STRING","resultFactory",90],["T_OBJECT_OPERATOR","->",90],["T_STRING","create",90],"(","[",["T_CONSTANT_ENCAPSED_STRING","'array'",90],["T_WHITESPACE"," ",90],["T_DOUBLE_ARROW","=>",90],["T_WHITESPACE"," ",90],"[",["T_CONSTANT_ENCAPSED_STRING","'paymentMethodNonce'",90],["T_WHITESPACE"," ",90],["T_DOUBLE_ARROW","=>",90],["T_WHITESPACE"," ",90],["T_VARIABLE","$data",90],["T_OBJECT_OPERATOR","->",90],["T_STRING","paymentMethodNonce",90],["T_OBJECT_OPERATOR","->",90],["T_STRING","nonce",90],"]","]",")",";",["T_WHITESPACE","\n    ",90],"}",["T_WHITESPACE","\n",91],"}",["T_WHITESPACE","\n",92]]
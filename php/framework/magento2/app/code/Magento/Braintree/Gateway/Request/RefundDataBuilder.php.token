[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Copyright \u00c2\u00a9 2013-2017 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n *\/",2],["T_WHITESPACE","\n",5],["T_NAMESPACE","namespace",6],["T_WHITESPACE"," ",6],["T_STRING","Magento",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Braintree",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Gateway",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Request",6],";",["T_WHITESPACE","\n\n",6],["T_USE","use",8],["T_WHITESPACE"," ",8],["T_STRING","Magento",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Braintree",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Gateway",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Helper",8],["T_NS_SEPARATOR","\\",8],["T_STRING","SubjectReader",8],";",["T_WHITESPACE","\n",8],["T_USE","use",9],["T_WHITESPACE"," ",9],["T_STRING","Magento",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Payment",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Gateway",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Request",9],["T_NS_SEPARATOR","\\",9],["T_STRING","BuilderInterface",9],";",["T_WHITESPACE","\n",9],["T_USE","use",10],["T_WHITESPACE"," ",10],["T_STRING","Magento",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Payment",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Helper",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Formatter",10],";",["T_WHITESPACE","\n",10],["T_USE","use",11],["T_WHITESPACE"," ",11],["T_STRING","Magento",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Sales",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Api",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Data",11],["T_NS_SEPARATOR","\\",11],["T_STRING","TransactionInterface",11],";",["T_WHITESPACE","\n",11],["T_USE","use",12],["T_WHITESPACE"," ",12],["T_STRING","Magento",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Sales",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Model",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Order",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Payment",12],";",["T_WHITESPACE","\n\n",12],["T_CLASS","class",14],["T_WHITESPACE"," ",14],["T_STRING","RefundDataBuilder",14],["T_WHITESPACE"," ",14],["T_IMPLEMENTS","implements",14],["T_WHITESPACE"," ",14],["T_STRING","BuilderInterface",14],["T_WHITESPACE","\n",14],"{",["T_WHITESPACE","\n    ",15],["T_USE","use",16],["T_WHITESPACE"," ",16],["T_STRING","Formatter",16],";",["T_WHITESPACE","\n\n    ",16],["T_DOC_COMMENT","\/**\n     * @var SubjectReader\n     *\/",18],["T_WHITESPACE","\n    ",20],["T_PRIVATE","private",21],["T_WHITESPACE"," ",21],["T_VARIABLE","$subjectReader",21],";",["T_WHITESPACE","\n\n    ",21],["T_DOC_COMMENT","\/**\n     * Constructor\n     *\n     * @param SubjectReader $subjectReader\n     *\/",23],["T_WHITESPACE","\n    ",27],["T_PUBLIC","public",28],["T_WHITESPACE"," ",28],["T_FUNCTION","function",28],["T_WHITESPACE"," ",28],["T_STRING","__construct",28],"(",["T_STRING","SubjectReader",28],["T_WHITESPACE"," ",28],["T_VARIABLE","$subjectReader",28],")",["T_WHITESPACE","\n    ",28],"{",["T_WHITESPACE","\n        ",29],["T_VARIABLE","$this",30],["T_OBJECT_OPERATOR","->",30],["T_STRING","subjectReader",30],["T_WHITESPACE"," ",30],"=",["T_WHITESPACE"," ",30],["T_VARIABLE","$subjectReader",30],";",["T_WHITESPACE","\n    ",30],"}",["T_WHITESPACE","\n\n    ",31],["T_DOC_COMMENT","\/**\n     * Builds ENV request\n     *\n     * @param array $buildSubject\n     * @return array\n     *\/",33],["T_WHITESPACE","\n    ",38],["T_PUBLIC","public",39],["T_WHITESPACE"," ",39],["T_FUNCTION","function",39],["T_WHITESPACE"," ",39],["T_STRING","build",39],"(",["T_ARRAY","array",39],["T_WHITESPACE"," ",39],["T_VARIABLE","$buildSubject",39],")",["T_WHITESPACE","\n    ",39],"{",["T_WHITESPACE","\n        ",40],["T_VARIABLE","$paymentDO",41],["T_WHITESPACE"," ",41],"=",["T_WHITESPACE"," ",41],["T_VARIABLE","$this",41],["T_OBJECT_OPERATOR","->",41],["T_STRING","subjectReader",41],["T_OBJECT_OPERATOR","->",41],["T_STRING","readPayment",41],"(",["T_VARIABLE","$buildSubject",41],")",";",["T_WHITESPACE","\n\n        ",41],["T_DOC_COMMENT","\/** @var Payment $payment *\/",43],["T_WHITESPACE","\n        ",43],["T_VARIABLE","$payment",44],["T_WHITESPACE"," ",44],"=",["T_WHITESPACE"," ",44],["T_VARIABLE","$paymentDO",44],["T_OBJECT_OPERATOR","->",44],["T_STRING","getPayment",44],"(",")",";",["T_WHITESPACE","\n\n        ",44],["T_VARIABLE","$amount",46],["T_WHITESPACE"," ",46],"=",["T_WHITESPACE"," ",46],["T_STRING","null",46],";",["T_WHITESPACE","\n        ",46],["T_TRY","try",47],["T_WHITESPACE"," ",47],"{",["T_WHITESPACE","\n            ",47],["T_VARIABLE","$amount",48],["T_WHITESPACE"," ",48],"=",["T_WHITESPACE"," ",48],["T_VARIABLE","$this",48],["T_OBJECT_OPERATOR","->",48],["T_STRING","formatPrice",48],"(",["T_VARIABLE","$this",48],["T_OBJECT_OPERATOR","->",48],["T_STRING","subjectReader",48],["T_OBJECT_OPERATOR","->",48],["T_STRING","readAmount",48],"(",["T_VARIABLE","$buildSubject",48],")",")",";",["T_WHITESPACE","\n        ",48],"}",["T_WHITESPACE"," ",49],["T_CATCH","catch",49],["T_WHITESPACE"," ",49],"(",["T_NS_SEPARATOR","\\",49],["T_STRING","InvalidArgumentException",49],["T_WHITESPACE"," ",49],["T_VARIABLE","$e",49],")",["T_WHITESPACE"," ",49],"{",["T_WHITESPACE","\n            ",49],["T_COMMENT","\/\/ pass\n",50],["T_WHITESPACE","        ",51],"}",["T_WHITESPACE","\n\n        ",51],["T_COMMENT","\/*\n         * we should remember that Payment sets Capture txn id of current Invoice into ParentTransactionId Field\n         * We should also support previous implementations of Magento Braintree -\n         * and cut off '-capture' postfix from transaction ID to support backward compatibility\n         *\/",53],["T_WHITESPACE","\n        ",57],["T_VARIABLE","$txnId",58],["T_WHITESPACE"," ",58],"=",["T_WHITESPACE"," ",58],["T_STRING","str_replace",58],"(",["T_WHITESPACE","\n            ",58],["T_CONSTANT_ENCAPSED_STRING","'-'",59],["T_WHITESPACE"," ",59],".",["T_WHITESPACE"," ",59],["T_STRING","TransactionInterface",59],["T_DOUBLE_COLON","::",59],["T_STRING","TYPE_CAPTURE",59],",",["T_WHITESPACE","\n            ",59],["T_CONSTANT_ENCAPSED_STRING","''",60],",",["T_WHITESPACE","\n            ",60],["T_VARIABLE","$payment",61],["T_OBJECT_OPERATOR","->",61],["T_STRING","getParentTransactionId",61],"(",")",["T_WHITESPACE","\n        ",61],")",";",["T_WHITESPACE","\n\n        ",62],["T_RETURN","return",64],["T_WHITESPACE"," ",64],"[",["T_WHITESPACE","\n            ",64],["T_CONSTANT_ENCAPSED_STRING","'transaction_id'",65],["T_WHITESPACE"," ",65],["T_DOUBLE_ARROW","=>",65],["T_WHITESPACE"," ",65],["T_VARIABLE","$txnId",65],",",["T_WHITESPACE","\n            ",65],["T_STRING","PaymentDataBuilder",66],["T_DOUBLE_COLON","::",66],["T_STRING","AMOUNT",66],["T_WHITESPACE"," ",66],["T_DOUBLE_ARROW","=>",66],["T_WHITESPACE"," ",66],["T_VARIABLE","$amount",66],["T_WHITESPACE","\n        ",66],"]",";",["T_WHITESPACE","\n    ",67],"}",["T_WHITESPACE","\n",68],"}",["T_WHITESPACE","\n",69]]
[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Copyright \u00c2\u00a9 2013-2017 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n *\/",2],["T_WHITESPACE","\n",5],["T_NAMESPACE","namespace",6],["T_WHITESPACE"," ",6],["T_STRING","Magento",6],["T_NS_SEPARATOR","\\",6],["T_STRING","CatalogUrlRewrite",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Observer",6],";",["T_WHITESPACE","\n\n",6],["T_CLASS","class",8],["T_WHITESPACE"," ",8],["T_STRING","UrlRewriteHandler",8],["T_WHITESPACE","\n",8],"{",["T_WHITESPACE","\n    ",9],["T_DOC_COMMENT","\/** @var \\Magento\\CatalogUrlRewrite\\Model\\Category\\ChildrenCategoriesProvider *\/",10],["T_WHITESPACE","\n    ",10],["T_PROTECTED","protected",11],["T_WHITESPACE"," ",11],["T_VARIABLE","$childrenCategoriesProvider",11],";",["T_WHITESPACE","\n\n    ",11],["T_DOC_COMMENT","\/** @var \\Magento\\CatalogUrlRewrite\\Model\\CategoryUrlRewriteGenerator *\/",13],["T_WHITESPACE","\n    ",13],["T_PROTECTED","protected",14],["T_WHITESPACE"," ",14],["T_VARIABLE","$categoryUrlRewriteGenerator",14],";",["T_WHITESPACE","\n\n    ",14],["T_DOC_COMMENT","\/** @var \\Magento\\CatalogUrlRewrite\\Model\\ProductUrlRewriteGenerator *\/",16],["T_WHITESPACE","\n    ",16],["T_PROTECTED","protected",17],["T_WHITESPACE"," ",17],["T_VARIABLE","$productUrlRewriteGenerator",17],";",["T_WHITESPACE","\n\n    ",17],["T_DOC_COMMENT","\/** @var \\Magento\\UrlRewrite\\Model\\UrlPersistInterface *\/",19],["T_WHITESPACE","\n    ",19],["T_PROTECTED","protected",20],["T_WHITESPACE"," ",20],["T_VARIABLE","$urlPersist",20],";",["T_WHITESPACE","\n\n    ",20],["T_DOC_COMMENT","\/** @var array *\/",22],["T_WHITESPACE","\n    ",22],["T_PROTECTED","protected",23],["T_WHITESPACE"," ",23],["T_VARIABLE","$isSkippedProduct",23],";",["T_WHITESPACE","\n\n    ",23],["T_DOC_COMMENT","\/** @var \\Magento\\Catalog\\Model\\ResourceModel\\Product\\CollectionFactory *\/",25],["T_WHITESPACE","\n    ",25],["T_PROTECTED","protected",26],["T_WHITESPACE"," ",26],["T_VARIABLE","$productCollectionFactory",26],";",["T_WHITESPACE","\n\n    ",26],["T_DOC_COMMENT","\/** @var \\Magento\\CatalogUrlRewrite\\Model\\CategoryBasedProductRewriteGenerator *\/",28],["T_WHITESPACE","\n    ",28],["T_PRIVATE","private",29],["T_WHITESPACE"," ",29],["T_VARIABLE","$categoryBasedProductRewriteGenerator",29],";",["T_WHITESPACE","\n\n    ",29],["T_DOC_COMMENT","\/** @var \\Magento\\UrlRewrite\\Model\\MergeDataProvider *\/",31],["T_WHITESPACE","\n    ",31],["T_PRIVATE","private",32],["T_WHITESPACE"," ",32],["T_VARIABLE","$mergeDataProviderPrototype",32],";",["T_WHITESPACE","\n\n    ",32],["T_DOC_COMMENT","\/** @var \\Magento\\Framework\\Serialize\\Serializer\\Json *\/",34],["T_WHITESPACE","\n    ",34],["T_PRIVATE","private",35],["T_WHITESPACE"," ",35],["T_VARIABLE","$serializer",35],";",["T_WHITESPACE","\n\n    ",35],["T_DOC_COMMENT","\/**\n     * @param \\Magento\\CatalogUrlRewrite\\Model\\Category\\ChildrenCategoriesProvider $childrenCategoriesProvider\n     * @param \\Magento\\CatalogUrlRewrite\\Model\\CategoryUrlRewriteGenerator $categoryUrlRewriteGenerator\n     * @param \\Magento\\CatalogUrlRewrite\\Model\\ProductUrlRewriteGenerator $productUrlRewriteGenerator\n     * @param \\Magento\\UrlRewrite\\Model\\UrlPersistInterface $urlPersist\n     * @param \\Magento\\Catalog\\Model\\ResourceModel\\Product\\CollectionFactory $productCollectionFactory\n     * @param \\Magento\\UrlRewrite\\Model\\MergeDataProviderFactory|null $mergeDataProviderFactory\n     * @param \\Magento\\Framework\\Serialize\\Serializer\\Json|null $serializer\n     *\/",37],["T_WHITESPACE","\n    ",45],["T_PUBLIC","public",46],["T_WHITESPACE"," ",46],["T_FUNCTION","function",46],["T_WHITESPACE"," ",46],["T_STRING","__construct",46],"(",["T_WHITESPACE","\n        ",46],["T_NS_SEPARATOR","\\",47],["T_STRING","Magento",47],["T_NS_SEPARATOR","\\",47],["T_STRING","CatalogUrlRewrite",47],["T_NS_SEPARATOR","\\",47],["T_STRING","Model",47],["T_NS_SEPARATOR","\\",47],["T_STRING","Category",47],["T_NS_SEPARATOR","\\",47],["T_STRING","ChildrenCategoriesProvider",47],["T_WHITESPACE"," ",47],["T_VARIABLE","$childrenCategoriesProvider",47],",",["T_WHITESPACE","\n        ",47],["T_NS_SEPARATOR","\\",48],["T_STRING","Magento",48],["T_NS_SEPARATOR","\\",48],["T_STRING","CatalogUrlRewrite",48],["T_NS_SEPARATOR","\\",48],["T_STRING","Model",48],["T_NS_SEPARATOR","\\",48],["T_STRING","CategoryUrlRewriteGenerator",48],["T_WHITESPACE"," ",48],["T_VARIABLE","$categoryUrlRewriteGenerator",48],",",["T_WHITESPACE","\n        ",48],["T_NS_SEPARATOR","\\",49],["T_STRING","Magento",49],["T_NS_SEPARATOR","\\",49],["T_STRING","CatalogUrlRewrite",49],["T_NS_SEPARATOR","\\",49],["T_STRING","Model",49],["T_NS_SEPARATOR","\\",49],["T_STRING","ProductUrlRewriteGenerator",49],["T_WHITESPACE"," ",49],["T_VARIABLE","$productUrlRewriteGenerator",49],",",["T_WHITESPACE","\n        ",49],["T_NS_SEPARATOR","\\",50],["T_STRING","Magento",50],["T_NS_SEPARATOR","\\",50],["T_STRING","UrlRewrite",50],["T_NS_SEPARATOR","\\",50],["T_STRING","Model",50],["T_NS_SEPARATOR","\\",50],["T_STRING","UrlPersistInterface",50],["T_WHITESPACE"," ",50],["T_VARIABLE","$urlPersist",50],",",["T_WHITESPACE","\n        ",50],["T_NS_SEPARATOR","\\",51],["T_STRING","Magento",51],["T_NS_SEPARATOR","\\",51],["T_STRING","Catalog",51],["T_NS_SEPARATOR","\\",51],["T_STRING","Model",51],["T_NS_SEPARATOR","\\",51],["T_STRING","ResourceModel",51],["T_NS_SEPARATOR","\\",51],["T_STRING","Product",51],["T_NS_SEPARATOR","\\",51],["T_STRING","CollectionFactory",51],["T_WHITESPACE"," ",51],["T_VARIABLE","$productCollectionFactory",51],",",["T_WHITESPACE","\n        ",51],["T_NS_SEPARATOR","\\",52],["T_STRING","Magento",52],["T_NS_SEPARATOR","\\",52],["T_STRING","UrlRewrite",52],["T_NS_SEPARATOR","\\",52],["T_STRING","Model",52],["T_NS_SEPARATOR","\\",52],["T_STRING","MergeDataProviderFactory",52],["T_WHITESPACE"," ",52],["T_VARIABLE","$mergeDataProviderFactory",52],["T_WHITESPACE"," ",52],"=",["T_WHITESPACE"," ",52],["T_STRING","null",52],",",["T_WHITESPACE","\n        ",52],["T_NS_SEPARATOR","\\",53],["T_STRING","Magento",53],["T_NS_SEPARATOR","\\",53],["T_STRING","Framework",53],["T_NS_SEPARATOR","\\",53],["T_STRING","Serialize",53],["T_NS_SEPARATOR","\\",53],["T_STRING","Serializer",53],["T_NS_SEPARATOR","\\",53],["T_STRING","Json",53],["T_WHITESPACE"," ",53],["T_VARIABLE","$serializer",53],["T_WHITESPACE"," ",53],"=",["T_WHITESPACE"," ",53],["T_STRING","null",53],["T_WHITESPACE","\n    ",53],")",["T_WHITESPACE"," ",54],"{",["T_WHITESPACE","\n        ",54],["T_VARIABLE","$this",55],["T_OBJECT_OPERATOR","->",55],["T_STRING","childrenCategoriesProvider",55],["T_WHITESPACE"," ",55],"=",["T_WHITESPACE"," ",55],["T_VARIABLE","$childrenCategoriesProvider",55],";",["T_WHITESPACE","\n        ",55],["T_VARIABLE","$this",56],["T_OBJECT_OPERATOR","->",56],["T_STRING","categoryUrlRewriteGenerator",56],["T_WHITESPACE"," ",56],"=",["T_WHITESPACE"," ",56],["T_VARIABLE","$categoryUrlRewriteGenerator",56],";",["T_WHITESPACE","\n        ",56],["T_VARIABLE","$this",57],["T_OBJECT_OPERATOR","->",57],["T_STRING","productUrlRewriteGenerator",57],["T_WHITESPACE"," ",57],"=",["T_WHITESPACE"," ",57],["T_VARIABLE","$productUrlRewriteGenerator",57],";",["T_WHITESPACE","\n        ",57],["T_VARIABLE","$this",58],["T_OBJECT_OPERATOR","->",58],["T_STRING","urlPersist",58],["T_WHITESPACE"," ",58],"=",["T_WHITESPACE"," ",58],["T_VARIABLE","$urlPersist",58],";",["T_WHITESPACE","\n        ",58],["T_VARIABLE","$this",59],["T_OBJECT_OPERATOR","->",59],["T_STRING","productCollectionFactory",59],["T_WHITESPACE"," ",59],"=",["T_WHITESPACE"," ",59],["T_VARIABLE","$productCollectionFactory",59],";",["T_WHITESPACE","\n\n        ",59],["T_IF","if",61],["T_WHITESPACE"," ",61],"(","!",["T_ISSET","isset",61],"(",["T_VARIABLE","$mergeDataProviderFactory",61],")",")",["T_WHITESPACE"," ",61],"{",["T_WHITESPACE","\n            ",61],["T_VARIABLE","$mergeDataProviderFactory",62],["T_WHITESPACE"," ",62],"=",["T_WHITESPACE","  ",62],["T_NS_SEPARATOR","\\",62],["T_STRING","Magento",62],["T_NS_SEPARATOR","\\",62],["T_STRING","Framework",62],["T_NS_SEPARATOR","\\",62],["T_STRING","App",62],["T_NS_SEPARATOR","\\",62],["T_STRING","ObjectManager",62],["T_DOUBLE_COLON","::",62],["T_STRING","getInstance",62],"(",")",["T_OBJECT_OPERATOR","->",62],["T_STRING","get",62],"(",["T_WHITESPACE","\n                ",62],["T_NS_SEPARATOR","\\",63],["T_STRING","Magento",63],["T_NS_SEPARATOR","\\",63],["T_STRING","UrlRewrite",63],["T_NS_SEPARATOR","\\",63],["T_STRING","Model",63],["T_NS_SEPARATOR","\\",63],["T_STRING","MergeDataProviderFactory",63],["T_DOUBLE_COLON","::",63],["T_CLASS","class",63],["T_WHITESPACE","\n            ",63],")",";",["T_WHITESPACE","\n        ",64],"}",["T_WHITESPACE","\n\n        ",65],["T_VARIABLE","$this",67],["T_OBJECT_OPERATOR","->",67],["T_STRING","mergeDataProviderPrototype",67],["T_WHITESPACE"," ",67],"=",["T_WHITESPACE"," ",67],["T_VARIABLE","$mergeDataProviderFactory",67],["T_OBJECT_OPERATOR","->",67],["T_STRING","create",67],"(",")",";",["T_WHITESPACE","\n\n        ",67],["T_VARIABLE","$this",69],["T_OBJECT_OPERATOR","->",69],["T_STRING","serializer",69],["T_WHITESPACE"," ",69],"=",["T_WHITESPACE"," ",69],["T_VARIABLE","$serializer",69],["T_WHITESPACE"," ",69],"?",":",["T_WHITESPACE"," ",69],["T_NS_SEPARATOR","\\",69],["T_STRING","Magento",69],["T_NS_SEPARATOR","\\",69],["T_STRING","Framework",69],["T_NS_SEPARATOR","\\",69],["T_STRING","App",69],["T_NS_SEPARATOR","\\",69],["T_STRING","ObjectManager",69],["T_DOUBLE_COLON","::",69],["T_STRING","getInstance",69],"(",")",["T_OBJECT_OPERATOR","->",69],["T_STRING","get",69],"(",["T_WHITESPACE","\n            ",69],["T_NS_SEPARATOR","\\",70],["T_STRING","Magento",70],["T_NS_SEPARATOR","\\",70],["T_STRING","Framework",70],["T_NS_SEPARATOR","\\",70],["T_STRING","Serialize",70],["T_NS_SEPARATOR","\\",70],["T_STRING","Serializer",70],["T_NS_SEPARATOR","\\",70],["T_STRING","Json",70],["T_DOUBLE_COLON","::",70],["T_CLASS","class",70],["T_WHITESPACE","\n        ",70],")",";",["T_WHITESPACE","\n    ",71],"}",["T_WHITESPACE","\n\n    ",72],["T_DOC_COMMENT","\/**\n     * Generate url rewrites for products assigned to category\n     *\n     * @param \\Magento\\Catalog\\Model\\Category $category\n     * @return array\n     *\/",74],["T_WHITESPACE","\n    ",79],["T_PUBLIC","public",80],["T_WHITESPACE"," ",80],["T_FUNCTION","function",80],["T_WHITESPACE"," ",80],["T_STRING","generateProductUrlRewrites",80],"(",["T_NS_SEPARATOR","\\",80],["T_STRING","Magento",80],["T_NS_SEPARATOR","\\",80],["T_STRING","Catalog",80],["T_NS_SEPARATOR","\\",80],["T_STRING","Model",80],["T_NS_SEPARATOR","\\",80],["T_STRING","Category",80],["T_WHITESPACE"," ",80],["T_VARIABLE","$category",80],")",["T_WHITESPACE","\n    ",80],"{",["T_WHITESPACE","\n        ",81],["T_VARIABLE","$mergeDataProvider",82],["T_WHITESPACE"," ",82],"=",["T_WHITESPACE"," ",82],["T_CLONE","clone",82],["T_WHITESPACE"," ",82],["T_VARIABLE","$this",82],["T_OBJECT_OPERATOR","->",82],["T_STRING","mergeDataProviderPrototype",82],";",["T_WHITESPACE","\n        ",82],["T_VARIABLE","$this",83],["T_OBJECT_OPERATOR","->",83],["T_STRING","isSkippedProduct",83],["T_WHITESPACE"," ",83],"=",["T_WHITESPACE"," ",83],"[","]",";",["T_WHITESPACE","\n        ",83],["T_VARIABLE","$saveRewriteHistory",84],["T_WHITESPACE"," ",84],"=",["T_WHITESPACE"," ",84],["T_VARIABLE","$category",84],["T_OBJECT_OPERATOR","->",84],["T_STRING","getData",84],"(",["T_CONSTANT_ENCAPSED_STRING","'save_rewrites_history'",84],")",";",["T_WHITESPACE","\n        ",84],["T_VARIABLE","$storeId",85],["T_WHITESPACE"," ",85],"=",["T_WHITESPACE"," ",85],["T_VARIABLE","$category",85],["T_OBJECT_OPERATOR","->",85],["T_STRING","getStoreId",85],"(",")",";",["T_WHITESPACE","\n        ",85],["T_IF","if",86],["T_WHITESPACE"," ",86],"(",["T_VARIABLE","$category",86],["T_OBJECT_OPERATOR","->",86],["T_STRING","getAffectedProductIds",86],"(",")",")",["T_WHITESPACE"," ",86],"{",["T_WHITESPACE","\n            ",86],["T_VARIABLE","$this",87],["T_OBJECT_OPERATOR","->",87],["T_STRING","isSkippedProduct",87],["T_WHITESPACE"," ",87],"=",["T_WHITESPACE"," ",87],["T_VARIABLE","$category",87],["T_OBJECT_OPERATOR","->",87],["T_STRING","getAffectedProductIds",87],"(",")",";",["T_WHITESPACE","\n            ",87],["T_VARIABLE","$collection",88],["T_WHITESPACE"," ",88],"=",["T_WHITESPACE"," ",88],["T_VARIABLE","$this",88],["T_OBJECT_OPERATOR","->",88],["T_STRING","productCollectionFactory",88],["T_OBJECT_OPERATOR","->",88],["T_STRING","create",88],"(",")",["T_WHITESPACE","\n                ",88],["T_OBJECT_OPERATOR","->",89],["T_STRING","setStoreId",89],"(",["T_VARIABLE","$storeId",89],")",["T_WHITESPACE","\n                ",89],["T_OBJECT_OPERATOR","->",90],["T_STRING","addIdFilter",90],"(",["T_VARIABLE","$category",90],["T_OBJECT_OPERATOR","->",90],["T_STRING","getAffectedProductIds",90],"(",")",")",["T_WHITESPACE","\n                ",90],["T_OBJECT_OPERATOR","->",91],["T_STRING","addAttributeToSelect",91],"(",["T_CONSTANT_ENCAPSED_STRING","'visibility'",91],")",["T_WHITESPACE","\n                ",91],["T_OBJECT_OPERATOR","->",92],["T_STRING","addAttributeToSelect",92],"(",["T_CONSTANT_ENCAPSED_STRING","'name'",92],")",["T_WHITESPACE","\n                ",92],["T_OBJECT_OPERATOR","->",93],["T_STRING","addAttributeToSelect",93],"(",["T_CONSTANT_ENCAPSED_STRING","'url_key'",93],")",["T_WHITESPACE","\n                ",93],["T_OBJECT_OPERATOR","->",94],["T_STRING","addAttributeToSelect",94],"(",["T_CONSTANT_ENCAPSED_STRING","'url_path'",94],")",";",["T_WHITESPACE","\n            ",94],["T_FOREACH","foreach",95],["T_WHITESPACE"," ",95],"(",["T_VARIABLE","$collection",95],["T_WHITESPACE"," ",95],["T_AS","as",95],["T_WHITESPACE"," ",95],["T_VARIABLE","$product",95],")",["T_WHITESPACE"," ",95],"{",["T_WHITESPACE","\n                ",95],["T_VARIABLE","$product",96],["T_OBJECT_OPERATOR","->",96],["T_STRING","setStoreId",96],"(",["T_VARIABLE","$storeId",96],")",";",["T_WHITESPACE","\n                ",96],["T_VARIABLE","$product",97],["T_OBJECT_OPERATOR","->",97],["T_STRING","setData",97],"(",["T_CONSTANT_ENCAPSED_STRING","'save_rewrites_history'",97],",",["T_WHITESPACE"," ",97],["T_VARIABLE","$saveRewriteHistory",97],")",";",["T_WHITESPACE","\n                ",97],["T_VARIABLE","$mergeDataProvider",98],["T_OBJECT_OPERATOR","->",98],["T_STRING","merge",98],"(",["T_WHITESPACE","\n                    ",98],["T_VARIABLE","$this",99],["T_OBJECT_OPERATOR","->",99],["T_STRING","productUrlRewriteGenerator",99],["T_OBJECT_OPERATOR","->",99],["T_STRING","generate",99],"(",["T_VARIABLE","$product",99],",",["T_WHITESPACE"," ",99],["T_VARIABLE","$category",99],["T_OBJECT_OPERATOR","->",99],["T_STRING","getEntityId",99],"(",")",")",["T_WHITESPACE","\n                ",99],")",";",["T_WHITESPACE","\n            ",100],"}",["T_WHITESPACE","\n        ",101],"}",["T_WHITESPACE"," ",102],["T_ELSE","else",102],["T_WHITESPACE"," ",102],"{",["T_WHITESPACE","\n            ",102],["T_VARIABLE","$mergeDataProvider",103],["T_OBJECT_OPERATOR","->",103],["T_STRING","merge",103],"(",["T_WHITESPACE","\n                ",103],["T_VARIABLE","$this",104],["T_OBJECT_OPERATOR","->",104],["T_STRING","getCategoryProductsUrlRewrites",104],"(",["T_WHITESPACE","\n                    ",104],["T_VARIABLE","$category",105],",",["T_WHITESPACE","\n                    ",105],["T_VARIABLE","$storeId",106],",",["T_WHITESPACE","\n                    ",106],["T_VARIABLE","$saveRewriteHistory",107],",",["T_WHITESPACE","\n                    ",107],["T_VARIABLE","$category",108],["T_OBJECT_OPERATOR","->",108],["T_STRING","getEntityId",108],"(",")",["T_WHITESPACE","\n                ",108],")",["T_WHITESPACE","\n            ",109],")",";",["T_WHITESPACE","\n        ",110],"}",["T_WHITESPACE","\n        ",111],["T_FOREACH","foreach",112],["T_WHITESPACE"," ",112],"(",["T_VARIABLE","$this",112],["T_OBJECT_OPERATOR","->",112],["T_STRING","childrenCategoriesProvider",112],["T_OBJECT_OPERATOR","->",112],["T_STRING","getChildren",112],"(",["T_VARIABLE","$category",112],",",["T_WHITESPACE"," ",112],["T_STRING","true",112],")",["T_WHITESPACE"," ",112],["T_AS","as",112],["T_WHITESPACE"," ",112],["T_VARIABLE","$childCategory",112],")",["T_WHITESPACE"," ",112],"{",["T_WHITESPACE","\n            ",112],["T_VARIABLE","$mergeDataProvider",113],["T_OBJECT_OPERATOR","->",113],["T_STRING","merge",113],"(",["T_WHITESPACE","\n                ",113],["T_VARIABLE","$this",114],["T_OBJECT_OPERATOR","->",114],["T_STRING","getCategoryProductsUrlRewrites",114],"(",["T_WHITESPACE","\n                    ",114],["T_VARIABLE","$childCategory",115],",",["T_WHITESPACE","\n                    ",115],["T_VARIABLE","$storeId",116],",",["T_WHITESPACE","\n                    ",116],["T_VARIABLE","$saveRewriteHistory",117],",",["T_WHITESPACE","\n                    ",117],["T_VARIABLE","$category",118],["T_OBJECT_OPERATOR","->",118],["T_STRING","getEntityId",118],"(",")",["T_WHITESPACE","\n                ",118],")",["T_WHITESPACE","\n            ",119],")",";",["T_WHITESPACE","\n        ",120],"}",["T_WHITESPACE","\n\n        ",121],["T_RETURN","return",123],["T_WHITESPACE"," ",123],["T_VARIABLE","$mergeDataProvider",123],["T_OBJECT_OPERATOR","->",123],["T_STRING","getData",123],"(",")",";",["T_WHITESPACE","\n    ",123],"}",["T_WHITESPACE","\n\n    ",124],["T_DOC_COMMENT","\/**\n     * @param \\Magento\\Catalog\\Model\\Category $category\n     * @param int $storeId\n     * @param bool $saveRewriteHistory\n     * @param int|null $rootCategoryId\n     * @return array\n     *\/",126],["T_WHITESPACE","\n    ",132],["T_PUBLIC","public",133],["T_WHITESPACE"," ",133],["T_FUNCTION","function",133],["T_WHITESPACE"," ",133],["T_STRING","getCategoryProductsUrlRewrites",133],"(",["T_WHITESPACE","\n        ",133],["T_NS_SEPARATOR","\\",134],["T_STRING","Magento",134],["T_NS_SEPARATOR","\\",134],["T_STRING","Catalog",134],["T_NS_SEPARATOR","\\",134],["T_STRING","Model",134],["T_NS_SEPARATOR","\\",134],["T_STRING","Category",134],["T_WHITESPACE"," ",134],["T_VARIABLE","$category",134],",",["T_WHITESPACE","\n        ",134],["T_VARIABLE","$storeId",135],",",["T_WHITESPACE","\n        ",135],["T_VARIABLE","$saveRewriteHistory",136],",",["T_WHITESPACE","\n        ",136],["T_VARIABLE","$rootCategoryId",137],["T_WHITESPACE"," ",137],"=",["T_WHITESPACE"," ",137],["T_STRING","null",137],["T_WHITESPACE","\n    ",137],")",["T_WHITESPACE"," ",138],"{",["T_WHITESPACE","\n        ",138],["T_VARIABLE","$mergeDataProvider",139],["T_WHITESPACE"," ",139],"=",["T_WHITESPACE"," ",139],["T_CLONE","clone",139],["T_WHITESPACE"," ",139],["T_VARIABLE","$this",139],["T_OBJECT_OPERATOR","->",139],["T_STRING","mergeDataProviderPrototype",139],";",["T_WHITESPACE","\n        ",139],["T_DOC_COMMENT","\/** @var \\Magento\\Catalog\\Model\\ResourceModel\\Product\\Collection $productCollection *\/",140],["T_WHITESPACE","\n        ",140],["T_VARIABLE","$productCollection",141],["T_WHITESPACE"," ",141],"=",["T_WHITESPACE"," ",141],["T_VARIABLE","$category",141],["T_OBJECT_OPERATOR","->",141],["T_STRING","getProductCollection",141],"(",")",["T_WHITESPACE","\n            ",141],["T_OBJECT_OPERATOR","->",142],["T_STRING","addAttributeToSelect",142],"(",["T_CONSTANT_ENCAPSED_STRING","'name'",142],")",["T_WHITESPACE","\n            ",142],["T_OBJECT_OPERATOR","->",143],["T_STRING","addAttributeToSelect",143],"(",["T_CONSTANT_ENCAPSED_STRING","'visibility'",143],")",["T_WHITESPACE","\n            ",143],["T_OBJECT_OPERATOR","->",144],["T_STRING","addAttributeToSelect",144],"(",["T_CONSTANT_ENCAPSED_STRING","'url_key'",144],")",["T_WHITESPACE","\n            ",144],["T_OBJECT_OPERATOR","->",145],["T_STRING","addAttributeToSelect",145],"(",["T_CONSTANT_ENCAPSED_STRING","'url_path'",145],")",";",["T_WHITESPACE","\n        ",145],["T_FOREACH","foreach",146],["T_WHITESPACE"," ",146],"(",["T_VARIABLE","$productCollection",146],["T_WHITESPACE"," ",146],["T_AS","as",146],["T_WHITESPACE"," ",146],["T_VARIABLE","$product",146],")",["T_WHITESPACE"," ",146],"{",["T_WHITESPACE","\n            ",146],["T_IF","if",147],["T_WHITESPACE"," ",147],"(",["T_STRING","in_array",147],"(",["T_VARIABLE","$product",147],["T_OBJECT_OPERATOR","->",147],["T_STRING","getId",147],"(",")",",",["T_WHITESPACE"," ",147],["T_VARIABLE","$this",147],["T_OBJECT_OPERATOR","->",147],["T_STRING","isSkippedProduct",147],")",")",["T_WHITESPACE"," ",147],"{",["T_WHITESPACE","\n                ",147],["T_CONTINUE","continue",148],";",["T_WHITESPACE","\n            ",148],"}",["T_WHITESPACE","\n            ",149],["T_VARIABLE","$this",150],["T_OBJECT_OPERATOR","->",150],["T_STRING","isSkippedProduct",150],"[","]",["T_WHITESPACE"," ",150],"=",["T_WHITESPACE"," ",150],["T_VARIABLE","$product",150],["T_OBJECT_OPERATOR","->",150],["T_STRING","getId",150],"(",")",";",["T_WHITESPACE","\n            ",150],["T_VARIABLE","$product",151],["T_OBJECT_OPERATOR","->",151],["T_STRING","setStoreId",151],"(",["T_VARIABLE","$storeId",151],")",";",["T_WHITESPACE","\n            ",151],["T_VARIABLE","$product",152],["T_OBJECT_OPERATOR","->",152],["T_STRING","setData",152],"(",["T_CONSTANT_ENCAPSED_STRING","'save_rewrites_history'",152],",",["T_WHITESPACE"," ",152],["T_VARIABLE","$saveRewriteHistory",152],")",";",["T_WHITESPACE","\n            ",152],["T_VARIABLE","$mergeDataProvider",153],["T_OBJECT_OPERATOR","->",153],["T_STRING","merge",153],"(",["T_WHITESPACE","\n                ",153],["T_VARIABLE","$this",154],["T_OBJECT_OPERATOR","->",154],["T_STRING","getCategoryBasedProductRewriteGenerator",154],"(",")",["T_OBJECT_OPERATOR","->",154],["T_STRING","generate",154],"(",["T_VARIABLE","$product",154],",",["T_WHITESPACE"," ",154],["T_VARIABLE","$category",154],",",["T_WHITESPACE"," ",154],["T_VARIABLE","$rootCategoryId",154],")",["T_WHITESPACE","\n            ",154],")",";",["T_WHITESPACE","\n        ",155],"}",["T_WHITESPACE","\n\n        ",156],["T_RETURN","return",158],["T_WHITESPACE"," ",158],["T_VARIABLE","$mergeDataProvider",158],["T_OBJECT_OPERATOR","->",158],["T_STRING","getData",158],"(",")",";",["T_WHITESPACE","\n    ",158],"}",["T_WHITESPACE","\n\n    ",159],["T_DOC_COMMENT","\/**\n     * Retrieve generator, which use single category for different products\n     *\n     * @deprecated\n     * @return \\Magento\\CatalogUrlRewrite\\Model\\CategoryBasedProductRewriteGenerator|mixed\n     *\/",161],["T_WHITESPACE","\n    ",166],["T_PRIVATE","private",167],["T_WHITESPACE"," ",167],["T_FUNCTION","function",167],["T_WHITESPACE"," ",167],["T_STRING","getCategoryBasedProductRewriteGenerator",167],"(",")",["T_WHITESPACE","\n    ",167],"{",["T_WHITESPACE","\n        ",168],["T_IF","if",169],["T_WHITESPACE"," ",169],"(","!",["T_VARIABLE","$this",169],["T_OBJECT_OPERATOR","->",169],["T_STRING","categoryBasedProductRewriteGenerator",169],")",["T_WHITESPACE"," ",169],"{",["T_WHITESPACE","\n            ",169],["T_VARIABLE","$this",170],["T_OBJECT_OPERATOR","->",170],["T_STRING","categoryBasedProductRewriteGenerator",170],["T_WHITESPACE"," ",170],"=",["T_WHITESPACE"," ",170],["T_NS_SEPARATOR","\\",170],["T_STRING","Magento",170],["T_NS_SEPARATOR","\\",170],["T_STRING","Framework",170],["T_NS_SEPARATOR","\\",170],["T_STRING","App",170],["T_NS_SEPARATOR","\\",170],["T_STRING","ObjectManager",170],["T_DOUBLE_COLON","::",170],["T_STRING","getInstance",170],"(",")",["T_WHITESPACE","\n                ",170],["T_OBJECT_OPERATOR","->",171],["T_STRING","get",171],"(",["T_NS_SEPARATOR","\\",171],["T_STRING","Magento",171],["T_NS_SEPARATOR","\\",171],["T_STRING","CatalogUrlRewrite",171],["T_NS_SEPARATOR","\\",171],["T_STRING","Model",171],["T_NS_SEPARATOR","\\",171],["T_STRING","CategoryBasedProductRewriteGenerator",171],["T_DOUBLE_COLON","::",171],["T_CLASS","class",171],")",";",["T_WHITESPACE","\n        ",171],"}",["T_WHITESPACE","\n\n        ",172],["T_RETURN","return",174],["T_WHITESPACE"," ",174],["T_VARIABLE","$this",174],["T_OBJECT_OPERATOR","->",174],["T_STRING","categoryBasedProductRewriteGenerator",174],";",["T_WHITESPACE","\n    ",174],"}",["T_WHITESPACE","\n\n    ",175],["T_DOC_COMMENT","\/**\n     * @param \\Magento\\Catalog\\Model\\Category $category\n     * @return void\n     *\/",177],["T_WHITESPACE","\n    ",180],["T_PUBLIC","public",181],["T_WHITESPACE"," ",181],["T_FUNCTION","function",181],["T_WHITESPACE"," ",181],["T_STRING","deleteCategoryRewritesForChildren",181],"(",["T_NS_SEPARATOR","\\",181],["T_STRING","Magento",181],["T_NS_SEPARATOR","\\",181],["T_STRING","Catalog",181],["T_NS_SEPARATOR","\\",181],["T_STRING","Model",181],["T_NS_SEPARATOR","\\",181],["T_STRING","Category",181],["T_WHITESPACE"," ",181],["T_VARIABLE","$category",181],")",["T_WHITESPACE","\n    ",181],"{",["T_WHITESPACE","\n        ",182],["T_VARIABLE","$categoryIds",183],["T_WHITESPACE"," ",183],"=",["T_WHITESPACE"," ",183],["T_VARIABLE","$this",183],["T_OBJECT_OPERATOR","->",183],["T_STRING","childrenCategoriesProvider",183],["T_OBJECT_OPERATOR","->",183],["T_STRING","getChildrenIds",183],"(",["T_VARIABLE","$category",183],",",["T_WHITESPACE"," ",183],["T_STRING","true",183],")",";",["T_WHITESPACE","\n        ",183],["T_VARIABLE","$categoryIds",184],"[","]",["T_WHITESPACE"," ",184],"=",["T_WHITESPACE"," ",184],["T_VARIABLE","$category",184],["T_OBJECT_OPERATOR","->",184],["T_STRING","getId",184],"(",")",";",["T_WHITESPACE","\n        ",184],["T_FOREACH","foreach",185],["T_WHITESPACE"," ",185],"(",["T_VARIABLE","$categoryIds",185],["T_WHITESPACE"," ",185],["T_AS","as",185],["T_WHITESPACE"," ",185],["T_VARIABLE","$categoryId",185],")",["T_WHITESPACE"," ",185],"{",["T_WHITESPACE","\n            ",185],["T_VARIABLE","$this",186],["T_OBJECT_OPERATOR","->",186],["T_STRING","urlPersist",186],["T_OBJECT_OPERATOR","->",186],["T_STRING","deleteByData",186],"(",["T_WHITESPACE","\n                ",186],"[",["T_WHITESPACE","\n                    ",187],["T_NS_SEPARATOR","\\",188],["T_STRING","Magento",188],["T_NS_SEPARATOR","\\",188],["T_STRING","UrlRewrite",188],["T_NS_SEPARATOR","\\",188],["T_STRING","Service",188],["T_NS_SEPARATOR","\\",188],["T_STRING","V1",188],["T_NS_SEPARATOR","\\",188],["T_STRING","Data",188],["T_NS_SEPARATOR","\\",188],["T_STRING","UrlRewrite",188],["T_DOUBLE_COLON","::",188],["T_STRING","ENTITY_ID",188],["T_WHITESPACE"," ",188],["T_DOUBLE_ARROW","=>",188],["T_WHITESPACE","\n                        ",188],["T_VARIABLE","$categoryId",189],",",["T_WHITESPACE","\n                    ",189],["T_NS_SEPARATOR","\\",190],["T_STRING","Magento",190],["T_NS_SEPARATOR","\\",190],["T_STRING","UrlRewrite",190],["T_NS_SEPARATOR","\\",190],["T_STRING","Service",190],["T_NS_SEPARATOR","\\",190],["T_STRING","V1",190],["T_NS_SEPARATOR","\\",190],["T_STRING","Data",190],["T_NS_SEPARATOR","\\",190],["T_STRING","UrlRewrite",190],["T_DOUBLE_COLON","::",190],["T_STRING","ENTITY_TYPE",190],["T_WHITESPACE"," ",190],["T_DOUBLE_ARROW","=>",190],["T_WHITESPACE","\n                        ",190],["T_NS_SEPARATOR","\\",191],["T_STRING","Magento",191],["T_NS_SEPARATOR","\\",191],["T_STRING","CatalogUrlRewrite",191],["T_NS_SEPARATOR","\\",191],["T_STRING","Model",191],["T_NS_SEPARATOR","\\",191],["T_STRING","CategoryUrlRewriteGenerator",191],["T_DOUBLE_COLON","::",191],["T_STRING","ENTITY_TYPE",191],",",["T_WHITESPACE","\n                ",191],"]",["T_WHITESPACE","\n            ",192],")",";",["T_WHITESPACE","\n            ",193],["T_VARIABLE","$this",194],["T_OBJECT_OPERATOR","->",194],["T_STRING","urlPersist",194],["T_OBJECT_OPERATOR","->",194],["T_STRING","deleteByData",194],"(",["T_WHITESPACE","\n                ",194],"[",["T_WHITESPACE","\n                    ",195],["T_NS_SEPARATOR","\\",196],["T_STRING","Magento",196],["T_NS_SEPARATOR","\\",196],["T_STRING","UrlRewrite",196],["T_NS_SEPARATOR","\\",196],["T_STRING","Service",196],["T_NS_SEPARATOR","\\",196],["T_STRING","V1",196],["T_NS_SEPARATOR","\\",196],["T_STRING","Data",196],["T_NS_SEPARATOR","\\",196],["T_STRING","UrlRewrite",196],["T_DOUBLE_COLON","::",196],["T_STRING","METADATA",196],["T_WHITESPACE"," ",196],["T_DOUBLE_ARROW","=>",196],["T_WHITESPACE","\n                        ",196],["T_VARIABLE","$this",197],["T_OBJECT_OPERATOR","->",197],["T_STRING","serializer",197],["T_OBJECT_OPERATOR","->",197],["T_STRING","serialize",197],"(","[",["T_CONSTANT_ENCAPSED_STRING","'category_id'",197],["T_WHITESPACE"," ",197],["T_DOUBLE_ARROW","=>",197],["T_WHITESPACE"," ",197],["T_VARIABLE","$categoryId",197],"]",")",",",["T_WHITESPACE","\n                    ",197],["T_NS_SEPARATOR","\\",198],["T_STRING","Magento",198],["T_NS_SEPARATOR","\\",198],["T_STRING","UrlRewrite",198],["T_NS_SEPARATOR","\\",198],["T_STRING","Service",198],["T_NS_SEPARATOR","\\",198],["T_STRING","V1",198],["T_NS_SEPARATOR","\\",198],["T_STRING","Data",198],["T_NS_SEPARATOR","\\",198],["T_STRING","UrlRewrite",198],["T_DOUBLE_COLON","::",198],["T_STRING","ENTITY_TYPE",198],["T_WHITESPACE"," ",198],["T_DOUBLE_ARROW","=>",198],["T_WHITESPACE","\n                        ",198],["T_NS_SEPARATOR","\\",199],["T_STRING","Magento",199],["T_NS_SEPARATOR","\\",199],["T_STRING","CatalogUrlRewrite",199],["T_NS_SEPARATOR","\\",199],["T_STRING","Model",199],["T_NS_SEPARATOR","\\",199],["T_STRING","ProductUrlRewriteGenerator",199],["T_DOUBLE_COLON","::",199],["T_STRING","ENTITY_TYPE",199],",",["T_WHITESPACE","\n                ",199],"]",["T_WHITESPACE","\n            ",200],")",";",["T_WHITESPACE","\n        ",201],"}",["T_WHITESPACE","\n    ",202],"}",["T_WHITESPACE","\n",203],"}",["T_WHITESPACE","\n",204]]
[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Copyright \u00c2\u00a9 2013-2017 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n *\/",2],["T_WHITESPACE","\n",5],["T_NAMESPACE","namespace",6],["T_WHITESPACE"," ",6],["T_STRING","Magento",6],["T_NS_SEPARATOR","\\",6],["T_STRING","CatalogUrlRewrite",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Model",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Map",6],";",["T_WHITESPACE","\n\n",6],["T_USE","use",8],["T_WHITESPACE"," ",8],["T_STRING","Magento",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Catalog",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Model",8],["T_NS_SEPARATOR","\\",8],["T_STRING","ResourceModel",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Product",8],["T_NS_SEPARATOR","\\",8],["T_STRING","CollectionFactory",8],";",["T_WHITESPACE","\n",8],["T_USE","use",9],["T_WHITESPACE"," ",9],["T_STRING","Magento",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Framework",9],["T_NS_SEPARATOR","\\",9],["T_STRING","App",9],["T_NS_SEPARATOR","\\",9],["T_STRING","ResourceConnection",9],";",["T_WHITESPACE","\n\n",9],["T_DOC_COMMENT","\/**\n * Map that holds data for products ids from a category and subcategories\n *\/",11],["T_WHITESPACE","\n",13],["T_CLASS","class",14],["T_WHITESPACE"," ",14],["T_STRING","DataProductHashMap",14],["T_WHITESPACE"," ",14],["T_IMPLEMENTS","implements",14],["T_WHITESPACE"," ",14],["T_STRING","HashMapInterface",14],["T_WHITESPACE","\n",14],"{",["T_WHITESPACE","\n    ",15],["T_DOC_COMMENT","\/** @var int[] *\/",16],["T_WHITESPACE","\n    ",16],["T_PRIVATE","private",17],["T_WHITESPACE"," ",17],["T_VARIABLE","$hashMap",17],["T_WHITESPACE"," ",17],"=",["T_WHITESPACE"," ",17],"[","]",";",["T_WHITESPACE","\n\n    ",17],["T_DOC_COMMENT","\/** @var CollectionFactory *\/",19],["T_WHITESPACE","\n    ",19],["T_PRIVATE","private",20],["T_WHITESPACE"," ",20],["T_VARIABLE","$collectionFactory",20],";",["T_WHITESPACE","\n\n    ",20],["T_DOC_COMMENT","\/** @var HashMapPool *\/",22],["T_WHITESPACE","\n    ",22],["T_PRIVATE","private",23],["T_WHITESPACE"," ",23],["T_VARIABLE","$hashMapPool",23],";",["T_WHITESPACE","\n\n    ",23],["T_DOC_COMMENT","\/** @var ResourceConnection *\/",25],["T_WHITESPACE","\n    ",25],["T_PRIVATE","private",26],["T_WHITESPACE"," ",26],["T_VARIABLE","$connection",26],";",["T_WHITESPACE","\n\n    ",26],["T_DOC_COMMENT","\/**\n     * @param CollectionFactory $collectionFactory\n     * @param HashMapPool $hashMapPool\n     * @param ResourceConnection $connection\n     *\/",28],["T_WHITESPACE","\n    ",32],["T_PUBLIC","public",33],["T_WHITESPACE"," ",33],["T_FUNCTION","function",33],["T_WHITESPACE"," ",33],["T_STRING","__construct",33],"(",["T_WHITESPACE","\n        ",33],["T_STRING","CollectionFactory",34],["T_WHITESPACE"," ",34],["T_VARIABLE","$collectionFactory",34],",",["T_WHITESPACE","\n        ",34],["T_STRING","HashMapPool",35],["T_WHITESPACE"," ",35],["T_VARIABLE","$hashMapPool",35],",",["T_WHITESPACE","\n        ",35],["T_STRING","ResourceConnection",36],["T_WHITESPACE"," ",36],["T_VARIABLE","$connection",36],["T_WHITESPACE","\n    ",36],")",["T_WHITESPACE"," ",37],"{",["T_WHITESPACE","\n        ",37],["T_VARIABLE","$this",38],["T_OBJECT_OPERATOR","->",38],["T_STRING","collectionFactory",38],["T_WHITESPACE"," ",38],"=",["T_WHITESPACE"," ",38],["T_VARIABLE","$collectionFactory",38],";",["T_WHITESPACE","\n        ",38],["T_VARIABLE","$this",39],["T_OBJECT_OPERATOR","->",39],["T_STRING","hashMapPool",39],["T_WHITESPACE"," ",39],"=",["T_WHITESPACE"," ",39],["T_VARIABLE","$hashMapPool",39],";",["T_WHITESPACE","\n        ",39],["T_VARIABLE","$this",40],["T_OBJECT_OPERATOR","->",40],["T_STRING","connection",40],["T_WHITESPACE"," ",40],"=",["T_WHITESPACE"," ",40],["T_VARIABLE","$connection",40],";",["T_WHITESPACE","\n    ",40],"}",["T_WHITESPACE","\n\n    ",41],["T_DOC_COMMENT","\/**\n     * Returns an array of ids of all visible products and assigned to a category and all its subcategories\n     *\n     * @param int $categoryId\n     * @return array\n     *\/",43],["T_WHITESPACE","\n    ",48],["T_PUBLIC","public",49],["T_WHITESPACE"," ",49],["T_FUNCTION","function",49],["T_WHITESPACE"," ",49],["T_STRING","getAllData",49],"(",["T_VARIABLE","$categoryId",49],")",["T_WHITESPACE","\n    ",49],"{",["T_WHITESPACE","\n        ",50],["T_IF","if",51],["T_WHITESPACE"," ",51],"(","!",["T_ISSET","isset",51],"(",["T_VARIABLE","$this",51],["T_OBJECT_OPERATOR","->",51],["T_STRING","hashMap",51],"[",["T_VARIABLE","$categoryId",51],"]",")",")",["T_WHITESPACE"," ",51],"{",["T_WHITESPACE","\n            ",51],["T_VARIABLE","$productsCollection",52],["T_WHITESPACE"," ",52],"=",["T_WHITESPACE"," ",52],["T_VARIABLE","$this",52],["T_OBJECT_OPERATOR","->",52],["T_STRING","collectionFactory",52],["T_OBJECT_OPERATOR","->",52],["T_STRING","create",52],"(",")",";",["T_WHITESPACE","\n            ",52],["T_VARIABLE","$productsCollection",53],["T_OBJECT_OPERATOR","->",53],["T_STRING","getSelect",53],"(",")",["T_WHITESPACE","\n                ",53],["T_OBJECT_OPERATOR","->",54],["T_STRING","joinInner",54],"(",["T_WHITESPACE","\n                    ",54],"[",["T_CONSTANT_ENCAPSED_STRING","'cp'",55],["T_WHITESPACE"," ",55],["T_DOUBLE_ARROW","=>",55],["T_WHITESPACE"," ",55],["T_VARIABLE","$this",55],["T_OBJECT_OPERATOR","->",55],["T_STRING","connection",55],["T_OBJECT_OPERATOR","->",55],["T_STRING","getTableName",55],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog_category_product'",55],")","]",",",["T_WHITESPACE","\n                    ",55],["T_CONSTANT_ENCAPSED_STRING","'cp.product_id = e.entity_id'",56],",",["T_WHITESPACE","\n                    ",56],"[","]",["T_WHITESPACE","\n                ",57],")",["T_WHITESPACE","\n                ",58],["T_OBJECT_OPERATOR","->",59],["T_STRING","where",59],"(",["T_WHITESPACE","\n                    ",59],["T_VARIABLE","$productsCollection",60],["T_OBJECT_OPERATOR","->",60],["T_STRING","getConnection",60],"(",")",["T_OBJECT_OPERATOR","->",60],["T_STRING","prepareSqlCondition",60],"(",["T_WHITESPACE","\n                        ",60],["T_CONSTANT_ENCAPSED_STRING","'cp.category_id'",61],",",["T_WHITESPACE","\n                        ",61],"[",["T_WHITESPACE","\n                            ",62],["T_CONSTANT_ENCAPSED_STRING","'in'",63],["T_WHITESPACE"," ",63],["T_DOUBLE_ARROW","=>",63],["T_WHITESPACE"," ",63],["T_VARIABLE","$this",63],["T_OBJECT_OPERATOR","->",63],["T_STRING","hashMapPool",63],["T_OBJECT_OPERATOR","->",63],["T_STRING","getDataMap",63],"(",["T_WHITESPACE","\n                                ",63],["T_STRING","DataCategoryHashMap",64],["T_DOUBLE_COLON","::",64],["T_CLASS","class",64],",",["T_WHITESPACE","\n                                ",64],["T_VARIABLE","$categoryId",65],["T_WHITESPACE","\n                            ",65],")",["T_OBJECT_OPERATOR","->",66],["T_STRING","getAllData",66],"(",["T_VARIABLE","$categoryId",66],")",["T_WHITESPACE","\n                        ",66],"]",["T_WHITESPACE","\n                    ",67],")",["T_WHITESPACE","\n                ",68],")",["T_OBJECT_OPERATOR","->",69],["T_STRING","group",69],"(",["T_CONSTANT_ENCAPSED_STRING","'e.entity_id'",69],")",";",["T_WHITESPACE","\n            ",69],["T_VARIABLE","$this",70],["T_OBJECT_OPERATOR","->",70],["T_STRING","hashMap",70],"[",["T_VARIABLE","$categoryId",70],"]",["T_WHITESPACE"," ",70],"=",["T_WHITESPACE"," ",70],["T_VARIABLE","$productsCollection",70],["T_OBJECT_OPERATOR","->",70],["T_STRING","getAllIds",70],"(",")",";",["T_WHITESPACE","\n        ",70],"}",["T_WHITESPACE","\n        ",71],["T_RETURN","return",72],["T_WHITESPACE"," ",72],["T_VARIABLE","$this",72],["T_OBJECT_OPERATOR","->",72],["T_STRING","hashMap",72],"[",["T_VARIABLE","$categoryId",72],"]",";",["T_WHITESPACE","\n    ",72],"}",["T_WHITESPACE","\n\n    ",73],["T_DOC_COMMENT","\/**\n     * {@inheritdoc}\n     *\/",75],["T_WHITESPACE","\n    ",77],["T_PUBLIC","public",78],["T_WHITESPACE"," ",78],["T_FUNCTION","function",78],["T_WHITESPACE"," ",78],["T_STRING","getData",78],"(",["T_VARIABLE","$categoryId",78],",",["T_WHITESPACE"," ",78],["T_VARIABLE","$key",78],")",["T_WHITESPACE","\n    ",78],"{",["T_WHITESPACE","\n        ",79],["T_VARIABLE","$categorySpecificData",80],["T_WHITESPACE"," ",80],"=",["T_WHITESPACE"," ",80],["T_VARIABLE","$this",80],["T_OBJECT_OPERATOR","->",80],["T_STRING","getAllData",80],"(",["T_VARIABLE","$categoryId",80],")",";",["T_WHITESPACE","\n        ",80],["T_IF","if",81],["T_WHITESPACE"," ",81],"(",["T_ISSET","isset",81],"(",["T_VARIABLE","$categorySpecificData",81],"[",["T_VARIABLE","$key",81],"]",")",")",["T_WHITESPACE"," ",81],"{",["T_WHITESPACE","\n            ",81],["T_RETURN","return",82],["T_WHITESPACE"," ",82],["T_VARIABLE","$categorySpecificData",82],"[",["T_VARIABLE","$key",82],"]",";",["T_WHITESPACE","\n        ",82],"}",["T_WHITESPACE","\n        ",83],["T_RETURN","return",84],["T_WHITESPACE"," ",84],"[","]",";",["T_WHITESPACE","\n    ",84],"}",["T_WHITESPACE","\n\n    ",85],["T_DOC_COMMENT","\/**\n     * {@inheritdoc}\n     *\/",87],["T_WHITESPACE","\n    ",89],["T_PUBLIC","public",90],["T_WHITESPACE"," ",90],["T_FUNCTION","function",90],["T_WHITESPACE"," ",90],["T_STRING","resetData",90],"(",["T_VARIABLE","$categoryId",90],")",["T_WHITESPACE","\n    ",90],"{",["T_WHITESPACE","\n        ",91],["T_VARIABLE","$this",92],["T_OBJECT_OPERATOR","->",92],["T_STRING","hashMapPool",92],["T_OBJECT_OPERATOR","->",92],["T_STRING","resetMap",92],"(",["T_STRING","DataCategoryHashMap",92],["T_DOUBLE_COLON","::",92],["T_CLASS","class",92],",",["T_WHITESPACE"," ",92],["T_VARIABLE","$categoryId",92],")",";",["T_WHITESPACE","\n        ",92],["T_UNSET","unset",93],"(",["T_VARIABLE","$this",93],["T_OBJECT_OPERATOR","->",93],["T_STRING","hashMap",93],"[",["T_VARIABLE","$categoryId",93],"]",")",";",["T_WHITESPACE","\n    ",93],"}",["T_WHITESPACE","\n",94],"}",["T_WHITESPACE","\n",95]]
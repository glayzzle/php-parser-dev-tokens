[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Copyright \u00c2\u00a9 2013-2017 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n *\/",2],["T_WHITESPACE","\n\n",5],["T_NAMESPACE","namespace",7],["T_WHITESPACE"," ",7],["T_STRING","Magento",7],["T_NS_SEPARATOR","\\",7],["T_STRING","SalesRule",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Model",7],";",["T_WHITESPACE","\n\n",7],["T_USE","use",9],["T_WHITESPACE"," ",9],["T_STRING","Magento",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Framework",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Api",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Search",9],["T_NS_SEPARATOR","\\",9],["T_STRING","FilterGroup",9],";",["T_WHITESPACE","\n",9],["T_USE","use",10],["T_WHITESPACE"," ",10],["T_STRING","Magento",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Framework",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Api",10],["T_NS_SEPARATOR","\\",10],["T_STRING","SearchCriteria",10],["T_NS_SEPARATOR","\\",10],["T_STRING","CollectionProcessorInterface",10],";",["T_WHITESPACE","\n",10],["T_USE","use",11],["T_WHITESPACE"," ",11],["T_STRING","Magento",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Framework",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Api",11],["T_NS_SEPARATOR","\\",11],["T_STRING","SortOrder",11],";",["T_WHITESPACE","\n",11],["T_USE","use",12],["T_WHITESPACE"," ",12],["T_STRING","Magento",12],["T_NS_SEPARATOR","\\",12],["T_STRING","SalesRule",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Model",12],["T_NS_SEPARATOR","\\",12],["T_STRING","ResourceModel",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Coupon",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Collection",12],";",["T_WHITESPACE","\n\n",12],["T_DOC_COMMENT","\/**\n * Coupon CRUD class\n *\n * @SuppressWarnings(PHPMD.CouplingBetweenObjects)\n *\/",14],["T_WHITESPACE","\n",18],["T_CLASS","class",19],["T_WHITESPACE"," ",19],["T_STRING","CouponRepository",19],["T_WHITESPACE"," ",19],["T_IMPLEMENTS","implements",19],["T_WHITESPACE"," ",19],["T_NS_SEPARATOR","\\",19],["T_STRING","Magento",19],["T_NS_SEPARATOR","\\",19],["T_STRING","SalesRule",19],["T_NS_SEPARATOR","\\",19],["T_STRING","Api",19],["T_NS_SEPARATOR","\\",19],["T_STRING","CouponRepositoryInterface",19],["T_WHITESPACE","\n",19],"{",["T_WHITESPACE","\n    ",20],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\SalesRule\\Model\\CouponFactory\n     *\/",21],["T_WHITESPACE","\n    ",23],["T_PROTECTED","protected",24],["T_WHITESPACE"," ",24],["T_VARIABLE","$couponFactory",24],";",["T_WHITESPACE","\n\n    ",24],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\SalesRule\\Model\\RuleFactory\n     *\/",26],["T_WHITESPACE","\n    ",28],["T_PROTECTED","protected",29],["T_WHITESPACE"," ",29],["T_VARIABLE","$ruleFactory",29],";",["T_WHITESPACE","\n\n    ",29],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\SalesRule\\Api\\Data\\CouponSearchResultInterfaceFactory\n     *\/",31],["T_WHITESPACE","\n    ",33],["T_PROTECTED","protected",34],["T_WHITESPACE"," ",34],["T_VARIABLE","$searchResultFactory",34],";",["T_WHITESPACE","\n\n    ",34],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\SalesRule\\Model\\ResourceModel\\Coupon\\CollectionFactory\n     *\/",36],["T_WHITESPACE","\n    ",38],["T_PROTECTED","protected",39],["T_WHITESPACE"," ",39],["T_VARIABLE","$collectionFactory",39],";",["T_WHITESPACE","\n\n    ",39],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\SalesRule\\Model\\Spi\\CouponResourceInterface\n     *\/",41],["T_WHITESPACE","\n    ",43],["T_PROTECTED","protected",44],["T_WHITESPACE"," ",44],["T_VARIABLE","$resourceModel",44],";",["T_WHITESPACE","\n\n    ",44],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Framework\\Api\\ExtensionAttribute\\JoinProcessorInterface\n     *\/",46],["T_WHITESPACE","\n    ",48],["T_PROTECTED","protected",49],["T_WHITESPACE"," ",49],["T_VARIABLE","$extensionAttributesJoinProcessor",49],";",["T_WHITESPACE","\n\n    ",49],["T_DOC_COMMENT","\/** @var  CollectionProcessorInterface *\/",51],["T_WHITESPACE","\n    ",51],["T_PRIVATE","private",52],["T_WHITESPACE"," ",52],["T_VARIABLE","$collectionProcessor",52],";",["T_WHITESPACE","\n\n    ",52],["T_DOC_COMMENT","\/**\n     * CouponRepository constructor.\n     * @param CouponFactory $couponFactory\n     * @param RuleFactory $ruleFactory\n     * @param \\Magento\\SalesRule\\Api\\Data\\CouponSearchResultInterfaceFactory $searchResultFactory\n     * @param ResourceModel\\Coupon\\CollectionFactory $collectionFactory\n     * @param Spi\\CouponResourceInterface $resourceModel\n     * @param \\Magento\\Framework\\Api\\ExtensionAttribute\\JoinProcessorInterface $extensionAttributesJoinProcessor\n     * @param CollectionProcessorInterface|null $collectionProcessor\n     *\/",54],["T_WHITESPACE","\n    ",63],["T_PUBLIC","public",64],["T_WHITESPACE"," ",64],["T_FUNCTION","function",64],["T_WHITESPACE"," ",64],["T_STRING","__construct",64],"(",["T_WHITESPACE","\n        ",64],["T_NS_SEPARATOR","\\",65],["T_STRING","Magento",65],["T_NS_SEPARATOR","\\",65],["T_STRING","SalesRule",65],["T_NS_SEPARATOR","\\",65],["T_STRING","Model",65],["T_NS_SEPARATOR","\\",65],["T_STRING","CouponFactory",65],["T_WHITESPACE"," ",65],["T_VARIABLE","$couponFactory",65],",",["T_WHITESPACE","\n        ",65],["T_NS_SEPARATOR","\\",66],["T_STRING","Magento",66],["T_NS_SEPARATOR","\\",66],["T_STRING","SalesRule",66],["T_NS_SEPARATOR","\\",66],["T_STRING","Model",66],["T_NS_SEPARATOR","\\",66],["T_STRING","RuleFactory",66],["T_WHITESPACE"," ",66],["T_VARIABLE","$ruleFactory",66],",",["T_WHITESPACE","\n        ",66],["T_NS_SEPARATOR","\\",67],["T_STRING","Magento",67],["T_NS_SEPARATOR","\\",67],["T_STRING","SalesRule",67],["T_NS_SEPARATOR","\\",67],["T_STRING","Api",67],["T_NS_SEPARATOR","\\",67],["T_STRING","Data",67],["T_NS_SEPARATOR","\\",67],["T_STRING","CouponSearchResultInterfaceFactory",67],["T_WHITESPACE"," ",67],["T_VARIABLE","$searchResultFactory",67],",",["T_WHITESPACE","\n        ",67],["T_NS_SEPARATOR","\\",68],["T_STRING","Magento",68],["T_NS_SEPARATOR","\\",68],["T_STRING","SalesRule",68],["T_NS_SEPARATOR","\\",68],["T_STRING","Model",68],["T_NS_SEPARATOR","\\",68],["T_STRING","ResourceModel",68],["T_NS_SEPARATOR","\\",68],["T_STRING","Coupon",68],["T_NS_SEPARATOR","\\",68],["T_STRING","CollectionFactory",68],["T_WHITESPACE"," ",68],["T_VARIABLE","$collectionFactory",68],",",["T_WHITESPACE","\n        ",68],["T_NS_SEPARATOR","\\",69],["T_STRING","Magento",69],["T_NS_SEPARATOR","\\",69],["T_STRING","SalesRule",69],["T_NS_SEPARATOR","\\",69],["T_STRING","Model",69],["T_NS_SEPARATOR","\\",69],["T_STRING","Spi",69],["T_NS_SEPARATOR","\\",69],["T_STRING","CouponResourceInterface",69],["T_WHITESPACE"," ",69],["T_VARIABLE","$resourceModel",69],",",["T_WHITESPACE","\n        ",69],["T_NS_SEPARATOR","\\",70],["T_STRING","Magento",70],["T_NS_SEPARATOR","\\",70],["T_STRING","Framework",70],["T_NS_SEPARATOR","\\",70],["T_STRING","Api",70],["T_NS_SEPARATOR","\\",70],["T_STRING","ExtensionAttribute",70],["T_NS_SEPARATOR","\\",70],["T_STRING","JoinProcessorInterface",70],["T_WHITESPACE"," ",70],["T_VARIABLE","$extensionAttributesJoinProcessor",70],",",["T_WHITESPACE","\n        ",70],["T_STRING","CollectionProcessorInterface",71],["T_WHITESPACE"," ",71],["T_VARIABLE","$collectionProcessor",71],["T_WHITESPACE"," ",71],"=",["T_WHITESPACE"," ",71],["T_STRING","null",71],["T_WHITESPACE","\n    ",71],")",["T_WHITESPACE"," ",72],"{",["T_WHITESPACE","\n        ",72],["T_VARIABLE","$this",73],["T_OBJECT_OPERATOR","->",73],["T_STRING","couponFactory",73],["T_WHITESPACE"," ",73],"=",["T_WHITESPACE"," ",73],["T_VARIABLE","$couponFactory",73],";",["T_WHITESPACE","\n        ",73],["T_VARIABLE","$this",74],["T_OBJECT_OPERATOR","->",74],["T_STRING","ruleFactory",74],["T_WHITESPACE"," ",74],"=",["T_WHITESPACE"," ",74],["T_VARIABLE","$ruleFactory",74],";",["T_WHITESPACE","\n        ",74],["T_VARIABLE","$this",75],["T_OBJECT_OPERATOR","->",75],["T_STRING","searchResultFactory",75],["T_WHITESPACE"," ",75],"=",["T_WHITESPACE"," ",75],["T_VARIABLE","$searchResultFactory",75],";",["T_WHITESPACE","\n        ",75],["T_VARIABLE","$this",76],["T_OBJECT_OPERATOR","->",76],["T_STRING","collectionFactory",76],["T_WHITESPACE"," ",76],"=",["T_WHITESPACE"," ",76],["T_VARIABLE","$collectionFactory",76],";",["T_WHITESPACE","\n        ",76],["T_VARIABLE","$this",77],["T_OBJECT_OPERATOR","->",77],["T_STRING","resourceModel",77],["T_WHITESPACE"," ",77],"=",["T_WHITESPACE"," ",77],["T_VARIABLE","$resourceModel",77],";",["T_WHITESPACE","\n        ",77],["T_VARIABLE","$this",78],["T_OBJECT_OPERATOR","->",78],["T_STRING","extensionAttributesJoinProcessor",78],["T_WHITESPACE"," ",78],"=",["T_WHITESPACE"," ",78],["T_VARIABLE","$extensionAttributesJoinProcessor",78],";",["T_WHITESPACE","\n        ",78],["T_VARIABLE","$this",79],["T_OBJECT_OPERATOR","->",79],["T_STRING","collectionProcessor",79],["T_WHITESPACE"," ",79],"=",["T_WHITESPACE"," ",79],["T_VARIABLE","$collectionProcessor",79],["T_WHITESPACE"," ",79],"?",":",["T_WHITESPACE"," ",79],["T_VARIABLE","$this",79],["T_OBJECT_OPERATOR","->",79],["T_STRING","getCollectionProcessor",79],"(",")",";",["T_WHITESPACE","\n    ",79],"}",["T_WHITESPACE","\n\n    ",80],["T_DOC_COMMENT","\/**\n     * Save coupon.\n     *\n     * @param \\Magento\\SalesRule\\Api\\Data\\CouponInterface $coupon\n     * @return \\Magento\\SalesRule\\Api\\Data\\CouponInterface\n     * @throws \\Magento\\Framework\\Exception\\InputException If there is a problem with the input\n     * @throws \\Magento\\Framework\\Exception\\NoSuchEntityException If a coupon ID is sent but the coupon does not exist\n     * @throws \\Magento\\Framework\\Exception\\LocalizedException\n     *\/",82],["T_WHITESPACE","\n    ",90],["T_PUBLIC","public",91],["T_WHITESPACE"," ",91],["T_FUNCTION","function",91],["T_WHITESPACE"," ",91],["T_STRING","save",91],"(",["T_NS_SEPARATOR","\\",91],["T_STRING","Magento",91],["T_NS_SEPARATOR","\\",91],["T_STRING","SalesRule",91],["T_NS_SEPARATOR","\\",91],["T_STRING","Api",91],["T_NS_SEPARATOR","\\",91],["T_STRING","Data",91],["T_NS_SEPARATOR","\\",91],["T_STRING","CouponInterface",91],["T_WHITESPACE"," ",91],["T_VARIABLE","$coupon",91],")",["T_WHITESPACE","\n    ",91],"{",["T_WHITESPACE","\n        ",92],["T_COMMENT","\/\/if coupon id is provided, use the existing coupon and blend in the new data supplied\n",93],["T_WHITESPACE","        ",94],["T_VARIABLE","$couponId",94],["T_WHITESPACE"," ",94],"=",["T_WHITESPACE"," ",94],["T_VARIABLE","$coupon",94],["T_OBJECT_OPERATOR","->",94],["T_STRING","getCouponId",94],"(",")",";",["T_WHITESPACE","\n        ",94],["T_IF","if",95],["T_WHITESPACE"," ",95],"(",["T_VARIABLE","$couponId",95],")",["T_WHITESPACE"," ",95],"{",["T_WHITESPACE","\n            ",95],["T_VARIABLE","$existingCoupon",96],["T_WHITESPACE"," ",96],"=",["T_WHITESPACE"," ",96],["T_VARIABLE","$this",96],["T_OBJECT_OPERATOR","->",96],["T_STRING","getById",96],"(",["T_VARIABLE","$couponId",96],")",";",["T_WHITESPACE","\n            ",96],["T_VARIABLE","$mergedData",97],["T_WHITESPACE"," ",97],"=",["T_WHITESPACE"," ",97],["T_STRING","array_merge",97],"(",["T_VARIABLE","$existingCoupon",97],["T_OBJECT_OPERATOR","->",97],["T_STRING","getData",97],"(",")",",",["T_WHITESPACE"," ",97],["T_VARIABLE","$coupon",97],["T_OBJECT_OPERATOR","->",97],["T_STRING","getData",97],"(",")",")",";",["T_WHITESPACE","\n            ",97],["T_VARIABLE","$coupon",98],["T_OBJECT_OPERATOR","->",98],["T_STRING","setData",98],"(",["T_VARIABLE","$mergedData",98],")",";",["T_WHITESPACE","\n        ",98],"}",["T_WHITESPACE","\n\n        ",99],["T_COMMENT","\/\/blend in specific fields from the rule\n",101],["T_WHITESPACE","        ",102],["T_TRY","try",102],["T_WHITESPACE"," ",102],"{",["T_WHITESPACE","\n            ",102],["T_VARIABLE","$rule",103],["T_WHITESPACE"," ",103],"=",["T_WHITESPACE"," ",103],["T_VARIABLE","$this",103],["T_OBJECT_OPERATOR","->",103],["T_STRING","ruleFactory",103],["T_OBJECT_OPERATOR","->",103],["T_STRING","create",103],"(",")",["T_OBJECT_OPERATOR","->",103],["T_STRING","load",103],"(",["T_VARIABLE","$coupon",103],["T_OBJECT_OPERATOR","->",103],["T_STRING","getRuleId",103],"(",")",")",";",["T_WHITESPACE","\n            ",103],["T_IF","if",104],["T_WHITESPACE"," ",104],"(","!",["T_VARIABLE","$rule",104],["T_OBJECT_OPERATOR","->",104],["T_STRING","getRuleId",104],"(",")",")",["T_WHITESPACE"," ",104],"{",["T_WHITESPACE","\n                ",104],["T_THROW","throw",105],["T_WHITESPACE"," ",105],["T_NS_SEPARATOR","\\",105],["T_STRING","Magento",105],["T_NS_SEPARATOR","\\",105],["T_STRING","Framework",105],["T_NS_SEPARATOR","\\",105],["T_STRING","Exception",105],["T_NS_SEPARATOR","\\",105],["T_STRING","NoSuchEntityException",105],["T_DOUBLE_COLON","::",105],["T_STRING","singleField",105],"(",["T_CONSTANT_ENCAPSED_STRING","'rule_id'",105],",",["T_WHITESPACE"," ",105],["T_VARIABLE","$coupon",105],["T_OBJECT_OPERATOR","->",105],["T_STRING","getRuleId",105],"(",")",")",";",["T_WHITESPACE","\n            ",105],"}",["T_WHITESPACE","\n            ",106],["T_IF","if",107],["T_WHITESPACE"," ",107],"(",["T_VARIABLE","$rule",107],["T_OBJECT_OPERATOR","->",107],["T_STRING","getCouponType",107],"(",")",["T_WHITESPACE"," ",107],["T_IS_EQUAL","==",107],["T_WHITESPACE"," ",107],["T_VARIABLE","$rule",107],["T_DOUBLE_COLON","::",107],["T_STRING","COUPON_TYPE_NO_COUPON",107],")",["T_WHITESPACE"," ",107],"{",["T_WHITESPACE","\n                ",107],["T_THROW","throw",108],["T_WHITESPACE"," ",108],["T_NEW","new",108],["T_WHITESPACE"," ",108],["T_NS_SEPARATOR","\\",108],["T_STRING","Magento",108],["T_NS_SEPARATOR","\\",108],["T_STRING","Framework",108],["T_NS_SEPARATOR","\\",108],["T_STRING","Exception",108],["T_NS_SEPARATOR","\\",108],["T_STRING","LocalizedException",108],"(",["T_WHITESPACE","\n                    ",108],["T_STRING","__",109],"(",["T_CONSTANT_ENCAPSED_STRING","'Specified rule does not allow coupons'",109],")",["T_WHITESPACE","\n                ",109],")",";",["T_WHITESPACE","\n            ",110],"}",["T_WHITESPACE"," ",111],["T_ELSEIF","elseif",111],["T_WHITESPACE"," ",111],"(",["T_VARIABLE","$rule",111],["T_OBJECT_OPERATOR","->",111],["T_STRING","getUseAutoGeneration",111],"(",")",["T_WHITESPACE"," ",111],["T_BOOLEAN_AND","&&",111],["T_WHITESPACE"," ",111],["T_VARIABLE","$coupon",111],["T_OBJECT_OPERATOR","->",111],["T_STRING","getType",111],"(",")",["T_WHITESPACE"," ",111],["T_IS_EQUAL","==",111],["T_WHITESPACE"," ",111],["T_VARIABLE","$coupon",111],["T_DOUBLE_COLON","::",111],["T_STRING","TYPE_MANUAL",111],")",["T_WHITESPACE"," ",111],"{",["T_WHITESPACE","\n                ",111],["T_THROW","throw",112],["T_WHITESPACE"," ",112],["T_NEW","new",112],["T_WHITESPACE"," ",112],["T_NS_SEPARATOR","\\",112],["T_STRING","Magento",112],["T_NS_SEPARATOR","\\",112],["T_STRING","Framework",112],["T_NS_SEPARATOR","\\",112],["T_STRING","Exception",112],["T_NS_SEPARATOR","\\",112],["T_STRING","LocalizedException",112],"(",["T_WHITESPACE","\n                    ",112],["T_STRING","__",113],"(",["T_CONSTANT_ENCAPSED_STRING","'Specified rule only allows auto generated coupons'",113],")",["T_WHITESPACE","\n                ",113],")",";",["T_WHITESPACE","\n            ",114],"}",["T_WHITESPACE"," ",115],["T_ELSEIF","elseif",115],["T_WHITESPACE"," ",115],"(","!",["T_VARIABLE","$rule",115],["T_OBJECT_OPERATOR","->",115],["T_STRING","getUseAutoGeneration",115],"(",")",["T_WHITESPACE"," ",115],["T_BOOLEAN_AND","&&",115],["T_WHITESPACE"," ",115],["T_VARIABLE","$coupon",115],["T_OBJECT_OPERATOR","->",115],["T_STRING","getType",115],"(",")",["T_WHITESPACE"," ",115],["T_IS_EQUAL","==",115],["T_WHITESPACE"," ",115],["T_VARIABLE","$coupon",115],["T_DOUBLE_COLON","::",115],["T_STRING","TYPE_GENERATED",115],")",["T_WHITESPACE"," ",115],"{",["T_WHITESPACE","\n                ",115],["T_THROW","throw",116],["T_WHITESPACE"," ",116],["T_NEW","new",116],["T_WHITESPACE"," ",116],["T_NS_SEPARATOR","\\",116],["T_STRING","Magento",116],["T_NS_SEPARATOR","\\",116],["T_STRING","Framework",116],["T_NS_SEPARATOR","\\",116],["T_STRING","Exception",116],["T_NS_SEPARATOR","\\",116],["T_STRING","LocalizedException",116],"(",["T_WHITESPACE","\n                    ",116],["T_STRING","__",117],"(",["T_CONSTANT_ENCAPSED_STRING","'Specified rule does not allow auto generated coupons'",117],")",["T_WHITESPACE","\n                ",117],")",";",["T_WHITESPACE","\n            ",118],"}",["T_WHITESPACE","\n            ",119],["T_VARIABLE","$coupon",120],["T_OBJECT_OPERATOR","->",120],["T_STRING","setExpirationDate",120],"(",["T_VARIABLE","$rule",120],["T_OBJECT_OPERATOR","->",120],["T_STRING","getToDate",120],"(",")",")",";",["T_WHITESPACE","\n            ",120],["T_VARIABLE","$coupon",121],["T_OBJECT_OPERATOR","->",121],["T_STRING","setUsageLimit",121],"(",["T_VARIABLE","$rule",121],["T_OBJECT_OPERATOR","->",121],["T_STRING","getUsesPerCoupon",121],"(",")",")",";",["T_WHITESPACE","\n            ",121],["T_VARIABLE","$coupon",122],["T_OBJECT_OPERATOR","->",122],["T_STRING","setUsagePerCustomer",122],"(",["T_VARIABLE","$rule",122],["T_OBJECT_OPERATOR","->",122],["T_STRING","getUsesPerCustomer",122],"(",")",")",";",["T_WHITESPACE","\n        ",122],"}",["T_WHITESPACE"," ",123],["T_CATCH","catch",123],["T_WHITESPACE"," ",123],"(",["T_NS_SEPARATOR","\\",123],["T_STRING","Exception",123],["T_WHITESPACE"," ",123],["T_VARIABLE","$e",123],")",["T_WHITESPACE"," ",123],"{",["T_WHITESPACE","\n            ",123],["T_THROW","throw",124],["T_WHITESPACE"," ",124],["T_NEW","new",124],["T_WHITESPACE"," ",124],["T_NS_SEPARATOR","\\",124],["T_STRING","Magento",124],["T_NS_SEPARATOR","\\",124],["T_STRING","Framework",124],["T_NS_SEPARATOR","\\",124],["T_STRING","Exception",124],["T_NS_SEPARATOR","\\",124],["T_STRING","LocalizedException",124],"(",["T_WHITESPACE","\n                ",124],["T_STRING","__",125],"(",["T_CONSTANT_ENCAPSED_STRING","'Error occurred when saving coupon: %1'",125],",",["T_WHITESPACE"," ",125],["T_VARIABLE","$e",125],["T_OBJECT_OPERATOR","->",125],["T_STRING","getMessage",125],"(",")",")",["T_WHITESPACE","\n            ",125],")",";",["T_WHITESPACE","\n        ",126],"}",["T_WHITESPACE","\n\n        ",127],["T_VARIABLE","$this",129],["T_OBJECT_OPERATOR","->",129],["T_STRING","resourceModel",129],["T_OBJECT_OPERATOR","->",129],["T_STRING","save",129],"(",["T_VARIABLE","$coupon",129],")",";",["T_WHITESPACE","\n        ",129],["T_RETURN","return",130],["T_WHITESPACE"," ",130],["T_VARIABLE","$coupon",130],";",["T_WHITESPACE","\n    ",130],"}",["T_WHITESPACE","\n\n    ",131],["T_DOC_COMMENT","\/**\n     * Get coupon by coupon id.\n     *\n     * @param int $couponId\n     * @return \\Magento\\SalesRule\\Api\\Data\\CouponInterface\n     * @throws \\Magento\\Framework\\Exception\\NoSuchEntityException If $couponId is not found\n     * @throws \\Magento\\Framework\\Exception\\LocalizedException\n     *\/",133],["T_WHITESPACE","\n    ",140],["T_PUBLIC","public",141],["T_WHITESPACE"," ",141],["T_FUNCTION","function",141],["T_WHITESPACE"," ",141],["T_STRING","getById",141],"(",["T_VARIABLE","$couponId",141],")",["T_WHITESPACE","\n    ",141],"{",["T_WHITESPACE","\n        ",142],["T_VARIABLE","$coupon",143],["T_WHITESPACE"," ",143],"=",["T_WHITESPACE"," ",143],["T_VARIABLE","$this",143],["T_OBJECT_OPERATOR","->",143],["T_STRING","couponFactory",143],["T_OBJECT_OPERATOR","->",143],["T_STRING","create",143],"(",")",["T_OBJECT_OPERATOR","->",143],["T_STRING","load",143],"(",["T_VARIABLE","$couponId",143],")",";",["T_WHITESPACE","\n\n        ",143],["T_IF","if",145],["T_WHITESPACE"," ",145],"(","!",["T_VARIABLE","$coupon",145],["T_OBJECT_OPERATOR","->",145],["T_STRING","getCouponId",145],"(",")",")",["T_WHITESPACE"," ",145],"{",["T_WHITESPACE","\n            ",145],["T_THROW","throw",146],["T_WHITESPACE"," ",146],["T_NEW","new",146],["T_WHITESPACE"," ",146],["T_NS_SEPARATOR","\\",146],["T_STRING","Magento",146],["T_NS_SEPARATOR","\\",146],["T_STRING","Framework",146],["T_NS_SEPARATOR","\\",146],["T_STRING","Exception",146],["T_NS_SEPARATOR","\\",146],["T_STRING","NoSuchEntityException",146],"(",")",";",["T_WHITESPACE","\n        ",146],"}",["T_WHITESPACE","\n        ",147],["T_RETURN","return",148],["T_WHITESPACE"," ",148],["T_VARIABLE","$coupon",148],";",["T_WHITESPACE","\n    ",148],"}",["T_WHITESPACE","\n\n    ",149],["T_DOC_COMMENT","\/**\n     * Retrieve coupon.\n     *\n     * @param \\Magento\\Framework\\Api\\SearchCriteriaInterface $searchCriteria\n     * @return \\Magento\\SalesRule\\Api\\Data\\CouponSearchResultInterface\n     * @throws \\Magento\\Framework\\Exception\\LocalizedException\n     *\/",151],["T_WHITESPACE","\n    ",157],["T_PUBLIC","public",158],["T_WHITESPACE"," ",158],["T_FUNCTION","function",158],["T_WHITESPACE"," ",158],["T_STRING","getList",158],"(",["T_NS_SEPARATOR","\\",158],["T_STRING","Magento",158],["T_NS_SEPARATOR","\\",158],["T_STRING","Framework",158],["T_NS_SEPARATOR","\\",158],["T_STRING","Api",158],["T_NS_SEPARATOR","\\",158],["T_STRING","SearchCriteriaInterface",158],["T_WHITESPACE"," ",158],["T_VARIABLE","$searchCriteria",158],")",["T_WHITESPACE","\n    ",158],"{",["T_WHITESPACE","\n        ",159],["T_DOC_COMMENT","\/** @var \\Magento\\SalesRule\\Model\\ResourceModel\\Coupon\\Collection $collection *\/",160],["T_WHITESPACE","\n        ",160],["T_VARIABLE","$collection",161],["T_WHITESPACE"," ",161],"=",["T_WHITESPACE"," ",161],["T_VARIABLE","$this",161],["T_OBJECT_OPERATOR","->",161],["T_STRING","collectionFactory",161],["T_OBJECT_OPERATOR","->",161],["T_STRING","create",161],"(",")",";",["T_WHITESPACE","\n        ",161],["T_VARIABLE","$couponInterfaceName",162],["T_WHITESPACE"," ",162],"=",["T_WHITESPACE"," ",162],["T_NS_SEPARATOR","\\",162],["T_STRING","Magento",162],["T_NS_SEPARATOR","\\",162],["T_STRING","SalesRule",162],["T_NS_SEPARATOR","\\",162],["T_STRING","Api",162],["T_NS_SEPARATOR","\\",162],["T_STRING","Data",162],["T_NS_SEPARATOR","\\",162],["T_STRING","CouponInterface",162],["T_DOUBLE_COLON","::",162],["T_CLASS","class",162],";",["T_WHITESPACE","\n        ",162],["T_VARIABLE","$this",163],["T_OBJECT_OPERATOR","->",163],["T_STRING","extensionAttributesJoinProcessor",163],["T_OBJECT_OPERATOR","->",163],["T_STRING","process",163],"(",["T_VARIABLE","$collection",163],",",["T_WHITESPACE"," ",163],["T_VARIABLE","$couponInterfaceName",163],")",";",["T_WHITESPACE","\n\n        ",163],["T_VARIABLE","$this",165],["T_OBJECT_OPERATOR","->",165],["T_STRING","collectionProcessor",165],["T_OBJECT_OPERATOR","->",165],["T_STRING","process",165],"(",["T_VARIABLE","$searchCriteria",165],",",["T_WHITESPACE"," ",165],["T_VARIABLE","$collection",165],")",";",["T_WHITESPACE","\n        ",165],["T_VARIABLE","$searchResults",166],["T_WHITESPACE"," ",166],"=",["T_WHITESPACE"," ",166],["T_VARIABLE","$this",166],["T_OBJECT_OPERATOR","->",166],["T_STRING","searchResultFactory",166],["T_OBJECT_OPERATOR","->",166],["T_STRING","create",166],"(",")",";",["T_WHITESPACE","\n        ",166],["T_VARIABLE","$searchResults",167],["T_OBJECT_OPERATOR","->",167],["T_STRING","setSearchCriteria",167],"(",["T_VARIABLE","$searchCriteria",167],")",";",["T_WHITESPACE","\n        ",167],["T_VARIABLE","$searchResults",168],["T_OBJECT_OPERATOR","->",168],["T_STRING","setItems",168],"(",["T_VARIABLE","$collection",168],["T_OBJECT_OPERATOR","->",168],["T_STRING","getItems",168],"(",")",")",";",["T_WHITESPACE","\n        ",168],["T_VARIABLE","$searchResults",169],["T_OBJECT_OPERATOR","->",169],["T_STRING","setTotalCount",169],"(",["T_VARIABLE","$collection",169],["T_OBJECT_OPERATOR","->",169],["T_STRING","getSize",169],"(",")",")",";",["T_WHITESPACE","\n        ",169],["T_RETURN","return",170],["T_WHITESPACE"," ",170],["T_VARIABLE","$searchResults",170],";",["T_WHITESPACE","\n    ",170],"}",["T_WHITESPACE","\n\n    ",171],["T_DOC_COMMENT","\/**\n     * Delete coupon by coupon id.\n     *\n     * @param int $couponId\n     * @return bool true on success\n     * @throws \\Magento\\Framework\\Exception\\NoSuchEntityException\n     * @throws \\Magento\\Framework\\Exception\\LocalizedException\n     *\/",173],["T_WHITESPACE","\n    ",180],["T_PUBLIC","public",181],["T_WHITESPACE"," ",181],["T_FUNCTION","function",181],["T_WHITESPACE"," ",181],["T_STRING","deleteById",181],"(",["T_VARIABLE","$couponId",181],")",["T_WHITESPACE","\n    ",181],"{",["T_WHITESPACE","\n        ",182],["T_DOC_COMMENT","\/** @var \\Magento\\SalesRule\\Model\\Coupon $coupon *\/",183],["T_WHITESPACE","\n        ",183],["T_VARIABLE","$coupon",184],["T_WHITESPACE"," ",184],"=",["T_WHITESPACE"," ",184],["T_VARIABLE","$this",184],["T_OBJECT_OPERATOR","->",184],["T_STRING","couponFactory",184],["T_OBJECT_OPERATOR","->",184],["T_STRING","create",184],"(",")",["T_WHITESPACE","\n            ",184],["T_OBJECT_OPERATOR","->",185],["T_STRING","load",185],"(",["T_VARIABLE","$couponId",185],")",";",["T_WHITESPACE","\n\n        ",185],["T_IF","if",187],["T_WHITESPACE"," ",187],"(","!",["T_VARIABLE","$coupon",187],["T_OBJECT_OPERATOR","->",187],["T_STRING","getCouponId",187],"(",")",")",["T_WHITESPACE"," ",187],"{",["T_WHITESPACE","\n            ",187],["T_THROW","throw",188],["T_WHITESPACE"," ",188],["T_NEW","new",188],["T_WHITESPACE"," ",188],["T_NS_SEPARATOR","\\",188],["T_STRING","Magento",188],["T_NS_SEPARATOR","\\",188],["T_STRING","Framework",188],["T_NS_SEPARATOR","\\",188],["T_STRING","Exception",188],["T_NS_SEPARATOR","\\",188],["T_STRING","NoSuchEntityException",188],"(",")",";",["T_WHITESPACE","\n        ",188],"}",["T_WHITESPACE","\n\n        ",189],["T_VARIABLE","$this",191],["T_OBJECT_OPERATOR","->",191],["T_STRING","resourceModel",191],["T_OBJECT_OPERATOR","->",191],["T_STRING","delete",191],"(",["T_VARIABLE","$coupon",191],")",";",["T_WHITESPACE","\n        ",191],["T_RETURN","return",192],["T_WHITESPACE"," ",192],["T_STRING","true",192],";",["T_WHITESPACE","\n    ",192],"}",["T_WHITESPACE","\n\n    ",193],["T_DOC_COMMENT","\/**\n     * Helper function that adds a FilterGroup to the collection.\n     *\n     * @param \\Magento\\Framework\\Api\\Search\\FilterGroup $filterGroup\n     * @param Collection $collection\n     * @deprecated\n     * @return void\n     *\/",195],["T_WHITESPACE","\n    ",202],["T_PROTECTED","protected",203],["T_WHITESPACE"," ",203],["T_FUNCTION","function",203],["T_WHITESPACE"," ",203],["T_STRING","addFilterGroupToCollection",203],"(",["T_WHITESPACE","\n        ",203],["T_NS_SEPARATOR","\\",204],["T_STRING","Magento",204],["T_NS_SEPARATOR","\\",204],["T_STRING","Framework",204],["T_NS_SEPARATOR","\\",204],["T_STRING","Api",204],["T_NS_SEPARATOR","\\",204],["T_STRING","Search",204],["T_NS_SEPARATOR","\\",204],["T_STRING","FilterGroup",204],["T_WHITESPACE"," ",204],["T_VARIABLE","$filterGroup",204],",",["T_WHITESPACE","\n        ",204],["T_STRING","Collection",205],["T_WHITESPACE"," ",205],["T_VARIABLE","$collection",205],["T_WHITESPACE","\n    ",205],")",["T_WHITESPACE"," ",206],"{",["T_WHITESPACE","\n        ",206],["T_VARIABLE","$fields",207],["T_WHITESPACE"," ",207],"=",["T_WHITESPACE"," ",207],"[","]",";",["T_WHITESPACE","\n        ",207],["T_VARIABLE","$conditions",208],["T_WHITESPACE"," ",208],"=",["T_WHITESPACE"," ",208],"[","]",";",["T_WHITESPACE","\n        ",208],["T_FOREACH","foreach",209],["T_WHITESPACE"," ",209],"(",["T_VARIABLE","$filterGroup",209],["T_OBJECT_OPERATOR","->",209],["T_STRING","getFilters",209],"(",")",["T_WHITESPACE"," ",209],["T_AS","as",209],["T_WHITESPACE"," ",209],["T_VARIABLE","$filter",209],")",["T_WHITESPACE"," ",209],"{",["T_WHITESPACE","\n            ",209],["T_VARIABLE","$condition",210],["T_WHITESPACE"," ",210],"=",["T_WHITESPACE"," ",210],["T_VARIABLE","$filter",210],["T_OBJECT_OPERATOR","->",210],["T_STRING","getConditionType",210],"(",")",["T_WHITESPACE"," ",210],"?",["T_WHITESPACE"," ",210],["T_VARIABLE","$filter",210],["T_OBJECT_OPERATOR","->",210],["T_STRING","getConditionType",210],"(",")",["T_WHITESPACE"," ",210],":",["T_WHITESPACE"," ",210],["T_CONSTANT_ENCAPSED_STRING","'eq'",210],";",["T_WHITESPACE","\n            ",210],["T_VARIABLE","$fields",211],"[","]",["T_WHITESPACE"," ",211],"=",["T_WHITESPACE"," ",211],["T_VARIABLE","$filter",211],["T_OBJECT_OPERATOR","->",211],["T_STRING","getField",211],"(",")",";",["T_WHITESPACE","\n            ",211],["T_VARIABLE","$conditions",212],"[","]",["T_WHITESPACE"," ",212],"=",["T_WHITESPACE"," ",212],"[",["T_VARIABLE","$condition",212],["T_WHITESPACE"," ",212],["T_DOUBLE_ARROW","=>",212],["T_WHITESPACE"," ",212],["T_VARIABLE","$filter",212],["T_OBJECT_OPERATOR","->",212],["T_STRING","getValue",212],"(",")","]",";",["T_WHITESPACE","\n        ",212],"}",["T_WHITESPACE","\n        ",213],["T_IF","if",214],["T_WHITESPACE"," ",214],"(",["T_VARIABLE","$fields",214],")",["T_WHITESPACE"," ",214],"{",["T_WHITESPACE","\n            ",214],["T_VARIABLE","$collection",215],["T_OBJECT_OPERATOR","->",215],["T_STRING","addFieldToFilter",215],"(",["T_VARIABLE","$fields",215],",",["T_WHITESPACE"," ",215],["T_VARIABLE","$conditions",215],")",";",["T_WHITESPACE","\n        ",215],"}",["T_WHITESPACE","\n    ",216],"}",["T_WHITESPACE","\n\n    ",217],["T_DOC_COMMENT","\/**\n     * Retrieve collection processor\n     *\n     * @deprecated\n     * @return CollectionProcessorInterface\n     *\/",219],["T_WHITESPACE","\n    ",224],["T_PRIVATE","private",225],["T_WHITESPACE"," ",225],["T_FUNCTION","function",225],["T_WHITESPACE"," ",225],["T_STRING","getCollectionProcessor",225],"(",")",["T_WHITESPACE","\n    ",225],"{",["T_WHITESPACE","\n        ",226],["T_IF","if",227],["T_WHITESPACE"," ",227],"(","!",["T_VARIABLE","$this",227],["T_OBJECT_OPERATOR","->",227],["T_STRING","collectionProcessor",227],")",["T_WHITESPACE"," ",227],"{",["T_WHITESPACE","\n            ",227],["T_VARIABLE","$this",228],["T_OBJECT_OPERATOR","->",228],["T_STRING","collectionProcessor",228],["T_WHITESPACE"," ",228],"=",["T_WHITESPACE"," ",228],["T_NS_SEPARATOR","\\",228],["T_STRING","Magento",228],["T_NS_SEPARATOR","\\",228],["T_STRING","Framework",228],["T_NS_SEPARATOR","\\",228],["T_STRING","App",228],["T_NS_SEPARATOR","\\",228],["T_STRING","ObjectManager",228],["T_DOUBLE_COLON","::",228],["T_STRING","getInstance",228],"(",")",["T_OBJECT_OPERATOR","->",228],["T_STRING","get",228],"(",["T_WHITESPACE","\n                ",228],["T_NS_SEPARATOR","\\",229],["T_STRING","Magento",229],["T_NS_SEPARATOR","\\",229],["T_STRING","Framework",229],["T_NS_SEPARATOR","\\",229],["T_STRING","Api",229],["T_NS_SEPARATOR","\\",229],["T_STRING","SearchCriteria",229],["T_NS_SEPARATOR","\\",229],["T_STRING","CollectionProcessorInterface",229],["T_DOUBLE_COLON","::",229],["T_CLASS","class",229],["T_WHITESPACE","\n            ",229],")",";",["T_WHITESPACE","\n        ",230],"}",["T_WHITESPACE","\n        ",231],["T_RETURN","return",232],["T_WHITESPACE"," ",232],["T_VARIABLE","$this",232],["T_OBJECT_OPERATOR","->",232],["T_STRING","collectionProcessor",232],";",["T_WHITESPACE","\n    ",232],"}",["T_WHITESPACE","\n",233],"}",["T_WHITESPACE","\n",234]]
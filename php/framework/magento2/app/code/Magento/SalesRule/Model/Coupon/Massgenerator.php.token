[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Copyright \u00c2\u00a9 2013-2017 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n *\/",2],["T_WHITESPACE","\n",5],["T_NAMESPACE","namespace",6],["T_WHITESPACE"," ",6],["T_STRING","Magento",6],["T_NS_SEPARATOR","\\",6],["T_STRING","SalesRule",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Model",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Coupon",6],";",["T_WHITESPACE","\n\n",6],["T_DOC_COMMENT","\/**\n * SalesRule Mass Coupon Generator\n *\n * @method \\Magento\\SalesRule\\Model\\ResourceModel\\Coupon getResource()\n *\n * @author      Magento Core Team <core@magentocommerce.com>\n *\/",8],["T_WHITESPACE","\n",14],["T_CLASS","class",15],["T_WHITESPACE"," ",15],["T_STRING","Massgenerator",15],["T_WHITESPACE"," ",15],["T_EXTENDS","extends",15],["T_WHITESPACE"," ",15],["T_NS_SEPARATOR","\\",15],["T_STRING","Magento",15],["T_NS_SEPARATOR","\\",15],["T_STRING","Framework",15],["T_NS_SEPARATOR","\\",15],["T_STRING","Model",15],["T_NS_SEPARATOR","\\",15],["T_STRING","AbstractModel",15],["T_WHITESPACE"," ",15],["T_IMPLEMENTS","implements",15],["T_WHITESPACE","\n    ",15],["T_NS_SEPARATOR","\\",16],["T_STRING","Magento",16],["T_NS_SEPARATOR","\\",16],["T_STRING","SalesRule",16],["T_NS_SEPARATOR","\\",16],["T_STRING","Model",16],["T_NS_SEPARATOR","\\",16],["T_STRING","Coupon",16],["T_NS_SEPARATOR","\\",16],["T_STRING","CodegeneratorInterface",16],["T_WHITESPACE","\n",16],"{",["T_WHITESPACE","\n    ",17],["T_DOC_COMMENT","\/**\n     * Maximum probability of guessing the coupon on the first attempt\n     *\/",18],["T_WHITESPACE","\n    ",20],["T_CONST","const",21],["T_WHITESPACE"," ",21],["T_STRING","MAX_PROBABILITY_OF_GUESSING",21],["T_WHITESPACE"," ",21],"=",["T_WHITESPACE"," ",21],["T_DNUMBER","0.25",21],";",["T_WHITESPACE","\n\n    ",21],["T_DOC_COMMENT","\/**\n     * Number of attempts to generate\n     *\/",23],["T_WHITESPACE","\n    ",25],["T_CONST","const",26],["T_WHITESPACE"," ",26],["T_STRING","MAX_GENERATE_ATTEMPTS",26],["T_WHITESPACE"," ",26],"=",["T_WHITESPACE"," ",26],["T_LNUMBER","10",26],";",["T_WHITESPACE","\n\n    ",26],["T_DOC_COMMENT","\/**\n     * Count of generated Coupons\n     * @var int\n     *\/",28],["T_WHITESPACE","\n    ",31],["T_PROTECTED","protected",32],["T_WHITESPACE"," ",32],["T_VARIABLE","$generatedCount",32],["T_WHITESPACE"," ",32],"=",["T_WHITESPACE"," ",32],["T_LNUMBER","0",32],";",["T_WHITESPACE","\n\n    ",32],["T_DOC_COMMENT","\/**\n     * @var array\n     *\/",34],["T_WHITESPACE","\n    ",36],["T_PROTECTED","protected",37],["T_WHITESPACE"," ",37],["T_VARIABLE","$generatedCodes",37],["T_WHITESPACE"," ",37],"=",["T_WHITESPACE"," ",37],"[","]",";",["T_WHITESPACE","\n\n    ",37],["T_DOC_COMMENT","\/**\n     * Sales rule coupon\n     *\n     * @var \\Magento\\SalesRule\\Helper\\Coupon\n     *\/",39],["T_WHITESPACE","\n    ",43],["T_PROTECTED","protected",44],["T_WHITESPACE"," ",44],["T_VARIABLE","$salesRuleCoupon",44],";",["T_WHITESPACE","\n\n    ",44],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Framework\\Stdlib\\DateTime\\DateTime\n     *\/",46],["T_WHITESPACE","\n    ",48],["T_PROTECTED","protected",49],["T_WHITESPACE"," ",49],["T_VARIABLE","$date",49],";",["T_WHITESPACE","\n\n    ",49],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\SalesRule\\Model\\CouponFactory\n     *\/",51],["T_WHITESPACE","\n    ",53],["T_PROTECTED","protected",54],["T_WHITESPACE"," ",54],["T_VARIABLE","$couponFactory",54],";",["T_WHITESPACE","\n\n    ",54],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Framework\\Stdlib\\DateTime\n     *\/",56],["T_WHITESPACE","\n    ",58],["T_PROTECTED","protected",59],["T_WHITESPACE"," ",59],["T_VARIABLE","$dateTime",59],";",["T_WHITESPACE","\n\n    ",59],["T_DOC_COMMENT","\/**\n     * @param \\Magento\\Framework\\Model\\Context $context\n     * @param \\Magento\\Framework\\Registry $registry\n     * @param \\Magento\\SalesRule\\Helper\\Coupon $salesRuleCoupon\n     * @param \\Magento\\SalesRule\\Model\\CouponFactory $couponFactory\n     * @param \\Magento\\Framework\\Stdlib\\DateTime\\DateTime $date\n     * @param \\Magento\\Framework\\Stdlib\\DateTime $dateTime\n     * @param \\Magento\\Framework\\Model\\ResourceModel\\AbstractResource $resource\n     * @param \\Magento\\Framework\\Data\\Collection\\AbstractDb $resourceCollection\n     * @param array $data\n     *\/",61],["T_WHITESPACE","\n    ",71],["T_PUBLIC","public",72],["T_WHITESPACE"," ",72],["T_FUNCTION","function",72],["T_WHITESPACE"," ",72],["T_STRING","__construct",72],"(",["T_WHITESPACE","\n        ",72],["T_NS_SEPARATOR","\\",73],["T_STRING","Magento",73],["T_NS_SEPARATOR","\\",73],["T_STRING","Framework",73],["T_NS_SEPARATOR","\\",73],["T_STRING","Model",73],["T_NS_SEPARATOR","\\",73],["T_STRING","Context",73],["T_WHITESPACE"," ",73],["T_VARIABLE","$context",73],",",["T_WHITESPACE","\n        ",73],["T_NS_SEPARATOR","\\",74],["T_STRING","Magento",74],["T_NS_SEPARATOR","\\",74],["T_STRING","Framework",74],["T_NS_SEPARATOR","\\",74],["T_STRING","Registry",74],["T_WHITESPACE"," ",74],["T_VARIABLE","$registry",74],",",["T_WHITESPACE","\n        ",74],["T_NS_SEPARATOR","\\",75],["T_STRING","Magento",75],["T_NS_SEPARATOR","\\",75],["T_STRING","SalesRule",75],["T_NS_SEPARATOR","\\",75],["T_STRING","Helper",75],["T_NS_SEPARATOR","\\",75],["T_STRING","Coupon",75],["T_WHITESPACE"," ",75],["T_VARIABLE","$salesRuleCoupon",75],",",["T_WHITESPACE","\n        ",75],["T_NS_SEPARATOR","\\",76],["T_STRING","Magento",76],["T_NS_SEPARATOR","\\",76],["T_STRING","SalesRule",76],["T_NS_SEPARATOR","\\",76],["T_STRING","Model",76],["T_NS_SEPARATOR","\\",76],["T_STRING","CouponFactory",76],["T_WHITESPACE"," ",76],["T_VARIABLE","$couponFactory",76],",",["T_WHITESPACE","\n        ",76],["T_NS_SEPARATOR","\\",77],["T_STRING","Magento",77],["T_NS_SEPARATOR","\\",77],["T_STRING","Framework",77],["T_NS_SEPARATOR","\\",77],["T_STRING","Stdlib",77],["T_NS_SEPARATOR","\\",77],["T_STRING","DateTime",77],["T_NS_SEPARATOR","\\",77],["T_STRING","DateTime",77],["T_WHITESPACE"," ",77],["T_VARIABLE","$date",77],",",["T_WHITESPACE","\n        ",77],["T_NS_SEPARATOR","\\",78],["T_STRING","Magento",78],["T_NS_SEPARATOR","\\",78],["T_STRING","Framework",78],["T_NS_SEPARATOR","\\",78],["T_STRING","Stdlib",78],["T_NS_SEPARATOR","\\",78],["T_STRING","DateTime",78],["T_WHITESPACE"," ",78],["T_VARIABLE","$dateTime",78],",",["T_WHITESPACE","\n        ",78],["T_NS_SEPARATOR","\\",79],["T_STRING","Magento",79],["T_NS_SEPARATOR","\\",79],["T_STRING","Framework",79],["T_NS_SEPARATOR","\\",79],["T_STRING","Model",79],["T_NS_SEPARATOR","\\",79],["T_STRING","ResourceModel",79],["T_NS_SEPARATOR","\\",79],["T_STRING","AbstractResource",79],["T_WHITESPACE"," ",79],["T_VARIABLE","$resource",79],["T_WHITESPACE"," ",79],"=",["T_WHITESPACE"," ",79],["T_STRING","null",79],",",["T_WHITESPACE","\n        ",79],["T_NS_SEPARATOR","\\",80],["T_STRING","Magento",80],["T_NS_SEPARATOR","\\",80],["T_STRING","Framework",80],["T_NS_SEPARATOR","\\",80],["T_STRING","Data",80],["T_NS_SEPARATOR","\\",80],["T_STRING","Collection",80],["T_NS_SEPARATOR","\\",80],["T_STRING","AbstractDb",80],["T_WHITESPACE"," ",80],["T_VARIABLE","$resourceCollection",80],["T_WHITESPACE"," ",80],"=",["T_WHITESPACE"," ",80],["T_STRING","null",80],",",["T_WHITESPACE","\n        ",80],["T_ARRAY","array",81],["T_WHITESPACE"," ",81],["T_VARIABLE","$data",81],["T_WHITESPACE"," ",81],"=",["T_WHITESPACE"," ",81],"[","]",["T_WHITESPACE","\n    ",81],")",["T_WHITESPACE"," ",82],"{",["T_WHITESPACE","\n        ",82],["T_VARIABLE","$this",83],["T_OBJECT_OPERATOR","->",83],["T_STRING","salesRuleCoupon",83],["T_WHITESPACE"," ",83],"=",["T_WHITESPACE"," ",83],["T_VARIABLE","$salesRuleCoupon",83],";",["T_WHITESPACE","\n        ",83],["T_VARIABLE","$this",84],["T_OBJECT_OPERATOR","->",84],["T_STRING","date",84],["T_WHITESPACE"," ",84],"=",["T_WHITESPACE"," ",84],["T_VARIABLE","$date",84],";",["T_WHITESPACE","\n        ",84],["T_VARIABLE","$this",85],["T_OBJECT_OPERATOR","->",85],["T_STRING","couponFactory",85],["T_WHITESPACE"," ",85],"=",["T_WHITESPACE"," ",85],["T_VARIABLE","$couponFactory",85],";",["T_WHITESPACE","\n        ",85],["T_VARIABLE","$this",86],["T_OBJECT_OPERATOR","->",86],["T_STRING","dateTime",86],["T_WHITESPACE"," ",86],"=",["T_WHITESPACE"," ",86],["T_VARIABLE","$dateTime",86],";",["T_WHITESPACE","\n        ",86],["T_STRING","parent",87],["T_DOUBLE_COLON","::",87],["T_STRING","__construct",87],"(",["T_VARIABLE","$context",87],",",["T_WHITESPACE"," ",87],["T_VARIABLE","$registry",87],",",["T_WHITESPACE"," ",87],["T_VARIABLE","$resource",87],",",["T_WHITESPACE"," ",87],["T_VARIABLE","$resourceCollection",87],",",["T_WHITESPACE"," ",87],["T_VARIABLE","$data",87],")",";",["T_WHITESPACE","\n    ",87],"}",["T_WHITESPACE","\n\n    ",88],["T_DOC_COMMENT","\/**\n     * Initialize resource\n     *\n     * @return void\n     *\/",90],["T_WHITESPACE","\n    ",94],["T_PROTECTED","protected",95],["T_WHITESPACE"," ",95],["T_FUNCTION","function",95],["T_WHITESPACE"," ",95],["T_STRING","_construct",95],"(",")",["T_WHITESPACE","\n    ",95],"{",["T_WHITESPACE","\n        ",96],["T_VARIABLE","$this",97],["T_OBJECT_OPERATOR","->",97],["T_STRING","_init",97],"(",["T_NS_SEPARATOR","\\",97],["T_STRING","Magento",97],["T_NS_SEPARATOR","\\",97],["T_STRING","SalesRule",97],["T_NS_SEPARATOR","\\",97],["T_STRING","Model",97],["T_NS_SEPARATOR","\\",97],["T_STRING","ResourceModel",97],["T_NS_SEPARATOR","\\",97],["T_STRING","Coupon",97],["T_DOUBLE_COLON","::",97],["T_CLASS","class",97],")",";",["T_WHITESPACE","\n    ",97],"}",["T_WHITESPACE","\n\n    ",98],["T_DOC_COMMENT","\/**\n     * Generate coupon code\n     *\n     * @return string\n     *\/",100],["T_WHITESPACE","\n    ",104],["T_PUBLIC","public",105],["T_WHITESPACE"," ",105],["T_FUNCTION","function",105],["T_WHITESPACE"," ",105],["T_STRING","generateCode",105],"(",")",["T_WHITESPACE","\n    ",105],"{",["T_WHITESPACE","\n        ",106],["T_VARIABLE","$format",107],["T_WHITESPACE"," ",107],"=",["T_WHITESPACE"," ",107],["T_VARIABLE","$this",107],["T_OBJECT_OPERATOR","->",107],["T_STRING","getFormat",107],"(",")",";",["T_WHITESPACE","\n        ",107],["T_IF","if",108],["T_WHITESPACE"," ",108],"(",["T_EMPTY","empty",108],"(",["T_VARIABLE","$format",108],")",")",["T_WHITESPACE"," ",108],"{",["T_WHITESPACE","\n            ",108],["T_VARIABLE","$format",109],["T_WHITESPACE"," ",109],"=",["T_WHITESPACE"," ",109],["T_NS_SEPARATOR","\\",109],["T_STRING","Magento",109],["T_NS_SEPARATOR","\\",109],["T_STRING","SalesRule",109],["T_NS_SEPARATOR","\\",109],["T_STRING","Helper",109],["T_NS_SEPARATOR","\\",109],["T_STRING","Coupon",109],["T_DOUBLE_COLON","::",109],["T_STRING","COUPON_FORMAT_ALPHANUMERIC",109],";",["T_WHITESPACE","\n        ",109],"}",["T_WHITESPACE","\n\n        ",110],["T_VARIABLE","$splitChar",112],["T_WHITESPACE"," ",112],"=",["T_WHITESPACE"," ",112],["T_VARIABLE","$this",112],["T_OBJECT_OPERATOR","->",112],["T_STRING","getDelimiter",112],"(",")",";",["T_WHITESPACE","\n        ",112],["T_VARIABLE","$charset",113],["T_WHITESPACE"," ",113],"=",["T_WHITESPACE"," ",113],["T_VARIABLE","$this",113],["T_OBJECT_OPERATOR","->",113],["T_STRING","salesRuleCoupon",113],["T_OBJECT_OPERATOR","->",113],["T_STRING","getCharset",113],"(",["T_VARIABLE","$format",113],")",";",["T_WHITESPACE","\n\n        ",113],["T_VARIABLE","$code",115],["T_WHITESPACE"," ",115],"=",["T_WHITESPACE"," ",115],["T_CONSTANT_ENCAPSED_STRING","''",115],";",["T_WHITESPACE","\n        ",115],["T_VARIABLE","$charsetSize",116],["T_WHITESPACE"," ",116],"=",["T_WHITESPACE"," ",116],["T_STRING","count",116],"(",["T_VARIABLE","$charset",116],")",";",["T_WHITESPACE","\n        ",116],["T_VARIABLE","$split",117],["T_WHITESPACE"," ",117],"=",["T_WHITESPACE"," ",117],["T_STRING","max",117],"(",["T_LNUMBER","0",117],",",["T_WHITESPACE"," ",117],["T_INT_CAST","(int)",117],["T_VARIABLE","$this",117],["T_OBJECT_OPERATOR","->",117],["T_STRING","getDash",117],"(",")",")",";",["T_WHITESPACE","\n        ",117],["T_VARIABLE","$length",118],["T_WHITESPACE"," ",118],"=",["T_WHITESPACE"," ",118],["T_STRING","max",118],"(",["T_LNUMBER","1",118],",",["T_WHITESPACE"," ",118],["T_INT_CAST","(int)",118],["T_VARIABLE","$this",118],["T_OBJECT_OPERATOR","->",118],["T_STRING","getLength",118],"(",")",")",";",["T_WHITESPACE","\n        ",118],["T_FOR","for",119],["T_WHITESPACE"," ",119],"(",["T_VARIABLE","$i",119],["T_WHITESPACE"," ",119],"=",["T_WHITESPACE"," ",119],["T_LNUMBER","0",119],";",["T_WHITESPACE"," ",119],["T_VARIABLE","$i",119],["T_WHITESPACE"," ",119],"<",["T_WHITESPACE"," ",119],["T_VARIABLE","$length",119],";",["T_WHITESPACE"," ",119],["T_INC","++",119],["T_VARIABLE","$i",119],")",["T_WHITESPACE"," ",119],"{",["T_WHITESPACE","\n            ",119],["T_VARIABLE","$char",120],["T_WHITESPACE"," ",120],"=",["T_WHITESPACE"," ",120],["T_VARIABLE","$charset",120],"[",["T_NS_SEPARATOR","\\",120],["T_STRING","Magento",120],["T_NS_SEPARATOR","\\",120],["T_STRING","Framework",120],["T_NS_SEPARATOR","\\",120],["T_STRING","Math",120],["T_NS_SEPARATOR","\\",120],["T_STRING","Random",120],["T_DOUBLE_COLON","::",120],["T_STRING","getRandomNumber",120],"(",["T_LNUMBER","0",120],",",["T_WHITESPACE"," ",120],["T_VARIABLE","$charsetSize",120],["T_WHITESPACE"," ",120],"-",["T_WHITESPACE"," ",120],["T_LNUMBER","1",120],")","]",";",["T_WHITESPACE","\n            ",120],["T_IF","if",121],["T_WHITESPACE"," ",121],"(","(",["T_VARIABLE","$split",121],["T_WHITESPACE"," ",121],">",["T_WHITESPACE"," ",121],["T_LNUMBER","0",121],")",["T_WHITESPACE"," ",121],["T_BOOLEAN_AND","&&",121],["T_WHITESPACE"," ",121],"(","(",["T_VARIABLE","$i",121],["T_WHITESPACE"," ",121],"%",["T_WHITESPACE"," ",121],["T_VARIABLE","$split",121],")",["T_WHITESPACE"," ",121],["T_IS_IDENTICAL","===",121],["T_WHITESPACE"," ",121],["T_LNUMBER","0",121],")",["T_WHITESPACE"," ",121],["T_BOOLEAN_AND","&&",121],["T_WHITESPACE"," ",121],"(",["T_VARIABLE","$i",121],["T_WHITESPACE"," ",121],["T_IS_NOT_IDENTICAL","!==",121],["T_WHITESPACE"," ",121],["T_LNUMBER","0",121],")",")",["T_WHITESPACE"," ",121],"{",["T_WHITESPACE","\n                ",121],["T_VARIABLE","$char",122],["T_WHITESPACE"," ",122],"=",["T_WHITESPACE"," ",122],["T_VARIABLE","$splitChar",122],["T_WHITESPACE"," ",122],".",["T_WHITESPACE"," ",122],["T_VARIABLE","$char",122],";",["T_WHITESPACE","\n            ",122],"}",["T_WHITESPACE","\n            ",123],["T_VARIABLE","$code",124],["T_WHITESPACE"," ",124],["T_CONCAT_EQUAL",".=",124],["T_WHITESPACE"," ",124],["T_VARIABLE","$char",124],";",["T_WHITESPACE","\n        ",124],"}",["T_WHITESPACE","\n\n        ",125],["T_RETURN","return",127],["T_WHITESPACE"," ",127],["T_VARIABLE","$this",127],["T_OBJECT_OPERATOR","->",127],["T_STRING","getPrefix",127],"(",")",["T_WHITESPACE"," ",127],".",["T_WHITESPACE"," ",127],["T_VARIABLE","$code",127],["T_WHITESPACE"," ",127],".",["T_WHITESPACE"," ",127],["T_VARIABLE","$this",127],["T_OBJECT_OPERATOR","->",127],["T_STRING","getSuffix",127],"(",")",";",["T_WHITESPACE","\n    ",127],"}",["T_WHITESPACE","\n\n    ",128],["T_DOC_COMMENT","\/**\n     * Retrieve delimiter\n     *\n     * @return string\n     *\/",130],["T_WHITESPACE","\n    ",134],["T_PUBLIC","public",135],["T_WHITESPACE"," ",135],["T_FUNCTION","function",135],["T_WHITESPACE"," ",135],["T_STRING","getDelimiter",135],"(",")",["T_WHITESPACE","\n    ",135],"{",["T_WHITESPACE","\n        ",136],["T_IF","if",137],["T_WHITESPACE"," ",137],"(",["T_VARIABLE","$this",137],["T_OBJECT_OPERATOR","->",137],["T_STRING","hasData",137],"(",["T_CONSTANT_ENCAPSED_STRING","'delimiter'",137],")",")",["T_WHITESPACE"," ",137],"{",["T_WHITESPACE","\n            ",137],["T_RETURN","return",138],["T_WHITESPACE"," ",138],["T_VARIABLE","$this",138],["T_OBJECT_OPERATOR","->",138],["T_STRING","getData",138],"(",["T_CONSTANT_ENCAPSED_STRING","'delimiter'",138],")",";",["T_WHITESPACE","\n        ",138],"}",["T_WHITESPACE"," ",139],["T_ELSE","else",139],["T_WHITESPACE"," ",139],"{",["T_WHITESPACE","\n            ",139],["T_RETURN","return",140],["T_WHITESPACE"," ",140],["T_VARIABLE","$this",140],["T_OBJECT_OPERATOR","->",140],["T_STRING","salesRuleCoupon",140],["T_OBJECT_OPERATOR","->",140],["T_STRING","getCodeSeparator",140],"(",")",";",["T_WHITESPACE","\n        ",140],"}",["T_WHITESPACE","\n    ",141],"}",["T_WHITESPACE","\n\n    ",142],["T_DOC_COMMENT","\/**\n     * Generate Coupons Pool\n     *\n     * @throws \\Magento\\Framework\\Exception\\LocalizedException\n     * @return $this\n     *\/",144],["T_WHITESPACE","\n    ",149],["T_PUBLIC","public",150],["T_WHITESPACE"," ",150],["T_FUNCTION","function",150],["T_WHITESPACE"," ",150],["T_STRING","generatePool",150],"(",")",["T_WHITESPACE","\n    ",150],"{",["T_WHITESPACE","\n        ",151],["T_VARIABLE","$this",152],["T_OBJECT_OPERATOR","->",152],["T_STRING","generatedCount",152],["T_WHITESPACE"," ",152],"=",["T_WHITESPACE"," ",152],["T_LNUMBER","0",152],";",["T_WHITESPACE","\n        ",152],["T_VARIABLE","$this",153],["T_OBJECT_OPERATOR","->",153],["T_STRING","generatedCodes",153],["T_WHITESPACE"," ",153],"=",["T_WHITESPACE"," ",153],"[","]",";",["T_WHITESPACE","\n        ",153],["T_VARIABLE","$size",154],["T_WHITESPACE"," ",154],"=",["T_WHITESPACE"," ",154],["T_VARIABLE","$this",154],["T_OBJECT_OPERATOR","->",154],["T_STRING","getQty",154],"(",")",";",["T_WHITESPACE","\n        ",154],["T_VARIABLE","$maxAttempts",155],["T_WHITESPACE"," ",155],"=",["T_WHITESPACE"," ",155],["T_VARIABLE","$this",155],["T_OBJECT_OPERATOR","->",155],["T_STRING","getMaxAttempts",155],"(",")",["T_WHITESPACE"," ",155],"?",["T_WHITESPACE"," ",155],["T_VARIABLE","$this",155],["T_OBJECT_OPERATOR","->",155],["T_STRING","getMaxAttempts",155],"(",")",["T_WHITESPACE"," ",155],":",["T_WHITESPACE"," ",155],["T_STRING","self",155],["T_DOUBLE_COLON","::",155],["T_STRING","MAX_GENERATE_ATTEMPTS",155],";",["T_WHITESPACE","\n        ",155],["T_VARIABLE","$this",156],["T_OBJECT_OPERATOR","->",156],["T_STRING","increaseLength",156],"(",")",";",["T_WHITESPACE","\n        ",156],["T_DOC_COMMENT","\/** @var $coupon \\Magento\\SalesRule\\Model\\Coupon *\/",157],["T_WHITESPACE","\n        ",157],["T_VARIABLE","$coupon",158],["T_WHITESPACE"," ",158],"=",["T_WHITESPACE"," ",158],["T_VARIABLE","$this",158],["T_OBJECT_OPERATOR","->",158],["T_STRING","couponFactory",158],["T_OBJECT_OPERATOR","->",158],["T_STRING","create",158],"(",")",";",["T_WHITESPACE","\n        ",158],["T_VARIABLE","$nowTimestamp",159],["T_WHITESPACE"," ",159],"=",["T_WHITESPACE"," ",159],["T_VARIABLE","$this",159],["T_OBJECT_OPERATOR","->",159],["T_STRING","dateTime",159],["T_OBJECT_OPERATOR","->",159],["T_STRING","formatDate",159],"(",["T_VARIABLE","$this",159],["T_OBJECT_OPERATOR","->",159],["T_STRING","date",159],["T_OBJECT_OPERATOR","->",159],["T_STRING","gmtTimestamp",159],"(",")",")",";",["T_WHITESPACE","\n\n        ",159],["T_FOR","for",161],["T_WHITESPACE"," ",161],"(",["T_VARIABLE","$i",161],["T_WHITESPACE"," ",161],"=",["T_WHITESPACE"," ",161],["T_LNUMBER","0",161],";",["T_WHITESPACE"," ",161],["T_VARIABLE","$i",161],["T_WHITESPACE"," ",161],"<",["T_WHITESPACE"," ",161],["T_VARIABLE","$size",161],";",["T_WHITESPACE"," ",161],["T_VARIABLE","$i",161],["T_INC","++",161],")",["T_WHITESPACE"," ",161],"{",["T_WHITESPACE","\n            ",161],["T_VARIABLE","$attempt",162],["T_WHITESPACE"," ",162],"=",["T_WHITESPACE"," ",162],["T_LNUMBER","0",162],";",["T_WHITESPACE","\n            ",162],["T_DO","do",163],["T_WHITESPACE"," ",163],"{",["T_WHITESPACE","\n                ",163],["T_IF","if",164],["T_WHITESPACE"," ",164],"(",["T_VARIABLE","$attempt",164],["T_WHITESPACE"," ",164],["T_IS_GREATER_OR_EQUAL",">=",164],["T_WHITESPACE"," ",164],["T_VARIABLE","$maxAttempts",164],")",["T_WHITESPACE"," ",164],"{",["T_WHITESPACE","\n                    ",164],["T_THROW","throw",165],["T_WHITESPACE"," ",165],["T_NEW","new",165],["T_WHITESPACE"," ",165],["T_NS_SEPARATOR","\\",165],["T_STRING","Magento",165],["T_NS_SEPARATOR","\\",165],["T_STRING","Framework",165],["T_NS_SEPARATOR","\\",165],["T_STRING","Exception",165],["T_NS_SEPARATOR","\\",165],["T_STRING","LocalizedException",165],"(",["T_WHITESPACE","\n                        ",165],["T_STRING","__",166],"(",["T_CONSTANT_ENCAPSED_STRING","'We cannot create the requested Coupon Qty. Please check your settings and try again.'",166],")",["T_WHITESPACE","\n                    ",166],")",";",["T_WHITESPACE","\n                ",167],"}",["T_WHITESPACE","\n                ",168],["T_VARIABLE","$code",169],["T_WHITESPACE"," ",169],"=",["T_WHITESPACE"," ",169],["T_VARIABLE","$this",169],["T_OBJECT_OPERATOR","->",169],["T_STRING","generateCode",169],"(",")",";",["T_WHITESPACE","\n                ",169],["T_INC","++",170],["T_VARIABLE","$attempt",170],";",["T_WHITESPACE","\n            ",170],"}",["T_WHITESPACE"," ",171],["T_WHILE","while",171],["T_WHITESPACE"," ",171],"(",["T_VARIABLE","$this",171],["T_OBJECT_OPERATOR","->",171],["T_STRING","getResource",171],"(",")",["T_OBJECT_OPERATOR","->",171],["T_STRING","exists",171],"(",["T_VARIABLE","$code",171],")",")",";",["T_WHITESPACE","\n\n            ",171],["T_VARIABLE","$expirationDate",173],["T_WHITESPACE"," ",173],"=",["T_WHITESPACE"," ",173],["T_VARIABLE","$this",173],["T_OBJECT_OPERATOR","->",173],["T_STRING","getToDate",173],"(",")",";",["T_WHITESPACE","\n            ",173],["T_IF","if",174],["T_WHITESPACE"," ",174],"(",["T_VARIABLE","$expirationDate",174],["T_WHITESPACE"," ",174],["T_INSTANCEOF","instanceof",174],["T_WHITESPACE"," ",174],["T_NS_SEPARATOR","\\",174],["T_STRING","DateTime",174],")",["T_WHITESPACE"," ",174],"{",["T_WHITESPACE","\n                ",174],["T_VARIABLE","$expirationDate",175],["T_WHITESPACE"," ",175],"=",["T_WHITESPACE"," ",175],["T_VARIABLE","$expirationDate",175],["T_OBJECT_OPERATOR","->",175],["T_STRING","format",175],"(",["T_CONSTANT_ENCAPSED_STRING","'Y-m-d H:i:s'",175],")",";",["T_WHITESPACE","\n            ",175],"}",["T_WHITESPACE","\n\n            ",176],["T_VARIABLE","$coupon",178],["T_OBJECT_OPERATOR","->",178],["T_STRING","setId",178],"(",["T_STRING","null",178],")",["T_WHITESPACE","\n                ",178],["T_OBJECT_OPERATOR","->",179],["T_STRING","setRuleId",179],"(",["T_VARIABLE","$this",179],["T_OBJECT_OPERATOR","->",179],["T_STRING","getRuleId",179],"(",")",")",["T_WHITESPACE","\n                ",179],["T_OBJECT_OPERATOR","->",180],["T_STRING","setUsageLimit",180],"(",["T_VARIABLE","$this",180],["T_OBJECT_OPERATOR","->",180],["T_STRING","getUsesPerCoupon",180],"(",")",")",["T_WHITESPACE","\n                ",180],["T_OBJECT_OPERATOR","->",181],["T_STRING","setUsagePerCustomer",181],"(",["T_VARIABLE","$this",181],["T_OBJECT_OPERATOR","->",181],["T_STRING","getUsagePerCustomer",181],"(",")",")",["T_WHITESPACE","\n                ",181],["T_OBJECT_OPERATOR","->",182],["T_STRING","setExpirationDate",182],"(",["T_VARIABLE","$expirationDate",182],")",["T_WHITESPACE","\n                ",182],["T_OBJECT_OPERATOR","->",183],["T_STRING","setCreatedAt",183],"(",["T_VARIABLE","$nowTimestamp",183],")",["T_WHITESPACE","\n                ",183],["T_OBJECT_OPERATOR","->",184],["T_STRING","setType",184],"(",["T_NS_SEPARATOR","\\",184],["T_STRING","Magento",184],["T_NS_SEPARATOR","\\",184],["T_STRING","SalesRule",184],["T_NS_SEPARATOR","\\",184],["T_STRING","Helper",184],["T_NS_SEPARATOR","\\",184],["T_STRING","Coupon",184],["T_DOUBLE_COLON","::",184],["T_STRING","COUPON_TYPE_SPECIFIC_AUTOGENERATED",184],")",["T_WHITESPACE","\n                ",184],["T_OBJECT_OPERATOR","->",185],["T_STRING","setCode",185],"(",["T_VARIABLE","$code",185],")",["T_WHITESPACE","\n                ",185],["T_OBJECT_OPERATOR","->",186],["T_STRING","save",186],"(",")",";",["T_WHITESPACE","\n\n            ",186],["T_VARIABLE","$this",188],["T_OBJECT_OPERATOR","->",188],["T_STRING","generatedCount",188],["T_WHITESPACE"," ",188],["T_PLUS_EQUAL","+=",188],["T_WHITESPACE"," ",188],["T_LNUMBER","1",188],";",["T_WHITESPACE","\n            ",188],["T_VARIABLE","$this",189],["T_OBJECT_OPERATOR","->",189],["T_STRING","generatedCodes",189],"[","]",["T_WHITESPACE"," ",189],"=",["T_WHITESPACE"," ",189],["T_VARIABLE","$code",189],";",["T_WHITESPACE","\n        ",189],"}",["T_WHITESPACE","\n\n        ",190],["T_RETURN","return",192],["T_WHITESPACE"," ",192],["T_VARIABLE","$this",192],";",["T_WHITESPACE","\n    ",192],"}",["T_WHITESPACE","\n\n    ",193],["T_DOC_COMMENT","\/**\n     * Increase the length of Code if probability is low\n     *\n     * @return void\n     *\/",195],["T_WHITESPACE","\n    ",199],["T_PROTECTED","protected",200],["T_WHITESPACE"," ",200],["T_FUNCTION","function",200],["T_WHITESPACE"," ",200],["T_STRING","increaseLength",200],"(",")",["T_WHITESPACE","\n    ",200],"{",["T_WHITESPACE","\n        ",201],["T_VARIABLE","$maxProbability",202],["T_WHITESPACE"," ",202],"=",["T_WHITESPACE"," ",202],["T_VARIABLE","$this",202],["T_OBJECT_OPERATOR","->",202],["T_STRING","getMaxProbability",202],"(",")",["T_WHITESPACE"," ",202],"?",["T_WHITESPACE"," ",202],["T_VARIABLE","$this",202],["T_OBJECT_OPERATOR","->",202],["T_STRING","getMaxProbability",202],"(",")",["T_WHITESPACE"," ",202],":",["T_WHITESPACE"," ",202],["T_STRING","self",202],["T_DOUBLE_COLON","::",202],["T_STRING","MAX_PROBABILITY_OF_GUESSING",202],";",["T_WHITESPACE","\n        ",202],["T_VARIABLE","$chars",203],["T_WHITESPACE"," ",203],"=",["T_WHITESPACE"," ",203],["T_STRING","count",203],"(",["T_VARIABLE","$this",203],["T_OBJECT_OPERATOR","->",203],["T_STRING","salesRuleCoupon",203],["T_OBJECT_OPERATOR","->",203],["T_STRING","getCharset",203],"(",["T_VARIABLE","$this",203],["T_OBJECT_OPERATOR","->",203],["T_STRING","getFormat",203],"(",")",")",")",";",["T_WHITESPACE","\n        ",203],["T_VARIABLE","$size",204],["T_WHITESPACE"," ",204],"=",["T_WHITESPACE"," ",204],["T_VARIABLE","$this",204],["T_OBJECT_OPERATOR","->",204],["T_STRING","getQty",204],"(",")",";",["T_WHITESPACE","\n        ",204],["T_VARIABLE","$length",205],["T_WHITESPACE"," ",205],"=",["T_WHITESPACE"," ",205],["T_INT_CAST","(int)",205],["T_VARIABLE","$this",205],["T_OBJECT_OPERATOR","->",205],["T_STRING","getLength",205],"(",")",";",["T_WHITESPACE","\n        ",205],["T_VARIABLE","$maxCodes",206],["T_WHITESPACE"," ",206],"=",["T_WHITESPACE"," ",206],["T_STRING","pow",206],"(",["T_VARIABLE","$chars",206],",",["T_WHITESPACE"," ",206],["T_VARIABLE","$length",206],")",";",["T_WHITESPACE","\n        ",206],["T_VARIABLE","$probability",207],["T_WHITESPACE"," ",207],"=",["T_WHITESPACE"," ",207],["T_VARIABLE","$size",207],["T_WHITESPACE"," ",207],"\/",["T_WHITESPACE"," ",207],["T_VARIABLE","$maxCodes",207],";",["T_WHITESPACE","\n\n        ",207],["T_IF","if",209],["T_WHITESPACE"," ",209],"(",["T_VARIABLE","$probability",209],["T_WHITESPACE"," ",209],">",["T_WHITESPACE"," ",209],["T_VARIABLE","$maxProbability",209],")",["T_WHITESPACE"," ",209],"{",["T_WHITESPACE","\n            ",209],["T_DO","do",210],["T_WHITESPACE"," ",210],"{",["T_WHITESPACE","\n                ",210],["T_VARIABLE","$length",211],["T_INC","++",211],";",["T_WHITESPACE","\n                ",211],["T_VARIABLE","$maxCodes",212],["T_WHITESPACE"," ",212],"=",["T_WHITESPACE"," ",212],["T_STRING","pow",212],"(",["T_VARIABLE","$chars",212],",",["T_WHITESPACE"," ",212],["T_VARIABLE","$length",212],")",";",["T_WHITESPACE","\n                ",212],["T_VARIABLE","$probability",213],["T_WHITESPACE"," ",213],"=",["T_WHITESPACE"," ",213],["T_VARIABLE","$size",213],["T_WHITESPACE"," ",213],"\/",["T_WHITESPACE"," ",213],["T_VARIABLE","$maxCodes",213],";",["T_WHITESPACE","\n            ",213],"}",["T_WHITESPACE"," ",214],["T_WHILE","while",214],["T_WHITESPACE"," ",214],"(",["T_VARIABLE","$probability",214],["T_WHITESPACE"," ",214],">",["T_WHITESPACE"," ",214],["T_VARIABLE","$maxProbability",214],")",";",["T_WHITESPACE","\n            ",214],["T_VARIABLE","$this",215],["T_OBJECT_OPERATOR","->",215],["T_STRING","setLength",215],"(",["T_VARIABLE","$length",215],")",";",["T_WHITESPACE","\n        ",215],"}",["T_WHITESPACE","\n    ",216],"}",["T_WHITESPACE","\n\n    ",217],["T_DOC_COMMENT","\/**\n     * Validate data input\n     *\n     * @param array $data\n     * @return bool\n     *\/",219],["T_WHITESPACE","\n    ",224],["T_PUBLIC","public",225],["T_WHITESPACE"," ",225],["T_FUNCTION","function",225],["T_WHITESPACE"," ",225],["T_STRING","validateData",225],"(",["T_VARIABLE","$data",225],")",["T_WHITESPACE","\n    ",225],"{",["T_WHITESPACE","\n        ",226],["T_RETURN","return",227],["T_WHITESPACE"," ",227],"!",["T_EMPTY","empty",227],"(",["T_VARIABLE","$data",227],")",["T_WHITESPACE","\n        ",227],["T_BOOLEAN_AND","&&",228],["T_WHITESPACE"," ",228],"!",["T_EMPTY","empty",228],"(",["T_VARIABLE","$data",228],"[",["T_CONSTANT_ENCAPSED_STRING","'qty'",228],"]",")",["T_WHITESPACE","\n        ",228],["T_BOOLEAN_AND","&&",229],["T_WHITESPACE"," ",229],"!",["T_EMPTY","empty",229],"(",["T_VARIABLE","$data",229],"[",["T_CONSTANT_ENCAPSED_STRING","'rule_id'",229],"]",")",["T_WHITESPACE","\n        ",229],["T_BOOLEAN_AND","&&",230],["T_WHITESPACE"," ",230],"!",["T_EMPTY","empty",230],"(",["T_VARIABLE","$data",230],"[",["T_CONSTANT_ENCAPSED_STRING","'length'",230],"]",")",["T_WHITESPACE","\n        ",230],["T_BOOLEAN_AND","&&",231],["T_WHITESPACE"," ",231],"!",["T_EMPTY","empty",231],"(",["T_VARIABLE","$data",231],"[",["T_CONSTANT_ENCAPSED_STRING","'format'",231],"]",")",["T_WHITESPACE","\n        ",231],["T_BOOLEAN_AND","&&",232],["T_WHITESPACE"," ",232],["T_INT_CAST","(int)",232],["T_VARIABLE","$data",232],"[",["T_CONSTANT_ENCAPSED_STRING","'qty'",232],"]",["T_WHITESPACE"," ",232],">",["T_WHITESPACE"," ",232],["T_LNUMBER","0",232],["T_WHITESPACE","\n        ",232],["T_BOOLEAN_AND","&&",233],["T_WHITESPACE"," ",233],["T_INT_CAST","(int)",233],["T_VARIABLE","$data",233],"[",["T_CONSTANT_ENCAPSED_STRING","'rule_id'",233],"]",["T_WHITESPACE"," ",233],">",["T_WHITESPACE"," ",233],["T_LNUMBER","0",233],["T_WHITESPACE","\n        ",233],["T_BOOLEAN_AND","&&",234],["T_WHITESPACE"," ",234],["T_INT_CAST","(int)",234],["T_VARIABLE","$data",234],"[",["T_CONSTANT_ENCAPSED_STRING","'length'",234],"]",["T_WHITESPACE"," ",234],">",["T_WHITESPACE"," ",234],["T_LNUMBER","0",234],";",["T_WHITESPACE","\n    ",234],"}",["T_WHITESPACE","\n\n    ",235],["T_DOC_COMMENT","\/**\n     * Return the generated coupon codes\n     *\n     * @return array\n     *\/",237],["T_WHITESPACE","\n    ",241],["T_PUBLIC","public",242],["T_WHITESPACE"," ",242],["T_FUNCTION","function",242],["T_WHITESPACE"," ",242],["T_STRING","getGeneratedCodes",242],"(",")",["T_WHITESPACE","\n    ",242],"{",["T_WHITESPACE","\n        ",243],["T_RETURN","return",244],["T_WHITESPACE"," ",244],["T_VARIABLE","$this",244],["T_OBJECT_OPERATOR","->",244],["T_STRING","generatedCodes",244],";",["T_WHITESPACE","\n    ",244],"}",["T_WHITESPACE","\n\n    ",245],["T_DOC_COMMENT","\/**\n     * Retrieve count of generated Coupons\n     *\n     * @return int\n     *\/",247],["T_WHITESPACE","\n    ",251],["T_PUBLIC","public",252],["T_WHITESPACE"," ",252],["T_FUNCTION","function",252],["T_WHITESPACE"," ",252],["T_STRING","getGeneratedCount",252],"(",")",["T_WHITESPACE","\n    ",252],"{",["T_WHITESPACE","\n        ",253],["T_RETURN","return",254],["T_WHITESPACE"," ",254],["T_VARIABLE","$this",254],["T_OBJECT_OPERATOR","->",254],["T_STRING","generatedCount",254],";",["T_WHITESPACE","\n    ",254],"}",["T_WHITESPACE","\n",255],"}",["T_WHITESPACE","\n",256]]
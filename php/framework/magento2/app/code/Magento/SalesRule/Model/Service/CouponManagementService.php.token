[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Copyright \u00c2\u00a9 2013-2017 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n *\/",2],["T_WHITESPACE","\n",5],["T_NAMESPACE","namespace",6],["T_WHITESPACE"," ",6],["T_STRING","Magento",6],["T_NS_SEPARATOR","\\",6],["T_STRING","SalesRule",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Model",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Service",6],";",["T_WHITESPACE","\n\n",6],["T_USE","use",8],["T_WHITESPACE"," ",8],["T_STRING","Magento",8],["T_NS_SEPARATOR","\\",8],["T_STRING","SalesRule",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Model",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Coupon",8],";",["T_WHITESPACE","\n\n",8],["T_DOC_COMMENT","\/**\n * Coupon management service class\n *\n *\/",10],["T_WHITESPACE","\n",13],["T_CLASS","class",14],["T_WHITESPACE"," ",14],["T_STRING","CouponManagementService",14],["T_WHITESPACE"," ",14],["T_IMPLEMENTS","implements",14],["T_WHITESPACE"," ",14],["T_NS_SEPARATOR","\\",14],["T_STRING","Magento",14],["T_NS_SEPARATOR","\\",14],["T_STRING","SalesRule",14],["T_NS_SEPARATOR","\\",14],["T_STRING","Api",14],["T_NS_SEPARATOR","\\",14],["T_STRING","CouponManagementInterface",14],["T_WHITESPACE","\n",14],"{",["T_WHITESPACE","\n    ",15],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\SalesRule\\Model\\CouponFactory\n     *\/",16],["T_WHITESPACE","\n    ",18],["T_PROTECTED","protected",19],["T_WHITESPACE"," ",19],["T_VARIABLE","$couponFactory",19],";",["T_WHITESPACE","\n\n    ",19],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\SalesRule\\Model\\RuleFactory\n     *\/",21],["T_WHITESPACE","\n    ",23],["T_PROTECTED","protected",24],["T_WHITESPACE"," ",24],["T_VARIABLE","$ruleFactory",24],";",["T_WHITESPACE","\n\n    ",24],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\SalesRule\\Model\\ResourceModel\\Coupon\\CollectionFactory\n     *\/",26],["T_WHITESPACE","\n    ",28],["T_PROTECTED","protected",29],["T_WHITESPACE"," ",29],["T_VARIABLE","$collectionFactory",29],";",["T_WHITESPACE","\n\n    ",29],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\SalesRule\\Model\\Coupon\\Massgenerator\n     *\/",31],["T_WHITESPACE","\n    ",33],["T_PROTECTED","protected",34],["T_WHITESPACE"," ",34],["T_VARIABLE","$couponGenerator",34],";",["T_WHITESPACE","\n\n    ",34],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\SalesRule\\Model\\Spi\\CouponResourceInterface\n     *\/",36],["T_WHITESPACE","\n    ",38],["T_PROTECTED","protected",39],["T_WHITESPACE"," ",39],["T_VARIABLE","$resourceModel",39],";",["T_WHITESPACE","\n\n    ",39],["T_DOC_COMMENT","\/**\n     * var \\Magento\\SalesRule\\Api\\Data\\CouponMassDeleteResultInterfaceFactory\n     *\/",41],["T_WHITESPACE","\n    ",43],["T_PROTECTED","protected",44],["T_WHITESPACE"," ",44],["T_VARIABLE","$couponMassDeleteResultFactory",44],";",["T_WHITESPACE","\n\n    ",44],["T_DOC_COMMENT","\/**\n     * @param \\Magento\\SalesRule\\Model\\CouponFactory $couponFactory\n     * @param \\Magento\\SalesRule\\Model\\RuleFactory $ruleFactory\n     * @param \\Magento\\SalesRule\\Model\\ResourceModel\\Coupon\\CollectionFactory $collectionFactory\n     * @param \\Magento\\SalesRule\\Model\\Coupon\\Massgenerator $couponGenerator\n     * @param \\Magento\\SalesRule\\Model\\Spi\\CouponResourceInterface $resourceModel\n     * @param \\Magento\\SalesRule\\Api\\Data\\CouponMassDeleteResultInterfaceFactory $couponMassDeleteResultFactory\n     *\/",46],["T_WHITESPACE","\n    ",53],["T_PUBLIC","public",54],["T_WHITESPACE"," ",54],["T_FUNCTION","function",54],["T_WHITESPACE"," ",54],["T_STRING","__construct",54],"(",["T_WHITESPACE","\n        ",54],["T_NS_SEPARATOR","\\",55],["T_STRING","Magento",55],["T_NS_SEPARATOR","\\",55],["T_STRING","SalesRule",55],["T_NS_SEPARATOR","\\",55],["T_STRING","Model",55],["T_NS_SEPARATOR","\\",55],["T_STRING","CouponFactory",55],["T_WHITESPACE"," ",55],["T_VARIABLE","$couponFactory",55],",",["T_WHITESPACE","\n        ",55],["T_NS_SEPARATOR","\\",56],["T_STRING","Magento",56],["T_NS_SEPARATOR","\\",56],["T_STRING","SalesRule",56],["T_NS_SEPARATOR","\\",56],["T_STRING","Model",56],["T_NS_SEPARATOR","\\",56],["T_STRING","RuleFactory",56],["T_WHITESPACE"," ",56],["T_VARIABLE","$ruleFactory",56],",",["T_WHITESPACE","\n        ",56],["T_NS_SEPARATOR","\\",57],["T_STRING","Magento",57],["T_NS_SEPARATOR","\\",57],["T_STRING","SalesRule",57],["T_NS_SEPARATOR","\\",57],["T_STRING","Model",57],["T_NS_SEPARATOR","\\",57],["T_STRING","ResourceModel",57],["T_NS_SEPARATOR","\\",57],["T_STRING","Coupon",57],["T_NS_SEPARATOR","\\",57],["T_STRING","CollectionFactory",57],["T_WHITESPACE"," ",57],["T_VARIABLE","$collectionFactory",57],",",["T_WHITESPACE","\n        ",57],["T_NS_SEPARATOR","\\",58],["T_STRING","Magento",58],["T_NS_SEPARATOR","\\",58],["T_STRING","SalesRule",58],["T_NS_SEPARATOR","\\",58],["T_STRING","Model",58],["T_NS_SEPARATOR","\\",58],["T_STRING","Coupon",58],["T_NS_SEPARATOR","\\",58],["T_STRING","Massgenerator",58],["T_WHITESPACE"," ",58],["T_VARIABLE","$couponGenerator",58],",",["T_WHITESPACE","\n        ",58],["T_NS_SEPARATOR","\\",59],["T_STRING","Magento",59],["T_NS_SEPARATOR","\\",59],["T_STRING","SalesRule",59],["T_NS_SEPARATOR","\\",59],["T_STRING","Model",59],["T_NS_SEPARATOR","\\",59],["T_STRING","Spi",59],["T_NS_SEPARATOR","\\",59],["T_STRING","CouponResourceInterface",59],["T_WHITESPACE"," ",59],["T_VARIABLE","$resourceModel",59],",",["T_WHITESPACE","\n        ",59],["T_NS_SEPARATOR","\\",60],["T_STRING","Magento",60],["T_NS_SEPARATOR","\\",60],["T_STRING","SalesRule",60],["T_NS_SEPARATOR","\\",60],["T_STRING","Api",60],["T_NS_SEPARATOR","\\",60],["T_STRING","Data",60],["T_NS_SEPARATOR","\\",60],["T_STRING","CouponMassDeleteResultInterfaceFactory",60],["T_WHITESPACE"," ",60],["T_VARIABLE","$couponMassDeleteResultFactory",60],["T_WHITESPACE","\n    ",60],")",["T_WHITESPACE"," ",61],"{",["T_WHITESPACE","\n        ",61],["T_VARIABLE","$this",62],["T_OBJECT_OPERATOR","->",62],["T_STRING","couponFactory",62],["T_WHITESPACE"," ",62],"=",["T_WHITESPACE"," ",62],["T_VARIABLE","$couponFactory",62],";",["T_WHITESPACE","\n        ",62],["T_VARIABLE","$this",63],["T_OBJECT_OPERATOR","->",63],["T_STRING","ruleFactory",63],["T_WHITESPACE"," ",63],"=",["T_WHITESPACE"," ",63],["T_VARIABLE","$ruleFactory",63],";",["T_WHITESPACE","\n        ",63],["T_VARIABLE","$this",64],["T_OBJECT_OPERATOR","->",64],["T_STRING","collectionFactory",64],["T_WHITESPACE"," ",64],"=",["T_WHITESPACE"," ",64],["T_VARIABLE","$collectionFactory",64],";",["T_WHITESPACE","\n        ",64],["T_VARIABLE","$this",65],["T_OBJECT_OPERATOR","->",65],["T_STRING","couponGenerator",65],["T_WHITESPACE"," ",65],"=",["T_WHITESPACE"," ",65],["T_VARIABLE","$couponGenerator",65],";",["T_WHITESPACE","\n        ",65],["T_VARIABLE","$this",66],["T_OBJECT_OPERATOR","->",66],["T_STRING","resourceModel",66],["T_WHITESPACE"," ",66],"=",["T_WHITESPACE"," ",66],["T_VARIABLE","$resourceModel",66],";",["T_WHITESPACE","\n        ",66],["T_VARIABLE","$this",67],["T_OBJECT_OPERATOR","->",67],["T_STRING","couponMassDeleteResultFactory",67],["T_WHITESPACE"," ",67],"=",["T_WHITESPACE"," ",67],["T_VARIABLE","$couponMassDeleteResultFactory",67],";",["T_WHITESPACE","\n    ",67],"}",["T_WHITESPACE","\n\n    ",68],["T_DOC_COMMENT","\/**\n     * Generate coupon for a rule\n     *\n     * @param \\Magento\\SalesRule\\Api\\Data\\CouponGenerationSpecInterface $couponSpec\n     * @return string[]\n     * @throws \\Magento\\Framework\\Exception\\InputException\n     * @throws \\Magento\\Framework\\Exception\\LocalizedException\n     *\/",70],["T_WHITESPACE","\n    ",77],["T_PUBLIC","public",78],["T_WHITESPACE"," ",78],["T_FUNCTION","function",78],["T_WHITESPACE"," ",78],["T_STRING","generate",78],"(",["T_NS_SEPARATOR","\\",78],["T_STRING","Magento",78],["T_NS_SEPARATOR","\\",78],["T_STRING","SalesRule",78],["T_NS_SEPARATOR","\\",78],["T_STRING","Api",78],["T_NS_SEPARATOR","\\",78],["T_STRING","Data",78],["T_NS_SEPARATOR","\\",78],["T_STRING","CouponGenerationSpecInterface",78],["T_WHITESPACE"," ",78],["T_VARIABLE","$couponSpec",78],")",["T_WHITESPACE","\n    ",78],"{",["T_WHITESPACE","\n        ",79],["T_VARIABLE","$data",80],["T_WHITESPACE"," ",80],"=",["T_WHITESPACE"," ",80],["T_VARIABLE","$this",80],["T_OBJECT_OPERATOR","->",80],["T_STRING","convertCouponSpec",80],"(",["T_VARIABLE","$couponSpec",80],")",";",["T_WHITESPACE","\n        ",80],["T_IF","if",81],["T_WHITESPACE"," ",81],"(","!",["T_VARIABLE","$this",81],["T_OBJECT_OPERATOR","->",81],["T_STRING","couponGenerator",81],["T_OBJECT_OPERATOR","->",81],["T_STRING","validateData",81],"(",["T_VARIABLE","$data",81],")",")",["T_WHITESPACE"," ",81],"{",["T_WHITESPACE","\n            ",81],["T_THROW","throw",82],["T_WHITESPACE"," ",82],["T_NEW","new",82],["T_WHITESPACE"," ",82],["T_NS_SEPARATOR","\\",82],["T_STRING","Magento",82],["T_NS_SEPARATOR","\\",82],["T_STRING","Framework",82],["T_NS_SEPARATOR","\\",82],["T_STRING","Exception",82],["T_NS_SEPARATOR","\\",82],["T_STRING","InputException",82],"(",")",";",["T_WHITESPACE","\n        ",82],"}",["T_WHITESPACE","\n\n        ",83],["T_TRY","try",85],["T_WHITESPACE"," ",85],"{",["T_WHITESPACE","\n            ",85],["T_VARIABLE","$rule",86],["T_WHITESPACE"," ",86],"=",["T_WHITESPACE"," ",86],["T_VARIABLE","$this",86],["T_OBJECT_OPERATOR","->",86],["T_STRING","ruleFactory",86],["T_OBJECT_OPERATOR","->",86],["T_STRING","create",86],"(",")",["T_OBJECT_OPERATOR","->",86],["T_STRING","load",86],"(",["T_VARIABLE","$couponSpec",86],["T_OBJECT_OPERATOR","->",86],["T_STRING","getRuleId",86],"(",")",")",";",["T_WHITESPACE","\n            ",86],["T_IF","if",87],["T_WHITESPACE"," ",87],"(","!",["T_VARIABLE","$rule",87],["T_OBJECT_OPERATOR","->",87],["T_STRING","getRuleId",87],"(",")",")",["T_WHITESPACE"," ",87],"{",["T_WHITESPACE","\n                ",87],["T_THROW","throw",88],["T_WHITESPACE"," ",88],["T_NS_SEPARATOR","\\",88],["T_STRING","Magento",88],["T_NS_SEPARATOR","\\",88],["T_STRING","Framework",88],["T_NS_SEPARATOR","\\",88],["T_STRING","Exception",88],["T_NS_SEPARATOR","\\",88],["T_STRING","NoSuchEntityException",88],["T_DOUBLE_COLON","::",88],["T_STRING","singleField",88],"(",["T_WHITESPACE","\n                    ",88],["T_NS_SEPARATOR","\\",89],["T_STRING","Magento",89],["T_NS_SEPARATOR","\\",89],["T_STRING","SalesRule",89],["T_NS_SEPARATOR","\\",89],["T_STRING","Model",89],["T_NS_SEPARATOR","\\",89],["T_STRING","Coupon",89],["T_DOUBLE_COLON","::",89],["T_STRING","KEY_RULE_ID",89],",",["T_WHITESPACE","\n                    ",89],["T_VARIABLE","$couponSpec",90],["T_OBJECT_OPERATOR","->",90],["T_STRING","getRuleId",90],"(",")",["T_WHITESPACE","\n                ",90],")",";",["T_WHITESPACE","\n            ",91],"}",["T_WHITESPACE","\n            ",92],["T_IF","if",93],["T_WHITESPACE"," ",93],"(","!",["T_VARIABLE","$rule",93],["T_OBJECT_OPERATOR","->",93],["T_STRING","getUseAutoGeneration",93],"(",")",")",["T_WHITESPACE"," ",93],"{",["T_WHITESPACE","\n                ",93],["T_THROW","throw",94],["T_WHITESPACE"," ",94],["T_NEW","new",94],["T_WHITESPACE"," ",94],["T_NS_SEPARATOR","\\",94],["T_STRING","Magento",94],["T_NS_SEPARATOR","\\",94],["T_STRING","Framework",94],["T_NS_SEPARATOR","\\",94],["T_STRING","Exception",94],["T_NS_SEPARATOR","\\",94],["T_STRING","LocalizedException",94],"(",["T_WHITESPACE","\n                    ",94],["T_STRING","__",95],"(",["T_CONSTANT_ENCAPSED_STRING","'Specified rule does not allow automatic coupon generation'",95],")",["T_WHITESPACE","\n                ",95],")",";",["T_WHITESPACE","\n            ",96],"}",["T_WHITESPACE","\n\n            ",97],["T_VARIABLE","$this",99],["T_OBJECT_OPERATOR","->",99],["T_STRING","couponGenerator",99],["T_OBJECT_OPERATOR","->",99],["T_STRING","setData",99],"(",["T_VARIABLE","$data",99],")",";",["T_WHITESPACE","\n            ",99],["T_VARIABLE","$this",100],["T_OBJECT_OPERATOR","->",100],["T_STRING","couponGenerator",100],["T_OBJECT_OPERATOR","->",100],["T_STRING","setData",100],"(",["T_CONSTANT_ENCAPSED_STRING","'to_date'",100],",",["T_WHITESPACE"," ",100],["T_VARIABLE","$rule",100],["T_OBJECT_OPERATOR","->",100],["T_STRING","getToDate",100],"(",")",")",";",["T_WHITESPACE","\n            ",100],["T_VARIABLE","$this",101],["T_OBJECT_OPERATOR","->",101],["T_STRING","couponGenerator",101],["T_OBJECT_OPERATOR","->",101],["T_STRING","setData",101],"(",["T_CONSTANT_ENCAPSED_STRING","'uses_per_coupon'",101],",",["T_WHITESPACE"," ",101],["T_VARIABLE","$rule",101],["T_OBJECT_OPERATOR","->",101],["T_STRING","getUsesPerCoupon",101],"(",")",")",";",["T_WHITESPACE","\n            ",101],["T_VARIABLE","$this",102],["T_OBJECT_OPERATOR","->",102],["T_STRING","couponGenerator",102],["T_OBJECT_OPERATOR","->",102],["T_STRING","setData",102],"(",["T_CONSTANT_ENCAPSED_STRING","'usage_per_customer'",102],",",["T_WHITESPACE"," ",102],["T_VARIABLE","$rule",102],["T_OBJECT_OPERATOR","->",102],["T_STRING","getUsesPerCustomer",102],"(",")",")",";",["T_WHITESPACE","\n\n            ",102],["T_VARIABLE","$this",104],["T_OBJECT_OPERATOR","->",104],["T_STRING","couponGenerator",104],["T_OBJECT_OPERATOR","->",104],["T_STRING","generatePool",104],"(",")",";",["T_WHITESPACE","\n            ",104],["T_RETURN","return",105],["T_WHITESPACE"," ",105],["T_VARIABLE","$this",105],["T_OBJECT_OPERATOR","->",105],["T_STRING","couponGenerator",105],["T_OBJECT_OPERATOR","->",105],["T_STRING","getGeneratedCodes",105],"(",")",";",["T_WHITESPACE","\n        ",105],"}",["T_WHITESPACE"," ",106],["T_CATCH","catch",106],["T_WHITESPACE"," ",106],"(",["T_NS_SEPARATOR","\\",106],["T_STRING","Exception",106],["T_WHITESPACE"," ",106],["T_VARIABLE","$e",106],")",["T_WHITESPACE"," ",106],"{",["T_WHITESPACE","\n            ",106],["T_THROW","throw",107],["T_WHITESPACE"," ",107],["T_NEW","new",107],["T_WHITESPACE"," ",107],["T_NS_SEPARATOR","\\",107],["T_STRING","Magento",107],["T_NS_SEPARATOR","\\",107],["T_STRING","Framework",107],["T_NS_SEPARATOR","\\",107],["T_STRING","Exception",107],["T_NS_SEPARATOR","\\",107],["T_STRING","LocalizedException",107],"(",["T_WHITESPACE","\n                ",107],["T_STRING","__",108],"(",["T_CONSTANT_ENCAPSED_STRING","'Error occurred when generating coupons: %1'",108],",",["T_WHITESPACE"," ",108],["T_VARIABLE","$e",108],["T_OBJECT_OPERATOR","->",108],["T_STRING","getMessage",108],"(",")",")",["T_WHITESPACE","\n            ",108],")",";",["T_WHITESPACE","\n        ",109],"}",["T_WHITESPACE","\n    ",110],"}",["T_WHITESPACE","\n\n    ",111],["T_DOC_COMMENT","\/**\n     * Convert CouponGenerationSpecInterface to data array expected by Massgenerator\n     *\n     * @param \\Magento\\SalesRule\\Api\\Data\\CouponGenerationSpecInterface $couponSpec\n     * @return array\n     *\/",113],["T_WHITESPACE","\n    ",118],["T_PROTECTED","protected",119],["T_WHITESPACE"," ",119],["T_FUNCTION","function",119],["T_WHITESPACE"," ",119],["T_STRING","convertCouponSpec",119],"(",["T_NS_SEPARATOR","\\",119],["T_STRING","Magento",119],["T_NS_SEPARATOR","\\",119],["T_STRING","SalesRule",119],["T_NS_SEPARATOR","\\",119],["T_STRING","Api",119],["T_NS_SEPARATOR","\\",119],["T_STRING","Data",119],["T_NS_SEPARATOR","\\",119],["T_STRING","CouponGenerationSpecInterface",119],["T_WHITESPACE"," ",119],["T_VARIABLE","$couponSpec",119],")",["T_WHITESPACE","\n    ",119],"{",["T_WHITESPACE","\n        ",120],["T_VARIABLE","$data",121],["T_WHITESPACE"," ",121],"=",["T_WHITESPACE"," ",121],"[","]",";",["T_WHITESPACE","\n        ",121],["T_VARIABLE","$data",122],"[",["T_CONSTANT_ENCAPSED_STRING","'rule_id'",122],"]",["T_WHITESPACE"," ",122],"=",["T_WHITESPACE"," ",122],["T_VARIABLE","$couponSpec",122],["T_OBJECT_OPERATOR","->",122],["T_STRING","getRuleId",122],"(",")",";",["T_WHITESPACE","\n        ",122],["T_VARIABLE","$data",123],"[",["T_CONSTANT_ENCAPSED_STRING","'qty'",123],"]",["T_WHITESPACE"," ",123],"=",["T_WHITESPACE"," ",123],["T_VARIABLE","$couponSpec",123],["T_OBJECT_OPERATOR","->",123],["T_STRING","getQuantity",123],"(",")",";",["T_WHITESPACE","\n        ",123],["T_VARIABLE","$data",124],"[",["T_CONSTANT_ENCAPSED_STRING","'format'",124],"]",["T_WHITESPACE"," ",124],"=",["T_WHITESPACE"," ",124],["T_VARIABLE","$couponSpec",124],["T_OBJECT_OPERATOR","->",124],["T_STRING","getFormat",124],"(",")",";",["T_WHITESPACE","\n        ",124],["T_VARIABLE","$data",125],"[",["T_CONSTANT_ENCAPSED_STRING","'length'",125],"]",["T_WHITESPACE"," ",125],"=",["T_WHITESPACE"," ",125],["T_VARIABLE","$couponSpec",125],["T_OBJECT_OPERATOR","->",125],["T_STRING","getLength",125],"(",")",";",["T_WHITESPACE","\n        ",125],["T_VARIABLE","$data",126],"[",["T_CONSTANT_ENCAPSED_STRING","'prefix'",126],"]",["T_WHITESPACE"," ",126],"=",["T_WHITESPACE"," ",126],["T_VARIABLE","$couponSpec",126],["T_OBJECT_OPERATOR","->",126],["T_STRING","getPrefix",126],"(",")",";",["T_WHITESPACE","\n        ",126],["T_VARIABLE","$data",127],"[",["T_CONSTANT_ENCAPSED_STRING","'suffix'",127],"]",["T_WHITESPACE"," ",127],"=",["T_WHITESPACE"," ",127],["T_VARIABLE","$couponSpec",127],["T_OBJECT_OPERATOR","->",127],["T_STRING","getSuffix",127],"(",")",";",["T_WHITESPACE","\n        ",127],["T_VARIABLE","$data",128],"[",["T_CONSTANT_ENCAPSED_STRING","'dash'",128],"]",["T_WHITESPACE"," ",128],"=",["T_WHITESPACE"," ",128],["T_VARIABLE","$couponSpec",128],["T_OBJECT_OPERATOR","->",128],["T_STRING","getDelimiterAtEvery",128],"(",")",";",["T_WHITESPACE","\n\n        ",128],["T_COMMENT","\/\/ensure we have a format\n",130],["T_WHITESPACE","        ",131],["T_IF","if",131],["T_WHITESPACE"," ",131],"(",["T_EMPTY","empty",131],"(",["T_VARIABLE","$data",131],"[",["T_CONSTANT_ENCAPSED_STRING","'format'",131],"]",")",")",["T_WHITESPACE"," ",131],"{",["T_WHITESPACE","\n            ",131],["T_VARIABLE","$data",132],"[",["T_CONSTANT_ENCAPSED_STRING","'format'",132],"]",["T_WHITESPACE"," ",132],"=",["T_WHITESPACE"," ",132],["T_VARIABLE","$couponSpec",132],["T_DOUBLE_COLON","::",132],["T_STRING","COUPON_FORMAT_ALPHANUMERIC",132],";",["T_WHITESPACE","\n        ",132],"}",["T_WHITESPACE","\n\n        ",133],["T_COMMENT","\/\/if specified, use the supplied delimiter\n",135],["T_WHITESPACE","        ",136],["T_IF","if",136],["T_WHITESPACE"," ",136],"(",["T_VARIABLE","$couponSpec",136],["T_OBJECT_OPERATOR","->",136],["T_STRING","getDelimiter",136],"(",")",")",["T_WHITESPACE"," ",136],"{",["T_WHITESPACE","\n            ",136],["T_VARIABLE","$data",137],"[",["T_CONSTANT_ENCAPSED_STRING","'delimiter'",137],"]",["T_WHITESPACE"," ",137],"=",["T_WHITESPACE"," ",137],["T_VARIABLE","$couponSpec",137],["T_OBJECT_OPERATOR","->",137],["T_STRING","getDelimiter",137],"(",")",";",["T_WHITESPACE","\n        ",137],"}",["T_WHITESPACE","\n        ",138],["T_RETURN","return",139],["T_WHITESPACE"," ",139],["T_VARIABLE","$data",139],";",["T_WHITESPACE","\n    ",139],"}",["T_WHITESPACE","\n\n    ",140],["T_DOC_COMMENT","\/**\n     * Delete coupon by coupon ids.\n     *\n     * @param int[] $ids\n     * @param bool $ignoreInvalidCoupons\n     * @return \\Magento\\SalesRule\\Api\\Data\\CouponMassDeleteResultInterface\n     * @throws \\Magento\\Framework\\Exception\\LocalizedException\n     *\/",142],["T_WHITESPACE","\n    ",149],["T_PUBLIC","public",150],["T_WHITESPACE"," ",150],["T_FUNCTION","function",150],["T_WHITESPACE"," ",150],["T_STRING","deleteByIds",150],"(",["T_ARRAY","array",150],["T_WHITESPACE"," ",150],["T_VARIABLE","$ids",150],",",["T_WHITESPACE"," ",150],["T_VARIABLE","$ignoreInvalidCoupons",150],["T_WHITESPACE"," ",150],"=",["T_WHITESPACE"," ",150],["T_STRING","true",150],")",["T_WHITESPACE","\n    ",150],"{",["T_WHITESPACE","\n        ",151],["T_RETURN","return",152],["T_WHITESPACE"," ",152],["T_VARIABLE","$this",152],["T_OBJECT_OPERATOR","->",152],["T_STRING","massDelete",152],"(",["T_CONSTANT_ENCAPSED_STRING","'coupon_id'",152],",",["T_WHITESPACE"," ",152],["T_VARIABLE","$ids",152],",",["T_WHITESPACE"," ",152],["T_VARIABLE","$ignoreInvalidCoupons",152],")",";",["T_WHITESPACE","\n    ",152],"}",["T_WHITESPACE","\n\n    ",153],["T_DOC_COMMENT","\/**\n     * Delete coupon by coupon codes.\n     *\n     * @param string[] codes\n     * @param bool $ignoreInvalidCoupons\n     * @return \\Magento\\SalesRule\\Api\\Data\\CouponMassDeleteResultInterface\n     * @throws \\Magento\\Framework\\Exception\\LocalizedException\n     *\/",155],["T_WHITESPACE","\n    ",162],["T_PUBLIC","public",163],["T_WHITESPACE"," ",163],["T_FUNCTION","function",163],["T_WHITESPACE"," ",163],["T_STRING","deleteByCodes",163],"(",["T_ARRAY","array",163],["T_WHITESPACE"," ",163],["T_VARIABLE","$codes",163],",",["T_WHITESPACE"," ",163],["T_VARIABLE","$ignoreInvalidCoupons",163],["T_WHITESPACE"," ",163],"=",["T_WHITESPACE"," ",163],["T_STRING","true",163],")",["T_WHITESPACE","\n    ",163],"{",["T_WHITESPACE","\n        ",164],["T_RETURN","return",165],["T_WHITESPACE"," ",165],["T_VARIABLE","$this",165],["T_OBJECT_OPERATOR","->",165],["T_STRING","massDelete",165],"(",["T_CONSTANT_ENCAPSED_STRING","'code'",165],",",["T_WHITESPACE"," ",165],["T_VARIABLE","$codes",165],",",["T_WHITESPACE"," ",165],["T_VARIABLE","$ignoreInvalidCoupons",165],")",";",["T_WHITESPACE","\n    ",165],"}",["T_WHITESPACE","\n\n    ",166],["T_DOC_COMMENT","\/**\n     * Delete coupons by filter\n     *\n     * @param string $fieldName\n     * @param string[] fieldValues\n     * @param bool $ignoreInvalid\n     * @return \\Magento\\SalesRule\\Api\\Data\\CouponMassDeleteResultInterface\n     * @throws \\Magento\\Framework\\Exception\\LocalizedException\n     *\/",168],["T_WHITESPACE","\n    ",176],["T_PROTECTED","protected",177],["T_WHITESPACE"," ",177],["T_FUNCTION","function",177],["T_WHITESPACE"," ",177],["T_STRING","massDelete",177],"(",["T_VARIABLE","$fieldName",177],",",["T_WHITESPACE"," ",177],["T_ARRAY","array",177],["T_WHITESPACE"," ",177],["T_VARIABLE","$fieldValues",177],",",["T_WHITESPACE"," ",177],["T_VARIABLE","$ignoreInvalid",177],")",["T_WHITESPACE","\n    ",177],"{",["T_WHITESPACE","\n        ",178],["T_VARIABLE","$couponsCollection",179],["T_WHITESPACE"," ",179],"=",["T_WHITESPACE"," ",179],["T_VARIABLE","$this",179],["T_OBJECT_OPERATOR","->",179],["T_STRING","collectionFactory",179],["T_OBJECT_OPERATOR","->",179],["T_STRING","create",179],"(",")",["T_WHITESPACE","\n            ",179],["T_OBJECT_OPERATOR","->",180],["T_STRING","addFieldToFilter",180],"(",["T_WHITESPACE","\n                ",180],["T_VARIABLE","$fieldName",181],",",["T_WHITESPACE","\n                ",181],"[",["T_CONSTANT_ENCAPSED_STRING","'in'",182],["T_WHITESPACE"," ",182],["T_DOUBLE_ARROW","=>",182],["T_WHITESPACE"," ",182],["T_VARIABLE","$fieldValues",182],"]",["T_WHITESPACE","\n            ",182],")",";",["T_WHITESPACE","\n\n        ",183],["T_IF","if",185],["T_WHITESPACE"," ",185],"(","!",["T_VARIABLE","$ignoreInvalid",185],")",["T_WHITESPACE"," ",185],"{",["T_WHITESPACE","\n            ",185],["T_IF","if",186],["T_WHITESPACE"," ",186],"(",["T_VARIABLE","$couponsCollection",186],["T_OBJECT_OPERATOR","->",186],["T_STRING","getSize",186],"(",")",["T_WHITESPACE"," ",186],["T_IS_NOT_EQUAL","!=",186],["T_WHITESPACE"," ",186],["T_STRING","count",186],"(",["T_VARIABLE","$fieldValues",186],")",")",["T_WHITESPACE"," ",186],"{",["T_WHITESPACE","\n                ",186],["T_THROW","throw",187],["T_WHITESPACE"," ",187],["T_NEW","new",187],["T_WHITESPACE"," ",187],["T_NS_SEPARATOR","\\",187],["T_STRING","Magento",187],["T_NS_SEPARATOR","\\",187],["T_STRING","Framework",187],["T_NS_SEPARATOR","\\",187],["T_STRING","Exception",187],["T_NS_SEPARATOR","\\",187],["T_STRING","LocalizedException",187],"(",["T_STRING","__",187],"(",["T_CONSTANT_ENCAPSED_STRING","'Some coupons are invalid.'",187],")",")",";",["T_WHITESPACE","\n            ",187],"}",["T_WHITESPACE","\n        ",188],"}",["T_WHITESPACE","\n\n        ",189],["T_VARIABLE","$results",191],["T_WHITESPACE"," ",191],"=",["T_WHITESPACE"," ",191],["T_VARIABLE","$this",191],["T_OBJECT_OPERATOR","->",191],["T_STRING","couponMassDeleteResultFactory",191],["T_OBJECT_OPERATOR","->",191],["T_STRING","create",191],"(",")",";",["T_WHITESPACE","\n        ",191],["T_VARIABLE","$failedItems",192],["T_WHITESPACE"," ",192],"=",["T_WHITESPACE"," ",192],"[","]",";",["T_WHITESPACE","\n        ",192],["T_VARIABLE","$fieldValues",193],["T_WHITESPACE"," ",193],"=",["T_WHITESPACE"," ",193],["T_STRING","array_flip",193],"(",["T_VARIABLE","$fieldValues",193],")",";",["T_WHITESPACE","\n        ",193],["T_DOC_COMMENT","\/** @var \\Magento\\SalesRule\\Model\\Coupon $coupon *\/",194],["T_WHITESPACE","\n        ",194],["T_FOREACH","foreach",195],["T_WHITESPACE"," ",195],"(",["T_VARIABLE","$couponsCollection",195],["T_OBJECT_OPERATOR","->",195],["T_STRING","getItems",195],"(",")",["T_WHITESPACE"," ",195],["T_AS","as",195],["T_WHITESPACE"," ",195],["T_VARIABLE","$coupon",195],")",["T_WHITESPACE"," ",195],"{",["T_WHITESPACE","\n            ",195],["T_VARIABLE","$couponValue",196],["T_WHITESPACE"," ",196],"=",["T_WHITESPACE"," ",196],"(",["T_VARIABLE","$fieldName",196],["T_WHITESPACE"," ",196],["T_IS_EQUAL","==",196],["T_WHITESPACE"," ",196],["T_CONSTANT_ENCAPSED_STRING","'code'",196],")",["T_WHITESPACE"," ",196],"?",["T_WHITESPACE"," ",196],["T_VARIABLE","$coupon",196],["T_OBJECT_OPERATOR","->",196],["T_STRING","getCode",196],"(",")",["T_WHITESPACE"," ",196],":",["T_WHITESPACE"," ",196],["T_VARIABLE","$coupon",196],["T_OBJECT_OPERATOR","->",196],["T_STRING","getCouponId",196],"(",")",";",["T_WHITESPACE","\n            ",196],["T_TRY","try",197],["T_WHITESPACE"," ",197],"{",["T_WHITESPACE","\n                ",197],["T_VARIABLE","$coupon",198],["T_OBJECT_OPERATOR","->",198],["T_STRING","delete",198],"(",")",";",["T_WHITESPACE","\n            ",198],"}",["T_WHITESPACE"," ",199],["T_CATCH","catch",199],["T_WHITESPACE"," ",199],"(",["T_NS_SEPARATOR","\\",199],["T_STRING","Exception",199],["T_WHITESPACE"," ",199],["T_VARIABLE","$e",199],")",["T_WHITESPACE"," ",199],"{",["T_WHITESPACE","\n                ",199],["T_VARIABLE","$failedItems",200],"[","]",["T_WHITESPACE"," ",200],"=",["T_WHITESPACE"," ",200],["T_VARIABLE","$couponValue",200],";",["T_WHITESPACE","\n            ",200],"}",["T_WHITESPACE","\n            ",201],["T_UNSET","unset",202],"(",["T_VARIABLE","$fieldValues",202],"[",["T_VARIABLE","$couponValue",202],"]",")",";",["T_WHITESPACE","\n        ",202],"}",["T_WHITESPACE","\n        ",203],["T_VARIABLE","$results",204],["T_OBJECT_OPERATOR","->",204],["T_STRING","setFailedItems",204],"(",["T_VARIABLE","$failedItems",204],")",";",["T_WHITESPACE","\n        ",204],["T_VARIABLE","$results",205],["T_OBJECT_OPERATOR","->",205],["T_STRING","setMissingItems",205],"(",["T_STRING","array_flip",205],"(",["T_VARIABLE","$fieldValues",205],")",")",";",["T_WHITESPACE","\n        ",205],["T_RETURN","return",206],["T_WHITESPACE"," ",206],["T_VARIABLE","$results",206],";",["T_WHITESPACE","\n    ",206],"}",["T_WHITESPACE","\n",207],"}",["T_WHITESPACE","\n",208]]
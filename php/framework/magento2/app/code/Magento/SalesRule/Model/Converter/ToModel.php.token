[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Copyright \u00c2\u00a9 2013-2017 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n *\/",2],["T_WHITESPACE","\n",5],["T_NAMESPACE","namespace",6],["T_WHITESPACE"," ",6],["T_STRING","Magento",6],["T_NS_SEPARATOR","\\",6],["T_STRING","SalesRule",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Model",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Converter",6],";",["T_WHITESPACE","\n\n",6],["T_USE","use",8],["T_WHITESPACE"," ",8],["T_STRING","Magento",8],["T_NS_SEPARATOR","\\",8],["T_STRING","SalesRule",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Model",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Data",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Condition",8],";",["T_WHITESPACE","\n",8],["T_USE","use",9],["T_WHITESPACE"," ",9],["T_STRING","Magento",9],["T_NS_SEPARATOR","\\",9],["T_STRING","SalesRule",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Api",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Data",9],["T_NS_SEPARATOR","\\",9],["T_STRING","RuleInterface",9],";",["T_WHITESPACE","\n",9],["T_USE","use",10],["T_WHITESPACE"," ",10],["T_STRING","Magento",10],["T_NS_SEPARATOR","\\",10],["T_STRING","SalesRule",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Model",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Data",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Rule",10],["T_WHITESPACE"," ",10],["T_AS","as",10],["T_WHITESPACE"," ",10],["T_STRING","RuleDataModel",10],";",["T_WHITESPACE","\n",10],["T_USE","use",11],["T_WHITESPACE"," ",11],["T_STRING","Magento",11],["T_NS_SEPARATOR","\\",11],["T_STRING","SalesRule",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Model",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Rule",11],";",["T_WHITESPACE","\n\n",11],["T_CLASS","class",13],["T_WHITESPACE"," ",13],["T_STRING","ToModel",13],["T_WHITESPACE","\n",13],"{",["T_WHITESPACE","\n    ",14],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\SalesRule\\Model\\RuleFactory\n     *\/",15],["T_WHITESPACE","\n    ",17],["T_PROTECTED","protected",18],["T_WHITESPACE"," ",18],["T_VARIABLE","$ruleFactory",18],";",["T_WHITESPACE","\n\n    ",18],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Framework\\Reflection\\DataObjectProcessor\n     *\/",20],["T_WHITESPACE","\n    ",22],["T_PROTECTED","protected",23],["T_WHITESPACE"," ",23],["T_VARIABLE","$dataObjectProcessor",23],";",["T_WHITESPACE","\n\n    ",23],["T_DOC_COMMENT","\/**\n     * @param \\Magento\\SalesRule\\Model\\RuleFactory $ruleFactory\n     * @param \\Magento\\Framework\\Reflection\\DataObjectProcessor $dataObjectProcessor\n     *\/",25],["T_WHITESPACE","\n    ",28],["T_PUBLIC","public",29],["T_WHITESPACE"," ",29],["T_FUNCTION","function",29],["T_WHITESPACE"," ",29],["T_STRING","__construct",29],"(",["T_WHITESPACE","\n        ",29],["T_NS_SEPARATOR","\\",30],["T_STRING","Magento",30],["T_NS_SEPARATOR","\\",30],["T_STRING","SalesRule",30],["T_NS_SEPARATOR","\\",30],["T_STRING","Model",30],["T_NS_SEPARATOR","\\",30],["T_STRING","RuleFactory",30],["T_WHITESPACE"," ",30],["T_VARIABLE","$ruleFactory",30],",",["T_WHITESPACE","\n        ",30],["T_NS_SEPARATOR","\\",31],["T_STRING","Magento",31],["T_NS_SEPARATOR","\\",31],["T_STRING","Framework",31],["T_NS_SEPARATOR","\\",31],["T_STRING","Reflection",31],["T_NS_SEPARATOR","\\",31],["T_STRING","DataObjectProcessor",31],["T_WHITESPACE"," ",31],["T_VARIABLE","$dataObjectProcessor",31],["T_WHITESPACE","\n    ",31],")",["T_WHITESPACE"," ",32],"{",["T_WHITESPACE","\n        ",32],["T_VARIABLE","$this",33],["T_OBJECT_OPERATOR","->",33],["T_STRING","ruleFactory",33],["T_WHITESPACE"," ",33],"=",["T_WHITESPACE"," ",33],["T_VARIABLE","$ruleFactory",33],";",["T_WHITESPACE","\n        ",33],["T_VARIABLE","$this",34],["T_OBJECT_OPERATOR","->",34],["T_STRING","dataObjectProcessor",34],["T_WHITESPACE"," ",34],"=",["T_WHITESPACE"," ",34],["T_VARIABLE","$dataObjectProcessor",34],";",["T_WHITESPACE","\n    ",34],"}",["T_WHITESPACE","\n\n    ",35],["T_DOC_COMMENT","\/**\n     * @param \\Magento\\SalesRule\\Model\\Rule $ruleModel\n     * @param RuleDataModel $dataModel\n     * @return $this\n     *\/",37],["T_WHITESPACE","\n    ",41],["T_PROTECTED","protected",42],["T_WHITESPACE"," ",42],["T_FUNCTION","function",42],["T_WHITESPACE"," ",42],["T_STRING","mapConditions",42],"(",["T_NS_SEPARATOR","\\",42],["T_STRING","Magento",42],["T_NS_SEPARATOR","\\",42],["T_STRING","SalesRule",42],["T_NS_SEPARATOR","\\",42],["T_STRING","Model",42],["T_NS_SEPARATOR","\\",42],["T_STRING","Rule",42],["T_WHITESPACE"," ",42],["T_VARIABLE","$ruleModel",42],",",["T_WHITESPACE"," ",42],["T_STRING","RuleDataModel",42],["T_WHITESPACE"," ",42],["T_VARIABLE","$dataModel",42],")",["T_WHITESPACE","\n    ",42],"{",["T_WHITESPACE","\n        ",43],["T_VARIABLE","$condition",44],["T_WHITESPACE"," ",44],"=",["T_WHITESPACE"," ",44],["T_VARIABLE","$dataModel",44],["T_OBJECT_OPERATOR","->",44],["T_STRING","getCondition",44],"(",")",";",["T_WHITESPACE","\n        ",44],["T_IF","if",45],["T_WHITESPACE"," ",45],"(",["T_VARIABLE","$condition",45],")",["T_WHITESPACE"," ",45],"{",["T_WHITESPACE","\n            ",45],["T_VARIABLE","$array",46],["T_WHITESPACE"," ",46],"=",["T_WHITESPACE"," ",46],["T_VARIABLE","$this",46],["T_OBJECT_OPERATOR","->",46],["T_STRING","dataModelToArray",46],"(",["T_VARIABLE","$condition",46],")",";",["T_WHITESPACE","\n            ",46],["T_VARIABLE","$ruleModel",47],["T_OBJECT_OPERATOR","->",47],["T_STRING","getConditions",47],"(",")",["T_OBJECT_OPERATOR","->",47],["T_STRING","setConditions",47],"(","[","]",")",["T_OBJECT_OPERATOR","->",47],["T_STRING","loadArray",47],"(",["T_VARIABLE","$array",47],")",";",["T_WHITESPACE","\n        ",47],"}",["T_WHITESPACE","\n\n        ",48],["T_RETURN","return",50],["T_WHITESPACE"," ",50],["T_VARIABLE","$this",50],";",["T_WHITESPACE","\n    ",50],"}",["T_WHITESPACE","\n\n    ",51],["T_DOC_COMMENT","\/**\n     * @param \\Magento\\SalesRule\\Model\\Rule $ruleModel\n     * @param RuleDataModel $dataModel\n     * @return $this\n     *\/",53],["T_WHITESPACE","\n    ",57],["T_PROTECTED","protected",58],["T_WHITESPACE"," ",58],["T_FUNCTION","function",58],["T_WHITESPACE"," ",58],["T_STRING","mapActionConditions",58],"(",["T_NS_SEPARATOR","\\",58],["T_STRING","Magento",58],["T_NS_SEPARATOR","\\",58],["T_STRING","SalesRule",58],["T_NS_SEPARATOR","\\",58],["T_STRING","Model",58],["T_NS_SEPARATOR","\\",58],["T_STRING","Rule",58],["T_WHITESPACE"," ",58],["T_VARIABLE","$ruleModel",58],",",["T_WHITESPACE"," ",58],["T_STRING","RuleDataModel",58],["T_WHITESPACE"," ",58],["T_VARIABLE","$dataModel",58],")",["T_WHITESPACE","\n    ",58],"{",["T_WHITESPACE","\n        ",59],["T_VARIABLE","$condition",60],["T_WHITESPACE"," ",60],"=",["T_WHITESPACE"," ",60],["T_VARIABLE","$dataModel",60],["T_OBJECT_OPERATOR","->",60],["T_STRING","getActionCondition",60],"(",")",";",["T_WHITESPACE","\n        ",60],["T_IF","if",61],["T_WHITESPACE"," ",61],"(",["T_VARIABLE","$condition",61],")",["T_WHITESPACE"," ",61],"{",["T_WHITESPACE","\n            ",61],["T_VARIABLE","$array",62],["T_WHITESPACE"," ",62],"=",["T_WHITESPACE"," ",62],["T_VARIABLE","$this",62],["T_OBJECT_OPERATOR","->",62],["T_STRING","dataModelToArray",62],"(",["T_VARIABLE","$condition",62],",",["T_WHITESPACE"," ",62],["T_CONSTANT_ENCAPSED_STRING","'actions'",62],")",";",["T_WHITESPACE","\n            ",62],["T_VARIABLE","$ruleModel",63],["T_OBJECT_OPERATOR","->",63],["T_STRING","getActions",63],"(",")",["T_OBJECT_OPERATOR","->",63],["T_STRING","setActions",63],"(","[","]",")",["T_OBJECT_OPERATOR","->",63],["T_STRING","loadArray",63],"(",["T_VARIABLE","$array",63],",",["T_WHITESPACE"," ",63],["T_CONSTANT_ENCAPSED_STRING","'actions'",63],")",";",["T_WHITESPACE","\n        ",63],"}",["T_WHITESPACE","\n\n        ",64],["T_RETURN","return",66],["T_WHITESPACE"," ",66],["T_VARIABLE","$this",66],";",["T_WHITESPACE","\n    ",66],"}",["T_WHITESPACE","\n\n    ",67],["T_DOC_COMMENT","\/**\n     * @param Rule $ruleModel\n     * @param RuleDataModel $dataModel\n     * @return $this\n     *\/",69],["T_WHITESPACE","\n    ",73],["T_PROTECTED","protected",74],["T_WHITESPACE"," ",74],["T_FUNCTION","function",74],["T_WHITESPACE"," ",74],["T_STRING","mapStoreLabels",74],"(",["T_STRING","Rule",74],["T_WHITESPACE"," ",74],["T_VARIABLE","$ruleModel",74],",",["T_WHITESPACE"," ",74],["T_STRING","RuleDataModel",74],["T_WHITESPACE"," ",74],["T_VARIABLE","$dataModel",74],")",["T_WHITESPACE","\n    ",74],"{",["T_WHITESPACE","\n        ",75],["T_COMMENT","\/\/translate store labels object into array\n",76],["T_WHITESPACE","        ",77],["T_IF","if",77],["T_WHITESPACE"," ",77],"(",["T_VARIABLE","$dataModel",77],["T_OBJECT_OPERATOR","->",77],["T_STRING","getStoreLabels",77],"(",")",["T_WHITESPACE"," ",77],["T_IS_NOT_IDENTICAL","!==",77],["T_WHITESPACE"," ",77],["T_STRING","null",77],")",["T_WHITESPACE"," ",77],"{",["T_WHITESPACE","\n            ",77],["T_VARIABLE","$storeLabels",78],["T_WHITESPACE"," ",78],"=",["T_WHITESPACE"," ",78],"[","]",";",["T_WHITESPACE","\n            ",78],["T_DOC_COMMENT","\/** @var \\Magento\\SalesRule\\Api\\Data\\RuleLabelInterface $ruleLabel *\/",79],["T_WHITESPACE","\n            ",79],["T_FOREACH","foreach",80],["T_WHITESPACE"," ",80],"(",["T_VARIABLE","$dataModel",80],["T_OBJECT_OPERATOR","->",80],["T_STRING","getStoreLabels",80],"(",")",["T_WHITESPACE"," ",80],["T_AS","as",80],["T_WHITESPACE"," ",80],["T_VARIABLE","$ruleLabel",80],")",["T_WHITESPACE"," ",80],"{",["T_WHITESPACE","\n                ",80],["T_VARIABLE","$storeLabels",81],"[",["T_VARIABLE","$ruleLabel",81],["T_OBJECT_OPERATOR","->",81],["T_STRING","getStoreId",81],"(",")","]",["T_WHITESPACE"," ",81],"=",["T_WHITESPACE"," ",81],["T_VARIABLE","$ruleLabel",81],["T_OBJECT_OPERATOR","->",81],["T_STRING","getStoreLabel",81],"(",")",";",["T_WHITESPACE","\n            ",81],"}",["T_WHITESPACE","\n            ",82],["T_VARIABLE","$ruleModel",83],["T_OBJECT_OPERATOR","->",83],["T_STRING","setStoreLabels",83],"(",["T_VARIABLE","$storeLabels",83],")",";",["T_WHITESPACE","\n        ",83],"}",["T_WHITESPACE","\n        ",84],["T_RETURN","return",85],["T_WHITESPACE"," ",85],["T_VARIABLE","$this",85],";",["T_WHITESPACE","\n    ",85],"}",["T_WHITESPACE","\n\n    ",86],["T_DOC_COMMENT","\/**\n     * @param Rule $ruleModel\n     * @return $this\n     *\/",88],["T_WHITESPACE","\n    ",91],["T_PROTECTED","protected",92],["T_WHITESPACE"," ",92],["T_FUNCTION","function",92],["T_WHITESPACE"," ",92],["T_STRING","mapCouponType",92],"(",["T_STRING","Rule",92],["T_WHITESPACE"," ",92],["T_VARIABLE","$ruleModel",92],")",["T_WHITESPACE","\n    ",92],"{",["T_WHITESPACE","\n        ",93],["T_IF","if",94],["T_WHITESPACE"," ",94],"(",["T_VARIABLE","$ruleModel",94],["T_OBJECT_OPERATOR","->",94],["T_STRING","getCouponType",94],"(",")",")",["T_WHITESPACE"," ",94],"{",["T_WHITESPACE","\n            ",94],["T_VARIABLE","$mappedValue",95],["T_WHITESPACE"," ",95],"=",["T_WHITESPACE"," ",95],["T_CONSTANT_ENCAPSED_STRING","''",95],";",["T_WHITESPACE","\n            ",95],["T_SWITCH","switch",96],["T_WHITESPACE"," ",96],"(",["T_VARIABLE","$ruleModel",96],["T_OBJECT_OPERATOR","->",96],["T_STRING","getCouponType",96],"(",")",")",["T_WHITESPACE"," ",96],"{",["T_WHITESPACE","\n                ",96],["T_CASE","case",97],["T_WHITESPACE"," ",97],["T_STRING","RuleInterface",97],["T_DOUBLE_COLON","::",97],["T_STRING","COUPON_TYPE_NO_COUPON",97],":",["T_WHITESPACE","\n                    ",97],["T_VARIABLE","$mappedValue",98],["T_WHITESPACE"," ",98],"=",["T_WHITESPACE"," ",98],["T_NS_SEPARATOR","\\",98],["T_STRING","Magento",98],["T_NS_SEPARATOR","\\",98],["T_STRING","SalesRule",98],["T_NS_SEPARATOR","\\",98],["T_STRING","Model",98],["T_NS_SEPARATOR","\\",98],["T_STRING","Rule",98],["T_DOUBLE_COLON","::",98],["T_STRING","COUPON_TYPE_NO_COUPON",98],";",["T_WHITESPACE","\n                    ",98],["T_BREAK","break",99],";",["T_WHITESPACE","\n                ",99],["T_CASE","case",100],["T_WHITESPACE"," ",100],["T_STRING","RuleInterface",100],["T_DOUBLE_COLON","::",100],["T_STRING","COUPON_TYPE_SPECIFIC_COUPON",100],":",["T_WHITESPACE","\n                    ",100],["T_VARIABLE","$mappedValue",101],["T_WHITESPACE"," ",101],"=",["T_WHITESPACE"," ",101],["T_NS_SEPARATOR","\\",101],["T_STRING","Magento",101],["T_NS_SEPARATOR","\\",101],["T_STRING","SalesRule",101],["T_NS_SEPARATOR","\\",101],["T_STRING","Model",101],["T_NS_SEPARATOR","\\",101],["T_STRING","Rule",101],["T_DOUBLE_COLON","::",101],["T_STRING","COUPON_TYPE_SPECIFIC",101],";",["T_WHITESPACE","\n                    ",101],["T_BREAK","break",102],";",["T_WHITESPACE","\n                ",102],["T_CASE","case",103],["T_WHITESPACE"," ",103],["T_STRING","RuleInterface",103],["T_DOUBLE_COLON","::",103],["T_STRING","COUPON_TYPE_AUTO",103],":",["T_WHITESPACE","\n                    ",103],["T_VARIABLE","$mappedValue",104],["T_WHITESPACE"," ",104],"=",["T_WHITESPACE"," ",104],["T_NS_SEPARATOR","\\",104],["T_STRING","Magento",104],["T_NS_SEPARATOR","\\",104],["T_STRING","SalesRule",104],["T_NS_SEPARATOR","\\",104],["T_STRING","Model",104],["T_NS_SEPARATOR","\\",104],["T_STRING","Rule",104],["T_DOUBLE_COLON","::",104],["T_STRING","COUPON_TYPE_AUTO",104],";",["T_WHITESPACE","\n                    ",104],["T_BREAK","break",105],";",["T_WHITESPACE","\n                ",105],["T_DEFAULT","default",106],":",["T_WHITESPACE","\n            ",106],"}",["T_WHITESPACE","\n            ",107],["T_VARIABLE","$ruleModel",108],["T_OBJECT_OPERATOR","->",108],["T_STRING","setCouponType",108],"(",["T_VARIABLE","$mappedValue",108],")",";",["T_WHITESPACE","\n        ",108],"}",["T_WHITESPACE","\n        ",109],["T_RETURN","return",110],["T_WHITESPACE"," ",110],["T_VARIABLE","$this",110],";",["T_WHITESPACE","\n    ",110],"}",["T_WHITESPACE","\n\n    ",111],["T_DOC_COMMENT","\/**\n     * @param \\Magento\\SalesRule\\Model\\Rule $ruleModel\n     * @param RuleDataModel $dataModel\n     * @return $this\n     *\/",113],["T_WHITESPACE","\n    ",117],["T_PROTECTED","protected",118],["T_WHITESPACE"," ",118],["T_FUNCTION","function",118],["T_WHITESPACE"," ",118],["T_STRING","mapFields",118],"(",["T_NS_SEPARATOR","\\",118],["T_STRING","Magento",118],["T_NS_SEPARATOR","\\",118],["T_STRING","SalesRule",118],["T_NS_SEPARATOR","\\",118],["T_STRING","Model",118],["T_NS_SEPARATOR","\\",118],["T_STRING","Rule",118],["T_WHITESPACE"," ",118],["T_VARIABLE","$ruleModel",118],",",["T_WHITESPACE"," ",118],["T_STRING","RuleDataModel",118],["T_WHITESPACE"," ",118],["T_VARIABLE","$dataModel",118],")",["T_WHITESPACE","\n    ",118],"{",["T_WHITESPACE","\n        ",119],["T_VARIABLE","$this",120],["T_OBJECT_OPERATOR","->",120],["T_STRING","mapConditions",120],"(",["T_VARIABLE","$ruleModel",120],",",["T_WHITESPACE"," ",120],["T_VARIABLE","$dataModel",120],")",";",["T_WHITESPACE","\n        ",120],["T_VARIABLE","$this",121],["T_OBJECT_OPERATOR","->",121],["T_STRING","mapActionConditions",121],"(",["T_VARIABLE","$ruleModel",121],",",["T_WHITESPACE"," ",121],["T_VARIABLE","$dataModel",121],")",";",["T_WHITESPACE","\n        ",121],["T_VARIABLE","$this",122],["T_OBJECT_OPERATOR","->",122],["T_STRING","mapStoreLabels",122],"(",["T_VARIABLE","$ruleModel",122],",",["T_WHITESPACE"," ",122],["T_VARIABLE","$dataModel",122],")",";",["T_WHITESPACE","\n        ",122],["T_VARIABLE","$this",123],["T_OBJECT_OPERATOR","->",123],["T_STRING","mapCouponType",123],"(",["T_VARIABLE","$ruleModel",123],")",";",["T_WHITESPACE","\n        ",123],["T_RETURN","return",124],["T_WHITESPACE"," ",124],["T_VARIABLE","$this",124],";",["T_WHITESPACE","\n    ",124],"}",["T_WHITESPACE","\n\n    ",125],["T_DOC_COMMENT","\/**\n     * Convert recursive array into condition data model\n     *\n     * @param Condition $condition\n     * @param string $key\n     * @return array\n     *\/",127],["T_WHITESPACE","\n    ",133],["T_PUBLIC","public",134],["T_WHITESPACE"," ",134],["T_FUNCTION","function",134],["T_WHITESPACE"," ",134],["T_STRING","dataModelToArray",134],"(",["T_STRING","Condition",134],["T_WHITESPACE"," ",134],["T_VARIABLE","$condition",134],",",["T_WHITESPACE"," ",134],["T_VARIABLE","$key",134],["T_WHITESPACE"," ",134],"=",["T_WHITESPACE"," ",134],["T_CONSTANT_ENCAPSED_STRING","'conditions'",134],")",["T_WHITESPACE","\n    ",134],"{",["T_WHITESPACE","\n        ",135],["T_VARIABLE","$output",136],["T_WHITESPACE"," ",136],"=",["T_WHITESPACE"," ",136],"[","]",";",["T_WHITESPACE","\n        ",136],["T_VARIABLE","$output",137],"[",["T_CONSTANT_ENCAPSED_STRING","'type'",137],"]",["T_WHITESPACE"," ",137],"=",["T_WHITESPACE"," ",137],["T_VARIABLE","$condition",137],["T_OBJECT_OPERATOR","->",137],["T_STRING","getConditionType",137],"(",")",";",["T_WHITESPACE","\n        ",137],["T_VARIABLE","$output",138],"[",["T_CONSTANT_ENCAPSED_STRING","'value'",138],"]",["T_WHITESPACE"," ",138],"=",["T_WHITESPACE"," ",138],["T_VARIABLE","$condition",138],["T_OBJECT_OPERATOR","->",138],["T_STRING","getValue",138],"(",")",";",["T_WHITESPACE","\n        ",138],["T_VARIABLE","$output",139],"[",["T_CONSTANT_ENCAPSED_STRING","'attribute'",139],"]",["T_WHITESPACE"," ",139],"=",["T_WHITESPACE"," ",139],["T_VARIABLE","$condition",139],["T_OBJECT_OPERATOR","->",139],["T_STRING","getAttributeName",139],"(",")",";",["T_WHITESPACE","\n        ",139],["T_VARIABLE","$output",140],"[",["T_CONSTANT_ENCAPSED_STRING","'operator'",140],"]",["T_WHITESPACE"," ",140],"=",["T_WHITESPACE"," ",140],["T_VARIABLE","$condition",140],["T_OBJECT_OPERATOR","->",140],["T_STRING","getOperator",140],"(",")",";",["T_WHITESPACE","\n\n        ",140],["T_IF","if",142],["T_WHITESPACE"," ",142],"(",["T_VARIABLE","$condition",142],["T_OBJECT_OPERATOR","->",142],["T_STRING","getAggregatorType",142],"(",")",")",["T_WHITESPACE"," ",142],"{",["T_WHITESPACE","\n            ",142],["T_VARIABLE","$output",143],"[",["T_CONSTANT_ENCAPSED_STRING","'aggregator'",143],"]",["T_WHITESPACE"," ",143],"=",["T_WHITESPACE"," ",143],["T_VARIABLE","$condition",143],["T_OBJECT_OPERATOR","->",143],["T_STRING","getAggregatorType",143],"(",")",";",["T_WHITESPACE","\n        ",143],"}",["T_WHITESPACE","\n        ",144],["T_IF","if",145],["T_WHITESPACE"," ",145],"(",["T_VARIABLE","$condition",145],["T_OBJECT_OPERATOR","->",145],["T_STRING","getConditions",145],"(",")",")",["T_WHITESPACE"," ",145],"{",["T_WHITESPACE","\n            ",145],["T_VARIABLE","$conditions",146],["T_WHITESPACE"," ",146],"=",["T_WHITESPACE"," ",146],"[","]",";",["T_WHITESPACE","\n            ",146],["T_FOREACH","foreach",147],["T_WHITESPACE"," ",147],"(",["T_VARIABLE","$condition",147],["T_OBJECT_OPERATOR","->",147],["T_STRING","getConditions",147],"(",")",["T_WHITESPACE"," ",147],["T_AS","as",147],["T_WHITESPACE"," ",147],["T_VARIABLE","$subCondition",147],")",["T_WHITESPACE"," ",147],"{",["T_WHITESPACE","\n                ",147],["T_VARIABLE","$conditions",148],"[","]",["T_WHITESPACE"," ",148],"=",["T_WHITESPACE"," ",148],["T_VARIABLE","$this",148],["T_OBJECT_OPERATOR","->",148],["T_STRING","dataModelToArray",148],"(",["T_VARIABLE","$subCondition",148],",",["T_WHITESPACE"," ",148],["T_VARIABLE","$key",148],")",";",["T_WHITESPACE","\n            ",148],"}",["T_WHITESPACE","\n            ",149],["T_VARIABLE","$output",150],"[",["T_VARIABLE","$key",150],"]",["T_WHITESPACE"," ",150],"=",["T_WHITESPACE"," ",150],["T_VARIABLE","$conditions",150],";",["T_WHITESPACE","\n        ",150],"}",["T_WHITESPACE","\n        ",151],["T_RETURN","return",152],["T_WHITESPACE"," ",152],["T_VARIABLE","$output",152],";",["T_WHITESPACE","\n    ",152],"}",["T_WHITESPACE","\n\n    ",153],["T_DOC_COMMENT","\/**\n     * @param RuleDataModel $dataModel\n     * @return $this|Rule\n     * @throws \\Magento\\Framework\\Exception\\NoSuchEntityException\n     * @throws \\Magento\\Framework\\Exception\\InputException\n     *\/",155],["T_WHITESPACE","\n    ",160],["T_PUBLIC","public",161],["T_WHITESPACE"," ",161],["T_FUNCTION","function",161],["T_WHITESPACE"," ",161],["T_STRING","toModel",161],"(",["T_STRING","RuleDataModel",161],["T_WHITESPACE"," ",161],["T_VARIABLE","$dataModel",161],")",["T_WHITESPACE","\n    ",161],"{",["T_WHITESPACE","\n        ",162],["T_VARIABLE","$ruleId",163],["T_WHITESPACE"," ",163],"=",["T_WHITESPACE"," ",163],["T_VARIABLE","$dataModel",163],["T_OBJECT_OPERATOR","->",163],["T_STRING","getRuleId",163],"(",")",";",["T_WHITESPACE","\n\n        ",163],["T_IF","if",165],["T_WHITESPACE"," ",165],"(",["T_VARIABLE","$ruleId",165],")",["T_WHITESPACE"," ",165],"{",["T_WHITESPACE","\n            ",165],["T_VARIABLE","$ruleModel",166],["T_WHITESPACE"," ",166],"=",["T_WHITESPACE"," ",166],["T_VARIABLE","$this",166],["T_OBJECT_OPERATOR","->",166],["T_STRING","ruleFactory",166],["T_OBJECT_OPERATOR","->",166],["T_STRING","create",166],"(",")",["T_OBJECT_OPERATOR","->",166],["T_STRING","load",166],"(",["T_VARIABLE","$ruleId",166],")",";",["T_WHITESPACE","\n            ",166],["T_IF","if",167],["T_WHITESPACE"," ",167],"(","!",["T_VARIABLE","$ruleModel",167],["T_OBJECT_OPERATOR","->",167],["T_STRING","getId",167],"(",")",")",["T_WHITESPACE"," ",167],"{",["T_WHITESPACE","\n                ",167],["T_THROW","throw",168],["T_WHITESPACE"," ",168],["T_NEW","new",168],["T_WHITESPACE"," ",168],["T_NS_SEPARATOR","\\",168],["T_STRING","Magento",168],["T_NS_SEPARATOR","\\",168],["T_STRING","Framework",168],["T_NS_SEPARATOR","\\",168],["T_STRING","Exception",168],["T_NS_SEPARATOR","\\",168],["T_STRING","NoSuchEntityException",168],"(",")",";",["T_WHITESPACE","\n            ",168],"}",["T_WHITESPACE","\n        ",169],"}",["T_WHITESPACE"," ",170],["T_ELSE","else",170],["T_WHITESPACE"," ",170],"{",["T_WHITESPACE","\n            ",170],["T_VARIABLE","$ruleModel",171],["T_WHITESPACE"," ",171],"=",["T_WHITESPACE"," ",171],["T_VARIABLE","$this",171],["T_OBJECT_OPERATOR","->",171],["T_STRING","ruleFactory",171],["T_OBJECT_OPERATOR","->",171],["T_STRING","create",171],"(",")",";",["T_WHITESPACE","\n            ",171],["T_VARIABLE","$dataModel",172],["T_OBJECT_OPERATOR","->",172],["T_STRING","setFromDate",172],"(",["T_WHITESPACE","\n                ",172],["T_VARIABLE","$this",173],["T_OBJECT_OPERATOR","->",173],["T_STRING","formattingDate",173],"(",["T_VARIABLE","$dataModel",173],["T_OBJECT_OPERATOR","->",173],["T_STRING","getFromDate",173],"(",")",")",["T_WHITESPACE","\n            ",173],")",";",["T_WHITESPACE","\n            ",174],["T_VARIABLE","$dataModel",175],["T_OBJECT_OPERATOR","->",175],["T_STRING","setToDate",175],"(",["T_WHITESPACE","\n                ",175],["T_VARIABLE","$this",176],["T_OBJECT_OPERATOR","->",176],["T_STRING","formattingDate",176],"(",["T_VARIABLE","$dataModel",176],["T_OBJECT_OPERATOR","->",176],["T_STRING","getToDate",176],"(",")",")",["T_WHITESPACE","\n            ",176],")",";",["T_WHITESPACE","\n        ",177],"}",["T_WHITESPACE","\n\n        ",178],["T_VARIABLE","$modelData",180],["T_WHITESPACE"," ",180],"=",["T_WHITESPACE"," ",180],["T_VARIABLE","$ruleModel",180],["T_OBJECT_OPERATOR","->",180],["T_STRING","getData",180],"(",")",";",["T_WHITESPACE","\n\n        ",180],["T_VARIABLE","$data",182],["T_WHITESPACE"," ",182],"=",["T_WHITESPACE"," ",182],["T_VARIABLE","$this",182],["T_OBJECT_OPERATOR","->",182],["T_STRING","dataObjectProcessor",182],["T_OBJECT_OPERATOR","->",182],["T_STRING","buildOutputDataArray",182],"(",["T_WHITESPACE","\n            ",182],["T_VARIABLE","$dataModel",183],",",["T_WHITESPACE","\n            ",183],["T_NS_SEPARATOR","\\",184],["T_STRING","Magento",184],["T_NS_SEPARATOR","\\",184],["T_STRING","SalesRule",184],["T_NS_SEPARATOR","\\",184],["T_STRING","Api",184],["T_NS_SEPARATOR","\\",184],["T_STRING","Data",184],["T_NS_SEPARATOR","\\",184],["T_STRING","RuleInterface",184],["T_DOUBLE_COLON","::",184],["T_CLASS","class",184],["T_WHITESPACE","\n        ",184],")",";",["T_WHITESPACE","\n\n        ",185],["T_VARIABLE","$mergedData",187],["T_WHITESPACE"," ",187],"=",["T_WHITESPACE"," ",187],["T_STRING","array_merge",187],"(",["T_VARIABLE","$modelData",187],",",["T_WHITESPACE"," ",187],["T_VARIABLE","$data",187],")",";",["T_WHITESPACE","\n\n        ",187],["T_VARIABLE","$validateResult",189],["T_WHITESPACE"," ",189],"=",["T_WHITESPACE"," ",189],["T_VARIABLE","$ruleModel",189],["T_OBJECT_OPERATOR","->",189],["T_STRING","validateData",189],"(",["T_NEW","new",189],["T_WHITESPACE"," ",189],["T_NS_SEPARATOR","\\",189],["T_STRING","Magento",189],["T_NS_SEPARATOR","\\",189],["T_STRING","Framework",189],["T_NS_SEPARATOR","\\",189],["T_STRING","DataObject",189],"(",["T_VARIABLE","$mergedData",189],")",")",";",["T_WHITESPACE","\n        ",189],["T_IF","if",190],["T_WHITESPACE"," ",190],"(",["T_VARIABLE","$validateResult",190],["T_WHITESPACE"," ",190],["T_IS_NOT_IDENTICAL","!==",190],["T_WHITESPACE"," ",190],["T_STRING","true",190],")",["T_WHITESPACE"," ",190],"{",["T_WHITESPACE","\n            ",190],["T_VARIABLE","$text",191],["T_WHITESPACE"," ",191],"=",["T_WHITESPACE"," ",191],["T_CONSTANT_ENCAPSED_STRING","''",191],";",["T_WHITESPACE","\n            ",191],["T_DOC_COMMENT","\/** @var \\Magento\\Framework\\Phrase $errorMessage *\/",192],["T_WHITESPACE","\n            ",192],["T_FOREACH","foreach",193],["T_WHITESPACE"," ",193],"(",["T_VARIABLE","$validateResult",193],["T_WHITESPACE"," ",193],["T_AS","as",193],["T_WHITESPACE"," ",193],["T_VARIABLE","$errorMessage",193],")",["T_WHITESPACE"," ",193],"{",["T_WHITESPACE","\n                ",193],["T_VARIABLE","$text",194],["T_WHITESPACE"," ",194],["T_CONCAT_EQUAL",".=",194],["T_WHITESPACE"," ",194],["T_VARIABLE","$errorMessage",194],["T_OBJECT_OPERATOR","->",194],["T_STRING","getText",194],"(",")",";",["T_WHITESPACE","\n                ",194],["T_VARIABLE","$text",195],["T_WHITESPACE"," ",195],["T_CONCAT_EQUAL",".=",195],["T_WHITESPACE"," ",195],["T_CONSTANT_ENCAPSED_STRING","'; '",195],";",["T_WHITESPACE","\n            ",195],"}",["T_WHITESPACE","\n            ",196],["T_THROW","throw",197],["T_WHITESPACE"," ",197],["T_NEW","new",197],["T_WHITESPACE"," ",197],["T_NS_SEPARATOR","\\",197],["T_STRING","Magento",197],["T_NS_SEPARATOR","\\",197],["T_STRING","Framework",197],["T_NS_SEPARATOR","\\",197],["T_STRING","Exception",197],["T_NS_SEPARATOR","\\",197],["T_STRING","InputException",197],"(",["T_NEW","new",197],["T_WHITESPACE"," ",197],["T_NS_SEPARATOR","\\",197],["T_STRING","Magento",197],["T_NS_SEPARATOR","\\",197],["T_STRING","Framework",197],["T_NS_SEPARATOR","\\",197],["T_STRING","Phrase",197],"(",["T_VARIABLE","$text",197],")",")",";",["T_WHITESPACE","\n        ",197],"}",["T_WHITESPACE","\n\n        ",198],["T_VARIABLE","$ruleModel",200],["T_OBJECT_OPERATOR","->",200],["T_STRING","setData",200],"(",["T_VARIABLE","$mergedData",200],")",";",["T_WHITESPACE","\n\n        ",200],["T_VARIABLE","$this",202],["T_OBJECT_OPERATOR","->",202],["T_STRING","mapFields",202],"(",["T_VARIABLE","$ruleModel",202],",",["T_WHITESPACE"," ",202],["T_VARIABLE","$dataModel",202],")",";",["T_WHITESPACE","\n\n        ",202],["T_RETURN","return",204],["T_WHITESPACE"," ",204],["T_VARIABLE","$ruleModel",204],";",["T_WHITESPACE","\n    ",204],"}",["T_WHITESPACE","\n\n    ",205],["T_DOC_COMMENT","\/**\n     * Convert date to ISO8601\n     *\n     * @param string|null $date\n     * @return string|null\n     *\/",207],["T_WHITESPACE","\n    ",212],["T_PRIVATE","private",213],["T_WHITESPACE"," ",213],["T_FUNCTION","function",213],["T_WHITESPACE"," ",213],["T_STRING","formattingDate",213],"(",["T_VARIABLE","$date",213],")",["T_WHITESPACE","\n    ",213],"{",["T_WHITESPACE","\n        ",214],["T_IF","if",215],["T_WHITESPACE"," ",215],"(",["T_VARIABLE","$date",215],")",["T_WHITESPACE"," ",215],"{",["T_WHITESPACE","\n            ",215],["T_VARIABLE","$fromDate",216],["T_WHITESPACE"," ",216],"=",["T_WHITESPACE"," ",216],["T_NEW","new",216],["T_WHITESPACE"," ",216],["T_NS_SEPARATOR","\\",216],["T_STRING","DateTime",216],"(",["T_VARIABLE","$date",216],")",";",["T_WHITESPACE","\n            ",216],["T_VARIABLE","$date",217],["T_WHITESPACE"," ",217],"=",["T_WHITESPACE"," ",217],["T_VARIABLE","$fromDate",217],["T_OBJECT_OPERATOR","->",217],["T_STRING","format",217],"(",["T_NS_SEPARATOR","\\",217],["T_STRING","DateTime",217],["T_DOUBLE_COLON","::",217],["T_STRING","ISO8601",217],")",";",["T_WHITESPACE","\n        ",217],"}",["T_WHITESPACE","\n\n        ",218],["T_RETURN","return",220],["T_WHITESPACE"," ",220],["T_VARIABLE","$date",220],";",["T_WHITESPACE","\n    ",220],"}",["T_WHITESPACE","\n",221],"}",["T_WHITESPACE","\n",222]]
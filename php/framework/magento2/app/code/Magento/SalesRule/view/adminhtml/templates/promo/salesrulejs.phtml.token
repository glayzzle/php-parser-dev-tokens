[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Copyright \u00c2\u00a9 2013-2017 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n *\/",2],["T_WHITESPACE","\n",5],["T_CLOSE_TAG","?>\n",6],["T_INLINE_HTML","<script>\nrequire([\n    'jquery',\n    \"uiRegistry\",\n    'Magento_Ui\/js\/modal\/alert',\n    'prototype'\n], function(jQuery, registry, alert) {\n\n\/\/<![CDATA[\nfunction refreshCouponCodesGrid(grid, gridMassAction, transport) {\n    grid.reload();\n    gridMassAction.unselectAll();\n}\n\nfunction generateCouponCodes(idPrefix, generateUrl, grid) {\n    $(idPrefix + 'information_fieldset').removeClassName('ignore-validate');\n    var validationResult = $(idPrefix + 'information_fieldset').select('input',\n            'select', 'textarea').collect( function(elm) {\n        return jQuery.validator.validateElement(elm);\n    }).all();\n    $(idPrefix + 'information_fieldset').addClassName('ignore-validate');\n\n    if (!validationResult) {\n        return;\n    }\n    var elements = $(idPrefix + 'information_fieldset').select('input', 'select', 'textarea');\n\n    elements = elements.concat(\n        $$('#rule_uses_per_coupon'),\n        $$('#rule_uses_per_customer'),\n        $$('#rule_to_date')\n    );\n\n    var params = Form.serializeElements(elements, true);\n    params.form_key = FORM_KEY;\n    if ($$('#'+idPrefix + 'information_fieldset .messages')) {\n        $$('#'+idPrefix + 'information_fieldset .messages')[0].update();\n    }\n    if ($('messages')) {\n        $('messages').update();\n    }\n    var couponCodesGrid = eval(grid);\n    new Ajax.Request(generateUrl, {\n        parameters :params,\n        method :'post',\n        onComplete : function (transport, param){\n            var response = false;\n            if (transport && transport.responseText) {\n                try {\n                    response = JSON.parse(transport.responseText);\n                } catch (e) {\n                    console.warn('An error occured while parsing response');\n                }\n            }\n            if (couponCodesGrid) {\n                couponCodesGrid.reload();\n            }\n            if (response && response.messages) {\n                if ($$('#'+idPrefix + 'information_fieldset .messages')) {\n                    $$('#'+idPrefix + 'information_fieldset .messages')[0].update(response.messages);\n                } else if ($('messages')) {\n                    $('messages').update(response.messages);\n                }\n            }\n            if (response && response.error) {\n                alert({\n                    content: response.error\n                });\n            }\n        }\n    });\n}\n\nwindow.generateCouponCodes = generateCouponCodes;\nwindow.refreshCouponCodesGrid = refreshCouponCodesGrid;\n});\n<\/script>\n",7]]
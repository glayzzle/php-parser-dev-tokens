[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Copyright \u00c2\u00a9 2013-2017 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n *\/",2],["T_WHITESPACE","\n",5],["T_NAMESPACE","namespace",6],["T_WHITESPACE"," ",6],["T_STRING","Magento",6],["T_NS_SEPARATOR","\\",6],["T_STRING","SalesRule",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Test",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Unit",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Model",6],";",["T_WHITESPACE","\n\n",6],["T_DOC_COMMENT","\/**\n * Class ValidatorTest\n * @@SuppressWarnings(PHPMD.CouplingBetweenObjects)\n *\/",8],["T_WHITESPACE","\n",11],["T_CLASS","class",12],["T_WHITESPACE"," ",12],["T_STRING","ValidatorTest",12],["T_WHITESPACE"," ",12],["T_EXTENDS","extends",12],["T_WHITESPACE"," ",12],["T_NS_SEPARATOR","\\",12],["T_STRING","PHPUnit_Framework_TestCase",12],["T_WHITESPACE","\n",12],"{",["T_WHITESPACE","\n    ",13],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Framework\\TestFramework\\Unit\\Helper\\ObjectManager\n     *\/",14],["T_WHITESPACE","\n    ",16],["T_PROTECTED","protected",17],["T_WHITESPACE"," ",17],["T_VARIABLE","$helper",17],";",["T_WHITESPACE","\n\n    ",17],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\SalesRule\\Model\\Validator\n     *\/",19],["T_WHITESPACE","\n    ",21],["T_PROTECTED","protected",22],["T_WHITESPACE"," ",22],["T_VARIABLE","$model",22],";",["T_WHITESPACE","\n\n    ",22],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Quote\\Model\\Quote\\Item|\\PHPUnit_Framework_MockObject_MockObject\n     *\/",24],["T_WHITESPACE","\n    ",26],["T_PROTECTED","protected",27],["T_WHITESPACE"," ",27],["T_VARIABLE","$item",27],";",["T_WHITESPACE","\n\n    ",27],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Quote\\Model\\Quote\\Address|\\PHPUnit_Framework_MockObject_MockObject\n     *\/",29],["T_WHITESPACE","\n    ",31],["T_PROTECTED","protected",32],["T_WHITESPACE"," ",32],["T_VARIABLE","$addressMock",32],";",["T_WHITESPACE","\n\n    ",32],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\SalesRule\\Model\\RulesApplier|\\PHPUnit_Framework_MockObject_MockObject\n     *\/",34],["T_WHITESPACE","\n    ",36],["T_PROTECTED","protected",37],["T_WHITESPACE"," ",37],["T_VARIABLE","$rulesApplier",37],";",["T_WHITESPACE","\n\n    ",37],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\SalesRule\\Model\\Validator\\Pool|\\PHPUnit_Framework_MockObject_MockObject\n     *\/",39],["T_WHITESPACE","\n    ",41],["T_PROTECTED","protected",42],["T_WHITESPACE"," ",42],["T_VARIABLE","$validators",42],";",["T_WHITESPACE","\n\n    ",42],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\SalesRule\\Model\\Utility|\\PHPUnit_Framework_MockObject_MockObject\n     *\/",44],["T_WHITESPACE","\n    ",46],["T_PROTECTED","protected",47],["T_WHITESPACE"," ",47],["T_VARIABLE","$utility",47],";",["T_WHITESPACE","\n\n    ",47],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\SalesRule\\Model\\ResourceModel\\Rule\\Collection|\\PHPUnit_Framework_MockObject_MockObject\n     *\/",49],["T_WHITESPACE","\n    ",51],["T_PROTECTED","protected",52],["T_WHITESPACE"," ",52],["T_VARIABLE","$ruleCollection",52],";",["T_WHITESPACE","\n\n    ",52],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Catalog\\Helper\\Data|\\PHPUnit_Framework_MockObject_MockObject\n     *\/",54],["T_WHITESPACE","\n    ",56],["T_PROTECTED","protected",57],["T_WHITESPACE"," ",57],["T_VARIABLE","$catalogData",57],";",["T_WHITESPACE","\n\n    ",57],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Framework\\Message\\ManagerInterface|\\PHPUnit_Framework_MockObject_MockObject\n     *\/",59],["T_WHITESPACE","\n    ",61],["T_PROTECTED","protected",62],["T_WHITESPACE"," ",62],["T_VARIABLE","$messageManager",62],";",["T_WHITESPACE","\n\n    ",62],["T_PROTECTED","protected",64],["T_WHITESPACE"," ",64],["T_FUNCTION","function",64],["T_WHITESPACE"," ",64],["T_STRING","setUp",64],"(",")",["T_WHITESPACE","\n    ",64],"{",["T_WHITESPACE","\n        ",65],["T_VARIABLE","$this",66],["T_OBJECT_OPERATOR","->",66],["T_STRING","helper",66],["T_WHITESPACE"," ",66],"=",["T_WHITESPACE"," ",66],["T_NEW","new",66],["T_WHITESPACE"," ",66],["T_NS_SEPARATOR","\\",66],["T_STRING","Magento",66],["T_NS_SEPARATOR","\\",66],["T_STRING","Framework",66],["T_NS_SEPARATOR","\\",66],["T_STRING","TestFramework",66],["T_NS_SEPARATOR","\\",66],["T_STRING","Unit",66],["T_NS_SEPARATOR","\\",66],["T_STRING","Helper",66],["T_NS_SEPARATOR","\\",66],["T_STRING","ObjectManager",66],"(",["T_VARIABLE","$this",66],")",";",["T_WHITESPACE","\n        ",66],["T_VARIABLE","$this",67],["T_OBJECT_OPERATOR","->",67],["T_STRING","rulesApplier",67],["T_WHITESPACE"," ",67],"=",["T_WHITESPACE"," ",67],["T_VARIABLE","$this",67],["T_OBJECT_OPERATOR","->",67],["T_STRING","getMock",67],"(",["T_WHITESPACE","\n            ",67],["T_NS_SEPARATOR","\\",68],["T_STRING","Magento",68],["T_NS_SEPARATOR","\\",68],["T_STRING","SalesRule",68],["T_NS_SEPARATOR","\\",68],["T_STRING","Model",68],["T_NS_SEPARATOR","\\",68],["T_STRING","RulesApplier",68],["T_DOUBLE_COLON","::",68],["T_CLASS","class",68],",",["T_WHITESPACE","\n            ",68],"[",["T_CONSTANT_ENCAPSED_STRING","'setAppliedRuleIds'",69],",",["T_WHITESPACE"," ",69],["T_CONSTANT_ENCAPSED_STRING","'applyRules'",69],",",["T_WHITESPACE"," ",69],["T_CONSTANT_ENCAPSED_STRING","'addDiscountDescription'",69],",",["T_WHITESPACE"," ",69],["T_CONSTANT_ENCAPSED_STRING","'__wakeup'",69],"]",",",["T_WHITESPACE","\n            ",69],"[","]",",",["T_WHITESPACE","\n            ",70],["T_CONSTANT_ENCAPSED_STRING","''",71],",",["T_WHITESPACE","\n            ",71],["T_STRING","false",72],["T_WHITESPACE","\n        ",72],")",";",["T_WHITESPACE","\n\n        ",73],["T_VARIABLE","$this",75],["T_OBJECT_OPERATOR","->",75],["T_STRING","addressMock",75],["T_WHITESPACE"," ",75],"=",["T_WHITESPACE"," ",75],["T_VARIABLE","$this",75],["T_OBJECT_OPERATOR","->",75],["T_STRING","getMockBuilder",75],"(",["T_NS_SEPARATOR","\\",75],["T_STRING","Magento",75],["T_NS_SEPARATOR","\\",75],["T_STRING","Quote",75],["T_NS_SEPARATOR","\\",75],["T_STRING","Model",75],["T_NS_SEPARATOR","\\",75],["T_STRING","Quote",75],["T_NS_SEPARATOR","\\",75],["T_STRING","Address",75],["T_DOUBLE_COLON","::",75],["T_CLASS","class",75],")",["T_WHITESPACE","\n            ",75],["T_OBJECT_OPERATOR","->",76],["T_STRING","disableOriginalConstructor",76],"(",")",["T_WHITESPACE","\n            ",76],["T_OBJECT_OPERATOR","->",77],["T_STRING","setMethods",77],"(",["T_WHITESPACE","\n                ",77],"[",["T_WHITESPACE","\n                    ",78],["T_CONSTANT_ENCAPSED_STRING","'getShippingAmountForDiscount'",79],",",["T_WHITESPACE","\n                    ",79],["T_CONSTANT_ENCAPSED_STRING","'getQuote'",80],",",["T_WHITESPACE","\n                    ",80],["T_CONSTANT_ENCAPSED_STRING","'getCustomAttributesCodes'",81],",",["T_WHITESPACE","\n                    ",81],["T_CONSTANT_ENCAPSED_STRING","'setCartFixedRules'",82],["T_WHITESPACE","\n                ",82],"]",["T_WHITESPACE","\n            ",83],")",["T_WHITESPACE","\n            ",84],["T_OBJECT_OPERATOR","->",85],["T_STRING","getMock",85],"(",")",";",["T_WHITESPACE","\n\n        ",85],["T_DOC_COMMENT","\/** @var \\Magento\\Quote\\Model\\Quote\\Item\\AbstractItem|\\PHPUnit_Framework_MockObject_MockObject $item *\/",87],["T_WHITESPACE","\n        ",87],["T_VARIABLE","$this",88],["T_OBJECT_OPERATOR","->",88],["T_STRING","item",88],["T_WHITESPACE"," ",88],"=",["T_WHITESPACE"," ",88],["T_VARIABLE","$this",88],["T_OBJECT_OPERATOR","->",88],["T_STRING","getMock",88],"(",["T_NS_SEPARATOR","\\",88],["T_STRING","Magento",88],["T_NS_SEPARATOR","\\",88],["T_STRING","Quote",88],["T_NS_SEPARATOR","\\",88],["T_STRING","Model",88],["T_NS_SEPARATOR","\\",88],["T_STRING","Quote",88],["T_NS_SEPARATOR","\\",88],["T_STRING","Item",88],["T_DOUBLE_COLON","::",88],["T_CLASS","class",88],",",["T_WHITESPACE"," ",88],"[",["T_CONSTANT_ENCAPSED_STRING","'__wakeup'",88],",",["T_WHITESPACE"," ",88],["T_CONSTANT_ENCAPSED_STRING","'getAddress'",88],"]",",",["T_WHITESPACE"," ",88],"[","]",",",["T_WHITESPACE"," ",88],["T_CONSTANT_ENCAPSED_STRING","''",88],",",["T_WHITESPACE"," ",88],["T_STRING","false",88],")",";",["T_WHITESPACE","\n        ",88],["T_VARIABLE","$this",89],["T_OBJECT_OPERATOR","->",89],["T_STRING","item",89],["T_OBJECT_OPERATOR","->",89],["T_STRING","expects",89],"(",["T_VARIABLE","$this",89],["T_OBJECT_OPERATOR","->",89],["T_STRING","any",89],"(",")",")",["T_WHITESPACE","\n            ",89],["T_OBJECT_OPERATOR","->",90],["T_STRING","method",90],"(",["T_CONSTANT_ENCAPSED_STRING","'getAddress'",90],")",["T_WHITESPACE","\n            ",90],["T_OBJECT_OPERATOR","->",91],["T_STRING","willReturn",91],"(",["T_VARIABLE","$this",91],["T_OBJECT_OPERATOR","->",91],["T_STRING","addressMock",91],")",";",["T_WHITESPACE","\n\n        ",91],["T_VARIABLE","$context",93],["T_WHITESPACE"," ",93],"=",["T_WHITESPACE"," ",93],["T_VARIABLE","$this",93],["T_OBJECT_OPERATOR","->",93],["T_STRING","getMock",93],"(",["T_NS_SEPARATOR","\\",93],["T_STRING","Magento",93],["T_NS_SEPARATOR","\\",93],["T_STRING","Framework",93],["T_NS_SEPARATOR","\\",93],["T_STRING","Model",93],["T_NS_SEPARATOR","\\",93],["T_STRING","Context",93],["T_DOUBLE_COLON","::",93],["T_CLASS","class",93],",",["T_WHITESPACE"," ",93],"[","]",",",["T_WHITESPACE"," ",93],"[","]",",",["T_WHITESPACE"," ",93],["T_CONSTANT_ENCAPSED_STRING","''",93],",",["T_WHITESPACE"," ",93],["T_STRING","false",93],")",";",["T_WHITESPACE","\n        ",93],["T_VARIABLE","$registry",94],["T_WHITESPACE"," ",94],"=",["T_WHITESPACE"," ",94],["T_VARIABLE","$this",94],["T_OBJECT_OPERATOR","->",94],["T_STRING","getMock",94],"(",["T_NS_SEPARATOR","\\",94],["T_STRING","Magento",94],["T_NS_SEPARATOR","\\",94],["T_STRING","Framework",94],["T_NS_SEPARATOR","\\",94],["T_STRING","Registry",94],["T_DOUBLE_COLON","::",94],["T_CLASS","class",94],",",["T_WHITESPACE"," ",94],"[","]",",",["T_WHITESPACE"," ",94],"[","]",",",["T_WHITESPACE"," ",94],["T_CONSTANT_ENCAPSED_STRING","''",94],",",["T_WHITESPACE"," ",94],["T_STRING","false",94],")",";",["T_WHITESPACE","\n        ",94],["T_VARIABLE","$this",95],["T_OBJECT_OPERATOR","->",95],["T_STRING","catalogData",95],["T_WHITESPACE"," ",95],"=",["T_WHITESPACE"," ",95],["T_VARIABLE","$this",95],["T_OBJECT_OPERATOR","->",95],["T_STRING","getMock",95],"(",["T_NS_SEPARATOR","\\",95],["T_STRING","Magento",95],["T_NS_SEPARATOR","\\",95],["T_STRING","Catalog",95],["T_NS_SEPARATOR","\\",95],["T_STRING","Helper",95],["T_NS_SEPARATOR","\\",95],["T_STRING","Data",95],["T_DOUBLE_COLON","::",95],["T_CLASS","class",95],",",["T_WHITESPACE"," ",95],"[","]",",",["T_WHITESPACE"," ",95],"[","]",",",["T_WHITESPACE"," ",95],["T_CONSTANT_ENCAPSED_STRING","''",95],",",["T_WHITESPACE"," ",95],["T_STRING","false",95],")",";",["T_WHITESPACE","\n        ",95],["T_VARIABLE","$this",96],["T_OBJECT_OPERATOR","->",96],["T_STRING","utility",96],["T_WHITESPACE"," ",96],"=",["T_WHITESPACE"," ",96],["T_VARIABLE","$this",96],["T_OBJECT_OPERATOR","->",96],["T_STRING","getMock",96],"(",["T_NS_SEPARATOR","\\",96],["T_STRING","Magento",96],["T_NS_SEPARATOR","\\",96],["T_STRING","SalesRule",96],["T_NS_SEPARATOR","\\",96],["T_STRING","Model",96],["T_NS_SEPARATOR","\\",96],["T_STRING","Utility",96],["T_DOUBLE_COLON","::",96],["T_CLASS","class",96],",",["T_WHITESPACE"," ",96],"[","]",",",["T_WHITESPACE"," ",96],"[","]",",",["T_WHITESPACE"," ",96],["T_CONSTANT_ENCAPSED_STRING","''",96],",",["T_WHITESPACE"," ",96],["T_STRING","false",96],")",";",["T_WHITESPACE","\n        ",96],["T_VARIABLE","$this",97],["T_OBJECT_OPERATOR","->",97],["T_STRING","validators",97],["T_WHITESPACE"," ",97],"=",["T_WHITESPACE"," ",97],["T_VARIABLE","$this",97],["T_OBJECT_OPERATOR","->",97],["T_STRING","getMock",97],"(",["T_WHITESPACE","\n            ",97],["T_NS_SEPARATOR","\\",98],["T_STRING","Magento",98],["T_NS_SEPARATOR","\\",98],["T_STRING","SalesRule",98],["T_NS_SEPARATOR","\\",98],["T_STRING","Model",98],["T_NS_SEPARATOR","\\",98],["T_STRING","Validator",98],["T_NS_SEPARATOR","\\",98],["T_STRING","Pool",98],["T_DOUBLE_COLON","::",98],["T_CLASS","class",98],",",["T_WHITESPACE","\n            ",98],"[",["T_CONSTANT_ENCAPSED_STRING","'getValidators'",99],"]",",",["T_WHITESPACE","\n            ",99],"[","]",",",["T_WHITESPACE","\n            ",100],["T_CONSTANT_ENCAPSED_STRING","''",101],",",["T_WHITESPACE","\n            ",101],["T_STRING","false",102],["T_WHITESPACE","\n        ",102],")",";",["T_WHITESPACE","\n        ",103],["T_VARIABLE","$this",104],["T_OBJECT_OPERATOR","->",104],["T_STRING","messageManager",104],["T_WHITESPACE"," ",104],"=",["T_WHITESPACE"," ",104],["T_VARIABLE","$this",104],["T_OBJECT_OPERATOR","->",104],["T_STRING","getMock",104],"(",["T_NS_SEPARATOR","\\",104],["T_STRING","Magento",104],["T_NS_SEPARATOR","\\",104],["T_STRING","Framework",104],["T_NS_SEPARATOR","\\",104],["T_STRING","Message",104],["T_NS_SEPARATOR","\\",104],["T_STRING","Manager",104],["T_DOUBLE_COLON","::",104],["T_CLASS","class",104],",",["T_WHITESPACE"," ",104],"[","]",",",["T_WHITESPACE"," ",104],"[","]",",",["T_WHITESPACE"," ",104],["T_CONSTANT_ENCAPSED_STRING","''",104],",",["T_WHITESPACE"," ",104],["T_STRING","false",104],")",";",["T_WHITESPACE","\n        ",104],["T_VARIABLE","$this",105],["T_OBJECT_OPERATOR","->",105],["T_STRING","ruleCollection",105],["T_WHITESPACE"," ",105],"=",["T_WHITESPACE"," ",105],["T_VARIABLE","$this",105],["T_OBJECT_OPERATOR","->",105],["T_STRING","getMockBuilder",105],"(",["T_NS_SEPARATOR","\\",105],["T_STRING","Magento",105],["T_NS_SEPARATOR","\\",105],["T_STRING","SalesRule",105],["T_NS_SEPARATOR","\\",105],["T_STRING","Model",105],["T_NS_SEPARATOR","\\",105],["T_STRING","ResourceModel",105],["T_NS_SEPARATOR","\\",105],["T_STRING","Rule",105],["T_NS_SEPARATOR","\\",105],["T_STRING","Collection",105],["T_DOUBLE_COLON","::",105],["T_CLASS","class",105],")",["T_WHITESPACE","\n            ",105],["T_OBJECT_OPERATOR","->",106],["T_STRING","disableOriginalConstructor",106],"(",")",["T_WHITESPACE","\n            ",106],["T_OBJECT_OPERATOR","->",107],["T_STRING","getMock",107],"(",")",";",["T_WHITESPACE","\n        ",107],["T_VARIABLE","$ruleCollectionFactoryMock",108],["T_WHITESPACE"," ",108],"=",["T_WHITESPACE"," ",108],["T_VARIABLE","$this",108],["T_OBJECT_OPERATOR","->",108],["T_STRING","prepareRuleCollectionMock",108],"(",["T_VARIABLE","$this",108],["T_OBJECT_OPERATOR","->",108],["T_STRING","ruleCollection",108],")",";",["T_WHITESPACE","\n\n        ",108],["T_DOC_COMMENT","\/** @var \\Magento\\SalesRule\\Model\\Validator|\\PHPUnit_Framework_MockObject_MockObject $validator *\/",110],["T_WHITESPACE","\n        ",110],["T_VARIABLE","$this",111],["T_OBJECT_OPERATOR","->",111],["T_STRING","model",111],["T_WHITESPACE"," ",111],"=",["T_WHITESPACE"," ",111],["T_VARIABLE","$this",111],["T_OBJECT_OPERATOR","->",111],["T_STRING","helper",111],["T_OBJECT_OPERATOR","->",111],["T_STRING","getObject",111],"(",["T_WHITESPACE","\n            ",111],["T_NS_SEPARATOR","\\",112],["T_STRING","Magento",112],["T_NS_SEPARATOR","\\",112],["T_STRING","SalesRule",112],["T_NS_SEPARATOR","\\",112],["T_STRING","Model",112],["T_NS_SEPARATOR","\\",112],["T_STRING","Validator",112],["T_DOUBLE_COLON","::",112],["T_CLASS","class",112],",",["T_WHITESPACE","\n            ",112],"[",["T_WHITESPACE","\n                ",113],["T_CONSTANT_ENCAPSED_STRING","'context'",114],["T_WHITESPACE"," ",114],["T_DOUBLE_ARROW","=>",114],["T_WHITESPACE"," ",114],["T_VARIABLE","$context",114],",",["T_WHITESPACE","\n                ",114],["T_CONSTANT_ENCAPSED_STRING","'registry'",115],["T_WHITESPACE"," ",115],["T_DOUBLE_ARROW","=>",115],["T_WHITESPACE"," ",115],["T_VARIABLE","$registry",115],",",["T_WHITESPACE","\n                ",115],["T_CONSTANT_ENCAPSED_STRING","'collectionFactory'",116],["T_WHITESPACE"," ",116],["T_DOUBLE_ARROW","=>",116],["T_WHITESPACE"," ",116],["T_VARIABLE","$ruleCollectionFactoryMock",116],",",["T_WHITESPACE","\n                ",116],["T_CONSTANT_ENCAPSED_STRING","'catalogData'",117],["T_WHITESPACE"," ",117],["T_DOUBLE_ARROW","=>",117],["T_WHITESPACE"," ",117],["T_VARIABLE","$this",117],["T_OBJECT_OPERATOR","->",117],["T_STRING","catalogData",117],",",["T_WHITESPACE","\n                ",117],["T_CONSTANT_ENCAPSED_STRING","'utility'",118],["T_WHITESPACE"," ",118],["T_DOUBLE_ARROW","=>",118],["T_WHITESPACE"," ",118],["T_VARIABLE","$this",118],["T_OBJECT_OPERATOR","->",118],["T_STRING","utility",118],",",["T_WHITESPACE","\n                ",118],["T_CONSTANT_ENCAPSED_STRING","'rulesApplier'",119],["T_WHITESPACE"," ",119],["T_DOUBLE_ARROW","=>",119],["T_WHITESPACE"," ",119],["T_VARIABLE","$this",119],["T_OBJECT_OPERATOR","->",119],["T_STRING","rulesApplier",119],",",["T_WHITESPACE","\n                ",119],["T_CONSTANT_ENCAPSED_STRING","'validators'",120],["T_WHITESPACE"," ",120],["T_DOUBLE_ARROW","=>",120],["T_WHITESPACE"," ",120],["T_VARIABLE","$this",120],["T_OBJECT_OPERATOR","->",120],["T_STRING","validators",120],",",["T_WHITESPACE","\n                ",120],["T_CONSTANT_ENCAPSED_STRING","'messageManager'",121],["T_WHITESPACE"," ",121],["T_DOUBLE_ARROW","=>",121],["T_WHITESPACE"," ",121],["T_VARIABLE","$this",121],["T_OBJECT_OPERATOR","->",121],["T_STRING","messageManager",121],["T_WHITESPACE","\n            ",121],"]",["T_WHITESPACE","\n        ",122],")",";",["T_WHITESPACE","\n        ",123],["T_VARIABLE","$this",124],["T_OBJECT_OPERATOR","->",124],["T_STRING","model",124],["T_OBJECT_OPERATOR","->",124],["T_STRING","setWebsiteId",124],"(",["T_LNUMBER","1",124],")",";",["T_WHITESPACE","\n        ",124],["T_VARIABLE","$this",125],["T_OBJECT_OPERATOR","->",125],["T_STRING","model",125],["T_OBJECT_OPERATOR","->",125],["T_STRING","setCustomerGroupId",125],"(",["T_LNUMBER","2",125],")",";",["T_WHITESPACE","\n        ",125],["T_VARIABLE","$this",126],["T_OBJECT_OPERATOR","->",126],["T_STRING","model",126],["T_OBJECT_OPERATOR","->",126],["T_STRING","setCouponCode",126],"(",["T_CONSTANT_ENCAPSED_STRING","'code'",126],")",";",["T_WHITESPACE","\n        ",126],["T_VARIABLE","$this",127],["T_OBJECT_OPERATOR","->",127],["T_STRING","ruleCollection",127],["T_OBJECT_OPERATOR","->",127],["T_STRING","expects",127],"(",["T_VARIABLE","$this",127],["T_OBJECT_OPERATOR","->",127],["T_STRING","any",127],"(",")",")",["T_WHITESPACE","\n            ",127],["T_OBJECT_OPERATOR","->",128],["T_STRING","method",128],"(",["T_CONSTANT_ENCAPSED_STRING","'setValidationFilter'",128],")",["T_WHITESPACE","\n            ",128],["T_OBJECT_OPERATOR","->",129],["T_STRING","with",129],"(",["T_WHITESPACE","\n                ",129],["T_VARIABLE","$this",130],["T_OBJECT_OPERATOR","->",130],["T_STRING","model",130],["T_OBJECT_OPERATOR","->",130],["T_STRING","getWebsiteId",130],"(",")",",",["T_WHITESPACE","\n                ",130],["T_VARIABLE","$this",131],["T_OBJECT_OPERATOR","->",131],["T_STRING","model",131],["T_OBJECT_OPERATOR","->",131],["T_STRING","getCustomerGroupId",131],"(",")",",",["T_WHITESPACE","\n                ",131],["T_VARIABLE","$this",132],["T_OBJECT_OPERATOR","->",132],["T_STRING","model",132],["T_OBJECT_OPERATOR","->",132],["T_STRING","getCouponCode",132],"(",")",",",["T_WHITESPACE","\n                ",132],["T_STRING","null",133],",",["T_WHITESPACE","\n                ",133],["T_VARIABLE","$this",134],["T_OBJECT_OPERATOR","->",134],["T_STRING","addressMock",134],["T_WHITESPACE","\n            ",134],")",["T_WHITESPACE","\n            ",135],["T_OBJECT_OPERATOR","->",136],["T_STRING","willReturnSelf",136],"(",")",";",["T_WHITESPACE","\n    ",136],"}",["T_WHITESPACE","\n\n    ",137],["T_DOC_COMMENT","\/**\n     * @return \\Magento\\Quote\\Model\\Quote\\Item|\\PHPUnit_Framework_MockObject_MockObject\n     *\/",139],["T_WHITESPACE","\n    ",141],["T_PROTECTED","protected",142],["T_WHITESPACE"," ",142],["T_FUNCTION","function",142],["T_WHITESPACE"," ",142],["T_STRING","getQuoteItemMock",142],"(",")",["T_WHITESPACE","\n    ",142],"{",["T_WHITESPACE","\n        ",143],["T_VARIABLE","$fixturePath",144],["T_WHITESPACE"," ",144],"=",["T_WHITESPACE"," ",144],["T_DIR","__DIR__",144],["T_WHITESPACE"," ",144],".",["T_WHITESPACE"," ",144],["T_CONSTANT_ENCAPSED_STRING","'\/_files\/'",144],";",["T_WHITESPACE","\n        ",144],["T_VARIABLE","$itemDownloadable",145],["T_WHITESPACE"," ",145],"=",["T_WHITESPACE"," ",145],["T_VARIABLE","$this",145],["T_OBJECT_OPERATOR","->",145],["T_STRING","getMock",145],"(",["T_WHITESPACE","\n            ",145],["T_NS_SEPARATOR","\\",146],["T_STRING","Magento",146],["T_NS_SEPARATOR","\\",146],["T_STRING","Quote",146],["T_NS_SEPARATOR","\\",146],["T_STRING","Model",146],["T_NS_SEPARATOR","\\",146],["T_STRING","Quote",146],["T_NS_SEPARATOR","\\",146],["T_STRING","Item",146],["T_DOUBLE_COLON","::",146],["T_CLASS","class",146],",",["T_WHITESPACE","\n            ",146],"[",["T_CONSTANT_ENCAPSED_STRING","'getAddress'",147],",",["T_WHITESPACE"," ",147],["T_CONSTANT_ENCAPSED_STRING","'__wakeup'",147],"]",",",["T_WHITESPACE","\n            ",147],"[","]",",",["T_WHITESPACE","\n            ",148],["T_CONSTANT_ENCAPSED_STRING","''",149],",",["T_WHITESPACE","\n            ",149],["T_STRING","false",150],["T_WHITESPACE","\n        ",150],")",";",["T_WHITESPACE","\n        ",151],["T_VARIABLE","$itemDownloadable",152],["T_OBJECT_OPERATOR","->",152],["T_STRING","expects",152],"(",["T_VARIABLE","$this",152],["T_OBJECT_OPERATOR","->",152],["T_STRING","any",152],"(",")",")",["T_OBJECT_OPERATOR","->",152],["T_STRING","method",152],"(",["T_CONSTANT_ENCAPSED_STRING","'getAddress'",152],")",["T_OBJECT_OPERATOR","->",152],["T_STRING","will",152],"(",["T_VARIABLE","$this",152],["T_OBJECT_OPERATOR","->",152],["T_STRING","returnValue",152],"(",["T_VARIABLE","$this",152],["T_OBJECT_OPERATOR","->",152],["T_STRING","addressMock",152],")",")",";",["T_WHITESPACE","\n\n        ",152],["T_VARIABLE","$itemSimple",154],["T_WHITESPACE"," ",154],"=",["T_WHITESPACE"," ",154],["T_VARIABLE","$this",154],["T_OBJECT_OPERATOR","->",154],["T_STRING","getMock",154],"(",["T_WHITESPACE","\n            ",154],["T_NS_SEPARATOR","\\",155],["T_STRING","Magento",155],["T_NS_SEPARATOR","\\",155],["T_STRING","Quote",155],["T_NS_SEPARATOR","\\",155],["T_STRING","Model",155],["T_NS_SEPARATOR","\\",155],["T_STRING","Quote",155],["T_NS_SEPARATOR","\\",155],["T_STRING","Item",155],["T_DOUBLE_COLON","::",155],["T_CLASS","class",155],",",["T_WHITESPACE","\n            ",155],"[",["T_CONSTANT_ENCAPSED_STRING","'getAddress'",156],",",["T_WHITESPACE"," ",156],["T_CONSTANT_ENCAPSED_STRING","'__wakeup'",156],"]",",",["T_WHITESPACE","\n            ",156],"[","]",",",["T_WHITESPACE","\n            ",157],["T_CONSTANT_ENCAPSED_STRING","''",158],",",["T_WHITESPACE","\n            ",158],["T_STRING","false",159],["T_WHITESPACE","\n        ",159],")",";",["T_WHITESPACE","\n        ",160],["T_VARIABLE","$itemSimple",161],["T_OBJECT_OPERATOR","->",161],["T_STRING","expects",161],"(",["T_VARIABLE","$this",161],["T_OBJECT_OPERATOR","->",161],["T_STRING","any",161],"(",")",")",["T_OBJECT_OPERATOR","->",161],["T_STRING","method",161],"(",["T_CONSTANT_ENCAPSED_STRING","'getAddress'",161],")",["T_OBJECT_OPERATOR","->",161],["T_STRING","will",161],"(",["T_VARIABLE","$this",161],["T_OBJECT_OPERATOR","->",161],["T_STRING","returnValue",161],"(",["T_VARIABLE","$this",161],["T_OBJECT_OPERATOR","->",161],["T_STRING","addressMock",161],")",")",";",["T_WHITESPACE","\n\n        ",161],["T_DOC_COMMENT","\/** @var $quote \\Magento\\Quote\\Model\\Quote *\/",163],["T_WHITESPACE","\n        ",163],["T_VARIABLE","$quote",164],["T_WHITESPACE"," ",164],"=",["T_WHITESPACE"," ",164],["T_VARIABLE","$this",164],["T_OBJECT_OPERATOR","->",164],["T_STRING","getMock",164],"(",["T_WHITESPACE","\n            ",164],["T_NS_SEPARATOR","\\",165],["T_STRING","Magento",165],["T_NS_SEPARATOR","\\",165],["T_STRING","Quote",165],["T_NS_SEPARATOR","\\",165],["T_STRING","Model",165],["T_NS_SEPARATOR","\\",165],["T_STRING","Quote",165],["T_DOUBLE_COLON","::",165],["T_CLASS","class",165],",",["T_WHITESPACE","\n            ",165],"[",["T_CONSTANT_ENCAPSED_STRING","'getStoreId'",166],",",["T_WHITESPACE"," ",166],["T_CONSTANT_ENCAPSED_STRING","'__wakeup'",166],"]",",",["T_WHITESPACE","\n            ",166],"[","]",",",["T_WHITESPACE","\n            ",167],["T_CONSTANT_ENCAPSED_STRING","''",168],",",["T_WHITESPACE","\n            ",168],["T_STRING","false",169],["T_WHITESPACE","\n        ",169],")",";",["T_WHITESPACE","\n        ",170],["T_VARIABLE","$quote",171],["T_OBJECT_OPERATOR","->",171],["T_STRING","expects",171],"(",["T_VARIABLE","$this",171],["T_OBJECT_OPERATOR","->",171],["T_STRING","any",171],"(",")",")",["T_OBJECT_OPERATOR","->",171],["T_STRING","method",171],"(",["T_CONSTANT_ENCAPSED_STRING","'getStoreId'",171],")",["T_OBJECT_OPERATOR","->",171],["T_STRING","will",171],"(",["T_VARIABLE","$this",171],["T_OBJECT_OPERATOR","->",171],["T_STRING","returnValue",171],"(",["T_LNUMBER","1",171],")",")",";",["T_WHITESPACE","\n\n        ",171],["T_VARIABLE","$itemData",173],["T_WHITESPACE"," ",173],"=",["T_WHITESPACE"," ",173],["T_INCLUDE","include",173],["T_WHITESPACE"," ",173],["T_VARIABLE","$fixturePath",173],["T_WHITESPACE"," ",173],".",["T_WHITESPACE"," ",173],["T_CONSTANT_ENCAPSED_STRING","'quote_item_downloadable.php'",173],";",["T_WHITESPACE","\n        ",173],["T_VARIABLE","$itemDownloadable",174],["T_OBJECT_OPERATOR","->",174],["T_STRING","addData",174],"(",["T_VARIABLE","$itemData",174],")",";",["T_WHITESPACE","\n        ",174],["T_VARIABLE","$quote",175],["T_OBJECT_OPERATOR","->",175],["T_STRING","addItem",175],"(",["T_VARIABLE","$itemDownloadable",175],")",";",["T_WHITESPACE","\n\n        ",175],["T_VARIABLE","$itemData",177],["T_WHITESPACE"," ",177],"=",["T_WHITESPACE"," ",177],["T_INCLUDE","include",177],["T_WHITESPACE"," ",177],["T_VARIABLE","$fixturePath",177],["T_WHITESPACE"," ",177],".",["T_WHITESPACE"," ",177],["T_CONSTANT_ENCAPSED_STRING","'quote_item_simple.php'",177],";",["T_WHITESPACE","\n        ",177],["T_VARIABLE","$itemSimple",178],["T_OBJECT_OPERATOR","->",178],["T_STRING","addData",178],"(",["T_VARIABLE","$itemData",178],")",";",["T_WHITESPACE","\n        ",178],["T_VARIABLE","$quote",179],["T_OBJECT_OPERATOR","->",179],["T_STRING","addItem",179],"(",["T_VARIABLE","$itemSimple",179],")",";",["T_WHITESPACE","\n\n        ",179],["T_RETURN","return",181],["T_WHITESPACE"," ",181],["T_VARIABLE","$itemDownloadable",181],";",["T_WHITESPACE","\n    ",181],"}",["T_WHITESPACE","\n\n    ",182],["T_PUBLIC","public",184],["T_WHITESPACE"," ",184],["T_FUNCTION","function",184],["T_WHITESPACE"," ",184],["T_STRING","testCanApplyRules",184],"(",")",["T_WHITESPACE","\n    ",184],"{",["T_WHITESPACE","\n        ",185],["T_VARIABLE","$this",186],["T_OBJECT_OPERATOR","->",186],["T_STRING","model",186],["T_OBJECT_OPERATOR","->",186],["T_STRING","init",186],"(",["T_WHITESPACE","\n            ",186],["T_VARIABLE","$this",187],["T_OBJECT_OPERATOR","->",187],["T_STRING","model",187],["T_OBJECT_OPERATOR","->",187],["T_STRING","getWebsiteId",187],"(",")",",",["T_WHITESPACE","\n            ",187],["T_VARIABLE","$this",188],["T_OBJECT_OPERATOR","->",188],["T_STRING","model",188],["T_OBJECT_OPERATOR","->",188],["T_STRING","getCustomerGroupId",188],"(",")",",",["T_WHITESPACE","\n            ",188],["T_VARIABLE","$this",189],["T_OBJECT_OPERATOR","->",189],["T_STRING","model",189],["T_OBJECT_OPERATOR","->",189],["T_STRING","getCouponCode",189],"(",")",["T_WHITESPACE","\n        ",189],")",";",["T_WHITESPACE","\n        ",190],["T_VARIABLE","$item",191],["T_WHITESPACE"," ",191],"=",["T_WHITESPACE"," ",191],["T_VARIABLE","$this",191],["T_OBJECT_OPERATOR","->",191],["T_STRING","getQuoteItemMock",191],"(",")",";",["T_WHITESPACE","\n        ",191],["T_VARIABLE","$rule",192],["T_WHITESPACE"," ",192],"=",["T_WHITESPACE"," ",192],["T_VARIABLE","$this",192],["T_OBJECT_OPERATOR","->",192],["T_STRING","getMock",192],"(",["T_WHITESPACE","\n            ",192],["T_NS_SEPARATOR","\\",193],["T_STRING","Magento",193],["T_NS_SEPARATOR","\\",193],["T_STRING","SalesRule",193],["T_NS_SEPARATOR","\\",193],["T_STRING","Model",193],["T_NS_SEPARATOR","\\",193],["T_STRING","Rule",193],["T_DOUBLE_COLON","::",193],["T_CLASS","class",193],",",["T_WHITESPACE","\n            ",193],"[","]",",",["T_WHITESPACE","\n            ",194],"[","]",",",["T_WHITESPACE","\n            ",195],["T_CONSTANT_ENCAPSED_STRING","''",196],",",["T_WHITESPACE","\n            ",196],["T_STRING","false",197],["T_WHITESPACE","\n        ",197],")",";",["T_WHITESPACE","\n        ",198],["T_VARIABLE","$actionsCollection",199],["T_WHITESPACE"," ",199],"=",["T_WHITESPACE"," ",199],["T_VARIABLE","$this",199],["T_OBJECT_OPERATOR","->",199],["T_STRING","getMock",199],"(",["T_NS_SEPARATOR","\\",199],["T_STRING","Magento",199],["T_NS_SEPARATOR","\\",199],["T_STRING","Rule",199],["T_NS_SEPARATOR","\\",199],["T_STRING","Model",199],["T_NS_SEPARATOR","\\",199],["T_STRING","Action",199],["T_NS_SEPARATOR","\\",199],["T_STRING","Collection",199],["T_DOUBLE_COLON","::",199],["T_CLASS","class",199],",",["T_WHITESPACE"," ",199],"[",["T_CONSTANT_ENCAPSED_STRING","'validate'",199],"]",",",["T_WHITESPACE"," ",199],"[","]",",",["T_WHITESPACE"," ",199],["T_CONSTANT_ENCAPSED_STRING","''",199],",",["T_WHITESPACE"," ",199],["T_STRING","false",199],")",";",["T_WHITESPACE","\n        ",199],["T_VARIABLE","$actionsCollection",200],["T_OBJECT_OPERATOR","->",200],["T_STRING","expects",200],"(",["T_VARIABLE","$this",200],["T_OBJECT_OPERATOR","->",200],["T_STRING","any",200],"(",")",")",["T_WHITESPACE","\n            ",200],["T_OBJECT_OPERATOR","->",201],["T_STRING","method",201],"(",["T_CONSTANT_ENCAPSED_STRING","'validate'",201],")",["T_WHITESPACE","\n            ",201],["T_OBJECT_OPERATOR","->",202],["T_STRING","with",202],"(",["T_VARIABLE","$item",202],")",["T_WHITESPACE","\n            ",202],["T_OBJECT_OPERATOR","->",203],["T_STRING","willReturn",203],"(",["T_STRING","true",203],")",";",["T_WHITESPACE","\n        ",203],["T_VARIABLE","$rule",204],["T_OBJECT_OPERATOR","->",204],["T_STRING","expects",204],"(",["T_VARIABLE","$this",204],["T_OBJECT_OPERATOR","->",204],["T_STRING","any",204],"(",")",")",["T_WHITESPACE","\n            ",204],["T_OBJECT_OPERATOR","->",205],["T_STRING","method",205],"(",["T_CONSTANT_ENCAPSED_STRING","'getActions'",205],")",["T_WHITESPACE","\n            ",205],["T_OBJECT_OPERATOR","->",206],["T_STRING","willReturn",206],"(",["T_VARIABLE","$actionsCollection",206],")",";",["T_WHITESPACE","\n        ",206],["T_VARIABLE","$iterator",207],["T_WHITESPACE"," ",207],"=",["T_WHITESPACE"," ",207],["T_NEW","new",207],["T_WHITESPACE"," ",207],["T_NS_SEPARATOR","\\",207],["T_STRING","ArrayIterator",207],"(","[",["T_VARIABLE","$rule",207],"]",")",";",["T_WHITESPACE","\n        ",207],["T_VARIABLE","$this",208],["T_OBJECT_OPERATOR","->",208],["T_STRING","ruleCollection",208],["T_OBJECT_OPERATOR","->",208],["T_STRING","expects",208],"(",["T_VARIABLE","$this",208],["T_OBJECT_OPERATOR","->",208],["T_STRING","any",208],"(",")",")",["T_WHITESPACE","\n            ",208],["T_OBJECT_OPERATOR","->",209],["T_STRING","method",209],"(",["T_CONSTANT_ENCAPSED_STRING","'getIterator'",209],")",["T_WHITESPACE","\n            ",209],["T_OBJECT_OPERATOR","->",210],["T_STRING","willReturn",210],"(",["T_VARIABLE","$iterator",210],")",";",["T_WHITESPACE","\n\n        ",210],["T_VARIABLE","$this",212],["T_OBJECT_OPERATOR","->",212],["T_STRING","utility",212],["T_OBJECT_OPERATOR","->",212],["T_STRING","expects",212],"(",["T_VARIABLE","$this",212],["T_OBJECT_OPERATOR","->",212],["T_STRING","any",212],"(",")",")",["T_WHITESPACE","\n            ",212],["T_OBJECT_OPERATOR","->",213],["T_STRING","method",213],"(",["T_CONSTANT_ENCAPSED_STRING","'canProcessRule'",213],")",["T_WHITESPACE","\n            ",213],["T_OBJECT_OPERATOR","->",214],["T_STRING","with",214],"(",["T_VARIABLE","$rule",214],",",["T_WHITESPACE"," ",214],["T_VARIABLE","$this",214],["T_OBJECT_OPERATOR","->",214],["T_STRING","anything",214],"(",")",")",["T_WHITESPACE","\n            ",214],["T_OBJECT_OPERATOR","->",215],["T_STRING","willReturn",215],"(",["T_STRING","true",215],")",";",["T_WHITESPACE","\n\n        ",215],["T_VARIABLE","$quote",217],["T_WHITESPACE"," ",217],"=",["T_WHITESPACE"," ",217],["T_VARIABLE","$item",217],["T_OBJECT_OPERATOR","->",217],["T_STRING","getQuote",217],"(",")",";",["T_WHITESPACE","\n        ",217],["T_VARIABLE","$quote",218],["T_OBJECT_OPERATOR","->",218],["T_STRING","setItemsQty",218],"(",["T_LNUMBER","2",218],")",";",["T_WHITESPACE","\n        ",218],["T_VARIABLE","$quote",219],["T_OBJECT_OPERATOR","->",219],["T_STRING","setVirtualItemsQty",219],"(",["T_LNUMBER","1",219],")",";",["T_WHITESPACE","\n\n        ",219],["T_VARIABLE","$this",221],["T_OBJECT_OPERATOR","->",221],["T_STRING","assertTrue",221],"(",["T_VARIABLE","$this",221],["T_OBJECT_OPERATOR","->",221],["T_STRING","model",221],["T_OBJECT_OPERATOR","->",221],["T_STRING","canApplyRules",221],"(",["T_VARIABLE","$item",221],")",")",";",["T_WHITESPACE","\n\n        ",221],["T_VARIABLE","$quote",223],["T_OBJECT_OPERATOR","->",223],["T_STRING","setItemsQty",223],"(",["T_LNUMBER","2",223],")",";",["T_WHITESPACE","\n        ",223],["T_VARIABLE","$quote",224],["T_OBJECT_OPERATOR","->",224],["T_STRING","setVirtualItemsQty",224],"(",["T_LNUMBER","2",224],")",";",["T_WHITESPACE","\n\n        ",224],["T_VARIABLE","$this",226],["T_OBJECT_OPERATOR","->",226],["T_STRING","assertTrue",226],"(",["T_VARIABLE","$this",226],["T_OBJECT_OPERATOR","->",226],["T_STRING","model",226],["T_OBJECT_OPERATOR","->",226],["T_STRING","canApplyRules",226],"(",["T_VARIABLE","$item",226],")",")",";",["T_WHITESPACE","\n    ",226],"}",["T_WHITESPACE","\n\n    ",227],["T_PUBLIC","public",229],["T_WHITESPACE"," ",229],["T_FUNCTION","function",229],["T_WHITESPACE"," ",229],["T_STRING","testProcess",229],"(",")",["T_WHITESPACE","\n    ",229],"{",["T_WHITESPACE","\n        ",230],["T_VARIABLE","$negativePrice",231],["T_WHITESPACE"," ",231],"=",["T_WHITESPACE"," ",231],"-",["T_LNUMBER","1",231],";",["T_WHITESPACE","\n\n        ",231],["T_VARIABLE","$this",233],["T_OBJECT_OPERATOR","->",233],["T_STRING","item",233],["T_OBJECT_OPERATOR","->",233],["T_STRING","setDiscountCalculationPrice",233],"(",["T_VARIABLE","$negativePrice",233],")",";",["T_WHITESPACE","\n        ",233],["T_VARIABLE","$this",234],["T_OBJECT_OPERATOR","->",234],["T_STRING","item",234],["T_OBJECT_OPERATOR","->",234],["T_STRING","setData",234],"(",["T_CONSTANT_ENCAPSED_STRING","'calculation_price'",234],",",["T_WHITESPACE"," ",234],["T_VARIABLE","$negativePrice",234],")",";",["T_WHITESPACE","\n\n        ",234],["T_VARIABLE","$this",236],["T_OBJECT_OPERATOR","->",236],["T_STRING","rulesApplier",236],["T_OBJECT_OPERATOR","->",236],["T_STRING","expects",236],"(",["T_VARIABLE","$this",236],["T_OBJECT_OPERATOR","->",236],["T_STRING","never",236],"(",")",")",["T_OBJECT_OPERATOR","->",236],["T_STRING","method",236],"(",["T_CONSTANT_ENCAPSED_STRING","'applyRules'",236],")",";",["T_WHITESPACE","\n\n        ",236],["T_VARIABLE","$this",238],["T_OBJECT_OPERATOR","->",238],["T_STRING","model",238],["T_OBJECT_OPERATOR","->",238],["T_STRING","init",238],"(",["T_WHITESPACE","\n            ",238],["T_VARIABLE","$this",239],["T_OBJECT_OPERATOR","->",239],["T_STRING","model",239],["T_OBJECT_OPERATOR","->",239],["T_STRING","getWebsiteId",239],"(",")",",",["T_WHITESPACE","\n            ",239],["T_VARIABLE","$this",240],["T_OBJECT_OPERATOR","->",240],["T_STRING","model",240],["T_OBJECT_OPERATOR","->",240],["T_STRING","getCustomerGroupId",240],"(",")",",",["T_WHITESPACE","\n            ",240],["T_VARIABLE","$this",241],["T_OBJECT_OPERATOR","->",241],["T_STRING","model",241],["T_OBJECT_OPERATOR","->",241],["T_STRING","getCouponCode",241],"(",")",["T_WHITESPACE","\n        ",241],")",";",["T_WHITESPACE","\n        ",242],["T_VARIABLE","$this",243],["T_OBJECT_OPERATOR","->",243],["T_STRING","model",243],["T_OBJECT_OPERATOR","->",243],["T_STRING","process",243],"(",["T_VARIABLE","$this",243],["T_OBJECT_OPERATOR","->",243],["T_STRING","item",243],")",";",["T_WHITESPACE","\n    ",243],"}",["T_WHITESPACE","\n\n    ",244],["T_PUBLIC","public",246],["T_WHITESPACE"," ",246],["T_FUNCTION","function",246],["T_WHITESPACE"," ",246],["T_STRING","testProcessWhenItemPriceIsNegativeDiscountsAreZeroed",246],"(",")",["T_WHITESPACE","\n    ",246],"{",["T_WHITESPACE","\n        ",247],["T_VARIABLE","$negativePrice",248],["T_WHITESPACE"," ",248],"=",["T_WHITESPACE"," ",248],"-",["T_LNUMBER","1",248],";",["T_WHITESPACE","\n        ",248],["T_VARIABLE","$nonZeroDiscount",249],["T_WHITESPACE"," ",249],"=",["T_WHITESPACE"," ",249],["T_LNUMBER","123",249],";",["T_WHITESPACE","\n        ",249],["T_VARIABLE","$this",250],["T_OBJECT_OPERATOR","->",250],["T_STRING","model",250],["T_OBJECT_OPERATOR","->",250],["T_STRING","init",250],"(",["T_WHITESPACE","\n            ",250],["T_VARIABLE","$this",251],["T_OBJECT_OPERATOR","->",251],["T_STRING","model",251],["T_OBJECT_OPERATOR","->",251],["T_STRING","getWebsiteId",251],"(",")",",",["T_WHITESPACE","\n            ",251],["T_VARIABLE","$this",252],["T_OBJECT_OPERATOR","->",252],["T_STRING","model",252],["T_OBJECT_OPERATOR","->",252],["T_STRING","getCustomerGroupId",252],"(",")",",",["T_WHITESPACE","\n            ",252],["T_VARIABLE","$this",253],["T_OBJECT_OPERATOR","->",253],["T_STRING","model",253],["T_OBJECT_OPERATOR","->",253],["T_STRING","getCouponCode",253],"(",")",["T_WHITESPACE","\n        ",253],")",";",["T_WHITESPACE","\n\n        ",254],["T_VARIABLE","$this",256],["T_OBJECT_OPERATOR","->",256],["T_STRING","item",256],["T_OBJECT_OPERATOR","->",256],["T_STRING","setDiscountCalculationPrice",256],"(",["T_VARIABLE","$negativePrice",256],")",";",["T_WHITESPACE","\n        ",256],["T_VARIABLE","$this",257],["T_OBJECT_OPERATOR","->",257],["T_STRING","item",257],["T_OBJECT_OPERATOR","->",257],["T_STRING","setData",257],"(",["T_CONSTANT_ENCAPSED_STRING","'calculation_price'",257],",",["T_WHITESPACE"," ",257],["T_VARIABLE","$negativePrice",257],")",";",["T_WHITESPACE","\n\n        ",257],["T_VARIABLE","$this",259],["T_OBJECT_OPERATOR","->",259],["T_STRING","item",259],["T_OBJECT_OPERATOR","->",259],["T_STRING","setDiscountAmount",259],"(",["T_VARIABLE","$nonZeroDiscount",259],")",";",["T_WHITESPACE","\n        ",259],["T_VARIABLE","$this",260],["T_OBJECT_OPERATOR","->",260],["T_STRING","item",260],["T_OBJECT_OPERATOR","->",260],["T_STRING","setBaseDiscountAmount",260],"(",["T_VARIABLE","$nonZeroDiscount",260],")",";",["T_WHITESPACE","\n        ",260],["T_VARIABLE","$this",261],["T_OBJECT_OPERATOR","->",261],["T_STRING","item",261],["T_OBJECT_OPERATOR","->",261],["T_STRING","setDiscountPercent",261],"(",["T_VARIABLE","$nonZeroDiscount",261],")",";",["T_WHITESPACE","\n\n        ",261],["T_VARIABLE","$this",263],["T_OBJECT_OPERATOR","->",263],["T_STRING","model",263],["T_OBJECT_OPERATOR","->",263],["T_STRING","process",263],"(",["T_VARIABLE","$this",263],["T_OBJECT_OPERATOR","->",263],["T_STRING","item",263],")",";",["T_WHITESPACE","\n\n        ",263],["T_VARIABLE","$this",265],["T_OBJECT_OPERATOR","->",265],["T_STRING","assertEquals",265],"(",["T_LNUMBER","0",265],",",["T_WHITESPACE"," ",265],["T_VARIABLE","$this",265],["T_OBJECT_OPERATOR","->",265],["T_STRING","item",265],["T_OBJECT_OPERATOR","->",265],["T_STRING","getDiscountAmount",265],"(",")",")",";",["T_WHITESPACE","\n        ",265],["T_VARIABLE","$this",266],["T_OBJECT_OPERATOR","->",266],["T_STRING","assertEquals",266],"(",["T_LNUMBER","0",266],",",["T_WHITESPACE"," ",266],["T_VARIABLE","$this",266],["T_OBJECT_OPERATOR","->",266],["T_STRING","item",266],["T_OBJECT_OPERATOR","->",266],["T_STRING","getBaseDiscountAmount",266],"(",")",")",";",["T_WHITESPACE","\n        ",266],["T_VARIABLE","$this",267],["T_OBJECT_OPERATOR","->",267],["T_STRING","assertEquals",267],"(",["T_LNUMBER","0",267],",",["T_WHITESPACE"," ",267],["T_VARIABLE","$this",267],["T_OBJECT_OPERATOR","->",267],["T_STRING","item",267],["T_OBJECT_OPERATOR","->",267],["T_STRING","getDiscountPercent",267],"(",")",")",";",["T_WHITESPACE","\n    ",267],"}",["T_WHITESPACE","\n\n    ",268],["T_PUBLIC","public",270],["T_WHITESPACE"," ",270],["T_FUNCTION","function",270],["T_WHITESPACE"," ",270],["T_STRING","testApplyRulesThatAppliedRuleIdsAreCollected",270],"(",")",["T_WHITESPACE","\n    ",270],"{",["T_WHITESPACE","\n        ",271],["T_VARIABLE","$positivePrice",272],["T_WHITESPACE"," ",272],"=",["T_WHITESPACE"," ",272],["T_LNUMBER","1",272],";",["T_WHITESPACE","\n        ",272],["T_VARIABLE","$ruleId1",273],["T_WHITESPACE"," ",273],"=",["T_WHITESPACE"," ",273],["T_LNUMBER","123",273],";",["T_WHITESPACE","\n        ",273],["T_VARIABLE","$ruleId2",274],["T_WHITESPACE"," ",274],"=",["T_WHITESPACE"," ",274],["T_LNUMBER","234",274],";",["T_WHITESPACE","\n        ",274],["T_VARIABLE","$expectedRuleIds",275],["T_WHITESPACE"," ",275],"=",["T_WHITESPACE"," ",275],"[",["T_VARIABLE","$ruleId1",275],["T_WHITESPACE"," ",275],["T_DOUBLE_ARROW","=>",275],["T_WHITESPACE"," ",275],["T_VARIABLE","$ruleId1",275],",",["T_WHITESPACE"," ",275],["T_VARIABLE","$ruleId2",275],["T_WHITESPACE"," ",275],["T_DOUBLE_ARROW","=>",275],["T_WHITESPACE"," ",275],["T_VARIABLE","$ruleId2",275],"]",";",["T_WHITESPACE","\n        ",275],["T_VARIABLE","$this",276],["T_OBJECT_OPERATOR","->",276],["T_STRING","model",276],["T_OBJECT_OPERATOR","->",276],["T_STRING","init",276],"(",["T_WHITESPACE","\n            ",276],["T_VARIABLE","$this",277],["T_OBJECT_OPERATOR","->",277],["T_STRING","model",277],["T_OBJECT_OPERATOR","->",277],["T_STRING","getWebsiteId",277],"(",")",",",["T_WHITESPACE","\n            ",277],["T_VARIABLE","$this",278],["T_OBJECT_OPERATOR","->",278],["T_STRING","model",278],["T_OBJECT_OPERATOR","->",278],["T_STRING","getCustomerGroupId",278],"(",")",",",["T_WHITESPACE","\n            ",278],["T_VARIABLE","$this",279],["T_OBJECT_OPERATOR","->",279],["T_STRING","model",279],["T_OBJECT_OPERATOR","->",279],["T_STRING","getCouponCode",279],"(",")",["T_WHITESPACE","\n        ",279],")",";",["T_WHITESPACE","\n\n        ",280],["T_VARIABLE","$this",282],["T_OBJECT_OPERATOR","->",282],["T_STRING","item",282],["T_OBJECT_OPERATOR","->",282],["T_STRING","setDiscountCalculationPrice",282],"(",["T_VARIABLE","$positivePrice",282],")",";",["T_WHITESPACE","\n        ",282],["T_VARIABLE","$this",283],["T_OBJECT_OPERATOR","->",283],["T_STRING","item",283],["T_OBJECT_OPERATOR","->",283],["T_STRING","setData",283],"(",["T_CONSTANT_ENCAPSED_STRING","'calculation_price'",283],",",["T_WHITESPACE"," ",283],["T_VARIABLE","$positivePrice",283],")",";",["T_WHITESPACE","\n        ",283],["T_VARIABLE","$this",284],["T_OBJECT_OPERATOR","->",284],["T_STRING","model",284],["T_OBJECT_OPERATOR","->",284],["T_STRING","setSkipActionsValidation",284],"(",["T_STRING","true",284],")",";",["T_WHITESPACE","\n\n        ",284],["T_VARIABLE","$this",286],["T_OBJECT_OPERATOR","->",286],["T_STRING","rulesApplier",286],["T_OBJECT_OPERATOR","->",286],["T_STRING","expects",286],"(",["T_VARIABLE","$this",286],["T_OBJECT_OPERATOR","->",286],["T_STRING","once",286],"(",")",")",["T_WHITESPACE","\n            ",286],["T_OBJECT_OPERATOR","->",287],["T_STRING","method",287],"(",["T_CONSTANT_ENCAPSED_STRING","'applyRules'",287],")",["T_WHITESPACE","\n            ",287],["T_OBJECT_OPERATOR","->",288],["T_STRING","with",288],"(",["T_WHITESPACE","\n                ",288],["T_VARIABLE","$this",289],["T_OBJECT_OPERATOR","->",289],["T_STRING","equalTo",289],"(",["T_VARIABLE","$this",289],["T_OBJECT_OPERATOR","->",289],["T_STRING","item",289],")",",",["T_WHITESPACE","\n                ",289],["T_VARIABLE","$this",290],["T_OBJECT_OPERATOR","->",290],["T_STRING","equalTo",290],"(",["T_VARIABLE","$this",290],["T_OBJECT_OPERATOR","->",290],["T_STRING","ruleCollection",290],")",",",["T_WHITESPACE","\n                ",290],["T_VARIABLE","$this",291],["T_OBJECT_OPERATOR","->",291],["T_STRING","anything",291],"(",")",",",["T_WHITESPACE","\n                ",291],["T_VARIABLE","$this",292],["T_OBJECT_OPERATOR","->",292],["T_STRING","anything",292],"(",")",["T_WHITESPACE","\n            ",292],")",["T_WHITESPACE","\n            ",293],["T_OBJECT_OPERATOR","->",294],["T_STRING","will",294],"(",["T_VARIABLE","$this",294],["T_OBJECT_OPERATOR","->",294],["T_STRING","returnValue",294],"(",["T_VARIABLE","$expectedRuleIds",294],")",")",";",["T_WHITESPACE","\n        ",294],["T_VARIABLE","$this",295],["T_OBJECT_OPERATOR","->",295],["T_STRING","rulesApplier",295],["T_OBJECT_OPERATOR","->",295],["T_STRING","expects",295],"(",["T_VARIABLE","$this",295],["T_OBJECT_OPERATOR","->",295],["T_STRING","once",295],"(",")",")",["T_WHITESPACE","\n            ",295],["T_OBJECT_OPERATOR","->",296],["T_STRING","method",296],"(",["T_CONSTANT_ENCAPSED_STRING","'setAppliedRuleIds'",296],")",["T_WHITESPACE","\n            ",296],["T_OBJECT_OPERATOR","->",297],["T_STRING","with",297],"(",["T_WHITESPACE","\n                ",297],["T_VARIABLE","$this",298],["T_OBJECT_OPERATOR","->",298],["T_STRING","anything",298],"(",")",",",["T_WHITESPACE","\n                ",298],["T_VARIABLE","$expectedRuleIds",299],["T_WHITESPACE","\n            ",299],")",";",["T_WHITESPACE","\n\n        ",300],["T_VARIABLE","$this",302],["T_OBJECT_OPERATOR","->",302],["T_STRING","model",302],["T_OBJECT_OPERATOR","->",302],["T_STRING","process",302],"(",["T_VARIABLE","$this",302],["T_OBJECT_OPERATOR","->",302],["T_STRING","item",302],")",";",["T_WHITESPACE","\n    ",302],"}",["T_WHITESPACE","\n\n    ",303],["T_PUBLIC","public",305],["T_WHITESPACE"," ",305],["T_FUNCTION","function",305],["T_WHITESPACE"," ",305],["T_STRING","testInit",305],"(",")",["T_WHITESPACE","\n    ",305],"{",["T_WHITESPACE","\n        ",306],["T_VARIABLE","$this",307],["T_OBJECT_OPERATOR","->",307],["T_STRING","assertInstanceOf",307],"(",["T_WHITESPACE","\n            ",307],["T_NS_SEPARATOR","\\",308],["T_STRING","Magento",308],["T_NS_SEPARATOR","\\",308],["T_STRING","SalesRule",308],["T_NS_SEPARATOR","\\",308],["T_STRING","Model",308],["T_NS_SEPARATOR","\\",308],["T_STRING","Validator",308],["T_DOUBLE_COLON","::",308],["T_CLASS","class",308],",",["T_WHITESPACE","\n            ",308],["T_VARIABLE","$this",309],["T_OBJECT_OPERATOR","->",309],["T_STRING","model",309],["T_OBJECT_OPERATOR","->",309],["T_STRING","init",309],"(",["T_WHITESPACE","\n                ",309],["T_VARIABLE","$this",310],["T_OBJECT_OPERATOR","->",310],["T_STRING","model",310],["T_OBJECT_OPERATOR","->",310],["T_STRING","getWebsiteId",310],"(",")",",",["T_WHITESPACE","\n                ",310],["T_VARIABLE","$this",311],["T_OBJECT_OPERATOR","->",311],["T_STRING","model",311],["T_OBJECT_OPERATOR","->",311],["T_STRING","getCustomerGroupId",311],"(",")",",",["T_WHITESPACE","\n                ",311],["T_VARIABLE","$this",312],["T_OBJECT_OPERATOR","->",312],["T_STRING","model",312],["T_OBJECT_OPERATOR","->",312],["T_STRING","getCouponCode",312],"(",")",["T_WHITESPACE","\n            ",312],")",["T_WHITESPACE","\n        ",313],")",";",["T_WHITESPACE","\n    ",314],"}",["T_WHITESPACE","\n\n    ",315],["T_PUBLIC","public",317],["T_WHITESPACE"," ",317],["T_FUNCTION","function",317],["T_WHITESPACE"," ",317],["T_STRING","testCanApplyDiscount",317],"(",")",["T_WHITESPACE","\n    ",317],"{",["T_WHITESPACE","\n        ",318],["T_VARIABLE","$validator",319],["T_WHITESPACE"," ",319],"=",["T_WHITESPACE"," ",319],["T_VARIABLE","$this",319],["T_OBJECT_OPERATOR","->",319],["T_STRING","getMockBuilder",319],"(",["T_NS_SEPARATOR","\\",319],["T_STRING","Magento",319],["T_NS_SEPARATOR","\\",319],["T_STRING","Framework",319],["T_NS_SEPARATOR","\\",319],["T_STRING","Validator",319],["T_NS_SEPARATOR","\\",319],["T_STRING","AbstractValidator",319],["T_DOUBLE_COLON","::",319],["T_CLASS","class",319],")",["T_WHITESPACE","\n            ",319],["T_OBJECT_OPERATOR","->",320],["T_STRING","setMethods",320],"(","[",["T_CONSTANT_ENCAPSED_STRING","'isValid'",320],"]",")",["T_WHITESPACE","\n            ",320],["T_OBJECT_OPERATOR","->",321],["T_STRING","disableOriginalConstructor",321],"(",")",["T_WHITESPACE","\n            ",321],["T_OBJECT_OPERATOR","->",322],["T_STRING","getMockForAbstractClass",322],"(",")",";",["T_WHITESPACE","\n\n        ",322],["T_VARIABLE","$this",324],["T_OBJECT_OPERATOR","->",324],["T_STRING","validators",324],["T_OBJECT_OPERATOR","->",324],["T_STRING","expects",324],"(",["T_VARIABLE","$this",324],["T_OBJECT_OPERATOR","->",324],["T_STRING","any",324],"(",")",")",["T_WHITESPACE","\n            ",324],["T_OBJECT_OPERATOR","->",325],["T_STRING","method",325],"(",["T_CONSTANT_ENCAPSED_STRING","'getValidators'",325],")",["T_WHITESPACE","\n            ",325],["T_OBJECT_OPERATOR","->",326],["T_STRING","with",326],"(",["T_CONSTANT_ENCAPSED_STRING","'discount'",326],")",["T_WHITESPACE","\n            ",326],["T_OBJECT_OPERATOR","->",327],["T_STRING","willReturn",327],"(","[",["T_VARIABLE","$validator",327],"]",")",";",["T_WHITESPACE","\n        ",327],["T_VARIABLE","$validator",328],["T_OBJECT_OPERATOR","->",328],["T_STRING","expects",328],"(",["T_VARIABLE","$this",328],["T_OBJECT_OPERATOR","->",328],["T_STRING","any",328],"(",")",")",["T_WHITESPACE","\n            ",328],["T_OBJECT_OPERATOR","->",329],["T_STRING","method",329],"(",["T_CONSTANT_ENCAPSED_STRING","'isValid'",329],")",["T_WHITESPACE","\n            ",329],["T_OBJECT_OPERATOR","->",330],["T_STRING","with",330],"(",["T_VARIABLE","$this",330],["T_OBJECT_OPERATOR","->",330],["T_STRING","item",330],")",["T_WHITESPACE","\n            ",330],["T_OBJECT_OPERATOR","->",331],["T_STRING","willReturn",331],"(",["T_STRING","false",331],")",";",["T_WHITESPACE","\n\n        ",331],["T_VARIABLE","$this",333],["T_OBJECT_OPERATOR","->",333],["T_STRING","model",333],["T_OBJECT_OPERATOR","->",333],["T_STRING","init",333],"(",["T_WHITESPACE","\n            ",333],["T_VARIABLE","$this",334],["T_OBJECT_OPERATOR","->",334],["T_STRING","model",334],["T_OBJECT_OPERATOR","->",334],["T_STRING","getWebsiteId",334],"(",")",",",["T_WHITESPACE","\n            ",334],["T_VARIABLE","$this",335],["T_OBJECT_OPERATOR","->",335],["T_STRING","model",335],["T_OBJECT_OPERATOR","->",335],["T_STRING","getCustomerGroupId",335],"(",")",",",["T_WHITESPACE","\n            ",335],["T_VARIABLE","$this",336],["T_OBJECT_OPERATOR","->",336],["T_STRING","model",336],["T_OBJECT_OPERATOR","->",336],["T_STRING","getCouponCode",336],"(",")",["T_WHITESPACE","\n        ",336],")",";",["T_WHITESPACE","\n        ",337],["T_VARIABLE","$this",338],["T_OBJECT_OPERATOR","->",338],["T_STRING","assertFalse",338],"(",["T_VARIABLE","$this",338],["T_OBJECT_OPERATOR","->",338],["T_STRING","model",338],["T_OBJECT_OPERATOR","->",338],["T_STRING","canApplyDiscount",338],"(",["T_VARIABLE","$this",338],["T_OBJECT_OPERATOR","->",338],["T_STRING","item",338],")",")",";",["T_WHITESPACE","\n    ",338],"}",["T_WHITESPACE","\n\n    ",339],["T_PUBLIC","public",341],["T_WHITESPACE"," ",341],["T_FUNCTION","function",341],["T_WHITESPACE"," ",341],["T_STRING","testInitTotalsCanApplyDiscount",341],"(",")",["T_WHITESPACE","\n    ",341],"{",["T_WHITESPACE","\n        ",342],["T_VARIABLE","$rule",343],["T_WHITESPACE"," ",343],"=",["T_WHITESPACE"," ",343],["T_VARIABLE","$this",343],["T_OBJECT_OPERATOR","->",343],["T_STRING","getMock",343],"(",["T_WHITESPACE","\n            ",343],["T_NS_SEPARATOR","\\",344],["T_STRING","Magento",344],["T_NS_SEPARATOR","\\",344],["T_STRING","SalesRule",344],["T_NS_SEPARATOR","\\",344],["T_STRING","Model",344],["T_NS_SEPARATOR","\\",344],["T_STRING","Rule",344],["T_DOUBLE_COLON","::",344],["T_CLASS","class",344],",",["T_WHITESPACE","\n            ",344],"[",["T_CONSTANT_ENCAPSED_STRING","'getSimpleAction'",345],",",["T_WHITESPACE"," ",345],["T_CONSTANT_ENCAPSED_STRING","'getActions'",345],",",["T_WHITESPACE"," ",345],["T_CONSTANT_ENCAPSED_STRING","'getId'",345],"]",",",["T_WHITESPACE","\n            ",345],"[","]",",",["T_WHITESPACE","\n            ",346],["T_CONSTANT_ENCAPSED_STRING","''",347],",",["T_WHITESPACE","\n            ",347],["T_STRING","false",348],["T_WHITESPACE","\n        ",348],")",";",["T_WHITESPACE","\n        ",349],["T_VARIABLE","$item1",350],["T_WHITESPACE"," ",350],"=",["T_WHITESPACE"," ",350],["T_VARIABLE","$this",350],["T_OBJECT_OPERATOR","->",350],["T_STRING","getMockForAbstractClass",350],"(",["T_WHITESPACE","\n            ",350],["T_NS_SEPARATOR","\\",351],["T_STRING","Magento",351],["T_NS_SEPARATOR","\\",351],["T_STRING","Quote",351],["T_NS_SEPARATOR","\\",351],["T_STRING","Model",351],["T_NS_SEPARATOR","\\",351],["T_STRING","Quote",351],["T_NS_SEPARATOR","\\",351],["T_STRING","Item",351],["T_NS_SEPARATOR","\\",351],["T_STRING","AbstractItem",351],["T_DOUBLE_COLON","::",351],["T_CLASS","class",351],",",["T_WHITESPACE","\n            ",351],"[","]",",",["T_WHITESPACE","\n            ",352],["T_CONSTANT_ENCAPSED_STRING","''",353],",",["T_WHITESPACE","\n            ",353],["T_STRING","false",354],",",["T_WHITESPACE","\n            ",354],["T_STRING","true",355],",",["T_WHITESPACE","\n            ",355],["T_STRING","true",356],",",["T_WHITESPACE","\n            ",356],"[",["T_CONSTANT_ENCAPSED_STRING","'__clone'",357],",",["T_WHITESPACE"," ",357],["T_CONSTANT_ENCAPSED_STRING","'getDiscountCalculationPrice'",357],",",["T_WHITESPACE"," ",357],["T_CONSTANT_ENCAPSED_STRING","'getBaseDiscountCalculationPrice'",357],",",["T_WHITESPACE"," ",357],["T_CONSTANT_ENCAPSED_STRING","'getCalculationPrice'",357],"]",["T_WHITESPACE","\n        ",357],")",";",["T_WHITESPACE","\n        ",358],["T_VARIABLE","$item2",359],["T_WHITESPACE"," ",359],"=",["T_WHITESPACE"," ",359],["T_CLONE","clone",359],["T_WHITESPACE"," ",359],["T_VARIABLE","$item1",359],";",["T_WHITESPACE","\n        ",359],["T_VARIABLE","$items",360],["T_WHITESPACE"," ",360],"=",["T_WHITESPACE"," ",360],"[",["T_VARIABLE","$item1",360],",",["T_WHITESPACE"," ",360],["T_VARIABLE","$item2",360],"]",";",["T_WHITESPACE","\n\n        ",360],["T_VARIABLE","$rule",362],["T_OBJECT_OPERATOR","->",362],["T_STRING","expects",362],"(",["T_VARIABLE","$this",362],["T_OBJECT_OPERATOR","->",362],["T_STRING","any",362],"(",")",")",["T_WHITESPACE","\n            ",362],["T_OBJECT_OPERATOR","->",363],["T_STRING","method",363],"(",["T_CONSTANT_ENCAPSED_STRING","'getSimpleAction'",363],")",["T_WHITESPACE","\n            ",363],["T_OBJECT_OPERATOR","->",364],["T_STRING","willReturn",364],"(",["T_NS_SEPARATOR","\\",364],["T_STRING","Magento",364],["T_NS_SEPARATOR","\\",364],["T_STRING","SalesRule",364],["T_NS_SEPARATOR","\\",364],["T_STRING","Model",364],["T_NS_SEPARATOR","\\",364],["T_STRING","Rule",364],["T_DOUBLE_COLON","::",364],["T_STRING","CART_FIXED_ACTION",364],")",";",["T_WHITESPACE","\n        ",364],["T_VARIABLE","$iterator",365],["T_WHITESPACE"," ",365],"=",["T_WHITESPACE"," ",365],["T_NEW","new",365],["T_WHITESPACE"," ",365],["T_NS_SEPARATOR","\\",365],["T_STRING","ArrayIterator",365],"(","[",["T_VARIABLE","$rule",365],"]",")",";",["T_WHITESPACE","\n        ",365],["T_VARIABLE","$this",366],["T_OBJECT_OPERATOR","->",366],["T_STRING","ruleCollection",366],["T_OBJECT_OPERATOR","->",366],["T_STRING","expects",366],"(",["T_VARIABLE","$this",366],["T_OBJECT_OPERATOR","->",366],["T_STRING","once",366],"(",")",")",["T_OBJECT_OPERATOR","->",366],["T_STRING","method",366],"(",["T_CONSTANT_ENCAPSED_STRING","'getIterator'",366],")",["T_OBJECT_OPERATOR","->",366],["T_STRING","willReturn",366],"(",["T_VARIABLE","$iterator",366],")",";",["T_WHITESPACE","\n        ",366],["T_VARIABLE","$validator",367],["T_WHITESPACE"," ",367],"=",["T_WHITESPACE"," ",367],["T_VARIABLE","$this",367],["T_OBJECT_OPERATOR","->",367],["T_STRING","getMockBuilder",367],"(",["T_NS_SEPARATOR","\\",367],["T_STRING","Magento",367],["T_NS_SEPARATOR","\\",367],["T_STRING","Framework",367],["T_NS_SEPARATOR","\\",367],["T_STRING","Validator",367],["T_NS_SEPARATOR","\\",367],["T_STRING","AbstractValidator",367],["T_DOUBLE_COLON","::",367],["T_CLASS","class",367],")",["T_WHITESPACE","\n            ",367],["T_OBJECT_OPERATOR","->",368],["T_STRING","setMethods",368],"(","[",["T_CONSTANT_ENCAPSED_STRING","'isValid'",368],"]",")",["T_WHITESPACE","\n            ",368],["T_OBJECT_OPERATOR","->",369],["T_STRING","disableOriginalConstructor",369],"(",")",["T_WHITESPACE","\n            ",369],["T_OBJECT_OPERATOR","->",370],["T_STRING","getMockForAbstractClass",370],"(",")",";",["T_WHITESPACE","\n\n        ",370],["T_VARIABLE","$this",372],["T_OBJECT_OPERATOR","->",372],["T_STRING","validators",372],["T_OBJECT_OPERATOR","->",372],["T_STRING","expects",372],"(",["T_VARIABLE","$this",372],["T_OBJECT_OPERATOR","->",372],["T_STRING","atLeastOnce",372],"(",")",")",["T_OBJECT_OPERATOR","->",372],["T_STRING","method",372],"(",["T_CONSTANT_ENCAPSED_STRING","'getValidators'",372],")",["T_OBJECT_OPERATOR","->",372],["T_STRING","with",372],"(",["T_CONSTANT_ENCAPSED_STRING","'discount'",372],")",["T_WHITESPACE","\n            ",372],["T_OBJECT_OPERATOR","->",373],["T_STRING","willReturn",373],"(","[",["T_VARIABLE","$validator",373],"]",")",";",["T_WHITESPACE","\n        ",373],["T_VARIABLE","$validator",374],["T_OBJECT_OPERATOR","->",374],["T_STRING","expects",374],"(",["T_VARIABLE","$this",374],["T_OBJECT_OPERATOR","->",374],["T_STRING","at",374],"(",["T_LNUMBER","0",374],")",")",["T_OBJECT_OPERATOR","->",374],["T_STRING","method",374],"(",["T_CONSTANT_ENCAPSED_STRING","'isValid'",374],")",["T_OBJECT_OPERATOR","->",374],["T_STRING","with",374],"(",["T_VARIABLE","$item1",374],")",["T_OBJECT_OPERATOR","->",374],["T_STRING","willReturn",374],"(",["T_STRING","false",374],")",";",["T_WHITESPACE","\n        ",374],["T_VARIABLE","$validator",375],["T_OBJECT_OPERATOR","->",375],["T_STRING","expects",375],"(",["T_VARIABLE","$this",375],["T_OBJECT_OPERATOR","->",375],["T_STRING","at",375],"(",["T_LNUMBER","1",375],")",")",["T_OBJECT_OPERATOR","->",375],["T_STRING","method",375],"(",["T_CONSTANT_ENCAPSED_STRING","'isValid'",375],")",["T_OBJECT_OPERATOR","->",375],["T_STRING","with",375],"(",["T_VARIABLE","$item2",375],")",["T_OBJECT_OPERATOR","->",375],["T_STRING","willReturn",375],"(",["T_STRING","true",375],")",";",["T_WHITESPACE","\n\n        ",375],["T_VARIABLE","$item1",377],["T_OBJECT_OPERATOR","->",377],["T_STRING","expects",377],"(",["T_VARIABLE","$this",377],["T_OBJECT_OPERATOR","->",377],["T_STRING","any",377],"(",")",")",["T_OBJECT_OPERATOR","->",377],["T_STRING","method",377],"(",["T_CONSTANT_ENCAPSED_STRING","'getParentItemId'",377],")",["T_OBJECT_OPERATOR","->",377],["T_STRING","willReturn",377],"(",["T_STRING","false",377],")",";",["T_WHITESPACE","\n        ",377],["T_VARIABLE","$item1",378],["T_OBJECT_OPERATOR","->",378],["T_STRING","expects",378],"(",["T_VARIABLE","$this",378],["T_OBJECT_OPERATOR","->",378],["T_STRING","never",378],"(",")",")",["T_OBJECT_OPERATOR","->",378],["T_STRING","method",378],"(",["T_CONSTANT_ENCAPSED_STRING","'getDiscountCalculationPrice'",378],")",";",["T_WHITESPACE","\n        ",378],["T_VARIABLE","$item1",379],["T_OBJECT_OPERATOR","->",379],["T_STRING","expects",379],"(",["T_VARIABLE","$this",379],["T_OBJECT_OPERATOR","->",379],["T_STRING","never",379],"(",")",")",["T_OBJECT_OPERATOR","->",379],["T_STRING","method",379],"(",["T_CONSTANT_ENCAPSED_STRING","'getBaseDiscountCalculationPrice'",379],")",";",["T_WHITESPACE","\n        ",379],["T_VARIABLE","$item2",380],["T_OBJECT_OPERATOR","->",380],["T_STRING","expects",380],"(",["T_VARIABLE","$this",380],["T_OBJECT_OPERATOR","->",380],["T_STRING","any",380],"(",")",")",["T_OBJECT_OPERATOR","->",380],["T_STRING","method",380],"(",["T_CONSTANT_ENCAPSED_STRING","'getParentItemId'",380],")",["T_OBJECT_OPERATOR","->",380],["T_STRING","willReturn",380],"(",["T_STRING","false",380],")",";",["T_WHITESPACE","\n        ",380],["T_VARIABLE","$item2",381],["T_OBJECT_OPERATOR","->",381],["T_STRING","expects",381],"(",["T_VARIABLE","$this",381],["T_OBJECT_OPERATOR","->",381],["T_STRING","any",381],"(",")",")",["T_OBJECT_OPERATOR","->",381],["T_STRING","method",381],"(",["T_CONSTANT_ENCAPSED_STRING","'getDiscountCalculationPrice'",381],")",["T_OBJECT_OPERATOR","->",381],["T_STRING","willReturn",381],"(",["T_LNUMBER","50",381],")",";",["T_WHITESPACE","\n        ",381],["T_VARIABLE","$item2",382],["T_OBJECT_OPERATOR","->",382],["T_STRING","expects",382],"(",["T_VARIABLE","$this",382],["T_OBJECT_OPERATOR","->",382],["T_STRING","once",382],"(",")",")",["T_OBJECT_OPERATOR","->",382],["T_STRING","method",382],"(",["T_CONSTANT_ENCAPSED_STRING","'getBaseDiscountCalculationPrice'",382],")",["T_OBJECT_OPERATOR","->",382],["T_STRING","willReturn",382],"(",["T_LNUMBER","50",382],")",";",["T_WHITESPACE","\n        ",382],["T_VARIABLE","$this",383],["T_OBJECT_OPERATOR","->",383],["T_STRING","utility",383],["T_OBJECT_OPERATOR","->",383],["T_STRING","expects",383],"(",["T_VARIABLE","$this",383],["T_OBJECT_OPERATOR","->",383],["T_STRING","once",383],"(",")",")",["T_OBJECT_OPERATOR","->",383],["T_STRING","method",383],"(",["T_CONSTANT_ENCAPSED_STRING","'getItemQty'",383],")",["T_OBJECT_OPERATOR","->",383],["T_STRING","willReturn",383],"(",["T_LNUMBER","1",383],")",";",["T_WHITESPACE","\n        ",383],["T_VARIABLE","$this",384],["T_OBJECT_OPERATOR","->",384],["T_STRING","utility",384],["T_OBJECT_OPERATOR","->",384],["T_STRING","expects",384],"(",["T_VARIABLE","$this",384],["T_OBJECT_OPERATOR","->",384],["T_STRING","any",384],"(",")",")",["T_OBJECT_OPERATOR","->",384],["T_STRING","method",384],"(",["T_CONSTANT_ENCAPSED_STRING","'canProcessRule'",384],")",["T_OBJECT_OPERATOR","->",384],["T_STRING","willReturn",384],"(",["T_STRING","true",384],")",";",["T_WHITESPACE","\n\n        ",384],["T_VARIABLE","$actionsCollection",386],["T_WHITESPACE"," ",386],"=",["T_WHITESPACE"," ",386],["T_VARIABLE","$this",386],["T_OBJECT_OPERATOR","->",386],["T_STRING","getMock",386],"(",["T_NS_SEPARATOR","\\",386],["T_STRING","Magento",386],["T_NS_SEPARATOR","\\",386],["T_STRING","Rule",386],["T_NS_SEPARATOR","\\",386],["T_STRING","Model",386],["T_NS_SEPARATOR","\\",386],["T_STRING","Action",386],["T_NS_SEPARATOR","\\",386],["T_STRING","Collection",386],["T_DOUBLE_COLON","::",386],["T_CLASS","class",386],",",["T_WHITESPACE"," ",386],"[",["T_CONSTANT_ENCAPSED_STRING","'validate'",386],"]",",",["T_WHITESPACE"," ",386],"[","]",",",["T_WHITESPACE"," ",386],["T_CONSTANT_ENCAPSED_STRING","''",386],",",["T_WHITESPACE"," ",386],["T_STRING","false",386],")",";",["T_WHITESPACE","\n        ",386],["T_VARIABLE","$actionsCollection",387],["T_OBJECT_OPERATOR","->",387],["T_STRING","expects",387],"(",["T_VARIABLE","$this",387],["T_OBJECT_OPERATOR","->",387],["T_STRING","at",387],"(",["T_LNUMBER","0",387],")",")",["T_OBJECT_OPERATOR","->",387],["T_STRING","method",387],"(",["T_CONSTANT_ENCAPSED_STRING","'validate'",387],")",["T_OBJECT_OPERATOR","->",387],["T_STRING","with",387],"(",["T_VARIABLE","$item1",387],")",["T_OBJECT_OPERATOR","->",387],["T_STRING","willReturn",387],"(",["T_STRING","true",387],")",";",["T_WHITESPACE","\n        ",387],["T_VARIABLE","$actionsCollection",388],["T_OBJECT_OPERATOR","->",388],["T_STRING","expects",388],"(",["T_VARIABLE","$this",388],["T_OBJECT_OPERATOR","->",388],["T_STRING","at",388],"(",["T_LNUMBER","1",388],")",")",["T_OBJECT_OPERATOR","->",388],["T_STRING","method",388],"(",["T_CONSTANT_ENCAPSED_STRING","'validate'",388],")",["T_OBJECT_OPERATOR","->",388],["T_STRING","with",388],"(",["T_VARIABLE","$item2",388],")",["T_OBJECT_OPERATOR","->",388],["T_STRING","willReturn",388],"(",["T_STRING","true",388],")",";",["T_WHITESPACE","\n        ",388],["T_VARIABLE","$rule",389],["T_OBJECT_OPERATOR","->",389],["T_STRING","expects",389],"(",["T_VARIABLE","$this",389],["T_OBJECT_OPERATOR","->",389],["T_STRING","any",389],"(",")",")",["T_OBJECT_OPERATOR","->",389],["T_STRING","method",389],"(",["T_CONSTANT_ENCAPSED_STRING","'getActions'",389],")",["T_OBJECT_OPERATOR","->",389],["T_STRING","willReturn",389],"(",["T_VARIABLE","$actionsCollection",389],")",";",["T_WHITESPACE","\n        ",389],["T_VARIABLE","$rule",390],["T_OBJECT_OPERATOR","->",390],["T_STRING","expects",390],"(",["T_VARIABLE","$this",390],["T_OBJECT_OPERATOR","->",390],["T_STRING","any",390],"(",")",")",["T_OBJECT_OPERATOR","->",390],["T_STRING","method",390],"(",["T_CONSTANT_ENCAPSED_STRING","'getId'",390],")",["T_OBJECT_OPERATOR","->",390],["T_STRING","willReturn",390],"(",["T_LNUMBER","1",390],")",";",["T_WHITESPACE","\n\n        ",390],["T_VARIABLE","$this",392],["T_OBJECT_OPERATOR","->",392],["T_STRING","model",392],["T_OBJECT_OPERATOR","->",392],["T_STRING","init",392],"(",["T_WHITESPACE","\n            ",392],["T_VARIABLE","$this",393],["T_OBJECT_OPERATOR","->",393],["T_STRING","model",393],["T_OBJECT_OPERATOR","->",393],["T_STRING","getWebsiteId",393],"(",")",",",["T_WHITESPACE","\n            ",393],["T_VARIABLE","$this",394],["T_OBJECT_OPERATOR","->",394],["T_STRING","model",394],["T_OBJECT_OPERATOR","->",394],["T_STRING","getCustomerGroupId",394],"(",")",",",["T_WHITESPACE","\n            ",394],["T_VARIABLE","$this",395],["T_OBJECT_OPERATOR","->",395],["T_STRING","model",395],["T_OBJECT_OPERATOR","->",395],["T_STRING","getCouponCode",395],"(",")",["T_WHITESPACE","\n        ",395],")",";",["T_WHITESPACE","\n        ",396],["T_VARIABLE","$this",397],["T_OBJECT_OPERATOR","->",397],["T_STRING","model",397],["T_OBJECT_OPERATOR","->",397],["T_STRING","initTotals",397],"(",["T_VARIABLE","$items",397],",",["T_WHITESPACE"," ",397],["T_VARIABLE","$this",397],["T_OBJECT_OPERATOR","->",397],["T_STRING","addressMock",397],")",";",["T_WHITESPACE","\n        ",397],["T_VARIABLE","$this",398],["T_OBJECT_OPERATOR","->",398],["T_STRING","assertArrayHasKey",398],"(",["T_CONSTANT_ENCAPSED_STRING","'items_price'",398],",",["T_WHITESPACE"," ",398],["T_VARIABLE","$this",398],["T_OBJECT_OPERATOR","->",398],["T_STRING","model",398],["T_OBJECT_OPERATOR","->",398],["T_STRING","getRuleItemTotalsInfo",398],"(",["T_VARIABLE","$rule",398],["T_OBJECT_OPERATOR","->",398],["T_STRING","getId",398],"(",")",")",")",";",["T_WHITESPACE","\n        ",398],["T_VARIABLE","$this",399],["T_OBJECT_OPERATOR","->",399],["T_STRING","assertArrayHasKey",399],"(",["T_CONSTANT_ENCAPSED_STRING","'base_items_price'",399],",",["T_WHITESPACE"," ",399],["T_VARIABLE","$this",399],["T_OBJECT_OPERATOR","->",399],["T_STRING","model",399],["T_OBJECT_OPERATOR","->",399],["T_STRING","getRuleItemTotalsInfo",399],"(",["T_VARIABLE","$rule",399],["T_OBJECT_OPERATOR","->",399],["T_STRING","getId",399],"(",")",")",")",";",["T_WHITESPACE","\n        ",399],["T_VARIABLE","$this",400],["T_OBJECT_OPERATOR","->",400],["T_STRING","assertArrayHasKey",400],"(",["T_CONSTANT_ENCAPSED_STRING","'items_count'",400],",",["T_WHITESPACE"," ",400],["T_VARIABLE","$this",400],["T_OBJECT_OPERATOR","->",400],["T_STRING","model",400],["T_OBJECT_OPERATOR","->",400],["T_STRING","getRuleItemTotalsInfo",400],"(",["T_VARIABLE","$rule",400],["T_OBJECT_OPERATOR","->",400],["T_STRING","getId",400],"(",")",")",")",";",["T_WHITESPACE","\n        ",400],["T_VARIABLE","$this",401],["T_OBJECT_OPERATOR","->",401],["T_STRING","assertEquals",401],"(",["T_LNUMBER","1",401],",",["T_WHITESPACE"," ",401],["T_VARIABLE","$this",401],["T_OBJECT_OPERATOR","->",401],["T_STRING","model",401],["T_OBJECT_OPERATOR","->",401],["T_STRING","getRuleItemTotalsInfo",401],"(",["T_VARIABLE","$rule",401],["T_OBJECT_OPERATOR","->",401],["T_STRING","getId",401],"(",")",")","[",["T_CONSTANT_ENCAPSED_STRING","'items_count'",401],"]",")",";",["T_WHITESPACE","\n    ",401],"}",["T_WHITESPACE","\n\n    ",402],["T_PUBLIC","public",404],["T_WHITESPACE"," ",404],["T_FUNCTION","function",404],["T_WHITESPACE"," ",404],["T_STRING","testInitTotalsNoItems",404],"(",")",["T_WHITESPACE","\n    ",404],"{",["T_WHITESPACE","\n        ",405],["T_VARIABLE","$address",406],["T_WHITESPACE"," ",406],"=",["T_WHITESPACE"," ",406],["T_VARIABLE","$this",406],["T_OBJECT_OPERATOR","->",406],["T_STRING","getMock",406],"(",["T_NS_SEPARATOR","\\",406],["T_STRING","Magento",406],["T_NS_SEPARATOR","\\",406],["T_STRING","Quote",406],["T_NS_SEPARATOR","\\",406],["T_STRING","Model",406],["T_NS_SEPARATOR","\\",406],["T_STRING","Quote",406],["T_NS_SEPARATOR","\\",406],["T_STRING","Address",406],["T_DOUBLE_COLON","::",406],["T_CLASS","class",406],",",["T_WHITESPACE"," ",406],"[","]",",",["T_WHITESPACE"," ",406],"[","]",",",["T_WHITESPACE"," ",406],["T_CONSTANT_ENCAPSED_STRING","''",406],",",["T_WHITESPACE"," ",406],["T_STRING","false",406],")",";",["T_WHITESPACE","\n        ",406],["T_VARIABLE","$this",407],["T_OBJECT_OPERATOR","->",407],["T_STRING","item",407],["T_OBJECT_OPERATOR","->",407],["T_STRING","expects",407],"(",["T_VARIABLE","$this",407],["T_OBJECT_OPERATOR","->",407],["T_STRING","never",407],"(",")",")",["T_WHITESPACE","\n            ",407],["T_OBJECT_OPERATOR","->",408],["T_STRING","method",408],"(",["T_CONSTANT_ENCAPSED_STRING","'getParentItemId'",408],")",";",["T_WHITESPACE","\n        ",408],["T_VARIABLE","$this",409],["T_OBJECT_OPERATOR","->",409],["T_STRING","model",409],["T_OBJECT_OPERATOR","->",409],["T_STRING","init",409],"(",["T_WHITESPACE","\n            ",409],["T_VARIABLE","$this",410],["T_OBJECT_OPERATOR","->",410],["T_STRING","model",410],["T_OBJECT_OPERATOR","->",410],["T_STRING","getWebsiteId",410],"(",")",",",["T_WHITESPACE","\n            ",410],["T_VARIABLE","$this",411],["T_OBJECT_OPERATOR","->",411],["T_STRING","model",411],["T_OBJECT_OPERATOR","->",411],["T_STRING","getCustomerGroupId",411],"(",")",",",["T_WHITESPACE","\n            ",411],["T_VARIABLE","$this",412],["T_OBJECT_OPERATOR","->",412],["T_STRING","model",412],["T_OBJECT_OPERATOR","->",412],["T_STRING","getCouponCode",412],"(",")",["T_WHITESPACE","\n        ",412],")",";",["T_WHITESPACE","\n        ",413],["T_VARIABLE","$this",414],["T_OBJECT_OPERATOR","->",414],["T_STRING","model",414],["T_OBJECT_OPERATOR","->",414],["T_STRING","initTotals",414],"(","[","]",",",["T_WHITESPACE"," ",414],["T_VARIABLE","$address",414],")",";",["T_WHITESPACE","\n    ",414],"}",["T_WHITESPACE","\n\n    ",415],["T_DOC_COMMENT","\/**\n     * @param $ruleCollection\n     * @return \\PHPUnit_Framework_MockObject_MockObject\n     *\/",417],["T_WHITESPACE","\n    ",420],["T_PROTECTED","protected",421],["T_WHITESPACE"," ",421],["T_FUNCTION","function",421],["T_WHITESPACE"," ",421],["T_STRING","prepareRuleCollectionMock",421],"(",["T_VARIABLE","$ruleCollection",421],")",["T_WHITESPACE","\n    ",421],"{",["T_WHITESPACE","\n        ",422],["T_VARIABLE","$this",423],["T_OBJECT_OPERATOR","->",423],["T_STRING","ruleCollection",423],["T_OBJECT_OPERATOR","->",423],["T_STRING","expects",423],"(",["T_VARIABLE","$this",423],["T_OBJECT_OPERATOR","->",423],["T_STRING","any",423],"(",")",")",["T_WHITESPACE","\n            ",423],["T_OBJECT_OPERATOR","->",424],["T_STRING","method",424],"(",["T_CONSTANT_ENCAPSED_STRING","'addFieldToFilter'",424],")",["T_WHITESPACE","\n            ",424],["T_OBJECT_OPERATOR","->",425],["T_STRING","with",425],"(",["T_CONSTANT_ENCAPSED_STRING","'is_active'",425],",",["T_WHITESPACE"," ",425],["T_LNUMBER","1",425],")",["T_WHITESPACE","\n            ",425],["T_OBJECT_OPERATOR","->",426],["T_STRING","will",426],"(",["T_VARIABLE","$this",426],["T_OBJECT_OPERATOR","->",426],["T_STRING","returnSelf",426],"(",")",")",";",["T_WHITESPACE","\n        ",426],["T_VARIABLE","$this",427],["T_OBJECT_OPERATOR","->",427],["T_STRING","ruleCollection",427],["T_OBJECT_OPERATOR","->",427],["T_STRING","expects",427],"(",["T_VARIABLE","$this",427],["T_OBJECT_OPERATOR","->",427],["T_STRING","any",427],"(",")",")",["T_WHITESPACE","\n            ",427],["T_OBJECT_OPERATOR","->",428],["T_STRING","method",428],"(",["T_CONSTANT_ENCAPSED_STRING","'load'",428],")",["T_WHITESPACE","\n            ",428],["T_OBJECT_OPERATOR","->",429],["T_STRING","will",429],"(",["T_VARIABLE","$this",429],["T_OBJECT_OPERATOR","->",429],["T_STRING","returnSelf",429],"(",")",")",";",["T_WHITESPACE","\n\n        ",429],["T_VARIABLE","$ruleCollectionFactoryMock",431],["T_WHITESPACE"," ",431],"=",["T_WHITESPACE","\n            ",431],["T_VARIABLE","$this",432],["T_OBJECT_OPERATOR","->",432],["T_STRING","getMockBuilder",432],"(",["T_NS_SEPARATOR","\\",432],["T_STRING","Magento",432],["T_NS_SEPARATOR","\\",432],["T_STRING","SalesRule",432],["T_NS_SEPARATOR","\\",432],["T_STRING","Model",432],["T_NS_SEPARATOR","\\",432],["T_STRING","ResourceModel",432],["T_NS_SEPARATOR","\\",432],["T_STRING","Rule",432],["T_NS_SEPARATOR","\\",432],["T_STRING","CollectionFactory",432],["T_DOUBLE_COLON","::",432],["T_CLASS","class",432],")",["T_WHITESPACE","\n            ",432],["T_OBJECT_OPERATOR","->",433],["T_STRING","disableOriginalConstructor",433],"(",")",["T_WHITESPACE","\n            ",433],["T_OBJECT_OPERATOR","->",434],["T_STRING","setMethods",434],"(","[",["T_CONSTANT_ENCAPSED_STRING","'create'",434],"]",")",["T_WHITESPACE","\n            ",434],["T_OBJECT_OPERATOR","->",435],["T_STRING","getMock",435],"(",")",";",["T_WHITESPACE","\n        ",435],["T_VARIABLE","$ruleCollectionFactoryMock",436],["T_OBJECT_OPERATOR","->",436],["T_STRING","expects",436],"(",["T_VARIABLE","$this",436],["T_OBJECT_OPERATOR","->",436],["T_STRING","any",436],"(",")",")",["T_WHITESPACE","\n            ",436],["T_OBJECT_OPERATOR","->",437],["T_STRING","method",437],"(",["T_CONSTANT_ENCAPSED_STRING","'create'",437],")",["T_WHITESPACE","\n            ",437],["T_OBJECT_OPERATOR","->",438],["T_STRING","will",438],"(",["T_VARIABLE","$this",438],["T_OBJECT_OPERATOR","->",438],["T_STRING","returnValue",438],"(",["T_VARIABLE","$ruleCollection",438],")",")",";",["T_WHITESPACE","\n        ",438],["T_RETURN","return",439],["T_WHITESPACE"," ",439],["T_VARIABLE","$ruleCollectionFactoryMock",439],";",["T_WHITESPACE","\n    ",439],"}",["T_WHITESPACE","\n\n    ",440],["T_PUBLIC","public",442],["T_WHITESPACE"," ",442],["T_FUNCTION","function",442],["T_WHITESPACE"," ",442],["T_STRING","testProcessShippingAmountNoRules",442],"(",")",["T_WHITESPACE","\n    ",442],"{",["T_WHITESPACE","\n        ",443],["T_VARIABLE","$iterator",444],["T_WHITESPACE"," ",444],"=",["T_WHITESPACE"," ",444],["T_NEW","new",444],["T_WHITESPACE"," ",444],["T_NS_SEPARATOR","\\",444],["T_STRING","ArrayIterator",444],"(","[","]",")",";",["T_WHITESPACE","\n        ",444],["T_VARIABLE","$this",445],["T_OBJECT_OPERATOR","->",445],["T_STRING","ruleCollection",445],["T_OBJECT_OPERATOR","->",445],["T_STRING","expects",445],"(",["T_VARIABLE","$this",445],["T_OBJECT_OPERATOR","->",445],["T_STRING","any",445],"(",")",")",["T_WHITESPACE","\n            ",445],["T_OBJECT_OPERATOR","->",446],["T_STRING","method",446],"(",["T_CONSTANT_ENCAPSED_STRING","'getIterator'",446],")",["T_WHITESPACE","\n            ",446],["T_OBJECT_OPERATOR","->",447],["T_STRING","willReturn",447],"(",["T_VARIABLE","$iterator",447],")",";",["T_WHITESPACE","\n        ",447],["T_VARIABLE","$this",448],["T_OBJECT_OPERATOR","->",448],["T_STRING","model",448],["T_OBJECT_OPERATOR","->",448],["T_STRING","init",448],"(",["T_WHITESPACE","\n            ",448],["T_VARIABLE","$this",449],["T_OBJECT_OPERATOR","->",449],["T_STRING","model",449],["T_OBJECT_OPERATOR","->",449],["T_STRING","getWebsiteId",449],"(",")",",",["T_WHITESPACE","\n            ",449],["T_VARIABLE","$this",450],["T_OBJECT_OPERATOR","->",450],["T_STRING","model",450],["T_OBJECT_OPERATOR","->",450],["T_STRING","getCustomerGroupId",450],"(",")",",",["T_WHITESPACE","\n            ",450],["T_VARIABLE","$this",451],["T_OBJECT_OPERATOR","->",451],["T_STRING","model",451],["T_OBJECT_OPERATOR","->",451],["T_STRING","getCouponCode",451],"(",")",["T_WHITESPACE","\n        ",451],")",";",["T_WHITESPACE","\n        ",452],["T_VARIABLE","$this",453],["T_OBJECT_OPERATOR","->",453],["T_STRING","assertInstanceOf",453],"(",["T_WHITESPACE","\n            ",453],["T_NS_SEPARATOR","\\",454],["T_STRING","Magento",454],["T_NS_SEPARATOR","\\",454],["T_STRING","SalesRule",454],["T_NS_SEPARATOR","\\",454],["T_STRING","Model",454],["T_NS_SEPARATOR","\\",454],["T_STRING","Validator",454],["T_DOUBLE_COLON","::",454],["T_CLASS","class",454],",",["T_WHITESPACE","\n            ",454],["T_VARIABLE","$this",455],["T_OBJECT_OPERATOR","->",455],["T_STRING","model",455],["T_OBJECT_OPERATOR","->",455],["T_STRING","processShippingAmount",455],"(",["T_VARIABLE","$this",455],["T_OBJECT_OPERATOR","->",455],["T_STRING","setupAddressMock",455],"(",")",")",["T_WHITESPACE","\n        ",455],")",";",["T_WHITESPACE","\n    ",456],"}",["T_WHITESPACE","\n\n    ",457],["T_PUBLIC","public",459],["T_WHITESPACE"," ",459],["T_FUNCTION","function",459],["T_WHITESPACE"," ",459],["T_STRING","testProcessShippingAmountProcessDisabled",459],"(",")",["T_WHITESPACE","\n    ",459],"{",["T_WHITESPACE","\n        ",460],["T_VARIABLE","$ruleMock",461],["T_WHITESPACE"," ",461],"=",["T_WHITESPACE"," ",461],["T_VARIABLE","$this",461],["T_OBJECT_OPERATOR","->",461],["T_STRING","getMockBuilder",461],"(",["T_NS_SEPARATOR","\\",461],["T_STRING","Magento",461],["T_NS_SEPARATOR","\\",461],["T_STRING","SalesRule",461],["T_NS_SEPARATOR","\\",461],["T_STRING","Model",461],["T_NS_SEPARATOR","\\",461],["T_STRING","Rule",461],["T_DOUBLE_COLON","::",461],["T_CLASS","class",461],")",["T_WHITESPACE","\n            ",461],["T_OBJECT_OPERATOR","->",462],["T_STRING","disableOriginalConstructor",462],"(",")",["T_WHITESPACE","\n            ",462],["T_OBJECT_OPERATOR","->",463],["T_STRING","setMethods",463],"(","[","]",")",["T_WHITESPACE","\n            ",463],["T_OBJECT_OPERATOR","->",464],["T_STRING","getMock",464],"(",")",";",["T_WHITESPACE","\n        ",464],["T_VARIABLE","$iterator",465],["T_WHITESPACE"," ",465],"=",["T_WHITESPACE"," ",465],["T_NEW","new",465],["T_WHITESPACE"," ",465],["T_NS_SEPARATOR","\\",465],["T_STRING","ArrayIterator",465],"(","[",["T_VARIABLE","$ruleMock",465],"]",")",";",["T_WHITESPACE","\n        ",465],["T_VARIABLE","$this",466],["T_OBJECT_OPERATOR","->",466],["T_STRING","ruleCollection",466],["T_OBJECT_OPERATOR","->",466],["T_STRING","expects",466],"(",["T_VARIABLE","$this",466],["T_OBJECT_OPERATOR","->",466],["T_STRING","any",466],"(",")",")",["T_WHITESPACE","\n            ",466],["T_OBJECT_OPERATOR","->",467],["T_STRING","method",467],"(",["T_CONSTANT_ENCAPSED_STRING","'getIterator'",467],")",["T_WHITESPACE","\n            ",467],["T_OBJECT_OPERATOR","->",468],["T_STRING","willReturn",468],"(",["T_VARIABLE","$iterator",468],")",";",["T_WHITESPACE","\n        ",468],["T_VARIABLE","$this",469],["T_OBJECT_OPERATOR","->",469],["T_STRING","model",469],["T_OBJECT_OPERATOR","->",469],["T_STRING","init",469],"(",["T_WHITESPACE","\n            ",469],["T_VARIABLE","$this",470],["T_OBJECT_OPERATOR","->",470],["T_STRING","model",470],["T_OBJECT_OPERATOR","->",470],["T_STRING","getWebsiteId",470],"(",")",",",["T_WHITESPACE","\n            ",470],["T_VARIABLE","$this",471],["T_OBJECT_OPERATOR","->",471],["T_STRING","model",471],["T_OBJECT_OPERATOR","->",471],["T_STRING","getCustomerGroupId",471],"(",")",",",["T_WHITESPACE","\n            ",471],["T_VARIABLE","$this",472],["T_OBJECT_OPERATOR","->",472],["T_STRING","model",472],["T_OBJECT_OPERATOR","->",472],["T_STRING","getCouponCode",472],"(",")",["T_WHITESPACE","\n        ",472],")",";",["T_WHITESPACE","\n        ",473],["T_VARIABLE","$this",474],["T_OBJECT_OPERATOR","->",474],["T_STRING","assertInstanceOf",474],"(",["T_WHITESPACE","\n            ",474],["T_NS_SEPARATOR","\\",475],["T_STRING","Magento",475],["T_NS_SEPARATOR","\\",475],["T_STRING","SalesRule",475],["T_NS_SEPARATOR","\\",475],["T_STRING","Model",475],["T_NS_SEPARATOR","\\",475],["T_STRING","Validator",475],["T_DOUBLE_COLON","::",475],["T_CLASS","class",475],",",["T_WHITESPACE","\n            ",475],["T_VARIABLE","$this",476],["T_OBJECT_OPERATOR","->",476],["T_STRING","model",476],["T_OBJECT_OPERATOR","->",476],["T_STRING","processShippingAmount",476],"(",["T_VARIABLE","$this",476],["T_OBJECT_OPERATOR","->",476],["T_STRING","setupAddressMock",476],"(",")",")",["T_WHITESPACE","\n        ",476],")",";",["T_WHITESPACE","\n    ",477],"}",["T_WHITESPACE","\n\n    ",478],["T_DOC_COMMENT","\/**\n     * @param string $action\n     * @dataProvider dataProviderActions\n     *\/",480],["T_WHITESPACE","\n    ",483],["T_PUBLIC","public",484],["T_WHITESPACE"," ",484],["T_FUNCTION","function",484],["T_WHITESPACE"," ",484],["T_STRING","testProcessShippingAmountActions",484],"(",["T_VARIABLE","$action",484],")",["T_WHITESPACE","\n    ",484],"{",["T_WHITESPACE","\n        ",485],["T_VARIABLE","$discountAmount",486],["T_WHITESPACE"," ",486],"=",["T_WHITESPACE"," ",486],["T_LNUMBER","50",486],";",["T_WHITESPACE","\n\n        ",486],["T_VARIABLE","$ruleMock",488],["T_WHITESPACE"," ",488],"=",["T_WHITESPACE"," ",488],["T_VARIABLE","$this",488],["T_OBJECT_OPERATOR","->",488],["T_STRING","getMockBuilder",488],"(",["T_NS_SEPARATOR","\\",488],["T_STRING","Magento",488],["T_NS_SEPARATOR","\\",488],["T_STRING","SalesRule",488],["T_NS_SEPARATOR","\\",488],["T_STRING","Model",488],["T_NS_SEPARATOR","\\",488],["T_STRING","Rule",488],["T_DOUBLE_COLON","::",488],["T_CLASS","class",488],")",["T_WHITESPACE","\n            ",488],["T_OBJECT_OPERATOR","->",489],["T_STRING","disableOriginalConstructor",489],"(",")",["T_WHITESPACE","\n            ",489],["T_OBJECT_OPERATOR","->",490],["T_STRING","setMethods",490],"(","[",["T_CONSTANT_ENCAPSED_STRING","'getApplyToShipping'",490],",",["T_WHITESPACE"," ",490],["T_CONSTANT_ENCAPSED_STRING","'getSimpleAction'",490],",",["T_WHITESPACE"," ",490],["T_CONSTANT_ENCAPSED_STRING","'getDiscountAmount'",490],"]",")",["T_WHITESPACE","\n            ",490],["T_OBJECT_OPERATOR","->",491],["T_STRING","getMock",491],"(",")",";",["T_WHITESPACE","\n        ",491],["T_VARIABLE","$ruleMock",492],["T_OBJECT_OPERATOR","->",492],["T_STRING","expects",492],"(",["T_VARIABLE","$this",492],["T_OBJECT_OPERATOR","->",492],["T_STRING","any",492],"(",")",")",["T_WHITESPACE","\n            ",492],["T_OBJECT_OPERATOR","->",493],["T_STRING","method",493],"(",["T_CONSTANT_ENCAPSED_STRING","'getApplyToShipping'",493],")",["T_WHITESPACE","\n            ",493],["T_OBJECT_OPERATOR","->",494],["T_STRING","willReturn",494],"(",["T_STRING","true",494],")",";",["T_WHITESPACE","\n        ",494],["T_VARIABLE","$ruleMock",495],["T_OBJECT_OPERATOR","->",495],["T_STRING","expects",495],"(",["T_VARIABLE","$this",495],["T_OBJECT_OPERATOR","->",495],["T_STRING","any",495],"(",")",")",["T_WHITESPACE","\n            ",495],["T_OBJECT_OPERATOR","->",496],["T_STRING","method",496],"(",["T_CONSTANT_ENCAPSED_STRING","'getDiscountAmount'",496],")",["T_WHITESPACE","\n            ",496],["T_OBJECT_OPERATOR","->",497],["T_STRING","willReturn",497],"(",["T_VARIABLE","$discountAmount",497],")",";",["T_WHITESPACE","\n        ",497],["T_VARIABLE","$ruleMock",498],["T_OBJECT_OPERATOR","->",498],["T_STRING","expects",498],"(",["T_VARIABLE","$this",498],["T_OBJECT_OPERATOR","->",498],["T_STRING","any",498],"(",")",")",["T_WHITESPACE","\n            ",498],["T_OBJECT_OPERATOR","->",499],["T_STRING","method",499],"(",["T_CONSTANT_ENCAPSED_STRING","'getSimpleAction'",499],")",["T_WHITESPACE","\n            ",499],["T_OBJECT_OPERATOR","->",500],["T_STRING","willReturn",500],"(",["T_VARIABLE","$action",500],")",";",["T_WHITESPACE","\n\n        ",500],["T_VARIABLE","$iterator",502],["T_WHITESPACE"," ",502],"=",["T_WHITESPACE"," ",502],["T_NEW","new",502],["T_WHITESPACE"," ",502],["T_NS_SEPARATOR","\\",502],["T_STRING","ArrayIterator",502],"(","[",["T_VARIABLE","$ruleMock",502],"]",")",";",["T_WHITESPACE","\n        ",502],["T_VARIABLE","$this",503],["T_OBJECT_OPERATOR","->",503],["T_STRING","ruleCollection",503],["T_OBJECT_OPERATOR","->",503],["T_STRING","expects",503],"(",["T_VARIABLE","$this",503],["T_OBJECT_OPERATOR","->",503],["T_STRING","any",503],"(",")",")",["T_WHITESPACE","\n            ",503],["T_OBJECT_OPERATOR","->",504],["T_STRING","method",504],"(",["T_CONSTANT_ENCAPSED_STRING","'getIterator'",504],")",["T_WHITESPACE","\n            ",504],["T_OBJECT_OPERATOR","->",505],["T_STRING","willReturn",505],"(",["T_VARIABLE","$iterator",505],")",";",["T_WHITESPACE","\n\n        ",505],["T_VARIABLE","$this",507],["T_OBJECT_OPERATOR","->",507],["T_STRING","utility",507],["T_OBJECT_OPERATOR","->",507],["T_STRING","expects",507],"(",["T_VARIABLE","$this",507],["T_OBJECT_OPERATOR","->",507],["T_STRING","any",507],"(",")",")",["T_WHITESPACE","\n            ",507],["T_OBJECT_OPERATOR","->",508],["T_STRING","method",508],"(",["T_CONSTANT_ENCAPSED_STRING","'canProcessRule'",508],")",["T_WHITESPACE","\n            ",508],["T_OBJECT_OPERATOR","->",509],["T_STRING","willReturn",509],"(",["T_STRING","true",509],")",";",["T_WHITESPACE","\n\n        ",509],["T_VARIABLE","$this",511],["T_OBJECT_OPERATOR","->",511],["T_STRING","model",511],["T_OBJECT_OPERATOR","->",511],["T_STRING","init",511],"(",["T_WHITESPACE","\n            ",511],["T_VARIABLE","$this",512],["T_OBJECT_OPERATOR","->",512],["T_STRING","model",512],["T_OBJECT_OPERATOR","->",512],["T_STRING","getWebsiteId",512],"(",")",",",["T_WHITESPACE","\n            ",512],["T_VARIABLE","$this",513],["T_OBJECT_OPERATOR","->",513],["T_STRING","model",513],["T_OBJECT_OPERATOR","->",513],["T_STRING","getCustomerGroupId",513],"(",")",",",["T_WHITESPACE","\n            ",513],["T_VARIABLE","$this",514],["T_OBJECT_OPERATOR","->",514],["T_STRING","model",514],["T_OBJECT_OPERATOR","->",514],["T_STRING","getCouponCode",514],"(",")",["T_WHITESPACE","\n        ",514],")",";",["T_WHITESPACE","\n        ",515],["T_VARIABLE","$this",516],["T_OBJECT_OPERATOR","->",516],["T_STRING","assertInstanceOf",516],"(",["T_WHITESPACE","\n            ",516],["T_NS_SEPARATOR","\\",517],["T_STRING","Magento",517],["T_NS_SEPARATOR","\\",517],["T_STRING","SalesRule",517],["T_NS_SEPARATOR","\\",517],["T_STRING","Model",517],["T_NS_SEPARATOR","\\",517],["T_STRING","Validator",517],["T_DOUBLE_COLON","::",517],["T_CLASS","class",517],",",["T_WHITESPACE","\n            ",517],["T_VARIABLE","$this",518],["T_OBJECT_OPERATOR","->",518],["T_STRING","model",518],["T_OBJECT_OPERATOR","->",518],["T_STRING","processShippingAmount",518],"(",["T_VARIABLE","$this",518],["T_OBJECT_OPERATOR","->",518],["T_STRING","setupAddressMock",518],"(",["T_LNUMBER","5",518],")",")",["T_WHITESPACE","\n        ",518],")",";",["T_WHITESPACE","\n    ",519],"}",["T_WHITESPACE","\n\n    ",520],["T_PUBLIC","public",522],["T_WHITESPACE"," ",522],["T_STATIC","static",522],["T_WHITESPACE"," ",522],["T_FUNCTION","function",522],["T_WHITESPACE"," ",522],["T_STRING","dataProviderActions",522],"(",")",["T_WHITESPACE","\n    ",522],"{",["T_WHITESPACE","\n        ",523],["T_RETURN","return",524],["T_WHITESPACE"," ",524],"[",["T_WHITESPACE","\n            ",524],"[",["T_NS_SEPARATOR","\\",525],["T_STRING","Magento",525],["T_NS_SEPARATOR","\\",525],["T_STRING","SalesRule",525],["T_NS_SEPARATOR","\\",525],["T_STRING","Model",525],["T_NS_SEPARATOR","\\",525],["T_STRING","Rule",525],["T_DOUBLE_COLON","::",525],["T_STRING","TO_PERCENT_ACTION",525],"]",",",["T_WHITESPACE","\n            ",525],"[",["T_NS_SEPARATOR","\\",526],["T_STRING","Magento",526],["T_NS_SEPARATOR","\\",526],["T_STRING","SalesRule",526],["T_NS_SEPARATOR","\\",526],["T_STRING","Model",526],["T_NS_SEPARATOR","\\",526],["T_STRING","Rule",526],["T_DOUBLE_COLON","::",526],["T_STRING","BY_PERCENT_ACTION",526],"]",",",["T_WHITESPACE","\n            ",526],"[",["T_NS_SEPARATOR","\\",527],["T_STRING","Magento",527],["T_NS_SEPARATOR","\\",527],["T_STRING","SalesRule",527],["T_NS_SEPARATOR","\\",527],["T_STRING","Model",527],["T_NS_SEPARATOR","\\",527],["T_STRING","Rule",527],["T_DOUBLE_COLON","::",527],["T_STRING","TO_FIXED_ACTION",527],"]",",",["T_WHITESPACE","\n            ",527],"[",["T_NS_SEPARATOR","\\",528],["T_STRING","Magento",528],["T_NS_SEPARATOR","\\",528],["T_STRING","SalesRule",528],["T_NS_SEPARATOR","\\",528],["T_STRING","Model",528],["T_NS_SEPARATOR","\\",528],["T_STRING","Rule",528],["T_DOUBLE_COLON","::",528],["T_STRING","BY_FIXED_ACTION",528],"]",",",["T_WHITESPACE","\n            ",528],"[",["T_NS_SEPARATOR","\\",529],["T_STRING","Magento",529],["T_NS_SEPARATOR","\\",529],["T_STRING","SalesRule",529],["T_NS_SEPARATOR","\\",529],["T_STRING","Model",529],["T_NS_SEPARATOR","\\",529],["T_STRING","Rule",529],["T_DOUBLE_COLON","::",529],["T_STRING","CART_FIXED_ACTION",529],"]",",",["T_WHITESPACE","\n        ",529],"]",";",["T_WHITESPACE","\n    ",530],"}",["T_WHITESPACE","\n\n    ",531],["T_DOC_COMMENT","\/**\n     * @param null|int $shippingAmount\n     * @return \\PHPUnit_Framework_MockObject_MockObject\n     *\/",533],["T_WHITESPACE","\n    ",536],["T_PROTECTED","protected",537],["T_WHITESPACE"," ",537],["T_FUNCTION","function",537],["T_WHITESPACE"," ",537],["T_STRING","setupAddressMock",537],"(",["T_VARIABLE","$shippingAmount",537],["T_WHITESPACE"," ",537],"=",["T_WHITESPACE"," ",537],["T_STRING","null",537],")",["T_WHITESPACE","\n    ",537],"{",["T_WHITESPACE","\n        ",538],["T_VARIABLE","$storeMock",539],["T_WHITESPACE"," ",539],"=",["T_WHITESPACE"," ",539],["T_VARIABLE","$this",539],["T_OBJECT_OPERATOR","->",539],["T_STRING","getMockBuilder",539],"(",["T_NS_SEPARATOR","\\",539],["T_STRING","Magento",539],["T_NS_SEPARATOR","\\",539],["T_STRING","Store",539],["T_NS_SEPARATOR","\\",539],["T_STRING","Model",539],["T_NS_SEPARATOR","\\",539],["T_STRING","Store",539],["T_DOUBLE_COLON","::",539],["T_CLASS","class",539],")",["T_WHITESPACE","\n            ",539],["T_OBJECT_OPERATOR","->",540],["T_STRING","disableOriginalConstructor",540],"(",")",["T_WHITESPACE","\n            ",540],["T_OBJECT_OPERATOR","->",541],["T_STRING","setMethods",541],"(","[","]",")",["T_WHITESPACE","\n            ",541],["T_OBJECT_OPERATOR","->",542],["T_STRING","getMock",542],"(",")",";",["T_WHITESPACE","\n        ",542],["T_VARIABLE","$quoteMock",543],["T_WHITESPACE"," ",543],"=",["T_WHITESPACE"," ",543],["T_VARIABLE","$this",543],["T_OBJECT_OPERATOR","->",543],["T_STRING","getMockBuilder",543],"(",["T_NS_SEPARATOR","\\",543],["T_STRING","Magento",543],["T_NS_SEPARATOR","\\",543],["T_STRING","Quote",543],["T_NS_SEPARATOR","\\",543],["T_STRING","Model",543],["T_NS_SEPARATOR","\\",543],["T_STRING","Quote",543],["T_DOUBLE_COLON","::",543],["T_CLASS","class",543],")",["T_WHITESPACE","\n            ",543],["T_OBJECT_OPERATOR","->",544],["T_STRING","disableOriginalConstructor",544],"(",")",["T_WHITESPACE","\n            ",544],["T_OBJECT_OPERATOR","->",545],["T_STRING","setMethods",545],"(","[",["T_CONSTANT_ENCAPSED_STRING","'setAppliedRuleIds'",545],",",["T_WHITESPACE"," ",545],["T_CONSTANT_ENCAPSED_STRING","'getStore'",545],"]",")",["T_WHITESPACE","\n            ",545],["T_OBJECT_OPERATOR","->",546],["T_STRING","getMock",546],"(",")",";",["T_WHITESPACE","\n        ",546],["T_VARIABLE","$quoteMock",547],["T_OBJECT_OPERATOR","->",547],["T_STRING","expects",547],"(",["T_VARIABLE","$this",547],["T_OBJECT_OPERATOR","->",547],["T_STRING","any",547],"(",")",")",["T_WHITESPACE","\n            ",547],["T_OBJECT_OPERATOR","->",548],["T_STRING","method",548],"(",["T_CONSTANT_ENCAPSED_STRING","'getStore'",548],")",["T_WHITESPACE","\n            ",548],["T_OBJECT_OPERATOR","->",549],["T_STRING","willReturn",549],"(",["T_VARIABLE","$storeMock",549],")",";",["T_WHITESPACE","\n        ",549],["T_VARIABLE","$quoteMock",550],["T_OBJECT_OPERATOR","->",550],["T_STRING","expects",550],"(",["T_VARIABLE","$this",550],["T_OBJECT_OPERATOR","->",550],["T_STRING","any",550],"(",")",")",["T_WHITESPACE","\n            ",550],["T_OBJECT_OPERATOR","->",551],["T_STRING","method",551],"(",["T_CONSTANT_ENCAPSED_STRING","'setAppliedRuleIds'",551],")",["T_WHITESPACE","\n            ",551],["T_OBJECT_OPERATOR","->",552],["T_STRING","willReturnSelf",552],"(",")",";",["T_WHITESPACE","\n\n        ",552],["T_VARIABLE","$this",554],["T_OBJECT_OPERATOR","->",554],["T_STRING","addressMock",554],["T_OBJECT_OPERATOR","->",554],["T_STRING","expects",554],"(",["T_VARIABLE","$this",554],["T_OBJECT_OPERATOR","->",554],["T_STRING","any",554],"(",")",")",["T_WHITESPACE","\n            ",554],["T_OBJECT_OPERATOR","->",555],["T_STRING","method",555],"(",["T_CONSTANT_ENCAPSED_STRING","'getShippingAmountForDiscount'",555],")",["T_WHITESPACE","\n            ",555],["T_OBJECT_OPERATOR","->",556],["T_STRING","willReturn",556],"(",["T_VARIABLE","$shippingAmount",556],")",";",["T_WHITESPACE","\n        ",556],["T_VARIABLE","$this",557],["T_OBJECT_OPERATOR","->",557],["T_STRING","addressMock",557],["T_OBJECT_OPERATOR","->",557],["T_STRING","expects",557],"(",["T_VARIABLE","$this",557],["T_OBJECT_OPERATOR","->",557],["T_STRING","any",557],"(",")",")",["T_WHITESPACE","\n            ",557],["T_OBJECT_OPERATOR","->",558],["T_STRING","method",558],"(",["T_CONSTANT_ENCAPSED_STRING","'getQuote'",558],")",["T_WHITESPACE","\n            ",558],["T_OBJECT_OPERATOR","->",559],["T_STRING","willReturn",559],"(",["T_VARIABLE","$quoteMock",559],")",";",["T_WHITESPACE","\n        ",559],["T_VARIABLE","$this",560],["T_OBJECT_OPERATOR","->",560],["T_STRING","addressMock",560],["T_OBJECT_OPERATOR","->",560],["T_STRING","expects",560],"(",["T_VARIABLE","$this",560],["T_OBJECT_OPERATOR","->",560],["T_STRING","any",560],"(",")",")",["T_WHITESPACE","\n            ",560],["T_OBJECT_OPERATOR","->",561],["T_STRING","method",561],"(",["T_CONSTANT_ENCAPSED_STRING","'getCustomAttributesCodes'",561],")",["T_WHITESPACE","\n            ",561],["T_OBJECT_OPERATOR","->",562],["T_STRING","willReturn",562],"(","[","]",")",";",["T_WHITESPACE","\n        ",562],["T_RETURN","return",563],["T_WHITESPACE"," ",563],["T_VARIABLE","$this",563],["T_OBJECT_OPERATOR","->",563],["T_STRING","addressMock",563],";",["T_WHITESPACE","\n    ",563],"}",["T_WHITESPACE","\n\n    ",564],["T_PUBLIC","public",566],["T_WHITESPACE"," ",566],["T_FUNCTION","function",566],["T_WHITESPACE"," ",566],["T_STRING","testReset",566],"(",")",["T_WHITESPACE","\n    ",566],"{",["T_WHITESPACE","\n        ",567],["T_VARIABLE","$this",568],["T_OBJECT_OPERATOR","->",568],["T_STRING","utility",568],["T_OBJECT_OPERATOR","->",568],["T_STRING","expects",568],"(",["T_VARIABLE","$this",568],["T_OBJECT_OPERATOR","->",568],["T_STRING","once",568],"(",")",")",["T_WHITESPACE","\n            ",568],["T_OBJECT_OPERATOR","->",569],["T_STRING","method",569],"(",["T_CONSTANT_ENCAPSED_STRING","'resetRoundingDeltas'",569],")",";",["T_WHITESPACE","\n        ",569],["T_VARIABLE","$quoteMock",570],["T_WHITESPACE"," ",570],"=",["T_WHITESPACE"," ",570],["T_VARIABLE","$this",570],["T_OBJECT_OPERATOR","->",570],["T_STRING","getMockBuilder",570],"(",["T_NS_SEPARATOR","\\",570],["T_STRING","Magento",570],["T_NS_SEPARATOR","\\",570],["T_STRING","Quote",570],["T_NS_SEPARATOR","\\",570],["T_STRING","Model",570],["T_NS_SEPARATOR","\\",570],["T_STRING","Quote",570],["T_DOUBLE_COLON","::",570],["T_CLASS","class",570],")",["T_WHITESPACE","\n            ",570],["T_OBJECT_OPERATOR","->",571],["T_STRING","disableOriginalConstructor",571],"(",")",["T_WHITESPACE","\n            ",571],["T_OBJECT_OPERATOR","->",572],["T_STRING","getMock",572],"(",")",";",["T_WHITESPACE","\n        ",572],["T_VARIABLE","$addressMock",573],["T_WHITESPACE"," ",573],"=",["T_WHITESPACE"," ",573],["T_VARIABLE","$this",573],["T_OBJECT_OPERATOR","->",573],["T_STRING","getMockBuilder",573],"(",["T_NS_SEPARATOR","\\",573],["T_STRING","Magento",573],["T_NS_SEPARATOR","\\",573],["T_STRING","Quote",573],["T_NS_SEPARATOR","\\",573],["T_STRING","Model",573],["T_NS_SEPARATOR","\\",573],["T_STRING","Quote",573],["T_NS_SEPARATOR","\\",573],["T_STRING","Address",573],["T_DOUBLE_COLON","::",573],["T_CLASS","class",573],")",["T_WHITESPACE","\n            ",573],["T_OBJECT_OPERATOR","->",574],["T_STRING","disableOriginalConstructor",574],"(",")",["T_WHITESPACE","\n            ",574],["T_OBJECT_OPERATOR","->",575],["T_STRING","getMock",575],"(",")",";",["T_WHITESPACE","\n        ",575],["T_VARIABLE","$addressMock",576],["T_OBJECT_OPERATOR","->",576],["T_STRING","expects",576],"(",["T_VARIABLE","$this",576],["T_OBJECT_OPERATOR","->",576],["T_STRING","once",576],"(",")",")",["T_WHITESPACE","\n            ",576],["T_OBJECT_OPERATOR","->",577],["T_STRING","method",577],"(",["T_CONSTANT_ENCAPSED_STRING","'getQuote'",577],")",["T_WHITESPACE","\n            ",577],["T_OBJECT_OPERATOR","->",578],["T_STRING","willReturn",578],"(",["T_VARIABLE","$quoteMock",578],")",";",["T_WHITESPACE","\n        ",578],["T_VARIABLE","$this",579],["T_OBJECT_OPERATOR","->",579],["T_STRING","model",579],["T_OBJECT_OPERATOR","->",579],["T_STRING","init",579],"(",["T_WHITESPACE","\n            ",579],["T_VARIABLE","$this",580],["T_OBJECT_OPERATOR","->",580],["T_STRING","model",580],["T_OBJECT_OPERATOR","->",580],["T_STRING","getWebsiteId",580],"(",")",",",["T_WHITESPACE","\n            ",580],["T_VARIABLE","$this",581],["T_OBJECT_OPERATOR","->",581],["T_STRING","model",581],["T_OBJECT_OPERATOR","->",581],["T_STRING","getCustomerGroupId",581],"(",")",",",["T_WHITESPACE","\n            ",581],["T_VARIABLE","$this",582],["T_OBJECT_OPERATOR","->",582],["T_STRING","model",582],["T_OBJECT_OPERATOR","->",582],["T_STRING","getCouponCode",582],"(",")",["T_WHITESPACE","\n        ",582],")",";",["T_WHITESPACE","\n        ",583],["T_VARIABLE","$this",584],["T_OBJECT_OPERATOR","->",584],["T_STRING","assertInstanceOf",584],"(",["T_NS_SEPARATOR","\\",584],["T_STRING","Magento",584],["T_NS_SEPARATOR","\\",584],["T_STRING","SalesRule",584],["T_NS_SEPARATOR","\\",584],["T_STRING","Model",584],["T_NS_SEPARATOR","\\",584],["T_STRING","Validator",584],["T_DOUBLE_COLON","::",584],["T_CLASS","class",584],",",["T_WHITESPACE"," ",584],["T_VARIABLE","$this",584],["T_OBJECT_OPERATOR","->",584],["T_STRING","model",584],["T_OBJECT_OPERATOR","->",584],["T_STRING","reset",584],"(",["T_VARIABLE","$addressMock",584],")",")",";",["T_WHITESPACE","\n    ",584],"}",["T_WHITESPACE","\n",585],"}",["T_WHITESPACE","\n",586]]
[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Copyright \u00c2\u00a9 2013-2017 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n *\/",2],["T_WHITESPACE","\n",5],["T_NAMESPACE","namespace",6],["T_WHITESPACE"," ",6],["T_STRING","Magento",6],["T_NS_SEPARATOR","\\",6],["T_STRING","SalesRule",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Test",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Unit",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Model",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Quote",6],";",["T_WHITESPACE","\n\n",6],["T_USE","use",8],["T_WHITESPACE"," ",8],["T_STRING","Magento",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Framework",8],["T_NS_SEPARATOR","\\",8],["T_STRING","DataObject",8],["T_WHITESPACE"," ",8],["T_AS","as",8],["T_WHITESPACE"," ",8],["T_STRING","MagentoObject",8],";",["T_WHITESPACE","\n\n",8],["T_DOC_COMMENT","\/**\n * Class DiscountTest\n *\n * @SuppressWarnings(PHPMD.CouplingBetweenObjects)\n *\/",10],["T_WHITESPACE","\n",14],["T_CLASS","class",15],["T_WHITESPACE"," ",15],["T_STRING","DiscountTest",15],["T_WHITESPACE"," ",15],["T_EXTENDS","extends",15],["T_WHITESPACE"," ",15],["T_NS_SEPARATOR","\\",15],["T_STRING","PHPUnit_Framework_TestCase",15],["T_WHITESPACE","\n",15],"{",["T_WHITESPACE","\n    ",16],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\SalesRule\\Model\\Quote\\Discount\n     *\/",17],["T_WHITESPACE","\n    ",19],["T_PROTECTED","protected",20],["T_WHITESPACE"," ",20],["T_VARIABLE","$discount",20],";",["T_WHITESPACE","\n\n    ",20],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Framework\\TestFramework\\Unit\\Helper\\ObjectManager\n     *\/",22],["T_WHITESPACE","\n    ",24],["T_PROTECTED","protected",25],["T_WHITESPACE"," ",25],["T_VARIABLE","$objectManager",25],";",["T_WHITESPACE","\n\n    ",25],["T_DOC_COMMENT","\/**\n     * @var \\PHPUnit_Framework_MockObject_MockObject\n     *\/",27],["T_WHITESPACE","\n    ",29],["T_PROTECTED","protected",30],["T_WHITESPACE"," ",30],["T_VARIABLE","$storeManagerMock",30],";",["T_WHITESPACE","\n\n    ",30],["T_DOC_COMMENT","\/**\n     * @var \\PHPUnit_Framework_MockObject_MockObject\n     *\/",32],["T_WHITESPACE","\n    ",34],["T_PROTECTED","protected",35],["T_WHITESPACE"," ",35],["T_VARIABLE","$validatorMock",35],";",["T_WHITESPACE","\n\n    ",35],["T_DOC_COMMENT","\/**\n     * @var \\PHPUnit_Framework_MockObject_MockObject\n     *\/",37],["T_WHITESPACE","\n    ",39],["T_PROTECTED","protected",40],["T_WHITESPACE"," ",40],["T_VARIABLE","$eventManagerMock",40],";",["T_WHITESPACE","\n\n    ",40],["T_DOC_COMMENT","\/**\n     * @var \\PHPUnit_Framework_MockObject_MockObject\n     *\/",42],["T_WHITESPACE","\n    ",44],["T_PROTECTED","protected",45],["T_WHITESPACE"," ",45],["T_VARIABLE","$shippingAssignmentMock",45],";",["T_WHITESPACE","\n\n    ",45],["T_DOC_COMMENT","\/**\n     * @var \\PHPUnit_Framework_MockObject_MockObject\n     *\/",47],["T_WHITESPACE","\n    ",49],["T_PROTECTED","protected",50],["T_WHITESPACE"," ",50],["T_VARIABLE","$addressMock",50],";",["T_WHITESPACE","\n\n    ",50],["T_PROTECTED","protected",52],["T_WHITESPACE"," ",52],["T_FUNCTION","function",52],["T_WHITESPACE"," ",52],["T_STRING","setUp",52],"(",")",["T_WHITESPACE","\n    ",52],"{",["T_WHITESPACE","\n        ",53],["T_VARIABLE","$this",54],["T_OBJECT_OPERATOR","->",54],["T_STRING","objectManager",54],["T_WHITESPACE"," ",54],"=",["T_WHITESPACE"," ",54],["T_NEW","new",54],["T_WHITESPACE"," ",54],["T_NS_SEPARATOR","\\",54],["T_STRING","Magento",54],["T_NS_SEPARATOR","\\",54],["T_STRING","Framework",54],["T_NS_SEPARATOR","\\",54],["T_STRING","TestFramework",54],["T_NS_SEPARATOR","\\",54],["T_STRING","Unit",54],["T_NS_SEPARATOR","\\",54],["T_STRING","Helper",54],["T_NS_SEPARATOR","\\",54],["T_STRING","ObjectManager",54],"(",["T_VARIABLE","$this",54],")",";",["T_WHITESPACE","\n        ",54],["T_VARIABLE","$this",55],["T_OBJECT_OPERATOR","->",55],["T_STRING","storeManagerMock",55],["T_WHITESPACE"," ",55],"=",["T_WHITESPACE"," ",55],["T_VARIABLE","$this",55],["T_OBJECT_OPERATOR","->",55],["T_STRING","getMock",55],"(",["T_NS_SEPARATOR","\\",55],["T_STRING","Magento",55],["T_NS_SEPARATOR","\\",55],["T_STRING","Store",55],["T_NS_SEPARATOR","\\",55],["T_STRING","Model",55],["T_NS_SEPARATOR","\\",55],["T_STRING","StoreManager",55],["T_DOUBLE_COLON","::",55],["T_CLASS","class",55],",",["T_WHITESPACE"," ",55],"[","]",",",["T_WHITESPACE"," ",55],"[","]",",",["T_WHITESPACE"," ",55],["T_CONSTANT_ENCAPSED_STRING","''",55],",",["T_WHITESPACE"," ",55],["T_STRING","false",55],")",";",["T_WHITESPACE","\n        ",55],["T_VARIABLE","$this",56],["T_OBJECT_OPERATOR","->",56],["T_STRING","validatorMock",56],["T_WHITESPACE"," ",56],"=",["T_WHITESPACE"," ",56],["T_VARIABLE","$this",56],["T_OBJECT_OPERATOR","->",56],["T_STRING","getMockBuilder",56],"(",["T_NS_SEPARATOR","\\",56],["T_STRING","Magento",56],["T_NS_SEPARATOR","\\",56],["T_STRING","SalesRule",56],["T_NS_SEPARATOR","\\",56],["T_STRING","Model",56],["T_NS_SEPARATOR","\\",56],["T_STRING","Validator",56],["T_DOUBLE_COLON","::",56],["T_CLASS","class",56],")",["T_WHITESPACE","\n            ",56],["T_OBJECT_OPERATOR","->",57],["T_STRING","disableOriginalConstructor",57],"(",")",["T_WHITESPACE","\n            ",57],["T_OBJECT_OPERATOR","->",58],["T_STRING","setMethods",58],"(",["T_WHITESPACE","\n                ",58],"[",["T_WHITESPACE","\n                    ",59],["T_CONSTANT_ENCAPSED_STRING","'canApplyRules'",60],",",["T_WHITESPACE","\n                    ",60],["T_CONSTANT_ENCAPSED_STRING","'reset'",61],",",["T_WHITESPACE","\n                    ",61],["T_CONSTANT_ENCAPSED_STRING","'init'",62],",",["T_WHITESPACE","\n                    ",62],["T_CONSTANT_ENCAPSED_STRING","'initTotals'",63],",",["T_WHITESPACE","\n                    ",63],["T_CONSTANT_ENCAPSED_STRING","'sortItemsByPriority'",64],",",["T_WHITESPACE","\n                    ",64],["T_CONSTANT_ENCAPSED_STRING","'setSkipActionsValidation'",65],",",["T_WHITESPACE","\n                    ",65],["T_CONSTANT_ENCAPSED_STRING","'process'",66],",",["T_WHITESPACE","\n                    ",66],["T_CONSTANT_ENCAPSED_STRING","'processShippingAmount'",67],",",["T_WHITESPACE","\n                    ",67],["T_CONSTANT_ENCAPSED_STRING","'canApplyDiscount'",68],",",["T_WHITESPACE","\n                    ",68],["T_CONSTANT_ENCAPSED_STRING","'__wakeup'",69],",",["T_WHITESPACE","\n                ",69],"]",["T_WHITESPACE","\n            ",70],")",["T_WHITESPACE","\n            ",71],["T_OBJECT_OPERATOR","->",72],["T_STRING","getMock",72],"(",")",";",["T_WHITESPACE","\n        ",72],["T_VARIABLE","$this",73],["T_OBJECT_OPERATOR","->",73],["T_STRING","eventManagerMock",73],["T_WHITESPACE"," ",73],"=",["T_WHITESPACE"," ",73],["T_VARIABLE","$this",73],["T_OBJECT_OPERATOR","->",73],["T_STRING","getMock",73],"(",["T_NS_SEPARATOR","\\",73],["T_STRING","Magento",73],["T_NS_SEPARATOR","\\",73],["T_STRING","Framework",73],["T_NS_SEPARATOR","\\",73],["T_STRING","Event",73],["T_NS_SEPARATOR","\\",73],["T_STRING","Manager",73],["T_DOUBLE_COLON","::",73],["T_CLASS","class",73],",",["T_WHITESPACE"," ",73],"[","]",",",["T_WHITESPACE"," ",73],"[","]",",",["T_WHITESPACE"," ",73],["T_CONSTANT_ENCAPSED_STRING","''",73],",",["T_WHITESPACE"," ",73],["T_STRING","false",73],")",";",["T_WHITESPACE","\n        ",73],["T_VARIABLE","$priceCurrencyMock",74],["T_WHITESPACE"," ",74],"=",["T_WHITESPACE"," ",74],["T_VARIABLE","$this",74],["T_OBJECT_OPERATOR","->",74],["T_STRING","getMock",74],"(",["T_NS_SEPARATOR","\\",74],["T_STRING","Magento",74],["T_NS_SEPARATOR","\\",74],["T_STRING","Framework",74],["T_NS_SEPARATOR","\\",74],["T_STRING","Pricing",74],["T_NS_SEPARATOR","\\",74],["T_STRING","PriceCurrencyInterface",74],["T_DOUBLE_COLON","::",74],["T_CLASS","class",74],")",";",["T_WHITESPACE","\n        ",74],["T_VARIABLE","$priceCurrencyMock",75],["T_OBJECT_OPERATOR","->",75],["T_STRING","expects",75],"(",["T_VARIABLE","$this",75],["T_OBJECT_OPERATOR","->",75],["T_STRING","any",75],"(",")",")",["T_WHITESPACE","\n            ",75],["T_OBJECT_OPERATOR","->",76],["T_STRING","method",76],"(",["T_CONSTANT_ENCAPSED_STRING","'round'",76],")",["T_WHITESPACE","\n            ",76],["T_OBJECT_OPERATOR","->",77],["T_STRING","will",77],"(",["T_VARIABLE","$this",77],["T_OBJECT_OPERATOR","->",77],["T_STRING","returnCallback",77],"(",["T_WHITESPACE","\n                ",77],["T_FUNCTION","function",78],["T_WHITESPACE"," ",78],"(",["T_VARIABLE","$argument",78],")",["T_WHITESPACE"," ",78],"{",["T_WHITESPACE","\n                    ",78],["T_RETURN","return",79],["T_WHITESPACE"," ",79],["T_STRING","round",79],"(",["T_VARIABLE","$argument",79],",",["T_WHITESPACE"," ",79],["T_LNUMBER","2",79],")",";",["T_WHITESPACE","\n                ",79],"}",["T_WHITESPACE","\n            ",80],")",")",";",["T_WHITESPACE","\n\n        ",81],["T_VARIABLE","$this",83],["T_OBJECT_OPERATOR","->",83],["T_STRING","addressMock",83],["T_WHITESPACE"," ",83],"=",["T_WHITESPACE"," ",83],["T_VARIABLE","$this",83],["T_OBJECT_OPERATOR","->",83],["T_STRING","getMock",83],"(",["T_WHITESPACE","\n            ",83],["T_NS_SEPARATOR","\\",84],["T_STRING","Magento",84],["T_NS_SEPARATOR","\\",84],["T_STRING","Quote",84],["T_NS_SEPARATOR","\\",84],["T_STRING","Model",84],["T_NS_SEPARATOR","\\",84],["T_STRING","Quote",84],["T_NS_SEPARATOR","\\",84],["T_STRING","Address",84],["T_DOUBLE_COLON","::",84],["T_CLASS","class",84],",",["T_WHITESPACE","\n            ",84],"[",["T_CONSTANT_ENCAPSED_STRING","'getQuote'",85],",",["T_WHITESPACE"," ",85],["T_CONSTANT_ENCAPSED_STRING","'getAllItems'",85],",",["T_WHITESPACE"," ",85],["T_CONSTANT_ENCAPSED_STRING","'getShippingAmount'",85],",",["T_WHITESPACE"," ",85],["T_CONSTANT_ENCAPSED_STRING","'__wakeup'",85],",",["T_WHITESPACE"," ",85],["T_CONSTANT_ENCAPSED_STRING","'getCustomAttributesCodes'",85],"]",",",["T_WHITESPACE","\n            ",85],"[","]",",",["T_WHITESPACE","\n            ",86],["T_CONSTANT_ENCAPSED_STRING","''",87],",",["T_WHITESPACE","\n            ",87],["T_STRING","false",88],["T_WHITESPACE","\n        ",88],")",";",["T_WHITESPACE","\n        ",89],["T_VARIABLE","$this",90],["T_OBJECT_OPERATOR","->",90],["T_STRING","addressMock",90],["T_OBJECT_OPERATOR","->",90],["T_STRING","expects",90],"(",["T_VARIABLE","$this",90],["T_OBJECT_OPERATOR","->",90],["T_STRING","any",90],"(",")",")",["T_WHITESPACE","\n            ",90],["T_OBJECT_OPERATOR","->",91],["T_STRING","method",91],"(",["T_CONSTANT_ENCAPSED_STRING","'getCustomAttributesCodes'",91],")",["T_WHITESPACE","\n            ",91],["T_OBJECT_OPERATOR","->",92],["T_STRING","willReturn",92],"(","[","]",")",";",["T_WHITESPACE","\n\n        ",92],["T_VARIABLE","$shipping",94],["T_WHITESPACE"," ",94],"=",["T_WHITESPACE"," ",94],["T_VARIABLE","$this",94],["T_OBJECT_OPERATOR","->",94],["T_STRING","getMock",94],"(",["T_NS_SEPARATOR","\\",94],["T_STRING","Magento",94],["T_NS_SEPARATOR","\\",94],["T_STRING","Quote",94],["T_NS_SEPARATOR","\\",94],["T_STRING","Api",94],["T_NS_SEPARATOR","\\",94],["T_STRING","Data",94],["T_NS_SEPARATOR","\\",94],["T_STRING","ShippingInterface",94],["T_DOUBLE_COLON","::",94],["T_CLASS","class",94],")",";",["T_WHITESPACE","\n        ",94],["T_VARIABLE","$shipping",95],["T_OBJECT_OPERATOR","->",95],["T_STRING","expects",95],"(",["T_VARIABLE","$this",95],["T_OBJECT_OPERATOR","->",95],["T_STRING","any",95],"(",")",")",["T_OBJECT_OPERATOR","->",95],["T_STRING","method",95],"(",["T_CONSTANT_ENCAPSED_STRING","'getAddress'",95],")",["T_OBJECT_OPERATOR","->",95],["T_STRING","willReturn",95],"(",["T_VARIABLE","$this",95],["T_OBJECT_OPERATOR","->",95],["T_STRING","addressMock",95],")",";",["T_WHITESPACE","\n        ",95],["T_VARIABLE","$this",96],["T_OBJECT_OPERATOR","->",96],["T_STRING","shippingAssignmentMock",96],["T_WHITESPACE"," ",96],"=",["T_WHITESPACE"," ",96],["T_VARIABLE","$this",96],["T_OBJECT_OPERATOR","->",96],["T_STRING","getMock",96],"(",["T_NS_SEPARATOR","\\",96],["T_STRING","Magento",96],["T_NS_SEPARATOR","\\",96],["T_STRING","Quote",96],["T_NS_SEPARATOR","\\",96],["T_STRING","Api",96],["T_NS_SEPARATOR","\\",96],["T_STRING","Data",96],["T_NS_SEPARATOR","\\",96],["T_STRING","ShippingAssignmentInterface",96],["T_DOUBLE_COLON","::",96],["T_CLASS","class",96],")",";",["T_WHITESPACE","\n        ",96],["T_VARIABLE","$this",97],["T_OBJECT_OPERATOR","->",97],["T_STRING","shippingAssignmentMock",97],["T_OBJECT_OPERATOR","->",97],["T_STRING","expects",97],"(",["T_VARIABLE","$this",97],["T_OBJECT_OPERATOR","->",97],["T_STRING","any",97],"(",")",")",["T_OBJECT_OPERATOR","->",97],["T_STRING","method",97],"(",["T_CONSTANT_ENCAPSED_STRING","'getShipping'",97],")",["T_OBJECT_OPERATOR","->",97],["T_STRING","willReturn",97],"(",["T_VARIABLE","$shipping",97],")",";",["T_WHITESPACE","\n\n        ",97],["T_DOC_COMMENT","\/** @var \\Magento\\SalesRule\\Model\\Quote\\Discount $discount *\/",99],["T_WHITESPACE","\n        ",99],["T_VARIABLE","$this",100],["T_OBJECT_OPERATOR","->",100],["T_STRING","discount",100],["T_WHITESPACE"," ",100],"=",["T_WHITESPACE"," ",100],["T_VARIABLE","$this",100],["T_OBJECT_OPERATOR","->",100],["T_STRING","objectManager",100],["T_OBJECT_OPERATOR","->",100],["T_STRING","getObject",100],"(",["T_WHITESPACE","\n            ",100],["T_NS_SEPARATOR","\\",101],["T_STRING","Magento",101],["T_NS_SEPARATOR","\\",101],["T_STRING","SalesRule",101],["T_NS_SEPARATOR","\\",101],["T_STRING","Model",101],["T_NS_SEPARATOR","\\",101],["T_STRING","Quote",101],["T_NS_SEPARATOR","\\",101],["T_STRING","Discount",101],["T_DOUBLE_COLON","::",101],["T_CLASS","class",101],",",["T_WHITESPACE","\n            ",101],"[",["T_WHITESPACE","\n                ",102],["T_CONSTANT_ENCAPSED_STRING","'storeManager'",103],["T_WHITESPACE"," ",103],["T_DOUBLE_ARROW","=>",103],["T_WHITESPACE"," ",103],["T_VARIABLE","$this",103],["T_OBJECT_OPERATOR","->",103],["T_STRING","storeManagerMock",103],",",["T_WHITESPACE","\n                ",103],["T_CONSTANT_ENCAPSED_STRING","'validator'",104],["T_WHITESPACE"," ",104],["T_DOUBLE_ARROW","=>",104],["T_WHITESPACE"," ",104],["T_VARIABLE","$this",104],["T_OBJECT_OPERATOR","->",104],["T_STRING","validatorMock",104],",",["T_WHITESPACE","\n                ",104],["T_CONSTANT_ENCAPSED_STRING","'eventManager'",105],["T_WHITESPACE"," ",105],["T_DOUBLE_ARROW","=>",105],["T_WHITESPACE"," ",105],["T_VARIABLE","$this",105],["T_OBJECT_OPERATOR","->",105],["T_STRING","eventManagerMock",105],",",["T_WHITESPACE","\n                ",105],["T_CONSTANT_ENCAPSED_STRING","'priceCurrency'",106],["T_WHITESPACE"," ",106],["T_DOUBLE_ARROW","=>",106],["T_WHITESPACE"," ",106],["T_VARIABLE","$priceCurrencyMock",106],",",["T_WHITESPACE","\n            ",106],"]",["T_WHITESPACE","\n        ",107],")",";",["T_WHITESPACE","\n    ",108],"}",["T_WHITESPACE","\n\n    ",109],["T_PUBLIC","public",111],["T_WHITESPACE"," ",111],["T_FUNCTION","function",111],["T_WHITESPACE"," ",111],["T_STRING","testCollectItemNoDiscount",111],"(",")",["T_WHITESPACE","\n    ",111],"{",["T_WHITESPACE","\n        ",112],["T_VARIABLE","$itemNoDiscount",113],["T_WHITESPACE"," ",113],"=",["T_WHITESPACE"," ",113],["T_VARIABLE","$this",113],["T_OBJECT_OPERATOR","->",113],["T_STRING","getMock",113],"(",["T_WHITESPACE","\n            ",113],["T_NS_SEPARATOR","\\",114],["T_STRING","Magento",114],["T_NS_SEPARATOR","\\",114],["T_STRING","Quote",114],["T_NS_SEPARATOR","\\",114],["T_STRING","Model",114],["T_NS_SEPARATOR","\\",114],["T_STRING","Quote",114],["T_NS_SEPARATOR","\\",114],["T_STRING","Item",114],["T_DOUBLE_COLON","::",114],["T_CLASS","class",114],",",["T_WHITESPACE","\n            ",114],"[",["T_CONSTANT_ENCAPSED_STRING","'getNoDiscount'",115],",",["T_WHITESPACE"," ",115],["T_CONSTANT_ENCAPSED_STRING","'__wakeup'",115],"]",",",["T_WHITESPACE","\n            ",115],"[","]",",",["T_WHITESPACE","\n            ",116],["T_CONSTANT_ENCAPSED_STRING","''",117],",",["T_WHITESPACE","\n            ",117],["T_STRING","false",118],["T_WHITESPACE","\n        ",118],")",";",["T_WHITESPACE","\n        ",119],["T_VARIABLE","$itemNoDiscount",120],["T_OBJECT_OPERATOR","->",120],["T_STRING","expects",120],"(",["T_VARIABLE","$this",120],["T_OBJECT_OPERATOR","->",120],["T_STRING","once",120],"(",")",")",["T_OBJECT_OPERATOR","->",120],["T_STRING","method",120],"(",["T_CONSTANT_ENCAPSED_STRING","'getNoDiscount'",120],")",["T_OBJECT_OPERATOR","->",120],["T_STRING","willReturn",120],"(",["T_STRING","true",120],")",";",["T_WHITESPACE","\n        ",120],["T_VARIABLE","$this",121],["T_OBJECT_OPERATOR","->",121],["T_STRING","validatorMock",121],["T_OBJECT_OPERATOR","->",121],["T_STRING","expects",121],"(",["T_VARIABLE","$this",121],["T_OBJECT_OPERATOR","->",121],["T_STRING","once",121],"(",")",")",["T_OBJECT_OPERATOR","->",121],["T_STRING","method",121],"(",["T_CONSTANT_ENCAPSED_STRING","'sortItemsByPriority'",121],")",["T_WHITESPACE","\n            ",121],["T_OBJECT_OPERATOR","->",122],["T_STRING","with",122],"(","[",["T_VARIABLE","$itemNoDiscount",122],"]",",",["T_WHITESPACE"," ",122],["T_VARIABLE","$this",122],["T_OBJECT_OPERATOR","->",122],["T_STRING","addressMock",122],")",["T_WHITESPACE","\n            ",122],["T_OBJECT_OPERATOR","->",123],["T_STRING","willReturnArgument",123],"(",["T_LNUMBER","0",123],")",";",["T_WHITESPACE","\n        ",123],["T_VARIABLE","$storeMock",124],["T_WHITESPACE"," ",124],"=",["T_WHITESPACE"," ",124],["T_VARIABLE","$this",124],["T_OBJECT_OPERATOR","->",124],["T_STRING","getMock",124],"(",["T_NS_SEPARATOR","\\",124],["T_STRING","Magento",124],["T_NS_SEPARATOR","\\",124],["T_STRING","Store",124],["T_NS_SEPARATOR","\\",124],["T_STRING","Model",124],["T_NS_SEPARATOR","\\",124],["T_STRING","Store",124],["T_DOUBLE_COLON","::",124],["T_CLASS","class",124],",",["T_WHITESPACE"," ",124],"[",["T_CONSTANT_ENCAPSED_STRING","'getStore'",124],",",["T_WHITESPACE"," ",124],["T_CONSTANT_ENCAPSED_STRING","'__wakeup'",124],"]",",",["T_WHITESPACE"," ",124],"[","]",",",["T_WHITESPACE"," ",124],["T_CONSTANT_ENCAPSED_STRING","''",124],",",["T_WHITESPACE"," ",124],["T_STRING","false",124],")",";",["T_WHITESPACE","\n        ",124],["T_VARIABLE","$this",125],["T_OBJECT_OPERATOR","->",125],["T_STRING","storeManagerMock",125],["T_OBJECT_OPERATOR","->",125],["T_STRING","expects",125],"(",["T_VARIABLE","$this",125],["T_OBJECT_OPERATOR","->",125],["T_STRING","any",125],"(",")",")",["T_OBJECT_OPERATOR","->",125],["T_STRING","method",125],"(",["T_CONSTANT_ENCAPSED_STRING","'getStore'",125],")",["T_OBJECT_OPERATOR","->",125],["T_STRING","willReturn",125],"(",["T_VARIABLE","$storeMock",125],")",";",["T_WHITESPACE","\n        ",125],["T_VARIABLE","$quoteMock",126],["T_WHITESPACE"," ",126],"=",["T_WHITESPACE"," ",126],["T_VARIABLE","$this",126],["T_OBJECT_OPERATOR","->",126],["T_STRING","getMock",126],"(",["T_NS_SEPARATOR","\\",126],["T_STRING","Magento",126],["T_NS_SEPARATOR","\\",126],["T_STRING","Quote",126],["T_NS_SEPARATOR","\\",126],["T_STRING","Model",126],["T_NS_SEPARATOR","\\",126],["T_STRING","Quote",126],["T_DOUBLE_COLON","::",126],["T_CLASS","class",126],",",["T_WHITESPACE"," ",126],"[","]",",",["T_WHITESPACE"," ",126],"[","]",",",["T_WHITESPACE"," ",126],["T_CONSTANT_ENCAPSED_STRING","''",126],",",["T_WHITESPACE"," ",126],["T_STRING","false",126],")",";",["T_WHITESPACE","\n        ",126],["T_VARIABLE","$this",127],["T_OBJECT_OPERATOR","->",127],["T_STRING","addressMock",127],["T_OBJECT_OPERATOR","->",127],["T_STRING","expects",127],"(",["T_VARIABLE","$this",127],["T_OBJECT_OPERATOR","->",127],["T_STRING","any",127],"(",")",")",["T_OBJECT_OPERATOR","->",127],["T_STRING","method",127],"(",["T_CONSTANT_ENCAPSED_STRING","'getQuote'",127],")",["T_OBJECT_OPERATOR","->",127],["T_STRING","willReturn",127],"(",["T_VARIABLE","$quoteMock",127],")",";",["T_WHITESPACE","\n        ",127],["T_VARIABLE","$this",128],["T_OBJECT_OPERATOR","->",128],["T_STRING","shippingAssignmentMock",128],["T_OBJECT_OPERATOR","->",128],["T_STRING","expects",128],"(",["T_VARIABLE","$this",128],["T_OBJECT_OPERATOR","->",128],["T_STRING","any",128],"(",")",")",["T_OBJECT_OPERATOR","->",128],["T_STRING","method",128],"(",["T_CONSTANT_ENCAPSED_STRING","'getItems'",128],")",["T_OBJECT_OPERATOR","->",128],["T_STRING","willReturn",128],"(","[",["T_VARIABLE","$itemNoDiscount",128],"]",")",";",["T_WHITESPACE","\n        ",128],["T_VARIABLE","$this",129],["T_OBJECT_OPERATOR","->",129],["T_STRING","addressMock",129],["T_OBJECT_OPERATOR","->",129],["T_STRING","expects",129],"(",["T_VARIABLE","$this",129],["T_OBJECT_OPERATOR","->",129],["T_STRING","any",129],"(",")",")",["T_OBJECT_OPERATOR","->",129],["T_STRING","method",129],"(",["T_CONSTANT_ENCAPSED_STRING","'getShippingAmount'",129],")",["T_OBJECT_OPERATOR","->",129],["T_STRING","willReturn",129],"(",["T_STRING","true",129],")",";",["T_WHITESPACE","\n\n        ",129],["T_VARIABLE","$totalMock",131],["T_WHITESPACE"," ",131],"=",["T_WHITESPACE"," ",131],["T_VARIABLE","$this",131],["T_OBJECT_OPERATOR","->",131],["T_STRING","getMock",131],"(",["T_NS_SEPARATOR","\\",131],["T_STRING","Magento",131],["T_NS_SEPARATOR","\\",131],["T_STRING","Quote",131],["T_NS_SEPARATOR","\\",131],["T_STRING","Model",131],["T_NS_SEPARATOR","\\",131],["T_STRING","Quote",131],["T_NS_SEPARATOR","\\",131],["T_STRING","Address",131],["T_NS_SEPARATOR","\\",131],["T_STRING","Total",131],["T_DOUBLE_COLON","::",131],["T_CLASS","class",131],",",["T_WHITESPACE"," ",131],"[","]",",",["T_WHITESPACE"," ",131],"[","]",",",["T_WHITESPACE"," ",131],["T_CONSTANT_ENCAPSED_STRING","''",131],",",["T_WHITESPACE"," ",131],["T_STRING","false",131],")",";",["T_WHITESPACE","\n\n        ",131],["T_VARIABLE","$this",133],["T_OBJECT_OPERATOR","->",133],["T_STRING","assertInstanceOf",133],"(",["T_WHITESPACE","\n            ",133],["T_NS_SEPARATOR","\\",134],["T_STRING","Magento",134],["T_NS_SEPARATOR","\\",134],["T_STRING","SalesRule",134],["T_NS_SEPARATOR","\\",134],["T_STRING","Model",134],["T_NS_SEPARATOR","\\",134],["T_STRING","Quote",134],["T_NS_SEPARATOR","\\",134],["T_STRING","Discount",134],["T_DOUBLE_COLON","::",134],["T_CLASS","class",134],",",["T_WHITESPACE","\n            ",134],["T_VARIABLE","$this",135],["T_OBJECT_OPERATOR","->",135],["T_STRING","discount",135],["T_OBJECT_OPERATOR","->",135],["T_STRING","collect",135],"(",["T_VARIABLE","$quoteMock",135],",",["T_WHITESPACE"," ",135],["T_VARIABLE","$this",135],["T_OBJECT_OPERATOR","->",135],["T_STRING","shippingAssignmentMock",135],",",["T_WHITESPACE"," ",135],["T_VARIABLE","$totalMock",135],")",["T_WHITESPACE","\n        ",135],")",";",["T_WHITESPACE","\n    ",136],"}",["T_WHITESPACE","\n\n    ",137],["T_PUBLIC","public",139],["T_WHITESPACE"," ",139],["T_FUNCTION","function",139],["T_WHITESPACE"," ",139],["T_STRING","testCollectItemHasParent",139],"(",")",["T_WHITESPACE","\n    ",139],"{",["T_WHITESPACE","\n        ",140],["T_VARIABLE","$itemWithParentId",141],["T_WHITESPACE"," ",141],"=",["T_WHITESPACE"," ",141],["T_VARIABLE","$this",141],["T_OBJECT_OPERATOR","->",141],["T_STRING","getMock",141],"(",["T_WHITESPACE","\n            ",141],["T_NS_SEPARATOR","\\",142],["T_STRING","Magento",142],["T_NS_SEPARATOR","\\",142],["T_STRING","Quote",142],["T_NS_SEPARATOR","\\",142],["T_STRING","Model",142],["T_NS_SEPARATOR","\\",142],["T_STRING","Quote",142],["T_NS_SEPARATOR","\\",142],["T_STRING","Item",142],["T_DOUBLE_COLON","::",142],["T_CLASS","class",142],",",["T_WHITESPACE","\n            ",142],"[",["T_CONSTANT_ENCAPSED_STRING","'getNoDiscount'",143],",",["T_WHITESPACE"," ",143],["T_CONSTANT_ENCAPSED_STRING","'getParentItem'",143],",",["T_WHITESPACE"," ",143],["T_CONSTANT_ENCAPSED_STRING","'__wakeup'",143],"]",",",["T_WHITESPACE","\n            ",143],"[","]",",",["T_WHITESPACE","\n            ",144],["T_CONSTANT_ENCAPSED_STRING","''",145],",",["T_WHITESPACE","\n            ",145],["T_STRING","false",146],["T_WHITESPACE","\n        ",146],")",";",["T_WHITESPACE","\n        ",147],["T_VARIABLE","$itemWithParentId",148],["T_OBJECT_OPERATOR","->",148],["T_STRING","expects",148],"(",["T_VARIABLE","$this",148],["T_OBJECT_OPERATOR","->",148],["T_STRING","once",148],"(",")",")",["T_OBJECT_OPERATOR","->",148],["T_STRING","method",148],"(",["T_CONSTANT_ENCAPSED_STRING","'getNoDiscount'",148],")",["T_OBJECT_OPERATOR","->",148],["T_STRING","willReturn",148],"(",["T_STRING","false",148],")",";",["T_WHITESPACE","\n        ",148],["T_VARIABLE","$itemWithParentId",149],["T_OBJECT_OPERATOR","->",149],["T_STRING","expects",149],"(",["T_VARIABLE","$this",149],["T_OBJECT_OPERATOR","->",149],["T_STRING","once",149],"(",")",")",["T_OBJECT_OPERATOR","->",149],["T_STRING","method",149],"(",["T_CONSTANT_ENCAPSED_STRING","'getParentItem'",149],")",["T_OBJECT_OPERATOR","->",149],["T_STRING","willReturn",149],"(",["T_STRING","true",149],")",";",["T_WHITESPACE","\n\n        ",149],["T_VARIABLE","$this",151],["T_OBJECT_OPERATOR","->",151],["T_STRING","validatorMock",151],["T_OBJECT_OPERATOR","->",151],["T_STRING","expects",151],"(",["T_VARIABLE","$this",151],["T_OBJECT_OPERATOR","->",151],["T_STRING","any",151],"(",")",")",["T_OBJECT_OPERATOR","->",151],["T_STRING","method",151],"(",["T_CONSTANT_ENCAPSED_STRING","'canApplyDiscount'",151],")",["T_OBJECT_OPERATOR","->",151],["T_STRING","willReturn",151],"(",["T_STRING","true",151],")",";",["T_WHITESPACE","\n        ",151],["T_VARIABLE","$this",152],["T_OBJECT_OPERATOR","->",152],["T_STRING","validatorMock",152],["T_OBJECT_OPERATOR","->",152],["T_STRING","expects",152],"(",["T_VARIABLE","$this",152],["T_OBJECT_OPERATOR","->",152],["T_STRING","any",152],"(",")",")",["T_OBJECT_OPERATOR","->",152],["T_STRING","method",152],"(",["T_CONSTANT_ENCAPSED_STRING","'sortItemsByPriority'",152],")",["T_WHITESPACE","\n            ",152],["T_OBJECT_OPERATOR","->",153],["T_STRING","with",153],"(","[",["T_VARIABLE","$itemWithParentId",153],"]",",",["T_WHITESPACE"," ",153],["T_VARIABLE","$this",153],["T_OBJECT_OPERATOR","->",153],["T_STRING","addressMock",153],")",["T_WHITESPACE","\n            ",153],["T_OBJECT_OPERATOR","->",154],["T_STRING","willReturnArgument",154],"(",["T_LNUMBER","0",154],")",";",["T_WHITESPACE","\n\n        ",154],["T_VARIABLE","$storeMock",156],["T_WHITESPACE"," ",156],"=",["T_WHITESPACE"," ",156],["T_VARIABLE","$this",156],["T_OBJECT_OPERATOR","->",156],["T_STRING","getMock",156],"(",["T_NS_SEPARATOR","\\",156],["T_STRING","Magento",156],["T_NS_SEPARATOR","\\",156],["T_STRING","Store",156],["T_NS_SEPARATOR","\\",156],["T_STRING","Model",156],["T_NS_SEPARATOR","\\",156],["T_STRING","Store",156],["T_DOUBLE_COLON","::",156],["T_CLASS","class",156],",",["T_WHITESPACE"," ",156],"[",["T_CONSTANT_ENCAPSED_STRING","'getStore'",156],",",["T_WHITESPACE"," ",156],["T_CONSTANT_ENCAPSED_STRING","'__wakeup'",156],"]",",",["T_WHITESPACE"," ",156],"[","]",",",["T_WHITESPACE"," ",156],["T_CONSTANT_ENCAPSED_STRING","''",156],",",["T_WHITESPACE"," ",156],["T_STRING","false",156],")",";",["T_WHITESPACE","\n        ",156],["T_VARIABLE","$this",157],["T_OBJECT_OPERATOR","->",157],["T_STRING","storeManagerMock",157],["T_OBJECT_OPERATOR","->",157],["T_STRING","expects",157],"(",["T_VARIABLE","$this",157],["T_OBJECT_OPERATOR","->",157],["T_STRING","any",157],"(",")",")",["T_OBJECT_OPERATOR","->",157],["T_STRING","method",157],"(",["T_CONSTANT_ENCAPSED_STRING","'getStore'",157],")",["T_OBJECT_OPERATOR","->",157],["T_STRING","willReturn",157],"(",["T_VARIABLE","$storeMock",157],")",";",["T_WHITESPACE","\n\n        ",157],["T_VARIABLE","$quoteMock",159],["T_WHITESPACE"," ",159],"=",["T_WHITESPACE"," ",159],["T_VARIABLE","$this",159],["T_OBJECT_OPERATOR","->",159],["T_STRING","getMock",159],"(",["T_NS_SEPARATOR","\\",159],["T_STRING","Magento",159],["T_NS_SEPARATOR","\\",159],["T_STRING","Quote",159],["T_NS_SEPARATOR","\\",159],["T_STRING","Model",159],["T_NS_SEPARATOR","\\",159],["T_STRING","Quote",159],["T_DOUBLE_COLON","::",159],["T_CLASS","class",159],",",["T_WHITESPACE"," ",159],"[","]",",",["T_WHITESPACE"," ",159],"[","]",",",["T_WHITESPACE"," ",159],["T_CONSTANT_ENCAPSED_STRING","''",159],",",["T_WHITESPACE"," ",159],["T_STRING","false",159],")",";",["T_WHITESPACE","\n\n        ",159],["T_VARIABLE","$this",161],["T_OBJECT_OPERATOR","->",161],["T_STRING","addressMock",161],["T_OBJECT_OPERATOR","->",161],["T_STRING","expects",161],"(",["T_VARIABLE","$this",161],["T_OBJECT_OPERATOR","->",161],["T_STRING","any",161],"(",")",")",["T_OBJECT_OPERATOR","->",161],["T_STRING","method",161],"(",["T_CONSTANT_ENCAPSED_STRING","'getQuote'",161],")",["T_OBJECT_OPERATOR","->",161],["T_STRING","willReturn",161],"(",["T_VARIABLE","$quoteMock",161],")",";",["T_WHITESPACE","\n        ",161],["T_VARIABLE","$this",162],["T_OBJECT_OPERATOR","->",162],["T_STRING","addressMock",162],["T_OBJECT_OPERATOR","->",162],["T_STRING","expects",162],"(",["T_VARIABLE","$this",162],["T_OBJECT_OPERATOR","->",162],["T_STRING","any",162],"(",")",")",["T_OBJECT_OPERATOR","->",162],["T_STRING","method",162],"(",["T_CONSTANT_ENCAPSED_STRING","'getShippingAmount'",162],")",["T_OBJECT_OPERATOR","->",162],["T_STRING","willReturn",162],"(",["T_STRING","true",162],")",";",["T_WHITESPACE","\n        ",162],["T_VARIABLE","$this",163],["T_OBJECT_OPERATOR","->",163],["T_STRING","shippingAssignmentMock",163],["T_OBJECT_OPERATOR","->",163],["T_STRING","expects",163],"(",["T_VARIABLE","$this",163],["T_OBJECT_OPERATOR","->",163],["T_STRING","any",163],"(",")",")",["T_OBJECT_OPERATOR","->",163],["T_STRING","method",163],"(",["T_CONSTANT_ENCAPSED_STRING","'getItems'",163],")",["T_OBJECT_OPERATOR","->",163],["T_STRING","willReturn",163],"(","[",["T_VARIABLE","$itemWithParentId",163],"]",")",";",["T_WHITESPACE","\n        ",163],["T_VARIABLE","$totalMock",164],["T_WHITESPACE"," ",164],"=",["T_WHITESPACE"," ",164],["T_VARIABLE","$this",164],["T_OBJECT_OPERATOR","->",164],["T_STRING","getMock",164],"(",["T_NS_SEPARATOR","\\",164],["T_STRING","Magento",164],["T_NS_SEPARATOR","\\",164],["T_STRING","Quote",164],["T_NS_SEPARATOR","\\",164],["T_STRING","Model",164],["T_NS_SEPARATOR","\\",164],["T_STRING","Quote",164],["T_NS_SEPARATOR","\\",164],["T_STRING","Address",164],["T_NS_SEPARATOR","\\",164],["T_STRING","Total",164],["T_DOUBLE_COLON","::",164],["T_CLASS","class",164],",",["T_WHITESPACE"," ",164],"[","]",",",["T_WHITESPACE"," ",164],"[","]",",",["T_WHITESPACE"," ",164],["T_CONSTANT_ENCAPSED_STRING","''",164],",",["T_WHITESPACE"," ",164],["T_STRING","false",164],")",";",["T_WHITESPACE","\n\n        ",164],["T_VARIABLE","$this",166],["T_OBJECT_OPERATOR","->",166],["T_STRING","assertInstanceOf",166],"(",["T_WHITESPACE","\n            ",166],["T_NS_SEPARATOR","\\",167],["T_STRING","Magento",167],["T_NS_SEPARATOR","\\",167],["T_STRING","SalesRule",167],["T_NS_SEPARATOR","\\",167],["T_STRING","Model",167],["T_NS_SEPARATOR","\\",167],["T_STRING","Quote",167],["T_NS_SEPARATOR","\\",167],["T_STRING","Discount",167],["T_DOUBLE_COLON","::",167],["T_CLASS","class",167],",",["T_WHITESPACE","\n            ",167],["T_VARIABLE","$this",168],["T_OBJECT_OPERATOR","->",168],["T_STRING","discount",168],["T_OBJECT_OPERATOR","->",168],["T_STRING","collect",168],"(",["T_VARIABLE","$quoteMock",168],",",["T_WHITESPACE"," ",168],["T_VARIABLE","$this",168],["T_OBJECT_OPERATOR","->",168],["T_STRING","shippingAssignmentMock",168],",",["T_WHITESPACE"," ",168],["T_VARIABLE","$totalMock",168],")",["T_WHITESPACE","\n        ",168],")",";",["T_WHITESPACE","\n    ",169],"}",["T_WHITESPACE","\n\n    ",170],["T_DOC_COMMENT","\/**\n     * @dataProvider collectItemHasChildrenDataProvider\n     *\/",172],["T_WHITESPACE","\n    ",174],["T_PUBLIC","public",175],["T_WHITESPACE"," ",175],["T_FUNCTION","function",175],["T_WHITESPACE"," ",175],["T_STRING","testCollectItemHasChildren",175],"(",["T_VARIABLE","$childItemData",175],",",["T_WHITESPACE"," ",175],["T_VARIABLE","$parentData",175],",",["T_WHITESPACE"," ",175],["T_VARIABLE","$expectedChildData",175],")",["T_WHITESPACE","\n    ",175],"{",["T_WHITESPACE","\n        ",176],["T_VARIABLE","$childItems",177],["T_WHITESPACE"," ",177],"=",["T_WHITESPACE"," ",177],"[","]",";",["T_WHITESPACE","\n        ",177],["T_FOREACH","foreach",178],["T_WHITESPACE"," ",178],"(",["T_VARIABLE","$childItemData",178],["T_WHITESPACE"," ",178],["T_AS","as",178],["T_WHITESPACE"," ",178],["T_VARIABLE","$itemId",178],["T_WHITESPACE"," ",178],["T_DOUBLE_ARROW","=>",178],["T_WHITESPACE"," ",178],["T_VARIABLE","$itemData",178],")",["T_WHITESPACE"," ",178],"{",["T_WHITESPACE","\n            ",178],["T_VARIABLE","$item",179],["T_WHITESPACE"," ",179],"=",["T_WHITESPACE"," ",179],["T_VARIABLE","$this",179],["T_OBJECT_OPERATOR","->",179],["T_STRING","objectManager",179],["T_OBJECT_OPERATOR","->",179],["T_STRING","getObject",179],"(",["T_NS_SEPARATOR","\\",179],["T_STRING","Magento",179],["T_NS_SEPARATOR","\\",179],["T_STRING","Quote",179],["T_NS_SEPARATOR","\\",179],["T_STRING","Model",179],["T_NS_SEPARATOR","\\",179],["T_STRING","Quote",179],["T_NS_SEPARATOR","\\",179],["T_STRING","Item",179],["T_DOUBLE_COLON","::",179],["T_CLASS","class",179],")",["T_OBJECT_OPERATOR","->",179],["T_STRING","setData",179],"(",["T_VARIABLE","$itemData",179],")",";",["T_WHITESPACE","\n            ",179],["T_VARIABLE","$childItems",180],"[",["T_VARIABLE","$itemId",180],"]",["T_WHITESPACE"," ",180],"=",["T_WHITESPACE"," ",180],["T_VARIABLE","$item",180],";",["T_WHITESPACE","\n        ",180],"}",["T_WHITESPACE","\n\n        ",181],["T_VARIABLE","$itemWithChildren",183],["T_WHITESPACE"," ",183],"=",["T_WHITESPACE"," ",183],["T_VARIABLE","$this",183],["T_OBJECT_OPERATOR","->",183],["T_STRING","getMockBuilder",183],"(",["T_NS_SEPARATOR","\\",183],["T_STRING","Magento",183],["T_NS_SEPARATOR","\\",183],["T_STRING","Quote",183],["T_NS_SEPARATOR","\\",183],["T_STRING","Model",183],["T_NS_SEPARATOR","\\",183],["T_STRING","Quote",183],["T_NS_SEPARATOR","\\",183],["T_STRING","Item",183],["T_DOUBLE_COLON","::",183],["T_CLASS","class",183],")",["T_WHITESPACE","\n            ",183],["T_OBJECT_OPERATOR","->",184],["T_STRING","disableOriginalConstructor",184],"(",")",["T_WHITESPACE","\n            ",184],["T_OBJECT_OPERATOR","->",185],["T_STRING","setMethods",185],"(",["T_WHITESPACE","\n                ",185],"[",["T_WHITESPACE","\n                    ",186],["T_CONSTANT_ENCAPSED_STRING","'getNoDiscount'",187],",",["T_WHITESPACE","\n                    ",187],["T_CONSTANT_ENCAPSED_STRING","'getParentItem'",188],",",["T_WHITESPACE","\n                    ",188],["T_CONSTANT_ENCAPSED_STRING","'getHasChildren'",189],",",["T_WHITESPACE","\n                    ",189],["T_CONSTANT_ENCAPSED_STRING","'isChildrenCalculated'",190],",",["T_WHITESPACE","\n                    ",190],["T_CONSTANT_ENCAPSED_STRING","'getChildren'",191],",",["T_WHITESPACE","\n                    ",191],["T_CONSTANT_ENCAPSED_STRING","'__wakeup'",192],",",["T_WHITESPACE","\n                ",192],"]",["T_WHITESPACE","\n            ",193],")",["T_WHITESPACE","\n            ",194],["T_OBJECT_OPERATOR","->",195],["T_STRING","getMock",195],"(",")",";",["T_WHITESPACE","\n        ",195],["T_VARIABLE","$itemWithChildren",196],["T_OBJECT_OPERATOR","->",196],["T_STRING","expects",196],"(",["T_VARIABLE","$this",196],["T_OBJECT_OPERATOR","->",196],["T_STRING","once",196],"(",")",")",["T_OBJECT_OPERATOR","->",196],["T_STRING","method",196],"(",["T_CONSTANT_ENCAPSED_STRING","'getNoDiscount'",196],")",["T_OBJECT_OPERATOR","->",196],["T_STRING","willReturn",196],"(",["T_STRING","false",196],")",";",["T_WHITESPACE","\n        ",196],["T_VARIABLE","$itemWithChildren",197],["T_OBJECT_OPERATOR","->",197],["T_STRING","expects",197],"(",["T_VARIABLE","$this",197],["T_OBJECT_OPERATOR","->",197],["T_STRING","once",197],"(",")",")",["T_OBJECT_OPERATOR","->",197],["T_STRING","method",197],"(",["T_CONSTANT_ENCAPSED_STRING","'getParentItem'",197],")",["T_OBJECT_OPERATOR","->",197],["T_STRING","willReturn",197],"(",["T_STRING","false",197],")",";",["T_WHITESPACE","\n        ",197],["T_VARIABLE","$itemWithChildren",198],["T_OBJECT_OPERATOR","->",198],["T_STRING","expects",198],"(",["T_VARIABLE","$this",198],["T_OBJECT_OPERATOR","->",198],["T_STRING","once",198],"(",")",")",["T_OBJECT_OPERATOR","->",198],["T_STRING","method",198],"(",["T_CONSTANT_ENCAPSED_STRING","'getHasChildren'",198],")",["T_OBJECT_OPERATOR","->",198],["T_STRING","willReturn",198],"(",["T_STRING","true",198],")",";",["T_WHITESPACE","\n        ",198],["T_VARIABLE","$itemWithChildren",199],["T_OBJECT_OPERATOR","->",199],["T_STRING","expects",199],"(",["T_VARIABLE","$this",199],["T_OBJECT_OPERATOR","->",199],["T_STRING","once",199],"(",")",")",["T_OBJECT_OPERATOR","->",199],["T_STRING","method",199],"(",["T_CONSTANT_ENCAPSED_STRING","'isChildrenCalculated'",199],")",["T_OBJECT_OPERATOR","->",199],["T_STRING","willReturn",199],"(",["T_STRING","true",199],")",";",["T_WHITESPACE","\n        ",199],["T_VARIABLE","$itemWithChildren",200],["T_OBJECT_OPERATOR","->",200],["T_STRING","expects",200],"(",["T_VARIABLE","$this",200],["T_OBJECT_OPERATOR","->",200],["T_STRING","any",200],"(",")",")",["T_OBJECT_OPERATOR","->",200],["T_STRING","method",200],"(",["T_CONSTANT_ENCAPSED_STRING","'getChildren'",200],")",["T_OBJECT_OPERATOR","->",200],["T_STRING","willReturn",200],"(",["T_VARIABLE","$childItems",200],")",";",["T_WHITESPACE","\n        ",200],["T_FOREACH","foreach",201],["T_WHITESPACE"," ",201],"(",["T_VARIABLE","$parentData",201],["T_WHITESPACE"," ",201],["T_AS","as",201],["T_WHITESPACE"," ",201],["T_VARIABLE","$key",201],["T_WHITESPACE"," ",201],["T_DOUBLE_ARROW","=>",201],["T_WHITESPACE"," ",201],["T_VARIABLE","$value",201],")",["T_WHITESPACE"," ",201],"{",["T_WHITESPACE","\n            ",201],["T_VARIABLE","$itemWithChildren",202],["T_OBJECT_OPERATOR","->",202],["T_STRING","setData",202],"(",["T_VARIABLE","$key",202],",",["T_WHITESPACE"," ",202],["T_VARIABLE","$value",202],")",";",["T_WHITESPACE","\n        ",202],"}",["T_WHITESPACE","\n\n        ",203],["T_VARIABLE","$this",205],["T_OBJECT_OPERATOR","->",205],["T_STRING","validatorMock",205],["T_OBJECT_OPERATOR","->",205],["T_STRING","expects",205],"(",["T_VARIABLE","$this",205],["T_OBJECT_OPERATOR","->",205],["T_STRING","any",205],"(",")",")",["T_OBJECT_OPERATOR","->",205],["T_STRING","method",205],"(",["T_CONSTANT_ENCAPSED_STRING","'canApplyDiscount'",205],")",["T_OBJECT_OPERATOR","->",205],["T_STRING","willReturn",205],"(",["T_STRING","true",205],")",";",["T_WHITESPACE","\n        ",205],["T_VARIABLE","$this",206],["T_OBJECT_OPERATOR","->",206],["T_STRING","validatorMock",206],["T_OBJECT_OPERATOR","->",206],["T_STRING","expects",206],"(",["T_VARIABLE","$this",206],["T_OBJECT_OPERATOR","->",206],["T_STRING","once",206],"(",")",")",["T_OBJECT_OPERATOR","->",206],["T_STRING","method",206],"(",["T_CONSTANT_ENCAPSED_STRING","'sortItemsByPriority'",206],")",["T_WHITESPACE","\n            ",206],["T_OBJECT_OPERATOR","->",207],["T_STRING","with",207],"(","[",["T_VARIABLE","$itemWithChildren",207],"]",",",["T_WHITESPACE"," ",207],["T_VARIABLE","$this",207],["T_OBJECT_OPERATOR","->",207],["T_STRING","addressMock",207],")",["T_WHITESPACE","\n            ",207],["T_OBJECT_OPERATOR","->",208],["T_STRING","willReturnArgument",208],"(",["T_LNUMBER","0",208],")",";",["T_WHITESPACE","\n        ",208],["T_VARIABLE","$this",209],["T_OBJECT_OPERATOR","->",209],["T_STRING","validatorMock",209],["T_OBJECT_OPERATOR","->",209],["T_STRING","expects",209],"(",["T_VARIABLE","$this",209],["T_OBJECT_OPERATOR","->",209],["T_STRING","any",209],"(",")",")",["T_OBJECT_OPERATOR","->",209],["T_STRING","method",209],"(",["T_CONSTANT_ENCAPSED_STRING","'canApplyRules'",209],")",["T_OBJECT_OPERATOR","->",209],["T_STRING","willReturn",209],"(",["T_STRING","true",209],")",";",["T_WHITESPACE","\n\n        ",209],["T_VARIABLE","$storeMock",211],["T_WHITESPACE"," ",211],"=",["T_WHITESPACE"," ",211],["T_VARIABLE","$this",211],["T_OBJECT_OPERATOR","->",211],["T_STRING","getMockBuilder",211],"(",["T_NS_SEPARATOR","\\",211],["T_STRING","Magento",211],["T_NS_SEPARATOR","\\",211],["T_STRING","Store",211],["T_NS_SEPARATOR","\\",211],["T_STRING","Model",211],["T_NS_SEPARATOR","\\",211],["T_STRING","Store",211],["T_DOUBLE_COLON","::",211],["T_CLASS","class",211],")",["T_WHITESPACE","\n            ",211],["T_OBJECT_OPERATOR","->",212],["T_STRING","disableOriginalConstructor",212],"(",")",["T_WHITESPACE","\n            ",212],["T_OBJECT_OPERATOR","->",213],["T_STRING","setMethods",213],"(","[",["T_CONSTANT_ENCAPSED_STRING","'getStore'",213],",",["T_WHITESPACE"," ",213],["T_CONSTANT_ENCAPSED_STRING","'__wakeup'",213],"]",")",["T_WHITESPACE","\n            ",213],["T_OBJECT_OPERATOR","->",214],["T_STRING","getMock",214],"(",")",";",["T_WHITESPACE","\n        ",214],["T_VARIABLE","$this",215],["T_OBJECT_OPERATOR","->",215],["T_STRING","storeManagerMock",215],["T_OBJECT_OPERATOR","->",215],["T_STRING","expects",215],"(",["T_VARIABLE","$this",215],["T_OBJECT_OPERATOR","->",215],["T_STRING","any",215],"(",")",")",["T_OBJECT_OPERATOR","->",215],["T_STRING","method",215],"(",["T_CONSTANT_ENCAPSED_STRING","'getStore'",215],")",["T_OBJECT_OPERATOR","->",215],["T_STRING","willReturn",215],"(",["T_VARIABLE","$storeMock",215],")",";",["T_WHITESPACE","\n\n        ",215],["T_VARIABLE","$quoteMock",217],["T_WHITESPACE"," ",217],"=",["T_WHITESPACE"," ",217],["T_VARIABLE","$this",217],["T_OBJECT_OPERATOR","->",217],["T_STRING","getMockBuilder",217],"(",["T_NS_SEPARATOR","\\",217],["T_STRING","Magento",217],["T_NS_SEPARATOR","\\",217],["T_STRING","Quote",217],["T_NS_SEPARATOR","\\",217],["T_STRING","Model",217],["T_NS_SEPARATOR","\\",217],["T_STRING","Quote",217],["T_DOUBLE_COLON","::",217],["T_CLASS","class",217],")",["T_WHITESPACE","\n            ",217],["T_OBJECT_OPERATOR","->",218],["T_STRING","disableOriginalConstructor",218],"(",")",["T_WHITESPACE","\n            ",218],["T_OBJECT_OPERATOR","->",219],["T_STRING","getMock",219],"(",")",";",["T_WHITESPACE","\n        ",219],["T_VARIABLE","$this",220],["T_OBJECT_OPERATOR","->",220],["T_STRING","addressMock",220],["T_OBJECT_OPERATOR","->",220],["T_STRING","expects",220],"(",["T_VARIABLE","$this",220],["T_OBJECT_OPERATOR","->",220],["T_STRING","any",220],"(",")",")",["T_OBJECT_OPERATOR","->",220],["T_STRING","method",220],"(",["T_CONSTANT_ENCAPSED_STRING","'getQuote'",220],")",["T_OBJECT_OPERATOR","->",220],["T_STRING","willReturn",220],"(",["T_VARIABLE","$quoteMock",220],")",";",["T_WHITESPACE","\n        ",220],["T_VARIABLE","$this",221],["T_OBJECT_OPERATOR","->",221],["T_STRING","addressMock",221],["T_OBJECT_OPERATOR","->",221],["T_STRING","expects",221],"(",["T_VARIABLE","$this",221],["T_OBJECT_OPERATOR","->",221],["T_STRING","any",221],"(",")",")",["T_OBJECT_OPERATOR","->",221],["T_STRING","method",221],"(",["T_CONSTANT_ENCAPSED_STRING","'getShippingAmount'",221],")",["T_OBJECT_OPERATOR","->",221],["T_STRING","willReturn",221],"(",["T_STRING","true",221],")",";",["T_WHITESPACE","\n\n        ",221],["T_VARIABLE","$this",223],["T_OBJECT_OPERATOR","->",223],["T_STRING","shippingAssignmentMock",223],["T_OBJECT_OPERATOR","->",223],["T_STRING","expects",223],"(",["T_VARIABLE","$this",223],["T_OBJECT_OPERATOR","->",223],["T_STRING","any",223],"(",")",")",["T_OBJECT_OPERATOR","->",223],["T_STRING","method",223],"(",["T_CONSTANT_ENCAPSED_STRING","'getItems'",223],")",["T_OBJECT_OPERATOR","->",223],["T_STRING","willReturn",223],"(","[",["T_VARIABLE","$itemWithChildren",223],"]",")",";",["T_WHITESPACE","\n        ",223],["T_VARIABLE","$totalMock",224],["T_WHITESPACE"," ",224],"=",["T_WHITESPACE"," ",224],["T_VARIABLE","$this",224],["T_OBJECT_OPERATOR","->",224],["T_STRING","getMock",224],"(",["T_NS_SEPARATOR","\\",224],["T_STRING","Magento",224],["T_NS_SEPARATOR","\\",224],["T_STRING","Quote",224],["T_NS_SEPARATOR","\\",224],["T_STRING","Model",224],["T_NS_SEPARATOR","\\",224],["T_STRING","Quote",224],["T_NS_SEPARATOR","\\",224],["T_STRING","Address",224],["T_NS_SEPARATOR","\\",224],["T_STRING","Total",224],["T_DOUBLE_COLON","::",224],["T_CLASS","class",224],",",["T_WHITESPACE"," ",224],"[","]",",",["T_WHITESPACE"," ",224],"[","]",",",["T_WHITESPACE"," ",224],["T_CONSTANT_ENCAPSED_STRING","''",224],",",["T_WHITESPACE"," ",224],["T_STRING","false",224],")",";",["T_WHITESPACE","\n\n        ",224],["T_VARIABLE","$this",226],["T_OBJECT_OPERATOR","->",226],["T_STRING","assertInstanceOf",226],"(",["T_WHITESPACE","\n            ",226],["T_NS_SEPARATOR","\\",227],["T_STRING","Magento",227],["T_NS_SEPARATOR","\\",227],["T_STRING","SalesRule",227],["T_NS_SEPARATOR","\\",227],["T_STRING","Model",227],["T_NS_SEPARATOR","\\",227],["T_STRING","Quote",227],["T_NS_SEPARATOR","\\",227],["T_STRING","Discount",227],["T_DOUBLE_COLON","::",227],["T_CLASS","class",227],",",["T_WHITESPACE","\n            ",227],["T_VARIABLE","$this",228],["T_OBJECT_OPERATOR","->",228],["T_STRING","discount",228],["T_OBJECT_OPERATOR","->",228],["T_STRING","collect",228],"(",["T_VARIABLE","$quoteMock",228],",",["T_WHITESPACE"," ",228],["T_VARIABLE","$this",228],["T_OBJECT_OPERATOR","->",228],["T_STRING","shippingAssignmentMock",228],",",["T_WHITESPACE"," ",228],["T_VARIABLE","$totalMock",228],")",["T_WHITESPACE","\n        ",228],")",";",["T_WHITESPACE","\n\n        ",229],["T_FOREACH","foreach",231],["T_WHITESPACE"," ",231],"(",["T_VARIABLE","$expectedChildData",231],["T_WHITESPACE"," ",231],["T_AS","as",231],["T_WHITESPACE"," ",231],["T_VARIABLE","$itemId",231],["T_WHITESPACE"," ",231],["T_DOUBLE_ARROW","=>",231],["T_WHITESPACE"," ",231],["T_VARIABLE","$expectedItemData",231],")",["T_WHITESPACE"," ",231],"{",["T_WHITESPACE","\n            ",231],["T_VARIABLE","$childItem",232],["T_WHITESPACE"," ",232],"=",["T_WHITESPACE"," ",232],["T_VARIABLE","$childItems",232],"[",["T_VARIABLE","$itemId",232],"]",";",["T_WHITESPACE","\n            ",232],["T_FOREACH","foreach",233],["T_WHITESPACE"," ",233],"(",["T_VARIABLE","$expectedItemData",233],["T_WHITESPACE"," ",233],["T_AS","as",233],["T_WHITESPACE"," ",233],["T_VARIABLE","$key",233],["T_WHITESPACE"," ",233],["T_DOUBLE_ARROW","=>",233],["T_WHITESPACE"," ",233],["T_VARIABLE","$value",233],")",["T_WHITESPACE"," ",233],"{",["T_WHITESPACE","\n                ",233],["T_VARIABLE","$this",234],["T_OBJECT_OPERATOR","->",234],["T_STRING","assertEquals",234],"(",["T_VARIABLE","$value",234],",",["T_WHITESPACE"," ",234],["T_VARIABLE","$childItem",234],["T_OBJECT_OPERATOR","->",234],["T_STRING","getData",234],"(",["T_VARIABLE","$key",234],")",",",["T_WHITESPACE"," ",234],["T_CONSTANT_ENCAPSED_STRING","'Incorrect value for '",234],["T_WHITESPACE"," ",234],".",["T_WHITESPACE"," ",234],["T_VARIABLE","$key",234],")",";",["T_WHITESPACE","\n            ",234],"}",["T_WHITESPACE","\n        ",235],"}",["T_WHITESPACE","\n    ",236],"}",["T_WHITESPACE","\n\n    ",237],["T_PUBLIC","public",239],["T_WHITESPACE"," ",239],["T_FUNCTION","function",239],["T_WHITESPACE"," ",239],["T_STRING","collectItemHasChildrenDataProvider",239],"(",")",["T_WHITESPACE","\n    ",239],"{",["T_WHITESPACE","\n        ",240],["T_VARIABLE","$data",241],["T_WHITESPACE"," ",241],"=",["T_WHITESPACE"," ",241],"[",["T_WHITESPACE","\n            ",241],["T_COMMENT","\/\/ 3 items, each $100, testing that discount are distributed to item correctly\n",242],["T_WHITESPACE","            ",243],["T_CONSTANT_ENCAPSED_STRING","'three_items'",243],["T_WHITESPACE"," ",243],["T_DOUBLE_ARROW","=>",243],["T_WHITESPACE"," ",243],"[",["T_WHITESPACE","\n                ",243],["T_CONSTANT_ENCAPSED_STRING","'child_item_data'",244],["T_WHITESPACE"," ",244],["T_DOUBLE_ARROW","=>",244],["T_WHITESPACE"," ",244],"[",["T_WHITESPACE","\n                    ",244],["T_CONSTANT_ENCAPSED_STRING","'item1'",245],["T_WHITESPACE"," ",245],["T_DOUBLE_ARROW","=>",245],["T_WHITESPACE"," ",245],"[",["T_WHITESPACE","\n                        ",245],["T_CONSTANT_ENCAPSED_STRING","'base_row_total'",246],["T_WHITESPACE"," ",246],["T_DOUBLE_ARROW","=>",246],["T_WHITESPACE"," ",246],["T_LNUMBER","100",246],",",["T_WHITESPACE","\n                    ",246],"]",",",["T_WHITESPACE","\n                    ",247],["T_CONSTANT_ENCAPSED_STRING","'item2'",248],["T_WHITESPACE"," ",248],["T_DOUBLE_ARROW","=>",248],["T_WHITESPACE"," ",248],"[",["T_WHITESPACE","\n                        ",248],["T_CONSTANT_ENCAPSED_STRING","'base_row_total'",249],["T_WHITESPACE"," ",249],["T_DOUBLE_ARROW","=>",249],["T_WHITESPACE"," ",249],["T_LNUMBER","100",249],",",["T_WHITESPACE","\n                    ",249],"]",",",["T_WHITESPACE","\n                    ",250],["T_CONSTANT_ENCAPSED_STRING","'item3'",251],["T_WHITESPACE"," ",251],["T_DOUBLE_ARROW","=>",251],["T_WHITESPACE"," ",251],"[",["T_WHITESPACE","\n                        ",251],["T_CONSTANT_ENCAPSED_STRING","'base_row_total'",252],["T_WHITESPACE"," ",252],["T_DOUBLE_ARROW","=>",252],["T_WHITESPACE"," ",252],["T_LNUMBER","100",252],",",["T_WHITESPACE","\n                    ",252],"]",",",["T_WHITESPACE","\n                ",253],"]",",",["T_WHITESPACE","\n                ",254],["T_CONSTANT_ENCAPSED_STRING","'parent_item_data'",255],["T_WHITESPACE"," ",255],["T_DOUBLE_ARROW","=>",255],["T_WHITESPACE"," ",255],"[",["T_WHITESPACE","\n                    ",255],["T_CONSTANT_ENCAPSED_STRING","'discount_amount'",256],["T_WHITESPACE"," ",256],["T_DOUBLE_ARROW","=>",256],["T_WHITESPACE"," ",256],["T_LNUMBER","20",256],",",["T_WHITESPACE","\n                    ",256],["T_CONSTANT_ENCAPSED_STRING","'base_discount_amount'",257],["T_WHITESPACE"," ",257],["T_DOUBLE_ARROW","=>",257],["T_WHITESPACE"," ",257],["T_LNUMBER","10",257],",",["T_WHITESPACE","\n                    ",257],["T_CONSTANT_ENCAPSED_STRING","'original_discount_amount'",258],["T_WHITESPACE"," ",258],["T_DOUBLE_ARROW","=>",258],["T_WHITESPACE"," ",258],["T_LNUMBER","40",258],",",["T_WHITESPACE","\n                    ",258],["T_CONSTANT_ENCAPSED_STRING","'base_original_discount_amount'",259],["T_WHITESPACE"," ",259],["T_DOUBLE_ARROW","=>",259],["T_WHITESPACE"," ",259],["T_LNUMBER","20",259],",",["T_WHITESPACE","\n                    ",259],["T_CONSTANT_ENCAPSED_STRING","'base_row_total'",260],["T_WHITESPACE"," ",260],["T_DOUBLE_ARROW","=>",260],["T_WHITESPACE"," ",260],["T_LNUMBER","300",260],",",["T_WHITESPACE","\n                ",260],"]",",",["T_WHITESPACE","\n                ",261],["T_CONSTANT_ENCAPSED_STRING","'expected_child_item_data'",262],["T_WHITESPACE"," ",262],["T_DOUBLE_ARROW","=>",262],["T_WHITESPACE"," ",262],"[",["T_WHITESPACE","\n                    ",262],["T_CONSTANT_ENCAPSED_STRING","'item1'",263],["T_WHITESPACE"," ",263],["T_DOUBLE_ARROW","=>",263],["T_WHITESPACE"," ",263],"[",["T_WHITESPACE","\n                        ",263],["T_CONSTANT_ENCAPSED_STRING","'discount_amount'",264],["T_WHITESPACE"," ",264],["T_DOUBLE_ARROW","=>",264],["T_WHITESPACE"," ",264],["T_DNUMBER","6.67",264],",",["T_WHITESPACE","\n                        ",264],["T_CONSTANT_ENCAPSED_STRING","'base_discount_amount'",265],["T_WHITESPACE"," ",265],["T_DOUBLE_ARROW","=>",265],["T_WHITESPACE"," ",265],["T_DNUMBER","3.33",265],",",["T_WHITESPACE","\n                        ",265],["T_CONSTANT_ENCAPSED_STRING","'original_discount_amount'",266],["T_WHITESPACE"," ",266],["T_DOUBLE_ARROW","=>",266],["T_WHITESPACE"," ",266],["T_DNUMBER","13.33",266],",",["T_WHITESPACE","\n                        ",266],["T_CONSTANT_ENCAPSED_STRING","'base_original_discount_amount'",267],["T_WHITESPACE"," ",267],["T_DOUBLE_ARROW","=>",267],["T_WHITESPACE"," ",267],["T_DNUMBER","6.67",267],",",["T_WHITESPACE","\n                    ",267],"]",",",["T_WHITESPACE","\n                    ",268],["T_CONSTANT_ENCAPSED_STRING","'item2'",269],["T_WHITESPACE"," ",269],["T_DOUBLE_ARROW","=>",269],["T_WHITESPACE"," ",269],"[",["T_WHITESPACE","\n                        ",269],["T_CONSTANT_ENCAPSED_STRING","'discount_amount'",270],["T_WHITESPACE"," ",270],["T_DOUBLE_ARROW","=>",270],["T_WHITESPACE"," ",270],["T_DNUMBER","6.66",270],",",["T_WHITESPACE","\n                        ",270],["T_CONSTANT_ENCAPSED_STRING","'base_discount_amount'",271],["T_WHITESPACE"," ",271],["T_DOUBLE_ARROW","=>",271],["T_WHITESPACE"," ",271],["T_DNUMBER","3.34",271],",",["T_WHITESPACE","\n                        ",271],["T_CONSTANT_ENCAPSED_STRING","'original_discount_amount'",272],["T_WHITESPACE"," ",272],["T_DOUBLE_ARROW","=>",272],["T_WHITESPACE"," ",272],["T_DNUMBER","13.34",272],",",["T_WHITESPACE","\n                        ",272],["T_CONSTANT_ENCAPSED_STRING","'base_original_discount_amount'",273],["T_WHITESPACE"," ",273],["T_DOUBLE_ARROW","=>",273],["T_WHITESPACE"," ",273],["T_DNUMBER","6.66",273],",",["T_WHITESPACE","\n                    ",273],"]",",",["T_WHITESPACE","\n                    ",274],["T_CONSTANT_ENCAPSED_STRING","'item3'",275],["T_WHITESPACE"," ",275],["T_DOUBLE_ARROW","=>",275],["T_WHITESPACE"," ",275],"[",["T_WHITESPACE","\n                        ",275],["T_CONSTANT_ENCAPSED_STRING","'discount_amount'",276],["T_WHITESPACE"," ",276],["T_DOUBLE_ARROW","=>",276],["T_WHITESPACE"," ",276],["T_DNUMBER","6.67",276],",",["T_WHITESPACE","\n                        ",276],["T_CONSTANT_ENCAPSED_STRING","'base_discount_amount'",277],["T_WHITESPACE"," ",277],["T_DOUBLE_ARROW","=>",277],["T_WHITESPACE"," ",277],["T_DNUMBER","3.33",277],",",["T_WHITESPACE","\n                        ",277],["T_CONSTANT_ENCAPSED_STRING","'original_discount_amount'",278],["T_WHITESPACE"," ",278],["T_DOUBLE_ARROW","=>",278],["T_WHITESPACE"," ",278],["T_DNUMBER","13.33",278],",",["T_WHITESPACE","\n                        ",278],["T_CONSTANT_ENCAPSED_STRING","'base_original_discount_amount'",279],["T_WHITESPACE"," ",279],["T_DOUBLE_ARROW","=>",279],["T_WHITESPACE"," ",279],["T_DNUMBER","6.67",279],",",["T_WHITESPACE","\n                    ",279],"]",",",["T_WHITESPACE","\n                ",280],"]",",",["T_WHITESPACE","\n            ",281],"]",",",["T_WHITESPACE","\n        ",282],"]",";",["T_WHITESPACE","\n        ",283],["T_RETURN","return",284],["T_WHITESPACE"," ",284],["T_VARIABLE","$data",284],";",["T_WHITESPACE","\n    ",284],"}",["T_WHITESPACE","\n\n    ",285],["T_PUBLIC","public",287],["T_WHITESPACE"," ",287],["T_FUNCTION","function",287],["T_WHITESPACE"," ",287],["T_STRING","testCollectItemHasNoChildren",287],"(",")",["T_WHITESPACE","\n    ",287],"{",["T_WHITESPACE","\n        ",288],["T_VARIABLE","$itemWithChildren",289],["T_WHITESPACE"," ",289],"=",["T_WHITESPACE"," ",289],["T_VARIABLE","$this",289],["T_OBJECT_OPERATOR","->",289],["T_STRING","getMockBuilder",289],"(",["T_NS_SEPARATOR","\\",289],["T_STRING","Magento",289],["T_NS_SEPARATOR","\\",289],["T_STRING","Quote",289],["T_NS_SEPARATOR","\\",289],["T_STRING","Model",289],["T_NS_SEPARATOR","\\",289],["T_STRING","Quote",289],["T_NS_SEPARATOR","\\",289],["T_STRING","Item",289],["T_DOUBLE_COLON","::",289],["T_CLASS","class",289],")",["T_WHITESPACE","\n            ",289],["T_OBJECT_OPERATOR","->",290],["T_STRING","disableOriginalConstructor",290],"(",")",["T_WHITESPACE","\n            ",290],["T_OBJECT_OPERATOR","->",291],["T_STRING","setMethods",291],"(",["T_WHITESPACE","\n                ",291],"[",["T_WHITESPACE","\n                    ",292],["T_CONSTANT_ENCAPSED_STRING","'getNoDiscount'",293],",",["T_WHITESPACE","\n                    ",293],["T_CONSTANT_ENCAPSED_STRING","'getParentItem'",294],",",["T_WHITESPACE","\n                    ",294],["T_CONSTANT_ENCAPSED_STRING","'getHasChildren'",295],",",["T_WHITESPACE","\n                    ",295],["T_CONSTANT_ENCAPSED_STRING","'isChildrenCalculated'",296],",",["T_WHITESPACE","\n                    ",296],["T_CONSTANT_ENCAPSED_STRING","'getChildren'",297],",",["T_WHITESPACE","\n                    ",297],["T_CONSTANT_ENCAPSED_STRING","'__wakeup'",298],",",["T_WHITESPACE","\n                ",298],"]",["T_WHITESPACE","\n            ",299],")",["T_WHITESPACE","\n            ",300],["T_OBJECT_OPERATOR","->",301],["T_STRING","getMock",301],"(",")",";",["T_WHITESPACE","\n        ",301],["T_VARIABLE","$itemWithChildren",302],["T_OBJECT_OPERATOR","->",302],["T_STRING","expects",302],"(",["T_VARIABLE","$this",302],["T_OBJECT_OPERATOR","->",302],["T_STRING","once",302],"(",")",")",["T_OBJECT_OPERATOR","->",302],["T_STRING","method",302],"(",["T_CONSTANT_ENCAPSED_STRING","'getNoDiscount'",302],")",["T_OBJECT_OPERATOR","->",302],["T_STRING","willReturn",302],"(",["T_STRING","false",302],")",";",["T_WHITESPACE","\n        ",302],["T_VARIABLE","$itemWithChildren",303],["T_OBJECT_OPERATOR","->",303],["T_STRING","expects",303],"(",["T_VARIABLE","$this",303],["T_OBJECT_OPERATOR","->",303],["T_STRING","once",303],"(",")",")",["T_OBJECT_OPERATOR","->",303],["T_STRING","method",303],"(",["T_CONSTANT_ENCAPSED_STRING","'getParentItem'",303],")",["T_OBJECT_OPERATOR","->",303],["T_STRING","willReturn",303],"(",["T_STRING","false",303],")",";",["T_WHITESPACE","\n        ",303],["T_VARIABLE","$itemWithChildren",304],["T_OBJECT_OPERATOR","->",304],["T_STRING","expects",304],"(",["T_VARIABLE","$this",304],["T_OBJECT_OPERATOR","->",304],["T_STRING","once",304],"(",")",")",["T_OBJECT_OPERATOR","->",304],["T_STRING","method",304],"(",["T_CONSTANT_ENCAPSED_STRING","'getHasChildren'",304],")",["T_OBJECT_OPERATOR","->",304],["T_STRING","willReturn",304],"(",["T_STRING","false",304],")",";",["T_WHITESPACE","\n\n        ",304],["T_VARIABLE","$this",306],["T_OBJECT_OPERATOR","->",306],["T_STRING","validatorMock",306],["T_OBJECT_OPERATOR","->",306],["T_STRING","expects",306],"(",["T_VARIABLE","$this",306],["T_OBJECT_OPERATOR","->",306],["T_STRING","any",306],"(",")",")",["T_OBJECT_OPERATOR","->",306],["T_STRING","method",306],"(",["T_CONSTANT_ENCAPSED_STRING","'canApplyDiscount'",306],")",["T_OBJECT_OPERATOR","->",306],["T_STRING","willReturn",306],"(",["T_STRING","true",306],")",";",["T_WHITESPACE","\n        ",306],["T_VARIABLE","$this",307],["T_OBJECT_OPERATOR","->",307],["T_STRING","validatorMock",307],["T_OBJECT_OPERATOR","->",307],["T_STRING","expects",307],"(",["T_VARIABLE","$this",307],["T_OBJECT_OPERATOR","->",307],["T_STRING","once",307],"(",")",")",["T_OBJECT_OPERATOR","->",307],["T_STRING","method",307],"(",["T_CONSTANT_ENCAPSED_STRING","'sortItemsByPriority'",307],")",["T_WHITESPACE","\n            ",307],["T_OBJECT_OPERATOR","->",308],["T_STRING","with",308],"(","[",["T_VARIABLE","$itemWithChildren",308],"]",",",["T_WHITESPACE"," ",308],["T_VARIABLE","$this",308],["T_OBJECT_OPERATOR","->",308],["T_STRING","addressMock",308],")",["T_WHITESPACE","\n            ",308],["T_OBJECT_OPERATOR","->",309],["T_STRING","willReturnArgument",309],"(",["T_LNUMBER","0",309],")",";",["T_WHITESPACE","\n\n        ",309],["T_VARIABLE","$storeMock",311],["T_WHITESPACE"," ",311],"=",["T_WHITESPACE"," ",311],["T_VARIABLE","$this",311],["T_OBJECT_OPERATOR","->",311],["T_STRING","getMockBuilder",311],"(",["T_NS_SEPARATOR","\\",311],["T_STRING","Magento",311],["T_NS_SEPARATOR","\\",311],["T_STRING","Store",311],["T_NS_SEPARATOR","\\",311],["T_STRING","Model",311],["T_NS_SEPARATOR","\\",311],["T_STRING","Store",311],["T_DOUBLE_COLON","::",311],["T_CLASS","class",311],")",["T_WHITESPACE","\n            ",311],["T_OBJECT_OPERATOR","->",312],["T_STRING","disableOriginalConstructor",312],"(",")",["T_WHITESPACE","\n            ",312],["T_OBJECT_OPERATOR","->",313],["T_STRING","setMethods",313],"(","[",["T_CONSTANT_ENCAPSED_STRING","'getStore'",313],",",["T_WHITESPACE"," ",313],["T_CONSTANT_ENCAPSED_STRING","'__wakeup'",313],"]",")",["T_WHITESPACE","\n            ",313],["T_OBJECT_OPERATOR","->",314],["T_STRING","getMock",314],"(",")",";",["T_WHITESPACE","\n        ",314],["T_VARIABLE","$this",315],["T_OBJECT_OPERATOR","->",315],["T_STRING","storeManagerMock",315],["T_OBJECT_OPERATOR","->",315],["T_STRING","expects",315],"(",["T_VARIABLE","$this",315],["T_OBJECT_OPERATOR","->",315],["T_STRING","any",315],"(",")",")",["T_OBJECT_OPERATOR","->",315],["T_STRING","method",315],"(",["T_CONSTANT_ENCAPSED_STRING","'getStore'",315],")",["T_OBJECT_OPERATOR","->",315],["T_STRING","willReturn",315],"(",["T_VARIABLE","$storeMock",315],")",";",["T_WHITESPACE","\n\n        ",315],["T_VARIABLE","$quoteMock",317],["T_WHITESPACE"," ",317],"=",["T_WHITESPACE"," ",317],["T_VARIABLE","$this",317],["T_OBJECT_OPERATOR","->",317],["T_STRING","getMockBuilder",317],"(",["T_NS_SEPARATOR","\\",317],["T_STRING","Magento",317],["T_NS_SEPARATOR","\\",317],["T_STRING","Quote",317],["T_NS_SEPARATOR","\\",317],["T_STRING","Model",317],["T_NS_SEPARATOR","\\",317],["T_STRING","Quote",317],["T_DOUBLE_COLON","::",317],["T_CLASS","class",317],")",["T_OBJECT_OPERATOR","->",317],["T_STRING","disableOriginalConstructor",317],"(",")",["T_OBJECT_OPERATOR","->",317],["T_STRING","getMock",317],"(",")",";",["T_WHITESPACE","\n        ",317],["T_VARIABLE","$this",318],["T_OBJECT_OPERATOR","->",318],["T_STRING","addressMock",318],["T_OBJECT_OPERATOR","->",318],["T_STRING","expects",318],"(",["T_VARIABLE","$this",318],["T_OBJECT_OPERATOR","->",318],["T_STRING","any",318],"(",")",")",["T_OBJECT_OPERATOR","->",318],["T_STRING","method",318],"(",["T_CONSTANT_ENCAPSED_STRING","'getQuote'",318],")",["T_OBJECT_OPERATOR","->",318],["T_STRING","willReturn",318],"(",["T_VARIABLE","$quoteMock",318],")",";",["T_WHITESPACE","\n        ",318],["T_VARIABLE","$this",319],["T_OBJECT_OPERATOR","->",319],["T_STRING","addressMock",319],["T_OBJECT_OPERATOR","->",319],["T_STRING","expects",319],"(",["T_VARIABLE","$this",319],["T_OBJECT_OPERATOR","->",319],["T_STRING","any",319],"(",")",")",["T_OBJECT_OPERATOR","->",319],["T_STRING","method",319],"(",["T_CONSTANT_ENCAPSED_STRING","'getShippingAmount'",319],")",["T_OBJECT_OPERATOR","->",319],["T_STRING","willReturn",319],"(",["T_STRING","true",319],")",";",["T_WHITESPACE","\n        ",319],["T_VARIABLE","$this",320],["T_OBJECT_OPERATOR","->",320],["T_STRING","shippingAssignmentMock",320],["T_OBJECT_OPERATOR","->",320],["T_STRING","expects",320],"(",["T_VARIABLE","$this",320],["T_OBJECT_OPERATOR","->",320],["T_STRING","any",320],"(",")",")",["T_OBJECT_OPERATOR","->",320],["T_STRING","method",320],"(",["T_CONSTANT_ENCAPSED_STRING","'getItems'",320],")",["T_OBJECT_OPERATOR","->",320],["T_STRING","willReturn",320],"(","[",["T_VARIABLE","$itemWithChildren",320],"]",")",";",["T_WHITESPACE","\n\n        ",320],["T_VARIABLE","$totalMock",322],["T_WHITESPACE"," ",322],"=",["T_WHITESPACE"," ",322],["T_VARIABLE","$this",322],["T_OBJECT_OPERATOR","->",322],["T_STRING","getMock",322],"(",["T_NS_SEPARATOR","\\",322],["T_STRING","Magento",322],["T_NS_SEPARATOR","\\",322],["T_STRING","Quote",322],["T_NS_SEPARATOR","\\",322],["T_STRING","Model",322],["T_NS_SEPARATOR","\\",322],["T_STRING","Quote",322],["T_NS_SEPARATOR","\\",322],["T_STRING","Address",322],["T_NS_SEPARATOR","\\",322],["T_STRING","Total",322],["T_DOUBLE_COLON","::",322],["T_CLASS","class",322],",",["T_WHITESPACE"," ",322],"[","]",",",["T_WHITESPACE"," ",322],"[","]",",",["T_WHITESPACE"," ",322],["T_CONSTANT_ENCAPSED_STRING","''",322],",",["T_WHITESPACE"," ",322],["T_STRING","false",322],")",";",["T_WHITESPACE","\n        ",322],["T_VARIABLE","$this",323],["T_OBJECT_OPERATOR","->",323],["T_STRING","assertInstanceOf",323],"(",["T_WHITESPACE","\n            ",323],["T_NS_SEPARATOR","\\",324],["T_STRING","Magento",324],["T_NS_SEPARATOR","\\",324],["T_STRING","SalesRule",324],["T_NS_SEPARATOR","\\",324],["T_STRING","Model",324],["T_NS_SEPARATOR","\\",324],["T_STRING","Quote",324],["T_NS_SEPARATOR","\\",324],["T_STRING","Discount",324],["T_DOUBLE_COLON","::",324],["T_CLASS","class",324],",",["T_WHITESPACE","\n            ",324],["T_VARIABLE","$this",325],["T_OBJECT_OPERATOR","->",325],["T_STRING","discount",325],["T_OBJECT_OPERATOR","->",325],["T_STRING","collect",325],"(",["T_VARIABLE","$quoteMock",325],",",["T_WHITESPACE"," ",325],["T_VARIABLE","$this",325],["T_OBJECT_OPERATOR","->",325],["T_STRING","shippingAssignmentMock",325],",",["T_WHITESPACE"," ",325],["T_VARIABLE","$totalMock",325],")",["T_WHITESPACE","\n        ",325],")",";",["T_WHITESPACE","\n    ",326],"}",["T_WHITESPACE","\n\n    ",327],["T_PUBLIC","public",329],["T_WHITESPACE"," ",329],["T_FUNCTION","function",329],["T_WHITESPACE"," ",329],["T_STRING","testFetch",329],"(",")",["T_WHITESPACE","\n    ",329],"{",["T_WHITESPACE","\n        ",330],["T_VARIABLE","$discountAmount",331],["T_WHITESPACE"," ",331],"=",["T_WHITESPACE"," ",331],["T_LNUMBER","100",331],";",["T_WHITESPACE","\n        ",331],["T_VARIABLE","$discountDescription",332],["T_WHITESPACE"," ",332],"=",["T_WHITESPACE"," ",332],["T_LNUMBER","100",332],";",["T_WHITESPACE","\n        ",332],["T_VARIABLE","$expectedResult",333],["T_WHITESPACE"," ",333],"=",["T_WHITESPACE"," ",333],"[",["T_WHITESPACE","\n            ",333],["T_CONSTANT_ENCAPSED_STRING","'code'",334],["T_WHITESPACE"," ",334],["T_DOUBLE_ARROW","=>",334],["T_WHITESPACE"," ",334],["T_CONSTANT_ENCAPSED_STRING","'discount'",334],",",["T_WHITESPACE","\n            ",334],["T_CONSTANT_ENCAPSED_STRING","'value'",335],["T_WHITESPACE"," ",335],["T_DOUBLE_ARROW","=>",335],["T_WHITESPACE"," ",335],["T_LNUMBER","100",335],",",["T_WHITESPACE","\n            ",335],["T_CONSTANT_ENCAPSED_STRING","'title'",336],["T_WHITESPACE"," ",336],["T_DOUBLE_ARROW","=>",336],["T_WHITESPACE"," ",336],["T_STRING","__",336],"(",["T_CONSTANT_ENCAPSED_STRING","'Discount (%1)'",336],",",["T_WHITESPACE"," ",336],["T_VARIABLE","$discountDescription",336],")",["T_WHITESPACE","\n        ",336],"]",";",["T_WHITESPACE","\n\n        ",337],["T_VARIABLE","$quoteMock",339],["T_WHITESPACE"," ",339],"=",["T_WHITESPACE"," ",339],["T_VARIABLE","$this",339],["T_OBJECT_OPERATOR","->",339],["T_STRING","getMock",339],"(",["T_NS_SEPARATOR","\\",339],["T_STRING","Magento",339],["T_NS_SEPARATOR","\\",339],["T_STRING","Quote",339],["T_NS_SEPARATOR","\\",339],["T_STRING","Model",339],["T_NS_SEPARATOR","\\",339],["T_STRING","Quote",339],["T_DOUBLE_COLON","::",339],["T_CLASS","class",339],",",["T_WHITESPACE"," ",339],"[","]",",",["T_WHITESPACE"," ",339],"[","]",",",["T_WHITESPACE"," ",339],["T_CONSTANT_ENCAPSED_STRING","''",339],",",["T_WHITESPACE"," ",339],["T_STRING","false",339],")",";",["T_WHITESPACE","\n        ",339],["T_VARIABLE","$totalMock",340],["T_WHITESPACE"," ",340],"=",["T_WHITESPACE"," ",340],["T_VARIABLE","$this",340],["T_OBJECT_OPERATOR","->",340],["T_STRING","getMock",340],"(",["T_WHITESPACE","\n            ",340],["T_NS_SEPARATOR","\\",341],["T_STRING","Magento",341],["T_NS_SEPARATOR","\\",341],["T_STRING","Quote",341],["T_NS_SEPARATOR","\\",341],["T_STRING","Model",341],["T_NS_SEPARATOR","\\",341],["T_STRING","Quote",341],["T_NS_SEPARATOR","\\",341],["T_STRING","Address",341],["T_NS_SEPARATOR","\\",341],["T_STRING","Total",341],["T_DOUBLE_COLON","::",341],["T_CLASS","class",341],",",["T_WHITESPACE","\n            ",341],"[",["T_CONSTANT_ENCAPSED_STRING","'getDiscountAmount'",342],",",["T_WHITESPACE"," ",342],["T_CONSTANT_ENCAPSED_STRING","'getDiscountDescription'",342],"]",",",["T_WHITESPACE","\n            ",342],"[","]",",",["T_WHITESPACE","\n            ",343],["T_CONSTANT_ENCAPSED_STRING","''",344],",",["T_WHITESPACE","\n            ",344],["T_STRING","false",345],["T_WHITESPACE","\n        ",345],")",";",["T_WHITESPACE","\n\n        ",346],["T_VARIABLE","$totalMock",348],["T_OBJECT_OPERATOR","->",348],["T_STRING","expects",348],"(",["T_VARIABLE","$this",348],["T_OBJECT_OPERATOR","->",348],["T_STRING","once",348],"(",")",")",["T_OBJECT_OPERATOR","->",348],["T_STRING","method",348],"(",["T_CONSTANT_ENCAPSED_STRING","'getDiscountAmount'",348],")",["T_OBJECT_OPERATOR","->",348],["T_STRING","willReturn",348],"(",["T_VARIABLE","$discountAmount",348],")",";",["T_WHITESPACE","\n        ",348],["T_VARIABLE","$totalMock",349],["T_OBJECT_OPERATOR","->",349],["T_STRING","expects",349],"(",["T_VARIABLE","$this",349],["T_OBJECT_OPERATOR","->",349],["T_STRING","once",349],"(",")",")",["T_OBJECT_OPERATOR","->",349],["T_STRING","method",349],"(",["T_CONSTANT_ENCAPSED_STRING","'getDiscountDescription'",349],")",["T_OBJECT_OPERATOR","->",349],["T_STRING","willReturn",349],"(",["T_VARIABLE","$discountDescription",349],")",";",["T_WHITESPACE","\n        ",349],["T_VARIABLE","$this",350],["T_OBJECT_OPERATOR","->",350],["T_STRING","assertEquals",350],"(",["T_VARIABLE","$expectedResult",350],",",["T_WHITESPACE"," ",350],["T_VARIABLE","$this",350],["T_OBJECT_OPERATOR","->",350],["T_STRING","discount",350],["T_OBJECT_OPERATOR","->",350],["T_STRING","fetch",350],"(",["T_VARIABLE","$quoteMock",350],",",["T_WHITESPACE"," ",350],["T_VARIABLE","$totalMock",350],")",")",";",["T_WHITESPACE","\n    ",350],"}",["T_WHITESPACE","\n",351],"}",["T_WHITESPACE","\n",352]]
[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Copyright \u00c2\u00a9 2013-2017 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n *\/",2],["T_WHITESPACE","\n",5],["T_NAMESPACE","namespace",6],["T_WHITESPACE"," ",6],["T_STRING","Magento",6],["T_NS_SEPARATOR","\\",6],["T_STRING","SalesRule",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Test",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Unit",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Model",6],";",["T_WHITESPACE","\n\n",6],["T_DOC_COMMENT","\/**\n * Class UtilityTest\n *\n * @SuppressWarnings(PHPMD.CouplingBetweenObjects)\n *\/",8],["T_WHITESPACE","\n",12],["T_CLASS","class",13],["T_WHITESPACE"," ",13],["T_STRING","UtilityTest",13],["T_WHITESPACE"," ",13],["T_EXTENDS","extends",13],["T_WHITESPACE"," ",13],["T_NS_SEPARATOR","\\",13],["T_STRING","PHPUnit_Framework_TestCase",13],["T_WHITESPACE","\n",13],"{",["T_WHITESPACE","\n    ",14],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\SalesRule\\Model\\ResourceModel\\Coupon\\UsageFactory | \\PHPUnit_Framework_MockObject_MockObject\n     *\/",15],["T_WHITESPACE","\n    ",17],["T_PROTECTED","protected",18],["T_WHITESPACE"," ",18],["T_VARIABLE","$usageFactory",18],";",["T_WHITESPACE","\n\n    ",18],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\SalesRule\\Model\\CouponFactory | \\PHPUnit_Framework_MockObject_MockObject\n     *\/",20],["T_WHITESPACE","\n    ",22],["T_PROTECTED","protected",23],["T_WHITESPACE"," ",23],["T_VARIABLE","$couponFactory",23],";",["T_WHITESPACE","\n\n    ",23],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\SalesRule\\Model\\Coupon | \\PHPUnit_Framework_MockObject_MockObject\n     *\/",25],["T_WHITESPACE","\n    ",27],["T_PROTECTED","protected",28],["T_WHITESPACE"," ",28],["T_VARIABLE","$coupon",28],";",["T_WHITESPACE","\n\n    ",28],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Quote\\Model\\Quote | \\PHPUnit_Framework_MockObject_MockObject\n     *\/",30],["T_WHITESPACE","\n    ",32],["T_PROTECTED","protected",33],["T_WHITESPACE"," ",33],["T_VARIABLE","$quote",33],";",["T_WHITESPACE","\n\n    ",33],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\SalesRule\\Model\\Rule\\CustomerFactory | \\PHPUnit_Framework_MockObject_MockObject\n     *\/",35],["T_WHITESPACE","\n    ",37],["T_PROTECTED","protected",38],["T_WHITESPACE"," ",38],["T_VARIABLE","$customerFactory",38],";",["T_WHITESPACE","\n\n    ",38],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\SalesRule\\Model\\Rule\\Customer | \\PHPUnit_Framework_MockObject_MockObject\n     *\/",40],["T_WHITESPACE","\n    ",42],["T_PROTECTED","protected",43],["T_WHITESPACE"," ",43],["T_VARIABLE","$customer",43],";",["T_WHITESPACE","\n\n    ",43],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Quote\\Model\\Quote\\Address | \\PHPUnit_Framework_MockObject_MockObject\n     *\/",45],["T_WHITESPACE","\n    ",47],["T_PROTECTED","protected",48],["T_WHITESPACE"," ",48],["T_VARIABLE","$address",48],";",["T_WHITESPACE","\n\n    ",48],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\SalesRule\\Model\\Rule | \\PHPUnit_Framework_MockObject_MockObject\n     *\/",50],["T_WHITESPACE","\n    ",52],["T_PROTECTED","protected",53],["T_WHITESPACE"," ",53],["T_VARIABLE","$rule",53],";",["T_WHITESPACE","\n\n    ",53],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Framework\\DataObjectFactory | \\PHPUnit_Framework_MockObject_MockObject\n     *\/",55],["T_WHITESPACE","\n    ",57],["T_PROTECTED","protected",58],["T_WHITESPACE"," ",58],["T_VARIABLE","$objectFactory",58],";",["T_WHITESPACE","\n\n    ",58],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Quote\\Model\\Quote\\Item\\AbstractItem | \\PHPUnit_Framework_MockObject_MockObject\n     *\/",60],["T_WHITESPACE","\n    ",62],["T_PROTECTED","protected",63],["T_WHITESPACE"," ",63],["T_VARIABLE","$item",63],";",["T_WHITESPACE","\n\n    ",63],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\SalesRule\\Model\\Utility\n     *\/",65],["T_WHITESPACE","\n    ",67],["T_PROTECTED","protected",68],["T_WHITESPACE"," ",68],["T_VARIABLE","$utility",68],";",["T_WHITESPACE","\n\n    ",68],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Framework\\Pricing\\PriceCurrencyInterface | \\PHPUnit_Framework_MockObject_MockObject\n     *\/",70],["T_WHITESPACE","\n    ",72],["T_PROTECTED","protected",73],["T_WHITESPACE"," ",73],["T_VARIABLE","$priceCurrency",73],";",["T_WHITESPACE","\n\n    ",73],["T_PROTECTED","protected",75],["T_WHITESPACE"," ",75],["T_FUNCTION","function",75],["T_WHITESPACE"," ",75],["T_STRING","setUp",75],"(",")",["T_WHITESPACE","\n    ",75],"{",["T_WHITESPACE","\n        ",76],["T_VARIABLE","$this",77],["T_OBJECT_OPERATOR","->",77],["T_STRING","usageFactory",77],["T_WHITESPACE"," ",77],"=",["T_WHITESPACE"," ",77],["T_VARIABLE","$this",77],["T_OBJECT_OPERATOR","->",77],["T_STRING","getMock",77],"(",["T_WHITESPACE","\n            ",77],["T_NS_SEPARATOR","\\",78],["T_STRING","Magento",78],["T_NS_SEPARATOR","\\",78],["T_STRING","SalesRule",78],["T_NS_SEPARATOR","\\",78],["T_STRING","Model",78],["T_NS_SEPARATOR","\\",78],["T_STRING","ResourceModel",78],["T_NS_SEPARATOR","\\",78],["T_STRING","Coupon",78],["T_NS_SEPARATOR","\\",78],["T_STRING","UsageFactory",78],["T_DOUBLE_COLON","::",78],["T_CLASS","class",78],",",["T_WHITESPACE","\n            ",78],"[",["T_CONSTANT_ENCAPSED_STRING","'create'",79],"]",",",["T_WHITESPACE","\n            ",79],"[","]",",",["T_WHITESPACE","\n            ",80],["T_CONSTANT_ENCAPSED_STRING","''",81],",",["T_WHITESPACE","\n            ",81],["T_STRING","false",82],["T_WHITESPACE","\n        ",82],")",";",["T_WHITESPACE","\n        ",83],["T_VARIABLE","$this",84],["T_OBJECT_OPERATOR","->",84],["T_STRING","couponFactory",84],["T_WHITESPACE"," ",84],"=",["T_WHITESPACE"," ",84],["T_VARIABLE","$this",84],["T_OBJECT_OPERATOR","->",84],["T_STRING","getMock",84],"(",["T_NS_SEPARATOR","\\",84],["T_STRING","Magento",84],["T_NS_SEPARATOR","\\",84],["T_STRING","SalesRule",84],["T_NS_SEPARATOR","\\",84],["T_STRING","Model",84],["T_NS_SEPARATOR","\\",84],["T_STRING","CouponFactory",84],["T_DOUBLE_COLON","::",84],["T_CLASS","class",84],",",["T_WHITESPACE"," ",84],"[",["T_CONSTANT_ENCAPSED_STRING","'create'",84],"]",",",["T_WHITESPACE"," ",84],"[","]",",",["T_WHITESPACE"," ",84],["T_CONSTANT_ENCAPSED_STRING","''",84],",",["T_WHITESPACE"," ",84],["T_STRING","false",84],")",";",["T_WHITESPACE","\n        ",84],["T_VARIABLE","$this",85],["T_OBJECT_OPERATOR","->",85],["T_STRING","objectFactory",85],["T_WHITESPACE"," ",85],"=",["T_WHITESPACE"," ",85],["T_VARIABLE","$this",85],["T_OBJECT_OPERATOR","->",85],["T_STRING","getMock",85],"(",["T_NS_SEPARATOR","\\",85],["T_STRING","Magento",85],["T_NS_SEPARATOR","\\",85],["T_STRING","Framework",85],["T_NS_SEPARATOR","\\",85],["T_STRING","DataObjectFactory",85],["T_DOUBLE_COLON","::",85],["T_CLASS","class",85],",",["T_WHITESPACE"," ",85],"[",["T_CONSTANT_ENCAPSED_STRING","'create'",85],"]",",",["T_WHITESPACE"," ",85],"[","]",",",["T_WHITESPACE"," ",85],["T_CONSTANT_ENCAPSED_STRING","''",85],",",["T_WHITESPACE"," ",85],["T_STRING","false",85],")",";",["T_WHITESPACE","\n        ",85],["T_VARIABLE","$this",86],["T_OBJECT_OPERATOR","->",86],["T_STRING","customerFactory",86],["T_WHITESPACE"," ",86],"=",["T_WHITESPACE"," ",86],["T_VARIABLE","$this",86],["T_OBJECT_OPERATOR","->",86],["T_STRING","getMock",86],"(",["T_WHITESPACE","\n            ",86],["T_NS_SEPARATOR","\\",87],["T_STRING","Magento",87],["T_NS_SEPARATOR","\\",87],["T_STRING","SalesRule",87],["T_NS_SEPARATOR","\\",87],["T_STRING","Model",87],["T_NS_SEPARATOR","\\",87],["T_STRING","Rule",87],["T_NS_SEPARATOR","\\",87],["T_STRING","CustomerFactory",87],["T_DOUBLE_COLON","::",87],["T_CLASS","class",87],",",["T_WHITESPACE","\n            ",87],"[",["T_CONSTANT_ENCAPSED_STRING","'create'",88],"]",",",["T_WHITESPACE","\n            ",88],"[","]",",",["T_WHITESPACE","\n            ",89],["T_CONSTANT_ENCAPSED_STRING","''",90],",",["T_WHITESPACE","\n            ",90],["T_STRING","false",91],["T_WHITESPACE","\n        ",91],")",";",["T_WHITESPACE","\n        ",92],["T_VARIABLE","$this",93],["T_OBJECT_OPERATOR","->",93],["T_STRING","coupon",93],["T_WHITESPACE"," ",93],"=",["T_WHITESPACE"," ",93],["T_VARIABLE","$this",93],["T_OBJECT_OPERATOR","->",93],["T_STRING","getMock",93],"(",["T_WHITESPACE","\n            ",93],["T_NS_SEPARATOR","\\",94],["T_STRING","Magento",94],["T_NS_SEPARATOR","\\",94],["T_STRING","SalesRule",94],["T_NS_SEPARATOR","\\",94],["T_STRING","Model",94],["T_NS_SEPARATOR","\\",94],["T_STRING","Coupon",94],["T_DOUBLE_COLON","::",94],["T_CLASS","class",94],",",["T_WHITESPACE","\n            ",94],"[",["T_WHITESPACE","\n                ",95],["T_CONSTANT_ENCAPSED_STRING","'load'",96],",",["T_WHITESPACE","\n                ",96],["T_CONSTANT_ENCAPSED_STRING","'getId'",97],",",["T_WHITESPACE","\n                ",97],["T_CONSTANT_ENCAPSED_STRING","'getUsageLimit'",98],",",["T_WHITESPACE","\n                ",98],["T_CONSTANT_ENCAPSED_STRING","'getTimesUsed'",99],",",["T_WHITESPACE","\n                ",99],["T_CONSTANT_ENCAPSED_STRING","'getUsagePerCustomer'",100],",",["T_WHITESPACE","\n                ",100],["T_CONSTANT_ENCAPSED_STRING","'__wakeup'",101],["T_WHITESPACE","\n            ",101],"]",",",["T_WHITESPACE","\n            ",102],"[","]",",",["T_WHITESPACE","\n            ",103],["T_CONSTANT_ENCAPSED_STRING","''",104],",",["T_WHITESPACE","\n            ",104],["T_STRING","false",105],["T_WHITESPACE","\n        ",105],")",";",["T_WHITESPACE","\n        ",106],["T_VARIABLE","$this",107],["T_OBJECT_OPERATOR","->",107],["T_STRING","quote",107],["T_WHITESPACE"," ",107],"=",["T_WHITESPACE"," ",107],["T_VARIABLE","$this",107],["T_OBJECT_OPERATOR","->",107],["T_STRING","getMock",107],"(",["T_NS_SEPARATOR","\\",107],["T_STRING","Magento",107],["T_NS_SEPARATOR","\\",107],["T_STRING","Quote",107],["T_NS_SEPARATOR","\\",107],["T_STRING","Model",107],["T_NS_SEPARATOR","\\",107],["T_STRING","Quote",107],["T_DOUBLE_COLON","::",107],["T_CLASS","class",107],",",["T_WHITESPACE"," ",107],"[",["T_CONSTANT_ENCAPSED_STRING","'__wakeup'",107],",",["T_WHITESPACE"," ",107],["T_CONSTANT_ENCAPSED_STRING","'getStore'",107],"]",",",["T_WHITESPACE"," ",107],"[","]",",",["T_WHITESPACE"," ",107],["T_CONSTANT_ENCAPSED_STRING","''",107],",",["T_WHITESPACE"," ",107],["T_STRING","false",107],")",";",["T_WHITESPACE","\n        ",107],["T_VARIABLE","$this",108],["T_OBJECT_OPERATOR","->",108],["T_STRING","customer",108],["T_WHITESPACE"," ",108],"=",["T_WHITESPACE"," ",108],["T_VARIABLE","$this",108],["T_OBJECT_OPERATOR","->",108],["T_STRING","getMock",108],"(",["T_WHITESPACE","\n            ",108],["T_NS_SEPARATOR","\\",109],["T_STRING","Magento",109],["T_NS_SEPARATOR","\\",109],["T_STRING","SalesRule",109],["T_NS_SEPARATOR","\\",109],["T_STRING","Model",109],["T_NS_SEPARATOR","\\",109],["T_STRING","Rule",109],["T_NS_SEPARATOR","\\",109],["T_STRING","Customer",109],["T_DOUBLE_COLON","::",109],["T_CLASS","class",109],",",["T_WHITESPACE","\n            ",109],"[",["T_CONSTANT_ENCAPSED_STRING","'loadByCustomerRule'",110],",",["T_WHITESPACE"," ",110],["T_CONSTANT_ENCAPSED_STRING","'__wakeup'",110],"]",",",["T_WHITESPACE","\n            ",110],"[","]",",",["T_WHITESPACE","\n            ",111],["T_CONSTANT_ENCAPSED_STRING","''",112],",",["T_WHITESPACE","\n            ",112],["T_STRING","false",113],["T_WHITESPACE","\n        ",113],")",";",["T_WHITESPACE","\n        ",114],["T_VARIABLE","$this",115],["T_OBJECT_OPERATOR","->",115],["T_STRING","rule",115],["T_WHITESPACE"," ",115],"=",["T_WHITESPACE"," ",115],["T_VARIABLE","$this",115],["T_OBJECT_OPERATOR","->",115],["T_STRING","getMock",115],"(",["T_WHITESPACE","\n            ",115],["T_NS_SEPARATOR","\\",116],["T_STRING","Magento",116],["T_NS_SEPARATOR","\\",116],["T_STRING","SalesRule",116],["T_NS_SEPARATOR","\\",116],["T_STRING","Model",116],["T_NS_SEPARATOR","\\",116],["T_STRING","Rule",116],["T_DOUBLE_COLON","::",116],["T_CLASS","class",116],",",["T_WHITESPACE","\n            ",116],"[",["T_WHITESPACE","\n                ",117],["T_CONSTANT_ENCAPSED_STRING","'hasIsValidForAddress'",118],",",["T_WHITESPACE","\n                ",118],["T_CONSTANT_ENCAPSED_STRING","'getIsValidForAddress'",119],",",["T_WHITESPACE","\n                ",119],["T_CONSTANT_ENCAPSED_STRING","'setIsValidForAddress'",120],",",["T_WHITESPACE","\n                ",120],["T_CONSTANT_ENCAPSED_STRING","'__wakeup'",121],",",["T_WHITESPACE","\n                ",121],["T_CONSTANT_ENCAPSED_STRING","'validate'",122],",",["T_WHITESPACE","\n                ",122],["T_CONSTANT_ENCAPSED_STRING","'afterLoad'",123],",",["T_WHITESPACE","\n                ",123],["T_CONSTANT_ENCAPSED_STRING","'getDiscountQty'",124],["T_WHITESPACE","\n            ",124],"]",",",["T_WHITESPACE","\n            ",125],"[","]",",",["T_WHITESPACE","\n            ",126],["T_CONSTANT_ENCAPSED_STRING","''",127],",",["T_WHITESPACE","\n            ",127],["T_STRING","false",128],["T_WHITESPACE","\n        ",128],")",";",["T_WHITESPACE","\n        ",129],["T_VARIABLE","$this",130],["T_OBJECT_OPERATOR","->",130],["T_STRING","address",130],["T_WHITESPACE"," ",130],"=",["T_WHITESPACE"," ",130],["T_VARIABLE","$this",130],["T_OBJECT_OPERATOR","->",130],["T_STRING","getMock",130],"(",["T_WHITESPACE","\n            ",130],["T_NS_SEPARATOR","\\",131],["T_STRING","Magento",131],["T_NS_SEPARATOR","\\",131],["T_STRING","Quote",131],["T_NS_SEPARATOR","\\",131],["T_STRING","Model",131],["T_NS_SEPARATOR","\\",131],["T_STRING","Quote",131],["T_NS_SEPARATOR","\\",131],["T_STRING","Address",131],["T_DOUBLE_COLON","::",131],["T_CLASS","class",131],",",["T_WHITESPACE","\n            ",131],"[",["T_WHITESPACE","\n                ",132],["T_CONSTANT_ENCAPSED_STRING","'isObjectNew'",133],",",["T_WHITESPACE","\n                ",133],["T_CONSTANT_ENCAPSED_STRING","'getQuote'",134],",",["T_WHITESPACE","\n                ",134],["T_CONSTANT_ENCAPSED_STRING","'setIsValidForAddress'",135],",",["T_WHITESPACE","\n                ",135],["T_CONSTANT_ENCAPSED_STRING","'__wakeup'",136],",",["T_WHITESPACE","\n                ",136],["T_CONSTANT_ENCAPSED_STRING","'validate'",137],",",["T_WHITESPACE","\n                ",137],["T_CONSTANT_ENCAPSED_STRING","'afterLoad'",138],["T_WHITESPACE","\n            ",138],"]",",",["T_WHITESPACE","\n            ",139],"[","]",",",["T_WHITESPACE","\n            ",140],["T_CONSTANT_ENCAPSED_STRING","''",141],",",["T_WHITESPACE","\n            ",141],["T_STRING","false",142],["T_WHITESPACE","\n        ",142],")",";",["T_WHITESPACE","\n        ",143],["T_VARIABLE","$this",144],["T_OBJECT_OPERATOR","->",144],["T_STRING","address",144],["T_OBJECT_OPERATOR","->",144],["T_STRING","setQuote",144],"(",["T_VARIABLE","$this",144],["T_OBJECT_OPERATOR","->",144],["T_STRING","quote",144],")",";",["T_WHITESPACE","\n        ",144],["T_VARIABLE","$this",145],["T_OBJECT_OPERATOR","->",145],["T_STRING","item",145],["T_WHITESPACE"," ",145],"=",["T_WHITESPACE"," ",145],["T_VARIABLE","$this",145],["T_OBJECT_OPERATOR","->",145],["T_STRING","getMock",145],"(",["T_WHITESPACE","\n            ",145],["T_NS_SEPARATOR","\\",146],["T_STRING","Magento",146],["T_NS_SEPARATOR","\\",146],["T_STRING","Quote",146],["T_NS_SEPARATOR","\\",146],["T_STRING","Model",146],["T_NS_SEPARATOR","\\",146],["T_STRING","Quote",146],["T_NS_SEPARATOR","\\",146],["T_STRING","Item",146],["T_NS_SEPARATOR","\\",146],["T_STRING","AbstractItem",146],["T_DOUBLE_COLON","::",146],["T_CLASS","class",146],",",["T_WHITESPACE","\n            ",146],"[",["T_WHITESPACE","\n                ",147],["T_CONSTANT_ENCAPSED_STRING","'getDiscountCalculationPrice'",148],",",["T_WHITESPACE","\n                ",148],["T_CONSTANT_ENCAPSED_STRING","'getCalculationPrice'",149],",",["T_WHITESPACE","\n                ",149],["T_CONSTANT_ENCAPSED_STRING","'getBaseDiscountCalculationPrice'",150],",",["T_WHITESPACE","\n                ",150],["T_CONSTANT_ENCAPSED_STRING","'getBaseCalculationPrice'",151],",",["T_WHITESPACE","\n                ",151],["T_CONSTANT_ENCAPSED_STRING","'getQuote'",152],",",["T_WHITESPACE","\n                ",152],["T_CONSTANT_ENCAPSED_STRING","'getAddress'",153],",",["T_WHITESPACE","\n                ",153],["T_CONSTANT_ENCAPSED_STRING","'getOptionByCode'",154],",",["T_WHITESPACE","\n                ",154],["T_CONSTANT_ENCAPSED_STRING","'getTotalQty'",155],",",["T_WHITESPACE","\n                ",155],["T_CONSTANT_ENCAPSED_STRING","'__wakeup'",156],["T_WHITESPACE","\n            ",156],"]",",",["T_WHITESPACE","\n            ",157],"[","]",",",["T_WHITESPACE","\n            ",158],["T_CONSTANT_ENCAPSED_STRING","''",159],",",["T_WHITESPACE","\n            ",159],["T_STRING","false",160],["T_WHITESPACE","\n        ",160],")",";",["T_WHITESPACE","\n\n        ",161],["T_VARIABLE","$this",163],["T_OBJECT_OPERATOR","->",163],["T_STRING","priceCurrency",163],["T_WHITESPACE"," ",163],"=",["T_WHITESPACE"," ",163],["T_VARIABLE","$this",163],["T_OBJECT_OPERATOR","->",163],["T_STRING","getMockBuilder",163],"(",["T_NS_SEPARATOR","\\",163],["T_STRING","Magento",163],["T_NS_SEPARATOR","\\",163],["T_STRING","Framework",163],["T_NS_SEPARATOR","\\",163],["T_STRING","Pricing",163],["T_NS_SEPARATOR","\\",163],["T_STRING","PriceCurrencyInterface",163],["T_DOUBLE_COLON","::",163],["T_CLASS","class",163],")",["T_WHITESPACE","\n            ",163],["T_OBJECT_OPERATOR","->",164],["T_STRING","getMock",164],"(",")",";",["T_WHITESPACE","\n        ",164],["T_VARIABLE","$this",165],["T_OBJECT_OPERATOR","->",165],["T_STRING","utility",165],["T_WHITESPACE"," ",165],"=",["T_WHITESPACE"," ",165],["T_NEW","new",165],["T_WHITESPACE"," ",165],["T_NS_SEPARATOR","\\",165],["T_STRING","Magento",165],["T_NS_SEPARATOR","\\",165],["T_STRING","SalesRule",165],["T_NS_SEPARATOR","\\",165],["T_STRING","Model",165],["T_NS_SEPARATOR","\\",165],["T_STRING","Utility",165],"(",["T_WHITESPACE","\n            ",165],["T_VARIABLE","$this",166],["T_OBJECT_OPERATOR","->",166],["T_STRING","usageFactory",166],",",["T_WHITESPACE","\n            ",166],["T_VARIABLE","$this",167],["T_OBJECT_OPERATOR","->",167],["T_STRING","couponFactory",167],",",["T_WHITESPACE","\n            ",167],["T_VARIABLE","$this",168],["T_OBJECT_OPERATOR","->",168],["T_STRING","customerFactory",168],",",["T_WHITESPACE","\n            ",168],["T_VARIABLE","$this",169],["T_OBJECT_OPERATOR","->",169],["T_STRING","objectFactory",169],",",["T_WHITESPACE","\n            ",169],["T_VARIABLE","$this",170],["T_OBJECT_OPERATOR","->",170],["T_STRING","priceCurrency",170],["T_WHITESPACE","\n        ",170],")",";",["T_WHITESPACE","\n    ",171],"}",["T_WHITESPACE","\n\n    ",172],["T_DOC_COMMENT","\/**\n     * Check rule for specific address\n     *\/",174],["T_WHITESPACE","\n    ",176],["T_PUBLIC","public",177],["T_WHITESPACE"," ",177],["T_FUNCTION","function",177],["T_WHITESPACE"," ",177],["T_STRING","testCanProcessRuleValidAddress",177],"(",")",["T_WHITESPACE","\n    ",177],"{",["T_WHITESPACE","\n        ",178],["T_VARIABLE","$this",179],["T_OBJECT_OPERATOR","->",179],["T_STRING","rule",179],["T_OBJECT_OPERATOR","->",179],["T_STRING","expects",179],"(",["T_VARIABLE","$this",179],["T_OBJECT_OPERATOR","->",179],["T_STRING","once",179],"(",")",")",["T_WHITESPACE","\n            ",179],["T_OBJECT_OPERATOR","->",180],["T_STRING","method",180],"(",["T_CONSTANT_ENCAPSED_STRING","'hasIsValidForAddress'",180],")",["T_WHITESPACE","\n            ",180],["T_OBJECT_OPERATOR","->",181],["T_STRING","with",181],"(",["T_VARIABLE","$this",181],["T_OBJECT_OPERATOR","->",181],["T_STRING","address",181],")",["T_WHITESPACE","\n            ",181],["T_OBJECT_OPERATOR","->",182],["T_STRING","will",182],"(",["T_VARIABLE","$this",182],["T_OBJECT_OPERATOR","->",182],["T_STRING","returnValue",182],"(",["T_STRING","true",182],")",")",";",["T_WHITESPACE","\n        ",182],["T_VARIABLE","$this",183],["T_OBJECT_OPERATOR","->",183],["T_STRING","rule",183],["T_OBJECT_OPERATOR","->",183],["T_STRING","expects",183],"(",["T_VARIABLE","$this",183],["T_OBJECT_OPERATOR","->",183],["T_STRING","once",183],"(",")",")",["T_WHITESPACE","\n            ",183],["T_OBJECT_OPERATOR","->",184],["T_STRING","method",184],"(",["T_CONSTANT_ENCAPSED_STRING","'getIsValidForAddress'",184],")",["T_WHITESPACE","\n            ",184],["T_OBJECT_OPERATOR","->",185],["T_STRING","with",185],"(",["T_VARIABLE","$this",185],["T_OBJECT_OPERATOR","->",185],["T_STRING","address",185],")",["T_WHITESPACE","\n            ",185],["T_OBJECT_OPERATOR","->",186],["T_STRING","will",186],"(",["T_VARIABLE","$this",186],["T_OBJECT_OPERATOR","->",186],["T_STRING","returnValue",186],"(",["T_STRING","true",186],")",")",";",["T_WHITESPACE","\n        ",186],["T_VARIABLE","$this",187],["T_OBJECT_OPERATOR","->",187],["T_STRING","address",187],["T_OBJECT_OPERATOR","->",187],["T_STRING","expects",187],"(",["T_VARIABLE","$this",187],["T_OBJECT_OPERATOR","->",187],["T_STRING","once",187],"(",")",")",["T_WHITESPACE","\n            ",187],["T_OBJECT_OPERATOR","->",188],["T_STRING","method",188],"(",["T_CONSTANT_ENCAPSED_STRING","'isObjectNew'",188],")",["T_WHITESPACE","\n            ",188],["T_OBJECT_OPERATOR","->",189],["T_STRING","will",189],"(",["T_VARIABLE","$this",189],["T_OBJECT_OPERATOR","->",189],["T_STRING","returnValue",189],"(",["T_STRING","false",189],")",")",";",["T_WHITESPACE","\n        ",189],["T_VARIABLE","$this",190],["T_OBJECT_OPERATOR","->",190],["T_STRING","assertTrue",190],"(",["T_VARIABLE","$this",190],["T_OBJECT_OPERATOR","->",190],["T_STRING","utility",190],["T_OBJECT_OPERATOR","->",190],["T_STRING","canProcessRule",190],"(",["T_VARIABLE","$this",190],["T_OBJECT_OPERATOR","->",190],["T_STRING","rule",190],",",["T_WHITESPACE"," ",190],["T_VARIABLE","$this",190],["T_OBJECT_OPERATOR","->",190],["T_STRING","address",190],")",")",";",["T_WHITESPACE","\n    ",190],"}",["T_WHITESPACE","\n\n    ",191],["T_DOC_COMMENT","\/**\n     * Check coupon entire usage limit\n     *\/",193],["T_WHITESPACE","\n    ",195],["T_PUBLIC","public",196],["T_WHITESPACE"," ",196],["T_FUNCTION","function",196],["T_WHITESPACE"," ",196],["T_STRING","testCanProcessRuleCouponUsageLimitFail",196],"(",")",["T_WHITESPACE","\n    ",196],"{",["T_WHITESPACE","\n        ",197],["T_VARIABLE","$couponCode",198],["T_WHITESPACE"," ",198],"=",["T_WHITESPACE"," ",198],["T_LNUMBER","111",198],";",["T_WHITESPACE","\n        ",198],["T_VARIABLE","$couponId",199],["T_WHITESPACE"," ",199],"=",["T_WHITESPACE"," ",199],["T_LNUMBER","4",199],";",["T_WHITESPACE","\n        ",199],["T_VARIABLE","$quoteId",200],["T_WHITESPACE"," ",200],"=",["T_WHITESPACE"," ",200],["T_LNUMBER","4",200],";",["T_WHITESPACE","\n        ",200],["T_VARIABLE","$usageLimit",201],["T_WHITESPACE"," ",201],"=",["T_WHITESPACE"," ",201],["T_LNUMBER","1",201],";",["T_WHITESPACE","\n        ",201],["T_VARIABLE","$timesUsed",202],["T_WHITESPACE"," ",202],"=",["T_WHITESPACE"," ",202],["T_LNUMBER","2",202],";",["T_WHITESPACE","\n        ",202],["T_VARIABLE","$this",203],["T_OBJECT_OPERATOR","->",203],["T_STRING","rule",203],["T_OBJECT_OPERATOR","->",203],["T_STRING","setCouponType",203],"(",["T_NS_SEPARATOR","\\",203],["T_STRING","Magento",203],["T_NS_SEPARATOR","\\",203],["T_STRING","SalesRule",203],["T_NS_SEPARATOR","\\",203],["T_STRING","Model",203],["T_NS_SEPARATOR","\\",203],["T_STRING","Rule",203],["T_DOUBLE_COLON","::",203],["T_STRING","COUPON_TYPE_SPECIFIC",203],")",";",["T_WHITESPACE","\n        ",203],["T_VARIABLE","$this",204],["T_OBJECT_OPERATOR","->",204],["T_STRING","quote",204],["T_OBJECT_OPERATOR","->",204],["T_STRING","setCouponCode",204],"(",["T_VARIABLE","$couponCode",204],")",";",["T_WHITESPACE","\n        ",204],["T_VARIABLE","$this",205],["T_OBJECT_OPERATOR","->",205],["T_STRING","quote",205],["T_OBJECT_OPERATOR","->",205],["T_STRING","setId",205],"(",["T_VARIABLE","$quoteId",205],")",";",["T_WHITESPACE","\n        ",205],["T_VARIABLE","$this",206],["T_OBJECT_OPERATOR","->",206],["T_STRING","address",206],["T_OBJECT_OPERATOR","->",206],["T_STRING","expects",206],"(",["T_VARIABLE","$this",206],["T_OBJECT_OPERATOR","->",206],["T_STRING","once",206],"(",")",")",["T_WHITESPACE","\n            ",206],["T_OBJECT_OPERATOR","->",207],["T_STRING","method",207],"(",["T_CONSTANT_ENCAPSED_STRING","'getQuote'",207],")",["T_WHITESPACE","\n            ",207],["T_OBJECT_OPERATOR","->",208],["T_STRING","will",208],"(",["T_VARIABLE","$this",208],["T_OBJECT_OPERATOR","->",208],["T_STRING","returnValue",208],"(",["T_VARIABLE","$this",208],["T_OBJECT_OPERATOR","->",208],["T_STRING","quote",208],")",")",";",["T_WHITESPACE","\n\n        ",208],["T_VARIABLE","$this",210],["T_OBJECT_OPERATOR","->",210],["T_STRING","coupon",210],["T_OBJECT_OPERATOR","->",210],["T_STRING","expects",210],"(",["T_VARIABLE","$this",210],["T_OBJECT_OPERATOR","->",210],["T_STRING","atLeastOnce",210],"(",")",")",["T_WHITESPACE","\n            ",210],["T_OBJECT_OPERATOR","->",211],["T_STRING","method",211],"(",["T_CONSTANT_ENCAPSED_STRING","'getUsageLimit'",211],")",["T_WHITESPACE","\n            ",211],["T_OBJECT_OPERATOR","->",212],["T_STRING","will",212],"(",["T_VARIABLE","$this",212],["T_OBJECT_OPERATOR","->",212],["T_STRING","returnValue",212],"(",["T_VARIABLE","$usageLimit",212],")",")",";",["T_WHITESPACE","\n        ",212],["T_VARIABLE","$this",213],["T_OBJECT_OPERATOR","->",213],["T_STRING","coupon",213],["T_OBJECT_OPERATOR","->",213],["T_STRING","expects",213],"(",["T_VARIABLE","$this",213],["T_OBJECT_OPERATOR","->",213],["T_STRING","once",213],"(",")",")",["T_WHITESPACE","\n            ",213],["T_OBJECT_OPERATOR","->",214],["T_STRING","method",214],"(",["T_CONSTANT_ENCAPSED_STRING","'getTimesUsed'",214],")",["T_WHITESPACE","\n            ",214],["T_OBJECT_OPERATOR","->",215],["T_STRING","will",215],"(",["T_VARIABLE","$this",215],["T_OBJECT_OPERATOR","->",215],["T_STRING","returnValue",215],"(",["T_VARIABLE","$timesUsed",215],")",")",";",["T_WHITESPACE","\n        ",215],["T_VARIABLE","$this",216],["T_OBJECT_OPERATOR","->",216],["T_STRING","coupon",216],["T_OBJECT_OPERATOR","->",216],["T_STRING","expects",216],"(",["T_VARIABLE","$this",216],["T_OBJECT_OPERATOR","->",216],["T_STRING","once",216],"(",")",")",["T_WHITESPACE","\n            ",216],["T_OBJECT_OPERATOR","->",217],["T_STRING","method",217],"(",["T_CONSTANT_ENCAPSED_STRING","'load'",217],")",["T_WHITESPACE","\n            ",217],["T_OBJECT_OPERATOR","->",218],["T_STRING","with",218],"(",["T_VARIABLE","$couponCode",218],",",["T_WHITESPACE"," ",218],["T_CONSTANT_ENCAPSED_STRING","'code'",218],")",["T_WHITESPACE","\n            ",218],["T_OBJECT_OPERATOR","->",219],["T_STRING","will",219],"(",["T_VARIABLE","$this",219],["T_OBJECT_OPERATOR","->",219],["T_STRING","returnSelf",219],"(",")",")",";",["T_WHITESPACE","\n        ",219],["T_VARIABLE","$this",220],["T_OBJECT_OPERATOR","->",220],["T_STRING","couponFactory",220],["T_OBJECT_OPERATOR","->",220],["T_STRING","expects",220],"(",["T_VARIABLE","$this",220],["T_OBJECT_OPERATOR","->",220],["T_STRING","once",220],"(",")",")",["T_WHITESPACE","\n            ",220],["T_OBJECT_OPERATOR","->",221],["T_STRING","method",221],"(",["T_CONSTANT_ENCAPSED_STRING","'create'",221],")",["T_WHITESPACE","\n            ",221],["T_OBJECT_OPERATOR","->",222],["T_STRING","will",222],"(",["T_VARIABLE","$this",222],["T_OBJECT_OPERATOR","->",222],["T_STRING","returnValue",222],"(",["T_VARIABLE","$this",222],["T_OBJECT_OPERATOR","->",222],["T_STRING","coupon",222],")",")",";",["T_WHITESPACE","\n        ",222],["T_VARIABLE","$this",223],["T_OBJECT_OPERATOR","->",223],["T_STRING","coupon",223],["T_OBJECT_OPERATOR","->",223],["T_STRING","expects",223],"(",["T_VARIABLE","$this",223],["T_OBJECT_OPERATOR","->",223],["T_STRING","once",223],"(",")",")",["T_WHITESPACE","\n            ",223],["T_OBJECT_OPERATOR","->",224],["T_STRING","method",224],"(",["T_CONSTANT_ENCAPSED_STRING","'getId'",224],")",["T_WHITESPACE","\n            ",224],["T_OBJECT_OPERATOR","->",225],["T_STRING","will",225],"(",["T_VARIABLE","$this",225],["T_OBJECT_OPERATOR","->",225],["T_STRING","returnValue",225],"(",["T_VARIABLE","$couponId",225],")",")",";",["T_WHITESPACE","\n        ",225],["T_VARIABLE","$this",226],["T_OBJECT_OPERATOR","->",226],["T_STRING","assertFalse",226],"(",["T_VARIABLE","$this",226],["T_OBJECT_OPERATOR","->",226],["T_STRING","utility",226],["T_OBJECT_OPERATOR","->",226],["T_STRING","canProcessRule",226],"(",["T_VARIABLE","$this",226],["T_OBJECT_OPERATOR","->",226],["T_STRING","rule",226],",",["T_WHITESPACE"," ",226],["T_VARIABLE","$this",226],["T_OBJECT_OPERATOR","->",226],["T_STRING","address",226],")",")",";",["T_WHITESPACE","\n    ",226],"}",["T_WHITESPACE","\n\n    ",227],["T_DOC_COMMENT","\/**\n     * Check coupon per customer usage limit\n     *\/",229],["T_WHITESPACE","\n    ",231],["T_PUBLIC","public",232],["T_WHITESPACE"," ",232],["T_FUNCTION","function",232],["T_WHITESPACE"," ",232],["T_STRING","testCanProcessRuleCouponUsagePerCustomerFail",232],"(",")",["T_WHITESPACE","\n    ",232],"{",["T_WHITESPACE","\n        ",233],["T_VARIABLE","$couponCode",234],["T_WHITESPACE"," ",234],"=",["T_WHITESPACE"," ",234],["T_LNUMBER","111",234],";",["T_WHITESPACE","\n        ",234],["T_VARIABLE","$couponId",235],["T_WHITESPACE"," ",235],"=",["T_WHITESPACE"," ",235],["T_LNUMBER","4",235],";",["T_WHITESPACE","\n        ",235],["T_VARIABLE","$quoteId",236],["T_WHITESPACE"," ",236],"=",["T_WHITESPACE"," ",236],["T_LNUMBER","4",236],";",["T_WHITESPACE","\n        ",236],["T_VARIABLE","$customerId",237],["T_WHITESPACE"," ",237],"=",["T_WHITESPACE"," ",237],["T_LNUMBER","1",237],";",["T_WHITESPACE","\n        ",237],["T_VARIABLE","$usageLimit",238],["T_WHITESPACE"," ",238],"=",["T_WHITESPACE"," ",238],["T_LNUMBER","1",238],";",["T_WHITESPACE","\n        ",238],["T_VARIABLE","$timesUsed",239],["T_WHITESPACE"," ",239],"=",["T_WHITESPACE"," ",239],["T_LNUMBER","2",239],";",["T_WHITESPACE","\n\n        ",239],["T_VARIABLE","$this",241],["T_OBJECT_OPERATOR","->",241],["T_STRING","rule",241],["T_OBJECT_OPERATOR","->",241],["T_STRING","setCouponType",241],"(",["T_NS_SEPARATOR","\\",241],["T_STRING","Magento",241],["T_NS_SEPARATOR","\\",241],["T_STRING","SalesRule",241],["T_NS_SEPARATOR","\\",241],["T_STRING","Model",241],["T_NS_SEPARATOR","\\",241],["T_STRING","Rule",241],["T_DOUBLE_COLON","::",241],["T_STRING","COUPON_TYPE_SPECIFIC",241],")",";",["T_WHITESPACE","\n        ",241],["T_VARIABLE","$this",242],["T_OBJECT_OPERATOR","->",242],["T_STRING","quote",242],["T_OBJECT_OPERATOR","->",242],["T_STRING","setCouponCode",242],"(",["T_VARIABLE","$couponCode",242],")",";",["T_WHITESPACE","\n        ",242],["T_VARIABLE","$this",243],["T_OBJECT_OPERATOR","->",243],["T_STRING","quote",243],["T_OBJECT_OPERATOR","->",243],["T_STRING","setId",243],"(",["T_VARIABLE","$quoteId",243],")",";",["T_WHITESPACE","\n        ",243],["T_VARIABLE","$this",244],["T_OBJECT_OPERATOR","->",244],["T_STRING","quote",244],["T_OBJECT_OPERATOR","->",244],["T_STRING","setCustomerId",244],"(",["T_VARIABLE","$customerId",244],")",";",["T_WHITESPACE","\n        ",244],["T_VARIABLE","$this",245],["T_OBJECT_OPERATOR","->",245],["T_STRING","address",245],["T_OBJECT_OPERATOR","->",245],["T_STRING","expects",245],"(",["T_VARIABLE","$this",245],["T_OBJECT_OPERATOR","->",245],["T_STRING","atLeastOnce",245],"(",")",")",["T_WHITESPACE","\n            ",245],["T_OBJECT_OPERATOR","->",246],["T_STRING","method",246],"(",["T_CONSTANT_ENCAPSED_STRING","'getQuote'",246],")",["T_WHITESPACE","\n            ",246],["T_OBJECT_OPERATOR","->",247],["T_STRING","will",247],"(",["T_VARIABLE","$this",247],["T_OBJECT_OPERATOR","->",247],["T_STRING","returnValue",247],"(",["T_VARIABLE","$this",247],["T_OBJECT_OPERATOR","->",247],["T_STRING","quote",247],")",")",";",["T_WHITESPACE","\n\n        ",247],["T_VARIABLE","$this",249],["T_OBJECT_OPERATOR","->",249],["T_STRING","coupon",249],["T_OBJECT_OPERATOR","->",249],["T_STRING","expects",249],"(",["T_VARIABLE","$this",249],["T_OBJECT_OPERATOR","->",249],["T_STRING","atLeastOnce",249],"(",")",")",["T_WHITESPACE","\n            ",249],["T_OBJECT_OPERATOR","->",250],["T_STRING","method",250],"(",["T_CONSTANT_ENCAPSED_STRING","'getUsagePerCustomer'",250],")",["T_WHITESPACE","\n            ",250],["T_OBJECT_OPERATOR","->",251],["T_STRING","will",251],"(",["T_VARIABLE","$this",251],["T_OBJECT_OPERATOR","->",251],["T_STRING","returnValue",251],"(",["T_VARIABLE","$usageLimit",251],")",")",";",["T_WHITESPACE","\n        ",251],["T_VARIABLE","$this",252],["T_OBJECT_OPERATOR","->",252],["T_STRING","coupon",252],["T_OBJECT_OPERATOR","->",252],["T_STRING","expects",252],"(",["T_VARIABLE","$this",252],["T_OBJECT_OPERATOR","->",252],["T_STRING","once",252],"(",")",")",["T_WHITESPACE","\n            ",252],["T_OBJECT_OPERATOR","->",253],["T_STRING","method",253],"(",["T_CONSTANT_ENCAPSED_STRING","'load'",253],")",["T_WHITESPACE","\n            ",253],["T_OBJECT_OPERATOR","->",254],["T_STRING","with",254],"(",["T_VARIABLE","$couponCode",254],",",["T_WHITESPACE"," ",254],["T_CONSTANT_ENCAPSED_STRING","'code'",254],")",["T_WHITESPACE","\n            ",254],["T_OBJECT_OPERATOR","->",255],["T_STRING","will",255],"(",["T_VARIABLE","$this",255],["T_OBJECT_OPERATOR","->",255],["T_STRING","returnSelf",255],"(",")",")",";",["T_WHITESPACE","\n        ",255],["T_VARIABLE","$this",256],["T_OBJECT_OPERATOR","->",256],["T_STRING","coupon",256],["T_OBJECT_OPERATOR","->",256],["T_STRING","expects",256],"(",["T_VARIABLE","$this",256],["T_OBJECT_OPERATOR","->",256],["T_STRING","atLeastOnce",256],"(",")",")",["T_WHITESPACE","\n            ",256],["T_OBJECT_OPERATOR","->",257],["T_STRING","method",257],"(",["T_CONSTANT_ENCAPSED_STRING","'getId'",257],")",["T_WHITESPACE","\n            ",257],["T_OBJECT_OPERATOR","->",258],["T_STRING","will",258],"(",["T_VARIABLE","$this",258],["T_OBJECT_OPERATOR","->",258],["T_STRING","returnValue",258],"(",["T_VARIABLE","$couponId",258],")",")",";",["T_WHITESPACE","\n        ",258],["T_VARIABLE","$this",259],["T_OBJECT_OPERATOR","->",259],["T_STRING","couponFactory",259],["T_OBJECT_OPERATOR","->",259],["T_STRING","expects",259],"(",["T_VARIABLE","$this",259],["T_OBJECT_OPERATOR","->",259],["T_STRING","once",259],"(",")",")",["T_WHITESPACE","\n            ",259],["T_OBJECT_OPERATOR","->",260],["T_STRING","method",260],"(",["T_CONSTANT_ENCAPSED_STRING","'create'",260],")",["T_WHITESPACE","\n            ",260],["T_OBJECT_OPERATOR","->",261],["T_STRING","will",261],"(",["T_VARIABLE","$this",261],["T_OBJECT_OPERATOR","->",261],["T_STRING","returnValue",261],"(",["T_VARIABLE","$this",261],["T_OBJECT_OPERATOR","->",261],["T_STRING","coupon",261],")",")",";",["T_WHITESPACE","\n\n        ",261],["T_VARIABLE","$couponUsage",263],["T_WHITESPACE"," ",263],"=",["T_WHITESPACE"," ",263],["T_NEW","new",263],["T_WHITESPACE"," ",263],["T_NS_SEPARATOR","\\",263],["T_STRING","Magento",263],["T_NS_SEPARATOR","\\",263],["T_STRING","Framework",263],["T_NS_SEPARATOR","\\",263],["T_STRING","DataObject",263],"(",")",";",["T_WHITESPACE","\n        ",263],["T_VARIABLE","$this",264],["T_OBJECT_OPERATOR","->",264],["T_STRING","objectFactory",264],["T_OBJECT_OPERATOR","->",264],["T_STRING","expects",264],"(",["T_VARIABLE","$this",264],["T_OBJECT_OPERATOR","->",264],["T_STRING","once",264],"(",")",")",["T_WHITESPACE","\n            ",264],["T_OBJECT_OPERATOR","->",265],["T_STRING","method",265],"(",["T_CONSTANT_ENCAPSED_STRING","'create'",265],")",["T_WHITESPACE","\n            ",265],["T_OBJECT_OPERATOR","->",266],["T_STRING","will",266],"(",["T_VARIABLE","$this",266],["T_OBJECT_OPERATOR","->",266],["T_STRING","returnValue",266],"(",["T_VARIABLE","$couponUsage",266],")",")",";",["T_WHITESPACE","\n        ",266],["T_VARIABLE","$couponUsageModel",267],["T_WHITESPACE"," ",267],"=",["T_WHITESPACE"," ",267],["T_VARIABLE","$this",267],["T_OBJECT_OPERATOR","->",267],["T_STRING","getMock",267],"(",["T_WHITESPACE","\n            ",267],["T_NS_SEPARATOR","\\",268],["T_STRING","Magento",268],["T_NS_SEPARATOR","\\",268],["T_STRING","SalesRule",268],["T_NS_SEPARATOR","\\",268],["T_STRING","Model",268],["T_NS_SEPARATOR","\\",268],["T_STRING","ResourceModel",268],["T_NS_SEPARATOR","\\",268],["T_STRING","Coupon",268],["T_NS_SEPARATOR","\\",268],["T_STRING","Usage",268],["T_DOUBLE_COLON","::",268],["T_CLASS","class",268],",",["T_WHITESPACE","\n            ",268],"[","]",",",["T_WHITESPACE","\n            ",269],"[","]",",",["T_WHITESPACE","\n            ",270],["T_CONSTANT_ENCAPSED_STRING","''",271],",",["T_WHITESPACE","\n            ",271],["T_STRING","false",272],["T_WHITESPACE","\n        ",272],")",";",["T_WHITESPACE","\n        ",273],["T_VARIABLE","$couponUsage",274],["T_OBJECT_OPERATOR","->",274],["T_STRING","setData",274],"(","[",["T_CONSTANT_ENCAPSED_STRING","'coupon_id'",274],["T_WHITESPACE"," ",274],["T_DOUBLE_ARROW","=>",274],["T_WHITESPACE"," ",274],["T_VARIABLE","$couponId",274],",",["T_WHITESPACE"," ",274],["T_CONSTANT_ENCAPSED_STRING","'times_used'",274],["T_WHITESPACE"," ",274],["T_DOUBLE_ARROW","=>",274],["T_WHITESPACE"," ",274],["T_VARIABLE","$timesUsed",274],"]",")",";",["T_WHITESPACE","\n        ",274],["T_VARIABLE","$this",275],["T_OBJECT_OPERATOR","->",275],["T_STRING","usageFactory",275],["T_OBJECT_OPERATOR","->",275],["T_STRING","expects",275],"(",["T_VARIABLE","$this",275],["T_OBJECT_OPERATOR","->",275],["T_STRING","once",275],"(",")",")",["T_WHITESPACE","\n            ",275],["T_OBJECT_OPERATOR","->",276],["T_STRING","method",276],"(",["T_CONSTANT_ENCAPSED_STRING","'create'",276],")",["T_WHITESPACE","\n            ",276],["T_OBJECT_OPERATOR","->",277],["T_STRING","will",277],"(",["T_VARIABLE","$this",277],["T_OBJECT_OPERATOR","->",277],["T_STRING","returnValue",277],"(",["T_VARIABLE","$couponUsageModel",277],")",")",";",["T_WHITESPACE","\n        ",277],["T_VARIABLE","$this",278],["T_OBJECT_OPERATOR","->",278],["T_STRING","assertFalse",278],"(",["T_VARIABLE","$this",278],["T_OBJECT_OPERATOR","->",278],["T_STRING","utility",278],["T_OBJECT_OPERATOR","->",278],["T_STRING","canProcessRule",278],"(",["T_VARIABLE","$this",278],["T_OBJECT_OPERATOR","->",278],["T_STRING","rule",278],",",["T_WHITESPACE"," ",278],["T_VARIABLE","$this",278],["T_OBJECT_OPERATOR","->",278],["T_STRING","address",278],")",")",";",["T_WHITESPACE","\n    ",278],"}",["T_WHITESPACE","\n\n    ",279],["T_DOC_COMMENT","\/**\n     * Check rule per customer usage limit\n     *\/",281],["T_WHITESPACE","\n    ",283],["T_PUBLIC","public",284],["T_WHITESPACE"," ",284],["T_FUNCTION","function",284],["T_WHITESPACE"," ",284],["T_STRING","testCanProcessRuleUsagePerCustomer",284],"(",")",["T_WHITESPACE","\n    ",284],"{",["T_WHITESPACE","\n        ",285],["T_VARIABLE","$customerId",286],["T_WHITESPACE"," ",286],"=",["T_WHITESPACE"," ",286],["T_LNUMBER","1",286],";",["T_WHITESPACE","\n        ",286],["T_VARIABLE","$usageLimit",287],["T_WHITESPACE"," ",287],"=",["T_WHITESPACE"," ",287],["T_LNUMBER","1",287],";",["T_WHITESPACE","\n        ",287],["T_VARIABLE","$timesUsed",288],["T_WHITESPACE"," ",288],"=",["T_WHITESPACE"," ",288],["T_LNUMBER","2",288],";",["T_WHITESPACE","\n        ",288],["T_VARIABLE","$ruleId",289],["T_WHITESPACE"," ",289],"=",["T_WHITESPACE"," ",289],["T_LNUMBER","4",289],";",["T_WHITESPACE","\n        ",289],["T_VARIABLE","$this",290],["T_OBJECT_OPERATOR","->",290],["T_STRING","rule",290],["T_OBJECT_OPERATOR","->",290],["T_STRING","setId",290],"(",["T_VARIABLE","$ruleId",290],")",";",["T_WHITESPACE","\n        ",290],["T_VARIABLE","$this",291],["T_OBJECT_OPERATOR","->",291],["T_STRING","rule",291],["T_OBJECT_OPERATOR","->",291],["T_STRING","setUsesPerCustomer",291],"(",["T_VARIABLE","$usageLimit",291],")",";",["T_WHITESPACE","\n        ",291],["T_VARIABLE","$this",292],["T_OBJECT_OPERATOR","->",292],["T_STRING","quote",292],["T_OBJECT_OPERATOR","->",292],["T_STRING","setCustomerId",292],"(",["T_VARIABLE","$customerId",292],")",";",["T_WHITESPACE","\n        ",292],["T_VARIABLE","$this",293],["T_OBJECT_OPERATOR","->",293],["T_STRING","address",293],["T_OBJECT_OPERATOR","->",293],["T_STRING","expects",293],"(",["T_VARIABLE","$this",293],["T_OBJECT_OPERATOR","->",293],["T_STRING","atLeastOnce",293],"(",")",")",["T_WHITESPACE","\n            ",293],["T_OBJECT_OPERATOR","->",294],["T_STRING","method",294],"(",["T_CONSTANT_ENCAPSED_STRING","'getQuote'",294],")",["T_WHITESPACE","\n            ",294],["T_OBJECT_OPERATOR","->",295],["T_STRING","will",295],"(",["T_VARIABLE","$this",295],["T_OBJECT_OPERATOR","->",295],["T_STRING","returnValue",295],"(",["T_VARIABLE","$this",295],["T_OBJECT_OPERATOR","->",295],["T_STRING","quote",295],")",")",";",["T_WHITESPACE","\n        ",295],["T_VARIABLE","$this",296],["T_OBJECT_OPERATOR","->",296],["T_STRING","customer",296],["T_OBJECT_OPERATOR","->",296],["T_STRING","setId",296],"(",["T_VARIABLE","$customerId",296],")",";",["T_WHITESPACE","\n        ",296],["T_VARIABLE","$this",297],["T_OBJECT_OPERATOR","->",297],["T_STRING","customer",297],["T_OBJECT_OPERATOR","->",297],["T_STRING","setTimesUsed",297],"(",["T_VARIABLE","$timesUsed",297],")",";",["T_WHITESPACE","\n        ",297],["T_VARIABLE","$this",298],["T_OBJECT_OPERATOR","->",298],["T_STRING","customerFactory",298],["T_OBJECT_OPERATOR","->",298],["T_STRING","expects",298],"(",["T_VARIABLE","$this",298],["T_OBJECT_OPERATOR","->",298],["T_STRING","once",298],"(",")",")",["T_WHITESPACE","\n            ",298],["T_OBJECT_OPERATOR","->",299],["T_STRING","method",299],"(",["T_CONSTANT_ENCAPSED_STRING","'create'",299],")",["T_WHITESPACE","\n            ",299],["T_OBJECT_OPERATOR","->",300],["T_STRING","will",300],"(",["T_VARIABLE","$this",300],["T_OBJECT_OPERATOR","->",300],["T_STRING","returnValue",300],"(",["T_VARIABLE","$this",300],["T_OBJECT_OPERATOR","->",300],["T_STRING","customer",300],")",")",";",["T_WHITESPACE","\n\n        ",300],["T_VARIABLE","$this",302],["T_OBJECT_OPERATOR","->",302],["T_STRING","assertFalse",302],"(",["T_VARIABLE","$this",302],["T_OBJECT_OPERATOR","->",302],["T_STRING","utility",302],["T_OBJECT_OPERATOR","->",302],["T_STRING","canProcessRule",302],"(",["T_VARIABLE","$this",302],["T_OBJECT_OPERATOR","->",302],["T_STRING","rule",302],",",["T_WHITESPACE"," ",302],["T_VARIABLE","$this",302],["T_OBJECT_OPERATOR","->",302],["T_STRING","address",302],")",")",";",["T_WHITESPACE","\n    ",302],"}",["T_WHITESPACE","\n\n    ",303],["T_DOC_COMMENT","\/**\n     * Quote does not meet rule's conditions\n     *\/",305],["T_WHITESPACE","\n    ",307],["T_PUBLIC","public",308],["T_WHITESPACE"," ",308],["T_FUNCTION","function",308],["T_WHITESPACE"," ",308],["T_STRING","testCanProcessRuleInvalidConditions",308],"(",")",["T_WHITESPACE","\n    ",308],"{",["T_WHITESPACE","\n        ",309],["T_VARIABLE","$this",310],["T_OBJECT_OPERATOR","->",310],["T_STRING","rule",310],["T_OBJECT_OPERATOR","->",310],["T_STRING","setCouponType",310],"(",["T_NS_SEPARATOR","\\",310],["T_STRING","Magento",310],["T_NS_SEPARATOR","\\",310],["T_STRING","SalesRule",310],["T_NS_SEPARATOR","\\",310],["T_STRING","Model",310],["T_NS_SEPARATOR","\\",310],["T_STRING","Rule",310],["T_DOUBLE_COLON","::",310],["T_STRING","COUPON_TYPE_NO_COUPON",310],")",";",["T_WHITESPACE","\n        ",310],["T_VARIABLE","$this",311],["T_OBJECT_OPERATOR","->",311],["T_STRING","assertFalse",311],"(",["T_VARIABLE","$this",311],["T_OBJECT_OPERATOR","->",311],["T_STRING","utility",311],["T_OBJECT_OPERATOR","->",311],["T_STRING","canProcessRule",311],"(",["T_VARIABLE","$this",311],["T_OBJECT_OPERATOR","->",311],["T_STRING","rule",311],",",["T_WHITESPACE"," ",311],["T_VARIABLE","$this",311],["T_OBJECT_OPERATOR","->",311],["T_STRING","address",311],")",")",";",["T_WHITESPACE","\n    ",311],"}",["T_WHITESPACE","\n\n    ",312],["T_DOC_COMMENT","\/**\n     * Quote does not meet rule's conditions\n     *\/",314],["T_WHITESPACE","\n    ",316],["T_PUBLIC","public",317],["T_WHITESPACE"," ",317],["T_FUNCTION","function",317],["T_WHITESPACE"," ",317],["T_STRING","testCanProcessRule",317],"(",")",["T_WHITESPACE","\n    ",317],"{",["T_WHITESPACE","\n        ",318],["T_VARIABLE","$this",319],["T_OBJECT_OPERATOR","->",319],["T_STRING","rule",319],["T_OBJECT_OPERATOR","->",319],["T_STRING","setCouponType",319],"(",["T_NS_SEPARATOR","\\",319],["T_STRING","Magento",319],["T_NS_SEPARATOR","\\",319],["T_STRING","SalesRule",319],["T_NS_SEPARATOR","\\",319],["T_STRING","Model",319],["T_NS_SEPARATOR","\\",319],["T_STRING","Rule",319],["T_DOUBLE_COLON","::",319],["T_STRING","COUPON_TYPE_NO_COUPON",319],")",";",["T_WHITESPACE","\n        ",319],["T_VARIABLE","$this",320],["T_OBJECT_OPERATOR","->",320],["T_STRING","rule",320],["T_OBJECT_OPERATOR","->",320],["T_STRING","expects",320],"(",["T_VARIABLE","$this",320],["T_OBJECT_OPERATOR","->",320],["T_STRING","once",320],"(",")",")",["T_WHITESPACE","\n            ",320],["T_OBJECT_OPERATOR","->",321],["T_STRING","method",321],"(",["T_CONSTANT_ENCAPSED_STRING","'validate'",321],")",["T_WHITESPACE","\n            ",321],["T_OBJECT_OPERATOR","->",322],["T_STRING","will",322],"(",["T_VARIABLE","$this",322],["T_OBJECT_OPERATOR","->",322],["T_STRING","returnValue",322],"(",["T_STRING","true",322],")",")",";",["T_WHITESPACE","\n        ",322],["T_VARIABLE","$this",323],["T_OBJECT_OPERATOR","->",323],["T_STRING","assertTrue",323],"(",["T_VARIABLE","$this",323],["T_OBJECT_OPERATOR","->",323],["T_STRING","utility",323],["T_OBJECT_OPERATOR","->",323],["T_STRING","canProcessRule",323],"(",["T_VARIABLE","$this",323],["T_OBJECT_OPERATOR","->",323],["T_STRING","rule",323],",",["T_WHITESPACE"," ",323],["T_VARIABLE","$this",323],["T_OBJECT_OPERATOR","->",323],["T_STRING","address",323],")",")",";",["T_WHITESPACE","\n    ",323],"}",["T_WHITESPACE","\n\n    ",324],["T_PUBLIC","public",326],["T_WHITESPACE"," ",326],["T_FUNCTION","function",326],["T_WHITESPACE"," ",326],["T_STRING","testGetItemPrice",326],"(",")",["T_WHITESPACE","\n    ",326],"{",["T_WHITESPACE","\n        ",327],["T_VARIABLE","$price",328],["T_WHITESPACE"," ",328],"=",["T_WHITESPACE"," ",328],["T_VARIABLE","$this",328],["T_OBJECT_OPERATOR","->",328],["T_STRING","getItemPrice",328],"(",")",";",["T_WHITESPACE","\n        ",328],["T_VARIABLE","$this",329],["T_OBJECT_OPERATOR","->",329],["T_STRING","assertEquals",329],"(",["T_VARIABLE","$price",329],",",["T_WHITESPACE"," ",329],["T_VARIABLE","$this",329],["T_OBJECT_OPERATOR","->",329],["T_STRING","utility",329],["T_OBJECT_OPERATOR","->",329],["T_STRING","getItemPrice",329],"(",["T_VARIABLE","$this",329],["T_OBJECT_OPERATOR","->",329],["T_STRING","item",329],")",")",";",["T_WHITESPACE","\n    ",329],"}",["T_WHITESPACE","\n\n    ",330],["T_PUBLIC","public",332],["T_WHITESPACE"," ",332],["T_FUNCTION","function",332],["T_WHITESPACE"," ",332],["T_STRING","testGetItemPriceNull",332],"(",")",["T_WHITESPACE","\n    ",332],"{",["T_WHITESPACE","\n        ",333],["T_VARIABLE","$price",334],["T_WHITESPACE"," ",334],"=",["T_WHITESPACE"," ",334],["T_LNUMBER","4",334],";",["T_WHITESPACE","\n\n        ",334],["T_VARIABLE","$this",336],["T_OBJECT_OPERATOR","->",336],["T_STRING","item",336],["T_OBJECT_OPERATOR","->",336],["T_STRING","expects",336],"(",["T_VARIABLE","$this",336],["T_OBJECT_OPERATOR","->",336],["T_STRING","once",336],"(",")",")",["T_WHITESPACE","\n            ",336],["T_OBJECT_OPERATOR","->",337],["T_STRING","method",337],"(",["T_CONSTANT_ENCAPSED_STRING","'getDiscountCalculationPrice'",337],")",["T_WHITESPACE","\n            ",337],["T_OBJECT_OPERATOR","->",338],["T_STRING","will",338],"(",["T_VARIABLE","$this",338],["T_OBJECT_OPERATOR","->",338],["T_STRING","returnValue",338],"(",["T_VARIABLE","$price",338],")",")",";",["T_WHITESPACE","\n        ",338],["T_VARIABLE","$this",339],["T_OBJECT_OPERATOR","->",339],["T_STRING","item",339],["T_OBJECT_OPERATOR","->",339],["T_STRING","expects",339],"(",["T_VARIABLE","$this",339],["T_OBJECT_OPERATOR","->",339],["T_STRING","once",339],"(",")",")",["T_WHITESPACE","\n            ",339],["T_OBJECT_OPERATOR","->",340],["T_STRING","method",340],"(",["T_CONSTANT_ENCAPSED_STRING","'getCalculationPrice'",340],")",["T_WHITESPACE","\n            ",340],["T_OBJECT_OPERATOR","->",341],["T_STRING","will",341],"(",["T_VARIABLE","$this",341],["T_OBJECT_OPERATOR","->",341],["T_STRING","returnValue",341],"(",["T_STRING","null",341],")",")",";",["T_WHITESPACE","\n        ",341],["T_VARIABLE","$this",342],["T_OBJECT_OPERATOR","->",342],["T_STRING","assertEquals",342],"(",["T_VARIABLE","$price",342],",",["T_WHITESPACE"," ",342],["T_VARIABLE","$this",342],["T_OBJECT_OPERATOR","->",342],["T_STRING","utility",342],["T_OBJECT_OPERATOR","->",342],["T_STRING","getItemPrice",342],"(",["T_VARIABLE","$this",342],["T_OBJECT_OPERATOR","->",342],["T_STRING","item",342],")",")",";",["T_WHITESPACE","\n    ",342],"}",["T_WHITESPACE","\n\n    ",343],["T_PUBLIC","public",345],["T_WHITESPACE"," ",345],["T_FUNCTION","function",345],["T_WHITESPACE"," ",345],["T_STRING","testGetItemBasePrice",345],"(",")",["T_WHITESPACE","\n    ",345],"{",["T_WHITESPACE","\n        ",346],["T_VARIABLE","$price",347],["T_WHITESPACE"," ",347],"=",["T_WHITESPACE"," ",347],["T_VARIABLE","$this",347],["T_OBJECT_OPERATOR","->",347],["T_STRING","getItemBasePrice",347],"(",")",";",["T_WHITESPACE","\n        ",347],["T_VARIABLE","$this",348],["T_OBJECT_OPERATOR","->",348],["T_STRING","assertEquals",348],"(",["T_VARIABLE","$price",348],",",["T_WHITESPACE"," ",348],["T_VARIABLE","$this",348],["T_OBJECT_OPERATOR","->",348],["T_STRING","utility",348],["T_OBJECT_OPERATOR","->",348],["T_STRING","getItemBasePrice",348],"(",["T_VARIABLE","$this",348],["T_OBJECT_OPERATOR","->",348],["T_STRING","item",348],")",")",";",["T_WHITESPACE","\n    ",348],"}",["T_WHITESPACE","\n\n    ",349],["T_PUBLIC","public",351],["T_WHITESPACE"," ",351],["T_FUNCTION","function",351],["T_WHITESPACE"," ",351],["T_STRING","testGetBaseItemPriceCalculation",351],"(",")",["T_WHITESPACE","\n    ",351],"{",["T_WHITESPACE","\n        ",352],["T_VARIABLE","$calcPrice",353],["T_WHITESPACE"," ",353],"=",["T_WHITESPACE"," ",353],["T_LNUMBER","5",353],";",["T_WHITESPACE","\n        ",353],["T_VARIABLE","$this",354],["T_OBJECT_OPERATOR","->",354],["T_STRING","item",354],["T_OBJECT_OPERATOR","->",354],["T_STRING","expects",354],"(",["T_VARIABLE","$this",354],["T_OBJECT_OPERATOR","->",354],["T_STRING","once",354],"(",")",")",["T_WHITESPACE","\n            ",354],["T_OBJECT_OPERATOR","->",355],["T_STRING","method",355],"(",["T_CONSTANT_ENCAPSED_STRING","'getDiscountCalculationPrice'",355],")",["T_WHITESPACE","\n            ",355],["T_OBJECT_OPERATOR","->",356],["T_STRING","will",356],"(",["T_VARIABLE","$this",356],["T_OBJECT_OPERATOR","->",356],["T_STRING","returnValue",356],"(",["T_STRING","null",356],")",")",";",["T_WHITESPACE","\n        ",356],["T_VARIABLE","$this",357],["T_OBJECT_OPERATOR","->",357],["T_STRING","item",357],["T_OBJECT_OPERATOR","->",357],["T_STRING","expects",357],"(",["T_VARIABLE","$this",357],["T_OBJECT_OPERATOR","->",357],["T_STRING","any",357],"(",")",")",["T_WHITESPACE","\n            ",357],["T_OBJECT_OPERATOR","->",358],["T_STRING","method",358],"(",["T_CONSTANT_ENCAPSED_STRING","'getBaseCalculationPrice'",358],")",["T_WHITESPACE","\n            ",358],["T_OBJECT_OPERATOR","->",359],["T_STRING","will",359],"(",["T_VARIABLE","$this",359],["T_OBJECT_OPERATOR","->",359],["T_STRING","returnValue",359],"(",["T_VARIABLE","$calcPrice",359],")",")",";",["T_WHITESPACE","\n        ",359],["T_VARIABLE","$this",360],["T_OBJECT_OPERATOR","->",360],["T_STRING","assertEquals",360],"(",["T_VARIABLE","$calcPrice",360],",",["T_WHITESPACE"," ",360],["T_VARIABLE","$this",360],["T_OBJECT_OPERATOR","->",360],["T_STRING","utility",360],["T_OBJECT_OPERATOR","->",360],["T_STRING","getItemBasePrice",360],"(",["T_VARIABLE","$this",360],["T_OBJECT_OPERATOR","->",360],["T_STRING","item",360],")",")",";",["T_WHITESPACE","\n    ",360],"}",["T_WHITESPACE","\n\n    ",361],["T_PUBLIC","public",363],["T_WHITESPACE"," ",363],["T_FUNCTION","function",363],["T_WHITESPACE"," ",363],["T_STRING","testGetItemQtyMin",363],"(",")",["T_WHITESPACE","\n    ",363],"{",["T_WHITESPACE","\n        ",364],["T_VARIABLE","$qty",365],["T_WHITESPACE"," ",365],"=",["T_WHITESPACE"," ",365],["T_LNUMBER","7",365],";",["T_WHITESPACE","\n        ",365],["T_VARIABLE","$discountQty",366],["T_WHITESPACE"," ",366],"=",["T_WHITESPACE"," ",366],["T_LNUMBER","4",366],";",["T_WHITESPACE","\n        ",366],["T_VARIABLE","$this",367],["T_OBJECT_OPERATOR","->",367],["T_STRING","item",367],["T_OBJECT_OPERATOR","->",367],["T_STRING","expects",367],"(",["T_VARIABLE","$this",367],["T_OBJECT_OPERATOR","->",367],["T_STRING","once",367],"(",")",")",["T_WHITESPACE","\n            ",367],["T_OBJECT_OPERATOR","->",368],["T_STRING","method",368],"(",["T_CONSTANT_ENCAPSED_STRING","'getTotalQty'",368],")",["T_WHITESPACE","\n            ",368],["T_OBJECT_OPERATOR","->",369],["T_STRING","will",369],"(",["T_VARIABLE","$this",369],["T_OBJECT_OPERATOR","->",369],["T_STRING","returnValue",369],"(",["T_VARIABLE","$qty",369],")",")",";",["T_WHITESPACE","\n        ",369],["T_VARIABLE","$this",370],["T_OBJECT_OPERATOR","->",370],["T_STRING","rule",370],["T_OBJECT_OPERATOR","->",370],["T_STRING","expects",370],"(",["T_VARIABLE","$this",370],["T_OBJECT_OPERATOR","->",370],["T_STRING","once",370],"(",")",")",["T_WHITESPACE","\n            ",370],["T_OBJECT_OPERATOR","->",371],["T_STRING","method",371],"(",["T_CONSTANT_ENCAPSED_STRING","'getDiscountQty'",371],")",["T_WHITESPACE","\n            ",371],["T_OBJECT_OPERATOR","->",372],["T_STRING","will",372],"(",["T_VARIABLE","$this",372],["T_OBJECT_OPERATOR","->",372],["T_STRING","returnValue",372],"(",["T_VARIABLE","$discountQty",372],")",")",";",["T_WHITESPACE","\n        ",372],["T_VARIABLE","$this",373],["T_OBJECT_OPERATOR","->",373],["T_STRING","assertEquals",373],"(",["T_STRING","min",373],"(",["T_VARIABLE","$discountQty",373],",",["T_WHITESPACE"," ",373],["T_VARIABLE","$qty",373],")",",",["T_WHITESPACE"," ",373],["T_VARIABLE","$this",373],["T_OBJECT_OPERATOR","->",373],["T_STRING","utility",373],["T_OBJECT_OPERATOR","->",373],["T_STRING","getItemQty",373],"(",["T_VARIABLE","$this",373],["T_OBJECT_OPERATOR","->",373],["T_STRING","item",373],",",["T_WHITESPACE"," ",373],["T_VARIABLE","$this",373],["T_OBJECT_OPERATOR","->",373],["T_STRING","rule",373],")",")",";",["T_WHITESPACE","\n    ",373],"}",["T_WHITESPACE","\n\n    ",374],["T_PUBLIC","public",376],["T_WHITESPACE"," ",376],["T_FUNCTION","function",376],["T_WHITESPACE"," ",376],["T_STRING","testGetItemQty",376],"(",")",["T_WHITESPACE","\n    ",376],"{",["T_WHITESPACE","\n        ",377],["T_VARIABLE","$qty",378],["T_WHITESPACE"," ",378],"=",["T_WHITESPACE"," ",378],["T_LNUMBER","7",378],";",["T_WHITESPACE","\n        ",378],["T_VARIABLE","$this",379],["T_OBJECT_OPERATOR","->",379],["T_STRING","item",379],["T_OBJECT_OPERATOR","->",379],["T_STRING","expects",379],"(",["T_VARIABLE","$this",379],["T_OBJECT_OPERATOR","->",379],["T_STRING","once",379],"(",")",")",["T_WHITESPACE","\n            ",379],["T_OBJECT_OPERATOR","->",380],["T_STRING","method",380],"(",["T_CONSTANT_ENCAPSED_STRING","'getTotalQty'",380],")",["T_WHITESPACE","\n            ",380],["T_OBJECT_OPERATOR","->",381],["T_STRING","will",381],"(",["T_VARIABLE","$this",381],["T_OBJECT_OPERATOR","->",381],["T_STRING","returnValue",381],"(",["T_VARIABLE","$qty",381],")",")",";",["T_WHITESPACE","\n        ",381],["T_VARIABLE","$this",382],["T_OBJECT_OPERATOR","->",382],["T_STRING","rule",382],["T_OBJECT_OPERATOR","->",382],["T_STRING","expects",382],"(",["T_VARIABLE","$this",382],["T_OBJECT_OPERATOR","->",382],["T_STRING","once",382],"(",")",")",["T_WHITESPACE","\n            ",382],["T_OBJECT_OPERATOR","->",383],["T_STRING","method",383],"(",["T_CONSTANT_ENCAPSED_STRING","'getDiscountQty'",383],")",["T_WHITESPACE","\n            ",383],["T_OBJECT_OPERATOR","->",384],["T_STRING","will",384],"(",["T_VARIABLE","$this",384],["T_OBJECT_OPERATOR","->",384],["T_STRING","returnValue",384],"(",["T_STRING","null",384],")",")",";",["T_WHITESPACE","\n        ",384],["T_VARIABLE","$this",385],["T_OBJECT_OPERATOR","->",385],["T_STRING","assertEquals",385],"(",["T_VARIABLE","$qty",385],",",["T_WHITESPACE"," ",385],["T_VARIABLE","$this",385],["T_OBJECT_OPERATOR","->",385],["T_STRING","utility",385],["T_OBJECT_OPERATOR","->",385],["T_STRING","getItemQty",385],"(",["T_VARIABLE","$this",385],["T_OBJECT_OPERATOR","->",385],["T_STRING","item",385],",",["T_WHITESPACE"," ",385],["T_VARIABLE","$this",385],["T_OBJECT_OPERATOR","->",385],["T_STRING","rule",385],")",")",";",["T_WHITESPACE","\n    ",385],"}",["T_WHITESPACE","\n\n    ",386],["T_DOC_COMMENT","\/**\n     * @dataProvider mergeIdsDataProvider\n     *\n     * @param [] $a1\n     * @param [] $a2\n     * @param bool $isSting\n     * @param [] $expected\n     *\/",388],["T_WHITESPACE","\n    ",395],["T_PUBLIC","public",396],["T_WHITESPACE"," ",396],["T_FUNCTION","function",396],["T_WHITESPACE"," ",396],["T_STRING","testMergeIds",396],"(",["T_VARIABLE","$a1",396],",",["T_WHITESPACE"," ",396],["T_VARIABLE","$a2",396],",",["T_WHITESPACE"," ",396],["T_VARIABLE","$isSting",396],",",["T_WHITESPACE"," ",396],["T_VARIABLE","$expected",396],")",["T_WHITESPACE","\n    ",396],"{",["T_WHITESPACE","\n        ",397],["T_VARIABLE","$this",398],["T_OBJECT_OPERATOR","->",398],["T_STRING","assertEquals",398],"(",["T_VARIABLE","$expected",398],",",["T_WHITESPACE"," ",398],["T_VARIABLE","$this",398],["T_OBJECT_OPERATOR","->",398],["T_STRING","utility",398],["T_OBJECT_OPERATOR","->",398],["T_STRING","mergeIds",398],"(",["T_VARIABLE","$a1",398],",",["T_WHITESPACE"," ",398],["T_VARIABLE","$a2",398],",",["T_WHITESPACE"," ",398],["T_VARIABLE","$isSting",398],")",")",";",["T_WHITESPACE","\n    ",398],"}",["T_WHITESPACE","\n\n    ",399],["T_PUBLIC","public",401],["T_WHITESPACE"," ",401],["T_FUNCTION","function",401],["T_WHITESPACE"," ",401],["T_STRING","mergeIdsDataProvider",401],"(",")",["T_WHITESPACE","\n    ",401],"{",["T_WHITESPACE","\n        ",402],["T_RETURN","return",403],["T_WHITESPACE"," ",403],"[",["T_WHITESPACE","\n            ",403],"[",["T_CONSTANT_ENCAPSED_STRING","'id1,id2'",404],",",["T_WHITESPACE"," ",404],["T_CONSTANT_ENCAPSED_STRING","''",404],",",["T_WHITESPACE"," ",404],["T_STRING","true",404],",",["T_WHITESPACE"," ",404],["T_CONSTANT_ENCAPSED_STRING","'id1,id2'",404],"]",",",["T_WHITESPACE","\n            ",404],"[",["T_CONSTANT_ENCAPSED_STRING","'id1,id2'",405],",",["T_WHITESPACE"," ",405],["T_CONSTANT_ENCAPSED_STRING","''",405],",",["T_WHITESPACE"," ",405],["T_STRING","false",405],",",["T_WHITESPACE"," ",405],"[",["T_CONSTANT_ENCAPSED_STRING","'id1'",405],",",["T_WHITESPACE"," ",405],["T_CONSTANT_ENCAPSED_STRING","'id2'",405],"]","]",",",["T_WHITESPACE","\n            ",405],"[",["T_CONSTANT_ENCAPSED_STRING","''",406],",",["T_WHITESPACE"," ",406],["T_CONSTANT_ENCAPSED_STRING","'id3,id4'",406],",",["T_WHITESPACE"," ",406],["T_STRING","false",406],",",["T_WHITESPACE"," ",406],"[",["T_CONSTANT_ENCAPSED_STRING","'id3'",406],",",["T_WHITESPACE"," ",406],["T_CONSTANT_ENCAPSED_STRING","'id4'",406],"]","]",",",["T_WHITESPACE","\n            ",406],"[",["T_CONSTANT_ENCAPSED_STRING","''",407],",",["T_WHITESPACE"," ",407],["T_CONSTANT_ENCAPSED_STRING","'id3,id4'",407],",",["T_WHITESPACE"," ",407],["T_STRING","true",407],",",["T_WHITESPACE"," ",407],["T_CONSTANT_ENCAPSED_STRING","'id3,id4'",407],"]",",",["T_WHITESPACE","\n            ",407],"[","[",["T_CONSTANT_ENCAPSED_STRING","'id1'",408],",",["T_WHITESPACE"," ",408],["T_CONSTANT_ENCAPSED_STRING","'id2'",408],"]",",",["T_WHITESPACE"," ",408],"[",["T_CONSTANT_ENCAPSED_STRING","'id3'",408],",",["T_WHITESPACE"," ",408],["T_CONSTANT_ENCAPSED_STRING","'id4'",408],"]",",",["T_WHITESPACE"," ",408],["T_STRING","false",408],",",["T_WHITESPACE"," ",408],"[",["T_CONSTANT_ENCAPSED_STRING","'id1'",408],",",["T_WHITESPACE"," ",408],["T_CONSTANT_ENCAPSED_STRING","'id2'",408],",",["T_WHITESPACE"," ",408],["T_CONSTANT_ENCAPSED_STRING","'id3'",408],",",["T_WHITESPACE"," ",408],["T_CONSTANT_ENCAPSED_STRING","'id4'",408],"]","]",",",["T_WHITESPACE","\n            ",408],"[","[",["T_CONSTANT_ENCAPSED_STRING","'id1'",409],",",["T_WHITESPACE"," ",409],["T_CONSTANT_ENCAPSED_STRING","'id2'",409],"]",",",["T_WHITESPACE"," ",409],"[",["T_CONSTANT_ENCAPSED_STRING","'id3'",409],",",["T_WHITESPACE"," ",409],["T_CONSTANT_ENCAPSED_STRING","'id4'",409],"]",",",["T_WHITESPACE"," ",409],["T_STRING","true",409],",",["T_WHITESPACE"," ",409],["T_CONSTANT_ENCAPSED_STRING","'id1,id2,id3,id4'",409],"]",["T_WHITESPACE","\n        ",409],"]",";",["T_WHITESPACE","\n    ",410],"}",["T_WHITESPACE","\n\n    ",411],["T_PUBLIC","public",413],["T_WHITESPACE"," ",413],["T_FUNCTION","function",413],["T_WHITESPACE"," ",413],["T_STRING","testMinFix",413],"(",")",["T_WHITESPACE","\n    ",413],"{",["T_WHITESPACE","\n        ",414],["T_VARIABLE","$qty",415],["T_WHITESPACE"," ",415],"=",["T_WHITESPACE"," ",415],["T_LNUMBER","13",415],";",["T_WHITESPACE","\n        ",415],["T_VARIABLE","$amount",416],["T_WHITESPACE"," ",416],"=",["T_WHITESPACE"," ",416],["T_LNUMBER","10",416],";",["T_WHITESPACE","\n        ",416],["T_VARIABLE","$baseAmount",417],["T_WHITESPACE"," ",417],"=",["T_WHITESPACE"," ",417],["T_LNUMBER","12",417],";",["T_WHITESPACE","\n        ",417],["T_VARIABLE","$fixedAmount",418],["T_WHITESPACE"," ",418],"=",["T_WHITESPACE"," ",418],["T_LNUMBER","20",418],";",["T_WHITESPACE","\n        ",418],["T_VARIABLE","$fixedBaseAmount",419],["T_WHITESPACE"," ",419],"=",["T_WHITESPACE"," ",419],["T_LNUMBER","24",419],";",["T_WHITESPACE","\n        ",419],["T_VARIABLE","$this",420],["T_OBJECT_OPERATOR","->",420],["T_STRING","getItemPrice",420],"(",")",";",["T_WHITESPACE","\n        ",420],["T_VARIABLE","$this",421],["T_OBJECT_OPERATOR","->",421],["T_STRING","getItemBasePrice",421],"(",")",";",["T_WHITESPACE","\n        ",421],["T_VARIABLE","$this",422],["T_OBJECT_OPERATOR","->",422],["T_STRING","item",422],["T_OBJECT_OPERATOR","->",422],["T_STRING","setDiscountAmount",422],"(",["T_VARIABLE","$amount",422],")",";",["T_WHITESPACE","\n        ",422],["T_VARIABLE","$this",423],["T_OBJECT_OPERATOR","->",423],["T_STRING","item",423],["T_OBJECT_OPERATOR","->",423],["T_STRING","setBaseDiscountAmount",423],"(",["T_VARIABLE","$baseAmount",423],")",";",["T_WHITESPACE","\n        ",423],["T_VARIABLE","$discountData",424],["T_WHITESPACE"," ",424],"=",["T_WHITESPACE"," ",424],["T_VARIABLE","$this",424],["T_OBJECT_OPERATOR","->",424],["T_STRING","getMock",424],"(",["T_NS_SEPARATOR","\\",424],["T_STRING","Magento",424],["T_NS_SEPARATOR","\\",424],["T_STRING","SalesRule",424],["T_NS_SEPARATOR","\\",424],["T_STRING","Model",424],["T_NS_SEPARATOR","\\",424],["T_STRING","Rule",424],["T_NS_SEPARATOR","\\",424],["T_STRING","Action",424],["T_NS_SEPARATOR","\\",424],["T_STRING","Discount",424],["T_NS_SEPARATOR","\\",424],["T_STRING","Data",424],["T_DOUBLE_COLON","::",424],["T_CLASS","class",424],",",["T_WHITESPACE"," ",424],"[","]",",",["T_WHITESPACE"," ",424],"[","]",",",["T_WHITESPACE"," ",424],["T_CONSTANT_ENCAPSED_STRING","''",424],",",["T_WHITESPACE"," ",424],["T_STRING","false",424],")",";",["T_WHITESPACE","\n        ",424],["T_VARIABLE","$discountData",425],["T_OBJECT_OPERATOR","->",425],["T_STRING","expects",425],"(",["T_VARIABLE","$this",425],["T_OBJECT_OPERATOR","->",425],["T_STRING","atLeastOnce",425],"(",")",")",["T_WHITESPACE","\n            ",425],["T_OBJECT_OPERATOR","->",426],["T_STRING","method",426],"(",["T_CONSTANT_ENCAPSED_STRING","'getAmount'",426],")",["T_WHITESPACE","\n            ",426],["T_OBJECT_OPERATOR","->",427],["T_STRING","will",427],"(",["T_VARIABLE","$this",427],["T_OBJECT_OPERATOR","->",427],["T_STRING","returnValue",427],"(",["T_VARIABLE","$amount",427],")",")",";",["T_WHITESPACE","\n        ",427],["T_VARIABLE","$discountData",428],["T_OBJECT_OPERATOR","->",428],["T_STRING","expects",428],"(",["T_VARIABLE","$this",428],["T_OBJECT_OPERATOR","->",428],["T_STRING","atLeastOnce",428],"(",")",")",["T_WHITESPACE","\n            ",428],["T_OBJECT_OPERATOR","->",429],["T_STRING","method",429],"(",["T_CONSTANT_ENCAPSED_STRING","'getBaseAmount'",429],")",["T_WHITESPACE","\n            ",429],["T_OBJECT_OPERATOR","->",430],["T_STRING","will",430],"(",["T_VARIABLE","$this",430],["T_OBJECT_OPERATOR","->",430],["T_STRING","returnValue",430],"(",["T_VARIABLE","$baseAmount",430],")",")",";",["T_WHITESPACE","\n        ",430],["T_VARIABLE","$discountData",431],["T_OBJECT_OPERATOR","->",431],["T_STRING","expects",431],"(",["T_VARIABLE","$this",431],["T_OBJECT_OPERATOR","->",431],["T_STRING","once",431],"(",")",")",["T_WHITESPACE","\n            ",431],["T_OBJECT_OPERATOR","->",432],["T_STRING","method",432],"(",["T_CONSTANT_ENCAPSED_STRING","'setAmount'",432],")",["T_WHITESPACE","\n            ",432],["T_OBJECT_OPERATOR","->",433],["T_STRING","with",433],"(",["T_VARIABLE","$fixedAmount",433],")",";",["T_WHITESPACE","\n        ",433],["T_VARIABLE","$discountData",434],["T_OBJECT_OPERATOR","->",434],["T_STRING","expects",434],"(",["T_VARIABLE","$this",434],["T_OBJECT_OPERATOR","->",434],["T_STRING","once",434],"(",")",")",["T_WHITESPACE","\n            ",434],["T_OBJECT_OPERATOR","->",435],["T_STRING","method",435],"(",["T_CONSTANT_ENCAPSED_STRING","'setBaseAmount'",435],")",["T_WHITESPACE","\n            ",435],["T_OBJECT_OPERATOR","->",436],["T_STRING","with",436],"(",["T_VARIABLE","$fixedBaseAmount",436],")",";",["T_WHITESPACE","\n\n        ",436],["T_VARIABLE","$this",438],["T_OBJECT_OPERATOR","->",438],["T_STRING","assertNull",438],"(",["T_VARIABLE","$this",438],["T_OBJECT_OPERATOR","->",438],["T_STRING","utility",438],["T_OBJECT_OPERATOR","->",438],["T_STRING","minFix",438],"(",["T_VARIABLE","$discountData",438],",",["T_WHITESPACE"," ",438],["T_VARIABLE","$this",438],["T_OBJECT_OPERATOR","->",438],["T_STRING","item",438],",",["T_WHITESPACE"," ",438],["T_VARIABLE","$qty",438],")",")",";",["T_WHITESPACE","\n    ",438],"}",["T_WHITESPACE","\n\n    ",439],["T_DOC_COMMENT","\/**\n     * @return int\n     *\/",441],["T_WHITESPACE","\n    ",443],["T_PROTECTED","protected",444],["T_WHITESPACE"," ",444],["T_FUNCTION","function",444],["T_WHITESPACE"," ",444],["T_STRING","getItemPrice",444],"(",")",["T_WHITESPACE","\n    ",444],"{",["T_WHITESPACE","\n        ",445],["T_VARIABLE","$price",446],["T_WHITESPACE"," ",446],"=",["T_WHITESPACE"," ",446],["T_LNUMBER","4",446],";",["T_WHITESPACE","\n        ",446],["T_VARIABLE","$calcPrice",447],["T_WHITESPACE"," ",447],"=",["T_WHITESPACE"," ",447],["T_LNUMBER","5",447],";",["T_WHITESPACE","\n\n        ",447],["T_VARIABLE","$this",449],["T_OBJECT_OPERATOR","->",449],["T_STRING","item",449],["T_OBJECT_OPERATOR","->",449],["T_STRING","expects",449],"(",["T_VARIABLE","$this",449],["T_OBJECT_OPERATOR","->",449],["T_STRING","atLeastOnce",449],"(",")",")",["T_WHITESPACE","\n            ",449],["T_OBJECT_OPERATOR","->",450],["T_STRING","method",450],"(",["T_CONSTANT_ENCAPSED_STRING","'getDiscountCalculationPrice'",450],")",["T_WHITESPACE","\n            ",450],["T_OBJECT_OPERATOR","->",451],["T_STRING","will",451],"(",["T_VARIABLE","$this",451],["T_OBJECT_OPERATOR","->",451],["T_STRING","returnValue",451],"(",["T_VARIABLE","$price",451],")",")",";",["T_WHITESPACE","\n        ",451],["T_VARIABLE","$this",452],["T_OBJECT_OPERATOR","->",452],["T_STRING","item",452],["T_OBJECT_OPERATOR","->",452],["T_STRING","expects",452],"(",["T_VARIABLE","$this",452],["T_OBJECT_OPERATOR","->",452],["T_STRING","once",452],"(",")",")",["T_WHITESPACE","\n            ",452],["T_OBJECT_OPERATOR","->",453],["T_STRING","method",453],"(",["T_CONSTANT_ENCAPSED_STRING","'getCalculationPrice'",453],")",["T_WHITESPACE","\n            ",453],["T_OBJECT_OPERATOR","->",454],["T_STRING","will",454],"(",["T_VARIABLE","$this",454],["T_OBJECT_OPERATOR","->",454],["T_STRING","returnValue",454],"(",["T_VARIABLE","$calcPrice",454],")",")",";",["T_WHITESPACE","\n        ",454],["T_RETURN","return",455],["T_WHITESPACE"," ",455],["T_VARIABLE","$price",455],";",["T_WHITESPACE","\n    ",455],"}",["T_WHITESPACE","\n\n    ",456],["T_DOC_COMMENT","\/**\n     * @return int\n     *\/",458],["T_WHITESPACE","\n    ",460],["T_PROTECTED","protected",461],["T_WHITESPACE"," ",461],["T_FUNCTION","function",461],["T_WHITESPACE"," ",461],["T_STRING","getItemBasePrice",461],"(",")",["T_WHITESPACE","\n    ",461],"{",["T_WHITESPACE","\n        ",462],["T_VARIABLE","$price",463],["T_WHITESPACE"," ",463],"=",["T_WHITESPACE"," ",463],["T_LNUMBER","4",463],";",["T_WHITESPACE","\n        ",463],["T_VARIABLE","$calcPrice",464],["T_WHITESPACE"," ",464],"=",["T_WHITESPACE"," ",464],["T_LNUMBER","5",464],";",["T_WHITESPACE","\n        ",464],["T_VARIABLE","$this",465],["T_OBJECT_OPERATOR","->",465],["T_STRING","item",465],["T_OBJECT_OPERATOR","->",465],["T_STRING","expects",465],"(",["T_VARIABLE","$this",465],["T_OBJECT_OPERATOR","->",465],["T_STRING","atLeastOnce",465],"(",")",")",["T_WHITESPACE","\n            ",465],["T_OBJECT_OPERATOR","->",466],["T_STRING","method",466],"(",["T_CONSTANT_ENCAPSED_STRING","'getDiscountCalculationPrice'",466],")",["T_WHITESPACE","\n            ",466],["T_OBJECT_OPERATOR","->",467],["T_STRING","will",467],"(",["T_VARIABLE","$this",467],["T_OBJECT_OPERATOR","->",467],["T_STRING","returnValue",467],"(",["T_VARIABLE","$calcPrice",467],")",")",";",["T_WHITESPACE","\n        ",467],["T_VARIABLE","$this",468],["T_OBJECT_OPERATOR","->",468],["T_STRING","item",468],["T_OBJECT_OPERATOR","->",468],["T_STRING","expects",468],"(",["T_VARIABLE","$this",468],["T_OBJECT_OPERATOR","->",468],["T_STRING","any",468],"(",")",")",["T_WHITESPACE","\n            ",468],["T_OBJECT_OPERATOR","->",469],["T_STRING","method",469],"(",["T_CONSTANT_ENCAPSED_STRING","'getBaseDiscountCalculationPrice'",469],")",["T_WHITESPACE","\n            ",469],["T_OBJECT_OPERATOR","->",470],["T_STRING","will",470],"(",["T_VARIABLE","$this",470],["T_OBJECT_OPERATOR","->",470],["T_STRING","returnValue",470],"(",["T_VARIABLE","$price",470],")",")",";",["T_WHITESPACE","\n        ",470],["T_RETURN","return",471],["T_WHITESPACE"," ",471],["T_VARIABLE","$price",471],";",["T_WHITESPACE","\n    ",471],"}",["T_WHITESPACE","\n\n    ",472],["T_PUBLIC","public",474],["T_WHITESPACE"," ",474],["T_FUNCTION","function",474],["T_WHITESPACE"," ",474],["T_STRING","testDeltaRoundignFix",474],"(",")",["T_WHITESPACE","\n    ",474],"{",["T_WHITESPACE","\n        ",475],["T_VARIABLE","$discountAmount",476],["T_WHITESPACE"," ",476],"=",["T_WHITESPACE"," ",476],["T_DNUMBER","10.003",476],";",["T_WHITESPACE","\n        ",476],["T_VARIABLE","$baseDiscountAmount",477],["T_WHITESPACE"," ",477],"=",["T_WHITESPACE"," ",477],["T_DNUMBER","12.465",477],";",["T_WHITESPACE","\n        ",477],["T_VARIABLE","$percent",478],["T_WHITESPACE"," ",478],"=",["T_WHITESPACE"," ",478],["T_LNUMBER","15",478],";",["T_WHITESPACE","\n        ",478],["T_VARIABLE","$roundedDiscount",479],["T_WHITESPACE"," ",479],"=",["T_WHITESPACE"," ",479],["T_STRING","round",479],"(",["T_VARIABLE","$discountAmount",479],",",["T_WHITESPACE"," ",479],["T_LNUMBER","2",479],")",";",["T_WHITESPACE","\n        ",479],["T_VARIABLE","$roundedBaseDiscount",480],["T_WHITESPACE"," ",480],"=",["T_WHITESPACE"," ",480],["T_STRING","round",480],"(",["T_VARIABLE","$baseDiscountAmount",480],",",["T_WHITESPACE"," ",480],["T_LNUMBER","2",480],")",";",["T_WHITESPACE","\n        ",480],["T_VARIABLE","$delta",481],["T_WHITESPACE"," ",481],"=",["T_WHITESPACE"," ",481],["T_VARIABLE","$discountAmount",481],["T_WHITESPACE"," ",481],"-",["T_WHITESPACE"," ",481],["T_VARIABLE","$roundedDiscount",481],";",["T_WHITESPACE","\n        ",481],["T_VARIABLE","$baseDelta",482],["T_WHITESPACE"," ",482],"=",["T_WHITESPACE"," ",482],["T_VARIABLE","$baseDiscountAmount",482],["T_WHITESPACE"," ",482],"-",["T_WHITESPACE"," ",482],["T_VARIABLE","$roundedBaseDiscount",482],";",["T_WHITESPACE","\n        ",482],["T_VARIABLE","$secondRoundedDiscount",483],["T_WHITESPACE"," ",483],"=",["T_WHITESPACE"," ",483],["T_STRING","round",483],"(",["T_VARIABLE","$discountAmount",483],["T_WHITESPACE"," ",483],"+",["T_WHITESPACE"," ",483],["T_VARIABLE","$delta",483],")",";",["T_WHITESPACE","\n        ",483],["T_VARIABLE","$secondRoundedBaseDiscount",484],["T_WHITESPACE"," ",484],"=",["T_WHITESPACE"," ",484],["T_STRING","round",484],"(",["T_VARIABLE","$baseDiscountAmount",484],["T_WHITESPACE"," ",484],"+",["T_WHITESPACE"," ",484],["T_VARIABLE","$baseDelta",484],")",";",["T_WHITESPACE","\n\n        ",484],["T_VARIABLE","$this",486],["T_OBJECT_OPERATOR","->",486],["T_STRING","item",486],["T_OBJECT_OPERATOR","->",486],["T_STRING","expects",486],"(",["T_VARIABLE","$this",486],["T_OBJECT_OPERATOR","->",486],["T_STRING","any",486],"(",")",")",["T_WHITESPACE","\n            ",486],["T_OBJECT_OPERATOR","->",487],["T_STRING","method",487],"(",["T_CONSTANT_ENCAPSED_STRING","'getQuote'",487],")",["T_WHITESPACE","\n            ",487],["T_OBJECT_OPERATOR","->",488],["T_STRING","will",488],"(",["T_VARIABLE","$this",488],["T_OBJECT_OPERATOR","->",488],["T_STRING","returnValue",488],"(",["T_VARIABLE","$this",488],["T_OBJECT_OPERATOR","->",488],["T_STRING","quote",488],")",")",";",["T_WHITESPACE","\n\n        ",488],["T_VARIABLE","$store",490],["T_WHITESPACE"," ",490],"=",["T_WHITESPACE"," ",490],["T_VARIABLE","$this",490],["T_OBJECT_OPERATOR","->",490],["T_STRING","getMock",490],"(",["T_NS_SEPARATOR","\\",490],["T_STRING","Magento",490],["T_NS_SEPARATOR","\\",490],["T_STRING","Store",490],["T_NS_SEPARATOR","\\",490],["T_STRING","Model",490],["T_NS_SEPARATOR","\\",490],["T_STRING","Store",490],["T_DOUBLE_COLON","::",490],["T_CLASS","class",490],",",["T_WHITESPACE"," ",490],"[","]",",",["T_WHITESPACE"," ",490],"[","]",",",["T_WHITESPACE"," ",490],["T_CONSTANT_ENCAPSED_STRING","''",490],",",["T_WHITESPACE"," ",490],["T_STRING","false",490],")",";",["T_WHITESPACE","\n        ",490],["T_VARIABLE","$this",491],["T_OBJECT_OPERATOR","->",491],["T_STRING","priceCurrency",491],["T_OBJECT_OPERATOR","->",491],["T_STRING","expects",491],"(",["T_VARIABLE","$this",491],["T_OBJECT_OPERATOR","->",491],["T_STRING","any",491],"(",")",")",["T_WHITESPACE","\n            ",491],["T_OBJECT_OPERATOR","->",492],["T_STRING","method",492],"(",["T_CONSTANT_ENCAPSED_STRING","'round'",492],")",["T_WHITESPACE","\n            ",492],["T_OBJECT_OPERATOR","->",493],["T_STRING","will",493],"(",["T_VARIABLE","$this",493],["T_OBJECT_OPERATOR","->",493],["T_STRING","returnValueMap",493],"(","[",["T_WHITESPACE","\n                        ",493],"[",["T_VARIABLE","$discountAmount",494],",",["T_WHITESPACE"," ",494],["T_VARIABLE","$roundedDiscount",494],"]",",",["T_WHITESPACE","\n                        ",494],"[",["T_VARIABLE","$baseDiscountAmount",495],",",["T_WHITESPACE"," ",495],["T_VARIABLE","$roundedBaseDiscount",495],"]",",",["T_WHITESPACE","\n                        ",495],"[",["T_VARIABLE","$discountAmount",496],["T_WHITESPACE"," ",496],"+",["T_WHITESPACE"," ",496],["T_VARIABLE","$delta",496],",",["T_WHITESPACE"," ",496],["T_VARIABLE","$secondRoundedDiscount",496],"]",",",["T_WHITESPACE"," ",496],["T_COMMENT","\/\/?\n",496],["T_WHITESPACE","                        ",497],"[",["T_VARIABLE","$baseDiscountAmount",497],["T_WHITESPACE"," ",497],"+",["T_WHITESPACE"," ",497],["T_VARIABLE","$baseDelta",497],",",["T_WHITESPACE"," ",497],["T_VARIABLE","$secondRoundedBaseDiscount",497],"]",",",["T_WHITESPACE"," ",497],["T_COMMENT","\/\/?\n",497],["T_WHITESPACE","                    ",498],"]",")",")",";",["T_WHITESPACE","\n\n        ",498],["T_VARIABLE","$this",500],["T_OBJECT_OPERATOR","->",500],["T_STRING","quote",500],["T_OBJECT_OPERATOR","->",500],["T_STRING","expects",500],"(",["T_VARIABLE","$this",500],["T_OBJECT_OPERATOR","->",500],["T_STRING","any",500],"(",")",")",["T_WHITESPACE","\n            ",500],["T_OBJECT_OPERATOR","->",501],["T_STRING","method",501],"(",["T_CONSTANT_ENCAPSED_STRING","'getStore'",501],")",["T_WHITESPACE","\n            ",501],["T_OBJECT_OPERATOR","->",502],["T_STRING","will",502],"(",["T_VARIABLE","$this",502],["T_OBJECT_OPERATOR","->",502],["T_STRING","returnValue",502],"(",["T_VARIABLE","$store",502],")",")",";",["T_WHITESPACE","\n\n        ",502],["T_VARIABLE","$this",504],["T_OBJECT_OPERATOR","->",504],["T_STRING","item",504],["T_OBJECT_OPERATOR","->",504],["T_STRING","setDiscountPercent",504],"(",["T_VARIABLE","$percent",504],")",";",["T_WHITESPACE","\n\n        ",504],["T_VARIABLE","$discountData",506],["T_WHITESPACE"," ",506],"=",["T_WHITESPACE"," ",506],["T_VARIABLE","$this",506],["T_OBJECT_OPERATOR","->",506],["T_STRING","getMock",506],"(",["T_NS_SEPARATOR","\\",506],["T_STRING","Magento",506],["T_NS_SEPARATOR","\\",506],["T_STRING","SalesRule",506],["T_NS_SEPARATOR","\\",506],["T_STRING","Model",506],["T_NS_SEPARATOR","\\",506],["T_STRING","Rule",506],["T_NS_SEPARATOR","\\",506],["T_STRING","Action",506],["T_NS_SEPARATOR","\\",506],["T_STRING","Discount",506],["T_NS_SEPARATOR","\\",506],["T_STRING","Data",506],["T_DOUBLE_COLON","::",506],["T_CLASS","class",506],",",["T_WHITESPACE"," ",506],"[","]",",",["T_WHITESPACE"," ",506],"[","]",",",["T_WHITESPACE"," ",506],["T_CONSTANT_ENCAPSED_STRING","''",506],",",["T_WHITESPACE"," ",506],["T_STRING","false",506],")",";",["T_WHITESPACE","\n        ",506],["T_VARIABLE","$discountData",507],["T_OBJECT_OPERATOR","->",507],["T_STRING","expects",507],"(",["T_VARIABLE","$this",507],["T_OBJECT_OPERATOR","->",507],["T_STRING","at",507],"(",["T_LNUMBER","0",507],")",")",["T_WHITESPACE","\n            ",507],["T_OBJECT_OPERATOR","->",508],["T_STRING","method",508],"(",["T_CONSTANT_ENCAPSED_STRING","'getAmount'",508],")",["T_WHITESPACE","\n            ",508],["T_OBJECT_OPERATOR","->",509],["T_STRING","will",509],"(",["T_VARIABLE","$this",509],["T_OBJECT_OPERATOR","->",509],["T_STRING","returnValue",509],"(",["T_VARIABLE","$discountAmount",509],")",")",";",["T_WHITESPACE","\n        ",509],["T_VARIABLE","$discountData",510],["T_OBJECT_OPERATOR","->",510],["T_STRING","expects",510],"(",["T_VARIABLE","$this",510],["T_OBJECT_OPERATOR","->",510],["T_STRING","at",510],"(",["T_LNUMBER","1",510],")",")",["T_WHITESPACE","\n            ",510],["T_OBJECT_OPERATOR","->",511],["T_STRING","method",511],"(",["T_CONSTANT_ENCAPSED_STRING","'getBaseAmount'",511],")",["T_WHITESPACE","\n            ",511],["T_OBJECT_OPERATOR","->",512],["T_STRING","will",512],"(",["T_VARIABLE","$this",512],["T_OBJECT_OPERATOR","->",512],["T_STRING","returnValue",512],"(",["T_VARIABLE","$baseDiscountAmount",512],")",")",";",["T_WHITESPACE","\n\n        ",512],["T_VARIABLE","$discountData",514],["T_OBJECT_OPERATOR","->",514],["T_STRING","expects",514],"(",["T_VARIABLE","$this",514],["T_OBJECT_OPERATOR","->",514],["T_STRING","at",514],"(",["T_LNUMBER","2",514],")",")",["T_WHITESPACE","\n            ",514],["T_OBJECT_OPERATOR","->",515],["T_STRING","method",515],"(",["T_CONSTANT_ENCAPSED_STRING","'setAmount'",515],")",["T_WHITESPACE","\n            ",515],["T_OBJECT_OPERATOR","->",516],["T_STRING","with",516],"(",["T_VARIABLE","$roundedDiscount",516],")",";",["T_WHITESPACE","\n        ",516],["T_VARIABLE","$discountData",517],["T_OBJECT_OPERATOR","->",517],["T_STRING","expects",517],"(",["T_VARIABLE","$this",517],["T_OBJECT_OPERATOR","->",517],["T_STRING","at",517],"(",["T_LNUMBER","3",517],")",")",["T_WHITESPACE","\n            ",517],["T_OBJECT_OPERATOR","->",518],["T_STRING","method",518],"(",["T_CONSTANT_ENCAPSED_STRING","'setBaseAmount'",518],")",["T_WHITESPACE","\n            ",518],["T_OBJECT_OPERATOR","->",519],["T_STRING","with",519],"(",["T_VARIABLE","$roundedBaseDiscount",519],")",";",["T_WHITESPACE","\n\n        ",519],["T_VARIABLE","$discountData",521],["T_OBJECT_OPERATOR","->",521],["T_STRING","expects",521],"(",["T_VARIABLE","$this",521],["T_OBJECT_OPERATOR","->",521],["T_STRING","at",521],"(",["T_LNUMBER","4",521],")",")",["T_WHITESPACE","\n            ",521],["T_OBJECT_OPERATOR","->",522],["T_STRING","method",522],"(",["T_CONSTANT_ENCAPSED_STRING","'getAmount'",522],")",["T_WHITESPACE","\n            ",522],["T_OBJECT_OPERATOR","->",523],["T_STRING","will",523],"(",["T_VARIABLE","$this",523],["T_OBJECT_OPERATOR","->",523],["T_STRING","returnValue",523],"(",["T_VARIABLE","$discountAmount",523],")",")",";",["T_WHITESPACE","\n        ",523],["T_VARIABLE","$discountData",524],["T_OBJECT_OPERATOR","->",524],["T_STRING","expects",524],"(",["T_VARIABLE","$this",524],["T_OBJECT_OPERATOR","->",524],["T_STRING","at",524],"(",["T_LNUMBER","5",524],")",")",["T_WHITESPACE","\n            ",524],["T_OBJECT_OPERATOR","->",525],["T_STRING","method",525],"(",["T_CONSTANT_ENCAPSED_STRING","'getBaseAmount'",525],")",["T_WHITESPACE","\n            ",525],["T_OBJECT_OPERATOR","->",526],["T_STRING","will",526],"(",["T_VARIABLE","$this",526],["T_OBJECT_OPERATOR","->",526],["T_STRING","returnValue",526],"(",["T_VARIABLE","$baseDiscountAmount",526],")",")",";",["T_WHITESPACE","\n\n        ",526],["T_VARIABLE","$discountData",528],["T_OBJECT_OPERATOR","->",528],["T_STRING","expects",528],"(",["T_VARIABLE","$this",528],["T_OBJECT_OPERATOR","->",528],["T_STRING","at",528],"(",["T_LNUMBER","6",528],")",")",["T_WHITESPACE","\n            ",528],["T_OBJECT_OPERATOR","->",529],["T_STRING","method",529],"(",["T_CONSTANT_ENCAPSED_STRING","'setAmount'",529],")",["T_WHITESPACE","\n            ",529],["T_OBJECT_OPERATOR","->",530],["T_STRING","with",530],"(",["T_VARIABLE","$secondRoundedDiscount",530],")",";",["T_WHITESPACE","\n        ",530],["T_VARIABLE","$discountData",531],["T_OBJECT_OPERATOR","->",531],["T_STRING","expects",531],"(",["T_VARIABLE","$this",531],["T_OBJECT_OPERATOR","->",531],["T_STRING","at",531],"(",["T_LNUMBER","7",531],")",")",["T_WHITESPACE","\n            ",531],["T_OBJECT_OPERATOR","->",532],["T_STRING","method",532],"(",["T_CONSTANT_ENCAPSED_STRING","'setBaseAmount'",532],")",["T_WHITESPACE","\n            ",532],["T_OBJECT_OPERATOR","->",533],["T_STRING","with",533],"(",["T_VARIABLE","$secondRoundedBaseDiscount",533],")",";",["T_WHITESPACE","\n\n        ",533],["T_VARIABLE","$this",535],["T_OBJECT_OPERATOR","->",535],["T_STRING","assertEquals",535],"(",["T_VARIABLE","$this",535],["T_OBJECT_OPERATOR","->",535],["T_STRING","utility",535],",",["T_WHITESPACE"," ",535],["T_VARIABLE","$this",535],["T_OBJECT_OPERATOR","->",535],["T_STRING","utility",535],["T_OBJECT_OPERATOR","->",535],["T_STRING","deltaRoundingFix",535],"(",["T_VARIABLE","$discountData",535],",",["T_WHITESPACE"," ",535],["T_VARIABLE","$this",535],["T_OBJECT_OPERATOR","->",535],["T_STRING","item",535],")",")",";",["T_WHITESPACE","\n        ",535],["T_VARIABLE","$this",536],["T_OBJECT_OPERATOR","->",536],["T_STRING","assertEquals",536],"(",["T_VARIABLE","$this",536],["T_OBJECT_OPERATOR","->",536],["T_STRING","utility",536],",",["T_WHITESPACE"," ",536],["T_VARIABLE","$this",536],["T_OBJECT_OPERATOR","->",536],["T_STRING","utility",536],["T_OBJECT_OPERATOR","->",536],["T_STRING","deltaRoundingFix",536],"(",["T_VARIABLE","$discountData",536],",",["T_WHITESPACE"," ",536],["T_VARIABLE","$this",536],["T_OBJECT_OPERATOR","->",536],["T_STRING","item",536],")",")",";",["T_WHITESPACE","\n    ",536],"}",["T_WHITESPACE","\n\n    ",537],["T_PUBLIC","public",539],["T_WHITESPACE"," ",539],["T_FUNCTION","function",539],["T_WHITESPACE"," ",539],["T_STRING","testResetRoundingDeltas",539],"(",")",["T_WHITESPACE","\n    ",539],"{",["T_WHITESPACE","\n        ",540],["T_VARIABLE","$this",541],["T_OBJECT_OPERATOR","->",541],["T_STRING","assertNull",541],"(",["T_VARIABLE","$this",541],["T_OBJECT_OPERATOR","->",541],["T_STRING","utility",541],["T_OBJECT_OPERATOR","->",541],["T_STRING","resetRoundingDeltas",541],"(",")",")",";",["T_WHITESPACE","\n    ",541],"}",["T_WHITESPACE","\n",542],"}",["T_WHITESPACE","\n",543]]
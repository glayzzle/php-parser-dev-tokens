[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Copyright \u00c2\u00a9 2013-2017 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n *\/",2],["T_WHITESPACE","\n",5],["T_NAMESPACE","namespace",6],["T_WHITESPACE"," ",6],["T_STRING","Magento",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Cms",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Model",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Wysiwyg",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Images",6],";",["T_WHITESPACE","\n\n",6],["T_USE","use",8],["T_WHITESPACE"," ",8],["T_STRING","Magento",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Cms",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Helper",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Wysiwyg",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Images",8],";",["T_WHITESPACE","\n",8],["T_USE","use",9],["T_WHITESPACE"," ",9],["T_STRING","Magento",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Framework",9],["T_NS_SEPARATOR","\\",9],["T_STRING","App",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Filesystem",9],["T_NS_SEPARATOR","\\",9],["T_STRING","DirectoryList",9],";",["T_WHITESPACE","\n\n",9],["T_DOC_COMMENT","\/**\n * Wysiwyg Images model\n *\n * @SuppressWarnings(PHPMD.LongVariable)\n * @SuppressWarnings(PHPMD.TooManyFields)\n * @SuppressWarnings(PHPMD.CouplingBetweenObjects)\n *\/",11],["T_WHITESPACE","\n",17],["T_CLASS","class",18],["T_WHITESPACE"," ",18],["T_STRING","Storage",18],["T_WHITESPACE"," ",18],["T_EXTENDS","extends",18],["T_WHITESPACE"," ",18],["T_NS_SEPARATOR","\\",18],["T_STRING","Magento",18],["T_NS_SEPARATOR","\\",18],["T_STRING","Framework",18],["T_NS_SEPARATOR","\\",18],["T_STRING","DataObject",18],["T_WHITESPACE","\n",18],"{",["T_WHITESPACE","\n    ",19],["T_CONST","const",20],["T_WHITESPACE"," ",20],["T_STRING","DIRECTORY_NAME_REGEXP",20],["T_WHITESPACE"," ",20],"=",["T_WHITESPACE"," ",20],["T_CONSTANT_ENCAPSED_STRING","'\/^[a-z0-9\\-\\_]+$\/si'",20],";",["T_WHITESPACE","\n\n    ",20],["T_CONST","const",22],["T_WHITESPACE"," ",22],["T_STRING","THUMBS_DIRECTORY_NAME",22],["T_WHITESPACE"," ",22],"=",["T_WHITESPACE"," ",22],["T_CONSTANT_ENCAPSED_STRING","'.thumbs'",22],";",["T_WHITESPACE","\n\n    ",22],["T_CONST","const",24],["T_WHITESPACE"," ",24],["T_STRING","THUMB_PLACEHOLDER_PATH_SUFFIX",24],["T_WHITESPACE"," ",24],"=",["T_WHITESPACE"," ",24],["T_CONSTANT_ENCAPSED_STRING","'Magento_Cms::images\/placeholder_thumbnail.jpg'",24],";",["T_WHITESPACE","\n\n    ",24],["T_DOC_COMMENT","\/**\n     * Config object\n     *\n     * @var \\Magento\\Framework\\App\\Config\\Element\n     *\/",26],["T_WHITESPACE","\n    ",30],["T_PROTECTED","protected",31],["T_WHITESPACE"," ",31],["T_VARIABLE","$_config",31],";",["T_WHITESPACE","\n\n    ",31],["T_DOC_COMMENT","\/**\n     * Config object as array\n     *\n     * @var array\n     *\/",33],["T_WHITESPACE","\n    ",37],["T_PROTECTED","protected",38],["T_WHITESPACE"," ",38],["T_VARIABLE","$_configAsArray",38],";",["T_WHITESPACE","\n\n    ",38],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Framework\\Filesystem\\Directory\\Write\n     *\/",40],["T_WHITESPACE","\n    ",42],["T_PROTECTED","protected",43],["T_WHITESPACE"," ",43],["T_VARIABLE","$_directory",43],";",["T_WHITESPACE","\n\n    ",43],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Framework\\Image\\AdapterFactory\n     *\/",45],["T_WHITESPACE","\n    ",47],["T_PROTECTED","protected",48],["T_WHITESPACE"," ",48],["T_VARIABLE","$_imageFactory",48],";",["T_WHITESPACE","\n\n    ",48],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Framework\\View\\Asset\\Repository\n     *\/",50],["T_WHITESPACE","\n    ",52],["T_PROTECTED","protected",53],["T_WHITESPACE"," ",53],["T_VARIABLE","$_assetRepo",53],";",["T_WHITESPACE","\n\n    ",53],["T_DOC_COMMENT","\/**\n     * Core file storage database\n     *\n     * @var \\Magento\\MediaStorage\\Helper\\File\\Storage\\Database\n     *\/",55],["T_WHITESPACE","\n    ",59],["T_PROTECTED","protected",60],["T_WHITESPACE"," ",60],["T_VARIABLE","$_coreFileStorageDb",60],["T_WHITESPACE"," ",60],"=",["T_WHITESPACE"," ",60],["T_STRING","null",60],";",["T_WHITESPACE","\n\n    ",60],["T_DOC_COMMENT","\/**\n     * Cms wysiwyg images\n     *\n     * @var \\Magento\\Cms\\Helper\\Wysiwyg\\Images\n     *\/",62],["T_WHITESPACE","\n    ",66],["T_PROTECTED","protected",67],["T_WHITESPACE"," ",67],["T_VARIABLE","$_cmsWysiwygImages",67],["T_WHITESPACE"," ",67],"=",["T_WHITESPACE"," ",67],["T_STRING","null",67],";",["T_WHITESPACE","\n\n    ",67],["T_DOC_COMMENT","\/**\n     * @var array\n     *\/",69],["T_WHITESPACE","\n    ",71],["T_PROTECTED","protected",72],["T_WHITESPACE"," ",72],["T_VARIABLE","$_resizeParameters",72],";",["T_WHITESPACE","\n\n    ",72],["T_DOC_COMMENT","\/**\n     * @var array\n     *\/",74],["T_WHITESPACE","\n    ",76],["T_PROTECTED","protected",77],["T_WHITESPACE"," ",77],["T_VARIABLE","$_extensions",77],";",["T_WHITESPACE","\n\n    ",77],["T_DOC_COMMENT","\/**\n     * @var array\n     *\/",79],["T_WHITESPACE","\n    ",81],["T_PROTECTED","protected",82],["T_WHITESPACE"," ",82],["T_VARIABLE","$_dirs",82],";",["T_WHITESPACE","\n\n    ",82],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Backend\\Model\\UrlInterface\n     *\/",84],["T_WHITESPACE","\n    ",86],["T_PROTECTED","protected",87],["T_WHITESPACE"," ",87],["T_VARIABLE","$_backendUrl",87],";",["T_WHITESPACE","\n\n    ",87],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Backend\\Model\\Session\n     *\/",89],["T_WHITESPACE","\n    ",91],["T_PROTECTED","protected",92],["T_WHITESPACE"," ",92],["T_VARIABLE","$_session",92],";",["T_WHITESPACE","\n\n    ",92],["T_DOC_COMMENT","\/**\n     * Directory database factory\n     *\n     * @var \\Magento\\MediaStorage\\Model\\File\\Storage\\Directory\\DatabaseFactory\n     *\/",94],["T_WHITESPACE","\n    ",98],["T_PROTECTED","protected",99],["T_WHITESPACE"," ",99],["T_VARIABLE","$_directoryDatabaseFactory",99],";",["T_WHITESPACE","\n\n    ",99],["T_DOC_COMMENT","\/**\n     * Storage database factory\n     *\n     * @var \\Magento\\MediaStorage\\Model\\File\\Storage\\DatabaseFactory\n     *\/",101],["T_WHITESPACE","\n    ",105],["T_PROTECTED","protected",106],["T_WHITESPACE"," ",106],["T_VARIABLE","$_storageDatabaseFactory",106],";",["T_WHITESPACE","\n\n    ",106],["T_DOC_COMMENT","\/**\n     * Storage file factory\n     *\n     * @var \\Magento\\MediaStorage\\Model\\File\\Storage\\FileFactory\n     *\/",108],["T_WHITESPACE","\n    ",112],["T_PROTECTED","protected",113],["T_WHITESPACE"," ",113],["T_VARIABLE","$_storageFileFactory",113],";",["T_WHITESPACE","\n\n    ",113],["T_DOC_COMMENT","\/**\n     * Storage collection factory\n     *\n     * @var \\Magento\\Cms\\Model\\Wysiwyg\\Images\\Storage\\CollectionFactory\n     *\/",115],["T_WHITESPACE","\n    ",119],["T_PROTECTED","protected",120],["T_WHITESPACE"," ",120],["T_VARIABLE","$_storageCollectionFactory",120],";",["T_WHITESPACE","\n\n    ",120],["T_DOC_COMMENT","\/**\n     * Uploader factory\n     *\n     * @var \\Magento\\MediaStorage\\Model\\File\\UploaderFactory\n     *\/",122],["T_WHITESPACE","\n    ",126],["T_PROTECTED","protected",127],["T_WHITESPACE"," ",127],["T_VARIABLE","$_uploaderFactory",127],";",["T_WHITESPACE","\n\n    ",127],["T_DOC_COMMENT","\/**\n     * Construct\n     *\n     * @param \\Magento\\Backend\\Model\\Session $session\n     * @param \\Magento\\Backend\\Model\\UrlInterface $backendUrl\n     * @param \\Magento\\Cms\\Helper\\Wysiwyg\\Images $cmsWysiwygImages\n     * @param \\Magento\\MediaStorage\\Helper\\File\\Storage\\Database $coreFileStorageDb\n     * @param \\Magento\\Framework\\Filesystem $filesystem\n     * @param \\Magento\\Framework\\Image\\AdapterFactory $imageFactory\n     * @param \\Magento\\Framework\\View\\Asset\\Repository $assetRepo\n     * @param \\Magento\\Cms\\Model\\Wysiwyg\\Images\\Storage\\CollectionFactory $storageCollectionFactory\n     * @param \\Magento\\MediaStorage\\Model\\File\\Storage\\FileFactory $storageFileFactory\n     * @param \\Magento\\MediaStorage\\Model\\File\\Storage\\DatabaseFactory $storageDatabaseFactory\n     * @param \\Magento\\MediaStorage\\Model\\File\\Storage\\Directory\\DatabaseFactory $directoryDatabaseFactory\n     * @param \\Magento\\MediaStorage\\Model\\File\\UploaderFactory $uploaderFactory\n     * @param array $resizeParameters\n     * @param array $extensions\n     * @param array $dirs\n     * @param array $data\n     *\n     * @SuppressWarnings(PHPMD.ExcessiveParameterList)\n     *\/",129],["T_WHITESPACE","\n    ",150],["T_PUBLIC","public",151],["T_WHITESPACE"," ",151],["T_FUNCTION","function",151],["T_WHITESPACE"," ",151],["T_STRING","__construct",151],"(",["T_WHITESPACE","\n        ",151],["T_NS_SEPARATOR","\\",152],["T_STRING","Magento",152],["T_NS_SEPARATOR","\\",152],["T_STRING","Backend",152],["T_NS_SEPARATOR","\\",152],["T_STRING","Model",152],["T_NS_SEPARATOR","\\",152],["T_STRING","Session",152],["T_WHITESPACE"," ",152],["T_VARIABLE","$session",152],",",["T_WHITESPACE","\n        ",152],["T_NS_SEPARATOR","\\",153],["T_STRING","Magento",153],["T_NS_SEPARATOR","\\",153],["T_STRING","Backend",153],["T_NS_SEPARATOR","\\",153],["T_STRING","Model",153],["T_NS_SEPARATOR","\\",153],["T_STRING","UrlInterface",153],["T_WHITESPACE"," ",153],["T_VARIABLE","$backendUrl",153],",",["T_WHITESPACE","\n        ",153],["T_NS_SEPARATOR","\\",154],["T_STRING","Magento",154],["T_NS_SEPARATOR","\\",154],["T_STRING","Cms",154],["T_NS_SEPARATOR","\\",154],["T_STRING","Helper",154],["T_NS_SEPARATOR","\\",154],["T_STRING","Wysiwyg",154],["T_NS_SEPARATOR","\\",154],["T_STRING","Images",154],["T_WHITESPACE"," ",154],["T_VARIABLE","$cmsWysiwygImages",154],",",["T_WHITESPACE","\n        ",154],["T_NS_SEPARATOR","\\",155],["T_STRING","Magento",155],["T_NS_SEPARATOR","\\",155],["T_STRING","MediaStorage",155],["T_NS_SEPARATOR","\\",155],["T_STRING","Helper",155],["T_NS_SEPARATOR","\\",155],["T_STRING","File",155],["T_NS_SEPARATOR","\\",155],["T_STRING","Storage",155],["T_NS_SEPARATOR","\\",155],["T_STRING","Database",155],["T_WHITESPACE"," ",155],["T_VARIABLE","$coreFileStorageDb",155],",",["T_WHITESPACE","\n        ",155],["T_NS_SEPARATOR","\\",156],["T_STRING","Magento",156],["T_NS_SEPARATOR","\\",156],["T_STRING","Framework",156],["T_NS_SEPARATOR","\\",156],["T_STRING","Filesystem",156],["T_WHITESPACE"," ",156],["T_VARIABLE","$filesystem",156],",",["T_WHITESPACE","\n        ",156],["T_NS_SEPARATOR","\\",157],["T_STRING","Magento",157],["T_NS_SEPARATOR","\\",157],["T_STRING","Framework",157],["T_NS_SEPARATOR","\\",157],["T_STRING","Image",157],["T_NS_SEPARATOR","\\",157],["T_STRING","AdapterFactory",157],["T_WHITESPACE"," ",157],["T_VARIABLE","$imageFactory",157],",",["T_WHITESPACE","\n        ",157],["T_NS_SEPARATOR","\\",158],["T_STRING","Magento",158],["T_NS_SEPARATOR","\\",158],["T_STRING","Framework",158],["T_NS_SEPARATOR","\\",158],["T_STRING","View",158],["T_NS_SEPARATOR","\\",158],["T_STRING","Asset",158],["T_NS_SEPARATOR","\\",158],["T_STRING","Repository",158],["T_WHITESPACE"," ",158],["T_VARIABLE","$assetRepo",158],",",["T_WHITESPACE","\n        ",158],["T_NS_SEPARATOR","\\",159],["T_STRING","Magento",159],["T_NS_SEPARATOR","\\",159],["T_STRING","Cms",159],["T_NS_SEPARATOR","\\",159],["T_STRING","Model",159],["T_NS_SEPARATOR","\\",159],["T_STRING","Wysiwyg",159],["T_NS_SEPARATOR","\\",159],["T_STRING","Images",159],["T_NS_SEPARATOR","\\",159],["T_STRING","Storage",159],["T_NS_SEPARATOR","\\",159],["T_STRING","CollectionFactory",159],["T_WHITESPACE"," ",159],["T_VARIABLE","$storageCollectionFactory",159],",",["T_WHITESPACE","\n        ",159],["T_NS_SEPARATOR","\\",160],["T_STRING","Magento",160],["T_NS_SEPARATOR","\\",160],["T_STRING","MediaStorage",160],["T_NS_SEPARATOR","\\",160],["T_STRING","Model",160],["T_NS_SEPARATOR","\\",160],["T_STRING","File",160],["T_NS_SEPARATOR","\\",160],["T_STRING","Storage",160],["T_NS_SEPARATOR","\\",160],["T_STRING","FileFactory",160],["T_WHITESPACE"," ",160],["T_VARIABLE","$storageFileFactory",160],",",["T_WHITESPACE","\n        ",160],["T_NS_SEPARATOR","\\",161],["T_STRING","Magento",161],["T_NS_SEPARATOR","\\",161],["T_STRING","MediaStorage",161],["T_NS_SEPARATOR","\\",161],["T_STRING","Model",161],["T_NS_SEPARATOR","\\",161],["T_STRING","File",161],["T_NS_SEPARATOR","\\",161],["T_STRING","Storage",161],["T_NS_SEPARATOR","\\",161],["T_STRING","DatabaseFactory",161],["T_WHITESPACE"," ",161],["T_VARIABLE","$storageDatabaseFactory",161],",",["T_WHITESPACE","\n        ",161],["T_NS_SEPARATOR","\\",162],["T_STRING","Magento",162],["T_NS_SEPARATOR","\\",162],["T_STRING","MediaStorage",162],["T_NS_SEPARATOR","\\",162],["T_STRING","Model",162],["T_NS_SEPARATOR","\\",162],["T_STRING","File",162],["T_NS_SEPARATOR","\\",162],["T_STRING","Storage",162],["T_NS_SEPARATOR","\\",162],["T_STRING","Directory",162],["T_NS_SEPARATOR","\\",162],["T_STRING","DatabaseFactory",162],["T_WHITESPACE"," ",162],["T_VARIABLE","$directoryDatabaseFactory",162],",",["T_WHITESPACE","\n        ",162],["T_NS_SEPARATOR","\\",163],["T_STRING","Magento",163],["T_NS_SEPARATOR","\\",163],["T_STRING","MediaStorage",163],["T_NS_SEPARATOR","\\",163],["T_STRING","Model",163],["T_NS_SEPARATOR","\\",163],["T_STRING","File",163],["T_NS_SEPARATOR","\\",163],["T_STRING","UploaderFactory",163],["T_WHITESPACE"," ",163],["T_VARIABLE","$uploaderFactory",163],",",["T_WHITESPACE","\n        ",163],["T_ARRAY","array",164],["T_WHITESPACE"," ",164],["T_VARIABLE","$resizeParameters",164],["T_WHITESPACE"," ",164],"=",["T_WHITESPACE"," ",164],"[","]",",",["T_WHITESPACE","\n        ",164],["T_ARRAY","array",165],["T_WHITESPACE"," ",165],["T_VARIABLE","$extensions",165],["T_WHITESPACE"," ",165],"=",["T_WHITESPACE"," ",165],"[","]",",",["T_WHITESPACE","\n        ",165],["T_ARRAY","array",166],["T_WHITESPACE"," ",166],["T_VARIABLE","$dirs",166],["T_WHITESPACE"," ",166],"=",["T_WHITESPACE"," ",166],"[","]",",",["T_WHITESPACE","\n        ",166],["T_ARRAY","array",167],["T_WHITESPACE"," ",167],["T_VARIABLE","$data",167],["T_WHITESPACE"," ",167],"=",["T_WHITESPACE"," ",167],"[","]",["T_WHITESPACE","\n    ",167],")",["T_WHITESPACE"," ",168],"{",["T_WHITESPACE","\n        ",168],["T_VARIABLE","$this",169],["T_OBJECT_OPERATOR","->",169],["T_STRING","_session",169],["T_WHITESPACE"," ",169],"=",["T_WHITESPACE"," ",169],["T_VARIABLE","$session",169],";",["T_WHITESPACE","\n        ",169],["T_VARIABLE","$this",170],["T_OBJECT_OPERATOR","->",170],["T_STRING","_backendUrl",170],["T_WHITESPACE"," ",170],"=",["T_WHITESPACE"," ",170],["T_VARIABLE","$backendUrl",170],";",["T_WHITESPACE","\n        ",170],["T_VARIABLE","$this",171],["T_OBJECT_OPERATOR","->",171],["T_STRING","_cmsWysiwygImages",171],["T_WHITESPACE"," ",171],"=",["T_WHITESPACE"," ",171],["T_VARIABLE","$cmsWysiwygImages",171],";",["T_WHITESPACE","\n        ",171],["T_VARIABLE","$this",172],["T_OBJECT_OPERATOR","->",172],["T_STRING","_coreFileStorageDb",172],["T_WHITESPACE"," ",172],"=",["T_WHITESPACE"," ",172],["T_VARIABLE","$coreFileStorageDb",172],";",["T_WHITESPACE","\n        ",172],["T_VARIABLE","$this",173],["T_OBJECT_OPERATOR","->",173],["T_STRING","_directory",173],["T_WHITESPACE"," ",173],"=",["T_WHITESPACE"," ",173],["T_VARIABLE","$filesystem",173],["T_OBJECT_OPERATOR","->",173],["T_STRING","getDirectoryWrite",173],"(",["T_STRING","DirectoryList",173],["T_DOUBLE_COLON","::",173],["T_STRING","MEDIA",173],")",";",["T_WHITESPACE","\n        ",173],["T_VARIABLE","$this",174],["T_OBJECT_OPERATOR","->",174],["T_STRING","_imageFactory",174],["T_WHITESPACE"," ",174],"=",["T_WHITESPACE"," ",174],["T_VARIABLE","$imageFactory",174],";",["T_WHITESPACE","\n        ",174],["T_VARIABLE","$this",175],["T_OBJECT_OPERATOR","->",175],["T_STRING","_assetRepo",175],["T_WHITESPACE"," ",175],"=",["T_WHITESPACE"," ",175],["T_VARIABLE","$assetRepo",175],";",["T_WHITESPACE","\n        ",175],["T_VARIABLE","$this",176],["T_OBJECT_OPERATOR","->",176],["T_STRING","_storageCollectionFactory",176],["T_WHITESPACE"," ",176],"=",["T_WHITESPACE"," ",176],["T_VARIABLE","$storageCollectionFactory",176],";",["T_WHITESPACE","\n        ",176],["T_VARIABLE","$this",177],["T_OBJECT_OPERATOR","->",177],["T_STRING","_storageFileFactory",177],["T_WHITESPACE"," ",177],"=",["T_WHITESPACE"," ",177],["T_VARIABLE","$storageFileFactory",177],";",["T_WHITESPACE","\n        ",177],["T_VARIABLE","$this",178],["T_OBJECT_OPERATOR","->",178],["T_STRING","_storageDatabaseFactory",178],["T_WHITESPACE"," ",178],"=",["T_WHITESPACE"," ",178],["T_VARIABLE","$storageDatabaseFactory",178],";",["T_WHITESPACE","\n        ",178],["T_VARIABLE","$this",179],["T_OBJECT_OPERATOR","->",179],["T_STRING","_directoryDatabaseFactory",179],["T_WHITESPACE"," ",179],"=",["T_WHITESPACE"," ",179],["T_VARIABLE","$directoryDatabaseFactory",179],";",["T_WHITESPACE","\n        ",179],["T_VARIABLE","$this",180],["T_OBJECT_OPERATOR","->",180],["T_STRING","_uploaderFactory",180],["T_WHITESPACE"," ",180],"=",["T_WHITESPACE"," ",180],["T_VARIABLE","$uploaderFactory",180],";",["T_WHITESPACE","\n        ",180],["T_VARIABLE","$this",181],["T_OBJECT_OPERATOR","->",181],["T_STRING","_resizeParameters",181],["T_WHITESPACE"," ",181],"=",["T_WHITESPACE"," ",181],["T_VARIABLE","$resizeParameters",181],";",["T_WHITESPACE","\n        ",181],["T_VARIABLE","$this",182],["T_OBJECT_OPERATOR","->",182],["T_STRING","_extensions",182],["T_WHITESPACE"," ",182],"=",["T_WHITESPACE"," ",182],["T_VARIABLE","$extensions",182],";",["T_WHITESPACE","\n        ",182],["T_VARIABLE","$this",183],["T_OBJECT_OPERATOR","->",183],["T_STRING","_dirs",183],["T_WHITESPACE"," ",183],"=",["T_WHITESPACE"," ",183],["T_VARIABLE","$dirs",183],";",["T_WHITESPACE","\n        ",183],["T_STRING","parent",184],["T_DOUBLE_COLON","::",184],["T_STRING","__construct",184],"(",["T_VARIABLE","$data",184],")",";",["T_WHITESPACE","\n    ",184],"}",["T_WHITESPACE","\n\n    ",185],["T_DOC_COMMENT","\/**\n     * Create sub directories if DB storage is used\n     *\n     * @param string $path\n     * @return void\n     *\/",187],["T_WHITESPACE","\n    ",192],["T_PROTECTED","protected",193],["T_WHITESPACE"," ",193],["T_FUNCTION","function",193],["T_WHITESPACE"," ",193],["T_STRING","createSubDirectories",193],"(",["T_VARIABLE","$path",193],")",["T_WHITESPACE","\n    ",193],"{",["T_WHITESPACE","\n        ",194],["T_IF","if",195],["T_WHITESPACE"," ",195],"(",["T_VARIABLE","$this",195],["T_OBJECT_OPERATOR","->",195],["T_STRING","_coreFileStorageDb",195],["T_OBJECT_OPERATOR","->",195],["T_STRING","checkDbUsage",195],"(",")",")",["T_WHITESPACE"," ",195],"{",["T_WHITESPACE","\n            ",195],["T_DOC_COMMENT","\/** @var \\Magento\\MediaStorage\\Model\\File\\Storage\\Directory\\Database $subDirectories *\/",196],["T_WHITESPACE","\n            ",196],["T_VARIABLE","$subDirectories",197],["T_WHITESPACE"," ",197],"=",["T_WHITESPACE"," ",197],["T_VARIABLE","$this",197],["T_OBJECT_OPERATOR","->",197],["T_STRING","_directoryDatabaseFactory",197],["T_OBJECT_OPERATOR","->",197],["T_STRING","create",197],"(",")",";",["T_WHITESPACE","\n            ",197],["T_VARIABLE","$directories",198],["T_WHITESPACE"," ",198],"=",["T_WHITESPACE"," ",198],["T_VARIABLE","$subDirectories",198],["T_OBJECT_OPERATOR","->",198],["T_STRING","getSubdirectories",198],"(",["T_VARIABLE","$path",198],")",";",["T_WHITESPACE","\n            ",198],["T_FOREACH","foreach",199],["T_WHITESPACE"," ",199],"(",["T_VARIABLE","$directories",199],["T_WHITESPACE"," ",199],["T_AS","as",199],["T_WHITESPACE"," ",199],["T_VARIABLE","$directory",199],")",["T_WHITESPACE"," ",199],"{",["T_WHITESPACE","\n                ",199],["T_VARIABLE","$fullPath",200],["T_WHITESPACE"," ",200],"=",["T_WHITESPACE"," ",200],["T_STRING","rtrim",200],"(",["T_VARIABLE","$path",200],",",["T_WHITESPACE"," ",200],["T_CONSTANT_ENCAPSED_STRING","'\/'",200],")",["T_WHITESPACE"," ",200],".",["T_WHITESPACE"," ",200],["T_CONSTANT_ENCAPSED_STRING","'\/'",200],["T_WHITESPACE"," ",200],".",["T_WHITESPACE"," ",200],["T_VARIABLE","$directory",200],"[",["T_CONSTANT_ENCAPSED_STRING","'name'",200],"]",";",["T_WHITESPACE","\n                ",200],["T_VARIABLE","$this",201],["T_OBJECT_OPERATOR","->",201],["T_STRING","_directory",201],["T_OBJECT_OPERATOR","->",201],["T_STRING","create",201],"(",["T_VARIABLE","$fullPath",201],")",";",["T_WHITESPACE","\n            ",201],"}",["T_WHITESPACE","\n        ",202],"}",["T_WHITESPACE","\n    ",203],"}",["T_WHITESPACE","\n\n    ",204],["T_DOC_COMMENT","\/**\n     * Prepare and get conditions for exclude directories\n     *\n     * @return array\n     *\/",206],["T_WHITESPACE","\n    ",210],["T_PROTECTED","protected",211],["T_WHITESPACE"," ",211],["T_FUNCTION","function",211],["T_WHITESPACE"," ",211],["T_STRING","getConditionsForExcludeDirs",211],"(",")",["T_WHITESPACE","\n    ",211],"{",["T_WHITESPACE","\n        ",212],["T_VARIABLE","$conditions",213],["T_WHITESPACE"," ",213],"=",["T_WHITESPACE"," ",213],"[",["T_CONSTANT_ENCAPSED_STRING","'reg_exp'",213],["T_WHITESPACE"," ",213],["T_DOUBLE_ARROW","=>",213],["T_WHITESPACE"," ",213],"[","]",",",["T_WHITESPACE"," ",213],["T_CONSTANT_ENCAPSED_STRING","'plain'",213],["T_WHITESPACE"," ",213],["T_DOUBLE_ARROW","=>",213],["T_WHITESPACE"," ",213],"[","]","]",";",["T_WHITESPACE","\n\n        ",213],["T_IF","if",215],["T_WHITESPACE"," ",215],"(",["T_VARIABLE","$this",215],["T_OBJECT_OPERATOR","->",215],["T_STRING","_dirs",215],"[",["T_CONSTANT_ENCAPSED_STRING","'exclude'",215],"]",")",["T_WHITESPACE"," ",215],"{",["T_WHITESPACE","\n            ",215],["T_FOREACH","foreach",216],["T_WHITESPACE"," ",216],"(",["T_VARIABLE","$this",216],["T_OBJECT_OPERATOR","->",216],["T_STRING","_dirs",216],"[",["T_CONSTANT_ENCAPSED_STRING","'exclude'",216],"]",["T_WHITESPACE"," ",216],["T_AS","as",216],["T_WHITESPACE"," ",216],["T_VARIABLE","$dir",216],")",["T_WHITESPACE"," ",216],"{",["T_WHITESPACE","\n                ",216],["T_VARIABLE","$conditions",217],"[","!",["T_EMPTY","empty",217],"(",["T_VARIABLE","$dir",217],"[",["T_CONSTANT_ENCAPSED_STRING","'regexp'",217],"]",")",["T_WHITESPACE"," ",217],"?",["T_WHITESPACE"," ",217],["T_CONSTANT_ENCAPSED_STRING","'reg_exp'",217],["T_WHITESPACE"," ",217],":",["T_WHITESPACE"," ",217],["T_CONSTANT_ENCAPSED_STRING","'plain'",217],"]","[",["T_VARIABLE","$dir",217],"[",["T_CONSTANT_ENCAPSED_STRING","'name'",217],"]","]",["T_WHITESPACE"," ",217],"=",["T_WHITESPACE"," ",217],["T_STRING","true",217],";",["T_WHITESPACE","\n            ",217],"}",["T_WHITESPACE","\n        ",218],"}",["T_WHITESPACE","\n\n        ",219],["T_COMMENT","\/\/ \"include\" section takes precedence and can revoke directory exclusion\n",221],["T_WHITESPACE","        ",222],["T_IF","if",222],["T_WHITESPACE"," ",222],"(",["T_VARIABLE","$this",222],["T_OBJECT_OPERATOR","->",222],["T_STRING","_dirs",222],"[",["T_CONSTANT_ENCAPSED_STRING","'include'",222],"]",")",["T_WHITESPACE"," ",222],"{",["T_WHITESPACE","\n            ",222],["T_FOREACH","foreach",223],["T_WHITESPACE"," ",223],"(",["T_VARIABLE","$this",223],["T_OBJECT_OPERATOR","->",223],["T_STRING","_dirs",223],"[",["T_CONSTANT_ENCAPSED_STRING","'include'",223],"]",["T_WHITESPACE"," ",223],["T_AS","as",223],["T_WHITESPACE"," ",223],["T_VARIABLE","$dir",223],")",["T_WHITESPACE"," ",223],"{",["T_WHITESPACE","\n                ",223],["T_UNSET","unset",224],"(",["T_VARIABLE","$conditions",224],"[",["T_CONSTANT_ENCAPSED_STRING","'reg_exp'",224],"]","[",["T_VARIABLE","$dir",224],"[",["T_CONSTANT_ENCAPSED_STRING","'name'",224],"]","]",",",["T_WHITESPACE"," ",224],["T_VARIABLE","$conditions",224],"[",["T_CONSTANT_ENCAPSED_STRING","'plain'",224],"]","[",["T_VARIABLE","$dir",224],"[",["T_CONSTANT_ENCAPSED_STRING","'name'",224],"]","]",")",";",["T_WHITESPACE","\n            ",224],"}",["T_WHITESPACE","\n        ",225],"}",["T_WHITESPACE","\n\n        ",226],["T_RETURN","return",228],["T_WHITESPACE"," ",228],["T_VARIABLE","$conditions",228],";",["T_WHITESPACE","\n    ",228],"}",["T_WHITESPACE","\n\n    ",229],["T_DOC_COMMENT","\/**\n     * Remove excluded directories from collection\n     *\n     * @param \\Magento\\Framework\\Data\\Collection\\Filesystem $collection\n     * @param array $conditions\n     * @return \\Magento\\Framework\\Data\\Collection\\Filesystem\n     *\/",231],["T_WHITESPACE","\n    ",237],["T_PROTECTED","protected",238],["T_WHITESPACE"," ",238],["T_FUNCTION","function",238],["T_WHITESPACE"," ",238],["T_STRING","removeItemFromCollection",238],"(",["T_VARIABLE","$collection",238],",",["T_WHITESPACE"," ",238],["T_VARIABLE","$conditions",238],")",["T_WHITESPACE","\n    ",238],"{",["T_WHITESPACE","\n        ",239],["T_VARIABLE","$regExp",240],["T_WHITESPACE"," ",240],"=",["T_WHITESPACE"," ",240],["T_VARIABLE","$conditions",240],"[",["T_CONSTANT_ENCAPSED_STRING","'reg_exp'",240],"]",["T_WHITESPACE"," ",240],"?",["T_WHITESPACE"," ",240],["T_CONSTANT_ENCAPSED_STRING","'~'",240],["T_WHITESPACE"," ",240],".",["T_WHITESPACE"," ",240],["T_STRING","implode",240],"(",["T_CONSTANT_ENCAPSED_STRING","'|'",240],",",["T_WHITESPACE"," ",240],["T_STRING","array_keys",240],"(",["T_VARIABLE","$conditions",240],"[",["T_CONSTANT_ENCAPSED_STRING","'reg_exp'",240],"]",")",")",["T_WHITESPACE"," ",240],".",["T_WHITESPACE"," ",240],["T_CONSTANT_ENCAPSED_STRING","'~i'",240],["T_WHITESPACE"," ",240],":",["T_WHITESPACE"," ",240],["T_STRING","null",240],";",["T_WHITESPACE","\n        ",240],["T_VARIABLE","$storageRootLength",241],["T_WHITESPACE"," ",241],"=",["T_WHITESPACE"," ",241],["T_STRING","strlen",241],"(",["T_VARIABLE","$this",241],["T_OBJECT_OPERATOR","->",241],["T_STRING","_cmsWysiwygImages",241],["T_OBJECT_OPERATOR","->",241],["T_STRING","getStorageRoot",241],"(",")",")",";",["T_WHITESPACE","\n\n        ",241],["T_FOREACH","foreach",243],["T_WHITESPACE"," ",243],"(",["T_VARIABLE","$collection",243],["T_WHITESPACE"," ",243],["T_AS","as",243],["T_WHITESPACE"," ",243],["T_VARIABLE","$key",243],["T_WHITESPACE"," ",243],["T_DOUBLE_ARROW","=>",243],["T_WHITESPACE"," ",243],["T_VARIABLE","$value",243],")",["T_WHITESPACE"," ",243],"{",["T_WHITESPACE","\n            ",243],["T_VARIABLE","$rootChildParts",244],["T_WHITESPACE"," ",244],"=",["T_WHITESPACE"," ",244],["T_STRING","explode",244],"(",["T_CONSTANT_ENCAPSED_STRING","'\/'",244],",",["T_WHITESPACE"," ",244],["T_STRING","substr",244],"(",["T_VARIABLE","$value",244],["T_OBJECT_OPERATOR","->",244],["T_STRING","getFilename",244],"(",")",",",["T_WHITESPACE"," ",244],["T_VARIABLE","$storageRootLength",244],")",")",";",["T_WHITESPACE","\n\n            ",244],["T_IF","if",246],["T_WHITESPACE"," ",246],"(",["T_STRING","array_key_exists",246],"(",["T_VARIABLE","$rootChildParts",246],"[",["T_LNUMBER","1",246],"]",",",["T_WHITESPACE"," ",246],["T_VARIABLE","$conditions",246],"[",["T_CONSTANT_ENCAPSED_STRING","'plain'",246],"]",")",["T_WHITESPACE","\n                ",246],["T_BOOLEAN_OR","||",247],["T_WHITESPACE"," ",247],"(",["T_VARIABLE","$regExp",247],["T_WHITESPACE"," ",247],["T_BOOLEAN_AND","&&",247],["T_WHITESPACE"," ",247],["T_STRING","preg_match",247],"(",["T_VARIABLE","$regExp",247],",",["T_WHITESPACE"," ",247],["T_VARIABLE","$value",247],["T_OBJECT_OPERATOR","->",247],["T_STRING","getFilename",247],"(",")",")",")",")",["T_WHITESPACE"," ",247],"{",["T_WHITESPACE","\n\n                ",247],["T_VARIABLE","$collection",249],["T_OBJECT_OPERATOR","->",249],["T_STRING","removeItemByKey",249],"(",["T_VARIABLE","$key",249],")",";",["T_WHITESPACE","\n            ",249],"}",["T_WHITESPACE","\n        ",250],"}",["T_WHITESPACE","\n\n        ",251],["T_RETURN","return",253],["T_WHITESPACE"," ",253],["T_VARIABLE","$collection",253],";",["T_WHITESPACE","\n    ",253],"}",["T_WHITESPACE","\n\n    ",254],["T_DOC_COMMENT","\/**\n     * Return one-level child directories for specified path\n     *\n     * @param string $path Parent directory path\n     * @return \\Magento\\Framework\\Data\\Collection\\Filesystem\n     *\/",256],["T_WHITESPACE","\n    ",261],["T_PUBLIC","public",262],["T_WHITESPACE"," ",262],["T_FUNCTION","function",262],["T_WHITESPACE"," ",262],["T_STRING","getDirsCollection",262],"(",["T_VARIABLE","$path",262],")",["T_WHITESPACE","\n    ",262],"{",["T_WHITESPACE","\n        ",263],["T_VARIABLE","$this",264],["T_OBJECT_OPERATOR","->",264],["T_STRING","createSubDirectories",264],"(",["T_VARIABLE","$path",264],")",";",["T_WHITESPACE","\n\n        ",264],["T_VARIABLE","$collection",266],["T_WHITESPACE"," ",266],"=",["T_WHITESPACE"," ",266],["T_VARIABLE","$this",266],["T_OBJECT_OPERATOR","->",266],["T_STRING","getCollection",266],"(",["T_VARIABLE","$path",266],")",["T_WHITESPACE","\n            ",266],["T_OBJECT_OPERATOR","->",267],["T_STRING","setCollectDirs",267],"(",["T_STRING","true",267],")",["T_WHITESPACE","\n            ",267],["T_OBJECT_OPERATOR","->",268],["T_STRING","setCollectFiles",268],"(",["T_STRING","false",268],")",["T_WHITESPACE","\n            ",268],["T_OBJECT_OPERATOR","->",269],["T_STRING","setCollectRecursively",269],"(",["T_STRING","false",269],")",";",["T_WHITESPACE","\n\n        ",269],["T_VARIABLE","$conditions",271],["T_WHITESPACE"," ",271],"=",["T_WHITESPACE"," ",271],["T_VARIABLE","$this",271],["T_OBJECT_OPERATOR","->",271],["T_STRING","getConditionsForExcludeDirs",271],"(",")",";",["T_WHITESPACE","\n\n        ",271],["T_RETURN","return",273],["T_WHITESPACE"," ",273],["T_VARIABLE","$this",273],["T_OBJECT_OPERATOR","->",273],["T_STRING","removeItemFromCollection",273],"(",["T_VARIABLE","$collection",273],",",["T_WHITESPACE"," ",273],["T_VARIABLE","$conditions",273],")",";",["T_WHITESPACE","\n    ",273],"}",["T_WHITESPACE","\n\n    ",274],["T_DOC_COMMENT","\/**\n     * Return files\n     *\n     * @param string $path Parent directory path\n     * @param string $type Type of storage, e.g. image, media etc.\n     * @return \\Magento\\Framework\\Data\\Collection\\Filesystem\n     *\/",276],["T_WHITESPACE","\n    ",282],["T_PUBLIC","public",283],["T_WHITESPACE"," ",283],["T_FUNCTION","function",283],["T_WHITESPACE"," ",283],["T_STRING","getFilesCollection",283],"(",["T_VARIABLE","$path",283],",",["T_WHITESPACE"," ",283],["T_VARIABLE","$type",283],["T_WHITESPACE"," ",283],"=",["T_WHITESPACE"," ",283],["T_STRING","null",283],")",["T_WHITESPACE","\n    ",283],"{",["T_WHITESPACE","\n        ",284],["T_IF","if",285],["T_WHITESPACE"," ",285],"(",["T_VARIABLE","$this",285],["T_OBJECT_OPERATOR","->",285],["T_STRING","_coreFileStorageDb",285],["T_OBJECT_OPERATOR","->",285],["T_STRING","checkDbUsage",285],"(",")",")",["T_WHITESPACE"," ",285],"{",["T_WHITESPACE","\n            ",285],["T_VARIABLE","$files",286],["T_WHITESPACE"," ",286],"=",["T_WHITESPACE"," ",286],["T_VARIABLE","$this",286],["T_OBJECT_OPERATOR","->",286],["T_STRING","_storageDatabaseFactory",286],["T_OBJECT_OPERATOR","->",286],["T_STRING","create",286],"(",")",["T_OBJECT_OPERATOR","->",286],["T_STRING","getDirectoryFiles",286],"(",["T_VARIABLE","$path",286],")",";",["T_WHITESPACE","\n\n            ",286],["T_DOC_COMMENT","\/** @var \\Magento\\MediaStorage\\Model\\File\\Storage\\File $fileStorageModel *\/",288],["T_WHITESPACE","\n            ",288],["T_VARIABLE","$fileStorageModel",289],["T_WHITESPACE"," ",289],"=",["T_WHITESPACE"," ",289],["T_VARIABLE","$this",289],["T_OBJECT_OPERATOR","->",289],["T_STRING","_storageFileFactory",289],["T_OBJECT_OPERATOR","->",289],["T_STRING","create",289],"(",")",";",["T_WHITESPACE","\n            ",289],["T_FOREACH","foreach",290],["T_WHITESPACE"," ",290],"(",["T_VARIABLE","$files",290],["T_WHITESPACE"," ",290],["T_AS","as",290],["T_WHITESPACE"," ",290],["T_VARIABLE","$file",290],")",["T_WHITESPACE"," ",290],"{",["T_WHITESPACE","\n                ",290],["T_VARIABLE","$fileStorageModel",291],["T_OBJECT_OPERATOR","->",291],["T_STRING","saveFile",291],"(",["T_VARIABLE","$file",291],")",";",["T_WHITESPACE","\n            ",291],"}",["T_WHITESPACE","\n        ",292],"}",["T_WHITESPACE","\n\n        ",293],["T_VARIABLE","$collection",295],["T_WHITESPACE"," ",295],"=",["T_WHITESPACE"," ",295],["T_VARIABLE","$this",295],["T_OBJECT_OPERATOR","->",295],["T_STRING","getCollection",295],"(",["T_WHITESPACE","\n            ",295],["T_VARIABLE","$path",296],["T_WHITESPACE","\n        ",296],")",["T_OBJECT_OPERATOR","->",297],["T_STRING","setCollectDirs",297],"(",["T_WHITESPACE","\n            ",297],["T_STRING","false",298],["T_WHITESPACE","\n        ",298],")",["T_OBJECT_OPERATOR","->",299],["T_STRING","setCollectFiles",299],"(",["T_WHITESPACE","\n            ",299],["T_STRING","true",300],["T_WHITESPACE","\n        ",300],")",["T_OBJECT_OPERATOR","->",301],["T_STRING","setCollectRecursively",301],"(",["T_WHITESPACE","\n            ",301],["T_STRING","false",302],["T_WHITESPACE","\n        ",302],")",["T_OBJECT_OPERATOR","->",303],["T_STRING","setOrder",303],"(",["T_WHITESPACE","\n            ",303],["T_CONSTANT_ENCAPSED_STRING","'mtime'",304],",",["T_WHITESPACE","\n            ",304],["T_NS_SEPARATOR","\\",305],["T_STRING","Magento",305],["T_NS_SEPARATOR","\\",305],["T_STRING","Framework",305],["T_NS_SEPARATOR","\\",305],["T_STRING","Data",305],["T_NS_SEPARATOR","\\",305],["T_STRING","Collection",305],["T_DOUBLE_COLON","::",305],["T_STRING","SORT_ORDER_ASC",305],["T_WHITESPACE","\n        ",305],")",";",["T_WHITESPACE","\n\n        ",306],["T_COMMENT","\/\/ Add files extension filter\n",308],["T_WHITESPACE","        ",309],["T_IF","if",309],["T_WHITESPACE"," ",309],"(",["T_VARIABLE","$allowed",309],["T_WHITESPACE"," ",309],"=",["T_WHITESPACE"," ",309],["T_VARIABLE","$this",309],["T_OBJECT_OPERATOR","->",309],["T_STRING","getAllowedExtensions",309],"(",["T_VARIABLE","$type",309],")",")",["T_WHITESPACE"," ",309],"{",["T_WHITESPACE","\n            ",309],["T_VARIABLE","$collection",310],["T_OBJECT_OPERATOR","->",310],["T_STRING","setFilesFilter",310],"(",["T_CONSTANT_ENCAPSED_STRING","'\/\\.('",310],["T_WHITESPACE"," ",310],".",["T_WHITESPACE"," ",310],["T_STRING","implode",310],"(",["T_CONSTANT_ENCAPSED_STRING","'|'",310],",",["T_WHITESPACE"," ",310],["T_VARIABLE","$allowed",310],")",["T_WHITESPACE"," ",310],".",["T_WHITESPACE"," ",310],["T_CONSTANT_ENCAPSED_STRING","')$\/i'",310],")",";",["T_WHITESPACE","\n        ",310],"}",["T_WHITESPACE","\n\n        ",311],["T_COMMENT","\/\/ prepare items\n",313],["T_WHITESPACE","        ",314],["T_FOREACH","foreach",314],["T_WHITESPACE"," ",314],"(",["T_VARIABLE","$collection",314],["T_WHITESPACE"," ",314],["T_AS","as",314],["T_WHITESPACE"," ",314],["T_VARIABLE","$item",314],")",["T_WHITESPACE"," ",314],"{",["T_WHITESPACE","\n            ",314],["T_VARIABLE","$item",315],["T_OBJECT_OPERATOR","->",315],["T_STRING","setId",315],"(",["T_VARIABLE","$this",315],["T_OBJECT_OPERATOR","->",315],["T_STRING","_cmsWysiwygImages",315],["T_OBJECT_OPERATOR","->",315],["T_STRING","idEncode",315],"(",["T_VARIABLE","$item",315],["T_OBJECT_OPERATOR","->",315],["T_STRING","getBasename",315],"(",")",")",")",";",["T_WHITESPACE","\n            ",315],["T_VARIABLE","$item",316],["T_OBJECT_OPERATOR","->",316],["T_STRING","setName",316],"(",["T_VARIABLE","$item",316],["T_OBJECT_OPERATOR","->",316],["T_STRING","getBasename",316],"(",")",")",";",["T_WHITESPACE","\n            ",316],["T_VARIABLE","$item",317],["T_OBJECT_OPERATOR","->",317],["T_STRING","setShortName",317],"(",["T_VARIABLE","$this",317],["T_OBJECT_OPERATOR","->",317],["T_STRING","_cmsWysiwygImages",317],["T_OBJECT_OPERATOR","->",317],["T_STRING","getShortFilename",317],"(",["T_VARIABLE","$item",317],["T_OBJECT_OPERATOR","->",317],["T_STRING","getBasename",317],"(",")",")",")",";",["T_WHITESPACE","\n            ",317],["T_VARIABLE","$item",318],["T_OBJECT_OPERATOR","->",318],["T_STRING","setUrl",318],"(",["T_VARIABLE","$this",318],["T_OBJECT_OPERATOR","->",318],["T_STRING","_cmsWysiwygImages",318],["T_OBJECT_OPERATOR","->",318],["T_STRING","getCurrentUrl",318],"(",")",["T_WHITESPACE"," ",318],".",["T_WHITESPACE"," ",318],["T_VARIABLE","$item",318],["T_OBJECT_OPERATOR","->",318],["T_STRING","getBasename",318],"(",")",")",";",["T_WHITESPACE","\n\n            ",318],["T_IF","if",320],["T_WHITESPACE"," ",320],"(",["T_VARIABLE","$this",320],["T_OBJECT_OPERATOR","->",320],["T_STRING","isImage",320],"(",["T_VARIABLE","$item",320],["T_OBJECT_OPERATOR","->",320],["T_STRING","getBasename",320],"(",")",")",")",["T_WHITESPACE"," ",320],"{",["T_WHITESPACE","\n                ",320],["T_VARIABLE","$thumbUrl",321],["T_WHITESPACE"," ",321],"=",["T_WHITESPACE"," ",321],["T_VARIABLE","$this",321],["T_OBJECT_OPERATOR","->",321],["T_STRING","getThumbnailUrl",321],"(",["T_VARIABLE","$item",321],["T_OBJECT_OPERATOR","->",321],["T_STRING","getFilename",321],"(",")",",",["T_WHITESPACE"," ",321],["T_STRING","true",321],")",";",["T_WHITESPACE","\n                ",321],["T_COMMENT","\/\/ generate thumbnail \"on the fly\" if it does not exists\n",322],["T_WHITESPACE","                ",323],["T_IF","if",323],["T_WHITESPACE"," ",323],"(","!",["T_VARIABLE","$thumbUrl",323],")",["T_WHITESPACE"," ",323],"{",["T_WHITESPACE","\n                    ",323],["T_VARIABLE","$thumbUrl",324],["T_WHITESPACE"," ",324],"=",["T_WHITESPACE"," ",324],["T_VARIABLE","$this",324],["T_OBJECT_OPERATOR","->",324],["T_STRING","_backendUrl",324],["T_OBJECT_OPERATOR","->",324],["T_STRING","getUrl",324],"(",["T_CONSTANT_ENCAPSED_STRING","'cms\/*\/thumbnail'",324],",",["T_WHITESPACE"," ",324],"[",["T_CONSTANT_ENCAPSED_STRING","'file'",324],["T_WHITESPACE"," ",324],["T_DOUBLE_ARROW","=>",324],["T_WHITESPACE"," ",324],["T_VARIABLE","$item",324],["T_OBJECT_OPERATOR","->",324],["T_STRING","getId",324],"(",")","]",")",";",["T_WHITESPACE","\n                ",324],"}",["T_WHITESPACE","\n\n                ",325],["T_VARIABLE","$size",327],["T_WHITESPACE"," ",327],"=",["T_WHITESPACE"," ",327],"@",["T_STRING","getimagesize",327],"(",["T_VARIABLE","$item",327],["T_OBJECT_OPERATOR","->",327],["T_STRING","getFilename",327],"(",")",")",";",["T_WHITESPACE","\n\n                ",327],["T_IF","if",329],["T_WHITESPACE"," ",329],"(",["T_STRING","is_array",329],"(",["T_VARIABLE","$size",329],")",")",["T_WHITESPACE"," ",329],"{",["T_WHITESPACE","\n                    ",329],["T_VARIABLE","$item",330],["T_OBJECT_OPERATOR","->",330],["T_STRING","setWidth",330],"(",["T_VARIABLE","$size",330],"[",["T_LNUMBER","0",330],"]",")",";",["T_WHITESPACE","\n                    ",330],["T_VARIABLE","$item",331],["T_OBJECT_OPERATOR","->",331],["T_STRING","setHeight",331],"(",["T_VARIABLE","$size",331],"[",["T_LNUMBER","1",331],"]",")",";",["T_WHITESPACE","\n                ",331],"}",["T_WHITESPACE","\n            ",332],"}",["T_WHITESPACE"," ",333],["T_ELSE","else",333],["T_WHITESPACE"," ",333],"{",["T_WHITESPACE","\n                ",333],["T_VARIABLE","$thumbUrl",334],["T_WHITESPACE"," ",334],"=",["T_WHITESPACE"," ",334],["T_VARIABLE","$this",334],["T_OBJECT_OPERATOR","->",334],["T_STRING","_assetRepo",334],["T_OBJECT_OPERATOR","->",334],["T_STRING","getUrl",334],"(",["T_STRING","self",334],["T_DOUBLE_COLON","::",334],["T_STRING","THUMB_PLACEHOLDER_PATH_SUFFIX",334],")",";",["T_WHITESPACE","\n            ",334],"}",["T_WHITESPACE","\n\n            ",335],["T_VARIABLE","$item",337],["T_OBJECT_OPERATOR","->",337],["T_STRING","setThumbUrl",337],"(",["T_VARIABLE","$thumbUrl",337],")",";",["T_WHITESPACE","\n        ",337],"}",["T_WHITESPACE","\n\n        ",338],["T_RETURN","return",340],["T_WHITESPACE"," ",340],["T_VARIABLE","$collection",340],";",["T_WHITESPACE","\n    ",340],"}",["T_WHITESPACE","\n\n    ",341],["T_DOC_COMMENT","\/**\n     * Storage collection\n     *\n     * @param string $path Path to the directory\n     * @return \\Magento\\Cms\\Model\\Wysiwyg\\Images\\Storage\\Collection\n     *\/",343],["T_WHITESPACE","\n    ",348],["T_PUBLIC","public",349],["T_WHITESPACE"," ",349],["T_FUNCTION","function",349],["T_WHITESPACE"," ",349],["T_STRING","getCollection",349],"(",["T_VARIABLE","$path",349],["T_WHITESPACE"," ",349],"=",["T_WHITESPACE"," ",349],["T_STRING","null",349],")",["T_WHITESPACE","\n    ",349],"{",["T_WHITESPACE","\n        ",350],["T_DOC_COMMENT","\/** @var \\Magento\\Cms\\Model\\Wysiwyg\\Images\\Storage\\Collection $collection *\/",351],["T_WHITESPACE","\n        ",351],["T_VARIABLE","$collection",352],["T_WHITESPACE"," ",352],"=",["T_WHITESPACE"," ",352],["T_VARIABLE","$this",352],["T_OBJECT_OPERATOR","->",352],["T_STRING","_storageCollectionFactory",352],["T_OBJECT_OPERATOR","->",352],["T_STRING","create",352],"(",")",";",["T_WHITESPACE","\n        ",352],["T_IF","if",353],["T_WHITESPACE"," ",353],"(",["T_VARIABLE","$path",353],["T_WHITESPACE"," ",353],["T_IS_NOT_IDENTICAL","!==",353],["T_WHITESPACE"," ",353],["T_STRING","null",353],")",["T_WHITESPACE"," ",353],"{",["T_WHITESPACE","\n            ",353],["T_VARIABLE","$collection",354],["T_OBJECT_OPERATOR","->",354],["T_STRING","addTargetDir",354],"(",["T_VARIABLE","$path",354],")",";",["T_WHITESPACE","\n        ",354],"}",["T_WHITESPACE","\n        ",355],["T_RETURN","return",356],["T_WHITESPACE"," ",356],["T_VARIABLE","$collection",356],";",["T_WHITESPACE","\n    ",356],"}",["T_WHITESPACE","\n\n    ",357],["T_DOC_COMMENT","\/**\n     * Create new directory in storage\n     *\n     * @param string $name New directory name\n     * @param string $path Parent directory path\n     * @return array New directory info\n     * @throws \\Magento\\Framework\\Exception\\LocalizedException\n     *\/",359],["T_WHITESPACE","\n    ",366],["T_PUBLIC","public",367],["T_WHITESPACE"," ",367],["T_FUNCTION","function",367],["T_WHITESPACE"," ",367],["T_STRING","createDirectory",367],"(",["T_VARIABLE","$name",367],",",["T_WHITESPACE"," ",367],["T_VARIABLE","$path",367],")",["T_WHITESPACE","\n    ",367],"{",["T_WHITESPACE","\n        ",368],["T_IF","if",369],["T_WHITESPACE"," ",369],"(","!",["T_STRING","preg_match",369],"(",["T_STRING","self",369],["T_DOUBLE_COLON","::",369],["T_STRING","DIRECTORY_NAME_REGEXP",369],",",["T_WHITESPACE"," ",369],["T_VARIABLE","$name",369],")",")",["T_WHITESPACE"," ",369],"{",["T_WHITESPACE","\n            ",369],["T_THROW","throw",370],["T_WHITESPACE"," ",370],["T_NEW","new",370],["T_WHITESPACE"," ",370],["T_NS_SEPARATOR","\\",370],["T_STRING","Magento",370],["T_NS_SEPARATOR","\\",370],["T_STRING","Framework",370],["T_NS_SEPARATOR","\\",370],["T_STRING","Exception",370],["T_NS_SEPARATOR","\\",370],["T_STRING","LocalizedException",370],"(",["T_WHITESPACE","\n                ",370],["T_STRING","__",371],"(",["T_CONSTANT_ENCAPSED_STRING","'Please rename the folder using only letters, numbers, underscores and dashes.'",371],")",["T_WHITESPACE","\n            ",371],")",";",["T_WHITESPACE","\n        ",372],"}",["T_WHITESPACE","\n\n        ",373],["T_VARIABLE","$relativePath",375],["T_WHITESPACE"," ",375],"=",["T_WHITESPACE"," ",375],["T_VARIABLE","$this",375],["T_OBJECT_OPERATOR","->",375],["T_STRING","_directory",375],["T_OBJECT_OPERATOR","->",375],["T_STRING","getRelativePath",375],"(",["T_VARIABLE","$path",375],")",";",["T_WHITESPACE","\n        ",375],["T_IF","if",376],["T_WHITESPACE"," ",376],"(","!",["T_VARIABLE","$this",376],["T_OBJECT_OPERATOR","->",376],["T_STRING","_directory",376],["T_OBJECT_OPERATOR","->",376],["T_STRING","isDirectory",376],"(",["T_VARIABLE","$relativePath",376],")",["T_WHITESPACE"," ",376],["T_BOOLEAN_OR","||",376],["T_WHITESPACE"," ",376],"!",["T_VARIABLE","$this",376],["T_OBJECT_OPERATOR","->",376],["T_STRING","_directory",376],["T_OBJECT_OPERATOR","->",376],["T_STRING","isWritable",376],"(",["T_VARIABLE","$relativePath",376],")",")",["T_WHITESPACE"," ",376],"{",["T_WHITESPACE","\n            ",376],["T_VARIABLE","$path",377],["T_WHITESPACE"," ",377],"=",["T_WHITESPACE"," ",377],["T_VARIABLE","$this",377],["T_OBJECT_OPERATOR","->",377],["T_STRING","_cmsWysiwygImages",377],["T_OBJECT_OPERATOR","->",377],["T_STRING","getStorageRoot",377],"(",")",";",["T_WHITESPACE","\n        ",377],"}",["T_WHITESPACE","\n\n        ",378],["T_VARIABLE","$newPath",380],["T_WHITESPACE"," ",380],"=",["T_WHITESPACE"," ",380],["T_VARIABLE","$path",380],["T_WHITESPACE"," ",380],".",["T_WHITESPACE"," ",380],["T_CONSTANT_ENCAPSED_STRING","'\/'",380],["T_WHITESPACE"," ",380],".",["T_WHITESPACE"," ",380],["T_VARIABLE","$name",380],";",["T_WHITESPACE","\n        ",380],["T_VARIABLE","$relativeNewPath",381],["T_WHITESPACE"," ",381],"=",["T_WHITESPACE"," ",381],["T_VARIABLE","$this",381],["T_OBJECT_OPERATOR","->",381],["T_STRING","_directory",381],["T_OBJECT_OPERATOR","->",381],["T_STRING","getRelativePath",381],"(",["T_VARIABLE","$newPath",381],")",";",["T_WHITESPACE","\n        ",381],["T_IF","if",382],["T_WHITESPACE"," ",382],"(",["T_VARIABLE","$this",382],["T_OBJECT_OPERATOR","->",382],["T_STRING","_directory",382],["T_OBJECT_OPERATOR","->",382],["T_STRING","isDirectory",382],"(",["T_VARIABLE","$relativeNewPath",382],")",")",["T_WHITESPACE"," ",382],"{",["T_WHITESPACE","\n            ",382],["T_THROW","throw",383],["T_WHITESPACE"," ",383],["T_NEW","new",383],["T_WHITESPACE"," ",383],["T_NS_SEPARATOR","\\",383],["T_STRING","Magento",383],["T_NS_SEPARATOR","\\",383],["T_STRING","Framework",383],["T_NS_SEPARATOR","\\",383],["T_STRING","Exception",383],["T_NS_SEPARATOR","\\",383],["T_STRING","LocalizedException",383],"(",["T_WHITESPACE","\n                ",383],["T_STRING","__",384],"(",["T_CONSTANT_ENCAPSED_STRING","'We found a directory with the same name. Please try another folder name.'",384],")",["T_WHITESPACE","\n            ",384],")",";",["T_WHITESPACE","\n        ",385],"}",["T_WHITESPACE","\n\n        ",386],["T_VARIABLE","$this",388],["T_OBJECT_OPERATOR","->",388],["T_STRING","_directory",388],["T_OBJECT_OPERATOR","->",388],["T_STRING","create",388],"(",["T_VARIABLE","$relativeNewPath",388],")",";",["T_WHITESPACE","\n        ",388],["T_TRY","try",389],["T_WHITESPACE"," ",389],"{",["T_WHITESPACE","\n            ",389],["T_IF","if",390],["T_WHITESPACE"," ",390],"(",["T_VARIABLE","$this",390],["T_OBJECT_OPERATOR","->",390],["T_STRING","_coreFileStorageDb",390],["T_OBJECT_OPERATOR","->",390],["T_STRING","checkDbUsage",390],"(",")",")",["T_WHITESPACE"," ",390],"{",["T_WHITESPACE","\n                ",390],["T_VARIABLE","$relativePath",391],["T_WHITESPACE"," ",391],"=",["T_WHITESPACE"," ",391],["T_VARIABLE","$this",391],["T_OBJECT_OPERATOR","->",391],["T_STRING","_coreFileStorageDb",391],["T_OBJECT_OPERATOR","->",391],["T_STRING","getMediaRelativePath",391],"(",["T_VARIABLE","$newPath",391],")",";",["T_WHITESPACE","\n                ",391],["T_VARIABLE","$this",392],["T_OBJECT_OPERATOR","->",392],["T_STRING","_directoryDatabaseFactory",392],["T_OBJECT_OPERATOR","->",392],["T_STRING","create",392],"(",")",["T_OBJECT_OPERATOR","->",392],["T_STRING","createRecursive",392],"(",["T_VARIABLE","$relativePath",392],")",";",["T_WHITESPACE","\n            ",392],"}",["T_WHITESPACE","\n\n            ",393],["T_VARIABLE","$result",395],["T_WHITESPACE"," ",395],"=",["T_WHITESPACE"," ",395],"[",["T_WHITESPACE","\n                ",395],["T_CONSTANT_ENCAPSED_STRING","'name'",396],["T_WHITESPACE"," ",396],["T_DOUBLE_ARROW","=>",396],["T_WHITESPACE"," ",396],["T_VARIABLE","$name",396],",",["T_WHITESPACE","\n                ",396],["T_CONSTANT_ENCAPSED_STRING","'short_name'",397],["T_WHITESPACE"," ",397],["T_DOUBLE_ARROW","=>",397],["T_WHITESPACE"," ",397],["T_VARIABLE","$this",397],["T_OBJECT_OPERATOR","->",397],["T_STRING","_cmsWysiwygImages",397],["T_OBJECT_OPERATOR","->",397],["T_STRING","getShortFilename",397],"(",["T_VARIABLE","$name",397],")",",",["T_WHITESPACE","\n                ",397],["T_CONSTANT_ENCAPSED_STRING","'path'",398],["T_WHITESPACE"," ",398],["T_DOUBLE_ARROW","=>",398],["T_WHITESPACE"," ",398],["T_VARIABLE","$newPath",398],",",["T_WHITESPACE","\n                ",398],["T_CONSTANT_ENCAPSED_STRING","'id'",399],["T_WHITESPACE"," ",399],["T_DOUBLE_ARROW","=>",399],["T_WHITESPACE"," ",399],["T_VARIABLE","$this",399],["T_OBJECT_OPERATOR","->",399],["T_STRING","_cmsWysiwygImages",399],["T_OBJECT_OPERATOR","->",399],["T_STRING","convertPathToId",399],"(",["T_VARIABLE","$newPath",399],")",",",["T_WHITESPACE","\n            ",399],"]",";",["T_WHITESPACE","\n            ",400],["T_RETURN","return",401],["T_WHITESPACE"," ",401],["T_VARIABLE","$result",401],";",["T_WHITESPACE","\n        ",401],"}",["T_WHITESPACE"," ",402],["T_CATCH","catch",402],["T_WHITESPACE"," ",402],"(",["T_NS_SEPARATOR","\\",402],["T_STRING","Magento",402],["T_NS_SEPARATOR","\\",402],["T_STRING","Framework",402],["T_NS_SEPARATOR","\\",402],["T_STRING","Exception",402],["T_NS_SEPARATOR","\\",402],["T_STRING","FileSystemException",402],["T_WHITESPACE"," ",402],["T_VARIABLE","$e",402],")",["T_WHITESPACE"," ",402],"{",["T_WHITESPACE","\n            ",402],["T_THROW","throw",403],["T_WHITESPACE"," ",403],["T_NEW","new",403],["T_WHITESPACE"," ",403],["T_NS_SEPARATOR","\\",403],["T_STRING","Magento",403],["T_NS_SEPARATOR","\\",403],["T_STRING","Framework",403],["T_NS_SEPARATOR","\\",403],["T_STRING","Exception",403],["T_NS_SEPARATOR","\\",403],["T_STRING","LocalizedException",403],"(",["T_STRING","__",403],"(",["T_CONSTANT_ENCAPSED_STRING","'We cannot create a new directory.'",403],")",")",";",["T_WHITESPACE","\n        ",403],"}",["T_WHITESPACE","\n    ",404],"}",["T_WHITESPACE","\n\n    ",405],["T_DOC_COMMENT","\/**\n     * Recursively delete directory from storage\n     *\n     * @param string $path Target dir\n     * @return void\n     * @throws \\Magento\\Framework\\Exception\\LocalizedException\n     *\/",407],["T_WHITESPACE","\n    ",413],["T_PUBLIC","public",414],["T_WHITESPACE"," ",414],["T_FUNCTION","function",414],["T_WHITESPACE"," ",414],["T_STRING","deleteDirectory",414],"(",["T_VARIABLE","$path",414],")",["T_WHITESPACE","\n    ",414],"{",["T_WHITESPACE","\n        ",415],["T_IF","if",416],["T_WHITESPACE"," ",416],"(",["T_VARIABLE","$this",416],["T_OBJECT_OPERATOR","->",416],["T_STRING","_coreFileStorageDb",416],["T_OBJECT_OPERATOR","->",416],["T_STRING","checkDbUsage",416],"(",")",")",["T_WHITESPACE"," ",416],"{",["T_WHITESPACE","\n            ",416],["T_VARIABLE","$this",417],["T_OBJECT_OPERATOR","->",417],["T_STRING","_directoryDatabaseFactory",417],["T_OBJECT_OPERATOR","->",417],["T_STRING","create",417],"(",")",["T_OBJECT_OPERATOR","->",417],["T_STRING","deleteDirectory",417],"(",["T_VARIABLE","$path",417],")",";",["T_WHITESPACE","\n        ",417],"}",["T_WHITESPACE","\n        ",418],["T_TRY","try",419],["T_WHITESPACE"," ",419],"{",["T_WHITESPACE","\n            ",419],["T_VARIABLE","$this",420],["T_OBJECT_OPERATOR","->",420],["T_STRING","_deleteByPath",420],"(",["T_VARIABLE","$path",420],")",";",["T_WHITESPACE","\n            ",420],["T_VARIABLE","$path",421],["T_WHITESPACE"," ",421],"=",["T_WHITESPACE"," ",421],["T_VARIABLE","$this",421],["T_OBJECT_OPERATOR","->",421],["T_STRING","getThumbnailRoot",421],"(",")",["T_WHITESPACE"," ",421],".",["T_WHITESPACE"," ",421],["T_VARIABLE","$this",421],["T_OBJECT_OPERATOR","->",421],["T_STRING","_getRelativePathToRoot",421],"(",["T_VARIABLE","$path",421],")",";",["T_WHITESPACE","\n            ",421],["T_VARIABLE","$this",422],["T_OBJECT_OPERATOR","->",422],["T_STRING","_deleteByPath",422],"(",["T_VARIABLE","$path",422],")",";",["T_WHITESPACE","\n        ",422],"}",["T_WHITESPACE"," ",423],["T_CATCH","catch",423],["T_WHITESPACE"," ",423],"(",["T_NS_SEPARATOR","\\",423],["T_STRING","Magento",423],["T_NS_SEPARATOR","\\",423],["T_STRING","Framework",423],["T_NS_SEPARATOR","\\",423],["T_STRING","Exception",423],["T_NS_SEPARATOR","\\",423],["T_STRING","FileSystemException",423],["T_WHITESPACE"," ",423],["T_VARIABLE","$e",423],")",["T_WHITESPACE"," ",423],"{",["T_WHITESPACE","\n            ",423],["T_THROW","throw",424],["T_WHITESPACE"," ",424],["T_NEW","new",424],["T_WHITESPACE"," ",424],["T_NS_SEPARATOR","\\",424],["T_STRING","Magento",424],["T_NS_SEPARATOR","\\",424],["T_STRING","Framework",424],["T_NS_SEPARATOR","\\",424],["T_STRING","Exception",424],["T_NS_SEPARATOR","\\",424],["T_STRING","LocalizedException",424],"(",["T_STRING","__",424],"(",["T_CONSTANT_ENCAPSED_STRING","'We cannot delete directory %1.'",424],",",["T_WHITESPACE"," ",424],["T_VARIABLE","$path",424],")",")",";",["T_WHITESPACE","\n        ",424],"}",["T_WHITESPACE","\n    ",425],"}",["T_WHITESPACE","\n\n    ",426],["T_DOC_COMMENT","\/**\n     * Delete by path\n     *\n     * @param string $path\n     * @return void\n     *\/",428],["T_WHITESPACE","\n    ",433],["T_PROTECTED","protected",434],["T_WHITESPACE"," ",434],["T_FUNCTION","function",434],["T_WHITESPACE"," ",434],["T_STRING","_deleteByPath",434],"(",["T_VARIABLE","$path",434],")",["T_WHITESPACE","\n    ",434],"{",["T_WHITESPACE","\n        ",435],["T_VARIABLE","$path",436],["T_WHITESPACE"," ",436],"=",["T_WHITESPACE"," ",436],["T_VARIABLE","$this",436],["T_OBJECT_OPERATOR","->",436],["T_STRING","_sanitizePath",436],"(",["T_VARIABLE","$path",436],")",";",["T_WHITESPACE","\n        ",436],["T_IF","if",437],["T_WHITESPACE"," ",437],"(","!",["T_EMPTY","empty",437],"(",["T_VARIABLE","$path",437],")",")",["T_WHITESPACE"," ",437],"{",["T_WHITESPACE","\n            ",437],["T_VARIABLE","$this",438],["T_OBJECT_OPERATOR","->",438],["T_STRING","_validatePath",438],"(",["T_VARIABLE","$path",438],")",";",["T_WHITESPACE","\n            ",438],["T_VARIABLE","$this",439],["T_OBJECT_OPERATOR","->",439],["T_STRING","_directory",439],["T_OBJECT_OPERATOR","->",439],["T_STRING","delete",439],"(",["T_VARIABLE","$this",439],["T_OBJECT_OPERATOR","->",439],["T_STRING","_directory",439],["T_OBJECT_OPERATOR","->",439],["T_STRING","getRelativePath",439],"(",["T_VARIABLE","$path",439],")",")",";",["T_WHITESPACE","\n        ",439],"}",["T_WHITESPACE","\n    ",440],"}",["T_WHITESPACE","\n\n    ",441],["T_DOC_COMMENT","\/**\n     * Delete file (and its thumbnail if exists) from storage\n     *\n     * @param string $target File path to be deleted\n     * @return $this\n     *\/",443],["T_WHITESPACE","\n    ",448],["T_PUBLIC","public",449],["T_WHITESPACE"," ",449],["T_FUNCTION","function",449],["T_WHITESPACE"," ",449],["T_STRING","deleteFile",449],"(",["T_VARIABLE","$target",449],")",["T_WHITESPACE","\n    ",449],"{",["T_WHITESPACE","\n        ",450],["T_VARIABLE","$relativePath",451],["T_WHITESPACE"," ",451],"=",["T_WHITESPACE"," ",451],["T_VARIABLE","$this",451],["T_OBJECT_OPERATOR","->",451],["T_STRING","_directory",451],["T_OBJECT_OPERATOR","->",451],["T_STRING","getRelativePath",451],"(",["T_VARIABLE","$target",451],")",";",["T_WHITESPACE","\n        ",451],["T_IF","if",452],["T_WHITESPACE"," ",452],"(",["T_VARIABLE","$this",452],["T_OBJECT_OPERATOR","->",452],["T_STRING","_directory",452],["T_OBJECT_OPERATOR","->",452],["T_STRING","isFile",452],"(",["T_VARIABLE","$relativePath",452],")",")",["T_WHITESPACE"," ",452],"{",["T_WHITESPACE","\n            ",452],["T_VARIABLE","$this",453],["T_OBJECT_OPERATOR","->",453],["T_STRING","_directory",453],["T_OBJECT_OPERATOR","->",453],["T_STRING","delete",453],"(",["T_VARIABLE","$relativePath",453],")",";",["T_WHITESPACE","\n        ",453],"}",["T_WHITESPACE","\n        ",454],["T_VARIABLE","$this",455],["T_OBJECT_OPERATOR","->",455],["T_STRING","_coreFileStorageDb",455],["T_OBJECT_OPERATOR","->",455],["T_STRING","deleteFile",455],"(",["T_VARIABLE","$target",455],")",";",["T_WHITESPACE","\n\n        ",455],["T_VARIABLE","$thumb",457],["T_WHITESPACE"," ",457],"=",["T_WHITESPACE"," ",457],["T_VARIABLE","$this",457],["T_OBJECT_OPERATOR","->",457],["T_STRING","getThumbnailPath",457],"(",["T_VARIABLE","$target",457],",",["T_WHITESPACE"," ",457],["T_STRING","true",457],")",";",["T_WHITESPACE","\n        ",457],["T_VARIABLE","$relativePathThumb",458],["T_WHITESPACE"," ",458],"=",["T_WHITESPACE"," ",458],["T_VARIABLE","$this",458],["T_OBJECT_OPERATOR","->",458],["T_STRING","_directory",458],["T_OBJECT_OPERATOR","->",458],["T_STRING","getRelativePath",458],"(",["T_VARIABLE","$thumb",458],")",";",["T_WHITESPACE","\n        ",458],["T_IF","if",459],["T_WHITESPACE"," ",459],"(",["T_VARIABLE","$thumb",459],")",["T_WHITESPACE"," ",459],"{",["T_WHITESPACE","\n            ",459],["T_IF","if",460],["T_WHITESPACE"," ",460],"(",["T_VARIABLE","$this",460],["T_OBJECT_OPERATOR","->",460],["T_STRING","_directory",460],["T_OBJECT_OPERATOR","->",460],["T_STRING","isFile",460],"(",["T_VARIABLE","$relativePathThumb",460],")",")",["T_WHITESPACE"," ",460],"{",["T_WHITESPACE","\n                ",460],["T_VARIABLE","$this",461],["T_OBJECT_OPERATOR","->",461],["T_STRING","_directory",461],["T_OBJECT_OPERATOR","->",461],["T_STRING","delete",461],"(",["T_VARIABLE","$relativePathThumb",461],")",";",["T_WHITESPACE","\n            ",461],"}",["T_WHITESPACE","\n            ",462],["T_VARIABLE","$this",463],["T_OBJECT_OPERATOR","->",463],["T_STRING","_coreFileStorageDb",463],["T_OBJECT_OPERATOR","->",463],["T_STRING","deleteFile",463],"(",["T_VARIABLE","$thumb",463],")",";",["T_WHITESPACE","\n        ",463],"}",["T_WHITESPACE","\n        ",464],["T_RETURN","return",465],["T_WHITESPACE"," ",465],["T_VARIABLE","$this",465],";",["T_WHITESPACE","\n    ",465],"}",["T_WHITESPACE","\n\n    ",466],["T_DOC_COMMENT","\/**\n     * Upload and resize new file\n     *\n     * @param string $targetPath Target directory\n     * @param string $type Type of storage, e.g. image, media etc.\n     * @return array File info Array\n     * @throws \\Magento\\Framework\\Exception\\LocalizedException\n     *\/",468],["T_WHITESPACE","\n    ",475],["T_PUBLIC","public",476],["T_WHITESPACE"," ",476],["T_FUNCTION","function",476],["T_WHITESPACE"," ",476],["T_STRING","uploadFile",476],"(",["T_VARIABLE","$targetPath",476],",",["T_WHITESPACE"," ",476],["T_VARIABLE","$type",476],["T_WHITESPACE"," ",476],"=",["T_WHITESPACE"," ",476],["T_STRING","null",476],")",["T_WHITESPACE","\n    ",476],"{",["T_WHITESPACE","\n        ",477],["T_DOC_COMMENT","\/** @var \\Magento\\MediaStorage\\Model\\File\\Uploader $uploader *\/",478],["T_WHITESPACE","\n        ",478],["T_VARIABLE","$uploader",479],["T_WHITESPACE"," ",479],"=",["T_WHITESPACE"," ",479],["T_VARIABLE","$this",479],["T_OBJECT_OPERATOR","->",479],["T_STRING","_uploaderFactory",479],["T_OBJECT_OPERATOR","->",479],["T_STRING","create",479],"(","[",["T_CONSTANT_ENCAPSED_STRING","'fileId'",479],["T_WHITESPACE"," ",479],["T_DOUBLE_ARROW","=>",479],["T_WHITESPACE"," ",479],["T_CONSTANT_ENCAPSED_STRING","'image'",479],"]",")",";",["T_WHITESPACE","\n        ",479],["T_VARIABLE","$allowed",480],["T_WHITESPACE"," ",480],"=",["T_WHITESPACE"," ",480],["T_VARIABLE","$this",480],["T_OBJECT_OPERATOR","->",480],["T_STRING","getAllowedExtensions",480],"(",["T_VARIABLE","$type",480],")",";",["T_WHITESPACE","\n        ",480],["T_IF","if",481],["T_WHITESPACE"," ",481],"(",["T_VARIABLE","$allowed",481],")",["T_WHITESPACE"," ",481],"{",["T_WHITESPACE","\n            ",481],["T_VARIABLE","$uploader",482],["T_OBJECT_OPERATOR","->",482],["T_STRING","setAllowedExtensions",482],"(",["T_VARIABLE","$allowed",482],")",";",["T_WHITESPACE","\n        ",482],"}",["T_WHITESPACE","\n        ",483],["T_VARIABLE","$uploader",484],["T_OBJECT_OPERATOR","->",484],["T_STRING","setAllowRenameFiles",484],"(",["T_STRING","true",484],")",";",["T_WHITESPACE","\n        ",484],["T_VARIABLE","$uploader",485],["T_OBJECT_OPERATOR","->",485],["T_STRING","setFilesDispersion",485],"(",["T_STRING","false",485],")",";",["T_WHITESPACE","\n        ",485],["T_VARIABLE","$result",486],["T_WHITESPACE"," ",486],"=",["T_WHITESPACE"," ",486],["T_VARIABLE","$uploader",486],["T_OBJECT_OPERATOR","->",486],["T_STRING","save",486],"(",["T_VARIABLE","$targetPath",486],")",";",["T_WHITESPACE","\n\n        ",486],["T_IF","if",488],["T_WHITESPACE"," ",488],"(","!",["T_VARIABLE","$result",488],")",["T_WHITESPACE"," ",488],"{",["T_WHITESPACE","\n            ",488],["T_THROW","throw",489],["T_WHITESPACE"," ",489],["T_NEW","new",489],["T_WHITESPACE"," ",489],["T_NS_SEPARATOR","\\",489],["T_STRING","Magento",489],["T_NS_SEPARATOR","\\",489],["T_STRING","Framework",489],["T_NS_SEPARATOR","\\",489],["T_STRING","Exception",489],["T_NS_SEPARATOR","\\",489],["T_STRING","LocalizedException",489],"(",["T_STRING","__",489],"(",["T_CONSTANT_ENCAPSED_STRING","'We can\\'t upload the file right now.'",489],")",")",";",["T_WHITESPACE","\n        ",489],"}",["T_WHITESPACE","\n\n        ",490],["T_COMMENT","\/\/ create thumbnail\n",492],["T_WHITESPACE","        ",493],["T_VARIABLE","$this",493],["T_OBJECT_OPERATOR","->",493],["T_STRING","resizeFile",493],"(",["T_VARIABLE","$targetPath",493],["T_WHITESPACE"," ",493],".",["T_WHITESPACE"," ",493],["T_CONSTANT_ENCAPSED_STRING","'\/'",493],["T_WHITESPACE"," ",493],".",["T_WHITESPACE"," ",493],["T_VARIABLE","$uploader",493],["T_OBJECT_OPERATOR","->",493],["T_STRING","getUploadedFileName",493],"(",")",",",["T_WHITESPACE"," ",493],["T_STRING","true",493],")",";",["T_WHITESPACE","\n\n        ",493],["T_VARIABLE","$result",495],"[",["T_CONSTANT_ENCAPSED_STRING","'cookie'",495],"]",["T_WHITESPACE"," ",495],"=",["T_WHITESPACE"," ",495],"[",["T_WHITESPACE","\n            ",495],["T_CONSTANT_ENCAPSED_STRING","'name'",496],["T_WHITESPACE"," ",496],["T_DOUBLE_ARROW","=>",496],["T_WHITESPACE"," ",496],["T_VARIABLE","$this",496],["T_OBJECT_OPERATOR","->",496],["T_STRING","getSession",496],"(",")",["T_OBJECT_OPERATOR","->",496],["T_STRING","getName",496],"(",")",",",["T_WHITESPACE","\n            ",496],["T_CONSTANT_ENCAPSED_STRING","'value'",497],["T_WHITESPACE"," ",497],["T_DOUBLE_ARROW","=>",497],["T_WHITESPACE"," ",497],["T_VARIABLE","$this",497],["T_OBJECT_OPERATOR","->",497],["T_STRING","getSession",497],"(",")",["T_OBJECT_OPERATOR","->",497],["T_STRING","getSessionId",497],"(",")",",",["T_WHITESPACE","\n            ",497],["T_CONSTANT_ENCAPSED_STRING","'lifetime'",498],["T_WHITESPACE"," ",498],["T_DOUBLE_ARROW","=>",498],["T_WHITESPACE"," ",498],["T_VARIABLE","$this",498],["T_OBJECT_OPERATOR","->",498],["T_STRING","getSession",498],"(",")",["T_OBJECT_OPERATOR","->",498],["T_STRING","getCookieLifetime",498],"(",")",",",["T_WHITESPACE","\n            ",498],["T_CONSTANT_ENCAPSED_STRING","'path'",499],["T_WHITESPACE"," ",499],["T_DOUBLE_ARROW","=>",499],["T_WHITESPACE"," ",499],["T_VARIABLE","$this",499],["T_OBJECT_OPERATOR","->",499],["T_STRING","getSession",499],"(",")",["T_OBJECT_OPERATOR","->",499],["T_STRING","getCookiePath",499],"(",")",",",["T_WHITESPACE","\n            ",499],["T_CONSTANT_ENCAPSED_STRING","'domain'",500],["T_WHITESPACE"," ",500],["T_DOUBLE_ARROW","=>",500],["T_WHITESPACE"," ",500],["T_VARIABLE","$this",500],["T_OBJECT_OPERATOR","->",500],["T_STRING","getSession",500],"(",")",["T_OBJECT_OPERATOR","->",500],["T_STRING","getCookieDomain",500],"(",")",",",["T_WHITESPACE","\n        ",500],"]",";",["T_WHITESPACE","\n\n        ",501],["T_RETURN","return",503],["T_WHITESPACE"," ",503],["T_VARIABLE","$result",503],";",["T_WHITESPACE","\n    ",503],"}",["T_WHITESPACE","\n\n    ",504],["T_DOC_COMMENT","\/**\n     * Thumbnail path getter\n     *\n     * @param  string $filePath original file path\n     * @param  bool $checkFile OPTIONAL is it necessary to check file availability\n     * @return string|false\n     *\/",506],["T_WHITESPACE","\n    ",512],["T_PUBLIC","public",513],["T_WHITESPACE"," ",513],["T_FUNCTION","function",513],["T_WHITESPACE"," ",513],["T_STRING","getThumbnailPath",513],"(",["T_VARIABLE","$filePath",513],",",["T_WHITESPACE"," ",513],["T_VARIABLE","$checkFile",513],["T_WHITESPACE"," ",513],"=",["T_WHITESPACE"," ",513],["T_STRING","false",513],")",["T_WHITESPACE","\n    ",513],"{",["T_WHITESPACE","\n        ",514],["T_VARIABLE","$mediaRootDir",515],["T_WHITESPACE"," ",515],"=",["T_WHITESPACE"," ",515],["T_VARIABLE","$this",515],["T_OBJECT_OPERATOR","->",515],["T_STRING","_cmsWysiwygImages",515],["T_OBJECT_OPERATOR","->",515],["T_STRING","getStorageRoot",515],"(",")",";",["T_WHITESPACE","\n\n        ",515],["T_IF","if",517],["T_WHITESPACE"," ",517],"(",["T_STRING","strpos",517],"(",["T_VARIABLE","$filePath",517],",",["T_WHITESPACE"," ",517],["T_VARIABLE","$mediaRootDir",517],")",["T_WHITESPACE"," ",517],["T_IS_IDENTICAL","===",517],["T_WHITESPACE"," ",517],["T_LNUMBER","0",517],")",["T_WHITESPACE"," ",517],"{",["T_WHITESPACE","\n            ",517],["T_VARIABLE","$thumbPath",518],["T_WHITESPACE"," ",518],"=",["T_WHITESPACE"," ",518],["T_VARIABLE","$this",518],["T_OBJECT_OPERATOR","->",518],["T_STRING","getThumbnailRoot",518],"(",")",["T_WHITESPACE"," ",518],".",["T_WHITESPACE"," ",518],["T_STRING","substr",518],"(",["T_VARIABLE","$filePath",518],",",["T_WHITESPACE"," ",518],["T_STRING","strlen",518],"(",["T_VARIABLE","$mediaRootDir",518],")",")",";",["T_WHITESPACE","\n\n            ",518],["T_IF","if",520],["T_WHITESPACE"," ",520],"(","!",["T_VARIABLE","$checkFile",520],["T_WHITESPACE"," ",520],["T_BOOLEAN_OR","||",520],["T_WHITESPACE"," ",520],["T_VARIABLE","$this",520],["T_OBJECT_OPERATOR","->",520],["T_STRING","_directory",520],["T_OBJECT_OPERATOR","->",520],["T_STRING","isExist",520],"(",["T_VARIABLE","$this",520],["T_OBJECT_OPERATOR","->",520],["T_STRING","_directory",520],["T_OBJECT_OPERATOR","->",520],["T_STRING","getRelativePath",520],"(",["T_VARIABLE","$thumbPath",520],")",")",")",["T_WHITESPACE"," ",520],"{",["T_WHITESPACE","\n                ",520],["T_RETURN","return",521],["T_WHITESPACE"," ",521],["T_VARIABLE","$thumbPath",521],";",["T_WHITESPACE","\n            ",521],"}",["T_WHITESPACE","\n        ",522],"}",["T_WHITESPACE","\n\n        ",523],["T_RETURN","return",525],["T_WHITESPACE"," ",525],["T_STRING","false",525],";",["T_WHITESPACE","\n    ",525],"}",["T_WHITESPACE","\n\n    ",526],["T_DOC_COMMENT","\/**\n     * Thumbnail URL getter\n     *\n     * @param  string $filePath original file path\n     * @param  bool $checkFile OPTIONAL is it necessary to check file availability\n     * @return string|false\n     *\/",528],["T_WHITESPACE","\n    ",534],["T_PUBLIC","public",535],["T_WHITESPACE"," ",535],["T_FUNCTION","function",535],["T_WHITESPACE"," ",535],["T_STRING","getThumbnailUrl",535],"(",["T_VARIABLE","$filePath",535],",",["T_WHITESPACE"," ",535],["T_VARIABLE","$checkFile",535],["T_WHITESPACE"," ",535],"=",["T_WHITESPACE"," ",535],["T_STRING","false",535],")",["T_WHITESPACE","\n    ",535],"{",["T_WHITESPACE","\n        ",536],["T_VARIABLE","$mediaRootDir",537],["T_WHITESPACE"," ",537],"=",["T_WHITESPACE"," ",537],["T_VARIABLE","$this",537],["T_OBJECT_OPERATOR","->",537],["T_STRING","_cmsWysiwygImages",537],["T_OBJECT_OPERATOR","->",537],["T_STRING","getStorageRoot",537],"(",")",";",["T_WHITESPACE","\n\n        ",537],["T_IF","if",539],["T_WHITESPACE"," ",539],"(",["T_STRING","strpos",539],"(",["T_VARIABLE","$filePath",539],",",["T_WHITESPACE"," ",539],["T_VARIABLE","$mediaRootDir",539],")",["T_WHITESPACE"," ",539],["T_IS_IDENTICAL","===",539],["T_WHITESPACE"," ",539],["T_LNUMBER","0",539],")",["T_WHITESPACE"," ",539],"{",["T_WHITESPACE","\n            ",539],["T_VARIABLE","$thumbSuffix",540],["T_WHITESPACE"," ",540],"=",["T_WHITESPACE"," ",540],["T_STRING","self",540],["T_DOUBLE_COLON","::",540],["T_STRING","THUMBS_DIRECTORY_NAME",540],["T_WHITESPACE"," ",540],".",["T_WHITESPACE"," ",540],["T_STRING","substr",540],"(",["T_VARIABLE","$filePath",540],",",["T_WHITESPACE"," ",540],["T_STRING","strlen",540],"(",["T_VARIABLE","$mediaRootDir",540],")",")",";",["T_WHITESPACE","\n            ",540],["T_IF","if",541],["T_WHITESPACE"," ",541],"(","!",["T_VARIABLE","$checkFile",541],["T_WHITESPACE"," ",541],["T_BOOLEAN_OR","||",541],["T_WHITESPACE"," ",541],["T_VARIABLE","$this",541],["T_OBJECT_OPERATOR","->",541],["T_STRING","_directory",541],["T_OBJECT_OPERATOR","->",541],["T_STRING","isExist",541],"(",["T_WHITESPACE","\n                ",541],["T_VARIABLE","$this",542],["T_OBJECT_OPERATOR","->",542],["T_STRING","_directory",542],["T_OBJECT_OPERATOR","->",542],["T_STRING","getRelativePath",542],"(",["T_VARIABLE","$mediaRootDir",542],["T_WHITESPACE"," ",542],".",["T_WHITESPACE"," ",542],["T_CONSTANT_ENCAPSED_STRING","'\/'",542],["T_WHITESPACE"," ",542],".",["T_WHITESPACE"," ",542],["T_VARIABLE","$thumbSuffix",542],")",["T_WHITESPACE","\n            ",542],")",["T_WHITESPACE","\n            ",543],")",["T_WHITESPACE"," ",544],"{",["T_WHITESPACE","\n                ",544],["T_VARIABLE","$thumbSuffix",545],["T_WHITESPACE"," ",545],"=",["T_WHITESPACE"," ",545],["T_STRING","substr",545],"(",["T_WHITESPACE","\n                    ",545],["T_VARIABLE","$mediaRootDir",546],",",["T_WHITESPACE","\n                    ",546],["T_STRING","strlen",547],"(",["T_VARIABLE","$this",547],["T_OBJECT_OPERATOR","->",547],["T_STRING","_directory",547],["T_OBJECT_OPERATOR","->",547],["T_STRING","getAbsolutePath",547],"(",")",")",["T_WHITESPACE","\n                ",547],")",["T_WHITESPACE"," ",548],".",["T_WHITESPACE"," ",548],["T_CONSTANT_ENCAPSED_STRING","'\/'",548],["T_WHITESPACE"," ",548],".",["T_WHITESPACE"," ",548],["T_VARIABLE","$thumbSuffix",548],";",["T_WHITESPACE","\n                ",548],["T_VARIABLE","$randomIndex",549],["T_WHITESPACE"," ",549],"=",["T_WHITESPACE"," ",549],["T_CONSTANT_ENCAPSED_STRING","'?rand='",549],["T_WHITESPACE"," ",549],".",["T_WHITESPACE"," ",549],["T_STRING","time",549],"(",")",";",["T_WHITESPACE","\n                ",549],["T_RETURN","return",550],["T_WHITESPACE"," ",550],["T_STRING","str_replace",550],"(",["T_CONSTANT_ENCAPSED_STRING","'\\\\'",550],",",["T_WHITESPACE"," ",550],["T_CONSTANT_ENCAPSED_STRING","'\/'",550],",",["T_WHITESPACE"," ",550],["T_VARIABLE","$this",550],["T_OBJECT_OPERATOR","->",550],["T_STRING","_cmsWysiwygImages",550],["T_OBJECT_OPERATOR","->",550],["T_STRING","getBaseUrl",550],"(",")",["T_WHITESPACE"," ",550],".",["T_WHITESPACE"," ",550],["T_VARIABLE","$thumbSuffix",550],")",["T_WHITESPACE"," ",550],".",["T_WHITESPACE"," ",550],["T_VARIABLE","$randomIndex",550],";",["T_WHITESPACE","\n            ",550],"}",["T_WHITESPACE","\n        ",551],"}",["T_WHITESPACE","\n\n        ",552],["T_RETURN","return",554],["T_WHITESPACE"," ",554],["T_STRING","false",554],";",["T_WHITESPACE","\n    ",554],"}",["T_WHITESPACE","\n\n    ",555],["T_DOC_COMMENT","\/**\n     * Create thumbnail for image and save it to thumbnails directory\n     *\n     * @param string $source Image path to be resized\n     * @param bool $keepRation Keep aspect ratio or not\n     * @return bool|string Resized filepath or false if errors were occurred\n     *\/",557],["T_WHITESPACE","\n    ",563],["T_PUBLIC","public",564],["T_WHITESPACE"," ",564],["T_FUNCTION","function",564],["T_WHITESPACE"," ",564],["T_STRING","resizeFile",564],"(",["T_VARIABLE","$source",564],",",["T_WHITESPACE"," ",564],["T_VARIABLE","$keepRation",564],["T_WHITESPACE"," ",564],"=",["T_WHITESPACE"," ",564],["T_STRING","true",564],")",["T_WHITESPACE","\n    ",564],"{",["T_WHITESPACE","\n        ",565],["T_VARIABLE","$realPath",566],["T_WHITESPACE"," ",566],"=",["T_WHITESPACE"," ",566],["T_VARIABLE","$this",566],["T_OBJECT_OPERATOR","->",566],["T_STRING","_directory",566],["T_OBJECT_OPERATOR","->",566],["T_STRING","getRelativePath",566],"(",["T_VARIABLE","$source",566],")",";",["T_WHITESPACE","\n        ",566],["T_IF","if",567],["T_WHITESPACE"," ",567],"(","!",["T_VARIABLE","$this",567],["T_OBJECT_OPERATOR","->",567],["T_STRING","_directory",567],["T_OBJECT_OPERATOR","->",567],["T_STRING","isFile",567],"(",["T_VARIABLE","$realPath",567],")",["T_WHITESPACE"," ",567],["T_BOOLEAN_OR","||",567],["T_WHITESPACE"," ",567],"!",["T_VARIABLE","$this",567],["T_OBJECT_OPERATOR","->",567],["T_STRING","_directory",567],["T_OBJECT_OPERATOR","->",567],["T_STRING","isExist",567],"(",["T_VARIABLE","$realPath",567],")",")",["T_WHITESPACE"," ",567],"{",["T_WHITESPACE","\n            ",567],["T_RETURN","return",568],["T_WHITESPACE"," ",568],["T_STRING","false",568],";",["T_WHITESPACE","\n        ",568],"}",["T_WHITESPACE","\n\n        ",569],["T_VARIABLE","$targetDir",571],["T_WHITESPACE"," ",571],"=",["T_WHITESPACE"," ",571],["T_VARIABLE","$this",571],["T_OBJECT_OPERATOR","->",571],["T_STRING","getThumbsPath",571],"(",["T_VARIABLE","$source",571],")",";",["T_WHITESPACE","\n        ",571],["T_VARIABLE","$pathTargetDir",572],["T_WHITESPACE"," ",572],"=",["T_WHITESPACE"," ",572],["T_VARIABLE","$this",572],["T_OBJECT_OPERATOR","->",572],["T_STRING","_directory",572],["T_OBJECT_OPERATOR","->",572],["T_STRING","getRelativePath",572],"(",["T_VARIABLE","$targetDir",572],")",";",["T_WHITESPACE","\n        ",572],["T_IF","if",573],["T_WHITESPACE"," ",573],"(","!",["T_VARIABLE","$this",573],["T_OBJECT_OPERATOR","->",573],["T_STRING","_directory",573],["T_OBJECT_OPERATOR","->",573],["T_STRING","isExist",573],"(",["T_VARIABLE","$pathTargetDir",573],")",")",["T_WHITESPACE"," ",573],"{",["T_WHITESPACE","\n            ",573],["T_VARIABLE","$this",574],["T_OBJECT_OPERATOR","->",574],["T_STRING","_directory",574],["T_OBJECT_OPERATOR","->",574],["T_STRING","create",574],"(",["T_VARIABLE","$pathTargetDir",574],")",";",["T_WHITESPACE","\n        ",574],"}",["T_WHITESPACE","\n        ",575],["T_IF","if",576],["T_WHITESPACE"," ",576],"(","!",["T_VARIABLE","$this",576],["T_OBJECT_OPERATOR","->",576],["T_STRING","_directory",576],["T_OBJECT_OPERATOR","->",576],["T_STRING","isExist",576],"(",["T_VARIABLE","$pathTargetDir",576],")",")",["T_WHITESPACE"," ",576],"{",["T_WHITESPACE","\n            ",576],["T_RETURN","return",577],["T_WHITESPACE"," ",577],["T_STRING","false",577],";",["T_WHITESPACE","\n        ",577],"}",["T_WHITESPACE","\n        ",578],["T_VARIABLE","$image",579],["T_WHITESPACE"," ",579],"=",["T_WHITESPACE"," ",579],["T_VARIABLE","$this",579],["T_OBJECT_OPERATOR","->",579],["T_STRING","_imageFactory",579],["T_OBJECT_OPERATOR","->",579],["T_STRING","create",579],"(",")",";",["T_WHITESPACE","\n        ",579],["T_VARIABLE","$image",580],["T_OBJECT_OPERATOR","->",580],["T_STRING","open",580],"(",["T_VARIABLE","$source",580],")",";",["T_WHITESPACE","\n        ",580],["T_VARIABLE","$image",581],["T_OBJECT_OPERATOR","->",581],["T_STRING","keepAspectRatio",581],"(",["T_VARIABLE","$keepRation",581],")",";",["T_WHITESPACE","\n        ",581],["T_VARIABLE","$image",582],["T_OBJECT_OPERATOR","->",582],["T_STRING","resize",582],"(",["T_VARIABLE","$this",582],["T_OBJECT_OPERATOR","->",582],["T_STRING","_resizeParameters",582],"[",["T_CONSTANT_ENCAPSED_STRING","'width'",582],"]",",",["T_WHITESPACE"," ",582],["T_VARIABLE","$this",582],["T_OBJECT_OPERATOR","->",582],["T_STRING","_resizeParameters",582],"[",["T_CONSTANT_ENCAPSED_STRING","'height'",582],"]",")",";",["T_WHITESPACE","\n        ",582],["T_VARIABLE","$dest",583],["T_WHITESPACE"," ",583],"=",["T_WHITESPACE"," ",583],["T_VARIABLE","$targetDir",583],["T_WHITESPACE"," ",583],".",["T_WHITESPACE"," ",583],["T_CONSTANT_ENCAPSED_STRING","'\/'",583],["T_WHITESPACE"," ",583],".",["T_WHITESPACE"," ",583],["T_STRING","pathinfo",583],"(",["T_VARIABLE","$source",583],",",["T_WHITESPACE"," ",583],["T_STRING","PATHINFO_BASENAME",583],")",";",["T_WHITESPACE","\n        ",583],["T_VARIABLE","$image",584],["T_OBJECT_OPERATOR","->",584],["T_STRING","save",584],"(",["T_VARIABLE","$dest",584],")",";",["T_WHITESPACE","\n        ",584],["T_IF","if",585],["T_WHITESPACE"," ",585],"(",["T_VARIABLE","$this",585],["T_OBJECT_OPERATOR","->",585],["T_STRING","_directory",585],["T_OBJECT_OPERATOR","->",585],["T_STRING","isFile",585],"(",["T_VARIABLE","$this",585],["T_OBJECT_OPERATOR","->",585],["T_STRING","_directory",585],["T_OBJECT_OPERATOR","->",585],["T_STRING","getRelativePath",585],"(",["T_VARIABLE","$dest",585],")",")",")",["T_WHITESPACE"," ",585],"{",["T_WHITESPACE","\n            ",585],["T_RETURN","return",586],["T_WHITESPACE"," ",586],["T_VARIABLE","$dest",586],";",["T_WHITESPACE","\n        ",586],"}",["T_WHITESPACE","\n        ",587],["T_RETURN","return",588],["T_WHITESPACE"," ",588],["T_STRING","false",588],";",["T_WHITESPACE","\n    ",588],"}",["T_WHITESPACE","\n\n    ",589],["T_DOC_COMMENT","\/**\n     * Resize images on the fly in controller action\n     *\n     * @param string $filename File basename\n     * @return bool|string Thumbnail path or false for errors\n     *\/",591],["T_WHITESPACE","\n    ",596],["T_PUBLIC","public",597],["T_WHITESPACE"," ",597],["T_FUNCTION","function",597],["T_WHITESPACE"," ",597],["T_STRING","resizeOnTheFly",597],"(",["T_VARIABLE","$filename",597],")",["T_WHITESPACE","\n    ",597],"{",["T_WHITESPACE","\n        ",598],["T_VARIABLE","$path",599],["T_WHITESPACE"," ",599],"=",["T_WHITESPACE"," ",599],["T_VARIABLE","$this",599],["T_OBJECT_OPERATOR","->",599],["T_STRING","getSession",599],"(",")",["T_OBJECT_OPERATOR","->",599],["T_STRING","getCurrentPath",599],"(",")",";",["T_WHITESPACE","\n        ",599],["T_IF","if",600],["T_WHITESPACE"," ",600],"(","!",["T_VARIABLE","$path",600],")",["T_WHITESPACE"," ",600],"{",["T_WHITESPACE","\n            ",600],["T_VARIABLE","$path",601],["T_WHITESPACE"," ",601],"=",["T_WHITESPACE"," ",601],["T_VARIABLE","$this",601],["T_OBJECT_OPERATOR","->",601],["T_STRING","_cmsWysiwygImages",601],["T_OBJECT_OPERATOR","->",601],["T_STRING","getCurrentPath",601],"(",")",";",["T_WHITESPACE","\n        ",601],"}",["T_WHITESPACE","\n        ",602],["T_RETURN","return",603],["T_WHITESPACE"," ",603],["T_VARIABLE","$this",603],["T_OBJECT_OPERATOR","->",603],["T_STRING","resizeFile",603],"(",["T_VARIABLE","$path",603],["T_WHITESPACE"," ",603],".",["T_WHITESPACE"," ",603],["T_CONSTANT_ENCAPSED_STRING","'\/'",603],["T_WHITESPACE"," ",603],".",["T_WHITESPACE"," ",603],["T_VARIABLE","$filename",603],")",";",["T_WHITESPACE","\n    ",603],"}",["T_WHITESPACE","\n\n    ",604],["T_DOC_COMMENT","\/**\n     * Return thumbnails directory path for file\/current directory\n     *\n     * @param bool|string $filePath Path to the file\n     * @return string\n     *\/",606],["T_WHITESPACE","\n    ",611],["T_PUBLIC","public",612],["T_WHITESPACE"," ",612],["T_FUNCTION","function",612],["T_WHITESPACE"," ",612],["T_STRING","getThumbsPath",612],"(",["T_VARIABLE","$filePath",612],["T_WHITESPACE"," ",612],"=",["T_WHITESPACE"," ",612],["T_STRING","false",612],")",["T_WHITESPACE","\n    ",612],"{",["T_WHITESPACE","\n        ",613],["T_VARIABLE","$mediaRootDir",614],["T_WHITESPACE"," ",614],"=",["T_WHITESPACE"," ",614],["T_VARIABLE","$this",614],["T_OBJECT_OPERATOR","->",614],["T_STRING","_cmsWysiwygImages",614],["T_OBJECT_OPERATOR","->",614],["T_STRING","getStorageRoot",614],"(",")",";",["T_WHITESPACE","\n        ",614],["T_VARIABLE","$thumbnailDir",615],["T_WHITESPACE"," ",615],"=",["T_WHITESPACE"," ",615],["T_VARIABLE","$this",615],["T_OBJECT_OPERATOR","->",615],["T_STRING","getThumbnailRoot",615],"(",")",";",["T_WHITESPACE","\n\n        ",615],["T_IF","if",617],["T_WHITESPACE"," ",617],"(",["T_VARIABLE","$filePath",617],["T_WHITESPACE"," ",617],["T_BOOLEAN_AND","&&",617],["T_WHITESPACE"," ",617],["T_STRING","strpos",617],"(",["T_VARIABLE","$filePath",617],",",["T_WHITESPACE"," ",617],["T_VARIABLE","$mediaRootDir",617],")",["T_WHITESPACE"," ",617],["T_IS_IDENTICAL","===",617],["T_WHITESPACE"," ",617],["T_LNUMBER","0",617],")",["T_WHITESPACE"," ",617],"{",["T_WHITESPACE","\n            ",617],["T_VARIABLE","$thumbnailDir",618],["T_WHITESPACE"," ",618],["T_CONCAT_EQUAL",".=",618],["T_WHITESPACE"," ",618],["T_STRING","dirname",618],"(",["T_STRING","substr",618],"(",["T_VARIABLE","$filePath",618],",",["T_WHITESPACE"," ",618],["T_STRING","strlen",618],"(",["T_VARIABLE","$mediaRootDir",618],")",")",")",";",["T_WHITESPACE","\n        ",618],"}",["T_WHITESPACE","\n\n        ",619],["T_RETURN","return",621],["T_WHITESPACE"," ",621],["T_VARIABLE","$thumbnailDir",621],";",["T_WHITESPACE","\n    ",621],"}",["T_WHITESPACE","\n\n    ",622],["T_DOC_COMMENT","\/**\n     * Storage session\n     *\n     * @return \\Magento\\Backend\\Model\\Session\n     *\/",624],["T_WHITESPACE","\n    ",628],["T_PUBLIC","public",629],["T_WHITESPACE"," ",629],["T_FUNCTION","function",629],["T_WHITESPACE"," ",629],["T_STRING","getSession",629],"(",")",["T_WHITESPACE","\n    ",629],"{",["T_WHITESPACE","\n        ",630],["T_RETURN","return",631],["T_WHITESPACE"," ",631],["T_VARIABLE","$this",631],["T_OBJECT_OPERATOR","->",631],["T_STRING","_session",631],";",["T_WHITESPACE","\n    ",631],"}",["T_WHITESPACE","\n\n    ",632],["T_DOC_COMMENT","\/**\n     * Prepare allowed_extensions config settings\n     *\n     * @param string $type Type of storage, e.g. image, media etc.\n     * @return array Array of allowed file extensions\n     *\/",634],["T_WHITESPACE","\n    ",639],["T_PUBLIC","public",640],["T_WHITESPACE"," ",640],["T_FUNCTION","function",640],["T_WHITESPACE"," ",640],["T_STRING","getAllowedExtensions",640],"(",["T_VARIABLE","$type",640],["T_WHITESPACE"," ",640],"=",["T_WHITESPACE"," ",640],["T_STRING","null",640],")",["T_WHITESPACE","\n    ",640],"{",["T_WHITESPACE","\n        ",641],["T_IF","if",642],["T_WHITESPACE"," ",642],"(",["T_STRING","is_string",642],"(",["T_VARIABLE","$type",642],")",["T_WHITESPACE"," ",642],["T_BOOLEAN_AND","&&",642],["T_WHITESPACE"," ",642],["T_STRING","array_key_exists",642],"(","\"",["T_CURLY_OPEN","{",642],["T_VARIABLE","$type",642],"}",["T_ENCAPSED_AND_WHITESPACE","_allowed",642],"\"",",",["T_WHITESPACE"," ",642],["T_VARIABLE","$this",642],["T_OBJECT_OPERATOR","->",642],["T_STRING","_extensions",642],")",")",["T_WHITESPACE"," ",642],"{",["T_WHITESPACE","\n            ",642],["T_VARIABLE","$allowed",643],["T_WHITESPACE"," ",643],"=",["T_WHITESPACE"," ",643],["T_VARIABLE","$this",643],["T_OBJECT_OPERATOR","->",643],["T_STRING","_extensions",643],"[","\"",["T_CURLY_OPEN","{",643],["T_VARIABLE","$type",643],"}",["T_ENCAPSED_AND_WHITESPACE","_allowed",643],"\"","]",";",["T_WHITESPACE","\n        ",643],"}",["T_WHITESPACE"," ",644],["T_ELSE","else",644],["T_WHITESPACE"," ",644],"{",["T_WHITESPACE","\n            ",644],["T_VARIABLE","$allowed",645],["T_WHITESPACE"," ",645],"=",["T_WHITESPACE"," ",645],["T_VARIABLE","$this",645],["T_OBJECT_OPERATOR","->",645],["T_STRING","_extensions",645],"[",["T_CONSTANT_ENCAPSED_STRING","'allowed'",645],"]",";",["T_WHITESPACE","\n        ",645],"}",["T_WHITESPACE","\n\n        ",646],["T_RETURN","return",648],["T_WHITESPACE"," ",648],["T_STRING","array_keys",648],"(",["T_STRING","array_filter",648],"(",["T_VARIABLE","$allowed",648],")",")",";",["T_WHITESPACE","\n    ",648],"}",["T_WHITESPACE","\n\n    ",649],["T_DOC_COMMENT","\/**\n     * Thumbnail root directory getter\n     *\n     * @return string\n     *\/",651],["T_WHITESPACE","\n    ",655],["T_PUBLIC","public",656],["T_WHITESPACE"," ",656],["T_FUNCTION","function",656],["T_WHITESPACE"," ",656],["T_STRING","getThumbnailRoot",656],"(",")",["T_WHITESPACE","\n    ",656],"{",["T_WHITESPACE","\n        ",657],["T_RETURN","return",658],["T_WHITESPACE"," ",658],["T_VARIABLE","$this",658],["T_OBJECT_OPERATOR","->",658],["T_STRING","_cmsWysiwygImages",658],["T_OBJECT_OPERATOR","->",658],["T_STRING","getStorageRoot",658],"(",")",["T_WHITESPACE"," ",658],".",["T_WHITESPACE"," ",658],["T_CONSTANT_ENCAPSED_STRING","'\/'",658],["T_WHITESPACE"," ",658],".",["T_WHITESPACE"," ",658],["T_STRING","self",658],["T_DOUBLE_COLON","::",658],["T_STRING","THUMBS_DIRECTORY_NAME",658],";",["T_WHITESPACE","\n    ",658],"}",["T_WHITESPACE","\n\n    ",659],["T_DOC_COMMENT","\/**\n     * Simple way to check whether file is image or not based on extension\n     *\n     * @param string $filename\n     * @return bool\n     *\/",661],["T_WHITESPACE","\n    ",666],["T_PUBLIC","public",667],["T_WHITESPACE"," ",667],["T_FUNCTION","function",667],["T_WHITESPACE"," ",667],["T_STRING","isImage",667],"(",["T_VARIABLE","$filename",667],")",["T_WHITESPACE","\n    ",667],"{",["T_WHITESPACE","\n        ",668],["T_IF","if",669],["T_WHITESPACE"," ",669],"(","!",["T_VARIABLE","$this",669],["T_OBJECT_OPERATOR","->",669],["T_STRING","hasData",669],"(",["T_CONSTANT_ENCAPSED_STRING","'_image_extensions'",669],")",")",["T_WHITESPACE"," ",669],"{",["T_WHITESPACE","\n            ",669],["T_VARIABLE","$this",670],["T_OBJECT_OPERATOR","->",670],["T_STRING","setData",670],"(",["T_CONSTANT_ENCAPSED_STRING","'_image_extensions'",670],",",["T_WHITESPACE"," ",670],["T_VARIABLE","$this",670],["T_OBJECT_OPERATOR","->",670],["T_STRING","getAllowedExtensions",670],"(",["T_CONSTANT_ENCAPSED_STRING","'image'",670],")",")",";",["T_WHITESPACE","\n        ",670],"}",["T_WHITESPACE","\n        ",671],["T_VARIABLE","$ext",672],["T_WHITESPACE"," ",672],"=",["T_WHITESPACE"," ",672],["T_STRING","strtolower",672],"(",["T_STRING","pathinfo",672],"(",["T_VARIABLE","$filename",672],",",["T_WHITESPACE"," ",672],["T_STRING","PATHINFO_EXTENSION",672],")",")",";",["T_WHITESPACE","\n        ",672],["T_RETURN","return",673],["T_WHITESPACE"," ",673],["T_STRING","in_array",673],"(",["T_VARIABLE","$ext",673],",",["T_WHITESPACE"," ",673],["T_VARIABLE","$this",673],["T_OBJECT_OPERATOR","->",673],["T_STRING","_getData",673],"(",["T_CONSTANT_ENCAPSED_STRING","'_image_extensions'",673],")",")",";",["T_WHITESPACE","\n    ",673],"}",["T_WHITESPACE","\n\n    ",674],["T_DOC_COMMENT","\/**\n     * Get resize width\n     *\n     * @return int\n     *\/",676],["T_WHITESPACE","\n    ",680],["T_PUBLIC","public",681],["T_WHITESPACE"," ",681],["T_FUNCTION","function",681],["T_WHITESPACE"," ",681],["T_STRING","getResizeWidth",681],"(",")",["T_WHITESPACE","\n    ",681],"{",["T_WHITESPACE","\n        ",682],["T_RETURN","return",683],["T_WHITESPACE"," ",683],["T_VARIABLE","$this",683],["T_OBJECT_OPERATOR","->",683],["T_STRING","_resizeParameters",683],"[",["T_CONSTANT_ENCAPSED_STRING","'width'",683],"]",";",["T_WHITESPACE","\n    ",683],"}",["T_WHITESPACE","\n\n    ",684],["T_DOC_COMMENT","\/**\n     * Get resize height\n     *\n     * @return int\n     *\/",686],["T_WHITESPACE","\n    ",690],["T_PUBLIC","public",691],["T_WHITESPACE"," ",691],["T_FUNCTION","function",691],["T_WHITESPACE"," ",691],["T_STRING","getResizeHeight",691],"(",")",["T_WHITESPACE","\n    ",691],"{",["T_WHITESPACE","\n        ",692],["T_RETURN","return",693],["T_WHITESPACE"," ",693],["T_VARIABLE","$this",693],["T_OBJECT_OPERATOR","->",693],["T_STRING","_resizeParameters",693],"[",["T_CONSTANT_ENCAPSED_STRING","'height'",693],"]",";",["T_WHITESPACE","\n    ",693],"}",["T_WHITESPACE","\n\n    ",694],["T_DOC_COMMENT","\/**\n     * Get cms wysiwyg images helper\n     *\n     * @return Images|null\n     *\/",696],["T_WHITESPACE","\n    ",700],["T_PUBLIC","public",701],["T_WHITESPACE"," ",701],["T_FUNCTION","function",701],["T_WHITESPACE"," ",701],["T_STRING","getCmsWysiwygImages",701],"(",")",["T_WHITESPACE","\n    ",701],"{",["T_WHITESPACE","\n        ",702],["T_RETURN","return",703],["T_WHITESPACE"," ",703],["T_VARIABLE","$this",703],["T_OBJECT_OPERATOR","->",703],["T_STRING","_cmsWysiwygImages",703],";",["T_WHITESPACE","\n    ",703],"}",["T_WHITESPACE","\n\n    ",704],["T_DOC_COMMENT","\/**\n     * Is path under storage root directory\n     *\n     * @param string $path\n     * @return void\n     * @throws \\Magento\\Framework\\Exception\\LocalizedException\n     *\/",706],["T_WHITESPACE","\n    ",712],["T_PROTECTED","protected",713],["T_WHITESPACE"," ",713],["T_FUNCTION","function",713],["T_WHITESPACE"," ",713],["T_STRING","_validatePath",713],"(",["T_VARIABLE","$path",713],")",["T_WHITESPACE","\n    ",713],"{",["T_WHITESPACE","\n        ",714],["T_VARIABLE","$root",715],["T_WHITESPACE"," ",715],"=",["T_WHITESPACE"," ",715],["T_VARIABLE","$this",715],["T_OBJECT_OPERATOR","->",715],["T_STRING","_sanitizePath",715],"(",["T_VARIABLE","$this",715],["T_OBJECT_OPERATOR","->",715],["T_STRING","_cmsWysiwygImages",715],["T_OBJECT_OPERATOR","->",715],["T_STRING","getStorageRoot",715],"(",")",")",";",["T_WHITESPACE","\n        ",715],["T_IF","if",716],["T_WHITESPACE"," ",716],"(",["T_VARIABLE","$root",716],["T_WHITESPACE"," ",716],["T_IS_EQUAL","==",716],["T_WHITESPACE"," ",716],["T_VARIABLE","$path",716],")",["T_WHITESPACE"," ",716],"{",["T_WHITESPACE","\n            ",716],["T_THROW","throw",717],["T_WHITESPACE"," ",717],["T_NEW","new",717],["T_WHITESPACE"," ",717],["T_NS_SEPARATOR","\\",717],["T_STRING","Magento",717],["T_NS_SEPARATOR","\\",717],["T_STRING","Framework",717],["T_NS_SEPARATOR","\\",717],["T_STRING","Exception",717],["T_NS_SEPARATOR","\\",717],["T_STRING","LocalizedException",717],"(",["T_WHITESPACE","\n                ",717],["T_STRING","__",718],"(",["T_CONSTANT_ENCAPSED_STRING","'We can\\'t delete root directory %1 right now.'",718],",",["T_WHITESPACE"," ",718],["T_VARIABLE","$path",718],")",["T_WHITESPACE","\n            ",718],")",";",["T_WHITESPACE","\n        ",719],"}",["T_WHITESPACE","\n        ",720],["T_IF","if",721],["T_WHITESPACE"," ",721],"(",["T_STRING","strpos",721],"(",["T_VARIABLE","$path",721],",",["T_WHITESPACE"," ",721],["T_VARIABLE","$root",721],")",["T_WHITESPACE"," ",721],["T_IS_NOT_IDENTICAL","!==",721],["T_WHITESPACE"," ",721],["T_LNUMBER","0",721],")",["T_WHITESPACE"," ",721],"{",["T_WHITESPACE","\n            ",721],["T_THROW","throw",722],["T_WHITESPACE"," ",722],["T_NEW","new",722],["T_WHITESPACE"," ",722],["T_NS_SEPARATOR","\\",722],["T_STRING","Magento",722],["T_NS_SEPARATOR","\\",722],["T_STRING","Framework",722],["T_NS_SEPARATOR","\\",722],["T_STRING","Exception",722],["T_NS_SEPARATOR","\\",722],["T_STRING","LocalizedException",722],"(",["T_WHITESPACE","\n                ",722],["T_STRING","__",723],"(",["T_CONSTANT_ENCAPSED_STRING","'Directory %1 is not under storage root path.'",723],",",["T_WHITESPACE"," ",723],["T_VARIABLE","$path",723],")",["T_WHITESPACE","\n            ",723],")",";",["T_WHITESPACE","\n        ",724],"}",["T_WHITESPACE","\n    ",725],"}",["T_WHITESPACE","\n\n    ",726],["T_DOC_COMMENT","\/**\n     * Sanitize path\n     *\n     * @param string $path\n     * @return string\n     *\/",728],["T_WHITESPACE","\n    ",733],["T_PROTECTED","protected",734],["T_WHITESPACE"," ",734],["T_FUNCTION","function",734],["T_WHITESPACE"," ",734],["T_STRING","_sanitizePath",734],"(",["T_VARIABLE","$path",734],")",["T_WHITESPACE","\n    ",734],"{",["T_WHITESPACE","\n        ",735],["T_RETURN","return",736],["T_WHITESPACE"," ",736],["T_STRING","rtrim",736],"(",["T_STRING","preg_replace",736],"(",["T_CONSTANT_ENCAPSED_STRING","'~[\/\\\\\\]+~'",736],",",["T_WHITESPACE"," ",736],["T_CONSTANT_ENCAPSED_STRING","'\/'",736],",",["T_WHITESPACE"," ",736],["T_VARIABLE","$this",736],["T_OBJECT_OPERATOR","->",736],["T_STRING","_directory",736],["T_OBJECT_OPERATOR","->",736],["T_STRING","getDriver",736],"(",")",["T_OBJECT_OPERATOR","->",736],["T_STRING","getRealPath",736],"(",["T_VARIABLE","$path",736],")",")",",",["T_WHITESPACE"," ",736],["T_CONSTANT_ENCAPSED_STRING","'\/'",736],")",";",["T_WHITESPACE","\n    ",736],"}",["T_WHITESPACE","\n\n    ",737],["T_DOC_COMMENT","\/**\n     * Get path in root storage dir\n     *\n     * @param string $path\n     * @return string|bool\n     *\/",739],["T_WHITESPACE","\n    ",744],["T_PROTECTED","protected",745],["T_WHITESPACE"," ",745],["T_FUNCTION","function",745],["T_WHITESPACE"," ",745],["T_STRING","_getRelativePathToRoot",745],"(",["T_VARIABLE","$path",745],")",["T_WHITESPACE","\n    ",745],"{",["T_WHITESPACE","\n        ",746],["T_RETURN","return",747],["T_WHITESPACE"," ",747],["T_STRING","substr",747],"(",["T_WHITESPACE","\n            ",747],["T_VARIABLE","$this",748],["T_OBJECT_OPERATOR","->",748],["T_STRING","_sanitizePath",748],"(",["T_VARIABLE","$path",748],")",",",["T_WHITESPACE","\n            ",748],["T_STRING","strlen",749],"(",["T_VARIABLE","$this",749],["T_OBJECT_OPERATOR","->",749],["T_STRING","_sanitizePath",749],"(",["T_VARIABLE","$this",749],["T_OBJECT_OPERATOR","->",749],["T_STRING","_cmsWysiwygImages",749],["T_OBJECT_OPERATOR","->",749],["T_STRING","getStorageRoot",749],"(",")",")",")",["T_WHITESPACE","\n        ",749],")",";",["T_WHITESPACE","\n    ",750],"}",["T_WHITESPACE","\n",751],"}",["T_WHITESPACE","\n",752]]
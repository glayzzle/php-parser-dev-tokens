[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n *\n * Copyright \u00c2\u00a9 2013-2017 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n *\/",2],["T_WHITESPACE","\n",6],["T_NAMESPACE","namespace",7],["T_WHITESPACE"," ",7],["T_STRING","Magento",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Shipping",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Controller",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Adminhtml",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Order",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Shipment",7],";",["T_WHITESPACE","\n\n",7],["T_USE","use",9],["T_WHITESPACE"," ",9],["T_STRING","Magento",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Sales",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Model",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Order",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Email",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Sender",9],["T_NS_SEPARATOR","\\",9],["T_STRING","ShipmentCommentSender",9],";",["T_WHITESPACE","\n",9],["T_USE","use",10],["T_WHITESPACE"," ",10],["T_STRING","Magento",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Backend",10],["T_NS_SEPARATOR","\\",10],["T_STRING","App",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Action",10],";",["T_WHITESPACE","\n",10],["T_USE","use",11],["T_WHITESPACE"," ",11],["T_STRING","Magento",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Framework",11],["T_NS_SEPARATOR","\\",11],["T_STRING","View",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Result",11],["T_NS_SEPARATOR","\\",11],["T_STRING","LayoutFactory",11],";",["T_WHITESPACE","\n\n",11],["T_CLASS","class",13],["T_WHITESPACE"," ",13],["T_STRING","AddComment",13],["T_WHITESPACE"," ",13],["T_EXTENDS","extends",13],["T_WHITESPACE"," ",13],["T_NS_SEPARATOR","\\",13],["T_STRING","Magento",13],["T_NS_SEPARATOR","\\",13],["T_STRING","Backend",13],["T_NS_SEPARATOR","\\",13],["T_STRING","App",13],["T_NS_SEPARATOR","\\",13],["T_STRING","Action",13],["T_WHITESPACE","\n",13],"{",["T_WHITESPACE","\n    ",14],["T_DOC_COMMENT","\/**\n     * Authorization level of a basic admin session\n     *\n     * @see _isAllowed()\n     *\/",15],["T_WHITESPACE","\n    ",19],["T_CONST","const",20],["T_WHITESPACE"," ",20],["T_STRING","ADMIN_RESOURCE",20],["T_WHITESPACE"," ",20],"=",["T_WHITESPACE"," ",20],["T_CONSTANT_ENCAPSED_STRING","'Magento_Sales::shipment'",20],";",["T_WHITESPACE","\n\n    ",20],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Shipping\\Controller\\Adminhtml\\Order\\ShipmentLoader\n     *\/",22],["T_WHITESPACE","\n    ",24],["T_PROTECTED","protected",25],["T_WHITESPACE"," ",25],["T_VARIABLE","$shipmentLoader",25],";",["T_WHITESPACE","\n\n    ",25],["T_DOC_COMMENT","\/**\n     * @var ShipmentCommentSender\n     *\/",27],["T_WHITESPACE","\n    ",29],["T_PROTECTED","protected",30],["T_WHITESPACE"," ",30],["T_VARIABLE","$shipmentCommentSender",30],";",["T_WHITESPACE","\n\n    ",30],["T_DOC_COMMENT","\/**\n     * @var LayoutFactory\n     *\/",32],["T_WHITESPACE","\n    ",34],["T_PROTECTED","protected",35],["T_WHITESPACE"," ",35],["T_VARIABLE","$resultLayoutFactory",35],";",["T_WHITESPACE","\n\n    ",35],["T_DOC_COMMENT","\/**\n     * @param Action\\Context $context\n     * @param \\Magento\\Shipping\\Controller\\Adminhtml\\Order\\ShipmentLoader $shipmentLoader\n     * @param ShipmentCommentSender $shipmentCommentSender\n     * @param LayoutFactory $resultLayoutFactory\n     *\/",37],["T_WHITESPACE","\n    ",42],["T_PUBLIC","public",43],["T_WHITESPACE"," ",43],["T_FUNCTION","function",43],["T_WHITESPACE"," ",43],["T_STRING","__construct",43],"(",["T_WHITESPACE","\n        ",43],["T_STRING","Action",44],["T_NS_SEPARATOR","\\",44],["T_STRING","Context",44],["T_WHITESPACE"," ",44],["T_VARIABLE","$context",44],",",["T_WHITESPACE","\n        ",44],["T_NS_SEPARATOR","\\",45],["T_STRING","Magento",45],["T_NS_SEPARATOR","\\",45],["T_STRING","Shipping",45],["T_NS_SEPARATOR","\\",45],["T_STRING","Controller",45],["T_NS_SEPARATOR","\\",45],["T_STRING","Adminhtml",45],["T_NS_SEPARATOR","\\",45],["T_STRING","Order",45],["T_NS_SEPARATOR","\\",45],["T_STRING","ShipmentLoader",45],["T_WHITESPACE"," ",45],["T_VARIABLE","$shipmentLoader",45],",",["T_WHITESPACE","\n        ",45],["T_STRING","ShipmentCommentSender",46],["T_WHITESPACE"," ",46],["T_VARIABLE","$shipmentCommentSender",46],",",["T_WHITESPACE","\n        ",46],["T_STRING","LayoutFactory",47],["T_WHITESPACE"," ",47],["T_VARIABLE","$resultLayoutFactory",47],["T_WHITESPACE","\n    ",47],")",["T_WHITESPACE"," ",48],"{",["T_WHITESPACE","\n        ",48],["T_VARIABLE","$this",49],["T_OBJECT_OPERATOR","->",49],["T_STRING","shipmentLoader",49],["T_WHITESPACE"," ",49],"=",["T_WHITESPACE"," ",49],["T_VARIABLE","$shipmentLoader",49],";",["T_WHITESPACE","\n        ",49],["T_VARIABLE","$this",50],["T_OBJECT_OPERATOR","->",50],["T_STRING","shipmentCommentSender",50],["T_WHITESPACE"," ",50],"=",["T_WHITESPACE"," ",50],["T_VARIABLE","$shipmentCommentSender",50],";",["T_WHITESPACE","\n        ",50],["T_VARIABLE","$this",51],["T_OBJECT_OPERATOR","->",51],["T_STRING","resultLayoutFactory",51],["T_WHITESPACE"," ",51],"=",["T_WHITESPACE"," ",51],["T_VARIABLE","$resultLayoutFactory",51],";",["T_WHITESPACE","\n        ",51],["T_STRING","parent",52],["T_DOUBLE_COLON","::",52],["T_STRING","__construct",52],"(",["T_VARIABLE","$context",52],")",";",["T_WHITESPACE","\n    ",52],"}",["T_WHITESPACE","\n\n    ",53],["T_DOC_COMMENT","\/**\n     * Add comment to shipment history\n     *\n     * @return void\n     *\/",55],["T_WHITESPACE","\n    ",59],["T_PUBLIC","public",60],["T_WHITESPACE"," ",60],["T_FUNCTION","function",60],["T_WHITESPACE"," ",60],["T_STRING","execute",60],"(",")",["T_WHITESPACE","\n    ",60],"{",["T_WHITESPACE","\n        ",61],["T_TRY","try",62],["T_WHITESPACE"," ",62],"{",["T_WHITESPACE","\n            ",62],["T_VARIABLE","$this",63],["T_OBJECT_OPERATOR","->",63],["T_STRING","getRequest",63],"(",")",["T_OBJECT_OPERATOR","->",63],["T_STRING","setParam",63],"(",["T_CONSTANT_ENCAPSED_STRING","'shipment_id'",63],",",["T_WHITESPACE"," ",63],["T_VARIABLE","$this",63],["T_OBJECT_OPERATOR","->",63],["T_STRING","getRequest",63],"(",")",["T_OBJECT_OPERATOR","->",63],["T_STRING","getParam",63],"(",["T_CONSTANT_ENCAPSED_STRING","'id'",63],")",")",";",["T_WHITESPACE","\n            ",63],["T_VARIABLE","$data",64],["T_WHITESPACE"," ",64],"=",["T_WHITESPACE"," ",64],["T_VARIABLE","$this",64],["T_OBJECT_OPERATOR","->",64],["T_STRING","getRequest",64],"(",")",["T_OBJECT_OPERATOR","->",64],["T_STRING","getPost",64],"(",["T_CONSTANT_ENCAPSED_STRING","'comment'",64],")",";",["T_WHITESPACE","\n            ",64],["T_IF","if",65],["T_WHITESPACE"," ",65],"(",["T_EMPTY","empty",65],"(",["T_VARIABLE","$data",65],"[",["T_CONSTANT_ENCAPSED_STRING","'comment'",65],"]",")",")",["T_WHITESPACE"," ",65],"{",["T_WHITESPACE","\n                ",65],["T_THROW","throw",66],["T_WHITESPACE"," ",66],["T_NEW","new",66],["T_WHITESPACE"," ",66],["T_NS_SEPARATOR","\\",66],["T_STRING","Magento",66],["T_NS_SEPARATOR","\\",66],["T_STRING","Framework",66],["T_NS_SEPARATOR","\\",66],["T_STRING","Exception",66],["T_NS_SEPARATOR","\\",66],["T_STRING","LocalizedException",66],"(",["T_WHITESPACE","\n                    ",66],["T_STRING","__",67],"(",["T_CONSTANT_ENCAPSED_STRING","'Please enter a comment.'",67],")",["T_WHITESPACE","\n                ",67],")",";",["T_WHITESPACE","\n            ",68],"}",["T_WHITESPACE","\n            ",69],["T_VARIABLE","$this",70],["T_OBJECT_OPERATOR","->",70],["T_STRING","shipmentLoader",70],["T_OBJECT_OPERATOR","->",70],["T_STRING","setOrderId",70],"(",["T_VARIABLE","$this",70],["T_OBJECT_OPERATOR","->",70],["T_STRING","getRequest",70],"(",")",["T_OBJECT_OPERATOR","->",70],["T_STRING","getParam",70],"(",["T_CONSTANT_ENCAPSED_STRING","'order_id'",70],")",")",";",["T_WHITESPACE","\n            ",70],["T_VARIABLE","$this",71],["T_OBJECT_OPERATOR","->",71],["T_STRING","shipmentLoader",71],["T_OBJECT_OPERATOR","->",71],["T_STRING","setShipmentId",71],"(",["T_VARIABLE","$this",71],["T_OBJECT_OPERATOR","->",71],["T_STRING","getRequest",71],"(",")",["T_OBJECT_OPERATOR","->",71],["T_STRING","getParam",71],"(",["T_CONSTANT_ENCAPSED_STRING","'shipment_id'",71],")",")",";",["T_WHITESPACE","\n            ",71],["T_VARIABLE","$this",72],["T_OBJECT_OPERATOR","->",72],["T_STRING","shipmentLoader",72],["T_OBJECT_OPERATOR","->",72],["T_STRING","setShipment",72],"(",["T_VARIABLE","$this",72],["T_OBJECT_OPERATOR","->",72],["T_STRING","getRequest",72],"(",")",["T_OBJECT_OPERATOR","->",72],["T_STRING","getParam",72],"(",["T_CONSTANT_ENCAPSED_STRING","'shipment'",72],")",")",";",["T_WHITESPACE","\n            ",72],["T_VARIABLE","$this",73],["T_OBJECT_OPERATOR","->",73],["T_STRING","shipmentLoader",73],["T_OBJECT_OPERATOR","->",73],["T_STRING","setTracking",73],"(",["T_VARIABLE","$this",73],["T_OBJECT_OPERATOR","->",73],["T_STRING","getRequest",73],"(",")",["T_OBJECT_OPERATOR","->",73],["T_STRING","getParam",73],"(",["T_CONSTANT_ENCAPSED_STRING","'tracking'",73],")",")",";",["T_WHITESPACE","\n            ",73],["T_VARIABLE","$shipment",74],["T_WHITESPACE"," ",74],"=",["T_WHITESPACE"," ",74],["T_VARIABLE","$this",74],["T_OBJECT_OPERATOR","->",74],["T_STRING","shipmentLoader",74],["T_OBJECT_OPERATOR","->",74],["T_STRING","load",74],"(",")",";",["T_WHITESPACE","\n            ",74],["T_VARIABLE","$shipment",75],["T_OBJECT_OPERATOR","->",75],["T_STRING","addComment",75],"(",["T_WHITESPACE","\n                ",75],["T_VARIABLE","$data",76],"[",["T_CONSTANT_ENCAPSED_STRING","'comment'",76],"]",",",["T_WHITESPACE","\n                ",76],["T_ISSET","isset",77],"(",["T_VARIABLE","$data",77],"[",["T_CONSTANT_ENCAPSED_STRING","'is_customer_notified'",77],"]",")",",",["T_WHITESPACE","\n                ",77],["T_ISSET","isset",78],"(",["T_VARIABLE","$data",78],"[",["T_CONSTANT_ENCAPSED_STRING","'is_visible_on_front'",78],"]",")",["T_WHITESPACE","\n            ",78],")",";",["T_WHITESPACE","\n\n            ",79],["T_VARIABLE","$this",81],["T_OBJECT_OPERATOR","->",81],["T_STRING","shipmentCommentSender",81],["T_OBJECT_OPERATOR","->",81],["T_STRING","send",81],"(",["T_VARIABLE","$shipment",81],",",["T_WHITESPACE"," ",81],"!",["T_EMPTY","empty",81],"(",["T_VARIABLE","$data",81],"[",["T_CONSTANT_ENCAPSED_STRING","'is_customer_notified'",81],"]",")",",",["T_WHITESPACE"," ",81],["T_VARIABLE","$data",81],"[",["T_CONSTANT_ENCAPSED_STRING","'comment'",81],"]",")",";",["T_WHITESPACE","\n            ",81],["T_VARIABLE","$shipment",82],["T_OBJECT_OPERATOR","->",82],["T_STRING","save",82],"(",")",";",["T_WHITESPACE","\n            ",82],["T_VARIABLE","$resultLayout",83],["T_WHITESPACE"," ",83],"=",["T_WHITESPACE"," ",83],["T_VARIABLE","$this",83],["T_OBJECT_OPERATOR","->",83],["T_STRING","resultLayoutFactory",83],["T_OBJECT_OPERATOR","->",83],["T_STRING","create",83],"(",")",";",["T_WHITESPACE","\n            ",83],["T_VARIABLE","$resultLayout",84],["T_OBJECT_OPERATOR","->",84],["T_STRING","addDefaultHandle",84],"(",")",";",["T_WHITESPACE","\n            ",84],["T_VARIABLE","$response",85],["T_WHITESPACE"," ",85],"=",["T_WHITESPACE"," ",85],["T_VARIABLE","$resultLayout",85],["T_OBJECT_OPERATOR","->",85],["T_STRING","getLayout",85],"(",")",["T_OBJECT_OPERATOR","->",85],["T_STRING","getBlock",85],"(",["T_CONSTANT_ENCAPSED_STRING","'shipment_comments'",85],")",["T_OBJECT_OPERATOR","->",85],["T_STRING","toHtml",85],"(",")",";",["T_WHITESPACE","\n        ",85],"}",["T_WHITESPACE"," ",86],["T_CATCH","catch",86],["T_WHITESPACE"," ",86],"(",["T_NS_SEPARATOR","\\",86],["T_STRING","Magento",86],["T_NS_SEPARATOR","\\",86],["T_STRING","Framework",86],["T_NS_SEPARATOR","\\",86],["T_STRING","Exception",86],["T_NS_SEPARATOR","\\",86],["T_STRING","LocalizedException",86],["T_WHITESPACE"," ",86],["T_VARIABLE","$e",86],")",["T_WHITESPACE"," ",86],"{",["T_WHITESPACE","\n            ",86],["T_VARIABLE","$response",87],["T_WHITESPACE"," ",87],"=",["T_WHITESPACE"," ",87],"[",["T_CONSTANT_ENCAPSED_STRING","'error'",87],["T_WHITESPACE"," ",87],["T_DOUBLE_ARROW","=>",87],["T_WHITESPACE"," ",87],["T_STRING","true",87],",",["T_WHITESPACE"," ",87],["T_CONSTANT_ENCAPSED_STRING","'message'",87],["T_WHITESPACE"," ",87],["T_DOUBLE_ARROW","=>",87],["T_WHITESPACE"," ",87],["T_VARIABLE","$e",87],["T_OBJECT_OPERATOR","->",87],["T_STRING","getMessage",87],"(",")","]",";",["T_WHITESPACE","\n        ",87],"}",["T_WHITESPACE"," ",88],["T_CATCH","catch",88],["T_WHITESPACE"," ",88],"(",["T_NS_SEPARATOR","\\",88],["T_STRING","Exception",88],["T_WHITESPACE"," ",88],["T_VARIABLE","$e",88],")",["T_WHITESPACE"," ",88],"{",["T_WHITESPACE","\n            ",88],["T_VARIABLE","$response",89],["T_WHITESPACE"," ",89],"=",["T_WHITESPACE"," ",89],"[",["T_CONSTANT_ENCAPSED_STRING","'error'",89],["T_WHITESPACE"," ",89],["T_DOUBLE_ARROW","=>",89],["T_WHITESPACE"," ",89],["T_STRING","true",89],",",["T_WHITESPACE"," ",89],["T_CONSTANT_ENCAPSED_STRING","'message'",89],["T_WHITESPACE"," ",89],["T_DOUBLE_ARROW","=>",89],["T_WHITESPACE"," ",89],["T_STRING","__",89],"(",["T_CONSTANT_ENCAPSED_STRING","'Cannot add new comment.'",89],")","]",";",["T_WHITESPACE","\n        ",89],"}",["T_WHITESPACE","\n        ",90],["T_IF","if",91],["T_WHITESPACE"," ",91],"(",["T_STRING","is_array",91],"(",["T_VARIABLE","$response",91],")",")",["T_WHITESPACE"," ",91],"{",["T_WHITESPACE","\n            ",91],["T_VARIABLE","$response",92],["T_WHITESPACE"," ",92],"=",["T_WHITESPACE"," ",92],["T_VARIABLE","$this",92],["T_OBJECT_OPERATOR","->",92],["T_STRING","_objectManager",92],["T_OBJECT_OPERATOR","->",92],["T_STRING","get",92],"(",["T_NS_SEPARATOR","\\",92],["T_STRING","Magento",92],["T_NS_SEPARATOR","\\",92],["T_STRING","Framework",92],["T_NS_SEPARATOR","\\",92],["T_STRING","Json",92],["T_NS_SEPARATOR","\\",92],["T_STRING","Helper",92],["T_NS_SEPARATOR","\\",92],["T_STRING","Data",92],["T_DOUBLE_COLON","::",92],["T_CLASS","class",92],")",["T_OBJECT_OPERATOR","->",92],["T_STRING","jsonEncode",92],"(",["T_VARIABLE","$response",92],")",";",["T_WHITESPACE","\n            ",92],["T_VARIABLE","$this",93],["T_OBJECT_OPERATOR","->",93],["T_STRING","getResponse",93],"(",")",["T_OBJECT_OPERATOR","->",93],["T_STRING","representJson",93],"(",["T_VARIABLE","$response",93],")",";",["T_WHITESPACE","\n        ",93],"}",["T_WHITESPACE"," ",94],["T_ELSE","else",94],["T_WHITESPACE"," ",94],"{",["T_WHITESPACE","\n            ",94],["T_VARIABLE","$this",95],["T_OBJECT_OPERATOR","->",95],["T_STRING","getResponse",95],"(",")",["T_OBJECT_OPERATOR","->",95],["T_STRING","setBody",95],"(",["T_VARIABLE","$response",95],")",";",["T_WHITESPACE","\n        ",95],"}",["T_WHITESPACE","\n    ",96],"}",["T_WHITESPACE","\n",97],"}",["T_WHITESPACE","\n",98]]
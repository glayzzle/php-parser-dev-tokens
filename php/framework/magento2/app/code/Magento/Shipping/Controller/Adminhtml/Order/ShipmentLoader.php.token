[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Copyright \u00c2\u00a9 2013-2017 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n *\/",2],["T_WHITESPACE","\n",5],["T_NAMESPACE","namespace",6],["T_WHITESPACE"," ",6],["T_STRING","Magento",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Shipping",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Controller",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Adminhtml",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Order",6],";",["T_WHITESPACE","\n\n",6],["T_USE","use",8],["T_WHITESPACE"," ",8],["T_STRING","Magento",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Framework",8],["T_NS_SEPARATOR","\\",8],["T_STRING","DataObject",8],";",["T_WHITESPACE","\n\n",8],["T_DOC_COMMENT","\/**\n * Class ShipmentLoader\n *\n * @package Magento\\Shipping\\Controller\\Adminhtml\\Order\n * @method ShipmentLoader setOrderId($id)\n * @method ShipmentLoader setShipmentId($id)\n * @method ShipmentLoader setShipment($shipment)\n * @method ShipmentLoader setTracking($tracking)\n * @method int getOrderId()\n * @method int getShipmentId()\n * @method array getShipment()\n * @method array getTracking()\n *\/",10],["T_WHITESPACE","\n",22],["T_CLASS","class",23],["T_WHITESPACE"," ",23],["T_STRING","ShipmentLoader",23],["T_WHITESPACE"," ",23],["T_EXTENDS","extends",23],["T_WHITESPACE"," ",23],["T_STRING","DataObject",23],["T_WHITESPACE","\n",23],"{",["T_WHITESPACE","\n    ",24],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Framework\\Message\\ManagerInterface\n     *\/",25],["T_WHITESPACE","\n    ",27],["T_PROTECTED","protected",28],["T_WHITESPACE"," ",28],["T_VARIABLE","$messageManager",28],";",["T_WHITESPACE","\n\n    ",28],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Framework\\Registry\n     *\/",30],["T_WHITESPACE","\n    ",32],["T_PROTECTED","protected",33],["T_WHITESPACE"," ",33],["T_VARIABLE","$registry",33],";",["T_WHITESPACE","\n\n    ",33],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Sales\\Api\\ShipmentRepositoryInterface\n     *\/",35],["T_WHITESPACE","\n    ",37],["T_PROTECTED","protected",38],["T_WHITESPACE"," ",38],["T_VARIABLE","$shipmentRepository",38],";",["T_WHITESPACE","\n\n    ",38],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Sales\\Model\\Order\\ShipmentFactory\n     *\/",40],["T_WHITESPACE","\n    ",42],["T_PROTECTED","protected",43],["T_WHITESPACE"," ",43],["T_VARIABLE","$shipmentFactory",43],";",["T_WHITESPACE","\n\n    ",43],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Sales\\Model\\Order\\Shipment\\TrackFactory\n     *\/",45],["T_WHITESPACE","\n    ",47],["T_PROTECTED","protected",48],["T_WHITESPACE"," ",48],["T_VARIABLE","$trackFactory",48],";",["T_WHITESPACE","\n\n    ",48],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Sales\\Api\\OrderRepositoryInterface\n     *\/",50],["T_WHITESPACE","\n    ",52],["T_PROTECTED","protected",53],["T_WHITESPACE"," ",53],["T_VARIABLE","$orderRepository",53],";",["T_WHITESPACE","\n\n    ",53],["T_DOC_COMMENT","\/**\n     * @param \\Magento\\Framework\\Message\\ManagerInterface $messageManager\n     * @param \\Magento\\Framework\\Registry $registry\n     * @param \\Magento\\Sales\\Api\\ShipmentRepositoryInterface $shipmentRepository\n     * @param \\Magento\\Sales\\Model\\Order\\ShipmentFactory $shipmentFactory\n     * @param \\Magento\\Sales\\Model\\Order\\Shipment\\TrackFactory $trackFactory\n     * @param \\Magento\\Sales\\Api\\OrderRepositoryInterface $orderRepository\n     * @param array $data\n     *\/",55],["T_WHITESPACE","\n    ",63],["T_PUBLIC","public",64],["T_WHITESPACE"," ",64],["T_FUNCTION","function",64],["T_WHITESPACE"," ",64],["T_STRING","__construct",64],"(",["T_WHITESPACE","\n        ",64],["T_NS_SEPARATOR","\\",65],["T_STRING","Magento",65],["T_NS_SEPARATOR","\\",65],["T_STRING","Framework",65],["T_NS_SEPARATOR","\\",65],["T_STRING","Message",65],["T_NS_SEPARATOR","\\",65],["T_STRING","ManagerInterface",65],["T_WHITESPACE"," ",65],["T_VARIABLE","$messageManager",65],",",["T_WHITESPACE","\n        ",65],["T_NS_SEPARATOR","\\",66],["T_STRING","Magento",66],["T_NS_SEPARATOR","\\",66],["T_STRING","Framework",66],["T_NS_SEPARATOR","\\",66],["T_STRING","Registry",66],["T_WHITESPACE"," ",66],["T_VARIABLE","$registry",66],",",["T_WHITESPACE","\n        ",66],["T_NS_SEPARATOR","\\",67],["T_STRING","Magento",67],["T_NS_SEPARATOR","\\",67],["T_STRING","Sales",67],["T_NS_SEPARATOR","\\",67],["T_STRING","Api",67],["T_NS_SEPARATOR","\\",67],["T_STRING","ShipmentRepositoryInterface",67],["T_WHITESPACE"," ",67],["T_VARIABLE","$shipmentRepository",67],",",["T_WHITESPACE","\n        ",67],["T_NS_SEPARATOR","\\",68],["T_STRING","Magento",68],["T_NS_SEPARATOR","\\",68],["T_STRING","Sales",68],["T_NS_SEPARATOR","\\",68],["T_STRING","Model",68],["T_NS_SEPARATOR","\\",68],["T_STRING","Order",68],["T_NS_SEPARATOR","\\",68],["T_STRING","ShipmentFactory",68],["T_WHITESPACE"," ",68],["T_VARIABLE","$shipmentFactory",68],",",["T_WHITESPACE","\n        ",68],["T_NS_SEPARATOR","\\",69],["T_STRING","Magento",69],["T_NS_SEPARATOR","\\",69],["T_STRING","Sales",69],["T_NS_SEPARATOR","\\",69],["T_STRING","Model",69],["T_NS_SEPARATOR","\\",69],["T_STRING","Order",69],["T_NS_SEPARATOR","\\",69],["T_STRING","Shipment",69],["T_NS_SEPARATOR","\\",69],["T_STRING","TrackFactory",69],["T_WHITESPACE"," ",69],["T_VARIABLE","$trackFactory",69],",",["T_WHITESPACE","\n        ",69],["T_NS_SEPARATOR","\\",70],["T_STRING","Magento",70],["T_NS_SEPARATOR","\\",70],["T_STRING","Sales",70],["T_NS_SEPARATOR","\\",70],["T_STRING","Api",70],["T_NS_SEPARATOR","\\",70],["T_STRING","OrderRepositoryInterface",70],["T_WHITESPACE"," ",70],["T_VARIABLE","$orderRepository",70],",",["T_WHITESPACE","\n        ",70],["T_ARRAY","array",71],["T_WHITESPACE"," ",71],["T_VARIABLE","$data",71],["T_WHITESPACE"," ",71],"=",["T_WHITESPACE"," ",71],"[","]",["T_WHITESPACE","\n    ",71],")",["T_WHITESPACE"," ",72],"{",["T_WHITESPACE","\n        ",72],["T_VARIABLE","$this",73],["T_OBJECT_OPERATOR","->",73],["T_STRING","messageManager",73],["T_WHITESPACE"," ",73],"=",["T_WHITESPACE"," ",73],["T_VARIABLE","$messageManager",73],";",["T_WHITESPACE","\n        ",73],["T_VARIABLE","$this",74],["T_OBJECT_OPERATOR","->",74],["T_STRING","registry",74],["T_WHITESPACE"," ",74],"=",["T_WHITESPACE"," ",74],["T_VARIABLE","$registry",74],";",["T_WHITESPACE","\n        ",74],["T_VARIABLE","$this",75],["T_OBJECT_OPERATOR","->",75],["T_STRING","shipmentRepository",75],["T_WHITESPACE"," ",75],"=",["T_WHITESPACE"," ",75],["T_VARIABLE","$shipmentRepository",75],";",["T_WHITESPACE","\n        ",75],["T_VARIABLE","$this",76],["T_OBJECT_OPERATOR","->",76],["T_STRING","shipmentFactory",76],["T_WHITESPACE"," ",76],"=",["T_WHITESPACE"," ",76],["T_VARIABLE","$shipmentFactory",76],";",["T_WHITESPACE","\n        ",76],["T_VARIABLE","$this",77],["T_OBJECT_OPERATOR","->",77],["T_STRING","trackFactory",77],["T_WHITESPACE"," ",77],"=",["T_WHITESPACE"," ",77],["T_VARIABLE","$trackFactory",77],";",["T_WHITESPACE","\n        ",77],["T_VARIABLE","$this",78],["T_OBJECT_OPERATOR","->",78],["T_STRING","orderRepository",78],["T_WHITESPACE"," ",78],"=",["T_WHITESPACE"," ",78],["T_VARIABLE","$orderRepository",78],";",["T_WHITESPACE","\n        ",78],["T_STRING","parent",79],["T_DOUBLE_COLON","::",79],["T_STRING","__construct",79],"(",["T_VARIABLE","$data",79],")",";",["T_WHITESPACE","\n    ",79],"}",["T_WHITESPACE","\n\n    ",80],["T_DOC_COMMENT","\/**\n     * Initialize shipment items QTY\n     *\n     * @return array\n     *\/",82],["T_WHITESPACE","\n    ",86],["T_PROTECTED","protected",87],["T_WHITESPACE"," ",87],["T_FUNCTION","function",87],["T_WHITESPACE"," ",87],["T_STRING","getItemQtys",87],"(",")",["T_WHITESPACE","\n    ",87],"{",["T_WHITESPACE","\n        ",88],["T_VARIABLE","$data",89],["T_WHITESPACE"," ",89],"=",["T_WHITESPACE"," ",89],["T_VARIABLE","$this",89],["T_OBJECT_OPERATOR","->",89],["T_STRING","getShipment",89],"(",")",";",["T_WHITESPACE","\n\n        ",89],["T_RETURN","return",91],["T_WHITESPACE"," ",91],["T_ISSET","isset",91],"(",["T_VARIABLE","$data",91],"[",["T_CONSTANT_ENCAPSED_STRING","'items'",91],"]",")",["T_WHITESPACE"," ",91],"?",["T_WHITESPACE"," ",91],["T_VARIABLE","$data",91],"[",["T_CONSTANT_ENCAPSED_STRING","'items'",91],"]",["T_WHITESPACE"," ",91],":",["T_WHITESPACE"," ",91],"[","]",";",["T_WHITESPACE","\n    ",91],"}",["T_WHITESPACE","\n\n    ",92],["T_DOC_COMMENT","\/**\n     * Initialize shipment model instance\n     *\n     * @return bool|\\Magento\\Sales\\Model\\Order\\Shipment\n     * @throws \\Magento\\Framework\\Exception\\LocalizedException\n     *\/",94],["T_WHITESPACE","\n    ",99],["T_PUBLIC","public",100],["T_WHITESPACE"," ",100],["T_FUNCTION","function",100],["T_WHITESPACE"," ",100],["T_STRING","load",100],"(",")",["T_WHITESPACE","\n    ",100],"{",["T_WHITESPACE","\n        ",101],["T_VARIABLE","$shipment",102],["T_WHITESPACE"," ",102],"=",["T_WHITESPACE"," ",102],["T_STRING","false",102],";",["T_WHITESPACE","\n        ",102],["T_VARIABLE","$orderId",103],["T_WHITESPACE"," ",103],"=",["T_WHITESPACE"," ",103],["T_VARIABLE","$this",103],["T_OBJECT_OPERATOR","->",103],["T_STRING","getOrderId",103],"(",")",";",["T_WHITESPACE","\n        ",103],["T_VARIABLE","$shipmentId",104],["T_WHITESPACE"," ",104],"=",["T_WHITESPACE"," ",104],["T_VARIABLE","$this",104],["T_OBJECT_OPERATOR","->",104],["T_STRING","getShipmentId",104],"(",")",";",["T_WHITESPACE","\n        ",104],["T_IF","if",105],["T_WHITESPACE"," ",105],"(",["T_VARIABLE","$shipmentId",105],")",["T_WHITESPACE"," ",105],"{",["T_WHITESPACE","\n            ",105],["T_VARIABLE","$shipment",106],["T_WHITESPACE"," ",106],"=",["T_WHITESPACE"," ",106],["T_VARIABLE","$this",106],["T_OBJECT_OPERATOR","->",106],["T_STRING","shipmentRepository",106],["T_OBJECT_OPERATOR","->",106],["T_STRING","get",106],"(",["T_VARIABLE","$shipmentId",106],")",";",["T_WHITESPACE","\n        ",106],"}",["T_WHITESPACE"," ",107],["T_ELSEIF","elseif",107],["T_WHITESPACE"," ",107],"(",["T_VARIABLE","$orderId",107],")",["T_WHITESPACE"," ",107],"{",["T_WHITESPACE","\n            ",107],["T_VARIABLE","$order",108],["T_WHITESPACE"," ",108],"=",["T_WHITESPACE"," ",108],["T_VARIABLE","$this",108],["T_OBJECT_OPERATOR","->",108],["T_STRING","orderRepository",108],["T_OBJECT_OPERATOR","->",108],["T_STRING","get",108],"(",["T_VARIABLE","$orderId",108],")",";",["T_WHITESPACE","\n\n            ",108],["T_DOC_COMMENT","\/**\n             * Check order existing\n             *\/",110],["T_WHITESPACE","\n            ",112],["T_IF","if",113],["T_WHITESPACE"," ",113],"(","!",["T_VARIABLE","$order",113],["T_OBJECT_OPERATOR","->",113],["T_STRING","getId",113],"(",")",")",["T_WHITESPACE"," ",113],"{",["T_WHITESPACE","\n                ",113],["T_VARIABLE","$this",114],["T_OBJECT_OPERATOR","->",114],["T_STRING","messageManager",114],["T_OBJECT_OPERATOR","->",114],["T_STRING","addError",114],"(",["T_STRING","__",114],"(",["T_CONSTANT_ENCAPSED_STRING","'The order no longer exists.'",114],")",")",";",["T_WHITESPACE","\n                ",114],["T_RETURN","return",115],["T_WHITESPACE"," ",115],["T_STRING","false",115],";",["T_WHITESPACE","\n            ",115],"}",["T_WHITESPACE","\n            ",116],["T_DOC_COMMENT","\/**\n             * Check shipment is available to create separate from invoice\n             *\/",117],["T_WHITESPACE","\n            ",119],["T_IF","if",120],["T_WHITESPACE"," ",120],"(",["T_VARIABLE","$order",120],["T_OBJECT_OPERATOR","->",120],["T_STRING","getForcedShipmentWithInvoice",120],"(",")",")",["T_WHITESPACE"," ",120],"{",["T_WHITESPACE","\n                ",120],["T_VARIABLE","$this",121],["T_OBJECT_OPERATOR","->",121],["T_STRING","messageManager",121],["T_OBJECT_OPERATOR","->",121],["T_STRING","addError",121],"(",["T_STRING","__",121],"(",["T_CONSTANT_ENCAPSED_STRING","'Cannot do shipment for the order separately from invoice.'",121],")",")",";",["T_WHITESPACE","\n                ",121],["T_RETURN","return",122],["T_WHITESPACE"," ",122],["T_STRING","false",122],";",["T_WHITESPACE","\n            ",122],"}",["T_WHITESPACE","\n            ",123],["T_DOC_COMMENT","\/**\n             * Check shipment create availability\n             *\/",124],["T_WHITESPACE","\n            ",126],["T_IF","if",127],["T_WHITESPACE"," ",127],"(","!",["T_VARIABLE","$order",127],["T_OBJECT_OPERATOR","->",127],["T_STRING","canShip",127],"(",")",")",["T_WHITESPACE"," ",127],"{",["T_WHITESPACE","\n                ",127],["T_VARIABLE","$this",128],["T_OBJECT_OPERATOR","->",128],["T_STRING","messageManager",128],["T_OBJECT_OPERATOR","->",128],["T_STRING","addError",128],"(",["T_STRING","__",128],"(",["T_CONSTANT_ENCAPSED_STRING","'Cannot do shipment for the order.'",128],")",")",";",["T_WHITESPACE","\n                ",128],["T_RETURN","return",129],["T_WHITESPACE"," ",129],["T_STRING","false",129],";",["T_WHITESPACE","\n            ",129],"}",["T_WHITESPACE","\n\n            ",130],["T_VARIABLE","$shipment",132],["T_WHITESPACE"," ",132],"=",["T_WHITESPACE"," ",132],["T_VARIABLE","$this",132],["T_OBJECT_OPERATOR","->",132],["T_STRING","shipmentFactory",132],["T_OBJECT_OPERATOR","->",132],["T_STRING","create",132],"(",["T_WHITESPACE","\n                ",132],["T_VARIABLE","$order",133],",",["T_WHITESPACE","\n                ",133],["T_VARIABLE","$this",134],["T_OBJECT_OPERATOR","->",134],["T_STRING","getItemQtys",134],"(",")",",",["T_WHITESPACE","\n                ",134],["T_VARIABLE","$this",135],["T_OBJECT_OPERATOR","->",135],["T_STRING","getTracking",135],"(",")",["T_WHITESPACE","\n            ",135],")",";",["T_WHITESPACE","\n        ",136],"}",["T_WHITESPACE","\n\n        ",137],["T_VARIABLE","$this",139],["T_OBJECT_OPERATOR","->",139],["T_STRING","registry",139],["T_OBJECT_OPERATOR","->",139],["T_STRING","register",139],"(",["T_CONSTANT_ENCAPSED_STRING","'current_shipment'",139],",",["T_WHITESPACE"," ",139],["T_VARIABLE","$shipment",139],")",";",["T_WHITESPACE","\n        ",139],["T_RETURN","return",140],["T_WHITESPACE"," ",140],["T_VARIABLE","$shipment",140],";",["T_WHITESPACE","\n    ",140],"}",["T_WHITESPACE","\n",141],"}",["T_WHITESPACE","\n",142]]
[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Copyright \u00c2\u00a9 2013-2017 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n *\/",2],["T_WHITESPACE","\n",5],["T_NAMESPACE","namespace",6],["T_WHITESPACE"," ",6],["T_STRING","Magento",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Shipping",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Model",6],";",["T_WHITESPACE","\n\n",6],["T_USE","use",8],["T_WHITESPACE"," ",8],["T_STRING","Magento",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Framework",8],["T_NS_SEPARATOR","\\",8],["T_STRING","App",8],["T_NS_SEPARATOR","\\",8],["T_STRING","ObjectManager",8],";",["T_WHITESPACE","\n",8],["T_USE","use",9],["T_WHITESPACE"," ",9],["T_STRING","Magento",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Quote",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Model",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Quote",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Address",9],["T_NS_SEPARATOR","\\",9],["T_STRING","RateCollectorInterface",9],";",["T_WHITESPACE","\n",9],["T_USE","use",10],["T_WHITESPACE"," ",10],["T_STRING","Magento",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Quote",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Model",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Quote",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Address",10],["T_NS_SEPARATOR","\\",10],["T_STRING","RateRequestFactory",10],";",["T_WHITESPACE","\n",10],["T_USE","use",11],["T_WHITESPACE"," ",11],["T_STRING","Magento",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Sales",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Model",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Order",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Shipment",11],";",["T_WHITESPACE","\n\n",11],["T_DOC_COMMENT","\/**\n * @SuppressWarnings(PHPMD.CouplingBetweenObjects)\n *\/",13],["T_WHITESPACE","\n",15],["T_CLASS","class",16],["T_WHITESPACE"," ",16],["T_STRING","Shipping",16],["T_WHITESPACE"," ",16],["T_IMPLEMENTS","implements",16],["T_WHITESPACE"," ",16],["T_STRING","RateCollectorInterface",16],["T_WHITESPACE","\n",16],"{",["T_WHITESPACE","\n    ",17],["T_DOC_COMMENT","\/**\n     * Default shipping orig for requests\n     *\n     * @var array\n     *\/",18],["T_WHITESPACE","\n    ",22],["T_PROTECTED","protected",23],["T_WHITESPACE"," ",23],["T_VARIABLE","$_orig",23],["T_WHITESPACE"," ",23],"=",["T_WHITESPACE"," ",23],["T_STRING","null",23],";",["T_WHITESPACE","\n\n    ",23],["T_DOC_COMMENT","\/**\n     * Cached result\n     *\n     * @var \\Magento\\Shipping\\Model\\Rate\\Result\n     *\/",25],["T_WHITESPACE","\n    ",29],["T_PROTECTED","protected",30],["T_WHITESPACE"," ",30],["T_VARIABLE","$_result",30],["T_WHITESPACE"," ",30],"=",["T_WHITESPACE"," ",30],["T_STRING","null",30],";",["T_WHITESPACE","\n\n    ",30],["T_DOC_COMMENT","\/**\n     * Part of carrier xml config path\n     *\n     * @var string\n     *\/",32],["T_WHITESPACE","\n    ",36],["T_PROTECTED","protected",37],["T_WHITESPACE"," ",37],["T_VARIABLE","$_availabilityConfigField",37],["T_WHITESPACE"," ",37],"=",["T_WHITESPACE"," ",37],["T_CONSTANT_ENCAPSED_STRING","'active'",37],";",["T_WHITESPACE","\n\n    ",37],["T_DOC_COMMENT","\/**\n     * Core store config\n     *\n     * @var \\Magento\\Framework\\App\\Config\\ScopeConfigInterface\n     *\/",39],["T_WHITESPACE","\n    ",43],["T_PROTECTED","protected",44],["T_WHITESPACE"," ",44],["T_VARIABLE","$_scopeConfig",44],";",["T_WHITESPACE","\n\n    ",44],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Store\\Model\\StoreManagerInterface\n     *\/",46],["T_WHITESPACE","\n    ",48],["T_PROTECTED","protected",49],["T_WHITESPACE"," ",49],["T_VARIABLE","$_storeManager",49],";",["T_WHITESPACE","\n\n    ",49],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Shipping\\Model\\Config\n     *\/",51],["T_WHITESPACE","\n    ",53],["T_PROTECTED","protected",54],["T_WHITESPACE"," ",54],["T_VARIABLE","$_shippingConfig",54],";",["T_WHITESPACE","\n\n    ",54],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Shipping\\Model\\CarrierFactory\n     *\/",56],["T_WHITESPACE","\n    ",58],["T_PROTECTED","protected",59],["T_WHITESPACE"," ",59],["T_VARIABLE","$_carrierFactory",59],";",["T_WHITESPACE","\n\n    ",59],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Shipping\\Model\\Rate\\ResultFactory\n     *\/",61],["T_WHITESPACE","\n    ",63],["T_PROTECTED","protected",64],["T_WHITESPACE"," ",64],["T_VARIABLE","$_rateResultFactory",64],";",["T_WHITESPACE","\n\n    ",64],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Quote\\Model\\Quote\\Address\\RateRequestFactory\n     *\/",66],["T_WHITESPACE","\n    ",68],["T_PROTECTED","protected",69],["T_WHITESPACE"," ",69],["T_VARIABLE","$_shipmentRequestFactory",69],";",["T_WHITESPACE","\n\n    ",69],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Directory\\Model\\RegionFactory\n     *\/",71],["T_WHITESPACE","\n    ",73],["T_PROTECTED","protected",74],["T_WHITESPACE"," ",74],["T_VARIABLE","$_regionFactory",74],";",["T_WHITESPACE","\n\n    ",74],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Framework\\Math\\Division\n     *\/",76],["T_WHITESPACE","\n    ",78],["T_PROTECTED","protected",79],["T_WHITESPACE"," ",79],["T_VARIABLE","$mathDivision",79],";",["T_WHITESPACE","\n\n    ",79],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\CatalogInventory\\Api\\StockRegistryInterface\n     *\/",81],["T_WHITESPACE","\n    ",83],["T_PROTECTED","protected",84],["T_WHITESPACE"," ",84],["T_VARIABLE","$stockRegistry",84],";",["T_WHITESPACE","\n\n    ",84],["T_DOC_COMMENT","\/**\n     * @var RateRequestFactory\n     *\/",86],["T_WHITESPACE","\n    ",88],["T_PRIVATE","private",89],["T_WHITESPACE"," ",89],["T_VARIABLE","$rateRequestFactory",89],";",["T_WHITESPACE","\n\n    ",89],["T_DOC_COMMENT","\/**\n     * @param \\Magento\\Framework\\App\\Config\\ScopeConfigInterface $scopeConfig\n     * @param \\Magento\\Shipping\\Model\\Config $shippingConfig\n     * @param \\Magento\\Store\\Model\\StoreManagerInterface $storeManager\n     * @param \\Magento\\Shipping\\Model\\CarrierFactory $carrierFactory\n     * @param \\Magento\\Shipping\\Model\\Rate\\ResultFactory $rateResultFactory\n     * @param \\Magento\\Shipping\\Model\\Shipment\\RequestFactory $shipmentRequestFactory\n     * @param \\Magento\\Directory\\Model\\RegionFactory $regionFactory\n     * @param \\Magento\\Framework\\Math\\Division $mathDivision\n     * @param \\Magento\\CatalogInventory\\Api\\StockRegistryInterface $stockRegistry\n     * @param RateRequestFactory $rateRequestFactory\n     *\n     * @SuppressWarnings(PHPMD.ExcessiveParameterList)\n     *\/",91],["T_WHITESPACE","\n    ",104],["T_PUBLIC","public",105],["T_WHITESPACE"," ",105],["T_FUNCTION","function",105],["T_WHITESPACE"," ",105],["T_STRING","__construct",105],"(",["T_WHITESPACE","\n        ",105],["T_NS_SEPARATOR","\\",106],["T_STRING","Magento",106],["T_NS_SEPARATOR","\\",106],["T_STRING","Framework",106],["T_NS_SEPARATOR","\\",106],["T_STRING","App",106],["T_NS_SEPARATOR","\\",106],["T_STRING","Config",106],["T_NS_SEPARATOR","\\",106],["T_STRING","ScopeConfigInterface",106],["T_WHITESPACE"," ",106],["T_VARIABLE","$scopeConfig",106],",",["T_WHITESPACE","\n        ",106],["T_NS_SEPARATOR","\\",107],["T_STRING","Magento",107],["T_NS_SEPARATOR","\\",107],["T_STRING","Shipping",107],["T_NS_SEPARATOR","\\",107],["T_STRING","Model",107],["T_NS_SEPARATOR","\\",107],["T_STRING","Config",107],["T_WHITESPACE"," ",107],["T_VARIABLE","$shippingConfig",107],",",["T_WHITESPACE","\n        ",107],["T_NS_SEPARATOR","\\",108],["T_STRING","Magento",108],["T_NS_SEPARATOR","\\",108],["T_STRING","Store",108],["T_NS_SEPARATOR","\\",108],["T_STRING","Model",108],["T_NS_SEPARATOR","\\",108],["T_STRING","StoreManagerInterface",108],["T_WHITESPACE"," ",108],["T_VARIABLE","$storeManager",108],",",["T_WHITESPACE","\n        ",108],["T_NS_SEPARATOR","\\",109],["T_STRING","Magento",109],["T_NS_SEPARATOR","\\",109],["T_STRING","Shipping",109],["T_NS_SEPARATOR","\\",109],["T_STRING","Model",109],["T_NS_SEPARATOR","\\",109],["T_STRING","CarrierFactory",109],["T_WHITESPACE"," ",109],["T_VARIABLE","$carrierFactory",109],",",["T_WHITESPACE","\n        ",109],["T_NS_SEPARATOR","\\",110],["T_STRING","Magento",110],["T_NS_SEPARATOR","\\",110],["T_STRING","Shipping",110],["T_NS_SEPARATOR","\\",110],["T_STRING","Model",110],["T_NS_SEPARATOR","\\",110],["T_STRING","Rate",110],["T_NS_SEPARATOR","\\",110],["T_STRING","ResultFactory",110],["T_WHITESPACE"," ",110],["T_VARIABLE","$rateResultFactory",110],",",["T_WHITESPACE","\n        ",110],["T_NS_SEPARATOR","\\",111],["T_STRING","Magento",111],["T_NS_SEPARATOR","\\",111],["T_STRING","Shipping",111],["T_NS_SEPARATOR","\\",111],["T_STRING","Model",111],["T_NS_SEPARATOR","\\",111],["T_STRING","Shipment",111],["T_NS_SEPARATOR","\\",111],["T_STRING","RequestFactory",111],["T_WHITESPACE"," ",111],["T_VARIABLE","$shipmentRequestFactory",111],",",["T_WHITESPACE","\n        ",111],["T_NS_SEPARATOR","\\",112],["T_STRING","Magento",112],["T_NS_SEPARATOR","\\",112],["T_STRING","Directory",112],["T_NS_SEPARATOR","\\",112],["T_STRING","Model",112],["T_NS_SEPARATOR","\\",112],["T_STRING","RegionFactory",112],["T_WHITESPACE"," ",112],["T_VARIABLE","$regionFactory",112],",",["T_WHITESPACE","\n        ",112],["T_NS_SEPARATOR","\\",113],["T_STRING","Magento",113],["T_NS_SEPARATOR","\\",113],["T_STRING","Framework",113],["T_NS_SEPARATOR","\\",113],["T_STRING","Math",113],["T_NS_SEPARATOR","\\",113],["T_STRING","Division",113],["T_WHITESPACE"," ",113],["T_VARIABLE","$mathDivision",113],",",["T_WHITESPACE","\n        ",113],["T_NS_SEPARATOR","\\",114],["T_STRING","Magento",114],["T_NS_SEPARATOR","\\",114],["T_STRING","CatalogInventory",114],["T_NS_SEPARATOR","\\",114],["T_STRING","Api",114],["T_NS_SEPARATOR","\\",114],["T_STRING","StockRegistryInterface",114],["T_WHITESPACE"," ",114],["T_VARIABLE","$stockRegistry",114],",",["T_WHITESPACE","\n        ",114],["T_STRING","RateRequestFactory",115],["T_WHITESPACE"," ",115],["T_VARIABLE","$rateRequestFactory",115],["T_WHITESPACE"," ",115],"=",["T_WHITESPACE"," ",115],["T_STRING","null",115],["T_WHITESPACE","\n    ",115],")",["T_WHITESPACE"," ",116],"{",["T_WHITESPACE","\n        ",116],["T_VARIABLE","$this",117],["T_OBJECT_OPERATOR","->",117],["T_STRING","_scopeConfig",117],["T_WHITESPACE"," ",117],"=",["T_WHITESPACE"," ",117],["T_VARIABLE","$scopeConfig",117],";",["T_WHITESPACE","\n        ",117],["T_VARIABLE","$this",118],["T_OBJECT_OPERATOR","->",118],["T_STRING","_shippingConfig",118],["T_WHITESPACE"," ",118],"=",["T_WHITESPACE"," ",118],["T_VARIABLE","$shippingConfig",118],";",["T_WHITESPACE","\n        ",118],["T_VARIABLE","$this",119],["T_OBJECT_OPERATOR","->",119],["T_STRING","_storeManager",119],["T_WHITESPACE"," ",119],"=",["T_WHITESPACE"," ",119],["T_VARIABLE","$storeManager",119],";",["T_WHITESPACE","\n        ",119],["T_VARIABLE","$this",120],["T_OBJECT_OPERATOR","->",120],["T_STRING","_carrierFactory",120],["T_WHITESPACE"," ",120],"=",["T_WHITESPACE"," ",120],["T_VARIABLE","$carrierFactory",120],";",["T_WHITESPACE","\n        ",120],["T_VARIABLE","$this",121],["T_OBJECT_OPERATOR","->",121],["T_STRING","_rateResultFactory",121],["T_WHITESPACE"," ",121],"=",["T_WHITESPACE"," ",121],["T_VARIABLE","$rateResultFactory",121],";",["T_WHITESPACE","\n        ",121],["T_VARIABLE","$this",122],["T_OBJECT_OPERATOR","->",122],["T_STRING","_shipmentRequestFactory",122],["T_WHITESPACE"," ",122],"=",["T_WHITESPACE"," ",122],["T_VARIABLE","$shipmentRequestFactory",122],";",["T_WHITESPACE","\n        ",122],["T_VARIABLE","$this",123],["T_OBJECT_OPERATOR","->",123],["T_STRING","_regionFactory",123],["T_WHITESPACE"," ",123],"=",["T_WHITESPACE"," ",123],["T_VARIABLE","$regionFactory",123],";",["T_WHITESPACE","\n        ",123],["T_VARIABLE","$this",124],["T_OBJECT_OPERATOR","->",124],["T_STRING","mathDivision",124],["T_WHITESPACE"," ",124],"=",["T_WHITESPACE"," ",124],["T_VARIABLE","$mathDivision",124],";",["T_WHITESPACE","\n        ",124],["T_VARIABLE","$this",125],["T_OBJECT_OPERATOR","->",125],["T_STRING","stockRegistry",125],["T_WHITESPACE"," ",125],"=",["T_WHITESPACE"," ",125],["T_VARIABLE","$stockRegistry",125],";",["T_WHITESPACE","\n        ",125],["T_VARIABLE","$this",126],["T_OBJECT_OPERATOR","->",126],["T_STRING","rateRequestFactory",126],["T_WHITESPACE"," ",126],"=",["T_WHITESPACE"," ",126],["T_VARIABLE","$rateRequestFactory",126],["T_WHITESPACE"," ",126],"?",":",["T_WHITESPACE"," ",126],["T_STRING","ObjectManager",126],["T_DOUBLE_COLON","::",126],["T_STRING","getInstance",126],"(",")",["T_OBJECT_OPERATOR","->",126],["T_STRING","get",126],"(",["T_STRING","RateRequestFactory",126],["T_DOUBLE_COLON","::",126],["T_CLASS","class",126],")",";",["T_WHITESPACE","\n    ",126],"}",["T_WHITESPACE","\n\n    ",127],["T_DOC_COMMENT","\/**\n     * Get shipping rate result model\n     *\n     * @return \\Magento\\Shipping\\Model\\Rate\\Result\n     *\/",129],["T_WHITESPACE","\n    ",133],["T_PUBLIC","public",134],["T_WHITESPACE"," ",134],["T_FUNCTION","function",134],["T_WHITESPACE"," ",134],["T_STRING","getResult",134],"(",")",["T_WHITESPACE","\n    ",134],"{",["T_WHITESPACE","\n        ",135],["T_IF","if",136],["T_WHITESPACE"," ",136],"(",["T_EMPTY","empty",136],"(",["T_VARIABLE","$this",136],["T_OBJECT_OPERATOR","->",136],["T_STRING","_result",136],")",")",["T_WHITESPACE"," ",136],"{",["T_WHITESPACE","\n            ",136],["T_VARIABLE","$this",137],["T_OBJECT_OPERATOR","->",137],["T_STRING","_result",137],["T_WHITESPACE"," ",137],"=",["T_WHITESPACE"," ",137],["T_VARIABLE","$this",137],["T_OBJECT_OPERATOR","->",137],["T_STRING","_rateResultFactory",137],["T_OBJECT_OPERATOR","->",137],["T_STRING","create",137],"(",")",";",["T_WHITESPACE","\n        ",137],"}",["T_WHITESPACE","\n        ",138],["T_RETURN","return",139],["T_WHITESPACE"," ",139],["T_VARIABLE","$this",139],["T_OBJECT_OPERATOR","->",139],["T_STRING","_result",139],";",["T_WHITESPACE","\n    ",139],"}",["T_WHITESPACE","\n\n    ",140],["T_DOC_COMMENT","\/**\n     * Set shipping orig data\n     *\n     * @param array $data\n     * @return void\n     *\/",142],["T_WHITESPACE","\n    ",147],["T_PUBLIC","public",148],["T_WHITESPACE"," ",148],["T_FUNCTION","function",148],["T_WHITESPACE"," ",148],["T_STRING","setOrigData",148],"(",["T_VARIABLE","$data",148],")",["T_WHITESPACE","\n    ",148],"{",["T_WHITESPACE","\n        ",149],["T_VARIABLE","$this",150],["T_OBJECT_OPERATOR","->",150],["T_STRING","_orig",150],["T_WHITESPACE"," ",150],"=",["T_WHITESPACE"," ",150],["T_VARIABLE","$data",150],";",["T_WHITESPACE","\n    ",150],"}",["T_WHITESPACE","\n\n    ",151],["T_DOC_COMMENT","\/**\n     * Reset cached result\n     *\n     * @return $this\n     *\/",153],["T_WHITESPACE","\n    ",157],["T_PUBLIC","public",158],["T_WHITESPACE"," ",158],["T_FUNCTION","function",158],["T_WHITESPACE"," ",158],["T_STRING","resetResult",158],"(",")",["T_WHITESPACE","\n    ",158],"{",["T_WHITESPACE","\n        ",159],["T_VARIABLE","$this",160],["T_OBJECT_OPERATOR","->",160],["T_STRING","getResult",160],"(",")",["T_OBJECT_OPERATOR","->",160],["T_STRING","reset",160],"(",")",";",["T_WHITESPACE","\n        ",160],["T_RETURN","return",161],["T_WHITESPACE"," ",161],["T_VARIABLE","$this",161],";",["T_WHITESPACE","\n    ",161],"}",["T_WHITESPACE","\n\n    ",162],["T_DOC_COMMENT","\/**\n     * Retrieve configuration model\n     *\n     * @return \\Magento\\Shipping\\Model\\Config\n     *\/",164],["T_WHITESPACE","\n    ",168],["T_PUBLIC","public",169],["T_WHITESPACE"," ",169],["T_FUNCTION","function",169],["T_WHITESPACE"," ",169],["T_STRING","getConfig",169],"(",")",["T_WHITESPACE","\n    ",169],"{",["T_WHITESPACE","\n        ",170],["T_RETURN","return",171],["T_WHITESPACE"," ",171],["T_VARIABLE","$this",171],["T_OBJECT_OPERATOR","->",171],["T_STRING","_shippingConfig",171],";",["T_WHITESPACE","\n    ",171],"}",["T_WHITESPACE","\n\n    ",172],["T_DOC_COMMENT","\/**\n     * Retrieve all methods for supplied shipping data\n     *\n     * @param \\Magento\\Quote\\Model\\Quote\\Address\\RateRequest $request\n     * @return $this\n     * @todo make it ordered\n     *\/",174],["T_WHITESPACE","\n    ",180],["T_PUBLIC","public",181],["T_WHITESPACE"," ",181],["T_FUNCTION","function",181],["T_WHITESPACE"," ",181],["T_STRING","collectRates",181],"(",["T_NS_SEPARATOR","\\",181],["T_STRING","Magento",181],["T_NS_SEPARATOR","\\",181],["T_STRING","Quote",181],["T_NS_SEPARATOR","\\",181],["T_STRING","Model",181],["T_NS_SEPARATOR","\\",181],["T_STRING","Quote",181],["T_NS_SEPARATOR","\\",181],["T_STRING","Address",181],["T_NS_SEPARATOR","\\",181],["T_STRING","RateRequest",181],["T_WHITESPACE"," ",181],["T_VARIABLE","$request",181],")",["T_WHITESPACE","\n    ",181],"{",["T_WHITESPACE","\n        ",182],["T_VARIABLE","$storeId",183],["T_WHITESPACE"," ",183],"=",["T_WHITESPACE"," ",183],["T_VARIABLE","$request",183],["T_OBJECT_OPERATOR","->",183],["T_STRING","getStoreId",183],"(",")",";",["T_WHITESPACE","\n        ",183],["T_IF","if",184],["T_WHITESPACE"," ",184],"(","!",["T_VARIABLE","$request",184],["T_OBJECT_OPERATOR","->",184],["T_STRING","getOrig",184],"(",")",")",["T_WHITESPACE"," ",184],"{",["T_WHITESPACE","\n            ",184],["T_VARIABLE","$request",185],["T_OBJECT_OPERATOR","->",185],["T_STRING","setCountryId",185],"(",["T_WHITESPACE","\n                ",185],["T_VARIABLE","$this",186],["T_OBJECT_OPERATOR","->",186],["T_STRING","_scopeConfig",186],["T_OBJECT_OPERATOR","->",186],["T_STRING","getValue",186],"(",["T_WHITESPACE","\n                    ",186],["T_STRING","Shipment",187],["T_DOUBLE_COLON","::",187],["T_STRING","XML_PATH_STORE_COUNTRY_ID",187],",",["T_WHITESPACE","\n                    ",187],["T_NS_SEPARATOR","\\",188],["T_STRING","Magento",188],["T_NS_SEPARATOR","\\",188],["T_STRING","Store",188],["T_NS_SEPARATOR","\\",188],["T_STRING","Model",188],["T_NS_SEPARATOR","\\",188],["T_STRING","ScopeInterface",188],["T_DOUBLE_COLON","::",188],["T_STRING","SCOPE_STORE",188],",",["T_WHITESPACE","\n                    ",188],["T_VARIABLE","$request",189],["T_OBJECT_OPERATOR","->",189],["T_STRING","getStore",189],"(",")",["T_WHITESPACE","\n                ",189],")",["T_WHITESPACE","\n            ",190],")",["T_OBJECT_OPERATOR","->",191],["T_STRING","setRegionId",191],"(",["T_WHITESPACE","\n                ",191],["T_VARIABLE","$this",192],["T_OBJECT_OPERATOR","->",192],["T_STRING","_scopeConfig",192],["T_OBJECT_OPERATOR","->",192],["T_STRING","getValue",192],"(",["T_WHITESPACE","\n                    ",192],["T_STRING","Shipment",193],["T_DOUBLE_COLON","::",193],["T_STRING","XML_PATH_STORE_REGION_ID",193],",",["T_WHITESPACE","\n                    ",193],["T_NS_SEPARATOR","\\",194],["T_STRING","Magento",194],["T_NS_SEPARATOR","\\",194],["T_STRING","Store",194],["T_NS_SEPARATOR","\\",194],["T_STRING","Model",194],["T_NS_SEPARATOR","\\",194],["T_STRING","ScopeInterface",194],["T_DOUBLE_COLON","::",194],["T_STRING","SCOPE_STORE",194],",",["T_WHITESPACE","\n                    ",194],["T_VARIABLE","$request",195],["T_OBJECT_OPERATOR","->",195],["T_STRING","getStore",195],"(",")",["T_WHITESPACE","\n                ",195],")",["T_WHITESPACE","\n            ",196],")",["T_OBJECT_OPERATOR","->",197],["T_STRING","setCity",197],"(",["T_WHITESPACE","\n                ",197],["T_VARIABLE","$this",198],["T_OBJECT_OPERATOR","->",198],["T_STRING","_scopeConfig",198],["T_OBJECT_OPERATOR","->",198],["T_STRING","getValue",198],"(",["T_WHITESPACE","\n                    ",198],["T_STRING","Shipment",199],["T_DOUBLE_COLON","::",199],["T_STRING","XML_PATH_STORE_CITY",199],",",["T_WHITESPACE","\n                    ",199],["T_NS_SEPARATOR","\\",200],["T_STRING","Magento",200],["T_NS_SEPARATOR","\\",200],["T_STRING","Store",200],["T_NS_SEPARATOR","\\",200],["T_STRING","Model",200],["T_NS_SEPARATOR","\\",200],["T_STRING","ScopeInterface",200],["T_DOUBLE_COLON","::",200],["T_STRING","SCOPE_STORE",200],",",["T_WHITESPACE","\n                    ",200],["T_VARIABLE","$request",201],["T_OBJECT_OPERATOR","->",201],["T_STRING","getStore",201],"(",")",["T_WHITESPACE","\n                ",201],")",["T_WHITESPACE","\n            ",202],")",["T_OBJECT_OPERATOR","->",203],["T_STRING","setPostcode",203],"(",["T_WHITESPACE","\n                ",203],["T_VARIABLE","$this",204],["T_OBJECT_OPERATOR","->",204],["T_STRING","_scopeConfig",204],["T_OBJECT_OPERATOR","->",204],["T_STRING","getValue",204],"(",["T_WHITESPACE","\n                    ",204],["T_STRING","Shipment",205],["T_DOUBLE_COLON","::",205],["T_STRING","XML_PATH_STORE_ZIP",205],",",["T_WHITESPACE","\n                    ",205],["T_NS_SEPARATOR","\\",206],["T_STRING","Magento",206],["T_NS_SEPARATOR","\\",206],["T_STRING","Store",206],["T_NS_SEPARATOR","\\",206],["T_STRING","Model",206],["T_NS_SEPARATOR","\\",206],["T_STRING","ScopeInterface",206],["T_DOUBLE_COLON","::",206],["T_STRING","SCOPE_STORE",206],",",["T_WHITESPACE","\n                    ",206],["T_VARIABLE","$request",207],["T_OBJECT_OPERATOR","->",207],["T_STRING","getStore",207],"(",")",["T_WHITESPACE","\n                ",207],")",["T_WHITESPACE","\n            ",208],")",";",["T_WHITESPACE","\n        ",209],"}",["T_WHITESPACE","\n\n        ",210],["T_VARIABLE","$limitCarrier",212],["T_WHITESPACE"," ",212],"=",["T_WHITESPACE"," ",212],["T_VARIABLE","$request",212],["T_OBJECT_OPERATOR","->",212],["T_STRING","getLimitCarrier",212],"(",")",";",["T_WHITESPACE","\n        ",212],["T_IF","if",213],["T_WHITESPACE"," ",213],"(","!",["T_VARIABLE","$limitCarrier",213],")",["T_WHITESPACE"," ",213],"{",["T_WHITESPACE","\n            ",213],["T_VARIABLE","$carriers",214],["T_WHITESPACE"," ",214],"=",["T_WHITESPACE"," ",214],["T_VARIABLE","$this",214],["T_OBJECT_OPERATOR","->",214],["T_STRING","_scopeConfig",214],["T_OBJECT_OPERATOR","->",214],["T_STRING","getValue",214],"(",["T_WHITESPACE","\n                ",214],["T_CONSTANT_ENCAPSED_STRING","'carriers'",215],",",["T_WHITESPACE","\n                ",215],["T_NS_SEPARATOR","\\",216],["T_STRING","Magento",216],["T_NS_SEPARATOR","\\",216],["T_STRING","Store",216],["T_NS_SEPARATOR","\\",216],["T_STRING","Model",216],["T_NS_SEPARATOR","\\",216],["T_STRING","ScopeInterface",216],["T_DOUBLE_COLON","::",216],["T_STRING","SCOPE_STORE",216],",",["T_WHITESPACE","\n                ",216],["T_VARIABLE","$storeId",217],["T_WHITESPACE","\n            ",217],")",";",["T_WHITESPACE","\n\n            ",218],["T_FOREACH","foreach",220],["T_WHITESPACE"," ",220],"(",["T_VARIABLE","$carriers",220],["T_WHITESPACE"," ",220],["T_AS","as",220],["T_WHITESPACE"," ",220],["T_VARIABLE","$carrierCode",220],["T_WHITESPACE"," ",220],["T_DOUBLE_ARROW","=>",220],["T_WHITESPACE"," ",220],["T_VARIABLE","$carrierConfig",220],")",["T_WHITESPACE"," ",220],"{",["T_WHITESPACE","\n                ",220],["T_VARIABLE","$this",221],["T_OBJECT_OPERATOR","->",221],["T_STRING","collectCarrierRates",221],"(",["T_VARIABLE","$carrierCode",221],",",["T_WHITESPACE"," ",221],["T_VARIABLE","$request",221],")",";",["T_WHITESPACE","\n            ",221],"}",["T_WHITESPACE","\n        ",222],"}",["T_WHITESPACE"," ",223],["T_ELSE","else",223],["T_WHITESPACE"," ",223],"{",["T_WHITESPACE","\n            ",223],["T_IF","if",224],["T_WHITESPACE"," ",224],"(","!",["T_STRING","is_array",224],"(",["T_VARIABLE","$limitCarrier",224],")",")",["T_WHITESPACE"," ",224],"{",["T_WHITESPACE","\n                ",224],["T_VARIABLE","$limitCarrier",225],["T_WHITESPACE"," ",225],"=",["T_WHITESPACE"," ",225],"[",["T_VARIABLE","$limitCarrier",225],"]",";",["T_WHITESPACE","\n            ",225],"}",["T_WHITESPACE","\n            ",226],["T_FOREACH","foreach",227],["T_WHITESPACE"," ",227],"(",["T_VARIABLE","$limitCarrier",227],["T_WHITESPACE"," ",227],["T_AS","as",227],["T_WHITESPACE"," ",227],["T_VARIABLE","$carrierCode",227],")",["T_WHITESPACE"," ",227],"{",["T_WHITESPACE","\n                ",227],["T_VARIABLE","$carrierConfig",228],["T_WHITESPACE"," ",228],"=",["T_WHITESPACE"," ",228],["T_VARIABLE","$this",228],["T_OBJECT_OPERATOR","->",228],["T_STRING","_scopeConfig",228],["T_OBJECT_OPERATOR","->",228],["T_STRING","getValue",228],"(",["T_WHITESPACE","\n                    ",228],["T_CONSTANT_ENCAPSED_STRING","'carriers\/'",229],["T_WHITESPACE"," ",229],".",["T_WHITESPACE"," ",229],["T_VARIABLE","$carrierCode",229],",",["T_WHITESPACE","\n                    ",229],["T_NS_SEPARATOR","\\",230],["T_STRING","Magento",230],["T_NS_SEPARATOR","\\",230],["T_STRING","Store",230],["T_NS_SEPARATOR","\\",230],["T_STRING","Model",230],["T_NS_SEPARATOR","\\",230],["T_STRING","ScopeInterface",230],["T_DOUBLE_COLON","::",230],["T_STRING","SCOPE_STORE",230],",",["T_WHITESPACE","\n                    ",230],["T_VARIABLE","$storeId",231],["T_WHITESPACE","\n                ",231],")",";",["T_WHITESPACE","\n                ",232],["T_IF","if",233],["T_WHITESPACE"," ",233],"(","!",["T_VARIABLE","$carrierConfig",233],")",["T_WHITESPACE"," ",233],"{",["T_WHITESPACE","\n                    ",233],["T_CONTINUE","continue",234],";",["T_WHITESPACE","\n                ",234],"}",["T_WHITESPACE","\n                ",235],["T_VARIABLE","$this",236],["T_OBJECT_OPERATOR","->",236],["T_STRING","collectCarrierRates",236],"(",["T_VARIABLE","$carrierCode",236],",",["T_WHITESPACE"," ",236],["T_VARIABLE","$request",236],")",";",["T_WHITESPACE","\n            ",236],"}",["T_WHITESPACE","\n        ",237],"}",["T_WHITESPACE","\n\n        ",238],["T_RETURN","return",240],["T_WHITESPACE"," ",240],["T_VARIABLE","$this",240],";",["T_WHITESPACE","\n    ",240],"}",["T_WHITESPACE","\n\n    ",241],["T_DOC_COMMENT","\/**\n     * Collect rates of given carrier\n     *\n     * @param string $carrierCode\n     * @param \\Magento\\Quote\\Model\\Quote\\Address\\RateRequest $request\n     * @return $this\n     * @SuppressWarnings(PHPMD.CyclomaticComplexity)\n     * @SuppressWarnings(PHPMD.NPathComplexity)\n     *\/",243],["T_WHITESPACE","\n    ",251],["T_PUBLIC","public",252],["T_WHITESPACE"," ",252],["T_FUNCTION","function",252],["T_WHITESPACE"," ",252],["T_STRING","collectCarrierRates",252],"(",["T_VARIABLE","$carrierCode",252],",",["T_WHITESPACE"," ",252],["T_VARIABLE","$request",252],")",["T_WHITESPACE","\n    ",252],"{",["T_WHITESPACE","\n        ",253],["T_COMMENT","\/* @var $carrier \\Magento\\Shipping\\Model\\Carrier\\AbstractCarrier *\/",254],["T_WHITESPACE","\n        ",254],["T_VARIABLE","$carrier",255],["T_WHITESPACE"," ",255],"=",["T_WHITESPACE"," ",255],["T_VARIABLE","$this",255],["T_OBJECT_OPERATOR","->",255],["T_STRING","_carrierFactory",255],["T_OBJECT_OPERATOR","->",255],["T_STRING","createIfActive",255],"(",["T_VARIABLE","$carrierCode",255],",",["T_WHITESPACE"," ",255],["T_VARIABLE","$request",255],["T_OBJECT_OPERATOR","->",255],["T_STRING","getStoreId",255],"(",")",")",";",["T_WHITESPACE","\n        ",255],["T_IF","if",256],["T_WHITESPACE"," ",256],"(","!",["T_VARIABLE","$carrier",256],")",["T_WHITESPACE"," ",256],"{",["T_WHITESPACE","\n            ",256],["T_RETURN","return",257],["T_WHITESPACE"," ",257],["T_VARIABLE","$this",257],";",["T_WHITESPACE","\n        ",257],"}",["T_WHITESPACE","\n        ",258],["T_VARIABLE","$carrier",259],["T_OBJECT_OPERATOR","->",259],["T_STRING","setActiveFlag",259],"(",["T_VARIABLE","$this",259],["T_OBJECT_OPERATOR","->",259],["T_STRING","_availabilityConfigField",259],")",";",["T_WHITESPACE","\n        ",259],["T_VARIABLE","$result",260],["T_WHITESPACE"," ",260],"=",["T_WHITESPACE"," ",260],["T_VARIABLE","$carrier",260],["T_OBJECT_OPERATOR","->",260],["T_STRING","checkAvailableShipCountries",260],"(",["T_VARIABLE","$request",260],")",";",["T_WHITESPACE","\n        ",260],["T_IF","if",261],["T_WHITESPACE"," ",261],"(",["T_STRING","false",261],["T_WHITESPACE"," ",261],["T_IS_NOT_IDENTICAL","!==",261],["T_WHITESPACE"," ",261],["T_VARIABLE","$result",261],["T_WHITESPACE"," ",261],["T_BOOLEAN_AND","&&",261],["T_WHITESPACE"," ",261],"!",["T_VARIABLE","$result",261],["T_WHITESPACE"," ",261],["T_INSTANCEOF","instanceof",261],["T_WHITESPACE"," ",261],["T_NS_SEPARATOR","\\",261],["T_STRING","Magento",261],["T_NS_SEPARATOR","\\",261],["T_STRING","Quote",261],["T_NS_SEPARATOR","\\",261],["T_STRING","Model",261],["T_NS_SEPARATOR","\\",261],["T_STRING","Quote",261],["T_NS_SEPARATOR","\\",261],["T_STRING","Address",261],["T_NS_SEPARATOR","\\",261],["T_STRING","RateResult",261],["T_NS_SEPARATOR","\\",261],["T_STRING","Error",261],")",["T_WHITESPACE"," ",261],"{",["T_WHITESPACE","\n            ",261],["T_VARIABLE","$result",262],["T_WHITESPACE"," ",262],"=",["T_WHITESPACE"," ",262],["T_VARIABLE","$carrier",262],["T_OBJECT_OPERATOR","->",262],["T_STRING","proccessAdditionalValidation",262],"(",["T_VARIABLE","$request",262],")",";",["T_WHITESPACE","\n        ",262],"}",["T_WHITESPACE","\n        ",263],["T_COMMENT","\/*\n         * Result will be false if the admin set not to show the shipping module\n         * if the delivery country is not within specific countries\n         *\/",264],["T_WHITESPACE","\n        ",267],["T_IF","if",268],["T_WHITESPACE"," ",268],"(",["T_STRING","false",268],["T_WHITESPACE"," ",268],["T_IS_NOT_IDENTICAL","!==",268],["T_WHITESPACE"," ",268],["T_VARIABLE","$result",268],")",["T_WHITESPACE"," ",268],"{",["T_WHITESPACE","\n            ",268],["T_IF","if",269],["T_WHITESPACE"," ",269],"(","!",["T_VARIABLE","$result",269],["T_WHITESPACE"," ",269],["T_INSTANCEOF","instanceof",269],["T_WHITESPACE"," ",269],["T_NS_SEPARATOR","\\",269],["T_STRING","Magento",269],["T_NS_SEPARATOR","\\",269],["T_STRING","Quote",269],["T_NS_SEPARATOR","\\",269],["T_STRING","Model",269],["T_NS_SEPARATOR","\\",269],["T_STRING","Quote",269],["T_NS_SEPARATOR","\\",269],["T_STRING","Address",269],["T_NS_SEPARATOR","\\",269],["T_STRING","RateResult",269],["T_NS_SEPARATOR","\\",269],["T_STRING","Error",269],")",["T_WHITESPACE"," ",269],"{",["T_WHITESPACE","\n                ",269],["T_IF","if",270],["T_WHITESPACE"," ",270],"(",["T_VARIABLE","$carrier",270],["T_OBJECT_OPERATOR","->",270],["T_STRING","getConfigData",270],"(",["T_CONSTANT_ENCAPSED_STRING","'shipment_requesttype'",270],")",")",["T_WHITESPACE"," ",270],"{",["T_WHITESPACE","\n                    ",270],["T_VARIABLE","$packages",271],["T_WHITESPACE"," ",271],"=",["T_WHITESPACE"," ",271],["T_VARIABLE","$this",271],["T_OBJECT_OPERATOR","->",271],["T_STRING","composePackagesForCarrier",271],"(",["T_VARIABLE","$carrier",271],",",["T_WHITESPACE"," ",271],["T_VARIABLE","$request",271],")",";",["T_WHITESPACE","\n                    ",271],["T_IF","if",272],["T_WHITESPACE"," ",272],"(","!",["T_EMPTY","empty",272],"(",["T_VARIABLE","$packages",272],")",")",["T_WHITESPACE"," ",272],"{",["T_WHITESPACE","\n                        ",272],["T_VARIABLE","$sumResults",273],["T_WHITESPACE"," ",273],"=",["T_WHITESPACE"," ",273],"[","]",";",["T_WHITESPACE","\n                        ",273],["T_FOREACH","foreach",274],["T_WHITESPACE"," ",274],"(",["T_VARIABLE","$packages",274],["T_WHITESPACE"," ",274],["T_AS","as",274],["T_WHITESPACE"," ",274],["T_VARIABLE","$weight",274],["T_WHITESPACE"," ",274],["T_DOUBLE_ARROW","=>",274],["T_WHITESPACE"," ",274],["T_VARIABLE","$packageCount",274],")",["T_WHITESPACE"," ",274],"{",["T_WHITESPACE","\n                            ",274],["T_VARIABLE","$request",275],["T_OBJECT_OPERATOR","->",275],["T_STRING","setPackageWeight",275],"(",["T_VARIABLE","$weight",275],")",";",["T_WHITESPACE","\n                            ",275],["T_VARIABLE","$result",276],["T_WHITESPACE"," ",276],"=",["T_WHITESPACE"," ",276],["T_VARIABLE","$carrier",276],["T_OBJECT_OPERATOR","->",276],["T_STRING","collectRates",276],"(",["T_VARIABLE","$request",276],")",";",["T_WHITESPACE","\n                            ",276],["T_IF","if",277],["T_WHITESPACE"," ",277],"(","!",["T_VARIABLE","$result",277],")",["T_WHITESPACE"," ",277],"{",["T_WHITESPACE","\n                                ",277],["T_RETURN","return",278],["T_WHITESPACE"," ",278],["T_VARIABLE","$this",278],";",["T_WHITESPACE","\n                            ",278],"}",["T_WHITESPACE"," ",279],["T_ELSE","else",279],["T_WHITESPACE"," ",279],"{",["T_WHITESPACE","\n                                ",279],["T_VARIABLE","$result",280],["T_OBJECT_OPERATOR","->",280],["T_STRING","updateRatePrice",280],"(",["T_VARIABLE","$packageCount",280],")",";",["T_WHITESPACE","\n                            ",280],"}",["T_WHITESPACE","\n                            ",281],["T_VARIABLE","$sumResults",282],"[","]",["T_WHITESPACE"," ",282],"=",["T_WHITESPACE"," ",282],["T_VARIABLE","$result",282],";",["T_WHITESPACE","\n                        ",282],"}",["T_WHITESPACE","\n                        ",283],["T_IF","if",284],["T_WHITESPACE"," ",284],"(","!",["T_EMPTY","empty",284],"(",["T_VARIABLE","$sumResults",284],")",["T_WHITESPACE"," ",284],["T_BOOLEAN_AND","&&",284],["T_WHITESPACE"," ",284],["T_STRING","count",284],"(",["T_VARIABLE","$sumResults",284],")",["T_WHITESPACE"," ",284],">",["T_WHITESPACE"," ",284],["T_LNUMBER","1",284],")",["T_WHITESPACE"," ",284],"{",["T_WHITESPACE","\n                            ",284],["T_VARIABLE","$result",285],["T_WHITESPACE"," ",285],"=",["T_WHITESPACE"," ",285],"[","]",";",["T_WHITESPACE","\n                            ",285],["T_FOREACH","foreach",286],["T_WHITESPACE"," ",286],"(",["T_VARIABLE","$sumResults",286],["T_WHITESPACE"," ",286],["T_AS","as",286],["T_WHITESPACE"," ",286],["T_VARIABLE","$res",286],")",["T_WHITESPACE"," ",286],"{",["T_WHITESPACE","\n                                ",286],["T_IF","if",287],["T_WHITESPACE"," ",287],"(",["T_EMPTY","empty",287],"(",["T_VARIABLE","$result",287],")",")",["T_WHITESPACE"," ",287],"{",["T_WHITESPACE","\n                                    ",287],["T_VARIABLE","$result",288],["T_WHITESPACE"," ",288],"=",["T_WHITESPACE"," ",288],["T_VARIABLE","$res",288],";",["T_WHITESPACE","\n                                    ",288],["T_CONTINUE","continue",289],";",["T_WHITESPACE","\n                                ",289],"}",["T_WHITESPACE","\n                                ",290],["T_FOREACH","foreach",291],["T_WHITESPACE"," ",291],"(",["T_VARIABLE","$res",291],["T_OBJECT_OPERATOR","->",291],["T_STRING","getAllRates",291],"(",")",["T_WHITESPACE"," ",291],["T_AS","as",291],["T_WHITESPACE"," ",291],["T_VARIABLE","$method",291],")",["T_WHITESPACE"," ",291],"{",["T_WHITESPACE","\n                                    ",291],["T_FOREACH","foreach",292],["T_WHITESPACE"," ",292],"(",["T_VARIABLE","$result",292],["T_OBJECT_OPERATOR","->",292],["T_STRING","getAllRates",292],"(",")",["T_WHITESPACE"," ",292],["T_AS","as",292],["T_WHITESPACE"," ",292],["T_VARIABLE","$resultMethod",292],")",["T_WHITESPACE"," ",292],"{",["T_WHITESPACE","\n                                        ",292],["T_IF","if",293],["T_WHITESPACE"," ",293],"(",["T_VARIABLE","$method",293],["T_OBJECT_OPERATOR","->",293],["T_STRING","getMethod",293],"(",")",["T_WHITESPACE"," ",293],["T_IS_EQUAL","==",293],["T_WHITESPACE"," ",293],["T_VARIABLE","$resultMethod",293],["T_OBJECT_OPERATOR","->",293],["T_STRING","getMethod",293],"(",")",")",["T_WHITESPACE"," ",293],"{",["T_WHITESPACE","\n                                            ",293],["T_VARIABLE","$resultMethod",294],["T_OBJECT_OPERATOR","->",294],["T_STRING","setPrice",294],"(",["T_VARIABLE","$method",294],["T_OBJECT_OPERATOR","->",294],["T_STRING","getPrice",294],"(",")",["T_WHITESPACE"," ",294],"+",["T_WHITESPACE"," ",294],["T_VARIABLE","$resultMethod",294],["T_OBJECT_OPERATOR","->",294],["T_STRING","getPrice",294],"(",")",")",";",["T_WHITESPACE","\n                                            ",294],["T_CONTINUE","continue",295],";",["T_WHITESPACE","\n                                        ",295],"}",["T_WHITESPACE","\n                                    ",296],"}",["T_WHITESPACE","\n                                ",297],"}",["T_WHITESPACE","\n                            ",298],"}",["T_WHITESPACE","\n                        ",299],"}",["T_WHITESPACE","\n                    ",300],"}",["T_WHITESPACE"," ",301],["T_ELSE","else",301],["T_WHITESPACE"," ",301],"{",["T_WHITESPACE","\n                        ",301],["T_VARIABLE","$result",302],["T_WHITESPACE"," ",302],"=",["T_WHITESPACE"," ",302],["T_VARIABLE","$carrier",302],["T_OBJECT_OPERATOR","->",302],["T_STRING","collectRates",302],"(",["T_VARIABLE","$request",302],")",";",["T_WHITESPACE","\n                    ",302],"}",["T_WHITESPACE","\n                ",303],"}",["T_WHITESPACE"," ",304],["T_ELSE","else",304],["T_WHITESPACE"," ",304],"{",["T_WHITESPACE","\n                    ",304],["T_VARIABLE","$result",305],["T_WHITESPACE"," ",305],"=",["T_WHITESPACE"," ",305],["T_VARIABLE","$carrier",305],["T_OBJECT_OPERATOR","->",305],["T_STRING","collectRates",305],"(",["T_VARIABLE","$request",305],")",";",["T_WHITESPACE","\n                ",305],"}",["T_WHITESPACE","\n                ",306],["T_IF","if",307],["T_WHITESPACE"," ",307],"(","!",["T_VARIABLE","$result",307],")",["T_WHITESPACE"," ",307],"{",["T_WHITESPACE","\n                    ",307],["T_RETURN","return",308],["T_WHITESPACE"," ",308],["T_VARIABLE","$this",308],";",["T_WHITESPACE","\n                ",308],"}",["T_WHITESPACE","\n            ",309],"}",["T_WHITESPACE","\n            ",310],["T_IF","if",311],["T_WHITESPACE"," ",311],"(",["T_VARIABLE","$carrier",311],["T_OBJECT_OPERATOR","->",311],["T_STRING","getConfigData",311],"(",["T_CONSTANT_ENCAPSED_STRING","'showmethod'",311],")",["T_WHITESPACE"," ",311],["T_IS_EQUAL","==",311],["T_WHITESPACE"," ",311],["T_LNUMBER","0",311],["T_WHITESPACE"," ",311],["T_BOOLEAN_AND","&&",311],["T_WHITESPACE"," ",311],["T_VARIABLE","$result",311],["T_OBJECT_OPERATOR","->",311],["T_STRING","getError",311],"(",")",")",["T_WHITESPACE"," ",311],"{",["T_WHITESPACE","\n                ",311],["T_RETURN","return",312],["T_WHITESPACE"," ",312],["T_VARIABLE","$this",312],";",["T_WHITESPACE","\n            ",312],"}",["T_WHITESPACE","\n            ",313],["T_COMMENT","\/\/ sort rates by price\n",314],["T_WHITESPACE","            ",315],["T_IF","if",315],["T_WHITESPACE"," ",315],"(",["T_STRING","method_exists",315],"(",["T_VARIABLE","$result",315],",",["T_WHITESPACE"," ",315],["T_CONSTANT_ENCAPSED_STRING","'sortRatesByPrice'",315],")",["T_WHITESPACE"," ",315],["T_BOOLEAN_AND","&&",315],["T_WHITESPACE"," ",315],["T_STRING","is_callable",315],"(","[",["T_VARIABLE","$result",315],",",["T_WHITESPACE"," ",315],["T_CONSTANT_ENCAPSED_STRING","'sortRatesByPrice'",315],"]",")",")",["T_WHITESPACE"," ",315],"{",["T_WHITESPACE","\n                ",315],["T_VARIABLE","$result",316],["T_OBJECT_OPERATOR","->",316],["T_STRING","sortRatesByPrice",316],"(",")",";",["T_WHITESPACE","\n            ",316],"}",["T_WHITESPACE","\n            ",317],["T_VARIABLE","$this",318],["T_OBJECT_OPERATOR","->",318],["T_STRING","getResult",318],"(",")",["T_OBJECT_OPERATOR","->",318],["T_STRING","append",318],"(",["T_VARIABLE","$result",318],")",";",["T_WHITESPACE","\n        ",318],"}",["T_WHITESPACE","\n        ",319],["T_RETURN","return",320],["T_WHITESPACE"," ",320],["T_VARIABLE","$this",320],";",["T_WHITESPACE","\n    ",320],"}",["T_WHITESPACE","\n\n    ",321],["T_DOC_COMMENT","\/**\n     * Compose Packages For Carrier.\n     * Divides order into items and items into parts if it's necessary\n     *\n     * @param \\Magento\\Shipping\\Model\\Carrier\\AbstractCarrier $carrier\n     * @param \\Magento\\Quote\\Model\\Quote\\Address\\RateRequest $request\n     * @return array [int, float]\n     * @SuppressWarnings(PHPMD.CyclomaticComplexity)\n     * @SuppressWarnings(PHPMD.NPathComplexity)\n     *\/",323],["T_WHITESPACE","\n    ",332],["T_PUBLIC","public",333],["T_WHITESPACE"," ",333],["T_FUNCTION","function",333],["T_WHITESPACE"," ",333],["T_STRING","composePackagesForCarrier",333],"(",["T_VARIABLE","$carrier",333],",",["T_WHITESPACE"," ",333],["T_VARIABLE","$request",333],")",["T_WHITESPACE","\n    ",333],"{",["T_WHITESPACE","\n        ",334],["T_VARIABLE","$allItems",335],["T_WHITESPACE"," ",335],"=",["T_WHITESPACE"," ",335],["T_VARIABLE","$request",335],["T_OBJECT_OPERATOR","->",335],["T_STRING","getAllItems",335],"(",")",";",["T_WHITESPACE","\n        ",335],["T_VARIABLE","$fullItems",336],["T_WHITESPACE"," ",336],"=",["T_WHITESPACE"," ",336],"[","]",";",["T_WHITESPACE","\n\n        ",336],["T_VARIABLE","$maxWeight",338],["T_WHITESPACE"," ",338],"=",["T_WHITESPACE"," ",338],["T_DOUBLE_CAST","(double)",338],["T_VARIABLE","$carrier",338],["T_OBJECT_OPERATOR","->",338],["T_STRING","getConfigData",338],"(",["T_CONSTANT_ENCAPSED_STRING","'max_package_weight'",338],")",";",["T_WHITESPACE","\n\n        ",338],["T_DOC_COMMENT","\/** @var $item \\Magento\\Quote\\Model\\Quote\\Item *\/",340],["T_WHITESPACE","\n        ",340],["T_FOREACH","foreach",341],["T_WHITESPACE"," ",341],"(",["T_VARIABLE","$allItems",341],["T_WHITESPACE"," ",341],["T_AS","as",341],["T_WHITESPACE"," ",341],["T_VARIABLE","$item",341],")",["T_WHITESPACE"," ",341],"{",["T_WHITESPACE","\n            ",341],["T_IF","if",342],["T_WHITESPACE"," ",342],"(",["T_VARIABLE","$item",342],["T_OBJECT_OPERATOR","->",342],["T_STRING","getProductType",342],"(",")",["T_WHITESPACE"," ",342],["T_IS_EQUAL","==",342],["T_WHITESPACE"," ",342],["T_NS_SEPARATOR","\\",342],["T_STRING","Magento",342],["T_NS_SEPARATOR","\\",342],["T_STRING","Catalog",342],["T_NS_SEPARATOR","\\",342],["T_STRING","Model",342],["T_NS_SEPARATOR","\\",342],["T_STRING","Product",342],["T_NS_SEPARATOR","\\",342],["T_STRING","Type",342],["T_DOUBLE_COLON","::",342],["T_STRING","TYPE_BUNDLE",342],["T_WHITESPACE","\n                ",342],["T_BOOLEAN_AND","&&",343],["T_WHITESPACE"," ",343],["T_VARIABLE","$item",343],["T_OBJECT_OPERATOR","->",343],["T_STRING","getProduct",343],"(",")",["T_OBJECT_OPERATOR","->",343],["T_STRING","getShipmentType",343],"(",")",["T_WHITESPACE","\n            ",343],")",["T_WHITESPACE"," ",344],"{",["T_WHITESPACE","\n                ",344],["T_CONTINUE","continue",345],";",["T_WHITESPACE","\n            ",345],"}",["T_WHITESPACE","\n\n            ",346],["T_VARIABLE","$qty",348],["T_WHITESPACE"," ",348],"=",["T_WHITESPACE"," ",348],["T_VARIABLE","$item",348],["T_OBJECT_OPERATOR","->",348],["T_STRING","getQty",348],"(",")",";",["T_WHITESPACE","\n            ",348],["T_VARIABLE","$changeQty",349],["T_WHITESPACE"," ",349],"=",["T_WHITESPACE"," ",349],["T_STRING","true",349],";",["T_WHITESPACE","\n            ",349],["T_VARIABLE","$checkWeight",350],["T_WHITESPACE"," ",350],"=",["T_WHITESPACE"," ",350],["T_STRING","true",350],";",["T_WHITESPACE","\n            ",350],["T_VARIABLE","$decimalItems",351],["T_WHITESPACE"," ",351],"=",["T_WHITESPACE"," ",351],"[","]",";",["T_WHITESPACE","\n\n            ",351],["T_IF","if",353],["T_WHITESPACE"," ",353],"(",["T_VARIABLE","$item",353],["T_OBJECT_OPERATOR","->",353],["T_STRING","getParentItem",353],"(",")",")",["T_WHITESPACE"," ",353],"{",["T_WHITESPACE","\n                ",353],["T_IF","if",354],["T_WHITESPACE"," ",354],"(","!",["T_VARIABLE","$item",354],["T_OBJECT_OPERATOR","->",354],["T_STRING","getParentItem",354],"(",")",["T_OBJECT_OPERATOR","->",354],["T_STRING","getProduct",354],"(",")",["T_OBJECT_OPERATOR","->",354],["T_STRING","getShipmentType",354],"(",")",")",["T_WHITESPACE"," ",354],"{",["T_WHITESPACE","\n                    ",354],["T_CONTINUE","continue",355],";",["T_WHITESPACE","\n                ",355],"}",["T_WHITESPACE","\n                ",356],["T_VARIABLE","$qty",357],["T_WHITESPACE"," ",357],"=",["T_WHITESPACE"," ",357],["T_VARIABLE","$item",357],["T_OBJECT_OPERATOR","->",357],["T_STRING","getIsQtyDecimal",357],"(",")",["T_WHITESPACE","\n                    ",357],"?",["T_WHITESPACE"," ",358],["T_VARIABLE","$item",358],["T_OBJECT_OPERATOR","->",358],["T_STRING","getParentItem",358],"(",")",["T_OBJECT_OPERATOR","->",358],["T_STRING","getQty",358],"(",")",["T_WHITESPACE","\n                    ",358],":",["T_WHITESPACE"," ",359],["T_VARIABLE","$item",359],["T_OBJECT_OPERATOR","->",359],["T_STRING","getParentItem",359],"(",")",["T_OBJECT_OPERATOR","->",359],["T_STRING","getQty",359],"(",")",["T_WHITESPACE"," ",359],"*",["T_WHITESPACE"," ",359],["T_VARIABLE","$item",359],["T_OBJECT_OPERATOR","->",359],["T_STRING","getQty",359],"(",")",";",["T_WHITESPACE","\n            ",359],"}",["T_WHITESPACE","\n\n            ",360],["T_VARIABLE","$itemWeight",362],["T_WHITESPACE"," ",362],"=",["T_WHITESPACE"," ",362],["T_VARIABLE","$item",362],["T_OBJECT_OPERATOR","->",362],["T_STRING","getWeight",362],"(",")",";",["T_WHITESPACE","\n            ",362],["T_IF","if",363],["T_WHITESPACE"," ",363],"(",["T_VARIABLE","$item",363],["T_OBJECT_OPERATOR","->",363],["T_STRING","getIsQtyDecimal",363],"(",")",["T_WHITESPACE","\n                ",363],["T_BOOLEAN_AND","&&",364],["T_WHITESPACE"," ",364],["T_VARIABLE","$item",364],["T_OBJECT_OPERATOR","->",364],["T_STRING","getProductType",364],"(",")",["T_WHITESPACE"," ",364],["T_IS_NOT_EQUAL","!=",364],["T_WHITESPACE"," ",364],["T_NS_SEPARATOR","\\",364],["T_STRING","Magento",364],["T_NS_SEPARATOR","\\",364],["T_STRING","Catalog",364],["T_NS_SEPARATOR","\\",364],["T_STRING","Model",364],["T_NS_SEPARATOR","\\",364],["T_STRING","Product",364],["T_NS_SEPARATOR","\\",364],["T_STRING","Type",364],["T_DOUBLE_COLON","::",364],["T_STRING","TYPE_BUNDLE",364],["T_WHITESPACE","\n            ",364],")",["T_WHITESPACE"," ",365],"{",["T_WHITESPACE","\n                ",365],["T_VARIABLE","$productId",366],["T_WHITESPACE"," ",366],"=",["T_WHITESPACE"," ",366],["T_VARIABLE","$item",366],["T_OBJECT_OPERATOR","->",366],["T_STRING","getProduct",366],"(",")",["T_OBJECT_OPERATOR","->",366],["T_STRING","getId",366],"(",")",";",["T_WHITESPACE","\n\n                ",366],["T_VARIABLE","$stockItem",368],["T_WHITESPACE"," ",368],"=",["T_WHITESPACE"," ",368],["T_VARIABLE","$this",368],["T_OBJECT_OPERATOR","->",368],["T_STRING","stockRegistry",368],["T_OBJECT_OPERATOR","->",368],["T_STRING","getStockItem",368],"(",["T_VARIABLE","$productId",368],",",["T_WHITESPACE"," ",368],["T_VARIABLE","$item",368],["T_OBJECT_OPERATOR","->",368],["T_STRING","getStore",368],"(",")",["T_OBJECT_OPERATOR","->",368],["T_STRING","getWebsiteId",368],"(",")",")",";",["T_WHITESPACE","\n                ",368],["T_IF","if",369],["T_WHITESPACE"," ",369],"(",["T_VARIABLE","$stockItem",369],["T_OBJECT_OPERATOR","->",369],["T_STRING","getIsDecimalDivided",369],"(",")",")",["T_WHITESPACE"," ",369],"{",["T_WHITESPACE","\n                    ",369],["T_IF","if",370],["T_WHITESPACE"," ",370],"(",["T_VARIABLE","$stockItem",370],["T_OBJECT_OPERATOR","->",370],["T_STRING","getEnableQtyIncrements",370],"(",")",["T_WHITESPACE"," ",370],["T_BOOLEAN_AND","&&",370],["T_WHITESPACE"," ",370],["T_VARIABLE","$stockItem",370],["T_OBJECT_OPERATOR","->",370],["T_STRING","getQtyIncrements",370],"(",")",")",["T_WHITESPACE"," ",370],"{",["T_WHITESPACE","\n                        ",370],["T_VARIABLE","$itemWeight",371],["T_WHITESPACE"," ",371],"=",["T_WHITESPACE"," ",371],["T_VARIABLE","$itemWeight",371],["T_WHITESPACE"," ",371],"*",["T_WHITESPACE"," ",371],["T_VARIABLE","$stockItem",371],["T_OBJECT_OPERATOR","->",371],["T_STRING","getQtyIncrements",371],"(",")",";",["T_WHITESPACE","\n                        ",371],["T_VARIABLE","$qty",372],["T_WHITESPACE"," ",372],"=",["T_WHITESPACE"," ",372],["T_STRING","round",372],"(",["T_VARIABLE","$item",372],["T_OBJECT_OPERATOR","->",372],["T_STRING","getWeight",372],"(",")",["T_WHITESPACE"," ",372],"\/",["T_WHITESPACE"," ",372],["T_VARIABLE","$itemWeight",372],["T_WHITESPACE"," ",372],"*",["T_WHITESPACE"," ",372],["T_VARIABLE","$qty",372],")",";",["T_WHITESPACE","\n                        ",372],["T_VARIABLE","$changeQty",373],["T_WHITESPACE"," ",373],"=",["T_WHITESPACE"," ",373],["T_STRING","false",373],";",["T_WHITESPACE","\n                    ",373],"}",["T_WHITESPACE"," ",374],["T_ELSE","else",374],["T_WHITESPACE"," ",374],"{",["T_WHITESPACE","\n                        ",374],["T_VARIABLE","$itemWeight",375],["T_WHITESPACE"," ",375],"=",["T_WHITESPACE"," ",375],["T_VARIABLE","$itemWeight",375],["T_WHITESPACE"," ",375],"*",["T_WHITESPACE"," ",375],["T_VARIABLE","$item",375],["T_OBJECT_OPERATOR","->",375],["T_STRING","getQty",375],"(",")",";",["T_WHITESPACE","\n                        ",375],["T_IF","if",376],["T_WHITESPACE"," ",376],"(",["T_VARIABLE","$itemWeight",376],["T_WHITESPACE"," ",376],">",["T_WHITESPACE"," ",376],["T_VARIABLE","$maxWeight",376],")",["T_WHITESPACE"," ",376],"{",["T_WHITESPACE","\n                            ",376],["T_VARIABLE","$qtyItem",377],["T_WHITESPACE"," ",377],"=",["T_WHITESPACE"," ",377],["T_STRING","floor",377],"(",["T_VARIABLE","$itemWeight",377],["T_WHITESPACE"," ",377],"\/",["T_WHITESPACE"," ",377],["T_VARIABLE","$maxWeight",377],")",";",["T_WHITESPACE","\n                            ",377],["T_VARIABLE","$decimalItems",378],"[","]",["T_WHITESPACE"," ",378],"=",["T_WHITESPACE"," ",378],"[",["T_CONSTANT_ENCAPSED_STRING","'weight'",378],["T_WHITESPACE"," ",378],["T_DOUBLE_ARROW","=>",378],["T_WHITESPACE"," ",378],["T_VARIABLE","$maxWeight",378],",",["T_WHITESPACE"," ",378],["T_CONSTANT_ENCAPSED_STRING","'qty'",378],["T_WHITESPACE"," ",378],["T_DOUBLE_ARROW","=>",378],["T_WHITESPACE"," ",378],["T_VARIABLE","$qtyItem",378],"]",";",["T_WHITESPACE","\n                            ",378],["T_VARIABLE","$weightItem",379],["T_WHITESPACE"," ",379],"=",["T_WHITESPACE"," ",379],["T_VARIABLE","$this",379],["T_OBJECT_OPERATOR","->",379],["T_STRING","mathDivision",379],["T_OBJECT_OPERATOR","->",379],["T_STRING","getExactDivision",379],"(",["T_VARIABLE","$itemWeight",379],",",["T_WHITESPACE"," ",379],["T_VARIABLE","$maxWeight",379],")",";",["T_WHITESPACE","\n                            ",379],["T_IF","if",380],["T_WHITESPACE"," ",380],"(",["T_VARIABLE","$weightItem",380],")",["T_WHITESPACE"," ",380],"{",["T_WHITESPACE","\n                                ",380],["T_VARIABLE","$decimalItems",381],"[","]",["T_WHITESPACE"," ",381],"=",["T_WHITESPACE"," ",381],"[",["T_CONSTANT_ENCAPSED_STRING","'weight'",381],["T_WHITESPACE"," ",381],["T_DOUBLE_ARROW","=>",381],["T_WHITESPACE"," ",381],["T_VARIABLE","$weightItem",381],",",["T_WHITESPACE"," ",381],["T_CONSTANT_ENCAPSED_STRING","'qty'",381],["T_WHITESPACE"," ",381],["T_DOUBLE_ARROW","=>",381],["T_WHITESPACE"," ",381],["T_LNUMBER","1",381],"]",";",["T_WHITESPACE","\n                            ",381],"}",["T_WHITESPACE","\n                            ",382],["T_VARIABLE","$checkWeight",383],["T_WHITESPACE"," ",383],"=",["T_WHITESPACE"," ",383],["T_STRING","false",383],";",["T_WHITESPACE","\n                        ",383],"}",["T_WHITESPACE"," ",384],["T_ELSE","else",384],["T_WHITESPACE"," ",384],"{",["T_WHITESPACE","\n                            ",384],["T_VARIABLE","$itemWeight",385],["T_WHITESPACE"," ",385],"=",["T_WHITESPACE"," ",385],["T_VARIABLE","$itemWeight",385],["T_WHITESPACE"," ",385],"*",["T_WHITESPACE"," ",385],["T_VARIABLE","$item",385],["T_OBJECT_OPERATOR","->",385],["T_STRING","getQty",385],"(",")",";",["T_WHITESPACE","\n                        ",385],"}",["T_WHITESPACE","\n                    ",386],"}",["T_WHITESPACE","\n                ",387],"}",["T_WHITESPACE"," ",388],["T_ELSE","else",388],["T_WHITESPACE"," ",388],"{",["T_WHITESPACE","\n                    ",388],["T_VARIABLE","$itemWeight",389],["T_WHITESPACE"," ",389],"=",["T_WHITESPACE"," ",389],["T_VARIABLE","$itemWeight",389],["T_WHITESPACE"," ",389],"*",["T_WHITESPACE"," ",389],["T_VARIABLE","$item",389],["T_OBJECT_OPERATOR","->",389],["T_STRING","getQty",389],"(",")",";",["T_WHITESPACE","\n                ",389],"}",["T_WHITESPACE","\n            ",390],"}",["T_WHITESPACE","\n\n            ",391],["T_IF","if",393],["T_WHITESPACE"," ",393],"(",["T_VARIABLE","$checkWeight",393],["T_WHITESPACE"," ",393],["T_BOOLEAN_AND","&&",393],["T_WHITESPACE"," ",393],["T_VARIABLE","$maxWeight",393],["T_WHITESPACE"," ",393],["T_BOOLEAN_AND","&&",393],["T_WHITESPACE"," ",393],["T_VARIABLE","$itemWeight",393],["T_WHITESPACE"," ",393],">",["T_WHITESPACE"," ",393],["T_VARIABLE","$maxWeight",393],")",["T_WHITESPACE"," ",393],"{",["T_WHITESPACE","\n                ",393],["T_RETURN","return",394],["T_WHITESPACE"," ",394],"[","]",";",["T_WHITESPACE","\n            ",394],"}",["T_WHITESPACE","\n\n            ",395],["T_IF","if",397],["T_WHITESPACE"," ",397],"(",["T_VARIABLE","$changeQty",397],["T_WHITESPACE","\n                ",397],["T_BOOLEAN_AND","&&",398],["T_WHITESPACE"," ",398],"!",["T_VARIABLE","$item",398],["T_OBJECT_OPERATOR","->",398],["T_STRING","getParentItem",398],"(",")",["T_WHITESPACE","\n                ",398],["T_BOOLEAN_AND","&&",399],["T_WHITESPACE"," ",399],["T_VARIABLE","$item",399],["T_OBJECT_OPERATOR","->",399],["T_STRING","getIsQtyDecimal",399],"(",")",["T_WHITESPACE","\n                ",399],["T_BOOLEAN_AND","&&",400],["T_WHITESPACE"," ",400],["T_VARIABLE","$item",400],["T_OBJECT_OPERATOR","->",400],["T_STRING","getProductType",400],"(",")",["T_WHITESPACE"," ",400],["T_IS_NOT_EQUAL","!=",400],["T_WHITESPACE"," ",400],["T_NS_SEPARATOR","\\",400],["T_STRING","Magento",400],["T_NS_SEPARATOR","\\",400],["T_STRING","Catalog",400],["T_NS_SEPARATOR","\\",400],["T_STRING","Model",400],["T_NS_SEPARATOR","\\",400],["T_STRING","Product",400],["T_NS_SEPARATOR","\\",400],["T_STRING","Type",400],["T_DOUBLE_COLON","::",400],["T_STRING","TYPE_BUNDLE",400],["T_WHITESPACE","\n            ",400],")",["T_WHITESPACE"," ",401],"{",["T_WHITESPACE","\n                ",401],["T_VARIABLE","$qty",402],["T_WHITESPACE"," ",402],"=",["T_WHITESPACE"," ",402],["T_LNUMBER","1",402],";",["T_WHITESPACE","\n            ",402],"}",["T_WHITESPACE","\n\n            ",403],["T_IF","if",405],["T_WHITESPACE"," ",405],"(","!",["T_EMPTY","empty",405],"(",["T_VARIABLE","$decimalItems",405],")",")",["T_WHITESPACE"," ",405],"{",["T_WHITESPACE","\n                ",405],["T_FOREACH","foreach",406],["T_WHITESPACE"," ",406],"(",["T_VARIABLE","$decimalItems",406],["T_WHITESPACE"," ",406],["T_AS","as",406],["T_WHITESPACE"," ",406],["T_VARIABLE","$decimalItem",406],")",["T_WHITESPACE"," ",406],"{",["T_WHITESPACE","\n                    ",406],["T_VARIABLE","$fullItems",407],["T_WHITESPACE"," ",407],"=",["T_WHITESPACE"," ",407],["T_STRING","array_merge",407],"(",["T_WHITESPACE","\n                        ",407],["T_VARIABLE","$fullItems",408],",",["T_WHITESPACE","\n                        ",408],["T_STRING","array_fill",409],"(",["T_LNUMBER","0",409],",",["T_WHITESPACE"," ",409],["T_VARIABLE","$decimalItem",409],"[",["T_CONSTANT_ENCAPSED_STRING","'qty'",409],"]",["T_WHITESPACE"," ",409],"*",["T_WHITESPACE"," ",409],["T_VARIABLE","$qty",409],",",["T_WHITESPACE"," ",409],["T_VARIABLE","$decimalItem",409],"[",["T_CONSTANT_ENCAPSED_STRING","'weight'",409],"]",")",["T_WHITESPACE","\n                    ",409],")",";",["T_WHITESPACE","\n                ",410],"}",["T_WHITESPACE","\n            ",411],"}",["T_WHITESPACE"," ",412],["T_ELSE","else",412],["T_WHITESPACE"," ",412],"{",["T_WHITESPACE","\n                ",412],["T_VARIABLE","$fullItems",413],["T_WHITESPACE"," ",413],"=",["T_WHITESPACE"," ",413],["T_STRING","array_merge",413],"(",["T_VARIABLE","$fullItems",413],",",["T_WHITESPACE"," ",413],["T_STRING","array_fill",413],"(",["T_LNUMBER","0",413],",",["T_WHITESPACE"," ",413],["T_VARIABLE","$qty",413],",",["T_WHITESPACE"," ",413],["T_VARIABLE","$itemWeight",413],")",")",";",["T_WHITESPACE","\n            ",413],"}",["T_WHITESPACE","\n        ",414],"}",["T_WHITESPACE","\n        ",415],["T_STRING","sort",416],"(",["T_VARIABLE","$fullItems",416],")",";",["T_WHITESPACE","\n\n        ",416],["T_RETURN","return",418],["T_WHITESPACE"," ",418],["T_VARIABLE","$this",418],["T_OBJECT_OPERATOR","->",418],["T_STRING","_makePieces",418],"(",["T_VARIABLE","$fullItems",418],",",["T_WHITESPACE"," ",418],["T_VARIABLE","$maxWeight",418],")",";",["T_WHITESPACE","\n    ",418],"}",["T_WHITESPACE","\n\n    ",419],["T_DOC_COMMENT","\/**\n     * Make pieces\n     * Compose packages list based on given items, so that each package is as heavy as possible\n     *\n     * @param array $items\n     * @param float $maxWeight\n     * @return array\n     *\/",421],["T_WHITESPACE","\n    ",428],["T_PROTECTED","protected",429],["T_WHITESPACE"," ",429],["T_FUNCTION","function",429],["T_WHITESPACE"," ",429],["T_STRING","_makePieces",429],"(",["T_VARIABLE","$items",429],",",["T_WHITESPACE"," ",429],["T_VARIABLE","$maxWeight",429],")",["T_WHITESPACE","\n    ",429],"{",["T_WHITESPACE","\n        ",430],["T_VARIABLE","$pieces",431],["T_WHITESPACE"," ",431],"=",["T_WHITESPACE"," ",431],"[","]",";",["T_WHITESPACE","\n        ",431],["T_IF","if",432],["T_WHITESPACE"," ",432],"(","!",["T_EMPTY","empty",432],"(",["T_VARIABLE","$items",432],")",")",["T_WHITESPACE"," ",432],"{",["T_WHITESPACE","\n            ",432],["T_VARIABLE","$sumWeight",433],["T_WHITESPACE"," ",433],"=",["T_WHITESPACE"," ",433],["T_LNUMBER","0",433],";",["T_WHITESPACE","\n\n            ",433],["T_VARIABLE","$reverseOrderItems",435],["T_WHITESPACE"," ",435],"=",["T_WHITESPACE"," ",435],["T_VARIABLE","$items",435],";",["T_WHITESPACE","\n            ",435],["T_STRING","arsort",436],"(",["T_VARIABLE","$reverseOrderItems",436],")",";",["T_WHITESPACE","\n\n            ",436],["T_FOREACH","foreach",438],["T_WHITESPACE"," ",438],"(",["T_VARIABLE","$reverseOrderItems",438],["T_WHITESPACE"," ",438],["T_AS","as",438],["T_WHITESPACE"," ",438],["T_VARIABLE","$key",438],["T_WHITESPACE"," ",438],["T_DOUBLE_ARROW","=>",438],["T_WHITESPACE"," ",438],["T_VARIABLE","$weight",438],")",["T_WHITESPACE"," ",438],"{",["T_WHITESPACE","\n                ",438],["T_IF","if",439],["T_WHITESPACE"," ",439],"(","!",["T_ISSET","isset",439],"(",["T_VARIABLE","$items",439],"[",["T_VARIABLE","$key",439],"]",")",")",["T_WHITESPACE"," ",439],"{",["T_WHITESPACE","\n                    ",439],["T_CONTINUE","continue",440],";",["T_WHITESPACE","\n                ",440],"}",["T_WHITESPACE","\n                ",441],["T_UNSET","unset",442],"(",["T_VARIABLE","$items",442],"[",["T_VARIABLE","$key",442],"]",")",";",["T_WHITESPACE","\n                ",442],["T_VARIABLE","$sumWeight",443],["T_WHITESPACE"," ",443],"=",["T_WHITESPACE"," ",443],["T_VARIABLE","$weight",443],";",["T_WHITESPACE","\n                ",443],["T_FOREACH","foreach",444],["T_WHITESPACE"," ",444],"(",["T_VARIABLE","$items",444],["T_WHITESPACE"," ",444],["T_AS","as",444],["T_WHITESPACE"," ",444],["T_VARIABLE","$key",444],["T_WHITESPACE"," ",444],["T_DOUBLE_ARROW","=>",444],["T_WHITESPACE"," ",444],["T_VARIABLE","$weight",444],")",["T_WHITESPACE"," ",444],"{",["T_WHITESPACE","\n                    ",444],["T_IF","if",445],["T_WHITESPACE"," ",445],"(",["T_VARIABLE","$sumWeight",445],["T_WHITESPACE"," ",445],"+",["T_WHITESPACE"," ",445],["T_VARIABLE","$weight",445],["T_WHITESPACE"," ",445],"<",["T_WHITESPACE"," ",445],["T_VARIABLE","$maxWeight",445],")",["T_WHITESPACE"," ",445],"{",["T_WHITESPACE","\n                        ",445],["T_UNSET","unset",446],"(",["T_VARIABLE","$items",446],"[",["T_VARIABLE","$key",446],"]",")",";",["T_WHITESPACE","\n                        ",446],["T_VARIABLE","$sumWeight",447],["T_WHITESPACE"," ",447],["T_PLUS_EQUAL","+=",447],["T_WHITESPACE"," ",447],["T_VARIABLE","$weight",447],";",["T_WHITESPACE","\n                    ",447],"}",["T_WHITESPACE"," ",448],["T_ELSEIF","elseif",448],["T_WHITESPACE"," ",448],"(",["T_VARIABLE","$sumWeight",448],["T_WHITESPACE"," ",448],"+",["T_WHITESPACE"," ",448],["T_VARIABLE","$weight",448],["T_WHITESPACE"," ",448],">",["T_WHITESPACE"," ",448],["T_VARIABLE","$maxWeight",448],")",["T_WHITESPACE"," ",448],"{",["T_WHITESPACE","\n                        ",448],["T_VARIABLE","$pieces",449],"[","]",["T_WHITESPACE"," ",449],"=",["T_WHITESPACE"," ",449],["T_STRING_CAST","(string)",449],["T_DOUBLE_CAST","(double)",449],["T_VARIABLE","$sumWeight",449],";",["T_WHITESPACE","\n                        ",449],["T_BREAK","break",450],";",["T_WHITESPACE","\n                    ",450],"}",["T_WHITESPACE"," ",451],["T_ELSE","else",451],["T_WHITESPACE"," ",451],"{",["T_WHITESPACE","\n                        ",451],["T_UNSET","unset",452],"(",["T_VARIABLE","$items",452],"[",["T_VARIABLE","$key",452],"]",")",";",["T_WHITESPACE","\n                        ",452],["T_VARIABLE","$pieces",453],"[","]",["T_WHITESPACE"," ",453],"=",["T_WHITESPACE"," ",453],["T_STRING_CAST","(string)",453],["T_DOUBLE_CAST","(double)",453],"(",["T_VARIABLE","$sumWeight",453],["T_WHITESPACE"," ",453],"+",["T_WHITESPACE"," ",453],["T_VARIABLE","$weight",453],")",";",["T_WHITESPACE","\n                        ",453],["T_VARIABLE","$sumWeight",454],["T_WHITESPACE"," ",454],"=",["T_WHITESPACE"," ",454],["T_LNUMBER","0",454],";",["T_WHITESPACE","\n                        ",454],["T_BREAK","break",455],";",["T_WHITESPACE","\n                    ",455],"}",["T_WHITESPACE","\n                ",456],"}",["T_WHITESPACE","\n            ",457],"}",["T_WHITESPACE","\n            ",458],["T_IF","if",459],["T_WHITESPACE"," ",459],"(",["T_VARIABLE","$sumWeight",459],["T_WHITESPACE"," ",459],">",["T_WHITESPACE"," ",459],["T_LNUMBER","0",459],")",["T_WHITESPACE"," ",459],"{",["T_WHITESPACE","\n                ",459],["T_VARIABLE","$pieces",460],"[","]",["T_WHITESPACE"," ",460],"=",["T_WHITESPACE"," ",460],["T_STRING_CAST","(string)",460],["T_DOUBLE_CAST","(double)",460],["T_VARIABLE","$sumWeight",460],";",["T_WHITESPACE","\n            ",460],"}",["T_WHITESPACE","\n            ",461],["T_VARIABLE","$pieces",462],["T_WHITESPACE"," ",462],"=",["T_WHITESPACE"," ",462],["T_STRING","array_count_values",462],"(",["T_VARIABLE","$pieces",462],")",";",["T_WHITESPACE","\n        ",462],"}",["T_WHITESPACE","\n\n        ",463],["T_RETURN","return",465],["T_WHITESPACE"," ",465],["T_VARIABLE","$pieces",465],";",["T_WHITESPACE","\n    ",465],"}",["T_WHITESPACE","\n\n    ",466],["T_DOC_COMMENT","\/**\n     * Collect rates by address\n     *\n     * @param \\Magento\\Framework\\DataObject $address\n     * @param null|bool|array $limitCarrier\n     * @return $this\n     *\/",468],["T_WHITESPACE","\n    ",474],["T_PUBLIC","public",475],["T_WHITESPACE"," ",475],["T_FUNCTION","function",475],["T_WHITESPACE"," ",475],["T_STRING","collectRatesByAddress",475],"(",["T_NS_SEPARATOR","\\",475],["T_STRING","Magento",475],["T_NS_SEPARATOR","\\",475],["T_STRING","Framework",475],["T_NS_SEPARATOR","\\",475],["T_STRING","DataObject",475],["T_WHITESPACE"," ",475],["T_VARIABLE","$address",475],",",["T_WHITESPACE"," ",475],["T_VARIABLE","$limitCarrier",475],["T_WHITESPACE"," ",475],"=",["T_WHITESPACE"," ",475],["T_STRING","null",475],")",["T_WHITESPACE","\n    ",475],"{",["T_WHITESPACE","\n        ",476],["T_DOC_COMMENT","\/** @var $request \\Magento\\Quote\\Model\\Quote\\Address\\RateRequest *\/",477],["T_WHITESPACE","\n        ",477],["T_VARIABLE","$request",478],["T_WHITESPACE"," ",478],"=",["T_WHITESPACE"," ",478],["T_VARIABLE","$this",478],["T_OBJECT_OPERATOR","->",478],["T_STRING","rateRequestFactory",478],["T_OBJECT_OPERATOR","->",478],["T_STRING","create",478],"(",")",";",["T_WHITESPACE","\n        ",478],["T_VARIABLE","$request",479],["T_OBJECT_OPERATOR","->",479],["T_STRING","setAllItems",479],"(",["T_VARIABLE","$address",479],["T_OBJECT_OPERATOR","->",479],["T_STRING","getAllItems",479],"(",")",")",";",["T_WHITESPACE","\n        ",479],["T_VARIABLE","$request",480],["T_OBJECT_OPERATOR","->",480],["T_STRING","setDestCountryId",480],"(",["T_VARIABLE","$address",480],["T_OBJECT_OPERATOR","->",480],["T_STRING","getCountryId",480],"(",")",")",";",["T_WHITESPACE","\n        ",480],["T_VARIABLE","$request",481],["T_OBJECT_OPERATOR","->",481],["T_STRING","setDestRegionId",481],"(",["T_VARIABLE","$address",481],["T_OBJECT_OPERATOR","->",481],["T_STRING","getRegionId",481],"(",")",")",";",["T_WHITESPACE","\n        ",481],["T_VARIABLE","$request",482],["T_OBJECT_OPERATOR","->",482],["T_STRING","setDestPostcode",482],"(",["T_VARIABLE","$address",482],["T_OBJECT_OPERATOR","->",482],["T_STRING","getPostcode",482],"(",")",")",";",["T_WHITESPACE","\n        ",482],["T_VARIABLE","$request",483],["T_OBJECT_OPERATOR","->",483],["T_STRING","setPackageValue",483],"(",["T_VARIABLE","$address",483],["T_OBJECT_OPERATOR","->",483],["T_STRING","getBaseSubtotal",483],"(",")",")",";",["T_WHITESPACE","\n        ",483],["T_VARIABLE","$request",484],["T_OBJECT_OPERATOR","->",484],["T_STRING","setPackageValueWithDiscount",484],"(",["T_VARIABLE","$address",484],["T_OBJECT_OPERATOR","->",484],["T_STRING","getBaseSubtotalWithDiscount",484],"(",")",")",";",["T_WHITESPACE","\n        ",484],["T_VARIABLE","$request",485],["T_OBJECT_OPERATOR","->",485],["T_STRING","setPackageWeight",485],"(",["T_VARIABLE","$address",485],["T_OBJECT_OPERATOR","->",485],["T_STRING","getWeight",485],"(",")",")",";",["T_WHITESPACE","\n        ",485],["T_VARIABLE","$request",486],["T_OBJECT_OPERATOR","->",486],["T_STRING","setFreeMethodWeight",486],"(",["T_VARIABLE","$address",486],["T_OBJECT_OPERATOR","->",486],["T_STRING","getFreeMethodWeight",486],"(",")",")",";",["T_WHITESPACE","\n        ",486],["T_VARIABLE","$request",487],["T_OBJECT_OPERATOR","->",487],["T_STRING","setPackageQty",487],"(",["T_VARIABLE","$address",487],["T_OBJECT_OPERATOR","->",487],["T_STRING","getItemQty",487],"(",")",")",";",["T_WHITESPACE","\n\n        ",487],["T_DOC_COMMENT","\/** @var \\Magento\\Store\\Api\\Data\\StoreInterface $store *\/",489],["T_WHITESPACE","\n        ",489],["T_VARIABLE","$store",490],["T_WHITESPACE"," ",490],"=",["T_WHITESPACE"," ",490],["T_VARIABLE","$this",490],["T_OBJECT_OPERATOR","->",490],["T_STRING","_storeManager",490],["T_OBJECT_OPERATOR","->",490],["T_STRING","getStore",490],"(",")",";",["T_WHITESPACE","\n        ",490],["T_VARIABLE","$request",491],["T_OBJECT_OPERATOR","->",491],["T_STRING","setStoreId",491],"(",["T_VARIABLE","$store",491],["T_OBJECT_OPERATOR","->",491],["T_STRING","getId",491],"(",")",")",";",["T_WHITESPACE","\n        ",491],["T_VARIABLE","$request",492],["T_OBJECT_OPERATOR","->",492],["T_STRING","setWebsiteId",492],"(",["T_VARIABLE","$store",492],["T_OBJECT_OPERATOR","->",492],["T_STRING","getWebsiteId",492],"(",")",")",";",["T_WHITESPACE","\n        ",492],["T_VARIABLE","$request",493],["T_OBJECT_OPERATOR","->",493],["T_STRING","setBaseCurrency",493],"(",["T_VARIABLE","$store",493],["T_OBJECT_OPERATOR","->",493],["T_STRING","getBaseCurrency",493],"(",")",")",";",["T_WHITESPACE","\n        ",493],["T_VARIABLE","$request",494],["T_OBJECT_OPERATOR","->",494],["T_STRING","setPackageCurrency",494],"(",["T_VARIABLE","$store",494],["T_OBJECT_OPERATOR","->",494],["T_STRING","getCurrentCurrency",494],"(",")",")",";",["T_WHITESPACE","\n        ",494],["T_VARIABLE","$request",495],["T_OBJECT_OPERATOR","->",495],["T_STRING","setLimitCarrier",495],"(",["T_VARIABLE","$limitCarrier",495],")",";",["T_WHITESPACE","\n\n        ",495],["T_VARIABLE","$request",497],["T_OBJECT_OPERATOR","->",497],["T_STRING","setBaseSubtotalInclTax",497],"(",["T_VARIABLE","$address",497],["T_OBJECT_OPERATOR","->",497],["T_STRING","getBaseSubtotalInclTax",497],"(",")",")",";",["T_WHITESPACE","\n\n        ",497],["T_RETURN","return",499],["T_WHITESPACE"," ",499],["T_VARIABLE","$this",499],["T_OBJECT_OPERATOR","->",499],["T_STRING","collectRates",499],"(",["T_VARIABLE","$request",499],")",";",["T_WHITESPACE","\n    ",499],"}",["T_WHITESPACE","\n\n    ",500],["T_DOC_COMMENT","\/**\n     * Set part of carrier xml config path\n     *\n     * @param string $code\n     * @return $this\n     *\/",502],["T_WHITESPACE","\n    ",507],["T_PUBLIC","public",508],["T_WHITESPACE"," ",508],["T_FUNCTION","function",508],["T_WHITESPACE"," ",508],["T_STRING","setCarrierAvailabilityConfigField",508],"(",["T_VARIABLE","$code",508],["T_WHITESPACE"," ",508],"=",["T_WHITESPACE"," ",508],["T_CONSTANT_ENCAPSED_STRING","'active'",508],")",["T_WHITESPACE","\n    ",508],"{",["T_WHITESPACE","\n        ",509],["T_VARIABLE","$this",510],["T_OBJECT_OPERATOR","->",510],["T_STRING","_availabilityConfigField",510],["T_WHITESPACE"," ",510],"=",["T_WHITESPACE"," ",510],["T_VARIABLE","$code",510],";",["T_WHITESPACE","\n        ",510],["T_RETURN","return",511],["T_WHITESPACE"," ",511],["T_VARIABLE","$this",511],";",["T_WHITESPACE","\n    ",511],"}",["T_WHITESPACE","\n",512],"}",["T_WHITESPACE","\n",513]]
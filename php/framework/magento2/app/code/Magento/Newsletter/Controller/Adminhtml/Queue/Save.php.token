[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n *\n * Copyright \u00c2\u00a9 2013-2017 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n *\/",2],["T_WHITESPACE","\n\n",6],["T_COMMENT","\/\/ @codingStandardsIgnoreFile\n",8],["T_WHITESPACE","\n",9],["T_NAMESPACE","namespace",10],["T_WHITESPACE"," ",10],["T_STRING","Magento",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Newsletter",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Controller",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Adminhtml",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Queue",10],";",["T_WHITESPACE","\n\n",10],["T_CLASS","class",12],["T_WHITESPACE"," ",12],["T_STRING","Save",12],["T_WHITESPACE"," ",12],["T_EXTENDS","extends",12],["T_WHITESPACE"," ",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Magento",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Newsletter",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Controller",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Adminhtml",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Queue",12],["T_WHITESPACE","\n",12],"{",["T_WHITESPACE","\n    ",13],["T_DOC_COMMENT","\/**\n     * Save Newsletter queue\n     *\n     * @throws \\Magento\\Framework\\Exception\\LocalizedException\n     * @return void\n     * @SuppressWarnings(PHPMD.CyclomaticComplexity)\n     *\/",14],["T_WHITESPACE","\n    ",20],["T_PUBLIC","public",21],["T_WHITESPACE"," ",21],["T_FUNCTION","function",21],["T_WHITESPACE"," ",21],["T_STRING","execute",21],"(",")",["T_WHITESPACE","\n    ",21],"{",["T_WHITESPACE","\n        ",22],["T_TRY","try",23],["T_WHITESPACE"," ",23],"{",["T_WHITESPACE","\n            ",23],["T_COMMENT","\/* @var $queue \\Magento\\Newsletter\\Model\\Queue *\/",24],["T_WHITESPACE","\n            ",24],["T_VARIABLE","$queue",25],["T_WHITESPACE"," ",25],"=",["T_WHITESPACE"," ",25],["T_VARIABLE","$this",25],["T_OBJECT_OPERATOR","->",25],["T_STRING","_objectManager",25],["T_OBJECT_OPERATOR","->",25],["T_STRING","create",25],"(",["T_NS_SEPARATOR","\\",25],["T_STRING","Magento",25],["T_NS_SEPARATOR","\\",25],["T_STRING","Newsletter",25],["T_NS_SEPARATOR","\\",25],["T_STRING","Model",25],["T_NS_SEPARATOR","\\",25],["T_STRING","Queue",25],["T_DOUBLE_COLON","::",25],["T_CLASS","class",25],")",";",["T_WHITESPACE","\n\n            ",25],["T_VARIABLE","$templateId",27],["T_WHITESPACE"," ",27],"=",["T_WHITESPACE"," ",27],["T_VARIABLE","$this",27],["T_OBJECT_OPERATOR","->",27],["T_STRING","getRequest",27],"(",")",["T_OBJECT_OPERATOR","->",27],["T_STRING","getParam",27],"(",["T_CONSTANT_ENCAPSED_STRING","'template_id'",27],")",";",["T_WHITESPACE","\n            ",27],["T_IF","if",28],["T_WHITESPACE"," ",28],"(",["T_VARIABLE","$templateId",28],")",["T_WHITESPACE"," ",28],"{",["T_WHITESPACE","\n                ",28],["T_COMMENT","\/* @var $template \\Magento\\Newsletter\\Model\\Template *\/",29],["T_WHITESPACE","\n                ",29],["T_VARIABLE","$template",30],["T_WHITESPACE"," ",30],"=",["T_WHITESPACE"," ",30],["T_VARIABLE","$this",30],["T_OBJECT_OPERATOR","->",30],["T_STRING","_objectManager",30],["T_OBJECT_OPERATOR","->",30],["T_STRING","create",30],"(",["T_NS_SEPARATOR","\\",30],["T_STRING","Magento",30],["T_NS_SEPARATOR","\\",30],["T_STRING","Newsletter",30],["T_NS_SEPARATOR","\\",30],["T_STRING","Model",30],["T_NS_SEPARATOR","\\",30],["T_STRING","Template",30],["T_DOUBLE_COLON","::",30],["T_CLASS","class",30],")",["T_OBJECT_OPERATOR","->",30],["T_STRING","load",30],"(",["T_VARIABLE","$templateId",30],")",";",["T_WHITESPACE","\n\n                ",30],["T_IF","if",32],["T_WHITESPACE"," ",32],"(","!",["T_VARIABLE","$template",32],["T_OBJECT_OPERATOR","->",32],["T_STRING","getId",32],"(",")",["T_WHITESPACE"," ",32],["T_BOOLEAN_OR","||",32],["T_WHITESPACE"," ",32],["T_VARIABLE","$template",32],["T_OBJECT_OPERATOR","->",32],["T_STRING","getIsSystem",32],"(",")",")",["T_WHITESPACE"," ",32],"{",["T_WHITESPACE","\n                    ",32],["T_THROW","throw",33],["T_WHITESPACE"," ",33],["T_NEW","new",33],["T_WHITESPACE"," ",33],["T_NS_SEPARATOR","\\",33],["T_STRING","Magento",33],["T_NS_SEPARATOR","\\",33],["T_STRING","Framework",33],["T_NS_SEPARATOR","\\",33],["T_STRING","Exception",33],["T_NS_SEPARATOR","\\",33],["T_STRING","LocalizedException",33],"(",["T_STRING","__",33],"(",["T_CONSTANT_ENCAPSED_STRING","'Please correct the newsletter template and try again.'",33],")",")",";",["T_WHITESPACE","\n                ",33],"}",["T_WHITESPACE","\n\n                ",34],["T_VARIABLE","$queue",36],["T_OBJECT_OPERATOR","->",36],["T_STRING","setTemplateId",36],"(",["T_WHITESPACE","\n                    ",36],["T_VARIABLE","$template",37],["T_OBJECT_OPERATOR","->",37],["T_STRING","getId",37],"(",")",["T_WHITESPACE","\n                ",37],")",["T_OBJECT_OPERATOR","->",38],["T_STRING","setQueueStatus",38],"(",["T_WHITESPACE","\n                    ",38],["T_NS_SEPARATOR","\\",39],["T_STRING","Magento",39],["T_NS_SEPARATOR","\\",39],["T_STRING","Newsletter",39],["T_NS_SEPARATOR","\\",39],["T_STRING","Model",39],["T_NS_SEPARATOR","\\",39],["T_STRING","Queue",39],["T_DOUBLE_COLON","::",39],["T_STRING","STATUS_NEVER",39],["T_WHITESPACE","\n                ",39],")",";",["T_WHITESPACE","\n            ",40],"}",["T_WHITESPACE"," ",41],["T_ELSE","else",41],["T_WHITESPACE"," ",41],"{",["T_WHITESPACE","\n                ",41],["T_VARIABLE","$queue",42],["T_OBJECT_OPERATOR","->",42],["T_STRING","load",42],"(",["T_VARIABLE","$this",42],["T_OBJECT_OPERATOR","->",42],["T_STRING","getRequest",42],"(",")",["T_OBJECT_OPERATOR","->",42],["T_STRING","getParam",42],"(",["T_CONSTANT_ENCAPSED_STRING","'id'",42],")",")",";",["T_WHITESPACE","\n            ",42],"}",["T_WHITESPACE","\n\n            ",43],["T_IF","if",45],["T_WHITESPACE"," ",45],"(","!",["T_STRING","in_array",45],"(",["T_WHITESPACE","\n                ",45],["T_VARIABLE","$queue",46],["T_OBJECT_OPERATOR","->",46],["T_STRING","getQueueStatus",46],"(",")",",",["T_WHITESPACE","\n                ",46],"[",["T_NS_SEPARATOR","\\",47],["T_STRING","Magento",47],["T_NS_SEPARATOR","\\",47],["T_STRING","Newsletter",47],["T_NS_SEPARATOR","\\",47],["T_STRING","Model",47],["T_NS_SEPARATOR","\\",47],["T_STRING","Queue",47],["T_DOUBLE_COLON","::",47],["T_STRING","STATUS_NEVER",47],",",["T_WHITESPACE"," ",47],["T_NS_SEPARATOR","\\",47],["T_STRING","Magento",47],["T_NS_SEPARATOR","\\",47],["T_STRING","Newsletter",47],["T_NS_SEPARATOR","\\",47],["T_STRING","Model",47],["T_NS_SEPARATOR","\\",47],["T_STRING","Queue",47],["T_DOUBLE_COLON","::",47],["T_STRING","STATUS_PAUSE",47],"]",["T_WHITESPACE","\n            ",47],")",["T_WHITESPACE","\n            ",48],")",["T_WHITESPACE"," ",49],"{",["T_WHITESPACE","\n                ",49],["T_VARIABLE","$this",50],["T_OBJECT_OPERATOR","->",50],["T_STRING","_redirect",50],"(",["T_CONSTANT_ENCAPSED_STRING","'*\/*'",50],")",";",["T_WHITESPACE","\n                ",50],["T_RETURN","return",51],";",["T_WHITESPACE","\n            ",51],"}",["T_WHITESPACE","\n\n            ",52],["T_IF","if",54],["T_WHITESPACE"," ",54],"(",["T_VARIABLE","$queue",54],["T_OBJECT_OPERATOR","->",54],["T_STRING","getQueueStatus",54],"(",")",["T_WHITESPACE"," ",54],["T_IS_EQUAL","==",54],["T_WHITESPACE"," ",54],["T_NS_SEPARATOR","\\",54],["T_STRING","Magento",54],["T_NS_SEPARATOR","\\",54],["T_STRING","Newsletter",54],["T_NS_SEPARATOR","\\",54],["T_STRING","Model",54],["T_NS_SEPARATOR","\\",54],["T_STRING","Queue",54],["T_DOUBLE_COLON","::",54],["T_STRING","STATUS_NEVER",54],")",["T_WHITESPACE"," ",54],"{",["T_WHITESPACE","\n                ",54],["T_VARIABLE","$queue",55],["T_OBJECT_OPERATOR","->",55],["T_STRING","setQueueStartAtByString",55],"(",["T_VARIABLE","$this",55],["T_OBJECT_OPERATOR","->",55],["T_STRING","getRequest",55],"(",")",["T_OBJECT_OPERATOR","->",55],["T_STRING","getParam",55],"(",["T_CONSTANT_ENCAPSED_STRING","'start_at'",55],")",")",";",["T_WHITESPACE","\n            ",55],"}",["T_WHITESPACE","\n\n            ",56],["T_VARIABLE","$queue",58],["T_OBJECT_OPERATOR","->",58],["T_STRING","setStores",58],"(",["T_WHITESPACE","\n                ",58],["T_VARIABLE","$this",59],["T_OBJECT_OPERATOR","->",59],["T_STRING","getRequest",59],"(",")",["T_OBJECT_OPERATOR","->",59],["T_STRING","getParam",59],"(",["T_CONSTANT_ENCAPSED_STRING","'stores'",59],",",["T_WHITESPACE"," ",59],"[","]",")",["T_WHITESPACE","\n            ",59],")",["T_OBJECT_OPERATOR","->",60],["T_STRING","setNewsletterSubject",60],"(",["T_WHITESPACE","\n                ",60],["T_VARIABLE","$this",61],["T_OBJECT_OPERATOR","->",61],["T_STRING","getRequest",61],"(",")",["T_OBJECT_OPERATOR","->",61],["T_STRING","getParam",61],"(",["T_CONSTANT_ENCAPSED_STRING","'subject'",61],")",["T_WHITESPACE","\n            ",61],")",["T_OBJECT_OPERATOR","->",62],["T_STRING","setNewsletterSenderName",62],"(",["T_WHITESPACE","\n                ",62],["T_VARIABLE","$this",63],["T_OBJECT_OPERATOR","->",63],["T_STRING","getRequest",63],"(",")",["T_OBJECT_OPERATOR","->",63],["T_STRING","getParam",63],"(",["T_CONSTANT_ENCAPSED_STRING","'sender_name'",63],")",["T_WHITESPACE","\n            ",63],")",["T_OBJECT_OPERATOR","->",64],["T_STRING","setNewsletterSenderEmail",64],"(",["T_WHITESPACE","\n                ",64],["T_VARIABLE","$this",65],["T_OBJECT_OPERATOR","->",65],["T_STRING","getRequest",65],"(",")",["T_OBJECT_OPERATOR","->",65],["T_STRING","getParam",65],"(",["T_CONSTANT_ENCAPSED_STRING","'sender_email'",65],")",["T_WHITESPACE","\n            ",65],")",["T_OBJECT_OPERATOR","->",66],["T_STRING","setNewsletterText",66],"(",["T_WHITESPACE","\n                ",66],["T_VARIABLE","$this",67],["T_OBJECT_OPERATOR","->",67],["T_STRING","getRequest",67],"(",")",["T_OBJECT_OPERATOR","->",67],["T_STRING","getParam",67],"(",["T_CONSTANT_ENCAPSED_STRING","'text'",67],")",["T_WHITESPACE","\n            ",67],")",["T_OBJECT_OPERATOR","->",68],["T_STRING","setNewsletterStyles",68],"(",["T_WHITESPACE","\n                ",68],["T_VARIABLE","$this",69],["T_OBJECT_OPERATOR","->",69],["T_STRING","getRequest",69],"(",")",["T_OBJECT_OPERATOR","->",69],["T_STRING","getParam",69],"(",["T_CONSTANT_ENCAPSED_STRING","'styles'",69],")",["T_WHITESPACE","\n            ",69],")",";",["T_WHITESPACE","\n\n            ",70],["T_IF","if",72],["T_WHITESPACE"," ",72],"(",["T_VARIABLE","$queue",72],["T_OBJECT_OPERATOR","->",72],["T_STRING","getQueueStatus",72],"(",")",["T_WHITESPACE"," ",72],["T_IS_EQUAL","==",72],["T_WHITESPACE"," ",72],["T_NS_SEPARATOR","\\",72],["T_STRING","Magento",72],["T_NS_SEPARATOR","\\",72],["T_STRING","Newsletter",72],["T_NS_SEPARATOR","\\",72],["T_STRING","Model",72],["T_NS_SEPARATOR","\\",72],["T_STRING","Queue",72],["T_DOUBLE_COLON","::",72],["T_STRING","STATUS_PAUSE",72],["T_WHITESPACE","\n                ",72],["T_BOOLEAN_AND","&&",73],["T_WHITESPACE"," ",73],["T_VARIABLE","$this",73],["T_OBJECT_OPERATOR","->",73],["T_STRING","getRequest",73],"(",")",["T_OBJECT_OPERATOR","->",73],["T_STRING","getParam",73],"(",["T_WHITESPACE","\n                    ",73],["T_CONSTANT_ENCAPSED_STRING","'_resume'",74],",",["T_WHITESPACE","\n                    ",74],["T_STRING","false",75],["T_WHITESPACE","\n                ",75],")",["T_WHITESPACE","\n            ",76],")",["T_WHITESPACE"," ",77],"{",["T_WHITESPACE","\n                ",77],["T_VARIABLE","$queue",78],["T_OBJECT_OPERATOR","->",78],["T_STRING","setQueueStatus",78],"(",["T_NS_SEPARATOR","\\",78],["T_STRING","Magento",78],["T_NS_SEPARATOR","\\",78],["T_STRING","Newsletter",78],["T_NS_SEPARATOR","\\",78],["T_STRING","Model",78],["T_NS_SEPARATOR","\\",78],["T_STRING","Queue",78],["T_DOUBLE_COLON","::",78],["T_STRING","STATUS_SENDING",78],")",";",["T_WHITESPACE","\n            ",78],"}",["T_WHITESPACE","\n\n            ",79],["T_VARIABLE","$queue",81],["T_OBJECT_OPERATOR","->",81],["T_STRING","save",81],"(",")",";",["T_WHITESPACE","\n\n            ",81],["T_VARIABLE","$this",83],["T_OBJECT_OPERATOR","->",83],["T_STRING","messageManager",83],["T_OBJECT_OPERATOR","->",83],["T_STRING","addSuccess",83],"(",["T_STRING","__",83],"(",["T_CONSTANT_ENCAPSED_STRING","'You saved the newsletter queue.'",83],")",")",";",["T_WHITESPACE","\n            ",83],["T_VARIABLE","$this",84],["T_OBJECT_OPERATOR","->",84],["T_STRING","_getSession",84],"(",")",["T_OBJECT_OPERATOR","->",84],["T_STRING","setFormData",84],"(",["T_STRING","false",84],")",";",["T_WHITESPACE","\n            ",84],["T_VARIABLE","$this",85],["T_OBJECT_OPERATOR","->",85],["T_STRING","_getSession",85],"(",")",["T_OBJECT_OPERATOR","->",85],["T_STRING","unsPreviewData",85],"(",")",";",["T_WHITESPACE","\n\n            ",85],["T_VARIABLE","$this",87],["T_OBJECT_OPERATOR","->",87],["T_STRING","_redirect",87],"(",["T_CONSTANT_ENCAPSED_STRING","'*\/*'",87],")",";",["T_WHITESPACE","\n        ",87],"}",["T_WHITESPACE"," ",88],["T_CATCH","catch",88],["T_WHITESPACE"," ",88],"(",["T_NS_SEPARATOR","\\",88],["T_STRING","Magento",88],["T_NS_SEPARATOR","\\",88],["T_STRING","Framework",88],["T_NS_SEPARATOR","\\",88],["T_STRING","Exception",88],["T_NS_SEPARATOR","\\",88],["T_STRING","LocalizedException",88],["T_WHITESPACE"," ",88],["T_VARIABLE","$e",88],")",["T_WHITESPACE"," ",88],"{",["T_WHITESPACE","\n            ",88],["T_VARIABLE","$this",89],["T_OBJECT_OPERATOR","->",89],["T_STRING","messageManager",89],["T_OBJECT_OPERATOR","->",89],["T_STRING","addError",89],"(",["T_VARIABLE","$e",89],["T_OBJECT_OPERATOR","->",89],["T_STRING","getMessage",89],"(",")",")",";",["T_WHITESPACE","\n            ",89],["T_VARIABLE","$id",90],["T_WHITESPACE"," ",90],"=",["T_WHITESPACE"," ",90],["T_VARIABLE","$this",90],["T_OBJECT_OPERATOR","->",90],["T_STRING","getRequest",90],"(",")",["T_OBJECT_OPERATOR","->",90],["T_STRING","getParam",90],"(",["T_CONSTANT_ENCAPSED_STRING","'id'",90],")",";",["T_WHITESPACE","\n            ",90],["T_IF","if",91],["T_WHITESPACE"," ",91],"(",["T_VARIABLE","$id",91],")",["T_WHITESPACE"," ",91],"{",["T_WHITESPACE","\n                ",91],["T_VARIABLE","$this",92],["T_OBJECT_OPERATOR","->",92],["T_STRING","_redirect",92],"(",["T_CONSTANT_ENCAPSED_STRING","'*\/*\/edit'",92],",",["T_WHITESPACE"," ",92],"[",["T_CONSTANT_ENCAPSED_STRING","'id'",92],["T_WHITESPACE"," ",92],["T_DOUBLE_ARROW","=>",92],["T_WHITESPACE"," ",92],["T_VARIABLE","$id",92],"]",")",";",["T_WHITESPACE","\n            ",92],"}",["T_WHITESPACE"," ",93],["T_ELSE","else",93],["T_WHITESPACE"," ",93],"{",["T_WHITESPACE","\n                ",93],["T_VARIABLE","$this",94],["T_OBJECT_OPERATOR","->",94],["T_STRING","getResponse",94],"(",")",["T_OBJECT_OPERATOR","->",94],["T_STRING","setRedirect",94],"(",["T_VARIABLE","$this",94],["T_OBJECT_OPERATOR","->",94],["T_STRING","_redirect",94],["T_OBJECT_OPERATOR","->",94],["T_STRING","getRedirectUrl",94],"(",["T_VARIABLE","$this",94],["T_OBJECT_OPERATOR","->",94],["T_STRING","getUrl",94],"(",["T_CONSTANT_ENCAPSED_STRING","'*'",94],")",")",")",";",["T_WHITESPACE","\n            ",94],"}",["T_WHITESPACE","\n        ",95],"}",["T_WHITESPACE","\n    ",96],"}",["T_WHITESPACE","\n",97],"}",["T_WHITESPACE","\n",98]]
[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Copyright \u00c2\u00a9 2013-2017 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n *\/",2],["T_WHITESPACE","\n",5],["T_NAMESPACE","namespace",6],["T_WHITESPACE"," ",6],["T_STRING","Magento",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Newsletter",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Model",6],";",["T_WHITESPACE","\n\n",6],["T_USE","use",8],["T_WHITESPACE"," ",8],["T_STRING","Magento",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Customer",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Api",8],["T_NS_SEPARATOR","\\",8],["T_STRING","AccountManagementInterface",8],";",["T_WHITESPACE","\n",8],["T_USE","use",9],["T_WHITESPACE"," ",9],["T_STRING","Magento",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Customer",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Api",9],["T_NS_SEPARATOR","\\",9],["T_STRING","CustomerRepositoryInterface",9],";",["T_WHITESPACE","\n",9],["T_USE","use",10],["T_WHITESPACE"," ",10],["T_STRING","Magento",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Framework",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Exception",10],["T_NS_SEPARATOR","\\",10],["T_STRING","NoSuchEntityException",10],";",["T_WHITESPACE","\n",10],["T_USE","use",11],["T_WHITESPACE"," ",11],["T_STRING","Magento",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Framework",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Exception",11],["T_NS_SEPARATOR","\\",11],["T_STRING","MailException",11],";",["T_WHITESPACE","\n\n",11],["T_DOC_COMMENT","\/**\n * Subscriber model\n *\n * @method \\Magento\\Newsletter\\Model\\ResourceModel\\Subscriber _getResource()\n * @method \\Magento\\Newsletter\\Model\\ResourceModel\\Subscriber getResource()\n * @method int getStoreId()\n * @method $this setStoreId(int $value)\n * @method string getChangeStatusAt()\n * @method $this setChangeStatusAt(string $value)\n * @method int getCustomerId()\n * @method $this setCustomerId(int $value)\n * @method string getSubscriberEmail()\n * @method $this setSubscriberEmail(string $value)\n * @method int getSubscriberStatus()\n * @method $this setSubscriberStatus(int $value)\n * @method string getSubscriberConfirmCode()\n * @method $this setSubscriberConfirmCode(string $value)\n * @method int getSubscriberId()\n * @method Subscriber setSubscriberId(int $value)\n *\n * @SuppressWarnings(PHPMD.CouplingBetweenObjects)\n * @SuppressWarnings(PHPMD.CyclomaticComplexity)\n *\/",13],["T_WHITESPACE","\n",35],["T_CLASS","class",36],["T_WHITESPACE"," ",36],["T_STRING","Subscriber",36],["T_WHITESPACE"," ",36],["T_EXTENDS","extends",36],["T_WHITESPACE"," ",36],["T_NS_SEPARATOR","\\",36],["T_STRING","Magento",36],["T_NS_SEPARATOR","\\",36],["T_STRING","Framework",36],["T_NS_SEPARATOR","\\",36],["T_STRING","Model",36],["T_NS_SEPARATOR","\\",36],["T_STRING","AbstractModel",36],["T_WHITESPACE","\n",36],"{",["T_WHITESPACE","\n    ",37],["T_CONST","const",38],["T_WHITESPACE"," ",38],["T_STRING","STATUS_SUBSCRIBED",38],["T_WHITESPACE"," ",38],"=",["T_WHITESPACE"," ",38],["T_LNUMBER","1",38],";",["T_WHITESPACE","\n    ",38],["T_CONST","const",39],["T_WHITESPACE"," ",39],["T_STRING","STATUS_NOT_ACTIVE",39],["T_WHITESPACE"," ",39],"=",["T_WHITESPACE"," ",39],["T_LNUMBER","2",39],";",["T_WHITESPACE","\n    ",39],["T_CONST","const",40],["T_WHITESPACE"," ",40],["T_STRING","STATUS_UNSUBSCRIBED",40],["T_WHITESPACE"," ",40],"=",["T_WHITESPACE"," ",40],["T_LNUMBER","3",40],";",["T_WHITESPACE","\n    ",40],["T_CONST","const",41],["T_WHITESPACE"," ",41],["T_STRING","STATUS_UNCONFIRMED",41],["T_WHITESPACE"," ",41],"=",["T_WHITESPACE"," ",41],["T_LNUMBER","4",41],";",["T_WHITESPACE","\n\n    ",41],["T_CONST","const",43],["T_WHITESPACE"," ",43],["T_STRING","XML_PATH_CONFIRM_EMAIL_TEMPLATE",43],["T_WHITESPACE"," ",43],"=",["T_WHITESPACE"," ",43],["T_CONSTANT_ENCAPSED_STRING","'newsletter\/subscription\/confirm_email_template'",43],";",["T_WHITESPACE","\n    ",43],["T_CONST","const",44],["T_WHITESPACE"," ",44],["T_STRING","XML_PATH_CONFIRM_EMAIL_IDENTITY",44],["T_WHITESPACE"," ",44],"=",["T_WHITESPACE"," ",44],["T_CONSTANT_ENCAPSED_STRING","'newsletter\/subscription\/confirm_email_identity'",44],";",["T_WHITESPACE","\n    ",44],["T_CONST","const",45],["T_WHITESPACE"," ",45],["T_STRING","XML_PATH_SUCCESS_EMAIL_TEMPLATE",45],["T_WHITESPACE"," ",45],"=",["T_WHITESPACE"," ",45],["T_CONSTANT_ENCAPSED_STRING","'newsletter\/subscription\/success_email_template'",45],";",["T_WHITESPACE","\n    ",45],["T_CONST","const",46],["T_WHITESPACE"," ",46],["T_STRING","XML_PATH_SUCCESS_EMAIL_IDENTITY",46],["T_WHITESPACE"," ",46],"=",["T_WHITESPACE"," ",46],["T_CONSTANT_ENCAPSED_STRING","'newsletter\/subscription\/success_email_identity'",46],";",["T_WHITESPACE","\n    ",46],["T_CONST","const",47],["T_WHITESPACE"," ",47],["T_STRING","XML_PATH_UNSUBSCRIBE_EMAIL_TEMPLATE",47],["T_WHITESPACE"," ",47],"=",["T_WHITESPACE"," ",47],["T_CONSTANT_ENCAPSED_STRING","'newsletter\/subscription\/un_email_template'",47],";",["T_WHITESPACE","\n    ",47],["T_CONST","const",48],["T_WHITESPACE"," ",48],["T_STRING","XML_PATH_UNSUBSCRIBE_EMAIL_IDENTITY",48],["T_WHITESPACE"," ",48],"=",["T_WHITESPACE"," ",48],["T_CONSTANT_ENCAPSED_STRING","'newsletter\/subscription\/un_email_identity'",48],";",["T_WHITESPACE","\n    ",48],["T_CONST","const",49],["T_WHITESPACE"," ",49],["T_STRING","XML_PATH_CONFIRMATION_FLAG",49],["T_WHITESPACE"," ",49],"=",["T_WHITESPACE"," ",49],["T_CONSTANT_ENCAPSED_STRING","'newsletter\/subscription\/confirm'",49],";",["T_WHITESPACE","\n    ",49],["T_CONST","const",50],["T_WHITESPACE"," ",50],["T_STRING","XML_PATH_ALLOW_GUEST_SUBSCRIBE_FLAG",50],["T_WHITESPACE"," ",50],"=",["T_WHITESPACE"," ",50],["T_CONSTANT_ENCAPSED_STRING","'newsletter\/subscription\/allow_guest_subscribe'",50],";",["T_WHITESPACE","\n\n    ",50],["T_DOC_COMMENT","\/**\n     * Prefix of model events names\n     *\n     * @var string\n     *\/",52],["T_WHITESPACE","\n    ",56],["T_PROTECTED","protected",57],["T_WHITESPACE"," ",57],["T_VARIABLE","$_eventPrefix",57],["T_WHITESPACE"," ",57],"=",["T_WHITESPACE"," ",57],["T_CONSTANT_ENCAPSED_STRING","'newsletter_subscriber'",57],";",["T_WHITESPACE","\n\n    ",57],["T_DOC_COMMENT","\/**\n     * Parameter name in event\n     *\n     * In observe method you can use $observer->getEvent()->getObject() in this case\n     *\n     * @var string\n     *\/",59],["T_WHITESPACE","\n    ",65],["T_PROTECTED","protected",66],["T_WHITESPACE"," ",66],["T_VARIABLE","$_eventObject",66],["T_WHITESPACE"," ",66],"=",["T_WHITESPACE"," ",66],["T_CONSTANT_ENCAPSED_STRING","'subscriber'",66],";",["T_WHITESPACE","\n\n    ",66],["T_DOC_COMMENT","\/**\n     * True if data changed\n     *\n     * @var bool\n     *\/",68],["T_WHITESPACE","\n    ",72],["T_PROTECTED","protected",73],["T_WHITESPACE"," ",73],["T_VARIABLE","$_isStatusChanged",73],["T_WHITESPACE"," ",73],"=",["T_WHITESPACE"," ",73],["T_STRING","false",73],";",["T_WHITESPACE","\n\n    ",73],["T_DOC_COMMENT","\/**\n     * Newsletter data\n     *\n     * @var \\Magento\\Newsletter\\Helper\\Data\n     *\/",75],["T_WHITESPACE","\n    ",79],["T_PROTECTED","protected",80],["T_WHITESPACE"," ",80],["T_VARIABLE","$_newsletterData",80],["T_WHITESPACE"," ",80],"=",["T_WHITESPACE"," ",80],["T_STRING","null",80],";",["T_WHITESPACE","\n\n    ",80],["T_DOC_COMMENT","\/**\n     * Core store config\n     *\n     * @var \\Magento\\Framework\\App\\Config\\ScopeConfigInterface\n     *\/",82],["T_WHITESPACE","\n    ",86],["T_PROTECTED","protected",87],["T_WHITESPACE"," ",87],["T_VARIABLE","$_scopeConfig",87],";",["T_WHITESPACE","\n\n    ",87],["T_DOC_COMMENT","\/**\n     * Customer session\n     *\n     * @var \\Magento\\Customer\\Model\\Session\n     *\/",89],["T_WHITESPACE","\n    ",93],["T_PROTECTED","protected",94],["T_WHITESPACE"," ",94],["T_VARIABLE","$_customerSession",94],";",["T_WHITESPACE","\n\n    ",94],["T_DOC_COMMENT","\/**\n     * Store manager\n     *\n     * @var \\Magento\\Store\\Model\\StoreManagerInterface\n     *\/",96],["T_WHITESPACE","\n    ",100],["T_PROTECTED","protected",101],["T_WHITESPACE"," ",101],["T_VARIABLE","$_storeManager",101],";",["T_WHITESPACE","\n\n    ",101],["T_DOC_COMMENT","\/**\n     * @var CustomerRepositoryInterface\n     *\/",103],["T_WHITESPACE","\n    ",105],["T_PROTECTED","protected",106],["T_WHITESPACE"," ",106],["T_VARIABLE","$customerRepository",106],";",["T_WHITESPACE","\n\n    ",106],["T_DOC_COMMENT","\/**\n     * @var AccountManagementInterface\n     *\/",108],["T_WHITESPACE","\n    ",110],["T_PROTECTED","protected",111],["T_WHITESPACE"," ",111],["T_VARIABLE","$customerAccountManagement",111],";",["T_WHITESPACE","\n\n    ",111],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Framework\\Mail\\Template\\TransportBuilder\n     *\/",113],["T_WHITESPACE","\n    ",115],["T_PROTECTED","protected",116],["T_WHITESPACE"," ",116],["T_VARIABLE","$_transportBuilder",116],";",["T_WHITESPACE","\n\n    ",116],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Framework\\Translate\\Inline\\StateInterface\n     *\/",118],["T_WHITESPACE","\n    ",120],["T_PROTECTED","protected",121],["T_WHITESPACE"," ",121],["T_VARIABLE","$inlineTranslation",121],";",["T_WHITESPACE","\n\n    ",121],["T_DOC_COMMENT","\/**\n     * Initialize dependencies.\n     *\n     * @param \\Magento\\Framework\\Model\\Context $context\n     * @param \\Magento\\Framework\\Registry $registry\n     * @param \\Magento\\Newsletter\\Helper\\Data $newsletterData\n     * @param \\Magento\\Framework\\App\\Config\\ScopeConfigInterface $scopeConfig\n     * @param \\Magento\\Framework\\Mail\\Template\\TransportBuilder $transportBuilder\n     * @param \\Magento\\Store\\Model\\StoreManagerInterface $storeManager\n     * @param \\Magento\\Customer\\Model\\Session $customerSession\n     * @param CustomerRepositoryInterface $customerRepository\n     * @param AccountManagementInterface $customerAccountManagement\n     * @param \\Magento\\Framework\\Translate\\Inline\\StateInterface $inlineTranslation\n     * @param \\Magento\\Framework\\Model\\ResourceModel\\AbstractResource $resource\n     * @param \\Magento\\Framework\\Data\\Collection\\AbstractDb $resourceCollection\n     * @param array $data\n     * @SuppressWarnings(PHPMD.ExcessiveParameterList)\n     *\/",123],["T_WHITESPACE","\n    ",140],["T_PUBLIC","public",141],["T_WHITESPACE"," ",141],["T_FUNCTION","function",141],["T_WHITESPACE"," ",141],["T_STRING","__construct",141],"(",["T_WHITESPACE","\n        ",141],["T_NS_SEPARATOR","\\",142],["T_STRING","Magento",142],["T_NS_SEPARATOR","\\",142],["T_STRING","Framework",142],["T_NS_SEPARATOR","\\",142],["T_STRING","Model",142],["T_NS_SEPARATOR","\\",142],["T_STRING","Context",142],["T_WHITESPACE"," ",142],["T_VARIABLE","$context",142],",",["T_WHITESPACE","\n        ",142],["T_NS_SEPARATOR","\\",143],["T_STRING","Magento",143],["T_NS_SEPARATOR","\\",143],["T_STRING","Framework",143],["T_NS_SEPARATOR","\\",143],["T_STRING","Registry",143],["T_WHITESPACE"," ",143],["T_VARIABLE","$registry",143],",",["T_WHITESPACE","\n        ",143],["T_NS_SEPARATOR","\\",144],["T_STRING","Magento",144],["T_NS_SEPARATOR","\\",144],["T_STRING","Newsletter",144],["T_NS_SEPARATOR","\\",144],["T_STRING","Helper",144],["T_NS_SEPARATOR","\\",144],["T_STRING","Data",144],["T_WHITESPACE"," ",144],["T_VARIABLE","$newsletterData",144],",",["T_WHITESPACE","\n        ",144],["T_NS_SEPARATOR","\\",145],["T_STRING","Magento",145],["T_NS_SEPARATOR","\\",145],["T_STRING","Framework",145],["T_NS_SEPARATOR","\\",145],["T_STRING","App",145],["T_NS_SEPARATOR","\\",145],["T_STRING","Config",145],["T_NS_SEPARATOR","\\",145],["T_STRING","ScopeConfigInterface",145],["T_WHITESPACE"," ",145],["T_VARIABLE","$scopeConfig",145],",",["T_WHITESPACE","\n        ",145],["T_NS_SEPARATOR","\\",146],["T_STRING","Magento",146],["T_NS_SEPARATOR","\\",146],["T_STRING","Framework",146],["T_NS_SEPARATOR","\\",146],["T_STRING","Mail",146],["T_NS_SEPARATOR","\\",146],["T_STRING","Template",146],["T_NS_SEPARATOR","\\",146],["T_STRING","TransportBuilder",146],["T_WHITESPACE"," ",146],["T_VARIABLE","$transportBuilder",146],",",["T_WHITESPACE","\n        ",146],["T_NS_SEPARATOR","\\",147],["T_STRING","Magento",147],["T_NS_SEPARATOR","\\",147],["T_STRING","Store",147],["T_NS_SEPARATOR","\\",147],["T_STRING","Model",147],["T_NS_SEPARATOR","\\",147],["T_STRING","StoreManagerInterface",147],["T_WHITESPACE"," ",147],["T_VARIABLE","$storeManager",147],",",["T_WHITESPACE","\n        ",147],["T_NS_SEPARATOR","\\",148],["T_STRING","Magento",148],["T_NS_SEPARATOR","\\",148],["T_STRING","Customer",148],["T_NS_SEPARATOR","\\",148],["T_STRING","Model",148],["T_NS_SEPARATOR","\\",148],["T_STRING","Session",148],["T_WHITESPACE"," ",148],["T_VARIABLE","$customerSession",148],",",["T_WHITESPACE","\n        ",148],["T_STRING","CustomerRepositoryInterface",149],["T_WHITESPACE"," ",149],["T_VARIABLE","$customerRepository",149],",",["T_WHITESPACE","\n        ",149],["T_STRING","AccountManagementInterface",150],["T_WHITESPACE"," ",150],["T_VARIABLE","$customerAccountManagement",150],",",["T_WHITESPACE","\n        ",150],["T_NS_SEPARATOR","\\",151],["T_STRING","Magento",151],["T_NS_SEPARATOR","\\",151],["T_STRING","Framework",151],["T_NS_SEPARATOR","\\",151],["T_STRING","Translate",151],["T_NS_SEPARATOR","\\",151],["T_STRING","Inline",151],["T_NS_SEPARATOR","\\",151],["T_STRING","StateInterface",151],["T_WHITESPACE"," ",151],["T_VARIABLE","$inlineTranslation",151],",",["T_WHITESPACE","\n        ",151],["T_NS_SEPARATOR","\\",152],["T_STRING","Magento",152],["T_NS_SEPARATOR","\\",152],["T_STRING","Framework",152],["T_NS_SEPARATOR","\\",152],["T_STRING","Model",152],["T_NS_SEPARATOR","\\",152],["T_STRING","ResourceModel",152],["T_NS_SEPARATOR","\\",152],["T_STRING","AbstractResource",152],["T_WHITESPACE"," ",152],["T_VARIABLE","$resource",152],["T_WHITESPACE"," ",152],"=",["T_WHITESPACE"," ",152],["T_STRING","null",152],",",["T_WHITESPACE","\n        ",152],["T_NS_SEPARATOR","\\",153],["T_STRING","Magento",153],["T_NS_SEPARATOR","\\",153],["T_STRING","Framework",153],["T_NS_SEPARATOR","\\",153],["T_STRING","Data",153],["T_NS_SEPARATOR","\\",153],["T_STRING","Collection",153],["T_NS_SEPARATOR","\\",153],["T_STRING","AbstractDb",153],["T_WHITESPACE"," ",153],["T_VARIABLE","$resourceCollection",153],["T_WHITESPACE"," ",153],"=",["T_WHITESPACE"," ",153],["T_STRING","null",153],",",["T_WHITESPACE","\n        ",153],["T_ARRAY","array",154],["T_WHITESPACE"," ",154],["T_VARIABLE","$data",154],["T_WHITESPACE"," ",154],"=",["T_WHITESPACE"," ",154],"[","]",["T_WHITESPACE","\n    ",154],")",["T_WHITESPACE"," ",155],"{",["T_WHITESPACE","\n        ",155],["T_VARIABLE","$this",156],["T_OBJECT_OPERATOR","->",156],["T_STRING","_newsletterData",156],["T_WHITESPACE"," ",156],"=",["T_WHITESPACE"," ",156],["T_VARIABLE","$newsletterData",156],";",["T_WHITESPACE","\n        ",156],["T_VARIABLE","$this",157],["T_OBJECT_OPERATOR","->",157],["T_STRING","_scopeConfig",157],["T_WHITESPACE"," ",157],"=",["T_WHITESPACE"," ",157],["T_VARIABLE","$scopeConfig",157],";",["T_WHITESPACE","\n        ",157],["T_VARIABLE","$this",158],["T_OBJECT_OPERATOR","->",158],["T_STRING","_transportBuilder",158],["T_WHITESPACE"," ",158],"=",["T_WHITESPACE"," ",158],["T_VARIABLE","$transportBuilder",158],";",["T_WHITESPACE","\n        ",158],["T_VARIABLE","$this",159],["T_OBJECT_OPERATOR","->",159],["T_STRING","_storeManager",159],["T_WHITESPACE"," ",159],"=",["T_WHITESPACE"," ",159],["T_VARIABLE","$storeManager",159],";",["T_WHITESPACE","\n        ",159],["T_VARIABLE","$this",160],["T_OBJECT_OPERATOR","->",160],["T_STRING","_customerSession",160],["T_WHITESPACE"," ",160],"=",["T_WHITESPACE"," ",160],["T_VARIABLE","$customerSession",160],";",["T_WHITESPACE","\n        ",160],["T_VARIABLE","$this",161],["T_OBJECT_OPERATOR","->",161],["T_STRING","customerRepository",161],["T_WHITESPACE"," ",161],"=",["T_WHITESPACE"," ",161],["T_VARIABLE","$customerRepository",161],";",["T_WHITESPACE","\n        ",161],["T_VARIABLE","$this",162],["T_OBJECT_OPERATOR","->",162],["T_STRING","customerAccountManagement",162],["T_WHITESPACE"," ",162],"=",["T_WHITESPACE"," ",162],["T_VARIABLE","$customerAccountManagement",162],";",["T_WHITESPACE","\n        ",162],["T_VARIABLE","$this",163],["T_OBJECT_OPERATOR","->",163],["T_STRING","inlineTranslation",163],["T_WHITESPACE"," ",163],"=",["T_WHITESPACE"," ",163],["T_VARIABLE","$inlineTranslation",163],";",["T_WHITESPACE","\n        ",163],["T_STRING","parent",164],["T_DOUBLE_COLON","::",164],["T_STRING","__construct",164],"(",["T_VARIABLE","$context",164],",",["T_WHITESPACE"," ",164],["T_VARIABLE","$registry",164],",",["T_WHITESPACE"," ",164],["T_VARIABLE","$resource",164],",",["T_WHITESPACE"," ",164],["T_VARIABLE","$resourceCollection",164],",",["T_WHITESPACE"," ",164],["T_VARIABLE","$data",164],")",";",["T_WHITESPACE","\n    ",164],"}",["T_WHITESPACE","\n\n    ",165],["T_DOC_COMMENT","\/**\n     * Initialize resource model\n     *\n     * @return void\n     *\/",167],["T_WHITESPACE","\n    ",171],["T_PROTECTED","protected",172],["T_WHITESPACE"," ",172],["T_FUNCTION","function",172],["T_WHITESPACE"," ",172],["T_STRING","_construct",172],"(",")",["T_WHITESPACE","\n    ",172],"{",["T_WHITESPACE","\n        ",173],["T_VARIABLE","$this",174],["T_OBJECT_OPERATOR","->",174],["T_STRING","_init",174],"(",["T_NS_SEPARATOR","\\",174],["T_STRING","Magento",174],["T_NS_SEPARATOR","\\",174],["T_STRING","Newsletter",174],["T_NS_SEPARATOR","\\",174],["T_STRING","Model",174],["T_NS_SEPARATOR","\\",174],["T_STRING","ResourceModel",174],["T_NS_SEPARATOR","\\",174],["T_STRING","Subscriber",174],["T_DOUBLE_COLON","::",174],["T_CLASS","class",174],")",";",["T_WHITESPACE","\n    ",174],"}",["T_WHITESPACE","\n\n    ",175],["T_DOC_COMMENT","\/**\n     * Alias for getSubscriberId()\n     *\n     * @return int\n     *\/",177],["T_WHITESPACE","\n    ",181],["T_PUBLIC","public",182],["T_WHITESPACE"," ",182],["T_FUNCTION","function",182],["T_WHITESPACE"," ",182],["T_STRING","getId",182],"(",")",["T_WHITESPACE","\n    ",182],"{",["T_WHITESPACE","\n        ",183],["T_RETURN","return",184],["T_WHITESPACE"," ",184],["T_VARIABLE","$this",184],["T_OBJECT_OPERATOR","->",184],["T_STRING","getSubscriberId",184],"(",")",";",["T_WHITESPACE","\n    ",184],"}",["T_WHITESPACE","\n\n    ",185],["T_DOC_COMMENT","\/**\n     * Alias for setSubscriberId()\n     *\n     * @param int $value\n     * @return $this\n     *\/",187],["T_WHITESPACE","\n    ",192],["T_PUBLIC","public",193],["T_WHITESPACE"," ",193],["T_FUNCTION","function",193],["T_WHITESPACE"," ",193],["T_STRING","setId",193],"(",["T_VARIABLE","$value",193],")",["T_WHITESPACE","\n    ",193],"{",["T_WHITESPACE","\n        ",194],["T_RETURN","return",195],["T_WHITESPACE"," ",195],["T_VARIABLE","$this",195],["T_OBJECT_OPERATOR","->",195],["T_STRING","setSubscriberId",195],"(",["T_VARIABLE","$value",195],")",";",["T_WHITESPACE","\n    ",195],"}",["T_WHITESPACE","\n\n    ",196],["T_DOC_COMMENT","\/**\n     * Alias for getSubscriberConfirmCode()\n     *\n     * @return string\n     *\/",198],["T_WHITESPACE","\n    ",202],["T_PUBLIC","public",203],["T_WHITESPACE"," ",203],["T_FUNCTION","function",203],["T_WHITESPACE"," ",203],["T_STRING","getCode",203],"(",")",["T_WHITESPACE","\n    ",203],"{",["T_WHITESPACE","\n        ",204],["T_RETURN","return",205],["T_WHITESPACE"," ",205],["T_VARIABLE","$this",205],["T_OBJECT_OPERATOR","->",205],["T_STRING","getSubscriberConfirmCode",205],"(",")",";",["T_WHITESPACE","\n    ",205],"}",["T_WHITESPACE","\n\n    ",206],["T_DOC_COMMENT","\/**\n     * Return link for confirmation of subscription\n     *\n     * @return string\n     *\/",208],["T_WHITESPACE","\n    ",212],["T_PUBLIC","public",213],["T_WHITESPACE"," ",213],["T_FUNCTION","function",213],["T_WHITESPACE"," ",213],["T_STRING","getConfirmationLink",213],"(",")",["T_WHITESPACE","\n    ",213],"{",["T_WHITESPACE","\n        ",214],["T_RETURN","return",215],["T_WHITESPACE"," ",215],["T_VARIABLE","$this",215],["T_OBJECT_OPERATOR","->",215],["T_STRING","_newsletterData",215],["T_OBJECT_OPERATOR","->",215],["T_STRING","getConfirmationUrl",215],"(",["T_VARIABLE","$this",215],")",";",["T_WHITESPACE","\n    ",215],"}",["T_WHITESPACE","\n\n    ",216],["T_DOC_COMMENT","\/**\n     * Returns Unsubscribe url\n     *\n     * @return string\n     *\/",218],["T_WHITESPACE","\n    ",222],["T_PUBLIC","public",223],["T_WHITESPACE"," ",223],["T_FUNCTION","function",223],["T_WHITESPACE"," ",223],["T_STRING","getUnsubscriptionLink",223],"(",")",["T_WHITESPACE","\n    ",223],"{",["T_WHITESPACE","\n        ",224],["T_RETURN","return",225],["T_WHITESPACE"," ",225],["T_VARIABLE","$this",225],["T_OBJECT_OPERATOR","->",225],["T_STRING","_newsletterData",225],["T_OBJECT_OPERATOR","->",225],["T_STRING","getUnsubscribeUrl",225],"(",["T_VARIABLE","$this",225],")",";",["T_WHITESPACE","\n    ",225],"}",["T_WHITESPACE","\n\n    ",226],["T_DOC_COMMENT","\/**\n     * Alias for setSubscriberConfirmCode()\n     *\n     * @param string $value\n     * @return $this\n     *\/",228],["T_WHITESPACE","\n    ",233],["T_PUBLIC","public",234],["T_WHITESPACE"," ",234],["T_FUNCTION","function",234],["T_WHITESPACE"," ",234],["T_STRING","setCode",234],"(",["T_VARIABLE","$value",234],")",["T_WHITESPACE","\n    ",234],"{",["T_WHITESPACE","\n        ",235],["T_RETURN","return",236],["T_WHITESPACE"," ",236],["T_VARIABLE","$this",236],["T_OBJECT_OPERATOR","->",236],["T_STRING","setSubscriberConfirmCode",236],"(",["T_VARIABLE","$value",236],")",";",["T_WHITESPACE","\n    ",236],"}",["T_WHITESPACE","\n\n    ",237],["T_DOC_COMMENT","\/**\n     * Alias for getSubscriberStatus()\n     *\n     * @return int\n     *\/",239],["T_WHITESPACE","\n    ",243],["T_PUBLIC","public",244],["T_WHITESPACE"," ",244],["T_FUNCTION","function",244],["T_WHITESPACE"," ",244],["T_STRING","getStatus",244],"(",")",["T_WHITESPACE","\n    ",244],"{",["T_WHITESPACE","\n        ",245],["T_RETURN","return",246],["T_WHITESPACE"," ",246],["T_VARIABLE","$this",246],["T_OBJECT_OPERATOR","->",246],["T_STRING","getSubscriberStatus",246],"(",")",";",["T_WHITESPACE","\n    ",246],"}",["T_WHITESPACE","\n\n    ",247],["T_DOC_COMMENT","\/**\n     * Alias for setSubscriberStatus()\n     *\n     * @param int $value\n     * @return $this\n     *\/",249],["T_WHITESPACE","\n    ",254],["T_PUBLIC","public",255],["T_WHITESPACE"," ",255],["T_FUNCTION","function",255],["T_WHITESPACE"," ",255],["T_STRING","setStatus",255],"(",["T_VARIABLE","$value",255],")",["T_WHITESPACE","\n    ",255],"{",["T_WHITESPACE","\n        ",256],["T_RETURN","return",257],["T_WHITESPACE"," ",257],["T_VARIABLE","$this",257],["T_OBJECT_OPERATOR","->",257],["T_STRING","setSubscriberStatus",257],"(",["T_VARIABLE","$value",257],")",";",["T_WHITESPACE","\n    ",257],"}",["T_WHITESPACE","\n\n    ",258],["T_DOC_COMMENT","\/**\n     * Set the error messages scope for subscription\n     *\n     * @param boolean $scope\n     * @return $this\n     *\/",260],["T_WHITESPACE","\n\n    ",265],["T_PUBLIC","public",267],["T_WHITESPACE"," ",267],["T_FUNCTION","function",267],["T_WHITESPACE"," ",267],["T_STRING","setMessagesScope",267],"(",["T_VARIABLE","$scope",267],")",["T_WHITESPACE","\n    ",267],"{",["T_WHITESPACE","\n        ",268],["T_VARIABLE","$this",269],["T_OBJECT_OPERATOR","->",269],["T_STRING","getResource",269],"(",")",["T_OBJECT_OPERATOR","->",269],["T_STRING","setMessagesScope",269],"(",["T_VARIABLE","$scope",269],")",";",["T_WHITESPACE","\n        ",269],["T_RETURN","return",270],["T_WHITESPACE"," ",270],["T_VARIABLE","$this",270],";",["T_WHITESPACE","\n    ",270],"}",["T_WHITESPACE","\n\n    ",271],["T_DOC_COMMENT","\/**\n     * Alias for getSubscriberEmail()\n     *\n     * @return string\n     *\/",273],["T_WHITESPACE","\n    ",277],["T_PUBLIC","public",278],["T_WHITESPACE"," ",278],["T_FUNCTION","function",278],["T_WHITESPACE"," ",278],["T_STRING","getEmail",278],"(",")",["T_WHITESPACE","\n    ",278],"{",["T_WHITESPACE","\n        ",279],["T_RETURN","return",280],["T_WHITESPACE"," ",280],["T_VARIABLE","$this",280],["T_OBJECT_OPERATOR","->",280],["T_STRING","getSubscriberEmail",280],"(",")",";",["T_WHITESPACE","\n    ",280],"}",["T_WHITESPACE","\n\n    ",281],["T_DOC_COMMENT","\/**\n     * Alias for setSubscriberEmail()\n     *\n     * @param string $value\n     * @return $this\n     *\/",283],["T_WHITESPACE","\n    ",288],["T_PUBLIC","public",289],["T_WHITESPACE"," ",289],["T_FUNCTION","function",289],["T_WHITESPACE"," ",289],["T_STRING","setEmail",289],"(",["T_VARIABLE","$value",289],")",["T_WHITESPACE","\n    ",289],"{",["T_WHITESPACE","\n        ",290],["T_RETURN","return",291],["T_WHITESPACE"," ",291],["T_VARIABLE","$this",291],["T_OBJECT_OPERATOR","->",291],["T_STRING","setSubscriberEmail",291],"(",["T_VARIABLE","$value",291],")",";",["T_WHITESPACE","\n    ",291],"}",["T_WHITESPACE","\n\n    ",292],["T_DOC_COMMENT","\/**\n     * Set for status change flag\n     *\n     * @param boolean $value\n     * @return $this\n     *\/",294],["T_WHITESPACE","\n    ",299],["T_PUBLIC","public",300],["T_WHITESPACE"," ",300],["T_FUNCTION","function",300],["T_WHITESPACE"," ",300],["T_STRING","setStatusChanged",300],"(",["T_VARIABLE","$value",300],")",["T_WHITESPACE","\n    ",300],"{",["T_WHITESPACE","\n        ",301],["T_VARIABLE","$this",302],["T_OBJECT_OPERATOR","->",302],["T_STRING","_isStatusChanged",302],["T_WHITESPACE"," ",302],"=",["T_WHITESPACE"," ",302],["T_BOOL_CAST","(boolean)",302],["T_WHITESPACE"," ",302],["T_VARIABLE","$value",302],";",["T_WHITESPACE","\n        ",302],["T_RETURN","return",303],["T_WHITESPACE"," ",303],["T_VARIABLE","$this",303],";",["T_WHITESPACE","\n    ",303],"}",["T_WHITESPACE","\n\n    ",304],["T_DOC_COMMENT","\/**\n     * Return status change flag value\n     *\n     * @return boolean\n     *\/",306],["T_WHITESPACE","\n    ",310],["T_PUBLIC","public",311],["T_WHITESPACE"," ",311],["T_FUNCTION","function",311],["T_WHITESPACE"," ",311],["T_STRING","isStatusChanged",311],"(",")",["T_WHITESPACE","\n    ",311],"{",["T_WHITESPACE","\n        ",312],["T_RETURN","return",313],["T_WHITESPACE"," ",313],["T_VARIABLE","$this",313],["T_OBJECT_OPERATOR","->",313],["T_STRING","_isStatusChanged",313],";",["T_WHITESPACE","\n    ",313],"}",["T_WHITESPACE","\n\n    ",314],["T_DOC_COMMENT","\/**\n     * Return customer subscription status\n     *\n     * @return bool\n     *\/",316],["T_WHITESPACE","\n    ",320],["T_PUBLIC","public",321],["T_WHITESPACE"," ",321],["T_FUNCTION","function",321],["T_WHITESPACE"," ",321],["T_STRING","isSubscribed",321],"(",")",["T_WHITESPACE","\n    ",321],"{",["T_WHITESPACE","\n        ",322],["T_IF","if",323],["T_WHITESPACE"," ",323],"(",["T_VARIABLE","$this",323],["T_OBJECT_OPERATOR","->",323],["T_STRING","getId",323],"(",")",["T_WHITESPACE"," ",323],["T_BOOLEAN_AND","&&",323],["T_WHITESPACE"," ",323],["T_VARIABLE","$this",323],["T_OBJECT_OPERATOR","->",323],["T_STRING","getStatus",323],"(",")",["T_WHITESPACE"," ",323],["T_IS_EQUAL","==",323],["T_WHITESPACE"," ",323],["T_STRING","self",323],["T_DOUBLE_COLON","::",323],["T_STRING","STATUS_SUBSCRIBED",323],")",["T_WHITESPACE"," ",323],"{",["T_WHITESPACE","\n            ",323],["T_RETURN","return",324],["T_WHITESPACE"," ",324],["T_STRING","true",324],";",["T_WHITESPACE","\n        ",324],"}",["T_WHITESPACE","\n\n        ",325],["T_RETURN","return",327],["T_WHITESPACE"," ",327],["T_STRING","false",327],";",["T_WHITESPACE","\n    ",327],"}",["T_WHITESPACE","\n\n    ",328],["T_DOC_COMMENT","\/**\n     * Load subscriber data from resource model by email\n     *\n     * @param string $subscriberEmail\n     * @return $this\n     *\/",330],["T_WHITESPACE","\n    ",335],["T_PUBLIC","public",336],["T_WHITESPACE"," ",336],["T_FUNCTION","function",336],["T_WHITESPACE"," ",336],["T_STRING","loadByEmail",336],"(",["T_VARIABLE","$subscriberEmail",336],")",["T_WHITESPACE","\n    ",336],"{",["T_WHITESPACE","\n        ",337],["T_VARIABLE","$this",338],["T_OBJECT_OPERATOR","->",338],["T_STRING","addData",338],"(",["T_VARIABLE","$this",338],["T_OBJECT_OPERATOR","->",338],["T_STRING","getResource",338],"(",")",["T_OBJECT_OPERATOR","->",338],["T_STRING","loadByEmail",338],"(",["T_VARIABLE","$subscriberEmail",338],")",")",";",["T_WHITESPACE","\n        ",338],["T_RETURN","return",339],["T_WHITESPACE"," ",339],["T_VARIABLE","$this",339],";",["T_WHITESPACE","\n    ",339],"}",["T_WHITESPACE","\n\n    ",340],["T_DOC_COMMENT","\/**\n     * Load subscriber info by customerId\n     *\n     * @param int $customerId\n     * @return $this\n     *\/",342],["T_WHITESPACE","\n    ",347],["T_PUBLIC","public",348],["T_WHITESPACE"," ",348],["T_FUNCTION","function",348],["T_WHITESPACE"," ",348],["T_STRING","loadByCustomerId",348],"(",["T_VARIABLE","$customerId",348],")",["T_WHITESPACE","\n    ",348],"{",["T_WHITESPACE","\n        ",349],["T_TRY","try",350],["T_WHITESPACE"," ",350],"{",["T_WHITESPACE","\n            ",350],["T_VARIABLE","$customerData",351],["T_WHITESPACE"," ",351],"=",["T_WHITESPACE"," ",351],["T_VARIABLE","$this",351],["T_OBJECT_OPERATOR","->",351],["T_STRING","customerRepository",351],["T_OBJECT_OPERATOR","->",351],["T_STRING","getById",351],"(",["T_VARIABLE","$customerId",351],")",";",["T_WHITESPACE","\n            ",351],["T_VARIABLE","$data",352],["T_WHITESPACE"," ",352],"=",["T_WHITESPACE"," ",352],["T_VARIABLE","$this",352],["T_OBJECT_OPERATOR","->",352],["T_STRING","getResource",352],"(",")",["T_OBJECT_OPERATOR","->",352],["T_STRING","loadByCustomerData",352],"(",["T_VARIABLE","$customerData",352],")",";",["T_WHITESPACE","\n            ",352],["T_VARIABLE","$this",353],["T_OBJECT_OPERATOR","->",353],["T_STRING","addData",353],"(",["T_VARIABLE","$data",353],")",";",["T_WHITESPACE","\n            ",353],["T_IF","if",354],["T_WHITESPACE"," ",354],"(","!",["T_EMPTY","empty",354],"(",["T_VARIABLE","$data",354],")",["T_WHITESPACE"," ",354],["T_BOOLEAN_AND","&&",354],["T_WHITESPACE"," ",354],["T_VARIABLE","$customerData",354],["T_OBJECT_OPERATOR","->",354],["T_STRING","getId",354],"(",")",["T_WHITESPACE"," ",354],["T_BOOLEAN_AND","&&",354],["T_WHITESPACE"," ",354],"!",["T_VARIABLE","$this",354],["T_OBJECT_OPERATOR","->",354],["T_STRING","getCustomerId",354],"(",")",")",["T_WHITESPACE"," ",354],"{",["T_WHITESPACE","\n                ",354],["T_VARIABLE","$this",355],["T_OBJECT_OPERATOR","->",355],["T_STRING","setCustomerId",355],"(",["T_VARIABLE","$customerData",355],["T_OBJECT_OPERATOR","->",355],["T_STRING","getId",355],"(",")",")",";",["T_WHITESPACE","\n                ",355],["T_VARIABLE","$this",356],["T_OBJECT_OPERATOR","->",356],["T_STRING","setSubscriberConfirmCode",356],"(",["T_VARIABLE","$this",356],["T_OBJECT_OPERATOR","->",356],["T_STRING","randomSequence",356],"(",")",")",";",["T_WHITESPACE","\n                ",356],["T_VARIABLE","$this",357],["T_OBJECT_OPERATOR","->",357],["T_STRING","save",357],"(",")",";",["T_WHITESPACE","\n            ",357],"}",["T_WHITESPACE","\n        ",358],"}",["T_WHITESPACE"," ",359],["T_CATCH","catch",359],["T_WHITESPACE"," ",359],"(",["T_STRING","NoSuchEntityException",359],["T_WHITESPACE"," ",359],["T_VARIABLE","$e",359],")",["T_WHITESPACE"," ",359],"{",["T_WHITESPACE","\n        ",359],"}",["T_WHITESPACE","\n        ",360],["T_RETURN","return",361],["T_WHITESPACE"," ",361],["T_VARIABLE","$this",361],";",["T_WHITESPACE","\n    ",361],"}",["T_WHITESPACE","\n\n    ",362],["T_DOC_COMMENT","\/**\n     * Returns string of random chars\n     *\n     * @param int $length\n     * @return string\n     *\/",364],["T_WHITESPACE","\n    ",369],["T_PUBLIC","public",370],["T_WHITESPACE"," ",370],["T_FUNCTION","function",370],["T_WHITESPACE"," ",370],["T_STRING","randomSequence",370],"(",["T_VARIABLE","$length",370],["T_WHITESPACE"," ",370],"=",["T_WHITESPACE"," ",370],["T_LNUMBER","32",370],")",["T_WHITESPACE","\n    ",370],"{",["T_WHITESPACE","\n        ",371],["T_VARIABLE","$id",372],["T_WHITESPACE"," ",372],"=",["T_WHITESPACE"," ",372],["T_CONSTANT_ENCAPSED_STRING","''",372],";",["T_WHITESPACE","\n        ",372],["T_VARIABLE","$par",373],["T_WHITESPACE"," ",373],"=",["T_WHITESPACE"," ",373],"[","]",";",["T_WHITESPACE","\n        ",373],["T_VARIABLE","$char",374],["T_WHITESPACE"," ",374],"=",["T_WHITESPACE"," ",374],["T_STRING","array_merge",374],"(",["T_STRING","range",374],"(",["T_CONSTANT_ENCAPSED_STRING","'a'",374],",",["T_WHITESPACE"," ",374],["T_CONSTANT_ENCAPSED_STRING","'z'",374],")",",",["T_WHITESPACE"," ",374],["T_STRING","range",374],"(",["T_LNUMBER","0",374],",",["T_WHITESPACE"," ",374],["T_LNUMBER","9",374],")",")",";",["T_WHITESPACE","\n        ",374],["T_VARIABLE","$charLen",375],["T_WHITESPACE"," ",375],"=",["T_WHITESPACE"," ",375],["T_STRING","count",375],"(",["T_VARIABLE","$char",375],")",["T_WHITESPACE"," ",375],"-",["T_WHITESPACE"," ",375],["T_LNUMBER","1",375],";",["T_WHITESPACE","\n        ",375],["T_FOR","for",376],["T_WHITESPACE"," ",376],"(",["T_VARIABLE","$i",376],["T_WHITESPACE"," ",376],"=",["T_WHITESPACE"," ",376],["T_LNUMBER","0",376],";",["T_WHITESPACE"," ",376],["T_VARIABLE","$i",376],["T_WHITESPACE"," ",376],"<",["T_WHITESPACE"," ",376],["T_VARIABLE","$length",376],";",["T_WHITESPACE"," ",376],["T_VARIABLE","$i",376],["T_INC","++",376],")",["T_WHITESPACE"," ",376],"{",["T_WHITESPACE","\n            ",376],["T_VARIABLE","$disc",377],["T_WHITESPACE"," ",377],"=",["T_WHITESPACE"," ",377],["T_NS_SEPARATOR","\\",377],["T_STRING","Magento",377],["T_NS_SEPARATOR","\\",377],["T_STRING","Framework",377],["T_NS_SEPARATOR","\\",377],["T_STRING","Math",377],["T_NS_SEPARATOR","\\",377],["T_STRING","Random",377],["T_DOUBLE_COLON","::",377],["T_STRING","getRandomNumber",377],"(",["T_LNUMBER","0",377],",",["T_WHITESPACE"," ",377],["T_VARIABLE","$charLen",377],")",";",["T_WHITESPACE","\n            ",377],["T_VARIABLE","$par",378],"[",["T_VARIABLE","$i",378],"]",["T_WHITESPACE"," ",378],"=",["T_WHITESPACE"," ",378],["T_VARIABLE","$char",378],"[",["T_VARIABLE","$disc",378],"]",";",["T_WHITESPACE","\n            ",378],["T_VARIABLE","$id",379],["T_WHITESPACE"," ",379],"=",["T_WHITESPACE"," ",379],["T_VARIABLE","$id",379],["T_WHITESPACE"," ",379],".",["T_WHITESPACE"," ",379],["T_VARIABLE","$char",379],"[",["T_VARIABLE","$disc",379],"]",";",["T_WHITESPACE","\n        ",379],"}",["T_WHITESPACE","\n        ",380],["T_RETURN","return",381],["T_WHITESPACE"," ",381],["T_VARIABLE","$id",381],";",["T_WHITESPACE","\n    ",381],"}",["T_WHITESPACE","\n\n    ",382],["T_DOC_COMMENT","\/**\n     * Subscribes by email\n     *\n     * @param string $email\n     * @throws \\Exception\n     * @return int\n     *\n     * @SuppressWarnings(PHPMD.CyclomaticComplexity)\n     * @SuppressWarnings(PHPMD.NPathComplexity)\n     *\/",384],["T_WHITESPACE","\n    ",393],["T_PUBLIC","public",394],["T_WHITESPACE"," ",394],["T_FUNCTION","function",394],["T_WHITESPACE"," ",394],["T_STRING","subscribe",394],"(",["T_VARIABLE","$email",394],")",["T_WHITESPACE","\n    ",394],"{",["T_WHITESPACE","\n        ",395],["T_VARIABLE","$this",396],["T_OBJECT_OPERATOR","->",396],["T_STRING","loadByEmail",396],"(",["T_VARIABLE","$email",396],")",";",["T_WHITESPACE","\n\n        ",396],["T_IF","if",398],["T_WHITESPACE"," ",398],"(","!",["T_VARIABLE","$this",398],["T_OBJECT_OPERATOR","->",398],["T_STRING","getId",398],"(",")",")",["T_WHITESPACE"," ",398],"{",["T_WHITESPACE","\n            ",398],["T_VARIABLE","$this",399],["T_OBJECT_OPERATOR","->",399],["T_STRING","setSubscriberConfirmCode",399],"(",["T_VARIABLE","$this",399],["T_OBJECT_OPERATOR","->",399],["T_STRING","randomSequence",399],"(",")",")",";",["T_WHITESPACE","\n        ",399],"}",["T_WHITESPACE","\n\n        ",400],["T_VARIABLE","$isConfirmNeed",402],["T_WHITESPACE"," ",402],"=",["T_WHITESPACE"," ",402],["T_VARIABLE","$this",402],["T_OBJECT_OPERATOR","->",402],["T_STRING","_scopeConfig",402],["T_OBJECT_OPERATOR","->",402],["T_STRING","getValue",402],"(",["T_WHITESPACE","\n            ",402],["T_STRING","self",403],["T_DOUBLE_COLON","::",403],["T_STRING","XML_PATH_CONFIRMATION_FLAG",403],",",["T_WHITESPACE","\n            ",403],["T_NS_SEPARATOR","\\",404],["T_STRING","Magento",404],["T_NS_SEPARATOR","\\",404],["T_STRING","Store",404],["T_NS_SEPARATOR","\\",404],["T_STRING","Model",404],["T_NS_SEPARATOR","\\",404],["T_STRING","ScopeInterface",404],["T_DOUBLE_COLON","::",404],["T_STRING","SCOPE_STORE",404],["T_WHITESPACE","\n        ",404],")",["T_WHITESPACE"," ",405],["T_IS_EQUAL","==",405],["T_WHITESPACE"," ",405],["T_LNUMBER","1",405],["T_WHITESPACE"," ",405],"?",["T_WHITESPACE"," ",405],["T_STRING","true",405],["T_WHITESPACE"," ",405],":",["T_WHITESPACE"," ",405],["T_STRING","false",405],";",["T_WHITESPACE","\n        ",405],["T_VARIABLE","$isOwnSubscribes",406],["T_WHITESPACE"," ",406],"=",["T_WHITESPACE"," ",406],["T_STRING","false",406],";",["T_WHITESPACE","\n\n        ",406],["T_VARIABLE","$isSubscribeOwnEmail",408],["T_WHITESPACE"," ",408],"=",["T_WHITESPACE"," ",408],["T_VARIABLE","$this",408],["T_OBJECT_OPERATOR","->",408],["T_STRING","_customerSession",408],["T_OBJECT_OPERATOR","->",408],["T_STRING","isLoggedIn",408],"(",")",["T_WHITESPACE","\n            ",408],["T_BOOLEAN_AND","&&",409],["T_WHITESPACE"," ",409],["T_VARIABLE","$this",409],["T_OBJECT_OPERATOR","->",409],["T_STRING","_customerSession",409],["T_OBJECT_OPERATOR","->",409],["T_STRING","getCustomerDataObject",409],"(",")",["T_OBJECT_OPERATOR","->",409],["T_STRING","getEmail",409],"(",")",["T_WHITESPACE"," ",409],["T_IS_EQUAL","==",409],["T_WHITESPACE"," ",409],["T_VARIABLE","$email",409],";",["T_WHITESPACE","\n\n        ",409],["T_IF","if",411],["T_WHITESPACE"," ",411],"(","!",["T_VARIABLE","$this",411],["T_OBJECT_OPERATOR","->",411],["T_STRING","getId",411],"(",")",["T_WHITESPACE"," ",411],["T_BOOLEAN_OR","||",411],["T_WHITESPACE"," ",411],["T_VARIABLE","$this",411],["T_OBJECT_OPERATOR","->",411],["T_STRING","getStatus",411],"(",")",["T_WHITESPACE"," ",411],["T_IS_EQUAL","==",411],["T_WHITESPACE"," ",411],["T_STRING","self",411],["T_DOUBLE_COLON","::",411],["T_STRING","STATUS_UNSUBSCRIBED",411],["T_WHITESPACE","\n            ",411],["T_BOOLEAN_OR","||",412],["T_WHITESPACE"," ",412],["T_VARIABLE","$this",412],["T_OBJECT_OPERATOR","->",412],["T_STRING","getStatus",412],"(",")",["T_WHITESPACE"," ",412],["T_IS_EQUAL","==",412],["T_WHITESPACE"," ",412],["T_STRING","self",412],["T_DOUBLE_COLON","::",412],["T_STRING","STATUS_NOT_ACTIVE",412],["T_WHITESPACE","\n        ",412],")",["T_WHITESPACE"," ",413],"{",["T_WHITESPACE","\n            ",413],["T_IF","if",414],["T_WHITESPACE"," ",414],"(",["T_VARIABLE","$isConfirmNeed",414],["T_WHITESPACE"," ",414],["T_IS_IDENTICAL","===",414],["T_WHITESPACE"," ",414],["T_STRING","true",414],")",["T_WHITESPACE"," ",414],"{",["T_WHITESPACE","\n                ",414],["T_COMMENT","\/\/ if user subscribes own login email - confirmation is not needed\n",415],["T_WHITESPACE","                ",416],["T_VARIABLE","$isOwnSubscribes",416],["T_WHITESPACE"," ",416],"=",["T_WHITESPACE"," ",416],["T_VARIABLE","$isSubscribeOwnEmail",416],";",["T_WHITESPACE","\n                ",416],["T_IF","if",417],["T_WHITESPACE"," ",417],"(",["T_VARIABLE","$isOwnSubscribes",417],["T_WHITESPACE"," ",417],["T_IS_EQUAL","==",417],["T_WHITESPACE"," ",417],["T_STRING","true",417],")",["T_WHITESPACE"," ",417],"{",["T_WHITESPACE","\n                    ",417],["T_VARIABLE","$this",418],["T_OBJECT_OPERATOR","->",418],["T_STRING","setStatus",418],"(",["T_STRING","self",418],["T_DOUBLE_COLON","::",418],["T_STRING","STATUS_SUBSCRIBED",418],")",";",["T_WHITESPACE","\n                ",418],"}",["T_WHITESPACE"," ",419],["T_ELSE","else",419],["T_WHITESPACE"," ",419],"{",["T_WHITESPACE","\n                    ",419],["T_VARIABLE","$this",420],["T_OBJECT_OPERATOR","->",420],["T_STRING","setStatus",420],"(",["T_STRING","self",420],["T_DOUBLE_COLON","::",420],["T_STRING","STATUS_NOT_ACTIVE",420],")",";",["T_WHITESPACE","\n                ",420],"}",["T_WHITESPACE","\n            ",421],"}",["T_WHITESPACE"," ",422],["T_ELSE","else",422],["T_WHITESPACE"," ",422],"{",["T_WHITESPACE","\n                ",422],["T_VARIABLE","$this",423],["T_OBJECT_OPERATOR","->",423],["T_STRING","setStatus",423],"(",["T_STRING","self",423],["T_DOUBLE_COLON","::",423],["T_STRING","STATUS_SUBSCRIBED",423],")",";",["T_WHITESPACE","\n            ",423],"}",["T_WHITESPACE","\n            ",424],["T_VARIABLE","$this",425],["T_OBJECT_OPERATOR","->",425],["T_STRING","setSubscriberEmail",425],"(",["T_VARIABLE","$email",425],")",";",["T_WHITESPACE","\n        ",425],"}",["T_WHITESPACE","\n\n        ",426],["T_IF","if",428],["T_WHITESPACE"," ",428],"(",["T_VARIABLE","$isSubscribeOwnEmail",428],")",["T_WHITESPACE"," ",428],"{",["T_WHITESPACE","\n            ",428],["T_TRY","try",429],["T_WHITESPACE"," ",429],"{",["T_WHITESPACE","\n                ",429],["T_VARIABLE","$customer",430],["T_WHITESPACE"," ",430],"=",["T_WHITESPACE"," ",430],["T_VARIABLE","$this",430],["T_OBJECT_OPERATOR","->",430],["T_STRING","customerRepository",430],["T_OBJECT_OPERATOR","->",430],["T_STRING","getById",430],"(",["T_VARIABLE","$this",430],["T_OBJECT_OPERATOR","->",430],["T_STRING","_customerSession",430],["T_OBJECT_OPERATOR","->",430],["T_STRING","getCustomerId",430],"(",")",")",";",["T_WHITESPACE","\n                ",430],["T_VARIABLE","$this",431],["T_OBJECT_OPERATOR","->",431],["T_STRING","setStoreId",431],"(",["T_VARIABLE","$customer",431],["T_OBJECT_OPERATOR","->",431],["T_STRING","getStoreId",431],"(",")",")",";",["T_WHITESPACE","\n                ",431],["T_VARIABLE","$this",432],["T_OBJECT_OPERATOR","->",432],["T_STRING","setCustomerId",432],"(",["T_VARIABLE","$customer",432],["T_OBJECT_OPERATOR","->",432],["T_STRING","getId",432],"(",")",")",";",["T_WHITESPACE","\n            ",432],"}",["T_WHITESPACE"," ",433],["T_CATCH","catch",433],["T_WHITESPACE"," ",433],"(",["T_STRING","NoSuchEntityException",433],["T_WHITESPACE"," ",433],["T_VARIABLE","$e",433],")",["T_WHITESPACE"," ",433],"{",["T_WHITESPACE","\n                ",433],["T_VARIABLE","$this",434],["T_OBJECT_OPERATOR","->",434],["T_STRING","setStoreId",434],"(",["T_VARIABLE","$this",434],["T_OBJECT_OPERATOR","->",434],["T_STRING","_storeManager",434],["T_OBJECT_OPERATOR","->",434],["T_STRING","getStore",434],"(",")",["T_OBJECT_OPERATOR","->",434],["T_STRING","getId",434],"(",")",")",";",["T_WHITESPACE","\n                ",434],["T_VARIABLE","$this",435],["T_OBJECT_OPERATOR","->",435],["T_STRING","setCustomerId",435],"(",["T_LNUMBER","0",435],")",";",["T_WHITESPACE","\n            ",435],"}",["T_WHITESPACE","\n        ",436],"}",["T_WHITESPACE"," ",437],["T_ELSE","else",437],["T_WHITESPACE"," ",437],"{",["T_WHITESPACE","\n            ",437],["T_VARIABLE","$this",438],["T_OBJECT_OPERATOR","->",438],["T_STRING","setStoreId",438],"(",["T_VARIABLE","$this",438],["T_OBJECT_OPERATOR","->",438],["T_STRING","_storeManager",438],["T_OBJECT_OPERATOR","->",438],["T_STRING","getStore",438],"(",")",["T_OBJECT_OPERATOR","->",438],["T_STRING","getId",438],"(",")",")",";",["T_WHITESPACE","\n            ",438],["T_VARIABLE","$this",439],["T_OBJECT_OPERATOR","->",439],["T_STRING","setCustomerId",439],"(",["T_LNUMBER","0",439],")",";",["T_WHITESPACE","\n        ",439],"}",["T_WHITESPACE","\n\n        ",440],["T_VARIABLE","$this",442],["T_OBJECT_OPERATOR","->",442],["T_STRING","setStatusChanged",442],"(",["T_STRING","true",442],")",";",["T_WHITESPACE","\n\n        ",442],["T_TRY","try",444],["T_WHITESPACE"," ",444],"{",["T_WHITESPACE","\n            ",444],["T_COMMENT","\/* Save model before sending out email *\/",445],["T_WHITESPACE","\n            ",445],["T_VARIABLE","$this",446],["T_OBJECT_OPERATOR","->",446],["T_STRING","save",446],"(",")",";",["T_WHITESPACE","\n            ",446],["T_IF","if",447],["T_WHITESPACE"," ",447],"(",["T_VARIABLE","$isConfirmNeed",447],["T_WHITESPACE"," ",447],["T_IS_IDENTICAL","===",447],["T_WHITESPACE"," ",447],["T_STRING","true",447],["T_WHITESPACE","\n                ",447],["T_BOOLEAN_AND","&&",448],["T_WHITESPACE"," ",448],["T_VARIABLE","$isOwnSubscribes",448],["T_WHITESPACE"," ",448],["T_IS_IDENTICAL","===",448],["T_WHITESPACE"," ",448],["T_STRING","false",448],["T_WHITESPACE","\n            ",448],")",["T_WHITESPACE"," ",449],"{",["T_WHITESPACE","\n                ",449],["T_VARIABLE","$this",450],["T_OBJECT_OPERATOR","->",450],["T_STRING","sendConfirmationRequestEmail",450],"(",")",";",["T_WHITESPACE","\n            ",450],"}",["T_WHITESPACE"," ",451],["T_ELSE","else",451],["T_WHITESPACE"," ",451],"{",["T_WHITESPACE","\n                ",451],["T_VARIABLE","$this",452],["T_OBJECT_OPERATOR","->",452],["T_STRING","sendConfirmationSuccessEmail",452],"(",")",";",["T_WHITESPACE","\n            ",452],"}",["T_WHITESPACE","\n            ",453],["T_RETURN","return",454],["T_WHITESPACE"," ",454],["T_VARIABLE","$this",454],["T_OBJECT_OPERATOR","->",454],["T_STRING","getStatus",454],"(",")",";",["T_WHITESPACE","\n        ",454],"}",["T_WHITESPACE"," ",455],["T_CATCH","catch",455],["T_WHITESPACE"," ",455],"(",["T_NS_SEPARATOR","\\",455],["T_STRING","Exception",455],["T_WHITESPACE"," ",455],["T_VARIABLE","$e",455],")",["T_WHITESPACE"," ",455],"{",["T_WHITESPACE","\n            ",455],["T_THROW","throw",456],["T_WHITESPACE"," ",456],["T_NEW","new",456],["T_WHITESPACE"," ",456],["T_NS_SEPARATOR","\\",456],["T_STRING","Exception",456],"(",["T_VARIABLE","$e",456],["T_OBJECT_OPERATOR","->",456],["T_STRING","getMessage",456],"(",")",")",";",["T_WHITESPACE","\n        ",456],"}",["T_WHITESPACE","\n    ",457],"}",["T_WHITESPACE","\n\n    ",458],["T_DOC_COMMENT","\/**\n     * Unsubscribes loaded subscription\n     *\n     * @throws \\Magento\\Framework\\Exception\\LocalizedException\n     * @return $this\n     *\/",460],["T_WHITESPACE","\n    ",465],["T_PUBLIC","public",466],["T_WHITESPACE"," ",466],["T_FUNCTION","function",466],["T_WHITESPACE"," ",466],["T_STRING","unsubscribe",466],"(",")",["T_WHITESPACE","\n    ",466],"{",["T_WHITESPACE","\n        ",467],["T_IF","if",468],["T_WHITESPACE"," ",468],"(",["T_VARIABLE","$this",468],["T_OBJECT_OPERATOR","->",468],["T_STRING","hasCheckCode",468],"(",")",["T_WHITESPACE"," ",468],["T_BOOLEAN_AND","&&",468],["T_WHITESPACE"," ",468],["T_VARIABLE","$this",468],["T_OBJECT_OPERATOR","->",468],["T_STRING","getCode",468],"(",")",["T_WHITESPACE"," ",468],["T_IS_NOT_EQUAL","!=",468],["T_WHITESPACE"," ",468],["T_VARIABLE","$this",468],["T_OBJECT_OPERATOR","->",468],["T_STRING","getCheckCode",468],"(",")",")",["T_WHITESPACE"," ",468],"{",["T_WHITESPACE","\n            ",468],["T_THROW","throw",469],["T_WHITESPACE"," ",469],["T_NEW","new",469],["T_WHITESPACE"," ",469],["T_NS_SEPARATOR","\\",469],["T_STRING","Magento",469],["T_NS_SEPARATOR","\\",469],["T_STRING","Framework",469],["T_NS_SEPARATOR","\\",469],["T_STRING","Exception",469],["T_NS_SEPARATOR","\\",469],["T_STRING","LocalizedException",469],"(",["T_WHITESPACE","\n                ",469],["T_STRING","__",470],"(",["T_CONSTANT_ENCAPSED_STRING","'This is an invalid subscription confirmation code.'",470],")",["T_WHITESPACE","\n            ",470],")",";",["T_WHITESPACE","\n        ",471],"}",["T_WHITESPACE","\n\n        ",472],["T_IF","if",474],["T_WHITESPACE"," ",474],"(",["T_VARIABLE","$this",474],["T_OBJECT_OPERATOR","->",474],["T_STRING","getSubscriberStatus",474],"(",")",["T_WHITESPACE"," ",474],["T_IS_NOT_EQUAL","!=",474],["T_WHITESPACE"," ",474],["T_STRING","self",474],["T_DOUBLE_COLON","::",474],["T_STRING","STATUS_UNSUBSCRIBED",474],")",["T_WHITESPACE"," ",474],"{",["T_WHITESPACE","\n            ",474],["T_VARIABLE","$this",475],["T_OBJECT_OPERATOR","->",475],["T_STRING","setSubscriberStatus",475],"(",["T_STRING","self",475],["T_DOUBLE_COLON","::",475],["T_STRING","STATUS_UNSUBSCRIBED",475],")",["T_OBJECT_OPERATOR","->",475],["T_STRING","save",475],"(",")",";",["T_WHITESPACE","\n            ",475],["T_VARIABLE","$this",476],["T_OBJECT_OPERATOR","->",476],["T_STRING","sendUnsubscriptionEmail",476],"(",")",";",["T_WHITESPACE","\n        ",476],"}",["T_WHITESPACE","\n        ",477],["T_RETURN","return",478],["T_WHITESPACE"," ",478],["T_VARIABLE","$this",478],";",["T_WHITESPACE","\n    ",478],"}",["T_WHITESPACE","\n\n    ",479],["T_DOC_COMMENT","\/**\n     * Subscribe the customer with the id provided\n     *\n     * @param int $customerId\n     * @return $this\n     *\/",481],["T_WHITESPACE","\n    ",486],["T_PUBLIC","public",487],["T_WHITESPACE"," ",487],["T_FUNCTION","function",487],["T_WHITESPACE"," ",487],["T_STRING","subscribeCustomerById",487],"(",["T_VARIABLE","$customerId",487],")",["T_WHITESPACE","\n    ",487],"{",["T_WHITESPACE","\n        ",488],["T_RETURN","return",489],["T_WHITESPACE"," ",489],["T_VARIABLE","$this",489],["T_OBJECT_OPERATOR","->",489],["T_STRING","_updateCustomerSubscription",489],"(",["T_VARIABLE","$customerId",489],",",["T_WHITESPACE"," ",489],["T_STRING","true",489],")",";",["T_WHITESPACE","\n    ",489],"}",["T_WHITESPACE","\n\n    ",490],["T_DOC_COMMENT","\/**\n     * unsubscribe the customer with the id provided\n     *\n     * @param int $customerId\n     * @return $this\n     *\/",492],["T_WHITESPACE","\n    ",497],["T_PUBLIC","public",498],["T_WHITESPACE"," ",498],["T_FUNCTION","function",498],["T_WHITESPACE"," ",498],["T_STRING","unsubscribeCustomerById",498],"(",["T_VARIABLE","$customerId",498],")",["T_WHITESPACE","\n    ",498],"{",["T_WHITESPACE","\n        ",499],["T_RETURN","return",500],["T_WHITESPACE"," ",500],["T_VARIABLE","$this",500],["T_OBJECT_OPERATOR","->",500],["T_STRING","_updateCustomerSubscription",500],"(",["T_VARIABLE","$customerId",500],",",["T_WHITESPACE"," ",500],["T_STRING","false",500],")",";",["T_WHITESPACE","\n    ",500],"}",["T_WHITESPACE","\n\n    ",501],["T_DOC_COMMENT","\/**\n     * Update the subscription based on latest information of associated customer.\n     *\n     * @param int $customerId\n     * @return $this\n     *\/",503],["T_WHITESPACE","\n    ",508],["T_PUBLIC","public",509],["T_WHITESPACE"," ",509],["T_FUNCTION","function",509],["T_WHITESPACE"," ",509],["T_STRING","updateSubscription",509],"(",["T_VARIABLE","$customerId",509],")",["T_WHITESPACE","\n    ",509],"{",["T_WHITESPACE","\n        ",510],["T_VARIABLE","$this",511],["T_OBJECT_OPERATOR","->",511],["T_STRING","loadByCustomerId",511],"(",["T_VARIABLE","$customerId",511],")",";",["T_WHITESPACE","\n        ",511],["T_VARIABLE","$this",512],["T_OBJECT_OPERATOR","->",512],["T_STRING","_updateCustomerSubscription",512],"(",["T_VARIABLE","$customerId",512],",",["T_WHITESPACE"," ",512],["T_VARIABLE","$this",512],["T_OBJECT_OPERATOR","->",512],["T_STRING","isSubscribed",512],"(",")",")",";",["T_WHITESPACE","\n        ",512],["T_RETURN","return",513],["T_WHITESPACE"," ",513],["T_VARIABLE","$this",513],";",["T_WHITESPACE","\n    ",513],"}",["T_WHITESPACE","\n\n    ",514],["T_DOC_COMMENT","\/**\n     * Saving customer subscription status\n     *\n     * @param int $customerId\n     * @param bool $subscribe indicates whether the customer should be subscribed or unsubscribed\n     * @return  $this\n     *\n     * @SuppressWarnings(PHPMD.CyclomaticComplexity)\n     * @SuppressWarnings(PHPMD.NPathComplexity)\n     *\/",516],["T_WHITESPACE","\n    ",525],["T_PROTECTED","protected",526],["T_WHITESPACE"," ",526],["T_FUNCTION","function",526],["T_WHITESPACE"," ",526],["T_STRING","_updateCustomerSubscription",526],"(",["T_VARIABLE","$customerId",526],",",["T_WHITESPACE"," ",526],["T_VARIABLE","$subscribe",526],")",["T_WHITESPACE","\n    ",526],"{",["T_WHITESPACE","\n        ",527],["T_TRY","try",528],["T_WHITESPACE"," ",528],"{",["T_WHITESPACE","\n            ",528],["T_VARIABLE","$customerData",529],["T_WHITESPACE"," ",529],"=",["T_WHITESPACE"," ",529],["T_VARIABLE","$this",529],["T_OBJECT_OPERATOR","->",529],["T_STRING","customerRepository",529],["T_OBJECT_OPERATOR","->",529],["T_STRING","getById",529],"(",["T_VARIABLE","$customerId",529],")",";",["T_WHITESPACE","\n        ",529],"}",["T_WHITESPACE"," ",530],["T_CATCH","catch",530],["T_WHITESPACE"," ",530],"(",["T_STRING","NoSuchEntityException",530],["T_WHITESPACE"," ",530],["T_VARIABLE","$e",530],")",["T_WHITESPACE"," ",530],"{",["T_WHITESPACE","\n            ",530],["T_RETURN","return",531],["T_WHITESPACE"," ",531],["T_VARIABLE","$this",531],";",["T_WHITESPACE","\n        ",531],"}",["T_WHITESPACE","\n\n        ",532],["T_VARIABLE","$this",534],["T_OBJECT_OPERATOR","->",534],["T_STRING","loadByCustomerId",534],"(",["T_VARIABLE","$customerId",534],")",";",["T_WHITESPACE","\n        ",534],["T_IF","if",535],["T_WHITESPACE"," ",535],"(","!",["T_VARIABLE","$subscribe",535],["T_WHITESPACE"," ",535],["T_BOOLEAN_AND","&&",535],["T_WHITESPACE"," ",535],"!",["T_VARIABLE","$this",535],["T_OBJECT_OPERATOR","->",535],["T_STRING","getId",535],"(",")",")",["T_WHITESPACE"," ",535],"{",["T_WHITESPACE","\n            ",535],["T_RETURN","return",536],["T_WHITESPACE"," ",536],["T_VARIABLE","$this",536],";",["T_WHITESPACE","\n        ",536],"}",["T_WHITESPACE","\n\n        ",537],["T_IF","if",539],["T_WHITESPACE"," ",539],"(","!",["T_VARIABLE","$this",539],["T_OBJECT_OPERATOR","->",539],["T_STRING","getId",539],"(",")",")",["T_WHITESPACE"," ",539],"{",["T_WHITESPACE","\n            ",539],["T_VARIABLE","$this",540],["T_OBJECT_OPERATOR","->",540],["T_STRING","setSubscriberConfirmCode",540],"(",["T_VARIABLE","$this",540],["T_OBJECT_OPERATOR","->",540],["T_STRING","randomSequence",540],"(",")",")",";",["T_WHITESPACE","\n        ",540],"}",["T_WHITESPACE","\n\n        ",541],["T_VARIABLE","$sendInformationEmail",543],["T_WHITESPACE"," ",543],"=",["T_WHITESPACE"," ",543],["T_STRING","false",543],";",["T_WHITESPACE","\n        ",543],["T_VARIABLE","$status",544],["T_WHITESPACE"," ",544],"=",["T_WHITESPACE"," ",544],["T_STRING","self",544],["T_DOUBLE_COLON","::",544],["T_STRING","STATUS_SUBSCRIBED",544],";",["T_WHITESPACE","\n        ",544],["T_VARIABLE","$isConfirmNeed",545],["T_WHITESPACE"," ",545],"=",["T_WHITESPACE"," ",545],["T_VARIABLE","$this",545],["T_OBJECT_OPERATOR","->",545],["T_STRING","_scopeConfig",545],["T_OBJECT_OPERATOR","->",545],["T_STRING","getValue",545],"(",["T_WHITESPACE","\n            ",545],["T_STRING","self",546],["T_DOUBLE_COLON","::",546],["T_STRING","XML_PATH_CONFIRMATION_FLAG",546],",",["T_WHITESPACE","\n            ",546],["T_NS_SEPARATOR","\\",547],["T_STRING","Magento",547],["T_NS_SEPARATOR","\\",547],["T_STRING","Store",547],["T_NS_SEPARATOR","\\",547],["T_STRING","Model",547],["T_NS_SEPARATOR","\\",547],["T_STRING","ScopeInterface",547],["T_DOUBLE_COLON","::",547],["T_STRING","SCOPE_STORE",547],["T_WHITESPACE","\n        ",547],")",["T_WHITESPACE"," ",548],["T_IS_EQUAL","==",548],["T_WHITESPACE"," ",548],["T_LNUMBER","1",548],["T_WHITESPACE"," ",548],"?",["T_WHITESPACE"," ",548],["T_STRING","true",548],["T_WHITESPACE"," ",548],":",["T_WHITESPACE"," ",548],["T_STRING","false",548],";",["T_WHITESPACE","\n        ",548],["T_IF","if",549],["T_WHITESPACE"," ",549],"(",["T_VARIABLE","$subscribe",549],")",["T_WHITESPACE"," ",549],"{",["T_WHITESPACE","\n            ",549],["T_IF","if",550],["T_WHITESPACE"," ",550],"(",["T_STRING","AccountManagementInterface",550],["T_DOUBLE_COLON","::",550],["T_STRING","ACCOUNT_CONFIRMATION_REQUIRED",550],["T_WHITESPACE","\n                ",550],["T_IS_EQUAL","==",551],["T_WHITESPACE"," ",551],["T_VARIABLE","$this",551],["T_OBJECT_OPERATOR","->",551],["T_STRING","customerAccountManagement",551],["T_OBJECT_OPERATOR","->",551],["T_STRING","getConfirmationStatus",551],"(",["T_VARIABLE","$customerId",551],")",["T_WHITESPACE","\n            ",551],")",["T_WHITESPACE"," ",552],"{",["T_WHITESPACE","\n                ",552],["T_VARIABLE","$status",553],["T_WHITESPACE"," ",553],"=",["T_WHITESPACE"," ",553],["T_STRING","self",553],["T_DOUBLE_COLON","::",553],["T_STRING","STATUS_UNCONFIRMED",553],";",["T_WHITESPACE","\n            ",553],"}",["T_WHITESPACE"," ",554],["T_ELSE","else",554],["T_WHITESPACE"," ",554],["T_IF","if",554],["T_WHITESPACE"," ",554],"(",["T_VARIABLE","$isConfirmNeed",554],")",["T_WHITESPACE"," ",554],"{",["T_WHITESPACE","\n                ",554],["T_VARIABLE","$status",555],["T_WHITESPACE"," ",555],"=",["T_WHITESPACE"," ",555],["T_STRING","self",555],["T_DOUBLE_COLON","::",555],["T_STRING","STATUS_NOT_ACTIVE",555],";",["T_WHITESPACE","\n            ",555],"}",["T_WHITESPACE","\n        ",556],"}",["T_WHITESPACE"," ",557],["T_ELSE","else",557],["T_WHITESPACE"," ",557],"{",["T_WHITESPACE","\n            ",557],["T_VARIABLE","$status",558],["T_WHITESPACE"," ",558],"=",["T_WHITESPACE"," ",558],["T_STRING","self",558],["T_DOUBLE_COLON","::",558],["T_STRING","STATUS_UNSUBSCRIBED",558],";",["T_WHITESPACE","\n        ",558],"}",["T_WHITESPACE","\n        ",559],["T_DOC_COMMENT","\/**\n         * If subscription status has been changed then send email to the customer\n         *\/",560],["T_WHITESPACE","\n        ",562],["T_IF","if",563],["T_WHITESPACE"," ",563],"(",["T_VARIABLE","$status",563],["T_WHITESPACE"," ",563],["T_IS_NOT_EQUAL","!=",563],["T_WHITESPACE"," ",563],["T_STRING","self",563],["T_DOUBLE_COLON","::",563],["T_STRING","STATUS_UNCONFIRMED",563],["T_WHITESPACE"," ",563],["T_BOOLEAN_AND","&&",563],["T_WHITESPACE"," ",563],["T_VARIABLE","$status",563],["T_WHITESPACE"," ",563],["T_IS_NOT_EQUAL","!=",563],["T_WHITESPACE"," ",563],["T_VARIABLE","$this",563],["T_OBJECT_OPERATOR","->",563],["T_STRING","getStatus",563],"(",")",")",["T_WHITESPACE"," ",563],"{",["T_WHITESPACE","\n            ",563],["T_VARIABLE","$sendInformationEmail",564],["T_WHITESPACE"," ",564],"=",["T_WHITESPACE"," ",564],["T_STRING","true",564],";",["T_WHITESPACE","\n        ",564],"}",["T_WHITESPACE","\n\n        ",565],["T_IF","if",567],["T_WHITESPACE"," ",567],"(",["T_VARIABLE","$status",567],["T_WHITESPACE"," ",567],["T_IS_NOT_EQUAL","!=",567],["T_WHITESPACE"," ",567],["T_VARIABLE","$this",567],["T_OBJECT_OPERATOR","->",567],["T_STRING","getStatus",567],"(",")",")",["T_WHITESPACE"," ",567],"{",["T_WHITESPACE","\n            ",567],["T_VARIABLE","$this",568],["T_OBJECT_OPERATOR","->",568],["T_STRING","setStatusChanged",568],"(",["T_STRING","true",568],")",";",["T_WHITESPACE","\n        ",568],"}",["T_WHITESPACE","\n\n        ",569],["T_VARIABLE","$this",571],["T_OBJECT_OPERATOR","->",571],["T_STRING","setStatus",571],"(",["T_VARIABLE","$status",571],")",";",["T_WHITESPACE","\n\n        ",571],["T_IF","if",573],["T_WHITESPACE"," ",573],"(","!",["T_VARIABLE","$this",573],["T_OBJECT_OPERATOR","->",573],["T_STRING","getId",573],"(",")",")",["T_WHITESPACE"," ",573],"{",["T_WHITESPACE","\n            ",573],["T_VARIABLE","$storeId",574],["T_WHITESPACE"," ",574],"=",["T_WHITESPACE"," ",574],["T_VARIABLE","$customerData",574],["T_OBJECT_OPERATOR","->",574],["T_STRING","getStoreId",574],"(",")",";",["T_WHITESPACE","\n            ",574],["T_IF","if",575],["T_WHITESPACE"," ",575],"(",["T_VARIABLE","$customerData",575],["T_OBJECT_OPERATOR","->",575],["T_STRING","getStoreId",575],"(",")",["T_WHITESPACE"," ",575],["T_IS_EQUAL","==",575],["T_WHITESPACE"," ",575],["T_LNUMBER","0",575],")",["T_WHITESPACE"," ",575],"{",["T_WHITESPACE","\n                ",575],["T_VARIABLE","$storeId",576],["T_WHITESPACE"," ",576],"=",["T_WHITESPACE"," ",576],["T_VARIABLE","$this",576],["T_OBJECT_OPERATOR","->",576],["T_STRING","_storeManager",576],["T_OBJECT_OPERATOR","->",576],["T_STRING","getWebsite",576],"(",["T_VARIABLE","$customerData",576],["T_OBJECT_OPERATOR","->",576],["T_STRING","getWebsiteId",576],"(",")",")",["T_OBJECT_OPERATOR","->",576],["T_STRING","getDefaultStore",576],"(",")",["T_OBJECT_OPERATOR","->",576],["T_STRING","getId",576],"(",")",";",["T_WHITESPACE","\n            ",576],"}",["T_WHITESPACE","\n            ",577],["T_VARIABLE","$this",578],["T_OBJECT_OPERATOR","->",578],["T_STRING","setStoreId",578],"(",["T_VARIABLE","$storeId",578],")",["T_WHITESPACE","\n                ",578],["T_OBJECT_OPERATOR","->",579],["T_STRING","setCustomerId",579],"(",["T_VARIABLE","$customerData",579],["T_OBJECT_OPERATOR","->",579],["T_STRING","getId",579],"(",")",")",["T_WHITESPACE","\n                ",579],["T_OBJECT_OPERATOR","->",580],["T_STRING","setEmail",580],"(",["T_VARIABLE","$customerData",580],["T_OBJECT_OPERATOR","->",580],["T_STRING","getEmail",580],"(",")",")",";",["T_WHITESPACE","\n        ",580],"}",["T_WHITESPACE"," ",581],["T_ELSE","else",581],["T_WHITESPACE"," ",581],"{",["T_WHITESPACE","\n            ",581],["T_VARIABLE","$this",582],["T_OBJECT_OPERATOR","->",582],["T_STRING","setStoreId",582],"(",["T_VARIABLE","$customerData",582],["T_OBJECT_OPERATOR","->",582],["T_STRING","getStoreId",582],"(",")",")",["T_WHITESPACE","\n                ",582],["T_OBJECT_OPERATOR","->",583],["T_STRING","setEmail",583],"(",["T_VARIABLE","$customerData",583],["T_OBJECT_OPERATOR","->",583],["T_STRING","getEmail",583],"(",")",")",";",["T_WHITESPACE","\n        ",583],"}",["T_WHITESPACE","\n\n        ",584],["T_VARIABLE","$this",586],["T_OBJECT_OPERATOR","->",586],["T_STRING","save",586],"(",")",";",["T_WHITESPACE","\n        ",586],["T_VARIABLE","$sendSubscription",587],["T_WHITESPACE"," ",587],"=",["T_WHITESPACE"," ",587],["T_VARIABLE","$sendInformationEmail",587],";",["T_WHITESPACE","\n        ",587],["T_IF","if",588],["T_WHITESPACE"," ",588],"(",["T_VARIABLE","$sendSubscription",588],["T_WHITESPACE"," ",588],["T_IS_IDENTICAL","===",588],["T_WHITESPACE"," ",588],["T_STRING","null",588],["T_WHITESPACE"," ",588],["T_LOGICAL_XOR","xor",588],["T_WHITESPACE"," ",588],["T_VARIABLE","$sendSubscription",588],")",["T_WHITESPACE"," ",588],"{",["T_WHITESPACE","\n            ",588],["T_TRY","try",589],["T_WHITESPACE"," ",589],"{",["T_WHITESPACE","\n                ",589],["T_IF","if",590],["T_WHITESPACE"," ",590],"(",["T_VARIABLE","$isConfirmNeed",590],")",["T_WHITESPACE"," ",590],"{",["T_WHITESPACE","\n                    ",590],["T_VARIABLE","$this",591],["T_OBJECT_OPERATOR","->",591],["T_STRING","sendConfirmationRequestEmail",591],"(",")",";",["T_WHITESPACE","\n                ",591],"}",["T_WHITESPACE"," ",592],["T_ELSE","else",592],["T_WHITESPACE"," ",592],["T_IF","if",592],["T_WHITESPACE"," ",592],"(",["T_VARIABLE","$this",592],["T_OBJECT_OPERATOR","->",592],["T_STRING","isStatusChanged",592],"(",")",["T_WHITESPACE"," ",592],["T_BOOLEAN_AND","&&",592],["T_WHITESPACE"," ",592],["T_VARIABLE","$status",592],["T_WHITESPACE"," ",592],["T_IS_EQUAL","==",592],["T_WHITESPACE"," ",592],["T_STRING","self",592],["T_DOUBLE_COLON","::",592],["T_STRING","STATUS_UNSUBSCRIBED",592],")",["T_WHITESPACE"," ",592],"{",["T_WHITESPACE","\n                    ",592],["T_VARIABLE","$this",593],["T_OBJECT_OPERATOR","->",593],["T_STRING","sendUnsubscriptionEmail",593],"(",")",";",["T_WHITESPACE","\n                ",593],"}",["T_WHITESPACE"," ",594],["T_ELSEIF","elseif",594],["T_WHITESPACE"," ",594],"(",["T_VARIABLE","$this",594],["T_OBJECT_OPERATOR","->",594],["T_STRING","isStatusChanged",594],"(",")",["T_WHITESPACE"," ",594],["T_BOOLEAN_AND","&&",594],["T_WHITESPACE"," ",594],["T_VARIABLE","$status",594],["T_WHITESPACE"," ",594],["T_IS_EQUAL","==",594],["T_WHITESPACE"," ",594],["T_STRING","self",594],["T_DOUBLE_COLON","::",594],["T_STRING","STATUS_SUBSCRIBED",594],")",["T_WHITESPACE"," ",594],"{",["T_WHITESPACE","\n                    ",594],["T_VARIABLE","$this",595],["T_OBJECT_OPERATOR","->",595],["T_STRING","sendConfirmationSuccessEmail",595],"(",")",";",["T_WHITESPACE","\n                ",595],"}",["T_WHITESPACE","\n            ",596],"}",["T_WHITESPACE"," ",597],["T_CATCH","catch",597],["T_WHITESPACE"," ",597],"(",["T_STRING","MailException",597],["T_WHITESPACE"," ",597],["T_VARIABLE","$e",597],")",["T_WHITESPACE"," ",597],"{",["T_WHITESPACE","\n                ",597],["T_COMMENT","\/\/ If we are not able to send a new account email, this should be ignored\n",598],["T_WHITESPACE","                ",599],["T_VARIABLE","$this",599],["T_OBJECT_OPERATOR","->",599],["T_STRING","_logger",599],["T_OBJECT_OPERATOR","->",599],["T_STRING","critical",599],"(",["T_VARIABLE","$e",599],")",";",["T_WHITESPACE","\n            ",599],"}",["T_WHITESPACE","\n        ",600],"}",["T_WHITESPACE","\n        ",601],["T_RETURN","return",602],["T_WHITESPACE"," ",602],["T_VARIABLE","$this",602],";",["T_WHITESPACE","\n    ",602],"}",["T_WHITESPACE","\n\n    ",603],["T_DOC_COMMENT","\/**\n     * Confirms subscriber newsletter\n     *\n     * @param string $code\n     * @return boolean\n     *\/",605],["T_WHITESPACE","\n    ",610],["T_PUBLIC","public",611],["T_WHITESPACE"," ",611],["T_FUNCTION","function",611],["T_WHITESPACE"," ",611],["T_STRING","confirm",611],"(",["T_VARIABLE","$code",611],")",["T_WHITESPACE","\n    ",611],"{",["T_WHITESPACE","\n        ",612],["T_IF","if",613],["T_WHITESPACE"," ",613],"(",["T_VARIABLE","$this",613],["T_OBJECT_OPERATOR","->",613],["T_STRING","getCode",613],"(",")",["T_WHITESPACE"," ",613],["T_IS_EQUAL","==",613],["T_WHITESPACE"," ",613],["T_VARIABLE","$code",613],")",["T_WHITESPACE"," ",613],"{",["T_WHITESPACE","\n            ",613],["T_VARIABLE","$this",614],["T_OBJECT_OPERATOR","->",614],["T_STRING","setStatus",614],"(",["T_STRING","self",614],["T_DOUBLE_COLON","::",614],["T_STRING","STATUS_SUBSCRIBED",614],")",["T_WHITESPACE","\n                ",614],["T_OBJECT_OPERATOR","->",615],["T_STRING","setStatusChanged",615],"(",["T_STRING","true",615],")",["T_WHITESPACE","\n                ",615],["T_OBJECT_OPERATOR","->",616],["T_STRING","save",616],"(",")",";",["T_WHITESPACE","\n            ",616],["T_RETURN","return",617],["T_WHITESPACE"," ",617],["T_STRING","true",617],";",["T_WHITESPACE","\n        ",617],"}",["T_WHITESPACE","\n\n        ",618],["T_RETURN","return",620],["T_WHITESPACE"," ",620],["T_STRING","false",620],";",["T_WHITESPACE","\n    ",620],"}",["T_WHITESPACE","\n\n    ",621],["T_DOC_COMMENT","\/**\n     * Mark receiving subscriber of queue newsletter\n     *\n     * @param  \\Magento\\Newsletter\\Model\\Queue $queue\n     * @return boolean\n     *\/",623],["T_WHITESPACE","\n    ",628],["T_PUBLIC","public",629],["T_WHITESPACE"," ",629],["T_FUNCTION","function",629],["T_WHITESPACE"," ",629],["T_STRING","received",629],"(",["T_NS_SEPARATOR","\\",629],["T_STRING","Magento",629],["T_NS_SEPARATOR","\\",629],["T_STRING","Newsletter",629],["T_NS_SEPARATOR","\\",629],["T_STRING","Model",629],["T_NS_SEPARATOR","\\",629],["T_STRING","Queue",629],["T_WHITESPACE"," ",629],["T_VARIABLE","$queue",629],")",["T_WHITESPACE","\n    ",629],"{",["T_WHITESPACE","\n        ",630],["T_VARIABLE","$this",631],["T_OBJECT_OPERATOR","->",631],["T_STRING","getResource",631],"(",")",["T_OBJECT_OPERATOR","->",631],["T_STRING","received",631],"(",["T_VARIABLE","$this",631],",",["T_WHITESPACE"," ",631],["T_VARIABLE","$queue",631],")",";",["T_WHITESPACE","\n        ",631],["T_RETURN","return",632],["T_WHITESPACE"," ",632],["T_VARIABLE","$this",632],";",["T_WHITESPACE","\n    ",632],"}",["T_WHITESPACE","\n\n    ",633],["T_DOC_COMMENT","\/**\n     * Sends out confirmation email\n     *\n     * @return $this\n     *\/",635],["T_WHITESPACE","\n    ",639],["T_PUBLIC","public",640],["T_WHITESPACE"," ",640],["T_FUNCTION","function",640],["T_WHITESPACE"," ",640],["T_STRING","sendConfirmationRequestEmail",640],"(",")",["T_WHITESPACE","\n    ",640],"{",["T_WHITESPACE","\n        ",641],["T_IF","if",642],["T_WHITESPACE"," ",642],"(",["T_VARIABLE","$this",642],["T_OBJECT_OPERATOR","->",642],["T_STRING","getImportMode",642],"(",")",")",["T_WHITESPACE"," ",642],"{",["T_WHITESPACE","\n            ",642],["T_RETURN","return",643],["T_WHITESPACE"," ",643],["T_VARIABLE","$this",643],";",["T_WHITESPACE","\n        ",643],"}",["T_WHITESPACE","\n\n        ",644],["T_IF","if",646],["T_WHITESPACE"," ",646],"(","!",["T_VARIABLE","$this",646],["T_OBJECT_OPERATOR","->",646],["T_STRING","_scopeConfig",646],["T_OBJECT_OPERATOR","->",646],["T_STRING","getValue",646],"(",["T_WHITESPACE","\n            ",646],["T_STRING","self",647],["T_DOUBLE_COLON","::",647],["T_STRING","XML_PATH_CONFIRM_EMAIL_TEMPLATE",647],",",["T_WHITESPACE","\n            ",647],["T_NS_SEPARATOR","\\",648],["T_STRING","Magento",648],["T_NS_SEPARATOR","\\",648],["T_STRING","Store",648],["T_NS_SEPARATOR","\\",648],["T_STRING","Model",648],["T_NS_SEPARATOR","\\",648],["T_STRING","ScopeInterface",648],["T_DOUBLE_COLON","::",648],["T_STRING","SCOPE_STORE",648],["T_WHITESPACE","\n        ",648],")",["T_WHITESPACE"," ",649],["T_BOOLEAN_OR","||",649],["T_WHITESPACE"," ",649],"!",["T_VARIABLE","$this",649],["T_OBJECT_OPERATOR","->",649],["T_STRING","_scopeConfig",649],["T_OBJECT_OPERATOR","->",649],["T_STRING","getValue",649],"(",["T_WHITESPACE","\n            ",649],["T_STRING","self",650],["T_DOUBLE_COLON","::",650],["T_STRING","XML_PATH_CONFIRM_EMAIL_IDENTITY",650],",",["T_WHITESPACE","\n            ",650],["T_NS_SEPARATOR","\\",651],["T_STRING","Magento",651],["T_NS_SEPARATOR","\\",651],["T_STRING","Store",651],["T_NS_SEPARATOR","\\",651],["T_STRING","Model",651],["T_NS_SEPARATOR","\\",651],["T_STRING","ScopeInterface",651],["T_DOUBLE_COLON","::",651],["T_STRING","SCOPE_STORE",651],["T_WHITESPACE","\n        ",651],")",["T_WHITESPACE","\n        ",652],")",["T_WHITESPACE"," ",653],"{",["T_WHITESPACE","\n            ",653],["T_RETURN","return",654],["T_WHITESPACE"," ",654],["T_VARIABLE","$this",654],";",["T_WHITESPACE","\n        ",654],"}",["T_WHITESPACE","\n\n        ",655],["T_VARIABLE","$this",657],["T_OBJECT_OPERATOR","->",657],["T_STRING","inlineTranslation",657],["T_OBJECT_OPERATOR","->",657],["T_STRING","suspend",657],"(",")",";",["T_WHITESPACE","\n\n        ",657],["T_VARIABLE","$this",659],["T_OBJECT_OPERATOR","->",659],["T_STRING","_transportBuilder",659],["T_OBJECT_OPERATOR","->",659],["T_STRING","setTemplateIdentifier",659],"(",["T_WHITESPACE","\n            ",659],["T_VARIABLE","$this",660],["T_OBJECT_OPERATOR","->",660],["T_STRING","_scopeConfig",660],["T_OBJECT_OPERATOR","->",660],["T_STRING","getValue",660],"(",["T_WHITESPACE","\n                ",660],["T_STRING","self",661],["T_DOUBLE_COLON","::",661],["T_STRING","XML_PATH_CONFIRM_EMAIL_TEMPLATE",661],",",["T_WHITESPACE","\n                ",661],["T_NS_SEPARATOR","\\",662],["T_STRING","Magento",662],["T_NS_SEPARATOR","\\",662],["T_STRING","Store",662],["T_NS_SEPARATOR","\\",662],["T_STRING","Model",662],["T_NS_SEPARATOR","\\",662],["T_STRING","ScopeInterface",662],["T_DOUBLE_COLON","::",662],["T_STRING","SCOPE_STORE",662],["T_WHITESPACE","\n            ",662],")",["T_WHITESPACE","\n        ",663],")",["T_OBJECT_OPERATOR","->",664],["T_STRING","setTemplateOptions",664],"(",["T_WHITESPACE","\n            ",664],"[",["T_WHITESPACE","\n                ",665],["T_CONSTANT_ENCAPSED_STRING","'area'",666],["T_WHITESPACE"," ",666],["T_DOUBLE_ARROW","=>",666],["T_WHITESPACE"," ",666],["T_NS_SEPARATOR","\\",666],["T_STRING","Magento",666],["T_NS_SEPARATOR","\\",666],["T_STRING","Framework",666],["T_NS_SEPARATOR","\\",666],["T_STRING","App",666],["T_NS_SEPARATOR","\\",666],["T_STRING","Area",666],["T_DOUBLE_COLON","::",666],["T_STRING","AREA_FRONTEND",666],",",["T_WHITESPACE","\n                ",666],["T_CONSTANT_ENCAPSED_STRING","'store'",667],["T_WHITESPACE"," ",667],["T_DOUBLE_ARROW","=>",667],["T_WHITESPACE"," ",667],["T_VARIABLE","$this",667],["T_OBJECT_OPERATOR","->",667],["T_STRING","_storeManager",667],["T_OBJECT_OPERATOR","->",667],["T_STRING","getStore",667],"(",")",["T_OBJECT_OPERATOR","->",667],["T_STRING","getId",667],"(",")",",",["T_WHITESPACE","\n            ",667],"]",["T_WHITESPACE","\n        ",668],")",["T_OBJECT_OPERATOR","->",669],["T_STRING","setTemplateVars",669],"(",["T_WHITESPACE","\n            ",669],"[",["T_CONSTANT_ENCAPSED_STRING","'subscriber'",670],["T_WHITESPACE"," ",670],["T_DOUBLE_ARROW","=>",670],["T_WHITESPACE"," ",670],["T_VARIABLE","$this",670],",",["T_WHITESPACE"," ",670],["T_CONSTANT_ENCAPSED_STRING","'store'",670],["T_WHITESPACE"," ",670],["T_DOUBLE_ARROW","=>",670],["T_WHITESPACE"," ",670],["T_VARIABLE","$this",670],["T_OBJECT_OPERATOR","->",670],["T_STRING","_storeManager",670],["T_OBJECT_OPERATOR","->",670],["T_STRING","getStore",670],"(",")","]",["T_WHITESPACE","\n        ",670],")",["T_OBJECT_OPERATOR","->",671],["T_STRING","setFrom",671],"(",["T_WHITESPACE","\n            ",671],["T_VARIABLE","$this",672],["T_OBJECT_OPERATOR","->",672],["T_STRING","_scopeConfig",672],["T_OBJECT_OPERATOR","->",672],["T_STRING","getValue",672],"(",["T_WHITESPACE","\n                ",672],["T_STRING","self",673],["T_DOUBLE_COLON","::",673],["T_STRING","XML_PATH_CONFIRM_EMAIL_IDENTITY",673],",",["T_WHITESPACE","\n                ",673],["T_NS_SEPARATOR","\\",674],["T_STRING","Magento",674],["T_NS_SEPARATOR","\\",674],["T_STRING","Store",674],["T_NS_SEPARATOR","\\",674],["T_STRING","Model",674],["T_NS_SEPARATOR","\\",674],["T_STRING","ScopeInterface",674],["T_DOUBLE_COLON","::",674],["T_STRING","SCOPE_STORE",674],["T_WHITESPACE","\n            ",674],")",["T_WHITESPACE","\n        ",675],")",["T_OBJECT_OPERATOR","->",676],["T_STRING","addTo",676],"(",["T_WHITESPACE","\n            ",676],["T_VARIABLE","$this",677],["T_OBJECT_OPERATOR","->",677],["T_STRING","getEmail",677],"(",")",",",["T_WHITESPACE","\n            ",677],["T_VARIABLE","$this",678],["T_OBJECT_OPERATOR","->",678],["T_STRING","getName",678],"(",")",["T_WHITESPACE","\n        ",678],")",";",["T_WHITESPACE","\n        ",679],["T_VARIABLE","$transport",680],["T_WHITESPACE"," ",680],"=",["T_WHITESPACE"," ",680],["T_VARIABLE","$this",680],["T_OBJECT_OPERATOR","->",680],["T_STRING","_transportBuilder",680],["T_OBJECT_OPERATOR","->",680],["T_STRING","getTransport",680],"(",")",";",["T_WHITESPACE","\n        ",680],["T_VARIABLE","$transport",681],["T_OBJECT_OPERATOR","->",681],["T_STRING","sendMessage",681],"(",")",";",["T_WHITESPACE","\n\n        ",681],["T_VARIABLE","$this",683],["T_OBJECT_OPERATOR","->",683],["T_STRING","inlineTranslation",683],["T_OBJECT_OPERATOR","->",683],["T_STRING","resume",683],"(",")",";",["T_WHITESPACE","\n\n        ",683],["T_RETURN","return",685],["T_WHITESPACE"," ",685],["T_VARIABLE","$this",685],";",["T_WHITESPACE","\n    ",685],"}",["T_WHITESPACE","\n\n    ",686],["T_DOC_COMMENT","\/**\n     * Sends out confirmation success email\n     *\n     * @return $this\n     *\/",688],["T_WHITESPACE","\n    ",692],["T_PUBLIC","public",693],["T_WHITESPACE"," ",693],["T_FUNCTION","function",693],["T_WHITESPACE"," ",693],["T_STRING","sendConfirmationSuccessEmail",693],"(",")",["T_WHITESPACE","\n    ",693],"{",["T_WHITESPACE","\n        ",694],["T_IF","if",695],["T_WHITESPACE"," ",695],"(",["T_VARIABLE","$this",695],["T_OBJECT_OPERATOR","->",695],["T_STRING","getImportMode",695],"(",")",")",["T_WHITESPACE"," ",695],"{",["T_WHITESPACE","\n            ",695],["T_RETURN","return",696],["T_WHITESPACE"," ",696],["T_VARIABLE","$this",696],";",["T_WHITESPACE","\n        ",696],"}",["T_WHITESPACE","\n\n        ",697],["T_IF","if",699],["T_WHITESPACE"," ",699],"(","!",["T_VARIABLE","$this",699],["T_OBJECT_OPERATOR","->",699],["T_STRING","_scopeConfig",699],["T_OBJECT_OPERATOR","->",699],["T_STRING","getValue",699],"(",["T_WHITESPACE","\n            ",699],["T_STRING","self",700],["T_DOUBLE_COLON","::",700],["T_STRING","XML_PATH_SUCCESS_EMAIL_TEMPLATE",700],",",["T_WHITESPACE","\n            ",700],["T_NS_SEPARATOR","\\",701],["T_STRING","Magento",701],["T_NS_SEPARATOR","\\",701],["T_STRING","Store",701],["T_NS_SEPARATOR","\\",701],["T_STRING","Model",701],["T_NS_SEPARATOR","\\",701],["T_STRING","ScopeInterface",701],["T_DOUBLE_COLON","::",701],["T_STRING","SCOPE_STORE",701],["T_WHITESPACE","\n        ",701],")",["T_WHITESPACE"," ",702],["T_BOOLEAN_OR","||",702],["T_WHITESPACE"," ",702],"!",["T_VARIABLE","$this",702],["T_OBJECT_OPERATOR","->",702],["T_STRING","_scopeConfig",702],["T_OBJECT_OPERATOR","->",702],["T_STRING","getValue",702],"(",["T_WHITESPACE","\n            ",702],["T_STRING","self",703],["T_DOUBLE_COLON","::",703],["T_STRING","XML_PATH_SUCCESS_EMAIL_IDENTITY",703],",",["T_WHITESPACE","\n            ",703],["T_NS_SEPARATOR","\\",704],["T_STRING","Magento",704],["T_NS_SEPARATOR","\\",704],["T_STRING","Store",704],["T_NS_SEPARATOR","\\",704],["T_STRING","Model",704],["T_NS_SEPARATOR","\\",704],["T_STRING","ScopeInterface",704],["T_DOUBLE_COLON","::",704],["T_STRING","SCOPE_STORE",704],["T_WHITESPACE","\n        ",704],")",["T_WHITESPACE","\n        ",705],")",["T_WHITESPACE"," ",706],"{",["T_WHITESPACE","\n            ",706],["T_RETURN","return",707],["T_WHITESPACE"," ",707],["T_VARIABLE","$this",707],";",["T_WHITESPACE","\n        ",707],"}",["T_WHITESPACE","\n\n        ",708],["T_VARIABLE","$this",710],["T_OBJECT_OPERATOR","->",710],["T_STRING","inlineTranslation",710],["T_OBJECT_OPERATOR","->",710],["T_STRING","suspend",710],"(",")",";",["T_WHITESPACE","\n\n        ",710],["T_VARIABLE","$this",712],["T_OBJECT_OPERATOR","->",712],["T_STRING","_transportBuilder",712],["T_OBJECT_OPERATOR","->",712],["T_STRING","setTemplateIdentifier",712],"(",["T_WHITESPACE","\n            ",712],["T_VARIABLE","$this",713],["T_OBJECT_OPERATOR","->",713],["T_STRING","_scopeConfig",713],["T_OBJECT_OPERATOR","->",713],["T_STRING","getValue",713],"(",["T_WHITESPACE","\n                ",713],["T_STRING","self",714],["T_DOUBLE_COLON","::",714],["T_STRING","XML_PATH_SUCCESS_EMAIL_TEMPLATE",714],",",["T_WHITESPACE","\n                ",714],["T_NS_SEPARATOR","\\",715],["T_STRING","Magento",715],["T_NS_SEPARATOR","\\",715],["T_STRING","Store",715],["T_NS_SEPARATOR","\\",715],["T_STRING","Model",715],["T_NS_SEPARATOR","\\",715],["T_STRING","ScopeInterface",715],["T_DOUBLE_COLON","::",715],["T_STRING","SCOPE_STORE",715],["T_WHITESPACE","\n            ",715],")",["T_WHITESPACE","\n        ",716],")",["T_OBJECT_OPERATOR","->",717],["T_STRING","setTemplateOptions",717],"(",["T_WHITESPACE","\n            ",717],"[",["T_WHITESPACE","\n                ",718],["T_CONSTANT_ENCAPSED_STRING","'area'",719],["T_WHITESPACE"," ",719],["T_DOUBLE_ARROW","=>",719],["T_WHITESPACE"," ",719],["T_NS_SEPARATOR","\\",719],["T_STRING","Magento",719],["T_NS_SEPARATOR","\\",719],["T_STRING","Framework",719],["T_NS_SEPARATOR","\\",719],["T_STRING","App",719],["T_NS_SEPARATOR","\\",719],["T_STRING","Area",719],["T_DOUBLE_COLON","::",719],["T_STRING","AREA_FRONTEND",719],",",["T_WHITESPACE","\n                ",719],["T_CONSTANT_ENCAPSED_STRING","'store'",720],["T_WHITESPACE"," ",720],["T_DOUBLE_ARROW","=>",720],["T_WHITESPACE"," ",720],["T_VARIABLE","$this",720],["T_OBJECT_OPERATOR","->",720],["T_STRING","_storeManager",720],["T_OBJECT_OPERATOR","->",720],["T_STRING","getStore",720],"(",")",["T_OBJECT_OPERATOR","->",720],["T_STRING","getId",720],"(",")",",",["T_WHITESPACE","\n            ",720],"]",["T_WHITESPACE","\n        ",721],")",["T_OBJECT_OPERATOR","->",722],["T_STRING","setTemplateVars",722],"(",["T_WHITESPACE","\n            ",722],"[",["T_CONSTANT_ENCAPSED_STRING","'subscriber'",723],["T_WHITESPACE"," ",723],["T_DOUBLE_ARROW","=>",723],["T_WHITESPACE"," ",723],["T_VARIABLE","$this",723],"]",["T_WHITESPACE","\n        ",723],")",["T_OBJECT_OPERATOR","->",724],["T_STRING","setFrom",724],"(",["T_WHITESPACE","\n            ",724],["T_VARIABLE","$this",725],["T_OBJECT_OPERATOR","->",725],["T_STRING","_scopeConfig",725],["T_OBJECT_OPERATOR","->",725],["T_STRING","getValue",725],"(",["T_WHITESPACE","\n                ",725],["T_STRING","self",726],["T_DOUBLE_COLON","::",726],["T_STRING","XML_PATH_SUCCESS_EMAIL_IDENTITY",726],",",["T_WHITESPACE","\n                ",726],["T_NS_SEPARATOR","\\",727],["T_STRING","Magento",727],["T_NS_SEPARATOR","\\",727],["T_STRING","Store",727],["T_NS_SEPARATOR","\\",727],["T_STRING","Model",727],["T_NS_SEPARATOR","\\",727],["T_STRING","ScopeInterface",727],["T_DOUBLE_COLON","::",727],["T_STRING","SCOPE_STORE",727],["T_WHITESPACE","\n            ",727],")",["T_WHITESPACE","\n        ",728],")",["T_OBJECT_OPERATOR","->",729],["T_STRING","addTo",729],"(",["T_WHITESPACE","\n            ",729],["T_VARIABLE","$this",730],["T_OBJECT_OPERATOR","->",730],["T_STRING","getEmail",730],"(",")",",",["T_WHITESPACE","\n            ",730],["T_VARIABLE","$this",731],["T_OBJECT_OPERATOR","->",731],["T_STRING","getName",731],"(",")",["T_WHITESPACE","\n        ",731],")",";",["T_WHITESPACE","\n        ",732],["T_VARIABLE","$transport",733],["T_WHITESPACE"," ",733],"=",["T_WHITESPACE"," ",733],["T_VARIABLE","$this",733],["T_OBJECT_OPERATOR","->",733],["T_STRING","_transportBuilder",733],["T_OBJECT_OPERATOR","->",733],["T_STRING","getTransport",733],"(",")",";",["T_WHITESPACE","\n        ",733],["T_VARIABLE","$transport",734],["T_OBJECT_OPERATOR","->",734],["T_STRING","sendMessage",734],"(",")",";",["T_WHITESPACE","\n\n        ",734],["T_VARIABLE","$this",736],["T_OBJECT_OPERATOR","->",736],["T_STRING","inlineTranslation",736],["T_OBJECT_OPERATOR","->",736],["T_STRING","resume",736],"(",")",";",["T_WHITESPACE","\n\n        ",736],["T_RETURN","return",738],["T_WHITESPACE"," ",738],["T_VARIABLE","$this",738],";",["T_WHITESPACE","\n    ",738],"}",["T_WHITESPACE","\n\n    ",739],["T_DOC_COMMENT","\/**\n     * Sends out unsubscription email\n     *\n     * @return $this\n     *\/",741],["T_WHITESPACE","\n    ",745],["T_PUBLIC","public",746],["T_WHITESPACE"," ",746],["T_FUNCTION","function",746],["T_WHITESPACE"," ",746],["T_STRING","sendUnsubscriptionEmail",746],"(",")",["T_WHITESPACE","\n    ",746],"{",["T_WHITESPACE","\n        ",747],["T_IF","if",748],["T_WHITESPACE"," ",748],"(",["T_VARIABLE","$this",748],["T_OBJECT_OPERATOR","->",748],["T_STRING","getImportMode",748],"(",")",")",["T_WHITESPACE"," ",748],"{",["T_WHITESPACE","\n            ",748],["T_RETURN","return",749],["T_WHITESPACE"," ",749],["T_VARIABLE","$this",749],";",["T_WHITESPACE","\n        ",749],"}",["T_WHITESPACE","\n        ",750],["T_IF","if",751],["T_WHITESPACE"," ",751],"(","!",["T_VARIABLE","$this",751],["T_OBJECT_OPERATOR","->",751],["T_STRING","_scopeConfig",751],["T_OBJECT_OPERATOR","->",751],["T_STRING","getValue",751],"(",["T_WHITESPACE","\n            ",751],["T_STRING","self",752],["T_DOUBLE_COLON","::",752],["T_STRING","XML_PATH_UNSUBSCRIBE_EMAIL_TEMPLATE",752],",",["T_WHITESPACE","\n            ",752],["T_NS_SEPARATOR","\\",753],["T_STRING","Magento",753],["T_NS_SEPARATOR","\\",753],["T_STRING","Store",753],["T_NS_SEPARATOR","\\",753],["T_STRING","Model",753],["T_NS_SEPARATOR","\\",753],["T_STRING","ScopeInterface",753],["T_DOUBLE_COLON","::",753],["T_STRING","SCOPE_STORE",753],["T_WHITESPACE","\n        ",753],")",["T_WHITESPACE"," ",754],["T_BOOLEAN_OR","||",754],["T_WHITESPACE"," ",754],"!",["T_VARIABLE","$this",754],["T_OBJECT_OPERATOR","->",754],["T_STRING","_scopeConfig",754],["T_OBJECT_OPERATOR","->",754],["T_STRING","getValue",754],"(",["T_WHITESPACE","\n            ",754],["T_STRING","self",755],["T_DOUBLE_COLON","::",755],["T_STRING","XML_PATH_UNSUBSCRIBE_EMAIL_IDENTITY",755],",",["T_WHITESPACE","\n            ",755],["T_NS_SEPARATOR","\\",756],["T_STRING","Magento",756],["T_NS_SEPARATOR","\\",756],["T_STRING","Store",756],["T_NS_SEPARATOR","\\",756],["T_STRING","Model",756],["T_NS_SEPARATOR","\\",756],["T_STRING","ScopeInterface",756],["T_DOUBLE_COLON","::",756],["T_STRING","SCOPE_STORE",756],["T_WHITESPACE","\n        ",756],")",["T_WHITESPACE","\n        ",757],")",["T_WHITESPACE"," ",758],"{",["T_WHITESPACE","\n            ",758],["T_RETURN","return",759],["T_WHITESPACE"," ",759],["T_VARIABLE","$this",759],";",["T_WHITESPACE","\n        ",759],"}",["T_WHITESPACE","\n\n        ",760],["T_VARIABLE","$this",762],["T_OBJECT_OPERATOR","->",762],["T_STRING","inlineTranslation",762],["T_OBJECT_OPERATOR","->",762],["T_STRING","suspend",762],"(",")",";",["T_WHITESPACE","\n\n        ",762],["T_VARIABLE","$this",764],["T_OBJECT_OPERATOR","->",764],["T_STRING","_transportBuilder",764],["T_OBJECT_OPERATOR","->",764],["T_STRING","setTemplateIdentifier",764],"(",["T_WHITESPACE","\n            ",764],["T_VARIABLE","$this",765],["T_OBJECT_OPERATOR","->",765],["T_STRING","_scopeConfig",765],["T_OBJECT_OPERATOR","->",765],["T_STRING","getValue",765],"(",["T_WHITESPACE","\n                ",765],["T_STRING","self",766],["T_DOUBLE_COLON","::",766],["T_STRING","XML_PATH_UNSUBSCRIBE_EMAIL_TEMPLATE",766],",",["T_WHITESPACE","\n                ",766],["T_NS_SEPARATOR","\\",767],["T_STRING","Magento",767],["T_NS_SEPARATOR","\\",767],["T_STRING","Store",767],["T_NS_SEPARATOR","\\",767],["T_STRING","Model",767],["T_NS_SEPARATOR","\\",767],["T_STRING","ScopeInterface",767],["T_DOUBLE_COLON","::",767],["T_STRING","SCOPE_STORE",767],["T_WHITESPACE","\n            ",767],")",["T_WHITESPACE","\n        ",768],")",["T_OBJECT_OPERATOR","->",769],["T_STRING","setTemplateOptions",769],"(",["T_WHITESPACE","\n            ",769],"[",["T_WHITESPACE","\n                ",770],["T_CONSTANT_ENCAPSED_STRING","'area'",771],["T_WHITESPACE"," ",771],["T_DOUBLE_ARROW","=>",771],["T_WHITESPACE"," ",771],["T_NS_SEPARATOR","\\",771],["T_STRING","Magento",771],["T_NS_SEPARATOR","\\",771],["T_STRING","Framework",771],["T_NS_SEPARATOR","\\",771],["T_STRING","App",771],["T_NS_SEPARATOR","\\",771],["T_STRING","Area",771],["T_DOUBLE_COLON","::",771],["T_STRING","AREA_FRONTEND",771],",",["T_WHITESPACE","\n                ",771],["T_CONSTANT_ENCAPSED_STRING","'store'",772],["T_WHITESPACE"," ",772],["T_DOUBLE_ARROW","=>",772],["T_WHITESPACE"," ",772],["T_VARIABLE","$this",772],["T_OBJECT_OPERATOR","->",772],["T_STRING","_storeManager",772],["T_OBJECT_OPERATOR","->",772],["T_STRING","getStore",772],"(",")",["T_OBJECT_OPERATOR","->",772],["T_STRING","getId",772],"(",")",",",["T_WHITESPACE","\n            ",772],"]",["T_WHITESPACE","\n        ",773],")",["T_OBJECT_OPERATOR","->",774],["T_STRING","setTemplateVars",774],"(",["T_WHITESPACE","\n            ",774],"[",["T_CONSTANT_ENCAPSED_STRING","'subscriber'",775],["T_WHITESPACE"," ",775],["T_DOUBLE_ARROW","=>",775],["T_WHITESPACE"," ",775],["T_VARIABLE","$this",775],"]",["T_WHITESPACE","\n        ",775],")",["T_OBJECT_OPERATOR","->",776],["T_STRING","setFrom",776],"(",["T_WHITESPACE","\n            ",776],["T_VARIABLE","$this",777],["T_OBJECT_OPERATOR","->",777],["T_STRING","_scopeConfig",777],["T_OBJECT_OPERATOR","->",777],["T_STRING","getValue",777],"(",["T_WHITESPACE","\n                ",777],["T_STRING","self",778],["T_DOUBLE_COLON","::",778],["T_STRING","XML_PATH_UNSUBSCRIBE_EMAIL_IDENTITY",778],",",["T_WHITESPACE","\n                ",778],["T_NS_SEPARATOR","\\",779],["T_STRING","Magento",779],["T_NS_SEPARATOR","\\",779],["T_STRING","Store",779],["T_NS_SEPARATOR","\\",779],["T_STRING","Model",779],["T_NS_SEPARATOR","\\",779],["T_STRING","ScopeInterface",779],["T_DOUBLE_COLON","::",779],["T_STRING","SCOPE_STORE",779],["T_WHITESPACE","\n            ",779],")",["T_WHITESPACE","\n        ",780],")",["T_OBJECT_OPERATOR","->",781],["T_STRING","addTo",781],"(",["T_WHITESPACE","\n            ",781],["T_VARIABLE","$this",782],["T_OBJECT_OPERATOR","->",782],["T_STRING","getEmail",782],"(",")",",",["T_WHITESPACE","\n            ",782],["T_VARIABLE","$this",783],["T_OBJECT_OPERATOR","->",783],["T_STRING","getName",783],"(",")",["T_WHITESPACE","\n        ",783],")",";",["T_WHITESPACE","\n        ",784],["T_VARIABLE","$transport",785],["T_WHITESPACE"," ",785],"=",["T_WHITESPACE"," ",785],["T_VARIABLE","$this",785],["T_OBJECT_OPERATOR","->",785],["T_STRING","_transportBuilder",785],["T_OBJECT_OPERATOR","->",785],["T_STRING","getTransport",785],"(",")",";",["T_WHITESPACE","\n        ",785],["T_VARIABLE","$transport",786],["T_OBJECT_OPERATOR","->",786],["T_STRING","sendMessage",786],"(",")",";",["T_WHITESPACE","\n\n        ",786],["T_VARIABLE","$this",788],["T_OBJECT_OPERATOR","->",788],["T_STRING","inlineTranslation",788],["T_OBJECT_OPERATOR","->",788],["T_STRING","resume",788],"(",")",";",["T_WHITESPACE","\n\n        ",788],["T_RETURN","return",790],["T_WHITESPACE"," ",790],["T_VARIABLE","$this",790],";",["T_WHITESPACE","\n    ",790],"}",["T_WHITESPACE","\n\n    ",791],["T_DOC_COMMENT","\/**\n     * Retrieve Subscribers Full Name if it was set\n     *\n     * @return string|null\n     *\/",793],["T_WHITESPACE","\n    ",797],["T_PUBLIC","public",798],["T_WHITESPACE"," ",798],["T_FUNCTION","function",798],["T_WHITESPACE"," ",798],["T_STRING","getSubscriberFullName",798],"(",")",["T_WHITESPACE","\n    ",798],"{",["T_WHITESPACE","\n        ",799],["T_VARIABLE","$name",800],["T_WHITESPACE"," ",800],"=",["T_WHITESPACE"," ",800],["T_STRING","null",800],";",["T_WHITESPACE","\n        ",800],["T_IF","if",801],["T_WHITESPACE"," ",801],"(",["T_VARIABLE","$this",801],["T_OBJECT_OPERATOR","->",801],["T_STRING","hasFirstname",801],"(",")",["T_WHITESPACE"," ",801],["T_BOOLEAN_OR","||",801],["T_WHITESPACE"," ",801],["T_VARIABLE","$this",801],["T_OBJECT_OPERATOR","->",801],["T_STRING","hasLastname",801],"(",")",")",["T_WHITESPACE"," ",801],"{",["T_WHITESPACE","\n            ",801],["T_VARIABLE","$name",802],["T_WHITESPACE"," ",802],"=",["T_WHITESPACE"," ",802],["T_VARIABLE","$this",802],["T_OBJECT_OPERATOR","->",802],["T_STRING","getFirstname",802],"(",")",["T_WHITESPACE"," ",802],".",["T_WHITESPACE"," ",802],["T_CONSTANT_ENCAPSED_STRING","' '",802],["T_WHITESPACE"," ",802],".",["T_WHITESPACE"," ",802],["T_VARIABLE","$this",802],["T_OBJECT_OPERATOR","->",802],["T_STRING","getLastname",802],"(",")",";",["T_WHITESPACE","\n        ",802],"}",["T_WHITESPACE","\n        ",803],["T_RETURN","return",804],["T_WHITESPACE"," ",804],["T_VARIABLE","$name",804],";",["T_WHITESPACE","\n    ",804],"}",["T_WHITESPACE","\n",805],"}",["T_WHITESPACE","\n",806]]
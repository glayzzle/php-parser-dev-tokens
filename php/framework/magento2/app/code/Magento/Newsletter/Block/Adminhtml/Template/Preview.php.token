[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Copyright \u00c2\u00a9 2013-2017 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n *\/",2],["T_WHITESPACE","\n\n",5],["T_DOC_COMMENT","\/**\n * Newsletter template preview block\n *\/",7],["T_WHITESPACE","\n",9],["T_NAMESPACE","namespace",10],["T_WHITESPACE"," ",10],["T_STRING","Magento",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Newsletter",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Block",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Adminhtml",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Template",10],";",["T_WHITESPACE","\n\n",10],["T_CLASS","class",12],["T_WHITESPACE"," ",12],["T_STRING","Preview",12],["T_WHITESPACE"," ",12],["T_EXTENDS","extends",12],["T_WHITESPACE"," ",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Magento",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Backend",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Block",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Widget",12],["T_WHITESPACE","\n",12],"{",["T_WHITESPACE","\n    ",13],["T_DOC_COMMENT","\/**\n     * Name for profiler\n     *\n     * @var string\n     *\/",14],["T_WHITESPACE","\n    ",18],["T_PROTECTED","protected",19],["T_WHITESPACE"," ",19],["T_VARIABLE","$profilerName",19],["T_WHITESPACE"," ",19],"=",["T_WHITESPACE"," ",19],["T_CONSTANT_ENCAPSED_STRING","\"newsletter_template_proccessing\"",19],";",["T_WHITESPACE","\n\n    ",19],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Newsletter\\Model\\TemplateFactory\n     *\/",21],["T_WHITESPACE","\n    ",23],["T_PROTECTED","protected",24],["T_WHITESPACE"," ",24],["T_VARIABLE","$_templateFactory",24],";",["T_WHITESPACE","\n\n    ",24],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Newsletter\\Model\\SubscriberFactory\n     *\/",26],["T_WHITESPACE","\n    ",28],["T_PROTECTED","protected",29],["T_WHITESPACE"," ",29],["T_VARIABLE","$_subscriberFactory",29],";",["T_WHITESPACE","\n\n    ",29],["T_DOC_COMMENT","\/**\n     * @param \\Magento\\Backend\\Block\\Template\\Context $context\n     * @param \\Magento\\Newsletter\\Model\\TemplateFactory $templateFactory\n     * @param \\Magento\\Newsletter\\Model\\SubscriberFactory $subscriberFactory\n     * @param array $data\n     *\/",31],["T_WHITESPACE","\n    ",36],["T_PUBLIC","public",37],["T_WHITESPACE"," ",37],["T_FUNCTION","function",37],["T_WHITESPACE"," ",37],["T_STRING","__construct",37],"(",["T_WHITESPACE","\n        ",37],["T_NS_SEPARATOR","\\",38],["T_STRING","Magento",38],["T_NS_SEPARATOR","\\",38],["T_STRING","Backend",38],["T_NS_SEPARATOR","\\",38],["T_STRING","Block",38],["T_NS_SEPARATOR","\\",38],["T_STRING","Template",38],["T_NS_SEPARATOR","\\",38],["T_STRING","Context",38],["T_WHITESPACE"," ",38],["T_VARIABLE","$context",38],",",["T_WHITESPACE","\n        ",38],["T_NS_SEPARATOR","\\",39],["T_STRING","Magento",39],["T_NS_SEPARATOR","\\",39],["T_STRING","Newsletter",39],["T_NS_SEPARATOR","\\",39],["T_STRING","Model",39],["T_NS_SEPARATOR","\\",39],["T_STRING","TemplateFactory",39],["T_WHITESPACE"," ",39],["T_VARIABLE","$templateFactory",39],",",["T_WHITESPACE","\n        ",39],["T_NS_SEPARATOR","\\",40],["T_STRING","Magento",40],["T_NS_SEPARATOR","\\",40],["T_STRING","Newsletter",40],["T_NS_SEPARATOR","\\",40],["T_STRING","Model",40],["T_NS_SEPARATOR","\\",40],["T_STRING","SubscriberFactory",40],["T_WHITESPACE"," ",40],["T_VARIABLE","$subscriberFactory",40],",",["T_WHITESPACE","\n        ",40],["T_ARRAY","array",41],["T_WHITESPACE"," ",41],["T_VARIABLE","$data",41],["T_WHITESPACE"," ",41],"=",["T_WHITESPACE"," ",41],"[","]",["T_WHITESPACE","\n    ",41],")",["T_WHITESPACE"," ",42],"{",["T_WHITESPACE","\n        ",42],["T_VARIABLE","$this",43],["T_OBJECT_OPERATOR","->",43],["T_STRING","_templateFactory",43],["T_WHITESPACE"," ",43],"=",["T_WHITESPACE"," ",43],["T_VARIABLE","$templateFactory",43],";",["T_WHITESPACE","\n        ",43],["T_VARIABLE","$this",44],["T_OBJECT_OPERATOR","->",44],["T_STRING","_subscriberFactory",44],["T_WHITESPACE"," ",44],"=",["T_WHITESPACE"," ",44],["T_VARIABLE","$subscriberFactory",44],";",["T_WHITESPACE","\n        ",44],["T_STRING","parent",45],["T_DOUBLE_COLON","::",45],["T_STRING","__construct",45],"(",["T_VARIABLE","$context",45],",",["T_WHITESPACE"," ",45],["T_VARIABLE","$data",45],")",";",["T_WHITESPACE","\n    ",45],"}",["T_WHITESPACE","\n\n    ",46],["T_DOC_COMMENT","\/**\n     * Get html code\n     *\n     * @return string\n     *\/",48],["T_WHITESPACE","\n    ",52],["T_PROTECTED","protected",53],["T_WHITESPACE"," ",53],["T_FUNCTION","function",53],["T_WHITESPACE"," ",53],["T_STRING","_toHtml",53],"(",")",["T_WHITESPACE","\n    ",53],"{",["T_WHITESPACE","\n        ",54],["T_COMMENT","\/* @var $template \\Magento\\Newsletter\\Model\\Template *\/",55],["T_WHITESPACE","\n        ",55],["T_VARIABLE","$template",56],["T_WHITESPACE"," ",56],"=",["T_WHITESPACE"," ",56],["T_VARIABLE","$this",56],["T_OBJECT_OPERATOR","->",56],["T_STRING","_templateFactory",56],["T_OBJECT_OPERATOR","->",56],["T_STRING","create",56],"(",")",";",["T_WHITESPACE","\n\n        ",56],["T_IF","if",58],["T_WHITESPACE"," ",58],"(",["T_VARIABLE","$id",58],["T_WHITESPACE"," ",58],"=",["T_WHITESPACE"," ",58],["T_INT_CAST","(int)",58],["T_VARIABLE","$this",58],["T_OBJECT_OPERATOR","->",58],["T_STRING","getRequest",58],"(",")",["T_OBJECT_OPERATOR","->",58],["T_STRING","getParam",58],"(",["T_CONSTANT_ENCAPSED_STRING","'id'",58],")",")",["T_WHITESPACE"," ",58],"{",["T_WHITESPACE","\n            ",58],["T_VARIABLE","$this",59],["T_OBJECT_OPERATOR","->",59],["T_STRING","loadTemplate",59],"(",["T_VARIABLE","$template",59],",",["T_WHITESPACE"," ",59],["T_VARIABLE","$id",59],")",";",["T_WHITESPACE","\n        ",59],"}",["T_WHITESPACE"," ",60],["T_ELSE","else",60],["T_WHITESPACE"," ",60],"{",["T_WHITESPACE","\n            ",60],["T_VARIABLE","$previewData",61],["T_WHITESPACE"," ",61],"=",["T_WHITESPACE"," ",61],["T_VARIABLE","$this",61],["T_OBJECT_OPERATOR","->",61],["T_STRING","getPreviewData",61],"(",")",";",["T_WHITESPACE","\n\n            ",61],["T_VARIABLE","$template",63],["T_OBJECT_OPERATOR","->",63],["T_STRING","setTemplateType",63],"(",["T_VARIABLE","$previewData",63],"[",["T_CONSTANT_ENCAPSED_STRING","'type'",63],"]",")",";",["T_WHITESPACE","\n            ",63],["T_VARIABLE","$template",64],["T_OBJECT_OPERATOR","->",64],["T_STRING","setTemplateText",64],"(",["T_VARIABLE","$previewData",64],"[",["T_CONSTANT_ENCAPSED_STRING","'text'",64],"]",")",";",["T_WHITESPACE","\n            ",64],["T_VARIABLE","$template",65],["T_OBJECT_OPERATOR","->",65],["T_STRING","setTemplateStyles",65],"(",["T_VARIABLE","$previewData",65],"[",["T_CONSTANT_ENCAPSED_STRING","'styles'",65],"]",")",";",["T_WHITESPACE","\n        ",65],"}",["T_WHITESPACE","\n\n        ",66],["T_NS_SEPARATOR","\\",68],["T_STRING","Magento",68],["T_NS_SEPARATOR","\\",68],["T_STRING","Framework",68],["T_NS_SEPARATOR","\\",68],["T_STRING","Profiler",68],["T_DOUBLE_COLON","::",68],["T_STRING","start",68],"(",["T_VARIABLE","$this",68],["T_OBJECT_OPERATOR","->",68],["T_STRING","profilerName",68],")",";",["T_WHITESPACE","\n        ",68],["T_VARIABLE","$vars",69],["T_WHITESPACE"," ",69],"=",["T_WHITESPACE"," ",69],"[","]",";",["T_WHITESPACE","\n\n        ",69],["T_VARIABLE","$vars",71],"[",["T_CONSTANT_ENCAPSED_STRING","'subscriber'",71],"]",["T_WHITESPACE"," ",71],"=",["T_WHITESPACE"," ",71],["T_VARIABLE","$this",71],["T_OBJECT_OPERATOR","->",71],["T_STRING","_subscriberFactory",71],["T_OBJECT_OPERATOR","->",71],["T_STRING","create",71],"(",")",";",["T_WHITESPACE","\n        ",71],["T_IF","if",72],["T_WHITESPACE"," ",72],"(",["T_VARIABLE","$this",72],["T_OBJECT_OPERATOR","->",72],["T_STRING","getRequest",72],"(",")",["T_OBJECT_OPERATOR","->",72],["T_STRING","getParam",72],"(",["T_CONSTANT_ENCAPSED_STRING","'subscriber'",72],")",")",["T_WHITESPACE"," ",72],"{",["T_WHITESPACE","\n            ",72],["T_VARIABLE","$vars",73],"[",["T_CONSTANT_ENCAPSED_STRING","'subscriber'",73],"]",["T_OBJECT_OPERATOR","->",73],["T_STRING","load",73],"(",["T_VARIABLE","$this",73],["T_OBJECT_OPERATOR","->",73],["T_STRING","getRequest",73],"(",")",["T_OBJECT_OPERATOR","->",73],["T_STRING","getParam",73],"(",["T_CONSTANT_ENCAPSED_STRING","'subscriber'",73],")",")",";",["T_WHITESPACE","\n        ",73],"}",["T_WHITESPACE","\n\n        ",74],["T_VARIABLE","$template",76],["T_OBJECT_OPERATOR","->",76],["T_STRING","emulateDesign",76],"(",["T_VARIABLE","$this",76],["T_OBJECT_OPERATOR","->",76],["T_STRING","getStoreId",76],"(",")",")",";",["T_WHITESPACE","\n        ",76],["T_VARIABLE","$templateProcessed",77],["T_WHITESPACE"," ",77],"=",["T_WHITESPACE"," ",77],["T_VARIABLE","$this",77],["T_OBJECT_OPERATOR","->",77],["T_STRING","_appState",77],["T_OBJECT_OPERATOR","->",77],["T_STRING","emulateAreaCode",77],"(",["T_WHITESPACE","\n            ",77],["T_NS_SEPARATOR","\\",78],["T_STRING","Magento",78],["T_NS_SEPARATOR","\\",78],["T_STRING","Newsletter",78],["T_NS_SEPARATOR","\\",78],["T_STRING","Model",78],["T_NS_SEPARATOR","\\",78],["T_STRING","Template",78],["T_DOUBLE_COLON","::",78],["T_STRING","DEFAULT_DESIGN_AREA",78],",",["T_WHITESPACE","\n            ",78],"[",["T_VARIABLE","$template",79],",",["T_WHITESPACE"," ",79],["T_CONSTANT_ENCAPSED_STRING","'getProcessedTemplate'",79],"]",",",["T_WHITESPACE","\n            ",79],"[",["T_VARIABLE","$vars",80],"]",["T_WHITESPACE","\n        ",80],")",";",["T_WHITESPACE","\n        ",81],["T_VARIABLE","$template",82],["T_OBJECT_OPERATOR","->",82],["T_STRING","revertDesign",82],"(",")",";",["T_WHITESPACE","\n\n        ",82],["T_IF","if",84],["T_WHITESPACE"," ",84],"(",["T_VARIABLE","$template",84],["T_OBJECT_OPERATOR","->",84],["T_STRING","isPlain",84],"(",")",")",["T_WHITESPACE"," ",84],"{",["T_WHITESPACE","\n            ",84],["T_VARIABLE","$templateProcessed",85],["T_WHITESPACE"," ",85],"=",["T_WHITESPACE"," ",85],["T_CONSTANT_ENCAPSED_STRING","\"<pre>\"",85],["T_WHITESPACE"," ",85],".",["T_WHITESPACE"," ",85],["T_STRING","htmlspecialchars",85],"(",["T_VARIABLE","$templateProcessed",85],")",["T_WHITESPACE"," ",85],".",["T_WHITESPACE"," ",85],["T_CONSTANT_ENCAPSED_STRING","\"<\/pre>\"",85],";",["T_WHITESPACE","\n        ",85],"}",["T_WHITESPACE","\n\n        ",86],["T_NS_SEPARATOR","\\",88],["T_STRING","Magento",88],["T_NS_SEPARATOR","\\",88],["T_STRING","Framework",88],["T_NS_SEPARATOR","\\",88],["T_STRING","Profiler",88],["T_DOUBLE_COLON","::",88],["T_STRING","stop",88],"(",["T_VARIABLE","$this",88],["T_OBJECT_OPERATOR","->",88],["T_STRING","profilerName",88],")",";",["T_WHITESPACE","\n\n        ",88],["T_RETURN","return",90],["T_WHITESPACE"," ",90],["T_VARIABLE","$templateProcessed",90],";",["T_WHITESPACE","\n    ",90],"}",["T_WHITESPACE","\n\n    ",91],["T_DOC_COMMENT","\/**\n     * Return template preview data\n     *\n     * @return array\n     *\/",93],["T_WHITESPACE","\n    ",97],["T_PRIVATE","private",98],["T_WHITESPACE"," ",98],["T_FUNCTION","function",98],["T_WHITESPACE"," ",98],["T_STRING","getPreviewData",98],"(",")",["T_WHITESPACE","\n    ",98],"{",["T_WHITESPACE","\n        ",99],["T_VARIABLE","$previewData",100],["T_WHITESPACE"," ",100],"=",["T_WHITESPACE"," ",100],"[","]",";",["T_WHITESPACE","\n        ",100],["T_VARIABLE","$previewParams",101],["T_WHITESPACE"," ",101],"=",["T_WHITESPACE"," ",101],"[",["T_CONSTANT_ENCAPSED_STRING","'type'",101],",",["T_WHITESPACE"," ",101],["T_CONSTANT_ENCAPSED_STRING","'text'",101],",",["T_WHITESPACE"," ",101],["T_CONSTANT_ENCAPSED_STRING","'styles'",101],"]",";",["T_WHITESPACE","\n\n        ",101],["T_VARIABLE","$sessionData",103],["T_WHITESPACE"," ",103],"=",["T_WHITESPACE"," ",103],"[","]",";",["T_WHITESPACE","\n        ",103],["T_IF","if",104],["T_WHITESPACE"," ",104],"(",["T_VARIABLE","$this",104],["T_OBJECT_OPERATOR","->",104],["T_STRING","_backendSession",104],["T_OBJECT_OPERATOR","->",104],["T_STRING","hasPreviewData",104],"(",")",")",["T_WHITESPACE"," ",104],"{",["T_WHITESPACE","\n            ",104],["T_VARIABLE","$sessionData",105],["T_WHITESPACE"," ",105],"=",["T_WHITESPACE"," ",105],["T_VARIABLE","$this",105],["T_OBJECT_OPERATOR","->",105],["T_STRING","_backendSession",105],["T_OBJECT_OPERATOR","->",105],["T_STRING","getPreviewData",105],"(",")",";",["T_WHITESPACE","\n        ",105],"}",["T_WHITESPACE","\n\n        ",106],["T_FOREACH","foreach",108],["T_WHITESPACE"," ",108],"(",["T_VARIABLE","$previewParams",108],["T_WHITESPACE"," ",108],["T_AS","as",108],["T_WHITESPACE"," ",108],["T_VARIABLE","$param",108],")",["T_WHITESPACE"," ",108],"{",["T_WHITESPACE","\n            ",108],["T_IF","if",109],["T_WHITESPACE"," ",109],"(",["T_ISSET","isset",109],"(",["T_VARIABLE","$sessionData",109],"[",["T_VARIABLE","$param",109],"]",")",")",["T_WHITESPACE"," ",109],"{",["T_WHITESPACE","\n                ",109],["T_VARIABLE","$previewData",110],"[",["T_VARIABLE","$param",110],"]",["T_WHITESPACE"," ",110],"=",["T_WHITESPACE"," ",110],["T_VARIABLE","$sessionData",110],"[",["T_VARIABLE","$param",110],"]",";",["T_WHITESPACE","\n            ",110],"}",["T_WHITESPACE"," ",111],["T_ELSE","else",111],["T_WHITESPACE"," ",111],"{",["T_WHITESPACE","\n                ",111],["T_VARIABLE","$previewData",112],"[",["T_VARIABLE","$param",112],"]",["T_WHITESPACE"," ",112],"=",["T_WHITESPACE"," ",112],["T_VARIABLE","$this",112],["T_OBJECT_OPERATOR","->",112],["T_STRING","getRequest",112],"(",")",["T_OBJECT_OPERATOR","->",112],["T_STRING","getParam",112],"(",["T_VARIABLE","$param",112],")",";",["T_WHITESPACE","\n            ",112],"}",["T_WHITESPACE","\n        ",113],"}",["T_WHITESPACE","\n\n        ",114],["T_RETURN","return",116],["T_WHITESPACE"," ",116],["T_VARIABLE","$previewData",116],";",["T_WHITESPACE","\n    ",116],"}",["T_WHITESPACE","\n\n    ",117],["T_DOC_COMMENT","\/**\n     * Get Store Id from request or default\n     *\n     * @return int|null\n     *\/",119],["T_WHITESPACE","\n    ",123],["T_PROTECTED","protected",124],["T_WHITESPACE"," ",124],["T_FUNCTION","function",124],["T_WHITESPACE"," ",124],["T_STRING","getStoreId",124],"(",")",["T_WHITESPACE","\n    ",124],"{",["T_WHITESPACE","\n        ",125],["T_VARIABLE","$storeId",126],["T_WHITESPACE"," ",126],"=",["T_WHITESPACE"," ",126],["T_INT_CAST","(int)",126],["T_VARIABLE","$this",126],["T_OBJECT_OPERATOR","->",126],["T_STRING","getRequest",126],"(",")",["T_OBJECT_OPERATOR","->",126],["T_STRING","getParam",126],"(",["T_CONSTANT_ENCAPSED_STRING","'store'",126],")",";",["T_WHITESPACE","\n        ",126],["T_IF","if",127],["T_WHITESPACE"," ",127],"(",["T_VARIABLE","$storeId",127],")",["T_WHITESPACE"," ",127],"{",["T_WHITESPACE","\n            ",127],["T_RETURN","return",128],["T_WHITESPACE"," ",128],["T_VARIABLE","$storeId",128],";",["T_WHITESPACE","\n        ",128],"}",["T_WHITESPACE","\n\n        ",129],["T_VARIABLE","$defaultStore",131],["T_WHITESPACE"," ",131],"=",["T_WHITESPACE"," ",131],["T_VARIABLE","$this",131],["T_OBJECT_OPERATOR","->",131],["T_STRING","_storeManager",131],["T_OBJECT_OPERATOR","->",131],["T_STRING","getDefaultStoreView",131],"(",")",";",["T_WHITESPACE","\n        ",131],["T_IF","if",132],["T_WHITESPACE"," ",132],"(","!",["T_VARIABLE","$defaultStore",132],")",["T_WHITESPACE"," ",132],"{",["T_WHITESPACE","\n            ",132],["T_VARIABLE","$allStores",133],["T_WHITESPACE"," ",133],"=",["T_WHITESPACE"," ",133],["T_VARIABLE","$this",133],["T_OBJECT_OPERATOR","->",133],["T_STRING","_storeManager",133],["T_OBJECT_OPERATOR","->",133],["T_STRING","getStores",133],"(",")",";",["T_WHITESPACE","\n            ",133],["T_IF","if",134],["T_WHITESPACE"," ",134],"(",["T_ISSET","isset",134],"(",["T_VARIABLE","$allStores",134],"[",["T_LNUMBER","0",134],"]",")",")",["T_WHITESPACE"," ",134],"{",["T_WHITESPACE","\n                ",134],["T_VARIABLE","$defaultStore",135],["T_WHITESPACE"," ",135],"=",["T_WHITESPACE"," ",135],["T_VARIABLE","$allStores",135],"[",["T_LNUMBER","0",135],"]",";",["T_WHITESPACE","\n            ",135],"}",["T_WHITESPACE","\n        ",136],"}",["T_WHITESPACE","\n\n        ",137],["T_RETURN","return",139],["T_WHITESPACE"," ",139],["T_VARIABLE","$defaultStore",139],["T_WHITESPACE"," ",139],"?",["T_WHITESPACE"," ",139],["T_VARIABLE","$defaultStore",139],["T_OBJECT_OPERATOR","->",139],["T_STRING","getId",139],"(",")",["T_WHITESPACE"," ",139],":",["T_WHITESPACE"," ",139],["T_STRING","null",139],";",["T_WHITESPACE","\n    ",139],"}",["T_WHITESPACE","\n\n    ",140],["T_DOC_COMMENT","\/**\n     * @param \\Magento\\Newsletter\\Model\\Template $template\n     * @param string $id\n     * @return $this\n     *\/",142],["T_WHITESPACE","\n    ",146],["T_PROTECTED","protected",147],["T_WHITESPACE"," ",147],["T_FUNCTION","function",147],["T_WHITESPACE"," ",147],["T_STRING","loadTemplate",147],"(",["T_NS_SEPARATOR","\\",147],["T_STRING","Magento",147],["T_NS_SEPARATOR","\\",147],["T_STRING","Newsletter",147],["T_NS_SEPARATOR","\\",147],["T_STRING","Model",147],["T_NS_SEPARATOR","\\",147],["T_STRING","Template",147],["T_WHITESPACE"," ",147],["T_VARIABLE","$template",147],",",["T_WHITESPACE"," ",147],["T_VARIABLE","$id",147],")",["T_WHITESPACE","\n    ",147],"{",["T_WHITESPACE","\n        ",148],["T_VARIABLE","$template",149],["T_OBJECT_OPERATOR","->",149],["T_STRING","load",149],"(",["T_VARIABLE","$id",149],")",";",["T_WHITESPACE","\n        ",149],["T_RETURN","return",150],["T_WHITESPACE"," ",150],["T_VARIABLE","$this",150],";",["T_WHITESPACE","\n    ",150],"}",["T_WHITESPACE","\n",151],"}",["T_WHITESPACE","\n",152]]
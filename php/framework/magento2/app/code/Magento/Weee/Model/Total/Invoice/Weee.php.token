[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Copyright \u00c2\u00a9 2013-2017 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n *\/",2],["T_WHITESPACE","\n",5],["T_NAMESPACE","namespace",6],["T_WHITESPACE"," ",6],["T_STRING","Magento",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Weee",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Model",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Total",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Invoice",6],";",["T_WHITESPACE","\n\n",6],["T_USE","use",8],["T_WHITESPACE"," ",8],["T_STRING","Magento",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Weee",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Helper",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Data",8],["T_WHITESPACE"," ",8],["T_AS","as",8],["T_WHITESPACE"," ",8],["T_STRING","WeeeHelper",8],";",["T_WHITESPACE","\n\n",8],["T_CLASS","class",10],["T_WHITESPACE"," ",10],["T_STRING","Weee",10],["T_WHITESPACE"," ",10],["T_EXTENDS","extends",10],["T_WHITESPACE"," ",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Magento",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Sales",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Model",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Order",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Invoice",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Total",10],["T_NS_SEPARATOR","\\",10],["T_STRING","AbstractTotal",10],["T_WHITESPACE","\n",10],"{",["T_WHITESPACE","\n    ",11],["T_DOC_COMMENT","\/**\n     * Weee data\n     *\n     * @var \\Magento\\Weee\\Helper\\Data\n     *\/",12],["T_WHITESPACE","\n    ",16],["T_PROTECTED","protected",17],["T_WHITESPACE"," ",17],["T_VARIABLE","$_weeeData",17],["T_WHITESPACE"," ",17],"=",["T_WHITESPACE"," ",17],["T_STRING","null",17],";",["T_WHITESPACE","\n\n    ",17],["T_DOC_COMMENT","\/**\n     * Constructor\n     *\n     * By default is looking for first argument as array and assigns it as object\n     * attributes This behavior may change in child classes\n     *\n     * @param \\Magento\\Weee\\Helper\\Data $weeeData\n     * @param array                     $data\n     *\/",19],["T_WHITESPACE","\n    ",27],["T_PUBLIC","public",28],["T_WHITESPACE"," ",28],["T_FUNCTION","function",28],["T_WHITESPACE"," ",28],["T_STRING","__construct",28],"(",["T_NS_SEPARATOR","\\",28],["T_STRING","Magento",28],["T_NS_SEPARATOR","\\",28],["T_STRING","Weee",28],["T_NS_SEPARATOR","\\",28],["T_STRING","Helper",28],["T_NS_SEPARATOR","\\",28],["T_STRING","Data",28],["T_WHITESPACE"," ",28],["T_VARIABLE","$weeeData",28],",",["T_WHITESPACE"," ",28],["T_ARRAY","array",28],["T_WHITESPACE"," ",28],["T_VARIABLE","$data",28],["T_WHITESPACE"," ",28],"=",["T_WHITESPACE"," ",28],"[","]",")",["T_WHITESPACE","\n    ",28],"{",["T_WHITESPACE","\n        ",29],["T_VARIABLE","$this",30],["T_OBJECT_OPERATOR","->",30],["T_STRING","_weeeData",30],["T_WHITESPACE"," ",30],"=",["T_WHITESPACE"," ",30],["T_VARIABLE","$weeeData",30],";",["T_WHITESPACE","\n        ",30],["T_STRING","parent",31],["T_DOUBLE_COLON","::",31],["T_STRING","__construct",31],"(",["T_VARIABLE","$data",31],")",";",["T_WHITESPACE","\n    ",31],"}",["T_WHITESPACE","\n\n    ",32],["T_DOC_COMMENT","\/**\n     * Collect Weee amounts for the invoice\n     *\n     * @param  \\Magento\\Sales\\Model\\Order\\Invoice $invoice\n     * @return $this\n     * @SuppressWarnings(PHPMD.CyclomaticComplexity)\n     * @SuppressWarnings(PHPMD.NPathComplexity)\n     * @SuppressWarnings(PHPMD.ExcessiveMethodLength)\n     *\/",34],["T_WHITESPACE","\n    ",42],["T_PUBLIC","public",43],["T_WHITESPACE"," ",43],["T_FUNCTION","function",43],["T_WHITESPACE"," ",43],["T_STRING","collect",43],"(",["T_NS_SEPARATOR","\\",43],["T_STRING","Magento",43],["T_NS_SEPARATOR","\\",43],["T_STRING","Sales",43],["T_NS_SEPARATOR","\\",43],["T_STRING","Model",43],["T_NS_SEPARATOR","\\",43],["T_STRING","Order",43],["T_NS_SEPARATOR","\\",43],["T_STRING","Invoice",43],["T_WHITESPACE"," ",43],["T_VARIABLE","$invoice",43],")",["T_WHITESPACE","\n    ",43],"{",["T_WHITESPACE","\n        ",44],["T_VARIABLE","$store",45],["T_WHITESPACE"," ",45],"=",["T_WHITESPACE"," ",45],["T_VARIABLE","$invoice",45],["T_OBJECT_OPERATOR","->",45],["T_STRING","getStore",45],"(",")",";",["T_WHITESPACE","\n        ",45],["T_VARIABLE","$order",46],["T_WHITESPACE"," ",46],"=",["T_WHITESPACE"," ",46],["T_VARIABLE","$invoice",46],["T_OBJECT_OPERATOR","->",46],["T_STRING","getOrder",46],"(",")",";",["T_WHITESPACE","\n\n        ",46],["T_VARIABLE","$totalWeeeAmount",48],["T_WHITESPACE"," ",48],"=",["T_WHITESPACE"," ",48],["T_LNUMBER","0",48],";",["T_WHITESPACE","\n        ",48],["T_VARIABLE","$baseTotalWeeeAmount",49],["T_WHITESPACE"," ",49],"=",["T_WHITESPACE"," ",49],["T_LNUMBER","0",49],";",["T_WHITESPACE","\n        ",49],["T_VARIABLE","$totalWeeeAmountInclTax",50],["T_WHITESPACE"," ",50],"=",["T_WHITESPACE"," ",50],["T_LNUMBER","0",50],";",["T_WHITESPACE","\n        ",50],["T_VARIABLE","$baseTotalWeeeAmountInclTax",51],["T_WHITESPACE"," ",51],"=",["T_WHITESPACE"," ",51],["T_LNUMBER","0",51],";",["T_WHITESPACE","\n        ",51],["T_VARIABLE","$totalWeeeTaxAmount",52],["T_WHITESPACE"," ",52],"=",["T_WHITESPACE"," ",52],["T_LNUMBER","0",52],";",["T_WHITESPACE","\n        ",52],["T_VARIABLE","$baseTotalWeeeTaxAmount",53],["T_WHITESPACE"," ",53],"=",["T_WHITESPACE"," ",53],["T_LNUMBER","0",53],";",["T_WHITESPACE","\n\n        ",53],["T_DOC_COMMENT","\/** @var \\Magento\\Sales\\Model\\Order\\Invoice\\Item $item *\/",55],["T_WHITESPACE","\n        ",55],["T_FOREACH","foreach",56],["T_WHITESPACE"," ",56],"(",["T_VARIABLE","$invoice",56],["T_OBJECT_OPERATOR","->",56],["T_STRING","getAllItems",56],"(",")",["T_WHITESPACE"," ",56],["T_AS","as",56],["T_WHITESPACE"," ",56],["T_VARIABLE","$item",56],")",["T_WHITESPACE"," ",56],"{",["T_WHITESPACE","\n            ",56],["T_VARIABLE","$orderItem",57],["T_WHITESPACE"," ",57],"=",["T_WHITESPACE"," ",57],["T_VARIABLE","$item",57],["T_OBJECT_OPERATOR","->",57],["T_STRING","getOrderItem",57],"(",")",";",["T_WHITESPACE","\n            ",57],["T_VARIABLE","$orderItemQty",58],["T_WHITESPACE"," ",58],"=",["T_WHITESPACE"," ",58],["T_VARIABLE","$orderItem",58],["T_OBJECT_OPERATOR","->",58],["T_STRING","getQtyOrdered",58],"(",")",";",["T_WHITESPACE","\n\n            ",58],["T_IF","if",60],["T_WHITESPACE"," ",60],"(","!",["T_VARIABLE","$orderItemQty",60],["T_WHITESPACE"," ",60],["T_BOOLEAN_OR","||",60],["T_WHITESPACE"," ",60],["T_VARIABLE","$orderItem",60],["T_OBJECT_OPERATOR","->",60],["T_STRING","isDummy",60],"(",")",["T_WHITESPACE"," ",60],["T_BOOLEAN_OR","||",60],["T_WHITESPACE"," ",60],["T_VARIABLE","$item",60],["T_OBJECT_OPERATOR","->",60],["T_STRING","getQty",60],"(",")",["T_WHITESPACE"," ",60],"<",["T_WHITESPACE"," ",60],["T_LNUMBER","0",60],")",["T_WHITESPACE"," ",60],"{",["T_WHITESPACE","\n                ",60],["T_CONTINUE","continue",61],";",["T_WHITESPACE","\n            ",61],"}",["T_WHITESPACE","\n\n            ",62],["T_VARIABLE","$ratio",64],["T_WHITESPACE"," ",64],"=",["T_WHITESPACE"," ",64],["T_VARIABLE","$item",64],["T_OBJECT_OPERATOR","->",64],["T_STRING","getQty",64],"(",")",["T_WHITESPACE"," ",64],"\/",["T_WHITESPACE"," ",64],["T_VARIABLE","$orderItemQty",64],";",["T_WHITESPACE","\n\n            ",64],["T_VARIABLE","$orderItemWeeeAmount",66],["T_WHITESPACE"," ",66],"=",["T_WHITESPACE"," ",66],["T_VARIABLE","$orderItem",66],["T_OBJECT_OPERATOR","->",66],["T_STRING","getWeeeTaxAppliedRowAmount",66],"(",")",";",["T_WHITESPACE","\n            ",66],["T_VARIABLE","$orderItemBaseWeeeAmount",67],["T_WHITESPACE"," ",67],"=",["T_WHITESPACE"," ",67],["T_VARIABLE","$orderItem",67],["T_OBJECT_OPERATOR","->",67],["T_STRING","getBaseWeeeTaxAppliedRowAmnt",67],"(",")",";",["T_WHITESPACE","\n            ",67],["T_VARIABLE","$weeeAmount",68],["T_WHITESPACE"," ",68],"=",["T_WHITESPACE"," ",68],["T_VARIABLE","$invoice",68],["T_OBJECT_OPERATOR","->",68],["T_STRING","roundPrice",68],"(",["T_VARIABLE","$orderItemWeeeAmount",68],["T_WHITESPACE"," ",68],"*",["T_WHITESPACE"," ",68],["T_VARIABLE","$ratio",68],")",";",["T_WHITESPACE","\n            ",68],["T_VARIABLE","$baseWeeeAmount",69],["T_WHITESPACE"," ",69],"=",["T_WHITESPACE"," ",69],["T_VARIABLE","$invoice",69],["T_OBJECT_OPERATOR","->",69],["T_STRING","roundPrice",69],"(",["T_VARIABLE","$orderItemBaseWeeeAmount",69],["T_WHITESPACE"," ",69],"*",["T_WHITESPACE"," ",69],["T_VARIABLE","$ratio",69],",",["T_WHITESPACE"," ",69],["T_CONSTANT_ENCAPSED_STRING","'base'",69],")",";",["T_WHITESPACE","\n\n            ",69],["T_VARIABLE","$orderItemWeeeInclTax",71],["T_WHITESPACE"," ",71],"=",["T_WHITESPACE"," ",71],["T_VARIABLE","$this",71],["T_OBJECT_OPERATOR","->",71],["T_STRING","_weeeData",71],["T_OBJECT_OPERATOR","->",71],["T_STRING","getRowWeeeTaxInclTax",71],"(",["T_VARIABLE","$orderItem",71],")",";",["T_WHITESPACE","\n            ",71],["T_VARIABLE","$orderItemBaseWeeeInclTax",72],["T_WHITESPACE"," ",72],"=",["T_WHITESPACE"," ",72],["T_VARIABLE","$this",72],["T_OBJECT_OPERATOR","->",72],["T_STRING","_weeeData",72],["T_OBJECT_OPERATOR","->",72],["T_STRING","getBaseRowWeeeTaxInclTax",72],"(",["T_VARIABLE","$orderItem",72],")",";",["T_WHITESPACE","\n            ",72],["T_VARIABLE","$weeeAmountInclTax",73],["T_WHITESPACE"," ",73],"=",["T_WHITESPACE"," ",73],["T_VARIABLE","$invoice",73],["T_OBJECT_OPERATOR","->",73],["T_STRING","roundPrice",73],"(",["T_VARIABLE","$orderItemWeeeInclTax",73],["T_WHITESPACE"," ",73],"*",["T_WHITESPACE"," ",73],["T_VARIABLE","$ratio",73],")",";",["T_WHITESPACE","\n            ",73],["T_VARIABLE","$baseWeeeAmountInclTax",74],["T_WHITESPACE"," ",74],"=",["T_WHITESPACE"," ",74],["T_VARIABLE","$invoice",74],["T_OBJECT_OPERATOR","->",74],["T_STRING","roundPrice",74],"(",["T_VARIABLE","$orderItemBaseWeeeInclTax",74],["T_WHITESPACE"," ",74],"*",["T_WHITESPACE"," ",74],["T_VARIABLE","$ratio",74],",",["T_WHITESPACE"," ",74],["T_CONSTANT_ENCAPSED_STRING","'base'",74],")",";",["T_WHITESPACE","\n\n            ",74],["T_VARIABLE","$orderItemWeeeTax",76],["T_WHITESPACE"," ",76],"=",["T_WHITESPACE"," ",76],["T_VARIABLE","$orderItemWeeeInclTax",76],["T_WHITESPACE"," ",76],"-",["T_WHITESPACE"," ",76],["T_VARIABLE","$orderItemWeeeAmount",76],";",["T_WHITESPACE","\n            ",76],["T_VARIABLE","$itemWeeeTax",77],["T_WHITESPACE"," ",77],"=",["T_WHITESPACE"," ",77],["T_VARIABLE","$weeeAmountInclTax",77],["T_WHITESPACE"," ",77],"-",["T_WHITESPACE"," ",77],["T_VARIABLE","$weeeAmount",77],";",["T_WHITESPACE","\n            ",77],["T_VARIABLE","$itemBaseWeeeTax",78],["T_WHITESPACE"," ",78],"=",["T_WHITESPACE"," ",78],["T_VARIABLE","$baseWeeeAmountInclTax",78],["T_WHITESPACE"," ",78],"-",["T_WHITESPACE"," ",78],["T_VARIABLE","$baseWeeeAmount",78],";",["T_WHITESPACE","\n\n            ",78],["T_IF","if",80],["T_WHITESPACE"," ",80],"(",["T_VARIABLE","$item",80],["T_OBJECT_OPERATOR","->",80],["T_STRING","isLast",80],"(",")",")",["T_WHITESPACE"," ",80],"{",["T_WHITESPACE","\n                ",80],["T_VARIABLE","$weeeAmount",81],["T_WHITESPACE"," ",81],"=",["T_WHITESPACE"," ",81],["T_VARIABLE","$orderItemWeeeAmount",81],["T_WHITESPACE"," ",81],"-",["T_WHITESPACE"," ",81],["T_VARIABLE","$this",81],["T_OBJECT_OPERATOR","->",81],["T_STRING","_weeeData",81],["T_OBJECT_OPERATOR","->",81],["T_STRING","getWeeeAmountInvoiced",81],"(",["T_VARIABLE","$orderItem",81],")",";",["T_WHITESPACE","\n                ",81],["T_VARIABLE","$baseWeeeAmount",82],["T_WHITESPACE"," ",82],"=",["T_WHITESPACE","\n                    ",82],["T_VARIABLE","$orderItemBaseWeeeAmount",83],["T_WHITESPACE"," ",83],"-",["T_WHITESPACE"," ",83],["T_VARIABLE","$this",83],["T_OBJECT_OPERATOR","->",83],["T_STRING","_weeeData",83],["T_OBJECT_OPERATOR","->",83],["T_STRING","getBaseWeeeAmountInvoiced",83],"(",["T_VARIABLE","$orderItem",83],")",";",["T_WHITESPACE","\n                ",83],["T_VARIABLE","$itemWeeeTax",84],["T_WHITESPACE"," ",84],"=",["T_WHITESPACE"," ",84],["T_VARIABLE","$orderItemWeeeTax",84],["T_WHITESPACE"," ",84],"-",["T_WHITESPACE"," ",84],["T_VARIABLE","$this",84],["T_OBJECT_OPERATOR","->",84],["T_STRING","_weeeData",84],["T_OBJECT_OPERATOR","->",84],["T_STRING","getWeeeTaxAmountInvoiced",84],"(",["T_VARIABLE","$orderItem",84],")",";",["T_WHITESPACE","\n                ",84],["T_VARIABLE","$itemBaseWeeeTax",85],["T_WHITESPACE"," ",85],"=",["T_WHITESPACE","\n                    ",85],["T_VARIABLE","$orderItemWeeeTax",86],["T_WHITESPACE"," ",86],"-",["T_WHITESPACE"," ",86],["T_VARIABLE","$this",86],["T_OBJECT_OPERATOR","->",86],["T_STRING","_weeeData",86],["T_OBJECT_OPERATOR","->",86],["T_STRING","getBaseWeeeTaxAmountInvoiced",86],"(",["T_VARIABLE","$orderItem",86],")",";",["T_WHITESPACE","\n            ",86],"}",["T_WHITESPACE","\n\n            ",87],["T_VARIABLE","$totalWeeeTaxAmount",89],["T_WHITESPACE"," ",89],["T_PLUS_EQUAL","+=",89],["T_WHITESPACE"," ",89],["T_VARIABLE","$itemWeeeTax",89],";",["T_WHITESPACE","\n            ",89],["T_VARIABLE","$baseTotalWeeeTaxAmount",90],["T_WHITESPACE"," ",90],["T_PLUS_EQUAL","+=",90],["T_WHITESPACE"," ",90],["T_VARIABLE","$itemBaseWeeeTax",90],";",["T_WHITESPACE","\n\n            ",90],["T_COMMENT","\/\/Set the ratio of the tax amount in invoice item compared to tax amount in order item\n",92],["T_WHITESPACE","            ",93],["T_COMMENT","\/\/This information is needed to calculate tax per tax rate later\n",93],["T_WHITESPACE","            ",94],["T_IF","if",94],["T_WHITESPACE"," ",94],"(",["T_VARIABLE","$orderItemWeeeTax",94],["T_WHITESPACE"," ",94],["T_IS_NOT_EQUAL","!=",94],["T_WHITESPACE"," ",94],["T_LNUMBER","0",94],")",["T_WHITESPACE"," ",94],"{",["T_WHITESPACE","\n                ",94],["T_VARIABLE","$taxRatio",95],["T_WHITESPACE"," ",95],"=",["T_WHITESPACE"," ",95],"[","]",";",["T_WHITESPACE","\n                ",95],["T_IF","if",96],["T_WHITESPACE"," ",96],"(",["T_VARIABLE","$item",96],["T_OBJECT_OPERATOR","->",96],["T_STRING","getTaxRatio",96],"(",")",")",["T_WHITESPACE"," ",96],"{",["T_WHITESPACE","\n                    ",96],["T_VARIABLE","$taxRatio",97],["T_WHITESPACE"," ",97],"=",["T_WHITESPACE"," ",97],["T_STRING","unserialize",97],"(",["T_VARIABLE","$item",97],["T_OBJECT_OPERATOR","->",97],["T_STRING","getTaxRatio",97],"(",")",")",";",["T_WHITESPACE","\n                ",97],"}",["T_WHITESPACE","\n                ",98],["T_VARIABLE","$taxRatio",99],"[",["T_NS_SEPARATOR","\\",99],["T_STRING","Magento",99],["T_NS_SEPARATOR","\\",99],["T_STRING","Weee",99],["T_NS_SEPARATOR","\\",99],["T_STRING","Model",99],["T_NS_SEPARATOR","\\",99],["T_STRING","Total",99],["T_NS_SEPARATOR","\\",99],["T_STRING","Quote",99],["T_NS_SEPARATOR","\\",99],["T_STRING","Weee",99],["T_DOUBLE_COLON","::",99],["T_STRING","ITEM_TYPE",99],"]",["T_WHITESPACE"," ",99],"=",["T_WHITESPACE"," ",99],["T_VARIABLE","$itemWeeeTax",99],["T_WHITESPACE"," ",99],"\/",["T_WHITESPACE"," ",99],["T_VARIABLE","$orderItemWeeeTax",99],";",["T_WHITESPACE","\n                ",99],["T_VARIABLE","$item",100],["T_OBJECT_OPERATOR","->",100],["T_STRING","setTaxRatio",100],"(",["T_STRING","serialize",100],"(",["T_VARIABLE","$taxRatio",100],")",")",";",["T_WHITESPACE","\n            ",100],"}",["T_WHITESPACE","\n\n            ",101],["T_VARIABLE","$item",103],["T_OBJECT_OPERATOR","->",103],["T_STRING","setWeeeTaxAppliedRowAmount",103],"(",["T_VARIABLE","$weeeAmount",103],")",";",["T_WHITESPACE","\n            ",103],["T_VARIABLE","$item",104],["T_OBJECT_OPERATOR","->",104],["T_STRING","setBaseWeeeTaxAppliedRowAmount",104],"(",["T_VARIABLE","$baseWeeeAmount",104],")",";",["T_WHITESPACE","\n            ",104],["T_VARIABLE","$newApplied",105],["T_WHITESPACE"," ",105],"=",["T_WHITESPACE"," ",105],"[","]",";",["T_WHITESPACE","\n            ",105],["T_VARIABLE","$applied",106],["T_WHITESPACE"," ",106],"=",["T_WHITESPACE"," ",106],["T_VARIABLE","$this",106],["T_OBJECT_OPERATOR","->",106],["T_STRING","_weeeData",106],["T_OBJECT_OPERATOR","->",106],["T_STRING","getApplied",106],"(",["T_VARIABLE","$orderItem",106],")",";",["T_WHITESPACE","\n            ",106],["T_FOREACH","foreach",107],["T_WHITESPACE"," ",107],"(",["T_VARIABLE","$applied",107],["T_WHITESPACE"," ",107],["T_AS","as",107],["T_WHITESPACE"," ",107],["T_VARIABLE","$one",107],")",["T_WHITESPACE"," ",107],"{",["T_WHITESPACE","\n                ",107],["T_VARIABLE","$title",108],["T_WHITESPACE"," ",108],"=",["T_WHITESPACE"," ",108],["T_STRING_CAST","(string)",108],["T_VARIABLE","$one",108],"[",["T_CONSTANT_ENCAPSED_STRING","'title'",108],"]",";",["T_WHITESPACE","\n                ",108],["T_VARIABLE","$one",109],"[",["T_CONSTANT_ENCAPSED_STRING","'base_row_amount'",109],"]",["T_WHITESPACE"," ",109],"=",["T_WHITESPACE"," ",109],["T_VARIABLE","$invoice",109],["T_OBJECT_OPERATOR","->",109],["T_STRING","roundPrice",109],"(",["T_VARIABLE","$one",109],"[",["T_CONSTANT_ENCAPSED_STRING","'base_row_amount'",109],"]",["T_WHITESPACE"," ",109],"*",["T_WHITESPACE"," ",109],["T_VARIABLE","$ratio",109],",",["T_WHITESPACE"," ",109],["T_VARIABLE","$title",109],".",["T_CONSTANT_ENCAPSED_STRING","'_base'",109],")",";",["T_WHITESPACE","\n                ",109],["T_VARIABLE","$one",110],"[",["T_CONSTANT_ENCAPSED_STRING","'row_amount'",110],"]",["T_WHITESPACE"," ",110],"=",["T_WHITESPACE"," ",110],["T_VARIABLE","$invoice",110],["T_OBJECT_OPERATOR","->",110],["T_STRING","roundPrice",110],"(",["T_VARIABLE","$one",110],"[",["T_CONSTANT_ENCAPSED_STRING","'row_amount'",110],"]",["T_WHITESPACE"," ",110],"*",["T_WHITESPACE"," ",110],["T_VARIABLE","$ratio",110],",",["T_WHITESPACE"," ",110],["T_VARIABLE","$title",110],")",";",["T_WHITESPACE","\n                ",110],["T_VARIABLE","$one",111],"[",["T_CONSTANT_ENCAPSED_STRING","'base_row_amount_incl_tax'",111],"]",["T_WHITESPACE"," ",111],"=",["T_WHITESPACE"," ",111],["T_VARIABLE","$invoice",111],["T_OBJECT_OPERATOR","->",111],["T_STRING","roundPrice",111],"(",["T_WHITESPACE","\n                    ",111],["T_VARIABLE","$one",112],"[",["T_CONSTANT_ENCAPSED_STRING","'base_row_amount_incl_tax'",112],"]",["T_WHITESPACE"," ",112],"*",["T_WHITESPACE"," ",112],["T_VARIABLE","$ratio",112],",",["T_WHITESPACE","\n                    ",112],["T_VARIABLE","$title",113],".",["T_CONSTANT_ENCAPSED_STRING","'_base'",113],["T_WHITESPACE","\n                ",113],")",";",["T_WHITESPACE","\n                ",114],["T_VARIABLE","$one",115],"[",["T_CONSTANT_ENCAPSED_STRING","'row_amount_incl_tax'",115],"]",["T_WHITESPACE"," ",115],"=",["T_WHITESPACE"," ",115],["T_VARIABLE","$invoice",115],["T_OBJECT_OPERATOR","->",115],["T_STRING","roundPrice",115],"(",["T_VARIABLE","$one",115],"[",["T_CONSTANT_ENCAPSED_STRING","'row_amount_incl_tax'",115],"]",["T_WHITESPACE"," ",115],"*",["T_WHITESPACE"," ",115],["T_VARIABLE","$ratio",115],",",["T_WHITESPACE"," ",115],["T_VARIABLE","$title",115],")",";",["T_WHITESPACE","\n\n                ",115],["T_VARIABLE","$newApplied",117],"[","]",["T_WHITESPACE"," ",117],"=",["T_WHITESPACE"," ",117],["T_VARIABLE","$one",117],";",["T_WHITESPACE","\n            ",117],"}",["T_WHITESPACE","\n            ",118],["T_VARIABLE","$this",119],["T_OBJECT_OPERATOR","->",119],["T_STRING","_weeeData",119],["T_OBJECT_OPERATOR","->",119],["T_STRING","setApplied",119],"(",["T_VARIABLE","$item",119],",",["T_WHITESPACE"," ",119],["T_VARIABLE","$newApplied",119],")",";",["T_WHITESPACE","\n\n            ",119],["T_COMMENT","\/\/Update order item\n",121],["T_WHITESPACE","            ",122],["T_VARIABLE","$newApplied",122],["T_WHITESPACE"," ",122],"=",["T_WHITESPACE"," ",122],"[","]",";",["T_WHITESPACE","\n            ",122],["T_VARIABLE","$applied",123],["T_WHITESPACE"," ",123],"=",["T_WHITESPACE"," ",123],["T_VARIABLE","$this",123],["T_OBJECT_OPERATOR","->",123],["T_STRING","_weeeData",123],["T_OBJECT_OPERATOR","->",123],["T_STRING","getApplied",123],"(",["T_VARIABLE","$orderItem",123],")",";",["T_WHITESPACE","\n            ",123],["T_FOREACH","foreach",124],["T_WHITESPACE"," ",124],"(",["T_VARIABLE","$applied",124],["T_WHITESPACE"," ",124],["T_AS","as",124],["T_WHITESPACE"," ",124],["T_VARIABLE","$one",124],")",["T_WHITESPACE"," ",124],"{",["T_WHITESPACE","\n                ",124],["T_IF","if",125],["T_WHITESPACE"," ",125],"(",["T_ISSET","isset",125],"(",["T_VARIABLE","$one",125],"[",["T_STRING","WeeeHelper",125],["T_DOUBLE_COLON","::",125],["T_STRING","KEY_BASE_WEEE_AMOUNT_INVOICED",125],"]",")",")",["T_WHITESPACE"," ",125],"{",["T_WHITESPACE","\n                    ",125],["T_VARIABLE","$one",126],"[",["T_STRING","WeeeHelper",126],["T_DOUBLE_COLON","::",126],["T_STRING","KEY_BASE_WEEE_AMOUNT_INVOICED",126],"]",["T_WHITESPACE"," ",126],"=",["T_WHITESPACE","\n                        ",126],["T_VARIABLE","$one",127],"[",["T_STRING","WeeeHelper",127],["T_DOUBLE_COLON","::",127],["T_STRING","KEY_BASE_WEEE_AMOUNT_INVOICED",127],"]",["T_WHITESPACE"," ",127],"+",["T_WHITESPACE"," ",127],["T_VARIABLE","$baseWeeeAmount",127],";",["T_WHITESPACE","\n                ",127],"}",["T_WHITESPACE"," ",128],["T_ELSE","else",128],["T_WHITESPACE"," ",128],"{",["T_WHITESPACE","\n                    ",128],["T_VARIABLE","$one",129],"[",["T_STRING","WeeeHelper",129],["T_DOUBLE_COLON","::",129],["T_STRING","KEY_BASE_WEEE_AMOUNT_INVOICED",129],"]",["T_WHITESPACE"," ",129],"=",["T_WHITESPACE"," ",129],["T_VARIABLE","$baseWeeeAmount",129],";",["T_WHITESPACE","\n                ",129],"}",["T_WHITESPACE","\n                ",130],["T_IF","if",131],["T_WHITESPACE"," ",131],"(",["T_ISSET","isset",131],"(",["T_VARIABLE","$one",131],"[",["T_STRING","WeeeHelper",131],["T_DOUBLE_COLON","::",131],["T_STRING","KEY_WEEE_AMOUNT_INVOICED",131],"]",")",")",["T_WHITESPACE"," ",131],"{",["T_WHITESPACE","\n                    ",131],["T_VARIABLE","$one",132],"[",["T_STRING","WeeeHelper",132],["T_DOUBLE_COLON","::",132],["T_STRING","KEY_WEEE_AMOUNT_INVOICED",132],"]",["T_WHITESPACE"," ",132],"=",["T_WHITESPACE","\n                        ",132],["T_VARIABLE","$one",133],"[",["T_STRING","WeeeHelper",133],["T_DOUBLE_COLON","::",133],["T_STRING","KEY_WEEE_AMOUNT_INVOICED",133],"]",["T_WHITESPACE"," ",133],"+",["T_WHITESPACE"," ",133],["T_VARIABLE","$weeeAmount",133],";",["T_WHITESPACE","\n                ",133],"}",["T_WHITESPACE"," ",134],["T_ELSE","else",134],["T_WHITESPACE"," ",134],"{",["T_WHITESPACE","\n                    ",134],["T_VARIABLE","$one",135],"[",["T_STRING","WeeeHelper",135],["T_DOUBLE_COLON","::",135],["T_STRING","KEY_WEEE_AMOUNT_INVOICED",135],"]",["T_WHITESPACE"," ",135],"=",["T_WHITESPACE"," ",135],["T_VARIABLE","$weeeAmount",135],";",["T_WHITESPACE","\n                ",135],"}",["T_WHITESPACE","\n                ",136],["T_IF","if",137],["T_WHITESPACE"," ",137],"(",["T_ISSET","isset",137],"(",["T_VARIABLE","$one",137],"[",["T_STRING","WeeeHelper",137],["T_DOUBLE_COLON","::",137],["T_STRING","KEY_BASE_WEEE_TAX_AMOUNT_INVOICED",137],"]",")",")",["T_WHITESPACE"," ",137],"{",["T_WHITESPACE","\n                    ",137],["T_VARIABLE","$one",138],"[",["T_STRING","WeeeHelper",138],["T_DOUBLE_COLON","::",138],["T_STRING","KEY_BASE_WEEE_TAX_AMOUNT_INVOICED",138],"]",["T_WHITESPACE"," ",138],"=",["T_WHITESPACE","\n                        ",138],["T_VARIABLE","$one",139],"[",["T_STRING","WeeeHelper",139],["T_DOUBLE_COLON","::",139],["T_STRING","KEY_BASE_WEEE_TAX_AMOUNT_INVOICED",139],"]",["T_WHITESPACE"," ",139],"+",["T_WHITESPACE"," ",139],["T_VARIABLE","$itemWeeeTax",139],";",["T_WHITESPACE","\n                ",139],"}",["T_WHITESPACE"," ",140],["T_ELSE","else",140],["T_WHITESPACE"," ",140],"{",["T_WHITESPACE","\n                    ",140],["T_VARIABLE","$one",141],"[",["T_STRING","WeeeHelper",141],["T_DOUBLE_COLON","::",141],["T_STRING","KEY_BASE_WEEE_TAX_AMOUNT_INVOICED",141],"]",["T_WHITESPACE"," ",141],"=",["T_WHITESPACE"," ",141],["T_VARIABLE","$itemWeeeTax",141],";",["T_WHITESPACE","\n                ",141],"}",["T_WHITESPACE","\n                ",142],["T_IF","if",143],["T_WHITESPACE"," ",143],"(",["T_ISSET","isset",143],"(",["T_VARIABLE","$one",143],"[",["T_STRING","WeeeHelper",143],["T_DOUBLE_COLON","::",143],["T_STRING","KEY_WEEE_TAX_AMOUNT_INVOICED",143],"]",")",")",["T_WHITESPACE"," ",143],"{",["T_WHITESPACE","\n                    ",143],["T_VARIABLE","$one",144],"[",["T_STRING","WeeeHelper",144],["T_DOUBLE_COLON","::",144],["T_STRING","KEY_WEEE_TAX_AMOUNT_INVOICED",144],"]",["T_WHITESPACE"," ",144],"=",["T_WHITESPACE","\n                        ",144],["T_VARIABLE","$one",145],"[",["T_STRING","WeeeHelper",145],["T_DOUBLE_COLON","::",145],["T_STRING","KEY_WEEE_TAX_AMOUNT_INVOICED",145],"]",["T_WHITESPACE"," ",145],"+",["T_WHITESPACE"," ",145],["T_VARIABLE","$itemBaseWeeeTax",145],";",["T_WHITESPACE","\n                ",145],"}",["T_WHITESPACE"," ",146],["T_ELSE","else",146],["T_WHITESPACE"," ",146],"{",["T_WHITESPACE","\n                    ",146],["T_VARIABLE","$one",147],"[",["T_STRING","WeeeHelper",147],["T_DOUBLE_COLON","::",147],["T_STRING","KEY_WEEE_TAX_AMOUNT_INVOICED",147],"]",["T_WHITESPACE"," ",147],"=",["T_WHITESPACE"," ",147],["T_VARIABLE","$itemBaseWeeeTax",147],";",["T_WHITESPACE","\n                ",147],"}",["T_WHITESPACE","\n                ",148],["T_VARIABLE","$newApplied",149],"[","]",["T_WHITESPACE"," ",149],"=",["T_WHITESPACE"," ",149],["T_VARIABLE","$one",149],";",["T_WHITESPACE","\n            ",149],"}",["T_WHITESPACE","\n            ",150],["T_VARIABLE","$this",151],["T_OBJECT_OPERATOR","->",151],["T_STRING","_weeeData",151],["T_OBJECT_OPERATOR","->",151],["T_STRING","setApplied",151],"(",["T_VARIABLE","$orderItem",151],",",["T_WHITESPACE"," ",151],["T_VARIABLE","$newApplied",151],")",";",["T_WHITESPACE","\n\n            ",151],["T_VARIABLE","$item",153],["T_OBJECT_OPERATOR","->",153],["T_STRING","setWeeeTaxRowDisposition",153],"(",["T_VARIABLE","$item",153],["T_OBJECT_OPERATOR","->",153],["T_STRING","getWeeeTaxDisposition",153],"(",")",["T_WHITESPACE"," ",153],"*",["T_WHITESPACE"," ",153],["T_VARIABLE","$item",153],["T_OBJECT_OPERATOR","->",153],["T_STRING","getQty",153],"(",")",")",";",["T_WHITESPACE","\n            ",153],["T_VARIABLE","$item",154],["T_OBJECT_OPERATOR","->",154],["T_STRING","setBaseWeeeTaxRowDisposition",154],"(",["T_VARIABLE","$item",154],["T_OBJECT_OPERATOR","->",154],["T_STRING","getBaseWeeeTaxDisposition",154],"(",")",["T_WHITESPACE"," ",154],"*",["T_WHITESPACE"," ",154],["T_VARIABLE","$item",154],["T_OBJECT_OPERATOR","->",154],["T_STRING","getQty",154],"(",")",")",";",["T_WHITESPACE","\n\n            ",154],["T_VARIABLE","$totalWeeeAmount",156],["T_WHITESPACE"," ",156],["T_PLUS_EQUAL","+=",156],["T_WHITESPACE"," ",156],["T_VARIABLE","$weeeAmount",156],";",["T_WHITESPACE","\n            ",156],["T_VARIABLE","$baseTotalWeeeAmount",157],["T_WHITESPACE"," ",157],["T_PLUS_EQUAL","+=",157],["T_WHITESPACE"," ",157],["T_VARIABLE","$baseWeeeAmount",157],";",["T_WHITESPACE","\n\n            ",157],["T_VARIABLE","$totalWeeeAmountInclTax",159],["T_WHITESPACE"," ",159],["T_PLUS_EQUAL","+=",159],["T_WHITESPACE"," ",159],["T_VARIABLE","$weeeAmountInclTax",159],";",["T_WHITESPACE","\n            ",159],["T_VARIABLE","$baseTotalWeeeAmountInclTax",160],["T_WHITESPACE"," ",160],["T_PLUS_EQUAL","+=",160],["T_WHITESPACE"," ",160],["T_VARIABLE","$baseWeeeAmountInclTax",160],";",["T_WHITESPACE","\n        ",160],"}",["T_WHITESPACE","\n\n        ",161],["T_VARIABLE","$allowedTax",163],["T_WHITESPACE"," ",163],"=",["T_WHITESPACE"," ",163],["T_VARIABLE","$order",163],["T_OBJECT_OPERATOR","->",163],["T_STRING","getTaxAmount",163],"(",")",["T_WHITESPACE"," ",163],"-",["T_WHITESPACE"," ",163],["T_VARIABLE","$order",163],["T_OBJECT_OPERATOR","->",163],["T_STRING","getTaxInvoiced",163],"(",")",["T_WHITESPACE"," ",163],"-",["T_WHITESPACE"," ",163],["T_VARIABLE","$invoice",163],["T_OBJECT_OPERATOR","->",163],["T_STRING","getTaxAmount",163],"(",")",";",["T_WHITESPACE","\n        ",163],["T_VARIABLE","$allowedBaseTax",164],["T_WHITESPACE"," ",164],"=",["T_WHITESPACE"," ",164],["T_VARIABLE","$order",164],["T_OBJECT_OPERATOR","->",164],["T_STRING","getBaseTaxAmount",164],"(",")",["T_WHITESPACE"," ",164],"-",["T_WHITESPACE"," ",164],["T_VARIABLE","$order",164],["T_OBJECT_OPERATOR","->",164],["T_STRING","getBaseTaxInvoiced",164],"(",")",["T_WHITESPACE"," ",164],"-",["T_WHITESPACE"," ",164],["T_VARIABLE","$invoice",164],["T_OBJECT_OPERATOR","->",164],["T_STRING","getBaseTaxAmount",164],"(",")",";",["T_WHITESPACE","\n        ",164],["T_VARIABLE","$totalWeeeTaxAmount",165],["T_WHITESPACE"," ",165],"=",["T_WHITESPACE"," ",165],["T_STRING","min",165],"(",["T_VARIABLE","$totalWeeeTaxAmount",165],",",["T_WHITESPACE"," ",165],["T_VARIABLE","$allowedTax",165],")",";",["T_WHITESPACE","\n        ",165],["T_VARIABLE","$baseTotalWeeeTaxAmount",166],["T_WHITESPACE"," ",166],"=",["T_WHITESPACE"," ",166],["T_STRING","min",166],"(",["T_VARIABLE","$baseTotalWeeeTaxAmount",166],",",["T_WHITESPACE"," ",166],["T_VARIABLE","$allowedBaseTax",166],")",";",["T_WHITESPACE","\n\n        ",166],["T_VARIABLE","$invoice",168],["T_OBJECT_OPERATOR","->",168],["T_STRING","setTaxAmount",168],"(",["T_VARIABLE","$invoice",168],["T_OBJECT_OPERATOR","->",168],["T_STRING","getTaxAmount",168],"(",")",["T_WHITESPACE"," ",168],"+",["T_WHITESPACE"," ",168],["T_VARIABLE","$totalWeeeTaxAmount",168],")",";",["T_WHITESPACE","\n        ",168],["T_VARIABLE","$invoice",169],["T_OBJECT_OPERATOR","->",169],["T_STRING","setBaseTaxAmount",169],"(",["T_VARIABLE","$invoice",169],["T_OBJECT_OPERATOR","->",169],["T_STRING","getBaseTaxAmount",169],"(",")",["T_WHITESPACE"," ",169],"+",["T_WHITESPACE"," ",169],["T_VARIABLE","$baseTotalWeeeTaxAmount",169],")",";",["T_WHITESPACE","\n\n        ",169],["T_COMMENT","\/\/ Add FPT to subtotal and grand total\n",171],["T_WHITESPACE","        ",172],["T_IF","if",172],["T_WHITESPACE"," ",172],"(",["T_VARIABLE","$this",172],["T_OBJECT_OPERATOR","->",172],["T_STRING","_weeeData",172],["T_OBJECT_OPERATOR","->",172],["T_STRING","includeInSubtotal",172],"(",["T_VARIABLE","$store",172],")",")",["T_WHITESPACE"," ",172],"{",["T_WHITESPACE","\n            ",172],["T_VARIABLE","$order",173],["T_WHITESPACE"," ",173],"=",["T_WHITESPACE"," ",173],["T_VARIABLE","$invoice",173],["T_OBJECT_OPERATOR","->",173],["T_STRING","getOrder",173],"(",")",";",["T_WHITESPACE","\n            ",173],["T_VARIABLE","$allowedSubtotal",174],["T_WHITESPACE"," ",174],"=",["T_WHITESPACE"," ",174],["T_VARIABLE","$order",174],["T_OBJECT_OPERATOR","->",174],["T_STRING","getSubtotal",174],"(",")",["T_WHITESPACE"," ",174],"-",["T_WHITESPACE"," ",174],["T_VARIABLE","$order",174],["T_OBJECT_OPERATOR","->",174],["T_STRING","getSubtotalInvoiced",174],"(",")",["T_WHITESPACE"," ",174],"-",["T_WHITESPACE"," ",174],["T_VARIABLE","$invoice",174],["T_OBJECT_OPERATOR","->",174],["T_STRING","getSubtotal",174],"(",")",";",["T_WHITESPACE","\n            ",174],["T_VARIABLE","$allowedBaseSubtotal",175],["T_WHITESPACE"," ",175],"=",["T_WHITESPACE"," ",175],["T_VARIABLE","$order",175],["T_OBJECT_OPERATOR","->",175],["T_STRING","getBaseSubtotal",175],"(",")",["T_WHITESPACE"," ",175],"-",["T_WHITESPACE","\n                ",175],["T_VARIABLE","$order",176],["T_OBJECT_OPERATOR","->",176],["T_STRING","getBaseSubtotalInvoiced",176],"(",")",["T_WHITESPACE"," ",176],"-",["T_WHITESPACE","\n                ",176],["T_VARIABLE","$invoice",177],["T_OBJECT_OPERATOR","->",177],["T_STRING","getBaseSubtotal",177],"(",")",";",["T_WHITESPACE","\n            ",177],["T_VARIABLE","$totalWeeeAmount",178],["T_WHITESPACE"," ",178],"=",["T_WHITESPACE"," ",178],["T_STRING","min",178],"(",["T_VARIABLE","$allowedSubtotal",178],",",["T_WHITESPACE"," ",178],["T_VARIABLE","$totalWeeeAmount",178],")",";",["T_WHITESPACE","\n            ",178],["T_VARIABLE","$baseTotalWeeeAmount",179],["T_WHITESPACE"," ",179],"=",["T_WHITESPACE"," ",179],["T_STRING","min",179],"(",["T_VARIABLE","$allowedBaseSubtotal",179],",",["T_WHITESPACE"," ",179],["T_VARIABLE","$baseTotalWeeeAmount",179],")",";",["T_WHITESPACE","\n\n            ",179],["T_VARIABLE","$invoice",181],["T_OBJECT_OPERATOR","->",181],["T_STRING","setSubtotal",181],"(",["T_VARIABLE","$invoice",181],["T_OBJECT_OPERATOR","->",181],["T_STRING","getSubtotal",181],"(",")",["T_WHITESPACE"," ",181],"+",["T_WHITESPACE"," ",181],["T_VARIABLE","$totalWeeeAmount",181],")",";",["T_WHITESPACE","\n            ",181],["T_VARIABLE","$invoice",182],["T_OBJECT_OPERATOR","->",182],["T_STRING","setBaseSubtotal",182],"(",["T_VARIABLE","$invoice",182],["T_OBJECT_OPERATOR","->",182],["T_STRING","getBaseSubtotal",182],"(",")",["T_WHITESPACE"," ",182],"+",["T_WHITESPACE"," ",182],["T_VARIABLE","$baseTotalWeeeAmount",182],")",";",["T_WHITESPACE","\n        ",182],"}",["T_WHITESPACE","\n\n        ",183],["T_IF","if",185],["T_WHITESPACE"," ",185],"(","!",["T_VARIABLE","$invoice",185],["T_OBJECT_OPERATOR","->",185],["T_STRING","isLast",185],"(",")",")",["T_WHITESPACE"," ",185],"{",["T_WHITESPACE","\n            ",185],["T_COMMENT","\/\/ need to add the Weee amounts including all their taxes\n",186],["T_WHITESPACE","            ",187],["T_VARIABLE","$invoice",187],["T_OBJECT_OPERATOR","->",187],["T_STRING","setSubtotalInclTax",187],"(",["T_VARIABLE","$invoice",187],["T_OBJECT_OPERATOR","->",187],["T_STRING","getSubtotalInclTax",187],"(",")",["T_WHITESPACE"," ",187],"+",["T_WHITESPACE"," ",187],["T_VARIABLE","$totalWeeeAmountInclTax",187],")",";",["T_WHITESPACE","\n            ",187],["T_VARIABLE","$invoice",188],["T_OBJECT_OPERATOR","->",188],["T_STRING","setBaseSubtotalInclTax",188],"(",["T_VARIABLE","$invoice",188],["T_OBJECT_OPERATOR","->",188],["T_STRING","getBaseSubtotalInclTax",188],"(",")",["T_WHITESPACE"," ",188],"+",["T_WHITESPACE"," ",188],["T_VARIABLE","$baseTotalWeeeAmountInclTax",188],")",";",["T_WHITESPACE","\n        ",188],"}",["T_WHITESPACE"," ",189],["T_ELSE","else",189],["T_WHITESPACE"," ",189],"{",["T_WHITESPACE","\n            ",189],["T_COMMENT","\/\/ since the Subtotal Incl Tax line will already have the taxes on Weee, just add the non-taxable amounts\n",190],["T_WHITESPACE","            ",191],["T_VARIABLE","$invoice",191],["T_OBJECT_OPERATOR","->",191],["T_STRING","setSubtotalInclTax",191],"(",["T_VARIABLE","$invoice",191],["T_OBJECT_OPERATOR","->",191],["T_STRING","getSubtotalInclTax",191],"(",")",["T_WHITESPACE"," ",191],"+",["T_WHITESPACE"," ",191],["T_VARIABLE","$totalWeeeAmount",191],")",";",["T_WHITESPACE","\n            ",191],["T_VARIABLE","$invoice",192],["T_OBJECT_OPERATOR","->",192],["T_STRING","setBaseSubtotalInclTax",192],"(",["T_VARIABLE","$invoice",192],["T_OBJECT_OPERATOR","->",192],["T_STRING","getBaseSubtotalInclTax",192],"(",")",["T_WHITESPACE"," ",192],"+",["T_WHITESPACE"," ",192],["T_VARIABLE","$baseTotalWeeeAmount",192],")",";",["T_WHITESPACE","\n        ",192],"}",["T_WHITESPACE","\n\n        ",193],["T_VARIABLE","$invoice",195],["T_OBJECT_OPERATOR","->",195],["T_STRING","setGrandTotal",195],"(",["T_VARIABLE","$invoice",195],["T_OBJECT_OPERATOR","->",195],["T_STRING","getGrandTotal",195],"(",")",["T_WHITESPACE"," ",195],"+",["T_WHITESPACE"," ",195],["T_VARIABLE","$totalWeeeAmount",195],["T_WHITESPACE"," ",195],"+",["T_WHITESPACE"," ",195],["T_VARIABLE","$totalWeeeTaxAmount",195],")",";",["T_WHITESPACE","\n        ",195],["T_VARIABLE","$invoice",196],["T_OBJECT_OPERATOR","->",196],["T_STRING","setBaseGrandTotal",196],"(",["T_VARIABLE","$invoice",196],["T_OBJECT_OPERATOR","->",196],["T_STRING","getBaseGrandTotal",196],"(",")",["T_WHITESPACE"," ",196],"+",["T_WHITESPACE"," ",196],["T_VARIABLE","$baseTotalWeeeAmount",196],["T_WHITESPACE"," ",196],"+",["T_WHITESPACE"," ",196],["T_VARIABLE","$baseTotalWeeeTaxAmount",196],")",";",["T_WHITESPACE","\n\n        ",196],["T_RETURN","return",198],["T_WHITESPACE"," ",198],["T_VARIABLE","$this",198],";",["T_WHITESPACE","\n    ",198],"}",["T_WHITESPACE","\n",199],"}",["T_WHITESPACE","\n",200]]
[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Copyright \u00c2\u00a9 2013-2017 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n *\/",2],["T_WHITESPACE","\n",5],["T_NAMESPACE","namespace",6],["T_WHITESPACE"," ",6],["T_STRING","Magento",6],["T_NS_SEPARATOR","\\",6],["T_STRING","MediaStorage",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Model",6],["T_NS_SEPARATOR","\\",6],["T_STRING","File",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Storage",6],";",["T_WHITESPACE","\n\n",6],["T_DOC_COMMENT","\/**\n * Class File\n *\/",8],["T_WHITESPACE","\n",10],["T_CLASS","class",11],["T_WHITESPACE"," ",11],["T_STRING","File",11],["T_WHITESPACE","\n",11],"{",["T_WHITESPACE","\n    ",12],["T_DOC_COMMENT","\/**\n     * Prefix of model events names\n     *\n     * @var string\n     *\/",13],["T_WHITESPACE","\n    ",17],["T_PROTECTED","protected",18],["T_WHITESPACE"," ",18],["T_VARIABLE","$_eventPrefix",18],["T_WHITESPACE"," ",18],"=",["T_WHITESPACE"," ",18],["T_CONSTANT_ENCAPSED_STRING","'media_storage_file_storage_file'",18],";",["T_WHITESPACE","\n\n    ",18],["T_DOC_COMMENT","\/**\n     * Store media base directory path\n     *\n     * @var string\n     *\/",20],["T_WHITESPACE","\n    ",24],["T_PROTECTED","protected",25],["T_WHITESPACE"," ",25],["T_VARIABLE","$_mediaBaseDirectory",25],["T_WHITESPACE"," ",25],"=",["T_WHITESPACE"," ",25],["T_STRING","null",25],";",["T_WHITESPACE","\n\n    ",25],["T_DOC_COMMENT","\/**\n     * Core file storage database\n     *\n     * @var \\Magento\\MediaStorage\\Helper\\File\\Storage\\Database\n     *\/",27],["T_WHITESPACE","\n    ",31],["T_PROTECTED","protected",32],["T_WHITESPACE"," ",32],["T_VARIABLE","$_storageHelper",32],["T_WHITESPACE"," ",32],"=",["T_WHITESPACE"," ",32],["T_STRING","null",32],";",["T_WHITESPACE","\n\n    ",32],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\MediaStorage\\Helper\\File\\Media\n     *\/",34],["T_WHITESPACE","\n    ",36],["T_PROTECTED","protected",37],["T_WHITESPACE"," ",37],["T_VARIABLE","$_mediaHelper",37],["T_WHITESPACE"," ",37],"=",["T_WHITESPACE"," ",37],["T_STRING","null",37],";",["T_WHITESPACE","\n\n    ",37],["T_DOC_COMMENT","\/**\n     * Data at storage\n     *\n     * @var array\n     *\/",39],["T_WHITESPACE","\n    ",43],["T_PROTECTED","protected",44],["T_WHITESPACE"," ",44],["T_VARIABLE","$_data",44],["T_WHITESPACE"," ",44],"=",["T_WHITESPACE"," ",44],["T_STRING","null",44],";",["T_WHITESPACE","\n\n    ",44],["T_DOC_COMMENT","\/**\n     * Collect errors during sync process\n     *\n     * @var string[]\n     *\/",46],["T_WHITESPACE","\n    ",50],["T_PROTECTED","protected",51],["T_WHITESPACE"," ",51],["T_VARIABLE","$_errors",51],["T_WHITESPACE"," ",51],"=",["T_WHITESPACE"," ",51],"[","]",";",["T_WHITESPACE","\n\n    ",51],["T_DOC_COMMENT","\/**\n     * @var \\Psr\\Log\\LoggerInterface\n     *\/",53],["T_WHITESPACE","\n    ",55],["T_PROTECTED","protected",56],["T_WHITESPACE"," ",56],["T_VARIABLE","$_logger",56],";",["T_WHITESPACE","\n\n    ",56],["T_DOC_COMMENT","\/**\n     * @param \\Psr\\Log\\LoggerInterface $logger\n     * @param \\Magento\\MediaStorage\\Helper\\File\\Storage\\Database $storageHelper\n     * @param \\Magento\\MediaStorage\\Helper\\File\\Media $mediaHelper\n     * @param \\Magento\\MediaStorage\\Model\\ResourceModel\\File\\Storage\\File $fileUtility\n     *\/",58],["T_WHITESPACE","\n    ",63],["T_PUBLIC","public",64],["T_WHITESPACE"," ",64],["T_FUNCTION","function",64],["T_WHITESPACE"," ",64],["T_STRING","__construct",64],"(",["T_WHITESPACE","\n        ",64],["T_NS_SEPARATOR","\\",65],["T_STRING","Psr",65],["T_NS_SEPARATOR","\\",65],["T_STRING","Log",65],["T_NS_SEPARATOR","\\",65],["T_STRING","LoggerInterface",65],["T_WHITESPACE"," ",65],["T_VARIABLE","$logger",65],",",["T_WHITESPACE","\n        ",65],["T_NS_SEPARATOR","\\",66],["T_STRING","Magento",66],["T_NS_SEPARATOR","\\",66],["T_STRING","MediaStorage",66],["T_NS_SEPARATOR","\\",66],["T_STRING","Helper",66],["T_NS_SEPARATOR","\\",66],["T_STRING","File",66],["T_NS_SEPARATOR","\\",66],["T_STRING","Storage",66],["T_NS_SEPARATOR","\\",66],["T_STRING","Database",66],["T_WHITESPACE"," ",66],["T_VARIABLE","$storageHelper",66],",",["T_WHITESPACE","\n        ",66],["T_NS_SEPARATOR","\\",67],["T_STRING","Magento",67],["T_NS_SEPARATOR","\\",67],["T_STRING","MediaStorage",67],["T_NS_SEPARATOR","\\",67],["T_STRING","Helper",67],["T_NS_SEPARATOR","\\",67],["T_STRING","File",67],["T_NS_SEPARATOR","\\",67],["T_STRING","Media",67],["T_WHITESPACE"," ",67],["T_VARIABLE","$mediaHelper",67],",",["T_WHITESPACE","\n        ",67],["T_NS_SEPARATOR","\\",68],["T_STRING","Magento",68],["T_NS_SEPARATOR","\\",68],["T_STRING","MediaStorage",68],["T_NS_SEPARATOR","\\",68],["T_STRING","Model",68],["T_NS_SEPARATOR","\\",68],["T_STRING","ResourceModel",68],["T_NS_SEPARATOR","\\",68],["T_STRING","File",68],["T_NS_SEPARATOR","\\",68],["T_STRING","Storage",68],["T_NS_SEPARATOR","\\",68],["T_STRING","File",68],["T_WHITESPACE"," ",68],["T_VARIABLE","$fileUtility",68],["T_WHITESPACE","\n    ",68],")",["T_WHITESPACE"," ",69],"{",["T_WHITESPACE","\n        ",69],["T_VARIABLE","$this",70],["T_OBJECT_OPERATOR","->",70],["T_STRING","_fileUtility",70],["T_WHITESPACE"," ",70],"=",["T_WHITESPACE"," ",70],["T_VARIABLE","$fileUtility",70],";",["T_WHITESPACE","\n        ",70],["T_VARIABLE","$this",71],["T_OBJECT_OPERATOR","->",71],["T_STRING","_storageHelper",71],["T_WHITESPACE"," ",71],"=",["T_WHITESPACE"," ",71],["T_VARIABLE","$storageHelper",71],";",["T_WHITESPACE","\n        ",71],["T_VARIABLE","$this",72],["T_OBJECT_OPERATOR","->",72],["T_STRING","_logger",72],["T_WHITESPACE"," ",72],"=",["T_WHITESPACE"," ",72],["T_VARIABLE","$logger",72],";",["T_WHITESPACE","\n        ",72],["T_VARIABLE","$this",73],["T_OBJECT_OPERATOR","->",73],["T_STRING","_mediaHelper",73],["T_WHITESPACE"," ",73],"=",["T_WHITESPACE"," ",73],["T_VARIABLE","$mediaHelper",73],";",["T_WHITESPACE","\n    ",73],"}",["T_WHITESPACE","\n\n    ",74],["T_DOC_COMMENT","\/**\n     * Initialization\n     *\n     * @return $this\n     *\/",76],["T_WHITESPACE","\n    ",80],["T_PUBLIC","public",81],["T_WHITESPACE"," ",81],["T_FUNCTION","function",81],["T_WHITESPACE"," ",81],["T_STRING","init",81],"(",")",["T_WHITESPACE","\n    ",81],"{",["T_WHITESPACE","\n        ",82],["T_RETURN","return",83],["T_WHITESPACE"," ",83],["T_VARIABLE","$this",83],";",["T_WHITESPACE","\n    ",83],"}",["T_WHITESPACE","\n\n    ",84],["T_DOC_COMMENT","\/**\n     * Return storage name\n     *\n     * @return \\Magento\\Framework\\Phrase\n     *\/",86],["T_WHITESPACE","\n    ",90],["T_PUBLIC","public",91],["T_WHITESPACE"," ",91],["T_FUNCTION","function",91],["T_WHITESPACE"," ",91],["T_STRING","getStorageName",91],"(",")",["T_WHITESPACE","\n    ",91],"{",["T_WHITESPACE","\n        ",92],["T_RETURN","return",93],["T_WHITESPACE"," ",93],["T_STRING","__",93],"(",["T_CONSTANT_ENCAPSED_STRING","'File system'",93],")",";",["T_WHITESPACE","\n    ",93],"}",["T_WHITESPACE","\n\n    ",94],["T_DOC_COMMENT","\/**\n     * Get files and directories from storage\n     *\n     * @return array\n     *\/",96],["T_WHITESPACE","\n    ",100],["T_PUBLIC","public",101],["T_WHITESPACE"," ",101],["T_FUNCTION","function",101],["T_WHITESPACE"," ",101],["T_STRING","getStorageData",101],"(",")",["T_WHITESPACE","\n    ",101],"{",["T_WHITESPACE","\n        ",102],["T_RETURN","return",103],["T_WHITESPACE"," ",103],["T_VARIABLE","$this",103],["T_OBJECT_OPERATOR","->",103],["T_STRING","_fileUtility",103],["T_OBJECT_OPERATOR","->",103],["T_STRING","getStorageData",103],"(",")",";",["T_WHITESPACE","\n    ",103],"}",["T_WHITESPACE","\n\n    ",104],["T_DOC_COMMENT","\/**\n     * Check if there was errors during sync process\n     *\n     * @return bool\n     *\/",106],["T_WHITESPACE","\n    ",110],["T_PUBLIC","public",111],["T_WHITESPACE"," ",111],["T_FUNCTION","function",111],["T_WHITESPACE"," ",111],["T_STRING","hasErrors",111],"(",")",["T_WHITESPACE","\n    ",111],"{",["T_WHITESPACE","\n        ",112],["T_RETURN","return",113],["T_WHITESPACE"," ",113],"!",["T_EMPTY","empty",113],"(",["T_VARIABLE","$this",113],["T_OBJECT_OPERATOR","->",113],["T_STRING","_errors",113],")",";",["T_WHITESPACE","\n    ",113],"}",["T_WHITESPACE","\n\n    ",114],["T_DOC_COMMENT","\/**\n     * Clear files and directories in storage\n     *\n     * @return $this\n     *\/",116],["T_WHITESPACE","\n    ",120],["T_PUBLIC","public",121],["T_WHITESPACE"," ",121],["T_FUNCTION","function",121],["T_WHITESPACE"," ",121],["T_STRING","clear",121],"(",")",["T_WHITESPACE","\n    ",121],"{",["T_WHITESPACE","\n        ",122],["T_VARIABLE","$this",123],["T_OBJECT_OPERATOR","->",123],["T_STRING","_fileUtility",123],["T_OBJECT_OPERATOR","->",123],["T_STRING","clear",123],"(",")",";",["T_WHITESPACE","\n        ",123],["T_RETURN","return",124],["T_WHITESPACE"," ",124],["T_VARIABLE","$this",124],";",["T_WHITESPACE","\n    ",124],"}",["T_WHITESPACE","\n\n    ",125],["T_DOC_COMMENT","\/**\n     * Collect files and directories from storage\n     *\n     * @param  int $offset\n     * @param  int $count\n     * @param  string $type\n     * @return array|bool\n     * @SuppressWarnings(PHPMD.NPathComplexity)\n     *\/",127],["T_WHITESPACE","\n    ",135],["T_PUBLIC","public",136],["T_WHITESPACE"," ",136],["T_FUNCTION","function",136],["T_WHITESPACE"," ",136],["T_STRING","collectData",136],"(",["T_VARIABLE","$offset",136],["T_WHITESPACE"," ",136],"=",["T_WHITESPACE"," ",136],["T_LNUMBER","0",136],",",["T_WHITESPACE"," ",136],["T_VARIABLE","$count",136],["T_WHITESPACE"," ",136],"=",["T_WHITESPACE"," ",136],["T_LNUMBER","100",136],",",["T_WHITESPACE"," ",136],["T_VARIABLE","$type",136],["T_WHITESPACE"," ",136],"=",["T_WHITESPACE"," ",136],["T_CONSTANT_ENCAPSED_STRING","'files'",136],")",["T_WHITESPACE","\n    ",136],"{",["T_WHITESPACE","\n        ",137],["T_IF","if",138],["T_WHITESPACE"," ",138],"(","!",["T_STRING","in_array",138],"(",["T_VARIABLE","$type",138],",",["T_WHITESPACE"," ",138],"[",["T_CONSTANT_ENCAPSED_STRING","'files'",138],",",["T_WHITESPACE"," ",138],["T_CONSTANT_ENCAPSED_STRING","'directories'",138],"]",")",")",["T_WHITESPACE"," ",138],"{",["T_WHITESPACE","\n            ",138],["T_RETURN","return",139],["T_WHITESPACE"," ",139],["T_STRING","false",139],";",["T_WHITESPACE","\n        ",139],"}",["T_WHITESPACE","\n\n        ",140],["T_VARIABLE","$offset",142],["T_WHITESPACE"," ",142],"=",["T_WHITESPACE"," ",142],["T_INT_CAST","(int)",142],["T_VARIABLE","$offset",142],["T_WHITESPACE"," ",142],["T_IS_GREATER_OR_EQUAL",">=",142],["T_WHITESPACE"," ",142],["T_LNUMBER","0",142],["T_WHITESPACE"," ",142],"?",["T_WHITESPACE"," ",142],["T_INT_CAST","(int)",142],["T_VARIABLE","$offset",142],["T_WHITESPACE"," ",142],":",["T_WHITESPACE"," ",142],["T_LNUMBER","0",142],";",["T_WHITESPACE","\n        ",142],["T_VARIABLE","$count",143],["T_WHITESPACE"," ",143],"=",["T_WHITESPACE"," ",143],["T_INT_CAST","(int)",143],["T_VARIABLE","$count",143],["T_WHITESPACE"," ",143],["T_IS_GREATER_OR_EQUAL",">=",143],["T_WHITESPACE"," ",143],["T_LNUMBER","1",143],["T_WHITESPACE"," ",143],"?",["T_WHITESPACE"," ",143],["T_INT_CAST","(int)",143],["T_VARIABLE","$count",143],["T_WHITESPACE"," ",143],":",["T_WHITESPACE"," ",143],["T_LNUMBER","1",143],";",["T_WHITESPACE","\n\n        ",143],["T_IF","if",145],["T_WHITESPACE"," ",145],"(",["T_EMPTY","empty",145],"(",["T_VARIABLE","$this",145],["T_OBJECT_OPERATOR","->",145],["T_STRING","_data",145],")",")",["T_WHITESPACE"," ",145],"{",["T_WHITESPACE","\n            ",145],["T_VARIABLE","$this",146],["T_OBJECT_OPERATOR","->",146],["T_STRING","_data",146],["T_WHITESPACE"," ",146],"=",["T_WHITESPACE"," ",146],["T_VARIABLE","$this",146],["T_OBJECT_OPERATOR","->",146],["T_STRING","getStorageData",146],"(",")",";",["T_WHITESPACE","\n        ",146],"}",["T_WHITESPACE","\n\n        ",147],["T_IF","if",149],["T_WHITESPACE"," ",149],"(","!",["T_STRING","array_key_exists",149],"(",["T_VARIABLE","$type",149],",",["T_WHITESPACE"," ",149],["T_VARIABLE","$this",149],["T_OBJECT_OPERATOR","->",149],["T_STRING","_data",149],")",")",["T_WHITESPACE"," ",149],"{",["T_WHITESPACE","\n            ",149],["T_RETURN","return",150],["T_WHITESPACE"," ",150],["T_STRING","false",150],";",["T_WHITESPACE","\n        ",150],"}",["T_WHITESPACE","\n        ",151],["T_VARIABLE","$slice",152],["T_WHITESPACE"," ",152],"=",["T_WHITESPACE"," ",152],["T_STRING","array_slice",152],"(",["T_VARIABLE","$this",152],["T_OBJECT_OPERATOR","->",152],["T_STRING","_data",152],"[",["T_VARIABLE","$type",152],"]",",",["T_WHITESPACE"," ",152],["T_VARIABLE","$offset",152],",",["T_WHITESPACE"," ",152],["T_VARIABLE","$count",152],")",";",["T_WHITESPACE","\n        ",152],["T_RETURN","return",153],["T_WHITESPACE"," ",153],["T_VARIABLE","$slice",153],["T_WHITESPACE"," ",153],"?",":",["T_WHITESPACE"," ",153],["T_STRING","false",153],";",["T_WHITESPACE","\n    ",153],"}",["T_WHITESPACE","\n\n    ",154],["T_DOC_COMMENT","\/**\n     * Retrieve connection name saved at config\n     *\n     * @return null\n     *\/",156],["T_WHITESPACE","\n    ",160],["T_PUBLIC","public",161],["T_WHITESPACE"," ",161],["T_FUNCTION","function",161],["T_WHITESPACE"," ",161],["T_STRING","getConfigConnectionName",161],"(",")",["T_WHITESPACE","\n    ",161],"{",["T_WHITESPACE","\n        ",162],["T_RETURN","return",163],["T_WHITESPACE"," ",163],["T_STRING","null",163],";",["T_WHITESPACE","\n    ",163],"}",["T_WHITESPACE","\n\n    ",164],["T_DOC_COMMENT","\/**\n     * Retrieve connection name\n     *\n     * @return null\n     *\/",166],["T_WHITESPACE","\n    ",170],["T_PUBLIC","public",171],["T_WHITESPACE"," ",171],["T_FUNCTION","function",171],["T_WHITESPACE"," ",171],["T_STRING","getConnectionName",171],"(",")",["T_WHITESPACE","\n    ",171],"{",["T_WHITESPACE","\n        ",172],["T_RETURN","return",173],["T_WHITESPACE"," ",173],["T_STRING","null",173],";",["T_WHITESPACE","\n    ",173],"}",["T_WHITESPACE","\n\n    ",174],["T_DOC_COMMENT","\/**\n     * Export directories list from storage\n     *\n     * @param  int $offset\n     * @param  int $count\n     * @return array|bool\n     *\/",176],["T_WHITESPACE","\n    ",182],["T_PUBLIC","public",183],["T_WHITESPACE"," ",183],["T_FUNCTION","function",183],["T_WHITESPACE"," ",183],["T_STRING","exportDirectories",183],"(",["T_VARIABLE","$offset",183],["T_WHITESPACE"," ",183],"=",["T_WHITESPACE"," ",183],["T_LNUMBER","0",183],",",["T_WHITESPACE"," ",183],["T_VARIABLE","$count",183],["T_WHITESPACE"," ",183],"=",["T_WHITESPACE"," ",183],["T_LNUMBER","100",183],")",["T_WHITESPACE","\n    ",183],"{",["T_WHITESPACE","\n        ",184],["T_RETURN","return",185],["T_WHITESPACE"," ",185],["T_VARIABLE","$this",185],["T_OBJECT_OPERATOR","->",185],["T_STRING","collectData",185],"(",["T_VARIABLE","$offset",185],",",["T_WHITESPACE"," ",185],["T_VARIABLE","$count",185],",",["T_WHITESPACE"," ",185],["T_CONSTANT_ENCAPSED_STRING","'directories'",185],")",";",["T_WHITESPACE","\n    ",185],"}",["T_WHITESPACE","\n\n    ",186],["T_DOC_COMMENT","\/**\n     * Export files list in defined range\n     *\n     * @param  int $offset\n     * @param  int $count\n     * @return array|bool\n     *\/",188],["T_WHITESPACE","\n    ",194],["T_PUBLIC","public",195],["T_WHITESPACE"," ",195],["T_FUNCTION","function",195],["T_WHITESPACE"," ",195],["T_STRING","exportFiles",195],"(",["T_VARIABLE","$offset",195],["T_WHITESPACE"," ",195],"=",["T_WHITESPACE"," ",195],["T_LNUMBER","0",195],",",["T_WHITESPACE"," ",195],["T_VARIABLE","$count",195],["T_WHITESPACE"," ",195],"=",["T_WHITESPACE"," ",195],["T_LNUMBER","1",195],")",["T_WHITESPACE","\n    ",195],"{",["T_WHITESPACE","\n        ",196],["T_VARIABLE","$slice",197],["T_WHITESPACE"," ",197],"=",["T_WHITESPACE"," ",197],["T_VARIABLE","$this",197],["T_OBJECT_OPERATOR","->",197],["T_STRING","collectData",197],"(",["T_VARIABLE","$offset",197],",",["T_WHITESPACE"," ",197],["T_VARIABLE","$count",197],",",["T_WHITESPACE"," ",197],["T_CONSTANT_ENCAPSED_STRING","'files'",197],")",";",["T_WHITESPACE","\n\n        ",197],["T_IF","if",199],["T_WHITESPACE"," ",199],"(","!",["T_VARIABLE","$slice",199],")",["T_WHITESPACE"," ",199],"{",["T_WHITESPACE","\n            ",199],["T_RETURN","return",200],["T_WHITESPACE"," ",200],["T_STRING","false",200],";",["T_WHITESPACE","\n        ",200],"}",["T_WHITESPACE","\n\n        ",201],["T_VARIABLE","$result",203],["T_WHITESPACE"," ",203],"=",["T_WHITESPACE"," ",203],"[","]",";",["T_WHITESPACE","\n        ",203],["T_FOREACH","foreach",204],["T_WHITESPACE"," ",204],"(",["T_VARIABLE","$slice",204],["T_WHITESPACE"," ",204],["T_AS","as",204],["T_WHITESPACE"," ",204],["T_VARIABLE","$fileName",204],")",["T_WHITESPACE"," ",204],"{",["T_WHITESPACE","\n            ",204],["T_TRY","try",205],["T_WHITESPACE"," ",205],"{",["T_WHITESPACE","\n                ",205],["T_VARIABLE","$fileInfo",206],["T_WHITESPACE"," ",206],"=",["T_WHITESPACE"," ",206],["T_VARIABLE","$this",206],["T_OBJECT_OPERATOR","->",206],["T_STRING","_mediaHelper",206],["T_OBJECT_OPERATOR","->",206],["T_STRING","collectFileInfo",206],"(",["T_VARIABLE","$this",206],["T_OBJECT_OPERATOR","->",206],["T_STRING","getMediaBaseDirectory",206],"(",")",",",["T_WHITESPACE"," ",206],["T_VARIABLE","$fileName",206],")",";",["T_WHITESPACE","\n            ",206],"}",["T_WHITESPACE"," ",207],["T_CATCH","catch",207],["T_WHITESPACE"," ",207],"(",["T_NS_SEPARATOR","\\",207],["T_STRING","Exception",207],["T_WHITESPACE"," ",207],["T_VARIABLE","$e",207],")",["T_WHITESPACE"," ",207],"{",["T_WHITESPACE","\n                ",207],["T_VARIABLE","$this",208],["T_OBJECT_OPERATOR","->",208],["T_STRING","_logger",208],["T_OBJECT_OPERATOR","->",208],["T_STRING","critical",208],"(",["T_VARIABLE","$e",208],")",";",["T_WHITESPACE","\n                ",208],["T_CONTINUE","continue",209],";",["T_WHITESPACE","\n            ",209],"}",["T_WHITESPACE","\n\n            ",210],["T_VARIABLE","$result",212],"[","]",["T_WHITESPACE"," ",212],"=",["T_WHITESPACE"," ",212],["T_VARIABLE","$fileInfo",212],";",["T_WHITESPACE","\n        ",212],"}",["T_WHITESPACE","\n\n        ",213],["T_RETURN","return",215],["T_WHITESPACE"," ",215],["T_VARIABLE","$result",215],";",["T_WHITESPACE","\n    ",215],"}",["T_WHITESPACE","\n\n    ",216],["T_DOC_COMMENT","\/**\n     * Import entities to storage\n     *\n     * @param  array $data\n     * @param  string $callback\n     * @return $this\n     *\/",218],["T_WHITESPACE","\n    ",224],["T_PUBLIC","public",225],["T_WHITESPACE"," ",225],["T_FUNCTION","function",225],["T_WHITESPACE"," ",225],["T_STRING","import",225],"(",["T_VARIABLE","$data",225],",",["T_WHITESPACE"," ",225],["T_VARIABLE","$callback",225],")",["T_WHITESPACE","\n    ",225],"{",["T_WHITESPACE","\n        ",226],["T_IF","if",227],["T_WHITESPACE"," ",227],"(","!",["T_STRING","is_array",227],"(",["T_VARIABLE","$data",227],")",["T_WHITESPACE"," ",227],["T_BOOLEAN_OR","||",227],["T_WHITESPACE"," ",227],"!",["T_STRING","method_exists",227],"(",["T_VARIABLE","$this",227],",",["T_WHITESPACE"," ",227],["T_VARIABLE","$callback",227],")",")",["T_WHITESPACE"," ",227],"{",["T_WHITESPACE","\n            ",227],["T_RETURN","return",228],["T_WHITESPACE"," ",228],["T_VARIABLE","$this",228],";",["T_WHITESPACE","\n        ",228],"}",["T_WHITESPACE","\n\n        ",229],["T_FOREACH","foreach",231],["T_WHITESPACE"," ",231],"(",["T_VARIABLE","$data",231],["T_WHITESPACE"," ",231],["T_AS","as",231],["T_WHITESPACE"," ",231],["T_VARIABLE","$part",231],")",["T_WHITESPACE"," ",231],"{",["T_WHITESPACE","\n            ",231],["T_TRY","try",232],["T_WHITESPACE"," ",232],"{",["T_WHITESPACE","\n                ",232],["T_VARIABLE","$this",233],["T_OBJECT_OPERATOR","->",233],"{",["T_VARIABLE","$callback",233],"}","(",["T_VARIABLE","$part",233],")",";",["T_WHITESPACE","\n            ",233],"}",["T_WHITESPACE"," ",234],["T_CATCH","catch",234],["T_WHITESPACE"," ",234],"(",["T_NS_SEPARATOR","\\",234],["T_STRING","Exception",234],["T_WHITESPACE"," ",234],["T_VARIABLE","$e",234],")",["T_WHITESPACE"," ",234],"{",["T_WHITESPACE","\n                ",234],["T_VARIABLE","$this",235],["T_OBJECT_OPERATOR","->",235],["T_STRING","_errors",235],"[","]",["T_WHITESPACE"," ",235],"=",["T_WHITESPACE"," ",235],["T_VARIABLE","$e",235],["T_OBJECT_OPERATOR","->",235],["T_STRING","getMessage",235],"(",")",";",["T_WHITESPACE","\n                ",235],["T_VARIABLE","$this",236],["T_OBJECT_OPERATOR","->",236],["T_STRING","_logger",236],["T_OBJECT_OPERATOR","->",236],["T_STRING","critical",236],"(",["T_VARIABLE","$e",236],")",";",["T_WHITESPACE","\n            ",236],"}",["T_WHITESPACE","\n        ",237],"}",["T_WHITESPACE","\n\n        ",238],["T_RETURN","return",240],["T_WHITESPACE"," ",240],["T_VARIABLE","$this",240],";",["T_WHITESPACE","\n    ",240],"}",["T_WHITESPACE","\n\n    ",241],["T_DOC_COMMENT","\/**\n     * Import directories to storage\n     *\n     * @param  array $dirs\n     * @return $this\n     *\/",243],["T_WHITESPACE","\n    ",248],["T_PUBLIC","public",249],["T_WHITESPACE"," ",249],["T_FUNCTION","function",249],["T_WHITESPACE"," ",249],["T_STRING","importDirectories",249],"(",["T_VARIABLE","$dirs",249],")",["T_WHITESPACE","\n    ",249],"{",["T_WHITESPACE","\n        ",250],["T_RETURN","return",251],["T_WHITESPACE"," ",251],["T_VARIABLE","$this",251],["T_OBJECT_OPERATOR","->",251],["T_STRING","import",251],"(",["T_VARIABLE","$dirs",251],",",["T_WHITESPACE"," ",251],["T_CONSTANT_ENCAPSED_STRING","'saveDir'",251],")",";",["T_WHITESPACE","\n    ",251],"}",["T_WHITESPACE","\n\n    ",252],["T_DOC_COMMENT","\/**\n     * Import files list\n     *\n     * @param  array $files\n     * @return $this\n     *\/",254],["T_WHITESPACE","\n    ",259],["T_PUBLIC","public",260],["T_WHITESPACE"," ",260],["T_FUNCTION","function",260],["T_WHITESPACE"," ",260],["T_STRING","importFiles",260],"(",["T_VARIABLE","$files",260],")",["T_WHITESPACE","\n    ",260],"{",["T_WHITESPACE","\n        ",261],["T_RETURN","return",262],["T_WHITESPACE"," ",262],["T_VARIABLE","$this",262],["T_OBJECT_OPERATOR","->",262],["T_STRING","import",262],"(",["T_VARIABLE","$files",262],",",["T_WHITESPACE"," ",262],["T_CONSTANT_ENCAPSED_STRING","'saveFile'",262],")",";",["T_WHITESPACE","\n    ",262],"}",["T_WHITESPACE","\n\n    ",263],["T_DOC_COMMENT","\/**\n     * Save directory to storage\n     *\n     * @param  array $dir\n     * @return bool\n     *\/",265],["T_WHITESPACE","\n    ",270],["T_PUBLIC","public",271],["T_WHITESPACE"," ",271],["T_FUNCTION","function",271],["T_WHITESPACE"," ",271],["T_STRING","saveDir",271],"(",["T_VARIABLE","$dir",271],")",["T_WHITESPACE","\n    ",271],"{",["T_WHITESPACE","\n        ",272],["T_RETURN","return",273],["T_WHITESPACE"," ",273],["T_VARIABLE","$this",273],["T_OBJECT_OPERATOR","->",273],["T_STRING","_fileUtility",273],["T_OBJECT_OPERATOR","->",273],["T_STRING","saveDir",273],"(",["T_VARIABLE","$dir",273],")",";",["T_WHITESPACE","\n    ",273],"}",["T_WHITESPACE","\n\n    ",274],["T_DOC_COMMENT","\/**\n     * Save file to storage\n     *\n     * @param  array $file\n     * @param  bool $overwrite\n     * @throws \\Magento\\Framework\\Exception\\LocalizedException\n     * @return bool\n     *\/",276],["T_WHITESPACE","\n    ",283],["T_PUBLIC","public",284],["T_WHITESPACE"," ",284],["T_FUNCTION","function",284],["T_WHITESPACE"," ",284],["T_STRING","saveFile",284],"(",["T_VARIABLE","$file",284],",",["T_WHITESPACE"," ",284],["T_VARIABLE","$overwrite",284],["T_WHITESPACE"," ",284],"=",["T_WHITESPACE"," ",284],["T_STRING","true",284],")",["T_WHITESPACE","\n    ",284],"{",["T_WHITESPACE","\n        ",285],["T_IF","if",286],["T_WHITESPACE"," ",286],"(",["T_ISSET","isset",286],"(",["T_WHITESPACE","\n            ",286],["T_VARIABLE","$file",287],"[",["T_CONSTANT_ENCAPSED_STRING","'filename'",287],"]",["T_WHITESPACE","\n        ",287],")",["T_WHITESPACE"," ",288],["T_BOOLEAN_AND","&&",288],["T_WHITESPACE"," ",288],"!",["T_EMPTY","empty",288],"(",["T_VARIABLE","$file",288],"[",["T_CONSTANT_ENCAPSED_STRING","'filename'",288],"]",")",["T_WHITESPACE"," ",288],["T_BOOLEAN_AND","&&",288],["T_WHITESPACE"," ",288],["T_ISSET","isset",288],"(",["T_WHITESPACE","\n            ",288],["T_VARIABLE","$file",289],"[",["T_CONSTANT_ENCAPSED_STRING","'content'",289],"]",["T_WHITESPACE","\n        ",289],")",["T_WHITESPACE"," ",290],["T_BOOLEAN_AND","&&",290],["T_WHITESPACE"," ",290],"!",["T_EMPTY","empty",290],"(",["T_VARIABLE","$file",290],"[",["T_CONSTANT_ENCAPSED_STRING","'content'",290],"]",")",["T_WHITESPACE","\n        ",290],")",["T_WHITESPACE"," ",291],"{",["T_WHITESPACE","\n            ",291],["T_TRY","try",292],["T_WHITESPACE"," ",292],"{",["T_WHITESPACE","\n                ",292],["T_VARIABLE","$filename",293],["T_WHITESPACE"," ",293],"=",["T_WHITESPACE"," ",293],["T_ISSET","isset",293],"(",["T_WHITESPACE","\n                    ",293],["T_VARIABLE","$file",294],"[",["T_CONSTANT_ENCAPSED_STRING","'directory'",294],"]",["T_WHITESPACE","\n                ",294],")",["T_WHITESPACE"," ",295],["T_BOOLEAN_AND","&&",295],["T_WHITESPACE"," ",295],"!",["T_EMPTY","empty",295],"(",["T_VARIABLE","$file",295],"[",["T_CONSTANT_ENCAPSED_STRING","'directory'",295],"]",")",["T_WHITESPACE"," ",295],"?",["T_WHITESPACE"," ",295],["T_VARIABLE","$file",295],"[",["T_CONSTANT_ENCAPSED_STRING","'directory'",295],"]",["T_WHITESPACE"," ",295],".",["T_WHITESPACE"," ",295],["T_CONSTANT_ENCAPSED_STRING","'\/'",295],["T_WHITESPACE"," ",295],".",["T_WHITESPACE"," ",295],["T_VARIABLE","$file",295],"[",["T_CONSTANT_ENCAPSED_STRING","'filename'",295],"]",["T_WHITESPACE"," ",295],":",["T_WHITESPACE"," ",295],["T_VARIABLE","$file",295],"[",["T_CONSTANT_ENCAPSED_STRING","'filename'",295],"]",";",["T_WHITESPACE","\n\n                ",295],["T_RETURN","return",297],["T_WHITESPACE"," ",297],["T_VARIABLE","$this",297],["T_OBJECT_OPERATOR","->",297],["T_STRING","_fileUtility",297],["T_OBJECT_OPERATOR","->",297],["T_STRING","saveFile",297],"(",["T_VARIABLE","$filename",297],",",["T_WHITESPACE"," ",297],["T_VARIABLE","$file",297],"[",["T_CONSTANT_ENCAPSED_STRING","'content'",297],"]",",",["T_WHITESPACE"," ",297],["T_VARIABLE","$overwrite",297],")",";",["T_WHITESPACE","\n            ",297],"}",["T_WHITESPACE"," ",298],["T_CATCH","catch",298],["T_WHITESPACE"," ",298],"(",["T_NS_SEPARATOR","\\",298],["T_STRING","Exception",298],["T_WHITESPACE"," ",298],["T_VARIABLE","$e",298],")",["T_WHITESPACE"," ",298],"{",["T_WHITESPACE","\n                ",298],["T_VARIABLE","$this",299],["T_OBJECT_OPERATOR","->",299],["T_STRING","_logger",299],["T_OBJECT_OPERATOR","->",299],["T_STRING","critical",299],"(",["T_VARIABLE","$e",299],")",";",["T_WHITESPACE","\n                ",299],["T_THROW","throw",300],["T_WHITESPACE"," ",300],["T_NEW","new",300],["T_WHITESPACE"," ",300],["T_NS_SEPARATOR","\\",300],["T_STRING","Magento",300],["T_NS_SEPARATOR","\\",300],["T_STRING","Framework",300],["T_NS_SEPARATOR","\\",300],["T_STRING","Exception",300],["T_NS_SEPARATOR","\\",300],["T_STRING","LocalizedException",300],"(",["T_WHITESPACE","\n                    ",300],["T_STRING","__",301],"(",["T_CONSTANT_ENCAPSED_STRING","'Unable to save file \"%1\" at \"%2\"'",301],",",["T_WHITESPACE"," ",301],["T_VARIABLE","$file",301],"[",["T_CONSTANT_ENCAPSED_STRING","'filename'",301],"]",",",["T_WHITESPACE"," ",301],["T_VARIABLE","$file",301],"[",["T_CONSTANT_ENCAPSED_STRING","'directory'",301],"]",")",["T_WHITESPACE","\n                ",301],")",";",["T_WHITESPACE","\n            ",302],"}",["T_WHITESPACE","\n        ",303],"}",["T_WHITESPACE"," ",304],["T_ELSE","else",304],["T_WHITESPACE"," ",304],"{",["T_WHITESPACE","\n            ",304],["T_THROW","throw",305],["T_WHITESPACE"," ",305],["T_NEW","new",305],["T_WHITESPACE"," ",305],["T_NS_SEPARATOR","\\",305],["T_STRING","Magento",305],["T_NS_SEPARATOR","\\",305],["T_STRING","Framework",305],["T_NS_SEPARATOR","\\",305],["T_STRING","Exception",305],["T_NS_SEPARATOR","\\",305],["T_STRING","LocalizedException",305],"(",["T_STRING","__",305],"(",["T_CONSTANT_ENCAPSED_STRING","'Wrong file info format'",305],")",")",";",["T_WHITESPACE","\n        ",305],"}",["T_WHITESPACE","\n\n        ",306],["T_RETURN","return",308],["T_WHITESPACE"," ",308],["T_STRING","false",308],";",["T_WHITESPACE","\n    ",308],"}",["T_WHITESPACE","\n\n    ",309],["T_DOC_COMMENT","\/**\n     * Retrieve media base directory path\n     *\n     * @return string\n     *\/",311],["T_WHITESPACE","\n    ",315],["T_PUBLIC","public",316],["T_WHITESPACE"," ",316],["T_FUNCTION","function",316],["T_WHITESPACE"," ",316],["T_STRING","getMediaBaseDirectory",316],"(",")",["T_WHITESPACE","\n    ",316],"{",["T_WHITESPACE","\n        ",317],["T_IF","if",318],["T_WHITESPACE"," ",318],"(",["T_VARIABLE","$this",318],["T_OBJECT_OPERATOR","->",318],["T_STRING","_mediaBaseDirectory",318],["T_WHITESPACE"," ",318],["T_IS_IDENTICAL","===",318],["T_WHITESPACE"," ",318],["T_STRING","null",318],")",["T_WHITESPACE"," ",318],"{",["T_WHITESPACE","\n            ",318],["T_VARIABLE","$this",319],["T_OBJECT_OPERATOR","->",319],["T_STRING","_mediaBaseDirectory",319],["T_WHITESPACE"," ",319],"=",["T_WHITESPACE"," ",319],["T_VARIABLE","$this",319],["T_OBJECT_OPERATOR","->",319],["T_STRING","_storageHelper",319],["T_OBJECT_OPERATOR","->",319],["T_STRING","getMediaBaseDir",319],"(",")",";",["T_WHITESPACE","\n        ",319],"}",["T_WHITESPACE","\n        ",320],["T_RETURN","return",321],["T_WHITESPACE"," ",321],["T_VARIABLE","$this",321],["T_OBJECT_OPERATOR","->",321],["T_STRING","_mediaBaseDirectory",321],";",["T_WHITESPACE","\n    ",321],"}",["T_WHITESPACE","\n",322],"}",["T_WHITESPACE","\n",323]]
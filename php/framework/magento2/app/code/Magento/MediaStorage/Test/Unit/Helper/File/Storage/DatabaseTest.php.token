[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Copyright \u00c2\u00a9 2013-2017 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n *\/",2],["T_WHITESPACE","\n",5],["T_NAMESPACE","namespace",6],["T_WHITESPACE"," ",6],["T_STRING","Magento",6],["T_NS_SEPARATOR","\\",6],["T_STRING","MediaStorage",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Test",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Unit",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Helper",6],["T_NS_SEPARATOR","\\",6],["T_STRING","File",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Storage",6],";",["T_WHITESPACE","\n\n",6],["T_USE","use",8],["T_WHITESPACE"," ",8],["T_STRING","Magento",8],["T_NS_SEPARATOR","\\",8],["T_STRING","MediaStorage",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Helper",8],["T_NS_SEPARATOR","\\",8],["T_STRING","File",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Storage",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Database",8],";",["T_WHITESPACE","\n",8],["T_USE","use",9],["T_WHITESPACE"," ",9],["T_STRING","Magento",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Framework",9],["T_NS_SEPARATOR","\\",9],["T_STRING","App",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Filesystem",9],["T_NS_SEPARATOR","\\",9],["T_STRING","DirectoryList",9],";",["T_WHITESPACE","\n\n",9],["T_CLASS","class",11],["T_WHITESPACE"," ",11],["T_STRING","DatabaseTest",11],["T_WHITESPACE"," ",11],["T_EXTENDS","extends",11],["T_WHITESPACE"," ",11],["T_NS_SEPARATOR","\\",11],["T_STRING","PHPUnit_Framework_TestCase",11],["T_WHITESPACE","\n",11],"{",["T_WHITESPACE","\n    ",12],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Framework\\TestFramework\\Unit\\Helper\\ObjectManager\n     *\/",13],["T_WHITESPACE","\n    ",15],["T_PROTECTED","protected",16],["T_WHITESPACE"," ",16],["T_VARIABLE","$objectManager",16],";",["T_WHITESPACE","\n\n    ",16],["T_DOC_COMMENT","\/** @var \\Magento\\MediaStorage\\Model\\File\\Storage\\DatabaseFactory | \\PHPUnit_Framework_MockObject_MockObject  *\/",18],["T_WHITESPACE","\n    ",18],["T_PROTECTED","protected",19],["T_WHITESPACE"," ",19],["T_VARIABLE","$dbStorageFactoryMock",19],";",["T_WHITESPACE","\n\n    ",19],["T_DOC_COMMENT","\/** @var \\Magento\\Framework\\Filesystem | \\PHPUnit_Framework_MockObject_MockObject  *\/",21],["T_WHITESPACE","\n    ",21],["T_PROTECTED","protected",22],["T_WHITESPACE"," ",22],["T_VARIABLE","$filesystemMock",22],";",["T_WHITESPACE","\n\n    ",22],["T_DOC_COMMENT","\/** @var \\Magento\\MediaStorage\\Model\\File\\Storage\\File | \\PHPUnit_Framework_MockObject_MockObject  *\/",24],["T_WHITESPACE","\n    ",24],["T_PROTECTED","protected",25],["T_WHITESPACE"," ",25],["T_VARIABLE","$fileStorageMock",25],";",["T_WHITESPACE","\n\n    ",25],["T_DOC_COMMENT","\/** @var \\Magento\\Framework\\App\\Config\\ScopeConfigInterface | \\PHPUnit_Framework_MockObject_MockObject  *\/",27],["T_WHITESPACE","\n    ",27],["T_PROTECTED","protected",28],["T_WHITESPACE"," ",28],["T_VARIABLE","$configMock",28],";",["T_WHITESPACE","\n\n    ",28],["T_DOC_COMMENT","\/** @var Database *\/",30],["T_WHITESPACE","\n    ",30],["T_PROTECTED","protected",31],["T_WHITESPACE"," ",31],["T_VARIABLE","$helper",31],";",["T_WHITESPACE","\n\n    ",31],["T_PROTECTED","protected",33],["T_WHITESPACE"," ",33],["T_FUNCTION","function",33],["T_WHITESPACE"," ",33],["T_STRING","setUp",33],"(",")",["T_WHITESPACE","\n    ",33],"{",["T_WHITESPACE","\n        ",34],["T_VARIABLE","$this",35],["T_OBJECT_OPERATOR","->",35],["T_STRING","dbStorageFactoryMock",35],["T_WHITESPACE"," ",35],"=",["T_WHITESPACE"," ",35],["T_VARIABLE","$this",35],["T_OBJECT_OPERATOR","->",35],["T_STRING","getMockBuilder",35],"(",["T_WHITESPACE","\n            ",35],["T_NS_SEPARATOR","\\",36],["T_STRING","Magento",36],["T_NS_SEPARATOR","\\",36],["T_STRING","MediaStorage",36],["T_NS_SEPARATOR","\\",36],["T_STRING","Model",36],["T_NS_SEPARATOR","\\",36],["T_STRING","File",36],["T_NS_SEPARATOR","\\",36],["T_STRING","Storage",36],["T_NS_SEPARATOR","\\",36],["T_STRING","DatabaseFactory",36],["T_DOUBLE_COLON","::",36],["T_CLASS","class",36],["T_WHITESPACE","\n        ",36],")",["T_OBJECT_OPERATOR","->",37],["T_STRING","disableOriginalConstructor",37],"(",")",["T_WHITESPACE","\n            ",37],["T_OBJECT_OPERATOR","->",38],["T_STRING","setMethods",38],"(","[",["T_CONSTANT_ENCAPSED_STRING","'create'",38],"]",")",["T_WHITESPACE","\n            ",38],["T_OBJECT_OPERATOR","->",39],["T_STRING","getMock",39],"(",")",";",["T_WHITESPACE","\n        ",39],["T_VARIABLE","$this",40],["T_OBJECT_OPERATOR","->",40],["T_STRING","objectManager",40],["T_WHITESPACE"," ",40],"=",["T_WHITESPACE"," ",40],["T_NEW","new",40],["T_WHITESPACE"," ",40],["T_NS_SEPARATOR","\\",40],["T_STRING","Magento",40],["T_NS_SEPARATOR","\\",40],["T_STRING","Framework",40],["T_NS_SEPARATOR","\\",40],["T_STRING","TestFramework",40],["T_NS_SEPARATOR","\\",40],["T_STRING","Unit",40],["T_NS_SEPARATOR","\\",40],["T_STRING","Helper",40],["T_NS_SEPARATOR","\\",40],["T_STRING","ObjectManager",40],"(",["T_VARIABLE","$this",40],")",";",["T_WHITESPACE","\n        ",40],["T_VARIABLE","$className",41],["T_WHITESPACE"," ",41],"=",["T_WHITESPACE"," ",41],["T_NS_SEPARATOR","\\",41],["T_STRING","Magento",41],["T_NS_SEPARATOR","\\",41],["T_STRING","MediaStorage",41],["T_NS_SEPARATOR","\\",41],["T_STRING","Helper",41],["T_NS_SEPARATOR","\\",41],["T_STRING","File",41],["T_NS_SEPARATOR","\\",41],["T_STRING","Storage",41],["T_NS_SEPARATOR","\\",41],["T_STRING","Database",41],["T_DOUBLE_COLON","::",41],["T_CLASS","class",41],";",["T_WHITESPACE","\n        ",41],["T_VARIABLE","$arguments",42],["T_WHITESPACE"," ",42],"=",["T_WHITESPACE"," ",42],["T_VARIABLE","$this",42],["T_OBJECT_OPERATOR","->",42],["T_STRING","objectManager",42],["T_OBJECT_OPERATOR","->",42],["T_STRING","getConstructArguments",42],"(",["T_WHITESPACE","\n            ",42],["T_VARIABLE","$className",43],",",["T_WHITESPACE","\n            ",43],"[",["T_CONSTANT_ENCAPSED_STRING","'dbStorageFactory'",44],["T_WHITESPACE"," ",44],["T_DOUBLE_ARROW","=>",44],["T_WHITESPACE"," ",44],["T_VARIABLE","$this",44],["T_OBJECT_OPERATOR","->",44],["T_STRING","dbStorageFactoryMock",44],"]",["T_WHITESPACE","\n        ",44],")",";",["T_WHITESPACE","\n        ",45],["T_DOC_COMMENT","\/** @var \\Magento\\Framework\\App\\Helper\\Context $context *\/",46],["T_WHITESPACE","\n        ",46],["T_VARIABLE","$context",47],["T_WHITESPACE"," ",47],"=",["T_WHITESPACE"," ",47],["T_VARIABLE","$arguments",47],"[",["T_CONSTANT_ENCAPSED_STRING","'context'",47],"]",";",["T_WHITESPACE","\n        ",47],["T_VARIABLE","$mediaDirMock",48],["T_WHITESPACE"," ",48],"=",["T_WHITESPACE"," ",48],["T_VARIABLE","$this",48],["T_OBJECT_OPERATOR","->",48],["T_STRING","getMockForAbstractClass",48],"(",["T_NS_SEPARATOR","\\",48],["T_STRING","Magento",48],["T_NS_SEPARATOR","\\",48],["T_STRING","Framework",48],["T_NS_SEPARATOR","\\",48],["T_STRING","Filesystem",48],["T_NS_SEPARATOR","\\",48],["T_STRING","Directory",48],["T_NS_SEPARATOR","\\",48],["T_STRING","ReadInterface",48],["T_DOUBLE_COLON","::",48],["T_CLASS","class",48],")",";",["T_WHITESPACE","\n        ",48],["T_VARIABLE","$mediaDirMock",49],["T_OBJECT_OPERATOR","->",49],["T_STRING","expects",49],"(",["T_VARIABLE","$this",49],["T_OBJECT_OPERATOR","->",49],["T_STRING","any",49],"(",")",")",["T_WHITESPACE","\n            ",49],["T_OBJECT_OPERATOR","->",50],["T_STRING","method",50],"(",["T_CONSTANT_ENCAPSED_STRING","'getAbsolutePath'",50],")",["T_WHITESPACE","\n            ",50],["T_OBJECT_OPERATOR","->",51],["T_STRING","will",51],"(",["T_VARIABLE","$this",51],["T_OBJECT_OPERATOR","->",51],["T_STRING","returnValue",51],"(",["T_CONSTANT_ENCAPSED_STRING","'media-dir'",51],")",")",";",["T_WHITESPACE","\n        ",51],["T_VARIABLE","$this",52],["T_OBJECT_OPERATOR","->",52],["T_STRING","filesystemMock",52],["T_WHITESPACE"," ",52],"=",["T_WHITESPACE"," ",52],["T_VARIABLE","$arguments",52],"[",["T_CONSTANT_ENCAPSED_STRING","'filesystem'",52],"]",";",["T_WHITESPACE","\n        ",52],["T_VARIABLE","$this",53],["T_OBJECT_OPERATOR","->",53],["T_STRING","filesystemMock",53],["T_OBJECT_OPERATOR","->",53],["T_STRING","expects",53],"(",["T_VARIABLE","$this",53],["T_OBJECT_OPERATOR","->",53],["T_STRING","any",53],"(",")",")",["T_WHITESPACE","\n            ",53],["T_OBJECT_OPERATOR","->",54],["T_STRING","method",54],"(",["T_CONSTANT_ENCAPSED_STRING","'getDirectoryRead'",54],")",["T_WHITESPACE","\n            ",54],["T_OBJECT_OPERATOR","->",55],["T_STRING","with",55],"(",["T_STRING","DirectoryList",55],["T_DOUBLE_COLON","::",55],["T_STRING","MEDIA",55],")",["T_WHITESPACE","\n            ",55],["T_OBJECT_OPERATOR","->",56],["T_STRING","will",56],"(",["T_VARIABLE","$this",56],["T_OBJECT_OPERATOR","->",56],["T_STRING","returnValue",56],"(",["T_VARIABLE","$mediaDirMock",56],")",")",";",["T_WHITESPACE","\n        ",56],["T_VARIABLE","$this",57],["T_OBJECT_OPERATOR","->",57],["T_STRING","fileStorageMock",57],["T_WHITESPACE"," ",57],"=",["T_WHITESPACE"," ",57],["T_VARIABLE","$arguments",57],"[",["T_CONSTANT_ENCAPSED_STRING","'fileStorage'",57],"]",";",["T_WHITESPACE","\n        ",57],["T_VARIABLE","$this",58],["T_OBJECT_OPERATOR","->",58],["T_STRING","configMock",58],["T_WHITESPACE"," ",58],"=",["T_WHITESPACE"," ",58],["T_VARIABLE","$context",58],["T_OBJECT_OPERATOR","->",58],["T_STRING","getScopeConfig",58],"(",")",";",["T_WHITESPACE","\n        ",58],["T_VARIABLE","$this",59],["T_OBJECT_OPERATOR","->",59],["T_STRING","helper",59],["T_WHITESPACE"," ",59],"=",["T_WHITESPACE"," ",59],["T_VARIABLE","$this",59],["T_OBJECT_OPERATOR","->",59],["T_STRING","objectManager",59],["T_OBJECT_OPERATOR","->",59],["T_STRING","getObject",59],"(",["T_VARIABLE","$className",59],",",["T_WHITESPACE"," ",59],["T_VARIABLE","$arguments",59],")",";",["T_WHITESPACE","\n    ",59],"}",["T_WHITESPACE","\n\n    ",60],["T_DOC_COMMENT","\/**\n     * @param int $storage\n     * @param bool $expected\n     * @dataProvider checkDbUsageDataProvider\n     *\/",62],["T_WHITESPACE","\n    ",66],["T_PUBLIC","public",67],["T_WHITESPACE"," ",67],["T_FUNCTION","function",67],["T_WHITESPACE"," ",67],["T_STRING","testCheckDbUsage",67],"(",["T_VARIABLE","$storage",67],",",["T_WHITESPACE"," ",67],["T_VARIABLE","$expected",67],")",["T_WHITESPACE","\n    ",67],"{",["T_WHITESPACE","\n        ",68],["T_VARIABLE","$this",69],["T_OBJECT_OPERATOR","->",69],["T_STRING","configMock",69],["T_OBJECT_OPERATOR","->",69],["T_STRING","expects",69],"(",["T_VARIABLE","$this",69],["T_OBJECT_OPERATOR","->",69],["T_STRING","once",69],"(",")",")",["T_WHITESPACE","\n            ",69],["T_OBJECT_OPERATOR","->",70],["T_STRING","method",70],"(",["T_CONSTANT_ENCAPSED_STRING","'getValue'",70],")",["T_WHITESPACE","\n            ",70],["T_OBJECT_OPERATOR","->",71],["T_STRING","with",71],"(",["T_NS_SEPARATOR","\\",71],["T_STRING","Magento",71],["T_NS_SEPARATOR","\\",71],["T_STRING","MediaStorage",71],["T_NS_SEPARATOR","\\",71],["T_STRING","Model",71],["T_NS_SEPARATOR","\\",71],["T_STRING","File",71],["T_NS_SEPARATOR","\\",71],["T_STRING","Storage",71],["T_DOUBLE_COLON","::",71],["T_STRING","XML_PATH_STORAGE_MEDIA",71],",",["T_WHITESPACE"," ",71],["T_CONSTANT_ENCAPSED_STRING","'default'",71],")",["T_WHITESPACE","\n            ",71],["T_OBJECT_OPERATOR","->",72],["T_STRING","will",72],"(",["T_VARIABLE","$this",72],["T_OBJECT_OPERATOR","->",72],["T_STRING","returnValue",72],"(",["T_VARIABLE","$storage",72],")",")",";",["T_WHITESPACE","\n\n        ",72],["T_VARIABLE","$this",74],["T_OBJECT_OPERATOR","->",74],["T_STRING","assertEquals",74],"(",["T_VARIABLE","$expected",74],",",["T_WHITESPACE"," ",74],["T_VARIABLE","$this",74],["T_OBJECT_OPERATOR","->",74],["T_STRING","helper",74],["T_OBJECT_OPERATOR","->",74],["T_STRING","checkDbUsage",74],"(",")",")",";",["T_WHITESPACE","\n        ",74],["T_VARIABLE","$this",75],["T_OBJECT_OPERATOR","->",75],["T_STRING","assertEquals",75],"(",["T_VARIABLE","$expected",75],",",["T_WHITESPACE"," ",75],["T_VARIABLE","$this",75],["T_OBJECT_OPERATOR","->",75],["T_STRING","helper",75],["T_OBJECT_OPERATOR","->",75],["T_STRING","checkDbUsage",75],"(",")",")",";",["T_WHITESPACE","\n    ",75],"}",["T_WHITESPACE","\n\n    ",76],["T_PUBLIC","public",78],["T_WHITESPACE"," ",78],["T_FUNCTION","function",78],["T_WHITESPACE"," ",78],["T_STRING","checkDbUsageDataProvider",78],"(",")",["T_WHITESPACE","\n    ",78],"{",["T_WHITESPACE","\n        ",79],["T_RETURN","return",80],["T_WHITESPACE"," ",80],"[",["T_WHITESPACE","\n            ",80],["T_CONSTANT_ENCAPSED_STRING","'media database'",81],["T_WHITESPACE"," ",81],["T_DOUBLE_ARROW","=>",81],["T_WHITESPACE"," ",81],"[",["T_NS_SEPARATOR","\\",81],["T_STRING","Magento",81],["T_NS_SEPARATOR","\\",81],["T_STRING","MediaStorage",81],["T_NS_SEPARATOR","\\",81],["T_STRING","Model",81],["T_NS_SEPARATOR","\\",81],["T_STRING","File",81],["T_NS_SEPARATOR","\\",81],["T_STRING","Storage",81],["T_DOUBLE_COLON","::",81],["T_STRING","STORAGE_MEDIA_DATABASE",81],",",["T_WHITESPACE"," ",81],["T_STRING","true",81],"]",",",["T_WHITESPACE","\n            ",81],["T_CONSTANT_ENCAPSED_STRING","'non-media database'",82],["T_WHITESPACE"," ",82],["T_DOUBLE_ARROW","=>",82],["T_WHITESPACE"," ",82],"[",["T_LNUMBER","10",82],",",["T_WHITESPACE"," ",82],["T_STRING","false",82],"]",",",["T_WHITESPACE","\n        ",82],"]",";",["T_WHITESPACE","\n    ",83],"}",["T_WHITESPACE","\n\n    ",84],["T_PUBLIC","public",86],["T_WHITESPACE"," ",86],["T_FUNCTION","function",86],["T_WHITESPACE"," ",86],["T_STRING","testGetStorageDatabaseModel",86],"(",")",["T_WHITESPACE","\n    ",86],"{",["T_WHITESPACE","\n        ",87],["T_VARIABLE","$dbModelMock",88],["T_WHITESPACE"," ",88],"=",["T_WHITESPACE"," ",88],["T_VARIABLE","$this",88],["T_OBJECT_OPERATOR","->",88],["T_STRING","getMockBuilder",88],"(",["T_NS_SEPARATOR","\\",88],["T_STRING","Magento",88],["T_NS_SEPARATOR","\\",88],["T_STRING","MediaStorage",88],["T_NS_SEPARATOR","\\",88],["T_STRING","Model",88],["T_NS_SEPARATOR","\\",88],["T_STRING","File",88],["T_NS_SEPARATOR","\\",88],["T_STRING","Storage",88],["T_NS_SEPARATOR","\\",88],["T_STRING","Database",88],["T_DOUBLE_COLON","::",88],["T_CLASS","class",88],")",["T_WHITESPACE","\n            ",88],["T_OBJECT_OPERATOR","->",89],["T_STRING","disableOriginalConstructor",89],"(",")",["T_WHITESPACE","\n            ",89],["T_OBJECT_OPERATOR","->",90],["T_STRING","getMock",90],"(",")",";",["T_WHITESPACE","\n        ",90],["T_VARIABLE","$this",91],["T_OBJECT_OPERATOR","->",91],["T_STRING","dbStorageFactoryMock",91],["T_OBJECT_OPERATOR","->",91],["T_STRING","expects",91],"(",["T_VARIABLE","$this",91],["T_OBJECT_OPERATOR","->",91],["T_STRING","once",91],"(",")",")",["T_WHITESPACE","\n            ",91],["T_OBJECT_OPERATOR","->",92],["T_STRING","method",92],"(",["T_CONSTANT_ENCAPSED_STRING","'create'",92],")",["T_WHITESPACE","\n            ",92],["T_OBJECT_OPERATOR","->",93],["T_STRING","will",93],"(",["T_VARIABLE","$this",93],["T_OBJECT_OPERATOR","->",93],["T_STRING","returnValue",93],"(",["T_VARIABLE","$dbModelMock",93],")",")",";",["T_WHITESPACE","\n        ",93],["T_VARIABLE","$this",94],["T_OBJECT_OPERATOR","->",94],["T_STRING","assertSame",94],"(",["T_VARIABLE","$dbModelMock",94],",",["T_WHITESPACE"," ",94],["T_VARIABLE","$this",94],["T_OBJECT_OPERATOR","->",94],["T_STRING","helper",94],["T_OBJECT_OPERATOR","->",94],["T_STRING","getStorageDatabaseModel",94],"(",")",")",";",["T_WHITESPACE","\n        ",94],["T_VARIABLE","$this",95],["T_OBJECT_OPERATOR","->",95],["T_STRING","assertSame",95],"(",["T_VARIABLE","$dbModelMock",95],",",["T_WHITESPACE"," ",95],["T_VARIABLE","$this",95],["T_OBJECT_OPERATOR","->",95],["T_STRING","helper",95],["T_OBJECT_OPERATOR","->",95],["T_STRING","getStorageDatabaseModel",95],"(",")",")",";",["T_WHITESPACE","\n    ",95],"}",["T_WHITESPACE","\n\n    ",96],["T_PUBLIC","public",98],["T_WHITESPACE"," ",98],["T_FUNCTION","function",98],["T_WHITESPACE"," ",98],["T_STRING","testGetStorageFileModel",98],"(",")",["T_WHITESPACE","\n    ",98],"{",["T_WHITESPACE","\n        ",99],["T_VARIABLE","$this",100],["T_OBJECT_OPERATOR","->",100],["T_STRING","assertSame",100],"(",["T_VARIABLE","$this",100],["T_OBJECT_OPERATOR","->",100],["T_STRING","fileStorageMock",100],",",["T_WHITESPACE"," ",100],["T_VARIABLE","$this",100],["T_OBJECT_OPERATOR","->",100],["T_STRING","helper",100],["T_OBJECT_OPERATOR","->",100],["T_STRING","getStorageFileModel",100],"(",")",")",";",["T_WHITESPACE","\n    ",100],"}",["T_WHITESPACE","\n\n    ",101],["T_PUBLIC","public",103],["T_WHITESPACE"," ",103],["T_FUNCTION","function",103],["T_WHITESPACE"," ",103],["T_STRING","testGetResourceStorageModel",103],"(",")",["T_WHITESPACE","\n    ",103],"{",["T_WHITESPACE","\n        ",104],["T_VARIABLE","$dbModelMock",105],["T_WHITESPACE"," ",105],"=",["T_WHITESPACE"," ",105],["T_VARIABLE","$this",105],["T_OBJECT_OPERATOR","->",105],["T_STRING","getMockBuilder",105],"(",["T_NS_SEPARATOR","\\",105],["T_STRING","Magento",105],["T_NS_SEPARATOR","\\",105],["T_STRING","MediaStorage",105],["T_NS_SEPARATOR","\\",105],["T_STRING","Model",105],["T_NS_SEPARATOR","\\",105],["T_STRING","File",105],["T_NS_SEPARATOR","\\",105],["T_STRING","Storage",105],["T_NS_SEPARATOR","\\",105],["T_STRING","Database",105],["T_DOUBLE_COLON","::",105],["T_CLASS","class",105],")",["T_WHITESPACE","\n            ",105],["T_OBJECT_OPERATOR","->",106],["T_STRING","disableOriginalConstructor",106],"(",")",["T_WHITESPACE","\n            ",106],["T_OBJECT_OPERATOR","->",107],["T_STRING","getMock",107],"(",")",";",["T_WHITESPACE","\n        ",107],["T_VARIABLE","$this",108],["T_OBJECT_OPERATOR","->",108],["T_STRING","dbStorageFactoryMock",108],["T_OBJECT_OPERATOR","->",108],["T_STRING","expects",108],"(",["T_VARIABLE","$this",108],["T_OBJECT_OPERATOR","->",108],["T_STRING","once",108],"(",")",")",["T_WHITESPACE","\n            ",108],["T_OBJECT_OPERATOR","->",109],["T_STRING","method",109],"(",["T_CONSTANT_ENCAPSED_STRING","'create'",109],")",["T_WHITESPACE","\n            ",109],["T_OBJECT_OPERATOR","->",110],["T_STRING","will",110],"(",["T_VARIABLE","$this",110],["T_OBJECT_OPERATOR","->",110],["T_STRING","returnValue",110],"(",["T_VARIABLE","$dbModelMock",110],")",")",";",["T_WHITESPACE","\n        ",110],["T_VARIABLE","$resourceModelMock",111],["T_WHITESPACE"," ",111],"=",["T_WHITESPACE"," ",111],["T_VARIABLE","$this",111],["T_OBJECT_OPERATOR","->",111],["T_STRING","getMockBuilder",111],"(",["T_NS_SEPARATOR","\\",111],["T_STRING","Magento",111],["T_NS_SEPARATOR","\\",111],["T_STRING","Framework",111],["T_NS_SEPARATOR","\\",111],["T_STRING","Model",111],["T_NS_SEPARATOR","\\",111],["T_STRING","ResourceModel",111],["T_NS_SEPARATOR","\\",111],["T_STRING","Db",111],["T_NS_SEPARATOR","\\",111],["T_STRING","AbstractDb",111],["T_DOUBLE_COLON","::",111],["T_CLASS","class",111],")",["T_WHITESPACE","\n            ",111],["T_OBJECT_OPERATOR","->",112],["T_STRING","disableOriginalConstructor",112],"(",")",["T_WHITESPACE","\n            ",112],["T_OBJECT_OPERATOR","->",113],["T_STRING","setMethods",113],"(","[",["T_CONSTANT_ENCAPSED_STRING","'__wakeup'",113],"]",")",["T_WHITESPACE","\n            ",113],["T_OBJECT_OPERATOR","->",114],["T_STRING","getMockForAbstractClass",114],"(",")",";",["T_WHITESPACE","\n        ",114],["T_VARIABLE","$dbModelMock",115],["T_OBJECT_OPERATOR","->",115],["T_STRING","expects",115],"(",["T_VARIABLE","$this",115],["T_OBJECT_OPERATOR","->",115],["T_STRING","once",115],"(",")",")",["T_WHITESPACE","\n            ",115],["T_OBJECT_OPERATOR","->",116],["T_STRING","method",116],"(",["T_CONSTANT_ENCAPSED_STRING","'getResource'",116],")",["T_WHITESPACE","\n            ",116],["T_OBJECT_OPERATOR","->",117],["T_STRING","will",117],"(",["T_VARIABLE","$this",117],["T_OBJECT_OPERATOR","->",117],["T_STRING","returnValue",117],"(",["T_VARIABLE","$resourceModelMock",117],")",")",";",["T_WHITESPACE","\n\n        ",117],["T_VARIABLE","$this",119],["T_OBJECT_OPERATOR","->",119],["T_STRING","assertSame",119],"(",["T_VARIABLE","$resourceModelMock",119],",",["T_WHITESPACE"," ",119],["T_VARIABLE","$this",119],["T_OBJECT_OPERATOR","->",119],["T_STRING","helper",119],["T_OBJECT_OPERATOR","->",119],["T_STRING","getResourceStorageModel",119],"(",")",")",";",["T_WHITESPACE","\n        ",119],["T_VARIABLE","$this",120],["T_OBJECT_OPERATOR","->",120],["T_STRING","assertSame",120],"(",["T_VARIABLE","$resourceModelMock",120],",",["T_WHITESPACE"," ",120],["T_VARIABLE","$this",120],["T_OBJECT_OPERATOR","->",120],["T_STRING","helper",120],["T_OBJECT_OPERATOR","->",120],["T_STRING","getResourceStorageModel",120],"(",")",")",";",["T_WHITESPACE","\n    ",120],"}",["T_WHITESPACE","\n\n    ",121],["T_DOC_COMMENT","\/**\n     * @param int $storage\n     * @param int $callNum\n     * @dataProvider updateFileDataProvider\n     *\/",123],["T_WHITESPACE","\n    ",127],["T_PUBLIC","public",128],["T_WHITESPACE"," ",128],["T_FUNCTION","function",128],["T_WHITESPACE"," ",128],["T_STRING","testSaveFile",128],"(",["T_VARIABLE","$storage",128],",",["T_WHITESPACE"," ",128],["T_VARIABLE","$callNum",128],")",["T_WHITESPACE","\n    ",128],"{",["T_WHITESPACE","\n        ",129],["T_VARIABLE","$this",130],["T_OBJECT_OPERATOR","->",130],["T_STRING","configMock",130],["T_OBJECT_OPERATOR","->",130],["T_STRING","expects",130],"(",["T_VARIABLE","$this",130],["T_OBJECT_OPERATOR","->",130],["T_STRING","once",130],"(",")",")",["T_WHITESPACE","\n            ",130],["T_OBJECT_OPERATOR","->",131],["T_STRING","method",131],"(",["T_CONSTANT_ENCAPSED_STRING","'getValue'",131],")",["T_WHITESPACE","\n            ",131],["T_OBJECT_OPERATOR","->",132],["T_STRING","with",132],"(",["T_NS_SEPARATOR","\\",132],["T_STRING","Magento",132],["T_NS_SEPARATOR","\\",132],["T_STRING","MediaStorage",132],["T_NS_SEPARATOR","\\",132],["T_STRING","Model",132],["T_NS_SEPARATOR","\\",132],["T_STRING","File",132],["T_NS_SEPARATOR","\\",132],["T_STRING","Storage",132],["T_DOUBLE_COLON","::",132],["T_STRING","XML_PATH_STORAGE_MEDIA",132],",",["T_WHITESPACE"," ",132],["T_CONSTANT_ENCAPSED_STRING","'default'",132],")",["T_WHITESPACE","\n            ",132],["T_OBJECT_OPERATOR","->",133],["T_STRING","will",133],"(",["T_VARIABLE","$this",133],["T_OBJECT_OPERATOR","->",133],["T_STRING","returnValue",133],"(",["T_VARIABLE","$storage",133],")",")",";",["T_WHITESPACE","\n        ",133],["T_VARIABLE","$dbModelMock",134],["T_WHITESPACE"," ",134],"=",["T_WHITESPACE"," ",134],["T_VARIABLE","$this",134],["T_OBJECT_OPERATOR","->",134],["T_STRING","getMockBuilder",134],"(",["T_NS_SEPARATOR","\\",134],["T_STRING","Magento",134],["T_NS_SEPARATOR","\\",134],["T_STRING","MediaStorage",134],["T_NS_SEPARATOR","\\",134],["T_STRING","Model",134],["T_NS_SEPARATOR","\\",134],["T_STRING","File",134],["T_NS_SEPARATOR","\\",134],["T_STRING","Storage",134],["T_NS_SEPARATOR","\\",134],["T_STRING","Database",134],["T_DOUBLE_COLON","::",134],["T_CLASS","class",134],")",["T_WHITESPACE","\n            ",134],["T_OBJECT_OPERATOR","->",135],["T_STRING","disableOriginalConstructor",135],"(",")",["T_WHITESPACE","\n            ",135],["T_OBJECT_OPERATOR","->",136],["T_STRING","getMock",136],"(",")",";",["T_WHITESPACE","\n        ",136],["T_VARIABLE","$this",137],["T_OBJECT_OPERATOR","->",137],["T_STRING","dbStorageFactoryMock",137],["T_OBJECT_OPERATOR","->",137],["T_STRING","expects",137],"(",["T_VARIABLE","$this",137],["T_OBJECT_OPERATOR","->",137],["T_STRING","exactly",137],"(",["T_VARIABLE","$callNum",137],")",")",["T_WHITESPACE","\n            ",137],["T_OBJECT_OPERATOR","->",138],["T_STRING","method",138],"(",["T_CONSTANT_ENCAPSED_STRING","'create'",138],")",["T_WHITESPACE","\n            ",138],["T_OBJECT_OPERATOR","->",139],["T_STRING","will",139],"(",["T_VARIABLE","$this",139],["T_OBJECT_OPERATOR","->",139],["T_STRING","returnValue",139],"(",["T_VARIABLE","$dbModelMock",139],")",")",";",["T_WHITESPACE","\n        ",139],["T_VARIABLE","$dbModelMock",140],["T_OBJECT_OPERATOR","->",140],["T_STRING","expects",140],"(",["T_VARIABLE","$this",140],["T_OBJECT_OPERATOR","->",140],["T_STRING","exactly",140],"(",["T_VARIABLE","$callNum",140],")",")",["T_WHITESPACE","\n            ",140],["T_OBJECT_OPERATOR","->",141],["T_STRING","method",141],"(",["T_CONSTANT_ENCAPSED_STRING","'saveFile'",141],")",["T_WHITESPACE","\n            ",141],["T_OBJECT_OPERATOR","->",142],["T_STRING","with",142],"(",["T_CONSTANT_ENCAPSED_STRING","'filename'",142],")",";",["T_WHITESPACE","\n\n        ",142],["T_VARIABLE","$this",144],["T_OBJECT_OPERATOR","->",144],["T_STRING","helper",144],["T_OBJECT_OPERATOR","->",144],["T_STRING","saveFile",144],"(",["T_CONSTANT_ENCAPSED_STRING","'media-dir\/filename'",144],")",";",["T_WHITESPACE","\n    ",144],"}",["T_WHITESPACE","\n\n    ",145],["T_PUBLIC","public",147],["T_WHITESPACE"," ",147],["T_FUNCTION","function",147],["T_WHITESPACE"," ",147],["T_STRING","updateFileDataProvider",147],"(",")",["T_WHITESPACE","\n    ",147],"{",["T_WHITESPACE","\n        ",148],["T_RETURN","return",149],["T_WHITESPACE"," ",149],"[",["T_WHITESPACE","\n            ",149],["T_CONSTANT_ENCAPSED_STRING","'media database'",150],["T_WHITESPACE"," ",150],["T_DOUBLE_ARROW","=>",150],["T_WHITESPACE"," ",150],"[",["T_NS_SEPARATOR","\\",150],["T_STRING","Magento",150],["T_NS_SEPARATOR","\\",150],["T_STRING","MediaStorage",150],["T_NS_SEPARATOR","\\",150],["T_STRING","Model",150],["T_NS_SEPARATOR","\\",150],["T_STRING","File",150],["T_NS_SEPARATOR","\\",150],["T_STRING","Storage",150],["T_DOUBLE_COLON","::",150],["T_STRING","STORAGE_MEDIA_DATABASE",150],",",["T_WHITESPACE"," ",150],["T_LNUMBER","1",150],"]",",",["T_WHITESPACE","\n            ",150],["T_CONSTANT_ENCAPSED_STRING","'non-media database'",151],["T_WHITESPACE"," ",151],["T_DOUBLE_ARROW","=>",151],["T_WHITESPACE"," ",151],"[",["T_LNUMBER","10",151],",",["T_WHITESPACE"," ",151],["T_LNUMBER","0",151],"]",",",["T_WHITESPACE","\n        ",151],"]",";",["T_WHITESPACE","\n    ",152],"}",["T_WHITESPACE","\n\n    ",153],["T_DOC_COMMENT","\/**\n     * @param int $storage\n     * @param int $callNum\n     * @dataProvider updateFileDataProvider\n     *\/",155],["T_WHITESPACE","\n    ",159],["T_PUBLIC","public",160],["T_WHITESPACE"," ",160],["T_FUNCTION","function",160],["T_WHITESPACE"," ",160],["T_STRING","testRenameFile",160],"(",["T_VARIABLE","$storage",160],",",["T_WHITESPACE"," ",160],["T_VARIABLE","$callNum",160],")",["T_WHITESPACE","\n    ",160],"{",["T_WHITESPACE","\n        ",161],["T_VARIABLE","$this",162],["T_OBJECT_OPERATOR","->",162],["T_STRING","configMock",162],["T_OBJECT_OPERATOR","->",162],["T_STRING","expects",162],"(",["T_VARIABLE","$this",162],["T_OBJECT_OPERATOR","->",162],["T_STRING","once",162],"(",")",")",["T_WHITESPACE","\n            ",162],["T_OBJECT_OPERATOR","->",163],["T_STRING","method",163],"(",["T_CONSTANT_ENCAPSED_STRING","'getValue'",163],")",["T_WHITESPACE","\n            ",163],["T_OBJECT_OPERATOR","->",164],["T_STRING","with",164],"(",["T_NS_SEPARATOR","\\",164],["T_STRING","Magento",164],["T_NS_SEPARATOR","\\",164],["T_STRING","MediaStorage",164],["T_NS_SEPARATOR","\\",164],["T_STRING","Model",164],["T_NS_SEPARATOR","\\",164],["T_STRING","File",164],["T_NS_SEPARATOR","\\",164],["T_STRING","Storage",164],["T_DOUBLE_COLON","::",164],["T_STRING","XML_PATH_STORAGE_MEDIA",164],",",["T_WHITESPACE"," ",164],["T_CONSTANT_ENCAPSED_STRING","'default'",164],")",["T_WHITESPACE","\n            ",164],["T_OBJECT_OPERATOR","->",165],["T_STRING","will",165],"(",["T_VARIABLE","$this",165],["T_OBJECT_OPERATOR","->",165],["T_STRING","returnValue",165],"(",["T_VARIABLE","$storage",165],")",")",";",["T_WHITESPACE","\n        ",165],["T_VARIABLE","$dbModelMock",166],["T_WHITESPACE"," ",166],"=",["T_WHITESPACE"," ",166],["T_VARIABLE","$this",166],["T_OBJECT_OPERATOR","->",166],["T_STRING","getMockBuilder",166],"(",["T_NS_SEPARATOR","\\",166],["T_STRING","Magento",166],["T_NS_SEPARATOR","\\",166],["T_STRING","MediaStorage",166],["T_NS_SEPARATOR","\\",166],["T_STRING","Model",166],["T_NS_SEPARATOR","\\",166],["T_STRING","File",166],["T_NS_SEPARATOR","\\",166],["T_STRING","Storage",166],["T_NS_SEPARATOR","\\",166],["T_STRING","Database",166],["T_DOUBLE_COLON","::",166],["T_CLASS","class",166],")",["T_WHITESPACE","\n            ",166],["T_OBJECT_OPERATOR","->",167],["T_STRING","disableOriginalConstructor",167],"(",")",["T_WHITESPACE","\n            ",167],["T_OBJECT_OPERATOR","->",168],["T_STRING","getMock",168],"(",")",";",["T_WHITESPACE","\n        ",168],["T_VARIABLE","$this",169],["T_OBJECT_OPERATOR","->",169],["T_STRING","dbStorageFactoryMock",169],["T_OBJECT_OPERATOR","->",169],["T_STRING","expects",169],"(",["T_VARIABLE","$this",169],["T_OBJECT_OPERATOR","->",169],["T_STRING","exactly",169],"(",["T_VARIABLE","$callNum",169],")",")",["T_WHITESPACE","\n            ",169],["T_OBJECT_OPERATOR","->",170],["T_STRING","method",170],"(",["T_CONSTANT_ENCAPSED_STRING","'create'",170],")",["T_WHITESPACE","\n            ",170],["T_OBJECT_OPERATOR","->",171],["T_STRING","will",171],"(",["T_VARIABLE","$this",171],["T_OBJECT_OPERATOR","->",171],["T_STRING","returnValue",171],"(",["T_VARIABLE","$dbModelMock",171],")",")",";",["T_WHITESPACE","\n        ",171],["T_VARIABLE","$dbModelMock",172],["T_OBJECT_OPERATOR","->",172],["T_STRING","expects",172],"(",["T_VARIABLE","$this",172],["T_OBJECT_OPERATOR","->",172],["T_STRING","exactly",172],"(",["T_VARIABLE","$callNum",172],")",")",["T_WHITESPACE","\n            ",172],["T_OBJECT_OPERATOR","->",173],["T_STRING","method",173],"(",["T_CONSTANT_ENCAPSED_STRING","'renameFile'",173],")",["T_WHITESPACE","\n            ",173],["T_OBJECT_OPERATOR","->",174],["T_STRING","with",174],"(",["T_CONSTANT_ENCAPSED_STRING","'oldName'",174],",",["T_WHITESPACE"," ",174],["T_CONSTANT_ENCAPSED_STRING","'newName'",174],")",";",["T_WHITESPACE","\n\n        ",174],["T_VARIABLE","$this",176],["T_OBJECT_OPERATOR","->",176],["T_STRING","helper",176],["T_OBJECT_OPERATOR","->",176],["T_STRING","renameFile",176],"(",["T_CONSTANT_ENCAPSED_STRING","'media-dir\/oldName'",176],",",["T_WHITESPACE"," ",176],["T_CONSTANT_ENCAPSED_STRING","'media-dir\/newName'",176],")",";",["T_WHITESPACE","\n    ",176],"}",["T_WHITESPACE","\n\n    ",177],["T_DOC_COMMENT","\/**\n     * @param int $storage\n     * @param int $callNum\n     * @dataProvider updateFileDataProvider\n     *\/",179],["T_WHITESPACE","\n    ",183],["T_PUBLIC","public",184],["T_WHITESPACE"," ",184],["T_FUNCTION","function",184],["T_WHITESPACE"," ",184],["T_STRING","testCopyFile",184],"(",["T_VARIABLE","$storage",184],",",["T_WHITESPACE"," ",184],["T_VARIABLE","$callNum",184],")",["T_WHITESPACE","\n    ",184],"{",["T_WHITESPACE","\n        ",185],["T_VARIABLE","$this",186],["T_OBJECT_OPERATOR","->",186],["T_STRING","configMock",186],["T_OBJECT_OPERATOR","->",186],["T_STRING","expects",186],"(",["T_VARIABLE","$this",186],["T_OBJECT_OPERATOR","->",186],["T_STRING","once",186],"(",")",")",["T_WHITESPACE","\n            ",186],["T_OBJECT_OPERATOR","->",187],["T_STRING","method",187],"(",["T_CONSTANT_ENCAPSED_STRING","'getValue'",187],")",["T_WHITESPACE","\n            ",187],["T_OBJECT_OPERATOR","->",188],["T_STRING","with",188],"(",["T_NS_SEPARATOR","\\",188],["T_STRING","Magento",188],["T_NS_SEPARATOR","\\",188],["T_STRING","MediaStorage",188],["T_NS_SEPARATOR","\\",188],["T_STRING","Model",188],["T_NS_SEPARATOR","\\",188],["T_STRING","File",188],["T_NS_SEPARATOR","\\",188],["T_STRING","Storage",188],["T_DOUBLE_COLON","::",188],["T_STRING","XML_PATH_STORAGE_MEDIA",188],",",["T_WHITESPACE"," ",188],["T_CONSTANT_ENCAPSED_STRING","'default'",188],")",["T_WHITESPACE","\n            ",188],["T_OBJECT_OPERATOR","->",189],["T_STRING","will",189],"(",["T_VARIABLE","$this",189],["T_OBJECT_OPERATOR","->",189],["T_STRING","returnValue",189],"(",["T_VARIABLE","$storage",189],")",")",";",["T_WHITESPACE","\n        ",189],["T_VARIABLE","$dbModelMock",190],["T_WHITESPACE"," ",190],"=",["T_WHITESPACE"," ",190],["T_VARIABLE","$this",190],["T_OBJECT_OPERATOR","->",190],["T_STRING","getMockBuilder",190],"(",["T_NS_SEPARATOR","\\",190],["T_STRING","Magento",190],["T_NS_SEPARATOR","\\",190],["T_STRING","MediaStorage",190],["T_NS_SEPARATOR","\\",190],["T_STRING","Model",190],["T_NS_SEPARATOR","\\",190],["T_STRING","File",190],["T_NS_SEPARATOR","\\",190],["T_STRING","Storage",190],["T_NS_SEPARATOR","\\",190],["T_STRING","Database",190],["T_DOUBLE_COLON","::",190],["T_CLASS","class",190],")",["T_WHITESPACE","\n            ",190],["T_OBJECT_OPERATOR","->",191],["T_STRING","disableOriginalConstructor",191],"(",")",["T_WHITESPACE","\n            ",191],["T_OBJECT_OPERATOR","->",192],["T_STRING","getMock",192],"(",")",";",["T_WHITESPACE","\n        ",192],["T_VARIABLE","$this",193],["T_OBJECT_OPERATOR","->",193],["T_STRING","dbStorageFactoryMock",193],["T_OBJECT_OPERATOR","->",193],["T_STRING","expects",193],"(",["T_VARIABLE","$this",193],["T_OBJECT_OPERATOR","->",193],["T_STRING","exactly",193],"(",["T_VARIABLE","$callNum",193],")",")",["T_WHITESPACE","\n            ",193],["T_OBJECT_OPERATOR","->",194],["T_STRING","method",194],"(",["T_CONSTANT_ENCAPSED_STRING","'create'",194],")",["T_WHITESPACE","\n            ",194],["T_OBJECT_OPERATOR","->",195],["T_STRING","will",195],"(",["T_VARIABLE","$this",195],["T_OBJECT_OPERATOR","->",195],["T_STRING","returnValue",195],"(",["T_VARIABLE","$dbModelMock",195],")",")",";",["T_WHITESPACE","\n        ",195],["T_VARIABLE","$dbModelMock",196],["T_OBJECT_OPERATOR","->",196],["T_STRING","expects",196],"(",["T_VARIABLE","$this",196],["T_OBJECT_OPERATOR","->",196],["T_STRING","exactly",196],"(",["T_VARIABLE","$callNum",196],")",")",["T_WHITESPACE","\n            ",196],["T_OBJECT_OPERATOR","->",197],["T_STRING","method",197],"(",["T_CONSTANT_ENCAPSED_STRING","'copyFile'",197],")",["T_WHITESPACE","\n            ",197],["T_OBJECT_OPERATOR","->",198],["T_STRING","with",198],"(",["T_CONSTANT_ENCAPSED_STRING","'oldName'",198],",",["T_WHITESPACE"," ",198],["T_CONSTANT_ENCAPSED_STRING","'newName'",198],")",";",["T_WHITESPACE","\n\n        ",198],["T_VARIABLE","$this",200],["T_OBJECT_OPERATOR","->",200],["T_STRING","helper",200],["T_OBJECT_OPERATOR","->",200],["T_STRING","copyFile",200],"(",["T_CONSTANT_ENCAPSED_STRING","'media-dir\/oldName'",200],",",["T_WHITESPACE"," ",200],["T_CONSTANT_ENCAPSED_STRING","'media-dir\/newName'",200],")",";",["T_WHITESPACE","\n    ",200],"}",["T_WHITESPACE","\n\n    ",201],["T_DOC_COMMENT","\/**\n     * @param int $storage\n     * @param int $callNum\n     * @param bool|null $expected\n     * @dataProvider fileExistsDataProvider\n     *\/",203],["T_WHITESPACE","\n    ",208],["T_PUBLIC","public",209],["T_WHITESPACE"," ",209],["T_FUNCTION","function",209],["T_WHITESPACE"," ",209],["T_STRING","testFileExists",209],"(",["T_VARIABLE","$storage",209],",",["T_WHITESPACE"," ",209],["T_VARIABLE","$callNum",209],",",["T_WHITESPACE"," ",209],["T_VARIABLE","$expected",209],")",["T_WHITESPACE","\n    ",209],"{",["T_WHITESPACE","\n        ",210],["T_VARIABLE","$this",211],["T_OBJECT_OPERATOR","->",211],["T_STRING","configMock",211],["T_OBJECT_OPERATOR","->",211],["T_STRING","expects",211],"(",["T_VARIABLE","$this",211],["T_OBJECT_OPERATOR","->",211],["T_STRING","once",211],"(",")",")",["T_WHITESPACE","\n            ",211],["T_OBJECT_OPERATOR","->",212],["T_STRING","method",212],"(",["T_CONSTANT_ENCAPSED_STRING","'getValue'",212],")",["T_WHITESPACE","\n            ",212],["T_OBJECT_OPERATOR","->",213],["T_STRING","with",213],"(",["T_NS_SEPARATOR","\\",213],["T_STRING","Magento",213],["T_NS_SEPARATOR","\\",213],["T_STRING","MediaStorage",213],["T_NS_SEPARATOR","\\",213],["T_STRING","Model",213],["T_NS_SEPARATOR","\\",213],["T_STRING","File",213],["T_NS_SEPARATOR","\\",213],["T_STRING","Storage",213],["T_DOUBLE_COLON","::",213],["T_STRING","XML_PATH_STORAGE_MEDIA",213],",",["T_WHITESPACE"," ",213],["T_CONSTANT_ENCAPSED_STRING","'default'",213],")",["T_WHITESPACE","\n            ",213],["T_OBJECT_OPERATOR","->",214],["T_STRING","will",214],"(",["T_VARIABLE","$this",214],["T_OBJECT_OPERATOR","->",214],["T_STRING","returnValue",214],"(",["T_VARIABLE","$storage",214],")",")",";",["T_WHITESPACE","\n        ",214],["T_VARIABLE","$dbModelMock",215],["T_WHITESPACE"," ",215],"=",["T_WHITESPACE"," ",215],["T_VARIABLE","$this",215],["T_OBJECT_OPERATOR","->",215],["T_STRING","getMockBuilder",215],"(",["T_NS_SEPARATOR","\\",215],["T_STRING","Magento",215],["T_NS_SEPARATOR","\\",215],["T_STRING","MediaStorage",215],["T_NS_SEPARATOR","\\",215],["T_STRING","Model",215],["T_NS_SEPARATOR","\\",215],["T_STRING","File",215],["T_NS_SEPARATOR","\\",215],["T_STRING","Storage",215],["T_NS_SEPARATOR","\\",215],["T_STRING","Database",215],["T_DOUBLE_COLON","::",215],["T_CLASS","class",215],")",["T_WHITESPACE","\n            ",215],["T_OBJECT_OPERATOR","->",216],["T_STRING","disableOriginalConstructor",216],"(",")",["T_WHITESPACE","\n            ",216],["T_OBJECT_OPERATOR","->",217],["T_STRING","getMock",217],"(",")",";",["T_WHITESPACE","\n        ",217],["T_VARIABLE","$this",218],["T_OBJECT_OPERATOR","->",218],["T_STRING","dbStorageFactoryMock",218],["T_OBJECT_OPERATOR","->",218],["T_STRING","expects",218],"(",["T_VARIABLE","$this",218],["T_OBJECT_OPERATOR","->",218],["T_STRING","exactly",218],"(",["T_VARIABLE","$callNum",218],")",")",["T_WHITESPACE","\n            ",218],["T_OBJECT_OPERATOR","->",219],["T_STRING","method",219],"(",["T_CONSTANT_ENCAPSED_STRING","'create'",219],")",["T_WHITESPACE","\n            ",219],["T_OBJECT_OPERATOR","->",220],["T_STRING","will",220],"(",["T_VARIABLE","$this",220],["T_OBJECT_OPERATOR","->",220],["T_STRING","returnValue",220],"(",["T_VARIABLE","$dbModelMock",220],")",")",";",["T_WHITESPACE","\n        ",220],["T_VARIABLE","$dbModelMock",221],["T_OBJECT_OPERATOR","->",221],["T_STRING","expects",221],"(",["T_VARIABLE","$this",221],["T_OBJECT_OPERATOR","->",221],["T_STRING","exactly",221],"(",["T_VARIABLE","$callNum",221],")",")",["T_WHITESPACE","\n            ",221],["T_OBJECT_OPERATOR","->",222],["T_STRING","method",222],"(",["T_CONSTANT_ENCAPSED_STRING","'fileExists'",222],")",["T_WHITESPACE","\n            ",222],["T_OBJECT_OPERATOR","->",223],["T_STRING","with",223],"(",["T_CONSTANT_ENCAPSED_STRING","'file'",223],")",["T_WHITESPACE","\n            ",223],["T_OBJECT_OPERATOR","->",224],["T_STRING","will",224],"(",["T_VARIABLE","$this",224],["T_OBJECT_OPERATOR","->",224],["T_STRING","returnValue",224],"(",["T_STRING","true",224],")",")",";",["T_WHITESPACE","\n\n        ",224],["T_VARIABLE","$this",226],["T_OBJECT_OPERATOR","->",226],["T_STRING","assertEquals",226],"(",["T_VARIABLE","$expected",226],",",["T_WHITESPACE"," ",226],["T_VARIABLE","$this",226],["T_OBJECT_OPERATOR","->",226],["T_STRING","helper",226],["T_OBJECT_OPERATOR","->",226],["T_STRING","fileExists",226],"(",["T_CONSTANT_ENCAPSED_STRING","'media-dir\/file'",226],")",")",";",["T_WHITESPACE","\n    ",226],"}",["T_WHITESPACE","\n\n    ",227],["T_PUBLIC","public",229],["T_WHITESPACE"," ",229],["T_FUNCTION","function",229],["T_WHITESPACE"," ",229],["T_STRING","fileExistsDataProvider",229],"(",")",["T_WHITESPACE","\n    ",229],"{",["T_WHITESPACE","\n        ",230],["T_RETURN","return",231],["T_WHITESPACE"," ",231],"[",["T_WHITESPACE","\n            ",231],["T_CONSTANT_ENCAPSED_STRING","'media database'",232],["T_WHITESPACE"," ",232],["T_DOUBLE_ARROW","=>",232],["T_WHITESPACE"," ",232],"[",["T_NS_SEPARATOR","\\",232],["T_STRING","Magento",232],["T_NS_SEPARATOR","\\",232],["T_STRING","MediaStorage",232],["T_NS_SEPARATOR","\\",232],["T_STRING","Model",232],["T_NS_SEPARATOR","\\",232],["T_STRING","File",232],["T_NS_SEPARATOR","\\",232],["T_STRING","Storage",232],["T_DOUBLE_COLON","::",232],["T_STRING","STORAGE_MEDIA_DATABASE",232],",",["T_WHITESPACE"," ",232],["T_LNUMBER","1",232],",",["T_WHITESPACE"," ",232],["T_STRING","true",232],"]",",",["T_WHITESPACE","\n            ",232],["T_CONSTANT_ENCAPSED_STRING","'non-media database'",233],["T_WHITESPACE"," ",233],["T_DOUBLE_ARROW","=>",233],["T_WHITESPACE"," ",233],"[",["T_LNUMBER","10",233],",",["T_WHITESPACE"," ",233],["T_LNUMBER","0",233],",",["T_WHITESPACE"," ",233],["T_STRING","null",233],"]",",",["T_WHITESPACE","\n        ",233],"]",";",["T_WHITESPACE","\n    ",234],"}",["T_WHITESPACE","\n\n    ",235],["T_DOC_COMMENT","\/**\n     * @param int $storage\n     * @param int $callNum\n     * @param string $expected\n     * @dataProvider getUniqueFilenameDataProvider\n     *\/",237],["T_WHITESPACE","\n    ",242],["T_PUBLIC","public",243],["T_WHITESPACE"," ",243],["T_FUNCTION","function",243],["T_WHITESPACE"," ",243],["T_STRING","testGetUniqueFilename",243],"(",["T_VARIABLE","$storage",243],",",["T_WHITESPACE"," ",243],["T_VARIABLE","$callNum",243],",",["T_WHITESPACE"," ",243],["T_VARIABLE","$expected",243],")",["T_WHITESPACE","\n    ",243],"{",["T_WHITESPACE","\n        ",244],["T_VARIABLE","$this",245],["T_OBJECT_OPERATOR","->",245],["T_STRING","configMock",245],["T_OBJECT_OPERATOR","->",245],["T_STRING","expects",245],"(",["T_VARIABLE","$this",245],["T_OBJECT_OPERATOR","->",245],["T_STRING","once",245],"(",")",")",["T_WHITESPACE","\n            ",245],["T_OBJECT_OPERATOR","->",246],["T_STRING","method",246],"(",["T_CONSTANT_ENCAPSED_STRING","'getValue'",246],")",["T_WHITESPACE","\n            ",246],["T_OBJECT_OPERATOR","->",247],["T_STRING","with",247],"(",["T_NS_SEPARATOR","\\",247],["T_STRING","Magento",247],["T_NS_SEPARATOR","\\",247],["T_STRING","MediaStorage",247],["T_NS_SEPARATOR","\\",247],["T_STRING","Model",247],["T_NS_SEPARATOR","\\",247],["T_STRING","File",247],["T_NS_SEPARATOR","\\",247],["T_STRING","Storage",247],["T_DOUBLE_COLON","::",247],["T_STRING","XML_PATH_STORAGE_MEDIA",247],",",["T_WHITESPACE"," ",247],["T_CONSTANT_ENCAPSED_STRING","'default'",247],")",["T_WHITESPACE","\n            ",247],["T_OBJECT_OPERATOR","->",248],["T_STRING","will",248],"(",["T_VARIABLE","$this",248],["T_OBJECT_OPERATOR","->",248],["T_STRING","returnValue",248],"(",["T_VARIABLE","$storage",248],")",")",";",["T_WHITESPACE","\n        ",248],["T_VARIABLE","$dbModelMock",249],["T_WHITESPACE"," ",249],"=",["T_WHITESPACE"," ",249],["T_VARIABLE","$this",249],["T_OBJECT_OPERATOR","->",249],["T_STRING","getMockBuilder",249],"(",["T_NS_SEPARATOR","\\",249],["T_STRING","Magento",249],["T_NS_SEPARATOR","\\",249],["T_STRING","MediaStorage",249],["T_NS_SEPARATOR","\\",249],["T_STRING","Model",249],["T_NS_SEPARATOR","\\",249],["T_STRING","File",249],["T_NS_SEPARATOR","\\",249],["T_STRING","Storage",249],["T_NS_SEPARATOR","\\",249],["T_STRING","Database",249],["T_DOUBLE_COLON","::",249],["T_CLASS","class",249],")",["T_WHITESPACE","\n            ",249],["T_OBJECT_OPERATOR","->",250],["T_STRING","disableOriginalConstructor",250],"(",")",["T_WHITESPACE","\n            ",250],["T_OBJECT_OPERATOR","->",251],["T_STRING","getMock",251],"(",")",";",["T_WHITESPACE","\n        ",251],["T_VARIABLE","$this",252],["T_OBJECT_OPERATOR","->",252],["T_STRING","dbStorageFactoryMock",252],["T_OBJECT_OPERATOR","->",252],["T_STRING","expects",252],"(",["T_VARIABLE","$this",252],["T_OBJECT_OPERATOR","->",252],["T_STRING","exactly",252],"(",["T_VARIABLE","$callNum",252],")",")",["T_WHITESPACE","\n            ",252],["T_OBJECT_OPERATOR","->",253],["T_STRING","method",253],"(",["T_CONSTANT_ENCAPSED_STRING","'create'",253],")",["T_WHITESPACE","\n            ",253],["T_OBJECT_OPERATOR","->",254],["T_STRING","will",254],"(",["T_VARIABLE","$this",254],["T_OBJECT_OPERATOR","->",254],["T_STRING","returnValue",254],"(",["T_VARIABLE","$dbModelMock",254],")",")",";",["T_WHITESPACE","\n        ",254],["T_VARIABLE","$map",255],["T_WHITESPACE"," ",255],"=",["T_WHITESPACE"," ",255],"[",["T_WHITESPACE","\n            ",255],"[",["T_CONSTANT_ENCAPSED_STRING","'directory\/filename.ext'",256],",",["T_WHITESPACE"," ",256],["T_STRING","true",256],"]",",",["T_WHITESPACE","\n            ",256],"[",["T_CONSTANT_ENCAPSED_STRING","'directory\/filename_1.ext'",257],",",["T_WHITESPACE"," ",257],["T_STRING","true",257],"]",",",["T_WHITESPACE","\n            ",257],"[",["T_CONSTANT_ENCAPSED_STRING","'directory\/filename_2.ext'",258],",",["T_WHITESPACE"," ",258],["T_STRING","false",258],"]",",",["T_WHITESPACE","\n        ",258],"]",";",["T_WHITESPACE","\n        ",259],["T_VARIABLE","$dbModelMock",260],["T_OBJECT_OPERATOR","->",260],["T_STRING","expects",260],"(",["T_VARIABLE","$this",260],["T_OBJECT_OPERATOR","->",260],["T_STRING","any",260],"(",")",")",["T_WHITESPACE","\n            ",260],["T_OBJECT_OPERATOR","->",261],["T_STRING","method",261],"(",["T_CONSTANT_ENCAPSED_STRING","'fileExists'",261],")",["T_WHITESPACE","\n            ",261],["T_OBJECT_OPERATOR","->",262],["T_STRING","will",262],"(",["T_VARIABLE","$this",262],["T_OBJECT_OPERATOR","->",262],["T_STRING","returnValueMap",262],"(",["T_VARIABLE","$map",262],")",")",";",["T_WHITESPACE","\n\n        ",262],["T_VARIABLE","$this",264],["T_OBJECT_OPERATOR","->",264],["T_STRING","assertSame",264],"(",["T_VARIABLE","$expected",264],",",["T_WHITESPACE"," ",264],["T_VARIABLE","$this",264],["T_OBJECT_OPERATOR","->",264],["T_STRING","helper",264],["T_OBJECT_OPERATOR","->",264],["T_STRING","getUniqueFilename",264],"(",["T_CONSTANT_ENCAPSED_STRING","'media-dir\/directory\/'",264],",",["T_WHITESPACE"," ",264],["T_CONSTANT_ENCAPSED_STRING","'filename.ext'",264],")",")",";",["T_WHITESPACE","\n    ",264],"}",["T_WHITESPACE","\n\n    ",265],["T_PUBLIC","public",267],["T_WHITESPACE"," ",267],["T_FUNCTION","function",267],["T_WHITESPACE"," ",267],["T_STRING","getUniqueFilenameDataProvider",267],"(",")",["T_WHITESPACE","\n    ",267],"{",["T_WHITESPACE","\n        ",268],["T_RETURN","return",269],["T_WHITESPACE"," ",269],"[",["T_WHITESPACE","\n            ",269],["T_CONSTANT_ENCAPSED_STRING","'media database'",270],["T_WHITESPACE"," ",270],["T_DOUBLE_ARROW","=>",270],["T_WHITESPACE"," ",270],"[",["T_NS_SEPARATOR","\\",270],["T_STRING","Magento",270],["T_NS_SEPARATOR","\\",270],["T_STRING","MediaStorage",270],["T_NS_SEPARATOR","\\",270],["T_STRING","Model",270],["T_NS_SEPARATOR","\\",270],["T_STRING","File",270],["T_NS_SEPARATOR","\\",270],["T_STRING","Storage",270],["T_DOUBLE_COLON","::",270],["T_STRING","STORAGE_MEDIA_DATABASE",270],",",["T_WHITESPACE"," ",270],["T_LNUMBER","1",270],",",["T_WHITESPACE"," ",270],["T_CONSTANT_ENCAPSED_STRING","'filename_2.ext'",270],"]",",",["T_WHITESPACE","\n            ",270],["T_CONSTANT_ENCAPSED_STRING","'non-media database'",271],["T_WHITESPACE"," ",271],["T_DOUBLE_ARROW","=>",271],["T_WHITESPACE"," ",271],"[",["T_LNUMBER","10",271],",",["T_WHITESPACE"," ",271],["T_LNUMBER","0",271],",",["T_WHITESPACE"," ",271],["T_CONSTANT_ENCAPSED_STRING","'filename.ext'",271],"]",",",["T_WHITESPACE","\n        ",271],"]",";",["T_WHITESPACE","\n    ",272],"}",["T_WHITESPACE","\n\n    ",273],["T_DOC_COMMENT","\/**\n     * @param bool $expected\n     * @param int $storage\n     * @param int $callNum\n     * @param int $id\n     * @param int $callSaveFile\n     * @dataProvider saveFileToFileSystemDataProvider\n     *\/",275],["T_WHITESPACE","\n    ",282],["T_PUBLIC","public",283],["T_WHITESPACE"," ",283],["T_FUNCTION","function",283],["T_WHITESPACE"," ",283],["T_STRING","testSaveFileToFileSystem",283],"(",["T_VARIABLE","$expected",283],",",["T_WHITESPACE"," ",283],["T_VARIABLE","$storage",283],",",["T_WHITESPACE"," ",283],["T_VARIABLE","$callNum",283],",",["T_WHITESPACE"," ",283],["T_VARIABLE","$id",283],["T_WHITESPACE"," ",283],"=",["T_WHITESPACE"," ",283],["T_LNUMBER","0",283],",",["T_WHITESPACE"," ",283],["T_VARIABLE","$callSaveFile",283],["T_WHITESPACE"," ",283],"=",["T_WHITESPACE"," ",283],["T_LNUMBER","0",283],")",["T_WHITESPACE","\n    ",283],"{",["T_WHITESPACE","\n        ",284],["T_VARIABLE","$this",285],["T_OBJECT_OPERATOR","->",285],["T_STRING","configMock",285],["T_OBJECT_OPERATOR","->",285],["T_STRING","expects",285],"(",["T_VARIABLE","$this",285],["T_OBJECT_OPERATOR","->",285],["T_STRING","once",285],"(",")",")",["T_WHITESPACE","\n            ",285],["T_OBJECT_OPERATOR","->",286],["T_STRING","method",286],"(",["T_CONSTANT_ENCAPSED_STRING","'getValue'",286],")",["T_WHITESPACE","\n            ",286],["T_OBJECT_OPERATOR","->",287],["T_STRING","with",287],"(",["T_NS_SEPARATOR","\\",287],["T_STRING","Magento",287],["T_NS_SEPARATOR","\\",287],["T_STRING","MediaStorage",287],["T_NS_SEPARATOR","\\",287],["T_STRING","Model",287],["T_NS_SEPARATOR","\\",287],["T_STRING","File",287],["T_NS_SEPARATOR","\\",287],["T_STRING","Storage",287],["T_DOUBLE_COLON","::",287],["T_STRING","XML_PATH_STORAGE_MEDIA",287],",",["T_WHITESPACE"," ",287],["T_CONSTANT_ENCAPSED_STRING","'default'",287],")",["T_WHITESPACE","\n            ",287],["T_OBJECT_OPERATOR","->",288],["T_STRING","will",288],"(",["T_VARIABLE","$this",288],["T_OBJECT_OPERATOR","->",288],["T_STRING","returnValue",288],"(",["T_VARIABLE","$storage",288],")",")",";",["T_WHITESPACE","\n        ",288],["T_VARIABLE","$dbModelMock",289],["T_WHITESPACE"," ",289],"=",["T_WHITESPACE"," ",289],["T_VARIABLE","$this",289],["T_OBJECT_OPERATOR","->",289],["T_STRING","getMockBuilder",289],"(",["T_NS_SEPARATOR","\\",289],["T_STRING","Magento",289],["T_NS_SEPARATOR","\\",289],["T_STRING","MediaStorage",289],["T_NS_SEPARATOR","\\",289],["T_STRING","Model",289],["T_NS_SEPARATOR","\\",289],["T_STRING","File",289],["T_NS_SEPARATOR","\\",289],["T_STRING","Storage",289],["T_NS_SEPARATOR","\\",289],["T_STRING","Database",289],["T_DOUBLE_COLON","::",289],["T_CLASS","class",289],")",["T_WHITESPACE","\n            ",289],["T_OBJECT_OPERATOR","->",290],["T_STRING","disableOriginalConstructor",290],"(",")",["T_WHITESPACE","\n            ",290],["T_OBJECT_OPERATOR","->",291],["T_STRING","getMock",291],"(",")",";",["T_WHITESPACE","\n        ",291],["T_VARIABLE","$this",292],["T_OBJECT_OPERATOR","->",292],["T_STRING","dbStorageFactoryMock",292],["T_OBJECT_OPERATOR","->",292],["T_STRING","expects",292],"(",["T_VARIABLE","$this",292],["T_OBJECT_OPERATOR","->",292],["T_STRING","exactly",292],"(",["T_VARIABLE","$callNum",292],")",")",["T_WHITESPACE","\n            ",292],["T_OBJECT_OPERATOR","->",293],["T_STRING","method",293],"(",["T_CONSTANT_ENCAPSED_STRING","'create'",293],")",["T_WHITESPACE","\n            ",293],["T_OBJECT_OPERATOR","->",294],["T_STRING","will",294],"(",["T_VARIABLE","$this",294],["T_OBJECT_OPERATOR","->",294],["T_STRING","returnValue",294],"(",["T_VARIABLE","$dbModelMock",294],")",")",";",["T_WHITESPACE","\n        ",294],["T_VARIABLE","$dbModelMock",295],["T_OBJECT_OPERATOR","->",295],["T_STRING","expects",295],"(",["T_VARIABLE","$this",295],["T_OBJECT_OPERATOR","->",295],["T_STRING","exactly",295],"(",["T_VARIABLE","$callNum",295],")",")",["T_WHITESPACE","\n            ",295],["T_OBJECT_OPERATOR","->",296],["T_STRING","method",296],"(",["T_CONSTANT_ENCAPSED_STRING","'loadByFilename'",296],")",["T_WHITESPACE","\n            ",296],["T_OBJECT_OPERATOR","->",297],["T_STRING","with",297],"(",["T_CONSTANT_ENCAPSED_STRING","'filename'",297],")",["T_WHITESPACE","\n            ",297],["T_OBJECT_OPERATOR","->",298],["T_STRING","will",298],"(",["T_VARIABLE","$this",298],["T_OBJECT_OPERATOR","->",298],["T_STRING","returnSelf",298],"(",")",")",";",["T_WHITESPACE","\n        ",298],["T_VARIABLE","$dbModelMock",299],["T_OBJECT_OPERATOR","->",299],["T_STRING","expects",299],"(",["T_VARIABLE","$this",299],["T_OBJECT_OPERATOR","->",299],["T_STRING","exactly",299],"(",["T_VARIABLE","$callNum",299],")",")",["T_WHITESPACE","\n            ",299],["T_OBJECT_OPERATOR","->",300],["T_STRING","method",300],"(",["T_CONSTANT_ENCAPSED_STRING","'getId'",300],")",["T_WHITESPACE","\n            ",300],["T_OBJECT_OPERATOR","->",301],["T_STRING","will",301],"(",["T_VARIABLE","$this",301],["T_OBJECT_OPERATOR","->",301],["T_STRING","returnValue",301],"(",["T_VARIABLE","$id",301],")",")",";",["T_WHITESPACE","\n        ",301],["T_VARIABLE","$dbModelMock",302],["T_OBJECT_OPERATOR","->",302],["T_STRING","expects",302],"(",["T_VARIABLE","$this",302],["T_OBJECT_OPERATOR","->",302],["T_STRING","exactly",302],"(",["T_VARIABLE","$callSaveFile",302],")",")",["T_WHITESPACE","\n            ",302],["T_OBJECT_OPERATOR","->",303],["T_STRING","method",303],"(",["T_CONSTANT_ENCAPSED_STRING","'getData'",303],")",["T_WHITESPACE","\n            ",303],["T_OBJECT_OPERATOR","->",304],["T_STRING","will",304],"(",["T_VARIABLE","$this",304],["T_OBJECT_OPERATOR","->",304],["T_STRING","returnValue",304],"(","[",["T_CONSTANT_ENCAPSED_STRING","'data'",304],"]",")",")",";",["T_WHITESPACE","\n        ",304],["T_VARIABLE","$this",305],["T_OBJECT_OPERATOR","->",305],["T_STRING","fileStorageMock",305],["T_OBJECT_OPERATOR","->",305],["T_STRING","expects",305],"(",["T_VARIABLE","$this",305],["T_OBJECT_OPERATOR","->",305],["T_STRING","exactly",305],"(",["T_VARIABLE","$callSaveFile",305],")",")",["T_WHITESPACE","\n            ",305],["T_OBJECT_OPERATOR","->",306],["T_STRING","method",306],"(",["T_CONSTANT_ENCAPSED_STRING","'saveFile'",306],")",["T_WHITESPACE","\n            ",306],["T_OBJECT_OPERATOR","->",307],["T_STRING","will",307],"(",["T_VARIABLE","$this",307],["T_OBJECT_OPERATOR","->",307],["T_STRING","returnValue",307],"(",["T_STRING","true",307],")",")",";",["T_WHITESPACE","\n        ",307],["T_VARIABLE","$this",308],["T_OBJECT_OPERATOR","->",308],["T_STRING","assertEquals",308],"(",["T_VARIABLE","$expected",308],",",["T_WHITESPACE"," ",308],["T_VARIABLE","$this",308],["T_OBJECT_OPERATOR","->",308],["T_STRING","helper",308],["T_OBJECT_OPERATOR","->",308],["T_STRING","saveFileToFilesystem",308],"(",["T_CONSTANT_ENCAPSED_STRING","'media-dir\/filename'",308],")",")",";",["T_WHITESPACE","\n    ",308],"}",["T_WHITESPACE","\n\n    ",309],["T_PUBLIC","public",311],["T_WHITESPACE"," ",311],["T_FUNCTION","function",311],["T_WHITESPACE"," ",311],["T_STRING","saveFileToFileSystemDataProvider",311],"(",")",["T_WHITESPACE","\n    ",311],"{",["T_WHITESPACE","\n        ",312],["T_RETURN","return",313],["T_WHITESPACE"," ",313],"[",["T_WHITESPACE","\n            ",313],["T_CONSTANT_ENCAPSED_STRING","'media database, no id'",314],["T_WHITESPACE"," ",314],["T_DOUBLE_ARROW","=>",314],["T_WHITESPACE"," ",314],"[",["T_WHITESPACE","\n                ",314],["T_STRING","false",315],",",["T_WHITESPACE","\n                ",315],["T_NS_SEPARATOR","\\",316],["T_STRING","Magento",316],["T_NS_SEPARATOR","\\",316],["T_STRING","MediaStorage",316],["T_NS_SEPARATOR","\\",316],["T_STRING","Model",316],["T_NS_SEPARATOR","\\",316],["T_STRING","File",316],["T_NS_SEPARATOR","\\",316],["T_STRING","Storage",316],["T_DOUBLE_COLON","::",316],["T_STRING","STORAGE_MEDIA_DATABASE",316],",",["T_WHITESPACE","\n                ",316],["T_LNUMBER","1",317],",",["T_WHITESPACE","\n            ",317],"]",",",["T_WHITESPACE","\n            ",318],["T_CONSTANT_ENCAPSED_STRING","'media database, with id'",319],["T_WHITESPACE"," ",319],["T_DOUBLE_ARROW","=>",319],["T_WHITESPACE"," ",319],"[",["T_WHITESPACE","\n                ",319],["T_STRING","true",320],",",["T_WHITESPACE","\n                ",320],["T_NS_SEPARATOR","\\",321],["T_STRING","Magento",321],["T_NS_SEPARATOR","\\",321],["T_STRING","MediaStorage",321],["T_NS_SEPARATOR","\\",321],["T_STRING","Model",321],["T_NS_SEPARATOR","\\",321],["T_STRING","File",321],["T_NS_SEPARATOR","\\",321],["T_STRING","Storage",321],["T_DOUBLE_COLON","::",321],["T_STRING","STORAGE_MEDIA_DATABASE",321],",",["T_WHITESPACE","\n                ",321],["T_LNUMBER","1",322],",",["T_WHITESPACE","\n                ",322],["T_LNUMBER","1",323],",",["T_WHITESPACE","\n                ",323],["T_LNUMBER","1",324],",",["T_WHITESPACE","\n            ",324],"]",",",["T_WHITESPACE","\n            ",325],["T_CONSTANT_ENCAPSED_STRING","'non-media database'",326],["T_WHITESPACE"," ",326],["T_DOUBLE_ARROW","=>",326],["T_WHITESPACE"," ",326],"[",["T_STRING","false",326],",",["T_WHITESPACE"," ",326],["T_LNUMBER","10",326],",",["T_WHITESPACE"," ",326],["T_LNUMBER","0",326],"]",",",["T_WHITESPACE","\n        ",326],"]",";",["T_WHITESPACE","\n    ",327],"}",["T_WHITESPACE","\n\n    ",328],["T_PUBLIC","public",330],["T_WHITESPACE"," ",330],["T_FUNCTION","function",330],["T_WHITESPACE"," ",330],["T_STRING","testGetMediaRelativePath",330],"(",")",["T_WHITESPACE","\n    ",330],"{",["T_WHITESPACE","\n        ",331],["T_VARIABLE","$this",332],["T_OBJECT_OPERATOR","->",332],["T_STRING","assertEquals",332],"(",["T_CONSTANT_ENCAPSED_STRING","'fullPath'",332],",",["T_WHITESPACE"," ",332],["T_VARIABLE","$this",332],["T_OBJECT_OPERATOR","->",332],["T_STRING","helper",332],["T_OBJECT_OPERATOR","->",332],["T_STRING","getMediaRelativePath",332],"(",["T_CONSTANT_ENCAPSED_STRING","'media-dir\/fullPath'",332],")",")",";",["T_WHITESPACE","\n    ",332],"}",["T_WHITESPACE","\n\n    ",333],["T_DOC_COMMENT","\/**\n     * @param int $storage\n     * @param int $callNum\n     * @dataProvider updateFileDataProvider\n     *\/",335],["T_WHITESPACE","\n    ",339],["T_PUBLIC","public",340],["T_WHITESPACE"," ",340],["T_FUNCTION","function",340],["T_WHITESPACE"," ",340],["T_STRING","testDeleteFolder",340],"(",["T_VARIABLE","$storage",340],",",["T_WHITESPACE"," ",340],["T_VARIABLE","$callNum",340],")",["T_WHITESPACE","\n    ",340],"{",["T_WHITESPACE","\n        ",341],["T_VARIABLE","$this",342],["T_OBJECT_OPERATOR","->",342],["T_STRING","configMock",342],["T_OBJECT_OPERATOR","->",342],["T_STRING","expects",342],"(",["T_VARIABLE","$this",342],["T_OBJECT_OPERATOR","->",342],["T_STRING","once",342],"(",")",")",["T_WHITESPACE","\n            ",342],["T_OBJECT_OPERATOR","->",343],["T_STRING","method",343],"(",["T_CONSTANT_ENCAPSED_STRING","'getValue'",343],")",["T_WHITESPACE","\n            ",343],["T_OBJECT_OPERATOR","->",344],["T_STRING","with",344],"(",["T_NS_SEPARATOR","\\",344],["T_STRING","Magento",344],["T_NS_SEPARATOR","\\",344],["T_STRING","MediaStorage",344],["T_NS_SEPARATOR","\\",344],["T_STRING","Model",344],["T_NS_SEPARATOR","\\",344],["T_STRING","File",344],["T_NS_SEPARATOR","\\",344],["T_STRING","Storage",344],["T_DOUBLE_COLON","::",344],["T_STRING","XML_PATH_STORAGE_MEDIA",344],",",["T_WHITESPACE"," ",344],["T_CONSTANT_ENCAPSED_STRING","'default'",344],")",["T_WHITESPACE","\n            ",344],["T_OBJECT_OPERATOR","->",345],["T_STRING","will",345],"(",["T_VARIABLE","$this",345],["T_OBJECT_OPERATOR","->",345],["T_STRING","returnValue",345],"(",["T_VARIABLE","$storage",345],")",")",";",["T_WHITESPACE","\n        ",345],["T_VARIABLE","$dbModelMock",346],["T_WHITESPACE"," ",346],"=",["T_WHITESPACE"," ",346],["T_VARIABLE","$this",346],["T_OBJECT_OPERATOR","->",346],["T_STRING","getMockBuilder",346],"(",["T_NS_SEPARATOR","\\",346],["T_STRING","Magento",346],["T_NS_SEPARATOR","\\",346],["T_STRING","MediaStorage",346],["T_NS_SEPARATOR","\\",346],["T_STRING","Model",346],["T_NS_SEPARATOR","\\",346],["T_STRING","File",346],["T_NS_SEPARATOR","\\",346],["T_STRING","Storage",346],["T_NS_SEPARATOR","\\",346],["T_STRING","Database",346],["T_DOUBLE_COLON","::",346],["T_CLASS","class",346],")",["T_WHITESPACE","\n            ",346],["T_OBJECT_OPERATOR","->",347],["T_STRING","disableOriginalConstructor",347],"(",")",["T_WHITESPACE","\n            ",347],["T_OBJECT_OPERATOR","->",348],["T_STRING","getMock",348],"(",")",";",["T_WHITESPACE","\n        ",348],["T_VARIABLE","$this",349],["T_OBJECT_OPERATOR","->",349],["T_STRING","dbStorageFactoryMock",349],["T_OBJECT_OPERATOR","->",349],["T_STRING","expects",349],"(",["T_VARIABLE","$this",349],["T_OBJECT_OPERATOR","->",349],["T_STRING","exactly",349],"(",["T_VARIABLE","$callNum",349],")",")",["T_WHITESPACE","\n            ",349],["T_OBJECT_OPERATOR","->",350],["T_STRING","method",350],"(",["T_CONSTANT_ENCAPSED_STRING","'create'",350],")",["T_WHITESPACE","\n            ",350],["T_OBJECT_OPERATOR","->",351],["T_STRING","will",351],"(",["T_VARIABLE","$this",351],["T_OBJECT_OPERATOR","->",351],["T_STRING","returnValue",351],"(",["T_VARIABLE","$dbModelMock",351],")",")",";",["T_WHITESPACE","\n        ",351],["T_VARIABLE","$resourceModelMock",352],["T_WHITESPACE"," ",352],"=",["T_WHITESPACE"," ",352],["T_VARIABLE","$this",352],["T_OBJECT_OPERATOR","->",352],["T_STRING","getMockBuilder",352],"(",["T_NS_SEPARATOR","\\",352],["T_STRING","Magento",352],["T_NS_SEPARATOR","\\",352],["T_STRING","Framework",352],["T_NS_SEPARATOR","\\",352],["T_STRING","Model",352],["T_NS_SEPARATOR","\\",352],["T_STRING","ResourceModel",352],["T_NS_SEPARATOR","\\",352],["T_STRING","Db",352],["T_NS_SEPARATOR","\\",352],["T_STRING","AbstractDb",352],["T_DOUBLE_COLON","::",352],["T_CLASS","class",352],")",["T_WHITESPACE","\n            ",352],["T_OBJECT_OPERATOR","->",353],["T_STRING","disableOriginalConstructor",353],"(",")",["T_WHITESPACE","\n            ",353],["T_OBJECT_OPERATOR","->",354],["T_STRING","setMethods",354],"(","[",["T_CONSTANT_ENCAPSED_STRING","'deleteFolder'",354],",",["T_WHITESPACE"," ",354],["T_CONSTANT_ENCAPSED_STRING","'__wakeup'",354],"]",")",["T_WHITESPACE","\n            ",354],["T_OBJECT_OPERATOR","->",355],["T_STRING","getMockForAbstractClass",355],"(",")",";",["T_WHITESPACE","\n        ",355],["T_VARIABLE","$dbModelMock",356],["T_OBJECT_OPERATOR","->",356],["T_STRING","expects",356],"(",["T_VARIABLE","$this",356],["T_OBJECT_OPERATOR","->",356],["T_STRING","exactly",356],"(",["T_VARIABLE","$callNum",356],")",")",["T_WHITESPACE","\n            ",356],["T_OBJECT_OPERATOR","->",357],["T_STRING","method",357],"(",["T_CONSTANT_ENCAPSED_STRING","'getResource'",357],")",["T_WHITESPACE","\n            ",357],["T_OBJECT_OPERATOR","->",358],["T_STRING","will",358],"(",["T_VARIABLE","$this",358],["T_OBJECT_OPERATOR","->",358],["T_STRING","returnValue",358],"(",["T_VARIABLE","$resourceModelMock",358],")",")",";",["T_WHITESPACE","\n        ",358],["T_VARIABLE","$resourceModelMock",359],["T_OBJECT_OPERATOR","->",359],["T_STRING","expects",359],"(",["T_VARIABLE","$this",359],["T_OBJECT_OPERATOR","->",359],["T_STRING","exactly",359],"(",["T_VARIABLE","$callNum",359],")",")",["T_WHITESPACE","\n            ",359],["T_OBJECT_OPERATOR","->",360],["T_STRING","method",360],"(",["T_CONSTANT_ENCAPSED_STRING","'deleteFolder'",360],")",["T_WHITESPACE","\n            ",360],["T_OBJECT_OPERATOR","->",361],["T_STRING","with",361],"(",["T_CONSTANT_ENCAPSED_STRING","'folder'",361],")",";",["T_WHITESPACE","\n\n        ",361],["T_VARIABLE","$this",363],["T_OBJECT_OPERATOR","->",363],["T_STRING","helper",363],["T_OBJECT_OPERATOR","->",363],["T_STRING","deleteFolder",363],"(",["T_CONSTANT_ENCAPSED_STRING","'media-dir\/folder'",363],")",";",["T_WHITESPACE","\n    ",363],"}",["T_WHITESPACE","\n\n    ",364],["T_DOC_COMMENT","\/**\n     * @param int $storage\n     * @param int $callNum\n     * @dataProvider updateFileDataProvider\n     *\/",366],["T_WHITESPACE","\n    ",370],["T_PUBLIC","public",371],["T_WHITESPACE"," ",371],["T_FUNCTION","function",371],["T_WHITESPACE"," ",371],["T_STRING","testDeleteFile",371],"(",["T_VARIABLE","$storage",371],",",["T_WHITESPACE"," ",371],["T_VARIABLE","$callNum",371],")",["T_WHITESPACE","\n    ",371],"{",["T_WHITESPACE","\n        ",372],["T_VARIABLE","$this",373],["T_OBJECT_OPERATOR","->",373],["T_STRING","configMock",373],["T_OBJECT_OPERATOR","->",373],["T_STRING","expects",373],"(",["T_VARIABLE","$this",373],["T_OBJECT_OPERATOR","->",373],["T_STRING","once",373],"(",")",")",["T_WHITESPACE","\n            ",373],["T_OBJECT_OPERATOR","->",374],["T_STRING","method",374],"(",["T_CONSTANT_ENCAPSED_STRING","'getValue'",374],")",["T_WHITESPACE","\n            ",374],["T_OBJECT_OPERATOR","->",375],["T_STRING","with",375],"(",["T_NS_SEPARATOR","\\",375],["T_STRING","Magento",375],["T_NS_SEPARATOR","\\",375],["T_STRING","MediaStorage",375],["T_NS_SEPARATOR","\\",375],["T_STRING","Model",375],["T_NS_SEPARATOR","\\",375],["T_STRING","File",375],["T_NS_SEPARATOR","\\",375],["T_STRING","Storage",375],["T_DOUBLE_COLON","::",375],["T_STRING","XML_PATH_STORAGE_MEDIA",375],",",["T_WHITESPACE"," ",375],["T_CONSTANT_ENCAPSED_STRING","'default'",375],")",["T_WHITESPACE","\n            ",375],["T_OBJECT_OPERATOR","->",376],["T_STRING","will",376],"(",["T_VARIABLE","$this",376],["T_OBJECT_OPERATOR","->",376],["T_STRING","returnValue",376],"(",["T_VARIABLE","$storage",376],")",")",";",["T_WHITESPACE","\n        ",376],["T_VARIABLE","$dbModelMock",377],["T_WHITESPACE"," ",377],"=",["T_WHITESPACE"," ",377],["T_VARIABLE","$this",377],["T_OBJECT_OPERATOR","->",377],["T_STRING","getMockBuilder",377],"(",["T_NS_SEPARATOR","\\",377],["T_STRING","Magento",377],["T_NS_SEPARATOR","\\",377],["T_STRING","MediaStorage",377],["T_NS_SEPARATOR","\\",377],["T_STRING","Model",377],["T_NS_SEPARATOR","\\",377],["T_STRING","File",377],["T_NS_SEPARATOR","\\",377],["T_STRING","Storage",377],["T_NS_SEPARATOR","\\",377],["T_STRING","Database",377],["T_DOUBLE_COLON","::",377],["T_CLASS","class",377],")",["T_WHITESPACE","\n            ",377],["T_OBJECT_OPERATOR","->",378],["T_STRING","disableOriginalConstructor",378],"(",")",["T_WHITESPACE","\n            ",378],["T_OBJECT_OPERATOR","->",379],["T_STRING","getMock",379],"(",")",";",["T_WHITESPACE","\n        ",379],["T_VARIABLE","$this",380],["T_OBJECT_OPERATOR","->",380],["T_STRING","dbStorageFactoryMock",380],["T_OBJECT_OPERATOR","->",380],["T_STRING","expects",380],"(",["T_VARIABLE","$this",380],["T_OBJECT_OPERATOR","->",380],["T_STRING","exactly",380],"(",["T_VARIABLE","$callNum",380],")",")",["T_WHITESPACE","\n            ",380],["T_OBJECT_OPERATOR","->",381],["T_STRING","method",381],"(",["T_CONSTANT_ENCAPSED_STRING","'create'",381],")",["T_WHITESPACE","\n            ",381],["T_OBJECT_OPERATOR","->",382],["T_STRING","will",382],"(",["T_VARIABLE","$this",382],["T_OBJECT_OPERATOR","->",382],["T_STRING","returnValue",382],"(",["T_VARIABLE","$dbModelMock",382],")",")",";",["T_WHITESPACE","\n        ",382],["T_VARIABLE","$dbModelMock",383],["T_OBJECT_OPERATOR","->",383],["T_STRING","expects",383],"(",["T_VARIABLE","$this",383],["T_OBJECT_OPERATOR","->",383],["T_STRING","exactly",383],"(",["T_VARIABLE","$callNum",383],")",")",["T_WHITESPACE","\n            ",383],["T_OBJECT_OPERATOR","->",384],["T_STRING","method",384],"(",["T_CONSTANT_ENCAPSED_STRING","'deleteFile'",384],")",["T_WHITESPACE","\n            ",384],["T_OBJECT_OPERATOR","->",385],["T_STRING","with",385],"(",["T_CONSTANT_ENCAPSED_STRING","'file'",385],")",";",["T_WHITESPACE","\n\n        ",385],["T_VARIABLE","$this",387],["T_OBJECT_OPERATOR","->",387],["T_STRING","helper",387],["T_OBJECT_OPERATOR","->",387],["T_STRING","deleteFile",387],"(",["T_CONSTANT_ENCAPSED_STRING","'media-dir\/file'",387],")",";",["T_WHITESPACE","\n    ",387],"}",["T_WHITESPACE","\n\n    ",388],["T_DOC_COMMENT","\/**\n     * @param array $result\n     * @param string $expected\n     * @param int $storage\n     * @param int $callNum\n     * @param int $callDirWrite\n     * @dataProvider saveUploadedFileDataProvider\n     *\/",390],["T_WHITESPACE","\n    ",397],["T_PUBLIC","public",398],["T_WHITESPACE"," ",398],["T_FUNCTION","function",398],["T_WHITESPACE"," ",398],["T_STRING","testSaveUploadedFile",398],"(",["T_VARIABLE","$result",398],",",["T_WHITESPACE"," ",398],["T_VARIABLE","$expected",398],",",["T_WHITESPACE"," ",398],["T_VARIABLE","$expectedFullPath",398],",",["T_WHITESPACE"," ",398],["T_VARIABLE","$storage",398],",",["T_WHITESPACE"," ",398],["T_VARIABLE","$callNum",398],",",["T_WHITESPACE"," ",398],["T_VARIABLE","$callDirWrite",398],["T_WHITESPACE"," ",398],"=",["T_WHITESPACE"," ",398],["T_LNUMBER","0",398],")",["T_WHITESPACE","\n    ",398],"{",["T_WHITESPACE","\n        ",399],["T_VARIABLE","$this",400],["T_OBJECT_OPERATOR","->",400],["T_STRING","configMock",400],["T_OBJECT_OPERATOR","->",400],["T_STRING","expects",400],"(",["T_VARIABLE","$this",400],["T_OBJECT_OPERATOR","->",400],["T_STRING","once",400],"(",")",")",["T_WHITESPACE","\n            ",400],["T_OBJECT_OPERATOR","->",401],["T_STRING","method",401],"(",["T_CONSTANT_ENCAPSED_STRING","'getValue'",401],")",["T_WHITESPACE","\n            ",401],["T_OBJECT_OPERATOR","->",402],["T_STRING","with",402],"(",["T_NS_SEPARATOR","\\",402],["T_STRING","Magento",402],["T_NS_SEPARATOR","\\",402],["T_STRING","MediaStorage",402],["T_NS_SEPARATOR","\\",402],["T_STRING","Model",402],["T_NS_SEPARATOR","\\",402],["T_STRING","File",402],["T_NS_SEPARATOR","\\",402],["T_STRING","Storage",402],["T_DOUBLE_COLON","::",402],["T_STRING","XML_PATH_STORAGE_MEDIA",402],",",["T_WHITESPACE"," ",402],["T_CONSTANT_ENCAPSED_STRING","'default'",402],")",["T_WHITESPACE","\n            ",402],["T_OBJECT_OPERATOR","->",403],["T_STRING","will",403],"(",["T_VARIABLE","$this",403],["T_OBJECT_OPERATOR","->",403],["T_STRING","returnValue",403],"(",["T_VARIABLE","$storage",403],")",")",";",["T_WHITESPACE","\n        ",403],["T_VARIABLE","$dbModelMock",404],["T_WHITESPACE"," ",404],"=",["T_WHITESPACE"," ",404],["T_VARIABLE","$this",404],["T_OBJECT_OPERATOR","->",404],["T_STRING","getMockBuilder",404],"(",["T_NS_SEPARATOR","\\",404],["T_STRING","Magento",404],["T_NS_SEPARATOR","\\",404],["T_STRING","MediaStorage",404],["T_NS_SEPARATOR","\\",404],["T_STRING","Model",404],["T_NS_SEPARATOR","\\",404],["T_STRING","File",404],["T_NS_SEPARATOR","\\",404],["T_STRING","Storage",404],["T_NS_SEPARATOR","\\",404],["T_STRING","Database",404],["T_DOUBLE_COLON","::",404],["T_CLASS","class",404],")",["T_WHITESPACE","\n            ",404],["T_OBJECT_OPERATOR","->",405],["T_STRING","disableOriginalConstructor",405],"(",")",["T_WHITESPACE","\n            ",405],["T_OBJECT_OPERATOR","->",406],["T_STRING","getMock",406],"(",")",";",["T_WHITESPACE","\n        ",406],["T_VARIABLE","$this",407],["T_OBJECT_OPERATOR","->",407],["T_STRING","dbStorageFactoryMock",407],["T_OBJECT_OPERATOR","->",407],["T_STRING","expects",407],"(",["T_VARIABLE","$this",407],["T_OBJECT_OPERATOR","->",407],["T_STRING","exactly",407],"(",["T_VARIABLE","$callNum",407],")",")",["T_WHITESPACE","\n            ",407],["T_OBJECT_OPERATOR","->",408],["T_STRING","method",408],"(",["T_CONSTANT_ENCAPSED_STRING","'create'",408],")",["T_WHITESPACE","\n            ",408],["T_OBJECT_OPERATOR","->",409],["T_STRING","will",409],"(",["T_VARIABLE","$this",409],["T_OBJECT_OPERATOR","->",409],["T_STRING","returnValue",409],"(",["T_VARIABLE","$dbModelMock",409],")",")",";",["T_WHITESPACE","\n        ",409],["T_VARIABLE","$dirWriteMock",410],["T_WHITESPACE"," ",410],"=",["T_WHITESPACE"," ",410],["T_VARIABLE","$this",410],["T_OBJECT_OPERATOR","->",410],["T_STRING","getMockBuilder",410],"(",["T_NS_SEPARATOR","\\",410],["T_STRING","Magento",410],["T_NS_SEPARATOR","\\",410],["T_STRING","Framework",410],["T_NS_SEPARATOR","\\",410],["T_STRING","Filesystem",410],["T_NS_SEPARATOR","\\",410],["T_STRING","Directory",410],["T_NS_SEPARATOR","\\",410],["T_STRING","WriteInterface",410],["T_DOUBLE_COLON","::",410],["T_CLASS","class",410],")",["T_WHITESPACE","\n            ",410],["T_OBJECT_OPERATOR","->",411],["T_STRING","disableOriginalConstructor",411],"(",")",["T_WHITESPACE","\n            ",411],["T_OBJECT_OPERATOR","->",412],["T_STRING","getMock",412],"(",")",";",["T_WHITESPACE","\n        ",412],["T_VARIABLE","$this",413],["T_OBJECT_OPERATOR","->",413],["T_STRING","filesystemMock",413],["T_OBJECT_OPERATOR","->",413],["T_STRING","expects",413],"(",["T_VARIABLE","$this",413],["T_OBJECT_OPERATOR","->",413],["T_STRING","exactly",413],"(",["T_VARIABLE","$callDirWrite",413],")",")",["T_WHITESPACE","\n            ",413],["T_OBJECT_OPERATOR","->",414],["T_STRING","method",414],"(",["T_CONSTANT_ENCAPSED_STRING","'getDirectoryWrite'",414],")",["T_WHITESPACE","\n            ",414],["T_OBJECT_OPERATOR","->",415],["T_STRING","with",415],"(",["T_STRING","DirectoryList",415],["T_DOUBLE_COLON","::",415],["T_STRING","ROOT",415],")",["T_WHITESPACE","\n            ",415],["T_OBJECT_OPERATOR","->",416],["T_STRING","will",416],"(",["T_VARIABLE","$this",416],["T_OBJECT_OPERATOR","->",416],["T_STRING","returnValue",416],"(",["T_VARIABLE","$dirWriteMock",416],")",")",";",["T_WHITESPACE","\n        ",416],["T_VARIABLE","$dirWriteMock",417],["T_OBJECT_OPERATOR","->",417],["T_STRING","expects",417],"(",["T_VARIABLE","$this",417],["T_OBJECT_OPERATOR","->",417],["T_STRING","exactly",417],"(",["T_VARIABLE","$callDirWrite",417],")",")",["T_WHITESPACE","\n            ",417],["T_OBJECT_OPERATOR","->",418],["T_STRING","method",418],"(",["T_CONSTANT_ENCAPSED_STRING","'renameFile'",418],")",";",["T_WHITESPACE","\n        ",418],["T_VARIABLE","$map",419],["T_WHITESPACE"," ",419],"=",["T_WHITESPACE"," ",419],"[",["T_WHITESPACE","\n            ",419],"[",["T_CONSTANT_ENCAPSED_STRING","'directory\/filename.ext'",420],",",["T_WHITESPACE"," ",420],["T_STRING","true",420],"]",",",["T_WHITESPACE","\n            ",420],"[",["T_CONSTANT_ENCAPSED_STRING","'directory\/filename_1.ext'",421],",",["T_WHITESPACE"," ",421],["T_STRING","true",421],"]",",",["T_WHITESPACE","\n            ",421],"[",["T_CONSTANT_ENCAPSED_STRING","'directory\/filename_2.ext'",422],",",["T_WHITESPACE"," ",422],["T_STRING","false",422],"]",",",["T_WHITESPACE","\n        ",422],"]",";",["T_WHITESPACE","\n        ",423],["T_VARIABLE","$dbModelMock",424],["T_OBJECT_OPERATOR","->",424],["T_STRING","expects",424],"(",["T_VARIABLE","$this",424],["T_OBJECT_OPERATOR","->",424],["T_STRING","any",424],"(",")",")",["T_WHITESPACE","\n            ",424],["T_OBJECT_OPERATOR","->",425],["T_STRING","method",425],"(",["T_CONSTANT_ENCAPSED_STRING","'fileExists'",425],")",["T_WHITESPACE","\n            ",425],["T_OBJECT_OPERATOR","->",426],["T_STRING","will",426],"(",["T_VARIABLE","$this",426],["T_OBJECT_OPERATOR","->",426],["T_STRING","returnValueMap",426],"(",["T_VARIABLE","$map",426],")",")",";",["T_WHITESPACE","\n        ",426],["T_VARIABLE","$dbModelMock",427],["T_OBJECT_OPERATOR","->",427],["T_STRING","expects",427],"(",["T_VARIABLE","$this",427],["T_OBJECT_OPERATOR","->",427],["T_STRING","exactly",427],"(",["T_VARIABLE","$callNum",427],")",")",["T_WHITESPACE","\n            ",427],["T_OBJECT_OPERATOR","->",428],["T_STRING","method",428],"(",["T_CONSTANT_ENCAPSED_STRING","'saveFile'",428],")",["T_WHITESPACE","\n            ",428],["T_OBJECT_OPERATOR","->",429],["T_STRING","with",429],"(",["T_VARIABLE","$expectedFullPath",429],")",";",["T_WHITESPACE","\n        ",429],["T_VARIABLE","$this",430],["T_OBJECT_OPERATOR","->",430],["T_STRING","assertEquals",430],"(",["T_VARIABLE","$expected",430],",",["T_WHITESPACE"," ",430],["T_VARIABLE","$this",430],["T_OBJECT_OPERATOR","->",430],["T_STRING","helper",430],["T_OBJECT_OPERATOR","->",430],["T_STRING","saveUploadedFile",430],"(",["T_VARIABLE","$result",430],")",")",";",["T_WHITESPACE","\n    ",430],"}",["T_WHITESPACE","\n\n    ",431],["T_PUBLIC","public",433],["T_WHITESPACE"," ",433],["T_FUNCTION","function",433],["T_WHITESPACE"," ",433],["T_STRING","saveUploadedFileDataProvider",433],"(",")",["T_WHITESPACE","\n    ",433],"{",["T_WHITESPACE","\n        ",434],["T_RETURN","return",435],["T_WHITESPACE"," ",435],"[",["T_WHITESPACE","\n            ",435],["T_CONSTANT_ENCAPSED_STRING","'media database, file not unique'",436],["T_WHITESPACE"," ",436],["T_DOUBLE_ARROW","=>",436],["T_WHITESPACE"," ",436],"[",["T_WHITESPACE","\n                ",436],"[",["T_CONSTANT_ENCAPSED_STRING","'file'",437],["T_WHITESPACE"," ",437],["T_DOUBLE_ARROW","=>",437],["T_WHITESPACE"," ",437],["T_CONSTANT_ENCAPSED_STRING","'filename.ext'",437],",",["T_WHITESPACE"," ",437],["T_CONSTANT_ENCAPSED_STRING","'path'",437],["T_WHITESPACE"," ",437],["T_DOUBLE_ARROW","=>",437],["T_WHITESPACE"," ",437],["T_CONSTANT_ENCAPSED_STRING","'media-dir\/directory\/'",437],"]",",",["T_WHITESPACE","\n                ",437],["T_CONSTANT_ENCAPSED_STRING","'\/filename_2.ext'",438],",",["T_WHITESPACE","\n                ",438],["T_CONSTANT_ENCAPSED_STRING","'directory\/filename_2.ext'",439],",",["T_WHITESPACE","\n                ",439],["T_NS_SEPARATOR","\\",440],["T_STRING","Magento",440],["T_NS_SEPARATOR","\\",440],["T_STRING","MediaStorage",440],["T_NS_SEPARATOR","\\",440],["T_STRING","Model",440],["T_NS_SEPARATOR","\\",440],["T_STRING","File",440],["T_NS_SEPARATOR","\\",440],["T_STRING","Storage",440],["T_DOUBLE_COLON","::",440],["T_STRING","STORAGE_MEDIA_DATABASE",440],",",["T_WHITESPACE","\n                ",440],["T_LNUMBER","1",441],",",["T_WHITESPACE","\n                ",441],["T_LNUMBER","1",442],",",["T_WHITESPACE","\n            ",442],"]",",",["T_WHITESPACE","\n            ",443],["T_CONSTANT_ENCAPSED_STRING","'media database, file unique'",444],["T_WHITESPACE"," ",444],["T_DOUBLE_ARROW","=>",444],["T_WHITESPACE"," ",444],"[",["T_WHITESPACE","\n                ",444],"[",["T_CONSTANT_ENCAPSED_STRING","'file'",445],["T_WHITESPACE"," ",445],["T_DOUBLE_ARROW","=>",445],["T_WHITESPACE"," ",445],["T_CONSTANT_ENCAPSED_STRING","'file.ext'",445],",",["T_WHITESPACE"," ",445],["T_CONSTANT_ENCAPSED_STRING","'path'",445],["T_WHITESPACE"," ",445],["T_DOUBLE_ARROW","=>",445],["T_WHITESPACE"," ",445],["T_CONSTANT_ENCAPSED_STRING","'media-dir\/directory\/'",445],"]",",",["T_WHITESPACE","\n                ",445],["T_CONSTANT_ENCAPSED_STRING","'\/file.ext'",446],",",["T_WHITESPACE","\n                ",446],["T_CONSTANT_ENCAPSED_STRING","'directory\/file.ext'",447],",",["T_WHITESPACE","\n                ",447],["T_NS_SEPARATOR","\\",448],["T_STRING","Magento",448],["T_NS_SEPARATOR","\\",448],["T_STRING","MediaStorage",448],["T_NS_SEPARATOR","\\",448],["T_STRING","Model",448],["T_NS_SEPARATOR","\\",448],["T_STRING","File",448],["T_NS_SEPARATOR","\\",448],["T_STRING","Storage",448],["T_DOUBLE_COLON","::",448],["T_STRING","STORAGE_MEDIA_DATABASE",448],",",["T_WHITESPACE","\n                ",448],["T_LNUMBER","1",449],",",["T_WHITESPACE","\n            ",449],"]",",",["T_WHITESPACE","\n            ",450],["T_CONSTANT_ENCAPSED_STRING","'non-media database'",451],["T_WHITESPACE"," ",451],["T_DOUBLE_ARROW","=>",451],["T_WHITESPACE"," ",451],"[",["T_WHITESPACE","\n                ",451],"[",["T_CONSTANT_ENCAPSED_STRING","'file'",452],["T_WHITESPACE"," ",452],["T_DOUBLE_ARROW","=>",452],["T_WHITESPACE"," ",452],["T_CONSTANT_ENCAPSED_STRING","'filename.ext'",452],",",["T_WHITESPACE"," ",452],["T_CONSTANT_ENCAPSED_STRING","'path'",452],["T_WHITESPACE"," ",452],["T_DOUBLE_ARROW","=>",452],["T_WHITESPACE"," ",452],["T_CONSTANT_ENCAPSED_STRING","'media-dir\/directory\/'",452],"]",",",["T_WHITESPACE","\n                ",452],["T_CONSTANT_ENCAPSED_STRING","'filename.ext'",453],",",["T_WHITESPACE","\n                ",453],["T_CONSTANT_ENCAPSED_STRING","''",454],",",["T_WHITESPACE","\n                ",454],["T_LNUMBER","10",455],",",["T_WHITESPACE","\n                ",455],["T_LNUMBER","0",456],",",["T_WHITESPACE","\n            ",456],"]",",",["T_WHITESPACE","\n        ",457],"]",";",["T_WHITESPACE","\n    ",458],"}",["T_WHITESPACE","\n\n    ",459],["T_PUBLIC","public",461],["T_WHITESPACE"," ",461],["T_FUNCTION","function",461],["T_WHITESPACE"," ",461],["T_STRING","testGetMediaBaseDir",461],"(",")",["T_WHITESPACE","\n    ",461],"{",["T_WHITESPACE","\n        ",462],["T_VARIABLE","$mediaDirMock",463],["T_WHITESPACE"," ",463],"=",["T_WHITESPACE"," ",463],["T_VARIABLE","$this",463],["T_OBJECT_OPERATOR","->",463],["T_STRING","getMockForAbstractClass",463],"(",["T_NS_SEPARATOR","\\",463],["T_STRING","Magento",463],["T_NS_SEPARATOR","\\",463],["T_STRING","Framework",463],["T_NS_SEPARATOR","\\",463],["T_STRING","Filesystem",463],["T_NS_SEPARATOR","\\",463],["T_STRING","Directory",463],["T_NS_SEPARATOR","\\",463],["T_STRING","ReadInterface",463],["T_DOUBLE_COLON","::",463],["T_CLASS","class",463],")",";",["T_WHITESPACE","\n        ",463],["T_VARIABLE","$mediaDirMock",464],["T_OBJECT_OPERATOR","->",464],["T_STRING","expects",464],"(",["T_VARIABLE","$this",464],["T_OBJECT_OPERATOR","->",464],["T_STRING","any",464],"(",")",")",["T_WHITESPACE","\n            ",464],["T_OBJECT_OPERATOR","->",465],["T_STRING","method",465],"(",["T_CONSTANT_ENCAPSED_STRING","'getAbsolutePath'",465],")",["T_WHITESPACE","\n            ",465],["T_OBJECT_OPERATOR","->",466],["T_STRING","will",466],"(",["T_VARIABLE","$this",466],["T_OBJECT_OPERATOR","->",466],["T_STRING","returnValue",466],"(",["T_CONSTANT_ENCAPSED_STRING","'media-dir'",466],")",")",";",["T_WHITESPACE","\n        ",466],["T_VARIABLE","$filesystemMock",467],["T_WHITESPACE"," ",467],"=",["T_WHITESPACE"," ",467],["T_VARIABLE","$this",467],["T_OBJECT_OPERATOR","->",467],["T_STRING","getMockBuilder",467],"(",["T_NS_SEPARATOR","\\",467],["T_STRING","Magento",467],["T_NS_SEPARATOR","\\",467],["T_STRING","Framework",467],["T_NS_SEPARATOR","\\",467],["T_STRING","Filesystem",467],["T_DOUBLE_COLON","::",467],["T_CLASS","class",467],")",["T_WHITESPACE","\n            ",467],["T_OBJECT_OPERATOR","->",468],["T_STRING","disableOriginalConstructor",468],"(",")",["T_WHITESPACE","\n            ",468],["T_OBJECT_OPERATOR","->",469],["T_STRING","getMock",469],"(",")",";",["T_WHITESPACE","\n        ",469],["T_VARIABLE","$filesystemMock",470],["T_OBJECT_OPERATOR","->",470],["T_STRING","expects",470],"(",["T_VARIABLE","$this",470],["T_OBJECT_OPERATOR","->",470],["T_STRING","once",470],"(",")",")",["T_WHITESPACE","\n            ",470],["T_OBJECT_OPERATOR","->",471],["T_STRING","method",471],"(",["T_CONSTANT_ENCAPSED_STRING","'getDirectoryRead'",471],")",["T_WHITESPACE","\n            ",471],["T_OBJECT_OPERATOR","->",472],["T_STRING","with",472],"(",["T_STRING","DirectoryList",472],["T_DOUBLE_COLON","::",472],["T_STRING","MEDIA",472],")",["T_WHITESPACE","\n            ",472],["T_OBJECT_OPERATOR","->",473],["T_STRING","will",473],"(",["T_VARIABLE","$this",473],["T_OBJECT_OPERATOR","->",473],["T_STRING","returnValue",473],"(",["T_VARIABLE","$mediaDirMock",473],")",")",";",["T_WHITESPACE","\n\n        ",473],["T_VARIABLE","$this",475],["T_OBJECT_OPERATOR","->",475],["T_STRING","helper",475],["T_WHITESPACE"," ",475],"=",["T_WHITESPACE"," ",475],["T_VARIABLE","$this",475],["T_OBJECT_OPERATOR","->",475],["T_STRING","objectManager",475],["T_OBJECT_OPERATOR","->",475],["T_STRING","getObject",475],"(",["T_WHITESPACE","\n            ",475],["T_NS_SEPARATOR","\\",476],["T_STRING","Magento",476],["T_NS_SEPARATOR","\\",476],["T_STRING","MediaStorage",476],["T_NS_SEPARATOR","\\",476],["T_STRING","Helper",476],["T_NS_SEPARATOR","\\",476],["T_STRING","File",476],["T_NS_SEPARATOR","\\",476],["T_STRING","Storage",476],["T_NS_SEPARATOR","\\",476],["T_STRING","Database",476],["T_DOUBLE_COLON","::",476],["T_CLASS","class",476],",",["T_WHITESPACE","\n            ",476],"[",["T_WHITESPACE","\n                ",477],["T_CONSTANT_ENCAPSED_STRING","'filesystem'",478],["T_WHITESPACE"," ",478],["T_DOUBLE_ARROW","=>",478],["T_WHITESPACE"," ",478],["T_VARIABLE","$filesystemMock",478],",",["T_WHITESPACE","\n                ",478],["T_CONSTANT_ENCAPSED_STRING","'fileStorage'",479],["T_WHITESPACE"," ",479],["T_DOUBLE_ARROW","=>",479],["T_WHITESPACE"," ",479],["T_VARIABLE","$this",479],["T_OBJECT_OPERATOR","->",479],["T_STRING","fileStorageMock",479],",",["T_WHITESPACE","\n                ",479],["T_CONSTANT_ENCAPSED_STRING","'dbStorageFactory'",480],["T_WHITESPACE"," ",480],["T_DOUBLE_ARROW","=>",480],["T_WHITESPACE"," ",480],["T_VARIABLE","$this",480],["T_OBJECT_OPERATOR","->",480],["T_STRING","dbStorageFactoryMock",480],",",["T_WHITESPACE","\n                ",480],["T_CONSTANT_ENCAPSED_STRING","'config'",481],["T_WHITESPACE"," ",481],["T_DOUBLE_ARROW","=>",481],["T_WHITESPACE"," ",481],["T_VARIABLE","$this",481],["T_OBJECT_OPERATOR","->",481],["T_STRING","configMock",481],",",["T_WHITESPACE","\n            ",481],"]",["T_WHITESPACE","\n        ",482],")",";",["T_WHITESPACE","\n\n        ",483],["T_VARIABLE","$this",485],["T_OBJECT_OPERATOR","->",485],["T_STRING","assertEquals",485],"(",["T_CONSTANT_ENCAPSED_STRING","'media-dir'",485],",",["T_WHITESPACE"," ",485],["T_VARIABLE","$this",485],["T_OBJECT_OPERATOR","->",485],["T_STRING","helper",485],["T_OBJECT_OPERATOR","->",485],["T_STRING","getMediaBaseDir",485],"(",")",")",";",["T_WHITESPACE","\n        ",485],["T_VARIABLE","$this",486],["T_OBJECT_OPERATOR","->",486],["T_STRING","assertEquals",486],"(",["T_CONSTANT_ENCAPSED_STRING","'media-dir'",486],",",["T_WHITESPACE"," ",486],["T_VARIABLE","$this",486],["T_OBJECT_OPERATOR","->",486],["T_STRING","helper",486],["T_OBJECT_OPERATOR","->",486],["T_STRING","getMediaBaseDir",486],"(",")",")",";",["T_WHITESPACE","\n    ",486],"}",["T_WHITESPACE","\n",487],"}",["T_WHITESPACE","\n",488]]
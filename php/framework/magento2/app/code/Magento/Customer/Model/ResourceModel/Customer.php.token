[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Copyright \u00c2\u00a9 2013-2017 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n *\/",2],["T_WHITESPACE","\n",5],["T_NAMESPACE","namespace",6],["T_WHITESPACE"," ",6],["T_STRING","Magento",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Customer",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Model",6],["T_NS_SEPARATOR","\\",6],["T_STRING","ResourceModel",6],";",["T_WHITESPACE","\n\n",6],["T_USE","use",8],["T_WHITESPACE"," ",8],["T_STRING","Magento",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Customer",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Model",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Customer",8],["T_NS_SEPARATOR","\\",8],["T_STRING","NotificationStorage",8],";",["T_WHITESPACE","\n",8],["T_USE","use",9],["T_WHITESPACE"," ",9],["T_STRING","Magento",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Framework",9],["T_NS_SEPARATOR","\\",9],["T_STRING","App",9],["T_NS_SEPARATOR","\\",9],["T_STRING","ObjectManager",9],";",["T_WHITESPACE","\n",9],["T_USE","use",10],["T_WHITESPACE"," ",10],["T_STRING","Magento",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Framework",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Validator",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Exception",10],["T_WHITESPACE"," ",10],["T_AS","as",10],["T_WHITESPACE"," ",10],["T_STRING","ValidatorException",10],";",["T_WHITESPACE","\n",10],["T_USE","use",11],["T_WHITESPACE"," ",11],["T_STRING","Magento",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Framework",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Exception",11],["T_NS_SEPARATOR","\\",11],["T_STRING","AlreadyExistsException",11],";",["T_WHITESPACE","\n\n",11],["T_DOC_COMMENT","\/**\n * Customer entity resource model\n * @SuppressWarnings(PHPMD.CouplingBetweenObjects)\n *\/",13],["T_WHITESPACE","\n",16],["T_CLASS","class",17],["T_WHITESPACE"," ",17],["T_STRING","Customer",17],["T_WHITESPACE"," ",17],["T_EXTENDS","extends",17],["T_WHITESPACE"," ",17],["T_NS_SEPARATOR","\\",17],["T_STRING","Magento",17],["T_NS_SEPARATOR","\\",17],["T_STRING","Eav",17],["T_NS_SEPARATOR","\\",17],["T_STRING","Model",17],["T_NS_SEPARATOR","\\",17],["T_STRING","Entity",17],["T_NS_SEPARATOR","\\",17],["T_STRING","VersionControl",17],["T_NS_SEPARATOR","\\",17],["T_STRING","AbstractEntity",17],["T_WHITESPACE","\n",17],"{",["T_WHITESPACE","\n    ",18],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Framework\\Validator\\Factory\n     *\/",19],["T_WHITESPACE","\n    ",21],["T_PROTECTED","protected",22],["T_WHITESPACE"," ",22],["T_VARIABLE","$_validatorFactory",22],";",["T_WHITESPACE","\n\n    ",22],["T_DOC_COMMENT","\/**\n     * Core store config\n     *\n     * @var \\Magento\\Framework\\App\\Config\\ScopeConfigInterface\n     *\/",24],["T_WHITESPACE","\n    ",28],["T_PROTECTED","protected",29],["T_WHITESPACE"," ",29],["T_VARIABLE","$_scopeConfig",29],";",["T_WHITESPACE","\n\n    ",29],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Framework\\Stdlib\\DateTime\n     *\/",31],["T_WHITESPACE","\n    ",33],["T_PROTECTED","protected",34],["T_WHITESPACE"," ",34],["T_VARIABLE","$dateTime",34],";",["T_WHITESPACE","\n\n    ",34],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Store\\Model\\StoreManagerInterface\n     *\/",36],["T_WHITESPACE","\n    ",38],["T_PROTECTED","protected",39],["T_WHITESPACE"," ",39],["T_VARIABLE","$storeManager",39],";",["T_WHITESPACE","\n\n    ",39],["T_DOC_COMMENT","\/**\n     * @var NotificationStorage\n     *\/",41],["T_WHITESPACE","\n    ",43],["T_PRIVATE","private",44],["T_WHITESPACE"," ",44],["T_VARIABLE","$notificationStorage",44],";",["T_WHITESPACE","\n\n    ",44],["T_DOC_COMMENT","\/**\n     * @param \\Magento\\Eav\\Model\\Entity\\Context $context\n     * @param \\Magento\\Framework\\Model\\ResourceModel\\Db\\VersionControl\\Snapshot $entitySnapshot\n     * @param \\Magento\\Framework\\Model\\ResourceModel\\Db\\VersionControl\\RelationComposite $entityRelationComposite\n     * @param \\Magento\\Framework\\App\\Config\\ScopeConfigInterface $scopeConfig\n     * @param \\Magento\\Framework\\Validator\\Factory $validatorFactory\n     * @param \\Magento\\Framework\\Stdlib\\DateTime $dateTime\n     * @param \\Magento\\Store\\Model\\StoreManagerInterface $storeManager\n     * @param array $data\n     *\/",46],["T_WHITESPACE","\n    ",55],["T_PUBLIC","public",56],["T_WHITESPACE"," ",56],["T_FUNCTION","function",56],["T_WHITESPACE"," ",56],["T_STRING","__construct",56],"(",["T_WHITESPACE","\n        ",56],["T_NS_SEPARATOR","\\",57],["T_STRING","Magento",57],["T_NS_SEPARATOR","\\",57],["T_STRING","Eav",57],["T_NS_SEPARATOR","\\",57],["T_STRING","Model",57],["T_NS_SEPARATOR","\\",57],["T_STRING","Entity",57],["T_NS_SEPARATOR","\\",57],["T_STRING","Context",57],["T_WHITESPACE"," ",57],["T_VARIABLE","$context",57],",",["T_WHITESPACE","\n        ",57],["T_NS_SEPARATOR","\\",58],["T_STRING","Magento",58],["T_NS_SEPARATOR","\\",58],["T_STRING","Framework",58],["T_NS_SEPARATOR","\\",58],["T_STRING","Model",58],["T_NS_SEPARATOR","\\",58],["T_STRING","ResourceModel",58],["T_NS_SEPARATOR","\\",58],["T_STRING","Db",58],["T_NS_SEPARATOR","\\",58],["T_STRING","VersionControl",58],["T_NS_SEPARATOR","\\",58],["T_STRING","Snapshot",58],["T_WHITESPACE"," ",58],["T_VARIABLE","$entitySnapshot",58],",",["T_WHITESPACE","\n        ",58],["T_NS_SEPARATOR","\\",59],["T_STRING","Magento",59],["T_NS_SEPARATOR","\\",59],["T_STRING","Framework",59],["T_NS_SEPARATOR","\\",59],["T_STRING","Model",59],["T_NS_SEPARATOR","\\",59],["T_STRING","ResourceModel",59],["T_NS_SEPARATOR","\\",59],["T_STRING","Db",59],["T_NS_SEPARATOR","\\",59],["T_STRING","VersionControl",59],["T_NS_SEPARATOR","\\",59],["T_STRING","RelationComposite",59],["T_WHITESPACE"," ",59],["T_VARIABLE","$entityRelationComposite",59],",",["T_WHITESPACE","\n        ",59],["T_NS_SEPARATOR","\\",60],["T_STRING","Magento",60],["T_NS_SEPARATOR","\\",60],["T_STRING","Framework",60],["T_NS_SEPARATOR","\\",60],["T_STRING","App",60],["T_NS_SEPARATOR","\\",60],["T_STRING","Config",60],["T_NS_SEPARATOR","\\",60],["T_STRING","ScopeConfigInterface",60],["T_WHITESPACE"," ",60],["T_VARIABLE","$scopeConfig",60],",",["T_WHITESPACE","\n        ",60],["T_NS_SEPARATOR","\\",61],["T_STRING","Magento",61],["T_NS_SEPARATOR","\\",61],["T_STRING","Framework",61],["T_NS_SEPARATOR","\\",61],["T_STRING","Validator",61],["T_NS_SEPARATOR","\\",61],["T_STRING","Factory",61],["T_WHITESPACE"," ",61],["T_VARIABLE","$validatorFactory",61],",",["T_WHITESPACE","\n        ",61],["T_NS_SEPARATOR","\\",62],["T_STRING","Magento",62],["T_NS_SEPARATOR","\\",62],["T_STRING","Framework",62],["T_NS_SEPARATOR","\\",62],["T_STRING","Stdlib",62],["T_NS_SEPARATOR","\\",62],["T_STRING","DateTime",62],["T_WHITESPACE"," ",62],["T_VARIABLE","$dateTime",62],",",["T_WHITESPACE","\n        ",62],["T_NS_SEPARATOR","\\",63],["T_STRING","Magento",63],["T_NS_SEPARATOR","\\",63],["T_STRING","Store",63],["T_NS_SEPARATOR","\\",63],["T_STRING","Model",63],["T_NS_SEPARATOR","\\",63],["T_STRING","StoreManagerInterface",63],["T_WHITESPACE"," ",63],["T_VARIABLE","$storeManager",63],",",["T_WHITESPACE","\n        ",63],["T_VARIABLE","$data",64],["T_WHITESPACE"," ",64],"=",["T_WHITESPACE"," ",64],"[","]",["T_WHITESPACE","\n    ",64],")",["T_WHITESPACE"," ",65],"{",["T_WHITESPACE","\n        ",65],["T_STRING","parent",66],["T_DOUBLE_COLON","::",66],["T_STRING","__construct",66],"(",["T_VARIABLE","$context",66],",",["T_WHITESPACE"," ",66],["T_VARIABLE","$entitySnapshot",66],",",["T_WHITESPACE"," ",66],["T_VARIABLE","$entityRelationComposite",66],",",["T_WHITESPACE"," ",66],["T_VARIABLE","$data",66],")",";",["T_WHITESPACE","\n        ",66],["T_VARIABLE","$this",67],["T_OBJECT_OPERATOR","->",67],["T_STRING","_scopeConfig",67],["T_WHITESPACE"," ",67],"=",["T_WHITESPACE"," ",67],["T_VARIABLE","$scopeConfig",67],";",["T_WHITESPACE","\n        ",67],["T_VARIABLE","$this",68],["T_OBJECT_OPERATOR","->",68],["T_STRING","_validatorFactory",68],["T_WHITESPACE"," ",68],"=",["T_WHITESPACE"," ",68],["T_VARIABLE","$validatorFactory",68],";",["T_WHITESPACE","\n        ",68],["T_VARIABLE","$this",69],["T_OBJECT_OPERATOR","->",69],["T_STRING","dateTime",69],["T_WHITESPACE"," ",69],"=",["T_WHITESPACE"," ",69],["T_VARIABLE","$dateTime",69],";",["T_WHITESPACE","\n        ",69],["T_VARIABLE","$this",70],["T_OBJECT_OPERATOR","->",70],["T_STRING","storeManager",70],["T_WHITESPACE"," ",70],"=",["T_WHITESPACE"," ",70],["T_VARIABLE","$storeManager",70],";",["T_WHITESPACE","\n        ",70],["T_VARIABLE","$this",71],["T_OBJECT_OPERATOR","->",71],["T_STRING","setType",71],"(",["T_CONSTANT_ENCAPSED_STRING","'customer'",71],")",";",["T_WHITESPACE","\n        ",71],["T_VARIABLE","$this",72],["T_OBJECT_OPERATOR","->",72],["T_STRING","setConnection",72],"(",["T_CONSTANT_ENCAPSED_STRING","'customer_read'",72],",",["T_WHITESPACE"," ",72],["T_CONSTANT_ENCAPSED_STRING","'customer_write'",72],")",";",["T_WHITESPACE","\n    ",72],"}",["T_WHITESPACE","\n\n    ",73],["T_DOC_COMMENT","\/**\n     * Retrieve customer entity default attributes\n     *\n     * @return string[]\n     *\/",75],["T_WHITESPACE","\n    ",79],["T_PROTECTED","protected",80],["T_WHITESPACE"," ",80],["T_FUNCTION","function",80],["T_WHITESPACE"," ",80],["T_STRING","_getDefaultAttributes",80],"(",")",["T_WHITESPACE","\n    ",80],"{",["T_WHITESPACE","\n        ",81],["T_RETURN","return",82],["T_WHITESPACE"," ",82],"[",["T_WHITESPACE","\n            ",82],["T_CONSTANT_ENCAPSED_STRING","'created_at'",83],",",["T_WHITESPACE","\n            ",83],["T_CONSTANT_ENCAPSED_STRING","'updated_at'",84],",",["T_WHITESPACE","\n            ",84],["T_CONSTANT_ENCAPSED_STRING","'increment_id'",85],",",["T_WHITESPACE","\n            ",85],["T_CONSTANT_ENCAPSED_STRING","'store_id'",86],",",["T_WHITESPACE","\n            ",86],["T_CONSTANT_ENCAPSED_STRING","'website_id'",87],["T_WHITESPACE","\n        ",87],"]",";",["T_WHITESPACE","\n    ",88],"}",["T_WHITESPACE","\n\n    ",89],["T_DOC_COMMENT","\/**\n     * Check customer scope, email and confirmation key before saving\n     *\n     * @param \\Magento\\Framework\\DataObject $customer\n     * @return $this\n     * @throws \\Magento\\Framework\\Exception\\LocalizedException\n     * @SuppressWarnings(PHPMD.CyclomaticComplexity)\n     * @SuppressWarnings(PHPMD.NPathComplexity)\n     *\/",91],["T_WHITESPACE","\n    ",99],["T_PROTECTED","protected",100],["T_WHITESPACE"," ",100],["T_FUNCTION","function",100],["T_WHITESPACE"," ",100],["T_STRING","_beforeSave",100],"(",["T_NS_SEPARATOR","\\",100],["T_STRING","Magento",100],["T_NS_SEPARATOR","\\",100],["T_STRING","Framework",100],["T_NS_SEPARATOR","\\",100],["T_STRING","DataObject",100],["T_WHITESPACE"," ",100],["T_VARIABLE","$customer",100],")",["T_WHITESPACE","\n    ",100],"{",["T_WHITESPACE","\n        ",101],["T_DOC_COMMENT","\/** @var \\Magento\\Customer\\Model\\Customer $customer *\/",102],["T_WHITESPACE","\n        ",102],["T_IF","if",103],["T_WHITESPACE"," ",103],"(",["T_VARIABLE","$customer",103],["T_OBJECT_OPERATOR","->",103],["T_STRING","getStoreId",103],"(",")",["T_WHITESPACE"," ",103],["T_IS_IDENTICAL","===",103],["T_WHITESPACE"," ",103],["T_STRING","null",103],")",["T_WHITESPACE"," ",103],"{",["T_WHITESPACE","\n            ",103],["T_VARIABLE","$customer",104],["T_OBJECT_OPERATOR","->",104],["T_STRING","setStoreId",104],"(",["T_VARIABLE","$this",104],["T_OBJECT_OPERATOR","->",104],["T_STRING","storeManager",104],["T_OBJECT_OPERATOR","->",104],["T_STRING","getStore",104],"(",")",["T_OBJECT_OPERATOR","->",104],["T_STRING","getId",104],"(",")",")",";",["T_WHITESPACE","\n        ",104],"}",["T_WHITESPACE","\n        ",105],["T_VARIABLE","$customer",106],["T_OBJECT_OPERATOR","->",106],["T_STRING","getGroupId",106],"(",")",";",["T_WHITESPACE","\n\n        ",106],["T_STRING","parent",108],["T_DOUBLE_COLON","::",108],["T_STRING","_beforeSave",108],"(",["T_VARIABLE","$customer",108],")",";",["T_WHITESPACE","\n\n        ",108],["T_IF","if",110],["T_WHITESPACE"," ",110],"(","!",["T_VARIABLE","$customer",110],["T_OBJECT_OPERATOR","->",110],["T_STRING","getEmail",110],"(",")",")",["T_WHITESPACE"," ",110],"{",["T_WHITESPACE","\n            ",110],["T_THROW","throw",111],["T_WHITESPACE"," ",111],["T_NEW","new",111],["T_WHITESPACE"," ",111],["T_STRING","ValidatorException",111],"(",["T_STRING","__",111],"(",["T_CONSTANT_ENCAPSED_STRING","'Please enter a customer email.'",111],")",")",";",["T_WHITESPACE","\n        ",111],"}",["T_WHITESPACE","\n\n        ",112],["T_VARIABLE","$connection",114],["T_WHITESPACE"," ",114],"=",["T_WHITESPACE"," ",114],["T_VARIABLE","$this",114],["T_OBJECT_OPERATOR","->",114],["T_STRING","getConnection",114],"(",")",";",["T_WHITESPACE","\n        ",114],["T_VARIABLE","$bind",115],["T_WHITESPACE"," ",115],"=",["T_WHITESPACE"," ",115],"[",["T_CONSTANT_ENCAPSED_STRING","'email'",115],["T_WHITESPACE"," ",115],["T_DOUBLE_ARROW","=>",115],["T_WHITESPACE"," ",115],["T_VARIABLE","$customer",115],["T_OBJECT_OPERATOR","->",115],["T_STRING","getEmail",115],"(",")","]",";",["T_WHITESPACE","\n\n        ",115],["T_VARIABLE","$select",117],["T_WHITESPACE"," ",117],"=",["T_WHITESPACE"," ",117],["T_VARIABLE","$connection",117],["T_OBJECT_OPERATOR","->",117],["T_STRING","select",117],"(",")",["T_OBJECT_OPERATOR","->",117],["T_STRING","from",117],"(",["T_WHITESPACE","\n            ",117],["T_VARIABLE","$this",118],["T_OBJECT_OPERATOR","->",118],["T_STRING","getEntityTable",118],"(",")",",",["T_WHITESPACE","\n            ",118],"[",["T_VARIABLE","$this",119],["T_OBJECT_OPERATOR","->",119],["T_STRING","getEntityIdField",119],"(",")","]",["T_WHITESPACE","\n        ",119],")",["T_OBJECT_OPERATOR","->",120],["T_STRING","where",120],"(",["T_WHITESPACE","\n            ",120],["T_CONSTANT_ENCAPSED_STRING","'email = :email'",121],["T_WHITESPACE","\n        ",121],")",";",["T_WHITESPACE","\n        ",122],["T_IF","if",123],["T_WHITESPACE"," ",123],"(",["T_VARIABLE","$customer",123],["T_OBJECT_OPERATOR","->",123],["T_STRING","getSharingConfig",123],"(",")",["T_OBJECT_OPERATOR","->",123],["T_STRING","isWebsiteScope",123],"(",")",")",["T_WHITESPACE"," ",123],"{",["T_WHITESPACE","\n            ",123],["T_VARIABLE","$bind",124],"[",["T_CONSTANT_ENCAPSED_STRING","'website_id'",124],"]",["T_WHITESPACE"," ",124],"=",["T_WHITESPACE"," ",124],["T_INT_CAST","(int)",124],["T_VARIABLE","$customer",124],["T_OBJECT_OPERATOR","->",124],["T_STRING","getWebsiteId",124],"(",")",";",["T_WHITESPACE","\n            ",124],["T_VARIABLE","$select",125],["T_OBJECT_OPERATOR","->",125],["T_STRING","where",125],"(",["T_CONSTANT_ENCAPSED_STRING","'website_id = :website_id'",125],")",";",["T_WHITESPACE","\n        ",125],"}",["T_WHITESPACE","\n        ",126],["T_IF","if",127],["T_WHITESPACE"," ",127],"(",["T_VARIABLE","$customer",127],["T_OBJECT_OPERATOR","->",127],["T_STRING","getId",127],"(",")",")",["T_WHITESPACE"," ",127],"{",["T_WHITESPACE","\n            ",127],["T_VARIABLE","$bind",128],"[",["T_CONSTANT_ENCAPSED_STRING","'entity_id'",128],"]",["T_WHITESPACE"," ",128],"=",["T_WHITESPACE"," ",128],["T_INT_CAST","(int)",128],["T_VARIABLE","$customer",128],["T_OBJECT_OPERATOR","->",128],["T_STRING","getId",128],"(",")",";",["T_WHITESPACE","\n            ",128],["T_VARIABLE","$select",129],["T_OBJECT_OPERATOR","->",129],["T_STRING","where",129],"(",["T_CONSTANT_ENCAPSED_STRING","'entity_id != :entity_id'",129],")",";",["T_WHITESPACE","\n        ",129],"}",["T_WHITESPACE","\n\n        ",130],["T_VARIABLE","$result",132],["T_WHITESPACE"," ",132],"=",["T_WHITESPACE"," ",132],["T_VARIABLE","$connection",132],["T_OBJECT_OPERATOR","->",132],["T_STRING","fetchOne",132],"(",["T_VARIABLE","$select",132],",",["T_WHITESPACE"," ",132],["T_VARIABLE","$bind",132],")",";",["T_WHITESPACE","\n        ",132],["T_IF","if",133],["T_WHITESPACE"," ",133],"(",["T_VARIABLE","$result",133],")",["T_WHITESPACE"," ",133],"{",["T_WHITESPACE","\n            ",133],["T_THROW","throw",134],["T_WHITESPACE"," ",134],["T_NEW","new",134],["T_WHITESPACE"," ",134],["T_STRING","AlreadyExistsException",134],"(",["T_WHITESPACE","\n                ",134],["T_STRING","__",135],"(",["T_CONSTANT_ENCAPSED_STRING","'A customer with the same email already exists in an associated website.'",135],")",["T_WHITESPACE","\n            ",135],")",";",["T_WHITESPACE","\n        ",136],"}",["T_WHITESPACE","\n\n        ",137],["T_COMMENT","\/\/ set confirmation key logic\n",139],["T_WHITESPACE","        ",140],["T_IF","if",140],["T_WHITESPACE"," ",140],"(",["T_VARIABLE","$customer",140],["T_OBJECT_OPERATOR","->",140],["T_STRING","getForceConfirmed",140],"(",")",["T_WHITESPACE"," ",140],["T_BOOLEAN_OR","||",140],["T_WHITESPACE"," ",140],["T_VARIABLE","$customer",140],["T_OBJECT_OPERATOR","->",140],["T_STRING","getPasswordHash",140],"(",")",["T_WHITESPACE"," ",140],["T_IS_EQUAL","==",140],["T_WHITESPACE"," ",140],["T_CONSTANT_ENCAPSED_STRING","''",140],")",["T_WHITESPACE"," ",140],"{",["T_WHITESPACE","\n            ",140],["T_VARIABLE","$customer",141],["T_OBJECT_OPERATOR","->",141],["T_STRING","setConfirmation",141],"(",["T_STRING","null",141],")",";",["T_WHITESPACE","\n        ",141],"}",["T_WHITESPACE"," ",142],["T_ELSEIF","elseif",142],["T_WHITESPACE"," ",142],"(","!",["T_VARIABLE","$customer",142],["T_OBJECT_OPERATOR","->",142],["T_STRING","getId",142],"(",")",["T_WHITESPACE"," ",142],["T_BOOLEAN_AND","&&",142],["T_WHITESPACE"," ",142],["T_VARIABLE","$customer",142],["T_OBJECT_OPERATOR","->",142],["T_STRING","isConfirmationRequired",142],"(",")",")",["T_WHITESPACE"," ",142],"{",["T_WHITESPACE","\n            ",142],["T_VARIABLE","$customer",143],["T_OBJECT_OPERATOR","->",143],["T_STRING","setConfirmation",143],"(",["T_VARIABLE","$customer",143],["T_OBJECT_OPERATOR","->",143],["T_STRING","getRandomConfirmationKey",143],"(",")",")",";",["T_WHITESPACE","\n        ",143],"}",["T_WHITESPACE","\n        ",144],["T_COMMENT","\/\/ remove customer confirmation key from database, if empty\n",145],["T_WHITESPACE","        ",146],["T_IF","if",146],["T_WHITESPACE"," ",146],"(","!",["T_VARIABLE","$customer",146],["T_OBJECT_OPERATOR","->",146],["T_STRING","getConfirmation",146],"(",")",")",["T_WHITESPACE"," ",146],"{",["T_WHITESPACE","\n            ",146],["T_VARIABLE","$customer",147],["T_OBJECT_OPERATOR","->",147],["T_STRING","setConfirmation",147],"(",["T_STRING","null",147],")",";",["T_WHITESPACE","\n        ",147],"}",["T_WHITESPACE","\n\n        ",148],["T_VARIABLE","$this",150],["T_OBJECT_OPERATOR","->",150],["T_STRING","_validate",150],"(",["T_VARIABLE","$customer",150],")",";",["T_WHITESPACE","\n\n        ",150],["T_RETURN","return",152],["T_WHITESPACE"," ",152],["T_VARIABLE","$this",152],";",["T_WHITESPACE","\n    ",152],"}",["T_WHITESPACE","\n\n    ",153],["T_DOC_COMMENT","\/**\n     * Validate customer entity\n     *\n     * @param \\Magento\\Customer\\Model\\Customer $customer\n     * @return void\n     * @throws \\Magento\\Framework\\Validator\\Exception\n     *\/",155],["T_WHITESPACE","\n    ",161],["T_PROTECTED","protected",162],["T_WHITESPACE"," ",162],["T_FUNCTION","function",162],["T_WHITESPACE"," ",162],["T_STRING","_validate",162],"(",["T_VARIABLE","$customer",162],")",["T_WHITESPACE","\n    ",162],"{",["T_WHITESPACE","\n        ",163],["T_VARIABLE","$validator",164],["T_WHITESPACE"," ",164],"=",["T_WHITESPACE"," ",164],["T_VARIABLE","$this",164],["T_OBJECT_OPERATOR","->",164],["T_STRING","_validatorFactory",164],["T_OBJECT_OPERATOR","->",164],["T_STRING","createValidator",164],"(",["T_CONSTANT_ENCAPSED_STRING","'customer'",164],",",["T_WHITESPACE"," ",164],["T_CONSTANT_ENCAPSED_STRING","'save'",164],")",";",["T_WHITESPACE","\n\n        ",164],["T_IF","if",166],["T_WHITESPACE"," ",166],"(","!",["T_VARIABLE","$validator",166],["T_OBJECT_OPERATOR","->",166],["T_STRING","isValid",166],"(",["T_VARIABLE","$customer",166],")",")",["T_WHITESPACE"," ",166],"{",["T_WHITESPACE","\n            ",166],["T_THROW","throw",167],["T_WHITESPACE"," ",167],["T_NEW","new",167],["T_WHITESPACE"," ",167],["T_STRING","ValidatorException",167],"(",["T_WHITESPACE","\n                ",167],["T_STRING","null",168],",",["T_WHITESPACE","\n                ",168],["T_STRING","null",169],",",["T_WHITESPACE","\n                ",169],["T_VARIABLE","$validator",170],["T_OBJECT_OPERATOR","->",170],["T_STRING","getMessages",170],"(",")",["T_WHITESPACE","\n            ",170],")",";",["T_WHITESPACE","\n        ",171],"}",["T_WHITESPACE","\n    ",172],"}",["T_WHITESPACE","\n\n    ",173],["T_DOC_COMMENT","\/**\n     * Retrieve notification storage\n     *\n     * @return NotificationStorage\n     *\/",175],["T_WHITESPACE","\n    ",179],["T_PRIVATE","private",180],["T_WHITESPACE"," ",180],["T_FUNCTION","function",180],["T_WHITESPACE"," ",180],["T_STRING","getNotificationStorage",180],"(",")",["T_WHITESPACE","\n    ",180],"{",["T_WHITESPACE","\n        ",181],["T_IF","if",182],["T_WHITESPACE"," ",182],"(",["T_VARIABLE","$this",182],["T_OBJECT_OPERATOR","->",182],["T_STRING","notificationStorage",182],["T_WHITESPACE"," ",182],["T_IS_IDENTICAL","===",182],["T_WHITESPACE"," ",182],["T_STRING","null",182],")",["T_WHITESPACE"," ",182],"{",["T_WHITESPACE","\n            ",182],["T_VARIABLE","$this",183],["T_OBJECT_OPERATOR","->",183],["T_STRING","notificationStorage",183],["T_WHITESPACE"," ",183],"=",["T_WHITESPACE"," ",183],["T_STRING","ObjectManager",183],["T_DOUBLE_COLON","::",183],["T_STRING","getInstance",183],"(",")",["T_OBJECT_OPERATOR","->",183],["T_STRING","get",183],"(",["T_STRING","NotificationStorage",183],["T_DOUBLE_COLON","::",183],["T_CLASS","class",183],")",";",["T_WHITESPACE","\n        ",183],"}",["T_WHITESPACE","\n        ",184],["T_RETURN","return",185],["T_WHITESPACE"," ",185],["T_VARIABLE","$this",185],["T_OBJECT_OPERATOR","->",185],["T_STRING","notificationStorage",185],";",["T_WHITESPACE","\n    ",185],"}",["T_WHITESPACE","\n\n    ",186],["T_DOC_COMMENT","\/**\n     * Save customer addresses and set default addresses in attributes backend\n     *\n     * @param \\Magento\\Framework\\DataObject $customer\n     * @return $this\n     *\/",188],["T_WHITESPACE","\n    ",193],["T_PROTECTED","protected",194],["T_WHITESPACE"," ",194],["T_FUNCTION","function",194],["T_WHITESPACE"," ",194],["T_STRING","_afterSave",194],"(",["T_NS_SEPARATOR","\\",194],["T_STRING","Magento",194],["T_NS_SEPARATOR","\\",194],["T_STRING","Framework",194],["T_NS_SEPARATOR","\\",194],["T_STRING","DataObject",194],["T_WHITESPACE"," ",194],["T_VARIABLE","$customer",194],")",["T_WHITESPACE","\n    ",194],"{",["T_WHITESPACE","\n        ",195],["T_VARIABLE","$this",196],["T_OBJECT_OPERATOR","->",196],["T_STRING","getNotificationStorage",196],"(",")",["T_OBJECT_OPERATOR","->",196],["T_STRING","add",196],"(",["T_WHITESPACE","\n            ",196],["T_STRING","NotificationStorage",197],["T_DOUBLE_COLON","::",197],["T_STRING","UPDATE_CUSTOMER_SESSION",197],",",["T_WHITESPACE","\n            ",197],["T_VARIABLE","$customer",198],["T_OBJECT_OPERATOR","->",198],["T_STRING","getId",198],"(",")",["T_WHITESPACE","\n        ",198],")",";",["T_WHITESPACE","\n        ",199],["T_RETURN","return",200],["T_WHITESPACE"," ",200],["T_STRING","parent",200],["T_DOUBLE_COLON","::",200],["T_STRING","_afterSave",200],"(",["T_VARIABLE","$customer",200],")",";",["T_WHITESPACE","\n    ",200],"}",["T_WHITESPACE","\n\n    ",201],["T_DOC_COMMENT","\/**\n     * Retrieve select object for loading base entity row\n     *\n     * @param \\Magento\\Framework\\DataObject $object\n     * @param string|int $rowId\n     * @return \\Magento\\Framework\\DB\\Select\n     *\/",203],["T_WHITESPACE","\n    ",209],["T_PROTECTED","protected",210],["T_WHITESPACE"," ",210],["T_FUNCTION","function",210],["T_WHITESPACE"," ",210],["T_STRING","_getLoadRowSelect",210],"(",["T_VARIABLE","$object",210],",",["T_WHITESPACE"," ",210],["T_VARIABLE","$rowId",210],")",["T_WHITESPACE","\n    ",210],"{",["T_WHITESPACE","\n        ",211],["T_VARIABLE","$select",212],["T_WHITESPACE"," ",212],"=",["T_WHITESPACE"," ",212],["T_STRING","parent",212],["T_DOUBLE_COLON","::",212],["T_STRING","_getLoadRowSelect",212],"(",["T_VARIABLE","$object",212],",",["T_WHITESPACE"," ",212],["T_VARIABLE","$rowId",212],")",";",["T_WHITESPACE","\n        ",212],["T_IF","if",213],["T_WHITESPACE"," ",213],"(",["T_VARIABLE","$object",213],["T_OBJECT_OPERATOR","->",213],["T_STRING","getWebsiteId",213],"(",")",["T_WHITESPACE"," ",213],["T_BOOLEAN_AND","&&",213],["T_WHITESPACE"," ",213],["T_VARIABLE","$object",213],["T_OBJECT_OPERATOR","->",213],["T_STRING","getSharingConfig",213],"(",")",["T_OBJECT_OPERATOR","->",213],["T_STRING","isWebsiteScope",213],"(",")",")",["T_WHITESPACE"," ",213],"{",["T_WHITESPACE","\n            ",213],["T_VARIABLE","$select",214],["T_OBJECT_OPERATOR","->",214],["T_STRING","where",214],"(",["T_CONSTANT_ENCAPSED_STRING","'website_id =?'",214],",",["T_WHITESPACE"," ",214],["T_INT_CAST","(int)",214],["T_VARIABLE","$object",214],["T_OBJECT_OPERATOR","->",214],["T_STRING","getWebsiteId",214],"(",")",")",";",["T_WHITESPACE","\n        ",214],"}",["T_WHITESPACE","\n\n        ",215],["T_RETURN","return",217],["T_WHITESPACE"," ",217],["T_VARIABLE","$select",217],";",["T_WHITESPACE","\n    ",217],"}",["T_WHITESPACE","\n\n    ",218],["T_DOC_COMMENT","\/**\n     * Load customer by email\n     *\n     * @param \\Magento\\Customer\\Model\\Customer $customer\n     * @param string $email\n     * @return $this\n     * @throws \\Magento\\Framework\\Exception\\LocalizedException\n     *\/",220],["T_WHITESPACE","\n    ",227],["T_PUBLIC","public",228],["T_WHITESPACE"," ",228],["T_FUNCTION","function",228],["T_WHITESPACE"," ",228],["T_STRING","loadByEmail",228],"(",["T_NS_SEPARATOR","\\",228],["T_STRING","Magento",228],["T_NS_SEPARATOR","\\",228],["T_STRING","Customer",228],["T_NS_SEPARATOR","\\",228],["T_STRING","Model",228],["T_NS_SEPARATOR","\\",228],["T_STRING","Customer",228],["T_WHITESPACE"," ",228],["T_VARIABLE","$customer",228],",",["T_WHITESPACE"," ",228],["T_VARIABLE","$email",228],")",["T_WHITESPACE","\n    ",228],"{",["T_WHITESPACE","\n        ",229],["T_VARIABLE","$connection",230],["T_WHITESPACE"," ",230],"=",["T_WHITESPACE"," ",230],["T_VARIABLE","$this",230],["T_OBJECT_OPERATOR","->",230],["T_STRING","getConnection",230],"(",")",";",["T_WHITESPACE","\n        ",230],["T_VARIABLE","$bind",231],["T_WHITESPACE"," ",231],"=",["T_WHITESPACE"," ",231],"[",["T_CONSTANT_ENCAPSED_STRING","'customer_email'",231],["T_WHITESPACE"," ",231],["T_DOUBLE_ARROW","=>",231],["T_WHITESPACE"," ",231],["T_VARIABLE","$email",231],"]",";",["T_WHITESPACE","\n        ",231],["T_VARIABLE","$select",232],["T_WHITESPACE"," ",232],"=",["T_WHITESPACE"," ",232],["T_VARIABLE","$connection",232],["T_OBJECT_OPERATOR","->",232],["T_STRING","select",232],"(",")",["T_OBJECT_OPERATOR","->",232],["T_STRING","from",232],"(",["T_WHITESPACE","\n            ",232],["T_VARIABLE","$this",233],["T_OBJECT_OPERATOR","->",233],["T_STRING","getEntityTable",233],"(",")",",",["T_WHITESPACE","\n            ",233],"[",["T_VARIABLE","$this",234],["T_OBJECT_OPERATOR","->",234],["T_STRING","getEntityIdField",234],"(",")","]",["T_WHITESPACE","\n        ",234],")",["T_OBJECT_OPERATOR","->",235],["T_STRING","where",235],"(",["T_WHITESPACE","\n            ",235],["T_CONSTANT_ENCAPSED_STRING","'email = :customer_email'",236],["T_WHITESPACE","\n        ",236],")",";",["T_WHITESPACE","\n\n        ",237],["T_IF","if",239],["T_WHITESPACE"," ",239],"(",["T_VARIABLE","$customer",239],["T_OBJECT_OPERATOR","->",239],["T_STRING","getSharingConfig",239],"(",")",["T_OBJECT_OPERATOR","->",239],["T_STRING","isWebsiteScope",239],"(",")",")",["T_WHITESPACE"," ",239],"{",["T_WHITESPACE","\n            ",239],["T_IF","if",240],["T_WHITESPACE"," ",240],"(","!",["T_VARIABLE","$customer",240],["T_OBJECT_OPERATOR","->",240],["T_STRING","hasData",240],"(",["T_CONSTANT_ENCAPSED_STRING","'website_id'",240],")",")",["T_WHITESPACE"," ",240],"{",["T_WHITESPACE","\n                ",240],["T_THROW","throw",241],["T_WHITESPACE"," ",241],["T_NEW","new",241],["T_WHITESPACE"," ",241],["T_NS_SEPARATOR","\\",241],["T_STRING","Magento",241],["T_NS_SEPARATOR","\\",241],["T_STRING","Framework",241],["T_NS_SEPARATOR","\\",241],["T_STRING","Exception",241],["T_NS_SEPARATOR","\\",241],["T_STRING","LocalizedException",241],"(",["T_WHITESPACE","\n                    ",241],["T_STRING","__",242],"(",["T_CONSTANT_ENCAPSED_STRING","'A customer website ID must be specified when using the website scope.'",242],")",["T_WHITESPACE","\n                ",242],")",";",["T_WHITESPACE","\n            ",243],"}",["T_WHITESPACE","\n            ",244],["T_VARIABLE","$bind",245],"[",["T_CONSTANT_ENCAPSED_STRING","'website_id'",245],"]",["T_WHITESPACE"," ",245],"=",["T_WHITESPACE"," ",245],["T_INT_CAST","(int)",245],["T_VARIABLE","$customer",245],["T_OBJECT_OPERATOR","->",245],["T_STRING","getWebsiteId",245],"(",")",";",["T_WHITESPACE","\n            ",245],["T_VARIABLE","$select",246],["T_OBJECT_OPERATOR","->",246],["T_STRING","where",246],"(",["T_CONSTANT_ENCAPSED_STRING","'website_id = :website_id'",246],")",";",["T_WHITESPACE","\n        ",246],"}",["T_WHITESPACE","\n\n        ",247],["T_VARIABLE","$customerId",249],["T_WHITESPACE"," ",249],"=",["T_WHITESPACE"," ",249],["T_VARIABLE","$connection",249],["T_OBJECT_OPERATOR","->",249],["T_STRING","fetchOne",249],"(",["T_VARIABLE","$select",249],",",["T_WHITESPACE"," ",249],["T_VARIABLE","$bind",249],")",";",["T_WHITESPACE","\n        ",249],["T_IF","if",250],["T_WHITESPACE"," ",250],"(",["T_VARIABLE","$customerId",250],")",["T_WHITESPACE"," ",250],"{",["T_WHITESPACE","\n            ",250],["T_VARIABLE","$this",251],["T_OBJECT_OPERATOR","->",251],["T_STRING","load",251],"(",["T_VARIABLE","$customer",251],",",["T_WHITESPACE"," ",251],["T_VARIABLE","$customerId",251],")",";",["T_WHITESPACE","\n        ",251],"}",["T_WHITESPACE"," ",252],["T_ELSE","else",252],["T_WHITESPACE"," ",252],"{",["T_WHITESPACE","\n            ",252],["T_VARIABLE","$customer",253],["T_OBJECT_OPERATOR","->",253],["T_STRING","setData",253],"(","[","]",")",";",["T_WHITESPACE","\n        ",253],"}",["T_WHITESPACE","\n\n        ",254],["T_RETURN","return",256],["T_WHITESPACE"," ",256],["T_VARIABLE","$this",256],";",["T_WHITESPACE","\n    ",256],"}",["T_WHITESPACE","\n\n    ",257],["T_DOC_COMMENT","\/**\n     * Change customer password\n     *\n     * @param \\Magento\\Customer\\Model\\Customer $customer\n     * @param string $newPassword\n     * @return $this\n     *\/",259],["T_WHITESPACE","\n    ",265],["T_PUBLIC","public",266],["T_WHITESPACE"," ",266],["T_FUNCTION","function",266],["T_WHITESPACE"," ",266],["T_STRING","changePassword",266],"(",["T_NS_SEPARATOR","\\",266],["T_STRING","Magento",266],["T_NS_SEPARATOR","\\",266],["T_STRING","Customer",266],["T_NS_SEPARATOR","\\",266],["T_STRING","Model",266],["T_NS_SEPARATOR","\\",266],["T_STRING","Customer",266],["T_WHITESPACE"," ",266],["T_VARIABLE","$customer",266],",",["T_WHITESPACE"," ",266],["T_VARIABLE","$newPassword",266],")",["T_WHITESPACE","\n    ",266],"{",["T_WHITESPACE","\n        ",267],["T_VARIABLE","$customer",268],["T_OBJECT_OPERATOR","->",268],["T_STRING","setPassword",268],"(",["T_VARIABLE","$newPassword",268],")",";",["T_WHITESPACE","\n        ",268],["T_RETURN","return",269],["T_WHITESPACE"," ",269],["T_VARIABLE","$this",269],";",["T_WHITESPACE","\n    ",269],"}",["T_WHITESPACE","\n\n    ",270],["T_DOC_COMMENT","\/**\n     * Check whether there are email duplicates of customers in global scope\n     *\n     * @return bool\n     *\/",272],["T_WHITESPACE","\n    ",276],["T_PUBLIC","public",277],["T_WHITESPACE"," ",277],["T_FUNCTION","function",277],["T_WHITESPACE"," ",277],["T_STRING","findEmailDuplicates",277],"(",")",["T_WHITESPACE","\n    ",277],"{",["T_WHITESPACE","\n        ",278],["T_VARIABLE","$connection",279],["T_WHITESPACE"," ",279],"=",["T_WHITESPACE"," ",279],["T_VARIABLE","$this",279],["T_OBJECT_OPERATOR","->",279],["T_STRING","getConnection",279],"(",")",";",["T_WHITESPACE","\n        ",279],["T_VARIABLE","$select",280],["T_WHITESPACE"," ",280],"=",["T_WHITESPACE"," ",280],["T_VARIABLE","$connection",280],["T_OBJECT_OPERATOR","->",280],["T_STRING","select",280],"(",")",["T_OBJECT_OPERATOR","->",280],["T_STRING","from",280],"(",["T_WHITESPACE","\n            ",280],["T_VARIABLE","$this",281],["T_OBJECT_OPERATOR","->",281],["T_STRING","getTable",281],"(",["T_CONSTANT_ENCAPSED_STRING","'customer_entity'",281],")",",",["T_WHITESPACE","\n            ",281],"[",["T_CONSTANT_ENCAPSED_STRING","'email'",282],",",["T_WHITESPACE"," ",282],["T_CONSTANT_ENCAPSED_STRING","'cnt'",282],["T_WHITESPACE"," ",282],["T_DOUBLE_ARROW","=>",282],["T_WHITESPACE"," ",282],["T_CONSTANT_ENCAPSED_STRING","'COUNT(*)'",282],"]",["T_WHITESPACE","\n        ",282],")",["T_OBJECT_OPERATOR","->",283],["T_STRING","group",283],"(",["T_WHITESPACE","\n            ",283],["T_CONSTANT_ENCAPSED_STRING","'email'",284],["T_WHITESPACE","\n        ",284],")",["T_OBJECT_OPERATOR","->",285],["T_STRING","order",285],"(",["T_WHITESPACE","\n            ",285],["T_CONSTANT_ENCAPSED_STRING","'cnt DESC'",286],["T_WHITESPACE","\n        ",286],")",["T_OBJECT_OPERATOR","->",287],["T_STRING","limit",287],"(",["T_WHITESPACE","\n            ",287],["T_LNUMBER","1",288],["T_WHITESPACE","\n        ",288],")",";",["T_WHITESPACE","\n        ",289],["T_VARIABLE","$lookup",290],["T_WHITESPACE"," ",290],"=",["T_WHITESPACE"," ",290],["T_VARIABLE","$connection",290],["T_OBJECT_OPERATOR","->",290],["T_STRING","fetchRow",290],"(",["T_VARIABLE","$select",290],")",";",["T_WHITESPACE","\n        ",290],["T_IF","if",291],["T_WHITESPACE"," ",291],"(",["T_EMPTY","empty",291],"(",["T_VARIABLE","$lookup",291],")",")",["T_WHITESPACE"," ",291],"{",["T_WHITESPACE","\n            ",291],["T_RETURN","return",292],["T_WHITESPACE"," ",292],["T_STRING","false",292],";",["T_WHITESPACE","\n        ",292],"}",["T_WHITESPACE","\n        ",293],["T_RETURN","return",294],["T_WHITESPACE"," ",294],["T_VARIABLE","$lookup",294],"[",["T_CONSTANT_ENCAPSED_STRING","'cnt'",294],"]",["T_WHITESPACE"," ",294],">",["T_WHITESPACE"," ",294],["T_LNUMBER","1",294],";",["T_WHITESPACE","\n    ",294],"}",["T_WHITESPACE","\n\n    ",295],["T_DOC_COMMENT","\/**\n     * Check customer by id\n     *\n     * @param int $customerId\n     * @return bool\n     *\/",297],["T_WHITESPACE","\n    ",302],["T_PUBLIC","public",303],["T_WHITESPACE"," ",303],["T_FUNCTION","function",303],["T_WHITESPACE"," ",303],["T_STRING","checkCustomerId",303],"(",["T_VARIABLE","$customerId",303],")",["T_WHITESPACE","\n    ",303],"{",["T_WHITESPACE","\n        ",304],["T_VARIABLE","$connection",305],["T_WHITESPACE"," ",305],"=",["T_WHITESPACE"," ",305],["T_VARIABLE","$this",305],["T_OBJECT_OPERATOR","->",305],["T_STRING","getConnection",305],"(",")",";",["T_WHITESPACE","\n        ",305],["T_VARIABLE","$bind",306],["T_WHITESPACE"," ",306],"=",["T_WHITESPACE"," ",306],"[",["T_CONSTANT_ENCAPSED_STRING","'entity_id'",306],["T_WHITESPACE"," ",306],["T_DOUBLE_ARROW","=>",306],["T_WHITESPACE"," ",306],["T_INT_CAST","(int)",306],["T_VARIABLE","$customerId",306],"]",";",["T_WHITESPACE","\n        ",306],["T_VARIABLE","$select",307],["T_WHITESPACE"," ",307],"=",["T_WHITESPACE"," ",307],["T_VARIABLE","$connection",307],["T_OBJECT_OPERATOR","->",307],["T_STRING","select",307],"(",")",["T_OBJECT_OPERATOR","->",307],["T_STRING","from",307],"(",["T_WHITESPACE","\n            ",307],["T_VARIABLE","$this",308],["T_OBJECT_OPERATOR","->",308],["T_STRING","getTable",308],"(",["T_CONSTANT_ENCAPSED_STRING","'customer_entity'",308],")",",",["T_WHITESPACE","\n            ",308],["T_CONSTANT_ENCAPSED_STRING","'entity_id'",309],["T_WHITESPACE","\n        ",309],")",["T_OBJECT_OPERATOR","->",310],["T_STRING","where",310],"(",["T_WHITESPACE","\n            ",310],["T_CONSTANT_ENCAPSED_STRING","'entity_id = :entity_id'",311],["T_WHITESPACE","\n        ",311],")",["T_OBJECT_OPERATOR","->",312],["T_STRING","limit",312],"(",["T_WHITESPACE","\n            ",312],["T_LNUMBER","1",313],["T_WHITESPACE","\n        ",313],")",";",["T_WHITESPACE","\n\n        ",314],["T_VARIABLE","$result",316],["T_WHITESPACE"," ",316],"=",["T_WHITESPACE"," ",316],["T_VARIABLE","$connection",316],["T_OBJECT_OPERATOR","->",316],["T_STRING","fetchOne",316],"(",["T_VARIABLE","$select",316],",",["T_WHITESPACE"," ",316],["T_VARIABLE","$bind",316],")",";",["T_WHITESPACE","\n        ",316],["T_IF","if",317],["T_WHITESPACE"," ",317],"(",["T_VARIABLE","$result",317],")",["T_WHITESPACE"," ",317],"{",["T_WHITESPACE","\n            ",317],["T_RETURN","return",318],["T_WHITESPACE"," ",318],["T_STRING","true",318],";",["T_WHITESPACE","\n        ",318],"}",["T_WHITESPACE","\n        ",319],["T_RETURN","return",320],["T_WHITESPACE"," ",320],["T_STRING","false",320],";",["T_WHITESPACE","\n    ",320],"}",["T_WHITESPACE","\n\n    ",321],["T_DOC_COMMENT","\/**\n     * Get customer website id\n     *\n     * @param int $customerId\n     * @return int\n     *\/",323],["T_WHITESPACE","\n    ",328],["T_PUBLIC","public",329],["T_WHITESPACE"," ",329],["T_FUNCTION","function",329],["T_WHITESPACE"," ",329],["T_STRING","getWebsiteId",329],"(",["T_VARIABLE","$customerId",329],")",["T_WHITESPACE","\n    ",329],"{",["T_WHITESPACE","\n        ",330],["T_VARIABLE","$connection",331],["T_WHITESPACE"," ",331],"=",["T_WHITESPACE"," ",331],["T_VARIABLE","$this",331],["T_OBJECT_OPERATOR","->",331],["T_STRING","getConnection",331],"(",")",";",["T_WHITESPACE","\n        ",331],["T_VARIABLE","$bind",332],["T_WHITESPACE"," ",332],"=",["T_WHITESPACE"," ",332],"[",["T_CONSTANT_ENCAPSED_STRING","'entity_id'",332],["T_WHITESPACE"," ",332],["T_DOUBLE_ARROW","=>",332],["T_WHITESPACE"," ",332],["T_INT_CAST","(int)",332],["T_VARIABLE","$customerId",332],"]",";",["T_WHITESPACE","\n        ",332],["T_VARIABLE","$select",333],["T_WHITESPACE"," ",333],"=",["T_WHITESPACE"," ",333],["T_VARIABLE","$connection",333],["T_OBJECT_OPERATOR","->",333],["T_STRING","select",333],"(",")",["T_OBJECT_OPERATOR","->",333],["T_STRING","from",333],"(",["T_WHITESPACE","\n            ",333],["T_VARIABLE","$this",334],["T_OBJECT_OPERATOR","->",334],["T_STRING","getTable",334],"(",["T_CONSTANT_ENCAPSED_STRING","'customer_entity'",334],")",",",["T_WHITESPACE","\n            ",334],["T_CONSTANT_ENCAPSED_STRING","'website_id'",335],["T_WHITESPACE","\n        ",335],")",["T_OBJECT_OPERATOR","->",336],["T_STRING","where",336],"(",["T_WHITESPACE","\n            ",336],["T_CONSTANT_ENCAPSED_STRING","'entity_id = :entity_id'",337],["T_WHITESPACE","\n        ",337],")",";",["T_WHITESPACE","\n\n        ",338],["T_RETURN","return",340],["T_WHITESPACE"," ",340],["T_VARIABLE","$connection",340],["T_OBJECT_OPERATOR","->",340],["T_STRING","fetchOne",340],"(",["T_VARIABLE","$select",340],",",["T_WHITESPACE"," ",340],["T_VARIABLE","$bind",340],")",";",["T_WHITESPACE","\n    ",340],"}",["T_WHITESPACE","\n\n    ",341],["T_DOC_COMMENT","\/**\n     * Custom setter of increment ID if its needed\n     *\n     * @param \\Magento\\Framework\\DataObject $object\n     * @return $this\n     *\/",343],["T_WHITESPACE","\n    ",348],["T_PUBLIC","public",349],["T_WHITESPACE"," ",349],["T_FUNCTION","function",349],["T_WHITESPACE"," ",349],["T_STRING","setNewIncrementId",349],"(",["T_NS_SEPARATOR","\\",349],["T_STRING","Magento",349],["T_NS_SEPARATOR","\\",349],["T_STRING","Framework",349],["T_NS_SEPARATOR","\\",349],["T_STRING","DataObject",349],["T_WHITESPACE"," ",349],["T_VARIABLE","$object",349],")",["T_WHITESPACE","\n    ",349],"{",["T_WHITESPACE","\n        ",350],["T_IF","if",351],["T_WHITESPACE"," ",351],"(",["T_VARIABLE","$this",351],["T_OBJECT_OPERATOR","->",351],["T_STRING","_scopeConfig",351],["T_OBJECT_OPERATOR","->",351],["T_STRING","getValue",351],"(",["T_WHITESPACE","\n            ",351],["T_NS_SEPARATOR","\\",352],["T_STRING","Magento",352],["T_NS_SEPARATOR","\\",352],["T_STRING","Customer",352],["T_NS_SEPARATOR","\\",352],["T_STRING","Model",352],["T_NS_SEPARATOR","\\",352],["T_STRING","Customer",352],["T_DOUBLE_COLON","::",352],["T_STRING","XML_PATH_GENERATE_HUMAN_FRIENDLY_ID",352],",",["T_WHITESPACE","\n            ",352],["T_NS_SEPARATOR","\\",353],["T_STRING","Magento",353],["T_NS_SEPARATOR","\\",353],["T_STRING","Store",353],["T_NS_SEPARATOR","\\",353],["T_STRING","Model",353],["T_NS_SEPARATOR","\\",353],["T_STRING","ScopeInterface",353],["T_DOUBLE_COLON","::",353],["T_STRING","SCOPE_STORE",353],["T_WHITESPACE","\n        ",353],")",["T_WHITESPACE","\n        ",354],")",["T_WHITESPACE"," ",355],"{",["T_WHITESPACE","\n            ",355],["T_STRING","parent",356],["T_DOUBLE_COLON","::",356],["T_STRING","setNewIncrementId",356],"(",["T_VARIABLE","$object",356],")",";",["T_WHITESPACE","\n        ",356],"}",["T_WHITESPACE","\n        ",357],["T_RETURN","return",358],["T_WHITESPACE"," ",358],["T_VARIABLE","$this",358],";",["T_WHITESPACE","\n    ",358],"}",["T_WHITESPACE","\n\n    ",359],["T_DOC_COMMENT","\/**\n     * Change reset password link token\n     *\n     * Stores new reset password link token and its creation time\n     *\n     * @param \\Magento\\Customer\\Model\\Customer $customer\n     * @param string $passwordLinkToken\n     * @return $this\n     *\/",361],["T_WHITESPACE","\n    ",369],["T_PUBLIC","public",370],["T_WHITESPACE"," ",370],["T_FUNCTION","function",370],["T_WHITESPACE"," ",370],["T_STRING","changeResetPasswordLinkToken",370],"(",["T_NS_SEPARATOR","\\",370],["T_STRING","Magento",370],["T_NS_SEPARATOR","\\",370],["T_STRING","Customer",370],["T_NS_SEPARATOR","\\",370],["T_STRING","Model",370],["T_NS_SEPARATOR","\\",370],["T_STRING","Customer",370],["T_WHITESPACE"," ",370],["T_VARIABLE","$customer",370],",",["T_WHITESPACE"," ",370],["T_VARIABLE","$passwordLinkToken",370],")",["T_WHITESPACE","\n    ",370],"{",["T_WHITESPACE","\n        ",371],["T_IF","if",372],["T_WHITESPACE"," ",372],"(",["T_STRING","is_string",372],"(",["T_VARIABLE","$passwordLinkToken",372],")",["T_WHITESPACE"," ",372],["T_BOOLEAN_AND","&&",372],["T_WHITESPACE"," ",372],"!",["T_EMPTY","empty",372],"(",["T_VARIABLE","$passwordLinkToken",372],")",")",["T_WHITESPACE"," ",372],"{",["T_WHITESPACE","\n            ",372],["T_VARIABLE","$customer",373],["T_OBJECT_OPERATOR","->",373],["T_STRING","setRpToken",373],"(",["T_VARIABLE","$passwordLinkToken",373],")",";",["T_WHITESPACE","\n            ",373],["T_VARIABLE","$customer",374],["T_OBJECT_OPERATOR","->",374],["T_STRING","setRpTokenCreatedAt",374],"(",["T_WHITESPACE","\n                ",374],"(",["T_NEW","new",375],["T_WHITESPACE"," ",375],["T_NS_SEPARATOR","\\",375],["T_STRING","DateTime",375],"(",")",")",["T_OBJECT_OPERATOR","->",375],["T_STRING","format",375],"(",["T_NS_SEPARATOR","\\",375],["T_STRING","Magento",375],["T_NS_SEPARATOR","\\",375],["T_STRING","Framework",375],["T_NS_SEPARATOR","\\",375],["T_STRING","Stdlib",375],["T_NS_SEPARATOR","\\",375],["T_STRING","DateTime",375],["T_DOUBLE_COLON","::",375],["T_STRING","DATETIME_PHP_FORMAT",375],")",["T_WHITESPACE","\n            ",375],")",";",["T_WHITESPACE","\n        ",376],"}",["T_WHITESPACE","\n        ",377],["T_RETURN","return",378],["T_WHITESPACE"," ",378],["T_VARIABLE","$this",378],";",["T_WHITESPACE","\n    ",378],"}",["T_WHITESPACE","\n",379],"}",["T_WHITESPACE","\n",380]]
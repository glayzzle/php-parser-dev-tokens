[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Copyright \u00c2\u00a9 2013-2017 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n *\/",2],["T_WHITESPACE","\n",5],["T_NAMESPACE","namespace",6],["T_WHITESPACE"," ",6],["T_STRING","Magento",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Customer",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Model",6],";",["T_WHITESPACE","\n\n",6],["T_USE","use",8],["T_WHITESPACE"," ",8],["T_STRING","Magento",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Customer",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Api",8],["T_NS_SEPARATOR","\\",8],["T_STRING","AccountManagementInterface",8],";",["T_WHITESPACE","\n",8],["T_USE","use",9],["T_WHITESPACE"," ",9],["T_STRING","Magento",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Customer",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Api",9],["T_NS_SEPARATOR","\\",9],["T_STRING","AddressRepositoryInterface",9],";",["T_WHITESPACE","\n",9],["T_USE","use",10],["T_WHITESPACE"," ",10],["T_STRING","Magento",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Customer",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Api",10],["T_NS_SEPARATOR","\\",10],["T_STRING","CustomerMetadataInterface",10],";",["T_WHITESPACE","\n",10],["T_USE","use",11],["T_WHITESPACE"," ",11],["T_STRING","Magento",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Customer",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Api",11],["T_NS_SEPARATOR","\\",11],["T_STRING","CustomerRepositoryInterface",11],";",["T_WHITESPACE","\n",11],["T_USE","use",12],["T_WHITESPACE"," ",12],["T_STRING","Magento",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Customer",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Api",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Data",12],["T_NS_SEPARATOR","\\",12],["T_STRING","AddressInterface",12],";",["T_WHITESPACE","\n",12],["T_USE","use",13],["T_WHITESPACE"," ",13],["T_STRING","Magento",13],["T_NS_SEPARATOR","\\",13],["T_STRING","Customer",13],["T_NS_SEPARATOR","\\",13],["T_STRING","Api",13],["T_NS_SEPARATOR","\\",13],["T_STRING","Data",13],["T_NS_SEPARATOR","\\",13],["T_STRING","CustomerInterface",13],";",["T_WHITESPACE","\n",13],["T_USE","use",14],["T_WHITESPACE"," ",14],["T_STRING","Magento",14],["T_NS_SEPARATOR","\\",14],["T_STRING","Customer",14],["T_NS_SEPARATOR","\\",14],["T_STRING","Api",14],["T_NS_SEPARATOR","\\",14],["T_STRING","Data",14],["T_NS_SEPARATOR","\\",14],["T_STRING","ValidationResultsInterfaceFactory",14],";",["T_WHITESPACE","\n",14],["T_USE","use",15],["T_WHITESPACE"," ",15],["T_STRING","Magento",15],["T_NS_SEPARATOR","\\",15],["T_STRING","Customer",15],["T_NS_SEPARATOR","\\",15],["T_STRING","Model",15],["T_NS_SEPARATOR","\\",15],["T_STRING","EmailNotificationInterface",15],";",["T_WHITESPACE","\n",15],["T_USE","use",16],["T_WHITESPACE"," ",16],["T_STRING","Magento",16],["T_NS_SEPARATOR","\\",16],["T_STRING","Customer",16],["T_NS_SEPARATOR","\\",16],["T_STRING","Helper",16],["T_NS_SEPARATOR","\\",16],["T_STRING","View",16],["T_WHITESPACE"," ",16],["T_AS","as",16],["T_WHITESPACE"," ",16],["T_STRING","CustomerViewHelper",16],";",["T_WHITESPACE","\n",16],["T_USE","use",17],["T_WHITESPACE"," ",17],["T_STRING","Magento",17],["T_NS_SEPARATOR","\\",17],["T_STRING","Customer",17],["T_NS_SEPARATOR","\\",17],["T_STRING","Model",17],["T_NS_SEPARATOR","\\",17],["T_STRING","Config",17],["T_NS_SEPARATOR","\\",17],["T_STRING","Share",17],["T_WHITESPACE"," ",17],["T_AS","as",17],["T_WHITESPACE"," ",17],["T_STRING","ConfigShare",17],";",["T_WHITESPACE","\n",17],["T_USE","use",18],["T_WHITESPACE"," ",18],["T_STRING","Magento",18],["T_NS_SEPARATOR","\\",18],["T_STRING","Customer",18],["T_NS_SEPARATOR","\\",18],["T_STRING","Model",18],["T_NS_SEPARATOR","\\",18],["T_STRING","Customer",18],["T_WHITESPACE"," ",18],["T_AS","as",18],["T_WHITESPACE"," ",18],["T_STRING","CustomerModel",18],";",["T_WHITESPACE","\n",18],["T_USE","use",19],["T_WHITESPACE"," ",19],["T_STRING","Magento",19],["T_NS_SEPARATOR","\\",19],["T_STRING","Customer",19],["T_NS_SEPARATOR","\\",19],["T_STRING","Model",19],["T_NS_SEPARATOR","\\",19],["T_STRING","Metadata",19],["T_NS_SEPARATOR","\\",19],["T_STRING","Validator",19],";",["T_WHITESPACE","\n",19],["T_USE","use",20],["T_WHITESPACE"," ",20],["T_STRING","Magento",20],["T_NS_SEPARATOR","\\",20],["T_STRING","Eav",20],["T_NS_SEPARATOR","\\",20],["T_STRING","Model",20],["T_NS_SEPARATOR","\\",20],["T_STRING","Validator",20],["T_NS_SEPARATOR","\\",20],["T_STRING","Attribute",20],["T_NS_SEPARATOR","\\",20],["T_STRING","Backend",20],";",["T_WHITESPACE","\n",20],["T_USE","use",21],["T_WHITESPACE"," ",21],["T_STRING","Magento",21],["T_NS_SEPARATOR","\\",21],["T_STRING","Framework",21],["T_NS_SEPARATOR","\\",21],["T_STRING","Api",21],["T_NS_SEPARATOR","\\",21],["T_STRING","ExtensibleDataObjectConverter",21],";",["T_WHITESPACE","\n",21],["T_USE","use",22],["T_WHITESPACE"," ",22],["T_STRING","Magento",22],["T_NS_SEPARATOR","\\",22],["T_STRING","Framework",22],["T_NS_SEPARATOR","\\",22],["T_STRING","App",22],["T_NS_SEPARATOR","\\",22],["T_STRING","Area",22],";",["T_WHITESPACE","\n",22],["T_USE","use",23],["T_WHITESPACE"," ",23],["T_STRING","Magento",23],["T_NS_SEPARATOR","\\",23],["T_STRING","Framework",23],["T_NS_SEPARATOR","\\",23],["T_STRING","App",23],["T_NS_SEPARATOR","\\",23],["T_STRING","Config",23],["T_NS_SEPARATOR","\\",23],["T_STRING","ScopeConfigInterface",23],";",["T_WHITESPACE","\n",23],["T_USE","use",24],["T_WHITESPACE"," ",24],["T_STRING","Magento",24],["T_NS_SEPARATOR","\\",24],["T_STRING","Framework",24],["T_NS_SEPARATOR","\\",24],["T_STRING","App",24],["T_NS_SEPARATOR","\\",24],["T_STRING","ObjectManager",24],";",["T_WHITESPACE","\n",24],["T_USE","use",25],["T_WHITESPACE"," ",25],["T_STRING","Magento",25],["T_NS_SEPARATOR","\\",25],["T_STRING","Framework",25],["T_NS_SEPARATOR","\\",25],["T_STRING","Encryption",25],["T_NS_SEPARATOR","\\",25],["T_STRING","EncryptorInterface",25],["T_WHITESPACE"," ",25],["T_AS","as",25],["T_WHITESPACE"," ",25],["T_STRING","Encryptor",25],";",["T_WHITESPACE","\n",25],["T_USE","use",26],["T_WHITESPACE"," ",26],["T_STRING","Magento",26],["T_NS_SEPARATOR","\\",26],["T_STRING","Framework",26],["T_NS_SEPARATOR","\\",26],["T_STRING","Encryption",26],["T_NS_SEPARATOR","\\",26],["T_STRING","Helper",26],["T_NS_SEPARATOR","\\",26],["T_STRING","Security",26],";",["T_WHITESPACE","\n",26],["T_USE","use",27],["T_WHITESPACE"," ",27],["T_STRING","Magento",27],["T_NS_SEPARATOR","\\",27],["T_STRING","Framework",27],["T_NS_SEPARATOR","\\",27],["T_STRING","Event",27],["T_NS_SEPARATOR","\\",27],["T_STRING","ManagerInterface",27],";",["T_WHITESPACE","\n",27],["T_USE","use",28],["T_WHITESPACE"," ",28],["T_STRING","Magento",28],["T_NS_SEPARATOR","\\",28],["T_STRING","Framework",28],["T_NS_SEPARATOR","\\",28],["T_STRING","Exception",28],["T_NS_SEPARATOR","\\",28],["T_STRING","AlreadyExistsException",28],";",["T_WHITESPACE","\n",28],["T_USE","use",29],["T_WHITESPACE"," ",29],["T_STRING","Magento",29],["T_NS_SEPARATOR","\\",29],["T_STRING","Framework",29],["T_NS_SEPARATOR","\\",29],["T_STRING","Exception",29],["T_NS_SEPARATOR","\\",29],["T_STRING","EmailNotConfirmedException",29],";",["T_WHITESPACE","\n",29],["T_USE","use",30],["T_WHITESPACE"," ",30],["T_STRING","Magento",30],["T_NS_SEPARATOR","\\",30],["T_STRING","Framework",30],["T_NS_SEPARATOR","\\",30],["T_STRING","Exception",30],["T_NS_SEPARATOR","\\",30],["T_STRING","InputException",30],";",["T_WHITESPACE","\n",30],["T_USE","use",31],["T_WHITESPACE"," ",31],["T_STRING","Magento",31],["T_NS_SEPARATOR","\\",31],["T_STRING","Framework",31],["T_NS_SEPARATOR","\\",31],["T_STRING","Exception",31],["T_NS_SEPARATOR","\\",31],["T_STRING","InvalidEmailOrPasswordException",31],";",["T_WHITESPACE","\n",31],["T_USE","use",32],["T_WHITESPACE"," ",32],["T_STRING","Magento",32],["T_NS_SEPARATOR","\\",32],["T_STRING","Framework",32],["T_NS_SEPARATOR","\\",32],["T_STRING","Exception",32],["T_NS_SEPARATOR","\\",32],["T_STRING","LocalizedException",32],";",["T_WHITESPACE","\n",32],["T_USE","use",33],["T_WHITESPACE"," ",33],["T_STRING","Magento",33],["T_NS_SEPARATOR","\\",33],["T_STRING","Framework",33],["T_NS_SEPARATOR","\\",33],["T_STRING","Exception",33],["T_NS_SEPARATOR","\\",33],["T_STRING","NoSuchEntityException",33],";",["T_WHITESPACE","\n",33],["T_USE","use",34],["T_WHITESPACE"," ",34],["T_STRING","Magento",34],["T_NS_SEPARATOR","\\",34],["T_STRING","Framework",34],["T_NS_SEPARATOR","\\",34],["T_STRING","Exception",34],["T_NS_SEPARATOR","\\",34],["T_STRING","State",34],["T_NS_SEPARATOR","\\",34],["T_STRING","ExpiredException",34],";",["T_WHITESPACE","\n",34],["T_USE","use",35],["T_WHITESPACE"," ",35],["T_STRING","Magento",35],["T_NS_SEPARATOR","\\",35],["T_STRING","Framework",35],["T_NS_SEPARATOR","\\",35],["T_STRING","Exception",35],["T_NS_SEPARATOR","\\",35],["T_STRING","State",35],["T_NS_SEPARATOR","\\",35],["T_STRING","InputMismatchException",35],";",["T_WHITESPACE","\n",35],["T_USE","use",36],["T_WHITESPACE"," ",36],["T_STRING","Magento",36],["T_NS_SEPARATOR","\\",36],["T_STRING","Framework",36],["T_NS_SEPARATOR","\\",36],["T_STRING","Exception",36],["T_NS_SEPARATOR","\\",36],["T_STRING","State",36],["T_NS_SEPARATOR","\\",36],["T_STRING","InvalidTransitionException",36],";",["T_WHITESPACE","\n",36],["T_USE","use",37],["T_WHITESPACE"," ",37],["T_STRING","Magento",37],["T_NS_SEPARATOR","\\",37],["T_STRING","Framework",37],["T_NS_SEPARATOR","\\",37],["T_STRING","DataObjectFactory",37],["T_WHITESPACE"," ",37],["T_AS","as",37],["T_WHITESPACE"," ",37],["T_STRING","ObjectFactory",37],";",["T_WHITESPACE","\n",37],["T_USE","use",38],["T_WHITESPACE"," ",38],["T_STRING","Magento",38],["T_NS_SEPARATOR","\\",38],["T_STRING","Framework",38],["T_NS_SEPARATOR","\\",38],["T_STRING","Exception",38],["T_NS_SEPARATOR","\\",38],["T_STRING","State",38],["T_NS_SEPARATOR","\\",38],["T_STRING","UserLockedException",38],";",["T_WHITESPACE","\n",38],["T_USE","use",39],["T_WHITESPACE"," ",39],["T_STRING","Magento",39],["T_NS_SEPARATOR","\\",39],["T_STRING","Framework",39],["T_NS_SEPARATOR","\\",39],["T_STRING","Registry",39],";",["T_WHITESPACE","\n",39],["T_USE","use",40],["T_WHITESPACE"," ",40],["T_STRING","Magento",40],["T_NS_SEPARATOR","\\",40],["T_STRING","Store",40],["T_NS_SEPARATOR","\\",40],["T_STRING","Model",40],["T_NS_SEPARATOR","\\",40],["T_STRING","ScopeInterface",40],";",["T_WHITESPACE","\n",40],["T_USE","use",41],["T_WHITESPACE"," ",41],["T_STRING","Psr",41],["T_NS_SEPARATOR","\\",41],["T_STRING","Log",41],["T_NS_SEPARATOR","\\",41],["T_STRING","LoggerInterface",41],["T_WHITESPACE"," ",41],["T_AS","as",41],["T_WHITESPACE"," ",41],["T_STRING","PsrLogger",41],";",["T_WHITESPACE","\n",41],["T_USE","use",42],["T_WHITESPACE"," ",42],["T_STRING","Magento",42],["T_NS_SEPARATOR","\\",42],["T_STRING","Framework",42],["T_NS_SEPARATOR","\\",42],["T_STRING","Exception",42],["T_NS_SEPARATOR","\\",42],["T_STRING","MailException",42],";",["T_WHITESPACE","\n",42],["T_USE","use",43],["T_WHITESPACE"," ",43],["T_STRING","Magento",43],["T_NS_SEPARATOR","\\",43],["T_STRING","Framework",43],["T_NS_SEPARATOR","\\",43],["T_STRING","Mail",43],["T_NS_SEPARATOR","\\",43],["T_STRING","Template",43],["T_NS_SEPARATOR","\\",43],["T_STRING","TransportBuilder",43],";",["T_WHITESPACE","\n",43],["T_USE","use",44],["T_WHITESPACE"," ",44],["T_STRING","Magento",44],["T_NS_SEPARATOR","\\",44],["T_STRING","Framework",44],["T_NS_SEPARATOR","\\",44],["T_STRING","Math",44],["T_NS_SEPARATOR","\\",44],["T_STRING","Random",44],";",["T_WHITESPACE","\n",44],["T_USE","use",45],["T_WHITESPACE"," ",45],["T_STRING","Magento",45],["T_NS_SEPARATOR","\\",45],["T_STRING","Framework",45],["T_NS_SEPARATOR","\\",45],["T_STRING","Reflection",45],["T_NS_SEPARATOR","\\",45],["T_STRING","DataObjectProcessor",45],";",["T_WHITESPACE","\n",45],["T_USE","use",46],["T_WHITESPACE"," ",46],["T_STRING","Magento",46],["T_NS_SEPARATOR","\\",46],["T_STRING","Framework",46],["T_NS_SEPARATOR","\\",46],["T_STRING","Stdlib",46],["T_NS_SEPARATOR","\\",46],["T_STRING","DateTime",46],";",["T_WHITESPACE","\n",46],["T_USE","use",47],["T_WHITESPACE"," ",47],["T_STRING","Magento",47],["T_NS_SEPARATOR","\\",47],["T_STRING","Framework",47],["T_NS_SEPARATOR","\\",47],["T_STRING","Stdlib",47],["T_NS_SEPARATOR","\\",47],["T_STRING","StringUtils",47],["T_WHITESPACE"," ",47],["T_AS","as",47],["T_WHITESPACE"," ",47],["T_STRING","StringHelper",47],";",["T_WHITESPACE","\n",47],["T_USE","use",48],["T_WHITESPACE"," ",48],["T_STRING","Magento",48],["T_NS_SEPARATOR","\\",48],["T_STRING","Store",48],["T_NS_SEPARATOR","\\",48],["T_STRING","Model",48],["T_NS_SEPARATOR","\\",48],["T_STRING","StoreManagerInterface",48],";",["T_WHITESPACE","\n\n",48],["T_DOC_COMMENT","\/**\n * Handle various customer account actions\n *\n * @SuppressWarnings(PHPMD.CouplingBetweenObjects)\n * @SuppressWarnings(PHPMD.TooManyFields)\n * @SuppressWarnings(PHPMD.ExcessiveClassComplexity)\n *\/",50],["T_WHITESPACE","\n",56],["T_CLASS","class",57],["T_WHITESPACE"," ",57],["T_STRING","AccountManagement",57],["T_WHITESPACE"," ",57],["T_IMPLEMENTS","implements",57],["T_WHITESPACE"," ",57],["T_STRING","AccountManagementInterface",57],["T_WHITESPACE","\n",57],"{",["T_WHITESPACE","\n    ",58],["T_DOC_COMMENT","\/**\n     * Configuration paths for email templates and identities\n     *\n     * @deprecated\n     *\/",59],["T_WHITESPACE","\n    ",63],["T_CONST","const",64],["T_WHITESPACE"," ",64],["T_STRING","XML_PATH_REGISTER_EMAIL_TEMPLATE",64],["T_WHITESPACE"," ",64],"=",["T_WHITESPACE"," ",64],["T_CONSTANT_ENCAPSED_STRING","'customer\/create_account\/email_template'",64],";",["T_WHITESPACE","\n\n    ",64],["T_DOC_COMMENT","\/**\n     * @deprecated\n     *\/",66],["T_WHITESPACE","\n    ",68],["T_CONST","const",69],["T_WHITESPACE"," ",69],["T_STRING","XML_PATH_REGISTER_NO_PASSWORD_EMAIL_TEMPLATE",69],["T_WHITESPACE"," ",69],"=",["T_WHITESPACE"," ",69],["T_CONSTANT_ENCAPSED_STRING","'customer\/create_account\/email_no_password_template'",69],";",["T_WHITESPACE","\n\n    ",69],["T_DOC_COMMENT","\/**\n     * @deprecated\n     *\/",71],["T_WHITESPACE","\n    ",73],["T_CONST","const",74],["T_WHITESPACE"," ",74],["T_STRING","XML_PATH_REGISTER_EMAIL_IDENTITY",74],["T_WHITESPACE"," ",74],"=",["T_WHITESPACE"," ",74],["T_CONSTANT_ENCAPSED_STRING","'customer\/create_account\/email_identity'",74],";",["T_WHITESPACE","\n\n    ",74],["T_DOC_COMMENT","\/**\n     * @deprecated\n     *\/",76],["T_WHITESPACE","\n    ",78],["T_CONST","const",79],["T_WHITESPACE"," ",79],["T_STRING","XML_PATH_REMIND_EMAIL_TEMPLATE",79],["T_WHITESPACE"," ",79],"=",["T_WHITESPACE"," ",79],["T_CONSTANT_ENCAPSED_STRING","'customer\/password\/remind_email_template'",79],";",["T_WHITESPACE","\n\n    ",79],["T_DOC_COMMENT","\/**\n     * @deprecated\n     *\/",81],["T_WHITESPACE","\n    ",83],["T_CONST","const",84],["T_WHITESPACE"," ",84],["T_STRING","XML_PATH_FORGOT_EMAIL_TEMPLATE",84],["T_WHITESPACE"," ",84],"=",["T_WHITESPACE"," ",84],["T_CONSTANT_ENCAPSED_STRING","'customer\/password\/forgot_email_template'",84],";",["T_WHITESPACE","\n\n    ",84],["T_DOC_COMMENT","\/**\n     * @deprecated\n     *\/",86],["T_WHITESPACE","\n    ",88],["T_CONST","const",89],["T_WHITESPACE"," ",89],["T_STRING","XML_PATH_FORGOT_EMAIL_IDENTITY",89],["T_WHITESPACE"," ",89],"=",["T_WHITESPACE"," ",89],["T_CONSTANT_ENCAPSED_STRING","'customer\/password\/forgot_email_identity'",89],";",["T_WHITESPACE","\n\n    ",89],["T_CONST","const",91],["T_WHITESPACE"," ",91],["T_STRING","XML_PATH_IS_CONFIRM",91],["T_WHITESPACE"," ",91],"=",["T_WHITESPACE"," ",91],["T_CONSTANT_ENCAPSED_STRING","'customer\/create_account\/confirm'",91],";",["T_WHITESPACE","\n\n    ",91],["T_DOC_COMMENT","\/**\n     * @deprecated\n     *\/",93],["T_WHITESPACE","\n    ",95],["T_CONST","const",96],["T_WHITESPACE"," ",96],["T_STRING","XML_PATH_CONFIRM_EMAIL_TEMPLATE",96],["T_WHITESPACE"," ",96],"=",["T_WHITESPACE"," ",96],["T_CONSTANT_ENCAPSED_STRING","'customer\/create_account\/email_confirmation_template'",96],";",["T_WHITESPACE","\n\n    ",96],["T_DOC_COMMENT","\/**\n     * @deprecated\n     *\/",98],["T_WHITESPACE","\n    ",100],["T_CONST","const",101],["T_WHITESPACE"," ",101],["T_STRING","XML_PATH_CONFIRMED_EMAIL_TEMPLATE",101],["T_WHITESPACE"," ",101],"=",["T_WHITESPACE"," ",101],["T_CONSTANT_ENCAPSED_STRING","'customer\/create_account\/email_confirmed_template'",101],";",["T_WHITESPACE","\n\n    ",101],["T_DOC_COMMENT","\/**\n     * Constants for the type of new account email to be sent\n     *\n     * @deprecated\n     *\/",103],["T_WHITESPACE","\n    ",107],["T_CONST","const",108],["T_WHITESPACE"," ",108],["T_STRING","NEW_ACCOUNT_EMAIL_REGISTERED",108],["T_WHITESPACE"," ",108],"=",["T_WHITESPACE"," ",108],["T_CONSTANT_ENCAPSED_STRING","'registered'",108],";",["T_WHITESPACE","\n\n    ",108],["T_DOC_COMMENT","\/**\n     * Welcome email, when password setting is required\n     *\n     * @deprecated\n     *\/",110],["T_WHITESPACE","\n    ",114],["T_CONST","const",115],["T_WHITESPACE"," ",115],["T_STRING","NEW_ACCOUNT_EMAIL_REGISTERED_NO_PASSWORD",115],["T_WHITESPACE"," ",115],"=",["T_WHITESPACE"," ",115],["T_CONSTANT_ENCAPSED_STRING","'registered_no_password'",115],";",["T_WHITESPACE","\n\n    ",115],["T_DOC_COMMENT","\/**\n     * Welcome email, when confirmation is enabled\n     *\n     * @deprecated\n     *\/",117],["T_WHITESPACE","\n    ",121],["T_CONST","const",122],["T_WHITESPACE"," ",122],["T_STRING","NEW_ACCOUNT_EMAIL_CONFIRMATION",122],["T_WHITESPACE"," ",122],"=",["T_WHITESPACE"," ",122],["T_CONSTANT_ENCAPSED_STRING","'confirmation'",122],";",["T_WHITESPACE","\n\n    ",122],["T_DOC_COMMENT","\/**\n     * Confirmation email, when account is confirmed\n     *\n     * @deprecated\n     *\/",124],["T_WHITESPACE","\n    ",128],["T_CONST","const",129],["T_WHITESPACE"," ",129],["T_STRING","NEW_ACCOUNT_EMAIL_CONFIRMED",129],["T_WHITESPACE"," ",129],"=",["T_WHITESPACE"," ",129],["T_CONSTANT_ENCAPSED_STRING","'confirmed'",129],";",["T_WHITESPACE","\n\n    ",129],["T_DOC_COMMENT","\/**\n     * Constants for types of emails to send out.\n     * pdl:\n     * forgot, remind, reset email templates\n     *\/",131],["T_WHITESPACE","\n    ",135],["T_CONST","const",136],["T_WHITESPACE"," ",136],["T_STRING","EMAIL_REMINDER",136],["T_WHITESPACE"," ",136],"=",["T_WHITESPACE"," ",136],["T_CONSTANT_ENCAPSED_STRING","'email_reminder'",136],";",["T_WHITESPACE","\n\n    ",136],["T_CONST","const",138],["T_WHITESPACE"," ",138],["T_STRING","EMAIL_RESET",138],["T_WHITESPACE"," ",138],"=",["T_WHITESPACE"," ",138],["T_CONSTANT_ENCAPSED_STRING","'email_reset'",138],";",["T_WHITESPACE","\n\n    ",138],["T_DOC_COMMENT","\/**\n     * Configuration path to customer password minimum length\n     *\/",140],["T_WHITESPACE","\n    ",142],["T_CONST","const",143],["T_WHITESPACE"," ",143],["T_STRING","XML_PATH_MINIMUM_PASSWORD_LENGTH",143],["T_WHITESPACE"," ",143],"=",["T_WHITESPACE"," ",143],["T_CONSTANT_ENCAPSED_STRING","'customer\/password\/minimum_password_length'",143],";",["T_WHITESPACE","\n\n    ",143],["T_DOC_COMMENT","\/**\n     * Configuration path to customer password required character classes number\n     *\/",145],["T_WHITESPACE","\n    ",147],["T_CONST","const",148],["T_WHITESPACE"," ",148],["T_STRING","XML_PATH_REQUIRED_CHARACTER_CLASSES_NUMBER",148],["T_WHITESPACE"," ",148],"=",["T_WHITESPACE"," ",148],["T_CONSTANT_ENCAPSED_STRING","'customer\/password\/required_character_classes_number'",148],";",["T_WHITESPACE","\n\n    ",148],["T_DOC_COMMENT","\/**\n     * @deprecated\n     *\/",150],["T_WHITESPACE","\n    ",152],["T_CONST","const",153],["T_WHITESPACE"," ",153],["T_STRING","XML_PATH_RESET_PASSWORD_TEMPLATE",153],["T_WHITESPACE"," ",153],"=",["T_WHITESPACE"," ",153],["T_CONSTANT_ENCAPSED_STRING","'customer\/password\/reset_password_template'",153],";",["T_WHITESPACE","\n\n    ",153],["T_DOC_COMMENT","\/**\n     * @deprecated\n     *\/",155],["T_WHITESPACE","\n    ",157],["T_CONST","const",158],["T_WHITESPACE"," ",158],["T_STRING","MIN_PASSWORD_LENGTH",158],["T_WHITESPACE"," ",158],"=",["T_WHITESPACE"," ",158],["T_LNUMBER","6",158],";",["T_WHITESPACE","\n\n    ",158],["T_DOC_COMMENT","\/**\n     * @var CustomerFactory\n     *\/",160],["T_WHITESPACE","\n    ",162],["T_PRIVATE","private",163],["T_WHITESPACE"," ",163],["T_VARIABLE","$customerFactory",163],";",["T_WHITESPACE","\n\n    ",163],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Customer\\Api\\Data\\ValidationResultsInterfaceFactory\n     *\/",165],["T_WHITESPACE","\n    ",167],["T_PRIVATE","private",168],["T_WHITESPACE"," ",168],["T_VARIABLE","$validationResultsDataFactory",168],";",["T_WHITESPACE","\n\n    ",168],["T_DOC_COMMENT","\/**\n     * @var ManagerInterface\n     *\/",170],["T_WHITESPACE","\n    ",172],["T_PRIVATE","private",173],["T_WHITESPACE"," ",173],["T_VARIABLE","$eventManager",173],";",["T_WHITESPACE","\n\n    ",173],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Store\\Model\\StoreManagerInterface\n     *\/",175],["T_WHITESPACE","\n    ",177],["T_PRIVATE","private",178],["T_WHITESPACE"," ",178],["T_VARIABLE","$storeManager",178],";",["T_WHITESPACE","\n\n    ",178],["T_DOC_COMMENT","\/**\n     * @var Random\n     *\/",180],["T_WHITESPACE","\n    ",182],["T_PRIVATE","private",183],["T_WHITESPACE"," ",183],["T_VARIABLE","$mathRandom",183],";",["T_WHITESPACE","\n\n    ",183],["T_DOC_COMMENT","\/**\n     * @var Validator\n     *\/",185],["T_WHITESPACE","\n    ",187],["T_PRIVATE","private",188],["T_WHITESPACE"," ",188],["T_VARIABLE","$validator",188],";",["T_WHITESPACE","\n\n    ",188],["T_DOC_COMMENT","\/**\n     * @var AddressRepositoryInterface\n     *\/",190],["T_WHITESPACE","\n    ",192],["T_PRIVATE","private",193],["T_WHITESPACE"," ",193],["T_VARIABLE","$addressRepository",193],";",["T_WHITESPACE","\n\n    ",193],["T_DOC_COMMENT","\/**\n     * @var CustomerMetadataInterface\n     *\/",195],["T_WHITESPACE","\n    ",197],["T_PRIVATE","private",198],["T_WHITESPACE"," ",198],["T_VARIABLE","$customerMetadataService",198],";",["T_WHITESPACE","\n\n    ",198],["T_DOC_COMMENT","\/**\n     * @var PsrLogger\n     *\/",200],["T_WHITESPACE","\n    ",202],["T_PROTECTED","protected",203],["T_WHITESPACE"," ",203],["T_VARIABLE","$logger",203],";",["T_WHITESPACE","\n\n    ",203],["T_DOC_COMMENT","\/**\n     * @var Encryptor\n     *\/",205],["T_WHITESPACE","\n    ",207],["T_PRIVATE","private",208],["T_WHITESPACE"," ",208],["T_VARIABLE","$encryptor",208],";",["T_WHITESPACE","\n\n    ",208],["T_DOC_COMMENT","\/**\n     * @var CustomerRegistry\n     *\/",210],["T_WHITESPACE","\n    ",212],["T_PRIVATE","private",213],["T_WHITESPACE"," ",213],["T_VARIABLE","$customerRegistry",213],";",["T_WHITESPACE","\n\n    ",213],["T_DOC_COMMENT","\/**\n     * @var ConfigShare\n     *\/",215],["T_WHITESPACE","\n    ",217],["T_PRIVATE","private",218],["T_WHITESPACE"," ",218],["T_VARIABLE","$configShare",218],";",["T_WHITESPACE","\n\n    ",218],["T_DOC_COMMENT","\/**\n     * @var StringHelper\n     *\/",220],["T_WHITESPACE","\n    ",222],["T_PROTECTED","protected",223],["T_WHITESPACE"," ",223],["T_VARIABLE","$stringHelper",223],";",["T_WHITESPACE","\n\n    ",223],["T_DOC_COMMENT","\/**\n     * @var CustomerRepositoryInterface\n     *\/",225],["T_WHITESPACE","\n    ",227],["T_PRIVATE","private",228],["T_WHITESPACE"," ",228],["T_VARIABLE","$customerRepository",228],";",["T_WHITESPACE","\n\n    ",228],["T_DOC_COMMENT","\/**\n     * @var ScopeConfigInterface\n     *\/",230],["T_WHITESPACE","\n    ",232],["T_PRIVATE","private",233],["T_WHITESPACE"," ",233],["T_VARIABLE","$scopeConfig",233],";",["T_WHITESPACE","\n\n    ",233],["T_DOC_COMMENT","\/**\n     * @var TransportBuilder\n     *\/",235],["T_WHITESPACE","\n    ",237],["T_PRIVATE","private",238],["T_WHITESPACE"," ",238],["T_VARIABLE","$transportBuilder",238],";",["T_WHITESPACE","\n\n    ",238],["T_DOC_COMMENT","\/**\n     * @var DataObjectProcessor\n     *\/",240],["T_WHITESPACE","\n    ",242],["T_PROTECTED","protected",243],["T_WHITESPACE"," ",243],["T_VARIABLE","$dataProcessor",243],";",["T_WHITESPACE","\n\n    ",243],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Framework\\Registry\n     *\/",245],["T_WHITESPACE","\n    ",247],["T_PROTECTED","protected",248],["T_WHITESPACE"," ",248],["T_VARIABLE","$registry",248],";",["T_WHITESPACE","\n\n    ",248],["T_DOC_COMMENT","\/**\n     * @var CustomerViewHelper\n     *\/",250],["T_WHITESPACE","\n    ",252],["T_PROTECTED","protected",253],["T_WHITESPACE"," ",253],["T_VARIABLE","$customerViewHelper",253],";",["T_WHITESPACE","\n\n    ",253],["T_DOC_COMMENT","\/**\n     * @var DateTime\n     *\/",255],["T_WHITESPACE","\n    ",257],["T_PROTECTED","protected",258],["T_WHITESPACE"," ",258],["T_VARIABLE","$dateTime",258],";",["T_WHITESPACE","\n\n    ",258],["T_DOC_COMMENT","\/**\n     * @var ObjectFactory\n     *\/",260],["T_WHITESPACE","\n    ",262],["T_PROTECTED","protected",263],["T_WHITESPACE"," ",263],["T_VARIABLE","$objectFactory",263],";",["T_WHITESPACE","\n\n    ",263],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Framework\\Api\\ExtensibleDataObjectConverter\n     *\/",265],["T_WHITESPACE","\n    ",267],["T_PROTECTED","protected",268],["T_WHITESPACE"," ",268],["T_VARIABLE","$extensibleDataObjectConverter",268],";",["T_WHITESPACE","\n\n    ",268],["T_DOC_COMMENT","\/**\n     * @var CustomerModel\n     *\/",270],["T_WHITESPACE","\n    ",272],["T_PROTECTED","protected",273],["T_WHITESPACE"," ",273],["T_VARIABLE","$customerModel",273],";",["T_WHITESPACE","\n\n    ",273],["T_DOC_COMMENT","\/**\n     * @var AuthenticationInterface\n     *\/",275],["T_WHITESPACE","\n    ",277],["T_PROTECTED","protected",278],["T_WHITESPACE"," ",278],["T_VARIABLE","$authentication",278],";",["T_WHITESPACE","\n\n    ",278],["T_DOC_COMMENT","\/**\n     * @var EmailNotificationInterface\n     *\/",280],["T_WHITESPACE","\n    ",282],["T_PRIVATE","private",283],["T_WHITESPACE"," ",283],["T_VARIABLE","$emailNotification",283],";",["T_WHITESPACE","\n\n    ",283],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Eav\\Model\\Validator\\Attribute\\Backend\n     *\/",285],["T_WHITESPACE","\n    ",287],["T_PRIVATE","private",288],["T_WHITESPACE"," ",288],["T_VARIABLE","$eavValidator",288],";",["T_WHITESPACE","\n\n    ",288],["T_DOC_COMMENT","\/**\n     * @param CustomerFactory $customerFactory\n     * @param ManagerInterface $eventManager\n     * @param StoreManagerInterface $storeManager\n     * @param Random $mathRandom\n     * @param Validator $validator\n     * @param ValidationResultsInterfaceFactory $validationResultsDataFactory\n     * @param AddressRepositoryInterface $addressRepository\n     * @param CustomerMetadataInterface $customerMetadataService\n     * @param CustomerRegistry $customerRegistry\n     * @param PsrLogger $logger\n     * @param Encryptor $encryptor\n     * @param ConfigShare $configShare\n     * @param StringHelper $stringHelper\n     * @param CustomerRepositoryInterface $customerRepository\n     * @param ScopeConfigInterface $scopeConfig\n     * @param TransportBuilder $transportBuilder\n     * @param DataObjectProcessor $dataProcessor\n     * @param Registry $registry\n     * @param CustomerViewHelper $customerViewHelper\n     * @param DateTime $dateTime\n     * @param CustomerModel $customerModel\n     * @param ObjectFactory $objectFactory\n     * @param ExtensibleDataObjectConverter $extensibleDataObjectConverter\n     * @SuppressWarnings(PHPMD.ExcessiveParameterList)\n     *\/",290],["T_WHITESPACE","\n    ",315],["T_PUBLIC","public",316],["T_WHITESPACE"," ",316],["T_FUNCTION","function",316],["T_WHITESPACE"," ",316],["T_STRING","__construct",316],"(",["T_WHITESPACE","\n        ",316],["T_STRING","CustomerFactory",317],["T_WHITESPACE"," ",317],["T_VARIABLE","$customerFactory",317],",",["T_WHITESPACE","\n        ",317],["T_STRING","ManagerInterface",318],["T_WHITESPACE"," ",318],["T_VARIABLE","$eventManager",318],",",["T_WHITESPACE","\n        ",318],["T_STRING","StoreManagerInterface",319],["T_WHITESPACE"," ",319],["T_VARIABLE","$storeManager",319],",",["T_WHITESPACE","\n        ",319],["T_STRING","Random",320],["T_WHITESPACE"," ",320],["T_VARIABLE","$mathRandom",320],",",["T_WHITESPACE","\n        ",320],["T_STRING","Validator",321],["T_WHITESPACE"," ",321],["T_VARIABLE","$validator",321],",",["T_WHITESPACE","\n        ",321],["T_STRING","ValidationResultsInterfaceFactory",322],["T_WHITESPACE"," ",322],["T_VARIABLE","$validationResultsDataFactory",322],",",["T_WHITESPACE","\n        ",322],["T_STRING","AddressRepositoryInterface",323],["T_WHITESPACE"," ",323],["T_VARIABLE","$addressRepository",323],",",["T_WHITESPACE","\n        ",323],["T_STRING","CustomerMetadataInterface",324],["T_WHITESPACE"," ",324],["T_VARIABLE","$customerMetadataService",324],",",["T_WHITESPACE","\n        ",324],["T_STRING","CustomerRegistry",325],["T_WHITESPACE"," ",325],["T_VARIABLE","$customerRegistry",325],",",["T_WHITESPACE","\n        ",325],["T_STRING","PsrLogger",326],["T_WHITESPACE"," ",326],["T_VARIABLE","$logger",326],",",["T_WHITESPACE","\n        ",326],["T_STRING","Encryptor",327],["T_WHITESPACE"," ",327],["T_VARIABLE","$encryptor",327],",",["T_WHITESPACE","\n        ",327],["T_STRING","ConfigShare",328],["T_WHITESPACE"," ",328],["T_VARIABLE","$configShare",328],",",["T_WHITESPACE","\n        ",328],["T_STRING","StringHelper",329],["T_WHITESPACE"," ",329],["T_VARIABLE","$stringHelper",329],",",["T_WHITESPACE","\n        ",329],["T_STRING","CustomerRepositoryInterface",330],["T_WHITESPACE"," ",330],["T_VARIABLE","$customerRepository",330],",",["T_WHITESPACE","\n        ",330],["T_STRING","ScopeConfigInterface",331],["T_WHITESPACE"," ",331],["T_VARIABLE","$scopeConfig",331],",",["T_WHITESPACE","\n        ",331],["T_STRING","TransportBuilder",332],["T_WHITESPACE"," ",332],["T_VARIABLE","$transportBuilder",332],",",["T_WHITESPACE","\n        ",332],["T_STRING","DataObjectProcessor",333],["T_WHITESPACE"," ",333],["T_VARIABLE","$dataProcessor",333],",",["T_WHITESPACE","\n        ",333],["T_STRING","Registry",334],["T_WHITESPACE"," ",334],["T_VARIABLE","$registry",334],",",["T_WHITESPACE","\n        ",334],["T_STRING","CustomerViewHelper",335],["T_WHITESPACE"," ",335],["T_VARIABLE","$customerViewHelper",335],",",["T_WHITESPACE","\n        ",335],["T_STRING","DateTime",336],["T_WHITESPACE"," ",336],["T_VARIABLE","$dateTime",336],",",["T_WHITESPACE","\n        ",336],["T_STRING","CustomerModel",337],["T_WHITESPACE"," ",337],["T_VARIABLE","$customerModel",337],",",["T_WHITESPACE","\n        ",337],["T_STRING","ObjectFactory",338],["T_WHITESPACE"," ",338],["T_VARIABLE","$objectFactory",338],",",["T_WHITESPACE","\n        ",338],["T_STRING","ExtensibleDataObjectConverter",339],["T_WHITESPACE"," ",339],["T_VARIABLE","$extensibleDataObjectConverter",339],["T_WHITESPACE","\n    ",339],")",["T_WHITESPACE"," ",340],"{",["T_WHITESPACE","\n        ",340],["T_VARIABLE","$this",341],["T_OBJECT_OPERATOR","->",341],["T_STRING","customerFactory",341],["T_WHITESPACE"," ",341],"=",["T_WHITESPACE"," ",341],["T_VARIABLE","$customerFactory",341],";",["T_WHITESPACE","\n        ",341],["T_VARIABLE","$this",342],["T_OBJECT_OPERATOR","->",342],["T_STRING","eventManager",342],["T_WHITESPACE"," ",342],"=",["T_WHITESPACE"," ",342],["T_VARIABLE","$eventManager",342],";",["T_WHITESPACE","\n        ",342],["T_VARIABLE","$this",343],["T_OBJECT_OPERATOR","->",343],["T_STRING","storeManager",343],["T_WHITESPACE"," ",343],"=",["T_WHITESPACE"," ",343],["T_VARIABLE","$storeManager",343],";",["T_WHITESPACE","\n        ",343],["T_VARIABLE","$this",344],["T_OBJECT_OPERATOR","->",344],["T_STRING","mathRandom",344],["T_WHITESPACE"," ",344],"=",["T_WHITESPACE"," ",344],["T_VARIABLE","$mathRandom",344],";",["T_WHITESPACE","\n        ",344],["T_VARIABLE","$this",345],["T_OBJECT_OPERATOR","->",345],["T_STRING","validator",345],["T_WHITESPACE"," ",345],"=",["T_WHITESPACE"," ",345],["T_VARIABLE","$validator",345],";",["T_WHITESPACE","\n        ",345],["T_VARIABLE","$this",346],["T_OBJECT_OPERATOR","->",346],["T_STRING","validationResultsDataFactory",346],["T_WHITESPACE"," ",346],"=",["T_WHITESPACE"," ",346],["T_VARIABLE","$validationResultsDataFactory",346],";",["T_WHITESPACE","\n        ",346],["T_VARIABLE","$this",347],["T_OBJECT_OPERATOR","->",347],["T_STRING","addressRepository",347],["T_WHITESPACE"," ",347],"=",["T_WHITESPACE"," ",347],["T_VARIABLE","$addressRepository",347],";",["T_WHITESPACE","\n        ",347],["T_VARIABLE","$this",348],["T_OBJECT_OPERATOR","->",348],["T_STRING","customerMetadataService",348],["T_WHITESPACE"," ",348],"=",["T_WHITESPACE"," ",348],["T_VARIABLE","$customerMetadataService",348],";",["T_WHITESPACE","\n        ",348],["T_VARIABLE","$this",349],["T_OBJECT_OPERATOR","->",349],["T_STRING","customerRegistry",349],["T_WHITESPACE"," ",349],"=",["T_WHITESPACE"," ",349],["T_VARIABLE","$customerRegistry",349],";",["T_WHITESPACE","\n        ",349],["T_VARIABLE","$this",350],["T_OBJECT_OPERATOR","->",350],["T_STRING","logger",350],["T_WHITESPACE"," ",350],"=",["T_WHITESPACE"," ",350],["T_VARIABLE","$logger",350],";",["T_WHITESPACE","\n        ",350],["T_VARIABLE","$this",351],["T_OBJECT_OPERATOR","->",351],["T_STRING","encryptor",351],["T_WHITESPACE"," ",351],"=",["T_WHITESPACE"," ",351],["T_VARIABLE","$encryptor",351],";",["T_WHITESPACE","\n        ",351],["T_VARIABLE","$this",352],["T_OBJECT_OPERATOR","->",352],["T_STRING","configShare",352],["T_WHITESPACE"," ",352],"=",["T_WHITESPACE"," ",352],["T_VARIABLE","$configShare",352],";",["T_WHITESPACE","\n        ",352],["T_VARIABLE","$this",353],["T_OBJECT_OPERATOR","->",353],["T_STRING","stringHelper",353],["T_WHITESPACE"," ",353],"=",["T_WHITESPACE"," ",353],["T_VARIABLE","$stringHelper",353],";",["T_WHITESPACE","\n        ",353],["T_VARIABLE","$this",354],["T_OBJECT_OPERATOR","->",354],["T_STRING","customerRepository",354],["T_WHITESPACE"," ",354],"=",["T_WHITESPACE"," ",354],["T_VARIABLE","$customerRepository",354],";",["T_WHITESPACE","\n        ",354],["T_VARIABLE","$this",355],["T_OBJECT_OPERATOR","->",355],["T_STRING","scopeConfig",355],["T_WHITESPACE"," ",355],"=",["T_WHITESPACE"," ",355],["T_VARIABLE","$scopeConfig",355],";",["T_WHITESPACE","\n        ",355],["T_VARIABLE","$this",356],["T_OBJECT_OPERATOR","->",356],["T_STRING","transportBuilder",356],["T_WHITESPACE"," ",356],"=",["T_WHITESPACE"," ",356],["T_VARIABLE","$transportBuilder",356],";",["T_WHITESPACE","\n        ",356],["T_VARIABLE","$this",357],["T_OBJECT_OPERATOR","->",357],["T_STRING","dataProcessor",357],["T_WHITESPACE"," ",357],"=",["T_WHITESPACE"," ",357],["T_VARIABLE","$dataProcessor",357],";",["T_WHITESPACE","\n        ",357],["T_VARIABLE","$this",358],["T_OBJECT_OPERATOR","->",358],["T_STRING","registry",358],["T_WHITESPACE"," ",358],"=",["T_WHITESPACE"," ",358],["T_VARIABLE","$registry",358],";",["T_WHITESPACE","\n        ",358],["T_VARIABLE","$this",359],["T_OBJECT_OPERATOR","->",359],["T_STRING","customerViewHelper",359],["T_WHITESPACE"," ",359],"=",["T_WHITESPACE"," ",359],["T_VARIABLE","$customerViewHelper",359],";",["T_WHITESPACE","\n        ",359],["T_VARIABLE","$this",360],["T_OBJECT_OPERATOR","->",360],["T_STRING","dateTime",360],["T_WHITESPACE"," ",360],"=",["T_WHITESPACE"," ",360],["T_VARIABLE","$dateTime",360],";",["T_WHITESPACE","\n        ",360],["T_VARIABLE","$this",361],["T_OBJECT_OPERATOR","->",361],["T_STRING","customerModel",361],["T_WHITESPACE"," ",361],"=",["T_WHITESPACE"," ",361],["T_VARIABLE","$customerModel",361],";",["T_WHITESPACE","\n        ",361],["T_VARIABLE","$this",362],["T_OBJECT_OPERATOR","->",362],["T_STRING","objectFactory",362],["T_WHITESPACE"," ",362],"=",["T_WHITESPACE"," ",362],["T_VARIABLE","$objectFactory",362],";",["T_WHITESPACE","\n        ",362],["T_VARIABLE","$this",363],["T_OBJECT_OPERATOR","->",363],["T_STRING","extensibleDataObjectConverter",363],["T_WHITESPACE"," ",363],"=",["T_WHITESPACE"," ",363],["T_VARIABLE","$extensibleDataObjectConverter",363],";",["T_WHITESPACE","\n    ",363],"}",["T_WHITESPACE","\n\n    ",364],["T_DOC_COMMENT","\/**\n     * Get authentication\n     *\n     * @return AuthenticationInterface\n     *\/",366],["T_WHITESPACE","\n    ",370],["T_PRIVATE","private",371],["T_WHITESPACE"," ",371],["T_FUNCTION","function",371],["T_WHITESPACE"," ",371],["T_STRING","getAuthentication",371],"(",")",["T_WHITESPACE","\n    ",371],"{",["T_WHITESPACE","\n\n        ",372],["T_IF","if",374],["T_WHITESPACE"," ",374],"(","!","(",["T_VARIABLE","$this",374],["T_OBJECT_OPERATOR","->",374],["T_STRING","authentication",374],["T_WHITESPACE"," ",374],["T_INSTANCEOF","instanceof",374],["T_WHITESPACE"," ",374],["T_STRING","AuthenticationInterface",374],")",")",["T_WHITESPACE"," ",374],"{",["T_WHITESPACE","\n            ",374],["T_RETURN","return",375],["T_WHITESPACE"," ",375],["T_NS_SEPARATOR","\\",375],["T_STRING","Magento",375],["T_NS_SEPARATOR","\\",375],["T_STRING","Framework",375],["T_NS_SEPARATOR","\\",375],["T_STRING","App",375],["T_NS_SEPARATOR","\\",375],["T_STRING","ObjectManager",375],["T_DOUBLE_COLON","::",375],["T_STRING","getInstance",375],"(",")",["T_OBJECT_OPERATOR","->",375],["T_STRING","get",375],"(",["T_WHITESPACE","\n                ",375],["T_NS_SEPARATOR","\\",376],["T_STRING","Magento",376],["T_NS_SEPARATOR","\\",376],["T_STRING","Customer",376],["T_NS_SEPARATOR","\\",376],["T_STRING","Model",376],["T_NS_SEPARATOR","\\",376],["T_STRING","AuthenticationInterface",376],["T_DOUBLE_COLON","::",376],["T_CLASS","class",376],["T_WHITESPACE","\n            ",376],")",";",["T_WHITESPACE","\n        ",377],"}",["T_WHITESPACE"," ",378],["T_ELSE","else",378],["T_WHITESPACE"," ",378],"{",["T_WHITESPACE","\n            ",378],["T_RETURN","return",379],["T_WHITESPACE"," ",379],["T_VARIABLE","$this",379],["T_OBJECT_OPERATOR","->",379],["T_STRING","authentication",379],";",["T_WHITESPACE","\n        ",379],"}",["T_WHITESPACE","\n    ",380],"}",["T_WHITESPACE","\n\n    ",381],["T_DOC_COMMENT","\/**\n     * {@inheritdoc}\n     *\/",383],["T_WHITESPACE","\n    ",385],["T_PUBLIC","public",386],["T_WHITESPACE"," ",386],["T_FUNCTION","function",386],["T_WHITESPACE"," ",386],["T_STRING","resendConfirmation",386],"(",["T_VARIABLE","$email",386],",",["T_WHITESPACE"," ",386],["T_VARIABLE","$websiteId",386],["T_WHITESPACE"," ",386],"=",["T_WHITESPACE"," ",386],["T_STRING","null",386],",",["T_WHITESPACE"," ",386],["T_VARIABLE","$redirectUrl",386],["T_WHITESPACE"," ",386],"=",["T_WHITESPACE"," ",386],["T_CONSTANT_ENCAPSED_STRING","''",386],")",["T_WHITESPACE","\n    ",386],"{",["T_WHITESPACE","\n        ",387],["T_VARIABLE","$customer",388],["T_WHITESPACE"," ",388],"=",["T_WHITESPACE"," ",388],["T_VARIABLE","$this",388],["T_OBJECT_OPERATOR","->",388],["T_STRING","customerRepository",388],["T_OBJECT_OPERATOR","->",388],["T_STRING","get",388],"(",["T_VARIABLE","$email",388],",",["T_WHITESPACE"," ",388],["T_VARIABLE","$websiteId",388],")",";",["T_WHITESPACE","\n        ",388],["T_IF","if",389],["T_WHITESPACE"," ",389],"(","!",["T_VARIABLE","$customer",389],["T_OBJECT_OPERATOR","->",389],["T_STRING","getConfirmation",389],"(",")",")",["T_WHITESPACE"," ",389],"{",["T_WHITESPACE","\n            ",389],["T_THROW","throw",390],["T_WHITESPACE"," ",390],["T_NEW","new",390],["T_WHITESPACE"," ",390],["T_STRING","InvalidTransitionException",390],"(",["T_STRING","__",390],"(",["T_CONSTANT_ENCAPSED_STRING","'No confirmation needed.'",390],")",")",";",["T_WHITESPACE","\n        ",390],"}",["T_WHITESPACE","\n\n        ",391],["T_TRY","try",393],["T_WHITESPACE"," ",393],"{",["T_WHITESPACE","\n            ",393],["T_VARIABLE","$this",394],["T_OBJECT_OPERATOR","->",394],["T_STRING","getEmailNotification",394],"(",")",["T_OBJECT_OPERATOR","->",394],["T_STRING","newAccount",394],"(",["T_WHITESPACE","\n                ",394],["T_VARIABLE","$customer",395],",",["T_WHITESPACE","\n                ",395],["T_STRING","self",396],["T_DOUBLE_COLON","::",396],["T_STRING","NEW_ACCOUNT_EMAIL_CONFIRMATION",396],",",["T_WHITESPACE","\n                ",396],["T_VARIABLE","$redirectUrl",397],",",["T_WHITESPACE","\n                ",397],["T_VARIABLE","$this",398],["T_OBJECT_OPERATOR","->",398],["T_STRING","storeManager",398],["T_OBJECT_OPERATOR","->",398],["T_STRING","getStore",398],"(",")",["T_OBJECT_OPERATOR","->",398],["T_STRING","getId",398],"(",")",["T_WHITESPACE","\n            ",398],")",";",["T_WHITESPACE","\n        ",399],"}",["T_WHITESPACE"," ",400],["T_CATCH","catch",400],["T_WHITESPACE"," ",400],"(",["T_STRING","MailException",400],["T_WHITESPACE"," ",400],["T_VARIABLE","$e",400],")",["T_WHITESPACE"," ",400],"{",["T_WHITESPACE","\n            ",400],["T_COMMENT","\/\/ If we are not able to send a new account email, this should be ignored\n",401],["T_WHITESPACE","            ",402],["T_VARIABLE","$this",402],["T_OBJECT_OPERATOR","->",402],["T_STRING","logger",402],["T_OBJECT_OPERATOR","->",402],["T_STRING","critical",402],"(",["T_VARIABLE","$e",402],")",";",["T_WHITESPACE","\n        ",402],"}",["T_WHITESPACE","\n    ",403],"}",["T_WHITESPACE","\n\n    ",404],["T_DOC_COMMENT","\/**\n     * {@inheritdoc}\n     *\/",406],["T_WHITESPACE","\n    ",408],["T_PUBLIC","public",409],["T_WHITESPACE"," ",409],["T_FUNCTION","function",409],["T_WHITESPACE"," ",409],["T_STRING","activate",409],"(",["T_VARIABLE","$email",409],",",["T_WHITESPACE"," ",409],["T_VARIABLE","$confirmationKey",409],")",["T_WHITESPACE","\n    ",409],"{",["T_WHITESPACE","\n        ",410],["T_VARIABLE","$customer",411],["T_WHITESPACE"," ",411],"=",["T_WHITESPACE"," ",411],["T_VARIABLE","$this",411],["T_OBJECT_OPERATOR","->",411],["T_STRING","customerRepository",411],["T_OBJECT_OPERATOR","->",411],["T_STRING","get",411],"(",["T_VARIABLE","$email",411],")",";",["T_WHITESPACE","\n        ",411],["T_RETURN","return",412],["T_WHITESPACE"," ",412],["T_VARIABLE","$this",412],["T_OBJECT_OPERATOR","->",412],["T_STRING","activateCustomer",412],"(",["T_VARIABLE","$customer",412],",",["T_WHITESPACE"," ",412],["T_VARIABLE","$confirmationKey",412],")",";",["T_WHITESPACE","\n    ",412],"}",["T_WHITESPACE","\n\n    ",413],["T_DOC_COMMENT","\/**\n     * {@inheritdoc}\n     *\/",415],["T_WHITESPACE","\n    ",417],["T_PUBLIC","public",418],["T_WHITESPACE"," ",418],["T_FUNCTION","function",418],["T_WHITESPACE"," ",418],["T_STRING","activateById",418],"(",["T_VARIABLE","$customerId",418],",",["T_WHITESPACE"," ",418],["T_VARIABLE","$confirmationKey",418],")",["T_WHITESPACE","\n    ",418],"{",["T_WHITESPACE","\n        ",419],["T_VARIABLE","$customer",420],["T_WHITESPACE"," ",420],"=",["T_WHITESPACE"," ",420],["T_VARIABLE","$this",420],["T_OBJECT_OPERATOR","->",420],["T_STRING","customerRepository",420],["T_OBJECT_OPERATOR","->",420],["T_STRING","getById",420],"(",["T_VARIABLE","$customerId",420],")",";",["T_WHITESPACE","\n        ",420],["T_RETURN","return",421],["T_WHITESPACE"," ",421],["T_VARIABLE","$this",421],["T_OBJECT_OPERATOR","->",421],["T_STRING","activateCustomer",421],"(",["T_VARIABLE","$customer",421],",",["T_WHITESPACE"," ",421],["T_VARIABLE","$confirmationKey",421],")",";",["T_WHITESPACE","\n    ",421],"}",["T_WHITESPACE","\n\n    ",422],["T_DOC_COMMENT","\/**\n     * Activate a customer account using a key that was sent in a confirmation email.\n     *\n     * @param \\Magento\\Customer\\Api\\Data\\CustomerInterface $customer\n     * @param string $confirmationKey\n     * @return \\Magento\\Customer\\Api\\Data\\CustomerInterface\n     * @throws \\Magento\\Framework\\Exception\\State\\InvalidTransitionException\n     * @throws \\Magento\\Framework\\Exception\\State\\InputMismatchException\n     *\/",424],["T_WHITESPACE","\n    ",432],["T_PRIVATE","private",433],["T_WHITESPACE"," ",433],["T_FUNCTION","function",433],["T_WHITESPACE"," ",433],["T_STRING","activateCustomer",433],"(",["T_VARIABLE","$customer",433],",",["T_WHITESPACE"," ",433],["T_VARIABLE","$confirmationKey",433],")",["T_WHITESPACE","\n    ",433],"{",["T_WHITESPACE","\n        ",434],["T_COMMENT","\/\/ check if customer is inactive\n",435],["T_WHITESPACE","        ",436],["T_IF","if",436],["T_WHITESPACE"," ",436],"(","!",["T_VARIABLE","$customer",436],["T_OBJECT_OPERATOR","->",436],["T_STRING","getConfirmation",436],"(",")",")",["T_WHITESPACE"," ",436],"{",["T_WHITESPACE","\n            ",436],["T_THROW","throw",437],["T_WHITESPACE"," ",437],["T_NEW","new",437],["T_WHITESPACE"," ",437],["T_STRING","InvalidTransitionException",437],"(",["T_STRING","__",437],"(",["T_CONSTANT_ENCAPSED_STRING","'Account already active'",437],")",")",";",["T_WHITESPACE","\n        ",437],"}",["T_WHITESPACE","\n\n        ",438],["T_IF","if",440],["T_WHITESPACE"," ",440],"(",["T_VARIABLE","$customer",440],["T_OBJECT_OPERATOR","->",440],["T_STRING","getConfirmation",440],"(",")",["T_WHITESPACE"," ",440],["T_IS_NOT_IDENTICAL","!==",440],["T_WHITESPACE"," ",440],["T_VARIABLE","$confirmationKey",440],")",["T_WHITESPACE"," ",440],"{",["T_WHITESPACE","\n            ",440],["T_THROW","throw",441],["T_WHITESPACE"," ",441],["T_NEW","new",441],["T_WHITESPACE"," ",441],["T_STRING","InputMismatchException",441],"(",["T_STRING","__",441],"(",["T_CONSTANT_ENCAPSED_STRING","'Invalid confirmation token'",441],")",")",";",["T_WHITESPACE","\n        ",441],"}",["T_WHITESPACE","\n\n        ",442],["T_VARIABLE","$customer",444],["T_OBJECT_OPERATOR","->",444],["T_STRING","setConfirmation",444],"(",["T_STRING","null",444],")",";",["T_WHITESPACE","\n        ",444],["T_VARIABLE","$this",445],["T_OBJECT_OPERATOR","->",445],["T_STRING","customerRepository",445],["T_OBJECT_OPERATOR","->",445],["T_STRING","save",445],"(",["T_VARIABLE","$customer",445],")",";",["T_WHITESPACE","\n        ",445],["T_VARIABLE","$this",446],["T_OBJECT_OPERATOR","->",446],["T_STRING","getEmailNotification",446],"(",")",["T_OBJECT_OPERATOR","->",446],["T_STRING","newAccount",446],"(",["T_VARIABLE","$customer",446],",",["T_WHITESPACE"," ",446],["T_CONSTANT_ENCAPSED_STRING","'confirmed'",446],",",["T_WHITESPACE"," ",446],["T_CONSTANT_ENCAPSED_STRING","''",446],",",["T_WHITESPACE"," ",446],["T_VARIABLE","$this",446],["T_OBJECT_OPERATOR","->",446],["T_STRING","storeManager",446],["T_OBJECT_OPERATOR","->",446],["T_STRING","getStore",446],"(",")",["T_OBJECT_OPERATOR","->",446],["T_STRING","getId",446],"(",")",")",";",["T_WHITESPACE","\n        ",446],["T_RETURN","return",447],["T_WHITESPACE"," ",447],["T_VARIABLE","$customer",447],";",["T_WHITESPACE","\n    ",447],"}",["T_WHITESPACE","\n\n    ",448],["T_DOC_COMMENT","\/**\n     * {@inheritdoc}\n     *\/",450],["T_WHITESPACE","\n    ",452],["T_PUBLIC","public",453],["T_WHITESPACE"," ",453],["T_FUNCTION","function",453],["T_WHITESPACE"," ",453],["T_STRING","authenticate",453],"(",["T_VARIABLE","$username",453],",",["T_WHITESPACE"," ",453],["T_VARIABLE","$password",453],")",["T_WHITESPACE","\n    ",453],"{",["T_WHITESPACE","\n        ",454],["T_TRY","try",455],["T_WHITESPACE"," ",455],"{",["T_WHITESPACE","\n            ",455],["T_VARIABLE","$customer",456],["T_WHITESPACE"," ",456],"=",["T_WHITESPACE"," ",456],["T_VARIABLE","$this",456],["T_OBJECT_OPERATOR","->",456],["T_STRING","customerRepository",456],["T_OBJECT_OPERATOR","->",456],["T_STRING","get",456],"(",["T_VARIABLE","$username",456],")",";",["T_WHITESPACE","\n        ",456],"}",["T_WHITESPACE"," ",457],["T_CATCH","catch",457],["T_WHITESPACE"," ",457],"(",["T_STRING","NoSuchEntityException",457],["T_WHITESPACE"," ",457],["T_VARIABLE","$e",457],")",["T_WHITESPACE"," ",457],"{",["T_WHITESPACE","\n            ",457],["T_THROW","throw",458],["T_WHITESPACE"," ",458],["T_NEW","new",458],["T_WHITESPACE"," ",458],["T_STRING","InvalidEmailOrPasswordException",458],"(",["T_STRING","__",458],"(",["T_CONSTANT_ENCAPSED_STRING","'Invalid login or password.'",458],")",")",";",["T_WHITESPACE","\n        ",458],"}",["T_WHITESPACE","\n\n        ",459],["T_VARIABLE","$customerId",461],["T_WHITESPACE"," ",461],"=",["T_WHITESPACE"," ",461],["T_VARIABLE","$customer",461],["T_OBJECT_OPERATOR","->",461],["T_STRING","getId",461],"(",")",";",["T_WHITESPACE","\n        ",461],["T_IF","if",462],["T_WHITESPACE"," ",462],"(",["T_VARIABLE","$this",462],["T_OBJECT_OPERATOR","->",462],["T_STRING","getAuthentication",462],"(",")",["T_OBJECT_OPERATOR","->",462],["T_STRING","isLocked",462],"(",["T_VARIABLE","$customerId",462],")",")",["T_WHITESPACE"," ",462],"{",["T_WHITESPACE","\n            ",462],["T_THROW","throw",463],["T_WHITESPACE"," ",463],["T_NEW","new",463],["T_WHITESPACE"," ",463],["T_STRING","UserLockedException",463],"(",["T_STRING","__",463],"(",["T_CONSTANT_ENCAPSED_STRING","'The account is locked.'",463],")",")",";",["T_WHITESPACE","\n        ",463],"}",["T_WHITESPACE","\n        ",464],["T_TRY","try",465],["T_WHITESPACE"," ",465],"{",["T_WHITESPACE","\n            ",465],["T_VARIABLE","$this",466],["T_OBJECT_OPERATOR","->",466],["T_STRING","getAuthentication",466],"(",")",["T_OBJECT_OPERATOR","->",466],["T_STRING","authenticate",466],"(",["T_VARIABLE","$customerId",466],",",["T_WHITESPACE"," ",466],["T_VARIABLE","$password",466],")",";",["T_WHITESPACE","\n        ",466],"}",["T_WHITESPACE"," ",467],["T_CATCH","catch",467],["T_WHITESPACE"," ",467],"(",["T_STRING","InvalidEmailOrPasswordException",467],["T_WHITESPACE"," ",467],["T_VARIABLE","$e",467],")",["T_WHITESPACE"," ",467],"{",["T_WHITESPACE","\n            ",467],["T_THROW","throw",468],["T_WHITESPACE"," ",468],["T_NEW","new",468],["T_WHITESPACE"," ",468],["T_STRING","InvalidEmailOrPasswordException",468],"(",["T_STRING","__",468],"(",["T_CONSTANT_ENCAPSED_STRING","'Invalid login or password.'",468],")",")",";",["T_WHITESPACE","\n        ",468],"}",["T_WHITESPACE","\n        ",469],["T_IF","if",470],["T_WHITESPACE"," ",470],"(",["T_VARIABLE","$customer",470],["T_OBJECT_OPERATOR","->",470],["T_STRING","getConfirmation",470],"(",")",["T_WHITESPACE"," ",470],["T_BOOLEAN_AND","&&",470],["T_WHITESPACE"," ",470],["T_VARIABLE","$this",470],["T_OBJECT_OPERATOR","->",470],["T_STRING","isConfirmationRequired",470],"(",["T_VARIABLE","$customer",470],")",")",["T_WHITESPACE"," ",470],"{",["T_WHITESPACE","\n            ",470],["T_THROW","throw",471],["T_WHITESPACE"," ",471],["T_NEW","new",471],["T_WHITESPACE"," ",471],["T_STRING","EmailNotConfirmedException",471],"(",["T_STRING","__",471],"(",["T_CONSTANT_ENCAPSED_STRING","'This account is not confirmed.'",471],")",")",";",["T_WHITESPACE","\n        ",471],"}",["T_WHITESPACE","\n\n        ",472],["T_VARIABLE","$customerModel",474],["T_WHITESPACE"," ",474],"=",["T_WHITESPACE"," ",474],["T_VARIABLE","$this",474],["T_OBJECT_OPERATOR","->",474],["T_STRING","customerFactory",474],["T_OBJECT_OPERATOR","->",474],["T_STRING","create",474],"(",")",["T_OBJECT_OPERATOR","->",474],["T_STRING","updateData",474],"(",["T_VARIABLE","$customer",474],")",";",["T_WHITESPACE","\n        ",474],["T_VARIABLE","$this",475],["T_OBJECT_OPERATOR","->",475],["T_STRING","eventManager",475],["T_OBJECT_OPERATOR","->",475],["T_STRING","dispatch",475],"(",["T_WHITESPACE","\n            ",475],["T_CONSTANT_ENCAPSED_STRING","'customer_customer_authenticated'",476],",",["T_WHITESPACE","\n            ",476],"[",["T_CONSTANT_ENCAPSED_STRING","'model'",477],["T_WHITESPACE"," ",477],["T_DOUBLE_ARROW","=>",477],["T_WHITESPACE"," ",477],["T_VARIABLE","$customerModel",477],",",["T_WHITESPACE"," ",477],["T_CONSTANT_ENCAPSED_STRING","'password'",477],["T_WHITESPACE"," ",477],["T_DOUBLE_ARROW","=>",477],["T_WHITESPACE"," ",477],["T_VARIABLE","$password",477],"]",["T_WHITESPACE","\n        ",477],")",";",["T_WHITESPACE","\n\n        ",478],["T_VARIABLE","$this",480],["T_OBJECT_OPERATOR","->",480],["T_STRING","eventManager",480],["T_OBJECT_OPERATOR","->",480],["T_STRING","dispatch",480],"(",["T_CONSTANT_ENCAPSED_STRING","'customer_data_object_login'",480],",",["T_WHITESPACE"," ",480],"[",["T_CONSTANT_ENCAPSED_STRING","'customer'",480],["T_WHITESPACE"," ",480],["T_DOUBLE_ARROW","=>",480],["T_WHITESPACE"," ",480],["T_VARIABLE","$customer",480],"]",")",";",["T_WHITESPACE","\n\n        ",480],["T_RETURN","return",482],["T_WHITESPACE"," ",482],["T_VARIABLE","$customer",482],";",["T_WHITESPACE","\n    ",482],"}",["T_WHITESPACE","\n\n    ",483],["T_DOC_COMMENT","\/**\n     * {@inheritdoc}\n     *\/",485],["T_WHITESPACE","\n    ",487],["T_PUBLIC","public",488],["T_WHITESPACE"," ",488],["T_FUNCTION","function",488],["T_WHITESPACE"," ",488],["T_STRING","validateResetPasswordLinkToken",488],"(",["T_VARIABLE","$customerId",488],",",["T_WHITESPACE"," ",488],["T_VARIABLE","$resetPasswordLinkToken",488],")",["T_WHITESPACE","\n    ",488],"{",["T_WHITESPACE","\n        ",489],["T_VARIABLE","$this",490],["T_OBJECT_OPERATOR","->",490],["T_STRING","validateResetPasswordToken",490],"(",["T_VARIABLE","$customerId",490],",",["T_WHITESPACE"," ",490],["T_VARIABLE","$resetPasswordLinkToken",490],")",";",["T_WHITESPACE","\n        ",490],["T_RETURN","return",491],["T_WHITESPACE"," ",491],["T_STRING","true",491],";",["T_WHITESPACE","\n    ",491],"}",["T_WHITESPACE","\n\n    ",492],["T_DOC_COMMENT","\/**\n     * {@inheritdoc}\n     *\/",494],["T_WHITESPACE","\n    ",496],["T_PUBLIC","public",497],["T_WHITESPACE"," ",497],["T_FUNCTION","function",497],["T_WHITESPACE"," ",497],["T_STRING","initiatePasswordReset",497],"(",["T_VARIABLE","$email",497],",",["T_WHITESPACE"," ",497],["T_VARIABLE","$template",497],",",["T_WHITESPACE"," ",497],["T_VARIABLE","$websiteId",497],["T_WHITESPACE"," ",497],"=",["T_WHITESPACE"," ",497],["T_STRING","null",497],")",["T_WHITESPACE","\n    ",497],"{",["T_WHITESPACE","\n        ",498],["T_IF","if",499],["T_WHITESPACE"," ",499],"(",["T_VARIABLE","$websiteId",499],["T_WHITESPACE"," ",499],["T_IS_IDENTICAL","===",499],["T_WHITESPACE"," ",499],["T_STRING","null",499],")",["T_WHITESPACE"," ",499],"{",["T_WHITESPACE","\n            ",499],["T_VARIABLE","$websiteId",500],["T_WHITESPACE"," ",500],"=",["T_WHITESPACE"," ",500],["T_VARIABLE","$this",500],["T_OBJECT_OPERATOR","->",500],["T_STRING","storeManager",500],["T_OBJECT_OPERATOR","->",500],["T_STRING","getStore",500],"(",")",["T_OBJECT_OPERATOR","->",500],["T_STRING","getWebsiteId",500],"(",")",";",["T_WHITESPACE","\n        ",500],"}",["T_WHITESPACE","\n        ",501],["T_COMMENT","\/\/ load customer by email\n",502],["T_WHITESPACE","        ",503],["T_VARIABLE","$customer",503],["T_WHITESPACE"," ",503],"=",["T_WHITESPACE"," ",503],["T_VARIABLE","$this",503],["T_OBJECT_OPERATOR","->",503],["T_STRING","customerRepository",503],["T_OBJECT_OPERATOR","->",503],["T_STRING","get",503],"(",["T_VARIABLE","$email",503],",",["T_WHITESPACE"," ",503],["T_VARIABLE","$websiteId",503],")",";",["T_WHITESPACE","\n\n        ",503],["T_VARIABLE","$newPasswordToken",505],["T_WHITESPACE"," ",505],"=",["T_WHITESPACE"," ",505],["T_VARIABLE","$this",505],["T_OBJECT_OPERATOR","->",505],["T_STRING","mathRandom",505],["T_OBJECT_OPERATOR","->",505],["T_STRING","getUniqueHash",505],"(",")",";",["T_WHITESPACE","\n        ",505],["T_VARIABLE","$this",506],["T_OBJECT_OPERATOR","->",506],["T_STRING","changeResetPasswordLinkToken",506],"(",["T_VARIABLE","$customer",506],",",["T_WHITESPACE"," ",506],["T_VARIABLE","$newPasswordToken",506],")",";",["T_WHITESPACE","\n\n        ",506],["T_TRY","try",508],["T_WHITESPACE"," ",508],"{",["T_WHITESPACE","\n            ",508],["T_SWITCH","switch",509],["T_WHITESPACE"," ",509],"(",["T_VARIABLE","$template",509],")",["T_WHITESPACE"," ",509],"{",["T_WHITESPACE","\n                ",509],["T_CASE","case",510],["T_WHITESPACE"," ",510],["T_STRING","AccountManagement",510],["T_DOUBLE_COLON","::",510],["T_STRING","EMAIL_REMINDER",510],":",["T_WHITESPACE","\n                    ",510],["T_VARIABLE","$this",511],["T_OBJECT_OPERATOR","->",511],["T_STRING","getEmailNotification",511],"(",")",["T_OBJECT_OPERATOR","->",511],["T_STRING","passwordReminder",511],"(",["T_VARIABLE","$customer",511],")",";",["T_WHITESPACE","\n                    ",511],["T_BREAK","break",512],";",["T_WHITESPACE","\n                ",512],["T_CASE","case",513],["T_WHITESPACE"," ",513],["T_STRING","AccountManagement",513],["T_DOUBLE_COLON","::",513],["T_STRING","EMAIL_RESET",513],":",["T_WHITESPACE","\n                    ",513],["T_VARIABLE","$this",514],["T_OBJECT_OPERATOR","->",514],["T_STRING","getEmailNotification",514],"(",")",["T_OBJECT_OPERATOR","->",514],["T_STRING","passwordResetConfirmation",514],"(",["T_VARIABLE","$customer",514],")",";",["T_WHITESPACE","\n                    ",514],["T_BREAK","break",515],";",["T_WHITESPACE","\n                ",515],["T_DEFAULT","default",516],":",["T_WHITESPACE","\n                    ",516],["T_THROW","throw",517],["T_WHITESPACE"," ",517],["T_NEW","new",517],["T_WHITESPACE"," ",517],["T_STRING","InputException",517],"(",["T_WHITESPACE","\n                        ",517],["T_STRING","__",518],"(",["T_WHITESPACE","\n                            ",518],["T_CONSTANT_ENCAPSED_STRING","'Invalid value of \"%value\" provided for the %fieldName field.'",519],",",["T_WHITESPACE","\n                            ",519],"[",["T_CONSTANT_ENCAPSED_STRING","'value'",520],["T_WHITESPACE"," ",520],["T_DOUBLE_ARROW","=>",520],["T_WHITESPACE"," ",520],["T_VARIABLE","$template",520],",",["T_WHITESPACE"," ",520],["T_CONSTANT_ENCAPSED_STRING","'fieldName'",520],["T_WHITESPACE"," ",520],["T_DOUBLE_ARROW","=>",520],["T_WHITESPACE"," ",520],["T_CONSTANT_ENCAPSED_STRING","'email type'",520],"]",["T_WHITESPACE","\n                        ",520],")",["T_WHITESPACE","\n                    ",521],")",";",["T_WHITESPACE","\n            ",522],"}",["T_WHITESPACE","\n            ",523],["T_RETURN","return",524],["T_WHITESPACE"," ",524],["T_STRING","true",524],";",["T_WHITESPACE","\n        ",524],"}",["T_WHITESPACE"," ",525],["T_CATCH","catch",525],["T_WHITESPACE"," ",525],"(",["T_STRING","MailException",525],["T_WHITESPACE"," ",525],["T_VARIABLE","$e",525],")",["T_WHITESPACE"," ",525],"{",["T_WHITESPACE","\n            ",525],["T_COMMENT","\/\/ If we are not able to send a reset password email, this should be ignored\n",526],["T_WHITESPACE","            ",527],["T_VARIABLE","$this",527],["T_OBJECT_OPERATOR","->",527],["T_STRING","logger",527],["T_OBJECT_OPERATOR","->",527],["T_STRING","critical",527],"(",["T_VARIABLE","$e",527],")",";",["T_WHITESPACE","\n        ",527],"}",["T_WHITESPACE","\n        ",528],["T_RETURN","return",529],["T_WHITESPACE"," ",529],["T_STRING","false",529],";",["T_WHITESPACE","\n    ",529],"}",["T_WHITESPACE","\n\n    ",530],["T_DOC_COMMENT","\/**\n     * {@inheritdoc}\n     *\/",532],["T_WHITESPACE","\n    ",534],["T_PUBLIC","public",535],["T_WHITESPACE"," ",535],["T_FUNCTION","function",535],["T_WHITESPACE"," ",535],["T_STRING","resetPassword",535],"(",["T_VARIABLE","$email",535],",",["T_WHITESPACE"," ",535],["T_VARIABLE","$resetToken",535],",",["T_WHITESPACE"," ",535],["T_VARIABLE","$newPassword",535],")",["T_WHITESPACE","\n    ",535],"{",["T_WHITESPACE","\n        ",536],["T_VARIABLE","$customer",537],["T_WHITESPACE"," ",537],"=",["T_WHITESPACE"," ",537],["T_VARIABLE","$this",537],["T_OBJECT_OPERATOR","->",537],["T_STRING","customerRepository",537],["T_OBJECT_OPERATOR","->",537],["T_STRING","get",537],"(",["T_VARIABLE","$email",537],")",";",["T_WHITESPACE","\n        ",537],["T_COMMENT","\/\/Validate Token and new password strength\n",538],["T_WHITESPACE","        ",539],["T_VARIABLE","$this",539],["T_OBJECT_OPERATOR","->",539],["T_STRING","validateResetPasswordToken",539],"(",["T_VARIABLE","$customer",539],["T_OBJECT_OPERATOR","->",539],["T_STRING","getId",539],"(",")",",",["T_WHITESPACE"," ",539],["T_VARIABLE","$resetToken",539],")",";",["T_WHITESPACE","\n        ",539],["T_VARIABLE","$this",540],["T_OBJECT_OPERATOR","->",540],["T_STRING","checkPasswordStrength",540],"(",["T_VARIABLE","$newPassword",540],")",";",["T_WHITESPACE","\n        ",540],["T_COMMENT","\/\/Update secure data\n",541],["T_WHITESPACE","        ",542],["T_VARIABLE","$customerSecure",542],["T_WHITESPACE"," ",542],"=",["T_WHITESPACE"," ",542],["T_VARIABLE","$this",542],["T_OBJECT_OPERATOR","->",542],["T_STRING","customerRegistry",542],["T_OBJECT_OPERATOR","->",542],["T_STRING","retrieveSecureData",542],"(",["T_VARIABLE","$customer",542],["T_OBJECT_OPERATOR","->",542],["T_STRING","getId",542],"(",")",")",";",["T_WHITESPACE","\n        ",542],["T_VARIABLE","$customerSecure",543],["T_OBJECT_OPERATOR","->",543],["T_STRING","setRpToken",543],"(",["T_STRING","null",543],")",";",["T_WHITESPACE","\n        ",543],["T_VARIABLE","$customerSecure",544],["T_OBJECT_OPERATOR","->",544],["T_STRING","setRpTokenCreatedAt",544],"(",["T_STRING","null",544],")",";",["T_WHITESPACE","\n        ",544],["T_VARIABLE","$customerSecure",545],["T_OBJECT_OPERATOR","->",545],["T_STRING","setPasswordHash",545],"(",["T_VARIABLE","$this",545],["T_OBJECT_OPERATOR","->",545],["T_STRING","createPasswordHash",545],"(",["T_VARIABLE","$newPassword",545],")",")",";",["T_WHITESPACE","\n        ",545],["T_VARIABLE","$this",546],["T_OBJECT_OPERATOR","->",546],["T_STRING","customerRepository",546],["T_OBJECT_OPERATOR","->",546],["T_STRING","save",546],"(",["T_VARIABLE","$customer",546],")",";",["T_WHITESPACE","\n        ",546],["T_RETURN","return",547],["T_WHITESPACE"," ",547],["T_STRING","true",547],";",["T_WHITESPACE","\n    ",547],"}",["T_WHITESPACE","\n\n    ",548],["T_DOC_COMMENT","\/**\n     * Make sure that password complies with minimum security requirements.\n     *\n     * @param string $password\n     * @return void\n     * @throws InputException\n     *\/",550],["T_WHITESPACE","\n    ",556],["T_PROTECTED","protected",557],["T_WHITESPACE"," ",557],["T_FUNCTION","function",557],["T_WHITESPACE"," ",557],["T_STRING","checkPasswordStrength",557],"(",["T_VARIABLE","$password",557],")",["T_WHITESPACE","\n    ",557],"{",["T_WHITESPACE","\n        ",558],["T_VARIABLE","$length",559],["T_WHITESPACE"," ",559],"=",["T_WHITESPACE"," ",559],["T_VARIABLE","$this",559],["T_OBJECT_OPERATOR","->",559],["T_STRING","stringHelper",559],["T_OBJECT_OPERATOR","->",559],["T_STRING","strlen",559],"(",["T_VARIABLE","$password",559],")",";",["T_WHITESPACE","\n        ",559],["T_IF","if",560],["T_WHITESPACE"," ",560],"(",["T_VARIABLE","$length",560],["T_WHITESPACE"," ",560],">",["T_WHITESPACE"," ",560],["T_STRING","self",560],["T_DOUBLE_COLON","::",560],["T_STRING","MAX_PASSWORD_LENGTH",560],")",["T_WHITESPACE"," ",560],"{",["T_WHITESPACE","\n            ",560],["T_THROW","throw",561],["T_WHITESPACE"," ",561],["T_NEW","new",561],["T_WHITESPACE"," ",561],["T_STRING","InputException",561],"(",["T_WHITESPACE","\n                ",561],["T_STRING","__",562],"(",["T_WHITESPACE","\n                    ",562],["T_CONSTANT_ENCAPSED_STRING","'Please enter a password with at most %1 characters.'",563],",",["T_WHITESPACE","\n                    ",563],["T_STRING","self",564],["T_DOUBLE_COLON","::",564],["T_STRING","MAX_PASSWORD_LENGTH",564],["T_WHITESPACE","\n                ",564],")",["T_WHITESPACE","\n            ",565],")",";",["T_WHITESPACE","\n        ",566],"}",["T_WHITESPACE","\n        ",567],["T_VARIABLE","$configMinPasswordLength",568],["T_WHITESPACE"," ",568],"=",["T_WHITESPACE"," ",568],["T_VARIABLE","$this",568],["T_OBJECT_OPERATOR","->",568],["T_STRING","getMinPasswordLength",568],"(",")",";",["T_WHITESPACE","\n        ",568],["T_IF","if",569],["T_WHITESPACE"," ",569],"(",["T_VARIABLE","$length",569],["T_WHITESPACE"," ",569],"<",["T_WHITESPACE"," ",569],["T_VARIABLE","$configMinPasswordLength",569],")",["T_WHITESPACE"," ",569],"{",["T_WHITESPACE","\n            ",569],["T_THROW","throw",570],["T_WHITESPACE"," ",570],["T_NEW","new",570],["T_WHITESPACE"," ",570],["T_STRING","InputException",570],"(",["T_WHITESPACE","\n                ",570],["T_STRING","__",571],"(",["T_WHITESPACE","\n                    ",571],["T_CONSTANT_ENCAPSED_STRING","'Please enter a password with at least %1 characters.'",572],",",["T_WHITESPACE","\n                    ",572],["T_VARIABLE","$configMinPasswordLength",573],["T_WHITESPACE","\n                ",573],")",["T_WHITESPACE","\n            ",574],")",";",["T_WHITESPACE","\n        ",575],"}",["T_WHITESPACE","\n        ",576],["T_IF","if",577],["T_WHITESPACE"," ",577],"(",["T_VARIABLE","$this",577],["T_OBJECT_OPERATOR","->",577],["T_STRING","stringHelper",577],["T_OBJECT_OPERATOR","->",577],["T_STRING","strlen",577],"(",["T_STRING","trim",577],"(",["T_VARIABLE","$password",577],")",")",["T_WHITESPACE"," ",577],["T_IS_NOT_EQUAL","!=",577],["T_WHITESPACE"," ",577],["T_VARIABLE","$length",577],")",["T_WHITESPACE"," ",577],"{",["T_WHITESPACE","\n            ",577],["T_THROW","throw",578],["T_WHITESPACE"," ",578],["T_NEW","new",578],["T_WHITESPACE"," ",578],["T_STRING","InputException",578],"(",["T_STRING","__",578],"(",["T_CONSTANT_ENCAPSED_STRING","'The password can\\'t begin or end with a space.'",578],")",")",";",["T_WHITESPACE","\n        ",578],"}",["T_WHITESPACE","\n\n        ",579],["T_VARIABLE","$requiredCharactersCheck",581],["T_WHITESPACE"," ",581],"=",["T_WHITESPACE"," ",581],["T_VARIABLE","$this",581],["T_OBJECT_OPERATOR","->",581],["T_STRING","makeRequiredCharactersCheck",581],"(",["T_VARIABLE","$password",581],")",";",["T_WHITESPACE","\n        ",581],["T_IF","if",582],["T_WHITESPACE"," ",582],"(",["T_VARIABLE","$requiredCharactersCheck",582],["T_WHITESPACE"," ",582],["T_IS_NOT_IDENTICAL","!==",582],["T_WHITESPACE"," ",582],["T_LNUMBER","0",582],")",["T_WHITESPACE"," ",582],"{",["T_WHITESPACE","\n            ",582],["T_THROW","throw",583],["T_WHITESPACE"," ",583],["T_NEW","new",583],["T_WHITESPACE"," ",583],["T_STRING","InputException",583],"(",["T_WHITESPACE","\n                ",583],["T_STRING","__",584],"(",["T_WHITESPACE","\n                    ",584],["T_CONSTANT_ENCAPSED_STRING","'Minimum of different classes of characters in password is %1.'",585],["T_WHITESPACE"," ",585],".",["T_WHITESPACE","\n                    ",585],["T_CONSTANT_ENCAPSED_STRING","' Classes of characters: Lower Case, Upper Case, Digits, Special Characters.'",586],",",["T_WHITESPACE","\n                    ",586],["T_VARIABLE","$requiredCharactersCheck",587],["T_WHITESPACE","\n                ",587],")",["T_WHITESPACE","\n            ",588],")",";",["T_WHITESPACE","\n        ",589],"}",["T_WHITESPACE","\n    ",590],"}",["T_WHITESPACE","\n\n    ",591],["T_DOC_COMMENT","\/**\n     * Check password for presence of required character sets\n     *\n     * @param string $password\n     * @return int\n     *\/",593],["T_WHITESPACE","\n    ",598],["T_PROTECTED","protected",599],["T_WHITESPACE"," ",599],["T_FUNCTION","function",599],["T_WHITESPACE"," ",599],["T_STRING","makeRequiredCharactersCheck",599],"(",["T_VARIABLE","$password",599],")",["T_WHITESPACE","\n    ",599],"{",["T_WHITESPACE","\n        ",600],["T_VARIABLE","$counter",601],["T_WHITESPACE"," ",601],"=",["T_WHITESPACE"," ",601],["T_LNUMBER","0",601],";",["T_WHITESPACE","\n        ",601],["T_VARIABLE","$requiredNumber",602],["T_WHITESPACE"," ",602],"=",["T_WHITESPACE"," ",602],["T_VARIABLE","$this",602],["T_OBJECT_OPERATOR","->",602],["T_STRING","scopeConfig",602],["T_OBJECT_OPERATOR","->",602],["T_STRING","getValue",602],"(",["T_STRING","self",602],["T_DOUBLE_COLON","::",602],["T_STRING","XML_PATH_REQUIRED_CHARACTER_CLASSES_NUMBER",602],")",";",["T_WHITESPACE","\n        ",602],["T_VARIABLE","$return",603],["T_WHITESPACE"," ",603],"=",["T_WHITESPACE"," ",603],["T_LNUMBER","0",603],";",["T_WHITESPACE","\n\n        ",603],["T_IF","if",605],["T_WHITESPACE"," ",605],"(",["T_STRING","preg_match",605],"(",["T_CONSTANT_ENCAPSED_STRING","'\/[0-9]+\/'",605],",",["T_WHITESPACE"," ",605],["T_VARIABLE","$password",605],")",")",["T_WHITESPACE"," ",605],"{",["T_WHITESPACE","\n            ",605],["T_VARIABLE","$counter",606],["T_WHITESPACE"," ",606],["T_INC","++",606],";",["T_WHITESPACE","\n        ",606],"}",["T_WHITESPACE","\n        ",607],["T_IF","if",608],["T_WHITESPACE"," ",608],"(",["T_STRING","preg_match",608],"(",["T_CONSTANT_ENCAPSED_STRING","'\/[A-Z]+\/'",608],",",["T_WHITESPACE"," ",608],["T_VARIABLE","$password",608],")",")",["T_WHITESPACE"," ",608],"{",["T_WHITESPACE","\n            ",608],["T_VARIABLE","$counter",609],["T_WHITESPACE"," ",609],["T_INC","++",609],";",["T_WHITESPACE","\n        ",609],"}",["T_WHITESPACE","\n        ",610],["T_IF","if",611],["T_WHITESPACE"," ",611],"(",["T_STRING","preg_match",611],"(",["T_CONSTANT_ENCAPSED_STRING","'\/[a-z]+\/'",611],",",["T_WHITESPACE"," ",611],["T_VARIABLE","$password",611],")",")",["T_WHITESPACE"," ",611],"{",["T_WHITESPACE","\n            ",611],["T_VARIABLE","$counter",612],["T_WHITESPACE"," ",612],["T_INC","++",612],";",["T_WHITESPACE","\n        ",612],"}",["T_WHITESPACE","\n        ",613],["T_IF","if",614],["T_WHITESPACE"," ",614],"(",["T_STRING","preg_match",614],"(",["T_CONSTANT_ENCAPSED_STRING","'\/[^a-zA-Z0-9]+\/'",614],",",["T_WHITESPACE"," ",614],["T_VARIABLE","$password",614],")",")",["T_WHITESPACE"," ",614],"{",["T_WHITESPACE","\n            ",614],["T_VARIABLE","$counter",615],["T_WHITESPACE"," ",615],["T_INC","++",615],";",["T_WHITESPACE","\n        ",615],"}",["T_WHITESPACE","\n\n        ",616],["T_IF","if",618],["T_WHITESPACE"," ",618],"(",["T_VARIABLE","$counter",618],["T_WHITESPACE"," ",618],"<",["T_WHITESPACE"," ",618],["T_VARIABLE","$requiredNumber",618],")",["T_WHITESPACE"," ",618],"{",["T_WHITESPACE","\n            ",618],["T_VARIABLE","$return",619],["T_WHITESPACE"," ",619],"=",["T_WHITESPACE"," ",619],["T_VARIABLE","$requiredNumber",619],";",["T_WHITESPACE","\n        ",619],"}",["T_WHITESPACE","\n\n        ",620],["T_RETURN","return",622],["T_WHITESPACE"," ",622],["T_VARIABLE","$return",622],";",["T_WHITESPACE","\n    ",622],"}",["T_WHITESPACE","\n\n    ",623],["T_DOC_COMMENT","\/**\n     * Retrieve minimum password length\n     *\n     * @return int\n     *\/",625],["T_WHITESPACE","\n    ",629],["T_PROTECTED","protected",630],["T_WHITESPACE"," ",630],["T_FUNCTION","function",630],["T_WHITESPACE"," ",630],["T_STRING","getMinPasswordLength",630],"(",")",["T_WHITESPACE","\n    ",630],"{",["T_WHITESPACE","\n        ",631],["T_RETURN","return",632],["T_WHITESPACE"," ",632],["T_VARIABLE","$this",632],["T_OBJECT_OPERATOR","->",632],["T_STRING","scopeConfig",632],["T_OBJECT_OPERATOR","->",632],["T_STRING","getValue",632],"(",["T_STRING","self",632],["T_DOUBLE_COLON","::",632],["T_STRING","XML_PATH_MINIMUM_PASSWORD_LENGTH",632],")",";",["T_WHITESPACE","\n    ",632],"}",["T_WHITESPACE","\n\n    ",633],["T_DOC_COMMENT","\/**\n     * {@inheritdoc}\n     *\/",635],["T_WHITESPACE","\n    ",637],["T_PUBLIC","public",638],["T_WHITESPACE"," ",638],["T_FUNCTION","function",638],["T_WHITESPACE"," ",638],["T_STRING","getConfirmationStatus",638],"(",["T_VARIABLE","$customerId",638],")",["T_WHITESPACE","\n    ",638],"{",["T_WHITESPACE","\n        ",639],["T_COMMENT","\/\/ load customer by id\n",640],["T_WHITESPACE","        ",641],["T_VARIABLE","$customer",641],["T_WHITESPACE"," ",641],"=",["T_WHITESPACE"," ",641],["T_VARIABLE","$this",641],["T_OBJECT_OPERATOR","->",641],["T_STRING","customerRepository",641],["T_OBJECT_OPERATOR","->",641],["T_STRING","getById",641],"(",["T_VARIABLE","$customerId",641],")",";",["T_WHITESPACE","\n        ",641],["T_IF","if",642],["T_WHITESPACE"," ",642],"(",["T_VARIABLE","$this",642],["T_OBJECT_OPERATOR","->",642],["T_STRING","isConfirmationRequired",642],"(",["T_VARIABLE","$customer",642],")",")",["T_WHITESPACE"," ",642],"{",["T_WHITESPACE","\n            ",642],["T_IF","if",643],["T_WHITESPACE"," ",643],"(","!",["T_VARIABLE","$customer",643],["T_OBJECT_OPERATOR","->",643],["T_STRING","getConfirmation",643],"(",")",")",["T_WHITESPACE"," ",643],"{",["T_WHITESPACE","\n                ",643],["T_RETURN","return",644],["T_WHITESPACE"," ",644],["T_STRING","self",644],["T_DOUBLE_COLON","::",644],["T_STRING","ACCOUNT_CONFIRMED",644],";",["T_WHITESPACE","\n            ",644],"}",["T_WHITESPACE","\n            ",645],["T_RETURN","return",646],["T_WHITESPACE"," ",646],["T_STRING","self",646],["T_DOUBLE_COLON","::",646],["T_STRING","ACCOUNT_CONFIRMATION_REQUIRED",646],";",["T_WHITESPACE","\n        ",646],"}",["T_WHITESPACE","\n        ",647],["T_RETURN","return",648],["T_WHITESPACE"," ",648],["T_STRING","self",648],["T_DOUBLE_COLON","::",648],["T_STRING","ACCOUNT_CONFIRMATION_NOT_REQUIRED",648],";",["T_WHITESPACE","\n    ",648],"}",["T_WHITESPACE","\n\n    ",649],["T_DOC_COMMENT","\/**\n     * {@inheritdoc}\n     *\/",651],["T_WHITESPACE","\n    ",653],["T_PUBLIC","public",654],["T_WHITESPACE"," ",654],["T_FUNCTION","function",654],["T_WHITESPACE"," ",654],["T_STRING","createAccount",654],"(",["T_STRING","CustomerInterface",654],["T_WHITESPACE"," ",654],["T_VARIABLE","$customer",654],",",["T_WHITESPACE"," ",654],["T_VARIABLE","$password",654],["T_WHITESPACE"," ",654],"=",["T_WHITESPACE"," ",654],["T_STRING","null",654],",",["T_WHITESPACE"," ",654],["T_VARIABLE","$redirectUrl",654],["T_WHITESPACE"," ",654],"=",["T_WHITESPACE"," ",654],["T_CONSTANT_ENCAPSED_STRING","''",654],")",["T_WHITESPACE","\n    ",654],"{",["T_WHITESPACE","\n        ",655],["T_IF","if",656],["T_WHITESPACE"," ",656],"(",["T_VARIABLE","$password",656],["T_WHITESPACE"," ",656],["T_IS_NOT_IDENTICAL","!==",656],["T_WHITESPACE"," ",656],["T_STRING","null",656],")",["T_WHITESPACE"," ",656],"{",["T_WHITESPACE","\n            ",656],["T_VARIABLE","$this",657],["T_OBJECT_OPERATOR","->",657],["T_STRING","checkPasswordStrength",657],"(",["T_VARIABLE","$password",657],")",";",["T_WHITESPACE","\n            ",657],["T_VARIABLE","$hash",658],["T_WHITESPACE"," ",658],"=",["T_WHITESPACE"," ",658],["T_VARIABLE","$this",658],["T_OBJECT_OPERATOR","->",658],["T_STRING","createPasswordHash",658],"(",["T_VARIABLE","$password",658],")",";",["T_WHITESPACE","\n        ",658],"}",["T_WHITESPACE"," ",659],["T_ELSE","else",659],["T_WHITESPACE"," ",659],"{",["T_WHITESPACE","\n            ",659],["T_VARIABLE","$hash",660],["T_WHITESPACE"," ",660],"=",["T_WHITESPACE"," ",660],["T_STRING","null",660],";",["T_WHITESPACE","\n        ",660],"}",["T_WHITESPACE","\n        ",661],["T_RETURN","return",662],["T_WHITESPACE"," ",662],["T_VARIABLE","$this",662],["T_OBJECT_OPERATOR","->",662],["T_STRING","createAccountWithPasswordHash",662],"(",["T_VARIABLE","$customer",662],",",["T_WHITESPACE"," ",662],["T_VARIABLE","$hash",662],",",["T_WHITESPACE"," ",662],["T_VARIABLE","$redirectUrl",662],")",";",["T_WHITESPACE","\n    ",662],"}",["T_WHITESPACE","\n\n    ",663],["T_DOC_COMMENT","\/**\n     * {@inheritdoc}\n     * @SuppressWarnings(PHPMD.CyclomaticComplexity)\n     * @SuppressWarnings(PHPMD.NPathComplexity)\n     *\/",665],["T_WHITESPACE","\n    ",669],["T_PUBLIC","public",670],["T_WHITESPACE"," ",670],["T_FUNCTION","function",670],["T_WHITESPACE"," ",670],["T_STRING","createAccountWithPasswordHash",670],"(",["T_STRING","CustomerInterface",670],["T_WHITESPACE"," ",670],["T_VARIABLE","$customer",670],",",["T_WHITESPACE"," ",670],["T_VARIABLE","$hash",670],",",["T_WHITESPACE"," ",670],["T_VARIABLE","$redirectUrl",670],["T_WHITESPACE"," ",670],"=",["T_WHITESPACE"," ",670],["T_CONSTANT_ENCAPSED_STRING","''",670],")",["T_WHITESPACE","\n    ",670],"{",["T_WHITESPACE","\n        ",671],["T_COMMENT","\/\/ This logic allows an existing customer to be added to a different store.  No new account is created.\n",672],["T_WHITESPACE","        ",673],["T_COMMENT","\/\/ The plan is to move this logic into a new method called something like 'registerAccountWithStore'\n",673],["T_WHITESPACE","        ",674],["T_IF","if",674],["T_WHITESPACE"," ",674],"(",["T_VARIABLE","$customer",674],["T_OBJECT_OPERATOR","->",674],["T_STRING","getId",674],"(",")",")",["T_WHITESPACE"," ",674],"{",["T_WHITESPACE","\n            ",674],["T_VARIABLE","$customer",675],["T_WHITESPACE"," ",675],"=",["T_WHITESPACE"," ",675],["T_VARIABLE","$this",675],["T_OBJECT_OPERATOR","->",675],["T_STRING","customerRepository",675],["T_OBJECT_OPERATOR","->",675],["T_STRING","get",675],"(",["T_VARIABLE","$customer",675],["T_OBJECT_OPERATOR","->",675],["T_STRING","getEmail",675],"(",")",")",";",["T_WHITESPACE","\n            ",675],["T_VARIABLE","$websiteId",676],["T_WHITESPACE"," ",676],"=",["T_WHITESPACE"," ",676],["T_VARIABLE","$customer",676],["T_OBJECT_OPERATOR","->",676],["T_STRING","getWebsiteId",676],"(",")",";",["T_WHITESPACE","\n\n            ",676],["T_IF","if",678],["T_WHITESPACE"," ",678],"(",["T_VARIABLE","$this",678],["T_OBJECT_OPERATOR","->",678],["T_STRING","isCustomerInStore",678],"(",["T_VARIABLE","$websiteId",678],",",["T_WHITESPACE"," ",678],["T_VARIABLE","$customer",678],["T_OBJECT_OPERATOR","->",678],["T_STRING","getStoreId",678],"(",")",")",")",["T_WHITESPACE"," ",678],"{",["T_WHITESPACE","\n                ",678],["T_THROW","throw",679],["T_WHITESPACE"," ",679],["T_NEW","new",679],["T_WHITESPACE"," ",679],["T_STRING","InputException",679],"(",["T_STRING","__",679],"(",["T_CONSTANT_ENCAPSED_STRING","'This customer already exists in this store.'",679],")",")",";",["T_WHITESPACE","\n            ",679],"}",["T_WHITESPACE","\n            ",680],["T_COMMENT","\/\/ Existing password hash will be used from secured customer data registry when saving customer\n",681],["T_WHITESPACE","        ",682],"}",["T_WHITESPACE","\n\n        ",682],["T_COMMENT","\/\/ Make sure we have a storeId to associate this customer with.\n",684],["T_WHITESPACE","        ",685],["T_IF","if",685],["T_WHITESPACE"," ",685],"(","!",["T_VARIABLE","$customer",685],["T_OBJECT_OPERATOR","->",685],["T_STRING","getStoreId",685],"(",")",")",["T_WHITESPACE"," ",685],"{",["T_WHITESPACE","\n            ",685],["T_IF","if",686],["T_WHITESPACE"," ",686],"(",["T_VARIABLE","$customer",686],["T_OBJECT_OPERATOR","->",686],["T_STRING","getWebsiteId",686],"(",")",")",["T_WHITESPACE"," ",686],"{",["T_WHITESPACE","\n                ",686],["T_VARIABLE","$storeId",687],["T_WHITESPACE"," ",687],"=",["T_WHITESPACE"," ",687],["T_VARIABLE","$this",687],["T_OBJECT_OPERATOR","->",687],["T_STRING","storeManager",687],["T_OBJECT_OPERATOR","->",687],["T_STRING","getWebsite",687],"(",["T_VARIABLE","$customer",687],["T_OBJECT_OPERATOR","->",687],["T_STRING","getWebsiteId",687],"(",")",")",["T_OBJECT_OPERATOR","->",687],["T_STRING","getDefaultStore",687],"(",")",["T_OBJECT_OPERATOR","->",687],["T_STRING","getId",687],"(",")",";",["T_WHITESPACE","\n            ",687],"}",["T_WHITESPACE"," ",688],["T_ELSE","else",688],["T_WHITESPACE"," ",688],"{",["T_WHITESPACE","\n                ",688],["T_VARIABLE","$storeId",689],["T_WHITESPACE"," ",689],"=",["T_WHITESPACE"," ",689],["T_VARIABLE","$this",689],["T_OBJECT_OPERATOR","->",689],["T_STRING","storeManager",689],["T_OBJECT_OPERATOR","->",689],["T_STRING","getStore",689],"(",")",["T_OBJECT_OPERATOR","->",689],["T_STRING","getId",689],"(",")",";",["T_WHITESPACE","\n            ",689],"}",["T_WHITESPACE","\n            ",690],["T_VARIABLE","$customer",691],["T_OBJECT_OPERATOR","->",691],["T_STRING","setStoreId",691],"(",["T_VARIABLE","$storeId",691],")",";",["T_WHITESPACE","\n        ",691],"}",["T_WHITESPACE","\n\n        ",692],["T_COMMENT","\/\/ Associate website_id with customer\n",694],["T_WHITESPACE","        ",695],["T_IF","if",695],["T_WHITESPACE"," ",695],"(","!",["T_VARIABLE","$customer",695],["T_OBJECT_OPERATOR","->",695],["T_STRING","getWebsiteId",695],"(",")",")",["T_WHITESPACE"," ",695],"{",["T_WHITESPACE","\n            ",695],["T_VARIABLE","$websiteId",696],["T_WHITESPACE"," ",696],"=",["T_WHITESPACE"," ",696],["T_VARIABLE","$this",696],["T_OBJECT_OPERATOR","->",696],["T_STRING","storeManager",696],["T_OBJECT_OPERATOR","->",696],["T_STRING","getStore",696],"(",["T_VARIABLE","$customer",696],["T_OBJECT_OPERATOR","->",696],["T_STRING","getStoreId",696],"(",")",")",["T_OBJECT_OPERATOR","->",696],["T_STRING","getWebsiteId",696],"(",")",";",["T_WHITESPACE","\n            ",696],["T_VARIABLE","$customer",697],["T_OBJECT_OPERATOR","->",697],["T_STRING","setWebsiteId",697],"(",["T_VARIABLE","$websiteId",697],")",";",["T_WHITESPACE","\n        ",697],"}",["T_WHITESPACE","\n\n        ",698],["T_COMMENT","\/\/ Update 'created_in' value with actual store name\n",700],["T_WHITESPACE","        ",701],["T_IF","if",701],["T_WHITESPACE"," ",701],"(",["T_VARIABLE","$customer",701],["T_OBJECT_OPERATOR","->",701],["T_STRING","getId",701],"(",")",["T_WHITESPACE"," ",701],["T_IS_IDENTICAL","===",701],["T_WHITESPACE"," ",701],["T_STRING","null",701],")",["T_WHITESPACE"," ",701],"{",["T_WHITESPACE","\n            ",701],["T_VARIABLE","$storeName",702],["T_WHITESPACE"," ",702],"=",["T_WHITESPACE"," ",702],["T_VARIABLE","$this",702],["T_OBJECT_OPERATOR","->",702],["T_STRING","storeManager",702],["T_OBJECT_OPERATOR","->",702],["T_STRING","getStore",702],"(",["T_VARIABLE","$customer",702],["T_OBJECT_OPERATOR","->",702],["T_STRING","getStoreId",702],"(",")",")",["T_OBJECT_OPERATOR","->",702],["T_STRING","getName",702],"(",")",";",["T_WHITESPACE","\n            ",702],["T_VARIABLE","$customer",703],["T_OBJECT_OPERATOR","->",703],["T_STRING","setCreatedIn",703],"(",["T_VARIABLE","$storeName",703],")",";",["T_WHITESPACE","\n        ",703],"}",["T_WHITESPACE","\n\n        ",704],["T_VARIABLE","$customerAddresses",706],["T_WHITESPACE"," ",706],"=",["T_WHITESPACE"," ",706],["T_VARIABLE","$customer",706],["T_OBJECT_OPERATOR","->",706],["T_STRING","getAddresses",706],"(",")",["T_WHITESPACE"," ",706],"?",":",["T_WHITESPACE"," ",706],"[","]",";",["T_WHITESPACE","\n        ",706],["T_VARIABLE","$customer",707],["T_OBJECT_OPERATOR","->",707],["T_STRING","setAddresses",707],"(",["T_STRING","null",707],")",";",["T_WHITESPACE","\n        ",707],["T_TRY","try",708],["T_WHITESPACE"," ",708],"{",["T_WHITESPACE","\n            ",708],["T_COMMENT","\/\/ If customer exists existing hash will be used by Repository\n",709],["T_WHITESPACE","            ",710],["T_VARIABLE","$customer",710],["T_WHITESPACE"," ",710],"=",["T_WHITESPACE"," ",710],["T_VARIABLE","$this",710],["T_OBJECT_OPERATOR","->",710],["T_STRING","customerRepository",710],["T_OBJECT_OPERATOR","->",710],["T_STRING","save",710],"(",["T_VARIABLE","$customer",710],",",["T_WHITESPACE"," ",710],["T_VARIABLE","$hash",710],")",";",["T_WHITESPACE","\n        ",710],"}",["T_WHITESPACE"," ",711],["T_CATCH","catch",711],["T_WHITESPACE"," ",711],"(",["T_STRING","AlreadyExistsException",711],["T_WHITESPACE"," ",711],["T_VARIABLE","$e",711],")",["T_WHITESPACE"," ",711],"{",["T_WHITESPACE","\n            ",711],["T_THROW","throw",712],["T_WHITESPACE"," ",712],["T_NEW","new",712],["T_WHITESPACE"," ",712],["T_STRING","InputMismatchException",712],"(",["T_WHITESPACE","\n                ",712],["T_STRING","__",713],"(",["T_CONSTANT_ENCAPSED_STRING","'A customer with the same email already exists in an associated website.'",713],")",["T_WHITESPACE","\n            ",713],")",";",["T_WHITESPACE","\n        ",714],"}",["T_WHITESPACE"," ",715],["T_CATCH","catch",715],["T_WHITESPACE"," ",715],"(",["T_STRING","LocalizedException",715],["T_WHITESPACE"," ",715],["T_VARIABLE","$e",715],")",["T_WHITESPACE"," ",715],"{",["T_WHITESPACE","\n            ",715],["T_THROW","throw",716],["T_WHITESPACE"," ",716],["T_VARIABLE","$e",716],";",["T_WHITESPACE","\n        ",716],"}",["T_WHITESPACE","\n        ",717],["T_TRY","try",718],["T_WHITESPACE"," ",718],"{",["T_WHITESPACE","\n            ",718],["T_FOREACH","foreach",719],["T_WHITESPACE"," ",719],"(",["T_VARIABLE","$customerAddresses",719],["T_WHITESPACE"," ",719],["T_AS","as",719],["T_WHITESPACE"," ",719],["T_VARIABLE","$address",719],")",["T_WHITESPACE"," ",719],"{",["T_WHITESPACE","\n                ",719],["T_IF","if",720],["T_WHITESPACE"," ",720],"(",["T_VARIABLE","$address",720],["T_OBJECT_OPERATOR","->",720],["T_STRING","getId",720],"(",")",")",["T_WHITESPACE"," ",720],"{",["T_WHITESPACE","\n                    ",720],["T_VARIABLE","$newAddress",721],["T_WHITESPACE"," ",721],"=",["T_WHITESPACE"," ",721],["T_CLONE","clone",721],["T_WHITESPACE"," ",721],["T_VARIABLE","$address",721],";",["T_WHITESPACE","\n                    ",721],["T_VARIABLE","$newAddress",722],["T_OBJECT_OPERATOR","->",722],["T_STRING","setId",722],"(",["T_STRING","null",722],")",";",["T_WHITESPACE","\n                    ",722],["T_VARIABLE","$newAddress",723],["T_OBJECT_OPERATOR","->",723],["T_STRING","setCustomerId",723],"(",["T_VARIABLE","$customer",723],["T_OBJECT_OPERATOR","->",723],["T_STRING","getId",723],"(",")",")",";",["T_WHITESPACE","\n                    ",723],["T_VARIABLE","$this",724],["T_OBJECT_OPERATOR","->",724],["T_STRING","addressRepository",724],["T_OBJECT_OPERATOR","->",724],["T_STRING","save",724],"(",["T_VARIABLE","$newAddress",724],")",";",["T_WHITESPACE","\n                ",724],"}",["T_WHITESPACE"," ",725],["T_ELSE","else",725],["T_WHITESPACE"," ",725],"{",["T_WHITESPACE","\n                    ",725],["T_VARIABLE","$address",726],["T_OBJECT_OPERATOR","->",726],["T_STRING","setCustomerId",726],"(",["T_VARIABLE","$customer",726],["T_OBJECT_OPERATOR","->",726],["T_STRING","getId",726],"(",")",")",";",["T_WHITESPACE","\n                    ",726],["T_VARIABLE","$this",727],["T_OBJECT_OPERATOR","->",727],["T_STRING","addressRepository",727],["T_OBJECT_OPERATOR","->",727],["T_STRING","save",727],"(",["T_VARIABLE","$address",727],")",";",["T_WHITESPACE","\n                ",727],"}",["T_WHITESPACE","\n            ",728],"}",["T_WHITESPACE","\n            ",729],["T_VARIABLE","$this",730],["T_OBJECT_OPERATOR","->",730],["T_STRING","customerRegistry",730],["T_OBJECT_OPERATOR","->",730],["T_STRING","remove",730],"(",["T_VARIABLE","$customer",730],["T_OBJECT_OPERATOR","->",730],["T_STRING","getId",730],"(",")",")",";",["T_WHITESPACE","\n        ",730],"}",["T_WHITESPACE"," ",731],["T_CATCH","catch",731],["T_WHITESPACE"," ",731],"(",["T_STRING","InputException",731],["T_WHITESPACE"," ",731],["T_VARIABLE","$e",731],")",["T_WHITESPACE"," ",731],"{",["T_WHITESPACE","\n            ",731],["T_VARIABLE","$this",732],["T_OBJECT_OPERATOR","->",732],["T_STRING","customerRepository",732],["T_OBJECT_OPERATOR","->",732],["T_STRING","delete",732],"(",["T_VARIABLE","$customer",732],")",";",["T_WHITESPACE","\n            ",732],["T_THROW","throw",733],["T_WHITESPACE"," ",733],["T_VARIABLE","$e",733],";",["T_WHITESPACE","\n        ",733],"}",["T_WHITESPACE","\n        ",734],["T_VARIABLE","$customer",735],["T_WHITESPACE"," ",735],"=",["T_WHITESPACE"," ",735],["T_VARIABLE","$this",735],["T_OBJECT_OPERATOR","->",735],["T_STRING","customerRepository",735],["T_OBJECT_OPERATOR","->",735],["T_STRING","getById",735],"(",["T_VARIABLE","$customer",735],["T_OBJECT_OPERATOR","->",735],["T_STRING","getId",735],"(",")",")",";",["T_WHITESPACE","\n        ",735],["T_VARIABLE","$newLinkToken",736],["T_WHITESPACE"," ",736],"=",["T_WHITESPACE"," ",736],["T_VARIABLE","$this",736],["T_OBJECT_OPERATOR","->",736],["T_STRING","mathRandom",736],["T_OBJECT_OPERATOR","->",736],["T_STRING","getUniqueHash",736],"(",")",";",["T_WHITESPACE","\n        ",736],["T_VARIABLE","$this",737],["T_OBJECT_OPERATOR","->",737],["T_STRING","changeResetPasswordLinkToken",737],"(",["T_VARIABLE","$customer",737],",",["T_WHITESPACE"," ",737],["T_VARIABLE","$newLinkToken",737],")",";",["T_WHITESPACE","\n        ",737],["T_VARIABLE","$this",738],["T_OBJECT_OPERATOR","->",738],["T_STRING","sendEmailConfirmation",738],"(",["T_VARIABLE","$customer",738],",",["T_WHITESPACE"," ",738],["T_VARIABLE","$redirectUrl",738],")",";",["T_WHITESPACE","\n\n        ",738],["T_RETURN","return",740],["T_WHITESPACE"," ",740],["T_VARIABLE","$customer",740],";",["T_WHITESPACE","\n    ",740],"}",["T_WHITESPACE","\n\n    ",741],["T_DOC_COMMENT","\/**\n     * {@inheritdoc}\n     *\/",743],["T_WHITESPACE","\n    ",745],["T_PUBLIC","public",746],["T_WHITESPACE"," ",746],["T_FUNCTION","function",746],["T_WHITESPACE"," ",746],["T_STRING","getDefaultBillingAddress",746],"(",["T_VARIABLE","$customerId",746],")",["T_WHITESPACE","\n    ",746],"{",["T_WHITESPACE","\n        ",747],["T_VARIABLE","$customer",748],["T_WHITESPACE"," ",748],"=",["T_WHITESPACE"," ",748],["T_VARIABLE","$this",748],["T_OBJECT_OPERATOR","->",748],["T_STRING","customerRepository",748],["T_OBJECT_OPERATOR","->",748],["T_STRING","getById",748],"(",["T_VARIABLE","$customerId",748],")",";",["T_WHITESPACE","\n        ",748],["T_RETURN","return",749],["T_WHITESPACE"," ",749],["T_VARIABLE","$this",749],["T_OBJECT_OPERATOR","->",749],["T_STRING","getAddressById",749],"(",["T_VARIABLE","$customer",749],",",["T_WHITESPACE"," ",749],["T_VARIABLE","$customer",749],["T_OBJECT_OPERATOR","->",749],["T_STRING","getDefaultBilling",749],"(",")",")",";",["T_WHITESPACE","\n    ",749],"}",["T_WHITESPACE","\n\n    ",750],["T_DOC_COMMENT","\/**\n     * {@inheritdoc}\n     *\/",752],["T_WHITESPACE","\n    ",754],["T_PUBLIC","public",755],["T_WHITESPACE"," ",755],["T_FUNCTION","function",755],["T_WHITESPACE"," ",755],["T_STRING","getDefaultShippingAddress",755],"(",["T_VARIABLE","$customerId",755],")",["T_WHITESPACE","\n    ",755],"{",["T_WHITESPACE","\n        ",756],["T_VARIABLE","$customer",757],["T_WHITESPACE"," ",757],"=",["T_WHITESPACE"," ",757],["T_VARIABLE","$this",757],["T_OBJECT_OPERATOR","->",757],["T_STRING","customerRepository",757],["T_OBJECT_OPERATOR","->",757],["T_STRING","getById",757],"(",["T_VARIABLE","$customerId",757],")",";",["T_WHITESPACE","\n        ",757],["T_RETURN","return",758],["T_WHITESPACE"," ",758],["T_VARIABLE","$this",758],["T_OBJECT_OPERATOR","->",758],["T_STRING","getAddressById",758],"(",["T_VARIABLE","$customer",758],",",["T_WHITESPACE"," ",758],["T_VARIABLE","$customer",758],["T_OBJECT_OPERATOR","->",758],["T_STRING","getDefaultShipping",758],"(",")",")",";",["T_WHITESPACE","\n    ",758],"}",["T_WHITESPACE","\n\n    ",759],["T_DOC_COMMENT","\/**\n     * Send either confirmation or welcome email after an account creation\n     *\n     * @param CustomerInterface $customer\n     * @param string $redirectUrl\n     * @return void\n     *\/",761],["T_WHITESPACE","\n    ",767],["T_PROTECTED","protected",768],["T_WHITESPACE"," ",768],["T_FUNCTION","function",768],["T_WHITESPACE"," ",768],["T_STRING","sendEmailConfirmation",768],"(",["T_STRING","CustomerInterface",768],["T_WHITESPACE"," ",768],["T_VARIABLE","$customer",768],",",["T_WHITESPACE"," ",768],["T_VARIABLE","$redirectUrl",768],")",["T_WHITESPACE","\n    ",768],"{",["T_WHITESPACE","\n        ",769],["T_TRY","try",770],["T_WHITESPACE"," ",770],"{",["T_WHITESPACE","\n            ",770],["T_VARIABLE","$hash",771],["T_WHITESPACE"," ",771],"=",["T_WHITESPACE"," ",771],["T_VARIABLE","$this",771],["T_OBJECT_OPERATOR","->",771],["T_STRING","customerRegistry",771],["T_OBJECT_OPERATOR","->",771],["T_STRING","retrieveSecureData",771],"(",["T_VARIABLE","$customer",771],["T_OBJECT_OPERATOR","->",771],["T_STRING","getId",771],"(",")",")",["T_OBJECT_OPERATOR","->",771],["T_STRING","getPasswordHash",771],"(",")",";",["T_WHITESPACE","\n            ",771],["T_VARIABLE","$templateType",772],["T_WHITESPACE"," ",772],"=",["T_WHITESPACE"," ",772],["T_STRING","self",772],["T_DOUBLE_COLON","::",772],["T_STRING","NEW_ACCOUNT_EMAIL_REGISTERED",772],";",["T_WHITESPACE","\n            ",772],["T_IF","if",773],["T_WHITESPACE"," ",773],"(",["T_VARIABLE","$this",773],["T_OBJECT_OPERATOR","->",773],["T_STRING","isConfirmationRequired",773],"(",["T_VARIABLE","$customer",773],")",["T_WHITESPACE"," ",773],["T_BOOLEAN_AND","&&",773],["T_WHITESPACE"," ",773],["T_VARIABLE","$hash",773],["T_WHITESPACE"," ",773],["T_IS_NOT_EQUAL","!=",773],["T_WHITESPACE"," ",773],["T_CONSTANT_ENCAPSED_STRING","''",773],")",["T_WHITESPACE"," ",773],"{",["T_WHITESPACE","\n                ",773],["T_VARIABLE","$templateType",774],["T_WHITESPACE"," ",774],"=",["T_WHITESPACE"," ",774],["T_STRING","self",774],["T_DOUBLE_COLON","::",774],["T_STRING","NEW_ACCOUNT_EMAIL_CONFIRMATION",774],";",["T_WHITESPACE","\n            ",774],"}",["T_WHITESPACE"," ",775],["T_ELSEIF","elseif",775],["T_WHITESPACE"," ",775],"(",["T_VARIABLE","$hash",775],["T_WHITESPACE"," ",775],["T_IS_EQUAL","==",775],["T_WHITESPACE"," ",775],["T_CONSTANT_ENCAPSED_STRING","''",775],")",["T_WHITESPACE"," ",775],"{",["T_WHITESPACE","\n                ",775],["T_VARIABLE","$templateType",776],["T_WHITESPACE"," ",776],"=",["T_WHITESPACE"," ",776],["T_STRING","self",776],["T_DOUBLE_COLON","::",776],["T_STRING","NEW_ACCOUNT_EMAIL_REGISTERED_NO_PASSWORD",776],";",["T_WHITESPACE","\n            ",776],"}",["T_WHITESPACE","\n            ",777],["T_VARIABLE","$this",778],["T_OBJECT_OPERATOR","->",778],["T_STRING","getEmailNotification",778],"(",")",["T_OBJECT_OPERATOR","->",778],["T_STRING","newAccount",778],"(",["T_VARIABLE","$customer",778],",",["T_WHITESPACE"," ",778],["T_VARIABLE","$templateType",778],",",["T_WHITESPACE"," ",778],["T_VARIABLE","$redirectUrl",778],",",["T_WHITESPACE"," ",778],["T_VARIABLE","$customer",778],["T_OBJECT_OPERATOR","->",778],["T_STRING","getStoreId",778],"(",")",")",";",["T_WHITESPACE","\n        ",778],"}",["T_WHITESPACE"," ",779],["T_CATCH","catch",779],["T_WHITESPACE"," ",779],"(",["T_STRING","MailException",779],["T_WHITESPACE"," ",779],["T_VARIABLE","$e",779],")",["T_WHITESPACE"," ",779],"{",["T_WHITESPACE","\n            ",779],["T_COMMENT","\/\/ If we are not able to send a new account email, this should be ignored\n",780],["T_WHITESPACE","            ",781],["T_VARIABLE","$this",781],["T_OBJECT_OPERATOR","->",781],["T_STRING","logger",781],["T_OBJECT_OPERATOR","->",781],["T_STRING","critical",781],"(",["T_VARIABLE","$e",781],")",";",["T_WHITESPACE","\n        ",781],"}",["T_WHITESPACE","\n    ",782],"}",["T_WHITESPACE","\n\n    ",783],["T_DOC_COMMENT","\/**\n     * {@inheritdoc}\n     *\/",785],["T_WHITESPACE","\n    ",787],["T_PUBLIC","public",788],["T_WHITESPACE"," ",788],["T_FUNCTION","function",788],["T_WHITESPACE"," ",788],["T_STRING","changePassword",788],"(",["T_VARIABLE","$email",788],",",["T_WHITESPACE"," ",788],["T_VARIABLE","$currentPassword",788],",",["T_WHITESPACE"," ",788],["T_VARIABLE","$newPassword",788],")",["T_WHITESPACE","\n    ",788],"{",["T_WHITESPACE","\n        ",789],["T_TRY","try",790],["T_WHITESPACE"," ",790],"{",["T_WHITESPACE","\n            ",790],["T_VARIABLE","$customer",791],["T_WHITESPACE"," ",791],"=",["T_WHITESPACE"," ",791],["T_VARIABLE","$this",791],["T_OBJECT_OPERATOR","->",791],["T_STRING","customerRepository",791],["T_OBJECT_OPERATOR","->",791],["T_STRING","get",791],"(",["T_VARIABLE","$email",791],")",";",["T_WHITESPACE","\n        ",791],"}",["T_WHITESPACE"," ",792],["T_CATCH","catch",792],["T_WHITESPACE"," ",792],"(",["T_STRING","NoSuchEntityException",792],["T_WHITESPACE"," ",792],["T_VARIABLE","$e",792],")",["T_WHITESPACE"," ",792],"{",["T_WHITESPACE","\n            ",792],["T_THROW","throw",793],["T_WHITESPACE"," ",793],["T_NEW","new",793],["T_WHITESPACE"," ",793],["T_STRING","InvalidEmailOrPasswordException",793],"(",["T_STRING","__",793],"(",["T_CONSTANT_ENCAPSED_STRING","'Invalid login or password.'",793],")",")",";",["T_WHITESPACE","\n        ",793],"}",["T_WHITESPACE","\n        ",794],["T_RETURN","return",795],["T_WHITESPACE"," ",795],["T_VARIABLE","$this",795],["T_OBJECT_OPERATOR","->",795],["T_STRING","changePasswordForCustomer",795],"(",["T_VARIABLE","$customer",795],",",["T_WHITESPACE"," ",795],["T_VARIABLE","$currentPassword",795],",",["T_WHITESPACE"," ",795],["T_VARIABLE","$newPassword",795],")",";",["T_WHITESPACE","\n    ",795],"}",["T_WHITESPACE","\n\n    ",796],["T_DOC_COMMENT","\/**\n     * {@inheritdoc}\n     *\/",798],["T_WHITESPACE","\n    ",800],["T_PUBLIC","public",801],["T_WHITESPACE"," ",801],["T_FUNCTION","function",801],["T_WHITESPACE"," ",801],["T_STRING","changePasswordById",801],"(",["T_VARIABLE","$customerId",801],",",["T_WHITESPACE"," ",801],["T_VARIABLE","$currentPassword",801],",",["T_WHITESPACE"," ",801],["T_VARIABLE","$newPassword",801],")",["T_WHITESPACE","\n    ",801],"{",["T_WHITESPACE","\n        ",802],["T_TRY","try",803],["T_WHITESPACE"," ",803],"{",["T_WHITESPACE","\n            ",803],["T_VARIABLE","$customer",804],["T_WHITESPACE"," ",804],"=",["T_WHITESPACE"," ",804],["T_VARIABLE","$this",804],["T_OBJECT_OPERATOR","->",804],["T_STRING","customerRepository",804],["T_OBJECT_OPERATOR","->",804],["T_STRING","getById",804],"(",["T_VARIABLE","$customerId",804],")",";",["T_WHITESPACE","\n        ",804],"}",["T_WHITESPACE"," ",805],["T_CATCH","catch",805],["T_WHITESPACE"," ",805],"(",["T_STRING","NoSuchEntityException",805],["T_WHITESPACE"," ",805],["T_VARIABLE","$e",805],")",["T_WHITESPACE"," ",805],"{",["T_WHITESPACE","\n            ",805],["T_THROW","throw",806],["T_WHITESPACE"," ",806],["T_NEW","new",806],["T_WHITESPACE"," ",806],["T_STRING","InvalidEmailOrPasswordException",806],"(",["T_STRING","__",806],"(",["T_CONSTANT_ENCAPSED_STRING","'Invalid login or password.'",806],")",")",";",["T_WHITESPACE","\n        ",806],"}",["T_WHITESPACE","\n        ",807],["T_RETURN","return",808],["T_WHITESPACE"," ",808],["T_VARIABLE","$this",808],["T_OBJECT_OPERATOR","->",808],["T_STRING","changePasswordForCustomer",808],"(",["T_VARIABLE","$customer",808],",",["T_WHITESPACE"," ",808],["T_VARIABLE","$currentPassword",808],",",["T_WHITESPACE"," ",808],["T_VARIABLE","$newPassword",808],")",";",["T_WHITESPACE","\n    ",808],"}",["T_WHITESPACE","\n\n    ",809],["T_DOC_COMMENT","\/**\n     * Change customer password\n     *\n     * @param CustomerInterface $customer\n     * @param string $currentPassword\n     * @param string $newPassword\n     * @return bool true on success\n     * @throws InputException\n     * @throws InvalidEmailOrPasswordException\n     * @throws UserLockedException\n     *\/",811],["T_WHITESPACE","\n    ",821],["T_PRIVATE","private",822],["T_WHITESPACE"," ",822],["T_FUNCTION","function",822],["T_WHITESPACE"," ",822],["T_STRING","changePasswordForCustomer",822],"(",["T_VARIABLE","$customer",822],",",["T_WHITESPACE"," ",822],["T_VARIABLE","$currentPassword",822],",",["T_WHITESPACE"," ",822],["T_VARIABLE","$newPassword",822],")",["T_WHITESPACE","\n    ",822],"{",["T_WHITESPACE","\n        ",823],["T_TRY","try",824],["T_WHITESPACE"," ",824],"{",["T_WHITESPACE","\n            ",824],["T_VARIABLE","$this",825],["T_OBJECT_OPERATOR","->",825],["T_STRING","getAuthentication",825],"(",")",["T_OBJECT_OPERATOR","->",825],["T_STRING","authenticate",825],"(",["T_VARIABLE","$customer",825],["T_OBJECT_OPERATOR","->",825],["T_STRING","getId",825],"(",")",",",["T_WHITESPACE"," ",825],["T_VARIABLE","$currentPassword",825],")",";",["T_WHITESPACE","\n        ",825],"}",["T_WHITESPACE"," ",826],["T_CATCH","catch",826],["T_WHITESPACE"," ",826],"(",["T_STRING","InvalidEmailOrPasswordException",826],["T_WHITESPACE"," ",826],["T_VARIABLE","$e",826],")",["T_WHITESPACE"," ",826],"{",["T_WHITESPACE","\n            ",826],["T_THROW","throw",827],["T_WHITESPACE"," ",827],["T_NEW","new",827],["T_WHITESPACE"," ",827],["T_STRING","InvalidEmailOrPasswordException",827],"(",["T_STRING","__",827],"(",["T_CONSTANT_ENCAPSED_STRING","'The password doesn\\'t match this account.'",827],")",")",";",["T_WHITESPACE","\n        ",827],"}",["T_WHITESPACE","\n        ",828],["T_VARIABLE","$customerSecure",829],["T_WHITESPACE"," ",829],"=",["T_WHITESPACE"," ",829],["T_VARIABLE","$this",829],["T_OBJECT_OPERATOR","->",829],["T_STRING","customerRegistry",829],["T_OBJECT_OPERATOR","->",829],["T_STRING","retrieveSecureData",829],"(",["T_VARIABLE","$customer",829],["T_OBJECT_OPERATOR","->",829],["T_STRING","getId",829],"(",")",")",";",["T_WHITESPACE","\n        ",829],["T_VARIABLE","$customerSecure",830],["T_OBJECT_OPERATOR","->",830],["T_STRING","setRpToken",830],"(",["T_STRING","null",830],")",";",["T_WHITESPACE","\n        ",830],["T_VARIABLE","$customerSecure",831],["T_OBJECT_OPERATOR","->",831],["T_STRING","setRpTokenCreatedAt",831],"(",["T_STRING","null",831],")",";",["T_WHITESPACE","\n        ",831],["T_VARIABLE","$this",832],["T_OBJECT_OPERATOR","->",832],["T_STRING","checkPasswordStrength",832],"(",["T_VARIABLE","$newPassword",832],")",";",["T_WHITESPACE","\n        ",832],["T_VARIABLE","$customerSecure",833],["T_OBJECT_OPERATOR","->",833],["T_STRING","setPasswordHash",833],"(",["T_VARIABLE","$this",833],["T_OBJECT_OPERATOR","->",833],["T_STRING","createPasswordHash",833],"(",["T_VARIABLE","$newPassword",833],")",")",";",["T_WHITESPACE","\n        ",833],["T_VARIABLE","$this",834],["T_OBJECT_OPERATOR","->",834],["T_STRING","customerRepository",834],["T_OBJECT_OPERATOR","->",834],["T_STRING","save",834],"(",["T_VARIABLE","$customer",834],")",";",["T_WHITESPACE","\n        ",834],["T_RETURN","return",835],["T_WHITESPACE"," ",835],["T_STRING","true",835],";",["T_WHITESPACE","\n    ",835],"}",["T_WHITESPACE","\n\n    ",836],["T_DOC_COMMENT","\/**\n     * Create a hash for the given password\n     *\n     * @param string $password\n     * @return string\n     *\/",838],["T_WHITESPACE","\n    ",843],["T_PROTECTED","protected",844],["T_WHITESPACE"," ",844],["T_FUNCTION","function",844],["T_WHITESPACE"," ",844],["T_STRING","createPasswordHash",844],"(",["T_VARIABLE","$password",844],")",["T_WHITESPACE","\n    ",844],"{",["T_WHITESPACE","\n        ",845],["T_RETURN","return",846],["T_WHITESPACE"," ",846],["T_VARIABLE","$this",846],["T_OBJECT_OPERATOR","->",846],["T_STRING","encryptor",846],["T_OBJECT_OPERATOR","->",846],["T_STRING","getHash",846],"(",["T_VARIABLE","$password",846],",",["T_WHITESPACE"," ",846],["T_STRING","true",846],")",";",["T_WHITESPACE","\n    ",846],"}",["T_WHITESPACE","\n\n    ",847],["T_DOC_COMMENT","\/**\n     * @return Backend\n     *\/",849],["T_WHITESPACE","\n    ",851],["T_PRIVATE","private",852],["T_WHITESPACE"," ",852],["T_FUNCTION","function",852],["T_WHITESPACE"," ",852],["T_STRING","getEavValidator",852],"(",")",["T_WHITESPACE","\n    ",852],"{",["T_WHITESPACE","\n        ",853],["T_IF","if",854],["T_WHITESPACE"," ",854],"(",["T_VARIABLE","$this",854],["T_OBJECT_OPERATOR","->",854],["T_STRING","eavValidator",854],["T_WHITESPACE"," ",854],["T_IS_IDENTICAL","===",854],["T_WHITESPACE"," ",854],["T_STRING","null",854],")",["T_WHITESPACE"," ",854],"{",["T_WHITESPACE","\n            ",854],["T_VARIABLE","$this",855],["T_OBJECT_OPERATOR","->",855],["T_STRING","eavValidator",855],["T_WHITESPACE"," ",855],"=",["T_WHITESPACE"," ",855],["T_STRING","ObjectManager",855],["T_DOUBLE_COLON","::",855],["T_STRING","getInstance",855],"(",")",["T_OBJECT_OPERATOR","->",855],["T_STRING","get",855],"(",["T_STRING","Backend",855],["T_DOUBLE_COLON","::",855],["T_CLASS","class",855],")",";",["T_WHITESPACE","\n        ",855],"}",["T_WHITESPACE","\n        ",856],["T_RETURN","return",857],["T_WHITESPACE"," ",857],["T_VARIABLE","$this",857],["T_OBJECT_OPERATOR","->",857],["T_STRING","eavValidator",857],";",["T_WHITESPACE","\n    ",857],"}",["T_WHITESPACE","\n\n    ",858],["T_DOC_COMMENT","\/**\n     * {@inheritdoc}\n     *\/",860],["T_WHITESPACE","\n    ",862],["T_PUBLIC","public",863],["T_WHITESPACE"," ",863],["T_FUNCTION","function",863],["T_WHITESPACE"," ",863],["T_STRING","validate",863],"(",["T_STRING","CustomerInterface",863],["T_WHITESPACE"," ",863],["T_VARIABLE","$customer",863],")",["T_WHITESPACE","\n    ",863],"{",["T_WHITESPACE","\n        ",864],["T_VARIABLE","$validationResults",865],["T_WHITESPACE"," ",865],"=",["T_WHITESPACE"," ",865],["T_VARIABLE","$this",865],["T_OBJECT_OPERATOR","->",865],["T_STRING","validationResultsDataFactory",865],["T_OBJECT_OPERATOR","->",865],["T_STRING","create",865],"(",")",";",["T_WHITESPACE","\n\n        ",865],["T_VARIABLE","$oldAddresses",867],["T_WHITESPACE"," ",867],"=",["T_WHITESPACE"," ",867],["T_VARIABLE","$customer",867],["T_OBJECT_OPERATOR","->",867],["T_STRING","getAddresses",867],"(",")",";",["T_WHITESPACE","\n        ",867],["T_VARIABLE","$customerModel",868],["T_WHITESPACE"," ",868],"=",["T_WHITESPACE"," ",868],["T_VARIABLE","$this",868],["T_OBJECT_OPERATOR","->",868],["T_STRING","customerFactory",868],["T_OBJECT_OPERATOR","->",868],["T_STRING","create",868],"(",")",["T_OBJECT_OPERATOR","->",868],["T_STRING","updateData",868],"(",["T_WHITESPACE","\n            ",868],["T_VARIABLE","$customer",869],["T_OBJECT_OPERATOR","->",869],["T_STRING","setAddresses",869],"(","[","]",")",["T_WHITESPACE","\n        ",869],")",";",["T_WHITESPACE","\n        ",870],["T_VARIABLE","$customer",871],["T_OBJECT_OPERATOR","->",871],["T_STRING","setAddresses",871],"(",["T_VARIABLE","$oldAddresses",871],")",";",["T_WHITESPACE","\n\n        ",871],["T_VARIABLE","$result",873],["T_WHITESPACE"," ",873],"=",["T_WHITESPACE"," ",873],["T_VARIABLE","$this",873],["T_OBJECT_OPERATOR","->",873],["T_STRING","getEavValidator",873],"(",")",["T_OBJECT_OPERATOR","->",873],["T_STRING","isValid",873],"(",["T_VARIABLE","$customerModel",873],")",";",["T_WHITESPACE","\n        ",873],["T_IF","if",874],["T_WHITESPACE"," ",874],"(",["T_VARIABLE","$result",874],["T_WHITESPACE"," ",874],["T_IS_IDENTICAL","===",874],["T_WHITESPACE"," ",874],["T_STRING","false",874],["T_WHITESPACE"," ",874],["T_BOOLEAN_AND","&&",874],["T_WHITESPACE"," ",874],["T_STRING","is_array",874],"(",["T_VARIABLE","$this",874],["T_OBJECT_OPERATOR","->",874],["T_STRING","getEavValidator",874],"(",")",["T_OBJECT_OPERATOR","->",874],["T_STRING","getMessages",874],"(",")",")",")",["T_WHITESPACE"," ",874],"{",["T_WHITESPACE","\n            ",874],["T_RETURN","return",875],["T_WHITESPACE"," ",875],["T_VARIABLE","$validationResults",875],["T_OBJECT_OPERATOR","->",875],["T_STRING","setIsValid",875],"(",["T_STRING","false",875],")",["T_WHITESPACE","\n                ",875],["T_OBJECT_OPERATOR","->",876],["T_STRING","setMessages",876],"(",["T_WHITESPACE","\n                    ",876],["T_STRING","call_user_func_array",877],"(",["T_WHITESPACE","\n                        ",877],["T_CONSTANT_ENCAPSED_STRING","'array_merge'",878],",",["T_WHITESPACE","\n                        ",878],["T_VARIABLE","$this",879],["T_OBJECT_OPERATOR","->",879],["T_STRING","getEavValidator",879],"(",")",["T_OBJECT_OPERATOR","->",879],["T_STRING","getMessages",879],"(",")",["T_WHITESPACE","\n                    ",879],")",["T_WHITESPACE","\n                ",880],")",";",["T_WHITESPACE","\n        ",881],"}",["T_WHITESPACE","\n        ",882],["T_RETURN","return",883],["T_WHITESPACE"," ",883],["T_VARIABLE","$validationResults",883],["T_OBJECT_OPERATOR","->",883],["T_STRING","setIsValid",883],"(",["T_STRING","true",883],")",["T_WHITESPACE","\n            ",883],["T_OBJECT_OPERATOR","->",884],["T_STRING","setMessages",884],"(","[","]",")",";",["T_WHITESPACE","\n    ",884],"}",["T_WHITESPACE","\n\n    ",885],["T_DOC_COMMENT","\/**\n     * {@inheritdoc}\n     *\/",887],["T_WHITESPACE","\n    ",889],["T_PUBLIC","public",890],["T_WHITESPACE"," ",890],["T_FUNCTION","function",890],["T_WHITESPACE"," ",890],["T_STRING","isEmailAvailable",890],"(",["T_VARIABLE","$customerEmail",890],",",["T_WHITESPACE"," ",890],["T_VARIABLE","$websiteId",890],["T_WHITESPACE"," ",890],"=",["T_WHITESPACE"," ",890],["T_STRING","null",890],")",["T_WHITESPACE","\n    ",890],"{",["T_WHITESPACE","\n        ",891],["T_TRY","try",892],["T_WHITESPACE"," ",892],"{",["T_WHITESPACE","\n            ",892],["T_IF","if",893],["T_WHITESPACE"," ",893],"(",["T_VARIABLE","$websiteId",893],["T_WHITESPACE"," ",893],["T_IS_IDENTICAL","===",893],["T_WHITESPACE"," ",893],["T_STRING","null",893],")",["T_WHITESPACE"," ",893],"{",["T_WHITESPACE","\n                ",893],["T_VARIABLE","$websiteId",894],["T_WHITESPACE"," ",894],"=",["T_WHITESPACE"," ",894],["T_VARIABLE","$this",894],["T_OBJECT_OPERATOR","->",894],["T_STRING","storeManager",894],["T_OBJECT_OPERATOR","->",894],["T_STRING","getStore",894],"(",")",["T_OBJECT_OPERATOR","->",894],["T_STRING","getWebsiteId",894],"(",")",";",["T_WHITESPACE","\n            ",894],"}",["T_WHITESPACE","\n            ",895],["T_VARIABLE","$this",896],["T_OBJECT_OPERATOR","->",896],["T_STRING","customerRepository",896],["T_OBJECT_OPERATOR","->",896],["T_STRING","get",896],"(",["T_VARIABLE","$customerEmail",896],",",["T_WHITESPACE"," ",896],["T_VARIABLE","$websiteId",896],")",";",["T_WHITESPACE","\n            ",896],["T_RETURN","return",897],["T_WHITESPACE"," ",897],["T_STRING","false",897],";",["T_WHITESPACE","\n        ",897],"}",["T_WHITESPACE"," ",898],["T_CATCH","catch",898],["T_WHITESPACE"," ",898],"(",["T_STRING","NoSuchEntityException",898],["T_WHITESPACE"," ",898],["T_VARIABLE","$e",898],")",["T_WHITESPACE"," ",898],"{",["T_WHITESPACE","\n            ",898],["T_RETURN","return",899],["T_WHITESPACE"," ",899],["T_STRING","true",899],";",["T_WHITESPACE","\n        ",899],"}",["T_WHITESPACE","\n    ",900],"}",["T_WHITESPACE","\n\n    ",901],["T_DOC_COMMENT","\/**\n     * {@inheritDoc}\n     *\/",903],["T_WHITESPACE","\n    ",905],["T_PUBLIC","public",906],["T_WHITESPACE"," ",906],["T_FUNCTION","function",906],["T_WHITESPACE"," ",906],["T_STRING","isCustomerInStore",906],"(",["T_VARIABLE","$customerWebsiteId",906],",",["T_WHITESPACE"," ",906],["T_VARIABLE","$storeId",906],")",["T_WHITESPACE","\n    ",906],"{",["T_WHITESPACE","\n        ",907],["T_VARIABLE","$ids",908],["T_WHITESPACE"," ",908],"=",["T_WHITESPACE"," ",908],"[","]",";",["T_WHITESPACE","\n        ",908],["T_IF","if",909],["T_WHITESPACE"," ",909],"(",["T_BOOL_CAST","(bool)",909],["T_VARIABLE","$this",909],["T_OBJECT_OPERATOR","->",909],["T_STRING","configShare",909],["T_OBJECT_OPERATOR","->",909],["T_STRING","isWebsiteScope",909],"(",")",")",["T_WHITESPACE"," ",909],"{",["T_WHITESPACE","\n            ",909],["T_VARIABLE","$ids",910],["T_WHITESPACE"," ",910],"=",["T_WHITESPACE"," ",910],["T_VARIABLE","$this",910],["T_OBJECT_OPERATOR","->",910],["T_STRING","storeManager",910],["T_OBJECT_OPERATOR","->",910],["T_STRING","getWebsite",910],"(",["T_VARIABLE","$customerWebsiteId",910],")",["T_OBJECT_OPERATOR","->",910],["T_STRING","getStoreIds",910],"(",")",";",["T_WHITESPACE","\n        ",910],"}",["T_WHITESPACE"," ",911],["T_ELSE","else",911],["T_WHITESPACE"," ",911],"{",["T_WHITESPACE","\n            ",911],["T_FOREACH","foreach",912],["T_WHITESPACE"," ",912],"(",["T_VARIABLE","$this",912],["T_OBJECT_OPERATOR","->",912],["T_STRING","storeManager",912],["T_OBJECT_OPERATOR","->",912],["T_STRING","getStores",912],"(",")",["T_WHITESPACE"," ",912],["T_AS","as",912],["T_WHITESPACE"," ",912],["T_VARIABLE","$store",912],")",["T_WHITESPACE"," ",912],"{",["T_WHITESPACE","\n                ",912],["T_VARIABLE","$ids",913],"[","]",["T_WHITESPACE"," ",913],"=",["T_WHITESPACE"," ",913],["T_VARIABLE","$store",913],["T_OBJECT_OPERATOR","->",913],["T_STRING","getId",913],"(",")",";",["T_WHITESPACE","\n            ",913],"}",["T_WHITESPACE","\n        ",914],"}",["T_WHITESPACE","\n\n        ",915],["T_RETURN","return",917],["T_WHITESPACE"," ",917],["T_STRING","in_array",917],"(",["T_VARIABLE","$storeId",917],",",["T_WHITESPACE"," ",917],["T_VARIABLE","$ids",917],")",";",["T_WHITESPACE","\n    ",917],"}",["T_WHITESPACE","\n\n    ",918],["T_DOC_COMMENT","\/**\n     * Validate the Reset Password Token for a customer.\n     *\n     * @param int $customerId\n     * @param string $resetPasswordLinkToken\n     * @return bool\n     * @throws \\Magento\\Framework\\Exception\\State\\InputMismatchException If token is mismatched\n     * @throws \\Magento\\Framework\\Exception\\State\\ExpiredException If token is expired\n     * @throws \\Magento\\Framework\\Exception\\InputException If token or customer id is invalid\n     * @throws \\Magento\\Framework\\Exception\\NoSuchEntityException If customer doesn't exist\n     *\/",920],["T_WHITESPACE","\n    ",930],["T_PRIVATE","private",931],["T_WHITESPACE"," ",931],["T_FUNCTION","function",931],["T_WHITESPACE"," ",931],["T_STRING","validateResetPasswordToken",931],"(",["T_VARIABLE","$customerId",931],",",["T_WHITESPACE"," ",931],["T_VARIABLE","$resetPasswordLinkToken",931],")",["T_WHITESPACE","\n    ",931],"{",["T_WHITESPACE","\n        ",932],["T_IF","if",933],["T_WHITESPACE"," ",933],"(",["T_EMPTY","empty",933],"(",["T_VARIABLE","$customerId",933],")",["T_WHITESPACE"," ",933],["T_BOOLEAN_OR","||",933],["T_WHITESPACE"," ",933],["T_VARIABLE","$customerId",933],["T_WHITESPACE"," ",933],"<",["T_WHITESPACE"," ",933],["T_LNUMBER","0",933],")",["T_WHITESPACE"," ",933],"{",["T_WHITESPACE","\n            ",933],["T_THROW","throw",934],["T_WHITESPACE"," ",934],["T_NEW","new",934],["T_WHITESPACE"," ",934],["T_STRING","InputException",934],"(",["T_STRING","__",934],"(",["T_WHITESPACE","\n                ",934],["T_CONSTANT_ENCAPSED_STRING","'Invalid value of \"%value\" provided for the %fieldName field.'",935],",",["T_WHITESPACE","\n                ",935],"[",["T_CONSTANT_ENCAPSED_STRING","'value'",936],["T_WHITESPACE"," ",936],["T_DOUBLE_ARROW","=>",936],["T_WHITESPACE"," ",936],["T_VARIABLE","$customerId",936],",",["T_WHITESPACE"," ",936],["T_CONSTANT_ENCAPSED_STRING","'fieldName'",936],["T_WHITESPACE"," ",936],["T_DOUBLE_ARROW","=>",936],["T_WHITESPACE"," ",936],["T_CONSTANT_ENCAPSED_STRING","'customerId'",936],"]",["T_WHITESPACE","\n            ",936],")",")",";",["T_WHITESPACE","\n        ",937],"}",["T_WHITESPACE","\n        ",938],["T_IF","if",939],["T_WHITESPACE"," ",939],"(","!",["T_STRING","is_string",939],"(",["T_VARIABLE","$resetPasswordLinkToken",939],")",["T_WHITESPACE"," ",939],["T_BOOLEAN_OR","||",939],["T_WHITESPACE"," ",939],["T_EMPTY","empty",939],"(",["T_VARIABLE","$resetPasswordLinkToken",939],")",")",["T_WHITESPACE"," ",939],"{",["T_WHITESPACE","\n            ",939],["T_VARIABLE","$params",940],["T_WHITESPACE"," ",940],"=",["T_WHITESPACE"," ",940],"[",["T_CONSTANT_ENCAPSED_STRING","'fieldName'",940],["T_WHITESPACE"," ",940],["T_DOUBLE_ARROW","=>",940],["T_WHITESPACE"," ",940],["T_CONSTANT_ENCAPSED_STRING","'resetPasswordLinkToken'",940],"]",";",["T_WHITESPACE","\n            ",940],["T_THROW","throw",941],["T_WHITESPACE"," ",941],["T_NEW","new",941],["T_WHITESPACE"," ",941],["T_STRING","InputException",941],"(",["T_STRING","__",941],"(",["T_CONSTANT_ENCAPSED_STRING","'%fieldName is a required field.'",941],",",["T_WHITESPACE"," ",941],["T_VARIABLE","$params",941],")",")",";",["T_WHITESPACE","\n        ",941],"}",["T_WHITESPACE","\n\n        ",942],["T_VARIABLE","$customerSecureData",944],["T_WHITESPACE"," ",944],"=",["T_WHITESPACE"," ",944],["T_VARIABLE","$this",944],["T_OBJECT_OPERATOR","->",944],["T_STRING","customerRegistry",944],["T_OBJECT_OPERATOR","->",944],["T_STRING","retrieveSecureData",944],"(",["T_VARIABLE","$customerId",944],")",";",["T_WHITESPACE","\n        ",944],["T_VARIABLE","$rpToken",945],["T_WHITESPACE"," ",945],"=",["T_WHITESPACE"," ",945],["T_VARIABLE","$customerSecureData",945],["T_OBJECT_OPERATOR","->",945],["T_STRING","getRpToken",945],"(",")",";",["T_WHITESPACE","\n        ",945],["T_VARIABLE","$rpTokenCreatedAt",946],["T_WHITESPACE"," ",946],"=",["T_WHITESPACE"," ",946],["T_VARIABLE","$customerSecureData",946],["T_OBJECT_OPERATOR","->",946],["T_STRING","getRpTokenCreatedAt",946],"(",")",";",["T_WHITESPACE","\n\n        ",946],["T_IF","if",948],["T_WHITESPACE"," ",948],"(","!",["T_STRING","Security",948],["T_DOUBLE_COLON","::",948],["T_STRING","compareStrings",948],"(",["T_VARIABLE","$rpToken",948],",",["T_WHITESPACE"," ",948],["T_VARIABLE","$resetPasswordLinkToken",948],")",")",["T_WHITESPACE"," ",948],"{",["T_WHITESPACE","\n            ",948],["T_THROW","throw",949],["T_WHITESPACE"," ",949],["T_NEW","new",949],["T_WHITESPACE"," ",949],["T_STRING","InputMismatchException",949],"(",["T_STRING","__",949],"(",["T_CONSTANT_ENCAPSED_STRING","'Reset password token mismatch.'",949],")",")",";",["T_WHITESPACE","\n        ",949],"}",["T_WHITESPACE"," ",950],["T_ELSEIF","elseif",950],["T_WHITESPACE"," ",950],"(",["T_VARIABLE","$this",950],["T_OBJECT_OPERATOR","->",950],["T_STRING","isResetPasswordLinkTokenExpired",950],"(",["T_VARIABLE","$rpToken",950],",",["T_WHITESPACE"," ",950],["T_VARIABLE","$rpTokenCreatedAt",950],")",")",["T_WHITESPACE"," ",950],"{",["T_WHITESPACE","\n            ",950],["T_THROW","throw",951],["T_WHITESPACE"," ",951],["T_NEW","new",951],["T_WHITESPACE"," ",951],["T_STRING","ExpiredException",951],"(",["T_STRING","__",951],"(",["T_CONSTANT_ENCAPSED_STRING","'Reset password token expired.'",951],")",")",";",["T_WHITESPACE","\n        ",951],"}",["T_WHITESPACE","\n\n        ",952],["T_RETURN","return",954],["T_WHITESPACE"," ",954],["T_STRING","true",954],";",["T_WHITESPACE","\n    ",954],"}",["T_WHITESPACE","\n\n    ",955],["T_DOC_COMMENT","\/**\n     * Check if customer can be deleted.\n     *\n     * @param int $customerId\n     * @return bool\n     * @throws \\Magento\\Framework\\Exception\\NoSuchEntityException If group is not found\n     * @throws LocalizedException\n     *\/",957],["T_WHITESPACE","\n    ",964],["T_PUBLIC","public",965],["T_WHITESPACE"," ",965],["T_FUNCTION","function",965],["T_WHITESPACE"," ",965],["T_STRING","isReadonly",965],"(",["T_VARIABLE","$customerId",965],")",["T_WHITESPACE","\n    ",965],"{",["T_WHITESPACE","\n        ",966],["T_VARIABLE","$customer",967],["T_WHITESPACE"," ",967],"=",["T_WHITESPACE"," ",967],["T_VARIABLE","$this",967],["T_OBJECT_OPERATOR","->",967],["T_STRING","customerRegistry",967],["T_OBJECT_OPERATOR","->",967],["T_STRING","retrieveSecureData",967],"(",["T_VARIABLE","$customerId",967],")",";",["T_WHITESPACE","\n        ",967],["T_RETURN","return",968],["T_WHITESPACE"," ",968],"!",["T_VARIABLE","$customer",968],["T_OBJECT_OPERATOR","->",968],["T_STRING","getDeleteable",968],"(",")",";",["T_WHITESPACE","\n    ",968],"}",["T_WHITESPACE","\n\n    ",969],["T_DOC_COMMENT","\/**\n     * Send email with new account related information\n     *\n     * @param CustomerInterface $customer\n     * @param string $type\n     * @param string $backUrl\n     * @param string $storeId\n     * @param string $sendemailStoreId\n     * @return $this\n     * @throws LocalizedException\n     * @deprecated\n     *\/",971],["T_WHITESPACE","\n    ",982],["T_PROTECTED","protected",983],["T_WHITESPACE"," ",983],["T_FUNCTION","function",983],["T_WHITESPACE"," ",983],["T_STRING","sendNewAccountEmail",983],"(",["T_WHITESPACE","\n        ",983],["T_VARIABLE","$customer",984],",",["T_WHITESPACE","\n        ",984],["T_VARIABLE","$type",985],["T_WHITESPACE"," ",985],"=",["T_WHITESPACE"," ",985],["T_STRING","self",985],["T_DOUBLE_COLON","::",985],["T_STRING","NEW_ACCOUNT_EMAIL_REGISTERED",985],",",["T_WHITESPACE","\n        ",985],["T_VARIABLE","$backUrl",986],["T_WHITESPACE"," ",986],"=",["T_WHITESPACE"," ",986],["T_CONSTANT_ENCAPSED_STRING","''",986],",",["T_WHITESPACE","\n        ",986],["T_VARIABLE","$storeId",987],["T_WHITESPACE"," ",987],"=",["T_WHITESPACE"," ",987],["T_CONSTANT_ENCAPSED_STRING","'0'",987],",",["T_WHITESPACE","\n        ",987],["T_VARIABLE","$sendemailStoreId",988],["T_WHITESPACE"," ",988],"=",["T_WHITESPACE"," ",988],["T_STRING","null",988],["T_WHITESPACE","\n    ",988],")",["T_WHITESPACE"," ",989],"{",["T_WHITESPACE","\n        ",989],["T_VARIABLE","$types",990],["T_WHITESPACE"," ",990],"=",["T_WHITESPACE"," ",990],["T_VARIABLE","$this",990],["T_OBJECT_OPERATOR","->",990],["T_STRING","getTemplateTypes",990],"(",")",";",["T_WHITESPACE","\n\n        ",990],["T_IF","if",992],["T_WHITESPACE"," ",992],"(","!",["T_ISSET","isset",992],"(",["T_VARIABLE","$types",992],"[",["T_VARIABLE","$type",992],"]",")",")",["T_WHITESPACE"," ",992],"{",["T_WHITESPACE","\n            ",992],["T_THROW","throw",993],["T_WHITESPACE"," ",993],["T_NEW","new",993],["T_WHITESPACE"," ",993],["T_STRING","LocalizedException",993],"(",["T_STRING","__",993],"(",["T_CONSTANT_ENCAPSED_STRING","'Please correct the transactional account email type.'",993],")",")",";",["T_WHITESPACE","\n        ",993],"}",["T_WHITESPACE","\n\n        ",994],["T_IF","if",996],["T_WHITESPACE"," ",996],"(","!",["T_VARIABLE","$storeId",996],")",["T_WHITESPACE"," ",996],"{",["T_WHITESPACE","\n            ",996],["T_VARIABLE","$storeId",997],["T_WHITESPACE"," ",997],"=",["T_WHITESPACE"," ",997],["T_VARIABLE","$this",997],["T_OBJECT_OPERATOR","->",997],["T_STRING","getWebsiteStoreId",997],"(",["T_VARIABLE","$customer",997],",",["T_WHITESPACE"," ",997],["T_VARIABLE","$sendemailStoreId",997],")",";",["T_WHITESPACE","\n        ",997],"}",["T_WHITESPACE","\n\n        ",998],["T_VARIABLE","$store",1000],["T_WHITESPACE"," ",1000],"=",["T_WHITESPACE"," ",1000],["T_VARIABLE","$this",1000],["T_OBJECT_OPERATOR","->",1000],["T_STRING","storeManager",1000],["T_OBJECT_OPERATOR","->",1000],["T_STRING","getStore",1000],"(",["T_VARIABLE","$customer",1000],["T_OBJECT_OPERATOR","->",1000],["T_STRING","getStoreId",1000],"(",")",")",";",["T_WHITESPACE","\n\n        ",1000],["T_VARIABLE","$customerEmailData",1002],["T_WHITESPACE"," ",1002],"=",["T_WHITESPACE"," ",1002],["T_VARIABLE","$this",1002],["T_OBJECT_OPERATOR","->",1002],["T_STRING","getFullCustomerObject",1002],"(",["T_VARIABLE","$customer",1002],")",";",["T_WHITESPACE","\n\n        ",1002],["T_VARIABLE","$this",1004],["T_OBJECT_OPERATOR","->",1004],["T_STRING","sendEmailTemplate",1004],"(",["T_WHITESPACE","\n            ",1004],["T_VARIABLE","$customer",1005],",",["T_WHITESPACE","\n            ",1005],["T_VARIABLE","$types",1006],"[",["T_VARIABLE","$type",1006],"]",",",["T_WHITESPACE","\n            ",1006],["T_STRING","self",1007],["T_DOUBLE_COLON","::",1007],["T_STRING","XML_PATH_REGISTER_EMAIL_IDENTITY",1007],",",["T_WHITESPACE","\n            ",1007],"[",["T_CONSTANT_ENCAPSED_STRING","'customer'",1008],["T_WHITESPACE"," ",1008],["T_DOUBLE_ARROW","=>",1008],["T_WHITESPACE"," ",1008],["T_VARIABLE","$customerEmailData",1008],",",["T_WHITESPACE"," ",1008],["T_CONSTANT_ENCAPSED_STRING","'back_url'",1008],["T_WHITESPACE"," ",1008],["T_DOUBLE_ARROW","=>",1008],["T_WHITESPACE"," ",1008],["T_VARIABLE","$backUrl",1008],",",["T_WHITESPACE"," ",1008],["T_CONSTANT_ENCAPSED_STRING","'store'",1008],["T_WHITESPACE"," ",1008],["T_DOUBLE_ARROW","=>",1008],["T_WHITESPACE"," ",1008],["T_VARIABLE","$store",1008],"]",",",["T_WHITESPACE","\n            ",1008],["T_VARIABLE","$storeId",1009],["T_WHITESPACE","\n        ",1009],")",";",["T_WHITESPACE","\n\n        ",1010],["T_RETURN","return",1012],["T_WHITESPACE"," ",1012],["T_VARIABLE","$this",1012],";",["T_WHITESPACE","\n    ",1012],"}",["T_WHITESPACE","\n\n    ",1013],["T_DOC_COMMENT","\/**\n     * Send email to customer when his password is reset\n     *\n     * @param CustomerInterface $customer\n     * @return $this\n     * @deprecated\n     *\/",1015],["T_WHITESPACE","\n    ",1021],["T_PROTECTED","protected",1022],["T_WHITESPACE"," ",1022],["T_FUNCTION","function",1022],["T_WHITESPACE"," ",1022],["T_STRING","sendPasswordResetNotificationEmail",1022],"(",["T_VARIABLE","$customer",1022],")",["T_WHITESPACE","\n    ",1022],"{",["T_WHITESPACE","\n        ",1023],["T_RETURN","return",1024],["T_WHITESPACE"," ",1024],["T_VARIABLE","$this",1024],["T_OBJECT_OPERATOR","->",1024],["T_STRING","sendPasswordResetConfirmationEmail",1024],"(",["T_VARIABLE","$customer",1024],")",";",["T_WHITESPACE","\n    ",1024],"}",["T_WHITESPACE","\n\n    ",1025],["T_DOC_COMMENT","\/**\n     * Get either first store ID from a set website or the provided as default\n     *\n     * @param CustomerInterface $customer\n     * @param int|string|null $defaultStoreId\n     * @return int\n     * @deprecated\n     *\/",1027],["T_WHITESPACE","\n    ",1034],["T_PROTECTED","protected",1035],["T_WHITESPACE"," ",1035],["T_FUNCTION","function",1035],["T_WHITESPACE"," ",1035],["T_STRING","getWebsiteStoreId",1035],"(",["T_VARIABLE","$customer",1035],",",["T_WHITESPACE"," ",1035],["T_VARIABLE","$defaultStoreId",1035],["T_WHITESPACE"," ",1035],"=",["T_WHITESPACE"," ",1035],["T_STRING","null",1035],")",["T_WHITESPACE","\n    ",1035],"{",["T_WHITESPACE","\n        ",1036],["T_IF","if",1037],["T_WHITESPACE"," ",1037],"(",["T_VARIABLE","$customer",1037],["T_OBJECT_OPERATOR","->",1037],["T_STRING","getWebsiteId",1037],"(",")",["T_WHITESPACE"," ",1037],["T_IS_NOT_EQUAL","!=",1037],["T_WHITESPACE"," ",1037],["T_LNUMBER","0",1037],["T_WHITESPACE"," ",1037],["T_BOOLEAN_AND","&&",1037],["T_WHITESPACE"," ",1037],["T_EMPTY","empty",1037],"(",["T_VARIABLE","$defaultStoreId",1037],")",")",["T_WHITESPACE"," ",1037],"{",["T_WHITESPACE","\n            ",1037],["T_VARIABLE","$storeIds",1038],["T_WHITESPACE"," ",1038],"=",["T_WHITESPACE"," ",1038],["T_VARIABLE","$this",1038],["T_OBJECT_OPERATOR","->",1038],["T_STRING","storeManager",1038],["T_OBJECT_OPERATOR","->",1038],["T_STRING","getWebsite",1038],"(",["T_VARIABLE","$customer",1038],["T_OBJECT_OPERATOR","->",1038],["T_STRING","getWebsiteId",1038],"(",")",")",["T_OBJECT_OPERATOR","->",1038],["T_STRING","getStoreIds",1038],"(",")",";",["T_WHITESPACE","\n            ",1038],["T_STRING","reset",1039],"(",["T_VARIABLE","$storeIds",1039],")",";",["T_WHITESPACE","\n            ",1039],["T_VARIABLE","$defaultStoreId",1040],["T_WHITESPACE"," ",1040],"=",["T_WHITESPACE"," ",1040],["T_STRING","current",1040],"(",["T_VARIABLE","$storeIds",1040],")",";",["T_WHITESPACE","\n        ",1040],"}",["T_WHITESPACE","\n        ",1041],["T_RETURN","return",1042],["T_WHITESPACE"," ",1042],["T_VARIABLE","$defaultStoreId",1042],";",["T_WHITESPACE","\n    ",1042],"}",["T_WHITESPACE","\n\n    ",1043],["T_DOC_COMMENT","\/**\n     * @return array\n     * @deprecated\n     *\/",1045],["T_WHITESPACE","\n    ",1048],["T_PROTECTED","protected",1049],["T_WHITESPACE"," ",1049],["T_FUNCTION","function",1049],["T_WHITESPACE"," ",1049],["T_STRING","getTemplateTypes",1049],"(",")",["T_WHITESPACE","\n    ",1049],"{",["T_WHITESPACE","\n        ",1050],["T_DOC_COMMENT","\/**\n         * self::NEW_ACCOUNT_EMAIL_REGISTERED               welcome email, when confirmation is disabled\n         *                                                  and password is set\n         * self::NEW_ACCOUNT_EMAIL_REGISTERED_NO_PASSWORD   welcome email, when confirmation is disabled\n         *                                                  and password is not set\n         * self::NEW_ACCOUNT_EMAIL_CONFIRMED                welcome email, when confirmation is enabled\n         *                                                  and password is set\n         * self::NEW_ACCOUNT_EMAIL_CONFIRMATION             email with confirmation link\n         *\/",1051],["T_WHITESPACE","\n        ",1059],["T_VARIABLE","$types",1060],["T_WHITESPACE"," ",1060],"=",["T_WHITESPACE"," ",1060],"[",["T_WHITESPACE","\n            ",1060],["T_STRING","self",1061],["T_DOUBLE_COLON","::",1061],["T_STRING","NEW_ACCOUNT_EMAIL_REGISTERED",1061],["T_WHITESPACE"," ",1061],["T_DOUBLE_ARROW","=>",1061],["T_WHITESPACE"," ",1061],["T_STRING","self",1061],["T_DOUBLE_COLON","::",1061],["T_STRING","XML_PATH_REGISTER_EMAIL_TEMPLATE",1061],",",["T_WHITESPACE","\n            ",1061],["T_STRING","self",1062],["T_DOUBLE_COLON","::",1062],["T_STRING","NEW_ACCOUNT_EMAIL_REGISTERED_NO_PASSWORD",1062],["T_WHITESPACE"," ",1062],["T_DOUBLE_ARROW","=>",1062],["T_WHITESPACE"," ",1062],["T_STRING","self",1062],["T_DOUBLE_COLON","::",1062],["T_STRING","XML_PATH_REGISTER_NO_PASSWORD_EMAIL_TEMPLATE",1062],",",["T_WHITESPACE","\n            ",1062],["T_STRING","self",1063],["T_DOUBLE_COLON","::",1063],["T_STRING","NEW_ACCOUNT_EMAIL_CONFIRMED",1063],["T_WHITESPACE"," ",1063],["T_DOUBLE_ARROW","=>",1063],["T_WHITESPACE"," ",1063],["T_STRING","self",1063],["T_DOUBLE_COLON","::",1063],["T_STRING","XML_PATH_CONFIRMED_EMAIL_TEMPLATE",1063],",",["T_WHITESPACE","\n            ",1063],["T_STRING","self",1064],["T_DOUBLE_COLON","::",1064],["T_STRING","NEW_ACCOUNT_EMAIL_CONFIRMATION",1064],["T_WHITESPACE"," ",1064],["T_DOUBLE_ARROW","=>",1064],["T_WHITESPACE"," ",1064],["T_STRING","self",1064],["T_DOUBLE_COLON","::",1064],["T_STRING","XML_PATH_CONFIRM_EMAIL_TEMPLATE",1064],",",["T_WHITESPACE","\n        ",1064],"]",";",["T_WHITESPACE","\n        ",1065],["T_RETURN","return",1066],["T_WHITESPACE"," ",1066],["T_VARIABLE","$types",1066],";",["T_WHITESPACE","\n    ",1066],"}",["T_WHITESPACE","\n\n    ",1067],["T_DOC_COMMENT","\/**\n     * Send corresponding email template\n     *\n     * @param CustomerInterface $customer\n     * @param string $template configuration path of email template\n     * @param string $sender configuration path of email identity\n     * @param array $templateParams\n     * @param int|null $storeId\n     * @param string $email\n     * @return $this\n     * @deprecated\n     *\/",1069],["T_WHITESPACE","\n    ",1080],["T_PROTECTED","protected",1081],["T_WHITESPACE"," ",1081],["T_FUNCTION","function",1081],["T_WHITESPACE"," ",1081],["T_STRING","sendEmailTemplate",1081],"(",["T_WHITESPACE","\n        ",1081],["T_VARIABLE","$customer",1082],",",["T_WHITESPACE","\n        ",1082],["T_VARIABLE","$template",1083],",",["T_WHITESPACE","\n        ",1083],["T_VARIABLE","$sender",1084],",",["T_WHITESPACE","\n        ",1084],["T_VARIABLE","$templateParams",1085],["T_WHITESPACE"," ",1085],"=",["T_WHITESPACE"," ",1085],"[","]",",",["T_WHITESPACE","\n        ",1085],["T_VARIABLE","$storeId",1086],["T_WHITESPACE"," ",1086],"=",["T_WHITESPACE"," ",1086],["T_STRING","null",1086],",",["T_WHITESPACE","\n        ",1086],["T_VARIABLE","$email",1087],["T_WHITESPACE"," ",1087],"=",["T_WHITESPACE"," ",1087],["T_STRING","null",1087],["T_WHITESPACE","\n    ",1087],")",["T_WHITESPACE"," ",1088],"{",["T_WHITESPACE","\n        ",1088],["T_VARIABLE","$templateId",1089],["T_WHITESPACE"," ",1089],"=",["T_WHITESPACE"," ",1089],["T_VARIABLE","$this",1089],["T_OBJECT_OPERATOR","->",1089],["T_STRING","scopeConfig",1089],["T_OBJECT_OPERATOR","->",1089],["T_STRING","getValue",1089],"(",["T_VARIABLE","$template",1089],",",["T_WHITESPACE"," ",1089],["T_STRING","ScopeInterface",1089],["T_DOUBLE_COLON","::",1089],["T_STRING","SCOPE_STORE",1089],",",["T_WHITESPACE"," ",1089],["T_VARIABLE","$storeId",1089],")",";",["T_WHITESPACE","\n        ",1089],["T_IF","if",1090],["T_WHITESPACE"," ",1090],"(",["T_VARIABLE","$email",1090],["T_WHITESPACE"," ",1090],["T_IS_IDENTICAL","===",1090],["T_WHITESPACE"," ",1090],["T_STRING","null",1090],")",["T_WHITESPACE"," ",1090],"{",["T_WHITESPACE","\n            ",1090],["T_VARIABLE","$email",1091],["T_WHITESPACE"," ",1091],"=",["T_WHITESPACE"," ",1091],["T_VARIABLE","$customer",1091],["T_OBJECT_OPERATOR","->",1091],["T_STRING","getEmail",1091],"(",")",";",["T_WHITESPACE","\n        ",1091],"}",["T_WHITESPACE","\n\n        ",1092],["T_VARIABLE","$transport",1094],["T_WHITESPACE"," ",1094],"=",["T_WHITESPACE"," ",1094],["T_VARIABLE","$this",1094],["T_OBJECT_OPERATOR","->",1094],["T_STRING","transportBuilder",1094],["T_OBJECT_OPERATOR","->",1094],["T_STRING","setTemplateIdentifier",1094],"(",["T_VARIABLE","$templateId",1094],")",["T_WHITESPACE","\n            ",1094],["T_OBJECT_OPERATOR","->",1095],["T_STRING","setTemplateOptions",1095],"(","[",["T_CONSTANT_ENCAPSED_STRING","'area'",1095],["T_WHITESPACE"," ",1095],["T_DOUBLE_ARROW","=>",1095],["T_WHITESPACE"," ",1095],["T_STRING","Area",1095],["T_DOUBLE_COLON","::",1095],["T_STRING","AREA_FRONTEND",1095],",",["T_WHITESPACE"," ",1095],["T_CONSTANT_ENCAPSED_STRING","'store'",1095],["T_WHITESPACE"," ",1095],["T_DOUBLE_ARROW","=>",1095],["T_WHITESPACE"," ",1095],["T_VARIABLE","$storeId",1095],"]",")",["T_WHITESPACE","\n            ",1095],["T_OBJECT_OPERATOR","->",1096],["T_STRING","setTemplateVars",1096],"(",["T_VARIABLE","$templateParams",1096],")",["T_WHITESPACE","\n            ",1096],["T_OBJECT_OPERATOR","->",1097],["T_STRING","setFrom",1097],"(",["T_VARIABLE","$this",1097],["T_OBJECT_OPERATOR","->",1097],["T_STRING","scopeConfig",1097],["T_OBJECT_OPERATOR","->",1097],["T_STRING","getValue",1097],"(",["T_VARIABLE","$sender",1097],",",["T_WHITESPACE"," ",1097],["T_STRING","ScopeInterface",1097],["T_DOUBLE_COLON","::",1097],["T_STRING","SCOPE_STORE",1097],",",["T_WHITESPACE"," ",1097],["T_VARIABLE","$storeId",1097],")",")",["T_WHITESPACE","\n            ",1097],["T_OBJECT_OPERATOR","->",1098],["T_STRING","addTo",1098],"(",["T_VARIABLE","$email",1098],",",["T_WHITESPACE"," ",1098],["T_VARIABLE","$this",1098],["T_OBJECT_OPERATOR","->",1098],["T_STRING","customerViewHelper",1098],["T_OBJECT_OPERATOR","->",1098],["T_STRING","getCustomerName",1098],"(",["T_VARIABLE","$customer",1098],")",")",["T_WHITESPACE","\n            ",1098],["T_OBJECT_OPERATOR","->",1099],["T_STRING","getTransport",1099],"(",")",";",["T_WHITESPACE","\n\n        ",1099],["T_VARIABLE","$transport",1101],["T_OBJECT_OPERATOR","->",1101],["T_STRING","sendMessage",1101],"(",")",";",["T_WHITESPACE","\n\n        ",1101],["T_RETURN","return",1103],["T_WHITESPACE"," ",1103],["T_VARIABLE","$this",1103],";",["T_WHITESPACE","\n    ",1103],"}",["T_WHITESPACE","\n\n    ",1104],["T_DOC_COMMENT","\/**\n     * Check if accounts confirmation is required in config\n     *\n     * @param CustomerInterface $customer\n     * @return bool\n     *\/",1106],["T_WHITESPACE","\n    ",1111],["T_PROTECTED","protected",1112],["T_WHITESPACE"," ",1112],["T_FUNCTION","function",1112],["T_WHITESPACE"," ",1112],["T_STRING","isConfirmationRequired",1112],"(",["T_VARIABLE","$customer",1112],")",["T_WHITESPACE","\n    ",1112],"{",["T_WHITESPACE","\n        ",1113],["T_IF","if",1114],["T_WHITESPACE"," ",1114],"(",["T_VARIABLE","$this",1114],["T_OBJECT_OPERATOR","->",1114],["T_STRING","canSkipConfirmation",1114],"(",["T_VARIABLE","$customer",1114],")",")",["T_WHITESPACE"," ",1114],"{",["T_WHITESPACE","\n            ",1114],["T_RETURN","return",1115],["T_WHITESPACE"," ",1115],["T_STRING","false",1115],";",["T_WHITESPACE","\n        ",1115],"}",["T_WHITESPACE","\n\n        ",1116],["T_RETURN","return",1118],["T_WHITESPACE"," ",1118],["T_BOOL_CAST","(bool)",1118],["T_VARIABLE","$this",1118],["T_OBJECT_OPERATOR","->",1118],["T_STRING","scopeConfig",1118],["T_OBJECT_OPERATOR","->",1118],["T_STRING","getValue",1118],"(",["T_WHITESPACE","\n            ",1118],["T_STRING","self",1119],["T_DOUBLE_COLON","::",1119],["T_STRING","XML_PATH_IS_CONFIRM",1119],",",["T_WHITESPACE","\n            ",1119],["T_STRING","ScopeInterface",1120],["T_DOUBLE_COLON","::",1120],["T_STRING","SCOPE_WEBSITES",1120],",",["T_WHITESPACE","\n            ",1120],["T_VARIABLE","$customer",1121],["T_OBJECT_OPERATOR","->",1121],["T_STRING","getWebsiteId",1121],"(",")",["T_WHITESPACE","\n        ",1121],")",";",["T_WHITESPACE","\n    ",1122],"}",["T_WHITESPACE","\n\n    ",1123],["T_DOC_COMMENT","\/**\n     * Check whether confirmation may be skipped when registering using certain email address\n     *\n     * @param CustomerInterface $customer\n     * @return bool\n     *\/",1125],["T_WHITESPACE","\n    ",1130],["T_PROTECTED","protected",1131],["T_WHITESPACE"," ",1131],["T_FUNCTION","function",1131],["T_WHITESPACE"," ",1131],["T_STRING","canSkipConfirmation",1131],"(",["T_VARIABLE","$customer",1131],")",["T_WHITESPACE","\n    ",1131],"{",["T_WHITESPACE","\n        ",1132],["T_IF","if",1133],["T_WHITESPACE"," ",1133],"(","!",["T_VARIABLE","$customer",1133],["T_OBJECT_OPERATOR","->",1133],["T_STRING","getId",1133],"(",")",")",["T_WHITESPACE"," ",1133],"{",["T_WHITESPACE","\n            ",1133],["T_RETURN","return",1134],["T_WHITESPACE"," ",1134],["T_STRING","false",1134],";",["T_WHITESPACE","\n        ",1134],"}",["T_WHITESPACE","\n\n        ",1135],["T_COMMENT","\/* If an email was used to start the registration process and it is the same email as the one\n           used to register, then this can skip confirmation.\n           *\/",1137],["T_WHITESPACE","\n        ",1139],["T_VARIABLE","$skipConfirmationIfEmail",1140],["T_WHITESPACE"," ",1140],"=",["T_WHITESPACE"," ",1140],["T_VARIABLE","$this",1140],["T_OBJECT_OPERATOR","->",1140],["T_STRING","registry",1140],["T_OBJECT_OPERATOR","->",1140],["T_STRING","registry",1140],"(",["T_CONSTANT_ENCAPSED_STRING","\"skip_confirmation_if_email\"",1140],")",";",["T_WHITESPACE","\n        ",1140],["T_IF","if",1141],["T_WHITESPACE"," ",1141],"(","!",["T_VARIABLE","$skipConfirmationIfEmail",1141],")",["T_WHITESPACE"," ",1141],"{",["T_WHITESPACE","\n            ",1141],["T_RETURN","return",1142],["T_WHITESPACE"," ",1142],["T_STRING","false",1142],";",["T_WHITESPACE","\n        ",1142],"}",["T_WHITESPACE","\n\n        ",1143],["T_RETURN","return",1145],["T_WHITESPACE"," ",1145],["T_STRING","strtolower",1145],"(",["T_VARIABLE","$skipConfirmationIfEmail",1145],")",["T_WHITESPACE"," ",1145],["T_IS_IDENTICAL","===",1145],["T_WHITESPACE"," ",1145],["T_STRING","strtolower",1145],"(",["T_VARIABLE","$customer",1145],["T_OBJECT_OPERATOR","->",1145],["T_STRING","getEmail",1145],"(",")",")",";",["T_WHITESPACE","\n    ",1145],"}",["T_WHITESPACE","\n\n    ",1146],["T_DOC_COMMENT","\/**\n     * Check if rpToken is expired\n     *\n     * @param string $rpToken\n     * @param string $rpTokenCreatedAt\n     * @return bool\n     *\/",1148],["T_WHITESPACE","\n    ",1154],["T_PUBLIC","public",1155],["T_WHITESPACE"," ",1155],["T_FUNCTION","function",1155],["T_WHITESPACE"," ",1155],["T_STRING","isResetPasswordLinkTokenExpired",1155],"(",["T_VARIABLE","$rpToken",1155],",",["T_WHITESPACE"," ",1155],["T_VARIABLE","$rpTokenCreatedAt",1155],")",["T_WHITESPACE","\n    ",1155],"{",["T_WHITESPACE","\n        ",1156],["T_IF","if",1157],["T_WHITESPACE"," ",1157],"(",["T_EMPTY","empty",1157],"(",["T_VARIABLE","$rpToken",1157],")",["T_WHITESPACE"," ",1157],["T_BOOLEAN_OR","||",1157],["T_WHITESPACE"," ",1157],["T_EMPTY","empty",1157],"(",["T_VARIABLE","$rpTokenCreatedAt",1157],")",")",["T_WHITESPACE"," ",1157],"{",["T_WHITESPACE","\n            ",1157],["T_RETURN","return",1158],["T_WHITESPACE"," ",1158],["T_STRING","true",1158],";",["T_WHITESPACE","\n        ",1158],"}",["T_WHITESPACE","\n\n        ",1159],["T_VARIABLE","$expirationPeriod",1161],["T_WHITESPACE"," ",1161],"=",["T_WHITESPACE"," ",1161],["T_VARIABLE","$this",1161],["T_OBJECT_OPERATOR","->",1161],["T_STRING","customerModel",1161],["T_OBJECT_OPERATOR","->",1161],["T_STRING","getResetPasswordLinkExpirationPeriod",1161],"(",")",";",["T_WHITESPACE","\n\n        ",1161],["T_VARIABLE","$currentTimestamp",1163],["T_WHITESPACE"," ",1163],"=",["T_WHITESPACE"," ",1163],"(",["T_NEW","new",1163],["T_WHITESPACE"," ",1163],["T_NS_SEPARATOR","\\",1163],["T_STRING","DateTime",1163],"(",")",")",["T_OBJECT_OPERATOR","->",1163],["T_STRING","getTimestamp",1163],"(",")",";",["T_WHITESPACE","\n        ",1163],["T_VARIABLE","$tokenTimestamp",1164],["T_WHITESPACE"," ",1164],"=",["T_WHITESPACE"," ",1164],"(",["T_NEW","new",1164],["T_WHITESPACE"," ",1164],["T_NS_SEPARATOR","\\",1164],["T_STRING","DateTime",1164],"(",["T_VARIABLE","$rpTokenCreatedAt",1164],")",")",["T_OBJECT_OPERATOR","->",1164],["T_STRING","getTimestamp",1164],"(",")",";",["T_WHITESPACE","\n        ",1164],["T_IF","if",1165],["T_WHITESPACE"," ",1165],"(",["T_VARIABLE","$tokenTimestamp",1165],["T_WHITESPACE"," ",1165],">",["T_WHITESPACE"," ",1165],["T_VARIABLE","$currentTimestamp",1165],")",["T_WHITESPACE"," ",1165],"{",["T_WHITESPACE","\n            ",1165],["T_RETURN","return",1166],["T_WHITESPACE"," ",1166],["T_STRING","true",1166],";",["T_WHITESPACE","\n        ",1166],"}",["T_WHITESPACE","\n\n        ",1167],["T_VARIABLE","$hourDifference",1169],["T_WHITESPACE"," ",1169],"=",["T_WHITESPACE"," ",1169],["T_STRING","floor",1169],"(","(",["T_VARIABLE","$currentTimestamp",1169],["T_WHITESPACE"," ",1169],"-",["T_WHITESPACE"," ",1169],["T_VARIABLE","$tokenTimestamp",1169],")",["T_WHITESPACE"," ",1169],"\/",["T_WHITESPACE"," ",1169],"(",["T_LNUMBER","60",1169],["T_WHITESPACE"," ",1169],"*",["T_WHITESPACE"," ",1169],["T_LNUMBER","60",1169],")",")",";",["T_WHITESPACE","\n        ",1169],["T_IF","if",1170],["T_WHITESPACE"," ",1170],"(",["T_VARIABLE","$hourDifference",1170],["T_WHITESPACE"," ",1170],["T_IS_GREATER_OR_EQUAL",">=",1170],["T_WHITESPACE"," ",1170],["T_VARIABLE","$expirationPeriod",1170],")",["T_WHITESPACE"," ",1170],"{",["T_WHITESPACE","\n            ",1170],["T_RETURN","return",1171],["T_WHITESPACE"," ",1171],["T_STRING","true",1171],";",["T_WHITESPACE","\n        ",1171],"}",["T_WHITESPACE","\n\n        ",1172],["T_RETURN","return",1174],["T_WHITESPACE"," ",1174],["T_STRING","false",1174],";",["T_WHITESPACE","\n    ",1174],"}",["T_WHITESPACE","\n\n    ",1175],["T_DOC_COMMENT","\/**\n     * Change reset password link token\n     *\n     * Stores new reset password link token\n     *\n     * @param CustomerInterface $customer\n     * @param string $passwordLinkToken\n     * @return bool\n     * @throws InputException\n     *\/",1177],["T_WHITESPACE","\n    ",1186],["T_PUBLIC","public",1187],["T_WHITESPACE"," ",1187],["T_FUNCTION","function",1187],["T_WHITESPACE"," ",1187],["T_STRING","changeResetPasswordLinkToken",1187],"(",["T_VARIABLE","$customer",1187],",",["T_WHITESPACE"," ",1187],["T_VARIABLE","$passwordLinkToken",1187],")",["T_WHITESPACE","\n    ",1187],"{",["T_WHITESPACE","\n        ",1188],["T_IF","if",1189],["T_WHITESPACE"," ",1189],"(","!",["T_STRING","is_string",1189],"(",["T_VARIABLE","$passwordLinkToken",1189],")",["T_WHITESPACE"," ",1189],["T_BOOLEAN_OR","||",1189],["T_WHITESPACE"," ",1189],["T_EMPTY","empty",1189],"(",["T_VARIABLE","$passwordLinkToken",1189],")",")",["T_WHITESPACE"," ",1189],"{",["T_WHITESPACE","\n            ",1189],["T_THROW","throw",1190],["T_WHITESPACE"," ",1190],["T_NEW","new",1190],["T_WHITESPACE"," ",1190],["T_STRING","InputException",1190],"(",["T_WHITESPACE","\n                ",1190],["T_STRING","__",1191],"(",["T_WHITESPACE","\n                    ",1191],["T_CONSTANT_ENCAPSED_STRING","'Invalid value of \"%value\" provided for the %fieldName field.'",1192],",",["T_WHITESPACE","\n                    ",1192],"[",["T_CONSTANT_ENCAPSED_STRING","'value'",1193],["T_WHITESPACE"," ",1193],["T_DOUBLE_ARROW","=>",1193],["T_WHITESPACE"," ",1193],["T_VARIABLE","$passwordLinkToken",1193],",",["T_WHITESPACE"," ",1193],["T_CONSTANT_ENCAPSED_STRING","'fieldName'",1193],["T_WHITESPACE"," ",1193],["T_DOUBLE_ARROW","=>",1193],["T_WHITESPACE"," ",1193],["T_CONSTANT_ENCAPSED_STRING","'password reset token'",1193],"]",["T_WHITESPACE","\n                ",1193],")",["T_WHITESPACE","\n            ",1194],")",";",["T_WHITESPACE","\n        ",1195],"}",["T_WHITESPACE","\n        ",1196],["T_IF","if",1197],["T_WHITESPACE"," ",1197],"(",["T_STRING","is_string",1197],"(",["T_VARIABLE","$passwordLinkToken",1197],")",["T_WHITESPACE"," ",1197],["T_BOOLEAN_AND","&&",1197],["T_WHITESPACE"," ",1197],"!",["T_EMPTY","empty",1197],"(",["T_VARIABLE","$passwordLinkToken",1197],")",")",["T_WHITESPACE"," ",1197],"{",["T_WHITESPACE","\n            ",1197],["T_VARIABLE","$customerSecure",1198],["T_WHITESPACE"," ",1198],"=",["T_WHITESPACE"," ",1198],["T_VARIABLE","$this",1198],["T_OBJECT_OPERATOR","->",1198],["T_STRING","customerRegistry",1198],["T_OBJECT_OPERATOR","->",1198],["T_STRING","retrieveSecureData",1198],"(",["T_VARIABLE","$customer",1198],["T_OBJECT_OPERATOR","->",1198],["T_STRING","getId",1198],"(",")",")",";",["T_WHITESPACE","\n            ",1198],["T_VARIABLE","$customerSecure",1199],["T_OBJECT_OPERATOR","->",1199],["T_STRING","setRpToken",1199],"(",["T_VARIABLE","$passwordLinkToken",1199],")",";",["T_WHITESPACE","\n            ",1199],["T_VARIABLE","$customerSecure",1200],["T_OBJECT_OPERATOR","->",1200],["T_STRING","setRpTokenCreatedAt",1200],"(","(",["T_NEW","new",1200],["T_WHITESPACE"," ",1200],["T_NS_SEPARATOR","\\",1200],["T_STRING","DateTime",1200],"(",")",")",["T_OBJECT_OPERATOR","->",1200],["T_STRING","format",1200],"(",["T_STRING","DateTime",1200],["T_DOUBLE_COLON","::",1200],["T_STRING","DATETIME_PHP_FORMAT",1200],")",")",";",["T_WHITESPACE","\n            ",1200],["T_VARIABLE","$this",1201],["T_OBJECT_OPERATOR","->",1201],["T_STRING","customerRepository",1201],["T_OBJECT_OPERATOR","->",1201],["T_STRING","save",1201],"(",["T_VARIABLE","$customer",1201],")",";",["T_WHITESPACE","\n        ",1201],"}",["T_WHITESPACE","\n        ",1202],["T_RETURN","return",1203],["T_WHITESPACE"," ",1203],["T_STRING","true",1203],";",["T_WHITESPACE","\n    ",1203],"}",["T_WHITESPACE","\n\n    ",1204],["T_DOC_COMMENT","\/**\n     * Send email with new customer password\n     *\n     * @param CustomerInterface $customer\n     * @return $this\n     * @deprecated\n     *\/",1206],["T_WHITESPACE","\n    ",1212],["T_PUBLIC","public",1213],["T_WHITESPACE"," ",1213],["T_FUNCTION","function",1213],["T_WHITESPACE"," ",1213],["T_STRING","sendPasswordReminderEmail",1213],"(",["T_VARIABLE","$customer",1213],")",["T_WHITESPACE","\n    ",1213],"{",["T_WHITESPACE","\n        ",1214],["T_VARIABLE","$storeId",1215],["T_WHITESPACE"," ",1215],"=",["T_WHITESPACE"," ",1215],["T_VARIABLE","$this",1215],["T_OBJECT_OPERATOR","->",1215],["T_STRING","storeManager",1215],["T_OBJECT_OPERATOR","->",1215],["T_STRING","getStore",1215],"(",")",["T_OBJECT_OPERATOR","->",1215],["T_STRING","getId",1215],"(",")",";",["T_WHITESPACE","\n        ",1215],["T_IF","if",1216],["T_WHITESPACE"," ",1216],"(","!",["T_VARIABLE","$storeId",1216],")",["T_WHITESPACE"," ",1216],"{",["T_WHITESPACE","\n            ",1216],["T_VARIABLE","$storeId",1217],["T_WHITESPACE"," ",1217],"=",["T_WHITESPACE"," ",1217],["T_VARIABLE","$this",1217],["T_OBJECT_OPERATOR","->",1217],["T_STRING","getWebsiteStoreId",1217],"(",["T_VARIABLE","$customer",1217],")",";",["T_WHITESPACE","\n        ",1217],"}",["T_WHITESPACE","\n\n        ",1218],["T_VARIABLE","$customerEmailData",1220],["T_WHITESPACE"," ",1220],"=",["T_WHITESPACE"," ",1220],["T_VARIABLE","$this",1220],["T_OBJECT_OPERATOR","->",1220],["T_STRING","getFullCustomerObject",1220],"(",["T_VARIABLE","$customer",1220],")",";",["T_WHITESPACE","\n\n        ",1220],["T_VARIABLE","$this",1222],["T_OBJECT_OPERATOR","->",1222],["T_STRING","sendEmailTemplate",1222],"(",["T_WHITESPACE","\n            ",1222],["T_VARIABLE","$customer",1223],",",["T_WHITESPACE","\n            ",1223],["T_STRING","self",1224],["T_DOUBLE_COLON","::",1224],["T_STRING","XML_PATH_REMIND_EMAIL_TEMPLATE",1224],",",["T_WHITESPACE","\n            ",1224],["T_STRING","self",1225],["T_DOUBLE_COLON","::",1225],["T_STRING","XML_PATH_FORGOT_EMAIL_IDENTITY",1225],",",["T_WHITESPACE","\n            ",1225],"[",["T_CONSTANT_ENCAPSED_STRING","'customer'",1226],["T_WHITESPACE"," ",1226],["T_DOUBLE_ARROW","=>",1226],["T_WHITESPACE"," ",1226],["T_VARIABLE","$customerEmailData",1226],",",["T_WHITESPACE"," ",1226],["T_CONSTANT_ENCAPSED_STRING","'store'",1226],["T_WHITESPACE"," ",1226],["T_DOUBLE_ARROW","=>",1226],["T_WHITESPACE"," ",1226],["T_VARIABLE","$this",1226],["T_OBJECT_OPERATOR","->",1226],["T_STRING","storeManager",1226],["T_OBJECT_OPERATOR","->",1226],["T_STRING","getStore",1226],"(",["T_VARIABLE","$storeId",1226],")","]",",",["T_WHITESPACE","\n            ",1226],["T_VARIABLE","$storeId",1227],["T_WHITESPACE","\n        ",1227],")",";",["T_WHITESPACE","\n\n        ",1228],["T_RETURN","return",1230],["T_WHITESPACE"," ",1230],["T_VARIABLE","$this",1230],";",["T_WHITESPACE","\n    ",1230],"}",["T_WHITESPACE","\n\n    ",1231],["T_DOC_COMMENT","\/**\n     * Send email with reset password confirmation link\n     *\n     * @param CustomerInterface $customer\n     * @return $this\n     * @deprecated\n     *\/",1233],["T_WHITESPACE","\n    ",1239],["T_PUBLIC","public",1240],["T_WHITESPACE"," ",1240],["T_FUNCTION","function",1240],["T_WHITESPACE"," ",1240],["T_STRING","sendPasswordResetConfirmationEmail",1240],"(",["T_VARIABLE","$customer",1240],")",["T_WHITESPACE","\n    ",1240],"{",["T_WHITESPACE","\n        ",1241],["T_VARIABLE","$storeId",1242],["T_WHITESPACE"," ",1242],"=",["T_WHITESPACE"," ",1242],["T_VARIABLE","$this",1242],["T_OBJECT_OPERATOR","->",1242],["T_STRING","storeManager",1242],["T_OBJECT_OPERATOR","->",1242],["T_STRING","getStore",1242],"(",")",["T_OBJECT_OPERATOR","->",1242],["T_STRING","getId",1242],"(",")",";",["T_WHITESPACE","\n        ",1242],["T_IF","if",1243],["T_WHITESPACE"," ",1243],"(","!",["T_VARIABLE","$storeId",1243],")",["T_WHITESPACE"," ",1243],"{",["T_WHITESPACE","\n            ",1243],["T_VARIABLE","$storeId",1244],["T_WHITESPACE"," ",1244],"=",["T_WHITESPACE"," ",1244],["T_VARIABLE","$this",1244],["T_OBJECT_OPERATOR","->",1244],["T_STRING","getWebsiteStoreId",1244],"(",["T_VARIABLE","$customer",1244],")",";",["T_WHITESPACE","\n        ",1244],"}",["T_WHITESPACE","\n\n        ",1245],["T_VARIABLE","$customerEmailData",1247],["T_WHITESPACE"," ",1247],"=",["T_WHITESPACE"," ",1247],["T_VARIABLE","$this",1247],["T_OBJECT_OPERATOR","->",1247],["T_STRING","getFullCustomerObject",1247],"(",["T_VARIABLE","$customer",1247],")",";",["T_WHITESPACE","\n\n        ",1247],["T_VARIABLE","$this",1249],["T_OBJECT_OPERATOR","->",1249],["T_STRING","sendEmailTemplate",1249],"(",["T_WHITESPACE","\n            ",1249],["T_VARIABLE","$customer",1250],",",["T_WHITESPACE","\n            ",1250],["T_STRING","self",1251],["T_DOUBLE_COLON","::",1251],["T_STRING","XML_PATH_FORGOT_EMAIL_TEMPLATE",1251],",",["T_WHITESPACE","\n            ",1251],["T_STRING","self",1252],["T_DOUBLE_COLON","::",1252],["T_STRING","XML_PATH_FORGOT_EMAIL_IDENTITY",1252],",",["T_WHITESPACE","\n            ",1252],"[",["T_CONSTANT_ENCAPSED_STRING","'customer'",1253],["T_WHITESPACE"," ",1253],["T_DOUBLE_ARROW","=>",1253],["T_WHITESPACE"," ",1253],["T_VARIABLE","$customerEmailData",1253],",",["T_WHITESPACE"," ",1253],["T_CONSTANT_ENCAPSED_STRING","'store'",1253],["T_WHITESPACE"," ",1253],["T_DOUBLE_ARROW","=>",1253],["T_WHITESPACE"," ",1253],["T_VARIABLE","$this",1253],["T_OBJECT_OPERATOR","->",1253],["T_STRING","storeManager",1253],["T_OBJECT_OPERATOR","->",1253],["T_STRING","getStore",1253],"(",["T_VARIABLE","$storeId",1253],")","]",",",["T_WHITESPACE","\n            ",1253],["T_VARIABLE","$storeId",1254],["T_WHITESPACE","\n        ",1254],")",";",["T_WHITESPACE","\n\n        ",1255],["T_RETURN","return",1257],["T_WHITESPACE"," ",1257],["T_VARIABLE","$this",1257],";",["T_WHITESPACE","\n    ",1257],"}",["T_WHITESPACE","\n\n    ",1258],["T_DOC_COMMENT","\/**\n     * Get address by id\n     *\n     * @param CustomerInterface $customer\n     * @param int $addressId\n     * @return AddressInterface|null\n     *\/",1260],["T_WHITESPACE","\n    ",1266],["T_PROTECTED","protected",1267],["T_WHITESPACE"," ",1267],["T_FUNCTION","function",1267],["T_WHITESPACE"," ",1267],["T_STRING","getAddressById",1267],"(",["T_STRING","CustomerInterface",1267],["T_WHITESPACE"," ",1267],["T_VARIABLE","$customer",1267],",",["T_WHITESPACE"," ",1267],["T_VARIABLE","$addressId",1267],")",["T_WHITESPACE","\n    ",1267],"{",["T_WHITESPACE","\n        ",1268],["T_FOREACH","foreach",1269],["T_WHITESPACE"," ",1269],"(",["T_VARIABLE","$customer",1269],["T_OBJECT_OPERATOR","->",1269],["T_STRING","getAddresses",1269],"(",")",["T_WHITESPACE"," ",1269],["T_AS","as",1269],["T_WHITESPACE"," ",1269],["T_VARIABLE","$address",1269],")",["T_WHITESPACE"," ",1269],"{",["T_WHITESPACE","\n            ",1269],["T_IF","if",1270],["T_WHITESPACE"," ",1270],"(",["T_VARIABLE","$address",1270],["T_OBJECT_OPERATOR","->",1270],["T_STRING","getId",1270],"(",")",["T_WHITESPACE"," ",1270],["T_IS_EQUAL","==",1270],["T_WHITESPACE"," ",1270],["T_VARIABLE","$addressId",1270],")",["T_WHITESPACE"," ",1270],"{",["T_WHITESPACE","\n                ",1270],["T_RETURN","return",1271],["T_WHITESPACE"," ",1271],["T_VARIABLE","$address",1271],";",["T_WHITESPACE","\n            ",1271],"}",["T_WHITESPACE","\n        ",1272],"}",["T_WHITESPACE","\n        ",1273],["T_RETURN","return",1274],["T_WHITESPACE"," ",1274],["T_STRING","null",1274],";",["T_WHITESPACE","\n    ",1274],"}",["T_WHITESPACE","\n\n    ",1275],["T_DOC_COMMENT","\/**\n     * Create an object with data merged from Customer and CustomerSecure\n     *\n     * @param CustomerInterface $customer\n     * @return Data\\CustomerSecure\n     * @deprecated\n     *\/",1277],["T_WHITESPACE","\n    ",1283],["T_PROTECTED","protected",1284],["T_WHITESPACE"," ",1284],["T_FUNCTION","function",1284],["T_WHITESPACE"," ",1284],["T_STRING","getFullCustomerObject",1284],"(",["T_VARIABLE","$customer",1284],")",["T_WHITESPACE","\n    ",1284],"{",["T_WHITESPACE","\n        ",1285],["T_COMMENT","\/\/ No need to flatten the custom attributes or nested objects since the only usage is for email templates and\n",1286],["T_WHITESPACE","        ",1287],["T_COMMENT","\/\/ object passed for events\n",1287],["T_WHITESPACE","        ",1288],["T_VARIABLE","$mergedCustomerData",1288],["T_WHITESPACE"," ",1288],"=",["T_WHITESPACE"," ",1288],["T_VARIABLE","$this",1288],["T_OBJECT_OPERATOR","->",1288],["T_STRING","customerRegistry",1288],["T_OBJECT_OPERATOR","->",1288],["T_STRING","retrieveSecureData",1288],"(",["T_VARIABLE","$customer",1288],["T_OBJECT_OPERATOR","->",1288],["T_STRING","getId",1288],"(",")",")",";",["T_WHITESPACE","\n        ",1288],["T_VARIABLE","$customerData",1289],["T_WHITESPACE"," ",1289],"=",["T_WHITESPACE"," ",1289],["T_VARIABLE","$this",1289],["T_OBJECT_OPERATOR","->",1289],["T_STRING","dataProcessor",1289],["T_WHITESPACE","\n            ",1289],["T_OBJECT_OPERATOR","->",1290],["T_STRING","buildOutputDataArray",1290],"(",["T_VARIABLE","$customer",1290],",",["T_WHITESPACE"," ",1290],["T_NS_SEPARATOR","\\",1290],["T_STRING","Magento",1290],["T_NS_SEPARATOR","\\",1290],["T_STRING","Customer",1290],["T_NS_SEPARATOR","\\",1290],["T_STRING","Api",1290],["T_NS_SEPARATOR","\\",1290],["T_STRING","Data",1290],["T_NS_SEPARATOR","\\",1290],["T_STRING","CustomerInterface",1290],["T_DOUBLE_COLON","::",1290],["T_CLASS","class",1290],")",";",["T_WHITESPACE","\n        ",1290],["T_VARIABLE","$mergedCustomerData",1291],["T_OBJECT_OPERATOR","->",1291],["T_STRING","addData",1291],"(",["T_VARIABLE","$customerData",1291],")",";",["T_WHITESPACE","\n        ",1291],["T_VARIABLE","$mergedCustomerData",1292],["T_OBJECT_OPERATOR","->",1292],["T_STRING","setData",1292],"(",["T_CONSTANT_ENCAPSED_STRING","'name'",1292],",",["T_WHITESPACE"," ",1292],["T_VARIABLE","$this",1292],["T_OBJECT_OPERATOR","->",1292],["T_STRING","customerViewHelper",1292],["T_OBJECT_OPERATOR","->",1292],["T_STRING","getCustomerName",1292],"(",["T_VARIABLE","$customer",1292],")",")",";",["T_WHITESPACE","\n        ",1292],["T_RETURN","return",1293],["T_WHITESPACE"," ",1293],["T_VARIABLE","$mergedCustomerData",1293],";",["T_WHITESPACE","\n    ",1293],"}",["T_WHITESPACE","\n\n    ",1294],["T_DOC_COMMENT","\/**\n     * Return hashed password, which can be directly saved to database.\n     *\n     * @param string $password\n     * @return string\n     *\/",1296],["T_WHITESPACE","\n    ",1301],["T_PUBLIC","public",1302],["T_WHITESPACE"," ",1302],["T_FUNCTION","function",1302],["T_WHITESPACE"," ",1302],["T_STRING","getPasswordHash",1302],"(",["T_VARIABLE","$password",1302],")",["T_WHITESPACE","\n    ",1302],"{",["T_WHITESPACE","\n        ",1303],["T_RETURN","return",1304],["T_WHITESPACE"," ",1304],["T_VARIABLE","$this",1304],["T_OBJECT_OPERATOR","->",1304],["T_STRING","encryptor",1304],["T_OBJECT_OPERATOR","->",1304],["T_STRING","getHash",1304],"(",["T_VARIABLE","$password",1304],")",";",["T_WHITESPACE","\n    ",1304],"}",["T_WHITESPACE","\n\n    ",1305],["T_DOC_COMMENT","\/**\n     * Get email notification\n     *\n     * @return EmailNotificationInterface\n     * @deprecated\n     *\/",1307],["T_WHITESPACE","\n    ",1312],["T_PRIVATE","private",1313],["T_WHITESPACE"," ",1313],["T_FUNCTION","function",1313],["T_WHITESPACE"," ",1313],["T_STRING","getEmailNotification",1313],"(",")",["T_WHITESPACE","\n    ",1313],"{",["T_WHITESPACE","\n        ",1314],["T_IF","if",1315],["T_WHITESPACE"," ",1315],"(","!","(",["T_VARIABLE","$this",1315],["T_OBJECT_OPERATOR","->",1315],["T_STRING","emailNotification",1315],["T_WHITESPACE"," ",1315],["T_INSTANCEOF","instanceof",1315],["T_WHITESPACE"," ",1315],["T_STRING","EmailNotificationInterface",1315],")",")",["T_WHITESPACE"," ",1315],"{",["T_WHITESPACE","\n            ",1315],["T_RETURN","return",1316],["T_WHITESPACE"," ",1316],["T_NS_SEPARATOR","\\",1316],["T_STRING","Magento",1316],["T_NS_SEPARATOR","\\",1316],["T_STRING","Framework",1316],["T_NS_SEPARATOR","\\",1316],["T_STRING","App",1316],["T_NS_SEPARATOR","\\",1316],["T_STRING","ObjectManager",1316],["T_DOUBLE_COLON","::",1316],["T_STRING","getInstance",1316],"(",")",["T_OBJECT_OPERATOR","->",1316],["T_STRING","get",1316],"(",["T_WHITESPACE","\n                ",1316],["T_STRING","EmailNotificationInterface",1317],["T_DOUBLE_COLON","::",1317],["T_CLASS","class",1317],["T_WHITESPACE","\n            ",1317],")",";",["T_WHITESPACE","\n        ",1318],"}",["T_WHITESPACE"," ",1319],["T_ELSE","else",1319],["T_WHITESPACE"," ",1319],"{",["T_WHITESPACE","\n            ",1319],["T_RETURN","return",1320],["T_WHITESPACE"," ",1320],["T_VARIABLE","$this",1320],["T_OBJECT_OPERATOR","->",1320],["T_STRING","emailNotification",1320],";",["T_WHITESPACE","\n        ",1320],"}",["T_WHITESPACE","\n    ",1321],"}",["T_WHITESPACE","\n",1322],"}",["T_WHITESPACE","\n",1323]]
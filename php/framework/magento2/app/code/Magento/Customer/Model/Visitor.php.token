[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Copyright \u00c2\u00a9 2013-2017 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n *\/",2],["T_WHITESPACE","\n\n",5],["T_NAMESPACE","namespace",7],["T_WHITESPACE"," ",7],["T_STRING","Magento",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Customer",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Model",7],";",["T_WHITESPACE","\n\n",7],["T_USE","use",9],["T_WHITESPACE"," ",9],["T_STRING","Magento",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Framework",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Indexer",9],["T_NS_SEPARATOR","\\",9],["T_STRING","StateInterface",9],";",["T_WHITESPACE","\n\n",9],["T_DOC_COMMENT","\/**\n * Class Visitor\n * @package Magento\\Customer\\Model\n * @SuppressWarnings(PHPMD.CouplingBetweenObjects)\n *\/",11],["T_WHITESPACE","\n",15],["T_CLASS","class",16],["T_WHITESPACE"," ",16],["T_STRING","Visitor",16],["T_WHITESPACE"," ",16],["T_EXTENDS","extends",16],["T_WHITESPACE"," ",16],["T_NS_SEPARATOR","\\",16],["T_STRING","Magento",16],["T_NS_SEPARATOR","\\",16],["T_STRING","Framework",16],["T_NS_SEPARATOR","\\",16],["T_STRING","Model",16],["T_NS_SEPARATOR","\\",16],["T_STRING","AbstractModel",16],["T_WHITESPACE","\n",16],"{",["T_WHITESPACE","\n    ",17],["T_CONST","const",18],["T_WHITESPACE"," ",18],["T_STRING","VISITOR_TYPE_CUSTOMER",18],["T_WHITESPACE"," ",18],"=",["T_WHITESPACE"," ",18],["T_CONSTANT_ENCAPSED_STRING","'c'",18],";",["T_WHITESPACE","\n\n    ",18],["T_CONST","const",20],["T_WHITESPACE"," ",20],["T_STRING","VISITOR_TYPE_VISITOR",20],["T_WHITESPACE"," ",20],"=",["T_WHITESPACE"," ",20],["T_CONSTANT_ENCAPSED_STRING","'v'",20],";",["T_WHITESPACE","\n\n    ",20],["T_CONST","const",22],["T_WHITESPACE"," ",22],["T_STRING","DEFAULT_ONLINE_MINUTES_INTERVAL",22],["T_WHITESPACE"," ",22],"=",["T_WHITESPACE"," ",22],["T_LNUMBER","15",22],";",["T_WHITESPACE","\n\n    ",22],["T_CONST","const",24],["T_WHITESPACE"," ",24],["T_STRING","XML_PATH_ONLINE_INTERVAL",24],["T_WHITESPACE"," ",24],"=",["T_WHITESPACE"," ",24],["T_CONSTANT_ENCAPSED_STRING","'customer\/online_customers\/online_minutes_interval'",24],";",["T_WHITESPACE","\n\n    ",24],["T_DOC_COMMENT","\/**\n     * @var string[]\n     *\/",26],["T_WHITESPACE","\n    ",28],["T_PROTECTED","protected",29],["T_WHITESPACE"," ",29],["T_VARIABLE","$ignoredUserAgents",29],";",["T_WHITESPACE","\n\n    ",29],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Framework\\Session\\SessionManagerInterface\n     *\/",31],["T_WHITESPACE","\n    ",33],["T_PROTECTED","protected",34],["T_WHITESPACE"," ",34],["T_VARIABLE","$session",34],";",["T_WHITESPACE","\n\n    ",34],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Framework\\HTTP\\Header\n     *\/",36],["T_WHITESPACE","\n    ",38],["T_PROTECTED","protected",39],["T_WHITESPACE"," ",39],["T_VARIABLE","$httpHeader",39],";",["T_WHITESPACE","\n\n    ",39],["T_DOC_COMMENT","\/**\n     * @var bool\n     *\/",41],["T_WHITESPACE","\n    ",43],["T_PROTECTED","protected",44],["T_WHITESPACE"," ",44],["T_VARIABLE","$skipRequestLogging",44],["T_WHITESPACE"," ",44],"=",["T_WHITESPACE"," ",44],["T_STRING","false",44],";",["T_WHITESPACE","\n\n    ",44],["T_DOC_COMMENT","\/**\n     * Ignored Modules\n     *\n     * @var array\n     *\/",46],["T_WHITESPACE","\n    ",50],["T_PROTECTED","protected",51],["T_WHITESPACE"," ",51],["T_VARIABLE","$ignores",51],";",["T_WHITESPACE","\n\n    ",51],["T_DOC_COMMENT","\/**\n     * Core store config\n     *\n     * @var \\Magento\\Framework\\App\\Config\\ScopeConfigInterface\n     *\/",53],["T_WHITESPACE","\n    ",57],["T_PROTECTED","protected",58],["T_WHITESPACE"," ",58],["T_VARIABLE","$scopeConfig",58],";",["T_WHITESPACE","\n\n    ",58],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Framework\\Stdlib\\DateTime\n     *\/",60],["T_WHITESPACE","\n    ",62],["T_PROTECTED","protected",63],["T_WHITESPACE"," ",63],["T_VARIABLE","$dateTime",63],";",["T_WHITESPACE","\n\n    ",63],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Framework\\Indexer\\IndexerRegistry\n     *\/",65],["T_WHITESPACE","\n    ",67],["T_PROTECTED","protected",68],["T_WHITESPACE"," ",68],["T_VARIABLE","$indexerRegistry",68],";",["T_WHITESPACE","\n\n    ",68],["T_DOC_COMMENT","\/**\n     * @param \\Magento\\Framework\\Model\\Context $context\n     * @param \\Magento\\Framework\\Registry $registry\n     * @param \\Magento\\Framework\\Session\\SessionManagerInterface $session\n     * @param \\Magento\\Framework\\HTTP\\Header $httpHeader\n     * @param \\Magento\\Framework\\App\\Config\\ScopeConfigInterface $scopeConfig\n     * @param \\Magento\\Framework\\Stdlib\\DateTime $dateTime\n     * @param \\Magento\\Framework\\Indexer\\IndexerRegistry $indexerRegistry\n     * @param \\Magento\\Framework\\Model\\ResourceModel\\AbstractResource|null $resource\n     * @param \\Magento\\Framework\\Data\\Collection\\AbstractDb|null $resourceCollection\n     * @param array $ignoredUserAgents\n     * @param array $ignores\n     * @param array $data\n     *\n     * @SuppressWarnings(PHPMD.ExcessiveParameterList)\n     *\/",70],["T_WHITESPACE","\n    ",85],["T_PUBLIC","public",86],["T_WHITESPACE"," ",86],["T_FUNCTION","function",86],["T_WHITESPACE"," ",86],["T_STRING","__construct",86],"(",["T_WHITESPACE","\n        ",86],["T_NS_SEPARATOR","\\",87],["T_STRING","Magento",87],["T_NS_SEPARATOR","\\",87],["T_STRING","Framework",87],["T_NS_SEPARATOR","\\",87],["T_STRING","Model",87],["T_NS_SEPARATOR","\\",87],["T_STRING","Context",87],["T_WHITESPACE"," ",87],["T_VARIABLE","$context",87],",",["T_WHITESPACE","\n        ",87],["T_NS_SEPARATOR","\\",88],["T_STRING","Magento",88],["T_NS_SEPARATOR","\\",88],["T_STRING","Framework",88],["T_NS_SEPARATOR","\\",88],["T_STRING","Registry",88],["T_WHITESPACE"," ",88],["T_VARIABLE","$registry",88],",",["T_WHITESPACE","\n        ",88],["T_NS_SEPARATOR","\\",89],["T_STRING","Magento",89],["T_NS_SEPARATOR","\\",89],["T_STRING","Framework",89],["T_NS_SEPARATOR","\\",89],["T_STRING","Session",89],["T_NS_SEPARATOR","\\",89],["T_STRING","SessionManagerInterface",89],["T_WHITESPACE"," ",89],["T_VARIABLE","$session",89],",",["T_WHITESPACE","\n        ",89],["T_NS_SEPARATOR","\\",90],["T_STRING","Magento",90],["T_NS_SEPARATOR","\\",90],["T_STRING","Framework",90],["T_NS_SEPARATOR","\\",90],["T_STRING","HTTP",90],["T_NS_SEPARATOR","\\",90],["T_STRING","Header",90],["T_WHITESPACE"," ",90],["T_VARIABLE","$httpHeader",90],",",["T_WHITESPACE","\n        ",90],["T_NS_SEPARATOR","\\",91],["T_STRING","Magento",91],["T_NS_SEPARATOR","\\",91],["T_STRING","Framework",91],["T_NS_SEPARATOR","\\",91],["T_STRING","App",91],["T_NS_SEPARATOR","\\",91],["T_STRING","Config",91],["T_NS_SEPARATOR","\\",91],["T_STRING","ScopeConfigInterface",91],["T_WHITESPACE"," ",91],["T_VARIABLE","$scopeConfig",91],",",["T_WHITESPACE","\n        ",91],["T_NS_SEPARATOR","\\",92],["T_STRING","Magento",92],["T_NS_SEPARATOR","\\",92],["T_STRING","Framework",92],["T_NS_SEPARATOR","\\",92],["T_STRING","Stdlib",92],["T_NS_SEPARATOR","\\",92],["T_STRING","DateTime",92],["T_WHITESPACE"," ",92],["T_VARIABLE","$dateTime",92],",",["T_WHITESPACE","\n        ",92],["T_NS_SEPARATOR","\\",93],["T_STRING","Magento",93],["T_NS_SEPARATOR","\\",93],["T_STRING","Framework",93],["T_NS_SEPARATOR","\\",93],["T_STRING","Indexer",93],["T_NS_SEPARATOR","\\",93],["T_STRING","IndexerRegistry",93],["T_WHITESPACE"," ",93],["T_VARIABLE","$indexerRegistry",93],",",["T_WHITESPACE","\n        ",93],["T_NS_SEPARATOR","\\",94],["T_STRING","Magento",94],["T_NS_SEPARATOR","\\",94],["T_STRING","Framework",94],["T_NS_SEPARATOR","\\",94],["T_STRING","Model",94],["T_NS_SEPARATOR","\\",94],["T_STRING","ResourceModel",94],["T_NS_SEPARATOR","\\",94],["T_STRING","AbstractResource",94],["T_WHITESPACE"," ",94],["T_VARIABLE","$resource",94],["T_WHITESPACE"," ",94],"=",["T_WHITESPACE"," ",94],["T_STRING","null",94],",",["T_WHITESPACE","\n        ",94],["T_NS_SEPARATOR","\\",95],["T_STRING","Magento",95],["T_NS_SEPARATOR","\\",95],["T_STRING","Framework",95],["T_NS_SEPARATOR","\\",95],["T_STRING","Data",95],["T_NS_SEPARATOR","\\",95],["T_STRING","Collection",95],["T_NS_SEPARATOR","\\",95],["T_STRING","AbstractDb",95],["T_WHITESPACE"," ",95],["T_VARIABLE","$resourceCollection",95],["T_WHITESPACE"," ",95],"=",["T_WHITESPACE"," ",95],["T_STRING","null",95],",",["T_WHITESPACE","\n        ",95],["T_ARRAY","array",96],["T_WHITESPACE"," ",96],["T_VARIABLE","$ignoredUserAgents",96],["T_WHITESPACE"," ",96],"=",["T_WHITESPACE"," ",96],"[","]",",",["T_WHITESPACE","\n        ",96],["T_ARRAY","array",97],["T_WHITESPACE"," ",97],["T_VARIABLE","$ignores",97],["T_WHITESPACE"," ",97],"=",["T_WHITESPACE"," ",97],"[","]",",",["T_WHITESPACE","\n        ",97],["T_ARRAY","array",98],["T_WHITESPACE"," ",98],["T_VARIABLE","$data",98],["T_WHITESPACE"," ",98],"=",["T_WHITESPACE"," ",98],"[","]",["T_WHITESPACE","\n    ",98],")",["T_WHITESPACE"," ",99],"{",["T_WHITESPACE","\n        ",99],["T_VARIABLE","$this",100],["T_OBJECT_OPERATOR","->",100],["T_STRING","session",100],["T_WHITESPACE"," ",100],"=",["T_WHITESPACE"," ",100],["T_VARIABLE","$session",100],";",["T_WHITESPACE","\n        ",100],["T_VARIABLE","$this",101],["T_OBJECT_OPERATOR","->",101],["T_STRING","httpHeader",101],["T_WHITESPACE"," ",101],"=",["T_WHITESPACE"," ",101],["T_VARIABLE","$httpHeader",101],";",["T_WHITESPACE","\n        ",101],["T_VARIABLE","$this",102],["T_OBJECT_OPERATOR","->",102],["T_STRING","ignoredUserAgents",102],["T_WHITESPACE"," ",102],"=",["T_WHITESPACE"," ",102],["T_VARIABLE","$ignoredUserAgents",102],";",["T_WHITESPACE","\n        ",102],["T_STRING","parent",103],["T_DOUBLE_COLON","::",103],["T_STRING","__construct",103],"(",["T_VARIABLE","$context",103],",",["T_WHITESPACE"," ",103],["T_VARIABLE","$registry",103],",",["T_WHITESPACE"," ",103],["T_VARIABLE","$resource",103],",",["T_WHITESPACE"," ",103],["T_VARIABLE","$resourceCollection",103],",",["T_WHITESPACE"," ",103],["T_VARIABLE","$data",103],")",";",["T_WHITESPACE","\n        ",103],["T_VARIABLE","$this",104],["T_OBJECT_OPERATOR","->",104],["T_STRING","ignores",104],["T_WHITESPACE"," ",104],"=",["T_WHITESPACE"," ",104],["T_VARIABLE","$ignores",104],";",["T_WHITESPACE","\n        ",104],["T_VARIABLE","$this",105],["T_OBJECT_OPERATOR","->",105],["T_STRING","scopeConfig",105],["T_WHITESPACE"," ",105],"=",["T_WHITESPACE"," ",105],["T_VARIABLE","$scopeConfig",105],";",["T_WHITESPACE","\n        ",105],["T_VARIABLE","$this",106],["T_OBJECT_OPERATOR","->",106],["T_STRING","dateTime",106],["T_WHITESPACE"," ",106],"=",["T_WHITESPACE"," ",106],["T_VARIABLE","$dateTime",106],";",["T_WHITESPACE","\n        ",106],["T_VARIABLE","$this",107],["T_OBJECT_OPERATOR","->",107],["T_STRING","indexerRegistry",107],["T_WHITESPACE"," ",107],"=",["T_WHITESPACE"," ",107],["T_VARIABLE","$indexerRegistry",107],";",["T_WHITESPACE","\n    ",107],"}",["T_WHITESPACE","\n\n    ",108],["T_DOC_COMMENT","\/**\n     * Object initialization\n     *\n     * @return void\n     *\/",110],["T_WHITESPACE","\n    ",114],["T_PROTECTED","protected",115],["T_WHITESPACE"," ",115],["T_FUNCTION","function",115],["T_WHITESPACE"," ",115],["T_STRING","_construct",115],"(",")",["T_WHITESPACE","\n    ",115],"{",["T_WHITESPACE","\n        ",116],["T_VARIABLE","$this",117],["T_OBJECT_OPERATOR","->",117],["T_STRING","_init",117],"(",["T_NS_SEPARATOR","\\",117],["T_STRING","Magento",117],["T_NS_SEPARATOR","\\",117],["T_STRING","Customer",117],["T_NS_SEPARATOR","\\",117],["T_STRING","Model",117],["T_NS_SEPARATOR","\\",117],["T_STRING","ResourceModel",117],["T_NS_SEPARATOR","\\",117],["T_STRING","Visitor",117],["T_DOUBLE_COLON","::",117],["T_CLASS","class",117],")",";",["T_WHITESPACE","\n        ",117],["T_VARIABLE","$userAgent",118],["T_WHITESPACE"," ",118],"=",["T_WHITESPACE"," ",118],["T_VARIABLE","$this",118],["T_OBJECT_OPERATOR","->",118],["T_STRING","httpHeader",118],["T_OBJECT_OPERATOR","->",118],["T_STRING","getHttpUserAgent",118],"(",")",";",["T_WHITESPACE","\n        ",118],["T_IF","if",119],["T_WHITESPACE"," ",119],"(",["T_VARIABLE","$this",119],["T_OBJECT_OPERATOR","->",119],["T_STRING","ignoredUserAgents",119],")",["T_WHITESPACE"," ",119],"{",["T_WHITESPACE","\n            ",119],["T_IF","if",120],["T_WHITESPACE"," ",120],"(",["T_STRING","in_array",120],"(",["T_VARIABLE","$userAgent",120],",",["T_WHITESPACE"," ",120],["T_VARIABLE","$this",120],["T_OBJECT_OPERATOR","->",120],["T_STRING","ignoredUserAgents",120],")",")",["T_WHITESPACE"," ",120],"{",["T_WHITESPACE","\n                ",120],["T_VARIABLE","$this",121],["T_OBJECT_OPERATOR","->",121],["T_STRING","skipRequestLogging",121],["T_WHITESPACE"," ",121],"=",["T_WHITESPACE"," ",121],["T_STRING","true",121],";",["T_WHITESPACE","\n            ",121],"}",["T_WHITESPACE","\n        ",122],"}",["T_WHITESPACE","\n    ",123],"}",["T_WHITESPACE","\n\n    ",124],["T_DOC_COMMENT","\/**\n     * Skip request logging\n     *\n     * @param bool $skipRequestLogging\n     * @return \\Magento\\Customer\\Model\\Visitor\n     *\/",126],["T_WHITESPACE","\n    ",131],["T_PUBLIC","public",132],["T_WHITESPACE"," ",132],["T_FUNCTION","function",132],["T_WHITESPACE"," ",132],["T_STRING","setSkipRequestLogging",132],"(",["T_VARIABLE","$skipRequestLogging",132],")",["T_WHITESPACE","\n    ",132],"{",["T_WHITESPACE","\n        ",133],["T_VARIABLE","$this",134],["T_OBJECT_OPERATOR","->",134],["T_STRING","skipRequestLogging",134],["T_WHITESPACE"," ",134],"=",["T_WHITESPACE"," ",134],["T_BOOL_CAST","(bool)",134],["T_VARIABLE","$skipRequestLogging",134],";",["T_WHITESPACE","\n        ",134],["T_RETURN","return",135],["T_WHITESPACE"," ",135],["T_VARIABLE","$this",135],";",["T_WHITESPACE","\n    ",135],"}",["T_WHITESPACE","\n\n    ",136],["T_DOC_COMMENT","\/**\n     * Initialization visitor by request\n     *\n     * Used in event \"controller_action_predispatch\"\n     *\n     * @param   \\Magento\\Framework\\Event\\Observer $observer\n     * @return  \\Magento\\Customer\\Model\\Visitor\n     *\/",138],["T_WHITESPACE","\n    ",145],["T_PUBLIC","public",146],["T_WHITESPACE"," ",146],["T_FUNCTION","function",146],["T_WHITESPACE"," ",146],["T_STRING","initByRequest",146],"(",["T_VARIABLE","$observer",146],")",["T_WHITESPACE","\n    ",146],"{",["T_WHITESPACE","\n        ",147],["T_IF","if",148],["T_WHITESPACE"," ",148],"(",["T_VARIABLE","$this",148],["T_OBJECT_OPERATOR","->",148],["T_STRING","skipRequestLogging",148],["T_WHITESPACE"," ",148],["T_BOOLEAN_OR","||",148],["T_WHITESPACE"," ",148],["T_VARIABLE","$this",148],["T_OBJECT_OPERATOR","->",148],["T_STRING","isModuleIgnored",148],"(",["T_VARIABLE","$observer",148],")",")",["T_WHITESPACE"," ",148],"{",["T_WHITESPACE","\n            ",148],["T_RETURN","return",149],["T_WHITESPACE"," ",149],["T_VARIABLE","$this",149],";",["T_WHITESPACE","\n        ",149],"}",["T_WHITESPACE","\n\n        ",150],["T_IF","if",152],["T_WHITESPACE"," ",152],"(",["T_VARIABLE","$this",152],["T_OBJECT_OPERATOR","->",152],["T_STRING","session",152],["T_OBJECT_OPERATOR","->",152],["T_STRING","getVisitorData",152],"(",")",")",["T_WHITESPACE"," ",152],"{",["T_WHITESPACE","\n            ",152],["T_VARIABLE","$this",153],["T_OBJECT_OPERATOR","->",153],["T_STRING","setData",153],"(",["T_VARIABLE","$this",153],["T_OBJECT_OPERATOR","->",153],["T_STRING","session",153],["T_OBJECT_OPERATOR","->",153],["T_STRING","getVisitorData",153],"(",")",")",";",["T_WHITESPACE","\n        ",153],"}",["T_WHITESPACE","\n\n        ",154],["T_VARIABLE","$this",156],["T_OBJECT_OPERATOR","->",156],["T_STRING","setLastVisitAt",156],"(","(",["T_NEW","new",156],["T_WHITESPACE"," ",156],["T_NS_SEPARATOR","\\",156],["T_STRING","DateTime",156],"(",")",")",["T_OBJECT_OPERATOR","->",156],["T_STRING","format",156],"(",["T_NS_SEPARATOR","\\",156],["T_STRING","Magento",156],["T_NS_SEPARATOR","\\",156],["T_STRING","Framework",156],["T_NS_SEPARATOR","\\",156],["T_STRING","Stdlib",156],["T_NS_SEPARATOR","\\",156],["T_STRING","DateTime",156],["T_DOUBLE_COLON","::",156],["T_STRING","DATETIME_PHP_FORMAT",156],")",")",";",["T_WHITESPACE","\n\n        ",156],["T_IF","if",158],["T_WHITESPACE"," ",158],"(","!",["T_VARIABLE","$this",158],["T_OBJECT_OPERATOR","->",158],["T_STRING","getId",158],"(",")",")",["T_WHITESPACE"," ",158],"{",["T_WHITESPACE","\n            ",158],["T_VARIABLE","$this",159],["T_OBJECT_OPERATOR","->",159],["T_STRING","setSessionId",159],"(",["T_VARIABLE","$this",159],["T_OBJECT_OPERATOR","->",159],["T_STRING","session",159],["T_OBJECT_OPERATOR","->",159],["T_STRING","getSessionId",159],"(",")",")",";",["T_WHITESPACE","\n            ",159],["T_VARIABLE","$this",160],["T_OBJECT_OPERATOR","->",160],["T_STRING","save",160],"(",")",";",["T_WHITESPACE","\n            ",160],["T_VARIABLE","$this",161],["T_OBJECT_OPERATOR","->",161],["T_STRING","_eventManager",161],["T_OBJECT_OPERATOR","->",161],["T_STRING","dispatch",161],"(",["T_CONSTANT_ENCAPSED_STRING","'visitor_init'",161],",",["T_WHITESPACE"," ",161],"[",["T_CONSTANT_ENCAPSED_STRING","'visitor'",161],["T_WHITESPACE"," ",161],["T_DOUBLE_ARROW","=>",161],["T_WHITESPACE"," ",161],["T_VARIABLE","$this",161],"]",")",";",["T_WHITESPACE","\n            ",161],["T_VARIABLE","$this",162],["T_OBJECT_OPERATOR","->",162],["T_STRING","session",162],["T_OBJECT_OPERATOR","->",162],["T_STRING","setVisitorData",162],"(",["T_VARIABLE","$this",162],["T_OBJECT_OPERATOR","->",162],["T_STRING","getData",162],"(",")",")",";",["T_WHITESPACE","\n        ",162],"}",["T_WHITESPACE","\n        ",163],["T_RETURN","return",164],["T_WHITESPACE"," ",164],["T_VARIABLE","$this",164],";",["T_WHITESPACE","\n    ",164],"}",["T_WHITESPACE","\n\n    ",165],["T_DOC_COMMENT","\/**\n     * Save visitor by request\n     *\n     * Used in event \"controller_action_postdispatch\"\n     *\n     * @param   \\Magento\\Framework\\Event\\Observer $observer\n     * @return  \\Magento\\Customer\\Model\\Visitor\n     *\/",167],["T_WHITESPACE","\n    ",174],["T_PUBLIC","public",175],["T_WHITESPACE"," ",175],["T_FUNCTION","function",175],["T_WHITESPACE"," ",175],["T_STRING","saveByRequest",175],"(",["T_VARIABLE","$observer",175],")",["T_WHITESPACE","\n    ",175],"{",["T_WHITESPACE","\n        ",176],["T_IF","if",177],["T_WHITESPACE"," ",177],"(",["T_VARIABLE","$this",177],["T_OBJECT_OPERATOR","->",177],["T_STRING","skipRequestLogging",177],["T_WHITESPACE"," ",177],["T_BOOLEAN_OR","||",177],["T_WHITESPACE"," ",177],["T_VARIABLE","$this",177],["T_OBJECT_OPERATOR","->",177],["T_STRING","isModuleIgnored",177],"(",["T_VARIABLE","$observer",177],")",")",["T_WHITESPACE"," ",177],"{",["T_WHITESPACE","\n            ",177],["T_RETURN","return",178],["T_WHITESPACE"," ",178],["T_VARIABLE","$this",178],";",["T_WHITESPACE","\n        ",178],"}",["T_WHITESPACE","\n\n        ",179],["T_TRY","try",181],["T_WHITESPACE"," ",181],"{",["T_WHITESPACE","\n            ",181],["T_VARIABLE","$this",182],["T_OBJECT_OPERATOR","->",182],["T_STRING","save",182],"(",")",";",["T_WHITESPACE","\n            ",182],["T_VARIABLE","$this",183],["T_OBJECT_OPERATOR","->",183],["T_STRING","_eventManager",183],["T_OBJECT_OPERATOR","->",183],["T_STRING","dispatch",183],"(",["T_CONSTANT_ENCAPSED_STRING","'visitor_activity_save'",183],",",["T_WHITESPACE"," ",183],"[",["T_CONSTANT_ENCAPSED_STRING","'visitor'",183],["T_WHITESPACE"," ",183],["T_DOUBLE_ARROW","=>",183],["T_WHITESPACE"," ",183],["T_VARIABLE","$this",183],"]",")",";",["T_WHITESPACE","\n            ",183],["T_VARIABLE","$this",184],["T_OBJECT_OPERATOR","->",184],["T_STRING","session",184],["T_OBJECT_OPERATOR","->",184],["T_STRING","setVisitorData",184],"(",["T_VARIABLE","$this",184],["T_OBJECT_OPERATOR","->",184],["T_STRING","getData",184],"(",")",")",";",["T_WHITESPACE","\n        ",184],"}",["T_WHITESPACE"," ",185],["T_CATCH","catch",185],["T_WHITESPACE"," ",185],"(",["T_NS_SEPARATOR","\\",185],["T_STRING","Exception",185],["T_WHITESPACE"," ",185],["T_VARIABLE","$e",185],")",["T_WHITESPACE"," ",185],"{",["T_WHITESPACE","\n            ",185],["T_VARIABLE","$this",186],["T_OBJECT_OPERATOR","->",186],["T_STRING","_logger",186],["T_OBJECT_OPERATOR","->",186],["T_STRING","critical",186],"(",["T_VARIABLE","$e",186],")",";",["T_WHITESPACE","\n        ",186],"}",["T_WHITESPACE","\n        ",187],["T_RETURN","return",188],["T_WHITESPACE"," ",188],["T_VARIABLE","$this",188],";",["T_WHITESPACE","\n    ",188],"}",["T_WHITESPACE","\n\n    ",189],["T_DOC_COMMENT","\/**\n     * Returns true if the module is required\n     *\n     * @param \\Magento\\Framework\\Event\\Observer $observer\n     * @return bool\n     *\/",191],["T_WHITESPACE","\n    ",196],["T_PUBLIC","public",197],["T_WHITESPACE"," ",197],["T_FUNCTION","function",197],["T_WHITESPACE"," ",197],["T_STRING","isModuleIgnored",197],"(",["T_VARIABLE","$observer",197],")",["T_WHITESPACE","\n    ",197],"{",["T_WHITESPACE","\n        ",198],["T_IF","if",199],["T_WHITESPACE"," ",199],"(",["T_STRING","is_array",199],"(",["T_VARIABLE","$this",199],["T_OBJECT_OPERATOR","->",199],["T_STRING","ignores",199],")",["T_WHITESPACE"," ",199],["T_BOOLEAN_AND","&&",199],["T_WHITESPACE"," ",199],["T_VARIABLE","$observer",199],")",["T_WHITESPACE"," ",199],"{",["T_WHITESPACE","\n            ",199],["T_VARIABLE","$curModule",200],["T_WHITESPACE"," ",200],"=",["T_WHITESPACE"," ",200],["T_VARIABLE","$observer",200],["T_OBJECT_OPERATOR","->",200],["T_STRING","getEvent",200],"(",")",["T_OBJECT_OPERATOR","->",200],["T_STRING","getControllerAction",200],"(",")",["T_OBJECT_OPERATOR","->",200],["T_STRING","getRequest",200],"(",")",["T_OBJECT_OPERATOR","->",200],["T_STRING","getRouteName",200],"(",")",";",["T_WHITESPACE","\n            ",200],["T_IF","if",201],["T_WHITESPACE"," ",201],"(",["T_ISSET","isset",201],"(",["T_VARIABLE","$this",201],["T_OBJECT_OPERATOR","->",201],["T_STRING","ignores",201],"[",["T_VARIABLE","$curModule",201],"]",")",")",["T_WHITESPACE"," ",201],"{",["T_WHITESPACE","\n                ",201],["T_RETURN","return",202],["T_WHITESPACE"," ",202],["T_STRING","true",202],";",["T_WHITESPACE","\n            ",202],"}",["T_WHITESPACE","\n        ",203],"}",["T_WHITESPACE","\n        ",204],["T_RETURN","return",205],["T_WHITESPACE"," ",205],["T_STRING","false",205],";",["T_WHITESPACE","\n    ",205],"}",["T_WHITESPACE","\n\n    ",206],["T_DOC_COMMENT","\/**\n     * Bind customer data when customer login\n     *\n     * Used in event \"customer_login\"\n     *\n     * @param   \\Magento\\Framework\\Event\\Observer $observer\n     * @return  \\Magento\\Customer\\Model\\Visitor\n     *\/",208],["T_WHITESPACE","\n    ",215],["T_PUBLIC","public",216],["T_WHITESPACE"," ",216],["T_FUNCTION","function",216],["T_WHITESPACE"," ",216],["T_STRING","bindCustomerLogin",216],"(",["T_VARIABLE","$observer",216],")",["T_WHITESPACE","\n    ",216],"{",["T_WHITESPACE","\n        ",217],["T_DOC_COMMENT","\/** @var \\Magento\\Customer\\Api\\Data\\CustomerInterface $customer *\/",218],["T_WHITESPACE","\n        ",218],["T_VARIABLE","$customer",219],["T_WHITESPACE"," ",219],"=",["T_WHITESPACE"," ",219],["T_VARIABLE","$observer",219],["T_OBJECT_OPERATOR","->",219],["T_STRING","getEvent",219],"(",")",["T_OBJECT_OPERATOR","->",219],["T_STRING","getCustomer",219],"(",")",";",["T_WHITESPACE","\n        ",219],["T_IF","if",220],["T_WHITESPACE"," ",220],"(","!",["T_VARIABLE","$this",220],["T_OBJECT_OPERATOR","->",220],["T_STRING","getCustomerId",220],"(",")",")",["T_WHITESPACE"," ",220],"{",["T_WHITESPACE","\n            ",220],["T_VARIABLE","$this",221],["T_OBJECT_OPERATOR","->",221],["T_STRING","setDoCustomerLogin",221],"(",["T_STRING","true",221],")",";",["T_WHITESPACE","\n            ",221],["T_VARIABLE","$this",222],["T_OBJECT_OPERATOR","->",222],["T_STRING","setCustomerId",222],"(",["T_VARIABLE","$customer",222],["T_OBJECT_OPERATOR","->",222],["T_STRING","getId",222],"(",")",")",";",["T_WHITESPACE","\n        ",222],"}",["T_WHITESPACE","\n        ",223],["T_RETURN","return",224],["T_WHITESPACE"," ",224],["T_VARIABLE","$this",224],";",["T_WHITESPACE","\n    ",224],"}",["T_WHITESPACE","\n\n    ",225],["T_DOC_COMMENT","\/**\n     * Bind customer data when customer logout\n     *\n     * Used in event \"customer_logout\"\n     *\n     * @param   \\Magento\\Framework\\Event\\Observer $observer\n     * @return  \\Magento\\Customer\\Model\\Visitor\n     * @SuppressWarnings(PHPMD.UnusedFormalParameter)\n     *\/",227],["T_WHITESPACE","\n    ",235],["T_PUBLIC","public",236],["T_WHITESPACE"," ",236],["T_FUNCTION","function",236],["T_WHITESPACE"," ",236],["T_STRING","bindCustomerLogout",236],"(",["T_VARIABLE","$observer",236],")",["T_WHITESPACE","\n    ",236],"{",["T_WHITESPACE","\n        ",237],["T_IF","if",238],["T_WHITESPACE"," ",238],"(",["T_VARIABLE","$this",238],["T_OBJECT_OPERATOR","->",238],["T_STRING","getCustomerId",238],"(",")",")",["T_WHITESPACE"," ",238],"{",["T_WHITESPACE","\n            ",238],["T_VARIABLE","$this",239],["T_OBJECT_OPERATOR","->",239],["T_STRING","setDoCustomerLogout",239],"(",["T_STRING","true",239],")",";",["T_WHITESPACE","\n        ",239],"}",["T_WHITESPACE","\n        ",240],["T_RETURN","return",241],["T_WHITESPACE"," ",241],["T_VARIABLE","$this",241],";",["T_WHITESPACE","\n    ",241],"}",["T_WHITESPACE","\n\n    ",242],["T_DOC_COMMENT","\/**\n     * Create binding of checkout quote\n     *\n     * @param \\Magento\\Framework\\Event\\Observer $observer\n     * @return  \\Magento\\Customer\\Model\\Visitor\n     *\/",244],["T_WHITESPACE","\n    ",249],["T_PUBLIC","public",250],["T_WHITESPACE"," ",250],["T_FUNCTION","function",250],["T_WHITESPACE"," ",250],["T_STRING","bindQuoteCreate",250],"(",["T_VARIABLE","$observer",250],")",["T_WHITESPACE","\n    ",250],"{",["T_WHITESPACE","\n        ",251],["T_VARIABLE","$quote",252],["T_WHITESPACE"," ",252],"=",["T_WHITESPACE"," ",252],["T_VARIABLE","$observer",252],["T_OBJECT_OPERATOR","->",252],["T_STRING","getEvent",252],"(",")",["T_OBJECT_OPERATOR","->",252],["T_STRING","getQuote",252],"(",")",";",["T_WHITESPACE","\n        ",252],["T_IF","if",253],["T_WHITESPACE"," ",253],"(",["T_VARIABLE","$quote",253],")",["T_WHITESPACE"," ",253],"{",["T_WHITESPACE","\n            ",253],["T_IF","if",254],["T_WHITESPACE"," ",254],"(",["T_VARIABLE","$quote",254],["T_OBJECT_OPERATOR","->",254],["T_STRING","getIsCheckoutCart",254],"(",")",")",["T_WHITESPACE"," ",254],"{",["T_WHITESPACE","\n                ",254],["T_VARIABLE","$this",255],["T_OBJECT_OPERATOR","->",255],["T_STRING","setQuoteId",255],"(",["T_VARIABLE","$quote",255],["T_OBJECT_OPERATOR","->",255],["T_STRING","getId",255],"(",")",")",";",["T_WHITESPACE","\n                ",255],["T_VARIABLE","$this",256],["T_OBJECT_OPERATOR","->",256],["T_STRING","setDoQuoteCreate",256],"(",["T_STRING","true",256],")",";",["T_WHITESPACE","\n            ",256],"}",["T_WHITESPACE","\n        ",257],"}",["T_WHITESPACE","\n        ",258],["T_RETURN","return",259],["T_WHITESPACE"," ",259],["T_VARIABLE","$this",259],";",["T_WHITESPACE","\n    ",259],"}",["T_WHITESPACE","\n\n    ",260],["T_DOC_COMMENT","\/**\n     * Destroy binding of checkout quote\n     * @param \\Magento\\Framework\\Event\\Observer $observer\n     * @return  \\Magento\\Customer\\Model\\Visitor\n     *\/",262],["T_WHITESPACE","\n    ",266],["T_PUBLIC","public",267],["T_WHITESPACE"," ",267],["T_FUNCTION","function",267],["T_WHITESPACE"," ",267],["T_STRING","bindQuoteDestroy",267],"(",["T_VARIABLE","$observer",267],")",["T_WHITESPACE","\n    ",267],"{",["T_WHITESPACE","\n        ",268],["T_VARIABLE","$quote",269],["T_WHITESPACE"," ",269],"=",["T_WHITESPACE"," ",269],["T_VARIABLE","$observer",269],["T_OBJECT_OPERATOR","->",269],["T_STRING","getEvent",269],"(",")",["T_OBJECT_OPERATOR","->",269],["T_STRING","getQuote",269],"(",")",";",["T_WHITESPACE","\n        ",269],["T_IF","if",270],["T_WHITESPACE"," ",270],"(",["T_VARIABLE","$quote",270],")",["T_WHITESPACE"," ",270],"{",["T_WHITESPACE","\n            ",270],["T_VARIABLE","$this",271],["T_OBJECT_OPERATOR","->",271],["T_STRING","setDoQuoteDestroy",271],"(",["T_STRING","true",271],")",";",["T_WHITESPACE","\n        ",271],"}",["T_WHITESPACE","\n        ",272],["T_RETURN","return",273],["T_WHITESPACE"," ",273],["T_VARIABLE","$this",273],";",["T_WHITESPACE","\n    ",273],"}",["T_WHITESPACE","\n\n    ",274],["T_DOC_COMMENT","\/**\n     * Return clean time in seconds for visitor's outdated records\n     *\n     * @return string\n     *\/",276],["T_WHITESPACE","\n    ",280],["T_PUBLIC","public",281],["T_WHITESPACE"," ",281],["T_FUNCTION","function",281],["T_WHITESPACE"," ",281],["T_STRING","getCleanTime",281],"(",")",["T_WHITESPACE","\n    ",281],"{",["T_WHITESPACE","\n        ",282],["T_RETURN","return",283],["T_WHITESPACE"," ",283],["T_VARIABLE","$this",283],["T_OBJECT_OPERATOR","->",283],["T_STRING","scopeConfig",283],["T_OBJECT_OPERATOR","->",283],["T_STRING","getValue",283],"(",["T_WHITESPACE","\n            ",283],["T_NS_SEPARATOR","\\",284],["T_STRING","Magento",284],["T_NS_SEPARATOR","\\",284],["T_STRING","Framework",284],["T_NS_SEPARATOR","\\",284],["T_STRING","Session",284],["T_NS_SEPARATOR","\\",284],["T_STRING","Config",284],["T_DOUBLE_COLON","::",284],["T_STRING","XML_PATH_COOKIE_LIFETIME",284],",",["T_WHITESPACE","\n            ",284],["T_NS_SEPARATOR","\\",285],["T_STRING","Magento",285],["T_NS_SEPARATOR","\\",285],["T_STRING","Store",285],["T_NS_SEPARATOR","\\",285],["T_STRING","Model",285],["T_NS_SEPARATOR","\\",285],["T_STRING","ScopeInterface",285],["T_DOUBLE_COLON","::",285],["T_STRING","SCOPE_STORE",285],["T_WHITESPACE","\n        ",285],")",["T_WHITESPACE"," ",286],"+",["T_WHITESPACE"," ",286],["T_LNUMBER","86400",286],";",["T_WHITESPACE","\n    ",286],"}",["T_WHITESPACE","\n\n    ",287],["T_DOC_COMMENT","\/**\n     * Clean visitor's outdated records\n     *\n     * @return $this\n     *\/",289],["T_WHITESPACE","\n    ",293],["T_PUBLIC","public",294],["T_WHITESPACE"," ",294],["T_FUNCTION","function",294],["T_WHITESPACE"," ",294],["T_STRING","clean",294],"(",")",["T_WHITESPACE","\n    ",294],"{",["T_WHITESPACE","\n        ",295],["T_VARIABLE","$this",296],["T_OBJECT_OPERATOR","->",296],["T_STRING","getResource",296],"(",")",["T_OBJECT_OPERATOR","->",296],["T_STRING","clean",296],"(",["T_VARIABLE","$this",296],")",";",["T_WHITESPACE","\n        ",296],["T_RETURN","return",297],["T_WHITESPACE"," ",297],["T_VARIABLE","$this",297],";",["T_WHITESPACE","\n    ",297],"}",["T_WHITESPACE","\n\n    ",298],["T_DOC_COMMENT","\/**\n     * Retrieve Online Interval (in minutes)\n     *\n     * @return int Minutes Interval\n     *\/",300],["T_WHITESPACE","\n    ",304],["T_PUBLIC","public",305],["T_WHITESPACE"," ",305],["T_FUNCTION","function",305],["T_WHITESPACE"," ",305],["T_STRING","getOnlineInterval",305],"(",")",["T_WHITESPACE","\n    ",305],"{",["T_WHITESPACE","\n        ",306],["T_VARIABLE","$configValue",307],["T_WHITESPACE"," ",307],"=",["T_WHITESPACE"," ",307],["T_STRING","intval",307],"(",["T_WHITESPACE","\n            ",307],["T_VARIABLE","$this",308],["T_OBJECT_OPERATOR","->",308],["T_STRING","scopeConfig",308],["T_OBJECT_OPERATOR","->",308],["T_STRING","getValue",308],"(",["T_WHITESPACE","\n                ",308],["T_STATIC","static",309],["T_DOUBLE_COLON","::",309],["T_STRING","XML_PATH_ONLINE_INTERVAL",309],",",["T_WHITESPACE","\n                ",309],["T_NS_SEPARATOR","\\",310],["T_STRING","Magento",310],["T_NS_SEPARATOR","\\",310],["T_STRING","Store",310],["T_NS_SEPARATOR","\\",310],["T_STRING","Model",310],["T_NS_SEPARATOR","\\",310],["T_STRING","ScopeInterface",310],["T_DOUBLE_COLON","::",310],["T_STRING","SCOPE_STORE",310],["T_WHITESPACE","\n            ",310],")",["T_WHITESPACE","\n        ",311],")",";",["T_WHITESPACE","\n        ",312],["T_RETURN","return",313],["T_WHITESPACE"," ",313],["T_VARIABLE","$configValue",313],["T_WHITESPACE"," ",313],"?",":",["T_WHITESPACE"," ",313],["T_STATIC","static",313],["T_DOUBLE_COLON","::",313],["T_STRING","DEFAULT_ONLINE_MINUTES_INTERVAL",313],";",["T_WHITESPACE","\n    ",313],"}",["T_WHITESPACE","\n",314],"}",["T_WHITESPACE","\n",315]]
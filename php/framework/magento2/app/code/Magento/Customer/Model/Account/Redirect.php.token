[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Copyright \u00c2\u00a9 2013-2017 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n *\/",2],["T_WHITESPACE","\n",5],["T_NAMESPACE","namespace",6],["T_WHITESPACE"," ",6],["T_STRING","Magento",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Customer",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Model",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Account",6],";",["T_WHITESPACE","\n\n",6],["T_USE","use",8],["T_WHITESPACE"," ",8],["T_STRING","Magento",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Customer",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Model",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Session",8],";",["T_WHITESPACE","\n",8],["T_USE","use",9],["T_WHITESPACE"," ",9],["T_STRING","Magento",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Customer",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Model",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Url",9],["T_WHITESPACE"," ",9],["T_AS","as",9],["T_WHITESPACE"," ",9],["T_STRING","CustomerUrl",9],";",["T_WHITESPACE","\n",9],["T_USE","use",10],["T_WHITESPACE"," ",10],["T_STRING","Magento",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Framework",10],["T_NS_SEPARATOR","\\",10],["T_STRING","App",10],["T_NS_SEPARATOR","\\",10],["T_STRING","RequestInterface",10],";",["T_WHITESPACE","\n",10],["T_USE","use",11],["T_WHITESPACE"," ",11],["T_STRING","Magento",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Framework",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Controller",11],["T_NS_SEPARATOR","\\",11],["T_STRING","ResultFactory",11],";",["T_WHITESPACE","\n",11],["T_USE","use",12],["T_WHITESPACE"," ",12],["T_STRING","Magento",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Framework",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Url",12],["T_NS_SEPARATOR","\\",12],["T_STRING","HostChecker",12],";",["T_WHITESPACE","\n",12],["T_USE","use",13],["T_WHITESPACE"," ",13],["T_STRING","Magento",13],["T_NS_SEPARATOR","\\",13],["T_STRING","Framework",13],["T_NS_SEPARATOR","\\",13],["T_STRING","UrlInterface",13],";",["T_WHITESPACE","\n",13],["T_USE","use",14],["T_WHITESPACE"," ",14],["T_STRING","Magento",14],["T_NS_SEPARATOR","\\",14],["T_STRING","Store",14],["T_NS_SEPARATOR","\\",14],["T_STRING","Model",14],["T_NS_SEPARATOR","\\",14],["T_STRING","ScopeInterface",14],";",["T_WHITESPACE","\n",14],["T_USE","use",15],["T_WHITESPACE"," ",15],["T_STRING","Magento",15],["T_NS_SEPARATOR","\\",15],["T_STRING","Store",15],["T_NS_SEPARATOR","\\",15],["T_STRING","Model",15],["T_NS_SEPARATOR","\\",15],["T_STRING","StoreManagerInterface",15],";",["T_WHITESPACE","\n",15],["T_USE","use",16],["T_WHITESPACE"," ",16],["T_STRING","Magento",16],["T_NS_SEPARATOR","\\",16],["T_STRING","Framework",16],["T_NS_SEPARATOR","\\",16],["T_STRING","App",16],["T_NS_SEPARATOR","\\",16],["T_STRING","Config",16],["T_NS_SEPARATOR","\\",16],["T_STRING","ScopeConfigInterface",16],";",["T_WHITESPACE","\n",16],["T_USE","use",17],["T_WHITESPACE"," ",17],["T_STRING","Magento",17],["T_NS_SEPARATOR","\\",17],["T_STRING","Framework",17],["T_NS_SEPARATOR","\\",17],["T_STRING","Controller",17],["T_NS_SEPARATOR","\\",17],["T_STRING","Result",17],["T_NS_SEPARATOR","\\",17],["T_STRING","Redirect",17],["T_WHITESPACE"," ",17],["T_AS","as",17],["T_WHITESPACE"," ",17],["T_STRING","ResultRedirect",17],";",["T_WHITESPACE","\n",17],["T_USE","use",18],["T_WHITESPACE"," ",18],["T_STRING","Magento",18],["T_NS_SEPARATOR","\\",18],["T_STRING","Framework",18],["T_NS_SEPARATOR","\\",18],["T_STRING","Controller",18],["T_NS_SEPARATOR","\\",18],["T_STRING","Result",18],["T_NS_SEPARATOR","\\",18],["T_STRING","Forward",18],["T_WHITESPACE"," ",18],["T_AS","as",18],["T_WHITESPACE"," ",18],["T_STRING","ResultForward",18],";",["T_WHITESPACE","\n",18],["T_USE","use",19],["T_WHITESPACE"," ",19],["T_STRING","Magento",19],["T_NS_SEPARATOR","\\",19],["T_STRING","Framework",19],["T_NS_SEPARATOR","\\",19],["T_STRING","Url",19],["T_NS_SEPARATOR","\\",19],["T_STRING","DecoderInterface",19],";",["T_WHITESPACE","\n",19],["T_USE","use",20],["T_WHITESPACE"," ",20],["T_STRING","Magento",20],["T_NS_SEPARATOR","\\",20],["T_STRING","Framework",20],["T_NS_SEPARATOR","\\",20],["T_STRING","App",20],["T_NS_SEPARATOR","\\",20],["T_STRING","ObjectManager",20],";",["T_WHITESPACE","\n",20],["T_USE","use",21],["T_WHITESPACE"," ",21],["T_STRING","Magento",21],["T_NS_SEPARATOR","\\",21],["T_STRING","Framework",21],["T_NS_SEPARATOR","\\",21],["T_STRING","Stdlib",21],["T_NS_SEPARATOR","\\",21],["T_STRING","CookieManagerInterface",21],";",["T_WHITESPACE","\n\n",21],["T_DOC_COMMENT","\/**\n * @SuppressWarnings(PHPMD.CouplingBetweenObjects)\n *\/",23],["T_WHITESPACE","\n",25],["T_CLASS","class",26],["T_WHITESPACE"," ",26],["T_STRING","Redirect",26],["T_WHITESPACE","\n",26],"{",["T_WHITESPACE","\n    ",27],["T_DOC_COMMENT","\/** URL to redirect user on successful login or registration *\/",28],["T_WHITESPACE","\n    ",28],["T_CONST","const",29],["T_WHITESPACE"," ",29],["T_STRING","LOGIN_REDIRECT_URL",29],["T_WHITESPACE"," ",29],"=",["T_WHITESPACE"," ",29],["T_CONSTANT_ENCAPSED_STRING","'login_redirect'",29],";",["T_WHITESPACE","\n\n    ",29],["T_DOC_COMMENT","\/**\n     * @var RequestInterface\n     *\/",31],["T_WHITESPACE","\n    ",33],["T_PROTECTED","protected",34],["T_WHITESPACE"," ",34],["T_VARIABLE","$request",34],";",["T_WHITESPACE","\n\n    ",34],["T_DOC_COMMENT","\/**\n     * @var ScopeConfigInterface\n     *\/",36],["T_WHITESPACE","\n    ",38],["T_PROTECTED","protected",39],["T_WHITESPACE"," ",39],["T_VARIABLE","$scopeConfig",39],";",["T_WHITESPACE","\n\n    ",39],["T_DOC_COMMENT","\/**\n     * @var StoreManagerInterface\n     *\/",41],["T_WHITESPACE","\n    ",43],["T_PROTECTED","protected",44],["T_WHITESPACE"," ",44],["T_VARIABLE","$storeManager",44],";",["T_WHITESPACE","\n\n    ",44],["T_DOC_COMMENT","\/**\n     * @var DecoderInterface\n     *\/",46],["T_WHITESPACE","\n    ",48],["T_PROTECTED","protected",49],["T_WHITESPACE"," ",49],["T_VARIABLE","$urlDecoder",49],";",["T_WHITESPACE","\n\n    ",49],["T_DOC_COMMENT","\/**\n     * @var CustomerUrl\n     *\/",51],["T_WHITESPACE","\n    ",53],["T_PROTECTED","protected",54],["T_WHITESPACE"," ",54],["T_VARIABLE","$customerUrl",54],";",["T_WHITESPACE","\n\n    ",54],["T_DOC_COMMENT","\/**\n     * @deprecated\n     * @var UrlInterface\n     *\/",56],["T_WHITESPACE","\n    ",59],["T_PROTECTED","protected",60],["T_WHITESPACE"," ",60],["T_VARIABLE","$url",60],";",["T_WHITESPACE","\n\n    ",60],["T_DOC_COMMENT","\/**\n     * @var ResultFactory\n     *\/",62],["T_WHITESPACE","\n    ",64],["T_PROTECTED","protected",65],["T_WHITESPACE"," ",65],["T_VARIABLE","$resultFactory",65],";",["T_WHITESPACE","\n\n    ",65],["T_DOC_COMMENT","\/**\n     * @var CookieManagerInterface\n     *\/",67],["T_WHITESPACE","\n    ",69],["T_PROTECTED","protected",70],["T_WHITESPACE"," ",70],["T_VARIABLE","$cookieManager",70],";",["T_WHITESPACE","\n\n    ",70],["T_DOC_COMMENT","\/**\n     * @var HostChecker\n     *\/",72],["T_WHITESPACE","\n    ",74],["T_PRIVATE","private",75],["T_WHITESPACE"," ",75],["T_VARIABLE","$hostChecker",75],";",["T_WHITESPACE","\n\n    ",75],["T_DOC_COMMENT","\/**\n     * @param RequestInterface $request\n     * @param Session $customerSession\n     * @param ScopeConfigInterface $scopeConfig\n     * @param StoreManagerInterface $storeManager\n     * @param UrlInterface $url\n     * @param DecoderInterface $urlDecoder\n     * @param CustomerUrl $customerUrl\n     * @param ResultFactory $resultFactory\n     * @param HostChecker|null $hostChecker\n     *\/",77],["T_WHITESPACE","\n    ",87],["T_PUBLIC","public",88],["T_WHITESPACE"," ",88],["T_FUNCTION","function",88],["T_WHITESPACE"," ",88],["T_STRING","__construct",88],"(",["T_WHITESPACE","\n        ",88],["T_STRING","RequestInterface",89],["T_WHITESPACE"," ",89],["T_VARIABLE","$request",89],",",["T_WHITESPACE","\n        ",89],["T_STRING","Session",90],["T_WHITESPACE"," ",90],["T_VARIABLE","$customerSession",90],",",["T_WHITESPACE","\n        ",90],["T_STRING","ScopeConfigInterface",91],["T_WHITESPACE"," ",91],["T_VARIABLE","$scopeConfig",91],",",["T_WHITESPACE","\n        ",91],["T_STRING","StoreManagerInterface",92],["T_WHITESPACE"," ",92],["T_VARIABLE","$storeManager",92],",",["T_WHITESPACE","\n        ",92],["T_STRING","UrlInterface",93],["T_WHITESPACE"," ",93],["T_VARIABLE","$url",93],",",["T_WHITESPACE","\n        ",93],["T_STRING","DecoderInterface",94],["T_WHITESPACE"," ",94],["T_VARIABLE","$urlDecoder",94],",",["T_WHITESPACE","\n        ",94],["T_STRING","CustomerUrl",95],["T_WHITESPACE"," ",95],["T_VARIABLE","$customerUrl",95],",",["T_WHITESPACE","\n        ",95],["T_STRING","ResultFactory",96],["T_WHITESPACE"," ",96],["T_VARIABLE","$resultFactory",96],",",["T_WHITESPACE","\n        ",96],["T_STRING","HostChecker",97],["T_WHITESPACE"," ",97],["T_VARIABLE","$hostChecker",97],["T_WHITESPACE"," ",97],"=",["T_WHITESPACE"," ",97],["T_STRING","null",97],["T_WHITESPACE","\n    ",97],")",["T_WHITESPACE"," ",98],"{",["T_WHITESPACE","\n        ",98],["T_VARIABLE","$this",99],["T_OBJECT_OPERATOR","->",99],["T_STRING","request",99],["T_WHITESPACE"," ",99],"=",["T_WHITESPACE"," ",99],["T_VARIABLE","$request",99],";",["T_WHITESPACE","\n        ",99],["T_VARIABLE","$this",100],["T_OBJECT_OPERATOR","->",100],["T_STRING","session",100],["T_WHITESPACE"," ",100],"=",["T_WHITESPACE"," ",100],["T_VARIABLE","$customerSession",100],";",["T_WHITESPACE","\n        ",100],["T_VARIABLE","$this",101],["T_OBJECT_OPERATOR","->",101],["T_STRING","scopeConfig",101],["T_WHITESPACE"," ",101],"=",["T_WHITESPACE"," ",101],["T_VARIABLE","$scopeConfig",101],";",["T_WHITESPACE","\n        ",101],["T_VARIABLE","$this",102],["T_OBJECT_OPERATOR","->",102],["T_STRING","storeManager",102],["T_WHITESPACE"," ",102],"=",["T_WHITESPACE"," ",102],["T_VARIABLE","$storeManager",102],";",["T_WHITESPACE","\n        ",102],["T_VARIABLE","$this",103],["T_OBJECT_OPERATOR","->",103],["T_STRING","url",103],["T_WHITESPACE"," ",103],"=",["T_WHITESPACE"," ",103],["T_VARIABLE","$url",103],";",["T_WHITESPACE","\n        ",103],["T_VARIABLE","$this",104],["T_OBJECT_OPERATOR","->",104],["T_STRING","urlDecoder",104],["T_WHITESPACE"," ",104],"=",["T_WHITESPACE"," ",104],["T_VARIABLE","$urlDecoder",104],";",["T_WHITESPACE","\n        ",104],["T_VARIABLE","$this",105],["T_OBJECT_OPERATOR","->",105],["T_STRING","customerUrl",105],["T_WHITESPACE"," ",105],"=",["T_WHITESPACE"," ",105],["T_VARIABLE","$customerUrl",105],";",["T_WHITESPACE","\n        ",105],["T_VARIABLE","$this",106],["T_OBJECT_OPERATOR","->",106],["T_STRING","resultFactory",106],["T_WHITESPACE"," ",106],"=",["T_WHITESPACE"," ",106],["T_VARIABLE","$resultFactory",106],";",["T_WHITESPACE","\n        ",106],["T_VARIABLE","$this",107],["T_OBJECT_OPERATOR","->",107],["T_STRING","hostChecker",107],["T_WHITESPACE"," ",107],"=",["T_WHITESPACE"," ",107],["T_VARIABLE","$hostChecker",107],["T_WHITESPACE"," ",107],"?",":",["T_WHITESPACE"," ",107],["T_STRING","ObjectManager",107],["T_DOUBLE_COLON","::",107],["T_STRING","getInstance",107],"(",")",["T_OBJECT_OPERATOR","->",107],["T_STRING","get",107],"(",["T_STRING","HostChecker",107],["T_DOUBLE_COLON","::",107],["T_CLASS","class",107],")",";",["T_WHITESPACE","\n    ",107],"}",["T_WHITESPACE","\n\n    ",108],["T_DOC_COMMENT","\/**\n     * Retrieve redirect\n     *\n     * @return ResultRedirect|ResultForward\n     *\/",110],["T_WHITESPACE","\n    ",114],["T_PUBLIC","public",115],["T_WHITESPACE"," ",115],["T_FUNCTION","function",115],["T_WHITESPACE"," ",115],["T_STRING","getRedirect",115],"(",")",["T_WHITESPACE","\n    ",115],"{",["T_WHITESPACE","\n        ",116],["T_VARIABLE","$this",117],["T_OBJECT_OPERATOR","->",117],["T_STRING","updateLastCustomerId",117],"(",")",";",["T_WHITESPACE","\n        ",117],["T_VARIABLE","$this",118],["T_OBJECT_OPERATOR","->",118],["T_STRING","prepareRedirectUrl",118],"(",")",";",["T_WHITESPACE","\n\n        ",118],["T_DOC_COMMENT","\/** @var ResultRedirect|ResultForward $result *\/",120],["T_WHITESPACE","\n        ",120],["T_IF","if",121],["T_WHITESPACE"," ",121],"(",["T_VARIABLE","$this",121],["T_OBJECT_OPERATOR","->",121],["T_STRING","session",121],["T_OBJECT_OPERATOR","->",121],["T_STRING","getBeforeRequestParams",121],"(",")",")",["T_WHITESPACE"," ",121],"{",["T_WHITESPACE","\n            ",121],["T_VARIABLE","$result",122],["T_WHITESPACE"," ",122],"=",["T_WHITESPACE"," ",122],["T_VARIABLE","$this",122],["T_OBJECT_OPERATOR","->",122],["T_STRING","resultFactory",122],["T_OBJECT_OPERATOR","->",122],["T_STRING","create",122],"(",["T_STRING","ResultFactory",122],["T_DOUBLE_COLON","::",122],["T_STRING","TYPE_FORWARD",122],")",";",["T_WHITESPACE","\n            ",122],["T_VARIABLE","$result",123],["T_OBJECT_OPERATOR","->",123],["T_STRING","setParams",123],"(",["T_VARIABLE","$this",123],["T_OBJECT_OPERATOR","->",123],["T_STRING","session",123],["T_OBJECT_OPERATOR","->",123],["T_STRING","getBeforeRequestParams",123],"(",")",")",["T_WHITESPACE","\n                ",123],["T_OBJECT_OPERATOR","->",124],["T_STRING","setModule",124],"(",["T_VARIABLE","$this",124],["T_OBJECT_OPERATOR","->",124],["T_STRING","session",124],["T_OBJECT_OPERATOR","->",124],["T_STRING","getBeforeModuleName",124],"(",")",")",["T_WHITESPACE","\n                ",124],["T_OBJECT_OPERATOR","->",125],["T_STRING","setController",125],"(",["T_VARIABLE","$this",125],["T_OBJECT_OPERATOR","->",125],["T_STRING","session",125],["T_OBJECT_OPERATOR","->",125],["T_STRING","getBeforeControllerName",125],"(",")",")",["T_WHITESPACE","\n                ",125],["T_OBJECT_OPERATOR","->",126],["T_STRING","forward",126],"(",["T_VARIABLE","$this",126],["T_OBJECT_OPERATOR","->",126],["T_STRING","session",126],["T_OBJECT_OPERATOR","->",126],["T_STRING","getBeforeAction",126],"(",")",")",";",["T_WHITESPACE","\n        ",126],"}",["T_WHITESPACE"," ",127],["T_ELSE","else",127],["T_WHITESPACE"," ",127],"{",["T_WHITESPACE","\n            ",127],["T_VARIABLE","$result",128],["T_WHITESPACE"," ",128],"=",["T_WHITESPACE"," ",128],["T_VARIABLE","$this",128],["T_OBJECT_OPERATOR","->",128],["T_STRING","resultFactory",128],["T_OBJECT_OPERATOR","->",128],["T_STRING","create",128],"(",["T_STRING","ResultFactory",128],["T_DOUBLE_COLON","::",128],["T_STRING","TYPE_REDIRECT",128],")",";",["T_WHITESPACE","\n            ",128],["T_VARIABLE","$result",129],["T_OBJECT_OPERATOR","->",129],["T_STRING","setUrl",129],"(",["T_VARIABLE","$this",129],["T_OBJECT_OPERATOR","->",129],["T_STRING","session",129],["T_OBJECT_OPERATOR","->",129],["T_STRING","getBeforeAuthUrl",129],"(",["T_STRING","true",129],")",")",";",["T_WHITESPACE","\n        ",129],"}",["T_WHITESPACE","\n        ",130],["T_RETURN","return",131],["T_WHITESPACE"," ",131],["T_VARIABLE","$result",131],";",["T_WHITESPACE","\n    ",131],"}",["T_WHITESPACE","\n\n    ",132],["T_DOC_COMMENT","\/**\n     * Update last customer id, if required\n     *\n     * @return void\n     *\/",134],["T_WHITESPACE","\n    ",138],["T_PROTECTED","protected",139],["T_WHITESPACE"," ",139],["T_FUNCTION","function",139],["T_WHITESPACE"," ",139],["T_STRING","updateLastCustomerId",139],"(",")",["T_WHITESPACE","\n    ",139],"{",["T_WHITESPACE","\n        ",140],["T_VARIABLE","$lastCustomerId",141],["T_WHITESPACE"," ",141],"=",["T_WHITESPACE"," ",141],["T_VARIABLE","$this",141],["T_OBJECT_OPERATOR","->",141],["T_STRING","session",141],["T_OBJECT_OPERATOR","->",141],["T_STRING","getLastCustomerId",141],"(",")",";",["T_WHITESPACE","\n        ",141],["T_IF","if",142],["T_WHITESPACE"," ",142],"(",["T_ISSET","isset",142],"(",["T_VARIABLE","$lastCustomerId",142],")",["T_WHITESPACE","\n            ",142],["T_BOOLEAN_AND","&&",143],["T_WHITESPACE"," ",143],["T_VARIABLE","$this",143],["T_OBJECT_OPERATOR","->",143],["T_STRING","session",143],["T_OBJECT_OPERATOR","->",143],["T_STRING","isLoggedIn",143],"(",")",["T_WHITESPACE","\n            ",143],["T_BOOLEAN_AND","&&",144],["T_WHITESPACE"," ",144],["T_VARIABLE","$lastCustomerId",144],["T_WHITESPACE"," ",144],["T_IS_NOT_EQUAL","!=",144],["T_WHITESPACE"," ",144],["T_VARIABLE","$this",144],["T_OBJECT_OPERATOR","->",144],["T_STRING","session",144],["T_OBJECT_OPERATOR","->",144],["T_STRING","getId",144],"(",")",["T_WHITESPACE","\n        ",144],")",["T_WHITESPACE"," ",145],"{",["T_WHITESPACE","\n            ",145],["T_VARIABLE","$this",146],["T_OBJECT_OPERATOR","->",146],["T_STRING","session",146],["T_OBJECT_OPERATOR","->",146],["T_STRING","unsBeforeAuthUrl",146],"(",")",["T_WHITESPACE","\n                ",146],["T_OBJECT_OPERATOR","->",147],["T_STRING","setLastCustomerId",147],"(",["T_VARIABLE","$this",147],["T_OBJECT_OPERATOR","->",147],["T_STRING","session",147],["T_OBJECT_OPERATOR","->",147],["T_STRING","getId",147],"(",")",")",";",["T_WHITESPACE","\n        ",147],"}",["T_WHITESPACE","\n    ",148],"}",["T_WHITESPACE","\n\n    ",149],["T_DOC_COMMENT","\/**\n     * Prepare redirect URL\n     *\n     * @return void\n     *\/",151],["T_WHITESPACE","\n    ",155],["T_PROTECTED","protected",156],["T_WHITESPACE"," ",156],["T_FUNCTION","function",156],["T_WHITESPACE"," ",156],["T_STRING","prepareRedirectUrl",156],"(",")",["T_WHITESPACE","\n    ",156],"{",["T_WHITESPACE","\n        ",157],["T_VARIABLE","$baseUrl",158],["T_WHITESPACE"," ",158],"=",["T_WHITESPACE"," ",158],["T_VARIABLE","$this",158],["T_OBJECT_OPERATOR","->",158],["T_STRING","storeManager",158],["T_OBJECT_OPERATOR","->",158],["T_STRING","getStore",158],"(",")",["T_OBJECT_OPERATOR","->",158],["T_STRING","getBaseUrl",158],"(",")",";",["T_WHITESPACE","\n\n        ",158],["T_VARIABLE","$url",160],["T_WHITESPACE"," ",160],"=",["T_WHITESPACE"," ",160],["T_VARIABLE","$this",160],["T_OBJECT_OPERATOR","->",160],["T_STRING","session",160],["T_OBJECT_OPERATOR","->",160],["T_STRING","getBeforeAuthUrl",160],"(",")",";",["T_WHITESPACE","\n        ",160],["T_IF","if",161],["T_WHITESPACE"," ",161],"(","!",["T_VARIABLE","$url",161],")",["T_WHITESPACE"," ",161],"{",["T_WHITESPACE","\n            ",161],["T_VARIABLE","$url",162],["T_WHITESPACE"," ",162],"=",["T_WHITESPACE"," ",162],["T_VARIABLE","$baseUrl",162],";",["T_WHITESPACE","\n        ",162],"}",["T_WHITESPACE","\n\n        ",163],["T_SWITCH","switch",165],["T_WHITESPACE"," ",165],"(",["T_VARIABLE","$url",165],")",["T_WHITESPACE"," ",165],"{",["T_WHITESPACE","\n            ",165],["T_CASE","case",166],["T_WHITESPACE"," ",166],["T_VARIABLE","$baseUrl",166],":",["T_WHITESPACE","\n                ",166],["T_IF","if",167],["T_WHITESPACE"," ",167],"(",["T_VARIABLE","$this",167],["T_OBJECT_OPERATOR","->",167],["T_STRING","session",167],["T_OBJECT_OPERATOR","->",167],["T_STRING","isLoggedIn",167],"(",")",")",["T_WHITESPACE"," ",167],"{",["T_WHITESPACE","\n                    ",167],["T_VARIABLE","$this",168],["T_OBJECT_OPERATOR","->",168],["T_STRING","processLoggedCustomer",168],"(",")",";",["T_WHITESPACE","\n                ",168],"}",["T_WHITESPACE"," ",169],["T_ELSE","else",169],["T_WHITESPACE"," ",169],"{",["T_WHITESPACE","\n                    ",169],["T_VARIABLE","$this",170],["T_OBJECT_OPERATOR","->",170],["T_STRING","applyRedirect",170],"(",["T_VARIABLE","$this",170],["T_OBJECT_OPERATOR","->",170],["T_STRING","customerUrl",170],["T_OBJECT_OPERATOR","->",170],["T_STRING","getLoginUrl",170],"(",")",")",";",["T_WHITESPACE","\n                ",170],"}",["T_WHITESPACE","\n                ",171],["T_BREAK","break",172],";",["T_WHITESPACE","\n\n            ",172],["T_CASE","case",174],["T_WHITESPACE"," ",174],["T_VARIABLE","$this",174],["T_OBJECT_OPERATOR","->",174],["T_STRING","customerUrl",174],["T_OBJECT_OPERATOR","->",174],["T_STRING","getLogoutUrl",174],"(",")",":",["T_WHITESPACE","\n                ",174],["T_VARIABLE","$this",175],["T_OBJECT_OPERATOR","->",175],["T_STRING","applyRedirect",175],"(",["T_VARIABLE","$this",175],["T_OBJECT_OPERATOR","->",175],["T_STRING","customerUrl",175],["T_OBJECT_OPERATOR","->",175],["T_STRING","getDashboardUrl",175],"(",")",")",";",["T_WHITESPACE","\n                ",175],["T_BREAK","break",176],";",["T_WHITESPACE","\n\n            ",176],["T_DEFAULT","default",178],":",["T_WHITESPACE","\n                ",178],["T_IF","if",179],["T_WHITESPACE"," ",179],"(","!",["T_VARIABLE","$this",179],["T_OBJECT_OPERATOR","->",179],["T_STRING","session",179],["T_OBJECT_OPERATOR","->",179],["T_STRING","getAfterAuthUrl",179],"(",")",")",["T_WHITESPACE"," ",179],"{",["T_WHITESPACE","\n                    ",179],["T_VARIABLE","$this",180],["T_OBJECT_OPERATOR","->",180],["T_STRING","session",180],["T_OBJECT_OPERATOR","->",180],["T_STRING","setAfterAuthUrl",180],"(",["T_VARIABLE","$this",180],["T_OBJECT_OPERATOR","->",180],["T_STRING","session",180],["T_OBJECT_OPERATOR","->",180],["T_STRING","getBeforeAuthUrl",180],"(",")",")",";",["T_WHITESPACE","\n                ",180],"}",["T_WHITESPACE","\n                ",181],["T_IF","if",182],["T_WHITESPACE"," ",182],"(",["T_VARIABLE","$this",182],["T_OBJECT_OPERATOR","->",182],["T_STRING","session",182],["T_OBJECT_OPERATOR","->",182],["T_STRING","isLoggedIn",182],"(",")",")",["T_WHITESPACE"," ",182],"{",["T_WHITESPACE","\n                    ",182],["T_VARIABLE","$this",183],["T_OBJECT_OPERATOR","->",183],["T_STRING","applyRedirect",183],"(",["T_VARIABLE","$this",183],["T_OBJECT_OPERATOR","->",183],["T_STRING","session",183],["T_OBJECT_OPERATOR","->",183],["T_STRING","getAfterAuthUrl",183],"(",["T_STRING","true",183],")",")",";",["T_WHITESPACE","\n                ",183],"}",["T_WHITESPACE","\n                ",184],["T_BREAK","break",185],";",["T_WHITESPACE","\n        ",185],"}",["T_WHITESPACE","\n    ",186],"}",["T_WHITESPACE","\n\n    ",187],["T_DOC_COMMENT","\/**\n     * Prepare redirect URL for logged in customer\n     *\n     * Redirect customer to the last page visited after logging in.\n     *\n     * @return void\n     *\/",189],["T_WHITESPACE","\n    ",195],["T_PROTECTED","protected",196],["T_WHITESPACE"," ",196],["T_FUNCTION","function",196],["T_WHITESPACE"," ",196],["T_STRING","processLoggedCustomer",196],"(",")",["T_WHITESPACE","\n    ",196],"{",["T_WHITESPACE","\n        ",197],["T_COMMENT","\/\/ Set default redirect URL for logged in customer\n",198],["T_WHITESPACE","        ",199],["T_VARIABLE","$this",199],["T_OBJECT_OPERATOR","->",199],["T_STRING","applyRedirect",199],"(",["T_VARIABLE","$this",199],["T_OBJECT_OPERATOR","->",199],["T_STRING","customerUrl",199],["T_OBJECT_OPERATOR","->",199],["T_STRING","getAccountUrl",199],"(",")",")",";",["T_WHITESPACE","\n\n        ",199],["T_IF","if",201],["T_WHITESPACE"," ",201],"(","!",["T_VARIABLE","$this",201],["T_OBJECT_OPERATOR","->",201],["T_STRING","scopeConfig",201],["T_OBJECT_OPERATOR","->",201],["T_STRING","isSetFlag",201],"(",["T_WHITESPACE","\n            ",201],["T_STRING","CustomerUrl",202],["T_DOUBLE_COLON","::",202],["T_STRING","XML_PATH_CUSTOMER_STARTUP_REDIRECT_TO_DASHBOARD",202],",",["T_WHITESPACE","\n            ",202],["T_STRING","ScopeInterface",203],["T_DOUBLE_COLON","::",203],["T_STRING","SCOPE_STORE",203],["T_WHITESPACE","\n        ",203],")",["T_WHITESPACE","\n        ",204],")",["T_WHITESPACE"," ",205],"{",["T_WHITESPACE","\n            ",205],["T_VARIABLE","$referer",206],["T_WHITESPACE"," ",206],"=",["T_WHITESPACE"," ",206],["T_VARIABLE","$this",206],["T_OBJECT_OPERATOR","->",206],["T_STRING","request",206],["T_OBJECT_OPERATOR","->",206],["T_STRING","getParam",206],"(",["T_STRING","CustomerUrl",206],["T_DOUBLE_COLON","::",206],["T_STRING","REFERER_QUERY_PARAM_NAME",206],")",";",["T_WHITESPACE","\n            ",206],["T_IF","if",207],["T_WHITESPACE"," ",207],"(",["T_VARIABLE","$referer",207],")",["T_WHITESPACE"," ",207],"{",["T_WHITESPACE","\n                ",207],["T_VARIABLE","$referer",208],["T_WHITESPACE"," ",208],"=",["T_WHITESPACE"," ",208],["T_VARIABLE","$this",208],["T_OBJECT_OPERATOR","->",208],["T_STRING","urlDecoder",208],["T_OBJECT_OPERATOR","->",208],["T_STRING","decode",208],"(",["T_VARIABLE","$referer",208],")",";",["T_WHITESPACE","\n                ",208],["T_IF","if",209],["T_WHITESPACE"," ",209],"(",["T_VARIABLE","$this",209],["T_OBJECT_OPERATOR","->",209],["T_STRING","hostChecker",209],["T_OBJECT_OPERATOR","->",209],["T_STRING","isOwnOrigin",209],"(",["T_VARIABLE","$referer",209],")",")",["T_WHITESPACE"," ",209],"{",["T_WHITESPACE","\n                    ",209],["T_VARIABLE","$this",210],["T_OBJECT_OPERATOR","->",210],["T_STRING","applyRedirect",210],"(",["T_VARIABLE","$referer",210],")",";",["T_WHITESPACE","\n                ",210],"}",["T_WHITESPACE","\n            ",211],"}",["T_WHITESPACE","\n        ",212],"}",["T_WHITESPACE"," ",213],["T_ELSEIF","elseif",213],["T_WHITESPACE"," ",213],"(",["T_VARIABLE","$this",213],["T_OBJECT_OPERATOR","->",213],["T_STRING","session",213],["T_OBJECT_OPERATOR","->",213],["T_STRING","getAfterAuthUrl",213],"(",")",")",["T_WHITESPACE"," ",213],"{",["T_WHITESPACE","\n            ",213],["T_VARIABLE","$this",214],["T_OBJECT_OPERATOR","->",214],["T_STRING","applyRedirect",214],"(",["T_VARIABLE","$this",214],["T_OBJECT_OPERATOR","->",214],["T_STRING","session",214],["T_OBJECT_OPERATOR","->",214],["T_STRING","getAfterAuthUrl",214],"(",["T_STRING","true",214],")",")",";",["T_WHITESPACE","\n        ",214],"}",["T_WHITESPACE","\n    ",215],"}",["T_WHITESPACE","\n\n    ",216],["T_DOC_COMMENT","\/**\n     * Prepare redirect URL\n     *\n     * @param string $url\n     * @return void\n     *\/",218],["T_WHITESPACE","\n    ",223],["T_PRIVATE","private",224],["T_WHITESPACE"," ",224],["T_FUNCTION","function",224],["T_WHITESPACE"," ",224],["T_STRING","applyRedirect",224],"(",["T_VARIABLE","$url",224],")",["T_WHITESPACE","\n    ",224],"{",["T_WHITESPACE","\n        ",225],["T_VARIABLE","$this",226],["T_OBJECT_OPERATOR","->",226],["T_STRING","session",226],["T_OBJECT_OPERATOR","->",226],["T_STRING","setBeforeAuthUrl",226],"(",["T_VARIABLE","$url",226],")",";",["T_WHITESPACE","\n    ",226],"}",["T_WHITESPACE","\n\n    ",227],["T_DOC_COMMENT","\/**\n     * Get Cookie manager. For release backward compatibility.\n     *\n     * @deprecated\n     * @return CookieManagerInterface\n     *\/",229],["T_WHITESPACE","\n    ",234],["T_PROTECTED","protected",235],["T_WHITESPACE"," ",235],["T_FUNCTION","function",235],["T_WHITESPACE"," ",235],["T_STRING","getCookieManager",235],"(",")",["T_WHITESPACE","\n    ",235],"{",["T_WHITESPACE","\n        ",236],["T_IF","if",237],["T_WHITESPACE"," ",237],"(","!",["T_STRING","is_object",237],"(",["T_VARIABLE","$this",237],["T_OBJECT_OPERATOR","->",237],["T_STRING","cookieManager",237],")",")",["T_WHITESPACE"," ",237],"{",["T_WHITESPACE","\n            ",237],["T_VARIABLE","$this",238],["T_OBJECT_OPERATOR","->",238],["T_STRING","cookieManager",238],["T_WHITESPACE"," ",238],"=",["T_WHITESPACE"," ",238],["T_STRING","ObjectManager",238],["T_DOUBLE_COLON","::",238],["T_STRING","getInstance",238],"(",")",["T_OBJECT_OPERATOR","->",238],["T_STRING","get",238],"(",["T_STRING","CookieManagerInterface",238],["T_DOUBLE_COLON","::",238],["T_CLASS","class",238],")",";",["T_WHITESPACE","\n        ",238],"}",["T_WHITESPACE","\n        ",239],["T_RETURN","return",240],["T_WHITESPACE"," ",240],["T_VARIABLE","$this",240],["T_OBJECT_OPERATOR","->",240],["T_STRING","cookieManager",240],";",["T_WHITESPACE","\n    ",240],"}",["T_WHITESPACE","\n\n    ",241],["T_DOC_COMMENT","\/**\n     * Set cookie manager. For unit tests.\n     *\n     * @deprecated\n     * @param object $value\n     * @return void\n     *\/",243],["T_WHITESPACE","\n    ",249],["T_PUBLIC","public",250],["T_WHITESPACE"," ",250],["T_FUNCTION","function",250],["T_WHITESPACE"," ",250],["T_STRING","setCookieManager",250],"(",["T_VARIABLE","$value",250],")",["T_WHITESPACE","\n    ",250],"{",["T_WHITESPACE","\n        ",251],["T_VARIABLE","$this",252],["T_OBJECT_OPERATOR","->",252],["T_STRING","cookieManager",252],["T_WHITESPACE"," ",252],"=",["T_WHITESPACE"," ",252],["T_VARIABLE","$value",252],";",["T_WHITESPACE","\n    ",252],"}",["T_WHITESPACE","\n\n    ",253],["T_DOC_COMMENT","\/**\n     * Get redirect route from cookie for case of successful login\/registration\n     *\n     * @return null|string\n     *\/",255],["T_WHITESPACE","\n    ",259],["T_PUBLIC","public",260],["T_WHITESPACE"," ",260],["T_FUNCTION","function",260],["T_WHITESPACE"," ",260],["T_STRING","getRedirectCookie",260],"(",")",["T_WHITESPACE","\n    ",260],"{",["T_WHITESPACE","\n        ",261],["T_RETURN","return",262],["T_WHITESPACE"," ",262],["T_VARIABLE","$this",262],["T_OBJECT_OPERATOR","->",262],["T_STRING","getCookieManager",262],"(",")",["T_OBJECT_OPERATOR","->",262],["T_STRING","getCookie",262],"(",["T_STRING","self",262],["T_DOUBLE_COLON","::",262],["T_STRING","LOGIN_REDIRECT_URL",262],",",["T_WHITESPACE"," ",262],["T_STRING","null",262],")",";",["T_WHITESPACE","\n    ",262],"}",["T_WHITESPACE","\n\n    ",263],["T_DOC_COMMENT","\/**\n     * Save redirect route to cookie for case of successful login\/registration\n     *\n     * @param string $route\n     * @return void\n     *\/",265],["T_WHITESPACE","\n    ",270],["T_PUBLIC","public",271],["T_WHITESPACE"," ",271],["T_FUNCTION","function",271],["T_WHITESPACE"," ",271],["T_STRING","setRedirectCookie",271],"(",["T_VARIABLE","$route",271],")",["T_WHITESPACE","\n    ",271],"{",["T_WHITESPACE","\n        ",272],["T_VARIABLE","$this",273],["T_OBJECT_OPERATOR","->",273],["T_STRING","getCookieManager",273],"(",")",["T_OBJECT_OPERATOR","->",273],["T_STRING","setPublicCookie",273],"(",["T_STRING","self",273],["T_DOUBLE_COLON","::",273],["T_STRING","LOGIN_REDIRECT_URL",273],",",["T_WHITESPACE"," ",273],["T_VARIABLE","$route",273],")",";",["T_WHITESPACE","\n    ",273],"}",["T_WHITESPACE","\n\n    ",274],["T_DOC_COMMENT","\/**\n     * Clear cookie with requested route\n     *\n     * @return void\n     *\/",276],["T_WHITESPACE","\n    ",280],["T_PUBLIC","public",281],["T_WHITESPACE"," ",281],["T_FUNCTION","function",281],["T_WHITESPACE"," ",281],["T_STRING","clearRedirectCookie",281],"(",")",["T_WHITESPACE","\n    ",281],"{",["T_WHITESPACE","\n        ",282],["T_VARIABLE","$this",283],["T_OBJECT_OPERATOR","->",283],["T_STRING","getCookieManager",283],"(",")",["T_OBJECT_OPERATOR","->",283],["T_STRING","deleteCookie",283],"(",["T_STRING","self",283],["T_DOUBLE_COLON","::",283],["T_STRING","LOGIN_REDIRECT_URL",283],")",";",["T_WHITESPACE","\n    ",283],"}",["T_WHITESPACE","\n",284],"}",["T_WHITESPACE","\n",285]]
[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Copyright \u00c2\u00a9 2013-2017 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n *\/",2],["T_WHITESPACE","\n",5],["T_NAMESPACE","namespace",6],["T_WHITESPACE"," ",6],["T_STRING","Magento",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Customer",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Model",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Config",6],";",["T_WHITESPACE","\n\n",6],["T_DOC_COMMENT","\/**\n * Customer sharing config model\n *\n * @author      Magento Core Team <core@magentocommerce.com>\n *\/",8],["T_WHITESPACE","\n",12],["T_CLASS","class",13],["T_WHITESPACE"," ",13],["T_STRING","Share",13],["T_WHITESPACE"," ",13],["T_EXTENDS","extends",13],["T_WHITESPACE"," ",13],["T_NS_SEPARATOR","\\",13],["T_STRING","Magento",13],["T_NS_SEPARATOR","\\",13],["T_STRING","Framework",13],["T_NS_SEPARATOR","\\",13],["T_STRING","App",13],["T_NS_SEPARATOR","\\",13],["T_STRING","Config",13],["T_NS_SEPARATOR","\\",13],["T_STRING","Value",13],["T_WHITESPACE"," ",13],["T_IMPLEMENTS","implements",13],["T_WHITESPACE"," ",13],["T_NS_SEPARATOR","\\",13],["T_STRING","Magento",13],["T_NS_SEPARATOR","\\",13],["T_STRING","Framework",13],["T_NS_SEPARATOR","\\",13],["T_STRING","Option",13],["T_NS_SEPARATOR","\\",13],["T_STRING","ArrayInterface",13],["T_WHITESPACE","\n",13],"{",["T_WHITESPACE","\n    ",14],["T_DOC_COMMENT","\/**\n     * Xml config path to customers sharing scope value\n     *\n     *\/",15],["T_WHITESPACE","\n    ",18],["T_CONST","const",19],["T_WHITESPACE"," ",19],["T_STRING","XML_PATH_CUSTOMER_ACCOUNT_SHARE",19],["T_WHITESPACE"," ",19],"=",["T_WHITESPACE"," ",19],["T_CONSTANT_ENCAPSED_STRING","'customer\/account_share\/scope'",19],";",["T_WHITESPACE","\n\n    ",19],["T_DOC_COMMENT","\/**\n     * Possible customer sharing scopes\n     *\n     *\/",21],["T_WHITESPACE","\n    ",24],["T_CONST","const",25],["T_WHITESPACE"," ",25],["T_STRING","SHARE_GLOBAL",25],["T_WHITESPACE"," ",25],"=",["T_WHITESPACE"," ",25],["T_LNUMBER","0",25],";",["T_WHITESPACE","\n\n    ",25],["T_CONST","const",27],["T_WHITESPACE"," ",27],["T_STRING","SHARE_WEBSITE",27],["T_WHITESPACE"," ",27],"=",["T_WHITESPACE"," ",27],["T_LNUMBER","1",27],";",["T_WHITESPACE","\n\n    ",27],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Customer\\Model\\ResourceModel\\Customer\n     *\/",29],["T_WHITESPACE","\n    ",31],["T_PROTECTED","protected",32],["T_WHITESPACE"," ",32],["T_VARIABLE","$_customerResource",32],";",["T_WHITESPACE","\n\n    ",32],["T_DOC_COMMENT","\/** @var  \\Magento\\Store\\Model\\StoreManagerInterface *\/",34],["T_WHITESPACE","\n    ",34],["T_PROTECTED","protected",35],["T_WHITESPACE"," ",35],["T_VARIABLE","$_storeManager",35],";",["T_WHITESPACE","\n\n    ",35],["T_DOC_COMMENT","\/**\n     * Constructor\n     *\n     * @param \\Magento\\Framework\\Model\\Context $context\n     * @param \\Magento\\Framework\\Registry $registry\n     * @param \\Magento\\Framework\\App\\Config\\ScopeConfigInterface $config\n     * @param \\Magento\\Framework\\App\\Cache\\TypeListInterface $cacheTypeList\n     * @param \\Magento\\Store\\Model\\StoreManagerInterface $storeManager\n     * @param \\Magento\\Customer\\Model\\ResourceModel\\Customer $customerResource\n     * @param \\Magento\\Framework\\Model\\ResourceModel\\AbstractResource $resource\n     * @param \\Magento\\Framework\\Data\\Collection\\AbstractDb $resourceCollection\n     * @param array $data\n     *\/",37],["T_WHITESPACE","\n    ",49],["T_PUBLIC","public",50],["T_WHITESPACE"," ",50],["T_FUNCTION","function",50],["T_WHITESPACE"," ",50],["T_STRING","__construct",50],"(",["T_WHITESPACE","\n        ",50],["T_NS_SEPARATOR","\\",51],["T_STRING","Magento",51],["T_NS_SEPARATOR","\\",51],["T_STRING","Framework",51],["T_NS_SEPARATOR","\\",51],["T_STRING","Model",51],["T_NS_SEPARATOR","\\",51],["T_STRING","Context",51],["T_WHITESPACE"," ",51],["T_VARIABLE","$context",51],",",["T_WHITESPACE","\n        ",51],["T_NS_SEPARATOR","\\",52],["T_STRING","Magento",52],["T_NS_SEPARATOR","\\",52],["T_STRING","Framework",52],["T_NS_SEPARATOR","\\",52],["T_STRING","Registry",52],["T_WHITESPACE"," ",52],["T_VARIABLE","$registry",52],",",["T_WHITESPACE","\n        ",52],["T_NS_SEPARATOR","\\",53],["T_STRING","Magento",53],["T_NS_SEPARATOR","\\",53],["T_STRING","Framework",53],["T_NS_SEPARATOR","\\",53],["T_STRING","App",53],["T_NS_SEPARATOR","\\",53],["T_STRING","Config",53],["T_NS_SEPARATOR","\\",53],["T_STRING","ScopeConfigInterface",53],["T_WHITESPACE"," ",53],["T_VARIABLE","$config",53],",",["T_WHITESPACE","\n        ",53],["T_NS_SEPARATOR","\\",54],["T_STRING","Magento",54],["T_NS_SEPARATOR","\\",54],["T_STRING","Framework",54],["T_NS_SEPARATOR","\\",54],["T_STRING","App",54],["T_NS_SEPARATOR","\\",54],["T_STRING","Cache",54],["T_NS_SEPARATOR","\\",54],["T_STRING","TypeListInterface",54],["T_WHITESPACE"," ",54],["T_VARIABLE","$cacheTypeList",54],",",["T_WHITESPACE","\n        ",54],["T_NS_SEPARATOR","\\",55],["T_STRING","Magento",55],["T_NS_SEPARATOR","\\",55],["T_STRING","Store",55],["T_NS_SEPARATOR","\\",55],["T_STRING","Model",55],["T_NS_SEPARATOR","\\",55],["T_STRING","StoreManagerInterface",55],["T_WHITESPACE"," ",55],["T_VARIABLE","$storeManager",55],",",["T_WHITESPACE","\n        ",55],["T_NS_SEPARATOR","\\",56],["T_STRING","Magento",56],["T_NS_SEPARATOR","\\",56],["T_STRING","Customer",56],["T_NS_SEPARATOR","\\",56],["T_STRING","Model",56],["T_NS_SEPARATOR","\\",56],["T_STRING","ResourceModel",56],["T_NS_SEPARATOR","\\",56],["T_STRING","Customer",56],["T_WHITESPACE"," ",56],["T_VARIABLE","$customerResource",56],",",["T_WHITESPACE","\n        ",56],["T_NS_SEPARATOR","\\",57],["T_STRING","Magento",57],["T_NS_SEPARATOR","\\",57],["T_STRING","Framework",57],["T_NS_SEPARATOR","\\",57],["T_STRING","Model",57],["T_NS_SEPARATOR","\\",57],["T_STRING","ResourceModel",57],["T_NS_SEPARATOR","\\",57],["T_STRING","AbstractResource",57],["T_WHITESPACE"," ",57],["T_VARIABLE","$resource",57],["T_WHITESPACE"," ",57],"=",["T_WHITESPACE"," ",57],["T_STRING","null",57],",",["T_WHITESPACE","\n        ",57],["T_NS_SEPARATOR","\\",58],["T_STRING","Magento",58],["T_NS_SEPARATOR","\\",58],["T_STRING","Framework",58],["T_NS_SEPARATOR","\\",58],["T_STRING","Data",58],["T_NS_SEPARATOR","\\",58],["T_STRING","Collection",58],["T_NS_SEPARATOR","\\",58],["T_STRING","AbstractDb",58],["T_WHITESPACE"," ",58],["T_VARIABLE","$resourceCollection",58],["T_WHITESPACE"," ",58],"=",["T_WHITESPACE"," ",58],["T_STRING","null",58],",",["T_WHITESPACE","\n        ",58],["T_ARRAY","array",59],["T_WHITESPACE"," ",59],["T_VARIABLE","$data",59],["T_WHITESPACE"," ",59],"=",["T_WHITESPACE"," ",59],"[","]",["T_WHITESPACE","\n    ",59],")",["T_WHITESPACE"," ",60],"{",["T_WHITESPACE","\n        ",60],["T_VARIABLE","$this",61],["T_OBJECT_OPERATOR","->",61],["T_STRING","_storeManager",61],["T_WHITESPACE"," ",61],"=",["T_WHITESPACE"," ",61],["T_VARIABLE","$storeManager",61],";",["T_WHITESPACE","\n        ",61],["T_VARIABLE","$this",62],["T_OBJECT_OPERATOR","->",62],["T_STRING","_customerResource",62],["T_WHITESPACE"," ",62],"=",["T_WHITESPACE"," ",62],["T_VARIABLE","$customerResource",62],";",["T_WHITESPACE","\n        ",62],["T_STRING","parent",63],["T_DOUBLE_COLON","::",63],["T_STRING","__construct",63],"(",["T_VARIABLE","$context",63],",",["T_WHITESPACE"," ",63],["T_VARIABLE","$registry",63],",",["T_WHITESPACE"," ",63],["T_VARIABLE","$config",63],",",["T_WHITESPACE"," ",63],["T_VARIABLE","$cacheTypeList",63],",",["T_WHITESPACE"," ",63],["T_VARIABLE","$resource",63],",",["T_WHITESPACE"," ",63],["T_VARIABLE","$resourceCollection",63],",",["T_WHITESPACE"," ",63],["T_VARIABLE","$data",63],")",";",["T_WHITESPACE","\n    ",63],"}",["T_WHITESPACE","\n\n    ",64],["T_DOC_COMMENT","\/**\n     * Check whether current customers sharing scope is global\n     *\n     * @return bool\n     *\/",66],["T_WHITESPACE","\n    ",70],["T_PUBLIC","public",71],["T_WHITESPACE"," ",71],["T_FUNCTION","function",71],["T_WHITESPACE"," ",71],["T_STRING","isGlobalScope",71],"(",")",["T_WHITESPACE","\n    ",71],"{",["T_WHITESPACE","\n        ",72],["T_RETURN","return",73],["T_WHITESPACE"," ",73],"!",["T_VARIABLE","$this",73],["T_OBJECT_OPERATOR","->",73],["T_STRING","isWebsiteScope",73],"(",")",";",["T_WHITESPACE","\n    ",73],"}",["T_WHITESPACE","\n\n    ",74],["T_DOC_COMMENT","\/**\n     * Check whether current customers sharing scope is website\n     *\n     * @return bool\n     *\/",76],["T_WHITESPACE","\n    ",80],["T_PUBLIC","public",81],["T_WHITESPACE"," ",81],["T_FUNCTION","function",81],["T_WHITESPACE"," ",81],["T_STRING","isWebsiteScope",81],"(",")",["T_WHITESPACE","\n    ",81],"{",["T_WHITESPACE","\n        ",82],["T_RETURN","return",83],["T_WHITESPACE"," ",83],["T_VARIABLE","$this",83],["T_OBJECT_OPERATOR","->",83],["T_STRING","_config",83],["T_OBJECT_OPERATOR","->",83],["T_STRING","getValue",83],"(",["T_WHITESPACE","\n            ",83],["T_STRING","self",84],["T_DOUBLE_COLON","::",84],["T_STRING","XML_PATH_CUSTOMER_ACCOUNT_SHARE",84],",",["T_WHITESPACE","\n            ",84],["T_NS_SEPARATOR","\\",85],["T_STRING","Magento",85],["T_NS_SEPARATOR","\\",85],["T_STRING","Store",85],["T_NS_SEPARATOR","\\",85],["T_STRING","Model",85],["T_NS_SEPARATOR","\\",85],["T_STRING","ScopeInterface",85],["T_DOUBLE_COLON","::",85],["T_STRING","SCOPE_STORE",85],["T_WHITESPACE","\n        ",85],")",["T_WHITESPACE"," ",86],["T_IS_EQUAL","==",86],["T_WHITESPACE"," ",86],["T_STRING","self",86],["T_DOUBLE_COLON","::",86],["T_STRING","SHARE_WEBSITE",86],";",["T_WHITESPACE","\n    ",86],"}",["T_WHITESPACE","\n\n    ",87],["T_DOC_COMMENT","\/**\n     * Get possible sharing configuration options\n     *\n     * @return array\n     *\/",89],["T_WHITESPACE","\n    ",93],["T_PUBLIC","public",94],["T_WHITESPACE"," ",94],["T_FUNCTION","function",94],["T_WHITESPACE"," ",94],["T_STRING","toOptionArray",94],"(",")",["T_WHITESPACE","\n    ",94],"{",["T_WHITESPACE","\n        ",95],["T_RETURN","return",96],["T_WHITESPACE"," ",96],"[",["T_STRING","self",96],["T_DOUBLE_COLON","::",96],["T_STRING","SHARE_GLOBAL",96],["T_WHITESPACE"," ",96],["T_DOUBLE_ARROW","=>",96],["T_WHITESPACE"," ",96],["T_STRING","__",96],"(",["T_CONSTANT_ENCAPSED_STRING","'Global'",96],")",",",["T_WHITESPACE"," ",96],["T_STRING","self",96],["T_DOUBLE_COLON","::",96],["T_STRING","SHARE_WEBSITE",96],["T_WHITESPACE"," ",96],["T_DOUBLE_ARROW","=>",96],["T_WHITESPACE"," ",96],["T_STRING","__",96],"(",["T_CONSTANT_ENCAPSED_STRING","'Per Website'",96],")","]",";",["T_WHITESPACE","\n    ",96],"}",["T_WHITESPACE","\n\n    ",97],["T_DOC_COMMENT","\/**\n     * Check for email duplicates before saving customers sharing options\n     *\n     * @return $this\n     * @throws \\Magento\\Framework\\Exception\\LocalizedException\n     *\/",99],["T_WHITESPACE","\n    ",104],["T_PUBLIC","public",105],["T_WHITESPACE"," ",105],["T_FUNCTION","function",105],["T_WHITESPACE"," ",105],["T_STRING","beforeSave",105],"(",")",["T_WHITESPACE","\n    ",105],"{",["T_WHITESPACE","\n        ",106],["T_VARIABLE","$value",107],["T_WHITESPACE"," ",107],"=",["T_WHITESPACE"," ",107],["T_VARIABLE","$this",107],["T_OBJECT_OPERATOR","->",107],["T_STRING","getValue",107],"(",")",";",["T_WHITESPACE","\n        ",107],["T_IF","if",108],["T_WHITESPACE"," ",108],"(",["T_VARIABLE","$value",108],["T_WHITESPACE"," ",108],["T_IS_EQUAL","==",108],["T_WHITESPACE"," ",108],["T_STRING","self",108],["T_DOUBLE_COLON","::",108],["T_STRING","SHARE_GLOBAL",108],")",["T_WHITESPACE"," ",108],"{",["T_WHITESPACE","\n            ",108],["T_IF","if",109],["T_WHITESPACE"," ",109],"(",["T_VARIABLE","$this",109],["T_OBJECT_OPERATOR","->",109],["T_STRING","_customerResource",109],["T_OBJECT_OPERATOR","->",109],["T_STRING","findEmailDuplicates",109],"(",")",")",["T_WHITESPACE"," ",109],"{",["T_WHITESPACE","\n                ",109],["T_COMMENT","\/\/@codingStandardsIgnoreStart\n",110],["T_WHITESPACE","                ",111],["T_THROW","throw",111],["T_WHITESPACE"," ",111],["T_NEW","new",111],["T_WHITESPACE"," ",111],["T_NS_SEPARATOR","\\",111],["T_STRING","Magento",111],["T_NS_SEPARATOR","\\",111],["T_STRING","Framework",111],["T_NS_SEPARATOR","\\",111],["T_STRING","Exception",111],["T_NS_SEPARATOR","\\",111],["T_STRING","LocalizedException",111],"(",["T_WHITESPACE","\n                    ",111],["T_STRING","__",112],"(",["T_WHITESPACE","\n                        ",112],["T_CONSTANT_ENCAPSED_STRING","'We can\\'t share customer accounts globally when the accounts share identical email addresses on more than one website.'",113],["T_WHITESPACE","\n                    ",113],")",["T_WHITESPACE","\n                ",114],")",";",["T_WHITESPACE","\n                ",115],["T_COMMENT","\/\/@codingStandardsIgnoreEnd\n",116],["T_WHITESPACE","            ",117],"}",["T_WHITESPACE","\n        ",117],"}",["T_WHITESPACE","\n        ",118],["T_RETURN","return",119],["T_WHITESPACE"," ",119],["T_VARIABLE","$this",119],";",["T_WHITESPACE","\n    ",119],"}",["T_WHITESPACE","\n\n    ",120],["T_DOC_COMMENT","\/**\n     * Returns shared website Ids.\n     *\n     * @param int $websiteId the ID to use if website scope is on\n     * @return int[]\n     *\/",122],["T_WHITESPACE","\n    ",127],["T_PUBLIC","public",128],["T_WHITESPACE"," ",128],["T_FUNCTION","function",128],["T_WHITESPACE"," ",128],["T_STRING","getSharedWebsiteIds",128],"(",["T_VARIABLE","$websiteId",128],")",["T_WHITESPACE","\n    ",128],"{",["T_WHITESPACE","\n        ",129],["T_VARIABLE","$ids",130],["T_WHITESPACE"," ",130],"=",["T_WHITESPACE"," ",130],"[","]",";",["T_WHITESPACE","\n        ",130],["T_IF","if",131],["T_WHITESPACE"," ",131],"(",["T_VARIABLE","$this",131],["T_OBJECT_OPERATOR","->",131],["T_STRING","isWebsiteScope",131],"(",")",")",["T_WHITESPACE"," ",131],"{",["T_WHITESPACE","\n            ",131],["T_VARIABLE","$ids",132],"[","]",["T_WHITESPACE"," ",132],"=",["T_WHITESPACE"," ",132],["T_VARIABLE","$websiteId",132],";",["T_WHITESPACE","\n        ",132],"}",["T_WHITESPACE"," ",133],["T_ELSE","else",133],["T_WHITESPACE"," ",133],"{",["T_WHITESPACE","\n            ",133],["T_FOREACH","foreach",134],["T_WHITESPACE"," ",134],"(",["T_VARIABLE","$this",134],["T_OBJECT_OPERATOR","->",134],["T_STRING","_storeManager",134],["T_OBJECT_OPERATOR","->",134],["T_STRING","getWebsites",134],"(",")",["T_WHITESPACE"," ",134],["T_AS","as",134],["T_WHITESPACE"," ",134],["T_VARIABLE","$website",134],")",["T_WHITESPACE"," ",134],"{",["T_WHITESPACE","\n                ",134],["T_VARIABLE","$ids",135],"[","]",["T_WHITESPACE"," ",135],"=",["T_WHITESPACE"," ",135],["T_VARIABLE","$website",135],["T_OBJECT_OPERATOR","->",135],["T_STRING","getId",135],"(",")",";",["T_WHITESPACE","\n            ",135],"}",["T_WHITESPACE","\n        ",136],"}",["T_WHITESPACE","\n        ",137],["T_RETURN","return",138],["T_WHITESPACE"," ",138],["T_VARIABLE","$ids",138],";",["T_WHITESPACE","\n    ",138],"}",["T_WHITESPACE","\n",139],"}",["T_WHITESPACE","\n",140]]
[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Copyright \u00c2\u00a9 2013-2017 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n *\/",2],["T_WHITESPACE","\n",5],["T_NAMESPACE","namespace",6],["T_WHITESPACE"," ",6],["T_STRING","Magento",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Customer",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Model",6],";",["T_WHITESPACE","\n\n",6],["T_CLASS","class",8],["T_WHITESPACE"," ",8],["T_STRING","FileProcessor",8],["T_WHITESPACE","\n",8],"{",["T_WHITESPACE","\n    ",9],["T_DOC_COMMENT","\/**\n     * Temporary directory name\n     *\/",10],["T_WHITESPACE","\n    ",12],["T_CONST","const",13],["T_WHITESPACE"," ",13],["T_STRING","TMP_DIR",13],["T_WHITESPACE"," ",13],"=",["T_WHITESPACE"," ",13],["T_CONSTANT_ENCAPSED_STRING","'tmp'",13],";",["T_WHITESPACE","\n\n    ",13],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Framework\\Filesystem\\Directory\\WriteInterface\n     *\/",15],["T_WHITESPACE","\n    ",17],["T_PRIVATE","private",18],["T_WHITESPACE"," ",18],["T_VARIABLE","$mediaDirectory",18],";",["T_WHITESPACE","\n\n    ",18],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\MediaStorage\\Model\\File\\UploaderFactory\n     *\/",20],["T_WHITESPACE","\n    ",22],["T_PRIVATE","private",23],["T_WHITESPACE"," ",23],["T_VARIABLE","$uploaderFactory",23],";",["T_WHITESPACE","\n\n    ",23],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Framework\\UrlInterface\n     *\/",25],["T_WHITESPACE","\n    ",27],["T_PRIVATE","private",28],["T_WHITESPACE"," ",28],["T_VARIABLE","$urlBuilder",28],";",["T_WHITESPACE","\n\n    ",28],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Framework\\Url\\EncoderInterface\n     *\/",30],["T_WHITESPACE","\n    ",32],["T_PRIVATE","private",33],["T_WHITESPACE"," ",33],["T_VARIABLE","$urlEncoder",33],";",["T_WHITESPACE","\n\n    ",33],["T_DOC_COMMENT","\/**\n     * @var string\n     *\/",35],["T_WHITESPACE","\n    ",37],["T_PRIVATE","private",38],["T_WHITESPACE"," ",38],["T_VARIABLE","$entityTypeCode",38],";",["T_WHITESPACE","\n\n    ",38],["T_DOC_COMMENT","\/**\n     * @var array\n     *\/",40],["T_WHITESPACE","\n    ",42],["T_PRIVATE","private",43],["T_WHITESPACE"," ",43],["T_VARIABLE","$allowedExtensions",43],["T_WHITESPACE"," ",43],"=",["T_WHITESPACE"," ",43],"[","]",";",["T_WHITESPACE","\n\n    ",43],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Framework\\File\\Mime\n     *\/",45],["T_WHITESPACE","\n    ",47],["T_PRIVATE","private",48],["T_WHITESPACE"," ",48],["T_VARIABLE","$mime",48],";",["T_WHITESPACE","\n\n    ",48],["T_DOC_COMMENT","\/**\n     * @param \\Magento\\Framework\\Filesystem $filesystem\n     * @param \\Magento\\MediaStorage\\Model\\File\\UploaderFactory $uploaderFactory\n     * @param \\Magento\\Framework\\UrlInterface $urlBuilder\n     * @param \\Magento\\Framework\\Url\\EncoderInterface $urlEncoder\n     * @param string $entityTypeCode\n     * @param \\Magento\\Framework\\File\\Mime $mime\n     * @param array $allowedExtensions\n     *\/",50],["T_WHITESPACE","\n    ",58],["T_PUBLIC","public",59],["T_WHITESPACE"," ",59],["T_FUNCTION","function",59],["T_WHITESPACE"," ",59],["T_STRING","__construct",59],"(",["T_WHITESPACE","\n        ",59],["T_NS_SEPARATOR","\\",60],["T_STRING","Magento",60],["T_NS_SEPARATOR","\\",60],["T_STRING","Framework",60],["T_NS_SEPARATOR","\\",60],["T_STRING","Filesystem",60],["T_WHITESPACE"," ",60],["T_VARIABLE","$filesystem",60],",",["T_WHITESPACE","\n        ",60],["T_NS_SEPARATOR","\\",61],["T_STRING","Magento",61],["T_NS_SEPARATOR","\\",61],["T_STRING","MediaStorage",61],["T_NS_SEPARATOR","\\",61],["T_STRING","Model",61],["T_NS_SEPARATOR","\\",61],["T_STRING","File",61],["T_NS_SEPARATOR","\\",61],["T_STRING","UploaderFactory",61],["T_WHITESPACE"," ",61],["T_VARIABLE","$uploaderFactory",61],",",["T_WHITESPACE","\n        ",61],["T_NS_SEPARATOR","\\",62],["T_STRING","Magento",62],["T_NS_SEPARATOR","\\",62],["T_STRING","Framework",62],["T_NS_SEPARATOR","\\",62],["T_STRING","UrlInterface",62],["T_WHITESPACE"," ",62],["T_VARIABLE","$urlBuilder",62],",",["T_WHITESPACE","\n        ",62],["T_NS_SEPARATOR","\\",63],["T_STRING","Magento",63],["T_NS_SEPARATOR","\\",63],["T_STRING","Framework",63],["T_NS_SEPARATOR","\\",63],["T_STRING","Url",63],["T_NS_SEPARATOR","\\",63],["T_STRING","EncoderInterface",63],["T_WHITESPACE"," ",63],["T_VARIABLE","$urlEncoder",63],",",["T_WHITESPACE","\n        ",63],["T_VARIABLE","$entityTypeCode",64],",",["T_WHITESPACE","\n        ",64],["T_NS_SEPARATOR","\\",65],["T_STRING","Magento",65],["T_NS_SEPARATOR","\\",65],["T_STRING","Framework",65],["T_NS_SEPARATOR","\\",65],["T_STRING","File",65],["T_NS_SEPARATOR","\\",65],["T_STRING","Mime",65],["T_WHITESPACE"," ",65],["T_VARIABLE","$mime",65],",",["T_WHITESPACE","\n        ",65],["T_ARRAY","array",66],["T_WHITESPACE"," ",66],["T_VARIABLE","$allowedExtensions",66],["T_WHITESPACE"," ",66],"=",["T_WHITESPACE"," ",66],"[","]",["T_WHITESPACE","\n    ",66],")",["T_WHITESPACE"," ",67],"{",["T_WHITESPACE","\n        ",67],["T_VARIABLE","$this",68],["T_OBJECT_OPERATOR","->",68],["T_STRING","mediaDirectory",68],["T_WHITESPACE"," ",68],"=",["T_WHITESPACE"," ",68],["T_VARIABLE","$filesystem",68],["T_OBJECT_OPERATOR","->",68],["T_STRING","getDirectoryWrite",68],"(",["T_NS_SEPARATOR","\\",68],["T_STRING","Magento",68],["T_NS_SEPARATOR","\\",68],["T_STRING","Framework",68],["T_NS_SEPARATOR","\\",68],["T_STRING","App",68],["T_NS_SEPARATOR","\\",68],["T_STRING","Filesystem",68],["T_NS_SEPARATOR","\\",68],["T_STRING","DirectoryList",68],["T_DOUBLE_COLON","::",68],["T_STRING","MEDIA",68],")",";",["T_WHITESPACE","\n        ",68],["T_VARIABLE","$this",69],["T_OBJECT_OPERATOR","->",69],["T_STRING","uploaderFactory",69],["T_WHITESPACE"," ",69],"=",["T_WHITESPACE"," ",69],["T_VARIABLE","$uploaderFactory",69],";",["T_WHITESPACE","\n        ",69],["T_VARIABLE","$this",70],["T_OBJECT_OPERATOR","->",70],["T_STRING","urlBuilder",70],["T_WHITESPACE"," ",70],"=",["T_WHITESPACE"," ",70],["T_VARIABLE","$urlBuilder",70],";",["T_WHITESPACE","\n        ",70],["T_VARIABLE","$this",71],["T_OBJECT_OPERATOR","->",71],["T_STRING","urlEncoder",71],["T_WHITESPACE"," ",71],"=",["T_WHITESPACE"," ",71],["T_VARIABLE","$urlEncoder",71],";",["T_WHITESPACE","\n        ",71],["T_VARIABLE","$this",72],["T_OBJECT_OPERATOR","->",72],["T_STRING","entityTypeCode",72],["T_WHITESPACE"," ",72],"=",["T_WHITESPACE"," ",72],["T_VARIABLE","$entityTypeCode",72],";",["T_WHITESPACE","\n        ",72],["T_VARIABLE","$this",73],["T_OBJECT_OPERATOR","->",73],["T_STRING","mime",73],["T_WHITESPACE"," ",73],"=",["T_WHITESPACE"," ",73],["T_VARIABLE","$mime",73],";",["T_WHITESPACE","\n        ",73],["T_VARIABLE","$this",74],["T_OBJECT_OPERATOR","->",74],["T_STRING","allowedExtensions",74],["T_WHITESPACE"," ",74],"=",["T_WHITESPACE"," ",74],["T_VARIABLE","$allowedExtensions",74],";",["T_WHITESPACE","\n    ",74],"}",["T_WHITESPACE","\n\n    ",75],["T_DOC_COMMENT","\/**\n     * Retrieve base64 encoded file content\n     *\n     * @param string $fileName\n     * @return string\n     *\/",77],["T_WHITESPACE","\n    ",82],["T_PUBLIC","public",83],["T_WHITESPACE"," ",83],["T_FUNCTION","function",83],["T_WHITESPACE"," ",83],["T_STRING","getBase64EncodedData",83],"(",["T_VARIABLE","$fileName",83],")",["T_WHITESPACE","\n    ",83],"{",["T_WHITESPACE","\n        ",84],["T_VARIABLE","$filePath",85],["T_WHITESPACE"," ",85],"=",["T_WHITESPACE"," ",85],["T_VARIABLE","$this",85],["T_OBJECT_OPERATOR","->",85],["T_STRING","entityTypeCode",85],["T_WHITESPACE"," ",85],".",["T_WHITESPACE"," ",85],["T_CONSTANT_ENCAPSED_STRING","'\/'",85],["T_WHITESPACE"," ",85],".",["T_WHITESPACE"," ",85],["T_STRING","ltrim",85],"(",["T_VARIABLE","$fileName",85],",",["T_WHITESPACE"," ",85],["T_CONSTANT_ENCAPSED_STRING","'\/'",85],")",";",["T_WHITESPACE","\n\n        ",85],["T_VARIABLE","$fileContent",87],["T_WHITESPACE"," ",87],"=",["T_WHITESPACE"," ",87],["T_VARIABLE","$this",87],["T_OBJECT_OPERATOR","->",87],["T_STRING","mediaDirectory",87],["T_OBJECT_OPERATOR","->",87],["T_STRING","readFile",87],"(",["T_VARIABLE","$filePath",87],")",";",["T_WHITESPACE","\n\n        ",87],["T_VARIABLE","$encodedContent",89],["T_WHITESPACE"," ",89],"=",["T_WHITESPACE"," ",89],["T_STRING","base64_encode",89],"(",["T_VARIABLE","$fileContent",89],")",";",["T_WHITESPACE","\n        ",89],["T_RETURN","return",90],["T_WHITESPACE"," ",90],["T_VARIABLE","$encodedContent",90],";",["T_WHITESPACE","\n    ",90],"}",["T_WHITESPACE","\n\n    ",91],["T_DOC_COMMENT","\/**\n     * Get file statistics data\n     *\n     * @param string $fileName\n     * @return array\n     *\/",93],["T_WHITESPACE","\n    ",98],["T_PUBLIC","public",99],["T_WHITESPACE"," ",99],["T_FUNCTION","function",99],["T_WHITESPACE"," ",99],["T_STRING","getStat",99],"(",["T_VARIABLE","$fileName",99],")",["T_WHITESPACE","\n    ",99],"{",["T_WHITESPACE","\n        ",100],["T_VARIABLE","$filePath",101],["T_WHITESPACE"," ",101],"=",["T_WHITESPACE"," ",101],["T_VARIABLE","$this",101],["T_OBJECT_OPERATOR","->",101],["T_STRING","entityTypeCode",101],["T_WHITESPACE"," ",101],".",["T_WHITESPACE"," ",101],["T_CONSTANT_ENCAPSED_STRING","'\/'",101],["T_WHITESPACE"," ",101],".",["T_WHITESPACE"," ",101],["T_STRING","ltrim",101],"(",["T_VARIABLE","$fileName",101],",",["T_WHITESPACE"," ",101],["T_CONSTANT_ENCAPSED_STRING","'\/'",101],")",";",["T_WHITESPACE","\n\n        ",101],["T_VARIABLE","$result",103],["T_WHITESPACE"," ",103],"=",["T_WHITESPACE"," ",103],["T_VARIABLE","$this",103],["T_OBJECT_OPERATOR","->",103],["T_STRING","mediaDirectory",103],["T_OBJECT_OPERATOR","->",103],["T_STRING","stat",103],"(",["T_VARIABLE","$filePath",103],")",";",["T_WHITESPACE","\n        ",103],["T_RETURN","return",104],["T_WHITESPACE"," ",104],["T_VARIABLE","$result",104],";",["T_WHITESPACE","\n    ",104],"}",["T_WHITESPACE","\n\n    ",105],["T_DOC_COMMENT","\/**\n     * Retrieve MIME type of requested file\n     *\n     * @param string $fileName\n     * @return string\n     *\/",107],["T_WHITESPACE","\n    ",112],["T_PUBLIC","public",113],["T_WHITESPACE"," ",113],["T_FUNCTION","function",113],["T_WHITESPACE"," ",113],["T_STRING","getMimeType",113],"(",["T_VARIABLE","$fileName",113],")",["T_WHITESPACE","\n    ",113],"{",["T_WHITESPACE","\n        ",114],["T_VARIABLE","$filePath",115],["T_WHITESPACE"," ",115],"=",["T_WHITESPACE"," ",115],["T_VARIABLE","$this",115],["T_OBJECT_OPERATOR","->",115],["T_STRING","entityTypeCode",115],["T_WHITESPACE"," ",115],".",["T_WHITESPACE"," ",115],["T_CONSTANT_ENCAPSED_STRING","'\/'",115],["T_WHITESPACE"," ",115],".",["T_WHITESPACE"," ",115],["T_STRING","ltrim",115],"(",["T_VARIABLE","$fileName",115],",",["T_WHITESPACE"," ",115],["T_CONSTANT_ENCAPSED_STRING","'\/'",115],")",";",["T_WHITESPACE","\n        ",115],["T_VARIABLE","$absoluteFilePath",116],["T_WHITESPACE"," ",116],"=",["T_WHITESPACE"," ",116],["T_VARIABLE","$this",116],["T_OBJECT_OPERATOR","->",116],["T_STRING","mediaDirectory",116],["T_OBJECT_OPERATOR","->",116],["T_STRING","getAbsolutePath",116],"(",["T_VARIABLE","$filePath",116],")",";",["T_WHITESPACE","\n\n        ",116],["T_VARIABLE","$result",118],["T_WHITESPACE"," ",118],"=",["T_WHITESPACE"," ",118],["T_VARIABLE","$this",118],["T_OBJECT_OPERATOR","->",118],["T_STRING","mime",118],["T_OBJECT_OPERATOR","->",118],["T_STRING","getMimeType",118],"(",["T_VARIABLE","$absoluteFilePath",118],")",";",["T_WHITESPACE","\n        ",118],["T_RETURN","return",119],["T_WHITESPACE"," ",119],["T_VARIABLE","$result",119],";",["T_WHITESPACE","\n    ",119],"}",["T_WHITESPACE","\n\n    ",120],["T_DOC_COMMENT","\/**\n     * Check if the file exists\n     *\n     * @param string $fileName\n     * @return bool\n     *\/",122],["T_WHITESPACE","\n    ",127],["T_PUBLIC","public",128],["T_WHITESPACE"," ",128],["T_FUNCTION","function",128],["T_WHITESPACE"," ",128],["T_STRING","isExist",128],"(",["T_VARIABLE","$fileName",128],")",["T_WHITESPACE","\n    ",128],"{",["T_WHITESPACE","\n        ",129],["T_VARIABLE","$filePath",130],["T_WHITESPACE"," ",130],"=",["T_WHITESPACE"," ",130],["T_VARIABLE","$this",130],["T_OBJECT_OPERATOR","->",130],["T_STRING","entityTypeCode",130],["T_WHITESPACE"," ",130],".",["T_WHITESPACE"," ",130],["T_CONSTANT_ENCAPSED_STRING","'\/'",130],["T_WHITESPACE"," ",130],".",["T_WHITESPACE"," ",130],["T_STRING","ltrim",130],"(",["T_VARIABLE","$fileName",130],",",["T_WHITESPACE"," ",130],["T_CONSTANT_ENCAPSED_STRING","'\/'",130],")",";",["T_WHITESPACE","\n\n        ",130],["T_VARIABLE","$result",132],["T_WHITESPACE"," ",132],"=",["T_WHITESPACE"," ",132],["T_VARIABLE","$this",132],["T_OBJECT_OPERATOR","->",132],["T_STRING","mediaDirectory",132],["T_OBJECT_OPERATOR","->",132],["T_STRING","isExist",132],"(",["T_VARIABLE","$filePath",132],")",";",["T_WHITESPACE","\n        ",132],["T_RETURN","return",133],["T_WHITESPACE"," ",133],["T_VARIABLE","$result",133],";",["T_WHITESPACE","\n    ",133],"}",["T_WHITESPACE","\n\n    ",134],["T_DOC_COMMENT","\/**\n     * Retrieve customer\/index\/viewfile action URL\n     *\n     * @param string $filePath\n     * @param string $type\n     * @return string\n     *\/",136],["T_WHITESPACE","\n    ",142],["T_PUBLIC","public",143],["T_WHITESPACE"," ",143],["T_FUNCTION","function",143],["T_WHITESPACE"," ",143],["T_STRING","getViewUrl",143],"(",["T_VARIABLE","$filePath",143],",",["T_WHITESPACE"," ",143],["T_VARIABLE","$type",143],")",["T_WHITESPACE","\n    ",143],"{",["T_WHITESPACE","\n        ",144],["T_VARIABLE","$viewUrl",145],["T_WHITESPACE"," ",145],"=",["T_WHITESPACE"," ",145],["T_CONSTANT_ENCAPSED_STRING","''",145],";",["T_WHITESPACE","\n\n        ",145],["T_IF","if",147],["T_WHITESPACE"," ",147],"(",["T_VARIABLE","$this",147],["T_OBJECT_OPERATOR","->",147],["T_STRING","entityTypeCode",147],["T_WHITESPACE"," ",147],["T_IS_EQUAL","==",147],["T_WHITESPACE"," ",147],["T_NS_SEPARATOR","\\",147],["T_STRING","Magento",147],["T_NS_SEPARATOR","\\",147],["T_STRING","Customer",147],["T_NS_SEPARATOR","\\",147],["T_STRING","Api",147],["T_NS_SEPARATOR","\\",147],["T_STRING","AddressMetadataInterface",147],["T_DOUBLE_COLON","::",147],["T_STRING","ENTITY_TYPE_ADDRESS",147],")",["T_WHITESPACE"," ",147],"{",["T_WHITESPACE","\n            ",147],["T_VARIABLE","$filePath",148],["T_WHITESPACE"," ",148],"=",["T_WHITESPACE"," ",148],["T_VARIABLE","$this",148],["T_OBJECT_OPERATOR","->",148],["T_STRING","entityTypeCode",148],["T_WHITESPACE"," ",148],".",["T_WHITESPACE"," ",148],["T_CONSTANT_ENCAPSED_STRING","'\/'",148],["T_WHITESPACE"," ",148],".",["T_WHITESPACE"," ",148],["T_STRING","ltrim",148],"(",["T_VARIABLE","$filePath",148],",",["T_WHITESPACE"," ",148],["T_CONSTANT_ENCAPSED_STRING","'\/'",148],")",";",["T_WHITESPACE","\n            ",148],["T_VARIABLE","$viewUrl",149],["T_WHITESPACE"," ",149],"=",["T_WHITESPACE"," ",149],["T_VARIABLE","$this",149],["T_OBJECT_OPERATOR","->",149],["T_STRING","urlBuilder",149],["T_OBJECT_OPERATOR","->",149],["T_STRING","getBaseUrl",149],"(","[",["T_CONSTANT_ENCAPSED_STRING","'_type'",149],["T_WHITESPACE"," ",149],["T_DOUBLE_ARROW","=>",149],["T_WHITESPACE"," ",149],["T_NS_SEPARATOR","\\",149],["T_STRING","Magento",149],["T_NS_SEPARATOR","\\",149],["T_STRING","Framework",149],["T_NS_SEPARATOR","\\",149],["T_STRING","UrlInterface",149],["T_DOUBLE_COLON","::",149],["T_STRING","URL_TYPE_MEDIA",149],"]",")",["T_WHITESPACE","\n                ",149],".",["T_WHITESPACE"," ",150],["T_VARIABLE","$this",150],["T_OBJECT_OPERATOR","->",150],["T_STRING","mediaDirectory",150],["T_OBJECT_OPERATOR","->",150],["T_STRING","getRelativePath",150],"(",["T_VARIABLE","$filePath",150],")",";",["T_WHITESPACE","\n        ",150],"}",["T_WHITESPACE","\n\n        ",151],["T_IF","if",153],["T_WHITESPACE"," ",153],"(",["T_VARIABLE","$this",153],["T_OBJECT_OPERATOR","->",153],["T_STRING","entityTypeCode",153],["T_WHITESPACE"," ",153],["T_IS_EQUAL","==",153],["T_WHITESPACE"," ",153],["T_NS_SEPARATOR","\\",153],["T_STRING","Magento",153],["T_NS_SEPARATOR","\\",153],["T_STRING","Customer",153],["T_NS_SEPARATOR","\\",153],["T_STRING","Api",153],["T_NS_SEPARATOR","\\",153],["T_STRING","CustomerMetadataInterface",153],["T_DOUBLE_COLON","::",153],["T_STRING","ENTITY_TYPE_CUSTOMER",153],")",["T_WHITESPACE"," ",153],"{",["T_WHITESPACE","\n            ",153],["T_VARIABLE","$viewUrl",154],["T_WHITESPACE"," ",154],"=",["T_WHITESPACE"," ",154],["T_VARIABLE","$this",154],["T_OBJECT_OPERATOR","->",154],["T_STRING","urlBuilder",154],["T_OBJECT_OPERATOR","->",154],["T_STRING","getUrl",154],"(",["T_WHITESPACE","\n                ",154],["T_CONSTANT_ENCAPSED_STRING","'customer\/index\/viewfile'",155],",",["T_WHITESPACE","\n                ",155],"[",["T_VARIABLE","$type",156],["T_WHITESPACE"," ",156],["T_DOUBLE_ARROW","=>",156],["T_WHITESPACE"," ",156],["T_VARIABLE","$this",156],["T_OBJECT_OPERATOR","->",156],["T_STRING","urlEncoder",156],["T_OBJECT_OPERATOR","->",156],["T_STRING","encode",156],"(",["T_STRING","ltrim",156],"(",["T_VARIABLE","$filePath",156],",",["T_WHITESPACE"," ",156],["T_CONSTANT_ENCAPSED_STRING","'\/'",156],")",")","]",["T_WHITESPACE","\n            ",156],")",";",["T_WHITESPACE","\n        ",157],"}",["T_WHITESPACE","\n\n        ",158],["T_RETURN","return",160],["T_WHITESPACE"," ",160],["T_VARIABLE","$viewUrl",160],";",["T_WHITESPACE","\n    ",160],"}",["T_WHITESPACE","\n\n    ",161],["T_DOC_COMMENT","\/**\n     * Save uploaded file to temporary directory\n     *\n     * @param string $fileId\n     * @return \\string[]\n     * @throws \\Magento\\Framework\\Exception\\LocalizedException\n     *\/",163],["T_WHITESPACE","\n    ",169],["T_PUBLIC","public",170],["T_WHITESPACE"," ",170],["T_FUNCTION","function",170],["T_WHITESPACE"," ",170],["T_STRING","saveTemporaryFile",170],"(",["T_VARIABLE","$fileId",170],")",["T_WHITESPACE","\n    ",170],"{",["T_WHITESPACE","\n        ",171],["T_DOC_COMMENT","\/** @var \\Magento\\MediaStorage\\Model\\File\\Uploader $uploader *\/",172],["T_WHITESPACE","\n        ",172],["T_VARIABLE","$uploader",173],["T_WHITESPACE"," ",173],"=",["T_WHITESPACE"," ",173],["T_VARIABLE","$this",173],["T_OBJECT_OPERATOR","->",173],["T_STRING","uploaderFactory",173],["T_OBJECT_OPERATOR","->",173],["T_STRING","create",173],"(","[",["T_CONSTANT_ENCAPSED_STRING","'fileId'",173],["T_WHITESPACE"," ",173],["T_DOUBLE_ARROW","=>",173],["T_WHITESPACE"," ",173],["T_VARIABLE","$fileId",173],"]",")",";",["T_WHITESPACE","\n        ",173],["T_VARIABLE","$uploader",174],["T_OBJECT_OPERATOR","->",174],["T_STRING","setFilesDispersion",174],"(",["T_STRING","false",174],")",";",["T_WHITESPACE","\n        ",174],["T_VARIABLE","$uploader",175],["T_OBJECT_OPERATOR","->",175],["T_STRING","setFilenamesCaseSensitivity",175],"(",["T_STRING","false",175],")",";",["T_WHITESPACE","\n        ",175],["T_VARIABLE","$uploader",176],["T_OBJECT_OPERATOR","->",176],["T_STRING","setAllowRenameFiles",176],"(",["T_STRING","true",176],")",";",["T_WHITESPACE","\n        ",176],["T_VARIABLE","$uploader",177],["T_OBJECT_OPERATOR","->",177],["T_STRING","setAllowedExtensions",177],"(",["T_VARIABLE","$this",177],["T_OBJECT_OPERATOR","->",177],["T_STRING","allowedExtensions",177],")",";",["T_WHITESPACE","\n\n        ",177],["T_VARIABLE","$path",179],["T_WHITESPACE"," ",179],"=",["T_WHITESPACE"," ",179],["T_VARIABLE","$this",179],["T_OBJECT_OPERATOR","->",179],["T_STRING","mediaDirectory",179],["T_OBJECT_OPERATOR","->",179],["T_STRING","getAbsolutePath",179],"(",["T_WHITESPACE","\n            ",179],["T_VARIABLE","$this",180],["T_OBJECT_OPERATOR","->",180],["T_STRING","entityTypeCode",180],["T_WHITESPACE"," ",180],".",["T_WHITESPACE"," ",180],["T_CONSTANT_ENCAPSED_STRING","'\/'",180],["T_WHITESPACE"," ",180],".",["T_WHITESPACE"," ",180],["T_STRING","self",180],["T_DOUBLE_COLON","::",180],["T_STRING","TMP_DIR",180],["T_WHITESPACE","\n        ",180],")",";",["T_WHITESPACE","\n\n        ",181],["T_VARIABLE","$result",183],["T_WHITESPACE"," ",183],"=",["T_WHITESPACE"," ",183],["T_VARIABLE","$uploader",183],["T_OBJECT_OPERATOR","->",183],["T_STRING","save",183],"(",["T_VARIABLE","$path",183],")",";",["T_WHITESPACE","\n        ",183],["T_IF","if",184],["T_WHITESPACE"," ",184],"(","!",["T_VARIABLE","$result",184],")",["T_WHITESPACE"," ",184],"{",["T_WHITESPACE","\n            ",184],["T_THROW","throw",185],["T_WHITESPACE"," ",185],["T_NEW","new",185],["T_WHITESPACE"," ",185],["T_NS_SEPARATOR","\\",185],["T_STRING","Magento",185],["T_NS_SEPARATOR","\\",185],["T_STRING","Framework",185],["T_NS_SEPARATOR","\\",185],["T_STRING","Exception",185],["T_NS_SEPARATOR","\\",185],["T_STRING","LocalizedException",185],"(",["T_WHITESPACE","\n                ",185],["T_STRING","__",186],"(",["T_CONSTANT_ENCAPSED_STRING","'File can not be saved to the destination folder.'",186],")",["T_WHITESPACE","\n            ",186],")",";",["T_WHITESPACE","\n        ",187],"}",["T_WHITESPACE","\n\n        ",188],["T_RETURN","return",190],["T_WHITESPACE"," ",190],["T_VARIABLE","$result",190],";",["T_WHITESPACE","\n    ",190],"}",["T_WHITESPACE","\n\n    ",191],["T_DOC_COMMENT","\/**\n     * Move file from temporary directory into base directory\n     *\n     * @param string $fileName\n     * @return string\n     * @throws \\Magento\\Framework\\Exception\\LocalizedException\n     *\/",193],["T_WHITESPACE","\n    ",199],["T_PUBLIC","public",200],["T_WHITESPACE"," ",200],["T_FUNCTION","function",200],["T_WHITESPACE"," ",200],["T_STRING","moveTemporaryFile",200],"(",["T_VARIABLE","$fileName",200],")",["T_WHITESPACE","\n    ",200],"{",["T_WHITESPACE","\n        ",201],["T_VARIABLE","$fileName",202],["T_WHITESPACE"," ",202],"=",["T_WHITESPACE"," ",202],["T_STRING","ltrim",202],"(",["T_VARIABLE","$fileName",202],",",["T_WHITESPACE"," ",202],["T_CONSTANT_ENCAPSED_STRING","'\/'",202],")",";",["T_WHITESPACE","\n\n        ",202],["T_VARIABLE","$dispersionPath",204],["T_WHITESPACE"," ",204],"=",["T_WHITESPACE"," ",204],["T_NS_SEPARATOR","\\",204],["T_STRING","Magento",204],["T_NS_SEPARATOR","\\",204],["T_STRING","MediaStorage",204],["T_NS_SEPARATOR","\\",204],["T_STRING","Model",204],["T_NS_SEPARATOR","\\",204],["T_STRING","File",204],["T_NS_SEPARATOR","\\",204],["T_STRING","Uploader",204],["T_DOUBLE_COLON","::",204],["T_STRING","getDispretionPath",204],"(",["T_VARIABLE","$fileName",204],")",";",["T_WHITESPACE","\n        ",204],["T_VARIABLE","$destinationPath",205],["T_WHITESPACE"," ",205],"=",["T_WHITESPACE"," ",205],["T_VARIABLE","$this",205],["T_OBJECT_OPERATOR","->",205],["T_STRING","entityTypeCode",205],["T_WHITESPACE"," ",205],".",["T_WHITESPACE"," ",205],["T_VARIABLE","$dispersionPath",205],";",["T_WHITESPACE","\n\n        ",205],["T_IF","if",207],["T_WHITESPACE"," ",207],"(","!",["T_VARIABLE","$this",207],["T_OBJECT_OPERATOR","->",207],["T_STRING","mediaDirectory",207],["T_OBJECT_OPERATOR","->",207],["T_STRING","create",207],"(",["T_VARIABLE","$destinationPath",207],")",")",["T_WHITESPACE"," ",207],"{",["T_WHITESPACE","\n            ",207],["T_THROW","throw",208],["T_WHITESPACE"," ",208],["T_NEW","new",208],["T_WHITESPACE"," ",208],["T_NS_SEPARATOR","\\",208],["T_STRING","Magento",208],["T_NS_SEPARATOR","\\",208],["T_STRING","Framework",208],["T_NS_SEPARATOR","\\",208],["T_STRING","Exception",208],["T_NS_SEPARATOR","\\",208],["T_STRING","LocalizedException",208],"(",["T_WHITESPACE","\n                ",208],["T_STRING","__",209],"(",["T_CONSTANT_ENCAPSED_STRING","'Unable to create directory %1.'",209],",",["T_WHITESPACE"," ",209],["T_VARIABLE","$destinationPath",209],")",["T_WHITESPACE","\n            ",209],")",";",["T_WHITESPACE","\n        ",210],"}",["T_WHITESPACE","\n\n        ",211],["T_IF","if",213],["T_WHITESPACE"," ",213],"(","!",["T_VARIABLE","$this",213],["T_OBJECT_OPERATOR","->",213],["T_STRING","mediaDirectory",213],["T_OBJECT_OPERATOR","->",213],["T_STRING","isWritable",213],"(",["T_VARIABLE","$destinationPath",213],")",")",["T_WHITESPACE"," ",213],"{",["T_WHITESPACE","\n            ",213],["T_THROW","throw",214],["T_WHITESPACE"," ",214],["T_NEW","new",214],["T_WHITESPACE"," ",214],["T_NS_SEPARATOR","\\",214],["T_STRING","Magento",214],["T_NS_SEPARATOR","\\",214],["T_STRING","Framework",214],["T_NS_SEPARATOR","\\",214],["T_STRING","Exception",214],["T_NS_SEPARATOR","\\",214],["T_STRING","LocalizedException",214],"(",["T_WHITESPACE","\n                ",214],["T_STRING","__",215],"(",["T_CONSTANT_ENCAPSED_STRING","'Destination folder is not writable or does not exists.'",215],")",["T_WHITESPACE","\n            ",215],")",";",["T_WHITESPACE","\n        ",216],"}",["T_WHITESPACE","\n\n        ",217],["T_VARIABLE","$destinationFileName",219],["T_WHITESPACE"," ",219],"=",["T_WHITESPACE"," ",219],["T_NS_SEPARATOR","\\",219],["T_STRING","Magento",219],["T_NS_SEPARATOR","\\",219],["T_STRING","MediaStorage",219],["T_NS_SEPARATOR","\\",219],["T_STRING","Model",219],["T_NS_SEPARATOR","\\",219],["T_STRING","File",219],["T_NS_SEPARATOR","\\",219],["T_STRING","Uploader",219],["T_DOUBLE_COLON","::",219],["T_STRING","getNewFileName",219],"(",["T_WHITESPACE","\n            ",219],["T_VARIABLE","$this",220],["T_OBJECT_OPERATOR","->",220],["T_STRING","mediaDirectory",220],["T_OBJECT_OPERATOR","->",220],["T_STRING","getAbsolutePath",220],"(",["T_VARIABLE","$destinationPath",220],")",["T_WHITESPACE"," ",220],".",["T_WHITESPACE"," ",220],["T_CONSTANT_ENCAPSED_STRING","'\/'",220],["T_WHITESPACE"," ",220],".",["T_WHITESPACE"," ",220],["T_VARIABLE","$fileName",220],["T_WHITESPACE","\n        ",220],")",";",["T_WHITESPACE","\n\n        ",221],["T_TRY","try",223],["T_WHITESPACE"," ",223],"{",["T_WHITESPACE","\n            ",223],["T_VARIABLE","$this",224],["T_OBJECT_OPERATOR","->",224],["T_STRING","mediaDirectory",224],["T_OBJECT_OPERATOR","->",224],["T_STRING","renameFile",224],"(",["T_WHITESPACE","\n                ",224],["T_VARIABLE","$this",225],["T_OBJECT_OPERATOR","->",225],["T_STRING","entityTypeCode",225],["T_WHITESPACE"," ",225],".",["T_WHITESPACE"," ",225],["T_CONSTANT_ENCAPSED_STRING","'\/'",225],["T_WHITESPACE"," ",225],".",["T_WHITESPACE"," ",225],["T_STRING","self",225],["T_DOUBLE_COLON","::",225],["T_STRING","TMP_DIR",225],["T_WHITESPACE"," ",225],".",["T_WHITESPACE"," ",225],["T_CONSTANT_ENCAPSED_STRING","'\/'",225],["T_WHITESPACE"," ",225],".",["T_WHITESPACE"," ",225],["T_VARIABLE","$fileName",225],",",["T_WHITESPACE","\n                ",225],["T_VARIABLE","$destinationPath",226],["T_WHITESPACE"," ",226],".",["T_WHITESPACE"," ",226],["T_CONSTANT_ENCAPSED_STRING","'\/'",226],["T_WHITESPACE"," ",226],".",["T_WHITESPACE"," ",226],["T_VARIABLE","$destinationFileName",226],["T_WHITESPACE","\n            ",226],")",";",["T_WHITESPACE","\n        ",227],"}",["T_WHITESPACE"," ",228],["T_CATCH","catch",228],["T_WHITESPACE"," ",228],"(",["T_NS_SEPARATOR","\\",228],["T_STRING","Exception",228],["T_WHITESPACE"," ",228],["T_VARIABLE","$e",228],")",["T_WHITESPACE"," ",228],"{",["T_WHITESPACE","\n            ",228],["T_THROW","throw",229],["T_WHITESPACE"," ",229],["T_NEW","new",229],["T_WHITESPACE"," ",229],["T_NS_SEPARATOR","\\",229],["T_STRING","Magento",229],["T_NS_SEPARATOR","\\",229],["T_STRING","Framework",229],["T_NS_SEPARATOR","\\",229],["T_STRING","Exception",229],["T_NS_SEPARATOR","\\",229],["T_STRING","LocalizedException",229],"(",["T_WHITESPACE","\n                ",229],["T_STRING","__",230],"(",["T_CONSTANT_ENCAPSED_STRING","'Something went wrong while saving the file.'",230],")",["T_WHITESPACE","\n            ",230],")",";",["T_WHITESPACE","\n        ",231],"}",["T_WHITESPACE","\n\n        ",232],["T_VARIABLE","$fileName",234],["T_WHITESPACE"," ",234],"=",["T_WHITESPACE"," ",234],["T_VARIABLE","$dispersionPath",234],["T_WHITESPACE"," ",234],".",["T_WHITESPACE"," ",234],["T_CONSTANT_ENCAPSED_STRING","'\/'",234],["T_WHITESPACE"," ",234],".",["T_WHITESPACE"," ",234],["T_VARIABLE","$fileName",234],";",["T_WHITESPACE","\n        ",234],["T_RETURN","return",235],["T_WHITESPACE"," ",235],["T_VARIABLE","$fileName",235],";",["T_WHITESPACE","\n    ",235],"}",["T_WHITESPACE","\n\n    ",236],["T_DOC_COMMENT","\/**\n     * Remove uploaded file\n     *\n     * @param string $fileName\n     * @return bool\n     *\/",238],["T_WHITESPACE","\n    ",243],["T_PUBLIC","public",244],["T_WHITESPACE"," ",244],["T_FUNCTION","function",244],["T_WHITESPACE"," ",244],["T_STRING","removeUploadedFile",244],"(",["T_VARIABLE","$fileName",244],")",["T_WHITESPACE","\n    ",244],"{",["T_WHITESPACE","\n        ",245],["T_VARIABLE","$filePath",246],["T_WHITESPACE"," ",246],"=",["T_WHITESPACE"," ",246],["T_VARIABLE","$this",246],["T_OBJECT_OPERATOR","->",246],["T_STRING","entityTypeCode",246],["T_WHITESPACE"," ",246],".",["T_WHITESPACE"," ",246],["T_CONSTANT_ENCAPSED_STRING","'\/'",246],["T_WHITESPACE"," ",246],".",["T_WHITESPACE"," ",246],["T_STRING","ltrim",246],"(",["T_VARIABLE","$fileName",246],",",["T_WHITESPACE"," ",246],["T_CONSTANT_ENCAPSED_STRING","'\/'",246],")",";",["T_WHITESPACE","\n\n        ",246],["T_VARIABLE","$result",248],["T_WHITESPACE"," ",248],"=",["T_WHITESPACE"," ",248],["T_VARIABLE","$this",248],["T_OBJECT_OPERATOR","->",248],["T_STRING","mediaDirectory",248],["T_OBJECT_OPERATOR","->",248],["T_STRING","delete",248],"(",["T_VARIABLE","$filePath",248],")",";",["T_WHITESPACE","\n        ",248],["T_RETURN","return",249],["T_WHITESPACE"," ",249],["T_VARIABLE","$result",249],";",["T_WHITESPACE","\n    ",249],"}",["T_WHITESPACE","\n",250],"}",["T_WHITESPACE","\n",251]]
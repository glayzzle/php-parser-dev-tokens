[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n *\n * Copyright \u00c2\u00a9 2013-2017 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n *\/",2],["T_WHITESPACE","\n",6],["T_NAMESPACE","namespace",7],["T_WHITESPACE"," ",7],["T_STRING","Magento",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Customer",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Controller",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Account",7],";",["T_WHITESPACE","\n\n",7],["T_USE","use",9],["T_WHITESPACE"," ",9],["T_STRING","Magento",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Customer",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Model",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Url",9],";",["T_WHITESPACE","\n",9],["T_USE","use",10],["T_WHITESPACE"," ",10],["T_STRING","Magento",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Framework",10],["T_NS_SEPARATOR","\\",10],["T_STRING","App",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Action",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Context",10],";",["T_WHITESPACE","\n",10],["T_USE","use",11],["T_WHITESPACE"," ",11],["T_STRING","Magento",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Customer",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Model",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Session",11],";",["T_WHITESPACE","\n",11],["T_USE","use",12],["T_WHITESPACE"," ",12],["T_STRING","Magento",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Framework",12],["T_NS_SEPARATOR","\\",12],["T_STRING","App",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Config",12],["T_NS_SEPARATOR","\\",12],["T_STRING","ScopeConfigInterface",12],";",["T_WHITESPACE","\n",12],["T_USE","use",13],["T_WHITESPACE"," ",13],["T_STRING","Magento",13],["T_NS_SEPARATOR","\\",13],["T_STRING","Store",13],["T_NS_SEPARATOR","\\",13],["T_STRING","Model",13],["T_NS_SEPARATOR","\\",13],["T_STRING","StoreManagerInterface",13],";",["T_WHITESPACE","\n",13],["T_USE","use",14],["T_WHITESPACE"," ",14],["T_STRING","Magento",14],["T_NS_SEPARATOR","\\",14],["T_STRING","Customer",14],["T_NS_SEPARATOR","\\",14],["T_STRING","Api",14],["T_NS_SEPARATOR","\\",14],["T_STRING","AccountManagementInterface",14],";",["T_WHITESPACE","\n",14],["T_USE","use",15],["T_WHITESPACE"," ",15],["T_STRING","Magento",15],["T_NS_SEPARATOR","\\",15],["T_STRING","Customer",15],["T_NS_SEPARATOR","\\",15],["T_STRING","Api",15],["T_NS_SEPARATOR","\\",15],["T_STRING","CustomerRepositoryInterface",15],";",["T_WHITESPACE","\n",15],["T_USE","use",16],["T_WHITESPACE"," ",16],["T_STRING","Magento",16],["T_NS_SEPARATOR","\\",16],["T_STRING","Customer",16],["T_NS_SEPARATOR","\\",16],["T_STRING","Helper",16],["T_NS_SEPARATOR","\\",16],["T_STRING","Address",16],";",["T_WHITESPACE","\n",16],["T_USE","use",17],["T_WHITESPACE"," ",17],["T_STRING","Magento",17],["T_NS_SEPARATOR","\\",17],["T_STRING","Framework",17],["T_NS_SEPARATOR","\\",17],["T_STRING","UrlFactory",17],";",["T_WHITESPACE","\n",17],["T_USE","use",18],["T_WHITESPACE"," ",18],["T_STRING","Magento",18],["T_NS_SEPARATOR","\\",18],["T_STRING","Framework",18],["T_NS_SEPARATOR","\\",18],["T_STRING","Exception",18],["T_NS_SEPARATOR","\\",18],["T_STRING","StateException",18],";",["T_WHITESPACE","\n",18],["T_USE","use",19],["T_WHITESPACE"," ",19],["T_STRING","Magento",19],["T_NS_SEPARATOR","\\",19],["T_STRING","Store",19],["T_NS_SEPARATOR","\\",19],["T_STRING","Model",19],["T_NS_SEPARATOR","\\",19],["T_STRING","ScopeInterface",19],";",["T_WHITESPACE","\n",19],["T_USE","use",20],["T_WHITESPACE"," ",20],["T_STRING","Magento",20],["T_NS_SEPARATOR","\\",20],["T_STRING","Framework",20],["T_NS_SEPARATOR","\\",20],["T_STRING","Controller",20],["T_NS_SEPARATOR","\\",20],["T_STRING","ResultFactory",20],";",["T_WHITESPACE","\n\n",20],["T_DOC_COMMENT","\/**\n * Class Confirm\n *\n * @SuppressWarnings(PHPMD.CouplingBetweenObjects)\n *\/",22],["T_WHITESPACE","\n",26],["T_CLASS","class",27],["T_WHITESPACE"," ",27],["T_STRING","Confirm",27],["T_WHITESPACE"," ",27],["T_EXTENDS","extends",27],["T_WHITESPACE"," ",27],["T_NS_SEPARATOR","\\",27],["T_STRING","Magento",27],["T_NS_SEPARATOR","\\",27],["T_STRING","Customer",27],["T_NS_SEPARATOR","\\",27],["T_STRING","Controller",27],["T_NS_SEPARATOR","\\",27],["T_STRING","AbstractAccount",27],["T_WHITESPACE","\n",27],"{",["T_WHITESPACE","\n    ",28],["T_DOC_COMMENT","\/** @var ScopeConfigInterface *\/",29],["T_WHITESPACE","\n    ",29],["T_PROTECTED","protected",30],["T_WHITESPACE"," ",30],["T_VARIABLE","$scopeConfig",30],";",["T_WHITESPACE","\n\n    ",30],["T_DOC_COMMENT","\/** @var StoreManagerInterface *\/",32],["T_WHITESPACE","\n    ",32],["T_PROTECTED","protected",33],["T_WHITESPACE"," ",33],["T_VARIABLE","$storeManager",33],";",["T_WHITESPACE","\n\n    ",33],["T_DOC_COMMENT","\/** @var AccountManagementInterface  *\/",35],["T_WHITESPACE","\n    ",35],["T_PROTECTED","protected",36],["T_WHITESPACE"," ",36],["T_VARIABLE","$customerAccountManagement",36],";",["T_WHITESPACE","\n\n    ",36],["T_DOC_COMMENT","\/** @var CustomerRepositoryInterface  *\/",38],["T_WHITESPACE","\n    ",38],["T_PROTECTED","protected",39],["T_WHITESPACE"," ",39],["T_VARIABLE","$customerRepository",39],";",["T_WHITESPACE","\n\n    ",39],["T_DOC_COMMENT","\/** @var Address *\/",41],["T_WHITESPACE","\n    ",41],["T_PROTECTED","protected",42],["T_WHITESPACE"," ",42],["T_VARIABLE","$addressHelper",42],";",["T_WHITESPACE","\n\n    ",42],["T_DOC_COMMENT","\/** @var \\Magento\\Framework\\UrlInterface *\/",44],["T_WHITESPACE","\n    ",44],["T_PROTECTED","protected",45],["T_WHITESPACE"," ",45],["T_VARIABLE","$urlModel",45],";",["T_WHITESPACE","\n\n    ",45],["T_DOC_COMMENT","\/**\n     * @var Session\n     *\/",47],["T_WHITESPACE","\n    ",49],["T_PROTECTED","protected",50],["T_WHITESPACE"," ",50],["T_VARIABLE","$session",50],";",["T_WHITESPACE","\n\n    ",50],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Framework\\Stdlib\\Cookie\\CookieMetadataFactory\n     *\/",52],["T_WHITESPACE","\n    ",54],["T_PRIVATE","private",55],["T_WHITESPACE"," ",55],["T_VARIABLE","$cookieMetadataFactory",55],";",["T_WHITESPACE","\n\n    ",55],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Framework\\Stdlib\\Cookie\\PhpCookieManager\n     *\/",57],["T_WHITESPACE","\n    ",59],["T_PRIVATE","private",60],["T_WHITESPACE"," ",60],["T_VARIABLE","$cookieMetadataManager",60],";",["T_WHITESPACE","\n\n    ",60],["T_DOC_COMMENT","\/**\n     * @param Context $context\n     * @param Session $customerSession\n     * @param ScopeConfigInterface $scopeConfig\n     * @param StoreManagerInterface $storeManager\n     * @param AccountManagementInterface $customerAccountManagement\n     * @param CustomerRepositoryInterface $customerRepository\n     * @param Address $addressHelper\n     * @param UrlFactory $urlFactory\n     *\/",62],["T_WHITESPACE","\n    ",71],["T_PUBLIC","public",72],["T_WHITESPACE"," ",72],["T_FUNCTION","function",72],["T_WHITESPACE"," ",72],["T_STRING","__construct",72],"(",["T_WHITESPACE","\n        ",72],["T_STRING","Context",73],["T_WHITESPACE"," ",73],["T_VARIABLE","$context",73],",",["T_WHITESPACE","\n        ",73],["T_STRING","Session",74],["T_WHITESPACE"," ",74],["T_VARIABLE","$customerSession",74],",",["T_WHITESPACE","\n        ",74],["T_STRING","ScopeConfigInterface",75],["T_WHITESPACE"," ",75],["T_VARIABLE","$scopeConfig",75],",",["T_WHITESPACE","\n        ",75],["T_STRING","StoreManagerInterface",76],["T_WHITESPACE"," ",76],["T_VARIABLE","$storeManager",76],",",["T_WHITESPACE","\n        ",76],["T_STRING","AccountManagementInterface",77],["T_WHITESPACE"," ",77],["T_VARIABLE","$customerAccountManagement",77],",",["T_WHITESPACE","\n        ",77],["T_STRING","CustomerRepositoryInterface",78],["T_WHITESPACE"," ",78],["T_VARIABLE","$customerRepository",78],",",["T_WHITESPACE","\n        ",78],["T_STRING","Address",79],["T_WHITESPACE"," ",79],["T_VARIABLE","$addressHelper",79],",",["T_WHITESPACE","\n        ",79],["T_STRING","UrlFactory",80],["T_WHITESPACE"," ",80],["T_VARIABLE","$urlFactory",80],["T_WHITESPACE","\n    ",80],")",["T_WHITESPACE"," ",81],"{",["T_WHITESPACE","\n        ",81],["T_VARIABLE","$this",82],["T_OBJECT_OPERATOR","->",82],["T_STRING","session",82],["T_WHITESPACE"," ",82],"=",["T_WHITESPACE"," ",82],["T_VARIABLE","$customerSession",82],";",["T_WHITESPACE","\n        ",82],["T_VARIABLE","$this",83],["T_OBJECT_OPERATOR","->",83],["T_STRING","scopeConfig",83],["T_WHITESPACE"," ",83],"=",["T_WHITESPACE"," ",83],["T_VARIABLE","$scopeConfig",83],";",["T_WHITESPACE","\n        ",83],["T_VARIABLE","$this",84],["T_OBJECT_OPERATOR","->",84],["T_STRING","storeManager",84],["T_WHITESPACE"," ",84],"=",["T_WHITESPACE"," ",84],["T_VARIABLE","$storeManager",84],";",["T_WHITESPACE","\n        ",84],["T_VARIABLE","$this",85],["T_OBJECT_OPERATOR","->",85],["T_STRING","customerAccountManagement",85],["T_WHITESPACE"," ",85],"=",["T_WHITESPACE"," ",85],["T_VARIABLE","$customerAccountManagement",85],";",["T_WHITESPACE","\n        ",85],["T_VARIABLE","$this",86],["T_OBJECT_OPERATOR","->",86],["T_STRING","customerRepository",86],["T_WHITESPACE"," ",86],"=",["T_WHITESPACE"," ",86],["T_VARIABLE","$customerRepository",86],";",["T_WHITESPACE","\n        ",86],["T_VARIABLE","$this",87],["T_OBJECT_OPERATOR","->",87],["T_STRING","addressHelper",87],["T_WHITESPACE"," ",87],"=",["T_WHITESPACE"," ",87],["T_VARIABLE","$addressHelper",87],";",["T_WHITESPACE","\n        ",87],["T_VARIABLE","$this",88],["T_OBJECT_OPERATOR","->",88],["T_STRING","urlModel",88],["T_WHITESPACE"," ",88],"=",["T_WHITESPACE"," ",88],["T_VARIABLE","$urlFactory",88],["T_OBJECT_OPERATOR","->",88],["T_STRING","create",88],"(",")",";",["T_WHITESPACE","\n        ",88],["T_STRING","parent",89],["T_DOUBLE_COLON","::",89],["T_STRING","__construct",89],"(",["T_VARIABLE","$context",89],")",";",["T_WHITESPACE","\n    ",89],"}",["T_WHITESPACE","\n\n    ",90],["T_DOC_COMMENT","\/**\n     * Retrieve cookie manager\n     *\n     * @deprecated\n     * @return \\Magento\\Framework\\Stdlib\\Cookie\\PhpCookieManager\n     *\/",92],["T_WHITESPACE","\n    ",97],["T_PRIVATE","private",98],["T_WHITESPACE"," ",98],["T_FUNCTION","function",98],["T_WHITESPACE"," ",98],["T_STRING","getCookieManager",98],"(",")",["T_WHITESPACE","\n    ",98],"{",["T_WHITESPACE","\n        ",99],["T_IF","if",100],["T_WHITESPACE"," ",100],"(","!",["T_VARIABLE","$this",100],["T_OBJECT_OPERATOR","->",100],["T_STRING","cookieMetadataManager",100],")",["T_WHITESPACE"," ",100],"{",["T_WHITESPACE","\n            ",100],["T_VARIABLE","$this",101],["T_OBJECT_OPERATOR","->",101],["T_STRING","cookieMetadataManager",101],["T_WHITESPACE"," ",101],"=",["T_WHITESPACE"," ",101],["T_NS_SEPARATOR","\\",101],["T_STRING","Magento",101],["T_NS_SEPARATOR","\\",101],["T_STRING","Framework",101],["T_NS_SEPARATOR","\\",101],["T_STRING","App",101],["T_NS_SEPARATOR","\\",101],["T_STRING","ObjectManager",101],["T_DOUBLE_COLON","::",101],["T_STRING","getInstance",101],"(",")",["T_OBJECT_OPERATOR","->",101],["T_STRING","get",101],"(",["T_WHITESPACE","\n                ",101],["T_NS_SEPARATOR","\\",102],["T_STRING","Magento",102],["T_NS_SEPARATOR","\\",102],["T_STRING","Framework",102],["T_NS_SEPARATOR","\\",102],["T_STRING","Stdlib",102],["T_NS_SEPARATOR","\\",102],["T_STRING","Cookie",102],["T_NS_SEPARATOR","\\",102],["T_STRING","PhpCookieManager",102],["T_DOUBLE_COLON","::",102],["T_CLASS","class",102],["T_WHITESPACE","\n            ",102],")",";",["T_WHITESPACE","\n        ",103],"}",["T_WHITESPACE","\n        ",104],["T_RETURN","return",105],["T_WHITESPACE"," ",105],["T_VARIABLE","$this",105],["T_OBJECT_OPERATOR","->",105],["T_STRING","cookieMetadataManager",105],";",["T_WHITESPACE","\n    ",105],"}",["T_WHITESPACE","\n\n    ",106],["T_DOC_COMMENT","\/**\n     * Retrieve cookie metadata factory\n     *\n     * @deprecated\n     * @return \\Magento\\Framework\\Stdlib\\Cookie\\CookieMetadataFactory\n     *\/",108],["T_WHITESPACE","\n    ",113],["T_PRIVATE","private",114],["T_WHITESPACE"," ",114],["T_FUNCTION","function",114],["T_WHITESPACE"," ",114],["T_STRING","getCookieMetadataFactory",114],"(",")",["T_WHITESPACE","\n    ",114],"{",["T_WHITESPACE","\n        ",115],["T_IF","if",116],["T_WHITESPACE"," ",116],"(","!",["T_VARIABLE","$this",116],["T_OBJECT_OPERATOR","->",116],["T_STRING","cookieMetadataFactory",116],")",["T_WHITESPACE"," ",116],"{",["T_WHITESPACE","\n            ",116],["T_VARIABLE","$this",117],["T_OBJECT_OPERATOR","->",117],["T_STRING","cookieMetadataFactory",117],["T_WHITESPACE"," ",117],"=",["T_WHITESPACE"," ",117],["T_NS_SEPARATOR","\\",117],["T_STRING","Magento",117],["T_NS_SEPARATOR","\\",117],["T_STRING","Framework",117],["T_NS_SEPARATOR","\\",117],["T_STRING","App",117],["T_NS_SEPARATOR","\\",117],["T_STRING","ObjectManager",117],["T_DOUBLE_COLON","::",117],["T_STRING","getInstance",117],"(",")",["T_OBJECT_OPERATOR","->",117],["T_STRING","get",117],"(",["T_WHITESPACE","\n                ",117],["T_NS_SEPARATOR","\\",118],["T_STRING","Magento",118],["T_NS_SEPARATOR","\\",118],["T_STRING","Framework",118],["T_NS_SEPARATOR","\\",118],["T_STRING","Stdlib",118],["T_NS_SEPARATOR","\\",118],["T_STRING","Cookie",118],["T_NS_SEPARATOR","\\",118],["T_STRING","CookieMetadataFactory",118],["T_DOUBLE_COLON","::",118],["T_CLASS","class",118],["T_WHITESPACE","\n            ",118],")",";",["T_WHITESPACE","\n        ",119],"}",["T_WHITESPACE","\n        ",120],["T_RETURN","return",121],["T_WHITESPACE"," ",121],["T_VARIABLE","$this",121],["T_OBJECT_OPERATOR","->",121],["T_STRING","cookieMetadataFactory",121],";",["T_WHITESPACE","\n    ",121],"}",["T_WHITESPACE","\n\n    ",122],["T_DOC_COMMENT","\/**\n     * Confirm customer account by id and confirmation key\n     *\n     * @return \\Magento\\Framework\\Controller\\Result\\Redirect\n     *\/",124],["T_WHITESPACE","\n    ",128],["T_PUBLIC","public",129],["T_WHITESPACE"," ",129],["T_FUNCTION","function",129],["T_WHITESPACE"," ",129],["T_STRING","execute",129],"(",")",["T_WHITESPACE","\n    ",129],"{",["T_WHITESPACE","\n        ",130],["T_DOC_COMMENT","\/** @var \\Magento\\Framework\\Controller\\Result\\Redirect $resultRedirect *\/",131],["T_WHITESPACE","\n        ",131],["T_VARIABLE","$resultRedirect",132],["T_WHITESPACE"," ",132],"=",["T_WHITESPACE"," ",132],["T_VARIABLE","$this",132],["T_OBJECT_OPERATOR","->",132],["T_STRING","resultFactory",132],["T_OBJECT_OPERATOR","->",132],["T_STRING","create",132],"(",["T_STRING","ResultFactory",132],["T_DOUBLE_COLON","::",132],["T_STRING","TYPE_REDIRECT",132],")",";",["T_WHITESPACE","\n\n        ",132],["T_IF","if",134],["T_WHITESPACE"," ",134],"(",["T_VARIABLE","$this",134],["T_OBJECT_OPERATOR","->",134],["T_STRING","session",134],["T_OBJECT_OPERATOR","->",134],["T_STRING","isLoggedIn",134],"(",")",")",["T_WHITESPACE"," ",134],"{",["T_WHITESPACE","\n            ",134],["T_VARIABLE","$resultRedirect",135],["T_OBJECT_OPERATOR","->",135],["T_STRING","setPath",135],"(",["T_CONSTANT_ENCAPSED_STRING","'*\/*\/'",135],")",";",["T_WHITESPACE","\n            ",135],["T_RETURN","return",136],["T_WHITESPACE"," ",136],["T_VARIABLE","$resultRedirect",136],";",["T_WHITESPACE","\n        ",136],"}",["T_WHITESPACE","\n        ",137],["T_TRY","try",138],["T_WHITESPACE"," ",138],"{",["T_WHITESPACE","\n            ",138],["T_VARIABLE","$customerId",139],["T_WHITESPACE"," ",139],"=",["T_WHITESPACE"," ",139],["T_VARIABLE","$this",139],["T_OBJECT_OPERATOR","->",139],["T_STRING","getRequest",139],"(",")",["T_OBJECT_OPERATOR","->",139],["T_STRING","getParam",139],"(",["T_CONSTANT_ENCAPSED_STRING","'id'",139],",",["T_WHITESPACE"," ",139],["T_STRING","false",139],")",";",["T_WHITESPACE","\n            ",139],["T_VARIABLE","$key",140],["T_WHITESPACE"," ",140],"=",["T_WHITESPACE"," ",140],["T_VARIABLE","$this",140],["T_OBJECT_OPERATOR","->",140],["T_STRING","getRequest",140],"(",")",["T_OBJECT_OPERATOR","->",140],["T_STRING","getParam",140],"(",["T_CONSTANT_ENCAPSED_STRING","'key'",140],",",["T_WHITESPACE"," ",140],["T_STRING","false",140],")",";",["T_WHITESPACE","\n            ",140],["T_IF","if",141],["T_WHITESPACE"," ",141],"(",["T_EMPTY","empty",141],"(",["T_VARIABLE","$customerId",141],")",["T_WHITESPACE"," ",141],["T_BOOLEAN_OR","||",141],["T_WHITESPACE"," ",141],["T_EMPTY","empty",141],"(",["T_VARIABLE","$key",141],")",")",["T_WHITESPACE"," ",141],"{",["T_WHITESPACE","\n                ",141],["T_THROW","throw",142],["T_WHITESPACE"," ",142],["T_NEW","new",142],["T_WHITESPACE"," ",142],["T_NS_SEPARATOR","\\",142],["T_STRING","Exception",142],"(",["T_STRING","__",142],"(",["T_CONSTANT_ENCAPSED_STRING","'Bad request.'",142],")",")",";",["T_WHITESPACE","\n            ",142],"}",["T_WHITESPACE","\n\n            ",143],["T_COMMENT","\/\/ log in and send greeting email\n",145],["T_WHITESPACE","            ",146],["T_VARIABLE","$customerEmail",146],["T_WHITESPACE"," ",146],"=",["T_WHITESPACE"," ",146],["T_VARIABLE","$this",146],["T_OBJECT_OPERATOR","->",146],["T_STRING","customerRepository",146],["T_OBJECT_OPERATOR","->",146],["T_STRING","getById",146],"(",["T_VARIABLE","$customerId",146],")",["T_OBJECT_OPERATOR","->",146],["T_STRING","getEmail",146],"(",")",";",["T_WHITESPACE","\n            ",146],["T_VARIABLE","$customer",147],["T_WHITESPACE"," ",147],"=",["T_WHITESPACE"," ",147],["T_VARIABLE","$this",147],["T_OBJECT_OPERATOR","->",147],["T_STRING","customerAccountManagement",147],["T_OBJECT_OPERATOR","->",147],["T_STRING","activate",147],"(",["T_VARIABLE","$customerEmail",147],",",["T_WHITESPACE"," ",147],["T_VARIABLE","$key",147],")",";",["T_WHITESPACE","\n            ",147],["T_VARIABLE","$this",148],["T_OBJECT_OPERATOR","->",148],["T_STRING","session",148],["T_OBJECT_OPERATOR","->",148],["T_STRING","setCustomerDataAsLoggedIn",148],"(",["T_VARIABLE","$customer",148],")",";",["T_WHITESPACE","\n            ",148],["T_IF","if",149],["T_WHITESPACE"," ",149],"(",["T_VARIABLE","$this",149],["T_OBJECT_OPERATOR","->",149],["T_STRING","getCookieManager",149],"(",")",["T_OBJECT_OPERATOR","->",149],["T_STRING","getCookie",149],"(",["T_CONSTANT_ENCAPSED_STRING","'mage-cache-sessid'",149],")",")",["T_WHITESPACE"," ",149],"{",["T_WHITESPACE","\n                ",149],["T_VARIABLE","$metadata",150],["T_WHITESPACE"," ",150],"=",["T_WHITESPACE"," ",150],["T_VARIABLE","$this",150],["T_OBJECT_OPERATOR","->",150],["T_STRING","getCookieMetadataFactory",150],"(",")",["T_OBJECT_OPERATOR","->",150],["T_STRING","createCookieMetadata",150],"(",")",";",["T_WHITESPACE","\n                ",150],["T_VARIABLE","$metadata",151],["T_OBJECT_OPERATOR","->",151],["T_STRING","setPath",151],"(",["T_CONSTANT_ENCAPSED_STRING","'\/'",151],")",";",["T_WHITESPACE","\n                ",151],["T_VARIABLE","$this",152],["T_OBJECT_OPERATOR","->",152],["T_STRING","getCookieManager",152],"(",")",["T_OBJECT_OPERATOR","->",152],["T_STRING","deleteCookie",152],"(",["T_CONSTANT_ENCAPSED_STRING","'mage-cache-sessid'",152],",",["T_WHITESPACE"," ",152],["T_VARIABLE","$metadata",152],")",";",["T_WHITESPACE","\n            ",152],"}",["T_WHITESPACE","\n            ",153],["T_VARIABLE","$this",154],["T_OBJECT_OPERATOR","->",154],["T_STRING","messageManager",154],["T_OBJECT_OPERATOR","->",154],["T_STRING","addSuccess",154],"(",["T_VARIABLE","$this",154],["T_OBJECT_OPERATOR","->",154],["T_STRING","getSuccessMessage",154],"(",")",")",";",["T_WHITESPACE","\n            ",154],["T_VARIABLE","$resultRedirect",155],["T_OBJECT_OPERATOR","->",155],["T_STRING","setUrl",155],"(",["T_VARIABLE","$this",155],["T_OBJECT_OPERATOR","->",155],["T_STRING","getSuccessRedirect",155],"(",")",")",";",["T_WHITESPACE","\n            ",155],["T_RETURN","return",156],["T_WHITESPACE"," ",156],["T_VARIABLE","$resultRedirect",156],";",["T_WHITESPACE","\n        ",156],"}",["T_WHITESPACE"," ",157],["T_CATCH","catch",157],["T_WHITESPACE"," ",157],"(",["T_STRING","StateException",157],["T_WHITESPACE"," ",157],["T_VARIABLE","$e",157],")",["T_WHITESPACE"," ",157],"{",["T_WHITESPACE","\n            ",157],["T_VARIABLE","$this",158],["T_OBJECT_OPERATOR","->",158],["T_STRING","messageManager",158],["T_OBJECT_OPERATOR","->",158],["T_STRING","addException",158],"(",["T_VARIABLE","$e",158],",",["T_WHITESPACE"," ",158],["T_STRING","__",158],"(",["T_CONSTANT_ENCAPSED_STRING","'This confirmation key is invalid or has expired.'",158],")",")",";",["T_WHITESPACE","\n        ",158],"}",["T_WHITESPACE"," ",159],["T_CATCH","catch",159],["T_WHITESPACE"," ",159],"(",["T_NS_SEPARATOR","\\",159],["T_STRING","Exception",159],["T_WHITESPACE"," ",159],["T_VARIABLE","$e",159],")",["T_WHITESPACE"," ",159],"{",["T_WHITESPACE","\n            ",159],["T_VARIABLE","$this",160],["T_OBJECT_OPERATOR","->",160],["T_STRING","messageManager",160],["T_OBJECT_OPERATOR","->",160],["T_STRING","addException",160],"(",["T_VARIABLE","$e",160],",",["T_WHITESPACE"," ",160],["T_STRING","__",160],"(",["T_CONSTANT_ENCAPSED_STRING","'There was an error confirming the account'",160],")",")",";",["T_WHITESPACE","\n        ",160],"}",["T_WHITESPACE","\n\n        ",161],["T_VARIABLE","$url",163],["T_WHITESPACE"," ",163],"=",["T_WHITESPACE"," ",163],["T_VARIABLE","$this",163],["T_OBJECT_OPERATOR","->",163],["T_STRING","urlModel",163],["T_OBJECT_OPERATOR","->",163],["T_STRING","getUrl",163],"(",["T_CONSTANT_ENCAPSED_STRING","'*\/*\/index'",163],",",["T_WHITESPACE"," ",163],"[",["T_CONSTANT_ENCAPSED_STRING","'_secure'",163],["T_WHITESPACE"," ",163],["T_DOUBLE_ARROW","=>",163],["T_WHITESPACE"," ",163],["T_STRING","true",163],"]",")",";",["T_WHITESPACE","\n        ",163],["T_RETURN","return",164],["T_WHITESPACE"," ",164],["T_VARIABLE","$resultRedirect",164],["T_OBJECT_OPERATOR","->",164],["T_STRING","setUrl",164],"(",["T_VARIABLE","$this",164],["T_OBJECT_OPERATOR","->",164],["T_STRING","_redirect",164],["T_OBJECT_OPERATOR","->",164],["T_STRING","error",164],"(",["T_VARIABLE","$url",164],")",")",";",["T_WHITESPACE","\n    ",164],"}",["T_WHITESPACE","\n\n    ",165],["T_DOC_COMMENT","\/**\n     * Retrieve success message\n     *\n     * @return string\n     *\/",167],["T_WHITESPACE","\n    ",171],["T_PROTECTED","protected",172],["T_WHITESPACE"," ",172],["T_FUNCTION","function",172],["T_WHITESPACE"," ",172],["T_STRING","getSuccessMessage",172],"(",")",["T_WHITESPACE","\n    ",172],"{",["T_WHITESPACE","\n        ",173],["T_IF","if",174],["T_WHITESPACE"," ",174],"(",["T_VARIABLE","$this",174],["T_OBJECT_OPERATOR","->",174],["T_STRING","addressHelper",174],["T_OBJECT_OPERATOR","->",174],["T_STRING","isVatValidationEnabled",174],"(",")",")",["T_WHITESPACE"," ",174],"{",["T_WHITESPACE","\n            ",174],["T_IF","if",175],["T_WHITESPACE"," ",175],"(",["T_VARIABLE","$this",175],["T_OBJECT_OPERATOR","->",175],["T_STRING","addressHelper",175],["T_OBJECT_OPERATOR","->",175],["T_STRING","getTaxCalculationAddressType",175],"(",")",["T_WHITESPACE"," ",175],["T_IS_EQUAL","==",175],["T_WHITESPACE"," ",175],["T_STRING","Address",175],["T_DOUBLE_COLON","::",175],["T_STRING","TYPE_SHIPPING",175],")",["T_WHITESPACE"," ",175],"{",["T_WHITESPACE","\n                ",175],["T_COMMENT","\/\/ @codingStandardsIgnoreStart\n",176],["T_WHITESPACE","                ",177],["T_VARIABLE","$message",177],["T_WHITESPACE"," ",177],"=",["T_WHITESPACE"," ",177],["T_STRING","__",177],"(",["T_WHITESPACE","\n                    ",177],["T_CONSTANT_ENCAPSED_STRING","'If you are a registered VAT customer, please click <a href=\"%1\">here<\/a> to enter your shipping address for proper VAT calculation.'",178],",",["T_WHITESPACE","\n                    ",178],["T_VARIABLE","$this",179],["T_OBJECT_OPERATOR","->",179],["T_STRING","urlModel",179],["T_OBJECT_OPERATOR","->",179],["T_STRING","getUrl",179],"(",["T_CONSTANT_ENCAPSED_STRING","'customer\/address\/edit'",179],")",["T_WHITESPACE","\n                ",179],")",";",["T_WHITESPACE","\n                ",180],["T_COMMENT","\/\/ @codingStandardsIgnoreEnd\n",181],["T_WHITESPACE","            ",182],"}",["T_WHITESPACE"," ",182],["T_ELSE","else",182],["T_WHITESPACE"," ",182],"{",["T_WHITESPACE","\n                ",182],["T_COMMENT","\/\/ @codingStandardsIgnoreStart\n",183],["T_WHITESPACE","                ",184],["T_VARIABLE","$message",184],["T_WHITESPACE"," ",184],"=",["T_WHITESPACE"," ",184],["T_STRING","__",184],"(",["T_WHITESPACE","\n                    ",184],["T_CONSTANT_ENCAPSED_STRING","'If you are a registered VAT customer, please click <a href=\"%1\">here<\/a> to enter your billing address for proper VAT calculation.'",185],",",["T_WHITESPACE","\n                    ",185],["T_VARIABLE","$this",186],["T_OBJECT_OPERATOR","->",186],["T_STRING","urlModel",186],["T_OBJECT_OPERATOR","->",186],["T_STRING","getUrl",186],"(",["T_CONSTANT_ENCAPSED_STRING","'customer\/address\/edit'",186],")",["T_WHITESPACE","\n                ",186],")",";",["T_WHITESPACE","\n                ",187],["T_COMMENT","\/\/ @codingStandardsIgnoreEnd\n",188],["T_WHITESPACE","            ",189],"}",["T_WHITESPACE","\n        ",189],"}",["T_WHITESPACE"," ",190],["T_ELSE","else",190],["T_WHITESPACE"," ",190],"{",["T_WHITESPACE","\n            ",190],["T_VARIABLE","$message",191],["T_WHITESPACE"," ",191],"=",["T_WHITESPACE"," ",191],["T_STRING","__",191],"(",["T_CONSTANT_ENCAPSED_STRING","'Thank you for registering with %1.'",191],",",["T_WHITESPACE"," ",191],["T_VARIABLE","$this",191],["T_OBJECT_OPERATOR","->",191],["T_STRING","storeManager",191],["T_OBJECT_OPERATOR","->",191],["T_STRING","getStore",191],"(",")",["T_OBJECT_OPERATOR","->",191],["T_STRING","getFrontendName",191],"(",")",")",";",["T_WHITESPACE","\n        ",191],"}",["T_WHITESPACE","\n        ",192],["T_RETURN","return",193],["T_WHITESPACE"," ",193],["T_VARIABLE","$message",193],";",["T_WHITESPACE","\n    ",193],"}",["T_WHITESPACE","\n\n    ",194],["T_DOC_COMMENT","\/**\n     * Retrieve success redirect URL\n     *\n     * @return string\n     *\/",196],["T_WHITESPACE","\n    ",200],["T_PROTECTED","protected",201],["T_WHITESPACE"," ",201],["T_FUNCTION","function",201],["T_WHITESPACE"," ",201],["T_STRING","getSuccessRedirect",201],"(",")",["T_WHITESPACE","\n    ",201],"{",["T_WHITESPACE","\n        ",202],["T_VARIABLE","$backUrl",203],["T_WHITESPACE"," ",203],"=",["T_WHITESPACE"," ",203],["T_VARIABLE","$this",203],["T_OBJECT_OPERATOR","->",203],["T_STRING","getRequest",203],"(",")",["T_OBJECT_OPERATOR","->",203],["T_STRING","getParam",203],"(",["T_CONSTANT_ENCAPSED_STRING","'back_url'",203],",",["T_WHITESPACE"," ",203],["T_STRING","false",203],")",";",["T_WHITESPACE","\n        ",203],["T_VARIABLE","$redirectToDashboard",204],["T_WHITESPACE"," ",204],"=",["T_WHITESPACE"," ",204],["T_VARIABLE","$this",204],["T_OBJECT_OPERATOR","->",204],["T_STRING","scopeConfig",204],["T_OBJECT_OPERATOR","->",204],["T_STRING","isSetFlag",204],"(",["T_WHITESPACE","\n            ",204],["T_STRING","Url",205],["T_DOUBLE_COLON","::",205],["T_STRING","XML_PATH_CUSTOMER_STARTUP_REDIRECT_TO_DASHBOARD",205],",",["T_WHITESPACE","\n            ",205],["T_STRING","ScopeInterface",206],["T_DOUBLE_COLON","::",206],["T_STRING","SCOPE_STORE",206],["T_WHITESPACE","\n        ",206],")",";",["T_WHITESPACE","\n        ",207],["T_IF","if",208],["T_WHITESPACE"," ",208],"(","!",["T_VARIABLE","$redirectToDashboard",208],["T_WHITESPACE"," ",208],["T_BOOLEAN_AND","&&",208],["T_WHITESPACE"," ",208],["T_VARIABLE","$this",208],["T_OBJECT_OPERATOR","->",208],["T_STRING","session",208],["T_OBJECT_OPERATOR","->",208],["T_STRING","getBeforeAuthUrl",208],"(",")",")",["T_WHITESPACE"," ",208],"{",["T_WHITESPACE","\n            ",208],["T_VARIABLE","$successUrl",209],["T_WHITESPACE"," ",209],"=",["T_WHITESPACE"," ",209],["T_VARIABLE","$this",209],["T_OBJECT_OPERATOR","->",209],["T_STRING","session",209],["T_OBJECT_OPERATOR","->",209],["T_STRING","getBeforeAuthUrl",209],"(",["T_STRING","true",209],")",";",["T_WHITESPACE","\n        ",209],"}",["T_WHITESPACE"," ",210],["T_ELSE","else",210],["T_WHITESPACE"," ",210],"{",["T_WHITESPACE","\n            ",210],["T_VARIABLE","$successUrl",211],["T_WHITESPACE"," ",211],"=",["T_WHITESPACE"," ",211],["T_VARIABLE","$this",211],["T_OBJECT_OPERATOR","->",211],["T_STRING","urlModel",211],["T_OBJECT_OPERATOR","->",211],["T_STRING","getUrl",211],"(",["T_CONSTANT_ENCAPSED_STRING","'*\/*\/index'",211],",",["T_WHITESPACE"," ",211],"[",["T_CONSTANT_ENCAPSED_STRING","'_secure'",211],["T_WHITESPACE"," ",211],["T_DOUBLE_ARROW","=>",211],["T_WHITESPACE"," ",211],["T_STRING","true",211],"]",")",";",["T_WHITESPACE","\n        ",211],"}",["T_WHITESPACE","\n        ",212],["T_RETURN","return",213],["T_WHITESPACE"," ",213],["T_VARIABLE","$this",213],["T_OBJECT_OPERATOR","->",213],["T_STRING","_redirect",213],["T_OBJECT_OPERATOR","->",213],["T_STRING","success",213],"(",["T_VARIABLE","$backUrl",213],["T_WHITESPACE"," ",213],"?",["T_WHITESPACE"," ",213],["T_VARIABLE","$backUrl",213],["T_WHITESPACE"," ",213],":",["T_WHITESPACE"," ",213],["T_VARIABLE","$successUrl",213],")",";",["T_WHITESPACE","\n    ",213],"}",["T_WHITESPACE","\n",214],"}",["T_WHITESPACE","\n",215]]
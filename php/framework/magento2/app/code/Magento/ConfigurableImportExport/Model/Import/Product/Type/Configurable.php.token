[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Import entity configurable product type model\n *\n * Copyright \u00c2\u00a9 2013-2017 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n *\/",2],["T_WHITESPACE","\n\n",7],["T_COMMENT","\/\/ @codingStandardsIgnoreFile\n",9],["T_WHITESPACE","\n",10],["T_NAMESPACE","namespace",11],["T_WHITESPACE"," ",11],["T_STRING","Magento",11],["T_NS_SEPARATOR","\\",11],["T_STRING","ConfigurableImportExport",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Model",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Import",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Product",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Type",11],";",["T_WHITESPACE","\n\n",11],["T_USE","use",13],["T_WHITESPACE"," ",13],["T_STRING","Magento",13],["T_NS_SEPARATOR","\\",13],["T_STRING","Catalog",13],["T_NS_SEPARATOR","\\",13],["T_STRING","Api",13],["T_NS_SEPARATOR","\\",13],["T_STRING","Data",13],["T_NS_SEPARATOR","\\",13],["T_STRING","ProductInterface",13],";",["T_WHITESPACE","\n",13],["T_USE","use",14],["T_WHITESPACE"," ",14],["T_STRING","Magento",14],["T_NS_SEPARATOR","\\",14],["T_STRING","CatalogImportExport",14],["T_NS_SEPARATOR","\\",14],["T_STRING","Model",14],["T_NS_SEPARATOR","\\",14],["T_STRING","Import",14],["T_NS_SEPARATOR","\\",14],["T_STRING","Product",14],["T_WHITESPACE"," ",14],["T_AS","as",14],["T_WHITESPACE"," ",14],["T_STRING","ImportProduct",14],";",["T_WHITESPACE","\n",14],["T_USE","use",15],["T_WHITESPACE"," ",15],["T_STRING","Magento",15],["T_NS_SEPARATOR","\\",15],["T_STRING","Framework",15],["T_NS_SEPARATOR","\\",15],["T_STRING","EntityManager",15],["T_NS_SEPARATOR","\\",15],["T_STRING","MetadataPool",15],";",["T_WHITESPACE","\n\n",15],["T_DOC_COMMENT","\/**\n * Importing configurable products\n * @package Magento\\ConfigurableImportExport\\Model\\Import\\Product\\Type\n * @SuppressWarnings(PHPMD.TooManyFields)\n * @SuppressWarnings(PHPMD.ExcessiveClassComplexity)\n * @SuppressWarnings(PHPMD.CouplingBetweenObjects)\n *\/",17],["T_WHITESPACE","\n",23],["T_CLASS","class",24],["T_WHITESPACE"," ",24],["T_STRING","Configurable",24],["T_WHITESPACE"," ",24],["T_EXTENDS","extends",24],["T_WHITESPACE"," ",24],["T_NS_SEPARATOR","\\",24],["T_STRING","Magento",24],["T_NS_SEPARATOR","\\",24],["T_STRING","CatalogImportExport",24],["T_NS_SEPARATOR","\\",24],["T_STRING","Model",24],["T_NS_SEPARATOR","\\",24],["T_STRING","Import",24],["T_NS_SEPARATOR","\\",24],["T_STRING","Product",24],["T_NS_SEPARATOR","\\",24],["T_STRING","Type",24],["T_NS_SEPARATOR","\\",24],["T_STRING","AbstractType",24],["T_WHITESPACE","\n",24],"{",["T_WHITESPACE","\n    ",25],["T_DOC_COMMENT","\/**\n     * Error codes.\n     *\/",26],["T_WHITESPACE","\n    ",28],["T_CONST","const",29],["T_WHITESPACE"," ",29],["T_STRING","ERROR_ATTRIBUTE_CODE_IS_NOT_SUPER",29],["T_WHITESPACE"," ",29],"=",["T_WHITESPACE"," ",29],["T_CONSTANT_ENCAPSED_STRING","'attrCodeIsNotSuper'",29],";",["T_WHITESPACE","\n\n    ",29],["T_CONST","const",31],["T_WHITESPACE"," ",31],["T_STRING","ERROR_INVALID_OPTION_VALUE",31],["T_WHITESPACE"," ",31],"=",["T_WHITESPACE"," ",31],["T_CONSTANT_ENCAPSED_STRING","'invalidOptionValue'",31],";",["T_WHITESPACE","\n\n    ",31],["T_CONST","const",33],["T_WHITESPACE"," ",33],["T_STRING","ERROR_INVALID_WEBSITE",33],["T_WHITESPACE"," ",33],"=",["T_WHITESPACE"," ",33],["T_CONSTANT_ENCAPSED_STRING","'invalidSuperAttrWebsite'",33],";",["T_WHITESPACE","\n\n    ",33],["T_CONST","const",35],["T_WHITESPACE"," ",35],["T_STRING","ERROR_DUPLICATED_VARIATIONS",35],["T_WHITESPACE"," ",35],"=",["T_WHITESPACE"," ",35],["T_CONSTANT_ENCAPSED_STRING","'duplicatedVariations'",35],";",["T_WHITESPACE","\n\n    ",35],["T_DOC_COMMENT","\/**\n     * Validation failure message template definitions\n     *\n     * @var array\n     *\/",37],["T_WHITESPACE","\n    ",41],["T_PROTECTED","protected",42],["T_WHITESPACE"," ",42],["T_VARIABLE","$_messageTemplates",42],["T_WHITESPACE"," ",42],"=",["T_WHITESPACE"," ",42],"[",["T_WHITESPACE","\n        ",42],["T_STRING","self",43],["T_DOUBLE_COLON","::",43],["T_STRING","ERROR_ATTRIBUTE_CODE_IS_NOT_SUPER",43],["T_WHITESPACE"," ",43],["T_DOUBLE_ARROW","=>",43],["T_WHITESPACE"," ",43],["T_CONSTANT_ENCAPSED_STRING","'Attribute with this code is not super'",43],",",["T_WHITESPACE","\n        ",43],["T_STRING","self",44],["T_DOUBLE_COLON","::",44],["T_STRING","ERROR_INVALID_OPTION_VALUE",44],["T_WHITESPACE"," ",44],["T_DOUBLE_ARROW","=>",44],["T_WHITESPACE"," ",44],["T_CONSTANT_ENCAPSED_STRING","'Invalid option value'",44],",",["T_WHITESPACE","\n        ",44],["T_STRING","self",45],["T_DOUBLE_COLON","::",45],["T_STRING","ERROR_INVALID_WEBSITE",45],["T_WHITESPACE"," ",45],["T_DOUBLE_ARROW","=>",45],["T_WHITESPACE"," ",45],["T_CONSTANT_ENCAPSED_STRING","'Invalid website code for super attribute'",45],",",["T_WHITESPACE","\n        ",45],["T_STRING","self",46],["T_DOUBLE_COLON","::",46],["T_STRING","ERROR_DUPLICATED_VARIATIONS",46],["T_WHITESPACE"," ",46],["T_DOUBLE_ARROW","=>",46],["T_WHITESPACE"," ",46],["T_CONSTANT_ENCAPSED_STRING","'SKU %s contains duplicated variations'",46],",",["T_WHITESPACE","\n    ",46],"]",";",["T_WHITESPACE","\n\n    ",47],["T_DOC_COMMENT","\/**\n     * Column names that holds values with particular meaning.\n     *\n     * @var string[]\n     *\/",49],["T_WHITESPACE","\n    ",53],["T_PROTECTED","protected",54],["T_WHITESPACE"," ",54],["T_VARIABLE","$_specialAttributes",54],["T_WHITESPACE"," ",54],"=",["T_WHITESPACE"," ",54],"[",["T_WHITESPACE","\n        ",54],["T_CONSTANT_ENCAPSED_STRING","'_super_products_sku'",55],",",["T_WHITESPACE","\n        ",55],["T_CONSTANT_ENCAPSED_STRING","'_super_attribute_code'",56],",",["T_WHITESPACE","\n        ",56],["T_CONSTANT_ENCAPSED_STRING","'_super_attribute_option'",57],",",["T_WHITESPACE","\n        ",57],["T_CONSTANT_ENCAPSED_STRING","'_super_attribute_price_website'",58],",",["T_WHITESPACE","\n    ",58],"]",";",["T_WHITESPACE","\n\n    ",59],["T_DOC_COMMENT","\/**\n     * Reference array of existing product-attribute to product super attribute ID.\n     *\n     * Example: product_1 (underscore) attribute_id_1 => product_super_attr_id_1,\n     * product_1 (underscore) attribute_id_2 => product_super_attr_id_2,\n     * ...,\n     * product_n (underscore) attribute_id_n => product_super_attr_id_n\n     *\n     * @var array\n     *\/",61],["T_WHITESPACE","\n    ",70],["T_PROTECTED","protected",71],["T_WHITESPACE"," ",71],["T_VARIABLE","$_productSuperAttrs",71],["T_WHITESPACE"," ",71],"=",["T_WHITESPACE"," ",71],"[","]",";",["T_WHITESPACE","\n\n    ",71],["T_DOC_COMMENT","\/**\n     * Array of SKU to array of super attribute values for all products.\n     *\n     * array (\n     *     attr_set_name_1 => array(\n     *         product_id_1 => array(\n     *             super_attribute_code_1 => attr_value_1,\n     *             ...\n     *             super_attribute_code_n => attr_value_n\n     *         ),\n     *         ...\n     *     ),\n     *   ...\n     * )\n     *\n     * @var array\n     *\/",73],["T_WHITESPACE","\n    ",89],["T_PROTECTED","protected",90],["T_WHITESPACE"," ",90],["T_VARIABLE","$_skuSuperAttributeValues",90],["T_WHITESPACE"," ",90],"=",["T_WHITESPACE"," ",90],"[","]",";",["T_WHITESPACE","\n\n    ",90],["T_DOC_COMMENT","\/**\n     * Array of SKU to array of super attributes data for validation new associated products.\n     *\n     * array (\n     *     product_id_1 => array(\n     *         super_attribute_id_1 => array(\n     *             value_index_1 => TRUE,\n     *             ...\n     *             value_index_n => TRUE\n     *         ),\n     *         ...\n     *     ),\n     *   ...\n     * )\n     *\n     * @var array\n     *\/",92],["T_WHITESPACE","\n    ",108],["T_PROTECTED","protected",109],["T_WHITESPACE"," ",109],["T_VARIABLE","$_skuSuperData",109],["T_WHITESPACE"," ",109],"=",["T_WHITESPACE"," ",109],"[","]",";",["T_WHITESPACE","\n\n    ",109],["T_DOC_COMMENT","\/**\n     * Super attributes codes in a form of code => TRUE array pairs.\n     *\n     * @var array\n     *\/",111],["T_WHITESPACE","\n    ",115],["T_PROTECTED","protected",116],["T_WHITESPACE"," ",116],["T_VARIABLE","$_superAttributes",116],["T_WHITESPACE"," ",116],"=",["T_WHITESPACE"," ",116],"[","]",";",["T_WHITESPACE","\n\n    ",116],["T_DOC_COMMENT","\/**\n     * All super attributes values combinations for each attribute set.\n     *\n     * @var array\n     *\/",118],["T_WHITESPACE","\n    ",122],["T_PROTECTED","protected",123],["T_WHITESPACE"," ",123],["T_VARIABLE","$_superAttrValuesCombs",123],["T_WHITESPACE"," ",123],"=",["T_WHITESPACE"," ",123],["T_STRING","null",123],";",["T_WHITESPACE","\n\n    ",123],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Catalog\\Model\\ProductTypes\\ConfigInterface\n     *\/",125],["T_WHITESPACE","\n    ",127],["T_PROTECTED","protected",128],["T_WHITESPACE"," ",128],["T_VARIABLE","$_productTypesConfig",128],";",["T_WHITESPACE","\n\n    ",128],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\ImportExport\\Model\\ResourceModel\\Helper\n     *\/",130],["T_WHITESPACE","\n    ",132],["T_PROTECTED","protected",133],["T_WHITESPACE"," ",133],["T_VARIABLE","$_resourceHelper",133],";",["T_WHITESPACE","\n\n    ",133],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Framework\\App\\ResourceConnection\n     *\/",135],["T_WHITESPACE","\n    ",137],["T_PROTECTED","protected",138],["T_WHITESPACE"," ",138],["T_VARIABLE","$_resource",138],";",["T_WHITESPACE","\n\n    ",138],["T_DOC_COMMENT","\/**\n     * Instance of database adapter.\n     *\n     * @var \\Magento\\Framework\\DB\\Adapter\\AdapterInterface\n     * @deprecated\n     *\/",140],["T_WHITESPACE","\n    ",145],["T_PROTECTED","protected",146],["T_WHITESPACE"," ",146],["T_VARIABLE","$_connection",146],";",["T_WHITESPACE","\n\n    ",146],["T_DOC_COMMENT","\/**\n     * Instance of product collection factory.\n     *\n     * @var \\Magento\\Catalog\\Model\\ResourceModel\\Product\\CollectionFactory\n     *\/",148],["T_WHITESPACE","\n    ",152],["T_PROTECTED","protected",153],["T_WHITESPACE"," ",153],["T_VARIABLE","$_productColFac",153],";",["T_WHITESPACE","\n\n    ",153],["T_DOC_COMMENT","\/**\n     * Product data.\n     *\n     * @var array\n     *\/",155],["T_WHITESPACE","\n    ",159],["T_PROTECTED","protected",160],["T_WHITESPACE"," ",160],["T_VARIABLE","$_productData",160],";",["T_WHITESPACE","\n\n    ",160],["T_DOC_COMMENT","\/**\n     * Product super data.\n     *\n     * @var array\n     *\/",162],["T_WHITESPACE","\n    ",166],["T_PROTECTED","protected",167],["T_WHITESPACE"," ",167],["T_VARIABLE","$_productSuperData",167],";",["T_WHITESPACE","\n\n    ",167],["T_DOC_COMMENT","\/**\n     * Simple product ids to delete.\n     *\n     * @var array\n     *\/",169],["T_WHITESPACE","\n    ",173],["T_PROTECTED","protected",174],["T_WHITESPACE"," ",174],["T_VARIABLE","$_simpleIdsToDelete",174],";",["T_WHITESPACE","\n\n    ",174],["T_DOC_COMMENT","\/**\n     * Super attributes data.\n     *\n     * @var array\n     *\/",176],["T_WHITESPACE","\n    ",180],["T_PROTECTED","protected",181],["T_WHITESPACE"," ",181],["T_VARIABLE","$_superAttributesData",181],";",["T_WHITESPACE","\n\n    ",181],["T_DOC_COMMENT","\/**\n     * Next attribute id.\n     *\n     * @var null|int\n     *\/",183],["T_WHITESPACE","\n    ",187],["T_PROTECTED","protected",188],["T_WHITESPACE"," ",188],["T_VARIABLE","$_nextAttrId",188],";",["T_WHITESPACE","\n\n    ",188],["T_DOC_COMMENT","\/**\n     * Product entity identifier field\n     *\n     * @var string\n     *\/",190],["T_WHITESPACE","\n    ",194],["T_PRIVATE","private",195],["T_WHITESPACE"," ",195],["T_VARIABLE","$productEntityIdentifierField",195],";",["T_WHITESPACE","\n\n    ",195],["T_DOC_COMMENT","\/**\n     * @param \\Magento\\Eav\\Model\\ResourceModel\\Entity\\Attribute\\Set\\CollectionFactory $attrSetColFac\n     * @param \\Magento\\Catalog\\Model\\ResourceModel\\Product\\Attribute\\CollectionFactory $prodAttrColFac\n     * @param \\Magento\\Framework\\App\\ResourceConnection $resource\n     * @param array $params\n     * @param \\Magento\\Catalog\\Model\\ProductTypes\\ConfigInterface $productTypesConfig\n     * @param \\Magento\\ImportExport\\Model\\ResourceModel\\Helper $resourceHelper\n     * @param \\Magento\\Catalog\\Model\\ResourceModel\\Product\\CollectionFactory $_productColFac\n     * @param MetadataPool $metadataPool\n     *\/",197],["T_WHITESPACE","\n    ",206],["T_PUBLIC","public",207],["T_WHITESPACE"," ",207],["T_FUNCTION","function",207],["T_WHITESPACE"," ",207],["T_STRING","__construct",207],"(",["T_WHITESPACE","\n        ",207],["T_NS_SEPARATOR","\\",208],["T_STRING","Magento",208],["T_NS_SEPARATOR","\\",208],["T_STRING","Eav",208],["T_NS_SEPARATOR","\\",208],["T_STRING","Model",208],["T_NS_SEPARATOR","\\",208],["T_STRING","ResourceModel",208],["T_NS_SEPARATOR","\\",208],["T_STRING","Entity",208],["T_NS_SEPARATOR","\\",208],["T_STRING","Attribute",208],["T_NS_SEPARATOR","\\",208],["T_STRING","Set",208],["T_NS_SEPARATOR","\\",208],["T_STRING","CollectionFactory",208],["T_WHITESPACE"," ",208],["T_VARIABLE","$attrSetColFac",208],",",["T_WHITESPACE","\n        ",208],["T_NS_SEPARATOR","\\",209],["T_STRING","Magento",209],["T_NS_SEPARATOR","\\",209],["T_STRING","Catalog",209],["T_NS_SEPARATOR","\\",209],["T_STRING","Model",209],["T_NS_SEPARATOR","\\",209],["T_STRING","ResourceModel",209],["T_NS_SEPARATOR","\\",209],["T_STRING","Product",209],["T_NS_SEPARATOR","\\",209],["T_STRING","Attribute",209],["T_NS_SEPARATOR","\\",209],["T_STRING","CollectionFactory",209],["T_WHITESPACE"," ",209],["T_VARIABLE","$prodAttrColFac",209],",",["T_WHITESPACE","\n        ",209],["T_NS_SEPARATOR","\\",210],["T_STRING","Magento",210],["T_NS_SEPARATOR","\\",210],["T_STRING","Framework",210],["T_NS_SEPARATOR","\\",210],["T_STRING","App",210],["T_NS_SEPARATOR","\\",210],["T_STRING","ResourceConnection",210],["T_WHITESPACE"," ",210],["T_VARIABLE","$resource",210],",",["T_WHITESPACE","\n        ",210],["T_ARRAY","array",211],["T_WHITESPACE"," ",211],["T_VARIABLE","$params",211],",",["T_WHITESPACE","\n        ",211],["T_NS_SEPARATOR","\\",212],["T_STRING","Magento",212],["T_NS_SEPARATOR","\\",212],["T_STRING","Catalog",212],["T_NS_SEPARATOR","\\",212],["T_STRING","Model",212],["T_NS_SEPARATOR","\\",212],["T_STRING","ProductTypes",212],["T_NS_SEPARATOR","\\",212],["T_STRING","ConfigInterface",212],["T_WHITESPACE"," ",212],["T_VARIABLE","$productTypesConfig",212],",",["T_WHITESPACE","\n        ",212],["T_NS_SEPARATOR","\\",213],["T_STRING","Magento",213],["T_NS_SEPARATOR","\\",213],["T_STRING","ImportExport",213],["T_NS_SEPARATOR","\\",213],["T_STRING","Model",213],["T_NS_SEPARATOR","\\",213],["T_STRING","ResourceModel",213],["T_NS_SEPARATOR","\\",213],["T_STRING","Helper",213],["T_WHITESPACE"," ",213],["T_VARIABLE","$resourceHelper",213],",",["T_WHITESPACE","\n        ",213],["T_NS_SEPARATOR","\\",214],["T_STRING","Magento",214],["T_NS_SEPARATOR","\\",214],["T_STRING","Catalog",214],["T_NS_SEPARATOR","\\",214],["T_STRING","Model",214],["T_NS_SEPARATOR","\\",214],["T_STRING","ResourceModel",214],["T_NS_SEPARATOR","\\",214],["T_STRING","Product",214],["T_NS_SEPARATOR","\\",214],["T_STRING","CollectionFactory",214],["T_WHITESPACE"," ",214],["T_VARIABLE","$_productColFac",214],",",["T_WHITESPACE","\n        ",214],["T_STRING","MetadataPool",215],["T_WHITESPACE"," ",215],["T_VARIABLE","$metadataPool",215],["T_WHITESPACE"," ",215],"=",["T_WHITESPACE"," ",215],["T_STRING","null",215],["T_WHITESPACE","\n    ",215],")",["T_WHITESPACE"," ",216],"{",["T_WHITESPACE","\n        ",216],["T_STRING","parent",217],["T_DOUBLE_COLON","::",217],["T_STRING","__construct",217],"(",["T_VARIABLE","$attrSetColFac",217],",",["T_WHITESPACE"," ",217],["T_VARIABLE","$prodAttrColFac",217],",",["T_WHITESPACE"," ",217],["T_VARIABLE","$resource",217],",",["T_WHITESPACE"," ",217],["T_VARIABLE","$params",217],",",["T_WHITESPACE"," ",217],["T_VARIABLE","$metadataPool",217],")",";",["T_WHITESPACE","\n        ",217],["T_VARIABLE","$this",218],["T_OBJECT_OPERATOR","->",218],["T_STRING","_productTypesConfig",218],["T_WHITESPACE"," ",218],"=",["T_WHITESPACE"," ",218],["T_VARIABLE","$productTypesConfig",218],";",["T_WHITESPACE","\n        ",218],["T_VARIABLE","$this",219],["T_OBJECT_OPERATOR","->",219],["T_STRING","_resourceHelper",219],["T_WHITESPACE"," ",219],"=",["T_WHITESPACE"," ",219],["T_VARIABLE","$resourceHelper",219],";",["T_WHITESPACE","\n        ",219],["T_VARIABLE","$this",220],["T_OBJECT_OPERATOR","->",220],["T_STRING","_productColFac",220],["T_WHITESPACE"," ",220],"=",["T_WHITESPACE"," ",220],["T_VARIABLE","$_productColFac",220],";",["T_WHITESPACE","\n        ",220],["T_VARIABLE","$this",221],["T_OBJECT_OPERATOR","->",221],["T_STRING","_connection",221],["T_WHITESPACE"," ",221],"=",["T_WHITESPACE"," ",221],["T_VARIABLE","$this",221],["T_OBJECT_OPERATOR","->",221],["T_STRING","_entityModel",221],["T_OBJECT_OPERATOR","->",221],["T_STRING","getConnection",221],"(",")",";",["T_WHITESPACE","\n    ",221],"}",["T_WHITESPACE","\n\n    ",222],["T_DOC_COMMENT","\/**\n     * Add attribute parameters to appropriate attribute set.\n     *\n     * @param string $attrSetName Name of attribute set.\n     * @param array $attrParams Refined attribute parameters.\n     * @param mixed $attribute\n     * @return \\Magento\\CatalogImportExport\\Model\\Import\\Product\\Type\\AbstractType\n     *\/",224],["T_WHITESPACE","\n    ",231],["T_PROTECTED","protected",232],["T_WHITESPACE"," ",232],["T_FUNCTION","function",232],["T_WHITESPACE"," ",232],["T_STRING","_addAttributeParams",232],"(",["T_VARIABLE","$attrSetName",232],",",["T_WHITESPACE"," ",232],["T_ARRAY","array",232],["T_WHITESPACE"," ",232],["T_VARIABLE","$attrParams",232],",",["T_WHITESPACE"," ",232],["T_VARIABLE","$attribute",232],")",["T_WHITESPACE","\n    ",232],"{",["T_WHITESPACE","\n        ",233],["T_COMMENT","\/\/ save super attributes for simplier and quicker search in future\n",234],["T_WHITESPACE","        ",235],["T_IF","if",235],["T_WHITESPACE"," ",235],"(",["T_CONSTANT_ENCAPSED_STRING","'select'",235],["T_WHITESPACE"," ",235],["T_IS_EQUAL","==",235],["T_WHITESPACE"," ",235],["T_VARIABLE","$attrParams",235],"[",["T_CONSTANT_ENCAPSED_STRING","'type'",235],"]",["T_WHITESPACE"," ",235],["T_BOOLEAN_AND","&&",235],["T_WHITESPACE"," ",235],["T_LNUMBER","1",235],["T_WHITESPACE"," ",235],["T_IS_EQUAL","==",235],["T_WHITESPACE"," ",235],["T_VARIABLE","$attrParams",235],"[",["T_CONSTANT_ENCAPSED_STRING","'is_global'",235],"]",")",["T_WHITESPACE"," ",235],"{",["T_WHITESPACE","\n            ",235],["T_VARIABLE","$this",236],["T_OBJECT_OPERATOR","->",236],["T_STRING","_superAttributes",236],"[",["T_VARIABLE","$attrParams",236],"[",["T_CONSTANT_ENCAPSED_STRING","'code'",236],"]","]",["T_WHITESPACE"," ",236],"=",["T_WHITESPACE"," ",236],["T_VARIABLE","$attrParams",236],";",["T_WHITESPACE","\n        ",236],"}",["T_WHITESPACE","\n        ",237],["T_RETURN","return",238],["T_WHITESPACE"," ",238],["T_STRING","parent",238],["T_DOUBLE_COLON","::",238],["T_STRING","_addAttributeParams",238],"(",["T_VARIABLE","$attrSetName",238],",",["T_WHITESPACE"," ",238],["T_VARIABLE","$attrParams",238],",",["T_WHITESPACE"," ",238],["T_VARIABLE","$attribute",238],")",";",["T_WHITESPACE","\n    ",238],"}",["T_WHITESPACE","\n\n    ",239],["T_DOC_COMMENT","\/**\n     * Get super attribute ID (if it is not possible - return NULL).\n     *\n     * @param int $productId\n     * @param int $attributeId\n     * @return array|null\n     *\/",241],["T_WHITESPACE","\n    ",247],["T_PROTECTED","protected",248],["T_WHITESPACE"," ",248],["T_FUNCTION","function",248],["T_WHITESPACE"," ",248],["T_STRING","_getSuperAttributeId",248],"(",["T_VARIABLE","$productId",248],",",["T_WHITESPACE"," ",248],["T_VARIABLE","$attributeId",248],")",["T_WHITESPACE","\n    ",248],"{",["T_WHITESPACE","\n        ",249],["T_IF","if",250],["T_WHITESPACE"," ",250],"(",["T_ISSET","isset",250],"(",["T_VARIABLE","$this",250],["T_OBJECT_OPERATOR","->",250],["T_STRING","_productSuperAttrs",250],"[","\"",["T_CURLY_OPEN","{",250],["T_VARIABLE","$productId",250],"}",["T_ENCAPSED_AND_WHITESPACE","_",250],["T_CURLY_OPEN","{",250],["T_VARIABLE","$attributeId",250],"}","\"","]",")",")",["T_WHITESPACE"," ",250],"{",["T_WHITESPACE","\n            ",250],["T_RETURN","return",251],["T_WHITESPACE"," ",251],["T_VARIABLE","$this",251],["T_OBJECT_OPERATOR","->",251],["T_STRING","_productSuperAttrs",251],"[","\"",["T_CURLY_OPEN","{",251],["T_VARIABLE","$productId",251],"}",["T_ENCAPSED_AND_WHITESPACE","_",251],["T_CURLY_OPEN","{",251],["T_VARIABLE","$attributeId",251],"}","\"","]",";",["T_WHITESPACE","\n        ",251],"}",["T_WHITESPACE"," ",252],["T_ELSE","else",252],["T_WHITESPACE"," ",252],"{",["T_WHITESPACE","\n            ",252],["T_RETURN","return",253],["T_WHITESPACE"," ",253],["T_STRING","null",253],";",["T_WHITESPACE","\n        ",253],"}",["T_WHITESPACE","\n    ",254],"}",["T_WHITESPACE","\n\n    ",255],["T_DOC_COMMENT","\/**\n     * Have we check attribute for is_required? Used as last chance to disable this type of check.\n     *\n     * @param string $attrCode\n     * @return bool\n     *\/",257],["T_WHITESPACE","\n    ",262],["T_PROTECTED","protected",263],["T_WHITESPACE"," ",263],["T_FUNCTION","function",263],["T_WHITESPACE"," ",263],["T_STRING","_isAttributeRequiredCheckNeeded",263],"(",["T_VARIABLE","$attrCode",263],")",["T_WHITESPACE","\n    ",263],"{",["T_WHITESPACE","\n        ",264],["T_COMMENT","\/\/ do not check super attributes\n",265],["T_WHITESPACE","        ",266],["T_RETURN","return",266],["T_WHITESPACE"," ",266],"!",["T_VARIABLE","$this",266],["T_OBJECT_OPERATOR","->",266],["T_STRING","_isAttributeSuper",266],"(",["T_VARIABLE","$attrCode",266],")",";",["T_WHITESPACE","\n    ",266],"}",["T_WHITESPACE","\n\n    ",267],["T_DOC_COMMENT","\/**\n     * Is attribute is super-attribute?\n     *\n     * @param string $attrCode\n     * @return bool\n     *\/",269],["T_WHITESPACE","\n    ",274],["T_PROTECTED","protected",275],["T_WHITESPACE"," ",275],["T_FUNCTION","function",275],["T_WHITESPACE"," ",275],["T_STRING","_isAttributeSuper",275],"(",["T_VARIABLE","$attrCode",275],")",["T_WHITESPACE","\n    ",275],"{",["T_WHITESPACE","\n        ",276],["T_RETURN","return",277],["T_WHITESPACE"," ",277],["T_ISSET","isset",277],"(",["T_VARIABLE","$this",277],["T_OBJECT_OPERATOR","->",277],["T_STRING","_superAttributes",277],"[",["T_VARIABLE","$attrCode",277],"]",")",";",["T_WHITESPACE","\n    ",277],"}",["T_WHITESPACE","\n\n    ",278],["T_DOC_COMMENT","\/**\n     * Validate particular attributes columns.\n     *\n     * @param array $rowData\n     * @param int $rowNum\n     * @return bool\n     *\/",280],["T_WHITESPACE","\n    ",286],["T_PROTECTED","protected",287],["T_WHITESPACE"," ",287],["T_FUNCTION","function",287],["T_WHITESPACE"," ",287],["T_STRING","_isParticularAttributesValid",287],"(",["T_ARRAY","array",287],["T_WHITESPACE"," ",287],["T_VARIABLE","$rowData",287],",",["T_WHITESPACE"," ",287],["T_VARIABLE","$rowNum",287],")",["T_WHITESPACE","\n    ",287],"{",["T_WHITESPACE","\n        ",288],["T_IF","if",289],["T_WHITESPACE"," ",289],"(","!",["T_EMPTY","empty",289],"(",["T_VARIABLE","$rowData",289],"[",["T_CONSTANT_ENCAPSED_STRING","'_super_attribute_code'",289],"]",")",")",["T_WHITESPACE"," ",289],"{",["T_WHITESPACE","\n            ",289],["T_VARIABLE","$superAttrCode",290],["T_WHITESPACE"," ",290],"=",["T_WHITESPACE"," ",290],["T_VARIABLE","$rowData",290],"[",["T_CONSTANT_ENCAPSED_STRING","'_super_attribute_code'",290],"]",";",["T_WHITESPACE","\n\n            ",290],["T_IF","if",292],["T_WHITESPACE"," ",292],"(","!",["T_VARIABLE","$this",292],["T_OBJECT_OPERATOR","->",292],["T_STRING","_isAttributeSuper",292],"(",["T_VARIABLE","$superAttrCode",292],")",")",["T_WHITESPACE"," ",292],"{",["T_WHITESPACE","\n                ",292],["T_COMMENT","\/\/ check attribute superity\n",293],["T_WHITESPACE","                ",294],["T_VARIABLE","$this",294],["T_OBJECT_OPERATOR","->",294],["T_STRING","_entityModel",294],["T_OBJECT_OPERATOR","->",294],["T_STRING","addRowError",294],"(",["T_STRING","self",294],["T_DOUBLE_COLON","::",294],["T_STRING","ERROR_ATTRIBUTE_CODE_IS_NOT_SUPER",294],",",["T_WHITESPACE"," ",294],["T_VARIABLE","$rowNum",294],")",";",["T_WHITESPACE","\n                ",294],["T_RETURN","return",295],["T_WHITESPACE"," ",295],["T_STRING","false",295],";",["T_WHITESPACE","\n            ",295],"}",["T_WHITESPACE"," ",296],["T_ELSEIF","elseif",296],["T_WHITESPACE"," ",296],"(",["T_ISSET","isset",296],"(",["T_VARIABLE","$rowData",296],"[",["T_CONSTANT_ENCAPSED_STRING","'_super_attribute_option'",296],"]",")",["T_WHITESPACE"," ",296],["T_BOOLEAN_AND","&&",296],["T_WHITESPACE"," ",296],["T_STRING","strlen",296],"(",["T_VARIABLE","$rowData",296],"[",["T_CONSTANT_ENCAPSED_STRING","'_super_attribute_option'",296],"]",")",")",["T_WHITESPACE"," ",296],"{",["T_WHITESPACE","\n                ",296],["T_VARIABLE","$optionKey",297],["T_WHITESPACE"," ",297],"=",["T_WHITESPACE"," ",297],["T_STRING","strtolower",297],"(",["T_VARIABLE","$rowData",297],"[",["T_CONSTANT_ENCAPSED_STRING","'_super_attribute_option'",297],"]",")",";",["T_WHITESPACE","\n                ",297],["T_IF","if",298],["T_WHITESPACE"," ",298],"(","!",["T_ISSET","isset",298],"(",["T_VARIABLE","$this",298],["T_OBJECT_OPERATOR","->",298],["T_STRING","_superAttributes",298],"[",["T_VARIABLE","$superAttrCode",298],"]","[",["T_CONSTANT_ENCAPSED_STRING","'options'",298],"]","[",["T_VARIABLE","$optionKey",298],"]",")",")",["T_WHITESPACE"," ",298],"{",["T_WHITESPACE","\n                    ",298],["T_VARIABLE","$this",299],["T_OBJECT_OPERATOR","->",299],["T_STRING","_entityModel",299],["T_OBJECT_OPERATOR","->",299],["T_STRING","addRowError",299],"(",["T_STRING","self",299],["T_DOUBLE_COLON","::",299],["T_STRING","ERROR_INVALID_OPTION_VALUE",299],",",["T_WHITESPACE"," ",299],["T_VARIABLE","$rowNum",299],")",";",["T_WHITESPACE","\n                    ",299],["T_RETURN","return",300],["T_WHITESPACE"," ",300],["T_STRING","false",300],";",["T_WHITESPACE","\n                ",300],"}",["T_WHITESPACE","\n            ",301],"}",["T_WHITESPACE","\n        ",302],"}",["T_WHITESPACE","\n        ",303],["T_RETURN","return",304],["T_WHITESPACE"," ",304],["T_STRING","true",304],";",["T_WHITESPACE","\n    ",304],"}",["T_WHITESPACE","\n\n    ",305],["T_DOC_COMMENT","\/**\n     * Array of SKU to array of super attribute values for all products.\n     *\n     * @param array $bunch - portion of products to process\n     * @param array $newSku - imported variations list\n     * @param array $oldSku - present variations list\n     * @return $this\n     * @SuppressWarnings(PHPMD.CyclomaticComplexity)\n     *\/",307],["T_WHITESPACE","\n    ",315],["T_PROTECTED","protected",316],["T_WHITESPACE"," ",316],["T_FUNCTION","function",316],["T_WHITESPACE"," ",316],["T_STRING","_loadSkuSuperAttributeValues",316],"(",["T_VARIABLE","$bunch",316],",",["T_WHITESPACE"," ",316],["T_VARIABLE","$newSku",316],",",["T_WHITESPACE"," ",316],["T_VARIABLE","$oldSku",316],")",["T_WHITESPACE","\n    ",316],"{",["T_WHITESPACE","\n        ",317],["T_IF","if",318],["T_WHITESPACE"," ",318],"(",["T_VARIABLE","$this",318],["T_OBJECT_OPERATOR","->",318],["T_STRING","_superAttributes",318],")",["T_WHITESPACE"," ",318],"{",["T_WHITESPACE","\n            ",318],["T_VARIABLE","$attrSetIdToName",319],["T_WHITESPACE"," ",319],"=",["T_WHITESPACE"," ",319],["T_VARIABLE","$this",319],["T_OBJECT_OPERATOR","->",319],["T_STRING","_entityModel",319],["T_OBJECT_OPERATOR","->",319],["T_STRING","getAttrSetIdToName",319],"(",")",";",["T_WHITESPACE","\n\n            ",319],["T_VARIABLE","$productIds",321],["T_WHITESPACE"," ",321],"=",["T_WHITESPACE"," ",321],"[","]",";",["T_WHITESPACE","\n            ",321],["T_FOREACH","foreach",322],["T_WHITESPACE"," ",322],"(",["T_VARIABLE","$bunch",322],["T_WHITESPACE"," ",322],["T_AS","as",322],["T_WHITESPACE"," ",322],["T_VARIABLE","$rowData",322],")",["T_WHITESPACE"," ",322],"{",["T_WHITESPACE","\n                ",322],["T_VARIABLE","$dataWithExtraVirtualRows",323],["T_WHITESPACE"," ",323],"=",["T_WHITESPACE"," ",323],["T_VARIABLE","$this",323],["T_OBJECT_OPERATOR","->",323],["T_STRING","_parseVariations",323],"(",["T_VARIABLE","$rowData",323],")",";",["T_WHITESPACE","\n                ",323],["T_IF","if",324],["T_WHITESPACE"," ",324],"(","!",["T_EMPTY","empty",324],"(",["T_VARIABLE","$dataWithExtraVirtualRows",324],")",")",["T_WHITESPACE"," ",324],"{",["T_WHITESPACE","\n                    ",324],["T_STRING","array_unshift",325],"(",["T_VARIABLE","$dataWithExtraVirtualRows",325],",",["T_WHITESPACE"," ",325],["T_VARIABLE","$rowData",325],")",";",["T_WHITESPACE","\n                ",325],"}",["T_WHITESPACE"," ",326],["T_ELSE","else",326],["T_WHITESPACE"," ",326],"{",["T_WHITESPACE","\n                    ",326],["T_VARIABLE","$dataWithExtraVirtualRows",327],"[","]",["T_WHITESPACE"," ",327],"=",["T_WHITESPACE"," ",327],["T_VARIABLE","$rowData",327],";",["T_WHITESPACE","\n                ",327],"}",["T_WHITESPACE","\n\n                ",328],["T_FOREACH","foreach",330],["T_WHITESPACE"," ",330],"(",["T_VARIABLE","$dataWithExtraVirtualRows",330],["T_WHITESPACE"," ",330],["T_AS","as",330],["T_WHITESPACE"," ",330],["T_VARIABLE","$data",330],")",["T_WHITESPACE"," ",330],"{",["T_WHITESPACE","\n                    ",330],["T_IF","if",331],["T_WHITESPACE"," ",331],"(","!",["T_EMPTY","empty",331],"(",["T_VARIABLE","$data",331],"[",["T_CONSTANT_ENCAPSED_STRING","'_super_products_sku'",331],"]",")",")",["T_WHITESPACE"," ",331],"{",["T_WHITESPACE","\n                        ",331],["T_IF","if",332],["T_WHITESPACE"," ",332],"(",["T_ISSET","isset",332],"(",["T_VARIABLE","$newSku",332],"[",["T_VARIABLE","$data",332],"[",["T_CONSTANT_ENCAPSED_STRING","'_super_products_sku'",332],"]","]",")",")",["T_WHITESPACE"," ",332],"{",["T_WHITESPACE","\n                            ",332],["T_VARIABLE","$productIds",333],"[","]",["T_WHITESPACE"," ",333],"=",["T_WHITESPACE"," ",333],["T_VARIABLE","$newSku",333],"[",["T_VARIABLE","$data",333],"[",["T_CONSTANT_ENCAPSED_STRING","'_super_products_sku'",333],"]","]","[",["T_VARIABLE","$this",333],["T_OBJECT_OPERATOR","->",333],["T_STRING","getProductEntityLinkField",333],"(",")","]",";",["T_WHITESPACE","\n                        ",333],"}",["T_WHITESPACE"," ",334],["T_ELSEIF","elseif",334],["T_WHITESPACE"," ",334],"(",["T_ISSET","isset",334],"(",["T_VARIABLE","$oldSku",334],"[",["T_VARIABLE","$data",334],"[",["T_CONSTANT_ENCAPSED_STRING","'_super_products_sku'",334],"]","]",")",")",["T_WHITESPACE"," ",334],"{",["T_WHITESPACE","\n                            ",334],["T_VARIABLE","$productIds",335],"[","]",["T_WHITESPACE"," ",335],"=",["T_WHITESPACE"," ",335],["T_VARIABLE","$oldSku",335],"[",["T_VARIABLE","$data",335],"[",["T_CONSTANT_ENCAPSED_STRING","'_super_products_sku'",335],"]","]","[",["T_VARIABLE","$this",335],["T_OBJECT_OPERATOR","->",335],["T_STRING","getProductEntityLinkField",335],"(",")","]",";",["T_WHITESPACE","\n                        ",335],"}",["T_WHITESPACE","\n                    ",336],"}",["T_WHITESPACE","\n                ",337],"}",["T_WHITESPACE","\n            ",338],"}",["T_WHITESPACE","\n\n            ",339],["T_FOREACH","foreach",341],["T_WHITESPACE"," ",341],"(",["T_VARIABLE","$this",341],["T_OBJECT_OPERATOR","->",341],["T_STRING","_productColFac",341],["T_OBJECT_OPERATOR","->",341],["T_STRING","create",341],"(",")",["T_OBJECT_OPERATOR","->",341],["T_STRING","addFieldToFilter",341],"(",["T_WHITESPACE","\n                ",341],["T_CONSTANT_ENCAPSED_STRING","'type_id'",342],",",["T_WHITESPACE","\n                ",342],["T_VARIABLE","$this",343],["T_OBJECT_OPERATOR","->",343],["T_STRING","_productTypesConfig",343],["T_OBJECT_OPERATOR","->",343],["T_STRING","getComposableTypes",343],"(",")",["T_WHITESPACE","\n            ",343],")",["T_OBJECT_OPERATOR","->",344],["T_STRING","addFieldToFilter",344],"(",["T_WHITESPACE","\n                ",344],["T_VARIABLE","$this",345],["T_OBJECT_OPERATOR","->",345],["T_STRING","getProductEntityLinkField",345],"(",")",",",["T_WHITESPACE","\n                ",345],"[",["T_CONSTANT_ENCAPSED_STRING","'in'",346],["T_WHITESPACE"," ",346],["T_DOUBLE_ARROW","=>",346],["T_WHITESPACE"," ",346],["T_VARIABLE","$productIds",346],"]",["T_WHITESPACE","\n            ",346],")",["T_OBJECT_OPERATOR","->",347],["T_STRING","addAttributeToSelect",347],"(",["T_WHITESPACE","\n                ",347],["T_STRING","array_keys",348],"(",["T_VARIABLE","$this",348],["T_OBJECT_OPERATOR","->",348],["T_STRING","_superAttributes",348],")",["T_WHITESPACE","\n            ",348],")",["T_WHITESPACE"," ",349],["T_AS","as",349],["T_WHITESPACE"," ",349],["T_VARIABLE","$product",349],")",["T_WHITESPACE"," ",349],"{",["T_WHITESPACE","\n                ",349],["T_VARIABLE","$attrSetName",350],["T_WHITESPACE"," ",350],"=",["T_WHITESPACE"," ",350],["T_VARIABLE","$attrSetIdToName",350],"[",["T_VARIABLE","$product",350],["T_OBJECT_OPERATOR","->",350],["T_STRING","getAttributeSetId",350],"(",")","]",";",["T_WHITESPACE","\n\n                ",350],["T_VARIABLE","$data",352],["T_WHITESPACE"," ",352],"=",["T_WHITESPACE"," ",352],["T_STRING","array_intersect_key",352],"(",["T_VARIABLE","$product",352],["T_OBJECT_OPERATOR","->",352],["T_STRING","getData",352],"(",")",",",["T_WHITESPACE"," ",352],["T_VARIABLE","$this",352],["T_OBJECT_OPERATOR","->",352],["T_STRING","_superAttributes",352],")",";",["T_WHITESPACE","\n                ",352],["T_FOREACH","foreach",353],["T_WHITESPACE"," ",353],"(",["T_VARIABLE","$data",353],["T_WHITESPACE"," ",353],["T_AS","as",353],["T_WHITESPACE"," ",353],["T_VARIABLE","$attrCode",353],["T_WHITESPACE"," ",353],["T_DOUBLE_ARROW","=>",353],["T_WHITESPACE"," ",353],["T_VARIABLE","$value",353],")",["T_WHITESPACE"," ",353],"{",["T_WHITESPACE","\n                    ",353],["T_VARIABLE","$attrId",354],["T_WHITESPACE"," ",354],"=",["T_WHITESPACE"," ",354],["T_VARIABLE","$this",354],["T_OBJECT_OPERATOR","->",354],["T_STRING","_superAttributes",354],"[",["T_VARIABLE","$attrCode",354],"]","[",["T_CONSTANT_ENCAPSED_STRING","'id'",354],"]",";",["T_WHITESPACE","\n                    ",354],["T_VARIABLE","$productId",355],["T_WHITESPACE"," ",355],"=",["T_WHITESPACE"," ",355],["T_VARIABLE","$product",355],["T_OBJECT_OPERATOR","->",355],["T_STRING","getData",355],"(",["T_VARIABLE","$this",355],["T_OBJECT_OPERATOR","->",355],["T_STRING","getProductEntityLinkField",355],"(",")",")",";",["T_WHITESPACE","\n                    ",355],["T_VARIABLE","$this",356],["T_OBJECT_OPERATOR","->",356],["T_STRING","_skuSuperAttributeValues",356],"[",["T_VARIABLE","$attrSetName",356],"]","[",["T_VARIABLE","$productId",356],"]","[",["T_VARIABLE","$attrId",356],"]",["T_WHITESPACE"," ",356],"=",["T_WHITESPACE"," ",356],["T_VARIABLE","$value",356],";",["T_WHITESPACE","\n                ",356],"}",["T_WHITESPACE","\n            ",357],"}",["T_WHITESPACE","\n        ",358],"}",["T_WHITESPACE","\n        ",359],["T_RETURN","return",360],["T_WHITESPACE"," ",360],["T_VARIABLE","$this",360],";",["T_WHITESPACE","\n    ",360],"}",["T_WHITESPACE","\n\n    ",361],["T_DOC_COMMENT","\/**\n     * Array of SKU to array of super attribute values for all products.\n     *\n     * @param array $bunch\n     * @return $this\n     *\/",363],["T_WHITESPACE","\n    ",368],["T_PROTECTED","protected",369],["T_WHITESPACE"," ",369],["T_FUNCTION","function",369],["T_WHITESPACE"," ",369],["T_STRING","_loadSkuSuperDataForBunch",369],"(",["T_ARRAY","array",369],["T_WHITESPACE"," ",369],["T_VARIABLE","$bunch",369],")",["T_WHITESPACE","\n    ",369],"{",["T_WHITESPACE","\n        ",370],["T_VARIABLE","$newSku",371],["T_WHITESPACE"," ",371],"=",["T_WHITESPACE"," ",371],["T_VARIABLE","$this",371],["T_OBJECT_OPERATOR","->",371],["T_STRING","_entityModel",371],["T_OBJECT_OPERATOR","->",371],["T_STRING","getNewSku",371],"(",")",";",["T_WHITESPACE","\n        ",371],["T_VARIABLE","$oldSku",372],["T_WHITESPACE"," ",372],"=",["T_WHITESPACE"," ",372],["T_VARIABLE","$this",372],["T_OBJECT_OPERATOR","->",372],["T_STRING","_entityModel",372],["T_OBJECT_OPERATOR","->",372],["T_STRING","getOldSku",372],"(",")",";",["T_WHITESPACE","\n        ",372],["T_VARIABLE","$productIds",373],["T_WHITESPACE"," ",373],"=",["T_WHITESPACE"," ",373],"[","]",";",["T_WHITESPACE","\n        ",373],["T_FOREACH","foreach",374],["T_WHITESPACE"," ",374],"(",["T_VARIABLE","$bunch",374],["T_WHITESPACE"," ",374],["T_AS","as",374],["T_WHITESPACE"," ",374],["T_VARIABLE","$rowData",374],")",["T_WHITESPACE"," ",374],"{",["T_WHITESPACE","\n            ",374],["T_VARIABLE","$sku",375],["T_WHITESPACE"," ",375],"=",["T_WHITESPACE"," ",375],["T_VARIABLE","$rowData",375],"[",["T_STRING","ImportProduct",375],["T_DOUBLE_COLON","::",375],["T_STRING","COL_SKU",375],"]",";",["T_WHITESPACE","\n            ",375],["T_VARIABLE","$productData",376],["T_WHITESPACE"," ",376],"=",["T_WHITESPACE"," ",376],["T_ISSET","isset",376],"(",["T_VARIABLE","$newSku",376],"[",["T_VARIABLE","$sku",376],"]",")",["T_WHITESPACE"," ",376],"?",["T_WHITESPACE"," ",376],["T_VARIABLE","$newSku",376],"[",["T_VARIABLE","$sku",376],"]",["T_WHITESPACE"," ",376],":",["T_WHITESPACE"," ",376],["T_VARIABLE","$oldSku",376],"[",["T_VARIABLE","$sku",376],"]",";",["T_WHITESPACE","\n            ",376],["T_VARIABLE","$productIds",377],"[","]",["T_WHITESPACE"," ",377],"=",["T_WHITESPACE"," ",377],["T_VARIABLE","$productData",377],"[",["T_VARIABLE","$this",377],["T_OBJECT_OPERATOR","->",377],["T_STRING","getProductEntityLinkField",377],"(",")","]",";",["T_WHITESPACE","\n        ",377],"}",["T_WHITESPACE","\n\n        ",378],["T_VARIABLE","$this",380],["T_OBJECT_OPERATOR","->",380],["T_STRING","_productSuperAttrs",380],["T_WHITESPACE"," ",380],"=",["T_WHITESPACE"," ",380],"[","]",";",["T_WHITESPACE","\n        ",380],["T_VARIABLE","$this",381],["T_OBJECT_OPERATOR","->",381],["T_STRING","_skuSuperData",381],["T_WHITESPACE"," ",381],"=",["T_WHITESPACE"," ",381],"[","]",";",["T_WHITESPACE","\n        ",381],["T_IF","if",382],["T_WHITESPACE"," ",382],"(","!",["T_EMPTY","empty",382],"(",["T_VARIABLE","$productIds",382],")",")",["T_WHITESPACE"," ",382],"{",["T_WHITESPACE","\n            ",382],["T_VARIABLE","$mainTable",383],["T_WHITESPACE"," ",383],"=",["T_WHITESPACE"," ",383],["T_VARIABLE","$this",383],["T_OBJECT_OPERATOR","->",383],["T_STRING","_resource",383],["T_OBJECT_OPERATOR","->",383],["T_STRING","getTableName",383],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog_product_super_attribute'",383],")",";",["T_WHITESPACE","\n            ",383],["T_VARIABLE","$optionTable",384],["T_WHITESPACE"," ",384],"=",["T_WHITESPACE"," ",384],["T_VARIABLE","$this",384],["T_OBJECT_OPERATOR","->",384],["T_STRING","_resource",384],["T_OBJECT_OPERATOR","->",384],["T_STRING","getTableName",384],"(",["T_CONSTANT_ENCAPSED_STRING","'eav_attribute_option'",384],")",";",["T_WHITESPACE","\n            ",384],["T_VARIABLE","$select",385],["T_WHITESPACE"," ",385],"=",["T_WHITESPACE"," ",385],["T_VARIABLE","$this",385],["T_OBJECT_OPERATOR","->",385],["T_STRING","connection",385],["T_OBJECT_OPERATOR","->",385],["T_STRING","select",385],"(",")",["T_OBJECT_OPERATOR","->",385],["T_STRING","from",385],"(",["T_WHITESPACE","\n                ",385],"[",["T_CONSTANT_ENCAPSED_STRING","'m'",386],["T_WHITESPACE"," ",386],["T_DOUBLE_ARROW","=>",386],["T_WHITESPACE"," ",386],["T_VARIABLE","$mainTable",386],"]",",",["T_WHITESPACE","\n                ",386],"[",["T_CONSTANT_ENCAPSED_STRING","'product_id'",387],",",["T_WHITESPACE"," ",387],["T_CONSTANT_ENCAPSED_STRING","'attribute_id'",387],",",["T_WHITESPACE"," ",387],["T_CONSTANT_ENCAPSED_STRING","'product_super_attribute_id'",387],"]",["T_WHITESPACE","\n            ",387],")",["T_OBJECT_OPERATOR","->",388],["T_STRING","joinLeft",388],"(",["T_WHITESPACE","\n                ",388],"[",["T_CONSTANT_ENCAPSED_STRING","'o'",389],["T_WHITESPACE"," ",389],["T_DOUBLE_ARROW","=>",389],["T_WHITESPACE"," ",389],["T_VARIABLE","$optionTable",389],"]",",",["T_WHITESPACE","\n                ",389],["T_VARIABLE","$this",390],["T_OBJECT_OPERATOR","->",390],["T_STRING","connection",390],["T_OBJECT_OPERATOR","->",390],["T_STRING","quoteIdentifier",390],"(",["T_WHITESPACE","\n                    ",390],["T_CONSTANT_ENCAPSED_STRING","'m.attribute_id'",391],["T_WHITESPACE","\n                ",391],")",["T_WHITESPACE"," ",392],".",["T_WHITESPACE"," ",392],["T_CONSTANT_ENCAPSED_STRING","' = '",392],["T_WHITESPACE"," ",392],".",["T_WHITESPACE"," ",392],["T_VARIABLE","$this",392],["T_OBJECT_OPERATOR","->",392],["T_STRING","connection",392],["T_OBJECT_OPERATOR","->",392],["T_STRING","quoteIdentifier",392],"(",["T_WHITESPACE","\n                    ",392],["T_CONSTANT_ENCAPSED_STRING","'o.attribute_id'",393],["T_WHITESPACE","\n                ",393],")",",",["T_WHITESPACE","\n                ",394],"[",["T_CONSTANT_ENCAPSED_STRING","'option_id'",395],"]",["T_WHITESPACE","\n            ",395],")",["T_OBJECT_OPERATOR","->",396],["T_STRING","where",396],"(",["T_WHITESPACE","\n                ",396],["T_CONSTANT_ENCAPSED_STRING","'m.product_id IN ( ? )'",397],",",["T_WHITESPACE","\n                ",397],["T_VARIABLE","$productIds",398],["T_WHITESPACE","\n            ",398],")",";",["T_WHITESPACE","\n\n            ",399],["T_FOREACH","foreach",401],["T_WHITESPACE"," ",401],"(",["T_VARIABLE","$this",401],["T_OBJECT_OPERATOR","->",401],["T_STRING","connection",401],["T_OBJECT_OPERATOR","->",401],["T_STRING","fetchAll",401],"(",["T_VARIABLE","$select",401],")",["T_WHITESPACE"," ",401],["T_AS","as",401],["T_WHITESPACE"," ",401],["T_VARIABLE","$row",401],")",["T_WHITESPACE"," ",401],"{",["T_WHITESPACE","\n                ",401],["T_VARIABLE","$attrId",402],["T_WHITESPACE"," ",402],"=",["T_WHITESPACE"," ",402],["T_VARIABLE","$row",402],"[",["T_CONSTANT_ENCAPSED_STRING","'attribute_id'",402],"]",";",["T_WHITESPACE","\n                ",402],["T_VARIABLE","$productId",403],["T_WHITESPACE"," ",403],"=",["T_WHITESPACE"," ",403],["T_VARIABLE","$row",403],"[",["T_CONSTANT_ENCAPSED_STRING","'product_id'",403],"]",";",["T_WHITESPACE","\n                ",403],["T_IF","if",404],["T_WHITESPACE"," ",404],"(",["T_VARIABLE","$row",404],"[",["T_CONSTANT_ENCAPSED_STRING","'option_id'",404],"]",")",["T_WHITESPACE"," ",404],"{",["T_WHITESPACE","\n                    ",404],["T_VARIABLE","$this",405],["T_OBJECT_OPERATOR","->",405],["T_STRING","_skuSuperData",405],"[",["T_VARIABLE","$productId",405],"]","[",["T_VARIABLE","$attrId",405],"]","[",["T_VARIABLE","$row",405],"[",["T_CONSTANT_ENCAPSED_STRING","'option_id'",405],"]","]",["T_WHITESPACE"," ",405],"=",["T_WHITESPACE"," ",405],["T_STRING","true",405],";",["T_WHITESPACE","\n                ",405],"}",["T_WHITESPACE","\n                ",406],["T_VARIABLE","$this",407],["T_OBJECT_OPERATOR","->",407],["T_STRING","_productSuperAttrs",407],"[","\"",["T_CURLY_OPEN","{",407],["T_VARIABLE","$productId",407],"}",["T_ENCAPSED_AND_WHITESPACE","_",407],["T_CURLY_OPEN","{",407],["T_VARIABLE","$attrId",407],"}","\"","]",["T_WHITESPACE"," ",407],"=",["T_WHITESPACE"," ",407],["T_VARIABLE","$row",407],"[",["T_CONSTANT_ENCAPSED_STRING","'product_super_attribute_id'",407],"]",";",["T_WHITESPACE","\n            ",407],"}",["T_WHITESPACE","\n        ",408],"}",["T_WHITESPACE","\n        ",409],["T_RETURN","return",410],["T_WHITESPACE"," ",410],["T_VARIABLE","$this",410],";",["T_WHITESPACE","\n    ",410],"}",["T_WHITESPACE","\n\n    ",411],["T_DOC_COMMENT","\/**\n     * Validate and prepare data about super attributes and associated products.\n     *\n     * @return $this\n     * @SuppressWarnings(PHPMD.CyclomaticComplexity)\n     *\/",413],["T_WHITESPACE","\n    ",418],["T_PROTECTED","protected",419],["T_WHITESPACE"," ",419],["T_FUNCTION","function",419],["T_WHITESPACE"," ",419],["T_STRING","_processSuperData",419],"(",")",["T_WHITESPACE","\n    ",419],"{",["T_WHITESPACE","\n        ",420],["T_VARIABLE","$metadata",421],["T_WHITESPACE"," ",421],"=",["T_WHITESPACE"," ",421],["T_VARIABLE","$this",421],["T_OBJECT_OPERATOR","->",421],["T_STRING","metadataPool",421],["T_OBJECT_OPERATOR","->",421],["T_STRING","getMetadata",421],"(",["T_STRING","ProductInterface",421],["T_DOUBLE_COLON","::",421],["T_CLASS","class",421],")",";",["T_WHITESPACE","\n        ",421],["T_IF","if",422],["T_WHITESPACE"," ",422],"(",["T_VARIABLE","$this",422],["T_OBJECT_OPERATOR","->",422],["T_STRING","_productSuperData",422],")",["T_WHITESPACE"," ",422],"{",["T_WHITESPACE","\n            ",422],["T_VARIABLE","$usedCombs",423],["T_WHITESPACE"," ",423],"=",["T_WHITESPACE"," ",423],"[","]",";",["T_WHITESPACE","\n            ",423],["T_COMMENT","\/\/ is associated products applicable?\n",424],["T_WHITESPACE","            ",425],["T_FOREACH","foreach",425],["T_WHITESPACE"," ",425],"(",["T_STRING","array_keys",425],"(",["T_VARIABLE","$this",425],["T_OBJECT_OPERATOR","->",425],["T_STRING","_productSuperData",425],"[",["T_CONSTANT_ENCAPSED_STRING","'assoc_ids'",425],"]",")",["T_WHITESPACE"," ",425],["T_AS","as",425],["T_WHITESPACE"," ",425],["T_VARIABLE","$assocId",425],")",["T_WHITESPACE"," ",425],"{",["T_WHITESPACE","\n                ",425],["T_IF","if",426],["T_WHITESPACE"," ",426],"(","!",["T_ISSET","isset",426],"(",["T_VARIABLE","$this",426],["T_OBJECT_OPERATOR","->",426],["T_STRING","_skuSuperAttributeValues",426],"[",["T_VARIABLE","$this",426],["T_OBJECT_OPERATOR","->",426],["T_STRING","_productSuperData",426],"[",["T_CONSTANT_ENCAPSED_STRING","'attr_set_code'",426],"]","]","[",["T_VARIABLE","$assocId",426],"]",")",")",["T_WHITESPACE"," ",426],"{",["T_WHITESPACE","\n                    ",426],["T_CONTINUE","continue",427],";",["T_WHITESPACE","\n                ",427],"}",["T_WHITESPACE","\n                ",428],["T_IF","if",429],["T_WHITESPACE"," ",429],"(",["T_VARIABLE","$this",429],["T_OBJECT_OPERATOR","->",429],["T_STRING","_productSuperData",429],"[",["T_CONSTANT_ENCAPSED_STRING","'used_attributes'",429],"]",")",["T_WHITESPACE"," ",429],"{",["T_WHITESPACE","\n                    ",429],["T_VARIABLE","$skuSuperValues",430],["T_WHITESPACE"," ",430],"=",["T_WHITESPACE"," ",430],["T_VARIABLE","$this",430],["T_WHITESPACE","\n                        ",430],["T_OBJECT_OPERATOR","->",431],["T_STRING","_skuSuperAttributeValues",431],"[",["T_VARIABLE","$this",431],["T_OBJECT_OPERATOR","->",431],["T_STRING","_productSuperData",431],"[",["T_CONSTANT_ENCAPSED_STRING","'attr_set_code'",431],"]","]","[",["T_VARIABLE","$assocId",431],"]",";",["T_WHITESPACE","\n                    ",431],["T_VARIABLE","$usedCombParts",432],["T_WHITESPACE"," ",432],"=",["T_WHITESPACE"," ",432],"[","]",";",["T_WHITESPACE","\n\n                    ",432],["T_FOREACH","foreach",434],["T_WHITESPACE"," ",434],"(",["T_VARIABLE","$this",434],["T_OBJECT_OPERATOR","->",434],["T_STRING","_productSuperData",434],"[",["T_CONSTANT_ENCAPSED_STRING","'used_attributes'",434],"]",["T_WHITESPACE"," ",434],["T_AS","as",434],["T_WHITESPACE"," ",434],["T_VARIABLE","$usedAttrId",434],["T_WHITESPACE"," ",434],["T_DOUBLE_ARROW","=>",434],["T_WHITESPACE"," ",434],["T_VARIABLE","$usedValues",434],")",["T_WHITESPACE"," ",434],"{",["T_WHITESPACE","\n                        ",434],["T_IF","if",435],["T_WHITESPACE"," ",435],"(",["T_EMPTY","empty",435],"(",["T_VARIABLE","$skuSuperValues",435],"[",["T_VARIABLE","$usedAttrId",435],"]",")",["T_WHITESPACE"," ",435],["T_BOOLEAN_OR","||",435],["T_WHITESPACE"," ",435],"!",["T_ISSET","isset",435],"(",["T_VARIABLE","$usedValues",435],"[",["T_VARIABLE","$skuSuperValues",435],"[",["T_VARIABLE","$usedAttrId",435],"]","]",")",")",["T_WHITESPACE"," ",435],"{",["T_WHITESPACE","\n                            ",435],["T_COMMENT","\/\/ invalid value or value does not exists for associated product\n",436],["T_WHITESPACE","                            ",437],["T_CONTINUE","continue",437],";",["T_WHITESPACE","\n                        ",437],"}",["T_WHITESPACE","\n                        ",438],["T_VARIABLE","$usedCombParts",439],"[","]",["T_WHITESPACE"," ",439],"=",["T_WHITESPACE"," ",439],["T_VARIABLE","$skuSuperValues",439],"[",["T_VARIABLE","$usedAttrId",439],"]",";",["T_WHITESPACE","\n                        ",439],["T_VARIABLE","$this",440],["T_OBJECT_OPERATOR","->",440],["T_STRING","_productSuperData",440],"[",["T_CONSTANT_ENCAPSED_STRING","'used_attributes'",440],"]","[",["T_VARIABLE","$usedAttrId",440],"]","[",["T_VARIABLE","$skuSuperValues",440],"[",["T_VARIABLE","$usedAttrId",440],"]","]",["T_WHITESPACE"," ",440],"=",["T_WHITESPACE"," ",440],["T_STRING","true",440],";",["T_WHITESPACE","\n                    ",440],"}",["T_WHITESPACE","\n                    ",441],["T_VARIABLE","$comb",442],["T_WHITESPACE"," ",442],"=",["T_WHITESPACE"," ",442],["T_STRING","implode",442],"(",["T_CONSTANT_ENCAPSED_STRING","'|'",442],",",["T_WHITESPACE"," ",442],["T_VARIABLE","$usedCombParts",442],")",";",["T_WHITESPACE","\n\n                    ",442],["T_IF","if",444],["T_WHITESPACE"," ",444],"(",["T_ISSET","isset",444],"(",["T_VARIABLE","$usedCombs",444],"[",["T_VARIABLE","$comb",444],"]",")",")",["T_WHITESPACE"," ",444],"{",["T_WHITESPACE","\n                        ",444],["T_COMMENT","\/\/ super attributes values combination was already used\n",445],["T_WHITESPACE","                        ",446],["T_CONTINUE","continue",446],";",["T_WHITESPACE","\n                    ",446],"}",["T_WHITESPACE","\n                    ",447],["T_VARIABLE","$usedCombs",448],"[",["T_VARIABLE","$comb",448],"]",["T_WHITESPACE"," ",448],"=",["T_WHITESPACE"," ",448],["T_STRING","true",448],";",["T_WHITESPACE","\n                ",448],"}",["T_WHITESPACE","\n                ",449],["T_VARIABLE","$this",450],["T_OBJECT_OPERATOR","->",450],["T_STRING","_superAttributesData",450],"[",["T_CONSTANT_ENCAPSED_STRING","'super_link'",450],"]","[","]",["T_WHITESPACE"," ",450],"=",["T_WHITESPACE"," ",450],"[",["T_WHITESPACE","\n                    ",450],["T_CONSTANT_ENCAPSED_STRING","'product_id'",451],["T_WHITESPACE"," ",451],["T_DOUBLE_ARROW","=>",451],["T_WHITESPACE"," ",451],["T_VARIABLE","$this",451],["T_OBJECT_OPERATOR","->",451],["T_STRING","_productSuperData",451],"[",["T_CONSTANT_ENCAPSED_STRING","'assoc_entity_ids'",451],"]","[",["T_VARIABLE","$assocId",451],"]",",",["T_WHITESPACE","\n                    ",451],["T_CONSTANT_ENCAPSED_STRING","'parent_id'",452],["T_WHITESPACE"," ",452],["T_DOUBLE_ARROW","=>",452],["T_WHITESPACE"," ",452],["T_VARIABLE","$this",452],["T_OBJECT_OPERATOR","->",452],["T_STRING","_productSuperData",452],"[",["T_CONSTANT_ENCAPSED_STRING","'product_id'",452],"]",",",["T_WHITESPACE","\n                ",452],"]",";",["T_WHITESPACE","\n                ",453],["T_VARIABLE","$subEntityId",454],["T_WHITESPACE"," ",454],"=",["T_WHITESPACE"," ",454],["T_VARIABLE","$this",454],["T_OBJECT_OPERATOR","->",454],["T_STRING","connection",454],["T_OBJECT_OPERATOR","->",454],["T_STRING","fetchOne",454],"(",["T_WHITESPACE","\n                    ",454],["T_VARIABLE","$this",455],["T_OBJECT_OPERATOR","->",455],["T_STRING","connection",455],["T_OBJECT_OPERATOR","->",455],["T_STRING","select",455],"(",")",["T_OBJECT_OPERATOR","->",455],["T_STRING","from",455],"(",["T_WHITESPACE","\n                        ",455],"[",["T_CONSTANT_ENCAPSED_STRING","'cpe'",456],["T_WHITESPACE"," ",456],["T_DOUBLE_ARROW","=>",456],["T_WHITESPACE"," ",456],["T_VARIABLE","$this",456],["T_OBJECT_OPERATOR","->",456],["T_STRING","_resource",456],["T_OBJECT_OPERATOR","->",456],["T_STRING","getTableName",456],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog_product_entity'",456],")","]",",",["T_WHITESPACE"," ",456],"[",["T_CONSTANT_ENCAPSED_STRING","'entity_id'",456],"]",["T_WHITESPACE","\n                    ",456],")",["T_OBJECT_OPERATOR","->",457],["T_STRING","where",457],"(",["T_VARIABLE","$metadata",457],["T_OBJECT_OPERATOR","->",457],["T_STRING","getLinkField",457],"(",")",["T_WHITESPACE"," ",457],".",["T_WHITESPACE"," ",457],["T_CONSTANT_ENCAPSED_STRING","' = ?'",457],",",["T_WHITESPACE"," ",457],["T_VARIABLE","$assocId",457],")",["T_WHITESPACE","\n                ",457],")",";",["T_WHITESPACE","\n                ",458],["T_VARIABLE","$this",459],["T_OBJECT_OPERATOR","->",459],["T_STRING","_superAttributesData",459],"[",["T_CONSTANT_ENCAPSED_STRING","'relation'",459],"]","[","]",["T_WHITESPACE"," ",459],"=",["T_WHITESPACE"," ",459],"[",["T_WHITESPACE","\n                    ",459],["T_CONSTANT_ENCAPSED_STRING","'parent_id'",460],["T_WHITESPACE"," ",460],["T_DOUBLE_ARROW","=>",460],["T_WHITESPACE"," ",460],["T_VARIABLE","$this",460],["T_OBJECT_OPERATOR","->",460],["T_STRING","_productSuperData",460],"[",["T_CONSTANT_ENCAPSED_STRING","'product_id'",460],"]",",",["T_WHITESPACE","\n                    ",460],["T_CONSTANT_ENCAPSED_STRING","'child_id'",461],["T_WHITESPACE"," ",461],["T_DOUBLE_ARROW","=>",461],["T_WHITESPACE"," ",461],["T_VARIABLE","$subEntityId",461],",",["T_WHITESPACE","\n                ",461],"]",";",["T_WHITESPACE","\n            ",462],"}",["T_WHITESPACE","\n        ",463],"}",["T_WHITESPACE","\n        ",464],["T_RETURN","return",465],["T_WHITESPACE"," ",465],["T_VARIABLE","$this",465],";",["T_WHITESPACE","\n    ",465],"}",["T_WHITESPACE","\n\n    ",466],["T_DOC_COMMENT","\/**\n     * Parse variations string to inner format.\n     *\n     * @param array $rowData\n     *\n     * @return array\n     * @SuppressWarnings(PHPMD.CyclomaticComplexity)\n     * @SuppressWarnings(PHPMD.NPathComplexity)\n     *\/",468],["T_WHITESPACE","\n    ",476],["T_PROTECTED","protected",477],["T_WHITESPACE"," ",477],["T_FUNCTION","function",477],["T_WHITESPACE"," ",477],["T_STRING","_parseVariations",477],"(",["T_VARIABLE","$rowData",477],")",["T_WHITESPACE","\n    ",477],"{",["T_WHITESPACE","\n        ",478],["T_VARIABLE","$additionalRows",479],["T_WHITESPACE"," ",479],"=",["T_WHITESPACE"," ",479],"[","]",";",["T_WHITESPACE","\n        ",479],["T_IF","if",480],["T_WHITESPACE"," ",480],"(","!",["T_ISSET","isset",480],"(",["T_VARIABLE","$rowData",480],"[",["T_CONSTANT_ENCAPSED_STRING","'configurable_variations'",480],"]",")",")",["T_WHITESPACE"," ",480],"{",["T_WHITESPACE","\n            ",480],["T_RETURN","return",481],["T_WHITESPACE"," ",481],["T_VARIABLE","$additionalRows",481],";",["T_WHITESPACE","\n        ",481],"}",["T_WHITESPACE","\n        ",482],["T_VARIABLE","$variations",483],["T_WHITESPACE"," ",483],"=",["T_WHITESPACE"," ",483],["T_STRING","explode",483],"(",["T_STRING","ImportProduct",483],["T_DOUBLE_COLON","::",483],["T_STRING","PSEUDO_MULTI_LINE_SEPARATOR",483],",",["T_WHITESPACE"," ",483],["T_VARIABLE","$rowData",483],"[",["T_CONSTANT_ENCAPSED_STRING","'configurable_variations'",483],"]",")",";",["T_WHITESPACE","\n        ",483],["T_FOREACH","foreach",484],["T_WHITESPACE"," ",484],"(",["T_VARIABLE","$variations",484],["T_WHITESPACE"," ",484],["T_AS","as",484],["T_WHITESPACE"," ",484],["T_VARIABLE","$variation",484],")",["T_WHITESPACE"," ",484],"{",["T_WHITESPACE","\n            ",484],["T_VARIABLE","$fieldAndValuePairsText",485],["T_WHITESPACE"," ",485],"=",["T_WHITESPACE"," ",485],["T_STRING","explode",485],"(",["T_VARIABLE","$this",485],["T_OBJECT_OPERATOR","->",485],["T_STRING","_entityModel",485],["T_OBJECT_OPERATOR","->",485],["T_STRING","getMultipleValueSeparator",485],"(",")",",",["T_WHITESPACE"," ",485],["T_VARIABLE","$variation",485],")",";",["T_WHITESPACE","\n            ",485],["T_VARIABLE","$additionalRow",486],["T_WHITESPACE"," ",486],"=",["T_WHITESPACE"," ",486],"[","]",";",["T_WHITESPACE","\n\n            ",486],["T_VARIABLE","$fieldAndValuePairs",488],["T_WHITESPACE"," ",488],"=",["T_WHITESPACE"," ",488],"[","]",";",["T_WHITESPACE","\n            ",488],["T_FOREACH","foreach",489],["T_WHITESPACE"," ",489],"(",["T_VARIABLE","$fieldAndValuePairsText",489],["T_WHITESPACE"," ",489],["T_AS","as",489],["T_WHITESPACE"," ",489],["T_VARIABLE","$nameAndValue",489],")",["T_WHITESPACE"," ",489],"{",["T_WHITESPACE","\n                ",489],["T_VARIABLE","$nameAndValue",490],["T_WHITESPACE"," ",490],"=",["T_WHITESPACE"," ",490],["T_STRING","explode",490],"(",["T_STRING","ImportProduct",490],["T_DOUBLE_COLON","::",490],["T_STRING","PAIR_NAME_VALUE_SEPARATOR",490],",",["T_WHITESPACE"," ",490],["T_VARIABLE","$nameAndValue",490],")",";",["T_WHITESPACE","\n                ",490],["T_IF","if",491],["T_WHITESPACE"," ",491],"(","!",["T_EMPTY","empty",491],"(",["T_VARIABLE","$nameAndValue",491],")",")",["T_WHITESPACE"," ",491],"{",["T_WHITESPACE","\n                    ",491],["T_VARIABLE","$value",492],["T_WHITESPACE"," ",492],"=",["T_WHITESPACE"," ",492],["T_ISSET","isset",492],"(",["T_VARIABLE","$nameAndValue",492],"[",["T_LNUMBER","1",492],"]",")",["T_WHITESPACE"," ",492],"?",["T_WHITESPACE"," ",492],["T_STRING","trim",492],"(",["T_VARIABLE","$nameAndValue",492],"[",["T_LNUMBER","1",492],"]",")",["T_WHITESPACE"," ",492],":",["T_WHITESPACE"," ",492],["T_CONSTANT_ENCAPSED_STRING","''",492],";",["T_WHITESPACE","\n                    ",492],["T_VARIABLE","$fieldName",493],["T_WHITESPACE","  ",493],"=",["T_WHITESPACE"," ",493],["T_STRING","trim",493],"(",["T_VARIABLE","$nameAndValue",493],"[",["T_LNUMBER","0",493],"]",")",";",["T_WHITESPACE","\n                    ",493],["T_IF","if",494],["T_WHITESPACE"," ",494],"(",["T_VARIABLE","$fieldName",494],")",["T_WHITESPACE"," ",494],"{",["T_WHITESPACE","\n                        ",494],["T_VARIABLE","$fieldAndValuePairs",495],"[",["T_VARIABLE","$fieldName",495],"]",["T_WHITESPACE"," ",495],"=",["T_WHITESPACE"," ",495],["T_VARIABLE","$value",495],";",["T_WHITESPACE","\n                    ",495],"}",["T_WHITESPACE","\n                ",496],"}",["T_WHITESPACE","\n            ",497],"}",["T_WHITESPACE","\n\n            ",498],["T_IF","if",500],["T_WHITESPACE"," ",500],"(","!",["T_EMPTY","empty",500],"(",["T_VARIABLE","$fieldAndValuePairs",500],"[",["T_CONSTANT_ENCAPSED_STRING","'sku'",500],"]",")",")",["T_WHITESPACE"," ",500],"{",["T_WHITESPACE","\n                ",500],["T_VARIABLE","$additionalRow",501],"[",["T_CONSTANT_ENCAPSED_STRING","'_super_products_sku'",501],"]",["T_WHITESPACE"," ",501],"=",["T_WHITESPACE"," ",501],["T_VARIABLE","$fieldAndValuePairs",501],"[",["T_CONSTANT_ENCAPSED_STRING","'sku'",501],"]",";",["T_WHITESPACE","\n                ",501],["T_UNSET","unset",502],"(",["T_VARIABLE","$fieldAndValuePairs",502],"[",["T_CONSTANT_ENCAPSED_STRING","'sku'",502],"]",")",";",["T_WHITESPACE","\n                ",502],["T_VARIABLE","$additionalRow",503],"[",["T_CONSTANT_ENCAPSED_STRING","'display'",503],"]",["T_WHITESPACE"," ",503],"=",["T_WHITESPACE"," ",503],["T_ISSET","isset",503],"(",["T_VARIABLE","$fieldAndValuePairs",503],"[",["T_CONSTANT_ENCAPSED_STRING","'display'",503],"]",")",["T_WHITESPACE"," ",503],"?",["T_WHITESPACE"," ",503],["T_VARIABLE","$fieldAndValuePairs",503],"[",["T_CONSTANT_ENCAPSED_STRING","'display'",503],"]",["T_WHITESPACE"," ",503],":",["T_WHITESPACE"," ",503],["T_LNUMBER","1",503],";",["T_WHITESPACE","\n                ",503],["T_UNSET","unset",504],"(",["T_VARIABLE","$fieldAndValuePairs",504],"[",["T_CONSTANT_ENCAPSED_STRING","'display'",504],"]",")",";",["T_WHITESPACE","\n                ",504],["T_FOREACH","foreach",505],["T_WHITESPACE"," ",505],"(",["T_VARIABLE","$fieldAndValuePairs",505],["T_WHITESPACE"," ",505],["T_AS","as",505],["T_WHITESPACE"," ",505],["T_VARIABLE","$attrCode",505],["T_WHITESPACE"," ",505],["T_DOUBLE_ARROW","=>",505],["T_WHITESPACE"," ",505],["T_VARIABLE","$attrValue",505],")",["T_WHITESPACE"," ",505],"{",["T_WHITESPACE","\n                    ",505],["T_VARIABLE","$additionalRow",506],"[",["T_CONSTANT_ENCAPSED_STRING","'_super_attribute_code'",506],"]",["T_WHITESPACE"," ",506],"=",["T_WHITESPACE"," ",506],["T_VARIABLE","$attrCode",506],";",["T_WHITESPACE","\n                    ",506],["T_VARIABLE","$additionalRow",507],"[",["T_CONSTANT_ENCAPSED_STRING","'_super_attribute_option'",507],"]",["T_WHITESPACE"," ",507],"=",["T_WHITESPACE"," ",507],["T_VARIABLE","$attrValue",507],";",["T_WHITESPACE","\n                    ",507],["T_VARIABLE","$additionalRows",508],"[","]",["T_WHITESPACE"," ",508],"=",["T_WHITESPACE"," ",508],["T_VARIABLE","$additionalRow",508],";",["T_WHITESPACE","\n                    ",508],["T_VARIABLE","$additionalRow",509],["T_WHITESPACE"," ",509],"=",["T_WHITESPACE"," ",509],"[","]",";",["T_WHITESPACE","\n                ",509],"}",["T_WHITESPACE","\n            ",510],"}",["T_WHITESPACE","\n        ",511],"}",["T_WHITESPACE","\n        ",512],["T_RETURN","return",513],["T_WHITESPACE"," ",513],["T_VARIABLE","$additionalRows",513],";",["T_WHITESPACE","\n    ",513],"}",["T_WHITESPACE","\n\n    ",514],["T_DOC_COMMENT","\/**\n     * Parse variation labels to array\n     *  ...attribute_code => label ...\n     *  ...attribute_code2 => label2 ...\n     *\n     * @param array $rowData\n     *\n     * @return array\n     *\/",516],["T_WHITESPACE","\n    ",524],["T_PROTECTED","protected",525],["T_WHITESPACE"," ",525],["T_FUNCTION","function",525],["T_WHITESPACE"," ",525],["T_STRING","_parseVariationLabels",525],"(",["T_VARIABLE","$rowData",525],")",["T_WHITESPACE","\n    ",525],"{",["T_WHITESPACE","\n        ",526],["T_VARIABLE","$labels",527],["T_WHITESPACE"," ",527],"=",["T_WHITESPACE"," ",527],"[","]",";",["T_WHITESPACE","\n        ",527],["T_IF","if",528],["T_WHITESPACE"," ",528],"(","!",["T_ISSET","isset",528],"(",["T_VARIABLE","$rowData",528],"[",["T_CONSTANT_ENCAPSED_STRING","'configurable_variation_labels'",528],"]",")",")",["T_WHITESPACE"," ",528],"{",["T_WHITESPACE","\n            ",528],["T_RETURN","return",529],["T_WHITESPACE"," ",529],["T_VARIABLE","$labels",529],";",["T_WHITESPACE","\n        ",529],"}",["T_WHITESPACE","\n        ",530],["T_VARIABLE","$pairFieldAndValue",531],["T_WHITESPACE"," ",531],"=",["T_WHITESPACE"," ",531],["T_STRING","explode",531],"(",["T_WHITESPACE","\n            ",531],["T_VARIABLE","$this",532],["T_OBJECT_OPERATOR","->",532],["T_STRING","_entityModel",532],["T_OBJECT_OPERATOR","->",532],["T_STRING","getMultipleValueSeparator",532],"(",")",",",["T_WHITESPACE","\n            ",532],["T_VARIABLE","$rowData",533],"[",["T_CONSTANT_ENCAPSED_STRING","'configurable_variation_labels'",533],"]",["T_WHITESPACE","\n        ",533],")",";",["T_WHITESPACE","\n\n        ",534],["T_FOREACH","foreach",536],["T_WHITESPACE"," ",536],"(",["T_VARIABLE","$pairFieldAndValue",536],["T_WHITESPACE"," ",536],["T_AS","as",536],["T_WHITESPACE"," ",536],["T_VARIABLE","$nameAndValue",536],")",["T_WHITESPACE"," ",536],"{",["T_WHITESPACE","\n            ",536],["T_VARIABLE","$nameAndValue",537],["T_WHITESPACE"," ",537],"=",["T_WHITESPACE"," ",537],["T_STRING","explode",537],"(",["T_STRING","ImportProduct",537],["T_DOUBLE_COLON","::",537],["T_STRING","PAIR_NAME_VALUE_SEPARATOR",537],",",["T_WHITESPACE"," ",537],["T_VARIABLE","$nameAndValue",537],")",";",["T_WHITESPACE","\n            ",537],["T_IF","if",538],["T_WHITESPACE"," ",538],"(","!",["T_EMPTY","empty",538],"(",["T_VARIABLE","$nameAndValue",538],")",")",["T_WHITESPACE"," ",538],"{",["T_WHITESPACE","\n                ",538],["T_VARIABLE","$value",539],["T_WHITESPACE"," ",539],"=",["T_WHITESPACE"," ",539],["T_ISSET","isset",539],"(",["T_VARIABLE","$nameAndValue",539],"[",["T_LNUMBER","1",539],"]",")",["T_WHITESPACE"," ",539],"?",["T_WHITESPACE"," ",539],["T_STRING","trim",539],"(",["T_VARIABLE","$nameAndValue",539],"[",["T_LNUMBER","1",539],"]",")",["T_WHITESPACE"," ",539],":",["T_WHITESPACE"," ",539],["T_CONSTANT_ENCAPSED_STRING","''",539],";",["T_WHITESPACE","\n                ",539],["T_VARIABLE","$attrCode",540],["T_WHITESPACE","  ",540],"=",["T_WHITESPACE"," ",540],["T_STRING","trim",540],"(",["T_VARIABLE","$nameAndValue",540],"[",["T_LNUMBER","0",540],"]",")",";",["T_WHITESPACE","\n                ",540],["T_IF","if",541],["T_WHITESPACE"," ",541],"(",["T_VARIABLE","$attrCode",541],")",["T_WHITESPACE"," ",541],"{",["T_WHITESPACE","\n                    ",541],["T_VARIABLE","$labels",542],"[",["T_VARIABLE","$attrCode",542],"]",["T_WHITESPACE"," ",542],"=",["T_WHITESPACE"," ",542],["T_VARIABLE","$value",542],";",["T_WHITESPACE","\n                ",542],"}",["T_WHITESPACE","\n            ",543],"}",["T_WHITESPACE","\n        ",544],"}",["T_WHITESPACE","\n        ",545],["T_RETURN","return",546],["T_WHITESPACE"," ",546],["T_VARIABLE","$labels",546],";",["T_WHITESPACE","\n    ",546],"}",["T_WHITESPACE","\n\n    ",547],["T_DOC_COMMENT","\/**\n     * Delete unnecessary links.\n     *\n     * @return $this\n     *\/",549],["T_WHITESPACE","\n    ",553],["T_PROTECTED","protected",554],["T_WHITESPACE"," ",554],["T_FUNCTION","function",554],["T_WHITESPACE"," ",554],["T_STRING","_deleteData",554],"(",")",["T_WHITESPACE","\n    ",554],"{",["T_WHITESPACE","\n        ",555],["T_VARIABLE","$linkTable",556],["T_WHITESPACE"," ",556],"=",["T_WHITESPACE"," ",556],["T_VARIABLE","$this",556],["T_OBJECT_OPERATOR","->",556],["T_STRING","_resource",556],["T_OBJECT_OPERATOR","->",556],["T_STRING","getTableName",556],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog_product_super_link'",556],")",";",["T_WHITESPACE","\n        ",556],["T_VARIABLE","$relationTable",557],["T_WHITESPACE"," ",557],"=",["T_WHITESPACE"," ",557],["T_VARIABLE","$this",557],["T_OBJECT_OPERATOR","->",557],["T_STRING","_resource",557],["T_OBJECT_OPERATOR","->",557],["T_STRING","getTableName",557],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog_product_relation'",557],")",";",["T_WHITESPACE","\n\n        ",557],["T_IF","if",559],["T_WHITESPACE"," ",559],"(","(",["T_VARIABLE","$this",559],["T_OBJECT_OPERATOR","->",559],["T_STRING","_entityModel",559],["T_OBJECT_OPERATOR","->",559],["T_STRING","getBehavior",559],"(",")",["T_WHITESPACE"," ",559],["T_IS_EQUAL","==",559],["T_WHITESPACE"," ",559],["T_NS_SEPARATOR","\\",559],["T_STRING","Magento",559],["T_NS_SEPARATOR","\\",559],["T_STRING","ImportExport",559],["T_NS_SEPARATOR","\\",559],["T_STRING","Model",559],["T_NS_SEPARATOR","\\",559],["T_STRING","Import",559],["T_DOUBLE_COLON","::",559],["T_STRING","BEHAVIOR_APPEND",559],")",["T_WHITESPACE","\n            ",559],["T_BOOLEAN_AND","&&",560],["T_WHITESPACE"," ",560],"!",["T_EMPTY","empty",560],"(",["T_VARIABLE","$this",560],["T_OBJECT_OPERATOR","->",560],["T_STRING","_productSuperData",560],"[",["T_CONSTANT_ENCAPSED_STRING","'product_id'",560],"]",")",["T_WHITESPACE","\n            ",560],["T_BOOLEAN_AND","&&",561],["T_WHITESPACE"," ",561],"!",["T_EMPTY","empty",561],"(",["T_VARIABLE","$this",561],["T_OBJECT_OPERATOR","->",561],["T_STRING","_simpleIdsToDelete",561],")",["T_WHITESPACE","\n        ",561],")",["T_WHITESPACE"," ",562],"{",["T_WHITESPACE","\n            ",562],["T_VARIABLE","$quoted",563],["T_WHITESPACE"," ",563],"=",["T_WHITESPACE"," ",563],["T_VARIABLE","$this",563],["T_OBJECT_OPERATOR","->",563],["T_STRING","connection",563],["T_OBJECT_OPERATOR","->",563],["T_STRING","quoteInto",563],"(",["T_CONSTANT_ENCAPSED_STRING","'IN (?)'",563],",",["T_WHITESPACE"," ",563],"[",["T_VARIABLE","$this",563],["T_OBJECT_OPERATOR","->",563],["T_STRING","_productSuperData",563],"[",["T_CONSTANT_ENCAPSED_STRING","'product_id'",563],"]","]",")",";",["T_WHITESPACE","\n            ",563],["T_VARIABLE","$quotedChildren",564],["T_WHITESPACE"," ",564],"=",["T_WHITESPACE"," ",564],["T_VARIABLE","$this",564],["T_OBJECT_OPERATOR","->",564],["T_STRING","connection",564],["T_OBJECT_OPERATOR","->",564],["T_STRING","quoteInto",564],"(",["T_CONSTANT_ENCAPSED_STRING","'IN (?)'",564],",",["T_WHITESPACE"," ",564],["T_VARIABLE","$this",564],["T_OBJECT_OPERATOR","->",564],["T_STRING","_simpleIdsToDelete",564],")",";",["T_WHITESPACE","\n            ",564],["T_VARIABLE","$this",565],["T_OBJECT_OPERATOR","->",565],["T_STRING","connection",565],["T_OBJECT_OPERATOR","->",565],["T_STRING","delete",565],"(",["T_VARIABLE","$linkTable",565],",",["T_WHITESPACE"," ",565],"\"",["T_ENCAPSED_AND_WHITESPACE","parent_id ",565],["T_CURLY_OPEN","{",565],["T_VARIABLE","$quoted",565],"}",["T_ENCAPSED_AND_WHITESPACE"," AND product_id ",565],["T_CURLY_OPEN","{",565],["T_VARIABLE","$quotedChildren",565],"}","\"",")",";",["T_WHITESPACE","\n            ",565],["T_VARIABLE","$this",566],["T_OBJECT_OPERATOR","->",566],["T_STRING","connection",566],["T_OBJECT_OPERATOR","->",566],["T_STRING","delete",566],"(",["T_VARIABLE","$relationTable",566],",",["T_WHITESPACE"," ",566],"\"",["T_ENCAPSED_AND_WHITESPACE","parent_id ",566],["T_CURLY_OPEN","{",566],["T_VARIABLE","$quoted",566],"}",["T_ENCAPSED_AND_WHITESPACE"," AND child_id ",566],["T_CURLY_OPEN","{",566],["T_VARIABLE","$quotedChildren",566],"}","\"",")",";",["T_WHITESPACE","\n        ",566],"}",["T_WHITESPACE","\n        ",567],["T_RETURN","return",568],["T_WHITESPACE"," ",568],["T_VARIABLE","$this",568],";",["T_WHITESPACE","\n    ",568],"}",["T_WHITESPACE","\n\n    ",569],["T_DOC_COMMENT","\/**\n     *  Collected link data insertion.\n     *\n     * @return $this\n     * @throws \\Zend_Db_Exception\n     *\/",571],["T_WHITESPACE","\n    ",576],["T_PROTECTED","protected",577],["T_WHITESPACE"," ",577],["T_FUNCTION","function",577],["T_WHITESPACE"," ",577],["T_STRING","_insertData",577],"(",")",["T_WHITESPACE","\n    ",577],"{",["T_WHITESPACE","\n        ",578],["T_VARIABLE","$mainTable",579],["T_WHITESPACE"," ",579],"=",["T_WHITESPACE"," ",579],["T_VARIABLE","$this",579],["T_OBJECT_OPERATOR","->",579],["T_STRING","_resource",579],["T_OBJECT_OPERATOR","->",579],["T_STRING","getTableName",579],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog_product_super_attribute'",579],")",";",["T_WHITESPACE","\n        ",579],["T_VARIABLE","$labelTable",580],["T_WHITESPACE"," ",580],"=",["T_WHITESPACE"," ",580],["T_VARIABLE","$this",580],["T_OBJECT_OPERATOR","->",580],["T_STRING","_resource",580],["T_OBJECT_OPERATOR","->",580],["T_STRING","getTableName",580],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog_product_super_attribute_label'",580],")",";",["T_WHITESPACE","\n        ",580],["T_VARIABLE","$linkTable",581],["T_WHITESPACE"," ",581],"=",["T_WHITESPACE"," ",581],["T_VARIABLE","$this",581],["T_OBJECT_OPERATOR","->",581],["T_STRING","_resource",581],["T_OBJECT_OPERATOR","->",581],["T_STRING","getTableName",581],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog_product_super_link'",581],")",";",["T_WHITESPACE","\n        ",581],["T_VARIABLE","$relationTable",582],["T_WHITESPACE"," ",582],"=",["T_WHITESPACE"," ",582],["T_VARIABLE","$this",582],["T_OBJECT_OPERATOR","->",582],["T_STRING","_resource",582],["T_OBJECT_OPERATOR","->",582],["T_STRING","getTableName",582],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog_product_relation'",582],")",";",["T_WHITESPACE","\n\n        ",582],["T_VARIABLE","$mainData",584],["T_WHITESPACE"," ",584],"=",["T_WHITESPACE"," ",584],"[","]",";",["T_WHITESPACE","\n        ",584],["T_FOREACH","foreach",585],["T_WHITESPACE"," ",585],"(",["T_VARIABLE","$this",585],["T_OBJECT_OPERATOR","->",585],["T_STRING","_superAttributesData",585],"[",["T_CONSTANT_ENCAPSED_STRING","'attributes'",585],"]",["T_WHITESPACE"," ",585],["T_AS","as",585],["T_WHITESPACE"," ",585],["T_VARIABLE","$productId",585],["T_WHITESPACE"," ",585],["T_DOUBLE_ARROW","=>",585],["T_WHITESPACE"," ",585],["T_VARIABLE","$attributesData",585],")",["T_WHITESPACE"," ",585],"{",["T_WHITESPACE","\n            ",585],["T_FOREACH","foreach",586],["T_WHITESPACE"," ",586],"(",["T_VARIABLE","$attributesData",586],["T_WHITESPACE"," ",586],["T_AS","as",586],["T_WHITESPACE"," ",586],["T_VARIABLE","$attrId",586],["T_WHITESPACE"," ",586],["T_DOUBLE_ARROW","=>",586],["T_WHITESPACE"," ",586],["T_VARIABLE","$row",586],")",["T_WHITESPACE"," ",586],"{",["T_WHITESPACE","\n                ",586],["T_VARIABLE","$row",587],"[",["T_CONSTANT_ENCAPSED_STRING","'product_id'",587],"]",["T_WHITESPACE"," ",587],"=",["T_WHITESPACE"," ",587],["T_VARIABLE","$productId",587],";",["T_WHITESPACE","\n                ",587],["T_VARIABLE","$row",588],"[",["T_CONSTANT_ENCAPSED_STRING","'attribute_id'",588],"]",["T_WHITESPACE"," ",588],"=",["T_WHITESPACE"," ",588],["T_VARIABLE","$attrId",588],";",["T_WHITESPACE","\n                ",588],["T_VARIABLE","$mainData",589],"[","]",["T_WHITESPACE"," ",589],"=",["T_WHITESPACE"," ",589],["T_VARIABLE","$row",589],";",["T_WHITESPACE","\n            ",589],"}",["T_WHITESPACE","\n        ",590],"}",["T_WHITESPACE","\n        ",591],["T_IF","if",592],["T_WHITESPACE"," ",592],"(",["T_VARIABLE","$mainData",592],")",["T_WHITESPACE"," ",592],"{",["T_WHITESPACE","\n            ",592],["T_VARIABLE","$this",593],["T_OBJECT_OPERATOR","->",593],["T_STRING","connection",593],["T_OBJECT_OPERATOR","->",593],["T_STRING","insertOnDuplicate",593],"(",["T_VARIABLE","$mainTable",593],",",["T_WHITESPACE"," ",593],["T_VARIABLE","$mainData",593],")",";",["T_WHITESPACE","\n        ",593],"}",["T_WHITESPACE","\n        ",594],["T_IF","if",595],["T_WHITESPACE"," ",595],"(",["T_VARIABLE","$this",595],["T_OBJECT_OPERATOR","->",595],["T_STRING","_superAttributesData",595],"[",["T_CONSTANT_ENCAPSED_STRING","'labels'",595],"]",")",["T_WHITESPACE"," ",595],"{",["T_WHITESPACE","\n            ",595],["T_VARIABLE","$this",596],["T_OBJECT_OPERATOR","->",596],["T_STRING","connection",596],["T_OBJECT_OPERATOR","->",596],["T_STRING","insertOnDuplicate",596],"(",["T_VARIABLE","$labelTable",596],",",["T_WHITESPACE"," ",596],["T_VARIABLE","$this",596],["T_OBJECT_OPERATOR","->",596],["T_STRING","_superAttributesData",596],"[",["T_CONSTANT_ENCAPSED_STRING","'labels'",596],"]",")",";",["T_WHITESPACE","\n        ",596],"}",["T_WHITESPACE","\n        ",597],["T_IF","if",598],["T_WHITESPACE"," ",598],"(",["T_VARIABLE","$this",598],["T_OBJECT_OPERATOR","->",598],["T_STRING","_superAttributesData",598],"[",["T_CONSTANT_ENCAPSED_STRING","'super_link'",598],"]",")",["T_WHITESPACE"," ",598],"{",["T_WHITESPACE","\n            ",598],["T_VARIABLE","$this",599],["T_OBJECT_OPERATOR","->",599],["T_STRING","connection",599],["T_OBJECT_OPERATOR","->",599],["T_STRING","insertOnDuplicate",599],"(",["T_VARIABLE","$linkTable",599],",",["T_WHITESPACE"," ",599],["T_VARIABLE","$this",599],["T_OBJECT_OPERATOR","->",599],["T_STRING","_superAttributesData",599],"[",["T_CONSTANT_ENCAPSED_STRING","'super_link'",599],"]",")",";",["T_WHITESPACE","\n        ",599],"}",["T_WHITESPACE","\n        ",600],["T_IF","if",601],["T_WHITESPACE"," ",601],"(",["T_VARIABLE","$this",601],["T_OBJECT_OPERATOR","->",601],["T_STRING","_superAttributesData",601],"[",["T_CONSTANT_ENCAPSED_STRING","'relation'",601],"]",")",["T_WHITESPACE"," ",601],"{",["T_WHITESPACE","\n            ",601],["T_VARIABLE","$this",602],["T_OBJECT_OPERATOR","->",602],["T_STRING","connection",602],["T_OBJECT_OPERATOR","->",602],["T_STRING","insertOnDuplicate",602],"(",["T_VARIABLE","$relationTable",602],",",["T_WHITESPACE"," ",602],["T_VARIABLE","$this",602],["T_OBJECT_OPERATOR","->",602],["T_STRING","_superAttributesData",602],"[",["T_CONSTANT_ENCAPSED_STRING","'relation'",602],"]",")",";",["T_WHITESPACE","\n        ",602],"}",["T_WHITESPACE","\n        ",603],["T_RETURN","return",604],["T_WHITESPACE"," ",604],["T_VARIABLE","$this",604],";",["T_WHITESPACE","\n    ",604],"}",["T_WHITESPACE","\n\n    ",605],["T_DOC_COMMENT","\/**\n     * Get new supper attribute id.\n     *\n     * @return int\n     *\/",607],["T_WHITESPACE","\n    ",611],["T_PROTECTED","protected",612],["T_WHITESPACE"," ",612],["T_FUNCTION","function",612],["T_WHITESPACE"," ",612],["T_STRING","_getNextAttrId",612],"(",")",["T_WHITESPACE","\n    ",612],"{",["T_WHITESPACE","\n        ",613],["T_IF","if",614],["T_WHITESPACE"," ",614],"(","!",["T_VARIABLE","$this",614],["T_OBJECT_OPERATOR","->",614],["T_STRING","_nextAttrId",614],")",["T_WHITESPACE"," ",614],"{",["T_WHITESPACE","\n            ",614],["T_VARIABLE","$mainTable",615],["T_WHITESPACE"," ",615],"=",["T_WHITESPACE"," ",615],["T_VARIABLE","$this",615],["T_OBJECT_OPERATOR","->",615],["T_STRING","_resource",615],["T_OBJECT_OPERATOR","->",615],["T_STRING","getTableName",615],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog_product_super_attribute'",615],")",";",["T_WHITESPACE","\n            ",615],["T_VARIABLE","$this",616],["T_OBJECT_OPERATOR","->",616],["T_STRING","_nextAttrId",616],["T_WHITESPACE"," ",616],"=",["T_WHITESPACE"," ",616],["T_VARIABLE","$this",616],["T_OBJECT_OPERATOR","->",616],["T_STRING","_resourceHelper",616],["T_OBJECT_OPERATOR","->",616],["T_STRING","getNextAutoincrement",616],"(",["T_VARIABLE","$mainTable",616],")",";",["T_WHITESPACE","\n        ",616],"}",["T_WHITESPACE","\n        ",617],["T_VARIABLE","$this",618],["T_OBJECT_OPERATOR","->",618],["T_STRING","_nextAttrId",618],["T_INC","++",618],";",["T_WHITESPACE","\n        ",618],["T_RETURN","return",619],["T_WHITESPACE"," ",619],["T_VARIABLE","$this",619],["T_OBJECT_OPERATOR","->",619],["T_STRING","_nextAttrId",619],";",["T_WHITESPACE","\n    ",619],"}",["T_WHITESPACE","\n\n    ",620],["T_DOC_COMMENT","\/**\n     *  Collect super data.\n     *\n     * @param array $rowData\n     * @return $this\n     *\/",622],["T_WHITESPACE","\n    ",627],["T_PROTECTED","protected",628],["T_WHITESPACE"," ",628],["T_FUNCTION","function",628],["T_WHITESPACE"," ",628],["T_STRING","_collectSuperData",628],"(",["T_VARIABLE","$rowData",628],")",["T_WHITESPACE","\n    ",628],"{",["T_WHITESPACE","\n        ",629],["T_VARIABLE","$entityId",630],["T_WHITESPACE"," ",630],"=",["T_WHITESPACE"," ",630],["T_VARIABLE","$this",630],["T_OBJECT_OPERATOR","->",630],["T_STRING","_productData",630],"[",["T_VARIABLE","$this",630],["T_OBJECT_OPERATOR","->",630],["T_STRING","getProductEntityIdentifierField",630],"(",")","]",";",["T_WHITESPACE","\n        ",630],["T_VARIABLE","$linkId",631],["T_WHITESPACE"," ",631],"=",["T_WHITESPACE"," ",631],["T_VARIABLE","$this",631],["T_OBJECT_OPERATOR","->",631],["T_STRING","_productData",631],"[",["T_VARIABLE","$this",631],["T_OBJECT_OPERATOR","->",631],["T_STRING","getProductEntityLinkField",631],"(",")","]",";",["T_WHITESPACE","\n\n        ",631],["T_VARIABLE","$this",633],["T_OBJECT_OPERATOR","->",633],["T_STRING","_processSuperData",633],"(",")",";",["T_WHITESPACE","\n\n        ",633],["T_VARIABLE","$this",635],["T_OBJECT_OPERATOR","->",635],["T_STRING","_productSuperData",635],["T_WHITESPACE"," ",635],"=",["T_WHITESPACE"," ",635],"[",["T_WHITESPACE","\n            ",635],["T_CONSTANT_ENCAPSED_STRING","'product_id'",636],["T_WHITESPACE"," ",636],["T_DOUBLE_ARROW","=>",636],["T_WHITESPACE"," ",636],["T_VARIABLE","$linkId",636],",",["T_WHITESPACE","\n            ",636],["T_CONSTANT_ENCAPSED_STRING","'entity_id'",637],["T_WHITESPACE"," ",637],["T_DOUBLE_ARROW","=>",637],["T_WHITESPACE"," ",637],["T_VARIABLE","$entityId",637],",",["T_WHITESPACE","\n            ",637],["T_CONSTANT_ENCAPSED_STRING","'attr_set_code'",638],["T_WHITESPACE"," ",638],["T_DOUBLE_ARROW","=>",638],["T_WHITESPACE"," ",638],["T_VARIABLE","$this",638],["T_OBJECT_OPERATOR","->",638],["T_STRING","_productData",638],"[",["T_CONSTANT_ENCAPSED_STRING","'attr_set_code'",638],"]",",",["T_WHITESPACE","\n            ",638],["T_CONSTANT_ENCAPSED_STRING","'used_attributes'",639],["T_WHITESPACE"," ",639],["T_DOUBLE_ARROW","=>",639],["T_WHITESPACE"," ",639],["T_EMPTY","empty",639],"(",["T_VARIABLE","$this",639],["T_OBJECT_OPERATOR","->",639],["T_STRING","_skuSuperData",639],"[",["T_VARIABLE","$linkId",639],"]",")",["T_WHITESPACE"," ",639],"?",["T_WHITESPACE"," ",639],"[","]",["T_WHITESPACE"," ",639],":",["T_WHITESPACE"," ",639],["T_VARIABLE","$this",639],["T_OBJECT_OPERATOR","->",639],["T_STRING","_skuSuperData",639],"[",["T_VARIABLE","$linkId",639],"]",",",["T_WHITESPACE","\n            ",639],["T_CONSTANT_ENCAPSED_STRING","'assoc_ids'",640],["T_WHITESPACE"," ",640],["T_DOUBLE_ARROW","=>",640],["T_WHITESPACE"," ",640],"[","]",",",["T_WHITESPACE","\n        ",640],"]",";",["T_WHITESPACE","\n\n        ",641],["T_VARIABLE","$additionalRows",643],["T_WHITESPACE"," ",643],"=",["T_WHITESPACE"," ",643],["T_VARIABLE","$this",643],["T_OBJECT_OPERATOR","->",643],["T_STRING","_parseVariations",643],"(",["T_VARIABLE","$rowData",643],")",";",["T_WHITESPACE","\n        ",643],["T_VARIABLE","$variationLabels",644],["T_WHITESPACE"," ",644],"=",["T_WHITESPACE"," ",644],["T_VARIABLE","$this",644],["T_OBJECT_OPERATOR","->",644],["T_STRING","_parseVariationLabels",644],"(",["T_VARIABLE","$rowData",644],")",";",["T_WHITESPACE","\n        ",644],["T_COMMENT","\/\/@codingStandardsIgnoreStart\n",645],["T_WHITESPACE","        ",646],["T_FOREACH","foreach",646],["T_WHITESPACE"," ",646],"(",["T_VARIABLE","$additionalRows",646],["T_WHITESPACE"," ",646],["T_AS","as",646],["T_WHITESPACE"," ",646],["T_VARIABLE","$data",646],")",["T_WHITESPACE"," ",646],"{",["T_WHITESPACE","\n            ",646],["T_VARIABLE","$this",647],["T_OBJECT_OPERATOR","->",647],["T_STRING","_collectAssocIds",647],"(",["T_VARIABLE","$data",647],")",";",["T_WHITESPACE","\n\n            ",647],["T_IF","if",649],["T_WHITESPACE"," ",649],"(","!",["T_ISSET","isset",649],"(",["T_VARIABLE","$this",649],["T_OBJECT_OPERATOR","->",649],["T_STRING","_superAttributes",649],"[",["T_VARIABLE","$data",649],"[",["T_CONSTANT_ENCAPSED_STRING","'_super_attribute_code'",649],"]","]",")",")",["T_WHITESPACE"," ",649],"{",["T_WHITESPACE","\n                ",649],["T_CONTINUE","continue",650],";",["T_WHITESPACE","\n            ",650],"}",["T_WHITESPACE","\n            ",651],["T_VARIABLE","$attrParams",652],["T_WHITESPACE"," ",652],"=",["T_WHITESPACE"," ",652],["T_VARIABLE","$this",652],["T_OBJECT_OPERATOR","->",652],["T_STRING","_superAttributes",652],"[",["T_VARIABLE","$data",652],"[",["T_CONSTANT_ENCAPSED_STRING","'_super_attribute_code'",652],"]","]",";",["T_WHITESPACE","\n\n            ",652],["T_COMMENT","\/\/ @todo understand why do we need this condition\n",654],["T_WHITESPACE","            ",655],["T_IF","if",655],["T_WHITESPACE"," ",655],"(",["T_VARIABLE","$this",655],["T_OBJECT_OPERATOR","->",655],["T_STRING","_getSuperAttributeId",655],"(",["T_VARIABLE","$linkId",655],",",["T_WHITESPACE"," ",655],["T_VARIABLE","$attrParams",655],"[",["T_CONSTANT_ENCAPSED_STRING","'id'",655],"]",")",")",["T_WHITESPACE"," ",655],"{",["T_WHITESPACE","\n                ",655],["T_VARIABLE","$productSuperAttrId",656],["T_WHITESPACE"," ",656],"=",["T_WHITESPACE"," ",656],["T_VARIABLE","$this",656],["T_OBJECT_OPERATOR","->",656],["T_STRING","_getSuperAttributeId",656],"(",["T_VARIABLE","$linkId",656],",",["T_WHITESPACE"," ",656],["T_VARIABLE","$attrParams",656],"[",["T_CONSTANT_ENCAPSED_STRING","'id'",656],"]",")",";",["T_WHITESPACE","\n            ",656],"}",["T_WHITESPACE"," ",657],["T_ELSEIF","elseif",657],["T_WHITESPACE"," ",657],"(",["T_ISSET","isset",657],"(",["T_VARIABLE","$this",657],["T_OBJECT_OPERATOR","->",657],["T_STRING","_superAttributesData",657],"[",["T_CONSTANT_ENCAPSED_STRING","'attributes'",657],"]","[",["T_VARIABLE","$linkId",657],"]","[",["T_VARIABLE","$attrParams",657],"[",["T_CONSTANT_ENCAPSED_STRING","'id'",657],"]","]",")",")",["T_WHITESPACE"," ",657],"{",["T_WHITESPACE","\n                ",657],["T_VARIABLE","$attributes",658],["T_WHITESPACE"," ",658],"=",["T_WHITESPACE"," ",658],["T_VARIABLE","$this",658],["T_OBJECT_OPERATOR","->",658],["T_STRING","_superAttributesData",658],"[",["T_CONSTANT_ENCAPSED_STRING","'attributes'",658],"]",";",["T_WHITESPACE","\n                ",658],["T_VARIABLE","$productSuperAttrId",659],["T_WHITESPACE"," ",659],"=",["T_WHITESPACE"," ",659],["T_VARIABLE","$attributes",659],"[",["T_VARIABLE","$linkId",659],"]","[",["T_VARIABLE","$attrParams",659],"[",["T_CONSTANT_ENCAPSED_STRING","'id'",659],"]","]","[",["T_CONSTANT_ENCAPSED_STRING","'product_super_attribute_id'",659],"]",";",["T_WHITESPACE","\n                ",659],["T_VARIABLE","$this",660],["T_OBJECT_OPERATOR","->",660],["T_STRING","_collectSuperDataLabels",660],"(",["T_VARIABLE","$data",660],",",["T_WHITESPACE"," ",660],["T_VARIABLE","$productSuperAttrId",660],",",["T_WHITESPACE"," ",660],["T_VARIABLE","$linkId",660],",",["T_WHITESPACE"," ",660],["T_VARIABLE","$variationLabels",660],")",";",["T_WHITESPACE","\n            ",660],"}",["T_WHITESPACE"," ",661],["T_ELSE","else",661],["T_WHITESPACE"," ",661],"{",["T_WHITESPACE","\n                ",661],["T_VARIABLE","$productSuperAttrId",662],["T_WHITESPACE"," ",662],"=",["T_WHITESPACE"," ",662],["T_VARIABLE","$this",662],["T_OBJECT_OPERATOR","->",662],["T_STRING","_getNextAttrId",662],"(",")",";",["T_WHITESPACE","\n                ",662],["T_VARIABLE","$this",663],["T_OBJECT_OPERATOR","->",663],["T_STRING","_collectSuperDataLabels",663],"(",["T_VARIABLE","$data",663],",",["T_WHITESPACE"," ",663],["T_VARIABLE","$productSuperAttrId",663],",",["T_WHITESPACE"," ",663],["T_VARIABLE","$linkId",663],",",["T_WHITESPACE"," ",663],["T_VARIABLE","$variationLabels",663],")",";",["T_WHITESPACE","\n            ",663],"}",["T_WHITESPACE","\n        ",664],"}",["T_WHITESPACE","\n        ",665],["T_COMMENT","\/\/@codingStandardsIgnoreEnd\n",666],["T_WHITESPACE","\n        ",667],["T_RETURN","return",668],["T_WHITESPACE"," ",668],["T_VARIABLE","$this",668],";",["T_WHITESPACE","\n    ",668],"}",["T_WHITESPACE","\n\n    ",669],["T_DOC_COMMENT","\/**\n     *  Collect assoc ids and simpleIds to break links.\n     *\n     * @param array $data\n     * @return $this\n     *\/",671],["T_WHITESPACE","\n    ",676],["T_PROTECTED","protected",677],["T_WHITESPACE"," ",677],["T_FUNCTION","function",677],["T_WHITESPACE"," ",677],["T_STRING","_collectAssocIds",677],"(",["T_VARIABLE","$data",677],")",["T_WHITESPACE","\n    ",677],"{",["T_WHITESPACE","\n        ",678],["T_VARIABLE","$newSku",679],["T_WHITESPACE"," ",679],"=",["T_WHITESPACE"," ",679],["T_VARIABLE","$this",679],["T_OBJECT_OPERATOR","->",679],["T_STRING","_entityModel",679],["T_OBJECT_OPERATOR","->",679],["T_STRING","getNewSku",679],"(",")",";",["T_WHITESPACE","\n        ",679],["T_VARIABLE","$oldSku",680],["T_WHITESPACE"," ",680],"=",["T_WHITESPACE"," ",680],["T_VARIABLE","$this",680],["T_OBJECT_OPERATOR","->",680],["T_STRING","_entityModel",680],["T_OBJECT_OPERATOR","->",680],["T_STRING","getOldSku",680],"(",")",";",["T_WHITESPACE","\n        ",680],["T_IF","if",681],["T_WHITESPACE"," ",681],"(","!",["T_EMPTY","empty",681],"(",["T_VARIABLE","$data",681],"[",["T_CONSTANT_ENCAPSED_STRING","'_super_products_sku'",681],"]",")",")",["T_WHITESPACE"," ",681],"{",["T_WHITESPACE","\n            ",681],["T_IF","if",682],["T_WHITESPACE"," ",682],"(",["T_ISSET","isset",682],"(",["T_VARIABLE","$newSku",682],"[",["T_VARIABLE","$data",682],"[",["T_CONSTANT_ENCAPSED_STRING","'_super_products_sku'",682],"]","]",")",")",["T_WHITESPACE"," ",682],"{",["T_WHITESPACE","\n                ",682],["T_VARIABLE","$superProductRowId",683],["T_WHITESPACE"," ",683],"=",["T_WHITESPACE"," ",683],["T_VARIABLE","$newSku",683],"[",["T_VARIABLE","$data",683],"[",["T_CONSTANT_ENCAPSED_STRING","'_super_products_sku'",683],"]","]","[",["T_VARIABLE","$this",683],["T_OBJECT_OPERATOR","->",683],["T_STRING","getProductEntityLinkField",683],"(",")","]",";",["T_WHITESPACE","\n                ",683],["T_VARIABLE","$superProductEntityId",684],["T_WHITESPACE"," ",684],"=",["T_WHITESPACE"," ",684],["T_VARIABLE","$newSku",684],"[",["T_VARIABLE","$data",684],"[",["T_CONSTANT_ENCAPSED_STRING","'_super_products_sku'",684],"]","]","[",["T_VARIABLE","$this",684],["T_OBJECT_OPERATOR","->",684],["T_STRING","getProductEntityIdentifierField",684],"(",")","]",";",["T_WHITESPACE","\n            ",684],"}",["T_WHITESPACE"," ",685],["T_ELSEIF","elseif",685],["T_WHITESPACE"," ",685],"(",["T_ISSET","isset",685],"(",["T_VARIABLE","$oldSku",685],"[",["T_VARIABLE","$data",685],"[",["T_CONSTANT_ENCAPSED_STRING","'_super_products_sku'",685],"]","]",")",")",["T_WHITESPACE"," ",685],"{",["T_WHITESPACE","\n                ",685],["T_VARIABLE","$superProductRowId",686],["T_WHITESPACE"," ",686],"=",["T_WHITESPACE"," ",686],["T_VARIABLE","$oldSku",686],"[",["T_VARIABLE","$data",686],"[",["T_CONSTANT_ENCAPSED_STRING","'_super_products_sku'",686],"]","]","[",["T_VARIABLE","$this",686],["T_OBJECT_OPERATOR","->",686],["T_STRING","getProductEntityLinkField",686],"(",")","]",";",["T_WHITESPACE","\n                ",686],["T_VARIABLE","$superProductEntityId",687],["T_WHITESPACE"," ",687],"=",["T_WHITESPACE"," ",687],["T_VARIABLE","$oldSku",687],"[",["T_VARIABLE","$data",687],"[",["T_CONSTANT_ENCAPSED_STRING","'_super_products_sku'",687],"]","]","[",["T_VARIABLE","$this",687],["T_OBJECT_OPERATOR","->",687],["T_STRING","getProductEntityIdentifierField",687],"(",")","]",";",["T_WHITESPACE","\n            ",687],"}",["T_WHITESPACE","\n            ",688],["T_IF","if",689],["T_WHITESPACE"," ",689],"(",["T_ISSET","isset",689],"(",["T_VARIABLE","$superProductRowId",689],")",")",["T_WHITESPACE"," ",689],"{",["T_WHITESPACE","\n                ",689],["T_IF","if",690],["T_WHITESPACE"," ",690],"(",["T_ISSET","isset",690],"(",["T_VARIABLE","$data",690],"[",["T_CONSTANT_ENCAPSED_STRING","'display'",690],"]",")",["T_WHITESPACE"," ",690],["T_BOOLEAN_AND","&&",690],["T_WHITESPACE"," ",690],["T_VARIABLE","$data",690],"[",["T_CONSTANT_ENCAPSED_STRING","'display'",690],"]",["T_WHITESPACE"," ",690],["T_IS_EQUAL","==",690],["T_WHITESPACE"," ",690],["T_LNUMBER","0",690],")",["T_WHITESPACE"," ",690],"{",["T_WHITESPACE","\n                    ",690],["T_VARIABLE","$this",691],["T_OBJECT_OPERATOR","->",691],["T_STRING","_simpleIdsToDelete",691],"[","]",["T_WHITESPACE"," ",691],"=",["T_WHITESPACE"," ",691],["T_VARIABLE","$superProductRowId",691],";",["T_WHITESPACE","\n                ",691],"}",["T_WHITESPACE"," ",692],["T_ELSE","else",692],["T_WHITESPACE"," ",692],"{",["T_WHITESPACE","\n                    ",692],["T_VARIABLE","$this",693],["T_OBJECT_OPERATOR","->",693],["T_STRING","_productSuperData",693],"[",["T_CONSTANT_ENCAPSED_STRING","'assoc_ids'",693],"]","[",["T_VARIABLE","$superProductRowId",693],"]",["T_WHITESPACE"," ",693],"=",["T_WHITESPACE"," ",693],["T_STRING","true",693],";",["T_WHITESPACE","\n                    ",693],["T_VARIABLE","$this",694],["T_OBJECT_OPERATOR","->",694],["T_STRING","_productSuperData",694],"[",["T_CONSTANT_ENCAPSED_STRING","'assoc_entity_ids'",694],"]","[",["T_VARIABLE","$superProductRowId",694],"]",["T_WHITESPACE"," ",694],"=",["T_WHITESPACE"," ",694],["T_VARIABLE","$superProductEntityId",694],";",["T_WHITESPACE","\n                ",694],"}",["T_WHITESPACE","\n            ",695],"}",["T_WHITESPACE","\n        ",696],"}",["T_WHITESPACE","\n        ",697],["T_RETURN","return",698],["T_WHITESPACE"," ",698],["T_VARIABLE","$this",698],";",["T_WHITESPACE","\n    ",698],"}",["T_WHITESPACE","\n\n    ",699],["T_DOC_COMMENT","\/**\n     *  Collect super data labels.\n     *\n     * @param array $data\n     * @param integer|string $productSuperAttrId\n     * @param integer|string $productId\n     * @param array $variationLabels\n     * @return $this\n     *\/",701],["T_WHITESPACE","\n    ",709],["T_PROTECTED","protected",710],["T_WHITESPACE"," ",710],["T_FUNCTION","function",710],["T_WHITESPACE"," ",710],["T_STRING","_collectSuperDataLabels",710],"(",["T_VARIABLE","$data",710],",",["T_WHITESPACE"," ",710],["T_VARIABLE","$productSuperAttrId",710],",",["T_WHITESPACE"," ",710],["T_VARIABLE","$productId",710],",",["T_WHITESPACE"," ",710],["T_VARIABLE","$variationLabels",710],")",["T_WHITESPACE","\n    ",710],"{",["T_WHITESPACE","\n        ",711],["T_VARIABLE","$attrParams",712],["T_WHITESPACE"," ",712],"=",["T_WHITESPACE"," ",712],["T_VARIABLE","$this",712],["T_OBJECT_OPERATOR","->",712],["T_STRING","_superAttributes",712],"[",["T_VARIABLE","$data",712],"[",["T_CONSTANT_ENCAPSED_STRING","'_super_attribute_code'",712],"]","]",";",["T_WHITESPACE","\n        ",712],["T_VARIABLE","$this",713],["T_OBJECT_OPERATOR","->",713],["T_STRING","_superAttributesData",713],"[",["T_CONSTANT_ENCAPSED_STRING","'attributes'",713],"]","[",["T_VARIABLE","$productId",713],"]","[",["T_VARIABLE","$attrParams",713],"[",["T_CONSTANT_ENCAPSED_STRING","'id'",713],"]","]",["T_WHITESPACE"," ",713],"=",["T_WHITESPACE"," ",713],"[",["T_WHITESPACE","\n            ",713],["T_CONSTANT_ENCAPSED_STRING","'product_super_attribute_id'",714],["T_WHITESPACE"," ",714],["T_DOUBLE_ARROW","=>",714],["T_WHITESPACE"," ",714],["T_VARIABLE","$productSuperAttrId",714],",",["T_WHITESPACE","\n            ",714],["T_CONSTANT_ENCAPSED_STRING","'position'",715],["T_WHITESPACE"," ",715],["T_DOUBLE_ARROW","=>",715],["T_WHITESPACE"," ",715],["T_LNUMBER","0",715],",",["T_WHITESPACE","\n        ",715],"]",";",["T_WHITESPACE","\n        ",716],["T_VARIABLE","$label",717],["T_WHITESPACE"," ",717],"=",["T_WHITESPACE"," ",717],["T_ISSET","isset",717],"(",["T_VARIABLE","$variationLabels",717],"[",["T_VARIABLE","$data",717],"[",["T_CONSTANT_ENCAPSED_STRING","'_super_attribute_code'",717],"]","]",")",["T_WHITESPACE","\n                ",717],"?",["T_WHITESPACE"," ",718],["T_VARIABLE","$variationLabels",718],"[",["T_VARIABLE","$data",718],"[",["T_CONSTANT_ENCAPSED_STRING","'_super_attribute_code'",718],"]","]",["T_WHITESPACE","\n                ",718],":",["T_WHITESPACE"," ",719],["T_VARIABLE","$attrParams",719],"[",["T_CONSTANT_ENCAPSED_STRING","'frontend_label'",719],"]",";",["T_WHITESPACE","\n        ",719],["T_VARIABLE","$this",720],["T_OBJECT_OPERATOR","->",720],["T_STRING","_superAttributesData",720],"[",["T_CONSTANT_ENCAPSED_STRING","'labels'",720],"]","[","]",["T_WHITESPACE"," ",720],"=",["T_WHITESPACE"," ",720],"[",["T_WHITESPACE","\n            ",720],["T_CONSTANT_ENCAPSED_STRING","'product_super_attribute_id'",721],["T_WHITESPACE"," ",721],["T_DOUBLE_ARROW","=>",721],["T_WHITESPACE"," ",721],["T_VARIABLE","$productSuperAttrId",721],",",["T_WHITESPACE","\n            ",721],["T_CONSTANT_ENCAPSED_STRING","'store_id'",722],["T_WHITESPACE"," ",722],["T_DOUBLE_ARROW","=>",722],["T_WHITESPACE"," ",722],["T_LNUMBER","0",722],",",["T_WHITESPACE","\n            ",722],["T_CONSTANT_ENCAPSED_STRING","'use_default'",723],["T_WHITESPACE"," ",723],["T_DOUBLE_ARROW","=>",723],["T_WHITESPACE"," ",723],["T_VARIABLE","$label",723],["T_WHITESPACE"," ",723],"?",["T_WHITESPACE"," ",723],["T_LNUMBER","0",723],["T_WHITESPACE"," ",723],":",["T_WHITESPACE"," ",723],["T_LNUMBER","1",723],",",["T_WHITESPACE","\n            ",723],["T_CONSTANT_ENCAPSED_STRING","'value'",724],["T_WHITESPACE"," ",724],["T_DOUBLE_ARROW","=>",724],["T_WHITESPACE"," ",724],["T_VARIABLE","$label",724],",",["T_WHITESPACE","\n        ",724],"]",";",["T_WHITESPACE","\n        ",725],["T_RETURN","return",726],["T_WHITESPACE"," ",726],["T_VARIABLE","$this",726],";",["T_WHITESPACE","\n    ",726],"}",["T_WHITESPACE","\n\n    ",727],["T_DOC_COMMENT","\/**\n     * Save product type specific data.\n     *\n     * @throws \\Exception\n     * @return \\Magento\\CatalogImportExport\\Model\\Import\\Product\\Type\\AbstractType\n     * @SuppressWarnings(PHPMD.CyclomaticComplexity)\n     *\/",729],["T_WHITESPACE","\n    ",735],["T_PUBLIC","public",736],["T_WHITESPACE"," ",736],["T_FUNCTION","function",736],["T_WHITESPACE"," ",736],["T_STRING","saveData",736],"(",")",["T_WHITESPACE","\n    ",736],"{",["T_WHITESPACE","\n        ",737],["T_VARIABLE","$newSku",738],["T_WHITESPACE"," ",738],"=",["T_WHITESPACE"," ",738],["T_VARIABLE","$this",738],["T_OBJECT_OPERATOR","->",738],["T_STRING","_entityModel",738],["T_OBJECT_OPERATOR","->",738],["T_STRING","getNewSku",738],"(",")",";",["T_WHITESPACE","\n        ",738],["T_VARIABLE","$oldSku",739],["T_WHITESPACE"," ",739],"=",["T_WHITESPACE"," ",739],["T_VARIABLE","$this",739],["T_OBJECT_OPERATOR","->",739],["T_STRING","_entityModel",739],["T_OBJECT_OPERATOR","->",739],["T_STRING","getOldSku",739],"(",")",";",["T_WHITESPACE","\n        ",739],["T_VARIABLE","$this",740],["T_OBJECT_OPERATOR","->",740],["T_STRING","_productSuperData",740],["T_WHITESPACE"," ",740],"=",["T_WHITESPACE"," ",740],"[","]",";",["T_WHITESPACE","\n        ",740],["T_VARIABLE","$this",741],["T_OBJECT_OPERATOR","->",741],["T_STRING","_productData",741],["T_WHITESPACE"," ",741],"=",["T_WHITESPACE"," ",741],["T_STRING","null",741],";",["T_WHITESPACE","\n\n        ",741],["T_WHILE","while",743],["T_WHITESPACE"," ",743],"(",["T_VARIABLE","$bunch",743],["T_WHITESPACE"," ",743],"=",["T_WHITESPACE"," ",743],["T_VARIABLE","$this",743],["T_OBJECT_OPERATOR","->",743],["T_STRING","_entityModel",743],["T_OBJECT_OPERATOR","->",743],["T_STRING","getNextBunch",743],"(",")",")",["T_WHITESPACE"," ",743],"{",["T_WHITESPACE","\n            ",743],["T_IF","if",744],["T_WHITESPACE"," ",744],"(",["T_VARIABLE","$this",744],["T_OBJECT_OPERATOR","->",744],["T_STRING","_entityModel",744],["T_OBJECT_OPERATOR","->",744],["T_STRING","getBehavior",744],"(",")",["T_WHITESPACE"," ",744],["T_IS_EQUAL","==",744],["T_WHITESPACE"," ",744],["T_NS_SEPARATOR","\\",744],["T_STRING","Magento",744],["T_NS_SEPARATOR","\\",744],["T_STRING","ImportExport",744],["T_NS_SEPARATOR","\\",744],["T_STRING","Model",744],["T_NS_SEPARATOR","\\",744],["T_STRING","Import",744],["T_DOUBLE_COLON","::",744],["T_STRING","BEHAVIOR_APPEND",744],")",["T_WHITESPACE"," ",744],"{",["T_WHITESPACE","\n                ",744],["T_VARIABLE","$this",745],["T_OBJECT_OPERATOR","->",745],["T_STRING","_loadSkuSuperDataForBunch",745],"(",["T_VARIABLE","$bunch",745],")",";",["T_WHITESPACE","\n            ",745],"}",["T_WHITESPACE","\n            ",746],["T_IF","if",747],["T_WHITESPACE"," ",747],"(","!",["T_VARIABLE","$this",747],["T_OBJECT_OPERATOR","->",747],["T_STRING","configurableInBunch",747],"(",["T_VARIABLE","$bunch",747],")",")",["T_WHITESPACE"," ",747],"{",["T_WHITESPACE","\n                ",747],["T_CONTINUE","continue",748],";",["T_WHITESPACE","\n            ",748],"}",["T_WHITESPACE","\n\n            ",749],["T_VARIABLE","$this",751],["T_OBJECT_OPERATOR","->",751],["T_STRING","_superAttributesData",751],["T_WHITESPACE"," ",751],"=",["T_WHITESPACE"," ",751],"[",["T_WHITESPACE","\n                ",751],["T_CONSTANT_ENCAPSED_STRING","'attributes'",752],["T_WHITESPACE"," ",752],["T_DOUBLE_ARROW","=>",752],["T_WHITESPACE"," ",752],"[","]",",",["T_WHITESPACE","\n                ",752],["T_CONSTANT_ENCAPSED_STRING","'labels'",753],["T_WHITESPACE"," ",753],["T_DOUBLE_ARROW","=>",753],["T_WHITESPACE"," ",753],"[","]",",",["T_WHITESPACE","\n                ",753],["T_CONSTANT_ENCAPSED_STRING","'super_link'",754],["T_WHITESPACE"," ",754],["T_DOUBLE_ARROW","=>",754],["T_WHITESPACE"," ",754],"[","]",",",["T_WHITESPACE","\n                ",754],["T_CONSTANT_ENCAPSED_STRING","'relation'",755],["T_WHITESPACE"," ",755],["T_DOUBLE_ARROW","=>",755],["T_WHITESPACE"," ",755],"[","]",",",["T_WHITESPACE","\n            ",755],"]",";",["T_WHITESPACE","\n\n            ",756],["T_VARIABLE","$this",758],["T_OBJECT_OPERATOR","->",758],["T_STRING","_simpleIdsToDelete",758],["T_WHITESPACE"," ",758],"=",["T_WHITESPACE"," ",758],"[","]",";",["T_WHITESPACE","\n\n            ",758],["T_VARIABLE","$this",760],["T_OBJECT_OPERATOR","->",760],["T_STRING","_loadSkuSuperAttributeValues",760],"(",["T_VARIABLE","$bunch",760],",",["T_WHITESPACE"," ",760],["T_VARIABLE","$newSku",760],",",["T_WHITESPACE"," ",760],["T_VARIABLE","$oldSku",760],")",";",["T_WHITESPACE","\n\n            ",760],["T_FOREACH","foreach",762],["T_WHITESPACE"," ",762],"(",["T_VARIABLE","$bunch",762],["T_WHITESPACE"," ",762],["T_AS","as",762],["T_WHITESPACE"," ",762],["T_VARIABLE","$rowNum",762],["T_WHITESPACE"," ",762],["T_DOUBLE_ARROW","=>",762],["T_WHITESPACE"," ",762],["T_VARIABLE","$rowData",762],")",["T_WHITESPACE"," ",762],"{",["T_WHITESPACE","\n                ",762],["T_IF","if",763],["T_WHITESPACE"," ",763],"(","!",["T_VARIABLE","$this",763],["T_OBJECT_OPERATOR","->",763],["T_STRING","_entityModel",763],["T_OBJECT_OPERATOR","->",763],["T_STRING","isRowAllowedToImport",763],"(",["T_VARIABLE","$rowData",763],",",["T_WHITESPACE"," ",763],["T_VARIABLE","$rowNum",763],")",")",["T_WHITESPACE"," ",763],"{",["T_WHITESPACE","\n                    ",763],["T_CONTINUE","continue",764],";",["T_WHITESPACE","\n                ",764],"}",["T_WHITESPACE","\n                ",765],["T_COMMENT","\/\/ remember SCOPE_DEFAULT row data\n",766],["T_WHITESPACE","                ",767],["T_VARIABLE","$scope",767],["T_WHITESPACE"," ",767],"=",["T_WHITESPACE"," ",767],["T_VARIABLE","$this",767],["T_OBJECT_OPERATOR","->",767],["T_STRING","_entityModel",767],["T_OBJECT_OPERATOR","->",767],["T_STRING","getRowScope",767],"(",["T_VARIABLE","$rowData",767],")",";",["T_WHITESPACE","\n                ",767],["T_IF","if",768],["T_WHITESPACE"," ",768],"(","(",["T_NS_SEPARATOR","\\",768],["T_STRING","Magento",768],["T_NS_SEPARATOR","\\",768],["T_STRING","CatalogImportExport",768],["T_NS_SEPARATOR","\\",768],["T_STRING","Model",768],["T_NS_SEPARATOR","\\",768],["T_STRING","Import",768],["T_NS_SEPARATOR","\\",768],["T_STRING","Product",768],["T_DOUBLE_COLON","::",768],["T_STRING","SCOPE_DEFAULT",768],["T_WHITESPACE"," ",768],["T_IS_EQUAL","==",768],["T_WHITESPACE"," ",768],["T_VARIABLE","$scope",768],")",["T_WHITESPACE"," ",768],["T_BOOLEAN_AND","&&",768],["T_WHITESPACE","\n                    ",768],"!",["T_EMPTY","empty",769],"(",["T_VARIABLE","$rowData",769],"[",["T_NS_SEPARATOR","\\",769],["T_STRING","Magento",769],["T_NS_SEPARATOR","\\",769],["T_STRING","CatalogImportExport",769],["T_NS_SEPARATOR","\\",769],["T_STRING","Model",769],["T_NS_SEPARATOR","\\",769],["T_STRING","Import",769],["T_NS_SEPARATOR","\\",769],["T_STRING","Product",769],["T_DOUBLE_COLON","::",769],["T_STRING","COL_SKU",769],"]",")",")",["T_WHITESPACE"," ",769],"{",["T_WHITESPACE","\n\n                    ",769],["T_VARIABLE","$this",771],["T_OBJECT_OPERATOR","->",771],["T_STRING","_productData",771],["T_WHITESPACE"," ",771],"=",["T_WHITESPACE"," ",771],["T_ISSET","isset",771],"(",["T_VARIABLE","$newSku",771],"[",["T_VARIABLE","$rowData",771],"[",["T_STRING","ImportProduct",771],["T_DOUBLE_COLON","::",771],["T_STRING","COL_SKU",771],"]","]",")",["T_WHITESPACE","\n                                        ",771],"?",["T_WHITESPACE"," ",772],["T_VARIABLE","$newSku",772],"[",["T_VARIABLE","$rowData",772],"[",["T_STRING","ImportProduct",772],["T_DOUBLE_COLON","::",772],["T_STRING","COL_SKU",772],"]","]",["T_WHITESPACE","\n                                        ",772],":",["T_WHITESPACE"," ",773],["T_VARIABLE","$oldSku",773],"[",["T_VARIABLE","$rowData",773],"[",["T_STRING","ImportProduct",773],["T_DOUBLE_COLON","::",773],["T_STRING","COL_SKU",773],"]","]",";",["T_WHITESPACE","\n\n                    ",773],["T_IF","if",775],["T_WHITESPACE"," ",775],"(",["T_VARIABLE","$this",775],["T_OBJECT_OPERATOR","->",775],["T_STRING","_type",775],["T_WHITESPACE"," ",775],["T_IS_NOT_EQUAL","!=",775],["T_WHITESPACE"," ",775],["T_VARIABLE","$this",775],["T_OBJECT_OPERATOR","->",775],["T_STRING","_productData",775],"[",["T_CONSTANT_ENCAPSED_STRING","'type_id'",775],"]",")",["T_WHITESPACE"," ",775],"{",["T_WHITESPACE","\n                        ",775],["T_VARIABLE","$this",776],["T_OBJECT_OPERATOR","->",776],["T_STRING","_productData",776],["T_WHITESPACE"," ",776],"=",["T_WHITESPACE"," ",776],["T_STRING","null",776],";",["T_WHITESPACE","\n                        ",776],["T_CONTINUE","continue",777],";",["T_WHITESPACE","\n                    ",777],"}",["T_WHITESPACE","\n                    ",778],["T_VARIABLE","$this",779],["T_OBJECT_OPERATOR","->",779],["T_STRING","_collectSuperData",779],"(",["T_VARIABLE","$rowData",779],")",";",["T_WHITESPACE","\n                ",779],"}",["T_WHITESPACE","\n            ",780],"}",["T_WHITESPACE","\n\n            ",781],["T_COMMENT","\/\/ save last product super data\n",783],["T_WHITESPACE","            ",784],["T_VARIABLE","$this",784],["T_OBJECT_OPERATOR","->",784],["T_STRING","_processSuperData",784],"(",")",";",["T_WHITESPACE","\n\n            ",784],["T_VARIABLE","$this",786],["T_OBJECT_OPERATOR","->",786],["T_STRING","_deleteData",786],"(",")",";",["T_WHITESPACE","\n\n            ",786],["T_VARIABLE","$this",788],["T_OBJECT_OPERATOR","->",788],["T_STRING","_insertData",788],"(",")",";",["T_WHITESPACE","\n        ",788],"}",["T_WHITESPACE","\n        ",789],["T_RETURN","return",790],["T_WHITESPACE"," ",790],["T_VARIABLE","$this",790],";",["T_WHITESPACE","\n    ",790],"}",["T_WHITESPACE","\n\n    ",791],["T_DOC_COMMENT","\/**\n     * Configurable in bunch\n     *\n     * @param array $bunch\n     * @return bool\n     *\/",793],["T_WHITESPACE","\n    ",798],["T_PROTECTED","protected",799],["T_WHITESPACE"," ",799],["T_FUNCTION","function",799],["T_WHITESPACE"," ",799],["T_STRING","configurableInBunch",799],"(",["T_VARIABLE","$bunch",799],")",["T_WHITESPACE","\n    ",799],"{",["T_WHITESPACE","\n        ",800],["T_VARIABLE","$newSku",801],["T_WHITESPACE"," ",801],"=",["T_WHITESPACE"," ",801],["T_VARIABLE","$this",801],["T_OBJECT_OPERATOR","->",801],["T_STRING","_entityModel",801],["T_OBJECT_OPERATOR","->",801],["T_STRING","getNewSku",801],"(",")",";",["T_WHITESPACE","\n        ",801],["T_FOREACH","foreach",802],["T_WHITESPACE"," ",802],"(",["T_VARIABLE","$bunch",802],["T_WHITESPACE"," ",802],["T_AS","as",802],["T_WHITESPACE"," ",802],["T_VARIABLE","$rowNum",802],["T_WHITESPACE"," ",802],["T_DOUBLE_ARROW","=>",802],["T_WHITESPACE"," ",802],["T_VARIABLE","$rowData",802],")",["T_WHITESPACE"," ",802],"{",["T_WHITESPACE","\n            ",802],["T_VARIABLE","$productData",803],["T_WHITESPACE"," ",803],"=",["T_WHITESPACE"," ",803],["T_VARIABLE","$newSku",803],"[",["T_VARIABLE","$rowData",803],"[",["T_NS_SEPARATOR","\\",803],["T_STRING","Magento",803],["T_NS_SEPARATOR","\\",803],["T_STRING","CatalogImportExport",803],["T_NS_SEPARATOR","\\",803],["T_STRING","Model",803],["T_NS_SEPARATOR","\\",803],["T_STRING","Import",803],["T_NS_SEPARATOR","\\",803],["T_STRING","Product",803],["T_DOUBLE_COLON","::",803],["T_STRING","COL_SKU",803],"]","]",";",["T_WHITESPACE","\n            ",803],["T_IF","if",804],["T_WHITESPACE"," ",804],"(","(",["T_VARIABLE","$this",804],["T_OBJECT_OPERATOR","->",804],["T_STRING","_type",804],["T_WHITESPACE"," ",804],["T_IS_EQUAL","==",804],["T_WHITESPACE"," ",804],["T_VARIABLE","$productData",804],"[",["T_CONSTANT_ENCAPSED_STRING","'type_id'",804],"]",")",["T_WHITESPACE"," ",804],["T_BOOLEAN_AND","&&",804],["T_WHITESPACE","\n                ",804],"(",["T_VARIABLE","$rowData",805],["T_WHITESPACE"," ",805],["T_IS_EQUAL","==",805],["T_WHITESPACE"," ",805],["T_VARIABLE","$this",805],["T_OBJECT_OPERATOR","->",805],["T_STRING","_entityModel",805],["T_OBJECT_OPERATOR","->",805],["T_STRING","isRowAllowedToImport",805],"(",["T_VARIABLE","$rowData",805],",",["T_WHITESPACE"," ",805],["T_VARIABLE","$rowNum",805],")",")",["T_WHITESPACE","\n            ",805],")",["T_WHITESPACE"," ",806],"{",["T_WHITESPACE","\n                ",806],["T_RETURN","return",807],["T_WHITESPACE"," ",807],["T_STRING","true",807],";",["T_WHITESPACE","\n            ",807],"}",["T_WHITESPACE","\n        ",808],"}",["T_WHITESPACE","\n        ",809],["T_RETURN","return",810],["T_WHITESPACE"," ",810],["T_STRING","false",810],";",["T_WHITESPACE","\n    ",810],"}",["T_WHITESPACE","\n\n    ",811],["T_DOC_COMMENT","\/**\n     * Validate row attributes. Pass VALID row data ONLY as argument.\n     *\n     * @param array $rowData\n     * @param int $rowNum\n     * @param bool $isNewProduct Optional\n     *\n     * @return bool\n     *\/",813],["T_WHITESPACE","\n    ",821],["T_PUBLIC","public",822],["T_WHITESPACE"," ",822],["T_FUNCTION","function",822],["T_WHITESPACE"," ",822],["T_STRING","isRowValid",822],"(",["T_ARRAY","array",822],["T_WHITESPACE"," ",822],["T_VARIABLE","$rowData",822],",",["T_WHITESPACE"," ",822],["T_VARIABLE","$rowNum",822],",",["T_WHITESPACE"," ",822],["T_VARIABLE","$isNewProduct",822],["T_WHITESPACE"," ",822],"=",["T_WHITESPACE"," ",822],["T_STRING","true",822],")",["T_WHITESPACE","\n    ",822],"{",["T_WHITESPACE","\n        ",823],["T_VARIABLE","$error",824],["T_WHITESPACE"," ",824],"=",["T_WHITESPACE"," ",824],["T_STRING","false",824],";",["T_WHITESPACE","\n        ",824],["T_VARIABLE","$dataWithExtraVirtualRows",825],["T_WHITESPACE"," ",825],"=",["T_WHITESPACE"," ",825],["T_VARIABLE","$this",825],["T_OBJECT_OPERATOR","->",825],["T_STRING","_parseVariations",825],"(",["T_VARIABLE","$rowData",825],")",";",["T_WHITESPACE","\n        ",825],["T_VARIABLE","$skus",826],["T_WHITESPACE"," ",826],"=",["T_WHITESPACE"," ",826],"[","]",";",["T_WHITESPACE","\n        ",826],["T_VARIABLE","$rowData",827],"[",["T_CONSTANT_ENCAPSED_STRING","'price'",827],"]",["T_WHITESPACE"," ",827],"=",["T_WHITESPACE"," ",827],["T_ISSET","isset",827],"(",["T_VARIABLE","$rowData",827],"[",["T_CONSTANT_ENCAPSED_STRING","'price'",827],"]",")",["T_WHITESPACE"," ",827],["T_BOOLEAN_AND","&&",827],["T_WHITESPACE"," ",827],["T_VARIABLE","$rowData",827],"[",["T_CONSTANT_ENCAPSED_STRING","'price'",827],"]",["T_WHITESPACE"," ",827],"?",["T_WHITESPACE"," ",827],["T_VARIABLE","$rowData",827],"[",["T_CONSTANT_ENCAPSED_STRING","'price'",827],"]",["T_WHITESPACE"," ",827],":",["T_WHITESPACE"," ",827],["T_CONSTANT_ENCAPSED_STRING","'0.00'",827],";",["T_WHITESPACE","\n        ",827],["T_IF","if",828],["T_WHITESPACE"," ",828],"(","!",["T_EMPTY","empty",828],"(",["T_VARIABLE","$dataWithExtraVirtualRows",828],")",")",["T_WHITESPACE"," ",828],"{",["T_WHITESPACE","\n            ",828],["T_STRING","array_unshift",829],"(",["T_VARIABLE","$dataWithExtraVirtualRows",829],",",["T_WHITESPACE"," ",829],["T_VARIABLE","$rowData",829],")",";",["T_WHITESPACE","\n        ",829],"}",["T_WHITESPACE"," ",830],["T_ELSE","else",830],["T_WHITESPACE"," ",830],"{",["T_WHITESPACE","\n            ",830],["T_VARIABLE","$dataWithExtraVirtualRows",831],"[","]",["T_WHITESPACE"," ",831],"=",["T_WHITESPACE"," ",831],["T_VARIABLE","$rowData",831],";",["T_WHITESPACE","\n        ",831],"}",["T_WHITESPACE","\n        ",832],["T_FOREACH","foreach",833],["T_WHITESPACE"," ",833],"(",["T_VARIABLE","$dataWithExtraVirtualRows",833],["T_WHITESPACE"," ",833],["T_AS","as",833],["T_WHITESPACE"," ",833],["T_VARIABLE","$option",833],")",["T_WHITESPACE"," ",833],"{",["T_WHITESPACE","\n            ",833],["T_IF","if",834],["T_WHITESPACE"," ",834],"(",["T_ISSET","isset",834],"(",["T_VARIABLE","$option",834],"[",["T_CONSTANT_ENCAPSED_STRING","'_super_products_sku'",834],"]",")",")",["T_WHITESPACE"," ",834],"{",["T_WHITESPACE","\n                ",834],["T_IF","if",835],["T_WHITESPACE"," ",835],"(",["T_STRING","in_array",835],"(",["T_VARIABLE","$option",835],"[",["T_CONSTANT_ENCAPSED_STRING","'_super_products_sku'",835],"]",",",["T_WHITESPACE"," ",835],["T_VARIABLE","$skus",835],")",")",["T_WHITESPACE"," ",835],"{",["T_WHITESPACE","\n                    ",835],["T_VARIABLE","$error",836],["T_WHITESPACE"," ",836],"=",["T_WHITESPACE"," ",836],["T_STRING","true",836],";",["T_WHITESPACE","\n                    ",836],["T_VARIABLE","$this",837],["T_OBJECT_OPERATOR","->",837],["T_STRING","_entityModel",837],["T_OBJECT_OPERATOR","->",837],["T_STRING","addRowError",837],"(",["T_STRING","sprintf",837],"(",["T_VARIABLE","$this",837],["T_OBJECT_OPERATOR","->",837],["T_STRING","_messageTemplates",837],"[",["T_STRING","self",837],["T_DOUBLE_COLON","::",837],["T_STRING","ERROR_DUPLICATED_VARIATIONS",837],"]",",",["T_WHITESPACE"," ",837],["T_VARIABLE","$option",837],"[",["T_CONSTANT_ENCAPSED_STRING","'_super_products_sku'",837],"]",")",",",["T_WHITESPACE"," ",837],["T_VARIABLE","$rowNum",837],")",";",["T_WHITESPACE","\n                ",837],"}",["T_WHITESPACE","\n                ",838],["T_VARIABLE","$skus",839],"[","]",["T_WHITESPACE"," ",839],"=",["T_WHITESPACE"," ",839],["T_VARIABLE","$option",839],"[",["T_CONSTANT_ENCAPSED_STRING","'_super_products_sku'",839],"]",";",["T_WHITESPACE","\n            ",839],"}",["T_WHITESPACE","\n            ",840],["T_VARIABLE","$error",841],["T_WHITESPACE"," ",841],["T_OR_EQUAL","|=",841],["T_WHITESPACE"," ",841],"!",["T_STRING","parent",841],["T_DOUBLE_COLON","::",841],["T_STRING","isRowValid",841],"(",["T_VARIABLE","$option",841],",",["T_WHITESPACE"," ",841],["T_VARIABLE","$rowNum",841],",",["T_WHITESPACE"," ",841],["T_VARIABLE","$isNewProduct",841],")",";",["T_WHITESPACE","\n        ",841],"}",["T_WHITESPACE","\n        ",842],["T_RETURN","return",843],["T_WHITESPACE"," ",843],"!",["T_VARIABLE","$error",843],";",["T_WHITESPACE","\n    ",843],"}",["T_WHITESPACE","\n\n    ",844],["T_DOC_COMMENT","\/**\n     * Get product entity identifier field\n     *\n     * @return string\n     *\/",846],["T_WHITESPACE","\n    ",850],["T_PRIVATE","private",851],["T_WHITESPACE"," ",851],["T_FUNCTION","function",851],["T_WHITESPACE"," ",851],["T_STRING","getProductEntityIdentifierField",851],"(",")",["T_WHITESPACE","\n    ",851],"{",["T_WHITESPACE","\n        ",852],["T_IF","if",853],["T_WHITESPACE"," ",853],"(","!",["T_VARIABLE","$this",853],["T_OBJECT_OPERATOR","->",853],["T_STRING","productEntityIdentifierField",853],")",["T_WHITESPACE"," ",853],"{",["T_WHITESPACE","\n            ",853],["T_VARIABLE","$this",854],["T_OBJECT_OPERATOR","->",854],["T_STRING","productEntityIdentifierField",854],["T_WHITESPACE"," ",854],"=",["T_WHITESPACE"," ",854],["T_VARIABLE","$this",854],["T_OBJECT_OPERATOR","->",854],["T_STRING","getMetadataPool",854],"(",")",["T_WHITESPACE","\n                ",854],["T_OBJECT_OPERATOR","->",855],["T_STRING","getMetadata",855],"(",["T_NS_SEPARATOR","\\",855],["T_STRING","Magento",855],["T_NS_SEPARATOR","\\",855],["T_STRING","Catalog",855],["T_NS_SEPARATOR","\\",855],["T_STRING","Api",855],["T_NS_SEPARATOR","\\",855],["T_STRING","Data",855],["T_NS_SEPARATOR","\\",855],["T_STRING","ProductInterface",855],["T_DOUBLE_COLON","::",855],["T_CLASS","class",855],")",["T_WHITESPACE","\n                ",855],["T_OBJECT_OPERATOR","->",856],["T_STRING","getIdentifierField",856],"(",")",";",["T_WHITESPACE","\n        ",856],"}",["T_WHITESPACE","\n        ",857],["T_RETURN","return",858],["T_WHITESPACE"," ",858],["T_VARIABLE","$this",858],["T_OBJECT_OPERATOR","->",858],["T_STRING","productEntityIdentifierField",858],";",["T_WHITESPACE","\n    ",858],"}",["T_WHITESPACE","\n",859],"}",["T_WHITESPACE","\n",860]]
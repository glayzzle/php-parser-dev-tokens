[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Copyright \u00c2\u00a9 2013-2017 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n *\/",2],["T_WHITESPACE","\n",5],["T_NAMESPACE","namespace",6],["T_WHITESPACE"," ",6],["T_STRING","Magento",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Sitemap",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Model",6],";",["T_WHITESPACE","\n\n",6],["T_DOC_COMMENT","\/**\n * Sitemap module observer\n *\n * @author      Magento Core Team <core@magentocommerce.com>\n *\/",8],["T_WHITESPACE","\n",12],["T_CLASS","class",13],["T_WHITESPACE"," ",13],["T_STRING","Observer",13],["T_WHITESPACE","\n",13],"{",["T_WHITESPACE","\n    ",14],["T_DOC_COMMENT","\/**\n     * Enable\/disable configuration\n     *\/",15],["T_WHITESPACE","\n    ",17],["T_CONST","const",18],["T_WHITESPACE"," ",18],["T_STRING","XML_PATH_GENERATION_ENABLED",18],["T_WHITESPACE"," ",18],"=",["T_WHITESPACE"," ",18],["T_CONSTANT_ENCAPSED_STRING","'sitemap\/generate\/enabled'",18],";",["T_WHITESPACE","\n\n    ",18],["T_DOC_COMMENT","\/**\n     * Cronjob expression configuration\n     *\/",20],["T_WHITESPACE","\n    ",22],["T_CONST","const",23],["T_WHITESPACE"," ",23],["T_STRING","XML_PATH_CRON_EXPR",23],["T_WHITESPACE"," ",23],"=",["T_WHITESPACE"," ",23],["T_CONSTANT_ENCAPSED_STRING","'crontab\/default\/jobs\/generate_sitemaps\/schedule\/cron_expr'",23],";",["T_WHITESPACE","\n\n    ",23],["T_DOC_COMMENT","\/**\n     * Error email template configuration\n     *\/",25],["T_WHITESPACE","\n    ",27],["T_CONST","const",28],["T_WHITESPACE"," ",28],["T_STRING","XML_PATH_ERROR_TEMPLATE",28],["T_WHITESPACE"," ",28],"=",["T_WHITESPACE"," ",28],["T_CONSTANT_ENCAPSED_STRING","'sitemap\/generate\/error_email_template'",28],";",["T_WHITESPACE","\n\n    ",28],["T_DOC_COMMENT","\/**\n     * Error email identity configuration\n     *\/",30],["T_WHITESPACE","\n    ",32],["T_CONST","const",33],["T_WHITESPACE"," ",33],["T_STRING","XML_PATH_ERROR_IDENTITY",33],["T_WHITESPACE"," ",33],"=",["T_WHITESPACE"," ",33],["T_CONSTANT_ENCAPSED_STRING","'sitemap\/generate\/error_email_identity'",33],";",["T_WHITESPACE","\n\n    ",33],["T_DOC_COMMENT","\/**\n     * 'Send error emails to' configuration\n     *\/",35],["T_WHITESPACE","\n    ",37],["T_CONST","const",38],["T_WHITESPACE"," ",38],["T_STRING","XML_PATH_ERROR_RECIPIENT",38],["T_WHITESPACE"," ",38],"=",["T_WHITESPACE"," ",38],["T_CONSTANT_ENCAPSED_STRING","'sitemap\/generate\/error_email'",38],";",["T_WHITESPACE","\n\n    ",38],["T_DOC_COMMENT","\/**\n     * Core store config\n     *\n     * @var \\Magento\\Framework\\App\\Config\\ScopeConfigInterface\n     *\/",40],["T_WHITESPACE","\n    ",44],["T_PROTECTED","protected",45],["T_WHITESPACE"," ",45],["T_VARIABLE","$_scopeConfig",45],";",["T_WHITESPACE","\n\n    ",45],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Sitemap\\Model\\ResourceModel\\Sitemap\\CollectionFactory\n     *\/",47],["T_WHITESPACE","\n    ",49],["T_PROTECTED","protected",50],["T_WHITESPACE"," ",50],["T_VARIABLE","$_collectionFactory",50],";",["T_WHITESPACE","\n\n    ",50],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Framework\\Mail\\Template\\TransportBuilder\n     *\/",52],["T_WHITESPACE","\n    ",54],["T_PROTECTED","protected",55],["T_WHITESPACE"," ",55],["T_VARIABLE","$_transportBuilder",55],";",["T_WHITESPACE","\n\n    ",55],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Store\\Model\\StoreManagerInterface\n     *\/",57],["T_WHITESPACE","\n    ",59],["T_PROTECTED","protected",60],["T_WHITESPACE"," ",60],["T_VARIABLE","$_storeManager",60],";",["T_WHITESPACE","\n\n    ",60],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Framework\\Translate\\Inline\\StateInterface\n     *\/",62],["T_WHITESPACE","\n    ",64],["T_PROTECTED","protected",65],["T_WHITESPACE"," ",65],["T_VARIABLE","$inlineTranslation",65],";",["T_WHITESPACE","\n\n    ",65],["T_DOC_COMMENT","\/**\n     * @param \\Magento\\Framework\\App\\Config\\ScopeConfigInterface $scopeConfig\n     * @param \\Magento\\Sitemap\\Model\\ResourceModel\\Sitemap\\CollectionFactory $collectionFactory\n     * @param \\Magento\\Store\\Model\\StoreManagerInterface $storeManager\n     * @param \\Magento\\Framework\\Mail\\Template\\TransportBuilder $transportBuilder\n     * @param \\Magento\\Framework\\Translate\\Inline\\StateInterface $inlineTranslation\n     *\/",67],["T_WHITESPACE","\n    ",73],["T_PUBLIC","public",74],["T_WHITESPACE"," ",74],["T_FUNCTION","function",74],["T_WHITESPACE"," ",74],["T_STRING","__construct",74],"(",["T_WHITESPACE","\n        ",74],["T_NS_SEPARATOR","\\",75],["T_STRING","Magento",75],["T_NS_SEPARATOR","\\",75],["T_STRING","Framework",75],["T_NS_SEPARATOR","\\",75],["T_STRING","App",75],["T_NS_SEPARATOR","\\",75],["T_STRING","Config",75],["T_NS_SEPARATOR","\\",75],["T_STRING","ScopeConfigInterface",75],["T_WHITESPACE"," ",75],["T_VARIABLE","$scopeConfig",75],",",["T_WHITESPACE","\n        ",75],["T_NS_SEPARATOR","\\",76],["T_STRING","Magento",76],["T_NS_SEPARATOR","\\",76],["T_STRING","Sitemap",76],["T_NS_SEPARATOR","\\",76],["T_STRING","Model",76],["T_NS_SEPARATOR","\\",76],["T_STRING","ResourceModel",76],["T_NS_SEPARATOR","\\",76],["T_STRING","Sitemap",76],["T_NS_SEPARATOR","\\",76],["T_STRING","CollectionFactory",76],["T_WHITESPACE"," ",76],["T_VARIABLE","$collectionFactory",76],",",["T_WHITESPACE","\n        ",76],["T_NS_SEPARATOR","\\",77],["T_STRING","Magento",77],["T_NS_SEPARATOR","\\",77],["T_STRING","Store",77],["T_NS_SEPARATOR","\\",77],["T_STRING","Model",77],["T_NS_SEPARATOR","\\",77],["T_STRING","StoreManagerInterface",77],["T_WHITESPACE"," ",77],["T_VARIABLE","$storeManager",77],",",["T_WHITESPACE","\n        ",77],["T_NS_SEPARATOR","\\",78],["T_STRING","Magento",78],["T_NS_SEPARATOR","\\",78],["T_STRING","Framework",78],["T_NS_SEPARATOR","\\",78],["T_STRING","Mail",78],["T_NS_SEPARATOR","\\",78],["T_STRING","Template",78],["T_NS_SEPARATOR","\\",78],["T_STRING","TransportBuilder",78],["T_WHITESPACE"," ",78],["T_VARIABLE","$transportBuilder",78],",",["T_WHITESPACE","\n        ",78],["T_NS_SEPARATOR","\\",79],["T_STRING","Magento",79],["T_NS_SEPARATOR","\\",79],["T_STRING","Framework",79],["T_NS_SEPARATOR","\\",79],["T_STRING","Translate",79],["T_NS_SEPARATOR","\\",79],["T_STRING","Inline",79],["T_NS_SEPARATOR","\\",79],["T_STRING","StateInterface",79],["T_WHITESPACE"," ",79],["T_VARIABLE","$inlineTranslation",79],["T_WHITESPACE","\n    ",79],")",["T_WHITESPACE"," ",80],"{",["T_WHITESPACE","\n        ",80],["T_VARIABLE","$this",81],["T_OBJECT_OPERATOR","->",81],["T_STRING","_scopeConfig",81],["T_WHITESPACE"," ",81],"=",["T_WHITESPACE"," ",81],["T_VARIABLE","$scopeConfig",81],";",["T_WHITESPACE","\n        ",81],["T_VARIABLE","$this",82],["T_OBJECT_OPERATOR","->",82],["T_STRING","_collectionFactory",82],["T_WHITESPACE"," ",82],"=",["T_WHITESPACE"," ",82],["T_VARIABLE","$collectionFactory",82],";",["T_WHITESPACE","\n        ",82],["T_VARIABLE","$this",83],["T_OBJECT_OPERATOR","->",83],["T_STRING","_storeManager",83],["T_WHITESPACE"," ",83],"=",["T_WHITESPACE"," ",83],["T_VARIABLE","$storeManager",83],";",["T_WHITESPACE","\n        ",83],["T_VARIABLE","$this",84],["T_OBJECT_OPERATOR","->",84],["T_STRING","_transportBuilder",84],["T_WHITESPACE"," ",84],"=",["T_WHITESPACE"," ",84],["T_VARIABLE","$transportBuilder",84],";",["T_WHITESPACE","\n        ",84],["T_VARIABLE","$this",85],["T_OBJECT_OPERATOR","->",85],["T_STRING","inlineTranslation",85],["T_WHITESPACE"," ",85],"=",["T_WHITESPACE"," ",85],["T_VARIABLE","$inlineTranslation",85],";",["T_WHITESPACE","\n    ",85],"}",["T_WHITESPACE","\n\n    ",86],["T_DOC_COMMENT","\/**\n     * Generate sitemaps\n     *\n     * @return void\n     * @throws \\Exception\n     * @SuppressWarnings(PHPMD.UnusedLocalVariable)\n     *\/",88],["T_WHITESPACE","\n    ",94],["T_PUBLIC","public",95],["T_WHITESPACE"," ",95],["T_FUNCTION","function",95],["T_WHITESPACE"," ",95],["T_STRING","scheduledGenerateSitemaps",95],"(",")",["T_WHITESPACE","\n    ",95],"{",["T_WHITESPACE","\n        ",96],["T_VARIABLE","$errors",97],["T_WHITESPACE"," ",97],"=",["T_WHITESPACE"," ",97],"[","]",";",["T_WHITESPACE","\n\n        ",97],["T_COMMENT","\/\/ check if scheduled generation enabled\n",99],["T_WHITESPACE","        ",100],["T_IF","if",100],["T_WHITESPACE"," ",100],"(","!",["T_VARIABLE","$this",100],["T_OBJECT_OPERATOR","->",100],["T_STRING","_scopeConfig",100],["T_OBJECT_OPERATOR","->",100],["T_STRING","isSetFlag",100],"(",["T_WHITESPACE","\n            ",100],["T_STRING","self",101],["T_DOUBLE_COLON","::",101],["T_STRING","XML_PATH_GENERATION_ENABLED",101],",",["T_WHITESPACE","\n            ",101],["T_NS_SEPARATOR","\\",102],["T_STRING","Magento",102],["T_NS_SEPARATOR","\\",102],["T_STRING","Store",102],["T_NS_SEPARATOR","\\",102],["T_STRING","Model",102],["T_NS_SEPARATOR","\\",102],["T_STRING","ScopeInterface",102],["T_DOUBLE_COLON","::",102],["T_STRING","SCOPE_STORE",102],["T_WHITESPACE","\n        ",102],")",["T_WHITESPACE","\n        ",103],")",["T_WHITESPACE"," ",104],"{",["T_WHITESPACE","\n            ",104],["T_RETURN","return",105],";",["T_WHITESPACE","\n        ",105],"}",["T_WHITESPACE","\n\n        ",106],["T_VARIABLE","$collection",108],["T_WHITESPACE"," ",108],"=",["T_WHITESPACE"," ",108],["T_VARIABLE","$this",108],["T_OBJECT_OPERATOR","->",108],["T_STRING","_collectionFactory",108],["T_OBJECT_OPERATOR","->",108],["T_STRING","create",108],"(",")",";",["T_WHITESPACE","\n        ",108],["T_COMMENT","\/* @var $collection \\Magento\\Sitemap\\Model\\ResourceModel\\Sitemap\\Collection *\/",109],["T_WHITESPACE","\n        ",109],["T_FOREACH","foreach",110],["T_WHITESPACE"," ",110],"(",["T_VARIABLE","$collection",110],["T_WHITESPACE"," ",110],["T_AS","as",110],["T_WHITESPACE"," ",110],["T_VARIABLE","$sitemap",110],")",["T_WHITESPACE"," ",110],"{",["T_WHITESPACE","\n            ",110],["T_COMMENT","\/* @var $sitemap \\Magento\\Sitemap\\Model\\Sitemap *\/",111],["T_WHITESPACE","\n            ",111],["T_TRY","try",112],["T_WHITESPACE"," ",112],"{",["T_WHITESPACE","\n                ",112],["T_VARIABLE","$sitemap",113],["T_OBJECT_OPERATOR","->",113],["T_STRING","generateXml",113],"(",")",";",["T_WHITESPACE","\n            ",113],"}",["T_WHITESPACE"," ",114],["T_CATCH","catch",114],["T_WHITESPACE"," ",114],"(",["T_NS_SEPARATOR","\\",114],["T_STRING","Exception",114],["T_WHITESPACE"," ",114],["T_VARIABLE","$e",114],")",["T_WHITESPACE"," ",114],"{",["T_WHITESPACE","\n                ",114],["T_VARIABLE","$errors",115],"[","]",["T_WHITESPACE"," ",115],"=",["T_WHITESPACE"," ",115],["T_VARIABLE","$e",115],["T_OBJECT_OPERATOR","->",115],["T_STRING","getMessage",115],"(",")",";",["T_WHITESPACE","\n                ",115],["T_THROW","throw",116],["T_WHITESPACE"," ",116],["T_VARIABLE","$e",116],";",["T_WHITESPACE","\n            ",116],"}",["T_WHITESPACE","\n        ",117],"}",["T_WHITESPACE","\n\n        ",118],["T_IF","if",120],["T_WHITESPACE"," ",120],"(",["T_VARIABLE","$errors",120],["T_WHITESPACE"," ",120],["T_BOOLEAN_AND","&&",120],["T_WHITESPACE"," ",120],["T_VARIABLE","$this",120],["T_OBJECT_OPERATOR","->",120],["T_STRING","_scopeConfig",120],["T_OBJECT_OPERATOR","->",120],["T_STRING","getValue",120],"(",["T_WHITESPACE","\n            ",120],["T_STRING","self",121],["T_DOUBLE_COLON","::",121],["T_STRING","XML_PATH_ERROR_RECIPIENT",121],",",["T_WHITESPACE","\n            ",121],["T_NS_SEPARATOR","\\",122],["T_STRING","Magento",122],["T_NS_SEPARATOR","\\",122],["T_STRING","Store",122],["T_NS_SEPARATOR","\\",122],["T_STRING","Model",122],["T_NS_SEPARATOR","\\",122],["T_STRING","ScopeInterface",122],["T_DOUBLE_COLON","::",122],["T_STRING","SCOPE_STORE",122],["T_WHITESPACE","\n        ",122],")",["T_WHITESPACE","\n        ",123],")",["T_WHITESPACE"," ",124],"{",["T_WHITESPACE","\n            ",124],["T_VARIABLE","$translate",125],["T_WHITESPACE"," ",125],"=",["T_WHITESPACE"," ",125],["T_VARIABLE","$this",125],["T_OBJECT_OPERATOR","->",125],["T_STRING","_translateModel",125],["T_OBJECT_OPERATOR","->",125],["T_STRING","getTranslateInline",125],"(",")",";",["T_WHITESPACE","\n            ",125],["T_VARIABLE","$this",126],["T_OBJECT_OPERATOR","->",126],["T_STRING","_translateModel",126],["T_OBJECT_OPERATOR","->",126],["T_STRING","setTranslateInline",126],"(",["T_STRING","false",126],")",";",["T_WHITESPACE","\n\n            ",126],["T_VARIABLE","$this",128],["T_OBJECT_OPERATOR","->",128],["T_STRING","_transportBuilder",128],["T_OBJECT_OPERATOR","->",128],["T_STRING","setTemplateIdentifier",128],"(",["T_WHITESPACE","\n                ",128],["T_VARIABLE","$this",129],["T_OBJECT_OPERATOR","->",129],["T_STRING","_scopeConfig",129],["T_OBJECT_OPERATOR","->",129],["T_STRING","getValue",129],"(",["T_WHITESPACE","\n                    ",129],["T_STRING","self",130],["T_DOUBLE_COLON","::",130],["T_STRING","XML_PATH_ERROR_TEMPLATE",130],",",["T_WHITESPACE","\n                    ",130],["T_NS_SEPARATOR","\\",131],["T_STRING","Magento",131],["T_NS_SEPARATOR","\\",131],["T_STRING","Store",131],["T_NS_SEPARATOR","\\",131],["T_STRING","Model",131],["T_NS_SEPARATOR","\\",131],["T_STRING","ScopeInterface",131],["T_DOUBLE_COLON","::",131],["T_STRING","SCOPE_STORE",131],["T_WHITESPACE","\n                ",131],")",["T_WHITESPACE","\n            ",132],")",["T_OBJECT_OPERATOR","->",133],["T_STRING","setTemplateOptions",133],"(",["T_WHITESPACE","\n                ",133],"[",["T_WHITESPACE","\n                    ",134],["T_CONSTANT_ENCAPSED_STRING","'area'",135],["T_WHITESPACE"," ",135],["T_DOUBLE_ARROW","=>",135],["T_WHITESPACE"," ",135],["T_NS_SEPARATOR","\\",135],["T_STRING","Magento",135],["T_NS_SEPARATOR","\\",135],["T_STRING","Backend",135],["T_NS_SEPARATOR","\\",135],["T_STRING","App",135],["T_NS_SEPARATOR","\\",135],["T_STRING","Area",135],["T_NS_SEPARATOR","\\",135],["T_STRING","FrontNameResolver",135],["T_DOUBLE_COLON","::",135],["T_STRING","AREA_CODE",135],",",["T_WHITESPACE","\n                    ",135],["T_CONSTANT_ENCAPSED_STRING","'store'",136],["T_WHITESPACE"," ",136],["T_DOUBLE_ARROW","=>",136],["T_WHITESPACE"," ",136],["T_NS_SEPARATOR","\\",136],["T_STRING","Magento",136],["T_NS_SEPARATOR","\\",136],["T_STRING","Store",136],["T_NS_SEPARATOR","\\",136],["T_STRING","Model",136],["T_NS_SEPARATOR","\\",136],["T_STRING","Store",136],["T_DOUBLE_COLON","::",136],["T_STRING","DEFAULT_STORE_ID",136],",",["T_WHITESPACE","\n                ",136],"]",["T_WHITESPACE","\n            ",137],")",["T_OBJECT_OPERATOR","->",138],["T_STRING","setTemplateVars",138],"(",["T_WHITESPACE","\n                ",138],"[",["T_CONSTANT_ENCAPSED_STRING","'warnings'",139],["T_WHITESPACE"," ",139],["T_DOUBLE_ARROW","=>",139],["T_WHITESPACE"," ",139],["T_STRING","join",139],"(",["T_CONSTANT_ENCAPSED_STRING","\"\\n\"",139],",",["T_WHITESPACE"," ",139],["T_VARIABLE","$errors",139],")","]",["T_WHITESPACE","\n            ",139],")",["T_OBJECT_OPERATOR","->",140],["T_STRING","setFrom",140],"(",["T_WHITESPACE","\n                ",140],["T_VARIABLE","$this",141],["T_OBJECT_OPERATOR","->",141],["T_STRING","_scopeConfig",141],["T_OBJECT_OPERATOR","->",141],["T_STRING","getValue",141],"(",["T_WHITESPACE","\n                    ",141],["T_STRING","self",142],["T_DOUBLE_COLON","::",142],["T_STRING","XML_PATH_ERROR_IDENTITY",142],",",["T_WHITESPACE","\n                    ",142],["T_NS_SEPARATOR","\\",143],["T_STRING","Magento",143],["T_NS_SEPARATOR","\\",143],["T_STRING","Store",143],["T_NS_SEPARATOR","\\",143],["T_STRING","Model",143],["T_NS_SEPARATOR","\\",143],["T_STRING","ScopeInterface",143],["T_DOUBLE_COLON","::",143],["T_STRING","SCOPE_STORE",143],["T_WHITESPACE","\n                ",143],")",["T_WHITESPACE","\n            ",144],")",["T_OBJECT_OPERATOR","->",145],["T_STRING","addTo",145],"(",["T_WHITESPACE","\n                ",145],["T_VARIABLE","$this",146],["T_OBJECT_OPERATOR","->",146],["T_STRING","_scopeConfig",146],["T_OBJECT_OPERATOR","->",146],["T_STRING","getValue",146],"(",["T_WHITESPACE","\n                    ",146],["T_STRING","self",147],["T_DOUBLE_COLON","::",147],["T_STRING","XML_PATH_ERROR_RECIPIENT",147],",",["T_WHITESPACE","\n                    ",147],["T_NS_SEPARATOR","\\",148],["T_STRING","Magento",148],["T_NS_SEPARATOR","\\",148],["T_STRING","Store",148],["T_NS_SEPARATOR","\\",148],["T_STRING","Model",148],["T_NS_SEPARATOR","\\",148],["T_STRING","ScopeInterface",148],["T_DOUBLE_COLON","::",148],["T_STRING","SCOPE_STORE",148],["T_WHITESPACE","\n                ",148],")",["T_WHITESPACE","\n            ",149],")",";",["T_WHITESPACE","\n            ",150],["T_VARIABLE","$transport",151],["T_WHITESPACE"," ",151],"=",["T_WHITESPACE"," ",151],["T_VARIABLE","$this",151],["T_OBJECT_OPERATOR","->",151],["T_STRING","_transportBuilder",151],["T_OBJECT_OPERATOR","->",151],["T_STRING","getTransport",151],"(",")",";",["T_WHITESPACE","\n            ",151],["T_VARIABLE","$transport",152],["T_OBJECT_OPERATOR","->",152],["T_STRING","sendMessage",152],"(",")",";",["T_WHITESPACE","\n\n            ",152],["T_VARIABLE","$this",154],["T_OBJECT_OPERATOR","->",154],["T_STRING","inlineTranslation",154],["T_OBJECT_OPERATOR","->",154],["T_STRING","resume",154],"(",")",";",["T_WHITESPACE","\n        ",154],"}",["T_WHITESPACE","\n    ",155],"}",["T_WHITESPACE","\n",156],"}",["T_WHITESPACE","\n",157]]
[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Copyright \u00c2\u00a9 2013-2017 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n *\/",2],["T_WHITESPACE","\n\n",5],["T_DOC_COMMENT","\/**\n * Free shipping model\n *\n * @author     Magento Core Team <core@magentocommerce.com>\n *\/",7],["T_WHITESPACE","\n",11],["T_NAMESPACE","namespace",12],["T_WHITESPACE"," ",12],["T_STRING","Magento",12],["T_NS_SEPARATOR","\\",12],["T_STRING","OfflineShipping",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Model",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Carrier",12],";",["T_WHITESPACE","\n\n",12],["T_USE","use",14],["T_WHITESPACE"," ",14],["T_STRING","Magento",14],["T_NS_SEPARATOR","\\",14],["T_STRING","Quote",14],["T_NS_SEPARATOR","\\",14],["T_STRING","Model",14],["T_NS_SEPARATOR","\\",14],["T_STRING","Quote",14],["T_NS_SEPARATOR","\\",14],["T_STRING","Address",14],["T_NS_SEPARATOR","\\",14],["T_STRING","RateRequest",14],";",["T_WHITESPACE","\n\n",14],["T_CLASS","class",16],["T_WHITESPACE"," ",16],["T_STRING","Freeshipping",16],["T_WHITESPACE"," ",16],["T_EXTENDS","extends",16],["T_WHITESPACE"," ",16],["T_NS_SEPARATOR","\\",16],["T_STRING","Magento",16],["T_NS_SEPARATOR","\\",16],["T_STRING","Shipping",16],["T_NS_SEPARATOR","\\",16],["T_STRING","Model",16],["T_NS_SEPARATOR","\\",16],["T_STRING","Carrier",16],["T_NS_SEPARATOR","\\",16],["T_STRING","AbstractCarrier",16],["T_WHITESPACE"," ",16],["T_IMPLEMENTS","implements",16],["T_WHITESPACE","\n    ",16],["T_NS_SEPARATOR","\\",17],["T_STRING","Magento",17],["T_NS_SEPARATOR","\\",17],["T_STRING","Shipping",17],["T_NS_SEPARATOR","\\",17],["T_STRING","Model",17],["T_NS_SEPARATOR","\\",17],["T_STRING","Carrier",17],["T_NS_SEPARATOR","\\",17],["T_STRING","CarrierInterface",17],["T_WHITESPACE","\n",17],"{",["T_WHITESPACE","\n    ",18],["T_DOC_COMMENT","\/**\n     * @var string\n     *\/",19],["T_WHITESPACE","\n    ",21],["T_PROTECTED","protected",22],["T_WHITESPACE"," ",22],["T_VARIABLE","$_code",22],["T_WHITESPACE"," ",22],"=",["T_WHITESPACE"," ",22],["T_CONSTANT_ENCAPSED_STRING","'freeshipping'",22],";",["T_WHITESPACE","\n\n    ",22],["T_DOC_COMMENT","\/**\n     * @var bool\n     *\/",24],["T_WHITESPACE","\n    ",26],["T_PROTECTED","protected",27],["T_WHITESPACE"," ",27],["T_VARIABLE","$_isFixed",27],["T_WHITESPACE"," ",27],"=",["T_WHITESPACE"," ",27],["T_STRING","true",27],";",["T_WHITESPACE","\n\n    ",27],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Shipping\\Model\\Rate\\ResultFactory\n     *\/",29],["T_WHITESPACE","\n    ",31],["T_PROTECTED","protected",32],["T_WHITESPACE"," ",32],["T_VARIABLE","$_rateResultFactory",32],";",["T_WHITESPACE","\n\n    ",32],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Quote\\Model\\Quote\\Address\\RateResult\\MethodFactory\n     *\/",34],["T_WHITESPACE","\n    ",36],["T_PROTECTED","protected",37],["T_WHITESPACE"," ",37],["T_VARIABLE","$_rateMethodFactory",37],";",["T_WHITESPACE","\n\n    ",37],["T_DOC_COMMENT","\/**\n     * @param \\Magento\\Framework\\App\\Config\\ScopeConfigInterface $scopeConfig\n     * @param \\Magento\\Quote\\Model\\Quote\\Address\\RateResult\\ErrorFactory $rateErrorFactory\n     * @param \\Psr\\Log\\LoggerInterface $logger\n     * @param \\Magento\\Shipping\\Model\\Rate\\ResultFactory $rateResultFactory\n     * @param \\Magento\\Quote\\Model\\Quote\\Address\\RateResult\\MethodFactory $rateMethodFactory\n     * @param array $data\n     *\/",39],["T_WHITESPACE","\n    ",46],["T_PUBLIC","public",47],["T_WHITESPACE"," ",47],["T_FUNCTION","function",47],["T_WHITESPACE"," ",47],["T_STRING","__construct",47],"(",["T_WHITESPACE","\n        ",47],["T_NS_SEPARATOR","\\",48],["T_STRING","Magento",48],["T_NS_SEPARATOR","\\",48],["T_STRING","Framework",48],["T_NS_SEPARATOR","\\",48],["T_STRING","App",48],["T_NS_SEPARATOR","\\",48],["T_STRING","Config",48],["T_NS_SEPARATOR","\\",48],["T_STRING","ScopeConfigInterface",48],["T_WHITESPACE"," ",48],["T_VARIABLE","$scopeConfig",48],",",["T_WHITESPACE","\n        ",48],["T_NS_SEPARATOR","\\",49],["T_STRING","Magento",49],["T_NS_SEPARATOR","\\",49],["T_STRING","Quote",49],["T_NS_SEPARATOR","\\",49],["T_STRING","Model",49],["T_NS_SEPARATOR","\\",49],["T_STRING","Quote",49],["T_NS_SEPARATOR","\\",49],["T_STRING","Address",49],["T_NS_SEPARATOR","\\",49],["T_STRING","RateResult",49],["T_NS_SEPARATOR","\\",49],["T_STRING","ErrorFactory",49],["T_WHITESPACE"," ",49],["T_VARIABLE","$rateErrorFactory",49],",",["T_WHITESPACE","\n        ",49],["T_NS_SEPARATOR","\\",50],["T_STRING","Psr",50],["T_NS_SEPARATOR","\\",50],["T_STRING","Log",50],["T_NS_SEPARATOR","\\",50],["T_STRING","LoggerInterface",50],["T_WHITESPACE"," ",50],["T_VARIABLE","$logger",50],",",["T_WHITESPACE","\n        ",50],["T_NS_SEPARATOR","\\",51],["T_STRING","Magento",51],["T_NS_SEPARATOR","\\",51],["T_STRING","Shipping",51],["T_NS_SEPARATOR","\\",51],["T_STRING","Model",51],["T_NS_SEPARATOR","\\",51],["T_STRING","Rate",51],["T_NS_SEPARATOR","\\",51],["T_STRING","ResultFactory",51],["T_WHITESPACE"," ",51],["T_VARIABLE","$rateResultFactory",51],",",["T_WHITESPACE","\n        ",51],["T_NS_SEPARATOR","\\",52],["T_STRING","Magento",52],["T_NS_SEPARATOR","\\",52],["T_STRING","Quote",52],["T_NS_SEPARATOR","\\",52],["T_STRING","Model",52],["T_NS_SEPARATOR","\\",52],["T_STRING","Quote",52],["T_NS_SEPARATOR","\\",52],["T_STRING","Address",52],["T_NS_SEPARATOR","\\",52],["T_STRING","RateResult",52],["T_NS_SEPARATOR","\\",52],["T_STRING","MethodFactory",52],["T_WHITESPACE"," ",52],["T_VARIABLE","$rateMethodFactory",52],",",["T_WHITESPACE","\n        ",52],["T_ARRAY","array",53],["T_WHITESPACE"," ",53],["T_VARIABLE","$data",53],["T_WHITESPACE"," ",53],"=",["T_WHITESPACE"," ",53],"[","]",["T_WHITESPACE","\n    ",53],")",["T_WHITESPACE"," ",54],"{",["T_WHITESPACE","\n        ",54],["T_VARIABLE","$this",55],["T_OBJECT_OPERATOR","->",55],["T_STRING","_rateResultFactory",55],["T_WHITESPACE"," ",55],"=",["T_WHITESPACE"," ",55],["T_VARIABLE","$rateResultFactory",55],";",["T_WHITESPACE","\n        ",55],["T_VARIABLE","$this",56],["T_OBJECT_OPERATOR","->",56],["T_STRING","_rateMethodFactory",56],["T_WHITESPACE"," ",56],"=",["T_WHITESPACE"," ",56],["T_VARIABLE","$rateMethodFactory",56],";",["T_WHITESPACE","\n        ",56],["T_STRING","parent",57],["T_DOUBLE_COLON","::",57],["T_STRING","__construct",57],"(",["T_VARIABLE","$scopeConfig",57],",",["T_WHITESPACE"," ",57],["T_VARIABLE","$rateErrorFactory",57],",",["T_WHITESPACE"," ",57],["T_VARIABLE","$logger",57],",",["T_WHITESPACE"," ",57],["T_VARIABLE","$data",57],")",";",["T_WHITESPACE","\n    ",57],"}",["T_WHITESPACE","\n\n    ",58],["T_DOC_COMMENT","\/**\n     * FreeShipping Rates Collector\n     *\n     * @param RateRequest $request\n     * @return \\Magento\\Shipping\\Model\\Rate\\Result|bool\n     *\/",60],["T_WHITESPACE","\n    ",65],["T_PUBLIC","public",66],["T_WHITESPACE"," ",66],["T_FUNCTION","function",66],["T_WHITESPACE"," ",66],["T_STRING","collectRates",66],"(",["T_STRING","RateRequest",66],["T_WHITESPACE"," ",66],["T_VARIABLE","$request",66],")",["T_WHITESPACE","\n    ",66],"{",["T_WHITESPACE","\n        ",67],["T_IF","if",68],["T_WHITESPACE"," ",68],"(","!",["T_VARIABLE","$this",68],["T_OBJECT_OPERATOR","->",68],["T_STRING","getConfigFlag",68],"(",["T_CONSTANT_ENCAPSED_STRING","'active'",68],")",")",["T_WHITESPACE"," ",68],"{",["T_WHITESPACE","\n            ",68],["T_RETURN","return",69],["T_WHITESPACE"," ",69],["T_STRING","false",69],";",["T_WHITESPACE","\n        ",69],"}",["T_WHITESPACE","\n\n        ",70],["T_DOC_COMMENT","\/** @var \\Magento\\Shipping\\Model\\Rate\\Result $result *\/",72],["T_WHITESPACE","\n        ",72],["T_VARIABLE","$result",73],["T_WHITESPACE"," ",73],"=",["T_WHITESPACE"," ",73],["T_VARIABLE","$this",73],["T_OBJECT_OPERATOR","->",73],["T_STRING","_rateResultFactory",73],["T_OBJECT_OPERATOR","->",73],["T_STRING","create",73],"(",")",";",["T_WHITESPACE","\n\n        ",73],["T_VARIABLE","$this",75],["T_OBJECT_OPERATOR","->",75],["T_STRING","_updateFreeMethodQuote",75],"(",["T_VARIABLE","$request",75],")",";",["T_WHITESPACE","\n\n        ",75],["T_IF","if",77],["T_WHITESPACE"," ",77],"(",["T_VARIABLE","$request",77],["T_OBJECT_OPERATOR","->",77],["T_STRING","getFreeShipping",77],"(",")",["T_WHITESPACE"," ",77],["T_BOOLEAN_OR","||",77],["T_WHITESPACE"," ",77],["T_VARIABLE","$request",77],["T_OBJECT_OPERATOR","->",77],["T_STRING","getBaseSubtotalInclTax",77],"(",")",["T_WHITESPACE"," ",77],["T_IS_GREATER_OR_EQUAL",">=",77],["T_WHITESPACE"," ",77],["T_VARIABLE","$this",77],["T_OBJECT_OPERATOR","->",77],["T_STRING","getConfigData",77],"(",["T_WHITESPACE","\n            ",77],["T_CONSTANT_ENCAPSED_STRING","'free_shipping_subtotal'",78],["T_WHITESPACE","\n        ",78],")",["T_WHITESPACE","\n        ",79],")",["T_WHITESPACE"," ",80],"{",["T_WHITESPACE","\n            ",80],["T_DOC_COMMENT","\/** @var \\Magento\\Quote\\Model\\Quote\\Address\\RateResult\\Method $method *\/",81],["T_WHITESPACE","\n            ",81],["T_VARIABLE","$method",82],["T_WHITESPACE"," ",82],"=",["T_WHITESPACE"," ",82],["T_VARIABLE","$this",82],["T_OBJECT_OPERATOR","->",82],["T_STRING","_rateMethodFactory",82],["T_OBJECT_OPERATOR","->",82],["T_STRING","create",82],"(",")",";",["T_WHITESPACE","\n\n            ",82],["T_VARIABLE","$method",84],["T_OBJECT_OPERATOR","->",84],["T_STRING","setCarrier",84],"(",["T_CONSTANT_ENCAPSED_STRING","'freeshipping'",84],")",";",["T_WHITESPACE","\n            ",84],["T_VARIABLE","$method",85],["T_OBJECT_OPERATOR","->",85],["T_STRING","setCarrierTitle",85],"(",["T_VARIABLE","$this",85],["T_OBJECT_OPERATOR","->",85],["T_STRING","getConfigData",85],"(",["T_CONSTANT_ENCAPSED_STRING","'title'",85],")",")",";",["T_WHITESPACE","\n\n            ",85],["T_VARIABLE","$method",87],["T_OBJECT_OPERATOR","->",87],["T_STRING","setMethod",87],"(",["T_CONSTANT_ENCAPSED_STRING","'freeshipping'",87],")",";",["T_WHITESPACE","\n            ",87],["T_VARIABLE","$method",88],["T_OBJECT_OPERATOR","->",88],["T_STRING","setMethodTitle",88],"(",["T_VARIABLE","$this",88],["T_OBJECT_OPERATOR","->",88],["T_STRING","getConfigData",88],"(",["T_CONSTANT_ENCAPSED_STRING","'name'",88],")",")",";",["T_WHITESPACE","\n\n            ",88],["T_VARIABLE","$method",90],["T_OBJECT_OPERATOR","->",90],["T_STRING","setPrice",90],"(",["T_CONSTANT_ENCAPSED_STRING","'0.00'",90],")",";",["T_WHITESPACE","\n            ",90],["T_VARIABLE","$method",91],["T_OBJECT_OPERATOR","->",91],["T_STRING","setCost",91],"(",["T_CONSTANT_ENCAPSED_STRING","'0.00'",91],")",";",["T_WHITESPACE","\n\n            ",91],["T_VARIABLE","$result",93],["T_OBJECT_OPERATOR","->",93],["T_STRING","append",93],"(",["T_VARIABLE","$method",93],")",";",["T_WHITESPACE","\n        ",93],"}",["T_WHITESPACE","\n\n        ",94],["T_RETURN","return",96],["T_WHITESPACE"," ",96],["T_VARIABLE","$result",96],";",["T_WHITESPACE","\n    ",96],"}",["T_WHITESPACE","\n\n    ",97],["T_DOC_COMMENT","\/**\n     * Allows free shipping when all product items have free shipping (promotions etc.)\n     *\n     * @param \\Magento\\Quote\\Model\\Quote\\Address\\RateRequest $request\n     * @return void\n     *\/",99],["T_WHITESPACE","\n    ",104],["T_PROTECTED","protected",105],["T_WHITESPACE"," ",105],["T_FUNCTION","function",105],["T_WHITESPACE"," ",105],["T_STRING","_updateFreeMethodQuote",105],"(",["T_VARIABLE","$request",105],")",["T_WHITESPACE","\n    ",105],"{",["T_WHITESPACE","\n        ",106],["T_VARIABLE","$freeShipping",107],["T_WHITESPACE"," ",107],"=",["T_WHITESPACE"," ",107],["T_STRING","false",107],";",["T_WHITESPACE","\n        ",107],["T_VARIABLE","$items",108],["T_WHITESPACE"," ",108],"=",["T_WHITESPACE"," ",108],["T_VARIABLE","$request",108],["T_OBJECT_OPERATOR","->",108],["T_STRING","getAllItems",108],"(",")",";",["T_WHITESPACE","\n        ",108],["T_VARIABLE","$c",109],["T_WHITESPACE"," ",109],"=",["T_WHITESPACE"," ",109],["T_STRING","count",109],"(",["T_VARIABLE","$items",109],")",";",["T_WHITESPACE","\n        ",109],["T_FOR","for",110],["T_WHITESPACE"," ",110],"(",["T_VARIABLE","$i",110],["T_WHITESPACE"," ",110],"=",["T_WHITESPACE"," ",110],["T_LNUMBER","0",110],";",["T_WHITESPACE"," ",110],["T_VARIABLE","$i",110],["T_WHITESPACE"," ",110],"<",["T_WHITESPACE"," ",110],["T_VARIABLE","$c",110],";",["T_WHITESPACE"," ",110],["T_VARIABLE","$i",110],["T_INC","++",110],")",["T_WHITESPACE"," ",110],"{",["T_WHITESPACE","\n            ",110],["T_IF","if",111],["T_WHITESPACE"," ",111],"(",["T_VARIABLE","$items",111],"[",["T_VARIABLE","$i",111],"]",["T_OBJECT_OPERATOR","->",111],["T_STRING","getProduct",111],"(",")",["T_WHITESPACE"," ",111],["T_INSTANCEOF","instanceof",111],["T_WHITESPACE"," ",111],["T_NS_SEPARATOR","\\",111],["T_STRING","Magento",111],["T_NS_SEPARATOR","\\",111],["T_STRING","Catalog",111],["T_NS_SEPARATOR","\\",111],["T_STRING","Model",111],["T_NS_SEPARATOR","\\",111],["T_STRING","Product",111],")",["T_WHITESPACE"," ",111],"{",["T_WHITESPACE","\n                ",111],["T_IF","if",112],["T_WHITESPACE"," ",112],"(",["T_VARIABLE","$items",112],"[",["T_VARIABLE","$i",112],"]",["T_OBJECT_OPERATOR","->",112],["T_STRING","getFreeShipping",112],"(",")",")",["T_WHITESPACE"," ",112],"{",["T_WHITESPACE","\n                    ",112],["T_VARIABLE","$freeShipping",113],["T_WHITESPACE"," ",113],"=",["T_WHITESPACE"," ",113],["T_STRING","true",113],";",["T_WHITESPACE","\n                ",113],"}",["T_WHITESPACE"," ",114],["T_ELSE","else",114],["T_WHITESPACE"," ",114],"{",["T_WHITESPACE","\n                    ",114],["T_RETURN","return",115],";",["T_WHITESPACE","\n                ",115],"}",["T_WHITESPACE","\n            ",116],"}",["T_WHITESPACE","\n        ",117],"}",["T_WHITESPACE","\n        ",118],["T_IF","if",119],["T_WHITESPACE"," ",119],"(",["T_VARIABLE","$freeShipping",119],")",["T_WHITESPACE"," ",119],"{",["T_WHITESPACE","\n            ",119],["T_VARIABLE","$request",120],["T_OBJECT_OPERATOR","->",120],["T_STRING","setFreeShipping",120],"(",["T_STRING","true",120],")",";",["T_WHITESPACE","\n        ",120],"}",["T_WHITESPACE","\n    ",121],"}",["T_WHITESPACE","\n\n    ",122],["T_DOC_COMMENT","\/**\n     * @return array\n     *\/",124],["T_WHITESPACE","\n    ",126],["T_PUBLIC","public",127],["T_WHITESPACE"," ",127],["T_FUNCTION","function",127],["T_WHITESPACE"," ",127],["T_STRING","getAllowedMethods",127],"(",")",["T_WHITESPACE","\n    ",127],"{",["T_WHITESPACE","\n        ",128],["T_RETURN","return",129],["T_WHITESPACE"," ",129],"[",["T_CONSTANT_ENCAPSED_STRING","'freeshipping'",129],["T_WHITESPACE"," ",129],["T_DOUBLE_ARROW","=>",129],["T_WHITESPACE"," ",129],["T_VARIABLE","$this",129],["T_OBJECT_OPERATOR","->",129],["T_STRING","getConfigData",129],"(",["T_CONSTANT_ENCAPSED_STRING","'name'",129],")","]",";",["T_WHITESPACE","\n    ",129],"}",["T_WHITESPACE","\n",130],"}",["T_WHITESPACE","\n",131]]
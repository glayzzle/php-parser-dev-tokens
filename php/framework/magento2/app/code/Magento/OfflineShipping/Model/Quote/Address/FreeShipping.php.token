[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Copyright \u00c2\u00a9 2013-2017 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n *\/",2],["T_WHITESPACE","\n",5],["T_NAMESPACE","namespace",6],["T_WHITESPACE"," ",6],["T_STRING","Magento",6],["T_NS_SEPARATOR","\\",6],["T_STRING","OfflineShipping",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Model",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Quote",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Address",6],";",["T_WHITESPACE","\n\n",6],["T_CLASS","class",8],["T_WHITESPACE"," ",8],["T_STRING","FreeShipping",8],["T_WHITESPACE"," ",8],["T_IMPLEMENTS","implements",8],["T_WHITESPACE"," ",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Magento",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Quote",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Model",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Quote",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Address",8],["T_NS_SEPARATOR","\\",8],["T_STRING","FreeShippingInterface",8],["T_WHITESPACE","\n",8],"{",["T_WHITESPACE","\n    ",9],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\OfflineShipping\\Model\\SalesRule\\Calculator\n     *\/",10],["T_WHITESPACE","\n    ",12],["T_PROTECTED","protected",13],["T_WHITESPACE"," ",13],["T_VARIABLE","$calculator",13],";",["T_WHITESPACE","\n\n    ",13],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Store\\Model\\StoreManagerInterface\n     *\/",15],["T_WHITESPACE","\n    ",17],["T_PROTECTED","protected",18],["T_WHITESPACE"," ",18],["T_VARIABLE","$storeManager",18],";",["T_WHITESPACE","\n\n    ",18],["T_DOC_COMMENT","\/**\n     * @param \\Magento\\Store\\Model\\StoreManagerInterface $storeManager\n     * @param \\Magento\\OfflineShipping\\Model\\SalesRule\\Calculator $calculator\n     *\/",20],["T_WHITESPACE","\n    ",23],["T_PUBLIC","public",24],["T_WHITESPACE"," ",24],["T_FUNCTION","function",24],["T_WHITESPACE"," ",24],["T_STRING","__construct",24],"(",["T_WHITESPACE","\n        ",24],["T_NS_SEPARATOR","\\",25],["T_STRING","Magento",25],["T_NS_SEPARATOR","\\",25],["T_STRING","Store",25],["T_NS_SEPARATOR","\\",25],["T_STRING","Model",25],["T_NS_SEPARATOR","\\",25],["T_STRING","StoreManagerInterface",25],["T_WHITESPACE"," ",25],["T_VARIABLE","$storeManager",25],",",["T_WHITESPACE","\n        ",25],["T_NS_SEPARATOR","\\",26],["T_STRING","Magento",26],["T_NS_SEPARATOR","\\",26],["T_STRING","OfflineShipping",26],["T_NS_SEPARATOR","\\",26],["T_STRING","Model",26],["T_NS_SEPARATOR","\\",26],["T_STRING","SalesRule",26],["T_NS_SEPARATOR","\\",26],["T_STRING","Calculator",26],["T_WHITESPACE"," ",26],["T_VARIABLE","$calculator",26],["T_WHITESPACE","\n    ",26],")",["T_WHITESPACE"," ",27],"{",["T_WHITESPACE","\n        ",27],["T_VARIABLE","$this",28],["T_OBJECT_OPERATOR","->",28],["T_STRING","storeManager",28],["T_WHITESPACE"," ",28],"=",["T_WHITESPACE"," ",28],["T_VARIABLE","$storeManager",28],";",["T_WHITESPACE","\n        ",28],["T_VARIABLE","$this",29],["T_OBJECT_OPERATOR","->",29],["T_STRING","calculator",29],["T_WHITESPACE"," ",29],"=",["T_WHITESPACE"," ",29],["T_VARIABLE","$calculator",29],";",["T_WHITESPACE","\n    ",29],"}",["T_WHITESPACE","\n\n    ",30],["T_DOC_COMMENT","\/**\n     * {@inheritDoc}\n     *\/",32],["T_WHITESPACE","\n    ",34],["T_PUBLIC","public",35],["T_WHITESPACE"," ",35],["T_FUNCTION","function",35],["T_WHITESPACE"," ",35],["T_STRING","isFreeShipping",35],"(",["T_NS_SEPARATOR","\\",35],["T_STRING","Magento",35],["T_NS_SEPARATOR","\\",35],["T_STRING","Quote",35],["T_NS_SEPARATOR","\\",35],["T_STRING","Model",35],["T_NS_SEPARATOR","\\",35],["T_STRING","Quote",35],["T_WHITESPACE"," ",35],["T_VARIABLE","$quote",35],",",["T_WHITESPACE"," ",35],["T_VARIABLE","$items",35],")",["T_WHITESPACE","\n    ",35],"{",["T_WHITESPACE","\n        ",36],["T_DOC_COMMENT","\/** @var \\Magento\\Quote\\Api\\Data\\CartItemInterface[] $items *\/",37],["T_WHITESPACE","\n        ",37],["T_IF","if",38],["T_WHITESPACE"," ",38],"(","!",["T_STRING","count",38],"(",["T_VARIABLE","$items",38],")",")",["T_WHITESPACE"," ",38],"{",["T_WHITESPACE","\n            ",38],["T_RETURN","return",39],["T_WHITESPACE"," ",39],["T_STRING","false",39],";",["T_WHITESPACE","\n        ",39],"}",["T_WHITESPACE","\n\n        ",40],["T_VARIABLE","$addressFreeShipping",42],["T_WHITESPACE"," ",42],"=",["T_WHITESPACE"," ",42],["T_STRING","true",42],";",["T_WHITESPACE","\n        ",42],["T_VARIABLE","$store",43],["T_WHITESPACE"," ",43],"=",["T_WHITESPACE"," ",43],["T_VARIABLE","$this",43],["T_OBJECT_OPERATOR","->",43],["T_STRING","storeManager",43],["T_OBJECT_OPERATOR","->",43],["T_STRING","getStore",43],"(",["T_VARIABLE","$quote",43],["T_OBJECT_OPERATOR","->",43],["T_STRING","getStoreId",43],"(",")",")",";",["T_WHITESPACE","\n        ",43],["T_VARIABLE","$this",44],["T_OBJECT_OPERATOR","->",44],["T_STRING","calculator",44],["T_OBJECT_OPERATOR","->",44],["T_STRING","init",44],"(",["T_WHITESPACE","\n            ",44],["T_VARIABLE","$store",45],["T_OBJECT_OPERATOR","->",45],["T_STRING","getWebsiteId",45],"(",")",",",["T_WHITESPACE","\n            ",45],["T_VARIABLE","$quote",46],["T_OBJECT_OPERATOR","->",46],["T_STRING","getCustomerGroupId",46],"(",")",",",["T_WHITESPACE","\n            ",46],["T_VARIABLE","$quote",47],["T_OBJECT_OPERATOR","->",47],["T_STRING","getCouponCode",47],"(",")",["T_WHITESPACE","\n        ",47],")",";",["T_WHITESPACE","\n        ",48],["T_VARIABLE","$shippingAddress",49],["T_WHITESPACE"," ",49],"=",["T_WHITESPACE"," ",49],["T_VARIABLE","$quote",49],["T_OBJECT_OPERATOR","->",49],["T_STRING","getShippingAddress",49],"(",")",";",["T_WHITESPACE","\n        ",49],["T_VARIABLE","$shippingAddress",50],["T_OBJECT_OPERATOR","->",50],["T_STRING","setFreeShipping",50],"(",["T_LNUMBER","0",50],")",";",["T_WHITESPACE","\n        ",50],["T_DOC_COMMENT","\/** @var \\Magento\\Quote\\Api\\Data\\CartItemInterface $item *\/",51],["T_WHITESPACE","\n        ",51],["T_FOREACH","foreach",52],["T_WHITESPACE"," ",52],"(",["T_VARIABLE","$items",52],["T_WHITESPACE"," ",52],["T_AS","as",52],["T_WHITESPACE"," ",52],["T_VARIABLE","$item",52],")",["T_WHITESPACE"," ",52],"{",["T_WHITESPACE","\n            ",52],["T_IF","if",53],["T_WHITESPACE"," ",53],"(",["T_VARIABLE","$item",53],["T_OBJECT_OPERATOR","->",53],["T_STRING","getNoDiscount",53],"(",")",")",["T_WHITESPACE"," ",53],"{",["T_WHITESPACE","\n                ",53],["T_VARIABLE","$addressFreeShipping",54],["T_WHITESPACE"," ",54],"=",["T_WHITESPACE"," ",54],["T_STRING","false",54],";",["T_WHITESPACE","\n                ",54],["T_VARIABLE","$item",55],["T_OBJECT_OPERATOR","->",55],["T_STRING","setFreeShipping",55],"(",["T_STRING","false",55],")",";",["T_WHITESPACE","\n                ",55],["T_CONTINUE","continue",56],";",["T_WHITESPACE","\n            ",56],"}",["T_WHITESPACE","\n\n            ",57],["T_DOC_COMMENT","\/** Child item discount we calculate for parent *\/",59],["T_WHITESPACE","\n            ",59],["T_IF","if",60],["T_WHITESPACE"," ",60],"(",["T_VARIABLE","$item",60],["T_OBJECT_OPERATOR","->",60],["T_STRING","getParentItemId",60],"(",")",")",["T_WHITESPACE"," ",60],"{",["T_WHITESPACE","\n                ",60],["T_CONTINUE","continue",61],";",["T_WHITESPACE","\n            ",61],"}",["T_WHITESPACE","\n\n            ",62],["T_VARIABLE","$this",64],["T_OBJECT_OPERATOR","->",64],["T_STRING","calculator",64],["T_OBJECT_OPERATOR","->",64],["T_STRING","processFreeShipping",64],"(",["T_VARIABLE","$item",64],")",";",["T_WHITESPACE","\n            ",64],["T_VARIABLE","$itemFreeShipping",65],["T_WHITESPACE"," ",65],"=",["T_WHITESPACE"," ",65],["T_BOOL_CAST","(bool)",65],["T_VARIABLE","$item",65],["T_OBJECT_OPERATOR","->",65],["T_STRING","getFreeShipping",65],"(",")",";",["T_WHITESPACE","\n            ",65],["T_VARIABLE","$addressFreeShipping",66],["T_WHITESPACE"," ",66],"=",["T_WHITESPACE"," ",66],["T_VARIABLE","$addressFreeShipping",66],["T_WHITESPACE"," ",66],["T_BOOLEAN_AND","&&",66],["T_WHITESPACE"," ",66],["T_VARIABLE","$itemFreeShipping",66],";",["T_WHITESPACE","\n\n            ",66],["T_IF","if",68],["T_WHITESPACE"," ",68],"(",["T_VARIABLE","$addressFreeShipping",68],["T_WHITESPACE"," ",68],["T_BOOLEAN_AND","&&",68],["T_WHITESPACE"," ",68],"!",["T_VARIABLE","$item",68],["T_OBJECT_OPERATOR","->",68],["T_STRING","getAddress",68],"(",")",["T_OBJECT_OPERATOR","->",68],["T_STRING","getFreeShipping",68],"(",")",")",["T_WHITESPACE"," ",68],"{",["T_WHITESPACE","\n                ",68],["T_VARIABLE","$item",69],["T_OBJECT_OPERATOR","->",69],["T_STRING","getAddress",69],"(",")",["T_OBJECT_OPERATOR","->",69],["T_STRING","setFreeShipping",69],"(",["T_STRING","true",69],")",";",["T_WHITESPACE","\n            ",69],"}",["T_WHITESPACE","\n\n            ",70],["T_DOC_COMMENT","\/** Parent free shipping we apply to all children*\/",72],["T_WHITESPACE","\n            ",72],["T_VARIABLE","$this",73],["T_OBJECT_OPERATOR","->",73],["T_STRING","applyToChildren",73],"(",["T_VARIABLE","$item",73],",",["T_WHITESPACE"," ",73],["T_VARIABLE","$itemFreeShipping",73],")",";",["T_WHITESPACE","\n        ",73],"}",["T_WHITESPACE","\n        ",74],["T_RETURN","return",75],["T_WHITESPACE"," ",75],["T_BOOL_CAST","(bool)",75],["T_VARIABLE","$shippingAddress",75],["T_OBJECT_OPERATOR","->",75],["T_STRING","getFreeShipping",75],"(",")",";",["T_WHITESPACE","\n    ",75],"}",["T_WHITESPACE","\n\n    ",76],["T_DOC_COMMENT","\/**\n     * @param \\Magento\\Quote\\Model\\Quote\\Item\\AbstractItem $item\n     * @param bool $isFreeShipping\n     * @return void\n     *\/",78],["T_WHITESPACE","\n    ",82],["T_PROTECTED","protected",83],["T_WHITESPACE"," ",83],["T_FUNCTION","function",83],["T_WHITESPACE"," ",83],["T_STRING","applyToChildren",83],"(",["T_NS_SEPARATOR","\\",83],["T_STRING","Magento",83],["T_NS_SEPARATOR","\\",83],["T_STRING","Quote",83],["T_NS_SEPARATOR","\\",83],["T_STRING","Model",83],["T_NS_SEPARATOR","\\",83],["T_STRING","Quote",83],["T_NS_SEPARATOR","\\",83],["T_STRING","Item",83],["T_NS_SEPARATOR","\\",83],["T_STRING","AbstractItem",83],["T_WHITESPACE"," ",83],["T_VARIABLE","$item",83],",",["T_WHITESPACE"," ",83],["T_VARIABLE","$isFreeShipping",83],")",["T_WHITESPACE","\n    ",83],"{",["T_WHITESPACE","\n        ",84],["T_IF","if",85],["T_WHITESPACE"," ",85],"(",["T_VARIABLE","$item",85],["T_OBJECT_OPERATOR","->",85],["T_STRING","getHasChildren",85],"(",")",["T_WHITESPACE"," ",85],["T_BOOLEAN_AND","&&",85],["T_WHITESPACE"," ",85],["T_VARIABLE","$item",85],["T_OBJECT_OPERATOR","->",85],["T_STRING","isChildrenCalculated",85],"(",")",")",["T_WHITESPACE"," ",85],"{",["T_WHITESPACE","\n            ",85],["T_FOREACH","foreach",86],["T_WHITESPACE"," ",86],"(",["T_VARIABLE","$item",86],["T_OBJECT_OPERATOR","->",86],["T_STRING","getChildren",86],"(",")",["T_WHITESPACE"," ",86],["T_AS","as",86],["T_WHITESPACE"," ",86],["T_VARIABLE","$child",86],")",["T_WHITESPACE"," ",86],"{",["T_WHITESPACE","\n                ",86],["T_VARIABLE","$this",87],["T_OBJECT_OPERATOR","->",87],["T_STRING","calculator",87],["T_OBJECT_OPERATOR","->",87],["T_STRING","processFreeShipping",87],"(",["T_VARIABLE","$child",87],")",";",["T_WHITESPACE","\n                ",87],["T_IF","if",88],["T_WHITESPACE"," ",88],"(",["T_VARIABLE","$isFreeShipping",88],")",["T_WHITESPACE"," ",88],"{",["T_WHITESPACE","\n                    ",88],["T_VARIABLE","$child",89],["T_OBJECT_OPERATOR","->",89],["T_STRING","setFreeShipping",89],"(",["T_VARIABLE","$isFreeShipping",89],")",";",["T_WHITESPACE","\n                ",89],"}",["T_WHITESPACE","\n            ",90],"}",["T_WHITESPACE","\n        ",91],"}",["T_WHITESPACE","\n    ",92],"}",["T_WHITESPACE","\n",93],"}",["T_WHITESPACE","\n",94]]
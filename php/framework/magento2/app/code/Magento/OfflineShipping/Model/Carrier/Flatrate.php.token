[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Copyright \u00c2\u00a9 2013-2017 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n *\/",2],["T_WHITESPACE","\n",5],["T_NAMESPACE","namespace",6],["T_WHITESPACE"," ",6],["T_STRING","Magento",6],["T_NS_SEPARATOR","\\",6],["T_STRING","OfflineShipping",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Model",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Carrier",6],";",["T_WHITESPACE","\n\n",6],["T_USE","use",8],["T_WHITESPACE"," ",8],["T_STRING","Magento",8],["T_NS_SEPARATOR","\\",8],["T_STRING","OfflineShipping",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Model",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Carrier",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Flatrate",8],["T_NS_SEPARATOR","\\",8],["T_STRING","ItemPriceCalculator",8],";",["T_WHITESPACE","\n",8],["T_USE","use",9],["T_WHITESPACE"," ",9],["T_STRING","Magento",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Quote",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Model",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Quote",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Address",9],["T_NS_SEPARATOR","\\",9],["T_STRING","RateRequest",9],";",["T_WHITESPACE","\n",9],["T_USE","use",10],["T_WHITESPACE"," ",10],["T_STRING","Magento",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Shipping",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Model",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Carrier",10],["T_NS_SEPARATOR","\\",10],["T_STRING","AbstractCarrier",10],";",["T_WHITESPACE","\n",10],["T_USE","use",11],["T_WHITESPACE"," ",11],["T_STRING","Magento",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Shipping",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Model",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Carrier",11],["T_NS_SEPARATOR","\\",11],["T_STRING","CarrierInterface",11],";",["T_WHITESPACE","\n",11],["T_USE","use",12],["T_WHITESPACE"," ",12],["T_STRING","Magento",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Shipping",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Model",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Rate",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Result",12],";",["T_WHITESPACE","\n\n",12],["T_DOC_COMMENT","\/**\n * Flat rate shipping model\n *\/",14],["T_WHITESPACE","\n",16],["T_CLASS","class",17],["T_WHITESPACE"," ",17],["T_STRING","Flatrate",17],["T_WHITESPACE"," ",17],["T_EXTENDS","extends",17],["T_WHITESPACE"," ",17],["T_STRING","AbstractCarrier",17],["T_WHITESPACE"," ",17],["T_IMPLEMENTS","implements",17],["T_WHITESPACE"," ",17],["T_STRING","CarrierInterface",17],["T_WHITESPACE","\n",17],"{",["T_WHITESPACE","\n    ",18],["T_DOC_COMMENT","\/**\n     * @var string\n     *\/",19],["T_WHITESPACE","\n    ",21],["T_PROTECTED","protected",22],["T_WHITESPACE"," ",22],["T_VARIABLE","$_code",22],["T_WHITESPACE"," ",22],"=",["T_WHITESPACE"," ",22],["T_CONSTANT_ENCAPSED_STRING","'flatrate'",22],";",["T_WHITESPACE","\n\n    ",22],["T_DOC_COMMENT","\/**\n     * @var bool\n     *\/",24],["T_WHITESPACE","\n    ",26],["T_PROTECTED","protected",27],["T_WHITESPACE"," ",27],["T_VARIABLE","$_isFixed",27],["T_WHITESPACE"," ",27],"=",["T_WHITESPACE"," ",27],["T_STRING","true",27],";",["T_WHITESPACE","\n\n    ",27],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Shipping\\Model\\Rate\\ResultFactory\n     *\/",29],["T_WHITESPACE","\n    ",31],["T_PROTECTED","protected",32],["T_WHITESPACE"," ",32],["T_VARIABLE","$_rateResultFactory",32],";",["T_WHITESPACE","\n\n    ",32],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Quote\\Model\\Quote\\Address\\RateResult\\MethodFactory\n     *\/",34],["T_WHITESPACE","\n    ",36],["T_PROTECTED","protected",37],["T_WHITESPACE"," ",37],["T_VARIABLE","$_rateMethodFactory",37],";",["T_WHITESPACE","\n\n    ",37],["T_DOC_COMMENT","\/**\n     * @var ItemPriceCalculator\n     *\/",39],["T_WHITESPACE","\n    ",41],["T_PRIVATE","private",42],["T_WHITESPACE"," ",42],["T_VARIABLE","$itemPriceCalculator",42],";",["T_WHITESPACE","\n\n    ",42],["T_DOC_COMMENT","\/**\n     * @param \\Magento\\Framework\\App\\Config\\ScopeConfigInterface $scopeConfig\n     * @param \\Magento\\Quote\\Model\\Quote\\Address\\RateResult\\ErrorFactory $rateErrorFactory\n     * @param \\Psr\\Log\\LoggerInterface $logger\n     * @param \\Magento\\Shipping\\Model\\Rate\\ResultFactory $rateResultFactory\n     * @param \\Magento\\Quote\\Model\\Quote\\Address\\RateResult\\MethodFactory $rateMethodFactory\n     * @param ItemPriceCalculator $itemPriceCalculator\n     * @param array $data\n     *\/",44],["T_WHITESPACE","\n    ",52],["T_PUBLIC","public",53],["T_WHITESPACE"," ",53],["T_FUNCTION","function",53],["T_WHITESPACE"," ",53],["T_STRING","__construct",53],"(",["T_WHITESPACE","\n        ",53],["T_NS_SEPARATOR","\\",54],["T_STRING","Magento",54],["T_NS_SEPARATOR","\\",54],["T_STRING","Framework",54],["T_NS_SEPARATOR","\\",54],["T_STRING","App",54],["T_NS_SEPARATOR","\\",54],["T_STRING","Config",54],["T_NS_SEPARATOR","\\",54],["T_STRING","ScopeConfigInterface",54],["T_WHITESPACE"," ",54],["T_VARIABLE","$scopeConfig",54],",",["T_WHITESPACE","\n        ",54],["T_NS_SEPARATOR","\\",55],["T_STRING","Magento",55],["T_NS_SEPARATOR","\\",55],["T_STRING","Quote",55],["T_NS_SEPARATOR","\\",55],["T_STRING","Model",55],["T_NS_SEPARATOR","\\",55],["T_STRING","Quote",55],["T_NS_SEPARATOR","\\",55],["T_STRING","Address",55],["T_NS_SEPARATOR","\\",55],["T_STRING","RateResult",55],["T_NS_SEPARATOR","\\",55],["T_STRING","ErrorFactory",55],["T_WHITESPACE"," ",55],["T_VARIABLE","$rateErrorFactory",55],",",["T_WHITESPACE","\n        ",55],["T_NS_SEPARATOR","\\",56],["T_STRING","Psr",56],["T_NS_SEPARATOR","\\",56],["T_STRING","Log",56],["T_NS_SEPARATOR","\\",56],["T_STRING","LoggerInterface",56],["T_WHITESPACE"," ",56],["T_VARIABLE","$logger",56],",",["T_WHITESPACE","\n        ",56],["T_NS_SEPARATOR","\\",57],["T_STRING","Magento",57],["T_NS_SEPARATOR","\\",57],["T_STRING","Shipping",57],["T_NS_SEPARATOR","\\",57],["T_STRING","Model",57],["T_NS_SEPARATOR","\\",57],["T_STRING","Rate",57],["T_NS_SEPARATOR","\\",57],["T_STRING","ResultFactory",57],["T_WHITESPACE"," ",57],["T_VARIABLE","$rateResultFactory",57],",",["T_WHITESPACE","\n        ",57],["T_NS_SEPARATOR","\\",58],["T_STRING","Magento",58],["T_NS_SEPARATOR","\\",58],["T_STRING","Quote",58],["T_NS_SEPARATOR","\\",58],["T_STRING","Model",58],["T_NS_SEPARATOR","\\",58],["T_STRING","Quote",58],["T_NS_SEPARATOR","\\",58],["T_STRING","Address",58],["T_NS_SEPARATOR","\\",58],["T_STRING","RateResult",58],["T_NS_SEPARATOR","\\",58],["T_STRING","MethodFactory",58],["T_WHITESPACE"," ",58],["T_VARIABLE","$rateMethodFactory",58],",",["T_WHITESPACE","\n        ",58],["T_NS_SEPARATOR","\\",59],["T_STRING","Magento",59],["T_NS_SEPARATOR","\\",59],["T_STRING","OfflineShipping",59],["T_NS_SEPARATOR","\\",59],["T_STRING","Model",59],["T_NS_SEPARATOR","\\",59],["T_STRING","Carrier",59],["T_NS_SEPARATOR","\\",59],["T_STRING","Flatrate",59],["T_NS_SEPARATOR","\\",59],["T_STRING","ItemPriceCalculator",59],["T_WHITESPACE"," ",59],["T_VARIABLE","$itemPriceCalculator",59],",",["T_WHITESPACE","\n        ",59],["T_ARRAY","array",60],["T_WHITESPACE"," ",60],["T_VARIABLE","$data",60],["T_WHITESPACE"," ",60],"=",["T_WHITESPACE"," ",60],"[","]",["T_WHITESPACE","\n    ",60],")",["T_WHITESPACE"," ",61],"{",["T_WHITESPACE","\n        ",61],["T_VARIABLE","$this",62],["T_OBJECT_OPERATOR","->",62],["T_STRING","_rateResultFactory",62],["T_WHITESPACE"," ",62],"=",["T_WHITESPACE"," ",62],["T_VARIABLE","$rateResultFactory",62],";",["T_WHITESPACE","\n        ",62],["T_VARIABLE","$this",63],["T_OBJECT_OPERATOR","->",63],["T_STRING","_rateMethodFactory",63],["T_WHITESPACE"," ",63],"=",["T_WHITESPACE"," ",63],["T_VARIABLE","$rateMethodFactory",63],";",["T_WHITESPACE","\n        ",63],["T_VARIABLE","$this",64],["T_OBJECT_OPERATOR","->",64],["T_STRING","itemPriceCalculator",64],["T_WHITESPACE"," ",64],"=",["T_WHITESPACE"," ",64],["T_VARIABLE","$itemPriceCalculator",64],";",["T_WHITESPACE","\n        ",64],["T_STRING","parent",65],["T_DOUBLE_COLON","::",65],["T_STRING","__construct",65],"(",["T_VARIABLE","$scopeConfig",65],",",["T_WHITESPACE"," ",65],["T_VARIABLE","$rateErrorFactory",65],",",["T_WHITESPACE"," ",65],["T_VARIABLE","$logger",65],",",["T_WHITESPACE"," ",65],["T_VARIABLE","$data",65],")",";",["T_WHITESPACE","\n    ",65],"}",["T_WHITESPACE","\n\n    ",66],["T_DOC_COMMENT","\/**\n     * @param RateRequest $request\n     * @return Result|bool\n     * @SuppressWarnings(PHPMD.CyclomaticComplexity)\n     * @SuppressWarnings(PHPMD.NPathComplexity)\n     *\/",68],["T_WHITESPACE","\n    ",73],["T_PUBLIC","public",74],["T_WHITESPACE"," ",74],["T_FUNCTION","function",74],["T_WHITESPACE"," ",74],["T_STRING","collectRates",74],"(",["T_STRING","RateRequest",74],["T_WHITESPACE"," ",74],["T_VARIABLE","$request",74],")",["T_WHITESPACE","\n    ",74],"{",["T_WHITESPACE","\n        ",75],["T_IF","if",76],["T_WHITESPACE"," ",76],"(","!",["T_VARIABLE","$this",76],["T_OBJECT_OPERATOR","->",76],["T_STRING","getConfigFlag",76],"(",["T_CONSTANT_ENCAPSED_STRING","'active'",76],")",")",["T_WHITESPACE"," ",76],"{",["T_WHITESPACE","\n            ",76],["T_RETURN","return",77],["T_WHITESPACE"," ",77],["T_STRING","false",77],";",["T_WHITESPACE","\n        ",77],"}",["T_WHITESPACE","\n\n        ",78],["T_VARIABLE","$freeBoxes",80],["T_WHITESPACE"," ",80],"=",["T_WHITESPACE"," ",80],["T_VARIABLE","$this",80],["T_OBJECT_OPERATOR","->",80],["T_STRING","getFreeBoxesCount",80],"(",["T_VARIABLE","$request",80],")",";",["T_WHITESPACE","\n        ",80],["T_VARIABLE","$this",81],["T_OBJECT_OPERATOR","->",81],["T_STRING","setFreeBoxes",81],"(",["T_VARIABLE","$freeBoxes",81],")",";",["T_WHITESPACE","\n\n        ",81],["T_DOC_COMMENT","\/** @var Result $result *\/",83],["T_WHITESPACE","\n        ",83],["T_VARIABLE","$result",84],["T_WHITESPACE"," ",84],"=",["T_WHITESPACE"," ",84],["T_VARIABLE","$this",84],["T_OBJECT_OPERATOR","->",84],["T_STRING","_rateResultFactory",84],["T_OBJECT_OPERATOR","->",84],["T_STRING","create",84],"(",")",";",["T_WHITESPACE","\n\n        ",84],["T_VARIABLE","$shippingPrice",86],["T_WHITESPACE"," ",86],"=",["T_WHITESPACE"," ",86],["T_VARIABLE","$this",86],["T_OBJECT_OPERATOR","->",86],["T_STRING","getShippingPrice",86],"(",["T_VARIABLE","$request",86],",",["T_WHITESPACE"," ",86],["T_VARIABLE","$freeBoxes",86],")",";",["T_WHITESPACE","\n\n        ",86],["T_IF","if",88],["T_WHITESPACE"," ",88],"(",["T_VARIABLE","$shippingPrice",88],["T_WHITESPACE"," ",88],["T_IS_NOT_IDENTICAL","!==",88],["T_WHITESPACE"," ",88],["T_STRING","false",88],")",["T_WHITESPACE"," ",88],"{",["T_WHITESPACE","\n            ",88],["T_VARIABLE","$method",89],["T_WHITESPACE"," ",89],"=",["T_WHITESPACE"," ",89],["T_VARIABLE","$this",89],["T_OBJECT_OPERATOR","->",89],["T_STRING","createResultMethod",89],"(",["T_VARIABLE","$shippingPrice",89],")",";",["T_WHITESPACE","\n            ",89],["T_VARIABLE","$result",90],["T_OBJECT_OPERATOR","->",90],["T_STRING","append",90],"(",["T_VARIABLE","$method",90],")",";",["T_WHITESPACE","\n        ",90],"}",["T_WHITESPACE","\n\n        ",91],["T_RETURN","return",93],["T_WHITESPACE"," ",93],["T_VARIABLE","$result",93],";",["T_WHITESPACE","\n    ",93],"}",["T_WHITESPACE","\n\n    ",94],["T_DOC_COMMENT","\/**\n     * @param RateRequest $request\n     * @return int\n     *\/",96],["T_WHITESPACE","\n    ",99],["T_PRIVATE","private",100],["T_WHITESPACE"," ",100],["T_FUNCTION","function",100],["T_WHITESPACE"," ",100],["T_STRING","getFreeBoxesCount",100],"(",["T_STRING","RateRequest",100],["T_WHITESPACE"," ",100],["T_VARIABLE","$request",100],")",["T_WHITESPACE","\n    ",100],"{",["T_WHITESPACE","\n        ",101],["T_VARIABLE","$freeBoxes",102],["T_WHITESPACE"," ",102],"=",["T_WHITESPACE"," ",102],["T_LNUMBER","0",102],";",["T_WHITESPACE","\n        ",102],["T_IF","if",103],["T_WHITESPACE"," ",103],"(",["T_VARIABLE","$request",103],["T_OBJECT_OPERATOR","->",103],["T_STRING","getAllItems",103],"(",")",")",["T_WHITESPACE"," ",103],"{",["T_WHITESPACE","\n            ",103],["T_FOREACH","foreach",104],["T_WHITESPACE"," ",104],"(",["T_VARIABLE","$request",104],["T_OBJECT_OPERATOR","->",104],["T_STRING","getAllItems",104],"(",")",["T_WHITESPACE"," ",104],["T_AS","as",104],["T_WHITESPACE"," ",104],["T_VARIABLE","$item",104],")",["T_WHITESPACE"," ",104],"{",["T_WHITESPACE","\n                ",104],["T_IF","if",105],["T_WHITESPACE"," ",105],"(",["T_VARIABLE","$item",105],["T_OBJECT_OPERATOR","->",105],["T_STRING","getProduct",105],"(",")",["T_OBJECT_OPERATOR","->",105],["T_STRING","isVirtual",105],"(",")",["T_WHITESPACE"," ",105],["T_BOOLEAN_OR","||",105],["T_WHITESPACE"," ",105],["T_VARIABLE","$item",105],["T_OBJECT_OPERATOR","->",105],["T_STRING","getParentItem",105],"(",")",")",["T_WHITESPACE"," ",105],"{",["T_WHITESPACE","\n                    ",105],["T_CONTINUE","continue",106],";",["T_WHITESPACE","\n                ",106],"}",["T_WHITESPACE","\n\n                ",107],["T_IF","if",109],["T_WHITESPACE"," ",109],"(",["T_VARIABLE","$item",109],["T_OBJECT_OPERATOR","->",109],["T_STRING","getHasChildren",109],"(",")",["T_WHITESPACE"," ",109],["T_BOOLEAN_AND","&&",109],["T_WHITESPACE"," ",109],["T_VARIABLE","$item",109],["T_OBJECT_OPERATOR","->",109],["T_STRING","isShipSeparately",109],"(",")",")",["T_WHITESPACE"," ",109],"{",["T_WHITESPACE","\n                    ",109],["T_VARIABLE","$freeBoxes",110],["T_WHITESPACE"," ",110],["T_PLUS_EQUAL","+=",110],["T_WHITESPACE"," ",110],["T_VARIABLE","$this",110],["T_OBJECT_OPERATOR","->",110],["T_STRING","getFreeBoxesCountFromChildren",110],"(",["T_VARIABLE","$item",110],")",";",["T_WHITESPACE","\n                ",110],"}",["T_WHITESPACE"," ",111],["T_ELSEIF","elseif",111],["T_WHITESPACE"," ",111],"(",["T_VARIABLE","$item",111],["T_OBJECT_OPERATOR","->",111],["T_STRING","getFreeShipping",111],"(",")",")",["T_WHITESPACE"," ",111],"{",["T_WHITESPACE","\n                    ",111],["T_VARIABLE","$freeBoxes",112],["T_WHITESPACE"," ",112],["T_PLUS_EQUAL","+=",112],["T_WHITESPACE"," ",112],["T_VARIABLE","$item",112],["T_OBJECT_OPERATOR","->",112],["T_STRING","getQty",112],"(",")",";",["T_WHITESPACE","\n                ",112],"}",["T_WHITESPACE","\n            ",113],"}",["T_WHITESPACE","\n        ",114],"}",["T_WHITESPACE","\n        ",115],["T_RETURN","return",116],["T_WHITESPACE"," ",116],["T_VARIABLE","$freeBoxes",116],";",["T_WHITESPACE","\n    ",116],"}",["T_WHITESPACE","\n\n    ",117],["T_DOC_COMMENT","\/**\n     * @return array\n     *\/",119],["T_WHITESPACE","\n    ",121],["T_PUBLIC","public",122],["T_WHITESPACE"," ",122],["T_FUNCTION","function",122],["T_WHITESPACE"," ",122],["T_STRING","getAllowedMethods",122],"(",")",["T_WHITESPACE","\n    ",122],"{",["T_WHITESPACE","\n        ",123],["T_RETURN","return",124],["T_WHITESPACE"," ",124],"[",["T_CONSTANT_ENCAPSED_STRING","'flatrate'",124],["T_WHITESPACE"," ",124],["T_DOUBLE_ARROW","=>",124],["T_WHITESPACE"," ",124],["T_VARIABLE","$this",124],["T_OBJECT_OPERATOR","->",124],["T_STRING","getConfigData",124],"(",["T_CONSTANT_ENCAPSED_STRING","'name'",124],")","]",";",["T_WHITESPACE","\n    ",124],"}",["T_WHITESPACE","\n\n    ",125],["T_DOC_COMMENT","\/**\n     * @param RateRequest $request\n     * @param int $freeBoxes\n     * @return bool|float\n     *\/",127],["T_WHITESPACE","\n    ",131],["T_PRIVATE","private",132],["T_WHITESPACE"," ",132],["T_FUNCTION","function",132],["T_WHITESPACE"," ",132],["T_STRING","getShippingPrice",132],"(",["T_STRING","RateRequest",132],["T_WHITESPACE"," ",132],["T_VARIABLE","$request",132],",",["T_WHITESPACE"," ",132],["T_VARIABLE","$freeBoxes",132],")",["T_WHITESPACE","\n    ",132],"{",["T_WHITESPACE","\n        ",133],["T_VARIABLE","$shippingPrice",134],["T_WHITESPACE"," ",134],"=",["T_WHITESPACE"," ",134],["T_STRING","false",134],";",["T_WHITESPACE","\n\n        ",134],["T_VARIABLE","$configPrice",136],["T_WHITESPACE"," ",136],"=",["T_WHITESPACE"," ",136],["T_VARIABLE","$this",136],["T_OBJECT_OPERATOR","->",136],["T_STRING","getConfigData",136],"(",["T_CONSTANT_ENCAPSED_STRING","'price'",136],")",";",["T_WHITESPACE","\n        ",136],["T_IF","if",137],["T_WHITESPACE"," ",137],"(",["T_VARIABLE","$this",137],["T_OBJECT_OPERATOR","->",137],["T_STRING","getConfigData",137],"(",["T_CONSTANT_ENCAPSED_STRING","'type'",137],")",["T_WHITESPACE"," ",137],["T_IS_IDENTICAL","===",137],["T_WHITESPACE"," ",137],["T_CONSTANT_ENCAPSED_STRING","'O'",137],")",["T_WHITESPACE"," ",137],"{",["T_WHITESPACE","\n            ",137],["T_COMMENT","\/\/ per order\n",138],["T_WHITESPACE","            ",139],["T_VARIABLE","$shippingPrice",139],["T_WHITESPACE"," ",139],"=",["T_WHITESPACE"," ",139],["T_VARIABLE","$this",139],["T_OBJECT_OPERATOR","->",139],["T_STRING","itemPriceCalculator",139],["T_OBJECT_OPERATOR","->",139],["T_STRING","getShippingPricePerOrder",139],"(",["T_VARIABLE","$request",139],",",["T_WHITESPACE"," ",139],["T_VARIABLE","$configPrice",139],",",["T_WHITESPACE"," ",139],["T_VARIABLE","$freeBoxes",139],")",";",["T_WHITESPACE","\n        ",139],"}",["T_WHITESPACE"," ",140],["T_ELSEIF","elseif",140],["T_WHITESPACE"," ",140],"(",["T_VARIABLE","$this",140],["T_OBJECT_OPERATOR","->",140],["T_STRING","getConfigData",140],"(",["T_CONSTANT_ENCAPSED_STRING","'type'",140],")",["T_WHITESPACE"," ",140],["T_IS_IDENTICAL","===",140],["T_WHITESPACE"," ",140],["T_CONSTANT_ENCAPSED_STRING","'I'",140],")",["T_WHITESPACE"," ",140],"{",["T_WHITESPACE","\n            ",140],["T_COMMENT","\/\/ per item\n",141],["T_WHITESPACE","            ",142],["T_VARIABLE","$shippingPrice",142],["T_WHITESPACE"," ",142],"=",["T_WHITESPACE"," ",142],["T_VARIABLE","$this",142],["T_OBJECT_OPERATOR","->",142],["T_STRING","itemPriceCalculator",142],["T_OBJECT_OPERATOR","->",142],["T_STRING","getShippingPricePerItem",142],"(",["T_VARIABLE","$request",142],",",["T_WHITESPACE"," ",142],["T_VARIABLE","$configPrice",142],",",["T_WHITESPACE"," ",142],["T_VARIABLE","$freeBoxes",142],")",";",["T_WHITESPACE","\n        ",142],"}",["T_WHITESPACE","\n\n        ",143],["T_VARIABLE","$shippingPrice",145],["T_WHITESPACE"," ",145],"=",["T_WHITESPACE"," ",145],["T_VARIABLE","$this",145],["T_OBJECT_OPERATOR","->",145],["T_STRING","getFinalPriceWithHandlingFee",145],"(",["T_VARIABLE","$shippingPrice",145],")",";",["T_WHITESPACE","\n\n        ",145],["T_IF","if",147],["T_WHITESPACE"," ",147],"(",["T_VARIABLE","$shippingPrice",147],["T_WHITESPACE"," ",147],["T_IS_NOT_IDENTICAL","!==",147],["T_WHITESPACE"," ",147],["T_STRING","false",147],["T_WHITESPACE"," ",147],["T_BOOLEAN_AND","&&",147],["T_WHITESPACE"," ",147],"(",["T_WHITESPACE","\n                ",147],["T_VARIABLE","$request",148],["T_OBJECT_OPERATOR","->",148],["T_STRING","getFreeShipping",148],"(",")",["T_WHITESPACE"," ",148],["T_IS_IDENTICAL","===",148],["T_WHITESPACE"," ",148],["T_STRING","true",148],["T_WHITESPACE"," ",148],["T_BOOLEAN_OR","||",148],["T_WHITESPACE"," ",148],["T_VARIABLE","$request",148],["T_OBJECT_OPERATOR","->",148],["T_STRING","getPackageQty",148],"(",")",["T_WHITESPACE"," ",148],["T_IS_EQUAL","==",148],["T_WHITESPACE"," ",148],["T_VARIABLE","$freeBoxes",148],["T_WHITESPACE","\n            ",148],")",["T_WHITESPACE","\n        ",149],")",["T_WHITESPACE"," ",150],"{",["T_WHITESPACE","\n            ",150],["T_VARIABLE","$shippingPrice",151],["T_WHITESPACE"," ",151],"=",["T_WHITESPACE"," ",151],["T_CONSTANT_ENCAPSED_STRING","'0.00'",151],";",["T_WHITESPACE","\n        ",151],"}",["T_WHITESPACE","\n        ",152],["T_RETURN","return",153],["T_WHITESPACE"," ",153],["T_VARIABLE","$shippingPrice",153],";",["T_WHITESPACE","\n    ",153],"}",["T_WHITESPACE","\n\n    ",154],["T_DOC_COMMENT","\/**\n     * @param int|float $shippingPrice\n     * @return \\Magento\\Quote\\Model\\Quote\\Address\\RateResult\\Method\n     *\/",156],["T_WHITESPACE","\n    ",159],["T_PRIVATE","private",160],["T_WHITESPACE"," ",160],["T_FUNCTION","function",160],["T_WHITESPACE"," ",160],["T_STRING","createResultMethod",160],"(",["T_VARIABLE","$shippingPrice",160],")",["T_WHITESPACE","\n    ",160],"{",["T_WHITESPACE","\n        ",161],["T_DOC_COMMENT","\/** @var \\Magento\\Quote\\Model\\Quote\\Address\\RateResult\\Method $method *\/",162],["T_WHITESPACE","\n        ",162],["T_VARIABLE","$method",163],["T_WHITESPACE"," ",163],"=",["T_WHITESPACE"," ",163],["T_VARIABLE","$this",163],["T_OBJECT_OPERATOR","->",163],["T_STRING","_rateMethodFactory",163],["T_OBJECT_OPERATOR","->",163],["T_STRING","create",163],"(",")",";",["T_WHITESPACE","\n\n        ",163],["T_VARIABLE","$method",165],["T_OBJECT_OPERATOR","->",165],["T_STRING","setCarrier",165],"(",["T_CONSTANT_ENCAPSED_STRING","'flatrate'",165],")",";",["T_WHITESPACE","\n        ",165],["T_VARIABLE","$method",166],["T_OBJECT_OPERATOR","->",166],["T_STRING","setCarrierTitle",166],"(",["T_VARIABLE","$this",166],["T_OBJECT_OPERATOR","->",166],["T_STRING","getConfigData",166],"(",["T_CONSTANT_ENCAPSED_STRING","'title'",166],")",")",";",["T_WHITESPACE","\n\n        ",166],["T_VARIABLE","$method",168],["T_OBJECT_OPERATOR","->",168],["T_STRING","setMethod",168],"(",["T_CONSTANT_ENCAPSED_STRING","'flatrate'",168],")",";",["T_WHITESPACE","\n        ",168],["T_VARIABLE","$method",169],["T_OBJECT_OPERATOR","->",169],["T_STRING","setMethodTitle",169],"(",["T_VARIABLE","$this",169],["T_OBJECT_OPERATOR","->",169],["T_STRING","getConfigData",169],"(",["T_CONSTANT_ENCAPSED_STRING","'name'",169],")",")",";",["T_WHITESPACE","\n\n        ",169],["T_VARIABLE","$method",171],["T_OBJECT_OPERATOR","->",171],["T_STRING","setPrice",171],"(",["T_VARIABLE","$shippingPrice",171],")",";",["T_WHITESPACE","\n        ",171],["T_VARIABLE","$method",172],["T_OBJECT_OPERATOR","->",172],["T_STRING","setCost",172],"(",["T_VARIABLE","$shippingPrice",172],")",";",["T_WHITESPACE","\n        ",172],["T_RETURN","return",173],["T_WHITESPACE"," ",173],["T_VARIABLE","$method",173],";",["T_WHITESPACE","\n    ",173],"}",["T_WHITESPACE","\n\n    ",174],["T_DOC_COMMENT","\/**\n     * @param mixed $item\n     * @return mixed\n     *\/",176],["T_WHITESPACE","\n    ",179],["T_PRIVATE","private",180],["T_WHITESPACE"," ",180],["T_FUNCTION","function",180],["T_WHITESPACE"," ",180],["T_STRING","getFreeBoxesCountFromChildren",180],"(",["T_VARIABLE","$item",180],")",["T_WHITESPACE","\n    ",180],"{",["T_WHITESPACE","\n        ",181],["T_VARIABLE","$freeBoxes",182],["T_WHITESPACE"," ",182],"=",["T_WHITESPACE"," ",182],["T_LNUMBER","0",182],";",["T_WHITESPACE","\n        ",182],["T_FOREACH","foreach",183],["T_WHITESPACE"," ",183],"(",["T_VARIABLE","$item",183],["T_OBJECT_OPERATOR","->",183],["T_STRING","getChildren",183],"(",")",["T_WHITESPACE"," ",183],["T_AS","as",183],["T_WHITESPACE"," ",183],["T_VARIABLE","$child",183],")",["T_WHITESPACE"," ",183],"{",["T_WHITESPACE","\n            ",183],["T_IF","if",184],["T_WHITESPACE"," ",184],"(",["T_VARIABLE","$child",184],["T_OBJECT_OPERATOR","->",184],["T_STRING","getFreeShipping",184],"(",")",["T_WHITESPACE"," ",184],["T_BOOLEAN_AND","&&",184],["T_WHITESPACE"," ",184],"!",["T_VARIABLE","$child",184],["T_OBJECT_OPERATOR","->",184],["T_STRING","getProduct",184],"(",")",["T_OBJECT_OPERATOR","->",184],["T_STRING","isVirtual",184],"(",")",")",["T_WHITESPACE"," ",184],"{",["T_WHITESPACE","\n                ",184],["T_VARIABLE","$freeBoxes",185],["T_WHITESPACE"," ",185],["T_PLUS_EQUAL","+=",185],["T_WHITESPACE"," ",185],["T_VARIABLE","$item",185],["T_OBJECT_OPERATOR","->",185],["T_STRING","getQty",185],"(",")",["T_WHITESPACE"," ",185],"*",["T_WHITESPACE"," ",185],["T_VARIABLE","$child",185],["T_OBJECT_OPERATOR","->",185],["T_STRING","getQty",185],"(",")",";",["T_WHITESPACE","\n            ",185],"}",["T_WHITESPACE","\n        ",186],"}",["T_WHITESPACE","\n        ",187],["T_RETURN","return",188],["T_WHITESPACE"," ",188],["T_VARIABLE","$freeBoxes",188],";",["T_WHITESPACE","\n    ",188],"}",["T_WHITESPACE","\n",189],"}",["T_WHITESPACE","\n",190]]
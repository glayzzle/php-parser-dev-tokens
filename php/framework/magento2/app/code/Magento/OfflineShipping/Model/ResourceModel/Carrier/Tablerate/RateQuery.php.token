[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Copyright \u00c2\u00a9 2013-2017 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n *\/",2],["T_WHITESPACE","\n\n",5],["T_NAMESPACE","namespace",7],["T_WHITESPACE"," ",7],["T_STRING","Magento",7],["T_NS_SEPARATOR","\\",7],["T_STRING","OfflineShipping",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Model",7],["T_NS_SEPARATOR","\\",7],["T_STRING","ResourceModel",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Carrier",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Tablerate",7],";",["T_WHITESPACE","\n\n",7],["T_CLASS","class",9],["T_WHITESPACE"," ",9],["T_STRING","RateQuery",9],["T_WHITESPACE","\n",9],"{",["T_WHITESPACE","\n    ",10],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Quote\\Model\\Quote\\Address\\RateRequest\n     *\/",11],["T_WHITESPACE","\n    ",13],["T_PRIVATE","private",14],["T_WHITESPACE"," ",14],["T_VARIABLE","$request",14],";",["T_WHITESPACE","\n\n    ",14],["T_DOC_COMMENT","\/**\n     * RateQuery constructor.\n     * @param \\Magento\\Quote\\Model\\Quote\\Address\\RateRequest $request\n     *\/",16],["T_WHITESPACE","\n    ",19],["T_PUBLIC","public",20],["T_WHITESPACE"," ",20],["T_FUNCTION","function",20],["T_WHITESPACE"," ",20],["T_STRING","__construct",20],"(",["T_WHITESPACE","\n        ",20],["T_NS_SEPARATOR","\\",21],["T_STRING","Magento",21],["T_NS_SEPARATOR","\\",21],["T_STRING","Quote",21],["T_NS_SEPARATOR","\\",21],["T_STRING","Model",21],["T_NS_SEPARATOR","\\",21],["T_STRING","Quote",21],["T_NS_SEPARATOR","\\",21],["T_STRING","Address",21],["T_NS_SEPARATOR","\\",21],["T_STRING","RateRequest",21],["T_WHITESPACE"," ",21],["T_VARIABLE","$request",21],["T_WHITESPACE","\n    ",21],")",["T_WHITESPACE"," ",22],"{",["T_WHITESPACE","\n        ",22],["T_VARIABLE","$this",23],["T_OBJECT_OPERATOR","->",23],["T_STRING","request",23],["T_WHITESPACE"," ",23],"=",["T_WHITESPACE"," ",23],["T_VARIABLE","$request",23],";",["T_WHITESPACE","\n    ",23],"}",["T_WHITESPACE","\n\n    ",24],["T_DOC_COMMENT","\/**\n     * @param \\Magento\\Framework\\DB\\Select $select\n     * @return \\Magento\\Framework\\DB\\Select\n     *\/",26],["T_WHITESPACE","\n    ",29],["T_PUBLIC","public",30],["T_WHITESPACE"," ",30],["T_FUNCTION","function",30],["T_WHITESPACE"," ",30],["T_STRING","prepareSelect",30],"(",["T_NS_SEPARATOR","\\",30],["T_STRING","Magento",30],["T_NS_SEPARATOR","\\",30],["T_STRING","Framework",30],["T_NS_SEPARATOR","\\",30],["T_STRING","DB",30],["T_NS_SEPARATOR","\\",30],["T_STRING","Select",30],["T_WHITESPACE"," ",30],["T_VARIABLE","$select",30],")",["T_WHITESPACE","\n    ",30],"{",["T_WHITESPACE","\n        ",31],["T_VARIABLE","$select",32],["T_OBJECT_OPERATOR","->",32],["T_STRING","where",32],"(",["T_WHITESPACE","\n            ",32],["T_CONSTANT_ENCAPSED_STRING","'website_id = :website_id'",33],["T_WHITESPACE","\n        ",33],")",["T_OBJECT_OPERATOR","->",34],["T_STRING","order",34],"(",["T_WHITESPACE","\n            ",34],"[",["T_CONSTANT_ENCAPSED_STRING","'dest_country_id DESC'",35],",",["T_WHITESPACE"," ",35],["T_CONSTANT_ENCAPSED_STRING","'dest_region_id DESC'",35],",",["T_WHITESPACE"," ",35],["T_CONSTANT_ENCAPSED_STRING","'dest_zip DESC'",35],",",["T_WHITESPACE"," ",35],["T_CONSTANT_ENCAPSED_STRING","'condition_value DESC'",35],"]",["T_WHITESPACE","\n        ",35],")",["T_OBJECT_OPERATOR","->",36],["T_STRING","limit",36],"(",["T_WHITESPACE","\n            ",36],["T_LNUMBER","1",37],["T_WHITESPACE","\n        ",37],")",";",["T_WHITESPACE","\n\n        ",38],["T_COMMENT","\/\/ Render destination condition\n",40],["T_WHITESPACE","        ",41],["T_VARIABLE","$orWhere",41],["T_WHITESPACE"," ",41],"=",["T_WHITESPACE"," ",41],["T_CONSTANT_ENCAPSED_STRING","'('",41],["T_WHITESPACE"," ",41],".",["T_WHITESPACE"," ",41],["T_STRING","implode",41],"(",["T_WHITESPACE","\n            ",41],["T_CONSTANT_ENCAPSED_STRING","') OR ('",42],",",["T_WHITESPACE","\n            ",42],"[",["T_WHITESPACE","\n                ",43],["T_CONSTANT_ENCAPSED_STRING","\"dest_country_id = :country_id AND dest_region_id = :region_id AND dest_zip = :postcode\"",44],",",["T_WHITESPACE","\n                ",44],["T_CONSTANT_ENCAPSED_STRING","\"dest_country_id = :country_id AND dest_region_id = :region_id AND dest_zip = ''\"",45],",",["T_WHITESPACE","\n\n                ",45],["T_COMMENT","\/\/ Handle asterisk in dest_zip field\n",47],["T_WHITESPACE","                ",48],["T_CONSTANT_ENCAPSED_STRING","\"dest_country_id = :country_id AND dest_region_id = :region_id AND dest_zip = '*'\"",48],",",["T_WHITESPACE","\n                ",48],["T_CONSTANT_ENCAPSED_STRING","\"dest_country_id = :country_id AND dest_region_id = 0 AND dest_zip = '*'\"",49],",",["T_WHITESPACE","\n                ",49],["T_CONSTANT_ENCAPSED_STRING","\"dest_country_id = '0' AND dest_region_id = :region_id AND dest_zip = '*'\"",50],",",["T_WHITESPACE","\n                ",50],["T_CONSTANT_ENCAPSED_STRING","\"dest_country_id = '0' AND dest_region_id = 0 AND dest_zip = '*'\"",51],",",["T_WHITESPACE","\n                ",51],["T_CONSTANT_ENCAPSED_STRING","\"dest_country_id = :country_id AND dest_region_id = 0 AND dest_zip = ''\"",52],",",["T_WHITESPACE","\n                ",52],["T_CONSTANT_ENCAPSED_STRING","\"dest_country_id = :country_id AND dest_region_id = 0 AND dest_zip = :postcode\"",53],",",["T_WHITESPACE","\n                ",53],["T_CONSTANT_ENCAPSED_STRING","\"dest_country_id = :country_id AND dest_region_id = 0 AND dest_zip = '*'\"",54],["T_WHITESPACE","\n            ",54],"]",["T_WHITESPACE","\n        ",55],")",["T_WHITESPACE"," ",56],".",["T_WHITESPACE"," ",56],["T_CONSTANT_ENCAPSED_STRING","')'",56],";",["T_WHITESPACE","\n        ",56],["T_VARIABLE","$select",57],["T_OBJECT_OPERATOR","->",57],["T_STRING","where",57],"(",["T_VARIABLE","$orWhere",57],")",";",["T_WHITESPACE","\n\n        ",57],["T_COMMENT","\/\/ Render condition by condition name\n",59],["T_WHITESPACE","        ",60],["T_IF","if",60],["T_WHITESPACE"," ",60],"(",["T_STRING","is_array",60],"(",["T_VARIABLE","$this",60],["T_OBJECT_OPERATOR","->",60],["T_STRING","request",60],["T_OBJECT_OPERATOR","->",60],["T_STRING","getConditionName",60],"(",")",")",")",["T_WHITESPACE"," ",60],"{",["T_WHITESPACE","\n            ",60],["T_VARIABLE","$orWhere",61],["T_WHITESPACE"," ",61],"=",["T_WHITESPACE"," ",61],"[","]",";",["T_WHITESPACE","\n            ",61],["T_FOREACH","foreach",62],["T_WHITESPACE"," ",62],"(",["T_STRING","range",62],"(",["T_LNUMBER","0",62],",",["T_WHITESPACE"," ",62],["T_STRING","count",62],"(",["T_VARIABLE","$this",62],["T_OBJECT_OPERATOR","->",62],["T_STRING","request",62],["T_OBJECT_OPERATOR","->",62],["T_STRING","getConditionName",62],"(",")",")",")",["T_WHITESPACE"," ",62],["T_AS","as",62],["T_WHITESPACE"," ",62],["T_VARIABLE","$conditionNumber",62],")",["T_WHITESPACE"," ",62],"{",["T_WHITESPACE","\n                ",62],["T_VARIABLE","$bindNameKey",63],["T_WHITESPACE"," ",63],"=",["T_WHITESPACE"," ",63],["T_STRING","sprintf",63],"(",["T_CONSTANT_ENCAPSED_STRING","':condition_name_%d'",63],",",["T_WHITESPACE"," ",63],["T_VARIABLE","$conditionNumber",63],")",";",["T_WHITESPACE","\n                ",63],["T_VARIABLE","$bindValueKey",64],["T_WHITESPACE"," ",64],"=",["T_WHITESPACE"," ",64],["T_STRING","sprintf",64],"(",["T_CONSTANT_ENCAPSED_STRING","':condition_value_%d'",64],",",["T_WHITESPACE"," ",64],["T_VARIABLE","$conditionNumber",64],")",";",["T_WHITESPACE","\n                ",64],["T_VARIABLE","$orWhere",65],"[","]",["T_WHITESPACE"," ",65],"=",["T_WHITESPACE"," ",65],"\"",["T_ENCAPSED_AND_WHITESPACE","(condition_name = ",65],["T_CURLY_OPEN","{",65],["T_VARIABLE","$bindNameKey",65],"}",["T_ENCAPSED_AND_WHITESPACE"," AND condition_value <= ",65],["T_CURLY_OPEN","{",65],["T_VARIABLE","$bindValueKey",65],"}",["T_ENCAPSED_AND_WHITESPACE",")",65],"\"",";",["T_WHITESPACE","\n            ",65],"}",["T_WHITESPACE","\n\n            ",66],["T_IF","if",68],["T_WHITESPACE"," ",68],"(",["T_VARIABLE","$orWhere",68],")",["T_WHITESPACE"," ",68],"{",["T_WHITESPACE","\n                ",68],["T_VARIABLE","$select",69],["T_OBJECT_OPERATOR","->",69],["T_STRING","where",69],"(",["T_STRING","implode",69],"(",["T_CONSTANT_ENCAPSED_STRING","' OR '",69],",",["T_WHITESPACE"," ",69],["T_VARIABLE","$orWhere",69],")",")",";",["T_WHITESPACE","\n            ",69],"}",["T_WHITESPACE","\n        ",70],"}",["T_WHITESPACE"," ",71],["T_ELSE","else",71],["T_WHITESPACE"," ",71],"{",["T_WHITESPACE","\n            ",71],["T_VARIABLE","$select",72],["T_OBJECT_OPERATOR","->",72],["T_STRING","where",72],"(",["T_CONSTANT_ENCAPSED_STRING","'condition_name = :condition_name'",72],")",";",["T_WHITESPACE","\n            ",72],["T_VARIABLE","$select",73],["T_OBJECT_OPERATOR","->",73],["T_STRING","where",73],"(",["T_CONSTANT_ENCAPSED_STRING","'condition_value <= :condition_value'",73],")",";",["T_WHITESPACE","\n        ",73],"}",["T_WHITESPACE","\n        ",74],["T_RETURN","return",75],["T_WHITESPACE"," ",75],["T_VARIABLE","$select",75],";",["T_WHITESPACE","\n    ",75],"}",["T_WHITESPACE","\n\n    ",76],["T_DOC_COMMENT","\/**\n     * @return array\n     *\/",78],["T_WHITESPACE","\n    ",80],["T_PUBLIC","public",81],["T_WHITESPACE"," ",81],["T_FUNCTION","function",81],["T_WHITESPACE"," ",81],["T_STRING","getBindings",81],"(",")",["T_WHITESPACE","\n    ",81],"{",["T_WHITESPACE","\n        ",82],["T_VARIABLE","$bind",83],["T_WHITESPACE"," ",83],"=",["T_WHITESPACE"," ",83],"[",["T_WHITESPACE","\n            ",83],["T_CONSTANT_ENCAPSED_STRING","':website_id'",84],["T_WHITESPACE"," ",84],["T_DOUBLE_ARROW","=>",84],["T_WHITESPACE"," ",84],["T_INT_CAST","(int)",84],["T_VARIABLE","$this",84],["T_OBJECT_OPERATOR","->",84],["T_STRING","request",84],["T_OBJECT_OPERATOR","->",84],["T_STRING","getWebsiteId",84],"(",")",",",["T_WHITESPACE","\n            ",84],["T_CONSTANT_ENCAPSED_STRING","':country_id'",85],["T_WHITESPACE"," ",85],["T_DOUBLE_ARROW","=>",85],["T_WHITESPACE"," ",85],["T_VARIABLE","$this",85],["T_OBJECT_OPERATOR","->",85],["T_STRING","request",85],["T_OBJECT_OPERATOR","->",85],["T_STRING","getDestCountryId",85],"(",")",",",["T_WHITESPACE","\n            ",85],["T_CONSTANT_ENCAPSED_STRING","':region_id'",86],["T_WHITESPACE"," ",86],["T_DOUBLE_ARROW","=>",86],["T_WHITESPACE"," ",86],["T_INT_CAST","(int)",86],["T_VARIABLE","$this",86],["T_OBJECT_OPERATOR","->",86],["T_STRING","request",86],["T_OBJECT_OPERATOR","->",86],["T_STRING","getDestRegionId",86],"(",")",",",["T_WHITESPACE","\n            ",86],["T_CONSTANT_ENCAPSED_STRING","':postcode'",87],["T_WHITESPACE"," ",87],["T_DOUBLE_ARROW","=>",87],["T_WHITESPACE"," ",87],["T_VARIABLE","$this",87],["T_OBJECT_OPERATOR","->",87],["T_STRING","request",87],["T_OBJECT_OPERATOR","->",87],["T_STRING","getDestPostcode",87],"(",")",",",["T_WHITESPACE","\n        ",87],"]",";",["T_WHITESPACE","\n\n        ",88],["T_COMMENT","\/\/ Render condition by condition name\n",90],["T_WHITESPACE","        ",91],["T_IF","if",91],["T_WHITESPACE"," ",91],"(",["T_STRING","is_array",91],"(",["T_VARIABLE","$this",91],["T_OBJECT_OPERATOR","->",91],["T_STRING","request",91],["T_OBJECT_OPERATOR","->",91],["T_STRING","getConditionName",91],"(",")",")",")",["T_WHITESPACE"," ",91],"{",["T_WHITESPACE","\n            ",91],["T_VARIABLE","$i",92],["T_WHITESPACE"," ",92],"=",["T_WHITESPACE"," ",92],["T_LNUMBER","0",92],";",["T_WHITESPACE","\n            ",92],["T_FOREACH","foreach",93],["T_WHITESPACE"," ",93],"(",["T_VARIABLE","$this",93],["T_OBJECT_OPERATOR","->",93],["T_STRING","request",93],["T_OBJECT_OPERATOR","->",93],["T_STRING","getConditionName",93],"(",")",["T_WHITESPACE"," ",93],["T_AS","as",93],["T_WHITESPACE"," ",93],["T_VARIABLE","$conditionName",93],")",["T_WHITESPACE"," ",93],"{",["T_WHITESPACE","\n                ",93],["T_VARIABLE","$bindNameKey",94],["T_WHITESPACE"," ",94],"=",["T_WHITESPACE"," ",94],["T_STRING","sprintf",94],"(",["T_CONSTANT_ENCAPSED_STRING","':condition_name_%d'",94],",",["T_WHITESPACE"," ",94],["T_VARIABLE","$i",94],")",";",["T_WHITESPACE","\n                ",94],["T_VARIABLE","$bindValueKey",95],["T_WHITESPACE"," ",95],"=",["T_WHITESPACE"," ",95],["T_STRING","sprintf",95],"(",["T_CONSTANT_ENCAPSED_STRING","':condition_value_%d'",95],",",["T_WHITESPACE"," ",95],["T_VARIABLE","$i",95],")",";",["T_WHITESPACE","\n                ",95],["T_VARIABLE","$bind",96],"[",["T_VARIABLE","$bindNameKey",96],"]",["T_WHITESPACE"," ",96],"=",["T_WHITESPACE"," ",96],["T_VARIABLE","$conditionName",96],";",["T_WHITESPACE","\n                ",96],["T_VARIABLE","$bind",97],"[",["T_VARIABLE","$bindValueKey",97],"]",["T_WHITESPACE"," ",97],"=",["T_WHITESPACE"," ",97],["T_VARIABLE","$this",97],["T_OBJECT_OPERATOR","->",97],["T_STRING","request",97],["T_OBJECT_OPERATOR","->",97],["T_STRING","getData",97],"(",["T_VARIABLE","$conditionName",97],")",";",["T_WHITESPACE","\n                ",97],["T_VARIABLE","$i",98],["T_INC","++",98],";",["T_WHITESPACE","\n            ",98],"}",["T_WHITESPACE","\n        ",99],"}",["T_WHITESPACE"," ",100],["T_ELSE","else",100],["T_WHITESPACE"," ",100],"{",["T_WHITESPACE","\n            ",100],["T_VARIABLE","$bind",101],"[",["T_CONSTANT_ENCAPSED_STRING","':condition_name'",101],"]",["T_WHITESPACE"," ",101],"=",["T_WHITESPACE"," ",101],["T_VARIABLE","$this",101],["T_OBJECT_OPERATOR","->",101],["T_STRING","request",101],["T_OBJECT_OPERATOR","->",101],["T_STRING","getConditionName",101],"(",")",";",["T_WHITESPACE","\n            ",101],["T_VARIABLE","$bind",102],"[",["T_CONSTANT_ENCAPSED_STRING","':condition_value'",102],"]",["T_WHITESPACE"," ",102],"=",["T_WHITESPACE"," ",102],["T_VARIABLE","$this",102],["T_OBJECT_OPERATOR","->",102],["T_STRING","request",102],["T_OBJECT_OPERATOR","->",102],["T_STRING","getData",102],"(",["T_VARIABLE","$this",102],["T_OBJECT_OPERATOR","->",102],["T_STRING","request",102],["T_OBJECT_OPERATOR","->",102],["T_STRING","getConditionName",102],"(",")",")",";",["T_WHITESPACE","\n        ",102],"}",["T_WHITESPACE","\n\n        ",103],["T_RETURN","return",105],["T_WHITESPACE"," ",105],["T_VARIABLE","$bind",105],";",["T_WHITESPACE","\n    ",105],"}",["T_WHITESPACE","\n\n    ",106],["T_DOC_COMMENT","\/**\n     * @return \\Magento\\Quote\\Model\\Quote\\Address\\RateRequest\n     *\/",108],["T_WHITESPACE","\n    ",110],["T_PUBLIC","public",111],["T_WHITESPACE"," ",111],["T_FUNCTION","function",111],["T_WHITESPACE"," ",111],["T_STRING","getRequest",111],"(",")",["T_WHITESPACE","\n    ",111],"{",["T_WHITESPACE","\n        ",112],["T_RETURN","return",113],["T_WHITESPACE"," ",113],["T_VARIABLE","$this",113],["T_OBJECT_OPERATOR","->",113],["T_STRING","request",113],";",["T_WHITESPACE","\n    ",113],"}",["T_WHITESPACE","\n",114],"}",["T_WHITESPACE","\n",115]]
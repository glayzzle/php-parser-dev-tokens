[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Copyright \u00c2\u00a9 2013-2017 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n *\/",2],["T_WHITESPACE","\n",5],["T_NAMESPACE","namespace",6],["T_WHITESPACE"," ",6],["T_STRING","Magento",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Sales",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Block",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Adminhtml",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Order",6],["T_NS_SEPARATOR","\\",6],["T_STRING","View",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Tab",6],";",["T_WHITESPACE","\n\n",6],["T_DOC_COMMENT","\/**\n * Order history tab\n *\n * @author      Magento Core Team <core@magentocommerce.com>\n *\/",8],["T_WHITESPACE","\n",12],["T_CLASS","class",13],["T_WHITESPACE"," ",13],["T_STRING","History",13],["T_WHITESPACE"," ",13],["T_EXTENDS","extends",13],["T_WHITESPACE"," ",13],["T_NS_SEPARATOR","\\",13],["T_STRING","Magento",13],["T_NS_SEPARATOR","\\",13],["T_STRING","Backend",13],["T_NS_SEPARATOR","\\",13],["T_STRING","Block",13],["T_NS_SEPARATOR","\\",13],["T_STRING","Template",13],["T_WHITESPACE"," ",13],["T_IMPLEMENTS","implements",13],["T_WHITESPACE"," ",13],["T_NS_SEPARATOR","\\",13],["T_STRING","Magento",13],["T_NS_SEPARATOR","\\",13],["T_STRING","Backend",13],["T_NS_SEPARATOR","\\",13],["T_STRING","Block",13],["T_NS_SEPARATOR","\\",13],["T_STRING","Widget",13],["T_NS_SEPARATOR","\\",13],["T_STRING","Tab",13],["T_NS_SEPARATOR","\\",13],["T_STRING","TabInterface",13],["T_WHITESPACE","\n",13],"{",["T_WHITESPACE","\n    ",14],["T_DOC_COMMENT","\/**\n     * Template\n     *\n     * @var string\n     *\/",15],["T_WHITESPACE","\n    ",19],["T_PROTECTED","protected",20],["T_WHITESPACE"," ",20],["T_VARIABLE","$_template",20],["T_WHITESPACE"," ",20],"=",["T_WHITESPACE"," ",20],["T_CONSTANT_ENCAPSED_STRING","'order\/view\/tab\/history.phtml'",20],";",["T_WHITESPACE","\n\n    ",20],["T_DOC_COMMENT","\/**\n     * Core registry\n     *\n     * @var \\Magento\\Framework\\Registry\n     *\/",22],["T_WHITESPACE","\n    ",26],["T_PROTECTED","protected",27],["T_WHITESPACE"," ",27],["T_VARIABLE","$_coreRegistry",27],["T_WHITESPACE"," ",27],"=",["T_WHITESPACE"," ",27],["T_STRING","null",27],";",["T_WHITESPACE","\n\n    ",27],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Sales\\Helper\\Admin\n     *\/",29],["T_WHITESPACE","\n    ",31],["T_PRIVATE","private",32],["T_WHITESPACE"," ",32],["T_VARIABLE","$adminHelper",32],";",["T_WHITESPACE","\n\n    ",32],["T_DOC_COMMENT","\/**\n     * @param \\Magento\\Backend\\Block\\Template\\Context $context\n     * @param \\Magento\\Framework\\Registry $registry\n     * @param \\Magento\\Sales\\Helper\\Admin $adminHelper\n     * @param array $data\n     *\/",34],["T_WHITESPACE","\n    ",39],["T_PUBLIC","public",40],["T_WHITESPACE"," ",40],["T_FUNCTION","function",40],["T_WHITESPACE"," ",40],["T_STRING","__construct",40],"(",["T_WHITESPACE","\n        ",40],["T_NS_SEPARATOR","\\",41],["T_STRING","Magento",41],["T_NS_SEPARATOR","\\",41],["T_STRING","Backend",41],["T_NS_SEPARATOR","\\",41],["T_STRING","Block",41],["T_NS_SEPARATOR","\\",41],["T_STRING","Template",41],["T_NS_SEPARATOR","\\",41],["T_STRING","Context",41],["T_WHITESPACE"," ",41],["T_VARIABLE","$context",41],",",["T_WHITESPACE","\n        ",41],["T_NS_SEPARATOR","\\",42],["T_STRING","Magento",42],["T_NS_SEPARATOR","\\",42],["T_STRING","Framework",42],["T_NS_SEPARATOR","\\",42],["T_STRING","Registry",42],["T_WHITESPACE"," ",42],["T_VARIABLE","$registry",42],",",["T_WHITESPACE","\n        ",42],["T_NS_SEPARATOR","\\",43],["T_STRING","Magento",43],["T_NS_SEPARATOR","\\",43],["T_STRING","Sales",43],["T_NS_SEPARATOR","\\",43],["T_STRING","Helper",43],["T_NS_SEPARATOR","\\",43],["T_STRING","Admin",43],["T_WHITESPACE"," ",43],["T_VARIABLE","$adminHelper",43],",",["T_WHITESPACE","\n        ",43],["T_ARRAY","array",44],["T_WHITESPACE"," ",44],["T_VARIABLE","$data",44],["T_WHITESPACE"," ",44],"=",["T_WHITESPACE"," ",44],"[","]",["T_WHITESPACE","\n    ",44],")",["T_WHITESPACE"," ",45],"{",["T_WHITESPACE","\n        ",45],["T_VARIABLE","$this",46],["T_OBJECT_OPERATOR","->",46],["T_STRING","_coreRegistry",46],["T_WHITESPACE"," ",46],"=",["T_WHITESPACE"," ",46],["T_VARIABLE","$registry",46],";",["T_WHITESPACE","\n        ",46],["T_STRING","parent",47],["T_DOUBLE_COLON","::",47],["T_STRING","__construct",47],"(",["T_VARIABLE","$context",47],",",["T_WHITESPACE"," ",47],["T_VARIABLE","$data",47],")",";",["T_WHITESPACE","\n        ",47],["T_VARIABLE","$this",48],["T_OBJECT_OPERATOR","->",48],["T_STRING","adminHelper",48],["T_WHITESPACE"," ",48],"=",["T_WHITESPACE"," ",48],["T_VARIABLE","$adminHelper",48],";",["T_WHITESPACE","\n    ",48],"}",["T_WHITESPACE","\n\n    ",49],["T_DOC_COMMENT","\/**\n     * Retrieve order model instance\n     *\n     * @return \\Magento\\Sales\\Model\\Order\n     *\/",51],["T_WHITESPACE","\n    ",55],["T_PUBLIC","public",56],["T_WHITESPACE"," ",56],["T_FUNCTION","function",56],["T_WHITESPACE"," ",56],["T_STRING","getOrder",56],"(",")",["T_WHITESPACE","\n    ",56],"{",["T_WHITESPACE","\n        ",57],["T_RETURN","return",58],["T_WHITESPACE"," ",58],["T_VARIABLE","$this",58],["T_OBJECT_OPERATOR","->",58],["T_STRING","_coreRegistry",58],["T_OBJECT_OPERATOR","->",58],["T_STRING","registry",58],"(",["T_CONSTANT_ENCAPSED_STRING","'current_order'",58],")",";",["T_WHITESPACE","\n    ",58],"}",["T_WHITESPACE","\n\n    ",59],["T_DOC_COMMENT","\/**\n     * Compose and get order full history.\n     * Consists of the status history comments as well as of invoices, shipments and creditmemos creations\n     *\n     * @TODO This method requires refactoring. Need to create separate model for comment history handling\n     * and avoid generating it dynamically\n     *\n     * @return array\n     *\/",61],["T_WHITESPACE","\n    ",69],["T_PUBLIC","public",70],["T_WHITESPACE"," ",70],["T_FUNCTION","function",70],["T_WHITESPACE"," ",70],["T_STRING","getFullHistory",70],"(",")",["T_WHITESPACE","\n    ",70],"{",["T_WHITESPACE","\n        ",71],["T_VARIABLE","$order",72],["T_WHITESPACE"," ",72],"=",["T_WHITESPACE"," ",72],["T_VARIABLE","$this",72],["T_OBJECT_OPERATOR","->",72],["T_STRING","getOrder",72],"(",")",";",["T_WHITESPACE","\n\n        ",72],["T_VARIABLE","$history",74],["T_WHITESPACE"," ",74],"=",["T_WHITESPACE"," ",74],"[","]",";",["T_WHITESPACE","\n        ",74],["T_FOREACH","foreach",75],["T_WHITESPACE"," ",75],"(",["T_VARIABLE","$order",75],["T_OBJECT_OPERATOR","->",75],["T_STRING","getAllStatusHistory",75],"(",")",["T_WHITESPACE"," ",75],["T_AS","as",75],["T_WHITESPACE"," ",75],["T_VARIABLE","$orderComment",75],")",["T_WHITESPACE"," ",75],"{",["T_WHITESPACE","\n            ",75],["T_VARIABLE","$history",76],"[","]",["T_WHITESPACE"," ",76],"=",["T_WHITESPACE"," ",76],["T_VARIABLE","$this",76],["T_OBJECT_OPERATOR","->",76],["T_STRING","_prepareHistoryItem",76],"(",["T_WHITESPACE","\n                ",76],["T_VARIABLE","$orderComment",77],["T_OBJECT_OPERATOR","->",77],["T_STRING","getStatusLabel",77],"(",")",",",["T_WHITESPACE","\n                ",77],["T_VARIABLE","$orderComment",78],["T_OBJECT_OPERATOR","->",78],["T_STRING","getIsCustomerNotified",78],"(",")",",",["T_WHITESPACE","\n                ",78],["T_VARIABLE","$this",79],["T_OBJECT_OPERATOR","->",79],["T_STRING","getOrderAdminDate",79],"(",["T_VARIABLE","$orderComment",79],["T_OBJECT_OPERATOR","->",79],["T_STRING","getCreatedAt",79],"(",")",")",",",["T_WHITESPACE","\n                ",79],["T_VARIABLE","$orderComment",80],["T_OBJECT_OPERATOR","->",80],["T_STRING","getComment",80],"(",")",["T_WHITESPACE","\n            ",80],")",";",["T_WHITESPACE","\n        ",81],"}",["T_WHITESPACE","\n\n        ",82],["T_FOREACH","foreach",84],["T_WHITESPACE"," ",84],"(",["T_VARIABLE","$order",84],["T_OBJECT_OPERATOR","->",84],["T_STRING","getCreditmemosCollection",84],"(",")",["T_WHITESPACE"," ",84],["T_AS","as",84],["T_WHITESPACE"," ",84],["T_VARIABLE","$_memo",84],")",["T_WHITESPACE"," ",84],"{",["T_WHITESPACE","\n            ",84],["T_VARIABLE","$history",85],"[","]",["T_WHITESPACE"," ",85],"=",["T_WHITESPACE"," ",85],["T_VARIABLE","$this",85],["T_OBJECT_OPERATOR","->",85],["T_STRING","_prepareHistoryItem",85],"(",["T_WHITESPACE","\n                ",85],["T_STRING","__",86],"(",["T_CONSTANT_ENCAPSED_STRING","'Credit memo #%1 created'",86],",",["T_WHITESPACE"," ",86],["T_VARIABLE","$_memo",86],["T_OBJECT_OPERATOR","->",86],["T_STRING","getIncrementId",86],"(",")",")",",",["T_WHITESPACE","\n                ",86],["T_VARIABLE","$_memo",87],["T_OBJECT_OPERATOR","->",87],["T_STRING","getEmailSent",87],"(",")",",",["T_WHITESPACE","\n                ",87],["T_VARIABLE","$this",88],["T_OBJECT_OPERATOR","->",88],["T_STRING","getOrderAdminDate",88],"(",["T_VARIABLE","$_memo",88],["T_OBJECT_OPERATOR","->",88],["T_STRING","getCreatedAt",88],"(",")",")",["T_WHITESPACE","\n            ",88],")",";",["T_WHITESPACE","\n\n            ",89],["T_FOREACH","foreach",91],["T_WHITESPACE"," ",91],"(",["T_VARIABLE","$_memo",91],["T_OBJECT_OPERATOR","->",91],["T_STRING","getCommentsCollection",91],"(",")",["T_WHITESPACE"," ",91],["T_AS","as",91],["T_WHITESPACE"," ",91],["T_VARIABLE","$_comment",91],")",["T_WHITESPACE"," ",91],"{",["T_WHITESPACE","\n                ",91],["T_VARIABLE","$history",92],"[","]",["T_WHITESPACE"," ",92],"=",["T_WHITESPACE"," ",92],["T_VARIABLE","$this",92],["T_OBJECT_OPERATOR","->",92],["T_STRING","_prepareHistoryItem",92],"(",["T_WHITESPACE","\n                    ",92],["T_STRING","__",93],"(",["T_CONSTANT_ENCAPSED_STRING","'Credit memo #%1 comment added'",93],",",["T_WHITESPACE"," ",93],["T_VARIABLE","$_memo",93],["T_OBJECT_OPERATOR","->",93],["T_STRING","getIncrementId",93],"(",")",")",",",["T_WHITESPACE","\n                    ",93],["T_VARIABLE","$_comment",94],["T_OBJECT_OPERATOR","->",94],["T_STRING","getIsCustomerNotified",94],"(",")",",",["T_WHITESPACE","\n                    ",94],["T_VARIABLE","$this",95],["T_OBJECT_OPERATOR","->",95],["T_STRING","getOrderAdminDate",95],"(",["T_VARIABLE","$_comment",95],["T_OBJECT_OPERATOR","->",95],["T_STRING","getCreatedAt",95],"(",")",")",",",["T_WHITESPACE","\n                    ",95],["T_VARIABLE","$_comment",96],["T_OBJECT_OPERATOR","->",96],["T_STRING","getComment",96],"(",")",["T_WHITESPACE","\n                ",96],")",";",["T_WHITESPACE","\n            ",97],"}",["T_WHITESPACE","\n        ",98],"}",["T_WHITESPACE","\n\n        ",99],["T_FOREACH","foreach",101],["T_WHITESPACE"," ",101],"(",["T_VARIABLE","$order",101],["T_OBJECT_OPERATOR","->",101],["T_STRING","getShipmentsCollection",101],"(",")",["T_WHITESPACE"," ",101],["T_AS","as",101],["T_WHITESPACE"," ",101],["T_VARIABLE","$_shipment",101],")",["T_WHITESPACE"," ",101],"{",["T_WHITESPACE","\n            ",101],["T_VARIABLE","$history",102],"[","]",["T_WHITESPACE"," ",102],"=",["T_WHITESPACE"," ",102],["T_VARIABLE","$this",102],["T_OBJECT_OPERATOR","->",102],["T_STRING","_prepareHistoryItem",102],"(",["T_WHITESPACE","\n                ",102],["T_STRING","__",103],"(",["T_CONSTANT_ENCAPSED_STRING","'Shipment #%1 created'",103],",",["T_WHITESPACE"," ",103],["T_VARIABLE","$_shipment",103],["T_OBJECT_OPERATOR","->",103],["T_STRING","getIncrementId",103],"(",")",")",",",["T_WHITESPACE","\n                ",103],["T_VARIABLE","$_shipment",104],["T_OBJECT_OPERATOR","->",104],["T_STRING","getEmailSent",104],"(",")",",",["T_WHITESPACE","\n                ",104],["T_VARIABLE","$this",105],["T_OBJECT_OPERATOR","->",105],["T_STRING","getOrderAdminDate",105],"(",["T_VARIABLE","$_shipment",105],["T_OBJECT_OPERATOR","->",105],["T_STRING","getCreatedAt",105],"(",")",")",["T_WHITESPACE","\n            ",105],")",";",["T_WHITESPACE","\n\n            ",106],["T_FOREACH","foreach",108],["T_WHITESPACE"," ",108],"(",["T_VARIABLE","$_shipment",108],["T_OBJECT_OPERATOR","->",108],["T_STRING","getCommentsCollection",108],"(",")",["T_WHITESPACE"," ",108],["T_AS","as",108],["T_WHITESPACE"," ",108],["T_VARIABLE","$_comment",108],")",["T_WHITESPACE"," ",108],"{",["T_WHITESPACE","\n                ",108],["T_VARIABLE","$history",109],"[","]",["T_WHITESPACE"," ",109],"=",["T_WHITESPACE"," ",109],["T_VARIABLE","$this",109],["T_OBJECT_OPERATOR","->",109],["T_STRING","_prepareHistoryItem",109],"(",["T_WHITESPACE","\n                    ",109],["T_STRING","__",110],"(",["T_CONSTANT_ENCAPSED_STRING","'Shipment #%1 comment added'",110],",",["T_WHITESPACE"," ",110],["T_VARIABLE","$_shipment",110],["T_OBJECT_OPERATOR","->",110],["T_STRING","getIncrementId",110],"(",")",")",",",["T_WHITESPACE","\n                    ",110],["T_VARIABLE","$_comment",111],["T_OBJECT_OPERATOR","->",111],["T_STRING","getIsCustomerNotified",111],"(",")",",",["T_WHITESPACE","\n                    ",111],["T_VARIABLE","$this",112],["T_OBJECT_OPERATOR","->",112],["T_STRING","getOrderAdminDate",112],"(",["T_VARIABLE","$_comment",112],["T_OBJECT_OPERATOR","->",112],["T_STRING","getCreatedAt",112],"(",")",")",",",["T_WHITESPACE","\n                    ",112],["T_VARIABLE","$_comment",113],["T_OBJECT_OPERATOR","->",113],["T_STRING","getComment",113],"(",")",["T_WHITESPACE","\n                ",113],")",";",["T_WHITESPACE","\n            ",114],"}",["T_WHITESPACE","\n        ",115],"}",["T_WHITESPACE","\n\n        ",116],["T_FOREACH","foreach",118],["T_WHITESPACE"," ",118],"(",["T_VARIABLE","$order",118],["T_OBJECT_OPERATOR","->",118],["T_STRING","getInvoiceCollection",118],"(",")",["T_WHITESPACE"," ",118],["T_AS","as",118],["T_WHITESPACE"," ",118],["T_VARIABLE","$_invoice",118],")",["T_WHITESPACE"," ",118],"{",["T_WHITESPACE","\n            ",118],["T_VARIABLE","$history",119],"[","]",["T_WHITESPACE"," ",119],"=",["T_WHITESPACE"," ",119],["T_VARIABLE","$this",119],["T_OBJECT_OPERATOR","->",119],["T_STRING","_prepareHistoryItem",119],"(",["T_WHITESPACE","\n                ",119],["T_STRING","__",120],"(",["T_CONSTANT_ENCAPSED_STRING","'Invoice #%1 created'",120],",",["T_WHITESPACE"," ",120],["T_VARIABLE","$_invoice",120],["T_OBJECT_OPERATOR","->",120],["T_STRING","getIncrementId",120],"(",")",")",",",["T_WHITESPACE","\n                ",120],["T_VARIABLE","$_invoice",121],["T_OBJECT_OPERATOR","->",121],["T_STRING","getEmailSent",121],"(",")",",",["T_WHITESPACE","\n                ",121],["T_VARIABLE","$this",122],["T_OBJECT_OPERATOR","->",122],["T_STRING","getOrderAdminDate",122],"(",["T_VARIABLE","$_invoice",122],["T_OBJECT_OPERATOR","->",122],["T_STRING","getCreatedAt",122],"(",")",")",["T_WHITESPACE","\n            ",122],")",";",["T_WHITESPACE","\n\n            ",123],["T_FOREACH","foreach",125],["T_WHITESPACE"," ",125],"(",["T_VARIABLE","$_invoice",125],["T_OBJECT_OPERATOR","->",125],["T_STRING","getCommentsCollection",125],"(",")",["T_WHITESPACE"," ",125],["T_AS","as",125],["T_WHITESPACE"," ",125],["T_VARIABLE","$_comment",125],")",["T_WHITESPACE"," ",125],"{",["T_WHITESPACE","\n                ",125],["T_VARIABLE","$history",126],"[","]",["T_WHITESPACE"," ",126],"=",["T_WHITESPACE"," ",126],["T_VARIABLE","$this",126],["T_OBJECT_OPERATOR","->",126],["T_STRING","_prepareHistoryItem",126],"(",["T_WHITESPACE","\n                    ",126],["T_STRING","__",127],"(",["T_CONSTANT_ENCAPSED_STRING","'Invoice #%1 comment added'",127],",",["T_WHITESPACE"," ",127],["T_VARIABLE","$_invoice",127],["T_OBJECT_OPERATOR","->",127],["T_STRING","getIncrementId",127],"(",")",")",",",["T_WHITESPACE","\n                    ",127],["T_VARIABLE","$_comment",128],["T_OBJECT_OPERATOR","->",128],["T_STRING","getIsCustomerNotified",128],"(",")",",",["T_WHITESPACE","\n                    ",128],["T_VARIABLE","$this",129],["T_OBJECT_OPERATOR","->",129],["T_STRING","getOrderAdminDate",129],"(",["T_VARIABLE","$_comment",129],["T_OBJECT_OPERATOR","->",129],["T_STRING","getCreatedAt",129],"(",")",")",",",["T_WHITESPACE","\n                    ",129],["T_VARIABLE","$_comment",130],["T_OBJECT_OPERATOR","->",130],["T_STRING","getComment",130],"(",")",["T_WHITESPACE","\n                ",130],")",";",["T_WHITESPACE","\n            ",131],"}",["T_WHITESPACE","\n        ",132],"}",["T_WHITESPACE","\n\n        ",133],["T_FOREACH","foreach",135],["T_WHITESPACE"," ",135],"(",["T_VARIABLE","$order",135],["T_OBJECT_OPERATOR","->",135],["T_STRING","getTracksCollection",135],"(",")",["T_WHITESPACE"," ",135],["T_AS","as",135],["T_WHITESPACE"," ",135],["T_VARIABLE","$_track",135],")",["T_WHITESPACE"," ",135],"{",["T_WHITESPACE","\n            ",135],["T_VARIABLE","$history",136],"[","]",["T_WHITESPACE"," ",136],"=",["T_WHITESPACE"," ",136],["T_VARIABLE","$this",136],["T_OBJECT_OPERATOR","->",136],["T_STRING","_prepareHistoryItem",136],"(",["T_WHITESPACE","\n                ",136],["T_STRING","__",137],"(",["T_CONSTANT_ENCAPSED_STRING","'Tracking number %1 for %2 assigned'",137],",",["T_WHITESPACE"," ",137],["T_VARIABLE","$_track",137],["T_OBJECT_OPERATOR","->",137],["T_STRING","getNumber",137],"(",")",",",["T_WHITESPACE"," ",137],["T_VARIABLE","$_track",137],["T_OBJECT_OPERATOR","->",137],["T_STRING","getTitle",137],"(",")",")",",",["T_WHITESPACE","\n                ",137],["T_STRING","false",138],",",["T_WHITESPACE","\n                ",138],["T_VARIABLE","$this",139],["T_OBJECT_OPERATOR","->",139],["T_STRING","getOrderAdminDate",139],"(",["T_VARIABLE","$_track",139],["T_OBJECT_OPERATOR","->",139],["T_STRING","getCreatedAt",139],"(",")",")",["T_WHITESPACE","\n            ",139],")",";",["T_WHITESPACE","\n        ",140],"}",["T_WHITESPACE","\n\n        ",141],["T_STRING","usort",143],"(",["T_VARIABLE","$history",143],",",["T_WHITESPACE"," ",143],"[",["T_CLASS_C","__CLASS__",143],",",["T_WHITESPACE"," ",143],["T_CONSTANT_ENCAPSED_STRING","'sortHistoryByTimestamp'",143],"]",")",";",["T_WHITESPACE","\n        ",143],["T_RETURN","return",144],["T_WHITESPACE"," ",144],["T_VARIABLE","$history",144],";",["T_WHITESPACE","\n    ",144],"}",["T_WHITESPACE","\n\n    ",145],["T_DOC_COMMENT","\/**\n     * Status history date\/datetime getter\n     *\n     * @param array $item\n     * @param string $dateType\n     * @param int $format\n     * @return string\n     *\/",147],["T_WHITESPACE","\n    ",154],["T_PUBLIC","public",155],["T_WHITESPACE"," ",155],["T_FUNCTION","function",155],["T_WHITESPACE"," ",155],["T_STRING","getItemCreatedAt",155],"(",["T_ARRAY","array",155],["T_WHITESPACE"," ",155],["T_VARIABLE","$item",155],",",["T_WHITESPACE"," ",155],["T_VARIABLE","$dateType",155],["T_WHITESPACE"," ",155],"=",["T_WHITESPACE"," ",155],["T_CONSTANT_ENCAPSED_STRING","'date'",155],",",["T_WHITESPACE"," ",155],["T_VARIABLE","$format",155],["T_WHITESPACE"," ",155],"=",["T_WHITESPACE"," ",155],["T_NS_SEPARATOR","\\",155],["T_STRING","IntlDateFormatter",155],["T_DOUBLE_COLON","::",155],["T_STRING","MEDIUM",155],")",["T_WHITESPACE","\n    ",155],"{",["T_WHITESPACE","\n        ",156],["T_IF","if",157],["T_WHITESPACE"," ",157],"(","!",["T_ISSET","isset",157],"(",["T_VARIABLE","$item",157],"[",["T_CONSTANT_ENCAPSED_STRING","'created_at'",157],"]",")",")",["T_WHITESPACE"," ",157],"{",["T_WHITESPACE","\n            ",157],["T_RETURN","return",158],["T_WHITESPACE"," ",158],["T_CONSTANT_ENCAPSED_STRING","''",158],";",["T_WHITESPACE","\n        ",158],"}",["T_WHITESPACE","\n        ",159],["T_IF","if",160],["T_WHITESPACE"," ",160],"(",["T_CONSTANT_ENCAPSED_STRING","'date'",160],["T_WHITESPACE"," ",160],["T_IS_IDENTICAL","===",160],["T_WHITESPACE"," ",160],["T_VARIABLE","$dateType",160],")",["T_WHITESPACE"," ",160],"{",["T_WHITESPACE","\n            ",160],["T_RETURN","return",161],["T_WHITESPACE"," ",161],["T_VARIABLE","$this",161],["T_OBJECT_OPERATOR","->",161],["T_STRING","formatDate",161],"(",["T_VARIABLE","$item",161],"[",["T_CONSTANT_ENCAPSED_STRING","'created_at'",161],"]",",",["T_WHITESPACE"," ",161],["T_VARIABLE","$format",161],")",";",["T_WHITESPACE","\n        ",161],"}",["T_WHITESPACE","\n        ",162],["T_RETURN","return",163],["T_WHITESPACE"," ",163],["T_VARIABLE","$this",163],["T_OBJECT_OPERATOR","->",163],["T_STRING","formatTime",163],"(",["T_VARIABLE","$item",163],"[",["T_CONSTANT_ENCAPSED_STRING","'created_at'",163],"]",",",["T_WHITESPACE"," ",163],["T_VARIABLE","$format",163],")",";",["T_WHITESPACE","\n    ",163],"}",["T_WHITESPACE","\n\n    ",164],["T_DOC_COMMENT","\/**\n     * Status history item title getter\n     *\n     * @param array $item\n     * @return string\n     *\/",166],["T_WHITESPACE","\n    ",171],["T_PUBLIC","public",172],["T_WHITESPACE"," ",172],["T_FUNCTION","function",172],["T_WHITESPACE"," ",172],["T_STRING","getItemTitle",172],"(",["T_ARRAY","array",172],["T_WHITESPACE"," ",172],["T_VARIABLE","$item",172],")",["T_WHITESPACE","\n    ",172],"{",["T_WHITESPACE","\n        ",173],["T_RETURN","return",174],["T_WHITESPACE"," ",174],["T_ISSET","isset",174],"(",["T_VARIABLE","$item",174],"[",["T_CONSTANT_ENCAPSED_STRING","'title'",174],"]",")",["T_WHITESPACE"," ",174],"?",["T_WHITESPACE"," ",174],["T_VARIABLE","$this",174],["T_OBJECT_OPERATOR","->",174],["T_STRING","escapeHtml",174],"(",["T_VARIABLE","$item",174],"[",["T_CONSTANT_ENCAPSED_STRING","'title'",174],"]",")",["T_WHITESPACE"," ",174],":",["T_WHITESPACE"," ",174],["T_CONSTANT_ENCAPSED_STRING","''",174],";",["T_WHITESPACE","\n    ",174],"}",["T_WHITESPACE","\n\n    ",175],["T_DOC_COMMENT","\/**\n     * Check whether status history comment is with customer notification\n     *\n     * @param array $item\n     * @param bool $isSimpleCheck\n     * @return bool\n     *\/",177],["T_WHITESPACE","\n    ",183],["T_PUBLIC","public",184],["T_WHITESPACE"," ",184],["T_FUNCTION","function",184],["T_WHITESPACE"," ",184],["T_STRING","isItemNotified",184],"(",["T_ARRAY","array",184],["T_WHITESPACE"," ",184],["T_VARIABLE","$item",184],",",["T_WHITESPACE"," ",184],["T_VARIABLE","$isSimpleCheck",184],["T_WHITESPACE"," ",184],"=",["T_WHITESPACE"," ",184],["T_STRING","true",184],")",["T_WHITESPACE","\n    ",184],"{",["T_WHITESPACE","\n        ",185],["T_IF","if",186],["T_WHITESPACE"," ",186],"(",["T_VARIABLE","$isSimpleCheck",186],")",["T_WHITESPACE"," ",186],"{",["T_WHITESPACE","\n            ",186],["T_RETURN","return",187],["T_WHITESPACE"," ",187],"!",["T_EMPTY","empty",187],"(",["T_VARIABLE","$item",187],"[",["T_CONSTANT_ENCAPSED_STRING","'notified'",187],"]",")",";",["T_WHITESPACE","\n        ",187],"}",["T_WHITESPACE","\n        ",188],["T_RETURN","return",189],["T_WHITESPACE"," ",189],["T_ISSET","isset",189],"(",["T_VARIABLE","$item",189],"[",["T_CONSTANT_ENCAPSED_STRING","'notified'",189],"]",")",["T_WHITESPACE"," ",189],["T_BOOLEAN_AND","&&",189],["T_WHITESPACE"," ",189],["T_STRING","false",189],["T_WHITESPACE"," ",189],["T_IS_NOT_IDENTICAL","!==",189],["T_WHITESPACE"," ",189],["T_VARIABLE","$item",189],"[",["T_CONSTANT_ENCAPSED_STRING","'notified'",189],"]",";",["T_WHITESPACE","\n    ",189],"}",["T_WHITESPACE","\n\n    ",190],["T_DOC_COMMENT","\/**\n     * Status history item comment getter\n     *\n     * @param array $item\n     * @return string\n     *\/",192],["T_WHITESPACE","\n    ",197],["T_PUBLIC","public",198],["T_WHITESPACE"," ",198],["T_FUNCTION","function",198],["T_WHITESPACE"," ",198],["T_STRING","getItemComment",198],"(",["T_ARRAY","array",198],["T_WHITESPACE"," ",198],["T_VARIABLE","$item",198],")",["T_WHITESPACE","\n    ",198],"{",["T_WHITESPACE","\n        ",199],["T_VARIABLE","$allowedTags",200],["T_WHITESPACE"," ",200],"=",["T_WHITESPACE"," ",200],"[",["T_CONSTANT_ENCAPSED_STRING","'b'",200],",",["T_WHITESPACE"," ",200],["T_CONSTANT_ENCAPSED_STRING","'br'",200],",",["T_WHITESPACE"," ",200],["T_CONSTANT_ENCAPSED_STRING","'strong'",200],",",["T_WHITESPACE"," ",200],["T_CONSTANT_ENCAPSED_STRING","'i'",200],",",["T_WHITESPACE"," ",200],["T_CONSTANT_ENCAPSED_STRING","'u'",200],",",["T_WHITESPACE"," ",200],["T_CONSTANT_ENCAPSED_STRING","'a'",200],"]",";",["T_WHITESPACE","\n        ",200],["T_RETURN","return",201],["T_WHITESPACE"," ",201],["T_ISSET","isset",201],"(",["T_VARIABLE","$item",201],"[",["T_CONSTANT_ENCAPSED_STRING","'comment'",201],"]",")",["T_WHITESPACE","\n            ",201],"?",["T_WHITESPACE"," ",202],["T_VARIABLE","$this",202],["T_OBJECT_OPERATOR","->",202],["T_STRING","adminHelper",202],["T_OBJECT_OPERATOR","->",202],["T_STRING","escapeHtmlWithLinks",202],"(",["T_VARIABLE","$item",202],"[",["T_CONSTANT_ENCAPSED_STRING","'comment'",202],"]",",",["T_WHITESPACE"," ",202],["T_VARIABLE","$allowedTags",202],")",["T_WHITESPACE"," ",202],":",["T_WHITESPACE"," ",202],["T_CONSTANT_ENCAPSED_STRING","''",202],";",["T_WHITESPACE","\n    ",202],"}",["T_WHITESPACE","\n\n    ",203],["T_DOC_COMMENT","\/**\n     * Map history items as array\n     *\n     * @param string $label\n     * @param bool $notified\n     * @param \\DateTime $created\n     * @param string $comment\n     * @return array\n     *\/",205],["T_WHITESPACE","\n    ",213],["T_PROTECTED","protected",214],["T_WHITESPACE"," ",214],["T_FUNCTION","function",214],["T_WHITESPACE"," ",214],["T_STRING","_prepareHistoryItem",214],"(",["T_VARIABLE","$label",214],",",["T_WHITESPACE"," ",214],["T_VARIABLE","$notified",214],",",["T_WHITESPACE"," ",214],["T_VARIABLE","$created",214],",",["T_WHITESPACE"," ",214],["T_VARIABLE","$comment",214],["T_WHITESPACE"," ",214],"=",["T_WHITESPACE"," ",214],["T_CONSTANT_ENCAPSED_STRING","''",214],")",["T_WHITESPACE","\n    ",214],"{",["T_WHITESPACE","\n        ",215],["T_RETURN","return",216],["T_WHITESPACE"," ",216],"[",["T_CONSTANT_ENCAPSED_STRING","'title'",216],["T_WHITESPACE"," ",216],["T_DOUBLE_ARROW","=>",216],["T_WHITESPACE"," ",216],["T_VARIABLE","$label",216],",",["T_WHITESPACE"," ",216],["T_CONSTANT_ENCAPSED_STRING","'notified'",216],["T_WHITESPACE"," ",216],["T_DOUBLE_ARROW","=>",216],["T_WHITESPACE"," ",216],["T_VARIABLE","$notified",216],",",["T_WHITESPACE"," ",216],["T_CONSTANT_ENCAPSED_STRING","'comment'",216],["T_WHITESPACE"," ",216],["T_DOUBLE_ARROW","=>",216],["T_WHITESPACE"," ",216],["T_VARIABLE","$comment",216],",",["T_WHITESPACE"," ",216],["T_CONSTANT_ENCAPSED_STRING","'created_at'",216],["T_WHITESPACE"," ",216],["T_DOUBLE_ARROW","=>",216],["T_WHITESPACE"," ",216],["T_VARIABLE","$created",216],"]",";",["T_WHITESPACE","\n    ",216],"}",["T_WHITESPACE","\n\n    ",217],["T_DOC_COMMENT","\/**\n     * {@inheritdoc}\n     *\/",219],["T_WHITESPACE","\n    ",221],["T_PUBLIC","public",222],["T_WHITESPACE"," ",222],["T_FUNCTION","function",222],["T_WHITESPACE"," ",222],["T_STRING","getTabLabel",222],"(",")",["T_WHITESPACE","\n    ",222],"{",["T_WHITESPACE","\n        ",223],["T_RETURN","return",224],["T_WHITESPACE"," ",224],["T_STRING","__",224],"(",["T_CONSTANT_ENCAPSED_STRING","'Comments History'",224],")",";",["T_WHITESPACE","\n    ",224],"}",["T_WHITESPACE","\n\n    ",225],["T_DOC_COMMENT","\/**\n     * {@inheritdoc}\n     *\/",227],["T_WHITESPACE","\n    ",229],["T_PUBLIC","public",230],["T_WHITESPACE"," ",230],["T_FUNCTION","function",230],["T_WHITESPACE"," ",230],["T_STRING","getTabTitle",230],"(",")",["T_WHITESPACE","\n    ",230],"{",["T_WHITESPACE","\n        ",231],["T_RETURN","return",232],["T_WHITESPACE"," ",232],["T_STRING","__",232],"(",["T_CONSTANT_ENCAPSED_STRING","'Order History'",232],")",";",["T_WHITESPACE","\n    ",232],"}",["T_WHITESPACE","\n\n    ",233],["T_DOC_COMMENT","\/**\n     * Get Tab Class\n     *\n     * @return string\n     *\/",235],["T_WHITESPACE","\n    ",239],["T_PUBLIC","public",240],["T_WHITESPACE"," ",240],["T_FUNCTION","function",240],["T_WHITESPACE"," ",240],["T_STRING","getTabClass",240],"(",")",["T_WHITESPACE","\n    ",240],"{",["T_WHITESPACE","\n        ",241],["T_RETURN","return",242],["T_WHITESPACE"," ",242],["T_CONSTANT_ENCAPSED_STRING","'ajax only'",242],";",["T_WHITESPACE","\n    ",242],"}",["T_WHITESPACE","\n\n    ",243],["T_DOC_COMMENT","\/**\n     * Get Class\n     *\n     * @return string\n     *\/",245],["T_WHITESPACE","\n    ",249],["T_PUBLIC","public",250],["T_WHITESPACE"," ",250],["T_FUNCTION","function",250],["T_WHITESPACE"," ",250],["T_STRING","getClass",250],"(",")",["T_WHITESPACE","\n    ",250],"{",["T_WHITESPACE","\n        ",251],["T_RETURN","return",252],["T_WHITESPACE"," ",252],["T_VARIABLE","$this",252],["T_OBJECT_OPERATOR","->",252],["T_STRING","getTabClass",252],"(",")",";",["T_WHITESPACE","\n    ",252],"}",["T_WHITESPACE","\n\n    ",253],["T_DOC_COMMENT","\/**\n     * Get Tab Url\n     *\n     * @return string\n     *\/",255],["T_WHITESPACE","\n    ",259],["T_PUBLIC","public",260],["T_WHITESPACE"," ",260],["T_FUNCTION","function",260],["T_WHITESPACE"," ",260],["T_STRING","getTabUrl",260],"(",")",["T_WHITESPACE","\n    ",260],"{",["T_WHITESPACE","\n        ",261],["T_RETURN","return",262],["T_WHITESPACE"," ",262],["T_VARIABLE","$this",262],["T_OBJECT_OPERATOR","->",262],["T_STRING","getUrl",262],"(",["T_CONSTANT_ENCAPSED_STRING","'sales\/*\/commentsHistory'",262],",",["T_WHITESPACE"," ",262],"[",["T_CONSTANT_ENCAPSED_STRING","'_current'",262],["T_WHITESPACE"," ",262],["T_DOUBLE_ARROW","=>",262],["T_WHITESPACE"," ",262],["T_STRING","true",262],"]",")",";",["T_WHITESPACE","\n    ",262],"}",["T_WHITESPACE","\n\n    ",263],["T_DOC_COMMENT","\/**\n     * {@inheritdoc}\n     *\/",265],["T_WHITESPACE","\n    ",267],["T_PUBLIC","public",268],["T_WHITESPACE"," ",268],["T_FUNCTION","function",268],["T_WHITESPACE"," ",268],["T_STRING","canShowTab",268],"(",")",["T_WHITESPACE","\n    ",268],"{",["T_WHITESPACE","\n        ",269],["T_RETURN","return",270],["T_WHITESPACE"," ",270],["T_STRING","true",270],";",["T_WHITESPACE","\n    ",270],"}",["T_WHITESPACE","\n\n    ",271],["T_DOC_COMMENT","\/**\n     * {@inheritdoc}\n     *\/",273],["T_WHITESPACE","\n    ",275],["T_PUBLIC","public",276],["T_WHITESPACE"," ",276],["T_FUNCTION","function",276],["T_WHITESPACE"," ",276],["T_STRING","isHidden",276],"(",")",["T_WHITESPACE","\n    ",276],"{",["T_WHITESPACE","\n        ",277],["T_RETURN","return",278],["T_WHITESPACE"," ",278],["T_STRING","false",278],";",["T_WHITESPACE","\n    ",278],"}",["T_WHITESPACE","\n\n    ",279],["T_DOC_COMMENT","\/**\n     * Customer Notification Applicable check method\n     *\n     * @param array $historyItem\n     * @return bool\n     *\/",281],["T_WHITESPACE","\n    ",286],["T_PUBLIC","public",287],["T_WHITESPACE"," ",287],["T_FUNCTION","function",287],["T_WHITESPACE"," ",287],["T_STRING","isCustomerNotificationNotApplicable",287],"(",["T_VARIABLE","$historyItem",287],")",["T_WHITESPACE","\n    ",287],"{",["T_WHITESPACE","\n        ",288],["T_RETURN","return",289],["T_WHITESPACE"," ",289],["T_VARIABLE","$historyItem",289],"[",["T_CONSTANT_ENCAPSED_STRING","'notified'",289],"]",["T_WHITESPACE"," ",289],["T_IS_EQUAL","==",289],["T_WHITESPACE","\n            ",289],["T_NS_SEPARATOR","\\",290],["T_STRING","Magento",290],["T_NS_SEPARATOR","\\",290],["T_STRING","Sales",290],["T_NS_SEPARATOR","\\",290],["T_STRING","Model",290],["T_NS_SEPARATOR","\\",290],["T_STRING","Order",290],["T_NS_SEPARATOR","\\",290],["T_STRING","Status",290],["T_NS_SEPARATOR","\\",290],["T_STRING","History",290],["T_DOUBLE_COLON","::",290],["T_STRING","CUSTOMER_NOTIFICATION_NOT_APPLICABLE",290],";",["T_WHITESPACE","\n    ",290],"}",["T_WHITESPACE","\n\n    ",291],["T_DOC_COMMENT","\/**\n     * Comparison For Sorting History By Timestamp\n     *\n     * @param mixed $a\n     * @param mixed $b\n     * @return int\n     *\/",293],["T_WHITESPACE","\n    ",299],["T_PUBLIC","public",300],["T_WHITESPACE"," ",300],["T_STATIC","static",300],["T_WHITESPACE"," ",300],["T_FUNCTION","function",300],["T_WHITESPACE"," ",300],["T_STRING","sortHistoryByTimestamp",300],"(",["T_VARIABLE","$a",300],",",["T_WHITESPACE"," ",300],["T_VARIABLE","$b",300],")",["T_WHITESPACE","\n    ",300],"{",["T_WHITESPACE","\n        ",301],["T_VARIABLE","$createdAtA",302],["T_WHITESPACE"," ",302],"=",["T_WHITESPACE"," ",302],["T_VARIABLE","$a",302],"[",["T_CONSTANT_ENCAPSED_STRING","'created_at'",302],"]",";",["T_WHITESPACE","\n        ",302],["T_VARIABLE","$createdAtB",303],["T_WHITESPACE"," ",303],"=",["T_WHITESPACE"," ",303],["T_VARIABLE","$b",303],"[",["T_CONSTANT_ENCAPSED_STRING","'created_at'",303],"]",";",["T_WHITESPACE","\n\n        ",303],["T_DOC_COMMENT","\/** @var $createdAtA \\DateTime *\/",305],["T_WHITESPACE","\n        ",305],["T_IF","if",306],["T_WHITESPACE"," ",306],"(",["T_VARIABLE","$createdAtA",306],["T_OBJECT_OPERATOR","->",306],["T_STRING","getTimestamp",306],"(",")",["T_WHITESPACE"," ",306],["T_IS_EQUAL","==",306],["T_WHITESPACE"," ",306],["T_VARIABLE","$createdAtB",306],["T_OBJECT_OPERATOR","->",306],["T_STRING","getTimestamp",306],"(",")",")",["T_WHITESPACE"," ",306],"{",["T_WHITESPACE","\n            ",306],["T_RETURN","return",307],["T_WHITESPACE"," ",307],["T_LNUMBER","0",307],";",["T_WHITESPACE","\n        ",307],"}",["T_WHITESPACE","\n        ",308],["T_RETURN","return",309],["T_WHITESPACE"," ",309],["T_VARIABLE","$createdAtA",309],["T_OBJECT_OPERATOR","->",309],["T_STRING","getTimestamp",309],"(",")",["T_WHITESPACE"," ",309],"<",["T_WHITESPACE"," ",309],["T_VARIABLE","$createdAtB",309],["T_OBJECT_OPERATOR","->",309],["T_STRING","getTimestamp",309],"(",")",["T_WHITESPACE"," ",309],"?",["T_WHITESPACE"," ",309],"-",["T_LNUMBER","1",309],["T_WHITESPACE"," ",309],":",["T_WHITESPACE"," ",309],["T_LNUMBER","1",309],";",["T_WHITESPACE","\n    ",309],"}",["T_WHITESPACE","\n\n    ",310],["T_DOC_COMMENT","\/**\n     * Get order admin date\n     * \n     * @param int $createdAt\n     * @return \\DateTime\n     *\/",312],["T_WHITESPACE","\n    ",317],["T_PUBLIC","public",318],["T_WHITESPACE"," ",318],["T_FUNCTION","function",318],["T_WHITESPACE"," ",318],["T_STRING","getOrderAdminDate",318],"(",["T_VARIABLE","$createdAt",318],")",["T_WHITESPACE","\n    ",318],"{",["T_WHITESPACE","\n        ",319],["T_RETURN","return",320],["T_WHITESPACE"," ",320],["T_VARIABLE","$this",320],["T_OBJECT_OPERATOR","->",320],["T_STRING","_localeDate",320],["T_OBJECT_OPERATOR","->",320],["T_STRING","date",320],"(",["T_NEW","new",320],["T_WHITESPACE"," ",320],["T_NS_SEPARATOR","\\",320],["T_STRING","DateTime",320],"(",["T_VARIABLE","$createdAt",320],")",")",";",["T_WHITESPACE","\n    ",320],"}",["T_WHITESPACE","\n",321],"}",["T_WHITESPACE","\n",322]]
[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Copyright \u00c2\u00a9 2013-2017 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n *\/",2],["T_WHITESPACE","\n",5],["T_NAMESPACE","namespace",6],["T_WHITESPACE"," ",6],["T_STRING","Magento",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Sales",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Model",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Order",6],";",["T_WHITESPACE","\n\n",6],["T_USE","use",8],["T_WHITESPACE"," ",8],["T_STRING","Magento",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Framework",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Exception",8],["T_NS_SEPARATOR","\\",8],["T_STRING","AlreadyExistsException",8],";",["T_WHITESPACE","\n",8],["T_USE","use",9],["T_WHITESPACE"," ",9],["T_STRING","Magento",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Quote",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Model",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Quote",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Address",9],["T_WHITESPACE"," ",9],["T_AS","as",9],["T_WHITESPACE"," ",9],["T_STRING","QuoteAddress",9],";",["T_WHITESPACE","\n\n",9],["T_DOC_COMMENT","\/**\n * Class CustomerManagement\n *\/",11],["T_WHITESPACE","\n",13],["T_CLASS","class",14],["T_WHITESPACE"," ",14],["T_STRING","CustomerManagement",14],["T_WHITESPACE"," ",14],["T_IMPLEMENTS","implements",14],["T_WHITESPACE"," ",14],["T_NS_SEPARATOR","\\",14],["T_STRING","Magento",14],["T_NS_SEPARATOR","\\",14],["T_STRING","Sales",14],["T_NS_SEPARATOR","\\",14],["T_STRING","Api",14],["T_NS_SEPARATOR","\\",14],["T_STRING","OrderCustomerManagementInterface",14],["T_WHITESPACE","\n",14],"{",["T_WHITESPACE","\n    ",15],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Customer\\Api\\AccountManagementInterface\n     *\/",16],["T_WHITESPACE","\n    ",18],["T_PROTECTED","protected",19],["T_WHITESPACE"," ",19],["T_VARIABLE","$accountManagement",19],";",["T_WHITESPACE","\n\n    ",19],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Customer\\Api\\Data\\CustomerInterfaceFactory\n     *\/",21],["T_WHITESPACE","\n    ",23],["T_PROTECTED","protected",24],["T_WHITESPACE"," ",24],["T_VARIABLE","$customerFactory",24],";",["T_WHITESPACE","\n\n    ",24],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Customer\\Api\\Data\\AddressInterfaceFactory\n     *\/",26],["T_WHITESPACE","\n    ",28],["T_PROTECTED","protected",29],["T_WHITESPACE"," ",29],["T_VARIABLE","$addressFactory",29],";",["T_WHITESPACE","\n\n    ",29],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Customer\\Api\\Data\\RegionInterfaceFactory\n     *\/",31],["T_WHITESPACE","\n    ",33],["T_PROTECTED","protected",34],["T_WHITESPACE"," ",34],["T_VARIABLE","$regionFactory",34],";",["T_WHITESPACE","\n\n    ",34],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Sales\\Api\\OrderRepositoryInterface\n     *\/",36],["T_WHITESPACE","\n    ",38],["T_PROTECTED","protected",39],["T_WHITESPACE"," ",39],["T_VARIABLE","$orderRepository",39],";",["T_WHITESPACE","\n\n    ",39],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Framework\\DataObject\\Copy\n     *\/",41],["T_WHITESPACE","\n    ",43],["T_PROTECTED","protected",44],["T_WHITESPACE"," ",44],["T_VARIABLE","$objectCopyService",44],";",["T_WHITESPACE","\n\n    ",44],["T_DOC_COMMENT","\/**\n     * @param \\Magento\\Framework\\DataObject\\Copy $objectCopyService\n     * @param \\Magento\\Customer\\Api\\AccountManagementInterface $accountManagement\n     * @param \\Magento\\Customer\\Api\\Data\\CustomerInterfaceFactory $customerFactory\n     * @param \\Magento\\Customer\\Api\\Data\\AddressInterfaceFactory $addressFactory\n     * @param \\Magento\\Customer\\Api\\Data\\RegionInterfaceFactory $regionFactory\n     * @param \\Magento\\Sales\\Api\\OrderRepositoryInterface $orderRepository\n     *\/",46],["T_WHITESPACE","\n    ",53],["T_PUBLIC","public",54],["T_WHITESPACE"," ",54],["T_FUNCTION","function",54],["T_WHITESPACE"," ",54],["T_STRING","__construct",54],"(",["T_WHITESPACE","\n        ",54],["T_NS_SEPARATOR","\\",55],["T_STRING","Magento",55],["T_NS_SEPARATOR","\\",55],["T_STRING","Framework",55],["T_NS_SEPARATOR","\\",55],["T_STRING","DataObject",55],["T_NS_SEPARATOR","\\",55],["T_STRING","Copy",55],["T_WHITESPACE"," ",55],["T_VARIABLE","$objectCopyService",55],",",["T_WHITESPACE","\n        ",55],["T_NS_SEPARATOR","\\",56],["T_STRING","Magento",56],["T_NS_SEPARATOR","\\",56],["T_STRING","Customer",56],["T_NS_SEPARATOR","\\",56],["T_STRING","Api",56],["T_NS_SEPARATOR","\\",56],["T_STRING","AccountManagementInterface",56],["T_WHITESPACE"," ",56],["T_VARIABLE","$accountManagement",56],",",["T_WHITESPACE","\n        ",56],["T_NS_SEPARATOR","\\",57],["T_STRING","Magento",57],["T_NS_SEPARATOR","\\",57],["T_STRING","Customer",57],["T_NS_SEPARATOR","\\",57],["T_STRING","Api",57],["T_NS_SEPARATOR","\\",57],["T_STRING","Data",57],["T_NS_SEPARATOR","\\",57],["T_STRING","CustomerInterfaceFactory",57],["T_WHITESPACE"," ",57],["T_VARIABLE","$customerFactory",57],",",["T_WHITESPACE","\n        ",57],["T_NS_SEPARATOR","\\",58],["T_STRING","Magento",58],["T_NS_SEPARATOR","\\",58],["T_STRING","Customer",58],["T_NS_SEPARATOR","\\",58],["T_STRING","Api",58],["T_NS_SEPARATOR","\\",58],["T_STRING","Data",58],["T_NS_SEPARATOR","\\",58],["T_STRING","AddressInterfaceFactory",58],["T_WHITESPACE"," ",58],["T_VARIABLE","$addressFactory",58],",",["T_WHITESPACE","\n        ",58],["T_NS_SEPARATOR","\\",59],["T_STRING","Magento",59],["T_NS_SEPARATOR","\\",59],["T_STRING","Customer",59],["T_NS_SEPARATOR","\\",59],["T_STRING","Api",59],["T_NS_SEPARATOR","\\",59],["T_STRING","Data",59],["T_NS_SEPARATOR","\\",59],["T_STRING","RegionInterfaceFactory",59],["T_WHITESPACE"," ",59],["T_VARIABLE","$regionFactory",59],",",["T_WHITESPACE","\n        ",59],["T_NS_SEPARATOR","\\",60],["T_STRING","Magento",60],["T_NS_SEPARATOR","\\",60],["T_STRING","Sales",60],["T_NS_SEPARATOR","\\",60],["T_STRING","Api",60],["T_NS_SEPARATOR","\\",60],["T_STRING","OrderRepositoryInterface",60],["T_WHITESPACE"," ",60],["T_VARIABLE","$orderRepository",60],["T_WHITESPACE","\n    ",60],")",["T_WHITESPACE"," ",61],"{",["T_WHITESPACE","\n        ",61],["T_VARIABLE","$this",62],["T_OBJECT_OPERATOR","->",62],["T_STRING","objectCopyService",62],["T_WHITESPACE"," ",62],"=",["T_WHITESPACE"," ",62],["T_VARIABLE","$objectCopyService",62],";",["T_WHITESPACE","\n        ",62],["T_VARIABLE","$this",63],["T_OBJECT_OPERATOR","->",63],["T_STRING","accountManagement",63],["T_WHITESPACE"," ",63],"=",["T_WHITESPACE"," ",63],["T_VARIABLE","$accountManagement",63],";",["T_WHITESPACE","\n        ",63],["T_VARIABLE","$this",64],["T_OBJECT_OPERATOR","->",64],["T_STRING","orderRepository",64],["T_WHITESPACE"," ",64],"=",["T_WHITESPACE"," ",64],["T_VARIABLE","$orderRepository",64],";",["T_WHITESPACE","\n        ",64],["T_VARIABLE","$this",65],["T_OBJECT_OPERATOR","->",65],["T_STRING","customerFactory",65],["T_WHITESPACE"," ",65],"=",["T_WHITESPACE"," ",65],["T_VARIABLE","$customerFactory",65],";",["T_WHITESPACE","\n        ",65],["T_VARIABLE","$this",66],["T_OBJECT_OPERATOR","->",66],["T_STRING","addressFactory",66],["T_WHITESPACE"," ",66],"=",["T_WHITESPACE"," ",66],["T_VARIABLE","$addressFactory",66],";",["T_WHITESPACE","\n        ",66],["T_VARIABLE","$this",67],["T_OBJECT_OPERATOR","->",67],["T_STRING","regionFactory",67],["T_WHITESPACE"," ",67],"=",["T_WHITESPACE"," ",67],["T_VARIABLE","$regionFactory",67],";",["T_WHITESPACE","\n    ",67],"}",["T_WHITESPACE","\n\n    ",68],["T_DOC_COMMENT","\/**\n     * {@inheritdoc}\n     *\/",70],["T_WHITESPACE","\n    ",72],["T_PUBLIC","public",73],["T_WHITESPACE"," ",73],["T_FUNCTION","function",73],["T_WHITESPACE"," ",73],["T_STRING","create",73],"(",["T_VARIABLE","$orderId",73],")",["T_WHITESPACE","\n    ",73],"{",["T_WHITESPACE","\n        ",74],["T_VARIABLE","$order",75],["T_WHITESPACE"," ",75],"=",["T_WHITESPACE"," ",75],["T_VARIABLE","$this",75],["T_OBJECT_OPERATOR","->",75],["T_STRING","orderRepository",75],["T_OBJECT_OPERATOR","->",75],["T_STRING","get",75],"(",["T_VARIABLE","$orderId",75],")",";",["T_WHITESPACE","\n        ",75],["T_IF","if",76],["T_WHITESPACE"," ",76],"(",["T_VARIABLE","$order",76],["T_OBJECT_OPERATOR","->",76],["T_STRING","getCustomerId",76],"(",")",")",["T_WHITESPACE"," ",76],"{",["T_WHITESPACE","\n            ",76],["T_THROW","throw",77],["T_WHITESPACE"," ",77],["T_NEW","new",77],["T_WHITESPACE"," ",77],["T_STRING","AlreadyExistsException",77],"(",["T_STRING","__",77],"(",["T_CONSTANT_ENCAPSED_STRING","\"This order already has associated customer account\"",77],")",")",";",["T_WHITESPACE","\n        ",77],"}",["T_WHITESPACE","\n        ",78],["T_VARIABLE","$customerData",79],["T_WHITESPACE"," ",79],"=",["T_WHITESPACE"," ",79],["T_VARIABLE","$this",79],["T_OBJECT_OPERATOR","->",79],["T_STRING","objectCopyService",79],["T_OBJECT_OPERATOR","->",79],["T_STRING","copyFieldsetToTarget",79],"(",["T_WHITESPACE","\n            ",79],["T_CONSTANT_ENCAPSED_STRING","'order_address'",80],",",["T_WHITESPACE","\n            ",80],["T_CONSTANT_ENCAPSED_STRING","'to_customer'",81],",",["T_WHITESPACE","\n            ",81],["T_VARIABLE","$order",82],["T_OBJECT_OPERATOR","->",82],["T_STRING","getBillingAddress",82],"(",")",",",["T_WHITESPACE","\n            ",82],"[","]",["T_WHITESPACE","\n        ",83],")",";",["T_WHITESPACE","\n        ",84],["T_VARIABLE","$addresses",85],["T_WHITESPACE"," ",85],"=",["T_WHITESPACE"," ",85],["T_VARIABLE","$order",85],["T_OBJECT_OPERATOR","->",85],["T_STRING","getAddresses",85],"(",")",";",["T_WHITESPACE","\n        ",85],["T_FOREACH","foreach",86],["T_WHITESPACE"," ",86],"(",["T_VARIABLE","$addresses",86],["T_WHITESPACE"," ",86],["T_AS","as",86],["T_WHITESPACE"," ",86],["T_VARIABLE","$address",86],")",["T_WHITESPACE"," ",86],"{",["T_WHITESPACE","\n            ",86],["T_VARIABLE","$addressData",87],["T_WHITESPACE"," ",87],"=",["T_WHITESPACE"," ",87],["T_VARIABLE","$this",87],["T_OBJECT_OPERATOR","->",87],["T_STRING","objectCopyService",87],["T_OBJECT_OPERATOR","->",87],["T_STRING","copyFieldsetToTarget",87],"(",["T_WHITESPACE","\n                ",87],["T_CONSTANT_ENCAPSED_STRING","'order_address'",88],",",["T_WHITESPACE","\n                ",88],["T_CONSTANT_ENCAPSED_STRING","'to_customer_address'",89],",",["T_WHITESPACE","\n                ",89],["T_VARIABLE","$address",90],",",["T_WHITESPACE","\n                ",90],"[","]",["T_WHITESPACE","\n            ",91],")",";",["T_WHITESPACE","\n            ",92],["T_DOC_COMMENT","\/** @var \\Magento\\Customer\\Api\\Data\\AddressInterface $customerAddress *\/",93],["T_WHITESPACE","\n            ",93],["T_VARIABLE","$customerAddress",94],["T_WHITESPACE"," ",94],"=",["T_WHITESPACE"," ",94],["T_VARIABLE","$this",94],["T_OBJECT_OPERATOR","->",94],["T_STRING","addressFactory",94],["T_OBJECT_OPERATOR","->",94],["T_STRING","create",94],"(","[",["T_CONSTANT_ENCAPSED_STRING","'data'",94],["T_WHITESPACE"," ",94],["T_DOUBLE_ARROW","=>",94],["T_WHITESPACE"," ",94],["T_VARIABLE","$addressData",94],"]",")",";",["T_WHITESPACE","\n            ",94],["T_SWITCH","switch",95],["T_WHITESPACE"," ",95],"(",["T_VARIABLE","$address",95],["T_OBJECT_OPERATOR","->",95],["T_STRING","getAddressType",95],"(",")",")",["T_WHITESPACE"," ",95],"{",["T_WHITESPACE","\n                ",95],["T_CASE","case",96],["T_WHITESPACE"," ",96],["T_STRING","QuoteAddress",96],["T_DOUBLE_COLON","::",96],["T_STRING","ADDRESS_TYPE_BILLING",96],":",["T_WHITESPACE","\n                    ",96],["T_VARIABLE","$customerAddress",97],["T_OBJECT_OPERATOR","->",97],["T_STRING","setIsDefaultBilling",97],"(",["T_STRING","true",97],")",";",["T_WHITESPACE","\n                    ",97],["T_BREAK","break",98],";",["T_WHITESPACE","\n                ",98],["T_CASE","case",99],["T_WHITESPACE"," ",99],["T_STRING","QuoteAddress",99],["T_DOUBLE_COLON","::",99],["T_STRING","ADDRESS_TYPE_SHIPPING",99],":",["T_WHITESPACE","\n                    ",99],["T_VARIABLE","$customerAddress",100],["T_OBJECT_OPERATOR","->",100],["T_STRING","setIsDefaultShipping",100],"(",["T_STRING","true",100],")",";",["T_WHITESPACE","\n                    ",100],["T_BREAK","break",101],";",["T_WHITESPACE","\n            ",101],"}",["T_WHITESPACE","\n\n            ",102],["T_IF","if",104],["T_WHITESPACE"," ",104],"(",["T_STRING","is_string",104],"(",["T_VARIABLE","$address",104],["T_OBJECT_OPERATOR","->",104],["T_STRING","getRegion",104],"(",")",")",")",["T_WHITESPACE"," ",104],"{",["T_WHITESPACE","\n                ",104],["T_DOC_COMMENT","\/** @var \\Magento\\Customer\\Api\\Data\\RegionInterface $region *\/",105],["T_WHITESPACE","\n                ",105],["T_VARIABLE","$region",106],["T_WHITESPACE"," ",106],"=",["T_WHITESPACE"," ",106],["T_VARIABLE","$this",106],["T_OBJECT_OPERATOR","->",106],["T_STRING","regionFactory",106],["T_OBJECT_OPERATOR","->",106],["T_STRING","create",106],"(",")",";",["T_WHITESPACE","\n                ",106],["T_VARIABLE","$region",107],["T_OBJECT_OPERATOR","->",107],["T_STRING","setRegion",107],"(",["T_VARIABLE","$address",107],["T_OBJECT_OPERATOR","->",107],["T_STRING","getRegion",107],"(",")",")",";",["T_WHITESPACE","\n                ",107],["T_VARIABLE","$region",108],["T_OBJECT_OPERATOR","->",108],["T_STRING","setRegionCode",108],"(",["T_VARIABLE","$address",108],["T_OBJECT_OPERATOR","->",108],["T_STRING","getRegionCode",108],"(",")",")",";",["T_WHITESPACE","\n                ",108],["T_VARIABLE","$region",109],["T_OBJECT_OPERATOR","->",109],["T_STRING","setRegionId",109],"(",["T_VARIABLE","$address",109],["T_OBJECT_OPERATOR","->",109],["T_STRING","getRegionId",109],"(",")",")",";",["T_WHITESPACE","\n                ",109],["T_VARIABLE","$customerAddress",110],["T_OBJECT_OPERATOR","->",110],["T_STRING","setRegion",110],"(",["T_VARIABLE","$region",110],")",";",["T_WHITESPACE","\n            ",110],"}",["T_WHITESPACE","\n            ",111],["T_VARIABLE","$customerData",112],"[",["T_CONSTANT_ENCAPSED_STRING","'addresses'",112],"]","[","]",["T_WHITESPACE"," ",112],"=",["T_WHITESPACE"," ",112],["T_VARIABLE","$customerAddress",112],";",["T_WHITESPACE","\n        ",112],"}",["T_WHITESPACE","\n\n        ",113],["T_DOC_COMMENT","\/** @var \\Magento\\Customer\\Api\\Data\\CustomerInterface $customer *\/",115],["T_WHITESPACE","\n        ",115],["T_VARIABLE","$customer",116],["T_WHITESPACE"," ",116],"=",["T_WHITESPACE"," ",116],["T_VARIABLE","$this",116],["T_OBJECT_OPERATOR","->",116],["T_STRING","customerFactory",116],["T_OBJECT_OPERATOR","->",116],["T_STRING","create",116],"(","[",["T_CONSTANT_ENCAPSED_STRING","'data'",116],["T_WHITESPACE"," ",116],["T_DOUBLE_ARROW","=>",116],["T_WHITESPACE"," ",116],["T_VARIABLE","$customerData",116],"]",")",";",["T_WHITESPACE","\n        ",116],["T_VARIABLE","$account",117],["T_WHITESPACE"," ",117],"=",["T_WHITESPACE"," ",117],["T_VARIABLE","$this",117],["T_OBJECT_OPERATOR","->",117],["T_STRING","accountManagement",117],["T_OBJECT_OPERATOR","->",117],["T_STRING","createAccount",117],"(",["T_VARIABLE","$customer",117],")",";",["T_WHITESPACE","\n        ",117],["T_VARIABLE","$order",118],["T_OBJECT_OPERATOR","->",118],["T_STRING","setCustomerId",118],"(",["T_VARIABLE","$account",118],["T_OBJECT_OPERATOR","->",118],["T_STRING","getId",118],"(",")",")",";",["T_WHITESPACE","\n        ",118],["T_VARIABLE","$this",119],["T_OBJECT_OPERATOR","->",119],["T_STRING","orderRepository",119],["T_OBJECT_OPERATOR","->",119],["T_STRING","save",119],"(",["T_VARIABLE","$order",119],")",";",["T_WHITESPACE","\n        ",119],["T_RETURN","return",120],["T_WHITESPACE"," ",120],["T_VARIABLE","$account",120],";",["T_WHITESPACE","\n    ",120],"}",["T_WHITESPACE","\n",121],"}",["T_WHITESPACE","\n",122]]
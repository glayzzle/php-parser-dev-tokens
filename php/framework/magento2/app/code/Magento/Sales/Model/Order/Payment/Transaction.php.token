[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Copyright \u00c2\u00a9 2013-2017 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n *\/",2],["T_WHITESPACE","\n\n",5],["T_COMMENT","\/\/ @codingStandardsIgnoreFile\n",7],["T_WHITESPACE","\n",8],["T_NAMESPACE","namespace",9],["T_WHITESPACE"," ",9],["T_STRING","Magento",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Sales",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Model",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Order",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Payment",9],";",["T_WHITESPACE","\n\n",9],["T_USE","use",11],["T_WHITESPACE"," ",11],["T_STRING","Magento",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Framework",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Api",11],["T_NS_SEPARATOR","\\",11],["T_STRING","AttributeValueFactory",11],";",["T_WHITESPACE","\n",11],["T_USE","use",12],["T_WHITESPACE"," ",12],["T_STRING","Magento",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Sales",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Api",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Data",12],["T_NS_SEPARATOR","\\",12],["T_STRING","TransactionInterface",12],";",["T_WHITESPACE","\n",12],["T_USE","use",13],["T_WHITESPACE"," ",13],["T_STRING","Magento",13],["T_NS_SEPARATOR","\\",13],["T_STRING","Sales",13],["T_NS_SEPARATOR","\\",13],["T_STRING","Model",13],["T_NS_SEPARATOR","\\",13],["T_STRING","AbstractModel",13],";",["T_WHITESPACE","\n\n",13],["T_DOC_COMMENT","\/**\n * Payment transaction model\n * Tracks transaction history, allows to build transactions hierarchy\n * By default transactions are saved as closed.\n *\n * @method \\Magento\\Sales\\Model\\ResourceModel\\Order\\Payment\\Transaction _getResource()\n * @method \\Magento\\Sales\\Model\\ResourceModel\\Order\\Payment\\Transaction getResource()\n\n * @author      Magento Core Team <core@magentocommerce.com>\n * @SuppressWarnings(PHPMD.ExcessiveClassComplexity)\n * @SuppressWarnings(PHPMD.CouplingBetweenObjects)\n *\/",15],["T_WHITESPACE","\n",26],["T_CLASS","class",27],["T_WHITESPACE"," ",27],["T_STRING","Transaction",27],["T_WHITESPACE"," ",27],["T_EXTENDS","extends",27],["T_WHITESPACE"," ",27],["T_STRING","AbstractModel",27],["T_WHITESPACE"," ",27],["T_IMPLEMENTS","implements",27],["T_WHITESPACE"," ",27],["T_STRING","TransactionInterface",27],["T_WHITESPACE","\n",27],"{",["T_WHITESPACE","\n    ",28],["T_DOC_COMMENT","\/**\n     * Raw details key in additional info\n     *\/",29],["T_WHITESPACE","\n    ",31],["T_CONST","const",32],["T_WHITESPACE"," ",32],["T_STRING","RAW_DETAILS",32],["T_WHITESPACE"," ",32],"=",["T_WHITESPACE"," ",32],["T_CONSTANT_ENCAPSED_STRING","'raw_details_info'",32],";",["T_WHITESPACE","\n\n    ",32],["T_DOC_COMMENT","\/**\n     * Order instance\n     *\n     * @var \\Magento\\Sales\\Model\\Order\\Payment\n     *\/",34],["T_WHITESPACE","\n    ",38],["T_PROTECTED","protected",39],["T_WHITESPACE"," ",39],["T_VARIABLE","$_order",39],["T_WHITESPACE"," ",39],"=",["T_WHITESPACE"," ",39],["T_STRING","null",39],";",["T_WHITESPACE","\n\n    ",39],["T_DOC_COMMENT","\/**\n     * Parent transaction instance\n     * @var \\Magento\\Sales\\Model\\Order\\Payment\\Transaction\n     *\/",41],["T_WHITESPACE","\n    ",44],["T_PROTECTED","protected",45],["T_WHITESPACE"," ",45],["T_VARIABLE","$_parentTransaction",45],["T_WHITESPACE"," ",45],"=",["T_WHITESPACE"," ",45],["T_STRING","null",45],";",["T_WHITESPACE","\n\n    ",45],["T_DOC_COMMENT","\/**\n     * Child transactions, assoc array of transaction_id => instance\n     *\n     * @var array\n     *\/",47],["T_WHITESPACE","\n    ",51],["T_PROTECTED","protected",52],["T_WHITESPACE"," ",52],["T_VARIABLE","$_children",52],["T_WHITESPACE"," ",52],"=",["T_WHITESPACE"," ",52],["T_STRING","null",52],";",["T_WHITESPACE","\n\n    ",52],["T_DOC_COMMENT","\/**\n     * Child transactions, assoc array of txn_id => instance\n     * Filled only in case when all child transactions have txn_id\n     * Used for quicker search of child transactions using isset() as opposite to foreaching $_children\n     *\n     * @var array\n     *\/",54],["T_WHITESPACE","\n    ",60],["T_PROTECTED","protected",61],["T_WHITESPACE"," ",61],["T_VARIABLE","$_identifiedChildren",61],["T_WHITESPACE"," ",61],"=",["T_WHITESPACE"," ",61],["T_STRING","null",61],";",["T_WHITESPACE","\n\n    ",61],["T_DOC_COMMENT","\/**\n     * Whether to perform automatic actions on transactions, such as auto-closing and putting as a parent\n     *\n     * @var bool\n     *\/",63],["T_WHITESPACE","\n    ",67],["T_PROTECTED","protected",68],["T_WHITESPACE"," ",68],["T_VARIABLE","$_transactionsAutoLinking",68],["T_WHITESPACE"," ",68],"=",["T_WHITESPACE"," ",68],["T_STRING","true",68],";",["T_WHITESPACE","\n\n    ",68],["T_DOC_COMMENT","\/**\n     * Whether to throw exceptions on different operations\n     *\n     * @var bool\n     *\/",70],["T_WHITESPACE","\n    ",74],["T_PROTECTED","protected",75],["T_WHITESPACE"," ",75],["T_VARIABLE","$_isFailsafe",75],["T_WHITESPACE"," ",75],"=",["T_WHITESPACE"," ",75],["T_STRING","false",75],";",["T_WHITESPACE","\n\n    ",75],["T_DOC_COMMENT","\/**\n     * Whether transaction has children\n     *\n     * @var bool\n     *\/",77],["T_WHITESPACE","\n    ",81],["T_PROTECTED","protected",82],["T_WHITESPACE"," ",82],["T_VARIABLE","$_hasChild",82],["T_WHITESPACE"," ",82],"=",["T_WHITESPACE"," ",82],["T_STRING","null",82],";",["T_WHITESPACE","\n\n    ",82],["T_DOC_COMMENT","\/**\n     * Event object prefix\n     *\n     * @var string\n     * @see \\Magento\\Framework\\Model\\AbstractModel::$_eventPrefix\n     *\/",84],["T_WHITESPACE","\n    ",89],["T_PROTECTED","protected",90],["T_WHITESPACE"," ",90],["T_VARIABLE","$_eventPrefix",90],["T_WHITESPACE"," ",90],"=",["T_WHITESPACE"," ",90],["T_CONSTANT_ENCAPSED_STRING","'sales_order_payment_transaction'",90],";",["T_WHITESPACE","\n\n    ",90],["T_DOC_COMMENT","\/**\n     * Event object prefix\n     *\n     * @var string\n     * @see \\Magento\\Framework\\Model\\AbstractModel::$_eventObject\n     *\/",92],["T_WHITESPACE","\n    ",97],["T_PROTECTED","protected",98],["T_WHITESPACE"," ",98],["T_VARIABLE","$_eventObject",98],["T_WHITESPACE"," ",98],"=",["T_WHITESPACE"," ",98],["T_CONSTANT_ENCAPSED_STRING","'order_payment_transaction'",98],";",["T_WHITESPACE","\n\n    ",98],["T_DOC_COMMENT","\/**\n     * Order website id\n     *\n     * @var int\n     *\/",100],["T_WHITESPACE","\n    ",104],["T_PROTECTED","protected",105],["T_WHITESPACE"," ",105],["T_VARIABLE","$_orderWebsiteId",105],["T_WHITESPACE"," ",105],"=",["T_WHITESPACE"," ",105],["T_STRING","null",105],";",["T_WHITESPACE","\n\n    ",105],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Sales\\Model\\OrderFactory\n     *\/",107],["T_WHITESPACE","\n    ",109],["T_PROTECTED","protected",110],["T_WHITESPACE"," ",110],["T_VARIABLE","$_orderFactory",110],";",["T_WHITESPACE","\n\n    ",110],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Framework\\Stdlib\\DateTime\\DateTimeFactory\n     *\/",112],["T_WHITESPACE","\n    ",114],["T_PROTECTED","protected",115],["T_WHITESPACE"," ",115],["T_VARIABLE","$_dateFactory",115],";",["T_WHITESPACE","\n\n    ",115],["T_DOC_COMMENT","\/**\n     * @var TransactionFactory\n     *\/",117],["T_WHITESPACE","\n    ",119],["T_PROTECTED","protected",120],["T_WHITESPACE"," ",120],["T_VARIABLE","$_transactionFactory",120],";",["T_WHITESPACE","\n\n    ",120],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Sales\\Api\\OrderPaymentRepositoryInterface\n     *\/",122],["T_WHITESPACE","\n    ",124],["T_PROTECTED","protected",125],["T_WHITESPACE"," ",125],["T_VARIABLE","$orderPaymentRepository",125],";",["T_WHITESPACE","\n\n    ",125],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Sales\\Api\\OrderRepositoryInterface\n     *\/",127],["T_WHITESPACE","\n    ",129],["T_PROTECTED","protected",130],["T_WHITESPACE"," ",130],["T_VARIABLE","$orderRepository",130],";",["T_WHITESPACE","\n\n    ",130],["T_DOC_COMMENT","\/**\n     * @param \\Magento\\Framework\\Model\\Context $context\n     * @param \\Magento\\Framework\\Registry $registry\n     * @param \\Magento\\Framework\\Api\\ExtensionAttributesFactory $extensionFactory\n     * @param AttributeValueFactory $customAttributeFactory\n     * @param \\Magento\\Sales\\Model\\OrderFactory $orderFactory\n     * @param \\Magento\\Framework\\Stdlib\\DateTime\\DateTimeFactory $dateFactory\n     * @param TransactionFactory $transactionFactory\n     * @param \\Magento\\Framework\\Model\\ResourceModel\\AbstractResource $resource\n     * @param \\Magento\\Framework\\Data\\Collection\\AbstractDb $resourceCollection\n     * @param array $data\n     * @SuppressWarnings(PHPMD.ExcessiveParameterList)\n     *\/",132],["T_WHITESPACE","\n    ",144],["T_PUBLIC","public",145],["T_WHITESPACE"," ",145],["T_FUNCTION","function",145],["T_WHITESPACE"," ",145],["T_STRING","__construct",145],"(",["T_WHITESPACE","\n        ",145],["T_NS_SEPARATOR","\\",146],["T_STRING","Magento",146],["T_NS_SEPARATOR","\\",146],["T_STRING","Framework",146],["T_NS_SEPARATOR","\\",146],["T_STRING","Model",146],["T_NS_SEPARATOR","\\",146],["T_STRING","Context",146],["T_WHITESPACE"," ",146],["T_VARIABLE","$context",146],",",["T_WHITESPACE","\n        ",146],["T_NS_SEPARATOR","\\",147],["T_STRING","Magento",147],["T_NS_SEPARATOR","\\",147],["T_STRING","Framework",147],["T_NS_SEPARATOR","\\",147],["T_STRING","Registry",147],["T_WHITESPACE"," ",147],["T_VARIABLE","$registry",147],",",["T_WHITESPACE","\n        ",147],["T_NS_SEPARATOR","\\",148],["T_STRING","Magento",148],["T_NS_SEPARATOR","\\",148],["T_STRING","Framework",148],["T_NS_SEPARATOR","\\",148],["T_STRING","Api",148],["T_NS_SEPARATOR","\\",148],["T_STRING","ExtensionAttributesFactory",148],["T_WHITESPACE"," ",148],["T_VARIABLE","$extensionFactory",148],",",["T_WHITESPACE","\n        ",148],["T_STRING","AttributeValueFactory",149],["T_WHITESPACE"," ",149],["T_VARIABLE","$customAttributeFactory",149],",",["T_WHITESPACE","\n        ",149],["T_NS_SEPARATOR","\\",150],["T_STRING","Magento",150],["T_NS_SEPARATOR","\\",150],["T_STRING","Sales",150],["T_NS_SEPARATOR","\\",150],["T_STRING","Model",150],["T_NS_SEPARATOR","\\",150],["T_STRING","OrderFactory",150],["T_WHITESPACE"," ",150],["T_VARIABLE","$orderFactory",150],",",["T_WHITESPACE","\n        ",150],["T_NS_SEPARATOR","\\",151],["T_STRING","Magento",151],["T_NS_SEPARATOR","\\",151],["T_STRING","Sales",151],["T_NS_SEPARATOR","\\",151],["T_STRING","Api",151],["T_NS_SEPARATOR","\\",151],["T_STRING","OrderPaymentRepositoryInterface",151],["T_WHITESPACE"," ",151],["T_VARIABLE","$orderPaymentRepository",151],",",["T_WHITESPACE","\n        ",151],["T_NS_SEPARATOR","\\",152],["T_STRING","Magento",152],["T_NS_SEPARATOR","\\",152],["T_STRING","Sales",152],["T_NS_SEPARATOR","\\",152],["T_STRING","Api",152],["T_NS_SEPARATOR","\\",152],["T_STRING","OrderRepositoryInterface",152],["T_WHITESPACE"," ",152],["T_VARIABLE","$orderRepository",152],",",["T_WHITESPACE","\n        ",152],["T_NS_SEPARATOR","\\",153],["T_STRING","Magento",153],["T_NS_SEPARATOR","\\",153],["T_STRING","Framework",153],["T_NS_SEPARATOR","\\",153],["T_STRING","Stdlib",153],["T_NS_SEPARATOR","\\",153],["T_STRING","DateTime",153],["T_NS_SEPARATOR","\\",153],["T_STRING","DateTimeFactory",153],["T_WHITESPACE"," ",153],["T_VARIABLE","$dateFactory",153],",",["T_WHITESPACE","\n        ",153],["T_STRING","TransactionFactory",154],["T_WHITESPACE"," ",154],["T_VARIABLE","$transactionFactory",154],",",["T_WHITESPACE","\n        ",154],["T_NS_SEPARATOR","\\",155],["T_STRING","Magento",155],["T_NS_SEPARATOR","\\",155],["T_STRING","Framework",155],["T_NS_SEPARATOR","\\",155],["T_STRING","Model",155],["T_NS_SEPARATOR","\\",155],["T_STRING","ResourceModel",155],["T_NS_SEPARATOR","\\",155],["T_STRING","AbstractResource",155],["T_WHITESPACE"," ",155],["T_VARIABLE","$resource",155],["T_WHITESPACE"," ",155],"=",["T_WHITESPACE"," ",155],["T_STRING","null",155],",",["T_WHITESPACE","\n        ",155],["T_NS_SEPARATOR","\\",156],["T_STRING","Magento",156],["T_NS_SEPARATOR","\\",156],["T_STRING","Framework",156],["T_NS_SEPARATOR","\\",156],["T_STRING","Data",156],["T_NS_SEPARATOR","\\",156],["T_STRING","Collection",156],["T_NS_SEPARATOR","\\",156],["T_STRING","AbstractDb",156],["T_WHITESPACE"," ",156],["T_VARIABLE","$resourceCollection",156],["T_WHITESPACE"," ",156],"=",["T_WHITESPACE"," ",156],["T_STRING","null",156],",",["T_WHITESPACE","\n        ",156],["T_ARRAY","array",157],["T_WHITESPACE"," ",157],["T_VARIABLE","$data",157],["T_WHITESPACE"," ",157],"=",["T_WHITESPACE"," ",157],"[","]",["T_WHITESPACE","\n    ",157],")",["T_WHITESPACE"," ",158],"{",["T_WHITESPACE","\n        ",158],["T_VARIABLE","$this",159],["T_OBJECT_OPERATOR","->",159],["T_STRING","_orderFactory",159],["T_WHITESPACE"," ",159],"=",["T_WHITESPACE"," ",159],["T_VARIABLE","$orderFactory",159],";",["T_WHITESPACE","\n        ",159],["T_VARIABLE","$this",160],["T_OBJECT_OPERATOR","->",160],["T_STRING","_dateFactory",160],["T_WHITESPACE"," ",160],"=",["T_WHITESPACE"," ",160],["T_VARIABLE","$dateFactory",160],";",["T_WHITESPACE","\n        ",160],["T_VARIABLE","$this",161],["T_OBJECT_OPERATOR","->",161],["T_STRING","_transactionFactory",161],["T_WHITESPACE"," ",161],"=",["T_WHITESPACE"," ",161],["T_VARIABLE","$transactionFactory",161],";",["T_WHITESPACE","\n        ",161],["T_VARIABLE","$this",162],["T_OBJECT_OPERATOR","->",162],["T_STRING","orderPaymentRepository",162],["T_WHITESPACE"," ",162],"=",["T_WHITESPACE"," ",162],["T_VARIABLE","$orderPaymentRepository",162],";",["T_WHITESPACE","\n        ",162],["T_VARIABLE","$this",163],["T_OBJECT_OPERATOR","->",163],["T_STRING","orderRepository",163],["T_WHITESPACE"," ",163],"=",["T_WHITESPACE"," ",163],["T_VARIABLE","$orderRepository",163],";",["T_WHITESPACE","\n        ",163],["T_STRING","parent",164],["T_DOUBLE_COLON","::",164],["T_STRING","__construct",164],"(",["T_WHITESPACE","\n            ",164],["T_VARIABLE","$context",165],",",["T_WHITESPACE","\n            ",165],["T_VARIABLE","$registry",166],",",["T_WHITESPACE","\n            ",166],["T_VARIABLE","$extensionFactory",167],",",["T_WHITESPACE","\n            ",167],["T_VARIABLE","$customAttributeFactory",168],",",["T_WHITESPACE","\n            ",168],["T_VARIABLE","$resource",169],",",["T_WHITESPACE","\n            ",169],["T_VARIABLE","$resourceCollection",170],",",["T_WHITESPACE","\n            ",170],["T_VARIABLE","$data",171],["T_WHITESPACE","\n        ",171],")",";",["T_WHITESPACE","\n    ",172],"}",["T_WHITESPACE","\n\n    ",173],["T_DOC_COMMENT","\/**\n     * Initialize resource model\n     *\n     * @return void\n     *\/",175],["T_WHITESPACE","\n    ",179],["T_PROTECTED","protected",180],["T_WHITESPACE"," ",180],["T_FUNCTION","function",180],["T_WHITESPACE"," ",180],["T_STRING","_construct",180],"(",")",["T_WHITESPACE","\n    ",180],"{",["T_WHITESPACE","\n        ",181],["T_VARIABLE","$this",182],["T_OBJECT_OPERATOR","->",182],["T_STRING","_init",182],"(",["T_NS_SEPARATOR","\\",182],["T_STRING","Magento",182],["T_NS_SEPARATOR","\\",182],["T_STRING","Sales",182],["T_NS_SEPARATOR","\\",182],["T_STRING","Model",182],["T_NS_SEPARATOR","\\",182],["T_STRING","ResourceModel",182],["T_NS_SEPARATOR","\\",182],["T_STRING","Order",182],["T_NS_SEPARATOR","\\",182],["T_STRING","Payment",182],["T_NS_SEPARATOR","\\",182],["T_STRING","Transaction",182],["T_DOUBLE_COLON","::",182],["T_CLASS","class",182],")",";",["T_WHITESPACE","\n        ",182],["T_STRING","parent",183],["T_DOUBLE_COLON","::",183],["T_STRING","_construct",183],"(",")",";",["T_WHITESPACE","\n    ",183],"}",["T_WHITESPACE","\n\n    ",184],["T_DOC_COMMENT","\/**\n     * Transaction ID setter\n     *\n     * @param string $txnId\n     * @return $this\n     *\/",186],["T_WHITESPACE","\n    ",191],["T_PUBLIC","public",192],["T_WHITESPACE"," ",192],["T_FUNCTION","function",192],["T_WHITESPACE"," ",192],["T_STRING","setTxnId",192],"(",["T_VARIABLE","$txnId",192],")",["T_WHITESPACE","\n    ",192],"{",["T_WHITESPACE","\n        ",193],["T_VARIABLE","$this",194],["T_OBJECT_OPERATOR","->",194],["T_STRING","_verifyTxnId",194],"(",["T_VARIABLE","$txnId",194],")",";",["T_WHITESPACE","\n        ",194],["T_RETURN","return",195],["T_WHITESPACE"," ",195],["T_VARIABLE","$this",195],["T_OBJECT_OPERATOR","->",195],["T_STRING","setData",195],"(",["T_CONSTANT_ENCAPSED_STRING","'txn_id'",195],",",["T_WHITESPACE"," ",195],["T_VARIABLE","$txnId",195],")",";",["T_WHITESPACE","\n    ",195],"}",["T_WHITESPACE","\n\n    ",196],["T_DOC_COMMENT","\/**\n     * Parent transaction ID setter\n     * Can set the transaction id as well\n     *\n     * @param string $parentTxnId\n     * @param string $txnId\n     * @return $this\n     * @throws \\Magento\\Framework\\Exception\\LocalizedException\n     *\/",198],["T_WHITESPACE","\n    ",206],["T_PUBLIC","public",207],["T_WHITESPACE"," ",207],["T_FUNCTION","function",207],["T_WHITESPACE"," ",207],["T_STRING","setParentTxnId",207],"(",["T_VARIABLE","$parentTxnId",207],",",["T_WHITESPACE"," ",207],["T_VARIABLE","$txnId",207],["T_WHITESPACE"," ",207],"=",["T_WHITESPACE"," ",207],["T_STRING","null",207],")",["T_WHITESPACE","\n    ",207],"{",["T_WHITESPACE","\n        ",208],["T_VARIABLE","$this",209],["T_OBJECT_OPERATOR","->",209],["T_STRING","_verifyTxnId",209],"(",["T_VARIABLE","$parentTxnId",209],")",";",["T_WHITESPACE","\n        ",209],["T_IF","if",210],["T_WHITESPACE"," ",210],"(",["T_EMPTY","empty",210],"(",["T_VARIABLE","$txnId",210],")",")",["T_WHITESPACE"," ",210],"{",["T_WHITESPACE","\n            ",210],["T_IF","if",211],["T_WHITESPACE"," ",211],"(",["T_CONSTANT_ENCAPSED_STRING","''",211],["T_WHITESPACE"," ",211],["T_IS_EQUAL","==",211],["T_WHITESPACE"," ",211],["T_VARIABLE","$this",211],["T_OBJECT_OPERATOR","->",211],["T_STRING","getTxnId",211],"(",")",")",["T_WHITESPACE"," ",211],"{",["T_WHITESPACE","\n                ",211],["T_THROW","throw",212],["T_WHITESPACE"," ",212],["T_NEW","new",212],["T_WHITESPACE"," ",212],["T_NS_SEPARATOR","\\",212],["T_STRING","Magento",212],["T_NS_SEPARATOR","\\",212],["T_STRING","Framework",212],["T_NS_SEPARATOR","\\",212],["T_STRING","Exception",212],["T_NS_SEPARATOR","\\",212],["T_STRING","LocalizedException",212],"(",["T_STRING","__",212],"(",["T_CONSTANT_ENCAPSED_STRING","'The parent transaction ID must have a transaction ID.'",212],")",")",";",["T_WHITESPACE","\n            ",212],"}",["T_WHITESPACE","\n        ",213],"}",["T_WHITESPACE"," ",214],["T_ELSE","else",214],["T_WHITESPACE"," ",214],"{",["T_WHITESPACE","\n            ",214],["T_VARIABLE","$this",215],["T_OBJECT_OPERATOR","->",215],["T_STRING","setTxnId",215],"(",["T_VARIABLE","$txnId",215],")",";",["T_WHITESPACE","\n        ",215],"}",["T_WHITESPACE","\n        ",216],["T_RETURN","return",217],["T_WHITESPACE"," ",217],["T_VARIABLE","$this",217],["T_OBJECT_OPERATOR","->",217],["T_STRING","setData",217],"(",["T_CONSTANT_ENCAPSED_STRING","'parent_txn_id'",217],",",["T_WHITESPACE"," ",217],["T_VARIABLE","$parentTxnId",217],")",";",["T_WHITESPACE","\n    ",217],"}",["T_WHITESPACE","\n\n    ",218],["T_DOC_COMMENT","\/**\n     * Transaction type setter\n     *\n     * @param string $txnType\n     * @return $this\n     *\/",220],["T_WHITESPACE","\n    ",225],["T_PUBLIC","public",226],["T_WHITESPACE"," ",226],["T_FUNCTION","function",226],["T_WHITESPACE"," ",226],["T_STRING","setTxnType",226],"(",["T_VARIABLE","$txnType",226],")",["T_WHITESPACE","\n    ",226],"{",["T_WHITESPACE","\n        ",227],["T_VARIABLE","$this",228],["T_OBJECT_OPERATOR","->",228],["T_STRING","_verifyTxnType",228],"(",["T_VARIABLE","$txnType",228],")",";",["T_WHITESPACE","\n        ",228],["T_RETURN","return",229],["T_WHITESPACE"," ",229],["T_VARIABLE","$this",229],["T_OBJECT_OPERATOR","->",229],["T_STRING","setData",229],"(",["T_CONSTANT_ENCAPSED_STRING","'txn_type'",229],",",["T_WHITESPACE"," ",229],["T_VARIABLE","$txnType",229],")",";",["T_WHITESPACE","\n    ",229],"}",["T_WHITESPACE","\n\n    ",230],["T_DOC_COMMENT","\/**\n     * Parent transaction getter\n     * May attempt to load it.\n     *\n     * @param bool $shouldLoad\n     * @return bool|\\Magento\\Sales\\Model\\Order\\Payment\\Transaction\n     *\/",232],["T_WHITESPACE","\n    ",238],["T_PUBLIC","public",239],["T_WHITESPACE"," ",239],["T_FUNCTION","function",239],["T_WHITESPACE"," ",239],["T_STRING","getParentTransaction",239],"(",["T_VARIABLE","$shouldLoad",239],["T_WHITESPACE"," ",239],"=",["T_WHITESPACE"," ",239],["T_STRING","true",239],")",["T_WHITESPACE","\n    ",239],"{",["T_WHITESPACE","\n        ",240],["T_IF","if",241],["T_WHITESPACE"," ",241],"(",["T_STRING","null",241],["T_WHITESPACE"," ",241],["T_IS_IDENTICAL","===",241],["T_WHITESPACE"," ",241],["T_VARIABLE","$this",241],["T_OBJECT_OPERATOR","->",241],["T_STRING","_parentTransaction",241],")",["T_WHITESPACE"," ",241],"{",["T_WHITESPACE","\n            ",241],["T_VARIABLE","$this",242],["T_OBJECT_OPERATOR","->",242],["T_STRING","_verifyThisTransactionExists",242],"(",")",";",["T_WHITESPACE","\n            ",242],["T_VARIABLE","$this",243],["T_OBJECT_OPERATOR","->",243],["T_STRING","_parentTransaction",243],["T_WHITESPACE"," ",243],"=",["T_WHITESPACE"," ",243],["T_STRING","false",243],";",["T_WHITESPACE","\n            ",243],["T_VARIABLE","$parentId",244],["T_WHITESPACE"," ",244],"=",["T_WHITESPACE"," ",244],["T_VARIABLE","$this",244],["T_OBJECT_OPERATOR","->",244],["T_STRING","getParentId",244],"(",")",";",["T_WHITESPACE","\n            ",244],["T_IF","if",245],["T_WHITESPACE"," ",245],"(",["T_VARIABLE","$parentId",245],")",["T_WHITESPACE"," ",245],"{",["T_WHITESPACE","\n                ",245],["T_VARIABLE","$this",246],["T_OBJECT_OPERATOR","->",246],["T_STRING","_parentTransaction",246],["T_WHITESPACE"," ",246],"=",["T_WHITESPACE"," ",246],["T_VARIABLE","$this",246],["T_OBJECT_OPERATOR","->",246],["T_STRING","_transactionFactory",246],["T_OBJECT_OPERATOR","->",246],["T_STRING","create",246],"(",")",";",["T_WHITESPACE","\n                ",246],["T_IF","if",247],["T_WHITESPACE"," ",247],"(",["T_VARIABLE","$shouldLoad",247],")",["T_WHITESPACE"," ",247],"{",["T_WHITESPACE","\n                    ",247],["T_VARIABLE","$this",248],["T_OBJECT_OPERATOR","->",248],["T_STRING","_parentTransaction",248],["T_WHITESPACE","\n                        ",248],["T_OBJECT_OPERATOR","->",249],["T_STRING","setOrderId",249],"(",["T_VARIABLE","$this",249],["T_OBJECT_OPERATOR","->",249],["T_STRING","getOrderId",249],"(",")",")",["T_WHITESPACE","\n                        ",249],["T_OBJECT_OPERATOR","->",250],["T_STRING","setPaymentId",250],"(",["T_VARIABLE","$this",250],["T_OBJECT_OPERATOR","->",250],["T_STRING","getPaymentId",250],"(",")",")",["T_WHITESPACE","\n                        ",250],["T_OBJECT_OPERATOR","->",251],["T_STRING","load",251],"(",["T_VARIABLE","$parentId",251],")",";",["T_WHITESPACE","\n                    ",251],["T_IF","if",252],["T_WHITESPACE"," ",252],"(","!",["T_VARIABLE","$this",252],["T_OBJECT_OPERATOR","->",252],["T_STRING","_parentTransaction",252],["T_OBJECT_OPERATOR","->",252],["T_STRING","getId",252],"(",")",")",["T_WHITESPACE"," ",252],"{",["T_WHITESPACE","\n                        ",252],["T_VARIABLE","$this",253],["T_OBJECT_OPERATOR","->",253],["T_STRING","_parentTransaction",253],["T_WHITESPACE"," ",253],"=",["T_WHITESPACE"," ",253],["T_STRING","false",253],";",["T_WHITESPACE","\n                    ",253],"}",["T_WHITESPACE"," ",254],["T_ELSE","else",254],["T_WHITESPACE"," ",254],"{",["T_WHITESPACE","\n                        ",254],["T_VARIABLE","$this",255],["T_OBJECT_OPERATOR","->",255],["T_STRING","_parentTransaction",255],["T_OBJECT_OPERATOR","->",255],["T_STRING","hasChildTransaction",255],"(",["T_STRING","true",255],")",";",["T_WHITESPACE","\n                    ",255],"}",["T_WHITESPACE","\n                ",256],"}",["T_WHITESPACE","\n            ",257],"}",["T_WHITESPACE","\n        ",258],"}",["T_WHITESPACE","\n        ",259],["T_RETURN","return",260],["T_WHITESPACE"," ",260],["T_VARIABLE","$this",260],["T_OBJECT_OPERATOR","->",260],["T_STRING","_parentTransaction",260],";",["T_WHITESPACE","\n    ",260],"}",["T_WHITESPACE","\n\n    ",261],["T_DOC_COMMENT","\/**\n     * Child transaction(s) getter\n     *\n     * Will attempt to load them first\n     * Can be filtered by types and\/or transaction_id\n     * Returns transaction object if transaction_id is specified, otherwise - array\n     * TODO: $recursive is not implemented\n     *\n     * @param array|string $types\n     * @param string $txnId\n     * @param bool $recursive\n     * @return Transaction[]\n     * @SuppressWarnings(PHPMD.CyclomaticComplexity)\n     * @SuppressWarnings(PHPMD.NPathComplexity)\n     * @SuppressWarnings(PHPMD.UnusedFormalParameter)\n     *\/",263],["T_WHITESPACE","\n    ",278],["T_PUBLIC","public",279],["T_WHITESPACE"," ",279],["T_FUNCTION","function",279],["T_WHITESPACE"," ",279],["T_STRING","getChildTransactions",279],"(",["T_VARIABLE","$types",279],["T_WHITESPACE"," ",279],"=",["T_WHITESPACE"," ",279],["T_STRING","null",279],",",["T_WHITESPACE"," ",279],["T_VARIABLE","$txnId",279],["T_WHITESPACE"," ",279],"=",["T_WHITESPACE"," ",279],["T_STRING","null",279],",",["T_WHITESPACE"," ",279],["T_VARIABLE","$recursive",279],["T_WHITESPACE"," ",279],"=",["T_WHITESPACE"," ",279],["T_STRING","false",279],")",["T_WHITESPACE","\n    ",279],"{",["T_WHITESPACE","\n        ",280],["T_VARIABLE","$this",281],["T_OBJECT_OPERATOR","->",281],["T_STRING","_loadChildren",281],"(",")",";",["T_WHITESPACE","\n\n        ",281],["T_COMMENT","\/\/ grab all transactions\n",283],["T_WHITESPACE","        ",284],["T_IF","if",284],["T_WHITESPACE"," ",284],"(",["T_EMPTY","empty",284],"(",["T_VARIABLE","$types",284],")",["T_WHITESPACE"," ",284],["T_BOOLEAN_AND","&&",284],["T_WHITESPACE"," ",284],["T_STRING","null",284],["T_WHITESPACE"," ",284],["T_IS_IDENTICAL","===",284],["T_WHITESPACE"," ",284],["T_VARIABLE","$txnId",284],")",["T_WHITESPACE"," ",284],"{",["T_WHITESPACE","\n            ",284],["T_RETURN","return",285],["T_WHITESPACE"," ",285],["T_VARIABLE","$this",285],["T_OBJECT_OPERATOR","->",285],["T_STRING","_children",285],";",["T_WHITESPACE","\n        ",285],"}",["T_WHITESPACE"," ",286],["T_ELSEIF","elseif",286],["T_WHITESPACE"," ",286],"(",["T_VARIABLE","$types",286],["T_WHITESPACE"," ",286],["T_BOOLEAN_AND","&&",286],["T_WHITESPACE"," ",286],"!",["T_STRING","is_array",286],"(",["T_VARIABLE","$types",286],")",")",["T_WHITESPACE"," ",286],"{",["T_WHITESPACE","\n            ",286],["T_VARIABLE","$types",287],["T_WHITESPACE"," ",287],"=",["T_WHITESPACE"," ",287],"[",["T_VARIABLE","$types",287],"]",";",["T_WHITESPACE","\n        ",287],"}",["T_WHITESPACE","\n\n        ",288],["T_COMMENT","\/\/ get a specific transaction\n",290],["T_WHITESPACE","        ",291],["T_IF","if",291],["T_WHITESPACE"," ",291],"(",["T_VARIABLE","$txnId",291],")",["T_WHITESPACE"," ",291],"{",["T_WHITESPACE","\n            ",291],["T_IF","if",292],["T_WHITESPACE"," ",292],"(",["T_EMPTY","empty",292],"(",["T_VARIABLE","$this",292],["T_OBJECT_OPERATOR","->",292],["T_STRING","_children",292],")",")",["T_WHITESPACE"," ",292],"{",["T_WHITESPACE","\n                ",292],["T_RETURN","return",293],["T_WHITESPACE"," ",293],["T_STRING","null",293],";",["T_WHITESPACE","\n            ",293],"}",["T_WHITESPACE","\n            ",294],["T_VARIABLE","$transaction",295],["T_WHITESPACE"," ",295],"=",["T_WHITESPACE"," ",295],["T_STRING","null",295],";",["T_WHITESPACE","\n            ",295],["T_IF","if",296],["T_WHITESPACE"," ",296],"(",["T_VARIABLE","$this",296],["T_OBJECT_OPERATOR","->",296],["T_STRING","_identifiedChildren",296],")",["T_WHITESPACE"," ",296],"{",["T_WHITESPACE","\n                ",296],["T_IF","if",297],["T_WHITESPACE"," ",297],"(",["T_ISSET","isset",297],"(",["T_VARIABLE","$this",297],["T_OBJECT_OPERATOR","->",297],["T_STRING","_identifiedChildren",297],"[",["T_VARIABLE","$txnId",297],"]",")",")",["T_WHITESPACE"," ",297],"{",["T_WHITESPACE","\n                    ",297],["T_VARIABLE","$transaction",298],["T_WHITESPACE"," ",298],"=",["T_WHITESPACE"," ",298],["T_VARIABLE","$this",298],["T_OBJECT_OPERATOR","->",298],["T_STRING","_identifiedChildren",298],"[",["T_VARIABLE","$txnId",298],"]",";",["T_WHITESPACE","\n                ",298],"}",["T_WHITESPACE","\n            ",299],"}",["T_WHITESPACE"," ",300],["T_ELSE","else",300],["T_WHITESPACE"," ",300],"{",["T_WHITESPACE","\n                ",300],["T_FOREACH","foreach",301],["T_WHITESPACE"," ",301],"(",["T_VARIABLE","$this",301],["T_OBJECT_OPERATOR","->",301],["T_STRING","_children",301],["T_WHITESPACE"," ",301],["T_AS","as",301],["T_WHITESPACE"," ",301],["T_VARIABLE","$child",301],")",["T_WHITESPACE"," ",301],"{",["T_WHITESPACE","\n                    ",301],["T_IF","if",302],["T_WHITESPACE"," ",302],"(",["T_VARIABLE","$child",302],["T_OBJECT_OPERATOR","->",302],["T_STRING","getTxnId",302],"(",")",["T_WHITESPACE"," ",302],["T_IS_IDENTICAL","===",302],["T_WHITESPACE"," ",302],["T_VARIABLE","$txnId",302],")",["T_WHITESPACE"," ",302],"{",["T_WHITESPACE","\n                        ",302],["T_VARIABLE","$transaction",303],["T_WHITESPACE"," ",303],"=",["T_WHITESPACE"," ",303],["T_VARIABLE","$child",303],";",["T_WHITESPACE","\n                        ",303],["T_BREAK","break",304],";",["T_WHITESPACE","\n                    ",304],"}",["T_WHITESPACE","\n                ",305],"}",["T_WHITESPACE","\n            ",306],"}",["T_WHITESPACE","\n            ",307],["T_COMMENT","\/\/ return transaction only if type matches\n",308],["T_WHITESPACE","            ",309],["T_IF","if",309],["T_WHITESPACE"," ",309],"(","!",["T_VARIABLE","$transaction",309],["T_WHITESPACE"," ",309],["T_BOOLEAN_OR","||",309],["T_WHITESPACE"," ",309],["T_VARIABLE","$types",309],["T_WHITESPACE"," ",309],["T_BOOLEAN_AND","&&",309],["T_WHITESPACE"," ",309],"!",["T_STRING","in_array",309],"(",["T_VARIABLE","$transaction",309],["T_OBJECT_OPERATOR","->",309],["T_STRING","getType",309],"(",")",",",["T_WHITESPACE"," ",309],["T_VARIABLE","$types",309],",",["T_WHITESPACE"," ",309],["T_STRING","true",309],")",")",["T_WHITESPACE"," ",309],"{",["T_WHITESPACE","\n                ",309],["T_RETURN","return",310],["T_WHITESPACE"," ",310],["T_STRING","null",310],";",["T_WHITESPACE","\n            ",310],"}",["T_WHITESPACE","\n            ",311],["T_RETURN","return",312],["T_WHITESPACE"," ",312],["T_VARIABLE","$transaction",312],";",["T_WHITESPACE","\n        ",312],"}",["T_WHITESPACE","\n\n        ",313],["T_COMMENT","\/\/ filter transactions by types\n",315],["T_WHITESPACE","        ",316],["T_VARIABLE","$result",316],["T_WHITESPACE"," ",316],"=",["T_WHITESPACE"," ",316],"[","]",";",["T_WHITESPACE","\n        ",316],["T_FOREACH","foreach",317],["T_WHITESPACE"," ",317],"(",["T_VARIABLE","$this",317],["T_OBJECT_OPERATOR","->",317],["T_STRING","_children",317],["T_WHITESPACE"," ",317],["T_AS","as",317],["T_WHITESPACE"," ",317],["T_VARIABLE","$child",317],")",["T_WHITESPACE"," ",317],"{",["T_WHITESPACE","\n            ",317],["T_IF","if",318],["T_WHITESPACE"," ",318],"(",["T_STRING","in_array",318],"(",["T_VARIABLE","$child",318],["T_OBJECT_OPERATOR","->",318],["T_STRING","getType",318],"(",")",",",["T_WHITESPACE"," ",318],["T_VARIABLE","$types",318],",",["T_WHITESPACE"," ",318],["T_STRING","true",318],")",")",["T_WHITESPACE"," ",318],"{",["T_WHITESPACE","\n                ",318],["T_VARIABLE","$result",319],"[",["T_VARIABLE","$child",319],["T_OBJECT_OPERATOR","->",319],["T_STRING","getId",319],"(",")","]",["T_WHITESPACE"," ",319],"=",["T_WHITESPACE"," ",319],["T_VARIABLE","$child",319],";",["T_WHITESPACE","\n            ",319],"}",["T_WHITESPACE","\n        ",320],"}",["T_WHITESPACE","\n        ",321],["T_RETURN","return",322],["T_WHITESPACE"," ",322],["T_VARIABLE","$result",322],";",["T_WHITESPACE","\n    ",322],"}",["T_WHITESPACE","\n\n    ",323],["T_DOC_COMMENT","\/**\n     * Close an authorization transaction\n     *\n     * This method can be invoked from any child transaction of the transaction to be closed\n     * Returns the authorization transaction on success. Otherwise false.\n     * $dryRun = true prevents actual closing, it just allows to check whether this operation is possible\n     *\n     * @param bool $shouldSave\n     * @param bool $dryRun\n     * @return bool|\\Magento\\Sales\\Model\\Order\\Payment\\Transaction\n     * @throws \\Exception\n     *\/",325],["T_WHITESPACE","\n    ",336],["T_PUBLIC","public",337],["T_WHITESPACE"," ",337],["T_FUNCTION","function",337],["T_WHITESPACE"," ",337],["T_STRING","closeAuthorization",337],"(",["T_VARIABLE","$shouldSave",337],["T_WHITESPACE"," ",337],"=",["T_WHITESPACE"," ",337],["T_STRING","true",337],",",["T_WHITESPACE"," ",337],["T_VARIABLE","$dryRun",337],["T_WHITESPACE"," ",337],"=",["T_WHITESPACE"," ",337],["T_STRING","false",337],")",["T_WHITESPACE","\n    ",337],"{",["T_WHITESPACE","\n        ",338],["T_TRY","try",339],["T_WHITESPACE"," ",339],"{",["T_WHITESPACE","\n            ",339],["T_VARIABLE","$this",340],["T_OBJECT_OPERATOR","->",340],["T_STRING","_verifyThisTransactionExists",340],"(",")",";",["T_WHITESPACE","\n        ",340],"}",["T_WHITESPACE"," ",341],["T_CATCH","catch",341],["T_WHITESPACE"," ",341],"(",["T_NS_SEPARATOR","\\",341],["T_STRING","Exception",341],["T_WHITESPACE"," ",341],["T_VARIABLE","$e",341],")",["T_WHITESPACE"," ",341],"{",["T_WHITESPACE","\n            ",341],["T_IF","if",342],["T_WHITESPACE"," ",342],"(",["T_VARIABLE","$dryRun",342],")",["T_WHITESPACE"," ",342],"{",["T_WHITESPACE","\n                ",342],["T_RETURN","return",343],["T_WHITESPACE"," ",343],["T_STRING","false",343],";",["T_WHITESPACE","\n            ",343],"}",["T_WHITESPACE","\n            ",344],["T_THROW","throw",345],["T_WHITESPACE"," ",345],["T_VARIABLE","$e",345],";",["T_WHITESPACE","\n        ",345],"}",["T_WHITESPACE","\n        ",346],["T_VARIABLE","$authTransaction",347],["T_WHITESPACE"," ",347],"=",["T_WHITESPACE"," ",347],["T_STRING","false",347],";",["T_WHITESPACE","\n        ",347],["T_SWITCH","switch",348],["T_WHITESPACE"," ",348],"(",["T_VARIABLE","$this",348],["T_OBJECT_OPERATOR","->",348],["T_STRING","getTxnType",348],"(",")",")",["T_WHITESPACE"," ",348],"{",["T_WHITESPACE","\n            ",348],["T_CASE","case",349],["T_WHITESPACE"," ",349],["T_STRING","self",349],["T_DOUBLE_COLON","::",349],["T_STRING","TYPE_VOID",349],":",["T_WHITESPACE","\n                ",349],["T_COMMENT","\/\/ break intentionally omitted\n",350],["T_WHITESPACE","            ",351],["T_CASE","case",351],["T_WHITESPACE"," ",351],["T_STRING","self",351],["T_DOUBLE_COLON","::",351],["T_STRING","TYPE_CAPTURE",351],":",["T_WHITESPACE","\n                ",351],["T_VARIABLE","$authTransaction",352],["T_WHITESPACE"," ",352],"=",["T_WHITESPACE"," ",352],["T_VARIABLE","$this",352],["T_OBJECT_OPERATOR","->",352],["T_STRING","getParentTransaction",352],"(",")",";",["T_WHITESPACE","\n                ",352],["T_BREAK","break",353],";",["T_WHITESPACE","\n            ",353],["T_CASE","case",354],["T_WHITESPACE"," ",354],["T_STRING","self",354],["T_DOUBLE_COLON","::",354],["T_STRING","TYPE_AUTH",354],":",["T_WHITESPACE","\n                ",354],["T_VARIABLE","$authTransaction",355],["T_WHITESPACE"," ",355],"=",["T_WHITESPACE"," ",355],["T_VARIABLE","$this",355],";",["T_WHITESPACE","\n                ",355],["T_BREAK","break",356],";",["T_WHITESPACE","\n                ",356],["T_COMMENT","\/\/ case self::TYPE_PAYMENT?\n",357],["T_WHITESPACE","            ",358],["T_DEFAULT","default",358],":",["T_WHITESPACE","\n                ",358],["T_BREAK","break",359],";",["T_WHITESPACE","\n        ",359],"}",["T_WHITESPACE","\n        ",360],["T_IF","if",361],["T_WHITESPACE"," ",361],"(",["T_VARIABLE","$authTransaction",361],")",["T_WHITESPACE"," ",361],"{",["T_WHITESPACE","\n            ",361],["T_IF","if",362],["T_WHITESPACE"," ",362],"(","!",["T_VARIABLE","$dryRun",362],")",["T_WHITESPACE"," ",362],"{",["T_WHITESPACE","\n                ",362],["T_VARIABLE","$authTransaction",363],["T_OBJECT_OPERATOR","->",363],["T_STRING","close",363],"(",["T_VARIABLE","$shouldSave",363],")",";",["T_WHITESPACE","\n            ",363],"}",["T_WHITESPACE","\n        ",364],"}",["T_WHITESPACE","\n        ",365],["T_RETURN","return",366],["T_WHITESPACE"," ",366],["T_VARIABLE","$authTransaction",366],";",["T_WHITESPACE","\n    ",366],"}",["T_WHITESPACE","\n\n    ",367],["T_DOC_COMMENT","\/**\n     * Close a capture transaction\n     * Logic is similar to closeAuthorization(), but for a capture transaction\n     *\n     * @param bool $shouldSave\n     * @return bool|\\Magento\\Sales\\Model\\Order\\Payment\\Transaction\n     * @see self::closeAuthorization()\n     *\/",369],["T_WHITESPACE","\n    ",376],["T_PUBLIC","public",377],["T_WHITESPACE"," ",377],["T_FUNCTION","function",377],["T_WHITESPACE"," ",377],["T_STRING","closeCapture",377],"(",["T_VARIABLE","$shouldSave",377],["T_WHITESPACE"," ",377],"=",["T_WHITESPACE"," ",377],["T_STRING","true",377],")",["T_WHITESPACE","\n    ",377],"{",["T_WHITESPACE","\n        ",378],["T_VARIABLE","$this",379],["T_OBJECT_OPERATOR","->",379],["T_STRING","_verifyThisTransactionExists",379],"(",")",";",["T_WHITESPACE","\n        ",379],["T_VARIABLE","$captureTransaction",380],["T_WHITESPACE"," ",380],"=",["T_WHITESPACE"," ",380],["T_STRING","false",380],";",["T_WHITESPACE","\n        ",380],["T_SWITCH","switch",381],["T_WHITESPACE"," ",381],"(",["T_VARIABLE","$this",381],["T_OBJECT_OPERATOR","->",381],["T_STRING","getTxnType",381],"(",")",")",["T_WHITESPACE"," ",381],"{",["T_WHITESPACE","\n            ",381],["T_CASE","case",382],["T_WHITESPACE"," ",382],["T_STRING","self",382],["T_DOUBLE_COLON","::",382],["T_STRING","TYPE_CAPTURE",382],":",["T_WHITESPACE","\n                ",382],["T_VARIABLE","$captureTransaction",383],["T_WHITESPACE"," ",383],"=",["T_WHITESPACE"," ",383],["T_VARIABLE","$this",383],";",["T_WHITESPACE","\n                ",383],["T_BREAK","break",384],";",["T_WHITESPACE","\n            ",384],["T_CASE","case",385],["T_WHITESPACE"," ",385],["T_STRING","self",385],["T_DOUBLE_COLON","::",385],["T_STRING","TYPE_REFUND",385],":",["T_WHITESPACE","\n                ",385],["T_VARIABLE","$captureTransaction",386],["T_WHITESPACE"," ",386],"=",["T_WHITESPACE"," ",386],["T_VARIABLE","$this",386],["T_OBJECT_OPERATOR","->",386],["T_STRING","getParentTransaction",386],"(",")",";",["T_WHITESPACE","\n                ",386],["T_BREAK","break",387],";",["T_WHITESPACE","\n            ",387],["T_DEFAULT","default",388],":",["T_WHITESPACE","\n                ",388],["T_BREAK","break",389],";",["T_WHITESPACE","\n        ",389],"}",["T_WHITESPACE","\n        ",390],["T_IF","if",391],["T_WHITESPACE"," ",391],"(",["T_VARIABLE","$captureTransaction",391],")",["T_WHITESPACE"," ",391],"{",["T_WHITESPACE","\n            ",391],["T_VARIABLE","$captureTransaction",392],["T_OBJECT_OPERATOR","->",392],["T_STRING","close",392],"(",["T_VARIABLE","$shouldSave",392],")",";",["T_WHITESPACE","\n        ",392],"}",["T_WHITESPACE","\n        ",393],["T_RETURN","return",394],["T_WHITESPACE"," ",394],["T_VARIABLE","$captureTransaction",394],";",["T_WHITESPACE","\n    ",394],"}",["T_WHITESPACE","\n\n    ",395],["T_DOC_COMMENT","\/**\n     * Check whether authorization in current hierarchy can be voided completely\n     * Basically checks whether the authorization exists and it is not affected by a capture or void\n     *\n     * @return bool\n     *\/",397],["T_WHITESPACE","\n    ",402],["T_PUBLIC","public",403],["T_WHITESPACE"," ",403],["T_FUNCTION","function",403],["T_WHITESPACE"," ",403],["T_STRING","canVoidAuthorizationCompletely",403],"(",")",["T_WHITESPACE","\n    ",403],"{",["T_WHITESPACE","\n        ",404],["T_TRY","try",405],["T_WHITESPACE"," ",405],"{",["T_WHITESPACE","\n            ",405],["T_VARIABLE","$authTransaction",406],["T_WHITESPACE"," ",406],"=",["T_WHITESPACE"," ",406],["T_VARIABLE","$this",406],["T_OBJECT_OPERATOR","->",406],["T_STRING","closeAuthorization",406],"(",["T_CONSTANT_ENCAPSED_STRING","''",406],",",["T_WHITESPACE"," ",406],["T_STRING","true",406],")",";",["T_WHITESPACE","\n            ",406],["T_IF","if",407],["T_WHITESPACE"," ",407],"(",["T_VARIABLE","$authTransaction",407],["T_OBJECT_OPERATOR","->",407],["T_STRING","hasChildTransaction",407],"(",")",["T_WHITESPACE"," ",407],["T_BOOLEAN_OR","||",407],["T_WHITESPACE"," ",407],["T_VARIABLE","$this",407],["T_OBJECT_OPERATOR","->",407],["T_STRING","_children",407],")",["T_WHITESPACE"," ",407],"{",["T_WHITESPACE","\n                ",407],["T_RETURN","return",408],["T_WHITESPACE"," ",408],["T_STRING","false",408],";",["T_WHITESPACE","\n            ",408],"}",["T_WHITESPACE","\n            ",409],["T_RETURN","return",410],["T_WHITESPACE"," ",410],["T_STRING","true",410],";",["T_WHITESPACE","\n        ",410],"}",["T_WHITESPACE"," ",411],["T_CATCH","catch",411],["T_WHITESPACE"," ",411],"(",["T_NS_SEPARATOR","\\",411],["T_STRING","Magento",411],["T_NS_SEPARATOR","\\",411],["T_STRING","Framework",411],["T_NS_SEPARATOR","\\",411],["T_STRING","Exception",411],["T_NS_SEPARATOR","\\",411],["T_STRING","LocalizedException",411],["T_WHITESPACE"," ",411],["T_VARIABLE","$e",411],")",["T_WHITESPACE"," ",411],"{",["T_WHITESPACE","\n            ",411],["T_COMMENT","\/\/ jam all logical exceptions, fallback to false\n",412],["T_WHITESPACE","        ",413],"}",["T_WHITESPACE","\n        ",413],["T_RETURN","return",414],["T_WHITESPACE"," ",414],["T_STRING","false",414],";",["T_WHITESPACE","\n    ",414],"}",["T_WHITESPACE","\n\n    ",415],["T_DOC_COMMENT","\/**\n     * Getter\/Setter of whether current transaction has a child transaction\n     *\n     * @param bool $whetherHasChild\n     * @return $this|bool\n     *\/",417],["T_WHITESPACE","\n    ",422],["T_PUBLIC","public",423],["T_WHITESPACE"," ",423],["T_FUNCTION","function",423],["T_WHITESPACE"," ",423],["T_STRING","hasChildTransaction",423],"(",["T_VARIABLE","$whetherHasChild",423],["T_WHITESPACE"," ",423],"=",["T_WHITESPACE"," ",423],["T_STRING","null",423],")",["T_WHITESPACE","\n    ",423],"{",["T_WHITESPACE","\n        ",424],["T_IF","if",425],["T_WHITESPACE"," ",425],"(",["T_STRING","null",425],["T_WHITESPACE"," ",425],["T_IS_NOT_IDENTICAL","!==",425],["T_WHITESPACE"," ",425],["T_VARIABLE","$whetherHasChild",425],")",["T_WHITESPACE"," ",425],"{",["T_WHITESPACE","\n            ",425],["T_VARIABLE","$this",426],["T_OBJECT_OPERATOR","->",426],["T_STRING","_hasChild",426],["T_WHITESPACE"," ",426],"=",["T_WHITESPACE"," ",426],["T_BOOL_CAST","(bool)",426],["T_VARIABLE","$whetherHasChild",426],";",["T_WHITESPACE","\n            ",426],["T_RETURN","return",427],["T_WHITESPACE"," ",427],["T_VARIABLE","$this",427],";",["T_WHITESPACE","\n        ",427],"}",["T_WHITESPACE"," ",428],["T_ELSEIF","elseif",428],["T_WHITESPACE"," ",428],"(",["T_STRING","null",428],["T_WHITESPACE"," ",428],["T_IS_IDENTICAL","===",428],["T_WHITESPACE"," ",428],["T_VARIABLE","$this",428],["T_OBJECT_OPERATOR","->",428],["T_STRING","_hasChild",428],")",["T_WHITESPACE"," ",428],"{",["T_WHITESPACE","\n            ",428],["T_IF","if",429],["T_WHITESPACE"," ",429],"(",["T_VARIABLE","$this",429],["T_OBJECT_OPERATOR","->",429],["T_STRING","getChildTransactions",429],"(",")",")",["T_WHITESPACE"," ",429],"{",["T_WHITESPACE","\n                ",429],["T_VARIABLE","$this",430],["T_OBJECT_OPERATOR","->",430],["T_STRING","_hasChild",430],["T_WHITESPACE"," ",430],"=",["T_WHITESPACE"," ",430],["T_STRING","true",430],";",["T_WHITESPACE","\n            ",430],"}",["T_WHITESPACE"," ",431],["T_ELSE","else",431],["T_WHITESPACE"," ",431],"{",["T_WHITESPACE","\n                ",431],["T_VARIABLE","$this",432],["T_OBJECT_OPERATOR","->",432],["T_STRING","_hasChild",432],["T_WHITESPACE"," ",432],"=",["T_WHITESPACE"," ",432],["T_STRING","false",432],";",["T_WHITESPACE","\n            ",432],"}",["T_WHITESPACE","\n        ",433],"}",["T_WHITESPACE","\n        ",434],["T_RETURN","return",435],["T_WHITESPACE"," ",435],["T_VARIABLE","$this",435],["T_OBJECT_OPERATOR","->",435],["T_STRING","_hasChild",435],";",["T_WHITESPACE","\n    ",435],"}",["T_WHITESPACE","\n\n    ",436],["T_DOC_COMMENT","\/**\n     * Additional information setter\n     * Updates data inside the 'additional_information' array\n     * Doesn't allow to set arrays\n     *\n     * @param string $key\n     * @param mixed $value\n     * @return $this\n     * @throws \\Magento\\Framework\\Exception\\LocalizedException\n     *\/",438],["T_WHITESPACE","\n    ",447],["T_PUBLIC","public",448],["T_WHITESPACE"," ",448],["T_FUNCTION","function",448],["T_WHITESPACE"," ",448],["T_STRING","setAdditionalInformation",448],"(",["T_VARIABLE","$key",448],",",["T_WHITESPACE"," ",448],["T_VARIABLE","$value",448],")",["T_WHITESPACE","\n    ",448],"{",["T_WHITESPACE","\n        ",449],["T_IF","if",450],["T_WHITESPACE"," ",450],"(",["T_STRING","is_object",450],"(",["T_VARIABLE","$value",450],")",")",["T_WHITESPACE"," ",450],"{",["T_WHITESPACE","\n            ",450],["T_THROW","throw",451],["T_WHITESPACE"," ",451],["T_NEW","new",451],["T_WHITESPACE"," ",451],["T_NS_SEPARATOR","\\",451],["T_STRING","Magento",451],["T_NS_SEPARATOR","\\",451],["T_STRING","Framework",451],["T_NS_SEPARATOR","\\",451],["T_STRING","Exception",451],["T_NS_SEPARATOR","\\",451],["T_STRING","LocalizedException",451],"(",["T_STRING","__",451],"(",["T_CONSTANT_ENCAPSED_STRING","'Payment transactions disallow storing objects.'",451],")",")",";",["T_WHITESPACE","\n        ",451],"}",["T_WHITESPACE","\n        ",452],["T_VARIABLE","$info",453],["T_WHITESPACE"," ",453],"=",["T_WHITESPACE"," ",453],["T_VARIABLE","$this",453],["T_OBJECT_OPERATOR","->",453],["T_STRING","_getData",453],"(",["T_CONSTANT_ENCAPSED_STRING","'additional_information'",453],")",";",["T_WHITESPACE","\n        ",453],["T_IF","if",454],["T_WHITESPACE"," ",454],"(","!",["T_VARIABLE","$info",454],")",["T_WHITESPACE"," ",454],"{",["T_WHITESPACE","\n            ",454],["T_VARIABLE","$info",455],["T_WHITESPACE"," ",455],"=",["T_WHITESPACE"," ",455],"[","]",";",["T_WHITESPACE","\n        ",455],"}",["T_WHITESPACE","\n        ",456],["T_VARIABLE","$info",457],"[",["T_VARIABLE","$key",457],"]",["T_WHITESPACE"," ",457],"=",["T_WHITESPACE"," ",457],["T_VARIABLE","$value",457],";",["T_WHITESPACE","\n        ",457],["T_RETURN","return",458],["T_WHITESPACE"," ",458],["T_VARIABLE","$this",458],["T_OBJECT_OPERATOR","->",458],["T_STRING","setData",458],"(",["T_CONSTANT_ENCAPSED_STRING","'additional_information'",458],",",["T_WHITESPACE"," ",458],["T_VARIABLE","$info",458],")",";",["T_WHITESPACE","\n    ",458],"}",["T_WHITESPACE","\n\n    ",459],["T_DOC_COMMENT","\/**\n     * Getter for entire additional_information value or one of its element by key\n     *\n     * @param string $key\n     * @return array|null|mixed\n     *\/",461],["T_WHITESPACE","\n    ",466],["T_PUBLIC","public",467],["T_WHITESPACE"," ",467],["T_FUNCTION","function",467],["T_WHITESPACE"," ",467],["T_STRING","getAdditionalInformation",467],"(",["T_VARIABLE","$key",467],["T_WHITESPACE"," ",467],"=",["T_WHITESPACE"," ",467],["T_STRING","null",467],")",["T_WHITESPACE","\n    ",467],"{",["T_WHITESPACE","\n        ",468],["T_VARIABLE","$info",469],["T_WHITESPACE"," ",469],"=",["T_WHITESPACE"," ",469],["T_VARIABLE","$this",469],["T_OBJECT_OPERATOR","->",469],["T_STRING","_getData",469],"(",["T_CONSTANT_ENCAPSED_STRING","'additional_information'",469],")",";",["T_WHITESPACE","\n        ",469],["T_IF","if",470],["T_WHITESPACE"," ",470],"(","!",["T_VARIABLE","$info",470],")",["T_WHITESPACE"," ",470],"{",["T_WHITESPACE","\n            ",470],["T_VARIABLE","$info",471],["T_WHITESPACE"," ",471],"=",["T_WHITESPACE"," ",471],"[","]",";",["T_WHITESPACE","\n        ",471],"}",["T_WHITESPACE","\n        ",472],["T_IF","if",473],["T_WHITESPACE"," ",473],"(",["T_VARIABLE","$key",473],")",["T_WHITESPACE"," ",473],"{",["T_WHITESPACE","\n            ",473],["T_RETURN","return",474],["T_WHITESPACE"," ",474],["T_ISSET","isset",474],"(",["T_VARIABLE","$info",474],"[",["T_VARIABLE","$key",474],"]",")",["T_WHITESPACE"," ",474],"?",["T_WHITESPACE"," ",474],["T_VARIABLE","$info",474],"[",["T_VARIABLE","$key",474],"]",["T_WHITESPACE"," ",474],":",["T_WHITESPACE"," ",474],["T_STRING","null",474],";",["T_WHITESPACE","\n        ",474],"}",["T_WHITESPACE","\n        ",475],["T_RETURN","return",476],["T_WHITESPACE"," ",476],["T_VARIABLE","$info",476],";",["T_WHITESPACE","\n    ",476],"}",["T_WHITESPACE","\n\n    ",477],["T_DOC_COMMENT","\/**\n     * Unsetter for entire additional_information value or one of its element by key\n     *\n     * @param string $key\n     * @return $this\n     *\/",479],["T_WHITESPACE","\n    ",484],["T_PUBLIC","public",485],["T_WHITESPACE"," ",485],["T_FUNCTION","function",485],["T_WHITESPACE"," ",485],["T_STRING","unsAdditionalInformation",485],"(",["T_VARIABLE","$key",485],["T_WHITESPACE"," ",485],"=",["T_WHITESPACE"," ",485],["T_STRING","null",485],")",["T_WHITESPACE","\n    ",485],"{",["T_WHITESPACE","\n        ",486],["T_IF","if",487],["T_WHITESPACE"," ",487],"(",["T_VARIABLE","$key",487],")",["T_WHITESPACE"," ",487],"{",["T_WHITESPACE","\n            ",487],["T_VARIABLE","$info",488],["T_WHITESPACE"," ",488],"=",["T_WHITESPACE"," ",488],["T_VARIABLE","$this",488],["T_OBJECT_OPERATOR","->",488],["T_STRING","_getData",488],"(",["T_CONSTANT_ENCAPSED_STRING","'additional_information'",488],")",";",["T_WHITESPACE","\n            ",488],["T_IF","if",489],["T_WHITESPACE"," ",489],"(",["T_STRING","is_array",489],"(",["T_VARIABLE","$info",489],")",")",["T_WHITESPACE"," ",489],"{",["T_WHITESPACE","\n                ",489],["T_UNSET","unset",490],"(",["T_VARIABLE","$info",490],"[",["T_VARIABLE","$key",490],"]",")",";",["T_WHITESPACE","\n            ",490],"}",["T_WHITESPACE","\n        ",491],"}",["T_WHITESPACE"," ",492],["T_ELSE","else",492],["T_WHITESPACE"," ",492],"{",["T_WHITESPACE","\n            ",492],["T_VARIABLE","$info",493],["T_WHITESPACE"," ",493],"=",["T_WHITESPACE"," ",493],"[","]",";",["T_WHITESPACE","\n        ",493],"}",["T_WHITESPACE","\n        ",494],["T_RETURN","return",495],["T_WHITESPACE"," ",495],["T_VARIABLE","$this",495],["T_OBJECT_OPERATOR","->",495],["T_STRING","setData",495],"(",["T_CONSTANT_ENCAPSED_STRING","'additional_information'",495],",",["T_WHITESPACE"," ",495],["T_VARIABLE","$info",495],")",";",["T_WHITESPACE","\n    ",495],"}",["T_WHITESPACE","\n\n    ",496],["T_DOC_COMMENT","\/**\n     * Close this transaction\n     *\n     * @param bool $shouldSave\n     * @return $this\n     * @throws \\Magento\\Framework\\Exception\\LocalizedException\n     * @throws \\Exception\n     * @SuppressWarnings(PHPMD.CyclomaticComplexity)\n     *\/",498],["T_WHITESPACE","\n    ",506],["T_PUBLIC","public",507],["T_WHITESPACE"," ",507],["T_FUNCTION","function",507],["T_WHITESPACE"," ",507],["T_STRING","close",507],"(",["T_VARIABLE","$shouldSave",507],["T_WHITESPACE"," ",507],"=",["T_WHITESPACE"," ",507],["T_STRING","true",507],")",["T_WHITESPACE","\n    ",507],"{",["T_WHITESPACE","\n        ",508],["T_IF","if",509],["T_WHITESPACE"," ",509],"(","!",["T_VARIABLE","$this",509],["T_OBJECT_OPERATOR","->",509],["T_STRING","_isFailsafe",509],")",["T_WHITESPACE"," ",509],"{",["T_WHITESPACE","\n            ",509],["T_VARIABLE","$this",510],["T_OBJECT_OPERATOR","->",510],["T_STRING","_verifyThisTransactionExists",510],"(",")",";",["T_WHITESPACE","\n        ",510],"}",["T_WHITESPACE","\n        ",511],["T_IF","if",512],["T_WHITESPACE"," ",512],"(",["T_LNUMBER","1",512],["T_WHITESPACE"," ",512],["T_IS_EQUAL","==",512],["T_WHITESPACE"," ",512],["T_VARIABLE","$this",512],["T_OBJECT_OPERATOR","->",512],["T_STRING","getIsClosed",512],"(",")",["T_WHITESPACE"," ",512],["T_BOOLEAN_AND","&&",512],["T_WHITESPACE"," ",512],["T_VARIABLE","$this",512],["T_OBJECT_OPERATOR","->",512],["T_STRING","_isFailsafe",512],")",["T_WHITESPACE"," ",512],"{",["T_WHITESPACE","\n            ",512],["T_THROW","throw",513],["T_WHITESPACE"," ",513],["T_NEW","new",513],["T_WHITESPACE"," ",513],["T_NS_SEPARATOR","\\",513],["T_STRING","Magento",513],["T_NS_SEPARATOR","\\",513],["T_STRING","Framework",513],["T_NS_SEPARATOR","\\",513],["T_STRING","Exception",513],["T_NS_SEPARATOR","\\",513],["T_STRING","LocalizedException",513],"(",["T_WHITESPACE","\n                ",513],["T_STRING","__",514],"(",["T_CONSTANT_ENCAPSED_STRING","'The transaction \"%1\" (%2) is already closed.'",514],",",["T_WHITESPACE"," ",514],["T_VARIABLE","$this",514],["T_OBJECT_OPERATOR","->",514],["T_STRING","getTxnId",514],"(",")",",",["T_WHITESPACE"," ",514],["T_VARIABLE","$this",514],["T_OBJECT_OPERATOR","->",514],["T_STRING","getTxnType",514],"(",")",")",["T_WHITESPACE","\n            ",514],")",";",["T_WHITESPACE","\n        ",515],"}",["T_WHITESPACE","\n        ",516],["T_VARIABLE","$this",517],["T_OBJECT_OPERATOR","->",517],["T_STRING","setIsClosed",517],"(",["T_LNUMBER","1",517],")",";",["T_WHITESPACE","\n        ",517],["T_IF","if",518],["T_WHITESPACE"," ",518],"(",["T_VARIABLE","$shouldSave",518],")",["T_WHITESPACE"," ",518],"{",["T_WHITESPACE","\n            ",518],["T_VARIABLE","$this",519],["T_OBJECT_OPERATOR","->",519],["T_STRING","save",519],"(",")",";",["T_WHITESPACE","\n        ",519],"}",["T_WHITESPACE","\n        ",520],["T_IF","if",521],["T_WHITESPACE"," ",521],"(",["T_VARIABLE","$this",521],["T_OBJECT_OPERATOR","->",521],["T_STRING","_transactionsAutoLinking",521],["T_WHITESPACE"," ",521],["T_BOOLEAN_AND","&&",521],["T_WHITESPACE"," ",521],["T_STRING","self",521],["T_DOUBLE_COLON","::",521],["T_STRING","TYPE_AUTH",521],["T_WHITESPACE"," ",521],["T_IS_IDENTICAL","===",521],["T_WHITESPACE"," ",521],["T_VARIABLE","$this",521],["T_OBJECT_OPERATOR","->",521],["T_STRING","getTxnType",521],"(",")",")",["T_WHITESPACE"," ",521],"{",["T_WHITESPACE","\n            ",521],["T_TRY","try",522],["T_WHITESPACE"," ",522],"{",["T_WHITESPACE","\n                ",522],["T_VARIABLE","$paymentTransaction",523],["T_WHITESPACE"," ",523],"=",["T_WHITESPACE"," ",523],["T_VARIABLE","$this",523],["T_OBJECT_OPERATOR","->",523],["T_STRING","getParentTransaction",523],"(",")",";",["T_WHITESPACE","\n                ",523],["T_IF","if",524],["T_WHITESPACE"," ",524],"(",["T_VARIABLE","$paymentTransaction",524],")",["T_WHITESPACE"," ",524],"{",["T_WHITESPACE","\n                    ",524],["T_VARIABLE","$paymentTransaction",525],["T_OBJECT_OPERATOR","->",525],["T_STRING","close",525],"(",["T_VARIABLE","$shouldSave",525],")",";",["T_WHITESPACE","\n                ",525],"}",["T_WHITESPACE","\n            ",526],"}",["T_WHITESPACE"," ",527],["T_CATCH","catch",527],["T_WHITESPACE"," ",527],"(",["T_NS_SEPARATOR","\\",527],["T_STRING","Exception",527],["T_WHITESPACE"," ",527],["T_VARIABLE","$e",527],")",["T_WHITESPACE"," ",527],"{",["T_WHITESPACE","\n                ",527],["T_IF","if",528],["T_WHITESPACE"," ",528],"(","!",["T_VARIABLE","$this",528],["T_OBJECT_OPERATOR","->",528],["T_STRING","_isFailsafe",528],")",["T_WHITESPACE"," ",528],"{",["T_WHITESPACE","\n                    ",528],["T_THROW","throw",529],["T_WHITESPACE"," ",529],["T_VARIABLE","$e",529],";",["T_WHITESPACE","\n                ",529],"}",["T_WHITESPACE","\n            ",530],"}",["T_WHITESPACE","\n        ",531],"}",["T_WHITESPACE","\n        ",532],["T_RETURN","return",533],["T_WHITESPACE"," ",533],["T_VARIABLE","$this",533],";",["T_WHITESPACE","\n    ",533],"}",["T_WHITESPACE","\n\n    ",534],["T_DOC_COMMENT","\/**\n     * Order ID getter\n     * Attempts to get ID from set order payment object, if any, or from data by key 'order_id'\n     *\n     * @return int|null\n     *\/",536],["T_WHITESPACE","\n    ",541],["T_PUBLIC","public",542],["T_WHITESPACE"," ",542],["T_FUNCTION","function",542],["T_WHITESPACE"," ",542],["T_STRING","getOrderId",542],"(",")",["T_WHITESPACE","\n    ",542],"{",["T_WHITESPACE","\n        ",543],["T_VARIABLE","$orderId",544],["T_WHITESPACE"," ",544],"=",["T_WHITESPACE"," ",544],["T_VARIABLE","$this",544],["T_OBJECT_OPERATOR","->",544],["T_STRING","_getData",544],"(",["T_CONSTANT_ENCAPSED_STRING","'order_id'",544],")",";",["T_WHITESPACE","\n        ",544],["T_IF","if",545],["T_WHITESPACE"," ",545],"(",["T_VARIABLE","$orderId",545],")",["T_WHITESPACE"," ",545],"{",["T_WHITESPACE","\n            ",545],["T_RETURN","return",546],["T_WHITESPACE"," ",546],["T_VARIABLE","$orderId",546],";",["T_WHITESPACE","\n        ",546],"}",["T_WHITESPACE","\n        ",547],["T_IF","if",548],["T_WHITESPACE"," ",548],"(",["T_VARIABLE","$this",548],["T_OBJECT_OPERATOR","->",548],["T_STRING","getPaymentId",548],"(",")",")",["T_WHITESPACE"," ",548],"{",["T_WHITESPACE","\n            ",548],["T_VARIABLE","$payment",549],["T_WHITESPACE"," ",549],"=",["T_WHITESPACE"," ",549],["T_VARIABLE","$this",549],["T_OBJECT_OPERATOR","->",549],["T_STRING","orderPaymentRepository",549],["T_OBJECT_OPERATOR","->",549],["T_STRING","get",549],"(",["T_VARIABLE","$this",549],["T_OBJECT_OPERATOR","->",549],["T_STRING","getPaymentId",549],"(",")",")",";",["T_WHITESPACE","\n            ",549],["T_IF","if",550],["T_WHITESPACE"," ",550],"(",["T_VARIABLE","$payment",550],")",["T_WHITESPACE"," ",550],"{",["T_WHITESPACE","\n                ",550],["T_VARIABLE","$orderId",551],["T_WHITESPACE"," ",551],"=",["T_WHITESPACE"," ",551],["T_VARIABLE","$payment",551],["T_OBJECT_OPERATOR","->",551],["T_STRING","getParentId",551],"(",")",";",["T_WHITESPACE","\n            ",551],"}",["T_WHITESPACE","\n        ",552],"}",["T_WHITESPACE","\n\n        ",553],["T_RETURN","return",555],["T_WHITESPACE"," ",555],["T_VARIABLE","$orderId",555],";",["T_WHITESPACE","\n    ",555],"}",["T_WHITESPACE","\n\n    ",556],["T_DOC_COMMENT","\/**\n     * Retrieve order instance\n     *\n     * @return \\Magento\\Sales\\Model\\Order\n     *\/",558],["T_WHITESPACE","\n    ",562],["T_PUBLIC","public",563],["T_WHITESPACE"," ",563],["T_FUNCTION","function",563],["T_WHITESPACE"," ",563],["T_STRING","getOrder",563],"(",")",["T_WHITESPACE","\n    ",563],"{",["T_WHITESPACE","\n        ",564],["T_IF","if",565],["T_WHITESPACE"," ",565],"(",["T_VARIABLE","$this",565],["T_OBJECT_OPERATOR","->",565],["T_STRING","_order",565],["T_WHITESPACE"," ",565],["T_IS_IDENTICAL","===",565],["T_WHITESPACE"," ",565],["T_STRING","null",565],")",["T_WHITESPACE"," ",565],"{",["T_WHITESPACE","\n            ",565],["T_VARIABLE","$this",566],["T_OBJECT_OPERATOR","->",566],["T_STRING","setOrder",566],"(",")",";",["T_WHITESPACE","\n        ",566],"}",["T_WHITESPACE","\n\n        ",567],["T_RETURN","return",569],["T_WHITESPACE"," ",569],["T_VARIABLE","$this",569],["T_OBJECT_OPERATOR","->",569],["T_STRING","_order",569],";",["T_WHITESPACE","\n    ",569],"}",["T_WHITESPACE","\n\n    ",570],["T_DOC_COMMENT","\/**\n     * Set order instance for transaction depends on transaction behavior\n     * If $order equals to true, method isn't loading new order instance.\n     *\n     * @param \\Magento\\Sales\\Model\\Order|null|boolean $order\n     * @return $this\n     * @throws \\Magento\\Framework\\Exception\\LocalizedException\n     *\/",572],["T_WHITESPACE","\n    ",579],["T_PUBLIC","public",580],["T_WHITESPACE"," ",580],["T_FUNCTION","function",580],["T_WHITESPACE"," ",580],["T_STRING","setOrder",580],"(",["T_VARIABLE","$order",580],["T_WHITESPACE"," ",580],"=",["T_WHITESPACE"," ",580],["T_STRING","null",580],")",["T_WHITESPACE","\n    ",580],"{",["T_WHITESPACE","\n        ",581],["T_IF","if",582],["T_WHITESPACE"," ",582],"(",["T_STRING","null",582],["T_WHITESPACE"," ",582],["T_IS_IDENTICAL","===",582],["T_WHITESPACE"," ",582],["T_VARIABLE","$order",582],["T_WHITESPACE"," ",582],["T_BOOLEAN_OR","||",582],["T_WHITESPACE"," ",582],["T_VARIABLE","$order",582],["T_WHITESPACE"," ",582],["T_IS_IDENTICAL","===",582],["T_WHITESPACE"," ",582],["T_STRING","true",582],")",["T_WHITESPACE"," ",582],"{",["T_WHITESPACE","\n            ",582],["T_IF","if",583],["T_WHITESPACE"," ",583],"(",["T_VARIABLE","$this",583],["T_OBJECT_OPERATOR","->",583],["T_STRING","getOrderId",583],"(",")",")",["T_WHITESPACE"," ",583],"{",["T_WHITESPACE","\n                ",583],["T_VARIABLE","$this",584],["T_OBJECT_OPERATOR","->",584],["T_STRING","_order",584],["T_WHITESPACE"," ",584],"=",["T_WHITESPACE"," ",584],["T_VARIABLE","$this",584],["T_OBJECT_OPERATOR","->",584],["T_STRING","orderRepository",584],["T_OBJECT_OPERATOR","->",584],["T_STRING","get",584],"(",["T_VARIABLE","$this",584],["T_OBJECT_OPERATOR","->",584],["T_STRING","getOrderId",584],"(",")",")",";",["T_WHITESPACE","\n            ",584],"}",["T_WHITESPACE"," ",585],["T_ELSE","else",585],["T_WHITESPACE"," ",585],"{",["T_WHITESPACE","\n                ",585],["T_VARIABLE","$this",586],["T_OBJECT_OPERATOR","->",586],["T_STRING","_order",586],["T_WHITESPACE"," ",586],"=",["T_WHITESPACE"," ",586],["T_STRING","false",586],";",["T_WHITESPACE","\n            ",586],"}",["T_WHITESPACE","\n        ",587],"}",["T_WHITESPACE"," ",588],["T_ELSEIF","elseif",588],["T_WHITESPACE"," ",588],"(","!",["T_VARIABLE","$this",588],["T_OBJECT_OPERATOR","->",588],["T_STRING","getId",588],"(",")",["T_WHITESPACE"," ",588],["T_BOOLEAN_OR","||",588],["T_WHITESPACE"," ",588],["T_VARIABLE","$this",588],["T_OBJECT_OPERATOR","->",588],["T_STRING","getOrderId",588],"(",")",["T_WHITESPACE"," ",588],["T_IS_EQUAL","==",588],["T_WHITESPACE"," ",588],["T_VARIABLE","$order",588],["T_OBJECT_OPERATOR","->",588],["T_STRING","getId",588],"(",")",")",["T_WHITESPACE"," ",588],"{",["T_WHITESPACE","\n            ",588],["T_VARIABLE","$this",589],["T_OBJECT_OPERATOR","->",589],["T_STRING","_order",589],["T_WHITESPACE"," ",589],"=",["T_WHITESPACE"," ",589],["T_VARIABLE","$order",589],";",["T_WHITESPACE","\n        ",589],"}",["T_WHITESPACE"," ",590],["T_ELSE","else",590],["T_WHITESPACE"," ",590],"{",["T_WHITESPACE","\n            ",590],["T_THROW","throw",591],["T_WHITESPACE"," ",591],["T_NEW","new",591],["T_WHITESPACE"," ",591],["T_NS_SEPARATOR","\\",591],["T_STRING","Magento",591],["T_NS_SEPARATOR","\\",591],["T_STRING","Framework",591],["T_NS_SEPARATOR","\\",591],["T_STRING","Exception",591],["T_NS_SEPARATOR","\\",591],["T_STRING","LocalizedException",591],"(",["T_STRING","__",591],"(",["T_CONSTANT_ENCAPSED_STRING","'Set order for existing transactions not allowed'",591],")",")",";",["T_WHITESPACE","\n        ",591],"}",["T_WHITESPACE","\n\n        ",592],["T_RETURN","return",594],["T_WHITESPACE"," ",594],["T_VARIABLE","$this",594],";",["T_WHITESPACE","\n    ",594],"}",["T_WHITESPACE","\n\n    ",595],["T_DOC_COMMENT","\/**\n     * Setter\/Getter whether transaction is supposed to prevent exceptions on saving\n     *\n     * @param bool|null $setFailsafe\n     * @return $this|bool\n     *\/",597],["T_WHITESPACE","\n    ",602],["T_PUBLIC","public",603],["T_WHITESPACE"," ",603],["T_FUNCTION","function",603],["T_WHITESPACE"," ",603],["T_STRING","isFailsafe",603],"(",["T_VARIABLE","$setFailsafe",603],["T_WHITESPACE"," ",603],"=",["T_WHITESPACE"," ",603],["T_STRING","null",603],")",["T_WHITESPACE","\n    ",603],"{",["T_WHITESPACE","\n        ",604],["T_IF","if",605],["T_WHITESPACE"," ",605],"(",["T_STRING","null",605],["T_WHITESPACE"," ",605],["T_IS_IDENTICAL","===",605],["T_WHITESPACE"," ",605],["T_VARIABLE","$setFailsafe",605],")",["T_WHITESPACE"," ",605],"{",["T_WHITESPACE","\n            ",605],["T_RETURN","return",606],["T_WHITESPACE"," ",606],["T_VARIABLE","$this",606],["T_OBJECT_OPERATOR","->",606],["T_STRING","_isFailsafe",606],";",["T_WHITESPACE","\n        ",606],"}",["T_WHITESPACE","\n        ",607],["T_VARIABLE","$this",608],["T_OBJECT_OPERATOR","->",608],["T_STRING","_isFailsafe",608],["T_WHITESPACE"," ",608],"=",["T_WHITESPACE"," ",608],["T_BOOL_CAST","(bool)",608],["T_VARIABLE","$setFailsafe",608],";",["T_WHITESPACE","\n        ",608],["T_RETURN","return",609],["T_WHITESPACE"," ",609],["T_VARIABLE","$this",609],";",["T_WHITESPACE","\n    ",609],"}",["T_WHITESPACE","\n\n    ",610],["T_DOC_COMMENT","\/**\n     * Verify data required for saving\n     *\n     * @return $this\n     *\/",612],["T_WHITESPACE","\n    ",616],["T_PUBLIC","public",617],["T_WHITESPACE"," ",617],["T_FUNCTION","function",617],["T_WHITESPACE"," ",617],["T_STRING","beforeSave",617],"(",")",["T_WHITESPACE","\n    ",617],"{",["T_WHITESPACE","\n        ",618],["T_IF","if",619],["T_WHITESPACE"," ",619],"(","!",["T_VARIABLE","$this",619],["T_OBJECT_OPERATOR","->",619],["T_STRING","getOrderId",619],"(",")",["T_WHITESPACE"," ",619],["T_BOOLEAN_AND","&&",619],["T_WHITESPACE"," ",619],["T_VARIABLE","$this",619],["T_OBJECT_OPERATOR","->",619],["T_STRING","getOrder",619],"(",")",")",["T_WHITESPACE"," ",619],"{",["T_WHITESPACE","\n            ",619],["T_VARIABLE","$this",620],["T_OBJECT_OPERATOR","->",620],["T_STRING","setOrderId",620],"(",["T_VARIABLE","$this",620],["T_OBJECT_OPERATOR","->",620],["T_STRING","getOrder",620],"(",")",["T_OBJECT_OPERATOR","->",620],["T_STRING","getId",620],"(",")",")",";",["T_WHITESPACE","\n        ",620],"}",["T_WHITESPACE","\n        ",621],["T_IF","if",622],["T_WHITESPACE"," ",622],"(","!",["T_VARIABLE","$this",622],["T_OBJECT_OPERATOR","->",622],["T_STRING","getPaymentId",622],"(",")",["T_WHITESPACE"," ",622],["T_BOOLEAN_AND","&&",622],["T_WHITESPACE"," ",622],["T_VARIABLE","$this",622],["T_OBJECT_OPERATOR","->",622],["T_STRING","getOrder",622],"(",")",["T_WHITESPACE"," ",622],["T_BOOLEAN_AND","&&",622],["T_WHITESPACE"," ",622],["T_VARIABLE","$this",622],["T_OBJECT_OPERATOR","->",622],["T_STRING","getOrder",622],"(",")",["T_OBJECT_OPERATOR","->",622],["T_STRING","getPayment",622],"(",")",")",["T_WHITESPACE"," ",622],"{",["T_WHITESPACE","\n            ",622],["T_VARIABLE","$this",623],["T_OBJECT_OPERATOR","->",623],["T_STRING","setPaymentId",623],"(",["T_VARIABLE","$this",623],["T_OBJECT_OPERATOR","->",623],["T_STRING","getOrder",623],"(",")",["T_OBJECT_OPERATOR","->",623],["T_STRING","getPayment",623],"(",")",["T_OBJECT_OPERATOR","->",623],["T_STRING","getId",623],"(",")",")",";",["T_WHITESPACE","\n        ",623],"}",["T_WHITESPACE","\n        ",624],["T_COMMENT","\/\/ set parent id\n",625],["T_WHITESPACE","        ",626],["T_VARIABLE","$this",626],["T_OBJECT_OPERATOR","->",626],["T_STRING","_verifyPaymentObject",626],"(",")",";",["T_WHITESPACE","\n        ",626],["T_IF","if",627],["T_WHITESPACE"," ",627],"(","!",["T_VARIABLE","$this",627],["T_OBJECT_OPERATOR","->",627],["T_STRING","getId",627],"(",")",")",["T_WHITESPACE"," ",627],"{",["T_WHITESPACE","\n            ",627],["T_VARIABLE","$this",628],["T_OBJECT_OPERATOR","->",628],["T_STRING","setCreatedAt",628],"(",["T_VARIABLE","$this",628],["T_OBJECT_OPERATOR","->",628],["T_STRING","_dateFactory",628],["T_OBJECT_OPERATOR","->",628],["T_STRING","create",628],"(",")",["T_OBJECT_OPERATOR","->",628],["T_STRING","gmtDate",628],"(",")",")",";",["T_WHITESPACE","\n        ",628],"}",["T_WHITESPACE","\n        ",629],["T_RETURN","return",630],["T_WHITESPACE"," ",630],["T_STRING","parent",630],["T_DOUBLE_COLON","::",630],["T_STRING","beforeSave",630],"(",")",";",["T_WHITESPACE","\n    ",630],"}",["T_WHITESPACE","\n\n    ",631],["T_DOC_COMMENT","\/**\n     * Load child transactions\n     *\n     * @return void\n     * @throws \\Magento\\Framework\\Exception\\LocalizedException\n     * @SuppressWarnings(PHPMD.CyclomaticComplexity)\n     * @SuppressWarnings(PHPMD.NPathComplexity)\n     *\/",633],["T_WHITESPACE","\n    ",640],["T_PROTECTED","protected",641],["T_WHITESPACE"," ",641],["T_FUNCTION","function",641],["T_WHITESPACE"," ",641],["T_STRING","_loadChildren",641],"(",")",["T_WHITESPACE","\n    ",641],"{",["T_WHITESPACE","\n        ",642],["T_IF","if",643],["T_WHITESPACE"," ",643],"(",["T_STRING","null",643],["T_WHITESPACE"," ",643],["T_IS_NOT_IDENTICAL","!==",643],["T_WHITESPACE"," ",643],["T_VARIABLE","$this",643],["T_OBJECT_OPERATOR","->",643],["T_STRING","_children",643],")",["T_WHITESPACE"," ",643],"{",["T_WHITESPACE","\n            ",643],["T_RETURN","return",644],";",["T_WHITESPACE","\n        ",644],"}",["T_WHITESPACE","\n\n        ",645],["T_COMMENT","\/\/ make sure minimum required data is set\n",647],["T_WHITESPACE","        ",648],["T_VARIABLE","$this",648],["T_OBJECT_OPERATOR","->",648],["T_STRING","_verifyThisTransactionExists",648],"(",")",";",["T_WHITESPACE","\n        ",648],["T_IF","if",649],["T_WHITESPACE"," ",649],"(","!",["T_VARIABLE","$this",649],["T_OBJECT_OPERATOR","->",649],["T_STRING","getPaymentId",649],"(",")",")",["T_WHITESPACE"," ",649],"{",["T_WHITESPACE","\n            ",649],["T_THROW","throw",650],["T_WHITESPACE"," ",650],["T_NEW","new",650],["T_WHITESPACE"," ",650],["T_NS_SEPARATOR","\\",650],["T_STRING","Magento",650],["T_NS_SEPARATOR","\\",650],["T_STRING","Framework",650],["T_NS_SEPARATOR","\\",650],["T_STRING","Exception",650],["T_NS_SEPARATOR","\\",650],["T_STRING","LocalizedException",650],"(",["T_STRING","__",650],"(",["T_CONSTANT_ENCAPSED_STRING","'At minimum, you need to set a payment ID.'",650],")",")",";",["T_WHITESPACE","\n        ",650],"}",["T_WHITESPACE","\n\n        ",651],["T_VARIABLE","$this",653],["T_OBJECT_OPERATOR","->",653],["T_STRING","setOrder",653],"(",["T_STRING","true",653],")",";",["T_WHITESPACE","\n\n        ",653],["T_VARIABLE","$orderFilter",655],["T_WHITESPACE"," ",655],"=",["T_WHITESPACE"," ",655],["T_VARIABLE","$this",655],["T_OBJECT_OPERATOR","->",655],["T_STRING","getOrder",655],"(",")",";",["T_WHITESPACE","\n        ",655],["T_COMMENT","\/\/ Try to get order instance for filter\n",656],["T_WHITESPACE","        ",657],["T_IF","if",657],["T_WHITESPACE"," ",657],"(","!",["T_VARIABLE","$orderFilter",657],")",["T_WHITESPACE"," ",657],"{",["T_WHITESPACE","\n            ",657],["T_VARIABLE","$orderFilter",658],["T_WHITESPACE"," ",658],"=",["T_WHITESPACE"," ",658],["T_VARIABLE","$this",658],["T_OBJECT_OPERATOR","->",658],["T_STRING","getOrderId",658],"(",")",";",["T_WHITESPACE","\n        ",658],"}",["T_WHITESPACE","\n\n        ",659],["T_COMMENT","\/\/ prepare children collection\n",661],["T_WHITESPACE","        ",662],["T_VARIABLE","$children",662],["T_WHITESPACE"," ",662],"=",["T_WHITESPACE"," ",662],["T_VARIABLE","$this",662],["T_OBJECT_OPERATOR","->",662],["T_STRING","getResourceCollection",662],"(",")",["T_OBJECT_OPERATOR","->",662],["T_STRING","setOrderFilter",662],"(",["T_WHITESPACE","\n            ",662],["T_VARIABLE","$orderFilter",663],["T_WHITESPACE","\n        ",663],")",["T_OBJECT_OPERATOR","->",664],["T_STRING","addPaymentIdFilter",664],"(",["T_WHITESPACE","\n            ",664],["T_VARIABLE","$this",665],["T_OBJECT_OPERATOR","->",665],["T_STRING","getPaymentId",665],"(",")",["T_WHITESPACE","\n        ",665],")",["T_OBJECT_OPERATOR","->",666],["T_STRING","addParentIdFilter",666],"(",["T_WHITESPACE","\n            ",666],["T_VARIABLE","$this",667],["T_OBJECT_OPERATOR","->",667],["T_STRING","getId",667],"(",")",["T_WHITESPACE","\n        ",667],")",";",["T_WHITESPACE","\n\n        ",668],["T_COMMENT","\/\/ set basic children array and attempt to map them per txn_id, if all of them have txn_id\n",670],["T_WHITESPACE","        ",671],["T_VARIABLE","$this",671],["T_OBJECT_OPERATOR","->",671],["T_STRING","_children",671],["T_WHITESPACE"," ",671],"=",["T_WHITESPACE"," ",671],"[","]",";",["T_WHITESPACE","\n        ",671],["T_VARIABLE","$this",672],["T_OBJECT_OPERATOR","->",672],["T_STRING","_identifiedChildren",672],["T_WHITESPACE"," ",672],"=",["T_WHITESPACE"," ",672],"[","]",";",["T_WHITESPACE","\n        ",672],["T_FOREACH","foreach",673],["T_WHITESPACE"," ",673],"(",["T_VARIABLE","$children",673],["T_WHITESPACE"," ",673],["T_AS","as",673],["T_WHITESPACE"," ",673],["T_VARIABLE","$child",673],")",["T_WHITESPACE"," ",673],"{",["T_WHITESPACE","\n            ",673],["T_IF","if",674],["T_WHITESPACE"," ",674],"(",["T_VARIABLE","$this",674],["T_OBJECT_OPERATOR","->",674],["T_STRING","getPaymentId",674],"(",")",")",["T_WHITESPACE"," ",674],"{",["T_WHITESPACE","\n                ",674],["T_VARIABLE","$child",675],["T_OBJECT_OPERATOR","->",675],["T_STRING","setOrderId",675],"(",["T_VARIABLE","$this",675],["T_OBJECT_OPERATOR","->",675],["T_STRING","getOrderId",675],"(",")",")",["T_OBJECT_OPERATOR","->",675],["T_STRING","setPaymentId",675],"(",["T_VARIABLE","$this",675],["T_OBJECT_OPERATOR","->",675],["T_STRING","getPaymentId",675],"(",")",")",";",["T_WHITESPACE","\n            ",675],"}",["T_WHITESPACE","\n            ",676],["T_VARIABLE","$this",677],["T_OBJECT_OPERATOR","->",677],["T_STRING","_children",677],"[",["T_VARIABLE","$child",677],["T_OBJECT_OPERATOR","->",677],["T_STRING","getId",677],"(",")","]",["T_WHITESPACE"," ",677],"=",["T_WHITESPACE"," ",677],["T_VARIABLE","$child",677],";",["T_WHITESPACE","\n            ",677],["T_IF","if",678],["T_WHITESPACE"," ",678],"(",["T_STRING","false",678],["T_WHITESPACE"," ",678],["T_IS_NOT_IDENTICAL","!==",678],["T_WHITESPACE"," ",678],["T_VARIABLE","$this",678],["T_OBJECT_OPERATOR","->",678],["T_STRING","_identifiedChildren",678],")",["T_WHITESPACE"," ",678],"{",["T_WHITESPACE","\n                ",678],["T_VARIABLE","$childTxnId",679],["T_WHITESPACE"," ",679],"=",["T_WHITESPACE"," ",679],["T_VARIABLE","$child",679],["T_OBJECT_OPERATOR","->",679],["T_STRING","getTxnId",679],"(",")",";",["T_WHITESPACE","\n                ",679],["T_IF","if",680],["T_WHITESPACE"," ",680],"(","!",["T_VARIABLE","$childTxnId",680],["T_WHITESPACE"," ",680],["T_BOOLEAN_OR","||",680],["T_WHITESPACE"," ",680],["T_CONSTANT_ENCAPSED_STRING","'0'",680],["T_WHITESPACE"," ",680],["T_IS_EQUAL","==",680],["T_WHITESPACE"," ",680],["T_VARIABLE","$childTxnId",680],")",["T_WHITESPACE"," ",680],"{",["T_WHITESPACE","\n                    ",680],["T_VARIABLE","$this",681],["T_OBJECT_OPERATOR","->",681],["T_STRING","_identifiedChildren",681],["T_WHITESPACE"," ",681],"=",["T_WHITESPACE"," ",681],["T_STRING","false",681],";",["T_WHITESPACE","\n                ",681],"}",["T_WHITESPACE"," ",682],["T_ELSE","else",682],["T_WHITESPACE"," ",682],"{",["T_WHITESPACE","\n                    ",682],["T_VARIABLE","$this",683],["T_OBJECT_OPERATOR","->",683],["T_STRING","_identifiedChildren",683],"[",["T_VARIABLE","$child",683],["T_OBJECT_OPERATOR","->",683],["T_STRING","getTxnId",683],"(",")","]",["T_WHITESPACE"," ",683],"=",["T_WHITESPACE"," ",683],["T_VARIABLE","$child",683],";",["T_WHITESPACE","\n                ",683],"}",["T_WHITESPACE","\n            ",684],"}",["T_WHITESPACE","\n        ",685],"}",["T_WHITESPACE","\n        ",686],["T_IF","if",687],["T_WHITESPACE"," ",687],"(",["T_STRING","false",687],["T_WHITESPACE"," ",687],["T_IS_IDENTICAL","===",687],["T_WHITESPACE"," ",687],["T_VARIABLE","$this",687],["T_OBJECT_OPERATOR","->",687],["T_STRING","_identifiedChildren",687],")",["T_WHITESPACE"," ",687],"{",["T_WHITESPACE","\n            ",687],["T_VARIABLE","$this",688],["T_OBJECT_OPERATOR","->",688],["T_STRING","_identifiedChildren",688],["T_WHITESPACE"," ",688],"=",["T_WHITESPACE"," ",688],"[","]",";",["T_WHITESPACE","\n        ",688],"}",["T_WHITESPACE","\n    ",689],"}",["T_WHITESPACE","\n\n    ",690],["T_DOC_COMMENT","\/**\n     * Check whether this transaction is voided\n     *\n     * TODO: implement that there should be only one void per authorization\n     * @return bool\n     *\/",692],["T_WHITESPACE","\n    ",697],["T_PROTECTED","protected",698],["T_WHITESPACE"," ",698],["T_FUNCTION","function",698],["T_WHITESPACE"," ",698],["T_STRING","_isVoided",698],"(",")",["T_WHITESPACE","\n    ",698],"{",["T_WHITESPACE","\n        ",699],["T_VARIABLE","$this",700],["T_OBJECT_OPERATOR","->",700],["T_STRING","_verifyThisTransactionExists",700],"(",")",";",["T_WHITESPACE","\n        ",700],["T_RETURN","return",701],["T_WHITESPACE"," ",701],["T_STRING","self",701],["T_DOUBLE_COLON","::",701],["T_STRING","TYPE_AUTH",701],["T_WHITESPACE"," ",701],["T_IS_IDENTICAL","===",701],["T_WHITESPACE"," ",701],["T_VARIABLE","$this",701],["T_OBJECT_OPERATOR","->",701],["T_STRING","getTxnType",701],"(",")",["T_WHITESPACE"," ",701],["T_BOOLEAN_AND","&&",701],["T_WHITESPACE"," ",701],["T_BOOL_CAST","(bool)",701],["T_STRING","count",701],"(",["T_VARIABLE","$this",701],["T_OBJECT_OPERATOR","->",701],["T_STRING","getChildTransactions",701],"(",["T_STRING","self",701],["T_DOUBLE_COLON","::",701],["T_STRING","TYPE_VOID",701],")",")",";",["T_WHITESPACE","\n    ",701],"}",["T_WHITESPACE","\n\n    ",702],["T_DOC_COMMENT","\/**\n     * Check whether this transaction is voided\n     *\n     * @return bool\n     *\/",704],["T_WHITESPACE","\n    ",708],["T_PUBLIC","public",709],["T_WHITESPACE"," ",709],["T_FUNCTION","function",709],["T_WHITESPACE"," ",709],["T_STRING","isVoided",709],"(",")",["T_WHITESPACE","\n    ",709],"{",["T_WHITESPACE","\n        ",710],["T_RETURN","return",711],["T_WHITESPACE"," ",711],["T_VARIABLE","$this",711],["T_OBJECT_OPERATOR","->",711],["T_STRING","_isVoided",711],"(",")",";",["T_WHITESPACE","\n    ",711],"}",["T_WHITESPACE","\n\n    ",712],["T_DOC_COMMENT","\/**\n     * Retrieve transaction types\n     *\n     * @return array\n     *\/",714],["T_WHITESPACE","\n    ",718],["T_PUBLIC","public",719],["T_WHITESPACE"," ",719],["T_FUNCTION","function",719],["T_WHITESPACE"," ",719],["T_STRING","getTransactionTypes",719],"(",")",["T_WHITESPACE","\n    ",719],"{",["T_WHITESPACE","\n        ",720],["T_RETURN","return",721],["T_WHITESPACE"," ",721],"[",["T_WHITESPACE","\n            ",721],["T_NS_SEPARATOR","\\",722],["T_STRING","Magento",722],["T_NS_SEPARATOR","\\",722],["T_STRING","Sales",722],["T_NS_SEPARATOR","\\",722],["T_STRING","Model",722],["T_NS_SEPARATOR","\\",722],["T_STRING","Order",722],["T_NS_SEPARATOR","\\",722],["T_STRING","Payment",722],["T_NS_SEPARATOR","\\",722],["T_STRING","Transaction",722],["T_DOUBLE_COLON","::",722],["T_STRING","TYPE_ORDER",722],["T_WHITESPACE"," ",722],["T_DOUBLE_ARROW","=>",722],["T_WHITESPACE"," ",722],["T_STRING","__",722],"(",["T_CONSTANT_ENCAPSED_STRING","'Order'",722],")",",",["T_WHITESPACE","\n            ",722],["T_NS_SEPARATOR","\\",723],["T_STRING","Magento",723],["T_NS_SEPARATOR","\\",723],["T_STRING","Sales",723],["T_NS_SEPARATOR","\\",723],["T_STRING","Model",723],["T_NS_SEPARATOR","\\",723],["T_STRING","Order",723],["T_NS_SEPARATOR","\\",723],["T_STRING","Payment",723],["T_NS_SEPARATOR","\\",723],["T_STRING","Transaction",723],["T_DOUBLE_COLON","::",723],["T_STRING","TYPE_AUTH",723],["T_WHITESPACE"," ",723],["T_DOUBLE_ARROW","=>",723],["T_WHITESPACE"," ",723],["T_STRING","__",723],"(",["T_CONSTANT_ENCAPSED_STRING","'Authorization'",723],")",",",["T_WHITESPACE","\n            ",723],["T_NS_SEPARATOR","\\",724],["T_STRING","Magento",724],["T_NS_SEPARATOR","\\",724],["T_STRING","Sales",724],["T_NS_SEPARATOR","\\",724],["T_STRING","Model",724],["T_NS_SEPARATOR","\\",724],["T_STRING","Order",724],["T_NS_SEPARATOR","\\",724],["T_STRING","Payment",724],["T_NS_SEPARATOR","\\",724],["T_STRING","Transaction",724],["T_DOUBLE_COLON","::",724],["T_STRING","TYPE_CAPTURE",724],["T_WHITESPACE"," ",724],["T_DOUBLE_ARROW","=>",724],["T_WHITESPACE"," ",724],["T_STRING","__",724],"(",["T_CONSTANT_ENCAPSED_STRING","'Capture'",724],")",",",["T_WHITESPACE","\n            ",724],["T_NS_SEPARATOR","\\",725],["T_STRING","Magento",725],["T_NS_SEPARATOR","\\",725],["T_STRING","Sales",725],["T_NS_SEPARATOR","\\",725],["T_STRING","Model",725],["T_NS_SEPARATOR","\\",725],["T_STRING","Order",725],["T_NS_SEPARATOR","\\",725],["T_STRING","Payment",725],["T_NS_SEPARATOR","\\",725],["T_STRING","Transaction",725],["T_DOUBLE_COLON","::",725],["T_STRING","TYPE_VOID",725],["T_WHITESPACE"," ",725],["T_DOUBLE_ARROW","=>",725],["T_WHITESPACE"," ",725],["T_STRING","__",725],"(",["T_CONSTANT_ENCAPSED_STRING","'Void'",725],")",",",["T_WHITESPACE","\n            ",725],["T_NS_SEPARATOR","\\",726],["T_STRING","Magento",726],["T_NS_SEPARATOR","\\",726],["T_STRING","Sales",726],["T_NS_SEPARATOR","\\",726],["T_STRING","Model",726],["T_NS_SEPARATOR","\\",726],["T_STRING","Order",726],["T_NS_SEPARATOR","\\",726],["T_STRING","Payment",726],["T_NS_SEPARATOR","\\",726],["T_STRING","Transaction",726],["T_DOUBLE_COLON","::",726],["T_STRING","TYPE_REFUND",726],["T_WHITESPACE"," ",726],["T_DOUBLE_ARROW","=>",726],["T_WHITESPACE"," ",726],["T_STRING","__",726],"(",["T_CONSTANT_ENCAPSED_STRING","'Refund'",726],")",["T_WHITESPACE","\n        ",726],"]",";",["T_WHITESPACE","\n    ",727],"}",["T_WHITESPACE","\n\n    ",728],["T_DOC_COMMENT","\/**\n     * Retrieve order website id\n     *\n     * @return int\n     *\/",730],["T_WHITESPACE","\n    ",734],["T_PUBLIC","public",735],["T_WHITESPACE"," ",735],["T_FUNCTION","function",735],["T_WHITESPACE"," ",735],["T_STRING","getOrderWebsiteId",735],"(",")",["T_WHITESPACE","\n    ",735],"{",["T_WHITESPACE","\n        ",736],["T_IF","if",737],["T_WHITESPACE"," ",737],"(",["T_STRING","is_null",737],"(",["T_VARIABLE","$this",737],["T_OBJECT_OPERATOR","->",737],["T_STRING","_orderWebsiteId",737],")",")",["T_WHITESPACE"," ",737],"{",["T_WHITESPACE","\n            ",737],["T_VARIABLE","$this",738],["T_OBJECT_OPERATOR","->",738],["T_STRING","_orderWebsiteId",738],["T_WHITESPACE"," ",738],"=",["T_WHITESPACE"," ",738],["T_INT_CAST","(int)",738],["T_VARIABLE","$this",738],["T_OBJECT_OPERATOR","->",738],["T_STRING","getResource",738],"(",")",["T_OBJECT_OPERATOR","->",738],["T_STRING","getOrderWebsiteId",738],"(",["T_VARIABLE","$this",738],["T_OBJECT_OPERATOR","->",738],["T_STRING","getOrderId",738],"(",")",")",";",["T_WHITESPACE","\n        ",738],"}",["T_WHITESPACE","\n        ",739],["T_RETURN","return",740],["T_WHITESPACE"," ",740],["T_VARIABLE","$this",740],["T_OBJECT_OPERATOR","->",740],["T_STRING","_orderWebsiteId",740],";",["T_WHITESPACE","\n    ",740],"}",["T_WHITESPACE","\n\n    ",741],["T_DOC_COMMENT","\/**\n     * Check whether specified or set transaction type is supported\n     *\n     * @param string $txnType\n     * @return void\n     * @throws \\Magento\\Framework\\Exception\\LocalizedException\n     *\/",743],["T_WHITESPACE","\n    ",749],["T_PROTECTED","protected",750],["T_WHITESPACE"," ",750],["T_FUNCTION","function",750],["T_WHITESPACE"," ",750],["T_STRING","_verifyTxnType",750],"(",["T_VARIABLE","$txnType",750],["T_WHITESPACE"," ",750],"=",["T_WHITESPACE"," ",750],["T_STRING","null",750],")",["T_WHITESPACE","\n    ",750],"{",["T_WHITESPACE","\n        ",751],["T_IF","if",752],["T_WHITESPACE"," ",752],"(",["T_STRING","null",752],["T_WHITESPACE"," ",752],["T_IS_IDENTICAL","===",752],["T_WHITESPACE"," ",752],["T_VARIABLE","$txnType",752],")",["T_WHITESPACE"," ",752],"{",["T_WHITESPACE","\n            ",752],["T_VARIABLE","$txnType",753],["T_WHITESPACE"," ",753],"=",["T_WHITESPACE"," ",753],["T_VARIABLE","$this",753],["T_OBJECT_OPERATOR","->",753],["T_STRING","getTxnType",753],"(",")",";",["T_WHITESPACE","\n        ",753],"}",["T_WHITESPACE","\n        ",754],["T_SWITCH","switch",755],["T_WHITESPACE"," ",755],"(",["T_VARIABLE","$txnType",755],")",["T_WHITESPACE"," ",755],"{",["T_WHITESPACE","\n            ",755],["T_CASE","case",756],["T_WHITESPACE"," ",756],["T_STRING","self",756],["T_DOUBLE_COLON","::",756],["T_STRING","TYPE_PAYMENT",756],":",["T_WHITESPACE","\n            ",756],["T_CASE","case",757],["T_WHITESPACE"," ",757],["T_STRING","self",757],["T_DOUBLE_COLON","::",757],["T_STRING","TYPE_ORDER",757],":",["T_WHITESPACE","\n            ",757],["T_CASE","case",758],["T_WHITESPACE"," ",758],["T_STRING","self",758],["T_DOUBLE_COLON","::",758],["T_STRING","TYPE_AUTH",758],":",["T_WHITESPACE","\n            ",758],["T_CASE","case",759],["T_WHITESPACE"," ",759],["T_STRING","self",759],["T_DOUBLE_COLON","::",759],["T_STRING","TYPE_CAPTURE",759],":",["T_WHITESPACE","\n            ",759],["T_CASE","case",760],["T_WHITESPACE"," ",760],["T_STRING","self",760],["T_DOUBLE_COLON","::",760],["T_STRING","TYPE_VOID",760],":",["T_WHITESPACE","\n            ",760],["T_CASE","case",761],["T_WHITESPACE"," ",761],["T_STRING","self",761],["T_DOUBLE_COLON","::",761],["T_STRING","TYPE_REFUND",761],":",["T_WHITESPACE","\n                ",761],["T_BREAK","break",762],";",["T_WHITESPACE","\n            ",762],["T_DEFAULT","default",763],":",["T_WHITESPACE","\n                ",763],["T_THROW","throw",764],["T_WHITESPACE"," ",764],["T_NEW","new",764],["T_WHITESPACE"," ",764],["T_NS_SEPARATOR","\\",764],["T_STRING","Magento",764],["T_NS_SEPARATOR","\\",764],["T_STRING","Framework",764],["T_NS_SEPARATOR","\\",764],["T_STRING","Exception",764],["T_NS_SEPARATOR","\\",764],["T_STRING","LocalizedException",764],"(",["T_STRING","__",764],"(",["T_CONSTANT_ENCAPSED_STRING","'We found an unsupported transaction type \"%1\".'",764],",",["T_WHITESPACE"," ",764],["T_VARIABLE","$txnType",764],")",")",";",["T_WHITESPACE","\n        ",764],"}",["T_WHITESPACE","\n    ",765],"}",["T_WHITESPACE","\n\n    ",766],["T_DOC_COMMENT","\/**\n     * Check whether the payment object is set and it has order object or there is an order_id is set\n     * $dryRun allows to not throw exception\n     *\n     * @param bool $dryRun\n     * @return void\n     * @throws \\Magento\\Framework\\Exception\\LocalizedException\n     *\/",768],["T_WHITESPACE","\n    ",775],["T_PROTECTED","protected",776],["T_WHITESPACE"," ",776],["T_FUNCTION","function",776],["T_WHITESPACE"," ",776],["T_STRING","_verifyPaymentObject",776],"(",["T_VARIABLE","$dryRun",776],["T_WHITESPACE"," ",776],"=",["T_WHITESPACE"," ",776],["T_STRING","false",776],")",["T_WHITESPACE","\n    ",776],"{",["T_WHITESPACE","\n        ",777],["T_IF","if",778],["T_WHITESPACE"," ",778],"(","!",["T_VARIABLE","$this",778],["T_OBJECT_OPERATOR","->",778],["T_STRING","getPaymentId",778],"(",")",["T_WHITESPACE"," ",778],["T_BOOLEAN_OR","||",778],["T_WHITESPACE"," ",778],"!",["T_VARIABLE","$this",778],["T_OBJECT_OPERATOR","->",778],["T_STRING","getOrderId",778],"(",")",")",["T_WHITESPACE"," ",778],"{",["T_WHITESPACE","\n            ",778],["T_IF","if",779],["T_WHITESPACE"," ",779],"(","!",["T_VARIABLE","$dryRun",779],")",["T_WHITESPACE"," ",779],"{",["T_WHITESPACE","\n                ",779],["T_THROW","throw",780],["T_WHITESPACE"," ",780],["T_NEW","new",780],["T_WHITESPACE"," ",780],["T_NS_SEPARATOR","\\",780],["T_STRING","Magento",780],["T_NS_SEPARATOR","\\",780],["T_STRING","Framework",780],["T_NS_SEPARATOR","\\",780],["T_STRING","Exception",780],["T_NS_SEPARATOR","\\",780],["T_STRING","LocalizedException",780],"(",["T_WHITESPACE","\n                    ",780],["T_STRING","__",781],"(",["T_CONSTANT_ENCAPSED_STRING","'Please set a proper payment and order id.'",781],")",["T_WHITESPACE","\n                ",781],")",";",["T_WHITESPACE","\n            ",782],"}",["T_WHITESPACE","\n        ",783],"}",["T_WHITESPACE","\n    ",784],"}",["T_WHITESPACE","\n\n    ",785],["T_DOC_COMMENT","\/**\n     * Check whether specified transaction ID is valid\n     *\n     * @param string $txnId\n     * @return void\n     * @throws \\Magento\\Framework\\Exception\\LocalizedException\n     *\/",787],["T_WHITESPACE","\n    ",793],["T_PROTECTED","protected",794],["T_WHITESPACE"," ",794],["T_FUNCTION","function",794],["T_WHITESPACE"," ",794],["T_STRING","_verifyTxnId",794],"(",["T_VARIABLE","$txnId",794],")",["T_WHITESPACE","\n    ",794],"{",["T_WHITESPACE","\n        ",795],["T_IF","if",796],["T_WHITESPACE"," ",796],"(",["T_STRING","null",796],["T_WHITESPACE"," ",796],["T_IS_NOT_IDENTICAL","!==",796],["T_WHITESPACE"," ",796],["T_VARIABLE","$txnId",796],["T_WHITESPACE"," ",796],["T_BOOLEAN_AND","&&",796],["T_WHITESPACE"," ",796],["T_LNUMBER","0",796],["T_WHITESPACE"," ",796],["T_IS_EQUAL","==",796],["T_WHITESPACE"," ",796],["T_STRING","strlen",796],"(",["T_VARIABLE","$txnId",796],")",")",["T_WHITESPACE"," ",796],"{",["T_WHITESPACE","\n            ",796],["T_THROW","throw",797],["T_WHITESPACE"," ",797],["T_NEW","new",797],["T_WHITESPACE"," ",797],["T_NS_SEPARATOR","\\",797],["T_STRING","Magento",797],["T_NS_SEPARATOR","\\",797],["T_STRING","Framework",797],["T_NS_SEPARATOR","\\",797],["T_STRING","Exception",797],["T_NS_SEPARATOR","\\",797],["T_STRING","LocalizedException",797],"(",["T_STRING","__",797],"(",["T_CONSTANT_ENCAPSED_STRING","'Please enter a Transaction ID.'",797],")",")",";",["T_WHITESPACE","\n        ",797],"}",["T_WHITESPACE","\n    ",798],"}",["T_WHITESPACE","\n\n    ",799],["T_DOC_COMMENT","\/**\n     * Make sure this object is a valid transaction\n     * TODO for more restriction we can check for data consistency\n     *\n     * @return void\n     * @throws \\Magento\\Framework\\Exception\\LocalizedException\n     *\/",801],["T_WHITESPACE","\n    ",807],["T_PROTECTED","protected",808],["T_WHITESPACE"," ",808],["T_FUNCTION","function",808],["T_WHITESPACE"," ",808],["T_STRING","_verifyThisTransactionExists",808],"(",")",["T_WHITESPACE","\n    ",808],"{",["T_WHITESPACE","\n        ",809],["T_IF","if",810],["T_WHITESPACE"," ",810],"(","!",["T_VARIABLE","$this",810],["T_OBJECT_OPERATOR","->",810],["T_STRING","getId",810],"(",")",")",["T_WHITESPACE"," ",810],"{",["T_WHITESPACE","\n            ",810],["T_THROW","throw",811],["T_WHITESPACE"," ",811],["T_NEW","new",811],["T_WHITESPACE"," ",811],["T_NS_SEPARATOR","\\",811],["T_STRING","Magento",811],["T_NS_SEPARATOR","\\",811],["T_STRING","Framework",811],["T_NS_SEPARATOR","\\",811],["T_STRING","Exception",811],["T_NS_SEPARATOR","\\",811],["T_STRING","LocalizedException",811],"(",["T_STRING","__",811],"(",["T_CONSTANT_ENCAPSED_STRING","'You can\\'t do this without a transaction object.'",811],")",")",";",["T_WHITESPACE","\n        ",811],"}",["T_WHITESPACE","\n        ",812],["T_VARIABLE","$this",813],["T_OBJECT_OPERATOR","->",813],["T_STRING","_verifyTxnType",813],"(",")",";",["T_WHITESPACE","\n    ",813],"}",["T_WHITESPACE","\n\n    ",814],["T_COMMENT","\/\/@codeCoverageIgnoreStart\n",816],["T_WHITESPACE","    ",817],["T_DOC_COMMENT","\/**\n     * Returns transaction_id\n     *\n     * @return int\n     *\/",817],["T_WHITESPACE","\n    ",821],["T_PUBLIC","public",822],["T_WHITESPACE"," ",822],["T_FUNCTION","function",822],["T_WHITESPACE"," ",822],["T_STRING","getTransactionId",822],"(",")",["T_WHITESPACE","\n    ",822],"{",["T_WHITESPACE","\n        ",823],["T_RETURN","return",824],["T_WHITESPACE"," ",824],["T_VARIABLE","$this",824],["T_OBJECT_OPERATOR","->",824],["T_STRING","getData",824],"(",["T_STRING","TransactionInterface",824],["T_DOUBLE_COLON","::",824],["T_STRING","TRANSACTION_ID",824],")",";",["T_WHITESPACE","\n    ",824],"}",["T_WHITESPACE","\n\n    ",825],["T_DOC_COMMENT","\/**\n     * {@inheritdoc}\n     *\/",827],["T_WHITESPACE","\n    ",829],["T_PUBLIC","public",830],["T_WHITESPACE"," ",830],["T_FUNCTION","function",830],["T_WHITESPACE"," ",830],["T_STRING","setTransactionId",830],"(",["T_VARIABLE","$id",830],")",["T_WHITESPACE","\n    ",830],"{",["T_WHITESPACE","\n        ",831],["T_RETURN","return",832],["T_WHITESPACE"," ",832],["T_VARIABLE","$this",832],["T_OBJECT_OPERATOR","->",832],["T_STRING","setData",832],"(",["T_STRING","TransactionInterface",832],["T_DOUBLE_COLON","::",832],["T_STRING","TRANSACTION_ID",832],",",["T_WHITESPACE"," ",832],["T_VARIABLE","$id",832],")",";",["T_WHITESPACE","\n    ",832],"}",["T_WHITESPACE","\n\n    ",833],["T_DOC_COMMENT","\/**\n     * Returns method\n     *\n     * @return string\n     *\/",835],["T_WHITESPACE","\n    ",839],["T_PUBLIC","public",840],["T_WHITESPACE"," ",840],["T_FUNCTION","function",840],["T_WHITESPACE"," ",840],["T_STRING","getMethod",840],"(",")",["T_WHITESPACE","\n    ",840],"{",["T_WHITESPACE","\n        ",841],["T_RETURN","return",842],["T_WHITESPACE"," ",842],["T_VARIABLE","$this",842],["T_OBJECT_OPERATOR","->",842],["T_STRING","getData",842],"(",["T_STRING","TransactionInterface",842],["T_DOUBLE_COLON","::",842],["T_STRING","METHOD",842],")",";",["T_WHITESPACE","\n    ",842],"}",["T_WHITESPACE","\n\n    ",843],["T_DOC_COMMENT","\/**\n     * Returns increment_id\n     *\n     * @return string\n     *\/",845],["T_WHITESPACE","\n    ",849],["T_PUBLIC","public",850],["T_WHITESPACE"," ",850],["T_FUNCTION","function",850],["T_WHITESPACE"," ",850],["T_STRING","getIncrementId",850],"(",")",["T_WHITESPACE","\n    ",850],"{",["T_WHITESPACE","\n        ",851],["T_RETURN","return",852],["T_WHITESPACE"," ",852],["T_VARIABLE","$this",852],["T_OBJECT_OPERATOR","->",852],["T_STRING","getData",852],"(",["T_STRING","TransactionInterface",852],["T_DOUBLE_COLON","::",852],["T_STRING","INCREMENT_ID",852],")",";",["T_WHITESPACE","\n    ",852],"}",["T_WHITESPACE","\n\n    ",853],["T_DOC_COMMENT","\/**\n     * Returns parent_id\n     *\n     * @return int|null\n     *\/",855],["T_WHITESPACE","\n    ",859],["T_PUBLIC","public",860],["T_WHITESPACE"," ",860],["T_FUNCTION","function",860],["T_WHITESPACE"," ",860],["T_STRING","getParentId",860],"(",")",["T_WHITESPACE","\n    ",860],"{",["T_WHITESPACE","\n        ",861],["T_RETURN","return",862],["T_WHITESPACE"," ",862],["T_VARIABLE","$this",862],["T_OBJECT_OPERATOR","->",862],["T_STRING","getData",862],"(",["T_STRING","TransactionInterface",862],["T_DOUBLE_COLON","::",862],["T_STRING","PARENT_ID",862],")",";",["T_WHITESPACE","\n    ",862],"}",["T_WHITESPACE","\n\n    ",863],["T_DOC_COMMENT","\/**\n     * Returns payment_id\n     *\n     * @return int\n     *\/",865],["T_WHITESPACE","\n    ",869],["T_PUBLIC","public",870],["T_WHITESPACE"," ",870],["T_FUNCTION","function",870],["T_WHITESPACE"," ",870],["T_STRING","getPaymentId",870],"(",")",["T_WHITESPACE","\n    ",870],"{",["T_WHITESPACE","\n        ",871],["T_RETURN","return",872],["T_WHITESPACE"," ",872],["T_VARIABLE","$this",872],["T_OBJECT_OPERATOR","->",872],["T_STRING","getData",872],"(",["T_STRING","TransactionInterface",872],["T_DOUBLE_COLON","::",872],["T_STRING","PAYMENT_ID",872],")",";",["T_WHITESPACE","\n    ",872],"}",["T_WHITESPACE","\n\n    ",873],["T_DOC_COMMENT","\/**\n     * Returns txn_id\n     *\n     * @return string\n     *\/",875],["T_WHITESPACE","\n    ",879],["T_PUBLIC","public",880],["T_WHITESPACE"," ",880],["T_FUNCTION","function",880],["T_WHITESPACE"," ",880],["T_STRING","getTxnId",880],"(",")",["T_WHITESPACE","\n    ",880],"{",["T_WHITESPACE","\n        ",881],["T_RETURN","return",882],["T_WHITESPACE"," ",882],["T_VARIABLE","$this",882],["T_OBJECT_OPERATOR","->",882],["T_STRING","getData",882],"(",["T_STRING","TransactionInterface",882],["T_DOUBLE_COLON","::",882],["T_STRING","TXN_ID",882],")",";",["T_WHITESPACE","\n    ",882],"}",["T_WHITESPACE","\n\n    ",883],["T_DOC_COMMENT","\/**\n     * Get HTML format for transaction id\n     *\n     * @return string\n     *\/",885],["T_WHITESPACE","\n    ",889],["T_PUBLIC","public",890],["T_WHITESPACE"," ",890],["T_FUNCTION","function",890],["T_WHITESPACE"," ",890],["T_STRING","getHtmlTxnId",890],"(",")",["T_WHITESPACE","\n    ",890],"{",["T_WHITESPACE","\n        ",891],["T_VARIABLE","$this",892],["T_OBJECT_OPERATOR","->",892],["T_STRING","_eventManager",892],["T_OBJECT_OPERATOR","->",892],["T_STRING","dispatch",892],"(",["T_VARIABLE","$this",892],["T_OBJECT_OPERATOR","->",892],["T_STRING","_eventPrefix",892],["T_WHITESPACE"," ",892],".",["T_WHITESPACE"," ",892],["T_CONSTANT_ENCAPSED_STRING","'_html_txn_id'",892],",",["T_WHITESPACE"," ",892],["T_VARIABLE","$this",892],["T_OBJECT_OPERATOR","->",892],["T_STRING","_getEventData",892],"(",")",")",";",["T_WHITESPACE","\n        ",892],["T_RETURN","return",893],["T_WHITESPACE"," ",893],["T_ISSET","isset",893],"(",["T_VARIABLE","$this",893],["T_OBJECT_OPERATOR","->",893],["T_STRING","_data",893],"[",["T_CONSTANT_ENCAPSED_STRING","'html_txn_id'",893],"]",")",["T_WHITESPACE"," ",893],"?",["T_WHITESPACE"," ",893],["T_VARIABLE","$this",893],["T_OBJECT_OPERATOR","->",893],["T_STRING","_data",893],"[",["T_CONSTANT_ENCAPSED_STRING","'html_txn_id'",893],"]",["T_WHITESPACE"," ",893],":",["T_WHITESPACE"," ",893],["T_VARIABLE","$this",893],["T_OBJECT_OPERATOR","->",893],["T_STRING","getTxnId",893],"(",")",";",["T_WHITESPACE","\n    ",893],"}",["T_WHITESPACE","\n\n    ",894],["T_DOC_COMMENT","\/**\n     * Returns parent_txn_id\n     *\n     * @return string\n     *\/",896],["T_WHITESPACE","\n    ",900],["T_PUBLIC","public",901],["T_WHITESPACE"," ",901],["T_FUNCTION","function",901],["T_WHITESPACE"," ",901],["T_STRING","getParentTxnId",901],"(",")",["T_WHITESPACE","\n    ",901],"{",["T_WHITESPACE","\n        ",902],["T_RETURN","return",903],["T_WHITESPACE"," ",903],["T_VARIABLE","$this",903],["T_OBJECT_OPERATOR","->",903],["T_STRING","getData",903],"(",["T_STRING","TransactionInterface",903],["T_DOUBLE_COLON","::",903],["T_STRING","PARENT_TXN_ID",903],")",";",["T_WHITESPACE","\n    ",903],"}",["T_WHITESPACE","\n\n    ",904],["T_DOC_COMMENT","\/**\n     * Returns txn_type\n     *\n     * @return string\n     *\/",906],["T_WHITESPACE","\n    ",910],["T_PUBLIC","public",911],["T_WHITESPACE"," ",911],["T_FUNCTION","function",911],["T_WHITESPACE"," ",911],["T_STRING","getTxnType",911],"(",")",["T_WHITESPACE","\n    ",911],"{",["T_WHITESPACE","\n        ",912],["T_RETURN","return",913],["T_WHITESPACE"," ",913],["T_VARIABLE","$this",913],["T_OBJECT_OPERATOR","->",913],["T_STRING","getData",913],"(",["T_STRING","TransactionInterface",913],["T_DOUBLE_COLON","::",913],["T_STRING","TXN_TYPE",913],")",";",["T_WHITESPACE","\n    ",913],"}",["T_WHITESPACE","\n\n    ",914],["T_DOC_COMMENT","\/**\n     * Returns is_closed\n     *\n     * @return int\n     *\/",916],["T_WHITESPACE","\n    ",920],["T_PUBLIC","public",921],["T_WHITESPACE"," ",921],["T_FUNCTION","function",921],["T_WHITESPACE"," ",921],["T_STRING","getIsClosed",921],"(",")",["T_WHITESPACE","\n    ",921],"{",["T_WHITESPACE","\n        ",922],["T_RETURN","return",923],["T_WHITESPACE"," ",923],["T_VARIABLE","$this",923],["T_OBJECT_OPERATOR","->",923],["T_STRING","getData",923],"(",["T_STRING","TransactionInterface",923],["T_DOUBLE_COLON","::",923],["T_STRING","IS_CLOSED",923],")",";",["T_WHITESPACE","\n    ",923],"}",["T_WHITESPACE","\n\n    ",924],["T_DOC_COMMENT","\/**\n     * Gets the created-at timestamp for the transaction.\n     *\n     * @return string\n     *\/",926],["T_WHITESPACE","\n    ",930],["T_PUBLIC","public",931],["T_WHITESPACE"," ",931],["T_FUNCTION","function",931],["T_WHITESPACE"," ",931],["T_STRING","getCreatedAt",931],"(",")",["T_WHITESPACE","\n    ",931],"{",["T_WHITESPACE","\n        ",932],["T_RETURN","return",933],["T_WHITESPACE"," ",933],["T_VARIABLE","$this",933],["T_OBJECT_OPERATOR","->",933],["T_STRING","getData",933],"(",["T_STRING","TransactionInterface",933],["T_DOUBLE_COLON","::",933],["T_STRING","CREATED_AT",933],")",";",["T_WHITESPACE","\n    ",933],"}",["T_WHITESPACE","\n\n    ",934],["T_DOC_COMMENT","\/**\n     * {@inheritdoc}\n     *\/",936],["T_WHITESPACE","\n    ",938],["T_PUBLIC","public",939],["T_WHITESPACE"," ",939],["T_FUNCTION","function",939],["T_WHITESPACE"," ",939],["T_STRING","setCreatedAt",939],"(",["T_VARIABLE","$createdAt",939],")",["T_WHITESPACE","\n    ",939],"{",["T_WHITESPACE","\n        ",940],["T_RETURN","return",941],["T_WHITESPACE"," ",941],["T_VARIABLE","$this",941],["T_OBJECT_OPERATOR","->",941],["T_STRING","setData",941],"(",["T_STRING","TransactionInterface",941],["T_DOUBLE_COLON","::",941],["T_STRING","CREATED_AT",941],",",["T_WHITESPACE"," ",941],["T_VARIABLE","$createdAt",941],")",";",["T_WHITESPACE","\n    ",941],"}",["T_WHITESPACE","\n\n    ",942],["T_DOC_COMMENT","\/**\n     * {@inheritdoc}\n     *\/",944],["T_WHITESPACE","\n    ",946],["T_PUBLIC","public",947],["T_WHITESPACE"," ",947],["T_FUNCTION","function",947],["T_WHITESPACE"," ",947],["T_STRING","setParentId",947],"(",["T_VARIABLE","$id",947],")",["T_WHITESPACE","\n    ",947],"{",["T_WHITESPACE","\n        ",948],["T_RETURN","return",949],["T_WHITESPACE"," ",949],["T_VARIABLE","$this",949],["T_OBJECT_OPERATOR","->",949],["T_STRING","setData",949],"(",["T_STRING","TransactionInterface",949],["T_DOUBLE_COLON","::",949],["T_STRING","PARENT_ID",949],",",["T_WHITESPACE"," ",949],["T_VARIABLE","$id",949],")",";",["T_WHITESPACE","\n    ",949],"}",["T_WHITESPACE","\n\n    ",950],["T_DOC_COMMENT","\/**\n     * {@inheritdoc}\n     *\/",952],["T_WHITESPACE","\n    ",954],["T_PUBLIC","public",955],["T_WHITESPACE"," ",955],["T_FUNCTION","function",955],["T_WHITESPACE"," ",955],["T_STRING","setOrderId",955],"(",["T_VARIABLE","$id",955],")",["T_WHITESPACE","\n    ",955],"{",["T_WHITESPACE","\n        ",956],["T_RETURN","return",957],["T_WHITESPACE"," ",957],["T_VARIABLE","$this",957],["T_OBJECT_OPERATOR","->",957],["T_STRING","setData",957],"(",["T_STRING","TransactionInterface",957],["T_DOUBLE_COLON","::",957],["T_STRING","ORDER_ID",957],",",["T_WHITESPACE"," ",957],["T_VARIABLE","$id",957],")",";",["T_WHITESPACE","\n    ",957],"}",["T_WHITESPACE","\n\n    ",958],["T_DOC_COMMENT","\/**\n     * {@inheritdoc}\n     *\/",960],["T_WHITESPACE","\n    ",962],["T_PUBLIC","public",963],["T_WHITESPACE"," ",963],["T_FUNCTION","function",963],["T_WHITESPACE"," ",963],["T_STRING","setPaymentId",963],"(",["T_VARIABLE","$id",963],")",["T_WHITESPACE","\n    ",963],"{",["T_WHITESPACE","\n        ",964],["T_RETURN","return",965],["T_WHITESPACE"," ",965],["T_VARIABLE","$this",965],["T_OBJECT_OPERATOR","->",965],["T_STRING","setData",965],"(",["T_STRING","TransactionInterface",965],["T_DOUBLE_COLON","::",965],["T_STRING","PAYMENT_ID",965],",",["T_WHITESPACE"," ",965],["T_VARIABLE","$id",965],")",";",["T_WHITESPACE","\n    ",965],"}",["T_WHITESPACE","\n\n    ",966],["T_DOC_COMMENT","\/**\n     * {@inheritdoc}\n     *\/",968],["T_WHITESPACE","\n    ",970],["T_PUBLIC","public",971],["T_WHITESPACE"," ",971],["T_FUNCTION","function",971],["T_WHITESPACE"," ",971],["T_STRING","setIsClosed",971],"(",["T_VARIABLE","$isClosed",971],")",["T_WHITESPACE","\n    ",971],"{",["T_WHITESPACE","\n        ",972],["T_RETURN","return",973],["T_WHITESPACE"," ",973],["T_VARIABLE","$this",973],["T_OBJECT_OPERATOR","->",973],["T_STRING","setData",973],"(",["T_STRING","TransactionInterface",973],["T_DOUBLE_COLON","::",973],["T_STRING","IS_CLOSED",973],",",["T_WHITESPACE"," ",973],["T_VARIABLE","$isClosed",973],")",";",["T_WHITESPACE","\n    ",973],"}",["T_WHITESPACE","\n\n    ",974],["T_DOC_COMMENT","\/**\n     * {@inheritdoc}\n     *\n     * @return \\Magento\\Sales\\Api\\Data\\TransactionExtensionInterface|null\n     *\/",976],["T_WHITESPACE","\n    ",980],["T_PUBLIC","public",981],["T_WHITESPACE"," ",981],["T_FUNCTION","function",981],["T_WHITESPACE"," ",981],["T_STRING","getExtensionAttributes",981],"(",")",["T_WHITESPACE","\n    ",981],"{",["T_WHITESPACE","\n        ",982],["T_RETURN","return",983],["T_WHITESPACE"," ",983],["T_VARIABLE","$this",983],["T_OBJECT_OPERATOR","->",983],["T_STRING","_getExtensionAttributes",983],"(",")",";",["T_WHITESPACE","\n    ",983],"}",["T_WHITESPACE","\n\n    ",984],["T_DOC_COMMENT","\/**\n     * {@inheritdoc}\n     *\n     * @param \\Magento\\Sales\\Api\\Data\\TransactionExtensionInterface $extensionAttributes\n     * @return $this\n     *\/",986],["T_WHITESPACE","\n    ",991],["T_PUBLIC","public",992],["T_WHITESPACE"," ",992],["T_FUNCTION","function",992],["T_WHITESPACE"," ",992],["T_STRING","setExtensionAttributes",992],"(",["T_NS_SEPARATOR","\\",992],["T_STRING","Magento",992],["T_NS_SEPARATOR","\\",992],["T_STRING","Sales",992],["T_NS_SEPARATOR","\\",992],["T_STRING","Api",992],["T_NS_SEPARATOR","\\",992],["T_STRING","Data",992],["T_NS_SEPARATOR","\\",992],["T_STRING","TransactionExtensionInterface",992],["T_WHITESPACE"," ",992],["T_VARIABLE","$extensionAttributes",992],")",["T_WHITESPACE","\n    ",992],"{",["T_WHITESPACE","\n        ",993],["T_RETURN","return",994],["T_WHITESPACE"," ",994],["T_VARIABLE","$this",994],["T_OBJECT_OPERATOR","->",994],["T_STRING","_setExtensionAttributes",994],"(",["T_VARIABLE","$extensionAttributes",994],")",";",["T_WHITESPACE","\n    ",994],"}",["T_WHITESPACE","\n    ",995],["T_COMMENT","\/\/@codeCoverageIgnoreEnd\n",996],"}",["T_WHITESPACE","\n",997]]
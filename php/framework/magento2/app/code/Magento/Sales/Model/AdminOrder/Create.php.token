[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Copyright \u00c2\u00a9 2013-2017 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n *\/",2],["T_WHITESPACE","\n\n",5],["T_COMMENT","\/\/ @codingStandardsIgnoreFile\n",7],["T_WHITESPACE","\n",8],["T_NAMESPACE","namespace",9],["T_WHITESPACE"," ",9],["T_STRING","Magento",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Sales",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Model",9],["T_NS_SEPARATOR","\\",9],["T_STRING","AdminOrder",9],";",["T_WHITESPACE","\n\n",9],["T_USE","use",11],["T_WHITESPACE"," ",11],["T_STRING","Magento",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Customer",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Api",11],["T_NS_SEPARATOR","\\",11],["T_STRING","AddressMetadataInterface",11],";",["T_WHITESPACE","\n",11],["T_USE","use",12],["T_WHITESPACE"," ",12],["T_STRING","Magento",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Customer",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Model",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Metadata",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Form",12],["T_WHITESPACE"," ",12],["T_AS","as",12],["T_WHITESPACE"," ",12],["T_STRING","CustomerForm",12],";",["T_WHITESPACE","\n",12],["T_USE","use",13],["T_WHITESPACE"," ",13],["T_STRING","Magento",13],["T_NS_SEPARATOR","\\",13],["T_STRING","Quote",13],["T_NS_SEPARATOR","\\",13],["T_STRING","Model",13],["T_NS_SEPARATOR","\\",13],["T_STRING","Quote",13],["T_NS_SEPARATOR","\\",13],["T_STRING","Item",13],";",["T_WHITESPACE","\n\n",13],["T_DOC_COMMENT","\/**\n * Order create model\n * @SuppressWarnings(PHPMD.TooManyFields)\n * @SuppressWarnings(PHPMD.ExcessiveClassComplexity)\n * @SuppressWarnings(PHPMD.CouplingBetweenObjects)\n *\/",15],["T_WHITESPACE","\n",20],["T_CLASS","class",21],["T_WHITESPACE"," ",21],["T_STRING","Create",21],["T_WHITESPACE"," ",21],["T_EXTENDS","extends",21],["T_WHITESPACE"," ",21],["T_NS_SEPARATOR","\\",21],["T_STRING","Magento",21],["T_NS_SEPARATOR","\\",21],["T_STRING","Framework",21],["T_NS_SEPARATOR","\\",21],["T_STRING","DataObject",21],["T_WHITESPACE"," ",21],["T_IMPLEMENTS","implements",21],["T_WHITESPACE"," ",21],["T_NS_SEPARATOR","\\",21],["T_STRING","Magento",21],["T_NS_SEPARATOR","\\",21],["T_STRING","Checkout",21],["T_NS_SEPARATOR","\\",21],["T_STRING","Model",21],["T_NS_SEPARATOR","\\",21],["T_STRING","Cart",21],["T_NS_SEPARATOR","\\",21],["T_STRING","CartInterface",21],["T_WHITESPACE","\n",21],"{",["T_WHITESPACE","\n    ",22],["T_DOC_COMMENT","\/**\n     * Xml default email domain path\n     *\/",23],["T_WHITESPACE","\n    ",25],["T_CONST","const",26],["T_WHITESPACE"," ",26],["T_STRING","XML_PATH_DEFAULT_EMAIL_DOMAIN",26],["T_WHITESPACE"," ",26],"=",["T_WHITESPACE"," ",26],["T_CONSTANT_ENCAPSED_STRING","'customer\/create_account\/email_domain'",26],";",["T_WHITESPACE","\n\n    ",26],["T_DOC_COMMENT","\/**\n     * Quote session object\n     *\n     * @var \\Magento\\Backend\\Model\\Session\\Quote\n     *\/",28],["T_WHITESPACE","\n    ",32],["T_PROTECTED","protected",33],["T_WHITESPACE"," ",33],["T_VARIABLE","$_session",33],";",["T_WHITESPACE","\n\n    ",33],["T_DOC_COMMENT","\/**\n     * Quote customer wishlist model object\n     *\n     * @var \\Magento\\Wishlist\\Model\\Wishlist\n     *\/",35],["T_WHITESPACE","\n    ",39],["T_PROTECTED","protected",40],["T_WHITESPACE"," ",40],["T_VARIABLE","$_wishlist",40],";",["T_WHITESPACE","\n\n    ",40],["T_DOC_COMMENT","\/**\n     * Sales Quote instance\n     *\n     * @var \\Magento\\Quote\\Model\\Quote\n     *\/",42],["T_WHITESPACE","\n    ",46],["T_PROTECTED","protected",47],["T_WHITESPACE"," ",47],["T_VARIABLE","$_cart",47],";",["T_WHITESPACE","\n\n    ",47],["T_DOC_COMMENT","\/**\n     * Catalog Compare List instance\n     *\n     * @var \\Magento\\Catalog\\Model\\Product\\Compare\\ListCompare\n     *\/",49],["T_WHITESPACE","\n    ",53],["T_PROTECTED","protected",54],["T_WHITESPACE"," ",54],["T_VARIABLE","$_compareList",54],";",["T_WHITESPACE","\n\n    ",54],["T_DOC_COMMENT","\/**\n     * Re-collect quote flag\n     *\n     * @var boolean\n     *\/",56],["T_WHITESPACE","\n    ",60],["T_PROTECTED","protected",61],["T_WHITESPACE"," ",61],["T_VARIABLE","$_needCollect",61],";",["T_WHITESPACE","\n\n    ",61],["T_DOC_COMMENT","\/**\n     * Re-collect cart flag\n     *\n     * @var boolean\n     *\/",63],["T_WHITESPACE","\n    ",67],["T_PROTECTED","protected",68],["T_WHITESPACE"," ",68],["T_VARIABLE","$_needCollectCart",68],["T_WHITESPACE"," ",68],"=",["T_WHITESPACE"," ",68],["T_STRING","false",68],";",["T_WHITESPACE","\n\n    ",68],["T_DOC_COMMENT","\/**\n     * Collect (import) data and validate it flag\n     *\n     * @var boolean\n     *\/",70],["T_WHITESPACE","\n    ",74],["T_PROTECTED","protected",75],["T_WHITESPACE"," ",75],["T_VARIABLE","$_isValidate",75],["T_WHITESPACE"," ",75],"=",["T_WHITESPACE"," ",75],["T_STRING","false",75],";",["T_WHITESPACE","\n\n    ",75],["T_DOC_COMMENT","\/**\n     * Array of validate errors\n     *\n     * @var array\n     *\/",77],["T_WHITESPACE","\n    ",81],["T_PROTECTED","protected",82],["T_WHITESPACE"," ",82],["T_VARIABLE","$_errors",82],["T_WHITESPACE"," ",82],"=",["T_WHITESPACE"," ",82],"[","]",";",["T_WHITESPACE","\n\n    ",82],["T_DOC_COMMENT","\/**\n     * Quote associated with the model\n     *\n     * @var \\Magento\\Quote\\Model\\Quote\n     *\/",84],["T_WHITESPACE","\n    ",88],["T_PROTECTED","protected",89],["T_WHITESPACE"," ",89],["T_VARIABLE","$_quote",89],";",["T_WHITESPACE","\n\n    ",89],["T_DOC_COMMENT","\/**\n     * Core registry\n     *\n     * @var \\Magento\\Framework\\Registry\n     *\/",91],["T_WHITESPACE","\n    ",95],["T_PROTECTED","protected",96],["T_WHITESPACE"," ",96],["T_VARIABLE","$_coreRegistry",96],["T_WHITESPACE"," ",96],"=",["T_WHITESPACE"," ",96],["T_STRING","null",96],";",["T_WHITESPACE","\n\n    ",96],["T_DOC_COMMENT","\/**\n     * @var \\Psr\\Log\\LoggerInterface\n     *\/",98],["T_WHITESPACE","\n    ",100],["T_PROTECTED","protected",101],["T_WHITESPACE"," ",101],["T_VARIABLE","$_logger",101],";",["T_WHITESPACE","\n\n    ",101],["T_DOC_COMMENT","\/**\n     * Core event manager proxy\n     *\n     * @var \\Magento\\Framework\\Event\\ManagerInterface\n     *\/",103],["T_WHITESPACE","\n    ",107],["T_PROTECTED","protected",108],["T_WHITESPACE"," ",108],["T_VARIABLE","$_eventManager",108],["T_WHITESPACE"," ",108],"=",["T_WHITESPACE"," ",108],["T_STRING","null",108],";",["T_WHITESPACE","\n\n    ",108],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Sales\\Model\\Config\n     *\/",110],["T_WHITESPACE","\n    ",112],["T_PROTECTED","protected",113],["T_WHITESPACE"," ",113],["T_VARIABLE","$_salesConfig",113],";",["T_WHITESPACE","\n\n    ",113],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Framework\\ObjectManagerInterface\n     *\/",115],["T_WHITESPACE","\n    ",117],["T_PROTECTED","protected",118],["T_WHITESPACE"," ",118],["T_VARIABLE","$_objectManager",118],";",["T_WHITESPACE","\n\n    ",118],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Framework\\DataObject\\Copy\n     *\/",120],["T_WHITESPACE","\n    ",122],["T_PROTECTED","protected",123],["T_WHITESPACE"," ",123],["T_VARIABLE","$_objectCopyService",123],";",["T_WHITESPACE","\n\n    ",123],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Framework\\Message\\ManagerInterface\n     *\/",125],["T_WHITESPACE","\n    ",127],["T_PROTECTED","protected",128],["T_WHITESPACE"," ",128],["T_VARIABLE","$messageManager",128],";",["T_WHITESPACE","\n\n    ",128],["T_DOC_COMMENT","\/**\n     * @var Product\\Quote\\Initializer\n     *\/",130],["T_WHITESPACE","\n    ",132],["T_PROTECTED","protected",133],["T_WHITESPACE"," ",133],["T_VARIABLE","$quoteInitializer",133],";",["T_WHITESPACE","\n\n    ",133],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Customer\\Api\\CustomerRepositoryInterface\n     *\/",135],["T_WHITESPACE","\n    ",137],["T_PROTECTED","protected",138],["T_WHITESPACE"," ",138],["T_VARIABLE","$customerRepository",138],";",["T_WHITESPACE","\n\n    ",138],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Customer\\Api\\AddressRepositoryInterface\n     *\/",140],["T_WHITESPACE","\n    ",142],["T_PROTECTED","protected",143],["T_WHITESPACE"," ",143],["T_VARIABLE","$addressRepository",143],";",["T_WHITESPACE","\n\n    ",143],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Customer\\Api\\Data\\AddressInterfaceFactory\n     *\/",145],["T_WHITESPACE","\n    ",147],["T_PROTECTED","protected",148],["T_WHITESPACE"," ",148],["T_VARIABLE","$addressFactory",148],";",["T_WHITESPACE","\n\n    ",148],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Customer\\Model\\Metadata\\FormFactory\n     *\/",150],["T_WHITESPACE","\n    ",152],["T_PROTECTED","protected",153],["T_WHITESPACE"," ",153],["T_VARIABLE","$_metadataFormFactory",153],";",["T_WHITESPACE","\n\n    ",153],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Customer\\Api\\GroupRepositoryInterface\n     *\/",155],["T_WHITESPACE","\n    ",157],["T_PROTECTED","protected",158],["T_WHITESPACE"," ",158],["T_VARIABLE","$groupRepository",158],";",["T_WHITESPACE","\n\n    ",158],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Framework\\App\\Config\\ScopeConfigInterface\n     *\/",160],["T_WHITESPACE","\n    ",162],["T_PROTECTED","protected",163],["T_WHITESPACE"," ",163],["T_VARIABLE","$_scopeConfig",163],";",["T_WHITESPACE","\n\n    ",163],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\CatalogInventory\\Api\\StockRegistryInterface\n     *\/",165],["T_WHITESPACE","\n    ",167],["T_PROTECTED","protected",168],["T_WHITESPACE"," ",168],["T_VARIABLE","$stockRegistry",168],";",["T_WHITESPACE","\n\n    ",168],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Sales\\Model\\AdminOrder\\EmailSender\n     *\/",170],["T_WHITESPACE","\n    ",172],["T_PROTECTED","protected",173],["T_WHITESPACE"," ",173],["T_VARIABLE","$emailSender",173],";",["T_WHITESPACE","\n\n    ",173],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Quote\\Model\\Quote\\Item\\Updater\n     *\/",175],["T_WHITESPACE","\n    ",177],["T_PROTECTED","protected",178],["T_WHITESPACE"," ",178],["T_VARIABLE","$quoteItemUpdater",178],";",["T_WHITESPACE","\n\n    ",178],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Framework\\DataObject\\Factory\n     *\/",180],["T_WHITESPACE","\n    ",182],["T_PROTECTED","protected",183],["T_WHITESPACE"," ",183],["T_VARIABLE","$objectFactory",183],";",["T_WHITESPACE","\n\n    ",183],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Customer\\Api\\AccountManagementInterface\n     *\/",185],["T_WHITESPACE","\n    ",187],["T_PROTECTED","protected",188],["T_WHITESPACE"," ",188],["T_VARIABLE","$accountManagement",188],";",["T_WHITESPACE","\n\n    ",188],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Customer\\Api\\Data\\CustomerInterfaceFactory\n     *\/",190],["T_WHITESPACE","\n    ",192],["T_PROTECTED","protected",193],["T_WHITESPACE"," ",193],["T_VARIABLE","$customerFactory",193],";",["T_WHITESPACE","\n\n    ",193],["T_DOC_COMMENT","\/**\n     * Constructor\n     *\n     * @var \\Magento\\Customer\\Model\\Customer\\Mapper\n     *\/",195],["T_WHITESPACE","\n    ",199],["T_PROTECTED","protected",200],["T_WHITESPACE"," ",200],["T_VARIABLE","$customerMapper",200],";",["T_WHITESPACE","\n\n    ",200],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Quote\\Api\\CartRepositoryInterface\n     *\/",202],["T_WHITESPACE","\n    ",204],["T_PROTECTED","protected",205],["T_WHITESPACE"," ",205],["T_VARIABLE","$quoteRepository",205],";",["T_WHITESPACE","\n\n    ",205],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Quote\\Api\\CartManagementInterface\n     *\/",207],["T_WHITESPACE","\n    ",209],["T_PROTECTED","protected",210],["T_WHITESPACE"," ",210],["T_VARIABLE","$quoteManagement",210],";",["T_WHITESPACE","\n\n    ",210],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Framework\\Api\\DataObjectHelper\n     *\/",212],["T_WHITESPACE","\n    ",214],["T_PROTECTED","protected",215],["T_WHITESPACE"," ",215],["T_VARIABLE","$dataObjectHelper",215],";",["T_WHITESPACE","\n\n    ",215],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Sales\\Api\\OrderManagementInterface\n     *\/",217],["T_WHITESPACE","\n    ",219],["T_PROTECTED","protected",220],["T_WHITESPACE"," ",220],["T_VARIABLE","$orderManagement",220],";",["T_WHITESPACE","\n\n    ",220],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Quote\\Model\\QuoteFactory\n     *\/",222],["T_WHITESPACE","\n    ",224],["T_PROTECTED","protected",225],["T_WHITESPACE"," ",225],["T_VARIABLE","$quoteFactory",225],";",["T_WHITESPACE","\n\n    ",225],["T_DOC_COMMENT","\/**\n     * Serializer interface instance.\n     *\n     * @var \\Magento\\Framework\\Serialize\\Serializer\\Json\n     *\/",227],["T_WHITESPACE","\n    ",231],["T_PRIVATE","private",232],["T_WHITESPACE"," ",232],["T_VARIABLE","$serializer",232],";",["T_WHITESPACE","\n\n    ",232],["T_DOC_COMMENT","\/**\n     * @param \\Magento\\Framework\\ObjectManagerInterface $objectManager\n     * @param \\Magento\\Framework\\Event\\ManagerInterface $eventManager\n     * @param \\Magento\\Framework\\Registry $coreRegistry\n     * @param \\Magento\\Sales\\Model\\Config $salesConfig\n     * @param \\Magento\\Backend\\Model\\Session\\Quote $quoteSession\n     * @param \\Psr\\Log\\LoggerInterface $logger\n     * @param \\Magento\\Framework\\DataObject\\Copy $objectCopyService\n     * @param \\Magento\\Framework\\Message\\ManagerInterface $messageManager\n     * @param Product\\Quote\\Initializer $quoteInitializer\n     * @param \\Magento\\Customer\\Api\\CustomerRepositoryInterface $customerRepository\n     * @param \\Magento\\Customer\\Api\\AddressRepositoryInterface $addressRepository\n     * @param \\Magento\\Customer\\Api\\Data\\AddressInterfaceFactory $addressFactory\n     * @param \\Magento\\Customer\\Model\\Metadata\\FormFactory $metadataFormFactory\n     * @param \\Magento\\Customer\\Api\\GroupRepositoryInterface $groupRepository\n     * @param \\Magento\\Framework\\App\\Config\\ScopeConfigInterface $scopeConfig\n     * @param EmailSender $emailSender\n     * @param \\Magento\\CatalogInventory\\Api\\StockRegistryInterface $stockRegistry\n     * @param Item\\Updater $quoteItemUpdater\n     * @param \\Magento\\Framework\\DataObject\\Factory $objectFactory\n     * @param \\Magento\\Quote\\Api\\CartRepositoryInterface $quoteRepository\n     * @param \\Magento\\Customer\\Api\\AccountManagementInterface $accountManagement\n     * @param \\Magento\\Customer\\Api\\Data\\CustomerInterfaceFactory $customerFactory\n     * @param \\Magento\\Customer\\Model\\Customer\\Mapper $customerMapper\n     * @param \\Magento\\Quote\\Api\\CartManagementInterface $quoteManagement\n     * @param \\Magento\\Framework\\Api\\DataObjectHelper $dataObjectHelper\n     * @param \\Magento\\Sales\\Api\\OrderManagementInterface $orderManagement\n     * @param \\Magento\\Quote\\Model\\QuoteFactory $quoteFactory\n     * @param array $data\n     * @param \\Magento\\Framework\\Serialize\\Serializer\\Json|null $serializer\n     * @SuppressWarnings(PHPMD.ExcessiveParameterList)\n     *\/",234],["T_WHITESPACE","\n    ",265],["T_PUBLIC","public",266],["T_WHITESPACE"," ",266],["T_FUNCTION","function",266],["T_WHITESPACE"," ",266],["T_STRING","__construct",266],"(",["T_WHITESPACE","\n        ",266],["T_NS_SEPARATOR","\\",267],["T_STRING","Magento",267],["T_NS_SEPARATOR","\\",267],["T_STRING","Framework",267],["T_NS_SEPARATOR","\\",267],["T_STRING","ObjectManagerInterface",267],["T_WHITESPACE"," ",267],["T_VARIABLE","$objectManager",267],",",["T_WHITESPACE","\n        ",267],["T_NS_SEPARATOR","\\",268],["T_STRING","Magento",268],["T_NS_SEPARATOR","\\",268],["T_STRING","Framework",268],["T_NS_SEPARATOR","\\",268],["T_STRING","Event",268],["T_NS_SEPARATOR","\\",268],["T_STRING","ManagerInterface",268],["T_WHITESPACE"," ",268],["T_VARIABLE","$eventManager",268],",",["T_WHITESPACE","\n        ",268],["T_NS_SEPARATOR","\\",269],["T_STRING","Magento",269],["T_NS_SEPARATOR","\\",269],["T_STRING","Framework",269],["T_NS_SEPARATOR","\\",269],["T_STRING","Registry",269],["T_WHITESPACE"," ",269],["T_VARIABLE","$coreRegistry",269],",",["T_WHITESPACE","\n        ",269],["T_NS_SEPARATOR","\\",270],["T_STRING","Magento",270],["T_NS_SEPARATOR","\\",270],["T_STRING","Sales",270],["T_NS_SEPARATOR","\\",270],["T_STRING","Model",270],["T_NS_SEPARATOR","\\",270],["T_STRING","Config",270],["T_WHITESPACE"," ",270],["T_VARIABLE","$salesConfig",270],",",["T_WHITESPACE","\n        ",270],["T_NS_SEPARATOR","\\",271],["T_STRING","Magento",271],["T_NS_SEPARATOR","\\",271],["T_STRING","Backend",271],["T_NS_SEPARATOR","\\",271],["T_STRING","Model",271],["T_NS_SEPARATOR","\\",271],["T_STRING","Session",271],["T_NS_SEPARATOR","\\",271],["T_STRING","Quote",271],["T_WHITESPACE"," ",271],["T_VARIABLE","$quoteSession",271],",",["T_WHITESPACE","\n        ",271],["T_NS_SEPARATOR","\\",272],["T_STRING","Psr",272],["T_NS_SEPARATOR","\\",272],["T_STRING","Log",272],["T_NS_SEPARATOR","\\",272],["T_STRING","LoggerInterface",272],["T_WHITESPACE"," ",272],["T_VARIABLE","$logger",272],",",["T_WHITESPACE","\n        ",272],["T_NS_SEPARATOR","\\",273],["T_STRING","Magento",273],["T_NS_SEPARATOR","\\",273],["T_STRING","Framework",273],["T_NS_SEPARATOR","\\",273],["T_STRING","DataObject",273],["T_NS_SEPARATOR","\\",273],["T_STRING","Copy",273],["T_WHITESPACE"," ",273],["T_VARIABLE","$objectCopyService",273],",",["T_WHITESPACE","\n        ",273],["T_NS_SEPARATOR","\\",274],["T_STRING","Magento",274],["T_NS_SEPARATOR","\\",274],["T_STRING","Framework",274],["T_NS_SEPARATOR","\\",274],["T_STRING","Message",274],["T_NS_SEPARATOR","\\",274],["T_STRING","ManagerInterface",274],["T_WHITESPACE"," ",274],["T_VARIABLE","$messageManager",274],",",["T_WHITESPACE","\n        ",274],["T_STRING","Product",275],["T_NS_SEPARATOR","\\",275],["T_STRING","Quote",275],["T_NS_SEPARATOR","\\",275],["T_STRING","Initializer",275],["T_WHITESPACE"," ",275],["T_VARIABLE","$quoteInitializer",275],",",["T_WHITESPACE","\n        ",275],["T_NS_SEPARATOR","\\",276],["T_STRING","Magento",276],["T_NS_SEPARATOR","\\",276],["T_STRING","Customer",276],["T_NS_SEPARATOR","\\",276],["T_STRING","Api",276],["T_NS_SEPARATOR","\\",276],["T_STRING","CustomerRepositoryInterface",276],["T_WHITESPACE"," ",276],["T_VARIABLE","$customerRepository",276],",",["T_WHITESPACE","\n        ",276],["T_NS_SEPARATOR","\\",277],["T_STRING","Magento",277],["T_NS_SEPARATOR","\\",277],["T_STRING","Customer",277],["T_NS_SEPARATOR","\\",277],["T_STRING","Api",277],["T_NS_SEPARATOR","\\",277],["T_STRING","AddressRepositoryInterface",277],["T_WHITESPACE"," ",277],["T_VARIABLE","$addressRepository",277],",",["T_WHITESPACE","\n        ",277],["T_NS_SEPARATOR","\\",278],["T_STRING","Magento",278],["T_NS_SEPARATOR","\\",278],["T_STRING","Customer",278],["T_NS_SEPARATOR","\\",278],["T_STRING","Api",278],["T_NS_SEPARATOR","\\",278],["T_STRING","Data",278],["T_NS_SEPARATOR","\\",278],["T_STRING","AddressInterfaceFactory",278],["T_WHITESPACE"," ",278],["T_VARIABLE","$addressFactory",278],",",["T_WHITESPACE","\n        ",278],["T_NS_SEPARATOR","\\",279],["T_STRING","Magento",279],["T_NS_SEPARATOR","\\",279],["T_STRING","Customer",279],["T_NS_SEPARATOR","\\",279],["T_STRING","Model",279],["T_NS_SEPARATOR","\\",279],["T_STRING","Metadata",279],["T_NS_SEPARATOR","\\",279],["T_STRING","FormFactory",279],["T_WHITESPACE"," ",279],["T_VARIABLE","$metadataFormFactory",279],",",["T_WHITESPACE","\n        ",279],["T_NS_SEPARATOR","\\",280],["T_STRING","Magento",280],["T_NS_SEPARATOR","\\",280],["T_STRING","Customer",280],["T_NS_SEPARATOR","\\",280],["T_STRING","Api",280],["T_NS_SEPARATOR","\\",280],["T_STRING","GroupRepositoryInterface",280],["T_WHITESPACE"," ",280],["T_VARIABLE","$groupRepository",280],",",["T_WHITESPACE","\n        ",280],["T_NS_SEPARATOR","\\",281],["T_STRING","Magento",281],["T_NS_SEPARATOR","\\",281],["T_STRING","Framework",281],["T_NS_SEPARATOR","\\",281],["T_STRING","App",281],["T_NS_SEPARATOR","\\",281],["T_STRING","Config",281],["T_NS_SEPARATOR","\\",281],["T_STRING","ScopeConfigInterface",281],["T_WHITESPACE"," ",281],["T_VARIABLE","$scopeConfig",281],",",["T_WHITESPACE","\n        ",281],["T_NS_SEPARATOR","\\",282],["T_STRING","Magento",282],["T_NS_SEPARATOR","\\",282],["T_STRING","Sales",282],["T_NS_SEPARATOR","\\",282],["T_STRING","Model",282],["T_NS_SEPARATOR","\\",282],["T_STRING","AdminOrder",282],["T_NS_SEPARATOR","\\",282],["T_STRING","EmailSender",282],["T_WHITESPACE"," ",282],["T_VARIABLE","$emailSender",282],",",["T_WHITESPACE","\n        ",282],["T_NS_SEPARATOR","\\",283],["T_STRING","Magento",283],["T_NS_SEPARATOR","\\",283],["T_STRING","CatalogInventory",283],["T_NS_SEPARATOR","\\",283],["T_STRING","Api",283],["T_NS_SEPARATOR","\\",283],["T_STRING","StockRegistryInterface",283],["T_WHITESPACE"," ",283],["T_VARIABLE","$stockRegistry",283],",",["T_WHITESPACE","\n        ",283],["T_NS_SEPARATOR","\\",284],["T_STRING","Magento",284],["T_NS_SEPARATOR","\\",284],["T_STRING","Quote",284],["T_NS_SEPARATOR","\\",284],["T_STRING","Model",284],["T_NS_SEPARATOR","\\",284],["T_STRING","Quote",284],["T_NS_SEPARATOR","\\",284],["T_STRING","Item",284],["T_NS_SEPARATOR","\\",284],["T_STRING","Updater",284],["T_WHITESPACE"," ",284],["T_VARIABLE","$quoteItemUpdater",284],",",["T_WHITESPACE","\n        ",284],["T_NS_SEPARATOR","\\",285],["T_STRING","Magento",285],["T_NS_SEPARATOR","\\",285],["T_STRING","Framework",285],["T_NS_SEPARATOR","\\",285],["T_STRING","DataObject",285],["T_NS_SEPARATOR","\\",285],["T_STRING","Factory",285],["T_WHITESPACE"," ",285],["T_VARIABLE","$objectFactory",285],",",["T_WHITESPACE","\n        ",285],["T_NS_SEPARATOR","\\",286],["T_STRING","Magento",286],["T_NS_SEPARATOR","\\",286],["T_STRING","Quote",286],["T_NS_SEPARATOR","\\",286],["T_STRING","Api",286],["T_NS_SEPARATOR","\\",286],["T_STRING","CartRepositoryInterface",286],["T_WHITESPACE"," ",286],["T_VARIABLE","$quoteRepository",286],",",["T_WHITESPACE","\n        ",286],["T_NS_SEPARATOR","\\",287],["T_STRING","Magento",287],["T_NS_SEPARATOR","\\",287],["T_STRING","Customer",287],["T_NS_SEPARATOR","\\",287],["T_STRING","Api",287],["T_NS_SEPARATOR","\\",287],["T_STRING","AccountManagementInterface",287],["T_WHITESPACE"," ",287],["T_VARIABLE","$accountManagement",287],",",["T_WHITESPACE","\n        ",287],["T_NS_SEPARATOR","\\",288],["T_STRING","Magento",288],["T_NS_SEPARATOR","\\",288],["T_STRING","Customer",288],["T_NS_SEPARATOR","\\",288],["T_STRING","Api",288],["T_NS_SEPARATOR","\\",288],["T_STRING","Data",288],["T_NS_SEPARATOR","\\",288],["T_STRING","CustomerInterfaceFactory",288],["T_WHITESPACE"," ",288],["T_VARIABLE","$customerFactory",288],",",["T_WHITESPACE","\n        ",288],["T_NS_SEPARATOR","\\",289],["T_STRING","Magento",289],["T_NS_SEPARATOR","\\",289],["T_STRING","Customer",289],["T_NS_SEPARATOR","\\",289],["T_STRING","Model",289],["T_NS_SEPARATOR","\\",289],["T_STRING","Customer",289],["T_NS_SEPARATOR","\\",289],["T_STRING","Mapper",289],["T_WHITESPACE"," ",289],["T_VARIABLE","$customerMapper",289],",",["T_WHITESPACE","\n        ",289],["T_NS_SEPARATOR","\\",290],["T_STRING","Magento",290],["T_NS_SEPARATOR","\\",290],["T_STRING","Quote",290],["T_NS_SEPARATOR","\\",290],["T_STRING","Api",290],["T_NS_SEPARATOR","\\",290],["T_STRING","CartManagementInterface",290],["T_WHITESPACE"," ",290],["T_VARIABLE","$quoteManagement",290],",",["T_WHITESPACE","\n        ",290],["T_NS_SEPARATOR","\\",291],["T_STRING","Magento",291],["T_NS_SEPARATOR","\\",291],["T_STRING","Framework",291],["T_NS_SEPARATOR","\\",291],["T_STRING","Api",291],["T_NS_SEPARATOR","\\",291],["T_STRING","DataObjectHelper",291],["T_WHITESPACE"," ",291],["T_VARIABLE","$dataObjectHelper",291],",",["T_WHITESPACE","\n        ",291],["T_NS_SEPARATOR","\\",292],["T_STRING","Magento",292],["T_NS_SEPARATOR","\\",292],["T_STRING","Sales",292],["T_NS_SEPARATOR","\\",292],["T_STRING","Api",292],["T_NS_SEPARATOR","\\",292],["T_STRING","OrderManagementInterface",292],["T_WHITESPACE"," ",292],["T_VARIABLE","$orderManagement",292],",",["T_WHITESPACE","\n        ",292],["T_NS_SEPARATOR","\\",293],["T_STRING","Magento",293],["T_NS_SEPARATOR","\\",293],["T_STRING","Quote",293],["T_NS_SEPARATOR","\\",293],["T_STRING","Model",293],["T_NS_SEPARATOR","\\",293],["T_STRING","QuoteFactory",293],["T_WHITESPACE"," ",293],["T_VARIABLE","$quoteFactory",293],",",["T_WHITESPACE","\n        ",293],["T_ARRAY","array",294],["T_WHITESPACE"," ",294],["T_VARIABLE","$data",294],["T_WHITESPACE"," ",294],"=",["T_WHITESPACE"," ",294],"[","]",",",["T_WHITESPACE","\n        ",294],["T_NS_SEPARATOR","\\",295],["T_STRING","Magento",295],["T_NS_SEPARATOR","\\",295],["T_STRING","Framework",295],["T_NS_SEPARATOR","\\",295],["T_STRING","Serialize",295],["T_NS_SEPARATOR","\\",295],["T_STRING","Serializer",295],["T_NS_SEPARATOR","\\",295],["T_STRING","Json",295],["T_WHITESPACE"," ",295],["T_VARIABLE","$serializer",295],["T_WHITESPACE"," ",295],"=",["T_WHITESPACE"," ",295],["T_STRING","null",295],["T_WHITESPACE","\n    ",295],")",["T_WHITESPACE"," ",296],"{",["T_WHITESPACE","\n        ",296],["T_VARIABLE","$this",297],["T_OBJECT_OPERATOR","->",297],["T_STRING","_objectManager",297],["T_WHITESPACE"," ",297],"=",["T_WHITESPACE"," ",297],["T_VARIABLE","$objectManager",297],";",["T_WHITESPACE","\n        ",297],["T_VARIABLE","$this",298],["T_OBJECT_OPERATOR","->",298],["T_STRING","_eventManager",298],["T_WHITESPACE"," ",298],"=",["T_WHITESPACE"," ",298],["T_VARIABLE","$eventManager",298],";",["T_WHITESPACE","\n        ",298],["T_VARIABLE","$this",299],["T_OBJECT_OPERATOR","->",299],["T_STRING","_coreRegistry",299],["T_WHITESPACE"," ",299],"=",["T_WHITESPACE"," ",299],["T_VARIABLE","$coreRegistry",299],";",["T_WHITESPACE","\n        ",299],["T_VARIABLE","$this",300],["T_OBJECT_OPERATOR","->",300],["T_STRING","_salesConfig",300],["T_WHITESPACE"," ",300],"=",["T_WHITESPACE"," ",300],["T_VARIABLE","$salesConfig",300],";",["T_WHITESPACE","\n        ",300],["T_VARIABLE","$this",301],["T_OBJECT_OPERATOR","->",301],["T_STRING","_session",301],["T_WHITESPACE"," ",301],"=",["T_WHITESPACE"," ",301],["T_VARIABLE","$quoteSession",301],";",["T_WHITESPACE","\n        ",301],["T_VARIABLE","$this",302],["T_OBJECT_OPERATOR","->",302],["T_STRING","_logger",302],["T_WHITESPACE"," ",302],"=",["T_WHITESPACE"," ",302],["T_VARIABLE","$logger",302],";",["T_WHITESPACE","\n        ",302],["T_VARIABLE","$this",303],["T_OBJECT_OPERATOR","->",303],["T_STRING","_objectCopyService",303],["T_WHITESPACE"," ",303],"=",["T_WHITESPACE"," ",303],["T_VARIABLE","$objectCopyService",303],";",["T_WHITESPACE","\n        ",303],["T_VARIABLE","$this",304],["T_OBJECT_OPERATOR","->",304],["T_STRING","quoteInitializer",304],["T_WHITESPACE"," ",304],"=",["T_WHITESPACE"," ",304],["T_VARIABLE","$quoteInitializer",304],";",["T_WHITESPACE","\n        ",304],["T_VARIABLE","$this",305],["T_OBJECT_OPERATOR","->",305],["T_STRING","messageManager",305],["T_WHITESPACE"," ",305],"=",["T_WHITESPACE"," ",305],["T_VARIABLE","$messageManager",305],";",["T_WHITESPACE","\n        ",305],["T_VARIABLE","$this",306],["T_OBJECT_OPERATOR","->",306],["T_STRING","customerRepository",306],["T_WHITESPACE"," ",306],"=",["T_WHITESPACE"," ",306],["T_VARIABLE","$customerRepository",306],";",["T_WHITESPACE","\n        ",306],["T_VARIABLE","$this",307],["T_OBJECT_OPERATOR","->",307],["T_STRING","addressRepository",307],["T_WHITESPACE"," ",307],"=",["T_WHITESPACE"," ",307],["T_VARIABLE","$addressRepository",307],";",["T_WHITESPACE","\n        ",307],["T_VARIABLE","$this",308],["T_OBJECT_OPERATOR","->",308],["T_STRING","addressFactory",308],["T_WHITESPACE"," ",308],"=",["T_WHITESPACE"," ",308],["T_VARIABLE","$addressFactory",308],";",["T_WHITESPACE","\n        ",308],["T_VARIABLE","$this",309],["T_OBJECT_OPERATOR","->",309],["T_STRING","_metadataFormFactory",309],["T_WHITESPACE"," ",309],"=",["T_WHITESPACE"," ",309],["T_VARIABLE","$metadataFormFactory",309],";",["T_WHITESPACE","\n        ",309],["T_VARIABLE","$this",310],["T_OBJECT_OPERATOR","->",310],["T_STRING","customerFactory",310],["T_WHITESPACE"," ",310],"=",["T_WHITESPACE"," ",310],["T_VARIABLE","$customerFactory",310],";",["T_WHITESPACE","\n        ",310],["T_VARIABLE","$this",311],["T_OBJECT_OPERATOR","->",311],["T_STRING","groupRepository",311],["T_WHITESPACE"," ",311],"=",["T_WHITESPACE"," ",311],["T_VARIABLE","$groupRepository",311],";",["T_WHITESPACE","\n        ",311],["T_VARIABLE","$this",312],["T_OBJECT_OPERATOR","->",312],["T_STRING","_scopeConfig",312],["T_WHITESPACE"," ",312],"=",["T_WHITESPACE"," ",312],["T_VARIABLE","$scopeConfig",312],";",["T_WHITESPACE","\n        ",312],["T_VARIABLE","$this",313],["T_OBJECT_OPERATOR","->",313],["T_STRING","emailSender",313],["T_WHITESPACE"," ",313],"=",["T_WHITESPACE"," ",313],["T_VARIABLE","$emailSender",313],";",["T_WHITESPACE","\n        ",313],["T_VARIABLE","$this",314],["T_OBJECT_OPERATOR","->",314],["T_STRING","stockRegistry",314],["T_WHITESPACE"," ",314],"=",["T_WHITESPACE"," ",314],["T_VARIABLE","$stockRegistry",314],";",["T_WHITESPACE","\n        ",314],["T_VARIABLE","$this",315],["T_OBJECT_OPERATOR","->",315],["T_STRING","quoteItemUpdater",315],["T_WHITESPACE"," ",315],"=",["T_WHITESPACE"," ",315],["T_VARIABLE","$quoteItemUpdater",315],";",["T_WHITESPACE","\n        ",315],["T_VARIABLE","$this",316],["T_OBJECT_OPERATOR","->",316],["T_STRING","objectFactory",316],["T_WHITESPACE"," ",316],"=",["T_WHITESPACE"," ",316],["T_VARIABLE","$objectFactory",316],";",["T_WHITESPACE","\n        ",316],["T_VARIABLE","$this",317],["T_OBJECT_OPERATOR","->",317],["T_STRING","quoteRepository",317],["T_WHITESPACE"," ",317],"=",["T_WHITESPACE"," ",317],["T_VARIABLE","$quoteRepository",317],";",["T_WHITESPACE","\n        ",317],["T_VARIABLE","$this",318],["T_OBJECT_OPERATOR","->",318],["T_STRING","accountManagement",318],["T_WHITESPACE"," ",318],"=",["T_WHITESPACE"," ",318],["T_VARIABLE","$accountManagement",318],";",["T_WHITESPACE","\n        ",318],["T_VARIABLE","$this",319],["T_OBJECT_OPERATOR","->",319],["T_STRING","customerMapper",319],["T_WHITESPACE"," ",319],"=",["T_WHITESPACE"," ",319],["T_VARIABLE","$customerMapper",319],";",["T_WHITESPACE","\n        ",319],["T_VARIABLE","$this",320],["T_OBJECT_OPERATOR","->",320],["T_STRING","quoteManagement",320],["T_WHITESPACE"," ",320],"=",["T_WHITESPACE"," ",320],["T_VARIABLE","$quoteManagement",320],";",["T_WHITESPACE","\n        ",320],["T_VARIABLE","$this",321],["T_OBJECT_OPERATOR","->",321],["T_STRING","dataObjectHelper",321],["T_WHITESPACE"," ",321],"=",["T_WHITESPACE"," ",321],["T_VARIABLE","$dataObjectHelper",321],";",["T_WHITESPACE","\n        ",321],["T_VARIABLE","$this",322],["T_OBJECT_OPERATOR","->",322],["T_STRING","orderManagement",322],["T_WHITESPACE"," ",322],"=",["T_WHITESPACE"," ",322],["T_VARIABLE","$orderManagement",322],";",["T_WHITESPACE","\n        ",322],["T_VARIABLE","$this",323],["T_OBJECT_OPERATOR","->",323],["T_STRING","quoteFactory",323],["T_WHITESPACE"," ",323],"=",["T_WHITESPACE"," ",323],["T_VARIABLE","$quoteFactory",323],";",["T_WHITESPACE","\n        ",323],["T_VARIABLE","$this",324],["T_OBJECT_OPERATOR","->",324],["T_STRING","serializer",324],["T_WHITESPACE"," ",324],"=",["T_WHITESPACE"," ",324],["T_VARIABLE","$serializer",324],["T_WHITESPACE"," ",324],"?",":",["T_WHITESPACE"," ",324],["T_NS_SEPARATOR","\\",324],["T_STRING","Magento",324],["T_NS_SEPARATOR","\\",324],["T_STRING","Framework",324],["T_NS_SEPARATOR","\\",324],["T_STRING","App",324],["T_NS_SEPARATOR","\\",324],["T_STRING","ObjectManager",324],["T_DOUBLE_COLON","::",324],["T_STRING","getInstance",324],"(",")",["T_WHITESPACE","\n            ",324],["T_OBJECT_OPERATOR","->",325],["T_STRING","get",325],"(",["T_NS_SEPARATOR","\\",325],["T_STRING","Magento",325],["T_NS_SEPARATOR","\\",325],["T_STRING","Framework",325],["T_NS_SEPARATOR","\\",325],["T_STRING","Serialize",325],["T_NS_SEPARATOR","\\",325],["T_STRING","Serializer",325],["T_NS_SEPARATOR","\\",325],["T_STRING","Json",325],["T_DOUBLE_COLON","::",325],["T_CLASS","class",325],")",";",["T_WHITESPACE","\n        ",325],["T_STRING","parent",326],["T_DOUBLE_COLON","::",326],["T_STRING","__construct",326],"(",["T_VARIABLE","$data",326],")",";",["T_WHITESPACE","\n    ",326],"}",["T_WHITESPACE","\n\n    ",327],["T_DOC_COMMENT","\/**\n     * Set validate data in import data flag\n     *\n     * @param boolean $flag\n     * @return $this\n     *\/",329],["T_WHITESPACE","\n    ",334],["T_PUBLIC","public",335],["T_WHITESPACE"," ",335],["T_FUNCTION","function",335],["T_WHITESPACE"," ",335],["T_STRING","setIsValidate",335],"(",["T_VARIABLE","$flag",335],")",["T_WHITESPACE","\n    ",335],"{",["T_WHITESPACE","\n        ",336],["T_VARIABLE","$this",337],["T_OBJECT_OPERATOR","->",337],["T_STRING","_isValidate",337],["T_WHITESPACE"," ",337],"=",["T_WHITESPACE"," ",337],["T_BOOL_CAST","(bool)",337],["T_VARIABLE","$flag",337],";",["T_WHITESPACE","\n        ",337],["T_RETURN","return",338],["T_WHITESPACE"," ",338],["T_VARIABLE","$this",338],";",["T_WHITESPACE","\n    ",338],"}",["T_WHITESPACE","\n\n    ",339],["T_DOC_COMMENT","\/**\n     * Return is validate data in import flag\n     *\n     * @return boolean\n     * @SuppressWarnings(PHPMD.BooleanGetMethodName)\n     *\/",341],["T_WHITESPACE","\n    ",346],["T_PUBLIC","public",347],["T_WHITESPACE"," ",347],["T_FUNCTION","function",347],["T_WHITESPACE"," ",347],["T_STRING","getIsValidate",347],"(",")",["T_WHITESPACE","\n    ",347],"{",["T_WHITESPACE","\n        ",348],["T_RETURN","return",349],["T_WHITESPACE"," ",349],["T_VARIABLE","$this",349],["T_OBJECT_OPERATOR","->",349],["T_STRING","_isValidate",349],";",["T_WHITESPACE","\n    ",349],"}",["T_WHITESPACE","\n\n    ",350],["T_DOC_COMMENT","\/**\n     * Retrieve quote item\n     *\n     * @param int|\\Magento\\Quote\\Model\\Quote\\Item $item\n     * @return \\Magento\\Quote\\Model\\Quote\\Item|false\n     *\/",352],["T_WHITESPACE","\n    ",357],["T_PROTECTED","protected",358],["T_WHITESPACE"," ",358],["T_FUNCTION","function",358],["T_WHITESPACE"," ",358],["T_STRING","_getQuoteItem",358],"(",["T_VARIABLE","$item",358],")",["T_WHITESPACE","\n    ",358],"{",["T_WHITESPACE","\n        ",359],["T_IF","if",360],["T_WHITESPACE"," ",360],"(",["T_VARIABLE","$item",360],["T_WHITESPACE"," ",360],["T_INSTANCEOF","instanceof",360],["T_WHITESPACE"," ",360],["T_NS_SEPARATOR","\\",360],["T_STRING","Magento",360],["T_NS_SEPARATOR","\\",360],["T_STRING","Quote",360],["T_NS_SEPARATOR","\\",360],["T_STRING","Model",360],["T_NS_SEPARATOR","\\",360],["T_STRING","Quote",360],["T_NS_SEPARATOR","\\",360],["T_STRING","Item",360],")",["T_WHITESPACE"," ",360],"{",["T_WHITESPACE","\n            ",360],["T_RETURN","return",361],["T_WHITESPACE"," ",361],["T_VARIABLE","$item",361],";",["T_WHITESPACE","\n        ",361],"}",["T_WHITESPACE"," ",362],["T_ELSEIF","elseif",362],["T_WHITESPACE"," ",362],"(",["T_STRING","is_numeric",362],"(",["T_VARIABLE","$item",362],")",")",["T_WHITESPACE"," ",362],"{",["T_WHITESPACE","\n            ",362],["T_RETURN","return",363],["T_WHITESPACE"," ",363],["T_VARIABLE","$this",363],["T_OBJECT_OPERATOR","->",363],["T_STRING","getSession",363],"(",")",["T_OBJECT_OPERATOR","->",363],["T_STRING","getQuote",363],"(",")",["T_OBJECT_OPERATOR","->",363],["T_STRING","getItemById",363],"(",["T_VARIABLE","$item",363],")",";",["T_WHITESPACE","\n        ",363],"}",["T_WHITESPACE","\n\n        ",364],["T_RETURN","return",366],["T_WHITESPACE"," ",366],["T_STRING","false",366],";",["T_WHITESPACE","\n    ",366],"}",["T_WHITESPACE","\n\n    ",367],["T_DOC_COMMENT","\/**\n     * Initialize data for price rules\n     *\n     * @return $this\n     *\/",369],["T_WHITESPACE","\n    ",373],["T_PUBLIC","public",374],["T_WHITESPACE"," ",374],["T_FUNCTION","function",374],["T_WHITESPACE"," ",374],["T_STRING","initRuleData",374],"(",")",["T_WHITESPACE","\n    ",374],"{",["T_WHITESPACE","\n        ",375],["T_VARIABLE","$this",376],["T_OBJECT_OPERATOR","->",376],["T_STRING","_coreRegistry",376],["T_OBJECT_OPERATOR","->",376],["T_STRING","register",376],"(",["T_WHITESPACE","\n            ",376],["T_CONSTANT_ENCAPSED_STRING","'rule_data'",377],",",["T_WHITESPACE","\n            ",377],["T_NEW","new",378],["T_WHITESPACE"," ",378],["T_NS_SEPARATOR","\\",378],["T_STRING","Magento",378],["T_NS_SEPARATOR","\\",378],["T_STRING","Framework",378],["T_NS_SEPARATOR","\\",378],["T_STRING","DataObject",378],"(",["T_WHITESPACE","\n                ",378],"[",["T_WHITESPACE","\n                    ",379],["T_CONSTANT_ENCAPSED_STRING","'store_id'",380],["T_WHITESPACE"," ",380],["T_DOUBLE_ARROW","=>",380],["T_WHITESPACE"," ",380],["T_VARIABLE","$this",380],["T_OBJECT_OPERATOR","->",380],["T_STRING","_session",380],["T_OBJECT_OPERATOR","->",380],["T_STRING","getStore",380],"(",")",["T_OBJECT_OPERATOR","->",380],["T_STRING","getId",380],"(",")",",",["T_WHITESPACE","\n                    ",380],["T_CONSTANT_ENCAPSED_STRING","'website_id'",381],["T_WHITESPACE"," ",381],["T_DOUBLE_ARROW","=>",381],["T_WHITESPACE"," ",381],["T_VARIABLE","$this",381],["T_OBJECT_OPERATOR","->",381],["T_STRING","_session",381],["T_OBJECT_OPERATOR","->",381],["T_STRING","getStore",381],"(",")",["T_OBJECT_OPERATOR","->",381],["T_STRING","getWebsiteId",381],"(",")",",",["T_WHITESPACE","\n                    ",381],["T_CONSTANT_ENCAPSED_STRING","'customer_group_id'",382],["T_WHITESPACE"," ",382],["T_DOUBLE_ARROW","=>",382],["T_WHITESPACE"," ",382],["T_VARIABLE","$this",382],["T_OBJECT_OPERATOR","->",382],["T_STRING","getCustomerGroupId",382],"(",")",["T_WHITESPACE","\n                ",382],"]",["T_WHITESPACE","\n            ",383],")",["T_WHITESPACE","\n        ",384],")",";",["T_WHITESPACE","\n\n        ",385],["T_RETURN","return",387],["T_WHITESPACE"," ",387],["T_VARIABLE","$this",387],";",["T_WHITESPACE","\n    ",387],"}",["T_WHITESPACE","\n\n    ",388],["T_DOC_COMMENT","\/**\n     * Set collect totals flag for quote\n     *\n     * @param   bool $flag\n     * @return $this\n     *\/",390],["T_WHITESPACE","\n    ",395],["T_PUBLIC","public",396],["T_WHITESPACE"," ",396],["T_FUNCTION","function",396],["T_WHITESPACE"," ",396],["T_STRING","setRecollect",396],"(",["T_VARIABLE","$flag",396],")",["T_WHITESPACE","\n    ",396],"{",["T_WHITESPACE","\n        ",397],["T_VARIABLE","$this",398],["T_OBJECT_OPERATOR","->",398],["T_STRING","_needCollect",398],["T_WHITESPACE"," ",398],"=",["T_WHITESPACE"," ",398],["T_VARIABLE","$flag",398],";",["T_WHITESPACE","\n        ",398],["T_RETURN","return",399],["T_WHITESPACE"," ",399],["T_VARIABLE","$this",399],";",["T_WHITESPACE","\n    ",399],"}",["T_WHITESPACE","\n\n    ",400],["T_DOC_COMMENT","\/**\n     * Recollect totals for customer cart.\n     * Set recollect totals flag for quote\n     *\n     * @return $this\n     *\/",402],["T_WHITESPACE","\n    ",407],["T_PUBLIC","public",408],["T_WHITESPACE"," ",408],["T_FUNCTION","function",408],["T_WHITESPACE"," ",408],["T_STRING","recollectCart",408],"(",")",["T_WHITESPACE","\n    ",408],"{",["T_WHITESPACE","\n        ",409],["T_IF","if",410],["T_WHITESPACE"," ",410],"(",["T_VARIABLE","$this",410],["T_OBJECT_OPERATOR","->",410],["T_STRING","_needCollectCart",410],["T_WHITESPACE"," ",410],["T_IS_IDENTICAL","===",410],["T_WHITESPACE"," ",410],["T_STRING","true",410],")",["T_WHITESPACE"," ",410],"{",["T_WHITESPACE","\n            ",410],["T_VARIABLE","$this",411],["T_OBJECT_OPERATOR","->",411],["T_STRING","getCustomerCart",411],"(",")",["T_OBJECT_OPERATOR","->",411],["T_STRING","collectTotals",411],"(",")",";",["T_WHITESPACE","\n            ",411],["T_VARIABLE","$this",412],["T_OBJECT_OPERATOR","->",412],["T_STRING","quoteRepository",412],["T_OBJECT_OPERATOR","->",412],["T_STRING","save",412],"(",["T_VARIABLE","$this",412],["T_OBJECT_OPERATOR","->",412],["T_STRING","getCustomerCart",412],"(",")",")",";",["T_WHITESPACE","\n        ",412],"}",["T_WHITESPACE","\n        ",413],["T_VARIABLE","$this",414],["T_OBJECT_OPERATOR","->",414],["T_STRING","setRecollect",414],"(",["T_STRING","true",414],")",";",["T_WHITESPACE","\n\n        ",414],["T_RETURN","return",416],["T_WHITESPACE"," ",416],["T_VARIABLE","$this",416],";",["T_WHITESPACE","\n    ",416],"}",["T_WHITESPACE","\n\n    ",417],["T_DOC_COMMENT","\/**\n     * Quote saving\n     *\n     * @return $this\n     *\/",419],["T_WHITESPACE","\n    ",423],["T_PUBLIC","public",424],["T_WHITESPACE"," ",424],["T_FUNCTION","function",424],["T_WHITESPACE"," ",424],["T_STRING","saveQuote",424],"(",")",["T_WHITESPACE","\n    ",424],"{",["T_WHITESPACE","\n        ",425],["T_IF","if",426],["T_WHITESPACE"," ",426],"(","!",["T_VARIABLE","$this",426],["T_OBJECT_OPERATOR","->",426],["T_STRING","getQuote",426],"(",")",["T_OBJECT_OPERATOR","->",426],["T_STRING","getId",426],"(",")",")",["T_WHITESPACE"," ",426],"{",["T_WHITESPACE","\n            ",426],["T_RETURN","return",427],["T_WHITESPACE"," ",427],["T_VARIABLE","$this",427],";",["T_WHITESPACE","\n        ",427],"}",["T_WHITESPACE","\n\n        ",428],["T_IF","if",430],["T_WHITESPACE"," ",430],"(",["T_VARIABLE","$this",430],["T_OBJECT_OPERATOR","->",430],["T_STRING","_needCollect",430],")",["T_WHITESPACE"," ",430],"{",["T_WHITESPACE","\n            ",430],["T_VARIABLE","$this",431],["T_OBJECT_OPERATOR","->",431],["T_STRING","getQuote",431],"(",")",["T_OBJECT_OPERATOR","->",431],["T_STRING","collectTotals",431],"(",")",";",["T_WHITESPACE","\n        ",431],"}",["T_WHITESPACE","\n\n        ",432],["T_VARIABLE","$this",434],["T_OBJECT_OPERATOR","->",434],["T_STRING","quoteRepository",434],["T_OBJECT_OPERATOR","->",434],["T_STRING","save",434],"(",["T_VARIABLE","$this",434],["T_OBJECT_OPERATOR","->",434],["T_STRING","getQuote",434],"(",")",")",";",["T_WHITESPACE","\n        ",434],["T_RETURN","return",435],["T_WHITESPACE"," ",435],["T_VARIABLE","$this",435],";",["T_WHITESPACE","\n    ",435],"}",["T_WHITESPACE","\n\n    ",436],["T_DOC_COMMENT","\/**\n     * Retrieve session model object of quote\n     *\n     * @return \\Magento\\Backend\\Model\\Session\\Quote\n     *\/",438],["T_WHITESPACE","\n    ",442],["T_PUBLIC","public",443],["T_WHITESPACE"," ",443],["T_FUNCTION","function",443],["T_WHITESPACE"," ",443],["T_STRING","getSession",443],"(",")",["T_WHITESPACE","\n    ",443],"{",["T_WHITESPACE","\n        ",444],["T_RETURN","return",445],["T_WHITESPACE"," ",445],["T_VARIABLE","$this",445],["T_OBJECT_OPERATOR","->",445],["T_STRING","_session",445],";",["T_WHITESPACE","\n    ",445],"}",["T_WHITESPACE","\n\n    ",446],["T_DOC_COMMENT","\/**\n     * Retrieve quote object model\n     *\n     * @return \\Magento\\Quote\\Model\\Quote\n     *\/",448],["T_WHITESPACE","\n    ",452],["T_PUBLIC","public",453],["T_WHITESPACE"," ",453],["T_FUNCTION","function",453],["T_WHITESPACE"," ",453],["T_STRING","getQuote",453],"(",")",["T_WHITESPACE","\n    ",453],"{",["T_WHITESPACE","\n        ",454],["T_IF","if",455],["T_WHITESPACE"," ",455],"(","!",["T_VARIABLE","$this",455],["T_OBJECT_OPERATOR","->",455],["T_STRING","_quote",455],")",["T_WHITESPACE"," ",455],"{",["T_WHITESPACE","\n            ",455],["T_VARIABLE","$this",456],["T_OBJECT_OPERATOR","->",456],["T_STRING","_quote",456],["T_WHITESPACE"," ",456],"=",["T_WHITESPACE"," ",456],["T_VARIABLE","$this",456],["T_OBJECT_OPERATOR","->",456],["T_STRING","getSession",456],"(",")",["T_OBJECT_OPERATOR","->",456],["T_STRING","getQuote",456],"(",")",";",["T_WHITESPACE","\n        ",456],"}",["T_WHITESPACE","\n\n        ",457],["T_RETURN","return",459],["T_WHITESPACE"," ",459],["T_VARIABLE","$this",459],["T_OBJECT_OPERATOR","->",459],["T_STRING","_quote",459],";",["T_WHITESPACE","\n    ",459],"}",["T_WHITESPACE","\n\n    ",460],["T_DOC_COMMENT","\/**\n     * Set quote object\n     *\n     * @param \\Magento\\Quote\\Model\\Quote $quote\n     * @return $this\n     *\/",462],["T_WHITESPACE","\n    ",467],["T_PUBLIC","public",468],["T_WHITESPACE"," ",468],["T_FUNCTION","function",468],["T_WHITESPACE"," ",468],["T_STRING","setQuote",468],"(",["T_NS_SEPARATOR","\\",468],["T_STRING","Magento",468],["T_NS_SEPARATOR","\\",468],["T_STRING","Quote",468],["T_NS_SEPARATOR","\\",468],["T_STRING","Model",468],["T_NS_SEPARATOR","\\",468],["T_STRING","Quote",468],["T_WHITESPACE"," ",468],["T_VARIABLE","$quote",468],")",["T_WHITESPACE","\n    ",468],"{",["T_WHITESPACE","\n        ",469],["T_VARIABLE","$this",470],["T_OBJECT_OPERATOR","->",470],["T_STRING","_quote",470],["T_WHITESPACE"," ",470],"=",["T_WHITESPACE"," ",470],["T_VARIABLE","$quote",470],";",["T_WHITESPACE","\n        ",470],["T_RETURN","return",471],["T_WHITESPACE"," ",471],["T_VARIABLE","$this",471],";",["T_WHITESPACE","\n    ",471],"}",["T_WHITESPACE","\n\n    ",472],["T_DOC_COMMENT","\/**\n     * Initialize creation data from existing order\n     *\n     * @param \\Magento\\Sales\\Model\\Order $order\n     * @return $this\n     * @throws \\Magento\\Framework\\Exception\\LocalizedException\n     * @SuppressWarnings(PHPMD.CyclomaticComplexity)\n     * @SuppressWarnings(PHPMD.NPathComplexity)\n     *\/",474],["T_WHITESPACE","\n    ",482],["T_PUBLIC","public",483],["T_WHITESPACE"," ",483],["T_FUNCTION","function",483],["T_WHITESPACE"," ",483],["T_STRING","initFromOrder",483],"(",["T_NS_SEPARATOR","\\",483],["T_STRING","Magento",483],["T_NS_SEPARATOR","\\",483],["T_STRING","Sales",483],["T_NS_SEPARATOR","\\",483],["T_STRING","Model",483],["T_NS_SEPARATOR","\\",483],["T_STRING","Order",483],["T_WHITESPACE"," ",483],["T_VARIABLE","$order",483],")",["T_WHITESPACE","\n    ",483],"{",["T_WHITESPACE","\n        ",484],["T_VARIABLE","$session",485],["T_WHITESPACE"," ",485],"=",["T_WHITESPACE"," ",485],["T_VARIABLE","$this",485],["T_OBJECT_OPERATOR","->",485],["T_STRING","getSession",485],"(",")",";",["T_WHITESPACE","\n        ",485],["T_VARIABLE","$session",486],["T_OBJECT_OPERATOR","->",486],["T_STRING","setData",486],"(",["T_VARIABLE","$order",486],["T_OBJECT_OPERATOR","->",486],["T_STRING","getReordered",486],"(",")",["T_WHITESPACE"," ",486],"?",["T_WHITESPACE"," ",486],["T_CONSTANT_ENCAPSED_STRING","'reordered'",486],["T_WHITESPACE"," ",486],":",["T_WHITESPACE"," ",486],["T_CONSTANT_ENCAPSED_STRING","'order_id'",486],",",["T_WHITESPACE"," ",486],["T_VARIABLE","$order",486],["T_OBJECT_OPERATOR","->",486],["T_STRING","getId",486],"(",")",")",";",["T_WHITESPACE","\n        ",486],["T_VARIABLE","$session",487],["T_OBJECT_OPERATOR","->",487],["T_STRING","setCurrencyId",487],"(",["T_VARIABLE","$order",487],["T_OBJECT_OPERATOR","->",487],["T_STRING","getOrderCurrencyCode",487],"(",")",")",";",["T_WHITESPACE","\n        ",487],["T_COMMENT","\/* Check if we edit guest order *\/",488],["T_WHITESPACE","\n        ",488],["T_VARIABLE","$session",489],["T_OBJECT_OPERATOR","->",489],["T_STRING","setCustomerId",489],"(",["T_VARIABLE","$order",489],["T_OBJECT_OPERATOR","->",489],["T_STRING","getCustomerId",489],"(",")",["T_WHITESPACE"," ",489],"?",":",["T_WHITESPACE"," ",489],["T_STRING","false",489],")",";",["T_WHITESPACE","\n        ",489],["T_VARIABLE","$session",490],["T_OBJECT_OPERATOR","->",490],["T_STRING","setStoreId",490],"(",["T_VARIABLE","$order",490],["T_OBJECT_OPERATOR","->",490],["T_STRING","getStoreId",490],"(",")",")",";",["T_WHITESPACE","\n\n        ",490],["T_COMMENT","\/* Initialize catalog rule data with new session values *\/",492],["T_WHITESPACE","\n        ",492],["T_VARIABLE","$this",493],["T_OBJECT_OPERATOR","->",493],["T_STRING","initRuleData",493],"(",")",";",["T_WHITESPACE","\n        ",493],["T_FOREACH","foreach",494],["T_WHITESPACE"," ",494],"(",["T_VARIABLE","$order",494],["T_OBJECT_OPERATOR","->",494],["T_STRING","getItemsCollection",494],"(",["T_VARIABLE","$this",494],["T_OBJECT_OPERATOR","->",494],["T_STRING","_salesConfig",494],["T_OBJECT_OPERATOR","->",494],["T_STRING","getAvailableProductTypes",494],"(",")",",",["T_WHITESPACE"," ",494],["T_STRING","true",494],")",["T_WHITESPACE"," ",494],["T_AS","as",494],["T_WHITESPACE"," ",494],["T_VARIABLE","$orderItem",494],")",["T_WHITESPACE"," ",494],"{",["T_WHITESPACE","\n            ",494],["T_COMMENT","\/* @var $orderItem \\Magento\\Sales\\Model\\Order\\Item *\/",495],["T_WHITESPACE","\n            ",495],["T_IF","if",496],["T_WHITESPACE"," ",496],"(","!",["T_VARIABLE","$orderItem",496],["T_OBJECT_OPERATOR","->",496],["T_STRING","getParentItem",496],"(",")",")",["T_WHITESPACE"," ",496],"{",["T_WHITESPACE","\n                ",496],["T_VARIABLE","$qty",497],["T_WHITESPACE"," ",497],"=",["T_WHITESPACE"," ",497],["T_VARIABLE","$orderItem",497],["T_OBJECT_OPERATOR","->",497],["T_STRING","getQtyOrdered",497],"(",")",";",["T_WHITESPACE","\n                ",497],["T_IF","if",498],["T_WHITESPACE"," ",498],"(","!",["T_VARIABLE","$order",498],["T_OBJECT_OPERATOR","->",498],["T_STRING","getReordered",498],"(",")",")",["T_WHITESPACE"," ",498],"{",["T_WHITESPACE","\n                    ",498],["T_VARIABLE","$qty",499],["T_WHITESPACE"," ",499],["T_MINUS_EQUAL","-=",499],["T_WHITESPACE"," ",499],["T_STRING","max",499],"(",["T_VARIABLE","$orderItem",499],["T_OBJECT_OPERATOR","->",499],["T_STRING","getQtyShipped",499],"(",")",",",["T_WHITESPACE"," ",499],["T_VARIABLE","$orderItem",499],["T_OBJECT_OPERATOR","->",499],["T_STRING","getQtyInvoiced",499],"(",")",")",";",["T_WHITESPACE","\n                ",499],"}",["T_WHITESPACE","\n\n                ",500],["T_IF","if",502],["T_WHITESPACE"," ",502],"(",["T_VARIABLE","$qty",502],["T_WHITESPACE"," ",502],">",["T_WHITESPACE"," ",502],["T_LNUMBER","0",502],")",["T_WHITESPACE"," ",502],"{",["T_WHITESPACE","\n                    ",502],["T_VARIABLE","$item",503],["T_WHITESPACE"," ",503],"=",["T_WHITESPACE"," ",503],["T_VARIABLE","$this",503],["T_OBJECT_OPERATOR","->",503],["T_STRING","initFromOrderItem",503],"(",["T_VARIABLE","$orderItem",503],",",["T_WHITESPACE"," ",503],["T_VARIABLE","$qty",503],")",";",["T_WHITESPACE","\n                    ",503],["T_IF","if",504],["T_WHITESPACE"," ",504],"(",["T_STRING","is_string",504],"(",["T_VARIABLE","$item",504],")",")",["T_WHITESPACE"," ",504],"{",["T_WHITESPACE","\n                        ",504],["T_THROW","throw",505],["T_WHITESPACE"," ",505],["T_NEW","new",505],["T_WHITESPACE"," ",505],["T_NS_SEPARATOR","\\",505],["T_STRING","Magento",505],["T_NS_SEPARATOR","\\",505],["T_STRING","Framework",505],["T_NS_SEPARATOR","\\",505],["T_STRING","Exception",505],["T_NS_SEPARATOR","\\",505],["T_STRING","LocalizedException",505],"(",["T_STRING","__",505],"(",["T_VARIABLE","$item",505],")",")",";",["T_WHITESPACE","\n                    ",505],"}",["T_WHITESPACE","\n                ",506],"}",["T_WHITESPACE","\n            ",507],"}",["T_WHITESPACE","\n        ",508],"}",["T_WHITESPACE","\n\n        ",509],["T_VARIABLE","$shippingAddress",511],["T_WHITESPACE"," ",511],"=",["T_WHITESPACE"," ",511],["T_VARIABLE","$order",511],["T_OBJECT_OPERATOR","->",511],["T_STRING","getShippingAddress",511],"(",")",";",["T_WHITESPACE","\n        ",511],["T_IF","if",512],["T_WHITESPACE"," ",512],"(",["T_VARIABLE","$shippingAddress",512],")",["T_WHITESPACE"," ",512],"{",["T_WHITESPACE","\n            ",512],["T_VARIABLE","$addressDiff",513],["T_WHITESPACE"," ",513],"=",["T_WHITESPACE"," ",513],["T_STRING","array_diff_assoc",513],"(",["T_VARIABLE","$shippingAddress",513],["T_OBJECT_OPERATOR","->",513],["T_STRING","getData",513],"(",")",",",["T_WHITESPACE"," ",513],["T_VARIABLE","$order",513],["T_OBJECT_OPERATOR","->",513],["T_STRING","getBillingAddress",513],"(",")",["T_OBJECT_OPERATOR","->",513],["T_STRING","getData",513],"(",")",")",";",["T_WHITESPACE","\n            ",513],["T_UNSET","unset",514],"(",["T_VARIABLE","$addressDiff",514],"[",["T_CONSTANT_ENCAPSED_STRING","'address_type'",514],"]",",",["T_WHITESPACE"," ",514],["T_VARIABLE","$addressDiff",514],"[",["T_CONSTANT_ENCAPSED_STRING","'entity_id'",514],"]",")",";",["T_WHITESPACE","\n            ",514],["T_VARIABLE","$shippingAddress",515],["T_OBJECT_OPERATOR","->",515],["T_STRING","setSameAsBilling",515],"(",["T_EMPTY","empty",515],"(",["T_VARIABLE","$addressDiff",515],")",")",";",["T_WHITESPACE","\n        ",515],"}",["T_WHITESPACE","\n\n        ",516],["T_VARIABLE","$this",518],["T_OBJECT_OPERATOR","->",518],["T_STRING","_initBillingAddressFromOrder",518],"(",["T_VARIABLE","$order",518],")",";",["T_WHITESPACE","\n        ",518],["T_VARIABLE","$this",519],["T_OBJECT_OPERATOR","->",519],["T_STRING","_initShippingAddressFromOrder",519],"(",["T_VARIABLE","$order",519],")",";",["T_WHITESPACE","\n\n        ",519],["T_VARIABLE","$quote",521],["T_WHITESPACE"," ",521],"=",["T_WHITESPACE"," ",521],["T_VARIABLE","$this",521],["T_OBJECT_OPERATOR","->",521],["T_STRING","getQuote",521],"(",")",";",["T_WHITESPACE","\n        ",521],["T_IF","if",522],["T_WHITESPACE"," ",522],"(","!",["T_VARIABLE","$quote",522],["T_OBJECT_OPERATOR","->",522],["T_STRING","isVirtual",522],"(",")",["T_WHITESPACE"," ",522],["T_BOOLEAN_AND","&&",522],["T_WHITESPACE"," ",522],["T_VARIABLE","$this",522],["T_OBJECT_OPERATOR","->",522],["T_STRING","getShippingAddress",522],"(",")",["T_OBJECT_OPERATOR","->",522],["T_STRING","getSameAsBilling",522],"(",")",")",["T_WHITESPACE"," ",522],"{",["T_WHITESPACE","\n            ",522],["T_VARIABLE","$this",523],["T_OBJECT_OPERATOR","->",523],["T_STRING","setShippingAsBilling",523],"(",["T_LNUMBER","1",523],")",";",["T_WHITESPACE","\n        ",523],"}",["T_WHITESPACE","\n\n        ",524],["T_VARIABLE","$this",526],["T_OBJECT_OPERATOR","->",526],["T_STRING","setShippingMethod",526],"(",["T_VARIABLE","$order",526],["T_OBJECT_OPERATOR","->",526],["T_STRING","getShippingMethod",526],"(",")",")",";",["T_WHITESPACE","\n        ",526],["T_VARIABLE","$quote",527],["T_OBJECT_OPERATOR","->",527],["T_STRING","getShippingAddress",527],"(",")",["T_OBJECT_OPERATOR","->",527],["T_STRING","setShippingDescription",527],"(",["T_VARIABLE","$order",527],["T_OBJECT_OPERATOR","->",527],["T_STRING","getShippingDescription",527],"(",")",")",";",["T_WHITESPACE","\n\n        ",527],["T_VARIABLE","$orderCouponCode",529],["T_WHITESPACE"," ",529],"=",["T_WHITESPACE"," ",529],["T_VARIABLE","$order",529],["T_OBJECT_OPERATOR","->",529],["T_STRING","getCouponCode",529],"(",")",";",["T_WHITESPACE","\n        ",529],["T_IF","if",530],["T_WHITESPACE"," ",530],"(",["T_VARIABLE","$orderCouponCode",530],")",["T_WHITESPACE"," ",530],"{",["T_WHITESPACE","\n            ",530],["T_VARIABLE","$quote",531],["T_OBJECT_OPERATOR","->",531],["T_STRING","setCouponCode",531],"(",["T_VARIABLE","$orderCouponCode",531],")",";",["T_WHITESPACE","\n        ",531],"}",["T_WHITESPACE","\n\n        ",532],["T_IF","if",534],["T_WHITESPACE"," ",534],"(",["T_VARIABLE","$quote",534],["T_OBJECT_OPERATOR","->",534],["T_STRING","getCouponCode",534],"(",")",")",["T_WHITESPACE"," ",534],"{",["T_WHITESPACE","\n            ",534],["T_VARIABLE","$quote",535],["T_OBJECT_OPERATOR","->",535],["T_STRING","collectTotals",535],"(",")",";",["T_WHITESPACE","\n        ",535],"}",["T_WHITESPACE","\n\n        ",536],["T_VARIABLE","$this",538],["T_OBJECT_OPERATOR","->",538],["T_STRING","_objectCopyService",538],["T_OBJECT_OPERATOR","->",538],["T_STRING","copyFieldsetToTarget",538],"(",["T_CONSTANT_ENCAPSED_STRING","'sales_copy_order'",538],",",["T_WHITESPACE"," ",538],["T_CONSTANT_ENCAPSED_STRING","'to_edit'",538],",",["T_WHITESPACE"," ",538],["T_VARIABLE","$order",538],",",["T_WHITESPACE"," ",538],["T_VARIABLE","$quote",538],")",";",["T_WHITESPACE","\n\n        ",538],["T_VARIABLE","$this",540],["T_OBJECT_OPERATOR","->",540],["T_STRING","_eventManager",540],["T_OBJECT_OPERATOR","->",540],["T_STRING","dispatch",540],"(",["T_CONSTANT_ENCAPSED_STRING","'sales_convert_order_to_quote'",540],",",["T_WHITESPACE"," ",540],"[",["T_CONSTANT_ENCAPSED_STRING","'order'",540],["T_WHITESPACE"," ",540],["T_DOUBLE_ARROW","=>",540],["T_WHITESPACE"," ",540],["T_VARIABLE","$order",540],",",["T_WHITESPACE"," ",540],["T_CONSTANT_ENCAPSED_STRING","'quote'",540],["T_WHITESPACE"," ",540],["T_DOUBLE_ARROW","=>",540],["T_WHITESPACE"," ",540],["T_VARIABLE","$quote",540],"]",")",";",["T_WHITESPACE","\n\n        ",540],["T_IF","if",542],["T_WHITESPACE"," ",542],"(","!",["T_VARIABLE","$order",542],["T_OBJECT_OPERATOR","->",542],["T_STRING","getCustomerId",542],"(",")",")",["T_WHITESPACE"," ",542],"{",["T_WHITESPACE","\n            ",542],["T_VARIABLE","$quote",543],["T_OBJECT_OPERATOR","->",543],["T_STRING","setCustomerIsGuest",543],"(",["T_STRING","true",543],")",";",["T_WHITESPACE","\n        ",543],"}",["T_WHITESPACE","\n\n        ",544],["T_IF","if",546],["T_WHITESPACE"," ",546],"(",["T_VARIABLE","$session",546],["T_OBJECT_OPERATOR","->",546],["T_STRING","getUseOldShippingMethod",546],"(",["T_STRING","true",546],")",")",["T_WHITESPACE"," ",546],"{",["T_WHITESPACE","\n            ",546],["T_COMMENT","\/*\n             * if we are making reorder or editing old order\n             * we need to show old shipping as preselected\n             * so for this we need to collect shipping rates\n             *\/",547],["T_WHITESPACE","\n            ",551],["T_VARIABLE","$this",552],["T_OBJECT_OPERATOR","->",552],["T_STRING","collectShippingRates",552],"(",")",";",["T_WHITESPACE","\n        ",552],"}",["T_WHITESPACE"," ",553],["T_ELSE","else",553],["T_WHITESPACE"," ",553],"{",["T_WHITESPACE","\n            ",553],["T_COMMENT","\/*\n             * if we are creating new order then we don't need to collect\n             * shipping rates before customer hit appropriate button\n             *\/",554],["T_WHITESPACE","\n            ",557],["T_VARIABLE","$this",558],["T_OBJECT_OPERATOR","->",558],["T_STRING","collectRates",558],"(",")",";",["T_WHITESPACE","\n        ",558],"}",["T_WHITESPACE","\n\n        ",559],["T_VARIABLE","$quote",561],["T_OBJECT_OPERATOR","->",561],["T_STRING","getShippingAddress",561],"(",")",["T_OBJECT_OPERATOR","->",561],["T_STRING","unsCachedItemsAll",561],"(",")",";",["T_WHITESPACE","\n        ",561],["T_VARIABLE","$quote",562],["T_OBJECT_OPERATOR","->",562],["T_STRING","setTotalsCollectedFlag",562],"(",["T_STRING","false",562],")",";",["T_WHITESPACE","\n\n        ",562],["T_VARIABLE","$this",564],["T_OBJECT_OPERATOR","->",564],["T_STRING","quoteRepository",564],["T_OBJECT_OPERATOR","->",564],["T_STRING","save",564],"(",["T_VARIABLE","$quote",564],")",";",["T_WHITESPACE","\n\n        ",564],["T_RETURN","return",566],["T_WHITESPACE"," ",566],["T_VARIABLE","$this",566],";",["T_WHITESPACE","\n    ",566],"}",["T_WHITESPACE","\n\n    ",567],["T_DOC_COMMENT","\/**\n     * Copy billing address from order\n     *\n     * @param \\Magento\\Sales\\Model\\Order $order\n     * @return void\n     *\/",569],["T_WHITESPACE","\n    ",574],["T_PROTECTED","protected",575],["T_WHITESPACE"," ",575],["T_FUNCTION","function",575],["T_WHITESPACE"," ",575],["T_STRING","_initBillingAddressFromOrder",575],"(",["T_NS_SEPARATOR","\\",575],["T_STRING","Magento",575],["T_NS_SEPARATOR","\\",575],["T_STRING","Sales",575],["T_NS_SEPARATOR","\\",575],["T_STRING","Model",575],["T_NS_SEPARATOR","\\",575],["T_STRING","Order",575],["T_WHITESPACE"," ",575],["T_VARIABLE","$order",575],")",["T_WHITESPACE","\n    ",575],"{",["T_WHITESPACE","\n        ",576],["T_VARIABLE","$this",577],["T_OBJECT_OPERATOR","->",577],["T_STRING","getQuote",577],"(",")",["T_OBJECT_OPERATOR","->",577],["T_STRING","getBillingAddress",577],"(",")",["T_OBJECT_OPERATOR","->",577],["T_STRING","setCustomerAddressId",577],"(",["T_CONSTANT_ENCAPSED_STRING","''",577],")",";",["T_WHITESPACE","\n        ",577],["T_VARIABLE","$this",578],["T_OBJECT_OPERATOR","->",578],["T_STRING","_objectCopyService",578],["T_OBJECT_OPERATOR","->",578],["T_STRING","copyFieldsetToTarget",578],"(",["T_WHITESPACE","\n            ",578],["T_CONSTANT_ENCAPSED_STRING","'sales_copy_order_billing_address'",579],",",["T_WHITESPACE","\n            ",579],["T_CONSTANT_ENCAPSED_STRING","'to_order'",580],",",["T_WHITESPACE","\n            ",580],["T_VARIABLE","$order",581],["T_OBJECT_OPERATOR","->",581],["T_STRING","getBillingAddress",581],"(",")",",",["T_WHITESPACE","\n            ",581],["T_VARIABLE","$this",582],["T_OBJECT_OPERATOR","->",582],["T_STRING","getQuote",582],"(",")",["T_OBJECT_OPERATOR","->",582],["T_STRING","getBillingAddress",582],"(",")",["T_WHITESPACE","\n        ",582],")",";",["T_WHITESPACE","\n    ",583],"}",["T_WHITESPACE","\n\n    ",584],["T_DOC_COMMENT","\/**\n     * Copy shipping address from order\n     *\n     * @param \\Magento\\Sales\\Model\\Order $order\n     * @return void\n     *\/",586],["T_WHITESPACE","\n    ",591],["T_PROTECTED","protected",592],["T_WHITESPACE"," ",592],["T_FUNCTION","function",592],["T_WHITESPACE"," ",592],["T_STRING","_initShippingAddressFromOrder",592],"(",["T_NS_SEPARATOR","\\",592],["T_STRING","Magento",592],["T_NS_SEPARATOR","\\",592],["T_STRING","Sales",592],["T_NS_SEPARATOR","\\",592],["T_STRING","Model",592],["T_NS_SEPARATOR","\\",592],["T_STRING","Order",592],["T_WHITESPACE"," ",592],["T_VARIABLE","$order",592],")",["T_WHITESPACE","\n    ",592],"{",["T_WHITESPACE","\n        ",593],["T_VARIABLE","$orderShippingAddress",594],["T_WHITESPACE"," ",594],"=",["T_WHITESPACE"," ",594],["T_VARIABLE","$order",594],["T_OBJECT_OPERATOR","->",594],["T_STRING","getShippingAddress",594],"(",")",";",["T_WHITESPACE","\n        ",594],["T_VARIABLE","$quoteShippingAddress",595],["T_WHITESPACE"," ",595],"=",["T_WHITESPACE"," ",595],["T_VARIABLE","$this",595],["T_OBJECT_OPERATOR","->",595],["T_STRING","getQuote",595],"(",")",["T_OBJECT_OPERATOR","->",595],["T_STRING","getShippingAddress",595],"(",")",["T_OBJECT_OPERATOR","->",595],["T_STRING","setCustomerAddressId",595],"(",["T_WHITESPACE","\n            ",595],["T_CONSTANT_ENCAPSED_STRING","''",596],["T_WHITESPACE","\n        ",596],")",["T_OBJECT_OPERATOR","->",597],["T_STRING","setSameAsBilling",597],"(",["T_WHITESPACE","\n            ",597],["T_VARIABLE","$orderShippingAddress",598],["T_WHITESPACE"," ",598],["T_BOOLEAN_AND","&&",598],["T_WHITESPACE"," ",598],["T_VARIABLE","$orderShippingAddress",598],["T_OBJECT_OPERATOR","->",598],["T_STRING","getSameAsBilling",598],"(",")",["T_WHITESPACE","\n        ",598],")",";",["T_WHITESPACE","\n        ",599],["T_VARIABLE","$this",600],["T_OBJECT_OPERATOR","->",600],["T_STRING","_objectCopyService",600],["T_OBJECT_OPERATOR","->",600],["T_STRING","copyFieldsetToTarget",600],"(",["T_WHITESPACE","\n            ",600],["T_CONSTANT_ENCAPSED_STRING","'sales_copy_order_shipping_address'",601],",",["T_WHITESPACE","\n            ",601],["T_CONSTANT_ENCAPSED_STRING","'to_order'",602],",",["T_WHITESPACE","\n            ",602],["T_VARIABLE","$orderShippingAddress",603],",",["T_WHITESPACE","\n            ",603],["T_VARIABLE","$quoteShippingAddress",604],["T_WHITESPACE","\n        ",604],")",";",["T_WHITESPACE","\n    ",605],"}",["T_WHITESPACE","\n\n    ",606],["T_DOC_COMMENT","\/**\n     * Initialize creation data from existing order Item\n     *\n     * @param \\Magento\\Sales\\Model\\Order\\Item $orderItem\n     * @param int $qty\n     * @return \\Magento\\Quote\\Model\\Quote\\Item|string|$this\n     *\/",608],["T_WHITESPACE","\n    ",614],["T_PUBLIC","public",615],["T_WHITESPACE"," ",615],["T_FUNCTION","function",615],["T_WHITESPACE"," ",615],["T_STRING","initFromOrderItem",615],"(",["T_NS_SEPARATOR","\\",615],["T_STRING","Magento",615],["T_NS_SEPARATOR","\\",615],["T_STRING","Sales",615],["T_NS_SEPARATOR","\\",615],["T_STRING","Model",615],["T_NS_SEPARATOR","\\",615],["T_STRING","Order",615],["T_NS_SEPARATOR","\\",615],["T_STRING","Item",615],["T_WHITESPACE"," ",615],["T_VARIABLE","$orderItem",615],",",["T_WHITESPACE"," ",615],["T_VARIABLE","$qty",615],["T_WHITESPACE"," ",615],"=",["T_WHITESPACE"," ",615],["T_STRING","null",615],")",["T_WHITESPACE","\n    ",615],"{",["T_WHITESPACE","\n        ",616],["T_IF","if",617],["T_WHITESPACE"," ",617],"(","!",["T_VARIABLE","$orderItem",617],["T_OBJECT_OPERATOR","->",617],["T_STRING","getId",617],"(",")",")",["T_WHITESPACE"," ",617],"{",["T_WHITESPACE","\n            ",617],["T_RETURN","return",618],["T_WHITESPACE"," ",618],["T_VARIABLE","$this",618],";",["T_WHITESPACE","\n        ",618],"}",["T_WHITESPACE","\n\n        ",619],["T_VARIABLE","$product",621],["T_WHITESPACE"," ",621],"=",["T_WHITESPACE"," ",621],["T_VARIABLE","$this",621],["T_OBJECT_OPERATOR","->",621],["T_STRING","_objectManager",621],["T_OBJECT_OPERATOR","->",621],["T_STRING","create",621],"(",["T_WHITESPACE","\n            ",621],["T_NS_SEPARATOR","\\",622],["T_STRING","Magento",622],["T_NS_SEPARATOR","\\",622],["T_STRING","Catalog",622],["T_NS_SEPARATOR","\\",622],["T_STRING","Model",622],["T_NS_SEPARATOR","\\",622],["T_STRING","Product",622],["T_DOUBLE_COLON","::",622],["T_CLASS","class",622],["T_WHITESPACE","\n        ",622],")",["T_OBJECT_OPERATOR","->",623],["T_STRING","setStoreId",623],"(",["T_WHITESPACE","\n            ",623],["T_VARIABLE","$this",624],["T_OBJECT_OPERATOR","->",624],["T_STRING","getSession",624],"(",")",["T_OBJECT_OPERATOR","->",624],["T_STRING","getStoreId",624],"(",")",["T_WHITESPACE","\n        ",624],")",["T_OBJECT_OPERATOR","->",625],["T_STRING","load",625],"(",["T_WHITESPACE","\n            ",625],["T_VARIABLE","$orderItem",626],["T_OBJECT_OPERATOR","->",626],["T_STRING","getProductId",626],"(",")",["T_WHITESPACE","\n        ",626],")",";",["T_WHITESPACE","\n\n        ",627],["T_IF","if",629],["T_WHITESPACE"," ",629],"(",["T_VARIABLE","$product",629],["T_OBJECT_OPERATOR","->",629],["T_STRING","getId",629],"(",")",")",["T_WHITESPACE"," ",629],"{",["T_WHITESPACE","\n            ",629],["T_VARIABLE","$product",630],["T_OBJECT_OPERATOR","->",630],["T_STRING","setSkipCheckRequiredOption",630],"(",["T_STRING","true",630],")",";",["T_WHITESPACE","\n            ",630],["T_VARIABLE","$buyRequest",631],["T_WHITESPACE"," ",631],"=",["T_WHITESPACE"," ",631],["T_VARIABLE","$orderItem",631],["T_OBJECT_OPERATOR","->",631],["T_STRING","getBuyRequest",631],"(",")",";",["T_WHITESPACE","\n            ",631],["T_IF","if",632],["T_WHITESPACE"," ",632],"(",["T_STRING","is_numeric",632],"(",["T_VARIABLE","$qty",632],")",")",["T_WHITESPACE"," ",632],"{",["T_WHITESPACE","\n                ",632],["T_VARIABLE","$buyRequest",633],["T_OBJECT_OPERATOR","->",633],["T_STRING","setQty",633],"(",["T_VARIABLE","$qty",633],")",";",["T_WHITESPACE","\n            ",633],"}",["T_WHITESPACE","\n            ",634],["T_VARIABLE","$item",635],["T_WHITESPACE"," ",635],"=",["T_WHITESPACE"," ",635],["T_VARIABLE","$this",635],["T_OBJECT_OPERATOR","->",635],["T_STRING","getQuote",635],"(",")",["T_OBJECT_OPERATOR","->",635],["T_STRING","addProduct",635],"(",["T_VARIABLE","$product",635],",",["T_WHITESPACE"," ",635],["T_VARIABLE","$buyRequest",635],")",";",["T_WHITESPACE","\n            ",635],["T_IF","if",636],["T_WHITESPACE"," ",636],"(",["T_STRING","is_string",636],"(",["T_VARIABLE","$item",636],")",")",["T_WHITESPACE"," ",636],"{",["T_WHITESPACE","\n                ",636],["T_RETURN","return",637],["T_WHITESPACE"," ",637],["T_VARIABLE","$item",637],";",["T_WHITESPACE","\n            ",637],"}",["T_WHITESPACE","\n\n            ",638],["T_IF","if",640],["T_WHITESPACE"," ",640],"(",["T_VARIABLE","$additionalOptions",640],["T_WHITESPACE"," ",640],"=",["T_WHITESPACE"," ",640],["T_VARIABLE","$orderItem",640],["T_OBJECT_OPERATOR","->",640],["T_STRING","getProductOptionByCode",640],"(",["T_CONSTANT_ENCAPSED_STRING","'additional_options'",640],")",")",["T_WHITESPACE"," ",640],"{",["T_WHITESPACE","\n                ",640],["T_VARIABLE","$item",641],["T_OBJECT_OPERATOR","->",641],["T_STRING","addOption",641],"(",["T_WHITESPACE","\n                    ",641],["T_NEW","new",642],["T_WHITESPACE"," ",642],["T_NS_SEPARATOR","\\",642],["T_STRING","Magento",642],["T_NS_SEPARATOR","\\",642],["T_STRING","Framework",642],["T_NS_SEPARATOR","\\",642],["T_STRING","DataObject",642],"(",["T_WHITESPACE","\n                        ",642],"[",["T_WHITESPACE","\n                            ",643],["T_CONSTANT_ENCAPSED_STRING","'product'",644],["T_WHITESPACE"," ",644],["T_DOUBLE_ARROW","=>",644],["T_WHITESPACE"," ",644],["T_VARIABLE","$item",644],["T_OBJECT_OPERATOR","->",644],["T_STRING","getProduct",644],"(",")",",",["T_WHITESPACE","\n                            ",644],["T_CONSTANT_ENCAPSED_STRING","'code'",645],["T_WHITESPACE"," ",645],["T_DOUBLE_ARROW","=>",645],["T_WHITESPACE"," ",645],["T_CONSTANT_ENCAPSED_STRING","'additional_options'",645],",",["T_WHITESPACE","\n                            ",645],["T_CONSTANT_ENCAPSED_STRING","'value'",646],["T_WHITESPACE"," ",646],["T_DOUBLE_ARROW","=>",646],["T_WHITESPACE"," ",646],["T_VARIABLE","$this",646],["T_OBJECT_OPERATOR","->",646],["T_STRING","serializer",646],["T_OBJECT_OPERATOR","->",646],["T_STRING","serialize",646],"(",["T_VARIABLE","$additionalOptions",646],")",["T_WHITESPACE","\n                        ",646],"]",["T_WHITESPACE","\n                    ",647],")",["T_WHITESPACE","\n                ",648],")",";",["T_WHITESPACE","\n            ",649],"}",["T_WHITESPACE","\n\n            ",650],["T_VARIABLE","$this",652],["T_OBJECT_OPERATOR","->",652],["T_STRING","_eventManager",652],["T_OBJECT_OPERATOR","->",652],["T_STRING","dispatch",652],"(",["T_WHITESPACE","\n                ",652],["T_CONSTANT_ENCAPSED_STRING","'sales_convert_order_item_to_quote_item'",653],",",["T_WHITESPACE","\n                ",653],"[",["T_CONSTANT_ENCAPSED_STRING","'order_item'",654],["T_WHITESPACE"," ",654],["T_DOUBLE_ARROW","=>",654],["T_WHITESPACE"," ",654],["T_VARIABLE","$orderItem",654],",",["T_WHITESPACE"," ",654],["T_CONSTANT_ENCAPSED_STRING","'quote_item'",654],["T_WHITESPACE"," ",654],["T_DOUBLE_ARROW","=>",654],["T_WHITESPACE"," ",654],["T_VARIABLE","$item",654],"]",["T_WHITESPACE","\n            ",654],")",";",["T_WHITESPACE","\n            ",655],["T_RETURN","return",656],["T_WHITESPACE"," ",656],["T_VARIABLE","$item",656],";",["T_WHITESPACE","\n        ",656],"}",["T_WHITESPACE","\n\n        ",657],["T_RETURN","return",659],["T_WHITESPACE"," ",659],["T_VARIABLE","$this",659],";",["T_WHITESPACE","\n    ",659],"}",["T_WHITESPACE","\n\n    ",660],["T_DOC_COMMENT","\/**\n     * Retrieve customer wishlist model object\n     *\n     * @param bool $cacheReload pass cached wishlist object and get new one\n     * @return \\Magento\\Wishlist\\Model\\Wishlist|false Return false if customer ID is not specified\n     *\/",662],["T_WHITESPACE","\n    ",667],["T_PUBLIC","public",668],["T_WHITESPACE"," ",668],["T_FUNCTION","function",668],["T_WHITESPACE"," ",668],["T_STRING","getCustomerWishlist",668],"(",["T_VARIABLE","$cacheReload",668],["T_WHITESPACE"," ",668],"=",["T_WHITESPACE"," ",668],["T_STRING","false",668],")",["T_WHITESPACE","\n    ",668],"{",["T_WHITESPACE","\n        ",669],["T_IF","if",670],["T_WHITESPACE"," ",670],"(","!",["T_STRING","is_null",670],"(",["T_VARIABLE","$this",670],["T_OBJECT_OPERATOR","->",670],["T_STRING","_wishlist",670],")",["T_WHITESPACE"," ",670],["T_BOOLEAN_AND","&&",670],["T_WHITESPACE"," ",670],"!",["T_VARIABLE","$cacheReload",670],")",["T_WHITESPACE"," ",670],"{",["T_WHITESPACE","\n            ",670],["T_RETURN","return",671],["T_WHITESPACE"," ",671],["T_VARIABLE","$this",671],["T_OBJECT_OPERATOR","->",671],["T_STRING","_wishlist",671],";",["T_WHITESPACE","\n        ",671],"}",["T_WHITESPACE","\n\n        ",672],["T_VARIABLE","$customerId",674],["T_WHITESPACE"," ",674],"=",["T_WHITESPACE"," ",674],["T_INT_CAST","(int)",674],["T_VARIABLE","$this",674],["T_OBJECT_OPERATOR","->",674],["T_STRING","getSession",674],"(",")",["T_OBJECT_OPERATOR","->",674],["T_STRING","getCustomerId",674],"(",")",";",["T_WHITESPACE","\n        ",674],["T_IF","if",675],["T_WHITESPACE"," ",675],"(",["T_VARIABLE","$customerId",675],")",["T_WHITESPACE"," ",675],"{",["T_WHITESPACE","\n            ",675],["T_VARIABLE","$this",676],["T_OBJECT_OPERATOR","->",676],["T_STRING","_wishlist",676],["T_WHITESPACE"," ",676],"=",["T_WHITESPACE"," ",676],["T_VARIABLE","$this",676],["T_OBJECT_OPERATOR","->",676],["T_STRING","_objectManager",676],["T_OBJECT_OPERATOR","->",676],["T_STRING","create",676],"(",["T_NS_SEPARATOR","\\",676],["T_STRING","Magento",676],["T_NS_SEPARATOR","\\",676],["T_STRING","Wishlist",676],["T_NS_SEPARATOR","\\",676],["T_STRING","Model",676],["T_NS_SEPARATOR","\\",676],["T_STRING","Wishlist",676],["T_DOUBLE_COLON","::",676],["T_CLASS","class",676],")",";",["T_WHITESPACE","\n            ",676],["T_VARIABLE","$this",677],["T_OBJECT_OPERATOR","->",677],["T_STRING","_wishlist",677],["T_OBJECT_OPERATOR","->",677],["T_STRING","loadByCustomerId",677],"(",["T_VARIABLE","$customerId",677],",",["T_WHITESPACE"," ",677],["T_STRING","true",677],")",";",["T_WHITESPACE","\n            ",677],["T_VARIABLE","$this",678],["T_OBJECT_OPERATOR","->",678],["T_STRING","_wishlist",678],["T_OBJECT_OPERATOR","->",678],["T_STRING","setStore",678],"(",["T_WHITESPACE","\n                ",678],["T_VARIABLE","$this",679],["T_OBJECT_OPERATOR","->",679],["T_STRING","getSession",679],"(",")",["T_OBJECT_OPERATOR","->",679],["T_STRING","getStore",679],"(",")",["T_WHITESPACE","\n            ",679],")",["T_OBJECT_OPERATOR","->",680],["T_STRING","setSharedStoreIds",680],"(",["T_WHITESPACE","\n                ",680],["T_VARIABLE","$this",681],["T_OBJECT_OPERATOR","->",681],["T_STRING","getSession",681],"(",")",["T_OBJECT_OPERATOR","->",681],["T_STRING","getStore",681],"(",")",["T_OBJECT_OPERATOR","->",681],["T_STRING","getWebsite",681],"(",")",["T_OBJECT_OPERATOR","->",681],["T_STRING","getStoreIds",681],"(",")",["T_WHITESPACE","\n            ",681],")",";",["T_WHITESPACE","\n        ",682],"}",["T_WHITESPACE"," ",683],["T_ELSE","else",683],["T_WHITESPACE"," ",683],"{",["T_WHITESPACE","\n            ",683],["T_VARIABLE","$this",684],["T_OBJECT_OPERATOR","->",684],["T_STRING","_wishlist",684],["T_WHITESPACE"," ",684],"=",["T_WHITESPACE"," ",684],["T_STRING","false",684],";",["T_WHITESPACE","\n        ",684],"}",["T_WHITESPACE","\n\n        ",685],["T_RETURN","return",687],["T_WHITESPACE"," ",687],["T_VARIABLE","$this",687],["T_OBJECT_OPERATOR","->",687],["T_STRING","_wishlist",687],";",["T_WHITESPACE","\n    ",687],"}",["T_WHITESPACE","\n\n    ",688],["T_DOC_COMMENT","\/**\n     * Retrieve customer cart quote object model\n     *\n     * @return \\Magento\\Quote\\Model\\Quote\n     *\/",690],["T_WHITESPACE","\n    ",694],["T_PUBLIC","public",695],["T_WHITESPACE"," ",695],["T_FUNCTION","function",695],["T_WHITESPACE"," ",695],["T_STRING","getCustomerCart",695],"(",")",["T_WHITESPACE","\n    ",695],"{",["T_WHITESPACE","\n        ",696],["T_IF","if",697],["T_WHITESPACE"," ",697],"(","!",["T_STRING","is_null",697],"(",["T_VARIABLE","$this",697],["T_OBJECT_OPERATOR","->",697],["T_STRING","_cart",697],")",")",["T_WHITESPACE"," ",697],"{",["T_WHITESPACE","\n            ",697],["T_RETURN","return",698],["T_WHITESPACE"," ",698],["T_VARIABLE","$this",698],["T_OBJECT_OPERATOR","->",698],["T_STRING","_cart",698],";",["T_WHITESPACE","\n        ",698],"}",["T_WHITESPACE","\n\n        ",699],["T_VARIABLE","$this",701],["T_OBJECT_OPERATOR","->",701],["T_STRING","_cart",701],["T_WHITESPACE"," ",701],"=",["T_WHITESPACE"," ",701],["T_VARIABLE","$this",701],["T_OBJECT_OPERATOR","->",701],["T_STRING","quoteFactory",701],["T_OBJECT_OPERATOR","->",701],["T_STRING","create",701],"(",")",";",["T_WHITESPACE","\n\n        ",701],["T_VARIABLE","$customerId",703],["T_WHITESPACE"," ",703],"=",["T_WHITESPACE"," ",703],["T_INT_CAST","(int)",703],["T_VARIABLE","$this",703],["T_OBJECT_OPERATOR","->",703],["T_STRING","getSession",703],"(",")",["T_OBJECT_OPERATOR","->",703],["T_STRING","getCustomerId",703],"(",")",";",["T_WHITESPACE","\n        ",703],["T_IF","if",704],["T_WHITESPACE"," ",704],"(",["T_VARIABLE","$customerId",704],")",["T_WHITESPACE"," ",704],"{",["T_WHITESPACE","\n            ",704],["T_TRY","try",705],["T_WHITESPACE"," ",705],"{",["T_WHITESPACE","\n                ",705],["T_VARIABLE","$this",706],["T_OBJECT_OPERATOR","->",706],["T_STRING","_cart",706],["T_WHITESPACE"," ",706],"=",["T_WHITESPACE"," ",706],["T_VARIABLE","$this",706],["T_OBJECT_OPERATOR","->",706],["T_STRING","quoteRepository",706],["T_OBJECT_OPERATOR","->",706],["T_STRING","getForCustomer",706],"(",["T_VARIABLE","$customerId",706],")",";",["T_WHITESPACE","\n            ",706],"}",["T_WHITESPACE"," ",707],["T_CATCH","catch",707],["T_WHITESPACE"," ",707],"(",["T_NS_SEPARATOR","\\",707],["T_STRING","Magento",707],["T_NS_SEPARATOR","\\",707],["T_STRING","Framework",707],["T_NS_SEPARATOR","\\",707],["T_STRING","Exception",707],["T_NS_SEPARATOR","\\",707],["T_STRING","NoSuchEntityException",707],["T_WHITESPACE"," ",707],["T_VARIABLE","$e",707],")",["T_WHITESPACE"," ",707],"{",["T_WHITESPACE","\n                ",707],["T_VARIABLE","$this",708],["T_OBJECT_OPERATOR","->",708],["T_STRING","_cart",708],["T_OBJECT_OPERATOR","->",708],["T_STRING","setStore",708],"(",["T_VARIABLE","$this",708],["T_OBJECT_OPERATOR","->",708],["T_STRING","getSession",708],"(",")",["T_OBJECT_OPERATOR","->",708],["T_STRING","getStore",708],"(",")",")",";",["T_WHITESPACE","\n                ",708],["T_VARIABLE","$customerData",709],["T_WHITESPACE"," ",709],"=",["T_WHITESPACE"," ",709],["T_VARIABLE","$this",709],["T_OBJECT_OPERATOR","->",709],["T_STRING","customerRepository",709],["T_OBJECT_OPERATOR","->",709],["T_STRING","getById",709],"(",["T_VARIABLE","$customerId",709],")",";",["T_WHITESPACE","\n                ",709],["T_VARIABLE","$this",710],["T_OBJECT_OPERATOR","->",710],["T_STRING","_cart",710],["T_OBJECT_OPERATOR","->",710],["T_STRING","assignCustomer",710],"(",["T_VARIABLE","$customerData",710],")",";",["T_WHITESPACE","\n                ",710],["T_VARIABLE","$this",711],["T_OBJECT_OPERATOR","->",711],["T_STRING","quoteRepository",711],["T_OBJECT_OPERATOR","->",711],["T_STRING","save",711],"(",["T_VARIABLE","$this",711],["T_OBJECT_OPERATOR","->",711],["T_STRING","_cart",711],")",";",["T_WHITESPACE","\n            ",711],"}",["T_WHITESPACE","\n        ",712],"}",["T_WHITESPACE","\n\n        ",713],["T_RETURN","return",715],["T_WHITESPACE"," ",715],["T_VARIABLE","$this",715],["T_OBJECT_OPERATOR","->",715],["T_STRING","_cart",715],";",["T_WHITESPACE","\n    ",715],"}",["T_WHITESPACE","\n\n    ",716],["T_DOC_COMMENT","\/**\n     * Retrieve customer compare list model object\n     *\n     * @return \\Magento\\Catalog\\Model\\Product\\Compare\\ListCompare\n     *\/",718],["T_WHITESPACE","\n    ",722],["T_PUBLIC","public",723],["T_WHITESPACE"," ",723],["T_FUNCTION","function",723],["T_WHITESPACE"," ",723],["T_STRING","getCustomerCompareList",723],"(",")",["T_WHITESPACE","\n    ",723],"{",["T_WHITESPACE","\n        ",724],["T_IF","if",725],["T_WHITESPACE"," ",725],"(","!",["T_STRING","is_null",725],"(",["T_VARIABLE","$this",725],["T_OBJECT_OPERATOR","->",725],["T_STRING","_compareList",725],")",")",["T_WHITESPACE"," ",725],"{",["T_WHITESPACE","\n            ",725],["T_RETURN","return",726],["T_WHITESPACE"," ",726],["T_VARIABLE","$this",726],["T_OBJECT_OPERATOR","->",726],["T_STRING","_compareList",726],";",["T_WHITESPACE","\n        ",726],"}",["T_WHITESPACE","\n        ",727],["T_VARIABLE","$customerId",728],["T_WHITESPACE"," ",728],"=",["T_WHITESPACE"," ",728],["T_INT_CAST","(int)",728],["T_VARIABLE","$this",728],["T_OBJECT_OPERATOR","->",728],["T_STRING","getSession",728],"(",")",["T_OBJECT_OPERATOR","->",728],["T_STRING","getCustomerId",728],"(",")",";",["T_WHITESPACE","\n        ",728],["T_IF","if",729],["T_WHITESPACE"," ",729],"(",["T_VARIABLE","$customerId",729],")",["T_WHITESPACE"," ",729],"{",["T_WHITESPACE","\n            ",729],["T_VARIABLE","$this",730],["T_OBJECT_OPERATOR","->",730],["T_STRING","_compareList",730],["T_WHITESPACE"," ",730],"=",["T_WHITESPACE"," ",730],["T_VARIABLE","$this",730],["T_OBJECT_OPERATOR","->",730],["T_STRING","_objectManager",730],["T_OBJECT_OPERATOR","->",730],["T_STRING","create",730],"(",["T_WHITESPACE","\n                ",730],["T_NS_SEPARATOR","\\",731],["T_STRING","Magento",731],["T_NS_SEPARATOR","\\",731],["T_STRING","Catalog",731],["T_NS_SEPARATOR","\\",731],["T_STRING","Model",731],["T_NS_SEPARATOR","\\",731],["T_STRING","Product",731],["T_NS_SEPARATOR","\\",731],["T_STRING","Compare",731],["T_NS_SEPARATOR","\\",731],["T_STRING","ListCompare",731],["T_DOUBLE_COLON","::",731],["T_CLASS","class",731],")",";",["T_WHITESPACE","\n        ",731],"}",["T_WHITESPACE"," ",732],["T_ELSE","else",732],["T_WHITESPACE"," ",732],"{",["T_WHITESPACE","\n            ",732],["T_VARIABLE","$this",733],["T_OBJECT_OPERATOR","->",733],["T_STRING","_compareList",733],["T_WHITESPACE"," ",733],"=",["T_WHITESPACE"," ",733],["T_STRING","false",733],";",["T_WHITESPACE","\n        ",733],"}",["T_WHITESPACE","\n\n        ",734],["T_RETURN","return",736],["T_WHITESPACE"," ",736],["T_VARIABLE","$this",736],["T_OBJECT_OPERATOR","->",736],["T_STRING","_compareList",736],";",["T_WHITESPACE","\n    ",736],"}",["T_WHITESPACE","\n\n    ",737],["T_DOC_COMMENT","\/**\n     * Retrieve current customer group ID.\n     *\n     * @return int\n     *\/",739],["T_WHITESPACE","\n    ",743],["T_PUBLIC","public",744],["T_WHITESPACE"," ",744],["T_FUNCTION","function",744],["T_WHITESPACE"," ",744],["T_STRING","getCustomerGroupId",744],"(",")",["T_WHITESPACE","\n    ",744],"{",["T_WHITESPACE","\n        ",745],["T_VARIABLE","$groupId",746],["T_WHITESPACE"," ",746],"=",["T_WHITESPACE"," ",746],["T_VARIABLE","$this",746],["T_OBJECT_OPERATOR","->",746],["T_STRING","getQuote",746],"(",")",["T_OBJECT_OPERATOR","->",746],["T_STRING","getCustomerGroupId",746],"(",")",";",["T_WHITESPACE","\n        ",746],["T_IF","if",747],["T_WHITESPACE"," ",747],"(","!",["T_VARIABLE","$groupId",747],")",["T_WHITESPACE"," ",747],"{",["T_WHITESPACE","\n            ",747],["T_VARIABLE","$groupId",748],["T_WHITESPACE"," ",748],"=",["T_WHITESPACE"," ",748],["T_VARIABLE","$this",748],["T_OBJECT_OPERATOR","->",748],["T_STRING","getSession",748],"(",")",["T_OBJECT_OPERATOR","->",748],["T_STRING","getCustomerGroupId",748],"(",")",";",["T_WHITESPACE","\n        ",748],"}",["T_WHITESPACE","\n\n        ",749],["T_RETURN","return",751],["T_WHITESPACE"," ",751],["T_VARIABLE","$groupId",751],";",["T_WHITESPACE","\n    ",751],"}",["T_WHITESPACE","\n\n    ",752],["T_DOC_COMMENT","\/**\n     * Move quote item to another items list\n     *\n     * @param int|\\Magento\\Quote\\Model\\Quote\\Item $item\n     * @param string $moveTo\n     * @param int $qty\n     * @return $this\n     * @throws \\Magento\\Framework\\Exception\\LocalizedException\n     * @SuppressWarnings(PHPMD.CyclomaticComplexity)\n     * @SuppressWarnings(PHPMD.ExcessiveMethodLength)\n     *\/",754],["T_WHITESPACE","\n    ",764],["T_PUBLIC","public",765],["T_WHITESPACE"," ",765],["T_FUNCTION","function",765],["T_WHITESPACE"," ",765],["T_STRING","moveQuoteItem",765],"(",["T_VARIABLE","$item",765],",",["T_WHITESPACE"," ",765],["T_VARIABLE","$moveTo",765],",",["T_WHITESPACE"," ",765],["T_VARIABLE","$qty",765],")",["T_WHITESPACE","\n    ",765],"{",["T_WHITESPACE","\n        ",766],["T_VARIABLE","$item",767],["T_WHITESPACE"," ",767],"=",["T_WHITESPACE"," ",767],["T_VARIABLE","$this",767],["T_OBJECT_OPERATOR","->",767],["T_STRING","_getQuoteItem",767],"(",["T_VARIABLE","$item",767],")",";",["T_WHITESPACE","\n        ",767],["T_IF","if",768],["T_WHITESPACE"," ",768],"(",["T_VARIABLE","$item",768],")",["T_WHITESPACE"," ",768],"{",["T_WHITESPACE","\n            ",768],["T_VARIABLE","$removeItem",769],["T_WHITESPACE"," ",769],"=",["T_WHITESPACE"," ",769],["T_STRING","false",769],";",["T_WHITESPACE","\n            ",769],["T_VARIABLE","$moveTo",770],["T_WHITESPACE"," ",770],"=",["T_WHITESPACE"," ",770],["T_STRING","explode",770],"(",["T_CONSTANT_ENCAPSED_STRING","'_'",770],",",["T_WHITESPACE"," ",770],["T_VARIABLE","$moveTo",770],")",";",["T_WHITESPACE","\n            ",770],["T_SWITCH","switch",771],["T_WHITESPACE"," ",771],"(",["T_VARIABLE","$moveTo",771],"[",["T_LNUMBER","0",771],"]",")",["T_WHITESPACE"," ",771],"{",["T_WHITESPACE","\n                ",771],["T_CASE","case",772],["T_WHITESPACE"," ",772],["T_CONSTANT_ENCAPSED_STRING","'order'",772],":",["T_WHITESPACE","\n                    ",772],["T_VARIABLE","$info",773],["T_WHITESPACE"," ",773],"=",["T_WHITESPACE"," ",773],["T_VARIABLE","$item",773],["T_OBJECT_OPERATOR","->",773],["T_STRING","getBuyRequest",773],"(",")",";",["T_WHITESPACE","\n                    ",773],["T_VARIABLE","$info",774],["T_OBJECT_OPERATOR","->",774],["T_STRING","setOptions",774],"(",["T_VARIABLE","$this",774],["T_OBJECT_OPERATOR","->",774],["T_STRING","_prepareOptionsForRequest",774],"(",["T_VARIABLE","$item",774],")",")",["T_OBJECT_OPERATOR","->",774],["T_STRING","setQty",774],"(",["T_VARIABLE","$qty",774],")",";",["T_WHITESPACE","\n\n                    ",774],["T_VARIABLE","$product",776],["T_WHITESPACE"," ",776],"=",["T_WHITESPACE"," ",776],["T_VARIABLE","$this",776],["T_OBJECT_OPERATOR","->",776],["T_STRING","_objectManager",776],["T_OBJECT_OPERATOR","->",776],["T_STRING","create",776],"(",["T_WHITESPACE","\n                        ",776],["T_NS_SEPARATOR","\\",777],["T_STRING","Magento",777],["T_NS_SEPARATOR","\\",777],["T_STRING","Catalog",777],["T_NS_SEPARATOR","\\",777],["T_STRING","Model",777],["T_NS_SEPARATOR","\\",777],["T_STRING","Product",777],["T_DOUBLE_COLON","::",777],["T_CLASS","class",777],["T_WHITESPACE","\n                    ",777],")",["T_OBJECT_OPERATOR","->",778],["T_STRING","setStoreId",778],"(",["T_WHITESPACE","\n                        ",778],["T_VARIABLE","$this",779],["T_OBJECT_OPERATOR","->",779],["T_STRING","getQuote",779],"(",")",["T_OBJECT_OPERATOR","->",779],["T_STRING","getStoreId",779],"(",")",["T_WHITESPACE","\n                    ",779],")",["T_OBJECT_OPERATOR","->",780],["T_STRING","load",780],"(",["T_WHITESPACE","\n                        ",780],["T_VARIABLE","$item",781],["T_OBJECT_OPERATOR","->",781],["T_STRING","getProduct",781],"(",")",["T_OBJECT_OPERATOR","->",781],["T_STRING","getId",781],"(",")",["T_WHITESPACE","\n                    ",781],")",";",["T_WHITESPACE","\n\n                    ",782],["T_VARIABLE","$product",784],["T_OBJECT_OPERATOR","->",784],["T_STRING","setSkipCheckRequiredOption",784],"(",["T_STRING","true",784],")",";",["T_WHITESPACE","\n                    ",784],["T_VARIABLE","$newItem",785],["T_WHITESPACE"," ",785],"=",["T_WHITESPACE"," ",785],["T_VARIABLE","$this",785],["T_OBJECT_OPERATOR","->",785],["T_STRING","getQuote",785],"(",")",["T_OBJECT_OPERATOR","->",785],["T_STRING","addProduct",785],"(",["T_VARIABLE","$product",785],",",["T_WHITESPACE"," ",785],["T_VARIABLE","$info",785],")",";",["T_WHITESPACE","\n\n                    ",785],["T_IF","if",787],["T_WHITESPACE"," ",787],"(",["T_STRING","is_string",787],"(",["T_VARIABLE","$newItem",787],")",")",["T_WHITESPACE"," ",787],"{",["T_WHITESPACE","\n                        ",787],["T_THROW","throw",788],["T_WHITESPACE"," ",788],["T_NEW","new",788],["T_WHITESPACE"," ",788],["T_NS_SEPARATOR","\\",788],["T_STRING","Magento",788],["T_NS_SEPARATOR","\\",788],["T_STRING","Framework",788],["T_NS_SEPARATOR","\\",788],["T_STRING","Exception",788],["T_NS_SEPARATOR","\\",788],["T_STRING","LocalizedException",788],"(",["T_STRING","__",788],"(",["T_VARIABLE","$newItem",788],")",")",";",["T_WHITESPACE","\n                    ",788],"}",["T_WHITESPACE","\n                    ",789],["T_VARIABLE","$product",790],["T_OBJECT_OPERATOR","->",790],["T_STRING","unsSkipCheckRequiredOption",790],"(",")",";",["T_WHITESPACE","\n                    ",790],["T_VARIABLE","$newItem",791],["T_OBJECT_OPERATOR","->",791],["T_STRING","checkData",791],"(",")",";",["T_WHITESPACE","\n                    ",791],["T_VARIABLE","$this",792],["T_OBJECT_OPERATOR","->",792],["T_STRING","_needCollectCart",792],["T_WHITESPACE"," ",792],"=",["T_WHITESPACE"," ",792],["T_STRING","true",792],";",["T_WHITESPACE","\n                    ",792],["T_BREAK","break",793],";",["T_WHITESPACE","\n                ",793],["T_CASE","case",794],["T_WHITESPACE"," ",794],["T_CONSTANT_ENCAPSED_STRING","'cart'",794],":",["T_WHITESPACE","\n                    ",794],["T_VARIABLE","$cart",795],["T_WHITESPACE"," ",795],"=",["T_WHITESPACE"," ",795],["T_VARIABLE","$this",795],["T_OBJECT_OPERATOR","->",795],["T_STRING","getCustomerCart",795],"(",")",";",["T_WHITESPACE","\n                    ",795],["T_IF","if",796],["T_WHITESPACE"," ",796],"(",["T_VARIABLE","$cart",796],["T_WHITESPACE"," ",796],["T_BOOLEAN_AND","&&",796],["T_WHITESPACE"," ",796],["T_STRING","is_null",796],"(",["T_VARIABLE","$item",796],["T_OBJECT_OPERATOR","->",796],["T_STRING","getOptionByCode",796],"(",["T_CONSTANT_ENCAPSED_STRING","'additional_options'",796],")",")",")",["T_WHITESPACE"," ",796],"{",["T_WHITESPACE","\n                        ",796],["T_COMMENT","\/\/options and info buy request\n",797],["T_WHITESPACE","                        ",798],["T_VARIABLE","$product",798],["T_WHITESPACE"," ",798],"=",["T_WHITESPACE"," ",798],["T_VARIABLE","$this",798],["T_OBJECT_OPERATOR","->",798],["T_STRING","_objectManager",798],["T_OBJECT_OPERATOR","->",798],["T_STRING","create",798],"(",["T_WHITESPACE","\n                            ",798],["T_NS_SEPARATOR","\\",799],["T_STRING","Magento",799],["T_NS_SEPARATOR","\\",799],["T_STRING","Catalog",799],["T_NS_SEPARATOR","\\",799],["T_STRING","Model",799],["T_NS_SEPARATOR","\\",799],["T_STRING","Product",799],["T_DOUBLE_COLON","::",799],["T_CLASS","class",799],["T_WHITESPACE","\n                        ",799],")",["T_OBJECT_OPERATOR","->",800],["T_STRING","setStoreId",800],"(",["T_WHITESPACE","\n                            ",800],["T_VARIABLE","$this",801],["T_OBJECT_OPERATOR","->",801],["T_STRING","getQuote",801],"(",")",["T_OBJECT_OPERATOR","->",801],["T_STRING","getStoreId",801],"(",")",["T_WHITESPACE","\n                        ",801],")",["T_OBJECT_OPERATOR","->",802],["T_STRING","load",802],"(",["T_WHITESPACE","\n                            ",802],["T_VARIABLE","$item",803],["T_OBJECT_OPERATOR","->",803],["T_STRING","getProduct",803],"(",")",["T_OBJECT_OPERATOR","->",803],["T_STRING","getId",803],"(",")",["T_WHITESPACE","\n                        ",803],")",";",["T_WHITESPACE","\n\n                        ",804],["T_VARIABLE","$info",806],["T_WHITESPACE"," ",806],"=",["T_WHITESPACE"," ",806],["T_VARIABLE","$item",806],["T_OBJECT_OPERATOR","->",806],["T_STRING","getOptionByCode",806],"(",["T_CONSTANT_ENCAPSED_STRING","'info_buyRequest'",806],")",";",["T_WHITESPACE","\n                        ",806],["T_IF","if",807],["T_WHITESPACE"," ",807],"(",["T_VARIABLE","$info",807],")",["T_WHITESPACE"," ",807],"{",["T_WHITESPACE","\n                            ",807],["T_VARIABLE","$info",808],["T_WHITESPACE"," ",808],"=",["T_WHITESPACE"," ",808],["T_NEW","new",808],["T_WHITESPACE"," ",808],["T_NS_SEPARATOR","\\",808],["T_STRING","Magento",808],["T_NS_SEPARATOR","\\",808],["T_STRING","Framework",808],["T_NS_SEPARATOR","\\",808],["T_STRING","DataObject",808],"(",["T_WHITESPACE","\n                                ",808],["T_VARIABLE","$this",809],["T_OBJECT_OPERATOR","->",809],["T_STRING","serializer",809],["T_OBJECT_OPERATOR","->",809],["T_STRING","unserialize",809],"(",["T_VARIABLE","$info",809],["T_OBJECT_OPERATOR","->",809],["T_STRING","getValue",809],"(",")",")",["T_WHITESPACE","\n                            ",809],")",";",["T_WHITESPACE","\n                            ",810],["T_VARIABLE","$info",811],["T_OBJECT_OPERATOR","->",811],["T_STRING","setQty",811],"(",["T_VARIABLE","$qty",811],")",";",["T_WHITESPACE","\n                            ",811],["T_VARIABLE","$info",812],["T_OBJECT_OPERATOR","->",812],["T_STRING","setOptions",812],"(",["T_VARIABLE","$this",812],["T_OBJECT_OPERATOR","->",812],["T_STRING","_prepareOptionsForRequest",812],"(",["T_VARIABLE","$item",812],")",")",";",["T_WHITESPACE","\n                        ",812],"}",["T_WHITESPACE"," ",813],["T_ELSE","else",813],["T_WHITESPACE"," ",813],"{",["T_WHITESPACE","\n                            ",813],["T_VARIABLE","$info",814],["T_WHITESPACE"," ",814],"=",["T_WHITESPACE"," ",814],["T_NEW","new",814],["T_WHITESPACE"," ",814],["T_NS_SEPARATOR","\\",814],["T_STRING","Magento",814],["T_NS_SEPARATOR","\\",814],["T_STRING","Framework",814],["T_NS_SEPARATOR","\\",814],["T_STRING","DataObject",814],"(",["T_WHITESPACE","\n                                ",814],"[",["T_WHITESPACE","\n                                    ",815],["T_CONSTANT_ENCAPSED_STRING","'product_id'",816],["T_WHITESPACE"," ",816],["T_DOUBLE_ARROW","=>",816],["T_WHITESPACE"," ",816],["T_VARIABLE","$product",816],["T_OBJECT_OPERATOR","->",816],["T_STRING","getId",816],"(",")",",",["T_WHITESPACE","\n                                    ",816],["T_CONSTANT_ENCAPSED_STRING","'qty'",817],["T_WHITESPACE"," ",817],["T_DOUBLE_ARROW","=>",817],["T_WHITESPACE"," ",817],["T_VARIABLE","$qty",817],",",["T_WHITESPACE","\n                                    ",817],["T_CONSTANT_ENCAPSED_STRING","'options'",818],["T_WHITESPACE"," ",818],["T_DOUBLE_ARROW","=>",818],["T_WHITESPACE"," ",818],["T_VARIABLE","$this",818],["T_OBJECT_OPERATOR","->",818],["T_STRING","_prepareOptionsForRequest",818],"(",["T_VARIABLE","$item",818],")",["T_WHITESPACE","\n                                ",818],"]",["T_WHITESPACE","\n                            ",819],")",";",["T_WHITESPACE","\n                        ",820],"}",["T_WHITESPACE","\n\n                        ",821],["T_VARIABLE","$cartItem",823],["T_WHITESPACE"," ",823],"=",["T_WHITESPACE"," ",823],["T_VARIABLE","$cart",823],["T_OBJECT_OPERATOR","->",823],["T_STRING","addProduct",823],"(",["T_VARIABLE","$product",823],",",["T_WHITESPACE"," ",823],["T_VARIABLE","$info",823],")",";",["T_WHITESPACE","\n                        ",823],["T_IF","if",824],["T_WHITESPACE"," ",824],"(",["T_STRING","is_string",824],"(",["T_VARIABLE","$cartItem",824],")",")",["T_WHITESPACE"," ",824],"{",["T_WHITESPACE","\n                            ",824],["T_THROW","throw",825],["T_WHITESPACE"," ",825],["T_NEW","new",825],["T_WHITESPACE"," ",825],["T_NS_SEPARATOR","\\",825],["T_STRING","Magento",825],["T_NS_SEPARATOR","\\",825],["T_STRING","Framework",825],["T_NS_SEPARATOR","\\",825],["T_STRING","Exception",825],["T_NS_SEPARATOR","\\",825],["T_STRING","LocalizedException",825],"(",["T_STRING","__",825],"(",["T_VARIABLE","$cartItem",825],")",")",";",["T_WHITESPACE","\n                        ",825],"}",["T_WHITESPACE","\n                        ",826],["T_VARIABLE","$cartItem",827],["T_OBJECT_OPERATOR","->",827],["T_STRING","setPrice",827],"(",["T_VARIABLE","$item",827],["T_OBJECT_OPERATOR","->",827],["T_STRING","getProduct",827],"(",")",["T_OBJECT_OPERATOR","->",827],["T_STRING","getPrice",827],"(",")",")",";",["T_WHITESPACE","\n                        ",827],["T_VARIABLE","$this",828],["T_OBJECT_OPERATOR","->",828],["T_STRING","_needCollectCart",828],["T_WHITESPACE"," ",828],"=",["T_WHITESPACE"," ",828],["T_STRING","true",828],";",["T_WHITESPACE","\n                        ",828],["T_VARIABLE","$removeItem",829],["T_WHITESPACE"," ",829],"=",["T_WHITESPACE"," ",829],["T_STRING","true",829],";",["T_WHITESPACE","\n                    ",829],"}",["T_WHITESPACE","\n                    ",830],["T_BREAK","break",831],";",["T_WHITESPACE","\n                ",831],["T_CASE","case",832],["T_WHITESPACE"," ",832],["T_CONSTANT_ENCAPSED_STRING","'wishlist'",832],":",["T_WHITESPACE","\n                    ",832],["T_VARIABLE","$wishlist",833],["T_WHITESPACE"," ",833],"=",["T_WHITESPACE"," ",833],["T_STRING","null",833],";",["T_WHITESPACE","\n                    ",833],["T_IF","if",834],["T_WHITESPACE"," ",834],"(","!",["T_ISSET","isset",834],"(",["T_VARIABLE","$moveTo",834],"[",["T_LNUMBER","1",834],"]",")",")",["T_WHITESPACE"," ",834],"{",["T_WHITESPACE","\n                        ",834],["T_VARIABLE","$wishlist",835],["T_WHITESPACE"," ",835],"=",["T_WHITESPACE"," ",835],["T_VARIABLE","$this",835],["T_OBJECT_OPERATOR","->",835],["T_STRING","_objectManager",835],["T_OBJECT_OPERATOR","->",835],["T_STRING","create",835],"(",["T_WHITESPACE","\n                            ",835],["T_NS_SEPARATOR","\\",836],["T_STRING","Magento",836],["T_NS_SEPARATOR","\\",836],["T_STRING","Wishlist",836],["T_NS_SEPARATOR","\\",836],["T_STRING","Model",836],["T_NS_SEPARATOR","\\",836],["T_STRING","Wishlist",836],["T_DOUBLE_COLON","::",836],["T_CLASS","class",836],["T_WHITESPACE","\n                        ",836],")",["T_OBJECT_OPERATOR","->",837],["T_STRING","loadByCustomerId",837],"(",["T_WHITESPACE","\n                            ",837],["T_VARIABLE","$this",838],["T_OBJECT_OPERATOR","->",838],["T_STRING","getSession",838],"(",")",["T_OBJECT_OPERATOR","->",838],["T_STRING","getCustomerId",838],"(",")",",",["T_WHITESPACE","\n                            ",838],["T_STRING","true",839],["T_WHITESPACE","\n                        ",839],")",";",["T_WHITESPACE","\n                    ",840],"}",["T_WHITESPACE"," ",841],["T_ELSE","else",841],["T_WHITESPACE"," ",841],"{",["T_WHITESPACE","\n                        ",841],["T_VARIABLE","$wishlist",842],["T_WHITESPACE"," ",842],"=",["T_WHITESPACE"," ",842],["T_VARIABLE","$this",842],["T_OBJECT_OPERATOR","->",842],["T_STRING","_objectManager",842],["T_OBJECT_OPERATOR","->",842],["T_STRING","create",842],"(",["T_WHITESPACE","\n                            ",842],["T_NS_SEPARATOR","\\",843],["T_STRING","Magento",843],["T_NS_SEPARATOR","\\",843],["T_STRING","Wishlist",843],["T_NS_SEPARATOR","\\",843],["T_STRING","Model",843],["T_NS_SEPARATOR","\\",843],["T_STRING","Wishlist",843],["T_DOUBLE_COLON","::",843],["T_CLASS","class",843],")",["T_OBJECT_OPERATOR","->",843],["T_STRING","load",843],"(",["T_VARIABLE","$moveTo",843],"[",["T_LNUMBER","1",843],"]",")",";",["T_WHITESPACE","\n                        ",843],["T_IF","if",844],["T_WHITESPACE"," ",844],"(","!",["T_VARIABLE","$wishlist",844],["T_OBJECT_OPERATOR","->",844],["T_STRING","getId",844],"(",")",["T_WHITESPACE"," ",844],["T_BOOLEAN_OR","||",844],["T_WHITESPACE"," ",844],["T_VARIABLE","$wishlist",844],["T_OBJECT_OPERATOR","->",844],["T_STRING","getCustomerId",844],"(",")",["T_WHITESPACE"," ",844],["T_IS_NOT_EQUAL","!=",844],["T_WHITESPACE"," ",844],["T_VARIABLE","$this",844],["T_OBJECT_OPERATOR","->",844],["T_STRING","getSession",844],"(",")",["T_OBJECT_OPERATOR","->",844],["T_STRING","getCustomerId",844],"(",")",["T_WHITESPACE","\n                        ",844],")",["T_WHITESPACE"," ",845],"{",["T_WHITESPACE","\n                            ",845],["T_VARIABLE","$wishlist",846],["T_WHITESPACE"," ",846],"=",["T_WHITESPACE"," ",846],["T_STRING","null",846],";",["T_WHITESPACE","\n                        ",846],"}",["T_WHITESPACE","\n                    ",847],"}",["T_WHITESPACE","\n                    ",848],["T_IF","if",849],["T_WHITESPACE"," ",849],"(","!",["T_VARIABLE","$wishlist",849],")",["T_WHITESPACE"," ",849],"{",["T_WHITESPACE","\n                        ",849],["T_THROW","throw",850],["T_WHITESPACE"," ",850],["T_NEW","new",850],["T_WHITESPACE"," ",850],["T_NS_SEPARATOR","\\",850],["T_STRING","Magento",850],["T_NS_SEPARATOR","\\",850],["T_STRING","Framework",850],["T_NS_SEPARATOR","\\",850],["T_STRING","Exception",850],["T_NS_SEPARATOR","\\",850],["T_STRING","LocalizedException",850],"(",["T_WHITESPACE","\n                            ",850],["T_STRING","__",851],"(",["T_CONSTANT_ENCAPSED_STRING","'We can\\'t find this wish list.'",851],")",["T_WHITESPACE","\n                        ",851],")",";",["T_WHITESPACE","\n                    ",852],"}",["T_WHITESPACE","\n                    ",853],["T_VARIABLE","$wishlist",854],["T_OBJECT_OPERATOR","->",854],["T_STRING","setStore",854],"(",["T_WHITESPACE","\n                        ",854],["T_VARIABLE","$this",855],["T_OBJECT_OPERATOR","->",855],["T_STRING","getSession",855],"(",")",["T_OBJECT_OPERATOR","->",855],["T_STRING","getStore",855],"(",")",["T_WHITESPACE","\n                    ",855],")",["T_OBJECT_OPERATOR","->",856],["T_STRING","setSharedStoreIds",856],"(",["T_WHITESPACE","\n                        ",856],["T_VARIABLE","$this",857],["T_OBJECT_OPERATOR","->",857],["T_STRING","getSession",857],"(",")",["T_OBJECT_OPERATOR","->",857],["T_STRING","getStore",857],"(",")",["T_OBJECT_OPERATOR","->",857],["T_STRING","getWebsite",857],"(",")",["T_OBJECT_OPERATOR","->",857],["T_STRING","getStoreIds",857],"(",")",["T_WHITESPACE","\n                    ",857],")",";",["T_WHITESPACE","\n\n                    ",858],["T_IF","if",860],["T_WHITESPACE"," ",860],"(",["T_VARIABLE","$wishlist",860],["T_OBJECT_OPERATOR","->",860],["T_STRING","getId",860],"(",")",["T_WHITESPACE"," ",860],["T_BOOLEAN_AND","&&",860],["T_WHITESPACE"," ",860],["T_VARIABLE","$item",860],["T_OBJECT_OPERATOR","->",860],["T_STRING","getProduct",860],"(",")",["T_OBJECT_OPERATOR","->",860],["T_STRING","isVisibleInSiteVisibility",860],"(",")",")",["T_WHITESPACE"," ",860],"{",["T_WHITESPACE","\n                        ",860],["T_VARIABLE","$info",861],["T_WHITESPACE"," ",861],"=",["T_WHITESPACE"," ",861],["T_VARIABLE","$item",861],["T_OBJECT_OPERATOR","->",861],["T_STRING","getBuyRequest",861],"(",")",";",["T_WHITESPACE","\n                        ",861],["T_VARIABLE","$info",862],["T_OBJECT_OPERATOR","->",862],["T_STRING","setOptions",862],"(",["T_WHITESPACE","\n                            ",862],["T_VARIABLE","$this",863],["T_OBJECT_OPERATOR","->",863],["T_STRING","_prepareOptionsForRequest",863],"(",["T_VARIABLE","$item",863],")",["T_WHITESPACE","\n                        ",863],")",["T_OBJECT_OPERATOR","->",864],["T_STRING","setQty",864],"(",["T_WHITESPACE","\n                            ",864],["T_VARIABLE","$qty",865],["T_WHITESPACE","\n                        ",865],")",["T_OBJECT_OPERATOR","->",866],["T_STRING","setStoreId",866],"(",["T_WHITESPACE","\n                            ",866],["T_VARIABLE","$this",867],["T_OBJECT_OPERATOR","->",867],["T_STRING","getSession",867],"(",")",["T_OBJECT_OPERATOR","->",867],["T_STRING","getStoreId",867],"(",")",["T_WHITESPACE","\n                        ",867],")",";",["T_WHITESPACE","\n                        ",868],["T_VARIABLE","$wishlist",869],["T_OBJECT_OPERATOR","->",869],["T_STRING","addNewItem",869],"(",["T_VARIABLE","$item",869],["T_OBJECT_OPERATOR","->",869],["T_STRING","getProduct",869],"(",")",",",["T_WHITESPACE"," ",869],["T_VARIABLE","$info",869],")",";",["T_WHITESPACE","\n                        ",869],["T_VARIABLE","$removeItem",870],["T_WHITESPACE"," ",870],"=",["T_WHITESPACE"," ",870],["T_STRING","true",870],";",["T_WHITESPACE","\n                    ",870],"}",["T_WHITESPACE","\n                    ",871],["T_BREAK","break",872],";",["T_WHITESPACE","\n                ",872],["T_CASE","case",873],["T_WHITESPACE"," ",873],["T_CONSTANT_ENCAPSED_STRING","'remove'",873],":",["T_WHITESPACE","\n                    ",873],["T_VARIABLE","$removeItem",874],["T_WHITESPACE"," ",874],"=",["T_WHITESPACE"," ",874],["T_STRING","true",874],";",["T_WHITESPACE","\n                    ",874],["T_BREAK","break",875],";",["T_WHITESPACE","\n                ",875],["T_DEFAULT","default",876],":",["T_WHITESPACE","\n                    ",876],["T_BREAK","break",877],";",["T_WHITESPACE","\n            ",877],"}",["T_WHITESPACE","\n            ",878],["T_IF","if",879],["T_WHITESPACE"," ",879],"(",["T_VARIABLE","$removeItem",879],")",["T_WHITESPACE"," ",879],"{",["T_WHITESPACE","\n                ",879],["T_VARIABLE","$this",880],["T_OBJECT_OPERATOR","->",880],["T_STRING","getQuote",880],"(",")",["T_OBJECT_OPERATOR","->",880],["T_STRING","deleteItem",880],"(",["T_VARIABLE","$item",880],")",";",["T_WHITESPACE","\n            ",880],"}",["T_WHITESPACE","\n            ",881],["T_VARIABLE","$this",882],["T_OBJECT_OPERATOR","->",882],["T_STRING","setRecollect",882],"(",["T_STRING","true",882],")",";",["T_WHITESPACE","\n        ",882],"}",["T_WHITESPACE","\n\n        ",883],["T_RETURN","return",885],["T_WHITESPACE"," ",885],["T_VARIABLE","$this",885],";",["T_WHITESPACE","\n    ",885],"}",["T_WHITESPACE","\n\n    ",886],["T_DOC_COMMENT","\/**\n     * Handle data sent from sidebar\n     *\n     * @param array $data\n     * @return $this\n     * @throws \\Magento\\Framework\\Exception\\LocalizedException\n     * @SuppressWarnings(PHPMD.CyclomaticComplexity)\n     * @SuppressWarnings(PHPMD.NPathComplexity)\n     * @SuppressWarnings(PHPMD.UnusedLocalVariable)\n     *\/",888],["T_WHITESPACE","\n    ",897],["T_PUBLIC","public",898],["T_WHITESPACE"," ",898],["T_FUNCTION","function",898],["T_WHITESPACE"," ",898],["T_STRING","applySidebarData",898],"(",["T_VARIABLE","$data",898],")",["T_WHITESPACE","\n    ",898],"{",["T_WHITESPACE","\n        ",899],["T_IF","if",900],["T_WHITESPACE"," ",900],"(",["T_ISSET","isset",900],"(",["T_VARIABLE","$data",900],"[",["T_CONSTANT_ENCAPSED_STRING","'add_order_item'",900],"]",")",")",["T_WHITESPACE"," ",900],"{",["T_WHITESPACE","\n            ",900],["T_FOREACH","foreach",901],["T_WHITESPACE"," ",901],"(",["T_VARIABLE","$data",901],"[",["T_CONSTANT_ENCAPSED_STRING","'add_order_item'",901],"]",["T_WHITESPACE"," ",901],["T_AS","as",901],["T_WHITESPACE"," ",901],["T_VARIABLE","$orderItemId",901],["T_WHITESPACE"," ",901],["T_DOUBLE_ARROW","=>",901],["T_WHITESPACE"," ",901],["T_VARIABLE","$value",901],")",["T_WHITESPACE"," ",901],"{",["T_WHITESPACE","\n                ",901],["T_COMMENT","\/* @var $orderItem \\Magento\\Sales\\Model\\Order\\Item *\/",902],["T_WHITESPACE","\n                ",902],["T_VARIABLE","$orderItem",903],["T_WHITESPACE"," ",903],"=",["T_WHITESPACE"," ",903],["T_VARIABLE","$this",903],["T_OBJECT_OPERATOR","->",903],["T_STRING","_objectManager",903],["T_OBJECT_OPERATOR","->",903],["T_STRING","create",903],"(",["T_NS_SEPARATOR","\\",903],["T_STRING","Magento",903],["T_NS_SEPARATOR","\\",903],["T_STRING","Sales",903],["T_NS_SEPARATOR","\\",903],["T_STRING","Model",903],["T_NS_SEPARATOR","\\",903],["T_STRING","Order",903],["T_NS_SEPARATOR","\\",903],["T_STRING","Item",903],["T_DOUBLE_COLON","::",903],["T_CLASS","class",903],")",["T_OBJECT_OPERATOR","->",903],["T_STRING","load",903],"(",["T_VARIABLE","$orderItemId",903],")",";",["T_WHITESPACE","\n                ",903],["T_VARIABLE","$item",904],["T_WHITESPACE"," ",904],"=",["T_WHITESPACE"," ",904],["T_VARIABLE","$this",904],["T_OBJECT_OPERATOR","->",904],["T_STRING","initFromOrderItem",904],"(",["T_VARIABLE","$orderItem",904],")",";",["T_WHITESPACE","\n                ",904],["T_IF","if",905],["T_WHITESPACE"," ",905],"(",["T_STRING","is_string",905],"(",["T_VARIABLE","$item",905],")",")",["T_WHITESPACE"," ",905],"{",["T_WHITESPACE","\n                    ",905],["T_THROW","throw",906],["T_WHITESPACE"," ",906],["T_NEW","new",906],["T_WHITESPACE"," ",906],["T_NS_SEPARATOR","\\",906],["T_STRING","Magento",906],["T_NS_SEPARATOR","\\",906],["T_STRING","Framework",906],["T_NS_SEPARATOR","\\",906],["T_STRING","Exception",906],["T_NS_SEPARATOR","\\",906],["T_STRING","LocalizedException",906],"(",["T_STRING","__",906],"(",["T_VARIABLE","$item",906],")",")",";",["T_WHITESPACE","\n                ",906],"}",["T_WHITESPACE","\n            ",907],"}",["T_WHITESPACE","\n        ",908],"}",["T_WHITESPACE","\n        ",909],["T_IF","if",910],["T_WHITESPACE"," ",910],"(",["T_ISSET","isset",910],"(",["T_VARIABLE","$data",910],"[",["T_CONSTANT_ENCAPSED_STRING","'add_cart_item'",910],"]",")",")",["T_WHITESPACE"," ",910],"{",["T_WHITESPACE","\n            ",910],["T_FOREACH","foreach",911],["T_WHITESPACE"," ",911],"(",["T_VARIABLE","$data",911],"[",["T_CONSTANT_ENCAPSED_STRING","'add_cart_item'",911],"]",["T_WHITESPACE"," ",911],["T_AS","as",911],["T_WHITESPACE"," ",911],["T_VARIABLE","$itemId",911],["T_WHITESPACE"," ",911],["T_DOUBLE_ARROW","=>",911],["T_WHITESPACE"," ",911],["T_VARIABLE","$qty",911],")",["T_WHITESPACE"," ",911],"{",["T_WHITESPACE","\n                ",911],["T_VARIABLE","$item",912],["T_WHITESPACE"," ",912],"=",["T_WHITESPACE"," ",912],["T_VARIABLE","$this",912],["T_OBJECT_OPERATOR","->",912],["T_STRING","getCustomerCart",912],"(",")",["T_OBJECT_OPERATOR","->",912],["T_STRING","getItemById",912],"(",["T_VARIABLE","$itemId",912],")",";",["T_WHITESPACE","\n                ",912],["T_IF","if",913],["T_WHITESPACE"," ",913],"(",["T_VARIABLE","$item",913],")",["T_WHITESPACE"," ",913],"{",["T_WHITESPACE","\n                    ",913],["T_VARIABLE","$this",914],["T_OBJECT_OPERATOR","->",914],["T_STRING","moveQuoteItem",914],"(",["T_VARIABLE","$item",914],",",["T_WHITESPACE"," ",914],["T_CONSTANT_ENCAPSED_STRING","'order'",914],",",["T_WHITESPACE"," ",914],["T_VARIABLE","$qty",914],")",";",["T_WHITESPACE","\n                    ",914],["T_VARIABLE","$this",915],["T_OBJECT_OPERATOR","->",915],["T_STRING","removeItem",915],"(",["T_VARIABLE","$itemId",915],",",["T_WHITESPACE"," ",915],["T_CONSTANT_ENCAPSED_STRING","'cart'",915],")",";",["T_WHITESPACE","\n                ",915],"}",["T_WHITESPACE","\n            ",916],"}",["T_WHITESPACE","\n        ",917],"}",["T_WHITESPACE","\n        ",918],["T_IF","if",919],["T_WHITESPACE"," ",919],"(",["T_ISSET","isset",919],"(",["T_VARIABLE","$data",919],"[",["T_CONSTANT_ENCAPSED_STRING","'add_wishlist_item'",919],"]",")",")",["T_WHITESPACE"," ",919],"{",["T_WHITESPACE","\n            ",919],["T_FOREACH","foreach",920],["T_WHITESPACE"," ",920],"(",["T_VARIABLE","$data",920],"[",["T_CONSTANT_ENCAPSED_STRING","'add_wishlist_item'",920],"]",["T_WHITESPACE"," ",920],["T_AS","as",920],["T_WHITESPACE"," ",920],["T_VARIABLE","$itemId",920],["T_WHITESPACE"," ",920],["T_DOUBLE_ARROW","=>",920],["T_WHITESPACE"," ",920],["T_VARIABLE","$qty",920],")",["T_WHITESPACE"," ",920],"{",["T_WHITESPACE","\n                ",920],["T_VARIABLE","$item",921],["T_WHITESPACE"," ",921],"=",["T_WHITESPACE"," ",921],["T_VARIABLE","$this",921],["T_OBJECT_OPERATOR","->",921],["T_STRING","_objectManager",921],["T_OBJECT_OPERATOR","->",921],["T_STRING","create",921],"(",["T_WHITESPACE","\n                    ",921],["T_NS_SEPARATOR","\\",922],["T_STRING","Magento",922],["T_NS_SEPARATOR","\\",922],["T_STRING","Wishlist",922],["T_NS_SEPARATOR","\\",922],["T_STRING","Model",922],["T_NS_SEPARATOR","\\",922],["T_STRING","Item",922],["T_DOUBLE_COLON","::",922],["T_CLASS","class",922],["T_WHITESPACE","\n                ",922],")",["T_OBJECT_OPERATOR","->",923],["T_STRING","loadWithOptions",923],"(",["T_WHITESPACE","\n                    ",923],["T_VARIABLE","$itemId",924],",",["T_WHITESPACE","\n                    ",924],["T_CONSTANT_ENCAPSED_STRING","'info_buyRequest'",925],["T_WHITESPACE","\n                ",925],")",";",["T_WHITESPACE","\n                ",926],["T_IF","if",927],["T_WHITESPACE"," ",927],"(",["T_VARIABLE","$item",927],["T_OBJECT_OPERATOR","->",927],["T_STRING","getId",927],"(",")",")",["T_WHITESPACE"," ",927],"{",["T_WHITESPACE","\n                    ",927],["T_VARIABLE","$this",928],["T_OBJECT_OPERATOR","->",928],["T_STRING","addProduct",928],"(",["T_VARIABLE","$item",928],["T_OBJECT_OPERATOR","->",928],["T_STRING","getProduct",928],"(",")",",",["T_WHITESPACE"," ",928],["T_VARIABLE","$item",928],["T_OBJECT_OPERATOR","->",928],["T_STRING","getBuyRequest",928],"(",")",["T_OBJECT_OPERATOR","->",928],["T_STRING","toArray",928],"(",")",")",";",["T_WHITESPACE","\n                ",928],"}",["T_WHITESPACE","\n            ",929],"}",["T_WHITESPACE","\n        ",930],"}",["T_WHITESPACE","\n        ",931],["T_IF","if",932],["T_WHITESPACE"," ",932],"(",["T_ISSET","isset",932],"(",["T_VARIABLE","$data",932],"[",["T_CONSTANT_ENCAPSED_STRING","'add'",932],"]",")",")",["T_WHITESPACE"," ",932],"{",["T_WHITESPACE","\n            ",932],["T_FOREACH","foreach",933],["T_WHITESPACE"," ",933],"(",["T_VARIABLE","$data",933],"[",["T_CONSTANT_ENCAPSED_STRING","'add'",933],"]",["T_WHITESPACE"," ",933],["T_AS","as",933],["T_WHITESPACE"," ",933],["T_VARIABLE","$productId",933],["T_WHITESPACE"," ",933],["T_DOUBLE_ARROW","=>",933],["T_WHITESPACE"," ",933],["T_VARIABLE","$qty",933],")",["T_WHITESPACE"," ",933],"{",["T_WHITESPACE","\n                ",933],["T_VARIABLE","$this",934],["T_OBJECT_OPERATOR","->",934],["T_STRING","addProduct",934],"(",["T_VARIABLE","$productId",934],",",["T_WHITESPACE"," ",934],"[",["T_CONSTANT_ENCAPSED_STRING","'qty'",934],["T_WHITESPACE"," ",934],["T_DOUBLE_ARROW","=>",934],["T_WHITESPACE"," ",934],["T_VARIABLE","$qty",934],"]",")",";",["T_WHITESPACE","\n            ",934],"}",["T_WHITESPACE","\n        ",935],"}",["T_WHITESPACE","\n        ",936],["T_IF","if",937],["T_WHITESPACE"," ",937],"(",["T_ISSET","isset",937],"(",["T_VARIABLE","$data",937],"[",["T_CONSTANT_ENCAPSED_STRING","'remove'",937],"]",")",")",["T_WHITESPACE"," ",937],"{",["T_WHITESPACE","\n            ",937],["T_FOREACH","foreach",938],["T_WHITESPACE"," ",938],"(",["T_VARIABLE","$data",938],"[",["T_CONSTANT_ENCAPSED_STRING","'remove'",938],"]",["T_WHITESPACE"," ",938],["T_AS","as",938],["T_WHITESPACE"," ",938],["T_VARIABLE","$itemId",938],["T_WHITESPACE"," ",938],["T_DOUBLE_ARROW","=>",938],["T_WHITESPACE"," ",938],["T_VARIABLE","$from",938],")",["T_WHITESPACE"," ",938],"{",["T_WHITESPACE","\n                ",938],["T_VARIABLE","$this",939],["T_OBJECT_OPERATOR","->",939],["T_STRING","removeItem",939],"(",["T_VARIABLE","$itemId",939],",",["T_WHITESPACE"," ",939],["T_VARIABLE","$from",939],")",";",["T_WHITESPACE","\n            ",939],"}",["T_WHITESPACE","\n        ",940],"}",["T_WHITESPACE","\n        ",941],["T_IF","if",942],["T_WHITESPACE"," ",942],"(",["T_ISSET","isset",942],"(",["T_VARIABLE","$data",942],"[",["T_CONSTANT_ENCAPSED_STRING","'empty_customer_cart'",942],"]",")",["T_WHITESPACE"," ",942],["T_BOOLEAN_AND","&&",942],["T_WHITESPACE"," ",942],["T_INT_CAST","(int)",942],["T_VARIABLE","$data",942],"[",["T_CONSTANT_ENCAPSED_STRING","'empty_customer_cart'",942],"]",["T_WHITESPACE"," ",942],["T_IS_EQUAL","==",942],["T_WHITESPACE"," ",942],["T_LNUMBER","1",942],")",["T_WHITESPACE"," ",942],"{",["T_WHITESPACE","\n            ",942],["T_VARIABLE","$this",943],["T_OBJECT_OPERATOR","->",943],["T_STRING","getCustomerCart",943],"(",")",["T_OBJECT_OPERATOR","->",943],["T_STRING","removeAllItems",943],"(",")",["T_OBJECT_OPERATOR","->",943],["T_STRING","collectTotals",943],"(",")",";",["T_WHITESPACE","\n            ",943],["T_VARIABLE","$this",944],["T_OBJECT_OPERATOR","->",944],["T_STRING","quoteRepository",944],["T_OBJECT_OPERATOR","->",944],["T_STRING","save",944],"(",["T_VARIABLE","$this",944],["T_OBJECT_OPERATOR","->",944],["T_STRING","getCustomerCart",944],"(",")",")",";",["T_WHITESPACE","\n        ",944],"}",["T_WHITESPACE","\n\n        ",945],["T_VARIABLE","$this",947],["T_OBJECT_OPERATOR","->",947],["T_STRING","recollectCart",947],"(",")",";",["T_WHITESPACE","\n\n        ",947],["T_RETURN","return",949],["T_WHITESPACE"," ",949],["T_VARIABLE","$this",949],";",["T_WHITESPACE","\n    ",949],"}",["T_WHITESPACE","\n\n    ",950],["T_DOC_COMMENT","\/**\n     * Remove item from some of customer items storage (shopping cart, wishlist etc.)\n     *\n     * @param int $itemId\n     * @param string $from\n     * @return $this\n     *\/",952],["T_WHITESPACE","\n    ",958],["T_PUBLIC","public",959],["T_WHITESPACE"," ",959],["T_FUNCTION","function",959],["T_WHITESPACE"," ",959],["T_STRING","removeItem",959],"(",["T_VARIABLE","$itemId",959],",",["T_WHITESPACE"," ",959],["T_VARIABLE","$from",959],")",["T_WHITESPACE","\n    ",959],"{",["T_WHITESPACE","\n        ",960],["T_SWITCH","switch",961],["T_WHITESPACE"," ",961],"(",["T_VARIABLE","$from",961],")",["T_WHITESPACE"," ",961],"{",["T_WHITESPACE","\n            ",961],["T_CASE","case",962],["T_WHITESPACE"," ",962],["T_CONSTANT_ENCAPSED_STRING","'quote'",962],":",["T_WHITESPACE","\n                ",962],["T_VARIABLE","$this",963],["T_OBJECT_OPERATOR","->",963],["T_STRING","removeQuoteItem",963],"(",["T_VARIABLE","$itemId",963],")",";",["T_WHITESPACE","\n                ",963],["T_BREAK","break",964],";",["T_WHITESPACE","\n            ",964],["T_CASE","case",965],["T_WHITESPACE"," ",965],["T_CONSTANT_ENCAPSED_STRING","'cart'",965],":",["T_WHITESPACE","\n                ",965],["T_VARIABLE","$cart",966],["T_WHITESPACE"," ",966],"=",["T_WHITESPACE"," ",966],["T_VARIABLE","$this",966],["T_OBJECT_OPERATOR","->",966],["T_STRING","getCustomerCart",966],"(",")",";",["T_WHITESPACE","\n                ",966],["T_IF","if",967],["T_WHITESPACE"," ",967],"(",["T_VARIABLE","$cart",967],")",["T_WHITESPACE"," ",967],"{",["T_WHITESPACE","\n                    ",967],["T_VARIABLE","$cart",968],["T_OBJECT_OPERATOR","->",968],["T_STRING","removeItem",968],"(",["T_VARIABLE","$itemId",968],")",";",["T_WHITESPACE","\n                    ",968],["T_VARIABLE","$this",969],["T_OBJECT_OPERATOR","->",969],["T_STRING","_needCollectCart",969],["T_WHITESPACE"," ",969],"=",["T_WHITESPACE"," ",969],["T_STRING","true",969],";",["T_WHITESPACE","\n                ",969],"}",["T_WHITESPACE","\n                ",970],["T_BREAK","break",971],";",["T_WHITESPACE","\n            ",971],["T_CASE","case",972],["T_WHITESPACE"," ",972],["T_CONSTANT_ENCAPSED_STRING","'wishlist'",972],":",["T_WHITESPACE","\n                ",972],["T_VARIABLE","$wishlist",973],["T_WHITESPACE"," ",973],"=",["T_WHITESPACE"," ",973],["T_VARIABLE","$this",973],["T_OBJECT_OPERATOR","->",973],["T_STRING","getCustomerWishlist",973],"(",")",";",["T_WHITESPACE","\n                ",973],["T_IF","if",974],["T_WHITESPACE"," ",974],"(",["T_VARIABLE","$wishlist",974],")",["T_WHITESPACE"," ",974],"{",["T_WHITESPACE","\n                    ",974],["T_VARIABLE","$item",975],["T_WHITESPACE"," ",975],"=",["T_WHITESPACE"," ",975],["T_VARIABLE","$this",975],["T_OBJECT_OPERATOR","->",975],["T_STRING","_objectManager",975],["T_OBJECT_OPERATOR","->",975],["T_STRING","create",975],"(",["T_NS_SEPARATOR","\\",975],["T_STRING","Magento",975],["T_NS_SEPARATOR","\\",975],["T_STRING","Wishlist",975],["T_NS_SEPARATOR","\\",975],["T_STRING","Model",975],["T_NS_SEPARATOR","\\",975],["T_STRING","Item",975],["T_DOUBLE_COLON","::",975],["T_CLASS","class",975],")",["T_OBJECT_OPERATOR","->",975],["T_STRING","load",975],"(",["T_VARIABLE","$itemId",975],")",";",["T_WHITESPACE","\n                    ",975],["T_VARIABLE","$item",976],["T_OBJECT_OPERATOR","->",976],["T_STRING","delete",976],"(",")",";",["T_WHITESPACE","\n                ",976],"}",["T_WHITESPACE","\n                ",977],["T_BREAK","break",978],";",["T_WHITESPACE","\n            ",978],["T_CASE","case",979],["T_WHITESPACE"," ",979],["T_CONSTANT_ENCAPSED_STRING","'compared'",979],":",["T_WHITESPACE","\n                ",979],["T_VARIABLE","$this",980],["T_OBJECT_OPERATOR","->",980],["T_STRING","_objectManager",980],["T_OBJECT_OPERATOR","->",980],["T_STRING","create",980],"(",["T_WHITESPACE","\n                    ",980],["T_NS_SEPARATOR","\\",981],["T_STRING","Magento",981],["T_NS_SEPARATOR","\\",981],["T_STRING","Catalog",981],["T_NS_SEPARATOR","\\",981],["T_STRING","Model",981],["T_NS_SEPARATOR","\\",981],["T_STRING","Product",981],["T_NS_SEPARATOR","\\",981],["T_STRING","Compare",981],["T_NS_SEPARATOR","\\",981],["T_STRING","Item",981],["T_DOUBLE_COLON","::",981],["T_CLASS","class",981],")",["T_OBJECT_OPERATOR","->",981],["T_STRING","load",981],"(",["T_VARIABLE","$itemId",981],")",["T_OBJECT_OPERATOR","->",981],["T_STRING","delete",981],"(",")",";",["T_WHITESPACE","\n                ",981],["T_BREAK","break",982],";",["T_WHITESPACE","\n        ",982],"}",["T_WHITESPACE","\n\n        ",983],["T_RETURN","return",985],["T_WHITESPACE"," ",985],["T_VARIABLE","$this",985],";",["T_WHITESPACE","\n    ",985],"}",["T_WHITESPACE","\n\n    ",986],["T_DOC_COMMENT","\/**\n     * Remove quote item\n     *\n     * @param int $item\n     * @return $this\n     *\/",988],["T_WHITESPACE","\n    ",993],["T_PUBLIC","public",994],["T_WHITESPACE"," ",994],["T_FUNCTION","function",994],["T_WHITESPACE"," ",994],["T_STRING","removeQuoteItem",994],"(",["T_VARIABLE","$item",994],")",["T_WHITESPACE","\n    ",994],"{",["T_WHITESPACE","\n        ",995],["T_VARIABLE","$this",996],["T_OBJECT_OPERATOR","->",996],["T_STRING","getQuote",996],"(",")",["T_OBJECT_OPERATOR","->",996],["T_STRING","removeItem",996],"(",["T_VARIABLE","$item",996],")",";",["T_WHITESPACE","\n        ",996],["T_VARIABLE","$this",997],["T_OBJECT_OPERATOR","->",997],["T_STRING","setRecollect",997],"(",["T_STRING","true",997],")",";",["T_WHITESPACE","\n\n        ",997],["T_RETURN","return",999],["T_WHITESPACE"," ",999],["T_VARIABLE","$this",999],";",["T_WHITESPACE","\n    ",999],"}",["T_WHITESPACE","\n\n    ",1000],["T_DOC_COMMENT","\/**\n     * Add product to current order quote\n     * $product can be either product id or product model\n     * $config can be either buyRequest config, or just qty\n     *\n     * @param int|\\Magento\\Catalog\\Model\\Product $product\n     * @param array|float|int|\\Magento\\Framework\\DataObject $config\n     * @return $this\n     * @throws \\Magento\\Framework\\Exception\\LocalizedException\n     *\/",1002],["T_WHITESPACE","\n    ",1011],["T_PUBLIC","public",1012],["T_WHITESPACE"," ",1012],["T_FUNCTION","function",1012],["T_WHITESPACE"," ",1012],["T_STRING","addProduct",1012],"(",["T_VARIABLE","$product",1012],",",["T_WHITESPACE"," ",1012],["T_VARIABLE","$config",1012],["T_WHITESPACE"," ",1012],"=",["T_WHITESPACE"," ",1012],["T_LNUMBER","1",1012],")",["T_WHITESPACE","\n    ",1012],"{",["T_WHITESPACE","\n        ",1013],["T_IF","if",1014],["T_WHITESPACE"," ",1014],"(","!",["T_STRING","is_array",1014],"(",["T_VARIABLE","$config",1014],")",["T_WHITESPACE"," ",1014],["T_BOOLEAN_AND","&&",1014],["T_WHITESPACE"," ",1014],"!",["T_VARIABLE","$config",1014],["T_WHITESPACE"," ",1014],["T_INSTANCEOF","instanceof",1014],["T_WHITESPACE"," ",1014],["T_NS_SEPARATOR","\\",1014],["T_STRING","Magento",1014],["T_NS_SEPARATOR","\\",1014],["T_STRING","Framework",1014],["T_NS_SEPARATOR","\\",1014],["T_STRING","DataObject",1014],")",["T_WHITESPACE"," ",1014],"{",["T_WHITESPACE","\n            ",1014],["T_VARIABLE","$config",1015],["T_WHITESPACE"," ",1015],"=",["T_WHITESPACE"," ",1015],"[",["T_CONSTANT_ENCAPSED_STRING","'qty'",1015],["T_WHITESPACE"," ",1015],["T_DOUBLE_ARROW","=>",1015],["T_WHITESPACE"," ",1015],["T_VARIABLE","$config",1015],"]",";",["T_WHITESPACE","\n        ",1015],"}",["T_WHITESPACE","\n        ",1016],["T_VARIABLE","$config",1017],["T_WHITESPACE"," ",1017],"=",["T_WHITESPACE"," ",1017],["T_NEW","new",1017],["T_WHITESPACE"," ",1017],["T_NS_SEPARATOR","\\",1017],["T_STRING","Magento",1017],["T_NS_SEPARATOR","\\",1017],["T_STRING","Framework",1017],["T_NS_SEPARATOR","\\",1017],["T_STRING","DataObject",1017],"(",["T_VARIABLE","$config",1017],")",";",["T_WHITESPACE","\n\n        ",1017],["T_IF","if",1019],["T_WHITESPACE"," ",1019],"(","!",["T_VARIABLE","$product",1019],["T_WHITESPACE"," ",1019],["T_INSTANCEOF","instanceof",1019],["T_WHITESPACE"," ",1019],["T_NS_SEPARATOR","\\",1019],["T_STRING","Magento",1019],["T_NS_SEPARATOR","\\",1019],["T_STRING","Catalog",1019],["T_NS_SEPARATOR","\\",1019],["T_STRING","Model",1019],["T_NS_SEPARATOR","\\",1019],["T_STRING","Product",1019],")",["T_WHITESPACE"," ",1019],"{",["T_WHITESPACE","\n            ",1019],["T_VARIABLE","$productId",1020],["T_WHITESPACE"," ",1020],"=",["T_WHITESPACE"," ",1020],["T_VARIABLE","$product",1020],";",["T_WHITESPACE","\n            ",1020],["T_VARIABLE","$product",1021],["T_WHITESPACE"," ",1021],"=",["T_WHITESPACE"," ",1021],["T_VARIABLE","$this",1021],["T_OBJECT_OPERATOR","->",1021],["T_STRING","_objectManager",1021],["T_OBJECT_OPERATOR","->",1021],["T_STRING","create",1021],"(",["T_WHITESPACE","\n                ",1021],["T_NS_SEPARATOR","\\",1022],["T_STRING","Magento",1022],["T_NS_SEPARATOR","\\",1022],["T_STRING","Catalog",1022],["T_NS_SEPARATOR","\\",1022],["T_STRING","Model",1022],["T_NS_SEPARATOR","\\",1022],["T_STRING","Product",1022],["T_DOUBLE_COLON","::",1022],["T_CLASS","class",1022],["T_WHITESPACE","\n            ",1022],")",["T_OBJECT_OPERATOR","->",1023],["T_STRING","setStore",1023],"(",["T_WHITESPACE","\n                ",1023],["T_VARIABLE","$this",1024],["T_OBJECT_OPERATOR","->",1024],["T_STRING","getSession",1024],"(",")",["T_OBJECT_OPERATOR","->",1024],["T_STRING","getStore",1024],"(",")",["T_WHITESPACE","\n            ",1024],")",["T_OBJECT_OPERATOR","->",1025],["T_STRING","setStoreId",1025],"(",["T_WHITESPACE","\n                ",1025],["T_VARIABLE","$this",1026],["T_OBJECT_OPERATOR","->",1026],["T_STRING","getSession",1026],"(",")",["T_OBJECT_OPERATOR","->",1026],["T_STRING","getStoreId",1026],"(",")",["T_WHITESPACE","\n            ",1026],")",["T_OBJECT_OPERATOR","->",1027],["T_STRING","load",1027],"(",["T_WHITESPACE","\n                ",1027],["T_VARIABLE","$product",1028],["T_WHITESPACE","\n            ",1028],")",";",["T_WHITESPACE","\n            ",1029],["T_IF","if",1030],["T_WHITESPACE"," ",1030],"(","!",["T_VARIABLE","$product",1030],["T_OBJECT_OPERATOR","->",1030],["T_STRING","getId",1030],"(",")",")",["T_WHITESPACE"," ",1030],"{",["T_WHITESPACE","\n                ",1030],["T_THROW","throw",1031],["T_WHITESPACE"," ",1031],["T_NEW","new",1031],["T_WHITESPACE"," ",1031],["T_NS_SEPARATOR","\\",1031],["T_STRING","Magento",1031],["T_NS_SEPARATOR","\\",1031],["T_STRING","Framework",1031],["T_NS_SEPARATOR","\\",1031],["T_STRING","Exception",1031],["T_NS_SEPARATOR","\\",1031],["T_STRING","LocalizedException",1031],"(",["T_WHITESPACE","\n                    ",1031],["T_STRING","__",1032],"(",["T_CONSTANT_ENCAPSED_STRING","'We could not add a product to cart by the ID \"%1\".'",1032],",",["T_WHITESPACE"," ",1032],["T_VARIABLE","$productId",1032],")",["T_WHITESPACE","\n                ",1032],")",";",["T_WHITESPACE","\n            ",1033],"}",["T_WHITESPACE","\n        ",1034],"}",["T_WHITESPACE","\n\n        ",1035],["T_VARIABLE","$item",1037],["T_WHITESPACE"," ",1037],"=",["T_WHITESPACE"," ",1037],["T_VARIABLE","$this",1037],["T_OBJECT_OPERATOR","->",1037],["T_STRING","quoteInitializer",1037],["T_OBJECT_OPERATOR","->",1037],["T_STRING","init",1037],"(",["T_VARIABLE","$this",1037],["T_OBJECT_OPERATOR","->",1037],["T_STRING","getQuote",1037],"(",")",",",["T_WHITESPACE"," ",1037],["T_VARIABLE","$product",1037],",",["T_WHITESPACE"," ",1037],["T_VARIABLE","$config",1037],")",";",["T_WHITESPACE","\n\n        ",1037],["T_IF","if",1039],["T_WHITESPACE"," ",1039],"(",["T_STRING","is_string",1039],"(",["T_VARIABLE","$item",1039],")",")",["T_WHITESPACE"," ",1039],"{",["T_WHITESPACE","\n            ",1039],["T_THROW","throw",1040],["T_WHITESPACE"," ",1040],["T_NEW","new",1040],["T_WHITESPACE"," ",1040],["T_NS_SEPARATOR","\\",1040],["T_STRING","Magento",1040],["T_NS_SEPARATOR","\\",1040],["T_STRING","Framework",1040],["T_NS_SEPARATOR","\\",1040],["T_STRING","Exception",1040],["T_NS_SEPARATOR","\\",1040],["T_STRING","LocalizedException",1040],"(",["T_STRING","__",1040],"(",["T_VARIABLE","$item",1040],")",")",";",["T_WHITESPACE","\n        ",1040],"}",["T_WHITESPACE","\n        ",1041],["T_VARIABLE","$item",1042],["T_OBJECT_OPERATOR","->",1042],["T_STRING","checkData",1042],"(",")",";",["T_WHITESPACE","\n        ",1042],["T_VARIABLE","$this",1043],["T_OBJECT_OPERATOR","->",1043],["T_STRING","setRecollect",1043],"(",["T_STRING","true",1043],")",";",["T_WHITESPACE","\n\n        ",1043],["T_RETURN","return",1045],["T_WHITESPACE"," ",1045],["T_VARIABLE","$this",1045],";",["T_WHITESPACE","\n    ",1045],"}",["T_WHITESPACE","\n\n    ",1046],["T_DOC_COMMENT","\/**\n     * Add multiple products to current order quote\n     *\n     * @param array $products\n     * @return $this\n     *\/",1048],["T_WHITESPACE","\n    ",1053],["T_PUBLIC","public",1054],["T_WHITESPACE"," ",1054],["T_FUNCTION","function",1054],["T_WHITESPACE"," ",1054],["T_STRING","addProducts",1054],"(",["T_ARRAY","array",1054],["T_WHITESPACE"," ",1054],["T_VARIABLE","$products",1054],")",["T_WHITESPACE","\n    ",1054],"{",["T_WHITESPACE","\n        ",1055],["T_FOREACH","foreach",1056],["T_WHITESPACE"," ",1056],"(",["T_VARIABLE","$products",1056],["T_WHITESPACE"," ",1056],["T_AS","as",1056],["T_WHITESPACE"," ",1056],["T_VARIABLE","$productId",1056],["T_WHITESPACE"," ",1056],["T_DOUBLE_ARROW","=>",1056],["T_WHITESPACE"," ",1056],["T_VARIABLE","$config",1056],")",["T_WHITESPACE"," ",1056],"{",["T_WHITESPACE","\n            ",1056],["T_VARIABLE","$config",1057],"[",["T_CONSTANT_ENCAPSED_STRING","'qty'",1057],"]",["T_WHITESPACE"," ",1057],"=",["T_WHITESPACE"," ",1057],["T_ISSET","isset",1057],"(",["T_VARIABLE","$config",1057],"[",["T_CONSTANT_ENCAPSED_STRING","'qty'",1057],"]",")",["T_WHITESPACE"," ",1057],"?",["T_WHITESPACE"," ",1057],["T_DOUBLE_CAST","(double)",1057],["T_VARIABLE","$config",1057],"[",["T_CONSTANT_ENCAPSED_STRING","'qty'",1057],"]",["T_WHITESPACE"," ",1057],":",["T_WHITESPACE"," ",1057],["T_LNUMBER","1",1057],";",["T_WHITESPACE","\n            ",1057],["T_TRY","try",1058],["T_WHITESPACE"," ",1058],"{",["T_WHITESPACE","\n                ",1058],["T_VARIABLE","$this",1059],["T_OBJECT_OPERATOR","->",1059],["T_STRING","addProduct",1059],"(",["T_VARIABLE","$productId",1059],",",["T_WHITESPACE"," ",1059],["T_VARIABLE","$config",1059],")",";",["T_WHITESPACE","\n            ",1059],"}",["T_WHITESPACE"," ",1060],["T_CATCH","catch",1060],["T_WHITESPACE"," ",1060],"(",["T_NS_SEPARATOR","\\",1060],["T_STRING","Magento",1060],["T_NS_SEPARATOR","\\",1060],["T_STRING","Framework",1060],["T_NS_SEPARATOR","\\",1060],["T_STRING","Exception",1060],["T_NS_SEPARATOR","\\",1060],["T_STRING","LocalizedException",1060],["T_WHITESPACE"," ",1060],["T_VARIABLE","$e",1060],")",["T_WHITESPACE"," ",1060],"{",["T_WHITESPACE","\n                ",1060],["T_VARIABLE","$this",1061],["T_OBJECT_OPERATOR","->",1061],["T_STRING","messageManager",1061],["T_OBJECT_OPERATOR","->",1061],["T_STRING","addError",1061],"(",["T_VARIABLE","$e",1061],["T_OBJECT_OPERATOR","->",1061],["T_STRING","getMessage",1061],"(",")",")",";",["T_WHITESPACE","\n            ",1061],"}",["T_WHITESPACE"," ",1062],["T_CATCH","catch",1062],["T_WHITESPACE"," ",1062],"(",["T_NS_SEPARATOR","\\",1062],["T_STRING","Exception",1062],["T_WHITESPACE"," ",1062],["T_VARIABLE","$e",1062],")",["T_WHITESPACE"," ",1062],"{",["T_WHITESPACE","\n                ",1062],["T_RETURN","return",1063],["T_WHITESPACE"," ",1063],["T_VARIABLE","$e",1063],";",["T_WHITESPACE","\n            ",1063],"}",["T_WHITESPACE","\n        ",1064],"}",["T_WHITESPACE","\n\n        ",1065],["T_RETURN","return",1067],["T_WHITESPACE"," ",1067],["T_VARIABLE","$this",1067],";",["T_WHITESPACE","\n    ",1067],"}",["T_WHITESPACE","\n\n    ",1068],["T_DOC_COMMENT","\/**\n     * Update quantity of order quote items\n     *\n     * @param array $items\n     * @return $this\n     * @throws \\Exception|\\Magento\\Framework\\Exception\\LocalizedException\n     *\/",1070],["T_WHITESPACE","\n    ",1076],["T_PUBLIC","public",1077],["T_WHITESPACE"," ",1077],["T_FUNCTION","function",1077],["T_WHITESPACE"," ",1077],["T_STRING","updateQuoteItems",1077],"(",["T_VARIABLE","$items",1077],")",["T_WHITESPACE","\n    ",1077],"{",["T_WHITESPACE","\n        ",1078],["T_IF","if",1079],["T_WHITESPACE"," ",1079],"(","!",["T_STRING","is_array",1079],"(",["T_VARIABLE","$items",1079],")",")",["T_WHITESPACE"," ",1079],"{",["T_WHITESPACE","\n            ",1079],["T_RETURN","return",1080],["T_WHITESPACE"," ",1080],["T_VARIABLE","$this",1080],";",["T_WHITESPACE","\n        ",1080],"}",["T_WHITESPACE","\n\n        ",1081],["T_TRY","try",1083],["T_WHITESPACE"," ",1083],"{",["T_WHITESPACE","\n            ",1083],["T_FOREACH","foreach",1084],["T_WHITESPACE"," ",1084],"(",["T_VARIABLE","$items",1084],["T_WHITESPACE"," ",1084],["T_AS","as",1084],["T_WHITESPACE"," ",1084],["T_VARIABLE","$itemId",1084],["T_WHITESPACE"," ",1084],["T_DOUBLE_ARROW","=>",1084],["T_WHITESPACE"," ",1084],["T_VARIABLE","$info",1084],")",["T_WHITESPACE"," ",1084],"{",["T_WHITESPACE","\n                ",1084],["T_IF","if",1085],["T_WHITESPACE"," ",1085],"(","!",["T_EMPTY","empty",1085],"(",["T_VARIABLE","$info",1085],"[",["T_CONSTANT_ENCAPSED_STRING","'configured'",1085],"]",")",")",["T_WHITESPACE"," ",1085],"{",["T_WHITESPACE","\n                    ",1085],["T_VARIABLE","$item",1086],["T_WHITESPACE"," ",1086],"=",["T_WHITESPACE"," ",1086],["T_VARIABLE","$this",1086],["T_OBJECT_OPERATOR","->",1086],["T_STRING","getQuote",1086],"(",")",["T_OBJECT_OPERATOR","->",1086],["T_STRING","updateItem",1086],"(",["T_VARIABLE","$itemId",1086],",",["T_WHITESPACE"," ",1086],["T_VARIABLE","$this",1086],["T_OBJECT_OPERATOR","->",1086],["T_STRING","objectFactory",1086],["T_OBJECT_OPERATOR","->",1086],["T_STRING","create",1086],"(",["T_VARIABLE","$info",1086],")",")",";",["T_WHITESPACE","\n                    ",1086],["T_VARIABLE","$info",1087],"[",["T_CONSTANT_ENCAPSED_STRING","'qty'",1087],"]",["T_WHITESPACE"," ",1087],"=",["T_WHITESPACE"," ",1087],["T_DOUBLE_CAST","(double)",1087],["T_VARIABLE","$item",1087],["T_OBJECT_OPERATOR","->",1087],["T_STRING","getQty",1087],"(",")",";",["T_WHITESPACE","\n                ",1087],"}",["T_WHITESPACE"," ",1088],["T_ELSE","else",1088],["T_WHITESPACE"," ",1088],"{",["T_WHITESPACE","\n                    ",1088],["T_VARIABLE","$item",1089],["T_WHITESPACE"," ",1089],"=",["T_WHITESPACE"," ",1089],["T_VARIABLE","$this",1089],["T_OBJECT_OPERATOR","->",1089],["T_STRING","getQuote",1089],"(",")",["T_OBJECT_OPERATOR","->",1089],["T_STRING","getItemById",1089],"(",["T_VARIABLE","$itemId",1089],")",";",["T_WHITESPACE","\n                    ",1089],["T_IF","if",1090],["T_WHITESPACE"," ",1090],"(","!",["T_VARIABLE","$item",1090],")",["T_WHITESPACE"," ",1090],"{",["T_WHITESPACE","\n                        ",1090],["T_CONTINUE","continue",1091],";",["T_WHITESPACE","\n                    ",1091],"}",["T_WHITESPACE","\n                    ",1092],["T_VARIABLE","$info",1093],"[",["T_CONSTANT_ENCAPSED_STRING","'qty'",1093],"]",["T_WHITESPACE"," ",1093],"=",["T_WHITESPACE"," ",1093],["T_DOUBLE_CAST","(double)",1093],["T_VARIABLE","$info",1093],"[",["T_CONSTANT_ENCAPSED_STRING","'qty'",1093],"]",";",["T_WHITESPACE","\n                ",1093],"}",["T_WHITESPACE","\n                ",1094],["T_VARIABLE","$this",1095],["T_OBJECT_OPERATOR","->",1095],["T_STRING","quoteItemUpdater",1095],["T_OBJECT_OPERATOR","->",1095],["T_STRING","update",1095],"(",["T_VARIABLE","$item",1095],",",["T_WHITESPACE"," ",1095],["T_VARIABLE","$info",1095],")",";",["T_WHITESPACE","\n                ",1095],["T_IF","if",1096],["T_WHITESPACE"," ",1096],"(",["T_VARIABLE","$item",1096],["T_WHITESPACE"," ",1096],["T_BOOLEAN_AND","&&",1096],["T_WHITESPACE"," ",1096],"!",["T_EMPTY","empty",1096],"(",["T_VARIABLE","$info",1096],"[",["T_CONSTANT_ENCAPSED_STRING","'action'",1096],"]",")",")",["T_WHITESPACE"," ",1096],"{",["T_WHITESPACE","\n                    ",1096],["T_VARIABLE","$this",1097],["T_OBJECT_OPERATOR","->",1097],["T_STRING","moveQuoteItem",1097],"(",["T_VARIABLE","$item",1097],",",["T_WHITESPACE"," ",1097],["T_VARIABLE","$info",1097],"[",["T_CONSTANT_ENCAPSED_STRING","'action'",1097],"]",",",["T_WHITESPACE"," ",1097],["T_VARIABLE","$item",1097],["T_OBJECT_OPERATOR","->",1097],["T_STRING","getQty",1097],"(",")",")",";",["T_WHITESPACE","\n                ",1097],"}",["T_WHITESPACE","\n            ",1098],"}",["T_WHITESPACE","\n        ",1099],"}",["T_WHITESPACE"," ",1100],["T_CATCH","catch",1100],["T_WHITESPACE"," ",1100],"(",["T_NS_SEPARATOR","\\",1100],["T_STRING","Magento",1100],["T_NS_SEPARATOR","\\",1100],["T_STRING","Framework",1100],["T_NS_SEPARATOR","\\",1100],["T_STRING","Exception",1100],["T_NS_SEPARATOR","\\",1100],["T_STRING","LocalizedException",1100],["T_WHITESPACE"," ",1100],["T_VARIABLE","$e",1100],")",["T_WHITESPACE"," ",1100],"{",["T_WHITESPACE","\n            ",1100],["T_VARIABLE","$this",1101],["T_OBJECT_OPERATOR","->",1101],["T_STRING","recollectCart",1101],"(",")",";",["T_WHITESPACE","\n            ",1101],["T_THROW","throw",1102],["T_WHITESPACE"," ",1102],["T_VARIABLE","$e",1102],";",["T_WHITESPACE","\n        ",1102],"}",["T_WHITESPACE"," ",1103],["T_CATCH","catch",1103],["T_WHITESPACE"," ",1103],"(",["T_NS_SEPARATOR","\\",1103],["T_STRING","Exception",1103],["T_WHITESPACE"," ",1103],["T_VARIABLE","$e",1103],")",["T_WHITESPACE"," ",1103],"{",["T_WHITESPACE","\n            ",1103],["T_VARIABLE","$this",1104],["T_OBJECT_OPERATOR","->",1104],["T_STRING","_logger",1104],["T_OBJECT_OPERATOR","->",1104],["T_STRING","critical",1104],"(",["T_VARIABLE","$e",1104],")",";",["T_WHITESPACE","\n        ",1104],"}",["T_WHITESPACE","\n        ",1105],["T_VARIABLE","$this",1106],["T_OBJECT_OPERATOR","->",1106],["T_STRING","recollectCart",1106],"(",")",";",["T_WHITESPACE","\n\n        ",1106],["T_RETURN","return",1108],["T_WHITESPACE"," ",1108],["T_VARIABLE","$this",1108],";",["T_WHITESPACE","\n    ",1108],"}",["T_WHITESPACE","\n\n    ",1109],["T_DOC_COMMENT","\/**\n     * Parse additional options and sync them with product options\n     *\n     * @param \\Magento\\Quote\\Model\\Quote\\Item $item\n     * @param string $additionalOptions\n     * @return array\n     * @throws \\Magento\\Framework\\Exception\\LocalizedException\n     *\n     * @deprecated\n     *\/",1111],["T_WHITESPACE","\n    ",1120],["T_PROTECTED","protected",1121],["T_WHITESPACE"," ",1121],["T_FUNCTION","function",1121],["T_WHITESPACE"," ",1121],["T_STRING","_parseOptions",1121],"(",["T_NS_SEPARATOR","\\",1121],["T_STRING","Magento",1121],["T_NS_SEPARATOR","\\",1121],["T_STRING","Quote",1121],["T_NS_SEPARATOR","\\",1121],["T_STRING","Model",1121],["T_NS_SEPARATOR","\\",1121],["T_STRING","Quote",1121],["T_NS_SEPARATOR","\\",1121],["T_STRING","Item",1121],["T_WHITESPACE"," ",1121],["T_VARIABLE","$item",1121],",",["T_WHITESPACE"," ",1121],["T_VARIABLE","$additionalOptions",1121],")",["T_WHITESPACE","\n    ",1121],"{",["T_WHITESPACE","\n        ",1122],["T_VARIABLE","$productOptions",1123],["T_WHITESPACE"," ",1123],"=",["T_WHITESPACE"," ",1123],["T_VARIABLE","$this",1123],["T_OBJECT_OPERATOR","->",1123],["T_STRING","_objectManager",1123],["T_OBJECT_OPERATOR","->",1123],["T_STRING","get",1123],"(",["T_WHITESPACE","\n            ",1123],["T_NS_SEPARATOR","\\",1124],["T_STRING","Magento",1124],["T_NS_SEPARATOR","\\",1124],["T_STRING","Catalog",1124],["T_NS_SEPARATOR","\\",1124],["T_STRING","Model",1124],["T_NS_SEPARATOR","\\",1124],["T_STRING","Product",1124],["T_NS_SEPARATOR","\\",1124],["T_STRING","Option",1124],["T_NS_SEPARATOR","\\",1124],["T_STRING","Type",1124],["T_NS_SEPARATOR","\\",1124],["T_STRING","DefaultType",1124],["T_DOUBLE_COLON","::",1124],["T_CLASS","class",1124],["T_WHITESPACE","\n        ",1124],")",["T_OBJECT_OPERATOR","->",1125],["T_STRING","setProduct",1125],"(",["T_WHITESPACE","\n            ",1125],["T_VARIABLE","$item",1126],["T_OBJECT_OPERATOR","->",1126],["T_STRING","getProduct",1126],"(",")",["T_WHITESPACE","\n        ",1126],")",["T_OBJECT_OPERATOR","->",1127],["T_STRING","getProductOptions",1127],"(",")",";",["T_WHITESPACE","\n\n        ",1127],["T_VARIABLE","$newOptions",1129],["T_WHITESPACE"," ",1129],"=",["T_WHITESPACE"," ",1129],"[","]",";",["T_WHITESPACE","\n        ",1129],["T_VARIABLE","$newAdditionalOptions",1130],["T_WHITESPACE"," ",1130],"=",["T_WHITESPACE"," ",1130],"[","]",";",["T_WHITESPACE","\n\n        ",1130],["T_FOREACH","foreach",1132],["T_WHITESPACE"," ",1132],"(",["T_STRING","explode",1132],"(",["T_CONSTANT_ENCAPSED_STRING","\"\\n\"",1132],",",["T_WHITESPACE"," ",1132],["T_VARIABLE","$additionalOptions",1132],")",["T_WHITESPACE"," ",1132],["T_AS","as",1132],["T_WHITESPACE"," ",1132],["T_VARIABLE","$_additionalOption",1132],")",["T_WHITESPACE"," ",1132],"{",["T_WHITESPACE","\n            ",1132],["T_IF","if",1133],["T_WHITESPACE"," ",1133],"(",["T_STRING","strlen",1133],"(",["T_STRING","trim",1133],"(",["T_VARIABLE","$_additionalOption",1133],")",")",")",["T_WHITESPACE"," ",1133],"{",["T_WHITESPACE","\n                ",1133],["T_TRY","try",1134],["T_WHITESPACE"," ",1134],"{",["T_WHITESPACE","\n                    ",1134],["T_IF","if",1135],["T_WHITESPACE"," ",1135],"(",["T_STRING","strpos",1135],"(",["T_VARIABLE","$_additionalOption",1135],",",["T_WHITESPACE"," ",1135],["T_CONSTANT_ENCAPSED_STRING","':'",1135],")",["T_WHITESPACE"," ",1135],["T_IS_IDENTICAL","===",1135],["T_WHITESPACE"," ",1135],["T_STRING","false",1135],")",["T_WHITESPACE"," ",1135],"{",["T_WHITESPACE","\n                        ",1135],["T_THROW","throw",1136],["T_WHITESPACE"," ",1136],["T_NEW","new",1136],["T_WHITESPACE"," ",1136],["T_NS_SEPARATOR","\\",1136],["T_STRING","Magento",1136],["T_NS_SEPARATOR","\\",1136],["T_STRING","Framework",1136],["T_NS_SEPARATOR","\\",1136],["T_STRING","Exception",1136],["T_NS_SEPARATOR","\\",1136],["T_STRING","LocalizedException",1136],"(",["T_STRING","__",1136],"(",["T_CONSTANT_ENCAPSED_STRING","'There is an error in one of the option rows.'",1136],")",")",";",["T_WHITESPACE","\n                    ",1136],"}",["T_WHITESPACE","\n                    ",1137],["T_LIST","list",1138],"(",["T_VARIABLE","$label",1138],",",["T_WHITESPACE"," ",1138],["T_VARIABLE","$value",1138],")",["T_WHITESPACE"," ",1138],"=",["T_WHITESPACE"," ",1138],["T_STRING","explode",1138],"(",["T_CONSTANT_ENCAPSED_STRING","':'",1138],",",["T_WHITESPACE"," ",1138],["T_VARIABLE","$_additionalOption",1138],",",["T_WHITESPACE"," ",1138],["T_LNUMBER","2",1138],")",";",["T_WHITESPACE","\n                ",1138],"}",["T_WHITESPACE"," ",1139],["T_CATCH","catch",1139],["T_WHITESPACE"," ",1139],"(",["T_NS_SEPARATOR","\\",1139],["T_STRING","Exception",1139],["T_WHITESPACE"," ",1139],["T_VARIABLE","$e",1139],")",["T_WHITESPACE"," ",1139],"{",["T_WHITESPACE","\n                    ",1139],["T_THROW","throw",1140],["T_WHITESPACE"," ",1140],["T_NEW","new",1140],["T_WHITESPACE"," ",1140],["T_NS_SEPARATOR","\\",1140],["T_STRING","Magento",1140],["T_NS_SEPARATOR","\\",1140],["T_STRING","Framework",1140],["T_NS_SEPARATOR","\\",1140],["T_STRING","Exception",1140],["T_NS_SEPARATOR","\\",1140],["T_STRING","LocalizedException",1140],"(",["T_STRING","__",1140],"(",["T_CONSTANT_ENCAPSED_STRING","'There is an error in one of the option rows.'",1140],")",")",";",["T_WHITESPACE","\n                ",1140],"}",["T_WHITESPACE","\n                ",1141],["T_VARIABLE","$label",1142],["T_WHITESPACE"," ",1142],"=",["T_WHITESPACE"," ",1142],["T_STRING","trim",1142],"(",["T_VARIABLE","$label",1142],")",";",["T_WHITESPACE","\n                ",1142],["T_VARIABLE","$value",1143],["T_WHITESPACE"," ",1143],"=",["T_WHITESPACE"," ",1143],["T_STRING","trim",1143],"(",["T_VARIABLE","$value",1143],")",";",["T_WHITESPACE","\n                ",1143],["T_IF","if",1144],["T_WHITESPACE"," ",1144],"(",["T_EMPTY","empty",1144],"(",["T_VARIABLE","$value",1144],")",")",["T_WHITESPACE"," ",1144],"{",["T_WHITESPACE","\n                    ",1144],["T_CONTINUE","continue",1145],";",["T_WHITESPACE","\n                ",1145],"}",["T_WHITESPACE","\n\n                ",1146],["T_IF","if",1148],["T_WHITESPACE"," ",1148],"(",["T_STRING","array_key_exists",1148],"(",["T_VARIABLE","$label",1148],",",["T_WHITESPACE"," ",1148],["T_VARIABLE","$productOptions",1148],")",")",["T_WHITESPACE"," ",1148],"{",["T_WHITESPACE","\n                    ",1148],["T_VARIABLE","$optionId",1149],["T_WHITESPACE"," ",1149],"=",["T_WHITESPACE"," ",1149],["T_VARIABLE","$productOptions",1149],"[",["T_VARIABLE","$label",1149],"]","[",["T_CONSTANT_ENCAPSED_STRING","'option_id'",1149],"]",";",["T_WHITESPACE","\n                    ",1149],["T_VARIABLE","$option",1150],["T_WHITESPACE"," ",1150],"=",["T_WHITESPACE"," ",1150],["T_VARIABLE","$item",1150],["T_OBJECT_OPERATOR","->",1150],["T_STRING","getProduct",1150],"(",")",["T_OBJECT_OPERATOR","->",1150],["T_STRING","getOptionById",1150],"(",["T_VARIABLE","$optionId",1150],")",";",["T_WHITESPACE","\n\n                    ",1150],["T_VARIABLE","$group",1152],["T_WHITESPACE"," ",1152],"=",["T_WHITESPACE"," ",1152],["T_VARIABLE","$this",1152],["T_OBJECT_OPERATOR","->",1152],["T_STRING","_objectManager",1152],["T_OBJECT_OPERATOR","->",1152],["T_STRING","get",1152],"(",["T_WHITESPACE","\n                        ",1152],["T_NS_SEPARATOR","\\",1153],["T_STRING","Magento",1153],["T_NS_SEPARATOR","\\",1153],["T_STRING","Catalog",1153],["T_NS_SEPARATOR","\\",1153],["T_STRING","Model",1153],["T_NS_SEPARATOR","\\",1153],["T_STRING","Product",1153],["T_NS_SEPARATOR","\\",1153],["T_STRING","Option",1153],["T_DOUBLE_COLON","::",1153],["T_CLASS","class",1153],["T_WHITESPACE","\n                    ",1153],")",["T_OBJECT_OPERATOR","->",1154],["T_STRING","groupFactory",1154],"(",["T_WHITESPACE","\n                        ",1154],["T_VARIABLE","$option",1155],["T_OBJECT_OPERATOR","->",1155],["T_STRING","getType",1155],"(",")",["T_WHITESPACE","\n                    ",1155],")",["T_OBJECT_OPERATOR","->",1156],["T_STRING","setOption",1156],"(",["T_WHITESPACE","\n                        ",1156],["T_VARIABLE","$option",1157],["T_WHITESPACE","\n                    ",1157],")",["T_OBJECT_OPERATOR","->",1158],["T_STRING","setProduct",1158],"(",["T_WHITESPACE","\n                        ",1158],["T_VARIABLE","$item",1159],["T_OBJECT_OPERATOR","->",1159],["T_STRING","getProduct",1159],"(",")",["T_WHITESPACE","\n                    ",1159],")",";",["T_WHITESPACE","\n\n                    ",1160],["T_VARIABLE","$parsedValue",1162],["T_WHITESPACE"," ",1162],"=",["T_WHITESPACE"," ",1162],["T_VARIABLE","$group",1162],["T_OBJECT_OPERATOR","->",1162],["T_STRING","parseOptionValue",1162],"(",["T_VARIABLE","$value",1162],",",["T_WHITESPACE"," ",1162],["T_VARIABLE","$productOptions",1162],"[",["T_VARIABLE","$label",1162],"]","[",["T_CONSTANT_ENCAPSED_STRING","'values'",1162],"]",")",";",["T_WHITESPACE","\n\n                    ",1162],["T_IF","if",1164],["T_WHITESPACE"," ",1164],"(",["T_VARIABLE","$parsedValue",1164],["T_WHITESPACE"," ",1164],["T_IS_NOT_IDENTICAL","!==",1164],["T_WHITESPACE"," ",1164],["T_STRING","null",1164],")",["T_WHITESPACE"," ",1164],"{",["T_WHITESPACE","\n                        ",1164],["T_VARIABLE","$newOptions",1165],"[",["T_VARIABLE","$optionId",1165],"]",["T_WHITESPACE"," ",1165],"=",["T_WHITESPACE"," ",1165],["T_VARIABLE","$parsedValue",1165],";",["T_WHITESPACE","\n                    ",1165],"}",["T_WHITESPACE"," ",1166],["T_ELSE","else",1166],["T_WHITESPACE"," ",1166],"{",["T_WHITESPACE","\n                        ",1166],["T_VARIABLE","$newAdditionalOptions",1167],"[","]",["T_WHITESPACE"," ",1167],"=",["T_WHITESPACE"," ",1167],"[",["T_CONSTANT_ENCAPSED_STRING","'label'",1167],["T_WHITESPACE"," ",1167],["T_DOUBLE_ARROW","=>",1167],["T_WHITESPACE"," ",1167],["T_VARIABLE","$label",1167],",",["T_WHITESPACE"," ",1167],["T_CONSTANT_ENCAPSED_STRING","'value'",1167],["T_WHITESPACE"," ",1167],["T_DOUBLE_ARROW","=>",1167],["T_WHITESPACE"," ",1167],["T_VARIABLE","$value",1167],"]",";",["T_WHITESPACE","\n                    ",1167],"}",["T_WHITESPACE","\n                ",1168],"}",["T_WHITESPACE"," ",1169],["T_ELSE","else",1169],["T_WHITESPACE"," ",1169],"{",["T_WHITESPACE","\n                    ",1169],["T_VARIABLE","$newAdditionalOptions",1170],"[","]",["T_WHITESPACE"," ",1170],"=",["T_WHITESPACE"," ",1170],"[",["T_CONSTANT_ENCAPSED_STRING","'label'",1170],["T_WHITESPACE"," ",1170],["T_DOUBLE_ARROW","=>",1170],["T_WHITESPACE"," ",1170],["T_VARIABLE","$label",1170],",",["T_WHITESPACE"," ",1170],["T_CONSTANT_ENCAPSED_STRING","'value'",1170],["T_WHITESPACE"," ",1170],["T_DOUBLE_ARROW","=>",1170],["T_WHITESPACE"," ",1170],["T_VARIABLE","$value",1170],"]",";",["T_WHITESPACE","\n                ",1170],"}",["T_WHITESPACE","\n            ",1171],"}",["T_WHITESPACE","\n        ",1172],"}",["T_WHITESPACE","\n\n        ",1173],["T_RETURN","return",1175],["T_WHITESPACE"," ",1175],"[",["T_CONSTANT_ENCAPSED_STRING","'options'",1175],["T_WHITESPACE"," ",1175],["T_DOUBLE_ARROW","=>",1175],["T_WHITESPACE"," ",1175],["T_VARIABLE","$newOptions",1175],",",["T_WHITESPACE"," ",1175],["T_CONSTANT_ENCAPSED_STRING","'additional_options'",1175],["T_WHITESPACE"," ",1175],["T_DOUBLE_ARROW","=>",1175],["T_WHITESPACE"," ",1175],["T_VARIABLE","$newAdditionalOptions",1175],"]",";",["T_WHITESPACE","\n    ",1175],"}",["T_WHITESPACE","\n\n    ",1176],["T_DOC_COMMENT","\/**\n     * Assign options to item\n     *\n     * @param \\Magento\\Quote\\Model\\Quote\\Item $item\n     * @param array $options\n     * @return $this\n     *\n     * @deprecated\n     *\/",1178],["T_WHITESPACE","\n    ",1186],["T_PROTECTED","protected",1187],["T_WHITESPACE"," ",1187],["T_FUNCTION","function",1187],["T_WHITESPACE"," ",1187],["T_STRING","_assignOptionsToItem",1187],"(",["T_NS_SEPARATOR","\\",1187],["T_STRING","Magento",1187],["T_NS_SEPARATOR","\\",1187],["T_STRING","Quote",1187],["T_NS_SEPARATOR","\\",1187],["T_STRING","Model",1187],["T_NS_SEPARATOR","\\",1187],["T_STRING","Quote",1187],["T_NS_SEPARATOR","\\",1187],["T_STRING","Item",1187],["T_WHITESPACE"," ",1187],["T_VARIABLE","$item",1187],",",["T_WHITESPACE"," ",1187],["T_VARIABLE","$options",1187],")",["T_WHITESPACE","\n    ",1187],"{",["T_WHITESPACE","\n        ",1188],["T_VARIABLE","$optionIds",1189],["T_WHITESPACE"," ",1189],"=",["T_WHITESPACE"," ",1189],["T_VARIABLE","$item",1189],["T_OBJECT_OPERATOR","->",1189],["T_STRING","getOptionByCode",1189],"(",["T_CONSTANT_ENCAPSED_STRING","'option_ids'",1189],")",";",["T_WHITESPACE","\n        ",1189],["T_IF","if",1190],["T_WHITESPACE"," ",1190],"(",["T_VARIABLE","$optionIds",1190],")",["T_WHITESPACE"," ",1190],"{",["T_WHITESPACE","\n            ",1190],["T_FOREACH","foreach",1191],["T_WHITESPACE"," ",1191],"(",["T_STRING","explode",1191],"(",["T_CONSTANT_ENCAPSED_STRING","','",1191],",",["T_WHITESPACE"," ",1191],["T_VARIABLE","$optionIds",1191],["T_OBJECT_OPERATOR","->",1191],["T_STRING","getValue",1191],"(",")",")",["T_WHITESPACE"," ",1191],["T_AS","as",1191],["T_WHITESPACE"," ",1191],["T_VARIABLE","$optionId",1191],")",["T_WHITESPACE"," ",1191],"{",["T_WHITESPACE","\n                ",1191],["T_VARIABLE","$item",1192],["T_OBJECT_OPERATOR","->",1192],["T_STRING","removeOption",1192],"(",["T_CONSTANT_ENCAPSED_STRING","'option_'",1192],["T_WHITESPACE"," ",1192],".",["T_WHITESPACE"," ",1192],["T_VARIABLE","$optionId",1192],")",";",["T_WHITESPACE","\n            ",1192],"}",["T_WHITESPACE","\n            ",1193],["T_VARIABLE","$item",1194],["T_OBJECT_OPERATOR","->",1194],["T_STRING","removeOption",1194],"(",["T_CONSTANT_ENCAPSED_STRING","'option_ids'",1194],")",";",["T_WHITESPACE","\n        ",1194],"}",["T_WHITESPACE","\n        ",1195],["T_IF","if",1196],["T_WHITESPACE"," ",1196],"(",["T_VARIABLE","$item",1196],["T_OBJECT_OPERATOR","->",1196],["T_STRING","getOptionByCode",1196],"(",["T_CONSTANT_ENCAPSED_STRING","'additional_options'",1196],")",")",["T_WHITESPACE"," ",1196],"{",["T_WHITESPACE","\n            ",1196],["T_VARIABLE","$item",1197],["T_OBJECT_OPERATOR","->",1197],["T_STRING","removeOption",1197],"(",["T_CONSTANT_ENCAPSED_STRING","'additional_options'",1197],")",";",["T_WHITESPACE","\n        ",1197],"}",["T_WHITESPACE","\n        ",1198],["T_VARIABLE","$item",1199],["T_OBJECT_OPERATOR","->",1199],["T_STRING","save",1199],"(",")",";",["T_WHITESPACE","\n        ",1199],["T_IF","if",1200],["T_WHITESPACE"," ",1200],"(","!",["T_EMPTY","empty",1200],"(",["T_VARIABLE","$options",1200],"[",["T_CONSTANT_ENCAPSED_STRING","'options'",1200],"]",")",")",["T_WHITESPACE"," ",1200],"{",["T_WHITESPACE","\n            ",1200],["T_VARIABLE","$item",1201],["T_OBJECT_OPERATOR","->",1201],["T_STRING","addOption",1201],"(",["T_WHITESPACE","\n                ",1201],["T_NEW","new",1202],["T_WHITESPACE"," ",1202],["T_NS_SEPARATOR","\\",1202],["T_STRING","Magento",1202],["T_NS_SEPARATOR","\\",1202],["T_STRING","Framework",1202],["T_NS_SEPARATOR","\\",1202],["T_STRING","DataObject",1202],"(",["T_WHITESPACE","\n                    ",1202],"[",["T_WHITESPACE","\n                        ",1203],["T_CONSTANT_ENCAPSED_STRING","'product'",1204],["T_WHITESPACE"," ",1204],["T_DOUBLE_ARROW","=>",1204],["T_WHITESPACE"," ",1204],["T_VARIABLE","$item",1204],["T_OBJECT_OPERATOR","->",1204],["T_STRING","getProduct",1204],"(",")",",",["T_WHITESPACE","\n                        ",1204],["T_CONSTANT_ENCAPSED_STRING","'code'",1205],["T_WHITESPACE"," ",1205],["T_DOUBLE_ARROW","=>",1205],["T_WHITESPACE"," ",1205],["T_CONSTANT_ENCAPSED_STRING","'option_ids'",1205],",",["T_WHITESPACE","\n                        ",1205],["T_CONSTANT_ENCAPSED_STRING","'value'",1206],["T_WHITESPACE"," ",1206],["T_DOUBLE_ARROW","=>",1206],["T_WHITESPACE"," ",1206],["T_STRING","implode",1206],"(",["T_CONSTANT_ENCAPSED_STRING","','",1206],",",["T_WHITESPACE"," ",1206],["T_STRING","array_keys",1206],"(",["T_VARIABLE","$options",1206],"[",["T_CONSTANT_ENCAPSED_STRING","'options'",1206],"]",")",")",["T_WHITESPACE","\n                    ",1206],"]",["T_WHITESPACE","\n                ",1207],")",["T_WHITESPACE","\n            ",1208],")",";",["T_WHITESPACE","\n\n            ",1209],["T_FOREACH","foreach",1211],["T_WHITESPACE"," ",1211],"(",["T_VARIABLE","$options",1211],"[",["T_CONSTANT_ENCAPSED_STRING","'options'",1211],"]",["T_WHITESPACE"," ",1211],["T_AS","as",1211],["T_WHITESPACE"," ",1211],["T_VARIABLE","$optionId",1211],["T_WHITESPACE"," ",1211],["T_DOUBLE_ARROW","=>",1211],["T_WHITESPACE"," ",1211],["T_VARIABLE","$optionValue",1211],")",["T_WHITESPACE"," ",1211],"{",["T_WHITESPACE","\n                ",1211],["T_VARIABLE","$item",1212],["T_OBJECT_OPERATOR","->",1212],["T_STRING","addOption",1212],"(",["T_WHITESPACE","\n                    ",1212],["T_NEW","new",1213],["T_WHITESPACE"," ",1213],["T_NS_SEPARATOR","\\",1213],["T_STRING","Magento",1213],["T_NS_SEPARATOR","\\",1213],["T_STRING","Framework",1213],["T_NS_SEPARATOR","\\",1213],["T_STRING","DataObject",1213],"(",["T_WHITESPACE","\n                        ",1213],"[",["T_WHITESPACE","\n                            ",1214],["T_CONSTANT_ENCAPSED_STRING","'product'",1215],["T_WHITESPACE"," ",1215],["T_DOUBLE_ARROW","=>",1215],["T_WHITESPACE"," ",1215],["T_VARIABLE","$item",1215],["T_OBJECT_OPERATOR","->",1215],["T_STRING","getProduct",1215],"(",")",",",["T_WHITESPACE","\n                            ",1215],["T_CONSTANT_ENCAPSED_STRING","'code'",1216],["T_WHITESPACE"," ",1216],["T_DOUBLE_ARROW","=>",1216],["T_WHITESPACE"," ",1216],["T_CONSTANT_ENCAPSED_STRING","'option_'",1216],["T_WHITESPACE"," ",1216],".",["T_WHITESPACE"," ",1216],["T_VARIABLE","$optionId",1216],",",["T_WHITESPACE","\n                            ",1216],["T_CONSTANT_ENCAPSED_STRING","'value'",1217],["T_WHITESPACE"," ",1217],["T_DOUBLE_ARROW","=>",1217],["T_WHITESPACE"," ",1217],["T_VARIABLE","$optionValue",1217],["T_WHITESPACE","\n                        ",1217],"]",["T_WHITESPACE","\n                    ",1218],")",["T_WHITESPACE","\n                ",1219],")",";",["T_WHITESPACE","\n            ",1220],"}",["T_WHITESPACE","\n        ",1221],"}",["T_WHITESPACE","\n        ",1222],["T_IF","if",1223],["T_WHITESPACE"," ",1223],"(","!",["T_EMPTY","empty",1223],"(",["T_VARIABLE","$options",1223],"[",["T_CONSTANT_ENCAPSED_STRING","'additional_options'",1223],"]",")",")",["T_WHITESPACE"," ",1223],"{",["T_WHITESPACE","\n            ",1223],["T_VARIABLE","$item",1224],["T_OBJECT_OPERATOR","->",1224],["T_STRING","addOption",1224],"(",["T_WHITESPACE","\n                ",1224],["T_NEW","new",1225],["T_WHITESPACE"," ",1225],["T_NS_SEPARATOR","\\",1225],["T_STRING","Magento",1225],["T_NS_SEPARATOR","\\",1225],["T_STRING","Framework",1225],["T_NS_SEPARATOR","\\",1225],["T_STRING","DataObject",1225],"(",["T_WHITESPACE","\n                    ",1225],"[",["T_WHITESPACE","\n                        ",1226],["T_CONSTANT_ENCAPSED_STRING","'product'",1227],["T_WHITESPACE"," ",1227],["T_DOUBLE_ARROW","=>",1227],["T_WHITESPACE"," ",1227],["T_VARIABLE","$item",1227],["T_OBJECT_OPERATOR","->",1227],["T_STRING","getProduct",1227],"(",")",",",["T_WHITESPACE","\n                        ",1227],["T_CONSTANT_ENCAPSED_STRING","'code'",1228],["T_WHITESPACE"," ",1228],["T_DOUBLE_ARROW","=>",1228],["T_WHITESPACE"," ",1228],["T_CONSTANT_ENCAPSED_STRING","'additional_options'",1228],",",["T_WHITESPACE","\n                        ",1228],["T_CONSTANT_ENCAPSED_STRING","'value'",1229],["T_WHITESPACE"," ",1229],["T_DOUBLE_ARROW","=>",1229],["T_WHITESPACE"," ",1229],["T_VARIABLE","$this",1229],["T_OBJECT_OPERATOR","->",1229],["T_STRING","serializer",1229],["T_OBJECT_OPERATOR","->",1229],["T_STRING","serialize",1229],"(",["T_VARIABLE","$options",1229],"[",["T_CONSTANT_ENCAPSED_STRING","'additional_options'",1229],"]",")",["T_WHITESPACE","\n                    ",1229],"]",["T_WHITESPACE","\n                ",1230],")",["T_WHITESPACE","\n            ",1231],")",";",["T_WHITESPACE","\n        ",1232],"}",["T_WHITESPACE","\n\n        ",1233],["T_RETURN","return",1235],["T_WHITESPACE"," ",1235],["T_VARIABLE","$this",1235],";",["T_WHITESPACE","\n    ",1235],"}",["T_WHITESPACE","\n\n    ",1236],["T_DOC_COMMENT","\/**\n     * Prepare options array for info buy request\n     *\n     * @param \\Magento\\Quote\\Model\\Quote\\Item $item\n     * @return array\n     *\/",1238],["T_WHITESPACE","\n    ",1243],["T_PROTECTED","protected",1244],["T_WHITESPACE"," ",1244],["T_FUNCTION","function",1244],["T_WHITESPACE"," ",1244],["T_STRING","_prepareOptionsForRequest",1244],"(",["T_VARIABLE","$item",1244],")",["T_WHITESPACE","\n    ",1244],"{",["T_WHITESPACE","\n        ",1245],["T_VARIABLE","$newInfoOptions",1246],["T_WHITESPACE"," ",1246],"=",["T_WHITESPACE"," ",1246],"[","]",";",["T_WHITESPACE","\n        ",1246],["T_VARIABLE","$optionIds",1247],["T_WHITESPACE"," ",1247],"=",["T_WHITESPACE"," ",1247],["T_VARIABLE","$item",1247],["T_OBJECT_OPERATOR","->",1247],["T_STRING","getOptionByCode",1247],"(",["T_CONSTANT_ENCAPSED_STRING","'option_ids'",1247],")",";",["T_WHITESPACE","\n        ",1247],["T_IF","if",1248],["T_WHITESPACE"," ",1248],"(",["T_VARIABLE","$optionIds",1248],")",["T_WHITESPACE"," ",1248],"{",["T_WHITESPACE","\n            ",1248],["T_FOREACH","foreach",1249],["T_WHITESPACE"," ",1249],"(",["T_STRING","explode",1249],"(",["T_CONSTANT_ENCAPSED_STRING","','",1249],",",["T_WHITESPACE"," ",1249],["T_VARIABLE","$optionIds",1249],["T_OBJECT_OPERATOR","->",1249],["T_STRING","getValue",1249],"(",")",")",["T_WHITESPACE"," ",1249],["T_AS","as",1249],["T_WHITESPACE"," ",1249],["T_VARIABLE","$optionId",1249],")",["T_WHITESPACE"," ",1249],"{",["T_WHITESPACE","\n                ",1249],["T_VARIABLE","$option",1250],["T_WHITESPACE"," ",1250],"=",["T_WHITESPACE"," ",1250],["T_VARIABLE","$item",1250],["T_OBJECT_OPERATOR","->",1250],["T_STRING","getProduct",1250],"(",")",["T_OBJECT_OPERATOR","->",1250],["T_STRING","getOptionById",1250],"(",["T_VARIABLE","$optionId",1250],")",";",["T_WHITESPACE","\n                ",1250],["T_VARIABLE","$optionValue",1251],["T_WHITESPACE"," ",1251],"=",["T_WHITESPACE"," ",1251],["T_VARIABLE","$item",1251],["T_OBJECT_OPERATOR","->",1251],["T_STRING","getOptionByCode",1251],"(",["T_CONSTANT_ENCAPSED_STRING","'option_'",1251],["T_WHITESPACE"," ",1251],".",["T_WHITESPACE"," ",1251],["T_VARIABLE","$optionId",1251],")",["T_OBJECT_OPERATOR","->",1251],["T_STRING","getValue",1251],"(",")",";",["T_WHITESPACE","\n\n                ",1251],["T_VARIABLE","$group",1253],["T_WHITESPACE"," ",1253],"=",["T_WHITESPACE"," ",1253],["T_VARIABLE","$this",1253],["T_OBJECT_OPERATOR","->",1253],["T_STRING","_objectManager",1253],["T_OBJECT_OPERATOR","->",1253],["T_STRING","get",1253],"(",["T_WHITESPACE","\n                    ",1253],["T_NS_SEPARATOR","\\",1254],["T_STRING","Magento",1254],["T_NS_SEPARATOR","\\",1254],["T_STRING","Catalog",1254],["T_NS_SEPARATOR","\\",1254],["T_STRING","Model",1254],["T_NS_SEPARATOR","\\",1254],["T_STRING","Product",1254],["T_NS_SEPARATOR","\\",1254],["T_STRING","Option",1254],["T_DOUBLE_COLON","::",1254],["T_CLASS","class",1254],["T_WHITESPACE","\n                ",1254],")",["T_OBJECT_OPERATOR","->",1255],["T_STRING","groupFactory",1255],"(",["T_WHITESPACE","\n                    ",1255],["T_VARIABLE","$option",1256],["T_OBJECT_OPERATOR","->",1256],["T_STRING","getType",1256],"(",")",["T_WHITESPACE","\n                ",1256],")",["T_OBJECT_OPERATOR","->",1257],["T_STRING","setOption",1257],"(",["T_WHITESPACE","\n                    ",1257],["T_VARIABLE","$option",1258],["T_WHITESPACE","\n                ",1258],")",["T_OBJECT_OPERATOR","->",1259],["T_STRING","setQuoteItem",1259],"(",["T_WHITESPACE","\n                    ",1259],["T_VARIABLE","$item",1260],["T_WHITESPACE","\n                ",1260],")",";",["T_WHITESPACE","\n\n                ",1261],["T_VARIABLE","$newInfoOptions",1263],"[",["T_VARIABLE","$optionId",1263],"]",["T_WHITESPACE"," ",1263],"=",["T_WHITESPACE"," ",1263],["T_VARIABLE","$group",1263],["T_OBJECT_OPERATOR","->",1263],["T_STRING","prepareOptionValueForRequest",1263],"(",["T_VARIABLE","$optionValue",1263],")",";",["T_WHITESPACE","\n            ",1263],"}",["T_WHITESPACE","\n        ",1264],"}",["T_WHITESPACE","\n\n        ",1265],["T_RETURN","return",1267],["T_WHITESPACE"," ",1267],["T_VARIABLE","$newInfoOptions",1267],";",["T_WHITESPACE","\n    ",1267],"}",["T_WHITESPACE","\n\n    ",1268],["T_DOC_COMMENT","\/**\n     * Return valid price\n     *\n     * @param float|int $price\n     * @return float|int\n     *\/",1270],["T_WHITESPACE","\n    ",1275],["T_PROTECTED","protected",1276],["T_WHITESPACE"," ",1276],["T_FUNCTION","function",1276],["T_WHITESPACE"," ",1276],["T_STRING","_parseCustomPrice",1276],"(",["T_VARIABLE","$price",1276],")",["T_WHITESPACE","\n    ",1276],"{",["T_WHITESPACE","\n        ",1277],["T_VARIABLE","$price",1278],["T_WHITESPACE"," ",1278],"=",["T_WHITESPACE"," ",1278],["T_VARIABLE","$this",1278],["T_OBJECT_OPERATOR","->",1278],["T_STRING","_objectManager",1278],["T_OBJECT_OPERATOR","->",1278],["T_STRING","get",1278],"(",["T_NS_SEPARATOR","\\",1278],["T_STRING","Magento",1278],["T_NS_SEPARATOR","\\",1278],["T_STRING","Framework",1278],["T_NS_SEPARATOR","\\",1278],["T_STRING","Locale",1278],["T_NS_SEPARATOR","\\",1278],["T_STRING","FormatInterface",1278],["T_DOUBLE_COLON","::",1278],["T_CLASS","class",1278],")",["T_OBJECT_OPERATOR","->",1278],["T_STRING","getNumber",1278],"(",["T_VARIABLE","$price",1278],")",";",["T_WHITESPACE","\n        ",1278],["T_VARIABLE","$price",1279],["T_WHITESPACE"," ",1279],"=",["T_WHITESPACE"," ",1279],["T_VARIABLE","$price",1279],["T_WHITESPACE"," ",1279],">",["T_WHITESPACE"," ",1279],["T_LNUMBER","0",1279],["T_WHITESPACE"," ",1279],"?",["T_WHITESPACE"," ",1279],["T_VARIABLE","$price",1279],["T_WHITESPACE"," ",1279],":",["T_WHITESPACE"," ",1279],["T_LNUMBER","0",1279],";",["T_WHITESPACE","\n\n        ",1279],["T_RETURN","return",1281],["T_WHITESPACE"," ",1281],["T_VARIABLE","$price",1281],";",["T_WHITESPACE","\n    ",1281],"}",["T_WHITESPACE","\n\n    ",1282],["T_DOC_COMMENT","\/**\n     * Retrieve oreder quote shipping address\n     *\n     * @return \\Magento\\Quote\\Model\\Quote\\Address\n     *\/",1284],["T_WHITESPACE","\n    ",1288],["T_PUBLIC","public",1289],["T_WHITESPACE"," ",1289],["T_FUNCTION","function",1289],["T_WHITESPACE"," ",1289],["T_STRING","getShippingAddress",1289],"(",")",["T_WHITESPACE","\n    ",1289],"{",["T_WHITESPACE","\n        ",1290],["T_RETURN","return",1291],["T_WHITESPACE"," ",1291],["T_VARIABLE","$this",1291],["T_OBJECT_OPERATOR","->",1291],["T_STRING","getQuote",1291],"(",")",["T_OBJECT_OPERATOR","->",1291],["T_STRING","getShippingAddress",1291],"(",")",";",["T_WHITESPACE","\n    ",1291],"}",["T_WHITESPACE","\n\n    ",1292],["T_DOC_COMMENT","\/**\n     * Return Customer (Checkout) Form instance\n     *\n     * @param \\Magento\\Customer\\Api\\Data\\CustomerInterface $customer\n     * @return CustomerForm\n     *\/",1294],["T_WHITESPACE","\n    ",1299],["T_PROTECTED","protected",1300],["T_WHITESPACE"," ",1300],["T_FUNCTION","function",1300],["T_WHITESPACE"," ",1300],["T_STRING","_createCustomerForm",1300],"(",["T_NS_SEPARATOR","\\",1300],["T_STRING","Magento",1300],["T_NS_SEPARATOR","\\",1300],["T_STRING","Customer",1300],["T_NS_SEPARATOR","\\",1300],["T_STRING","Api",1300],["T_NS_SEPARATOR","\\",1300],["T_STRING","Data",1300],["T_NS_SEPARATOR","\\",1300],["T_STRING","CustomerInterface",1300],["T_WHITESPACE"," ",1300],["T_VARIABLE","$customer",1300],")",["T_WHITESPACE","\n    ",1300],"{",["T_WHITESPACE","\n        ",1301],["T_VARIABLE","$customerForm",1302],["T_WHITESPACE"," ",1302],"=",["T_WHITESPACE"," ",1302],["T_VARIABLE","$this",1302],["T_OBJECT_OPERATOR","->",1302],["T_STRING","_metadataFormFactory",1302],["T_OBJECT_OPERATOR","->",1302],["T_STRING","create",1302],"(",["T_WHITESPACE","\n            ",1302],["T_NS_SEPARATOR","\\",1303],["T_STRING","Magento",1303],["T_NS_SEPARATOR","\\",1303],["T_STRING","Customer",1303],["T_NS_SEPARATOR","\\",1303],["T_STRING","Api",1303],["T_NS_SEPARATOR","\\",1303],["T_STRING","CustomerMetadataInterface",1303],["T_DOUBLE_COLON","::",1303],["T_STRING","ENTITY_TYPE_CUSTOMER",1303],",",["T_WHITESPACE","\n            ",1303],["T_CONSTANT_ENCAPSED_STRING","'adminhtml_checkout'",1304],",",["T_WHITESPACE","\n            ",1304],["T_VARIABLE","$this",1305],["T_OBJECT_OPERATOR","->",1305],["T_STRING","customerMapper",1305],["T_OBJECT_OPERATOR","->",1305],["T_STRING","toFlatArray",1305],"(",["T_VARIABLE","$customer",1305],")",",",["T_WHITESPACE","\n            ",1305],["T_STRING","false",1306],",",["T_WHITESPACE","\n            ",1306],["T_STRING","CustomerForm",1307],["T_DOUBLE_COLON","::",1307],["T_STRING","IGNORE_INVISIBLE",1307],["T_WHITESPACE","\n        ",1307],")",";",["T_WHITESPACE","\n\n        ",1308],["T_RETURN","return",1310],["T_WHITESPACE"," ",1310],["T_VARIABLE","$customerForm",1310],";",["T_WHITESPACE","\n    ",1310],"}",["T_WHITESPACE","\n\n    ",1311],["T_DOC_COMMENT","\/**\n     * Set and validate Quote address\n     * All errors added to _errors\n     *\n     * @param \\Magento\\Quote\\Model\\Quote\\Address $address\n     * @param array $data\n     * @return $this\n     *\/",1313],["T_WHITESPACE","\n    ",1320],["T_PROTECTED","protected",1321],["T_WHITESPACE"," ",1321],["T_FUNCTION","function",1321],["T_WHITESPACE"," ",1321],["T_STRING","_setQuoteAddress",1321],"(",["T_NS_SEPARATOR","\\",1321],["T_STRING","Magento",1321],["T_NS_SEPARATOR","\\",1321],["T_STRING","Quote",1321],["T_NS_SEPARATOR","\\",1321],["T_STRING","Model",1321],["T_NS_SEPARATOR","\\",1321],["T_STRING","Quote",1321],["T_NS_SEPARATOR","\\",1321],["T_STRING","Address",1321],["T_WHITESPACE"," ",1321],["T_VARIABLE","$address",1321],",",["T_WHITESPACE"," ",1321],["T_ARRAY","array",1321],["T_WHITESPACE"," ",1321],["T_VARIABLE","$data",1321],")",["T_WHITESPACE","\n    ",1321],"{",["T_WHITESPACE","\n        ",1322],["T_VARIABLE","$isAjax",1323],["T_WHITESPACE"," ",1323],"=",["T_WHITESPACE"," ",1323],"!",["T_VARIABLE","$this",1323],["T_OBJECT_OPERATOR","->",1323],["T_STRING","getIsValidate",1323],"(",")",";",["T_WHITESPACE","\n\n        ",1323],["T_COMMENT","\/\/ Region is a Data Object, so it is represented by an array. validateData() doesn't understand arrays, so we\n",1325],["T_WHITESPACE","        ",1326],["T_COMMENT","\/\/ need to merge region data with address data. This is going to be removed when we switch to use address Data\n",1326],["T_WHITESPACE","        ",1327],["T_COMMENT","\/\/ Object instead of the address model.\n",1327],["T_WHITESPACE","        ",1328],["T_COMMENT","\/\/ Note: if we use getRegion() here it will pull region from db using the region_id\n",1328],["T_WHITESPACE","        ",1329],["T_VARIABLE","$data",1329],["T_WHITESPACE"," ",1329],"=",["T_WHITESPACE"," ",1329],["T_ISSET","isset",1329],"(",["T_VARIABLE","$data",1329],"[",["T_CONSTANT_ENCAPSED_STRING","'region'",1329],"]",")",["T_WHITESPACE"," ",1329],["T_BOOLEAN_AND","&&",1329],["T_WHITESPACE"," ",1329],["T_STRING","is_array",1329],"(",["T_VARIABLE","$data",1329],"[",["T_CONSTANT_ENCAPSED_STRING","'region'",1329],"]",")",["T_WHITESPACE"," ",1329],"?",["T_WHITESPACE"," ",1329],["T_STRING","array_merge",1329],"(",["T_VARIABLE","$data",1329],",",["T_WHITESPACE"," ",1329],["T_VARIABLE","$data",1329],"[",["T_CONSTANT_ENCAPSED_STRING","'region'",1329],"]",")",["T_WHITESPACE"," ",1329],":",["T_WHITESPACE"," ",1329],["T_VARIABLE","$data",1329],";",["T_WHITESPACE","\n\n        ",1329],["T_VARIABLE","$addressForm",1331],["T_WHITESPACE"," ",1331],"=",["T_WHITESPACE"," ",1331],["T_VARIABLE","$this",1331],["T_OBJECT_OPERATOR","->",1331],["T_STRING","_metadataFormFactory",1331],["T_OBJECT_OPERATOR","->",1331],["T_STRING","create",1331],"(",["T_WHITESPACE","\n            \n            ",1331],["T_STRING","AddressMetadataInterface",1333],["T_DOUBLE_COLON","::",1333],["T_STRING","ENTITY_TYPE_ADDRESS",1333],",",["T_WHITESPACE","\n            ",1333],["T_CONSTANT_ENCAPSED_STRING","'adminhtml_customer_address'",1334],",",["T_WHITESPACE","\n            ",1334],["T_VARIABLE","$data",1335],",",["T_WHITESPACE","\n            ",1335],["T_VARIABLE","$isAjax",1336],",",["T_WHITESPACE","\n            ",1336],["T_STRING","CustomerForm",1337],["T_DOUBLE_COLON","::",1337],["T_STRING","DONT_IGNORE_INVISIBLE",1337],",",["T_WHITESPACE","\n            ",1337],"[","]",["T_WHITESPACE","\n        ",1338],")",";",["T_WHITESPACE","\n\n        ",1339],["T_COMMENT","\/\/ prepare request\n",1341],["T_WHITESPACE","        ",1342],["T_COMMENT","\/\/ save original request structure for files\n",1342],["T_WHITESPACE","        ",1343],["T_IF","if",1343],["T_WHITESPACE"," ",1343],"(",["T_VARIABLE","$address",1343],["T_OBJECT_OPERATOR","->",1343],["T_STRING","getAddressType",1343],"(",")",["T_WHITESPACE"," ",1343],["T_IS_EQUAL","==",1343],["T_WHITESPACE"," ",1343],["T_NS_SEPARATOR","\\",1343],["T_STRING","Magento",1343],["T_NS_SEPARATOR","\\",1343],["T_STRING","Quote",1343],["T_NS_SEPARATOR","\\",1343],["T_STRING","Model",1343],["T_NS_SEPARATOR","\\",1343],["T_STRING","Quote",1343],["T_NS_SEPARATOR","\\",1343],["T_STRING","Address",1343],["T_DOUBLE_COLON","::",1343],["T_STRING","TYPE_SHIPPING",1343],")",["T_WHITESPACE"," ",1343],"{",["T_WHITESPACE","\n            ",1343],["T_VARIABLE","$requestData",1344],["T_WHITESPACE"," ",1344],"=",["T_WHITESPACE"," ",1344],"[",["T_CONSTANT_ENCAPSED_STRING","'order'",1344],["T_WHITESPACE"," ",1344],["T_DOUBLE_ARROW","=>",1344],["T_WHITESPACE"," ",1344],"[",["T_CONSTANT_ENCAPSED_STRING","'shipping_address'",1344],["T_WHITESPACE"," ",1344],["T_DOUBLE_ARROW","=>",1344],["T_WHITESPACE"," ",1344],["T_VARIABLE","$data",1344],"]","]",";",["T_WHITESPACE","\n            ",1344],["T_VARIABLE","$requestScope",1345],["T_WHITESPACE"," ",1345],"=",["T_WHITESPACE"," ",1345],["T_CONSTANT_ENCAPSED_STRING","'order\/shipping_address'",1345],";",["T_WHITESPACE","\n        ",1345],"}",["T_WHITESPACE"," ",1346],["T_ELSE","else",1346],["T_WHITESPACE"," ",1346],"{",["T_WHITESPACE","\n            ",1346],["T_VARIABLE","$requestData",1347],["T_WHITESPACE"," ",1347],"=",["T_WHITESPACE"," ",1347],"[",["T_CONSTANT_ENCAPSED_STRING","'order'",1347],["T_WHITESPACE"," ",1347],["T_DOUBLE_ARROW","=>",1347],["T_WHITESPACE"," ",1347],"[",["T_CONSTANT_ENCAPSED_STRING","'billing_address'",1347],["T_WHITESPACE"," ",1347],["T_DOUBLE_ARROW","=>",1347],["T_WHITESPACE"," ",1347],["T_VARIABLE","$data",1347],"]","]",";",["T_WHITESPACE","\n            ",1347],["T_VARIABLE","$requestScope",1348],["T_WHITESPACE"," ",1348],"=",["T_WHITESPACE"," ",1348],["T_CONSTANT_ENCAPSED_STRING","'order\/billing_address'",1348],";",["T_WHITESPACE","\n        ",1348],"}",["T_WHITESPACE","\n        ",1349],["T_VARIABLE","$request",1350],["T_WHITESPACE"," ",1350],"=",["T_WHITESPACE"," ",1350],["T_VARIABLE","$addressForm",1350],["T_OBJECT_OPERATOR","->",1350],["T_STRING","prepareRequest",1350],"(",["T_VARIABLE","$requestData",1350],")",";",["T_WHITESPACE","\n        ",1350],["T_VARIABLE","$addressData",1351],["T_WHITESPACE"," ",1351],"=",["T_WHITESPACE"," ",1351],["T_VARIABLE","$addressForm",1351],["T_OBJECT_OPERATOR","->",1351],["T_STRING","extractData",1351],"(",["T_VARIABLE","$request",1351],",",["T_WHITESPACE"," ",1351],["T_VARIABLE","$requestScope",1351],")",";",["T_WHITESPACE","\n        ",1351],["T_IF","if",1352],["T_WHITESPACE"," ",1352],"(",["T_VARIABLE","$this",1352],["T_OBJECT_OPERATOR","->",1352],["T_STRING","getIsValidate",1352],"(",")",")",["T_WHITESPACE"," ",1352],"{",["T_WHITESPACE","\n            ",1352],["T_VARIABLE","$errors",1353],["T_WHITESPACE"," ",1353],"=",["T_WHITESPACE"," ",1353],["T_VARIABLE","$addressForm",1353],["T_OBJECT_OPERATOR","->",1353],["T_STRING","validateData",1353],"(",["T_VARIABLE","$addressData",1353],")",";",["T_WHITESPACE","\n            ",1353],["T_IF","if",1354],["T_WHITESPACE"," ",1354],"(",["T_VARIABLE","$errors",1354],["T_WHITESPACE"," ",1354],["T_IS_NOT_IDENTICAL","!==",1354],["T_WHITESPACE"," ",1354],["T_STRING","true",1354],")",["T_WHITESPACE"," ",1354],"{",["T_WHITESPACE","\n                ",1354],["T_IF","if",1355],["T_WHITESPACE"," ",1355],"(",["T_VARIABLE","$address",1355],["T_OBJECT_OPERATOR","->",1355],["T_STRING","getAddressType",1355],"(",")",["T_WHITESPACE"," ",1355],["T_IS_EQUAL","==",1355],["T_WHITESPACE"," ",1355],["T_NS_SEPARATOR","\\",1355],["T_STRING","Magento",1355],["T_NS_SEPARATOR","\\",1355],["T_STRING","Quote",1355],["T_NS_SEPARATOR","\\",1355],["T_STRING","Model",1355],["T_NS_SEPARATOR","\\",1355],["T_STRING","Quote",1355],["T_NS_SEPARATOR","\\",1355],["T_STRING","Address",1355],["T_DOUBLE_COLON","::",1355],["T_STRING","TYPE_SHIPPING",1355],")",["T_WHITESPACE"," ",1355],"{",["T_WHITESPACE","\n                    ",1355],["T_VARIABLE","$typeName",1356],["T_WHITESPACE"," ",1356],"=",["T_WHITESPACE"," ",1356],["T_STRING","__",1356],"(",["T_CONSTANT_ENCAPSED_STRING","'Shipping Address: '",1356],")",";",["T_WHITESPACE","\n                ",1356],"}",["T_WHITESPACE"," ",1357],["T_ELSE","else",1357],["T_WHITESPACE"," ",1357],"{",["T_WHITESPACE","\n                    ",1357],["T_VARIABLE","$typeName",1358],["T_WHITESPACE"," ",1358],"=",["T_WHITESPACE"," ",1358],["T_STRING","__",1358],"(",["T_CONSTANT_ENCAPSED_STRING","'Billing Address: '",1358],")",";",["T_WHITESPACE","\n                ",1358],"}",["T_WHITESPACE","\n                ",1359],["T_FOREACH","foreach",1360],["T_WHITESPACE"," ",1360],"(",["T_VARIABLE","$errors",1360],["T_WHITESPACE"," ",1360],["T_AS","as",1360],["T_WHITESPACE"," ",1360],["T_VARIABLE","$error",1360],")",["T_WHITESPACE"," ",1360],"{",["T_WHITESPACE","\n                    ",1360],["T_VARIABLE","$this",1361],["T_OBJECT_OPERATOR","->",1361],["T_STRING","_errors",1361],"[","]",["T_WHITESPACE"," ",1361],"=",["T_WHITESPACE"," ",1361],["T_VARIABLE","$typeName",1361],["T_WHITESPACE"," ",1361],".",["T_WHITESPACE"," ",1361],["T_VARIABLE","$error",1361],";",["T_WHITESPACE","\n                ",1361],"}",["T_WHITESPACE","\n                ",1362],["T_VARIABLE","$address",1363],["T_OBJECT_OPERATOR","->",1363],["T_STRING","setData",1363],"(",["T_VARIABLE","$addressForm",1363],["T_OBJECT_OPERATOR","->",1363],["T_STRING","restoreData",1363],"(",["T_VARIABLE","$addressData",1363],")",")",";",["T_WHITESPACE","\n            ",1363],"}",["T_WHITESPACE"," ",1364],["T_ELSE","else",1364],["T_WHITESPACE"," ",1364],"{",["T_WHITESPACE","\n                ",1364],["T_VARIABLE","$address",1365],["T_OBJECT_OPERATOR","->",1365],["T_STRING","setData",1365],"(",["T_VARIABLE","$addressForm",1365],["T_OBJECT_OPERATOR","->",1365],["T_STRING","compactData",1365],"(",["T_VARIABLE","$addressData",1365],")",")",";",["T_WHITESPACE","\n            ",1365],"}",["T_WHITESPACE","\n        ",1366],"}",["T_WHITESPACE"," ",1367],["T_ELSE","else",1367],["T_WHITESPACE"," ",1367],"{",["T_WHITESPACE","\n            ",1367],["T_VARIABLE","$address",1368],["T_OBJECT_OPERATOR","->",1368],["T_STRING","addData",1368],"(",["T_VARIABLE","$addressForm",1368],["T_OBJECT_OPERATOR","->",1368],["T_STRING","restoreData",1368],"(",["T_VARIABLE","$addressData",1368],")",")",";",["T_WHITESPACE","\n        ",1368],"}",["T_WHITESPACE","\n\n        ",1369],["T_RETURN","return",1371],["T_WHITESPACE"," ",1371],["T_VARIABLE","$this",1371],";",["T_WHITESPACE","\n    ",1371],"}",["T_WHITESPACE","\n\n    ",1372],["T_DOC_COMMENT","\/**\n     * Set shipping address into quote\n     *\n     * @param \\Magento\\Quote\\Model\\Quote\\Address|array $address\n     * @return $this\n     *\/",1374],["T_WHITESPACE","\n    ",1379],["T_PUBLIC","public",1380],["T_WHITESPACE"," ",1380],["T_FUNCTION","function",1380],["T_WHITESPACE"," ",1380],["T_STRING","setShippingAddress",1380],"(",["T_VARIABLE","$address",1380],")",["T_WHITESPACE","\n    ",1380],"{",["T_WHITESPACE","\n        ",1381],["T_IF","if",1382],["T_WHITESPACE"," ",1382],"(",["T_STRING","is_array",1382],"(",["T_VARIABLE","$address",1382],")",")",["T_WHITESPACE"," ",1382],"{",["T_WHITESPACE","\n            ",1382],["T_VARIABLE","$shippingAddress",1383],["T_WHITESPACE"," ",1383],"=",["T_WHITESPACE"," ",1383],["T_VARIABLE","$this",1383],["T_OBJECT_OPERATOR","->",1383],["T_STRING","_objectManager",1383],["T_OBJECT_OPERATOR","->",1383],["T_STRING","create",1383],"(",["T_WHITESPACE","\n                ",1383],["T_NS_SEPARATOR","\\",1384],["T_STRING","Magento",1384],["T_NS_SEPARATOR","\\",1384],["T_STRING","Quote",1384],["T_NS_SEPARATOR","\\",1384],["T_STRING","Model",1384],["T_NS_SEPARATOR","\\",1384],["T_STRING","Quote",1384],["T_NS_SEPARATOR","\\",1384],["T_STRING","Address",1384],["T_DOUBLE_COLON","::",1384],["T_CLASS","class",1384],["T_WHITESPACE","\n            ",1384],")",["T_OBJECT_OPERATOR","->",1385],["T_STRING","setData",1385],"(",["T_WHITESPACE","\n                ",1385],["T_VARIABLE","$address",1386],["T_WHITESPACE","\n            ",1386],")",["T_OBJECT_OPERATOR","->",1387],["T_STRING","setAddressType",1387],"(",["T_WHITESPACE","\n                ",1387],["T_NS_SEPARATOR","\\",1388],["T_STRING","Magento",1388],["T_NS_SEPARATOR","\\",1388],["T_STRING","Quote",1388],["T_NS_SEPARATOR","\\",1388],["T_STRING","Model",1388],["T_NS_SEPARATOR","\\",1388],["T_STRING","Quote",1388],["T_NS_SEPARATOR","\\",1388],["T_STRING","Address",1388],["T_DOUBLE_COLON","::",1388],["T_STRING","TYPE_SHIPPING",1388],["T_WHITESPACE","\n            ",1388],")",";",["T_WHITESPACE","\n            ",1389],["T_IF","if",1390],["T_WHITESPACE"," ",1390],"(","!",["T_VARIABLE","$this",1390],["T_OBJECT_OPERATOR","->",1390],["T_STRING","getQuote",1390],"(",")",["T_OBJECT_OPERATOR","->",1390],["T_STRING","isVirtual",1390],"(",")",")",["T_WHITESPACE"," ",1390],"{",["T_WHITESPACE","\n                ",1390],["T_VARIABLE","$this",1391],["T_OBJECT_OPERATOR","->",1391],["T_STRING","_setQuoteAddress",1391],"(",["T_VARIABLE","$shippingAddress",1391],",",["T_WHITESPACE"," ",1391],["T_VARIABLE","$address",1391],")",";",["T_WHITESPACE","\n            ",1391],"}",["T_WHITESPACE","\n            ",1392],["T_DOC_COMMENT","\/**\n             * save_in_address_book is not a valid attribute and is filtered out by _setQuoteAddress,\n             * that is why it should be added after _setQuoteAddress call\n             *\/",1393],["T_WHITESPACE","\n            ",1396],["T_VARIABLE","$saveInAddressBook",1397],["T_WHITESPACE"," ",1397],"=",["T_WHITESPACE"," ",1397],["T_INT_CAST","(int)",1397],"(","!",["T_EMPTY","empty",1397],"(",["T_VARIABLE","$address",1397],"[",["T_CONSTANT_ENCAPSED_STRING","'save_in_address_book'",1397],"]",")",")",";",["T_WHITESPACE","\n            ",1397],["T_VARIABLE","$shippingAddress",1398],["T_OBJECT_OPERATOR","->",1398],["T_STRING","setData",1398],"(",["T_CONSTANT_ENCAPSED_STRING","'save_in_address_book'",1398],",",["T_WHITESPACE"," ",1398],["T_VARIABLE","$saveInAddressBook",1398],")",";",["T_WHITESPACE","\n        ",1398],"}",["T_WHITESPACE","\n        ",1399],["T_IF","if",1400],["T_WHITESPACE"," ",1400],"(",["T_VARIABLE","$address",1400],["T_WHITESPACE"," ",1400],["T_INSTANCEOF","instanceof",1400],["T_WHITESPACE"," ",1400],["T_NS_SEPARATOR","\\",1400],["T_STRING","Magento",1400],["T_NS_SEPARATOR","\\",1400],["T_STRING","Quote",1400],["T_NS_SEPARATOR","\\",1400],["T_STRING","Model",1400],["T_NS_SEPARATOR","\\",1400],["T_STRING","Quote",1400],["T_NS_SEPARATOR","\\",1400],["T_STRING","Address",1400],")",["T_WHITESPACE"," ",1400],"{",["T_WHITESPACE","\n            ",1400],["T_VARIABLE","$shippingAddress",1401],["T_WHITESPACE"," ",1401],"=",["T_WHITESPACE"," ",1401],["T_VARIABLE","$address",1401],";",["T_WHITESPACE","\n        ",1401],"}",["T_WHITESPACE","\n\n        ",1402],["T_VARIABLE","$this",1404],["T_OBJECT_OPERATOR","->",1404],["T_STRING","setRecollect",1404],"(",["T_STRING","true",1404],")",";",["T_WHITESPACE","\n        ",1404],["T_VARIABLE","$this",1405],["T_OBJECT_OPERATOR","->",1405],["T_STRING","getQuote",1405],"(",")",["T_OBJECT_OPERATOR","->",1405],["T_STRING","setShippingAddress",1405],"(",["T_VARIABLE","$shippingAddress",1405],")",";",["T_WHITESPACE","\n\n        ",1405],["T_RETURN","return",1407],["T_WHITESPACE"," ",1407],["T_VARIABLE","$this",1407],";",["T_WHITESPACE","\n    ",1407],"}",["T_WHITESPACE","\n\n    ",1408],["T_DOC_COMMENT","\/**\n     * Set shipping anddress to be same as billing\n     *\n     * @param bool $flag If true - don't save in address book and actually copy data across billing and shipping\n     *                   addresses\n     * @return $this\n     *\/",1410],["T_WHITESPACE","\n    ",1416],["T_PUBLIC","public",1417],["T_WHITESPACE"," ",1417],["T_FUNCTION","function",1417],["T_WHITESPACE"," ",1417],["T_STRING","setShippingAsBilling",1417],"(",["T_VARIABLE","$flag",1417],")",["T_WHITESPACE","\n    ",1417],"{",["T_WHITESPACE","\n        ",1418],["T_IF","if",1419],["T_WHITESPACE"," ",1419],"(",["T_VARIABLE","$flag",1419],")",["T_WHITESPACE"," ",1419],"{",["T_WHITESPACE","\n            ",1419],["T_VARIABLE","$tmpAddress",1420],["T_WHITESPACE"," ",1420],"=",["T_WHITESPACE"," ",1420],["T_CLONE","clone",1420],["T_WHITESPACE"," ",1420],["T_VARIABLE","$this",1420],["T_OBJECT_OPERATOR","->",1420],["T_STRING","getBillingAddress",1420],"(",")",";",["T_WHITESPACE","\n            ",1420],["T_VARIABLE","$tmpAddress",1421],["T_OBJECT_OPERATOR","->",1421],["T_STRING","unsAddressId",1421],"(",")",["T_OBJECT_OPERATOR","->",1421],["T_STRING","unsAddressType",1421],"(",")",";",["T_WHITESPACE","\n            ",1421],["T_VARIABLE","$data",1422],["T_WHITESPACE"," ",1422],"=",["T_WHITESPACE"," ",1422],["T_VARIABLE","$tmpAddress",1422],["T_OBJECT_OPERATOR","->",1422],["T_STRING","getData",1422],"(",")",";",["T_WHITESPACE","\n            ",1422],["T_VARIABLE","$data",1423],"[",["T_CONSTANT_ENCAPSED_STRING","'save_in_address_book'",1423],"]",["T_WHITESPACE"," ",1423],"=",["T_WHITESPACE"," ",1423],["T_LNUMBER","0",1423],";",["T_WHITESPACE","\n            ",1423],["T_COMMENT","\/\/ Do not duplicate address (billing address will do saving too)\n",1424],["T_WHITESPACE","            ",1425],["T_VARIABLE","$this",1425],["T_OBJECT_OPERATOR","->",1425],["T_STRING","getShippingAddress",1425],"(",")",["T_OBJECT_OPERATOR","->",1425],["T_STRING","addData",1425],"(",["T_VARIABLE","$data",1425],")",";",["T_WHITESPACE","\n        ",1425],"}",["T_WHITESPACE","\n        ",1426],["T_VARIABLE","$this",1427],["T_OBJECT_OPERATOR","->",1427],["T_STRING","getShippingAddress",1427],"(",")",["T_OBJECT_OPERATOR","->",1427],["T_STRING","setSameAsBilling",1427],"(",["T_VARIABLE","$flag",1427],")",";",["T_WHITESPACE","\n        ",1427],["T_VARIABLE","$this",1428],["T_OBJECT_OPERATOR","->",1428],["T_STRING","setRecollect",1428],"(",["T_STRING","true",1428],")",";",["T_WHITESPACE","\n        ",1428],["T_RETURN","return",1429],["T_WHITESPACE"," ",1429],["T_VARIABLE","$this",1429],";",["T_WHITESPACE","\n    ",1429],"}",["T_WHITESPACE","\n\n    ",1430],["T_DOC_COMMENT","\/**\n     * Retrieve quote billing address\n     *\n     * @return \\Magento\\Quote\\Model\\Quote\\Address\n     *\/",1432],["T_WHITESPACE","\n    ",1436],["T_PUBLIC","public",1437],["T_WHITESPACE"," ",1437],["T_FUNCTION","function",1437],["T_WHITESPACE"," ",1437],["T_STRING","getBillingAddress",1437],"(",")",["T_WHITESPACE","\n    ",1437],"{",["T_WHITESPACE","\n        ",1438],["T_RETURN","return",1439],["T_WHITESPACE"," ",1439],["T_VARIABLE","$this",1439],["T_OBJECT_OPERATOR","->",1439],["T_STRING","getQuote",1439],"(",")",["T_OBJECT_OPERATOR","->",1439],["T_STRING","getBillingAddress",1439],"(",")",";",["T_WHITESPACE","\n    ",1439],"}",["T_WHITESPACE","\n\n    ",1440],["T_DOC_COMMENT","\/**\n     * Set billing address into quote\n     *\n     * @param array $address\n     * @return $this\n     *\/",1442],["T_WHITESPACE","\n    ",1447],["T_PUBLIC","public",1448],["T_WHITESPACE"," ",1448],["T_FUNCTION","function",1448],["T_WHITESPACE"," ",1448],["T_STRING","setBillingAddress",1448],"(",["T_VARIABLE","$address",1448],")",["T_WHITESPACE","\n    ",1448],"{",["T_WHITESPACE","\n        ",1449],["T_IF","if",1450],["T_WHITESPACE"," ",1450],"(",["T_STRING","is_array",1450],"(",["T_VARIABLE","$address",1450],")",")",["T_WHITESPACE"," ",1450],"{",["T_WHITESPACE","\n            ",1450],["T_VARIABLE","$billingAddress",1451],["T_WHITESPACE"," ",1451],"=",["T_WHITESPACE"," ",1451],["T_VARIABLE","$this",1451],["T_OBJECT_OPERATOR","->",1451],["T_STRING","_objectManager",1451],["T_OBJECT_OPERATOR","->",1451],["T_STRING","create",1451],"(",["T_WHITESPACE","\n                ",1451],["T_NS_SEPARATOR","\\",1452],["T_STRING","Magento",1452],["T_NS_SEPARATOR","\\",1452],["T_STRING","Quote",1452],["T_NS_SEPARATOR","\\",1452],["T_STRING","Model",1452],["T_NS_SEPARATOR","\\",1452],["T_STRING","Quote",1452],["T_NS_SEPARATOR","\\",1452],["T_STRING","Address",1452],["T_DOUBLE_COLON","::",1452],["T_CLASS","class",1452],["T_WHITESPACE","\n            ",1452],")",["T_OBJECT_OPERATOR","->",1453],["T_STRING","setData",1453],"(",["T_WHITESPACE","\n                ",1453],["T_VARIABLE","$address",1454],["T_WHITESPACE","\n            ",1454],")",["T_OBJECT_OPERATOR","->",1455],["T_STRING","setAddressType",1455],"(",["T_WHITESPACE","\n                ",1455],["T_NS_SEPARATOR","\\",1456],["T_STRING","Magento",1456],["T_NS_SEPARATOR","\\",1456],["T_STRING","Quote",1456],["T_NS_SEPARATOR","\\",1456],["T_STRING","Model",1456],["T_NS_SEPARATOR","\\",1456],["T_STRING","Quote",1456],["T_NS_SEPARATOR","\\",1456],["T_STRING","Address",1456],["T_DOUBLE_COLON","::",1456],["T_STRING","TYPE_BILLING",1456],["T_WHITESPACE","\n            ",1456],")",";",["T_WHITESPACE","\n            ",1457],["T_VARIABLE","$this",1458],["T_OBJECT_OPERATOR","->",1458],["T_STRING","_setQuoteAddress",1458],"(",["T_VARIABLE","$billingAddress",1458],",",["T_WHITESPACE"," ",1458],["T_VARIABLE","$address",1458],")",";",["T_WHITESPACE","\n            ",1458],["T_DOC_COMMENT","\/**\n             * save_in_address_book is not a valid attribute and is filtered out by _setQuoteAddress,\n             * that is why it should be added after _setQuoteAddress call\n             *\/",1459],["T_WHITESPACE","\n            ",1462],["T_VARIABLE","$saveInAddressBook",1463],["T_WHITESPACE"," ",1463],"=",["T_WHITESPACE"," ",1463],["T_INT_CAST","(int)",1463],"(","!",["T_EMPTY","empty",1463],"(",["T_VARIABLE","$address",1463],"[",["T_CONSTANT_ENCAPSED_STRING","'save_in_address_book'",1463],"]",")",")",";",["T_WHITESPACE","\n            ",1463],["T_VARIABLE","$billingAddress",1464],["T_OBJECT_OPERATOR","->",1464],["T_STRING","setData",1464],"(",["T_CONSTANT_ENCAPSED_STRING","'save_in_address_book'",1464],",",["T_WHITESPACE"," ",1464],["T_VARIABLE","$saveInAddressBook",1464],")",";",["T_WHITESPACE","\n\n            ",1464],["T_IF","if",1466],["T_WHITESPACE"," ",1466],"(","!",["T_VARIABLE","$this",1466],["T_OBJECT_OPERATOR","->",1466],["T_STRING","getQuote",1466],"(",")",["T_OBJECT_OPERATOR","->",1466],["T_STRING","isVirtual",1466],"(",")",["T_WHITESPACE"," ",1466],["T_BOOLEAN_AND","&&",1466],["T_WHITESPACE"," ",1466],["T_VARIABLE","$this",1466],["T_OBJECT_OPERATOR","->",1466],["T_STRING","getShippingAddress",1466],"(",")",["T_OBJECT_OPERATOR","->",1466],["T_STRING","getSameAsBilling",1466],"(",")",")",["T_WHITESPACE"," ",1466],"{",["T_WHITESPACE","\n                ",1466],["T_VARIABLE","$shippingAddress",1467],["T_WHITESPACE"," ",1467],"=",["T_WHITESPACE"," ",1467],["T_CLONE","clone",1467],["T_WHITESPACE"," ",1467],["T_VARIABLE","$billingAddress",1467],";",["T_WHITESPACE","\n                ",1467],["T_VARIABLE","$shippingAddress",1468],["T_OBJECT_OPERATOR","->",1468],["T_STRING","setSameAsBilling",1468],"(",["T_STRING","true",1468],")",";",["T_WHITESPACE","\n                ",1468],["T_VARIABLE","$shippingAddress",1469],["T_OBJECT_OPERATOR","->",1469],["T_STRING","setSaveInAddressBook",1469],"(",["T_STRING","false",1469],")",";",["T_WHITESPACE","\n                ",1469],["T_VARIABLE","$address",1470],"[",["T_CONSTANT_ENCAPSED_STRING","'save_in_address_book'",1470],"]",["T_WHITESPACE"," ",1470],"=",["T_WHITESPACE"," ",1470],["T_LNUMBER","0",1470],";",["T_WHITESPACE","\n                ",1470],["T_VARIABLE","$this",1471],["T_OBJECT_OPERATOR","->",1471],["T_STRING","setShippingAddress",1471],"(",["T_VARIABLE","$address",1471],")",";",["T_WHITESPACE","\n            ",1471],"}",["T_WHITESPACE","\n\n            ",1472],["T_VARIABLE","$this",1474],["T_OBJECT_OPERATOR","->",1474],["T_STRING","getQuote",1474],"(",")",["T_OBJECT_OPERATOR","->",1474],["T_STRING","setBillingAddress",1474],"(",["T_VARIABLE","$billingAddress",1474],")",";",["T_WHITESPACE","\n        ",1474],"}",["T_WHITESPACE","\n\n        ",1475],["T_RETURN","return",1477],["T_WHITESPACE"," ",1477],["T_VARIABLE","$this",1477],";",["T_WHITESPACE","\n    ",1477],"}",["T_WHITESPACE","\n\n    ",1478],["T_DOC_COMMENT","\/**\n     * Set shipping method\n     *\n     * @param string $method\n     * @return $this\n     *\/",1480],["T_WHITESPACE","\n    ",1485],["T_PUBLIC","public",1486],["T_WHITESPACE"," ",1486],["T_FUNCTION","function",1486],["T_WHITESPACE"," ",1486],["T_STRING","setShippingMethod",1486],"(",["T_VARIABLE","$method",1486],")",["T_WHITESPACE","\n    ",1486],"{",["T_WHITESPACE","\n        ",1487],["T_VARIABLE","$this",1488],["T_OBJECT_OPERATOR","->",1488],["T_STRING","getShippingAddress",1488],"(",")",["T_OBJECT_OPERATOR","->",1488],["T_STRING","setShippingMethod",1488],"(",["T_VARIABLE","$method",1488],")",";",["T_WHITESPACE","\n        ",1488],["T_VARIABLE","$this",1489],["T_OBJECT_OPERATOR","->",1489],["T_STRING","setRecollect",1489],"(",["T_STRING","true",1489],")",";",["T_WHITESPACE","\n\n        ",1489],["T_RETURN","return",1491],["T_WHITESPACE"," ",1491],["T_VARIABLE","$this",1491],";",["T_WHITESPACE","\n    ",1491],"}",["T_WHITESPACE","\n\n    ",1492],["T_DOC_COMMENT","\/**\n     * Empty shipping method and clear shipping rates\n     *\n     * @return $this\n     *\/",1494],["T_WHITESPACE","\n    ",1498],["T_PUBLIC","public",1499],["T_WHITESPACE"," ",1499],["T_FUNCTION","function",1499],["T_WHITESPACE"," ",1499],["T_STRING","resetShippingMethod",1499],"(",")",["T_WHITESPACE","\n    ",1499],"{",["T_WHITESPACE","\n        ",1500],["T_VARIABLE","$this",1501],["T_OBJECT_OPERATOR","->",1501],["T_STRING","getShippingAddress",1501],"(",")",["T_OBJECT_OPERATOR","->",1501],["T_STRING","setShippingMethod",1501],"(",["T_STRING","false",1501],")",";",["T_WHITESPACE","\n        ",1501],["T_VARIABLE","$this",1502],["T_OBJECT_OPERATOR","->",1502],["T_STRING","getShippingAddress",1502],"(",")",["T_OBJECT_OPERATOR","->",1502],["T_STRING","removeAllShippingRates",1502],"(",")",";",["T_WHITESPACE","\n\n        ",1502],["T_RETURN","return",1504],["T_WHITESPACE"," ",1504],["T_VARIABLE","$this",1504],";",["T_WHITESPACE","\n    ",1504],"}",["T_WHITESPACE","\n\n    ",1505],["T_DOC_COMMENT","\/**\n     * Collect shipping data for quote shipping address\n     *\n     * @return $this\n     *\/",1507],["T_WHITESPACE","\n    ",1511],["T_PUBLIC","public",1512],["T_WHITESPACE"," ",1512],["T_FUNCTION","function",1512],["T_WHITESPACE"," ",1512],["T_STRING","collectShippingRates",1512],"(",")",["T_WHITESPACE","\n    ",1512],"{",["T_WHITESPACE","\n        ",1513],["T_VARIABLE","$this",1514],["T_OBJECT_OPERATOR","->",1514],["T_STRING","getQuote",1514],"(",")",["T_OBJECT_OPERATOR","->",1514],["T_STRING","getShippingAddress",1514],"(",")",["T_OBJECT_OPERATOR","->",1514],["T_STRING","setCollectShippingRates",1514],"(",["T_STRING","true",1514],")",";",["T_WHITESPACE","\n        ",1514],["T_VARIABLE","$this",1515],["T_OBJECT_OPERATOR","->",1515],["T_STRING","collectRates",1515],"(",")",";",["T_WHITESPACE","\n\n        ",1515],["T_RETURN","return",1517],["T_WHITESPACE"," ",1517],["T_VARIABLE","$this",1517],";",["T_WHITESPACE","\n    ",1517],"}",["T_WHITESPACE","\n\n    ",1518],["T_DOC_COMMENT","\/**\n     * Calculate totals\n     *\n     * @return void\n     *\/",1520],["T_WHITESPACE","\n    ",1524],["T_PUBLIC","public",1525],["T_WHITESPACE"," ",1525],["T_FUNCTION","function",1525],["T_WHITESPACE"," ",1525],["T_STRING","collectRates",1525],"(",")",["T_WHITESPACE","\n    ",1525],"{",["T_WHITESPACE","\n        ",1526],["T_VARIABLE","$this",1527],["T_OBJECT_OPERATOR","->",1527],["T_STRING","getQuote",1527],"(",")",["T_OBJECT_OPERATOR","->",1527],["T_STRING","collectTotals",1527],"(",")",";",["T_WHITESPACE","\n    ",1527],"}",["T_WHITESPACE","\n\n    ",1528],["T_DOC_COMMENT","\/**\n     * Set payment method into quote\n     *\n     * @param string $method\n     * @return $this\n     *\/",1530],["T_WHITESPACE","\n    ",1535],["T_PUBLIC","public",1536],["T_WHITESPACE"," ",1536],["T_FUNCTION","function",1536],["T_WHITESPACE"," ",1536],["T_STRING","setPaymentMethod",1536],"(",["T_VARIABLE","$method",1536],")",["T_WHITESPACE","\n    ",1536],"{",["T_WHITESPACE","\n        ",1537],["T_VARIABLE","$this",1538],["T_OBJECT_OPERATOR","->",1538],["T_STRING","getQuote",1538],"(",")",["T_OBJECT_OPERATOR","->",1538],["T_STRING","getPayment",1538],"(",")",["T_OBJECT_OPERATOR","->",1538],["T_STRING","setMethod",1538],"(",["T_VARIABLE","$method",1538],")",";",["T_WHITESPACE","\n        ",1538],["T_RETURN","return",1539],["T_WHITESPACE"," ",1539],["T_VARIABLE","$this",1539],";",["T_WHITESPACE","\n    ",1539],"}",["T_WHITESPACE","\n\n    ",1540],["T_DOC_COMMENT","\/**\n     * Set payment data into quote\n     *\n     * @param array $data\n     * @return $this\n     *\/",1542],["T_WHITESPACE","\n    ",1547],["T_PUBLIC","public",1548],["T_WHITESPACE"," ",1548],["T_FUNCTION","function",1548],["T_WHITESPACE"," ",1548],["T_STRING","setPaymentData",1548],"(",["T_VARIABLE","$data",1548],")",["T_WHITESPACE","\n    ",1548],"{",["T_WHITESPACE","\n        ",1549],["T_IF","if",1550],["T_WHITESPACE"," ",1550],"(","!",["T_ISSET","isset",1550],"(",["T_VARIABLE","$data",1550],"[",["T_CONSTANT_ENCAPSED_STRING","'method'",1550],"]",")",")",["T_WHITESPACE"," ",1550],"{",["T_WHITESPACE","\n            ",1550],["T_VARIABLE","$data",1551],"[",["T_CONSTANT_ENCAPSED_STRING","'method'",1551],"]",["T_WHITESPACE"," ",1551],"=",["T_WHITESPACE"," ",1551],["T_VARIABLE","$this",1551],["T_OBJECT_OPERATOR","->",1551],["T_STRING","getQuote",1551],"(",")",["T_OBJECT_OPERATOR","->",1551],["T_STRING","getPayment",1551],"(",")",["T_OBJECT_OPERATOR","->",1551],["T_STRING","getMethod",1551],"(",")",";",["T_WHITESPACE","\n        ",1551],"}",["T_WHITESPACE","\n        ",1552],["T_VARIABLE","$this",1553],["T_OBJECT_OPERATOR","->",1553],["T_STRING","getQuote",1553],"(",")",["T_OBJECT_OPERATOR","->",1553],["T_STRING","getPayment",1553],"(",")",["T_OBJECT_OPERATOR","->",1553],["T_STRING","importData",1553],"(",["T_VARIABLE","$data",1553],")",";",["T_WHITESPACE","\n\n        ",1553],["T_RETURN","return",1555],["T_WHITESPACE"," ",1555],["T_VARIABLE","$this",1555],";",["T_WHITESPACE","\n    ",1555],"}",["T_WHITESPACE","\n\n    ",1556],["T_DOC_COMMENT","\/**\n     * Add coupon code to the quote\n     *\n     * @param string $code\n     * @return $this\n     *\/",1558],["T_WHITESPACE","\n    ",1563],["T_PUBLIC","public",1564],["T_WHITESPACE"," ",1564],["T_FUNCTION","function",1564],["T_WHITESPACE"," ",1564],["T_STRING","applyCoupon",1564],"(",["T_VARIABLE","$code",1564],")",["T_WHITESPACE","\n    ",1564],"{",["T_WHITESPACE","\n        ",1565],["T_VARIABLE","$code",1566],["T_WHITESPACE"," ",1566],"=",["T_WHITESPACE"," ",1566],["T_STRING","trim",1566],"(",["T_STRING_CAST","(string)",1566],["T_VARIABLE","$code",1566],")",";",["T_WHITESPACE","\n        ",1566],["T_VARIABLE","$this",1567],["T_OBJECT_OPERATOR","->",1567],["T_STRING","getQuote",1567],"(",")",["T_OBJECT_OPERATOR","->",1567],["T_STRING","getShippingAddress",1567],"(",")",["T_OBJECT_OPERATOR","->",1567],["T_STRING","setCollectShippingRates",1567],"(",["T_STRING","true",1567],")",";",["T_WHITESPACE","\n\n        ",1567],["T_IF","if",1569],["T_WHITESPACE"," ",1569],"(",["T_EMPTY","empty",1569],"(",["T_VARIABLE","$code",1569],")",")",["T_WHITESPACE"," ",1569],"{",["T_WHITESPACE","\n            ",1569],["T_VARIABLE","$this",1570],["T_OBJECT_OPERATOR","->",1570],["T_STRING","getQuote",1570],"(",")",["T_OBJECT_OPERATOR","->",1570],["T_STRING","getShippingAddress",1570],"(",")",["T_OBJECT_OPERATOR","->",1570],["T_STRING","setFreeShipping",1570],"(",["T_STRING","null",1570],")",";",["T_WHITESPACE","\n        ",1570],"}",["T_WHITESPACE","\n        ",1571],["T_VARIABLE","$this",1572],["T_OBJECT_OPERATOR","->",1572],["T_STRING","getQuote",1572],"(",")",["T_OBJECT_OPERATOR","->",1572],["T_STRING","setCouponCode",1572],"(",["T_VARIABLE","$code",1572],")",";",["T_WHITESPACE","\n        ",1572],["T_VARIABLE","$this",1573],["T_OBJECT_OPERATOR","->",1573],["T_STRING","setRecollect",1573],"(",["T_STRING","true",1573],")",";",["T_WHITESPACE","\n\n        ",1573],["T_RETURN","return",1575],["T_WHITESPACE"," ",1575],["T_VARIABLE","$this",1575],";",["T_WHITESPACE","\n    ",1575],"}",["T_WHITESPACE","\n\n    ",1576],["T_DOC_COMMENT","\/**\n     * Add account data to quote\n     *\n     * @param array $accountData\n     * @return $this\n     *\/",1578],["T_WHITESPACE","\n    ",1583],["T_PUBLIC","public",1584],["T_WHITESPACE"," ",1584],["T_FUNCTION","function",1584],["T_WHITESPACE"," ",1584],["T_STRING","setAccountData",1584],"(",["T_VARIABLE","$accountData",1584],")",["T_WHITESPACE","\n    ",1584],"{",["T_WHITESPACE","\n        ",1585],["T_VARIABLE","$customer",1586],["T_WHITESPACE"," ",1586],"=",["T_WHITESPACE"," ",1586],["T_VARIABLE","$this",1586],["T_OBJECT_OPERATOR","->",1586],["T_STRING","getQuote",1586],"(",")",["T_OBJECT_OPERATOR","->",1586],["T_STRING","getCustomer",1586],"(",")",";",["T_WHITESPACE","\n        ",1586],["T_VARIABLE","$form",1587],["T_WHITESPACE"," ",1587],"=",["T_WHITESPACE"," ",1587],["T_VARIABLE","$this",1587],["T_OBJECT_OPERATOR","->",1587],["T_STRING","_createCustomerForm",1587],"(",["T_VARIABLE","$customer",1587],")",";",["T_WHITESPACE","\n\n        ",1587],["T_COMMENT","\/\/ emulate request\n",1589],["T_WHITESPACE","        ",1590],["T_VARIABLE","$request",1590],["T_WHITESPACE"," ",1590],"=",["T_WHITESPACE"," ",1590],["T_VARIABLE","$form",1590],["T_OBJECT_OPERATOR","->",1590],["T_STRING","prepareRequest",1590],"(",["T_VARIABLE","$accountData",1590],")",";",["T_WHITESPACE","\n        ",1590],["T_VARIABLE","$data",1591],["T_WHITESPACE"," ",1591],"=",["T_WHITESPACE"," ",1591],["T_VARIABLE","$form",1591],["T_OBJECT_OPERATOR","->",1591],["T_STRING","extractData",1591],"(",["T_VARIABLE","$request",1591],")",";",["T_WHITESPACE","\n        ",1591],["T_VARIABLE","$data",1592],["T_WHITESPACE"," ",1592],"=",["T_WHITESPACE"," ",1592],["T_VARIABLE","$form",1592],["T_OBJECT_OPERATOR","->",1592],["T_STRING","restoreData",1592],"(",["T_VARIABLE","$data",1592],")",";",["T_WHITESPACE","\n        ",1592],["T_VARIABLE","$customer",1593],["T_WHITESPACE"," ",1593],"=",["T_WHITESPACE"," ",1593],["T_VARIABLE","$this",1593],["T_OBJECT_OPERATOR","->",1593],["T_STRING","customerFactory",1593],["T_OBJECT_OPERATOR","->",1593],["T_STRING","create",1593],"(",")",";",["T_WHITESPACE","\n        ",1593],["T_VARIABLE","$this",1594],["T_OBJECT_OPERATOR","->",1594],["T_STRING","dataObjectHelper",1594],["T_OBJECT_OPERATOR","->",1594],["T_STRING","populateWithArray",1594],"(",["T_WHITESPACE","\n            ",1594],["T_VARIABLE","$customer",1595],",",["T_WHITESPACE","\n            ",1595],["T_VARIABLE","$data",1596],",",["T_WHITESPACE"," ",1596],["T_NS_SEPARATOR","\\",1596],["T_STRING","Magento",1596],["T_NS_SEPARATOR","\\",1596],["T_STRING","Customer",1596],["T_NS_SEPARATOR","\\",1596],["T_STRING","Api",1596],["T_NS_SEPARATOR","\\",1596],["T_STRING","Data",1596],["T_NS_SEPARATOR","\\",1596],["T_STRING","CustomerInterface",1596],["T_DOUBLE_COLON","::",1596],["T_CLASS","class",1596],["T_WHITESPACE","\n        ",1596],")",";",["T_WHITESPACE","\n        ",1597],["T_VARIABLE","$this",1598],["T_OBJECT_OPERATOR","->",1598],["T_STRING","getQuote",1598],"(",")",["T_OBJECT_OPERATOR","->",1598],["T_STRING","updateCustomerData",1598],"(",["T_VARIABLE","$customer",1598],")",";",["T_WHITESPACE","\n        ",1598],["T_VARIABLE","$data",1599],["T_WHITESPACE"," ",1599],"=",["T_WHITESPACE"," ",1599],"[","]",";",["T_WHITESPACE","\n\n        ",1599],["T_VARIABLE","$customerData",1601],["T_WHITESPACE"," ",1601],"=",["T_WHITESPACE"," ",1601],["T_VARIABLE","$this",1601],["T_OBJECT_OPERATOR","->",1601],["T_STRING","customerMapper",1601],["T_OBJECT_OPERATOR","->",1601],["T_STRING","toFlatArray",1601],"(",["T_VARIABLE","$customer",1601],")",";",["T_WHITESPACE","\n        ",1601],["T_FOREACH","foreach",1602],["T_WHITESPACE"," ",1602],"(",["T_VARIABLE","$form",1602],["T_OBJECT_OPERATOR","->",1602],["T_STRING","getAttributes",1602],"(",")",["T_WHITESPACE"," ",1602],["T_AS","as",1602],["T_WHITESPACE"," ",1602],["T_VARIABLE","$attribute",1602],")",["T_WHITESPACE"," ",1602],"{",["T_WHITESPACE","\n            ",1602],["T_VARIABLE","$code",1603],["T_WHITESPACE"," ",1603],"=",["T_WHITESPACE"," ",1603],["T_STRING","sprintf",1603],"(",["T_CONSTANT_ENCAPSED_STRING","'customer_%s'",1603],",",["T_WHITESPACE"," ",1603],["T_VARIABLE","$attribute",1603],["T_OBJECT_OPERATOR","->",1603],["T_STRING","getAttributeCode",1603],"(",")",")",";",["T_WHITESPACE","\n            ",1603],["T_VARIABLE","$data",1604],"[",["T_VARIABLE","$code",1604],"]",["T_WHITESPACE"," ",1604],"=",["T_WHITESPACE"," ",1604],["T_ISSET","isset",1604],"(",["T_VARIABLE","$customerData",1604],"[",["T_VARIABLE","$attribute",1604],["T_OBJECT_OPERATOR","->",1604],["T_STRING","getAttributeCode",1604],"(",")","]",")",["T_WHITESPACE","\n                ",1604],"?",["T_WHITESPACE"," ",1605],["T_VARIABLE","$customerData",1605],"[",["T_VARIABLE","$attribute",1605],["T_OBJECT_OPERATOR","->",1605],["T_STRING","getAttributeCode",1605],"(",")","]",["T_WHITESPACE","\n                ",1605],":",["T_WHITESPACE"," ",1606],["T_STRING","null",1606],";",["T_WHITESPACE","\n        ",1606],"}",["T_WHITESPACE","\n\n        ",1607],["T_IF","if",1609],["T_WHITESPACE"," ",1609],"(",["T_ISSET","isset",1609],"(",["T_VARIABLE","$data",1609],"[",["T_CONSTANT_ENCAPSED_STRING","'customer_group_id'",1609],"]",")",")",["T_WHITESPACE"," ",1609],"{",["T_WHITESPACE","\n            ",1609],["T_VARIABLE","$customerGroup",1610],["T_WHITESPACE"," ",1610],"=",["T_WHITESPACE"," ",1610],["T_VARIABLE","$this",1610],["T_OBJECT_OPERATOR","->",1610],["T_STRING","groupRepository",1610],["T_OBJECT_OPERATOR","->",1610],["T_STRING","getById",1610],"(",["T_VARIABLE","$data",1610],"[",["T_CONSTANT_ENCAPSED_STRING","'customer_group_id'",1610],"]",")",";",["T_WHITESPACE","\n            ",1610],["T_VARIABLE","$data",1611],"[",["T_CONSTANT_ENCAPSED_STRING","'customer_tax_class_id'",1611],"]",["T_WHITESPACE"," ",1611],"=",["T_WHITESPACE"," ",1611],["T_VARIABLE","$customerGroup",1611],["T_OBJECT_OPERATOR","->",1611],["T_STRING","getTaxClassId",1611],"(",")",";",["T_WHITESPACE","\n            ",1611],["T_VARIABLE","$this",1612],["T_OBJECT_OPERATOR","->",1612],["T_STRING","setRecollect",1612],"(",["T_STRING","true",1612],")",";",["T_WHITESPACE","\n        ",1612],"}",["T_WHITESPACE","\n\n        ",1613],["T_VARIABLE","$this",1615],["T_OBJECT_OPERATOR","->",1615],["T_STRING","getQuote",1615],"(",")",["T_OBJECT_OPERATOR","->",1615],["T_STRING","addData",1615],"(",["T_VARIABLE","$data",1615],")",";",["T_WHITESPACE","\n\n        ",1615],["T_RETURN","return",1617],["T_WHITESPACE"," ",1617],["T_VARIABLE","$this",1617],";",["T_WHITESPACE","\n    ",1617],"}",["T_WHITESPACE","\n\n    ",1618],["T_DOC_COMMENT","\/**\n     * Parse data retrieved from request\n     *\n     * @param   array $data\n     * @return  $this\n     * @SuppressWarnings(PHPMD.CyclomaticComplexity)\n     * @SuppressWarnings(PHPMD.NPathComplexity)\n     *\/",1620],["T_WHITESPACE","\n    ",1627],["T_PUBLIC","public",1628],["T_WHITESPACE"," ",1628],["T_FUNCTION","function",1628],["T_WHITESPACE"," ",1628],["T_STRING","importPostData",1628],"(",["T_VARIABLE","$data",1628],")",["T_WHITESPACE","\n    ",1628],"{",["T_WHITESPACE","\n        ",1629],["T_IF","if",1630],["T_WHITESPACE"," ",1630],"(",["T_STRING","is_array",1630],"(",["T_VARIABLE","$data",1630],")",")",["T_WHITESPACE"," ",1630],"{",["T_WHITESPACE","\n            ",1630],["T_VARIABLE","$this",1631],["T_OBJECT_OPERATOR","->",1631],["T_STRING","addData",1631],"(",["T_VARIABLE","$data",1631],")",";",["T_WHITESPACE","\n        ",1631],"}",["T_WHITESPACE"," ",1632],["T_ELSE","else",1632],["T_WHITESPACE"," ",1632],"{",["T_WHITESPACE","\n            ",1632],["T_RETURN","return",1633],["T_WHITESPACE"," ",1633],["T_VARIABLE","$this",1633],";",["T_WHITESPACE","\n        ",1633],"}",["T_WHITESPACE","\n\n        ",1634],["T_IF","if",1636],["T_WHITESPACE"," ",1636],"(",["T_ISSET","isset",1636],"(",["T_VARIABLE","$data",1636],"[",["T_CONSTANT_ENCAPSED_STRING","'account'",1636],"]",")",")",["T_WHITESPACE"," ",1636],"{",["T_WHITESPACE","\n            ",1636],["T_VARIABLE","$this",1637],["T_OBJECT_OPERATOR","->",1637],["T_STRING","setAccountData",1637],"(",["T_VARIABLE","$data",1637],"[",["T_CONSTANT_ENCAPSED_STRING","'account'",1637],"]",")",";",["T_WHITESPACE","\n        ",1637],"}",["T_WHITESPACE","\n\n        ",1638],["T_IF","if",1640],["T_WHITESPACE"," ",1640],"(",["T_ISSET","isset",1640],"(",["T_VARIABLE","$data",1640],"[",["T_CONSTANT_ENCAPSED_STRING","'comment'",1640],"]",")",")",["T_WHITESPACE"," ",1640],"{",["T_WHITESPACE","\n            ",1640],["T_VARIABLE","$this",1641],["T_OBJECT_OPERATOR","->",1641],["T_STRING","getQuote",1641],"(",")",["T_OBJECT_OPERATOR","->",1641],["T_STRING","addData",1641],"(",["T_VARIABLE","$data",1641],"[",["T_CONSTANT_ENCAPSED_STRING","'comment'",1641],"]",")",";",["T_WHITESPACE","\n            ",1641],["T_IF","if",1642],["T_WHITESPACE"," ",1642],"(",["T_EMPTY","empty",1642],"(",["T_VARIABLE","$data",1642],"[",["T_CONSTANT_ENCAPSED_STRING","'comment'",1642],"]","[",["T_CONSTANT_ENCAPSED_STRING","'customer_note_notify'",1642],"]",")",")",["T_WHITESPACE"," ",1642],"{",["T_WHITESPACE","\n                ",1642],["T_VARIABLE","$this",1643],["T_OBJECT_OPERATOR","->",1643],["T_STRING","getQuote",1643],"(",")",["T_OBJECT_OPERATOR","->",1643],["T_STRING","setCustomerNoteNotify",1643],"(",["T_STRING","false",1643],")",";",["T_WHITESPACE","\n            ",1643],"}",["T_WHITESPACE"," ",1644],["T_ELSE","else",1644],["T_WHITESPACE"," ",1644],"{",["T_WHITESPACE","\n                ",1644],["T_VARIABLE","$this",1645],["T_OBJECT_OPERATOR","->",1645],["T_STRING","getQuote",1645],"(",")",["T_OBJECT_OPERATOR","->",1645],["T_STRING","setCustomerNoteNotify",1645],"(",["T_STRING","true",1645],")",";",["T_WHITESPACE","\n            ",1645],"}",["T_WHITESPACE","\n        ",1646],"}",["T_WHITESPACE","\n\n        ",1647],["T_IF","if",1649],["T_WHITESPACE"," ",1649],"(",["T_ISSET","isset",1649],"(",["T_VARIABLE","$data",1649],"[",["T_CONSTANT_ENCAPSED_STRING","'billing_address'",1649],"]",")",")",["T_WHITESPACE"," ",1649],"{",["T_WHITESPACE","\n            ",1649],["T_VARIABLE","$this",1650],["T_OBJECT_OPERATOR","->",1650],["T_STRING","setBillingAddress",1650],"(",["T_VARIABLE","$data",1650],"[",["T_CONSTANT_ENCAPSED_STRING","'billing_address'",1650],"]",")",";",["T_WHITESPACE","\n        ",1650],"}",["T_WHITESPACE","\n\n        ",1651],["T_IF","if",1653],["T_WHITESPACE"," ",1653],"(",["T_ISSET","isset",1653],"(",["T_VARIABLE","$data",1653],"[",["T_CONSTANT_ENCAPSED_STRING","'shipping_address'",1653],"]",")",")",["T_WHITESPACE"," ",1653],"{",["T_WHITESPACE","\n            ",1653],["T_VARIABLE","$this",1654],["T_OBJECT_OPERATOR","->",1654],["T_STRING","setShippingAddress",1654],"(",["T_VARIABLE","$data",1654],"[",["T_CONSTANT_ENCAPSED_STRING","'shipping_address'",1654],"]",")",";",["T_WHITESPACE","\n        ",1654],"}",["T_WHITESPACE","\n\n        ",1655],["T_IF","if",1657],["T_WHITESPACE"," ",1657],"(",["T_ISSET","isset",1657],"(",["T_VARIABLE","$data",1657],"[",["T_CONSTANT_ENCAPSED_STRING","'shipping_method'",1657],"]",")",")",["T_WHITESPACE"," ",1657],"{",["T_WHITESPACE","\n            ",1657],["T_VARIABLE","$this",1658],["T_OBJECT_OPERATOR","->",1658],["T_STRING","setShippingMethod",1658],"(",["T_VARIABLE","$data",1658],"[",["T_CONSTANT_ENCAPSED_STRING","'shipping_method'",1658],"]",")",";",["T_WHITESPACE","\n        ",1658],"}",["T_WHITESPACE","\n\n        ",1659],["T_IF","if",1661],["T_WHITESPACE"," ",1661],"(",["T_ISSET","isset",1661],"(",["T_VARIABLE","$data",1661],"[",["T_CONSTANT_ENCAPSED_STRING","'payment_method'",1661],"]",")",")",["T_WHITESPACE"," ",1661],"{",["T_WHITESPACE","\n            ",1661],["T_VARIABLE","$this",1662],["T_OBJECT_OPERATOR","->",1662],["T_STRING","setPaymentMethod",1662],"(",["T_VARIABLE","$data",1662],"[",["T_CONSTANT_ENCAPSED_STRING","'payment_method'",1662],"]",")",";",["T_WHITESPACE","\n        ",1662],"}",["T_WHITESPACE","\n\n        ",1663],["T_IF","if",1665],["T_WHITESPACE"," ",1665],"(",["T_ISSET","isset",1665],"(",["T_VARIABLE","$data",1665],"[",["T_CONSTANT_ENCAPSED_STRING","'coupon'",1665],"]","[",["T_CONSTANT_ENCAPSED_STRING","'code'",1665],"]",")",")",["T_WHITESPACE"," ",1665],"{",["T_WHITESPACE","\n            ",1665],["T_VARIABLE","$this",1666],["T_OBJECT_OPERATOR","->",1666],["T_STRING","applyCoupon",1666],"(",["T_VARIABLE","$data",1666],"[",["T_CONSTANT_ENCAPSED_STRING","'coupon'",1666],"]","[",["T_CONSTANT_ENCAPSED_STRING","'code'",1666],"]",")",";",["T_WHITESPACE","\n        ",1666],"}",["T_WHITESPACE","\n\n        ",1667],["T_RETURN","return",1669],["T_WHITESPACE"," ",1669],["T_VARIABLE","$this",1669],";",["T_WHITESPACE","\n    ",1669],"}",["T_WHITESPACE","\n\n    ",1670],["T_DOC_COMMENT","\/**\n     * Check whether we need to create new customer (for another website) during order creation\n     *\n     * @param \\Magento\\Store\\Model\\Store $store\n     * @return bool\n     *\/",1672],["T_WHITESPACE","\n    ",1677],["T_PROTECTED","protected",1678],["T_WHITESPACE"," ",1678],["T_FUNCTION","function",1678],["T_WHITESPACE"," ",1678],["T_STRING","_customerIsInStore",1678],"(",["T_VARIABLE","$store",1678],")",["T_WHITESPACE","\n    ",1678],"{",["T_WHITESPACE","\n        ",1679],["T_VARIABLE","$customerId",1680],["T_WHITESPACE"," ",1680],"=",["T_WHITESPACE"," ",1680],["T_INT_CAST","(int)",1680],["T_VARIABLE","$this",1680],["T_OBJECT_OPERATOR","->",1680],["T_STRING","getSession",1680],"(",")",["T_OBJECT_OPERATOR","->",1680],["T_STRING","getCustomerId",1680],"(",")",";",["T_WHITESPACE","\n        ",1680],["T_VARIABLE","$customer",1681],["T_WHITESPACE"," ",1681],"=",["T_WHITESPACE"," ",1681],["T_VARIABLE","$this",1681],["T_OBJECT_OPERATOR","->",1681],["T_STRING","customerRepository",1681],["T_OBJECT_OPERATOR","->",1681],["T_STRING","getById",1681],"(",["T_VARIABLE","$customerId",1681],")",";",["T_WHITESPACE","\n\n        ",1681],["T_RETURN","return",1683],["T_WHITESPACE"," ",1683],["T_VARIABLE","$customer",1683],["T_OBJECT_OPERATOR","->",1683],["T_STRING","getWebsiteId",1683],"(",")",["T_WHITESPACE"," ",1683],["T_IS_EQUAL","==",1683],["T_WHITESPACE"," ",1683],["T_VARIABLE","$store",1683],["T_OBJECT_OPERATOR","->",1683],["T_STRING","getWebsiteId",1683],"(",")",["T_WHITESPACE","\n            ",1683],["T_BOOLEAN_OR","||",1684],["T_WHITESPACE"," ",1684],["T_VARIABLE","$this",1684],["T_OBJECT_OPERATOR","->",1684],["T_STRING","accountManagement",1684],["T_OBJECT_OPERATOR","->",1684],["T_STRING","isCustomerInStore",1684],"(",["T_VARIABLE","$customer",1684],["T_OBJECT_OPERATOR","->",1684],["T_STRING","getWebsiteId",1684],"(",")",",",["T_WHITESPACE"," ",1684],["T_VARIABLE","$store",1684],["T_OBJECT_OPERATOR","->",1684],["T_STRING","getId",1684],"(",")",")",";",["T_WHITESPACE","\n    ",1684],"}",["T_WHITESPACE","\n\n    ",1685],["T_DOC_COMMENT","\/**\n     * Set and validate Customer data. Return the updated Data Object merged with the account data\n     *\n     * @param \\Magento\\Customer\\Api\\Data\\CustomerInterface $customer\n     * @return \\Magento\\Customer\\Api\\Data\\CustomerInterface\n     *\/",1687],["T_WHITESPACE","\n    ",1692],["T_PROTECTED","protected",1693],["T_WHITESPACE"," ",1693],["T_FUNCTION","function",1693],["T_WHITESPACE"," ",1693],["T_STRING","_validateCustomerData",1693],"(",["T_NS_SEPARATOR","\\",1693],["T_STRING","Magento",1693],["T_NS_SEPARATOR","\\",1693],["T_STRING","Customer",1693],["T_NS_SEPARATOR","\\",1693],["T_STRING","Api",1693],["T_NS_SEPARATOR","\\",1693],["T_STRING","Data",1693],["T_NS_SEPARATOR","\\",1693],["T_STRING","CustomerInterface",1693],["T_WHITESPACE"," ",1693],["T_VARIABLE","$customer",1693],")",["T_WHITESPACE","\n    ",1693],"{",["T_WHITESPACE","\n        ",1694],["T_VARIABLE","$form",1695],["T_WHITESPACE"," ",1695],"=",["T_WHITESPACE"," ",1695],["T_VARIABLE","$this",1695],["T_OBJECT_OPERATOR","->",1695],["T_STRING","_createCustomerForm",1695],"(",["T_VARIABLE","$customer",1695],")",";",["T_WHITESPACE","\n        ",1695],["T_COMMENT","\/\/ emulate request\n",1696],["T_WHITESPACE","        ",1697],["T_VARIABLE","$request",1697],["T_WHITESPACE"," ",1697],"=",["T_WHITESPACE"," ",1697],["T_VARIABLE","$form",1697],["T_OBJECT_OPERATOR","->",1697],["T_STRING","prepareRequest",1697],"(","[",["T_CONSTANT_ENCAPSED_STRING","'order'",1697],["T_WHITESPACE"," ",1697],["T_DOUBLE_ARROW","=>",1697],["T_WHITESPACE"," ",1697],["T_VARIABLE","$this",1697],["T_OBJECT_OPERATOR","->",1697],["T_STRING","getData",1697],"(",")","]",")",";",["T_WHITESPACE","\n        ",1697],["T_VARIABLE","$data",1698],["T_WHITESPACE"," ",1698],"=",["T_WHITESPACE"," ",1698],["T_VARIABLE","$form",1698],["T_OBJECT_OPERATOR","->",1698],["T_STRING","extractData",1698],"(",["T_VARIABLE","$request",1698],",",["T_WHITESPACE"," ",1698],["T_CONSTANT_ENCAPSED_STRING","'order\/account'",1698],")",";",["T_WHITESPACE","\n        ",1698],["T_VARIABLE","$validationResults",1699],["T_WHITESPACE"," ",1699],"=",["T_WHITESPACE"," ",1699],["T_VARIABLE","$this",1699],["T_OBJECT_OPERATOR","->",1699],["T_STRING","accountManagement",1699],["T_OBJECT_OPERATOR","->",1699],["T_STRING","validate",1699],"(",["T_VARIABLE","$customer",1699],")",";",["T_WHITESPACE","\n        ",1699],["T_IF","if",1700],["T_WHITESPACE"," ",1700],"(","!",["T_VARIABLE","$validationResults",1700],["T_OBJECT_OPERATOR","->",1700],["T_STRING","isValid",1700],"(",")",")",["T_WHITESPACE"," ",1700],"{",["T_WHITESPACE","\n            ",1700],["T_VARIABLE","$errors",1701],["T_WHITESPACE"," ",1701],"=",["T_WHITESPACE"," ",1701],["T_VARIABLE","$validationResults",1701],["T_OBJECT_OPERATOR","->",1701],["T_STRING","getMessages",1701],"(",")",";",["T_WHITESPACE","\n            ",1701],["T_IF","if",1702],["T_WHITESPACE"," ",1702],"(",["T_STRING","is_array",1702],"(",["T_VARIABLE","$errors",1702],")",")",["T_WHITESPACE"," ",1702],"{",["T_WHITESPACE","\n                ",1702],["T_FOREACH","foreach",1703],["T_WHITESPACE"," ",1703],"(",["T_VARIABLE","$errors",1703],["T_WHITESPACE"," ",1703],["T_AS","as",1703],["T_WHITESPACE"," ",1703],["T_VARIABLE","$error",1703],")",["T_WHITESPACE"," ",1703],"{",["T_WHITESPACE","\n                    ",1703],["T_VARIABLE","$this",1704],["T_OBJECT_OPERATOR","->",1704],["T_STRING","_errors",1704],"[","]",["T_WHITESPACE"," ",1704],"=",["T_WHITESPACE"," ",1704],["T_VARIABLE","$error",1704],";",["T_WHITESPACE","\n                ",1704],"}",["T_WHITESPACE","\n            ",1705],"}",["T_WHITESPACE","\n        ",1706],"}",["T_WHITESPACE","\n        ",1707],["T_VARIABLE","$data",1708],["T_WHITESPACE"," ",1708],"=",["T_WHITESPACE"," ",1708],["T_VARIABLE","$form",1708],["T_OBJECT_OPERATOR","->",1708],["T_STRING","restoreData",1708],"(",["T_VARIABLE","$data",1708],")",";",["T_WHITESPACE","\n        ",1708],["T_FOREACH","foreach",1709],["T_WHITESPACE"," ",1709],"(",["T_VARIABLE","$data",1709],["T_WHITESPACE"," ",1709],["T_AS","as",1709],["T_WHITESPACE"," ",1709],["T_VARIABLE","$key",1709],["T_WHITESPACE"," ",1709],["T_DOUBLE_ARROW","=>",1709],["T_WHITESPACE"," ",1709],["T_VARIABLE","$value",1709],")",["T_WHITESPACE"," ",1709],"{",["T_WHITESPACE","\n            ",1709],["T_IF","if",1710],["T_WHITESPACE"," ",1710],"(","!",["T_STRING","is_null",1710],"(",["T_VARIABLE","$value",1710],")",")",["T_WHITESPACE"," ",1710],"{",["T_WHITESPACE","\n                ",1710],["T_UNSET","unset",1711],"(",["T_VARIABLE","$data",1711],"[",["T_VARIABLE","$key",1711],"]",")",";",["T_WHITESPACE","\n            ",1711],"}",["T_WHITESPACE","\n        ",1712],"}",["T_WHITESPACE","\n\n        ",1713],["T_VARIABLE","$this",1715],["T_OBJECT_OPERATOR","->",1715],["T_STRING","dataObjectHelper",1715],["T_OBJECT_OPERATOR","->",1715],["T_STRING","populateWithArray",1715],"(",["T_WHITESPACE","\n            ",1715],["T_VARIABLE","$customer",1716],",",["T_WHITESPACE","\n            ",1716],["T_VARIABLE","$data",1717],",",["T_WHITESPACE"," ",1717],["T_NS_SEPARATOR","\\",1717],["T_STRING","Magento",1717],["T_NS_SEPARATOR","\\",1717],["T_STRING","Customer",1717],["T_NS_SEPARATOR","\\",1717],["T_STRING","Api",1717],["T_NS_SEPARATOR","\\",1717],["T_STRING","Data",1717],["T_NS_SEPARATOR","\\",1717],["T_STRING","CustomerInterface",1717],["T_DOUBLE_COLON","::",1717],["T_CLASS","class",1717],["T_WHITESPACE","\n        ",1717],")",";",["T_WHITESPACE","\n        ",1718],["T_RETURN","return",1719],["T_WHITESPACE"," ",1719],["T_VARIABLE","$customer",1719],";",["T_WHITESPACE","\n    ",1719],"}",["T_WHITESPACE","\n\n    ",1720],["T_DOC_COMMENT","\/**\n     * Prepare customer data for order creation.\n     *\n     * Create customer if not created using data from customer form.\n     * Create customer billing\/shipping address if necessary using data from customer address forms.\n     * Set customer data to quote.\n     *\n     * @return $this\n     * @SuppressWarnings(PHPMD.CyclomaticComplexity)\n     *\/",1722],["T_WHITESPACE","\n    ",1731],["T_PUBLIC","public",1732],["T_WHITESPACE"," ",1732],["T_FUNCTION","function",1732],["T_WHITESPACE"," ",1732],["T_STRING","_prepareCustomer",1732],"(",")",["T_WHITESPACE","\n    ",1732],"{",["T_WHITESPACE","\n        ",1733],["T_IF","if",1734],["T_WHITESPACE"," ",1734],"(",["T_VARIABLE","$this",1734],["T_OBJECT_OPERATOR","->",1734],["T_STRING","getQuote",1734],"(",")",["T_OBJECT_OPERATOR","->",1734],["T_STRING","getCustomerIsGuest",1734],"(",")",")",["T_WHITESPACE"," ",1734],"{",["T_WHITESPACE","\n            ",1734],["T_RETURN","return",1735],["T_WHITESPACE"," ",1735],["T_VARIABLE","$this",1735],";",["T_WHITESPACE","\n        ",1735],"}",["T_WHITESPACE","\n        ",1736],["T_DOC_COMMENT","\/** @var $store \\Magento\\Store\\Model\\Store *\/",1737],["T_WHITESPACE","\n        ",1737],["T_VARIABLE","$store",1738],["T_WHITESPACE"," ",1738],"=",["T_WHITESPACE"," ",1738],["T_VARIABLE","$this",1738],["T_OBJECT_OPERATOR","->",1738],["T_STRING","getSession",1738],"(",")",["T_OBJECT_OPERATOR","->",1738],["T_STRING","getStore",1738],"(",")",";",["T_WHITESPACE","\n        ",1738],["T_VARIABLE","$customer",1739],["T_WHITESPACE"," ",1739],"=",["T_WHITESPACE"," ",1739],["T_VARIABLE","$this",1739],["T_OBJECT_OPERATOR","->",1739],["T_STRING","getQuote",1739],"(",")",["T_OBJECT_OPERATOR","->",1739],["T_STRING","getCustomer",1739],"(",")",";",["T_WHITESPACE","\n        ",1739],["T_IF","if",1740],["T_WHITESPACE"," ",1740],"(",["T_VARIABLE","$customer",1740],["T_OBJECT_OPERATOR","->",1740],["T_STRING","getId",1740],"(",")",["T_WHITESPACE"," ",1740],["T_BOOLEAN_AND","&&",1740],["T_WHITESPACE"," ",1740],"!",["T_VARIABLE","$this",1740],["T_OBJECT_OPERATOR","->",1740],["T_STRING","_customerIsInStore",1740],"(",["T_VARIABLE","$store",1740],")",")",["T_WHITESPACE"," ",1740],"{",["T_WHITESPACE","\n            ",1740],["T_DOC_COMMENT","\/** Create a new customer record if it is not available in the specified store *\/",1741],["T_WHITESPACE","\n            ",1741],["T_DOC_COMMENT","\/** Unset customer ID to ensure that new customer will be created *\/",1742],["T_WHITESPACE","\n            ",1742],["T_VARIABLE","$customer",1743],["T_OBJECT_OPERATOR","->",1743],["T_STRING","setId",1743],"(",["T_STRING","null",1743],")",["T_WHITESPACE","\n                ",1743],["T_OBJECT_OPERATOR","->",1744],["T_STRING","setStoreId",1744],"(",["T_VARIABLE","$store",1744],["T_OBJECT_OPERATOR","->",1744],["T_STRING","getId",1744],"(",")",")",["T_WHITESPACE","\n                ",1744],["T_OBJECT_OPERATOR","->",1745],["T_STRING","setWebsiteId",1745],"(",["T_VARIABLE","$store",1745],["T_OBJECT_OPERATOR","->",1745],["T_STRING","getWebsiteId",1745],"(",")",")",["T_WHITESPACE","\n                ",1745],["T_OBJECT_OPERATOR","->",1746],["T_STRING","setCreatedAt",1746],"(",["T_STRING","null",1746],")",";",["T_WHITESPACE","\n            ",1746],["T_VARIABLE","$customer",1747],["T_WHITESPACE"," ",1747],"=",["T_WHITESPACE"," ",1747],["T_VARIABLE","$this",1747],["T_OBJECT_OPERATOR","->",1747],["T_STRING","_validateCustomerData",1747],"(",["T_VARIABLE","$customer",1747],")",";",["T_WHITESPACE","\n        ",1747],"}",["T_WHITESPACE"," ",1748],["T_ELSE","else",1748],["T_WHITESPACE"," ",1748],["T_IF","if",1748],["T_WHITESPACE"," ",1748],"(","!",["T_VARIABLE","$customer",1748],["T_OBJECT_OPERATOR","->",1748],["T_STRING","getId",1748],"(",")",")",["T_WHITESPACE"," ",1748],"{",["T_WHITESPACE","\n            ",1748],["T_DOC_COMMENT","\/** Create new customer *\/",1749],["T_WHITESPACE","\n            ",1749],["T_VARIABLE","$customerBillingAddressDataObject",1750],["T_WHITESPACE"," ",1750],"=",["T_WHITESPACE"," ",1750],["T_VARIABLE","$this",1750],["T_OBJECT_OPERATOR","->",1750],["T_STRING","getBillingAddress",1750],"(",")",["T_OBJECT_OPERATOR","->",1750],["T_STRING","exportCustomerAddress",1750],"(",")",";",["T_WHITESPACE","\n            ",1750],["T_VARIABLE","$customer",1751],["T_OBJECT_OPERATOR","->",1751],["T_STRING","setSuffix",1751],"(",["T_VARIABLE","$customerBillingAddressDataObject",1751],["T_OBJECT_OPERATOR","->",1751],["T_STRING","getSuffix",1751],"(",")",")",["T_WHITESPACE","\n                ",1751],["T_OBJECT_OPERATOR","->",1752],["T_STRING","setFirstname",1752],"(",["T_VARIABLE","$customerBillingAddressDataObject",1752],["T_OBJECT_OPERATOR","->",1752],["T_STRING","getFirstname",1752],"(",")",")",["T_WHITESPACE","\n                ",1752],["T_OBJECT_OPERATOR","->",1753],["T_STRING","setLastname",1753],"(",["T_VARIABLE","$customerBillingAddressDataObject",1753],["T_OBJECT_OPERATOR","->",1753],["T_STRING","getLastname",1753],"(",")",")",["T_WHITESPACE","\n                ",1753],["T_OBJECT_OPERATOR","->",1754],["T_STRING","setMiddlename",1754],"(",["T_VARIABLE","$customerBillingAddressDataObject",1754],["T_OBJECT_OPERATOR","->",1754],["T_STRING","getMiddlename",1754],"(",")",")",["T_WHITESPACE","\n                ",1754],["T_OBJECT_OPERATOR","->",1755],["T_STRING","setPrefix",1755],"(",["T_VARIABLE","$customerBillingAddressDataObject",1755],["T_OBJECT_OPERATOR","->",1755],["T_STRING","getPrefix",1755],"(",")",")",["T_WHITESPACE","\n                ",1755],["T_OBJECT_OPERATOR","->",1756],["T_STRING","setStoreId",1756],"(",["T_VARIABLE","$store",1756],["T_OBJECT_OPERATOR","->",1756],["T_STRING","getId",1756],"(",")",")",["T_WHITESPACE","\n                ",1756],["T_OBJECT_OPERATOR","->",1757],["T_STRING","setWebsiteId",1757],"(",["T_VARIABLE","$store",1757],["T_OBJECT_OPERATOR","->",1757],["T_STRING","getWebsiteId",1757],"(",")",")",["T_WHITESPACE","\n                ",1757],["T_OBJECT_OPERATOR","->",1758],["T_STRING","setEmail",1758],"(",["T_VARIABLE","$this",1758],["T_OBJECT_OPERATOR","->",1758],["T_STRING","_getNewCustomerEmail",1758],"(",")",")",";",["T_WHITESPACE","\n            ",1758],["T_VARIABLE","$customer",1759],["T_WHITESPACE"," ",1759],"=",["T_WHITESPACE"," ",1759],["T_VARIABLE","$this",1759],["T_OBJECT_OPERATOR","->",1759],["T_STRING","_validateCustomerData",1759],"(",["T_VARIABLE","$customer",1759],")",";",["T_WHITESPACE","\n        ",1759],"}",["T_WHITESPACE","\n        ",1760],["T_VARIABLE","$this",1761],["T_OBJECT_OPERATOR","->",1761],["T_STRING","getQuote",1761],"(",")",["T_OBJECT_OPERATOR","->",1761],["T_STRING","setCustomer",1761],"(",["T_VARIABLE","$customer",1761],")",";",["T_WHITESPACE","\n\n        ",1761],["T_IF","if",1763],["T_WHITESPACE"," ",1763],"(",["T_VARIABLE","$this",1763],["T_OBJECT_OPERATOR","->",1763],["T_STRING","getBillingAddress",1763],"(",")",["T_OBJECT_OPERATOR","->",1763],["T_STRING","getSaveInAddressBook",1763],"(",")",")",["T_WHITESPACE"," ",1763],"{",["T_WHITESPACE","\n            ",1763],["T_VARIABLE","$this",1764],["T_OBJECT_OPERATOR","->",1764],["T_STRING","_prepareCustomerAddress",1764],"(",["T_VARIABLE","$this",1764],["T_OBJECT_OPERATOR","->",1764],["T_STRING","getQuote",1764],"(",")",["T_OBJECT_OPERATOR","->",1764],["T_STRING","getCustomer",1764],"(",")",",",["T_WHITESPACE"," ",1764],["T_VARIABLE","$this",1764],["T_OBJECT_OPERATOR","->",1764],["T_STRING","getBillingAddress",1764],"(",")",")",";",["T_WHITESPACE","\n            ",1764],["T_VARIABLE","$address",1765],["T_WHITESPACE"," ",1765],"=",["T_WHITESPACE"," ",1765],["T_VARIABLE","$this",1765],["T_OBJECT_OPERATOR","->",1765],["T_STRING","getBillingAddress",1765],"(",")",["T_OBJECT_OPERATOR","->",1765],["T_STRING","setCustomerId",1765],"(",["T_VARIABLE","$this",1765],["T_OBJECT_OPERATOR","->",1765],["T_STRING","getQuote",1765],"(",")",["T_OBJECT_OPERATOR","->",1765],["T_STRING","getCustomer",1765],"(",")",["T_OBJECT_OPERATOR","->",1765],["T_STRING","getId",1765],"(",")",")",";",["T_WHITESPACE","\n            ",1765],["T_VARIABLE","$this",1766],["T_OBJECT_OPERATOR","->",1766],["T_STRING","setBillingAddress",1766],"(",["T_VARIABLE","$address",1766],")",";",["T_WHITESPACE","\n        ",1766],"}",["T_WHITESPACE","\n        ",1767],["T_IF","if",1768],["T_WHITESPACE"," ",1768],"(","!",["T_VARIABLE","$this",1768],["T_OBJECT_OPERATOR","->",1768],["T_STRING","getQuote",1768],"(",")",["T_OBJECT_OPERATOR","->",1768],["T_STRING","isVirtual",1768],"(",")",["T_WHITESPACE"," ",1768],["T_BOOLEAN_AND","&&",1768],["T_WHITESPACE"," ",1768],["T_VARIABLE","$this",1768],["T_OBJECT_OPERATOR","->",1768],["T_STRING","getShippingAddress",1768],"(",")",["T_OBJECT_OPERATOR","->",1768],["T_STRING","getSaveInAddressBook",1768],"(",")",")",["T_WHITESPACE"," ",1768],"{",["T_WHITESPACE","\n            ",1768],["T_VARIABLE","$this",1769],["T_OBJECT_OPERATOR","->",1769],["T_STRING","_prepareCustomerAddress",1769],"(",["T_VARIABLE","$this",1769],["T_OBJECT_OPERATOR","->",1769],["T_STRING","getQuote",1769],"(",")",["T_OBJECT_OPERATOR","->",1769],["T_STRING","getCustomer",1769],"(",")",",",["T_WHITESPACE"," ",1769],["T_VARIABLE","$this",1769],["T_OBJECT_OPERATOR","->",1769],["T_STRING","getShippingAddress",1769],"(",")",")",";",["T_WHITESPACE","\n            ",1769],["T_VARIABLE","$address",1770],["T_WHITESPACE"," ",1770],"=",["T_WHITESPACE"," ",1770],["T_VARIABLE","$this",1770],["T_OBJECT_OPERATOR","->",1770],["T_STRING","getShippingAddress",1770],"(",")",["T_OBJECT_OPERATOR","->",1770],["T_STRING","setCustomerId",1770],"(",["T_VARIABLE","$this",1770],["T_OBJECT_OPERATOR","->",1770],["T_STRING","getQuote",1770],"(",")",["T_OBJECT_OPERATOR","->",1770],["T_STRING","getCustomer",1770],"(",")",["T_OBJECT_OPERATOR","->",1770],["T_STRING","getId",1770],"(",")",")",";",["T_WHITESPACE","\n            ",1770],["T_VARIABLE","$this",1771],["T_OBJECT_OPERATOR","->",1771],["T_STRING","setShippingAddress",1771],"(",["T_VARIABLE","$address",1771],")",";",["T_WHITESPACE","\n        ",1771],"}",["T_WHITESPACE","\n        ",1772],["T_VARIABLE","$this",1773],["T_OBJECT_OPERATOR","->",1773],["T_STRING","getQuote",1773],"(",")",["T_OBJECT_OPERATOR","->",1773],["T_STRING","updateCustomerData",1773],"(",["T_VARIABLE","$this",1773],["T_OBJECT_OPERATOR","->",1773],["T_STRING","getQuote",1773],"(",")",["T_OBJECT_OPERATOR","->",1773],["T_STRING","getCustomer",1773],"(",")",")",";",["T_WHITESPACE","\n\n        ",1773],["T_VARIABLE","$customer",1775],["T_WHITESPACE"," ",1775],"=",["T_WHITESPACE"," ",1775],["T_VARIABLE","$this",1775],["T_OBJECT_OPERATOR","->",1775],["T_STRING","getQuote",1775],"(",")",["T_OBJECT_OPERATOR","->",1775],["T_STRING","getCustomer",1775],"(",")",";",["T_WHITESPACE","\n        ",1775],["T_VARIABLE","$origAddresses",1776],["T_WHITESPACE"," ",1776],"=",["T_WHITESPACE"," ",1776],["T_VARIABLE","$customer",1776],["T_OBJECT_OPERATOR","->",1776],["T_STRING","getAddresses",1776],"(",")",";",["T_WHITESPACE"," ",1776],["T_COMMENT","\/\/ save original addresses\n",1776],["T_WHITESPACE","        ",1777],["T_VARIABLE","$customer",1777],["T_OBJECT_OPERATOR","->",1777],["T_STRING","setAddresses",1777],"(","[","]",")",";",["T_WHITESPACE","\n        ",1777],["T_VARIABLE","$customerData",1778],["T_WHITESPACE"," ",1778],"=",["T_WHITESPACE"," ",1778],["T_VARIABLE","$this",1778],["T_OBJECT_OPERATOR","->",1778],["T_STRING","customerMapper",1778],["T_OBJECT_OPERATOR","->",1778],["T_STRING","toFlatArray",1778],"(",["T_VARIABLE","$customer",1778],")",";",["T_WHITESPACE","\n        ",1778],["T_VARIABLE","$customer",1779],["T_OBJECT_OPERATOR","->",1779],["T_STRING","setAddresses",1779],"(",["T_VARIABLE","$origAddresses",1779],")",";",["T_WHITESPACE"," ",1779],["T_COMMENT","\/\/ restore original addresses\n",1779],["T_WHITESPACE","        ",1780],["T_FOREACH","foreach",1780],["T_WHITESPACE"," ",1780],"(",["T_VARIABLE","$this",1780],["T_OBJECT_OPERATOR","->",1780],["T_STRING","_createCustomerForm",1780],"(",["T_VARIABLE","$customer",1780],")",["T_OBJECT_OPERATOR","->",1780],["T_STRING","getUserAttributes",1780],"(",")",["T_WHITESPACE"," ",1780],["T_AS","as",1780],["T_WHITESPACE"," ",1780],["T_VARIABLE","$attribute",1780],")",["T_WHITESPACE"," ",1780],"{",["T_WHITESPACE","\n            ",1780],["T_IF","if",1781],["T_WHITESPACE"," ",1781],"(",["T_ISSET","isset",1781],"(",["T_VARIABLE","$customerData",1781],"[",["T_VARIABLE","$attribute",1781],["T_OBJECT_OPERATOR","->",1781],["T_STRING","getAttributeCode",1781],"(",")","]",")",")",["T_WHITESPACE"," ",1781],"{",["T_WHITESPACE","\n                ",1781],["T_VARIABLE","$quoteCode",1782],["T_WHITESPACE"," ",1782],"=",["T_WHITESPACE"," ",1782],["T_STRING","sprintf",1782],"(",["T_CONSTANT_ENCAPSED_STRING","'customer_%s'",1782],",",["T_WHITESPACE"," ",1782],["T_VARIABLE","$attribute",1782],["T_OBJECT_OPERATOR","->",1782],["T_STRING","getAttributeCode",1782],"(",")",")",";",["T_WHITESPACE","\n                ",1782],["T_VARIABLE","$this",1783],["T_OBJECT_OPERATOR","->",1783],["T_STRING","getQuote",1783],"(",")",["T_OBJECT_OPERATOR","->",1783],["T_STRING","setData",1783],"(",["T_VARIABLE","$quoteCode",1783],",",["T_WHITESPACE"," ",1783],["T_VARIABLE","$customerData",1783],"[",["T_VARIABLE","$attribute",1783],["T_OBJECT_OPERATOR","->",1783],["T_STRING","getAttributeCode",1783],"(",")","]",")",";",["T_WHITESPACE","\n            ",1783],"}",["T_WHITESPACE","\n        ",1784],"}",["T_WHITESPACE","\n\n        ",1785],["T_RETURN","return",1787],["T_WHITESPACE"," ",1787],["T_VARIABLE","$this",1787],";",["T_WHITESPACE","\n    ",1787],"}",["T_WHITESPACE","\n\n    ",1788],["T_DOC_COMMENT","\/**\n     * Create customer address and save it in the quote so that it can be used to persist later.\n     *\n     * @param \\Magento\\Customer\\Api\\Data\\CustomerInterface $customer\n     * @param \\Magento\\Quote\\Model\\Quote\\Address $quoteCustomerAddress\n     * @return void\n     * @throws \\InvalidArgumentException\n     * @SuppressWarnings(PHPMD.CyclomaticComplexity)\n     *\/",1790],["T_WHITESPACE","\n    ",1798],["T_PROTECTED","protected",1799],["T_WHITESPACE"," ",1799],["T_FUNCTION","function",1799],["T_WHITESPACE"," ",1799],["T_STRING","_prepareCustomerAddress",1799],"(",["T_VARIABLE","$customer",1799],",",["T_WHITESPACE"," ",1799],["T_VARIABLE","$quoteCustomerAddress",1799],")",["T_WHITESPACE","\n    ",1799],"{",["T_WHITESPACE","\n        ",1800],["T_COMMENT","\/\/ Possible that customerId is null for new customers\n",1801],["T_WHITESPACE","        ",1802],["T_VARIABLE","$quoteCustomerAddress",1802],["T_OBJECT_OPERATOR","->",1802],["T_STRING","setCustomerId",1802],"(",["T_VARIABLE","$customer",1802],["T_OBJECT_OPERATOR","->",1802],["T_STRING","getId",1802],"(",")",")",";",["T_WHITESPACE","\n        ",1802],["T_VARIABLE","$customerAddress",1803],["T_WHITESPACE"," ",1803],"=",["T_WHITESPACE"," ",1803],["T_VARIABLE","$quoteCustomerAddress",1803],["T_OBJECT_OPERATOR","->",1803],["T_STRING","exportCustomerAddress",1803],"(",")",";",["T_WHITESPACE","\n        ",1803],["T_VARIABLE","$quoteAddressId",1804],["T_WHITESPACE"," ",1804],"=",["T_WHITESPACE"," ",1804],["T_VARIABLE","$quoteCustomerAddress",1804],["T_OBJECT_OPERATOR","->",1804],["T_STRING","getCustomerAddressId",1804],"(",")",";",["T_WHITESPACE","\n        ",1804],["T_VARIABLE","$addressType",1805],["T_WHITESPACE"," ",1805],"=",["T_WHITESPACE"," ",1805],["T_VARIABLE","$quoteCustomerAddress",1805],["T_OBJECT_OPERATOR","->",1805],["T_STRING","getAddressType",1805],"(",")",";",["T_WHITESPACE","\n        ",1805],["T_IF","if",1806],["T_WHITESPACE"," ",1806],"(",["T_VARIABLE","$quoteAddressId",1806],")",["T_WHITESPACE"," ",1806],"{",["T_WHITESPACE","\n            ",1806],["T_DOC_COMMENT","\/** Update existing address *\/",1807],["T_WHITESPACE","\n            ",1807],["T_VARIABLE","$existingAddressDataObject",1808],["T_WHITESPACE"," ",1808],"=",["T_WHITESPACE"," ",1808],["T_VARIABLE","$this",1808],["T_OBJECT_OPERATOR","->",1808],["T_STRING","addressRepository",1808],["T_OBJECT_OPERATOR","->",1808],["T_STRING","getById",1808],"(",["T_VARIABLE","$quoteAddressId",1808],")",";",["T_WHITESPACE","\n            ",1808],["T_DOC_COMMENT","\/** Update customer address data *\/",1809],["T_WHITESPACE","\n            ",1809],["T_VARIABLE","$this",1810],["T_OBJECT_OPERATOR","->",1810],["T_STRING","dataObjectHelper",1810],["T_OBJECT_OPERATOR","->",1810],["T_STRING","mergeDataObjects",1810],"(",["T_WHITESPACE","\n                ",1810],["T_STRING","get_class",1811],"(",["T_VARIABLE","$existingAddressDataObject",1811],")",",",["T_WHITESPACE","\n                ",1811],["T_VARIABLE","$existingAddressDataObject",1812],",",["T_WHITESPACE","\n                ",1812],["T_VARIABLE","$customerAddress",1813],["T_WHITESPACE","\n            ",1813],")",";",["T_WHITESPACE","\n            ",1814],["T_VARIABLE","$customerAddress",1815],["T_WHITESPACE"," ",1815],"=",["T_WHITESPACE"," ",1815],["T_VARIABLE","$existingAddressDataObject",1815],";",["T_WHITESPACE","\n        ",1815],"}",["T_WHITESPACE"," ",1816],["T_ELSEIF","elseif",1816],["T_WHITESPACE"," ",1816],"(",["T_VARIABLE","$addressType",1816],["T_WHITESPACE"," ",1816],["T_IS_EQUAL","==",1816],["T_WHITESPACE"," ",1816],["T_NS_SEPARATOR","\\",1816],["T_STRING","Magento",1816],["T_NS_SEPARATOR","\\",1816],["T_STRING","Quote",1816],["T_NS_SEPARATOR","\\",1816],["T_STRING","Model",1816],["T_NS_SEPARATOR","\\",1816],["T_STRING","Quote",1816],["T_NS_SEPARATOR","\\",1816],["T_STRING","Address",1816],["T_DOUBLE_COLON","::",1816],["T_STRING","ADDRESS_TYPE_SHIPPING",1816],")",["T_WHITESPACE"," ",1816],"{",["T_WHITESPACE","\n            ",1816],["T_TRY","try",1817],["T_WHITESPACE"," ",1817],"{",["T_WHITESPACE","\n                ",1817],["T_VARIABLE","$billingAddressDataObject",1818],["T_WHITESPACE"," ",1818],"=",["T_WHITESPACE"," ",1818],["T_VARIABLE","$this",1818],["T_OBJECT_OPERATOR","->",1818],["T_STRING","accountManagement",1818],["T_OBJECT_OPERATOR","->",1818],["T_STRING","getDefaultBillingAddress",1818],"(",["T_VARIABLE","$customer",1818],["T_OBJECT_OPERATOR","->",1818],["T_STRING","getId",1818],"(",")",")",";",["T_WHITESPACE","\n            ",1818],"}",["T_WHITESPACE"," ",1819],["T_CATCH","catch",1819],["T_WHITESPACE"," ",1819],"(",["T_NS_SEPARATOR","\\",1819],["T_STRING","Exception",1819],["T_WHITESPACE"," ",1819],["T_VARIABLE","$e",1819],")",["T_WHITESPACE"," ",1819],"{",["T_WHITESPACE","\n                ",1819],["T_DOC_COMMENT","\/** Billing address does not exist. *\/",1820],["T_WHITESPACE","\n            ",1820],"}",["T_WHITESPACE","\n            ",1821],["T_VARIABLE","$isShippingAsBilling",1822],["T_WHITESPACE"," ",1822],"=",["T_WHITESPACE"," ",1822],["T_VARIABLE","$quoteCustomerAddress",1822],["T_OBJECT_OPERATOR","->",1822],["T_STRING","getSameAsBilling",1822],"(",")",";",["T_WHITESPACE","\n            ",1822],["T_IF","if",1823],["T_WHITESPACE"," ",1823],"(",["T_ISSET","isset",1823],"(",["T_VARIABLE","$billingAddressDataObject",1823],")",["T_WHITESPACE"," ",1823],["T_BOOLEAN_AND","&&",1823],["T_WHITESPACE"," ",1823],["T_VARIABLE","$isShippingAsBilling",1823],")",["T_WHITESPACE"," ",1823],"{",["T_WHITESPACE","\n                ",1823],["T_DOC_COMMENT","\/** Set existing billing address as default shipping *\/",1824],["T_WHITESPACE","\n                ",1824],["T_VARIABLE","$customerAddress",1825],["T_WHITESPACE"," ",1825],"=",["T_WHITESPACE"," ",1825],["T_VARIABLE","$billingAddressDataObject",1825],";",["T_WHITESPACE","\n                ",1825],["T_VARIABLE","$customerAddress",1826],["T_OBJECT_OPERATOR","->",1826],["T_STRING","setIsDefaultShipping",1826],"(",["T_STRING","true",1826],")",";",["T_WHITESPACE","\n            ",1826],"}",["T_WHITESPACE","\n        ",1827],"}",["T_WHITESPACE","\n\n        ",1828],["T_SWITCH","switch",1830],["T_WHITESPACE"," ",1830],"(",["T_VARIABLE","$addressType",1830],")",["T_WHITESPACE"," ",1830],"{",["T_WHITESPACE","\n            ",1830],["T_CASE","case",1831],["T_WHITESPACE"," ",1831],["T_NS_SEPARATOR","\\",1831],["T_STRING","Magento",1831],["T_NS_SEPARATOR","\\",1831],["T_STRING","Quote",1831],["T_NS_SEPARATOR","\\",1831],["T_STRING","Model",1831],["T_NS_SEPARATOR","\\",1831],["T_STRING","Quote",1831],["T_NS_SEPARATOR","\\",1831],["T_STRING","Address",1831],["T_DOUBLE_COLON","::",1831],["T_STRING","ADDRESS_TYPE_BILLING",1831],":",["T_WHITESPACE","\n                ",1831],["T_IF","if",1832],["T_WHITESPACE"," ",1832],"(",["T_STRING","is_null",1832],"(",["T_VARIABLE","$customer",1832],["T_OBJECT_OPERATOR","->",1832],["T_STRING","getDefaultBilling",1832],"(",")",")",")",["T_WHITESPACE"," ",1832],"{",["T_WHITESPACE","\n                    ",1832],["T_VARIABLE","$customerAddress",1833],["T_OBJECT_OPERATOR","->",1833],["T_STRING","setIsDefaultBilling",1833],"(",["T_STRING","true",1833],")",";",["T_WHITESPACE","\n                ",1833],"}",["T_WHITESPACE","\n                ",1834],["T_BREAK","break",1835],";",["T_WHITESPACE","\n            ",1835],["T_CASE","case",1836],["T_WHITESPACE"," ",1836],["T_NS_SEPARATOR","\\",1836],["T_STRING","Magento",1836],["T_NS_SEPARATOR","\\",1836],["T_STRING","Quote",1836],["T_NS_SEPARATOR","\\",1836],["T_STRING","Model",1836],["T_NS_SEPARATOR","\\",1836],["T_STRING","Quote",1836],["T_NS_SEPARATOR","\\",1836],["T_STRING","Address",1836],["T_DOUBLE_COLON","::",1836],["T_STRING","ADDRESS_TYPE_SHIPPING",1836],":",["T_WHITESPACE","\n                ",1836],["T_IF","if",1837],["T_WHITESPACE"," ",1837],"(",["T_STRING","is_null",1837],"(",["T_VARIABLE","$customer",1837],["T_OBJECT_OPERATOR","->",1837],["T_STRING","getDefaultShipping",1837],"(",")",")",")",["T_WHITESPACE"," ",1837],"{",["T_WHITESPACE","\n                    ",1837],["T_VARIABLE","$customerAddress",1838],["T_OBJECT_OPERATOR","->",1838],["T_STRING","setIsDefaultShipping",1838],"(",["T_STRING","true",1838],")",";",["T_WHITESPACE","\n                ",1838],"}",["T_WHITESPACE","\n                ",1839],["T_BREAK","break",1840],";",["T_WHITESPACE","\n            ",1840],["T_DEFAULT","default",1841],":",["T_WHITESPACE","\n                ",1841],["T_THROW","throw",1842],["T_WHITESPACE"," ",1842],["T_NEW","new",1842],["T_WHITESPACE"," ",1842],["T_NS_SEPARATOR","\\",1842],["T_STRING","InvalidArgumentException",1842],"(",["T_CONSTANT_ENCAPSED_STRING","'Customer address type is invalid.'",1842],")",";",["T_WHITESPACE","\n        ",1842],"}",["T_WHITESPACE","\n        ",1843],["T_VARIABLE","$this",1844],["T_OBJECT_OPERATOR","->",1844],["T_STRING","getQuote",1844],"(",")",["T_OBJECT_OPERATOR","->",1844],["T_STRING","setCustomer",1844],"(",["T_VARIABLE","$customer",1844],")",";",["T_WHITESPACE","\n        ",1844],["T_VARIABLE","$this",1845],["T_OBJECT_OPERATOR","->",1845],["T_STRING","getQuote",1845],"(",")",["T_OBJECT_OPERATOR","->",1845],["T_STRING","addCustomerAddress",1845],"(",["T_VARIABLE","$customerAddress",1845],")",";",["T_WHITESPACE","\n    ",1845],"}",["T_WHITESPACE","\n\n    ",1846],["T_DOC_COMMENT","\/**\n     * Prepare item otions\n     *\n     * @return $this\n     *\/",1848],["T_WHITESPACE","\n    ",1852],["T_PROTECTED","protected",1853],["T_WHITESPACE"," ",1853],["T_FUNCTION","function",1853],["T_WHITESPACE"," ",1853],["T_STRING","_prepareQuoteItems",1853],"(",")",["T_WHITESPACE","\n    ",1853],"{",["T_WHITESPACE","\n        ",1854],["T_FOREACH","foreach",1855],["T_WHITESPACE"," ",1855],"(",["T_VARIABLE","$this",1855],["T_OBJECT_OPERATOR","->",1855],["T_STRING","getQuote",1855],"(",")",["T_OBJECT_OPERATOR","->",1855],["T_STRING","getAllItems",1855],"(",")",["T_WHITESPACE"," ",1855],["T_AS","as",1855],["T_WHITESPACE"," ",1855],["T_VARIABLE","$item",1855],")",["T_WHITESPACE"," ",1855],"{",["T_WHITESPACE","\n            ",1855],["T_VARIABLE","$options",1856],["T_WHITESPACE"," ",1856],"=",["T_WHITESPACE"," ",1856],"[","]",";",["T_WHITESPACE","\n            ",1856],["T_VARIABLE","$productOptions",1857],["T_WHITESPACE"," ",1857],"=",["T_WHITESPACE"," ",1857],["T_VARIABLE","$item",1857],["T_OBJECT_OPERATOR","->",1857],["T_STRING","getProduct",1857],"(",")",["T_OBJECT_OPERATOR","->",1857],["T_STRING","getTypeInstance",1857],"(",")",["T_OBJECT_OPERATOR","->",1857],["T_STRING","getOrderOptions",1857],"(",["T_VARIABLE","$item",1857],["T_OBJECT_OPERATOR","->",1857],["T_STRING","getProduct",1857],"(",")",")",";",["T_WHITESPACE","\n            ",1857],["T_IF","if",1858],["T_WHITESPACE"," ",1858],"(",["T_VARIABLE","$productOptions",1858],")",["T_WHITESPACE"," ",1858],"{",["T_WHITESPACE","\n                ",1858],["T_VARIABLE","$productOptions",1859],"[",["T_CONSTANT_ENCAPSED_STRING","'info_buyRequest'",1859],"]","[",["T_CONSTANT_ENCAPSED_STRING","'options'",1859],"]",["T_WHITESPACE"," ",1859],"=",["T_WHITESPACE"," ",1859],["T_VARIABLE","$this",1859],["T_OBJECT_OPERATOR","->",1859],["T_STRING","_prepareOptionsForRequest",1859],"(",["T_VARIABLE","$item",1859],")",";",["T_WHITESPACE","\n                ",1859],["T_VARIABLE","$options",1860],["T_WHITESPACE"," ",1860],"=",["T_WHITESPACE"," ",1860],["T_VARIABLE","$productOptions",1860],";",["T_WHITESPACE","\n            ",1860],"}",["T_WHITESPACE","\n            ",1861],["T_VARIABLE","$addOptions",1862],["T_WHITESPACE"," ",1862],"=",["T_WHITESPACE"," ",1862],["T_VARIABLE","$item",1862],["T_OBJECT_OPERATOR","->",1862],["T_STRING","getOptionByCode",1862],"(",["T_CONSTANT_ENCAPSED_STRING","'additional_options'",1862],")",";",["T_WHITESPACE","\n            ",1862],["T_IF","if",1863],["T_WHITESPACE"," ",1863],"(",["T_VARIABLE","$addOptions",1863],")",["T_WHITESPACE"," ",1863],"{",["T_WHITESPACE","\n                ",1863],["T_VARIABLE","$options",1864],"[",["T_CONSTANT_ENCAPSED_STRING","'additional_options'",1864],"]",["T_WHITESPACE"," ",1864],"=",["T_WHITESPACE"," ",1864],["T_VARIABLE","$this",1864],["T_OBJECT_OPERATOR","->",1864],["T_STRING","serializer",1864],["T_OBJECT_OPERATOR","->",1864],["T_STRING","unserialize",1864],"(",["T_VARIABLE","$addOptions",1864],["T_OBJECT_OPERATOR","->",1864],["T_STRING","getValue",1864],"(",")",")",";",["T_WHITESPACE","\n            ",1864],"}",["T_WHITESPACE","\n            ",1865],["T_VARIABLE","$item",1866],["T_OBJECT_OPERATOR","->",1866],["T_STRING","setProductOrderOptions",1866],"(",["T_VARIABLE","$options",1866],")",";",["T_WHITESPACE","\n        ",1866],"}",["T_WHITESPACE","\n        ",1867],["T_RETURN","return",1868],["T_WHITESPACE"," ",1868],["T_VARIABLE","$this",1868],";",["T_WHITESPACE","\n    ",1868],"}",["T_WHITESPACE","\n\n    ",1869],["T_DOC_COMMENT","\/**\n     * Create new order\n     *\n     * @return \\Magento\\Sales\\Model\\Order\n     *\/",1871],["T_WHITESPACE","\n    ",1875],["T_PUBLIC","public",1876],["T_WHITESPACE"," ",1876],["T_FUNCTION","function",1876],["T_WHITESPACE"," ",1876],["T_STRING","createOrder",1876],"(",")",["T_WHITESPACE","\n    ",1876],"{",["T_WHITESPACE","\n        ",1877],["T_VARIABLE","$this",1878],["T_OBJECT_OPERATOR","->",1878],["T_STRING","_prepareCustomer",1878],"(",")",";",["T_WHITESPACE","\n        ",1878],["T_VARIABLE","$this",1879],["T_OBJECT_OPERATOR","->",1879],["T_STRING","_validate",1879],"(",")",";",["T_WHITESPACE","\n        ",1879],["T_VARIABLE","$quote",1880],["T_WHITESPACE"," ",1880],"=",["T_WHITESPACE"," ",1880],["T_VARIABLE","$this",1880],["T_OBJECT_OPERATOR","->",1880],["T_STRING","getQuote",1880],"(",")",";",["T_WHITESPACE","\n        ",1880],["T_VARIABLE","$this",1881],["T_OBJECT_OPERATOR","->",1881],["T_STRING","_prepareQuoteItems",1881],"(",")",";",["T_WHITESPACE","\n\n        ",1881],["T_VARIABLE","$orderData",1883],["T_WHITESPACE"," ",1883],"=",["T_WHITESPACE"," ",1883],"[","]",";",["T_WHITESPACE","\n        ",1883],["T_IF","if",1884],["T_WHITESPACE"," ",1884],"(",["T_VARIABLE","$this",1884],["T_OBJECT_OPERATOR","->",1884],["T_STRING","getSession",1884],"(",")",["T_OBJECT_OPERATOR","->",1884],["T_STRING","getOrder",1884],"(",")",["T_OBJECT_OPERATOR","->",1884],["T_STRING","getId",1884],"(",")",")",["T_WHITESPACE"," ",1884],"{",["T_WHITESPACE","\n            ",1884],["T_VARIABLE","$oldOrder",1885],["T_WHITESPACE"," ",1885],"=",["T_WHITESPACE"," ",1885],["T_VARIABLE","$this",1885],["T_OBJECT_OPERATOR","->",1885],["T_STRING","getSession",1885],"(",")",["T_OBJECT_OPERATOR","->",1885],["T_STRING","getOrder",1885],"(",")",";",["T_WHITESPACE","\n            ",1885],["T_VARIABLE","$originalId",1886],["T_WHITESPACE"," ",1886],"=",["T_WHITESPACE"," ",1886],["T_VARIABLE","$oldOrder",1886],["T_OBJECT_OPERATOR","->",1886],["T_STRING","getOriginalIncrementId",1886],"(",")",";",["T_WHITESPACE","\n            ",1886],["T_IF","if",1887],["T_WHITESPACE"," ",1887],"(","!",["T_VARIABLE","$originalId",1887],")",["T_WHITESPACE"," ",1887],"{",["T_WHITESPACE","\n                ",1887],["T_VARIABLE","$originalId",1888],["T_WHITESPACE"," ",1888],"=",["T_WHITESPACE"," ",1888],["T_VARIABLE","$oldOrder",1888],["T_OBJECT_OPERATOR","->",1888],["T_STRING","getIncrementId",1888],"(",")",";",["T_WHITESPACE","\n            ",1888],"}",["T_WHITESPACE","\n            ",1889],["T_VARIABLE","$orderData",1890],["T_WHITESPACE"," ",1890],"=",["T_WHITESPACE"," ",1890],"[",["T_WHITESPACE","\n                ",1890],["T_CONSTANT_ENCAPSED_STRING","'original_increment_id'",1891],["T_WHITESPACE"," ",1891],["T_DOUBLE_ARROW","=>",1891],["T_WHITESPACE"," ",1891],["T_VARIABLE","$originalId",1891],",",["T_WHITESPACE","\n                ",1891],["T_CONSTANT_ENCAPSED_STRING","'relation_parent_id'",1892],["T_WHITESPACE"," ",1892],["T_DOUBLE_ARROW","=>",1892],["T_WHITESPACE"," ",1892],["T_VARIABLE","$oldOrder",1892],["T_OBJECT_OPERATOR","->",1892],["T_STRING","getId",1892],"(",")",",",["T_WHITESPACE","\n                ",1892],["T_CONSTANT_ENCAPSED_STRING","'relation_parent_real_id'",1893],["T_WHITESPACE"," ",1893],["T_DOUBLE_ARROW","=>",1893],["T_WHITESPACE"," ",1893],["T_VARIABLE","$oldOrder",1893],["T_OBJECT_OPERATOR","->",1893],["T_STRING","getIncrementId",1893],"(",")",",",["T_WHITESPACE","\n                ",1893],["T_CONSTANT_ENCAPSED_STRING","'edit_increment'",1894],["T_WHITESPACE"," ",1894],["T_DOUBLE_ARROW","=>",1894],["T_WHITESPACE"," ",1894],["T_VARIABLE","$oldOrder",1894],["T_OBJECT_OPERATOR","->",1894],["T_STRING","getEditIncrement",1894],"(",")",["T_WHITESPACE"," ",1894],"+",["T_WHITESPACE"," ",1894],["T_LNUMBER","1",1894],",",["T_WHITESPACE","\n                ",1894],["T_CONSTANT_ENCAPSED_STRING","'increment_id'",1895],["T_WHITESPACE"," ",1895],["T_DOUBLE_ARROW","=>",1895],["T_WHITESPACE"," ",1895],["T_VARIABLE","$originalId",1895],["T_WHITESPACE"," ",1895],".",["T_WHITESPACE"," ",1895],["T_CONSTANT_ENCAPSED_STRING","'-'",1895],["T_WHITESPACE"," ",1895],".",["T_WHITESPACE"," ",1895],"(",["T_VARIABLE","$oldOrder",1895],["T_OBJECT_OPERATOR","->",1895],["T_STRING","getEditIncrement",1895],"(",")",["T_WHITESPACE"," ",1895],"+",["T_WHITESPACE"," ",1895],["T_LNUMBER","1",1895],")",["T_WHITESPACE","\n            ",1895],"]",";",["T_WHITESPACE","\n            ",1896],["T_VARIABLE","$quote",1897],["T_OBJECT_OPERATOR","->",1897],["T_STRING","setReservedOrderId",1897],"(",["T_VARIABLE","$orderData",1897],"[",["T_CONSTANT_ENCAPSED_STRING","'increment_id'",1897],"]",")",";",["T_WHITESPACE","\n        ",1897],"}",["T_WHITESPACE","\n        ",1898],["T_VARIABLE","$order",1899],["T_WHITESPACE"," ",1899],"=",["T_WHITESPACE"," ",1899],["T_VARIABLE","$this",1899],["T_OBJECT_OPERATOR","->",1899],["T_STRING","quoteManagement",1899],["T_OBJECT_OPERATOR","->",1899],["T_STRING","submit",1899],"(",["T_VARIABLE","$quote",1899],",",["T_WHITESPACE"," ",1899],["T_VARIABLE","$orderData",1899],")",";",["T_WHITESPACE","\n\n        ",1899],["T_IF","if",1901],["T_WHITESPACE"," ",1901],"(",["T_VARIABLE","$this",1901],["T_OBJECT_OPERATOR","->",1901],["T_STRING","getSession",1901],"(",")",["T_OBJECT_OPERATOR","->",1901],["T_STRING","getOrder",1901],"(",")",["T_OBJECT_OPERATOR","->",1901],["T_STRING","getId",1901],"(",")",")",["T_WHITESPACE"," ",1901],"{",["T_WHITESPACE","\n            ",1901],["T_VARIABLE","$oldOrder",1902],["T_WHITESPACE"," ",1902],"=",["T_WHITESPACE"," ",1902],["T_VARIABLE","$this",1902],["T_OBJECT_OPERATOR","->",1902],["T_STRING","getSession",1902],"(",")",["T_OBJECT_OPERATOR","->",1902],["T_STRING","getOrder",1902],"(",")",";",["T_WHITESPACE","\n            ",1902],["T_VARIABLE","$oldOrder",1903],["T_OBJECT_OPERATOR","->",1903],["T_STRING","setRelationChildId",1903],"(",["T_VARIABLE","$order",1903],["T_OBJECT_OPERATOR","->",1903],["T_STRING","getId",1903],"(",")",")",";",["T_WHITESPACE","\n            ",1903],["T_VARIABLE","$oldOrder",1904],["T_OBJECT_OPERATOR","->",1904],["T_STRING","setRelationChildRealId",1904],"(",["T_VARIABLE","$order",1904],["T_OBJECT_OPERATOR","->",1904],["T_STRING","getIncrementId",1904],"(",")",")",";",["T_WHITESPACE","\n            ",1904],["T_VARIABLE","$this",1905],["T_OBJECT_OPERATOR","->",1905],["T_STRING","orderManagement",1905],["T_OBJECT_OPERATOR","->",1905],["T_STRING","cancel",1905],"(",["T_VARIABLE","$oldOrder",1905],["T_OBJECT_OPERATOR","->",1905],["T_STRING","getEntityId",1905],"(",")",")",";",["T_WHITESPACE","\n            ",1905],["T_VARIABLE","$order",1906],["T_OBJECT_OPERATOR","->",1906],["T_STRING","save",1906],"(",")",";",["T_WHITESPACE","\n        ",1906],"}",["T_WHITESPACE","\n        ",1907],["T_IF","if",1908],["T_WHITESPACE"," ",1908],"(",["T_VARIABLE","$this",1908],["T_OBJECT_OPERATOR","->",1908],["T_STRING","getSendConfirmation",1908],"(",")",")",["T_WHITESPACE"," ",1908],"{",["T_WHITESPACE","\n            ",1908],["T_VARIABLE","$this",1909],["T_OBJECT_OPERATOR","->",1909],["T_STRING","emailSender",1909],["T_OBJECT_OPERATOR","->",1909],["T_STRING","send",1909],"(",["T_VARIABLE","$order",1909],")",";",["T_WHITESPACE","\n        ",1909],"}",["T_WHITESPACE","\n\n        ",1910],["T_VARIABLE","$this",1912],["T_OBJECT_OPERATOR","->",1912],["T_STRING","_eventManager",1912],["T_OBJECT_OPERATOR","->",1912],["T_STRING","dispatch",1912],"(",["T_CONSTANT_ENCAPSED_STRING","'checkout_submit_all_after'",1912],",",["T_WHITESPACE"," ",1912],"[",["T_CONSTANT_ENCAPSED_STRING","'order'",1912],["T_WHITESPACE"," ",1912],["T_DOUBLE_ARROW","=>",1912],["T_WHITESPACE"," ",1912],["T_VARIABLE","$order",1912],",",["T_WHITESPACE"," ",1912],["T_CONSTANT_ENCAPSED_STRING","'quote'",1912],["T_WHITESPACE"," ",1912],["T_DOUBLE_ARROW","=>",1912],["T_WHITESPACE"," ",1912],["T_VARIABLE","$quote",1912],"]",")",";",["T_WHITESPACE","\n\n        ",1912],["T_RETURN","return",1914],["T_WHITESPACE"," ",1914],["T_VARIABLE","$order",1914],";",["T_WHITESPACE","\n    ",1914],"}",["T_WHITESPACE","\n\n    ",1915],["T_DOC_COMMENT","\/**\n     * Validate quote data before order creation\n     *\n     * @return $this\n     * @throws \\Magento\\Framework\\Exception\\LocalizedException\n     * @SuppressWarnings(PHPMD.CyclomaticComplexity)\n     * @SuppressWarnings(PHPMD.NPathComplexity)\n     *\/",1917],["T_WHITESPACE","\n    ",1924],["T_PROTECTED","protected",1925],["T_WHITESPACE"," ",1925],["T_FUNCTION","function",1925],["T_WHITESPACE"," ",1925],["T_STRING","_validate",1925],"(",")",["T_WHITESPACE","\n    ",1925],"{",["T_WHITESPACE","\n        ",1926],["T_VARIABLE","$customerId",1927],["T_WHITESPACE"," ",1927],"=",["T_WHITESPACE"," ",1927],["T_VARIABLE","$this",1927],["T_OBJECT_OPERATOR","->",1927],["T_STRING","getSession",1927],"(",")",["T_OBJECT_OPERATOR","->",1927],["T_STRING","getCustomerId",1927],"(",")",";",["T_WHITESPACE","\n        ",1927],["T_IF","if",1928],["T_WHITESPACE"," ",1928],"(",["T_STRING","is_null",1928],"(",["T_VARIABLE","$customerId",1928],")",")",["T_WHITESPACE"," ",1928],"{",["T_WHITESPACE","\n            ",1928],["T_THROW","throw",1929],["T_WHITESPACE"," ",1929],["T_NEW","new",1929],["T_WHITESPACE"," ",1929],["T_NS_SEPARATOR","\\",1929],["T_STRING","Magento",1929],["T_NS_SEPARATOR","\\",1929],["T_STRING","Framework",1929],["T_NS_SEPARATOR","\\",1929],["T_STRING","Exception",1929],["T_NS_SEPARATOR","\\",1929],["T_STRING","LocalizedException",1929],"(",["T_STRING","__",1929],"(",["T_CONSTANT_ENCAPSED_STRING","'Please select a customer'",1929],")",")",";",["T_WHITESPACE","\n        ",1929],"}",["T_WHITESPACE","\n\n        ",1930],["T_IF","if",1932],["T_WHITESPACE"," ",1932],"(","!",["T_VARIABLE","$this",1932],["T_OBJECT_OPERATOR","->",1932],["T_STRING","getSession",1932],"(",")",["T_OBJECT_OPERATOR","->",1932],["T_STRING","getStore",1932],"(",")",["T_OBJECT_OPERATOR","->",1932],["T_STRING","getId",1932],"(",")",")",["T_WHITESPACE"," ",1932],"{",["T_WHITESPACE","\n            ",1932],["T_THROW","throw",1933],["T_WHITESPACE"," ",1933],["T_NEW","new",1933],["T_WHITESPACE"," ",1933],["T_NS_SEPARATOR","\\",1933],["T_STRING","Magento",1933],["T_NS_SEPARATOR","\\",1933],["T_STRING","Framework",1933],["T_NS_SEPARATOR","\\",1933],["T_STRING","Exception",1933],["T_NS_SEPARATOR","\\",1933],["T_STRING","LocalizedException",1933],"(",["T_STRING","__",1933],"(",["T_CONSTANT_ENCAPSED_STRING","'Please select a store'",1933],")",")",";",["T_WHITESPACE","\n        ",1933],"}",["T_WHITESPACE","\n        ",1934],["T_VARIABLE","$items",1935],["T_WHITESPACE"," ",1935],"=",["T_WHITESPACE"," ",1935],["T_VARIABLE","$this",1935],["T_OBJECT_OPERATOR","->",1935],["T_STRING","getQuote",1935],"(",")",["T_OBJECT_OPERATOR","->",1935],["T_STRING","getAllItems",1935],"(",")",";",["T_WHITESPACE","\n\n        ",1935],["T_IF","if",1937],["T_WHITESPACE"," ",1937],"(",["T_STRING","count",1937],"(",["T_VARIABLE","$items",1937],")",["T_WHITESPACE"," ",1937],["T_IS_EQUAL","==",1937],["T_WHITESPACE"," ",1937],["T_LNUMBER","0",1937],")",["T_WHITESPACE"," ",1937],"{",["T_WHITESPACE","\n            ",1937],["T_VARIABLE","$this",1938],["T_OBJECT_OPERATOR","->",1938],["T_STRING","_errors",1938],"[","]",["T_WHITESPACE"," ",1938],"=",["T_WHITESPACE"," ",1938],["T_STRING","__",1938],"(",["T_CONSTANT_ENCAPSED_STRING","'Please specify order items.'",1938],")",";",["T_WHITESPACE","\n        ",1938],"}",["T_WHITESPACE","\n\n        ",1939],["T_FOREACH","foreach",1941],["T_WHITESPACE"," ",1941],"(",["T_VARIABLE","$items",1941],["T_WHITESPACE"," ",1941],["T_AS","as",1941],["T_WHITESPACE"," ",1941],["T_VARIABLE","$item",1941],")",["T_WHITESPACE"," ",1941],"{",["T_WHITESPACE","\n            ",1941],["T_VARIABLE","$messages",1942],["T_WHITESPACE"," ",1942],"=",["T_WHITESPACE"," ",1942],["T_VARIABLE","$item",1942],["T_OBJECT_OPERATOR","->",1942],["T_STRING","getMessage",1942],"(",["T_STRING","false",1942],")",";",["T_WHITESPACE","\n            ",1942],["T_IF","if",1943],["T_WHITESPACE"," ",1943],"(",["T_VARIABLE","$item",1943],["T_OBJECT_OPERATOR","->",1943],["T_STRING","getHasError",1943],"(",")",["T_WHITESPACE"," ",1943],["T_BOOLEAN_AND","&&",1943],["T_WHITESPACE"," ",1943],["T_STRING","is_array",1943],"(",["T_VARIABLE","$messages",1943],")",["T_WHITESPACE"," ",1943],["T_BOOLEAN_AND","&&",1943],["T_WHITESPACE"," ",1943],"!",["T_EMPTY","empty",1943],"(",["T_VARIABLE","$messages",1943],")",")",["T_WHITESPACE"," ",1943],"{",["T_WHITESPACE","\n                ",1943],["T_VARIABLE","$this",1944],["T_OBJECT_OPERATOR","->",1944],["T_STRING","_errors",1944],["T_WHITESPACE"," ",1944],"=",["T_WHITESPACE"," ",1944],["T_STRING","array_merge",1944],"(",["T_VARIABLE","$this",1944],["T_OBJECT_OPERATOR","->",1944],["T_STRING","_errors",1944],",",["T_WHITESPACE"," ",1944],["T_VARIABLE","$messages",1944],")",";",["T_WHITESPACE","\n            ",1944],"}",["T_WHITESPACE","\n        ",1945],"}",["T_WHITESPACE","\n\n        ",1946],["T_IF","if",1948],["T_WHITESPACE"," ",1948],"(","!",["T_VARIABLE","$this",1948],["T_OBJECT_OPERATOR","->",1948],["T_STRING","getQuote",1948],"(",")",["T_OBJECT_OPERATOR","->",1948],["T_STRING","isVirtual",1948],"(",")",")",["T_WHITESPACE"," ",1948],"{",["T_WHITESPACE","\n            ",1948],["T_IF","if",1949],["T_WHITESPACE"," ",1949],"(","!",["T_VARIABLE","$this",1949],["T_OBJECT_OPERATOR","->",1949],["T_STRING","getQuote",1949],"(",")",["T_OBJECT_OPERATOR","->",1949],["T_STRING","getShippingAddress",1949],"(",")",["T_OBJECT_OPERATOR","->",1949],["T_STRING","getShippingMethod",1949],"(",")",")",["T_WHITESPACE"," ",1949],"{",["T_WHITESPACE","\n                ",1949],["T_VARIABLE","$this",1950],["T_OBJECT_OPERATOR","->",1950],["T_STRING","_errors",1950],"[","]",["T_WHITESPACE"," ",1950],"=",["T_WHITESPACE"," ",1950],["T_STRING","__",1950],"(",["T_CONSTANT_ENCAPSED_STRING","'Please specify a shipping method.'",1950],")",";",["T_WHITESPACE","\n            ",1950],"}",["T_WHITESPACE","\n        ",1951],"}",["T_WHITESPACE","\n\n        ",1952],["T_IF","if",1954],["T_WHITESPACE"," ",1954],"(","!",["T_VARIABLE","$this",1954],["T_OBJECT_OPERATOR","->",1954],["T_STRING","getQuote",1954],"(",")",["T_OBJECT_OPERATOR","->",1954],["T_STRING","getPayment",1954],"(",")",["T_OBJECT_OPERATOR","->",1954],["T_STRING","getMethod",1954],"(",")",")",["T_WHITESPACE"," ",1954],"{",["T_WHITESPACE","\n            ",1954],["T_VARIABLE","$this",1955],["T_OBJECT_OPERATOR","->",1955],["T_STRING","_errors",1955],"[","]",["T_WHITESPACE"," ",1955],"=",["T_WHITESPACE"," ",1955],["T_STRING","__",1955],"(",["T_CONSTANT_ENCAPSED_STRING","'Please specify a payment method.'",1955],")",";",["T_WHITESPACE","\n        ",1955],"}",["T_WHITESPACE"," ",1956],["T_ELSE","else",1956],["T_WHITESPACE"," ",1956],"{",["T_WHITESPACE","\n            ",1956],["T_VARIABLE","$method",1957],["T_WHITESPACE"," ",1957],"=",["T_WHITESPACE"," ",1957],["T_VARIABLE","$this",1957],["T_OBJECT_OPERATOR","->",1957],["T_STRING","getQuote",1957],"(",")",["T_OBJECT_OPERATOR","->",1957],["T_STRING","getPayment",1957],"(",")",["T_OBJECT_OPERATOR","->",1957],["T_STRING","getMethodInstance",1957],"(",")",";",["T_WHITESPACE","\n            ",1957],["T_IF","if",1958],["T_WHITESPACE"," ",1958],"(","!",["T_VARIABLE","$method",1958],["T_OBJECT_OPERATOR","->",1958],["T_STRING","isAvailable",1958],"(",["T_VARIABLE","$this",1958],["T_OBJECT_OPERATOR","->",1958],["T_STRING","getQuote",1958],"(",")",")",")",["T_WHITESPACE"," ",1958],"{",["T_WHITESPACE","\n                ",1958],["T_VARIABLE","$this",1959],["T_OBJECT_OPERATOR","->",1959],["T_STRING","_errors",1959],"[","]",["T_WHITESPACE"," ",1959],"=",["T_WHITESPACE"," ",1959],["T_STRING","__",1959],"(",["T_CONSTANT_ENCAPSED_STRING","'This payment method is not available.'",1959],")",";",["T_WHITESPACE","\n            ",1959],"}",["T_WHITESPACE"," ",1960],["T_ELSE","else",1960],["T_WHITESPACE"," ",1960],"{",["T_WHITESPACE","\n                ",1960],["T_TRY","try",1961],["T_WHITESPACE"," ",1961],"{",["T_WHITESPACE","\n                    ",1961],["T_VARIABLE","$method",1962],["T_OBJECT_OPERATOR","->",1962],["T_STRING","validate",1962],"(",")",";",["T_WHITESPACE","\n                ",1962],"}",["T_WHITESPACE"," ",1963],["T_CATCH","catch",1963],["T_WHITESPACE"," ",1963],"(",["T_NS_SEPARATOR","\\",1963],["T_STRING","Magento",1963],["T_NS_SEPARATOR","\\",1963],["T_STRING","Framework",1963],["T_NS_SEPARATOR","\\",1963],["T_STRING","Exception",1963],["T_NS_SEPARATOR","\\",1963],["T_STRING","LocalizedException",1963],["T_WHITESPACE"," ",1963],["T_VARIABLE","$e",1963],")",["T_WHITESPACE"," ",1963],"{",["T_WHITESPACE","\n                    ",1963],["T_VARIABLE","$this",1964],["T_OBJECT_OPERATOR","->",1964],["T_STRING","_errors",1964],"[","]",["T_WHITESPACE"," ",1964],"=",["T_WHITESPACE"," ",1964],["T_VARIABLE","$e",1964],["T_OBJECT_OPERATOR","->",1964],["T_STRING","getMessage",1964],"(",")",";",["T_WHITESPACE","\n                ",1964],"}",["T_WHITESPACE","\n            ",1965],"}",["T_WHITESPACE","\n        ",1966],"}",["T_WHITESPACE","\n        ",1967],["T_IF","if",1968],["T_WHITESPACE"," ",1968],"(","!",["T_EMPTY","empty",1968],"(",["T_VARIABLE","$this",1968],["T_OBJECT_OPERATOR","->",1968],["T_STRING","_errors",1968],")",")",["T_WHITESPACE"," ",1968],"{",["T_WHITESPACE","\n            ",1968],["T_FOREACH","foreach",1969],["T_WHITESPACE"," ",1969],"(",["T_VARIABLE","$this",1969],["T_OBJECT_OPERATOR","->",1969],["T_STRING","_errors",1969],["T_WHITESPACE"," ",1969],["T_AS","as",1969],["T_WHITESPACE"," ",1969],["T_VARIABLE","$error",1969],")",["T_WHITESPACE"," ",1969],"{",["T_WHITESPACE","\n                ",1969],["T_VARIABLE","$this",1970],["T_OBJECT_OPERATOR","->",1970],["T_STRING","messageManager",1970],["T_OBJECT_OPERATOR","->",1970],["T_STRING","addError",1970],"(",["T_VARIABLE","$error",1970],")",";",["T_WHITESPACE","\n            ",1970],"}",["T_WHITESPACE","\n            ",1971],["T_THROW","throw",1972],["T_WHITESPACE"," ",1972],["T_NEW","new",1972],["T_WHITESPACE"," ",1972],["T_NS_SEPARATOR","\\",1972],["T_STRING","Magento",1972],["T_NS_SEPARATOR","\\",1972],["T_STRING","Framework",1972],["T_NS_SEPARATOR","\\",1972],["T_STRING","Exception",1972],["T_NS_SEPARATOR","\\",1972],["T_STRING","LocalizedException",1972],"(",["T_STRING","__",1972],"(",["T_CONSTANT_ENCAPSED_STRING","'Validation is failed.'",1972],")",")",";",["T_WHITESPACE","\n        ",1972],"}",["T_WHITESPACE","\n\n        ",1973],["T_RETURN","return",1975],["T_WHITESPACE"," ",1975],["T_VARIABLE","$this",1975],";",["T_WHITESPACE","\n    ",1975],"}",["T_WHITESPACE","\n\n    ",1976],["T_DOC_COMMENT","\/**\n     * Retrieve or generate new customer email.\n     *\n     * @return string\n     *\/",1978],["T_WHITESPACE","\n    ",1982],["T_PROTECTED","protected",1983],["T_WHITESPACE"," ",1983],["T_FUNCTION","function",1983],["T_WHITESPACE"," ",1983],["T_STRING","_getNewCustomerEmail",1983],"(",")",["T_WHITESPACE","\n    ",1983],"{",["T_WHITESPACE","\n        ",1984],["T_VARIABLE","$email",1985],["T_WHITESPACE"," ",1985],"=",["T_WHITESPACE"," ",1985],["T_VARIABLE","$this",1985],["T_OBJECT_OPERATOR","->",1985],["T_STRING","getData",1985],"(",["T_CONSTANT_ENCAPSED_STRING","'account\/email'",1985],")",";",["T_WHITESPACE","\n        ",1985],["T_IF","if",1986],["T_WHITESPACE"," ",1986],"(",["T_EMPTY","empty",1986],"(",["T_VARIABLE","$email",1986],")",")",["T_WHITESPACE"," ",1986],"{",["T_WHITESPACE","\n            ",1986],["T_VARIABLE","$host",1987],["T_WHITESPACE"," ",1987],"=",["T_WHITESPACE"," ",1987],["T_VARIABLE","$this",1987],["T_OBJECT_OPERATOR","->",1987],["T_STRING","_scopeConfig",1987],["T_OBJECT_OPERATOR","->",1987],["T_STRING","getValue",1987],"(",["T_WHITESPACE","\n                ",1987],["T_STRING","self",1988],["T_DOUBLE_COLON","::",1988],["T_STRING","XML_PATH_DEFAULT_EMAIL_DOMAIN",1988],",",["T_WHITESPACE","\n                ",1988],["T_NS_SEPARATOR","\\",1989],["T_STRING","Magento",1989],["T_NS_SEPARATOR","\\",1989],["T_STRING","Store",1989],["T_NS_SEPARATOR","\\",1989],["T_STRING","Model",1989],["T_NS_SEPARATOR","\\",1989],["T_STRING","ScopeInterface",1989],["T_DOUBLE_COLON","::",1989],["T_STRING","SCOPE_STORE",1989],["T_WHITESPACE","\n            ",1989],")",";",["T_WHITESPACE","\n            ",1990],["T_VARIABLE","$account",1991],["T_WHITESPACE"," ",1991],"=",["T_WHITESPACE"," ",1991],["T_STRING","time",1991],"(",")",";",["T_WHITESPACE","\n            ",1991],["T_VARIABLE","$email",1992],["T_WHITESPACE"," ",1992],"=",["T_WHITESPACE"," ",1992],["T_VARIABLE","$account",1992],["T_WHITESPACE"," ",1992],".",["T_WHITESPACE"," ",1992],["T_CONSTANT_ENCAPSED_STRING","'@'",1992],["T_WHITESPACE"," ",1992],".",["T_WHITESPACE"," ",1992],["T_VARIABLE","$host",1992],";",["T_WHITESPACE","\n            ",1992],["T_VARIABLE","$account",1993],["T_WHITESPACE"," ",1993],"=",["T_WHITESPACE"," ",1993],["T_VARIABLE","$this",1993],["T_OBJECT_OPERATOR","->",1993],["T_STRING","getData",1993],"(",["T_CONSTANT_ENCAPSED_STRING","'account'",1993],")",";",["T_WHITESPACE","\n            ",1993],["T_VARIABLE","$account",1994],"[",["T_CONSTANT_ENCAPSED_STRING","'email'",1994],"]",["T_WHITESPACE"," ",1994],"=",["T_WHITESPACE"," ",1994],["T_VARIABLE","$email",1994],";",["T_WHITESPACE","\n            ",1994],["T_VARIABLE","$this",1995],["T_OBJECT_OPERATOR","->",1995],["T_STRING","setData",1995],"(",["T_CONSTANT_ENCAPSED_STRING","'account'",1995],",",["T_WHITESPACE"," ",1995],["T_VARIABLE","$account",1995],")",";",["T_WHITESPACE","\n        ",1995],"}",["T_WHITESPACE","\n\n        ",1996],["T_RETURN","return",1998],["T_WHITESPACE"," ",1998],["T_VARIABLE","$email",1998],";",["T_WHITESPACE","\n    ",1998],"}",["T_WHITESPACE","\n",1999],"}",["T_WHITESPACE","\n",2000]]
[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Copyright \u00c2\u00a9 2013-2017 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n *\/",2],["T_WHITESPACE","\n",5],["T_NAMESPACE","namespace",6],["T_WHITESPACE"," ",6],["T_STRING","Magento",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Sales",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Model",6],["T_NS_SEPARATOR","\\",6],["T_STRING","ResourceModel",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Report",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Order",6],";",["T_WHITESPACE","\n\n",6],["T_DOC_COMMENT","\/**\n * Order entity resource model with aggregation by created at\n *\n * @author      Magento Core Team <core@magentocommerce.com>\n *\/",8],["T_WHITESPACE","\n",12],["T_CLASS","class",13],["T_WHITESPACE"," ",13],["T_STRING","Createdat",13],["T_WHITESPACE"," ",13],["T_EXTENDS","extends",13],["T_WHITESPACE"," ",13],["T_NS_SEPARATOR","\\",13],["T_STRING","Magento",13],["T_NS_SEPARATOR","\\",13],["T_STRING","Sales",13],["T_NS_SEPARATOR","\\",13],["T_STRING","Model",13],["T_NS_SEPARATOR","\\",13],["T_STRING","ResourceModel",13],["T_NS_SEPARATOR","\\",13],["T_STRING","Report",13],["T_NS_SEPARATOR","\\",13],["T_STRING","AbstractReport",13],["T_WHITESPACE","\n",13],"{",["T_WHITESPACE","\n    ",14],["T_DOC_COMMENT","\/**\n     * Model initialization\n     *\n     * @return void\n     *\/",15],["T_WHITESPACE","\n    ",19],["T_PROTECTED","protected",20],["T_WHITESPACE"," ",20],["T_FUNCTION","function",20],["T_WHITESPACE"," ",20],["T_STRING","_construct",20],"(",")",["T_WHITESPACE","\n    ",20],"{",["T_WHITESPACE","\n        ",21],["T_VARIABLE","$this",22],["T_OBJECT_OPERATOR","->",22],["T_STRING","_init",22],"(",["T_CONSTANT_ENCAPSED_STRING","'sales_order_aggregated_created'",22],",",["T_WHITESPACE"," ",22],["T_CONSTANT_ENCAPSED_STRING","'id'",22],")",";",["T_WHITESPACE","\n    ",22],"}",["T_WHITESPACE","\n\n    ",23],["T_DOC_COMMENT","\/**\n     * Aggregate Orders data by order created at\n     *\n     * @param string|int|\\DateTime|array|null $from\n     * @param string|int|\\DateTime|array|null $to\n     * @return $this\n     *\/",25],["T_WHITESPACE","\n    ",31],["T_PUBLIC","public",32],["T_WHITESPACE"," ",32],["T_FUNCTION","function",32],["T_WHITESPACE"," ",32],["T_STRING","aggregate",32],"(",["T_VARIABLE","$from",32],["T_WHITESPACE"," ",32],"=",["T_WHITESPACE"," ",32],["T_STRING","null",32],",",["T_WHITESPACE"," ",32],["T_VARIABLE","$to",32],["T_WHITESPACE"," ",32],"=",["T_WHITESPACE"," ",32],["T_STRING","null",32],")",["T_WHITESPACE","\n    ",32],"{",["T_WHITESPACE","\n        ",33],["T_RETURN","return",34],["T_WHITESPACE"," ",34],["T_VARIABLE","$this",34],["T_OBJECT_OPERATOR","->",34],["T_STRING","_aggregateByField",34],"(",["T_CONSTANT_ENCAPSED_STRING","'created_at'",34],",",["T_WHITESPACE"," ",34],["T_VARIABLE","$from",34],",",["T_WHITESPACE"," ",34],["T_VARIABLE","$to",34],")",";",["T_WHITESPACE","\n    ",34],"}",["T_WHITESPACE","\n\n    ",35],["T_DOC_COMMENT","\/**\n     * Aggregate Orders data by custom field\n     *\n     * @param string $aggregationField\n     * @param string|int|\\DateTime|array|null $from\n     * @param string|int|\\DateTime|array|null $to\n     * @return $this\n     * @throws \\Exception\n     * @SuppressWarnings(PHPMD.ExcessiveMethodLength)\n     * @SuppressWarnings(PHPMD.UnusedLocalVariable)\n     *\/",37],["T_WHITESPACE","\n    ",47],["T_PROTECTED","protected",48],["T_WHITESPACE"," ",48],["T_FUNCTION","function",48],["T_WHITESPACE"," ",48],["T_STRING","_aggregateByField",48],"(",["T_VARIABLE","$aggregationField",48],",",["T_WHITESPACE"," ",48],["T_VARIABLE","$from",48],",",["T_WHITESPACE"," ",48],["T_VARIABLE","$to",48],")",["T_WHITESPACE","\n    ",48],"{",["T_WHITESPACE","\n        ",49],["T_VARIABLE","$connection",50],["T_WHITESPACE"," ",50],"=",["T_WHITESPACE"," ",50],["T_VARIABLE","$this",50],["T_OBJECT_OPERATOR","->",50],["T_STRING","getConnection",50],"(",")",";",["T_WHITESPACE","\n\n        ",50],["T_VARIABLE","$connection",52],["T_OBJECT_OPERATOR","->",52],["T_STRING","beginTransaction",52],"(",")",";",["T_WHITESPACE","\n        ",52],["T_TRY","try",53],["T_WHITESPACE"," ",53],"{",["T_WHITESPACE","\n            ",53],["T_IF","if",54],["T_WHITESPACE"," ",54],"(",["T_VARIABLE","$from",54],["T_WHITESPACE"," ",54],["T_IS_NOT_IDENTICAL","!==",54],["T_WHITESPACE"," ",54],["T_STRING","null",54],["T_WHITESPACE"," ",54],["T_BOOLEAN_OR","||",54],["T_WHITESPACE"," ",54],["T_VARIABLE","$to",54],["T_WHITESPACE"," ",54],["T_IS_NOT_IDENTICAL","!==",54],["T_WHITESPACE"," ",54],["T_STRING","null",54],")",["T_WHITESPACE"," ",54],"{",["T_WHITESPACE","\n                ",54],["T_VARIABLE","$subSelect",55],["T_WHITESPACE"," ",55],"=",["T_WHITESPACE"," ",55],["T_VARIABLE","$this",55],["T_OBJECT_OPERATOR","->",55],["T_STRING","_getTableDateRangeSelect",55],"(",["T_WHITESPACE","\n                    ",55],["T_VARIABLE","$this",56],["T_OBJECT_OPERATOR","->",56],["T_STRING","getTable",56],"(",["T_CONSTANT_ENCAPSED_STRING","'sales_order'",56],")",",",["T_WHITESPACE","\n                    ",56],["T_VARIABLE","$aggregationField",57],",",["T_WHITESPACE","\n                    ",57],["T_VARIABLE","$aggregationField",58],",",["T_WHITESPACE","\n                    ",58],["T_VARIABLE","$from",59],",",["T_WHITESPACE","\n                    ",59],["T_VARIABLE","$to",60],["T_WHITESPACE","\n                ",60],")",";",["T_WHITESPACE","\n            ",61],"}",["T_WHITESPACE"," ",62],["T_ELSE","else",62],["T_WHITESPACE"," ",62],"{",["T_WHITESPACE","\n                ",62],["T_VARIABLE","$subSelect",63],["T_WHITESPACE"," ",63],"=",["T_WHITESPACE"," ",63],["T_STRING","null",63],";",["T_WHITESPACE","\n            ",63],"}",["T_WHITESPACE","\n            ",64],["T_VARIABLE","$this",65],["T_OBJECT_OPERATOR","->",65],["T_STRING","_clearTableByDateRange",65],"(",["T_VARIABLE","$this",65],["T_OBJECT_OPERATOR","->",65],["T_STRING","getMainTable",65],"(",")",",",["T_WHITESPACE"," ",65],["T_VARIABLE","$from",65],",",["T_WHITESPACE"," ",65],["T_VARIABLE","$to",65],",",["T_WHITESPACE"," ",65],["T_VARIABLE","$subSelect",65],")",";",["T_WHITESPACE","\n\n            ",65],["T_VARIABLE","$periodExpr",67],["T_WHITESPACE"," ",67],"=",["T_WHITESPACE"," ",67],["T_VARIABLE","$connection",67],["T_OBJECT_OPERATOR","->",67],["T_STRING","getDatePartSql",67],"(",["T_WHITESPACE","\n                ",67],["T_VARIABLE","$this",68],["T_OBJECT_OPERATOR","->",68],["T_STRING","getStoreTZOffsetQuery",68],"(",["T_WHITESPACE","\n                    ",68],"[",["T_CONSTANT_ENCAPSED_STRING","'o'",69],["T_WHITESPACE"," ",69],["T_DOUBLE_ARROW","=>",69],["T_WHITESPACE"," ",69],["T_VARIABLE","$this",69],["T_OBJECT_OPERATOR","->",69],["T_STRING","getTable",69],"(",["T_CONSTANT_ENCAPSED_STRING","'sales_order'",69],")","]",",",["T_WHITESPACE","\n                    ",69],["T_CONSTANT_ENCAPSED_STRING","'o.'",70],["T_WHITESPACE"," ",70],".",["T_WHITESPACE"," ",70],["T_VARIABLE","$aggregationField",70],",",["T_WHITESPACE","\n                    ",70],["T_VARIABLE","$from",71],",",["T_WHITESPACE","\n                    ",71],["T_VARIABLE","$to",72],["T_WHITESPACE","\n                ",72],")",["T_WHITESPACE","\n            ",73],")",";",["T_WHITESPACE","\n            ",74],["T_COMMENT","\/\/ Columns list\n",75],["T_WHITESPACE","            ",76],["T_VARIABLE","$columns",76],["T_WHITESPACE"," ",76],"=",["T_WHITESPACE"," ",76],"[",["T_WHITESPACE","\n                ",76],["T_CONSTANT_ENCAPSED_STRING","'period'",77],["T_WHITESPACE"," ",77],["T_DOUBLE_ARROW","=>",77],["T_WHITESPACE"," ",77],["T_VARIABLE","$periodExpr",77],",",["T_WHITESPACE","\n                ",77],["T_CONSTANT_ENCAPSED_STRING","'store_id'",78],["T_WHITESPACE"," ",78],["T_DOUBLE_ARROW","=>",78],["T_WHITESPACE"," ",78],["T_CONSTANT_ENCAPSED_STRING","'o.store_id'",78],",",["T_WHITESPACE","\n                ",78],["T_CONSTANT_ENCAPSED_STRING","'order_status'",79],["T_WHITESPACE"," ",79],["T_DOUBLE_ARROW","=>",79],["T_WHITESPACE"," ",79],["T_CONSTANT_ENCAPSED_STRING","'o.status'",79],",",["T_WHITESPACE","\n                ",79],["T_CONSTANT_ENCAPSED_STRING","'orders_count'",80],["T_WHITESPACE"," ",80],["T_DOUBLE_ARROW","=>",80],["T_WHITESPACE"," ",80],["T_NEW","new",80],["T_WHITESPACE"," ",80],["T_NS_SEPARATOR","\\",80],["T_STRING","Zend_Db_Expr",80],"(",["T_CONSTANT_ENCAPSED_STRING","'COUNT(o.entity_id)'",80],")",",",["T_WHITESPACE","\n                ",80],["T_CONSTANT_ENCAPSED_STRING","'total_qty_ordered'",81],["T_WHITESPACE"," ",81],["T_DOUBLE_ARROW","=>",81],["T_WHITESPACE"," ",81],["T_NEW","new",81],["T_WHITESPACE"," ",81],["T_NS_SEPARATOR","\\",81],["T_STRING","Zend_Db_Expr",81],"(",["T_CONSTANT_ENCAPSED_STRING","'SUM(oi.total_qty_ordered)'",81],")",",",["T_WHITESPACE","\n                ",81],["T_CONSTANT_ENCAPSED_STRING","'total_qty_invoiced'",82],["T_WHITESPACE"," ",82],["T_DOUBLE_ARROW","=>",82],["T_WHITESPACE"," ",82],["T_NEW","new",82],["T_WHITESPACE"," ",82],["T_NS_SEPARATOR","\\",82],["T_STRING","Zend_Db_Expr",82],"(",["T_CONSTANT_ENCAPSED_STRING","'SUM(oi.total_qty_invoiced)'",82],")",",",["T_WHITESPACE","\n                ",82],["T_CONSTANT_ENCAPSED_STRING","'total_income_amount'",83],["T_WHITESPACE"," ",83],["T_DOUBLE_ARROW","=>",83],["T_WHITESPACE"," ",83],["T_NEW","new",83],["T_WHITESPACE"," ",83],["T_NS_SEPARATOR","\\",83],["T_STRING","Zend_Db_Expr",83],"(",["T_WHITESPACE","\n                    ",83],["T_STRING","sprintf",84],"(",["T_WHITESPACE","\n                        ",84],["T_CONSTANT_ENCAPSED_STRING","'SUM((%s - %s) * %s)'",85],",",["T_WHITESPACE","\n                        ",85],["T_VARIABLE","$connection",86],["T_OBJECT_OPERATOR","->",86],["T_STRING","getIfNullSql",86],"(",["T_CONSTANT_ENCAPSED_STRING","'o.base_grand_total'",86],",",["T_WHITESPACE"," ",86],["T_LNUMBER","0",86],")",",",["T_WHITESPACE","\n                        ",86],["T_VARIABLE","$connection",87],["T_OBJECT_OPERATOR","->",87],["T_STRING","getIfNullSql",87],"(",["T_CONSTANT_ENCAPSED_STRING","'o.base_total_canceled'",87],",",["T_WHITESPACE"," ",87],["T_LNUMBER","0",87],")",",",["T_WHITESPACE","\n                        ",87],["T_VARIABLE","$connection",88],["T_OBJECT_OPERATOR","->",88],["T_STRING","getIfNullSql",88],"(",["T_CONSTANT_ENCAPSED_STRING","'o.base_to_global_rate'",88],",",["T_WHITESPACE"," ",88],["T_LNUMBER","0",88],")",["T_WHITESPACE","\n                    ",88],")",["T_WHITESPACE","\n                ",89],")",",",["T_WHITESPACE","\n                ",90],["T_CONSTANT_ENCAPSED_STRING","'total_revenue_amount'",91],["T_WHITESPACE"," ",91],["T_DOUBLE_ARROW","=>",91],["T_WHITESPACE"," ",91],["T_NEW","new",91],["T_WHITESPACE"," ",91],["T_NS_SEPARATOR","\\",91],["T_STRING","Zend_Db_Expr",91],"(",["T_WHITESPACE","\n                    ",91],["T_STRING","sprintf",92],"(",["T_WHITESPACE","\n                        ",92],["T_CONSTANT_ENCAPSED_STRING","'SUM((%s - %s - %s - (%s - %s - %s)) * %s)'",93],",",["T_WHITESPACE","\n                        ",93],["T_VARIABLE","$connection",94],["T_OBJECT_OPERATOR","->",94],["T_STRING","getIfNullSql",94],"(",["T_CONSTANT_ENCAPSED_STRING","'o.base_total_invoiced'",94],",",["T_WHITESPACE"," ",94],["T_LNUMBER","0",94],")",",",["T_WHITESPACE","\n                        ",94],["T_VARIABLE","$connection",95],["T_OBJECT_OPERATOR","->",95],["T_STRING","getIfNullSql",95],"(",["T_CONSTANT_ENCAPSED_STRING","'o.base_tax_invoiced'",95],",",["T_WHITESPACE"," ",95],["T_LNUMBER","0",95],")",",",["T_WHITESPACE","\n                        ",95],["T_VARIABLE","$connection",96],["T_OBJECT_OPERATOR","->",96],["T_STRING","getIfNullSql",96],"(",["T_CONSTANT_ENCAPSED_STRING","'o.base_shipping_invoiced'",96],",",["T_WHITESPACE"," ",96],["T_LNUMBER","0",96],")",",",["T_WHITESPACE","\n                        ",96],["T_VARIABLE","$connection",97],["T_OBJECT_OPERATOR","->",97],["T_STRING","getIfNullSql",97],"(",["T_CONSTANT_ENCAPSED_STRING","'o.base_total_refunded'",97],",",["T_WHITESPACE"," ",97],["T_LNUMBER","0",97],")",",",["T_WHITESPACE","\n                        ",97],["T_VARIABLE","$connection",98],["T_OBJECT_OPERATOR","->",98],["T_STRING","getIfNullSql",98],"(",["T_CONSTANT_ENCAPSED_STRING","'o.base_tax_refunded'",98],",",["T_WHITESPACE"," ",98],["T_LNUMBER","0",98],")",",",["T_WHITESPACE","\n                        ",98],["T_VARIABLE","$connection",99],["T_OBJECT_OPERATOR","->",99],["T_STRING","getIfNullSql",99],"(",["T_CONSTANT_ENCAPSED_STRING","'o.base_shipping_refunded'",99],",",["T_WHITESPACE"," ",99],["T_LNUMBER","0",99],")",",",["T_WHITESPACE","\n                        ",99],["T_VARIABLE","$connection",100],["T_OBJECT_OPERATOR","->",100],["T_STRING","getIfNullSql",100],"(",["T_CONSTANT_ENCAPSED_STRING","'o.base_to_global_rate'",100],",",["T_WHITESPACE"," ",100],["T_LNUMBER","0",100],")",["T_WHITESPACE","\n                    ",100],")",["T_WHITESPACE","\n                ",101],")",",",["T_WHITESPACE","\n                ",102],["T_CONSTANT_ENCAPSED_STRING","'total_profit_amount'",103],["T_WHITESPACE"," ",103],["T_DOUBLE_ARROW","=>",103],["T_WHITESPACE"," ",103],["T_NEW","new",103],["T_WHITESPACE"," ",103],["T_NS_SEPARATOR","\\",103],["T_STRING","Zend_Db_Expr",103],"(",["T_WHITESPACE","\n                    ",103],["T_STRING","sprintf",104],"(",["T_WHITESPACE","\n                        ",104],["T_CONSTANT_ENCAPSED_STRING","'SUM((%s - %s - %s - %s - %s) * %s)'",105],",",["T_WHITESPACE","\n                        ",105],["T_VARIABLE","$connection",106],["T_OBJECT_OPERATOR","->",106],["T_STRING","getIfNullSql",106],"(",["T_CONSTANT_ENCAPSED_STRING","'o.base_total_paid'",106],",",["T_WHITESPACE"," ",106],["T_LNUMBER","0",106],")",",",["T_WHITESPACE","\n                        ",106],["T_VARIABLE","$connection",107],["T_OBJECT_OPERATOR","->",107],["T_STRING","getIfNullSql",107],"(",["T_CONSTANT_ENCAPSED_STRING","'o.base_total_refunded'",107],",",["T_WHITESPACE"," ",107],["T_LNUMBER","0",107],")",",",["T_WHITESPACE","\n                        ",107],["T_VARIABLE","$connection",108],["T_OBJECT_OPERATOR","->",108],["T_STRING","getIfNullSql",108],"(",["T_CONSTANT_ENCAPSED_STRING","'o.base_tax_invoiced'",108],",",["T_WHITESPACE"," ",108],["T_LNUMBER","0",108],")",",",["T_WHITESPACE","\n                        ",108],["T_VARIABLE","$connection",109],["T_OBJECT_OPERATOR","->",109],["T_STRING","getIfNullSql",109],"(",["T_CONSTANT_ENCAPSED_STRING","'o.base_shipping_invoiced'",109],",",["T_WHITESPACE"," ",109],["T_LNUMBER","0",109],")",",",["T_WHITESPACE","\n                        ",109],["T_VARIABLE","$connection",110],["T_OBJECT_OPERATOR","->",110],["T_STRING","getIfNullSql",110],"(",["T_CONSTANT_ENCAPSED_STRING","'o.base_total_invoiced_cost'",110],",",["T_WHITESPACE"," ",110],["T_LNUMBER","0",110],")",",",["T_WHITESPACE","\n                        ",110],["T_VARIABLE","$connection",111],["T_OBJECT_OPERATOR","->",111],["T_STRING","getIfNullSql",111],"(",["T_CONSTANT_ENCAPSED_STRING","'o.base_to_global_rate'",111],",",["T_WHITESPACE"," ",111],["T_LNUMBER","0",111],")",["T_WHITESPACE","\n                    ",111],")",["T_WHITESPACE","\n                ",112],")",",",["T_WHITESPACE","\n                ",113],["T_CONSTANT_ENCAPSED_STRING","'total_invoiced_amount'",114],["T_WHITESPACE"," ",114],["T_DOUBLE_ARROW","=>",114],["T_WHITESPACE"," ",114],["T_NEW","new",114],["T_WHITESPACE"," ",114],["T_NS_SEPARATOR","\\",114],["T_STRING","Zend_Db_Expr",114],"(",["T_WHITESPACE","\n                    ",114],["T_STRING","sprintf",115],"(",["T_WHITESPACE","\n                        ",115],["T_CONSTANT_ENCAPSED_STRING","'SUM(%s * %s)'",116],",",["T_WHITESPACE","\n                        ",116],["T_VARIABLE","$connection",117],["T_OBJECT_OPERATOR","->",117],["T_STRING","getIfNullSql",117],"(",["T_CONSTANT_ENCAPSED_STRING","'o.base_total_invoiced'",117],",",["T_WHITESPACE"," ",117],["T_LNUMBER","0",117],")",",",["T_WHITESPACE","\n                        ",117],["T_VARIABLE","$connection",118],["T_OBJECT_OPERATOR","->",118],["T_STRING","getIfNullSql",118],"(",["T_CONSTANT_ENCAPSED_STRING","'o.base_to_global_rate'",118],",",["T_WHITESPACE"," ",118],["T_LNUMBER","0",118],")",["T_WHITESPACE","\n                    ",118],")",["T_WHITESPACE","\n                ",119],")",",",["T_WHITESPACE","\n                ",120],["T_CONSTANT_ENCAPSED_STRING","'total_canceled_amount'",121],["T_WHITESPACE"," ",121],["T_DOUBLE_ARROW","=>",121],["T_WHITESPACE"," ",121],["T_NEW","new",121],["T_WHITESPACE"," ",121],["T_NS_SEPARATOR","\\",121],["T_STRING","Zend_Db_Expr",121],"(",["T_WHITESPACE","\n                    ",121],["T_STRING","sprintf",122],"(",["T_WHITESPACE","\n                        ",122],["T_CONSTANT_ENCAPSED_STRING","'SUM(%s * %s)'",123],",",["T_WHITESPACE","\n                        ",123],["T_VARIABLE","$connection",124],["T_OBJECT_OPERATOR","->",124],["T_STRING","getIfNullSql",124],"(",["T_CONSTANT_ENCAPSED_STRING","'o.base_total_canceled'",124],",",["T_WHITESPACE"," ",124],["T_LNUMBER","0",124],")",",",["T_WHITESPACE","\n                        ",124],["T_VARIABLE","$connection",125],["T_OBJECT_OPERATOR","->",125],["T_STRING","getIfNullSql",125],"(",["T_CONSTANT_ENCAPSED_STRING","'o.base_to_global_rate'",125],",",["T_WHITESPACE"," ",125],["T_LNUMBER","0",125],")",["T_WHITESPACE","\n                    ",125],")",["T_WHITESPACE","\n                ",126],")",",",["T_WHITESPACE","\n                ",127],["T_CONSTANT_ENCAPSED_STRING","'total_paid_amount'",128],["T_WHITESPACE"," ",128],["T_DOUBLE_ARROW","=>",128],["T_WHITESPACE"," ",128],["T_NEW","new",128],["T_WHITESPACE"," ",128],["T_NS_SEPARATOR","\\",128],["T_STRING","Zend_Db_Expr",128],"(",["T_WHITESPACE","\n                    ",128],["T_STRING","sprintf",129],"(",["T_WHITESPACE","\n                        ",129],["T_CONSTANT_ENCAPSED_STRING","'SUM(%s * %s)'",130],",",["T_WHITESPACE","\n                        ",130],["T_VARIABLE","$connection",131],["T_OBJECT_OPERATOR","->",131],["T_STRING","getIfNullSql",131],"(",["T_CONSTANT_ENCAPSED_STRING","'o.base_total_paid'",131],",",["T_WHITESPACE"," ",131],["T_LNUMBER","0",131],")",",",["T_WHITESPACE","\n                        ",131],["T_VARIABLE","$connection",132],["T_OBJECT_OPERATOR","->",132],["T_STRING","getIfNullSql",132],"(",["T_CONSTANT_ENCAPSED_STRING","'o.base_to_global_rate'",132],",",["T_WHITESPACE"," ",132],["T_LNUMBER","0",132],")",["T_WHITESPACE","\n                    ",132],")",["T_WHITESPACE","\n                ",133],")",",",["T_WHITESPACE","\n                ",134],["T_CONSTANT_ENCAPSED_STRING","'total_refunded_amount'",135],["T_WHITESPACE"," ",135],["T_DOUBLE_ARROW","=>",135],["T_WHITESPACE"," ",135],["T_NEW","new",135],["T_WHITESPACE"," ",135],["T_NS_SEPARATOR","\\",135],["T_STRING","Zend_Db_Expr",135],"(",["T_WHITESPACE","\n                    ",135],["T_STRING","sprintf",136],"(",["T_WHITESPACE","\n                        ",136],["T_CONSTANT_ENCAPSED_STRING","'SUM(%s * %s)'",137],",",["T_WHITESPACE","\n                        ",137],["T_VARIABLE","$connection",138],["T_OBJECT_OPERATOR","->",138],["T_STRING","getIfNullSql",138],"(",["T_CONSTANT_ENCAPSED_STRING","'o.base_total_refunded'",138],",",["T_WHITESPACE"," ",138],["T_LNUMBER","0",138],")",",",["T_WHITESPACE","\n                        ",138],["T_VARIABLE","$connection",139],["T_OBJECT_OPERATOR","->",139],["T_STRING","getIfNullSql",139],"(",["T_CONSTANT_ENCAPSED_STRING","'o.base_to_global_rate'",139],",",["T_WHITESPACE"," ",139],["T_LNUMBER","0",139],")",["T_WHITESPACE","\n                    ",139],")",["T_WHITESPACE","\n                ",140],")",",",["T_WHITESPACE","\n                ",141],["T_CONSTANT_ENCAPSED_STRING","'total_tax_amount'",142],["T_WHITESPACE"," ",142],["T_DOUBLE_ARROW","=>",142],["T_WHITESPACE"," ",142],["T_NEW","new",142],["T_WHITESPACE"," ",142],["T_NS_SEPARATOR","\\",142],["T_STRING","Zend_Db_Expr",142],"(",["T_WHITESPACE","\n                    ",142],["T_STRING","sprintf",143],"(",["T_WHITESPACE","\n                        ",143],["T_CONSTANT_ENCAPSED_STRING","'SUM((%s - %s) * %s)'",144],",",["T_WHITESPACE","\n                        ",144],["T_VARIABLE","$connection",145],["T_OBJECT_OPERATOR","->",145],["T_STRING","getIfNullSql",145],"(",["T_CONSTANT_ENCAPSED_STRING","'o.base_tax_amount'",145],",",["T_WHITESPACE"," ",145],["T_LNUMBER","0",145],")",",",["T_WHITESPACE","\n                        ",145],["T_VARIABLE","$connection",146],["T_OBJECT_OPERATOR","->",146],["T_STRING","getIfNullSql",146],"(",["T_CONSTANT_ENCAPSED_STRING","'o.base_tax_canceled'",146],",",["T_WHITESPACE"," ",146],["T_LNUMBER","0",146],")",",",["T_WHITESPACE","\n                        ",146],["T_VARIABLE","$connection",147],["T_OBJECT_OPERATOR","->",147],["T_STRING","getIfNullSql",147],"(",["T_CONSTANT_ENCAPSED_STRING","'o.base_to_global_rate'",147],",",["T_WHITESPACE"," ",147],["T_LNUMBER","0",147],")",["T_WHITESPACE","\n                    ",147],")",["T_WHITESPACE","\n                ",148],")",",",["T_WHITESPACE","\n                ",149],["T_CONSTANT_ENCAPSED_STRING","'total_tax_amount_actual'",150],["T_WHITESPACE"," ",150],["T_DOUBLE_ARROW","=>",150],["T_WHITESPACE"," ",150],["T_NEW","new",150],["T_WHITESPACE"," ",150],["T_NS_SEPARATOR","\\",150],["T_STRING","Zend_Db_Expr",150],"(",["T_WHITESPACE","\n                    ",150],["T_STRING","sprintf",151],"(",["T_WHITESPACE","\n                        ",151],["T_CONSTANT_ENCAPSED_STRING","'SUM((%s -%s) * %s)'",152],",",["T_WHITESPACE","\n                        ",152],["T_VARIABLE","$connection",153],["T_OBJECT_OPERATOR","->",153],["T_STRING","getIfNullSql",153],"(",["T_CONSTANT_ENCAPSED_STRING","'o.base_tax_invoiced'",153],",",["T_WHITESPACE"," ",153],["T_LNUMBER","0",153],")",",",["T_WHITESPACE","\n                        ",153],["T_VARIABLE","$connection",154],["T_OBJECT_OPERATOR","->",154],["T_STRING","getIfNullSql",154],"(",["T_CONSTANT_ENCAPSED_STRING","'o.base_tax_refunded'",154],",",["T_WHITESPACE"," ",154],["T_LNUMBER","0",154],")",",",["T_WHITESPACE","\n                        ",154],["T_VARIABLE","$connection",155],["T_OBJECT_OPERATOR","->",155],["T_STRING","getIfNullSql",155],"(",["T_CONSTANT_ENCAPSED_STRING","'o.base_to_global_rate'",155],",",["T_WHITESPACE"," ",155],["T_LNUMBER","0",155],")",["T_WHITESPACE","\n                    ",155],")",["T_WHITESPACE","\n                ",156],")",",",["T_WHITESPACE","\n                ",157],["T_CONSTANT_ENCAPSED_STRING","'total_shipping_amount'",158],["T_WHITESPACE"," ",158],["T_DOUBLE_ARROW","=>",158],["T_WHITESPACE"," ",158],["T_NEW","new",158],["T_WHITESPACE"," ",158],["T_NS_SEPARATOR","\\",158],["T_STRING","Zend_Db_Expr",158],"(",["T_WHITESPACE","\n                    ",158],["T_STRING","sprintf",159],"(",["T_WHITESPACE","\n                        ",159],["T_CONSTANT_ENCAPSED_STRING","'SUM((%s - %s) * %s)'",160],",",["T_WHITESPACE","\n                        ",160],["T_VARIABLE","$connection",161],["T_OBJECT_OPERATOR","->",161],["T_STRING","getIfNullSql",161],"(",["T_CONSTANT_ENCAPSED_STRING","'o.base_shipping_amount'",161],",",["T_WHITESPACE"," ",161],["T_LNUMBER","0",161],")",",",["T_WHITESPACE","\n                        ",161],["T_VARIABLE","$connection",162],["T_OBJECT_OPERATOR","->",162],["T_STRING","getIfNullSql",162],"(",["T_CONSTANT_ENCAPSED_STRING","'o.base_shipping_canceled'",162],",",["T_WHITESPACE"," ",162],["T_LNUMBER","0",162],")",",",["T_WHITESPACE","\n                        ",162],["T_VARIABLE","$connection",163],["T_OBJECT_OPERATOR","->",163],["T_STRING","getIfNullSql",163],"(",["T_CONSTANT_ENCAPSED_STRING","'o.base_to_global_rate'",163],",",["T_WHITESPACE"," ",163],["T_LNUMBER","0",163],")",["T_WHITESPACE","\n                    ",163],")",["T_WHITESPACE","\n                ",164],")",",",["T_WHITESPACE","\n                ",165],["T_CONSTANT_ENCAPSED_STRING","'total_shipping_amount_actual'",166],["T_WHITESPACE"," ",166],["T_DOUBLE_ARROW","=>",166],["T_WHITESPACE"," ",166],["T_NEW","new",166],["T_WHITESPACE"," ",166],["T_NS_SEPARATOR","\\",166],["T_STRING","Zend_Db_Expr",166],"(",["T_WHITESPACE","\n                    ",166],["T_STRING","sprintf",167],"(",["T_WHITESPACE","\n                        ",167],["T_CONSTANT_ENCAPSED_STRING","'SUM((%s - %s) * %s)'",168],",",["T_WHITESPACE","\n                        ",168],["T_VARIABLE","$connection",169],["T_OBJECT_OPERATOR","->",169],["T_STRING","getIfNullSql",169],"(",["T_CONSTANT_ENCAPSED_STRING","'o.base_shipping_invoiced'",169],",",["T_WHITESPACE"," ",169],["T_LNUMBER","0",169],")",",",["T_WHITESPACE","\n                        ",169],["T_VARIABLE","$connection",170],["T_OBJECT_OPERATOR","->",170],["T_STRING","getIfNullSql",170],"(",["T_CONSTANT_ENCAPSED_STRING","'o.base_shipping_refunded'",170],",",["T_WHITESPACE"," ",170],["T_LNUMBER","0",170],")",",",["T_WHITESPACE","\n                        ",170],["T_VARIABLE","$connection",171],["T_OBJECT_OPERATOR","->",171],["T_STRING","getIfNullSql",171],"(",["T_CONSTANT_ENCAPSED_STRING","'o.base_to_global_rate'",171],",",["T_WHITESPACE"," ",171],["T_LNUMBER","0",171],")",["T_WHITESPACE","\n                    ",171],")",["T_WHITESPACE","\n                ",172],")",",",["T_WHITESPACE","\n                ",173],["T_CONSTANT_ENCAPSED_STRING","'total_discount_amount'",174],["T_WHITESPACE"," ",174],["T_DOUBLE_ARROW","=>",174],["T_WHITESPACE"," ",174],["T_NEW","new",174],["T_WHITESPACE"," ",174],["T_NS_SEPARATOR","\\",174],["T_STRING","Zend_Db_Expr",174],"(",["T_WHITESPACE","\n                    ",174],["T_STRING","sprintf",175],"(",["T_WHITESPACE","\n                        ",175],["T_CONSTANT_ENCAPSED_STRING","'SUM((ABS(%s) - %s) * %s)'",176],",",["T_WHITESPACE","\n                        ",176],["T_VARIABLE","$connection",177],["T_OBJECT_OPERATOR","->",177],["T_STRING","getIfNullSql",177],"(",["T_CONSTANT_ENCAPSED_STRING","'o.base_discount_amount'",177],",",["T_WHITESPACE"," ",177],["T_LNUMBER","0",177],")",",",["T_WHITESPACE","\n                        ",177],["T_VARIABLE","$connection",178],["T_OBJECT_OPERATOR","->",178],["T_STRING","getIfNullSql",178],"(",["T_CONSTANT_ENCAPSED_STRING","'o.base_discount_canceled'",178],",",["T_WHITESPACE"," ",178],["T_LNUMBER","0",178],")",",",["T_WHITESPACE","\n                        ",178],["T_VARIABLE","$connection",179],["T_OBJECT_OPERATOR","->",179],["T_STRING","getIfNullSql",179],"(",["T_CONSTANT_ENCAPSED_STRING","'o.base_to_global_rate'",179],",",["T_WHITESPACE"," ",179],["T_LNUMBER","0",179],")",["T_WHITESPACE","\n                    ",179],")",["T_WHITESPACE","\n                ",180],")",",",["T_WHITESPACE","\n                ",181],["T_CONSTANT_ENCAPSED_STRING","'total_discount_amount_actual'",182],["T_WHITESPACE"," ",182],["T_DOUBLE_ARROW","=>",182],["T_WHITESPACE"," ",182],["T_NEW","new",182],["T_WHITESPACE"," ",182],["T_NS_SEPARATOR","\\",182],["T_STRING","Zend_Db_Expr",182],"(",["T_WHITESPACE","\n                    ",182],["T_STRING","sprintf",183],"(",["T_WHITESPACE","\n                        ",183],["T_CONSTANT_ENCAPSED_STRING","'SUM((%s - %s) * %s)'",184],",",["T_WHITESPACE","\n                        ",184],["T_VARIABLE","$connection",185],["T_OBJECT_OPERATOR","->",185],["T_STRING","getIfNullSql",185],"(",["T_CONSTANT_ENCAPSED_STRING","'o.base_discount_invoiced'",185],",",["T_WHITESPACE"," ",185],["T_LNUMBER","0",185],")",",",["T_WHITESPACE","\n                        ",185],["T_VARIABLE","$connection",186],["T_OBJECT_OPERATOR","->",186],["T_STRING","getIfNullSql",186],"(",["T_CONSTANT_ENCAPSED_STRING","'o.base_discount_refunded'",186],",",["T_WHITESPACE"," ",186],["T_LNUMBER","0",186],")",",",["T_WHITESPACE","\n                        ",186],["T_VARIABLE","$connection",187],["T_OBJECT_OPERATOR","->",187],["T_STRING","getIfNullSql",187],"(",["T_CONSTANT_ENCAPSED_STRING","'o.base_to_global_rate'",187],",",["T_WHITESPACE"," ",187],["T_LNUMBER","0",187],")",["T_WHITESPACE","\n                    ",187],")",["T_WHITESPACE","\n                ",188],")",",",["T_WHITESPACE","\n            ",189],"]",";",["T_WHITESPACE","\n\n            ",190],["T_VARIABLE","$select",192],["T_WHITESPACE"," ",192],"=",["T_WHITESPACE"," ",192],["T_VARIABLE","$connection",192],["T_OBJECT_OPERATOR","->",192],["T_STRING","select",192],"(",")",";",["T_WHITESPACE","\n            ",192],["T_VARIABLE","$selectOrderItem",193],["T_WHITESPACE"," ",193],"=",["T_WHITESPACE"," ",193],["T_VARIABLE","$connection",193],["T_OBJECT_OPERATOR","->",193],["T_STRING","select",193],"(",")",";",["T_WHITESPACE","\n\n            ",193],["T_VARIABLE","$qtyCanceledExpr",195],["T_WHITESPACE"," ",195],"=",["T_WHITESPACE"," ",195],["T_VARIABLE","$connection",195],["T_OBJECT_OPERATOR","->",195],["T_STRING","getIfNullSql",195],"(",["T_CONSTANT_ENCAPSED_STRING","'qty_canceled'",195],",",["T_WHITESPACE"," ",195],["T_LNUMBER","0",195],")",";",["T_WHITESPACE","\n            ",195],["T_VARIABLE","$cols",196],["T_WHITESPACE"," ",196],"=",["T_WHITESPACE"," ",196],"[",["T_WHITESPACE","\n                ",196],["T_CONSTANT_ENCAPSED_STRING","'order_id'",197],["T_WHITESPACE"," ",197],["T_DOUBLE_ARROW","=>",197],["T_WHITESPACE"," ",197],["T_CONSTANT_ENCAPSED_STRING","'order_id'",197],",",["T_WHITESPACE","\n                ",197],["T_CONSTANT_ENCAPSED_STRING","'total_qty_ordered'",198],["T_WHITESPACE"," ",198],["T_DOUBLE_ARROW","=>",198],["T_WHITESPACE"," ",198],["T_NEW","new",198],["T_WHITESPACE"," ",198],["T_NS_SEPARATOR","\\",198],["T_STRING","Zend_Db_Expr",198],"(","\"",["T_ENCAPSED_AND_WHITESPACE","SUM(qty_ordered - ",198],["T_CURLY_OPEN","{",198],["T_VARIABLE","$qtyCanceledExpr",198],"}",["T_ENCAPSED_AND_WHITESPACE",")",198],"\"",")",",",["T_WHITESPACE","\n                ",198],["T_CONSTANT_ENCAPSED_STRING","'total_qty_invoiced'",199],["T_WHITESPACE"," ",199],["T_DOUBLE_ARROW","=>",199],["T_WHITESPACE"," ",199],["T_NEW","new",199],["T_WHITESPACE"," ",199],["T_NS_SEPARATOR","\\",199],["T_STRING","Zend_Db_Expr",199],"(",["T_CONSTANT_ENCAPSED_STRING","'SUM(qty_invoiced)'",199],")",",",["T_WHITESPACE","\n            ",199],"]",";",["T_WHITESPACE","\n            ",200],["T_VARIABLE","$selectOrderItem",201],["T_OBJECT_OPERATOR","->",201],["T_STRING","from",201],"(",["T_WHITESPACE","\n                ",201],["T_VARIABLE","$this",202],["T_OBJECT_OPERATOR","->",202],["T_STRING","getTable",202],"(",["T_CONSTANT_ENCAPSED_STRING","'sales_order_item'",202],")",",",["T_WHITESPACE","\n                ",202],["T_VARIABLE","$cols",203],["T_WHITESPACE","\n            ",203],")",["T_OBJECT_OPERATOR","->",204],["T_STRING","where",204],"(",["T_WHITESPACE","\n                ",204],["T_CONSTANT_ENCAPSED_STRING","'parent_item_id IS NULL'",205],["T_WHITESPACE","\n            ",205],")",["T_OBJECT_OPERATOR","->",206],["T_STRING","group",206],"(",["T_WHITESPACE","\n                ",206],["T_CONSTANT_ENCAPSED_STRING","'order_id'",207],["T_WHITESPACE","\n            ",207],")",";",["T_WHITESPACE","\n\n            ",208],["T_VARIABLE","$select",210],["T_OBJECT_OPERATOR","->",210],["T_STRING","from",210],"(",["T_WHITESPACE","\n                ",210],"[",["T_CONSTANT_ENCAPSED_STRING","'o'",211],["T_WHITESPACE"," ",211],["T_DOUBLE_ARROW","=>",211],["T_WHITESPACE"," ",211],["T_VARIABLE","$this",211],["T_OBJECT_OPERATOR","->",211],["T_STRING","getTable",211],"(",["T_CONSTANT_ENCAPSED_STRING","'sales_order'",211],")","]",",",["T_WHITESPACE","\n                ",211],["T_VARIABLE","$columns",212],["T_WHITESPACE","\n            ",212],")",["T_OBJECT_OPERATOR","->",213],["T_STRING","join",213],"(",["T_WHITESPACE","\n                ",213],"[",["T_CONSTANT_ENCAPSED_STRING","'oi'",214],["T_WHITESPACE"," ",214],["T_DOUBLE_ARROW","=>",214],["T_WHITESPACE"," ",214],["T_VARIABLE","$selectOrderItem",214],"]",",",["T_WHITESPACE","\n                ",214],["T_CONSTANT_ENCAPSED_STRING","'oi.order_id = o.entity_id'",215],",",["T_WHITESPACE","\n                ",215],"[","]",["T_WHITESPACE","\n            ",216],")",["T_OBJECT_OPERATOR","->",217],["T_STRING","where",217],"(",["T_WHITESPACE","\n                ",217],["T_CONSTANT_ENCAPSED_STRING","'o.state NOT IN (?)'",218],",",["T_WHITESPACE","\n                ",218],"[",["T_NS_SEPARATOR","\\",219],["T_STRING","Magento",219],["T_NS_SEPARATOR","\\",219],["T_STRING","Sales",219],["T_NS_SEPARATOR","\\",219],["T_STRING","Model",219],["T_NS_SEPARATOR","\\",219],["T_STRING","Order",219],["T_DOUBLE_COLON","::",219],["T_STRING","STATE_PENDING_PAYMENT",219],",",["T_WHITESPACE"," ",219],["T_NS_SEPARATOR","\\",219],["T_STRING","Magento",219],["T_NS_SEPARATOR","\\",219],["T_STRING","Sales",219],["T_NS_SEPARATOR","\\",219],["T_STRING","Model",219],["T_NS_SEPARATOR","\\",219],["T_STRING","Order",219],["T_DOUBLE_COLON","::",219],["T_STRING","STATE_NEW",219],"]",["T_WHITESPACE","\n            ",219],")",";",["T_WHITESPACE","\n\n            ",220],["T_IF","if",222],["T_WHITESPACE"," ",222],"(",["T_VARIABLE","$subSelect",222],["T_WHITESPACE"," ",222],["T_IS_NOT_IDENTICAL","!==",222],["T_WHITESPACE"," ",222],["T_STRING","null",222],")",["T_WHITESPACE"," ",222],"{",["T_WHITESPACE","\n                ",222],["T_VARIABLE","$select",223],["T_OBJECT_OPERATOR","->",223],["T_STRING","having",223],"(",["T_VARIABLE","$this",223],["T_OBJECT_OPERATOR","->",223],["T_STRING","_makeConditionFromDateRangeSelect",223],"(",["T_VARIABLE","$subSelect",223],",",["T_WHITESPACE"," ",223],["T_CONSTANT_ENCAPSED_STRING","'period'",223],")",")",";",["T_WHITESPACE","\n            ",223],"}",["T_WHITESPACE","\n\n            ",224],["T_VARIABLE","$select",226],["T_OBJECT_OPERATOR","->",226],["T_STRING","group",226],"(","[",["T_VARIABLE","$periodExpr",226],",",["T_WHITESPACE"," ",226],["T_CONSTANT_ENCAPSED_STRING","'o.store_id'",226],",",["T_WHITESPACE"," ",226],["T_CONSTANT_ENCAPSED_STRING","'o.status'",226],"]",")",";",["T_WHITESPACE","\n\n            ",226],["T_VARIABLE","$connection",228],["T_OBJECT_OPERATOR","->",228],["T_STRING","query",228],"(",["T_VARIABLE","$select",228],["T_OBJECT_OPERATOR","->",228],["T_STRING","insertFromSelect",228],"(",["T_VARIABLE","$this",228],["T_OBJECT_OPERATOR","->",228],["T_STRING","getMainTable",228],"(",")",",",["T_WHITESPACE"," ",228],["T_STRING","array_keys",228],"(",["T_VARIABLE","$columns",228],")",")",")",";",["T_WHITESPACE","\n\n            ",228],["T_COMMENT","\/\/ setup all columns to select SUM() except period, store_id and order_status\n",230],["T_WHITESPACE","            ",231],["T_FOREACH","foreach",231],["T_WHITESPACE"," ",231],"(",["T_VARIABLE","$columns",231],["T_WHITESPACE"," ",231],["T_AS","as",231],["T_WHITESPACE"," ",231],["T_VARIABLE","$k",231],["T_WHITESPACE"," ",231],["T_DOUBLE_ARROW","=>",231],["T_WHITESPACE"," ",231],["T_VARIABLE","$v",231],")",["T_WHITESPACE"," ",231],"{",["T_WHITESPACE","\n                ",231],["T_VARIABLE","$columns",232],"[",["T_VARIABLE","$k",232],"]",["T_WHITESPACE"," ",232],"=",["T_WHITESPACE"," ",232],["T_NEW","new",232],["T_WHITESPACE"," ",232],["T_NS_SEPARATOR","\\",232],["T_STRING","Zend_Db_Expr",232],"(",["T_CONSTANT_ENCAPSED_STRING","'SUM('",232],["T_WHITESPACE"," ",232],".",["T_WHITESPACE"," ",232],["T_VARIABLE","$k",232],["T_WHITESPACE"," ",232],".",["T_WHITESPACE"," ",232],["T_CONSTANT_ENCAPSED_STRING","')'",232],")",";",["T_WHITESPACE","\n            ",232],"}",["T_WHITESPACE","\n            ",233],["T_VARIABLE","$columns",234],"[",["T_CONSTANT_ENCAPSED_STRING","'period'",234],"]",["T_WHITESPACE"," ",234],"=",["T_WHITESPACE"," ",234],["T_CONSTANT_ENCAPSED_STRING","'period'",234],";",["T_WHITESPACE","\n            ",234],["T_VARIABLE","$columns",235],"[",["T_CONSTANT_ENCAPSED_STRING","'store_id'",235],"]",["T_WHITESPACE"," ",235],"=",["T_WHITESPACE"," ",235],["T_NEW","new",235],["T_WHITESPACE"," ",235],["T_NS_SEPARATOR","\\",235],["T_STRING","Zend_Db_Expr",235],"(",["T_NS_SEPARATOR","\\",235],["T_STRING","Magento",235],["T_NS_SEPARATOR","\\",235],["T_STRING","Store",235],["T_NS_SEPARATOR","\\",235],["T_STRING","Model",235],["T_NS_SEPARATOR","\\",235],["T_STRING","Store",235],["T_DOUBLE_COLON","::",235],["T_STRING","DEFAULT_STORE_ID",235],")",";",["T_WHITESPACE","\n            ",235],["T_VARIABLE","$columns",236],"[",["T_CONSTANT_ENCAPSED_STRING","'order_status'",236],"]",["T_WHITESPACE"," ",236],"=",["T_WHITESPACE"," ",236],["T_CONSTANT_ENCAPSED_STRING","'order_status'",236],";",["T_WHITESPACE","\n\n            ",236],["T_VARIABLE","$select",238],["T_OBJECT_OPERATOR","->",238],["T_STRING","reset",238],"(",")",";",["T_WHITESPACE","\n            ",238],["T_VARIABLE","$select",239],["T_OBJECT_OPERATOR","->",239],["T_STRING","from",239],"(",["T_VARIABLE","$this",239],["T_OBJECT_OPERATOR","->",239],["T_STRING","getMainTable",239],"(",")",",",["T_WHITESPACE"," ",239],["T_VARIABLE","$columns",239],")",["T_OBJECT_OPERATOR","->",239],["T_STRING","where",239],"(",["T_CONSTANT_ENCAPSED_STRING","'store_id <> 0'",239],")",";",["T_WHITESPACE","\n\n            ",239],["T_IF","if",241],["T_WHITESPACE"," ",241],"(",["T_VARIABLE","$subSelect",241],["T_WHITESPACE"," ",241],["T_IS_NOT_IDENTICAL","!==",241],["T_WHITESPACE"," ",241],["T_STRING","null",241],")",["T_WHITESPACE"," ",241],"{",["T_WHITESPACE","\n                ",241],["T_VARIABLE","$select",242],["T_OBJECT_OPERATOR","->",242],["T_STRING","where",242],"(",["T_VARIABLE","$this",242],["T_OBJECT_OPERATOR","->",242],["T_STRING","_makeConditionFromDateRangeSelect",242],"(",["T_VARIABLE","$subSelect",242],",",["T_WHITESPACE"," ",242],["T_CONSTANT_ENCAPSED_STRING","'period'",242],")",")",";",["T_WHITESPACE","\n            ",242],"}",["T_WHITESPACE","\n\n            ",243],["T_VARIABLE","$select",245],["T_OBJECT_OPERATOR","->",245],["T_STRING","group",245],"(","[",["T_CONSTANT_ENCAPSED_STRING","'period'",245],",",["T_WHITESPACE"," ",245],["T_CONSTANT_ENCAPSED_STRING","'order_status'",245],"]",")",";",["T_WHITESPACE","\n            ",245],["T_VARIABLE","$connection",246],["T_OBJECT_OPERATOR","->",246],["T_STRING","query",246],"(",["T_VARIABLE","$select",246],["T_OBJECT_OPERATOR","->",246],["T_STRING","insertFromSelect",246],"(",["T_VARIABLE","$this",246],["T_OBJECT_OPERATOR","->",246],["T_STRING","getMainTable",246],"(",")",",",["T_WHITESPACE"," ",246],["T_STRING","array_keys",246],"(",["T_VARIABLE","$columns",246],")",")",")",";",["T_WHITESPACE","\n            ",246],["T_VARIABLE","$connection",247],["T_OBJECT_OPERATOR","->",247],["T_STRING","commit",247],"(",")",";",["T_WHITESPACE","\n        ",247],"}",["T_WHITESPACE"," ",248],["T_CATCH","catch",248],["T_WHITESPACE"," ",248],"(",["T_NS_SEPARATOR","\\",248],["T_STRING","Exception",248],["T_WHITESPACE"," ",248],["T_VARIABLE","$e",248],")",["T_WHITESPACE"," ",248],"{",["T_WHITESPACE","\n            ",248],["T_VARIABLE","$connection",249],["T_OBJECT_OPERATOR","->",249],["T_STRING","rollBack",249],"(",")",";",["T_WHITESPACE","\n            ",249],["T_THROW","throw",250],["T_WHITESPACE"," ",250],["T_VARIABLE","$e",250],";",["T_WHITESPACE","\n        ",250],"}",["T_WHITESPACE","\n\n        ",251],["T_RETURN","return",253],["T_WHITESPACE"," ",253],["T_VARIABLE","$this",253],";",["T_WHITESPACE","\n    ",253],"}",["T_WHITESPACE","\n",254],"}",["T_WHITESPACE","\n",255]]
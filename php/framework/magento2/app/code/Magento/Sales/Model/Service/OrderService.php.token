[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Copyright \u00c2\u00a9 2013-2017 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n *\/",2],["T_WHITESPACE","\n",5],["T_NAMESPACE","namespace",6],["T_WHITESPACE"," ",6],["T_STRING","Magento",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Sales",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Model",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Service",6],";",["T_WHITESPACE","\n\n",6],["T_USE","use",8],["T_WHITESPACE"," ",8],["T_STRING","Magento",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Sales",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Api",8],["T_NS_SEPARATOR","\\",8],["T_STRING","OrderManagementInterface",8],";",["T_WHITESPACE","\n\n",8],["T_DOC_COMMENT","\/**\n * Class OrderService\n *\n * @SuppressWarnings(PHPMD.CouplingBetweenObjects)\n *\/",10],["T_WHITESPACE","\n",14],["T_CLASS","class",15],["T_WHITESPACE"," ",15],["T_STRING","OrderService",15],["T_WHITESPACE"," ",15],["T_IMPLEMENTS","implements",15],["T_WHITESPACE"," ",15],["T_STRING","OrderManagementInterface",15],["T_WHITESPACE","\n",15],"{",["T_WHITESPACE","\n    ",16],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Sales\\Api\\OrderRepositoryInterface\n     *\/",17],["T_WHITESPACE","\n    ",19],["T_PROTECTED","protected",20],["T_WHITESPACE"," ",20],["T_VARIABLE","$orderRepository",20],";",["T_WHITESPACE","\n\n    ",20],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Sales\\Api\\OrderStatusHistoryRepositoryInterface\n     *\/",22],["T_WHITESPACE","\n    ",24],["T_PROTECTED","protected",25],["T_WHITESPACE"," ",25],["T_VARIABLE","$historyRepository",25],";",["T_WHITESPACE","\n\n    ",25],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Framework\\Api\\SearchCriteriaBuilder\n     *\/",27],["T_WHITESPACE","\n    ",29],["T_PROTECTED","protected",30],["T_WHITESPACE"," ",30],["T_VARIABLE","$criteriaBuilder",30],";",["T_WHITESPACE","\n\n    ",30],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Framework\\Api\\FilterBuilder\n     *\/",32],["T_WHITESPACE","\n    ",34],["T_PROTECTED","protected",35],["T_WHITESPACE"," ",35],["T_VARIABLE","$filterBuilder",35],";",["T_WHITESPACE","\n\n    ",35],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Sales\\Model\\OrderNotifier\n     *\/",37],["T_WHITESPACE","\n    ",39],["T_PROTECTED","protected",40],["T_WHITESPACE"," ",40],["T_VARIABLE","$notifier",40],";",["T_WHITESPACE","\n\n    ",40],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Framework\\Event\\ManagerInterface\n     *\/",42],["T_WHITESPACE","\n    ",44],["T_PROTECTED","protected",45],["T_WHITESPACE"," ",45],["T_VARIABLE","$eventManager",45],";",["T_WHITESPACE","\n\n    ",45],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Sales\\Model\\Order\\Email\\Sender\\OrderCommentSender\n     *\/",47],["T_WHITESPACE","\n    ",49],["T_PROTECTED","protected",50],["T_WHITESPACE"," ",50],["T_VARIABLE","$orderCommentSender",50],";",["T_WHITESPACE","\n\n    ",50],["T_DOC_COMMENT","\/**\n     * Constructor\n     *\n     * @param \\Magento\\Sales\\Api\\OrderRepositoryInterface $orderRepository\n     * @param \\Magento\\Sales\\Api\\OrderStatusHistoryRepositoryInterface $historyRepository\n     * @param \\Magento\\Framework\\Api\\SearchCriteriaBuilder $criteriaBuilder\n     * @param \\Magento\\Framework\\Api\\FilterBuilder $filterBuilder\n     * @param \\Magento\\Sales\\Model\\OrderNotifier $notifier\n     * @param \\Magento\\Framework\\Event\\ManagerInterface $eventManager\n     * @param \\Magento\\Sales\\Model\\Order\\Email\\Sender\\OrderCommentSender $orderCommentSender\n     *\/",52],["T_WHITESPACE","\n    ",62],["T_PUBLIC","public",63],["T_WHITESPACE"," ",63],["T_FUNCTION","function",63],["T_WHITESPACE"," ",63],["T_STRING","__construct",63],"(",["T_WHITESPACE","\n        ",63],["T_NS_SEPARATOR","\\",64],["T_STRING","Magento",64],["T_NS_SEPARATOR","\\",64],["T_STRING","Sales",64],["T_NS_SEPARATOR","\\",64],["T_STRING","Api",64],["T_NS_SEPARATOR","\\",64],["T_STRING","OrderRepositoryInterface",64],["T_WHITESPACE"," ",64],["T_VARIABLE","$orderRepository",64],",",["T_WHITESPACE","\n        ",64],["T_NS_SEPARATOR","\\",65],["T_STRING","Magento",65],["T_NS_SEPARATOR","\\",65],["T_STRING","Sales",65],["T_NS_SEPARATOR","\\",65],["T_STRING","Api",65],["T_NS_SEPARATOR","\\",65],["T_STRING","OrderStatusHistoryRepositoryInterface",65],["T_WHITESPACE"," ",65],["T_VARIABLE","$historyRepository",65],",",["T_WHITESPACE","\n        ",65],["T_NS_SEPARATOR","\\",66],["T_STRING","Magento",66],["T_NS_SEPARATOR","\\",66],["T_STRING","Framework",66],["T_NS_SEPARATOR","\\",66],["T_STRING","Api",66],["T_NS_SEPARATOR","\\",66],["T_STRING","SearchCriteriaBuilder",66],["T_WHITESPACE"," ",66],["T_VARIABLE","$criteriaBuilder",66],",",["T_WHITESPACE","\n        ",66],["T_NS_SEPARATOR","\\",67],["T_STRING","Magento",67],["T_NS_SEPARATOR","\\",67],["T_STRING","Framework",67],["T_NS_SEPARATOR","\\",67],["T_STRING","Api",67],["T_NS_SEPARATOR","\\",67],["T_STRING","FilterBuilder",67],["T_WHITESPACE"," ",67],["T_VARIABLE","$filterBuilder",67],",",["T_WHITESPACE","\n        ",67],["T_NS_SEPARATOR","\\",68],["T_STRING","Magento",68],["T_NS_SEPARATOR","\\",68],["T_STRING","Sales",68],["T_NS_SEPARATOR","\\",68],["T_STRING","Model",68],["T_NS_SEPARATOR","\\",68],["T_STRING","OrderNotifier",68],["T_WHITESPACE"," ",68],["T_VARIABLE","$notifier",68],",",["T_WHITESPACE","\n        ",68],["T_NS_SEPARATOR","\\",69],["T_STRING","Magento",69],["T_NS_SEPARATOR","\\",69],["T_STRING","Framework",69],["T_NS_SEPARATOR","\\",69],["T_STRING","Event",69],["T_NS_SEPARATOR","\\",69],["T_STRING","ManagerInterface",69],["T_WHITESPACE"," ",69],["T_VARIABLE","$eventManager",69],",",["T_WHITESPACE","\n        ",69],["T_NS_SEPARATOR","\\",70],["T_STRING","Magento",70],["T_NS_SEPARATOR","\\",70],["T_STRING","Sales",70],["T_NS_SEPARATOR","\\",70],["T_STRING","Model",70],["T_NS_SEPARATOR","\\",70],["T_STRING","Order",70],["T_NS_SEPARATOR","\\",70],["T_STRING","Email",70],["T_NS_SEPARATOR","\\",70],["T_STRING","Sender",70],["T_NS_SEPARATOR","\\",70],["T_STRING","OrderCommentSender",70],["T_WHITESPACE"," ",70],["T_VARIABLE","$orderCommentSender",70],["T_WHITESPACE","\n    ",70],")",["T_WHITESPACE"," ",71],"{",["T_WHITESPACE","\n        ",71],["T_VARIABLE","$this",72],["T_OBJECT_OPERATOR","->",72],["T_STRING","orderRepository",72],["T_WHITESPACE"," ",72],"=",["T_WHITESPACE"," ",72],["T_VARIABLE","$orderRepository",72],";",["T_WHITESPACE","\n        ",72],["T_VARIABLE","$this",73],["T_OBJECT_OPERATOR","->",73],["T_STRING","historyRepository",73],["T_WHITESPACE"," ",73],"=",["T_WHITESPACE"," ",73],["T_VARIABLE","$historyRepository",73],";",["T_WHITESPACE","\n        ",73],["T_VARIABLE","$this",74],["T_OBJECT_OPERATOR","->",74],["T_STRING","criteriaBuilder",74],["T_WHITESPACE"," ",74],"=",["T_WHITESPACE"," ",74],["T_VARIABLE","$criteriaBuilder",74],";",["T_WHITESPACE","\n        ",74],["T_VARIABLE","$this",75],["T_OBJECT_OPERATOR","->",75],["T_STRING","filterBuilder",75],["T_WHITESPACE"," ",75],"=",["T_WHITESPACE"," ",75],["T_VARIABLE","$filterBuilder",75],";",["T_WHITESPACE","\n        ",75],["T_VARIABLE","$this",76],["T_OBJECT_OPERATOR","->",76],["T_STRING","notifier",76],["T_WHITESPACE"," ",76],"=",["T_WHITESPACE"," ",76],["T_VARIABLE","$notifier",76],";",["T_WHITESPACE","\n        ",76],["T_VARIABLE","$this",77],["T_OBJECT_OPERATOR","->",77],["T_STRING","eventManager",77],["T_WHITESPACE"," ",77],"=",["T_WHITESPACE"," ",77],["T_VARIABLE","$eventManager",77],";",["T_WHITESPACE","\n        ",77],["T_VARIABLE","$this",78],["T_OBJECT_OPERATOR","->",78],["T_STRING","orderCommentSender",78],["T_WHITESPACE"," ",78],"=",["T_WHITESPACE"," ",78],["T_VARIABLE","$orderCommentSender",78],";",["T_WHITESPACE","\n    ",78],"}",["T_WHITESPACE","\n\n    ",79],["T_DOC_COMMENT","\/**\n     * Order cancel\n     *\n     * @param int $id\n     * @return bool\n     *\/",81],["T_WHITESPACE","\n    ",86],["T_PUBLIC","public",87],["T_WHITESPACE"," ",87],["T_FUNCTION","function",87],["T_WHITESPACE"," ",87],["T_STRING","cancel",87],"(",["T_VARIABLE","$id",87],")",["T_WHITESPACE","\n    ",87],"{",["T_WHITESPACE","\n        ",88],["T_VARIABLE","$order",89],["T_WHITESPACE"," ",89],"=",["T_WHITESPACE"," ",89],["T_VARIABLE","$this",89],["T_OBJECT_OPERATOR","->",89],["T_STRING","orderRepository",89],["T_OBJECT_OPERATOR","->",89],["T_STRING","get",89],"(",["T_VARIABLE","$id",89],")",";",["T_WHITESPACE","\n        ",89],["T_IF","if",90],["T_WHITESPACE"," ",90],"(",["T_BOOL_CAST","(bool)",90],["T_VARIABLE","$order",90],["T_OBJECT_OPERATOR","->",90],["T_STRING","cancel",90],"(",")",")",["T_WHITESPACE"," ",90],"{",["T_WHITESPACE","\n            ",90],["T_VARIABLE","$this",91],["T_OBJECT_OPERATOR","->",91],["T_STRING","orderRepository",91],["T_OBJECT_OPERATOR","->",91],["T_STRING","save",91],"(",["T_VARIABLE","$order",91],")",";",["T_WHITESPACE","\n            ",91],["T_RETURN","return",92],["T_WHITESPACE"," ",92],["T_STRING","true",92],";",["T_WHITESPACE","\n        ",92],"}",["T_WHITESPACE","\n\n        ",93],["T_RETURN","return",95],["T_WHITESPACE"," ",95],["T_STRING","false",95],";",["T_WHITESPACE","\n    ",95],"}",["T_WHITESPACE","\n\n    ",96],["T_DOC_COMMENT","\/**\n     * Returns list of comments attached to order\n     *\n     * @param int $id\n     * @return \\Magento\\Sales\\Api\\Data\\OrderStatusHistorySearchResultInterface\n     *\/",98],["T_WHITESPACE","\n    ",103],["T_PUBLIC","public",104],["T_WHITESPACE"," ",104],["T_FUNCTION","function",104],["T_WHITESPACE"," ",104],["T_STRING","getCommentsList",104],"(",["T_VARIABLE","$id",104],")",["T_WHITESPACE","\n    ",104],"{",["T_WHITESPACE","\n        ",105],["T_VARIABLE","$this",106],["T_OBJECT_OPERATOR","->",106],["T_STRING","criteriaBuilder",106],["T_OBJECT_OPERATOR","->",106],["T_STRING","addFilters",106],"(",["T_WHITESPACE","\n            ",106],"[",["T_VARIABLE","$this",107],["T_OBJECT_OPERATOR","->",107],["T_STRING","filterBuilder",107],["T_OBJECT_OPERATOR","->",107],["T_STRING","setField",107],"(",["T_CONSTANT_ENCAPSED_STRING","'parent_id'",107],")",["T_OBJECT_OPERATOR","->",107],["T_STRING","setValue",107],"(",["T_VARIABLE","$id",107],")",["T_OBJECT_OPERATOR","->",107],["T_STRING","setConditionType",107],"(",["T_CONSTANT_ENCAPSED_STRING","'eq'",107],")",["T_OBJECT_OPERATOR","->",107],["T_STRING","create",107],"(",")","]",["T_WHITESPACE","\n        ",107],")",";",["T_WHITESPACE","\n        ",108],["T_VARIABLE","$searchCriteria",109],["T_WHITESPACE"," ",109],"=",["T_WHITESPACE"," ",109],["T_VARIABLE","$this",109],["T_OBJECT_OPERATOR","->",109],["T_STRING","criteriaBuilder",109],["T_OBJECT_OPERATOR","->",109],["T_STRING","create",109],"(",")",";",["T_WHITESPACE","\n        ",109],["T_RETURN","return",110],["T_WHITESPACE"," ",110],["T_VARIABLE","$this",110],["T_OBJECT_OPERATOR","->",110],["T_STRING","historyRepository",110],["T_OBJECT_OPERATOR","->",110],["T_STRING","getList",110],"(",["T_VARIABLE","$searchCriteria",110],")",";",["T_WHITESPACE","\n    ",110],"}",["T_WHITESPACE","\n\n    ",111],["T_DOC_COMMENT","\/**\n     * Add comment to order\n     *\n     * @param int $id\n     * @param \\Magento\\Sales\\Api\\Data\\OrderStatusHistoryInterface $statusHistory\n     * @return bool\n     *\/",113],["T_WHITESPACE","\n    ",119],["T_PUBLIC","public",120],["T_WHITESPACE"," ",120],["T_FUNCTION","function",120],["T_WHITESPACE"," ",120],["T_STRING","addComment",120],"(",["T_VARIABLE","$id",120],",",["T_WHITESPACE"," ",120],["T_NS_SEPARATOR","\\",120],["T_STRING","Magento",120],["T_NS_SEPARATOR","\\",120],["T_STRING","Sales",120],["T_NS_SEPARATOR","\\",120],["T_STRING","Api",120],["T_NS_SEPARATOR","\\",120],["T_STRING","Data",120],["T_NS_SEPARATOR","\\",120],["T_STRING","OrderStatusHistoryInterface",120],["T_WHITESPACE"," ",120],["T_VARIABLE","$statusHistory",120],")",["T_WHITESPACE","\n    ",120],"{",["T_WHITESPACE","\n        ",121],["T_VARIABLE","$order",122],["T_WHITESPACE"," ",122],"=",["T_WHITESPACE"," ",122],["T_VARIABLE","$this",122],["T_OBJECT_OPERATOR","->",122],["T_STRING","orderRepository",122],["T_OBJECT_OPERATOR","->",122],["T_STRING","get",122],"(",["T_VARIABLE","$id",122],")",";",["T_WHITESPACE","\n        ",122],["T_VARIABLE","$order",123],["T_OBJECT_OPERATOR","->",123],["T_STRING","addStatusHistory",123],"(",["T_VARIABLE","$statusHistory",123],")",";",["T_WHITESPACE","\n        ",123],["T_VARIABLE","$this",124],["T_OBJECT_OPERATOR","->",124],["T_STRING","orderRepository",124],["T_OBJECT_OPERATOR","->",124],["T_STRING","save",124],"(",["T_VARIABLE","$order",124],")",";",["T_WHITESPACE","\n        ",124],["T_VARIABLE","$notify",125],["T_WHITESPACE"," ",125],"=",["T_WHITESPACE"," ",125],["T_ISSET","isset",125],"(",["T_VARIABLE","$statusHistory",125],"[",["T_CONSTANT_ENCAPSED_STRING","'is_customer_notified'",125],"]",")",["T_WHITESPACE"," ",125],"?",["T_WHITESPACE"," ",125],["T_VARIABLE","$statusHistory",125],"[",["T_CONSTANT_ENCAPSED_STRING","'is_customer_notified'",125],"]",["T_WHITESPACE"," ",125],":",["T_WHITESPACE"," ",125],["T_STRING","false",125],";",["T_WHITESPACE","\n        ",125],["T_VARIABLE","$comment",126],["T_WHITESPACE"," ",126],"=",["T_WHITESPACE"," ",126],["T_STRING","trim",126],"(",["T_STRING","strip_tags",126],"(",["T_VARIABLE","$statusHistory",126],["T_OBJECT_OPERATOR","->",126],["T_STRING","getComment",126],"(",")",")",")",";",["T_WHITESPACE","\n        ",126],["T_VARIABLE","$this",127],["T_OBJECT_OPERATOR","->",127],["T_STRING","orderCommentSender",127],["T_OBJECT_OPERATOR","->",127],["T_STRING","send",127],"(",["T_VARIABLE","$order",127],",",["T_WHITESPACE"," ",127],["T_VARIABLE","$notify",127],",",["T_WHITESPACE"," ",127],["T_VARIABLE","$comment",127],")",";",["T_WHITESPACE","\n        ",127],["T_RETURN","return",128],["T_WHITESPACE"," ",128],["T_STRING","true",128],";",["T_WHITESPACE","\n    ",128],"}",["T_WHITESPACE","\n\n    ",129],["T_DOC_COMMENT","\/**\n     * Notify user\n     *\n     * @param int $id\n     * @return bool\n     *\/",131],["T_WHITESPACE","\n    ",136],["T_PUBLIC","public",137],["T_WHITESPACE"," ",137],["T_FUNCTION","function",137],["T_WHITESPACE"," ",137],["T_STRING","notify",137],"(",["T_VARIABLE","$id",137],")",["T_WHITESPACE","\n    ",137],"{",["T_WHITESPACE","\n        ",138],["T_VARIABLE","$order",139],["T_WHITESPACE"," ",139],"=",["T_WHITESPACE"," ",139],["T_VARIABLE","$this",139],["T_OBJECT_OPERATOR","->",139],["T_STRING","orderRepository",139],["T_OBJECT_OPERATOR","->",139],["T_STRING","get",139],"(",["T_VARIABLE","$id",139],")",";",["T_WHITESPACE","\n        ",139],["T_RETURN","return",140],["T_WHITESPACE"," ",140],["T_VARIABLE","$this",140],["T_OBJECT_OPERATOR","->",140],["T_STRING","notifier",140],["T_OBJECT_OPERATOR","->",140],["T_STRING","notify",140],"(",["T_VARIABLE","$order",140],")",";",["T_WHITESPACE","\n    ",140],"}",["T_WHITESPACE","\n\n    ",141],["T_DOC_COMMENT","\/**\n     * Returns order status\n     *\n     * @param int $id\n     * @return string\n     *\/",143],["T_WHITESPACE","\n    ",148],["T_PUBLIC","public",149],["T_WHITESPACE"," ",149],["T_FUNCTION","function",149],["T_WHITESPACE"," ",149],["T_STRING","getStatus",149],"(",["T_VARIABLE","$id",149],")",["T_WHITESPACE","\n    ",149],"{",["T_WHITESPACE","\n        ",150],["T_RETURN","return",151],["T_WHITESPACE"," ",151],["T_VARIABLE","$this",151],["T_OBJECT_OPERATOR","->",151],["T_STRING","orderRepository",151],["T_OBJECT_OPERATOR","->",151],["T_STRING","get",151],"(",["T_VARIABLE","$id",151],")",["T_OBJECT_OPERATOR","->",151],["T_STRING","getStatus",151],"(",")",";",["T_WHITESPACE","\n    ",151],"}",["T_WHITESPACE","\n\n    ",152],["T_DOC_COMMENT","\/**\n     * Order hold\n     *\n     * @param int $id\n     * @return bool\n     *\/",154],["T_WHITESPACE","\n    ",159],["T_PUBLIC","public",160],["T_WHITESPACE"," ",160],["T_FUNCTION","function",160],["T_WHITESPACE"," ",160],["T_STRING","hold",160],"(",["T_VARIABLE","$id",160],")",["T_WHITESPACE","\n    ",160],"{",["T_WHITESPACE","\n        ",161],["T_VARIABLE","$order",162],["T_WHITESPACE"," ",162],"=",["T_WHITESPACE"," ",162],["T_VARIABLE","$this",162],["T_OBJECT_OPERATOR","->",162],["T_STRING","orderRepository",162],["T_OBJECT_OPERATOR","->",162],["T_STRING","get",162],"(",["T_VARIABLE","$id",162],")",";",["T_WHITESPACE","\n        ",162],["T_VARIABLE","$order",163],["T_OBJECT_OPERATOR","->",163],["T_STRING","hold",163],"(",")",";",["T_WHITESPACE","\n        ",163],["T_RETURN","return",164],["T_WHITESPACE"," ",164],["T_BOOL_CAST","(bool)",164],["T_VARIABLE","$this",164],["T_OBJECT_OPERATOR","->",164],["T_STRING","orderRepository",164],["T_OBJECT_OPERATOR","->",164],["T_STRING","save",164],"(",["T_VARIABLE","$order",164],")",";",["T_WHITESPACE","\n    ",164],"}",["T_WHITESPACE","\n\n    ",165],["T_DOC_COMMENT","\/**\n     * Order un hold\n     *\n     * @param int $id\n     * @return bool\n     *\/",167],["T_WHITESPACE","\n    ",172],["T_PUBLIC","public",173],["T_WHITESPACE"," ",173],["T_FUNCTION","function",173],["T_WHITESPACE"," ",173],["T_STRING","unHold",173],"(",["T_VARIABLE","$id",173],")",["T_WHITESPACE","\n    ",173],"{",["T_WHITESPACE","\n        ",174],["T_VARIABLE","$object",175],["T_WHITESPACE"," ",175],"=",["T_WHITESPACE"," ",175],["T_VARIABLE","$this",175],["T_OBJECT_OPERATOR","->",175],["T_STRING","orderRepository",175],["T_OBJECT_OPERATOR","->",175],["T_STRING","get",175],"(",["T_VARIABLE","$id",175],")",";",["T_WHITESPACE","\n        ",175],["T_VARIABLE","$object",176],["T_OBJECT_OPERATOR","->",176],["T_STRING","unhold",176],"(",")",";",["T_WHITESPACE","\n        ",176],["T_RETURN","return",177],["T_WHITESPACE"," ",177],["T_BOOL_CAST","(bool)",177],["T_VARIABLE","$this",177],["T_OBJECT_OPERATOR","->",177],["T_STRING","orderRepository",177],["T_OBJECT_OPERATOR","->",177],["T_STRING","save",177],"(",["T_VARIABLE","$object",177],")",";",["T_WHITESPACE","\n    ",177],"}",["T_WHITESPACE","\n\n    ",178],["T_DOC_COMMENT","\/**\n     * @param \\Magento\\Sales\\Api\\Data\\OrderInterface $order\n     * @return \\Magento\\Sales\\Api\\Data\\OrderInterface\n     * @throws \\Exception\n     *\/",180],["T_WHITESPACE","\n    ",184],["T_PUBLIC","public",185],["T_WHITESPACE"," ",185],["T_FUNCTION","function",185],["T_WHITESPACE"," ",185],["T_STRING","place",185],"(",["T_NS_SEPARATOR","\\",185],["T_STRING","Magento",185],["T_NS_SEPARATOR","\\",185],["T_STRING","Sales",185],["T_NS_SEPARATOR","\\",185],["T_STRING","Api",185],["T_NS_SEPARATOR","\\",185],["T_STRING","Data",185],["T_NS_SEPARATOR","\\",185],["T_STRING","OrderInterface",185],["T_WHITESPACE"," ",185],["T_VARIABLE","$order",185],")",["T_WHITESPACE","\n    ",185],"{",["T_WHITESPACE","\n        ",186],["T_COMMENT","\/\/ transaction will be here\n",187],["T_WHITESPACE","        ",188],["T_COMMENT","\/\/begin transaction\n",188],["T_WHITESPACE","        ",189],["T_TRY","try",189],["T_WHITESPACE"," ",189],"{",["T_WHITESPACE","\n            ",189],["T_VARIABLE","$order",190],["T_OBJECT_OPERATOR","->",190],["T_STRING","place",190],"(",")",";",["T_WHITESPACE","\n            ",190],["T_RETURN","return",191],["T_WHITESPACE"," ",191],["T_VARIABLE","$this",191],["T_OBJECT_OPERATOR","->",191],["T_STRING","orderRepository",191],["T_OBJECT_OPERATOR","->",191],["T_STRING","save",191],"(",["T_VARIABLE","$order",191],")",";",["T_WHITESPACE","\n            ",191],["T_COMMENT","\/\/commit\n",192],["T_WHITESPACE","        ",193],"}",["T_WHITESPACE"," ",193],["T_CATCH","catch",193],["T_WHITESPACE"," ",193],"(",["T_NS_SEPARATOR","\\",193],["T_STRING","Exception",193],["T_WHITESPACE"," ",193],["T_VARIABLE","$e",193],")",["T_WHITESPACE"," ",193],"{",["T_WHITESPACE","\n            ",193],["T_THROW","throw",194],["T_WHITESPACE"," ",194],["T_VARIABLE","$e",194],";",["T_WHITESPACE","\n            ",194],["T_COMMENT","\/\/rollback;\n",195],["T_WHITESPACE","        ",196],"}",["T_WHITESPACE","\n    ",196],"}",["T_WHITESPACE","\n\n    ",197],["T_DOC_COMMENT","\/**\n     * Order state setter.\n     *\n     * If status is specified, will add order status history with specified comment\n     * the setData() cannot be overridden because of compatibility issues with resource model\n     * By default allows to set any state. Can also update status to default or specified value\n     * Complete and closed states are encapsulated intentionally\n     *\n     * @param \\Magento\\Sales\\Api\\Data\\OrderInterface $order\n     * @param string $state\n     * @param string|bool $status\n     * @param string $comment\n     * @param bool $isCustomerNotified\n     * @param bool $shouldProtectState\n     * @return \\Magento\\Sales\\Model\\Order\n     * @throws \\Magento\\Framework\\Exception\\LocalizedException\n     *\/",199],["T_WHITESPACE","\n    ",215],["T_PUBLIC","public",216],["T_WHITESPACE"," ",216],["T_FUNCTION","function",216],["T_WHITESPACE"," ",216],["T_STRING","setState",216],"(",["T_WHITESPACE","\n        ",216],["T_NS_SEPARATOR","\\",217],["T_STRING","Magento",217],["T_NS_SEPARATOR","\\",217],["T_STRING","Sales",217],["T_NS_SEPARATOR","\\",217],["T_STRING","Api",217],["T_NS_SEPARATOR","\\",217],["T_STRING","Data",217],["T_NS_SEPARATOR","\\",217],["T_STRING","OrderInterface",217],["T_WHITESPACE"," ",217],["T_VARIABLE","$order",217],",",["T_WHITESPACE","\n        ",217],["T_VARIABLE","$state",218],",",["T_WHITESPACE","\n        ",218],["T_VARIABLE","$status",219],["T_WHITESPACE"," ",219],"=",["T_WHITESPACE"," ",219],["T_STRING","false",219],",",["T_WHITESPACE","\n        ",219],["T_VARIABLE","$comment",220],["T_WHITESPACE"," ",220],"=",["T_WHITESPACE"," ",220],["T_CONSTANT_ENCAPSED_STRING","''",220],",",["T_WHITESPACE","\n        ",220],["T_VARIABLE","$isCustomerNotified",221],["T_WHITESPACE"," ",221],"=",["T_WHITESPACE"," ",221],["T_STRING","null",221],",",["T_WHITESPACE","\n        ",221],["T_VARIABLE","$shouldProtectState",222],["T_WHITESPACE"," ",222],"=",["T_WHITESPACE"," ",222],["T_STRING","true",222],["T_WHITESPACE","\n    ",222],")",["T_WHITESPACE"," ",223],"{",["T_WHITESPACE","\n        ",223],["T_COMMENT","\/\/ attempt to set the specified state\n",224],["T_WHITESPACE","        ",225],["T_IF","if",225],["T_WHITESPACE"," ",225],"(",["T_VARIABLE","$shouldProtectState",225],")",["T_WHITESPACE"," ",225],"{",["T_WHITESPACE","\n            ",225],["T_IF","if",226],["T_WHITESPACE"," ",226],"(",["T_VARIABLE","$order",226],["T_OBJECT_OPERATOR","->",226],["T_STRING","isStateProtected",226],"(",["T_VARIABLE","$state",226],")",")",["T_WHITESPACE"," ",226],"{",["T_WHITESPACE","\n                ",226],["T_THROW","throw",227],["T_WHITESPACE"," ",227],["T_NEW","new",227],["T_WHITESPACE"," ",227],["T_NS_SEPARATOR","\\",227],["T_STRING","Magento",227],["T_NS_SEPARATOR","\\",227],["T_STRING","Framework",227],["T_NS_SEPARATOR","\\",227],["T_STRING","Exception",227],["T_NS_SEPARATOR","\\",227],["T_STRING","LocalizedException",227],"(",["T_WHITESPACE","\n                    ",227],["T_STRING","__",228],"(",["T_CONSTANT_ENCAPSED_STRING","'The Order State \"%1\" must not be set manually.'",228],",",["T_WHITESPACE"," ",228],["T_VARIABLE","$state",228],")",["T_WHITESPACE","\n                ",228],")",";",["T_WHITESPACE","\n            ",229],"}",["T_WHITESPACE","\n        ",230],"}",["T_WHITESPACE","\n\n        ",231],["T_VARIABLE","$transport",233],["T_WHITESPACE"," ",233],"=",["T_WHITESPACE"," ",233],["T_NEW","new",233],["T_WHITESPACE"," ",233],["T_NS_SEPARATOR","\\",233],["T_STRING","Magento",233],["T_NS_SEPARATOR","\\",233],["T_STRING","Framework",233],["T_NS_SEPARATOR","\\",233],["T_STRING","DataObject",233],"(",["T_WHITESPACE","\n            ",233],"[",["T_WHITESPACE","\n                ",234],["T_CONSTANT_ENCAPSED_STRING","'state'",235],["T_WHITESPACE","     ",235],["T_DOUBLE_ARROW","=>",235],["T_WHITESPACE"," ",235],["T_VARIABLE","$state",235],",",["T_WHITESPACE","\n                ",235],["T_CONSTANT_ENCAPSED_STRING","'status'",236],["T_WHITESPACE","    ",236],["T_DOUBLE_ARROW","=>",236],["T_WHITESPACE"," ",236],["T_VARIABLE","$status",236],",",["T_WHITESPACE","\n                ",236],["T_CONSTANT_ENCAPSED_STRING","'comment'",237],["T_WHITESPACE","   ",237],["T_DOUBLE_ARROW","=>",237],["T_WHITESPACE"," ",237],["T_VARIABLE","$comment",237],",",["T_WHITESPACE","\n                ",237],["T_CONSTANT_ENCAPSED_STRING","'is_customer_notified'",238],["T_WHITESPACE","    ",238],["T_DOUBLE_ARROW","=>",238],["T_WHITESPACE"," ",238],["T_VARIABLE","$isCustomerNotified",238],["T_WHITESPACE","\n            ",238],"]",["T_WHITESPACE","\n        ",239],")",";",["T_WHITESPACE","\n\n        ",240],["T_VARIABLE","$this",242],["T_OBJECT_OPERATOR","->",242],["T_STRING","eventManager",242],["T_OBJECT_OPERATOR","->",242],["T_STRING","dispatch",242],"(",["T_WHITESPACE","\n            ",242],["T_CONSTANT_ENCAPSED_STRING","'sales_order_state_change_before'",243],",",["T_WHITESPACE","\n            ",243],"[",["T_CONSTANT_ENCAPSED_STRING","'order'",244],["T_WHITESPACE"," ",244],["T_DOUBLE_ARROW","=>",244],["T_WHITESPACE"," ",244],["T_VARIABLE","$this",244],",",["T_WHITESPACE"," ",244],["T_CONSTANT_ENCAPSED_STRING","'transport'",244],["T_WHITESPACE"," ",244],["T_DOUBLE_ARROW","=>",244],["T_WHITESPACE"," ",244],["T_VARIABLE","$transport",244],"]",["T_WHITESPACE","\n        ",244],")",";",["T_WHITESPACE","\n        ",245],["T_VARIABLE","$status",246],["T_WHITESPACE"," ",246],"=",["T_WHITESPACE"," ",246],["T_VARIABLE","$transport",246],["T_OBJECT_OPERATOR","->",246],["T_STRING","getStatus",246],"(",")",";",["T_WHITESPACE","\n        ",246],["T_VARIABLE","$order",247],["T_OBJECT_OPERATOR","->",247],["T_STRING","setData",247],"(",["T_CONSTANT_ENCAPSED_STRING","'state'",247],",",["T_WHITESPACE"," ",247],["T_VARIABLE","$transport",247],["T_OBJECT_OPERATOR","->",247],["T_STRING","getState",247],"(",")",")",";",["T_WHITESPACE","\n\n        ",247],["T_COMMENT","\/\/ add status history\n",249],["T_WHITESPACE","        ",250],["T_IF","if",250],["T_WHITESPACE"," ",250],"(",["T_VARIABLE","$status",250],")",["T_WHITESPACE"," ",250],"{",["T_WHITESPACE","\n            ",250],["T_IF","if",251],["T_WHITESPACE"," ",251],"(",["T_VARIABLE","$status",251],["T_WHITESPACE"," ",251],["T_IS_IDENTICAL","===",251],["T_WHITESPACE"," ",251],["T_STRING","true",251],")",["T_WHITESPACE"," ",251],"{",["T_WHITESPACE","\n                ",251],["T_VARIABLE","$status",252],["T_WHITESPACE"," ",252],"=",["T_WHITESPACE"," ",252],["T_VARIABLE","$order",252],["T_OBJECT_OPERATOR","->",252],["T_STRING","getConfig",252],"(",")",["T_OBJECT_OPERATOR","->",252],["T_STRING","getStateDefaultStatus",252],"(",["T_VARIABLE","$transport",252],["T_OBJECT_OPERATOR","->",252],["T_STRING","getState",252],"(",")",")",";",["T_WHITESPACE","\n            ",252],"}",["T_WHITESPACE","\n            ",253],["T_VARIABLE","$order",254],["T_OBJECT_OPERATOR","->",254],["T_STRING","setStatus",254],"(",["T_VARIABLE","$status",254],")",";",["T_WHITESPACE","\n            ",254],["T_VARIABLE","$history",255],["T_WHITESPACE"," ",255],"=",["T_WHITESPACE"," ",255],["T_VARIABLE","$order",255],["T_OBJECT_OPERATOR","->",255],["T_STRING","addStatusHistoryComment",255],"(",["T_VARIABLE","$transport",255],["T_OBJECT_OPERATOR","->",255],["T_STRING","getComment",255],"(",")",",",["T_WHITESPACE"," ",255],["T_STRING","false",255],")",";",["T_WHITESPACE","\n            ",255],["T_COMMENT","\/\/ no sense to set $status again\n",256],["T_WHITESPACE","            ",257],["T_VARIABLE","$history",257],["T_OBJECT_OPERATOR","->",257],["T_STRING","setIsCustomerNotified",257],"(",["T_VARIABLE","$transport",257],["T_OBJECT_OPERATOR","->",257],["T_STRING","getIsCustomerNotified",257],"(",")",")",";",["T_WHITESPACE","\n        ",257],"}",["T_WHITESPACE","\n        ",258],["T_RETURN","return",259],["T_WHITESPACE"," ",259],["T_VARIABLE","$this",259],";",["T_WHITESPACE","\n    ",259],"}",["T_WHITESPACE","\n",260],"}",["T_WHITESPACE","\n",261]]
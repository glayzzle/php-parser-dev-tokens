[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Copyright \u00c2\u00a9 2013-2017 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n *\/",2],["T_WHITESPACE","\n",5],["T_NAMESPACE","namespace",6],["T_WHITESPACE"," ",6],["T_STRING","Magento",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Sales",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Model",6],";",["T_WHITESPACE","\n\n",6],["T_USE","use",8],["T_WHITESPACE"," ",8],["T_STRING","Magento",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Framework",8],["T_NS_SEPARATOR","\\",8],["T_STRING","App",8],["T_NS_SEPARATOR","\\",8],["T_STRING","ResourceConnection",8],";",["T_WHITESPACE","\n",8],["T_USE","use",9],["T_WHITESPACE"," ",9],["T_STRING","Magento",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Sales",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Api",9],["T_NS_SEPARATOR","\\",9],["T_STRING","OrderRepositoryInterface",9],";",["T_WHITESPACE","\n",9],["T_USE","use",10],["T_WHITESPACE"," ",10],["T_STRING","Magento",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Sales",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Api",10],["T_NS_SEPARATOR","\\",10],["T_STRING","ShipmentRepositoryInterface",10],";",["T_WHITESPACE","\n",10],["T_USE","use",11],["T_WHITESPACE"," ",11],["T_STRING","Magento",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Sales",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Api",11],["T_NS_SEPARATOR","\\",11],["T_STRING","ShipOrderInterface",11],";",["T_WHITESPACE","\n",11],["T_USE","use",12],["T_WHITESPACE"," ",12],["T_STRING","Magento",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Sales",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Model",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Order",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Config",12],["T_WHITESPACE"," ",12],["T_AS","as",12],["T_WHITESPACE"," ",12],["T_STRING","OrderConfig",12],";",["T_WHITESPACE","\n",12],["T_USE","use",13],["T_WHITESPACE"," ",13],["T_STRING","Magento",13],["T_NS_SEPARATOR","\\",13],["T_STRING","Sales",13],["T_NS_SEPARATOR","\\",13],["T_STRING","Model",13],["T_NS_SEPARATOR","\\",13],["T_STRING","Order",13],["T_NS_SEPARATOR","\\",13],["T_STRING","OrderStateResolverInterface",13],";",["T_WHITESPACE","\n",13],["T_USE","use",14],["T_WHITESPACE"," ",14],["T_STRING","Magento",14],["T_NS_SEPARATOR","\\",14],["T_STRING","Sales",14],["T_NS_SEPARATOR","\\",14],["T_STRING","Model",14],["T_NS_SEPARATOR","\\",14],["T_STRING","Order",14],["T_NS_SEPARATOR","\\",14],["T_STRING","ShipmentDocumentFactory",14],";",["T_WHITESPACE","\n",14],["T_USE","use",15],["T_WHITESPACE"," ",15],["T_STRING","Magento",15],["T_NS_SEPARATOR","\\",15],["T_STRING","Sales",15],["T_NS_SEPARATOR","\\",15],["T_STRING","Model",15],["T_NS_SEPARATOR","\\",15],["T_STRING","Order",15],["T_NS_SEPARATOR","\\",15],["T_STRING","Shipment",15],["T_NS_SEPARATOR","\\",15],["T_STRING","NotifierInterface",15],";",["T_WHITESPACE","\n",15],["T_USE","use",16],["T_WHITESPACE"," ",16],["T_STRING","Magento",16],["T_NS_SEPARATOR","\\",16],["T_STRING","Sales",16],["T_NS_SEPARATOR","\\",16],["T_STRING","Model",16],["T_NS_SEPARATOR","\\",16],["T_STRING","Order",16],["T_NS_SEPARATOR","\\",16],["T_STRING","Shipment",16],["T_NS_SEPARATOR","\\",16],["T_STRING","OrderRegistrarInterface",16],";",["T_WHITESPACE","\n",16],["T_USE","use",17],["T_WHITESPACE"," ",17],["T_STRING","Magento",17],["T_NS_SEPARATOR","\\",17],["T_STRING","Sales",17],["T_NS_SEPARATOR","\\",17],["T_STRING","Model",17],["T_NS_SEPARATOR","\\",17],["T_STRING","Order",17],["T_NS_SEPARATOR","\\",17],["T_STRING","Validation",17],["T_NS_SEPARATOR","\\",17],["T_STRING","ShipOrderInterface",17],["T_WHITESPACE"," ",17],["T_AS","as",17],["T_WHITESPACE"," ",17],["T_STRING","ShipOrderValidator",17],";",["T_WHITESPACE","\n",17],["T_USE","use",18],["T_WHITESPACE"," ",18],["T_STRING","Psr",18],["T_NS_SEPARATOR","\\",18],["T_STRING","Log",18],["T_NS_SEPARATOR","\\",18],["T_STRING","LoggerInterface",18],";",["T_WHITESPACE","\n\n",18],["T_DOC_COMMENT","\/**\n * Class ShipOrder\n * @SuppressWarnings(PHPMD.CouplingBetweenObjects)\n *\/",20],["T_WHITESPACE","\n",23],["T_CLASS","class",24],["T_WHITESPACE"," ",24],["T_STRING","ShipOrder",24],["T_WHITESPACE"," ",24],["T_IMPLEMENTS","implements",24],["T_WHITESPACE"," ",24],["T_STRING","ShipOrderInterface",24],["T_WHITESPACE","\n",24],"{",["T_WHITESPACE","\n    ",25],["T_DOC_COMMENT","\/**\n     * @var ResourceConnection\n     *\/",26],["T_WHITESPACE","\n    ",28],["T_PRIVATE","private",29],["T_WHITESPACE"," ",29],["T_VARIABLE","$resourceConnection",29],";",["T_WHITESPACE","\n\n    ",29],["T_DOC_COMMENT","\/**\n     * @var OrderRepositoryInterface\n     *\/",31],["T_WHITESPACE","\n    ",33],["T_PRIVATE","private",34],["T_WHITESPACE"," ",34],["T_VARIABLE","$orderRepository",34],";",["T_WHITESPACE","\n\n    ",34],["T_DOC_COMMENT","\/**\n     * @var ShipmentDocumentFactory\n     *\/",36],["T_WHITESPACE","\n    ",38],["T_PRIVATE","private",39],["T_WHITESPACE"," ",39],["T_VARIABLE","$shipmentDocumentFactory",39],";",["T_WHITESPACE","\n\n    ",39],["T_DOC_COMMENT","\/**\n     * @var OrderStateResolverInterface\n     *\/",41],["T_WHITESPACE","\n    ",43],["T_PRIVATE","private",44],["T_WHITESPACE"," ",44],["T_VARIABLE","$orderStateResolver",44],";",["T_WHITESPACE","\n\n    ",44],["T_DOC_COMMENT","\/**\n     * @var OrderConfig\n     *\/",46],["T_WHITESPACE","\n    ",48],["T_PRIVATE","private",49],["T_WHITESPACE"," ",49],["T_VARIABLE","$config",49],";",["T_WHITESPACE","\n\n    ",49],["T_DOC_COMMENT","\/**\n     * @var ShipmentRepositoryInterface\n     *\/",51],["T_WHITESPACE","\n    ",53],["T_PRIVATE","private",54],["T_WHITESPACE"," ",54],["T_VARIABLE","$shipmentRepository",54],";",["T_WHITESPACE","\n\n    ",54],["T_DOC_COMMENT","\/**\n     * @var ShipOrderValidator\n     *\/",56],["T_WHITESPACE","\n    ",58],["T_PRIVATE","private",59],["T_WHITESPACE"," ",59],["T_VARIABLE","$shipOrderValidator",59],";",["T_WHITESPACE","\n\n    ",59],["T_DOC_COMMENT","\/**\n     * @var NotifierInterface\n     *\/",61],["T_WHITESPACE","\n    ",63],["T_PRIVATE","private",64],["T_WHITESPACE"," ",64],["T_VARIABLE","$notifierInterface",64],";",["T_WHITESPACE","\n\n    ",64],["T_DOC_COMMENT","\/**\n     * @var LoggerInterface\n     *\/",66],["T_WHITESPACE","\n    ",68],["T_PRIVATE","private",69],["T_WHITESPACE"," ",69],["T_VARIABLE","$logger",69],";",["T_WHITESPACE","\n\n    ",69],["T_DOC_COMMENT","\/**\n     * @var OrderRegistrarInterface\n     *\/",71],["T_WHITESPACE","\n    ",73],["T_PRIVATE","private",74],["T_WHITESPACE"," ",74],["T_VARIABLE","$orderRegistrar",74],";",["T_WHITESPACE","\n\n    ",74],["T_DOC_COMMENT","\/**\n     * @param ResourceConnection $resourceConnection\n     * @param OrderRepositoryInterface $orderRepository\n     * @param ShipmentDocumentFactory $shipmentDocumentFactory\n     * @param OrderStateResolverInterface $orderStateResolver\n     * @param OrderConfig $config\n     * @param ShipmentRepositoryInterface $shipmentRepository\n     * @param ShipOrderValidator $shipOrderValidator\n     * @param NotifierInterface $notifierInterface\n     * @param OrderRegistrarInterface $orderRegistrar\n     * @param LoggerInterface $logger\n     * @SuppressWarnings(PHPMD.ExcessiveParameterList)\n     *\/",76],["T_WHITESPACE","\n    ",88],["T_PUBLIC","public",89],["T_WHITESPACE"," ",89],["T_FUNCTION","function",89],["T_WHITESPACE"," ",89],["T_STRING","__construct",89],"(",["T_WHITESPACE","\n        ",89],["T_STRING","ResourceConnection",90],["T_WHITESPACE"," ",90],["T_VARIABLE","$resourceConnection",90],",",["T_WHITESPACE","\n        ",90],["T_STRING","OrderRepositoryInterface",91],["T_WHITESPACE"," ",91],["T_VARIABLE","$orderRepository",91],",",["T_WHITESPACE","\n        ",91],["T_STRING","ShipmentDocumentFactory",92],["T_WHITESPACE"," ",92],["T_VARIABLE","$shipmentDocumentFactory",92],",",["T_WHITESPACE","\n        ",92],["T_STRING","OrderStateResolverInterface",93],["T_WHITESPACE"," ",93],["T_VARIABLE","$orderStateResolver",93],",",["T_WHITESPACE","\n        ",93],["T_STRING","OrderConfig",94],["T_WHITESPACE"," ",94],["T_VARIABLE","$config",94],",",["T_WHITESPACE","\n        ",94],["T_STRING","ShipmentRepositoryInterface",95],["T_WHITESPACE"," ",95],["T_VARIABLE","$shipmentRepository",95],",",["T_WHITESPACE","\n        ",95],["T_STRING","ShipOrderValidator",96],["T_WHITESPACE"," ",96],["T_VARIABLE","$shipOrderValidator",96],",",["T_WHITESPACE","\n        ",96],["T_STRING","NotifierInterface",97],["T_WHITESPACE"," ",97],["T_VARIABLE","$notifierInterface",97],",",["T_WHITESPACE","\n        ",97],["T_STRING","OrderRegistrarInterface",98],["T_WHITESPACE"," ",98],["T_VARIABLE","$orderRegistrar",98],",",["T_WHITESPACE","\n        ",98],["T_STRING","LoggerInterface",99],["T_WHITESPACE"," ",99],["T_VARIABLE","$logger",99],["T_WHITESPACE","\n    ",99],")",["T_WHITESPACE"," ",100],"{",["T_WHITESPACE","\n        ",100],["T_VARIABLE","$this",101],["T_OBJECT_OPERATOR","->",101],["T_STRING","resourceConnection",101],["T_WHITESPACE"," ",101],"=",["T_WHITESPACE"," ",101],["T_VARIABLE","$resourceConnection",101],";",["T_WHITESPACE","\n        ",101],["T_VARIABLE","$this",102],["T_OBJECT_OPERATOR","->",102],["T_STRING","orderRepository",102],["T_WHITESPACE"," ",102],"=",["T_WHITESPACE"," ",102],["T_VARIABLE","$orderRepository",102],";",["T_WHITESPACE","\n        ",102],["T_VARIABLE","$this",103],["T_OBJECT_OPERATOR","->",103],["T_STRING","shipmentDocumentFactory",103],["T_WHITESPACE"," ",103],"=",["T_WHITESPACE"," ",103],["T_VARIABLE","$shipmentDocumentFactory",103],";",["T_WHITESPACE","\n        ",103],["T_VARIABLE","$this",104],["T_OBJECT_OPERATOR","->",104],["T_STRING","orderStateResolver",104],["T_WHITESPACE"," ",104],"=",["T_WHITESPACE"," ",104],["T_VARIABLE","$orderStateResolver",104],";",["T_WHITESPACE","\n        ",104],["T_VARIABLE","$this",105],["T_OBJECT_OPERATOR","->",105],["T_STRING","config",105],["T_WHITESPACE"," ",105],"=",["T_WHITESPACE"," ",105],["T_VARIABLE","$config",105],";",["T_WHITESPACE","\n        ",105],["T_VARIABLE","$this",106],["T_OBJECT_OPERATOR","->",106],["T_STRING","shipmentRepository",106],["T_WHITESPACE"," ",106],"=",["T_WHITESPACE"," ",106],["T_VARIABLE","$shipmentRepository",106],";",["T_WHITESPACE","\n        ",106],["T_VARIABLE","$this",107],["T_OBJECT_OPERATOR","->",107],["T_STRING","shipOrderValidator",107],["T_WHITESPACE"," ",107],"=",["T_WHITESPACE"," ",107],["T_VARIABLE","$shipOrderValidator",107],";",["T_WHITESPACE","\n        ",107],["T_VARIABLE","$this",108],["T_OBJECT_OPERATOR","->",108],["T_STRING","notifierInterface",108],["T_WHITESPACE"," ",108],"=",["T_WHITESPACE"," ",108],["T_VARIABLE","$notifierInterface",108],";",["T_WHITESPACE","\n        ",108],["T_VARIABLE","$this",109],["T_OBJECT_OPERATOR","->",109],["T_STRING","logger",109],["T_WHITESPACE"," ",109],"=",["T_WHITESPACE"," ",109],["T_VARIABLE","$logger",109],";",["T_WHITESPACE","\n        ",109],["T_VARIABLE","$this",110],["T_OBJECT_OPERATOR","->",110],["T_STRING","orderRegistrar",110],["T_WHITESPACE"," ",110],"=",["T_WHITESPACE"," ",110],["T_VARIABLE","$orderRegistrar",110],";",["T_WHITESPACE","\n    ",110],"}",["T_WHITESPACE","\n\n    ",111],["T_DOC_COMMENT","\/**\n     * @param int $orderId\n     * @param \\Magento\\Sales\\Api\\Data\\ShipmentItemCreationInterface[] $items\n     * @param bool $notify\n     * @param bool $appendComment\n     * @param \\Magento\\Sales\\Api\\Data\\ShipmentCommentCreationInterface|null $comment\n     * @param \\Magento\\Sales\\Api\\Data\\ShipmentTrackCreationInterface[] $tracks\n     * @param \\Magento\\Sales\\Api\\Data\\ShipmentPackageCreationInterface[] $packages\n     * @param \\Magento\\Sales\\Api\\Data\\ShipmentCreationArgumentsInterface|null $arguments\n     * @return int\n     * @throws \\Magento\\Sales\\Api\\Exception\\DocumentValidationExceptionInterface\n     * @throws \\Magento\\Sales\\Api\\Exception\\CouldNotShipExceptionInterface\n     * @throws \\Magento\\Framework\\Exception\\InputException\n     * @throws \\Magento\\Framework\\Exception\\NoSuchEntityException\n     * @throws \\DomainException\n     *\/",113],["T_WHITESPACE","\n    ",128],["T_PUBLIC","public",129],["T_WHITESPACE"," ",129],["T_FUNCTION","function",129],["T_WHITESPACE"," ",129],["T_STRING","execute",129],"(",["T_WHITESPACE","\n        ",129],["T_VARIABLE","$orderId",130],",",["T_WHITESPACE","\n        ",130],["T_ARRAY","array",131],["T_WHITESPACE"," ",131],["T_VARIABLE","$items",131],["T_WHITESPACE"," ",131],"=",["T_WHITESPACE"," ",131],"[","]",",",["T_WHITESPACE","\n        ",131],["T_VARIABLE","$notify",132],["T_WHITESPACE"," ",132],"=",["T_WHITESPACE"," ",132],["T_STRING","false",132],",",["T_WHITESPACE","\n        ",132],["T_VARIABLE","$appendComment",133],["T_WHITESPACE"," ",133],"=",["T_WHITESPACE"," ",133],["T_STRING","false",133],",",["T_WHITESPACE","\n        ",133],["T_NS_SEPARATOR","\\",134],["T_STRING","Magento",134],["T_NS_SEPARATOR","\\",134],["T_STRING","Sales",134],["T_NS_SEPARATOR","\\",134],["T_STRING","Api",134],["T_NS_SEPARATOR","\\",134],["T_STRING","Data",134],["T_NS_SEPARATOR","\\",134],["T_STRING","ShipmentCommentCreationInterface",134],["T_WHITESPACE"," ",134],["T_VARIABLE","$comment",134],["T_WHITESPACE"," ",134],"=",["T_WHITESPACE"," ",134],["T_STRING","null",134],",",["T_WHITESPACE","\n        ",134],["T_ARRAY","array",135],["T_WHITESPACE"," ",135],["T_VARIABLE","$tracks",135],["T_WHITESPACE"," ",135],"=",["T_WHITESPACE"," ",135],"[","]",",",["T_WHITESPACE","\n        ",135],["T_ARRAY","array",136],["T_WHITESPACE"," ",136],["T_VARIABLE","$packages",136],["T_WHITESPACE"," ",136],"=",["T_WHITESPACE"," ",136],"[","]",",",["T_WHITESPACE","\n        ",136],["T_NS_SEPARATOR","\\",137],["T_STRING","Magento",137],["T_NS_SEPARATOR","\\",137],["T_STRING","Sales",137],["T_NS_SEPARATOR","\\",137],["T_STRING","Api",137],["T_NS_SEPARATOR","\\",137],["T_STRING","Data",137],["T_NS_SEPARATOR","\\",137],["T_STRING","ShipmentCreationArgumentsInterface",137],["T_WHITESPACE"," ",137],["T_VARIABLE","$arguments",137],["T_WHITESPACE"," ",137],"=",["T_WHITESPACE"," ",137],["T_STRING","null",137],["T_WHITESPACE","\n    ",137],")",["T_WHITESPACE"," ",138],"{",["T_WHITESPACE","\n        ",138],["T_VARIABLE","$connection",139],["T_WHITESPACE"," ",139],"=",["T_WHITESPACE"," ",139],["T_VARIABLE","$this",139],["T_OBJECT_OPERATOR","->",139],["T_STRING","resourceConnection",139],["T_OBJECT_OPERATOR","->",139],["T_STRING","getConnection",139],"(",["T_CONSTANT_ENCAPSED_STRING","'sales'",139],")",";",["T_WHITESPACE","\n        ",139],["T_VARIABLE","$order",140],["T_WHITESPACE"," ",140],"=",["T_WHITESPACE"," ",140],["T_VARIABLE","$this",140],["T_OBJECT_OPERATOR","->",140],["T_STRING","orderRepository",140],["T_OBJECT_OPERATOR","->",140],["T_STRING","get",140],"(",["T_VARIABLE","$orderId",140],")",";",["T_WHITESPACE","\n        ",140],["T_VARIABLE","$shipment",141],["T_WHITESPACE"," ",141],"=",["T_WHITESPACE"," ",141],["T_VARIABLE","$this",141],["T_OBJECT_OPERATOR","->",141],["T_STRING","shipmentDocumentFactory",141],["T_OBJECT_OPERATOR","->",141],["T_STRING","create",141],"(",["T_WHITESPACE","\n            ",141],["T_VARIABLE","$order",142],",",["T_WHITESPACE","\n            ",142],["T_VARIABLE","$items",143],",",["T_WHITESPACE","\n            ",143],["T_VARIABLE","$tracks",144],",",["T_WHITESPACE","\n            ",144],["T_VARIABLE","$comment",145],",",["T_WHITESPACE","\n            ",145],"(",["T_VARIABLE","$appendComment",146],["T_WHITESPACE"," ",146],["T_BOOLEAN_AND","&&",146],["T_WHITESPACE"," ",146],["T_VARIABLE","$notify",146],")",",",["T_WHITESPACE","\n            ",146],["T_VARIABLE","$packages",147],",",["T_WHITESPACE","\n            ",147],["T_VARIABLE","$arguments",148],["T_WHITESPACE","\n        ",148],")",";",["T_WHITESPACE","\n        ",149],["T_VARIABLE","$validationMessages",150],["T_WHITESPACE"," ",150],"=",["T_WHITESPACE"," ",150],["T_VARIABLE","$this",150],["T_OBJECT_OPERATOR","->",150],["T_STRING","shipOrderValidator",150],["T_OBJECT_OPERATOR","->",150],["T_STRING","validate",150],"(",["T_WHITESPACE","\n            ",150],["T_VARIABLE","$order",151],",",["T_WHITESPACE","\n            ",151],["T_VARIABLE","$shipment",152],",",["T_WHITESPACE","\n            ",152],["T_VARIABLE","$items",153],",",["T_WHITESPACE","\n            ",153],["T_VARIABLE","$notify",154],",",["T_WHITESPACE","\n            ",154],["T_VARIABLE","$appendComment",155],",",["T_WHITESPACE","\n            ",155],["T_VARIABLE","$comment",156],",",["T_WHITESPACE","\n            ",156],["T_VARIABLE","$tracks",157],",",["T_WHITESPACE","\n            ",157],["T_VARIABLE","$packages",158],["T_WHITESPACE","\n        ",158],")",";",["T_WHITESPACE","\n        ",159],["T_IF","if",160],["T_WHITESPACE"," ",160],"(",["T_VARIABLE","$validationMessages",160],["T_OBJECT_OPERATOR","->",160],["T_STRING","hasMessages",160],"(",")",")",["T_WHITESPACE"," ",160],"{",["T_WHITESPACE","\n            ",160],["T_THROW","throw",161],["T_WHITESPACE"," ",161],["T_NEW","new",161],["T_WHITESPACE"," ",161],["T_NS_SEPARATOR","\\",161],["T_STRING","Magento",161],["T_NS_SEPARATOR","\\",161],["T_STRING","Sales",161],["T_NS_SEPARATOR","\\",161],["T_STRING","Exception",161],["T_NS_SEPARATOR","\\",161],["T_STRING","DocumentValidationException",161],"(",["T_WHITESPACE","\n                ",161],["T_STRING","__",162],"(",["T_CONSTANT_ENCAPSED_STRING","\"Shipment Document Validation Error(s):\\n\"",162],["T_WHITESPACE"," ",162],".",["T_WHITESPACE"," ",162],["T_STRING","implode",162],"(",["T_CONSTANT_ENCAPSED_STRING","\"\\n\"",162],",",["T_WHITESPACE"," ",162],["T_VARIABLE","$validationMessages",162],["T_OBJECT_OPERATOR","->",162],["T_STRING","getMessages",162],"(",")",")",")",["T_WHITESPACE","\n            ",162],")",";",["T_WHITESPACE","\n        ",163],"}",["T_WHITESPACE","\n        ",164],["T_VARIABLE","$connection",165],["T_OBJECT_OPERATOR","->",165],["T_STRING","beginTransaction",165],"(",")",";",["T_WHITESPACE","\n        ",165],["T_TRY","try",166],["T_WHITESPACE"," ",166],"{",["T_WHITESPACE","\n            ",166],["T_VARIABLE","$this",167],["T_OBJECT_OPERATOR","->",167],["T_STRING","orderRegistrar",167],["T_OBJECT_OPERATOR","->",167],["T_STRING","register",167],"(",["T_VARIABLE","$order",167],",",["T_WHITESPACE"," ",167],["T_VARIABLE","$shipment",167],")",";",["T_WHITESPACE","\n            ",167],["T_VARIABLE","$order",168],["T_OBJECT_OPERATOR","->",168],["T_STRING","setState",168],"(",["T_WHITESPACE","\n                ",168],["T_VARIABLE","$this",169],["T_OBJECT_OPERATOR","->",169],["T_STRING","orderStateResolver",169],["T_OBJECT_OPERATOR","->",169],["T_STRING","getStateForOrder",169],"(",["T_VARIABLE","$order",169],",",["T_WHITESPACE"," ",169],"[",["T_STRING","OrderStateResolverInterface",169],["T_DOUBLE_COLON","::",169],["T_STRING","IN_PROGRESS",169],"]",")",["T_WHITESPACE","\n            ",169],")",";",["T_WHITESPACE","\n            ",170],["T_VARIABLE","$order",171],["T_OBJECT_OPERATOR","->",171],["T_STRING","setStatus",171],"(",["T_VARIABLE","$this",171],["T_OBJECT_OPERATOR","->",171],["T_STRING","config",171],["T_OBJECT_OPERATOR","->",171],["T_STRING","getStateDefaultStatus",171],"(",["T_VARIABLE","$order",171],["T_OBJECT_OPERATOR","->",171],["T_STRING","getState",171],"(",")",")",")",";",["T_WHITESPACE","\n            ",171],["T_VARIABLE","$this",172],["T_OBJECT_OPERATOR","->",172],["T_STRING","shipmentRepository",172],["T_OBJECT_OPERATOR","->",172],["T_STRING","save",172],"(",["T_VARIABLE","$shipment",172],")",";",["T_WHITESPACE","\n            ",172],["T_VARIABLE","$this",173],["T_OBJECT_OPERATOR","->",173],["T_STRING","orderRepository",173],["T_OBJECT_OPERATOR","->",173],["T_STRING","save",173],"(",["T_VARIABLE","$order",173],")",";",["T_WHITESPACE","\n            ",173],["T_VARIABLE","$connection",174],["T_OBJECT_OPERATOR","->",174],["T_STRING","commit",174],"(",")",";",["T_WHITESPACE","\n        ",174],"}",["T_WHITESPACE"," ",175],["T_CATCH","catch",175],["T_WHITESPACE"," ",175],"(",["T_NS_SEPARATOR","\\",175],["T_STRING","Exception",175],["T_WHITESPACE"," ",175],["T_VARIABLE","$e",175],")",["T_WHITESPACE"," ",175],"{",["T_WHITESPACE","\n            ",175],["T_VARIABLE","$this",176],["T_OBJECT_OPERATOR","->",176],["T_STRING","logger",176],["T_OBJECT_OPERATOR","->",176],["T_STRING","critical",176],"(",["T_VARIABLE","$e",176],")",";",["T_WHITESPACE","\n            ",176],["T_VARIABLE","$connection",177],["T_OBJECT_OPERATOR","->",177],["T_STRING","rollBack",177],"(",")",";",["T_WHITESPACE","\n            ",177],["T_THROW","throw",178],["T_WHITESPACE"," ",178],["T_NEW","new",178],["T_WHITESPACE"," ",178],["T_NS_SEPARATOR","\\",178],["T_STRING","Magento",178],["T_NS_SEPARATOR","\\",178],["T_STRING","Sales",178],["T_NS_SEPARATOR","\\",178],["T_STRING","Exception",178],["T_NS_SEPARATOR","\\",178],["T_STRING","CouldNotShipException",178],"(",["T_WHITESPACE","\n                ",178],["T_STRING","__",179],"(",["T_CONSTANT_ENCAPSED_STRING","'Could not save a shipment, see error log for details'",179],")",["T_WHITESPACE","\n            ",179],")",";",["T_WHITESPACE","\n        ",180],"}",["T_WHITESPACE","\n        ",181],["T_IF","if",182],["T_WHITESPACE"," ",182],"(",["T_VARIABLE","$notify",182],")",["T_WHITESPACE"," ",182],"{",["T_WHITESPACE","\n            ",182],["T_IF","if",183],["T_WHITESPACE"," ",183],"(","!",["T_VARIABLE","$appendComment",183],")",["T_WHITESPACE"," ",183],"{",["T_WHITESPACE","\n                ",183],["T_VARIABLE","$comment",184],["T_WHITESPACE"," ",184],"=",["T_WHITESPACE"," ",184],["T_STRING","null",184],";",["T_WHITESPACE","\n            ",184],"}",["T_WHITESPACE","\n            ",185],["T_VARIABLE","$this",186],["T_OBJECT_OPERATOR","->",186],["T_STRING","notifierInterface",186],["T_OBJECT_OPERATOR","->",186],["T_STRING","notify",186],"(",["T_VARIABLE","$order",186],",",["T_WHITESPACE"," ",186],["T_VARIABLE","$shipment",186],",",["T_WHITESPACE"," ",186],["T_VARIABLE","$comment",186],")",";",["T_WHITESPACE","\n        ",186],"}",["T_WHITESPACE","\n        ",187],["T_RETURN","return",188],["T_WHITESPACE"," ",188],["T_VARIABLE","$shipment",188],["T_OBJECT_OPERATOR","->",188],["T_STRING","getEntityId",188],"(",")",";",["T_WHITESPACE","\n    ",188],"}",["T_WHITESPACE","\n",189],"}",["T_WHITESPACE","\n",190]]
[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Copyright \u00c2\u00a9 2013-2017 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n *\/",2],["T_WHITESPACE","\n",5],["T_NAMESPACE","namespace",6],["T_WHITESPACE"," ",6],["T_STRING","Magento",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Sales",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Model",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Order",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Email",6],";",["T_WHITESPACE","\n\n",6],["T_USE","use",8],["T_WHITESPACE"," ",8],["T_STRING","Magento",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Sales",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Model",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Order",8],";",["T_WHITESPACE","\n",8],["T_USE","use",9],["T_WHITESPACE"," ",9],["T_STRING","Magento",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Sales",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Model",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Order",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Email",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Container",9],["T_NS_SEPARATOR","\\",9],["T_STRING","IdentityInterface",9],";",["T_WHITESPACE","\n",9],["T_USE","use",10],["T_WHITESPACE"," ",10],["T_STRING","Magento",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Sales",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Model",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Order",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Email",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Container",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Template",10],";",["T_WHITESPACE","\n",10],["T_USE","use",11],["T_WHITESPACE"," ",11],["T_STRING","Magento",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Sales",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Model",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Order",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Address",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Renderer",11],";",["T_WHITESPACE","\n\n",11],["T_ABSTRACT","abstract",13],["T_WHITESPACE"," ",13],["T_CLASS","class",13],["T_WHITESPACE"," ",13],["T_STRING","Sender",13],["T_WHITESPACE","\n",13],"{",["T_WHITESPACE","\n    ",14],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Sales\\Model\\Order\\Email\\SenderBuilderFactory\n     *\/",15],["T_WHITESPACE","\n    ",17],["T_PROTECTED","protected",18],["T_WHITESPACE"," ",18],["T_VARIABLE","$senderBuilderFactory",18],";",["T_WHITESPACE","\n\n    ",18],["T_DOC_COMMENT","\/**\n     * @var Template\n     *\/",20],["T_WHITESPACE","\n    ",22],["T_PROTECTED","protected",23],["T_WHITESPACE"," ",23],["T_VARIABLE","$templateContainer",23],";",["T_WHITESPACE","\n\n    ",23],["T_DOC_COMMENT","\/**\n     * @var IdentityInterface\n     *\/",25],["T_WHITESPACE","\n    ",27],["T_PROTECTED","protected",28],["T_WHITESPACE"," ",28],["T_VARIABLE","$identityContainer",28],";",["T_WHITESPACE","\n\n    ",28],["T_DOC_COMMENT","\/**\n     * @var \\Psr\\Log\\LoggerInterface\n     *\/",30],["T_WHITESPACE","\n    ",32],["T_PROTECTED","protected",33],["T_WHITESPACE"," ",33],["T_VARIABLE","$logger",33],";",["T_WHITESPACE","\n\n    ",33],["T_DOC_COMMENT","\/**\n     * @var Renderer\n     *\/",35],["T_WHITESPACE","\n    ",37],["T_PROTECTED","protected",38],["T_WHITESPACE"," ",38],["T_VARIABLE","$addressRenderer",38],";",["T_WHITESPACE","\n\n    ",38],["T_DOC_COMMENT","\/**\n     * @param Template $templateContainer\n     * @param IdentityInterface $identityContainer\n     * @param SenderBuilderFactory $senderBuilderFactory\n     * @param \\Psr\\Log\\LoggerInterface $logger\n     * @param Renderer $addressRenderer\n     *\/",40],["T_WHITESPACE","\n    ",46],["T_PUBLIC","public",47],["T_WHITESPACE"," ",47],["T_FUNCTION","function",47],["T_WHITESPACE"," ",47],["T_STRING","__construct",47],"(",["T_WHITESPACE","\n        ",47],["T_STRING","Template",48],["T_WHITESPACE"," ",48],["T_VARIABLE","$templateContainer",48],",",["T_WHITESPACE","\n        ",48],["T_STRING","IdentityInterface",49],["T_WHITESPACE"," ",49],["T_VARIABLE","$identityContainer",49],",",["T_WHITESPACE","\n        ",49],["T_NS_SEPARATOR","\\",50],["T_STRING","Magento",50],["T_NS_SEPARATOR","\\",50],["T_STRING","Sales",50],["T_NS_SEPARATOR","\\",50],["T_STRING","Model",50],["T_NS_SEPARATOR","\\",50],["T_STRING","Order",50],["T_NS_SEPARATOR","\\",50],["T_STRING","Email",50],["T_NS_SEPARATOR","\\",50],["T_STRING","SenderBuilderFactory",50],["T_WHITESPACE"," ",50],["T_VARIABLE","$senderBuilderFactory",50],",",["T_WHITESPACE","\n        ",50],["T_NS_SEPARATOR","\\",51],["T_STRING","Psr",51],["T_NS_SEPARATOR","\\",51],["T_STRING","Log",51],["T_NS_SEPARATOR","\\",51],["T_STRING","LoggerInterface",51],["T_WHITESPACE"," ",51],["T_VARIABLE","$logger",51],",",["T_WHITESPACE","\n        ",51],["T_STRING","Renderer",52],["T_WHITESPACE"," ",52],["T_VARIABLE","$addressRenderer",52],["T_WHITESPACE","\n    ",52],")",["T_WHITESPACE"," ",53],"{",["T_WHITESPACE","\n        ",53],["T_VARIABLE","$this",54],["T_OBJECT_OPERATOR","->",54],["T_STRING","templateContainer",54],["T_WHITESPACE"," ",54],"=",["T_WHITESPACE"," ",54],["T_VARIABLE","$templateContainer",54],";",["T_WHITESPACE","\n        ",54],["T_VARIABLE","$this",55],["T_OBJECT_OPERATOR","->",55],["T_STRING","identityContainer",55],["T_WHITESPACE"," ",55],"=",["T_WHITESPACE"," ",55],["T_VARIABLE","$identityContainer",55],";",["T_WHITESPACE","\n        ",55],["T_VARIABLE","$this",56],["T_OBJECT_OPERATOR","->",56],["T_STRING","senderBuilderFactory",56],["T_WHITESPACE"," ",56],"=",["T_WHITESPACE"," ",56],["T_VARIABLE","$senderBuilderFactory",56],";",["T_WHITESPACE","\n        ",56],["T_VARIABLE","$this",57],["T_OBJECT_OPERATOR","->",57],["T_STRING","logger",57],["T_WHITESPACE"," ",57],"=",["T_WHITESPACE"," ",57],["T_VARIABLE","$logger",57],";",["T_WHITESPACE","\n        ",57],["T_VARIABLE","$this",58],["T_OBJECT_OPERATOR","->",58],["T_STRING","addressRenderer",58],["T_WHITESPACE"," ",58],"=",["T_WHITESPACE"," ",58],["T_VARIABLE","$addressRenderer",58],";",["T_WHITESPACE","\n    ",58],"}",["T_WHITESPACE","\n\n    ",59],["T_DOC_COMMENT","\/**\n     * @param Order $order\n     * @return bool\n     *\/",61],["T_WHITESPACE","\n    ",64],["T_PROTECTED","protected",65],["T_WHITESPACE"," ",65],["T_FUNCTION","function",65],["T_WHITESPACE"," ",65],["T_STRING","checkAndSend",65],"(",["T_STRING","Order",65],["T_WHITESPACE"," ",65],["T_VARIABLE","$order",65],")",["T_WHITESPACE","\n    ",65],"{",["T_WHITESPACE","\n        ",66],["T_VARIABLE","$this",67],["T_OBJECT_OPERATOR","->",67],["T_STRING","identityContainer",67],["T_OBJECT_OPERATOR","->",67],["T_STRING","setStore",67],"(",["T_VARIABLE","$order",67],["T_OBJECT_OPERATOR","->",67],["T_STRING","getStore",67],"(",")",")",";",["T_WHITESPACE","\n        ",67],["T_IF","if",68],["T_WHITESPACE"," ",68],"(","!",["T_VARIABLE","$this",68],["T_OBJECT_OPERATOR","->",68],["T_STRING","identityContainer",68],["T_OBJECT_OPERATOR","->",68],["T_STRING","isEnabled",68],"(",")",")",["T_WHITESPACE"," ",68],"{",["T_WHITESPACE","\n            ",68],["T_RETURN","return",69],["T_WHITESPACE"," ",69],["T_STRING","false",69],";",["T_WHITESPACE","\n        ",69],"}",["T_WHITESPACE","\n        ",70],["T_VARIABLE","$this",71],["T_OBJECT_OPERATOR","->",71],["T_STRING","prepareTemplate",71],"(",["T_VARIABLE","$order",71],")",";",["T_WHITESPACE","\n\n        ",71],["T_DOC_COMMENT","\/** @var SenderBuilder $sender *\/",73],["T_WHITESPACE","\n        ",73],["T_VARIABLE","$sender",74],["T_WHITESPACE"," ",74],"=",["T_WHITESPACE"," ",74],["T_VARIABLE","$this",74],["T_OBJECT_OPERATOR","->",74],["T_STRING","getSender",74],"(",")",";",["T_WHITESPACE","\n\n        ",74],["T_TRY","try",76],["T_WHITESPACE"," ",76],"{",["T_WHITESPACE","\n            ",76],["T_VARIABLE","$sender",77],["T_OBJECT_OPERATOR","->",77],["T_STRING","send",77],"(",")",";",["T_WHITESPACE","\n            ",77],["T_VARIABLE","$sender",78],["T_OBJECT_OPERATOR","->",78],["T_STRING","sendCopyTo",78],"(",")",";",["T_WHITESPACE","\n        ",78],"}",["T_WHITESPACE"," ",79],["T_CATCH","catch",79],["T_WHITESPACE"," ",79],"(",["T_NS_SEPARATOR","\\",79],["T_STRING","Exception",79],["T_WHITESPACE"," ",79],["T_VARIABLE","$e",79],")",["T_WHITESPACE"," ",79],"{",["T_WHITESPACE","\n            ",79],["T_VARIABLE","$this",80],["T_OBJECT_OPERATOR","->",80],["T_STRING","logger",80],["T_OBJECT_OPERATOR","->",80],["T_STRING","error",80],"(",["T_VARIABLE","$e",80],["T_OBJECT_OPERATOR","->",80],["T_STRING","getMessage",80],"(",")",")",";",["T_WHITESPACE","\n        ",80],"}",["T_WHITESPACE","\n\n        ",81],["T_RETURN","return",83],["T_WHITESPACE"," ",83],["T_STRING","true",83],";",["T_WHITESPACE","\n    ",83],"}",["T_WHITESPACE","\n\n    ",84],["T_DOC_COMMENT","\/**\n     * @param Order $order\n     * @return void\n     *\/",86],["T_WHITESPACE","\n    ",89],["T_PROTECTED","protected",90],["T_WHITESPACE"," ",90],["T_FUNCTION","function",90],["T_WHITESPACE"," ",90],["T_STRING","prepareTemplate",90],"(",["T_STRING","Order",90],["T_WHITESPACE"," ",90],["T_VARIABLE","$order",90],")",["T_WHITESPACE","\n    ",90],"{",["T_WHITESPACE","\n        ",91],["T_VARIABLE","$this",92],["T_OBJECT_OPERATOR","->",92],["T_STRING","templateContainer",92],["T_OBJECT_OPERATOR","->",92],["T_STRING","setTemplateOptions",92],"(",["T_VARIABLE","$this",92],["T_OBJECT_OPERATOR","->",92],["T_STRING","getTemplateOptions",92],"(",")",")",";",["T_WHITESPACE","\n\n        ",92],["T_IF","if",94],["T_WHITESPACE"," ",94],"(",["T_VARIABLE","$order",94],["T_OBJECT_OPERATOR","->",94],["T_STRING","getCustomerIsGuest",94],"(",")",")",["T_WHITESPACE"," ",94],"{",["T_WHITESPACE","\n            ",94],["T_VARIABLE","$templateId",95],["T_WHITESPACE"," ",95],"=",["T_WHITESPACE"," ",95],["T_VARIABLE","$this",95],["T_OBJECT_OPERATOR","->",95],["T_STRING","identityContainer",95],["T_OBJECT_OPERATOR","->",95],["T_STRING","getGuestTemplateId",95],"(",")",";",["T_WHITESPACE","\n            ",95],["T_VARIABLE","$customerName",96],["T_WHITESPACE"," ",96],"=",["T_WHITESPACE"," ",96],["T_VARIABLE","$order",96],["T_OBJECT_OPERATOR","->",96],["T_STRING","getBillingAddress",96],"(",")",["T_OBJECT_OPERATOR","->",96],["T_STRING","getName",96],"(",")",";",["T_WHITESPACE","\n        ",96],"}",["T_WHITESPACE"," ",97],["T_ELSE","else",97],["T_WHITESPACE"," ",97],"{",["T_WHITESPACE","\n            ",97],["T_VARIABLE","$templateId",98],["T_WHITESPACE"," ",98],"=",["T_WHITESPACE"," ",98],["T_VARIABLE","$this",98],["T_OBJECT_OPERATOR","->",98],["T_STRING","identityContainer",98],["T_OBJECT_OPERATOR","->",98],["T_STRING","getTemplateId",98],"(",")",";",["T_WHITESPACE","\n            ",98],["T_VARIABLE","$customerName",99],["T_WHITESPACE"," ",99],"=",["T_WHITESPACE"," ",99],["T_VARIABLE","$order",99],["T_OBJECT_OPERATOR","->",99],["T_STRING","getCustomerName",99],"(",")",";",["T_WHITESPACE","\n        ",99],"}",["T_WHITESPACE","\n\n        ",100],["T_VARIABLE","$this",102],["T_OBJECT_OPERATOR","->",102],["T_STRING","identityContainer",102],["T_OBJECT_OPERATOR","->",102],["T_STRING","setCustomerName",102],"(",["T_VARIABLE","$customerName",102],")",";",["T_WHITESPACE","\n        ",102],["T_VARIABLE","$this",103],["T_OBJECT_OPERATOR","->",103],["T_STRING","identityContainer",103],["T_OBJECT_OPERATOR","->",103],["T_STRING","setCustomerEmail",103],"(",["T_VARIABLE","$order",103],["T_OBJECT_OPERATOR","->",103],["T_STRING","getCustomerEmail",103],"(",")",")",";",["T_WHITESPACE","\n        ",103],["T_VARIABLE","$this",104],["T_OBJECT_OPERATOR","->",104],["T_STRING","templateContainer",104],["T_OBJECT_OPERATOR","->",104],["T_STRING","setTemplateId",104],"(",["T_VARIABLE","$templateId",104],")",";",["T_WHITESPACE","\n    ",104],"}",["T_WHITESPACE","\n\n    ",105],["T_DOC_COMMENT","\/**\n     * @return Sender\n     *\/",107],["T_WHITESPACE","\n    ",109],["T_PROTECTED","protected",110],["T_WHITESPACE"," ",110],["T_FUNCTION","function",110],["T_WHITESPACE"," ",110],["T_STRING","getSender",110],"(",")",["T_WHITESPACE","\n    ",110],"{",["T_WHITESPACE","\n        ",111],["T_RETURN","return",112],["T_WHITESPACE"," ",112],["T_VARIABLE","$this",112],["T_OBJECT_OPERATOR","->",112],["T_STRING","senderBuilderFactory",112],["T_OBJECT_OPERATOR","->",112],["T_STRING","create",112],"(",["T_WHITESPACE","\n            ",112],"[",["T_WHITESPACE","\n                ",113],["T_CONSTANT_ENCAPSED_STRING","'templateContainer'",114],["T_WHITESPACE"," ",114],["T_DOUBLE_ARROW","=>",114],["T_WHITESPACE"," ",114],["T_VARIABLE","$this",114],["T_OBJECT_OPERATOR","->",114],["T_STRING","templateContainer",114],",",["T_WHITESPACE","\n                ",114],["T_CONSTANT_ENCAPSED_STRING","'identityContainer'",115],["T_WHITESPACE"," ",115],["T_DOUBLE_ARROW","=>",115],["T_WHITESPACE"," ",115],["T_VARIABLE","$this",115],["T_OBJECT_OPERATOR","->",115],["T_STRING","identityContainer",115],",",["T_WHITESPACE","\n            ",115],"]",["T_WHITESPACE","\n        ",116],")",";",["T_WHITESPACE","\n    ",117],"}",["T_WHITESPACE","\n\n    ",118],["T_DOC_COMMENT","\/**\n     * @return array\n     *\/",120],["T_WHITESPACE","\n    ",122],["T_PROTECTED","protected",123],["T_WHITESPACE"," ",123],["T_FUNCTION","function",123],["T_WHITESPACE"," ",123],["T_STRING","getTemplateOptions",123],"(",")",["T_WHITESPACE","\n    ",123],"{",["T_WHITESPACE","\n        ",124],["T_RETURN","return",125],["T_WHITESPACE"," ",125],"[",["T_WHITESPACE","\n            ",125],["T_CONSTANT_ENCAPSED_STRING","'area'",126],["T_WHITESPACE"," ",126],["T_DOUBLE_ARROW","=>",126],["T_WHITESPACE"," ",126],["T_NS_SEPARATOR","\\",126],["T_STRING","Magento",126],["T_NS_SEPARATOR","\\",126],["T_STRING","Framework",126],["T_NS_SEPARATOR","\\",126],["T_STRING","App",126],["T_NS_SEPARATOR","\\",126],["T_STRING","Area",126],["T_DOUBLE_COLON","::",126],["T_STRING","AREA_FRONTEND",126],",",["T_WHITESPACE","\n            ",126],["T_CONSTANT_ENCAPSED_STRING","'store'",127],["T_WHITESPACE"," ",127],["T_DOUBLE_ARROW","=>",127],["T_WHITESPACE"," ",127],["T_VARIABLE","$this",127],["T_OBJECT_OPERATOR","->",127],["T_STRING","identityContainer",127],["T_OBJECT_OPERATOR","->",127],["T_STRING","getStore",127],"(",")",["T_OBJECT_OPERATOR","->",127],["T_STRING","getStoreId",127],"(",")",["T_WHITESPACE","\n        ",127],"]",";",["T_WHITESPACE","\n    ",128],"}",["T_WHITESPACE","\n\n    ",129],["T_DOC_COMMENT","\/**\n     * @param Order $order\n     * @return string|null\n     *\/",131],["T_WHITESPACE","\n    ",134],["T_PROTECTED","protected",135],["T_WHITESPACE"," ",135],["T_FUNCTION","function",135],["T_WHITESPACE"," ",135],["T_STRING","getFormattedShippingAddress",135],"(",["T_VARIABLE","$order",135],")",["T_WHITESPACE","\n    ",135],"{",["T_WHITESPACE","\n        ",136],["T_RETURN","return",137],["T_WHITESPACE"," ",137],["T_VARIABLE","$order",137],["T_OBJECT_OPERATOR","->",137],["T_STRING","getIsVirtual",137],"(",")",["T_WHITESPACE","\n            ",137],"?",["T_WHITESPACE"," ",138],["T_STRING","null",138],["T_WHITESPACE","\n            ",138],":",["T_WHITESPACE"," ",139],["T_VARIABLE","$this",139],["T_OBJECT_OPERATOR","->",139],["T_STRING","addressRenderer",139],["T_OBJECT_OPERATOR","->",139],["T_STRING","format",139],"(",["T_VARIABLE","$order",139],["T_OBJECT_OPERATOR","->",139],["T_STRING","getShippingAddress",139],"(",")",",",["T_WHITESPACE"," ",139],["T_CONSTANT_ENCAPSED_STRING","'html'",139],")",";",["T_WHITESPACE","\n    ",139],"}",["T_WHITESPACE","\n\n    ",140],["T_DOC_COMMENT","\/**\n     * @param Order $order\n     * @return string|null\n     *\/",142],["T_WHITESPACE","\n    ",145],["T_PROTECTED","protected",146],["T_WHITESPACE"," ",146],["T_FUNCTION","function",146],["T_WHITESPACE"," ",146],["T_STRING","getFormattedBillingAddress",146],"(",["T_VARIABLE","$order",146],")",["T_WHITESPACE","\n    ",146],"{",["T_WHITESPACE","\n        ",147],["T_RETURN","return",148],["T_WHITESPACE"," ",148],["T_VARIABLE","$this",148],["T_OBJECT_OPERATOR","->",148],["T_STRING","addressRenderer",148],["T_OBJECT_OPERATOR","->",148],["T_STRING","format",148],"(",["T_VARIABLE","$order",148],["T_OBJECT_OPERATOR","->",148],["T_STRING","getBillingAddress",148],"(",")",",",["T_WHITESPACE"," ",148],["T_CONSTANT_ENCAPSED_STRING","'html'",148],")",";",["T_WHITESPACE","\n    ",148],"}",["T_WHITESPACE","\n",149],"}",["T_WHITESPACE","\n",150]]
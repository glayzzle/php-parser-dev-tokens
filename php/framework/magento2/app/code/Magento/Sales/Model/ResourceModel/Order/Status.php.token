[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Copyright \u00c2\u00a9 2013-2017 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n *\/",2],["T_WHITESPACE","\n",5],["T_NAMESPACE","namespace",6],["T_WHITESPACE"," ",6],["T_STRING","Magento",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Sales",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Model",6],["T_NS_SEPARATOR","\\",6],["T_STRING","ResourceModel",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Order",6],";",["T_WHITESPACE","\n\n",6],["T_USE","use",8],["T_WHITESPACE"," ",8],["T_STRING","Magento",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Framework",8],["T_NS_SEPARATOR","\\",8],["T_STRING","App",8],["T_NS_SEPARATOR","\\",8],["T_STRING","ResourceConnection",8],";",["T_WHITESPACE","\n",8],["T_USE","use",9],["T_WHITESPACE"," ",9],["T_STRING","Psr",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Log",9],["T_NS_SEPARATOR","\\",9],["T_STRING","LoggerInterface",9],["T_WHITESPACE"," ",9],["T_AS","as",9],["T_WHITESPACE"," ",9],["T_STRING","LogWriter",9],";",["T_WHITESPACE","\n",9],["T_USE","use",10],["T_WHITESPACE"," ",10],["T_STRING","Magento",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Framework",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Exception",10],["T_NS_SEPARATOR","\\",10],["T_STRING","LocalizedException",10],";",["T_WHITESPACE","\n",10],["T_USE","use",11],["T_WHITESPACE"," ",11],["T_STRING","Magento",11],["T_NS_SEPARATOR","\\",11],["T_STRING","SalesSequence",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Model",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Manager",11],";",["T_WHITESPACE","\n",11],["T_USE","use",12],["T_WHITESPACE"," ",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Magento",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Sales",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Model",12],["T_NS_SEPARATOR","\\",12],["T_STRING","ResourceModel",12],["T_NS_SEPARATOR","\\",12],["T_STRING","EntityAbstract",12],";",["T_WHITESPACE","\n",12],["T_USE","use",13],["T_WHITESPACE"," ",13],["T_NS_SEPARATOR","\\",13],["T_STRING","Magento",13],["T_NS_SEPARATOR","\\",13],["T_STRING","Framework",13],["T_NS_SEPARATOR","\\",13],["T_STRING","Model",13],["T_NS_SEPARATOR","\\",13],["T_STRING","ResourceModel",13],["T_NS_SEPARATOR","\\",13],["T_STRING","Db",13],["T_NS_SEPARATOR","\\",13],["T_STRING","VersionControl",13],["T_NS_SEPARATOR","\\",13],["T_STRING","Snapshot",13],";",["T_WHITESPACE","\n\n",13],["T_DOC_COMMENT","\/**\n * Order status resource model\n *\n * @author      Magento Core Team <core@magentocommerce.com>\n *\/",15],["T_WHITESPACE","\n",19],["T_CLASS","class",20],["T_WHITESPACE"," ",20],["T_STRING","Status",20],["T_WHITESPACE"," ",20],["T_EXTENDS","extends",20],["T_WHITESPACE"," ",20],["T_NS_SEPARATOR","\\",20],["T_STRING","Magento",20],["T_NS_SEPARATOR","\\",20],["T_STRING","Framework",20],["T_NS_SEPARATOR","\\",20],["T_STRING","Model",20],["T_NS_SEPARATOR","\\",20],["T_STRING","ResourceModel",20],["T_NS_SEPARATOR","\\",20],["T_STRING","Db",20],["T_NS_SEPARATOR","\\",20],["T_STRING","VersionControl",20],["T_NS_SEPARATOR","\\",20],["T_STRING","AbstractDb",20],["T_WHITESPACE","\n",20],"{",["T_WHITESPACE","\n    ",21],["T_DOC_COMMENT","\/**\n     * Status labels table\n     *\n     * @var string\n     *\/",22],["T_WHITESPACE","\n    ",26],["T_PROTECTED","protected",27],["T_WHITESPACE"," ",27],["T_VARIABLE","$labelsTable",27],";",["T_WHITESPACE","\n\n    ",27],["T_DOC_COMMENT","\/**\n     * Status state table\n     *\n     * @var string\n     *\/",29],["T_WHITESPACE","\n    ",33],["T_PROTECTED","protected",34],["T_WHITESPACE"," ",34],["T_VARIABLE","$stateTable",34],";",["T_WHITESPACE","\n\n    ",34],["T_DOC_COMMENT","\/**\n     * Internal constructor\n     *\n     * @return void\n     *\/",36],["T_WHITESPACE","\n    ",40],["T_PROTECTED","protected",41],["T_WHITESPACE"," ",41],["T_FUNCTION","function",41],["T_WHITESPACE"," ",41],["T_STRING","_construct",41],"(",")",["T_WHITESPACE","\n    ",41],"{",["T_WHITESPACE","\n        ",42],["T_VARIABLE","$this",43],["T_OBJECT_OPERATOR","->",43],["T_STRING","_init",43],"(",["T_CONSTANT_ENCAPSED_STRING","'sales_order_status'",43],",",["T_WHITESPACE"," ",43],["T_CONSTANT_ENCAPSED_STRING","'status'",43],")",";",["T_WHITESPACE","\n        ",43],["T_VARIABLE","$this",44],["T_OBJECT_OPERATOR","->",44],["T_STRING","_isPkAutoIncrement",44],["T_WHITESPACE"," ",44],"=",["T_WHITESPACE"," ",44],["T_STRING","false",44],";",["T_WHITESPACE","\n        ",44],["T_VARIABLE","$this",45],["T_OBJECT_OPERATOR","->",45],["T_STRING","labelsTable",45],["T_WHITESPACE"," ",45],"=",["T_WHITESPACE"," ",45],["T_VARIABLE","$this",45],["T_OBJECT_OPERATOR","->",45],["T_STRING","getTable",45],"(",["T_CONSTANT_ENCAPSED_STRING","'sales_order_status_label'",45],")",";",["T_WHITESPACE","\n        ",45],["T_VARIABLE","$this",46],["T_OBJECT_OPERATOR","->",46],["T_STRING","stateTable",46],["T_WHITESPACE"," ",46],"=",["T_WHITESPACE"," ",46],["T_VARIABLE","$this",46],["T_OBJECT_OPERATOR","->",46],["T_STRING","getTable",46],"(",["T_CONSTANT_ENCAPSED_STRING","'sales_order_status_state'",46],")",";",["T_WHITESPACE","\n    ",46],"}",["T_WHITESPACE","\n\n    ",47],["T_DOC_COMMENT","\/**\n     * Retrieve select object for load object data\n     *\n     * @param string $field\n     * @param mixed $value\n     * @param \\Magento\\Framework\\Model\\AbstractModel $object\n     * @return \\Magento\\Framework\\DB\\Select\n     *\/",49],["T_WHITESPACE","\n    ",56],["T_PROTECTED","protected",57],["T_WHITESPACE"," ",57],["T_FUNCTION","function",57],["T_WHITESPACE"," ",57],["T_STRING","_getLoadSelect",57],"(",["T_VARIABLE","$field",57],",",["T_WHITESPACE"," ",57],["T_VARIABLE","$value",57],",",["T_WHITESPACE"," ",57],["T_VARIABLE","$object",57],")",["T_WHITESPACE","\n    ",57],"{",["T_WHITESPACE","\n        ",58],["T_IF","if",59],["T_WHITESPACE"," ",59],"(",["T_VARIABLE","$field",59],["T_WHITESPACE"," ",59],["T_IS_EQUAL","==",59],["T_WHITESPACE"," ",59],["T_CONSTANT_ENCAPSED_STRING","'default_state'",59],")",["T_WHITESPACE"," ",59],"{",["T_WHITESPACE","\n            ",59],["T_VARIABLE","$select",60],["T_WHITESPACE"," ",60],"=",["T_WHITESPACE"," ",60],["T_VARIABLE","$this",60],["T_OBJECT_OPERATOR","->",60],["T_STRING","getConnection",60],"(",")",["T_OBJECT_OPERATOR","->",60],["T_STRING","select",60],"(",")",["T_OBJECT_OPERATOR","->",60],["T_STRING","from",60],"(",["T_WHITESPACE","\n                ",60],["T_VARIABLE","$this",61],["T_OBJECT_OPERATOR","->",61],["T_STRING","getMainTable",61],"(",")",",",["T_WHITESPACE","\n                ",61],"[",["T_CONSTANT_ENCAPSED_STRING","'label'",62],"]",["T_WHITESPACE","\n            ",62],")",["T_OBJECT_OPERATOR","->",63],["T_STRING","join",63],"(",["T_WHITESPACE","\n                ",63],"[",["T_CONSTANT_ENCAPSED_STRING","'state_table'",64],["T_WHITESPACE"," ",64],["T_DOUBLE_ARROW","=>",64],["T_WHITESPACE"," ",64],["T_VARIABLE","$this",64],["T_OBJECT_OPERATOR","->",64],["T_STRING","stateTable",64],"]",",",["T_WHITESPACE","\n                ",64],["T_VARIABLE","$this",65],["T_OBJECT_OPERATOR","->",65],["T_STRING","getMainTable",65],"(",")",["T_WHITESPACE"," ",65],".",["T_WHITESPACE"," ",65],["T_CONSTANT_ENCAPSED_STRING","'.status = state_table.status'",65],",",["T_WHITESPACE","\n                ",65],["T_CONSTANT_ENCAPSED_STRING","'status'",66],["T_WHITESPACE","\n            ",66],")",["T_OBJECT_OPERATOR","->",67],["T_STRING","where",67],"(",["T_WHITESPACE","\n                ",67],["T_CONSTANT_ENCAPSED_STRING","'state_table.state = ?'",68],",",["T_WHITESPACE","\n                ",68],["T_VARIABLE","$value",69],["T_WHITESPACE","\n            ",69],")",["T_OBJECT_OPERATOR","->",70],["T_STRING","order",70],"(",["T_WHITESPACE","\n                ",70],["T_CONSTANT_ENCAPSED_STRING","'state_table.is_default DESC'",71],["T_WHITESPACE","\n            ",71],")",["T_OBJECT_OPERATOR","->",72],["T_STRING","limit",72],"(",["T_WHITESPACE","\n                ",72],["T_LNUMBER","1",73],["T_WHITESPACE","\n            ",73],")",";",["T_WHITESPACE","\n        ",74],"}",["T_WHITESPACE"," ",75],["T_ELSE","else",75],["T_WHITESPACE"," ",75],"{",["T_WHITESPACE","\n            ",75],["T_VARIABLE","$select",76],["T_WHITESPACE"," ",76],"=",["T_WHITESPACE"," ",76],["T_STRING","parent",76],["T_DOUBLE_COLON","::",76],["T_STRING","_getLoadSelect",76],"(",["T_VARIABLE","$field",76],",",["T_WHITESPACE"," ",76],["T_VARIABLE","$value",76],",",["T_WHITESPACE"," ",76],["T_VARIABLE","$object",76],")",";",["T_WHITESPACE","\n        ",76],"}",["T_WHITESPACE","\n        ",77],["T_RETURN","return",78],["T_WHITESPACE"," ",78],["T_VARIABLE","$select",78],";",["T_WHITESPACE","\n    ",78],"}",["T_WHITESPACE","\n\n    ",79],["T_DOC_COMMENT","\/**\n     * Store labels getter\n     *\n     * @param \\Magento\\Sales\\Model\\Order\\Status $status\n     * @return array\n     *\/",81],["T_WHITESPACE","\n    ",86],["T_PUBLIC","public",87],["T_WHITESPACE"," ",87],["T_FUNCTION","function",87],["T_WHITESPACE"," ",87],["T_STRING","getStoreLabels",87],"(",["T_NS_SEPARATOR","\\",87],["T_STRING","Magento",87],["T_NS_SEPARATOR","\\",87],["T_STRING","Sales",87],["T_NS_SEPARATOR","\\",87],["T_STRING","Model",87],["T_NS_SEPARATOR","\\",87],["T_STRING","Order",87],["T_NS_SEPARATOR","\\",87],["T_STRING","Status",87],["T_WHITESPACE"," ",87],["T_VARIABLE","$status",87],")",["T_WHITESPACE","\n    ",87],"{",["T_WHITESPACE","\n        ",88],["T_VARIABLE","$select",89],["T_WHITESPACE"," ",89],"=",["T_WHITESPACE"," ",89],["T_VARIABLE","$this",89],["T_OBJECT_OPERATOR","->",89],["T_STRING","getConnection",89],"(",")",["T_OBJECT_OPERATOR","->",89],["T_STRING","select",89],"(",")",["T_WHITESPACE","\n            ",89],["T_OBJECT_OPERATOR","->",90],["T_STRING","from",90],"(","[",["T_CONSTANT_ENCAPSED_STRING","'ssl'",90],["T_WHITESPACE"," ",90],["T_DOUBLE_ARROW","=>",90],["T_WHITESPACE"," ",90],["T_VARIABLE","$this",90],["T_OBJECT_OPERATOR","->",90],["T_STRING","labelsTable",90],"]",",",["T_WHITESPACE"," ",90],"[","]",")",["T_WHITESPACE","\n            ",90],["T_OBJECT_OPERATOR","->",91],["T_STRING","where",91],"(",["T_CONSTANT_ENCAPSED_STRING","'status = ?'",91],",",["T_WHITESPACE"," ",91],["T_VARIABLE","$status",91],["T_OBJECT_OPERATOR","->",91],["T_STRING","getStatus",91],"(",")",")",["T_WHITESPACE","\n            ",91],["T_OBJECT_OPERATOR","->",92],["T_STRING","columns",92],"(","[",["T_WHITESPACE","\n                ",92],["T_CONSTANT_ENCAPSED_STRING","'store_id'",93],",",["T_WHITESPACE","\n                ",93],["T_CONSTANT_ENCAPSED_STRING","'label'",94],",",["T_WHITESPACE","\n            ",94],"]",")",";",["T_WHITESPACE","\n        ",95],["T_RETURN","return",96],["T_WHITESPACE"," ",96],["T_VARIABLE","$this",96],["T_OBJECT_OPERATOR","->",96],["T_STRING","getConnection",96],"(",")",["T_OBJECT_OPERATOR","->",96],["T_STRING","fetchPairs",96],"(",["T_VARIABLE","$select",96],")",";",["T_WHITESPACE","\n    ",96],"}",["T_WHITESPACE","\n\n    ",97],["T_DOC_COMMENT","\/**\n     * Save status labels per store\n     *\n     * @param \\Magento\\Framework\\Model\\AbstractModel $object\n     * @return $this\n     *\/",99],["T_WHITESPACE","\n    ",104],["T_PROTECTED","protected",105],["T_WHITESPACE"," ",105],["T_FUNCTION","function",105],["T_WHITESPACE"," ",105],["T_STRING","_afterSave",105],"(",["T_NS_SEPARATOR","\\",105],["T_STRING","Magento",105],["T_NS_SEPARATOR","\\",105],["T_STRING","Framework",105],["T_NS_SEPARATOR","\\",105],["T_STRING","Model",105],["T_NS_SEPARATOR","\\",105],["T_STRING","AbstractModel",105],["T_WHITESPACE"," ",105],["T_VARIABLE","$object",105],")",["T_WHITESPACE","\n    ",105],"{",["T_WHITESPACE","\n        ",106],["T_IF","if",107],["T_WHITESPACE"," ",107],"(",["T_VARIABLE","$object",107],["T_OBJECT_OPERATOR","->",107],["T_STRING","hasStoreLabels",107],"(",")",")",["T_WHITESPACE"," ",107],"{",["T_WHITESPACE","\n            ",107],["T_VARIABLE","$labels",108],["T_WHITESPACE"," ",108],"=",["T_WHITESPACE"," ",108],["T_VARIABLE","$object",108],["T_OBJECT_OPERATOR","->",108],["T_STRING","getStoreLabels",108],"(",")",";",["T_WHITESPACE","\n            ",108],["T_VARIABLE","$this",109],["T_OBJECT_OPERATOR","->",109],["T_STRING","getConnection",109],"(",")",["T_OBJECT_OPERATOR","->",109],["T_STRING","delete",109],"(",["T_VARIABLE","$this",109],["T_OBJECT_OPERATOR","->",109],["T_STRING","labelsTable",109],",",["T_WHITESPACE"," ",109],"[",["T_CONSTANT_ENCAPSED_STRING","'status = ?'",109],["T_WHITESPACE"," ",109],["T_DOUBLE_ARROW","=>",109],["T_WHITESPACE"," ",109],["T_VARIABLE","$object",109],["T_OBJECT_OPERATOR","->",109],["T_STRING","getStatus",109],"(",")","]",")",";",["T_WHITESPACE","\n            ",109],["T_VARIABLE","$data",110],["T_WHITESPACE"," ",110],"=",["T_WHITESPACE"," ",110],"[","]",";",["T_WHITESPACE","\n            ",110],["T_FOREACH","foreach",111],["T_WHITESPACE"," ",111],"(",["T_VARIABLE","$labels",111],["T_WHITESPACE"," ",111],["T_AS","as",111],["T_WHITESPACE"," ",111],["T_VARIABLE","$storeId",111],["T_WHITESPACE"," ",111],["T_DOUBLE_ARROW","=>",111],["T_WHITESPACE"," ",111],["T_VARIABLE","$label",111],")",["T_WHITESPACE"," ",111],"{",["T_WHITESPACE","\n                ",111],["T_IF","if",112],["T_WHITESPACE"," ",112],"(",["T_EMPTY","empty",112],"(",["T_VARIABLE","$label",112],")",")",["T_WHITESPACE"," ",112],"{",["T_WHITESPACE","\n                    ",112],["T_CONTINUE","continue",113],";",["T_WHITESPACE","\n                ",113],"}",["T_WHITESPACE","\n                ",114],["T_VARIABLE","$data",115],"[","]",["T_WHITESPACE"," ",115],"=",["T_WHITESPACE"," ",115],"[",["T_CONSTANT_ENCAPSED_STRING","'status'",115],["T_WHITESPACE"," ",115],["T_DOUBLE_ARROW","=>",115],["T_WHITESPACE"," ",115],["T_VARIABLE","$object",115],["T_OBJECT_OPERATOR","->",115],["T_STRING","getStatus",115],"(",")",",",["T_WHITESPACE"," ",115],["T_CONSTANT_ENCAPSED_STRING","'store_id'",115],["T_WHITESPACE"," ",115],["T_DOUBLE_ARROW","=>",115],["T_WHITESPACE"," ",115],["T_VARIABLE","$storeId",115],",",["T_WHITESPACE"," ",115],["T_CONSTANT_ENCAPSED_STRING","'label'",115],["T_WHITESPACE"," ",115],["T_DOUBLE_ARROW","=>",115],["T_WHITESPACE"," ",115],["T_VARIABLE","$label",115],"]",";",["T_WHITESPACE","\n            ",115],"}",["T_WHITESPACE","\n            ",116],["T_IF","if",117],["T_WHITESPACE"," ",117],"(","!",["T_EMPTY","empty",117],"(",["T_VARIABLE","$data",117],")",")",["T_WHITESPACE"," ",117],"{",["T_WHITESPACE","\n                ",117],["T_VARIABLE","$this",118],["T_OBJECT_OPERATOR","->",118],["T_STRING","getConnection",118],"(",")",["T_OBJECT_OPERATOR","->",118],["T_STRING","insertMultiple",118],"(",["T_VARIABLE","$this",118],["T_OBJECT_OPERATOR","->",118],["T_STRING","labelsTable",118],",",["T_WHITESPACE"," ",118],["T_VARIABLE","$data",118],")",";",["T_WHITESPACE","\n            ",118],"}",["T_WHITESPACE","\n        ",119],"}",["T_WHITESPACE","\n        ",120],["T_RETURN","return",121],["T_WHITESPACE"," ",121],["T_STRING","parent",121],["T_DOUBLE_COLON","::",121],["T_STRING","_afterSave",121],"(",["T_VARIABLE","$object",121],")",";",["T_WHITESPACE","\n    ",121],"}",["T_WHITESPACE","\n\n    ",122],["T_DOC_COMMENT","\/**\n     * Assign order status to order state\n     *\n     * @param string $status\n     * @param string $state\n     * @param bool $isDefault\n     * @param bool $visibleOnFront\n     * @return $this\n     *\/",124],["T_WHITESPACE","\n    ",132],["T_PUBLIC","public",133],["T_WHITESPACE"," ",133],["T_FUNCTION","function",133],["T_WHITESPACE"," ",133],["T_STRING","assignState",133],"(",["T_VARIABLE","$status",133],",",["T_WHITESPACE"," ",133],["T_VARIABLE","$state",133],",",["T_WHITESPACE"," ",133],["T_VARIABLE","$isDefault",133],",",["T_WHITESPACE"," ",133],["T_VARIABLE","$visibleOnFront",133],["T_WHITESPACE"," ",133],"=",["T_WHITESPACE"," ",133],["T_STRING","false",133],")",["T_WHITESPACE","\n    ",133],"{",["T_WHITESPACE","\n        ",134],["T_IF","if",135],["T_WHITESPACE"," ",135],"(",["T_VARIABLE","$isDefault",135],")",["T_WHITESPACE"," ",135],"{",["T_WHITESPACE","\n            ",135],["T_VARIABLE","$this",136],["T_OBJECT_OPERATOR","->",136],["T_STRING","getConnection",136],"(",")",["T_OBJECT_OPERATOR","->",136],["T_STRING","update",136],"(",["T_WHITESPACE","\n                ",136],["T_VARIABLE","$this",137],["T_OBJECT_OPERATOR","->",137],["T_STRING","stateTable",137],",",["T_WHITESPACE","\n                ",137],"[",["T_CONSTANT_ENCAPSED_STRING","'is_default'",138],["T_WHITESPACE"," ",138],["T_DOUBLE_ARROW","=>",138],["T_WHITESPACE"," ",138],["T_LNUMBER","0",138],"]",",",["T_WHITESPACE","\n                ",138],"[",["T_CONSTANT_ENCAPSED_STRING","'state = ?'",139],["T_WHITESPACE"," ",139],["T_DOUBLE_ARROW","=>",139],["T_WHITESPACE"," ",139],["T_VARIABLE","$state",139],"]",["T_WHITESPACE","\n            ",139],")",";",["T_WHITESPACE","\n        ",140],"}",["T_WHITESPACE","\n        ",141],["T_VARIABLE","$this",142],["T_OBJECT_OPERATOR","->",142],["T_STRING","getConnection",142],"(",")",["T_OBJECT_OPERATOR","->",142],["T_STRING","insertOnDuplicate",142],"(",["T_WHITESPACE","\n            ",142],["T_VARIABLE","$this",143],["T_OBJECT_OPERATOR","->",143],["T_STRING","stateTable",143],",",["T_WHITESPACE","\n            ",143],"[",["T_WHITESPACE","\n                ",144],["T_CONSTANT_ENCAPSED_STRING","'status'",145],["T_WHITESPACE"," ",145],["T_DOUBLE_ARROW","=>",145],["T_WHITESPACE"," ",145],["T_VARIABLE","$status",145],",",["T_WHITESPACE","\n                ",145],["T_CONSTANT_ENCAPSED_STRING","'state'",146],["T_WHITESPACE"," ",146],["T_DOUBLE_ARROW","=>",146],["T_WHITESPACE"," ",146],["T_VARIABLE","$state",146],",",["T_WHITESPACE","\n                ",146],["T_CONSTANT_ENCAPSED_STRING","'is_default'",147],["T_WHITESPACE"," ",147],["T_DOUBLE_ARROW","=>",147],["T_WHITESPACE"," ",147],["T_INT_CAST","(int)",147],["T_VARIABLE","$isDefault",147],",",["T_WHITESPACE","\n                ",147],["T_CONSTANT_ENCAPSED_STRING","'visible_on_front'",148],["T_WHITESPACE"," ",148],["T_DOUBLE_ARROW","=>",148],["T_WHITESPACE"," ",148],["T_INT_CAST","(int)",148],["T_VARIABLE","$visibleOnFront",148],["T_WHITESPACE","\n            ",148],"]",["T_WHITESPACE","\n        ",149],")",";",["T_WHITESPACE","\n        ",150],["T_RETURN","return",151],["T_WHITESPACE"," ",151],["T_VARIABLE","$this",151],";",["T_WHITESPACE","\n    ",151],"}",["T_WHITESPACE","\n\n    ",152],["T_DOC_COMMENT","\/**\n     * Unassign order status from order state\n     *\n     * @param string $status\n     * @param string $state\n     * @return $this\n     * @throws \\Magento\\Framework\\Exception\\LocalizedException\n     *\/",154],["T_WHITESPACE","\n    ",161],["T_PUBLIC","public",162],["T_WHITESPACE"," ",162],["T_FUNCTION","function",162],["T_WHITESPACE"," ",162],["T_STRING","unassignState",162],"(",["T_VARIABLE","$status",162],",",["T_WHITESPACE"," ",162],["T_VARIABLE","$state",162],")",["T_WHITESPACE","\n    ",162],"{",["T_WHITESPACE","\n        ",163],["T_VARIABLE","$this",164],["T_OBJECT_OPERATOR","->",164],["T_STRING","getConnection",164],"(",")",["T_OBJECT_OPERATOR","->",164],["T_STRING","beginTransaction",164],"(",")",";",["T_WHITESPACE","\n        ",164],["T_TRY","try",165],["T_WHITESPACE"," ",165],"{",["T_WHITESPACE","\n            ",165],["T_VARIABLE","$isStateDefault",166],["T_WHITESPACE"," ",166],"=",["T_WHITESPACE"," ",166],["T_VARIABLE","$this",166],["T_OBJECT_OPERATOR","->",166],["T_STRING","checkIsStateDefault",166],"(",["T_VARIABLE","$state",166],",",["T_WHITESPACE"," ",166],["T_VARIABLE","$status",166],")",";",["T_WHITESPACE","\n            ",166],["T_VARIABLE","$this",167],["T_OBJECT_OPERATOR","->",167],["T_STRING","getConnection",167],"(",")",["T_OBJECT_OPERATOR","->",167],["T_STRING","delete",167],"(",["T_WHITESPACE","\n                ",167],["T_VARIABLE","$this",168],["T_OBJECT_OPERATOR","->",168],["T_STRING","stateTable",168],",",["T_WHITESPACE","\n                ",168],"[",["T_WHITESPACE","\n                    ",169],["T_CONSTANT_ENCAPSED_STRING","'state = ?'",170],["T_WHITESPACE"," ",170],["T_DOUBLE_ARROW","=>",170],["T_WHITESPACE"," ",170],["T_VARIABLE","$state",170],",",["T_WHITESPACE","\n                    ",170],["T_CONSTANT_ENCAPSED_STRING","'status = ?'",171],["T_WHITESPACE"," ",171],["T_DOUBLE_ARROW","=>",171],["T_WHITESPACE"," ",171],["T_VARIABLE","$status",171],["T_WHITESPACE","\n                ",171],"]",["T_WHITESPACE","\n            ",172],")",";",["T_WHITESPACE","\n            ",173],["T_IF","if",174],["T_WHITESPACE"," ",174],"(",["T_VARIABLE","$isStateDefault",174],")",["T_WHITESPACE"," ",174],"{",["T_WHITESPACE","\n                ",174],["T_VARIABLE","$newDefaultStatus",175],["T_WHITESPACE"," ",175],"=",["T_WHITESPACE"," ",175],["T_VARIABLE","$this",175],["T_OBJECT_OPERATOR","->",175],["T_STRING","getStatusByState",175],"(",["T_VARIABLE","$state",175],")",";",["T_WHITESPACE","\n                ",175],["T_IF","if",176],["T_WHITESPACE"," ",176],"(",["T_VARIABLE","$newDefaultStatus",176],")",["T_WHITESPACE"," ",176],"{",["T_WHITESPACE","\n                    ",176],["T_VARIABLE","$this",177],["T_OBJECT_OPERATOR","->",177],["T_STRING","getConnection",177],"(",")",["T_OBJECT_OPERATOR","->",177],["T_STRING","update",177],"(",["T_WHITESPACE","\n                        ",177],["T_VARIABLE","$this",178],["T_OBJECT_OPERATOR","->",178],["T_STRING","stateTable",178],",",["T_WHITESPACE","\n                        ",178],"[",["T_CONSTANT_ENCAPSED_STRING","'is_default'",179],["T_WHITESPACE"," ",179],["T_DOUBLE_ARROW","=>",179],["T_WHITESPACE"," ",179],["T_LNUMBER","1",179],"]",",",["T_WHITESPACE","\n                        ",179],"[",["T_WHITESPACE","\n                            ",180],["T_CONSTANT_ENCAPSED_STRING","'state = ?'",181],["T_WHITESPACE"," ",181],["T_DOUBLE_ARROW","=>",181],["T_WHITESPACE"," ",181],["T_VARIABLE","$state",181],",",["T_WHITESPACE","\n                            ",181],["T_CONSTANT_ENCAPSED_STRING","'status = ?'",182],["T_WHITESPACE"," ",182],["T_DOUBLE_ARROW","=>",182],["T_WHITESPACE"," ",182],["T_VARIABLE","$newDefaultStatus",182],["T_WHITESPACE","\n                        ",182],"]",["T_WHITESPACE","\n                    ",183],")",";",["T_WHITESPACE","\n                ",184],"}",["T_WHITESPACE","\n            ",185],"}",["T_WHITESPACE","\n            ",186],["T_VARIABLE","$this",187],["T_OBJECT_OPERATOR","->",187],["T_STRING","getConnection",187],"(",")",["T_OBJECT_OPERATOR","->",187],["T_STRING","commit",187],"(",")",";",["T_WHITESPACE","\n        ",187],"}",["T_WHITESPACE"," ",188],["T_CATCH","catch",188],["T_WHITESPACE"," ",188],"(",["T_NS_SEPARATOR","\\",188],["T_STRING","Exception",188],["T_WHITESPACE"," ",188],["T_VARIABLE","$e",188],")",["T_WHITESPACE"," ",188],"{",["T_WHITESPACE","\n            ",188],["T_VARIABLE","$this",189],["T_OBJECT_OPERATOR","->",189],["T_STRING","getConnection",189],"(",")",["T_OBJECT_OPERATOR","->",189],["T_STRING","rollBack",189],"(",")",";",["T_WHITESPACE","\n            ",189],["T_THROW","throw",190],["T_WHITESPACE"," ",190],["T_NEW","new",190],["T_WHITESPACE"," ",190],["T_STRING","LocalizedException",190],"(",["T_STRING","__",190],"(",["T_CONSTANT_ENCAPSED_STRING","'Cannot unassign status from state'",190],")",")",";",["T_WHITESPACE","\n        ",190],"}",["T_WHITESPACE","\n\n        ",191],["T_RETURN","return",193],["T_WHITESPACE"," ",193],["T_VARIABLE","$this",193],";",["T_WHITESPACE","\n    ",193],"}",["T_WHITESPACE","\n\n    ",194],["T_DOC_COMMENT","\/**\n     * Check is this state last\n     *\n     * @param string $state\n     * @return bool\n     *\/",196],["T_WHITESPACE","\n    ",201],["T_PUBLIC","public",202],["T_WHITESPACE"," ",202],["T_FUNCTION","function",202],["T_WHITESPACE"," ",202],["T_STRING","checkIsStateLast",202],"(",["T_VARIABLE","$state",202],")",["T_WHITESPACE","\n    ",202],"{",["T_WHITESPACE","\n        ",203],["T_RETURN","return",204],["T_WHITESPACE"," ",204],"(",["T_LNUMBER","1",204],["T_WHITESPACE"," ",204],["T_IS_EQUAL","==",204],["T_WHITESPACE"," ",204],["T_VARIABLE","$this",204],["T_OBJECT_OPERATOR","->",204],["T_STRING","getConnection",204],"(",")",["T_OBJECT_OPERATOR","->",204],["T_STRING","fetchOne",204],"(",["T_WHITESPACE","\n            ",204],["T_VARIABLE","$this",205],["T_OBJECT_OPERATOR","->",205],["T_STRING","getConnection",205],"(",")",["T_OBJECT_OPERATOR","->",205],["T_STRING","select",205],"(",")",["T_WHITESPACE","\n                ",205],["T_OBJECT_OPERATOR","->",206],["T_STRING","from",206],"(","[",["T_CONSTANT_ENCAPSED_STRING","'sss'",206],["T_WHITESPACE"," ",206],["T_DOUBLE_ARROW","=>",206],["T_WHITESPACE"," ",206],["T_VARIABLE","$this",206],["T_OBJECT_OPERATOR","->",206],["T_STRING","stateTable",206],"]",",",["T_WHITESPACE"," ",206],"[","]",")",["T_WHITESPACE","\n                ",206],["T_OBJECT_OPERATOR","->",207],["T_STRING","where",207],"(",["T_CONSTANT_ENCAPSED_STRING","'state = ?'",207],",",["T_WHITESPACE"," ",207],["T_VARIABLE","$state",207],")",["T_WHITESPACE","\n                ",207],["T_OBJECT_OPERATOR","->",208],["T_STRING","columns",208],"(","[",["T_NEW","new",208],["T_NS_SEPARATOR","\\",208],["T_STRING","Zend_Db_Expr",208],"(",["T_CONSTANT_ENCAPSED_STRING","'COUNT(1)'",208],")","]",")",["T_WHITESPACE","\n        ",208],")",")",";",["T_WHITESPACE","\n    ",209],"}",["T_WHITESPACE","\n\n    ",210],["T_DOC_COMMENT","\/**\n     * Check is this status used in orders\n     *\n     * @param string $status\n     * @return bool\n     *\/",212],["T_WHITESPACE","\n    ",217],["T_PUBLIC","public",218],["T_WHITESPACE"," ",218],["T_FUNCTION","function",218],["T_WHITESPACE"," ",218],["T_STRING","checkIsStatusUsed",218],"(",["T_VARIABLE","$status",218],")",["T_WHITESPACE","\n    ",218],"{",["T_WHITESPACE","\n        ",219],["T_RETURN","return",220],["T_WHITESPACE"," ",220],["T_BOOL_CAST","(bool)",220],["T_VARIABLE","$this",220],["T_OBJECT_OPERATOR","->",220],["T_STRING","getConnection",220],"(",")",["T_OBJECT_OPERATOR","->",220],["T_STRING","fetchOne",220],"(",["T_WHITESPACE","\n            ",220],["T_VARIABLE","$this",221],["T_OBJECT_OPERATOR","->",221],["T_STRING","getConnection",221],"(",")",["T_OBJECT_OPERATOR","->",221],["T_STRING","select",221],"(",")",["T_WHITESPACE","\n                ",221],["T_OBJECT_OPERATOR","->",222],["T_STRING","from",222],"(","[",["T_CONSTANT_ENCAPSED_STRING","'sfo'",222],["T_WHITESPACE"," ",222],["T_DOUBLE_ARROW","=>",222],["T_WHITESPACE"," ",222],["T_VARIABLE","$this",222],["T_OBJECT_OPERATOR","->",222],["T_STRING","getTable",222],"(",["T_CONSTANT_ENCAPSED_STRING","'sales_order'",222],")","]",",",["T_WHITESPACE"," ",222],"[","]",")",["T_WHITESPACE","\n                ",222],["T_OBJECT_OPERATOR","->",223],["T_STRING","where",223],"(",["T_CONSTANT_ENCAPSED_STRING","'status = ?'",223],",",["T_WHITESPACE"," ",223],["T_VARIABLE","$status",223],")",["T_WHITESPACE","\n                ",223],["T_OBJECT_OPERATOR","->",224],["T_STRING","limit",224],"(",["T_LNUMBER","1",224],")",["T_WHITESPACE","\n                ",224],["T_OBJECT_OPERATOR","->",225],["T_STRING","columns",225],"(","[",["T_NEW","new",225],["T_WHITESPACE"," ",225],["T_NS_SEPARATOR","\\",225],["T_STRING","Zend_Db_Expr",225],"(",["T_LNUMBER","1",225],")","]",")",["T_WHITESPACE","\n        ",225],")",";",["T_WHITESPACE","\n    ",226],"}",["T_WHITESPACE","\n\n    ",227],["T_DOC_COMMENT","\/**\n     * Check is this pair of state and status default\n     *\n     * @param string $state\n     * @param string $status\n     * @return bool\n     *\/",229],["T_WHITESPACE","\n    ",235],["T_PROTECTED","protected",236],["T_WHITESPACE"," ",236],["T_FUNCTION","function",236],["T_WHITESPACE"," ",236],["T_STRING","checkIsStateDefault",236],"(",["T_VARIABLE","$state",236],",",["T_WHITESPACE"," ",236],["T_VARIABLE","$status",236],")",["T_WHITESPACE","\n    ",236],"{",["T_WHITESPACE","\n        ",237],["T_RETURN","return",238],["T_WHITESPACE"," ",238],["T_BOOL_CAST","(bool)",238],["T_VARIABLE","$this",238],["T_OBJECT_OPERATOR","->",238],["T_STRING","getConnection",238],"(",")",["T_OBJECT_OPERATOR","->",238],["T_STRING","fetchOne",238],"(",["T_WHITESPACE","\n            ",238],["T_VARIABLE","$this",239],["T_OBJECT_OPERATOR","->",239],["T_STRING","getConnection",239],"(",")",["T_OBJECT_OPERATOR","->",239],["T_STRING","select",239],"(",")",["T_WHITESPACE","\n                ",239],["T_OBJECT_OPERATOR","->",240],["T_STRING","from",240],"(","[",["T_CONSTANT_ENCAPSED_STRING","'sss'",240],["T_WHITESPACE"," ",240],["T_DOUBLE_ARROW","=>",240],["T_WHITESPACE"," ",240],["T_VARIABLE","$this",240],["T_OBJECT_OPERATOR","->",240],["T_STRING","stateTable",240],"]",",",["T_WHITESPACE"," ",240],"[","]",")",["T_WHITESPACE","\n                ",240],["T_OBJECT_OPERATOR","->",241],["T_STRING","where",241],"(",["T_CONSTANT_ENCAPSED_STRING","'state = ?'",241],",",["T_WHITESPACE"," ",241],["T_VARIABLE","$state",241],")",["T_WHITESPACE","\n                ",241],["T_OBJECT_OPERATOR","->",242],["T_STRING","where",242],"(",["T_CONSTANT_ENCAPSED_STRING","'status = ?'",242],",",["T_WHITESPACE"," ",242],["T_VARIABLE","$status",242],")",["T_WHITESPACE","\n                ",242],["T_OBJECT_OPERATOR","->",243],["T_STRING","limit",243],"(",["T_LNUMBER","1",243],")",["T_WHITESPACE","\n                ",243],["T_OBJECT_OPERATOR","->",244],["T_STRING","columns",244],"(","[",["T_CONSTANT_ENCAPSED_STRING","'is_default'",244],"]",")",["T_WHITESPACE","\n        ",244],")",";",["T_WHITESPACE","\n    ",245],"}",["T_WHITESPACE","\n\n    ",246],["T_DOC_COMMENT","\/**\n     * Returns any possible status for state\n     *\n     * @param string $state\n     * @return string\n     * @SuppressWarnings(PHPMD.UnusedLocalVariable)\n     *\/",248],["T_WHITESPACE","\n    ",254],["T_PROTECTED","protected",255],["T_WHITESPACE"," ",255],["T_FUNCTION","function",255],["T_WHITESPACE"," ",255],["T_STRING","getStatusByState",255],"(",["T_VARIABLE","$state",255],")",["T_WHITESPACE","\n    ",255],"{",["T_WHITESPACE","\n        ",256],["T_RETURN","return",257],["T_WHITESPACE"," ",257],["T_STRING_CAST","(string)",257],["T_VARIABLE","$this",257],["T_OBJECT_OPERATOR","->",257],["T_STRING","getConnection",257],"(",")",["T_OBJECT_OPERATOR","->",257],["T_STRING","fetchOne",257],"(",["T_WHITESPACE","\n            ",257],["T_VARIABLE","$select",258],["T_WHITESPACE"," ",258],"=",["T_WHITESPACE"," ",258],["T_VARIABLE","$this",258],["T_OBJECT_OPERATOR","->",258],["T_STRING","getConnection",258],"(",")",["T_OBJECT_OPERATOR","->",258],["T_STRING","select",258],"(",")",["T_WHITESPACE","\n                ",258],["T_OBJECT_OPERATOR","->",259],["T_STRING","from",259],"(","[",["T_CONSTANT_ENCAPSED_STRING","'sss'",259],["T_WHITESPACE"," ",259],["T_DOUBLE_ARROW","=>",259],["T_WHITESPACE"," ",259],["T_VARIABLE","$this",259],["T_OBJECT_OPERATOR","->",259],["T_STRING","stateTable",259],",",["T_WHITESPACE"," ",259],"[","]","]",")",["T_WHITESPACE","\n                ",259],["T_OBJECT_OPERATOR","->",260],["T_STRING","where",260],"(",["T_CONSTANT_ENCAPSED_STRING","'state = ?'",260],",",["T_WHITESPACE"," ",260],["T_VARIABLE","$state",260],")",["T_WHITESPACE","\n                ",260],["T_OBJECT_OPERATOR","->",261],["T_STRING","limit",261],"(",["T_LNUMBER","1",261],")",["T_WHITESPACE","\n                ",261],["T_OBJECT_OPERATOR","->",262],["T_STRING","columns",262],"(","[",["T_CONSTANT_ENCAPSED_STRING","'status'",262],"]",")",["T_WHITESPACE","\n        ",262],")",";",["T_WHITESPACE","\n    ",263],"}",["T_WHITESPACE","\n",264],"}",["T_WHITESPACE","\n",265]]
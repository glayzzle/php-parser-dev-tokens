[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Copyright \u00c2\u00a9 2013-2017 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n *\/",2],["T_WHITESPACE","\n\n",5],["T_NAMESPACE","namespace",7],["T_WHITESPACE"," ",7],["T_STRING","Magento",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Sales",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Model",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Order",7],";",["T_WHITESPACE","\n\n",7],["T_USE","use",9],["T_WHITESPACE"," ",9],["T_STRING","Magento",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Sales",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Api",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Data",9],["T_NS_SEPARATOR","\\",9],["T_STRING","InvoiceInterface",9],";",["T_WHITESPACE","\n",9],["T_USE","use",10],["T_WHITESPACE"," ",10],["T_STRING","Magento",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Sales",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Api",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Data",10],["T_NS_SEPARATOR","\\",10],["T_STRING","InvoiceItemInterface",10],";",["T_WHITESPACE","\n",10],["T_USE","use",11],["T_WHITESPACE"," ",11],["T_STRING","Magento",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Sales",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Api",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Data",11],["T_NS_SEPARATOR","\\",11],["T_STRING","OrderInterface",11],";",["T_WHITESPACE","\n",11],["T_USE","use",12],["T_WHITESPACE"," ",12],["T_STRING","Magento",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Sales",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Api",12],["T_NS_SEPARATOR","\\",12],["T_STRING","OrderRepositoryInterface",12],";",["T_WHITESPACE","\n",12],["T_USE","use",13],["T_WHITESPACE"," ",13],["T_STRING","Magento",13],["T_NS_SEPARATOR","\\",13],["T_STRING","Sales",13],["T_NS_SEPARATOR","\\",13],["T_STRING","Model",13],["T_NS_SEPARATOR","\\",13],["T_STRING","ValidatorInterface",13],";",["T_WHITESPACE","\n\n",13],["T_DOC_COMMENT","\/**\n * Interface InvoiceValidatorInterface\n *\/",15],["T_WHITESPACE","\n",17],["T_CLASS","class",18],["T_WHITESPACE"," ",18],["T_STRING","InvoiceQuantityValidator",18],["T_WHITESPACE"," ",18],["T_IMPLEMENTS","implements",18],["T_WHITESPACE"," ",18],["T_STRING","ValidatorInterface",18],["T_WHITESPACE","\n",18],"{",["T_WHITESPACE","\n    ",19],["T_DOC_COMMENT","\/**\n     * @var OrderRepositoryInterface\n     *\/",20],["T_WHITESPACE","\n    ",22],["T_PRIVATE","private",23],["T_WHITESPACE"," ",23],["T_VARIABLE","$orderRepository",23],";",["T_WHITESPACE","\n\n    ",23],["T_DOC_COMMENT","\/**\n     * InvoiceValidator constructor.\n     * @param OrderRepositoryInterface $orderRepository\n     *\/",25],["T_WHITESPACE","\n    ",28],["T_PUBLIC","public",29],["T_WHITESPACE"," ",29],["T_FUNCTION","function",29],["T_WHITESPACE"," ",29],["T_STRING","__construct",29],"(",["T_STRING","OrderRepositoryInterface",29],["T_WHITESPACE"," ",29],["T_VARIABLE","$orderRepository",29],")",["T_WHITESPACE","\n    ",29],"{",["T_WHITESPACE","\n        ",30],["T_VARIABLE","$this",31],["T_OBJECT_OPERATOR","->",31],["T_STRING","orderRepository",31],["T_WHITESPACE"," ",31],"=",["T_WHITESPACE"," ",31],["T_VARIABLE","$orderRepository",31],";",["T_WHITESPACE","\n    ",31],"}",["T_WHITESPACE","\n\n    ",32],["T_DOC_COMMENT","\/**\n     * @inheritdoc\n     *\/",34],["T_WHITESPACE","\n    ",36],["T_PUBLIC","public",37],["T_WHITESPACE"," ",37],["T_FUNCTION","function",37],["T_WHITESPACE"," ",37],["T_STRING","validate",37],"(",["T_VARIABLE","$invoice",37],")",["T_WHITESPACE","\n    ",37],"{",["T_WHITESPACE","\n        ",38],["T_IF","if",39],["T_WHITESPACE"," ",39],"(",["T_VARIABLE","$invoice",39],["T_OBJECT_OPERATOR","->",39],["T_STRING","getOrderId",39],"(",")",["T_WHITESPACE"," ",39],["T_IS_IDENTICAL","===",39],["T_WHITESPACE"," ",39],["T_STRING","null",39],")",["T_WHITESPACE"," ",39],"{",["T_WHITESPACE","\n            ",39],["T_RETURN","return",40],["T_WHITESPACE"," ",40],"[",["T_STRING","__",40],"(",["T_CONSTANT_ENCAPSED_STRING","'Order Id is required for invoice document'",40],")","]",";",["T_WHITESPACE","\n        ",40],"}",["T_WHITESPACE","\n        ",41],["T_VARIABLE","$order",42],["T_WHITESPACE"," ",42],"=",["T_WHITESPACE"," ",42],["T_VARIABLE","$this",42],["T_OBJECT_OPERATOR","->",42],["T_STRING","orderRepository",42],["T_OBJECT_OPERATOR","->",42],["T_STRING","get",42],"(",["T_VARIABLE","$invoice",42],["T_OBJECT_OPERATOR","->",42],["T_STRING","getOrderId",42],"(",")",")",";",["T_WHITESPACE","\n        ",42],["T_RETURN","return",43],["T_WHITESPACE"," ",43],["T_VARIABLE","$this",43],["T_OBJECT_OPERATOR","->",43],["T_STRING","checkQtyAvailability",43],"(",["T_VARIABLE","$invoice",43],",",["T_WHITESPACE"," ",43],["T_VARIABLE","$order",43],")",";",["T_WHITESPACE","\n    ",43],"}",["T_WHITESPACE","\n\n    ",44],["T_DOC_COMMENT","\/**\n     * Check qty availability\n     *\n     * @param InvoiceInterface $invoice\n     * @param OrderInterface $order\n     * @return array\n     *\/",46],["T_WHITESPACE","\n    ",52],["T_PRIVATE","private",53],["T_WHITESPACE"," ",53],["T_FUNCTION","function",53],["T_WHITESPACE"," ",53],["T_STRING","checkQtyAvailability",53],"(",["T_STRING","InvoiceInterface",53],["T_WHITESPACE"," ",53],["T_VARIABLE","$invoice",53],",",["T_WHITESPACE"," ",53],["T_STRING","OrderInterface",53],["T_WHITESPACE"," ",53],["T_VARIABLE","$order",53],")",["T_WHITESPACE","\n    ",53],"{",["T_WHITESPACE","\n        ",54],["T_VARIABLE","$messages",55],["T_WHITESPACE"," ",55],"=",["T_WHITESPACE"," ",55],"[","]",";",["T_WHITESPACE","\n        ",55],["T_VARIABLE","$qtys",56],["T_WHITESPACE"," ",56],"=",["T_WHITESPACE"," ",56],["T_VARIABLE","$this",56],["T_OBJECT_OPERATOR","->",56],["T_STRING","getInvoiceQty",56],"(",["T_VARIABLE","$invoice",56],")",";",["T_WHITESPACE","\n\n        ",56],["T_VARIABLE","$totalQty",58],["T_WHITESPACE"," ",58],"=",["T_WHITESPACE"," ",58],["T_LNUMBER","0",58],";",["T_WHITESPACE","\n        ",58],["T_IF","if",59],["T_WHITESPACE"," ",59],"(",["T_VARIABLE","$qtys",59],")",["T_WHITESPACE"," ",59],"{",["T_WHITESPACE","\n            ",59],["T_DOC_COMMENT","\/** @var \\Magento\\Sales\\Model\\Order\\Item $orderItem *\/",60],["T_WHITESPACE","\n            ",60],["T_FOREACH","foreach",61],["T_WHITESPACE"," ",61],"(",["T_VARIABLE","$order",61],["T_OBJECT_OPERATOR","->",61],["T_STRING","getItems",61],"(",")",["T_WHITESPACE"," ",61],["T_AS","as",61],["T_WHITESPACE"," ",61],["T_VARIABLE","$orderItem",61],")",["T_WHITESPACE"," ",61],"{",["T_WHITESPACE","\n                ",61],["T_IF","if",62],["T_WHITESPACE"," ",62],"(",["T_ISSET","isset",62],"(",["T_VARIABLE","$qtys",62],"[",["T_VARIABLE","$orderItem",62],["T_OBJECT_OPERATOR","->",62],["T_STRING","getId",62],"(",")","]",")",")",["T_WHITESPACE"," ",62],"{",["T_WHITESPACE","\n                    ",62],["T_IF","if",63],["T_WHITESPACE"," ",63],"(",["T_VARIABLE","$qtys",63],"[",["T_VARIABLE","$orderItem",63],["T_OBJECT_OPERATOR","->",63],["T_STRING","getId",63],"(",")","]",["T_WHITESPACE"," ",63],">",["T_WHITESPACE"," ",63],["T_VARIABLE","$orderItem",63],["T_OBJECT_OPERATOR","->",63],["T_STRING","getQtyToInvoice",63],"(",")",["T_WHITESPACE"," ",63],["T_BOOLEAN_AND","&&",63],["T_WHITESPACE"," ",63],"!",["T_VARIABLE","$orderItem",63],["T_OBJECT_OPERATOR","->",63],["T_STRING","isDummy",63],"(",")",")",["T_WHITESPACE"," ",63],"{",["T_WHITESPACE","\n                        ",63],["T_VARIABLE","$messages",64],"[","]",["T_WHITESPACE"," ",64],"=",["T_WHITESPACE"," ",64],["T_STRING","__",64],"(",["T_WHITESPACE","\n                            ",64],["T_CONSTANT_ENCAPSED_STRING","'The quantity to invoice must not be greater than the uninvoiced quantity'",65],["T_WHITESPACE","\n                            ",65],".",["T_WHITESPACE"," ",66],["T_CONSTANT_ENCAPSED_STRING","' for product SKU \"%1\".'",66],",",["T_WHITESPACE","\n                            ",66],["T_VARIABLE","$orderItem",67],["T_OBJECT_OPERATOR","->",67],["T_STRING","getSku",67],"(",")",["T_WHITESPACE","\n                        ",67],")",";",["T_WHITESPACE","\n                    ",68],"}",["T_WHITESPACE","\n                    ",69],["T_VARIABLE","$totalQty",70],["T_WHITESPACE"," ",70],["T_PLUS_EQUAL","+=",70],["T_WHITESPACE"," ",70],["T_VARIABLE","$qtys",70],"[",["T_VARIABLE","$orderItem",70],["T_OBJECT_OPERATOR","->",70],["T_STRING","getId",70],"(",")","]",";",["T_WHITESPACE","\n                    ",70],["T_UNSET","unset",71],"(",["T_VARIABLE","$qtys",71],"[",["T_VARIABLE","$orderItem",71],["T_OBJECT_OPERATOR","->",71],["T_STRING","getId",71],"(",")","]",")",";",["T_WHITESPACE","\n                ",71],"}",["T_WHITESPACE","\n            ",72],"}",["T_WHITESPACE","\n        ",73],"}",["T_WHITESPACE","\n        ",74],["T_IF","if",75],["T_WHITESPACE"," ",75],"(",["T_VARIABLE","$qtys",75],")",["T_WHITESPACE"," ",75],"{",["T_WHITESPACE","\n            ",75],["T_VARIABLE","$messages",76],"[","]",["T_WHITESPACE"," ",76],"=",["T_WHITESPACE"," ",76],["T_STRING","__",76],"(",["T_CONSTANT_ENCAPSED_STRING","'The invoice contains one or more items that are not part of the original order.'",76],")",";",["T_WHITESPACE","\n        ",76],"}",["T_WHITESPACE"," ",77],["T_ELSEIF","elseif",77],["T_WHITESPACE"," ",77],"(",["T_VARIABLE","$totalQty",77],["T_WHITESPACE"," ",77],["T_IS_SMALLER_OR_EQUAL","<=",77],["T_WHITESPACE"," ",77],["T_LNUMBER","0",77],")",["T_WHITESPACE"," ",77],"{",["T_WHITESPACE","\n            ",77],["T_VARIABLE","$messages",78],"[","]",["T_WHITESPACE"," ",78],"=",["T_WHITESPACE"," ",78],["T_STRING","__",78],"(",["T_CONSTANT_ENCAPSED_STRING","'You can\\'t create an invoice without products.'",78],")",";",["T_WHITESPACE","\n        ",78],"}",["T_WHITESPACE","\n        ",79],["T_RETURN","return",80],["T_WHITESPACE"," ",80],["T_VARIABLE","$messages",80],";",["T_WHITESPACE","\n    ",80],"}",["T_WHITESPACE","\n\n    ",81],["T_DOC_COMMENT","\/**\n     * @param InvoiceInterface $invoice\n     * @return array\n     *\/",83],["T_WHITESPACE","\n    ",86],["T_PRIVATE","private",87],["T_WHITESPACE"," ",87],["T_FUNCTION","function",87],["T_WHITESPACE"," ",87],["T_STRING","getInvoiceQty",87],"(",["T_STRING","InvoiceInterface",87],["T_WHITESPACE"," ",87],["T_VARIABLE","$invoice",87],")",["T_WHITESPACE","\n    ",87],"{",["T_WHITESPACE","\n        ",88],["T_VARIABLE","$qtys",89],["T_WHITESPACE"," ",89],"=",["T_WHITESPACE"," ",89],"[","]",";",["T_WHITESPACE","\n        ",89],["T_DOC_COMMENT","\/** @var InvoiceItemInterface $item *\/",90],["T_WHITESPACE","\n        ",90],["T_FOREACH","foreach",91],["T_WHITESPACE"," ",91],"(",["T_VARIABLE","$invoice",91],["T_OBJECT_OPERATOR","->",91],["T_STRING","getItems",91],"(",")",["T_WHITESPACE"," ",91],["T_AS","as",91],["T_WHITESPACE"," ",91],["T_VARIABLE","$item",91],")",["T_WHITESPACE"," ",91],"{",["T_WHITESPACE","\n            ",91],["T_VARIABLE","$qtys",92],"[",["T_VARIABLE","$item",92],["T_OBJECT_OPERATOR","->",92],["T_STRING","getOrderItemId",92],"(",")","]",["T_WHITESPACE"," ",92],"=",["T_WHITESPACE"," ",92],["T_VARIABLE","$item",92],["T_OBJECT_OPERATOR","->",92],["T_STRING","getQty",92],"(",")",";",["T_WHITESPACE","\n        ",92],"}",["T_WHITESPACE","\n        ",93],["T_RETURN","return",94],["T_WHITESPACE"," ",94],["T_VARIABLE","$qtys",94],";",["T_WHITESPACE","\n    ",94],"}",["T_WHITESPACE","\n",95],"}",["T_WHITESPACE","\n",96]]
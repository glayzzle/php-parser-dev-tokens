[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Copyright \u00c2\u00a9 2013-2017 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n *\/",2],["T_WHITESPACE","\n",5],["T_NAMESPACE","namespace",6],["T_WHITESPACE"," ",6],["T_STRING","Magento",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Sales",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Model",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Order",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Creditmemo",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Item",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Validation",6],";",["T_WHITESPACE","\n\n",6],["T_USE","use",8],["T_WHITESPACE"," ",8],["T_STRING","Magento",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Framework",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Exception",8],["T_NS_SEPARATOR","\\",8],["T_STRING","NoSuchEntityException",8],";",["T_WHITESPACE","\n",8],["T_USE","use",9],["T_WHITESPACE"," ",9],["T_STRING","Magento",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Sales",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Api",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Data",9],["T_NS_SEPARATOR","\\",9],["T_STRING","OrderInterface",9],";",["T_WHITESPACE","\n",9],["T_USE","use",10],["T_WHITESPACE"," ",10],["T_STRING","Magento",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Sales",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Api",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Data",10],["T_NS_SEPARATOR","\\",10],["T_STRING","OrderInterfaceFactory",10],";",["T_WHITESPACE","\n",10],["T_USE","use",11],["T_WHITESPACE"," ",11],["T_STRING","Magento",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Sales",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Api",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Data",11],["T_NS_SEPARATOR","\\",11],["T_STRING","OrderItemInterface",11],";",["T_WHITESPACE","\n",11],["T_USE","use",12],["T_WHITESPACE"," ",12],["T_STRING","Magento",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Sales",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Api",12],["T_NS_SEPARATOR","\\",12],["T_STRING","OrderItemRepositoryInterface",12],";",["T_WHITESPACE","\n",12],["T_USE","use",13],["T_WHITESPACE"," ",13],["T_STRING","Magento",13],["T_NS_SEPARATOR","\\",13],["T_STRING","Sales",13],["T_NS_SEPARATOR","\\",13],["T_STRING","Model",13],["T_NS_SEPARATOR","\\",13],["T_STRING","Order",13],["T_NS_SEPARATOR","\\",13],["T_STRING","Item",13],";",["T_WHITESPACE","\n",13],["T_USE","use",14],["T_WHITESPACE"," ",14],["T_STRING","Magento",14],["T_NS_SEPARATOR","\\",14],["T_STRING","Sales",14],["T_NS_SEPARATOR","\\",14],["T_STRING","Model",14],["T_NS_SEPARATOR","\\",14],["T_STRING","ValidatorInterface",14],";",["T_WHITESPACE","\n\n",14],["T_DOC_COMMENT","\/**\n * Class CreationQuantityValidator\n *\/",16],["T_WHITESPACE","\n",18],["T_CLASS","class",19],["T_WHITESPACE"," ",19],["T_STRING","CreationQuantityValidator",19],["T_WHITESPACE"," ",19],["T_IMPLEMENTS","implements",19],["T_WHITESPACE"," ",19],["T_STRING","ValidatorInterface",19],["T_WHITESPACE","\n",19],"{",["T_WHITESPACE","\n    ",20],["T_DOC_COMMENT","\/**\n     * @var OrderItemRepositoryInterface\n     *\/",21],["T_WHITESPACE","\n    ",23],["T_PRIVATE","private",24],["T_WHITESPACE"," ",24],["T_VARIABLE","$orderItemRepository",24],";",["T_WHITESPACE","\n\n    ",24],["T_DOC_COMMENT","\/**\n     * @var OrderInterfaceFactory\n     *\/",26],["T_WHITESPACE","\n    ",28],["T_PRIVATE","private",29],["T_WHITESPACE"," ",29],["T_VARIABLE","$context",29],";",["T_WHITESPACE","\n\n    ",29],["T_DOC_COMMENT","\/**\n     * ItemCreationQuantityValidator constructor.\n     * @param OrderItemRepositoryInterface $orderItemRepository\n     * @param object $context\n     *\/",31],["T_WHITESPACE","\n    ",35],["T_PUBLIC","public",36],["T_WHITESPACE"," ",36],["T_FUNCTION","function",36],["T_WHITESPACE"," ",36],["T_STRING","__construct",36],"(",["T_STRING","OrderItemRepositoryInterface",36],["T_WHITESPACE"," ",36],["T_VARIABLE","$orderItemRepository",36],",",["T_WHITESPACE"," ",36],["T_VARIABLE","$context",36],["T_WHITESPACE"," ",36],"=",["T_WHITESPACE"," ",36],["T_STRING","null",36],")",["T_WHITESPACE","\n    ",36],"{",["T_WHITESPACE","\n        ",37],["T_VARIABLE","$this",38],["T_OBJECT_OPERATOR","->",38],["T_STRING","orderItemRepository",38],["T_WHITESPACE"," ",38],"=",["T_WHITESPACE"," ",38],["T_VARIABLE","$orderItemRepository",38],";",["T_WHITESPACE","\n        ",38],["T_VARIABLE","$this",39],["T_OBJECT_OPERATOR","->",39],["T_STRING","context",39],["T_WHITESPACE"," ",39],"=",["T_WHITESPACE"," ",39],["T_VARIABLE","$context",39],";",["T_WHITESPACE","\n    ",39],"}",["T_WHITESPACE","\n\n    ",40],["T_DOC_COMMENT","\/**\n     * @inheritdoc\n     *\/",42],["T_WHITESPACE","\n    ",44],["T_PUBLIC","public",45],["T_WHITESPACE"," ",45],["T_FUNCTION","function",45],["T_WHITESPACE"," ",45],["T_STRING","validate",45],"(",["T_VARIABLE","$entity",45],")",["T_WHITESPACE","\n    ",45],"{",["T_WHITESPACE","\n        ",46],["T_TRY","try",47],["T_WHITESPACE"," ",47],"{",["T_WHITESPACE","\n            ",47],["T_VARIABLE","$orderItem",48],["T_WHITESPACE"," ",48],"=",["T_WHITESPACE"," ",48],["T_VARIABLE","$this",48],["T_OBJECT_OPERATOR","->",48],["T_STRING","orderItemRepository",48],["T_OBJECT_OPERATOR","->",48],["T_STRING","get",48],"(",["T_VARIABLE","$entity",48],["T_OBJECT_OPERATOR","->",48],["T_STRING","getOrderItemId",48],"(",")",")",";",["T_WHITESPACE","\n            ",48],["T_IF","if",49],["T_WHITESPACE"," ",49],"(","!",["T_VARIABLE","$this",49],["T_OBJECT_OPERATOR","->",49],["T_STRING","isItemPartOfContextOrder",49],"(",["T_VARIABLE","$orderItem",49],")",")",["T_WHITESPACE"," ",49],"{",["T_WHITESPACE","\n                ",49],["T_RETURN","return",50],["T_WHITESPACE"," ",50],"[",["T_STRING","__",50],"(",["T_CONSTANT_ENCAPSED_STRING","'The creditmemo contains product item that is not part of the original order.'",50],")","]",";",["T_WHITESPACE","\n            ",50],"}",["T_WHITESPACE","\n        ",51],"}",["T_WHITESPACE"," ",52],["T_CATCH","catch",52],["T_WHITESPACE"," ",52],"(",["T_STRING","NoSuchEntityException",52],["T_WHITESPACE"," ",52],["T_VARIABLE","$e",52],")",["T_WHITESPACE"," ",52],"{",["T_WHITESPACE","\n            ",52],["T_RETURN","return",53],["T_WHITESPACE"," ",53],"[",["T_STRING","__",53],"(",["T_CONSTANT_ENCAPSED_STRING","'The creditmemo contains product item that is not part of the original order.'",53],")","]",";",["T_WHITESPACE","\n        ",53],"}",["T_WHITESPACE","\n\n        ",54],["T_IF","if",56],["T_WHITESPACE"," ",56],"(","!",["T_VARIABLE","$this",56],["T_OBJECT_OPERATOR","->",56],["T_STRING","isQtyAvailable",56],"(",["T_VARIABLE","$orderItem",56],",",["T_WHITESPACE"," ",56],["T_VARIABLE","$entity",56],["T_OBJECT_OPERATOR","->",56],["T_STRING","getQty",56],"(",")",")",")",["T_WHITESPACE"," ",56],"{",["T_WHITESPACE","\n            ",56],["T_RETURN","return",57],["T_WHITESPACE"," ",57],"[",["T_STRING","__",57],"(",["T_CONSTANT_ENCAPSED_STRING","'The quantity to refund must not be greater than the unrefunded quantity.'",57],")","]",";",["T_WHITESPACE","\n        ",57],"}",["T_WHITESPACE","\n\n        ",58],["T_RETURN","return",60],["T_WHITESPACE"," ",60],"[","]",";",["T_WHITESPACE","\n    ",60],"}",["T_WHITESPACE","\n\n    ",61],["T_DOC_COMMENT","\/**\n     * @param Item $orderItem\n     * @param int $qty\n     * @return bool\n     *\/",63],["T_WHITESPACE","\n    ",67],["T_PRIVATE","private",68],["T_WHITESPACE"," ",68],["T_FUNCTION","function",68],["T_WHITESPACE"," ",68],["T_STRING","isQtyAvailable",68],"(",["T_STRING","Item",68],["T_WHITESPACE"," ",68],["T_VARIABLE","$orderItem",68],",",["T_WHITESPACE"," ",68],["T_VARIABLE","$qty",68],")",["T_WHITESPACE","\n    ",68],"{",["T_WHITESPACE","\n        ",69],["T_RETURN","return",70],["T_WHITESPACE"," ",70],["T_VARIABLE","$qty",70],["T_WHITESPACE"," ",70],["T_IS_SMALLER_OR_EQUAL","<=",70],["T_WHITESPACE"," ",70],["T_VARIABLE","$orderItem",70],["T_OBJECT_OPERATOR","->",70],["T_STRING","getQtyToRefund",70],"(",")",["T_WHITESPACE"," ",70],["T_BOOLEAN_OR","||",70],["T_WHITESPACE"," ",70],["T_VARIABLE","$orderItem",70],["T_OBJECT_OPERATOR","->",70],["T_STRING","isDummy",70],"(",")",";",["T_WHITESPACE","\n    ",70],"}",["T_WHITESPACE","\n\n    ",71],["T_DOC_COMMENT","\/**\n     * @param OrderItemInterface $orderItem\n     * @return bool\n     *\/",73],["T_WHITESPACE","\n    ",76],["T_PRIVATE","private",77],["T_WHITESPACE"," ",77],["T_FUNCTION","function",77],["T_WHITESPACE"," ",77],["T_STRING","isItemPartOfContextOrder",77],"(",["T_STRING","OrderItemInterface",77],["T_WHITESPACE"," ",77],["T_VARIABLE","$orderItem",77],")",["T_WHITESPACE","\n    ",77],"{",["T_WHITESPACE","\n        ",78],["T_RETURN","return",79],["T_WHITESPACE"," ",79],["T_VARIABLE","$this",79],["T_OBJECT_OPERATOR","->",79],["T_STRING","context",79],["T_WHITESPACE"," ",79],["T_INSTANCEOF","instanceof",79],["T_WHITESPACE"," ",79],["T_STRING","OrderInterface",79],["T_WHITESPACE"," ",79],["T_BOOLEAN_AND","&&",79],["T_WHITESPACE"," ",79],["T_VARIABLE","$this",79],["T_OBJECT_OPERATOR","->",79],["T_STRING","context",79],["T_OBJECT_OPERATOR","->",79],["T_STRING","getEntityId",79],"(",")",["T_WHITESPACE"," ",79],["T_IS_IDENTICAL","===",79],["T_WHITESPACE"," ",79],["T_VARIABLE","$orderItem",79],["T_OBJECT_OPERATOR","->",79],["T_STRING","getOrderId",79],"(",")",";",["T_WHITESPACE","\n    ",79],"}",["T_WHITESPACE","\n",80],"}",["T_WHITESPACE","\n",81]]
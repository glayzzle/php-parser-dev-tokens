[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Copyright \u00c2\u00a9 2013-2017 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n *\/",2],["T_WHITESPACE","\n",5],["T_NAMESPACE","namespace",6],["T_WHITESPACE"," ",6],["T_STRING","Magento",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Sales",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Model",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Order",6],";",["T_WHITESPACE","\n\n",6],["T_USE","use",8],["T_WHITESPACE"," ",8],["T_STRING","Magento",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Framework",8],["T_NS_SEPARATOR","\\",8],["T_STRING","App",8],["T_NS_SEPARATOR","\\",8],["T_STRING","ObjectManager",8],";",["T_WHITESPACE","\n",8],["T_USE","use",9],["T_WHITESPACE"," ",9],["T_STRING","Magento",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Framework",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Exception",9],["T_NS_SEPARATOR","\\",9],["T_STRING","LocalizedException",9],";",["T_WHITESPACE","\n",9],["T_USE","use",10],["T_WHITESPACE"," ",10],["T_STRING","Magento",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Sales",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Model",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Order",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Shipment",10],["T_NS_SEPARATOR","\\",10],["T_STRING","ShipmentValidatorInterface",10],";",["T_WHITESPACE","\n",10],["T_USE","use",11],["T_WHITESPACE"," ",11],["T_STRING","Magento",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Framework",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Serialize",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Serializer",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Json",11],";",["T_WHITESPACE","\n\n",11],["T_DOC_COMMENT","\/**\n * Factory class for @see \\Magento\\Sales\\Api\\Data\\ShipmentInterface\n *\/",13],["T_WHITESPACE","\n",15],["T_CLASS","class",16],["T_WHITESPACE"," ",16],["T_STRING","ShipmentFactory",16],["T_WHITESPACE","\n",16],"{",["T_WHITESPACE","\n    ",17],["T_DOC_COMMENT","\/**\n     * Order converter.\n     *\n     * @var \\Magento\\Sales\\Model\\Convert\\Order\n     *\/",18],["T_WHITESPACE","\n    ",22],["T_PROTECTED","protected",23],["T_WHITESPACE"," ",23],["T_VARIABLE","$converter",23],";",["T_WHITESPACE","\n\n    ",23],["T_DOC_COMMENT","\/**\n     * Shipment track factory.\n     *\n     * @var \\Magento\\Sales\\Model\\Order\\Shipment\\TrackFactory\n     *\/",25],["T_WHITESPACE","\n    ",29],["T_PROTECTED","protected",30],["T_WHITESPACE"," ",30],["T_VARIABLE","$trackFactory",30],";",["T_WHITESPACE","\n\n    ",30],["T_DOC_COMMENT","\/**\n     * Instance name to create.\n     *\n     * @var string\n     *\/",32],["T_WHITESPACE","\n    ",36],["T_PROTECTED","protected",37],["T_WHITESPACE"," ",37],["T_VARIABLE","$instanceName",37],";",["T_WHITESPACE","\n\n    ",37],["T_DOC_COMMENT","\/**\n     * Serializer\n     *\n     * @var Json\n     *\/",39],["T_WHITESPACE","\n    ",43],["T_PRIVATE","private",44],["T_WHITESPACE"," ",44],["T_VARIABLE","$serializer",44],";",["T_WHITESPACE","\n\n    ",44],["T_DOC_COMMENT","\/**\n     * Factory constructor.\n     *\n     * @param \\Magento\\Sales\\Model\\Convert\\OrderFactory $convertOrderFactory\n     * @param \\Magento\\Sales\\Model\\Order\\Shipment\\TrackFactory $trackFactory\n     * @param \\Magento\\Framework\\Serialize\\Serializer\\Json $serializer\n     *\/",46],["T_WHITESPACE","\n    ",52],["T_PUBLIC","public",53],["T_WHITESPACE"," ",53],["T_FUNCTION","function",53],["T_WHITESPACE"," ",53],["T_STRING","__construct",53],"(",["T_WHITESPACE","\n        ",53],["T_NS_SEPARATOR","\\",54],["T_STRING","Magento",54],["T_NS_SEPARATOR","\\",54],["T_STRING","Sales",54],["T_NS_SEPARATOR","\\",54],["T_STRING","Model",54],["T_NS_SEPARATOR","\\",54],["T_STRING","Convert",54],["T_NS_SEPARATOR","\\",54],["T_STRING","OrderFactory",54],["T_WHITESPACE"," ",54],["T_VARIABLE","$convertOrderFactory",54],",",["T_WHITESPACE","\n        ",54],["T_NS_SEPARATOR","\\",55],["T_STRING","Magento",55],["T_NS_SEPARATOR","\\",55],["T_STRING","Sales",55],["T_NS_SEPARATOR","\\",55],["T_STRING","Model",55],["T_NS_SEPARATOR","\\",55],["T_STRING","Order",55],["T_NS_SEPARATOR","\\",55],["T_STRING","Shipment",55],["T_NS_SEPARATOR","\\",55],["T_STRING","TrackFactory",55],["T_WHITESPACE"," ",55],["T_VARIABLE","$trackFactory",55],",",["T_WHITESPACE","\n        ",55],["T_STRING","Json",56],["T_WHITESPACE"," ",56],["T_VARIABLE","$serializer",56],["T_WHITESPACE"," ",56],"=",["T_WHITESPACE"," ",56],["T_STRING","null",56],["T_WHITESPACE","\n    ",56],")",["T_WHITESPACE"," ",57],"{",["T_WHITESPACE","\n        ",57],["T_VARIABLE","$this",58],["T_OBJECT_OPERATOR","->",58],["T_STRING","converter",58],["T_WHITESPACE"," ",58],"=",["T_WHITESPACE"," ",58],["T_VARIABLE","$convertOrderFactory",58],["T_OBJECT_OPERATOR","->",58],["T_STRING","create",58],"(",")",";",["T_WHITESPACE","\n        ",58],["T_VARIABLE","$this",59],["T_OBJECT_OPERATOR","->",59],["T_STRING","trackFactory",59],["T_WHITESPACE"," ",59],"=",["T_WHITESPACE"," ",59],["T_VARIABLE","$trackFactory",59],";",["T_WHITESPACE","\n        ",59],["T_VARIABLE","$this",60],["T_OBJECT_OPERATOR","->",60],["T_STRING","instanceName",60],["T_WHITESPACE"," ",60],"=",["T_WHITESPACE"," ",60],["T_NS_SEPARATOR","\\",60],["T_STRING","Magento",60],["T_NS_SEPARATOR","\\",60],["T_STRING","Sales",60],["T_NS_SEPARATOR","\\",60],["T_STRING","Api",60],["T_NS_SEPARATOR","\\",60],["T_STRING","Data",60],["T_NS_SEPARATOR","\\",60],["T_STRING","ShipmentInterface",60],["T_DOUBLE_COLON","::",60],["T_CLASS","class",60],";",["T_WHITESPACE","\n        ",60],["T_VARIABLE","$this",61],["T_OBJECT_OPERATOR","->",61],["T_STRING","serializer",61],["T_WHITESPACE"," ",61],"=",["T_WHITESPACE"," ",61],["T_VARIABLE","$serializer",61],["T_WHITESPACE"," ",61],"?",":",["T_WHITESPACE"," ",61],["T_NS_SEPARATOR","\\",61],["T_STRING","Magento",61],["T_NS_SEPARATOR","\\",61],["T_STRING","Framework",61],["T_NS_SEPARATOR","\\",61],["T_STRING","App",61],["T_NS_SEPARATOR","\\",61],["T_STRING","ObjectManager",61],["T_DOUBLE_COLON","::",61],["T_STRING","getInstance",61],"(",")",["T_WHITESPACE","\n            ",61],["T_OBJECT_OPERATOR","->",62],["T_STRING","get",62],"(",["T_STRING","Json",62],["T_DOUBLE_COLON","::",62],["T_CLASS","class",62],")",";",["T_WHITESPACE","\n    ",62],"}",["T_WHITESPACE","\n\n    ",63],["T_DOC_COMMENT","\/**\n     * Creates shipment instance with specified parameters.\n     *\n     * @param \\Magento\\Sales\\Model\\Order $order\n     * @param array $items\n     * @param array|null $tracks\n     * @return \\Magento\\Sales\\Api\\Data\\ShipmentInterface\n     *\/",65],["T_WHITESPACE","\n    ",72],["T_PUBLIC","public",73],["T_WHITESPACE"," ",73],["T_FUNCTION","function",73],["T_WHITESPACE"," ",73],["T_STRING","create",73],"(",["T_NS_SEPARATOR","\\",73],["T_STRING","Magento",73],["T_NS_SEPARATOR","\\",73],["T_STRING","Sales",73],["T_NS_SEPARATOR","\\",73],["T_STRING","Model",73],["T_NS_SEPARATOR","\\",73],["T_STRING","Order",73],["T_WHITESPACE"," ",73],["T_VARIABLE","$order",73],",",["T_WHITESPACE"," ",73],["T_ARRAY","array",73],["T_WHITESPACE"," ",73],["T_VARIABLE","$items",73],["T_WHITESPACE"," ",73],"=",["T_WHITESPACE"," ",73],"[","]",",",["T_WHITESPACE"," ",73],["T_VARIABLE","$tracks",73],["T_WHITESPACE"," ",73],"=",["T_WHITESPACE"," ",73],["T_STRING","null",73],")",["T_WHITESPACE","\n    ",73],"{",["T_WHITESPACE","\n        ",74],["T_VARIABLE","$shipment",75],["T_WHITESPACE"," ",75],"=",["T_WHITESPACE"," ",75],["T_VARIABLE","$this",75],["T_OBJECT_OPERATOR","->",75],["T_STRING","prepareItems",75],"(",["T_VARIABLE","$this",75],["T_OBJECT_OPERATOR","->",75],["T_STRING","converter",75],["T_OBJECT_OPERATOR","->",75],["T_STRING","toShipment",75],"(",["T_VARIABLE","$order",75],")",",",["T_WHITESPACE"," ",75],["T_VARIABLE","$order",75],",",["T_WHITESPACE"," ",75],["T_VARIABLE","$items",75],")",";",["T_WHITESPACE","\n\n        ",75],["T_IF","if",77],["T_WHITESPACE"," ",77],"(",["T_VARIABLE","$tracks",77],")",["T_WHITESPACE"," ",77],"{",["T_WHITESPACE","\n            ",77],["T_VARIABLE","$shipment",78],["T_WHITESPACE"," ",78],"=",["T_WHITESPACE"," ",78],["T_VARIABLE","$this",78],["T_OBJECT_OPERATOR","->",78],["T_STRING","prepareTracks",78],"(",["T_VARIABLE","$shipment",78],",",["T_WHITESPACE"," ",78],["T_VARIABLE","$tracks",78],")",";",["T_WHITESPACE","\n        ",78],"}",["T_WHITESPACE","\n\n        ",79],["T_RETURN","return",81],["T_WHITESPACE"," ",81],["T_VARIABLE","$shipment",81],";",["T_WHITESPACE","\n    ",81],"}",["T_WHITESPACE","\n\n    ",82],["T_DOC_COMMENT","\/**\n     * Adds items to the shipment.\n     *\n     * @param \\Magento\\Sales\\Api\\Data\\ShipmentInterface $shipment\n     * @param \\Magento\\Sales\\Model\\Order $order\n     * @param array $items\n     * @return \\Magento\\Sales\\Api\\Data\\ShipmentInterface\n     * @throws LocalizedException\n     * @SuppressWarnings(PHPMD.CyclomaticComplexity)\n     *\/",84],["T_WHITESPACE","\n    ",93],["T_PROTECTED","protected",94],["T_WHITESPACE"," ",94],["T_FUNCTION","function",94],["T_WHITESPACE"," ",94],["T_STRING","prepareItems",94],"(",["T_WHITESPACE","\n        ",94],["T_NS_SEPARATOR","\\",95],["T_STRING","Magento",95],["T_NS_SEPARATOR","\\",95],["T_STRING","Sales",95],["T_NS_SEPARATOR","\\",95],["T_STRING","Api",95],["T_NS_SEPARATOR","\\",95],["T_STRING","Data",95],["T_NS_SEPARATOR","\\",95],["T_STRING","ShipmentInterface",95],["T_WHITESPACE"," ",95],["T_VARIABLE","$shipment",95],",",["T_WHITESPACE","\n        ",95],["T_NS_SEPARATOR","\\",96],["T_STRING","Magento",96],["T_NS_SEPARATOR","\\",96],["T_STRING","Sales",96],["T_NS_SEPARATOR","\\",96],["T_STRING","Model",96],["T_NS_SEPARATOR","\\",96],["T_STRING","Order",96],["T_WHITESPACE"," ",96],["T_VARIABLE","$order",96],",",["T_WHITESPACE","\n        ",96],["T_ARRAY","array",97],["T_WHITESPACE"," ",97],["T_VARIABLE","$items",97],["T_WHITESPACE"," ",97],"=",["T_WHITESPACE"," ",97],"[","]",["T_WHITESPACE","\n    ",97],")",["T_WHITESPACE"," ",98],"{",["T_WHITESPACE","\n        ",98],["T_VARIABLE","$totalQty",99],["T_WHITESPACE"," ",99],"=",["T_WHITESPACE"," ",99],["T_LNUMBER","0",99],";",["T_WHITESPACE","\n        ",99],["T_FOREACH","foreach",100],["T_WHITESPACE"," ",100],"(",["T_VARIABLE","$order",100],["T_OBJECT_OPERATOR","->",100],["T_STRING","getAllItems",100],"(",")",["T_WHITESPACE"," ",100],["T_AS","as",100],["T_WHITESPACE"," ",100],["T_VARIABLE","$orderItem",100],")",["T_WHITESPACE"," ",100],"{",["T_WHITESPACE","\n            ",100],["T_IF","if",101],["T_WHITESPACE"," ",101],"(","!",["T_VARIABLE","$this",101],["T_OBJECT_OPERATOR","->",101],["T_STRING","canShipItem",101],"(",["T_VARIABLE","$orderItem",101],",",["T_WHITESPACE"," ",101],["T_VARIABLE","$items",101],")",")",["T_WHITESPACE"," ",101],"{",["T_WHITESPACE","\n                ",101],["T_CONTINUE","continue",102],";",["T_WHITESPACE","\n            ",102],"}",["T_WHITESPACE","\n\n            ",103],["T_DOC_COMMENT","\/** @var \\Magento\\Sales\\Model\\Order\\Shipment\\Item $item *\/",105],["T_WHITESPACE","\n            ",105],["T_VARIABLE","$item",106],["T_WHITESPACE"," ",106],"=",["T_WHITESPACE"," ",106],["T_VARIABLE","$this",106],["T_OBJECT_OPERATOR","->",106],["T_STRING","converter",106],["T_OBJECT_OPERATOR","->",106],["T_STRING","itemToShipmentItem",106],"(",["T_VARIABLE","$orderItem",106],")",";",["T_WHITESPACE","\n\n            ",106],["T_IF","if",108],["T_WHITESPACE"," ",108],"(",["T_VARIABLE","$orderItem",108],["T_OBJECT_OPERATOR","->",108],["T_STRING","isDummy",108],"(",["T_STRING","true",108],")",")",["T_WHITESPACE"," ",108],"{",["T_WHITESPACE","\n                ",108],["T_VARIABLE","$qty",109],["T_WHITESPACE"," ",109],"=",["T_WHITESPACE"," ",109],["T_LNUMBER","0",109],";",["T_WHITESPACE","\n\n                ",109],["T_IF","if",111],["T_WHITESPACE"," ",111],"(",["T_ISSET","isset",111],"(",["T_VARIABLE","$items",111],"[",["T_VARIABLE","$orderItem",111],["T_OBJECT_OPERATOR","->",111],["T_STRING","getParentItemId",111],"(",")","]",")",")",["T_WHITESPACE"," ",111],"{",["T_WHITESPACE","\n                    ",111],["T_VARIABLE","$productOptions",112],["T_WHITESPACE"," ",112],"=",["T_WHITESPACE"," ",112],["T_VARIABLE","$orderItem",112],["T_OBJECT_OPERATOR","->",112],["T_STRING","getProductOptions",112],"(",")",";",["T_WHITESPACE","\n\n                    ",112],["T_IF","if",114],["T_WHITESPACE"," ",114],"(",["T_ISSET","isset",114],"(",["T_VARIABLE","$productOptions",114],"[",["T_CONSTANT_ENCAPSED_STRING","'bundle_selection_attributes'",114],"]",")",")",["T_WHITESPACE"," ",114],"{",["T_WHITESPACE","\n                        ",114],["T_VARIABLE","$bundleSelectionAttributes",115],["T_WHITESPACE"," ",115],"=",["T_WHITESPACE"," ",115],["T_VARIABLE","$this",115],["T_OBJECT_OPERATOR","->",115],["T_STRING","serializer",115],["T_OBJECT_OPERATOR","->",115],["T_STRING","unserialize",115],"(",["T_WHITESPACE","\n                            ",115],["T_VARIABLE","$productOptions",116],"[",["T_CONSTANT_ENCAPSED_STRING","'bundle_selection_attributes'",116],"]",["T_WHITESPACE","\n                        ",116],")",";",["T_WHITESPACE","\n\n                        ",117],["T_IF","if",119],["T_WHITESPACE"," ",119],"(",["T_VARIABLE","$bundleSelectionAttributes",119],")",["T_WHITESPACE"," ",119],"{",["T_WHITESPACE","\n                            ",119],["T_VARIABLE","$qty",120],["T_WHITESPACE"," ",120],"=",["T_WHITESPACE"," ",120],["T_VARIABLE","$bundleSelectionAttributes",120],"[",["T_CONSTANT_ENCAPSED_STRING","'qty'",120],"]",["T_WHITESPACE"," ",120],"*",["T_WHITESPACE"," ",120],["T_VARIABLE","$items",120],"[",["T_VARIABLE","$orderItem",120],["T_OBJECT_OPERATOR","->",120],["T_STRING","getParentItemId",120],"(",")","]",";",["T_WHITESPACE","\n                            ",120],["T_VARIABLE","$qty",121],["T_WHITESPACE"," ",121],"=",["T_WHITESPACE"," ",121],["T_STRING","min",121],"(",["T_VARIABLE","$qty",121],",",["T_WHITESPACE"," ",121],["T_VARIABLE","$orderItem",121],["T_OBJECT_OPERATOR","->",121],["T_STRING","getSimpleQtyToShip",121],"(",")",")",";",["T_WHITESPACE","\n\n                            ",121],["T_VARIABLE","$item",123],["T_OBJECT_OPERATOR","->",123],["T_STRING","setQty",123],"(",["T_VARIABLE","$this",123],["T_OBJECT_OPERATOR","->",123],["T_STRING","castQty",123],"(",["T_VARIABLE","$orderItem",123],",",["T_WHITESPACE"," ",123],["T_VARIABLE","$qty",123],")",")",";",["T_WHITESPACE","\n                            ",123],["T_VARIABLE","$shipment",124],["T_OBJECT_OPERATOR","->",124],["T_STRING","addItem",124],"(",["T_VARIABLE","$item",124],")",";",["T_WHITESPACE","\n\n                            ",124],["T_CONTINUE","continue",126],";",["T_WHITESPACE","\n                        ",126],"}",["T_WHITESPACE"," ",127],["T_ELSE","else",127],["T_WHITESPACE"," ",127],"{",["T_WHITESPACE","\n                            ",127],["T_VARIABLE","$qty",128],["T_WHITESPACE"," ",128],"=",["T_WHITESPACE"," ",128],["T_LNUMBER","1",128],";",["T_WHITESPACE","\n                        ",128],"}",["T_WHITESPACE","\n                    ",129],"}",["T_WHITESPACE","\n                ",130],"}",["T_WHITESPACE"," ",131],["T_ELSE","else",131],["T_WHITESPACE"," ",131],"{",["T_WHITESPACE","\n                    ",131],["T_VARIABLE","$qty",132],["T_WHITESPACE"," ",132],"=",["T_WHITESPACE"," ",132],["T_LNUMBER","1",132],";",["T_WHITESPACE","\n                ",132],"}",["T_WHITESPACE","\n            ",133],"}",["T_WHITESPACE"," ",134],["T_ELSE","else",134],["T_WHITESPACE"," ",134],"{",["T_WHITESPACE","\n                ",134],["T_IF","if",135],["T_WHITESPACE"," ",135],"(",["T_ISSET","isset",135],"(",["T_VARIABLE","$items",135],"[",["T_VARIABLE","$orderItem",135],["T_OBJECT_OPERATOR","->",135],["T_STRING","getId",135],"(",")","]",")",")",["T_WHITESPACE"," ",135],"{",["T_WHITESPACE","\n                    ",135],["T_VARIABLE","$qty",136],["T_WHITESPACE"," ",136],"=",["T_WHITESPACE"," ",136],["T_STRING","min",136],"(",["T_VARIABLE","$items",136],"[",["T_VARIABLE","$orderItem",136],["T_OBJECT_OPERATOR","->",136],["T_STRING","getId",136],"(",")","]",",",["T_WHITESPACE"," ",136],["T_VARIABLE","$orderItem",136],["T_OBJECT_OPERATOR","->",136],["T_STRING","getQtyToShip",136],"(",")",")",";",["T_WHITESPACE","\n                ",136],"}",["T_WHITESPACE"," ",137],["T_ELSEIF","elseif",137],["T_WHITESPACE"," ",137],"(","!",["T_STRING","count",137],"(",["T_VARIABLE","$items",137],")",")",["T_WHITESPACE"," ",137],"{",["T_WHITESPACE","\n                    ",137],["T_VARIABLE","$qty",138],["T_WHITESPACE"," ",138],"=",["T_WHITESPACE"," ",138],["T_VARIABLE","$orderItem",138],["T_OBJECT_OPERATOR","->",138],["T_STRING","getQtyToShip",138],"(",")",";",["T_WHITESPACE","\n                ",138],"}",["T_WHITESPACE"," ",139],["T_ELSE","else",139],["T_WHITESPACE"," ",139],"{",["T_WHITESPACE","\n                    ",139],["T_CONTINUE","continue",140],";",["T_WHITESPACE","\n                ",140],"}",["T_WHITESPACE","\n            ",141],"}",["T_WHITESPACE","\n\n            ",142],["T_VARIABLE","$totalQty",144],["T_WHITESPACE"," ",144],["T_PLUS_EQUAL","+=",144],["T_WHITESPACE"," ",144],["T_VARIABLE","$qty",144],";",["T_WHITESPACE","\n\n            ",144],["T_VARIABLE","$item",146],["T_OBJECT_OPERATOR","->",146],["T_STRING","setQty",146],"(",["T_VARIABLE","$this",146],["T_OBJECT_OPERATOR","->",146],["T_STRING","castQty",146],"(",["T_VARIABLE","$orderItem",146],",",["T_WHITESPACE"," ",146],["T_VARIABLE","$qty",146],")",")",";",["T_WHITESPACE","\n            ",146],["T_VARIABLE","$shipment",147],["T_OBJECT_OPERATOR","->",147],["T_STRING","addItem",147],"(",["T_VARIABLE","$item",147],")",";",["T_WHITESPACE","\n        ",147],"}",["T_WHITESPACE","\n        ",148],["T_RETURN","return",149],["T_WHITESPACE"," ",149],["T_VARIABLE","$shipment",149],["T_OBJECT_OPERATOR","->",149],["T_STRING","setTotalQty",149],"(",["T_VARIABLE","$totalQty",149],")",";",["T_WHITESPACE","\n    ",149],"}",["T_WHITESPACE","\n\n    ",150],["T_DOC_COMMENT","\/**\n     * Adds tracks to the shipment.\n     *\n     * @param \\Magento\\Sales\\Api\\Data\\ShipmentInterface $shipment\n     * @param array $tracks\n     * @throws \\Magento\\Framework\\Exception\\LocalizedException\n     * @return \\Magento\\Sales\\Api\\Data\\ShipmentInterface\n     *\/",152],["T_WHITESPACE","\n    ",159],["T_PROTECTED","protected",160],["T_WHITESPACE"," ",160],["T_FUNCTION","function",160],["T_WHITESPACE"," ",160],["T_STRING","prepareTracks",160],"(",["T_NS_SEPARATOR","\\",160],["T_STRING","Magento",160],["T_NS_SEPARATOR","\\",160],["T_STRING","Sales",160],["T_NS_SEPARATOR","\\",160],["T_STRING","Api",160],["T_NS_SEPARATOR","\\",160],["T_STRING","Data",160],["T_NS_SEPARATOR","\\",160],["T_STRING","ShipmentInterface",160],["T_WHITESPACE"," ",160],["T_VARIABLE","$shipment",160],",",["T_WHITESPACE"," ",160],["T_ARRAY","array",160],["T_WHITESPACE"," ",160],["T_VARIABLE","$tracks",160],")",["T_WHITESPACE","\n    ",160],"{",["T_WHITESPACE","\n        ",161],["T_FOREACH","foreach",162],["T_WHITESPACE"," ",162],"(",["T_VARIABLE","$tracks",162],["T_WHITESPACE"," ",162],["T_AS","as",162],["T_WHITESPACE"," ",162],["T_VARIABLE","$data",162],")",["T_WHITESPACE"," ",162],"{",["T_WHITESPACE","\n            ",162],["T_IF","if",163],["T_WHITESPACE"," ",163],"(",["T_EMPTY","empty",163],"(",["T_VARIABLE","$data",163],"[",["T_CONSTANT_ENCAPSED_STRING","'number'",163],"]",")",")",["T_WHITESPACE"," ",163],"{",["T_WHITESPACE","\n                ",163],["T_THROW","throw",164],["T_WHITESPACE"," ",164],["T_NEW","new",164],["T_WHITESPACE"," ",164],["T_NS_SEPARATOR","\\",164],["T_STRING","Magento",164],["T_NS_SEPARATOR","\\",164],["T_STRING","Framework",164],["T_NS_SEPARATOR","\\",164],["T_STRING","Exception",164],["T_NS_SEPARATOR","\\",164],["T_STRING","LocalizedException",164],"(",["T_WHITESPACE","\n                    ",164],["T_STRING","__",165],"(",["T_CONSTANT_ENCAPSED_STRING","'Please enter a tracking number.'",165],")",["T_WHITESPACE","\n                ",165],")",";",["T_WHITESPACE","\n            ",166],"}",["T_WHITESPACE","\n\n            ",167],["T_VARIABLE","$shipment",169],["T_OBJECT_OPERATOR","->",169],["T_STRING","addTrack",169],"(",["T_WHITESPACE","\n                ",169],["T_VARIABLE","$this",170],["T_OBJECT_OPERATOR","->",170],["T_STRING","trackFactory",170],["T_OBJECT_OPERATOR","->",170],["T_STRING","create",170],"(",")",["T_OBJECT_OPERATOR","->",170],["T_STRING","addData",170],"(",["T_VARIABLE","$data",170],")",["T_WHITESPACE","\n            ",170],")",";",["T_WHITESPACE","\n        ",171],"}",["T_WHITESPACE","\n\n        ",172],["T_RETURN","return",174],["T_WHITESPACE"," ",174],["T_VARIABLE","$shipment",174],";",["T_WHITESPACE","\n    ",174],"}",["T_WHITESPACE","\n\n    ",175],["T_DOC_COMMENT","\/**\n     * Checks if order item can be shipped.\n     *\n     * Dummy item can be shipped or with his children or\n     * with parent item which is included to shipment.\n     *\n     * @param \\Magento\\Sales\\Model\\Order\\Item $item\n     * @param array $items\n     * @return bool\n     * @SuppressWarnings(PHPMD.CyclomaticComplexity)\n     *\/",177],["T_WHITESPACE","\n    ",187],["T_PROTECTED","protected",188],["T_WHITESPACE"," ",188],["T_FUNCTION","function",188],["T_WHITESPACE"," ",188],["T_STRING","canShipItem",188],"(",["T_VARIABLE","$item",188],",",["T_WHITESPACE"," ",188],["T_ARRAY","array",188],["T_WHITESPACE"," ",188],["T_VARIABLE","$items",188],["T_WHITESPACE"," ",188],"=",["T_WHITESPACE"," ",188],"[","]",")",["T_WHITESPACE","\n    ",188],"{",["T_WHITESPACE","\n        ",189],["T_IF","if",190],["T_WHITESPACE"," ",190],"(",["T_VARIABLE","$item",190],["T_OBJECT_OPERATOR","->",190],["T_STRING","getIsVirtual",190],"(",")",["T_WHITESPACE"," ",190],["T_BOOLEAN_OR","||",190],["T_WHITESPACE"," ",190],["T_VARIABLE","$item",190],["T_OBJECT_OPERATOR","->",190],["T_STRING","getLockedDoShip",190],"(",")",")",["T_WHITESPACE"," ",190],"{",["T_WHITESPACE","\n            ",190],["T_RETURN","return",191],["T_WHITESPACE"," ",191],["T_STRING","false",191],";",["T_WHITESPACE","\n        ",191],"}",["T_WHITESPACE","\n\n        ",192],["T_IF","if",194],["T_WHITESPACE"," ",194],"(",["T_VARIABLE","$item",194],["T_OBJECT_OPERATOR","->",194],["T_STRING","isDummy",194],"(",["T_STRING","true",194],")",")",["T_WHITESPACE"," ",194],"{",["T_WHITESPACE","\n            ",194],["T_IF","if",195],["T_WHITESPACE"," ",195],"(",["T_VARIABLE","$item",195],["T_OBJECT_OPERATOR","->",195],["T_STRING","getHasChildren",195],"(",")",")",["T_WHITESPACE"," ",195],"{",["T_WHITESPACE","\n                ",195],["T_IF","if",196],["T_WHITESPACE"," ",196],"(",["T_VARIABLE","$item",196],["T_OBJECT_OPERATOR","->",196],["T_STRING","isShipSeparately",196],"(",")",")",["T_WHITESPACE"," ",196],"{",["T_WHITESPACE","\n                    ",196],["T_RETURN","return",197],["T_WHITESPACE"," ",197],["T_STRING","true",197],";",["T_WHITESPACE","\n                ",197],"}",["T_WHITESPACE","\n\n                ",198],["T_FOREACH","foreach",200],["T_WHITESPACE"," ",200],"(",["T_VARIABLE","$item",200],["T_OBJECT_OPERATOR","->",200],["T_STRING","getChildrenItems",200],"(",")",["T_WHITESPACE"," ",200],["T_AS","as",200],["T_WHITESPACE"," ",200],["T_VARIABLE","$child",200],")",["T_WHITESPACE"," ",200],"{",["T_WHITESPACE","\n                    ",200],["T_IF","if",201],["T_WHITESPACE"," ",201],"(",["T_VARIABLE","$child",201],["T_OBJECT_OPERATOR","->",201],["T_STRING","getIsVirtual",201],"(",")",")",["T_WHITESPACE"," ",201],"{",["T_WHITESPACE","\n                        ",201],["T_CONTINUE","continue",202],";",["T_WHITESPACE","\n                    ",202],"}",["T_WHITESPACE","\n\n                    ",203],["T_IF","if",205],["T_WHITESPACE"," ",205],"(",["T_EMPTY","empty",205],"(",["T_VARIABLE","$items",205],")",")",["T_WHITESPACE"," ",205],"{",["T_WHITESPACE","\n                        ",205],["T_IF","if",206],["T_WHITESPACE"," ",206],"(",["T_VARIABLE","$child",206],["T_OBJECT_OPERATOR","->",206],["T_STRING","getQtyToShip",206],"(",")",["T_WHITESPACE"," ",206],">",["T_WHITESPACE"," ",206],["T_LNUMBER","0",206],")",["T_WHITESPACE"," ",206],"{",["T_WHITESPACE","\n                            ",206],["T_RETURN","return",207],["T_WHITESPACE"," ",207],["T_STRING","true",207],";",["T_WHITESPACE","\n                        ",207],"}",["T_WHITESPACE","\n                    ",208],"}",["T_WHITESPACE"," ",209],["T_ELSE","else",209],["T_WHITESPACE"," ",209],"{",["T_WHITESPACE","\n                        ",209],["T_IF","if",210],["T_WHITESPACE"," ",210],"(",["T_ISSET","isset",210],"(",["T_VARIABLE","$items",210],"[",["T_VARIABLE","$child",210],["T_OBJECT_OPERATOR","->",210],["T_STRING","getId",210],"(",")","]",")",["T_WHITESPACE"," ",210],["T_BOOLEAN_AND","&&",210],["T_WHITESPACE"," ",210],["T_VARIABLE","$items",210],"[",["T_VARIABLE","$child",210],["T_OBJECT_OPERATOR","->",210],["T_STRING","getId",210],"(",")","]",["T_WHITESPACE"," ",210],">",["T_WHITESPACE"," ",210],["T_LNUMBER","0",210],")",["T_WHITESPACE"," ",210],"{",["T_WHITESPACE","\n                            ",210],["T_RETURN","return",211],["T_WHITESPACE"," ",211],["T_STRING","true",211],";",["T_WHITESPACE","\n                        ",211],"}",["T_WHITESPACE","\n                    ",212],"}",["T_WHITESPACE","\n                ",213],"}",["T_WHITESPACE","\n\n                ",214],["T_RETURN","return",216],["T_WHITESPACE"," ",216],["T_STRING","false",216],";",["T_WHITESPACE","\n            ",216],"}",["T_WHITESPACE"," ",217],["T_ELSEIF","elseif",217],["T_WHITESPACE"," ",217],"(",["T_VARIABLE","$item",217],["T_OBJECT_OPERATOR","->",217],["T_STRING","getParentItem",217],"(",")",")",["T_WHITESPACE"," ",217],"{",["T_WHITESPACE","\n                ",217],["T_VARIABLE","$parent",218],["T_WHITESPACE"," ",218],"=",["T_WHITESPACE"," ",218],["T_VARIABLE","$item",218],["T_OBJECT_OPERATOR","->",218],["T_STRING","getParentItem",218],"(",")",";",["T_WHITESPACE","\n\n                ",218],["T_IF","if",220],["T_WHITESPACE"," ",220],"(",["T_EMPTY","empty",220],"(",["T_VARIABLE","$items",220],")",")",["T_WHITESPACE"," ",220],"{",["T_WHITESPACE","\n                    ",220],["T_RETURN","return",221],["T_WHITESPACE"," ",221],["T_VARIABLE","$parent",221],["T_OBJECT_OPERATOR","->",221],["T_STRING","getQtyToShip",221],"(",")",["T_WHITESPACE"," ",221],">",["T_WHITESPACE"," ",221],["T_LNUMBER","0",221],";",["T_WHITESPACE","\n                ",221],"}",["T_WHITESPACE"," ",222],["T_ELSE","else",222],["T_WHITESPACE"," ",222],"{",["T_WHITESPACE","\n                    ",222],["T_RETURN","return",223],["T_WHITESPACE"," ",223],["T_ISSET","isset",223],"(",["T_VARIABLE","$items",223],"[",["T_VARIABLE","$parent",223],["T_OBJECT_OPERATOR","->",223],["T_STRING","getId",223],"(",")","]",")",["T_WHITESPACE"," ",223],["T_BOOLEAN_AND","&&",223],["T_WHITESPACE"," ",223],["T_VARIABLE","$items",223],"[",["T_VARIABLE","$parent",223],["T_OBJECT_OPERATOR","->",223],["T_STRING","getId",223],"(",")","]",["T_WHITESPACE"," ",223],">",["T_WHITESPACE"," ",223],["T_LNUMBER","0",223],";",["T_WHITESPACE","\n                ",223],"}",["T_WHITESPACE","\n            ",224],"}",["T_WHITESPACE","\n        ",225],"}",["T_WHITESPACE"," ",226],["T_ELSE","else",226],["T_WHITESPACE"," ",226],"{",["T_WHITESPACE","\n            ",226],["T_RETURN","return",227],["T_WHITESPACE"," ",227],["T_VARIABLE","$item",227],["T_OBJECT_OPERATOR","->",227],["T_STRING","getQtyToShip",227],"(",")",["T_WHITESPACE"," ",227],">",["T_WHITESPACE"," ",227],["T_LNUMBER","0",227],";",["T_WHITESPACE","\n        ",227],"}",["T_WHITESPACE","\n    ",228],"}",["T_WHITESPACE","\n\n    ",229],["T_DOC_COMMENT","\/**\n     * @param Item $item\n     * @param string|int|float $qty\n     * @return float|int\n     *\/",231],["T_WHITESPACE","\n    ",235],["T_PRIVATE","private",236],["T_WHITESPACE"," ",236],["T_FUNCTION","function",236],["T_WHITESPACE"," ",236],["T_STRING","castQty",236],"(",["T_NS_SEPARATOR","\\",236],["T_STRING","Magento",236],["T_NS_SEPARATOR","\\",236],["T_STRING","Sales",236],["T_NS_SEPARATOR","\\",236],["T_STRING","Model",236],["T_NS_SEPARATOR","\\",236],["T_STRING","Order",236],["T_NS_SEPARATOR","\\",236],["T_STRING","Item",236],["T_WHITESPACE"," ",236],["T_VARIABLE","$item",236],",",["T_WHITESPACE"," ",236],["T_VARIABLE","$qty",236],")",["T_WHITESPACE","\n    ",236],"{",["T_WHITESPACE","\n        ",237],["T_IF","if",238],["T_WHITESPACE"," ",238],"(",["T_VARIABLE","$item",238],["T_OBJECT_OPERATOR","->",238],["T_STRING","getIsQtyDecimal",238],"(",")",")",["T_WHITESPACE"," ",238],"{",["T_WHITESPACE","\n            ",238],["T_VARIABLE","$qty",239],["T_WHITESPACE"," ",239],"=",["T_WHITESPACE"," ",239],["T_DOUBLE_CAST","(double)",239],["T_VARIABLE","$qty",239],";",["T_WHITESPACE","\n        ",239],"}",["T_WHITESPACE"," ",240],["T_ELSE","else",240],["T_WHITESPACE"," ",240],"{",["T_WHITESPACE","\n            ",240],["T_VARIABLE","$qty",241],["T_WHITESPACE"," ",241],"=",["T_WHITESPACE"," ",241],["T_INT_CAST","(int)",241],["T_VARIABLE","$qty",241],";",["T_WHITESPACE","\n        ",241],"}",["T_WHITESPACE","\n\n        ",242],["T_RETURN","return",244],["T_WHITESPACE"," ",244],["T_VARIABLE","$qty",244],["T_WHITESPACE"," ",244],">",["T_WHITESPACE"," ",244],["T_LNUMBER","0",244],["T_WHITESPACE"," ",244],"?",["T_WHITESPACE"," ",244],["T_VARIABLE","$qty",244],["T_WHITESPACE"," ",244],":",["T_WHITESPACE"," ",244],["T_LNUMBER","0",244],";",["T_WHITESPACE","\n    ",244],"}",["T_WHITESPACE","\n",245],"}",["T_WHITESPACE","\n",246]]
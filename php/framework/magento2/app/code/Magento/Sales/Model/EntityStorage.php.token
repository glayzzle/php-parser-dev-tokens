[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Copyright \u00c2\u00a9 2013-2017 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n *\/",2],["T_WHITESPACE","\n\n",5],["T_NAMESPACE","namespace",7],["T_WHITESPACE"," ",7],["T_STRING","Magento",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Sales",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Model",7],";",["T_WHITESPACE","\n\n",7],["T_USE","use",9],["T_WHITESPACE"," ",9],["T_STRING","Magento",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Framework",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Model",9],["T_NS_SEPARATOR","\\",9],["T_STRING","AbstractModel",9],["T_WHITESPACE"," ",9],["T_AS","as",9],["T_WHITESPACE"," ",9],["T_STRING","FrameworkAbstractModel",9],";",["T_WHITESPACE","\n\n",9],["T_DOC_COMMENT","\/**\n * Class EntityStorage store only one type of entity per instance\n *\/",11],["T_WHITESPACE","\n",13],["T_CLASS","class",14],["T_WHITESPACE"," ",14],["T_STRING","EntityStorage",14],["T_WHITESPACE","\n",14],"{",["T_WHITESPACE","\n    ",15],["T_DOC_COMMENT","\/**\n     * @var array\n     *\/",16],["T_WHITESPACE","\n    ",18],["T_PROTECTED","protected",19],["T_WHITESPACE"," ",19],["T_VARIABLE","$registry",19],["T_WHITESPACE"," ",19],"=",["T_WHITESPACE"," ",19],"[","]",";",["T_WHITESPACE","\n\n    ",19],["T_DOC_COMMENT","\/**\n     * Using for mapping hashes of identifying fields to entity ids\n     *\n     * @var array\n     *\/",21],["T_WHITESPACE","\n    ",25],["T_PROTECTED","protected",26],["T_WHITESPACE"," ",26],["T_VARIABLE","$storageMapper",26],["T_WHITESPACE"," ",26],"=",["T_WHITESPACE"," ",26],"[","]",";",["T_WHITESPACE","\n\n    ",26],["T_DOC_COMMENT","\/**\n     * Using for array concatenation\n     *\/",28],["T_WHITESPACE","\n    ",30],["T_CONST","const",31],["T_WHITESPACE"," ",31],["T_STRING","GLUE",31],["T_WHITESPACE"," ",31],"=",["T_WHITESPACE"," ",31],["T_CONSTANT_ENCAPSED_STRING","''",31],";",["T_WHITESPACE","\n\n    ",31],["T_DOC_COMMENT","\/**\n     * Adds entity using identifying fields mapping, entity should have an id\n     *\n     * @param FrameworkAbstractModel $object\n     * @param array $identifyingFields\n     * @param string $storageName\n     * @return void\n     * @throws \\Magento\\Framework\\Exception\\InputException\n     *\/",33],["T_WHITESPACE","\n    ",41],["T_PUBLIC","public",42],["T_WHITESPACE"," ",42],["T_FUNCTION","function",42],["T_WHITESPACE"," ",42],["T_STRING","addByIdentifyingFields",42],"(",["T_STRING","FrameworkAbstractModel",42],["T_WHITESPACE"," ",42],["T_VARIABLE","$object",42],",",["T_WHITESPACE"," ",42],["T_ARRAY","array",42],["T_WHITESPACE"," ",42],["T_VARIABLE","$identifyingFields",42],",",["T_WHITESPACE"," ",42],["T_VARIABLE","$storageName",42],")",["T_WHITESPACE","\n    ",42],"{",["T_WHITESPACE","\n        ",43],["T_IF","if",44],["T_WHITESPACE"," ",44],"(",["T_EMPTY","empty",44],"(",["T_VARIABLE","$identifyingFields",44],")",")",["T_WHITESPACE"," ",44],"{",["T_WHITESPACE","\n            ",44],["T_THROW","throw",45],["T_WHITESPACE"," ",45],["T_NEW","new",45],["T_WHITESPACE"," ",45],["T_NS_SEPARATOR","\\",45],["T_STRING","Magento",45],["T_NS_SEPARATOR","\\",45],["T_STRING","Framework",45],["T_NS_SEPARATOR","\\",45],["T_STRING","Exception",45],["T_NS_SEPARATOR","\\",45],["T_STRING","InputException",45],"(",["T_STRING","__",45],"(",["T_CONSTANT_ENCAPSED_STRING","'Identifying Fields required'",45],")",")",";",["T_WHITESPACE","\n        ",45],"}",["T_WHITESPACE","\n        ",46],["T_IF","if",47],["T_WHITESPACE"," ",47],"(","!",["T_VARIABLE","$object",47],["T_OBJECT_OPERATOR","->",47],["T_STRING","getId",47],"(",")",")",["T_WHITESPACE"," ",47],"{",["T_WHITESPACE","\n            ",47],["T_THROW","throw",48],["T_WHITESPACE"," ",48],["T_NEW","new",48],["T_WHITESPACE"," ",48],["T_NS_SEPARATOR","\\",48],["T_STRING","Magento",48],["T_NS_SEPARATOR","\\",48],["T_STRING","Framework",48],["T_NS_SEPARATOR","\\",48],["T_STRING","Exception",48],["T_NS_SEPARATOR","\\",48],["T_STRING","InputException",48],"(",["T_STRING","__",48],"(",["T_CONSTANT_ENCAPSED_STRING","'Id required'",48],")",")",";",["T_WHITESPACE","\n        ",48],"}",["T_WHITESPACE","\n        ",49],["T_VARIABLE","$this",50],["T_OBJECT_OPERATOR","->",50],["T_STRING","storageMapper",50],"[",["T_VARIABLE","$storageName",50],"]","[",["T_VARIABLE","$this",50],["T_OBJECT_OPERATOR","->",50],["T_STRING","getHash",50],"(",["T_VARIABLE","$identifyingFields",50],")","]",["T_WHITESPACE"," ",50],"=",["T_WHITESPACE"," ",50],["T_VARIABLE","$object",50],["T_OBJECT_OPERATOR","->",50],["T_STRING","getId",50],"(",")",";",["T_WHITESPACE","\n        ",50],["T_VARIABLE","$this",51],["T_OBJECT_OPERATOR","->",51],["T_STRING","registry",51],"[",["T_VARIABLE","$object",51],["T_OBJECT_OPERATOR","->",51],["T_STRING","getId",51],"(",")","]",["T_WHITESPACE"," ",51],"=",["T_WHITESPACE"," ",51],["T_VARIABLE","$object",51],";",["T_WHITESPACE","\n    ",51],"}",["T_WHITESPACE","\n\n    ",52],["T_DOC_COMMENT","\/**\n     * Add entity to registry if entity in it\n     *\n     * @param \\Magento\\Framework\\Model\\AbstractModel $entity\n     * @return void\n     *\/",54],["T_WHITESPACE","\n    ",59],["T_PUBLIC","public",60],["T_WHITESPACE"," ",60],["T_FUNCTION","function",60],["T_WHITESPACE"," ",60],["T_STRING","add",60],"(",["T_VARIABLE","$entity",60],")",["T_WHITESPACE","\n    ",60],"{",["T_WHITESPACE","\n        ",61],["T_VARIABLE","$this",62],["T_OBJECT_OPERATOR","->",62],["T_STRING","registry",62],"[",["T_VARIABLE","$entity",62],["T_OBJECT_OPERATOR","->",62],["T_STRING","getId",62],"(",")","]",["T_WHITESPACE"," ",62],"=",["T_WHITESPACE"," ",62],["T_VARIABLE","$entity",62],";",["T_WHITESPACE","\n    ",62],"}",["T_WHITESPACE","\n\n    ",63],["T_DOC_COMMENT","\/**\n     * Retrieve entity from registry if entity in it\n     *\n     * @param int $id\n     * @return bool|FrameworkAbstractModel\n     *\/",65],["T_WHITESPACE","\n    ",70],["T_PUBLIC","public",71],["T_WHITESPACE"," ",71],["T_FUNCTION","function",71],["T_WHITESPACE"," ",71],["T_STRING","get",71],"(",["T_VARIABLE","$id",71],")",["T_WHITESPACE","\n    ",71],"{",["T_WHITESPACE","\n        ",72],["T_IF","if",73],["T_WHITESPACE"," ",73],"(",["T_VARIABLE","$this",73],["T_OBJECT_OPERATOR","->",73],["T_STRING","has",73],"(",["T_VARIABLE","$id",73],")",")",["T_WHITESPACE"," ",73],"{",["T_WHITESPACE","\n            ",73],["T_RETURN","return",74],["T_WHITESPACE"," ",74],["T_VARIABLE","$this",74],["T_OBJECT_OPERATOR","->",74],["T_STRING","registry",74],"[",["T_VARIABLE","$id",74],"]",";",["T_WHITESPACE","\n        ",74],"}",["T_WHITESPACE","\n        ",75],["T_RETURN","return",76],["T_WHITESPACE"," ",76],["T_STRING","false",76],";",["T_WHITESPACE","\n    ",76],"}",["T_WHITESPACE","\n\n    ",77],["T_DOC_COMMENT","\/**\n     * Gets entity by identifying fields\n     *\n     * @param array $identifyingFields\n     * @param string $storageName\n     * @return bool|FrameworkAbstractModel\n     *\/",79],["T_WHITESPACE","\n    ",85],["T_PUBLIC","public",86],["T_WHITESPACE"," ",86],["T_FUNCTION","function",86],["T_WHITESPACE"," ",86],["T_STRING","getByIdentifyingFields",86],"(",["T_ARRAY","array",86],["T_WHITESPACE"," ",86],["T_VARIABLE","$identifyingFields",86],",",["T_WHITESPACE"," ",86],["T_VARIABLE","$storageName",86],")",["T_WHITESPACE","\n    ",86],"{",["T_WHITESPACE","\n        ",87],["T_VARIABLE","$hash",88],["T_WHITESPACE"," ",88],"=",["T_WHITESPACE"," ",88],["T_VARIABLE","$this",88],["T_OBJECT_OPERATOR","->",88],["T_STRING","getHash",88],"(",["T_VARIABLE","$identifyingFields",88],")",";",["T_WHITESPACE","\n        ",88],["T_IF","if",89],["T_WHITESPACE"," ",89],"(",["T_ISSET","isset",89],"(",["T_VARIABLE","$this",89],["T_OBJECT_OPERATOR","->",89],["T_STRING","storageMapper",89],"[",["T_VARIABLE","$storageName",89],"]","[",["T_VARIABLE","$hash",89],"]",")",")",["T_WHITESPACE"," ",89],"{",["T_WHITESPACE","\n            ",89],["T_RETURN","return",90],["T_WHITESPACE"," ",90],["T_VARIABLE","$this",90],["T_OBJECT_OPERATOR","->",90],["T_STRING","get",90],"(",["T_VARIABLE","$this",90],["T_OBJECT_OPERATOR","->",90],["T_STRING","storageMapper",90],"[",["T_VARIABLE","$storageName",90],"]","[",["T_VARIABLE","$hash",90],"]",")",";",["T_WHITESPACE","\n        ",90],"}",["T_WHITESPACE","\n        ",91],["T_RETURN","return",92],["T_WHITESPACE"," ",92],["T_STRING","false",92],";",["T_WHITESPACE","\n    ",92],"}",["T_WHITESPACE","\n\n    ",93],["T_DOC_COMMENT","\/**\n     * Remove entity from storage\n     *\n     * @param int $id\n     * @return void\n     *\/",95],["T_WHITESPACE","\n    ",100],["T_PUBLIC","public",101],["T_WHITESPACE"," ",101],["T_FUNCTION","function",101],["T_WHITESPACE"," ",101],["T_STRING","remove",101],"(",["T_VARIABLE","$id",101],")",["T_WHITESPACE","\n    ",101],"{",["T_WHITESPACE","\n        ",102],["T_IF","if",103],["T_WHITESPACE"," ",103],"(",["T_VARIABLE","$this",103],["T_OBJECT_OPERATOR","->",103],["T_STRING","has",103],"(",["T_VARIABLE","$id",103],")",")",["T_WHITESPACE"," ",103],"{",["T_WHITESPACE","\n            ",103],["T_UNSET","unset",104],"(",["T_VARIABLE","$this",104],["T_OBJECT_OPERATOR","->",104],["T_STRING","registry",104],"[",["T_VARIABLE","$id",104],"]",")",";",["T_WHITESPACE","\n        ",104],"}",["T_WHITESPACE","\n    ",105],"}",["T_WHITESPACE","\n\n    ",106],["T_DOC_COMMENT","\/**\n     * Checks if entity is in storage\n     *\n     * @param int $id\n     * @return bool\n     *\/",108],["T_WHITESPACE","\n    ",113],["T_PUBLIC","public",114],["T_WHITESPACE"," ",114],["T_FUNCTION","function",114],["T_WHITESPACE"," ",114],["T_STRING","has",114],"(",["T_VARIABLE","$id",114],")",["T_WHITESPACE","\n    ",114],"{",["T_WHITESPACE","\n        ",115],["T_RETURN","return",116],["T_WHITESPACE"," ",116],["T_ISSET","isset",116],"(",["T_VARIABLE","$this",116],["T_OBJECT_OPERATOR","->",116],["T_STRING","registry",116],"[",["T_VARIABLE","$id",116],"]",")",";",["T_WHITESPACE","\n    ",116],"}",["T_WHITESPACE","\n\n    ",117],["T_DOC_COMMENT","\/**\n     * Gets hash using concatenation of identifying fields\n     *\n     * @param array $fields\n     * @return string\n     *\/",119],["T_WHITESPACE","\n    ",124],["T_PROTECTED","protected",125],["T_WHITESPACE"," ",125],["T_FUNCTION","function",125],["T_WHITESPACE"," ",125],["T_STRING","getHash",125],"(",["T_ARRAY","array",125],["T_WHITESPACE"," ",125],["T_VARIABLE","$fields",125],")",["T_WHITESPACE","\n    ",125],"{",["T_WHITESPACE","\n        ",126],["T_VARIABLE","$stringForKey",127],["T_WHITESPACE"," ",127],"=",["T_WHITESPACE"," ",127],["T_STRING","implode",127],"(",["T_STRING","self",127],["T_DOUBLE_COLON","::",127],["T_STRING","GLUE",127],",",["T_WHITESPACE"," ",127],["T_VARIABLE","$fields",127],")",";",["T_WHITESPACE","\n        ",127],["T_RETURN","return",128],["T_WHITESPACE"," ",128],["T_STRING","sha1",128],"(",["T_VARIABLE","$stringForKey",128],")",";",["T_WHITESPACE","\n    ",128],"}",["T_WHITESPACE","\n",129],"}",["T_WHITESPACE","\n",130]]
[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Copyright \u00c2\u00a9 2013-2017 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n *\/",2],["T_WHITESPACE","\n\n",5],["T_NAMESPACE","namespace",7],["T_WHITESPACE"," ",7],["T_STRING","Magento",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Sales",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Model",7],";",["T_WHITESPACE","\n\n",7],["T_USE","use",9],["T_WHITESPACE"," ",9],["T_STRING","Magento",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Framework",9],["T_NS_SEPARATOR","\\",9],["T_STRING","App",9],["T_NS_SEPARATOR","\\",9],["T_STRING","ResourceConnection",9],";",["T_WHITESPACE","\n",9],["T_USE","use",10],["T_WHITESPACE"," ",10],["T_STRING","Magento",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Sales",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Api",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Data",10],["T_NS_SEPARATOR","\\",10],["T_STRING","InvoiceCommentCreationInterface",10],";",["T_WHITESPACE","\n",10],["T_USE","use",11],["T_WHITESPACE"," ",11],["T_STRING","Magento",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Sales",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Api",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Data",11],["T_NS_SEPARATOR","\\",11],["T_STRING","InvoiceCreationArgumentsInterface",11],";",["T_WHITESPACE","\n",11],["T_USE","use",12],["T_WHITESPACE"," ",12],["T_STRING","Magento",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Sales",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Api",12],["T_NS_SEPARATOR","\\",12],["T_STRING","InvoiceOrderInterface",12],";",["T_WHITESPACE","\n",12],["T_USE","use",13],["T_WHITESPACE"," ",13],["T_STRING","Magento",13],["T_NS_SEPARATOR","\\",13],["T_STRING","Sales",13],["T_NS_SEPARATOR","\\",13],["T_STRING","Api",13],["T_NS_SEPARATOR","\\",13],["T_STRING","OrderRepositoryInterface",13],";",["T_WHITESPACE","\n",13],["T_USE","use",14],["T_WHITESPACE"," ",14],["T_STRING","Magento",14],["T_NS_SEPARATOR","\\",14],["T_STRING","Sales",14],["T_NS_SEPARATOR","\\",14],["T_STRING","Model",14],["T_NS_SEPARATOR","\\",14],["T_STRING","Order",14],["T_NS_SEPARATOR","\\",14],["T_STRING","Config",14],["T_WHITESPACE"," ",14],["T_AS","as",14],["T_WHITESPACE"," ",14],["T_STRING","OrderConfig",14],";",["T_WHITESPACE","\n",14],["T_USE","use",15],["T_WHITESPACE"," ",15],["T_STRING","Magento",15],["T_NS_SEPARATOR","\\",15],["T_STRING","Sales",15],["T_NS_SEPARATOR","\\",15],["T_STRING","Model",15],["T_NS_SEPARATOR","\\",15],["T_STRING","Order",15],["T_NS_SEPARATOR","\\",15],["T_STRING","Invoice",15],["T_NS_SEPARATOR","\\",15],["T_STRING","NotifierInterface",15],";",["T_WHITESPACE","\n",15],["T_USE","use",16],["T_WHITESPACE"," ",16],["T_STRING","Magento",16],["T_NS_SEPARATOR","\\",16],["T_STRING","Sales",16],["T_NS_SEPARATOR","\\",16],["T_STRING","Model",16],["T_NS_SEPARATOR","\\",16],["T_STRING","Order",16],["T_NS_SEPARATOR","\\",16],["T_STRING","InvoiceDocumentFactory",16],";",["T_WHITESPACE","\n",16],["T_USE","use",17],["T_WHITESPACE"," ",17],["T_STRING","Magento",17],["T_NS_SEPARATOR","\\",17],["T_STRING","Sales",17],["T_NS_SEPARATOR","\\",17],["T_STRING","Model",17],["T_NS_SEPARATOR","\\",17],["T_STRING","Order",17],["T_NS_SEPARATOR","\\",17],["T_STRING","InvoiceRepository",17],";",["T_WHITESPACE","\n",17],["T_USE","use",18],["T_WHITESPACE"," ",18],["T_STRING","Magento",18],["T_NS_SEPARATOR","\\",18],["T_STRING","Sales",18],["T_NS_SEPARATOR","\\",18],["T_STRING","Model",18],["T_NS_SEPARATOR","\\",18],["T_STRING","Order",18],["T_NS_SEPARATOR","\\",18],["T_STRING","OrderStateResolverInterface",18],";",["T_WHITESPACE","\n",18],["T_USE","use",19],["T_WHITESPACE"," ",19],["T_STRING","Magento",19],["T_NS_SEPARATOR","\\",19],["T_STRING","Sales",19],["T_NS_SEPARATOR","\\",19],["T_STRING","Model",19],["T_NS_SEPARATOR","\\",19],["T_STRING","Order",19],["T_NS_SEPARATOR","\\",19],["T_STRING","PaymentAdapterInterface",19],";",["T_WHITESPACE","\n",19],["T_USE","use",20],["T_WHITESPACE"," ",20],["T_STRING","Magento",20],["T_NS_SEPARATOR","\\",20],["T_STRING","Sales",20],["T_NS_SEPARATOR","\\",20],["T_STRING","Model",20],["T_NS_SEPARATOR","\\",20],["T_STRING","Order",20],["T_NS_SEPARATOR","\\",20],["T_STRING","Validation",20],["T_NS_SEPARATOR","\\",20],["T_STRING","InvoiceOrderInterface",20],["T_WHITESPACE"," ",20],["T_AS","as",20],["T_WHITESPACE"," ",20],["T_STRING","InvoiceOrderValidator",20],";",["T_WHITESPACE","\n",20],["T_USE","use",21],["T_WHITESPACE"," ",21],["T_STRING","Psr",21],["T_NS_SEPARATOR","\\",21],["T_STRING","Log",21],["T_NS_SEPARATOR","\\",21],["T_STRING","LoggerInterface",21],";",["T_WHITESPACE","\n\n",21],["T_DOC_COMMENT","\/**\n * Class InvoiceOrder\n * @SuppressWarnings(PHPMD.CouplingBetweenObjects)\n *\/",23],["T_WHITESPACE","\n",26],["T_CLASS","class",27],["T_WHITESPACE"," ",27],["T_STRING","InvoiceOrder",27],["T_WHITESPACE"," ",27],["T_IMPLEMENTS","implements",27],["T_WHITESPACE"," ",27],["T_STRING","InvoiceOrderInterface",27],["T_WHITESPACE","\n",27],"{",["T_WHITESPACE","\n    ",28],["T_DOC_COMMENT","\/**\n     * @var ResourceConnection\n     *\/",29],["T_WHITESPACE","\n    ",31],["T_PRIVATE","private",32],["T_WHITESPACE"," ",32],["T_VARIABLE","$resourceConnection",32],";",["T_WHITESPACE","\n\n    ",32],["T_DOC_COMMENT","\/**\n     * @var OrderRepositoryInterface\n     *\/",34],["T_WHITESPACE","\n    ",36],["T_PRIVATE","private",37],["T_WHITESPACE"," ",37],["T_VARIABLE","$orderRepository",37],";",["T_WHITESPACE","\n\n    ",37],["T_DOC_COMMENT","\/**\n     * @var InvoiceDocumentFactory\n     *\/",39],["T_WHITESPACE","\n    ",41],["T_PRIVATE","private",42],["T_WHITESPACE"," ",42],["T_VARIABLE","$invoiceDocumentFactory",42],";",["T_WHITESPACE","\n\n    ",42],["T_DOC_COMMENT","\/**\n     * @var PaymentAdapterInterface\n     *\/",44],["T_WHITESPACE","\n    ",46],["T_PRIVATE","private",47],["T_WHITESPACE"," ",47],["T_VARIABLE","$paymentAdapter",47],";",["T_WHITESPACE","\n\n    ",47],["T_DOC_COMMENT","\/**\n     * @var OrderStateResolverInterface\n     *\/",49],["T_WHITESPACE","\n    ",51],["T_PRIVATE","private",52],["T_WHITESPACE"," ",52],["T_VARIABLE","$orderStateResolver",52],";",["T_WHITESPACE","\n\n    ",52],["T_DOC_COMMENT","\/**\n     * @var OrderConfig\n     *\/",54],["T_WHITESPACE","\n    ",56],["T_PRIVATE","private",57],["T_WHITESPACE"," ",57],["T_VARIABLE","$config",57],";",["T_WHITESPACE","\n\n    ",57],["T_DOC_COMMENT","\/**\n     * @var InvoiceRepository\n     *\/",59],["T_WHITESPACE","\n    ",61],["T_PRIVATE","private",62],["T_WHITESPACE"," ",62],["T_VARIABLE","$invoiceRepository",62],";",["T_WHITESPACE","\n\n    ",62],["T_DOC_COMMENT","\/**\n     * @var InvoiceOrderValidator\n     *\/",64],["T_WHITESPACE","\n    ",66],["T_PRIVATE","private",67],["T_WHITESPACE"," ",67],["T_VARIABLE","$invoiceOrderValidator",67],";",["T_WHITESPACE","\n\n    ",67],["T_DOC_COMMENT","\/**\n     * @var NotifierInterface\n     *\/",69],["T_WHITESPACE","\n    ",71],["T_PRIVATE","private",72],["T_WHITESPACE"," ",72],["T_VARIABLE","$notifierInterface",72],";",["T_WHITESPACE","\n\n    ",72],["T_DOC_COMMENT","\/**\n     * @var LoggerInterface\n     *\/",74],["T_WHITESPACE","\n    ",76],["T_PRIVATE","private",77],["T_WHITESPACE"," ",77],["T_VARIABLE","$logger",77],";",["T_WHITESPACE","\n\n    ",77],["T_DOC_COMMENT","\/**\n     * InvoiceOrder constructor.\n     * @param ResourceConnection $resourceConnection\n     * @param OrderRepositoryInterface $orderRepository\n     * @param InvoiceDocumentFactory $invoiceDocumentFactory\n     * @param PaymentAdapterInterface $paymentAdapter\n     * @param OrderStateResolverInterface $orderStateResolver\n     * @param OrderConfig $config\n     * @param InvoiceRepository $invoiceRepository\n     * @param InvoiceOrderValidator $invoiceOrderValidator\n     * @param NotifierInterface $notifierInterface\n     * @param LoggerInterface $logger\n     * @SuppressWarnings(PHPMD.ExcessiveParameterList)\n     *\/",79],["T_WHITESPACE","\n    ",92],["T_PUBLIC","public",93],["T_WHITESPACE"," ",93],["T_FUNCTION","function",93],["T_WHITESPACE"," ",93],["T_STRING","__construct",93],"(",["T_WHITESPACE","\n        ",93],["T_STRING","ResourceConnection",94],["T_WHITESPACE"," ",94],["T_VARIABLE","$resourceConnection",94],",",["T_WHITESPACE","\n        ",94],["T_STRING","OrderRepositoryInterface",95],["T_WHITESPACE"," ",95],["T_VARIABLE","$orderRepository",95],",",["T_WHITESPACE","\n        ",95],["T_STRING","InvoiceDocumentFactory",96],["T_WHITESPACE"," ",96],["T_VARIABLE","$invoiceDocumentFactory",96],",",["T_WHITESPACE","\n        ",96],["T_STRING","PaymentAdapterInterface",97],["T_WHITESPACE"," ",97],["T_VARIABLE","$paymentAdapter",97],",",["T_WHITESPACE","\n        ",97],["T_STRING","OrderStateResolverInterface",98],["T_WHITESPACE"," ",98],["T_VARIABLE","$orderStateResolver",98],",",["T_WHITESPACE","\n        ",98],["T_STRING","OrderConfig",99],["T_WHITESPACE"," ",99],["T_VARIABLE","$config",99],",",["T_WHITESPACE","\n        ",99],["T_STRING","InvoiceRepository",100],["T_WHITESPACE"," ",100],["T_VARIABLE","$invoiceRepository",100],",",["T_WHITESPACE","\n        ",100],["T_STRING","InvoiceOrderValidator",101],["T_WHITESPACE"," ",101],["T_VARIABLE","$invoiceOrderValidator",101],",",["T_WHITESPACE","\n        ",101],["T_STRING","NotifierInterface",102],["T_WHITESPACE"," ",102],["T_VARIABLE","$notifierInterface",102],",",["T_WHITESPACE","\n        ",102],["T_STRING","LoggerInterface",103],["T_WHITESPACE"," ",103],["T_VARIABLE","$logger",103],["T_WHITESPACE","\n    ",103],")",["T_WHITESPACE"," ",104],"{",["T_WHITESPACE","\n        ",104],["T_VARIABLE","$this",105],["T_OBJECT_OPERATOR","->",105],["T_STRING","resourceConnection",105],["T_WHITESPACE"," ",105],"=",["T_WHITESPACE"," ",105],["T_VARIABLE","$resourceConnection",105],";",["T_WHITESPACE","\n        ",105],["T_VARIABLE","$this",106],["T_OBJECT_OPERATOR","->",106],["T_STRING","orderRepository",106],["T_WHITESPACE"," ",106],"=",["T_WHITESPACE"," ",106],["T_VARIABLE","$orderRepository",106],";",["T_WHITESPACE","\n        ",106],["T_VARIABLE","$this",107],["T_OBJECT_OPERATOR","->",107],["T_STRING","invoiceDocumentFactory",107],["T_WHITESPACE"," ",107],"=",["T_WHITESPACE"," ",107],["T_VARIABLE","$invoiceDocumentFactory",107],";",["T_WHITESPACE","\n        ",107],["T_VARIABLE","$this",108],["T_OBJECT_OPERATOR","->",108],["T_STRING","paymentAdapter",108],["T_WHITESPACE"," ",108],"=",["T_WHITESPACE"," ",108],["T_VARIABLE","$paymentAdapter",108],";",["T_WHITESPACE","\n        ",108],["T_VARIABLE","$this",109],["T_OBJECT_OPERATOR","->",109],["T_STRING","orderStateResolver",109],["T_WHITESPACE"," ",109],"=",["T_WHITESPACE"," ",109],["T_VARIABLE","$orderStateResolver",109],";",["T_WHITESPACE","\n        ",109],["T_VARIABLE","$this",110],["T_OBJECT_OPERATOR","->",110],["T_STRING","config",110],["T_WHITESPACE"," ",110],"=",["T_WHITESPACE"," ",110],["T_VARIABLE","$config",110],";",["T_WHITESPACE","\n        ",110],["T_VARIABLE","$this",111],["T_OBJECT_OPERATOR","->",111],["T_STRING","invoiceRepository",111],["T_WHITESPACE"," ",111],"=",["T_WHITESPACE"," ",111],["T_VARIABLE","$invoiceRepository",111],";",["T_WHITESPACE","\n        ",111],["T_VARIABLE","$this",112],["T_OBJECT_OPERATOR","->",112],["T_STRING","invoiceOrderValidator",112],["T_WHITESPACE"," ",112],"=",["T_WHITESPACE"," ",112],["T_VARIABLE","$invoiceOrderValidator",112],";",["T_WHITESPACE","\n        ",112],["T_VARIABLE","$this",113],["T_OBJECT_OPERATOR","->",113],["T_STRING","notifierInterface",113],["T_WHITESPACE"," ",113],"=",["T_WHITESPACE"," ",113],["T_VARIABLE","$notifierInterface",113],";",["T_WHITESPACE","\n        ",113],["T_VARIABLE","$this",114],["T_OBJECT_OPERATOR","->",114],["T_STRING","logger",114],["T_WHITESPACE"," ",114],"=",["T_WHITESPACE"," ",114],["T_VARIABLE","$logger",114],";",["T_WHITESPACE","\n    ",114],"}",["T_WHITESPACE","\n\n    ",115],["T_DOC_COMMENT","\/**\n     * @param int $orderId\n     * @param bool $capture\n     * @param array $items\n     * @param bool $notify\n     * @param bool $appendComment\n     * @param \\Magento\\Sales\\Api\\Data\\InvoiceCommentCreationInterface|null $comment\n     * @param \\Magento\\Sales\\Api\\Data\\InvoiceCreationArgumentsInterface|null $arguments\n     * @return int\n     * @throws \\Magento\\Sales\\Api\\Exception\\DocumentValidationExceptionInterface\n     * @throws \\Magento\\Sales\\Api\\Exception\\CouldNotInvoiceExceptionInterface\n     * @throws \\Magento\\Framework\\Exception\\InputException\n     * @throws \\Magento\\Framework\\Exception\\NoSuchEntityException\n     * @throws \\DomainException\n     *\/",117],["T_WHITESPACE","\n    ",131],["T_PUBLIC","public",132],["T_WHITESPACE"," ",132],["T_FUNCTION","function",132],["T_WHITESPACE"," ",132],["T_STRING","execute",132],"(",["T_WHITESPACE","\n        ",132],["T_VARIABLE","$orderId",133],",",["T_WHITESPACE","\n        ",133],["T_VARIABLE","$capture",134],["T_WHITESPACE"," ",134],"=",["T_WHITESPACE"," ",134],["T_STRING","false",134],",",["T_WHITESPACE","\n        ",134],["T_ARRAY","array",135],["T_WHITESPACE"," ",135],["T_VARIABLE","$items",135],["T_WHITESPACE"," ",135],"=",["T_WHITESPACE"," ",135],"[","]",",",["T_WHITESPACE","\n        ",135],["T_VARIABLE","$notify",136],["T_WHITESPACE"," ",136],"=",["T_WHITESPACE"," ",136],["T_STRING","false",136],",",["T_WHITESPACE","\n        ",136],["T_VARIABLE","$appendComment",137],["T_WHITESPACE"," ",137],"=",["T_WHITESPACE"," ",137],["T_STRING","false",137],",",["T_WHITESPACE","\n        ",137],["T_STRING","InvoiceCommentCreationInterface",138],["T_WHITESPACE"," ",138],["T_VARIABLE","$comment",138],["T_WHITESPACE"," ",138],"=",["T_WHITESPACE"," ",138],["T_STRING","null",138],",",["T_WHITESPACE","\n        ",138],["T_STRING","InvoiceCreationArgumentsInterface",139],["T_WHITESPACE"," ",139],["T_VARIABLE","$arguments",139],["T_WHITESPACE"," ",139],"=",["T_WHITESPACE"," ",139],["T_STRING","null",139],["T_WHITESPACE","\n    ",139],")",["T_WHITESPACE"," ",140],"{",["T_WHITESPACE","\n        ",140],["T_VARIABLE","$connection",141],["T_WHITESPACE"," ",141],"=",["T_WHITESPACE"," ",141],["T_VARIABLE","$this",141],["T_OBJECT_OPERATOR","->",141],["T_STRING","resourceConnection",141],["T_OBJECT_OPERATOR","->",141],["T_STRING","getConnection",141],"(",["T_CONSTANT_ENCAPSED_STRING","'sales'",141],")",";",["T_WHITESPACE","\n        ",141],["T_VARIABLE","$order",142],["T_WHITESPACE"," ",142],"=",["T_WHITESPACE"," ",142],["T_VARIABLE","$this",142],["T_OBJECT_OPERATOR","->",142],["T_STRING","orderRepository",142],["T_OBJECT_OPERATOR","->",142],["T_STRING","get",142],"(",["T_VARIABLE","$orderId",142],")",";",["T_WHITESPACE","\n        ",142],["T_VARIABLE","$invoice",143],["T_WHITESPACE"," ",143],"=",["T_WHITESPACE"," ",143],["T_VARIABLE","$this",143],["T_OBJECT_OPERATOR","->",143],["T_STRING","invoiceDocumentFactory",143],["T_OBJECT_OPERATOR","->",143],["T_STRING","create",143],"(",["T_WHITESPACE","\n            ",143],["T_VARIABLE","$order",144],",",["T_WHITESPACE","\n            ",144],["T_VARIABLE","$items",145],",",["T_WHITESPACE","\n            ",145],["T_VARIABLE","$comment",146],",",["T_WHITESPACE","\n            ",146],"(",["T_VARIABLE","$appendComment",147],["T_WHITESPACE"," ",147],["T_BOOLEAN_AND","&&",147],["T_WHITESPACE"," ",147],["T_VARIABLE","$notify",147],")",",",["T_WHITESPACE","\n            ",147],["T_VARIABLE","$arguments",148],["T_WHITESPACE","\n        ",148],")",";",["T_WHITESPACE","\n        ",149],["T_VARIABLE","$errorMessages",150],["T_WHITESPACE"," ",150],"=",["T_WHITESPACE"," ",150],["T_VARIABLE","$this",150],["T_OBJECT_OPERATOR","->",150],["T_STRING","invoiceOrderValidator",150],["T_OBJECT_OPERATOR","->",150],["T_STRING","validate",150],"(",["T_WHITESPACE","\n            ",150],["T_VARIABLE","$order",151],",",["T_WHITESPACE","\n            ",151],["T_VARIABLE","$invoice",152],",",["T_WHITESPACE","\n            ",152],["T_VARIABLE","$capture",153],",",["T_WHITESPACE","\n            ",153],["T_VARIABLE","$items",154],",",["T_WHITESPACE","\n            ",154],["T_VARIABLE","$notify",155],",",["T_WHITESPACE","\n            ",155],["T_VARIABLE","$appendComment",156],",",["T_WHITESPACE","\n            ",156],["T_VARIABLE","$comment",157],",",["T_WHITESPACE","\n            ",157],["T_VARIABLE","$arguments",158],["T_WHITESPACE","\n        ",158],")",";",["T_WHITESPACE","\n        ",159],["T_IF","if",160],["T_WHITESPACE"," ",160],"(",["T_VARIABLE","$errorMessages",160],["T_OBJECT_OPERATOR","->",160],["T_STRING","hasMessages",160],"(",")",")",["T_WHITESPACE"," ",160],"{",["T_WHITESPACE","\n            ",160],["T_THROW","throw",161],["T_WHITESPACE"," ",161],["T_NEW","new",161],["T_WHITESPACE"," ",161],["T_NS_SEPARATOR","\\",161],["T_STRING","Magento",161],["T_NS_SEPARATOR","\\",161],["T_STRING","Sales",161],["T_NS_SEPARATOR","\\",161],["T_STRING","Exception",161],["T_NS_SEPARATOR","\\",161],["T_STRING","DocumentValidationException",161],"(",["T_WHITESPACE","\n                ",161],["T_STRING","__",162],"(",["T_CONSTANT_ENCAPSED_STRING","\"Invoice Document Validation Error(s):\\n\"",162],["T_WHITESPACE"," ",162],".",["T_WHITESPACE"," ",162],["T_STRING","implode",162],"(",["T_CONSTANT_ENCAPSED_STRING","\"\\n\"",162],",",["T_WHITESPACE"," ",162],["T_VARIABLE","$errorMessages",162],["T_OBJECT_OPERATOR","->",162],["T_STRING","getMessages",162],"(",")",")",")",["T_WHITESPACE","\n            ",162],")",";",["T_WHITESPACE","\n        ",163],"}",["T_WHITESPACE","\n        ",164],["T_VARIABLE","$connection",165],["T_OBJECT_OPERATOR","->",165],["T_STRING","beginTransaction",165],"(",")",";",["T_WHITESPACE","\n        ",165],["T_TRY","try",166],["T_WHITESPACE"," ",166],"{",["T_WHITESPACE","\n            ",166],["T_VARIABLE","$order",167],["T_WHITESPACE"," ",167],"=",["T_WHITESPACE"," ",167],["T_VARIABLE","$this",167],["T_OBJECT_OPERATOR","->",167],["T_STRING","paymentAdapter",167],["T_OBJECT_OPERATOR","->",167],["T_STRING","pay",167],"(",["T_VARIABLE","$order",167],",",["T_WHITESPACE"," ",167],["T_VARIABLE","$invoice",167],",",["T_WHITESPACE"," ",167],["T_VARIABLE","$capture",167],")",";",["T_WHITESPACE","\n            ",167],["T_VARIABLE","$order",168],["T_OBJECT_OPERATOR","->",168],["T_STRING","setState",168],"(",["T_WHITESPACE","\n                ",168],["T_VARIABLE","$this",169],["T_OBJECT_OPERATOR","->",169],["T_STRING","orderStateResolver",169],["T_OBJECT_OPERATOR","->",169],["T_STRING","getStateForOrder",169],"(",["T_VARIABLE","$order",169],",",["T_WHITESPACE"," ",169],"[",["T_STRING","OrderStateResolverInterface",169],["T_DOUBLE_COLON","::",169],["T_STRING","IN_PROGRESS",169],"]",")",["T_WHITESPACE","\n            ",169],")",";",["T_WHITESPACE","\n            ",170],["T_VARIABLE","$order",171],["T_OBJECT_OPERATOR","->",171],["T_STRING","setStatus",171],"(",["T_VARIABLE","$this",171],["T_OBJECT_OPERATOR","->",171],["T_STRING","config",171],["T_OBJECT_OPERATOR","->",171],["T_STRING","getStateDefaultStatus",171],"(",["T_VARIABLE","$order",171],["T_OBJECT_OPERATOR","->",171],["T_STRING","getState",171],"(",")",")",")",";",["T_WHITESPACE","\n            ",171],["T_VARIABLE","$invoice",172],["T_OBJECT_OPERATOR","->",172],["T_STRING","setState",172],"(",["T_NS_SEPARATOR","\\",172],["T_STRING","Magento",172],["T_NS_SEPARATOR","\\",172],["T_STRING","Sales",172],["T_NS_SEPARATOR","\\",172],["T_STRING","Model",172],["T_NS_SEPARATOR","\\",172],["T_STRING","Order",172],["T_NS_SEPARATOR","\\",172],["T_STRING","Invoice",172],["T_DOUBLE_COLON","::",172],["T_STRING","STATE_PAID",172],")",";",["T_WHITESPACE","\n            ",172],["T_VARIABLE","$this",173],["T_OBJECT_OPERATOR","->",173],["T_STRING","invoiceRepository",173],["T_OBJECT_OPERATOR","->",173],["T_STRING","save",173],"(",["T_VARIABLE","$invoice",173],")",";",["T_WHITESPACE","\n            ",173],["T_VARIABLE","$this",174],["T_OBJECT_OPERATOR","->",174],["T_STRING","orderRepository",174],["T_OBJECT_OPERATOR","->",174],["T_STRING","save",174],"(",["T_VARIABLE","$order",174],")",";",["T_WHITESPACE","\n            ",174],["T_VARIABLE","$connection",175],["T_OBJECT_OPERATOR","->",175],["T_STRING","commit",175],"(",")",";",["T_WHITESPACE","\n        ",175],"}",["T_WHITESPACE"," ",176],["T_CATCH","catch",176],["T_WHITESPACE"," ",176],"(",["T_NS_SEPARATOR","\\",176],["T_STRING","Exception",176],["T_WHITESPACE"," ",176],["T_VARIABLE","$e",176],")",["T_WHITESPACE"," ",176],"{",["T_WHITESPACE","\n            ",176],["T_VARIABLE","$this",177],["T_OBJECT_OPERATOR","->",177],["T_STRING","logger",177],["T_OBJECT_OPERATOR","->",177],["T_STRING","critical",177],"(",["T_VARIABLE","$e",177],")",";",["T_WHITESPACE","\n            ",177],["T_VARIABLE","$connection",178],["T_OBJECT_OPERATOR","->",178],["T_STRING","rollBack",178],"(",")",";",["T_WHITESPACE","\n            ",178],["T_THROW","throw",179],["T_WHITESPACE"," ",179],["T_NEW","new",179],["T_WHITESPACE"," ",179],["T_NS_SEPARATOR","\\",179],["T_STRING","Magento",179],["T_NS_SEPARATOR","\\",179],["T_STRING","Sales",179],["T_NS_SEPARATOR","\\",179],["T_STRING","Exception",179],["T_NS_SEPARATOR","\\",179],["T_STRING","CouldNotInvoiceException",179],"(",["T_WHITESPACE","\n                ",179],["T_STRING","__",180],"(",["T_CONSTANT_ENCAPSED_STRING","'Could not save an invoice, see error log for details'",180],")",["T_WHITESPACE","\n            ",180],")",";",["T_WHITESPACE","\n        ",181],"}",["T_WHITESPACE","\n        ",182],["T_IF","if",183],["T_WHITESPACE"," ",183],"(",["T_VARIABLE","$notify",183],")",["T_WHITESPACE"," ",183],"{",["T_WHITESPACE","\n            ",183],["T_IF","if",184],["T_WHITESPACE"," ",184],"(","!",["T_VARIABLE","$appendComment",184],")",["T_WHITESPACE"," ",184],"{",["T_WHITESPACE","\n                ",184],["T_VARIABLE","$comment",185],["T_WHITESPACE"," ",185],"=",["T_WHITESPACE"," ",185],["T_STRING","null",185],";",["T_WHITESPACE","\n            ",185],"}",["T_WHITESPACE","\n            ",186],["T_VARIABLE","$this",187],["T_OBJECT_OPERATOR","->",187],["T_STRING","notifierInterface",187],["T_OBJECT_OPERATOR","->",187],["T_STRING","notify",187],"(",["T_VARIABLE","$order",187],",",["T_WHITESPACE"," ",187],["T_VARIABLE","$invoice",187],",",["T_WHITESPACE"," ",187],["T_VARIABLE","$comment",187],")",";",["T_WHITESPACE","\n        ",187],"}",["T_WHITESPACE","\n        ",188],["T_RETURN","return",189],["T_WHITESPACE"," ",189],["T_VARIABLE","$invoice",189],["T_OBJECT_OPERATOR","->",189],["T_STRING","getEntityId",189],"(",")",";",["T_WHITESPACE","\n    ",189],"}",["T_WHITESPACE","\n",190],"}",["T_WHITESPACE","\n",191]]
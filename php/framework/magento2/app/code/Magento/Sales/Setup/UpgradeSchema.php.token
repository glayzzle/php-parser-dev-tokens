[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Copyright \u00c2\u00a9 2013-2017 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n *\/",2],["T_WHITESPACE","\n",5],["T_NAMESPACE","namespace",6],["T_WHITESPACE"," ",6],["T_STRING","Magento",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Sales",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Setup",6],";",["T_WHITESPACE","\n\n",6],["T_USE","use",8],["T_WHITESPACE"," ",8],["T_STRING","Magento",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Framework",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Setup",8],["T_NS_SEPARATOR","\\",8],["T_STRING","UpgradeSchemaInterface",8],";",["T_WHITESPACE","\n",8],["T_USE","use",9],["T_WHITESPACE"," ",9],["T_STRING","Magento",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Framework",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Setup",9],["T_NS_SEPARATOR","\\",9],["T_STRING","ModuleContextInterface",9],";",["T_WHITESPACE","\n",9],["T_USE","use",10],["T_WHITESPACE"," ",10],["T_STRING","Magento",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Framework",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Setup",10],["T_NS_SEPARATOR","\\",10],["T_STRING","SchemaSetupInterface",10],";",["T_WHITESPACE","\n\n",10],["T_DOC_COMMENT","\/**\n * @codeCoverageIgnore\n *\/",12],["T_WHITESPACE","\n",14],["T_CLASS","class",15],["T_WHITESPACE"," ",15],["T_STRING","UpgradeSchema",15],["T_WHITESPACE"," ",15],["T_IMPLEMENTS","implements",15],["T_WHITESPACE"," ",15],["T_STRING","UpgradeSchemaInterface",15],["T_WHITESPACE","\n",15],"{",["T_WHITESPACE","\n    ",16],["T_DOC_COMMENT","\/**\n     * @var string\n     *\/",17],["T_WHITESPACE","\n    ",19],["T_PRIVATE","private",20],["T_WHITESPACE"," ",20],["T_STATIC","static",20],["T_WHITESPACE"," ",20],["T_VARIABLE","$connectionName",20],["T_WHITESPACE"," ",20],"=",["T_WHITESPACE"," ",20],["T_CONSTANT_ENCAPSED_STRING","'sales'",20],";",["T_WHITESPACE","\n\n    ",20],["T_DOC_COMMENT","\/**\n     * {@inheritdoc}\n     *\/",22],["T_WHITESPACE","\n    ",24],["T_PUBLIC","public",25],["T_WHITESPACE"," ",25],["T_FUNCTION","function",25],["T_WHITESPACE"," ",25],["T_STRING","upgrade",25],"(",["T_STRING","SchemaSetupInterface",25],["T_WHITESPACE"," ",25],["T_VARIABLE","$setup",25],",",["T_WHITESPACE"," ",25],["T_STRING","ModuleContextInterface",25],["T_WHITESPACE"," ",25],["T_VARIABLE","$context",25],")",["T_WHITESPACE","\n    ",25],"{",["T_WHITESPACE","\n        ",26],["T_VARIABLE","$installer",27],["T_WHITESPACE"," ",27],"=",["T_WHITESPACE"," ",27],["T_VARIABLE","$setup",27],";",["T_WHITESPACE","\n        ",27],["T_VARIABLE","$installer",28],["T_OBJECT_OPERATOR","->",28],["T_STRING","startSetup",28],"(",")",";",["T_WHITESPACE","\n        ",28],["T_IF","if",29],["T_WHITESPACE"," ",29],"(",["T_STRING","version_compare",29],"(",["T_VARIABLE","$context",29],["T_OBJECT_OPERATOR","->",29],["T_STRING","getVersion",29],"(",")",",",["T_WHITESPACE"," ",29],["T_CONSTANT_ENCAPSED_STRING","'2.0.2'",29],",",["T_WHITESPACE"," ",29],["T_CONSTANT_ENCAPSED_STRING","'<'",29],")",")",["T_WHITESPACE"," ",29],"{",["T_WHITESPACE","\n            ",29],["T_VARIABLE","$connection",30],["T_WHITESPACE"," ",30],"=",["T_WHITESPACE"," ",30],["T_VARIABLE","$installer",30],["T_OBJECT_OPERATOR","->",30],["T_STRING","getConnection",30],"(",["T_STRING","self",30],["T_DOUBLE_COLON","::",30],["T_VARIABLE","$connectionName",30],")",";",["T_WHITESPACE","\n            ",30],["T_COMMENT","\/\/sales_bestsellers_aggregated_daily\n",31],["T_WHITESPACE","            ",32],["T_VARIABLE","$connection",32],["T_OBJECT_OPERATOR","->",32],["T_STRING","dropForeignKey",32],"(",["T_WHITESPACE","\n                ",32],["T_VARIABLE","$installer",33],["T_OBJECT_OPERATOR","->",33],["T_STRING","getTable",33],"(",["T_CONSTANT_ENCAPSED_STRING","'sales_bestsellers_aggregated_daily'",33],",",["T_WHITESPACE"," ",33],["T_STRING","self",33],["T_DOUBLE_COLON","::",33],["T_VARIABLE","$connectionName",33],")",",",["T_WHITESPACE","\n                ",33],["T_VARIABLE","$installer",34],["T_OBJECT_OPERATOR","->",34],["T_STRING","getFkName",34],"(",["T_WHITESPACE","\n                    ",34],["T_CONSTANT_ENCAPSED_STRING","'sales_bestsellers_aggregated_daily'",35],",",["T_WHITESPACE","\n                    ",35],["T_CONSTANT_ENCAPSED_STRING","'product_id'",36],",",["T_WHITESPACE","\n                    ",36],["T_CONSTANT_ENCAPSED_STRING","'catalog_product_entity'",37],",",["T_WHITESPACE","\n                    ",37],["T_CONSTANT_ENCAPSED_STRING","'entity_id'",38],",",["T_WHITESPACE","\n                    ",38],["T_STRING","self",39],["T_DOUBLE_COLON","::",39],["T_VARIABLE","$connectionName",39],["T_WHITESPACE","\n                ",39],")",["T_WHITESPACE","\n            ",40],")",";",["T_WHITESPACE","\n            ",41],["T_COMMENT","\/\/sales_bestsellers_aggregated_monthly\n",42],["T_WHITESPACE","            ",43],["T_VARIABLE","$connection",43],["T_OBJECT_OPERATOR","->",43],["T_STRING","dropForeignKey",43],"(",["T_WHITESPACE","\n                ",43],["T_VARIABLE","$installer",44],["T_OBJECT_OPERATOR","->",44],["T_STRING","getTable",44],"(",["T_CONSTANT_ENCAPSED_STRING","'sales_bestsellers_aggregated_monthly'",44],",",["T_WHITESPACE"," ",44],["T_STRING","self",44],["T_DOUBLE_COLON","::",44],["T_VARIABLE","$connectionName",44],")",",",["T_WHITESPACE","\n                ",44],["T_VARIABLE","$installer",45],["T_OBJECT_OPERATOR","->",45],["T_STRING","getFkName",45],"(",["T_WHITESPACE","\n                    ",45],["T_CONSTANT_ENCAPSED_STRING","'sales_bestsellers_aggregated_monthly'",46],",",["T_WHITESPACE","\n                    ",46],["T_CONSTANT_ENCAPSED_STRING","'product_id'",47],",",["T_WHITESPACE","\n                    ",47],["T_CONSTANT_ENCAPSED_STRING","'catalog_product_entity'",48],",",["T_WHITESPACE","\n                    ",48],["T_CONSTANT_ENCAPSED_STRING","'entity_id'",49],",",["T_WHITESPACE","\n                    ",49],["T_STRING","self",50],["T_DOUBLE_COLON","::",50],["T_VARIABLE","$connectionName",50],["T_WHITESPACE","\n                ",50],")",["T_WHITESPACE","\n            ",51],")",";",["T_WHITESPACE","\n\n            ",52],["T_COMMENT","\/\/sales_bestsellers_aggregated_yearly\n",54],["T_WHITESPACE","            ",55],["T_VARIABLE","$connection",55],["T_OBJECT_OPERATOR","->",55],["T_STRING","dropForeignKey",55],"(",["T_WHITESPACE","\n                ",55],["T_VARIABLE","$installer",56],["T_OBJECT_OPERATOR","->",56],["T_STRING","getTable",56],"(",["T_CONSTANT_ENCAPSED_STRING","'sales_bestsellers_aggregated_yearly'",56],",",["T_WHITESPACE"," ",56],["T_STRING","self",56],["T_DOUBLE_COLON","::",56],["T_VARIABLE","$connectionName",56],")",",",["T_WHITESPACE","\n                ",56],["T_VARIABLE","$installer",57],["T_OBJECT_OPERATOR","->",57],["T_STRING","getFkName",57],"(",["T_WHITESPACE","\n                    ",57],["T_CONSTANT_ENCAPSED_STRING","'sales_bestsellers_aggregated_yearly'",58],",",["T_WHITESPACE","\n                    ",58],["T_CONSTANT_ENCAPSED_STRING","'product_id'",59],",",["T_WHITESPACE","\n                    ",59],["T_CONSTANT_ENCAPSED_STRING","'catalog_product_entity'",60],",",["T_WHITESPACE","\n                    ",60],["T_CONSTANT_ENCAPSED_STRING","'entity_id'",61],",",["T_WHITESPACE","\n                    ",61],["T_STRING","self",62],["T_DOUBLE_COLON","::",62],["T_VARIABLE","$connectionName",62],["T_WHITESPACE","\n                ",62],")",["T_WHITESPACE","\n            ",63],")",";",["T_WHITESPACE","\n\n            ",64],["T_VARIABLE","$installer",66],["T_OBJECT_OPERATOR","->",66],["T_STRING","endSetup",66],"(",")",";",["T_WHITESPACE","\n        ",66],"}",["T_WHITESPACE","\n        ",67],["T_IF","if",68],["T_WHITESPACE"," ",68],"(",["T_STRING","version_compare",68],"(",["T_VARIABLE","$context",68],["T_OBJECT_OPERATOR","->",68],["T_STRING","getVersion",68],"(",")",",",["T_WHITESPACE"," ",68],["T_CONSTANT_ENCAPSED_STRING","'2.0.3'",68],",",["T_WHITESPACE"," ",68],["T_CONSTANT_ENCAPSED_STRING","'<'",68],")",")",["T_WHITESPACE"," ",68],"{",["T_WHITESPACE","\n            ",68],["T_VARIABLE","$this",69],["T_OBJECT_OPERATOR","->",69],["T_STRING","addColumnBaseGrandTotal",69],"(",["T_VARIABLE","$installer",69],")",";",["T_WHITESPACE","\n            ",69],["T_VARIABLE","$this",70],["T_OBJECT_OPERATOR","->",70],["T_STRING","addIndexBaseGrandTotal",70],"(",["T_VARIABLE","$installer",70],")",";",["T_WHITESPACE","\n        ",70],"}",["T_WHITESPACE","\n        ",71],["T_IF","if",72],["T_WHITESPACE"," ",72],"(",["T_STRING","version_compare",72],"(",["T_VARIABLE","$context",72],["T_OBJECT_OPERATOR","->",72],["T_STRING","getVersion",72],"(",")",",",["T_WHITESPACE"," ",72],["T_CONSTANT_ENCAPSED_STRING","'2.0.4'",72],",",["T_WHITESPACE"," ",72],["T_CONSTANT_ENCAPSED_STRING","'<'",72],")",")",["T_WHITESPACE"," ",72],"{",["T_WHITESPACE","\n            ",72],["T_VARIABLE","$tables",73],["T_WHITESPACE"," ",73],"=",["T_WHITESPACE"," ",73],"[",["T_WHITESPACE","\n                ",73],["T_CONSTANT_ENCAPSED_STRING","'sales_invoice_grid'",74],",",["T_WHITESPACE","\n                ",74],["T_CONSTANT_ENCAPSED_STRING","'sales_order'",75],",",["T_WHITESPACE","\n                ",75],["T_CONSTANT_ENCAPSED_STRING","'sales_shipment_grid'",76],",",["T_WHITESPACE","\n            ",76],"]",";",["T_WHITESPACE","\n            ",77],["T_FOREACH","foreach",78],["T_WHITESPACE"," ",78],"(",["T_VARIABLE","$tables",78],["T_WHITESPACE"," ",78],["T_AS","as",78],["T_WHITESPACE"," ",78],["T_VARIABLE","$table",78],")",["T_WHITESPACE"," ",78],"{",["T_WHITESPACE","\n                ",78],["T_VARIABLE","$salesConnection",79],["T_WHITESPACE"," ",79],"=",["T_WHITESPACE"," ",79],["T_VARIABLE","$setup",79],["T_OBJECT_OPERATOR","->",79],["T_STRING","getConnection",79],"(",["T_STRING","self",79],["T_DOUBLE_COLON","::",79],["T_VARIABLE","$connectionName",79],")",";",["T_WHITESPACE","\n                ",79],["T_VARIABLE","$salesConnection",80],["T_OBJECT_OPERATOR","->",80],["T_STRING","modifyColumn",80],"(",["T_WHITESPACE","\n                    ",80],["T_VARIABLE","$installer",81],["T_OBJECT_OPERATOR","->",81],["T_STRING","getTable",81],"(",["T_VARIABLE","$table",81],",",["T_WHITESPACE"," ",81],["T_STRING","self",81],["T_DOUBLE_COLON","::",81],["T_VARIABLE","$connectionName",81],")",",",["T_WHITESPACE","\n                    ",81],["T_CONSTANT_ENCAPSED_STRING","'customer_group_id'",82],",",["T_WHITESPACE","\n                    ",82],"[",["T_CONSTANT_ENCAPSED_STRING","'type'",83],["T_WHITESPACE"," ",83],["T_DOUBLE_ARROW","=>",83],["T_WHITESPACE"," ",83],["T_CONSTANT_ENCAPSED_STRING","'integer'",83],"]",["T_WHITESPACE","\n                ",83],")",";",["T_WHITESPACE","\n            ",84],"}",["T_WHITESPACE","\n        ",85],"}",["T_WHITESPACE","\n        ",86],["T_IF","if",87],["T_WHITESPACE"," ",87],"(",["T_STRING","version_compare",87],"(",["T_VARIABLE","$context",87],["T_OBJECT_OPERATOR","->",87],["T_STRING","getVersion",87],"(",")",",",["T_WHITESPACE"," ",87],["T_CONSTANT_ENCAPSED_STRING","'2.0.5'",87],",",["T_WHITESPACE"," ",87],["T_CONSTANT_ENCAPSED_STRING","'<'",87],")",")",["T_WHITESPACE"," ",87],"{",["T_WHITESPACE","\n            ",87],["T_VARIABLE","$connection",88],["T_WHITESPACE"," ",88],"=",["T_WHITESPACE"," ",88],["T_VARIABLE","$installer",88],["T_OBJECT_OPERATOR","->",88],["T_STRING","getConnection",88],"(",["T_STRING","self",88],["T_DOUBLE_COLON","::",88],["T_VARIABLE","$connectionName",88],")",";",["T_WHITESPACE","\n            ",88],["T_VARIABLE","$connection",89],["T_OBJECT_OPERATOR","->",89],["T_STRING","modifyColumn",89],"(",["T_WHITESPACE","\n                ",89],["T_VARIABLE","$installer",90],["T_OBJECT_OPERATOR","->",90],["T_STRING","getTable",90],"(",["T_CONSTANT_ENCAPSED_STRING","'sales_order_payment'",90],",",["T_WHITESPACE"," ",90],["T_STRING","self",90],["T_DOUBLE_COLON","::",90],["T_VARIABLE","$connectionName",90],")",",",["T_WHITESPACE","\n                ",90],["T_CONSTANT_ENCAPSED_STRING","'cc_number_enc'",91],",",["T_WHITESPACE","\n                ",91],"[",["T_WHITESPACE","\n                    ",92],["T_CONSTANT_ENCAPSED_STRING","'type'",93],["T_WHITESPACE"," ",93],["T_DOUBLE_ARROW","=>",93],["T_WHITESPACE"," ",93],["T_NS_SEPARATOR","\\",93],["T_STRING","Magento",93],["T_NS_SEPARATOR","\\",93],["T_STRING","Framework",93],["T_NS_SEPARATOR","\\",93],["T_STRING","DB",93],["T_NS_SEPARATOR","\\",93],["T_STRING","Ddl",93],["T_NS_SEPARATOR","\\",93],["T_STRING","Table",93],["T_DOUBLE_COLON","::",93],["T_STRING","TYPE_TEXT",93],",",["T_WHITESPACE","\n                    ",93],["T_CONSTANT_ENCAPSED_STRING","'length'",94],["T_WHITESPACE"," ",94],["T_DOUBLE_ARROW","=>",94],["T_WHITESPACE"," ",94],["T_LNUMBER","128",94],["T_WHITESPACE","\n                ",94],"]",["T_WHITESPACE","\n            ",95],")",";",["T_WHITESPACE","\n        ",96],"}",["T_WHITESPACE","\n    ",97],"}",["T_WHITESPACE","\n\n    ",98],["T_DOC_COMMENT","\/**\n     * @param SchemaSetupInterface $installer\n     * @return void\n     *\/",100],["T_WHITESPACE","\n    ",103],["T_PRIVATE","private",104],["T_WHITESPACE"," ",104],["T_FUNCTION","function",104],["T_WHITESPACE"," ",104],["T_STRING","addColumnBaseGrandTotal",104],"(",["T_STRING","SchemaSetupInterface",104],["T_WHITESPACE"," ",104],["T_VARIABLE","$installer",104],")",["T_WHITESPACE","\n    ",104],"{",["T_WHITESPACE","\n        ",105],["T_VARIABLE","$connection",106],["T_WHITESPACE"," ",106],"=",["T_WHITESPACE"," ",106],["T_VARIABLE","$installer",106],["T_OBJECT_OPERATOR","->",106],["T_STRING","getConnection",106],"(",["T_STRING","self",106],["T_DOUBLE_COLON","::",106],["T_VARIABLE","$connectionName",106],")",";",["T_WHITESPACE","\n        ",106],["T_VARIABLE","$connection",107],["T_OBJECT_OPERATOR","->",107],["T_STRING","addColumn",107],"(",["T_WHITESPACE","\n            ",107],["T_VARIABLE","$installer",108],["T_OBJECT_OPERATOR","->",108],["T_STRING","getTable",108],"(",["T_CONSTANT_ENCAPSED_STRING","'sales_invoice_grid'",108],",",["T_WHITESPACE"," ",108],["T_STRING","self",108],["T_DOUBLE_COLON","::",108],["T_VARIABLE","$connectionName",108],")",",",["T_WHITESPACE","\n            ",108],["T_CONSTANT_ENCAPSED_STRING","'base_grand_total'",109],",",["T_WHITESPACE","\n            ",109],"[",["T_WHITESPACE","\n                ",110],["T_CONSTANT_ENCAPSED_STRING","'type'",111],["T_WHITESPACE"," ",111],["T_DOUBLE_ARROW","=>",111],["T_WHITESPACE"," ",111],["T_NS_SEPARATOR","\\",111],["T_STRING","Magento",111],["T_NS_SEPARATOR","\\",111],["T_STRING","Framework",111],["T_NS_SEPARATOR","\\",111],["T_STRING","DB",111],["T_NS_SEPARATOR","\\",111],["T_STRING","Ddl",111],["T_NS_SEPARATOR","\\",111],["T_STRING","Table",111],["T_DOUBLE_COLON","::",111],["T_STRING","TYPE_DECIMAL",111],",",["T_WHITESPACE","\n                ",111],["T_CONSTANT_ENCAPSED_STRING","'nullable'",112],["T_WHITESPACE"," ",112],["T_DOUBLE_ARROW","=>",112],["T_WHITESPACE"," ",112],["T_STRING","true",112],",",["T_WHITESPACE","\n                ",112],["T_CONSTANT_ENCAPSED_STRING","'length'",113],["T_WHITESPACE"," ",113],["T_DOUBLE_ARROW","=>",113],["T_WHITESPACE"," ",113],["T_CONSTANT_ENCAPSED_STRING","'12,4'",113],",",["T_WHITESPACE","\n                ",113],["T_CONSTANT_ENCAPSED_STRING","'comment'",114],["T_WHITESPACE"," ",114],["T_DOUBLE_ARROW","=>",114],["T_WHITESPACE"," ",114],["T_CONSTANT_ENCAPSED_STRING","'Base Grand Total'",114],",",["T_WHITESPACE","\n                ",114],["T_CONSTANT_ENCAPSED_STRING","'after'",115],["T_WHITESPACE"," ",115],["T_DOUBLE_ARROW","=>",115],["T_WHITESPACE"," ",115],["T_CONSTANT_ENCAPSED_STRING","'grand_total'",115],["T_WHITESPACE","\n            ",115],"]",["T_WHITESPACE","\n        ",116],")",";",["T_WHITESPACE","\n    ",117],"}",["T_WHITESPACE","\n\n    ",118],["T_DOC_COMMENT","\/**\n     * @param SchemaSetupInterface $installer\n     * @return void\n     *\/",120],["T_WHITESPACE","\n    ",123],["T_PRIVATE","private",124],["T_WHITESPACE"," ",124],["T_FUNCTION","function",124],["T_WHITESPACE"," ",124],["T_STRING","addIndexBaseGrandTotal",124],"(",["T_STRING","SchemaSetupInterface",124],["T_WHITESPACE"," ",124],["T_VARIABLE","$installer",124],")",["T_WHITESPACE","\n    ",124],"{",["T_WHITESPACE","\n        ",125],["T_VARIABLE","$connection",126],["T_WHITESPACE"," ",126],"=",["T_WHITESPACE"," ",126],["T_VARIABLE","$installer",126],["T_OBJECT_OPERATOR","->",126],["T_STRING","getConnection",126],"(",["T_STRING","self",126],["T_DOUBLE_COLON","::",126],["T_VARIABLE","$connectionName",126],")",";",["T_WHITESPACE","\n        ",126],["T_VARIABLE","$connection",127],["T_OBJECT_OPERATOR","->",127],["T_STRING","addIndex",127],"(",["T_WHITESPACE","\n            ",127],["T_VARIABLE","$installer",128],["T_OBJECT_OPERATOR","->",128],["T_STRING","getTable",128],"(",["T_CONSTANT_ENCAPSED_STRING","'sales_invoice_grid'",128],",",["T_WHITESPACE"," ",128],["T_STRING","self",128],["T_DOUBLE_COLON","::",128],["T_VARIABLE","$connectionName",128],")",",",["T_WHITESPACE","\n            ",128],["T_VARIABLE","$installer",129],["T_OBJECT_OPERATOR","->",129],["T_STRING","getIdxName",129],"(",["T_CONSTANT_ENCAPSED_STRING","'sales_invoice_grid'",129],",",["T_WHITESPACE"," ",129],"[",["T_CONSTANT_ENCAPSED_STRING","'base_grand_total'",129],"]",",",["T_WHITESPACE"," ",129],["T_CONSTANT_ENCAPSED_STRING","''",129],",",["T_WHITESPACE"," ",129],["T_STRING","self",129],["T_DOUBLE_COLON","::",129],["T_VARIABLE","$connectionName",129],")",",",["T_WHITESPACE","\n            ",129],"[",["T_CONSTANT_ENCAPSED_STRING","'base_grand_total'",130],"]",["T_WHITESPACE","\n        ",130],")",";",["T_WHITESPACE","\n    ",131],"}",["T_WHITESPACE","\n",132],"}",["T_WHITESPACE","\n",133]]
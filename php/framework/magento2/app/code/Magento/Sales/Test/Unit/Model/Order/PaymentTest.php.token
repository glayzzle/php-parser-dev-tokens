[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Copyright \u00c2\u00a9 2013-2017 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n *\/",2],["T_WHITESPACE","\n",5],["T_NAMESPACE","namespace",6],["T_WHITESPACE"," ",6],["T_STRING","Magento",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Sales",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Test",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Unit",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Model",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Order",6],";",["T_WHITESPACE","\n\n",6],["T_USE","use",8],["T_WHITESPACE"," ",8],["T_STRING","Magento",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Sales",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Model",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Order",8],";",["T_WHITESPACE","\n",8],["T_USE","use",9],["T_WHITESPACE"," ",9],["T_STRING","Magento",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Sales",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Model",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Order",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Payment",9],";",["T_WHITESPACE","\n",9],["T_USE","use",10],["T_WHITESPACE"," ",10],["T_STRING","Magento",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Sales",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Model",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Order",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Payment",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Transaction",10],";",["T_WHITESPACE","\n\n",10],["T_DOC_COMMENT","\/**\n * Class PaymentTest\n *\n * @SuppressWarnings(PHPMD.CouplingBetweenObjects)\n * @SuppressWarnings(PHPMD.TooManyFields)\n *\/",12],["T_WHITESPACE","\n",17],["T_CLASS","class",18],["T_WHITESPACE"," ",18],["T_STRING","PaymentTest",18],["T_WHITESPACE"," ",18],["T_EXTENDS","extends",18],["T_WHITESPACE"," ",18],["T_NS_SEPARATOR","\\",18],["T_STRING","PHPUnit_Framework_TestCase",18],["T_WHITESPACE","\n",18],"{",["T_WHITESPACE","\n    ",19],["T_CONST","const",20],["T_WHITESPACE"," ",20],["T_STRING","TRANSACTION_ID",20],["T_WHITESPACE"," ",20],"=",["T_WHITESPACE"," ",20],["T_CONSTANT_ENCAPSED_STRING","'ewr34fM49V0'",20],";",["T_WHITESPACE","\n\n    ",20],["T_DOC_COMMENT","\/**\n     * @var \\PHPUnit_Framework_MockObject_MockObject\n     *\/",22],["T_WHITESPACE","\n    ",24],["T_PRIVATE","private",25],["T_WHITESPACE"," ",25],["T_VARIABLE","$mockContext",25],";",["T_WHITESPACE","\n\n    ",25],["T_DOC_COMMENT","\/**\n     * @var \\PHPUnit_Framework_MockObject_MockObject\n     *\/",27],["T_WHITESPACE","\n    ",29],["T_PRIVATE","private",30],["T_WHITESPACE"," ",30],["T_VARIABLE","$orderStateResolverMock",30],";",["T_WHITESPACE","\n\n    ",30],["T_DOC_COMMENT","\/**\n     * @var Payment\n     *\/",32],["T_WHITESPACE","\n    ",34],["T_PROTECTED","protected",35],["T_WHITESPACE"," ",35],["T_VARIABLE","$payment",35],";",["T_WHITESPACE","\n\n    ",35],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Payment\\Helper\\Data | \\PHPUnit_Framework_MockObject_MockObject\n     *\/",37],["T_WHITESPACE","\n    ",39],["T_PROTECTED","protected",40],["T_WHITESPACE"," ",40],["T_VARIABLE","$helperMock",40],";",["T_WHITESPACE","\n\n    ",40],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Framework\\Event\\Manager | \\PHPUnit_Framework_MockObject_MockObject\n     *\/",42],["T_WHITESPACE","\n    ",44],["T_PROTECTED","protected",45],["T_WHITESPACE"," ",45],["T_VARIABLE","$eventManagerMock",45],";",["T_WHITESPACE","\n\n    ",45],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Directory\\Model\\PriceCurrency | \\PHPUnit_Framework_MockObject_MockObject\n     *\/",47],["T_WHITESPACE","\n    ",49],["T_PROTECTED","protected",50],["T_WHITESPACE"," ",50],["T_VARIABLE","$priceCurrencyMock",50],";",["T_WHITESPACE","\n\n    ",50],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Directory\\Model\\Currency | \\PHPUnit_Framework_MockObject_MockObject\n     *\/",52],["T_WHITESPACE","\n    ",54],["T_PROTECTED","protected",55],["T_WHITESPACE"," ",55],["T_VARIABLE","$currencyMock",55],";",["T_WHITESPACE","\n\n    ",55],["T_DOC_COMMENT","\/**\n     * @var Order | \\PHPUnit_Framework_MockObject_MockObject\n     *\/",57],["T_WHITESPACE","\n    ",59],["T_PROTECTED","protected",60],["T_WHITESPACE"," ",60],["T_VARIABLE","$orderMock",60],";",["T_WHITESPACE","\n\n    ",60],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Payment\\Model\\Method\\AbstractMethod | \\PHPUnit_Framework_MockObject_MockObject\n     *\/",62],["T_WHITESPACE","\n    ",64],["T_PROTECTED","protected",65],["T_WHITESPACE"," ",65],["T_VARIABLE","$paymentMethodMock",65],";",["T_WHITESPACE","\n\n    ",65],["T_DOC_COMMENT","\/** @var \\Magento\\Sales\\Model\\Order\\Invoice | \\PHPUnit_Framework_MockObject_MockObject $orderMock *\/",67],["T_WHITESPACE","\n    ",67],["T_PRIVATE","private",68],["T_WHITESPACE"," ",68],["T_VARIABLE","$invoiceMock",68],";",["T_WHITESPACE","\n\n    ",68],["T_DOC_COMMENT","\/**\n     * @var string\n     *\/",70],["T_WHITESPACE","\n    ",72],["T_PRIVATE","private",73],["T_WHITESPACE"," ",73],["T_VARIABLE","$transactionId",73],";",["T_WHITESPACE","\n\n    ",73],["T_DOC_COMMENT","\/**\n     * @var \\PHPUnit_Framework_MockObject_MockObject\n     *\/",75],["T_WHITESPACE","\n    ",77],["T_PROTECTED","protected",78],["T_WHITESPACE"," ",78],["T_VARIABLE","$transactionCollectionFactory",78],";",["T_WHITESPACE","\n\n    ",78],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Sales\\Model\\Order\\CreditmemoFactory|\\PHPUnit_Framework_MockObject_MockObject\n     *\/",80],["T_WHITESPACE","\n    ",82],["T_PROTECTED","protected",83],["T_WHITESPACE"," ",83],["T_VARIABLE","$creditmemoFactoryMock",83],";",["T_WHITESPACE","\n\n    ",83],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Sales\\Model\\Order\\Creditmemo | \\PHPUnit_Framework_MockObject_MockObject\n     *\/",85],["T_WHITESPACE","\n    ",87],["T_PROTECTED","protected",88],["T_WHITESPACE"," ",88],["T_VARIABLE","$creditMemoMock",88],";",["T_WHITESPACE","\n\n    ",88],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Sales\\Model\\Order\\Payment\\Transaction\\Repository | \\PHPUnit_Framework_MockObject_MockObject\n     *\/",90],["T_WHITESPACE","\n    ",92],["T_PROTECTED","protected",93],["T_WHITESPACE"," ",93],["T_VARIABLE","$transactionRepositoryMock",93],";",["T_WHITESPACE","\n\n    ",93],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Sales\\Model\\Order\\Payment\\Transaction\\ManagerInterface| \\PHPUnit_Framework_MockObject_MockObject\n     *\/",95],["T_WHITESPACE","\n    ",97],["T_PROTECTED","protected",98],["T_WHITESPACE"," ",98],["T_VARIABLE","$transactionManagerMock",98],";",["T_WHITESPACE","\n\n    ",98],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Sales\\Model\\Order\\Payment\\Transaction\\BuilderInterface | \\PHPUnit_Framework_MockObject_MockObject\n     *\/",100],["T_WHITESPACE","\n\n    ",102],["T_PROTECTED","protected",104],["T_WHITESPACE"," ",104],["T_VARIABLE","$transactionBuilderMock",104],";",["T_WHITESPACE","\n\n    ",104],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Sales\\Model\\Order\\Payment\\Processor|\\PHPUnit_Framework_MockObject_MockObject\n     *\/",106],["T_WHITESPACE","\n    ",108],["T_PROTECTED","protected",109],["T_WHITESPACE"," ",109],["T_VARIABLE","$paymentProcessor",109],";",["T_WHITESPACE","\n\n    ",109],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Sales\\Model\\OrderRepository|\\PHPUnit_Framework_MockObject_MockObject\n     *\/",111],["T_WHITESPACE","\n    ",113],["T_PROTECTED","protected",114],["T_WHITESPACE"," ",114],["T_VARIABLE","$orderRepository",114],";",["T_WHITESPACE","\n\n    ",114],["T_DOC_COMMENT","\/**\n     * @return void\n     * @SuppressWarnings(PHPMD.ExcessiveMethodLength)\n     * @SuppressWarnings(PHPMD.TooManyFields)\n     *\/",116],["T_WHITESPACE","\n    ",120],["T_PROTECTED","protected",121],["T_WHITESPACE"," ",121],["T_FUNCTION","function",121],["T_WHITESPACE"," ",121],["T_STRING","setUp",121],"(",")",["T_WHITESPACE","\n    ",121],"{",["T_WHITESPACE","\n        ",122],["T_VARIABLE","$this",123],["T_OBJECT_OPERATOR","->",123],["T_STRING","eventManagerMock",123],["T_WHITESPACE"," ",123],"=",["T_WHITESPACE"," ",123],["T_VARIABLE","$this",123],["T_OBJECT_OPERATOR","->",123],["T_STRING","getMockBuilder",123],"(",["T_NS_SEPARATOR","\\",123],["T_STRING","Magento",123],["T_NS_SEPARATOR","\\",123],["T_STRING","Framework",123],["T_NS_SEPARATOR","\\",123],["T_STRING","Event",123],["T_NS_SEPARATOR","\\",123],["T_STRING","Manager",123],["T_DOUBLE_COLON","::",123],["T_CLASS","class",123],")",["T_WHITESPACE","\n            ",123],["T_OBJECT_OPERATOR","->",124],["T_STRING","disableOriginalConstructor",124],"(",")",["T_WHITESPACE","\n            ",124],["T_OBJECT_OPERATOR","->",125],["T_STRING","getMock",125],"(",")",";",["T_WHITESPACE","\n\n        ",125],["T_VARIABLE","$this",127],["T_OBJECT_OPERATOR","->",127],["T_STRING","mockContext",127],["T_WHITESPACE"," ",127],"=",["T_WHITESPACE"," ",127],["T_VARIABLE","$this",127],["T_OBJECT_OPERATOR","->",127],["T_STRING","getMockBuilder",127],"(",["T_NS_SEPARATOR","\\",127],["T_STRING","Magento",127],["T_NS_SEPARATOR","\\",127],["T_STRING","Framework",127],["T_NS_SEPARATOR","\\",127],["T_STRING","Model",127],["T_NS_SEPARATOR","\\",127],["T_STRING","Context",127],["T_DOUBLE_COLON","::",127],["T_CLASS","class",127],")",["T_WHITESPACE","\n            ",127],["T_OBJECT_OPERATOR","->",128],["T_STRING","disableOriginalConstructor",128],"(",")",["T_WHITESPACE","\n            ",128],["T_OBJECT_OPERATOR","->",129],["T_STRING","getMock",129],"(",")",";",["T_WHITESPACE","\n\n        ",129],["T_VARIABLE","$this",131],["T_OBJECT_OPERATOR","->",131],["T_STRING","mockContext",131],["T_OBJECT_OPERATOR","->",131],["T_STRING","expects",131],"(",["T_VARIABLE","$this",131],["T_OBJECT_OPERATOR","->",131],["T_STRING","atLeastOnce",131],"(",")",")",["T_WHITESPACE","\n            ",131],["T_OBJECT_OPERATOR","->",132],["T_STRING","method",132],"(",["T_CONSTANT_ENCAPSED_STRING","'getEventDispatcher'",132],")",["T_WHITESPACE","\n            ",132],["T_OBJECT_OPERATOR","->",133],["T_STRING","will",133],"(",["T_VARIABLE","$this",133],["T_OBJECT_OPERATOR","->",133],["T_STRING","returnValue",133],"(",["T_VARIABLE","$this",133],["T_OBJECT_OPERATOR","->",133],["T_STRING","eventManagerMock",133],")",")",";",["T_WHITESPACE","\n\n        ",133],["T_VARIABLE","$this",135],["T_OBJECT_OPERATOR","->",135],["T_STRING","helperMock",135],["T_WHITESPACE"," ",135],"=",["T_WHITESPACE"," ",135],["T_VARIABLE","$this",135],["T_OBJECT_OPERATOR","->",135],["T_STRING","getMockBuilder",135],"(",["T_NS_SEPARATOR","\\",135],["T_STRING","Magento",135],["T_NS_SEPARATOR","\\",135],["T_STRING","Payment",135],["T_NS_SEPARATOR","\\",135],["T_STRING","Helper",135],["T_NS_SEPARATOR","\\",135],["T_STRING","Data",135],["T_DOUBLE_COLON","::",135],["T_CLASS","class",135],")",["T_WHITESPACE","\n            ",135],["T_OBJECT_OPERATOR","->",136],["T_STRING","disableOriginalConstructor",136],"(",")",["T_WHITESPACE","\n            ",136],["T_OBJECT_OPERATOR","->",137],["T_STRING","setMethods",137],"(","[",["T_CONSTANT_ENCAPSED_STRING","'getMethodInstance'",137],"]",")",["T_WHITESPACE","\n            ",137],["T_OBJECT_OPERATOR","->",138],["T_STRING","getMock",138],"(",")",";",["T_WHITESPACE","\n\n        ",138],["T_VARIABLE","$this",140],["T_OBJECT_OPERATOR","->",140],["T_STRING","priceCurrencyMock",140],["T_WHITESPACE"," ",140],"=",["T_WHITESPACE"," ",140],["T_VARIABLE","$this",140],["T_OBJECT_OPERATOR","->",140],["T_STRING","getMockBuilder",140],"(",["T_NS_SEPARATOR","\\",140],["T_STRING","Magento",140],["T_NS_SEPARATOR","\\",140],["T_STRING","Directory",140],["T_NS_SEPARATOR","\\",140],["T_STRING","Model",140],["T_NS_SEPARATOR","\\",140],["T_STRING","PriceCurrency",140],["T_DOUBLE_COLON","::",140],["T_CLASS","class",140],")",["T_WHITESPACE","\n            ",140],["T_OBJECT_OPERATOR","->",141],["T_STRING","disableOriginalConstructor",141],"(",")",["T_WHITESPACE","\n            ",141],["T_OBJECT_OPERATOR","->",142],["T_STRING","setMethods",142],"(","[",["T_CONSTANT_ENCAPSED_STRING","'format'",142],"]",")",["T_WHITESPACE","\n            ",142],["T_OBJECT_OPERATOR","->",143],["T_STRING","getMock",143],"(",")",";",["T_WHITESPACE","\n        ",143],["T_VARIABLE","$this",144],["T_OBJECT_OPERATOR","->",144],["T_STRING","currencyMock",144],["T_WHITESPACE"," ",144],"=",["T_WHITESPACE"," ",144],["T_VARIABLE","$this",144],["T_OBJECT_OPERATOR","->",144],["T_STRING","getMockBuilder",144],"(",["T_NS_SEPARATOR","\\",144],["T_STRING","Magento",144],["T_NS_SEPARATOR","\\",144],["T_STRING","Directory",144],["T_NS_SEPARATOR","\\",144],["T_STRING","Model",144],["T_NS_SEPARATOR","\\",144],["T_STRING","Currency",144],["T_DOUBLE_COLON","::",144],["T_CLASS","class",144],")",["T_WHITESPACE","\n            ",144],["T_OBJECT_OPERATOR","->",145],["T_STRING","disableOriginalConstructor",145],"(",")",["T_WHITESPACE","\n            ",145],["T_OBJECT_OPERATOR","->",146],["T_STRING","setMethods",146],"(","[",["T_CONSTANT_ENCAPSED_STRING","'formatTxt'",146],"]",")",["T_WHITESPACE","\n            ",146],["T_OBJECT_OPERATOR","->",147],["T_STRING","getMock",147],"(",")",";",["T_WHITESPACE","\n        ",147],["T_VARIABLE","$transaction",148],["T_WHITESPACE"," ",148],"=",["T_WHITESPACE"," ",148],["T_NS_SEPARATOR","\\",148],["T_STRING","Magento",148],["T_NS_SEPARATOR","\\",148],["T_STRING","Sales",148],["T_NS_SEPARATOR","\\",148],["T_STRING","Model",148],["T_NS_SEPARATOR","\\",148],["T_STRING","Order",148],["T_NS_SEPARATOR","\\",148],["T_STRING","Payment",148],["T_NS_SEPARATOR","\\",148],["T_STRING","Transaction",148],["T_NS_SEPARATOR","\\",148],["T_STRING","Repository",148],["T_DOUBLE_COLON","::",148],["T_CLASS","class",148],";",["T_WHITESPACE","\n        ",148],["T_VARIABLE","$this",149],["T_OBJECT_OPERATOR","->",149],["T_STRING","transactionRepositoryMock",149],["T_WHITESPACE"," ",149],"=",["T_WHITESPACE"," ",149],["T_VARIABLE","$this",149],["T_OBJECT_OPERATOR","->",149],["T_STRING","getMockBuilder",149],"(",["T_VARIABLE","$transaction",149],")",["T_WHITESPACE","\n            ",149],["T_OBJECT_OPERATOR","->",150],["T_STRING","disableOriginalConstructor",150],"(",")",["T_WHITESPACE","\n            ",150],["T_OBJECT_OPERATOR","->",151],["T_STRING","setMethods",151],"(","[",["T_CONSTANT_ENCAPSED_STRING","'get'",151],",",["T_WHITESPACE"," ",151],["T_CONSTANT_ENCAPSED_STRING","'getByTransactionType'",151],",",["T_WHITESPACE"," ",151],["T_CONSTANT_ENCAPSED_STRING","'getByTransactionId'",151],"]",")",["T_WHITESPACE","\n            ",151],["T_OBJECT_OPERATOR","->",152],["T_STRING","getMock",152],"(",")",";",["T_WHITESPACE","\n        ",152],["T_VARIABLE","$this",153],["T_OBJECT_OPERATOR","->",153],["T_STRING","paymentProcessor",153],["T_WHITESPACE"," ",153],"=",["T_WHITESPACE"," ",153],["T_VARIABLE","$this",153],["T_OBJECT_OPERATOR","->",153],["T_STRING","getMock",153],"(",["T_WHITESPACE","\n            ",153],["T_NS_SEPARATOR","\\",154],["T_STRING","Magento",154],["T_NS_SEPARATOR","\\",154],["T_STRING","Sales",154],["T_NS_SEPARATOR","\\",154],["T_STRING","Model",154],["T_NS_SEPARATOR","\\",154],["T_STRING","Order",154],["T_NS_SEPARATOR","\\",154],["T_STRING","Payment",154],["T_NS_SEPARATOR","\\",154],["T_STRING","Processor",154],["T_DOUBLE_COLON","::",154],["T_CLASS","class",154],",",["T_WHITESPACE","\n            ",154],"[","]",",",["T_WHITESPACE","\n            ",155],"[","]",",",["T_WHITESPACE","\n            ",156],["T_CONSTANT_ENCAPSED_STRING","''",157],",",["T_WHITESPACE","\n            ",157],["T_STRING","false",158],["T_WHITESPACE","\n        ",158],")",";",["T_WHITESPACE","\n        ",159],["T_VARIABLE","$this",160],["T_OBJECT_OPERATOR","->",160],["T_STRING","orderRepository",160],["T_WHITESPACE"," ",160],"=",["T_WHITESPACE"," ",160],["T_VARIABLE","$this",160],["T_OBJECT_OPERATOR","->",160],["T_STRING","getMock",160],"(",["T_NS_SEPARATOR","\\",160],["T_STRING","Magento",160],["T_NS_SEPARATOR","\\",160],["T_STRING","Sales",160],["T_NS_SEPARATOR","\\",160],["T_STRING","Model",160],["T_NS_SEPARATOR","\\",160],["T_STRING","OrderRepository",160],["T_DOUBLE_COLON","::",160],["T_CLASS","class",160],",",["T_WHITESPACE"," ",160],"[",["T_CONSTANT_ENCAPSED_STRING","'get'",160],"]",",",["T_WHITESPACE"," ",160],"[","]",",",["T_WHITESPACE"," ",160],["T_CONSTANT_ENCAPSED_STRING","''",160],",",["T_WHITESPACE"," ",160],["T_STRING","false",160],")",";",["T_WHITESPACE","\n\n        ",160],["T_VARIABLE","$this",162],["T_OBJECT_OPERATOR","->",162],["T_STRING","priceCurrencyMock",162],["T_OBJECT_OPERATOR","->",162],["T_STRING","expects",162],"(",["T_VARIABLE","$this",162],["T_OBJECT_OPERATOR","->",162],["T_STRING","any",162],"(",")",")",["T_WHITESPACE","\n            ",162],["T_OBJECT_OPERATOR","->",163],["T_STRING","method",163],"(",["T_CONSTANT_ENCAPSED_STRING","'format'",163],")",["T_WHITESPACE","\n            ",163],["T_OBJECT_OPERATOR","->",164],["T_STRING","willReturnCallback",164],"(",["T_WHITESPACE","\n                ",164],["T_FUNCTION","function",165],["T_WHITESPACE"," ",165],"(",["T_VARIABLE","$value",165],")",["T_WHITESPACE"," ",165],"{",["T_WHITESPACE","\n                    ",165],["T_RETURN","return",166],["T_WHITESPACE"," ",166],["T_VARIABLE","$value",166],";",["T_WHITESPACE","\n                ",166],"}",["T_WHITESPACE","\n            ",167],")",";",["T_WHITESPACE","\n\n        ",168],["T_VARIABLE","$this",170],["T_OBJECT_OPERATOR","->",170],["T_STRING","paymentMethodMock",170],["T_WHITESPACE"," ",170],"=",["T_WHITESPACE"," ",170],["T_VARIABLE","$this",170],["T_OBJECT_OPERATOR","->",170],["T_STRING","getMockBuilder",170],"(",["T_NS_SEPARATOR","\\",170],["T_STRING","Magento",170],["T_NS_SEPARATOR","\\",170],["T_STRING","Payment",170],["T_NS_SEPARATOR","\\",170],["T_STRING","Model",170],["T_NS_SEPARATOR","\\",170],["T_STRING","Method",170],["T_NS_SEPARATOR","\\",170],["T_STRING","AbstractMethod",170],["T_DOUBLE_COLON","::",170],["T_CLASS","class",170],")",["T_WHITESPACE","\n            ",170],["T_OBJECT_OPERATOR","->",171],["T_STRING","disableOriginalConstructor",171],"(",")",["T_WHITESPACE","\n            ",171],["T_OBJECT_OPERATOR","->",172],["T_STRING","setMethods",172],"(",["T_WHITESPACE","\n                ",172],"[",["T_WHITESPACE","\n                    ",173],["T_CONSTANT_ENCAPSED_STRING","'canVoid'",174],",",["T_WHITESPACE","\n                    ",174],["T_CONSTANT_ENCAPSED_STRING","'authorize'",175],",",["T_WHITESPACE","\n                    ",175],["T_CONSTANT_ENCAPSED_STRING","'getConfigData'",176],",",["T_WHITESPACE","\n                    ",176],["T_CONSTANT_ENCAPSED_STRING","'getConfigPaymentAction'",177],",",["T_WHITESPACE","\n                    ",177],["T_CONSTANT_ENCAPSED_STRING","'validate'",178],",",["T_WHITESPACE","\n                    ",178],["T_CONSTANT_ENCAPSED_STRING","'setStore'",179],",",["T_WHITESPACE","\n                    ",179],["T_CONSTANT_ENCAPSED_STRING","'acceptPayment'",180],",",["T_WHITESPACE","\n                    ",180],["T_CONSTANT_ENCAPSED_STRING","'denyPayment'",181],",",["T_WHITESPACE","\n                    ",181],["T_CONSTANT_ENCAPSED_STRING","'fetchTransactionInfo'",182],",",["T_WHITESPACE","\n                    ",182],["T_CONSTANT_ENCAPSED_STRING","'canCapture'",183],",",["T_WHITESPACE","\n                    ",183],["T_CONSTANT_ENCAPSED_STRING","'canRefund'",184],",",["T_WHITESPACE","\n                    ",184],["T_CONSTANT_ENCAPSED_STRING","'canOrder'",185],",",["T_WHITESPACE","\n                    ",185],["T_CONSTANT_ENCAPSED_STRING","'order'",186],",",["T_WHITESPACE","\n                    ",186],["T_CONSTANT_ENCAPSED_STRING","'isInitializeNeeded'",187],",",["T_WHITESPACE","\n                    ",187],["T_CONSTANT_ENCAPSED_STRING","'initialize'",188],",",["T_WHITESPACE","\n                    ",188],["T_CONSTANT_ENCAPSED_STRING","'refund'",189],["T_WHITESPACE","\n                ",189],"]",["T_WHITESPACE","\n            ",190],")",["T_WHITESPACE","\n            ",191],["T_OBJECT_OPERATOR","->",192],["T_STRING","getMock",192],"(",")",";",["T_WHITESPACE","\n\n        ",192],["T_VARIABLE","$this",194],["T_OBJECT_OPERATOR","->",194],["T_STRING","invoiceMock",194],["T_WHITESPACE"," ",194],"=",["T_WHITESPACE"," ",194],["T_VARIABLE","$this",194],["T_OBJECT_OPERATOR","->",194],["T_STRING","getMockBuilder",194],"(",["T_NS_SEPARATOR","\\",194],["T_STRING","Magento",194],["T_NS_SEPARATOR","\\",194],["T_STRING","Sales",194],["T_NS_SEPARATOR","\\",194],["T_STRING","Model",194],["T_NS_SEPARATOR","\\",194],["T_STRING","Order",194],["T_NS_SEPARATOR","\\",194],["T_STRING","Invoice",194],["T_DOUBLE_COLON","::",194],["T_CLASS","class",194],")",["T_WHITESPACE","\n            ",194],["T_OBJECT_OPERATOR","->",195],["T_STRING","disableOriginalConstructor",195],"(",")",["T_WHITESPACE","\n            ",195],["T_OBJECT_OPERATOR","->",196],["T_STRING","setMethods",196],"(",["T_WHITESPACE","\n                ",196],"[",["T_WHITESPACE","\n                    ",197],["T_CONSTANT_ENCAPSED_STRING","'getTransactionId'",198],",",["T_WHITESPACE","\n                    ",198],["T_CONSTANT_ENCAPSED_STRING","'load'",199],",",["T_WHITESPACE","\n                    ",199],["T_CONSTANT_ENCAPSED_STRING","'getId'",200],",",["T_WHITESPACE","\n                    ",200],["T_CONSTANT_ENCAPSED_STRING","'pay'",201],",",["T_WHITESPACE","\n                    ",201],["T_CONSTANT_ENCAPSED_STRING","'cancel'",202],",",["T_WHITESPACE","\n                    ",202],["T_CONSTANT_ENCAPSED_STRING","'getGrandTotal'",203],",",["T_WHITESPACE","\n                    ",203],["T_CONSTANT_ENCAPSED_STRING","'getBaseGrandTotal'",204],",",["T_WHITESPACE","\n                    ",204],["T_CONSTANT_ENCAPSED_STRING","'getShippingAmount'",205],",",["T_WHITESPACE","\n                    ",205],["T_CONSTANT_ENCAPSED_STRING","'getBaseShippingAmount'",206],",",["T_WHITESPACE","\n                    ",206],["T_CONSTANT_ENCAPSED_STRING","'getBaseTotalRefunded'",207],",",["T_WHITESPACE","\n                    ",207],["T_CONSTANT_ENCAPSED_STRING","'getItemsCollection'",208],",",["T_WHITESPACE","\n                    ",208],["T_CONSTANT_ENCAPSED_STRING","'getOrder'",209],",",["T_WHITESPACE","\n                    ",209],["T_CONSTANT_ENCAPSED_STRING","'register'",210],",",["T_WHITESPACE","\n                    ",210],["T_CONSTANT_ENCAPSED_STRING","'capture'",211],",",["T_WHITESPACE","\n                ",211],"]",["T_WHITESPACE","\n            ",212],")",["T_WHITESPACE","\n            ",213],["T_OBJECT_OPERATOR","->",214],["T_STRING","getMock",214],"(",")",";",["T_WHITESPACE","\n        ",214],["T_VARIABLE","$this",215],["T_OBJECT_OPERATOR","->",215],["T_STRING","helperMock",215],["T_OBJECT_OPERATOR","->",215],["T_STRING","method",215],"(",["T_CONSTANT_ENCAPSED_STRING","'getMethodInstance'",215],")",["T_WHITESPACE","\n            ",215],["T_OBJECT_OPERATOR","->",216],["T_STRING","will",216],"(",["T_VARIABLE","$this",216],["T_OBJECT_OPERATOR","->",216],["T_STRING","returnValue",216],"(",["T_VARIABLE","$this",216],["T_OBJECT_OPERATOR","->",216],["T_STRING","paymentMethodMock",216],")",")",";",["T_WHITESPACE","\n\n        ",216],["T_VARIABLE","$this",218],["T_OBJECT_OPERATOR","->",218],["T_STRING","orderMock",218],["T_WHITESPACE"," ",218],"=",["T_WHITESPACE"," ",218],["T_VARIABLE","$this",218],["T_OBJECT_OPERATOR","->",218],["T_STRING","getMockBuilder",218],"(",["T_NS_SEPARATOR","\\",218],["T_STRING","Magento",218],["T_NS_SEPARATOR","\\",218],["T_STRING","Sales",218],["T_NS_SEPARATOR","\\",218],["T_STRING","Model",218],["T_NS_SEPARATOR","\\",218],["T_STRING","Order",218],["T_DOUBLE_COLON","::",218],["T_CLASS","class",218],")",["T_WHITESPACE","\n            ",218],["T_OBJECT_OPERATOR","->",219],["T_STRING","disableOriginalConstructor",219],"(",")",["T_WHITESPACE","\n            ",219],["T_OBJECT_OPERATOR","->",220],["T_STRING","setMethods",220],"(",["T_WHITESPACE","\n                ",220],"[",["T_WHITESPACE","\n                    ",221],["T_CONSTANT_ENCAPSED_STRING","'getConfig'",222],",",["T_WHITESPACE","\n                    ",222],["T_CONSTANT_ENCAPSED_STRING","'setState'",223],",",["T_WHITESPACE","\n                    ",223],["T_CONSTANT_ENCAPSED_STRING","'setStatus'",224],",",["T_WHITESPACE","\n                    ",224],["T_CONSTANT_ENCAPSED_STRING","'getStoreId'",225],",",["T_WHITESPACE","\n                    ",225],["T_CONSTANT_ENCAPSED_STRING","'getBaseGrandTotal'",226],",",["T_WHITESPACE","\n                    ",226],["T_CONSTANT_ENCAPSED_STRING","'getBaseCurrency'",227],",",["T_WHITESPACE","\n                    ",227],["T_CONSTANT_ENCAPSED_STRING","'getBaseCurrencyCode'",228],",",["T_WHITESPACE","\n                    ",228],["T_CONSTANT_ENCAPSED_STRING","'getTotalDue'",229],",",["T_WHITESPACE","\n                    ",229],["T_CONSTANT_ENCAPSED_STRING","'getBaseTotalDue'",230],",",["T_WHITESPACE","\n                    ",230],["T_CONSTANT_ENCAPSED_STRING","'getInvoiceCollection'",231],",",["T_WHITESPACE","\n                    ",231],["T_CONSTANT_ENCAPSED_STRING","'addRelatedObject'",232],",",["T_WHITESPACE","\n                    ",232],["T_CONSTANT_ENCAPSED_STRING","'getState'",233],",",["T_WHITESPACE","\n                    ",233],["T_CONSTANT_ENCAPSED_STRING","'getStatus'",234],",",["T_WHITESPACE","\n                    ",234],["T_CONSTANT_ENCAPSED_STRING","'addStatusHistoryComment'",235],",",["T_WHITESPACE","\n                    ",235],["T_CONSTANT_ENCAPSED_STRING","'registerCancellation'",236],",",["T_WHITESPACE","\n                    ",236],["T_CONSTANT_ENCAPSED_STRING","'getCustomerNote'",237],",",["T_WHITESPACE","\n                    ",237],["T_CONSTANT_ENCAPSED_STRING","'prepareInvoice'",238],",",["T_WHITESPACE","\n                    ",238],["T_CONSTANT_ENCAPSED_STRING","'getPaymentsCollection'",239],",",["T_WHITESPACE","\n                ",239],"]",["T_WHITESPACE","\n            ",240],")",["T_WHITESPACE","\n            ",241],["T_OBJECT_OPERATOR","->",242],["T_STRING","getMock",242],"(",")",";",["T_WHITESPACE","\n\n        ",242],["T_VARIABLE","$this",244],["T_OBJECT_OPERATOR","->",244],["T_STRING","transactionCollectionFactory",244],["T_WHITESPACE"," ",244],"=",["T_WHITESPACE"," ",244],["T_VARIABLE","$this",244],["T_OBJECT_OPERATOR","->",244],["T_STRING","getMock",244],"(",["T_WHITESPACE","\n            ",244],["T_NS_SEPARATOR","\\",245],["T_STRING","Magento",245],["T_NS_SEPARATOR","\\",245],["T_STRING","Sales",245],["T_NS_SEPARATOR","\\",245],["T_STRING","Model",245],["T_NS_SEPARATOR","\\",245],["T_STRING","ResourceModel",245],["T_NS_SEPARATOR","\\",245],["T_STRING","Order",245],["T_NS_SEPARATOR","\\",245],["T_STRING","Payment",245],["T_NS_SEPARATOR","\\",245],["T_STRING","Transaction",245],["T_NS_SEPARATOR","\\",245],["T_STRING","CollectionFactory",245],["T_DOUBLE_COLON","::",245],["T_CLASS","class",245],",",["T_WHITESPACE","\n            ",245],"[",["T_CONSTANT_ENCAPSED_STRING","'create'",246],"]",",",["T_WHITESPACE","\n            ",246],"[","]",",",["T_WHITESPACE","\n            ",247],["T_CONSTANT_ENCAPSED_STRING","''",248],",",["T_WHITESPACE","\n            ",248],["T_STRING","false",249],["T_WHITESPACE","\n        ",249],")",";",["T_WHITESPACE","\n        ",250],["T_VARIABLE","$this",251],["T_OBJECT_OPERATOR","->",251],["T_STRING","creditmemoFactoryMock",251],["T_WHITESPACE"," ",251],"=",["T_WHITESPACE"," ",251],["T_VARIABLE","$this",251],["T_OBJECT_OPERATOR","->",251],["T_STRING","getMock",251],"(",["T_WHITESPACE","\n            ",251],["T_NS_SEPARATOR","\\",252],["T_STRING","Magento",252],["T_NS_SEPARATOR","\\",252],["T_STRING","Sales",252],["T_NS_SEPARATOR","\\",252],["T_STRING","Model",252],["T_NS_SEPARATOR","\\",252],["T_STRING","Order",252],["T_NS_SEPARATOR","\\",252],["T_STRING","CreditmemoFactory",252],["T_DOUBLE_COLON","::",252],["T_CLASS","class",252],",",["T_WHITESPACE","\n            ",252],"[","]",",",["T_WHITESPACE","\n            ",253],"[","]",",",["T_WHITESPACE","\n            ",254],["T_CONSTANT_ENCAPSED_STRING","''",255],",",["T_WHITESPACE","\n            ",255],["T_STRING","false",256],["T_WHITESPACE","\n        ",256],")",";",["T_WHITESPACE","\n        ",257],["T_VARIABLE","$this",258],["T_OBJECT_OPERATOR","->",258],["T_STRING","transactionManagerMock",258],["T_WHITESPACE"," ",258],"=",["T_WHITESPACE"," ",258],["T_VARIABLE","$this",258],["T_OBJECT_OPERATOR","->",258],["T_STRING","getMock",258],"(",["T_WHITESPACE","\n            ",258],["T_NS_SEPARATOR","\\",259],["T_STRING","Magento",259],["T_NS_SEPARATOR","\\",259],["T_STRING","Sales",259],["T_NS_SEPARATOR","\\",259],["T_STRING","Model",259],["T_NS_SEPARATOR","\\",259],["T_STRING","Order",259],["T_NS_SEPARATOR","\\",259],["T_STRING","Payment",259],["T_NS_SEPARATOR","\\",259],["T_STRING","Transaction",259],["T_NS_SEPARATOR","\\",259],["T_STRING","Manager",259],["T_DOUBLE_COLON","::",259],["T_CLASS","class",259],",",["T_WHITESPACE","\n            ",259],"[","]",",",["T_WHITESPACE","\n            ",260],"[","]",",",["T_WHITESPACE","\n            ",261],["T_CONSTANT_ENCAPSED_STRING","''",262],",",["T_WHITESPACE","\n            ",262],["T_STRING","false",263],["T_WHITESPACE","\n        ",263],")",";",["T_WHITESPACE","\n        ",264],["T_VARIABLE","$this",265],["T_OBJECT_OPERATOR","->",265],["T_STRING","transactionBuilderMock",265],["T_WHITESPACE"," ",265],"=",["T_WHITESPACE"," ",265],["T_VARIABLE","$this",265],["T_OBJECT_OPERATOR","->",265],["T_STRING","getMock",265],"(",["T_WHITESPACE","\n            ",265],["T_NS_SEPARATOR","\\",266],["T_STRING","Magento",266],["T_NS_SEPARATOR","\\",266],["T_STRING","Sales",266],["T_NS_SEPARATOR","\\",266],["T_STRING","Model",266],["T_NS_SEPARATOR","\\",266],["T_STRING","Order",266],["T_NS_SEPARATOR","\\",266],["T_STRING","Payment",266],["T_NS_SEPARATOR","\\",266],["T_STRING","Transaction",266],["T_NS_SEPARATOR","\\",266],["T_STRING","Builder",266],["T_DOUBLE_COLON","::",266],["T_CLASS","class",266],",",["T_WHITESPACE","\n            ",266],"[","]",",",["T_WHITESPACE","\n            ",267],"[","]",",",["T_WHITESPACE","\n            ",268],["T_CONSTANT_ENCAPSED_STRING","''",269],",",["T_WHITESPACE","\n            ",269],["T_STRING","false",270],["T_WHITESPACE","\n        ",270],")",";",["T_WHITESPACE","\n        ",271],["T_VARIABLE","$this",272],["T_OBJECT_OPERATOR","->",272],["T_STRING","creditMemoMock",272],["T_WHITESPACE"," ",272],"=",["T_WHITESPACE"," ",272],["T_VARIABLE","$this",272],["T_OBJECT_OPERATOR","->",272],["T_STRING","getMock",272],"(",["T_WHITESPACE","\n            ",272],["T_NS_SEPARATOR","\\",273],["T_STRING","Magento",273],["T_NS_SEPARATOR","\\",273],["T_STRING","Sales",273],["T_NS_SEPARATOR","\\",273],["T_STRING","Model",273],["T_NS_SEPARATOR","\\",273],["T_STRING","Order",273],["T_NS_SEPARATOR","\\",273],["T_STRING","Creditmemo",273],["T_DOUBLE_COLON","::",273],["T_CLASS","class",273],",",["T_WHITESPACE","\n            ",273],"[",["T_WHITESPACE","\n                ",274],["T_CONSTANT_ENCAPSED_STRING","'setPaymentRefundDisallowed'",275],",",["T_WHITESPACE","\n                ",275],["T_CONSTANT_ENCAPSED_STRING","'getItemsCollection'",276],",",["T_WHITESPACE","\n                ",276],["T_CONSTANT_ENCAPSED_STRING","'getItems'",277],",",["T_WHITESPACE","\n                ",277],["T_CONSTANT_ENCAPSED_STRING","'setAutomaticallyCreated'",278],",",["T_WHITESPACE","\n                ",278],["T_CONSTANT_ENCAPSED_STRING","'register'",279],",",["T_WHITESPACE","\n                ",279],["T_CONSTANT_ENCAPSED_STRING","'addComment'",280],",",["T_WHITESPACE","\n                ",280],["T_CONSTANT_ENCAPSED_STRING","'save'",281],",",["T_WHITESPACE","\n                ",281],["T_CONSTANT_ENCAPSED_STRING","'getGrandTotal'",282],",",["T_WHITESPACE","\n                ",282],["T_CONSTANT_ENCAPSED_STRING","'getBaseGrandTotal'",283],",",["T_WHITESPACE","\n                ",283],["T_CONSTANT_ENCAPSED_STRING","'getDoTransaction'",284],",",["T_WHITESPACE","\n                ",284],["T_CONSTANT_ENCAPSED_STRING","'getInvoice'",285],",",["T_WHITESPACE","\n                ",285],["T_CONSTANT_ENCAPSED_STRING","'getOrder'",286],["T_WHITESPACE","\n            ",286],"]",",",["T_WHITESPACE","\n            ",287],"[","]",",",["T_WHITESPACE","\n            ",288],["T_CONSTANT_ENCAPSED_STRING","''",289],",",["T_WHITESPACE","\n            ",289],["T_STRING","false",290],["T_WHITESPACE","\n        ",290],")",";",["T_WHITESPACE","\n        ",291],["T_VARIABLE","$this",292],["T_OBJECT_OPERATOR","->",292],["T_STRING","orderStateResolverMock",292],["T_WHITESPACE"," ",292],"=",["T_WHITESPACE"," ",292],["T_VARIABLE","$this",292],["T_OBJECT_OPERATOR","->",292],["T_STRING","getMockBuilder",292],"(",["T_STRING","Order",292],["T_NS_SEPARATOR","\\",292],["T_STRING","OrderStateResolverInterface",292],["T_DOUBLE_COLON","::",292],["T_CLASS","class",292],")",["T_WHITESPACE","\n            ",292],["T_OBJECT_OPERATOR","->",293],["T_STRING","disableOriginalConstructor",293],"(",")",["T_WHITESPACE","\n            ",293],["T_OBJECT_OPERATOR","->",294],["T_STRING","getMockForAbstractClass",294],"(",")",";",["T_WHITESPACE","\n        ",294],["T_VARIABLE","$this",295],["T_OBJECT_OPERATOR","->",295],["T_STRING","payment",295],["T_WHITESPACE"," ",295],"=",["T_WHITESPACE"," ",295],["T_VARIABLE","$this",295],["T_OBJECT_OPERATOR","->",295],["T_STRING","initPayment",295],"(",")",";",["T_WHITESPACE","\n        ",295],["T_VARIABLE","$helper",296],["T_WHITESPACE"," ",296],"=",["T_WHITESPACE"," ",296],["T_NEW","new",296],["T_WHITESPACE"," ",296],["T_NS_SEPARATOR","\\",296],["T_STRING","Magento",296],["T_NS_SEPARATOR","\\",296],["T_STRING","Framework",296],["T_NS_SEPARATOR","\\",296],["T_STRING","TestFramework",296],["T_NS_SEPARATOR","\\",296],["T_STRING","Unit",296],["T_NS_SEPARATOR","\\",296],["T_STRING","Helper",296],["T_NS_SEPARATOR","\\",296],["T_STRING","ObjectManager",296],"(",["T_VARIABLE","$this",296],")",";",["T_WHITESPACE","\n        ",296],["T_VARIABLE","$helper",297],["T_OBJECT_OPERATOR","->",297],["T_STRING","setBackwardCompatibleProperty",297],"(",["T_VARIABLE","$this",297],["T_OBJECT_OPERATOR","->",297],["T_STRING","payment",297],",",["T_WHITESPACE"," ",297],["T_CONSTANT_ENCAPSED_STRING","'orderStateResolver'",297],",",["T_WHITESPACE"," ",297],["T_VARIABLE","$this",297],["T_OBJECT_OPERATOR","->",297],["T_STRING","orderStateResolverMock",297],")",";",["T_WHITESPACE","\n        ",297],["T_VARIABLE","$this",298],["T_OBJECT_OPERATOR","->",298],["T_STRING","payment",298],["T_OBJECT_OPERATOR","->",298],["T_STRING","setMethod",298],"(",["T_CONSTANT_ENCAPSED_STRING","'any'",298],")",";",["T_WHITESPACE","\n        ",298],["T_VARIABLE","$this",299],["T_OBJECT_OPERATOR","->",299],["T_STRING","payment",299],["T_OBJECT_OPERATOR","->",299],["T_STRING","setOrder",299],"(",["T_VARIABLE","$this",299],["T_OBJECT_OPERATOR","->",299],["T_STRING","orderMock",299],")",";",["T_WHITESPACE","\n        ",299],["T_VARIABLE","$this",300],["T_OBJECT_OPERATOR","->",300],["T_STRING","transactionId",300],["T_WHITESPACE"," ",300],"=",["T_WHITESPACE"," ",300],["T_STRING","self",300],["T_DOUBLE_COLON","::",300],["T_STRING","TRANSACTION_ID",300],";",["T_WHITESPACE","\n    ",300],"}",["T_WHITESPACE","\n\n    ",301],["T_PROTECTED","protected",303],["T_WHITESPACE"," ",303],["T_FUNCTION","function",303],["T_WHITESPACE"," ",303],["T_STRING","tearDown",303],"(",")",["T_WHITESPACE","\n    ",303],"{",["T_WHITESPACE","\n        ",304],["T_UNSET","unset",305],"(",["T_VARIABLE","$this",305],["T_OBJECT_OPERATOR","->",305],["T_STRING","payment",305],")",";",["T_WHITESPACE","\n    ",305],"}",["T_WHITESPACE","\n\n    ",306],["T_PUBLIC","public",308],["T_WHITESPACE"," ",308],["T_FUNCTION","function",308],["T_WHITESPACE"," ",308],["T_STRING","testCancel",308],"(",")",["T_WHITESPACE","\n    ",308],"{",["T_WHITESPACE","\n        ",309],["T_VARIABLE","$this",310],["T_OBJECT_OPERATOR","->",310],["T_STRING","helperMock",310],["T_OBJECT_OPERATOR","->",310],["T_STRING","expects",310],"(",["T_VARIABLE","$this",310],["T_OBJECT_OPERATOR","->",310],["T_STRING","once",310],"(",")",")",["T_WHITESPACE","\n            ",310],["T_OBJECT_OPERATOR","->",311],["T_STRING","method",311],"(",["T_CONSTANT_ENCAPSED_STRING","'getMethodInstance'",311],")",["T_WHITESPACE","\n            ",311],["T_OBJECT_OPERATOR","->",312],["T_STRING","will",312],"(",["T_VARIABLE","$this",312],["T_OBJECT_OPERATOR","->",312],["T_STRING","returnValue",312],"(",["T_VARIABLE","$this",312],["T_OBJECT_OPERATOR","->",312],["T_STRING","paymentMethodMock",312],")",")",";",["T_WHITESPACE","\n        ",312],["T_COMMENT","\/\/ check fix for partial refunds in Payflow Pro\n",313],["T_WHITESPACE","        ",314],["T_VARIABLE","$this",314],["T_OBJECT_OPERATOR","->",314],["T_STRING","paymentMethodMock",314],["T_OBJECT_OPERATOR","->",314],["T_STRING","expects",314],"(",["T_VARIABLE","$this",314],["T_OBJECT_OPERATOR","->",314],["T_STRING","once",314],"(",")",")",["T_WHITESPACE","\n            ",314],["T_OBJECT_OPERATOR","->",315],["T_STRING","method",315],"(",["T_CONSTANT_ENCAPSED_STRING","'canVoid'",315],")",["T_WHITESPACE","\n            ",315],["T_OBJECT_OPERATOR","->",316],["T_STRING","willReturn",316],"(",["T_STRING","false",316],")",";",["T_WHITESPACE","\n\n        ",316],["T_VARIABLE","$this",318],["T_OBJECT_OPERATOR","->",318],["T_STRING","assertEquals",318],"(",["T_VARIABLE","$this",318],["T_OBJECT_OPERATOR","->",318],["T_STRING","payment",318],",",["T_WHITESPACE"," ",318],["T_VARIABLE","$this",318],["T_OBJECT_OPERATOR","->",318],["T_STRING","payment",318],["T_OBJECT_OPERATOR","->",318],["T_STRING","cancel",318],"(",")",")",";",["T_WHITESPACE","\n    ",318],"}",["T_WHITESPACE","\n\n    ",319],["T_PUBLIC","public",321],["T_WHITESPACE"," ",321],["T_FUNCTION","function",321],["T_WHITESPACE"," ",321],["T_STRING","testPlace",321],"(",")",["T_WHITESPACE","\n    ",321],"{",["T_WHITESPACE","\n        ",322],["T_VARIABLE","$newOrderStatus",323],["T_WHITESPACE"," ",323],"=",["T_WHITESPACE"," ",323],["T_CONSTANT_ENCAPSED_STRING","'new_status'",323],";",["T_WHITESPACE","\n\n        ",323],["T_VARIABLE","$this",325],["T_OBJECT_OPERATOR","->",325],["T_STRING","helperMock",325],["T_OBJECT_OPERATOR","->",325],["T_STRING","expects",325],"(",["T_VARIABLE","$this",325],["T_OBJECT_OPERATOR","->",325],["T_STRING","once",325],"(",")",")",["T_WHITESPACE","\n            ",325],["T_OBJECT_OPERATOR","->",326],["T_STRING","method",326],"(",["T_CONSTANT_ENCAPSED_STRING","'getMethodInstance'",326],")",["T_WHITESPACE","\n            ",326],["T_OBJECT_OPERATOR","->",327],["T_STRING","will",327],"(",["T_VARIABLE","$this",327],["T_OBJECT_OPERATOR","->",327],["T_STRING","returnValue",327],"(",["T_VARIABLE","$this",327],["T_OBJECT_OPERATOR","->",327],["T_STRING","paymentMethodMock",327],")",")",";",["T_WHITESPACE","\n\n        ",327],["T_VARIABLE","$this",329],["T_OBJECT_OPERATOR","->",329],["T_STRING","paymentMethodMock",329],["T_OBJECT_OPERATOR","->",329],["T_STRING","expects",329],"(",["T_VARIABLE","$this",329],["T_OBJECT_OPERATOR","->",329],["T_STRING","any",329],"(",")",")",["T_WHITESPACE","\n            ",329],["T_OBJECT_OPERATOR","->",330],["T_STRING","method",330],"(",["T_CONSTANT_ENCAPSED_STRING","'getConfigData'",330],")",["T_WHITESPACE","\n            ",330],["T_OBJECT_OPERATOR","->",331],["T_STRING","with",331],"(",["T_CONSTANT_ENCAPSED_STRING","'order_status'",331],",",["T_WHITESPACE"," ",331],["T_STRING","null",331],")",["T_WHITESPACE","\n            ",331],["T_OBJECT_OPERATOR","->",332],["T_STRING","willReturn",332],"(",["T_VARIABLE","$newOrderStatus",332],")",";",["T_WHITESPACE","\n\n        ",332],["T_VARIABLE","$this",334],["T_OBJECT_OPERATOR","->",334],["T_STRING","mockGetDefaultStatus",334],"(",["T_STRING","Order",334],["T_DOUBLE_COLON","::",334],["T_STRING","STATE_NEW",334],",",["T_WHITESPACE"," ",334],["T_VARIABLE","$newOrderStatus",334],",",["T_WHITESPACE"," ",334],"[",["T_CONSTANT_ENCAPSED_STRING","'first'",334],",",["T_WHITESPACE"," ",334],["T_CONSTANT_ENCAPSED_STRING","'second'",334],"]",")",";",["T_WHITESPACE","\n        ",334],["T_VARIABLE","$this",335],["T_OBJECT_OPERATOR","->",335],["T_STRING","assertOrderUpdated",335],"(",["T_STRING","Order",335],["T_DOUBLE_COLON","::",335],["T_STRING","STATE_NEW",335],",",["T_WHITESPACE"," ",335],["T_VARIABLE","$newOrderStatus",335],")",";",["T_WHITESPACE","\n\n        ",335],["T_VARIABLE","$this",337],["T_OBJECT_OPERATOR","->",337],["T_STRING","paymentMethodMock",337],["T_OBJECT_OPERATOR","->",337],["T_STRING","expects",337],"(",["T_VARIABLE","$this",337],["T_OBJECT_OPERATOR","->",337],["T_STRING","once",337],"(",")",")",["T_WHITESPACE","\n            ",337],["T_OBJECT_OPERATOR","->",338],["T_STRING","method",338],"(",["T_CONSTANT_ENCAPSED_STRING","'getConfigPaymentAction'",338],")",["T_WHITESPACE","\n            ",338],["T_OBJECT_OPERATOR","->",339],["T_STRING","willReturn",339],"(",["T_STRING","null",339],")",";",["T_WHITESPACE","\n\n        ",339],["T_VARIABLE","$this",341],["T_OBJECT_OPERATOR","->",341],["T_STRING","mockPlaceEvents",341],"(",")",";",["T_WHITESPACE","\n\n        ",341],["T_VARIABLE","$this",343],["T_OBJECT_OPERATOR","->",343],["T_STRING","assertEquals",343],"(",["T_VARIABLE","$this",343],["T_OBJECT_OPERATOR","->",343],["T_STRING","payment",343],",",["T_WHITESPACE"," ",343],["T_VARIABLE","$this",343],["T_OBJECT_OPERATOR","->",343],["T_STRING","payment",343],["T_OBJECT_OPERATOR","->",343],["T_STRING","place",343],"(",")",")",";",["T_WHITESPACE","\n    ",343],"}",["T_WHITESPACE","\n\n    ",344],["T_PUBLIC","public",346],["T_WHITESPACE"," ",346],["T_FUNCTION","function",346],["T_WHITESPACE"," ",346],["T_STRING","testPlaceActionOrder",346],"(",")",["T_WHITESPACE","\n    ",346],"{",["T_WHITESPACE","\n        ",347],["T_VARIABLE","$newOrderStatus",348],["T_WHITESPACE"," ",348],"=",["T_WHITESPACE"," ",348],["T_CONSTANT_ENCAPSED_STRING","'new_status'",348],";",["T_WHITESPACE","\n        ",348],["T_VARIABLE","$customerNote",349],["T_WHITESPACE"," ",349],"=",["T_WHITESPACE"," ",349],["T_CONSTANT_ENCAPSED_STRING","'blabla'",349],";",["T_WHITESPACE","\n        ",349],["T_VARIABLE","$sum",350],["T_WHITESPACE"," ",350],"=",["T_WHITESPACE"," ",350],["T_LNUMBER","10",350],";",["T_WHITESPACE","\n        ",350],["T_VARIABLE","$this",351],["T_OBJECT_OPERATOR","->",351],["T_STRING","payment",351],["T_OBJECT_OPERATOR","->",351],["T_STRING","setTransactionId",351],"(",["T_VARIABLE","$this",351],["T_OBJECT_OPERATOR","->",351],["T_STRING","transactionId",351],")",";",["T_WHITESPACE","\n        ",351],["T_VARIABLE","$this",352],["T_OBJECT_OPERATOR","->",352],["T_STRING","orderMock",352],["T_OBJECT_OPERATOR","->",352],["T_STRING","expects",352],"(",["T_VARIABLE","$this",352],["T_OBJECT_OPERATOR","->",352],["T_STRING","any",352],"(",")",")",["T_OBJECT_OPERATOR","->",352],["T_STRING","method",352],"(",["T_CONSTANT_ENCAPSED_STRING","'getTotalDue'",352],")",["T_OBJECT_OPERATOR","->",352],["T_STRING","willReturn",352],"(",["T_VARIABLE","$sum",352],")",";",["T_WHITESPACE","\n        ",352],["T_VARIABLE","$this",353],["T_OBJECT_OPERATOR","->",353],["T_STRING","orderMock",353],["T_OBJECT_OPERATOR","->",353],["T_STRING","expects",353],"(",["T_VARIABLE","$this",353],["T_OBJECT_OPERATOR","->",353],["T_STRING","any",353],"(",")",")",["T_OBJECT_OPERATOR","->",353],["T_STRING","method",353],"(",["T_CONSTANT_ENCAPSED_STRING","'getBaseTotalDue'",353],")",["T_OBJECT_OPERATOR","->",353],["T_STRING","willReturn",353],"(",["T_VARIABLE","$sum",353],")",";",["T_WHITESPACE","\n        ",353],["T_VARIABLE","$this",354],["T_OBJECT_OPERATOR","->",354],["T_STRING","helperMock",354],["T_OBJECT_OPERATOR","->",354],["T_STRING","expects",354],"(",["T_VARIABLE","$this",354],["T_OBJECT_OPERATOR","->",354],["T_STRING","once",354],"(",")",")",["T_WHITESPACE","\n            ",354],["T_OBJECT_OPERATOR","->",355],["T_STRING","method",355],"(",["T_CONSTANT_ENCAPSED_STRING","'getMethodInstance'",355],")",["T_WHITESPACE","\n            ",355],["T_OBJECT_OPERATOR","->",356],["T_STRING","will",356],"(",["T_VARIABLE","$this",356],["T_OBJECT_OPERATOR","->",356],["T_STRING","returnValue",356],"(",["T_VARIABLE","$this",356],["T_OBJECT_OPERATOR","->",356],["T_STRING","paymentMethodMock",356],")",")",";",["T_WHITESPACE","\n        ",356],["T_VARIABLE","$this",357],["T_OBJECT_OPERATOR","->",357],["T_STRING","paymentMethodMock",357],["T_OBJECT_OPERATOR","->",357],["T_STRING","expects",357],"(",["T_VARIABLE","$this",357],["T_OBJECT_OPERATOR","->",357],["T_STRING","once",357],"(",")",")",["T_WHITESPACE","\n            ",357],["T_OBJECT_OPERATOR","->",358],["T_STRING","method",358],"(",["T_CONSTANT_ENCAPSED_STRING","'getConfigPaymentAction'",358],")",["T_WHITESPACE","\n            ",358],["T_OBJECT_OPERATOR","->",359],["T_STRING","willReturn",359],"(",["T_NS_SEPARATOR","\\",359],["T_STRING","Magento",359],["T_NS_SEPARATOR","\\",359],["T_STRING","Payment",359],["T_NS_SEPARATOR","\\",359],["T_STRING","Model",359],["T_NS_SEPARATOR","\\",359],["T_STRING","Method",359],["T_NS_SEPARATOR","\\",359],["T_STRING","AbstractMethod",359],["T_DOUBLE_COLON","::",359],["T_STRING","ACTION_ORDER",359],")",";",["T_WHITESPACE","\n        ",359],["T_VARIABLE","$this",360],["T_OBJECT_OPERATOR","->",360],["T_STRING","paymentMethodMock",360],["T_OBJECT_OPERATOR","->",360],["T_STRING","expects",360],"(",["T_VARIABLE","$this",360],["T_OBJECT_OPERATOR","->",360],["T_STRING","once",360],"(",")",")",["T_OBJECT_OPERATOR","->",360],["T_STRING","method",360],"(",["T_CONSTANT_ENCAPSED_STRING","'isInitializeNeeded'",360],")",["T_OBJECT_OPERATOR","->",360],["T_STRING","willReturn",360],"(",["T_STRING","false",360],")",";",["T_WHITESPACE","\n        ",360],["T_VARIABLE","$this",361],["T_OBJECT_OPERATOR","->",361],["T_STRING","paymentMethodMock",361],["T_OBJECT_OPERATOR","->",361],["T_STRING","expects",361],"(",["T_VARIABLE","$this",361],["T_OBJECT_OPERATOR","->",361],["T_STRING","any",361],"(",")",")",["T_WHITESPACE","\n            ",361],["T_OBJECT_OPERATOR","->",362],["T_STRING","method",362],"(",["T_CONSTANT_ENCAPSED_STRING","'getConfigData'",362],")",["T_WHITESPACE","\n            ",362],["T_OBJECT_OPERATOR","->",363],["T_STRING","with",363],"(",["T_CONSTANT_ENCAPSED_STRING","'order_status'",363],",",["T_WHITESPACE"," ",363],["T_STRING","null",363],")",["T_WHITESPACE","\n            ",363],["T_OBJECT_OPERATOR","->",364],["T_STRING","willReturn",364],"(",["T_VARIABLE","$newOrderStatus",364],")",";",["T_WHITESPACE","\n        ",364],["T_VARIABLE","$this",365],["T_OBJECT_OPERATOR","->",365],["T_STRING","mockGetDefaultStatus",365],"(",["T_STRING","Order",365],["T_DOUBLE_COLON","::",365],["T_STRING","STATE_PROCESSING",365],",",["T_WHITESPACE"," ",365],["T_VARIABLE","$newOrderStatus",365],",",["T_WHITESPACE"," ",365],"[",["T_CONSTANT_ENCAPSED_STRING","'first'",365],",",["T_WHITESPACE"," ",365],["T_CONSTANT_ENCAPSED_STRING","'second'",365],"]",")",";",["T_WHITESPACE","\n        ",365],["T_VARIABLE","$this",366],["T_OBJECT_OPERATOR","->",366],["T_STRING","orderMock",366],["T_OBJECT_OPERATOR","->",366],["T_STRING","expects",366],"(",["T_VARIABLE","$this",366],["T_OBJECT_OPERATOR","->",366],["T_STRING","any",366],"(",")",")",["T_WHITESPACE","\n            ",366],["T_OBJECT_OPERATOR","->",367],["T_STRING","method",367],"(",["T_CONSTANT_ENCAPSED_STRING","'setState'",367],")",["T_WHITESPACE","\n            ",367],["T_OBJECT_OPERATOR","->",368],["T_STRING","with",368],"(",["T_STRING","Order",368],["T_DOUBLE_COLON","::",368],["T_STRING","STATE_PROCESSING",368],")",["T_WHITESPACE","\n            ",368],["T_OBJECT_OPERATOR","->",369],["T_STRING","willReturnSelf",369],"(",")",";",["T_WHITESPACE","\n        ",369],["T_VARIABLE","$this",370],["T_OBJECT_OPERATOR","->",370],["T_STRING","orderMock",370],["T_OBJECT_OPERATOR","->",370],["T_STRING","expects",370],"(",["T_VARIABLE","$this",370],["T_OBJECT_OPERATOR","->",370],["T_STRING","any",370],"(",")",")",["T_WHITESPACE","\n            ",370],["T_OBJECT_OPERATOR","->",371],["T_STRING","method",371],"(",["T_CONSTANT_ENCAPSED_STRING","'setStatus'",371],")",["T_WHITESPACE","\n            ",371],["T_OBJECT_OPERATOR","->",372],["T_STRING","with",372],"(",["T_VARIABLE","$newOrderStatus",372],")",["T_WHITESPACE","\n            ",372],["T_OBJECT_OPERATOR","->",373],["T_STRING","willReturnSelf",373],"(",")",";",["T_WHITESPACE","\n        ",373],["T_VARIABLE","$this",374],["T_OBJECT_OPERATOR","->",374],["T_STRING","paymentProcessor",374],["T_OBJECT_OPERATOR","->",374],["T_STRING","expects",374],"(",["T_VARIABLE","$this",374],["T_OBJECT_OPERATOR","->",374],["T_STRING","once",374],"(",")",")",["T_WHITESPACE","\n            ",374],["T_OBJECT_OPERATOR","->",375],["T_STRING","method",375],"(",["T_CONSTANT_ENCAPSED_STRING","'order'",375],")",["T_WHITESPACE","\n            ",375],["T_OBJECT_OPERATOR","->",376],["T_STRING","with",376],"(",["T_VARIABLE","$this",376],["T_OBJECT_OPERATOR","->",376],["T_STRING","payment",376],",",["T_WHITESPACE"," ",376],["T_VARIABLE","$sum",376],")",["T_WHITESPACE","\n            ",376],["T_OBJECT_OPERATOR","->",377],["T_STRING","willReturnSelf",377],"(",")",";",["T_WHITESPACE","\n        ",377],["T_VARIABLE","$this",378],["T_OBJECT_OPERATOR","->",378],["T_STRING","mockPlaceEvents",378],"(",")",";",["T_WHITESPACE","\n        ",378],["T_VARIABLE","$statusHistory",379],["T_WHITESPACE"," ",379],"=",["T_WHITESPACE"," ",379],["T_VARIABLE","$this",379],["T_OBJECT_OPERATOR","->",379],["T_STRING","getMockForAbstractClass",379],"(",["T_WHITESPACE","\n            ",379],["T_NS_SEPARATOR","\\",380],["T_STRING","Magento",380],["T_NS_SEPARATOR","\\",380],["T_STRING","Sales",380],["T_NS_SEPARATOR","\\",380],["T_STRING","Api",380],["T_NS_SEPARATOR","\\",380],["T_STRING","Data",380],["T_NS_SEPARATOR","\\",380],["T_STRING","OrderStatusHistoryInterface",380],["T_DOUBLE_COLON","::",380],["T_CLASS","class",380],["T_WHITESPACE","\n        ",380],")",";",["T_WHITESPACE","\n        ",381],["T_VARIABLE","$this",382],["T_OBJECT_OPERATOR","->",382],["T_STRING","orderMock",382],["T_OBJECT_OPERATOR","->",382],["T_STRING","expects",382],"(",["T_VARIABLE","$this",382],["T_OBJECT_OPERATOR","->",382],["T_STRING","any",382],"(",")",")",["T_OBJECT_OPERATOR","->",382],["T_STRING","method",382],"(",["T_CONSTANT_ENCAPSED_STRING","'getCustomerNote'",382],")",["T_OBJECT_OPERATOR","->",382],["T_STRING","willReturn",382],"(",["T_VARIABLE","$customerNote",382],")",";",["T_WHITESPACE","\n        ",382],["T_VARIABLE","$this",383],["T_OBJECT_OPERATOR","->",383],["T_STRING","orderMock",383],["T_OBJECT_OPERATOR","->",383],["T_STRING","expects",383],"(",["T_VARIABLE","$this",383],["T_OBJECT_OPERATOR","->",383],["T_STRING","any",383],"(",")",")",["T_WHITESPACE","\n            ",383],["T_OBJECT_OPERATOR","->",384],["T_STRING","method",384],"(",["T_CONSTANT_ENCAPSED_STRING","'addStatusHistoryComment'",384],")",["T_WHITESPACE","\n            ",384],["T_OBJECT_OPERATOR","->",385],["T_STRING","withConsecutive",385],"(",["T_WHITESPACE","\n                ",385],"[",["T_VARIABLE","$customerNote",386],"]",["T_WHITESPACE","\n            ",386],")",["T_WHITESPACE","\n            ",387],["T_OBJECT_OPERATOR","->",388],["T_STRING","willReturn",388],"(",["T_VARIABLE","$statusHistory",388],")",";",["T_WHITESPACE","\n        ",388],["T_VARIABLE","$this",389],["T_OBJECT_OPERATOR","->",389],["T_STRING","orderMock",389],["T_OBJECT_OPERATOR","->",389],["T_STRING","expects",389],"(",["T_VARIABLE","$this",389],["T_OBJECT_OPERATOR","->",389],["T_STRING","any",389],"(",")",")",["T_WHITESPACE","\n            ",389],["T_OBJECT_OPERATOR","->",390],["T_STRING","method",390],"(",["T_CONSTANT_ENCAPSED_STRING","'setIsCustomerNotified'",390],")",["T_WHITESPACE","\n            ",390],["T_OBJECT_OPERATOR","->",391],["T_STRING","with",391],"(",["T_STRING","true",391],")",["T_WHITESPACE","\n            ",391],["T_OBJECT_OPERATOR","->",392],["T_STRING","willReturn",392],"(",["T_VARIABLE","$statusHistory",392],")",";",["T_WHITESPACE","\n\n        ",392],["T_VARIABLE","$this",394],["T_OBJECT_OPERATOR","->",394],["T_STRING","assertEquals",394],"(",["T_VARIABLE","$this",394],["T_OBJECT_OPERATOR","->",394],["T_STRING","payment",394],",",["T_WHITESPACE"," ",394],["T_VARIABLE","$this",394],["T_OBJECT_OPERATOR","->",394],["T_STRING","payment",394],["T_OBJECT_OPERATOR","->",394],["T_STRING","place",394],"(",")",")",";",["T_WHITESPACE","\n    ",394],"}",["T_WHITESPACE","\n\n    ",395],["T_PROTECTED","protected",397],["T_WHITESPACE"," ",397],["T_FUNCTION","function",397],["T_WHITESPACE"," ",397],["T_STRING","mockPlaceEvents",397],"(",")",["T_WHITESPACE","\n    ",397],"{",["T_WHITESPACE","\n        ",398],["T_VARIABLE","$this",399],["T_OBJECT_OPERATOR","->",399],["T_STRING","eventManagerMock",399],["T_OBJECT_OPERATOR","->",399],["T_STRING","expects",399],"(",["T_VARIABLE","$this",399],["T_OBJECT_OPERATOR","->",399],["T_STRING","at",399],"(",["T_LNUMBER","0",399],")",")",["T_WHITESPACE","\n            ",399],["T_OBJECT_OPERATOR","->",400],["T_STRING","method",400],"(",["T_CONSTANT_ENCAPSED_STRING","'dispatch'",400],")",["T_WHITESPACE","\n            ",400],["T_OBJECT_OPERATOR","->",401],["T_STRING","with",401],"(",["T_CONSTANT_ENCAPSED_STRING","'sales_order_payment_place_start'",401],",",["T_WHITESPACE"," ",401],"[",["T_CONSTANT_ENCAPSED_STRING","'payment'",401],["T_WHITESPACE"," ",401],["T_DOUBLE_ARROW","=>",401],["T_WHITESPACE"," ",401],["T_VARIABLE","$this",401],["T_OBJECT_OPERATOR","->",401],["T_STRING","payment",401],"]",")",";",["T_WHITESPACE","\n        ",401],["T_VARIABLE","$this",402],["T_OBJECT_OPERATOR","->",402],["T_STRING","eventManagerMock",402],["T_OBJECT_OPERATOR","->",402],["T_STRING","expects",402],"(",["T_VARIABLE","$this",402],["T_OBJECT_OPERATOR","->",402],["T_STRING","at",402],"(",["T_LNUMBER","1",402],")",")",["T_WHITESPACE","\n            ",402],["T_OBJECT_OPERATOR","->",403],["T_STRING","method",403],"(",["T_CONSTANT_ENCAPSED_STRING","'dispatch'",403],")",["T_WHITESPACE","\n            ",403],["T_OBJECT_OPERATOR","->",404],["T_STRING","with",404],"(",["T_CONSTANT_ENCAPSED_STRING","'sales_order_payment_place_end'",404],",",["T_WHITESPACE"," ",404],"[",["T_CONSTANT_ENCAPSED_STRING","'payment'",404],["T_WHITESPACE"," ",404],["T_DOUBLE_ARROW","=>",404],["T_WHITESPACE"," ",404],["T_VARIABLE","$this",404],["T_OBJECT_OPERATOR","->",404],["T_STRING","payment",404],"]",")",";",["T_WHITESPACE","\n    ",404],"}",["T_WHITESPACE","\n\n    ",405],["T_PUBLIC","public",407],["T_WHITESPACE"," ",407],["T_FUNCTION","function",407],["T_WHITESPACE"," ",407],["T_STRING","testPlaceActionAuthorizeInitializeNeeded",407],"(",")",["T_WHITESPACE","\n    ",407],"{",["T_WHITESPACE","\n        ",408],["T_VARIABLE","$newOrderStatus",409],["T_WHITESPACE"," ",409],"=",["T_WHITESPACE"," ",409],["T_CONSTANT_ENCAPSED_STRING","'new_status'",409],";",["T_WHITESPACE","\n        ",409],["T_VARIABLE","$customerNote",410],["T_WHITESPACE"," ",410],"=",["T_WHITESPACE"," ",410],["T_CONSTANT_ENCAPSED_STRING","'blabla'",410],";",["T_WHITESPACE","\n        ",410],["T_VARIABLE","$sum",411],["T_WHITESPACE"," ",411],"=",["T_WHITESPACE"," ",411],["T_LNUMBER","10",411],";",["T_WHITESPACE","\n        ",411],["T_VARIABLE","$this",412],["T_OBJECT_OPERATOR","->",412],["T_STRING","orderMock",412],["T_OBJECT_OPERATOR","->",412],["T_STRING","expects",412],"(",["T_VARIABLE","$this",412],["T_OBJECT_OPERATOR","->",412],["T_STRING","any",412],"(",")",")",["T_OBJECT_OPERATOR","->",412],["T_STRING","method",412],"(",["T_CONSTANT_ENCAPSED_STRING","'getBaseGrandTotal'",412],")",["T_OBJECT_OPERATOR","->",412],["T_STRING","willReturn",412],"(",["T_VARIABLE","$sum",412],")",";",["T_WHITESPACE","\n        ",412],["T_VARIABLE","$this",413],["T_OBJECT_OPERATOR","->",413],["T_STRING","orderMock",413],["T_OBJECT_OPERATOR","->",413],["T_STRING","expects",413],"(",["T_VARIABLE","$this",413],["T_OBJECT_OPERATOR","->",413],["T_STRING","any",413],"(",")",")",["T_OBJECT_OPERATOR","->",413],["T_STRING","method",413],"(",["T_CONSTANT_ENCAPSED_STRING","'getTotalDue'",413],")",["T_OBJECT_OPERATOR","->",413],["T_STRING","willReturn",413],"(",["T_VARIABLE","$sum",413],")",";",["T_WHITESPACE","\n        ",413],["T_VARIABLE","$this",414],["T_OBJECT_OPERATOR","->",414],["T_STRING","orderMock",414],["T_OBJECT_OPERATOR","->",414],["T_STRING","expects",414],"(",["T_VARIABLE","$this",414],["T_OBJECT_OPERATOR","->",414],["T_STRING","any",414],"(",")",")",["T_OBJECT_OPERATOR","->",414],["T_STRING","method",414],"(",["T_CONSTANT_ENCAPSED_STRING","'getBaseTotalDue'",414],")",["T_OBJECT_OPERATOR","->",414],["T_STRING","willReturn",414],"(",["T_VARIABLE","$sum",414],")",";",["T_WHITESPACE","\n        ",414],["T_VARIABLE","$this",415],["T_OBJECT_OPERATOR","->",415],["T_STRING","helperMock",415],["T_OBJECT_OPERATOR","->",415],["T_STRING","expects",415],"(",["T_VARIABLE","$this",415],["T_OBJECT_OPERATOR","->",415],["T_STRING","once",415],"(",")",")",["T_WHITESPACE","\n            ",415],["T_OBJECT_OPERATOR","->",416],["T_STRING","method",416],"(",["T_CONSTANT_ENCAPSED_STRING","'getMethodInstance'",416],")",["T_WHITESPACE","\n            ",416],["T_OBJECT_OPERATOR","->",417],["T_STRING","will",417],"(",["T_VARIABLE","$this",417],["T_OBJECT_OPERATOR","->",417],["T_STRING","returnValue",417],"(",["T_VARIABLE","$this",417],["T_OBJECT_OPERATOR","->",417],["T_STRING","paymentMethodMock",417],")",")",";",["T_WHITESPACE","\n        ",417],["T_VARIABLE","$this",418],["T_OBJECT_OPERATOR","->",418],["T_STRING","paymentMethodMock",418],["T_OBJECT_OPERATOR","->",418],["T_STRING","expects",418],"(",["T_VARIABLE","$this",418],["T_OBJECT_OPERATOR","->",418],["T_STRING","once",418],"(",")",")",["T_WHITESPACE","\n            ",418],["T_OBJECT_OPERATOR","->",419],["T_STRING","method",419],"(",["T_CONSTANT_ENCAPSED_STRING","'getConfigPaymentAction'",419],")",["T_WHITESPACE","\n            ",419],["T_OBJECT_OPERATOR","->",420],["T_STRING","willReturn",420],"(",["T_NS_SEPARATOR","\\",420],["T_STRING","Magento",420],["T_NS_SEPARATOR","\\",420],["T_STRING","Payment",420],["T_NS_SEPARATOR","\\",420],["T_STRING","Model",420],["T_NS_SEPARATOR","\\",420],["T_STRING","Method",420],["T_NS_SEPARATOR","\\",420],["T_STRING","AbstractMethod",420],["T_DOUBLE_COLON","::",420],["T_STRING","ACTION_AUTHORIZE",420],")",";",["T_WHITESPACE","\n        ",420],["T_VARIABLE","$this",421],["T_OBJECT_OPERATOR","->",421],["T_STRING","paymentMethodMock",421],["T_OBJECT_OPERATOR","->",421],["T_STRING","expects",421],"(",["T_VARIABLE","$this",421],["T_OBJECT_OPERATOR","->",421],["T_STRING","any",421],"(",")",")",["T_WHITESPACE","\n            ",421],["T_OBJECT_OPERATOR","->",422],["T_STRING","method",422],"(",["T_CONSTANT_ENCAPSED_STRING","'getConfigData'",422],")",["T_WHITESPACE","\n            ",422],["T_OBJECT_OPERATOR","->",423],["T_STRING","withConsecutive",423],"(",["T_WHITESPACE","\n                ",423],"[",["T_CONSTANT_ENCAPSED_STRING","'order_status'",424],"]",",",["T_WHITESPACE","\n                ",424],"[",["T_CONSTANT_ENCAPSED_STRING","'payment_action'",425],"]",["T_WHITESPACE","\n            ",425],")",["T_OBJECT_OPERATOR","->",426],["T_STRING","willReturn",426],"(",["T_VARIABLE","$newOrderStatus",426],")",";",["T_WHITESPACE","\n        ",426],["T_VARIABLE","$this",427],["T_OBJECT_OPERATOR","->",427],["T_STRING","paymentMethodMock",427],["T_OBJECT_OPERATOR","->",427],["T_STRING","expects",427],"(",["T_VARIABLE","$this",427],["T_OBJECT_OPERATOR","->",427],["T_STRING","once",427],"(",")",")",["T_OBJECT_OPERATOR","->",427],["T_STRING","method",427],"(",["T_CONSTANT_ENCAPSED_STRING","'isInitializeNeeded'",427],")",["T_OBJECT_OPERATOR","->",427],["T_STRING","willReturn",427],"(",["T_STRING","true",427],")",";",["T_WHITESPACE","\n        ",427],["T_VARIABLE","$this",428],["T_OBJECT_OPERATOR","->",428],["T_STRING","paymentMethodMock",428],["T_OBJECT_OPERATOR","->",428],["T_STRING","expects",428],"(",["T_VARIABLE","$this",428],["T_OBJECT_OPERATOR","->",428],["T_STRING","once",428],"(",")",")",["T_OBJECT_OPERATOR","->",428],["T_STRING","method",428],"(",["T_CONSTANT_ENCAPSED_STRING","'initialize'",428],")",";",["T_WHITESPACE","\n        ",428],["T_VARIABLE","$this",429],["T_OBJECT_OPERATOR","->",429],["T_STRING","mockGetDefaultStatus",429],"(",["T_STRING","Order",429],["T_DOUBLE_COLON","::",429],["T_STRING","STATE_NEW",429],",",["T_WHITESPACE"," ",429],["T_VARIABLE","$newOrderStatus",429],",",["T_WHITESPACE"," ",429],"[",["T_CONSTANT_ENCAPSED_STRING","'first'",429],",",["T_WHITESPACE"," ",429],["T_CONSTANT_ENCAPSED_STRING","'second'",429],"]",")",";",["T_WHITESPACE","\n        ",429],["T_VARIABLE","$this",430],["T_OBJECT_OPERATOR","->",430],["T_STRING","orderMock",430],["T_OBJECT_OPERATOR","->",430],["T_STRING","expects",430],"(",["T_VARIABLE","$this",430],["T_OBJECT_OPERATOR","->",430],["T_STRING","any",430],"(",")",")",["T_WHITESPACE","\n            ",430],["T_OBJECT_OPERATOR","->",431],["T_STRING","method",431],"(",["T_CONSTANT_ENCAPSED_STRING","'setState'",431],")",["T_WHITESPACE","\n            ",431],["T_OBJECT_OPERATOR","->",432],["T_STRING","with",432],"(",["T_STRING","Order",432],["T_DOUBLE_COLON","::",432],["T_STRING","STATE_NEW",432],")",["T_WHITESPACE","\n            ",432],["T_OBJECT_OPERATOR","->",433],["T_STRING","willReturnSelf",433],"(",")",";",["T_WHITESPACE","\n        ",433],["T_VARIABLE","$this",434],["T_OBJECT_OPERATOR","->",434],["T_STRING","orderMock",434],["T_OBJECT_OPERATOR","->",434],["T_STRING","expects",434],"(",["T_VARIABLE","$this",434],["T_OBJECT_OPERATOR","->",434],["T_STRING","any",434],"(",")",")",["T_WHITESPACE","\n            ",434],["T_OBJECT_OPERATOR","->",435],["T_STRING","method",435],"(",["T_CONSTANT_ENCAPSED_STRING","'setStatus'",435],")",["T_WHITESPACE","\n            ",435],["T_OBJECT_OPERATOR","->",436],["T_STRING","with",436],"(",["T_VARIABLE","$newOrderStatus",436],")",["T_WHITESPACE","\n            ",436],["T_OBJECT_OPERATOR","->",437],["T_STRING","willReturnSelf",437],"(",")",";",["T_WHITESPACE","\n        ",437],["T_VARIABLE","$this",438],["T_OBJECT_OPERATOR","->",438],["T_STRING","mockPlaceEvents",438],"(",")",";",["T_WHITESPACE","\n        ",438],["T_VARIABLE","$statusHistory",439],["T_WHITESPACE"," ",439],"=",["T_WHITESPACE"," ",439],["T_VARIABLE","$this",439],["T_OBJECT_OPERATOR","->",439],["T_STRING","getMockForAbstractClass",439],"(",["T_WHITESPACE","\n            ",439],["T_NS_SEPARATOR","\\",440],["T_STRING","Magento",440],["T_NS_SEPARATOR","\\",440],["T_STRING","Sales",440],["T_NS_SEPARATOR","\\",440],["T_STRING","Api",440],["T_NS_SEPARATOR","\\",440],["T_STRING","Data",440],["T_NS_SEPARATOR","\\",440],["T_STRING","OrderStatusHistoryInterface",440],["T_DOUBLE_COLON","::",440],["T_CLASS","class",440],["T_WHITESPACE","\n        ",440],")",";",["T_WHITESPACE","\n        ",441],["T_VARIABLE","$this",442],["T_OBJECT_OPERATOR","->",442],["T_STRING","orderMock",442],["T_OBJECT_OPERATOR","->",442],["T_STRING","expects",442],"(",["T_VARIABLE","$this",442],["T_OBJECT_OPERATOR","->",442],["T_STRING","any",442],"(",")",")",["T_OBJECT_OPERATOR","->",442],["T_STRING","method",442],"(",["T_CONSTANT_ENCAPSED_STRING","'getCustomerNote'",442],")",["T_OBJECT_OPERATOR","->",442],["T_STRING","willReturn",442],"(",["T_VARIABLE","$customerNote",442],")",";",["T_WHITESPACE","\n        ",442],["T_VARIABLE","$this",443],["T_OBJECT_OPERATOR","->",443],["T_STRING","orderMock",443],["T_OBJECT_OPERATOR","->",443],["T_STRING","expects",443],"(",["T_VARIABLE","$this",443],["T_OBJECT_OPERATOR","->",443],["T_STRING","any",443],"(",")",")",["T_WHITESPACE","\n            ",443],["T_OBJECT_OPERATOR","->",444],["T_STRING","method",444],"(",["T_CONSTANT_ENCAPSED_STRING","'addStatusHistoryComment'",444],")",["T_WHITESPACE","\n            ",444],["T_OBJECT_OPERATOR","->",445],["T_STRING","withConsecutive",445],"(",["T_WHITESPACE","\n                ",445],"[",["T_VARIABLE","$customerNote",446],"]",",",["T_WHITESPACE","\n                ",446],"[",["T_STRING","__",447],"(",["T_CONSTANT_ENCAPSED_STRING","'Authorized amount of %1'",447],",",["T_WHITESPACE"," ",447],["T_VARIABLE","$sum",447],")","]",["T_WHITESPACE","\n            ",447],")",["T_WHITESPACE","\n            ",448],["T_OBJECT_OPERATOR","->",449],["T_STRING","willReturn",449],"(",["T_VARIABLE","$statusHistory",449],")",";",["T_WHITESPACE","\n        ",449],["T_VARIABLE","$this",450],["T_OBJECT_OPERATOR","->",450],["T_STRING","orderMock",450],["T_OBJECT_OPERATOR","->",450],["T_STRING","expects",450],"(",["T_VARIABLE","$this",450],["T_OBJECT_OPERATOR","->",450],["T_STRING","any",450],"(",")",")",["T_WHITESPACE","\n            ",450],["T_OBJECT_OPERATOR","->",451],["T_STRING","method",451],"(",["T_CONSTANT_ENCAPSED_STRING","'setIsCustomerNotified'",451],")",["T_WHITESPACE","\n            ",451],["T_OBJECT_OPERATOR","->",452],["T_STRING","with",452],"(",["T_STRING","true",452],")",["T_WHITESPACE","\n            ",452],["T_OBJECT_OPERATOR","->",453],["T_STRING","willReturn",453],"(",["T_VARIABLE","$statusHistory",453],")",";",["T_WHITESPACE","\n        ",453],["T_VARIABLE","$this",454],["T_OBJECT_OPERATOR","->",454],["T_STRING","assertEquals",454],"(",["T_VARIABLE","$this",454],["T_OBJECT_OPERATOR","->",454],["T_STRING","payment",454],",",["T_WHITESPACE"," ",454],["T_VARIABLE","$this",454],["T_OBJECT_OPERATOR","->",454],["T_STRING","payment",454],["T_OBJECT_OPERATOR","->",454],["T_STRING","place",454],"(",")",")",";",["T_WHITESPACE","\n    ",454],"}",["T_WHITESPACE","\n\n    ",455],["T_PUBLIC","public",457],["T_WHITESPACE"," ",457],["T_FUNCTION","function",457],["T_WHITESPACE"," ",457],["T_STRING","testPlaceActionAuthorizeFraud",457],"(",")",["T_WHITESPACE","\n    ",457],"{",["T_WHITESPACE","\n        ",458],["T_VARIABLE","$newOrderStatus",459],["T_WHITESPACE"," ",459],"=",["T_WHITESPACE"," ",459],["T_CONSTANT_ENCAPSED_STRING","'new_status'",459],";",["T_WHITESPACE","\n        ",459],["T_VARIABLE","$customerNote",460],["T_WHITESPACE"," ",460],"=",["T_WHITESPACE"," ",460],["T_CONSTANT_ENCAPSED_STRING","'blabla'",460],";",["T_WHITESPACE","\n        ",460],["T_VARIABLE","$sum",461],["T_WHITESPACE"," ",461],"=",["T_WHITESPACE"," ",461],["T_LNUMBER","10",461],";",["T_WHITESPACE","\n        ",461],["T_VARIABLE","$this",462],["T_OBJECT_OPERATOR","->",462],["T_STRING","orderMock",462],["T_OBJECT_OPERATOR","->",462],["T_STRING","expects",462],"(",["T_VARIABLE","$this",462],["T_OBJECT_OPERATOR","->",462],["T_STRING","any",462],"(",")",")",["T_OBJECT_OPERATOR","->",462],["T_STRING","method",462],"(",["T_CONSTANT_ENCAPSED_STRING","'getTotalDue'",462],")",["T_OBJECT_OPERATOR","->",462],["T_STRING","willReturn",462],"(",["T_VARIABLE","$sum",462],")",";",["T_WHITESPACE","\n        ",462],["T_VARIABLE","$this",463],["T_OBJECT_OPERATOR","->",463],["T_STRING","orderMock",463],["T_OBJECT_OPERATOR","->",463],["T_STRING","expects",463],"(",["T_VARIABLE","$this",463],["T_OBJECT_OPERATOR","->",463],["T_STRING","any",463],"(",")",")",["T_OBJECT_OPERATOR","->",463],["T_STRING","method",463],"(",["T_CONSTANT_ENCAPSED_STRING","'getBaseTotalDue'",463],")",["T_OBJECT_OPERATOR","->",463],["T_STRING","willReturn",463],"(",["T_VARIABLE","$sum",463],")",";",["T_WHITESPACE","\n        ",463],["T_VARIABLE","$this",464],["T_OBJECT_OPERATOR","->",464],["T_STRING","helperMock",464],["T_OBJECT_OPERATOR","->",464],["T_STRING","expects",464],"(",["T_VARIABLE","$this",464],["T_OBJECT_OPERATOR","->",464],["T_STRING","once",464],"(",")",")",["T_WHITESPACE","\n            ",464],["T_OBJECT_OPERATOR","->",465],["T_STRING","method",465],"(",["T_CONSTANT_ENCAPSED_STRING","'getMethodInstance'",465],")",["T_WHITESPACE","\n            ",465],["T_OBJECT_OPERATOR","->",466],["T_STRING","will",466],"(",["T_VARIABLE","$this",466],["T_OBJECT_OPERATOR","->",466],["T_STRING","returnValue",466],"(",["T_VARIABLE","$this",466],["T_OBJECT_OPERATOR","->",466],["T_STRING","paymentMethodMock",466],")",")",";",["T_WHITESPACE","\n        ",466],["T_VARIABLE","$this",467],["T_OBJECT_OPERATOR","->",467],["T_STRING","payment",467],["T_OBJECT_OPERATOR","->",467],["T_STRING","setTransactionId",467],"(",["T_VARIABLE","$this",467],["T_OBJECT_OPERATOR","->",467],["T_STRING","transactionId",467],")",";",["T_WHITESPACE","\n        ",467],["T_VARIABLE","$this",468],["T_OBJECT_OPERATOR","->",468],["T_STRING","paymentMethodMock",468],["T_OBJECT_OPERATOR","->",468],["T_STRING","expects",468],"(",["T_VARIABLE","$this",468],["T_OBJECT_OPERATOR","->",468],["T_STRING","once",468],"(",")",")",["T_WHITESPACE","\n            ",468],["T_OBJECT_OPERATOR","->",469],["T_STRING","method",469],"(",["T_CONSTANT_ENCAPSED_STRING","'getConfigPaymentAction'",469],")",["T_WHITESPACE","\n            ",469],["T_OBJECT_OPERATOR","->",470],["T_STRING","willReturn",470],"(",["T_NS_SEPARATOR","\\",470],["T_STRING","Magento",470],["T_NS_SEPARATOR","\\",470],["T_STRING","Payment",470],["T_NS_SEPARATOR","\\",470],["T_STRING","Model",470],["T_NS_SEPARATOR","\\",470],["T_STRING","Method",470],["T_NS_SEPARATOR","\\",470],["T_STRING","AbstractMethod",470],["T_DOUBLE_COLON","::",470],["T_STRING","ACTION_AUTHORIZE",470],")",";",["T_WHITESPACE","\n        ",470],["T_VARIABLE","$this",471],["T_OBJECT_OPERATOR","->",471],["T_STRING","paymentMethodMock",471],["T_OBJECT_OPERATOR","->",471],["T_STRING","expects",471],"(",["T_VARIABLE","$this",471],["T_OBJECT_OPERATOR","->",471],["T_STRING","any",471],"(",")",")",["T_WHITESPACE","\n            ",471],["T_OBJECT_OPERATOR","->",472],["T_STRING","method",472],"(",["T_CONSTANT_ENCAPSED_STRING","'getConfigData'",472],")",["T_WHITESPACE","\n            ",472],["T_OBJECT_OPERATOR","->",473],["T_STRING","with",473],"(",["T_CONSTANT_ENCAPSED_STRING","'order_status'",473],",",["T_WHITESPACE"," ",473],["T_STRING","null",473],")",["T_WHITESPACE","\n            ",473],["T_OBJECT_OPERATOR","->",474],["T_STRING","willReturn",474],"(",["T_VARIABLE","$newOrderStatus",474],")",";",["T_WHITESPACE","\n        ",474],["T_VARIABLE","$statusHistory",475],["T_WHITESPACE"," ",475],"=",["T_WHITESPACE"," ",475],["T_VARIABLE","$this",475],["T_OBJECT_OPERATOR","->",475],["T_STRING","getMockForAbstractClass",475],"(",["T_WHITESPACE","\n            ",475],["T_NS_SEPARATOR","\\",476],["T_STRING","Magento",476],["T_NS_SEPARATOR","\\",476],["T_STRING","Sales",476],["T_NS_SEPARATOR","\\",476],["T_STRING","Api",476],["T_NS_SEPARATOR","\\",476],["T_STRING","Data",476],["T_NS_SEPARATOR","\\",476],["T_STRING","OrderStatusHistoryInterface",476],["T_DOUBLE_COLON","::",476],["T_CLASS","class",476],["T_WHITESPACE","\n        ",476],")",";",["T_WHITESPACE","\n        ",477],["T_VARIABLE","$this",478],["T_OBJECT_OPERATOR","->",478],["T_STRING","orderMock",478],["T_OBJECT_OPERATOR","->",478],["T_STRING","expects",478],"(",["T_VARIABLE","$this",478],["T_OBJECT_OPERATOR","->",478],["T_STRING","any",478],"(",")",")",["T_OBJECT_OPERATOR","->",478],["T_STRING","method",478],"(",["T_CONSTANT_ENCAPSED_STRING","'getCustomerNote'",478],")",["T_OBJECT_OPERATOR","->",478],["T_STRING","willReturn",478],"(",["T_VARIABLE","$customerNote",478],")",";",["T_WHITESPACE","\n        ",478],["T_VARIABLE","$this",479],["T_OBJECT_OPERATOR","->",479],["T_STRING","orderMock",479],["T_OBJECT_OPERATOR","->",479],["T_STRING","expects",479],"(",["T_VARIABLE","$this",479],["T_OBJECT_OPERATOR","->",479],["T_STRING","any",479],"(",")",")",["T_WHITESPACE","\n            ",479],["T_OBJECT_OPERATOR","->",480],["T_STRING","method",480],"(",["T_CONSTANT_ENCAPSED_STRING","'addStatusHistoryComment'",480],")",["T_WHITESPACE","\n            ",480],["T_OBJECT_OPERATOR","->",481],["T_STRING","with",481],"(",["T_VARIABLE","$customerNote",481],")",["T_WHITESPACE","\n            ",481],["T_OBJECT_OPERATOR","->",482],["T_STRING","willReturn",482],"(",["T_VARIABLE","$statusHistory",482],")",";",["T_WHITESPACE","\n        ",482],["T_VARIABLE","$this",483],["T_OBJECT_OPERATOR","->",483],["T_STRING","mockGetDefaultStatus",483],"(",["T_STRING","Order",483],["T_DOUBLE_COLON","::",483],["T_STRING","STATE_PROCESSING",483],",",["T_WHITESPACE"," ",483],["T_STRING","Order",483],["T_DOUBLE_COLON","::",483],["T_STRING","STATUS_FRAUD",483],",",["T_WHITESPACE"," ",483],"[",["T_CONSTANT_ENCAPSED_STRING","'first'",483],",",["T_WHITESPACE"," ",483],["T_CONSTANT_ENCAPSED_STRING","'second'",483],"]",")",";",["T_WHITESPACE","\n        ",483],["T_VARIABLE","$this",484],["T_OBJECT_OPERATOR","->",484],["T_STRING","orderMock",484],["T_OBJECT_OPERATOR","->",484],["T_STRING","expects",484],"(",["T_VARIABLE","$this",484],["T_OBJECT_OPERATOR","->",484],["T_STRING","any",484],"(",")",")",["T_WHITESPACE","\n            ",484],["T_OBJECT_OPERATOR","->",485],["T_STRING","method",485],"(",["T_CONSTANT_ENCAPSED_STRING","'setState'",485],")",["T_WHITESPACE","\n            ",485],["T_OBJECT_OPERATOR","->",486],["T_STRING","with",486],"(",["T_STRING","Order",486],["T_DOUBLE_COLON","::",486],["T_STRING","STATE_PROCESSING",486],")",["T_WHITESPACE","\n            ",486],["T_OBJECT_OPERATOR","->",487],["T_STRING","willReturnSelf",487],"(",")",";",["T_WHITESPACE","\n        ",487],["T_VARIABLE","$this",488],["T_OBJECT_OPERATOR","->",488],["T_STRING","orderMock",488],["T_OBJECT_OPERATOR","->",488],["T_STRING","expects",488],"(",["T_VARIABLE","$this",488],["T_OBJECT_OPERATOR","->",488],["T_STRING","any",488],"(",")",")",["T_WHITESPACE","\n            ",488],["T_OBJECT_OPERATOR","->",489],["T_STRING","method",489],"(",["T_CONSTANT_ENCAPSED_STRING","'setStatus'",489],")",["T_WHITESPACE","\n            ",489],["T_OBJECT_OPERATOR","->",490],["T_STRING","withConsecutive",490],"(",["T_WHITESPACE","\n                ",490],"[",["T_STRING","Order",491],["T_DOUBLE_COLON","::",491],["T_STRING","STATUS_FRAUD",491],"]",["T_WHITESPACE","\n            ",491],")",["T_OBJECT_OPERATOR","->",492],["T_STRING","willReturnSelf",492],"(",")",";",["T_WHITESPACE","\n        ",492],["T_VARIABLE","$this",493],["T_OBJECT_OPERATOR","->",493],["T_STRING","orderMock",493],["T_OBJECT_OPERATOR","->",493],["T_STRING","expects",493],"(",["T_VARIABLE","$this",493],["T_OBJECT_OPERATOR","->",493],["T_STRING","atLeastOnce",493],"(",")",")",["T_WHITESPACE","\n            ",493],["T_OBJECT_OPERATOR","->",494],["T_STRING","method",494],"(",["T_CONSTANT_ENCAPSED_STRING","'getStatus'",494],")",["T_WHITESPACE","\n            ",494],["T_OBJECT_OPERATOR","->",495],["T_STRING","willReturn",495],"(",["T_STRING","Order",495],["T_DOUBLE_COLON","::",495],["T_STRING","STATUS_FRAUD",495],")",";",["T_WHITESPACE","\n        ",495],["T_VARIABLE","$this",496],["T_OBJECT_OPERATOR","->",496],["T_STRING","paymentMethodMock",496],["T_OBJECT_OPERATOR","->",496],["T_STRING","expects",496],"(",["T_VARIABLE","$this",496],["T_OBJECT_OPERATOR","->",496],["T_STRING","once",496],"(",")",")",["T_WHITESPACE","\n            ",496],["T_OBJECT_OPERATOR","->",497],["T_STRING","method",497],"(",["T_CONSTANT_ENCAPSED_STRING","'getConfigPaymentAction'",497],")",["T_WHITESPACE","\n            ",497],["T_OBJECT_OPERATOR","->",498],["T_STRING","willReturn",498],"(",["T_STRING","null",498],")",";",["T_WHITESPACE","\n        ",498],["T_VARIABLE","$this",499],["T_OBJECT_OPERATOR","->",499],["T_STRING","assertEquals",499],"(",["T_VARIABLE","$this",499],["T_OBJECT_OPERATOR","->",499],["T_STRING","payment",499],",",["T_WHITESPACE"," ",499],["T_VARIABLE","$this",499],["T_OBJECT_OPERATOR","->",499],["T_STRING","payment",499],["T_OBJECT_OPERATOR","->",499],["T_STRING","place",499],"(",")",")",";",["T_WHITESPACE","\n        ",499],["T_COMMENT","\/\/maybe we don't need write authorised sum when fraud was detected\n",500],["T_WHITESPACE","        ",501],["T_VARIABLE","$this",501],["T_OBJECT_OPERATOR","->",501],["T_STRING","assertEquals",501],"(",["T_VARIABLE","$sum",501],",",["T_WHITESPACE"," ",501],["T_VARIABLE","$this",501],["T_OBJECT_OPERATOR","->",501],["T_STRING","payment",501],["T_OBJECT_OPERATOR","->",501],["T_STRING","getAmountAuthorized",501],"(",")",")",";",["T_WHITESPACE","\n    ",501],"}",["T_WHITESPACE","\n\n    ",502],["T_PUBLIC","public",504],["T_WHITESPACE"," ",504],["T_FUNCTION","function",504],["T_WHITESPACE"," ",504],["T_STRING","testPlaceActionAuthorizeCapture",504],"(",")",["T_WHITESPACE","\n    ",504],"{",["T_WHITESPACE","\n        ",505],["T_VARIABLE","$newOrderStatus",506],["T_WHITESPACE"," ",506],"=",["T_WHITESPACE"," ",506],["T_CONSTANT_ENCAPSED_STRING","'new_status'",506],";",["T_WHITESPACE","\n        ",506],["T_VARIABLE","$customerNote",507],["T_WHITESPACE"," ",507],"=",["T_WHITESPACE"," ",507],["T_CONSTANT_ENCAPSED_STRING","'blabla'",507],";",["T_WHITESPACE","\n        ",507],["T_VARIABLE","$sum",508],["T_WHITESPACE"," ",508],"=",["T_WHITESPACE"," ",508],["T_LNUMBER","10",508],";",["T_WHITESPACE","\n        ",508],["T_VARIABLE","$this",509],["T_OBJECT_OPERATOR","->",509],["T_STRING","orderMock",509],["T_OBJECT_OPERATOR","->",509],["T_STRING","expects",509],"(",["T_VARIABLE","$this",509],["T_OBJECT_OPERATOR","->",509],["T_STRING","any",509],"(",")",")",["T_OBJECT_OPERATOR","->",509],["T_STRING","method",509],"(",["T_CONSTANT_ENCAPSED_STRING","'getTotalDue'",509],")",["T_OBJECT_OPERATOR","->",509],["T_STRING","willReturn",509],"(",["T_VARIABLE","$sum",509],")",";",["T_WHITESPACE","\n        ",509],["T_VARIABLE","$this",510],["T_OBJECT_OPERATOR","->",510],["T_STRING","orderMock",510],["T_OBJECT_OPERATOR","->",510],["T_STRING","expects",510],"(",["T_VARIABLE","$this",510],["T_OBJECT_OPERATOR","->",510],["T_STRING","any",510],"(",")",")",["T_OBJECT_OPERATOR","->",510],["T_STRING","method",510],"(",["T_CONSTANT_ENCAPSED_STRING","'getBaseTotalDue'",510],")",["T_OBJECT_OPERATOR","->",510],["T_STRING","willReturn",510],"(",["T_VARIABLE","$sum",510],")",";",["T_WHITESPACE","\n        ",510],["T_VARIABLE","$this",511],["T_OBJECT_OPERATOR","->",511],["T_STRING","helperMock",511],["T_OBJECT_OPERATOR","->",511],["T_STRING","expects",511],"(",["T_VARIABLE","$this",511],["T_OBJECT_OPERATOR","->",511],["T_STRING","once",511],"(",")",")",["T_WHITESPACE","\n            ",511],["T_OBJECT_OPERATOR","->",512],["T_STRING","method",512],"(",["T_CONSTANT_ENCAPSED_STRING","'getMethodInstance'",512],")",["T_WHITESPACE","\n            ",512],["T_OBJECT_OPERATOR","->",513],["T_STRING","will",513],"(",["T_VARIABLE","$this",513],["T_OBJECT_OPERATOR","->",513],["T_STRING","returnValue",513],"(",["T_VARIABLE","$this",513],["T_OBJECT_OPERATOR","->",513],["T_STRING","paymentMethodMock",513],")",")",";",["T_WHITESPACE","\n        ",513],["T_VARIABLE","$this",514],["T_OBJECT_OPERATOR","->",514],["T_STRING","paymentMethodMock",514],["T_OBJECT_OPERATOR","->",514],["T_STRING","expects",514],"(",["T_VARIABLE","$this",514],["T_OBJECT_OPERATOR","->",514],["T_STRING","once",514],"(",")",")",["T_WHITESPACE","\n            ",514],["T_OBJECT_OPERATOR","->",515],["T_STRING","method",515],"(",["T_CONSTANT_ENCAPSED_STRING","'getConfigPaymentAction'",515],")",["T_WHITESPACE","\n            ",515],["T_OBJECT_OPERATOR","->",516],["T_STRING","willReturn",516],"(",["T_NS_SEPARATOR","\\",516],["T_STRING","Magento",516],["T_NS_SEPARATOR","\\",516],["T_STRING","Payment",516],["T_NS_SEPARATOR","\\",516],["T_STRING","Model",516],["T_NS_SEPARATOR","\\",516],["T_STRING","Method",516],["T_NS_SEPARATOR","\\",516],["T_STRING","AbstractMethod",516],["T_DOUBLE_COLON","::",516],["T_STRING","ACTION_AUTHORIZE_CAPTURE",516],")",";",["T_WHITESPACE","\n        ",516],["T_VARIABLE","$this",517],["T_OBJECT_OPERATOR","->",517],["T_STRING","paymentMethodMock",517],["T_OBJECT_OPERATOR","->",517],["T_STRING","expects",517],"(",["T_VARIABLE","$this",517],["T_OBJECT_OPERATOR","->",517],["T_STRING","any",517],"(",")",")",["T_WHITESPACE","\n            ",517],["T_OBJECT_OPERATOR","->",518],["T_STRING","method",518],"(",["T_CONSTANT_ENCAPSED_STRING","'getConfigData'",518],")",["T_WHITESPACE","\n            ",518],["T_OBJECT_OPERATOR","->",519],["T_STRING","with",519],"(",["T_CONSTANT_ENCAPSED_STRING","'order_status'",519],",",["T_WHITESPACE"," ",519],["T_STRING","null",519],")",["T_WHITESPACE","\n            ",519],["T_OBJECT_OPERATOR","->",520],["T_STRING","willReturn",520],"(",["T_VARIABLE","$newOrderStatus",520],")",";",["T_WHITESPACE","\n        ",520],["T_VARIABLE","$statusHistory",521],["T_WHITESPACE"," ",521],"=",["T_WHITESPACE"," ",521],["T_VARIABLE","$this",521],["T_OBJECT_OPERATOR","->",521],["T_STRING","getMockForAbstractClass",521],"(",["T_WHITESPACE","\n            ",521],["T_NS_SEPARATOR","\\",522],["T_STRING","Magento",522],["T_NS_SEPARATOR","\\",522],["T_STRING","Sales",522],["T_NS_SEPARATOR","\\",522],["T_STRING","Api",522],["T_NS_SEPARATOR","\\",522],["T_STRING","Data",522],["T_NS_SEPARATOR","\\",522],["T_STRING","OrderStatusHistoryInterface",522],["T_DOUBLE_COLON","::",522],["T_CLASS","class",522],["T_WHITESPACE","\n        ",522],")",";",["T_WHITESPACE","\n        ",523],["T_VARIABLE","$this",524],["T_OBJECT_OPERATOR","->",524],["T_STRING","orderMock",524],["T_OBJECT_OPERATOR","->",524],["T_STRING","expects",524],"(",["T_VARIABLE","$this",524],["T_OBJECT_OPERATOR","->",524],["T_STRING","any",524],"(",")",")",["T_OBJECT_OPERATOR","->",524],["T_STRING","method",524],"(",["T_CONSTANT_ENCAPSED_STRING","'getCustomerNote'",524],")",["T_OBJECT_OPERATOR","->",524],["T_STRING","willReturn",524],"(",["T_VARIABLE","$customerNote",524],")",";",["T_WHITESPACE","\n        ",524],["T_VARIABLE","$this",525],["T_OBJECT_OPERATOR","->",525],["T_STRING","orderMock",525],["T_OBJECT_OPERATOR","->",525],["T_STRING","expects",525],"(",["T_VARIABLE","$this",525],["T_OBJECT_OPERATOR","->",525],["T_STRING","any",525],"(",")",")",["T_WHITESPACE","\n            ",525],["T_OBJECT_OPERATOR","->",526],["T_STRING","method",526],"(",["T_CONSTANT_ENCAPSED_STRING","'addStatusHistoryComment'",526],")",["T_WHITESPACE","\n            ",526],["T_OBJECT_OPERATOR","->",527],["T_STRING","with",527],"(",["T_VARIABLE","$customerNote",527],")",["T_WHITESPACE","\n            ",527],["T_OBJECT_OPERATOR","->",528],["T_STRING","willReturn",528],"(",["T_VARIABLE","$statusHistory",528],")",";",["T_WHITESPACE","\n        ",528],["T_VARIABLE","$this",529],["T_OBJECT_OPERATOR","->",529],["T_STRING","mockGetDefaultStatus",529],"(",["T_STRING","Order",529],["T_DOUBLE_COLON","::",529],["T_STRING","STATE_PROCESSING",529],",",["T_WHITESPACE"," ",529],["T_VARIABLE","$newOrderStatus",529],",",["T_WHITESPACE"," ",529],"[",["T_CONSTANT_ENCAPSED_STRING","'first'",529],",",["T_WHITESPACE"," ",529],["T_CONSTANT_ENCAPSED_STRING","'second'",529],"]",")",";",["T_WHITESPACE","\n        ",529],["T_VARIABLE","$this",530],["T_OBJECT_OPERATOR","->",530],["T_STRING","orderMock",530],["T_OBJECT_OPERATOR","->",530],["T_STRING","expects",530],"(",["T_VARIABLE","$this",530],["T_OBJECT_OPERATOR","->",530],["T_STRING","any",530],"(",")",")",["T_WHITESPACE","\n            ",530],["T_OBJECT_OPERATOR","->",531],["T_STRING","method",531],"(",["T_CONSTANT_ENCAPSED_STRING","'setState'",531],")",["T_WHITESPACE","\n            ",531],["T_OBJECT_OPERATOR","->",532],["T_STRING","with",532],"(",["T_STRING","Order",532],["T_DOUBLE_COLON","::",532],["T_STRING","STATE_PROCESSING",532],")",["T_WHITESPACE","\n            ",532],["T_OBJECT_OPERATOR","->",533],["T_STRING","willReturnSelf",533],"(",")",";",["T_WHITESPACE","\n        ",533],["T_VARIABLE","$this",534],["T_OBJECT_OPERATOR","->",534],["T_STRING","orderMock",534],["T_OBJECT_OPERATOR","->",534],["T_STRING","expects",534],"(",["T_VARIABLE","$this",534],["T_OBJECT_OPERATOR","->",534],["T_STRING","any",534],"(",")",")",["T_WHITESPACE","\n            ",534],["T_OBJECT_OPERATOR","->",535],["T_STRING","method",535],"(",["T_CONSTANT_ENCAPSED_STRING","'setStatus'",535],")",["T_WHITESPACE","\n            ",535],["T_OBJECT_OPERATOR","->",536],["T_STRING","with",536],"(",["T_VARIABLE","$newOrderStatus",536],")",["T_WHITESPACE","\n            ",536],["T_OBJECT_OPERATOR","->",537],["T_STRING","willReturnSelf",537],"(",")",";",["T_WHITESPACE","\n        ",537],["T_VARIABLE","$this",538],["T_OBJECT_OPERATOR","->",538],["T_STRING","paymentMethodMock",538],["T_OBJECT_OPERATOR","->",538],["T_STRING","expects",538],"(",["T_VARIABLE","$this",538],["T_OBJECT_OPERATOR","->",538],["T_STRING","once",538],"(",")",")",["T_WHITESPACE","\n            ",538],["T_OBJECT_OPERATOR","->",539],["T_STRING","method",539],"(",["T_CONSTANT_ENCAPSED_STRING","'getConfigPaymentAction'",539],")",["T_WHITESPACE","\n            ",539],["T_OBJECT_OPERATOR","->",540],["T_STRING","willReturn",540],"(",["T_STRING","null",540],")",";",["T_WHITESPACE","\n\n        ",540],["T_VARIABLE","$this",542],["T_OBJECT_OPERATOR","->",542],["T_STRING","assertEquals",542],"(",["T_VARIABLE","$this",542],["T_OBJECT_OPERATOR","->",542],["T_STRING","payment",542],",",["T_WHITESPACE"," ",542],["T_VARIABLE","$this",542],["T_OBJECT_OPERATOR","->",542],["T_STRING","payment",542],["T_OBJECT_OPERATOR","->",542],["T_STRING","place",542],"(",")",")",";",["T_WHITESPACE","\n\n        ",542],["T_VARIABLE","$this",544],["T_OBJECT_OPERATOR","->",544],["T_STRING","assertEquals",544],"(",["T_VARIABLE","$sum",544],",",["T_WHITESPACE"," ",544],["T_VARIABLE","$this",544],["T_OBJECT_OPERATOR","->",544],["T_STRING","payment",544],["T_OBJECT_OPERATOR","->",544],["T_STRING","getAmountAuthorized",544],"(",")",")",";",["T_WHITESPACE","\n        ",544],["T_VARIABLE","$this",545],["T_OBJECT_OPERATOR","->",545],["T_STRING","assertEquals",545],"(",["T_VARIABLE","$sum",545],",",["T_WHITESPACE"," ",545],["T_VARIABLE","$this",545],["T_OBJECT_OPERATOR","->",545],["T_STRING","payment",545],["T_OBJECT_OPERATOR","->",545],["T_STRING","getBaseAmountAuthorized",545],"(",")",")",";",["T_WHITESPACE","\n    ",545],"}",["T_WHITESPACE","\n\n    ",546],["T_DOC_COMMENT","\/**\n     * @param bool $isOnline\n     * @param float $amount\n     * @dataProvider authorizeDataProvider\n     *\/",548],["T_WHITESPACE","\n    ",552],["T_PUBLIC","public",553],["T_WHITESPACE"," ",553],["T_FUNCTION","function",553],["T_WHITESPACE"," ",553],["T_STRING","testAuthorize",553],"(",["T_VARIABLE","$isOnline",553],",",["T_WHITESPACE"," ",553],["T_VARIABLE","$amount",553],")",["T_WHITESPACE","\n    ",553],"{",["T_WHITESPACE","\n        ",554],["T_VARIABLE","$this",555],["T_OBJECT_OPERATOR","->",555],["T_STRING","paymentProcessor",555],["T_OBJECT_OPERATOR","->",555],["T_STRING","expects",555],"(",["T_VARIABLE","$this",555],["T_OBJECT_OPERATOR","->",555],["T_STRING","once",555],"(",")",")",["T_WHITESPACE","\n            ",555],["T_OBJECT_OPERATOR","->",556],["T_STRING","method",556],"(",["T_CONSTANT_ENCAPSED_STRING","'authorize'",556],")",["T_WHITESPACE","\n            ",556],["T_OBJECT_OPERATOR","->",557],["T_STRING","with",557],"(",["T_VARIABLE","$this",557],["T_OBJECT_OPERATOR","->",557],["T_STRING","payment",557],",",["T_WHITESPACE"," ",557],["T_VARIABLE","$isOnline",557],",",["T_WHITESPACE"," ",557],["T_VARIABLE","$amount",557],")",["T_WHITESPACE","\n            ",557],["T_OBJECT_OPERATOR","->",558],["T_STRING","willReturn",558],"(",["T_VARIABLE","$this",558],["T_OBJECT_OPERATOR","->",558],["T_STRING","payment",558],")",";",["T_WHITESPACE","\n        ",558],["T_VARIABLE","$this",559],["T_OBJECT_OPERATOR","->",559],["T_STRING","assertEquals",559],"(",["T_VARIABLE","$this",559],["T_OBJECT_OPERATOR","->",559],["T_STRING","payment",559],",",["T_WHITESPACE"," ",559],["T_VARIABLE","$this",559],["T_OBJECT_OPERATOR","->",559],["T_STRING","payment",559],["T_OBJECT_OPERATOR","->",559],["T_STRING","authorize",559],"(",["T_VARIABLE","$isOnline",559],",",["T_WHITESPACE"," ",559],["T_VARIABLE","$amount",559],")",")",";",["T_WHITESPACE","\n    ",559],"}",["T_WHITESPACE","\n\n    ",560],["T_DOC_COMMENT","\/**\n     * Data rpovider for testAuthorize\n     * @return array\n     *\/",562],["T_WHITESPACE","\n    ",565],["T_PUBLIC","public",566],["T_WHITESPACE"," ",566],["T_FUNCTION","function",566],["T_WHITESPACE"," ",566],["T_STRING","authorizeDataProvider",566],"(",")",["T_WHITESPACE","\n    ",566],"{",["T_WHITESPACE","\n        ",567],["T_RETURN","return",568],["T_WHITESPACE"," ",568],"[",["T_WHITESPACE","\n            ",568],"[",["T_STRING","false",569],",",["T_WHITESPACE"," ",569],["T_DNUMBER","9.99",569],"]",",",["T_WHITESPACE","\n            ",569],"[",["T_STRING","true",570],",",["T_WHITESPACE"," ",570],["T_DNUMBER","0.01",570],"]",["T_WHITESPACE","\n        ",570],"]",";",["T_WHITESPACE","\n    ",571],"}",["T_WHITESPACE","\n\n    ",572],["T_PUBLIC","public",574],["T_WHITESPACE"," ",574],["T_FUNCTION","function",574],["T_WHITESPACE"," ",574],["T_STRING","testAcceptApprovePaymentTrue",574],"(",")",["T_WHITESPACE","\n    ",574],"{",["T_WHITESPACE","\n        ",575],["T_VARIABLE","$baseGrandTotal",576],["T_WHITESPACE"," ",576],"=",["T_WHITESPACE"," ",576],["T_DNUMBER","300.00",576],";",["T_WHITESPACE","\n        ",576],["T_VARIABLE","$message",577],["T_WHITESPACE"," ",577],"=",["T_WHITESPACE"," ",577],["T_STRING","sprintf",577],"(",["T_CONSTANT_ENCAPSED_STRING","'Approved the payment online. Transaction ID: \"%s\"'",577],",",["T_WHITESPACE"," ",577],["T_VARIABLE","$this",577],["T_OBJECT_OPERATOR","->",577],["T_STRING","transactionId",577],")",";",["T_WHITESPACE","\n        ",577],["T_VARIABLE","$acceptPayment",578],["T_WHITESPACE"," ",578],"=",["T_WHITESPACE"," ",578],["T_STRING","true",578],";",["T_WHITESPACE","\n\n        ",578],["T_VARIABLE","$this",580],["T_OBJECT_OPERATOR","->",580],["T_STRING","payment",580],["T_OBJECT_OPERATOR","->",580],["T_STRING","setLastTransId",580],"(",["T_VARIABLE","$this",580],["T_OBJECT_OPERATOR","->",580],["T_STRING","transactionId",580],")",";",["T_WHITESPACE","\n\n        ",580],["T_VARIABLE","$this",582],["T_OBJECT_OPERATOR","->",582],["T_STRING","mockInvoice",582],"(",["T_VARIABLE","$this",582],["T_OBJECT_OPERATOR","->",582],["T_STRING","transactionId",582],")",";",["T_WHITESPACE","\n\n        ",582],["T_VARIABLE","$this",584],["T_OBJECT_OPERATOR","->",584],["T_STRING","mockResultTrueMethods",584],"(",["T_VARIABLE","$this",584],["T_OBJECT_OPERATOR","->",584],["T_STRING","transactionId",584],",",["T_WHITESPACE"," ",584],["T_VARIABLE","$baseGrandTotal",584],",",["T_WHITESPACE"," ",584],["T_VARIABLE","$message",584],")",";",["T_WHITESPACE","\n\n        ",584],["T_VARIABLE","$this",586],["T_OBJECT_OPERATOR","->",586],["T_STRING","helperMock",586],["T_OBJECT_OPERATOR","->",586],["T_STRING","expects",586],"(",["T_VARIABLE","$this",586],["T_OBJECT_OPERATOR","->",586],["T_STRING","once",586],"(",")",")",["T_WHITESPACE","\n            ",586],["T_OBJECT_OPERATOR","->",587],["T_STRING","method",587],"(",["T_CONSTANT_ENCAPSED_STRING","'getMethodInstance'",587],")",["T_WHITESPACE","\n            ",587],["T_OBJECT_OPERATOR","->",588],["T_STRING","will",588],"(",["T_VARIABLE","$this",588],["T_OBJECT_OPERATOR","->",588],["T_STRING","returnValue",588],"(",["T_VARIABLE","$this",588],["T_OBJECT_OPERATOR","->",588],["T_STRING","paymentMethodMock",588],")",")",";",["T_WHITESPACE","\n\n        ",588],["T_VARIABLE","$this",590],["T_OBJECT_OPERATOR","->",590],["T_STRING","paymentMethodMock",590],["T_OBJECT_OPERATOR","->",590],["T_STRING","expects",590],"(",["T_VARIABLE","$this",590],["T_OBJECT_OPERATOR","->",590],["T_STRING","once",590],"(",")",")",["T_WHITESPACE","\n            ",590],["T_OBJECT_OPERATOR","->",591],["T_STRING","method",591],"(",["T_CONSTANT_ENCAPSED_STRING","'setStore'",591],")",["T_WHITESPACE","\n            ",591],["T_OBJECT_OPERATOR","->",592],["T_STRING","will",592],"(",["T_VARIABLE","$this",592],["T_OBJECT_OPERATOR","->",592],["T_STRING","returnSelf",592],"(",")",")",";",["T_WHITESPACE","\n\n        ",592],["T_VARIABLE","$this",594],["T_OBJECT_OPERATOR","->",594],["T_STRING","paymentMethodMock",594],["T_OBJECT_OPERATOR","->",594],["T_STRING","expects",594],"(",["T_VARIABLE","$this",594],["T_OBJECT_OPERATOR","->",594],["T_STRING","once",594],"(",")",")",["T_WHITESPACE","\n            ",594],["T_OBJECT_OPERATOR","->",595],["T_STRING","method",595],"(",["T_CONSTANT_ENCAPSED_STRING","'acceptPayment'",595],")",["T_WHITESPACE","\n            ",595],["T_OBJECT_OPERATOR","->",596],["T_STRING","with",596],"(",["T_VARIABLE","$this",596],["T_OBJECT_OPERATOR","->",596],["T_STRING","payment",596],")",["T_WHITESPACE","\n            ",596],["T_OBJECT_OPERATOR","->",597],["T_STRING","willReturn",597],"(",["T_VARIABLE","$acceptPayment",597],")",";",["T_WHITESPACE","\n\n        ",597],["T_VARIABLE","$this",599],["T_OBJECT_OPERATOR","->",599],["T_STRING","payment",599],["T_OBJECT_OPERATOR","->",599],["T_STRING","accept",599],"(",")",";",["T_WHITESPACE","\n        ",599],["T_VARIABLE","$this",600],["T_OBJECT_OPERATOR","->",600],["T_STRING","assertEquals",600],"(",["T_VARIABLE","$baseGrandTotal",600],",",["T_WHITESPACE"," ",600],["T_VARIABLE","$this",600],["T_OBJECT_OPERATOR","->",600],["T_STRING","payment",600],["T_OBJECT_OPERATOR","->",600],["T_STRING","getBaseAmountPaidOnline",600],"(",")",")",";",["T_WHITESPACE","\n    ",600],"}",["T_WHITESPACE","\n\n    ",601],["T_PUBLIC","public",603],["T_WHITESPACE"," ",603],["T_FUNCTION","function",603],["T_WHITESPACE"," ",603],["T_STRING","acceptPaymentFalseProvider",603],"(",")",["T_WHITESPACE","\n    ",603],"{",["T_WHITESPACE","\n        ",604],["T_RETURN","return",605],["T_WHITESPACE"," ",605],"[",["T_WHITESPACE","\n            ",605],["T_CONSTANT_ENCAPSED_STRING","'Fraud = 1'",606],["T_WHITESPACE"," ",606],["T_DOUBLE_ARROW","=>",606],["T_WHITESPACE"," ",606],"[",["T_WHITESPACE","\n                ",606],["T_STRING","true",607],",",["T_WHITESPACE","\n                ",607],["T_STRING","Order",608],["T_DOUBLE_COLON","::",608],["T_STRING","STATUS_FRAUD",608],["T_WHITESPACE","\n            ",608],"]",",",["T_WHITESPACE","\n            ",609],["T_CONSTANT_ENCAPSED_STRING","'Fraud = 0'",610],["T_WHITESPACE"," ",610],["T_DOUBLE_ARROW","=>",610],["T_WHITESPACE"," ",610],"[",["T_WHITESPACE","\n                ",610],["T_STRING","false",611],",",["T_WHITESPACE","\n                ",611],["T_STRING","false",612],["T_WHITESPACE","\n            ",612],"]",",",["T_WHITESPACE","\n        ",613],"]",";",["T_WHITESPACE","\n    ",614],"}",["T_WHITESPACE","\n\n    ",615],["T_DOC_COMMENT","\/**\n     * @dataProvider acceptPaymentFalseProvider\n     * @param bool $isFraudDetected\n     * @param bool $status\n     *\/",617],["T_WHITESPACE","\n    ",621],["T_PUBLIC","public",622],["T_WHITESPACE"," ",622],["T_FUNCTION","function",622],["T_WHITESPACE"," ",622],["T_STRING","testAcceptApprovePaymentFalse",622],"(",["T_VARIABLE","$isFraudDetected",622],",",["T_WHITESPACE"," ",622],["T_VARIABLE","$status",622],")",["T_WHITESPACE","\n    ",622],"{",["T_WHITESPACE","\n        ",623],["T_VARIABLE","$message",624],["T_WHITESPACE"," ",624],"=",["T_WHITESPACE"," ",624],["T_STRING","sprintf",624],"(",["T_CONSTANT_ENCAPSED_STRING","'There is no need to approve this payment. Transaction ID: \"%s\"'",624],",",["T_WHITESPACE"," ",624],["T_VARIABLE","$this",624],["T_OBJECT_OPERATOR","->",624],["T_STRING","transactionId",624],")",";",["T_WHITESPACE","\n        ",624],["T_VARIABLE","$acceptPayment",625],["T_WHITESPACE"," ",625],"=",["T_WHITESPACE"," ",625],["T_STRING","false",625],";",["T_WHITESPACE","\n        ",625],["T_VARIABLE","$orderState",626],["T_WHITESPACE"," ",626],"=",["T_WHITESPACE"," ",626],["T_CONSTANT_ENCAPSED_STRING","'random_state'",626],";",["T_WHITESPACE","\n\n        ",626],["T_VARIABLE","$this",628],["T_OBJECT_OPERATOR","->",628],["T_STRING","payment",628],["T_OBJECT_OPERATOR","->",628],["T_STRING","setLastTransId",628],"(",["T_VARIABLE","$this",628],["T_OBJECT_OPERATOR","->",628],["T_STRING","transactionId",628],")",";",["T_WHITESPACE","\n        ",628],["T_VARIABLE","$this",629],["T_OBJECT_OPERATOR","->",629],["T_STRING","payment",629],["T_OBJECT_OPERATOR","->",629],["T_STRING","setData",629],"(",["T_CONSTANT_ENCAPSED_STRING","'is_fraud_detected'",629],",",["T_WHITESPACE"," ",629],["T_VARIABLE","$isFraudDetected",629],")",";",["T_WHITESPACE","\n\n        ",629],["T_VARIABLE","$this",631],["T_OBJECT_OPERATOR","->",631],["T_STRING","orderMock",631],["T_OBJECT_OPERATOR","->",631],["T_STRING","expects",631],"(",["T_VARIABLE","$this",631],["T_OBJECT_OPERATOR","->",631],["T_STRING","once",631],"(",")",")",["T_WHITESPACE","\n            ",631],["T_OBJECT_OPERATOR","->",632],["T_STRING","method",632],"(",["T_CONSTANT_ENCAPSED_STRING","'getState'",632],")",["T_WHITESPACE","\n            ",632],["T_OBJECT_OPERATOR","->",633],["T_STRING","willReturn",633],"(",["T_VARIABLE","$orderState",633],")",";",["T_WHITESPACE","\n\n        ",633],["T_VARIABLE","$this",635],["T_OBJECT_OPERATOR","->",635],["T_STRING","assertOrderUpdated",635],"(",["T_STRING","Order",635],["T_DOUBLE_COLON","::",635],["T_STRING","STATE_PAYMENT_REVIEW",635],",",["T_WHITESPACE"," ",635],["T_VARIABLE","$status",635],",",["T_WHITESPACE"," ",635],["T_VARIABLE","$message",635],")",";",["T_WHITESPACE","\n\n        ",635],["T_VARIABLE","$this",637],["T_OBJECT_OPERATOR","->",637],["T_STRING","helperMock",637],["T_OBJECT_OPERATOR","->",637],["T_STRING","expects",637],"(",["T_VARIABLE","$this",637],["T_OBJECT_OPERATOR","->",637],["T_STRING","once",637],"(",")",")",["T_WHITESPACE","\n            ",637],["T_OBJECT_OPERATOR","->",638],["T_STRING","method",638],"(",["T_CONSTANT_ENCAPSED_STRING","'getMethodInstance'",638],")",["T_WHITESPACE","\n            ",638],["T_OBJECT_OPERATOR","->",639],["T_STRING","will",639],"(",["T_VARIABLE","$this",639],["T_OBJECT_OPERATOR","->",639],["T_STRING","returnValue",639],"(",["T_VARIABLE","$this",639],["T_OBJECT_OPERATOR","->",639],["T_STRING","paymentMethodMock",639],")",")",";",["T_WHITESPACE","\n\n        ",639],["T_VARIABLE","$this",641],["T_OBJECT_OPERATOR","->",641],["T_STRING","paymentMethodMock",641],["T_OBJECT_OPERATOR","->",641],["T_STRING","expects",641],"(",["T_VARIABLE","$this",641],["T_OBJECT_OPERATOR","->",641],["T_STRING","once",641],"(",")",")",["T_WHITESPACE","\n            ",641],["T_OBJECT_OPERATOR","->",642],["T_STRING","method",642],"(",["T_CONSTANT_ENCAPSED_STRING","'setStore'",642],")",["T_WHITESPACE","\n            ",642],["T_OBJECT_OPERATOR","->",643],["T_STRING","will",643],"(",["T_VARIABLE","$this",643],["T_OBJECT_OPERATOR","->",643],["T_STRING","returnSelf",643],"(",")",")",";",["T_WHITESPACE","\n\n        ",643],["T_VARIABLE","$this",645],["T_OBJECT_OPERATOR","->",645],["T_STRING","paymentMethodMock",645],["T_OBJECT_OPERATOR","->",645],["T_STRING","expects",645],"(",["T_VARIABLE","$this",645],["T_OBJECT_OPERATOR","->",645],["T_STRING","once",645],"(",")",")",["T_WHITESPACE","\n            ",645],["T_OBJECT_OPERATOR","->",646],["T_STRING","method",646],"(",["T_CONSTANT_ENCAPSED_STRING","'acceptPayment'",646],")",["T_WHITESPACE","\n            ",646],["T_OBJECT_OPERATOR","->",647],["T_STRING","with",647],"(",["T_VARIABLE","$this",647],["T_OBJECT_OPERATOR","->",647],["T_STRING","payment",647],")",["T_WHITESPACE","\n            ",647],["T_OBJECT_OPERATOR","->",648],["T_STRING","willReturn",648],"(",["T_VARIABLE","$acceptPayment",648],")",";",["T_WHITESPACE","\n\n        ",648],["T_VARIABLE","$this",650],["T_OBJECT_OPERATOR","->",650],["T_STRING","payment",650],["T_OBJECT_OPERATOR","->",650],["T_STRING","accept",650],"(",")",";",["T_WHITESPACE","\n        ",650],["T_VARIABLE","$this",651],["T_OBJECT_OPERATOR","->",651],["T_STRING","assertEquals",651],"(",["T_VARIABLE","$this",651],["T_OBJECT_OPERATOR","->",651],["T_STRING","transactionId",651],",",["T_WHITESPACE"," ",651],["T_VARIABLE","$this",651],["T_OBJECT_OPERATOR","->",651],["T_STRING","payment",651],["T_OBJECT_OPERATOR","->",651],["T_STRING","getLastTransId",651],"(",")",")",";",["T_WHITESPACE","\n    ",651],"}",["T_WHITESPACE","\n\n    ",652],["T_DOC_COMMENT","\/**\n     *\n     * @dataProvider acceptPaymentFalseProvider\n     * @param bool $isFraudDetected\n     *\/",654],["T_WHITESPACE","\n    ",658],["T_PUBLIC","public",659],["T_WHITESPACE"," ",659],["T_FUNCTION","function",659],["T_WHITESPACE"," ",659],["T_STRING","testAcceptApprovePaymentFalseOrderState",659],"(",["T_VARIABLE","$isFraudDetected",659],")",["T_WHITESPACE","\n    ",659],"{",["T_WHITESPACE","\n        ",660],["T_VARIABLE","$message",661],["T_WHITESPACE"," ",661],"=",["T_WHITESPACE"," ",661],["T_STRING","sprintf",661],"(",["T_CONSTANT_ENCAPSED_STRING","'There is no need to approve this payment. Transaction ID: \"%s\"'",661],",",["T_WHITESPACE"," ",661],["T_VARIABLE","$this",661],["T_OBJECT_OPERATOR","->",661],["T_STRING","transactionId",661],")",";",["T_WHITESPACE","\n        ",661],["T_VARIABLE","$acceptPayment",662],["T_WHITESPACE"," ",662],"=",["T_WHITESPACE"," ",662],["T_STRING","false",662],";",["T_WHITESPACE","\n        ",662],["T_VARIABLE","$orderState",663],["T_WHITESPACE"," ",663],"=",["T_WHITESPACE"," ",663],["T_STRING","Order",663],["T_DOUBLE_COLON","::",663],["T_STRING","STATE_PAYMENT_REVIEW",663],";",["T_WHITESPACE","\n\n        ",663],["T_VARIABLE","$this",665],["T_OBJECT_OPERATOR","->",665],["T_STRING","payment",665],["T_OBJECT_OPERATOR","->",665],["T_STRING","setLastTransId",665],"(",["T_VARIABLE","$this",665],["T_OBJECT_OPERATOR","->",665],["T_STRING","transactionId",665],")",";",["T_WHITESPACE","\n        ",665],["T_VARIABLE","$this",666],["T_OBJECT_OPERATOR","->",666],["T_STRING","payment",666],["T_OBJECT_OPERATOR","->",666],["T_STRING","setData",666],"(",["T_CONSTANT_ENCAPSED_STRING","'is_fraud_detected'",666],",",["T_WHITESPACE"," ",666],["T_VARIABLE","$isFraudDetected",666],")",";",["T_WHITESPACE","\n\n        ",666],["T_VARIABLE","$this",668],["T_OBJECT_OPERATOR","->",668],["T_STRING","orderMock",668],["T_OBJECT_OPERATOR","->",668],["T_STRING","expects",668],"(",["T_VARIABLE","$this",668],["T_OBJECT_OPERATOR","->",668],["T_STRING","once",668],"(",")",")",["T_WHITESPACE","\n            ",668],["T_OBJECT_OPERATOR","->",669],["T_STRING","method",669],"(",["T_CONSTANT_ENCAPSED_STRING","'getState'",669],")",["T_WHITESPACE","\n            ",669],["T_OBJECT_OPERATOR","->",670],["T_STRING","willReturn",670],"(",["T_VARIABLE","$orderState",670],")",";",["T_WHITESPACE","\n\n        ",670],["T_VARIABLE","$this",672],["T_OBJECT_OPERATOR","->",672],["T_STRING","orderMock",672],["T_OBJECT_OPERATOR","->",672],["T_STRING","expects",672],"(",["T_VARIABLE","$this",672],["T_OBJECT_OPERATOR","->",672],["T_STRING","never",672],"(",")",")",["T_WHITESPACE","\n            ",672],["T_OBJECT_OPERATOR","->",673],["T_STRING","method",673],"(",["T_CONSTANT_ENCAPSED_STRING","'setState'",673],")",";",["T_WHITESPACE","\n        ",673],["T_VARIABLE","$this",674],["T_OBJECT_OPERATOR","->",674],["T_STRING","orderMock",674],["T_OBJECT_OPERATOR","->",674],["T_STRING","expects",674],"(",["T_VARIABLE","$this",674],["T_OBJECT_OPERATOR","->",674],["T_STRING","once",674],"(",")",")",["T_WHITESPACE","\n            ",674],["T_OBJECT_OPERATOR","->",675],["T_STRING","method",675],"(",["T_CONSTANT_ENCAPSED_STRING","'addStatusHistoryComment'",675],")",["T_WHITESPACE","\n            ",675],["T_OBJECT_OPERATOR","->",676],["T_STRING","with",676],"(",["T_VARIABLE","$message",676],")",";",["T_WHITESPACE","\n\n        ",676],["T_VARIABLE","$this",678],["T_OBJECT_OPERATOR","->",678],["T_STRING","helperMock",678],["T_OBJECT_OPERATOR","->",678],["T_STRING","expects",678],"(",["T_VARIABLE","$this",678],["T_OBJECT_OPERATOR","->",678],["T_STRING","once",678],"(",")",")",["T_WHITESPACE","\n            ",678],["T_OBJECT_OPERATOR","->",679],["T_STRING","method",679],"(",["T_CONSTANT_ENCAPSED_STRING","'getMethodInstance'",679],")",["T_WHITESPACE","\n            ",679],["T_OBJECT_OPERATOR","->",680],["T_STRING","will",680],"(",["T_VARIABLE","$this",680],["T_OBJECT_OPERATOR","->",680],["T_STRING","returnValue",680],"(",["T_VARIABLE","$this",680],["T_OBJECT_OPERATOR","->",680],["T_STRING","paymentMethodMock",680],")",")",";",["T_WHITESPACE","\n\n        ",680],["T_VARIABLE","$this",682],["T_OBJECT_OPERATOR","->",682],["T_STRING","paymentMethodMock",682],["T_OBJECT_OPERATOR","->",682],["T_STRING","expects",682],"(",["T_VARIABLE","$this",682],["T_OBJECT_OPERATOR","->",682],["T_STRING","once",682],"(",")",")",["T_WHITESPACE","\n            ",682],["T_OBJECT_OPERATOR","->",683],["T_STRING","method",683],"(",["T_CONSTANT_ENCAPSED_STRING","'setStore'",683],")",["T_WHITESPACE","\n            ",683],["T_OBJECT_OPERATOR","->",684],["T_STRING","will",684],"(",["T_VARIABLE","$this",684],["T_OBJECT_OPERATOR","->",684],["T_STRING","returnSelf",684],"(",")",")",";",["T_WHITESPACE","\n\n        ",684],["T_VARIABLE","$this",686],["T_OBJECT_OPERATOR","->",686],["T_STRING","paymentMethodMock",686],["T_OBJECT_OPERATOR","->",686],["T_STRING","expects",686],"(",["T_VARIABLE","$this",686],["T_OBJECT_OPERATOR","->",686],["T_STRING","once",686],"(",")",")",["T_WHITESPACE","\n            ",686],["T_OBJECT_OPERATOR","->",687],["T_STRING","method",687],"(",["T_CONSTANT_ENCAPSED_STRING","'acceptPayment'",687],")",["T_WHITESPACE","\n            ",687],["T_OBJECT_OPERATOR","->",688],["T_STRING","with",688],"(",["T_VARIABLE","$this",688],["T_OBJECT_OPERATOR","->",688],["T_STRING","payment",688],")",["T_WHITESPACE","\n            ",688],["T_OBJECT_OPERATOR","->",689],["T_STRING","willReturn",689],"(",["T_VARIABLE","$acceptPayment",689],")",";",["T_WHITESPACE","\n\n        ",689],["T_VARIABLE","$this",691],["T_OBJECT_OPERATOR","->",691],["T_STRING","payment",691],["T_OBJECT_OPERATOR","->",691],["T_STRING","accept",691],"(",")",";",["T_WHITESPACE","\n        ",691],["T_VARIABLE","$this",692],["T_OBJECT_OPERATOR","->",692],["T_STRING","assertEquals",692],"(",["T_VARIABLE","$this",692],["T_OBJECT_OPERATOR","->",692],["T_STRING","transactionId",692],",",["T_WHITESPACE"," ",692],["T_VARIABLE","$this",692],["T_OBJECT_OPERATOR","->",692],["T_STRING","payment",692],["T_OBJECT_OPERATOR","->",692],["T_STRING","getLastTransId",692],"(",")",")",";",["T_WHITESPACE","\n    ",692],"}",["T_WHITESPACE","\n\n    ",693],["T_PUBLIC","public",695],["T_WHITESPACE"," ",695],["T_FUNCTION","function",695],["T_WHITESPACE"," ",695],["T_STRING","testDenyPaymentFalse",695],"(",")",["T_WHITESPACE","\n    ",695],"{",["T_WHITESPACE","\n        ",696],["T_VARIABLE","$denyPayment",697],["T_WHITESPACE"," ",697],"=",["T_WHITESPACE"," ",697],["T_STRING","true",697],";",["T_WHITESPACE","\n        ",697],["T_VARIABLE","$message",698],["T_WHITESPACE"," ",698],"=",["T_WHITESPACE"," ",698],["T_STRING","sprintf",698],"(",["T_CONSTANT_ENCAPSED_STRING","'Denied the payment online Transaction ID: \"%s\"'",698],",",["T_WHITESPACE"," ",698],["T_VARIABLE","$this",698],["T_OBJECT_OPERATOR","->",698],["T_STRING","transactionId",698],")",";",["T_WHITESPACE","\n\n        ",698],["T_VARIABLE","$this",700],["T_OBJECT_OPERATOR","->",700],["T_STRING","payment",700],["T_OBJECT_OPERATOR","->",700],["T_STRING","setLastTransId",700],"(",["T_VARIABLE","$this",700],["T_OBJECT_OPERATOR","->",700],["T_STRING","transactionId",700],")",";",["T_WHITESPACE","\n\n        ",700],["T_VARIABLE","$this",702],["T_OBJECT_OPERATOR","->",702],["T_STRING","mockInvoice",702],"(",["T_VARIABLE","$this",702],["T_OBJECT_OPERATOR","->",702],["T_STRING","transactionId",702],")",";",["T_WHITESPACE","\n        ",702],["T_VARIABLE","$this",703],["T_OBJECT_OPERATOR","->",703],["T_STRING","mockResultFalseMethods",703],"(",["T_VARIABLE","$message",703],")",";",["T_WHITESPACE","\n\n        ",703],["T_VARIABLE","$this",705],["T_OBJECT_OPERATOR","->",705],["T_STRING","helperMock",705],["T_OBJECT_OPERATOR","->",705],["T_STRING","expects",705],"(",["T_VARIABLE","$this",705],["T_OBJECT_OPERATOR","->",705],["T_STRING","once",705],"(",")",")",["T_WHITESPACE","\n            ",705],["T_OBJECT_OPERATOR","->",706],["T_STRING","method",706],"(",["T_CONSTANT_ENCAPSED_STRING","'getMethodInstance'",706],")",["T_WHITESPACE","\n            ",706],["T_OBJECT_OPERATOR","->",707],["T_STRING","will",707],"(",["T_VARIABLE","$this",707],["T_OBJECT_OPERATOR","->",707],["T_STRING","returnValue",707],"(",["T_VARIABLE","$this",707],["T_OBJECT_OPERATOR","->",707],["T_STRING","paymentMethodMock",707],")",")",";",["T_WHITESPACE","\n\n        ",707],["T_VARIABLE","$this",709],["T_OBJECT_OPERATOR","->",709],["T_STRING","paymentMethodMock",709],["T_OBJECT_OPERATOR","->",709],["T_STRING","expects",709],"(",["T_VARIABLE","$this",709],["T_OBJECT_OPERATOR","->",709],["T_STRING","once",709],"(",")",")",["T_WHITESPACE","\n            ",709],["T_OBJECT_OPERATOR","->",710],["T_STRING","method",710],"(",["T_CONSTANT_ENCAPSED_STRING","'setStore'",710],")",["T_WHITESPACE","\n            ",710],["T_OBJECT_OPERATOR","->",711],["T_STRING","will",711],"(",["T_VARIABLE","$this",711],["T_OBJECT_OPERATOR","->",711],["T_STRING","returnSelf",711],"(",")",")",";",["T_WHITESPACE","\n\n        ",711],["T_VARIABLE","$this",713],["T_OBJECT_OPERATOR","->",713],["T_STRING","paymentMethodMock",713],["T_OBJECT_OPERATOR","->",713],["T_STRING","expects",713],"(",["T_VARIABLE","$this",713],["T_OBJECT_OPERATOR","->",713],["T_STRING","once",713],"(",")",")",["T_WHITESPACE","\n            ",713],["T_OBJECT_OPERATOR","->",714],["T_STRING","method",714],"(",["T_CONSTANT_ENCAPSED_STRING","'denyPayment'",714],")",["T_WHITESPACE","\n            ",714],["T_OBJECT_OPERATOR","->",715],["T_STRING","with",715],"(",["T_VARIABLE","$this",715],["T_OBJECT_OPERATOR","->",715],["T_STRING","payment",715],")",["T_WHITESPACE","\n            ",715],["T_OBJECT_OPERATOR","->",716],["T_STRING","willReturn",716],"(",["T_VARIABLE","$denyPayment",716],")",";",["T_WHITESPACE","\n\n        ",716],["T_VARIABLE","$this",718],["T_OBJECT_OPERATOR","->",718],["T_STRING","payment",718],["T_OBJECT_OPERATOR","->",718],["T_STRING","deny",718],"(",")",";",["T_WHITESPACE","\n    ",718],"}",["T_WHITESPACE","\n\n    ",719],["T_DOC_COMMENT","\/**\n     * Test offline IPN calls\n     *\/",721],["T_WHITESPACE","\n    ",723],["T_PUBLIC","public",724],["T_WHITESPACE"," ",724],["T_FUNCTION","function",724],["T_WHITESPACE"," ",724],["T_STRING","testDenyPaymentIpn",724],"(",")",["T_WHITESPACE","\n    ",724],"{",["T_WHITESPACE","\n        ",725],["T_VARIABLE","$isOnline",726],["T_WHITESPACE"," ",726],"=",["T_WHITESPACE"," ",726],["T_STRING","false",726],";",["T_WHITESPACE","\n        ",726],["T_VARIABLE","$message",727],["T_WHITESPACE"," ",727],"=",["T_WHITESPACE"," ",727],["T_STRING","sprintf",727],"(",["T_CONSTANT_ENCAPSED_STRING","'Denied the payment online Transaction ID: \"%s\"'",727],",",["T_WHITESPACE"," ",727],["T_VARIABLE","$this",727],["T_OBJECT_OPERATOR","->",727],["T_STRING","transactionId",727],")",";",["T_WHITESPACE","\n\n        ",727],["T_VARIABLE","$this",729],["T_OBJECT_OPERATOR","->",729],["T_STRING","payment",729],["T_OBJECT_OPERATOR","->",729],["T_STRING","setTransactionId",729],"(",["T_VARIABLE","$this",729],["T_OBJECT_OPERATOR","->",729],["T_STRING","transactionId",729],")",";",["T_WHITESPACE","\n        ",729],["T_VARIABLE","$this",730],["T_OBJECT_OPERATOR","->",730],["T_STRING","payment",730],["T_OBJECT_OPERATOR","->",730],["T_STRING","setNotificationResult",730],"(",["T_STRING","true",730],")",";",["T_WHITESPACE","\n\n        ",730],["T_VARIABLE","$this",732],["T_OBJECT_OPERATOR","->",732],["T_STRING","mockInvoice",732],"(",["T_VARIABLE","$this",732],["T_OBJECT_OPERATOR","->",732],["T_STRING","transactionId",732],")",";",["T_WHITESPACE","\n        ",732],["T_VARIABLE","$this",733],["T_OBJECT_OPERATOR","->",733],["T_STRING","mockResultFalseMethods",733],"(",["T_VARIABLE","$message",733],")",";",["T_WHITESPACE","\n\n        ",733],["T_VARIABLE","$this",735],["T_OBJECT_OPERATOR","->",735],["T_STRING","helperMock",735],["T_OBJECT_OPERATOR","->",735],["T_STRING","expects",735],"(",["T_VARIABLE","$this",735],["T_OBJECT_OPERATOR","->",735],["T_STRING","never",735],"(",")",")",["T_WHITESPACE","\n            ",735],["T_OBJECT_OPERATOR","->",736],["T_STRING","method",736],"(",["T_CONSTANT_ENCAPSED_STRING","'getMethodInstance'",736],")",";",["T_WHITESPACE","\n\n        ",736],["T_VARIABLE","$this",738],["T_OBJECT_OPERATOR","->",738],["T_STRING","payment",738],["T_OBJECT_OPERATOR","->",738],["T_STRING","deny",738],"(",["T_VARIABLE","$isOnline",738],")",";",["T_WHITESPACE","\n    ",738],"}",["T_WHITESPACE","\n\n    ",739],["T_DOC_COMMENT","\/**\n     * @dataProvider acceptPaymentFalseProvider\n     * @param bool $isFraudDetected\n     * @param bool $status\n     *\/",741],["T_WHITESPACE","\n    ",745],["T_PUBLIC","public",746],["T_WHITESPACE"," ",746],["T_FUNCTION","function",746],["T_WHITESPACE"," ",746],["T_STRING","testDenyPaymentNegative",746],"(",["T_VARIABLE","$isFraudDetected",746],",",["T_WHITESPACE"," ",746],["T_VARIABLE","$status",746],")",["T_WHITESPACE","\n    ",746],"{",["T_WHITESPACE","\n        ",747],["T_VARIABLE","$denyPayment",748],["T_WHITESPACE"," ",748],"=",["T_WHITESPACE"," ",748],["T_STRING","false",748],";",["T_WHITESPACE","\n        ",748],["T_VARIABLE","$message",749],["T_WHITESPACE"," ",749],"=",["T_WHITESPACE"," ",749],["T_STRING","sprintf",749],"(",["T_CONSTANT_ENCAPSED_STRING","'There is no need to deny this payment. Transaction ID: \"%s\"'",749],",",["T_WHITESPACE"," ",749],["T_VARIABLE","$this",749],["T_OBJECT_OPERATOR","->",749],["T_STRING","transactionId",749],")",";",["T_WHITESPACE","\n\n        ",749],["T_VARIABLE","$orderState",751],["T_WHITESPACE"," ",751],"=",["T_WHITESPACE"," ",751],["T_CONSTANT_ENCAPSED_STRING","'random_state'",751],";",["T_WHITESPACE","\n\n        ",751],["T_VARIABLE","$this",753],["T_OBJECT_OPERATOR","->",753],["T_STRING","payment",753],["T_OBJECT_OPERATOR","->",753],["T_STRING","setLastTransId",753],"(",["T_VARIABLE","$this",753],["T_OBJECT_OPERATOR","->",753],["T_STRING","transactionId",753],")",";",["T_WHITESPACE","\n        ",753],["T_VARIABLE","$this",754],["T_OBJECT_OPERATOR","->",754],["T_STRING","payment",754],["T_OBJECT_OPERATOR","->",754],["T_STRING","setData",754],"(",["T_CONSTANT_ENCAPSED_STRING","'is_fraud_detected'",754],",",["T_WHITESPACE"," ",754],["T_VARIABLE","$isFraudDetected",754],")",";",["T_WHITESPACE","\n\n        ",754],["T_VARIABLE","$this",756],["T_OBJECT_OPERATOR","->",756],["T_STRING","orderMock",756],["T_OBJECT_OPERATOR","->",756],["T_STRING","expects",756],"(",["T_VARIABLE","$this",756],["T_OBJECT_OPERATOR","->",756],["T_STRING","once",756],"(",")",")",["T_WHITESPACE","\n            ",756],["T_OBJECT_OPERATOR","->",757],["T_STRING","method",757],"(",["T_CONSTANT_ENCAPSED_STRING","'getState'",757],")",["T_WHITESPACE","\n            ",757],["T_OBJECT_OPERATOR","->",758],["T_STRING","willReturn",758],"(",["T_VARIABLE","$orderState",758],")",";",["T_WHITESPACE","\n\n        ",758],["T_VARIABLE","$this",760],["T_OBJECT_OPERATOR","->",760],["T_STRING","assertOrderUpdated",760],"(",["T_STRING","Order",760],["T_DOUBLE_COLON","::",760],["T_STRING","STATE_PAYMENT_REVIEW",760],",",["T_WHITESPACE"," ",760],["T_VARIABLE","$status",760],",",["T_WHITESPACE"," ",760],["T_VARIABLE","$message",760],")",";",["T_WHITESPACE","\n\n        ",760],["T_VARIABLE","$this",762],["T_OBJECT_OPERATOR","->",762],["T_STRING","helperMock",762],["T_OBJECT_OPERATOR","->",762],["T_STRING","expects",762],"(",["T_VARIABLE","$this",762],["T_OBJECT_OPERATOR","->",762],["T_STRING","once",762],"(",")",")",["T_WHITESPACE","\n            ",762],["T_OBJECT_OPERATOR","->",763],["T_STRING","method",763],"(",["T_CONSTANT_ENCAPSED_STRING","'getMethodInstance'",763],")",["T_WHITESPACE","\n            ",763],["T_OBJECT_OPERATOR","->",764],["T_STRING","will",764],"(",["T_VARIABLE","$this",764],["T_OBJECT_OPERATOR","->",764],["T_STRING","returnValue",764],"(",["T_VARIABLE","$this",764],["T_OBJECT_OPERATOR","->",764],["T_STRING","paymentMethodMock",764],")",")",";",["T_WHITESPACE","\n\n        ",764],["T_VARIABLE","$this",766],["T_OBJECT_OPERATOR","->",766],["T_STRING","paymentMethodMock",766],["T_OBJECT_OPERATOR","->",766],["T_STRING","expects",766],"(",["T_VARIABLE","$this",766],["T_OBJECT_OPERATOR","->",766],["T_STRING","once",766],"(",")",")",["T_WHITESPACE","\n            ",766],["T_OBJECT_OPERATOR","->",767],["T_STRING","method",767],"(",["T_CONSTANT_ENCAPSED_STRING","'setStore'",767],")",["T_WHITESPACE","\n            ",767],["T_OBJECT_OPERATOR","->",768],["T_STRING","will",768],"(",["T_VARIABLE","$this",768],["T_OBJECT_OPERATOR","->",768],["T_STRING","returnSelf",768],"(",")",")",";",["T_WHITESPACE","\n\n        ",768],["T_VARIABLE","$this",770],["T_OBJECT_OPERATOR","->",770],["T_STRING","paymentMethodMock",770],["T_OBJECT_OPERATOR","->",770],["T_STRING","expects",770],"(",["T_VARIABLE","$this",770],["T_OBJECT_OPERATOR","->",770],["T_STRING","once",770],"(",")",")",["T_WHITESPACE","\n            ",770],["T_OBJECT_OPERATOR","->",771],["T_STRING","method",771],"(",["T_CONSTANT_ENCAPSED_STRING","'denyPayment'",771],")",["T_WHITESPACE","\n            ",771],["T_OBJECT_OPERATOR","->",772],["T_STRING","with",772],"(",["T_VARIABLE","$this",772],["T_OBJECT_OPERATOR","->",772],["T_STRING","payment",772],")",["T_WHITESPACE","\n            ",772],["T_OBJECT_OPERATOR","->",773],["T_STRING","willReturn",773],"(",["T_VARIABLE","$denyPayment",773],")",";",["T_WHITESPACE","\n\n        ",773],["T_VARIABLE","$this",775],["T_OBJECT_OPERATOR","->",775],["T_STRING","payment",775],["T_OBJECT_OPERATOR","->",775],["T_STRING","deny",775],"(",")",";",["T_WHITESPACE","\n    ",775],"}",["T_WHITESPACE","\n\n    ",776],["T_PUBLIC","public",778],["T_WHITESPACE"," ",778],["T_FUNCTION","function",778],["T_WHITESPACE"," ",778],["T_STRING","testDenyPaymentNegativeStateReview",778],"(",")",["T_WHITESPACE","\n    ",778],"{",["T_WHITESPACE","\n        ",779],["T_VARIABLE","$denyPayment",780],["T_WHITESPACE"," ",780],"=",["T_WHITESPACE"," ",780],["T_STRING","false",780],";",["T_WHITESPACE","\n        ",780],["T_VARIABLE","$message",781],["T_WHITESPACE"," ",781],"=",["T_WHITESPACE"," ",781],["T_STRING","sprintf",781],"(",["T_CONSTANT_ENCAPSED_STRING","'There is no need to deny this payment. Transaction ID: \"%s\"'",781],",",["T_WHITESPACE"," ",781],["T_VARIABLE","$this",781],["T_OBJECT_OPERATOR","->",781],["T_STRING","transactionId",781],")",";",["T_WHITESPACE","\n\n        ",781],["T_VARIABLE","$orderState",783],["T_WHITESPACE"," ",783],"=",["T_WHITESPACE"," ",783],["T_STRING","Order",783],["T_DOUBLE_COLON","::",783],["T_STRING","STATE_PAYMENT_REVIEW",783],";",["T_WHITESPACE","\n\n        ",783],["T_VARIABLE","$this",785],["T_OBJECT_OPERATOR","->",785],["T_STRING","payment",785],["T_OBJECT_OPERATOR","->",785],["T_STRING","setLastTransId",785],"(",["T_VARIABLE","$this",785],["T_OBJECT_OPERATOR","->",785],["T_STRING","transactionId",785],")",";",["T_WHITESPACE","\n\n        ",785],["T_VARIABLE","$this",787],["T_OBJECT_OPERATOR","->",787],["T_STRING","orderMock",787],["T_OBJECT_OPERATOR","->",787],["T_STRING","expects",787],"(",["T_VARIABLE","$this",787],["T_OBJECT_OPERATOR","->",787],["T_STRING","once",787],"(",")",")",["T_WHITESPACE","\n            ",787],["T_OBJECT_OPERATOR","->",788],["T_STRING","method",788],"(",["T_CONSTANT_ENCAPSED_STRING","'getState'",788],")",["T_WHITESPACE","\n            ",788],["T_OBJECT_OPERATOR","->",789],["T_STRING","willReturn",789],"(",["T_VARIABLE","$orderState",789],")",";",["T_WHITESPACE","\n\n        ",789],["T_VARIABLE","$this",791],["T_OBJECT_OPERATOR","->",791],["T_STRING","orderMock",791],["T_OBJECT_OPERATOR","->",791],["T_STRING","expects",791],"(",["T_VARIABLE","$this",791],["T_OBJECT_OPERATOR","->",791],["T_STRING","never",791],"(",")",")",["T_WHITESPACE","\n            ",791],["T_OBJECT_OPERATOR","->",792],["T_STRING","method",792],"(",["T_CONSTANT_ENCAPSED_STRING","'setState'",792],")",";",["T_WHITESPACE","\n        ",792],["T_VARIABLE","$this",793],["T_OBJECT_OPERATOR","->",793],["T_STRING","orderMock",793],["T_OBJECT_OPERATOR","->",793],["T_STRING","expects",793],"(",["T_VARIABLE","$this",793],["T_OBJECT_OPERATOR","->",793],["T_STRING","once",793],"(",")",")",["T_WHITESPACE","\n            ",793],["T_OBJECT_OPERATOR","->",794],["T_STRING","method",794],"(",["T_CONSTANT_ENCAPSED_STRING","'addStatusHistoryComment'",794],")",["T_WHITESPACE","\n            ",794],["T_OBJECT_OPERATOR","->",795],["T_STRING","with",795],"(",["T_VARIABLE","$message",795],")",";",["T_WHITESPACE","\n\n        ",795],["T_VARIABLE","$this",797],["T_OBJECT_OPERATOR","->",797],["T_STRING","helperMock",797],["T_OBJECT_OPERATOR","->",797],["T_STRING","expects",797],"(",["T_VARIABLE","$this",797],["T_OBJECT_OPERATOR","->",797],["T_STRING","once",797],"(",")",")",["T_WHITESPACE","\n            ",797],["T_OBJECT_OPERATOR","->",798],["T_STRING","method",798],"(",["T_CONSTANT_ENCAPSED_STRING","'getMethodInstance'",798],")",["T_WHITESPACE","\n            ",798],["T_OBJECT_OPERATOR","->",799],["T_STRING","will",799],"(",["T_VARIABLE","$this",799],["T_OBJECT_OPERATOR","->",799],["T_STRING","returnValue",799],"(",["T_VARIABLE","$this",799],["T_OBJECT_OPERATOR","->",799],["T_STRING","paymentMethodMock",799],")",")",";",["T_WHITESPACE","\n\n        ",799],["T_VARIABLE","$this",801],["T_OBJECT_OPERATOR","->",801],["T_STRING","paymentMethodMock",801],["T_OBJECT_OPERATOR","->",801],["T_STRING","expects",801],"(",["T_VARIABLE","$this",801],["T_OBJECT_OPERATOR","->",801],["T_STRING","once",801],"(",")",")",["T_WHITESPACE","\n            ",801],["T_OBJECT_OPERATOR","->",802],["T_STRING","method",802],"(",["T_CONSTANT_ENCAPSED_STRING","'setStore'",802],")",["T_WHITESPACE","\n            ",802],["T_OBJECT_OPERATOR","->",803],["T_STRING","will",803],"(",["T_VARIABLE","$this",803],["T_OBJECT_OPERATOR","->",803],["T_STRING","returnSelf",803],"(",")",")",";",["T_WHITESPACE","\n\n        ",803],["T_VARIABLE","$this",805],["T_OBJECT_OPERATOR","->",805],["T_STRING","paymentMethodMock",805],["T_OBJECT_OPERATOR","->",805],["T_STRING","expects",805],"(",["T_VARIABLE","$this",805],["T_OBJECT_OPERATOR","->",805],["T_STRING","once",805],"(",")",")",["T_WHITESPACE","\n            ",805],["T_OBJECT_OPERATOR","->",806],["T_STRING","method",806],"(",["T_CONSTANT_ENCAPSED_STRING","'denyPayment'",806],")",["T_WHITESPACE","\n            ",806],["T_OBJECT_OPERATOR","->",807],["T_STRING","with",807],"(",["T_VARIABLE","$this",807],["T_OBJECT_OPERATOR","->",807],["T_STRING","payment",807],")",["T_WHITESPACE","\n            ",807],["T_OBJECT_OPERATOR","->",808],["T_STRING","willReturn",808],"(",["T_VARIABLE","$denyPayment",808],")",";",["T_WHITESPACE","\n\n        ",808],["T_VARIABLE","$this",810],["T_OBJECT_OPERATOR","->",810],["T_STRING","payment",810],["T_OBJECT_OPERATOR","->",810],["T_STRING","deny",810],"(",")",";",["T_WHITESPACE","\n    ",810],"}",["T_WHITESPACE","\n\n    ",811],["T_DOC_COMMENT","\/**\n     * Test offline IPN call, negative\n     *\/",813],["T_WHITESPACE","\n    ",815],["T_PUBLIC","public",816],["T_WHITESPACE"," ",816],["T_FUNCTION","function",816],["T_WHITESPACE"," ",816],["T_STRING","testDenyPaymentIpnNegativeStateReview",816],"(",")",["T_WHITESPACE","\n    ",816],"{",["T_WHITESPACE","\n        ",817],["T_VARIABLE","$isOnline",818],["T_WHITESPACE"," ",818],"=",["T_WHITESPACE"," ",818],["T_STRING","false",818],";",["T_WHITESPACE","\n        ",818],["T_VARIABLE","$message",819],["T_WHITESPACE"," ",819],"=",["T_WHITESPACE"," ",819],["T_STRING","sprintf",819],"(",["T_CONSTANT_ENCAPSED_STRING","'Registered notification about denied payment. Transaction ID: \"%s\"'",819],",",["T_WHITESPACE"," ",819],["T_VARIABLE","$this",819],["T_OBJECT_OPERATOR","->",819],["T_STRING","transactionId",819],")",";",["T_WHITESPACE","\n\n        ",819],["T_VARIABLE","$orderState",821],["T_WHITESPACE"," ",821],"=",["T_WHITESPACE"," ",821],["T_STRING","Order",821],["T_DOUBLE_COLON","::",821],["T_STRING","STATE_PAYMENT_REVIEW",821],";",["T_WHITESPACE","\n\n        ",821],["T_VARIABLE","$this",823],["T_OBJECT_OPERATOR","->",823],["T_STRING","payment",823],["T_OBJECT_OPERATOR","->",823],["T_STRING","setTransactionId",823],"(",["T_VARIABLE","$this",823],["T_OBJECT_OPERATOR","->",823],["T_STRING","transactionId",823],")",";",["T_WHITESPACE","\n        ",823],["T_VARIABLE","$this",824],["T_OBJECT_OPERATOR","->",824],["T_STRING","payment",824],["T_OBJECT_OPERATOR","->",824],["T_STRING","setNotificationResult",824],"(",["T_STRING","false",824],")",";",["T_WHITESPACE","\n\n        ",824],["T_VARIABLE","$this",826],["T_OBJECT_OPERATOR","->",826],["T_STRING","orderMock",826],["T_OBJECT_OPERATOR","->",826],["T_STRING","expects",826],"(",["T_VARIABLE","$this",826],["T_OBJECT_OPERATOR","->",826],["T_STRING","once",826],"(",")",")",["T_WHITESPACE","\n            ",826],["T_OBJECT_OPERATOR","->",827],["T_STRING","method",827],"(",["T_CONSTANT_ENCAPSED_STRING","'getState'",827],")",["T_WHITESPACE","\n            ",827],["T_OBJECT_OPERATOR","->",828],["T_STRING","willReturn",828],"(",["T_VARIABLE","$orderState",828],")",";",["T_WHITESPACE","\n\n        ",828],["T_VARIABLE","$this",830],["T_OBJECT_OPERATOR","->",830],["T_STRING","orderMock",830],["T_OBJECT_OPERATOR","->",830],["T_STRING","expects",830],"(",["T_VARIABLE","$this",830],["T_OBJECT_OPERATOR","->",830],["T_STRING","never",830],"(",")",")",["T_WHITESPACE","\n            ",830],["T_OBJECT_OPERATOR","->",831],["T_STRING","method",831],"(",["T_CONSTANT_ENCAPSED_STRING","'setState'",831],")",";",["T_WHITESPACE","\n        ",831],["T_VARIABLE","$this",832],["T_OBJECT_OPERATOR","->",832],["T_STRING","orderMock",832],["T_OBJECT_OPERATOR","->",832],["T_STRING","expects",832],"(",["T_VARIABLE","$this",832],["T_OBJECT_OPERATOR","->",832],["T_STRING","once",832],"(",")",")",["T_WHITESPACE","\n            ",832],["T_OBJECT_OPERATOR","->",833],["T_STRING","method",833],"(",["T_CONSTANT_ENCAPSED_STRING","'addStatusHistoryComment'",833],")",["T_WHITESPACE","\n            ",833],["T_OBJECT_OPERATOR","->",834],["T_STRING","with",834],"(",["T_VARIABLE","$message",834],")",";",["T_WHITESPACE","\n\n        ",834],["T_VARIABLE","$this",836],["T_OBJECT_OPERATOR","->",836],["T_STRING","helperMock",836],["T_OBJECT_OPERATOR","->",836],["T_STRING","expects",836],"(",["T_VARIABLE","$this",836],["T_OBJECT_OPERATOR","->",836],["T_STRING","never",836],"(",")",")",["T_WHITESPACE","\n            ",836],["T_OBJECT_OPERATOR","->",837],["T_STRING","method",837],"(",["T_CONSTANT_ENCAPSED_STRING","'getMethodInstance'",837],")",["T_WHITESPACE","\n            ",837],["T_OBJECT_OPERATOR","->",838],["T_STRING","will",838],"(",["T_VARIABLE","$this",838],["T_OBJECT_OPERATOR","->",838],["T_STRING","returnValue",838],"(",["T_VARIABLE","$this",838],["T_OBJECT_OPERATOR","->",838],["T_STRING","paymentMethodMock",838],")",")",";",["T_WHITESPACE","\n\n        ",838],["T_VARIABLE","$this",840],["T_OBJECT_OPERATOR","->",840],["T_STRING","paymentMethodMock",840],["T_OBJECT_OPERATOR","->",840],["T_STRING","expects",840],"(",["T_VARIABLE","$this",840],["T_OBJECT_OPERATOR","->",840],["T_STRING","never",840],"(",")",")",["T_WHITESPACE","\n            ",840],["T_OBJECT_OPERATOR","->",841],["T_STRING","method",841],"(",["T_CONSTANT_ENCAPSED_STRING","'setStore'",841],")",["T_WHITESPACE","\n            ",841],["T_OBJECT_OPERATOR","->",842],["T_STRING","will",842],"(",["T_VARIABLE","$this",842],["T_OBJECT_OPERATOR","->",842],["T_STRING","returnSelf",842],"(",")",")",";",["T_WHITESPACE","\n\n        ",842],["T_VARIABLE","$this",844],["T_OBJECT_OPERATOR","->",844],["T_STRING","paymentMethodMock",844],["T_OBJECT_OPERATOR","->",844],["T_STRING","expects",844],"(",["T_VARIABLE","$this",844],["T_OBJECT_OPERATOR","->",844],["T_STRING","never",844],"(",")",")",["T_WHITESPACE","\n            ",844],["T_OBJECT_OPERATOR","->",845],["T_STRING","method",845],"(",["T_CONSTANT_ENCAPSED_STRING","'denyPayment'",845],")",["T_WHITESPACE","\n            ",845],["T_OBJECT_OPERATOR","->",846],["T_STRING","with",846],"(",["T_VARIABLE","$this",846],["T_OBJECT_OPERATOR","->",846],["T_STRING","payment",846],")",";",["T_WHITESPACE","\n\n        ",846],["T_VARIABLE","$this",848],["T_OBJECT_OPERATOR","->",848],["T_STRING","payment",848],["T_OBJECT_OPERATOR","->",848],["T_STRING","deny",848],"(",["T_VARIABLE","$isOnline",848],")",";",["T_WHITESPACE","\n    ",848],"}",["T_WHITESPACE","\n\n    ",849],["T_DOC_COMMENT","\/**\n     * @param int $transactionId\n     * @param int $countCall\n     *\/",851],["T_WHITESPACE","\n    ",854],["T_PROTECTED","protected",855],["T_WHITESPACE"," ",855],["T_FUNCTION","function",855],["T_WHITESPACE"," ",855],["T_STRING","mockInvoice",855],"(",["T_VARIABLE","$transactionId",855],",",["T_WHITESPACE"," ",855],["T_VARIABLE","$countCall",855],["T_WHITESPACE"," ",855],"=",["T_WHITESPACE"," ",855],["T_LNUMBER","1",855],")",["T_WHITESPACE","\n    ",855],"{",["T_WHITESPACE","\n        ",856],["T_VARIABLE","$this",857],["T_OBJECT_OPERATOR","->",857],["T_STRING","invoiceMock",857],["T_OBJECT_OPERATOR","->",857],["T_STRING","expects",857],"(",["T_STATIC","static",857],["T_DOUBLE_COLON","::",857],["T_STRING","any",857],"(",")",")",["T_WHITESPACE","\n            ",857],["T_OBJECT_OPERATOR","->",858],["T_STRING","method",858],"(",["T_CONSTANT_ENCAPSED_STRING","'getTransactionId'",858],")",["T_WHITESPACE","\n            ",858],["T_OBJECT_OPERATOR","->",859],["T_STRING","willReturn",859],"(",["T_VARIABLE","$transactionId",859],")",";",["T_WHITESPACE","\n        ",859],["T_VARIABLE","$this",860],["T_OBJECT_OPERATOR","->",860],["T_STRING","invoiceMock",860],["T_OBJECT_OPERATOR","->",860],["T_STRING","expects",860],"(",["T_STATIC","static",860],["T_DOUBLE_COLON","::",860],["T_STRING","any",860],"(",")",")",["T_WHITESPACE","\n            ",860],["T_OBJECT_OPERATOR","->",861],["T_STRING","method",861],"(",["T_CONSTANT_ENCAPSED_STRING","'load'",861],")",["T_WHITESPACE","\n            ",861],["T_OBJECT_OPERATOR","->",862],["T_STRING","with",862],"(",["T_VARIABLE","$transactionId",862],")",";",["T_WHITESPACE","\n        ",862],["T_VARIABLE","$this",863],["T_OBJECT_OPERATOR","->",863],["T_STRING","invoiceMock",863],["T_OBJECT_OPERATOR","->",863],["T_STRING","expects",863],"(",["T_STATIC","static",863],["T_DOUBLE_COLON","::",863],["T_STRING","any",863],"(",")",")",["T_WHITESPACE","\n            ",863],["T_OBJECT_OPERATOR","->",864],["T_STRING","method",864],"(",["T_CONSTANT_ENCAPSED_STRING","'getId'",864],")",["T_WHITESPACE","\n            ",864],["T_OBJECT_OPERATOR","->",865],["T_STRING","willReturn",865],"(",["T_VARIABLE","$transactionId",865],")",";",["T_WHITESPACE","\n        ",865],["T_VARIABLE","$this",866],["T_OBJECT_OPERATOR","->",866],["T_STRING","orderMock",866],["T_OBJECT_OPERATOR","->",866],["T_STRING","expects",866],"(",["T_VARIABLE","$this",866],["T_OBJECT_OPERATOR","->",866],["T_STRING","exactly",866],"(",["T_VARIABLE","$countCall",866],")",")",["T_WHITESPACE","\n            ",866],["T_OBJECT_OPERATOR","->",867],["T_STRING","method",867],"(",["T_CONSTANT_ENCAPSED_STRING","'getInvoiceCollection'",867],")",["T_WHITESPACE","\n            ",867],["T_OBJECT_OPERATOR","->",868],["T_STRING","willReturn",868],"(","[",["T_VARIABLE","$this",868],["T_OBJECT_OPERATOR","->",868],["T_STRING","invoiceMock",868],"]",")",";",["T_WHITESPACE","\n    ",868],"}",["T_WHITESPACE","\n\n    ",869],["T_PUBLIC","public",871],["T_WHITESPACE"," ",871],["T_FUNCTION","function",871],["T_WHITESPACE"," ",871],["T_STRING","testUpdateOnlineTransactionApproved",871],"(",")",["T_WHITESPACE","\n    ",871],"{",["T_WHITESPACE","\n        ",872],["T_VARIABLE","$message",873],["T_WHITESPACE"," ",873],"=",["T_WHITESPACE"," ",873],["T_STRING","sprintf",873],"(",["T_CONSTANT_ENCAPSED_STRING","'Registered update about approved payment. Transaction ID: \"%s\"'",873],",",["T_WHITESPACE"," ",873],["T_VARIABLE","$this",873],["T_OBJECT_OPERATOR","->",873],["T_STRING","transactionId",873],")",";",["T_WHITESPACE","\n\n        ",873],["T_VARIABLE","$storeId",875],["T_WHITESPACE"," ",875],"=",["T_WHITESPACE"," ",875],["T_LNUMBER","50",875],";",["T_WHITESPACE","\n        ",875],["T_VARIABLE","$baseGrandTotal",876],["T_WHITESPACE"," ",876],"=",["T_WHITESPACE"," ",876],["T_DNUMBER","299.99",876],";",["T_WHITESPACE","\n\n        ",876],["T_VARIABLE","$this",878],["T_OBJECT_OPERATOR","->",878],["T_STRING","payment",878],["T_OBJECT_OPERATOR","->",878],["T_STRING","setLastTransId",878],"(",["T_VARIABLE","$this",878],["T_OBJECT_OPERATOR","->",878],["T_STRING","transactionId",878],")",";",["T_WHITESPACE","\n        ",878],["T_VARIABLE","$this",879],["T_OBJECT_OPERATOR","->",879],["T_STRING","payment",879],["T_OBJECT_OPERATOR","->",879],["T_STRING","setData",879],"(",["T_CONSTANT_ENCAPSED_STRING","'is_transaction_approved'",879],",",["T_WHITESPACE"," ",879],["T_STRING","true",879],")",";",["T_WHITESPACE","\n\n        ",879],["T_VARIABLE","$this",881],["T_OBJECT_OPERATOR","->",881],["T_STRING","mockInvoice",881],"(",["T_VARIABLE","$this",881],["T_OBJECT_OPERATOR","->",881],["T_STRING","transactionId",881],")",";",["T_WHITESPACE","\n        ",881],["T_VARIABLE","$this",882],["T_OBJECT_OPERATOR","->",882],["T_STRING","mockResultTrueMethods",882],"(",["T_VARIABLE","$this",882],["T_OBJECT_OPERATOR","->",882],["T_STRING","transactionId",882],",",["T_WHITESPACE"," ",882],["T_VARIABLE","$baseGrandTotal",882],",",["T_WHITESPACE"," ",882],["T_VARIABLE","$message",882],")",";",["T_WHITESPACE","\n\n        ",882],["T_VARIABLE","$this",884],["T_OBJECT_OPERATOR","->",884],["T_STRING","orderMock",884],["T_OBJECT_OPERATOR","->",884],["T_STRING","expects",884],"(",["T_VARIABLE","$this",884],["T_OBJECT_OPERATOR","->",884],["T_STRING","once",884],"(",")",")",["T_WHITESPACE","\n            ",884],["T_OBJECT_OPERATOR","->",885],["T_STRING","method",885],"(",["T_CONSTANT_ENCAPSED_STRING","'getStoreId'",885],")",["T_WHITESPACE","\n            ",885],["T_OBJECT_OPERATOR","->",886],["T_STRING","willReturn",886],"(",["T_VARIABLE","$storeId",886],")",";",["T_WHITESPACE","\n        ",886],["T_VARIABLE","$this",887],["T_OBJECT_OPERATOR","->",887],["T_STRING","helperMock",887],["T_OBJECT_OPERATOR","->",887],["T_STRING","expects",887],"(",["T_VARIABLE","$this",887],["T_OBJECT_OPERATOR","->",887],["T_STRING","once",887],"(",")",")",["T_WHITESPACE","\n            ",887],["T_OBJECT_OPERATOR","->",888],["T_STRING","method",888],"(",["T_CONSTANT_ENCAPSED_STRING","'getMethodInstance'",888],")",["T_WHITESPACE","\n            ",888],["T_OBJECT_OPERATOR","->",889],["T_STRING","will",889],"(",["T_VARIABLE","$this",889],["T_OBJECT_OPERATOR","->",889],["T_STRING","returnValue",889],"(",["T_VARIABLE","$this",889],["T_OBJECT_OPERATOR","->",889],["T_STRING","paymentMethodMock",889],")",")",";",["T_WHITESPACE","\n        ",889],["T_VARIABLE","$this",890],["T_OBJECT_OPERATOR","->",890],["T_STRING","paymentMethodMock",890],["T_OBJECT_OPERATOR","->",890],["T_STRING","expects",890],"(",["T_VARIABLE","$this",890],["T_OBJECT_OPERATOR","->",890],["T_STRING","once",890],"(",")",")",["T_WHITESPACE","\n            ",890],["T_OBJECT_OPERATOR","->",891],["T_STRING","method",891],"(",["T_CONSTANT_ENCAPSED_STRING","'setStore'",891],")",["T_WHITESPACE","\n            ",891],["T_OBJECT_OPERATOR","->",892],["T_STRING","with",892],"(",["T_VARIABLE","$storeId",892],")",["T_WHITESPACE","\n            ",892],["T_OBJECT_OPERATOR","->",893],["T_STRING","willReturn",893],"(",["T_VARIABLE","$this",893],["T_OBJECT_OPERATOR","->",893],["T_STRING","paymentMethodMock",893],")",";",["T_WHITESPACE","\n        ",893],["T_VARIABLE","$this",894],["T_OBJECT_OPERATOR","->",894],["T_STRING","paymentMethodMock",894],["T_OBJECT_OPERATOR","->",894],["T_STRING","expects",894],"(",["T_VARIABLE","$this",894],["T_OBJECT_OPERATOR","->",894],["T_STRING","once",894],"(",")",")",["T_WHITESPACE","\n            ",894],["T_OBJECT_OPERATOR","->",895],["T_STRING","method",895],"(",["T_CONSTANT_ENCAPSED_STRING","'fetchTransactionInfo'",895],")",["T_WHITESPACE","\n            ",895],["T_OBJECT_OPERATOR","->",896],["T_STRING","with",896],"(",["T_VARIABLE","$this",896],["T_OBJECT_OPERATOR","->",896],["T_STRING","payment",896],",",["T_WHITESPACE"," ",896],["T_VARIABLE","$this",896],["T_OBJECT_OPERATOR","->",896],["T_STRING","transactionId",896],")",";",["T_WHITESPACE","\n\n        ",896],["T_VARIABLE","$this",898],["T_OBJECT_OPERATOR","->",898],["T_STRING","payment",898],["T_OBJECT_OPERATOR","->",898],["T_STRING","update",898],"(",")",";",["T_WHITESPACE","\n        ",898],["T_VARIABLE","$this",899],["T_OBJECT_OPERATOR","->",899],["T_STRING","assertEquals",899],"(",["T_VARIABLE","$baseGrandTotal",899],",",["T_WHITESPACE"," ",899],["T_VARIABLE","$this",899],["T_OBJECT_OPERATOR","->",899],["T_STRING","payment",899],["T_OBJECT_OPERATOR","->",899],["T_STRING","getBaseAmountPaidOnline",899],"(",")",")",";",["T_WHITESPACE","\n    ",899],"}",["T_WHITESPACE","\n\n    ",900],["T_DOC_COMMENT","\/**\n     * Test update calls from IPN controller\n     *\/",902],["T_WHITESPACE","\n    ",904],["T_PUBLIC","public",905],["T_WHITESPACE"," ",905],["T_FUNCTION","function",905],["T_WHITESPACE"," ",905],["T_STRING","testUpdateOnlineTransactionApprovedIpn",905],"(",")",["T_WHITESPACE","\n    ",905],"{",["T_WHITESPACE","\n        ",906],["T_VARIABLE","$isOnline",907],["T_WHITESPACE"," ",907],"=",["T_WHITESPACE"," ",907],["T_STRING","false",907],";",["T_WHITESPACE","\n        ",907],["T_VARIABLE","$message",908],["T_WHITESPACE"," ",908],"=",["T_WHITESPACE"," ",908],["T_STRING","sprintf",908],"(",["T_CONSTANT_ENCAPSED_STRING","'Registered update about approved payment. Transaction ID: \"%s\"'",908],",",["T_WHITESPACE"," ",908],["T_VARIABLE","$this",908],["T_OBJECT_OPERATOR","->",908],["T_STRING","transactionId",908],")",";",["T_WHITESPACE","\n\n        ",908],["T_VARIABLE","$storeId",910],["T_WHITESPACE"," ",910],"=",["T_WHITESPACE"," ",910],["T_LNUMBER","50",910],";",["T_WHITESPACE","\n        ",910],["T_VARIABLE","$baseGrandTotal",911],["T_WHITESPACE"," ",911],"=",["T_WHITESPACE"," ",911],["T_DNUMBER","299.99",911],";",["T_WHITESPACE","\n\n        ",911],["T_VARIABLE","$this",913],["T_OBJECT_OPERATOR","->",913],["T_STRING","payment",913],["T_OBJECT_OPERATOR","->",913],["T_STRING","setTransactionId",913],"(",["T_VARIABLE","$this",913],["T_OBJECT_OPERATOR","->",913],["T_STRING","transactionId",913],")",";",["T_WHITESPACE","\n        ",913],["T_VARIABLE","$this",914],["T_OBJECT_OPERATOR","->",914],["T_STRING","payment",914],["T_OBJECT_OPERATOR","->",914],["T_STRING","setData",914],"(",["T_CONSTANT_ENCAPSED_STRING","'is_transaction_approved'",914],",",["T_WHITESPACE"," ",914],["T_STRING","true",914],")",";",["T_WHITESPACE","\n\n        ",914],["T_VARIABLE","$this",916],["T_OBJECT_OPERATOR","->",916],["T_STRING","mockInvoice",916],"(",["T_VARIABLE","$this",916],["T_OBJECT_OPERATOR","->",916],["T_STRING","transactionId",916],")",";",["T_WHITESPACE","\n        ",916],["T_VARIABLE","$this",917],["T_OBJECT_OPERATOR","->",917],["T_STRING","mockResultTrueMethods",917],"(",["T_VARIABLE","$this",917],["T_OBJECT_OPERATOR","->",917],["T_STRING","transactionId",917],",",["T_WHITESPACE"," ",917],["T_VARIABLE","$baseGrandTotal",917],",",["T_WHITESPACE"," ",917],["T_VARIABLE","$message",917],")",";",["T_WHITESPACE","\n\n        ",917],["T_VARIABLE","$this",919],["T_OBJECT_OPERATOR","->",919],["T_STRING","orderMock",919],["T_OBJECT_OPERATOR","->",919],["T_STRING","expects",919],"(",["T_VARIABLE","$this",919],["T_OBJECT_OPERATOR","->",919],["T_STRING","never",919],"(",")",")",["T_WHITESPACE","\n            ",919],["T_OBJECT_OPERATOR","->",920],["T_STRING","method",920],"(",["T_CONSTANT_ENCAPSED_STRING","'getStoreId'",920],")",["T_WHITESPACE","\n            ",920],["T_OBJECT_OPERATOR","->",921],["T_STRING","willReturn",921],"(",["T_VARIABLE","$storeId",921],")",";",["T_WHITESPACE","\n        ",921],["T_VARIABLE","$this",922],["T_OBJECT_OPERATOR","->",922],["T_STRING","helperMock",922],["T_OBJECT_OPERATOR","->",922],["T_STRING","expects",922],"(",["T_VARIABLE","$this",922],["T_OBJECT_OPERATOR","->",922],["T_STRING","never",922],"(",")",")",["T_WHITESPACE","\n            ",922],["T_OBJECT_OPERATOR","->",923],["T_STRING","method",923],"(",["T_CONSTANT_ENCAPSED_STRING","'getMethodInstance'",923],")",["T_WHITESPACE","\n            ",923],["T_OBJECT_OPERATOR","->",924],["T_STRING","will",924],"(",["T_VARIABLE","$this",924],["T_OBJECT_OPERATOR","->",924],["T_STRING","returnValue",924],"(",["T_VARIABLE","$this",924],["T_OBJECT_OPERATOR","->",924],["T_STRING","paymentMethodMock",924],")",")",";",["T_WHITESPACE","\n        ",924],["T_VARIABLE","$this",925],["T_OBJECT_OPERATOR","->",925],["T_STRING","paymentMethodMock",925],["T_OBJECT_OPERATOR","->",925],["T_STRING","expects",925],"(",["T_VARIABLE","$this",925],["T_OBJECT_OPERATOR","->",925],["T_STRING","never",925],"(",")",")",["T_WHITESPACE","\n            ",925],["T_OBJECT_OPERATOR","->",926],["T_STRING","method",926],"(",["T_CONSTANT_ENCAPSED_STRING","'setStore'",926],")",["T_WHITESPACE","\n            ",926],["T_OBJECT_OPERATOR","->",927],["T_STRING","with",927],"(",["T_VARIABLE","$storeId",927],")",["T_WHITESPACE","\n            ",927],["T_OBJECT_OPERATOR","->",928],["T_STRING","willReturn",928],"(",["T_VARIABLE","$this",928],["T_OBJECT_OPERATOR","->",928],["T_STRING","paymentMethodMock",928],")",";",["T_WHITESPACE","\n        ",928],["T_VARIABLE","$this",929],["T_OBJECT_OPERATOR","->",929],["T_STRING","paymentMethodMock",929],["T_OBJECT_OPERATOR","->",929],["T_STRING","expects",929],"(",["T_VARIABLE","$this",929],["T_OBJECT_OPERATOR","->",929],["T_STRING","never",929],"(",")",")",["T_WHITESPACE","\n            ",929],["T_OBJECT_OPERATOR","->",930],["T_STRING","method",930],"(",["T_CONSTANT_ENCAPSED_STRING","'fetchTransactionInfo'",930],")",["T_WHITESPACE","\n            ",930],["T_OBJECT_OPERATOR","->",931],["T_STRING","with",931],"(",["T_VARIABLE","$this",931],["T_OBJECT_OPERATOR","->",931],["T_STRING","payment",931],",",["T_WHITESPACE"," ",931],["T_VARIABLE","$this",931],["T_OBJECT_OPERATOR","->",931],["T_STRING","transactionId",931],")",";",["T_WHITESPACE","\n\n        ",931],["T_VARIABLE","$this",933],["T_OBJECT_OPERATOR","->",933],["T_STRING","payment",933],["T_OBJECT_OPERATOR","->",933],["T_STRING","update",933],"(",["T_VARIABLE","$isOnline",933],")",";",["T_WHITESPACE","\n        ",933],["T_VARIABLE","$this",934],["T_OBJECT_OPERATOR","->",934],["T_STRING","assertEquals",934],"(",["T_VARIABLE","$baseGrandTotal",934],",",["T_WHITESPACE"," ",934],["T_VARIABLE","$this",934],["T_OBJECT_OPERATOR","->",934],["T_STRING","payment",934],["T_OBJECT_OPERATOR","->",934],["T_STRING","getBaseAmountPaidOnline",934],"(",")",")",";",["T_WHITESPACE","\n    ",934],"}",["T_WHITESPACE","\n\n    ",935],["T_PUBLIC","public",937],["T_WHITESPACE"," ",937],["T_FUNCTION","function",937],["T_WHITESPACE"," ",937],["T_STRING","testUpdateOnlineTransactionDenied",937],"(",")",["T_WHITESPACE","\n    ",937],"{",["T_WHITESPACE","\n        ",938],["T_VARIABLE","$message",939],["T_WHITESPACE"," ",939],"=",["T_WHITESPACE"," ",939],["T_STRING","sprintf",939],"(",["T_CONSTANT_ENCAPSED_STRING","'Registered update about denied payment. Transaction ID: \"%s\"'",939],",",["T_WHITESPACE"," ",939],["T_VARIABLE","$this",939],["T_OBJECT_OPERATOR","->",939],["T_STRING","transactionId",939],")",";",["T_WHITESPACE","\n\n        ",939],["T_VARIABLE","$storeId",941],["T_WHITESPACE"," ",941],"=",["T_WHITESPACE"," ",941],["T_LNUMBER","50",941],";",["T_WHITESPACE","\n\n        ",941],["T_VARIABLE","$this",943],["T_OBJECT_OPERATOR","->",943],["T_STRING","payment",943],["T_OBJECT_OPERATOR","->",943],["T_STRING","setLastTransId",943],"(",["T_VARIABLE","$this",943],["T_OBJECT_OPERATOR","->",943],["T_STRING","transactionId",943],")",";",["T_WHITESPACE","\n        ",943],["T_VARIABLE","$this",944],["T_OBJECT_OPERATOR","->",944],["T_STRING","payment",944],["T_OBJECT_OPERATOR","->",944],["T_STRING","setData",944],"(",["T_CONSTANT_ENCAPSED_STRING","'is_transaction_denied'",944],",",["T_WHITESPACE"," ",944],["T_STRING","true",944],")",";",["T_WHITESPACE","\n\n        ",944],["T_VARIABLE","$this",946],["T_OBJECT_OPERATOR","->",946],["T_STRING","mockInvoice",946],"(",["T_VARIABLE","$this",946],["T_OBJECT_OPERATOR","->",946],["T_STRING","transactionId",946],")",";",["T_WHITESPACE","\n        ",946],["T_VARIABLE","$this",947],["T_OBJECT_OPERATOR","->",947],["T_STRING","mockResultFalseMethods",947],"(",["T_VARIABLE","$message",947],")",";",["T_WHITESPACE","\n\n        ",947],["T_VARIABLE","$this",949],["T_OBJECT_OPERATOR","->",949],["T_STRING","orderMock",949],["T_OBJECT_OPERATOR","->",949],["T_STRING","expects",949],"(",["T_VARIABLE","$this",949],["T_OBJECT_OPERATOR","->",949],["T_STRING","once",949],"(",")",")",["T_WHITESPACE","\n            ",949],["T_OBJECT_OPERATOR","->",950],["T_STRING","method",950],"(",["T_CONSTANT_ENCAPSED_STRING","'getStoreId'",950],")",["T_WHITESPACE","\n            ",950],["T_OBJECT_OPERATOR","->",951],["T_STRING","willReturn",951],"(",["T_VARIABLE","$storeId",951],")",";",["T_WHITESPACE","\n        ",951],["T_VARIABLE","$this",952],["T_OBJECT_OPERATOR","->",952],["T_STRING","helperMock",952],["T_OBJECT_OPERATOR","->",952],["T_STRING","expects",952],"(",["T_VARIABLE","$this",952],["T_OBJECT_OPERATOR","->",952],["T_STRING","once",952],"(",")",")",["T_WHITESPACE","\n            ",952],["T_OBJECT_OPERATOR","->",953],["T_STRING","method",953],"(",["T_CONSTANT_ENCAPSED_STRING","'getMethodInstance'",953],")",["T_WHITESPACE","\n            ",953],["T_OBJECT_OPERATOR","->",954],["T_STRING","will",954],"(",["T_VARIABLE","$this",954],["T_OBJECT_OPERATOR","->",954],["T_STRING","returnValue",954],"(",["T_VARIABLE","$this",954],["T_OBJECT_OPERATOR","->",954],["T_STRING","paymentMethodMock",954],")",")",";",["T_WHITESPACE","\n        ",954],["T_VARIABLE","$this",955],["T_OBJECT_OPERATOR","->",955],["T_STRING","paymentMethodMock",955],["T_OBJECT_OPERATOR","->",955],["T_STRING","expects",955],"(",["T_VARIABLE","$this",955],["T_OBJECT_OPERATOR","->",955],["T_STRING","once",955],"(",")",")",["T_WHITESPACE","\n            ",955],["T_OBJECT_OPERATOR","->",956],["T_STRING","method",956],"(",["T_CONSTANT_ENCAPSED_STRING","'setStore'",956],")",["T_WHITESPACE","\n            ",956],["T_OBJECT_OPERATOR","->",957],["T_STRING","with",957],"(",["T_VARIABLE","$storeId",957],")",["T_WHITESPACE","\n            ",957],["T_OBJECT_OPERATOR","->",958],["T_STRING","willReturn",958],"(",["T_VARIABLE","$this",958],["T_OBJECT_OPERATOR","->",958],["T_STRING","paymentMethodMock",958],")",";",["T_WHITESPACE","\n        ",958],["T_VARIABLE","$this",959],["T_OBJECT_OPERATOR","->",959],["T_STRING","paymentMethodMock",959],["T_OBJECT_OPERATOR","->",959],["T_STRING","expects",959],"(",["T_VARIABLE","$this",959],["T_OBJECT_OPERATOR","->",959],["T_STRING","once",959],"(",")",")",["T_WHITESPACE","\n            ",959],["T_OBJECT_OPERATOR","->",960],["T_STRING","method",960],"(",["T_CONSTANT_ENCAPSED_STRING","'fetchTransactionInfo'",960],")",["T_WHITESPACE","\n            ",960],["T_OBJECT_OPERATOR","->",961],["T_STRING","with",961],"(",["T_VARIABLE","$this",961],["T_OBJECT_OPERATOR","->",961],["T_STRING","payment",961],",",["T_WHITESPACE"," ",961],["T_VARIABLE","$this",961],["T_OBJECT_OPERATOR","->",961],["T_STRING","transactionId",961],")",";",["T_WHITESPACE","\n\n        ",961],["T_VARIABLE","$this",963],["T_OBJECT_OPERATOR","->",963],["T_STRING","payment",963],["T_OBJECT_OPERATOR","->",963],["T_STRING","update",963],"(",")",";",["T_WHITESPACE","\n    ",963],"}",["T_WHITESPACE","\n\n    ",964],["T_DOC_COMMENT","\/**\n     * @dataProvider acceptPaymentFalseProvider\n     * @param bool $isFraudDetected\n     * @param bool $status\n     *\/",966],["T_WHITESPACE","\n    ",970],["T_PUBLIC","public",971],["T_WHITESPACE"," ",971],["T_FUNCTION","function",971],["T_WHITESPACE"," ",971],["T_STRING","testUpdateOnlineTransactionDeniedFalse",971],"(",["T_VARIABLE","$isFraudDetected",971],",",["T_WHITESPACE"," ",971],["T_VARIABLE","$status",971],")",["T_WHITESPACE","\n    ",971],"{",["T_WHITESPACE","\n        ",972],["T_VARIABLE","$message",973],["T_WHITESPACE"," ",973],"=",["T_WHITESPACE"," ",973],["T_STRING","sprintf",973],"(",["T_CONSTANT_ENCAPSED_STRING","'There is no update for the payment. Transaction ID: \"%s\"'",973],",",["T_WHITESPACE"," ",973],["T_VARIABLE","$this",973],["T_OBJECT_OPERATOR","->",973],["T_STRING","transactionId",973],")",";",["T_WHITESPACE","\n\n        ",973],["T_VARIABLE","$storeId",975],["T_WHITESPACE"," ",975],"=",["T_WHITESPACE"," ",975],["T_LNUMBER","50",975],";",["T_WHITESPACE","\n        ",975],["T_VARIABLE","$orderState",976],["T_WHITESPACE"," ",976],"=",["T_WHITESPACE"," ",976],["T_CONSTANT_ENCAPSED_STRING","'random_state'",976],";",["T_WHITESPACE","\n\n        ",976],["T_VARIABLE","$this",978],["T_OBJECT_OPERATOR","->",978],["T_STRING","payment",978],["T_OBJECT_OPERATOR","->",978],["T_STRING","setLastTransId",978],"(",["T_VARIABLE","$this",978],["T_OBJECT_OPERATOR","->",978],["T_STRING","transactionId",978],")",";",["T_WHITESPACE","\n        ",978],["T_VARIABLE","$this",979],["T_OBJECT_OPERATOR","->",979],["T_STRING","payment",979],["T_OBJECT_OPERATOR","->",979],["T_STRING","setData",979],"(",["T_CONSTANT_ENCAPSED_STRING","'is_transaction_denied'",979],",",["T_WHITESPACE"," ",979],["T_STRING","false",979],")",";",["T_WHITESPACE","\n        ",979],["T_VARIABLE","$this",980],["T_OBJECT_OPERATOR","->",980],["T_STRING","payment",980],["T_OBJECT_OPERATOR","->",980],["T_STRING","setData",980],"(",["T_CONSTANT_ENCAPSED_STRING","'is_transaction_approved'",980],",",["T_WHITESPACE"," ",980],["T_STRING","false",980],")",";",["T_WHITESPACE","\n        ",980],["T_VARIABLE","$this",981],["T_OBJECT_OPERATOR","->",981],["T_STRING","payment",981],["T_OBJECT_OPERATOR","->",981],["T_STRING","setData",981],"(",["T_CONSTANT_ENCAPSED_STRING","'is_fraud_detected'",981],",",["T_WHITESPACE"," ",981],["T_VARIABLE","$isFraudDetected",981],")",";",["T_WHITESPACE","\n\n        ",981],["T_VARIABLE","$this",983],["T_OBJECT_OPERATOR","->",983],["T_STRING","mockInvoice",983],"(",["T_VARIABLE","$this",983],["T_OBJECT_OPERATOR","->",983],["T_STRING","transactionId",983],")",";",["T_WHITESPACE","\n\n        ",983],["T_VARIABLE","$this",985],["T_OBJECT_OPERATOR","->",985],["T_STRING","orderMock",985],["T_OBJECT_OPERATOR","->",985],["T_STRING","expects",985],"(",["T_VARIABLE","$this",985],["T_OBJECT_OPERATOR","->",985],["T_STRING","once",985],"(",")",")",["T_WHITESPACE","\n            ",985],["T_OBJECT_OPERATOR","->",986],["T_STRING","method",986],"(",["T_CONSTANT_ENCAPSED_STRING","'getState'",986],")",["T_WHITESPACE","\n            ",986],["T_OBJECT_OPERATOR","->",987],["T_STRING","willReturn",987],"(",["T_VARIABLE","$orderState",987],")",";",["T_WHITESPACE","\n\n        ",987],["T_VARIABLE","$this",989],["T_OBJECT_OPERATOR","->",989],["T_STRING","assertOrderUpdated",989],"(",["T_STRING","Order",989],["T_DOUBLE_COLON","::",989],["T_STRING","STATE_PAYMENT_REVIEW",989],",",["T_WHITESPACE"," ",989],["T_VARIABLE","$status",989],",",["T_WHITESPACE"," ",989],["T_VARIABLE","$message",989],")",";",["T_WHITESPACE","\n\n        ",989],["T_VARIABLE","$this",991],["T_OBJECT_OPERATOR","->",991],["T_STRING","orderMock",991],["T_OBJECT_OPERATOR","->",991],["T_STRING","expects",991],"(",["T_VARIABLE","$this",991],["T_OBJECT_OPERATOR","->",991],["T_STRING","once",991],"(",")",")",["T_WHITESPACE","\n            ",991],["T_OBJECT_OPERATOR","->",992],["T_STRING","method",992],"(",["T_CONSTANT_ENCAPSED_STRING","'getStoreId'",992],")",["T_WHITESPACE","\n            ",992],["T_OBJECT_OPERATOR","->",993],["T_STRING","willReturn",993],"(",["T_VARIABLE","$storeId",993],")",";",["T_WHITESPACE","\n        ",993],["T_VARIABLE","$this",994],["T_OBJECT_OPERATOR","->",994],["T_STRING","helperMock",994],["T_OBJECT_OPERATOR","->",994],["T_STRING","expects",994],"(",["T_VARIABLE","$this",994],["T_OBJECT_OPERATOR","->",994],["T_STRING","once",994],"(",")",")",["T_WHITESPACE","\n            ",994],["T_OBJECT_OPERATOR","->",995],["T_STRING","method",995],"(",["T_CONSTANT_ENCAPSED_STRING","'getMethodInstance'",995],")",["T_WHITESPACE","\n            ",995],["T_OBJECT_OPERATOR","->",996],["T_STRING","will",996],"(",["T_VARIABLE","$this",996],["T_OBJECT_OPERATOR","->",996],["T_STRING","returnValue",996],"(",["T_VARIABLE","$this",996],["T_OBJECT_OPERATOR","->",996],["T_STRING","paymentMethodMock",996],")",")",";",["T_WHITESPACE","\n        ",996],["T_VARIABLE","$this",997],["T_OBJECT_OPERATOR","->",997],["T_STRING","paymentMethodMock",997],["T_OBJECT_OPERATOR","->",997],["T_STRING","expects",997],"(",["T_VARIABLE","$this",997],["T_OBJECT_OPERATOR","->",997],["T_STRING","once",997],"(",")",")",["T_WHITESPACE","\n            ",997],["T_OBJECT_OPERATOR","->",998],["T_STRING","method",998],"(",["T_CONSTANT_ENCAPSED_STRING","'setStore'",998],")",["T_WHITESPACE","\n            ",998],["T_OBJECT_OPERATOR","->",999],["T_STRING","with",999],"(",["T_VARIABLE","$storeId",999],")",["T_WHITESPACE","\n            ",999],["T_OBJECT_OPERATOR","->",1000],["T_STRING","willReturn",1000],"(",["T_VARIABLE","$this",1000],["T_OBJECT_OPERATOR","->",1000],["T_STRING","paymentMethodMock",1000],")",";",["T_WHITESPACE","\n        ",1000],["T_VARIABLE","$this",1001],["T_OBJECT_OPERATOR","->",1001],["T_STRING","paymentMethodMock",1001],["T_OBJECT_OPERATOR","->",1001],["T_STRING","expects",1001],"(",["T_VARIABLE","$this",1001],["T_OBJECT_OPERATOR","->",1001],["T_STRING","once",1001],"(",")",")",["T_WHITESPACE","\n            ",1001],["T_OBJECT_OPERATOR","->",1002],["T_STRING","method",1002],"(",["T_CONSTANT_ENCAPSED_STRING","'fetchTransactionInfo'",1002],")",["T_WHITESPACE","\n            ",1002],["T_OBJECT_OPERATOR","->",1003],["T_STRING","with",1003],"(",["T_VARIABLE","$this",1003],["T_OBJECT_OPERATOR","->",1003],["T_STRING","payment",1003],",",["T_WHITESPACE"," ",1003],["T_VARIABLE","$this",1003],["T_OBJECT_OPERATOR","->",1003],["T_STRING","transactionId",1003],")",";",["T_WHITESPACE","\n\n        ",1003],["T_VARIABLE","$this",1005],["T_OBJECT_OPERATOR","->",1005],["T_STRING","payment",1005],["T_OBJECT_OPERATOR","->",1005],["T_STRING","update",1005],"(",")",";",["T_WHITESPACE","\n        ",1005],["T_VARIABLE","$this",1006],["T_OBJECT_OPERATOR","->",1006],["T_STRING","assertEquals",1006],"(",["T_VARIABLE","$this",1006],["T_OBJECT_OPERATOR","->",1006],["T_STRING","transactionId",1006],",",["T_WHITESPACE"," ",1006],["T_VARIABLE","$this",1006],["T_OBJECT_OPERATOR","->",1006],["T_STRING","payment",1006],["T_OBJECT_OPERATOR","->",1006],["T_STRING","getLastTransId",1006],"(",")",")",";",["T_WHITESPACE","\n    ",1006],"}",["T_WHITESPACE","\n\n    ",1007],["T_PUBLIC","public",1009],["T_WHITESPACE"," ",1009],["T_FUNCTION","function",1009],["T_WHITESPACE"," ",1009],["T_STRING","testUpdateOnlineTransactionDeniedFalseHistoryComment",1009],"(",")",["T_WHITESPACE","\n    ",1009],"{",["T_WHITESPACE","\n        ",1010],["T_VARIABLE","$message",1011],["T_WHITESPACE"," ",1011],"=",["T_WHITESPACE"," ",1011],["T_STRING","sprintf",1011],"(",["T_CONSTANT_ENCAPSED_STRING","'There is no update for the payment. Transaction ID: \"%s\"'",1011],",",["T_WHITESPACE"," ",1011],["T_VARIABLE","$this",1011],["T_OBJECT_OPERATOR","->",1011],["T_STRING","transactionId",1011],")",";",["T_WHITESPACE","\n\n        ",1011],["T_VARIABLE","$storeId",1013],["T_WHITESPACE"," ",1013],"=",["T_WHITESPACE"," ",1013],["T_LNUMBER","50",1013],";",["T_WHITESPACE","\n        ",1013],["T_VARIABLE","$orderState",1014],["T_WHITESPACE"," ",1014],"=",["T_WHITESPACE"," ",1014],["T_STRING","Order",1014],["T_DOUBLE_COLON","::",1014],["T_STRING","STATE_PAYMENT_REVIEW",1014],";",["T_WHITESPACE","\n\n        ",1014],["T_VARIABLE","$this",1016],["T_OBJECT_OPERATOR","->",1016],["T_STRING","payment",1016],["T_OBJECT_OPERATOR","->",1016],["T_STRING","setLastTransId",1016],"(",["T_VARIABLE","$this",1016],["T_OBJECT_OPERATOR","->",1016],["T_STRING","transactionId",1016],")",";",["T_WHITESPACE","\n        ",1016],["T_VARIABLE","$this",1017],["T_OBJECT_OPERATOR","->",1017],["T_STRING","payment",1017],["T_OBJECT_OPERATOR","->",1017],["T_STRING","setData",1017],"(",["T_CONSTANT_ENCAPSED_STRING","'is_transaction_denied'",1017],",",["T_WHITESPACE"," ",1017],["T_STRING","false",1017],")",";",["T_WHITESPACE","\n        ",1017],["T_VARIABLE","$this",1018],["T_OBJECT_OPERATOR","->",1018],["T_STRING","payment",1018],["T_OBJECT_OPERATOR","->",1018],["T_STRING","setData",1018],"(",["T_CONSTANT_ENCAPSED_STRING","'is_transaction_approved'",1018],",",["T_WHITESPACE"," ",1018],["T_STRING","false",1018],")",";",["T_WHITESPACE","\n\n        ",1018],["T_VARIABLE","$this",1020],["T_OBJECT_OPERATOR","->",1020],["T_STRING","mockInvoice",1020],"(",["T_VARIABLE","$this",1020],["T_OBJECT_OPERATOR","->",1020],["T_STRING","transactionId",1020],")",";",["T_WHITESPACE","\n\n        ",1020],["T_VARIABLE","$this",1022],["T_OBJECT_OPERATOR","->",1022],["T_STRING","orderMock",1022],["T_OBJECT_OPERATOR","->",1022],["T_STRING","expects",1022],"(",["T_VARIABLE","$this",1022],["T_OBJECT_OPERATOR","->",1022],["T_STRING","once",1022],"(",")",")",["T_WHITESPACE","\n            ",1022],["T_OBJECT_OPERATOR","->",1023],["T_STRING","method",1023],"(",["T_CONSTANT_ENCAPSED_STRING","'getState'",1023],")",["T_WHITESPACE","\n            ",1023],["T_OBJECT_OPERATOR","->",1024],["T_STRING","willReturn",1024],"(",["T_VARIABLE","$orderState",1024],")",";",["T_WHITESPACE","\n\n        ",1024],["T_VARIABLE","$this",1026],["T_OBJECT_OPERATOR","->",1026],["T_STRING","orderMock",1026],["T_OBJECT_OPERATOR","->",1026],["T_STRING","expects",1026],"(",["T_VARIABLE","$this",1026],["T_OBJECT_OPERATOR","->",1026],["T_STRING","never",1026],"(",")",")",["T_WHITESPACE","\n            ",1026],["T_OBJECT_OPERATOR","->",1027],["T_STRING","method",1027],"(",["T_CONSTANT_ENCAPSED_STRING","'setState'",1027],")",";",["T_WHITESPACE","\n\n        ",1027],["T_VARIABLE","$this",1029],["T_OBJECT_OPERATOR","->",1029],["T_STRING","orderMock",1029],["T_OBJECT_OPERATOR","->",1029],["T_STRING","expects",1029],"(",["T_VARIABLE","$this",1029],["T_OBJECT_OPERATOR","->",1029],["T_STRING","once",1029],"(",")",")",["T_WHITESPACE","\n            ",1029],["T_OBJECT_OPERATOR","->",1030],["T_STRING","method",1030],"(",["T_CONSTANT_ENCAPSED_STRING","'addStatusHistoryComment'",1030],")",["T_WHITESPACE","\n            ",1030],["T_OBJECT_OPERATOR","->",1031],["T_STRING","with",1031],"(",["T_VARIABLE","$message",1031],")",";",["T_WHITESPACE","\n\n        ",1031],["T_VARIABLE","$this",1033],["T_OBJECT_OPERATOR","->",1033],["T_STRING","orderMock",1033],["T_OBJECT_OPERATOR","->",1033],["T_STRING","expects",1033],"(",["T_VARIABLE","$this",1033],["T_OBJECT_OPERATOR","->",1033],["T_STRING","once",1033],"(",")",")",["T_WHITESPACE","\n            ",1033],["T_OBJECT_OPERATOR","->",1034],["T_STRING","method",1034],"(",["T_CONSTANT_ENCAPSED_STRING","'getStoreId'",1034],")",["T_WHITESPACE","\n            ",1034],["T_OBJECT_OPERATOR","->",1035],["T_STRING","willReturn",1035],"(",["T_VARIABLE","$storeId",1035],")",";",["T_WHITESPACE","\n        ",1035],["T_VARIABLE","$this",1036],["T_OBJECT_OPERATOR","->",1036],["T_STRING","helperMock",1036],["T_OBJECT_OPERATOR","->",1036],["T_STRING","expects",1036],"(",["T_VARIABLE","$this",1036],["T_OBJECT_OPERATOR","->",1036],["T_STRING","once",1036],"(",")",")",["T_WHITESPACE","\n            ",1036],["T_OBJECT_OPERATOR","->",1037],["T_STRING","method",1037],"(",["T_CONSTANT_ENCAPSED_STRING","'getMethodInstance'",1037],")",["T_WHITESPACE","\n            ",1037],["T_OBJECT_OPERATOR","->",1038],["T_STRING","will",1038],"(",["T_VARIABLE","$this",1038],["T_OBJECT_OPERATOR","->",1038],["T_STRING","returnValue",1038],"(",["T_VARIABLE","$this",1038],["T_OBJECT_OPERATOR","->",1038],["T_STRING","paymentMethodMock",1038],")",")",";",["T_WHITESPACE","\n        ",1038],["T_VARIABLE","$this",1039],["T_OBJECT_OPERATOR","->",1039],["T_STRING","paymentMethodMock",1039],["T_OBJECT_OPERATOR","->",1039],["T_STRING","expects",1039],"(",["T_VARIABLE","$this",1039],["T_OBJECT_OPERATOR","->",1039],["T_STRING","once",1039],"(",")",")",["T_WHITESPACE","\n            ",1039],["T_OBJECT_OPERATOR","->",1040],["T_STRING","method",1040],"(",["T_CONSTANT_ENCAPSED_STRING","'setStore'",1040],")",["T_WHITESPACE","\n            ",1040],["T_OBJECT_OPERATOR","->",1041],["T_STRING","with",1041],"(",["T_VARIABLE","$storeId",1041],")",["T_WHITESPACE","\n            ",1041],["T_OBJECT_OPERATOR","->",1042],["T_STRING","willReturn",1042],"(",["T_VARIABLE","$this",1042],["T_OBJECT_OPERATOR","->",1042],["T_STRING","paymentMethodMock",1042],")",";",["T_WHITESPACE","\n        ",1042],["T_VARIABLE","$this",1043],["T_OBJECT_OPERATOR","->",1043],["T_STRING","paymentMethodMock",1043],["T_OBJECT_OPERATOR","->",1043],["T_STRING","expects",1043],"(",["T_VARIABLE","$this",1043],["T_OBJECT_OPERATOR","->",1043],["T_STRING","once",1043],"(",")",")",["T_WHITESPACE","\n            ",1043],["T_OBJECT_OPERATOR","->",1044],["T_STRING","method",1044],"(",["T_CONSTANT_ENCAPSED_STRING","'fetchTransactionInfo'",1044],")",["T_WHITESPACE","\n            ",1044],["T_OBJECT_OPERATOR","->",1045],["T_STRING","with",1045],"(",["T_VARIABLE","$this",1045],["T_OBJECT_OPERATOR","->",1045],["T_STRING","payment",1045],",",["T_WHITESPACE"," ",1045],["T_VARIABLE","$this",1045],["T_OBJECT_OPERATOR","->",1045],["T_STRING","transactionId",1045],")",";",["T_WHITESPACE","\n\n        ",1045],["T_VARIABLE","$this",1047],["T_OBJECT_OPERATOR","->",1047],["T_STRING","payment",1047],["T_OBJECT_OPERATOR","->",1047],["T_STRING","update",1047],"(",")",";",["T_WHITESPACE","\n        ",1047],["T_VARIABLE","$this",1048],["T_OBJECT_OPERATOR","->",1048],["T_STRING","assertEquals",1048],"(",["T_VARIABLE","$this",1048],["T_OBJECT_OPERATOR","->",1048],["T_STRING","transactionId",1048],",",["T_WHITESPACE"," ",1048],["T_VARIABLE","$this",1048],["T_OBJECT_OPERATOR","->",1048],["T_STRING","payment",1048],["T_OBJECT_OPERATOR","->",1048],["T_STRING","getLastTransId",1048],"(",")",")",";",["T_WHITESPACE","\n    ",1048],"}",["T_WHITESPACE","\n\n    ",1049],["T_DOC_COMMENT","\/**\n     * @param int $transactionId\n     * @param float $baseGrandTotal\n     * @param string $message\n     *\/",1051],["T_WHITESPACE","\n    ",1055],["T_PROTECTED","protected",1056],["T_WHITESPACE"," ",1056],["T_FUNCTION","function",1056],["T_WHITESPACE"," ",1056],["T_STRING","mockResultTrueMethods",1056],"(",["T_VARIABLE","$transactionId",1056],",",["T_WHITESPACE"," ",1056],["T_VARIABLE","$baseGrandTotal",1056],",",["T_WHITESPACE"," ",1056],["T_VARIABLE","$message",1056],")",["T_WHITESPACE","\n    ",1056],"{",["T_WHITESPACE","\n        ",1057],["T_VARIABLE","$status",1058],["T_WHITESPACE"," ",1058],"=",["T_WHITESPACE"," ",1058],["T_CONSTANT_ENCAPSED_STRING","'status'",1058],";",["T_WHITESPACE","\n\n        ",1058],["T_VARIABLE","$this",1060],["T_OBJECT_OPERATOR","->",1060],["T_STRING","invoiceMock",1060],["T_OBJECT_OPERATOR","->",1060],["T_STRING","expects",1060],"(",["T_VARIABLE","$this",1060],["T_OBJECT_OPERATOR","->",1060],["T_STRING","once",1060],"(",")",")",["T_WHITESPACE","\n            ",1060],["T_OBJECT_OPERATOR","->",1061],["T_STRING","method",1061],"(",["T_CONSTANT_ENCAPSED_STRING","'pay'",1061],")",["T_WHITESPACE","\n            ",1061],["T_OBJECT_OPERATOR","->",1062],["T_STRING","willReturn",1062],"(",["T_VARIABLE","$transactionId",1062],")",";",["T_WHITESPACE","\n        ",1062],["T_VARIABLE","$this",1063],["T_OBJECT_OPERATOR","->",1063],["T_STRING","invoiceMock",1063],["T_OBJECT_OPERATOR","->",1063],["T_STRING","expects",1063],"(",["T_VARIABLE","$this",1063],["T_OBJECT_OPERATOR","->",1063],["T_STRING","once",1063],"(",")",")",["T_WHITESPACE","\n            ",1063],["T_OBJECT_OPERATOR","->",1064],["T_STRING","method",1064],"(",["T_CONSTANT_ENCAPSED_STRING","'getBaseGrandTotal'",1064],")",["T_WHITESPACE","\n            ",1064],["T_OBJECT_OPERATOR","->",1065],["T_STRING","willReturn",1065],"(",["T_VARIABLE","$baseGrandTotal",1065],")",";",["T_WHITESPACE","\n\n        ",1065],["T_COMMENT","\/\/acceptPayment = true\n",1067],["T_WHITESPACE","        ",1068],["T_VARIABLE","$this",1068],["T_OBJECT_OPERATOR","->",1068],["T_STRING","orderMock",1068],["T_OBJECT_OPERATOR","->",1068],["T_STRING","expects",1068],"(",["T_VARIABLE","$this",1068],["T_OBJECT_OPERATOR","->",1068],["T_STRING","once",1068],"(",")",")",["T_WHITESPACE","\n            ",1068],["T_OBJECT_OPERATOR","->",1069],["T_STRING","method",1069],"(",["T_CONSTANT_ENCAPSED_STRING","'addRelatedObject'",1069],")",["T_WHITESPACE","\n            ",1069],["T_OBJECT_OPERATOR","->",1070],["T_STRING","with",1070],"(",["T_VARIABLE","$this",1070],["T_OBJECT_OPERATOR","->",1070],["T_STRING","invoiceMock",1070],")",";",["T_WHITESPACE","\n\n        ",1070],["T_VARIABLE","$this",1072],["T_OBJECT_OPERATOR","->",1072],["T_STRING","mockGetDefaultStatus",1072],"(",["T_STRING","Order",1072],["T_DOUBLE_COLON","::",1072],["T_STRING","STATE_PROCESSING",1072],",",["T_WHITESPACE"," ",1072],["T_VARIABLE","$status",1072],")",";",["T_WHITESPACE","\n        ",1072],["T_VARIABLE","$this",1073],["T_OBJECT_OPERATOR","->",1073],["T_STRING","assertOrderUpdated",1073],"(",["T_STRING","Order",1073],["T_DOUBLE_COLON","::",1073],["T_STRING","STATE_PROCESSING",1073],",",["T_WHITESPACE"," ",1073],["T_VARIABLE","$status",1073],",",["T_WHITESPACE"," ",1073],["T_VARIABLE","$message",1073],")",";",["T_WHITESPACE","\n    ",1073],"}",["T_WHITESPACE","\n\n    ",1074],["T_DOC_COMMENT","\/**\n     * @param $message\n     *\/",1076],["T_WHITESPACE","\n    ",1078],["T_PROTECTED","protected",1079],["T_WHITESPACE"," ",1079],["T_FUNCTION","function",1079],["T_WHITESPACE"," ",1079],["T_STRING","mockResultFalseMethods",1079],"(",["T_VARIABLE","$message",1079],")",["T_WHITESPACE","\n    ",1079],"{",["T_WHITESPACE","\n        ",1080],["T_VARIABLE","$this",1081],["T_OBJECT_OPERATOR","->",1081],["T_STRING","invoiceMock",1081],["T_OBJECT_OPERATOR","->",1081],["T_STRING","expects",1081],"(",["T_VARIABLE","$this",1081],["T_OBJECT_OPERATOR","->",1081],["T_STRING","once",1081],"(",")",")",["T_WHITESPACE","\n            ",1081],["T_OBJECT_OPERATOR","->",1082],["T_STRING","method",1082],"(",["T_CONSTANT_ENCAPSED_STRING","'cancel'",1082],")",";",["T_WHITESPACE","\n        ",1082],["T_VARIABLE","$this",1083],["T_OBJECT_OPERATOR","->",1083],["T_STRING","orderMock",1083],["T_OBJECT_OPERATOR","->",1083],["T_STRING","expects",1083],"(",["T_VARIABLE","$this",1083],["T_OBJECT_OPERATOR","->",1083],["T_STRING","once",1083],"(",")",")",["T_WHITESPACE","\n            ",1083],["T_OBJECT_OPERATOR","->",1084],["T_STRING","method",1084],"(",["T_CONSTANT_ENCAPSED_STRING","'addRelatedObject'",1084],")",["T_WHITESPACE","\n            ",1084],["T_OBJECT_OPERATOR","->",1085],["T_STRING","with",1085],"(",["T_VARIABLE","$this",1085],["T_OBJECT_OPERATOR","->",1085],["T_STRING","invoiceMock",1085],")",";",["T_WHITESPACE","\n        ",1085],["T_VARIABLE","$this",1086],["T_OBJECT_OPERATOR","->",1086],["T_STRING","orderMock",1086],["T_OBJECT_OPERATOR","->",1086],["T_STRING","expects",1086],"(",["T_VARIABLE","$this",1086],["T_OBJECT_OPERATOR","->",1086],["T_STRING","once",1086],"(",")",")",["T_WHITESPACE","\n            ",1086],["T_OBJECT_OPERATOR","->",1087],["T_STRING","method",1087],"(",["T_CONSTANT_ENCAPSED_STRING","'registerCancellation'",1087],")",["T_WHITESPACE","\n            ",1087],["T_OBJECT_OPERATOR","->",1088],["T_STRING","with",1088],"(",["T_VARIABLE","$message",1088],",",["T_WHITESPACE"," ",1088],["T_STRING","false",1088],")",";",["T_WHITESPACE","\n    ",1088],"}",["T_WHITESPACE","\n\n    ",1089],["T_PUBLIC","public",1091],["T_WHITESPACE"," ",1091],["T_FUNCTION","function",1091],["T_WHITESPACE"," ",1091],["T_STRING","testAcceptWithoutInvoiceResultTrue",1091],"(",")",["T_WHITESPACE","\n    ",1091],"{",["T_WHITESPACE","\n        ",1092],["T_VARIABLE","$baseGrandTotal",1093],["T_WHITESPACE"," ",1093],"=",["T_WHITESPACE"," ",1093],["T_STRING","null",1093],";",["T_WHITESPACE","\n        ",1093],["T_VARIABLE","$acceptPayment",1094],["T_WHITESPACE"," ",1094],"=",["T_WHITESPACE"," ",1094],["T_STRING","true",1094],";",["T_WHITESPACE","\n\n        ",1094],["T_VARIABLE","$this",1096],["T_OBJECT_OPERATOR","->",1096],["T_STRING","payment",1096],["T_OBJECT_OPERATOR","->",1096],["T_STRING","setData",1096],"(",["T_CONSTANT_ENCAPSED_STRING","'transaction_id'",1096],",",["T_WHITESPACE"," ",1096],["T_VARIABLE","$this",1096],["T_OBJECT_OPERATOR","->",1096],["T_STRING","transactionId",1096],")",";",["T_WHITESPACE","\n\n        ",1096],["T_VARIABLE","$this",1098],["T_OBJECT_OPERATOR","->",1098],["T_STRING","invoiceMock",1098],["T_OBJECT_OPERATOR","->",1098],["T_STRING","expects",1098],"(",["T_VARIABLE","$this",1098],["T_OBJECT_OPERATOR","->",1098],["T_STRING","never",1098],"(",")",")",["T_WHITESPACE","\n            ",1098],["T_OBJECT_OPERATOR","->",1099],["T_STRING","method",1099],"(",["T_CONSTANT_ENCAPSED_STRING","'pay'",1099],")",";",["T_WHITESPACE","\n\n        ",1099],["T_VARIABLE","$this",1101],["T_OBJECT_OPERATOR","->",1101],["T_STRING","orderMock",1101],["T_OBJECT_OPERATOR","->",1101],["T_STRING","expects",1101],"(",["T_VARIABLE","$this",1101],["T_OBJECT_OPERATOR","->",1101],["T_STRING","any",1101],"(",")",")",["T_WHITESPACE","\n            ",1101],["T_OBJECT_OPERATOR","->",1102],["T_STRING","method",1102],"(",["T_CONSTANT_ENCAPSED_STRING","'getInvoiceCollection'",1102],")",["T_WHITESPACE","\n            ",1102],["T_OBJECT_OPERATOR","->",1103],["T_STRING","willReturn",1103],"(","[","]",")",";",["T_WHITESPACE","\n\n        ",1103],["T_VARIABLE","$this",1105],["T_OBJECT_OPERATOR","->",1105],["T_STRING","helperMock",1105],["T_OBJECT_OPERATOR","->",1105],["T_STRING","expects",1105],"(",["T_VARIABLE","$this",1105],["T_OBJECT_OPERATOR","->",1105],["T_STRING","once",1105],"(",")",")",["T_WHITESPACE","\n            ",1105],["T_OBJECT_OPERATOR","->",1106],["T_STRING","method",1106],"(",["T_CONSTANT_ENCAPSED_STRING","'getMethodInstance'",1106],")",["T_WHITESPACE","\n            ",1106],["T_OBJECT_OPERATOR","->",1107],["T_STRING","will",1107],"(",["T_VARIABLE","$this",1107],["T_OBJECT_OPERATOR","->",1107],["T_STRING","returnValue",1107],"(",["T_VARIABLE","$this",1107],["T_OBJECT_OPERATOR","->",1107],["T_STRING","paymentMethodMock",1107],")",")",";",["T_WHITESPACE","\n\n        ",1107],["T_VARIABLE","$this",1109],["T_OBJECT_OPERATOR","->",1109],["T_STRING","paymentMethodMock",1109],["T_OBJECT_OPERATOR","->",1109],["T_STRING","expects",1109],"(",["T_VARIABLE","$this",1109],["T_OBJECT_OPERATOR","->",1109],["T_STRING","once",1109],"(",")",")",["T_WHITESPACE","\n            ",1109],["T_OBJECT_OPERATOR","->",1110],["T_STRING","method",1110],"(",["T_CONSTANT_ENCAPSED_STRING","'setStore'",1110],")",["T_WHITESPACE","\n            ",1110],["T_OBJECT_OPERATOR","->",1111],["T_STRING","will",1111],"(",["T_VARIABLE","$this",1111],["T_OBJECT_OPERATOR","->",1111],["T_STRING","returnSelf",1111],"(",")",")",";",["T_WHITESPACE","\n\n        ",1111],["T_VARIABLE","$this",1113],["T_OBJECT_OPERATOR","->",1113],["T_STRING","paymentMethodMock",1113],["T_OBJECT_OPERATOR","->",1113],["T_STRING","expects",1113],"(",["T_VARIABLE","$this",1113],["T_OBJECT_OPERATOR","->",1113],["T_STRING","once",1113],"(",")",")",["T_WHITESPACE","\n            ",1113],["T_OBJECT_OPERATOR","->",1114],["T_STRING","method",1114],"(",["T_CONSTANT_ENCAPSED_STRING","'acceptPayment'",1114],")",["T_WHITESPACE","\n            ",1114],["T_OBJECT_OPERATOR","->",1115],["T_STRING","with",1115],"(",["T_VARIABLE","$this",1115],["T_OBJECT_OPERATOR","->",1115],["T_STRING","payment",1115],")",["T_WHITESPACE","\n            ",1115],["T_OBJECT_OPERATOR","->",1116],["T_STRING","willReturn",1116],"(",["T_VARIABLE","$acceptPayment",1116],")",";",["T_WHITESPACE","\n\n        ",1116],["T_VARIABLE","$status",1118],["T_WHITESPACE"," ",1118],"=",["T_WHITESPACE"," ",1118],["T_CONSTANT_ENCAPSED_STRING","'status'",1118],";",["T_WHITESPACE","\n        ",1118],["T_VARIABLE","$this",1119],["T_OBJECT_OPERATOR","->",1119],["T_STRING","mockGetDefaultStatus",1119],"(",["T_STRING","Order",1119],["T_DOUBLE_COLON","::",1119],["T_STRING","STATE_PROCESSING",1119],",",["T_WHITESPACE"," ",1119],["T_VARIABLE","$status",1119],")",";",["T_WHITESPACE","\n        ",1119],["T_VARIABLE","$this",1120],["T_OBJECT_OPERATOR","->",1120],["T_STRING","assertOrderUpdated",1120],"(",["T_STRING","Order",1120],["T_DOUBLE_COLON","::",1120],["T_STRING","STATE_PROCESSING",1120],",",["T_WHITESPACE"," ",1120],["T_VARIABLE","$status",1120],",",["T_WHITESPACE"," ",1120],["T_STRING","__",1120],"(",["T_CONSTANT_ENCAPSED_STRING","'Approved the payment online.'",1120],")",")",";",["T_WHITESPACE","\n\n        ",1120],["T_VARIABLE","$this",1122],["T_OBJECT_OPERATOR","->",1122],["T_STRING","payment",1122],["T_OBJECT_OPERATOR","->",1122],["T_STRING","accept",1122],"(",")",";",["T_WHITESPACE","\n        ",1122],["T_VARIABLE","$this",1123],["T_OBJECT_OPERATOR","->",1123],["T_STRING","assertEquals",1123],"(",["T_VARIABLE","$baseGrandTotal",1123],",",["T_WHITESPACE"," ",1123],["T_VARIABLE","$this",1123],["T_OBJECT_OPERATOR","->",1123],["T_STRING","payment",1123],["T_OBJECT_OPERATOR","->",1123],["T_STRING","getBaseAmountPaidOnline",1123],"(",")",")",";",["T_WHITESPACE","\n    ",1123],"}",["T_WHITESPACE","\n\n    ",1124],["T_PUBLIC","public",1126],["T_WHITESPACE"," ",1126],["T_FUNCTION","function",1126],["T_WHITESPACE"," ",1126],["T_STRING","testDenyWithoutInvoiceResultFalse",1126],"(",")",["T_WHITESPACE","\n    ",1126],"{",["T_WHITESPACE","\n        ",1127],["T_VARIABLE","$baseGrandTotal",1128],["T_WHITESPACE"," ",1128],"=",["T_WHITESPACE"," ",1128],["T_STRING","null",1128],";",["T_WHITESPACE","\n        ",1128],["T_VARIABLE","$denyPayment",1129],["T_WHITESPACE"," ",1129],"=",["T_WHITESPACE"," ",1129],["T_STRING","true",1129],";",["T_WHITESPACE","\n\n        ",1129],["T_VARIABLE","$this",1131],["T_OBJECT_OPERATOR","->",1131],["T_STRING","payment",1131],["T_OBJECT_OPERATOR","->",1131],["T_STRING","setData",1131],"(",["T_CONSTANT_ENCAPSED_STRING","'transaction_id'",1131],",",["T_WHITESPACE"," ",1131],["T_VARIABLE","$this",1131],["T_OBJECT_OPERATOR","->",1131],["T_STRING","transactionId",1131],")",";",["T_WHITESPACE","\n\n        ",1131],["T_VARIABLE","$this",1133],["T_OBJECT_OPERATOR","->",1133],["T_STRING","invoiceMock",1133],["T_OBJECT_OPERATOR","->",1133],["T_STRING","expects",1133],"(",["T_VARIABLE","$this",1133],["T_OBJECT_OPERATOR","->",1133],["T_STRING","never",1133],"(",")",")",["T_WHITESPACE","\n            ",1133],["T_OBJECT_OPERATOR","->",1134],["T_STRING","method",1134],"(",["T_CONSTANT_ENCAPSED_STRING","'cancel'",1134],")",";",["T_WHITESPACE","\n\n        ",1134],["T_VARIABLE","$this",1136],["T_OBJECT_OPERATOR","->",1136],["T_STRING","orderMock",1136],["T_OBJECT_OPERATOR","->",1136],["T_STRING","expects",1136],"(",["T_VARIABLE","$this",1136],["T_OBJECT_OPERATOR","->",1136],["T_STRING","any",1136],"(",")",")",["T_WHITESPACE","\n            ",1136],["T_OBJECT_OPERATOR","->",1137],["T_STRING","method",1137],"(",["T_CONSTANT_ENCAPSED_STRING","'getInvoiceCollection'",1137],")",["T_WHITESPACE","\n            ",1137],["T_OBJECT_OPERATOR","->",1138],["T_STRING","willReturn",1138],"(","[","]",")",";",["T_WHITESPACE","\n\n        ",1138],["T_VARIABLE","$this",1140],["T_OBJECT_OPERATOR","->",1140],["T_STRING","helperMock",1140],["T_OBJECT_OPERATOR","->",1140],["T_STRING","expects",1140],"(",["T_VARIABLE","$this",1140],["T_OBJECT_OPERATOR","->",1140],["T_STRING","once",1140],"(",")",")",["T_WHITESPACE","\n            ",1140],["T_OBJECT_OPERATOR","->",1141],["T_STRING","method",1141],"(",["T_CONSTANT_ENCAPSED_STRING","'getMethodInstance'",1141],")",["T_WHITESPACE","\n            ",1141],["T_OBJECT_OPERATOR","->",1142],["T_STRING","will",1142],"(",["T_VARIABLE","$this",1142],["T_OBJECT_OPERATOR","->",1142],["T_STRING","returnValue",1142],"(",["T_VARIABLE","$this",1142],["T_OBJECT_OPERATOR","->",1142],["T_STRING","paymentMethodMock",1142],")",")",";",["T_WHITESPACE","\n\n        ",1142],["T_VARIABLE","$this",1144],["T_OBJECT_OPERATOR","->",1144],["T_STRING","paymentMethodMock",1144],["T_OBJECT_OPERATOR","->",1144],["T_STRING","expects",1144],"(",["T_VARIABLE","$this",1144],["T_OBJECT_OPERATOR","->",1144],["T_STRING","once",1144],"(",")",")",["T_WHITESPACE","\n            ",1144],["T_OBJECT_OPERATOR","->",1145],["T_STRING","method",1145],"(",["T_CONSTANT_ENCAPSED_STRING","'setStore'",1145],")",["T_WHITESPACE","\n            ",1145],["T_OBJECT_OPERATOR","->",1146],["T_STRING","will",1146],"(",["T_VARIABLE","$this",1146],["T_OBJECT_OPERATOR","->",1146],["T_STRING","returnSelf",1146],"(",")",")",";",["T_WHITESPACE","\n\n        ",1146],["T_VARIABLE","$this",1148],["T_OBJECT_OPERATOR","->",1148],["T_STRING","paymentMethodMock",1148],["T_OBJECT_OPERATOR","->",1148],["T_STRING","expects",1148],"(",["T_VARIABLE","$this",1148],["T_OBJECT_OPERATOR","->",1148],["T_STRING","once",1148],"(",")",")",["T_WHITESPACE","\n            ",1148],["T_OBJECT_OPERATOR","->",1149],["T_STRING","method",1149],"(",["T_CONSTANT_ENCAPSED_STRING","'denyPayment'",1149],")",["T_WHITESPACE","\n            ",1149],["T_OBJECT_OPERATOR","->",1150],["T_STRING","with",1150],"(",["T_VARIABLE","$this",1150],["T_OBJECT_OPERATOR","->",1150],["T_STRING","payment",1150],")",["T_WHITESPACE","\n            ",1150],["T_OBJECT_OPERATOR","->",1151],["T_STRING","willReturn",1151],"(",["T_VARIABLE","$denyPayment",1151],")",";",["T_WHITESPACE","\n\n        ",1151],["T_VARIABLE","$status",1153],["T_WHITESPACE"," ",1153],"=",["T_WHITESPACE"," ",1153],["T_CONSTANT_ENCAPSED_STRING","'status'",1153],";",["T_WHITESPACE","\n        ",1153],["T_VARIABLE","$this",1154],["T_OBJECT_OPERATOR","->",1154],["T_STRING","mockGetDefaultStatus",1154],"(",["T_STRING","Order",1154],["T_DOUBLE_COLON","::",1154],["T_STRING","STATE_PROCESSING",1154],",",["T_WHITESPACE"," ",1154],["T_VARIABLE","$status",1154],")",";",["T_WHITESPACE","\n        ",1154],["T_VARIABLE","$this",1155],["T_OBJECT_OPERATOR","->",1155],["T_STRING","assertOrderUpdated",1155],"(",["T_STRING","Order",1155],["T_DOUBLE_COLON","::",1155],["T_STRING","STATE_PROCESSING",1155],",",["T_WHITESPACE"," ",1155],["T_VARIABLE","$status",1155],",",["T_WHITESPACE"," ",1155],["T_STRING","__",1155],"(",["T_CONSTANT_ENCAPSED_STRING","'Denied the payment online'",1155],")",")",";",["T_WHITESPACE","\n\n        ",1155],["T_VARIABLE","$this",1157],["T_OBJECT_OPERATOR","->",1157],["T_STRING","payment",1157],["T_OBJECT_OPERATOR","->",1157],["T_STRING","deny",1157],"(",")",";",["T_WHITESPACE","\n        ",1157],["T_VARIABLE","$this",1158],["T_OBJECT_OPERATOR","->",1158],["T_STRING","assertEquals",1158],"(",["T_VARIABLE","$baseGrandTotal",1158],",",["T_WHITESPACE"," ",1158],["T_VARIABLE","$this",1158],["T_OBJECT_OPERATOR","->",1158],["T_STRING","payment",1158],["T_OBJECT_OPERATOR","->",1158],["T_STRING","getBaseAmountPaidOnline",1158],"(",")",")",";",["T_WHITESPACE","\n    ",1158],"}",["T_WHITESPACE","\n\n    ",1159],["T_PUBLIC","public",1161],["T_WHITESPACE"," ",1161],["T_FUNCTION","function",1161],["T_WHITESPACE"," ",1161],["T_STRING","testCanCaptureNoAuthorizationTransaction",1161],"(",")",["T_WHITESPACE","\n    ",1161],"{",["T_WHITESPACE","\n        ",1162],["T_VARIABLE","$this",1163],["T_OBJECT_OPERATOR","->",1163],["T_STRING","paymentMethodMock",1163],["T_OBJECT_OPERATOR","->",1163],["T_STRING","expects",1163],"(",["T_VARIABLE","$this",1163],["T_OBJECT_OPERATOR","->",1163],["T_STRING","once",1163],"(",")",")",["T_WHITESPACE","\n            ",1163],["T_OBJECT_OPERATOR","->",1164],["T_STRING","method",1164],"(",["T_CONSTANT_ENCAPSED_STRING","'canCapture'",1164],")",["T_WHITESPACE","\n            ",1164],["T_OBJECT_OPERATOR","->",1165],["T_STRING","willReturn",1165],"(",["T_STRING","true",1165],")",";",["T_WHITESPACE","\n        ",1165],["T_VARIABLE","$this",1166],["T_OBJECT_OPERATOR","->",1166],["T_STRING","assertTrue",1166],"(",["T_VARIABLE","$this",1166],["T_OBJECT_OPERATOR","->",1166],["T_STRING","payment",1166],["T_OBJECT_OPERATOR","->",1166],["T_STRING","canCapture",1166],"(",")",")",";",["T_WHITESPACE","\n    ",1166],"}",["T_WHITESPACE","\n\n    ",1167],["T_PUBLIC","public",1169],["T_WHITESPACE"," ",1169],["T_FUNCTION","function",1169],["T_WHITESPACE"," ",1169],["T_STRING","testCanCaptureCreateTransaction",1169],"(",")",["T_WHITESPACE","\n    ",1169],"{",["T_WHITESPACE","\n        ",1170],["T_VARIABLE","$this",1171],["T_OBJECT_OPERATOR","->",1171],["T_STRING","paymentMethodMock",1171],["T_OBJECT_OPERATOR","->",1171],["T_STRING","expects",1171],"(",["T_VARIABLE","$this",1171],["T_OBJECT_OPERATOR","->",1171],["T_STRING","once",1171],"(",")",")",["T_WHITESPACE","\n            ",1171],["T_OBJECT_OPERATOR","->",1172],["T_STRING","method",1172],"(",["T_CONSTANT_ENCAPSED_STRING","'canCapture'",1172],")",["T_WHITESPACE","\n            ",1172],["T_OBJECT_OPERATOR","->",1173],["T_STRING","willReturn",1173],"(",["T_STRING","true",1173],")",";",["T_WHITESPACE","\n\n        ",1173],["T_VARIABLE","$parentTransactionId",1175],["T_WHITESPACE"," ",1175],"=",["T_WHITESPACE"," ",1175],["T_LNUMBER","1",1175],";",["T_WHITESPACE","\n        ",1175],["T_VARIABLE","$paymentId",1176],["T_WHITESPACE"," ",1176],"=",["T_WHITESPACE"," ",1176],["T_LNUMBER","22",1176],";",["T_WHITESPACE","\n        ",1176],["T_VARIABLE","$this",1177],["T_OBJECT_OPERATOR","->",1177],["T_STRING","payment",1177],["T_OBJECT_OPERATOR","->",1177],["T_STRING","setId",1177],"(",["T_VARIABLE","$paymentId",1177],")",";",["T_WHITESPACE","\n        ",1177],["T_VARIABLE","$this",1178],["T_OBJECT_OPERATOR","->",1178],["T_STRING","payment",1178],["T_OBJECT_OPERATOR","->",1178],["T_STRING","setParentTransactionId",1178],"(",["T_VARIABLE","$parentTransactionId",1178],")",";",["T_WHITESPACE","\n\n        ",1178],["T_VARIABLE","$transaction",1180],["T_WHITESPACE"," ",1180],"=",["T_WHITESPACE"," ",1180],["T_VARIABLE","$this",1180],["T_OBJECT_OPERATOR","->",1180],["T_STRING","getMock",1180],"(",["T_NS_SEPARATOR","\\",1180],["T_STRING","Magento",1180],["T_NS_SEPARATOR","\\",1180],["T_STRING","Sales",1180],["T_NS_SEPARATOR","\\",1180],["T_STRING","Model",1180],["T_NS_SEPARATOR","\\",1180],["T_STRING","Order",1180],["T_NS_SEPARATOR","\\",1180],["T_STRING","Payment",1180],["T_NS_SEPARATOR","\\",1180],["T_STRING","Transaction",1180],["T_DOUBLE_COLON","::",1180],["T_CLASS","class",1180],",",["T_WHITESPACE"," ",1180],"[","]",",",["T_WHITESPACE"," ",1180],"[","]",",",["T_WHITESPACE"," ",1180],["T_CONSTANT_ENCAPSED_STRING","''",1180],",",["T_WHITESPACE"," ",1180],["T_STRING","false",1180],")",";",["T_WHITESPACE","\n        ",1180],["T_VARIABLE","$transaction",1181],["T_OBJECT_OPERATOR","->",1181],["T_STRING","expects",1181],"(",["T_VARIABLE","$this",1181],["T_OBJECT_OPERATOR","->",1181],["T_STRING","once",1181],"(",")",")",["T_WHITESPACE","\n            ",1181],["T_OBJECT_OPERATOR","->",1182],["T_STRING","method",1182],"(",["T_CONSTANT_ENCAPSED_STRING","'getIsClosed'",1182],")",["T_WHITESPACE","\n            ",1182],["T_OBJECT_OPERATOR","->",1183],["T_STRING","willReturn",1183],"(",["T_STRING","false",1183],")",";",["T_WHITESPACE","\n        ",1183],["T_VARIABLE","$this",1184],["T_OBJECT_OPERATOR","->",1184],["T_STRING","transactionManagerMock",1184],["T_OBJECT_OPERATOR","->",1184],["T_STRING","expects",1184],"(",["T_VARIABLE","$this",1184],["T_OBJECT_OPERATOR","->",1184],["T_STRING","once",1184],"(",")",")",["T_WHITESPACE","\n            ",1184],["T_OBJECT_OPERATOR","->",1185],["T_STRING","method",1185],"(",["T_CONSTANT_ENCAPSED_STRING","'getAuthorizationTransaction'",1185],")",["T_WHITESPACE","\n            ",1185],["T_OBJECT_OPERATOR","->",1186],["T_STRING","with",1186],"(",["T_VARIABLE","$parentTransactionId",1186],",",["T_WHITESPACE"," ",1186],["T_VARIABLE","$paymentId",1186],")",["T_WHITESPACE","\n            ",1186],["T_OBJECT_OPERATOR","->",1187],["T_STRING","willReturn",1187],"(",["T_VARIABLE","$transaction",1187],")",";",["T_WHITESPACE","\n\n        ",1187],["T_VARIABLE","$this",1189],["T_OBJECT_OPERATOR","->",1189],["T_STRING","assertTrue",1189],"(",["T_VARIABLE","$this",1189],["T_OBJECT_OPERATOR","->",1189],["T_STRING","payment",1189],["T_OBJECT_OPERATOR","->",1189],["T_STRING","canCapture",1189],"(",")",")",";",["T_WHITESPACE","\n    ",1189],"}",["T_WHITESPACE","\n\n    ",1190],["T_PUBLIC","public",1192],["T_WHITESPACE"," ",1192],["T_FUNCTION","function",1192],["T_WHITESPACE"," ",1192],["T_STRING","testCanCaptureAuthorizationTransaction",1192],"(",")",["T_WHITESPACE","\n    ",1192],"{",["T_WHITESPACE","\n        ",1193],["T_VARIABLE","$paymentId",1194],["T_WHITESPACE"," ",1194],"=",["T_WHITESPACE"," ",1194],["T_LNUMBER","1",1194],";",["T_WHITESPACE","\n        ",1194],["T_VARIABLE","$parentTransactionId",1195],["T_WHITESPACE"," ",1195],"=",["T_WHITESPACE"," ",1195],["T_LNUMBER","1",1195],";",["T_WHITESPACE","\n        ",1195],["T_VARIABLE","$this",1196],["T_OBJECT_OPERATOR","->",1196],["T_STRING","payment",1196],["T_OBJECT_OPERATOR","->",1196],["T_STRING","setParentTransactionId",1196],"(",["T_VARIABLE","$parentTransactionId",1196],")",";",["T_WHITESPACE","\n        ",1196],["T_VARIABLE","$this",1197],["T_OBJECT_OPERATOR","->",1197],["T_STRING","payment",1197],["T_OBJECT_OPERATOR","->",1197],["T_STRING","setId",1197],"(",["T_VARIABLE","$paymentId",1197],")",";",["T_WHITESPACE","\n        ",1197],["T_VARIABLE","$this",1198],["T_OBJECT_OPERATOR","->",1198],["T_STRING","paymentMethodMock",1198],["T_OBJECT_OPERATOR","->",1198],["T_STRING","expects",1198],"(",["T_VARIABLE","$this",1198],["T_OBJECT_OPERATOR","->",1198],["T_STRING","once",1198],"(",")",")",["T_WHITESPACE","\n            ",1198],["T_OBJECT_OPERATOR","->",1199],["T_STRING","method",1199],"(",["T_CONSTANT_ENCAPSED_STRING","'canCapture'",1199],")",["T_WHITESPACE","\n            ",1199],["T_OBJECT_OPERATOR","->",1200],["T_STRING","willReturn",1200],"(",["T_STRING","true",1200],")",";",["T_WHITESPACE","\n        ",1200],["T_VARIABLE","$transaction",1201],["T_WHITESPACE"," ",1201],"=",["T_WHITESPACE"," ",1201],["T_VARIABLE","$this",1201],["T_OBJECT_OPERATOR","->",1201],["T_STRING","getMock",1201],"(",["T_NS_SEPARATOR","\\",1201],["T_STRING","Magento",1201],["T_NS_SEPARATOR","\\",1201],["T_STRING","Sales",1201],["T_NS_SEPARATOR","\\",1201],["T_STRING","Model",1201],["T_NS_SEPARATOR","\\",1201],["T_STRING","Order",1201],["T_NS_SEPARATOR","\\",1201],["T_STRING","Payment",1201],["T_NS_SEPARATOR","\\",1201],["T_STRING","Transaction",1201],["T_DOUBLE_COLON","::",1201],["T_CLASS","class",1201],",",["T_WHITESPACE"," ",1201],"[","]",",",["T_WHITESPACE"," ",1201],"[","]",",",["T_WHITESPACE"," ",1201],["T_CONSTANT_ENCAPSED_STRING","''",1201],",",["T_WHITESPACE"," ",1201],["T_STRING","false",1201],")",";",["T_WHITESPACE","\n        ",1201],["T_VARIABLE","$this",1202],["T_OBJECT_OPERATOR","->",1202],["T_STRING","transactionManagerMock",1202],["T_OBJECT_OPERATOR","->",1202],["T_STRING","expects",1202],"(",["T_VARIABLE","$this",1202],["T_OBJECT_OPERATOR","->",1202],["T_STRING","once",1202],"(",")",")",["T_WHITESPACE","\n            ",1202],["T_OBJECT_OPERATOR","->",1203],["T_STRING","method",1203],"(",["T_CONSTANT_ENCAPSED_STRING","'getAuthorizationTransaction'",1203],")",["T_WHITESPACE","\n            ",1203],["T_OBJECT_OPERATOR","->",1204],["T_STRING","with",1204],"(",["T_VARIABLE","$parentTransactionId",1204],",",["T_WHITESPACE"," ",1204],["T_VARIABLE","$paymentId",1204],")",["T_WHITESPACE","\n            ",1204],["T_OBJECT_OPERATOR","->",1205],["T_STRING","willReturn",1205],"(",["T_VARIABLE","$transaction",1205],")",";",["T_WHITESPACE","\n        ",1205],["T_VARIABLE","$transaction",1206],["T_OBJECT_OPERATOR","->",1206],["T_STRING","expects",1206],"(",["T_VARIABLE","$this",1206],["T_OBJECT_OPERATOR","->",1206],["T_STRING","once",1206],"(",")",")",["T_OBJECT_OPERATOR","->",1206],["T_STRING","method",1206],"(",["T_CONSTANT_ENCAPSED_STRING","'getIsClosed'",1206],")",["T_OBJECT_OPERATOR","->",1206],["T_STRING","willReturn",1206],"(",["T_STRING","true",1206],")",";",["T_WHITESPACE","\n\n        ",1206],["T_VARIABLE","$this",1208],["T_OBJECT_OPERATOR","->",1208],["T_STRING","transactionRepositoryMock",1208],["T_OBJECT_OPERATOR","->",1208],["T_STRING","expects",1208],"(",["T_VARIABLE","$this",1208],["T_OBJECT_OPERATOR","->",1208],["T_STRING","once",1208],"(",")",")",["T_WHITESPACE","\n            ",1208],["T_OBJECT_OPERATOR","->",1209],["T_STRING","method",1209],"(",["T_CONSTANT_ENCAPSED_STRING","'getByTransactionType'",1209],")",["T_WHITESPACE","\n            ",1209],["T_OBJECT_OPERATOR","->",1210],["T_STRING","with",1210],"(",["T_STRING","Transaction",1210],["T_DOUBLE_COLON","::",1210],["T_STRING","TYPE_ORDER",1210],",",["T_WHITESPACE"," ",1210],["T_VARIABLE","$paymentId",1210],")",["T_WHITESPACE","\n            ",1210],["T_OBJECT_OPERATOR","->",1211],["T_STRING","willReturn",1211],"(",["T_VARIABLE","$transaction",1211],")",";",["T_WHITESPACE","\n\n        ",1211],["T_VARIABLE","$this",1213],["T_OBJECT_OPERATOR","->",1213],["T_STRING","assertTrue",1213],"(",["T_VARIABLE","$this",1213],["T_OBJECT_OPERATOR","->",1213],["T_STRING","payment",1213],["T_OBJECT_OPERATOR","->",1213],["T_STRING","canCapture",1213],"(",")",")",";",["T_WHITESPACE","\n    ",1213],"}",["T_WHITESPACE","\n\n    ",1214],["T_PUBLIC","public",1216],["T_WHITESPACE"," ",1216],["T_FUNCTION","function",1216],["T_WHITESPACE"," ",1216],["T_STRING","testCannotCapture",1216],"(",")",["T_WHITESPACE","\n    ",1216],"{",["T_WHITESPACE","\n        ",1217],["T_VARIABLE","$this",1218],["T_OBJECT_OPERATOR","->",1218],["T_STRING","paymentMethodMock",1218],["T_OBJECT_OPERATOR","->",1218],["T_STRING","expects",1218],"(",["T_VARIABLE","$this",1218],["T_OBJECT_OPERATOR","->",1218],["T_STRING","once",1218],"(",")",")",["T_OBJECT_OPERATOR","->",1218],["T_STRING","method",1218],"(",["T_CONSTANT_ENCAPSED_STRING","'canCapture'",1218],")",["T_OBJECT_OPERATOR","->",1218],["T_STRING","willReturn",1218],"(",["T_STRING","false",1218],")",";",["T_WHITESPACE","\n        ",1218],["T_VARIABLE","$this",1219],["T_OBJECT_OPERATOR","->",1219],["T_STRING","assertFalse",1219],"(",["T_VARIABLE","$this",1219],["T_OBJECT_OPERATOR","->",1219],["T_STRING","payment",1219],["T_OBJECT_OPERATOR","->",1219],["T_STRING","canCapture",1219],"(",")",")",";",["T_WHITESPACE","\n    ",1219],"}",["T_WHITESPACE","\n\n    ",1220],["T_PUBLIC","public",1222],["T_WHITESPACE"," ",1222],["T_FUNCTION","function",1222],["T_WHITESPACE"," ",1222],["T_STRING","testPay",1222],"(",")",["T_WHITESPACE","\n    ",1222],"{",["T_WHITESPACE","\n        ",1223],["T_VARIABLE","$expects",1224],["T_WHITESPACE"," ",1224],"=",["T_WHITESPACE"," ",1224],"[",["T_WHITESPACE","\n            ",1224],["T_CONSTANT_ENCAPSED_STRING","'amount_paid'",1225],["T_WHITESPACE"," ",1225],["T_DOUBLE_ARROW","=>",1225],["T_WHITESPACE"," ",1225],["T_LNUMBER","10",1225],",",["T_WHITESPACE","\n            ",1225],["T_CONSTANT_ENCAPSED_STRING","'base_amount_paid'",1226],["T_WHITESPACE"," ",1226],["T_DOUBLE_ARROW","=>",1226],["T_WHITESPACE"," ",1226],["T_LNUMBER","10",1226],",",["T_WHITESPACE","\n            ",1226],["T_CONSTANT_ENCAPSED_STRING","'shipping_captured'",1227],["T_WHITESPACE"," ",1227],["T_DOUBLE_ARROW","=>",1227],["T_WHITESPACE"," ",1227],["T_LNUMBER","5",1227],",",["T_WHITESPACE","\n            ",1227],["T_CONSTANT_ENCAPSED_STRING","'base_shipping_captured'",1228],["T_WHITESPACE"," ",1228],["T_DOUBLE_ARROW","=>",1228],["T_WHITESPACE"," ",1228],["T_LNUMBER","5",1228],",",["T_WHITESPACE","\n        ",1228],"]",";",["T_WHITESPACE","\n        ",1229],["T_VARIABLE","$this",1230],["T_OBJECT_OPERATOR","->",1230],["T_STRING","assertNull",1230],"(",["T_VARIABLE","$this",1230],["T_OBJECT_OPERATOR","->",1230],["T_STRING","payment",1230],["T_OBJECT_OPERATOR","->",1230],["T_STRING","getData",1230],"(",["T_CONSTANT_ENCAPSED_STRING","'amount_paid'",1230],")",")",";",["T_WHITESPACE","\n        ",1230],["T_VARIABLE","$this",1231],["T_OBJECT_OPERATOR","->",1231],["T_STRING","invoiceMock",1231],["T_OBJECT_OPERATOR","->",1231],["T_STRING","expects",1231],"(",["T_VARIABLE","$this",1231],["T_OBJECT_OPERATOR","->",1231],["T_STRING","once",1231],"(",")",")",["T_OBJECT_OPERATOR","->",1231],["T_STRING","method",1231],"(",["T_CONSTANT_ENCAPSED_STRING","'getGrandTotal'",1231],")",["T_OBJECT_OPERATOR","->",1231],["T_STRING","willReturn",1231],"(",["T_VARIABLE","$expects",1231],"[",["T_CONSTANT_ENCAPSED_STRING","'amount_paid'",1231],"]",")",";",["T_WHITESPACE","\n        ",1231],["T_VARIABLE","$this",1232],["T_OBJECT_OPERATOR","->",1232],["T_STRING","invoiceMock",1232],["T_OBJECT_OPERATOR","->",1232],["T_STRING","expects",1232],"(",["T_VARIABLE","$this",1232],["T_OBJECT_OPERATOR","->",1232],["T_STRING","once",1232],"(",")",")",["T_OBJECT_OPERATOR","->",1232],["T_STRING","method",1232],"(",["T_CONSTANT_ENCAPSED_STRING","'getBaseGrandTotal'",1232],")",["T_OBJECT_OPERATOR","->",1232],["T_STRING","willReturn",1232],"(",["T_WHITESPACE","\n            ",1232],["T_VARIABLE","$expects",1233],"[",["T_CONSTANT_ENCAPSED_STRING","'base_amount_paid'",1233],"]",["T_WHITESPACE","\n        ",1233],")",";",["T_WHITESPACE","\n        ",1234],["T_VARIABLE","$this",1235],["T_OBJECT_OPERATOR","->",1235],["T_STRING","invoiceMock",1235],["T_OBJECT_OPERATOR","->",1235],["T_STRING","expects",1235],"(",["T_VARIABLE","$this",1235],["T_OBJECT_OPERATOR","->",1235],["T_STRING","once",1235],"(",")",")",["T_OBJECT_OPERATOR","->",1235],["T_STRING","method",1235],"(",["T_CONSTANT_ENCAPSED_STRING","'getShippingAmount'",1235],")",["T_OBJECT_OPERATOR","->",1235],["T_STRING","willReturn",1235],"(",["T_WHITESPACE","\n            ",1235],["T_VARIABLE","$expects",1236],"[",["T_CONSTANT_ENCAPSED_STRING","'shipping_captured'",1236],"]",["T_WHITESPACE","\n        ",1236],")",";",["T_WHITESPACE","\n        ",1237],["T_VARIABLE","$this",1238],["T_OBJECT_OPERATOR","->",1238],["T_STRING","invoiceMock",1238],["T_OBJECT_OPERATOR","->",1238],["T_STRING","expects",1238],"(",["T_VARIABLE","$this",1238],["T_OBJECT_OPERATOR","->",1238],["T_STRING","once",1238],"(",")",")",["T_OBJECT_OPERATOR","->",1238],["T_STRING","method",1238],"(",["T_CONSTANT_ENCAPSED_STRING","'getBaseShippingAmount'",1238],")",["T_OBJECT_OPERATOR","->",1238],["T_STRING","willReturn",1238],"(",["T_WHITESPACE","\n            ",1238],["T_VARIABLE","$expects",1239],"[",["T_CONSTANT_ENCAPSED_STRING","'base_shipping_captured'",1239],"]",["T_WHITESPACE","\n        ",1239],")",";",["T_WHITESPACE","\n        ",1240],["T_VARIABLE","$this",1241],["T_OBJECT_OPERATOR","->",1241],["T_STRING","eventManagerMock",1241],["T_OBJECT_OPERATOR","->",1241],["T_STRING","expects",1241],"(",["T_VARIABLE","$this",1241],["T_OBJECT_OPERATOR","->",1241],["T_STRING","once",1241],"(",")",")",["T_OBJECT_OPERATOR","->",1241],["T_STRING","method",1241],"(",["T_CONSTANT_ENCAPSED_STRING","'dispatch'",1241],")",["T_OBJECT_OPERATOR","->",1241],["T_STRING","with",1241],"(",["T_WHITESPACE","\n            ",1241],["T_CONSTANT_ENCAPSED_STRING","'sales_order_payment_pay'",1242],",",["T_WHITESPACE","\n            ",1242],"[",["T_CONSTANT_ENCAPSED_STRING","'payment'",1243],["T_WHITESPACE"," ",1243],["T_DOUBLE_ARROW","=>",1243],["T_WHITESPACE"," ",1243],["T_VARIABLE","$this",1243],["T_OBJECT_OPERATOR","->",1243],["T_STRING","payment",1243],",",["T_WHITESPACE"," ",1243],["T_CONSTANT_ENCAPSED_STRING","'invoice'",1243],["T_WHITESPACE"," ",1243],["T_DOUBLE_ARROW","=>",1243],["T_WHITESPACE"," ",1243],["T_VARIABLE","$this",1243],["T_OBJECT_OPERATOR","->",1243],["T_STRING","invoiceMock",1243],"]",["T_WHITESPACE","\n        ",1243],")",";",["T_WHITESPACE","\n        ",1244],["T_VARIABLE","$this",1245],["T_OBJECT_OPERATOR","->",1245],["T_STRING","assertSame",1245],"(",["T_VARIABLE","$this",1245],["T_OBJECT_OPERATOR","->",1245],["T_STRING","payment",1245],",",["T_WHITESPACE"," ",1245],["T_VARIABLE","$this",1245],["T_OBJECT_OPERATOR","->",1245],["T_STRING","payment",1245],["T_OBJECT_OPERATOR","->",1245],["T_STRING","pay",1245],"(",["T_VARIABLE","$this",1245],["T_OBJECT_OPERATOR","->",1245],["T_STRING","invoiceMock",1245],")",")",";",["T_WHITESPACE","\n        ",1245],["T_VARIABLE","$this",1246],["T_OBJECT_OPERATOR","->",1246],["T_STRING","assertEquals",1246],"(",["T_VARIABLE","$expects",1246],"[",["T_CONSTANT_ENCAPSED_STRING","'amount_paid'",1246],"]",",",["T_WHITESPACE"," ",1246],["T_VARIABLE","$this",1246],["T_OBJECT_OPERATOR","->",1246],["T_STRING","payment",1246],["T_OBJECT_OPERATOR","->",1246],["T_STRING","getData",1246],"(",["T_CONSTANT_ENCAPSED_STRING","'amount_paid'",1246],")",")",";",["T_WHITESPACE","\n        ",1246],["T_VARIABLE","$this",1247],["T_OBJECT_OPERATOR","->",1247],["T_STRING","assertEquals",1247],"(",["T_VARIABLE","$expects",1247],"[",["T_CONSTANT_ENCAPSED_STRING","'base_amount_paid'",1247],"]",",",["T_WHITESPACE"," ",1247],["T_VARIABLE","$this",1247],["T_OBJECT_OPERATOR","->",1247],["T_STRING","payment",1247],["T_OBJECT_OPERATOR","->",1247],["T_STRING","getData",1247],"(",["T_CONSTANT_ENCAPSED_STRING","'base_amount_paid'",1247],")",")",";",["T_WHITESPACE","\n        ",1247],["T_VARIABLE","$this",1248],["T_OBJECT_OPERATOR","->",1248],["T_STRING","assertEquals",1248],"(",["T_VARIABLE","$expects",1248],"[",["T_CONSTANT_ENCAPSED_STRING","'shipping_captured'",1248],"]",",",["T_WHITESPACE"," ",1248],["T_VARIABLE","$this",1248],["T_OBJECT_OPERATOR","->",1248],["T_STRING","payment",1248],["T_OBJECT_OPERATOR","->",1248],["T_STRING","getData",1248],"(",["T_CONSTANT_ENCAPSED_STRING","'shipping_captured'",1248],")",")",";",["T_WHITESPACE","\n        ",1248],["T_VARIABLE","$this",1249],["T_OBJECT_OPERATOR","->",1249],["T_STRING","assertEquals",1249],"(",["T_VARIABLE","$expects",1249],"[",["T_CONSTANT_ENCAPSED_STRING","'base_shipping_captured'",1249],"]",",",["T_WHITESPACE"," ",1249],["T_VARIABLE","$this",1249],["T_OBJECT_OPERATOR","->",1249],["T_STRING","payment",1249],["T_OBJECT_OPERATOR","->",1249],["T_STRING","getData",1249],"(",["T_CONSTANT_ENCAPSED_STRING","'base_shipping_captured'",1249],")",")",";",["T_WHITESPACE","\n    ",1249],"}",["T_WHITESPACE","\n\n    ",1250],["T_PUBLIC","public",1252],["T_WHITESPACE"," ",1252],["T_FUNCTION","function",1252],["T_WHITESPACE"," ",1252],["T_STRING","testGetOrder",1252],"(",")",["T_WHITESPACE","\n    ",1252],"{",["T_WHITESPACE","\n        ",1253],["T_VARIABLE","$payment",1254],["T_WHITESPACE"," ",1254],"=",["T_WHITESPACE"," ",1254],["T_VARIABLE","$this",1254],["T_OBJECT_OPERATOR","->",1254],["T_STRING","initPayment",1254],"(",")",";",["T_WHITESPACE","\n        ",1254],["T_VARIABLE","$this",1255],["T_OBJECT_OPERATOR","->",1255],["T_STRING","orderRepository",1255],["T_OBJECT_OPERATOR","->",1255],["T_STRING","expects",1255],"(",["T_VARIABLE","$this",1255],["T_OBJECT_OPERATOR","->",1255],["T_STRING","once",1255],"(",")",")",["T_OBJECT_OPERATOR","->",1255],["T_STRING","method",1255],"(",["T_CONSTANT_ENCAPSED_STRING","'get'",1255],")",["T_OBJECT_OPERATOR","->",1255],["T_STRING","willReturn",1255],"(",["T_VARIABLE","$this",1255],["T_OBJECT_OPERATOR","->",1255],["T_STRING","orderMock",1255],")",";",["T_WHITESPACE","\n        ",1255],["T_VARIABLE","$payment",1256],["T_OBJECT_OPERATOR","->",1256],["T_STRING","setParentId",1256],"(",["T_LNUMBER","1211",1256],")",";",["T_WHITESPACE","\n        ",1256],["T_VARIABLE","$this",1257],["T_OBJECT_OPERATOR","->",1257],["T_STRING","assertSame",1257],"(",["T_VARIABLE","$this",1257],["T_OBJECT_OPERATOR","->",1257],["T_STRING","orderMock",1257],",",["T_WHITESPACE"," ",1257],["T_VARIABLE","$payment",1257],["T_OBJECT_OPERATOR","->",1257],["T_STRING","getOrder",1257],"(",")",")",";",["T_WHITESPACE","\n    ",1257],"}",["T_WHITESPACE","\n\n    ",1258],["T_PUBLIC","public",1260],["T_WHITESPACE"," ",1260],["T_FUNCTION","function",1260],["T_WHITESPACE"," ",1260],["T_STRING","testGetOrderDefault",1260],"(",")",["T_WHITESPACE","\n    ",1260],"{",["T_WHITESPACE","\n        ",1261],["T_VARIABLE","$this",1262],["T_OBJECT_OPERATOR","->",1262],["T_STRING","orderRepository",1262],["T_OBJECT_OPERATOR","->",1262],["T_STRING","expects",1262],"(",["T_VARIABLE","$this",1262],["T_OBJECT_OPERATOR","->",1262],["T_STRING","never",1262],"(",")",")",["T_OBJECT_OPERATOR","->",1262],["T_STRING","method",1262],"(",["T_CONSTANT_ENCAPSED_STRING","'get'",1262],")",";",["T_WHITESPACE","\n        ",1262],["T_VARIABLE","$this",1263],["T_OBJECT_OPERATOR","->",1263],["T_STRING","assertSame",1263],"(",["T_VARIABLE","$this",1263],["T_OBJECT_OPERATOR","->",1263],["T_STRING","orderMock",1263],",",["T_WHITESPACE"," ",1263],["T_VARIABLE","$this",1263],["T_OBJECT_OPERATOR","->",1263],["T_STRING","payment",1263],["T_OBJECT_OPERATOR","->",1263],["T_STRING","getOrder",1263],"(",")",")",";",["T_WHITESPACE","\n    ",1263],"}",["T_WHITESPACE","\n\n    ",1264],["T_PUBLIC","public",1266],["T_WHITESPACE"," ",1266],["T_FUNCTION","function",1266],["T_WHITESPACE"," ",1266],["T_STRING","testGetOrderNull",1266],"(",")",["T_WHITESPACE","\n    ",1266],"{",["T_WHITESPACE","\n        ",1267],["T_VARIABLE","$payment",1268],["T_WHITESPACE"," ",1268],"=",["T_WHITESPACE"," ",1268],["T_VARIABLE","$this",1268],["T_OBJECT_OPERATOR","->",1268],["T_STRING","initPayment",1268],"(",")",";",["T_WHITESPACE","\n        ",1268],["T_VARIABLE","$this",1269],["T_OBJECT_OPERATOR","->",1269],["T_STRING","orderRepository",1269],["T_OBJECT_OPERATOR","->",1269],["T_STRING","expects",1269],"(",["T_VARIABLE","$this",1269],["T_OBJECT_OPERATOR","->",1269],["T_STRING","never",1269],"(",")",")",["T_OBJECT_OPERATOR","->",1269],["T_STRING","method",1269],"(",["T_CONSTANT_ENCAPSED_STRING","'get'",1269],")",";",["T_WHITESPACE","\n        ",1269],["T_VARIABLE","$this",1270],["T_OBJECT_OPERATOR","->",1270],["T_STRING","assertNull",1270],"(",["T_VARIABLE","$payment",1270],["T_OBJECT_OPERATOR","->",1270],["T_STRING","getOrder",1270],"(",")",")",";",["T_WHITESPACE","\n    ",1270],"}",["T_WHITESPACE","\n\n    ",1271],["T_PUBLIC","public",1273],["T_WHITESPACE"," ",1273],["T_FUNCTION","function",1273],["T_WHITESPACE"," ",1273],["T_STRING","testCancelInvoice",1273],"(",")",["T_WHITESPACE","\n    ",1273],"{",["T_WHITESPACE","\n        ",1274],["T_VARIABLE","$expects",1275],["T_WHITESPACE"," ",1275],"=",["T_WHITESPACE"," ",1275],"[",["T_WHITESPACE","\n            ",1275],["T_CONSTANT_ENCAPSED_STRING","'amount_paid'",1276],["T_WHITESPACE"," ",1276],["T_DOUBLE_ARROW","=>",1276],["T_WHITESPACE"," ",1276],["T_LNUMBER","10",1276],",",["T_WHITESPACE","\n            ",1276],["T_CONSTANT_ENCAPSED_STRING","'base_amount_paid'",1277],["T_WHITESPACE"," ",1277],["T_DOUBLE_ARROW","=>",1277],["T_WHITESPACE"," ",1277],["T_LNUMBER","10",1277],",",["T_WHITESPACE","\n            ",1277],["T_CONSTANT_ENCAPSED_STRING","'shipping_captured'",1278],["T_WHITESPACE"," ",1278],["T_DOUBLE_ARROW","=>",1278],["T_WHITESPACE"," ",1278],["T_LNUMBER","5",1278],",",["T_WHITESPACE","\n            ",1278],["T_CONSTANT_ENCAPSED_STRING","'base_shipping_captured'",1279],["T_WHITESPACE"," ",1279],["T_DOUBLE_ARROW","=>",1279],["T_WHITESPACE"," ",1279],["T_LNUMBER","5",1279],",",["T_WHITESPACE","\n        ",1279],"]",";",["T_WHITESPACE","\n        ",1280],["T_VARIABLE","$this",1281],["T_OBJECT_OPERATOR","->",1281],["T_STRING","assertNull",1281],"(",["T_VARIABLE","$this",1281],["T_OBJECT_OPERATOR","->",1281],["T_STRING","payment",1281],["T_OBJECT_OPERATOR","->",1281],["T_STRING","getData",1281],"(",["T_CONSTANT_ENCAPSED_STRING","'amount_paid'",1281],")",")",";",["T_WHITESPACE","\n        ",1281],["T_VARIABLE","$this",1282],["T_OBJECT_OPERATOR","->",1282],["T_STRING","invoiceMock",1282],["T_OBJECT_OPERATOR","->",1282],["T_STRING","expects",1282],"(",["T_VARIABLE","$this",1282],["T_OBJECT_OPERATOR","->",1282],["T_STRING","once",1282],"(",")",")",["T_OBJECT_OPERATOR","->",1282],["T_STRING","method",1282],"(",["T_CONSTANT_ENCAPSED_STRING","'getGrandTotal'",1282],")",["T_OBJECT_OPERATOR","->",1282],["T_STRING","willReturn",1282],"(",["T_VARIABLE","$expects",1282],"[",["T_CONSTANT_ENCAPSED_STRING","'amount_paid'",1282],"]",")",";",["T_WHITESPACE","\n        ",1282],["T_VARIABLE","$this",1283],["T_OBJECT_OPERATOR","->",1283],["T_STRING","invoiceMock",1283],["T_OBJECT_OPERATOR","->",1283],["T_STRING","expects",1283],"(",["T_VARIABLE","$this",1283],["T_OBJECT_OPERATOR","->",1283],["T_STRING","once",1283],"(",")",")",["T_OBJECT_OPERATOR","->",1283],["T_STRING","method",1283],"(",["T_CONSTANT_ENCAPSED_STRING","'getBaseGrandTotal'",1283],")",["T_OBJECT_OPERATOR","->",1283],["T_STRING","willReturn",1283],"(",["T_WHITESPACE","\n            ",1283],["T_VARIABLE","$expects",1284],"[",["T_CONSTANT_ENCAPSED_STRING","'base_amount_paid'",1284],"]",["T_WHITESPACE","\n        ",1284],")",";",["T_WHITESPACE","\n        ",1285],["T_VARIABLE","$this",1286],["T_OBJECT_OPERATOR","->",1286],["T_STRING","invoiceMock",1286],["T_OBJECT_OPERATOR","->",1286],["T_STRING","expects",1286],"(",["T_VARIABLE","$this",1286],["T_OBJECT_OPERATOR","->",1286],["T_STRING","once",1286],"(",")",")",["T_OBJECT_OPERATOR","->",1286],["T_STRING","method",1286],"(",["T_CONSTANT_ENCAPSED_STRING","'getShippingAmount'",1286],")",["T_OBJECT_OPERATOR","->",1286],["T_STRING","willReturn",1286],"(",["T_WHITESPACE","\n            ",1286],["T_VARIABLE","$expects",1287],"[",["T_CONSTANT_ENCAPSED_STRING","'shipping_captured'",1287],"]",["T_WHITESPACE","\n        ",1287],")",";",["T_WHITESPACE","\n        ",1288],["T_VARIABLE","$this",1289],["T_OBJECT_OPERATOR","->",1289],["T_STRING","invoiceMock",1289],["T_OBJECT_OPERATOR","->",1289],["T_STRING","expects",1289],"(",["T_VARIABLE","$this",1289],["T_OBJECT_OPERATOR","->",1289],["T_STRING","once",1289],"(",")",")",["T_OBJECT_OPERATOR","->",1289],["T_STRING","method",1289],"(",["T_CONSTANT_ENCAPSED_STRING","'getBaseShippingAmount'",1289],")",["T_OBJECT_OPERATOR","->",1289],["T_STRING","willReturn",1289],"(",["T_WHITESPACE","\n            ",1289],["T_VARIABLE","$expects",1290],"[",["T_CONSTANT_ENCAPSED_STRING","'base_shipping_captured'",1290],"]",["T_WHITESPACE","\n        ",1290],")",";",["T_WHITESPACE","\n        ",1291],["T_VARIABLE","$this",1292],["T_OBJECT_OPERATOR","->",1292],["T_STRING","eventManagerMock",1292],["T_OBJECT_OPERATOR","->",1292],["T_STRING","expects",1292],"(",["T_VARIABLE","$this",1292],["T_OBJECT_OPERATOR","->",1292],["T_STRING","once",1292],"(",")",")",["T_OBJECT_OPERATOR","->",1292],["T_STRING","method",1292],"(",["T_CONSTANT_ENCAPSED_STRING","'dispatch'",1292],")",["T_OBJECT_OPERATOR","->",1292],["T_STRING","with",1292],"(",["T_WHITESPACE","\n            ",1292],["T_CONSTANT_ENCAPSED_STRING","'sales_order_payment_cancel_invoice'",1293],",",["T_WHITESPACE","\n            ",1293],"[",["T_CONSTANT_ENCAPSED_STRING","'payment'",1294],["T_WHITESPACE"," ",1294],["T_DOUBLE_ARROW","=>",1294],["T_WHITESPACE"," ",1294],["T_VARIABLE","$this",1294],["T_OBJECT_OPERATOR","->",1294],["T_STRING","payment",1294],",",["T_WHITESPACE"," ",1294],["T_CONSTANT_ENCAPSED_STRING","'invoice'",1294],["T_WHITESPACE"," ",1294],["T_DOUBLE_ARROW","=>",1294],["T_WHITESPACE"," ",1294],["T_VARIABLE","$this",1294],["T_OBJECT_OPERATOR","->",1294],["T_STRING","invoiceMock",1294],"]",["T_WHITESPACE","\n        ",1294],")",";",["T_WHITESPACE","\n        ",1295],["T_VARIABLE","$this",1296],["T_OBJECT_OPERATOR","->",1296],["T_STRING","assertSame",1296],"(",["T_VARIABLE","$this",1296],["T_OBJECT_OPERATOR","->",1296],["T_STRING","payment",1296],",",["T_WHITESPACE"," ",1296],["T_VARIABLE","$this",1296],["T_OBJECT_OPERATOR","->",1296],["T_STRING","payment",1296],["T_OBJECT_OPERATOR","->",1296],["T_STRING","cancelInvoice",1296],"(",["T_VARIABLE","$this",1296],["T_OBJECT_OPERATOR","->",1296],["T_STRING","invoiceMock",1296],")",")",";",["T_WHITESPACE","\n        ",1296],["T_VARIABLE","$this",1297],["T_OBJECT_OPERATOR","->",1297],["T_STRING","assertEquals",1297],"(","-",["T_LNUMBER","1",1297],["T_WHITESPACE"," ",1297],"*",["T_WHITESPACE"," ",1297],["T_VARIABLE","$expects",1297],"[",["T_CONSTANT_ENCAPSED_STRING","'amount_paid'",1297],"]",",",["T_WHITESPACE"," ",1297],["T_VARIABLE","$this",1297],["T_OBJECT_OPERATOR","->",1297],["T_STRING","payment",1297],["T_OBJECT_OPERATOR","->",1297],["T_STRING","getData",1297],"(",["T_CONSTANT_ENCAPSED_STRING","'amount_paid'",1297],")",")",";",["T_WHITESPACE","\n        ",1297],["T_VARIABLE","$this",1298],["T_OBJECT_OPERATOR","->",1298],["T_STRING","assertEquals",1298],"(","-",["T_LNUMBER","1",1298],["T_WHITESPACE"," ",1298],"*",["T_WHITESPACE"," ",1298],["T_VARIABLE","$expects",1298],"[",["T_CONSTANT_ENCAPSED_STRING","'base_amount_paid'",1298],"]",",",["T_WHITESPACE"," ",1298],["T_VARIABLE","$this",1298],["T_OBJECT_OPERATOR","->",1298],["T_STRING","payment",1298],["T_OBJECT_OPERATOR","->",1298],["T_STRING","getData",1298],"(",["T_CONSTANT_ENCAPSED_STRING","'base_amount_paid'",1298],")",")",";",["T_WHITESPACE","\n        ",1298],["T_VARIABLE","$this",1299],["T_OBJECT_OPERATOR","->",1299],["T_STRING","assertEquals",1299],"(","-",["T_LNUMBER","1",1299],["T_WHITESPACE"," ",1299],"*",["T_WHITESPACE"," ",1299],["T_VARIABLE","$expects",1299],"[",["T_CONSTANT_ENCAPSED_STRING","'shipping_captured'",1299],"]",",",["T_WHITESPACE"," ",1299],["T_VARIABLE","$this",1299],["T_OBJECT_OPERATOR","->",1299],["T_STRING","payment",1299],["T_OBJECT_OPERATOR","->",1299],["T_STRING","getData",1299],"(",["T_CONSTANT_ENCAPSED_STRING","'shipping_captured'",1299],")",")",";",["T_WHITESPACE","\n        ",1299],["T_VARIABLE","$this",1300],["T_OBJECT_OPERATOR","->",1300],["T_STRING","assertEquals",1300],"(",["T_WHITESPACE","\n            ",1300],"-",["T_LNUMBER","1",1301],["T_WHITESPACE"," ",1301],"*",["T_WHITESPACE"," ",1301],["T_VARIABLE","$expects",1301],"[",["T_CONSTANT_ENCAPSED_STRING","'base_shipping_captured'",1301],"]",",",["T_WHITESPACE","\n            ",1301],["T_VARIABLE","$this",1302],["T_OBJECT_OPERATOR","->",1302],["T_STRING","payment",1302],["T_OBJECT_OPERATOR","->",1302],["T_STRING","getData",1302],"(",["T_CONSTANT_ENCAPSED_STRING","'base_shipping_captured'",1302],")",["T_WHITESPACE","\n        ",1302],")",";",["T_WHITESPACE","\n    ",1303],"}",["T_WHITESPACE","\n\n    ",1304],["T_PUBLIC","public",1306],["T_WHITESPACE"," ",1306],["T_FUNCTION","function",1306],["T_WHITESPACE"," ",1306],["T_STRING","testRegisterRefundNotificationTransactionExists",1306],"(",")",["T_WHITESPACE","\n    ",1306],"{",["T_WHITESPACE","\n        ",1307],["T_VARIABLE","$amount",1308],["T_WHITESPACE"," ",1308],"=",["T_WHITESPACE"," ",1308],["T_LNUMBER","10",1308],";",["T_WHITESPACE","\n        ",1308],["T_VARIABLE","$paymentId",1309],["T_WHITESPACE"," ",1309],"=",["T_WHITESPACE"," ",1309],["T_LNUMBER","1",1309],";",["T_WHITESPACE","\n        ",1309],["T_VARIABLE","$orderId",1310],["T_WHITESPACE"," ",1310],"=",["T_WHITESPACE"," ",1310],["T_LNUMBER","9",1310],";",["T_WHITESPACE","\n        ",1310],["T_VARIABLE","$this",1311],["T_OBJECT_OPERATOR","->",1311],["T_STRING","payment",1311],["T_OBJECT_OPERATOR","->",1311],["T_STRING","setParentTransactionId",1311],"(",["T_VARIABLE","$this",1311],["T_OBJECT_OPERATOR","->",1311],["T_STRING","transactionId",1311],")",";",["T_WHITESPACE","\n        ",1311],["T_VARIABLE","$this",1312],["T_OBJECT_OPERATOR","->",1312],["T_STRING","payment",1312],["T_OBJECT_OPERATOR","->",1312],["T_STRING","setId",1312],"(",["T_VARIABLE","$paymentId",1312],")",";",["T_WHITESPACE","\n        ",1312],["T_VARIABLE","$this",1313],["T_OBJECT_OPERATOR","->",1313],["T_STRING","orderMock",1313],["T_OBJECT_OPERATOR","->",1313],["T_STRING","setId",1313],"(",["T_VARIABLE","$orderId",1313],")",";",["T_WHITESPACE","\n        ",1313],["T_VARIABLE","$transaction",1314],["T_WHITESPACE"," ",1314],"=",["T_WHITESPACE"," ",1314],["T_VARIABLE","$this",1314],["T_OBJECT_OPERATOR","->",1314],["T_STRING","getMock",1314],"(",["T_WHITESPACE","\n            ",1314],["T_NS_SEPARATOR","\\",1315],["T_STRING","Magento",1315],["T_NS_SEPARATOR","\\",1315],["T_STRING","Sales",1315],["T_NS_SEPARATOR","\\",1315],["T_STRING","Model",1315],["T_NS_SEPARATOR","\\",1315],["T_STRING","ResourceModel",1315],["T_NS_SEPARATOR","\\",1315],["T_STRING","Order",1315],["T_NS_SEPARATOR","\\",1315],["T_STRING","Payment",1315],["T_NS_SEPARATOR","\\",1315],["T_STRING","Transaction",1315],["T_DOUBLE_COLON","::",1315],["T_CLASS","class",1315],",",["T_WHITESPACE","\n            ",1315],"[","]",",",["T_WHITESPACE","\n            ",1316],"[","]",",",["T_WHITESPACE","\n            ",1317],["T_CONSTANT_ENCAPSED_STRING","''",1318],",",["T_WHITESPACE","\n            ",1318],["T_STRING","false",1319],["T_WHITESPACE","\n        ",1319],")",";",["T_WHITESPACE","\n        ",1320],["T_VARIABLE","$newTransactionId",1321],["T_WHITESPACE"," ",1321],"=",["T_WHITESPACE"," ",1321],["T_VARIABLE","$this",1321],["T_OBJECT_OPERATOR","->",1321],["T_STRING","transactionId",1321],["T_WHITESPACE"," ",1321],".",["T_WHITESPACE"," ",1321],["T_CONSTANT_ENCAPSED_STRING","'-'",1321],["T_WHITESPACE"," ",1321],".",["T_WHITESPACE"," ",1321],["T_STRING","Transaction",1321],["T_DOUBLE_COLON","::",1321],["T_STRING","TYPE_REFUND",1321],";",["T_WHITESPACE","\n        ",1321],["T_VARIABLE","$this",1322],["T_OBJECT_OPERATOR","->",1322],["T_STRING","transactionRepositoryMock",1322],["T_OBJECT_OPERATOR","->",1322],["T_STRING","expects",1322],"(",["T_VARIABLE","$this",1322],["T_OBJECT_OPERATOR","->",1322],["T_STRING","once",1322],"(",")",")",["T_WHITESPACE","\n            ",1322],["T_OBJECT_OPERATOR","->",1323],["T_STRING","method",1323],"(",["T_CONSTANT_ENCAPSED_STRING","'getByTransactionId'",1323],")",["T_WHITESPACE","\n            ",1323],["T_OBJECT_OPERATOR","->",1324],["T_STRING","with",1324],"(",["T_VARIABLE","$this",1324],["T_OBJECT_OPERATOR","->",1324],["T_STRING","transactionId",1324],")",["T_WHITESPACE","\n            ",1324],["T_OBJECT_OPERATOR","->",1325],["T_STRING","willReturn",1325],"(",["T_VARIABLE","$transaction",1325],")",";",["T_WHITESPACE","\n\n        ",1325],["T_VARIABLE","$this",1327],["T_OBJECT_OPERATOR","->",1327],["T_STRING","transactionManagerMock",1327],["T_OBJECT_OPERATOR","->",1327],["T_STRING","expects",1327],"(",["T_VARIABLE","$this",1327],["T_OBJECT_OPERATOR","->",1327],["T_STRING","once",1327],"(",")",")",["T_WHITESPACE","\n            ",1327],["T_OBJECT_OPERATOR","->",1328],["T_STRING","method",1328],"(",["T_CONSTANT_ENCAPSED_STRING","'isTransactionExists'",1328],")",["T_WHITESPACE","\n            ",1328],["T_OBJECT_OPERATOR","->",1329],["T_STRING","with",1329],"(",["T_VARIABLE","$newTransactionId",1329],",",["T_WHITESPACE"," ",1329],["T_VARIABLE","$paymentId",1329],",",["T_WHITESPACE"," ",1329],["T_VARIABLE","$orderId",1329],")",["T_WHITESPACE","\n            ",1329],["T_OBJECT_OPERATOR","->",1330],["T_STRING","willReturn",1330],"(",["T_STRING","true",1330],")",";",["T_WHITESPACE","\n\n        ",1330],["T_VARIABLE","$this",1332],["T_OBJECT_OPERATOR","->",1332],["T_STRING","transactionManagerMock",1332],["T_OBJECT_OPERATOR","->",1332],["T_STRING","expects",1332],"(",["T_VARIABLE","$this",1332],["T_OBJECT_OPERATOR","->",1332],["T_STRING","once",1332],"(",")",")",["T_WHITESPACE","\n            ",1332],["T_OBJECT_OPERATOR","->",1333],["T_STRING","method",1333],"(",["T_CONSTANT_ENCAPSED_STRING","'generateTransactionId'",1333],")",["T_WHITESPACE","\n            ",1333],["T_OBJECT_OPERATOR","->",1334],["T_STRING","with",1334],"(",["T_VARIABLE","$this",1334],["T_OBJECT_OPERATOR","->",1334],["T_STRING","payment",1334],",",["T_WHITESPACE"," ",1334],["T_STRING","Transaction",1334],["T_DOUBLE_COLON","::",1334],["T_STRING","TYPE_REFUND",1334],",",["T_WHITESPACE"," ",1334],["T_VARIABLE","$transaction",1334],")",["T_WHITESPACE","\n            ",1334],["T_OBJECT_OPERATOR","->",1335],["T_STRING","willReturn",1335],"(",["T_VARIABLE","$newTransactionId",1335],")",";",["T_WHITESPACE","\n\n        ",1335],["T_VARIABLE","$this",1337],["T_OBJECT_OPERATOR","->",1337],["T_STRING","assertSame",1337],"(",["T_VARIABLE","$this",1337],["T_OBJECT_OPERATOR","->",1337],["T_STRING","payment",1337],",",["T_WHITESPACE"," ",1337],["T_VARIABLE","$this",1337],["T_OBJECT_OPERATOR","->",1337],["T_STRING","payment",1337],["T_OBJECT_OPERATOR","->",1337],["T_STRING","registerRefundNotification",1337],"(",["T_VARIABLE","$amount",1337],")",")",";",["T_WHITESPACE","\n    ",1337],"}",["T_WHITESPACE","\n\n    ",1338],["T_DOC_COMMENT","\/**\n     * @SuppressWarnings(PHPMD.ExcessiveMethodLength)\n     *\/",1340],["T_WHITESPACE","\n    ",1342],["T_PUBLIC","public",1343],["T_WHITESPACE"," ",1343],["T_FUNCTION","function",1343],["T_WHITESPACE"," ",1343],["T_STRING","testRegisterRefundNotification",1343],"(",")",["T_WHITESPACE","\n    ",1343],"{",["T_WHITESPACE","\n        ",1344],["T_VARIABLE","$message",1345],["T_WHITESPACE"," ",1345],"=",["T_WHITESPACE"," ",1345],["T_CONSTANT_ENCAPSED_STRING","'Registered notification about refunded amount of . Transaction ID: \"'",1345],["T_WHITESPACE"," ",1345],".",["T_WHITESPACE","\n            ",1345],["T_STRING","self",1346],["T_DOUBLE_COLON","::",1346],["T_STRING","TRANSACTION_ID",1346],["T_WHITESPACE"," ",1346],".",["T_WHITESPACE"," ",1346],["T_CONSTANT_ENCAPSED_STRING","'-refund\"'",1346],";",["T_WHITESPACE","\n        ",1346],["T_VARIABLE","$amount",1347],["T_WHITESPACE"," ",1347],"=",["T_WHITESPACE"," ",1347],["T_LNUMBER","50",1347],";",["T_WHITESPACE","\n        ",1347],["T_VARIABLE","$grandTotalCreditMemo",1348],["T_WHITESPACE"," ",1348],"=",["T_WHITESPACE"," ",1348],["T_LNUMBER","50",1348],";",["T_WHITESPACE","\n        ",1348],["T_VARIABLE","$invoiceBaseGrandTotal",1349],["T_WHITESPACE"," ",1349],"=",["T_WHITESPACE"," ",1349],["T_LNUMBER","50",1349],";",["T_WHITESPACE","\n        ",1349],["T_VARIABLE","$invoiceBaseTotalRefunded",1350],["T_WHITESPACE"," ",1350],"=",["T_WHITESPACE"," ",1350],["T_LNUMBER","0",1350],";",["T_WHITESPACE","\n        ",1350],["T_VARIABLE","$this",1351],["T_OBJECT_OPERATOR","->",1351],["T_STRING","invoiceMock",1351],["T_OBJECT_OPERATOR","->",1351],["T_STRING","expects",1351],"(",["T_VARIABLE","$this",1351],["T_OBJECT_OPERATOR","->",1351],["T_STRING","any",1351],"(",")",")",["T_OBJECT_OPERATOR","->",1351],["T_STRING","method",1351],"(",["T_CONSTANT_ENCAPSED_STRING","'getBaseGrandTotal'",1351],")",["T_OBJECT_OPERATOR","->",1351],["T_STRING","willReturn",1351],"(",["T_VARIABLE","$invoiceBaseGrandTotal",1351],")",";",["T_WHITESPACE","\n        ",1351],["T_VARIABLE","$this",1352],["T_OBJECT_OPERATOR","->",1352],["T_STRING","invoiceMock",1352],["T_OBJECT_OPERATOR","->",1352],["T_STRING","expects",1352],"(",["T_VARIABLE","$this",1352],["T_OBJECT_OPERATOR","->",1352],["T_STRING","any",1352],"(",")",")",["T_OBJECT_OPERATOR","->",1352],["T_STRING","method",1352],"(",["T_CONSTANT_ENCAPSED_STRING","'getBaseTotalRefunded'",1352],")",["T_OBJECT_OPERATOR","->",1352],["T_STRING","willReturn",1352],"(",["T_WHITESPACE","\n            ",1352],["T_VARIABLE","$invoiceBaseTotalRefunded",1353],["T_WHITESPACE","\n        ",1353],")",";",["T_WHITESPACE","\n        ",1354],["T_VARIABLE","$this",1355],["T_OBJECT_OPERATOR","->",1355],["T_STRING","creditMemoMock",1355],["T_OBJECT_OPERATOR","->",1355],["T_STRING","expects",1355],"(",["T_VARIABLE","$this",1355],["T_OBJECT_OPERATOR","->",1355],["T_STRING","any",1355],"(",")",")",["T_OBJECT_OPERATOR","->",1355],["T_STRING","method",1355],"(",["T_CONSTANT_ENCAPSED_STRING","'getGrandTotal'",1355],")",["T_OBJECT_OPERATOR","->",1355],["T_STRING","willReturn",1355],"(",["T_VARIABLE","$grandTotalCreditMemo",1355],")",";",["T_WHITESPACE","\n        ",1355],["T_VARIABLE","$this",1356],["T_OBJECT_OPERATOR","->",1356],["T_STRING","payment",1356],["T_OBJECT_OPERATOR","->",1356],["T_STRING","setParentTransactionId",1356],"(",["T_VARIABLE","$this",1356],["T_OBJECT_OPERATOR","->",1356],["T_STRING","transactionId",1356],")",";",["T_WHITESPACE","\n        ",1356],["T_VARIABLE","$this",1357],["T_OBJECT_OPERATOR","->",1357],["T_STRING","mockInvoice",1357],"(",["T_VARIABLE","$this",1357],["T_OBJECT_OPERATOR","->",1357],["T_STRING","transactionId",1357],",",["T_WHITESPACE"," ",1357],["T_LNUMBER","1",1357],")",";",["T_WHITESPACE","\n        ",1357],["T_VARIABLE","$this",1358],["T_OBJECT_OPERATOR","->",1358],["T_STRING","creditmemoFactoryMock",1358],["T_OBJECT_OPERATOR","->",1358],["T_STRING","expects",1358],"(",["T_VARIABLE","$this",1358],["T_OBJECT_OPERATOR","->",1358],["T_STRING","once",1358],"(",")",")",["T_WHITESPACE","\n            ",1358],["T_OBJECT_OPERATOR","->",1359],["T_STRING","method",1359],"(",["T_CONSTANT_ENCAPSED_STRING","'createByInvoice'",1359],")",["T_WHITESPACE","\n            ",1359],["T_OBJECT_OPERATOR","->",1360],["T_STRING","with",1360],"(",["T_VARIABLE","$this",1360],["T_OBJECT_OPERATOR","->",1360],["T_STRING","invoiceMock",1360],",",["T_WHITESPACE"," ",1360],"[",["T_CONSTANT_ENCAPSED_STRING","'adjustment_negative'",1360],["T_WHITESPACE"," ",1360],["T_DOUBLE_ARROW","=>",1360],["T_WHITESPACE"," ",1360],["T_VARIABLE","$invoiceBaseGrandTotal",1360],["T_WHITESPACE"," ",1360],"-",["T_WHITESPACE"," ",1360],["T_VARIABLE","$amount",1360],"]",")",["T_WHITESPACE","\n            ",1360],["T_OBJECT_OPERATOR","->",1361],["T_STRING","willReturn",1361],"(",["T_VARIABLE","$this",1361],["T_OBJECT_OPERATOR","->",1361],["T_STRING","creditMemoMock",1361],")",";",["T_WHITESPACE","\n        ",1361],["T_VARIABLE","$this",1362],["T_OBJECT_OPERATOR","->",1362],["T_STRING","creditMemoMock",1362],["T_OBJECT_OPERATOR","->",1362],["T_STRING","expects",1362],"(",["T_VARIABLE","$this",1362],["T_OBJECT_OPERATOR","->",1362],["T_STRING","once",1362],"(",")",")",["T_OBJECT_OPERATOR","->",1362],["T_STRING","method",1362],"(",["T_CONSTANT_ENCAPSED_STRING","'setPaymentRefundDisallowed'",1362],")",["T_OBJECT_OPERATOR","->",1362],["T_STRING","willReturnSelf",1362],"(",")",";",["T_WHITESPACE","\n        ",1362],["T_VARIABLE","$this",1363],["T_OBJECT_OPERATOR","->",1363],["T_STRING","creditMemoMock",1363],["T_OBJECT_OPERATOR","->",1363],["T_STRING","expects",1363],"(",["T_VARIABLE","$this",1363],["T_OBJECT_OPERATOR","->",1363],["T_STRING","once",1363],"(",")",")",["T_OBJECT_OPERATOR","->",1363],["T_STRING","method",1363],"(",["T_CONSTANT_ENCAPSED_STRING","'setAutomaticallyCreated'",1363],")",["T_OBJECT_OPERATOR","->",1363],["T_STRING","willReturnSelf",1363],"(",")",";",["T_WHITESPACE","\n        ",1363],["T_VARIABLE","$this",1364],["T_OBJECT_OPERATOR","->",1364],["T_STRING","creditMemoMock",1364],["T_OBJECT_OPERATOR","->",1364],["T_STRING","expects",1364],"(",["T_VARIABLE","$this",1364],["T_OBJECT_OPERATOR","->",1364],["T_STRING","once",1364],"(",")",")",["T_OBJECT_OPERATOR","->",1364],["T_STRING","method",1364],"(",["T_CONSTANT_ENCAPSED_STRING","'addComment'",1364],")",["T_OBJECT_OPERATOR","->",1364],["T_STRING","willReturnSelf",1364],"(",")",";",["T_WHITESPACE","\n        ",1364],["T_VARIABLE","$this",1365],["T_OBJECT_OPERATOR","->",1365],["T_STRING","creditMemoMock",1365],["T_OBJECT_OPERATOR","->",1365],["T_STRING","expects",1365],"(",["T_VARIABLE","$this",1365],["T_OBJECT_OPERATOR","->",1365],["T_STRING","once",1365],"(",")",")",["T_OBJECT_OPERATOR","->",1365],["T_STRING","method",1365],"(",["T_CONSTANT_ENCAPSED_STRING","'save'",1365],")",["T_OBJECT_OPERATOR","->",1365],["T_STRING","willReturnSelf",1365],"(",")",";",["T_WHITESPACE","\n        ",1365],["T_VARIABLE","$this",1366],["T_OBJECT_OPERATOR","->",1366],["T_STRING","orderMock",1366],["T_OBJECT_OPERATOR","->",1366],["T_STRING","expects",1366],"(",["T_VARIABLE","$this",1366],["T_OBJECT_OPERATOR","->",1366],["T_STRING","once",1366],"(",")",")",["T_OBJECT_OPERATOR","->",1366],["T_STRING","method",1366],"(",["T_CONSTANT_ENCAPSED_STRING","'getBaseCurrency'",1366],")",["T_OBJECT_OPERATOR","->",1366],["T_STRING","willReturn",1366],"(",["T_VARIABLE","$this",1366],["T_OBJECT_OPERATOR","->",1366],["T_STRING","currencyMock",1366],")",";",["T_WHITESPACE","\n\n        ",1366],["T_VARIABLE","$parentTransaction",1368],["T_WHITESPACE"," ",1368],"=",["T_WHITESPACE"," ",1368],["T_VARIABLE","$this",1368],["T_OBJECT_OPERATOR","->",1368],["T_STRING","getMock",1368],"(",["T_WHITESPACE","\n            ",1368],["T_NS_SEPARATOR","\\",1369],["T_STRING","Magento",1369],["T_NS_SEPARATOR","\\",1369],["T_STRING","Sales",1369],["T_NS_SEPARATOR","\\",1369],["T_STRING","Model",1369],["T_NS_SEPARATOR","\\",1369],["T_STRING","Order",1369],["T_NS_SEPARATOR","\\",1369],["T_STRING","Payment",1369],["T_NS_SEPARATOR","\\",1369],["T_STRING","Transaction",1369],["T_DOUBLE_COLON","::",1369],["T_CLASS","class",1369],",",["T_WHITESPACE","\n            ",1369],"[",["T_CONSTANT_ENCAPSED_STRING","'setOrderId'",1370],",",["T_WHITESPACE"," ",1370],["T_CONSTANT_ENCAPSED_STRING","'setPaymentId'",1370],",",["T_WHITESPACE"," ",1370],["T_CONSTANT_ENCAPSED_STRING","'loadByTxnId'",1370],",",["T_WHITESPACE"," ",1370],["T_CONSTANT_ENCAPSED_STRING","'getId'",1370],",",["T_WHITESPACE"," ",1370],["T_CONSTANT_ENCAPSED_STRING","'getTxnId'",1370],",",["T_WHITESPACE"," ",1370],["T_CONSTANT_ENCAPSED_STRING","'setTxnId'",1370],",",["T_WHITESPACE"," ",1370],["T_CONSTANT_ENCAPSED_STRING","'getTxnType'",1370],"]",",",["T_WHITESPACE","\n            ",1370],"[","]",",",["T_WHITESPACE","\n            ",1371],["T_CONSTANT_ENCAPSED_STRING","''",1372],",",["T_WHITESPACE","\n            ",1372],["T_STRING","false",1373],["T_WHITESPACE","\n        ",1373],")",";",["T_WHITESPACE","\n        ",1374],["T_VARIABLE","$newTransactionId",1375],["T_WHITESPACE"," ",1375],"=",["T_WHITESPACE"," ",1375],["T_VARIABLE","$this",1375],["T_OBJECT_OPERATOR","->",1375],["T_STRING","transactionId",1375],["T_WHITESPACE"," ",1375],".",["T_WHITESPACE"," ",1375],["T_CONSTANT_ENCAPSED_STRING","'-'",1375],["T_WHITESPACE"," ",1375],".",["T_WHITESPACE"," ",1375],["T_STRING","Transaction",1375],["T_DOUBLE_COLON","::",1375],["T_STRING","TYPE_REFUND",1375],";",["T_WHITESPACE","\n        ",1375],["T_VARIABLE","$this",1376],["T_OBJECT_OPERATOR","->",1376],["T_STRING","transactionRepositoryMock",1376],["T_OBJECT_OPERATOR","->",1376],["T_STRING","expects",1376],"(",["T_VARIABLE","$this",1376],["T_OBJECT_OPERATOR","->",1376],["T_STRING","once",1376],"(",")",")",["T_WHITESPACE","\n            ",1376],["T_OBJECT_OPERATOR","->",1377],["T_STRING","method",1377],"(",["T_CONSTANT_ENCAPSED_STRING","'getByTransactionId'",1377],")",["T_WHITESPACE","\n            ",1377],["T_OBJECT_OPERATOR","->",1378],["T_STRING","with",1378],"(",["T_VARIABLE","$this",1378],["T_OBJECT_OPERATOR","->",1378],["T_STRING","transactionId",1378],")",["T_WHITESPACE","\n            ",1378],["T_OBJECT_OPERATOR","->",1379],["T_STRING","willReturn",1379],"(",["T_VARIABLE","$parentTransaction",1379],")",";",["T_WHITESPACE","\n\n        ",1379],["T_VARIABLE","$this",1381],["T_OBJECT_OPERATOR","->",1381],["T_STRING","transactionManagerMock",1381],["T_OBJECT_OPERATOR","->",1381],["T_STRING","expects",1381],"(",["T_VARIABLE","$this",1381],["T_OBJECT_OPERATOR","->",1381],["T_STRING","once",1381],"(",")",")",["T_WHITESPACE","\n            ",1381],["T_OBJECT_OPERATOR","->",1382],["T_STRING","method",1382],"(",["T_CONSTANT_ENCAPSED_STRING","'isTransactionExists'",1382],")",["T_WHITESPACE","\n            ",1382],["T_OBJECT_OPERATOR","->",1383],["T_STRING","with",1383],"(",["T_VARIABLE","$newTransactionId",1383],")",["T_WHITESPACE","\n            ",1383],["T_OBJECT_OPERATOR","->",1384],["T_STRING","willReturn",1384],"(",["T_STRING","false",1384],")",";",["T_WHITESPACE","\n        ",1384],["T_VARIABLE","$this",1385],["T_OBJECT_OPERATOR","->",1385],["T_STRING","transactionManagerMock",1385],["T_OBJECT_OPERATOR","->",1385],["T_STRING","expects",1385],"(",["T_VARIABLE","$this",1385],["T_OBJECT_OPERATOR","->",1385],["T_STRING","once",1385],"(",")",")",["T_WHITESPACE","\n            ",1385],["T_OBJECT_OPERATOR","->",1386],["T_STRING","method",1386],"(",["T_CONSTANT_ENCAPSED_STRING","'generateTransactionId'",1386],")",["T_WHITESPACE","\n            ",1386],["T_OBJECT_OPERATOR","->",1387],["T_STRING","with",1387],"(",["T_VARIABLE","$this",1387],["T_OBJECT_OPERATOR","->",1387],["T_STRING","payment",1387],",",["T_WHITESPACE"," ",1387],["T_STRING","Transaction",1387],["T_DOUBLE_COLON","::",1387],["T_STRING","TYPE_REFUND",1387],",",["T_WHITESPACE"," ",1387],["T_VARIABLE","$parentTransaction",1387],")",["T_WHITESPACE","\n            ",1387],["T_OBJECT_OPERATOR","->",1388],["T_STRING","willReturn",1388],"(",["T_VARIABLE","$newTransactionId",1388],")",";",["T_WHITESPACE","\n\n        ",1388],["T_VARIABLE","$status",1390],["T_WHITESPACE"," ",1390],"=",["T_WHITESPACE"," ",1390],["T_CONSTANT_ENCAPSED_STRING","'status'",1390],";",["T_WHITESPACE","\n        ",1390],["T_VARIABLE","$this",1391],["T_OBJECT_OPERATOR","->",1391],["T_STRING","mockGetDefaultStatus",1391],"(",["T_STRING","Order",1391],["T_DOUBLE_COLON","::",1391],["T_STRING","STATE_PROCESSING",1391],",",["T_WHITESPACE"," ",1391],["T_VARIABLE","$status",1391],")",";",["T_WHITESPACE","\n        ",1391],["T_VARIABLE","$this",1392],["T_OBJECT_OPERATOR","->",1392],["T_STRING","assertOrderUpdated",1392],"(",["T_STRING","Order",1392],["T_DOUBLE_COLON","::",1392],["T_STRING","STATE_PROCESSING",1392],",",["T_WHITESPACE"," ",1392],["T_VARIABLE","$status",1392],",",["T_WHITESPACE"," ",1392],["T_VARIABLE","$message",1392],")",";",["T_WHITESPACE","\n\n        ",1392],["T_VARIABLE","$additionalInformation",1394],["T_WHITESPACE"," ",1394],"=",["T_WHITESPACE"," ",1394],"[","]",";",["T_WHITESPACE","\n        ",1394],["T_VARIABLE","$failSafe",1395],["T_WHITESPACE"," ",1395],"=",["T_WHITESPACE"," ",1395],["T_STRING","false",1395],";",["T_WHITESPACE","\n        ",1395],["T_VARIABLE","$transactionType",1396],["T_WHITESPACE"," ",1396],"=",["T_WHITESPACE"," ",1396],["T_STRING","Transaction",1396],["T_DOUBLE_COLON","::",1396],["T_STRING","TYPE_REFUND",1396],";",["T_WHITESPACE","\n        ",1396],["T_VARIABLE","$this",1397],["T_OBJECT_OPERATOR","->",1397],["T_STRING","getTransactionBuilderMock",1397],"(",["T_WHITESPACE","\n            ",1397],["T_VARIABLE","$additionalInformation",1398],",",["T_WHITESPACE","\n            ",1398],["T_VARIABLE","$failSafe",1399],",",["T_WHITESPACE","\n            ",1399],["T_VARIABLE","$transactionType",1400],",",["T_WHITESPACE","\n            ",1400],["T_VARIABLE","$this",1401],["T_OBJECT_OPERATOR","->",1401],["T_STRING","transactionId",1401],["T_WHITESPACE"," ",1401],".",["T_WHITESPACE"," ",1401],["T_CONSTANT_ENCAPSED_STRING","'-'",1401],["T_WHITESPACE"," ",1401],".",["T_WHITESPACE"," ",1401],["T_STRING","Transaction",1401],["T_DOUBLE_COLON","::",1401],["T_STRING","TYPE_REFUND",1401],["T_WHITESPACE","\n        ",1401],")",";",["T_WHITESPACE","\n\n        ",1402],["T_VARIABLE","$this",1404],["T_OBJECT_OPERATOR","->",1404],["T_STRING","assertSame",1404],"(",["T_VARIABLE","$this",1404],["T_OBJECT_OPERATOR","->",1404],["T_STRING","payment",1404],",",["T_WHITESPACE"," ",1404],["T_VARIABLE","$this",1404],["T_OBJECT_OPERATOR","->",1404],["T_STRING","payment",1404],["T_OBJECT_OPERATOR","->",1404],["T_STRING","registerRefundNotification",1404],"(",["T_VARIABLE","$amount",1404],")",")",";",["T_WHITESPACE","\n        ",1404],["T_VARIABLE","$this",1405],["T_OBJECT_OPERATOR","->",1405],["T_STRING","assertSame",1405],"(",["T_VARIABLE","$this",1405],["T_OBJECT_OPERATOR","->",1405],["T_STRING","creditMemoMock",1405],",",["T_WHITESPACE"," ",1405],["T_VARIABLE","$this",1405],["T_OBJECT_OPERATOR","->",1405],["T_STRING","payment",1405],["T_OBJECT_OPERATOR","->",1405],["T_STRING","getData",1405],"(",["T_CONSTANT_ENCAPSED_STRING","'created_creditmemo'",1405],")",")",";",["T_WHITESPACE","\n        ",1405],["T_VARIABLE","$this",1406],["T_OBJECT_OPERATOR","->",1406],["T_STRING","assertEquals",1406],"(",["T_VARIABLE","$grandTotalCreditMemo",1406],",",["T_WHITESPACE"," ",1406],["T_VARIABLE","$this",1406],["T_OBJECT_OPERATOR","->",1406],["T_STRING","payment",1406],["T_OBJECT_OPERATOR","->",1406],["T_STRING","getData",1406],"(",["T_CONSTANT_ENCAPSED_STRING","'amount_refunded'",1406],")",")",";",["T_WHITESPACE","\n    ",1406],"}",["T_WHITESPACE","\n\n    ",1407],["T_PUBLIC","public",1409],["T_WHITESPACE"," ",1409],["T_FUNCTION","function",1409],["T_WHITESPACE"," ",1409],["T_STRING","testRegisterRefundNotificationWrongAmount",1409],"(",")",["T_WHITESPACE","\n    ",1409],"{",["T_WHITESPACE","\n        ",1410],["T_VARIABLE","$amount",1411],["T_WHITESPACE"," ",1411],"=",["T_WHITESPACE"," ",1411],["T_LNUMBER","30",1411],";",["T_WHITESPACE","\n        ",1411],["T_VARIABLE","$grandTotalCreditMemo",1412],["T_WHITESPACE"," ",1412],"=",["T_WHITESPACE"," ",1412],["T_LNUMBER","50",1412],";",["T_WHITESPACE","\n        ",1412],["T_VARIABLE","$invoiceBaseGrandTotal",1413],["T_WHITESPACE"," ",1413],"=",["T_WHITESPACE"," ",1413],["T_LNUMBER","50",1413],";",["T_WHITESPACE","\n        ",1413],["T_VARIABLE","$invoiceBaseTotalRefunded",1414],["T_WHITESPACE"," ",1414],"=",["T_WHITESPACE"," ",1414],["T_LNUMBER","0",1414],";",["T_WHITESPACE","\n        ",1414],["T_VARIABLE","$this",1415],["T_OBJECT_OPERATOR","->",1415],["T_STRING","invoiceMock",1415],["T_OBJECT_OPERATOR","->",1415],["T_STRING","expects",1415],"(",["T_VARIABLE","$this",1415],["T_OBJECT_OPERATOR","->",1415],["T_STRING","any",1415],"(",")",")",["T_OBJECT_OPERATOR","->",1415],["T_STRING","method",1415],"(",["T_CONSTANT_ENCAPSED_STRING","'getBaseGrandTotal'",1415],")",["T_OBJECT_OPERATOR","->",1415],["T_STRING","willReturn",1415],"(",["T_VARIABLE","$invoiceBaseGrandTotal",1415],")",";",["T_WHITESPACE","\n        ",1415],["T_VARIABLE","$this",1416],["T_OBJECT_OPERATOR","->",1416],["T_STRING","invoiceMock",1416],["T_OBJECT_OPERATOR","->",1416],["T_STRING","expects",1416],"(",["T_VARIABLE","$this",1416],["T_OBJECT_OPERATOR","->",1416],["T_STRING","any",1416],"(",")",")",["T_OBJECT_OPERATOR","->",1416],["T_STRING","method",1416],"(",["T_CONSTANT_ENCAPSED_STRING","'getBaseTotalRefunded'",1416],")",["T_OBJECT_OPERATOR","->",1416],["T_STRING","willReturn",1416],"(",["T_WHITESPACE","\n            ",1416],["T_VARIABLE","$invoiceBaseTotalRefunded",1417],["T_WHITESPACE","\n        ",1417],")",";",["T_WHITESPACE","\n        ",1418],["T_VARIABLE","$this",1419],["T_OBJECT_OPERATOR","->",1419],["T_STRING","creditMemoMock",1419],["T_OBJECT_OPERATOR","->",1419],["T_STRING","expects",1419],"(",["T_VARIABLE","$this",1419],["T_OBJECT_OPERATOR","->",1419],["T_STRING","any",1419],"(",")",")",["T_OBJECT_OPERATOR","->",1419],["T_STRING","method",1419],"(",["T_CONSTANT_ENCAPSED_STRING","'getGrandTotal'",1419],")",["T_OBJECT_OPERATOR","->",1419],["T_STRING","willReturn",1419],"(",["T_VARIABLE","$grandTotalCreditMemo",1419],")",";",["T_WHITESPACE","\n        ",1419],["T_VARIABLE","$this",1420],["T_OBJECT_OPERATOR","->",1420],["T_STRING","payment",1420],["T_OBJECT_OPERATOR","->",1420],["T_STRING","setParentTransactionId",1420],"(",["T_VARIABLE","$this",1420],["T_OBJECT_OPERATOR","->",1420],["T_STRING","transactionId",1420],")",";",["T_WHITESPACE","\n        ",1420],["T_VARIABLE","$this",1421],["T_OBJECT_OPERATOR","->",1421],["T_STRING","mockInvoice",1421],"(",["T_VARIABLE","$this",1421],["T_OBJECT_OPERATOR","->",1421],["T_STRING","transactionId",1421],",",["T_WHITESPACE"," ",1421],["T_LNUMBER","1",1421],")",";",["T_WHITESPACE","\n        ",1421],["T_VARIABLE","$this",1422],["T_OBJECT_OPERATOR","->",1422],["T_STRING","orderMock",1422],["T_OBJECT_OPERATOR","->",1422],["T_STRING","expects",1422],"(",["T_VARIABLE","$this",1422],["T_OBJECT_OPERATOR","->",1422],["T_STRING","once",1422],"(",")",")",["T_OBJECT_OPERATOR","->",1422],["T_STRING","method",1422],"(",["T_CONSTANT_ENCAPSED_STRING","'getBaseCurrency'",1422],")",["T_OBJECT_OPERATOR","->",1422],["T_STRING","willReturn",1422],"(",["T_VARIABLE","$this",1422],["T_OBJECT_OPERATOR","->",1422],["T_STRING","currencyMock",1422],")",";",["T_WHITESPACE","\n        ",1422],["T_VARIABLE","$parentTransaction",1423],["T_WHITESPACE"," ",1423],"=",["T_WHITESPACE"," ",1423],["T_VARIABLE","$this",1423],["T_OBJECT_OPERATOR","->",1423],["T_STRING","getMock",1423],"(",["T_WHITESPACE","\n            ",1423],["T_NS_SEPARATOR","\\",1424],["T_STRING","Magento",1424],["T_NS_SEPARATOR","\\",1424],["T_STRING","Sales",1424],["T_NS_SEPARATOR","\\",1424],["T_STRING","Model",1424],["T_NS_SEPARATOR","\\",1424],["T_STRING","Order",1424],["T_NS_SEPARATOR","\\",1424],["T_STRING","Payment",1424],["T_NS_SEPARATOR","\\",1424],["T_STRING","Transaction",1424],["T_DOUBLE_COLON","::",1424],["T_CLASS","class",1424],",",["T_WHITESPACE","\n            ",1424],"[",["T_CONSTANT_ENCAPSED_STRING","'setOrderId'",1425],",",["T_WHITESPACE"," ",1425],["T_CONSTANT_ENCAPSED_STRING","'setPaymentId'",1425],",",["T_WHITESPACE"," ",1425],["T_CONSTANT_ENCAPSED_STRING","'loadByTxnId'",1425],",",["T_WHITESPACE"," ",1425],["T_CONSTANT_ENCAPSED_STRING","'getId'",1425],",",["T_WHITESPACE"," ",1425],["T_CONSTANT_ENCAPSED_STRING","'getTxnId'",1425],",",["T_WHITESPACE"," ",1425],["T_CONSTANT_ENCAPSED_STRING","'getTxnType'",1425],"]",",",["T_WHITESPACE","\n            ",1425],"[","]",",",["T_WHITESPACE","\n            ",1426],["T_CONSTANT_ENCAPSED_STRING","''",1427],",",["T_WHITESPACE","\n            ",1427],["T_STRING","false",1428],["T_WHITESPACE","\n        ",1428],")",";",["T_WHITESPACE","\n        ",1429],["T_COMMENT","\/\/generate new transaction and check if not exists\n",1430],["T_WHITESPACE","        ",1431],["T_VARIABLE","$this",1431],["T_OBJECT_OPERATOR","->",1431],["T_STRING","transactionRepositoryMock",1431],["T_OBJECT_OPERATOR","->",1431],["T_STRING","expects",1431],"(",["T_VARIABLE","$this",1431],["T_OBJECT_OPERATOR","->",1431],["T_STRING","once",1431],"(",")",")",["T_WHITESPACE","\n            ",1431],["T_OBJECT_OPERATOR","->",1432],["T_STRING","method",1432],"(",["T_CONSTANT_ENCAPSED_STRING","'getByTransactionId'",1432],")",["T_WHITESPACE","\n            ",1432],["T_OBJECT_OPERATOR","->",1433],["T_STRING","with",1433],"(",["T_VARIABLE","$this",1433],["T_OBJECT_OPERATOR","->",1433],["T_STRING","transactionId",1433],")",["T_WHITESPACE","\n            ",1433],["T_OBJECT_OPERATOR","->",1434],["T_STRING","willReturn",1434],"(",["T_VARIABLE","$parentTransaction",1434],")",";",["T_WHITESPACE","\n\n        ",1434],["T_VARIABLE","$newTransactionId",1436],["T_WHITESPACE"," ",1436],"=",["T_WHITESPACE"," ",1436],["T_VARIABLE","$this",1436],["T_OBJECT_OPERATOR","->",1436],["T_STRING","transactionId",1436],["T_WHITESPACE"," ",1436],".",["T_WHITESPACE"," ",1436],["T_CONSTANT_ENCAPSED_STRING","'-refund'",1436],";",["T_WHITESPACE","\n        ",1436],["T_VARIABLE","$this",1437],["T_OBJECT_OPERATOR","->",1437],["T_STRING","transactionManagerMock",1437],["T_OBJECT_OPERATOR","->",1437],["T_STRING","expects",1437],"(",["T_VARIABLE","$this",1437],["T_OBJECT_OPERATOR","->",1437],["T_STRING","once",1437],"(",")",")",["T_WHITESPACE","\n            ",1437],["T_OBJECT_OPERATOR","->",1438],["T_STRING","method",1438],"(",["T_CONSTANT_ENCAPSED_STRING","'isTransactionExists'",1438],")",["T_WHITESPACE","\n            ",1438],["T_OBJECT_OPERATOR","->",1439],["T_STRING","with",1439],"(",["T_VARIABLE","$newTransactionId",1439],")",["T_WHITESPACE","\n            ",1439],["T_OBJECT_OPERATOR","->",1440],["T_STRING","willReturn",1440],"(",["T_STRING","false",1440],")",";",["T_WHITESPACE","\n\n        ",1440],["T_VARIABLE","$this",1442],["T_OBJECT_OPERATOR","->",1442],["T_STRING","transactionManagerMock",1442],["T_OBJECT_OPERATOR","->",1442],["T_STRING","expects",1442],"(",["T_VARIABLE","$this",1442],["T_OBJECT_OPERATOR","->",1442],["T_STRING","once",1442],"(",")",")",["T_WHITESPACE","\n            ",1442],["T_OBJECT_OPERATOR","->",1443],["T_STRING","method",1443],"(",["T_CONSTANT_ENCAPSED_STRING","'generateTransactionId'",1443],")",["T_WHITESPACE","\n            ",1443],["T_OBJECT_OPERATOR","->",1444],["T_STRING","with",1444],"(",["T_VARIABLE","$this",1444],["T_OBJECT_OPERATOR","->",1444],["T_STRING","payment",1444],",",["T_WHITESPACE"," ",1444],["T_STRING","Transaction",1444],["T_DOUBLE_COLON","::",1444],["T_STRING","TYPE_REFUND",1444],",",["T_WHITESPACE"," ",1444],["T_VARIABLE","$parentTransaction",1444],")",["T_WHITESPACE","\n            ",1444],["T_OBJECT_OPERATOR","->",1445],["T_STRING","willReturn",1445],"(",["T_VARIABLE","$newTransactionId",1445],")",";",["T_WHITESPACE","\n        ",1445],["T_VARIABLE","$this",1446],["T_OBJECT_OPERATOR","->",1446],["T_STRING","assertSame",1446],"(",["T_VARIABLE","$this",1446],["T_OBJECT_OPERATOR","->",1446],["T_STRING","payment",1446],",",["T_WHITESPACE"," ",1446],["T_VARIABLE","$this",1446],["T_OBJECT_OPERATOR","->",1446],["T_STRING","payment",1446],["T_OBJECT_OPERATOR","->",1446],["T_STRING","registerRefundNotification",1446],"(",["T_VARIABLE","$amount",1446],")",")",";",["T_WHITESPACE","\n    ",1446],"}",["T_WHITESPACE","\n\n    ",1447],["T_DOC_COMMENT","\/**\n     * @dataProvider boolProvider\n     *\/",1449],["T_WHITESPACE","\n    ",1451],["T_PUBLIC","public",1452],["T_WHITESPACE"," ",1452],["T_FUNCTION","function",1452],["T_WHITESPACE"," ",1452],["T_STRING","testCanRefund",1452],"(",["T_VARIABLE","$canRefund",1452],")",["T_WHITESPACE","\n    ",1452],"{",["T_WHITESPACE","\n        ",1453],["T_VARIABLE","$this",1454],["T_OBJECT_OPERATOR","->",1454],["T_STRING","paymentMethodMock",1454],["T_OBJECT_OPERATOR","->",1454],["T_STRING","expects",1454],"(",["T_VARIABLE","$this",1454],["T_OBJECT_OPERATOR","->",1454],["T_STRING","once",1454],"(",")",")",["T_WHITESPACE","\n            ",1454],["T_OBJECT_OPERATOR","->",1455],["T_STRING","method",1455],"(",["T_CONSTANT_ENCAPSED_STRING","'canRefund'",1455],")",["T_WHITESPACE","\n            ",1455],["T_OBJECT_OPERATOR","->",1456],["T_STRING","willReturn",1456],"(",["T_VARIABLE","$canRefund",1456],")",";",["T_WHITESPACE","\n        ",1456],["T_VARIABLE","$this",1457],["T_OBJECT_OPERATOR","->",1457],["T_STRING","assertEquals",1457],"(",["T_VARIABLE","$canRefund",1457],",",["T_WHITESPACE"," ",1457],["T_VARIABLE","$this",1457],["T_OBJECT_OPERATOR","->",1457],["T_STRING","payment",1457],["T_OBJECT_OPERATOR","->",1457],["T_STRING","canRefund",1457],"(",")",")",";",["T_WHITESPACE","\n    ",1457],"}",["T_WHITESPACE","\n\n    ",1458],["T_DOC_COMMENT","\/**\n     * @covers \\Magento\\Sales\\Model\\Order\\Payment::refund()\n     *\/",1460],["T_WHITESPACE","\n    ",1462],["T_PUBLIC","public",1463],["T_WHITESPACE"," ",1463],["T_FUNCTION","function",1463],["T_WHITESPACE"," ",1463],["T_STRING","testRefund",1463],"(",")",["T_WHITESPACE","\n    ",1463],"{",["T_WHITESPACE","\n        ",1464],["T_VARIABLE","$amount",1465],["T_WHITESPACE"," ",1465],"=",["T_WHITESPACE"," ",1465],["T_DNUMBER","204.04",1465],";",["T_WHITESPACE","\n        ",1465],["T_VARIABLE","$this",1466],["T_OBJECT_OPERATOR","->",1466],["T_STRING","creditMemoMock",1466],["T_OBJECT_OPERATOR","->",1466],["T_STRING","expects",1466],"(",["T_STATIC","static",1466],["T_DOUBLE_COLON","::",1466],["T_STRING","once",1466],"(",")",")",["T_WHITESPACE","\n            ",1466],["T_OBJECT_OPERATOR","->",1467],["T_STRING","method",1467],"(",["T_CONSTANT_ENCAPSED_STRING","'getBaseGrandTotal'",1467],")",["T_WHITESPACE","\n            ",1467],["T_OBJECT_OPERATOR","->",1468],["T_STRING","willReturn",1468],"(",["T_VARIABLE","$amount",1468],")",";",["T_WHITESPACE","\n        ",1468],["T_VARIABLE","$this",1469],["T_OBJECT_OPERATOR","->",1469],["T_STRING","creditMemoMock",1469],["T_OBJECT_OPERATOR","->",1469],["T_STRING","expects",1469],"(",["T_STATIC","static",1469],["T_DOUBLE_COLON","::",1469],["T_STRING","once",1469],"(",")",")",["T_WHITESPACE","\n            ",1469],["T_OBJECT_OPERATOR","->",1470],["T_STRING","method",1470],"(",["T_CONSTANT_ENCAPSED_STRING","'getGrandTotal'",1470],")",["T_WHITESPACE","\n            ",1470],["T_OBJECT_OPERATOR","->",1471],["T_STRING","willReturn",1471],"(",["T_VARIABLE","$amount",1471],")",";",["T_WHITESPACE","\n        ",1471],["T_VARIABLE","$this",1472],["T_OBJECT_OPERATOR","->",1472],["T_STRING","creditMemoMock",1472],["T_OBJECT_OPERATOR","->",1472],["T_STRING","expects",1472],"(",["T_STATIC","static",1472],["T_DOUBLE_COLON","::",1472],["T_STRING","once",1472],"(",")",")",["T_WHITESPACE","\n            ",1472],["T_OBJECT_OPERATOR","->",1473],["T_STRING","method",1473],"(",["T_CONSTANT_ENCAPSED_STRING","'getDoTransaction'",1473],")",["T_WHITESPACE","\n            ",1473],["T_OBJECT_OPERATOR","->",1474],["T_STRING","willReturn",1474],"(",["T_STRING","true",1474],")",";",["T_WHITESPACE","\n\n        ",1474],["T_VARIABLE","$this",1476],["T_OBJECT_OPERATOR","->",1476],["T_STRING","paymentMethodMock",1476],["T_OBJECT_OPERATOR","->",1476],["T_STRING","expects",1476],"(",["T_STATIC","static",1476],["T_DOUBLE_COLON","::",1476],["T_STRING","once",1476],"(",")",")",["T_WHITESPACE","\n            ",1476],["T_OBJECT_OPERATOR","->",1477],["T_STRING","method",1477],"(",["T_CONSTANT_ENCAPSED_STRING","'canRefund'",1477],")",["T_WHITESPACE","\n            ",1477],["T_OBJECT_OPERATOR","->",1478],["T_STRING","willReturn",1478],"(",["T_STRING","true",1478],")",";",["T_WHITESPACE","\n\n        ",1478],["T_VARIABLE","$this",1480],["T_OBJECT_OPERATOR","->",1480],["T_STRING","mockInvoice",1480],"(",["T_STRING","self",1480],["T_DOUBLE_COLON","::",1480],["T_STRING","TRANSACTION_ID",1480],",",["T_WHITESPACE"," ",1480],["T_LNUMBER","0",1480],")",";",["T_WHITESPACE","\n        ",1480],["T_VARIABLE","$this",1481],["T_OBJECT_OPERATOR","->",1481],["T_STRING","creditMemoMock",1481],["T_OBJECT_OPERATOR","->",1481],["T_STRING","expects",1481],"(",["T_STATIC","static",1481],["T_DOUBLE_COLON","::",1481],["T_STRING","once",1481],"(",")",")",["T_WHITESPACE","\n            ",1481],["T_OBJECT_OPERATOR","->",1482],["T_STRING","method",1482],"(",["T_CONSTANT_ENCAPSED_STRING","'getInvoice'",1482],")",["T_WHITESPACE","\n            ",1482],["T_OBJECT_OPERATOR","->",1483],["T_STRING","willReturn",1483],"(",["T_VARIABLE","$this",1483],["T_OBJECT_OPERATOR","->",1483],["T_STRING","invoiceMock",1483],")",";",["T_WHITESPACE","\n        ",1483],["T_VARIABLE","$this",1484],["T_OBJECT_OPERATOR","->",1484],["T_STRING","creditMemoMock",1484],["T_OBJECT_OPERATOR","->",1484],["T_STRING","expects",1484],"(",["T_STATIC","static",1484],["T_DOUBLE_COLON","::",1484],["T_STRING","once",1484],"(",")",")",["T_WHITESPACE","\n            ",1484],["T_OBJECT_OPERATOR","->",1485],["T_STRING","method",1485],"(",["T_CONSTANT_ENCAPSED_STRING","'getOrder'",1485],")",["T_WHITESPACE","\n            ",1485],["T_OBJECT_OPERATOR","->",1486],["T_STRING","willReturn",1486],"(",["T_VARIABLE","$this",1486],["T_OBJECT_OPERATOR","->",1486],["T_STRING","orderMock",1486],")",";",["T_WHITESPACE","\n\n        ",1486],["T_VARIABLE","$captureTranId",1488],["T_WHITESPACE"," ",1488],"=",["T_WHITESPACE"," ",1488],["T_STRING","self",1488],["T_DOUBLE_COLON","::",1488],["T_STRING","TRANSACTION_ID",1488],["T_WHITESPACE"," ",1488],".",["T_WHITESPACE"," ",1488],["T_CONSTANT_ENCAPSED_STRING","'-'",1488],["T_WHITESPACE"," ",1488],".",["T_WHITESPACE"," ",1488],["T_STRING","Transaction",1488],["T_DOUBLE_COLON","::",1488],["T_STRING","TYPE_CAPTURE",1488],";",["T_WHITESPACE","\n        ",1488],["T_VARIABLE","$captureTransaction",1489],["T_WHITESPACE"," ",1489],"=",["T_WHITESPACE"," ",1489],["T_VARIABLE","$this",1489],["T_OBJECT_OPERATOR","->",1489],["T_STRING","getMockBuilder",1489],"(",["T_STRING","Transaction",1489],["T_DOUBLE_COLON","::",1489],["T_CLASS","class",1489],")",["T_WHITESPACE","\n            ",1489],["T_OBJECT_OPERATOR","->",1490],["T_STRING","disableOriginalConstructor",1490],"(",")",["T_WHITESPACE","\n            ",1490],["T_OBJECT_OPERATOR","->",1491],["T_STRING","setMethods",1491],"(","[",["T_CONSTANT_ENCAPSED_STRING","'getTxnId'",1491],"]",")",["T_WHITESPACE","\n            ",1491],["T_OBJECT_OPERATOR","->",1492],["T_STRING","getMock",1492],"(",")",";",["T_WHITESPACE","\n\n        ",1492],["T_VARIABLE","$refundTranId",1494],["T_WHITESPACE"," ",1494],"=",["T_WHITESPACE"," ",1494],["T_VARIABLE","$captureTranId",1494],["T_WHITESPACE"," ",1494],".",["T_WHITESPACE"," ",1494],["T_CONSTANT_ENCAPSED_STRING","'-'",1494],["T_WHITESPACE"," ",1494],".",["T_WHITESPACE"," ",1494],["T_STRING","Transaction",1494],["T_DOUBLE_COLON","::",1494],["T_STRING","TYPE_REFUND",1494],";",["T_WHITESPACE","\n        ",1494],["T_VARIABLE","$this",1495],["T_OBJECT_OPERATOR","->",1495],["T_STRING","transactionManagerMock",1495],["T_OBJECT_OPERATOR","->",1495],["T_STRING","expects",1495],"(",["T_STATIC","static",1495],["T_DOUBLE_COLON","::",1495],["T_STRING","once",1495],"(",")",")",["T_WHITESPACE","\n            ",1495],["T_OBJECT_OPERATOR","->",1496],["T_STRING","method",1496],"(",["T_CONSTANT_ENCAPSED_STRING","'generateTransactionId'",1496],")",["T_WHITESPACE","\n            ",1496],["T_OBJECT_OPERATOR","->",1497],["T_STRING","willReturn",1497],"(",["T_VARIABLE","$refundTranId",1497],")",";",["T_WHITESPACE","\n        ",1497],["T_VARIABLE","$captureTransaction",1498],["T_OBJECT_OPERATOR","->",1498],["T_STRING","expects",1498],"(",["T_STATIC","static",1498],["T_DOUBLE_COLON","::",1498],["T_STRING","once",1498],"(",")",")",["T_WHITESPACE","\n            ",1498],["T_OBJECT_OPERATOR","->",1499],["T_STRING","method",1499],"(",["T_CONSTANT_ENCAPSED_STRING","'getTxnId'",1499],")",["T_WHITESPACE","\n            ",1499],["T_OBJECT_OPERATOR","->",1500],["T_STRING","willReturn",1500],"(",["T_VARIABLE","$captureTranId",1500],")",";",["T_WHITESPACE","\n        ",1500],["T_VARIABLE","$this",1501],["T_OBJECT_OPERATOR","->",1501],["T_STRING","transactionRepositoryMock",1501],["T_OBJECT_OPERATOR","->",1501],["T_STRING","expects",1501],"(",["T_STATIC","static",1501],["T_DOUBLE_COLON","::",1501],["T_STRING","once",1501],"(",")",")",["T_WHITESPACE","\n            ",1501],["T_OBJECT_OPERATOR","->",1502],["T_STRING","method",1502],"(",["T_CONSTANT_ENCAPSED_STRING","'getByTransactionId'",1502],")",["T_WHITESPACE","\n            ",1502],["T_OBJECT_OPERATOR","->",1503],["T_STRING","willReturn",1503],"(",["T_VARIABLE","$captureTransaction",1503],")",";",["T_WHITESPACE","\n\n        ",1503],["T_VARIABLE","$this",1505],["T_OBJECT_OPERATOR","->",1505],["T_STRING","paymentMethodMock",1505],["T_OBJECT_OPERATOR","->",1505],["T_STRING","expects",1505],"(",["T_STATIC","static",1505],["T_DOUBLE_COLON","::",1505],["T_STRING","once",1505],"(",")",")",["T_WHITESPACE","\n            ",1505],["T_OBJECT_OPERATOR","->",1506],["T_STRING","method",1506],"(",["T_CONSTANT_ENCAPSED_STRING","'refund'",1506],")",["T_WHITESPACE","\n            ",1506],["T_OBJECT_OPERATOR","->",1507],["T_STRING","with",1507],"(",["T_VARIABLE","$this",1507],["T_OBJECT_OPERATOR","->",1507],["T_STRING","payment",1507],",",["T_WHITESPACE"," ",1507],["T_VARIABLE","$amount",1507],")",";",["T_WHITESPACE","\n\n        ",1507],["T_VARIABLE","$isOnline",1509],["T_WHITESPACE"," ",1509],"=",["T_WHITESPACE"," ",1509],["T_STRING","true",1509],";",["T_WHITESPACE","\n        ",1509],["T_VARIABLE","$this",1510],["T_OBJECT_OPERATOR","->",1510],["T_STRING","getTransactionBuilderMock",1510],"(","[","]",",",["T_WHITESPACE"," ",1510],["T_VARIABLE","$isOnline",1510],",",["T_WHITESPACE"," ",1510],["T_STRING","Transaction",1510],["T_DOUBLE_COLON","::",1510],["T_STRING","TYPE_REFUND",1510],",",["T_WHITESPACE"," ",1510],["T_VARIABLE","$refundTranId",1510],")",";",["T_WHITESPACE","\n\n        ",1510],["T_VARIABLE","$this",1512],["T_OBJECT_OPERATOR","->",1512],["T_STRING","currencyMock",1512],["T_OBJECT_OPERATOR","->",1512],["T_STRING","expects",1512],"(",["T_STATIC","static",1512],["T_DOUBLE_COLON","::",1512],["T_STRING","once",1512],"(",")",")",["T_WHITESPACE","\n            ",1512],["T_OBJECT_OPERATOR","->",1513],["T_STRING","method",1513],"(",["T_CONSTANT_ENCAPSED_STRING","'formatTxt'",1513],")",["T_WHITESPACE","\n            ",1513],["T_OBJECT_OPERATOR","->",1514],["T_STRING","willReturn",1514],"(",["T_VARIABLE","$amount",1514],")",";",["T_WHITESPACE","\n        ",1514],["T_VARIABLE","$this",1515],["T_OBJECT_OPERATOR","->",1515],["T_STRING","orderMock",1515],["T_OBJECT_OPERATOR","->",1515],["T_STRING","expects",1515],"(",["T_STATIC","static",1515],["T_DOUBLE_COLON","::",1515],["T_STRING","once",1515],"(",")",")",["T_WHITESPACE","\n            ",1515],["T_OBJECT_OPERATOR","->",1516],["T_STRING","method",1516],"(",["T_CONSTANT_ENCAPSED_STRING","'getBaseCurrency'",1516],")",["T_WHITESPACE","\n            ",1516],["T_OBJECT_OPERATOR","->",1517],["T_STRING","willReturn",1517],"(",["T_VARIABLE","$this",1517],["T_OBJECT_OPERATOR","->",1517],["T_STRING","currencyMock",1517],")",";",["T_WHITESPACE","\n\n        ",1517],["T_VARIABLE","$status",1519],["T_WHITESPACE"," ",1519],"=",["T_WHITESPACE"," ",1519],["T_CONSTANT_ENCAPSED_STRING","'status'",1519],";",["T_WHITESPACE","\n        ",1519],["T_VARIABLE","$message",1520],["T_WHITESPACE"," ",1520],"=",["T_WHITESPACE"," ",1520],["T_CONSTANT_ENCAPSED_STRING","'We refunded '",1520],["T_WHITESPACE"," ",1520],".",["T_WHITESPACE"," ",1520],["T_VARIABLE","$amount",1520],["T_WHITESPACE"," ",1520],".",["T_WHITESPACE"," ",1520],["T_CONSTANT_ENCAPSED_STRING","' online. Transaction ID: \"'",1520],["T_WHITESPACE"," ",1520],".",["T_WHITESPACE"," ",1520],["T_VARIABLE","$refundTranId",1520],["T_WHITESPACE"," ",1520],".",["T_WHITESPACE"," ",1520],["T_CONSTANT_ENCAPSED_STRING","'\"'",1520],";",["T_WHITESPACE","\n        ",1520],["T_VARIABLE","$this",1521],["T_OBJECT_OPERATOR","->",1521],["T_STRING","orderStateResolverMock",1521],["T_OBJECT_OPERATOR","->",1521],["T_STRING","expects",1521],"(",["T_VARIABLE","$this",1521],["T_OBJECT_OPERATOR","->",1521],["T_STRING","once",1521],"(",")",")",["T_OBJECT_OPERATOR","->",1521],["T_STRING","method",1521],"(",["T_CONSTANT_ENCAPSED_STRING","'getStateForOrder'",1521],")",["T_WHITESPACE","\n            ",1521],["T_OBJECT_OPERATOR","->",1522],["T_STRING","with",1522],"(",["T_VARIABLE","$this",1522],["T_OBJECT_OPERATOR","->",1522],["T_STRING","orderMock",1522],")",["T_WHITESPACE","\n            ",1522],["T_OBJECT_OPERATOR","->",1523],["T_STRING","willReturn",1523],"(",["T_STRING","Order",1523],["T_DOUBLE_COLON","::",1523],["T_STRING","STATE_CLOSED",1523],")",";",["T_WHITESPACE","\n        ",1523],["T_VARIABLE","$this",1524],["T_OBJECT_OPERATOR","->",1524],["T_STRING","mockGetDefaultStatus",1524],"(",["T_STRING","Order",1524],["T_DOUBLE_COLON","::",1524],["T_STRING","STATE_CLOSED",1524],",",["T_WHITESPACE"," ",1524],["T_VARIABLE","$status",1524],")",";",["T_WHITESPACE","\n        ",1524],["T_VARIABLE","$this",1525],["T_OBJECT_OPERATOR","->",1525],["T_STRING","assertOrderUpdated",1525],"(",["T_STRING","Order",1525],["T_DOUBLE_COLON","::",1525],["T_STRING","STATE_PROCESSING",1525],",",["T_WHITESPACE"," ",1525],["T_VARIABLE","$status",1525],",",["T_WHITESPACE"," ",1525],["T_VARIABLE","$message",1525],")",";",["T_WHITESPACE","\n\n        ",1525],["T_STATIC","static",1527],["T_DOUBLE_COLON","::",1527],["T_STRING","assertSame",1527],"(",["T_VARIABLE","$this",1527],["T_OBJECT_OPERATOR","->",1527],["T_STRING","payment",1527],",",["T_WHITESPACE"," ",1527],["T_VARIABLE","$this",1527],["T_OBJECT_OPERATOR","->",1527],["T_STRING","payment",1527],["T_OBJECT_OPERATOR","->",1527],["T_STRING","refund",1527],"(",["T_VARIABLE","$this",1527],["T_OBJECT_OPERATOR","->",1527],["T_STRING","creditMemoMock",1527],")",")",";",["T_WHITESPACE","\n        ",1527],["T_STATIC","static",1528],["T_DOUBLE_COLON","::",1528],["T_STRING","assertEquals",1528],"(",["T_VARIABLE","$amount",1528],",",["T_WHITESPACE"," ",1528],["T_VARIABLE","$this",1528],["T_OBJECT_OPERATOR","->",1528],["T_STRING","payment",1528],["T_OBJECT_OPERATOR","->",1528],["T_STRING","getData",1528],"(",["T_CONSTANT_ENCAPSED_STRING","'amount_refunded'",1528],")",")",";",["T_WHITESPACE","\n        ",1528],["T_STATIC","static",1529],["T_DOUBLE_COLON","::",1529],["T_STRING","assertEquals",1529],"(",["T_VARIABLE","$amount",1529],",",["T_WHITESPACE"," ",1529],["T_VARIABLE","$this",1529],["T_OBJECT_OPERATOR","->",1529],["T_STRING","payment",1529],["T_OBJECT_OPERATOR","->",1529],["T_STRING","getData",1529],"(",["T_CONSTANT_ENCAPSED_STRING","'base_amount_refunded_online'",1529],")",")",";",["T_WHITESPACE","\n        ",1529],["T_STATIC","static",1530],["T_DOUBLE_COLON","::",1530],["T_STRING","assertEquals",1530],"(",["T_VARIABLE","$amount",1530],",",["T_WHITESPACE"," ",1530],["T_VARIABLE","$this",1530],["T_OBJECT_OPERATOR","->",1530],["T_STRING","payment",1530],["T_OBJECT_OPERATOR","->",1530],["T_STRING","getData",1530],"(",["T_CONSTANT_ENCAPSED_STRING","'base_amount_refunded'",1530],")",")",";",["T_WHITESPACE","\n    ",1530],"}",["T_WHITESPACE","\n\n    ",1531],["T_PUBLIC","public",1533],["T_WHITESPACE"," ",1533],["T_FUNCTION","function",1533],["T_WHITESPACE"," ",1533],["T_STRING","boolProvider",1533],"(",")",["T_WHITESPACE","\n    ",1533],"{",["T_WHITESPACE","\n        ",1534],["T_RETURN","return",1535],["T_WHITESPACE"," ",1535],"[",["T_WHITESPACE","\n            ",1535],"[",["T_STRING","true",1536],"]",",",["T_WHITESPACE","\n            ",1536],"[",["T_STRING","false",1537],"]",["T_WHITESPACE","\n        ",1537],"]",";",["T_WHITESPACE","\n    ",1538],"}",["T_WHITESPACE","\n\n    ",1539],["T_DOC_COMMENT","\/**\n     * @covers \\Magento\\Sales\\Model\\Order\\Payment::isCaptureFinal()\n     * @return void\n     *\/",1541],["T_WHITESPACE","\n    ",1544],["T_PUBLIC","public",1545],["T_WHITESPACE"," ",1545],["T_FUNCTION","function",1545],["T_WHITESPACE"," ",1545],["T_STRING","testIsCaptureFinal",1545],"(",")",["T_WHITESPACE","\n    ",1545],"{",["T_WHITESPACE","\n        ",1546],["T_VARIABLE","$amount",1547],["T_WHITESPACE"," ",1547],"=",["T_WHITESPACE"," ",1547],["T_DNUMBER","23.02",1547],";",["T_WHITESPACE","\n        ",1547],["T_VARIABLE","$partialAmount",1548],["T_WHITESPACE"," ",1548],"=",["T_WHITESPACE"," ",1548],["T_DNUMBER","12.00",1548],";",["T_WHITESPACE","\n\n        ",1548],["T_VARIABLE","$this",1550],["T_OBJECT_OPERATOR","->",1550],["T_STRING","orderMock",1550],["T_OBJECT_OPERATOR","->",1550],["T_STRING","expects",1550],"(",["T_STATIC","static",1550],["T_DOUBLE_COLON","::",1550],["T_STRING","exactly",1550],"(",["T_LNUMBER","2",1550],")",")",["T_WHITESPACE","\n            ",1550],["T_OBJECT_OPERATOR","->",1551],["T_STRING","method",1551],"(",["T_CONSTANT_ENCAPSED_STRING","'getBaseTotalDue'",1551],")",["T_WHITESPACE","\n            ",1551],["T_OBJECT_OPERATOR","->",1552],["T_STRING","willReturn",1552],"(",["T_VARIABLE","$amount",1552],")",";",["T_WHITESPACE","\n\n        ",1552],["T_STATIC","static",1554],["T_DOUBLE_COLON","::",1554],["T_STRING","assertFalse",1554],"(",["T_VARIABLE","$this",1554],["T_OBJECT_OPERATOR","->",1554],["T_STRING","payment",1554],["T_OBJECT_OPERATOR","->",1554],["T_STRING","isCaptureFinal",1554],"(",["T_VARIABLE","$partialAmount",1554],")",")",";",["T_WHITESPACE","\n        ",1554],["T_STATIC","static",1555],["T_DOUBLE_COLON","::",1555],["T_STRING","assertTrue",1555],"(",["T_VARIABLE","$this",1555],["T_OBJECT_OPERATOR","->",1555],["T_STRING","payment",1555],["T_OBJECT_OPERATOR","->",1555],["T_STRING","isCaptureFinal",1555],"(",["T_VARIABLE","$amount",1555],")",")",";",["T_WHITESPACE","\n    ",1555],"}",["T_WHITESPACE","\n\n    ",1556],["T_DOC_COMMENT","\/**\n     * @covers \\Magento\\Sales\\Model\\Order\\Payment::getShouldCloseParentTransaction()\n     * @return void\n     *\/",1558],["T_WHITESPACE","\n    ",1561],["T_PUBLIC","public",1562],["T_WHITESPACE"," ",1562],["T_FUNCTION","function",1562],["T_WHITESPACE"," ",1562],["T_STRING","testGetShouldCloseParentTransaction",1562],"(",")",["T_WHITESPACE","\n    ",1562],"{",["T_WHITESPACE","\n        ",1563],["T_VARIABLE","$this",1564],["T_OBJECT_OPERATOR","->",1564],["T_STRING","payment",1564],["T_OBJECT_OPERATOR","->",1564],["T_STRING","setShouldCloseParentTransaction",1564],"(",["T_LNUMBER","1",1564],")",";",["T_WHITESPACE","\n        ",1564],["T_STATIC","static",1565],["T_DOUBLE_COLON","::",1565],["T_STRING","assertTrue",1565],"(",["T_VARIABLE","$this",1565],["T_OBJECT_OPERATOR","->",1565],["T_STRING","payment",1565],["T_OBJECT_OPERATOR","->",1565],["T_STRING","getShouldCloseParentTransaction",1565],"(",")",")",";",["T_WHITESPACE","\n\n        ",1565],["T_VARIABLE","$this",1567],["T_OBJECT_OPERATOR","->",1567],["T_STRING","payment",1567],["T_OBJECT_OPERATOR","->",1567],["T_STRING","setShouldCloseParentTransaction",1567],"(",["T_LNUMBER","0",1567],")",";",["T_WHITESPACE","\n        ",1567],["T_STATIC","static",1568],["T_DOUBLE_COLON","::",1568],["T_STRING","assertFalse",1568],"(",["T_VARIABLE","$this",1568],["T_OBJECT_OPERATOR","->",1568],["T_STRING","payment",1568],["T_OBJECT_OPERATOR","->",1568],["T_STRING","getShouldCloseParentTransaction",1568],"(",")",")",";",["T_WHITESPACE","\n    ",1568],"}",["T_WHITESPACE","\n\n    ",1569],["T_PROTECTED","protected",1571],["T_WHITESPACE"," ",1571],["T_FUNCTION","function",1571],["T_WHITESPACE"," ",1571],["T_STRING","initPayment",1571],"(",")",["T_WHITESPACE","\n    ",1571],"{",["T_WHITESPACE","\n        ",1572],["T_RETURN","return",1573],["T_WHITESPACE"," ",1573],"(",["T_NEW","new",1573],["T_WHITESPACE"," ",1573],["T_NS_SEPARATOR","\\",1573],["T_STRING","Magento",1573],["T_NS_SEPARATOR","\\",1573],["T_STRING","Framework",1573],["T_NS_SEPARATOR","\\",1573],["T_STRING","TestFramework",1573],["T_NS_SEPARATOR","\\",1573],["T_STRING","Unit",1573],["T_NS_SEPARATOR","\\",1573],["T_STRING","Helper",1573],["T_NS_SEPARATOR","\\",1573],["T_STRING","ObjectManager",1573],"(",["T_VARIABLE","$this",1573],")",")",["T_OBJECT_OPERATOR","->",1573],["T_STRING","getObject",1573],"(",["T_WHITESPACE","\n            ",1573],["T_NS_SEPARATOR","\\",1574],["T_STRING","Magento",1574],["T_NS_SEPARATOR","\\",1574],["T_STRING","Sales",1574],["T_NS_SEPARATOR","\\",1574],["T_STRING","Model",1574],["T_NS_SEPARATOR","\\",1574],["T_STRING","Order",1574],["T_NS_SEPARATOR","\\",1574],["T_STRING","Payment",1574],["T_DOUBLE_COLON","::",1574],["T_CLASS","class",1574],",",["T_WHITESPACE","\n            ",1574],"[",["T_WHITESPACE","\n                ",1575],["T_CONSTANT_ENCAPSED_STRING","'context'",1576],["T_WHITESPACE"," ",1576],["T_DOUBLE_ARROW","=>",1576],["T_WHITESPACE"," ",1576],["T_VARIABLE","$this",1576],["T_OBJECT_OPERATOR","->",1576],["T_STRING","mockContext",1576],",",["T_WHITESPACE","\n                ",1576],["T_CONSTANT_ENCAPSED_STRING","'creditmemoFactory'",1577],["T_WHITESPACE"," ",1577],["T_DOUBLE_ARROW","=>",1577],["T_WHITESPACE"," ",1577],["T_VARIABLE","$this",1577],["T_OBJECT_OPERATOR","->",1577],["T_STRING","creditmemoFactoryMock",1577],",",["T_WHITESPACE","\n                ",1577],["T_CONSTANT_ENCAPSED_STRING","'paymentData'",1578],["T_WHITESPACE"," ",1578],["T_DOUBLE_ARROW","=>",1578],["T_WHITESPACE"," ",1578],["T_VARIABLE","$this",1578],["T_OBJECT_OPERATOR","->",1578],["T_STRING","helperMock",1578],",",["T_WHITESPACE","\n                ",1578],["T_CONSTANT_ENCAPSED_STRING","'priceCurrency'",1579],["T_WHITESPACE"," ",1579],["T_DOUBLE_ARROW","=>",1579],["T_WHITESPACE"," ",1579],["T_VARIABLE","$this",1579],["T_OBJECT_OPERATOR","->",1579],["T_STRING","priceCurrencyMock",1579],",",["T_WHITESPACE","\n                ",1579],["T_CONSTANT_ENCAPSED_STRING","'transactionRepository'",1580],["T_WHITESPACE"," ",1580],["T_DOUBLE_ARROW","=>",1580],["T_WHITESPACE"," ",1580],["T_VARIABLE","$this",1580],["T_OBJECT_OPERATOR","->",1580],["T_STRING","transactionRepositoryMock",1580],",",["T_WHITESPACE","\n                ",1580],["T_CONSTANT_ENCAPSED_STRING","'transactionManager'",1581],["T_WHITESPACE"," ",1581],["T_DOUBLE_ARROW","=>",1581],["T_WHITESPACE"," ",1581],["T_VARIABLE","$this",1581],["T_OBJECT_OPERATOR","->",1581],["T_STRING","transactionManagerMock",1581],",",["T_WHITESPACE","\n                ",1581],["T_CONSTANT_ENCAPSED_STRING","'transactionBuilder'",1582],["T_WHITESPACE"," ",1582],["T_DOUBLE_ARROW","=>",1582],["T_WHITESPACE"," ",1582],["T_VARIABLE","$this",1582],["T_OBJECT_OPERATOR","->",1582],["T_STRING","transactionBuilderMock",1582],",",["T_WHITESPACE","\n                ",1582],["T_CONSTANT_ENCAPSED_STRING","'paymentProcessor'",1583],["T_WHITESPACE"," ",1583],["T_DOUBLE_ARROW","=>",1583],["T_WHITESPACE"," ",1583],["T_VARIABLE","$this",1583],["T_OBJECT_OPERATOR","->",1583],["T_STRING","paymentProcessor",1583],",",["T_WHITESPACE","\n                ",1583],["T_CONSTANT_ENCAPSED_STRING","'orderRepository'",1584],["T_WHITESPACE"," ",1584],["T_DOUBLE_ARROW","=>",1584],["T_WHITESPACE"," ",1584],["T_VARIABLE","$this",1584],["T_OBJECT_OPERATOR","->",1584],["T_STRING","orderRepository",1584],["T_WHITESPACE","\n            ",1584],"]",["T_WHITESPACE","\n        ",1585],")",";",["T_WHITESPACE","\n    ",1586],"}",["T_WHITESPACE","\n\n    ",1587],["T_PROTECTED","protected",1589],["T_WHITESPACE"," ",1589],["T_FUNCTION","function",1589],["T_WHITESPACE"," ",1589],["T_STRING","assertOrderUpdated",1589],"(",["T_WHITESPACE","\n        ",1589],["T_VARIABLE","$state",1590],",",["T_WHITESPACE","\n        ",1590],["T_VARIABLE","$status",1591],["T_WHITESPACE"," ",1591],"=",["T_WHITESPACE"," ",1591],["T_STRING","null",1591],",",["T_WHITESPACE","\n        ",1591],["T_VARIABLE","$message",1592],["T_WHITESPACE"," ",1592],"=",["T_WHITESPACE"," ",1592],["T_STRING","null",1592],",",["T_WHITESPACE","\n        ",1592],["T_VARIABLE","$isCustomerNotified",1593],["T_WHITESPACE"," ",1593],"=",["T_WHITESPACE"," ",1593],["T_STRING","null",1593],["T_WHITESPACE","\n    ",1593],")",["T_WHITESPACE"," ",1594],"{",["T_WHITESPACE","\n        ",1594],["T_VARIABLE","$this",1595],["T_OBJECT_OPERATOR","->",1595],["T_STRING","orderMock",1595],["T_OBJECT_OPERATOR","->",1595],["T_STRING","expects",1595],"(",["T_VARIABLE","$this",1595],["T_OBJECT_OPERATOR","->",1595],["T_STRING","any",1595],"(",")",")",["T_WHITESPACE","\n            ",1595],["T_OBJECT_OPERATOR","->",1596],["T_STRING","method",1596],"(",["T_CONSTANT_ENCAPSED_STRING","'setState'",1596],")",["T_WHITESPACE","\n            ",1596],["T_OBJECT_OPERATOR","->",1597],["T_STRING","with",1597],"(",["T_VARIABLE","$state",1597],")",["T_WHITESPACE","\n            ",1597],["T_OBJECT_OPERATOR","->",1598],["T_STRING","willReturnSelf",1598],"(",")",";",["T_WHITESPACE","\n        ",1598],["T_VARIABLE","$this",1599],["T_OBJECT_OPERATOR","->",1599],["T_STRING","orderMock",1599],["T_OBJECT_OPERATOR","->",1599],["T_STRING","expects",1599],"(",["T_VARIABLE","$this",1599],["T_OBJECT_OPERATOR","->",1599],["T_STRING","any",1599],"(",")",")",["T_WHITESPACE","\n            ",1599],["T_OBJECT_OPERATOR","->",1600],["T_STRING","method",1600],"(",["T_CONSTANT_ENCAPSED_STRING","'setStatus'",1600],")",["T_WHITESPACE","\n            ",1600],["T_OBJECT_OPERATOR","->",1601],["T_STRING","with",1601],"(",["T_VARIABLE","$status",1601],")",["T_WHITESPACE","\n            ",1601],["T_OBJECT_OPERATOR","->",1602],["T_STRING","willReturnSelf",1602],"(",")",";",["T_WHITESPACE","\n\n        ",1602],["T_VARIABLE","$statusHistory",1604],["T_WHITESPACE"," ",1604],"=",["T_WHITESPACE"," ",1604],["T_VARIABLE","$this",1604],["T_OBJECT_OPERATOR","->",1604],["T_STRING","getMockForAbstractClass",1604],"(",["T_WHITESPACE","\n            ",1604],["T_NS_SEPARATOR","\\",1605],["T_STRING","Magento",1605],["T_NS_SEPARATOR","\\",1605],["T_STRING","Sales",1605],["T_NS_SEPARATOR","\\",1605],["T_STRING","Api",1605],["T_NS_SEPARATOR","\\",1605],["T_STRING","Data",1605],["T_NS_SEPARATOR","\\",1605],["T_STRING","OrderStatusHistoryInterface",1605],["T_DOUBLE_COLON","::",1605],["T_CLASS","class",1605],["T_WHITESPACE","\n        ",1605],")",";",["T_WHITESPACE","\n        ",1606],["T_VARIABLE","$this",1607],["T_OBJECT_OPERATOR","->",1607],["T_STRING","orderMock",1607],["T_OBJECT_OPERATOR","->",1607],["T_STRING","expects",1607],"(",["T_VARIABLE","$this",1607],["T_OBJECT_OPERATOR","->",1607],["T_STRING","any",1607],"(",")",")",["T_WHITESPACE","\n            ",1607],["T_OBJECT_OPERATOR","->",1608],["T_STRING","method",1608],"(",["T_CONSTANT_ENCAPSED_STRING","'addStatusHistoryComment'",1608],")",["T_WHITESPACE","\n            ",1608],["T_OBJECT_OPERATOR","->",1609],["T_STRING","with",1609],"(",["T_VARIABLE","$message",1609],")",["T_WHITESPACE","\n            ",1609],["T_OBJECT_OPERATOR","->",1610],["T_STRING","willReturn",1610],"(",["T_VARIABLE","$statusHistory",1610],")",";",["T_WHITESPACE","\n        ",1610],["T_VARIABLE","$this",1611],["T_OBJECT_OPERATOR","->",1611],["T_STRING","orderMock",1611],["T_OBJECT_OPERATOR","->",1611],["T_STRING","expects",1611],"(",["T_VARIABLE","$this",1611],["T_OBJECT_OPERATOR","->",1611],["T_STRING","any",1611],"(",")",")",["T_WHITESPACE","\n            ",1611],["T_OBJECT_OPERATOR","->",1612],["T_STRING","method",1612],"(",["T_CONSTANT_ENCAPSED_STRING","'setIsCustomerNotified'",1612],")",["T_WHITESPACE","\n            ",1612],["T_OBJECT_OPERATOR","->",1613],["T_STRING","with",1613],"(",["T_VARIABLE","$isCustomerNotified",1613],")",["T_WHITESPACE","\n            ",1613],["T_OBJECT_OPERATOR","->",1614],["T_STRING","willReturn",1614],"(",["T_VARIABLE","$statusHistory",1614],")",";",["T_WHITESPACE","\n    ",1614],"}",["T_WHITESPACE","\n\n    ",1615],["T_PROTECTED","protected",1617],["T_WHITESPACE"," ",1617],["T_FUNCTION","function",1617],["T_WHITESPACE"," ",1617],["T_STRING","mockGetDefaultStatus",1617],"(",["T_VARIABLE","$state",1617],",",["T_WHITESPACE"," ",1617],["T_VARIABLE","$status",1617],",",["T_WHITESPACE"," ",1617],["T_VARIABLE","$allStatuses",1617],["T_WHITESPACE"," ",1617],"=",["T_WHITESPACE"," ",1617],"[","]",")",["T_WHITESPACE","\n    ",1617],"{",["T_WHITESPACE","\n        ",1618],["T_DOC_COMMENT","\/** @var \\Magento\\Sales\\Model\\Order\\Config | \\PHPUnit_Framework_MockObject_MockObject $orderConfigMock *\/",1619],["T_WHITESPACE","\n        ",1619],["T_VARIABLE","$orderConfigMock",1620],["T_WHITESPACE"," ",1620],"=",["T_WHITESPACE"," ",1620],["T_VARIABLE","$this",1620],["T_OBJECT_OPERATOR","->",1620],["T_STRING","getMockBuilder",1620],"(",["T_NS_SEPARATOR","\\",1620],["T_STRING","Magento",1620],["T_NS_SEPARATOR","\\",1620],["T_STRING","Sales",1620],["T_NS_SEPARATOR","\\",1620],["T_STRING","Model",1620],["T_NS_SEPARATOR","\\",1620],["T_STRING","Order",1620],["T_NS_SEPARATOR","\\",1620],["T_STRING","Config",1620],["T_DOUBLE_COLON","::",1620],["T_CLASS","class",1620],")",["T_WHITESPACE","\n            ",1620],["T_OBJECT_OPERATOR","->",1621],["T_STRING","disableOriginalConstructor",1621],"(",")",["T_WHITESPACE","\n            ",1621],["T_OBJECT_OPERATOR","->",1622],["T_STRING","setMethods",1622],"(","[",["T_CONSTANT_ENCAPSED_STRING","'getStateStatuses'",1622],",",["T_WHITESPACE"," ",1622],["T_CONSTANT_ENCAPSED_STRING","'getStateDefaultStatus'",1622],"]",")",["T_WHITESPACE","\n            ",1622],["T_OBJECT_OPERATOR","->",1623],["T_STRING","getMock",1623],"(",")",";",["T_WHITESPACE","\n\n        ",1623],["T_IF","if",1625],["T_WHITESPACE"," ",1625],"(","!",["T_EMPTY","empty",1625],"(",["T_VARIABLE","$allStatuses",1625],")",")",["T_WHITESPACE"," ",1625],"{",["T_WHITESPACE","\n            ",1625],["T_VARIABLE","$orderConfigMock",1626],["T_OBJECT_OPERATOR","->",1626],["T_STRING","expects",1626],"(",["T_VARIABLE","$this",1626],["T_OBJECT_OPERATOR","->",1626],["T_STRING","any",1626],"(",")",")",["T_WHITESPACE","\n                ",1626],["T_OBJECT_OPERATOR","->",1627],["T_STRING","method",1627],"(",["T_CONSTANT_ENCAPSED_STRING","'getStateStatuses'",1627],")",["T_WHITESPACE","\n                ",1627],["T_OBJECT_OPERATOR","->",1628],["T_STRING","with",1628],"(",["T_VARIABLE","$state",1628],")",["T_WHITESPACE","\n                ",1628],["T_OBJECT_OPERATOR","->",1629],["T_STRING","will",1629],"(",["T_VARIABLE","$this",1629],["T_OBJECT_OPERATOR","->",1629],["T_STRING","returnValue",1629],"(",["T_VARIABLE","$allStatuses",1629],")",")",";",["T_WHITESPACE","\n        ",1629],"}",["T_WHITESPACE","\n\n        ",1630],["T_VARIABLE","$orderConfigMock",1632],["T_OBJECT_OPERATOR","->",1632],["T_STRING","expects",1632],"(",["T_VARIABLE","$this",1632],["T_OBJECT_OPERATOR","->",1632],["T_STRING","any",1632],"(",")",")",["T_WHITESPACE","\n            ",1632],["T_OBJECT_OPERATOR","->",1633],["T_STRING","method",1633],"(",["T_CONSTANT_ENCAPSED_STRING","'getStateDefaultStatus'",1633],")",["T_WHITESPACE","\n            ",1633],["T_OBJECT_OPERATOR","->",1634],["T_STRING","with",1634],"(",["T_VARIABLE","$state",1634],")",["T_WHITESPACE","\n            ",1634],["T_OBJECT_OPERATOR","->",1635],["T_STRING","will",1635],"(",["T_VARIABLE","$this",1635],["T_OBJECT_OPERATOR","->",1635],["T_STRING","returnValue",1635],"(",["T_VARIABLE","$status",1635],")",")",";",["T_WHITESPACE","\n\n        ",1635],["T_VARIABLE","$this",1637],["T_OBJECT_OPERATOR","->",1637],["T_STRING","orderMock",1637],["T_OBJECT_OPERATOR","->",1637],["T_STRING","expects",1637],"(",["T_VARIABLE","$this",1637],["T_OBJECT_OPERATOR","->",1637],["T_STRING","any",1637],"(",")",")",["T_WHITESPACE","\n            ",1637],["T_OBJECT_OPERATOR","->",1638],["T_STRING","method",1638],"(",["T_CONSTANT_ENCAPSED_STRING","'getConfig'",1638],")",["T_WHITESPACE","\n            ",1638],["T_OBJECT_OPERATOR","->",1639],["T_STRING","will",1639],"(",["T_VARIABLE","$this",1639],["T_OBJECT_OPERATOR","->",1639],["T_STRING","returnValue",1639],"(",["T_VARIABLE","$orderConfigMock",1639],")",")",";",["T_WHITESPACE","\n    ",1639],"}",["T_WHITESPACE","\n\n    ",1640],["T_PROTECTED","protected",1642],["T_WHITESPACE"," ",1642],["T_FUNCTION","function",1642],["T_WHITESPACE"," ",1642],["T_STRING","getTransactionMock",1642],"(",["T_VARIABLE","$transactionId",1642],")",["T_WHITESPACE","\n    ",1642],"{",["T_WHITESPACE","\n        ",1643],["T_VARIABLE","$transaction",1644],["T_WHITESPACE"," ",1644],"=",["T_WHITESPACE"," ",1644],["T_VARIABLE","$this",1644],["T_OBJECT_OPERATOR","->",1644],["T_STRING","getMock",1644],"(",["T_WHITESPACE","\n            ",1644],["T_NS_SEPARATOR","\\",1645],["T_STRING","Magento",1645],["T_NS_SEPARATOR","\\",1645],["T_STRING","Sales",1645],["T_NS_SEPARATOR","\\",1645],["T_STRING","Model",1645],["T_NS_SEPARATOR","\\",1645],["T_STRING","Order",1645],["T_NS_SEPARATOR","\\",1645],["T_STRING","Payment",1645],["T_NS_SEPARATOR","\\",1645],["T_STRING","Transaction",1645],["T_DOUBLE_COLON","::",1645],["T_CLASS","class",1645],",",["T_WHITESPACE","\n            ",1645],"[",["T_WHITESPACE","\n                ",1646],["T_CONSTANT_ENCAPSED_STRING","'getId'",1647],",",["T_WHITESPACE","\n                ",1647],["T_CONSTANT_ENCAPSED_STRING","'setOrderId'",1648],",",["T_WHITESPACE","\n                ",1648],["T_CONSTANT_ENCAPSED_STRING","'setPaymentId'",1649],",",["T_WHITESPACE","\n                ",1649],["T_CONSTANT_ENCAPSED_STRING","'loadByTxnId'",1650],",",["T_WHITESPACE","\n                ",1650],["T_CONSTANT_ENCAPSED_STRING","'setTxnId'",1651],",",["T_WHITESPACE","\n                ",1651],["T_CONSTANT_ENCAPSED_STRING","'getTransactionId'",1652],",",["T_WHITESPACE","\n                ",1652],["T_CONSTANT_ENCAPSED_STRING","'setTxnType'",1653],",",["T_WHITESPACE","\n                ",1653],["T_CONSTANT_ENCAPSED_STRING","'isFailsafe'",1654],",",["T_WHITESPACE","\n                ",1654],["T_CONSTANT_ENCAPSED_STRING","'getTxnId'",1655],",",["T_WHITESPACE","\n                ",1655],["T_CONSTANT_ENCAPSED_STRING","'getHtmlTxnId'",1656],",",["T_WHITESPACE","\n                ",1656],["T_CONSTANT_ENCAPSED_STRING","'getTxnType'",1657],["T_WHITESPACE","\n            ",1657],"]",",",["T_WHITESPACE","\n            ",1658],"[","]",",",["T_WHITESPACE","\n            ",1659],["T_CONSTANT_ENCAPSED_STRING","''",1660],",",["T_WHITESPACE","\n            ",1660],["T_STRING","false",1661],["T_WHITESPACE","\n        ",1661],")",";",["T_WHITESPACE","\n        ",1662],["T_VARIABLE","$transaction",1663],["T_OBJECT_OPERATOR","->",1663],["T_STRING","expects",1663],"(",["T_VARIABLE","$this",1663],["T_OBJECT_OPERATOR","->",1663],["T_STRING","any",1663],"(",")",")",["T_OBJECT_OPERATOR","->",1663],["T_STRING","method",1663],"(",["T_CONSTANT_ENCAPSED_STRING","'getId'",1663],")",["T_OBJECT_OPERATOR","->",1663],["T_STRING","willReturn",1663],"(",["T_VARIABLE","$transactionId",1663],")",";",["T_WHITESPACE","\n        ",1663],["T_VARIABLE","$transaction",1664],["T_OBJECT_OPERATOR","->",1664],["T_STRING","expects",1664],"(",["T_VARIABLE","$this",1664],["T_OBJECT_OPERATOR","->",1664],["T_STRING","any",1664],"(",")",")",["T_OBJECT_OPERATOR","->",1664],["T_STRING","method",1664],"(",["T_CONSTANT_ENCAPSED_STRING","'getTxnId'",1664],")",["T_OBJECT_OPERATOR","->",1664],["T_STRING","willReturn",1664],"(",["T_VARIABLE","$transactionId",1664],")",";",["T_WHITESPACE","\n        ",1664],["T_VARIABLE","$transaction",1665],["T_OBJECT_OPERATOR","->",1665],["T_STRING","expects",1665],"(",["T_VARIABLE","$this",1665],["T_OBJECT_OPERATOR","->",1665],["T_STRING","any",1665],"(",")",")",["T_OBJECT_OPERATOR","->",1665],["T_STRING","method",1665],"(",["T_CONSTANT_ENCAPSED_STRING","'getHtmlTxnId'",1665],")",["T_OBJECT_OPERATOR","->",1665],["T_STRING","willReturn",1665],"(",["T_VARIABLE","$transactionId",1665],")",";",["T_WHITESPACE","\n        ",1665],["T_RETURN","return",1666],["T_WHITESPACE"," ",1666],["T_VARIABLE","$transaction",1666],";",["T_WHITESPACE","\n    ",1666],"}",["T_WHITESPACE","\n\n    ",1667],["T_DOC_COMMENT","\/**\n     * @param $additionalInformation\n     * @param $failSafe\n     * @param $transactionType\n     * @param bool $transactionId\n     *\/",1669],["T_WHITESPACE","\n    ",1674],["T_PROTECTED","protected",1675],["T_WHITESPACE"," ",1675],["T_FUNCTION","function",1675],["T_WHITESPACE"," ",1675],["T_STRING","getTransactionBuilderMock",1675],"(",["T_WHITESPACE","\n        ",1675],["T_VARIABLE","$additionalInformation",1676],",",["T_WHITESPACE","\n        ",1676],["T_VARIABLE","$failSafe",1677],",",["T_WHITESPACE","\n        ",1677],["T_VARIABLE","$transactionType",1678],",",["T_WHITESPACE","\n        ",1678],["T_VARIABLE","$transactionId",1679],["T_WHITESPACE"," ",1679],"=",["T_WHITESPACE"," ",1679],["T_STRING","false",1679],["T_WHITESPACE","\n    ",1679],")",["T_WHITESPACE"," ",1680],"{",["T_WHITESPACE","\n        ",1680],["T_IF","if",1681],["T_WHITESPACE"," ",1681],"(","!",["T_VARIABLE","$transactionId",1681],")",["T_WHITESPACE"," ",1681],"{",["T_WHITESPACE","\n            ",1681],["T_VARIABLE","$transactionId",1682],["T_WHITESPACE"," ",1682],"=",["T_WHITESPACE"," ",1682],["T_VARIABLE","$this",1682],["T_OBJECT_OPERATOR","->",1682],["T_STRING","transactionId",1682],";",["T_WHITESPACE","\n        ",1682],"}",["T_WHITESPACE","\n        ",1683],["T_VARIABLE","$this",1684],["T_OBJECT_OPERATOR","->",1684],["T_STRING","transactionBuilderMock",1684],["T_OBJECT_OPERATOR","->",1684],["T_STRING","expects",1684],"(",["T_VARIABLE","$this",1684],["T_OBJECT_OPERATOR","->",1684],["T_STRING","once",1684],"(",")",")",["T_WHITESPACE","\n            ",1684],["T_OBJECT_OPERATOR","->",1685],["T_STRING","method",1685],"(",["T_CONSTANT_ENCAPSED_STRING","'setPayment'",1685],")",["T_WHITESPACE","\n            ",1685],["T_OBJECT_OPERATOR","->",1686],["T_STRING","with",1686],"(",["T_VARIABLE","$this",1686],["T_OBJECT_OPERATOR","->",1686],["T_STRING","payment",1686],")",["T_WHITESPACE","\n            ",1686],["T_OBJECT_OPERATOR","->",1687],["T_STRING","willReturnSelf",1687],"(",")",";",["T_WHITESPACE","\n        ",1687],["T_VARIABLE","$this",1688],["T_OBJECT_OPERATOR","->",1688],["T_STRING","transactionBuilderMock",1688],["T_OBJECT_OPERATOR","->",1688],["T_STRING","expects",1688],"(",["T_VARIABLE","$this",1688],["T_OBJECT_OPERATOR","->",1688],["T_STRING","once",1688],"(",")",")",["T_WHITESPACE","\n            ",1688],["T_OBJECT_OPERATOR","->",1689],["T_STRING","method",1689],"(",["T_CONSTANT_ENCAPSED_STRING","'setOrder'",1689],")",["T_WHITESPACE","\n            ",1689],["T_OBJECT_OPERATOR","->",1690],["T_STRING","with",1690],"(",["T_VARIABLE","$this",1690],["T_OBJECT_OPERATOR","->",1690],["T_STRING","orderMock",1690],")",["T_WHITESPACE","\n            ",1690],["T_OBJECT_OPERATOR","->",1691],["T_STRING","willReturnSelf",1691],"(",")",";",["T_WHITESPACE","\n        ",1691],["T_VARIABLE","$this",1692],["T_OBJECT_OPERATOR","->",1692],["T_STRING","transactionBuilderMock",1692],["T_OBJECT_OPERATOR","->",1692],["T_STRING","expects",1692],"(",["T_VARIABLE","$this",1692],["T_OBJECT_OPERATOR","->",1692],["T_STRING","once",1692],"(",")",")",["T_WHITESPACE","\n            ",1692],["T_OBJECT_OPERATOR","->",1693],["T_STRING","method",1693],"(",["T_CONSTANT_ENCAPSED_STRING","'setTransactionId'",1693],")",["T_WHITESPACE","\n            ",1693],["T_OBJECT_OPERATOR","->",1694],["T_STRING","with",1694],"(",["T_VARIABLE","$transactionId",1694],")",["T_WHITESPACE","\n            ",1694],["T_OBJECT_OPERATOR","->",1695],["T_STRING","willReturnSelf",1695],"(",")",";",["T_WHITESPACE","\n        ",1695],["T_VARIABLE","$this",1696],["T_OBJECT_OPERATOR","->",1696],["T_STRING","transactionBuilderMock",1696],["T_OBJECT_OPERATOR","->",1696],["T_STRING","expects",1696],"(",["T_VARIABLE","$this",1696],["T_OBJECT_OPERATOR","->",1696],["T_STRING","once",1696],"(",")",")",["T_WHITESPACE","\n            ",1696],["T_OBJECT_OPERATOR","->",1697],["T_STRING","method",1697],"(",["T_CONSTANT_ENCAPSED_STRING","'setAdditionalInformation'",1697],")",["T_WHITESPACE","\n            ",1697],["T_OBJECT_OPERATOR","->",1698],["T_STRING","with",1698],"(",["T_VARIABLE","$additionalInformation",1698],")",["T_WHITESPACE","\n            ",1698],["T_OBJECT_OPERATOR","->",1699],["T_STRING","willReturnSelf",1699],"(",")",";",["T_WHITESPACE","\n        ",1699],["T_VARIABLE","$this",1700],["T_OBJECT_OPERATOR","->",1700],["T_STRING","transactionBuilderMock",1700],["T_OBJECT_OPERATOR","->",1700],["T_STRING","expects",1700],"(",["T_VARIABLE","$this",1700],["T_OBJECT_OPERATOR","->",1700],["T_STRING","once",1700],"(",")",")",["T_WHITESPACE","\n            ",1700],["T_OBJECT_OPERATOR","->",1701],["T_STRING","method",1701],"(",["T_CONSTANT_ENCAPSED_STRING","'setFailSafe'",1701],")",["T_WHITESPACE","\n            ",1701],["T_OBJECT_OPERATOR","->",1702],["T_STRING","with",1702],"(",["T_VARIABLE","$failSafe",1702],")",["T_WHITESPACE","\n            ",1702],["T_OBJECT_OPERATOR","->",1703],["T_STRING","willReturnSelf",1703],"(",")",";",["T_WHITESPACE","\n        ",1703],["T_VARIABLE","$transaction",1704],["T_WHITESPACE"," ",1704],"=",["T_WHITESPACE"," ",1704],["T_VARIABLE","$this",1704],["T_OBJECT_OPERATOR","->",1704],["T_STRING","getTransactionMock",1704],"(",["T_VARIABLE","$transactionId",1704],")",";",["T_WHITESPACE","\n        ",1704],["T_VARIABLE","$this",1705],["T_OBJECT_OPERATOR","->",1705],["T_STRING","transactionBuilderMock",1705],["T_OBJECT_OPERATOR","->",1705],["T_STRING","expects",1705],"(",["T_VARIABLE","$this",1705],["T_OBJECT_OPERATOR","->",1705],["T_STRING","once",1705],"(",")",")",["T_WHITESPACE","\n            ",1705],["T_OBJECT_OPERATOR","->",1706],["T_STRING","method",1706],"(",["T_CONSTANT_ENCAPSED_STRING","'build'",1706],")",["T_WHITESPACE","\n            ",1706],["T_OBJECT_OPERATOR","->",1707],["T_STRING","with",1707],"(",["T_VARIABLE","$transactionType",1707],")",["T_WHITESPACE","\n            ",1707],["T_OBJECT_OPERATOR","->",1708],["T_STRING","willReturn",1708],"(",["T_VARIABLE","$transaction",1708],")",";",["T_WHITESPACE","\n    ",1708],"}",["T_WHITESPACE","\n\n    ",1709],["T_DOC_COMMENT","\/**\n     * @return string\n     *\/",1711],["T_WHITESPACE","\n    ",1713],["T_PROTECTED","protected",1714],["T_WHITESPACE"," ",1714],["T_FUNCTION","function",1714],["T_WHITESPACE"," ",1714],["T_STRING","getTransactionIdComment",1714],"(",")",["T_WHITESPACE","\n    ",1714],"{",["T_WHITESPACE","\n        ",1715],["T_RETURN","return",1716],["T_WHITESPACE"," ",1716],["T_STRING","__",1716],"(",["T_CONSTANT_ENCAPSED_STRING","' Transaction ID: \"%1\"'",1716],",",["T_WHITESPACE"," ",1716],["T_VARIABLE","$this",1716],["T_OBJECT_OPERATOR","->",1716],["T_STRING","transactionId",1716],")",";",["T_WHITESPACE","\n    ",1716],"}",["T_WHITESPACE","\n",1717],"}",["T_WHITESPACE","\n",1718]]
[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Copyright \u00c2\u00a9 2013-2017 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n *\/",2],["T_WHITESPACE","\n",5],["T_NAMESPACE","namespace",6],["T_WHITESPACE"," ",6],["T_STRING","Magento",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Sales",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Test",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Unit",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Model",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Order",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Creditmemo",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Validation",6],";",["T_WHITESPACE","\n\n",6],["T_USE","use",8],["T_WHITESPACE"," ",8],["T_STRING","Magento",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Framework",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Pricing",8],["T_NS_SEPARATOR","\\",8],["T_STRING","PriceCurrencyInterface",8],";",["T_WHITESPACE","\n",8],["T_USE","use",9],["T_WHITESPACE"," ",9],["T_STRING","Magento",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Sales",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Api",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Data",9],["T_NS_SEPARATOR","\\",9],["T_STRING","CreditmemoInterface",9],";",["T_WHITESPACE","\n",9],["T_USE","use",10],["T_WHITESPACE"," ",10],["T_STRING","Magento",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Sales",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Api",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Data",10],["T_NS_SEPARATOR","\\",10],["T_STRING","OrderInterface",10],";",["T_WHITESPACE","\n",10],["T_USE","use",11],["T_WHITESPACE"," ",11],["T_STRING","Magento",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Sales",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Api",11],["T_NS_SEPARATOR","\\",11],["T_STRING","InvoiceRepositoryInterface",11],";",["T_WHITESPACE","\n",11],["T_USE","use",12],["T_WHITESPACE"," ",12],["T_STRING","Magento",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Sales",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Api",12],["T_NS_SEPARATOR","\\",12],["T_STRING","OrderRepositoryInterface",12],";",["T_WHITESPACE","\n",12],["T_USE","use",13],["T_WHITESPACE"," ",13],["T_STRING","Magento",13],["T_NS_SEPARATOR","\\",13],["T_STRING","Sales",13],["T_NS_SEPARATOR","\\",13],["T_STRING","Model",13],["T_NS_SEPARATOR","\\",13],["T_STRING","Order",13],["T_NS_SEPARATOR","\\",13],["T_STRING","Creditmemo",13],["T_NS_SEPARATOR","\\",13],["T_STRING","Validation",13],["T_NS_SEPARATOR","\\",13],["T_STRING","QuantityValidator",13],";",["T_WHITESPACE","\n\n",13],["T_DOC_COMMENT","\/**\n * Class QuantityValidatorTest\n *\/",15],["T_WHITESPACE","\n",17],["T_CLASS","class",18],["T_WHITESPACE"," ",18],["T_STRING","QuantityValidatorTest",18],["T_WHITESPACE"," ",18],["T_EXTENDS","extends",18],["T_WHITESPACE"," ",18],["T_NS_SEPARATOR","\\",18],["T_STRING","PHPUnit_Framework_TestCase",18],["T_WHITESPACE","\n",18],"{",["T_WHITESPACE","\n    ",19],["T_DOC_COMMENT","\/**\n     * @var OrderRepositoryInterface|\\PHPUnit_Framework_MockObject_MockObject\n     *\/",20],["T_WHITESPACE","\n    ",22],["T_PRIVATE","private",23],["T_WHITESPACE"," ",23],["T_VARIABLE","$orderRepositoryMock",23],";",["T_WHITESPACE","\n\n    ",23],["T_DOC_COMMENT","\/**\n     * @var InvoiceRepositoryInterface|\\PHPUnit_Framework_MockObject_MockObject\n     *\/",25],["T_WHITESPACE","\n    ",27],["T_PRIVATE","private",28],["T_WHITESPACE"," ",28],["T_VARIABLE","$invoiceRepositoryMock",28],";",["T_WHITESPACE","\n\n    ",28],["T_DOC_COMMENT","\/**\n     * @var QuantityValidator\n     *\/",30],["T_WHITESPACE","\n    ",32],["T_PRIVATE","private",33],["T_WHITESPACE"," ",33],["T_VARIABLE","$validator",33],";",["T_WHITESPACE","\n\n    ",33],["T_DOC_COMMENT","\/**\n     * @var PriceCurrencyInterface\n     *\/",35],["T_WHITESPACE","\n    ",37],["T_PRIVATE","private",38],["T_WHITESPACE"," ",38],["T_VARIABLE","$priceCurrencyMock",38],";",["T_WHITESPACE","\n\n    ",38],["T_DOC_COMMENT","\/**\n     * @inheritDoc\n     *\/",40],["T_WHITESPACE","\n    ",42],["T_PROTECTED","protected",43],["T_WHITESPACE"," ",43],["T_FUNCTION","function",43],["T_WHITESPACE"," ",43],["T_STRING","setUp",43],"(",")",["T_WHITESPACE","\n    ",43],"{",["T_WHITESPACE","\n        ",44],["T_VARIABLE","$this",45],["T_OBJECT_OPERATOR","->",45],["T_STRING","orderRepositoryMock",45],["T_WHITESPACE"," ",45],"=",["T_WHITESPACE"," ",45],["T_VARIABLE","$this",45],["T_OBJECT_OPERATOR","->",45],["T_STRING","getMockBuilder",45],"(",["T_STRING","OrderRepositoryInterface",45],["T_DOUBLE_COLON","::",45],["T_CLASS","class",45],")",["T_WHITESPACE","\n            ",45],["T_OBJECT_OPERATOR","->",46],["T_STRING","disableOriginalConstructor",46],"(",")",["T_WHITESPACE","\n            ",46],["T_OBJECT_OPERATOR","->",47],["T_STRING","getMockForAbstractClass",47],"(",")",";",["T_WHITESPACE","\n\n        ",47],["T_VARIABLE","$this",49],["T_OBJECT_OPERATOR","->",49],["T_STRING","invoiceRepositoryMock",49],["T_WHITESPACE"," ",49],"=",["T_WHITESPACE"," ",49],["T_VARIABLE","$this",49],["T_OBJECT_OPERATOR","->",49],["T_STRING","getMockBuilder",49],"(",["T_STRING","InvoiceRepositoryInterface",49],["T_DOUBLE_COLON","::",49],["T_CLASS","class",49],")",["T_WHITESPACE","\n            ",49],["T_OBJECT_OPERATOR","->",50],["T_STRING","disableOriginalConstructor",50],"(",")",["T_WHITESPACE","\n            ",50],["T_OBJECT_OPERATOR","->",51],["T_STRING","getMockForAbstractClass",51],"(",")",";",["T_WHITESPACE","\n\n        ",51],["T_VARIABLE","$this",53],["T_OBJECT_OPERATOR","->",53],["T_STRING","priceCurrencyMock",53],["T_WHITESPACE"," ",53],"=",["T_WHITESPACE"," ",53],["T_VARIABLE","$this",53],["T_OBJECT_OPERATOR","->",53],["T_STRING","getMockBuilder",53],"(",["T_STRING","PriceCurrencyInterface",53],["T_DOUBLE_COLON","::",53],["T_CLASS","class",53],")",["T_WHITESPACE","\n            ",53],["T_OBJECT_OPERATOR","->",54],["T_STRING","disableOriginalConstructor",54],"(",")",["T_WHITESPACE","\n            ",54],["T_OBJECT_OPERATOR","->",55],["T_STRING","getMockForAbstractClass",55],"(",")",";",["T_WHITESPACE","\n\n        ",55],["T_VARIABLE","$this",57],["T_OBJECT_OPERATOR","->",57],["T_STRING","validator",57],["T_WHITESPACE"," ",57],"=",["T_WHITESPACE"," ",57],["T_NEW","new",57],["T_WHITESPACE"," ",57],["T_STRING","QuantityValidator",57],"(",["T_WHITESPACE","\n            ",57],["T_VARIABLE","$this",58],["T_OBJECT_OPERATOR","->",58],["T_STRING","orderRepositoryMock",58],",",["T_WHITESPACE","\n            ",58],["T_VARIABLE","$this",59],["T_OBJECT_OPERATOR","->",59],["T_STRING","invoiceRepositoryMock",59],",",["T_WHITESPACE","\n            ",59],["T_VARIABLE","$this",60],["T_OBJECT_OPERATOR","->",60],["T_STRING","priceCurrencyMock",60],["T_WHITESPACE","\n        ",60],")",";",["T_WHITESPACE","\n    ",61],"}",["T_WHITESPACE","\n\n    ",62],["T_PUBLIC","public",64],["T_WHITESPACE"," ",64],["T_FUNCTION","function",64],["T_WHITESPACE"," ",64],["T_STRING","testValidateWithoutItems",64],"(",")",["T_WHITESPACE","\n    ",64],"{",["T_WHITESPACE","\n        ",65],["T_VARIABLE","$creditmemoMock",66],["T_WHITESPACE"," ",66],"=",["T_WHITESPACE"," ",66],["T_VARIABLE","$this",66],["T_OBJECT_OPERATOR","->",66],["T_STRING","getMockBuilder",66],"(",["T_STRING","CreditmemoInterface",66],["T_DOUBLE_COLON","::",66],["T_CLASS","class",66],")",["T_WHITESPACE","\n            ",66],["T_OBJECT_OPERATOR","->",67],["T_STRING","disableOriginalConstructor",67],"(",")",["T_WHITESPACE","\n            ",67],["T_OBJECT_OPERATOR","->",68],["T_STRING","getMockForAbstractClass",68],"(",")",";",["T_WHITESPACE","\n        ",68],["T_VARIABLE","$creditmemoMock",69],["T_OBJECT_OPERATOR","->",69],["T_STRING","expects",69],"(",["T_VARIABLE","$this",69],["T_OBJECT_OPERATOR","->",69],["T_STRING","exactly",69],"(",["T_LNUMBER","2",69],")",")",["T_OBJECT_OPERATOR","->",69],["T_STRING","method",69],"(",["T_CONSTANT_ENCAPSED_STRING","'getOrderId'",69],")",["T_WHITESPACE","\n            ",69],["T_OBJECT_OPERATOR","->",70],["T_STRING","willReturn",70],"(",["T_LNUMBER","1",70],")",";",["T_WHITESPACE","\n        ",70],["T_VARIABLE","$creditmemoMock",71],["T_OBJECT_OPERATOR","->",71],["T_STRING","expects",71],"(",["T_VARIABLE","$this",71],["T_OBJECT_OPERATOR","->",71],["T_STRING","once",71],"(",")",")",["T_OBJECT_OPERATOR","->",71],["T_STRING","method",71],"(",["T_CONSTANT_ENCAPSED_STRING","'getItems'",71],")",["T_WHITESPACE","\n            ",71],["T_OBJECT_OPERATOR","->",72],["T_STRING","willReturn",72],"(","[","]",")",";",["T_WHITESPACE","\n        ",72],["T_VARIABLE","$orderMock",73],["T_WHITESPACE"," ",73],"=",["T_WHITESPACE"," ",73],["T_VARIABLE","$this",73],["T_OBJECT_OPERATOR","->",73],["T_STRING","getMockBuilder",73],"(",["T_STRING","OrderInterface",73],["T_DOUBLE_COLON","::",73],["T_CLASS","class",73],")",["T_WHITESPACE","\n            ",73],["T_OBJECT_OPERATOR","->",74],["T_STRING","disableOriginalConstructor",74],"(",")",["T_WHITESPACE","\n            ",74],["T_OBJECT_OPERATOR","->",75],["T_STRING","getMockForAbstractClass",75],"(",")",";",["T_WHITESPACE","\n        ",75],["T_VARIABLE","$orderMock",76],["T_OBJECT_OPERATOR","->",76],["T_STRING","expects",76],"(",["T_VARIABLE","$this",76],["T_OBJECT_OPERATOR","->",76],["T_STRING","once",76],"(",")",")",["T_OBJECT_OPERATOR","->",76],["T_STRING","method",76],"(",["T_CONSTANT_ENCAPSED_STRING","'getItems'",76],")",["T_WHITESPACE","\n            ",76],["T_OBJECT_OPERATOR","->",77],["T_STRING","willReturn",77],"(","[","]",")",";",["T_WHITESPACE","\n\n        ",77],["T_VARIABLE","$this",79],["T_OBJECT_OPERATOR","->",79],["T_STRING","orderRepositoryMock",79],["T_OBJECT_OPERATOR","->",79],["T_STRING","expects",79],"(",["T_VARIABLE","$this",79],["T_OBJECT_OPERATOR","->",79],["T_STRING","once",79],"(",")",")",["T_WHITESPACE","\n            ",79],["T_OBJECT_OPERATOR","->",80],["T_STRING","method",80],"(",["T_CONSTANT_ENCAPSED_STRING","'get'",80],")",["T_WHITESPACE","\n            ",80],["T_OBJECT_OPERATOR","->",81],["T_STRING","with",81],"(",["T_LNUMBER","1",81],")",["T_WHITESPACE","\n            ",81],["T_OBJECT_OPERATOR","->",82],["T_STRING","willReturn",82],"(",["T_VARIABLE","$orderMock",82],")",";",["T_WHITESPACE","\n        ",82],["T_VARIABLE","$creditmemoMock",83],["T_OBJECT_OPERATOR","->",83],["T_STRING","expects",83],"(",["T_VARIABLE","$this",83],["T_OBJECT_OPERATOR","->",83],["T_STRING","once",83],"(",")",")",["T_OBJECT_OPERATOR","->",83],["T_STRING","method",83],"(",["T_CONSTANT_ENCAPSED_STRING","'getGrandTotal'",83],")",["T_WHITESPACE","\n            ",83],["T_OBJECT_OPERATOR","->",84],["T_STRING","willReturn",84],"(",["T_LNUMBER","0",84],")",";",["T_WHITESPACE","\n        ",84],["T_VARIABLE","$this",85],["T_OBJECT_OPERATOR","->",85],["T_STRING","assertEquals",85],"(",["T_WHITESPACE","\n            ",85],"[",["T_WHITESPACE","\n                ",86],["T_STRING","__",87],"(",["T_CONSTANT_ENCAPSED_STRING","'The credit memo\\'s total must be positive.'",87],")",["T_WHITESPACE","\n            ",87],"]",",",["T_WHITESPACE","\n            ",88],["T_VARIABLE","$this",89],["T_OBJECT_OPERATOR","->",89],["T_STRING","validator",89],["T_OBJECT_OPERATOR","->",89],["T_STRING","validate",89],"(",["T_VARIABLE","$creditmemoMock",89],")",["T_WHITESPACE","\n        ",89],")",";",["T_WHITESPACE","\n    ",90],"}",["T_WHITESPACE","\n\n    ",91],["T_PUBLIC","public",93],["T_WHITESPACE"," ",93],["T_FUNCTION","function",93],["T_WHITESPACE"," ",93],["T_STRING","testValidateWithoutOrder",93],"(",")",["T_WHITESPACE","\n    ",93],"{",["T_WHITESPACE","\n        ",94],["T_VARIABLE","$creditmemoMock",95],["T_WHITESPACE"," ",95],"=",["T_WHITESPACE"," ",95],["T_VARIABLE","$this",95],["T_OBJECT_OPERATOR","->",95],["T_STRING","getMockBuilder",95],"(",["T_STRING","CreditmemoInterface",95],["T_DOUBLE_COLON","::",95],["T_CLASS","class",95],")",["T_WHITESPACE","\n            ",95],["T_OBJECT_OPERATOR","->",96],["T_STRING","disableOriginalConstructor",96],"(",")",["T_WHITESPACE","\n            ",96],["T_OBJECT_OPERATOR","->",97],["T_STRING","getMockForAbstractClass",97],"(",")",";",["T_WHITESPACE","\n        ",97],["T_VARIABLE","$creditmemoMock",98],["T_OBJECT_OPERATOR","->",98],["T_STRING","expects",98],"(",["T_VARIABLE","$this",98],["T_OBJECT_OPERATOR","->",98],["T_STRING","once",98],"(",")",")",["T_OBJECT_OPERATOR","->",98],["T_STRING","method",98],"(",["T_CONSTANT_ENCAPSED_STRING","'getOrderId'",98],")",["T_WHITESPACE","\n            ",98],["T_OBJECT_OPERATOR","->",99],["T_STRING","willReturn",99],"(",["T_STRING","null",99],")",";",["T_WHITESPACE","\n        ",99],["T_VARIABLE","$creditmemoMock",100],["T_OBJECT_OPERATOR","->",100],["T_STRING","expects",100],"(",["T_VARIABLE","$this",100],["T_OBJECT_OPERATOR","->",100],["T_STRING","never",100],"(",")",")",["T_OBJECT_OPERATOR","->",100],["T_STRING","method",100],"(",["T_CONSTANT_ENCAPSED_STRING","'getItems'",100],")",";",["T_WHITESPACE","\n        ",100],["T_VARIABLE","$this",101],["T_OBJECT_OPERATOR","->",101],["T_STRING","assertEquals",101],"(",["T_WHITESPACE","\n            ",101],"[",["T_STRING","__",102],"(",["T_CONSTANT_ENCAPSED_STRING","'Order Id is required for creditmemo document'",102],")","]",",",["T_WHITESPACE","\n            ",102],["T_VARIABLE","$this",103],["T_OBJECT_OPERATOR","->",103],["T_STRING","validator",103],["T_OBJECT_OPERATOR","->",103],["T_STRING","validate",103],"(",["T_VARIABLE","$creditmemoMock",103],")",["T_WHITESPACE","\n        ",103],")",";",["T_WHITESPACE","\n    ",104],"}",["T_WHITESPACE","\n\n    ",105],["T_PUBLIC","public",107],["T_WHITESPACE"," ",107],["T_FUNCTION","function",107],["T_WHITESPACE"," ",107],["T_STRING","testValidateWithWrongItemId",107],"(",")",["T_WHITESPACE","\n    ",107],"{",["T_WHITESPACE","\n        ",108],["T_VARIABLE","$orderId",109],["T_WHITESPACE"," ",109],"=",["T_WHITESPACE"," ",109],["T_LNUMBER","1",109],";",["T_WHITESPACE","\n        ",109],["T_VARIABLE","$orderItemId",110],["T_WHITESPACE"," ",110],"=",["T_WHITESPACE"," ",110],["T_LNUMBER","1",110],";",["T_WHITESPACE","\n        ",110],["T_VARIABLE","$creditmemoMock",111],["T_WHITESPACE"," ",111],"=",["T_WHITESPACE"," ",111],["T_VARIABLE","$this",111],["T_OBJECT_OPERATOR","->",111],["T_STRING","getMockBuilder",111],"(",["T_STRING","CreditmemoInterface",111],["T_DOUBLE_COLON","::",111],["T_CLASS","class",111],")",["T_WHITESPACE","\n            ",111],["T_OBJECT_OPERATOR","->",112],["T_STRING","disableOriginalConstructor",112],"(",")",["T_WHITESPACE","\n            ",112],["T_OBJECT_OPERATOR","->",113],["T_STRING","getMockForAbstractClass",113],"(",")",";",["T_WHITESPACE","\n        ",113],["T_VARIABLE","$creditmemoMock",114],["T_OBJECT_OPERATOR","->",114],["T_STRING","expects",114],"(",["T_VARIABLE","$this",114],["T_OBJECT_OPERATOR","->",114],["T_STRING","exactly",114],"(",["T_LNUMBER","2",114],")",")",["T_OBJECT_OPERATOR","->",114],["T_STRING","method",114],"(",["T_CONSTANT_ENCAPSED_STRING","'getOrderId'",114],")",["T_WHITESPACE","\n            ",114],["T_OBJECT_OPERATOR","->",115],["T_STRING","willReturn",115],"(",["T_VARIABLE","$orderId",115],")",";",["T_WHITESPACE","\n        ",115],["T_VARIABLE","$creditmemoItemMock",116],["T_WHITESPACE"," ",116],"=",["T_WHITESPACE"," ",116],["T_VARIABLE","$this",116],["T_OBJECT_OPERATOR","->",116],["T_STRING","getMockBuilder",116],"(",["T_WHITESPACE","\n            ",116],["T_NS_SEPARATOR","\\",117],["T_STRING","Magento",117],["T_NS_SEPARATOR","\\",117],["T_STRING","Sales",117],["T_NS_SEPARATOR","\\",117],["T_STRING","Api",117],["T_NS_SEPARATOR","\\",117],["T_STRING","Data",117],["T_NS_SEPARATOR","\\",117],["T_STRING","CreditmemoItemInterface",117],["T_DOUBLE_COLON","::",117],["T_CLASS","class",117],["T_WHITESPACE","\n        ",117],")",["T_OBJECT_OPERATOR","->",118],["T_STRING","disableOriginalConstructor",118],"(",")",["T_WHITESPACE","\n            ",118],["T_OBJECT_OPERATOR","->",119],["T_STRING","getMockForAbstractClass",119],"(",")",";",["T_WHITESPACE","\n        ",119],["T_VARIABLE","$creditmemoItemMock",120],["T_OBJECT_OPERATOR","->",120],["T_STRING","expects",120],"(",["T_VARIABLE","$this",120],["T_OBJECT_OPERATOR","->",120],["T_STRING","once",120],"(",")",")",["T_OBJECT_OPERATOR","->",120],["T_STRING","method",120],"(",["T_CONSTANT_ENCAPSED_STRING","'getOrderItemId'",120],")",["T_WHITESPACE","\n            ",120],["T_OBJECT_OPERATOR","->",121],["T_STRING","willReturn",121],"(",["T_VARIABLE","$orderItemId",121],")",";",["T_WHITESPACE","\n        ",121],["T_VARIABLE","$creditmemoItemSku",122],["T_WHITESPACE"," ",122],"=",["T_WHITESPACE"," ",122],["T_CONSTANT_ENCAPSED_STRING","'sku'",122],";",["T_WHITESPACE","\n        ",122],["T_VARIABLE","$creditmemoItemMock",123],["T_OBJECT_OPERATOR","->",123],["T_STRING","expects",123],"(",["T_VARIABLE","$this",123],["T_OBJECT_OPERATOR","->",123],["T_STRING","once",123],"(",")",")",["T_OBJECT_OPERATOR","->",123],["T_STRING","method",123],"(",["T_CONSTANT_ENCAPSED_STRING","'getSku'",123],")",["T_WHITESPACE","\n            ",123],["T_OBJECT_OPERATOR","->",124],["T_STRING","willReturn",124],"(",["T_VARIABLE","$creditmemoItemSku",124],")",";",["T_WHITESPACE","\n        ",124],["T_VARIABLE","$creditmemoMock",125],["T_OBJECT_OPERATOR","->",125],["T_STRING","expects",125],"(",["T_VARIABLE","$this",125],["T_OBJECT_OPERATOR","->",125],["T_STRING","exactly",125],"(",["T_LNUMBER","1",125],")",")",["T_OBJECT_OPERATOR","->",125],["T_STRING","method",125],"(",["T_CONSTANT_ENCAPSED_STRING","'getItems'",125],")",["T_WHITESPACE","\n            ",125],["T_OBJECT_OPERATOR","->",126],["T_STRING","willReturn",126],"(","[",["T_VARIABLE","$creditmemoItemMock",126],"]",")",";",["T_WHITESPACE","\n\n        ",126],["T_VARIABLE","$orderMock",128],["T_WHITESPACE"," ",128],"=",["T_WHITESPACE"," ",128],["T_VARIABLE","$this",128],["T_OBJECT_OPERATOR","->",128],["T_STRING","getMockBuilder",128],"(",["T_STRING","OrderInterface",128],["T_DOUBLE_COLON","::",128],["T_CLASS","class",128],")",["T_WHITESPACE","\n            ",128],["T_OBJECT_OPERATOR","->",129],["T_STRING","disableOriginalConstructor",129],"(",")",["T_WHITESPACE","\n            ",129],["T_OBJECT_OPERATOR","->",130],["T_STRING","getMockForAbstractClass",130],"(",")",";",["T_WHITESPACE","\n        ",130],["T_VARIABLE","$orderMock",131],["T_OBJECT_OPERATOR","->",131],["T_STRING","expects",131],"(",["T_VARIABLE","$this",131],["T_OBJECT_OPERATOR","->",131],["T_STRING","once",131],"(",")",")",["T_OBJECT_OPERATOR","->",131],["T_STRING","method",131],"(",["T_CONSTANT_ENCAPSED_STRING","'getItems'",131],")",["T_WHITESPACE","\n            ",131],["T_OBJECT_OPERATOR","->",132],["T_STRING","willReturn",132],"(","[","]",")",";",["T_WHITESPACE","\n\n        ",132],["T_VARIABLE","$this",134],["T_OBJECT_OPERATOR","->",134],["T_STRING","orderRepositoryMock",134],["T_OBJECT_OPERATOR","->",134],["T_STRING","expects",134],"(",["T_VARIABLE","$this",134],["T_OBJECT_OPERATOR","->",134],["T_STRING","once",134],"(",")",")",["T_WHITESPACE","\n            ",134],["T_OBJECT_OPERATOR","->",135],["T_STRING","method",135],"(",["T_CONSTANT_ENCAPSED_STRING","'get'",135],")",["T_WHITESPACE","\n            ",135],["T_OBJECT_OPERATOR","->",136],["T_STRING","with",136],"(",["T_VARIABLE","$orderId",136],")",["T_WHITESPACE","\n            ",136],["T_OBJECT_OPERATOR","->",137],["T_STRING","willReturn",137],"(",["T_VARIABLE","$orderMock",137],")",";",["T_WHITESPACE","\n        ",137],["T_VARIABLE","$creditmemoMock",138],["T_OBJECT_OPERATOR","->",138],["T_STRING","expects",138],"(",["T_VARIABLE","$this",138],["T_OBJECT_OPERATOR","->",138],["T_STRING","once",138],"(",")",")",["T_OBJECT_OPERATOR","->",138],["T_STRING","method",138],"(",["T_CONSTANT_ENCAPSED_STRING","'getGrandTotal'",138],")",["T_WHITESPACE","\n            ",138],["T_OBJECT_OPERATOR","->",139],["T_STRING","willReturn",139],"(",["T_LNUMBER","12",139],")",";",["T_WHITESPACE","\n\n        ",139],["T_VARIABLE","$this",141],["T_OBJECT_OPERATOR","->",141],["T_STRING","assertEquals",141],"(",["T_WHITESPACE","\n            ",141],"[",["T_WHITESPACE","\n                ",142],["T_STRING","__",143],"(",["T_WHITESPACE","\n                    ",143],["T_CONSTANT_ENCAPSED_STRING","'The creditmemo contains product SKU \"%1\" that is not part of the original order.'",144],",",["T_WHITESPACE","\n                    ",144],["T_VARIABLE","$creditmemoItemSku",145],["T_WHITESPACE","\n                ",145],")",",",["T_WHITESPACE","\n                ",146],["T_STRING","__",147],"(",["T_CONSTANT_ENCAPSED_STRING","'You can\\'t create a creditmemo without products.'",147],")",["T_WHITESPACE","\n            ",147],"]",",",["T_WHITESPACE","\n            ",148],["T_VARIABLE","$this",149],["T_OBJECT_OPERATOR","->",149],["T_STRING","validator",149],["T_OBJECT_OPERATOR","->",149],["T_STRING","validate",149],"(",["T_VARIABLE","$creditmemoMock",149],")",["T_WHITESPACE","\n        ",149],")",";",["T_WHITESPACE","\n    ",150],"}",["T_WHITESPACE","\n\n    ",151],["T_DOC_COMMENT","\/**\n     * @param int $orderId\n     * @param int $orderItemId\n     * @param int $qtyToRequest\n     * @param int $qtyToRefund\n     * @param string $sku\n     * @param array $expected\n     * @dataProvider dataProviderForValidateQty\n     *\/",153],["T_WHITESPACE","\n    ",161],["T_PUBLIC","public",162],["T_WHITESPACE"," ",162],["T_FUNCTION","function",162],["T_WHITESPACE"," ",162],["T_STRING","testValidate",162],"(",["T_VARIABLE","$orderId",162],",",["T_WHITESPACE"," ",162],["T_VARIABLE","$orderItemId",162],",",["T_WHITESPACE"," ",162],["T_VARIABLE","$qtyToRequest",162],",",["T_WHITESPACE"," ",162],["T_VARIABLE","$qtyToRefund",162],",",["T_WHITESPACE"," ",162],["T_VARIABLE","$sku",162],",",["T_WHITESPACE"," ",162],["T_VARIABLE","$total",162],",",["T_WHITESPACE"," ",162],["T_ARRAY","array",162],["T_WHITESPACE"," ",162],["T_VARIABLE","$expected",162],")",["T_WHITESPACE","\n    ",162],"{",["T_WHITESPACE","\n        ",163],["T_VARIABLE","$creditmemoMock",164],["T_WHITESPACE"," ",164],"=",["T_WHITESPACE"," ",164],["T_VARIABLE","$this",164],["T_OBJECT_OPERATOR","->",164],["T_STRING","getMockBuilder",164],"(",["T_STRING","CreditmemoInterface",164],["T_DOUBLE_COLON","::",164],["T_CLASS","class",164],")",["T_WHITESPACE","\n            ",164],["T_OBJECT_OPERATOR","->",165],["T_STRING","disableOriginalConstructor",165],"(",")",["T_WHITESPACE","\n            ",165],["T_OBJECT_OPERATOR","->",166],["T_STRING","getMockForAbstractClass",166],"(",")",";",["T_WHITESPACE","\n        ",166],["T_VARIABLE","$creditmemoMock",167],["T_OBJECT_OPERATOR","->",167],["T_STRING","expects",167],"(",["T_VARIABLE","$this",167],["T_OBJECT_OPERATOR","->",167],["T_STRING","exactly",167],"(",["T_LNUMBER","2",167],")",")",["T_OBJECT_OPERATOR","->",167],["T_STRING","method",167],"(",["T_CONSTANT_ENCAPSED_STRING","'getOrderId'",167],")",["T_WHITESPACE","\n            ",167],["T_OBJECT_OPERATOR","->",168],["T_STRING","willReturn",168],"(",["T_VARIABLE","$orderId",168],")",";",["T_WHITESPACE","\n        ",168],["T_VARIABLE","$creditmemoMock",169],["T_OBJECT_OPERATOR","->",169],["T_STRING","expects",169],"(",["T_VARIABLE","$this",169],["T_OBJECT_OPERATOR","->",169],["T_STRING","once",169],"(",")",")",["T_OBJECT_OPERATOR","->",169],["T_STRING","method",169],"(",["T_CONSTANT_ENCAPSED_STRING","'getGrandTotal'",169],")",["T_WHITESPACE","\n            ",169],["T_OBJECT_OPERATOR","->",170],["T_STRING","willReturn",170],"(",["T_VARIABLE","$total",170],")",";",["T_WHITESPACE","\n        ",170],["T_VARIABLE","$creditmemoItemMock",171],["T_WHITESPACE"," ",171],"=",["T_WHITESPACE"," ",171],["T_VARIABLE","$this",171],["T_OBJECT_OPERATOR","->",171],["T_STRING","getMockBuilder",171],"(",["T_WHITESPACE","\n            ",171],["T_NS_SEPARATOR","\\",172],["T_STRING","Magento",172],["T_NS_SEPARATOR","\\",172],["T_STRING","Sales",172],["T_NS_SEPARATOR","\\",172],["T_STRING","Api",172],["T_NS_SEPARATOR","\\",172],["T_STRING","Data",172],["T_NS_SEPARATOR","\\",172],["T_STRING","CreditmemoItemInterface",172],["T_DOUBLE_COLON","::",172],["T_CLASS","class",172],["T_WHITESPACE","\n        ",172],")",["T_OBJECT_OPERATOR","->",173],["T_STRING","disableOriginalConstructor",173],"(",")",["T_WHITESPACE","\n            ",173],["T_OBJECT_OPERATOR","->",174],["T_STRING","getMockForAbstractClass",174],"(",")",";",["T_WHITESPACE","\n        ",174],["T_VARIABLE","$creditmemoItemMock",175],["T_OBJECT_OPERATOR","->",175],["T_STRING","expects",175],"(",["T_VARIABLE","$this",175],["T_OBJECT_OPERATOR","->",175],["T_STRING","exactly",175],"(",["T_LNUMBER","2",175],")",")",["T_OBJECT_OPERATOR","->",175],["T_STRING","method",175],"(",["T_CONSTANT_ENCAPSED_STRING","'getOrderItemId'",175],")",["T_WHITESPACE","\n            ",175],["T_OBJECT_OPERATOR","->",176],["T_STRING","willReturn",176],"(",["T_VARIABLE","$orderItemId",176],")",";",["T_WHITESPACE","\n        ",176],["T_VARIABLE","$creditmemoItemMock",177],["T_OBJECT_OPERATOR","->",177],["T_STRING","expects",177],"(",["T_VARIABLE","$this",177],["T_OBJECT_OPERATOR","->",177],["T_STRING","never",177],"(",")",")",["T_OBJECT_OPERATOR","->",177],["T_STRING","method",177],"(",["T_CONSTANT_ENCAPSED_STRING","'getSku'",177],")",["T_WHITESPACE","\n            ",177],["T_OBJECT_OPERATOR","->",178],["T_STRING","willReturn",178],"(",["T_VARIABLE","$sku",178],")",";",["T_WHITESPACE","\n        ",178],["T_VARIABLE","$creditmemoItemMock",179],["T_OBJECT_OPERATOR","->",179],["T_STRING","expects",179],"(",["T_VARIABLE","$this",179],["T_OBJECT_OPERATOR","->",179],["T_STRING","atLeastOnce",179],"(",")",")",["T_OBJECT_OPERATOR","->",179],["T_STRING","method",179],"(",["T_CONSTANT_ENCAPSED_STRING","'getQty'",179],")",["T_WHITESPACE","\n            ",179],["T_OBJECT_OPERATOR","->",180],["T_STRING","willReturn",180],"(",["T_VARIABLE","$qtyToRequest",180],")",";",["T_WHITESPACE","\n        ",180],["T_VARIABLE","$creditmemoMock",181],["T_OBJECT_OPERATOR","->",181],["T_STRING","expects",181],"(",["T_VARIABLE","$this",181],["T_OBJECT_OPERATOR","->",181],["T_STRING","exactly",181],"(",["T_LNUMBER","1",181],")",")",["T_OBJECT_OPERATOR","->",181],["T_STRING","method",181],"(",["T_CONSTANT_ENCAPSED_STRING","'getItems'",181],")",["T_WHITESPACE","\n            ",181],["T_OBJECT_OPERATOR","->",182],["T_STRING","willReturn",182],"(","[",["T_VARIABLE","$creditmemoItemMock",182],"]",")",";",["T_WHITESPACE","\n\n        ",182],["T_VARIABLE","$orderMock",184],["T_WHITESPACE"," ",184],"=",["T_WHITESPACE"," ",184],["T_VARIABLE","$this",184],["T_OBJECT_OPERATOR","->",184],["T_STRING","getMockBuilder",184],"(",["T_STRING","OrderInterface",184],["T_DOUBLE_COLON","::",184],["T_CLASS","class",184],")",["T_WHITESPACE","\n            ",184],["T_OBJECT_OPERATOR","->",185],["T_STRING","disableOriginalConstructor",185],"(",")",["T_WHITESPACE","\n            ",185],["T_OBJECT_OPERATOR","->",186],["T_STRING","getMockForAbstractClass",186],"(",")",";",["T_WHITESPACE","\n        ",186],["T_VARIABLE","$orderItemMock",187],["T_WHITESPACE"," ",187],"=",["T_WHITESPACE"," ",187],["T_VARIABLE","$this",187],["T_OBJECT_OPERATOR","->",187],["T_STRING","getMockBuilder",187],"(",["T_NS_SEPARATOR","\\",187],["T_STRING","Magento",187],["T_NS_SEPARATOR","\\",187],["T_STRING","Sales",187],["T_NS_SEPARATOR","\\",187],["T_STRING","Model",187],["T_NS_SEPARATOR","\\",187],["T_STRING","Order",187],["T_NS_SEPARATOR","\\",187],["T_STRING","Item",187],["T_DOUBLE_COLON","::",187],["T_CLASS","class",187],")",["T_WHITESPACE","\n            ",187],["T_OBJECT_OPERATOR","->",188],["T_STRING","disableOriginalConstructor",188],"(",")",["T_WHITESPACE","\n            ",188],["T_OBJECT_OPERATOR","->",189],["T_STRING","getMock",189],"(",")",";",["T_WHITESPACE","\n        ",189],["T_VARIABLE","$orderItemMock",190],["T_OBJECT_OPERATOR","->",190],["T_STRING","expects",190],"(",["T_VARIABLE","$this",190],["T_OBJECT_OPERATOR","->",190],["T_STRING","exactly",190],"(",["T_LNUMBER","2",190],")",")",["T_OBJECT_OPERATOR","->",190],["T_STRING","method",190],"(",["T_CONSTANT_ENCAPSED_STRING","'getQtyToRefund'",190],")",["T_WHITESPACE","\n            ",190],["T_OBJECT_OPERATOR","->",191],["T_STRING","willReturn",191],"(",["T_VARIABLE","$qtyToRefund",191],")",";",["T_WHITESPACE","\n        ",191],["T_VARIABLE","$creditmemoItemMock",192],["T_OBJECT_OPERATOR","->",192],["T_STRING","expects",192],"(",["T_VARIABLE","$this",192],["T_OBJECT_OPERATOR","->",192],["T_STRING","any",192],"(",")",")",["T_OBJECT_OPERATOR","->",192],["T_STRING","method",192],"(",["T_CONSTANT_ENCAPSED_STRING","'getQty'",192],")",["T_WHITESPACE","\n            ",192],["T_OBJECT_OPERATOR","->",193],["T_STRING","willReturn",193],"(",["T_VARIABLE","$qtyToRequest",193],")",";",["T_WHITESPACE","\n        ",193],["T_VARIABLE","$orderMock",194],["T_OBJECT_OPERATOR","->",194],["T_STRING","expects",194],"(",["T_VARIABLE","$this",194],["T_OBJECT_OPERATOR","->",194],["T_STRING","once",194],"(",")",")",["T_OBJECT_OPERATOR","->",194],["T_STRING","method",194],"(",["T_CONSTANT_ENCAPSED_STRING","'getItems'",194],")",["T_WHITESPACE","\n            ",194],["T_OBJECT_OPERATOR","->",195],["T_STRING","willReturn",195],"(","[",["T_VARIABLE","$orderItemMock",195],"]",")",";",["T_WHITESPACE","\n        ",195],["T_VARIABLE","$orderItemMock",196],["T_OBJECT_OPERATOR","->",196],["T_STRING","expects",196],"(",["T_VARIABLE","$this",196],["T_OBJECT_OPERATOR","->",196],["T_STRING","once",196],"(",")",")",["T_OBJECT_OPERATOR","->",196],["T_STRING","method",196],"(",["T_CONSTANT_ENCAPSED_STRING","'getItemId'",196],")",["T_WHITESPACE","\n            ",196],["T_OBJECT_OPERATOR","->",197],["T_STRING","willReturn",197],"(",["T_VARIABLE","$orderItemId",197],")",";",["T_WHITESPACE","\n        ",197],["T_VARIABLE","$orderItemMock",198],["T_OBJECT_OPERATOR","->",198],["T_STRING","expects",198],"(",["T_VARIABLE","$this",198],["T_OBJECT_OPERATOR","->",198],["T_STRING","any",198],"(",")",")",["T_OBJECT_OPERATOR","->",198],["T_STRING","method",198],"(",["T_CONSTANT_ENCAPSED_STRING","'getSku'",198],")",["T_WHITESPACE","\n            ",198],["T_OBJECT_OPERATOR","->",199],["T_STRING","willReturn",199],"(",["T_VARIABLE","$sku",199],")",";",["T_WHITESPACE","\n\n        ",199],["T_VARIABLE","$this",201],["T_OBJECT_OPERATOR","->",201],["T_STRING","orderRepositoryMock",201],["T_OBJECT_OPERATOR","->",201],["T_STRING","expects",201],"(",["T_VARIABLE","$this",201],["T_OBJECT_OPERATOR","->",201],["T_STRING","once",201],"(",")",")",["T_WHITESPACE","\n            ",201],["T_OBJECT_OPERATOR","->",202],["T_STRING","method",202],"(",["T_CONSTANT_ENCAPSED_STRING","'get'",202],")",["T_WHITESPACE","\n            ",202],["T_OBJECT_OPERATOR","->",203],["T_STRING","with",203],"(",["T_VARIABLE","$orderId",203],")",["T_WHITESPACE","\n            ",203],["T_OBJECT_OPERATOR","->",204],["T_STRING","willReturn",204],"(",["T_VARIABLE","$orderMock",204],")",";",["T_WHITESPACE","\n\n        ",204],["T_VARIABLE","$this",206],["T_OBJECT_OPERATOR","->",206],["T_STRING","assertEquals",206],"(",["T_WHITESPACE","\n            ",206],["T_VARIABLE","$expected",207],",",["T_WHITESPACE","\n            ",207],["T_VARIABLE","$this",208],["T_OBJECT_OPERATOR","->",208],["T_STRING","validator",208],["T_OBJECT_OPERATOR","->",208],["T_STRING","validate",208],"(",["T_VARIABLE","$creditmemoMock",208],")",["T_WHITESPACE","\n        ",208],")",";",["T_WHITESPACE","\n    ",209],"}",["T_WHITESPACE","\n\n    ",210],["T_DOC_COMMENT","\/**\n     * @return array\n     *\/",212],["T_WHITESPACE","\n    ",214],["T_PUBLIC","public",215],["T_WHITESPACE"," ",215],["T_FUNCTION","function",215],["T_WHITESPACE"," ",215],["T_STRING","dataProviderForValidateQty",215],"(",")",["T_WHITESPACE","\n    ",215],"{",["T_WHITESPACE","\n        ",216],["T_VARIABLE","$sku",217],["T_WHITESPACE"," ",217],"=",["T_WHITESPACE"," ",217],["T_CONSTANT_ENCAPSED_STRING","'sku'",217],";",["T_WHITESPACE","\n\n        ",217],["T_RETURN","return",219],["T_WHITESPACE"," ",219],"[",["T_WHITESPACE","\n            ",219],"[",["T_WHITESPACE","\n                ",220],["T_CONSTANT_ENCAPSED_STRING","'orderId'",221],["T_WHITESPACE"," ",221],["T_DOUBLE_ARROW","=>",221],["T_WHITESPACE"," ",221],["T_LNUMBER","1",221],",",["T_WHITESPACE","\n                ",221],["T_CONSTANT_ENCAPSED_STRING","'orderItemId'",222],["T_WHITESPACE"," ",222],["T_DOUBLE_ARROW","=>",222],["T_WHITESPACE"," ",222],["T_LNUMBER","1",222],",",["T_WHITESPACE","\n                ",222],["T_CONSTANT_ENCAPSED_STRING","'qtyToRequest'",223],["T_WHITESPACE"," ",223],["T_DOUBLE_ARROW","=>",223],["T_WHITESPACE"," ",223],["T_LNUMBER","1",223],",",["T_WHITESPACE","\n                ",223],["T_CONSTANT_ENCAPSED_STRING","'qtyToRefund'",224],["T_WHITESPACE"," ",224],["T_DOUBLE_ARROW","=>",224],["T_WHITESPACE"," ",224],["T_LNUMBER","1",224],",",["T_WHITESPACE","\n                ",224],["T_CONSTANT_ENCAPSED_STRING","'sku'",225],",",["T_WHITESPACE","\n                ",225],["T_CONSTANT_ENCAPSED_STRING","'total'",226],["T_WHITESPACE"," ",226],["T_DOUBLE_ARROW","=>",226],["T_WHITESPACE"," ",226],["T_LNUMBER","15",226],",",["T_WHITESPACE","\n                ",226],["T_CONSTANT_ENCAPSED_STRING","'expected'",227],["T_WHITESPACE"," ",227],["T_DOUBLE_ARROW","=>",227],["T_WHITESPACE"," ",227],"[","]",["T_WHITESPACE","\n            ",227],"]",",",["T_WHITESPACE","\n            ",228],"[",["T_WHITESPACE","\n                ",229],["T_CONSTANT_ENCAPSED_STRING","'orderId'",230],["T_WHITESPACE"," ",230],["T_DOUBLE_ARROW","=>",230],["T_WHITESPACE"," ",230],["T_LNUMBER","1",230],",",["T_WHITESPACE","\n                ",230],["T_CONSTANT_ENCAPSED_STRING","'orderItemId'",231],["T_WHITESPACE"," ",231],["T_DOUBLE_ARROW","=>",231],["T_WHITESPACE"," ",231],["T_LNUMBER","1",231],",",["T_WHITESPACE","\n                ",231],["T_CONSTANT_ENCAPSED_STRING","'qtyToRequest'",232],["T_WHITESPACE"," ",232],["T_DOUBLE_ARROW","=>",232],["T_WHITESPACE"," ",232],["T_LNUMBER","2",232],",",["T_WHITESPACE","\n                ",232],["T_CONSTANT_ENCAPSED_STRING","'qtyToRefund'",233],["T_WHITESPACE"," ",233],["T_DOUBLE_ARROW","=>",233],["T_WHITESPACE"," ",233],["T_LNUMBER","1",233],",",["T_WHITESPACE","\n                ",233],["T_CONSTANT_ENCAPSED_STRING","'sku'",234],",",["T_WHITESPACE","\n                ",234],["T_CONSTANT_ENCAPSED_STRING","'total'",235],["T_WHITESPACE"," ",235],["T_DOUBLE_ARROW","=>",235],["T_WHITESPACE"," ",235],["T_LNUMBER","0",235],",",["T_WHITESPACE","\n                ",235],["T_CONSTANT_ENCAPSED_STRING","'expected'",236],["T_WHITESPACE"," ",236],["T_DOUBLE_ARROW","=>",236],["T_WHITESPACE"," ",236],"[",["T_WHITESPACE","\n                    ",236],["T_STRING","__",237],"(",["T_WHITESPACE","\n                        ",237],["T_CONSTANT_ENCAPSED_STRING","'The quantity to creditmemo must not be greater than the unrefunded quantity'",238],["T_WHITESPACE","\n                        ",238],".",["T_WHITESPACE"," ",239],["T_CONSTANT_ENCAPSED_STRING","' for product SKU \"%1\".'",239],",",["T_WHITESPACE","\n                        ",239],["T_VARIABLE","$sku",240],["T_WHITESPACE","\n                    ",240],")",",",["T_WHITESPACE","\n                    ",241],["T_STRING","__",242],"(",["T_CONSTANT_ENCAPSED_STRING","'The credit memo\\'s total must be positive.'",242],")",["T_WHITESPACE","\n                ",242],"]",["T_WHITESPACE","\n            ",243],"]",",",["T_WHITESPACE","\n        ",244],"]",";",["T_WHITESPACE","\n    ",245],"}",["T_WHITESPACE","\n",246],"}",["T_WHITESPACE","\n",247]]
[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Copyright \u00c2\u00a9 2013-2017 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n *\/",2],["T_WHITESPACE","\n",5],["T_NAMESPACE","namespace",6],["T_WHITESPACE"," ",6],["T_STRING","Magento",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Sales",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Test",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Unit",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Model",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Order",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Invoice",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Total",6],";",["T_WHITESPACE","\n\n\n",6],["T_CLASS","class",9],["T_WHITESPACE"," ",9],["T_STRING","TaxTest",9],["T_WHITESPACE"," ",9],["T_EXTENDS","extends",9],["T_WHITESPACE"," ",9],["T_NS_SEPARATOR","\\",9],["T_STRING","PHPUnit_Framework_TestCase",9],["T_WHITESPACE","\n",9],"{",["T_WHITESPACE","\n    ",10],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Sales\\Model\\Order\\Invoice\\Total\\Tax\n     *\/",11],["T_WHITESPACE","\n    ",13],["T_PROTECTED","protected",14],["T_WHITESPACE"," ",14],["T_VARIABLE","$model",14],";",["T_WHITESPACE","\n\n    ",14],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Sales\\Model\\Order|\\PHPUnit_Framework_MockObject_MockObject\n     *\/",16],["T_WHITESPACE","\n    ",18],["T_PROTECTED","protected",19],["T_WHITESPACE"," ",19],["T_VARIABLE","$order",19],";",["T_WHITESPACE","\n\n    ",19],["T_DOC_COMMENT","\/**\n     * @var  \\Magento\\Framework\\TestFramework\\Unit\\Helper\\ObjectManager\n     *\/",21],["T_WHITESPACE","\n    ",23],["T_PROTECTED","protected",24],["T_WHITESPACE"," ",24],["T_VARIABLE","$objectManager",24],";",["T_WHITESPACE","\n\n    ",24],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Sales\\Model\\Order\\Invoice|\\PHPUnit_Framework_MockObject_MockObject\n     *\/",26],["T_WHITESPACE","\n    ",28],["T_PROTECTED","protected",29],["T_WHITESPACE"," ",29],["T_VARIABLE","$invoice",29],";",["T_WHITESPACE","\n\n    ",29],["T_PROTECTED","protected",31],["T_WHITESPACE"," ",31],["T_FUNCTION","function",31],["T_WHITESPACE"," ",31],["T_STRING","setUp",31],"(",")",["T_WHITESPACE","\n    ",31],"{",["T_WHITESPACE","\n        ",32],["T_VARIABLE","$this",33],["T_OBJECT_OPERATOR","->",33],["T_STRING","objectManager",33],["T_WHITESPACE"," ",33],"=",["T_WHITESPACE"," ",33],["T_NEW","new",33],["T_WHITESPACE"," ",33],["T_NS_SEPARATOR","\\",33],["T_STRING","Magento",33],["T_NS_SEPARATOR","\\",33],["T_STRING","Framework",33],["T_NS_SEPARATOR","\\",33],["T_STRING","TestFramework",33],["T_NS_SEPARATOR","\\",33],["T_STRING","Unit",33],["T_NS_SEPARATOR","\\",33],["T_STRING","Helper",33],["T_NS_SEPARATOR","\\",33],["T_STRING","ObjectManager",33],"(",["T_VARIABLE","$this",33],")",";",["T_WHITESPACE","\n        ",33],["T_DOC_COMMENT","\/** @var \\Magento\\Sales\\Model\\Order\\Invoice\\Total\\Tax $model *\/",34],["T_WHITESPACE","\n        ",34],["T_VARIABLE","$this",35],["T_OBJECT_OPERATOR","->",35],["T_STRING","model",35],["T_WHITESPACE"," ",35],"=",["T_WHITESPACE"," ",35],["T_VARIABLE","$this",35],["T_OBJECT_OPERATOR","->",35],["T_STRING","objectManager",35],["T_OBJECT_OPERATOR","->",35],["T_STRING","getObject",35],"(",["T_NS_SEPARATOR","\\",35],["T_STRING","Magento",35],["T_NS_SEPARATOR","\\",35],["T_STRING","Sales",35],["T_NS_SEPARATOR","\\",35],["T_STRING","Model",35],["T_NS_SEPARATOR","\\",35],["T_STRING","Order",35],["T_NS_SEPARATOR","\\",35],["T_STRING","Invoice",35],["T_NS_SEPARATOR","\\",35],["T_STRING","Total",35],["T_NS_SEPARATOR","\\",35],["T_STRING","Tax",35],["T_DOUBLE_COLON","::",35],["T_CLASS","class",35],")",";",["T_WHITESPACE","\n\n        ",35],["T_VARIABLE","$this",37],["T_OBJECT_OPERATOR","->",37],["T_STRING","order",37],["T_WHITESPACE"," ",37],"=",["T_WHITESPACE"," ",37],["T_VARIABLE","$this",37],["T_OBJECT_OPERATOR","->",37],["T_STRING","getMock",37],"(",["T_WHITESPACE","\n            ",37],["T_NS_SEPARATOR","\\",38],["T_STRING","Magento",38],["T_NS_SEPARATOR","\\",38],["T_STRING","Sales",38],["T_NS_SEPARATOR","\\",38],["T_STRING","Model",38],["T_NS_SEPARATOR","\\",38],["T_STRING","Order",38],["T_DOUBLE_COLON","::",38],["T_CLASS","class",38],",",["T_WHITESPACE","\n            ",38],"[",["T_WHITESPACE","\n                ",39],["T_CONSTANT_ENCAPSED_STRING","'getInvoiceCollection'",40],",",["T_WHITESPACE","\n                ",40],["T_CONSTANT_ENCAPSED_STRING","'__wakeup'",41],["T_WHITESPACE","\n            ",41],"]",",",["T_WHITESPACE","\n            ",42],"[","]",",",["T_WHITESPACE","\n            ",43],["T_CONSTANT_ENCAPSED_STRING","''",44],",",["T_WHITESPACE","\n            ",44],["T_STRING","false",45],["T_WHITESPACE","\n        ",45],")",";",["T_WHITESPACE","\n\n        ",46],["T_VARIABLE","$this",48],["T_OBJECT_OPERATOR","->",48],["T_STRING","invoice",48],["T_WHITESPACE"," ",48],"=",["T_WHITESPACE"," ",48],["T_VARIABLE","$this",48],["T_OBJECT_OPERATOR","->",48],["T_STRING","getMock",48],"(",["T_WHITESPACE","\n            ",48],["T_NS_SEPARATOR","\\",49],["T_STRING","Magento",49],["T_NS_SEPARATOR","\\",49],["T_STRING","Sales",49],["T_NS_SEPARATOR","\\",49],["T_STRING","Model",49],["T_NS_SEPARATOR","\\",49],["T_STRING","Order",49],["T_NS_SEPARATOR","\\",49],["T_STRING","Invoice",49],["T_DOUBLE_COLON","::",49],["T_CLASS","class",49],",",["T_WHITESPACE","\n            ",49],"[",["T_WHITESPACE","\n                ",50],["T_CONSTANT_ENCAPSED_STRING","'getAllItems'",51],",",["T_WHITESPACE","\n                ",51],["T_CONSTANT_ENCAPSED_STRING","'getOrder'",52],",",["T_WHITESPACE","\n                ",52],["T_CONSTANT_ENCAPSED_STRING","'roundPrice'",53],",",["T_WHITESPACE","\n                ",53],["T_CONSTANT_ENCAPSED_STRING","'isLast'",54],",",["T_WHITESPACE","\n                ",54],["T_CONSTANT_ENCAPSED_STRING","'__wakeup'",55],",",["T_WHITESPACE","\n            ",55],"]",",",["T_WHITESPACE","\n            ",56],"[","]",",",["T_WHITESPACE","\n            ",57],["T_CONSTANT_ENCAPSED_STRING","''",58],",",["T_WHITESPACE","\n            ",58],["T_STRING","false",59],["T_WHITESPACE","\n        ",59],")",";",["T_WHITESPACE","\n        ",60],["T_VARIABLE","$this",61],["T_OBJECT_OPERATOR","->",61],["T_STRING","invoice",61],["T_OBJECT_OPERATOR","->",61],["T_STRING","expects",61],"(",["T_VARIABLE","$this",61],["T_OBJECT_OPERATOR","->",61],["T_STRING","atLeastOnce",61],"(",")",")",["T_OBJECT_OPERATOR","->",61],["T_STRING","method",61],"(",["T_CONSTANT_ENCAPSED_STRING","'getOrder'",61],")",["T_OBJECT_OPERATOR","->",61],["T_STRING","will",61],"(",["T_VARIABLE","$this",61],["T_OBJECT_OPERATOR","->",61],["T_STRING","returnValue",61],"(",["T_VARIABLE","$this",61],["T_OBJECT_OPERATOR","->",61],["T_STRING","order",61],")",")",";",["T_WHITESPACE","\n    ",61],"}",["T_WHITESPACE","\n\n    ",62],["T_DOC_COMMENT","\/**\n     * @param array $orderData\n     * @param array $invoiceData\n     * @param array $expectedResults\n     * @dataProvider collectDataProvider\n     *\/",64],["T_WHITESPACE","\n    ",69],["T_PUBLIC","public",70],["T_WHITESPACE"," ",70],["T_FUNCTION","function",70],["T_WHITESPACE"," ",70],["T_STRING","testCollect",70],"(",["T_VARIABLE","$orderData",70],",",["T_WHITESPACE"," ",70],["T_VARIABLE","$invoiceData",70],",",["T_WHITESPACE"," ",70],["T_VARIABLE","$expectedResults",70],")",["T_WHITESPACE","\n    ",70],"{",["T_WHITESPACE","\n        ",71],["T_VARIABLE","$roundingDelta",72],["T_WHITESPACE"," ",72],"=",["T_WHITESPACE"," ",72],"[","]",";",["T_WHITESPACE","\n\n        ",72],["T_COMMENT","\/\/Set up order mock\n",74],["T_WHITESPACE","        ",75],["T_FOREACH","foreach",75],["T_WHITESPACE"," ",75],"(",["T_VARIABLE","$orderData",75],"[",["T_CONSTANT_ENCAPSED_STRING","'data_fields'",75],"]",["T_WHITESPACE"," ",75],["T_AS","as",75],["T_WHITESPACE"," ",75],["T_VARIABLE","$key",75],["T_WHITESPACE"," ",75],["T_DOUBLE_ARROW","=>",75],["T_WHITESPACE"," ",75],["T_VARIABLE","$value",75],")",["T_WHITESPACE"," ",75],"{",["T_WHITESPACE","\n            ",75],["T_VARIABLE","$this",76],["T_OBJECT_OPERATOR","->",76],["T_STRING","order",76],["T_OBJECT_OPERATOR","->",76],["T_STRING","setData",76],"(",["T_VARIABLE","$key",76],",",["T_WHITESPACE"," ",76],["T_VARIABLE","$value",76],")",";",["T_WHITESPACE","\n        ",76],"}",["T_WHITESPACE","\n        ",77],["T_DOC_COMMENT","\/** @var \\Magento\\Sales\\Model\\Order\\Invoice[] $previousInvoices *\/",78],["T_WHITESPACE","\n        ",78],["T_VARIABLE","$previousInvoices",79],["T_WHITESPACE"," ",79],"=",["T_WHITESPACE"," ",79],"[","]",";",["T_WHITESPACE","\n        ",79],["T_FOREACH","foreach",80],["T_WHITESPACE"," ",80],"(",["T_VARIABLE","$orderData",80],"[",["T_CONSTANT_ENCAPSED_STRING","'previous_invoices'",80],"]",["T_WHITESPACE"," ",80],["T_AS","as",80],["T_WHITESPACE"," ",80],["T_VARIABLE","$previousInvoiceData",80],")",["T_WHITESPACE"," ",80],"{",["T_WHITESPACE","\n            ",80],["T_VARIABLE","$previousInvoice",81],["T_WHITESPACE"," ",81],"=",["T_WHITESPACE"," ",81],["T_VARIABLE","$this",81],["T_OBJECT_OPERATOR","->",81],["T_STRING","getMockBuilder",81],"(",["T_NS_SEPARATOR","\\",81],["T_STRING","Magento",81],["T_NS_SEPARATOR","\\",81],["T_STRING","Sales",81],["T_NS_SEPARATOR","\\",81],["T_STRING","Model",81],["T_NS_SEPARATOR","\\",81],["T_STRING","Order",81],["T_NS_SEPARATOR","\\",81],["T_STRING","Invoice",81],["T_DOUBLE_COLON","::",81],["T_CLASS","class",81],")",["T_WHITESPACE","\n                ",81],["T_OBJECT_OPERATOR","->",82],["T_STRING","disableOriginalConstructor",82],"(",")",["T_WHITESPACE","\n                ",82],["T_OBJECT_OPERATOR","->",83],["T_STRING","setMethods",83],"(","[",["T_CONSTANT_ENCAPSED_STRING","'isCanceled'",83],",",["T_WHITESPACE"," ",83],["T_CONSTANT_ENCAPSED_STRING","'__wakeup'",83],"]",")",["T_WHITESPACE","\n                ",83],["T_OBJECT_OPERATOR","->",84],["T_STRING","getMock",84],"(",")",";",["T_WHITESPACE","\n            ",84],["T_VARIABLE","$previousInvoice",85],["T_OBJECT_OPERATOR","->",85],["T_STRING","setData",85],"(",["T_CONSTANT_ENCAPSED_STRING","'shipping_amount'",85],",",["T_WHITESPACE"," ",85],["T_VARIABLE","$previousInvoiceData",85],"[",["T_CONSTANT_ENCAPSED_STRING","'shipping_amount'",85],"]",")",";",["T_WHITESPACE","\n            ",85],["T_VARIABLE","$previousInvoices",86],"[","]",["T_WHITESPACE"," ",86],"=",["T_WHITESPACE"," ",86],["T_VARIABLE","$previousInvoice",86],";",["T_WHITESPACE","\n        ",86],"}",["T_WHITESPACE","\n\n        ",87],["T_VARIABLE","$this",89],["T_OBJECT_OPERATOR","->",89],["T_STRING","order",89],["T_OBJECT_OPERATOR","->",89],["T_STRING","expects",89],"(",["T_VARIABLE","$this",89],["T_OBJECT_OPERATOR","->",89],["T_STRING","once",89],"(",")",")",["T_WHITESPACE","\n            ",89],["T_OBJECT_OPERATOR","->",90],["T_STRING","method",90],"(",["T_CONSTANT_ENCAPSED_STRING","'getInvoiceCollection'",90],")",["T_WHITESPACE","\n            ",90],["T_OBJECT_OPERATOR","->",91],["T_STRING","will",91],"(",["T_VARIABLE","$this",91],["T_OBJECT_OPERATOR","->",91],["T_STRING","returnValue",91],"(",["T_VARIABLE","$previousInvoices",91],")",")",";",["T_WHITESPACE","\n\n        ",91],["T_COMMENT","\/\/Set up invoice mock\n",93],["T_WHITESPACE","        ",94],["T_DOC_COMMENT","\/** @var \\Magento\\Sales\\Model\\Order\\Invoice\\Item[] $invoiceItems *\/",94],["T_WHITESPACE","\n        ",94],["T_VARIABLE","$invoiceItems",95],["T_WHITESPACE"," ",95],"=",["T_WHITESPACE"," ",95],"[","]",";",["T_WHITESPACE","\n        ",95],["T_FOREACH","foreach",96],["T_WHITESPACE"," ",96],"(",["T_VARIABLE","$invoiceData",96],"[",["T_CONSTANT_ENCAPSED_STRING","'items'",96],"]",["T_WHITESPACE"," ",96],["T_AS","as",96],["T_WHITESPACE"," ",96],["T_VARIABLE","$itemKey",96],["T_WHITESPACE"," ",96],["T_DOUBLE_ARROW","=>",96],["T_WHITESPACE"," ",96],["T_VARIABLE","$invoiceItemData",96],")",["T_WHITESPACE"," ",96],"{",["T_WHITESPACE","\n            ",96],["T_VARIABLE","$invoiceItems",97],"[",["T_VARIABLE","$itemKey",97],"]",["T_WHITESPACE"," ",97],"=",["T_WHITESPACE"," ",97],["T_VARIABLE","$this",97],["T_OBJECT_OPERATOR","->",97],["T_STRING","getInvoiceItem",97],"(",["T_VARIABLE","$invoiceItemData",97],")",";",["T_WHITESPACE","\n        ",97],"}",["T_WHITESPACE","\n        ",98],["T_VARIABLE","$this",99],["T_OBJECT_OPERATOR","->",99],["T_STRING","invoice",99],["T_OBJECT_OPERATOR","->",99],["T_STRING","expects",99],"(",["T_VARIABLE","$this",99],["T_OBJECT_OPERATOR","->",99],["T_STRING","once",99],"(",")",")",["T_WHITESPACE","\n            ",99],["T_OBJECT_OPERATOR","->",100],["T_STRING","method",100],"(",["T_CONSTANT_ENCAPSED_STRING","'getAllItems'",100],")",["T_WHITESPACE","\n            ",100],["T_OBJECT_OPERATOR","->",101],["T_STRING","will",101],"(",["T_VARIABLE","$this",101],["T_OBJECT_OPERATOR","->",101],["T_STRING","returnValue",101],"(",["T_VARIABLE","$invoiceItems",101],")",")",";",["T_WHITESPACE","\n        ",101],["T_VARIABLE","$this",102],["T_OBJECT_OPERATOR","->",102],["T_STRING","invoice",102],["T_OBJECT_OPERATOR","->",102],["T_STRING","expects",102],"(",["T_VARIABLE","$this",102],["T_OBJECT_OPERATOR","->",102],["T_STRING","once",102],"(",")",")",["T_WHITESPACE","\n            ",102],["T_OBJECT_OPERATOR","->",103],["T_STRING","method",103],"(",["T_CONSTANT_ENCAPSED_STRING","'isLast'",103],")",["T_WHITESPACE","\n            ",103],["T_OBJECT_OPERATOR","->",104],["T_STRING","will",104],"(",["T_VARIABLE","$this",104],["T_OBJECT_OPERATOR","->",104],["T_STRING","returnValue",104],"(",["T_VARIABLE","$invoiceData",104],"[",["T_CONSTANT_ENCAPSED_STRING","'is_last'",104],"]",")",")",";",["T_WHITESPACE","\n        ",104],["T_FOREACH","foreach",105],["T_WHITESPACE"," ",105],"(",["T_VARIABLE","$invoiceData",105],"[",["T_CONSTANT_ENCAPSED_STRING","'data_fields'",105],"]",["T_WHITESPACE"," ",105],["T_AS","as",105],["T_WHITESPACE"," ",105],["T_VARIABLE","$key",105],["T_WHITESPACE"," ",105],["T_DOUBLE_ARROW","=>",105],["T_WHITESPACE"," ",105],["T_VARIABLE","$value",105],")",["T_WHITESPACE"," ",105],"{",["T_WHITESPACE","\n            ",105],["T_VARIABLE","$this",106],["T_OBJECT_OPERATOR","->",106],["T_STRING","invoice",106],["T_OBJECT_OPERATOR","->",106],["T_STRING","setData",106],"(",["T_VARIABLE","$key",106],",",["T_WHITESPACE"," ",106],["T_VARIABLE","$value",106],")",";",["T_WHITESPACE","\n        ",106],"}",["T_WHITESPACE","\n        ",107],["T_VARIABLE","$this",108],["T_OBJECT_OPERATOR","->",108],["T_STRING","invoice",108],["T_OBJECT_OPERATOR","->",108],["T_STRING","expects",108],"(",["T_VARIABLE","$this",108],["T_OBJECT_OPERATOR","->",108],["T_STRING","any",108],"(",")",")",["T_WHITESPACE","\n            ",108],["T_OBJECT_OPERATOR","->",109],["T_STRING","method",109],"(",["T_CONSTANT_ENCAPSED_STRING","'roundPrice'",109],")",["T_WHITESPACE","\n            ",109],["T_OBJECT_OPERATOR","->",110],["T_STRING","will",110],"(",["T_VARIABLE","$this",110],["T_OBJECT_OPERATOR","->",110],["T_STRING","returnCallback",110],"(",["T_WHITESPACE","\n                ",110],["T_FUNCTION","function",111],["T_WHITESPACE"," ",111],"(",["T_VARIABLE","$price",111],",",["T_WHITESPACE"," ",111],["T_VARIABLE","$type",111],")",["T_WHITESPACE"," ",111],["T_USE","use",111],["T_WHITESPACE"," ",111],"(","&",["T_VARIABLE","$roundingDelta",111],")",["T_WHITESPACE"," ",111],"{",["T_WHITESPACE","\n                    ",111],["T_IF","if",112],["T_WHITESPACE"," ",112],"(","!",["T_ISSET","isset",112],"(",["T_VARIABLE","$roundingDelta",112],"[",["T_VARIABLE","$type",112],"]",")",")",["T_WHITESPACE"," ",112],"{",["T_WHITESPACE","\n                        ",112],["T_VARIABLE","$roundingDelta",113],"[",["T_VARIABLE","$type",113],"]",["T_WHITESPACE"," ",113],"=",["T_WHITESPACE"," ",113],["T_LNUMBER","0",113],";",["T_WHITESPACE","\n                    ",113],"}",["T_WHITESPACE","\n                    ",114],["T_VARIABLE","$roundedPrice",115],["T_WHITESPACE"," ",115],"=",["T_WHITESPACE"," ",115],["T_STRING","round",115],"(",["T_VARIABLE","$price",115],["T_WHITESPACE"," ",115],"+",["T_WHITESPACE"," ",115],["T_VARIABLE","$roundingDelta",115],"[",["T_VARIABLE","$type",115],"]",",",["T_WHITESPACE"," ",115],["T_LNUMBER","2",115],")",";",["T_WHITESPACE","\n                    ",115],["T_VARIABLE","$roundingDelta",116],"[",["T_VARIABLE","$type",116],"]",["T_WHITESPACE"," ",116],"=",["T_WHITESPACE"," ",116],["T_VARIABLE","$price",116],["T_WHITESPACE"," ",116],"-",["T_WHITESPACE"," ",116],["T_VARIABLE","$roundedPrice",116],";",["T_WHITESPACE","\n                    ",116],["T_RETURN","return",117],["T_WHITESPACE"," ",117],["T_VARIABLE","$roundedPrice",117],";",["T_WHITESPACE","\n                ",117],"}",["T_WHITESPACE","\n            ",118],")",")",";",["T_WHITESPACE","\n\n        ",119],["T_VARIABLE","$this",121],["T_OBJECT_OPERATOR","->",121],["T_STRING","model",121],["T_OBJECT_OPERATOR","->",121],["T_STRING","collect",121],"(",["T_VARIABLE","$this",121],["T_OBJECT_OPERATOR","->",121],["T_STRING","invoice",121],")",";",["T_WHITESPACE","\n\n        ",121],["T_COMMENT","\/\/verify invoice data\n",123],["T_WHITESPACE","        ",124],["T_FOREACH","foreach",124],["T_WHITESPACE"," ",124],"(",["T_VARIABLE","$expectedResults",124],"[",["T_CONSTANT_ENCAPSED_STRING","'invoice_data'",124],"]",["T_WHITESPACE"," ",124],["T_AS","as",124],["T_WHITESPACE"," ",124],["T_VARIABLE","$key",124],["T_WHITESPACE"," ",124],["T_DOUBLE_ARROW","=>",124],["T_WHITESPACE"," ",124],["T_VARIABLE","$value",124],")",["T_WHITESPACE"," ",124],"{",["T_WHITESPACE","\n            ",124],["T_VARIABLE","$this",125],["T_OBJECT_OPERATOR","->",125],["T_STRING","assertEquals",125],"(",["T_VARIABLE","$value",125],",",["T_WHITESPACE"," ",125],["T_VARIABLE","$this",125],["T_OBJECT_OPERATOR","->",125],["T_STRING","invoice",125],["T_OBJECT_OPERATOR","->",125],["T_STRING","getData",125],"(",["T_VARIABLE","$key",125],")",")",";",["T_WHITESPACE","\n        ",125],"}",["T_WHITESPACE","\n        ",126],["T_COMMENT","\/\/verify invoice item data\n",127],["T_WHITESPACE","        ",128],["T_FOREACH","foreach",128],["T_WHITESPACE"," ",128],"(",["T_VARIABLE","$expectedResults",128],"[",["T_CONSTANT_ENCAPSED_STRING","'invoice_items'",128],"]",["T_WHITESPACE"," ",128],["T_AS","as",128],["T_WHITESPACE"," ",128],["T_VARIABLE","$itemKey",128],["T_WHITESPACE"," ",128],["T_DOUBLE_ARROW","=>",128],["T_WHITESPACE"," ",128],["T_VARIABLE","$itemData",128],")",["T_WHITESPACE"," ",128],"{",["T_WHITESPACE","\n            ",128],["T_VARIABLE","$invoiceItem",129],["T_WHITESPACE"," ",129],"=",["T_WHITESPACE"," ",129],["T_VARIABLE","$invoiceItems",129],"[",["T_VARIABLE","$itemKey",129],"]",";",["T_WHITESPACE","\n            ",129],["T_FOREACH","foreach",130],["T_WHITESPACE"," ",130],"(",["T_VARIABLE","$itemData",130],["T_WHITESPACE"," ",130],["T_AS","as",130],["T_WHITESPACE"," ",130],["T_VARIABLE","$key",130],["T_WHITESPACE"," ",130],["T_DOUBLE_ARROW","=>",130],["T_WHITESPACE"," ",130],["T_VARIABLE","$value",130],")",["T_WHITESPACE"," ",130],"{",["T_WHITESPACE","\n                ",130],["T_VARIABLE","$this",131],["T_OBJECT_OPERATOR","->",131],["T_STRING","assertEquals",131],"(",["T_VARIABLE","$value",131],",",["T_WHITESPACE"," ",131],["T_VARIABLE","$invoiceItem",131],["T_OBJECT_OPERATOR","->",131],["T_STRING","getData",131],"(",["T_VARIABLE","$key",131],")",")",";",["T_WHITESPACE","\n            ",131],"}",["T_WHITESPACE","\n        ",132],"}",["T_WHITESPACE","\n    ",133],"}",["T_WHITESPACE","\n\n    ",134],["T_DOC_COMMENT","\/**\n     * @SuppressWarnings(PHPMD.ExcessiveMethodLength)\n     * @return array\n     *\/",136],["T_WHITESPACE","\n    ",139],["T_PUBLIC","public",140],["T_WHITESPACE"," ",140],["T_FUNCTION","function",140],["T_WHITESPACE"," ",140],["T_STRING","collectDataProvider",140],"(",")",["T_WHITESPACE","\n    ",140],"{",["T_WHITESPACE","\n        ",141],["T_VARIABLE","$result",142],["T_WHITESPACE"," ",142],"=",["T_WHITESPACE"," ",142],"[","]",";",["T_WHITESPACE","\n        ",142],["T_COMMENT","\/\/ 3 item_1, 3 item_2, $99 each, 8.19 tax rate\n",143],["T_WHITESPACE","        ",144],["T_VARIABLE","$result",144],"[",["T_CONSTANT_ENCAPSED_STRING","'partial_invoice'",144],"]",["T_WHITESPACE"," ",144],"=",["T_WHITESPACE"," ",144],"[",["T_WHITESPACE","\n            ",144],["T_CONSTANT_ENCAPSED_STRING","'order_data'",145],["T_WHITESPACE"," ",145],["T_DOUBLE_ARROW","=>",145],["T_WHITESPACE"," ",145],"[",["T_WHITESPACE","\n                ",145],["T_CONSTANT_ENCAPSED_STRING","'previous_invoices'",146],["T_WHITESPACE"," ",146],["T_DOUBLE_ARROW","=>",146],["T_WHITESPACE"," ",146],"[",["T_WHITESPACE","\n                ",146],"]",",",["T_WHITESPACE","\n                ",147],["T_CONSTANT_ENCAPSED_STRING","'data_fields'",148],["T_WHITESPACE"," ",148],["T_DOUBLE_ARROW","=>",148],["T_WHITESPACE"," ",148],"[",["T_WHITESPACE","\n                    ",148],["T_CONSTANT_ENCAPSED_STRING","'shipping_tax_amount'",149],["T_WHITESPACE"," ",149],["T_DOUBLE_ARROW","=>",149],["T_WHITESPACE"," ",149],["T_DNUMBER","2.45",149],",",["T_WHITESPACE","\n                    ",149],["T_CONSTANT_ENCAPSED_STRING","'base_shipping_tax_amount'",150],["T_WHITESPACE"," ",150],["T_DOUBLE_ARROW","=>",150],["T_WHITESPACE"," ",150],["T_DNUMBER","2.45",150],",",["T_WHITESPACE","\n                    ",150],["T_CONSTANT_ENCAPSED_STRING","'shipping_discount_tax_compensation_amount'",151],["T_WHITESPACE"," ",151],["T_DOUBLE_ARROW","=>",151],["T_WHITESPACE"," ",151],["T_LNUMBER","0",151],",",["T_WHITESPACE","\n                    ",151],["T_CONSTANT_ENCAPSED_STRING","'base_shipping_discount_tax_compensation_amount'",152],["T_WHITESPACE"," ",152],["T_DOUBLE_ARROW","=>",152],["T_WHITESPACE"," ",152],["T_LNUMBER","0",152],",",["T_WHITESPACE","\n                    ",152],["T_CONSTANT_ENCAPSED_STRING","'tax_amount'",153],["T_WHITESPACE"," ",153],["T_DOUBLE_ARROW","=>",153],["T_WHITESPACE"," ",153],["T_DNUMBER","53.56",153],",",["T_WHITESPACE","\n                    ",153],["T_CONSTANT_ENCAPSED_STRING","'base_tax_amount'",154],["T_WHITESPACE"," ",154],["T_DOUBLE_ARROW","=>",154],["T_WHITESPACE"," ",154],["T_DNUMBER","53.56",154],",",["T_WHITESPACE","\n                ",154],"]",",",["T_WHITESPACE","\n            ",155],"]",",",["T_WHITESPACE","\n            ",156],["T_CONSTANT_ENCAPSED_STRING","'invoice_data'",157],["T_WHITESPACE"," ",157],["T_DOUBLE_ARROW","=>",157],["T_WHITESPACE"," ",157],"[",["T_WHITESPACE","\n                ",157],["T_CONSTANT_ENCAPSED_STRING","'items'",158],["T_WHITESPACE"," ",158],["T_DOUBLE_ARROW","=>",158],["T_WHITESPACE"," ",158],"[",["T_WHITESPACE","\n                    ",158],["T_CONSTANT_ENCAPSED_STRING","'item_1'",159],["T_WHITESPACE"," ",159],["T_DOUBLE_ARROW","=>",159],["T_WHITESPACE"," ",159],"[",["T_WHITESPACE","\n                        ",159],["T_CONSTANT_ENCAPSED_STRING","'order_item'",160],["T_WHITESPACE"," ",160],["T_DOUBLE_ARROW","=>",160],["T_WHITESPACE"," ",160],"[",["T_WHITESPACE","\n                            ",160],["T_CONSTANT_ENCAPSED_STRING","'qty_ordered'",161],["T_WHITESPACE"," ",161],["T_DOUBLE_ARROW","=>",161],["T_WHITESPACE"," ",161],["T_LNUMBER","3",161],",",["T_WHITESPACE","\n                            ",161],["T_CONSTANT_ENCAPSED_STRING","'tax_amount'",162],["T_WHITESPACE"," ",162],["T_DOUBLE_ARROW","=>",162],["T_WHITESPACE"," ",162],["T_DNUMBER","24.32",162],",",["T_WHITESPACE","\n                            ",162],["T_CONSTANT_ENCAPSED_STRING","'tax_invoiced'",163],["T_WHITESPACE"," ",163],["T_DOUBLE_ARROW","=>",163],["T_WHITESPACE"," ",163],["T_LNUMBER","0",163],",",["T_WHITESPACE","\n                            ",163],["T_CONSTANT_ENCAPSED_STRING","'base_tax_amount'",164],["T_WHITESPACE"," ",164],["T_DOUBLE_ARROW","=>",164],["T_WHITESPACE"," ",164],["T_DNUMBER","24.32",164],",",["T_WHITESPACE","\n                            ",164],["T_CONSTANT_ENCAPSED_STRING","'base_tax_invoiced'",165],["T_WHITESPACE"," ",165],["T_DOUBLE_ARROW","=>",165],["T_WHITESPACE"," ",165],["T_LNUMBER","0",165],",",["T_WHITESPACE","\n                            ",165],["T_CONSTANT_ENCAPSED_STRING","'discount_tax_compensation_amount'",166],["T_WHITESPACE"," ",166],["T_DOUBLE_ARROW","=>",166],["T_WHITESPACE"," ",166],["T_LNUMBER","0",166],",",["T_WHITESPACE","\n                            ",166],["T_CONSTANT_ENCAPSED_STRING","'base_discount_tax_compensation_amount'",167],["T_WHITESPACE"," ",167],["T_DOUBLE_ARROW","=>",167],["T_WHITESPACE"," ",167],["T_LNUMBER","0",167],",",["T_WHITESPACE","\n                            ",167],["T_CONSTANT_ENCAPSED_STRING","'qty_invoiced'",168],["T_WHITESPACE"," ",168],["T_DOUBLE_ARROW","=>",168],["T_WHITESPACE"," ",168],["T_LNUMBER","0",168],",",["T_WHITESPACE","\n                        ",168],"]",",",["T_WHITESPACE","\n                        ",169],["T_CONSTANT_ENCAPSED_STRING","'is_last'",170],["T_WHITESPACE"," ",170],["T_DOUBLE_ARROW","=>",170],["T_WHITESPACE"," ",170],["T_STRING","false",170],",",["T_WHITESPACE","\n                        ",170],["T_CONSTANT_ENCAPSED_STRING","'qty'",171],["T_WHITESPACE"," ",171],["T_DOUBLE_ARROW","=>",171],["T_WHITESPACE"," ",171],["T_LNUMBER","1",171],",",["T_WHITESPACE","\n                    ",171],"]",",",["T_WHITESPACE","\n                    ",172],["T_CONSTANT_ENCAPSED_STRING","'item_2'",173],["T_WHITESPACE"," ",173],["T_DOUBLE_ARROW","=>",173],["T_WHITESPACE"," ",173],"[",["T_WHITESPACE","\n                        ",173],["T_CONSTANT_ENCAPSED_STRING","'order_item'",174],["T_WHITESPACE"," ",174],["T_DOUBLE_ARROW","=>",174],["T_WHITESPACE"," ",174],"[",["T_WHITESPACE","\n                            ",174],["T_CONSTANT_ENCAPSED_STRING","'qty_ordered'",175],["T_WHITESPACE"," ",175],["T_DOUBLE_ARROW","=>",175],["T_WHITESPACE"," ",175],["T_LNUMBER","3",175],",",["T_WHITESPACE","\n                            ",175],["T_CONSTANT_ENCAPSED_STRING","'tax_amount'",176],["T_WHITESPACE"," ",176],["T_DOUBLE_ARROW","=>",176],["T_WHITESPACE"," ",176],["T_DNUMBER","24.33",176],",",["T_WHITESPACE","\n                            ",176],["T_CONSTANT_ENCAPSED_STRING","'tax_invoiced'",177],["T_WHITESPACE"," ",177],["T_DOUBLE_ARROW","=>",177],["T_WHITESPACE"," ",177],["T_LNUMBER","0",177],",",["T_WHITESPACE","\n                            ",177],["T_CONSTANT_ENCAPSED_STRING","'base_tax_amount'",178],["T_WHITESPACE"," ",178],["T_DOUBLE_ARROW","=>",178],["T_WHITESPACE"," ",178],["T_DNUMBER","24.33",178],",",["T_WHITESPACE","\n                            ",178],["T_CONSTANT_ENCAPSED_STRING","'base_tax_invoiced'",179],["T_WHITESPACE"," ",179],["T_DOUBLE_ARROW","=>",179],["T_WHITESPACE"," ",179],["T_LNUMBER","0",179],",",["T_WHITESPACE","\n                            ",179],["T_CONSTANT_ENCAPSED_STRING","'discount_tax_compensation_amount'",180],["T_WHITESPACE"," ",180],["T_DOUBLE_ARROW","=>",180],["T_WHITESPACE"," ",180],["T_LNUMBER","0",180],",",["T_WHITESPACE","\n                            ",180],["T_CONSTANT_ENCAPSED_STRING","'base_discount_tax_compensation_amount'",181],["T_WHITESPACE"," ",181],["T_DOUBLE_ARROW","=>",181],["T_WHITESPACE"," ",181],["T_LNUMBER","0",181],",",["T_WHITESPACE","\n                            ",181],["T_CONSTANT_ENCAPSED_STRING","'qty_invoiced'",182],["T_WHITESPACE"," ",182],["T_DOUBLE_ARROW","=>",182],["T_WHITESPACE"," ",182],["T_LNUMBER","0",182],",",["T_WHITESPACE","\n                        ",182],"]",",",["T_WHITESPACE","\n                        ",183],["T_CONSTANT_ENCAPSED_STRING","'is_last'",184],["T_WHITESPACE"," ",184],["T_DOUBLE_ARROW","=>",184],["T_WHITESPACE"," ",184],["T_STRING","false",184],",",["T_WHITESPACE","\n                        ",184],["T_CONSTANT_ENCAPSED_STRING","'qty'",185],["T_WHITESPACE"," ",185],["T_DOUBLE_ARROW","=>",185],["T_WHITESPACE"," ",185],["T_LNUMBER","2",185],",",["T_WHITESPACE","\n                    ",185],"]",",",["T_WHITESPACE","\n                ",186],"]",",",["T_WHITESPACE","\n                ",187],["T_CONSTANT_ENCAPSED_STRING","'is_last'",188],["T_WHITESPACE"," ",188],["T_DOUBLE_ARROW","=>",188],["T_WHITESPACE"," ",188],["T_STRING","false",188],",",["T_WHITESPACE","\n                ",188],["T_CONSTANT_ENCAPSED_STRING","'data_fields'",189],["T_WHITESPACE"," ",189],["T_DOUBLE_ARROW","=>",189],["T_WHITESPACE"," ",189],"[",["T_WHITESPACE","\n                    ",189],["T_CONSTANT_ENCAPSED_STRING","'grand_total'",190],["T_WHITESPACE"," ",190],["T_DOUBLE_ARROW","=>",190],["T_WHITESPACE"," ",190],["T_LNUMBER","327",190],",",["T_WHITESPACE","\n                    ",190],["T_CONSTANT_ENCAPSED_STRING","'base_grand_total'",191],["T_WHITESPACE"," ",191],["T_DOUBLE_ARROW","=>",191],["T_WHITESPACE"," ",191],["T_LNUMBER","327",191],",",["T_WHITESPACE","\n                ",191],"]",",",["T_WHITESPACE","\n            ",192],"]",",",["T_WHITESPACE","\n            ",193],["T_CONSTANT_ENCAPSED_STRING","'expected_results'",194],["T_WHITESPACE"," ",194],["T_DOUBLE_ARROW","=>",194],["T_WHITESPACE"," ",194],"[",["T_WHITESPACE","\n                ",194],["T_CONSTANT_ENCAPSED_STRING","'invoice_items'",195],["T_WHITESPACE"," ",195],["T_DOUBLE_ARROW","=>",195],["T_WHITESPACE"," ",195],"[",["T_WHITESPACE","\n                    ",195],["T_CONSTANT_ENCAPSED_STRING","'item_1'",196],["T_WHITESPACE"," ",196],["T_DOUBLE_ARROW","=>",196],["T_WHITESPACE"," ",196],"[",["T_WHITESPACE","\n                        ",196],["T_CONSTANT_ENCAPSED_STRING","'tax_amount'",197],["T_WHITESPACE"," ",197],["T_DOUBLE_ARROW","=>",197],["T_WHITESPACE"," ",197],["T_DNUMBER","8.11",197],",",["T_WHITESPACE","\n                        ",197],["T_CONSTANT_ENCAPSED_STRING","'base_tax_amount'",198],["T_WHITESPACE"," ",198],["T_DOUBLE_ARROW","=>",198],["T_WHITESPACE"," ",198],["T_DNUMBER","8.11",198],",",["T_WHITESPACE","\n                    ",198],"]",",",["T_WHITESPACE","\n                    ",199],["T_CONSTANT_ENCAPSED_STRING","'item_2'",200],["T_WHITESPACE"," ",200],["T_DOUBLE_ARROW","=>",200],["T_WHITESPACE"," ",200],"[",["T_WHITESPACE","\n                        ",200],["T_CONSTANT_ENCAPSED_STRING","'tax_amount'",201],["T_WHITESPACE"," ",201],["T_DOUBLE_ARROW","=>",201],["T_WHITESPACE"," ",201],["T_DNUMBER","16.22",201],",",["T_WHITESPACE","\n                        ",201],["T_CONSTANT_ENCAPSED_STRING","'base_tax_amount'",202],["T_WHITESPACE"," ",202],["T_DOUBLE_ARROW","=>",202],["T_WHITESPACE"," ",202],["T_DNUMBER","16.22",202],",",["T_WHITESPACE","\n                    ",202],"]",",",["T_WHITESPACE","\n                ",203],"]",",",["T_WHITESPACE","\n                ",204],["T_CONSTANT_ENCAPSED_STRING","'invoice_data'",205],["T_WHITESPACE"," ",205],["T_DOUBLE_ARROW","=>",205],["T_WHITESPACE"," ",205],"[",["T_WHITESPACE","\n                    ",205],["T_CONSTANT_ENCAPSED_STRING","'grand_total'",206],["T_WHITESPACE"," ",206],["T_DOUBLE_ARROW","=>",206],["T_WHITESPACE"," ",206],["T_DNUMBER","353.78",206],",",["T_WHITESPACE","\n                    ",206],["T_CONSTANT_ENCAPSED_STRING","'base_grand_total'",207],["T_WHITESPACE"," ",207],["T_DOUBLE_ARROW","=>",207],["T_WHITESPACE"," ",207],["T_DNUMBER","353.78",207],",",["T_WHITESPACE","\n                    ",207],["T_CONSTANT_ENCAPSED_STRING","'tax_amount'",208],["T_WHITESPACE"," ",208],["T_DOUBLE_ARROW","=>",208],["T_WHITESPACE"," ",208],["T_DNUMBER","26.78",208],",",["T_WHITESPACE","\n                    ",208],["T_CONSTANT_ENCAPSED_STRING","'base_tax_amount'",209],["T_WHITESPACE"," ",209],["T_DOUBLE_ARROW","=>",209],["T_WHITESPACE"," ",209],["T_DNUMBER","26.78",209],",",["T_WHITESPACE","\n                ",209],"]",",",["T_WHITESPACE","\n            ",210],"]",",",["T_WHITESPACE","\n        ",211],"]",";",["T_WHITESPACE","\n\n        ",212],["T_COMMENT","\/\/ 3 item_1, 3 item_2, $99 each, 8.19 tax rate\n",214],["T_WHITESPACE","        ",215],["T_COMMENT","\/\/ item_1 has 1 already invoiced, item_2 has 2 already invoiced\n",215],["T_WHITESPACE","        ",216],["T_VARIABLE","$result",216],"[",["T_CONSTANT_ENCAPSED_STRING","'partial_invoice_second_invoice'",216],"]",["T_WHITESPACE"," ",216],"=",["T_WHITESPACE"," ",216],"[",["T_WHITESPACE","\n            ",216],["T_CONSTANT_ENCAPSED_STRING","'order_data'",217],["T_WHITESPACE"," ",217],["T_DOUBLE_ARROW","=>",217],["T_WHITESPACE"," ",217],"[",["T_WHITESPACE","\n                ",217],["T_CONSTANT_ENCAPSED_STRING","'previous_invoices'",218],["T_WHITESPACE"," ",218],["T_DOUBLE_ARROW","=>",218],["T_WHITESPACE"," ",218],"[",["T_WHITESPACE","\n                    ",218],"[",["T_WHITESPACE","\n                        ",219],["T_CONSTANT_ENCAPSED_STRING","'shipping_amount'",220],["T_WHITESPACE"," ",220],["T_DOUBLE_ARROW","=>",220],["T_WHITESPACE"," ",220],["T_LNUMBER","30",220],",",["T_WHITESPACE","\n                        ",220],["T_CONSTANT_ENCAPSED_STRING","'is_canceled'",221],["T_WHITESPACE"," ",221],["T_DOUBLE_ARROW","=>",221],["T_WHITESPACE"," ",221],["T_STRING","false",221],",",["T_WHITESPACE","\n                    ",221],"]",",",["T_WHITESPACE","\n                ",222],"]",",",["T_WHITESPACE","\n                ",223],["T_CONSTANT_ENCAPSED_STRING","'data_fields'",224],["T_WHITESPACE"," ",224],["T_DOUBLE_ARROW","=>",224],["T_WHITESPACE"," ",224],"[",["T_WHITESPACE","\n                    ",224],["T_CONSTANT_ENCAPSED_STRING","'shipping_tax_amount'",225],["T_WHITESPACE"," ",225],["T_DOUBLE_ARROW","=>",225],["T_WHITESPACE"," ",225],["T_DNUMBER","2.45",225],",",["T_WHITESPACE","\n                    ",225],["T_CONSTANT_ENCAPSED_STRING","'base_shipping_tax_amount'",226],["T_WHITESPACE"," ",226],["T_DOUBLE_ARROW","=>",226],["T_WHITESPACE"," ",226],["T_DNUMBER","2.45",226],",",["T_WHITESPACE","\n                    ",226],["T_CONSTANT_ENCAPSED_STRING","'shipping_discount_tax_compensation_amount'",227],["T_WHITESPACE"," ",227],["T_DOUBLE_ARROW","=>",227],["T_WHITESPACE"," ",227],["T_LNUMBER","0",227],",",["T_WHITESPACE","\n                    ",227],["T_CONSTANT_ENCAPSED_STRING","'base_shipping_discount_tax_compensation_amount'",228],["T_WHITESPACE"," ",228],["T_DOUBLE_ARROW","=>",228],["T_WHITESPACE"," ",228],["T_LNUMBER","0",228],",",["T_WHITESPACE","\n                    ",228],["T_CONSTANT_ENCAPSED_STRING","'tax_amount'",229],["T_WHITESPACE"," ",229],["T_DOUBLE_ARROW","=>",229],["T_WHITESPACE"," ",229],["T_DNUMBER","53.56",229],",",["T_WHITESPACE","\n                    ",229],["T_CONSTANT_ENCAPSED_STRING","'base_tax_amount'",230],["T_WHITESPACE"," ",230],["T_DOUBLE_ARROW","=>",230],["T_WHITESPACE"," ",230],["T_DNUMBER","53.56",230],",",["T_WHITESPACE","\n                ",230],"]",",",["T_WHITESPACE","\n            ",231],"]",",",["T_WHITESPACE","\n            ",232],["T_CONSTANT_ENCAPSED_STRING","'invoice_data'",233],["T_WHITESPACE"," ",233],["T_DOUBLE_ARROW","=>",233],["T_WHITESPACE"," ",233],"[",["T_WHITESPACE","\n                ",233],["T_CONSTANT_ENCAPSED_STRING","'items'",234],["T_WHITESPACE"," ",234],["T_DOUBLE_ARROW","=>",234],["T_WHITESPACE"," ",234],"[",["T_WHITESPACE","\n                    ",234],["T_CONSTANT_ENCAPSED_STRING","'item_1'",235],["T_WHITESPACE"," ",235],["T_DOUBLE_ARROW","=>",235],["T_WHITESPACE"," ",235],"[",["T_WHITESPACE","\n                        ",235],["T_CONSTANT_ENCAPSED_STRING","'order_item'",236],["T_WHITESPACE"," ",236],["T_DOUBLE_ARROW","=>",236],["T_WHITESPACE"," ",236],"[",["T_WHITESPACE","\n                            ",236],["T_CONSTANT_ENCAPSED_STRING","'qty_ordered'",237],["T_WHITESPACE"," ",237],["T_DOUBLE_ARROW","=>",237],["T_WHITESPACE"," ",237],["T_LNUMBER","3",237],",",["T_WHITESPACE","\n                            ",237],["T_CONSTANT_ENCAPSED_STRING","'tax_amount'",238],["T_WHITESPACE"," ",238],["T_DOUBLE_ARROW","=>",238],["T_WHITESPACE"," ",238],["T_DNUMBER","24.32",238],",",["T_WHITESPACE","\n                            ",238],["T_CONSTANT_ENCAPSED_STRING","'tax_invoiced'",239],["T_WHITESPACE"," ",239],["T_DOUBLE_ARROW","=>",239],["T_WHITESPACE"," ",239],["T_DNUMBER","8.11",239],",",["T_WHITESPACE","\n                            ",239],["T_CONSTANT_ENCAPSED_STRING","'base_tax_amount'",240],["T_WHITESPACE"," ",240],["T_DOUBLE_ARROW","=>",240],["T_WHITESPACE"," ",240],["T_DNUMBER","24.32",240],",",["T_WHITESPACE","\n                            ",240],["T_CONSTANT_ENCAPSED_STRING","'base_tax_invoiced'",241],["T_WHITESPACE"," ",241],["T_DOUBLE_ARROW","=>",241],["T_WHITESPACE"," ",241],["T_DNUMBER","8.11",241],",",["T_WHITESPACE","\n                            ",241],["T_CONSTANT_ENCAPSED_STRING","'discount_tax_compensation_amount'",242],["T_WHITESPACE"," ",242],["T_DOUBLE_ARROW","=>",242],["T_WHITESPACE"," ",242],["T_LNUMBER","0",242],",",["T_WHITESPACE","\n                            ",242],["T_CONSTANT_ENCAPSED_STRING","'base_discount_tax_compensation_amount'",243],["T_WHITESPACE"," ",243],["T_DOUBLE_ARROW","=>",243],["T_WHITESPACE"," ",243],["T_LNUMBER","0",243],",",["T_WHITESPACE","\n                            ",243],["T_CONSTANT_ENCAPSED_STRING","'qty_invoiced'",244],["T_WHITESPACE"," ",244],["T_DOUBLE_ARROW","=>",244],["T_WHITESPACE"," ",244],["T_LNUMBER","1",244],",",["T_WHITESPACE","\n                        ",244],"]",",",["T_WHITESPACE","\n                        ",245],["T_CONSTANT_ENCAPSED_STRING","'is_last'",246],["T_WHITESPACE"," ",246],["T_DOUBLE_ARROW","=>",246],["T_WHITESPACE"," ",246],["T_STRING","false",246],",",["T_WHITESPACE","\n                        ",246],["T_CONSTANT_ENCAPSED_STRING","'qty'",247],["T_WHITESPACE"," ",247],["T_DOUBLE_ARROW","=>",247],["T_WHITESPACE"," ",247],["T_LNUMBER","1",247],",",["T_WHITESPACE","\n                    ",247],"]",",",["T_WHITESPACE","\n                    ",248],["T_CONSTANT_ENCAPSED_STRING","'item_2'",249],["T_WHITESPACE"," ",249],["T_DOUBLE_ARROW","=>",249],["T_WHITESPACE"," ",249],"[",["T_WHITESPACE","\n                        ",249],["T_CONSTANT_ENCAPSED_STRING","'order_item'",250],["T_WHITESPACE"," ",250],["T_DOUBLE_ARROW","=>",250],["T_WHITESPACE"," ",250],"[",["T_WHITESPACE","\n                            ",250],["T_CONSTANT_ENCAPSED_STRING","'qty_ordered'",251],["T_WHITESPACE"," ",251],["T_DOUBLE_ARROW","=>",251],["T_WHITESPACE"," ",251],["T_LNUMBER","3",251],",",["T_WHITESPACE","\n                            ",251],["T_CONSTANT_ENCAPSED_STRING","'tax_amount'",252],["T_WHITESPACE"," ",252],["T_DOUBLE_ARROW","=>",252],["T_WHITESPACE"," ",252],["T_DNUMBER","24.33",252],",",["T_WHITESPACE","\n                            ",252],["T_CONSTANT_ENCAPSED_STRING","'tax_invoiced'",253],["T_WHITESPACE"," ",253],["T_DOUBLE_ARROW","=>",253],["T_WHITESPACE"," ",253],["T_DNUMBER","16.22",253],",",["T_WHITESPACE","\n                            ",253],["T_CONSTANT_ENCAPSED_STRING","'base_tax_amount'",254],["T_WHITESPACE"," ",254],["T_DOUBLE_ARROW","=>",254],["T_WHITESPACE"," ",254],["T_DNUMBER","24.33",254],",",["T_WHITESPACE","\n                            ",254],["T_CONSTANT_ENCAPSED_STRING","'base_tax_invoiced'",255],["T_WHITESPACE"," ",255],["T_DOUBLE_ARROW","=>",255],["T_WHITESPACE"," ",255],["T_DNUMBER","16.22",255],",",["T_WHITESPACE","\n                            ",255],["T_CONSTANT_ENCAPSED_STRING","'discount_tax_compensation_amount'",256],["T_WHITESPACE"," ",256],["T_DOUBLE_ARROW","=>",256],["T_WHITESPACE"," ",256],["T_LNUMBER","0",256],",",["T_WHITESPACE","\n                            ",256],["T_CONSTANT_ENCAPSED_STRING","'base_discount_tax_compensation_amount'",257],["T_WHITESPACE"," ",257],["T_DOUBLE_ARROW","=>",257],["T_WHITESPACE"," ",257],["T_LNUMBER","0",257],",",["T_WHITESPACE","\n                            ",257],["T_CONSTANT_ENCAPSED_STRING","'qty_invoiced'",258],["T_WHITESPACE"," ",258],["T_DOUBLE_ARROW","=>",258],["T_WHITESPACE"," ",258],["T_LNUMBER","2",258],",",["T_WHITESPACE","\n                        ",258],"]",",",["T_WHITESPACE","\n                        ",259],["T_CONSTANT_ENCAPSED_STRING","'is_last'",260],["T_WHITESPACE"," ",260],["T_DOUBLE_ARROW","=>",260],["T_WHITESPACE"," ",260],["T_STRING","false",260],",",["T_WHITESPACE","\n                        ",260],["T_CONSTANT_ENCAPSED_STRING","'qty'",261],["T_WHITESPACE"," ",261],["T_DOUBLE_ARROW","=>",261],["T_WHITESPACE"," ",261],["T_LNUMBER","0",261],",",["T_WHITESPACE","\n                    ",261],"]",",",["T_WHITESPACE","\n                ",262],"]",",",["T_WHITESPACE","\n                ",263],["T_CONSTANT_ENCAPSED_STRING","'is_last'",264],["T_WHITESPACE"," ",264],["T_DOUBLE_ARROW","=>",264],["T_WHITESPACE"," ",264],["T_STRING","false",264],",",["T_WHITESPACE","\n                ",264],["T_CONSTANT_ENCAPSED_STRING","'data_fields'",265],["T_WHITESPACE"," ",265],["T_DOUBLE_ARROW","=>",265],["T_WHITESPACE"," ",265],"[",["T_WHITESPACE","\n                    ",265],["T_CONSTANT_ENCAPSED_STRING","'grand_total'",266],["T_WHITESPACE"," ",266],["T_DOUBLE_ARROW","=>",266],["T_WHITESPACE"," ",266],["T_LNUMBER","99",266],",",["T_WHITESPACE","\n                    ",266],["T_CONSTANT_ENCAPSED_STRING","'base_grand_total'",267],["T_WHITESPACE"," ",267],["T_DOUBLE_ARROW","=>",267],["T_WHITESPACE"," ",267],["T_LNUMBER","99",267],",",["T_WHITESPACE","\n                ",267],"]",",",["T_WHITESPACE","\n            ",268],"]",",",["T_WHITESPACE","\n            ",269],["T_CONSTANT_ENCAPSED_STRING","'expected_results'",270],["T_WHITESPACE"," ",270],["T_DOUBLE_ARROW","=>",270],["T_WHITESPACE"," ",270],"[",["T_WHITESPACE","\n                ",270],["T_CONSTANT_ENCAPSED_STRING","'invoice_items'",271],["T_WHITESPACE"," ",271],["T_DOUBLE_ARROW","=>",271],["T_WHITESPACE"," ",271],"[",["T_WHITESPACE","\n                    ",271],["T_CONSTANT_ENCAPSED_STRING","'item_1'",272],["T_WHITESPACE"," ",272],["T_DOUBLE_ARROW","=>",272],["T_WHITESPACE"," ",272],"[",["T_WHITESPACE","\n                        ",272],["T_CONSTANT_ENCAPSED_STRING","'tax_amount'",273],["T_WHITESPACE"," ",273],["T_DOUBLE_ARROW","=>",273],["T_WHITESPACE"," ",273],["T_DNUMBER","8.11",273],",",["T_WHITESPACE","\n                        ",273],["T_CONSTANT_ENCAPSED_STRING","'base_tax_amount'",274],["T_WHITESPACE"," ",274],["T_DOUBLE_ARROW","=>",274],["T_WHITESPACE"," ",274],["T_DNUMBER","8.11",274],",",["T_WHITESPACE","\n                    ",274],"]",",",["T_WHITESPACE","\n                ",275],"]",",",["T_WHITESPACE","\n                ",276],["T_CONSTANT_ENCAPSED_STRING","'invoice_data'",277],["T_WHITESPACE"," ",277],["T_DOUBLE_ARROW","=>",277],["T_WHITESPACE"," ",277],"[",["T_WHITESPACE","\n                    ",277],["T_CONSTANT_ENCAPSED_STRING","'grand_total'",278],["T_WHITESPACE"," ",278],["T_DOUBLE_ARROW","=>",278],["T_WHITESPACE"," ",278],["T_DNUMBER","107.11",278],",",["T_WHITESPACE","\n                    ",278],["T_CONSTANT_ENCAPSED_STRING","'base_grand_total'",279],["T_WHITESPACE"," ",279],["T_DOUBLE_ARROW","=>",279],["T_WHITESPACE"," ",279],["T_DNUMBER","107.11",279],",",["T_WHITESPACE","\n                    ",279],["T_CONSTANT_ENCAPSED_STRING","'tax_amount'",280],["T_WHITESPACE"," ",280],["T_DOUBLE_ARROW","=>",280],["T_WHITESPACE"," ",280],["T_DNUMBER","8.11",280],",",["T_WHITESPACE","\n                    ",280],["T_CONSTANT_ENCAPSED_STRING","'base_tax_amount'",281],["T_WHITESPACE"," ",281],["T_DOUBLE_ARROW","=>",281],["T_WHITESPACE"," ",281],["T_DNUMBER","8.11",281],",",["T_WHITESPACE","\n                ",281],"]",",",["T_WHITESPACE","\n            ",282],"]",",",["T_WHITESPACE","\n        ",283],"]",";",["T_WHITESPACE","\n        ",284],["T_COMMENT","\/\/ 3 item_1, 3 item_2, $99 each, 8.19 tax rate\n",285],["T_WHITESPACE","        ",286],["T_COMMENT","\/\/ item_1 has 1 already invoiced, item_2 has 2 already invoiced\n",286],["T_WHITESPACE","        ",287],["T_VARIABLE","$result",287],"[",["T_CONSTANT_ENCAPSED_STRING","'partial_invoice_last_invoice'",287],"]",["T_WHITESPACE"," ",287],"=",["T_WHITESPACE"," ",287],"[",["T_WHITESPACE","\n            ",287],["T_CONSTANT_ENCAPSED_STRING","'order_data'",288],["T_WHITESPACE"," ",288],["T_DOUBLE_ARROW","=>",288],["T_WHITESPACE"," ",288],"[",["T_WHITESPACE","\n                ",288],["T_CONSTANT_ENCAPSED_STRING","'previous_invoices'",289],["T_WHITESPACE"," ",289],["T_DOUBLE_ARROW","=>",289],["T_WHITESPACE"," ",289],"[",["T_WHITESPACE","\n                    ",289],"[",["T_WHITESPACE","\n                        ",290],["T_CONSTANT_ENCAPSED_STRING","'shipping_amount'",291],["T_WHITESPACE"," ",291],["T_DOUBLE_ARROW","=>",291],["T_WHITESPACE"," ",291],["T_LNUMBER","30",291],",",["T_WHITESPACE","\n                        ",291],["T_CONSTANT_ENCAPSED_STRING","'is_canceled'",292],["T_WHITESPACE"," ",292],["T_DOUBLE_ARROW","=>",292],["T_WHITESPACE"," ",292],["T_STRING","false",292],",",["T_WHITESPACE","\n                    ",292],"]",",",["T_WHITESPACE","\n                ",293],"]",",",["T_WHITESPACE","\n                ",294],["T_CONSTANT_ENCAPSED_STRING","'data_fields'",295],["T_WHITESPACE"," ",295],["T_DOUBLE_ARROW","=>",295],["T_WHITESPACE"," ",295],"[",["T_WHITESPACE","\n                    ",295],["T_CONSTANT_ENCAPSED_STRING","'shipping_tax_amount'",296],["T_WHITESPACE"," ",296],["T_DOUBLE_ARROW","=>",296],["T_WHITESPACE"," ",296],["T_DNUMBER","2.45",296],",",["T_WHITESPACE","\n                    ",296],["T_CONSTANT_ENCAPSED_STRING","'base_shipping_tax_amount'",297],["T_WHITESPACE"," ",297],["T_DOUBLE_ARROW","=>",297],["T_WHITESPACE"," ",297],["T_DNUMBER","2.45",297],",",["T_WHITESPACE","\n                    ",297],["T_CONSTANT_ENCAPSED_STRING","'shipping_discount_tax_compensation_amount'",298],["T_WHITESPACE"," ",298],["T_DOUBLE_ARROW","=>",298],["T_WHITESPACE"," ",298],["T_LNUMBER","0",298],",",["T_WHITESPACE","\n                    ",298],["T_CONSTANT_ENCAPSED_STRING","'base_shipping_discount_tax_compensation_amount'",299],["T_WHITESPACE"," ",299],["T_DOUBLE_ARROW","=>",299],["T_WHITESPACE"," ",299],["T_LNUMBER","0",299],",",["T_WHITESPACE","\n                    ",299],["T_CONSTANT_ENCAPSED_STRING","'tax_amount'",300],["T_WHITESPACE"," ",300],["T_DOUBLE_ARROW","=>",300],["T_WHITESPACE"," ",300],["T_DNUMBER","53.56",300],",",["T_WHITESPACE","\n                    ",300],["T_CONSTANT_ENCAPSED_STRING","'base_tax_amount'",301],["T_WHITESPACE"," ",301],["T_DOUBLE_ARROW","=>",301],["T_WHITESPACE"," ",301],["T_DNUMBER","53.56",301],",",["T_WHITESPACE","\n                ",301],"]",",",["T_WHITESPACE","\n            ",302],"]",",",["T_WHITESPACE","\n            ",303],["T_CONSTANT_ENCAPSED_STRING","'invoice_data'",304],["T_WHITESPACE"," ",304],["T_DOUBLE_ARROW","=>",304],["T_WHITESPACE"," ",304],"[",["T_WHITESPACE","\n                ",304],["T_CONSTANT_ENCAPSED_STRING","'items'",305],["T_WHITESPACE"," ",305],["T_DOUBLE_ARROW","=>",305],["T_WHITESPACE"," ",305],"[",["T_WHITESPACE","\n                    ",305],["T_CONSTANT_ENCAPSED_STRING","'item_1'",306],["T_WHITESPACE"," ",306],["T_DOUBLE_ARROW","=>",306],["T_WHITESPACE"," ",306],"[",["T_WHITESPACE","\n                        ",306],["T_CONSTANT_ENCAPSED_STRING","'order_item'",307],["T_WHITESPACE"," ",307],["T_DOUBLE_ARROW","=>",307],["T_WHITESPACE"," ",307],"[",["T_WHITESPACE","\n                            ",307],["T_CONSTANT_ENCAPSED_STRING","'qty_ordered'",308],["T_WHITESPACE"," ",308],["T_DOUBLE_ARROW","=>",308],["T_WHITESPACE"," ",308],["T_LNUMBER","3",308],",",["T_WHITESPACE","\n                            ",308],["T_CONSTANT_ENCAPSED_STRING","'tax_amount'",309],["T_WHITESPACE"," ",309],["T_DOUBLE_ARROW","=>",309],["T_WHITESPACE"," ",309],["T_DNUMBER","24.32",309],",",["T_WHITESPACE","\n                            ",309],["T_CONSTANT_ENCAPSED_STRING","'tax_invoiced'",310],["T_WHITESPACE"," ",310],["T_DOUBLE_ARROW","=>",310],["T_WHITESPACE"," ",310],["T_DNUMBER","16.22",310],",",["T_WHITESPACE","\n                            ",310],["T_CONSTANT_ENCAPSED_STRING","'base_tax_amount'",311],["T_WHITESPACE"," ",311],["T_DOUBLE_ARROW","=>",311],["T_WHITESPACE"," ",311],["T_DNUMBER","24.32",311],",",["T_WHITESPACE","\n                            ",311],["T_CONSTANT_ENCAPSED_STRING","'base_tax_invoiced'",312],["T_WHITESPACE"," ",312],["T_DOUBLE_ARROW","=>",312],["T_WHITESPACE"," ",312],["T_DNUMBER","16.22",312],",",["T_WHITESPACE","\n                            ",312],["T_CONSTANT_ENCAPSED_STRING","'discount_tax_compensation_amount'",313],["T_WHITESPACE"," ",313],["T_DOUBLE_ARROW","=>",313],["T_WHITESPACE"," ",313],["T_LNUMBER","0",313],",",["T_WHITESPACE","\n                            ",313],["T_CONSTANT_ENCAPSED_STRING","'base_discount_tax_compensation_amount'",314],["T_WHITESPACE"," ",314],["T_DOUBLE_ARROW","=>",314],["T_WHITESPACE"," ",314],["T_LNUMBER","0",314],",",["T_WHITESPACE","\n                            ",314],["T_CONSTANT_ENCAPSED_STRING","'qty_invoiced'",315],["T_WHITESPACE"," ",315],["T_DOUBLE_ARROW","=>",315],["T_WHITESPACE"," ",315],["T_LNUMBER","2",315],",",["T_WHITESPACE","\n                        ",315],"]",",",["T_WHITESPACE","\n                        ",316],["T_CONSTANT_ENCAPSED_STRING","'is_last'",317],["T_WHITESPACE"," ",317],["T_DOUBLE_ARROW","=>",317],["T_WHITESPACE"," ",317],["T_STRING","true",317],",",["T_WHITESPACE","\n                        ",317],["T_CONSTANT_ENCAPSED_STRING","'qty'",318],["T_WHITESPACE"," ",318],["T_DOUBLE_ARROW","=>",318],["T_WHITESPACE"," ",318],["T_LNUMBER","1",318],",",["T_WHITESPACE","\n                    ",318],"]",",",["T_WHITESPACE","\n                    ",319],["T_CONSTANT_ENCAPSED_STRING","'item_2'",320],["T_WHITESPACE"," ",320],["T_DOUBLE_ARROW","=>",320],["T_WHITESPACE"," ",320],"[",["T_WHITESPACE","\n                        ",320],["T_CONSTANT_ENCAPSED_STRING","'order_item'",321],["T_WHITESPACE"," ",321],["T_DOUBLE_ARROW","=>",321],["T_WHITESPACE"," ",321],"[",["T_WHITESPACE","\n                            ",321],["T_CONSTANT_ENCAPSED_STRING","'qty_ordered'",322],["T_WHITESPACE"," ",322],["T_DOUBLE_ARROW","=>",322],["T_WHITESPACE"," ",322],["T_LNUMBER","3",322],",",["T_WHITESPACE","\n                            ",322],["T_CONSTANT_ENCAPSED_STRING","'tax_amount'",323],["T_WHITESPACE"," ",323],["T_DOUBLE_ARROW","=>",323],["T_WHITESPACE"," ",323],["T_DNUMBER","24.33",323],",",["T_WHITESPACE","\n                            ",323],["T_CONSTANT_ENCAPSED_STRING","'tax_invoiced'",324],["T_WHITESPACE"," ",324],["T_DOUBLE_ARROW","=>",324],["T_WHITESPACE"," ",324],["T_DNUMBER","16.22",324],",",["T_WHITESPACE","\n                            ",324],["T_CONSTANT_ENCAPSED_STRING","'base_tax_amount'",325],["T_WHITESPACE"," ",325],["T_DOUBLE_ARROW","=>",325],["T_WHITESPACE"," ",325],["T_DNUMBER","24.33",325],",",["T_WHITESPACE","\n                            ",325],["T_CONSTANT_ENCAPSED_STRING","'base_tax_invoiced'",326],["T_WHITESPACE"," ",326],["T_DOUBLE_ARROW","=>",326],["T_WHITESPACE"," ",326],["T_DNUMBER","16.22",326],",",["T_WHITESPACE","\n                            ",326],["T_CONSTANT_ENCAPSED_STRING","'discount_tax_compensation_amount'",327],["T_WHITESPACE"," ",327],["T_DOUBLE_ARROW","=>",327],["T_WHITESPACE"," ",327],["T_LNUMBER","0",327],",",["T_WHITESPACE","\n                            ",327],["T_CONSTANT_ENCAPSED_STRING","'base_discount_tax_compensation_amount'",328],["T_WHITESPACE"," ",328],["T_DOUBLE_ARROW","=>",328],["T_WHITESPACE"," ",328],["T_LNUMBER","0",328],",",["T_WHITESPACE","\n                            ",328],["T_CONSTANT_ENCAPSED_STRING","'qty_invoiced'",329],["T_WHITESPACE"," ",329],["T_DOUBLE_ARROW","=>",329],["T_WHITESPACE"," ",329],["T_LNUMBER","2",329],",",["T_WHITESPACE","\n                        ",329],"]",",",["T_WHITESPACE","\n                        ",330],["T_CONSTANT_ENCAPSED_STRING","'is_last'",331],["T_WHITESPACE"," ",331],["T_DOUBLE_ARROW","=>",331],["T_WHITESPACE"," ",331],["T_STRING","true",331],",",["T_WHITESPACE","\n                        ",331],["T_CONSTANT_ENCAPSED_STRING","'qty'",332],["T_WHITESPACE"," ",332],["T_DOUBLE_ARROW","=>",332],["T_WHITESPACE"," ",332],["T_LNUMBER","1",332],",",["T_WHITESPACE","\n                    ",332],"]",",",["T_WHITESPACE","\n                ",333],"]",",",["T_WHITESPACE","\n                ",334],["T_CONSTANT_ENCAPSED_STRING","'is_last'",335],["T_WHITESPACE"," ",335],["T_DOUBLE_ARROW","=>",335],["T_WHITESPACE"," ",335],["T_STRING","false",335],",",["T_WHITESPACE","\n                ",335],["T_CONSTANT_ENCAPSED_STRING","'data_fields'",336],["T_WHITESPACE"," ",336],["T_DOUBLE_ARROW","=>",336],["T_WHITESPACE"," ",336],"[",["T_WHITESPACE","\n                    ",336],["T_CONSTANT_ENCAPSED_STRING","'grand_total'",337],["T_WHITESPACE"," ",337],["T_DOUBLE_ARROW","=>",337],["T_WHITESPACE"," ",337],["T_LNUMBER","198",337],",",["T_WHITESPACE","\n                    ",337],["T_CONSTANT_ENCAPSED_STRING","'base_grand_total'",338],["T_WHITESPACE"," ",338],["T_DOUBLE_ARROW","=>",338],["T_WHITESPACE"," ",338],["T_LNUMBER","198",338],",",["T_WHITESPACE","\n                ",338],"]",",",["T_WHITESPACE","\n            ",339],"]",",",["T_WHITESPACE","\n            ",340],["T_CONSTANT_ENCAPSED_STRING","'expected_results'",341],["T_WHITESPACE"," ",341],["T_DOUBLE_ARROW","=>",341],["T_WHITESPACE"," ",341],"[",["T_WHITESPACE","\n                ",341],["T_CONSTANT_ENCAPSED_STRING","'invoice_items'",342],["T_WHITESPACE"," ",342],["T_DOUBLE_ARROW","=>",342],["T_WHITESPACE"," ",342],"[",["T_WHITESPACE","\n                    ",342],["T_CONSTANT_ENCAPSED_STRING","'item_1'",343],["T_WHITESPACE"," ",343],["T_DOUBLE_ARROW","=>",343],["T_WHITESPACE"," ",343],"[",["T_WHITESPACE","\n                        ",343],["T_CONSTANT_ENCAPSED_STRING","'tax_amount'",344],["T_WHITESPACE"," ",344],["T_DOUBLE_ARROW","=>",344],["T_WHITESPACE"," ",344],["T_DNUMBER","8.10",344],",",["T_WHITESPACE","\n                        ",344],["T_CONSTANT_ENCAPSED_STRING","'base_tax_amount'",345],["T_WHITESPACE"," ",345],["T_DOUBLE_ARROW","=>",345],["T_WHITESPACE"," ",345],["T_DNUMBER","8.10",345],",",["T_WHITESPACE","\n                    ",345],"]",",",["T_WHITESPACE","\n                    ",346],["T_CONSTANT_ENCAPSED_STRING","'item_2'",347],["T_WHITESPACE"," ",347],["T_DOUBLE_ARROW","=>",347],["T_WHITESPACE"," ",347],"[",["T_WHITESPACE","\n                        ",347],["T_CONSTANT_ENCAPSED_STRING","'tax_amount'",348],["T_WHITESPACE"," ",348],["T_DOUBLE_ARROW","=>",348],["T_WHITESPACE"," ",348],["T_DNUMBER","8.11",348],",",["T_WHITESPACE","\n                        ",348],["T_CONSTANT_ENCAPSED_STRING","'base_tax_amount'",349],["T_WHITESPACE"," ",349],["T_DOUBLE_ARROW","=>",349],["T_WHITESPACE"," ",349],["T_DNUMBER","8.11",349],",",["T_WHITESPACE","\n                    ",349],"]",",",["T_WHITESPACE","\n                ",350],"]",",",["T_WHITESPACE","\n                ",351],["T_CONSTANT_ENCAPSED_STRING","'invoice_data'",352],["T_WHITESPACE"," ",352],["T_DOUBLE_ARROW","=>",352],["T_WHITESPACE"," ",352],"[",["T_WHITESPACE","\n                    ",352],["T_CONSTANT_ENCAPSED_STRING","'grand_total'",353],["T_WHITESPACE"," ",353],["T_DOUBLE_ARROW","=>",353],["T_WHITESPACE"," ",353],["T_DNUMBER","214.21",353],",",["T_WHITESPACE","\n                    ",353],["T_CONSTANT_ENCAPSED_STRING","'base_grand_total'",354],["T_WHITESPACE"," ",354],["T_DOUBLE_ARROW","=>",354],["T_WHITESPACE"," ",354],["T_DNUMBER","214.21",354],",",["T_WHITESPACE","\n                    ",354],["T_CONSTANT_ENCAPSED_STRING","'tax_amount'",355],["T_WHITESPACE"," ",355],["T_DOUBLE_ARROW","=>",355],["T_WHITESPACE"," ",355],["T_DNUMBER","16.21",355],",",["T_WHITESPACE","\n                    ",355],["T_CONSTANT_ENCAPSED_STRING","'base_tax_amount'",356],["T_WHITESPACE"," ",356],["T_DOUBLE_ARROW","=>",356],["T_WHITESPACE"," ",356],["T_DNUMBER","16.21",356],",",["T_WHITESPACE","\n                ",356],"]",",",["T_WHITESPACE","\n            ",357],"]",",",["T_WHITESPACE","\n        ",358],"]",";",["T_WHITESPACE","\n        ",359],["T_RETURN","return",360],["T_WHITESPACE"," ",360],["T_VARIABLE","$result",360],";",["T_WHITESPACE","\n    ",360],"}",["T_WHITESPACE","\n\n    ",361],["T_DOC_COMMENT","\/**\n     * @param $invoiceItemData array\n     * @return \\Magento\\Sales\\Model\\Order\\Invoice\\Item|\\PHPUnit_Framework_MockObject_MockObject\n     *\/",363],["T_WHITESPACE","\n    ",366],["T_PROTECTED","protected",367],["T_WHITESPACE"," ",367],["T_FUNCTION","function",367],["T_WHITESPACE"," ",367],["T_STRING","getInvoiceItem",367],"(",["T_VARIABLE","$invoiceItemData",367],")",["T_WHITESPACE","\n    ",367],"{",["T_WHITESPACE","\n        ",368],["T_DOC_COMMENT","\/** @var \\Magento\\Sales\\Model\\Order\\Item|\\PHPUnit_Framework_MockObject_MockObject $orderItem *\/",369],["T_WHITESPACE","\n        ",369],["T_VARIABLE","$orderItem",370],["T_WHITESPACE"," ",370],"=",["T_WHITESPACE"," ",370],["T_VARIABLE","$this",370],["T_OBJECT_OPERATOR","->",370],["T_STRING","getMock",370],"(",["T_WHITESPACE","\n            ",370],["T_NS_SEPARATOR","\\",371],["T_STRING","Magento",371],["T_NS_SEPARATOR","\\",371],["T_STRING","Sales",371],["T_NS_SEPARATOR","\\",371],["T_STRING","Model",371],["T_NS_SEPARATOR","\\",371],["T_STRING","Order",371],["T_NS_SEPARATOR","\\",371],["T_STRING","Item",371],["T_DOUBLE_COLON","::",371],["T_CLASS","class",371],",",["T_WHITESPACE","\n            ",371],"[",["T_WHITESPACE","\n                ",372],["T_CONSTANT_ENCAPSED_STRING","'isDummy'",373],",",["T_WHITESPACE","\n                ",373],["T_CONSTANT_ENCAPSED_STRING","'__wakeup'",374],["T_WHITESPACE","\n            ",374],"]",",",["T_WHITESPACE","\n            ",375],"[","]",",",["T_WHITESPACE","\n            ",376],["T_CONSTANT_ENCAPSED_STRING","''",377],",",["T_WHITESPACE","\n            ",377],["T_STRING","false",378],["T_WHITESPACE","\n        ",378],")",";",["T_WHITESPACE","\n        ",379],["T_FOREACH","foreach",380],["T_WHITESPACE"," ",380],"(",["T_VARIABLE","$invoiceItemData",380],"[",["T_CONSTANT_ENCAPSED_STRING","'order_item'",380],"]",["T_WHITESPACE"," ",380],["T_AS","as",380],["T_WHITESPACE"," ",380],["T_VARIABLE","$key",380],["T_WHITESPACE"," ",380],["T_DOUBLE_ARROW","=>",380],["T_WHITESPACE"," ",380],["T_VARIABLE","$value",380],")",["T_WHITESPACE"," ",380],"{",["T_WHITESPACE","\n            ",380],["T_VARIABLE","$orderItem",381],["T_OBJECT_OPERATOR","->",381],["T_STRING","setData",381],"(",["T_VARIABLE","$key",381],",",["T_WHITESPACE"," ",381],["T_VARIABLE","$value",381],")",";",["T_WHITESPACE","\n        ",381],"}",["T_WHITESPACE","\n\n        ",382],["T_DOC_COMMENT","\/** @var \\Magento\\Sales\\Model\\Order\\Invoice\\Item|\\PHPUnit_Framework_MockObject_MockObject $invoiceItem *\/",384],["T_WHITESPACE","\n        ",384],["T_VARIABLE","$invoiceItem",385],["T_WHITESPACE"," ",385],"=",["T_WHITESPACE"," ",385],["T_VARIABLE","$this",385],["T_OBJECT_OPERATOR","->",385],["T_STRING","getMock",385],"(",["T_WHITESPACE","\n            ",385],["T_NS_SEPARATOR","\\",386],["T_STRING","Magento",386],["T_NS_SEPARATOR","\\",386],["T_STRING","Sales",386],["T_NS_SEPARATOR","\\",386],["T_STRING","Model",386],["T_NS_SEPARATOR","\\",386],["T_STRING","Order",386],["T_NS_SEPARATOR","\\",386],["T_STRING","Invoice",386],["T_NS_SEPARATOR","\\",386],["T_STRING","Item",386],["T_DOUBLE_COLON","::",386],["T_CLASS","class",386],",",["T_WHITESPACE","\n            ",386],"[",["T_WHITESPACE","\n                ",387],["T_CONSTANT_ENCAPSED_STRING","'getOrderItem'",388],",",["T_WHITESPACE","\n                ",388],["T_CONSTANT_ENCAPSED_STRING","'isLast'",389],",",["T_WHITESPACE","\n                ",389],["T_CONSTANT_ENCAPSED_STRING","'__wakeup'",390],["T_WHITESPACE","\n            ",390],"]",",",["T_WHITESPACE","\n            ",391],"[","]",",",["T_WHITESPACE","\n            ",392],["T_CONSTANT_ENCAPSED_STRING","''",393],",",["T_WHITESPACE","\n            ",393],["T_STRING","false",394],["T_WHITESPACE","\n        ",394],")",";",["T_WHITESPACE","\n        ",395],["T_VARIABLE","$invoiceItem",396],["T_OBJECT_OPERATOR","->",396],["T_STRING","expects",396],"(",["T_VARIABLE","$this",396],["T_OBJECT_OPERATOR","->",396],["T_STRING","any",396],"(",")",")",["T_OBJECT_OPERATOR","->",396],["T_STRING","method",396],"(",["T_CONSTANT_ENCAPSED_STRING","'getOrderItem'",396],")",["T_OBJECT_OPERATOR","->",396],["T_STRING","will",396],"(",["T_VARIABLE","$this",396],["T_OBJECT_OPERATOR","->",396],["T_STRING","returnValue",396],"(",["T_VARIABLE","$orderItem",396],")",")",";",["T_WHITESPACE","\n        ",396],["T_VARIABLE","$invoiceItem",397],["T_OBJECT_OPERATOR","->",397],["T_STRING","expects",397],"(",["T_VARIABLE","$this",397],["T_OBJECT_OPERATOR","->",397],["T_STRING","any",397],"(",")",")",["T_WHITESPACE","\n            ",397],["T_OBJECT_OPERATOR","->",398],["T_STRING","method",398],"(",["T_CONSTANT_ENCAPSED_STRING","'isLast'",398],")",["T_WHITESPACE","\n            ",398],["T_OBJECT_OPERATOR","->",399],["T_STRING","will",399],"(",["T_VARIABLE","$this",399],["T_OBJECT_OPERATOR","->",399],["T_STRING","returnValue",399],"(",["T_VARIABLE","$invoiceItemData",399],"[",["T_CONSTANT_ENCAPSED_STRING","'is_last'",399],"]",")",")",";",["T_WHITESPACE","\n        ",399],["T_VARIABLE","$invoiceItem",400],["T_OBJECT_OPERATOR","->",400],["T_STRING","setData",400],"(",["T_CONSTANT_ENCAPSED_STRING","'qty'",400],",",["T_WHITESPACE"," ",400],["T_VARIABLE","$invoiceItemData",400],"[",["T_CONSTANT_ENCAPSED_STRING","'qty'",400],"]",")",";",["T_WHITESPACE","\n        ",400],["T_RETURN","return",401],["T_WHITESPACE"," ",401],["T_VARIABLE","$invoiceItem",401],";",["T_WHITESPACE","\n    ",401],"}",["T_WHITESPACE","\n",402],"}",["T_WHITESPACE","\n",403]]
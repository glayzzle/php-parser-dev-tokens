[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Copyright \u00c2\u00a9 2013-2017 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n *\/",2],["T_WHITESPACE","\n\n",5],["T_COMMENT","\/\/ @codingStandardsIgnoreFile\n",7],["T_WHITESPACE","\n",8],["T_NAMESPACE","namespace",9],["T_WHITESPACE"," ",9],["T_STRING","Magento",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Sales",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Test",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Unit",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Model",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Order",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Creditmemo",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Total",9],";",["T_WHITESPACE","\n\n",9],["T_CLASS","class",11],["T_WHITESPACE"," ",11],["T_STRING","ShippingTest",11],["T_WHITESPACE"," ",11],["T_EXTENDS","extends",11],["T_WHITESPACE"," ",11],["T_NS_SEPARATOR","\\",11],["T_STRING","PHPUnit_Framework_TestCase",11],["T_WHITESPACE","\n",11],"{",["T_WHITESPACE","\n    ",12],["T_DOC_COMMENT","\/**\n     * @var \\PHPUnit_Framework_MockObject_MockObject\n     *\/",13],["T_WHITESPACE","\n    ",15],["T_PROTECTED","protected",16],["T_WHITESPACE"," ",16],["T_VARIABLE","$creditmemoMock",16],";",["T_WHITESPACE","\n\n    ",16],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Tax\\Model\\Config|\\PHPUnit_Framework_MockObject_MockObject\n     *\/",18],["T_WHITESPACE","\n    ",20],["T_PROTECTED","protected",21],["T_WHITESPACE"," ",21],["T_VARIABLE","$taxConfig",21],";",["T_WHITESPACE","\n\n    ",21],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Sales\\Model\\Order\\Creditmemo\\Total\\Shipping\n     *\/",23],["T_WHITESPACE","\n    ",25],["T_PROTECTED","protected",26],["T_WHITESPACE"," ",26],["T_VARIABLE","$shippingCollector",26],";",["T_WHITESPACE","\n\n    ",26],["T_PROTECTED","protected",28],["T_WHITESPACE"," ",28],["T_FUNCTION","function",28],["T_WHITESPACE"," ",28],["T_STRING","setUp",28],"(",")",["T_WHITESPACE","\n    ",28],"{",["T_WHITESPACE","\n        ",29],["T_VARIABLE","$objectManager",30],["T_WHITESPACE"," ",30],"=",["T_WHITESPACE"," ",30],["T_NEW","new",30],["T_WHITESPACE"," ",30],["T_NS_SEPARATOR","\\",30],["T_STRING","Magento",30],["T_NS_SEPARATOR","\\",30],["T_STRING","Framework",30],["T_NS_SEPARATOR","\\",30],["T_STRING","TestFramework",30],["T_NS_SEPARATOR","\\",30],["T_STRING","Unit",30],["T_NS_SEPARATOR","\\",30],["T_STRING","Helper",30],["T_NS_SEPARATOR","\\",30],["T_STRING","ObjectManager",30],"(",["T_VARIABLE","$this",30],")",";",["T_WHITESPACE","\n\n        ",30],["T_VARIABLE","$this",32],["T_OBJECT_OPERATOR","->",32],["T_STRING","creditmemoMock",32],["T_WHITESPACE"," ",32],"=",["T_WHITESPACE"," ",32],["T_VARIABLE","$this",32],["T_OBJECT_OPERATOR","->",32],["T_STRING","getMockBuilder",32],"(",["T_NS_SEPARATOR","\\",32],["T_STRING","Magento",32],["T_NS_SEPARATOR","\\",32],["T_STRING","Sales",32],["T_NS_SEPARATOR","\\",32],["T_STRING","Model",32],["T_NS_SEPARATOR","\\",32],["T_STRING","Order",32],["T_NS_SEPARATOR","\\",32],["T_STRING","Creditmemo",32],["T_DOUBLE_COLON","::",32],["T_CLASS","class",32],")",["T_WHITESPACE","\n            ",32],["T_OBJECT_OPERATOR","->",33],["T_STRING","disableOriginalConstructor",33],"(",")",["T_WHITESPACE","\n            ",33],["T_OBJECT_OPERATOR","->",34],["T_STRING","setMethods",34],"(",["T_WHITESPACE","\n                ",34],"[",["T_WHITESPACE","\n                    ",35],["T_CONSTANT_ENCAPSED_STRING","'getOrder'",36],",",["T_WHITESPACE","\n                    ",36],["T_CONSTANT_ENCAPSED_STRING","'hasBaseShippingAmount'",37],",",["T_WHITESPACE","\n                    ",37],["T_CONSTANT_ENCAPSED_STRING","'getBaseShippingAmount'",38],",",["T_WHITESPACE","\n                    ",38],["T_CONSTANT_ENCAPSED_STRING","'setShippingAmount'",39],",",["T_WHITESPACE","\n                    ",39],["T_CONSTANT_ENCAPSED_STRING","'setBaseShippingAmount'",40],",",["T_WHITESPACE","\n                    ",40],["T_CONSTANT_ENCAPSED_STRING","'setShippingInclTax'",41],",",["T_WHITESPACE","\n                    ",41],["T_CONSTANT_ENCAPSED_STRING","'setBaseShippingInclTax'",42],",",["T_WHITESPACE","\n                    ",42],["T_CONSTANT_ENCAPSED_STRING","'setGrandTotal'",43],",",["T_WHITESPACE","\n                    ",43],["T_CONSTANT_ENCAPSED_STRING","'setBaseGrandTotal'",44],",",["T_WHITESPACE","\n                    ",44],["T_CONSTANT_ENCAPSED_STRING","'getGrandTotal'",45],",",["T_WHITESPACE","\n                    ",45],["T_CONSTANT_ENCAPSED_STRING","'getBaseGrandTotal'",46],",",["T_WHITESPACE","\n                ",46],"]",["T_WHITESPACE","\n            ",47],")",["T_OBJECT_OPERATOR","->",48],["T_STRING","getMock",48],"(",")",";",["T_WHITESPACE","\n\n        ",48],["T_VARIABLE","$priceCurrencyMock",50],["T_WHITESPACE"," ",50],"=",["T_WHITESPACE"," ",50],["T_VARIABLE","$this",50],["T_OBJECT_OPERATOR","->",50],["T_STRING","getMock",50],"(",["T_NS_SEPARATOR","\\",50],["T_STRING","Magento",50],["T_NS_SEPARATOR","\\",50],["T_STRING","Framework",50],["T_NS_SEPARATOR","\\",50],["T_STRING","Pricing",50],["T_NS_SEPARATOR","\\",50],["T_STRING","PriceCurrencyInterface",50],["T_DOUBLE_COLON","::",50],["T_CLASS","class",50],")",";",["T_WHITESPACE","\n        ",50],["T_VARIABLE","$priceCurrencyMock",51],["T_OBJECT_OPERATOR","->",51],["T_STRING","expects",51],"(",["T_VARIABLE","$this",51],["T_OBJECT_OPERATOR","->",51],["T_STRING","any",51],"(",")",")",["T_WHITESPACE","\n            ",51],["T_OBJECT_OPERATOR","->",52],["T_STRING","method",52],"(",["T_CONSTANT_ENCAPSED_STRING","'round'",52],")",["T_WHITESPACE","\n            ",52],["T_OBJECT_OPERATOR","->",53],["T_STRING","willReturnCallback",53],"(",["T_WHITESPACE","\n                ",53],["T_FUNCTION","function",54],["T_WHITESPACE"," ",54],"(",["T_VARIABLE","$amount",54],")",["T_WHITESPACE"," ",54],"{",["T_WHITESPACE","\n                    ",54],["T_RETURN","return",55],["T_WHITESPACE"," ",55],["T_STRING","round",55],"(",["T_VARIABLE","$amount",55],",",["T_WHITESPACE"," ",55],["T_LNUMBER","2",55],")",";",["T_WHITESPACE","\n                ",55],"}",["T_WHITESPACE","\n            ",56],")",";",["T_WHITESPACE","\n\n        ",57],["T_VARIABLE","$this",59],["T_OBJECT_OPERATOR","->",59],["T_STRING","taxConfig",59],["T_WHITESPACE"," ",59],"=",["T_WHITESPACE"," ",59],["T_VARIABLE","$this",59],["T_OBJECT_OPERATOR","->",59],["T_STRING","getMock",59],"(",["T_NS_SEPARATOR","\\",59],["T_STRING","Magento",59],["T_NS_SEPARATOR","\\",59],["T_STRING","Tax",59],["T_NS_SEPARATOR","\\",59],["T_STRING","Model",59],["T_NS_SEPARATOR","\\",59],["T_STRING","Config",59],["T_DOUBLE_COLON","::",59],["T_CLASS","class",59],",",["T_WHITESPACE"," ",59],"[","]",",",["T_WHITESPACE"," ",59],"[","]",",",["T_WHITESPACE"," ",59],["T_CONSTANT_ENCAPSED_STRING","''",59],",",["T_WHITESPACE"," ",59],["T_STRING","false",59],")",";",["T_WHITESPACE","\n\n        ",59],["T_VARIABLE","$this",61],["T_OBJECT_OPERATOR","->",61],["T_STRING","shippingCollector",61],["T_WHITESPACE"," ",61],"=",["T_WHITESPACE"," ",61],["T_VARIABLE","$objectManager",61],["T_OBJECT_OPERATOR","->",61],["T_STRING","getObject",61],"(",["T_WHITESPACE","\r\n            ",61],["T_NS_SEPARATOR","\\",62],["T_STRING","Magento",62],["T_NS_SEPARATOR","\\",62],["T_STRING","Sales",62],["T_NS_SEPARATOR","\\",62],["T_STRING","Model",62],["T_NS_SEPARATOR","\\",62],["T_STRING","Order",62],["T_NS_SEPARATOR","\\",62],["T_STRING","Creditmemo",62],["T_NS_SEPARATOR","\\",62],["T_STRING","Total",62],["T_NS_SEPARATOR","\\",62],["T_STRING","Shipping",62],["T_DOUBLE_COLON","::",62],["T_CLASS","class",62],",",["T_WHITESPACE","\n            ",62],"[",["T_WHITESPACE","\n                ",63],["T_CONSTANT_ENCAPSED_STRING","'priceCurrency'",64],["T_WHITESPACE"," ",64],["T_DOUBLE_ARROW","=>",64],["T_WHITESPACE"," ",64],["T_VARIABLE","$priceCurrencyMock",64],",",["T_WHITESPACE","\n            ",64],"]",["T_WHITESPACE","\n        ",65],")",";",["T_WHITESPACE","\n\n        ",66],["T_COMMENT","\/\/ needed until 'taxConfig' becomes part of the constructor for shippingCollector\n",68],["T_WHITESPACE","        ",69],["T_VARIABLE","$reflection",69],["T_WHITESPACE"," ",69],"=",["T_WHITESPACE"," ",69],["T_NEW","new",69],["T_WHITESPACE"," ",69],["T_NS_SEPARATOR","\\",69],["T_STRING","ReflectionClass",69],"(",["T_STRING","get_class",69],"(",["T_VARIABLE","$this",69],["T_OBJECT_OPERATOR","->",69],["T_STRING","shippingCollector",69],")",")",";",["T_WHITESPACE","\n        ",69],["T_VARIABLE","$reflectionProperty",70],["T_WHITESPACE"," ",70],"=",["T_WHITESPACE"," ",70],["T_VARIABLE","$reflection",70],["T_OBJECT_OPERATOR","->",70],["T_STRING","getProperty",70],"(",["T_CONSTANT_ENCAPSED_STRING","'taxConfig'",70],")",";",["T_WHITESPACE","\n        ",70],["T_VARIABLE","$reflectionProperty",71],["T_OBJECT_OPERATOR","->",71],["T_STRING","setAccessible",71],"(",["T_STRING","true",71],")",";",["T_WHITESPACE","\n        ",71],["T_VARIABLE","$reflectionProperty",72],["T_OBJECT_OPERATOR","->",72],["T_STRING","setValue",72],"(",["T_VARIABLE","$this",72],["T_OBJECT_OPERATOR","->",72],["T_STRING","shippingCollector",72],",",["T_WHITESPACE"," ",72],["T_VARIABLE","$this",72],["T_OBJECT_OPERATOR","->",72],["T_STRING","taxConfig",72],")",";",["T_WHITESPACE","\n    ",72],"}",["T_WHITESPACE","\n\n    ",73],["T_DOC_COMMENT","\/**\n     * situation: The admin user specified a desired shipping refund that is greater than the amount allowed\n     *\n     * @expectedException \\Magento\\Framework\\Exception\\LocalizedException\n     * @expectedExceptionMessage Maximum shipping amount allowed to refund is: 5\n     *\/",75],["T_WHITESPACE","\n    ",80],["T_PUBLIC","public",81],["T_WHITESPACE"," ",81],["T_FUNCTION","function",81],["T_WHITESPACE"," ",81],["T_STRING","testCollectException",81],"(",")",["T_WHITESPACE","\n    ",81],"{",["T_WHITESPACE","\n        ",82],["T_VARIABLE","$orderShippingAmount",83],["T_WHITESPACE"," ",83],"=",["T_WHITESPACE"," ",83],["T_LNUMBER","10",83],";",["T_WHITESPACE","\n        ",83],["T_VARIABLE","$orderShippingRefunded",84],["T_WHITESPACE"," ",84],"=",["T_WHITESPACE"," ",84],["T_LNUMBER","5",84],";",["T_WHITESPACE","\n        ",84],["T_VARIABLE","$allowedShippingAmount",85],["T_WHITESPACE"," ",85],"=",["T_WHITESPACE"," ",85],["T_VARIABLE","$orderShippingAmount",85],["T_WHITESPACE"," ",85],"-",["T_WHITESPACE"," ",85],["T_VARIABLE","$orderShippingRefunded",85],";",["T_WHITESPACE","\n        ",85],["T_VARIABLE","$desiredRefundAmount",86],["T_WHITESPACE"," ",86],"=",["T_WHITESPACE"," ",86],["T_VARIABLE","$allowedShippingAmount",86],["T_WHITESPACE"," ",86],"+",["T_WHITESPACE"," ",86],["T_LNUMBER","1",86],";",["T_WHITESPACE"," ",86],["T_COMMENT","\/\/ force amount to be larger than what is allowed\n",86],["T_WHITESPACE","\n        ",87],["T_VARIABLE","$this",88],["T_OBJECT_OPERATOR","->",88],["T_STRING","taxConfig",88],["T_OBJECT_OPERATOR","->",88],["T_STRING","expects",88],"(",["T_VARIABLE","$this",88],["T_OBJECT_OPERATOR","->",88],["T_STRING","any",88],"(",")",")",["T_OBJECT_OPERATOR","->",88],["T_STRING","method",88],"(",["T_CONSTANT_ENCAPSED_STRING","'displaySalesShippingInclTax'",88],")",["T_OBJECT_OPERATOR","->",88],["T_STRING","willReturn",88],"(",["T_STRING","false",88],")",";",["T_WHITESPACE","\n\n        ",88],["T_VARIABLE","$currencyMock",90],["T_WHITESPACE"," ",90],"=",["T_WHITESPACE"," ",90],["T_VARIABLE","$this",90],["T_OBJECT_OPERATOR","->",90],["T_STRING","getMockBuilder",90],"(",["T_NS_SEPARATOR","\\",90],["T_STRING","Magento",90],["T_NS_SEPARATOR","\\",90],["T_STRING","Directory",90],["T_NS_SEPARATOR","\\",90],["T_STRING","Model",90],["T_NS_SEPARATOR","\\",90],["T_STRING","Currency",90],["T_DOUBLE_COLON","::",90],["T_CLASS","class",90],")",["T_WHITESPACE","\n            ",90],["T_OBJECT_OPERATOR","->",91],["T_STRING","disableOriginalConstructor",91],"(",")",["T_WHITESPACE","\n            ",91],["T_OBJECT_OPERATOR","->",92],["T_STRING","getMock",92],"(",")",";",["T_WHITESPACE","\n        ",92],["T_VARIABLE","$currencyMock",93],["T_OBJECT_OPERATOR","->",93],["T_STRING","expects",93],"(",["T_VARIABLE","$this",93],["T_OBJECT_OPERATOR","->",93],["T_STRING","once",93],"(",")",")",["T_WHITESPACE","\n            ",93],["T_OBJECT_OPERATOR","->",94],["T_STRING","method",94],"(",["T_CONSTANT_ENCAPSED_STRING","'format'",94],")",["T_WHITESPACE","\n            ",94],["T_OBJECT_OPERATOR","->",95],["T_STRING","with",95],"(",["T_VARIABLE","$allowedShippingAmount",95],",",["T_WHITESPACE"," ",95],["T_STRING","null",95],",",["T_WHITESPACE"," ",95],["T_STRING","false",95],")",["T_WHITESPACE","\n            ",95],["T_OBJECT_OPERATOR","->",96],["T_STRING","willReturn",96],"(",["T_VARIABLE","$allowedShippingAmount",96],")",";",["T_WHITESPACE","\n\n        ",96],["T_VARIABLE","$order",98],["T_WHITESPACE"," ",98],"=",["T_WHITESPACE"," ",98],["T_NEW","new",98],["T_WHITESPACE"," ",98],["T_NS_SEPARATOR","\\",98],["T_STRING","Magento",98],["T_NS_SEPARATOR","\\",98],["T_STRING","Framework",98],["T_NS_SEPARATOR","\\",98],["T_STRING","DataObject",98],"(",["T_WHITESPACE","\n            ",98],"[",["T_WHITESPACE","\n                ",99],["T_CONSTANT_ENCAPSED_STRING","'base_shipping_amount'",100],["T_WHITESPACE"," ",100],["T_DOUBLE_ARROW","=>",100],["T_WHITESPACE"," ",100],["T_VARIABLE","$orderShippingAmount",100],",",["T_WHITESPACE","\n                ",100],["T_CONSTANT_ENCAPSED_STRING","'base_shipping_refunded'",101],["T_WHITESPACE"," ",101],["T_DOUBLE_ARROW","=>",101],["T_WHITESPACE"," ",101],["T_VARIABLE","$orderShippingRefunded",101],",",["T_WHITESPACE","\n                ",101],["T_CONSTANT_ENCAPSED_STRING","'base_currency'",102],["T_WHITESPACE"," ",102],["T_DOUBLE_ARROW","=>",102],["T_WHITESPACE"," ",102],["T_VARIABLE","$currencyMock",102],",",["T_WHITESPACE","\n            ",102],"]",["T_WHITESPACE","\n        ",103],")",";",["T_WHITESPACE","\n\n        ",104],["T_VARIABLE","$this",106],["T_OBJECT_OPERATOR","->",106],["T_STRING","creditmemoMock",106],["T_OBJECT_OPERATOR","->",106],["T_STRING","expects",106],"(",["T_VARIABLE","$this",106],["T_OBJECT_OPERATOR","->",106],["T_STRING","once",106],"(",")",")",["T_WHITESPACE","\n            ",106],["T_OBJECT_OPERATOR","->",107],["T_STRING","method",107],"(",["T_CONSTANT_ENCAPSED_STRING","'getOrder'",107],")",["T_WHITESPACE","\n            ",107],["T_OBJECT_OPERATOR","->",108],["T_STRING","willReturn",108],"(",["T_VARIABLE","$order",108],")",";",["T_WHITESPACE","\n        ",108],["T_VARIABLE","$this",109],["T_OBJECT_OPERATOR","->",109],["T_STRING","creditmemoMock",109],["T_OBJECT_OPERATOR","->",109],["T_STRING","expects",109],"(",["T_VARIABLE","$this",109],["T_OBJECT_OPERATOR","->",109],["T_STRING","once",109],"(",")",")",["T_WHITESPACE","\n            ",109],["T_OBJECT_OPERATOR","->",110],["T_STRING","method",110],"(",["T_CONSTANT_ENCAPSED_STRING","'hasBaseShippingAmount'",110],")",["T_WHITESPACE","\n            ",110],["T_OBJECT_OPERATOR","->",111],["T_STRING","willReturn",111],"(",["T_STRING","true",111],")",";",["T_WHITESPACE","\n        ",111],["T_VARIABLE","$this",112],["T_OBJECT_OPERATOR","->",112],["T_STRING","creditmemoMock",112],["T_OBJECT_OPERATOR","->",112],["T_STRING","expects",112],"(",["T_VARIABLE","$this",112],["T_OBJECT_OPERATOR","->",112],["T_STRING","once",112],"(",")",")",["T_WHITESPACE","\n            ",112],["T_OBJECT_OPERATOR","->",113],["T_STRING","method",113],"(",["T_CONSTANT_ENCAPSED_STRING","'getBaseShippingAmount'",113],")",["T_WHITESPACE","\n            ",113],["T_OBJECT_OPERATOR","->",114],["T_STRING","willReturn",114],"(",["T_VARIABLE","$desiredRefundAmount",114],")",";",["T_WHITESPACE","\n\n        ",114],["T_COMMENT","\/\/expect to have an exception thrown\n",116],["T_WHITESPACE","        ",117],["T_VARIABLE","$this",117],["T_OBJECT_OPERATOR","->",117],["T_STRING","shippingCollector",117],["T_OBJECT_OPERATOR","->",117],["T_STRING","collect",117],"(",["T_VARIABLE","$this",117],["T_OBJECT_OPERATOR","->",117],["T_STRING","creditmemoMock",117],")",";",["T_WHITESPACE","\n    ",117],"}",["T_WHITESPACE","\n\n    ",118],["T_DOC_COMMENT","\/**\n     * situation: The admin user did *not* specify any desired refund amount\n     *\n     * @throws \\Magento\\Framework\\Exception\\LocalizedException\n     *\/",120],["T_WHITESPACE","\n    ",124],["T_PUBLIC","public",125],["T_WHITESPACE"," ",125],["T_FUNCTION","function",125],["T_WHITESPACE"," ",125],["T_STRING","testCollectNoSpecifiedShippingAmount",125],"(",")",["T_WHITESPACE","\n    ",125],"{",["T_WHITESPACE","\n        ",126],["T_VARIABLE","$orderShippingAmount",127],["T_WHITESPACE"," ",127],"=",["T_WHITESPACE"," ",127],["T_LNUMBER","10",127],";",["T_WHITESPACE","\n        ",127],["T_VARIABLE","$orderShippingRefunded",128],["T_WHITESPACE"," ",128],"=",["T_WHITESPACE"," ",128],["T_LNUMBER","5",128],";",["T_WHITESPACE","\n        ",128],["T_VARIABLE","$allowedShippingAmount",129],["T_WHITESPACE"," ",129],"=",["T_WHITESPACE"," ",129],["T_VARIABLE","$orderShippingAmount",129],["T_WHITESPACE"," ",129],"-",["T_WHITESPACE"," ",129],["T_VARIABLE","$orderShippingRefunded",129],";",["T_WHITESPACE","\n        ",129],["T_VARIABLE","$baseOrderShippingAmount",130],["T_WHITESPACE"," ",130],"=",["T_WHITESPACE"," ",130],["T_LNUMBER","20",130],";",["T_WHITESPACE","\n        ",130],["T_VARIABLE","$baseOrderShippingRefunded",131],["T_WHITESPACE"," ",131],"=",["T_WHITESPACE"," ",131],["T_LNUMBER","10",131],";",["T_WHITESPACE","\n        ",131],["T_VARIABLE","$baseAllowedShippingAmount",132],["T_WHITESPACE"," ",132],"=",["T_WHITESPACE"," ",132],["T_VARIABLE","$baseOrderShippingAmount",132],["T_WHITESPACE"," ",132],"-",["T_WHITESPACE"," ",132],["T_VARIABLE","$baseOrderShippingRefunded",132],";",["T_WHITESPACE","\n        ",132],["T_VARIABLE","$shippingTaxAmount",133],["T_WHITESPACE"," ",133],"=",["T_WHITESPACE"," ",133],["T_LNUMBER","2",133],";",["T_WHITESPACE","\n        ",133],["T_VARIABLE","$shippingTaxAmountRefunded",134],["T_WHITESPACE"," ",134],"=",["T_WHITESPACE"," ",134],["T_LNUMBER","1",134],";",["T_WHITESPACE","\n        ",134],["T_VARIABLE","$baseShippingTaxAmount",135],["T_WHITESPACE"," ",135],"=",["T_WHITESPACE"," ",135],["T_LNUMBER","4",135],";",["T_WHITESPACE","\n        ",135],["T_VARIABLE","$baseShippingTaxAmountRefunded",136],["T_WHITESPACE"," ",136],"=",["T_WHITESPACE"," ",136],["T_LNUMBER","2",136],";",["T_WHITESPACE","\n\n        ",136],["T_VARIABLE","$expectedShippingAmountInclTax",138],["T_WHITESPACE"," ",138],"=",["T_WHITESPACE"," ",138],["T_VARIABLE","$allowedShippingAmount",138],["T_WHITESPACE"," ",138],"+",["T_WHITESPACE"," ",138],["T_VARIABLE","$shippingTaxAmount",138],["T_WHITESPACE"," ",138],"-",["T_WHITESPACE"," ",138],["T_VARIABLE","$shippingTaxAmountRefunded",138],";",["T_WHITESPACE","\n        ",138],["T_VARIABLE","$expectedBaseShippingAmountInclTax",139],["T_WHITESPACE"," ",139],"=",["T_WHITESPACE","\n            ",139],["T_VARIABLE","$baseAllowedShippingAmount",140],["T_WHITESPACE"," ",140],"+",["T_WHITESPACE"," ",140],["T_VARIABLE","$baseShippingTaxAmount",140],["T_WHITESPACE"," ",140],"-",["T_WHITESPACE"," ",140],["T_VARIABLE","$baseShippingTaxAmountRefunded",140],";",["T_WHITESPACE","\n        ",140],["T_VARIABLE","$grandTotalBefore",141],["T_WHITESPACE"," ",141],"=",["T_WHITESPACE"," ",141],["T_LNUMBER","100",141],";",["T_WHITESPACE","\n        ",141],["T_VARIABLE","$baseGrandTotalBefore",142],["T_WHITESPACE"," ",142],"=",["T_WHITESPACE"," ",142],["T_LNUMBER","200",142],";",["T_WHITESPACE","\n        ",142],["T_VARIABLE","$expectedGrandTotal",143],["T_WHITESPACE"," ",143],"=",["T_WHITESPACE"," ",143],["T_VARIABLE","$grandTotalBefore",143],["T_WHITESPACE"," ",143],"+",["T_WHITESPACE"," ",143],["T_VARIABLE","$allowedShippingAmount",143],";",["T_WHITESPACE","\n        ",143],["T_VARIABLE","$expectedBaseGrandTtoal",144],["T_WHITESPACE"," ",144],"=",["T_WHITESPACE"," ",144],["T_VARIABLE","$baseGrandTotalBefore",144],["T_WHITESPACE"," ",144],"+",["T_WHITESPACE"," ",144],["T_VARIABLE","$baseAllowedShippingAmount",144],";",["T_WHITESPACE","\n\n        ",144],["T_VARIABLE","$this",146],["T_OBJECT_OPERATOR","->",146],["T_STRING","taxConfig",146],["T_OBJECT_OPERATOR","->",146],["T_STRING","expects",146],"(",["T_VARIABLE","$this",146],["T_OBJECT_OPERATOR","->",146],["T_STRING","any",146],"(",")",")",["T_OBJECT_OPERATOR","->",146],["T_STRING","method",146],"(",["T_CONSTANT_ENCAPSED_STRING","'displaySalesShippingInclTax'",146],")",["T_OBJECT_OPERATOR","->",146],["T_STRING","willReturn",146],"(",["T_STRING","false",146],")",";",["T_WHITESPACE","\n\n        ",146],["T_VARIABLE","$order",148],["T_WHITESPACE"," ",148],"=",["T_WHITESPACE"," ",148],["T_NEW","new",148],["T_WHITESPACE"," ",148],["T_NS_SEPARATOR","\\",148],["T_STRING","Magento",148],["T_NS_SEPARATOR","\\",148],["T_STRING","Framework",148],["T_NS_SEPARATOR","\\",148],["T_STRING","DataObject",148],"(",["T_WHITESPACE","\n            ",148],"[",["T_WHITESPACE","\n                ",149],["T_CONSTANT_ENCAPSED_STRING","'shipping_amount'",150],["T_WHITESPACE"," ",150],["T_DOUBLE_ARROW","=>",150],["T_WHITESPACE"," ",150],["T_VARIABLE","$orderShippingAmount",150],",",["T_WHITESPACE","\n                ",150],["T_CONSTANT_ENCAPSED_STRING","'shipping_refunded'",151],["T_WHITESPACE"," ",151],["T_DOUBLE_ARROW","=>",151],["T_WHITESPACE"," ",151],["T_VARIABLE","$orderShippingRefunded",151],",",["T_WHITESPACE","\n                ",151],["T_CONSTANT_ENCAPSED_STRING","'base_shipping_amount'",152],["T_WHITESPACE"," ",152],["T_DOUBLE_ARROW","=>",152],["T_WHITESPACE"," ",152],["T_VARIABLE","$baseOrderShippingAmount",152],",",["T_WHITESPACE","\n                ",152],["T_CONSTANT_ENCAPSED_STRING","'base_shipping_refunded'",153],["T_WHITESPACE"," ",153],["T_DOUBLE_ARROW","=>",153],["T_WHITESPACE"," ",153],["T_VARIABLE","$baseOrderShippingRefunded",153],",",["T_WHITESPACE","\n                ",153],["T_CONSTANT_ENCAPSED_STRING","'shipping_incl_tax'",154],["T_WHITESPACE"," ",154],["T_DOUBLE_ARROW","=>",154],["T_WHITESPACE"," ",154],["T_VARIABLE","$orderShippingAmount",154],["T_WHITESPACE"," ",154],"+",["T_WHITESPACE"," ",154],["T_VARIABLE","$shippingTaxAmount",154],",",["T_WHITESPACE","\n                ",154],["T_CONSTANT_ENCAPSED_STRING","'base_shipping_incl_tax'",155],["T_WHITESPACE"," ",155],["T_DOUBLE_ARROW","=>",155],["T_WHITESPACE"," ",155],["T_VARIABLE","$baseOrderShippingAmount",155],["T_WHITESPACE"," ",155],"+",["T_WHITESPACE"," ",155],["T_VARIABLE","$baseShippingTaxAmount",155],",",["T_WHITESPACE","\n                ",155],["T_CONSTANT_ENCAPSED_STRING","'shipping_tax_amount'",156],["T_WHITESPACE"," ",156],["T_DOUBLE_ARROW","=>",156],["T_WHITESPACE"," ",156],["T_VARIABLE","$shippingTaxAmount",156],",",["T_WHITESPACE","\n                ",156],["T_CONSTANT_ENCAPSED_STRING","'shipping_tax_refunded'",157],["T_WHITESPACE"," ",157],["T_DOUBLE_ARROW","=>",157],["T_WHITESPACE"," ",157],["T_VARIABLE","$shippingTaxAmountRefunded",157],",",["T_WHITESPACE","\n                ",157],["T_CONSTANT_ENCAPSED_STRING","'base_shipping_tax_amount'",158],["T_WHITESPACE"," ",158],["T_DOUBLE_ARROW","=>",158],["T_WHITESPACE"," ",158],["T_VARIABLE","$baseShippingTaxAmount",158],",",["T_WHITESPACE","\n                ",158],["T_CONSTANT_ENCAPSED_STRING","'base_shipping_tax_refunded'",159],["T_WHITESPACE"," ",159],["T_DOUBLE_ARROW","=>",159],["T_WHITESPACE"," ",159],["T_VARIABLE","$baseShippingTaxAmountRefunded",159],",",["T_WHITESPACE","\n            ",159],"]",["T_WHITESPACE","\n        ",160],")",";",["T_WHITESPACE","\n\n        ",161],["T_VARIABLE","$this",163],["T_OBJECT_OPERATOR","->",163],["T_STRING","creditmemoMock",163],["T_OBJECT_OPERATOR","->",163],["T_STRING","expects",163],"(",["T_VARIABLE","$this",163],["T_OBJECT_OPERATOR","->",163],["T_STRING","once",163],"(",")",")",["T_WHITESPACE","\n            ",163],["T_OBJECT_OPERATOR","->",164],["T_STRING","method",164],"(",["T_CONSTANT_ENCAPSED_STRING","'getOrder'",164],")",["T_WHITESPACE","\n            ",164],["T_OBJECT_OPERATOR","->",165],["T_STRING","willReturn",165],"(",["T_VARIABLE","$order",165],")",";",["T_WHITESPACE","\n        ",165],["T_VARIABLE","$this",166],["T_OBJECT_OPERATOR","->",166],["T_STRING","creditmemoMock",166],["T_OBJECT_OPERATOR","->",166],["T_STRING","expects",166],"(",["T_VARIABLE","$this",166],["T_OBJECT_OPERATOR","->",166],["T_STRING","once",166],"(",")",")",["T_WHITESPACE","\n            ",166],["T_OBJECT_OPERATOR","->",167],["T_STRING","method",167],"(",["T_CONSTANT_ENCAPSED_STRING","'hasBaseShippingAmount'",167],")",["T_WHITESPACE","\n            ",167],["T_OBJECT_OPERATOR","->",168],["T_STRING","willReturn",168],"(",["T_STRING","false",168],")",";",["T_WHITESPACE","\n        ",168],["T_VARIABLE","$this",169],["T_OBJECT_OPERATOR","->",169],["T_STRING","creditmemoMock",169],["T_OBJECT_OPERATOR","->",169],["T_STRING","expects",169],"(",["T_VARIABLE","$this",169],["T_OBJECT_OPERATOR","->",169],["T_STRING","once",169],"(",")",")",["T_WHITESPACE","\n            ",169],["T_OBJECT_OPERATOR","->",170],["T_STRING","method",170],"(",["T_CONSTANT_ENCAPSED_STRING","'getGrandTotal'",170],")",["T_WHITESPACE","\n            ",170],["T_OBJECT_OPERATOR","->",171],["T_STRING","willReturn",171],"(",["T_VARIABLE","$grandTotalBefore",171],")",";",["T_WHITESPACE","\n        ",171],["T_VARIABLE","$this",172],["T_OBJECT_OPERATOR","->",172],["T_STRING","creditmemoMock",172],["T_OBJECT_OPERATOR","->",172],["T_STRING","expects",172],"(",["T_VARIABLE","$this",172],["T_OBJECT_OPERATOR","->",172],["T_STRING","once",172],"(",")",")",["T_WHITESPACE","\n            ",172],["T_OBJECT_OPERATOR","->",173],["T_STRING","method",173],"(",["T_CONSTANT_ENCAPSED_STRING","'getBaseGrandTotal'",173],")",["T_WHITESPACE","\n            ",173],["T_OBJECT_OPERATOR","->",174],["T_STRING","willReturn",174],"(",["T_VARIABLE","$baseGrandTotalBefore",174],")",";",["T_WHITESPACE","\n\n        ",174],["T_COMMENT","\/\/verify\n",176],["T_WHITESPACE","        ",177],["T_VARIABLE","$this",177],["T_OBJECT_OPERATOR","->",177],["T_STRING","creditmemoMock",177],["T_OBJECT_OPERATOR","->",177],["T_STRING","expects",177],"(",["T_VARIABLE","$this",177],["T_OBJECT_OPERATOR","->",177],["T_STRING","once",177],"(",")",")",["T_WHITESPACE","\n            ",177],["T_OBJECT_OPERATOR","->",178],["T_STRING","method",178],"(",["T_CONSTANT_ENCAPSED_STRING","'setShippingAmount'",178],")",["T_WHITESPACE","\n            ",178],["T_OBJECT_OPERATOR","->",179],["T_STRING","with",179],"(",["T_VARIABLE","$allowedShippingAmount",179],")",["T_WHITESPACE","\n            ",179],["T_OBJECT_OPERATOR","->",180],["T_STRING","willReturnSelf",180],"(",")",";",["T_WHITESPACE","\n        ",180],["T_VARIABLE","$this",181],["T_OBJECT_OPERATOR","->",181],["T_STRING","creditmemoMock",181],["T_OBJECT_OPERATOR","->",181],["T_STRING","expects",181],"(",["T_VARIABLE","$this",181],["T_OBJECT_OPERATOR","->",181],["T_STRING","once",181],"(",")",")",["T_WHITESPACE","\n            ",181],["T_OBJECT_OPERATOR","->",182],["T_STRING","method",182],"(",["T_CONSTANT_ENCAPSED_STRING","'setBaseShippingAmount'",182],")",["T_WHITESPACE","\n            ",182],["T_OBJECT_OPERATOR","->",183],["T_STRING","with",183],"(",["T_VARIABLE","$baseAllowedShippingAmount",183],")",["T_WHITESPACE","\n            ",183],["T_OBJECT_OPERATOR","->",184],["T_STRING","willReturnSelf",184],"(",")",";",["T_WHITESPACE","\n        ",184],["T_VARIABLE","$this",185],["T_OBJECT_OPERATOR","->",185],["T_STRING","creditmemoMock",185],["T_OBJECT_OPERATOR","->",185],["T_STRING","expects",185],"(",["T_VARIABLE","$this",185],["T_OBJECT_OPERATOR","->",185],["T_STRING","once",185],"(",")",")",["T_WHITESPACE","\n            ",185],["T_OBJECT_OPERATOR","->",186],["T_STRING","method",186],"(",["T_CONSTANT_ENCAPSED_STRING","'setShippingInclTax'",186],")",["T_WHITESPACE","\n            ",186],["T_OBJECT_OPERATOR","->",187],["T_STRING","with",187],"(",["T_VARIABLE","$expectedShippingAmountInclTax",187],")",["T_WHITESPACE","\n            ",187],["T_OBJECT_OPERATOR","->",188],["T_STRING","willReturnSelf",188],"(",")",";",["T_WHITESPACE","\n        ",188],["T_VARIABLE","$this",189],["T_OBJECT_OPERATOR","->",189],["T_STRING","creditmemoMock",189],["T_OBJECT_OPERATOR","->",189],["T_STRING","expects",189],"(",["T_VARIABLE","$this",189],["T_OBJECT_OPERATOR","->",189],["T_STRING","once",189],"(",")",")",["T_WHITESPACE","\n            ",189],["T_OBJECT_OPERATOR","->",190],["T_STRING","method",190],"(",["T_CONSTANT_ENCAPSED_STRING","'setBaseShippingInclTax'",190],")",["T_WHITESPACE","\n            ",190],["T_OBJECT_OPERATOR","->",191],["T_STRING","with",191],"(",["T_VARIABLE","$expectedBaseShippingAmountInclTax",191],")",["T_WHITESPACE","\n            ",191],["T_OBJECT_OPERATOR","->",192],["T_STRING","willReturnSelf",192],"(",")",";",["T_WHITESPACE","\n        ",192],["T_VARIABLE","$this",193],["T_OBJECT_OPERATOR","->",193],["T_STRING","creditmemoMock",193],["T_OBJECT_OPERATOR","->",193],["T_STRING","expects",193],"(",["T_VARIABLE","$this",193],["T_OBJECT_OPERATOR","->",193],["T_STRING","once",193],"(",")",")",["T_WHITESPACE","\n            ",193],["T_OBJECT_OPERATOR","->",194],["T_STRING","method",194],"(",["T_CONSTANT_ENCAPSED_STRING","'setGrandTotal'",194],")",["T_WHITESPACE","\n            ",194],["T_OBJECT_OPERATOR","->",195],["T_STRING","with",195],"(",["T_VARIABLE","$expectedGrandTotal",195],")",["T_WHITESPACE","\n            ",195],["T_OBJECT_OPERATOR","->",196],["T_STRING","willReturnSelf",196],"(",")",";",["T_WHITESPACE","\n        ",196],["T_VARIABLE","$this",197],["T_OBJECT_OPERATOR","->",197],["T_STRING","creditmemoMock",197],["T_OBJECT_OPERATOR","->",197],["T_STRING","expects",197],"(",["T_VARIABLE","$this",197],["T_OBJECT_OPERATOR","->",197],["T_STRING","once",197],"(",")",")",["T_WHITESPACE","\n            ",197],["T_OBJECT_OPERATOR","->",198],["T_STRING","method",198],"(",["T_CONSTANT_ENCAPSED_STRING","'setBaseGrandTotal'",198],")",["T_WHITESPACE","\n            ",198],["T_OBJECT_OPERATOR","->",199],["T_STRING","with",199],"(",["T_VARIABLE","$expectedBaseGrandTtoal",199],")",["T_WHITESPACE","\n            ",199],["T_OBJECT_OPERATOR","->",200],["T_STRING","willReturnSelf",200],"(",")",";",["T_WHITESPACE","\n\n        ",200],["T_VARIABLE","$this",202],["T_OBJECT_OPERATOR","->",202],["T_STRING","shippingCollector",202],["T_OBJECT_OPERATOR","->",202],["T_STRING","collect",202],"(",["T_VARIABLE","$this",202],["T_OBJECT_OPERATOR","->",202],["T_STRING","creditmemoMock",202],")",";",["T_WHITESPACE","\n    ",202],"}",["T_WHITESPACE","\n\n    ",203],["T_DOC_COMMENT","\/**\n     * @param float $ratio\n     * @dataProvider collectWithSpecifiedShippingAmountDataProvider\n     *\/",205],["T_WHITESPACE","\n    ",208],["T_PUBLIC","public",209],["T_WHITESPACE"," ",209],["T_FUNCTION","function",209],["T_WHITESPACE"," ",209],["T_STRING","testCollectWithSpecifiedShippingAmount",209],"(",["T_VARIABLE","$ratio",209],")",["T_WHITESPACE","\n    ",209],"{",["T_WHITESPACE","\n        ",210],["T_VARIABLE","$orderShippingAmount",211],["T_WHITESPACE"," ",211],"=",["T_WHITESPACE"," ",211],["T_LNUMBER","10",211],";",["T_WHITESPACE","\n        ",211],["T_VARIABLE","$orderShippingAmountRefunded",212],["T_WHITESPACE"," ",212],"=",["T_WHITESPACE"," ",212],["T_LNUMBER","5",212],";",["T_WHITESPACE","\n        ",212],["T_VARIABLE","$baseOrderShippingAmount",213],["T_WHITESPACE"," ",213],"=",["T_WHITESPACE"," ",213],["T_LNUMBER","20",213],";",["T_WHITESPACE","\n        ",213],["T_VARIABLE","$baseOrderShippingAmountRefunded",214],["T_WHITESPACE"," ",214],"=",["T_WHITESPACE"," ",214],["T_LNUMBER","10",214],";",["T_WHITESPACE","\n        ",214],["T_VARIABLE","$shippingTaxAmount",215],["T_WHITESPACE"," ",215],"=",["T_WHITESPACE"," ",215],["T_LNUMBER","2",215],";",["T_WHITESPACE","\n        ",215],["T_VARIABLE","$baseShippingTaxAmount",216],["T_WHITESPACE"," ",216],"=",["T_WHITESPACE"," ",216],["T_LNUMBER","4",216],";",["T_WHITESPACE","\n        ",216],["T_VARIABLE","$orderShippingInclTax",217],["T_WHITESPACE"," ",217],"=",["T_WHITESPACE"," ",217],["T_VARIABLE","$orderShippingAmount",217],["T_WHITESPACE"," ",217],"+",["T_WHITESPACE"," ",217],["T_VARIABLE","$shippingTaxAmount",217],";",["T_WHITESPACE","\n        ",217],["T_VARIABLE","$baseOrderShippingInclTax",218],["T_WHITESPACE"," ",218],"=",["T_WHITESPACE"," ",218],["T_VARIABLE","$baseOrderShippingAmount",218],["T_WHITESPACE"," ",218],"+",["T_WHITESPACE"," ",218],["T_VARIABLE","$baseShippingTaxAmount",218],";",["T_WHITESPACE","\n\n        ",218],["T_COMMENT","\/\/determine expected partial refund amounts\n",220],["T_WHITESPACE","        ",221],["T_VARIABLE","$desiredRefundAmount",221],["T_WHITESPACE"," ",221],"=",["T_WHITESPACE"," ",221],["T_VARIABLE","$baseOrderShippingAmount",221],["T_WHITESPACE"," ",221],"*",["T_WHITESPACE"," ",221],["T_VARIABLE","$ratio",221],";",["T_WHITESPACE","\n\n        ",221],["T_VARIABLE","$expectedShippingAmount",223],["T_WHITESPACE"," ",223],"=",["T_WHITESPACE"," ",223],["T_VARIABLE","$orderShippingAmount",223],["T_WHITESPACE"," ",223],"*",["T_WHITESPACE"," ",223],["T_VARIABLE","$ratio",223],";",["T_WHITESPACE","\n        ",223],["T_VARIABLE","$expectedShippingAmountInclTax",224],["T_WHITESPACE"," ",224],"=",["T_WHITESPACE"," ",224],["T_VARIABLE","$orderShippingInclTax",224],["T_WHITESPACE"," ",224],"*",["T_WHITESPACE"," ",224],["T_VARIABLE","$ratio",224],";",["T_WHITESPACE","\n        ",224],["T_VARIABLE","$expectedBaseShippingAmount",225],["T_WHITESPACE"," ",225],"=",["T_WHITESPACE"," ",225],["T_VARIABLE","$baseOrderShippingAmount",225],["T_WHITESPACE"," ",225],"*",["T_WHITESPACE"," ",225],["T_VARIABLE","$ratio",225],";",["T_WHITESPACE","\n        ",225],["T_VARIABLE","$expectedBaseShippingAmountInclTax",226],["T_WHITESPACE"," ",226],"=",["T_WHITESPACE"," ",226],["T_VARIABLE","$baseOrderShippingInclTax",226],["T_WHITESPACE"," ",226],"*",["T_WHITESPACE"," ",226],["T_VARIABLE","$ratio",226],";",["T_WHITESPACE","\n\n        ",226],["T_VARIABLE","$grandTotalBefore",228],["T_WHITESPACE"," ",228],"=",["T_WHITESPACE"," ",228],["T_LNUMBER","100",228],";",["T_WHITESPACE","\n        ",228],["T_VARIABLE","$baseGrandTotalBefore",229],["T_WHITESPACE"," ",229],"=",["T_WHITESPACE"," ",229],["T_LNUMBER","200",229],";",["T_WHITESPACE","\n        ",229],["T_VARIABLE","$expectedGrandTotal",230],["T_WHITESPACE"," ",230],"=",["T_WHITESPACE"," ",230],["T_VARIABLE","$grandTotalBefore",230],["T_WHITESPACE"," ",230],"+",["T_WHITESPACE"," ",230],["T_VARIABLE","$expectedShippingAmount",230],";",["T_WHITESPACE","\n        ",230],["T_VARIABLE","$expectedBaseGrandTtoal",231],["T_WHITESPACE"," ",231],"=",["T_WHITESPACE"," ",231],["T_VARIABLE","$baseGrandTotalBefore",231],["T_WHITESPACE"," ",231],"+",["T_WHITESPACE"," ",231],["T_VARIABLE","$expectedBaseShippingAmount",231],";",["T_WHITESPACE","\n\n        ",231],["T_VARIABLE","$this",233],["T_OBJECT_OPERATOR","->",233],["T_STRING","taxConfig",233],["T_OBJECT_OPERATOR","->",233],["T_STRING","expects",233],"(",["T_VARIABLE","$this",233],["T_OBJECT_OPERATOR","->",233],["T_STRING","any",233],"(",")",")",["T_OBJECT_OPERATOR","->",233],["T_STRING","method",233],"(",["T_CONSTANT_ENCAPSED_STRING","'displaySalesShippingInclTax'",233],")",["T_OBJECT_OPERATOR","->",233],["T_STRING","willReturn",233],"(",["T_STRING","false",233],")",";",["T_WHITESPACE","\n\n        ",233],["T_VARIABLE","$order",235],["T_WHITESPACE"," ",235],"=",["T_WHITESPACE"," ",235],["T_NEW","new",235],["T_WHITESPACE"," ",235],["T_NS_SEPARATOR","\\",235],["T_STRING","Magento",235],["T_NS_SEPARATOR","\\",235],["T_STRING","Framework",235],["T_NS_SEPARATOR","\\",235],["T_STRING","DataObject",235],"(",["T_WHITESPACE","\n            ",235],"[",["T_WHITESPACE","\n                ",236],["T_CONSTANT_ENCAPSED_STRING","'shipping_amount'",237],["T_WHITESPACE"," ",237],["T_DOUBLE_ARROW","=>",237],["T_WHITESPACE"," ",237],["T_VARIABLE","$orderShippingAmount",237],",",["T_WHITESPACE","\n                ",237],["T_CONSTANT_ENCAPSED_STRING","'shipping_refunded'",238],["T_WHITESPACE"," ",238],["T_DOUBLE_ARROW","=>",238],["T_WHITESPACE"," ",238],["T_VARIABLE","$orderShippingAmountRefunded",238],",",["T_WHITESPACE","\n                ",238],["T_CONSTANT_ENCAPSED_STRING","'base_shipping_amount'",239],["T_WHITESPACE"," ",239],["T_DOUBLE_ARROW","=>",239],["T_WHITESPACE"," ",239],["T_VARIABLE","$baseOrderShippingAmount",239],",",["T_WHITESPACE","\n                ",239],["T_CONSTANT_ENCAPSED_STRING","'base_shipping_refunded'",240],["T_WHITESPACE"," ",240],["T_DOUBLE_ARROW","=>",240],["T_WHITESPACE"," ",240],["T_VARIABLE","$baseOrderShippingAmountRefunded",240],",",["T_WHITESPACE","\n                ",240],["T_CONSTANT_ENCAPSED_STRING","'shipping_incl_tax'",241],["T_WHITESPACE"," ",241],["T_DOUBLE_ARROW","=>",241],["T_WHITESPACE"," ",241],["T_VARIABLE","$orderShippingInclTax",241],",",["T_WHITESPACE","\n                ",241],["T_CONSTANT_ENCAPSED_STRING","'base_shipping_incl_tax'",242],["T_WHITESPACE"," ",242],["T_DOUBLE_ARROW","=>",242],["T_WHITESPACE"," ",242],["T_VARIABLE","$baseOrderShippingInclTax",242],",",["T_WHITESPACE","\n            ",242],"]",["T_WHITESPACE","\n        ",243],")",";",["T_WHITESPACE","\n\n        ",244],["T_VARIABLE","$this",246],["T_OBJECT_OPERATOR","->",246],["T_STRING","creditmemoMock",246],["T_OBJECT_OPERATOR","->",246],["T_STRING","expects",246],"(",["T_VARIABLE","$this",246],["T_OBJECT_OPERATOR","->",246],["T_STRING","once",246],"(",")",")",["T_WHITESPACE","\n            ",246],["T_OBJECT_OPERATOR","->",247],["T_STRING","method",247],"(",["T_CONSTANT_ENCAPSED_STRING","'getOrder'",247],")",["T_WHITESPACE","\n            ",247],["T_OBJECT_OPERATOR","->",248],["T_STRING","willReturn",248],"(",["T_VARIABLE","$order",248],")",";",["T_WHITESPACE","\n        ",248],["T_VARIABLE","$this",249],["T_OBJECT_OPERATOR","->",249],["T_STRING","creditmemoMock",249],["T_OBJECT_OPERATOR","->",249],["T_STRING","expects",249],"(",["T_VARIABLE","$this",249],["T_OBJECT_OPERATOR","->",249],["T_STRING","once",249],"(",")",")",["T_WHITESPACE","\n            ",249],["T_OBJECT_OPERATOR","->",250],["T_STRING","method",250],"(",["T_CONSTANT_ENCAPSED_STRING","'hasBaseShippingAmount'",250],")",["T_WHITESPACE","\n            ",250],["T_OBJECT_OPERATOR","->",251],["T_STRING","willReturn",251],"(",["T_STRING","true",251],")",";",["T_WHITESPACE","\n        ",251],["T_VARIABLE","$this",252],["T_OBJECT_OPERATOR","->",252],["T_STRING","creditmemoMock",252],["T_OBJECT_OPERATOR","->",252],["T_STRING","expects",252],"(",["T_VARIABLE","$this",252],["T_OBJECT_OPERATOR","->",252],["T_STRING","once",252],"(",")",")",["T_WHITESPACE","\n            ",252],["T_OBJECT_OPERATOR","->",253],["T_STRING","method",253],"(",["T_CONSTANT_ENCAPSED_STRING","'getBaseShippingAmount'",253],")",["T_WHITESPACE","\n            ",253],["T_OBJECT_OPERATOR","->",254],["T_STRING","willReturn",254],"(",["T_VARIABLE","$desiredRefundAmount",254],")",";",["T_WHITESPACE","\n        ",254],["T_VARIABLE","$this",255],["T_OBJECT_OPERATOR","->",255],["T_STRING","creditmemoMock",255],["T_OBJECT_OPERATOR","->",255],["T_STRING","expects",255],"(",["T_VARIABLE","$this",255],["T_OBJECT_OPERATOR","->",255],["T_STRING","once",255],"(",")",")",["T_WHITESPACE","\n            ",255],["T_OBJECT_OPERATOR","->",256],["T_STRING","method",256],"(",["T_CONSTANT_ENCAPSED_STRING","'getGrandTotal'",256],")",["T_WHITESPACE","\n            ",256],["T_OBJECT_OPERATOR","->",257],["T_STRING","willReturn",257],"(",["T_VARIABLE","$grandTotalBefore",257],")",";",["T_WHITESPACE","\n        ",257],["T_VARIABLE","$this",258],["T_OBJECT_OPERATOR","->",258],["T_STRING","creditmemoMock",258],["T_OBJECT_OPERATOR","->",258],["T_STRING","expects",258],"(",["T_VARIABLE","$this",258],["T_OBJECT_OPERATOR","->",258],["T_STRING","once",258],"(",")",")",["T_WHITESPACE","\n            ",258],["T_OBJECT_OPERATOR","->",259],["T_STRING","method",259],"(",["T_CONSTANT_ENCAPSED_STRING","'getBaseGrandTotal'",259],")",["T_WHITESPACE","\n            ",259],["T_OBJECT_OPERATOR","->",260],["T_STRING","willReturn",260],"(",["T_VARIABLE","$baseGrandTotalBefore",260],")",";",["T_WHITESPACE","\n\n        ",260],["T_COMMENT","\/\/verify\n",262],["T_WHITESPACE","        ",263],["T_VARIABLE","$this",263],["T_OBJECT_OPERATOR","->",263],["T_STRING","creditmemoMock",263],["T_OBJECT_OPERATOR","->",263],["T_STRING","expects",263],"(",["T_VARIABLE","$this",263],["T_OBJECT_OPERATOR","->",263],["T_STRING","once",263],"(",")",")",["T_WHITESPACE","\n            ",263],["T_OBJECT_OPERATOR","->",264],["T_STRING","method",264],"(",["T_CONSTANT_ENCAPSED_STRING","'setShippingAmount'",264],")",["T_WHITESPACE","\n            ",264],["T_OBJECT_OPERATOR","->",265],["T_STRING","with",265],"(",["T_VARIABLE","$expectedShippingAmount",265],")",["T_WHITESPACE","\n            ",265],["T_OBJECT_OPERATOR","->",266],["T_STRING","willReturnSelf",266],"(",")",";",["T_WHITESPACE","\n        ",266],["T_VARIABLE","$this",267],["T_OBJECT_OPERATOR","->",267],["T_STRING","creditmemoMock",267],["T_OBJECT_OPERATOR","->",267],["T_STRING","expects",267],"(",["T_VARIABLE","$this",267],["T_OBJECT_OPERATOR","->",267],["T_STRING","once",267],"(",")",")",["T_WHITESPACE","\n            ",267],["T_OBJECT_OPERATOR","->",268],["T_STRING","method",268],"(",["T_CONSTANT_ENCAPSED_STRING","'setBaseShippingAmount'",268],")",["T_WHITESPACE","\n            ",268],["T_OBJECT_OPERATOR","->",269],["T_STRING","with",269],"(",["T_VARIABLE","$expectedBaseShippingAmount",269],")",["T_WHITESPACE","\n            ",269],["T_OBJECT_OPERATOR","->",270],["T_STRING","willReturnSelf",270],"(",")",";",["T_WHITESPACE","\n        ",270],["T_VARIABLE","$this",271],["T_OBJECT_OPERATOR","->",271],["T_STRING","creditmemoMock",271],["T_OBJECT_OPERATOR","->",271],["T_STRING","expects",271],"(",["T_VARIABLE","$this",271],["T_OBJECT_OPERATOR","->",271],["T_STRING","once",271],"(",")",")",["T_WHITESPACE","\n            ",271],["T_OBJECT_OPERATOR","->",272],["T_STRING","method",272],"(",["T_CONSTANT_ENCAPSED_STRING","'setShippingInclTax'",272],")",["T_WHITESPACE","\n            ",272],["T_OBJECT_OPERATOR","->",273],["T_STRING","with",273],"(",["T_VARIABLE","$expectedShippingAmountInclTax",273],")",["T_WHITESPACE","\n            ",273],["T_OBJECT_OPERATOR","->",274],["T_STRING","willReturnSelf",274],"(",")",";",["T_WHITESPACE","\n        ",274],["T_VARIABLE","$this",275],["T_OBJECT_OPERATOR","->",275],["T_STRING","creditmemoMock",275],["T_OBJECT_OPERATOR","->",275],["T_STRING","expects",275],"(",["T_VARIABLE","$this",275],["T_OBJECT_OPERATOR","->",275],["T_STRING","once",275],"(",")",")",["T_WHITESPACE","\n            ",275],["T_OBJECT_OPERATOR","->",276],["T_STRING","method",276],"(",["T_CONSTANT_ENCAPSED_STRING","'setBaseShippingInclTax'",276],")",["T_WHITESPACE","\n            ",276],["T_OBJECT_OPERATOR","->",277],["T_STRING","with",277],"(",["T_VARIABLE","$expectedBaseShippingAmountInclTax",277],")",["T_WHITESPACE","\n            ",277],["T_OBJECT_OPERATOR","->",278],["T_STRING","willReturnSelf",278],"(",")",";",["T_WHITESPACE","\n        ",278],["T_VARIABLE","$this",279],["T_OBJECT_OPERATOR","->",279],["T_STRING","creditmemoMock",279],["T_OBJECT_OPERATOR","->",279],["T_STRING","expects",279],"(",["T_VARIABLE","$this",279],["T_OBJECT_OPERATOR","->",279],["T_STRING","once",279],"(",")",")",["T_WHITESPACE","\n            ",279],["T_OBJECT_OPERATOR","->",280],["T_STRING","method",280],"(",["T_CONSTANT_ENCAPSED_STRING","'setGrandTotal'",280],")",["T_WHITESPACE","\n            ",280],["T_OBJECT_OPERATOR","->",281],["T_STRING","with",281],"(",["T_VARIABLE","$expectedGrandTotal",281],")",["T_WHITESPACE","\n            ",281],["T_OBJECT_OPERATOR","->",282],["T_STRING","willReturnSelf",282],"(",")",";",["T_WHITESPACE","\n        ",282],["T_VARIABLE","$this",283],["T_OBJECT_OPERATOR","->",283],["T_STRING","creditmemoMock",283],["T_OBJECT_OPERATOR","->",283],["T_STRING","expects",283],"(",["T_VARIABLE","$this",283],["T_OBJECT_OPERATOR","->",283],["T_STRING","once",283],"(",")",")",["T_WHITESPACE","\n            ",283],["T_OBJECT_OPERATOR","->",284],["T_STRING","method",284],"(",["T_CONSTANT_ENCAPSED_STRING","'setBaseGrandTotal'",284],")",["T_WHITESPACE","\n            ",284],["T_OBJECT_OPERATOR","->",285],["T_STRING","with",285],"(",["T_VARIABLE","$expectedBaseGrandTtoal",285],")",["T_WHITESPACE","\n            ",285],["T_OBJECT_OPERATOR","->",286],["T_STRING","willReturnSelf",286],"(",")",";",["T_WHITESPACE","\n\n        ",286],["T_VARIABLE","$this",288],["T_OBJECT_OPERATOR","->",288],["T_STRING","shippingCollector",288],["T_OBJECT_OPERATOR","->",288],["T_STRING","collect",288],"(",["T_VARIABLE","$this",288],["T_OBJECT_OPERATOR","->",288],["T_STRING","creditmemoMock",288],")",";",["T_WHITESPACE","\n    ",288],"}",["T_WHITESPACE","\n\n    ",289],["T_DOC_COMMENT","\/**\n     * @return array\n     *\/",291],["T_WHITESPACE","\n    ",293],["T_PUBLIC","public",294],["T_WHITESPACE"," ",294],["T_FUNCTION","function",294],["T_WHITESPACE"," ",294],["T_STRING","collectWithSpecifiedShippingAmountDataProvider",294],"(",")",["T_WHITESPACE","\n    ",294],"{",["T_WHITESPACE","\n        ",295],["T_RETURN","return",296],["T_WHITESPACE"," ",296],"[",["T_WHITESPACE","\n            ",296],["T_CONSTANT_ENCAPSED_STRING","'half'",297],["T_WHITESPACE"," ",297],["T_DOUBLE_ARROW","=>",297],["T_WHITESPACE"," ",297],"[",["T_DNUMBER","0.5",297],"]",",",["T_WHITESPACE"," ",297],["T_COMMENT","\/\/This will test the case where specified amount equals maximum allowed amount\n",297],["T_WHITESPACE","            ",298],["T_CONSTANT_ENCAPSED_STRING","'quarter'",298],["T_WHITESPACE"," ",298],["T_DOUBLE_ARROW","=>",298],["T_WHITESPACE"," ",298],"[",["T_DNUMBER","0.25",298],"]",",",["T_WHITESPACE","\n        ",298],"]",";",["T_WHITESPACE","\n    ",299],"}",["T_WHITESPACE","\n\n    ",300],["T_DOC_COMMENT","\/**\n     * situation: The admin user specified the desired refund amount that has taxes embedded within it\n     *\n     * @throws \\Magento\\Framework\\Exception\\LocalizedException\n     *\/",302],["T_WHITESPACE","\n    ",306],["T_PUBLIC","public",307],["T_WHITESPACE"," ",307],["T_FUNCTION","function",307],["T_WHITESPACE"," ",307],["T_STRING","testCollectUsingTaxInclShippingAmount",307],"(",")",["T_WHITESPACE","\n    ",307],"{",["T_WHITESPACE","\n        ",308],["T_VARIABLE","$this",309],["T_OBJECT_OPERATOR","->",309],["T_STRING","taxConfig",309],["T_OBJECT_OPERATOR","->",309],["T_STRING","expects",309],"(",["T_VARIABLE","$this",309],["T_OBJECT_OPERATOR","->",309],["T_STRING","any",309],"(",")",")",["T_OBJECT_OPERATOR","->",309],["T_STRING","method",309],"(",["T_CONSTANT_ENCAPSED_STRING","'displaySalesShippingInclTax'",309],")",["T_OBJECT_OPERATOR","->",309],["T_STRING","willReturn",309],"(",["T_STRING","true",309],")",";",["T_WHITESPACE","\n\n        ",309],["T_VARIABLE","$orderShippingAmount",311],["T_WHITESPACE"," ",311],"=",["T_WHITESPACE"," ",311],["T_LNUMBER","15",311],";",["T_WHITESPACE","\n        ",311],["T_VARIABLE","$shippingTaxAmount",312],["T_WHITESPACE"," ",312],"=",["T_WHITESPACE"," ",312],["T_LNUMBER","3",312],";",["T_WHITESPACE","\n        ",312],["T_VARIABLE","$orderShippingInclTax",313],["T_WHITESPACE"," ",313],"=",["T_WHITESPACE"," ",313],["T_VARIABLE","$orderShippingAmount",313],["T_WHITESPACE"," ",313],"+",["T_WHITESPACE"," ",313],["T_VARIABLE","$shippingTaxAmount",313],";",["T_WHITESPACE","\n        ",313],["T_VARIABLE","$orderShippingAmountRefunded",314],["T_WHITESPACE"," ",314],"=",["T_WHITESPACE"," ",314],["T_LNUMBER","5",314],";",["T_WHITESPACE","\n        ",314],["T_VARIABLE","$shippingTaxRefunded",315],["T_WHITESPACE"," ",315],"=",["T_WHITESPACE"," ",315],["T_LNUMBER","1",315],";",["T_WHITESPACE","\n        ",315],["T_VARIABLE","$refundedInclTax",316],["T_WHITESPACE"," ",316],"=",["T_WHITESPACE"," ",316],["T_VARIABLE","$orderShippingAmountRefunded",316],["T_WHITESPACE"," ",316],"+",["T_WHITESPACE"," ",316],["T_VARIABLE","$shippingTaxRefunded",316],";",["T_WHITESPACE","\n\n        ",316],["T_VARIABLE","$currencyMultiple",318],["T_WHITESPACE"," ",318],"=",["T_WHITESPACE"," ",318],["T_LNUMBER","2",318],";",["T_WHITESPACE","\n        ",318],["T_VARIABLE","$baseOrderShippingAmount",319],["T_WHITESPACE"," ",319],"=",["T_WHITESPACE"," ",319],["T_VARIABLE","$orderShippingAmount",319],["T_WHITESPACE"," ",319],"*",["T_WHITESPACE"," ",319],["T_VARIABLE","$currencyMultiple",319],";",["T_WHITESPACE","\n        ",319],["T_VARIABLE","$baseShippingTaxAmount",320],["T_WHITESPACE"," ",320],"=",["T_WHITESPACE"," ",320],["T_VARIABLE","$shippingTaxAmount",320],["T_WHITESPACE"," ",320],"*",["T_WHITESPACE"," ",320],["T_VARIABLE","$currencyMultiple",320],";",["T_WHITESPACE","\n        ",320],["T_VARIABLE","$baseOrderShippingInclTax",321],["T_WHITESPACE"," ",321],"=",["T_WHITESPACE"," ",321],["T_VARIABLE","$orderShippingInclTax",321],["T_WHITESPACE"," ",321],"*",["T_WHITESPACE"," ",321],["T_VARIABLE","$currencyMultiple",321],";",["T_WHITESPACE","\n        ",321],["T_VARIABLE","$baseOrderShippingAmountRefunded",322],["T_WHITESPACE"," ",322],"=",["T_WHITESPACE"," ",322],["T_VARIABLE","$orderShippingAmountRefunded",322],["T_WHITESPACE"," ",322],"*",["T_WHITESPACE"," ",322],["T_VARIABLE","$currencyMultiple",322],";",["T_WHITESPACE","\n        ",322],["T_VARIABLE","$baseShippingTaxRefunded",323],["T_WHITESPACE"," ",323],"=",["T_WHITESPACE"," ",323],["T_VARIABLE","$shippingTaxRefunded",323],["T_WHITESPACE"," ",323],"*",["T_WHITESPACE"," ",323],["T_VARIABLE","$currencyMultiple",323],";",["T_WHITESPACE","\n        ",323],["T_VARIABLE","$baseRefundedInclTax",324],["T_WHITESPACE"," ",324],"=",["T_WHITESPACE"," ",324],["T_VARIABLE","$refundedInclTax",324],["T_WHITESPACE"," ",324],"*",["T_WHITESPACE"," ",324],["T_VARIABLE","$currencyMultiple",324],";",["T_WHITESPACE","\n\n        ",324],["T_COMMENT","\/\/determine expected amounts\n",326],["T_WHITESPACE","        ",327],["T_VARIABLE","$desiredRefundAmount",327],["T_WHITESPACE"," ",327],"=",["T_WHITESPACE"," ",327],["T_VARIABLE","$baseOrderShippingInclTax",327],["T_WHITESPACE"," ",327],"-",["T_WHITESPACE"," ",327],["T_VARIABLE","$baseRefundedInclTax",327],";",["T_WHITESPACE","\n\n        ",327],["T_VARIABLE","$expectedShippingAmount",329],["T_WHITESPACE"," ",329],"=",["T_WHITESPACE"," ",329],["T_VARIABLE","$orderShippingAmount",329],["T_WHITESPACE"," ",329],"-",["T_WHITESPACE"," ",329],["T_VARIABLE","$orderShippingAmountRefunded",329],";",["T_WHITESPACE","\n        ",329],["T_VARIABLE","$expectedShippingAmountInclTax",330],["T_WHITESPACE"," ",330],"=",["T_WHITESPACE"," ",330],["T_VARIABLE","$orderShippingInclTax",330],["T_WHITESPACE"," ",330],"-",["T_WHITESPACE"," ",330],["T_VARIABLE","$refundedInclTax",330],";",["T_WHITESPACE","\n\n        ",330],["T_VARIABLE","$expectedBaseShippingAmount",332],["T_WHITESPACE"," ",332],"=",["T_WHITESPACE"," ",332],["T_VARIABLE","$expectedShippingAmount",332],["T_WHITESPACE"," ",332],"*",["T_WHITESPACE"," ",332],["T_VARIABLE","$currencyMultiple",332],";",["T_WHITESPACE","\n        ",332],["T_VARIABLE","$expectedBaseShippingAmountInclTax",333],["T_WHITESPACE"," ",333],"=",["T_WHITESPACE"," ",333],["T_VARIABLE","$expectedShippingAmountInclTax",333],["T_WHITESPACE"," ",333],"*",["T_WHITESPACE"," ",333],["T_VARIABLE","$currencyMultiple",333],";",["T_WHITESPACE","\n\n        ",333],["T_VARIABLE","$grandTotalBefore",335],["T_WHITESPACE"," ",335],"=",["T_WHITESPACE"," ",335],["T_LNUMBER","100",335],";",["T_WHITESPACE","\n        ",335],["T_VARIABLE","$baseGrandTotalBefore",336],["T_WHITESPACE"," ",336],"=",["T_WHITESPACE"," ",336],["T_LNUMBER","200",336],";",["T_WHITESPACE","\n        ",336],["T_VARIABLE","$expectedGrandTotal",337],["T_WHITESPACE"," ",337],"=",["T_WHITESPACE"," ",337],["T_VARIABLE","$grandTotalBefore",337],["T_WHITESPACE"," ",337],"+",["T_WHITESPACE"," ",337],["T_VARIABLE","$expectedShippingAmount",337],";",["T_WHITESPACE","\n        ",337],["T_VARIABLE","$expectedBaseGrandTtoal",338],["T_WHITESPACE"," ",338],"=",["T_WHITESPACE"," ",338],["T_VARIABLE","$baseGrandTotalBefore",338],["T_WHITESPACE"," ",338],"+",["T_WHITESPACE"," ",338],["T_VARIABLE","$expectedBaseShippingAmount",338],";",["T_WHITESPACE","\n\n        ",338],["T_VARIABLE","$order",340],["T_WHITESPACE"," ",340],"=",["T_WHITESPACE"," ",340],["T_NEW","new",340],["T_WHITESPACE"," ",340],["T_NS_SEPARATOR","\\",340],["T_STRING","Magento",340],["T_NS_SEPARATOR","\\",340],["T_STRING","Framework",340],["T_NS_SEPARATOR","\\",340],["T_STRING","DataObject",340],"(",["T_WHITESPACE","\n            ",340],"[",["T_WHITESPACE","\n                ",341],["T_CONSTANT_ENCAPSED_STRING","'shipping_amount'",342],["T_WHITESPACE"," ",342],["T_DOUBLE_ARROW","=>",342],["T_WHITESPACE"," ",342],["T_VARIABLE","$orderShippingAmount",342],",",["T_WHITESPACE","\n                ",342],["T_CONSTANT_ENCAPSED_STRING","'base_shipping_amount'",343],["T_WHITESPACE"," ",343],["T_DOUBLE_ARROW","=>",343],["T_WHITESPACE"," ",343],["T_VARIABLE","$baseOrderShippingAmount",343],",",["T_WHITESPACE","\n                ",343],["T_CONSTANT_ENCAPSED_STRING","'shipping_refunded'",344],["T_WHITESPACE"," ",344],["T_DOUBLE_ARROW","=>",344],["T_WHITESPACE"," ",344],["T_VARIABLE","$orderShippingAmountRefunded",344],",",["T_WHITESPACE","\n                ",344],["T_CONSTANT_ENCAPSED_STRING","'base_shipping_refunded'",345],["T_WHITESPACE"," ",345],["T_DOUBLE_ARROW","=>",345],["T_WHITESPACE"," ",345],["T_VARIABLE","$baseOrderShippingAmountRefunded",345],",",["T_WHITESPACE","\n                ",345],["T_CONSTANT_ENCAPSED_STRING","'shipping_incl_tax'",346],["T_WHITESPACE"," ",346],["T_DOUBLE_ARROW","=>",346],["T_WHITESPACE"," ",346],["T_VARIABLE","$orderShippingInclTax",346],",",["T_WHITESPACE","\n                ",346],["T_CONSTANT_ENCAPSED_STRING","'base_shipping_incl_tax'",347],["T_WHITESPACE"," ",347],["T_DOUBLE_ARROW","=>",347],["T_WHITESPACE"," ",347],["T_VARIABLE","$baseOrderShippingInclTax",347],",",["T_WHITESPACE","\n                ",347],["T_CONSTANT_ENCAPSED_STRING","'shipping_tax_amount'",348],["T_WHITESPACE"," ",348],["T_DOUBLE_ARROW","=>",348],["T_WHITESPACE"," ",348],["T_VARIABLE","$shippingTaxAmount",348],",",["T_WHITESPACE","\n                ",348],["T_CONSTANT_ENCAPSED_STRING","'shipping_tax_refunded'",349],["T_WHITESPACE"," ",349],["T_DOUBLE_ARROW","=>",349],["T_WHITESPACE"," ",349],["T_VARIABLE","$shippingTaxRefunded",349],",",["T_WHITESPACE","\n                ",349],["T_CONSTANT_ENCAPSED_STRING","'base_shipping_tax_amount'",350],["T_WHITESPACE"," ",350],["T_DOUBLE_ARROW","=>",350],["T_WHITESPACE"," ",350],["T_VARIABLE","$baseShippingTaxAmount",350],",",["T_WHITESPACE","\n                ",350],["T_CONSTANT_ENCAPSED_STRING","'base_shipping_tax_refunded'",351],["T_WHITESPACE"," ",351],["T_DOUBLE_ARROW","=>",351],["T_WHITESPACE"," ",351],["T_VARIABLE","$baseShippingTaxRefunded",351],",",["T_WHITESPACE","\n            ",351],"]",["T_WHITESPACE","\n        ",352],")",";",["T_WHITESPACE","\n\n        ",353],["T_VARIABLE","$this",355],["T_OBJECT_OPERATOR","->",355],["T_STRING","creditmemoMock",355],["T_OBJECT_OPERATOR","->",355],["T_STRING","expects",355],"(",["T_VARIABLE","$this",355],["T_OBJECT_OPERATOR","->",355],["T_STRING","once",355],"(",")",")",["T_WHITESPACE","\n            ",355],["T_OBJECT_OPERATOR","->",356],["T_STRING","method",356],"(",["T_CONSTANT_ENCAPSED_STRING","'getOrder'",356],")",["T_WHITESPACE","\n            ",356],["T_OBJECT_OPERATOR","->",357],["T_STRING","willReturn",357],"(",["T_VARIABLE","$order",357],")",";",["T_WHITESPACE","\n        ",357],["T_VARIABLE","$this",358],["T_OBJECT_OPERATOR","->",358],["T_STRING","creditmemoMock",358],["T_OBJECT_OPERATOR","->",358],["T_STRING","expects",358],"(",["T_VARIABLE","$this",358],["T_OBJECT_OPERATOR","->",358],["T_STRING","once",358],"(",")",")",["T_WHITESPACE","\n            ",358],["T_OBJECT_OPERATOR","->",359],["T_STRING","method",359],"(",["T_CONSTANT_ENCAPSED_STRING","'hasBaseShippingAmount'",359],")",["T_WHITESPACE","\n            ",359],["T_OBJECT_OPERATOR","->",360],["T_STRING","willReturn",360],"(",["T_STRING","true",360],")",";",["T_WHITESPACE","\n        ",360],["T_VARIABLE","$this",361],["T_OBJECT_OPERATOR","->",361],["T_STRING","creditmemoMock",361],["T_OBJECT_OPERATOR","->",361],["T_STRING","expects",361],"(",["T_VARIABLE","$this",361],["T_OBJECT_OPERATOR","->",361],["T_STRING","once",361],"(",")",")",["T_WHITESPACE","\n            ",361],["T_OBJECT_OPERATOR","->",362],["T_STRING","method",362],"(",["T_CONSTANT_ENCAPSED_STRING","'getBaseShippingAmount'",362],")",["T_WHITESPACE","\n            ",362],["T_OBJECT_OPERATOR","->",363],["T_STRING","willReturn",363],"(",["T_VARIABLE","$desiredRefundAmount",363],")",";",["T_WHITESPACE","\n        ",363],["T_VARIABLE","$this",364],["T_OBJECT_OPERATOR","->",364],["T_STRING","creditmemoMock",364],["T_OBJECT_OPERATOR","->",364],["T_STRING","expects",364],"(",["T_VARIABLE","$this",364],["T_OBJECT_OPERATOR","->",364],["T_STRING","once",364],"(",")",")",["T_WHITESPACE","\n            ",364],["T_OBJECT_OPERATOR","->",365],["T_STRING","method",365],"(",["T_CONSTANT_ENCAPSED_STRING","'getGrandTotal'",365],")",["T_WHITESPACE","\n            ",365],["T_OBJECT_OPERATOR","->",366],["T_STRING","willReturn",366],"(",["T_VARIABLE","$grandTotalBefore",366],")",";",["T_WHITESPACE","\n        ",366],["T_VARIABLE","$this",367],["T_OBJECT_OPERATOR","->",367],["T_STRING","creditmemoMock",367],["T_OBJECT_OPERATOR","->",367],["T_STRING","expects",367],"(",["T_VARIABLE","$this",367],["T_OBJECT_OPERATOR","->",367],["T_STRING","once",367],"(",")",")",["T_WHITESPACE","\n            ",367],["T_OBJECT_OPERATOR","->",368],["T_STRING","method",368],"(",["T_CONSTANT_ENCAPSED_STRING","'getBaseGrandTotal'",368],")",["T_WHITESPACE","\n            ",368],["T_OBJECT_OPERATOR","->",369],["T_STRING","willReturn",369],"(",["T_VARIABLE","$baseGrandTotalBefore",369],")",";",["T_WHITESPACE","\n\n        ",369],["T_COMMENT","\/\/verify\n",371],["T_WHITESPACE","        ",372],["T_VARIABLE","$this",372],["T_OBJECT_OPERATOR","->",372],["T_STRING","creditmemoMock",372],["T_OBJECT_OPERATOR","->",372],["T_STRING","expects",372],"(",["T_VARIABLE","$this",372],["T_OBJECT_OPERATOR","->",372],["T_STRING","once",372],"(",")",")",["T_WHITESPACE","\n            ",372],["T_OBJECT_OPERATOR","->",373],["T_STRING","method",373],"(",["T_CONSTANT_ENCAPSED_STRING","'setShippingAmount'",373],")",["T_WHITESPACE","\n            ",373],["T_OBJECT_OPERATOR","->",374],["T_STRING","with",374],"(",["T_VARIABLE","$expectedShippingAmount",374],")",["T_WHITESPACE","\n            ",374],["T_OBJECT_OPERATOR","->",375],["T_STRING","willReturnSelf",375],"(",")",";",["T_WHITESPACE","\n        ",375],["T_VARIABLE","$this",376],["T_OBJECT_OPERATOR","->",376],["T_STRING","creditmemoMock",376],["T_OBJECT_OPERATOR","->",376],["T_STRING","expects",376],"(",["T_VARIABLE","$this",376],["T_OBJECT_OPERATOR","->",376],["T_STRING","once",376],"(",")",")",["T_WHITESPACE","\n            ",376],["T_OBJECT_OPERATOR","->",377],["T_STRING","method",377],"(",["T_CONSTANT_ENCAPSED_STRING","'setBaseShippingAmount'",377],")",["T_WHITESPACE","\n            ",377],["T_OBJECT_OPERATOR","->",378],["T_STRING","with",378],"(",["T_VARIABLE","$expectedBaseShippingAmount",378],")",["T_WHITESPACE","\n            ",378],["T_OBJECT_OPERATOR","->",379],["T_STRING","willReturnSelf",379],"(",")",";",["T_WHITESPACE","\n        ",379],["T_VARIABLE","$this",380],["T_OBJECT_OPERATOR","->",380],["T_STRING","creditmemoMock",380],["T_OBJECT_OPERATOR","->",380],["T_STRING","expects",380],"(",["T_VARIABLE","$this",380],["T_OBJECT_OPERATOR","->",380],["T_STRING","once",380],"(",")",")",["T_WHITESPACE","\n            ",380],["T_OBJECT_OPERATOR","->",381],["T_STRING","method",381],"(",["T_CONSTANT_ENCAPSED_STRING","'setShippingInclTax'",381],")",["T_WHITESPACE","\n            ",381],["T_OBJECT_OPERATOR","->",382],["T_STRING","with",382],"(",["T_VARIABLE","$expectedShippingAmountInclTax",382],")",["T_WHITESPACE","\n            ",382],["T_OBJECT_OPERATOR","->",383],["T_STRING","willReturnSelf",383],"(",")",";",["T_WHITESPACE","\n        ",383],["T_VARIABLE","$this",384],["T_OBJECT_OPERATOR","->",384],["T_STRING","creditmemoMock",384],["T_OBJECT_OPERATOR","->",384],["T_STRING","expects",384],"(",["T_VARIABLE","$this",384],["T_OBJECT_OPERATOR","->",384],["T_STRING","once",384],"(",")",")",["T_WHITESPACE","\n            ",384],["T_OBJECT_OPERATOR","->",385],["T_STRING","method",385],"(",["T_CONSTANT_ENCAPSED_STRING","'setBaseShippingInclTax'",385],")",["T_WHITESPACE","\n            ",385],["T_OBJECT_OPERATOR","->",386],["T_STRING","with",386],"(",["T_VARIABLE","$expectedBaseShippingAmountInclTax",386],")",["T_WHITESPACE","\n            ",386],["T_OBJECT_OPERATOR","->",387],["T_STRING","willReturnSelf",387],"(",")",";",["T_WHITESPACE","\n        ",387],["T_VARIABLE","$this",388],["T_OBJECT_OPERATOR","->",388],["T_STRING","creditmemoMock",388],["T_OBJECT_OPERATOR","->",388],["T_STRING","expects",388],"(",["T_VARIABLE","$this",388],["T_OBJECT_OPERATOR","->",388],["T_STRING","once",388],"(",")",")",["T_WHITESPACE","\n            ",388],["T_OBJECT_OPERATOR","->",389],["T_STRING","method",389],"(",["T_CONSTANT_ENCAPSED_STRING","'setGrandTotal'",389],")",["T_WHITESPACE","\n            ",389],["T_OBJECT_OPERATOR","->",390],["T_STRING","with",390],"(",["T_VARIABLE","$expectedGrandTotal",390],")",["T_WHITESPACE","\n            ",390],["T_OBJECT_OPERATOR","->",391],["T_STRING","willReturnSelf",391],"(",")",";",["T_WHITESPACE","\n        ",391],["T_VARIABLE","$this",392],["T_OBJECT_OPERATOR","->",392],["T_STRING","creditmemoMock",392],["T_OBJECT_OPERATOR","->",392],["T_STRING","expects",392],"(",["T_VARIABLE","$this",392],["T_OBJECT_OPERATOR","->",392],["T_STRING","once",392],"(",")",")",["T_WHITESPACE","\n            ",392],["T_OBJECT_OPERATOR","->",393],["T_STRING","method",393],"(",["T_CONSTANT_ENCAPSED_STRING","'setBaseGrandTotal'",393],")",["T_WHITESPACE","\n            ",393],["T_OBJECT_OPERATOR","->",394],["T_STRING","with",394],"(",["T_VARIABLE","$expectedBaseGrandTtoal",394],")",["T_WHITESPACE","\n            ",394],["T_OBJECT_OPERATOR","->",395],["T_STRING","willReturnSelf",395],"(",")",";",["T_WHITESPACE","\n\n        ",395],["T_VARIABLE","$this",397],["T_OBJECT_OPERATOR","->",397],["T_STRING","shippingCollector",397],["T_OBJECT_OPERATOR","->",397],["T_STRING","collect",397],"(",["T_VARIABLE","$this",397],["T_OBJECT_OPERATOR","->",397],["T_STRING","creditmemoMock",397],")",";",["T_WHITESPACE","\n    ",397],"}",["T_WHITESPACE","\n",398],"}",["T_WHITESPACE","\n",399]]
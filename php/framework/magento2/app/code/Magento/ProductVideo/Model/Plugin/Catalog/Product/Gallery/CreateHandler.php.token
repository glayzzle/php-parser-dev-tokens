[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Copyright \u00c2\u00a9 2013-2017 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n *\/",2],["T_WHITESPACE","\n",5],["T_NAMESPACE","namespace",6],["T_WHITESPACE"," ",6],["T_STRING","Magento",6],["T_NS_SEPARATOR","\\",6],["T_STRING","ProductVideo",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Model",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Plugin",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Catalog",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Product",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Gallery",6],";",["T_WHITESPACE","\n\n",6],["T_USE","use",8],["T_WHITESPACE"," ",8],["T_STRING","Magento",8],["T_NS_SEPARATOR","\\",8],["T_STRING","ProductVideo",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Model",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Product",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Attribute",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Media",8],["T_NS_SEPARATOR","\\",8],["T_STRING","ExternalVideoEntryConverter",8],";",["T_WHITESPACE","\n",8],["T_USE","use",9],["T_WHITESPACE"," ",9],["T_STRING","Magento",9],["T_NS_SEPARATOR","\\",9],["T_STRING","ProductVideo",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Setup",9],["T_NS_SEPARATOR","\\",9],["T_STRING","InstallSchema",9],";",["T_WHITESPACE","\n\n",9],["T_DOC_COMMENT","\/**\n * Plugin for catalog product gallery create\/update handlers.\n *\/",11],["T_WHITESPACE","\n",13],["T_CLASS","class",14],["T_WHITESPACE"," ",14],["T_STRING","CreateHandler",14],["T_WHITESPACE"," ",14],["T_EXTENDS","extends",14],["T_WHITESPACE"," ",14],["T_STRING","AbstractHandler",14],["T_WHITESPACE","\n",14],"{",["T_WHITESPACE","\n    ",15],["T_DOC_COMMENT","\/**\n     * Key to store additional data from other stores\n     *\/",16],["T_WHITESPACE","\n    ",18],["T_CONST","const",19],["T_WHITESPACE"," ",19],["T_STRING","ADDITIONAL_STORE_DATA_KEY",19],["T_WHITESPACE"," ",19],"=",["T_WHITESPACE"," ",19],["T_CONSTANT_ENCAPSED_STRING","'additional_store_data'",19],";",["T_WHITESPACE","\n\n    ",19],["T_DOC_COMMENT","\/**\n     * @param \\Magento\\Catalog\\Model\\Product\\Gallery\\CreateHandler $mediaGalleryCreateHandler\n     * @param \\Magento\\Catalog\\Model\\Product $product\n     * @param array $arguments\n     * @return void\n     * @SuppressWarnings(PHPMD.UnusedFormalParameter)\n     *\/",21],["T_WHITESPACE","\n    ",27],["T_PUBLIC","public",28],["T_WHITESPACE"," ",28],["T_FUNCTION","function",28],["T_WHITESPACE"," ",28],["T_STRING","beforeExecute",28],"(",["T_WHITESPACE","\n        ",28],["T_NS_SEPARATOR","\\",29],["T_STRING","Magento",29],["T_NS_SEPARATOR","\\",29],["T_STRING","Catalog",29],["T_NS_SEPARATOR","\\",29],["T_STRING","Model",29],["T_NS_SEPARATOR","\\",29],["T_STRING","Product",29],["T_NS_SEPARATOR","\\",29],["T_STRING","Gallery",29],["T_NS_SEPARATOR","\\",29],["T_STRING","CreateHandler",29],["T_WHITESPACE"," ",29],["T_VARIABLE","$mediaGalleryCreateHandler",29],",",["T_WHITESPACE","\n        ",29],["T_NS_SEPARATOR","\\",30],["T_STRING","Magento",30],["T_NS_SEPARATOR","\\",30],["T_STRING","Catalog",30],["T_NS_SEPARATOR","\\",30],["T_STRING","Model",30],["T_NS_SEPARATOR","\\",30],["T_STRING","Product",30],["T_WHITESPACE"," ",30],["T_VARIABLE","$product",30],",",["T_WHITESPACE","\n        ",30],["T_ARRAY","array",31],["T_WHITESPACE"," ",31],["T_VARIABLE","$arguments",31],["T_WHITESPACE"," ",31],"=",["T_WHITESPACE"," ",31],"[","]",["T_WHITESPACE","\n    ",31],")",["T_WHITESPACE"," ",32],"{",["T_WHITESPACE","\n        ",32],["T_VARIABLE","$attribute",33],["T_WHITESPACE"," ",33],"=",["T_WHITESPACE"," ",33],["T_VARIABLE","$mediaGalleryCreateHandler",33],["T_OBJECT_OPERATOR","->",33],["T_STRING","getAttribute",33],"(",")",";",["T_WHITESPACE","\n        ",33],["T_VARIABLE","$mediaCollection",34],["T_WHITESPACE"," ",34],"=",["T_WHITESPACE"," ",34],["T_VARIABLE","$this",34],["T_OBJECT_OPERATOR","->",34],["T_STRING","getMediaEntriesDataCollection",34],"(",["T_VARIABLE","$product",34],",",["T_WHITESPACE"," ",34],["T_VARIABLE","$attribute",34],")",";",["T_WHITESPACE","\n        ",34],["T_IF","if",35],["T_WHITESPACE"," ",35],"(","!",["T_EMPTY","empty",35],"(",["T_VARIABLE","$mediaCollection",35],")",")",["T_WHITESPACE"," ",35],"{",["T_WHITESPACE","\n            ",35],["T_VARIABLE","$storeDataCollection",36],["T_WHITESPACE"," ",36],"=",["T_WHITESPACE"," ",36],["T_VARIABLE","$this",36],["T_OBJECT_OPERATOR","->",36],["T_STRING","loadStoreViewVideoData",36],"(",["T_VARIABLE","$mediaCollection",36],",",["T_WHITESPACE"," ",36],["T_VARIABLE","$product",36],["T_OBJECT_OPERATOR","->",36],["T_STRING","getStoreId",36],"(",")",")",";",["T_WHITESPACE","\n            ",36],["T_VARIABLE","$mediaCollection",37],["T_WHITESPACE"," ",37],"=",["T_WHITESPACE"," ",37],["T_VARIABLE","$this",37],["T_OBJECT_OPERATOR","->",37],["T_STRING","addAdditionalStoreData",37],"(",["T_VARIABLE","$mediaCollection",37],",",["T_WHITESPACE"," ",37],["T_VARIABLE","$storeDataCollection",37],")",";",["T_WHITESPACE","\n            ",37],["T_VARIABLE","$product",38],["T_OBJECT_OPERATOR","->",38],["T_STRING","setData",38],"(",["T_WHITESPACE","\n                ",38],["T_VARIABLE","$attribute",39],["T_OBJECT_OPERATOR","->",39],["T_STRING","getAttributeCode",39],"(",")",",",["T_WHITESPACE","\n                ",39],["T_VARIABLE","$mediaCollection",40],["T_WHITESPACE"," ",40],"+",["T_WHITESPACE"," ",40],["T_VARIABLE","$product",40],["T_OBJECT_OPERATOR","->",40],["T_STRING","getData",40],"(",["T_VARIABLE","$attribute",40],["T_OBJECT_OPERATOR","->",40],["T_STRING","getAttributeCode",40],"(",")",")",["T_WHITESPACE","\n            ",40],")",";",["T_WHITESPACE","\n        ",41],"}",["T_WHITESPACE","\n    ",42],"}",["T_WHITESPACE","\n\n    ",43],["T_DOC_COMMENT","\/**\n     * @param \\Magento\\Catalog\\Model\\Product\\Gallery\\CreateHandler $mediaGalleryCreateHandler\n     * @param \\Magento\\Catalog\\Model\\Product $product\n     * @return \\Magento\\Catalog\\Model\\Product\n     *\/",45],["T_WHITESPACE","\n    ",49],["T_PUBLIC","public",50],["T_WHITESPACE"," ",50],["T_FUNCTION","function",50],["T_WHITESPACE"," ",50],["T_STRING","afterExecute",50],"(",["T_WHITESPACE","\n        ",50],["T_NS_SEPARATOR","\\",51],["T_STRING","Magento",51],["T_NS_SEPARATOR","\\",51],["T_STRING","Catalog",51],["T_NS_SEPARATOR","\\",51],["T_STRING","Model",51],["T_NS_SEPARATOR","\\",51],["T_STRING","Product",51],["T_NS_SEPARATOR","\\",51],["T_STRING","Gallery",51],["T_NS_SEPARATOR","\\",51],["T_STRING","CreateHandler",51],["T_WHITESPACE"," ",51],["T_VARIABLE","$mediaGalleryCreateHandler",51],",",["T_WHITESPACE","\n        ",51],["T_NS_SEPARATOR","\\",52],["T_STRING","Magento",52],["T_NS_SEPARATOR","\\",52],["T_STRING","Catalog",52],["T_NS_SEPARATOR","\\",52],["T_STRING","Model",52],["T_NS_SEPARATOR","\\",52],["T_STRING","Product",52],["T_WHITESPACE"," ",52],["T_VARIABLE","$product",52],["T_WHITESPACE","\n    ",52],")",["T_WHITESPACE"," ",53],"{",["T_WHITESPACE","\n        ",53],["T_VARIABLE","$mediaCollection",54],["T_WHITESPACE"," ",54],"=",["T_WHITESPACE"," ",54],["T_VARIABLE","$this",54],["T_OBJECT_OPERATOR","->",54],["T_STRING","getMediaEntriesDataCollection",54],"(",["T_WHITESPACE","\n            ",54],["T_VARIABLE","$product",55],",",["T_WHITESPACE","\n            ",55],["T_VARIABLE","$mediaGalleryCreateHandler",56],["T_OBJECT_OPERATOR","->",56],["T_STRING","getAttribute",56],"(",")",["T_WHITESPACE","\n        ",56],")",";",["T_WHITESPACE","\n\n        ",57],["T_IF","if",59],["T_WHITESPACE"," ",59],"(","!",["T_EMPTY","empty",59],"(",["T_VARIABLE","$mediaCollection",59],")",")",["T_WHITESPACE"," ",59],"{",["T_WHITESPACE","\n            ",59],["T_VARIABLE","$videoDataCollection",60],["T_WHITESPACE"," ",60],"=",["T_WHITESPACE"," ",60],["T_VARIABLE","$this",60],["T_OBJECT_OPERATOR","->",60],["T_STRING","collectVideoData",60],"(",["T_VARIABLE","$mediaCollection",60],")",";",["T_WHITESPACE","\n            ",60],["T_VARIABLE","$this",61],["T_OBJECT_OPERATOR","->",61],["T_STRING","saveVideoData",61],"(",["T_VARIABLE","$videoDataCollection",61],",",["T_WHITESPACE"," ",61],["T_VARIABLE","$product",61],["T_OBJECT_OPERATOR","->",61],["T_STRING","getStoreId",61],"(",")",")",";",["T_WHITESPACE","\n            ",61],["T_VARIABLE","$this",62],["T_OBJECT_OPERATOR","->",62],["T_STRING","saveAdditionalStoreData",62],"(",["T_VARIABLE","$videoDataCollection",62],")",";",["T_WHITESPACE","\n        ",62],"}",["T_WHITESPACE","\n\n        ",63],["T_RETURN","return",65],["T_WHITESPACE"," ",65],["T_VARIABLE","$product",65],";",["T_WHITESPACE","\n    ",65],"}",["T_WHITESPACE","\n\n    ",66],["T_DOC_COMMENT","\/**\n     * @param array $videoDataCollection\n     * @param int $storeId\n     * @return void\n     *\/",68],["T_WHITESPACE","\n    ",72],["T_PROTECTED","protected",73],["T_WHITESPACE"," ",73],["T_FUNCTION","function",73],["T_WHITESPACE"," ",73],["T_STRING","saveVideoData",73],"(",["T_ARRAY","array",73],["T_WHITESPACE"," ",73],["T_VARIABLE","$videoDataCollection",73],",",["T_WHITESPACE"," ",73],["T_VARIABLE","$storeId",73],")",["T_WHITESPACE","\n    ",73],"{",["T_WHITESPACE","\n        ",74],["T_FOREACH","foreach",75],["T_WHITESPACE"," ",75],"(",["T_VARIABLE","$videoDataCollection",75],["T_WHITESPACE"," ",75],["T_AS","as",75],["T_WHITESPACE"," ",75],["T_VARIABLE","$item",75],")",["T_WHITESPACE"," ",75],"{",["T_WHITESPACE","\n            ",75],["T_VARIABLE","$item",76],"[",["T_CONSTANT_ENCAPSED_STRING","'store_id'",76],"]",["T_WHITESPACE"," ",76],"=",["T_WHITESPACE"," ",76],["T_VARIABLE","$storeId",76],";",["T_WHITESPACE","\n            ",76],["T_VARIABLE","$this",77],["T_OBJECT_OPERATOR","->",77],["T_STRING","saveVideoValuesItem",77],"(",["T_VARIABLE","$item",77],")",";",["T_WHITESPACE","\n        ",77],"}",["T_WHITESPACE","\n    ",78],"}",["T_WHITESPACE","\n\n    ",79],["T_DOC_COMMENT","\/**\n     * @param array $videoDataCollection\n     * @return void\n     *\/",81],["T_WHITESPACE","\n    ",84],["T_PROTECTED","protected",85],["T_WHITESPACE"," ",85],["T_FUNCTION","function",85],["T_WHITESPACE"," ",85],["T_STRING","saveAdditionalStoreData",85],"(",["T_ARRAY","array",85],["T_WHITESPACE"," ",85],["T_VARIABLE","$videoDataCollection",85],")",["T_WHITESPACE","\n    ",85],"{",["T_WHITESPACE","\n        ",86],["T_FOREACH","foreach",87],["T_WHITESPACE"," ",87],"(",["T_VARIABLE","$videoDataCollection",87],["T_WHITESPACE"," ",87],["T_AS","as",87],["T_WHITESPACE"," ",87],["T_VARIABLE","$mediaItem",87],")",["T_WHITESPACE"," ",87],"{",["T_WHITESPACE","\n            ",87],["T_IF","if",88],["T_WHITESPACE"," ",88],"(","!",["T_EMPTY","empty",88],"(",["T_VARIABLE","$mediaItem",88],"[",["T_STRING","self",88],["T_DOUBLE_COLON","::",88],["T_STRING","ADDITIONAL_STORE_DATA_KEY",88],"]",")",")",["T_WHITESPACE"," ",88],"{",["T_WHITESPACE","\n                ",88],["T_FOREACH","foreach",89],["T_WHITESPACE"," ",89],"(",["T_VARIABLE","$mediaItem",89],"[",["T_STRING","self",89],["T_DOUBLE_COLON","::",89],["T_STRING","ADDITIONAL_STORE_DATA_KEY",89],"]",["T_WHITESPACE"," ",89],["T_AS","as",89],["T_WHITESPACE"," ",89],["T_VARIABLE","$additionalStoreItem",89],")",["T_WHITESPACE"," ",89],"{",["T_WHITESPACE","\n                    ",89],["T_VARIABLE","$additionalStoreItem",90],"[",["T_CONSTANT_ENCAPSED_STRING","'value_id'",90],"]",["T_WHITESPACE"," ",90],"=",["T_WHITESPACE"," ",90],["T_VARIABLE","$mediaItem",90],"[",["T_CONSTANT_ENCAPSED_STRING","'value_id'",90],"]",";",["T_WHITESPACE","\n                    ",90],["T_VARIABLE","$this",91],["T_OBJECT_OPERATOR","->",91],["T_STRING","saveVideoValuesItem",91],"(",["T_VARIABLE","$additionalStoreItem",91],")",";",["T_WHITESPACE","\n                ",91],"}",["T_WHITESPACE","\n            ",92],"}",["T_WHITESPACE","\n        ",93],"}",["T_WHITESPACE","\n    ",94],"}",["T_WHITESPACE","\n\n    ",95],["T_DOC_COMMENT","\/**\n     * @param array $item\n     * @return void\n     *\/",97],["T_WHITESPACE","\n    ",100],["T_PROTECTED","protected",101],["T_WHITESPACE"," ",101],["T_FUNCTION","function",101],["T_WHITESPACE"," ",101],["T_STRING","saveVideoValuesItem",101],"(",["T_ARRAY","array",101],["T_WHITESPACE"," ",101],["T_VARIABLE","$item",101],")",["T_WHITESPACE","\n    ",101],"{",["T_WHITESPACE","\n        ",102],["T_VARIABLE","$this",103],["T_OBJECT_OPERATOR","->",103],["T_STRING","resourceModel",103],["T_OBJECT_OPERATOR","->",103],["T_STRING","saveDataRow",103],"(",["T_WHITESPACE","\n            ",103],["T_STRING","InstallSchema",104],["T_DOUBLE_COLON","::",104],["T_STRING","GALLERY_VALUE_VIDEO_TABLE",104],",",["T_WHITESPACE","\n            ",104],["T_VARIABLE","$this",105],["T_OBJECT_OPERATOR","->",105],["T_STRING","prepareVideoRowDataForSave",105],"(",["T_VARIABLE","$item",105],")",["T_WHITESPACE","\n        ",105],")",";",["T_WHITESPACE","\n    ",106],"}",["T_WHITESPACE","\n\n    ",107],["T_DOC_COMMENT","\/**\n     * @param array $mediaCollection\n     * @param int $currentStoreId\n     * @return array\n     *\/",109],["T_WHITESPACE","\n    ",113],["T_PROTECTED","protected",114],["T_WHITESPACE"," ",114],["T_FUNCTION","function",114],["T_WHITESPACE"," ",114],["T_STRING","excludeCurrentStoreRecord",114],"(",["T_ARRAY","array",114],["T_WHITESPACE"," ",114],["T_VARIABLE","$mediaCollection",114],",",["T_WHITESPACE"," ",114],["T_VARIABLE","$currentStoreId",114],")",["T_WHITESPACE","\n    ",114],"{",["T_WHITESPACE","\n        ",115],["T_RETURN","return",116],["T_WHITESPACE"," ",116],["T_STRING","array_filter",116],"(",["T_WHITESPACE","\n            ",116],["T_VARIABLE","$mediaCollection",117],",",["T_WHITESPACE","\n            ",117],["T_FUNCTION","function",118],["T_WHITESPACE"," ",118],"(",["T_VARIABLE","$item",118],")",["T_WHITESPACE"," ",118],["T_USE","use",118],["T_WHITESPACE"," ",118],"(",["T_VARIABLE","$currentStoreId",118],")",["T_WHITESPACE"," ",118],"{",["T_WHITESPACE","\n                ",118],["T_RETURN","return",119],["T_WHITESPACE"," ",119],["T_VARIABLE","$item",119],"[",["T_CONSTANT_ENCAPSED_STRING","'store_id'",119],"]",["T_WHITESPACE"," ",119],["T_IS_EQUAL","==",119],["T_WHITESPACE"," ",119],["T_VARIABLE","$currentStoreId",119],["T_WHITESPACE"," ",119],"?",["T_WHITESPACE"," ",119],["T_STRING","false",119],["T_WHITESPACE"," ",119],":",["T_WHITESPACE"," ",119],["T_STRING","true",119],";",["T_WHITESPACE","\n            ",119],"}",["T_WHITESPACE","\n        ",120],")",";",["T_WHITESPACE","\n    ",121],"}",["T_WHITESPACE","\n\n    ",122],["T_DOC_COMMENT","\/**\n     * @param array $rowData\n     * @return array\n     *\/",124],["T_WHITESPACE","\n    ",127],["T_PROTECTED","protected",128],["T_WHITESPACE"," ",128],["T_FUNCTION","function",128],["T_WHITESPACE"," ",128],["T_STRING","prepareVideoRowDataForSave",128],"(",["T_ARRAY","array",128],["T_WHITESPACE"," ",128],["T_VARIABLE","$rowData",128],")",["T_WHITESPACE","\n    ",128],"{",["T_WHITESPACE","\n        ",129],["T_FOREACH","foreach",130],["T_WHITESPACE"," ",130],"(",["T_VARIABLE","$this",130],["T_OBJECT_OPERATOR","->",130],["T_STRING","videoPropertiesDbMapping",130],["T_WHITESPACE"," ",130],["T_AS","as",130],["T_WHITESPACE"," ",130],["T_VARIABLE","$sourceKey",130],["T_WHITESPACE"," ",130],["T_DOUBLE_ARROW","=>",130],["T_WHITESPACE"," ",130],["T_VARIABLE","$dbKey",130],")",["T_WHITESPACE"," ",130],"{",["T_WHITESPACE","\n            ",130],["T_IF","if",131],["T_WHITESPACE"," ",131],"(",["T_STRING","array_key_exists",131],"(",["T_VARIABLE","$sourceKey",131],",",["T_WHITESPACE"," ",131],["T_VARIABLE","$rowData",131],")",["T_WHITESPACE"," ",131],["T_BOOLEAN_AND","&&",131],["T_WHITESPACE"," ",131],["T_VARIABLE","$sourceKey",131],["T_WHITESPACE"," ",131],["T_IS_NOT_EQUAL","!=",131],["T_WHITESPACE"," ",131],["T_VARIABLE","$dbKey",131],")",["T_WHITESPACE"," ",131],"{",["T_WHITESPACE","\n                ",131],["T_VARIABLE","$rowData",132],"[",["T_VARIABLE","$dbKey",132],"]",["T_WHITESPACE"," ",132],"=",["T_WHITESPACE"," ",132],["T_VARIABLE","$rowData",132],"[",["T_VARIABLE","$sourceKey",132],"]",";",["T_WHITESPACE","\n                ",132],["T_UNSET","unset",133],"(",["T_VARIABLE","$rowData",133],"[",["T_VARIABLE","$sourceKey",133],"]",")",";",["T_WHITESPACE","\n            ",133],"}",["T_WHITESPACE","\n        ",134],"}",["T_WHITESPACE","\n        ",135],["T_VARIABLE","$rowData",136],["T_WHITESPACE"," ",136],"=",["T_WHITESPACE"," ",136],["T_STRING","array_intersect_key",136],"(",["T_VARIABLE","$rowData",136],",",["T_WHITESPACE"," ",136],["T_STRING","array_flip",136],"(",["T_VARIABLE","$this",136],["T_OBJECT_OPERATOR","->",136],["T_STRING","videoPropertiesDbMapping",136],")",")",";",["T_WHITESPACE","\n\n        ",136],["T_RETURN","return",138],["T_WHITESPACE"," ",138],["T_VARIABLE","$rowData",138],";",["T_WHITESPACE","\n    ",138],"}",["T_WHITESPACE","\n\n    ",139],["T_DOC_COMMENT","\/**\n     * @param array $mediaCollection\n     * @param int $excludedStore\n     * @return array\n     *\/",141],["T_WHITESPACE","\n    ",145],["T_PROTECTED","protected",146],["T_WHITESPACE"," ",146],["T_FUNCTION","function",146],["T_WHITESPACE"," ",146],["T_STRING","loadStoreViewVideoData",146],"(",["T_ARRAY","array",146],["T_WHITESPACE"," ",146],["T_VARIABLE","$mediaCollection",146],",",["T_WHITESPACE"," ",146],["T_VARIABLE","$excludedStore",146],")",["T_WHITESPACE","\n    ",146],"{",["T_WHITESPACE","\n        ",147],["T_VARIABLE","$ids",148],["T_WHITESPACE"," ",148],"=",["T_WHITESPACE"," ",148],["T_VARIABLE","$this",148],["T_OBJECT_OPERATOR","->",148],["T_STRING","collectVideoEntriesIdsToAdditionalLoad",148],"(",["T_VARIABLE","$mediaCollection",148],")",";",["T_WHITESPACE","\n        ",148],["T_VARIABLE","$result",149],["T_WHITESPACE"," ",149],"=",["T_WHITESPACE"," ",149],"[","]",";",["T_WHITESPACE","\n        ",149],["T_IF","if",150],["T_WHITESPACE"," ",150],"(","!",["T_EMPTY","empty",150],"(",["T_VARIABLE","$ids",150],")",")",["T_WHITESPACE"," ",150],"{",["T_WHITESPACE","\n            ",150],["T_VARIABLE","$result",151],["T_WHITESPACE"," ",151],"=",["T_WHITESPACE"," ",151],["T_VARIABLE","$this",151],["T_OBJECT_OPERATOR","->",151],["T_STRING","resourceModel",151],["T_OBJECT_OPERATOR","->",151],["T_STRING","loadDataFromTableByValueId",151],"(",["T_WHITESPACE","\n                ",151],["T_STRING","InstallSchema",152],["T_DOUBLE_COLON","::",152],["T_STRING","GALLERY_VALUE_VIDEO_TABLE",152],",",["T_WHITESPACE","\n                ",152],["T_VARIABLE","$ids",153],",",["T_WHITESPACE","\n                ",153],["T_STRING","null",154],",",["T_WHITESPACE","\n                ",154],["T_VARIABLE","$this",155],["T_OBJECT_OPERATOR","->",155],["T_STRING","videoPropertiesDbMapping",155],["T_WHITESPACE","\n            ",155],")",";",["T_WHITESPACE","\n            ",156],["T_VARIABLE","$result",157],["T_WHITESPACE"," ",157],"=",["T_WHITESPACE"," ",157],["T_VARIABLE","$this",157],["T_OBJECT_OPERATOR","->",157],["T_STRING","excludeCurrentStoreRecord",157],"(",["T_VARIABLE","$result",157],",",["T_WHITESPACE"," ",157],["T_VARIABLE","$excludedStore",157],")",";",["T_WHITESPACE","\n        ",157],"}",["T_WHITESPACE","\n\n        ",158],["T_RETURN","return",160],["T_WHITESPACE"," ",160],["T_VARIABLE","$result",160],";",["T_WHITESPACE","\n    ",160],"}",["T_WHITESPACE","\n\n    ",161],["T_DOC_COMMENT","\/**\n     * @param array $mediaCollection\n     * @return array\n     *\/",163],["T_WHITESPACE","\n    ",166],["T_PROTECTED","protected",167],["T_WHITESPACE"," ",167],["T_FUNCTION","function",167],["T_WHITESPACE"," ",167],["T_STRING","collectVideoData",167],"(",["T_ARRAY","array",167],["T_WHITESPACE"," ",167],["T_VARIABLE","$mediaCollection",167],")",["T_WHITESPACE","\n    ",167],"{",["T_WHITESPACE","\n        ",168],["T_VARIABLE","$videoDataCollection",169],["T_WHITESPACE"," ",169],"=",["T_WHITESPACE"," ",169],"[","]",";",["T_WHITESPACE","\n        ",169],["T_FOREACH","foreach",170],["T_WHITESPACE"," ",170],"(",["T_VARIABLE","$mediaCollection",170],["T_WHITESPACE"," ",170],["T_AS","as",170],["T_WHITESPACE"," ",170],["T_VARIABLE","$item",170],")",["T_WHITESPACE"," ",170],"{",["T_WHITESPACE","\n            ",170],["T_IF","if",171],["T_WHITESPACE"," ",171],"(","!",["T_EMPTY","empty",171],"(",["T_VARIABLE","$item",171],"[",["T_CONSTANT_ENCAPSED_STRING","'media_type'",171],"]",")",["T_WHITESPACE","\n                ",171],["T_BOOLEAN_AND","&&",172],["T_WHITESPACE"," ",172],["T_EMPTY","empty",172],"(",["T_VARIABLE","$item",172],"[",["T_CONSTANT_ENCAPSED_STRING","'removed'",172],"]",")",["T_WHITESPACE","\n                ",172],["T_BOOLEAN_AND","&&",173],["T_WHITESPACE"," ",173],["T_VARIABLE","$item",173],"[",["T_CONSTANT_ENCAPSED_STRING","'media_type'",173],"]",["T_WHITESPACE"," ",173],["T_IS_EQUAL","==",173],["T_WHITESPACE"," ",173],["T_STRING","ExternalVideoEntryConverter",173],["T_DOUBLE_COLON","::",173],["T_STRING","MEDIA_TYPE_CODE",173],["T_WHITESPACE","\n            ",173],")",["T_WHITESPACE"," ",174],"{",["T_WHITESPACE","\n                ",174],["T_VARIABLE","$videoData",175],["T_WHITESPACE"," ",175],"=",["T_WHITESPACE"," ",175],["T_VARIABLE","$this",175],["T_OBJECT_OPERATOR","->",175],["T_STRING","extractVideoDataFromRowData",175],"(",["T_VARIABLE","$item",175],")",";",["T_WHITESPACE","\n                ",175],["T_VARIABLE","$videoDataCollection",176],"[","]",["T_WHITESPACE"," ",176],"=",["T_WHITESPACE"," ",176],["T_VARIABLE","$videoData",176],";",["T_WHITESPACE","\n            ",176],"}",["T_WHITESPACE","\n        ",177],"}",["T_WHITESPACE","\n\n        ",178],["T_RETURN","return",180],["T_WHITESPACE"," ",180],["T_VARIABLE","$videoDataCollection",180],";",["T_WHITESPACE","\n    ",180],"}",["T_WHITESPACE","\n\n    ",181],["T_DOC_COMMENT","\/**\n     * @param array $rowData\n     * @return array\n     *\/",183],["T_WHITESPACE","\n    ",186],["T_PROTECTED","protected",187],["T_WHITESPACE"," ",187],["T_FUNCTION","function",187],["T_WHITESPACE"," ",187],["T_STRING","extractVideoDataFromRowData",187],"(",["T_ARRAY","array",187],["T_WHITESPACE"," ",187],["T_VARIABLE","$rowData",187],")",["T_WHITESPACE","\n    ",187],"{",["T_WHITESPACE","\n        ",188],["T_RETURN","return",189],["T_WHITESPACE"," ",189],["T_STRING","array_intersect_key",189],"(",["T_WHITESPACE","\n            ",189],["T_VARIABLE","$rowData",190],",",["T_WHITESPACE","\n            ",190],["T_STRING","array_merge",191],"(",["T_VARIABLE","$this",191],["T_OBJECT_OPERATOR","->",191],["T_STRING","videoPropertiesDbMapping",191],",",["T_WHITESPACE"," ",191],"[",["T_STRING","self",191],["T_DOUBLE_COLON","::",191],["T_STRING","ADDITIONAL_STORE_DATA_KEY",191],["T_WHITESPACE"," ",191],["T_DOUBLE_ARROW","=>",191],["T_WHITESPACE"," ",191],["T_CONSTANT_ENCAPSED_STRING","''",191],"]",")",["T_WHITESPACE","\n        ",191],")",";",["T_WHITESPACE","\n    ",192],"}",["T_WHITESPACE","\n\n    ",193],["T_DOC_COMMENT","\/**\n     * @param array $mediaCollection\n     * @return array\n     *\/",195],["T_WHITESPACE","\n    ",198],["T_PROTECTED","protected",199],["T_WHITESPACE"," ",199],["T_FUNCTION","function",199],["T_WHITESPACE"," ",199],["T_STRING","collectVideoEntriesIdsToAdditionalLoad",199],"(",["T_ARRAY","array",199],["T_WHITESPACE"," ",199],["T_VARIABLE","$mediaCollection",199],")",["T_WHITESPACE","\n    ",199],"{",["T_WHITESPACE","\n        ",200],["T_VARIABLE","$ids",201],["T_WHITESPACE"," ",201],"=",["T_WHITESPACE"," ",201],"[","]",";",["T_WHITESPACE","\n        ",201],["T_FOREACH","foreach",202],["T_WHITESPACE"," ",202],"(",["T_VARIABLE","$mediaCollection",202],["T_WHITESPACE"," ",202],["T_AS","as",202],["T_WHITESPACE"," ",202],["T_VARIABLE","$item",202],")",["T_WHITESPACE"," ",202],"{",["T_WHITESPACE","\n            ",202],["T_IF","if",203],["T_WHITESPACE"," ",203],"(","!",["T_EMPTY","empty",203],"(",["T_VARIABLE","$item",203],"[",["T_CONSTANT_ENCAPSED_STRING","'media_type'",203],"]",")",["T_WHITESPACE","\n                ",203],["T_BOOLEAN_AND","&&",204],["T_WHITESPACE"," ",204],["T_EMPTY","empty",204],"(",["T_VARIABLE","$item",204],"[",["T_CONSTANT_ENCAPSED_STRING","'removed'",204],"]",")",["T_WHITESPACE","\n                ",204],["T_BOOLEAN_AND","&&",205],["T_WHITESPACE"," ",205],["T_VARIABLE","$item",205],"[",["T_CONSTANT_ENCAPSED_STRING","'media_type'",205],"]",["T_WHITESPACE"," ",205],["T_IS_EQUAL","==",205],["T_WHITESPACE"," ",205],["T_STRING","ExternalVideoEntryConverter",205],["T_DOUBLE_COLON","::",205],["T_STRING","MEDIA_TYPE_CODE",205],["T_WHITESPACE","\n                ",205],["T_BOOLEAN_AND","&&",206],["T_WHITESPACE"," ",206],["T_ISSET","isset",206],"(",["T_VARIABLE","$item",206],"[",["T_CONSTANT_ENCAPSED_STRING","'save_data_from'",206],"]",")",["T_WHITESPACE","\n            ",206],")",["T_WHITESPACE"," ",207],"{",["T_WHITESPACE","\n                ",207],["T_VARIABLE","$ids",208],"[","]",["T_WHITESPACE"," ",208],"=",["T_WHITESPACE"," ",208],["T_VARIABLE","$item",208],"[",["T_CONSTANT_ENCAPSED_STRING","'save_data_from'",208],"]",";",["T_WHITESPACE","\n            ",208],"}",["T_WHITESPACE","\n        ",209],"}",["T_WHITESPACE","\n        ",210],["T_RETURN","return",211],["T_WHITESPACE"," ",211],["T_VARIABLE","$ids",211],";",["T_WHITESPACE","\n    ",211],"}",["T_WHITESPACE","\n\n    ",212],["T_DOC_COMMENT","\/**\n     * @param array $mediaCollection\n     * @param array $data\n     * @return array\n     *\/",214],["T_WHITESPACE","\n    ",218],["T_PROTECTED","protected",219],["T_WHITESPACE"," ",219],["T_FUNCTION","function",219],["T_WHITESPACE"," ",219],["T_STRING","addAdditionalStoreData",219],"(",["T_ARRAY","array",219],["T_WHITESPACE"," ",219],["T_VARIABLE","$mediaCollection",219],",",["T_WHITESPACE"," ",219],["T_ARRAY","array",219],["T_WHITESPACE"," ",219],["T_VARIABLE","$data",219],")",["T_WHITESPACE","\n    ",219],"{",["T_WHITESPACE","\n        ",220],["T_FOREACH","foreach",221],["T_WHITESPACE"," ",221],"(",["T_VARIABLE","$mediaCollection",221],["T_WHITESPACE"," ",221],["T_AS","as",221],["T_WHITESPACE"," ",221],"&",["T_VARIABLE","$mediaItem",221],")",["T_WHITESPACE"," ",221],"{",["T_WHITESPACE","\n            ",221],["T_IF","if",222],["T_WHITESPACE"," ",222],"(","!",["T_EMPTY","empty",222],"(",["T_VARIABLE","$mediaItem",222],"[",["T_CONSTANT_ENCAPSED_STRING","'save_data_from'",222],"]",")",")",["T_WHITESPACE"," ",222],"{",["T_WHITESPACE","\n                ",222],["T_VARIABLE","$additionalData",223],["T_WHITESPACE"," ",223],"=",["T_WHITESPACE"," ",223],["T_VARIABLE","$this",223],["T_OBJECT_OPERATOR","->",223],["T_STRING","createAdditionalStoreDataCollection",223],"(",["T_VARIABLE","$data",223],",",["T_WHITESPACE"," ",223],["T_VARIABLE","$mediaItem",223],"[",["T_CONSTANT_ENCAPSED_STRING","'save_data_from'",223],"]",")",";",["T_WHITESPACE","\n                ",223],["T_IF","if",224],["T_WHITESPACE"," ",224],"(","!",["T_EMPTY","empty",224],"(",["T_VARIABLE","$additionalData",224],")",")",["T_WHITESPACE"," ",224],"{",["T_WHITESPACE","\n                    ",224],["T_VARIABLE","$mediaItem",225],"[",["T_STRING","self",225],["T_DOUBLE_COLON","::",225],["T_STRING","ADDITIONAL_STORE_DATA_KEY",225],"]",["T_WHITESPACE"," ",225],"=",["T_WHITESPACE"," ",225],["T_VARIABLE","$additionalData",225],";",["T_WHITESPACE","\n                ",225],"}",["T_WHITESPACE","\n            ",226],"}",["T_WHITESPACE","\n        ",227],"}",["T_WHITESPACE","\n\n        ",228],["T_RETURN","return",230],["T_WHITESPACE"," ",230],"[",["T_CONSTANT_ENCAPSED_STRING","'images'",230],["T_WHITESPACE"," ",230],["T_DOUBLE_ARROW","=>",230],["T_WHITESPACE"," ",230],["T_VARIABLE","$mediaCollection",230],"]",";",["T_WHITESPACE","\n    ",230],"}",["T_WHITESPACE","\n\n    ",231],["T_DOC_COMMENT","\/**\n     * @param array $storeData\n     * @param int $valueId\n     * @return array\n     *\/",233],["T_WHITESPACE","\n    ",237],["T_PROTECTED","protected",238],["T_WHITESPACE"," ",238],["T_FUNCTION","function",238],["T_WHITESPACE"," ",238],["T_STRING","createAdditionalStoreDataCollection",238],"(",["T_ARRAY","array",238],["T_WHITESPACE"," ",238],["T_VARIABLE","$storeData",238],",",["T_WHITESPACE"," ",238],["T_VARIABLE","$valueId",238],")",["T_WHITESPACE","\n    ",238],"{",["T_WHITESPACE","\n        ",239],["T_VARIABLE","$result",240],["T_WHITESPACE"," ",240],"=",["T_WHITESPACE"," ",240],"[","]",";",["T_WHITESPACE","\n        ",240],["T_FOREACH","foreach",241],["T_WHITESPACE"," ",241],"(",["T_VARIABLE","$storeData",241],["T_WHITESPACE"," ",241],["T_AS","as",241],["T_WHITESPACE"," ",241],["T_VARIABLE","$item",241],")",["T_WHITESPACE"," ",241],"{",["T_WHITESPACE","\n            ",241],["T_IF","if",242],["T_WHITESPACE"," ",242],"(",["T_VARIABLE","$item",242],"[",["T_CONSTANT_ENCAPSED_STRING","'value_id'",242],"]",["T_WHITESPACE"," ",242],["T_IS_EQUAL","==",242],["T_WHITESPACE"," ",242],["T_VARIABLE","$valueId",242],")",["T_WHITESPACE"," ",242],"{",["T_WHITESPACE","\n                ",242],["T_UNSET","unset",243],"(",["T_VARIABLE","$item",243],"[",["T_CONSTANT_ENCAPSED_STRING","'value_id'",243],"]",")",";",["T_WHITESPACE","\n                ",243],["T_VARIABLE","$result",244],"[","]",["T_WHITESPACE"," ",244],"=",["T_WHITESPACE"," ",244],["T_VARIABLE","$item",244],";",["T_WHITESPACE","\n            ",244],"}",["T_WHITESPACE","\n        ",245],"}",["T_WHITESPACE","\n\n        ",246],["T_RETURN","return",248],["T_WHITESPACE"," ",248],["T_VARIABLE","$result",248],";",["T_WHITESPACE","\n    ",248],"}",["T_WHITESPACE","\n",249],"}",["T_WHITESPACE","\n",250]]
[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Copyright \u00c2\u00a9 2013-2017 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n *\/",2],["T_WHITESPACE","\n",5],["T_NAMESPACE","namespace",6],["T_WHITESPACE"," ",6],["T_STRING","Magento",6],["T_NS_SEPARATOR","\\",6],["T_STRING","ProductVideo",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Model",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Plugin",6],";",["T_WHITESPACE","\n\n",6],["T_USE","use",8],["T_WHITESPACE"," ",8],["T_STRING","Magento",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Catalog",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Model",8],["T_NS_SEPARATOR","\\",8],["T_STRING","ResourceModel",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Product",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Gallery",8],";",["T_WHITESPACE","\n",8],["T_USE","use",9],["T_WHITESPACE"," ",9],["T_STRING","Magento",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Framework",9],["T_NS_SEPARATOR","\\",9],["T_STRING","DB",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Select",9],";",["T_WHITESPACE","\n",9],["T_USE","use",10],["T_WHITESPACE"," ",10],["T_STRING","Magento",10],["T_NS_SEPARATOR","\\",10],["T_STRING","ProductVideo",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Setup",10],["T_NS_SEPARATOR","\\",10],["T_STRING","InstallSchema",10],";",["T_WHITESPACE","\n\n",10],["T_DOC_COMMENT","\/**\n * Media Resource decorator\n *\/",12],["T_WHITESPACE","\n",14],["T_CLASS","class",15],["T_WHITESPACE"," ",15],["T_STRING","ExternalVideoResourceBackend",15],["T_WHITESPACE","\n",15],"{",["T_WHITESPACE","\n    ",16],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\ProductVideo\\Model\\ResourceModel\\Video\n     *\/",17],["T_WHITESPACE","\n    ",19],["T_PROTECTED","protected",20],["T_WHITESPACE"," ",20],["T_VARIABLE","$videoResourceModel",20],";",["T_WHITESPACE","\n\n    ",20],["T_DOC_COMMENT","\/**\n     * @param \\Magento\\ProductVideo\\Model\\ResourceModel\\Video $videoResourceModel\n     *\/",22],["T_WHITESPACE","\n    ",24],["T_PUBLIC","public",25],["T_WHITESPACE"," ",25],["T_FUNCTION","function",25],["T_WHITESPACE"," ",25],["T_STRING","__construct",25],"(",["T_NS_SEPARATOR","\\",25],["T_STRING","Magento",25],["T_NS_SEPARATOR","\\",25],["T_STRING","ProductVideo",25],["T_NS_SEPARATOR","\\",25],["T_STRING","Model",25],["T_NS_SEPARATOR","\\",25],["T_STRING","ResourceModel",25],["T_NS_SEPARATOR","\\",25],["T_STRING","Video",25],["T_WHITESPACE"," ",25],["T_VARIABLE","$videoResourceModel",25],")",["T_WHITESPACE","\n    ",25],"{",["T_WHITESPACE","\n        ",26],["T_VARIABLE","$this",27],["T_OBJECT_OPERATOR","->",27],["T_STRING","videoResourceModel",27],["T_WHITESPACE"," ",27],"=",["T_WHITESPACE"," ",27],["T_VARIABLE","$videoResourceModel",27],";",["T_WHITESPACE","\n    ",27],"}",["T_WHITESPACE","\n\n    ",28],["T_DOC_COMMENT","\/**\n     * @param Gallery $originalResourceModel\n     * @param array $valueIdMap\n     * @return array\n     *\n     * @SuppressWarnings(PHPMD.UnusedFormalParameter)\n     *\/",30],["T_WHITESPACE","\n    ",36],["T_PUBLIC","public",37],["T_WHITESPACE"," ",37],["T_FUNCTION","function",37],["T_WHITESPACE"," ",37],["T_STRING","afterDuplicate",37],"(",["T_STRING","Gallery",37],["T_WHITESPACE"," ",37],["T_VARIABLE","$originalResourceModel",37],",",["T_WHITESPACE"," ",37],["T_ARRAY","array",37],["T_WHITESPACE"," ",37],["T_VARIABLE","$valueIdMap",37],")",["T_WHITESPACE","\n    ",37],"{",["T_WHITESPACE","\n        ",38],["T_VARIABLE","$mediaGalleryEntitiesData",39],["T_WHITESPACE"," ",39],"=",["T_WHITESPACE"," ",39],["T_VARIABLE","$this",39],["T_OBJECT_OPERATOR","->",39],["T_STRING","videoResourceModel",39],["T_OBJECT_OPERATOR","->",39],["T_STRING","loadByIds",39],"(",["T_STRING","array_keys",39],"(",["T_VARIABLE","$valueIdMap",39],")",")",";",["T_WHITESPACE","\n        ",39],["T_FOREACH","foreach",40],["T_WHITESPACE"," ",40],"(",["T_VARIABLE","$mediaGalleryEntitiesData",40],["T_WHITESPACE"," ",40],["T_AS","as",40],["T_WHITESPACE"," ",40],["T_VARIABLE","$row",40],")",["T_WHITESPACE"," ",40],"{",["T_WHITESPACE","\n            ",40],["T_VARIABLE","$row",41],"[",["T_CONSTANT_ENCAPSED_STRING","'value_id'",41],"]",["T_WHITESPACE"," ",41],"=",["T_WHITESPACE"," ",41],["T_VARIABLE","$valueIdMap",41],"[",["T_VARIABLE","$row",41],"[",["T_CONSTANT_ENCAPSED_STRING","'value_id'",41],"]","]",";",["T_WHITESPACE","\n            ",41],["T_VARIABLE","$this",42],["T_OBJECT_OPERATOR","->",42],["T_STRING","videoResourceModel",42],["T_OBJECT_OPERATOR","->",42],["T_STRING","insertOnDuplicate",42],"(",["T_VARIABLE","$row",42],")",";",["T_WHITESPACE","\n        ",42],"}",["T_WHITESPACE","\n\n        ",43],["T_RETURN","return",45],["T_WHITESPACE"," ",45],["T_VARIABLE","$valueIdMap",45],";",["T_WHITESPACE","\n    ",45],"}",["T_WHITESPACE","\n\n    ",46],["T_DOC_COMMENT","\/**\n     * @param Gallery $originalResourceModel\n     * @param Select $select\n     * @return Select\n     *\/",48],["T_WHITESPACE","\n    ",52],["T_PUBLIC","public",53],["T_WHITESPACE"," ",53],["T_FUNCTION","function",53],["T_WHITESPACE"," ",53],["T_STRING","afterCreateBatchBaseSelect",53],"(",["T_STRING","Gallery",53],["T_WHITESPACE"," ",53],["T_VARIABLE","$originalResourceModel",53],",",["T_WHITESPACE"," ",53],["T_STRING","Select",53],["T_WHITESPACE"," ",53],["T_VARIABLE","$select",53],")",["T_WHITESPACE","\n    ",53],"{",["T_WHITESPACE","\n        ",54],["T_VARIABLE","$select",55],["T_WHITESPACE"," ",55],"=",["T_WHITESPACE"," ",55],["T_VARIABLE","$select",55],["T_OBJECT_OPERATOR","->",55],["T_STRING","joinLeft",55],"(",["T_WHITESPACE","\n            ",55],"[",["T_CONSTANT_ENCAPSED_STRING","'value_video'",56],["T_WHITESPACE"," ",56],["T_DOUBLE_ARROW","=>",56],["T_WHITESPACE"," ",56],["T_VARIABLE","$originalResourceModel",56],["T_OBJECT_OPERATOR","->",56],["T_STRING","getTable",56],"(",["T_STRING","InstallSchema",56],["T_DOUBLE_COLON","::",56],["T_STRING","GALLERY_VALUE_VIDEO_TABLE",56],")","]",",",["T_WHITESPACE","\n            ",56],["T_STRING","implode",57],"(",["T_WHITESPACE","\n                ",57],["T_CONSTANT_ENCAPSED_STRING","' AND '",58],",",["T_WHITESPACE","\n                ",58],"[",["T_WHITESPACE","\n                    ",59],["T_CONSTANT_ENCAPSED_STRING","'value.value_id = value_video.value_id'",60],",",["T_WHITESPACE","\n                    ",60],["T_CONSTANT_ENCAPSED_STRING","'value.store_id = value_video.store_id'",61],",",["T_WHITESPACE","\n                ",61],"]",["T_WHITESPACE","\n            ",62],")",",",["T_WHITESPACE","\n            ",63],"[",["T_WHITESPACE","\n                ",64],["T_CONSTANT_ENCAPSED_STRING","'video_provider'",65],["T_WHITESPACE"," ",65],["T_DOUBLE_ARROW","=>",65],["T_WHITESPACE"," ",65],["T_CONSTANT_ENCAPSED_STRING","'provider'",65],",",["T_WHITESPACE","\n                ",65],["T_CONSTANT_ENCAPSED_STRING","'video_url'",66],["T_WHITESPACE"," ",66],["T_DOUBLE_ARROW","=>",66],["T_WHITESPACE"," ",66],["T_CONSTANT_ENCAPSED_STRING","'url'",66],",",["T_WHITESPACE","\n                ",66],["T_CONSTANT_ENCAPSED_STRING","'video_title'",67],["T_WHITESPACE"," ",67],["T_DOUBLE_ARROW","=>",67],["T_WHITESPACE"," ",67],["T_CONSTANT_ENCAPSED_STRING","'title'",67],",",["T_WHITESPACE","\n                ",67],["T_CONSTANT_ENCAPSED_STRING","'video_description'",68],["T_WHITESPACE"," ",68],["T_DOUBLE_ARROW","=>",68],["T_WHITESPACE"," ",68],["T_CONSTANT_ENCAPSED_STRING","'description'",68],",",["T_WHITESPACE","\n                ",68],["T_CONSTANT_ENCAPSED_STRING","'video_metadata'",69],["T_WHITESPACE"," ",69],["T_DOUBLE_ARROW","=>",69],["T_WHITESPACE"," ",69],["T_CONSTANT_ENCAPSED_STRING","'metadata'",69],["T_WHITESPACE","\n            ",69],"]",["T_WHITESPACE","\n        ",70],")",["T_OBJECT_OPERATOR","->",71],["T_STRING","joinLeft",71],"(",["T_WHITESPACE","\n            ",71],"[",["T_CONSTANT_ENCAPSED_STRING","'default_value_video'",72],["T_WHITESPACE"," ",72],["T_DOUBLE_ARROW","=>",72],["T_WHITESPACE"," ",72],["T_VARIABLE","$originalResourceModel",72],["T_OBJECT_OPERATOR","->",72],["T_STRING","getTable",72],"(",["T_STRING","InstallSchema",72],["T_DOUBLE_COLON","::",72],["T_STRING","GALLERY_VALUE_VIDEO_TABLE",72],")","]",",",["T_WHITESPACE","\n            ",72],["T_STRING","implode",73],"(",["T_WHITESPACE","\n                ",73],["T_CONSTANT_ENCAPSED_STRING","' AND '",74],",",["T_WHITESPACE","\n                ",74],"[",["T_WHITESPACE","\n                    ",75],["T_CONSTANT_ENCAPSED_STRING","'default_value.value_id = default_value_video.value_id'",76],",",["T_WHITESPACE","\n                    ",76],["T_CONSTANT_ENCAPSED_STRING","'default_value.store_id = default_value_video.store_id'",77],",",["T_WHITESPACE","\n                ",77],"]",["T_WHITESPACE","\n            ",78],")",",",["T_WHITESPACE","\n            ",79],"[",["T_WHITESPACE","\n                ",80],["T_CONSTANT_ENCAPSED_STRING","'video_provider_default'",81],["T_WHITESPACE"," ",81],["T_DOUBLE_ARROW","=>",81],["T_WHITESPACE"," ",81],["T_CONSTANT_ENCAPSED_STRING","'provider'",81],",",["T_WHITESPACE","\n                ",81],["T_CONSTANT_ENCAPSED_STRING","'video_url_default'",82],["T_WHITESPACE"," ",82],["T_DOUBLE_ARROW","=>",82],["T_WHITESPACE"," ",82],["T_CONSTANT_ENCAPSED_STRING","'url'",82],",",["T_WHITESPACE","\n                ",82],["T_CONSTANT_ENCAPSED_STRING","'video_title_default'",83],["T_WHITESPACE"," ",83],["T_DOUBLE_ARROW","=>",83],["T_WHITESPACE"," ",83],["T_CONSTANT_ENCAPSED_STRING","'title'",83],",",["T_WHITESPACE","\n                ",83],["T_CONSTANT_ENCAPSED_STRING","'video_description_default'",84],["T_WHITESPACE"," ",84],["T_DOUBLE_ARROW","=>",84],["T_WHITESPACE"," ",84],["T_CONSTANT_ENCAPSED_STRING","'description'",84],",",["T_WHITESPACE","\n                ",84],["T_CONSTANT_ENCAPSED_STRING","'video_metadata_default'",85],["T_WHITESPACE"," ",85],["T_DOUBLE_ARROW","=>",85],["T_WHITESPACE"," ",85],["T_CONSTANT_ENCAPSED_STRING","'metadata'",85],",",["T_WHITESPACE","\n            ",85],"]",["T_WHITESPACE","\n        ",86],")",";",["T_WHITESPACE","\n\n        ",87],["T_RETURN","return",89],["T_WHITESPACE"," ",89],["T_VARIABLE","$select",89],";",["T_WHITESPACE","\n    ",89],"}",["T_WHITESPACE","\n",90],"}",["T_WHITESPACE","\n",91]]
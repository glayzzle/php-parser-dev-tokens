[["T_OPEN_TAG","<?php\n",1],["T_WHITESPACE","\n",2],["T_DOC_COMMENT","\/**\n * Import entity of bundle product type\n *\n * Copyright \u00c2\u00a9 2013-2017 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n *\/",3],["T_WHITESPACE","\n",8],["T_NAMESPACE","namespace",9],["T_WHITESPACE"," ",9],["T_STRING","Magento",9],["T_NS_SEPARATOR","\\",9],["T_STRING","BundleImportExport",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Model",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Import",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Product",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Type",9],";",["T_WHITESPACE","\n\n",9],["T_USE","use",11],["T_WHITESPACE"," ",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Magento",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Bundle",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Model",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Product",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Price",11],["T_WHITESPACE"," ",11],["T_AS","as",11],["T_WHITESPACE"," ",11],["T_STRING","BundlePrice",11],";",["T_WHITESPACE","\n",11],["T_USE","use",12],["T_WHITESPACE"," ",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Magento",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Catalog",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Model",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Product",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Type",12],["T_NS_SEPARATOR","\\",12],["T_STRING","AbstractType",12],";",["T_WHITESPACE","\n\n",12],["T_DOC_COMMENT","\/**\n * Class Bundle\n * @package Magento\\BundleImportExport\\Model\\Import\\Product\\Type\n * @SuppressWarnings(PHPMD.ExcessiveClassComplexity)\n *\/",14],["T_WHITESPACE","\n",18],["T_CLASS","class",19],["T_WHITESPACE"," ",19],["T_STRING","Bundle",19],["T_WHITESPACE"," ",19],["T_EXTENDS","extends",19],["T_WHITESPACE"," ",19],["T_NS_SEPARATOR","\\",19],["T_STRING","Magento",19],["T_NS_SEPARATOR","\\",19],["T_STRING","CatalogImportExport",19],["T_NS_SEPARATOR","\\",19],["T_STRING","Model",19],["T_NS_SEPARATOR","\\",19],["T_STRING","Import",19],["T_NS_SEPARATOR","\\",19],["T_STRING","Product",19],["T_NS_SEPARATOR","\\",19],["T_STRING","Type",19],["T_NS_SEPARATOR","\\",19],["T_STRING","AbstractType",19],["T_WHITESPACE","\n",19],"{",["T_WHITESPACE","\n\n    ",20],["T_DOC_COMMENT","\/**\n     * Delimiter before product option value.\n     *\/",22],["T_WHITESPACE","\n    ",24],["T_CONST","const",25],["T_WHITESPACE"," ",25],["T_STRING","BEFORE_OPTION_VALUE_DELIMITER",25],["T_WHITESPACE"," ",25],"=",["T_WHITESPACE"," ",25],["T_CONSTANT_ENCAPSED_STRING","';'",25],";",["T_WHITESPACE","\n\n    ",25],["T_DOC_COMMENT","\/**\n     * Pair value separator.\n     *\/",27],["T_WHITESPACE","\n    ",29],["T_CONST","const",30],["T_WHITESPACE"," ",30],["T_STRING","PAIR_VALUE_SEPARATOR",30],["T_WHITESPACE"," ",30],"=",["T_WHITESPACE"," ",30],["T_CONSTANT_ENCAPSED_STRING","'='",30],";",["T_WHITESPACE","\n\n    ",30],["T_DOC_COMMENT","\/**\n     * Dynamic value.\n     *\/",32],["T_WHITESPACE","\n    ",34],["T_CONST","const",35],["T_WHITESPACE"," ",35],["T_STRING","VALUE_DYNAMIC",35],["T_WHITESPACE"," ",35],"=",["T_WHITESPACE"," ",35],["T_CONSTANT_ENCAPSED_STRING","'dynamic'",35],";",["T_WHITESPACE","\n\n    ",35],["T_DOC_COMMENT","\/**\n     * Fixed value.\n     *\/",37],["T_WHITESPACE","\n    ",39],["T_CONST","const",40],["T_WHITESPACE"," ",40],["T_STRING","VALUE_FIXED",40],["T_WHITESPACE"," ",40],"=",["T_WHITESPACE"," ",40],["T_CONSTANT_ENCAPSED_STRING","'fixed'",40],";",["T_WHITESPACE","\n\n    ",40],["T_DOC_COMMENT","\/**\n     * Not fixed dynamic attribute.\n     *\/",42],["T_WHITESPACE","\n    ",44],["T_CONST","const",45],["T_WHITESPACE"," ",45],["T_STRING","NOT_FIXED_DYNAMIC_ATTRIBUTE",45],["T_WHITESPACE"," ",45],"=",["T_WHITESPACE"," ",45],["T_CONSTANT_ENCAPSED_STRING","'price_view'",45],";",["T_WHITESPACE","\n\n    ",45],["T_DOC_COMMENT","\/**\n     * Selection price type fixed.\n     *\/",47],["T_WHITESPACE","\n    ",49],["T_CONST","const",50],["T_WHITESPACE"," ",50],["T_STRING","SELECTION_PRICE_TYPE_FIXED",50],["T_WHITESPACE"," ",50],"=",["T_WHITESPACE"," ",50],["T_LNUMBER","0",50],";",["T_WHITESPACE","\n\n    ",50],["T_DOC_COMMENT","\/**\n     * Selection price type percent.\n     *\/",52],["T_WHITESPACE","\n    ",54],["T_CONST","const",55],["T_WHITESPACE"," ",55],["T_STRING","SELECTION_PRICE_TYPE_PERCENT",55],["T_WHITESPACE"," ",55],"=",["T_WHITESPACE"," ",55],["T_LNUMBER","1",55],";",["T_WHITESPACE","\n\n    ",55],["T_DOC_COMMENT","\/**\n     * Array of cached options.\n     *\n     * @var array\n     *\/",57],["T_WHITESPACE","\n    ",61],["T_PROTECTED","protected",62],["T_WHITESPACE"," ",62],["T_VARIABLE","$_cachedOptions",62],["T_WHITESPACE"," ",62],"=",["T_WHITESPACE"," ",62],"[","]",";",["T_WHITESPACE","\n\n    ",62],["T_DOC_COMMENT","\/**\n     * Array of cached skus.\n     *\n     * @var array\n     *\/",64],["T_WHITESPACE","\n    ",68],["T_PROTECTED","protected",69],["T_WHITESPACE"," ",69],["T_VARIABLE","$_cachedSkus",69],["T_WHITESPACE"," ",69],"=",["T_WHITESPACE"," ",69],"[","]",";",["T_WHITESPACE","\n\n    ",69],["T_DOC_COMMENT","\/**\n     * Mapping array between cached skus and products.\n     *\n     * @var array\n     *\/",71],["T_WHITESPACE","\n    ",75],["T_PROTECTED","protected",76],["T_WHITESPACE"," ",76],["T_VARIABLE","$_cachedSkuToProducts",76],["T_WHITESPACE"," ",76],"=",["T_WHITESPACE"," ",76],"[","]",";",["T_WHITESPACE","\n\n    ",76],["T_DOC_COMMENT","\/**\n     * Array of queries selecting cached options.\n     *\n     * @var array\n     *\/",78],["T_WHITESPACE","\n    ",82],["T_PROTECTED","protected",83],["T_WHITESPACE"," ",83],["T_VARIABLE","$_cachedOptionSelectQuery",83],["T_WHITESPACE"," ",83],"=",["T_WHITESPACE"," ",83],"[","]",";",["T_WHITESPACE","\n\n    ",83],["T_DOC_COMMENT","\/**\n     * Column names that holds values with particular meaning.\n     *\n     * @var string[]\n     *\/",85],["T_WHITESPACE","\n    ",89],["T_PROTECTED","protected",90],["T_WHITESPACE"," ",90],["T_VARIABLE","$_specialAttributes",90],["T_WHITESPACE"," ",90],"=",["T_WHITESPACE"," ",90],"[",["T_WHITESPACE","\n        ",90],["T_CONSTANT_ENCAPSED_STRING","'price_type'",91],",",["T_WHITESPACE","\n        ",91],["T_CONSTANT_ENCAPSED_STRING","'weight_type'",92],",",["T_WHITESPACE","\n        ",92],["T_CONSTANT_ENCAPSED_STRING","'sku_type'",93],",",["T_WHITESPACE","\n    ",93],"]",";",["T_WHITESPACE","\n\n    ",94],["T_DOC_COMMENT","\/**\n     * Custom fields mapping.\n     *\n     * @inherited\n     *\/",96],["T_WHITESPACE","\n    ",100],["T_PROTECTED","protected",101],["T_WHITESPACE"," ",101],["T_VARIABLE","$_customFieldsMapping",101],["T_WHITESPACE"," ",101],"=",["T_WHITESPACE"," ",101],"[",["T_WHITESPACE","\n        ",101],["T_CONSTANT_ENCAPSED_STRING","'price_type'",102],["T_WHITESPACE"," ",102],["T_DOUBLE_ARROW","=>",102],["T_WHITESPACE"," ",102],["T_CONSTANT_ENCAPSED_STRING","'bundle_price_type'",102],",",["T_WHITESPACE","\n        ",102],["T_CONSTANT_ENCAPSED_STRING","'shipment_type'",103],["T_WHITESPACE"," ",103],["T_DOUBLE_ARROW","=>",103],["T_WHITESPACE"," ",103],["T_CONSTANT_ENCAPSED_STRING","'bundle_shipment_type'",103],",",["T_WHITESPACE","\n        ",103],["T_CONSTANT_ENCAPSED_STRING","'price_view'",104],["T_WHITESPACE"," ",104],["T_DOUBLE_ARROW","=>",104],["T_WHITESPACE"," ",104],["T_CONSTANT_ENCAPSED_STRING","'bundle_price_view'",104],",",["T_WHITESPACE","\n        ",104],["T_CONSTANT_ENCAPSED_STRING","'weight_type'",105],["T_WHITESPACE"," ",105],["T_DOUBLE_ARROW","=>",105],["T_WHITESPACE"," ",105],["T_CONSTANT_ENCAPSED_STRING","'bundle_weight_type'",105],",",["T_WHITESPACE","\n        ",105],["T_CONSTANT_ENCAPSED_STRING","'sku_type'",106],["T_WHITESPACE"," ",106],["T_DOUBLE_ARROW","=>",106],["T_WHITESPACE"," ",106],["T_CONSTANT_ENCAPSED_STRING","'bundle_sku_type'",106],",",["T_WHITESPACE","\n    ",106],"]",";",["T_WHITESPACE","\n\n    ",107],["T_DOC_COMMENT","\/**\n     * Bundle field mapping.\n     *\n     * @var array\n     *\/",109],["T_WHITESPACE","\n    ",113],["T_PROTECTED","protected",114],["T_WHITESPACE"," ",114],["T_VARIABLE","$_bundleFieldMapping",114],["T_WHITESPACE"," ",114],"=",["T_WHITESPACE"," ",114],"[",["T_WHITESPACE","\n        ",114],["T_CONSTANT_ENCAPSED_STRING","'is_default'",115],["T_WHITESPACE"," ",115],["T_DOUBLE_ARROW","=>",115],["T_WHITESPACE"," ",115],["T_CONSTANT_ENCAPSED_STRING","'default'",115],",",["T_WHITESPACE","\n        ",115],["T_CONSTANT_ENCAPSED_STRING","'selection_price_value'",116],["T_WHITESPACE"," ",116],["T_DOUBLE_ARROW","=>",116],["T_WHITESPACE"," ",116],["T_CONSTANT_ENCAPSED_STRING","'price'",116],",",["T_WHITESPACE","\n        ",116],["T_CONSTANT_ENCAPSED_STRING","'selection_qty'",117],["T_WHITESPACE"," ",117],["T_DOUBLE_ARROW","=>",117],["T_WHITESPACE"," ",117],["T_CONSTANT_ENCAPSED_STRING","'default_qty'",117],",",["T_WHITESPACE","\n    ",117],"]",";",["T_WHITESPACE","\n\n    ",118],["T_DOC_COMMENT","\/**\n     * Option type mapping.\n     *\n     * @var array\n     *\/",120],["T_WHITESPACE","\n    ",124],["T_PROTECTED","protected",125],["T_WHITESPACE"," ",125],["T_VARIABLE","$_optionTypeMapping",125],["T_WHITESPACE"," ",125],"=",["T_WHITESPACE"," ",125],"[",["T_WHITESPACE","\n        ",125],["T_CONSTANT_ENCAPSED_STRING","'dropdown'",126],["T_WHITESPACE"," ",126],["T_DOUBLE_ARROW","=>",126],["T_WHITESPACE"," ",126],["T_CONSTANT_ENCAPSED_STRING","'select'",126],",",["T_WHITESPACE","\n        ",126],["T_CONSTANT_ENCAPSED_STRING","'radiobutton'",127],["T_WHITESPACE"," ",127],["T_DOUBLE_ARROW","=>",127],["T_WHITESPACE"," ",127],["T_CONSTANT_ENCAPSED_STRING","'radio'",127],",",["T_WHITESPACE","\n        ",127],["T_CONSTANT_ENCAPSED_STRING","'checkbox'",128],["T_WHITESPACE","  ",128],["T_DOUBLE_ARROW","=>",128],["T_WHITESPACE"," ",128],["T_CONSTANT_ENCAPSED_STRING","'checkbox'",128],",",["T_WHITESPACE","\n        ",128],["T_CONSTANT_ENCAPSED_STRING","'multiselect'",129],["T_WHITESPACE"," ",129],["T_DOUBLE_ARROW","=>",129],["T_WHITESPACE"," ",129],["T_CONSTANT_ENCAPSED_STRING","'multi'",129],",",["T_WHITESPACE","\n    ",129],"]",";",["T_WHITESPACE","\n\n    ",130],["T_DOC_COMMENT","\/**\n     * Parse selections.\n     *\n     * @param array $rowData\n     * @param int $entityId\n     *\n     * @return array\n     *\/",132],["T_WHITESPACE","\n    ",139],["T_PROTECTED","protected",140],["T_WHITESPACE"," ",140],["T_FUNCTION","function",140],["T_WHITESPACE"," ",140],["T_STRING","parseSelections",140],"(",["T_VARIABLE","$rowData",140],",",["T_WHITESPACE"," ",140],["T_VARIABLE","$entityId",140],")",["T_WHITESPACE","\n    ",140],"{",["T_WHITESPACE","\n        ",141],["T_VARIABLE","$rowData",142],"[",["T_CONSTANT_ENCAPSED_STRING","'bundle_values'",142],"]",["T_WHITESPACE"," ",142],"=",["T_WHITESPACE"," ",142],["T_STRING","str_replace",142],"(",["T_WHITESPACE","\n            ",142],["T_STRING","self",143],["T_DOUBLE_COLON","::",143],["T_STRING","BEFORE_OPTION_VALUE_DELIMITER",143],",",["T_WHITESPACE","\n            ",143],["T_VARIABLE","$this",144],["T_OBJECT_OPERATOR","->",144],["T_STRING","_entityModel",144],["T_OBJECT_OPERATOR","->",144],["T_STRING","getMultipleValueSeparator",144],"(",")",",",["T_WHITESPACE","\n            ",144],["T_VARIABLE","$rowData",145],"[",["T_CONSTANT_ENCAPSED_STRING","'bundle_values'",145],"]",["T_WHITESPACE","\n        ",145],")",";",["T_WHITESPACE","\n        ",146],["T_VARIABLE","$selections",147],["T_WHITESPACE"," ",147],"=",["T_WHITESPACE"," ",147],["T_STRING","explode",147],"(",["T_WHITESPACE","\n            ",147],["T_NS_SEPARATOR","\\",148],["T_STRING","Magento",148],["T_NS_SEPARATOR","\\",148],["T_STRING","CatalogImportExport",148],["T_NS_SEPARATOR","\\",148],["T_STRING","Model",148],["T_NS_SEPARATOR","\\",148],["T_STRING","Import",148],["T_NS_SEPARATOR","\\",148],["T_STRING","Product",148],["T_DOUBLE_COLON","::",148],["T_STRING","PSEUDO_MULTI_LINE_SEPARATOR",148],",",["T_WHITESPACE","\n            ",148],["T_VARIABLE","$rowData",149],"[",["T_CONSTANT_ENCAPSED_STRING","'bundle_values'",149],"]",["T_WHITESPACE","\n        ",149],")",";",["T_WHITESPACE","\n        ",150],["T_FOREACH","foreach",151],["T_WHITESPACE"," ",151],"(",["T_VARIABLE","$selections",151],["T_WHITESPACE"," ",151],["T_AS","as",151],["T_WHITESPACE"," ",151],["T_VARIABLE","$selection",151],")",["T_WHITESPACE"," ",151],"{",["T_WHITESPACE","\n            ",151],["T_VARIABLE","$values",152],["T_WHITESPACE"," ",152],"=",["T_WHITESPACE"," ",152],["T_STRING","explode",152],"(",["T_VARIABLE","$this",152],["T_OBJECT_OPERATOR","->",152],["T_STRING","_entityModel",152],["T_OBJECT_OPERATOR","->",152],["T_STRING","getMultipleValueSeparator",152],"(",")",",",["T_WHITESPACE"," ",152],["T_VARIABLE","$selection",152],")",";",["T_WHITESPACE","\n            ",152],["T_VARIABLE","$option",153],["T_WHITESPACE"," ",153],"=",["T_WHITESPACE"," ",153],["T_VARIABLE","$this",153],["T_OBJECT_OPERATOR","->",153],["T_STRING","parseOption",153],"(",["T_VARIABLE","$values",153],")",";",["T_WHITESPACE","\n            ",153],["T_IF","if",154],["T_WHITESPACE"," ",154],"(",["T_ISSET","isset",154],"(",["T_VARIABLE","$option",154],"[",["T_CONSTANT_ENCAPSED_STRING","'sku'",154],"]",")",["T_WHITESPACE"," ",154],["T_BOOLEAN_AND","&&",154],["T_WHITESPACE"," ",154],["T_ISSET","isset",154],"(",["T_VARIABLE","$option",154],"[",["T_CONSTANT_ENCAPSED_STRING","'name'",154],"]",")",")",["T_WHITESPACE"," ",154],"{",["T_WHITESPACE","\n                ",154],["T_IF","if",155],["T_WHITESPACE"," ",155],"(","!",["T_ISSET","isset",155],"(",["T_VARIABLE","$this",155],["T_OBJECT_OPERATOR","->",155],["T_STRING","_cachedOptions",155],"[",["T_VARIABLE","$entityId",155],"]",")",")",["T_WHITESPACE"," ",155],"{",["T_WHITESPACE","\n                    ",155],["T_VARIABLE","$this",156],["T_OBJECT_OPERATOR","->",156],["T_STRING","_cachedOptions",156],"[",["T_VARIABLE","$entityId",156],"]",["T_WHITESPACE"," ",156],"=",["T_WHITESPACE"," ",156],"[","]",";",["T_WHITESPACE","\n                ",156],"}",["T_WHITESPACE","\n                ",157],["T_VARIABLE","$this",158],["T_OBJECT_OPERATOR","->",158],["T_STRING","_cachedSkus",158],"[","]",["T_WHITESPACE"," ",158],"=",["T_WHITESPACE"," ",158],["T_VARIABLE","$option",158],"[",["T_CONSTANT_ENCAPSED_STRING","'sku'",158],"]",";",["T_WHITESPACE","\n                ",158],["T_IF","if",159],["T_WHITESPACE"," ",159],"(","!",["T_ISSET","isset",159],"(",["T_VARIABLE","$this",159],["T_OBJECT_OPERATOR","->",159],["T_STRING","_cachedOptions",159],"[",["T_VARIABLE","$entityId",159],"]","[",["T_VARIABLE","$option",159],"[",["T_CONSTANT_ENCAPSED_STRING","'name'",159],"]","]",")",")",["T_WHITESPACE"," ",159],"{",["T_WHITESPACE","\n                    ",159],["T_VARIABLE","$this",160],["T_OBJECT_OPERATOR","->",160],["T_STRING","_cachedOptions",160],"[",["T_VARIABLE","$entityId",160],"]","[",["T_VARIABLE","$option",160],"[",["T_CONSTANT_ENCAPSED_STRING","'name'",160],"]","]",["T_WHITESPACE"," ",160],"=",["T_WHITESPACE"," ",160],"[","]",";",["T_WHITESPACE","\n                    ",160],["T_VARIABLE","$this",161],["T_OBJECT_OPERATOR","->",161],["T_STRING","_cachedOptions",161],"[",["T_VARIABLE","$entityId",161],"]","[",["T_VARIABLE","$option",161],"[",["T_CONSTANT_ENCAPSED_STRING","'name'",161],"]","]",["T_WHITESPACE"," ",161],"=",["T_WHITESPACE"," ",161],["T_VARIABLE","$option",161],";",["T_WHITESPACE","\n                    ",161],["T_VARIABLE","$this",162],["T_OBJECT_OPERATOR","->",162],["T_STRING","_cachedOptions",162],"[",["T_VARIABLE","$entityId",162],"]","[",["T_VARIABLE","$option",162],"[",["T_CONSTANT_ENCAPSED_STRING","'name'",162],"]","]","[",["T_CONSTANT_ENCAPSED_STRING","'selections'",162],"]",["T_WHITESPACE"," ",162],"=",["T_WHITESPACE"," ",162],"[","]",";",["T_WHITESPACE","\n                ",162],"}",["T_WHITESPACE","\n                ",163],["T_VARIABLE","$this",164],["T_OBJECT_OPERATOR","->",164],["T_STRING","_cachedOptions",164],"[",["T_VARIABLE","$entityId",164],"]","[",["T_VARIABLE","$option",164],"[",["T_CONSTANT_ENCAPSED_STRING","'name'",164],"]","]","[",["T_CONSTANT_ENCAPSED_STRING","'selections'",164],"]","[","]",["T_WHITESPACE"," ",164],"=",["T_WHITESPACE"," ",164],["T_VARIABLE","$option",164],";",["T_WHITESPACE","\n                ",164],["T_VARIABLE","$this",165],["T_OBJECT_OPERATOR","->",165],["T_STRING","_cachedOptionSelectQuery",165],"[","]",["T_WHITESPACE"," ",165],"=",["T_WHITESPACE","\n                    ",165],["T_VARIABLE","$this",166],["T_OBJECT_OPERATOR","->",166],["T_STRING","connection",166],["T_OBJECT_OPERATOR","->",166],["T_STRING","quoteInto",166],"(",["T_WHITESPACE","\n                        ",166],["T_CONSTANT_ENCAPSED_STRING","'(parent_id = '",167],["T_WHITESPACE"," ",167],".",["T_WHITESPACE"," ",167],["T_INT_CAST","(int)",167],["T_VARIABLE","$entityId",167],["T_WHITESPACE"," ",167],".",["T_WHITESPACE"," ",167],["T_CONSTANT_ENCAPSED_STRING","' AND title = ?)'",167],",",["T_WHITESPACE","\n                        ",167],["T_VARIABLE","$option",168],"[",["T_CONSTANT_ENCAPSED_STRING","'name'",168],"]",["T_WHITESPACE","\n                    ",168],")",";",["T_WHITESPACE","\n            ",169],"}",["T_WHITESPACE","\n        ",170],"}",["T_WHITESPACE","\n        ",171],["T_RETURN","return",172],["T_WHITESPACE"," ",172],["T_VARIABLE","$selections",172],";",["T_WHITESPACE","\n    ",172],"}",["T_WHITESPACE","\n\n    ",173],["T_DOC_COMMENT","\/**\n     * Parse the option.\n     *\n     * @param array $values\n     *\n     * @return array\n     *\/",175],["T_WHITESPACE","\n    ",181],["T_PROTECTED","protected",182],["T_WHITESPACE"," ",182],["T_FUNCTION","function",182],["T_WHITESPACE"," ",182],["T_STRING","parseOption",182],"(",["T_VARIABLE","$values",182],")",["T_WHITESPACE","\n    ",182],"{",["T_WHITESPACE","\n        ",183],["T_VARIABLE","$option",184],["T_WHITESPACE"," ",184],"=",["T_WHITESPACE"," ",184],"[","]",";",["T_WHITESPACE","\n        ",184],["T_FOREACH","foreach",185],["T_WHITESPACE"," ",185],"(",["T_VARIABLE","$values",185],["T_WHITESPACE"," ",185],["T_AS","as",185],["T_WHITESPACE"," ",185],["T_VARIABLE","$keyValue",185],")",["T_WHITESPACE"," ",185],"{",["T_WHITESPACE","\n            ",185],["T_VARIABLE","$keyValue",186],["T_WHITESPACE"," ",186],"=",["T_WHITESPACE"," ",186],["T_STRING","trim",186],"(",["T_VARIABLE","$keyValue",186],")",";",["T_WHITESPACE","\n            ",186],["T_IF","if",187],["T_WHITESPACE"," ",187],"(",["T_VARIABLE","$pos",187],["T_WHITESPACE"," ",187],"=",["T_WHITESPACE"," ",187],["T_STRING","strpos",187],"(",["T_VARIABLE","$keyValue",187],",",["T_WHITESPACE"," ",187],["T_STRING","self",187],["T_DOUBLE_COLON","::",187],["T_STRING","PAIR_VALUE_SEPARATOR",187],")",")",["T_WHITESPACE"," ",187],"{",["T_WHITESPACE","\n                ",187],["T_VARIABLE","$key",188],["T_WHITESPACE"," ",188],"=",["T_WHITESPACE"," ",188],["T_STRING","substr",188],"(",["T_VARIABLE","$keyValue",188],",",["T_WHITESPACE"," ",188],["T_LNUMBER","0",188],",",["T_WHITESPACE"," ",188],["T_VARIABLE","$pos",188],")",";",["T_WHITESPACE","\n                ",188],["T_VARIABLE","$value",189],["T_WHITESPACE"," ",189],"=",["T_WHITESPACE"," ",189],["T_STRING","substr",189],"(",["T_VARIABLE","$keyValue",189],",",["T_WHITESPACE"," ",189],["T_VARIABLE","$pos",189],["T_WHITESPACE"," ",189],"+",["T_WHITESPACE"," ",189],["T_LNUMBER","1",189],")",";",["T_WHITESPACE","\n                ",189],["T_IF","if",190],["T_WHITESPACE"," ",190],"(",["T_VARIABLE","$key",190],["T_WHITESPACE"," ",190],["T_IS_EQUAL","==",190],["T_WHITESPACE"," ",190],["T_CONSTANT_ENCAPSED_STRING","'type'",190],")",["T_WHITESPACE"," ",190],"{",["T_WHITESPACE","\n                    ",190],["T_IF","if",191],["T_WHITESPACE"," ",191],"(",["T_ISSET","isset",191],"(",["T_VARIABLE","$this",191],["T_OBJECT_OPERATOR","->",191],["T_STRING","_optionTypeMapping",191],"[",["T_VARIABLE","$value",191],"]",")",")",["T_WHITESPACE"," ",191],"{",["T_WHITESPACE","\n                        ",191],["T_VARIABLE","$value",192],["T_WHITESPACE"," ",192],"=",["T_WHITESPACE"," ",192],["T_VARIABLE","$this",192],["T_OBJECT_OPERATOR","->",192],["T_STRING","_optionTypeMapping",192],"[",["T_VARIABLE","$value",192],"]",";",["T_WHITESPACE","\n                    ",192],"}",["T_WHITESPACE","\n                ",193],"}",["T_WHITESPACE","\n                ",194],["T_VARIABLE","$option",195],"[",["T_VARIABLE","$key",195],"]",["T_WHITESPACE"," ",195],"=",["T_WHITESPACE"," ",195],["T_VARIABLE","$value",195],";",["T_WHITESPACE","\n            ",195],"}",["T_WHITESPACE","\n        ",196],"}",["T_WHITESPACE","\n        ",197],["T_RETURN","return",198],["T_WHITESPACE"," ",198],["T_VARIABLE","$option",198],";",["T_WHITESPACE","\n    ",198],"}",["T_WHITESPACE","\n\n    ",199],["T_DOC_COMMENT","\/**\n     * Populate the option template.\n     *\n     * @param array $option\n     * @param int $entityId\n     * @param int $index\n     * @return array\n     * @SuppressWarnings(PHPMD.NPathComplexity)\n     *\/",201],["T_WHITESPACE","\n    ",209],["T_PROTECTED","protected",210],["T_WHITESPACE"," ",210],["T_FUNCTION","function",210],["T_WHITESPACE"," ",210],["T_STRING","populateOptionTemplate",210],"(",["T_VARIABLE","$option",210],",",["T_WHITESPACE"," ",210],["T_VARIABLE","$entityId",210],",",["T_WHITESPACE"," ",210],["T_VARIABLE","$index",210],["T_WHITESPACE"," ",210],"=",["T_WHITESPACE"," ",210],["T_STRING","null",210],")",["T_WHITESPACE","\n    ",210],"{",["T_WHITESPACE","\n        ",211],["T_VARIABLE","$populatedOption",212],["T_WHITESPACE"," ",212],"=",["T_WHITESPACE"," ",212],"[",["T_WHITESPACE","\n            ",212],["T_CONSTANT_ENCAPSED_STRING","'option_id'",213],["T_WHITESPACE"," ",213],["T_DOUBLE_ARROW","=>",213],["T_WHITESPACE"," ",213],["T_STRING","null",213],",",["T_WHITESPACE","\n            ",213],["T_CONSTANT_ENCAPSED_STRING","'parent_id'",214],["T_WHITESPACE"," ",214],["T_DOUBLE_ARROW","=>",214],["T_WHITESPACE"," ",214],["T_VARIABLE","$entityId",214],",",["T_WHITESPACE","\n            ",214],["T_CONSTANT_ENCAPSED_STRING","'required'",215],["T_WHITESPACE"," ",215],["T_DOUBLE_ARROW","=>",215],["T_WHITESPACE"," ",215],["T_ISSET","isset",215],"(",["T_VARIABLE","$option",215],"[",["T_CONSTANT_ENCAPSED_STRING","'required'",215],"]",")",["T_WHITESPACE"," ",215],"?",["T_WHITESPACE"," ",215],["T_VARIABLE","$option",215],"[",["T_CONSTANT_ENCAPSED_STRING","'required'",215],"]",["T_WHITESPACE"," ",215],":",["T_WHITESPACE"," ",215],["T_LNUMBER","1",215],",",["T_WHITESPACE","\n            ",215],["T_CONSTANT_ENCAPSED_STRING","'position'",216],["T_WHITESPACE"," ",216],["T_DOUBLE_ARROW","=>",216],["T_WHITESPACE"," ",216],"(",["T_VARIABLE","$index",216],["T_WHITESPACE"," ",216],["T_IS_IDENTICAL","===",216],["T_WHITESPACE"," ",216],["T_STRING","null",216],["T_WHITESPACE"," ",216],"?",["T_WHITESPACE"," ",216],["T_LNUMBER","0",216],["T_WHITESPACE"," ",216],":",["T_WHITESPACE"," ",216],["T_VARIABLE","$index",216],")",",",["T_WHITESPACE","\n            ",216],["T_CONSTANT_ENCAPSED_STRING","'type'",217],["T_WHITESPACE"," ",217],["T_DOUBLE_ARROW","=>",217],["T_WHITESPACE"," ",217],["T_ISSET","isset",217],"(",["T_VARIABLE","$option",217],"[",["T_CONSTANT_ENCAPSED_STRING","'type'",217],"]",")",["T_WHITESPACE"," ",217],"?",["T_WHITESPACE"," ",217],["T_VARIABLE","$option",217],"[",["T_CONSTANT_ENCAPSED_STRING","'type'",217],"]",["T_WHITESPACE"," ",217],":",["T_WHITESPACE"," ",217],["T_CONSTANT_ENCAPSED_STRING","'select'",217],",",["T_WHITESPACE","\n        ",217],"]",";",["T_WHITESPACE","\n        ",218],["T_IF","if",219],["T_WHITESPACE"," ",219],"(",["T_ISSET","isset",219],"(",["T_VARIABLE","$option",219],"[",["T_CONSTANT_ENCAPSED_STRING","'option_id'",219],"]",")",")",["T_WHITESPACE"," ",219],"{",["T_WHITESPACE","\n            ",219],["T_VARIABLE","$populatedOption",220],"[",["T_CONSTANT_ENCAPSED_STRING","'option_id'",220],"]",["T_WHITESPACE"," ",220],"=",["T_WHITESPACE"," ",220],["T_VARIABLE","$option",220],"[",["T_CONSTANT_ENCAPSED_STRING","'option_id'",220],"]",";",["T_WHITESPACE","\n        ",220],"}",["T_WHITESPACE","\n        ",221],["T_RETURN","return",222],["T_WHITESPACE"," ",222],["T_VARIABLE","$populatedOption",222],";",["T_WHITESPACE","\n    ",222],"}",["T_WHITESPACE","\n\n    ",223],["T_DOC_COMMENT","\/**\n     * Populate the option value template.\n     *\n     * @param array $option\n     * @param int $optionId\n     * @param int $storeId\n     *\n     * @return array|bool\n     *\/",225],["T_WHITESPACE","\n    ",233],["T_PROTECTED","protected",234],["T_WHITESPACE"," ",234],["T_FUNCTION","function",234],["T_WHITESPACE"," ",234],["T_STRING","populateOptionValueTemplate",234],"(",["T_VARIABLE","$option",234],",",["T_WHITESPACE"," ",234],["T_VARIABLE","$optionId",234],",",["T_WHITESPACE"," ",234],["T_VARIABLE","$storeId",234],["T_WHITESPACE"," ",234],"=",["T_WHITESPACE"," ",234],["T_LNUMBER","0",234],")",["T_WHITESPACE","\n    ",234],"{",["T_WHITESPACE","\n        ",235],["T_IF","if",236],["T_WHITESPACE"," ",236],"(","!",["T_ISSET","isset",236],"(",["T_VARIABLE","$option",236],"[",["T_CONSTANT_ENCAPSED_STRING","'name'",236],"]",")",["T_WHITESPACE"," ",236],["T_BOOLEAN_OR","||",236],["T_WHITESPACE"," ",236],"!",["T_VARIABLE","$optionId",236],")",["T_WHITESPACE"," ",236],"{",["T_WHITESPACE","\n            ",236],["T_RETURN","return",237],["T_WHITESPACE"," ",237],["T_STRING","false",237],";",["T_WHITESPACE","\n        ",237],"}",["T_WHITESPACE","\n        ",238],["T_RETURN","return",239],["T_WHITESPACE"," ",239],"[",["T_WHITESPACE","\n            ",239],["T_CONSTANT_ENCAPSED_STRING","'option_id'",240],["T_WHITESPACE"," ",240],["T_DOUBLE_ARROW","=>",240],["T_WHITESPACE"," ",240],["T_VARIABLE","$optionId",240],",",["T_WHITESPACE","\n            ",240],["T_CONSTANT_ENCAPSED_STRING","'store_id'",241],["T_WHITESPACE"," ",241],["T_DOUBLE_ARROW","=>",241],["T_WHITESPACE"," ",241],["T_VARIABLE","$storeId",241],",",["T_WHITESPACE","\n            ",241],["T_CONSTANT_ENCAPSED_STRING","'title'",242],["T_WHITESPACE"," ",242],["T_DOUBLE_ARROW","=>",242],["T_WHITESPACE"," ",242],["T_VARIABLE","$option",242],"[",["T_CONSTANT_ENCAPSED_STRING","'name'",242],"]",",",["T_WHITESPACE","\n        ",242],"]",";",["T_WHITESPACE","\n    ",243],"}",["T_WHITESPACE","\n\n    ",244],["T_DOC_COMMENT","\/**\n     * Populate the option value template.\n     *\n     * @param array $selection\n     * @param int $optionId\n     * @param int $parentId\n     * @param int $index\n     * @return array\n     * @SuppressWarnings(PHPMD.NPathComplexity)\n     * @SuppressWarnings(PHPMD.CyclomaticComplexity)\n     *\/",246],["T_WHITESPACE","\n    ",256],["T_PROTECTED","protected",257],["T_WHITESPACE"," ",257],["T_FUNCTION","function",257],["T_WHITESPACE"," ",257],["T_STRING","populateSelectionTemplate",257],"(",["T_VARIABLE","$selection",257],",",["T_WHITESPACE"," ",257],["T_VARIABLE","$optionId",257],",",["T_WHITESPACE"," ",257],["T_VARIABLE","$parentId",257],",",["T_WHITESPACE"," ",257],["T_VARIABLE","$index",257],")",["T_WHITESPACE","\n    ",257],"{",["T_WHITESPACE","\n        ",258],["T_IF","if",259],["T_WHITESPACE"," ",259],"(","!",["T_ISSET","isset",259],"(",["T_VARIABLE","$selection",259],"[",["T_CONSTANT_ENCAPSED_STRING","'parent_product_id'",259],"]",")",")",["T_WHITESPACE"," ",259],"{",["T_WHITESPACE","\n            ",259],["T_IF","if",260],["T_WHITESPACE"," ",260],"(","!",["T_ISSET","isset",260],"(",["T_VARIABLE","$this",260],["T_OBJECT_OPERATOR","->",260],["T_STRING","_cachedSkuToProducts",260],"[",["T_VARIABLE","$selection",260],"[",["T_CONSTANT_ENCAPSED_STRING","'sku'",260],"]","]",")",")",["T_WHITESPACE"," ",260],"{",["T_WHITESPACE","\n                ",260],["T_RETURN","return",261],["T_WHITESPACE"," ",261],["T_STRING","false",261],";",["T_WHITESPACE","\n            ",261],"}",["T_WHITESPACE","\n            ",262],["T_VARIABLE","$productId",263],["T_WHITESPACE"," ",263],"=",["T_WHITESPACE"," ",263],["T_VARIABLE","$this",263],["T_OBJECT_OPERATOR","->",263],["T_STRING","_cachedSkuToProducts",263],"[",["T_VARIABLE","$selection",263],"[",["T_CONSTANT_ENCAPSED_STRING","'sku'",263],"]","]",";",["T_WHITESPACE","\n        ",263],"}",["T_WHITESPACE"," ",264],["T_ELSE","else",264],["T_WHITESPACE"," ",264],"{",["T_WHITESPACE","\n            ",264],["T_VARIABLE","$productId",265],["T_WHITESPACE"," ",265],"=",["T_WHITESPACE"," ",265],["T_VARIABLE","$selection",265],"[",["T_CONSTANT_ENCAPSED_STRING","'product_id'",265],"]",";",["T_WHITESPACE","\n        ",265],"}",["T_WHITESPACE","\n        ",266],["T_VARIABLE","$populatedSelection",267],["T_WHITESPACE"," ",267],"=",["T_WHITESPACE"," ",267],"[",["T_WHITESPACE","\n            ",267],["T_CONSTANT_ENCAPSED_STRING","'selection_id'",268],["T_WHITESPACE"," ",268],["T_DOUBLE_ARROW","=>",268],["T_WHITESPACE"," ",268],["T_STRING","null",268],",",["T_WHITESPACE","\n            ",268],["T_CONSTANT_ENCAPSED_STRING","'option_id'",269],["T_WHITESPACE"," ",269],["T_DOUBLE_ARROW","=>",269],["T_WHITESPACE"," ",269],["T_INT_CAST","(int)",269],["T_VARIABLE","$optionId",269],",",["T_WHITESPACE","\n            ",269],["T_CONSTANT_ENCAPSED_STRING","'parent_product_id'",270],["T_WHITESPACE"," ",270],["T_DOUBLE_ARROW","=>",270],["T_WHITESPACE"," ",270],["T_INT_CAST","(int)",270],["T_VARIABLE","$parentId",270],",",["T_WHITESPACE","\n            ",270],["T_CONSTANT_ENCAPSED_STRING","'product_id'",271],["T_WHITESPACE"," ",271],["T_DOUBLE_ARROW","=>",271],["T_WHITESPACE"," ",271],["T_INT_CAST","(int)",271],["T_VARIABLE","$productId",271],",",["T_WHITESPACE","\n            ",271],["T_CONSTANT_ENCAPSED_STRING","'position'",272],["T_WHITESPACE"," ",272],["T_DOUBLE_ARROW","=>",272],["T_WHITESPACE"," ",272],["T_INT_CAST","(int)",272],["T_VARIABLE","$index",272],",",["T_WHITESPACE","\n            ",272],["T_CONSTANT_ENCAPSED_STRING","'is_default'",273],["T_WHITESPACE"," ",273],["T_DOUBLE_ARROW","=>",273],["T_WHITESPACE"," ",273],"(",["T_ISSET","isset",273],"(",["T_VARIABLE","$selection",273],"[",["T_CONSTANT_ENCAPSED_STRING","'default'",273],"]",")",["T_WHITESPACE"," ",273],["T_BOOLEAN_AND","&&",273],["T_WHITESPACE"," ",273],["T_VARIABLE","$selection",273],"[",["T_CONSTANT_ENCAPSED_STRING","'default'",273],"]",")",["T_WHITESPACE"," ",273],"?",["T_WHITESPACE"," ",273],["T_LNUMBER","1",273],["T_WHITESPACE"," ",273],":",["T_WHITESPACE"," ",273],["T_LNUMBER","0",273],",",["T_WHITESPACE","\n            ",273],["T_CONSTANT_ENCAPSED_STRING","'selection_price_type'",274],["T_WHITESPACE"," ",274],["T_DOUBLE_ARROW","=>",274],["T_WHITESPACE"," ",274],"(",["T_ISSET","isset",274],"(",["T_VARIABLE","$selection",274],"[",["T_CONSTANT_ENCAPSED_STRING","'price_type'",274],"]",")",["T_WHITESPACE"," ",274],["T_BOOLEAN_AND","&&",274],["T_WHITESPACE"," ",274],["T_VARIABLE","$selection",274],"[",["T_CONSTANT_ENCAPSED_STRING","'price_type'",274],"]",["T_WHITESPACE"," ",274],["T_IS_EQUAL","==",274],["T_WHITESPACE"," ",274],["T_STRING","self",274],["T_DOUBLE_COLON","::",274],["T_STRING","VALUE_FIXED",274],")",["T_WHITESPACE","\n                ",274],"?",["T_WHITESPACE"," ",275],["T_STRING","self",275],["T_DOUBLE_COLON","::",275],["T_STRING","SELECTION_PRICE_TYPE_FIXED",275],["T_WHITESPACE"," ",275],":",["T_WHITESPACE"," ",275],["T_STRING","self",275],["T_DOUBLE_COLON","::",275],["T_STRING","SELECTION_PRICE_TYPE_PERCENT",275],",",["T_WHITESPACE","\n            ",275],["T_CONSTANT_ENCAPSED_STRING","'selection_price_value'",276],["T_WHITESPACE"," ",276],["T_DOUBLE_ARROW","=>",276],["T_WHITESPACE"," ",276],"(",["T_ISSET","isset",276],"(",["T_VARIABLE","$selection",276],"[",["T_CONSTANT_ENCAPSED_STRING","'price'",276],"]",")",")",["T_WHITESPACE"," ",276],"?",["T_WHITESPACE"," ",276],["T_DOUBLE_CAST","(float)",276],["T_VARIABLE","$selection",276],"[",["T_CONSTANT_ENCAPSED_STRING","'price'",276],"]",["T_WHITESPACE"," ",276],":",["T_WHITESPACE"," ",276],["T_DNUMBER","0.0",276],",",["T_WHITESPACE","\n            ",276],["T_CONSTANT_ENCAPSED_STRING","'selection_qty'",277],["T_WHITESPACE"," ",277],["T_DOUBLE_ARROW","=>",277],["T_WHITESPACE"," ",277],"(",["T_ISSET","isset",277],"(",["T_VARIABLE","$selection",277],"[",["T_CONSTANT_ENCAPSED_STRING","'default_qty'",277],"]",")",")",["T_WHITESPACE"," ",277],"?",["T_WHITESPACE"," ",277],["T_DOUBLE_CAST","(float)",277],["T_VARIABLE","$selection",277],"[",["T_CONSTANT_ENCAPSED_STRING","'default_qty'",277],"]",["T_WHITESPACE"," ",277],":",["T_WHITESPACE"," ",277],["T_DNUMBER","1.0",277],",",["T_WHITESPACE","\n            ",277],["T_CONSTANT_ENCAPSED_STRING","'selection_can_change_qty'",278],["T_WHITESPACE"," ",278],["T_DOUBLE_ARROW","=>",278],["T_WHITESPACE"," ",278],["T_LNUMBER","1",278],",",["T_WHITESPACE","\n        ",278],"]",";",["T_WHITESPACE","\n        ",279],["T_IF","if",280],["T_WHITESPACE"," ",280],"(",["T_ISSET","isset",280],"(",["T_VARIABLE","$selection",280],"[",["T_CONSTANT_ENCAPSED_STRING","'selection_id'",280],"]",")",")",["T_WHITESPACE"," ",280],"{",["T_WHITESPACE","\n            ",280],["T_VARIABLE","$populatedSelection",281],"[",["T_CONSTANT_ENCAPSED_STRING","'selection_id'",281],"]",["T_WHITESPACE"," ",281],"=",["T_WHITESPACE"," ",281],["T_VARIABLE","$selection",281],"[",["T_CONSTANT_ENCAPSED_STRING","'selection_id'",281],"]",";",["T_WHITESPACE","\n        ",281],"}",["T_WHITESPACE","\n        ",282],["T_RETURN","return",283],["T_WHITESPACE"," ",283],["T_VARIABLE","$populatedSelection",283],";",["T_WHITESPACE","\n    ",283],"}",["T_WHITESPACE","\n\n    ",284],["T_DOC_COMMENT","\/**\n     * Retrieve mapping between skus and products.\n     *\n     * @return \\Magento\\CatalogImportExport\\Model\\Import\\Product\\Type\\AbstractType\n     *\/",286],["T_WHITESPACE","\n    ",290],["T_PROTECTED","protected",291],["T_WHITESPACE"," ",291],["T_FUNCTION","function",291],["T_WHITESPACE"," ",291],["T_STRING","retrieveProducsByCachedSkus",291],"(",")",["T_WHITESPACE","\n    ",291],"{",["T_WHITESPACE","\n        ",292],["T_VARIABLE","$this",293],["T_OBJECT_OPERATOR","->",293],["T_STRING","_cachedSkuToProducts",293],["T_WHITESPACE"," ",293],"=",["T_WHITESPACE"," ",293],["T_VARIABLE","$this",293],["T_OBJECT_OPERATOR","->",293],["T_STRING","connection",293],["T_OBJECT_OPERATOR","->",293],["T_STRING","fetchPairs",293],"(",["T_WHITESPACE","\n            ",293],["T_VARIABLE","$this",294],["T_OBJECT_OPERATOR","->",294],["T_STRING","connection",294],["T_OBJECT_OPERATOR","->",294],["T_STRING","select",294],"(",")",["T_OBJECT_OPERATOR","->",294],["T_STRING","from",294],"(",["T_WHITESPACE","\n                ",294],["T_VARIABLE","$this",295],["T_OBJECT_OPERATOR","->",295],["T_STRING","_resource",295],["T_OBJECT_OPERATOR","->",295],["T_STRING","getTableName",295],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog_product_entity'",295],")",",",["T_WHITESPACE","\n                ",295],"[",["T_CONSTANT_ENCAPSED_STRING","'sku'",296],",",["T_WHITESPACE"," ",296],["T_CONSTANT_ENCAPSED_STRING","'entity_id'",296],"]",["T_WHITESPACE","\n            ",296],")",["T_OBJECT_OPERATOR","->",297],["T_STRING","where",297],"(",["T_WHITESPACE","\n                ",297],["T_CONSTANT_ENCAPSED_STRING","'sku IN (?)'",298],",",["T_WHITESPACE","\n                ",298],["T_VARIABLE","$this",299],["T_OBJECT_OPERATOR","->",299],["T_STRING","_cachedSkus",299],["T_WHITESPACE","\n            ",299],")",["T_WHITESPACE","\n        ",300],")",";",["T_WHITESPACE","\n        ",301],["T_RETURN","return",302],["T_WHITESPACE"," ",302],["T_VARIABLE","$this",302],";",["T_WHITESPACE","\n    ",302],"}",["T_WHITESPACE","\n\n    ",303],["T_DOC_COMMENT","\/**\n     * Save product type specific data.\n     *\n     * @return \\Magento\\CatalogImportExport\\Model\\Import\\Product\\Type\\AbstractType\n     *\/",305],["T_WHITESPACE","\n    ",309],["T_PUBLIC","public",310],["T_WHITESPACE"," ",310],["T_FUNCTION","function",310],["T_WHITESPACE"," ",310],["T_STRING","saveData",310],"(",")",["T_WHITESPACE","\n    ",310],"{",["T_WHITESPACE","\n        ",311],["T_IF","if",312],["T_WHITESPACE"," ",312],"(",["T_VARIABLE","$this",312],["T_OBJECT_OPERATOR","->",312],["T_STRING","_entityModel",312],["T_OBJECT_OPERATOR","->",312],["T_STRING","getBehavior",312],"(",")",["T_WHITESPACE"," ",312],["T_IS_EQUAL","==",312],["T_WHITESPACE"," ",312],["T_NS_SEPARATOR","\\",312],["T_STRING","Magento",312],["T_NS_SEPARATOR","\\",312],["T_STRING","ImportExport",312],["T_NS_SEPARATOR","\\",312],["T_STRING","Model",312],["T_NS_SEPARATOR","\\",312],["T_STRING","Import",312],["T_DOUBLE_COLON","::",312],["T_STRING","BEHAVIOR_DELETE",312],")",["T_WHITESPACE"," ",312],"{",["T_WHITESPACE","\n            ",312],["T_VARIABLE","$productIds",313],["T_WHITESPACE"," ",313],"=",["T_WHITESPACE"," ",313],"[","]",";",["T_WHITESPACE","\n            ",313],["T_VARIABLE","$newSku",314],["T_WHITESPACE"," ",314],"=",["T_WHITESPACE"," ",314],["T_VARIABLE","$this",314],["T_OBJECT_OPERATOR","->",314],["T_STRING","_entityModel",314],["T_OBJECT_OPERATOR","->",314],["T_STRING","getNewSku",314],"(",")",";",["T_WHITESPACE","\n            ",314],["T_WHILE","while",315],["T_WHITESPACE"," ",315],"(",["T_VARIABLE","$bunch",315],["T_WHITESPACE"," ",315],"=",["T_WHITESPACE"," ",315],["T_VARIABLE","$this",315],["T_OBJECT_OPERATOR","->",315],["T_STRING","_entityModel",315],["T_OBJECT_OPERATOR","->",315],["T_STRING","getNextBunch",315],"(",")",")",["T_WHITESPACE"," ",315],"{",["T_WHITESPACE","\n                ",315],["T_FOREACH","foreach",316],["T_WHITESPACE"," ",316],"(",["T_VARIABLE","$bunch",316],["T_WHITESPACE"," ",316],["T_AS","as",316],["T_WHITESPACE"," ",316],["T_VARIABLE","$rowNum",316],["T_WHITESPACE"," ",316],["T_DOUBLE_ARROW","=>",316],["T_WHITESPACE"," ",316],["T_VARIABLE","$rowData",316],")",["T_WHITESPACE"," ",316],"{",["T_WHITESPACE","\n                    ",316],["T_VARIABLE","$productData",317],["T_WHITESPACE"," ",317],"=",["T_WHITESPACE"," ",317],["T_VARIABLE","$newSku",317],"[",["T_VARIABLE","$rowData",317],"[",["T_NS_SEPARATOR","\\",317],["T_STRING","Magento",317],["T_NS_SEPARATOR","\\",317],["T_STRING","CatalogImportExport",317],["T_NS_SEPARATOR","\\",317],["T_STRING","Model",317],["T_NS_SEPARATOR","\\",317],["T_STRING","Import",317],["T_NS_SEPARATOR","\\",317],["T_STRING","Product",317],["T_DOUBLE_COLON","::",317],["T_STRING","COL_SKU",317],"]","]",";",["T_WHITESPACE","\n                    ",317],["T_VARIABLE","$productIds",318],"[","]",["T_WHITESPACE"," ",318],"=",["T_WHITESPACE"," ",318],["T_VARIABLE","$productData",318],"[",["T_VARIABLE","$this",318],["T_OBJECT_OPERATOR","->",318],["T_STRING","getProductEntityLinkField",318],"(",")","]",";",["T_WHITESPACE","\n                ",318],"}",["T_WHITESPACE","\n                ",319],["T_VARIABLE","$this",320],["T_OBJECT_OPERATOR","->",320],["T_STRING","deleteOptionsAndSelections",320],"(",["T_VARIABLE","$productIds",320],")",";",["T_WHITESPACE","\n            ",320],"}",["T_WHITESPACE","\n        ",321],"}",["T_WHITESPACE"," ",322],["T_ELSE","else",322],["T_WHITESPACE"," ",322],"{",["T_WHITESPACE","\n            ",322],["T_VARIABLE","$newSku",323],["T_WHITESPACE"," ",323],"=",["T_WHITESPACE"," ",323],["T_VARIABLE","$this",323],["T_OBJECT_OPERATOR","->",323],["T_STRING","_entityModel",323],["T_OBJECT_OPERATOR","->",323],["T_STRING","getNewSku",323],"(",")",";",["T_WHITESPACE","\n            ",323],["T_WHILE","while",324],["T_WHITESPACE"," ",324],"(",["T_VARIABLE","$bunch",324],["T_WHITESPACE"," ",324],"=",["T_WHITESPACE"," ",324],["T_VARIABLE","$this",324],["T_OBJECT_OPERATOR","->",324],["T_STRING","_entityModel",324],["T_OBJECT_OPERATOR","->",324],["T_STRING","getNextBunch",324],"(",")",")",["T_WHITESPACE"," ",324],"{",["T_WHITESPACE","\n                ",324],["T_FOREACH","foreach",325],["T_WHITESPACE"," ",325],"(",["T_VARIABLE","$bunch",325],["T_WHITESPACE"," ",325],["T_AS","as",325],["T_WHITESPACE"," ",325],["T_VARIABLE","$rowNum",325],["T_WHITESPACE"," ",325],["T_DOUBLE_ARROW","=>",325],["T_WHITESPACE"," ",325],["T_VARIABLE","$rowData",325],")",["T_WHITESPACE"," ",325],"{",["T_WHITESPACE","\n                    ",325],["T_IF","if",326],["T_WHITESPACE"," ",326],"(","!",["T_VARIABLE","$this",326],["T_OBJECT_OPERATOR","->",326],["T_STRING","_entityModel",326],["T_OBJECT_OPERATOR","->",326],["T_STRING","isRowAllowedToImport",326],"(",["T_VARIABLE","$rowData",326],",",["T_WHITESPACE"," ",326],["T_VARIABLE","$rowNum",326],")",")",["T_WHITESPACE"," ",326],"{",["T_WHITESPACE","\n                        ",326],["T_CONTINUE","continue",327],";",["T_WHITESPACE","\n                    ",327],"}",["T_WHITESPACE","\n                    ",328],["T_VARIABLE","$productData",329],["T_WHITESPACE"," ",329],"=",["T_WHITESPACE"," ",329],["T_VARIABLE","$newSku",329],"[",["T_VARIABLE","$rowData",329],"[",["T_NS_SEPARATOR","\\",329],["T_STRING","Magento",329],["T_NS_SEPARATOR","\\",329],["T_STRING","CatalogImportExport",329],["T_NS_SEPARATOR","\\",329],["T_STRING","Model",329],["T_NS_SEPARATOR","\\",329],["T_STRING","Import",329],["T_NS_SEPARATOR","\\",329],["T_STRING","Product",329],["T_DOUBLE_COLON","::",329],["T_STRING","COL_SKU",329],"]","]",";",["T_WHITESPACE","\n                    ",329],["T_IF","if",330],["T_WHITESPACE"," ",330],"(",["T_VARIABLE","$this",330],["T_OBJECT_OPERATOR","->",330],["T_STRING","_type",330],["T_WHITESPACE"," ",330],["T_IS_NOT_EQUAL","!=",330],["T_WHITESPACE"," ",330],["T_VARIABLE","$productData",330],"[",["T_CONSTANT_ENCAPSED_STRING","'type_id'",330],"]",")",["T_WHITESPACE"," ",330],"{",["T_WHITESPACE","\n                        ",330],["T_CONTINUE","continue",331],";",["T_WHITESPACE","\n                    ",331],"}",["T_WHITESPACE","\n                    ",332],["T_VARIABLE","$this",333],["T_OBJECT_OPERATOR","->",333],["T_STRING","parseSelections",333],"(",["T_VARIABLE","$rowData",333],",",["T_WHITESPACE"," ",333],["T_VARIABLE","$productData",333],"[",["T_VARIABLE","$this",333],["T_OBJECT_OPERATOR","->",333],["T_STRING","getProductEntityLinkField",333],"(",")","]",")",";",["T_WHITESPACE","\n                ",333],"}",["T_WHITESPACE","\n                ",334],["T_IF","if",335],["T_WHITESPACE"," ",335],"(","!",["T_EMPTY","empty",335],"(",["T_VARIABLE","$this",335],["T_OBJECT_OPERATOR","->",335],["T_STRING","_cachedOptions",335],")",")",["T_WHITESPACE"," ",335],"{",["T_WHITESPACE","\n                    ",335],["T_VARIABLE","$this",336],["T_OBJECT_OPERATOR","->",336],["T_STRING","retrieveProducsByCachedSkus",336],"(",")",";",["T_WHITESPACE","\n                    ",336],["T_VARIABLE","$this",337],["T_OBJECT_OPERATOR","->",337],["T_STRING","populateExistingOptions",337],"(",")",";",["T_WHITESPACE","\n                    ",337],["T_VARIABLE","$this",338],["T_OBJECT_OPERATOR","->",338],["T_STRING","insertOptions",338],"(",")",";",["T_WHITESPACE","\n                    ",338],["T_VARIABLE","$this",339],["T_OBJECT_OPERATOR","->",339],["T_STRING","insertSelections",339],"(",")",";",["T_WHITESPACE","\n                    ",339],["T_VARIABLE","$this",340],["T_OBJECT_OPERATOR","->",340],["T_STRING","clear",340],"(",")",";",["T_WHITESPACE","\n                ",340],"}",["T_WHITESPACE","\n            ",341],"}",["T_WHITESPACE","\n        ",342],"}",["T_WHITESPACE","\n        ",343],["T_RETURN","return",344],["T_WHITESPACE"," ",344],["T_VARIABLE","$this",344],";",["T_WHITESPACE","\n    ",344],"}",["T_WHITESPACE","\n\n    ",345],["T_DOC_COMMENT","\/**\n     * Check whether the row is valid.\n     *\n     * @param array $rowData\n     * @param int $rowNum\n     * @param bool $isNewProduct\n     * @return bool\n     *\/",347],["T_WHITESPACE","\n    ",354],["T_PUBLIC","public",355],["T_WHITESPACE"," ",355],["T_FUNCTION","function",355],["T_WHITESPACE"," ",355],["T_STRING","isRowValid",355],"(",["T_ARRAY","array",355],["T_WHITESPACE"," ",355],["T_VARIABLE","$rowData",355],",",["T_WHITESPACE"," ",355],["T_VARIABLE","$rowNum",355],",",["T_WHITESPACE"," ",355],["T_VARIABLE","$isNewProduct",355],["T_WHITESPACE"," ",355],"=",["T_WHITESPACE"," ",355],["T_STRING","true",355],")",["T_WHITESPACE","\n    ",355],"{",["T_WHITESPACE","\n        ",356],["T_IF","if",357],["T_WHITESPACE"," ",357],"(",["T_ISSET","isset",357],"(",["T_VARIABLE","$rowData",357],"[",["T_CONSTANT_ENCAPSED_STRING","'bundle_price_type'",357],"]",")",["T_WHITESPACE"," ",357],["T_BOOLEAN_AND","&&",357],["T_WHITESPACE"," ",357],["T_VARIABLE","$rowData",357],"[",["T_CONSTANT_ENCAPSED_STRING","'bundle_price_type'",357],"]",["T_WHITESPACE"," ",357],["T_IS_EQUAL","==",357],["T_WHITESPACE"," ",357],["T_CONSTANT_ENCAPSED_STRING","'dynamic'",357],")",["T_WHITESPACE"," ",357],"{",["T_WHITESPACE","\n            ",357],["T_VARIABLE","$rowData",358],"[",["T_CONSTANT_ENCAPSED_STRING","'price'",358],"]",["T_WHITESPACE"," ",358],"=",["T_WHITESPACE"," ",358],["T_ISSET","isset",358],"(",["T_VARIABLE","$rowData",358],"[",["T_CONSTANT_ENCAPSED_STRING","'price'",358],"]",")",["T_WHITESPACE"," ",358],["T_BOOLEAN_AND","&&",358],["T_WHITESPACE"," ",358],["T_VARIABLE","$rowData",358],"[",["T_CONSTANT_ENCAPSED_STRING","'price'",358],"]",["T_WHITESPACE"," ",358],"?",["T_WHITESPACE"," ",358],["T_VARIABLE","$rowData",358],"[",["T_CONSTANT_ENCAPSED_STRING","'price'",358],"]",["T_WHITESPACE"," ",358],":",["T_WHITESPACE"," ",358],["T_CONSTANT_ENCAPSED_STRING","'0.00'",358],";",["T_WHITESPACE","\n        ",358],"}",["T_WHITESPACE","\n\n        ",359],["T_RETURN","return",361],["T_WHITESPACE"," ",361],["T_STRING","parent",361],["T_DOUBLE_COLON","::",361],["T_STRING","isRowValid",361],"(",["T_VARIABLE","$rowData",361],",",["T_WHITESPACE"," ",361],["T_VARIABLE","$rowNum",361],",",["T_WHITESPACE"," ",361],["T_VARIABLE","$isNewProduct",361],")",";",["T_WHITESPACE","\n    ",361],"}",["T_WHITESPACE","\n\n    ",362],["T_DOC_COMMENT","\/**\n     * Prepare attributes with default value for save.\n     *\n     * @param array $rowData\n     * @param bool $withDefaultValue\n     * @return array\n     *\/",364],["T_WHITESPACE","\n    ",370],["T_PUBLIC","public",371],["T_WHITESPACE"," ",371],["T_FUNCTION","function",371],["T_WHITESPACE"," ",371],["T_STRING","prepareAttributesWithDefaultValueForSave",371],"(",["T_ARRAY","array",371],["T_WHITESPACE"," ",371],["T_VARIABLE","$rowData",371],",",["T_WHITESPACE"," ",371],["T_VARIABLE","$withDefaultValue",371],["T_WHITESPACE"," ",371],"=",["T_WHITESPACE"," ",371],["T_STRING","true",371],")",["T_WHITESPACE","\n    ",371],"{",["T_WHITESPACE","\n        ",372],["T_VARIABLE","$resultAttrs",373],["T_WHITESPACE"," ",373],"=",["T_WHITESPACE"," ",373],["T_STRING","parent",373],["T_DOUBLE_COLON","::",373],["T_STRING","prepareAttributesWithDefaultValueForSave",373],"(",["T_VARIABLE","$rowData",373],",",["T_WHITESPACE"," ",373],["T_VARIABLE","$withDefaultValue",373],")",";",["T_WHITESPACE","\n        ",373],["T_VARIABLE","$resultAttrs",374],["T_WHITESPACE"," ",374],"=",["T_WHITESPACE"," ",374],["T_STRING","array_merge",374],"(",["T_VARIABLE","$resultAttrs",374],",",["T_WHITESPACE"," ",374],["T_VARIABLE","$this",374],["T_OBJECT_OPERATOR","->",374],["T_STRING","transformBundleCustomAttributes",374],"(",["T_VARIABLE","$rowData",374],")",")",";",["T_WHITESPACE","\n        ",374],["T_RETURN","return",375],["T_WHITESPACE"," ",375],["T_VARIABLE","$resultAttrs",375],";",["T_WHITESPACE","\n    ",375],"}",["T_WHITESPACE","\n\n    ",376],["T_DOC_COMMENT","\/**\n     * Transform dynamic\/fixed values to integer.\n     *\n     * @param array $rowData\n     * @return array\n     *\/",378],["T_WHITESPACE","\n    ",383],["T_PROTECTED","protected",384],["T_WHITESPACE"," ",384],["T_FUNCTION","function",384],["T_WHITESPACE"," ",384],["T_STRING","transformBundleCustomAttributes",384],"(",["T_VARIABLE","$rowData",384],")",["T_WHITESPACE","\n    ",384],"{",["T_WHITESPACE","\n        ",385],["T_VARIABLE","$resultAttrs",386],["T_WHITESPACE"," ",386],"=",["T_WHITESPACE"," ",386],"[","]",";",["T_WHITESPACE","\n        ",386],["T_FOREACH","foreach",387],["T_WHITESPACE"," ",387],"(",["T_VARIABLE","$this",387],["T_OBJECT_OPERATOR","->",387],["T_STRING","_customFieldsMapping",387],["T_WHITESPACE"," ",387],["T_AS","as",387],["T_WHITESPACE"," ",387],["T_VARIABLE","$oldKey",387],["T_WHITESPACE"," ",387],["T_DOUBLE_ARROW","=>",387],["T_WHITESPACE"," ",387],["T_VARIABLE","$newKey",387],")",["T_WHITESPACE"," ",387],"{",["T_WHITESPACE","\n            ",387],["T_IF","if",388],["T_WHITESPACE"," ",388],"(",["T_ISSET","isset",388],"(",["T_VARIABLE","$rowData",388],"[",["T_VARIABLE","$oldKey",388],"]",")",")",["T_WHITESPACE"," ",388],"{",["T_WHITESPACE","\n                ",388],["T_SWITCH","switch",389],["T_WHITESPACE"," ",389],"(",["T_VARIABLE","$newKey",389],")",["T_WHITESPACE"," ",389],"{",["T_WHITESPACE","\n                    ",389],["T_CASE","case",390],["T_WHITESPACE"," ",390],["T_VARIABLE","$this",390],["T_OBJECT_OPERATOR","->",390],["T_STRING","_customFieldsMapping",390],"[",["T_CONSTANT_ENCAPSED_STRING","'price_view'",390],"]",":",["T_WHITESPACE","\n                        ",390],["T_BREAK","break",391],";",["T_WHITESPACE","\n                    ",391],["T_CASE","case",392],["T_WHITESPACE"," ",392],["T_VARIABLE","$this",392],["T_OBJECT_OPERATOR","->",392],["T_STRING","_customFieldsMapping",392],"[",["T_CONSTANT_ENCAPSED_STRING","'shipment_type'",392],"]",":",["T_WHITESPACE","\n                        ",392],["T_VARIABLE","$resultAttrs",393],"[",["T_VARIABLE","$oldKey",393],"]",["T_WHITESPACE"," ",393],"=",["T_WHITESPACE"," ",393],"(","(",["T_VARIABLE","$rowData",393],"[",["T_VARIABLE","$oldKey",393],"]",["T_WHITESPACE"," ",393],["T_IS_EQUAL","==",393],["T_WHITESPACE"," ",393],["T_CONSTANT_ENCAPSED_STRING","'separately'",393],")",["T_WHITESPACE"," ",393],"?",["T_WHITESPACE","\n                            ",393],["T_STRING","AbstractType",394],["T_DOUBLE_COLON","::",394],["T_STRING","SHIPMENT_SEPARATELY",394],["T_WHITESPACE"," ",394],":",["T_WHITESPACE","\n                            ",394],["T_STRING","AbstractType",395],["T_DOUBLE_COLON","::",395],["T_STRING","SHIPMENT_TOGETHER",395],")",";",["T_WHITESPACE","\n                        ",395],["T_BREAK","break",396],";",["T_WHITESPACE","\n                    ",396],["T_DEFAULT","default",397],":",["T_WHITESPACE","\n                        ",397],["T_VARIABLE","$resultAttrs",398],"[",["T_VARIABLE","$oldKey",398],"]",["T_WHITESPACE"," ",398],"=",["T_WHITESPACE"," ",398],"(","(",["T_VARIABLE","$rowData",398],"[",["T_VARIABLE","$oldKey",398],"]",["T_WHITESPACE"," ",398],["T_IS_EQUAL","==",398],["T_WHITESPACE"," ",398],["T_STRING","self",398],["T_DOUBLE_COLON","::",398],["T_STRING","VALUE_FIXED",398],")",["T_WHITESPACE"," ",398],"?",["T_WHITESPACE","\n                            ",398],["T_STRING","BundlePrice",399],["T_DOUBLE_COLON","::",399],["T_STRING","PRICE_TYPE_FIXED",399],["T_WHITESPACE"," ",399],":",["T_WHITESPACE","\n                            ",399],["T_STRING","BundlePrice",400],["T_DOUBLE_COLON","::",400],["T_STRING","PRICE_TYPE_DYNAMIC",400],")",";",["T_WHITESPACE","\n                ",400],"}",["T_WHITESPACE","\n            ",401],"}",["T_WHITESPACE","\n        ",402],"}",["T_WHITESPACE","\n\n        ",403],["T_RETURN","return",405],["T_WHITESPACE"," ",405],["T_VARIABLE","$resultAttrs",405],";",["T_WHITESPACE","\n    ",405],"}",["T_WHITESPACE","\n\n    ",406],["T_DOC_COMMENT","\/**\n     * Populates existing options.\n     *\n     * @return \\Magento\\CatalogImportExport\\Model\\Import\\Product\\Type\\AbstractType\n     *\/",408],["T_WHITESPACE","\n    ",412],["T_PROTECTED","protected",413],["T_WHITESPACE"," ",413],["T_FUNCTION","function",413],["T_WHITESPACE"," ",413],["T_STRING","populateExistingOptions",413],"(",")",["T_WHITESPACE","\n    ",413],"{",["T_WHITESPACE","\n        ",414],["T_VARIABLE","$existingOptions",415],["T_WHITESPACE"," ",415],"=",["T_WHITESPACE"," ",415],["T_VARIABLE","$this",415],["T_OBJECT_OPERATOR","->",415],["T_STRING","connection",415],["T_OBJECT_OPERATOR","->",415],["T_STRING","fetchAssoc",415],"(",["T_WHITESPACE","\n            ",415],["T_VARIABLE","$this",416],["T_OBJECT_OPERATOR","->",416],["T_STRING","connection",416],["T_OBJECT_OPERATOR","->",416],["T_STRING","select",416],"(",")",["T_OBJECT_OPERATOR","->",416],["T_STRING","from",416],"(",["T_WHITESPACE","\n                ",416],"[",["T_CONSTANT_ENCAPSED_STRING","'bo'",417],["T_WHITESPACE"," ",417],["T_DOUBLE_ARROW","=>",417],["T_WHITESPACE"," ",417],["T_VARIABLE","$this",417],["T_OBJECT_OPERATOR","->",417],["T_STRING","_resource",417],["T_OBJECT_OPERATOR","->",417],["T_STRING","getTableName",417],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog_product_bundle_option'",417],")","]",",",["T_WHITESPACE","\n                ",417],"[",["T_CONSTANT_ENCAPSED_STRING","'option_id'",418],",",["T_WHITESPACE"," ",418],["T_CONSTANT_ENCAPSED_STRING","'parent_id'",418],",",["T_WHITESPACE"," ",418],["T_CONSTANT_ENCAPSED_STRING","'required'",418],",",["T_WHITESPACE"," ",418],["T_CONSTANT_ENCAPSED_STRING","'position'",418],",",["T_WHITESPACE"," ",418],["T_CONSTANT_ENCAPSED_STRING","'type'",418],"]",["T_WHITESPACE","\n            ",418],")",["T_OBJECT_OPERATOR","->",419],["T_STRING","joinLeft",419],"(",["T_WHITESPACE","\n                ",419],"[",["T_CONSTANT_ENCAPSED_STRING","'bov'",420],["T_WHITESPACE"," ",420],["T_DOUBLE_ARROW","=>",420],["T_WHITESPACE"," ",420],["T_VARIABLE","$this",420],["T_OBJECT_OPERATOR","->",420],["T_STRING","_resource",420],["T_OBJECT_OPERATOR","->",420],["T_STRING","getTableName",420],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog_product_bundle_option_value'",420],")","]",",",["T_WHITESPACE","\n                ",420],["T_CONSTANT_ENCAPSED_STRING","'bo.option_id = bov.option_id'",421],",",["T_WHITESPACE","\n                ",421],"[",["T_CONSTANT_ENCAPSED_STRING","'value_id'",422],",",["T_WHITESPACE"," ",422],["T_CONSTANT_ENCAPSED_STRING","'title'",422],"]",["T_WHITESPACE","\n            ",422],")",["T_OBJECT_OPERATOR","->",423],["T_STRING","where",423],"(",["T_WHITESPACE","\n                ",423],["T_STRING","implode",424],"(",["T_CONSTANT_ENCAPSED_STRING","' OR '",424],",",["T_WHITESPACE"," ",424],["T_VARIABLE","$this",424],["T_OBJECT_OPERATOR","->",424],["T_STRING","_cachedOptionSelectQuery",424],")",["T_WHITESPACE","\n            ",424],")",["T_WHITESPACE","\n        ",425],")",";",["T_WHITESPACE","\n        ",426],["T_FOREACH","foreach",427],["T_WHITESPACE"," ",427],"(",["T_VARIABLE","$existingOptions",427],["T_WHITESPACE"," ",427],["T_AS","as",427],["T_WHITESPACE"," ",427],["T_VARIABLE","$optionId",427],["T_WHITESPACE"," ",427],["T_DOUBLE_ARROW","=>",427],["T_WHITESPACE"," ",427],["T_VARIABLE","$option",427],")",["T_WHITESPACE"," ",427],"{",["T_WHITESPACE","\n            ",427],["T_VARIABLE","$this",428],["T_OBJECT_OPERATOR","->",428],["T_STRING","_cachedOptions",428],"[",["T_VARIABLE","$option",428],"[",["T_CONSTANT_ENCAPSED_STRING","'parent_id'",428],"]","]","[",["T_VARIABLE","$option",428],"[",["T_CONSTANT_ENCAPSED_STRING","'title'",428],"]","]","[",["T_CONSTANT_ENCAPSED_STRING","'option_id'",428],"]",["T_WHITESPACE"," ",428],"=",["T_WHITESPACE"," ",428],["T_VARIABLE","$optionId",428],";",["T_WHITESPACE","\n            ",428],["T_FOREACH","foreach",429],["T_WHITESPACE"," ",429],"(",["T_VARIABLE","$option",429],["T_WHITESPACE"," ",429],["T_AS","as",429],["T_WHITESPACE"," ",429],["T_VARIABLE","$key",429],["T_WHITESPACE"," ",429],["T_DOUBLE_ARROW","=>",429],["T_WHITESPACE"," ",429],["T_VARIABLE","$value",429],")",["T_WHITESPACE"," ",429],"{",["T_WHITESPACE","\n                ",429],["T_IF","if",430],["T_WHITESPACE"," ",430],"(","!",["T_ISSET","isset",430],"(",["T_VARIABLE","$this",430],["T_OBJECT_OPERATOR","->",430],["T_STRING","_cachedOptions",430],"[",["T_VARIABLE","$option",430],"[",["T_CONSTANT_ENCAPSED_STRING","'parent_id'",430],"]","]","[",["T_VARIABLE","$option",430],"[",["T_CONSTANT_ENCAPSED_STRING","'title'",430],"]","]","[",["T_VARIABLE","$key",430],"]",")",")",["T_WHITESPACE"," ",430],"{",["T_WHITESPACE","\n                    ",430],["T_VARIABLE","$this",431],["T_OBJECT_OPERATOR","->",431],["T_STRING","_cachedOptions",431],"[",["T_VARIABLE","$option",431],"[",["T_CONSTANT_ENCAPSED_STRING","'parent_id'",431],"]","]","[",["T_VARIABLE","$option",431],"[",["T_CONSTANT_ENCAPSED_STRING","'title'",431],"]","]","[",["T_VARIABLE","$key",431],"]",["T_WHITESPACE"," ",431],"=",["T_WHITESPACE"," ",431],["T_VARIABLE","$value",431],";",["T_WHITESPACE","\n                ",431],"}",["T_WHITESPACE","\n            ",432],"}",["T_WHITESPACE","\n        ",433],"}",["T_WHITESPACE","\n        ",434],["T_VARIABLE","$this",435],["T_OBJECT_OPERATOR","->",435],["T_STRING","populateExistingSelections",435],"(",["T_VARIABLE","$existingOptions",435],")",";",["T_WHITESPACE","\n        ",435],["T_RETURN","return",436],["T_WHITESPACE"," ",436],["T_VARIABLE","$this",436],";",["T_WHITESPACE","\n    ",436],"}",["T_WHITESPACE","\n\n    ",437],["T_DOC_COMMENT","\/**\n     * Populate existing selections.\n     *\n     * @param array $existingOptions\n     *\n     * @return \\Magento\\CatalogImportExport\\Model\\Import\\Product\\Type\\AbstractType\n     *\/",439],["T_WHITESPACE","\n    ",445],["T_PROTECTED","protected",446],["T_WHITESPACE"," ",446],["T_FUNCTION","function",446],["T_WHITESPACE"," ",446],["T_STRING","populateExistingSelections",446],"(",["T_VARIABLE","$existingOptions",446],")",["T_WHITESPACE","\n    ",446],"{",["T_WHITESPACE","\n        ",447],["T_COMMENT","\/\/@codingStandardsIgnoreStart\n",448],["T_WHITESPACE","        ",449],["T_VARIABLE","$existingSelections",449],["T_WHITESPACE"," ",449],"=",["T_WHITESPACE"," ",449],["T_VARIABLE","$this",449],["T_OBJECT_OPERATOR","->",449],["T_STRING","connection",449],["T_OBJECT_OPERATOR","->",449],["T_STRING","fetchAll",449],"(",["T_WHITESPACE","\n            ",449],["T_VARIABLE","$this",450],["T_OBJECT_OPERATOR","->",450],["T_STRING","connection",450],["T_OBJECT_OPERATOR","->",450],["T_STRING","select",450],"(",")",["T_OBJECT_OPERATOR","->",450],["T_STRING","from",450],"(",["T_WHITESPACE","\n                ",450],["T_VARIABLE","$this",451],["T_OBJECT_OPERATOR","->",451],["T_STRING","_resource",451],["T_OBJECT_OPERATOR","->",451],["T_STRING","getTableName",451],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog_product_bundle_selection'",451],")",["T_WHITESPACE","\n            ",451],")",["T_OBJECT_OPERATOR","->",452],["T_STRING","where",452],"(",["T_WHITESPACE","\n                ",452],["T_CONSTANT_ENCAPSED_STRING","'option_id IN (?)'",453],",",["T_WHITESPACE","\n                ",453],["T_STRING","array_keys",454],"(",["T_VARIABLE","$existingOptions",454],")",["T_WHITESPACE","\n            ",454],")",["T_WHITESPACE","\n        ",455],")",";",["T_WHITESPACE","\n        ",456],["T_FOREACH","foreach",457],["T_WHITESPACE"," ",457],"(",["T_VARIABLE","$existingSelections",457],["T_WHITESPACE"," ",457],["T_AS","as",457],["T_WHITESPACE"," ",457],["T_VARIABLE","$existingSelection",457],")",["T_WHITESPACE"," ",457],"{",["T_WHITESPACE","\n            ",457],["T_VARIABLE","$optionTitle",458],["T_WHITESPACE"," ",458],"=",["T_WHITESPACE"," ",458],["T_VARIABLE","$existingOptions",458],"[",["T_VARIABLE","$existingSelection",458],"[",["T_CONSTANT_ENCAPSED_STRING","'option_id'",458],"]","]","[",["T_CONSTANT_ENCAPSED_STRING","'title'",458],"]",";",["T_WHITESPACE","\n            ",458],["T_VARIABLE","$cachedOptionsSelections",459],["T_WHITESPACE"," ",459],"=",["T_WHITESPACE"," ",459],["T_VARIABLE","$this",459],["T_OBJECT_OPERATOR","->",459],["T_STRING","_cachedOptions",459],"[",["T_VARIABLE","$existingSelection",459],"[",["T_CONSTANT_ENCAPSED_STRING","'parent_product_id'",459],"]","]","[",["T_VARIABLE","$optionTitle",459],"]","[",["T_CONSTANT_ENCAPSED_STRING","'selections'",459],"]",";",["T_WHITESPACE","\n            ",459],["T_FOREACH","foreach",460],["T_WHITESPACE"," ",460],"(",["T_VARIABLE","$cachedOptionsSelections",460],["T_WHITESPACE"," ",460],["T_AS","as",460],["T_WHITESPACE"," ",460],["T_VARIABLE","$selectIndex",460],["T_WHITESPACE"," ",460],["T_DOUBLE_ARROW","=>",460],["T_WHITESPACE"," ",460],["T_VARIABLE","$selection",460],")",["T_WHITESPACE"," ",460],"{",["T_WHITESPACE","\n                ",460],["T_VARIABLE","$productId",461],["T_WHITESPACE"," ",461],"=",["T_WHITESPACE"," ",461],["T_VARIABLE","$this",461],["T_OBJECT_OPERATOR","->",461],["T_STRING","_cachedSkuToProducts",461],"[",["T_VARIABLE","$selection",461],"[",["T_CONSTANT_ENCAPSED_STRING","'sku'",461],"]","]",";",["T_WHITESPACE","\n                ",461],["T_IF","if",462],["T_WHITESPACE"," ",462],"(",["T_VARIABLE","$productId",462],["T_WHITESPACE"," ",462],["T_IS_EQUAL","==",462],["T_WHITESPACE"," ",462],["T_VARIABLE","$existingSelection",462],"[",["T_CONSTANT_ENCAPSED_STRING","'product_id'",462],"]",")",["T_WHITESPACE"," ",462],"{",["T_WHITESPACE","\n                    ",462],["T_FOREACH","foreach",463],["T_WHITESPACE"," ",463],"(",["T_STRING","array_keys",463],"(",["T_VARIABLE","$existingSelection",463],")",["T_WHITESPACE"," ",463],["T_AS","as",463],["T_WHITESPACE"," ",463],["T_VARIABLE","$origKey",463],")",["T_WHITESPACE"," ",463],"{",["T_WHITESPACE","\n                        ",463],["T_VARIABLE","$key",464],["T_WHITESPACE"," ",464],"=",["T_WHITESPACE"," ",464],["T_ISSET","isset",464],"(",["T_VARIABLE","$this",464],["T_OBJECT_OPERATOR","->",464],["T_STRING","_bundleFieldMapping",464],"[",["T_VARIABLE","$origKey",464],"]",")",["T_WHITESPACE","\n                            ",464],"?",["T_WHITESPACE"," ",465],["T_VARIABLE","$this",465],["T_OBJECT_OPERATOR","->",465],["T_STRING","_bundleFieldMapping",465],"[",["T_VARIABLE","$origKey",465],"]",["T_WHITESPACE","\n                            ",465],":",["T_WHITESPACE"," ",466],["T_VARIABLE","$origKey",466],";",["T_WHITESPACE","\n                        ",466],["T_IF","if",467],["T_WHITESPACE"," ",467],"(",["T_WHITESPACE","\n                            ",467],"!",["T_ISSET","isset",468],"(",["T_VARIABLE","$this",468],["T_OBJECT_OPERATOR","->",468],["T_STRING","_cachedOptions",468],"[",["T_VARIABLE","$existingSelection",468],"[",["T_CONSTANT_ENCAPSED_STRING","'parent_product_id'",468],"]","]","[",["T_VARIABLE","$optionTitle",468],"]","[",["T_CONSTANT_ENCAPSED_STRING","'selections'",468],"]","[",["T_VARIABLE","$selectIndex",468],"]","[",["T_VARIABLE","$key",468],"]",")",["T_WHITESPACE","\n                        ",468],")",["T_WHITESPACE"," ",469],"{",["T_WHITESPACE","\n                            ",469],["T_VARIABLE","$this",470],["T_OBJECT_OPERATOR","->",470],["T_STRING","_cachedOptions",470],"[",["T_VARIABLE","$existingSelection",470],"[",["T_CONSTANT_ENCAPSED_STRING","'parent_product_id'",470],"]","]","[",["T_VARIABLE","$optionTitle",470],"]","[",["T_CONSTANT_ENCAPSED_STRING","'selections'",470],"]","[",["T_VARIABLE","$selectIndex",470],"]","[",["T_VARIABLE","$key",470],"]",["T_WHITESPACE"," ",470],"=",["T_WHITESPACE","\n                                ",470],["T_VARIABLE","$existingSelection",471],"[",["T_VARIABLE","$origKey",471],"]",";",["T_WHITESPACE","\n                        ",471],"}",["T_WHITESPACE","\n                    ",472],"}",["T_WHITESPACE","\n                    ",473],["T_BREAK","break",474],";",["T_WHITESPACE","\n                ",474],"}",["T_WHITESPACE","\n            ",475],"}",["T_WHITESPACE","\n        ",476],"}",["T_WHITESPACE","\n        ",477],["T_COMMENT","\/\/ @codingStandardsIgnoreEnd\n",478],["T_WHITESPACE","        ",479],["T_RETURN","return",479],["T_WHITESPACE"," ",479],["T_VARIABLE","$this",479],";",["T_WHITESPACE","\n    ",479],"}",["T_WHITESPACE","\n\n    ",480],["T_DOC_COMMENT","\/**\n     * Insert options.\n     *\n     * @return \\Magento\\CatalogImportExport\\Model\\Import\\Product\\Type\\AbstractType\n     *\/",482],["T_WHITESPACE","\n    ",486],["T_PROTECTED","protected",487],["T_WHITESPACE"," ",487],["T_FUNCTION","function",487],["T_WHITESPACE"," ",487],["T_STRING","insertOptions",487],"(",")",["T_WHITESPACE","\n    ",487],"{",["T_WHITESPACE","\n        ",488],["T_VARIABLE","$optionTable",489],["T_WHITESPACE"," ",489],"=",["T_WHITESPACE"," ",489],["T_VARIABLE","$this",489],["T_OBJECT_OPERATOR","->",489],["T_STRING","_resource",489],["T_OBJECT_OPERATOR","->",489],["T_STRING","getTableName",489],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog_product_bundle_option'",489],")",";",["T_WHITESPACE","\n        ",489],["T_VARIABLE","$optionValueTable",490],["T_WHITESPACE"," ",490],"=",["T_WHITESPACE"," ",490],["T_VARIABLE","$this",490],["T_OBJECT_OPERATOR","->",490],["T_STRING","_resource",490],["T_OBJECT_OPERATOR","->",490],["T_STRING","getTableName",490],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog_product_bundle_option_value'",490],")",";",["T_WHITESPACE","\n        ",490],["T_VARIABLE","$productIds",491],["T_WHITESPACE"," ",491],"=",["T_WHITESPACE"," ",491],"[","]",";",["T_WHITESPACE","\n        ",491],["T_VARIABLE","$insert",492],["T_WHITESPACE"," ",492],"=",["T_WHITESPACE"," ",492],"[","]",";",["T_WHITESPACE","\n        ",492],["T_FOREACH","foreach",493],["T_WHITESPACE"," ",493],"(",["T_VARIABLE","$this",493],["T_OBJECT_OPERATOR","->",493],["T_STRING","_cachedOptions",493],["T_WHITESPACE"," ",493],["T_AS","as",493],["T_WHITESPACE"," ",493],["T_VARIABLE","$entityId",493],["T_WHITESPACE"," ",493],["T_DOUBLE_ARROW","=>",493],["T_WHITESPACE"," ",493],["T_VARIABLE","$options",493],")",["T_WHITESPACE"," ",493],"{",["T_WHITESPACE","\n            ",493],["T_VARIABLE","$index",494],["T_WHITESPACE"," ",494],"=",["T_WHITESPACE"," ",494],["T_LNUMBER","0",494],";",["T_WHITESPACE","\n            ",494],["T_VARIABLE","$productIds",495],"[","]",["T_WHITESPACE"," ",495],"=",["T_WHITESPACE"," ",495],["T_VARIABLE","$entityId",495],";",["T_WHITESPACE","\n            ",495],["T_FOREACH","foreach",496],["T_WHITESPACE"," ",496],"(",["T_VARIABLE","$options",496],["T_WHITESPACE"," ",496],["T_AS","as",496],["T_WHITESPACE"," ",496],["T_VARIABLE","$key",496],["T_WHITESPACE"," ",496],["T_DOUBLE_ARROW","=>",496],["T_WHITESPACE"," ",496],["T_VARIABLE","$option",496],")",["T_WHITESPACE"," ",496],"{",["T_WHITESPACE","\n                ",496],["T_IF","if",497],["T_WHITESPACE"," ",497],"(",["T_ISSET","isset",497],"(",["T_VARIABLE","$option",497],"[",["T_CONSTANT_ENCAPSED_STRING","'position'",497],"]",")",")",["T_WHITESPACE"," ",497],"{",["T_WHITESPACE","\n                    ",497],["T_VARIABLE","$index",498],["T_WHITESPACE"," ",498],"=",["T_WHITESPACE"," ",498],["T_VARIABLE","$option",498],"[",["T_CONSTANT_ENCAPSED_STRING","'position'",498],"]",";",["T_WHITESPACE","\n                ",498],"}",["T_WHITESPACE","\n                ",499],["T_IF","if",500],["T_WHITESPACE"," ",500],"(",["T_VARIABLE","$tmpArray",500],["T_WHITESPACE"," ",500],"=",["T_WHITESPACE"," ",500],["T_VARIABLE","$this",500],["T_OBJECT_OPERATOR","->",500],["T_STRING","populateOptionTemplate",500],"(",["T_VARIABLE","$option",500],",",["T_WHITESPACE"," ",500],["T_VARIABLE","$entityId",500],",",["T_WHITESPACE"," ",500],["T_VARIABLE","$index",500],")",")",["T_WHITESPACE"," ",500],"{",["T_WHITESPACE","\n                    ",500],["T_VARIABLE","$insert",501],"[","]",["T_WHITESPACE"," ",501],"=",["T_WHITESPACE"," ",501],["T_VARIABLE","$tmpArray",501],";",["T_WHITESPACE","\n                    ",501],["T_VARIABLE","$this",502],["T_OBJECT_OPERATOR","->",502],["T_STRING","_cachedOptions",502],"[",["T_VARIABLE","$entityId",502],"]","[",["T_VARIABLE","$key",502],"]","[",["T_CONSTANT_ENCAPSED_STRING","'index'",502],"]",["T_WHITESPACE"," ",502],"=",["T_WHITESPACE"," ",502],["T_VARIABLE","$index",502],";",["T_WHITESPACE","\n                    ",502],["T_VARIABLE","$index",503],["T_INC","++",503],";",["T_WHITESPACE","\n                ",503],"}",["T_WHITESPACE","\n            ",504],"}",["T_WHITESPACE","\n        ",505],"}",["T_WHITESPACE","\n        ",506],["T_VARIABLE","$this",507],["T_OBJECT_OPERATOR","->",507],["T_STRING","connection",507],["T_OBJECT_OPERATOR","->",507],["T_STRING","insertOnDuplicate",507],"(",["T_VARIABLE","$optionTable",507],",",["T_WHITESPACE"," ",507],["T_VARIABLE","$insert",507],",",["T_WHITESPACE"," ",507],"[",["T_CONSTANT_ENCAPSED_STRING","'required'",507],",",["T_WHITESPACE"," ",507],["T_CONSTANT_ENCAPSED_STRING","'position'",507],",",["T_WHITESPACE"," ",507],["T_CONSTANT_ENCAPSED_STRING","'type'",507],"]",")",";",["T_WHITESPACE","\n        ",507],["T_VARIABLE","$optionIds",508],["T_WHITESPACE"," ",508],"=",["T_WHITESPACE"," ",508],["T_VARIABLE","$this",508],["T_OBJECT_OPERATOR","->",508],["T_STRING","connection",508],["T_OBJECT_OPERATOR","->",508],["T_STRING","fetchAssoc",508],"(",["T_WHITESPACE","\n            ",508],["T_VARIABLE","$this",509],["T_OBJECT_OPERATOR","->",509],["T_STRING","connection",509],["T_OBJECT_OPERATOR","->",509],["T_STRING","select",509],"(",")",["T_OBJECT_OPERATOR","->",509],["T_STRING","from",509],"(",["T_WHITESPACE","\n                ",509],["T_VARIABLE","$optionTable",510],",",["T_WHITESPACE","\n                ",510],"[",["T_CONSTANT_ENCAPSED_STRING","'option_id'",511],",",["T_WHITESPACE"," ",511],["T_CONSTANT_ENCAPSED_STRING","'position'",511],",",["T_WHITESPACE"," ",511],["T_CONSTANT_ENCAPSED_STRING","'parent_id'",511],"]",["T_WHITESPACE","\n            ",511],")",["T_OBJECT_OPERATOR","->",512],["T_STRING","where",512],"(",["T_WHITESPACE","\n                ",512],["T_CONSTANT_ENCAPSED_STRING","'parent_id IN (?)'",513],",",["T_WHITESPACE","\n                ",513],["T_VARIABLE","$productIds",514],["T_WHITESPACE","\n            ",514],")",["T_WHITESPACE","\n        ",515],")",";",["T_WHITESPACE","\n        ",516],["T_VARIABLE","$insertValues",517],["T_WHITESPACE"," ",517],"=",["T_WHITESPACE"," ",517],["T_VARIABLE","$this",517],["T_OBJECT_OPERATOR","->",517],["T_STRING","populateInsertOptionValues",517],"(",["T_VARIABLE","$optionIds",517],")",";",["T_WHITESPACE","\n        ",517],["T_IF","if",518],["T_WHITESPACE"," ",518],"(","!",["T_EMPTY","empty",518],"(",["T_VARIABLE","$insertValues",518],")",")",["T_WHITESPACE"," ",518],"{",["T_WHITESPACE","\n            ",518],["T_VARIABLE","$this",519],["T_OBJECT_OPERATOR","->",519],["T_STRING","connection",519],["T_OBJECT_OPERATOR","->",519],["T_STRING","insertOnDuplicate",519],"(",["T_VARIABLE","$optionValueTable",519],",",["T_WHITESPACE"," ",519],["T_VARIABLE","$insertValues",519],",",["T_WHITESPACE"," ",519],"[",["T_CONSTANT_ENCAPSED_STRING","'title'",519],"]",")",";",["T_WHITESPACE","\n        ",519],"}",["T_WHITESPACE","\n        ",520],["T_RETURN","return",521],["T_WHITESPACE"," ",521],["T_VARIABLE","$this",521],";",["T_WHITESPACE","\n    ",521],"}",["T_WHITESPACE","\n\n    ",522],["T_DOC_COMMENT","\/**\n     * Populate array for insert option values\n     * @param array $optionIds\n     * @return array\n     *\/",524],["T_WHITESPACE","\n    ",528],["T_PROTECTED","protected",529],["T_WHITESPACE"," ",529],["T_FUNCTION","function",529],["T_WHITESPACE"," ",529],["T_STRING","populateInsertOptionValues",529],"(",["T_VARIABLE","$optionIds",529],")",["T_WHITESPACE","\n    ",529],"{",["T_WHITESPACE","\n        ",530],["T_VARIABLE","$insertValues",531],["T_WHITESPACE"," ",531],"=",["T_WHITESPACE"," ",531],"[","]",";",["T_WHITESPACE","\n        ",531],["T_FOREACH","foreach",532],["T_WHITESPACE"," ",532],"(",["T_VARIABLE","$this",532],["T_OBJECT_OPERATOR","->",532],["T_STRING","_cachedOptions",532],["T_WHITESPACE"," ",532],["T_AS","as",532],["T_WHITESPACE"," ",532],["T_VARIABLE","$entityId",532],["T_WHITESPACE"," ",532],["T_DOUBLE_ARROW","=>",532],["T_WHITESPACE"," ",532],["T_VARIABLE","$options",532],")",["T_WHITESPACE"," ",532],"{",["T_WHITESPACE","\n            ",532],["T_FOREACH","foreach",533],["T_WHITESPACE"," ",533],"(",["T_VARIABLE","$options",533],["T_WHITESPACE"," ",533],["T_AS","as",533],["T_WHITESPACE"," ",533],["T_VARIABLE","$key",533],["T_WHITESPACE"," ",533],["T_DOUBLE_ARROW","=>",533],["T_WHITESPACE"," ",533],["T_VARIABLE","$option",533],")",["T_WHITESPACE"," ",533],"{",["T_WHITESPACE","\n                ",533],["T_FOREACH","foreach",534],["T_WHITESPACE"," ",534],"(",["T_VARIABLE","$optionIds",534],["T_WHITESPACE"," ",534],["T_AS","as",534],["T_WHITESPACE"," ",534],["T_VARIABLE","$optionId",534],["T_WHITESPACE"," ",534],["T_DOUBLE_ARROW","=>",534],["T_WHITESPACE"," ",534],["T_VARIABLE","$assoc",534],")",["T_WHITESPACE"," ",534],"{",["T_WHITESPACE","\n                    ",534],["T_IF","if",535],["T_WHITESPACE"," ",535],"(",["T_VARIABLE","$assoc",535],"[",["T_CONSTANT_ENCAPSED_STRING","'position'",535],"]",["T_WHITESPACE"," ",535],["T_IS_EQUAL","==",535],["T_WHITESPACE"," ",535],["T_VARIABLE","$this",535],["T_OBJECT_OPERATOR","->",535],["T_STRING","_cachedOptions",535],"[",["T_VARIABLE","$entityId",535],"]","[",["T_VARIABLE","$key",535],"]","[",["T_CONSTANT_ENCAPSED_STRING","'index'",535],"]",["T_WHITESPACE","\n                        ",535],["T_BOOLEAN_AND","&&",536],["T_WHITESPACE"," ",536],["T_VARIABLE","$assoc",536],"[",["T_CONSTANT_ENCAPSED_STRING","'parent_id'",536],"]",["T_WHITESPACE"," ",536],["T_IS_EQUAL","==",536],["T_WHITESPACE"," ",536],["T_VARIABLE","$entityId",536],")",["T_WHITESPACE"," ",536],"{",["T_WHITESPACE","\n                        ",536],["T_VARIABLE","$insertValues",537],"[","]",["T_WHITESPACE"," ",537],"=",["T_WHITESPACE"," ",537],["T_VARIABLE","$this",537],["T_OBJECT_OPERATOR","->",537],["T_STRING","populateOptionValueTemplate",537],"(",["T_VARIABLE","$option",537],",",["T_WHITESPACE"," ",537],["T_VARIABLE","$optionId",537],")",";",["T_WHITESPACE","\n                        ",537],["T_VARIABLE","$this",538],["T_OBJECT_OPERATOR","->",538],["T_STRING","_cachedOptions",538],"[",["T_VARIABLE","$entityId",538],"]","[",["T_VARIABLE","$key",538],"]","[",["T_CONSTANT_ENCAPSED_STRING","'option_id'",538],"]",["T_WHITESPACE"," ",538],"=",["T_WHITESPACE"," ",538],["T_VARIABLE","$optionId",538],";",["T_WHITESPACE","\n                        ",538],["T_BREAK","break",539],";",["T_WHITESPACE","\n                    ",539],"}",["T_WHITESPACE","\n                ",540],"}",["T_WHITESPACE","\n            ",541],"}",["T_WHITESPACE","\n        ",542],"}",["T_WHITESPACE","\n        ",543],["T_RETURN","return",544],["T_WHITESPACE"," ",544],["T_VARIABLE","$insertValues",544],";",["T_WHITESPACE","\n    ",544],"}",["T_WHITESPACE","\n\n    ",545],["T_DOC_COMMENT","\/**\n     * Insert selections.\n     *\n     * @return \\Magento\\CatalogImportExport\\Model\\Import\\Product\\Type\\AbstractType\n     *\/",547],["T_WHITESPACE","\n    ",551],["T_PROTECTED","protected",552],["T_WHITESPACE"," ",552],["T_FUNCTION","function",552],["T_WHITESPACE"," ",552],["T_STRING","insertSelections",552],"(",")",["T_WHITESPACE","\n    ",552],"{",["T_WHITESPACE","\n        ",553],["T_VARIABLE","$selectionTable",554],["T_WHITESPACE"," ",554],"=",["T_WHITESPACE"," ",554],["T_VARIABLE","$this",554],["T_OBJECT_OPERATOR","->",554],["T_STRING","_resource",554],["T_OBJECT_OPERATOR","->",554],["T_STRING","getTableName",554],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog_product_bundle_selection'",554],")",";",["T_WHITESPACE","\n        ",554],["T_VARIABLE","$selections",555],["T_WHITESPACE"," ",555],"=",["T_WHITESPACE"," ",555],"[","]",";",["T_WHITESPACE","\n        ",555],["T_FOREACH","foreach",556],["T_WHITESPACE"," ",556],"(",["T_VARIABLE","$this",556],["T_OBJECT_OPERATOR","->",556],["T_STRING","_cachedOptions",556],["T_WHITESPACE"," ",556],["T_AS","as",556],["T_WHITESPACE"," ",556],["T_VARIABLE","$productId",556],["T_WHITESPACE"," ",556],["T_DOUBLE_ARROW","=>",556],["T_WHITESPACE"," ",556],["T_VARIABLE","$options",556],")",["T_WHITESPACE"," ",556],"{",["T_WHITESPACE","\n            ",556],["T_FOREACH","foreach",557],["T_WHITESPACE"," ",557],"(",["T_VARIABLE","$options",557],["T_WHITESPACE"," ",557],["T_AS","as",557],["T_WHITESPACE"," ",557],["T_VARIABLE","$option",557],")",["T_WHITESPACE"," ",557],"{",["T_WHITESPACE","\n                ",557],["T_VARIABLE","$index",558],["T_WHITESPACE"," ",558],"=",["T_WHITESPACE"," ",558],["T_LNUMBER","0",558],";",["T_WHITESPACE","\n                ",558],["T_FOREACH","foreach",559],["T_WHITESPACE"," ",559],"(",["T_VARIABLE","$option",559],"[",["T_CONSTANT_ENCAPSED_STRING","'selections'",559],"]",["T_WHITESPACE"," ",559],["T_AS","as",559],["T_WHITESPACE"," ",559],["T_VARIABLE","$selection",559],")",["T_WHITESPACE"," ",559],"{",["T_WHITESPACE","\n                    ",559],["T_IF","if",560],["T_WHITESPACE"," ",560],"(",["T_ISSET","isset",560],"(",["T_VARIABLE","$selection",560],"[",["T_CONSTANT_ENCAPSED_STRING","'position'",560],"]",")",")",["T_WHITESPACE"," ",560],"{",["T_WHITESPACE","\n                        ",560],["T_VARIABLE","$index",561],["T_WHITESPACE"," ",561],"=",["T_WHITESPACE"," ",561],["T_VARIABLE","$selection",561],"[",["T_CONSTANT_ENCAPSED_STRING","'position'",561],"]",";",["T_WHITESPACE","\n                    ",561],"}",["T_WHITESPACE","\n                    ",562],["T_IF","if",563],["T_WHITESPACE"," ",563],"(",["T_VARIABLE","$tmpArray",563],["T_WHITESPACE"," ",563],"=",["T_WHITESPACE"," ",563],["T_VARIABLE","$this",563],["T_OBJECT_OPERATOR","->",563],["T_STRING","populateSelectionTemplate",563],"(",["T_WHITESPACE","\n                        ",563],["T_VARIABLE","$selection",564],",",["T_WHITESPACE","\n                        ",564],["T_VARIABLE","$option",565],"[",["T_CONSTANT_ENCAPSED_STRING","'option_id'",565],"]",",",["T_WHITESPACE","\n                        ",565],["T_VARIABLE","$productId",566],",",["T_WHITESPACE","\n                        ",566],["T_VARIABLE","$index",567],["T_WHITESPACE","\n                    ",567],")",")",["T_WHITESPACE"," ",568],"{",["T_WHITESPACE","\n                        ",568],["T_VARIABLE","$selections",569],"[","]",["T_WHITESPACE"," ",569],"=",["T_WHITESPACE"," ",569],["T_VARIABLE","$tmpArray",569],";",["T_WHITESPACE","\n                        ",569],["T_VARIABLE","$index",570],["T_INC","++",570],";",["T_WHITESPACE","\n                    ",570],"}",["T_WHITESPACE","\n                ",571],"}",["T_WHITESPACE","\n            ",572],"}",["T_WHITESPACE","\n        ",573],"}",["T_WHITESPACE","\n        ",574],["T_IF","if",575],["T_WHITESPACE"," ",575],"(","!",["T_EMPTY","empty",575],"(",["T_VARIABLE","$selections",575],")",")",["T_WHITESPACE"," ",575],"{",["T_WHITESPACE","\n            ",575],["T_VARIABLE","$this",576],["T_OBJECT_OPERATOR","->",576],["T_STRING","connection",576],["T_OBJECT_OPERATOR","->",576],["T_STRING","insertOnDuplicate",576],"(",["T_WHITESPACE","\n                ",576],["T_VARIABLE","$selectionTable",577],",",["T_WHITESPACE","\n                ",577],["T_VARIABLE","$selections",578],",",["T_WHITESPACE","\n                ",578],"[",["T_WHITESPACE","\n                    ",579],["T_CONSTANT_ENCAPSED_STRING","'selection_id'",580],",",["T_WHITESPACE","\n                    ",580],["T_CONSTANT_ENCAPSED_STRING","'product_id'",581],",",["T_WHITESPACE","\n                    ",581],["T_CONSTANT_ENCAPSED_STRING","'position'",582],",",["T_WHITESPACE","\n                    ",582],["T_CONSTANT_ENCAPSED_STRING","'is_default'",583],",",["T_WHITESPACE","\n                    ",583],["T_CONSTANT_ENCAPSED_STRING","'selection_price_type'",584],",",["T_WHITESPACE","\n                    ",584],["T_CONSTANT_ENCAPSED_STRING","'selection_price_value'",585],",",["T_WHITESPACE","\n                    ",585],["T_CONSTANT_ENCAPSED_STRING","'selection_qty'",586],",",["T_WHITESPACE","\n                    ",586],["T_CONSTANT_ENCAPSED_STRING","'selection_can_change_qty'",587],["T_WHITESPACE","\n                ",587],"]",["T_WHITESPACE","\n            ",588],")",";",["T_WHITESPACE","\n        ",589],"}",["T_WHITESPACE","\n        ",590],["T_RETURN","return",591],["T_WHITESPACE"," ",591],["T_VARIABLE","$this",591],";",["T_WHITESPACE","\n    ",591],"}",["T_WHITESPACE","\n\n    ",592],["T_DOC_COMMENT","\/**\n     * Initialize attributes parameters for all attributes' sets.\n     *\n     * @return $this\n     *\/",594],["T_WHITESPACE","\n    ",598],["T_PROTECTED","protected",599],["T_WHITESPACE"," ",599],["T_FUNCTION","function",599],["T_WHITESPACE"," ",599],["T_STRING","_initAttributes",599],"(",")",["T_WHITESPACE","\n    ",599],"{",["T_WHITESPACE","\n        ",600],["T_STRING","parent",601],["T_DOUBLE_COLON","::",601],["T_STRING","_initAttributes",601],"(",")",";",["T_WHITESPACE","\n\n        ",601],["T_VARIABLE","$options",603],["T_WHITESPACE"," ",603],"=",["T_WHITESPACE"," ",603],"[",["T_WHITESPACE","\n            ",603],["T_STRING","self",604],["T_DOUBLE_COLON","::",604],["T_STRING","VALUE_DYNAMIC",604],["T_WHITESPACE"," ",604],["T_DOUBLE_ARROW","=>",604],["T_WHITESPACE"," ",604],["T_STRING","BundlePrice",604],["T_DOUBLE_COLON","::",604],["T_STRING","PRICE_TYPE_DYNAMIC",604],",",["T_WHITESPACE","\n            ",604],["T_STRING","self",605],["T_DOUBLE_COLON","::",605],["T_STRING","VALUE_FIXED",605],["T_WHITESPACE"," ",605],["T_DOUBLE_ARROW","=>",605],["T_WHITESPACE"," ",605],["T_STRING","BundlePrice",605],["T_DOUBLE_COLON","::",605],["T_STRING","PRICE_TYPE_FIXED",605],",",["T_WHITESPACE","\n        ",605],"]",";",["T_WHITESPACE","\n\n        ",606],["T_FOREACH","foreach",608],["T_WHITESPACE"," ",608],"(",["T_VARIABLE","$this",608],["T_OBJECT_OPERATOR","->",608],["T_STRING","_specialAttributes",608],["T_WHITESPACE"," ",608],["T_AS","as",608],["T_WHITESPACE"," ",608],["T_VARIABLE","$attributeCode",608],")",["T_WHITESPACE"," ",608],"{",["T_WHITESPACE","\n            ",608],["T_IF","if",609],["T_WHITESPACE"," ",609],"(",["T_ISSET","isset",609],"(",["T_STRING","self",609],["T_DOUBLE_COLON","::",609],["T_VARIABLE","$attributeCodeToId",609],"[",["T_VARIABLE","$attributeCode",609],"]",")",["T_WHITESPACE"," ",609],["T_BOOLEAN_AND","&&",609],["T_WHITESPACE"," ",609],["T_VARIABLE","$id",609],["T_WHITESPACE"," ",609],"=",["T_WHITESPACE"," ",609],["T_STRING","self",609],["T_DOUBLE_COLON","::",609],["T_VARIABLE","$attributeCodeToId",609],"[",["T_VARIABLE","$attributeCode",609],"]",")",["T_WHITESPACE"," ",609],"{",["T_WHITESPACE","\n                ",609],["T_STRING","self",610],["T_DOUBLE_COLON","::",610],["T_VARIABLE","$commonAttributesCache",610],"[",["T_VARIABLE","$id",610],"]","[",["T_CONSTANT_ENCAPSED_STRING","'type'",610],"]",["T_WHITESPACE"," ",610],"=",["T_WHITESPACE"," ",610],["T_CONSTANT_ENCAPSED_STRING","'select'",610],";",["T_WHITESPACE","\n                ",610],["T_STRING","self",611],["T_DOUBLE_COLON","::",611],["T_VARIABLE","$commonAttributesCache",611],"[",["T_VARIABLE","$id",611],"]","[",["T_CONSTANT_ENCAPSED_STRING","'options'",611],"]",["T_WHITESPACE"," ",611],"=",["T_WHITESPACE"," ",611],["T_VARIABLE","$options",611],";",["T_WHITESPACE","\n\n                ",611],["T_FOREACH","foreach",613],["T_WHITESPACE"," ",613],"(",["T_VARIABLE","$this",613],["T_OBJECT_OPERATOR","->",613],["T_STRING","_attributes",613],["T_WHITESPACE"," ",613],["T_AS","as",613],["T_WHITESPACE"," ",613],["T_VARIABLE","$attrSetName",613],["T_WHITESPACE"," ",613],["T_DOUBLE_ARROW","=>",613],["T_WHITESPACE"," ",613],["T_VARIABLE","$attrSetValue",613],")",["T_WHITESPACE"," ",613],"{",["T_WHITESPACE","\n                    ",613],["T_IF","if",614],["T_WHITESPACE"," ",614],"(",["T_ISSET","isset",614],"(",["T_VARIABLE","$attrSetValue",614],"[",["T_VARIABLE","$attributeCode",614],"]",")",")",["T_WHITESPACE"," ",614],"{",["T_WHITESPACE","\n                        ",614],["T_VARIABLE","$this",615],["T_OBJECT_OPERATOR","->",615],["T_STRING","_attributes",615],"[",["T_VARIABLE","$attrSetName",615],"]","[",["T_VARIABLE","$attributeCode",615],"]","[",["T_CONSTANT_ENCAPSED_STRING","'type'",615],"]",["T_WHITESPACE"," ",615],"=",["T_WHITESPACE"," ",615],["T_CONSTANT_ENCAPSED_STRING","'select'",615],";",["T_WHITESPACE","\n                        ",615],["T_VARIABLE","$this",616],["T_OBJECT_OPERATOR","->",616],["T_STRING","_attributes",616],"[",["T_VARIABLE","$attrSetName",616],"]","[",["T_VARIABLE","$attributeCode",616],"]","[",["T_CONSTANT_ENCAPSED_STRING","'options'",616],"]",["T_WHITESPACE"," ",616],"=",["T_WHITESPACE"," ",616],["T_VARIABLE","$options",616],";",["T_WHITESPACE","\n                    ",616],"}",["T_WHITESPACE","\n                ",617],"}",["T_WHITESPACE","\n            ",618],"}",["T_WHITESPACE","\n        ",619],"}",["T_WHITESPACE","\n    ",620],"}",["T_WHITESPACE","\n\n    ",621],["T_DOC_COMMENT","\/**\n     * Delete options and selections.\n     *\n     * @param array $productIds\n     *\n     * @return \\Magento\\CatalogImportExport\\Model\\Import\\Product\\Type\\AbstractType\n     *\/",623],["T_WHITESPACE","\n    ",629],["T_PROTECTED","protected",630],["T_WHITESPACE"," ",630],["T_FUNCTION","function",630],["T_WHITESPACE"," ",630],["T_STRING","deleteOptionsAndSelections",630],"(",["T_VARIABLE","$productIds",630],")",["T_WHITESPACE","\n    ",630],"{",["T_WHITESPACE","\n        ",631],["T_VARIABLE","$optionTable",632],["T_WHITESPACE"," ",632],"=",["T_WHITESPACE"," ",632],["T_VARIABLE","$this",632],["T_OBJECT_OPERATOR","->",632],["T_STRING","_resource",632],["T_OBJECT_OPERATOR","->",632],["T_STRING","getTableName",632],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog_product_bundle_option'",632],")",";",["T_WHITESPACE","\n        ",632],["T_VARIABLE","$optionValueTable",633],["T_WHITESPACE"," ",633],"=",["T_WHITESPACE"," ",633],["T_VARIABLE","$this",633],["T_OBJECT_OPERATOR","->",633],["T_STRING","_resource",633],["T_OBJECT_OPERATOR","->",633],["T_STRING","getTableName",633],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog_product_bundle_option_value'",633],")",";",["T_WHITESPACE","\n        ",633],["T_VARIABLE","$valuesIds",634],["T_WHITESPACE"," ",634],"=",["T_WHITESPACE","  ",634],["T_VARIABLE","$this",634],["T_OBJECT_OPERATOR","->",634],["T_STRING","connection",634],["T_OBJECT_OPERATOR","->",634],["T_STRING","fetchAssoc",634],"(",["T_VARIABLE","$this",634],["T_OBJECT_OPERATOR","->",634],["T_STRING","connection",634],["T_OBJECT_OPERATOR","->",634],["T_STRING","select",634],"(",")",["T_OBJECT_OPERATOR","->",634],["T_STRING","from",634],"(",["T_WHITESPACE","\n            ",634],"[",["T_CONSTANT_ENCAPSED_STRING","'bov'",635],["T_WHITESPACE"," ",635],["T_DOUBLE_ARROW","=>",635],["T_WHITESPACE"," ",635],["T_VARIABLE","$optionValueTable",635],"]",",",["T_WHITESPACE","\n            ",635],"[",["T_CONSTANT_ENCAPSED_STRING","'value_id'",636],"]",["T_WHITESPACE","\n        ",636],")",["T_OBJECT_OPERATOR","->",637],["T_STRING","joinLeft",637],"(",["T_WHITESPACE","\n            ",637],"[",["T_CONSTANT_ENCAPSED_STRING","'bo'",638],["T_WHITESPACE"," ",638],["T_DOUBLE_ARROW","=>",638],["T_WHITESPACE"," ",638],["T_VARIABLE","$optionTable",638],"]",",",["T_WHITESPACE","\n            ",638],["T_CONSTANT_ENCAPSED_STRING","'bo.option_id = bov.option_id'",639],",",["T_WHITESPACE","\n            ",639],"[",["T_CONSTANT_ENCAPSED_STRING","'option_id'",640],"]",["T_WHITESPACE","\n        ",640],")",["T_OBJECT_OPERATOR","->",641],["T_STRING","where",641],"(",["T_WHITESPACE","\n            ",641],["T_CONSTANT_ENCAPSED_STRING","'parent_id IN (?)'",642],",",["T_WHITESPACE","\n            ",642],["T_VARIABLE","$productIds",643],["T_WHITESPACE","\n        ",643],")",")",";",["T_WHITESPACE","\n        ",644],["T_VARIABLE","$this",645],["T_OBJECT_OPERATOR","->",645],["T_STRING","connection",645],["T_OBJECT_OPERATOR","->",645],["T_STRING","delete",645],"(",["T_WHITESPACE","\n            ",645],["T_VARIABLE","$optionTable",646],",",["T_WHITESPACE","\n            ",646],["T_VARIABLE","$this",647],["T_OBJECT_OPERATOR","->",647],["T_STRING","connection",647],["T_OBJECT_OPERATOR","->",647],["T_STRING","quoteInto",647],"(",["T_CONSTANT_ENCAPSED_STRING","'value_id IN (?)'",647],",",["T_WHITESPACE"," ",647],["T_STRING","array_keys",647],"(",["T_VARIABLE","$valuesIds",647],")",")",["T_WHITESPACE","\n        ",647],")",";",["T_WHITESPACE","\n        ",648],["T_VARIABLE","$productIdsInWhere",649],["T_WHITESPACE"," ",649],"=",["T_WHITESPACE"," ",649],["T_VARIABLE","$this",649],["T_OBJECT_OPERATOR","->",649],["T_STRING","connection",649],["T_OBJECT_OPERATOR","->",649],["T_STRING","quoteInto",649],"(",["T_CONSTANT_ENCAPSED_STRING","'parent_id IN (?)'",649],",",["T_WHITESPACE"," ",649],["T_VARIABLE","$productIds",649],")",";",["T_WHITESPACE","\n        ",649],["T_VARIABLE","$this",650],["T_OBJECT_OPERATOR","->",650],["T_STRING","connection",650],["T_OBJECT_OPERATOR","->",650],["T_STRING","delete",650],"(",["T_WHITESPACE","\n            ",650],["T_VARIABLE","$optionTable",651],",",["T_WHITESPACE","\n            ",651],["T_VARIABLE","$this",652],["T_OBJECT_OPERATOR","->",652],["T_STRING","connection",652],["T_OBJECT_OPERATOR","->",652],["T_STRING","quoteInto",652],"(",["T_CONSTANT_ENCAPSED_STRING","'parent_id IN (?)'",652],",",["T_WHITESPACE"," ",652],["T_VARIABLE","$productIdsInWhere",652],")",["T_WHITESPACE","\n        ",652],")",";",["T_WHITESPACE","\n        ",653],["T_VARIABLE","$this",654],["T_OBJECT_OPERATOR","->",654],["T_STRING","connection",654],["T_OBJECT_OPERATOR","->",654],["T_STRING","delete",654],"(",["T_WHITESPACE","\n            ",654],["T_VARIABLE","$optionTable",655],",",["T_WHITESPACE","\n            ",655],["T_VARIABLE","$this",656],["T_OBJECT_OPERATOR","->",656],["T_STRING","connection",656],["T_OBJECT_OPERATOR","->",656],["T_STRING","quoteInto",656],"(",["T_CONSTANT_ENCAPSED_STRING","'parent_product_id IN (?)'",656],",",["T_WHITESPACE"," ",656],["T_VARIABLE","$productIdsInWhere",656],")",["T_WHITESPACE","\n        ",656],")",";",["T_WHITESPACE","\n        ",657],["T_RETURN","return",658],["T_WHITESPACE"," ",658],["T_VARIABLE","$this",658],";",["T_WHITESPACE","\n    ",658],"}",["T_WHITESPACE","\n\n    ",659],["T_DOC_COMMENT","\/**\n     * Clear cached values between bunches\n     *\n     * @return \\Magento\\CatalogImportExport\\Model\\Import\\Product\\Type\\AbstractType\n     *\/",661],["T_WHITESPACE","\n    ",665],["T_PROTECTED","protected",666],["T_WHITESPACE"," ",666],["T_FUNCTION","function",666],["T_WHITESPACE"," ",666],["T_STRING","clear",666],"(",")",["T_WHITESPACE","\n    ",666],"{",["T_WHITESPACE","\n        ",667],["T_VARIABLE","$this",668],["T_OBJECT_OPERATOR","->",668],["T_STRING","_cachedOptions",668],["T_WHITESPACE"," ",668],"=",["T_WHITESPACE"," ",668],"[","]",";",["T_WHITESPACE","\n        ",668],["T_VARIABLE","$this",669],["T_OBJECT_OPERATOR","->",669],["T_STRING","_cachedOptionSelectQuery",669],["T_WHITESPACE"," ",669],"=",["T_WHITESPACE"," ",669],"[","]",";",["T_WHITESPACE","\n        ",669],["T_VARIABLE","$this",670],["T_OBJECT_OPERATOR","->",670],["T_STRING","_cachedSkus",670],["T_WHITESPACE"," ",670],"=",["T_WHITESPACE"," ",670],"[","]",";",["T_WHITESPACE","\n        ",670],["T_VARIABLE","$this",671],["T_OBJECT_OPERATOR","->",671],["T_STRING","_cachedSkuToProducts",671],["T_WHITESPACE"," ",671],"=",["T_WHITESPACE"," ",671],"[","]",";",["T_WHITESPACE","\n        ",671],["T_RETURN","return",672],["T_WHITESPACE"," ",672],["T_VARIABLE","$this",672],";",["T_WHITESPACE","\n    ",672],"}",["T_WHITESPACE","\n",673],"}",["T_WHITESPACE","\n",674]]
[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Copyright \u00c2\u00a9 2013-2017 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n *\/",2],["T_WHITESPACE","\n\n",5],["T_DOC_COMMENT","\/**\n * Search term block\n *\/",7],["T_WHITESPACE","\n",9],["T_NAMESPACE","namespace",10],["T_WHITESPACE"," ",10],["T_STRING","Magento",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Search",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Block",10],";",["T_WHITESPACE","\n\n",10],["T_USE","use",12],["T_WHITESPACE"," ",12],["T_STRING","Magento",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Framework",12],["T_NS_SEPARATOR","\\",12],["T_STRING","UrlFactory",12],";",["T_WHITESPACE","\n",12],["T_USE","use",13],["T_WHITESPACE"," ",13],["T_STRING","Magento",13],["T_NS_SEPARATOR","\\",13],["T_STRING","Framework",13],["T_NS_SEPARATOR","\\",13],["T_STRING","UrlInterface",13],";",["T_WHITESPACE","\n",13],["T_USE","use",14],["T_WHITESPACE"," ",14],["T_STRING","Magento",14],["T_NS_SEPARATOR","\\",14],["T_STRING","Framework",14],["T_NS_SEPARATOR","\\",14],["T_STRING","View",14],["T_NS_SEPARATOR","\\",14],["T_STRING","Element",14],["T_NS_SEPARATOR","\\",14],["T_STRING","Template",14],";",["T_WHITESPACE","\n",14],["T_USE","use",15],["T_WHITESPACE"," ",15],["T_STRING","Magento",15],["T_NS_SEPARATOR","\\",15],["T_STRING","Framework",15],["T_NS_SEPARATOR","\\",15],["T_STRING","View",15],["T_NS_SEPARATOR","\\",15],["T_STRING","Element",15],["T_NS_SEPARATOR","\\",15],["T_STRING","Template",15],["T_NS_SEPARATOR","\\",15],["T_STRING","Context",15],";",["T_WHITESPACE","\n",15],["T_USE","use",16],["T_WHITESPACE"," ",16],["T_STRING","Magento",16],["T_NS_SEPARATOR","\\",16],["T_STRING","Search",16],["T_NS_SEPARATOR","\\",16],["T_STRING","Model",16],["T_NS_SEPARATOR","\\",16],["T_STRING","ResourceModel",16],["T_NS_SEPARATOR","\\",16],["T_STRING","Query",16],["T_NS_SEPARATOR","\\",16],["T_STRING","CollectionFactory",16],";",["T_WHITESPACE","\n\n",16],["T_CLASS","class",18],["T_WHITESPACE"," ",18],["T_STRING","Term",18],["T_WHITESPACE"," ",18],["T_EXTENDS","extends",18],["T_WHITESPACE"," ",18],["T_STRING","Template",18],["T_WHITESPACE","\n",18],"{",["T_WHITESPACE","\n    ",19],["T_DOC_COMMENT","\/**\n     * @var array\n     *\/",20],["T_WHITESPACE","\n    ",22],["T_PROTECTED","protected",23],["T_WHITESPACE"," ",23],["T_VARIABLE","$_terms",23],";",["T_WHITESPACE","\n\n    ",23],["T_DOC_COMMENT","\/**\n     * @var int\n     *\/",25],["T_WHITESPACE","\n    ",27],["T_PROTECTED","protected",28],["T_WHITESPACE"," ",28],["T_VARIABLE","$_minPopularity",28],";",["T_WHITESPACE","\n\n    ",28],["T_DOC_COMMENT","\/**\n     * @var int\n     *\/",30],["T_WHITESPACE","\n    ",32],["T_PROTECTED","protected",33],["T_WHITESPACE"," ",33],["T_VARIABLE","$_maxPopularity",33],";",["T_WHITESPACE","\n\n    ",33],["T_DOC_COMMENT","\/**\n     * Url factory\n     *\n     * @var UrlFactory\n     *\/",35],["T_WHITESPACE","\n    ",39],["T_PROTECTED","protected",40],["T_WHITESPACE"," ",40],["T_VARIABLE","$_urlFactory",40],";",["T_WHITESPACE","\n\n    ",40],["T_DOC_COMMENT","\/**\n     * Query collection factory\n     *\n     * @var CollectionFactory\n     *\/",42],["T_WHITESPACE","\n    ",46],["T_PROTECTED","protected",47],["T_WHITESPACE"," ",47],["T_VARIABLE","$_queryCollectionFactory",47],";",["T_WHITESPACE","\n\n    ",47],["T_DOC_COMMENT","\/**\n     * @param Context $context\n     * @param CollectionFactory $queryCollectionFactory\n     * @param UrlFactory $urlFactory\n     * @param array $data\n     *\/",49],["T_WHITESPACE","\n    ",54],["T_PUBLIC","public",55],["T_WHITESPACE"," ",55],["T_FUNCTION","function",55],["T_WHITESPACE"," ",55],["T_STRING","__construct",55],"(",["T_WHITESPACE","\n        ",55],["T_STRING","Context",56],["T_WHITESPACE"," ",56],["T_VARIABLE","$context",56],",",["T_WHITESPACE","\n        ",56],["T_STRING","CollectionFactory",57],["T_WHITESPACE"," ",57],["T_VARIABLE","$queryCollectionFactory",57],",",["T_WHITESPACE","\n        ",57],["T_STRING","UrlFactory",58],["T_WHITESPACE"," ",58],["T_VARIABLE","$urlFactory",58],",",["T_WHITESPACE","\n        ",58],["T_ARRAY","array",59],["T_WHITESPACE"," ",59],["T_VARIABLE","$data",59],["T_WHITESPACE"," ",59],"=",["T_WHITESPACE"," ",59],"[","]",["T_WHITESPACE","\n    ",59],")",["T_WHITESPACE"," ",60],"{",["T_WHITESPACE","\n        ",60],["T_VARIABLE","$this",61],["T_OBJECT_OPERATOR","->",61],["T_STRING","_queryCollectionFactory",61],["T_WHITESPACE"," ",61],"=",["T_WHITESPACE"," ",61],["T_VARIABLE","$queryCollectionFactory",61],";",["T_WHITESPACE","\n        ",61],["T_VARIABLE","$this",62],["T_OBJECT_OPERATOR","->",62],["T_STRING","_urlFactory",62],["T_WHITESPACE"," ",62],"=",["T_WHITESPACE"," ",62],["T_VARIABLE","$urlFactory",62],";",["T_WHITESPACE","\n        ",62],["T_STRING","parent",63],["T_DOUBLE_COLON","::",63],["T_STRING","__construct",63],"(",["T_VARIABLE","$context",63],",",["T_WHITESPACE"," ",63],["T_VARIABLE","$data",63],")",";",["T_WHITESPACE","\n    ",63],"}",["T_WHITESPACE","\n\n    ",64],["T_DOC_COMMENT","\/**\n     * Load terms and try to sort it by names\n     *\n     * @return $this\n     *\/",66],["T_WHITESPACE","\n    ",70],["T_PROTECTED","protected",71],["T_WHITESPACE"," ",71],["T_FUNCTION","function",71],["T_WHITESPACE"," ",71],["T_STRING","_loadTerms",71],"(",")",["T_WHITESPACE","\n    ",71],"{",["T_WHITESPACE","\n        ",72],["T_IF","if",73],["T_WHITESPACE"," ",73],"(",["T_EMPTY","empty",73],"(",["T_VARIABLE","$this",73],["T_OBJECT_OPERATOR","->",73],["T_STRING","_terms",73],")",")",["T_WHITESPACE"," ",73],"{",["T_WHITESPACE","\n            ",73],["T_VARIABLE","$this",74],["T_OBJECT_OPERATOR","->",74],["T_STRING","_terms",74],["T_WHITESPACE"," ",74],"=",["T_WHITESPACE"," ",74],"[","]",";",["T_WHITESPACE","\n            ",74],["T_VARIABLE","$terms",75],["T_WHITESPACE"," ",75],"=",["T_WHITESPACE"," ",75],["T_VARIABLE","$this",75],["T_OBJECT_OPERATOR","->",75],["T_STRING","_queryCollectionFactory",75],["T_OBJECT_OPERATOR","->",75],["T_STRING","create",75],"(",")",["T_OBJECT_OPERATOR","->",75],["T_STRING","setPopularQueryFilter",75],"(",["T_WHITESPACE","\n                ",75],["T_VARIABLE","$this",76],["T_OBJECT_OPERATOR","->",76],["T_STRING","_storeManager",76],["T_OBJECT_OPERATOR","->",76],["T_STRING","getStore",76],"(",")",["T_OBJECT_OPERATOR","->",76],["T_STRING","getId",76],"(",")",["T_WHITESPACE","\n            ",76],")",["T_OBJECT_OPERATOR","->",77],["T_STRING","setPageSize",77],"(",["T_WHITESPACE","\n                ",77],["T_LNUMBER","100",78],["T_WHITESPACE","\n            ",78],")",["T_OBJECT_OPERATOR","->",79],["T_STRING","load",79],"(",")",["T_OBJECT_OPERATOR","->",79],["T_STRING","getItems",79],"(",")",";",["T_WHITESPACE","\n\n            ",79],["T_IF","if",81],["T_WHITESPACE"," ",81],"(",["T_STRING","count",81],"(",["T_VARIABLE","$terms",81],")",["T_WHITESPACE"," ",81],["T_IS_EQUAL","==",81],["T_WHITESPACE"," ",81],["T_LNUMBER","0",81],")",["T_WHITESPACE"," ",81],"{",["T_WHITESPACE","\n                ",81],["T_RETURN","return",82],["T_WHITESPACE"," ",82],["T_VARIABLE","$this",82],";",["T_WHITESPACE","\n            ",82],"}",["T_WHITESPACE","\n\n            ",83],["T_VARIABLE","$this",85],["T_OBJECT_OPERATOR","->",85],["T_STRING","_maxPopularity",85],["T_WHITESPACE"," ",85],"=",["T_WHITESPACE"," ",85],["T_STRING","reset",85],"(",["T_VARIABLE","$terms",85],")",["T_OBJECT_OPERATOR","->",85],["T_STRING","getPopularity",85],"(",")",";",["T_WHITESPACE","\n            ",85],["T_VARIABLE","$this",86],["T_OBJECT_OPERATOR","->",86],["T_STRING","_minPopularity",86],["T_WHITESPACE"," ",86],"=",["T_WHITESPACE"," ",86],["T_STRING","end",86],"(",["T_VARIABLE","$terms",86],")",["T_OBJECT_OPERATOR","->",86],["T_STRING","getPopularity",86],"(",")",";",["T_WHITESPACE","\n            ",86],["T_VARIABLE","$range",87],["T_WHITESPACE"," ",87],"=",["T_WHITESPACE"," ",87],["T_VARIABLE","$this",87],["T_OBJECT_OPERATOR","->",87],["T_STRING","_maxPopularity",87],["T_WHITESPACE"," ",87],"-",["T_WHITESPACE"," ",87],["T_VARIABLE","$this",87],["T_OBJECT_OPERATOR","->",87],["T_STRING","_minPopularity",87],";",["T_WHITESPACE","\n            ",87],["T_VARIABLE","$range",88],["T_WHITESPACE"," ",88],"=",["T_WHITESPACE"," ",88],["T_VARIABLE","$range",88],["T_WHITESPACE"," ",88],["T_IS_EQUAL","==",88],["T_WHITESPACE"," ",88],["T_LNUMBER","0",88],["T_WHITESPACE"," ",88],"?",["T_WHITESPACE"," ",88],["T_LNUMBER","1",88],["T_WHITESPACE"," ",88],":",["T_WHITESPACE"," ",88],["T_VARIABLE","$range",88],";",["T_WHITESPACE","\n            ",88],["T_FOREACH","foreach",89],["T_WHITESPACE"," ",89],"(",["T_VARIABLE","$terms",89],["T_WHITESPACE"," ",89],["T_AS","as",89],["T_WHITESPACE"," ",89],["T_VARIABLE","$term",89],")",["T_WHITESPACE"," ",89],"{",["T_WHITESPACE","\n                ",89],["T_IF","if",90],["T_WHITESPACE"," ",90],"(","!",["T_VARIABLE","$term",90],["T_OBJECT_OPERATOR","->",90],["T_STRING","getPopularity",90],"(",")",")",["T_WHITESPACE"," ",90],"{",["T_WHITESPACE","\n                    ",90],["T_CONTINUE","continue",91],";",["T_WHITESPACE","\n                ",91],"}",["T_WHITESPACE","\n                ",92],["T_VARIABLE","$term",93],["T_OBJECT_OPERATOR","->",93],["T_STRING","setRatio",93],"(","(",["T_VARIABLE","$term",93],["T_OBJECT_OPERATOR","->",93],["T_STRING","getPopularity",93],"(",")",["T_WHITESPACE"," ",93],"-",["T_WHITESPACE"," ",93],["T_VARIABLE","$this",93],["T_OBJECT_OPERATOR","->",93],["T_STRING","_minPopularity",93],")",["T_WHITESPACE"," ",93],"\/",["T_WHITESPACE"," ",93],["T_VARIABLE","$range",93],")",";",["T_WHITESPACE","\n                ",93],["T_VARIABLE","$temp",94],"[",["T_VARIABLE","$term",94],["T_OBJECT_OPERATOR","->",94],["T_STRING","getName",94],"(",")","]",["T_WHITESPACE"," ",94],"=",["T_WHITESPACE"," ",94],["T_VARIABLE","$term",94],";",["T_WHITESPACE","\n                ",94],["T_VARIABLE","$termKeys",95],"[","]",["T_WHITESPACE"," ",95],"=",["T_WHITESPACE"," ",95],["T_VARIABLE","$term",95],["T_OBJECT_OPERATOR","->",95],["T_STRING","getName",95],"(",")",";",["T_WHITESPACE","\n            ",95],"}",["T_WHITESPACE","\n            ",96],["T_STRING","natcasesort",97],"(",["T_VARIABLE","$termKeys",97],")",";",["T_WHITESPACE","\n\n            ",97],["T_FOREACH","foreach",99],["T_WHITESPACE"," ",99],"(",["T_VARIABLE","$termKeys",99],["T_WHITESPACE"," ",99],["T_AS","as",99],["T_WHITESPACE"," ",99],["T_VARIABLE","$termKey",99],")",["T_WHITESPACE"," ",99],"{",["T_WHITESPACE","\n                ",99],["T_VARIABLE","$this",100],["T_OBJECT_OPERATOR","->",100],["T_STRING","_terms",100],"[",["T_VARIABLE","$termKey",100],"]",["T_WHITESPACE"," ",100],"=",["T_WHITESPACE"," ",100],["T_VARIABLE","$temp",100],"[",["T_VARIABLE","$termKey",100],"]",";",["T_WHITESPACE","\n            ",100],"}",["T_WHITESPACE","\n        ",101],"}",["T_WHITESPACE","\n        ",102],["T_RETURN","return",103],["T_WHITESPACE"," ",103],["T_VARIABLE","$this",103],";",["T_WHITESPACE","\n    ",103],"}",["T_WHITESPACE","\n\n    ",104],["T_DOC_COMMENT","\/**\n     * @return array\n     *\/",106],["T_WHITESPACE","\n    ",108],["T_PUBLIC","public",109],["T_WHITESPACE"," ",109],["T_FUNCTION","function",109],["T_WHITESPACE"," ",109],["T_STRING","getTerms",109],"(",")",["T_WHITESPACE","\n    ",109],"{",["T_WHITESPACE","\n        ",110],["T_VARIABLE","$this",111],["T_OBJECT_OPERATOR","->",111],["T_STRING","_loadTerms",111],"(",")",";",["T_WHITESPACE","\n        ",111],["T_RETURN","return",112],["T_WHITESPACE"," ",112],["T_VARIABLE","$this",112],["T_OBJECT_OPERATOR","->",112],["T_STRING","_terms",112],";",["T_WHITESPACE","\n    ",112],"}",["T_WHITESPACE","\n\n    ",113],["T_DOC_COMMENT","\/**\n     * @param \\Magento\\Framework\\DataObject $obj\n     * @return string\n     *\/",115],["T_WHITESPACE","\n    ",118],["T_PUBLIC","public",119],["T_WHITESPACE"," ",119],["T_FUNCTION","function",119],["T_WHITESPACE"," ",119],["T_STRING","getSearchUrl",119],"(",["T_VARIABLE","$obj",119],")",["T_WHITESPACE","\n    ",119],"{",["T_WHITESPACE","\n        ",120],["T_DOC_COMMENT","\/** @var $url UrlInterface *\/",121],["T_WHITESPACE","\n        ",121],["T_VARIABLE","$url",122],["T_WHITESPACE"," ",122],"=",["T_WHITESPACE"," ",122],["T_VARIABLE","$this",122],["T_OBJECT_OPERATOR","->",122],["T_STRING","_urlFactory",122],["T_OBJECT_OPERATOR","->",122],["T_STRING","create",122],"(",")",";",["T_WHITESPACE","\n        ",122],["T_COMMENT","\/*\n         * url encoding will be done in Url.php http_build_query\n         * so no need to explicitly called urlencode for the text\n         *\/",123],["T_WHITESPACE","\n        ",126],["T_VARIABLE","$url",127],["T_OBJECT_OPERATOR","->",127],["T_STRING","setQueryParam",127],"(",["T_CONSTANT_ENCAPSED_STRING","'q'",127],",",["T_WHITESPACE"," ",127],["T_VARIABLE","$obj",127],["T_OBJECT_OPERATOR","->",127],["T_STRING","getName",127],"(",")",")",";",["T_WHITESPACE","\n        ",127],["T_RETURN","return",128],["T_WHITESPACE"," ",128],["T_VARIABLE","$url",128],["T_OBJECT_OPERATOR","->",128],["T_STRING","getUrl",128],"(",["T_CONSTANT_ENCAPSED_STRING","'catalogsearch\/result'",128],")",";",["T_WHITESPACE","\n    ",128],"}",["T_WHITESPACE","\n\n    ",129],["T_DOC_COMMENT","\/**\n     * @return int\n     *\/",131],["T_WHITESPACE","\n    ",133],["T_PUBLIC","public",134],["T_WHITESPACE"," ",134],["T_FUNCTION","function",134],["T_WHITESPACE"," ",134],["T_STRING","getMaxPopularity",134],"(",")",["T_WHITESPACE","\n    ",134],"{",["T_WHITESPACE","\n        ",135],["T_RETURN","return",136],["T_WHITESPACE"," ",136],["T_VARIABLE","$this",136],["T_OBJECT_OPERATOR","->",136],["T_STRING","_maxPopularity",136],";",["T_WHITESPACE","\n    ",136],"}",["T_WHITESPACE","\n\n    ",137],["T_DOC_COMMENT","\/**\n     * @return int\n     *\/",139],["T_WHITESPACE","\n    ",141],["T_PUBLIC","public",142],["T_WHITESPACE"," ",142],["T_FUNCTION","function",142],["T_WHITESPACE"," ",142],["T_STRING","getMinPopularity",142],"(",")",["T_WHITESPACE","\n    ",142],"{",["T_WHITESPACE","\n        ",143],["T_RETURN","return",144],["T_WHITESPACE"," ",144],["T_VARIABLE","$this",144],["T_OBJECT_OPERATOR","->",144],["T_STRING","_minPopularity",144],";",["T_WHITESPACE","\n    ",144],"}",["T_WHITESPACE","\n",145],"}",["T_WHITESPACE","\n",146]]
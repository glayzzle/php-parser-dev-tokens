[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Copyright \u00c2\u00a9 2013-2017 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n *\/",2],["T_WHITESPACE","\n",5],["T_NAMESPACE","namespace",6],["T_WHITESPACE"," ",6],["T_STRING","Magento",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Search",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Helper",6],";",["T_WHITESPACE","\n\n",6],["T_USE","use",8],["T_WHITESPACE"," ",8],["T_STRING","Magento",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Framework",8],["T_NS_SEPARATOR","\\",8],["T_STRING","App",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Config",8],["T_NS_SEPARATOR","\\",8],["T_STRING","ScopeConfigInterface",8],";",["T_WHITESPACE","\n",8],["T_USE","use",9],["T_WHITESPACE"," ",9],["T_STRING","Magento",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Framework",9],["T_NS_SEPARATOR","\\",9],["T_STRING","App",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Helper",9],["T_NS_SEPARATOR","\\",9],["T_STRING","AbstractHelper",9],";",["T_WHITESPACE","\n",9],["T_USE","use",10],["T_WHITESPACE"," ",10],["T_STRING","Magento",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Framework",10],["T_NS_SEPARATOR","\\",10],["T_STRING","App",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Helper",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Context",10],";",["T_WHITESPACE","\n",10],["T_USE","use",11],["T_WHITESPACE"," ",11],["T_STRING","Magento",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Framework",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Escaper",11],";",["T_WHITESPACE","\n",11],["T_USE","use",12],["T_WHITESPACE"," ",12],["T_STRING","Magento",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Framework",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Stdlib",12],["T_NS_SEPARATOR","\\",12],["T_STRING","StringUtils",12],";",["T_WHITESPACE","\n",12],["T_USE","use",13],["T_WHITESPACE"," ",13],["T_STRING","Magento",13],["T_NS_SEPARATOR","\\",13],["T_STRING","Store",13],["T_NS_SEPARATOR","\\",13],["T_STRING","Model",13],["T_NS_SEPARATOR","\\",13],["T_STRING","StoreManagerInterface",13],";",["T_WHITESPACE","\n",13],["T_USE","use",14],["T_WHITESPACE"," ",14],["T_STRING","Magento",14],["T_NS_SEPARATOR","\\",14],["T_STRING","Search",14],["T_NS_SEPARATOR","\\",14],["T_STRING","Model",14],["T_NS_SEPARATOR","\\",14],["T_STRING","Query",14],["T_WHITESPACE"," ",14],["T_AS","as",14],["T_WHITESPACE"," ",14],["T_STRING","SearchQuery",14],";",["T_WHITESPACE","\n",14],["T_USE","use",15],["T_WHITESPACE"," ",15],["T_STRING","Magento",15],["T_NS_SEPARATOR","\\",15],["T_STRING","Search",15],["T_NS_SEPARATOR","\\",15],["T_STRING","Model",15],["T_NS_SEPARATOR","\\",15],["T_STRING","QueryFactory",15],";",["T_WHITESPACE","\n\n",15],["T_DOC_COMMENT","\/**\n * Search helper\n *\/",17],["T_WHITESPACE","\n",19],["T_CLASS","class",20],["T_WHITESPACE"," ",20],["T_STRING","Data",20],["T_WHITESPACE"," ",20],["T_EXTENDS","extends",20],["T_WHITESPACE"," ",20],["T_STRING","AbstractHelper",20],["T_WHITESPACE","\n",20],"{",["T_WHITESPACE","\n    ",21],["T_DOC_COMMENT","\/**\n     * Note messages\n     *\n     * @var array\n     *\/",22],["T_WHITESPACE","\n    ",26],["T_PROTECTED","protected",27],["T_WHITESPACE"," ",27],["T_VARIABLE","$_messages",27],["T_WHITESPACE"," ",27],"=",["T_WHITESPACE"," ",27],"[","]",";",["T_WHITESPACE","\n\n    ",27],["T_DOC_COMMENT","\/**\n     * Magento string lib\n     *\n     * @var String\n     *\/",29],["T_WHITESPACE","\n    ",33],["T_PROTECTED","protected",34],["T_WHITESPACE"," ",34],["T_VARIABLE","$string",34],";",["T_WHITESPACE","\n\n    ",34],["T_DOC_COMMENT","\/**\n     * Core store config\n     *\n     * @var ScopeConfigInterface\n     *\/",36],["T_WHITESPACE","\n    ",40],["T_PROTECTED","protected",41],["T_WHITESPACE"," ",41],["T_VARIABLE","$scopeConfig",41],";",["T_WHITESPACE","\n\n    ",41],["T_DOC_COMMENT","\/**\n     * @var Escaper\n     *\/",43],["T_WHITESPACE","\n    ",45],["T_PROTECTED","protected",46],["T_WHITESPACE"," ",46],["T_VARIABLE","$escaper",46],";",["T_WHITESPACE","\n\n    ",46],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Store\\Model\\StoreManagerInterface\n     *\/",48],["T_WHITESPACE","\n    ",50],["T_PROTECTED","protected",51],["T_WHITESPACE"," ",51],["T_VARIABLE","$storeManager",51],";",["T_WHITESPACE","\n\n    ",51],["T_DOC_COMMENT","\/**\n     * Construct\n     *\n     * @param Context $context\n     * @param StringUtils $string\n     * @param Escaper $escaper\n     * @param StoreManagerInterface $storeManager\n     *\/",53],["T_WHITESPACE","\n    ",60],["T_PUBLIC","public",61],["T_WHITESPACE"," ",61],["T_FUNCTION","function",61],["T_WHITESPACE"," ",61],["T_STRING","__construct",61],"(",["T_WHITESPACE","\n        ",61],["T_STRING","Context",62],["T_WHITESPACE"," ",62],["T_VARIABLE","$context",62],",",["T_WHITESPACE","\n        ",62],["T_STRING","StringUtils",63],["T_WHITESPACE"," ",63],["T_VARIABLE","$string",63],",",["T_WHITESPACE","\n        ",63],["T_STRING","Escaper",64],["T_WHITESPACE"," ",64],["T_VARIABLE","$escaper",64],",",["T_WHITESPACE","\n        ",64],["T_STRING","StoreManagerInterface",65],["T_WHITESPACE"," ",65],["T_VARIABLE","$storeManager",65],["T_WHITESPACE","\n    ",65],")",["T_WHITESPACE"," ",66],"{",["T_WHITESPACE","\n        ",66],["T_VARIABLE","$this",67],["T_OBJECT_OPERATOR","->",67],["T_STRING","string",67],["T_WHITESPACE"," ",67],"=",["T_WHITESPACE"," ",67],["T_VARIABLE","$string",67],";",["T_WHITESPACE","\n        ",67],["T_VARIABLE","$this",68],["T_OBJECT_OPERATOR","->",68],["T_STRING","scopeConfig",68],["T_WHITESPACE"," ",68],"=",["T_WHITESPACE"," ",68],["T_VARIABLE","$context",68],["T_OBJECT_OPERATOR","->",68],["T_STRING","getScopeConfig",68],"(",")",";",["T_WHITESPACE","\n        ",68],["T_VARIABLE","$this",69],["T_OBJECT_OPERATOR","->",69],["T_STRING","escaper",69],["T_WHITESPACE"," ",69],"=",["T_WHITESPACE"," ",69],["T_VARIABLE","$escaper",69],";",["T_WHITESPACE","\n        ",69],["T_VARIABLE","$this",70],["T_OBJECT_OPERATOR","->",70],["T_STRING","storeManager",70],["T_WHITESPACE"," ",70],"=",["T_WHITESPACE"," ",70],["T_VARIABLE","$storeManager",70],";",["T_WHITESPACE","\n        ",70],["T_STRING","parent",71],["T_DOUBLE_COLON","::",71],["T_STRING","__construct",71],"(",["T_VARIABLE","$context",71],")",";",["T_WHITESPACE","\n    ",71],"}",["T_WHITESPACE","\n\n    ",72],["T_DOC_COMMENT","\/**\n     * Is a minimum query length\n     *\n     * @return bool\n     *\/",74],["T_WHITESPACE","\n    ",78],["T_PUBLIC","public",79],["T_WHITESPACE"," ",79],["T_FUNCTION","function",79],["T_WHITESPACE"," ",79],["T_STRING","isMinQueryLength",79],"(",")",["T_WHITESPACE","\n    ",79],"{",["T_WHITESPACE","\n        ",80],["T_VARIABLE","$minQueryLength",81],["T_WHITESPACE"," ",81],"=",["T_WHITESPACE"," ",81],["T_VARIABLE","$this",81],["T_OBJECT_OPERATOR","->",81],["T_STRING","getMinQueryLength",81],"(",")",";",["T_WHITESPACE","\n        ",81],["T_VARIABLE","$thisQueryLength",82],["T_WHITESPACE"," ",82],"=",["T_WHITESPACE"," ",82],["T_VARIABLE","$this",82],["T_OBJECT_OPERATOR","->",82],["T_STRING","string",82],["T_OBJECT_OPERATOR","->",82],["T_STRING","strlen",82],"(",["T_VARIABLE","$this",82],["T_OBJECT_OPERATOR","->",82],["T_STRING","getQueryText",82],"(",")",")",";",["T_WHITESPACE","\n        ",82],["T_RETURN","return",83],["T_WHITESPACE"," ",83],"!",["T_VARIABLE","$thisQueryLength",83],["T_WHITESPACE"," ",83],["T_BOOLEAN_OR","||",83],["T_WHITESPACE"," ",83],["T_VARIABLE","$minQueryLength",83],["T_WHITESPACE"," ",83],["T_IS_NOT_IDENTICAL","!==",83],["T_WHITESPACE"," ",83],["T_CONSTANT_ENCAPSED_STRING","''",83],["T_WHITESPACE"," ",83],["T_BOOLEAN_AND","&&",83],["T_WHITESPACE"," ",83],["T_VARIABLE","$thisQueryLength",83],["T_WHITESPACE"," ",83],"<",["T_WHITESPACE"," ",83],["T_VARIABLE","$minQueryLength",83],";",["T_WHITESPACE","\n    ",83],"}",["T_WHITESPACE","\n\n    ",84],["T_DOC_COMMENT","\/**\n     * Retrieve HTML escaped search query\n     *\n     * @return string\n     *\/",86],["T_WHITESPACE","\n    ",90],["T_PUBLIC","public",91],["T_WHITESPACE"," ",91],["T_FUNCTION","function",91],["T_WHITESPACE"," ",91],["T_STRING","getEscapedQueryText",91],"(",")",["T_WHITESPACE","\n    ",91],"{",["T_WHITESPACE","\n        ",92],["T_RETURN","return",93],["T_WHITESPACE"," ",93],["T_VARIABLE","$this",93],["T_OBJECT_OPERATOR","->",93],["T_STRING","escaper",93],["T_OBJECT_OPERATOR","->",93],["T_STRING","escapeHtml",93],"(",["T_WHITESPACE","\n            ",93],["T_VARIABLE","$this",94],["T_OBJECT_OPERATOR","->",94],["T_STRING","getPreparedQueryText",94],"(",["T_VARIABLE","$this",94],["T_OBJECT_OPERATOR","->",94],["T_STRING","getQueryText",94],"(",")",",",["T_WHITESPACE"," ",94],["T_VARIABLE","$this",94],["T_OBJECT_OPERATOR","->",94],["T_STRING","getMaxQueryLength",94],"(",")",")",["T_WHITESPACE","\n        ",94],")",";",["T_WHITESPACE","\n    ",95],"}",["T_WHITESPACE","\n\n    ",96],["T_DOC_COMMENT","\/**\n     * Retrieve result page url and set \"secure\" param to avoid confirm\n     * message when we submit form from secure page to unsecure\n     *\n     * @param   string $query\n     * @return  string\n     *\/",98],["T_WHITESPACE","\n    ",104],["T_PUBLIC","public",105],["T_WHITESPACE"," ",105],["T_FUNCTION","function",105],["T_WHITESPACE"," ",105],["T_STRING","getResultUrl",105],"(",["T_VARIABLE","$query",105],["T_WHITESPACE"," ",105],"=",["T_WHITESPACE"," ",105],["T_STRING","null",105],")",["T_WHITESPACE","\n    ",105],"{",["T_WHITESPACE","\n        ",106],["T_RETURN","return",107],["T_WHITESPACE"," ",107],["T_VARIABLE","$this",107],["T_OBJECT_OPERATOR","->",107],["T_STRING","_getUrl",107],"(",["T_WHITESPACE","\n            ",107],["T_CONSTANT_ENCAPSED_STRING","'catalogsearch\/result'",108],",",["T_WHITESPACE","\n            ",108],"[",["T_CONSTANT_ENCAPSED_STRING","'_query'",109],["T_WHITESPACE"," ",109],["T_DOUBLE_ARROW","=>",109],["T_WHITESPACE"," ",109],"[",["T_STRING","QueryFactory",109],["T_DOUBLE_COLON","::",109],["T_STRING","QUERY_VAR_NAME",109],["T_WHITESPACE"," ",109],["T_DOUBLE_ARROW","=>",109],["T_WHITESPACE"," ",109],["T_VARIABLE","$query",109],"]",",",["T_WHITESPACE"," ",109],["T_CONSTANT_ENCAPSED_STRING","'_secure'",109],["T_WHITESPACE"," ",109],["T_DOUBLE_ARROW","=>",109],["T_WHITESPACE"," ",109],["T_VARIABLE","$this",109],["T_OBJECT_OPERATOR","->",109],["T_STRING","_request",109],["T_OBJECT_OPERATOR","->",109],["T_STRING","isSecure",109],"(",")","]",["T_WHITESPACE","\n        ",109],")",";",["T_WHITESPACE","\n    ",110],"}",["T_WHITESPACE","\n\n    ",111],["T_DOC_COMMENT","\/**\n     * Retrieve suggest url\n     *\n     * @return string\n     *\/",113],["T_WHITESPACE","\n    ",117],["T_PUBLIC","public",118],["T_WHITESPACE"," ",118],["T_FUNCTION","function",118],["T_WHITESPACE"," ",118],["T_STRING","getSuggestUrl",118],"(",")",["T_WHITESPACE","\n    ",118],"{",["T_WHITESPACE","\n        ",119],["T_RETURN","return",120],["T_WHITESPACE"," ",120],["T_VARIABLE","$this",120],["T_OBJECT_OPERATOR","->",120],["T_STRING","_getUrl",120],"(",["T_WHITESPACE","\n            ",120],["T_CONSTANT_ENCAPSED_STRING","'search\/ajax\/suggest'",121],",",["T_WHITESPACE","\n            ",121],"[",["T_CONSTANT_ENCAPSED_STRING","'_secure'",122],["T_WHITESPACE"," ",122],["T_DOUBLE_ARROW","=>",122],["T_WHITESPACE"," ",122],["T_VARIABLE","$this",122],["T_OBJECT_OPERATOR","->",122],["T_STRING","storeManager",122],["T_OBJECT_OPERATOR","->",122],["T_STRING","getStore",122],"(",")",["T_OBJECT_OPERATOR","->",122],["T_STRING","isCurrentlySecure",122],"(",")","]",["T_WHITESPACE","\n        ",122],")",";",["T_WHITESPACE","\n    ",123],"}",["T_WHITESPACE","\n\n    ",124],["T_DOC_COMMENT","\/**\n     * Retrieve search term url\n     *\n     * @return string\n     *\/",126],["T_WHITESPACE","\n    ",130],["T_PUBLIC","public",131],["T_WHITESPACE"," ",131],["T_FUNCTION","function",131],["T_WHITESPACE"," ",131],["T_STRING","getSearchTermUrl",131],"(",")",["T_WHITESPACE","\n    ",131],"{",["T_WHITESPACE","\n        ",132],["T_RETURN","return",133],["T_WHITESPACE"," ",133],["T_VARIABLE","$this",133],["T_OBJECT_OPERATOR","->",133],["T_STRING","_getUrl",133],"(",["T_CONSTANT_ENCAPSED_STRING","'search\/term\/popular'",133],")",";",["T_WHITESPACE","\n    ",133],"}",["T_WHITESPACE","\n\n    ",134],["T_DOC_COMMENT","\/**\n     * Retrieve minimum query length\n     *\n     * @param mixed $store\n     * @return int|string\n     *\/",136],["T_WHITESPACE","\n    ",141],["T_PUBLIC","public",142],["T_WHITESPACE"," ",142],["T_FUNCTION","function",142],["T_WHITESPACE"," ",142],["T_STRING","getMinQueryLength",142],"(",["T_VARIABLE","$store",142],["T_WHITESPACE"," ",142],"=",["T_WHITESPACE"," ",142],["T_STRING","null",142],")",["T_WHITESPACE","\n    ",142],"{",["T_WHITESPACE","\n        ",143],["T_RETURN","return",144],["T_WHITESPACE"," ",144],["T_VARIABLE","$this",144],["T_OBJECT_OPERATOR","->",144],["T_STRING","scopeConfig",144],["T_OBJECT_OPERATOR","->",144],["T_STRING","getValue",144],"(",["T_WHITESPACE","\n            ",144],["T_STRING","SearchQuery",145],["T_DOUBLE_COLON","::",145],["T_STRING","XML_PATH_MIN_QUERY_LENGTH",145],",",["T_WHITESPACE","\n            ",145],["T_NS_SEPARATOR","\\",146],["T_STRING","Magento",146],["T_NS_SEPARATOR","\\",146],["T_STRING","Store",146],["T_NS_SEPARATOR","\\",146],["T_STRING","Model",146],["T_NS_SEPARATOR","\\",146],["T_STRING","ScopeInterface",146],["T_DOUBLE_COLON","::",146],["T_STRING","SCOPE_STORE",146],",",["T_WHITESPACE","\n            ",146],["T_VARIABLE","$store",147],["T_WHITESPACE","\n        ",147],")",";",["T_WHITESPACE","\n    ",148],"}",["T_WHITESPACE","\n\n    ",149],["T_DOC_COMMENT","\/**\n     * Retrieve maximum query length\n     *\n     * @param mixed $store\n     * @return int|string\n     *\/",151],["T_WHITESPACE","\n    ",156],["T_PUBLIC","public",157],["T_WHITESPACE"," ",157],["T_FUNCTION","function",157],["T_WHITESPACE"," ",157],["T_STRING","getMaxQueryLength",157],"(",["T_VARIABLE","$store",157],["T_WHITESPACE"," ",157],"=",["T_WHITESPACE"," ",157],["T_STRING","null",157],")",["T_WHITESPACE","\n    ",157],"{",["T_WHITESPACE","\n        ",158],["T_RETURN","return",159],["T_WHITESPACE"," ",159],["T_VARIABLE","$this",159],["T_OBJECT_OPERATOR","->",159],["T_STRING","scopeConfig",159],["T_OBJECT_OPERATOR","->",159],["T_STRING","getValue",159],"(",["T_WHITESPACE","\n            ",159],["T_STRING","SearchQuery",160],["T_DOUBLE_COLON","::",160],["T_STRING","XML_PATH_MAX_QUERY_LENGTH",160],",",["T_WHITESPACE","\n            ",160],["T_NS_SEPARATOR","\\",161],["T_STRING","Magento",161],["T_NS_SEPARATOR","\\",161],["T_STRING","Store",161],["T_NS_SEPARATOR","\\",161],["T_STRING","Model",161],["T_NS_SEPARATOR","\\",161],["T_STRING","ScopeInterface",161],["T_DOUBLE_COLON","::",161],["T_STRING","SCOPE_STORE",161],",",["T_WHITESPACE","\n            ",161],["T_VARIABLE","$store",162],["T_WHITESPACE","\n        ",162],")",";",["T_WHITESPACE","\n    ",163],"}",["T_WHITESPACE","\n\n    ",164],["T_DOC_COMMENT","\/**\n     * Add Note message\n     *\n     * @param string $message\n     * @return $this\n     *\/",166],["T_WHITESPACE","\n    ",171],["T_PUBLIC","public",172],["T_WHITESPACE"," ",172],["T_FUNCTION","function",172],["T_WHITESPACE"," ",172],["T_STRING","addNoteMessage",172],"(",["T_VARIABLE","$message",172],")",["T_WHITESPACE","\n    ",172],"{",["T_WHITESPACE","\n        ",173],["T_VARIABLE","$this",174],["T_OBJECT_OPERATOR","->",174],["T_STRING","_messages",174],"[","]",["T_WHITESPACE"," ",174],"=",["T_WHITESPACE"," ",174],["T_VARIABLE","$message",174],";",["T_WHITESPACE","\n        ",174],["T_RETURN","return",175],["T_WHITESPACE"," ",175],["T_VARIABLE","$this",175],";",["T_WHITESPACE","\n    ",175],"}",["T_WHITESPACE","\n\n    ",176],["T_DOC_COMMENT","\/**\n     * Set Note messages\n     *\n     * @param array $messages\n     * @return $this\n     *\/",178],["T_WHITESPACE","\n    ",183],["T_PUBLIC","public",184],["T_WHITESPACE"," ",184],["T_FUNCTION","function",184],["T_WHITESPACE"," ",184],["T_STRING","setNoteMessages",184],"(",["T_ARRAY","array",184],["T_WHITESPACE"," ",184],["T_VARIABLE","$messages",184],")",["T_WHITESPACE","\n    ",184],"{",["T_WHITESPACE","\n        ",185],["T_VARIABLE","$this",186],["T_OBJECT_OPERATOR","->",186],["T_STRING","_messages",186],["T_WHITESPACE"," ",186],"=",["T_WHITESPACE"," ",186],["T_VARIABLE","$messages",186],";",["T_WHITESPACE","\n        ",186],["T_RETURN","return",187],["T_WHITESPACE"," ",187],["T_VARIABLE","$this",187],";",["T_WHITESPACE","\n    ",187],"}",["T_WHITESPACE","\n\n    ",188],["T_DOC_COMMENT","\/**\n     * Retrieve Current Note messages\n     *\n     * @return array\n     *\/",190],["T_WHITESPACE","\n    ",194],["T_PUBLIC","public",195],["T_WHITESPACE"," ",195],["T_FUNCTION","function",195],["T_WHITESPACE"," ",195],["T_STRING","getNoteMessages",195],"(",")",["T_WHITESPACE","\n    ",195],"{",["T_WHITESPACE","\n        ",196],["T_RETURN","return",197],["T_WHITESPACE"," ",197],["T_VARIABLE","$this",197],["T_OBJECT_OPERATOR","->",197],["T_STRING","_messages",197],";",["T_WHITESPACE","\n    ",197],"}",["T_WHITESPACE","\n\n    ",198],["T_DOC_COMMENT","\/**\n     * Check query of a warnings\n     *\n     * @param mixed $store\n     * @return $this\n     * @SuppressWarnings(PHPMD.UnusedFormalParameter)\n     *\/",200],["T_WHITESPACE","\n    ",206],["T_PUBLIC","public",207],["T_WHITESPACE"," ",207],["T_FUNCTION","function",207],["T_WHITESPACE"," ",207],["T_STRING","checkNotes",207],"(",["T_VARIABLE","$store",207],["T_WHITESPACE"," ",207],"=",["T_WHITESPACE"," ",207],["T_STRING","null",207],")",["T_WHITESPACE","\n    ",207],"{",["T_WHITESPACE","\n        ",208],["T_IF","if",209],["T_WHITESPACE"," ",209],"(",["T_VARIABLE","$this",209],["T_OBJECT_OPERATOR","->",209],["T_STRING","isQueryTooLong",209],"(",["T_VARIABLE","$this",209],["T_OBJECT_OPERATOR","->",209],["T_STRING","getQueryText",209],"(",")",",",["T_WHITESPACE"," ",209],["T_VARIABLE","$this",209],["T_OBJECT_OPERATOR","->",209],["T_STRING","getMaxQueryLength",209],"(",")",")",")",["T_WHITESPACE"," ",209],"{",["T_WHITESPACE","\n            ",209],["T_VARIABLE","$this",210],["T_OBJECT_OPERATOR","->",210],["T_STRING","addNoteMessage",210],"(",["T_WHITESPACE","\n                ",210],["T_STRING","__",211],"(",["T_WHITESPACE","\n                    ",211],["T_CONSTANT_ENCAPSED_STRING","'Your search query can\\'t be longer than %1, so we shortened your query.'",212],",",["T_WHITESPACE","\n                    ",212],["T_VARIABLE","$this",213],["T_OBJECT_OPERATOR","->",213],["T_STRING","getMaxQueryLength",213],"(",")",["T_WHITESPACE","\n                ",213],")",["T_WHITESPACE","\n            ",214],")",";",["T_WHITESPACE","\n        ",215],"}",["T_WHITESPACE","\n\n        ",216],["T_RETURN","return",218],["T_WHITESPACE"," ",218],["T_VARIABLE","$this",218],";",["T_WHITESPACE","\n    ",218],"}",["T_WHITESPACE","\n\n    ",219],["T_DOC_COMMENT","\/**\n     * @return string\n     *\/",221],["T_WHITESPACE","\n    ",223],["T_PUBLIC","public",224],["T_WHITESPACE"," ",224],["T_FUNCTION","function",224],["T_WHITESPACE"," ",224],["T_STRING","getQueryParamName",224],"(",")",["T_WHITESPACE","\n    ",224],"{",["T_WHITESPACE","\n        ",225],["T_RETURN","return",226],["T_WHITESPACE"," ",226],["T_STRING","QueryFactory",226],["T_DOUBLE_COLON","::",226],["T_STRING","QUERY_VAR_NAME",226],";",["T_WHITESPACE","\n    ",226],"}",["T_WHITESPACE","\n\n    ",227],["T_DOC_COMMENT","\/**\n     * @param string $queryText\n     * @param int|string $maxQueryLength\n     * @return bool\n     *\/",229],["T_WHITESPACE","\n    ",233],["T_PRIVATE","private",234],["T_WHITESPACE"," ",234],["T_FUNCTION","function",234],["T_WHITESPACE"," ",234],["T_STRING","isQueryTooLong",234],"(",["T_VARIABLE","$queryText",234],",",["T_WHITESPACE"," ",234],["T_VARIABLE","$maxQueryLength",234],")",["T_WHITESPACE","\n    ",234],"{",["T_WHITESPACE","\n        ",235],["T_RETURN","return",236],["T_WHITESPACE"," ",236],"(",["T_VARIABLE","$maxQueryLength",236],["T_WHITESPACE"," ",236],["T_IS_NOT_IDENTICAL","!==",236],["T_WHITESPACE"," ",236],["T_CONSTANT_ENCAPSED_STRING","''",236],["T_WHITESPACE"," ",236],["T_BOOLEAN_AND","&&",236],["T_WHITESPACE"," ",236],["T_VARIABLE","$this",236],["T_OBJECT_OPERATOR","->",236],["T_STRING","string",236],["T_OBJECT_OPERATOR","->",236],["T_STRING","strlen",236],"(",["T_VARIABLE","$queryText",236],")",["T_WHITESPACE"," ",236],">",["T_WHITESPACE"," ",236],["T_VARIABLE","$maxQueryLength",236],")",";",["T_WHITESPACE","\n    ",236],"}",["T_WHITESPACE","\n\n    ",237],["T_DOC_COMMENT","\/**\n     * Retrieve search query text\n     *\n     * @return string\n     *\/",239],["T_WHITESPACE","\n    ",243],["T_PRIVATE","private",244],["T_WHITESPACE"," ",244],["T_FUNCTION","function",244],["T_WHITESPACE"," ",244],["T_STRING","getQueryText",244],"(",")",["T_WHITESPACE","\n    ",244],"{",["T_WHITESPACE","\n        ",245],["T_VARIABLE","$queryText",246],["T_WHITESPACE"," ",246],"=",["T_WHITESPACE"," ",246],["T_VARIABLE","$this",246],["T_OBJECT_OPERATOR","->",246],["T_STRING","_request",246],["T_OBJECT_OPERATOR","->",246],["T_STRING","getParam",246],"(",["T_VARIABLE","$this",246],["T_OBJECT_OPERATOR","->",246],["T_STRING","getQueryParamName",246],"(",")",")",";",["T_WHITESPACE","\n        ",246],["T_RETURN","return",247],"(",["T_VARIABLE","$queryText",247],["T_WHITESPACE"," ",247],["T_IS_IDENTICAL","===",247],["T_WHITESPACE"," ",247],["T_STRING","null",247],["T_WHITESPACE"," ",247],["T_BOOLEAN_OR","||",247],["T_WHITESPACE"," ",247],["T_STRING","is_array",247],"(",["T_VARIABLE","$queryText",247],")",")",["T_WHITESPACE","\n            ",247],"?",["T_WHITESPACE"," ",248],["T_CONSTANT_ENCAPSED_STRING","''",248],["T_WHITESPACE","\n            ",248],":",["T_WHITESPACE"," ",249],["T_VARIABLE","$this",249],["T_OBJECT_OPERATOR","->",249],["T_STRING","string",249],["T_OBJECT_OPERATOR","->",249],["T_STRING","cleanString",249],"(",["T_STRING","trim",249],"(",["T_VARIABLE","$queryText",249],")",")",";",["T_WHITESPACE","\n    ",249],"}",["T_WHITESPACE","\n\n    ",250],["T_DOC_COMMENT","\/**\n     * @param string $queryText\n     * @param int|string $maxQueryLength\n     * @return string\n     *\/",252],["T_WHITESPACE","\n    ",256],["T_PRIVATE","private",257],["T_WHITESPACE"," ",257],["T_FUNCTION","function",257],["T_WHITESPACE"," ",257],["T_STRING","getPreparedQueryText",257],"(",["T_VARIABLE","$queryText",257],",",["T_WHITESPACE"," ",257],["T_VARIABLE","$maxQueryLength",257],")",["T_WHITESPACE","\n    ",257],"{",["T_WHITESPACE","\n        ",258],["T_IF","if",259],["T_WHITESPACE"," ",259],"(",["T_VARIABLE","$this",259],["T_OBJECT_OPERATOR","->",259],["T_STRING","isQueryTooLong",259],"(",["T_VARIABLE","$queryText",259],",",["T_WHITESPACE"," ",259],["T_VARIABLE","$maxQueryLength",259],")",")",["T_WHITESPACE"," ",259],"{",["T_WHITESPACE","\n            ",259],["T_VARIABLE","$queryText",260],["T_WHITESPACE"," ",260],"=",["T_WHITESPACE"," ",260],["T_VARIABLE","$this",260],["T_OBJECT_OPERATOR","->",260],["T_STRING","string",260],["T_OBJECT_OPERATOR","->",260],["T_STRING","substr",260],"(",["T_VARIABLE","$queryText",260],",",["T_WHITESPACE"," ",260],["T_LNUMBER","0",260],",",["T_WHITESPACE"," ",260],["T_VARIABLE","$maxQueryLength",260],")",";",["T_WHITESPACE","\n        ",260],"}",["T_WHITESPACE","\n        ",261],["T_RETURN","return",262],["T_WHITESPACE"," ",262],["T_VARIABLE","$queryText",262],";",["T_WHITESPACE","\n    ",262],"}",["T_WHITESPACE","\n",263],"}",["T_WHITESPACE","\n",264]]
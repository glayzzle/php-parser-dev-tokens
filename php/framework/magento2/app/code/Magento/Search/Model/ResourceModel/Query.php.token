[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Copyright \u00c2\u00a9 2013-2017 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n *\/",2],["T_WHITESPACE","\n\n",5],["T_COMMENT","\/\/ @codingStandardsIgnoreFile\n",7],["T_WHITESPACE","\n",8],["T_NAMESPACE","namespace",9],["T_WHITESPACE"," ",9],["T_STRING","Magento",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Search",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Model",9],["T_NS_SEPARATOR","\\",9],["T_STRING","ResourceModel",9],";",["T_WHITESPACE","\n\n",9],["T_USE","use",11],["T_WHITESPACE"," ",11],["T_STRING","Magento",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Framework",11],["T_NS_SEPARATOR","\\",11],["T_STRING","DB",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Select",11],";",["T_WHITESPACE","\n",11],["T_USE","use",12],["T_WHITESPACE"," ",12],["T_STRING","Magento",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Framework",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Model",12],["T_NS_SEPARATOR","\\",12],["T_STRING","AbstractModel",12],";",["T_WHITESPACE","\n",12],["T_USE","use",13],["T_WHITESPACE"," ",13],["T_STRING","Magento",13],["T_NS_SEPARATOR","\\",13],["T_STRING","Framework",13],["T_NS_SEPARATOR","\\",13],["T_STRING","Model",13],["T_NS_SEPARATOR","\\",13],["T_STRING","ResourceModel",13],["T_NS_SEPARATOR","\\",13],["T_STRING","Db",13],["T_NS_SEPARATOR","\\",13],["T_STRING","AbstractDb",13],";",["T_WHITESPACE","\n",13],["T_USE","use",14],["T_WHITESPACE"," ",14],["T_STRING","Magento",14],["T_NS_SEPARATOR","\\",14],["T_STRING","Search",14],["T_NS_SEPARATOR","\\",14],["T_STRING","Model",14],["T_NS_SEPARATOR","\\",14],["T_STRING","Query",14],["T_WHITESPACE"," ",14],["T_AS","as",14],["T_WHITESPACE"," ",14],["T_STRING","QueryModel",14],";",["T_WHITESPACE","\n\n",14],["T_DOC_COMMENT","\/**\n * Search query resource model\n\n *\/",16],["T_WHITESPACE","\n",19],["T_CLASS","class",20],["T_WHITESPACE"," ",20],["T_STRING","Query",20],["T_WHITESPACE"," ",20],["T_EXTENDS","extends",20],["T_WHITESPACE"," ",20],["T_STRING","AbstractDb",20],["T_WHITESPACE","\n",20],"{",["T_WHITESPACE","\n    ",21],["T_DOC_COMMENT","\/**\n     * Date\n     *\n     * @var \\Magento\\Framework\\Stdlib\\DateTime\\DateTime\n     *\/",22],["T_WHITESPACE","\n    ",26],["T_PROTECTED","protected",27],["T_WHITESPACE"," ",27],["T_VARIABLE","$_date",27],";",["T_WHITESPACE","\n\n    ",27],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Framework\\Stdlib\\DateTime\n     *\/",29],["T_WHITESPACE","\n    ",31],["T_PROTECTED","protected",32],["T_WHITESPACE"," ",32],["T_VARIABLE","$dateTime",32],";",["T_WHITESPACE","\n\n    ",32],["T_DOC_COMMENT","\/**\n     * @param \\Magento\\Framework\\Model\\ResourceModel\\Db\\Context $context\n     * @param \\Magento\\Framework\\Stdlib\\DateTime\\DateTime $date\n     * @param \\Magento\\Framework\\Stdlib\\DateTime $dateTime\n     * @param string $connectionName\n     *\/",34],["T_WHITESPACE","\n    ",39],["T_PUBLIC","public",40],["T_WHITESPACE"," ",40],["T_FUNCTION","function",40],["T_WHITESPACE"," ",40],["T_STRING","__construct",40],"(",["T_WHITESPACE","\n        ",40],["T_NS_SEPARATOR","\\",41],["T_STRING","Magento",41],["T_NS_SEPARATOR","\\",41],["T_STRING","Framework",41],["T_NS_SEPARATOR","\\",41],["T_STRING","Model",41],["T_NS_SEPARATOR","\\",41],["T_STRING","ResourceModel",41],["T_NS_SEPARATOR","\\",41],["T_STRING","Db",41],["T_NS_SEPARATOR","\\",41],["T_STRING","Context",41],["T_WHITESPACE"," ",41],["T_VARIABLE","$context",41],",",["T_WHITESPACE","\n        ",41],["T_NS_SEPARATOR","\\",42],["T_STRING","Magento",42],["T_NS_SEPARATOR","\\",42],["T_STRING","Framework",42],["T_NS_SEPARATOR","\\",42],["T_STRING","Stdlib",42],["T_NS_SEPARATOR","\\",42],["T_STRING","DateTime",42],["T_NS_SEPARATOR","\\",42],["T_STRING","DateTime",42],["T_WHITESPACE"," ",42],["T_VARIABLE","$date",42],",",["T_WHITESPACE","\n        ",42],["T_NS_SEPARATOR","\\",43],["T_STRING","Magento",43],["T_NS_SEPARATOR","\\",43],["T_STRING","Framework",43],["T_NS_SEPARATOR","\\",43],["T_STRING","Stdlib",43],["T_NS_SEPARATOR","\\",43],["T_STRING","DateTime",43],["T_WHITESPACE"," ",43],["T_VARIABLE","$dateTime",43],",",["T_WHITESPACE","\n        ",43],["T_VARIABLE","$connectionName",44],["T_WHITESPACE"," ",44],"=",["T_WHITESPACE"," ",44],["T_STRING","null",44],["T_WHITESPACE","\n    ",44],")",["T_WHITESPACE"," ",45],"{",["T_WHITESPACE","\n        ",45],["T_VARIABLE","$this",46],["T_OBJECT_OPERATOR","->",46],["T_STRING","_date",46],["T_WHITESPACE"," ",46],"=",["T_WHITESPACE"," ",46],["T_VARIABLE","$date",46],";",["T_WHITESPACE","\n        ",46],["T_VARIABLE","$this",47],["T_OBJECT_OPERATOR","->",47],["T_STRING","dateTime",47],["T_WHITESPACE"," ",47],"=",["T_WHITESPACE"," ",47],["T_VARIABLE","$dateTime",47],";",["T_WHITESPACE","\n        ",47],["T_STRING","parent",48],["T_DOUBLE_COLON","::",48],["T_STRING","__construct",48],"(",["T_VARIABLE","$context",48],",",["T_WHITESPACE"," ",48],["T_VARIABLE","$connectionName",48],")",";",["T_WHITESPACE","\n    ",48],"}",["T_WHITESPACE","\n\n    ",49],["T_DOC_COMMENT","\/**\n     * Custom load model only by query text (skip synonym for)\n     *\n     * @param AbstractModel $object\n     * @param string $value\n     * @return $this\n     *\/",51],["T_WHITESPACE","\n    ",57],["T_PUBLIC","public",58],["T_WHITESPACE"," ",58],["T_FUNCTION","function",58],["T_WHITESPACE"," ",58],["T_STRING","loadByQueryText",58],"(",["T_STRING","AbstractModel",58],["T_WHITESPACE"," ",58],["T_VARIABLE","$object",58],",",["T_WHITESPACE"," ",58],["T_VARIABLE","$value",58],")",["T_WHITESPACE","\n    ",58],"{",["T_WHITESPACE","\n        ",59],["T_VARIABLE","$select",60],["T_WHITESPACE"," ",60],"=",["T_WHITESPACE"," ",60],["T_VARIABLE","$this",60],["T_OBJECT_OPERATOR","->",60],["T_STRING","getConnection",60],"(",")",["T_OBJECT_OPERATOR","->",60],["T_STRING","select",60],"(",")",["T_OBJECT_OPERATOR","->",60],["T_STRING","from",60],"(",["T_WHITESPACE","\n            ",60],["T_VARIABLE","$this",61],["T_OBJECT_OPERATOR","->",61],["T_STRING","getMainTable",61],"(",")",["T_WHITESPACE","\n        ",61],")",["T_OBJECT_OPERATOR","->",62],["T_STRING","where",62],"(",["T_WHITESPACE","\n            ",62],["T_CONSTANT_ENCAPSED_STRING","'query_text = ?'",63],",",["T_WHITESPACE","\n            ",63],["T_VARIABLE","$value",64],["T_WHITESPACE","\n        ",64],")",["T_OBJECT_OPERATOR","->",65],["T_STRING","where",65],"(",["T_WHITESPACE","\n            ",65],["T_CONSTANT_ENCAPSED_STRING","'store_id = ?'",66],",",["T_WHITESPACE","\n            ",66],["T_VARIABLE","$object",67],["T_OBJECT_OPERATOR","->",67],["T_STRING","getStoreId",67],"(",")",["T_WHITESPACE","\n        ",67],")",["T_OBJECT_OPERATOR","->",68],["T_STRING","limit",68],"(",["T_WHITESPACE","\n            ",68],["T_LNUMBER","1",69],["T_WHITESPACE","\n        ",69],")",";",["T_WHITESPACE","\n        ",70],["T_VARIABLE","$data",71],["T_WHITESPACE"," ",71],"=",["T_WHITESPACE"," ",71],["T_VARIABLE","$this",71],["T_OBJECT_OPERATOR","->",71],["T_STRING","getConnection",71],"(",")",["T_OBJECT_OPERATOR","->",71],["T_STRING","fetchRow",71],"(",["T_VARIABLE","$select",71],")",";",["T_WHITESPACE","\n        ",71],["T_IF","if",72],["T_WHITESPACE"," ",72],"(",["T_VARIABLE","$data",72],")",["T_WHITESPACE"," ",72],"{",["T_WHITESPACE","\n            ",72],["T_VARIABLE","$object",73],["T_OBJECT_OPERATOR","->",73],["T_STRING","setData",73],"(",["T_VARIABLE","$data",73],")",";",["T_WHITESPACE","\n            ",73],["T_VARIABLE","$this",74],["T_OBJECT_OPERATOR","->",74],["T_STRING","_afterLoad",74],"(",["T_VARIABLE","$object",74],")",";",["T_WHITESPACE","\n        ",74],"}",["T_WHITESPACE","\n        ",75],["T_RETURN","return",76],["T_WHITESPACE"," ",76],["T_VARIABLE","$this",76],";",["T_WHITESPACE","\n    ",76],"}",["T_WHITESPACE","\n\n    ",77],["T_DOC_COMMENT","\/**\n     * Loading string as a value or regular numeric\n     *\n     * @param AbstractModel $object\n     * @param int|string $value\n     * @param null|string $field\n     * @return $this|\\Magento\\Framework\\Model\\ResourceModel\\Db\\AbstractDb\n     * @SuppressWarnings(\"unused\")\n     *\/",79],["T_WHITESPACE","\n    ",87],["T_PUBLIC","public",88],["T_WHITESPACE"," ",88],["T_FUNCTION","function",88],["T_WHITESPACE"," ",88],["T_STRING","load",88],"(",["T_STRING","AbstractModel",88],["T_WHITESPACE"," ",88],["T_VARIABLE","$object",88],",",["T_WHITESPACE"," ",88],["T_VARIABLE","$value",88],",",["T_WHITESPACE"," ",88],["T_VARIABLE","$field",88],["T_WHITESPACE"," ",88],"=",["T_WHITESPACE"," ",88],["T_STRING","null",88],")",["T_WHITESPACE","\n    ",88],"{",["T_WHITESPACE","\n        ",89],["T_IF","if",90],["T_WHITESPACE"," ",90],"(",["T_STRING","is_numeric",90],"(",["T_VARIABLE","$value",90],")",")",["T_WHITESPACE"," ",90],"{",["T_WHITESPACE","\n            ",90],["T_RETURN","return",91],["T_WHITESPACE"," ",91],["T_STRING","parent",91],["T_DOUBLE_COLON","::",91],["T_STRING","load",91],"(",["T_VARIABLE","$object",91],",",["T_WHITESPACE"," ",91],["T_VARIABLE","$value",91],")",";",["T_WHITESPACE","\n        ",91],"}",["T_WHITESPACE"," ",92],["T_ELSE","else",92],["T_WHITESPACE"," ",92],"{",["T_WHITESPACE","\n            ",92],["T_VARIABLE","$this",93],["T_OBJECT_OPERATOR","->",93],["T_STRING","loadByQueryText",93],"(",["T_VARIABLE","$object",93],",",["T_WHITESPACE"," ",93],["T_VARIABLE","$value",93],")",";",["T_WHITESPACE","\n        ",93],"}",["T_WHITESPACE","\n        ",94],["T_RETURN","return",95],["T_WHITESPACE"," ",95],["T_VARIABLE","$this",95],";",["T_WHITESPACE","\n    ",95],"}",["T_WHITESPACE","\n\n    ",96],["T_DOC_COMMENT","\/**\n     * Custom load model by search query string\n     *\n     * @param AbstractModel $object\n     * @param string $value\n     * @return $this\n     * @deprecated \"synonym for\" feature has been removed\n     *\/",98],["T_WHITESPACE","\n    ",105],["T_PUBLIC","public",106],["T_WHITESPACE"," ",106],["T_FUNCTION","function",106],["T_WHITESPACE"," ",106],["T_STRING","loadByQuery",106],"(",["T_STRING","AbstractModel",106],["T_WHITESPACE"," ",106],["T_VARIABLE","$object",106],",",["T_WHITESPACE"," ",106],["T_VARIABLE","$value",106],")",["T_WHITESPACE","\n    ",106],"{",["T_WHITESPACE","\n        ",107],["T_VARIABLE","$this",108],["T_OBJECT_OPERATOR","->",108],["T_STRING","loadByQueryText",108],"(",["T_VARIABLE","$object",108],",",["T_WHITESPACE"," ",108],["T_VARIABLE","$value",108],")",";",["T_WHITESPACE","\n        ",108],["T_RETURN","return",109],["T_WHITESPACE"," ",109],["T_VARIABLE","$this",109],";",["T_WHITESPACE","\n    ",109],"}",["T_WHITESPACE","\n\n    ",110],["T_DOC_COMMENT","\/**\n     * @param AbstractModel $object\n     * @return $this\n     *\/",112],["T_WHITESPACE","\n    ",115],["T_PUBLIC","public",116],["T_WHITESPACE"," ",116],["T_FUNCTION","function",116],["T_WHITESPACE"," ",116],["T_STRING","_beforeSave",116],"(",["T_STRING","AbstractModel",116],["T_WHITESPACE"," ",116],["T_VARIABLE","$object",116],")",["T_WHITESPACE","\n    ",116],"{",["T_WHITESPACE","\n        ",117],["T_VARIABLE","$object",118],["T_OBJECT_OPERATOR","->",118],["T_STRING","setUpdatedAt",118],"(",["T_VARIABLE","$this",118],["T_OBJECT_OPERATOR","->",118],["T_STRING","dateTime",118],["T_OBJECT_OPERATOR","->",118],["T_STRING","formatDate",118],"(",["T_VARIABLE","$this",118],["T_OBJECT_OPERATOR","->",118],["T_STRING","_date",118],["T_OBJECT_OPERATOR","->",118],["T_STRING","gmtTimestamp",118],"(",")",")",")",";",["T_WHITESPACE","\n        ",118],["T_RETURN","return",119],["T_WHITESPACE"," ",119],["T_VARIABLE","$this",119],";",["T_WHITESPACE","\n    ",119],"}",["T_WHITESPACE","\n\n    ",120],["T_DOC_COMMENT","\/**\n     * Init resource data\n     *\n     * @return void\n     *\/",122],["T_WHITESPACE","\n    ",126],["T_PROTECTED","protected",127],["T_WHITESPACE"," ",127],["T_FUNCTION","function",127],["T_WHITESPACE"," ",127],["T_STRING","_construct",127],"(",")",["T_WHITESPACE","\n    ",127],"{",["T_WHITESPACE","\n        ",128],["T_VARIABLE","$this",129],["T_OBJECT_OPERATOR","->",129],["T_STRING","_init",129],"(",["T_CONSTANT_ENCAPSED_STRING","'search_query'",129],",",["T_WHITESPACE"," ",129],["T_CONSTANT_ENCAPSED_STRING","'query_id'",129],")",";",["T_WHITESPACE","\n    ",129],"}",["T_WHITESPACE","\n\n    ",130],["T_DOC_COMMENT","\/**\n     * Save query with incremental popularity\n     *\n     * @param QueryModel $query\n     * @return void\n     *\n     * @throws \\Magento\\Framework\\Exception\\LocalizedException\n     *\/",132],["T_WHITESPACE","\n    ",139],["T_PUBLIC","public",140],["T_WHITESPACE"," ",140],["T_FUNCTION","function",140],["T_WHITESPACE"," ",140],["T_STRING","saveIncrementalPopularity",140],"(",["T_STRING","QueryModel",140],["T_WHITESPACE"," ",140],["T_VARIABLE","$query",140],")",["T_WHITESPACE","\n    ",140],"{",["T_WHITESPACE","\n        ",141],["T_VARIABLE","$adapter",142],["T_WHITESPACE"," ",142],"=",["T_WHITESPACE"," ",142],["T_VARIABLE","$this",142],["T_OBJECT_OPERATOR","->",142],["T_STRING","getConnection",142],"(",")",";",["T_WHITESPACE","\n        ",142],["T_VARIABLE","$table",143],["T_WHITESPACE"," ",143],"=",["T_WHITESPACE"," ",143],["T_VARIABLE","$this",143],["T_OBJECT_OPERATOR","->",143],["T_STRING","getMainTable",143],"(",")",";",["T_WHITESPACE","\n        ",143],["T_VARIABLE","$saveData",144],["T_WHITESPACE"," ",144],"=",["T_WHITESPACE"," ",144],"[",["T_WHITESPACE","\n            ",144],["T_CONSTANT_ENCAPSED_STRING","'store_id'",145],["T_WHITESPACE"," ",145],["T_DOUBLE_ARROW","=>",145],["T_WHITESPACE"," ",145],["T_VARIABLE","$query",145],["T_OBJECT_OPERATOR","->",145],["T_STRING","getStoreId",145],"(",")",",",["T_WHITESPACE","\n            ",145],["T_CONSTANT_ENCAPSED_STRING","'query_text'",146],["T_WHITESPACE"," ",146],["T_DOUBLE_ARROW","=>",146],["T_WHITESPACE"," ",146],["T_VARIABLE","$query",146],["T_OBJECT_OPERATOR","->",146],["T_STRING","getQueryText",146],"(",")",",",["T_WHITESPACE","\n            ",146],["T_CONSTANT_ENCAPSED_STRING","'popularity'",147],["T_WHITESPACE"," ",147],["T_DOUBLE_ARROW","=>",147],["T_WHITESPACE"," ",147],["T_LNUMBER","1",147],",",["T_WHITESPACE","\n        ",147],"]",";",["T_WHITESPACE","\n        ",148],["T_VARIABLE","$updateData",149],["T_WHITESPACE"," ",149],"=",["T_WHITESPACE"," ",149],"[",["T_WHITESPACE","\n            ",149],["T_CONSTANT_ENCAPSED_STRING","'popularity'",150],["T_WHITESPACE"," ",150],["T_DOUBLE_ARROW","=>",150],["T_WHITESPACE"," ",150],["T_NEW","new",150],["T_WHITESPACE"," ",150],["T_NS_SEPARATOR","\\",150],["T_STRING","Zend_Db_Expr",150],"(",["T_CONSTANT_ENCAPSED_STRING","'`popularity` + 1'",150],")",",",["T_WHITESPACE","\n        ",150],"]",";",["T_WHITESPACE","\n        ",151],["T_VARIABLE","$adapter",152],["T_OBJECT_OPERATOR","->",152],["T_STRING","insertOnDuplicate",152],"(",["T_VARIABLE","$table",152],",",["T_WHITESPACE"," ",152],["T_VARIABLE","$saveData",152],",",["T_WHITESPACE"," ",152],["T_VARIABLE","$updateData",152],")",";",["T_WHITESPACE","\n    ",152],"}",["T_WHITESPACE","\n\n    ",153],["T_DOC_COMMENT","\/**\n     * Save query with number of results\n     *\n     * @param QueryModel $query\n     * @return void\n     *\n     * @throws \\Magento\\Framework\\Exception\\LocalizedException\n     *\/",155],["T_WHITESPACE","\n    ",162],["T_PUBLIC","public",163],["T_WHITESPACE"," ",163],["T_FUNCTION","function",163],["T_WHITESPACE"," ",163],["T_STRING","saveNumResults",163],"(",["T_STRING","QueryModel",163],["T_WHITESPACE"," ",163],["T_VARIABLE","$query",163],")",["T_WHITESPACE","\n    ",163],"{",["T_WHITESPACE","\n        ",164],["T_VARIABLE","$adapter",165],["T_WHITESPACE"," ",165],"=",["T_WHITESPACE"," ",165],["T_VARIABLE","$this",165],["T_OBJECT_OPERATOR","->",165],["T_STRING","getConnection",165],"(",")",";",["T_WHITESPACE","\n        ",165],["T_VARIABLE","$table",166],["T_WHITESPACE"," ",166],"=",["T_WHITESPACE"," ",166],["T_VARIABLE","$this",166],["T_OBJECT_OPERATOR","->",166],["T_STRING","getMainTable",166],"(",")",";",["T_WHITESPACE","\n        ",166],["T_VARIABLE","$numResults",167],["T_WHITESPACE"," ",167],"=",["T_WHITESPACE"," ",167],["T_VARIABLE","$query",167],["T_OBJECT_OPERATOR","->",167],["T_STRING","getNumResults",167],"(",")",";",["T_WHITESPACE","\n        ",167],["T_VARIABLE","$saveData",168],["T_WHITESPACE"," ",168],"=",["T_WHITESPACE"," ",168],"[",["T_WHITESPACE","\n            ",168],["T_CONSTANT_ENCAPSED_STRING","'store_id'",169],["T_WHITESPACE"," ",169],["T_DOUBLE_ARROW","=>",169],["T_WHITESPACE"," ",169],["T_VARIABLE","$query",169],["T_OBJECT_OPERATOR","->",169],["T_STRING","getStoreId",169],"(",")",",",["T_WHITESPACE","\n            ",169],["T_CONSTANT_ENCAPSED_STRING","'query_text'",170],["T_WHITESPACE"," ",170],["T_DOUBLE_ARROW","=>",170],["T_WHITESPACE"," ",170],["T_VARIABLE","$query",170],["T_OBJECT_OPERATOR","->",170],["T_STRING","getQueryText",170],"(",")",",",["T_WHITESPACE","\n            ",170],["T_CONSTANT_ENCAPSED_STRING","'num_results'",171],["T_WHITESPACE"," ",171],["T_DOUBLE_ARROW","=>",171],["T_WHITESPACE"," ",171],["T_VARIABLE","$numResults",171],",",["T_WHITESPACE","\n        ",171],"]",";",["T_WHITESPACE","\n        ",172],["T_VARIABLE","$updateData",173],["T_WHITESPACE"," ",173],"=",["T_WHITESPACE"," ",173],"[",["T_CONSTANT_ENCAPSED_STRING","'num_results'",173],["T_WHITESPACE"," ",173],["T_DOUBLE_ARROW","=>",173],["T_WHITESPACE"," ",173],["T_VARIABLE","$numResults",173],"]",";",["T_WHITESPACE","\n        ",173],["T_VARIABLE","$adapter",174],["T_OBJECT_OPERATOR","->",174],["T_STRING","insertOnDuplicate",174],"(",["T_VARIABLE","$table",174],",",["T_WHITESPACE"," ",174],["T_VARIABLE","$saveData",174],",",["T_WHITESPACE"," ",174],["T_VARIABLE","$updateData",174],")",";",["T_WHITESPACE","\n    ",174],"}",["T_WHITESPACE","\n",175],"}",["T_WHITESPACE","\n",176]]
[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Copyright \u00c2\u00a9 2013-2017 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n *\/",2],["T_WHITESPACE","\n",5],["T_NAMESPACE","namespace",6],["T_WHITESPACE"," ",6],["T_STRING","Magento",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Search",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Model",6],";",["T_WHITESPACE","\n\n",6],["T_USE","use",8],["T_WHITESPACE"," ",8],["T_STRING","Magento",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Search",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Api",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Data",8],["T_NS_SEPARATOR","\\",8],["T_STRING","SynonymGroupInterface",8],";",["T_WHITESPACE","\n",8],["T_USE","use",9],["T_WHITESPACE"," ",9],["T_STRING","Magento",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Search",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Api",9],["T_NS_SEPARATOR","\\",9],["T_STRING","SynonymGroupRepositoryInterface",9],";",["T_WHITESPACE","\n",9],["T_USE","use",10],["T_WHITESPACE"," ",10],["T_STRING","Magento",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Search",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Model",10],["T_NS_SEPARATOR","\\",10],["T_STRING","ResourceModel",10],["T_NS_SEPARATOR","\\",10],["T_STRING","SynonymGroup",10],["T_WHITESPACE"," ",10],["T_AS","as",10],["T_WHITESPACE"," ",10],["T_STRING","SynonymGroupResourceModel",10],";",["T_WHITESPACE","\n",10],["T_USE","use",11],["T_WHITESPACE"," ",11],["T_STRING","Magento",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Framework",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Exception",11],["T_NS_SEPARATOR","\\",11],["T_STRING","CouldNotDeleteException",11],";",["T_WHITESPACE","\n\n",11],["T_DOC_COMMENT","\/**\n * Synonym Group repository, provides implementation of saving and deleting synonym groups\n *\/",13],["T_WHITESPACE","\n",15],["T_CLASS","class",16],["T_WHITESPACE"," ",16],["T_STRING","SynonymGroupRepository",16],["T_WHITESPACE"," ",16],["T_IMPLEMENTS","implements",16],["T_WHITESPACE"," ",16],["T_STRING","SynonymGroupRepositoryInterface",16],["T_WHITESPACE","\n",16],"{",["T_WHITESPACE","\n    ",17],["T_DOC_COMMENT","\/**\n     * SynonymGroup Factory\n     *\n     * @var SynonymGroupFactory\n     *\/",18],["T_WHITESPACE","\n    ",22],["T_PROTECTED","protected",23],["T_WHITESPACE"," ",23],["T_VARIABLE","$synonymGroupFactory",23],";",["T_WHITESPACE","\n\n    ",23],["T_DOC_COMMENT","\/**\n     * SynonymGroup resource model\n     *\n     * @var SynonymGroupResourceModel\n     *\/",25],["T_WHITESPACE","\n    ",29],["T_PROTECTED","protected",30],["T_WHITESPACE"," ",30],["T_VARIABLE","$resourceModel",30],";",["T_WHITESPACE","\n\n    ",30],["T_DOC_COMMENT","\/**\n     * Constructor\n     *\n     * @param SynonymGroupFactory $synonymGroupFactory\n     * @param SynonymGroupResourceModel $resourceModel\n     *\/",32],["T_WHITESPACE","\n    ",37],["T_PUBLIC","public",38],["T_WHITESPACE"," ",38],["T_FUNCTION","function",38],["T_WHITESPACE"," ",38],["T_STRING","__construct",38],"(",["T_WHITESPACE","\n        ",38],["T_NS_SEPARATOR","\\",39],["T_STRING","Magento",39],["T_NS_SEPARATOR","\\",39],["T_STRING","Search",39],["T_NS_SEPARATOR","\\",39],["T_STRING","Model",39],["T_NS_SEPARATOR","\\",39],["T_STRING","SynonymGroupFactory",39],["T_WHITESPACE"," ",39],["T_VARIABLE","$synonymGroupFactory",39],",",["T_WHITESPACE","\n        ",39],["T_STRING","SynonymGroupResourceModel",40],["T_WHITESPACE"," ",40],["T_VARIABLE","$resourceModel",40],["T_WHITESPACE","\n    ",40],")",["T_WHITESPACE"," ",41],"{",["T_WHITESPACE","\n        ",41],["T_VARIABLE","$this",42],["T_OBJECT_OPERATOR","->",42],["T_STRING","synonymGroupFactory",42],["T_WHITESPACE"," ",42],"=",["T_WHITESPACE"," ",42],["T_VARIABLE","$synonymGroupFactory",42],";",["T_WHITESPACE","\n        ",42],["T_VARIABLE","$this",43],["T_OBJECT_OPERATOR","->",43],["T_STRING","resourceModel",43],["T_WHITESPACE"," ",43],"=",["T_WHITESPACE"," ",43],["T_VARIABLE","$resourceModel",43],";",["T_WHITESPACE","\n    ",43],"}",["T_WHITESPACE","\n\n    ",44],["T_DOC_COMMENT","\/**\n     * {@inheritdoc}\n     *\/",46],["T_WHITESPACE","\n    ",48],["T_PUBLIC","public",49],["T_WHITESPACE"," ",49],["T_FUNCTION","function",49],["T_WHITESPACE"," ",49],["T_STRING","save",49],"(",["T_STRING","SynonymGroupInterface",49],["T_WHITESPACE"," ",49],["T_VARIABLE","$synonymGroup",49],",",["T_WHITESPACE"," ",49],["T_VARIABLE","$errorOnMergeConflict",49],["T_WHITESPACE"," ",49],"=",["T_WHITESPACE"," ",49],["T_STRING","false",49],")",["T_WHITESPACE","\n    ",49],"{",["T_WHITESPACE","\n        ",50],["T_DOC_COMMENT","\/** @var SynonymGroup $synonymGroupModel *\/",51],["T_WHITESPACE","\n        ",51],["T_VARIABLE","$synonymGroupModel",52],["T_WHITESPACE"," ",52],"=",["T_WHITESPACE"," ",52],["T_VARIABLE","$this",52],["T_OBJECT_OPERATOR","->",52],["T_STRING","synonymGroupFactory",52],["T_OBJECT_OPERATOR","->",52],["T_STRING","create",52],"(",")",";",["T_WHITESPACE","\n        ",52],["T_VARIABLE","$synonymGroupModel",53],["T_OBJECT_OPERATOR","->",53],["T_STRING","load",53],"(",["T_VARIABLE","$synonymGroup",53],["T_OBJECT_OPERATOR","->",53],["T_STRING","getGroupId",53],"(",")",")",";",["T_WHITESPACE","\n        ",53],["T_VARIABLE","$isCreate",54],["T_WHITESPACE"," ",54],"=",["T_WHITESPACE"," ",54],["T_VARIABLE","$synonymGroupModel",54],["T_OBJECT_OPERATOR","->",54],["T_STRING","getSynonymGroup",54],"(",")",["T_WHITESPACE"," ",54],["T_IS_IDENTICAL","===",54],["T_WHITESPACE"," ",54],["T_STRING","null",54],";",["T_WHITESPACE","\n        ",54],["T_IF","if",55],["T_WHITESPACE"," ",55],"(",["T_VARIABLE","$isCreate",55],")",["T_WHITESPACE"," ",55],"{",["T_WHITESPACE","\n            ",55],["T_RETURN","return",56],["T_WHITESPACE"," ",56],["T_VARIABLE","$this",56],["T_OBJECT_OPERATOR","->",56],["T_STRING","create",56],"(",["T_VARIABLE","$synonymGroup",56],",",["T_WHITESPACE"," ",56],["T_VARIABLE","$errorOnMergeConflict",56],")",";",["T_WHITESPACE","\n        ",56],"}",["T_WHITESPACE"," ",57],["T_ELSE","else",57],["T_WHITESPACE"," ",57],"{",["T_WHITESPACE","\n            ",57],["T_RETURN","return",58],["T_WHITESPACE"," ",58],["T_VARIABLE","$this",58],["T_OBJECT_OPERATOR","->",58],["T_STRING","update",58],"(",["T_VARIABLE","$synonymGroupModel",58],",",["T_WHITESPACE"," ",58],["T_VARIABLE","$synonymGroup",58],",",["T_WHITESPACE"," ",58],["T_VARIABLE","$errorOnMergeConflict",58],")",";",["T_WHITESPACE","\n        ",58],"}",["T_WHITESPACE","\n    ",59],"}",["T_WHITESPACE","\n\n    ",60],["T_DOC_COMMENT","\/**\n     * Deletes a synonym group\n     *\n     * @param SynonymGroupInterface $synonymGroup\n     * @throws CouldNotDeleteException\n     * @return bool\n     *\/",62],["T_WHITESPACE","\n    ",68],["T_PUBLIC","public",69],["T_WHITESPACE"," ",69],["T_FUNCTION","function",69],["T_WHITESPACE"," ",69],["T_STRING","delete",69],"(",["T_STRING","SynonymGroupInterface",69],["T_WHITESPACE"," ",69],["T_VARIABLE","$synonymGroup",69],")",["T_WHITESPACE","\n    ",69],"{",["T_WHITESPACE","\n        ",70],["T_TRY","try",71],["T_WHITESPACE"," ",71],"{",["T_WHITESPACE","\n            ",71],["T_VARIABLE","$this",72],["T_OBJECT_OPERATOR","->",72],["T_STRING","resourceModel",72],["T_OBJECT_OPERATOR","->",72],["T_STRING","delete",72],"(",["T_VARIABLE","$synonymGroup",72],")",";",["T_WHITESPACE","\n        ",72],"}",["T_WHITESPACE"," ",73],["T_CATCH","catch",73],["T_WHITESPACE"," ",73],"(",["T_NS_SEPARATOR","\\",73],["T_STRING","Exception",73],["T_WHITESPACE"," ",73],["T_VARIABLE","$exception",73],")",["T_WHITESPACE"," ",73],"{",["T_WHITESPACE","\n            ",73],["T_THROW","throw",74],["T_WHITESPACE"," ",74],["T_NEW","new",74],["T_WHITESPACE"," ",74],["T_STRING","CouldNotDeleteException",74],"(",["T_WHITESPACE","\n                ",74],["T_STRING","__",75],"(",["T_WHITESPACE","\n                    ",75],["T_CONSTANT_ENCAPSED_STRING","'Synonym group with id %1 cannot be deleted. %2'",76],",",["T_WHITESPACE","\n                    ",76],["T_VARIABLE","$synonymGroup",77],["T_OBJECT_OPERATOR","->",77],["T_STRING","getGroupId",77],"(",")",",",["T_WHITESPACE","\n                    ",77],["T_VARIABLE","$exception",78],["T_OBJECT_OPERATOR","->",78],["T_STRING","getMessage",78],"(",")",["T_WHITESPACE","\n                ",78],")",["T_WHITESPACE","\n            ",79],")",";",["T_WHITESPACE","\n        ",80],"}",["T_WHITESPACE","\n        ",81],["T_RETURN","return",82],["T_WHITESPACE"," ",82],["T_STRING","true",82],";",["T_WHITESPACE","\n    ",82],"}",["T_WHITESPACE","\n\n    ",83],["T_DOC_COMMENT","\/**\n     * Return a particular synonym group interface instance based on passed in synonym group id\n     *\n     * @param int $synonymGroupId\n     * @return \\Magento\\Search\\Api\\Data\\SynonymGroupInterface\n     *\/",85],["T_WHITESPACE","\n    ",90],["T_PUBLIC","public",91],["T_WHITESPACE"," ",91],["T_FUNCTION","function",91],["T_WHITESPACE"," ",91],["T_STRING","get",91],"(",["T_VARIABLE","$synonymGroupId",91],")",["T_WHITESPACE","\n    ",91],"{",["T_WHITESPACE","\n        ",92],["T_DOC_COMMENT","\/** @var SynonymGroup $synonymGroup *\/",93],["T_WHITESPACE","\n        ",93],["T_VARIABLE","$synonymGroup",94],["T_WHITESPACE"," ",94],"=",["T_WHITESPACE"," ",94],["T_VARIABLE","$this",94],["T_OBJECT_OPERATOR","->",94],["T_STRING","synonymGroupFactory",94],["T_OBJECT_OPERATOR","->",94],["T_STRING","create",94],"(",")",";",["T_WHITESPACE","\n        ",94],["T_IF","if",95],["T_WHITESPACE"," ",95],"(",["T_VARIABLE","$synonymGroupId",95],["T_WHITESPACE"," ",95],["T_IS_NOT_IDENTICAL","!==",95],["T_WHITESPACE"," ",95],["T_STRING","null",95],")",["T_WHITESPACE"," ",95],"{",["T_WHITESPACE","\n            ",95],["T_VARIABLE","$synonymGroup",96],["T_OBJECT_OPERATOR","->",96],["T_STRING","load",96],"(",["T_VARIABLE","$synonymGroupId",96],")",";",["T_WHITESPACE","\n        ",96],"}",["T_WHITESPACE","\n        ",97],["T_RETURN","return",98],["T_WHITESPACE"," ",98],["T_VARIABLE","$synonymGroup",98],";",["T_WHITESPACE","\n    ",98],"}",["T_WHITESPACE","\n\n    ",99],["T_DOC_COMMENT","\/**\n     * Private helper to create a synonym group, throw exception on merge conflict\n     *\n     * @param SynonymGroupInterface $synonymGroup\n     * @param bool $errorOnMergeConflict\n     * @return SynonymGroupInterface\n     * @throws Synonym\\MergeConflictException\n     *\/",101],["T_WHITESPACE","\n    ",108],["T_PRIVATE","private",109],["T_WHITESPACE"," ",109],["T_FUNCTION","function",109],["T_WHITESPACE"," ",109],["T_STRING","create",109],"(",["T_STRING","SynonymGroupInterface",109],["T_WHITESPACE"," ",109],["T_VARIABLE","$synonymGroup",109],",",["T_WHITESPACE"," ",109],["T_VARIABLE","$errorOnMergeConflict",109],")",["T_WHITESPACE","\n    ",109],"{",["T_WHITESPACE","\n        ",110],["T_VARIABLE","$matchingSynonymGroups",111],["T_WHITESPACE"," ",111],"=",["T_WHITESPACE"," ",111],["T_VARIABLE","$this",111],["T_OBJECT_OPERATOR","->",111],["T_STRING","getMatchingSynonymGroups",111],"(",["T_VARIABLE","$synonymGroup",111],")",";",["T_WHITESPACE","\n        ",111],["T_IF","if",112],["T_WHITESPACE"," ",112],"(",["T_VARIABLE","$matchingSynonymGroups",112],")",["T_WHITESPACE"," ",112],"{",["T_WHITESPACE","\n            ",112],["T_IF","if",113],["T_WHITESPACE"," ",113],"(",["T_VARIABLE","$errorOnMergeConflict",113],")",["T_WHITESPACE"," ",113],"{",["T_WHITESPACE","\n                ",113],["T_THROW","throw",114],["T_WHITESPACE"," ",114],["T_NEW","new",114],["T_WHITESPACE"," ",114],["T_STRING","Synonym",114],["T_NS_SEPARATOR","\\",114],["T_STRING","MergeConflictException",114],"(",["T_WHITESPACE","\n                    ",114],["T_VARIABLE","$this",115],["T_OBJECT_OPERATOR","->",115],["T_STRING","parseToArray",115],"(",["T_VARIABLE","$matchingSynonymGroups",115],")",",",["T_WHITESPACE","\n                    ",115],["T_VARIABLE","$this",116],["T_OBJECT_OPERATOR","->",116],["T_STRING","getExceptionMessage",116],"(",["T_VARIABLE","$matchingSynonymGroups",116],")",["T_WHITESPACE","\n                ",116],")",";",["T_WHITESPACE","\n            ",117],"}",["T_WHITESPACE","\n            ",118],["T_COMMENT","\/\/ merge matching synonyms before creating a new row\n",119],["T_WHITESPACE","            ",120],["T_VARIABLE","$mergedSynonyms",120],["T_WHITESPACE"," ",120],"=",["T_WHITESPACE"," ",120],["T_VARIABLE","$this",120],["T_OBJECT_OPERATOR","->",120],["T_STRING","merge",120],"(",["T_VARIABLE","$synonymGroup",120],",",["T_WHITESPACE"," ",120],["T_STRING","array_keys",120],"(",["T_VARIABLE","$matchingSynonymGroups",120],")",")",";",["T_WHITESPACE","\n            ",120],["T_DOC_COMMENT","\/** @var SynonymGroup $newSynonymGroupModel *\/",121],["T_WHITESPACE","\n            ",121],["T_VARIABLE","$newSynonymGroupModel",122],["T_WHITESPACE"," ",122],"=",["T_WHITESPACE"," ",122],["T_VARIABLE","$this",122],["T_OBJECT_OPERATOR","->",122],["T_STRING","synonymGroupFactory",122],["T_OBJECT_OPERATOR","->",122],["T_STRING","create",122],"(",")",";",["T_WHITESPACE","\n            ",122],["T_VARIABLE","$newSynonymGroupModel",123],["T_OBJECT_OPERATOR","->",123],["T_STRING","setSynonymGroup",123],"(",["T_STRING","implode",123],"(",["T_CONSTANT_ENCAPSED_STRING","','",123],",",["T_WHITESPACE"," ",123],["T_VARIABLE","$mergedSynonyms",123],")",")",";",["T_WHITESPACE","\n            ",123],["T_VARIABLE","$newSynonymGroupModel",124],["T_OBJECT_OPERATOR","->",124],["T_STRING","setWebsiteId",124],"(",["T_VARIABLE","$synonymGroup",124],["T_OBJECT_OPERATOR","->",124],["T_STRING","getWebsiteId",124],"(",")",")",";",["T_WHITESPACE","\n            ",124],["T_VARIABLE","$newSynonymGroupModel",125],["T_OBJECT_OPERATOR","->",125],["T_STRING","setStoreId",125],"(",["T_VARIABLE","$synonymGroup",125],["T_OBJECT_OPERATOR","->",125],["T_STRING","getStoreId",125],"(",")",")",";",["T_WHITESPACE","\n            ",125],["T_VARIABLE","$this",126],["T_OBJECT_OPERATOR","->",126],["T_STRING","resourceModel",126],["T_OBJECT_OPERATOR","->",126],["T_STRING","save",126],"(",["T_VARIABLE","$newSynonymGroupModel",126],")",";",["T_WHITESPACE","\n            ",126],["T_VARIABLE","$synonymGroup",127],["T_OBJECT_OPERATOR","->",127],["T_STRING","setSynonymGroup",127],"(",["T_VARIABLE","$newSynonymGroupModel",127],["T_OBJECT_OPERATOR","->",127],["T_STRING","getSynonymGroup",127],"(",")",")",";",["T_WHITESPACE","\n            ",127],["T_VARIABLE","$synonymGroup",128],["T_OBJECT_OPERATOR","->",128],["T_STRING","setGroupId",128],"(",["T_VARIABLE","$newSynonymGroupModel",128],["T_OBJECT_OPERATOR","->",128],["T_STRING","getGroupId",128],"(",")",")",";",["T_WHITESPACE","\n\n        ",128],"}",["T_WHITESPACE"," ",130],["T_ELSE","else",130],["T_WHITESPACE"," ",130],"{",["T_WHITESPACE","\n            ",130],["T_COMMENT","\/\/ no merge conflict, perform simple insert\n",131],["T_WHITESPACE","            ",132],["T_DOC_COMMENT","\/** @var SynonymGroup $synonymGroupModel *\/",132],["T_WHITESPACE","\n            ",132],["T_VARIABLE","$synonymGroupModel",133],["T_WHITESPACE"," ",133],"=",["T_WHITESPACE"," ",133],["T_VARIABLE","$this",133],["T_OBJECT_OPERATOR","->",133],["T_STRING","synonymGroupFactory",133],["T_OBJECT_OPERATOR","->",133],["T_STRING","create",133],"(",")",";",["T_WHITESPACE","\n            ",133],["T_VARIABLE","$this",134],["T_OBJECT_OPERATOR","->",134],["T_STRING","populateSynonymGroupModel",134],"(",["T_VARIABLE","$synonymGroupModel",134],",",["T_WHITESPACE"," ",134],["T_VARIABLE","$synonymGroup",134],")",";",["T_WHITESPACE","\n            ",134],["T_VARIABLE","$this",135],["T_OBJECT_OPERATOR","->",135],["T_STRING","resourceModel",135],["T_OBJECT_OPERATOR","->",135],["T_STRING","save",135],"(",["T_VARIABLE","$synonymGroupModel",135],")",";",["T_WHITESPACE","\n            ",135],["T_VARIABLE","$synonymGroup",136],["T_OBJECT_OPERATOR","->",136],["T_STRING","setGroupId",136],"(",["T_VARIABLE","$synonymGroupModel",136],["T_OBJECT_OPERATOR","->",136],["T_STRING","getGroupId",136],"(",")",")",";",["T_WHITESPACE","\n        ",136],"}",["T_WHITESPACE","\n        ",137],["T_RETURN","return",138],["T_WHITESPACE"," ",138],["T_VARIABLE","$synonymGroup",138],";",["T_WHITESPACE","\n    ",138],"}",["T_WHITESPACE","\n\n    ",139],["T_DOC_COMMENT","\/**\n     * Perform synonyms merge\n     *\n     * @param SynonymGroupInterface $synonymGroupToMerge\n     * @param array $matchingGroupIds\n     * @return array\n     *\/",141],["T_WHITESPACE","\n    ",147],["T_PRIVATE","private",148],["T_WHITESPACE"," ",148],["T_FUNCTION","function",148],["T_WHITESPACE"," ",148],["T_STRING","merge",148],"(",["T_STRING","SynonymGroupInterface",148],["T_WHITESPACE"," ",148],["T_VARIABLE","$synonymGroupToMerge",148],",",["T_WHITESPACE"," ",148],["T_ARRAY","array",148],["T_WHITESPACE"," ",148],["T_VARIABLE","$matchingGroupIds",148],")",["T_WHITESPACE","\n    ",148],"{",["T_WHITESPACE","\n        ",149],["T_VARIABLE","$mergedSynonyms",150],["T_WHITESPACE"," ",150],"=",["T_WHITESPACE"," ",150],"[","]",";",["T_WHITESPACE","\n        ",150],["T_FOREACH","foreach",151],["T_WHITESPACE"," ",151],"(",["T_VARIABLE","$matchingGroupIds",151],["T_WHITESPACE"," ",151],["T_AS","as",151],["T_WHITESPACE"," ",151],["T_VARIABLE","$groupId",151],")",["T_WHITESPACE"," ",151],"{",["T_WHITESPACE","\n            ",151],["T_DOC_COMMENT","\/** @var SynonymGroup $synonymGroupModel *\/",152],["T_WHITESPACE","\n            ",152],["T_VARIABLE","$synonymGroupModel",153],["T_WHITESPACE"," ",153],"=",["T_WHITESPACE"," ",153],["T_VARIABLE","$this",153],["T_OBJECT_OPERATOR","->",153],["T_STRING","synonymGroupFactory",153],["T_OBJECT_OPERATOR","->",153],["T_STRING","create",153],"(",")",";",["T_WHITESPACE","\n            ",153],["T_VARIABLE","$synonymGroupModel",154],["T_OBJECT_OPERATOR","->",154],["T_STRING","load",154],"(",["T_VARIABLE","$groupId",154],")",";",["T_WHITESPACE","\n            ",154],["T_VARIABLE","$mergedSynonyms",155],["T_WHITESPACE"," ",155],"=",["T_WHITESPACE"," ",155],["T_STRING","array_merge",155],"(",["T_VARIABLE","$mergedSynonyms",155],",",["T_WHITESPACE"," ",155],["T_STRING","explode",155],"(",["T_CONSTANT_ENCAPSED_STRING","','",155],",",["T_WHITESPACE"," ",155],["T_VARIABLE","$synonymGroupModel",155],["T_OBJECT_OPERATOR","->",155],["T_STRING","getSynonymGroup",155],"(",")",")",")",";",["T_WHITESPACE","\n            ",155],["T_VARIABLE","$synonymGroupModel",156],["T_OBJECT_OPERATOR","->",156],["T_STRING","delete",156],"(",")",";",["T_WHITESPACE","\n        ",156],"}",["T_WHITESPACE","\n        ",157],["T_VARIABLE","$mergedSynonyms",158],["T_WHITESPACE"," ",158],"=",["T_WHITESPACE"," ",158],["T_STRING","array_merge",158],"(",["T_VARIABLE","$mergedSynonyms",158],",",["T_WHITESPACE"," ",158],["T_STRING","explode",158],"(",["T_CONSTANT_ENCAPSED_STRING","','",158],",",["T_WHITESPACE"," ",158],["T_VARIABLE","$synonymGroupToMerge",158],["T_OBJECT_OPERATOR","->",158],["T_STRING","getSynonymGroup",158],"(",")",")",")",";",["T_WHITESPACE","\n        ",158],["T_VARIABLE","$mergedSynonyms",159],["T_WHITESPACE"," ",159],"=",["T_WHITESPACE"," ",159],["T_STRING","array_unique",159],"(",["T_VARIABLE","$mergedSynonyms",159],")",";",["T_WHITESPACE","\n        ",159],["T_RETURN","return",160],["T_WHITESPACE"," ",160],["T_VARIABLE","$mergedSynonyms",160],";",["T_WHITESPACE","\n    ",160],"}",["T_WHITESPACE","\n\n    ",161],["T_DOC_COMMENT","\/**\n     * Private helper to populate SynonymGroup model with data\n     *\n     * @param SynonymGroup $modelToPopulate\n     * @param SynonymGroupInterface $synonymGroupData\n     * @return void\n     *\/",163],["T_WHITESPACE","\n    ",169],["T_PRIVATE","private",170],["T_WHITESPACE"," ",170],["T_FUNCTION","function",170],["T_WHITESPACE"," ",170],["T_STRING","populateSynonymGroupModel",170],"(",["T_STRING","SynonymGroup",170],["T_WHITESPACE"," ",170],["T_VARIABLE","$modelToPopulate",170],",",["T_WHITESPACE"," ",170],["T_STRING","SynonymGroupInterface",170],["T_WHITESPACE"," ",170],["T_VARIABLE","$synonymGroupData",170],")",["T_WHITESPACE","\n    ",170],"{",["T_WHITESPACE","\n        ",171],["T_VARIABLE","$modelToPopulate",172],["T_OBJECT_OPERATOR","->",172],["T_STRING","setWebsiteId",172],"(",["T_VARIABLE","$synonymGroupData",172],["T_OBJECT_OPERATOR","->",172],["T_STRING","getWebsiteId",172],"(",")",")",";",["T_WHITESPACE","\n        ",172],["T_VARIABLE","$modelToPopulate",173],["T_OBJECT_OPERATOR","->",173],["T_STRING","setStoreId",173],"(",["T_VARIABLE","$synonymGroupData",173],["T_OBJECT_OPERATOR","->",173],["T_STRING","getStoreId",173],"(",")",")",";",["T_WHITESPACE","\n        ",173],["T_VARIABLE","$modelToPopulate",174],["T_OBJECT_OPERATOR","->",174],["T_STRING","setSynonymGroup",174],"(",["T_VARIABLE","$synonymGroupData",174],["T_OBJECT_OPERATOR","->",174],["T_STRING","getSynonymGroup",174],"(",")",")",";",["T_WHITESPACE","\n    ",174],"}",["T_WHITESPACE","\n\n    ",175],["T_DOC_COMMENT","\/**\n     * Private helper to update a synonym group, throw exception on merge conflict\n     *\n     * @param SynonymGroup $oldSynonymGroup\n     * @param SynonymGroupInterface $newSynonymGroup\n     * @param bool $errorOnMergeConflict\n     * @return SynonymGroupInterface\n     * @throws Synonym\\MergeConflictException\n     *\/",177],["T_WHITESPACE","\n    ",185],["T_PRIVATE","private",186],["T_WHITESPACE"," ",186],["T_FUNCTION","function",186],["T_WHITESPACE"," ",186],["T_STRING","update",186],"(",["T_WHITESPACE","\n        ",186],["T_STRING","SynonymGroup",187],["T_WHITESPACE"," ",187],["T_VARIABLE","$oldSynonymGroup",187],",",["T_WHITESPACE","\n        ",187],["T_STRING","SynonymGroupInterface",188],["T_WHITESPACE"," ",188],["T_VARIABLE","$newSynonymGroup",188],",",["T_WHITESPACE","\n        ",188],["T_VARIABLE","$errorOnMergeConflict",189],["T_WHITESPACE","\n    ",189],")",["T_WHITESPACE"," ",190],"{",["T_WHITESPACE","\n        ",190],["T_VARIABLE","$matchingSynonymGroups",191],["T_WHITESPACE"," ",191],"=",["T_WHITESPACE"," ",191],["T_VARIABLE","$this",191],["T_OBJECT_OPERATOR","->",191],["T_STRING","getMatchingSynonymGroups",191],"(",["T_VARIABLE","$newSynonymGroup",191],")",";",["T_WHITESPACE","\n        ",191],["T_COMMENT","\/\/ ignore existing synonym group as it's value will be discarded\n",192],["T_WHITESPACE","        ",193],["T_VARIABLE","$matchingSynonymGroups",193],["T_WHITESPACE"," ",193],"=",["T_WHITESPACE"," ",193],["T_STRING","array_diff_key",193],"(",["T_WHITESPACE","\n            ",193],["T_VARIABLE","$matchingSynonymGroups",194],",",["T_WHITESPACE","\n            ",194],"[",["T_VARIABLE","$oldSynonymGroup",195],["T_OBJECT_OPERATOR","->",195],["T_STRING","getGroupId",195],"(",")",["T_WHITESPACE"," ",195],["T_DOUBLE_ARROW","=>",195],["T_WHITESPACE"," ",195],["T_VARIABLE","$oldSynonymGroup",195],["T_OBJECT_OPERATOR","->",195],["T_STRING","getSynonymGroup",195],"(",")","]",["T_WHITESPACE","\n        ",195],")",";",["T_WHITESPACE","\n        ",196],["T_IF","if",197],["T_WHITESPACE"," ",197],"(",["T_VARIABLE","$matchingSynonymGroups",197],")",["T_WHITESPACE"," ",197],"{",["T_WHITESPACE","\n            ",197],["T_IF","if",198],["T_WHITESPACE"," ",198],"(",["T_VARIABLE","$errorOnMergeConflict",198],")",["T_WHITESPACE"," ",198],"{",["T_WHITESPACE","\n                ",198],["T_THROW","throw",199],["T_WHITESPACE"," ",199],["T_NEW","new",199],["T_WHITESPACE"," ",199],["T_STRING","Synonym",199],["T_NS_SEPARATOR","\\",199],["T_STRING","MergeConflictException",199],"(",["T_WHITESPACE","\n                    ",199],["T_VARIABLE","$this",200],["T_OBJECT_OPERATOR","->",200],["T_STRING","parseToArray",200],"(",["T_VARIABLE","$matchingSynonymGroups",200],")",",",["T_WHITESPACE","\n                    ",200],["T_VARIABLE","$this",201],["T_OBJECT_OPERATOR","->",201],["T_STRING","getExceptionMessage",201],"(",["T_VARIABLE","$matchingSynonymGroups",201],")",["T_WHITESPACE","\n                ",201],")",";",["T_WHITESPACE","\n            ",202],"}",["T_WHITESPACE","\n            ",203],["T_COMMENT","\/\/ merge matching synonyms before updating a row\n",204],["T_WHITESPACE","            ",205],["T_VARIABLE","$mergedSynonyms",205],["T_WHITESPACE"," ",205],"=",["T_WHITESPACE"," ",205],["T_VARIABLE","$this",205],["T_OBJECT_OPERATOR","->",205],["T_STRING","merge",205],"(",["T_VARIABLE","$newSynonymGroup",205],",",["T_WHITESPACE"," ",205],["T_STRING","array_keys",205],"(",["T_VARIABLE","$matchingSynonymGroups",205],")",")",";",["T_WHITESPACE","\n            ",205],["T_VARIABLE","$oldSynonymGroup",206],["T_OBJECT_OPERATOR","->",206],["T_STRING","setSynonymGroup",206],"(",["T_STRING","implode",206],"(",["T_CONSTANT_ENCAPSED_STRING","','",206],",",["T_WHITESPACE"," ",206],["T_VARIABLE","$mergedSynonyms",206],")",")",";",["T_WHITESPACE","\n            ",206],["T_VARIABLE","$oldSynonymGroup",207],["T_OBJECT_OPERATOR","->",207],["T_STRING","setWebsiteId",207],"(",["T_VARIABLE","$newSynonymGroup",207],["T_OBJECT_OPERATOR","->",207],["T_STRING","getWebsiteId",207],"(",")",")",";",["T_WHITESPACE","\n            ",207],["T_VARIABLE","$oldSynonymGroup",208],["T_OBJECT_OPERATOR","->",208],["T_STRING","setStoreId",208],"(",["T_VARIABLE","$newSynonymGroup",208],["T_OBJECT_OPERATOR","->",208],["T_STRING","getStoreId",208],"(",")",")",";",["T_WHITESPACE","\n            ",208],["T_VARIABLE","$this",209],["T_OBJECT_OPERATOR","->",209],["T_STRING","resourceModel",209],["T_OBJECT_OPERATOR","->",209],["T_STRING","save",209],"(",["T_VARIABLE","$oldSynonymGroup",209],")",";",["T_WHITESPACE","\n        ",209],"}",["T_WHITESPACE"," ",210],["T_ELSE","else",210],["T_WHITESPACE"," ",210],"{",["T_WHITESPACE","\n            ",210],["T_COMMENT","\/\/ no merge conflict, perform simple update\n",211],["T_WHITESPACE","            ",212],["T_VARIABLE","$this",212],["T_OBJECT_OPERATOR","->",212],["T_STRING","populateSynonymGroupModel",212],"(",["T_VARIABLE","$oldSynonymGroup",212],",",["T_WHITESPACE"," ",212],["T_VARIABLE","$newSynonymGroup",212],")",";",["T_WHITESPACE","\n            ",212],["T_VARIABLE","$this",213],["T_OBJECT_OPERATOR","->",213],["T_STRING","resourceModel",213],["T_OBJECT_OPERATOR","->",213],["T_STRING","save",213],"(",["T_VARIABLE","$oldSynonymGroup",213],")",";",["T_WHITESPACE","\n        ",213],"}",["T_WHITESPACE","\n        ",214],["T_RETURN","return",215],["T_WHITESPACE"," ",215],["T_VARIABLE","$oldSynonymGroup",215],";",["T_WHITESPACE","\n    ",215],"}",["T_WHITESPACE","\n\n    ",216],["T_DOC_COMMENT","\/**\n     * Gets merge conflict exception message\n     *\n     * @param string[] $matchingSynonymGroups\n     * @return \\Magento\\Framework\\Phrase\n     *\/",218],["T_WHITESPACE","\n    ",223],["T_PRIVATE","private",224],["T_WHITESPACE"," ",224],["T_FUNCTION","function",224],["T_WHITESPACE"," ",224],["T_STRING","getExceptionMessage",224],"(",["T_VARIABLE","$matchingSynonymGroups",224],")",["T_WHITESPACE","\n    ",224],"{",["T_WHITESPACE","\n        ",225],["T_VARIABLE","$displayString",226],["T_WHITESPACE"," ",226],"=",["T_WHITESPACE"," ",226],["T_CONSTANT_ENCAPSED_STRING","'('",226],";",["T_WHITESPACE","\n        ",226],["T_VARIABLE","$displayString",227],["T_WHITESPACE"," ",227],["T_CONCAT_EQUAL",".=",227],["T_WHITESPACE"," ",227],["T_STRING","implode",227],"(",["T_CONSTANT_ENCAPSED_STRING","'), ('",227],",",["T_WHITESPACE"," ",227],["T_VARIABLE","$matchingSynonymGroups",227],")",";",["T_WHITESPACE","\n        ",227],["T_VARIABLE","$displayString",228],["T_WHITESPACE"," ",228],["T_CONCAT_EQUAL",".=",228],["T_WHITESPACE"," ",228],["T_CONSTANT_ENCAPSED_STRING","')'",228],";",["T_WHITESPACE","\n        ",228],["T_RETURN","return",229],["T_WHITESPACE"," ",229],["T_STRING","__",229],"(",["T_CONSTANT_ENCAPSED_STRING","'Merge conflict with existing synonym group(s): %1'",229],",",["T_WHITESPACE"," ",229],["T_VARIABLE","$displayString",229],")",";",["T_WHITESPACE","\n    ",229],"}",["T_WHITESPACE","\n\n    ",230],["T_DOC_COMMENT","\/**\n     * Parse the matching synonym groups into array\n     *\n     * @param string[] $matchingSynonymGroups\n     * @return array\n     *\/",232],["T_WHITESPACE","\n    ",237],["T_PRIVATE","private",238],["T_WHITESPACE"," ",238],["T_FUNCTION","function",238],["T_WHITESPACE"," ",238],["T_STRING","parseToArray",238],"(",["T_VARIABLE","$matchingSynonymGroups",238],")",["T_WHITESPACE","\n    ",238],"{",["T_WHITESPACE","\n        ",239],["T_VARIABLE","$parsedArray",240],["T_WHITESPACE"," ",240],"=",["T_WHITESPACE"," ",240],"[","]",";",["T_WHITESPACE","\n        ",240],["T_FOREACH","foreach",241],["T_WHITESPACE"," ",241],"(",["T_VARIABLE","$matchingSynonymGroups",241],["T_WHITESPACE"," ",241],["T_AS","as",241],["T_WHITESPACE"," ",241],["T_VARIABLE","$matchingSynonymGroup",241],")",["T_WHITESPACE"," ",241],"{",["T_WHITESPACE","\n            ",241],["T_VARIABLE","$parsedArray",242],"[","]",["T_WHITESPACE"," ",242],"=",["T_WHITESPACE"," ",242],["T_STRING","explode",242],"(",["T_CONSTANT_ENCAPSED_STRING","','",242],",",["T_WHITESPACE"," ",242],["T_VARIABLE","$matchingSynonymGroup",242],")",";",["T_WHITESPACE","\n        ",242],"}",["T_WHITESPACE","\n        ",243],["T_RETURN","return",244],["T_WHITESPACE"," ",244],["T_VARIABLE","$parsedArray",244],";",["T_WHITESPACE","\n    ",244],"}",["T_WHITESPACE","\n\n    ",245],["T_DOC_COMMENT","\/**\n     * Gets all other matching synonym groups in the same scope\n     *\n     * @param SynonymGroupInterface $synonymGroup\n     * @return string[]\n     *\/",247],["T_WHITESPACE","\n    ",252],["T_PRIVATE","private",253],["T_WHITESPACE"," ",253],["T_FUNCTION","function",253],["T_WHITESPACE"," ",253],["T_STRING","getMatchingSynonymGroups",253],"(",["T_STRING","SynonymGroupInterface",253],["T_WHITESPACE"," ",253],["T_VARIABLE","$synonymGroup",253],")",["T_WHITESPACE","\n    ",253],"{",["T_WHITESPACE","\n        ",254],["T_VARIABLE","$synonymGroupsInScope",255],["T_WHITESPACE"," ",255],"=",["T_WHITESPACE"," ",255],["T_VARIABLE","$this",255],["T_OBJECT_OPERATOR","->",255],["T_STRING","resourceModel",255],["T_OBJECT_OPERATOR","->",255],["T_STRING","getByScope",255],"(",["T_WHITESPACE","\n            ",255],["T_VARIABLE","$synonymGroup",256],["T_OBJECT_OPERATOR","->",256],["T_STRING","getWebsiteId",256],"(",")",",",["T_WHITESPACE","\n            ",256],["T_VARIABLE","$synonymGroup",257],["T_OBJECT_OPERATOR","->",257],["T_STRING","getStoreId",257],"(",")",["T_WHITESPACE","\n        ",257],")",";",["T_WHITESPACE","\n        ",258],["T_VARIABLE","$matchingSynonymGroups",259],["T_WHITESPACE"," ",259],"=",["T_WHITESPACE"," ",259],"[","]",";",["T_WHITESPACE","\n        ",259],["T_FOREACH","foreach",260],["T_WHITESPACE"," ",260],"(",["T_VARIABLE","$synonymGroupsInScope",260],["T_WHITESPACE"," ",260],["T_AS","as",260],["T_WHITESPACE"," ",260],["T_VARIABLE","$synonymGroupInScope",260],")",["T_WHITESPACE"," ",260],"{",["T_WHITESPACE","\n            ",260],["T_IF","if",261],["T_WHITESPACE"," ",261],"(",["T_STRING","array_intersect",261],"(",["T_WHITESPACE","\n                ",261],["T_STRING","explode",262],"(",["T_CONSTANT_ENCAPSED_STRING","','",262],",",["T_WHITESPACE"," ",262],["T_VARIABLE","$synonymGroup",262],["T_OBJECT_OPERATOR","->",262],["T_STRING","getSynonymGroup",262],"(",")",")",",",["T_WHITESPACE","\n                ",262],["T_STRING","explode",263],"(",["T_CONSTANT_ENCAPSED_STRING","','",263],",",["T_WHITESPACE"," ",263],["T_VARIABLE","$synonymGroupInScope",263],"[",["T_CONSTANT_ENCAPSED_STRING","'synonyms'",263],"]",")",["T_WHITESPACE","\n            ",263],")",")",["T_WHITESPACE"," ",264],"{",["T_WHITESPACE","\n                ",264],["T_VARIABLE","$matchingSynonymGroups",265],"[",["T_VARIABLE","$synonymGroupInScope",265],"[",["T_CONSTANT_ENCAPSED_STRING","'group_id'",265],"]","]",["T_WHITESPACE"," ",265],"=",["T_WHITESPACE"," ",265],["T_VARIABLE","$synonymGroupInScope",265],"[",["T_CONSTANT_ENCAPSED_STRING","'synonyms'",265],"]",";",["T_WHITESPACE","\n            ",265],"}",["T_WHITESPACE","\n        ",266],"}",["T_WHITESPACE","\n        ",267],["T_RETURN","return",268],["T_WHITESPACE"," ",268],["T_VARIABLE","$matchingSynonymGroups",268],";",["T_WHITESPACE","\n    ",268],"}",["T_WHITESPACE","\n",269],"}",["T_WHITESPACE","\n",270]]
[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Copyright \u00c2\u00a9 2013-2017 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n *\/",2],["T_WHITESPACE","\n",5],["T_NAMESPACE","namespace",6],["T_WHITESPACE"," ",6],["T_STRING","Magento",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Search",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Model",6],";",["T_WHITESPACE","\n\n",6],["T_USE","use",8],["T_WHITESPACE"," ",8],["T_STRING","Magento",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Search",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Api",8],["T_NS_SEPARATOR","\\",8],["T_STRING","SynonymAnalyzerInterface",8],";",["T_WHITESPACE","\n\n",8],["T_CLASS","class",10],["T_WHITESPACE"," ",10],["T_STRING","SynonymAnalyzer",10],["T_WHITESPACE"," ",10],["T_IMPLEMENTS","implements",10],["T_WHITESPACE"," ",10],["T_STRING","SynonymAnalyzerInterface",10],["T_WHITESPACE","\n",10],"{",["T_WHITESPACE","\n    ",11],["T_DOC_COMMENT","\/**\n     * @var SynonymReader $synReaderModel\n     *\/",12],["T_WHITESPACE","\n    ",14],["T_PROTECTED","protected",15],["T_WHITESPACE"," ",15],["T_VARIABLE","$synReaderModel",15],";",["T_WHITESPACE","\n\n    ",15],["T_DOC_COMMENT","\/**\n     * Constructor\n     *\n     * @param SynonymReader $synReader\n     *\/",17],["T_WHITESPACE","\n    ",21],["T_PUBLIC","public",22],["T_WHITESPACE"," ",22],["T_FUNCTION","function",22],["T_WHITESPACE"," ",22],["T_STRING","__construct",22],"(",["T_STRING","SynonymReader",22],["T_WHITESPACE"," ",22],["T_VARIABLE","$synReader",22],")",["T_WHITESPACE","\n    ",22],"{",["T_WHITESPACE","\n        ",23],["T_VARIABLE","$this",24],["T_OBJECT_OPERATOR","->",24],["T_STRING","synReaderModel",24],["T_WHITESPACE"," ",24],"=",["T_WHITESPACE"," ",24],["T_VARIABLE","$synReader",24],";",["T_WHITESPACE","\n    ",24],"}",["T_WHITESPACE","\n\n    ",25],["T_DOC_COMMENT","\/**\n     * Returns an array of arrays consisting of the synonyms found for each word in the input phrase\n     *\n     * For phrase: \"Elizabeth is the English queen\" correct output is an array of arrays containing synonyms for each\n     * word in the phrase:\n     *\n     * [\n     *   0 => [ 0 => \"elizabeth\" ],\n     *   1 => [ 0 => \"is\" ],\n     *   2 => [ 0 => \"the\" ],\n     *   3 => [ 0 => \"british\", 1 => \"english\" ],\n     *   4 => [ 0 => \"queen\", 1 => \"monarch\" ]\n     * ]\n     * @param string $phrase\n     * @return array\n     *\/",27],["T_WHITESPACE","\n    ",42],["T_PUBLIC","public",43],["T_WHITESPACE"," ",43],["T_FUNCTION","function",43],["T_WHITESPACE"," ",43],["T_STRING","getSynonymsForPhrase",43],"(",["T_VARIABLE","$phrase",43],")",["T_WHITESPACE","\n    ",43],"{",["T_WHITESPACE","\n        ",44],["T_VARIABLE","$synGroups",45],["T_WHITESPACE"," ",45],"=",["T_WHITESPACE"," ",45],"[","]",";",["T_WHITESPACE","\n\n        ",45],["T_IF","if",47],["T_WHITESPACE"," ",47],"(",["T_EMPTY","empty",47],"(",["T_VARIABLE","$phrase",47],")",")",["T_WHITESPACE"," ",47],"{",["T_WHITESPACE","\n            ",47],["T_RETURN","return",48],["T_WHITESPACE"," ",48],["T_VARIABLE","$synGroups",48],";",["T_WHITESPACE","\n        ",48],"}",["T_WHITESPACE","\n\n        ",49],["T_VARIABLE","$rows",51],["T_WHITESPACE"," ",51],"=",["T_WHITESPACE"," ",51],["T_VARIABLE","$this",51],["T_OBJECT_OPERATOR","->",51],["T_STRING","synReaderModel",51],["T_OBJECT_OPERATOR","->",51],["T_STRING","loadByPhrase",51],"(",["T_VARIABLE","$phrase",51],")",["T_OBJECT_OPERATOR","->",51],["T_STRING","getData",51],"(",")",";",["T_WHITESPACE","\n        ",51],["T_VARIABLE","$synonyms",52],["T_WHITESPACE"," ",52],"=",["T_WHITESPACE"," ",52],"[","]",";",["T_WHITESPACE","\n        ",52],["T_FOREACH","foreach",53],["T_WHITESPACE"," ",53],"(",["T_VARIABLE","$rows",53],["T_WHITESPACE"," ",53],["T_AS","as",53],["T_WHITESPACE"," ",53],["T_VARIABLE","$row",53],")",["T_WHITESPACE"," ",53],"{",["T_WHITESPACE","\n            ",53],["T_VARIABLE","$synonyms",54],["T_WHITESPACE"," ",54],"[","]",["T_WHITESPACE"," ",54],"=",["T_WHITESPACE"," ",54],["T_VARIABLE","$row",54],"[",["T_CONSTANT_ENCAPSED_STRING","'synonyms'",54],"]",";",["T_WHITESPACE","\n        ",54],"}",["T_WHITESPACE","\n\n        ",55],["T_COMMENT","\/\/ Go through every returned record looking for presence of the actual phrase. If there were no matching\n",57],["T_WHITESPACE","        ",58],["T_COMMENT","\/\/ records found in DB then create a new entry for it in the returned array\n",58],["T_WHITESPACE","        ",59],["T_VARIABLE","$words",59],["T_WHITESPACE"," ",59],"=",["T_WHITESPACE"," ",59],["T_STRING","explode",59],"(",["T_CONSTANT_ENCAPSED_STRING","' '",59],",",["T_WHITESPACE"," ",59],["T_VARIABLE","$phrase",59],")",";",["T_WHITESPACE","\n        ",59],["T_FOREACH","foreach",60],["T_WHITESPACE"," ",60],"(",["T_VARIABLE","$words",60],["T_WHITESPACE"," ",60],["T_AS","as",60],["T_WHITESPACE"," ",60],["T_VARIABLE","$w",60],")",["T_WHITESPACE"," ",60],"{",["T_WHITESPACE","\n            ",60],["T_VARIABLE","$position",61],["T_WHITESPACE"," ",61],"=",["T_WHITESPACE"," ",61],["T_VARIABLE","$this",61],["T_OBJECT_OPERATOR","->",61],["T_STRING","findInArray",61],"(",["T_VARIABLE","$w",61],",",["T_WHITESPACE"," ",61],["T_VARIABLE","$synonyms",61],")",";",["T_WHITESPACE","\n            ",61],["T_IF","if",62],["T_WHITESPACE"," ",62],"(",["T_VARIABLE","$position",62],["T_WHITESPACE"," ",62],["T_IS_NOT_IDENTICAL","!==",62],["T_WHITESPACE"," ",62],["T_STRING","false",62],")",["T_WHITESPACE"," ",62],"{",["T_WHITESPACE","\n                ",62],["T_VARIABLE","$synGroups",63],"[","]",["T_WHITESPACE"," ",63],"=",["T_WHITESPACE"," ",63],["T_STRING","explode",63],"(",["T_CONSTANT_ENCAPSED_STRING","','",63],",",["T_WHITESPACE"," ",63],["T_VARIABLE","$synonyms",63],"[",["T_VARIABLE","$position",63],"]",")",";",["T_WHITESPACE","\n            ",63],"}",["T_WHITESPACE"," ",64],["T_ELSE","else",64],["T_WHITESPACE"," ",64],"{",["T_WHITESPACE","\n                ",64],["T_COMMENT","\/\/ No synonyms were found. Return the original word in this position\n",65],["T_WHITESPACE","                ",66],["T_VARIABLE","$synGroups",66],"[","]",["T_WHITESPACE"," ",66],"=",["T_WHITESPACE"," ",66],"[",["T_VARIABLE","$w",66],"]",";",["T_WHITESPACE","\n            ",66],"}",["T_WHITESPACE","\n        ",67],"}",["T_WHITESPACE","\n        ",68],["T_RETURN","return",69],["T_WHITESPACE"," ",69],["T_VARIABLE","$synGroups",69],";",["T_WHITESPACE","\n    ",69],"}",["T_WHITESPACE","\n\n    ",70],["T_DOC_COMMENT","\/**\n     * Helper method to find the presence of $word in $wordsArray. If found, the particular array index is returned.\n     * Otherwise false will be returned.\n     *\n     * @param string $word\n     * @param $array $wordsArray\n     * @return boolean | int\n     *\/",72],["T_WHITESPACE","\n    ",79],["T_PRIVATE","private",80],["T_WHITESPACE"," ",80],["T_FUNCTION","function",80],["T_WHITESPACE"," ",80],["T_STRING","findInArray",80],"(",["T_VARIABLE","$word",80],",",["T_WHITESPACE"," ",80],["T_VARIABLE","$wordsArray",80],")",["T_WHITESPACE","\n    ",80],"{",["T_WHITESPACE","\n        ",81],["T_IF","if",82],["T_WHITESPACE"," ",82],"(",["T_EMPTY","empty",82],"(",["T_VARIABLE","$wordsArray",82],")",")",["T_WHITESPACE"," ",82],"{",["T_WHITESPACE","\n            ",82],["T_RETURN","return",83],["T_WHITESPACE"," ",83],["T_STRING","false",83],";",["T_WHITESPACE","\n        ",83],"}",["T_WHITESPACE","\n        ",84],["T_VARIABLE","$position",85],["T_WHITESPACE"," ",85],"=",["T_WHITESPACE"," ",85],["T_LNUMBER","0",85],";",["T_WHITESPACE","\n        ",85],["T_FOREACH","foreach",86],["T_WHITESPACE"," ",86],"(",["T_VARIABLE","$wordsArray",86],["T_WHITESPACE"," ",86],["T_AS","as",86],["T_WHITESPACE"," ",86],["T_VARIABLE","$wordsLine",86],")",["T_WHITESPACE"," ",86],"{",["T_WHITESPACE","\n            ",86],["T_VARIABLE","$pattern",87],["T_WHITESPACE"," ",87],"=",["T_WHITESPACE"," ",87],["T_CONSTANT_ENCAPSED_STRING","'\/^'",87],["T_WHITESPACE"," ",87],".",["T_WHITESPACE"," ",87],["T_VARIABLE","$word",87],["T_WHITESPACE"," ",87],".",["T_WHITESPACE"," ",87],["T_CONSTANT_ENCAPSED_STRING","',|,'",87],["T_WHITESPACE"," ",87],".",["T_WHITESPACE"," ",87],["T_VARIABLE","$word",87],["T_WHITESPACE"," ",87],".",["T_WHITESPACE"," ",87],["T_CONSTANT_ENCAPSED_STRING","',|,'",87],["T_WHITESPACE"," ",87],".",["T_WHITESPACE"," ",87],["T_VARIABLE","$word",87],["T_WHITESPACE"," ",87],".",["T_WHITESPACE"," ",87],["T_CONSTANT_ENCAPSED_STRING","'$\/'",87],";",["T_WHITESPACE","\n            ",87],["T_VARIABLE","$rv",88],["T_WHITESPACE"," ",88],"=",["T_WHITESPACE"," ",88],["T_STRING","preg_match",88],"(",["T_VARIABLE","$pattern",88],",",["T_WHITESPACE"," ",88],["T_VARIABLE","$wordsLine",88],")",";",["T_WHITESPACE","\n            ",88],["T_IF","if",89],["T_WHITESPACE"," ",89],"(",["T_VARIABLE","$rv",89],["T_WHITESPACE"," ",89],["T_IS_NOT_EQUAL","!=",89],["T_WHITESPACE"," ",89],["T_LNUMBER","0",89],")",["T_WHITESPACE"," ",89],"{",["T_WHITESPACE","\n                ",89],["T_RETURN","return",90],["T_WHITESPACE"," ",90],["T_VARIABLE","$position",90],";",["T_WHITESPACE","\n            ",90],"}",["T_WHITESPACE","\n            ",91],["T_VARIABLE","$position",92],["T_INC","++",92],";",["T_WHITESPACE","\n        ",92],"}",["T_WHITESPACE","\n        ",93],["T_RETURN","return",94],["T_WHITESPACE"," ",94],["T_STRING","false",94],";",["T_WHITESPACE","\n    ",94],"}",["T_WHITESPACE","\n",95],"}",["T_WHITESPACE","\n",96]]
[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Copyright \u00c2\u00a9 2013-2017 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n *\/",2],["T_WHITESPACE","\n",5],["T_NAMESPACE","namespace",6],["T_WHITESPACE"," ",6],["T_STRING","Magento",6],["T_NS_SEPARATOR","\\",6],["T_STRING","CatalogSearch",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Test",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Unit",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Model",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Indexer",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Scope",6],";",["T_WHITESPACE","\n\n",6],["T_USE","use",8],["T_WHITESPACE"," ",8],["T_STRING","Magento",8],["T_NS_SEPARATOR","\\",8],["T_STRING","CatalogSearch",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Model",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Indexer",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Scope",8],["T_NS_SEPARATOR","\\",8],["T_STRING","IndexSwitcher",8],";",["T_WHITESPACE","\n",8],["T_USE","use",9],["T_WHITESPACE"," ",9],["T_STRING","Magento",9],["T_NS_SEPARATOR","\\",9],["T_STRING","CatalogSearch",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Model",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Indexer",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Scope",9],["T_NS_SEPARATOR","\\",9],["T_STRING","State",9],";",["T_WHITESPACE","\n",9],["T_USE","use",10],["T_WHITESPACE"," ",10],["T_STRING","Magento",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Framework",10],["T_NS_SEPARATOR","\\",10],["T_STRING","App",10],["T_NS_SEPARATOR","\\",10],["T_STRING","ResourceConnection",10],";",["T_WHITESPACE","\n",10],["T_USE","use",11],["T_WHITESPACE"," ",11],["T_STRING","Magento",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Framework",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Indexer",11],["T_NS_SEPARATOR","\\",11],["T_STRING","ScopeResolver",11],["T_NS_SEPARATOR","\\",11],["T_STRING","IndexScopeResolver",11],";",["T_WHITESPACE","\n",11],["T_USE","use",12],["T_WHITESPACE"," ",12],["T_STRING","Magento",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Framework",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Indexer",12],["T_NS_SEPARATOR","\\",12],["T_STRING","IndexStructureInterface",12],";",["T_WHITESPACE","\n",12],["T_USE","use",13],["T_WHITESPACE"," ",13],["T_STRING","Magento",13],["T_NS_SEPARATOR","\\",13],["T_STRING","Framework",13],["T_NS_SEPARATOR","\\",13],["T_STRING","Search",13],["T_NS_SEPARATOR","\\",13],["T_STRING","Request",13],["T_NS_SEPARATOR","\\",13],["T_STRING","Dimension",13],";",["T_WHITESPACE","\n",13],["T_USE","use",14],["T_WHITESPACE"," ",14],["T_STRING","Magento",14],["T_NS_SEPARATOR","\\",14],["T_STRING","CatalogSearch",14],["T_NS_SEPARATOR","\\",14],["T_STRING","Model",14],["T_NS_SEPARATOR","\\",14],["T_STRING","Indexer",14],["T_NS_SEPARATOR","\\",14],["T_STRING","Fulltext",14],["T_WHITESPACE"," ",14],["T_AS","as",14],["T_WHITESPACE"," ",14],["T_STRING","FulltextIndexer",14],";",["T_WHITESPACE","\n",14],["T_USE","use",15],["T_WHITESPACE"," ",15],["T_STRING","Magento",15],["T_NS_SEPARATOR","\\",15],["T_STRING","Framework",15],["T_NS_SEPARATOR","\\",15],["T_STRING","TestFramework",15],["T_NS_SEPARATOR","\\",15],["T_STRING","Unit",15],["T_NS_SEPARATOR","\\",15],["T_STRING","Helper",15],["T_NS_SEPARATOR","\\",15],["T_STRING","ObjectManager",15],["T_WHITESPACE"," ",15],["T_AS","as",15],["T_WHITESPACE"," ",15],["T_STRING","ObjectManagerHelper",15],";",["T_WHITESPACE","\n\n",15],["T_CLASS","class",17],["T_WHITESPACE"," ",17],["T_STRING","IndexSwitcherTest",17],["T_WHITESPACE"," ",17],["T_EXTENDS","extends",17],["T_WHITESPACE"," ",17],["T_NS_SEPARATOR","\\",17],["T_STRING","PHPUnit_Framework_TestCase",17],["T_WHITESPACE","\n",17],"{",["T_WHITESPACE","\n    ",18],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Framework\\DB\\Adapter\\AdapterInterface|\\PHPUnit_Framework_MockObject_MockObject\n     *\/",19],["T_WHITESPACE","\n    ",21],["T_PRIVATE","private",22],["T_WHITESPACE"," ",22],["T_VARIABLE","$connection",22],";",["T_WHITESPACE","\n\n    ",22],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Framework\\Search\\Request\\IndexScopeResolverInterface|\\PHPUnit_Framework_MockObject_MockObject\n     *\/",24],["T_WHITESPACE","\n    ",26],["T_PRIVATE","private",27],["T_WHITESPACE"," ",27],["T_VARIABLE","$indexScopeResolver",27],";",["T_WHITESPACE","\n\n    ",27],["T_DOC_COMMENT","\/**\n     * @var State|\\PHPUnit_Framework_MockObject_MockObject\n     *\/",29],["T_WHITESPACE","\n    ",31],["T_PRIVATE","private",32],["T_WHITESPACE"," ",32],["T_VARIABLE","$scopeState",32],";",["T_WHITESPACE","\n\n    ",32],["T_DOC_COMMENT","\/**\n     * @var IndexSwitcher\n     *\/",34],["T_WHITESPACE","\n    ",36],["T_PRIVATE","private",37],["T_WHITESPACE"," ",37],["T_VARIABLE","$indexSwitcher",37],";",["T_WHITESPACE","\n\n    ",37],["T_DOC_COMMENT","\/**\n     * @var ResourceConnection|\\PHPUnit_Framework_MockObject_MockObject\n     *\/",39],["T_WHITESPACE","\n    ",41],["T_PRIVATE","private",42],["T_WHITESPACE"," ",42],["T_VARIABLE","$resource",42],";",["T_WHITESPACE","\n\n    ",42],["T_PROTECTED","protected",44],["T_WHITESPACE"," ",44],["T_FUNCTION","function",44],["T_WHITESPACE"," ",44],["T_STRING","setUp",44],"(",")",["T_WHITESPACE","\n    ",44],"{",["T_WHITESPACE","\n        ",45],["T_VARIABLE","$this",46],["T_OBJECT_OPERATOR","->",46],["T_STRING","resource",46],["T_WHITESPACE"," ",46],"=",["T_WHITESPACE"," ",46],["T_VARIABLE","$this",46],["T_OBJECT_OPERATOR","->",46],["T_STRING","getMockBuilder",46],"(",["T_STRING","ResourceConnection",46],["T_DOUBLE_COLON","::",46],["T_CLASS","class",46],")",["T_WHITESPACE","\n            ",46],["T_OBJECT_OPERATOR","->",47],["T_STRING","setMethods",47],"(","[",["T_CONSTANT_ENCAPSED_STRING","'getConnection'",47],"]",")",["T_WHITESPACE","\n            ",47],["T_OBJECT_OPERATOR","->",48],["T_STRING","disableOriginalConstructor",48],"(",")",["T_WHITESPACE","\n            ",48],["T_OBJECT_OPERATOR","->",49],["T_STRING","getMock",49],"(",")",";",["T_WHITESPACE","\n        ",49],["T_VARIABLE","$this",50],["T_OBJECT_OPERATOR","->",50],["T_STRING","connection",50],["T_WHITESPACE"," ",50],"=",["T_WHITESPACE"," ",50],["T_VARIABLE","$this",50],["T_OBJECT_OPERATOR","->",50],["T_STRING","getMockBuilder",50],"(",["T_NS_SEPARATOR","\\",50],["T_STRING","Magento",50],["T_NS_SEPARATOR","\\",50],["T_STRING","Framework",50],["T_NS_SEPARATOR","\\",50],["T_STRING","DB",50],["T_NS_SEPARATOR","\\",50],["T_STRING","Adapter",50],["T_NS_SEPARATOR","\\",50],["T_STRING","AdapterInterface",50],["T_DOUBLE_COLON","::",50],["T_CLASS","class",50],")",["T_WHITESPACE","\n            ",50],["T_OBJECT_OPERATOR","->",51],["T_STRING","setMethods",51],"(","[",["T_CONSTANT_ENCAPSED_STRING","'isTableExists'",51],",",["T_WHITESPACE"," ",51],["T_CONSTANT_ENCAPSED_STRING","'dropTable'",51],",",["T_WHITESPACE"," ",51],["T_CONSTANT_ENCAPSED_STRING","'renameTable'",51],"]",")",["T_WHITESPACE","\n            ",51],["T_OBJECT_OPERATOR","->",52],["T_STRING","getMockForAbstractClass",52],"(",")",";",["T_WHITESPACE","\n        ",52],["T_VARIABLE","$this",53],["T_OBJECT_OPERATOR","->",53],["T_STRING","resource",53],["T_OBJECT_OPERATOR","->",53],["T_STRING","expects",53],"(",["T_VARIABLE","$this",53],["T_OBJECT_OPERATOR","->",53],["T_STRING","any",53],"(",")",")",["T_WHITESPACE","\n            ",53],["T_OBJECT_OPERATOR","->",54],["T_STRING","method",54],"(",["T_CONSTANT_ENCAPSED_STRING","'getConnection'",54],")",["T_WHITESPACE","\n            ",54],["T_OBJECT_OPERATOR","->",55],["T_STRING","willReturn",55],"(",["T_VARIABLE","$this",55],["T_OBJECT_OPERATOR","->",55],["T_STRING","connection",55],")",";",["T_WHITESPACE","\n        ",55],["T_VARIABLE","$this",56],["T_OBJECT_OPERATOR","->",56],["T_STRING","indexScopeResolver",56],["T_WHITESPACE"," ",56],"=",["T_WHITESPACE"," ",56],["T_VARIABLE","$this",56],["T_OBJECT_OPERATOR","->",56],["T_STRING","getMockBuilder",56],"(",["T_WHITESPACE","\n            ",56],["T_NS_SEPARATOR","\\",57],["T_STRING","Magento",57],["T_NS_SEPARATOR","\\",57],["T_STRING","Framework",57],["T_NS_SEPARATOR","\\",57],["T_STRING","Search",57],["T_NS_SEPARATOR","\\",57],["T_STRING","Request",57],["T_NS_SEPARATOR","\\",57],["T_STRING","IndexScopeResolverInterface",57],["T_DOUBLE_COLON","::",57],["T_CLASS","class",57],["T_WHITESPACE","\n        ",57],")",["T_WHITESPACE","\n            ",58],["T_OBJECT_OPERATOR","->",59],["T_STRING","setMethods",59],"(","[",["T_CONSTANT_ENCAPSED_STRING","'resolve'",59],"]",")",["T_WHITESPACE","\n            ",59],["T_OBJECT_OPERATOR","->",60],["T_STRING","getMockForAbstractClass",60],"(",")",";",["T_WHITESPACE","\n        ",60],["T_VARIABLE","$this",61],["T_OBJECT_OPERATOR","->",61],["T_STRING","scopeState",61],["T_WHITESPACE"," ",61],"=",["T_WHITESPACE"," ",61],["T_VARIABLE","$this",61],["T_OBJECT_OPERATOR","->",61],["T_STRING","getMockBuilder",61],"(",["T_STRING","State",61],["T_DOUBLE_COLON","::",61],["T_CLASS","class",61],")",["T_WHITESPACE","\n            ",61],["T_OBJECT_OPERATOR","->",62],["T_STRING","setMethods",62],"(","[",["T_CONSTANT_ENCAPSED_STRING","'getState'",62],",",["T_WHITESPACE"," ",62],["T_CONSTANT_ENCAPSED_STRING","'useRegularIndex'",62],",",["T_WHITESPACE"," ",62],["T_CONSTANT_ENCAPSED_STRING","'useTemporaryIndex'",62],"]",")",["T_WHITESPACE","\n            ",62],["T_OBJECT_OPERATOR","->",63],["T_STRING","disableOriginalConstructor",63],"(",")",["T_WHITESPACE","\n            ",63],["T_OBJECT_OPERATOR","->",64],["T_STRING","getMock",64],"(",")",";",["T_WHITESPACE","\n\n        ",64],["T_VARIABLE","$objectManagerHelper",66],["T_WHITESPACE"," ",66],"=",["T_WHITESPACE"," ",66],["T_NEW","new",66],["T_WHITESPACE"," ",66],["T_STRING","ObjectManagerHelper",66],"(",["T_VARIABLE","$this",66],")",";",["T_WHITESPACE","\n        ",66],["T_VARIABLE","$this",67],["T_OBJECT_OPERATOR","->",67],["T_STRING","indexSwitcher",67],["T_WHITESPACE"," ",67],"=",["T_WHITESPACE"," ",67],["T_VARIABLE","$objectManagerHelper",67],["T_OBJECT_OPERATOR","->",67],["T_STRING","getObject",67],"(",["T_WHITESPACE","\n            ",67],["T_NS_SEPARATOR","\\",68],["T_STRING","Magento",68],["T_NS_SEPARATOR","\\",68],["T_STRING","CatalogSearch",68],["T_NS_SEPARATOR","\\",68],["T_STRING","Model",68],["T_NS_SEPARATOR","\\",68],["T_STRING","Indexer",68],["T_NS_SEPARATOR","\\",68],["T_STRING","Scope",68],["T_NS_SEPARATOR","\\",68],["T_STRING","IndexSwitcher",68],["T_DOUBLE_COLON","::",68],["T_CLASS","class",68],",",["T_WHITESPACE","\n            ",68],"[",["T_WHITESPACE","\n                ",69],["T_CONSTANT_ENCAPSED_STRING","'resource'",70],["T_WHITESPACE"," ",70],["T_DOUBLE_ARROW","=>",70],["T_WHITESPACE"," ",70],["T_VARIABLE","$this",70],["T_OBJECT_OPERATOR","->",70],["T_STRING","resource",70],",",["T_WHITESPACE","\n                ",70],["T_CONSTANT_ENCAPSED_STRING","'indexScopeResolver'",71],["T_WHITESPACE"," ",71],["T_DOUBLE_ARROW","=>",71],["T_WHITESPACE"," ",71],["T_VARIABLE","$this",71],["T_OBJECT_OPERATOR","->",71],["T_STRING","indexScopeResolver",71],",",["T_WHITESPACE","\n                ",71],["T_CONSTANT_ENCAPSED_STRING","'state'",72],["T_WHITESPACE"," ",72],["T_DOUBLE_ARROW","=>",72],["T_WHITESPACE"," ",72],["T_VARIABLE","$this",72],["T_OBJECT_OPERATOR","->",72],["T_STRING","scopeState",72],",",["T_WHITESPACE","\n            ",72],"]",["T_WHITESPACE","\n        ",73],")",";",["T_WHITESPACE","\n    ",74],"}",["T_WHITESPACE","\n\n    ",75],["T_PUBLIC","public",77],["T_WHITESPACE"," ",77],["T_FUNCTION","function",77],["T_WHITESPACE"," ",77],["T_STRING","testSwitchRegularIndex",77],"(",")",["T_WHITESPACE","\n    ",77],"{",["T_WHITESPACE","\n        ",78],["T_VARIABLE","$dimensions",79],["T_WHITESPACE"," ",79],"=",["T_WHITESPACE"," ",79],"[",["T_VARIABLE","$this",79],["T_OBJECT_OPERATOR","->",79],["T_STRING","getMockBuilder",79],"(",["T_STRING","Dimension",79],["T_DOUBLE_COLON","::",79],["T_CLASS","class",79],")",["T_OBJECT_OPERATOR","->",79],["T_STRING","setConstructorArgs",79],"(","[",["T_CONSTANT_ENCAPSED_STRING","'scope'",79],",",["T_WHITESPACE"," ",79],["T_CONSTANT_ENCAPSED_STRING","'1'",79],"]",")","]",";",["T_WHITESPACE","\n\n        ",79],["T_VARIABLE","$this",81],["T_OBJECT_OPERATOR","->",81],["T_STRING","scopeState",81],["T_OBJECT_OPERATOR","->",81],["T_STRING","expects",81],"(",["T_VARIABLE","$this",81],["T_OBJECT_OPERATOR","->",81],["T_STRING","once",81],"(",")",")",["T_WHITESPACE","\n            ",81],["T_OBJECT_OPERATOR","->",82],["T_STRING","method",82],"(",["T_CONSTANT_ENCAPSED_STRING","'getState'",82],")",["T_WHITESPACE","\n            ",82],["T_OBJECT_OPERATOR","->",83],["T_STRING","willReturn",83],"(",["T_STRING","State",83],["T_DOUBLE_COLON","::",83],["T_STRING","USE_REGULAR_INDEX",83],")",";",["T_WHITESPACE","\n\n        ",83],["T_VARIABLE","$this",85],["T_OBJECT_OPERATOR","->",85],["T_STRING","indexScopeResolver",85],["T_OBJECT_OPERATOR","->",85],["T_STRING","expects",85],"(",["T_VARIABLE","$this",85],["T_OBJECT_OPERATOR","->",85],["T_STRING","never",85],"(",")",")",["T_OBJECT_OPERATOR","->",85],["T_STRING","method",85],"(",["T_CONSTANT_ENCAPSED_STRING","'resolve'",85],")",";",["T_WHITESPACE","\n        ",85],["T_VARIABLE","$this",86],["T_OBJECT_OPERATOR","->",86],["T_STRING","connection",86],["T_OBJECT_OPERATOR","->",86],["T_STRING","expects",86],"(",["T_VARIABLE","$this",86],["T_OBJECT_OPERATOR","->",86],["T_STRING","never",86],"(",")",")",["T_OBJECT_OPERATOR","->",86],["T_STRING","method",86],"(",["T_CONSTANT_ENCAPSED_STRING","'renameTable'",86],")",";",["T_WHITESPACE","\n\n        ",86],["T_VARIABLE","$this",88],["T_OBJECT_OPERATOR","->",88],["T_STRING","indexSwitcher",88],["T_OBJECT_OPERATOR","->",88],["T_STRING","switchIndex",88],"(",["T_VARIABLE","$dimensions",88],")",";",["T_WHITESPACE","\n    ",88],"}",["T_WHITESPACE","\n\n    ",89],["T_PUBLIC","public",91],["T_WHITESPACE"," ",91],["T_FUNCTION","function",91],["T_WHITESPACE"," ",91],["T_STRING","testSwitchIndexWithUnknownState",91],"(",")",["T_WHITESPACE","\n    ",91],"{",["T_WHITESPACE","\n        ",92],["T_VARIABLE","$dimensions",93],["T_WHITESPACE"," ",93],"=",["T_WHITESPACE"," ",93],"[",["T_VARIABLE","$this",93],["T_OBJECT_OPERATOR","->",93],["T_STRING","getMockBuilder",93],"(",["T_STRING","Dimension",93],["T_DOUBLE_COLON","::",93],["T_CLASS","class",93],")",["T_OBJECT_OPERATOR","->",93],["T_STRING","setConstructorArgs",93],"(","[",["T_CONSTANT_ENCAPSED_STRING","'scope'",93],",",["T_WHITESPACE"," ",93],["T_CONSTANT_ENCAPSED_STRING","'1'",93],"]",")","]",";",["T_WHITESPACE","\n\n        ",93],["T_VARIABLE","$this",95],["T_OBJECT_OPERATOR","->",95],["T_STRING","scopeState",95],["T_OBJECT_OPERATOR","->",95],["T_STRING","expects",95],"(",["T_VARIABLE","$this",95],["T_OBJECT_OPERATOR","->",95],["T_STRING","once",95],"(",")",")",["T_WHITESPACE","\n            ",95],["T_OBJECT_OPERATOR","->",96],["T_STRING","method",96],"(",["T_CONSTANT_ENCAPSED_STRING","'getState'",96],")",["T_WHITESPACE","\n            ",96],["T_OBJECT_OPERATOR","->",97],["T_STRING","willReturn",97],"(",["T_CONSTANT_ENCAPSED_STRING","'unknown_state'",97],")",";",["T_WHITESPACE","\n\n        ",97],["T_VARIABLE","$this",99],["T_OBJECT_OPERATOR","->",99],["T_STRING","indexScopeResolver",99],["T_OBJECT_OPERATOR","->",99],["T_STRING","expects",99],"(",["T_VARIABLE","$this",99],["T_OBJECT_OPERATOR","->",99],["T_STRING","never",99],"(",")",")",["T_OBJECT_OPERATOR","->",99],["T_STRING","method",99],"(",["T_CONSTANT_ENCAPSED_STRING","'resolve'",99],")",";",["T_WHITESPACE","\n        ",99],["T_VARIABLE","$this",100],["T_OBJECT_OPERATOR","->",100],["T_STRING","connection",100],["T_OBJECT_OPERATOR","->",100],["T_STRING","expects",100],"(",["T_VARIABLE","$this",100],["T_OBJECT_OPERATOR","->",100],["T_STRING","never",100],"(",")",")",["T_OBJECT_OPERATOR","->",100],["T_STRING","method",100],"(",["T_CONSTANT_ENCAPSED_STRING","'renameTable'",100],")",";",["T_WHITESPACE","\n\n        ",100],["T_VARIABLE","$this",102],["T_OBJECT_OPERATOR","->",102],["T_STRING","indexSwitcher",102],["T_OBJECT_OPERATOR","->",102],["T_STRING","switchIndex",102],"(",["T_VARIABLE","$dimensions",102],")",";",["T_WHITESPACE","\n    ",102],"}",["T_WHITESPACE","\n\n    ",103],["T_PUBLIC","public",105],["T_WHITESPACE"," ",105],["T_FUNCTION","function",105],["T_WHITESPACE"," ",105],["T_STRING","testSwitchTemporaryIndexWhenRegularIndexExist",105],"(",")",["T_WHITESPACE","\n    ",105],"{",["T_WHITESPACE","\n        ",106],["T_VARIABLE","$dimensions",107],["T_WHITESPACE"," ",107],"=",["T_WHITESPACE"," ",107],"[",["T_VARIABLE","$this",107],["T_OBJECT_OPERATOR","->",107],["T_STRING","getMockBuilder",107],"(",["T_STRING","Dimension",107],["T_DOUBLE_COLON","::",107],["T_CLASS","class",107],")",["T_OBJECT_OPERATOR","->",107],["T_STRING","setConstructorArgs",107],"(","[",["T_CONSTANT_ENCAPSED_STRING","'scope'",107],",",["T_WHITESPACE"," ",107],["T_CONSTANT_ENCAPSED_STRING","'1'",107],"]",")","]",";",["T_WHITESPACE","\n\n        ",107],["T_VARIABLE","$this",109],["T_OBJECT_OPERATOR","->",109],["T_STRING","scopeState",109],["T_OBJECT_OPERATOR","->",109],["T_STRING","expects",109],"(",["T_VARIABLE","$this",109],["T_OBJECT_OPERATOR","->",109],["T_STRING","once",109],"(",")",")",["T_WHITESPACE","\n            ",109],["T_OBJECT_OPERATOR","->",110],["T_STRING","method",110],"(",["T_CONSTANT_ENCAPSED_STRING","'getState'",110],")",["T_WHITESPACE","\n            ",110],["T_OBJECT_OPERATOR","->",111],["T_STRING","willReturn",111],"(",["T_STRING","State",111],["T_DOUBLE_COLON","::",111],["T_STRING","USE_TEMPORARY_INDEX",111],")",";",["T_WHITESPACE","\n\n        ",111],["T_VARIABLE","$this",113],["T_OBJECT_OPERATOR","->",113],["T_STRING","scopeState",113],["T_OBJECT_OPERATOR","->",113],["T_STRING","expects",113],"(",["T_VARIABLE","$this",113],["T_OBJECT_OPERATOR","->",113],["T_STRING","at",113],"(",["T_LNUMBER","1",113],")",")",["T_OBJECT_OPERATOR","->",113],["T_STRING","method",113],"(",["T_CONSTANT_ENCAPSED_STRING","'useRegularIndex'",113],")",";",["T_WHITESPACE","\n        ",113],["T_VARIABLE","$this",114],["T_OBJECT_OPERATOR","->",114],["T_STRING","scopeState",114],["T_OBJECT_OPERATOR","->",114],["T_STRING","expects",114],"(",["T_VARIABLE","$this",114],["T_OBJECT_OPERATOR","->",114],["T_STRING","at",114],"(",["T_LNUMBER","2",114],")",")",["T_OBJECT_OPERATOR","->",114],["T_STRING","method",114],"(",["T_CONSTANT_ENCAPSED_STRING","'useTemporaryIndex'",114],")",";",["T_WHITESPACE","\n\n        ",114],["T_VARIABLE","$this",116],["T_OBJECT_OPERATOR","->",116],["T_STRING","indexScopeResolver",116],["T_OBJECT_OPERATOR","->",116],["T_STRING","expects",116],"(",["T_VARIABLE","$this",116],["T_OBJECT_OPERATOR","->",116],["T_STRING","exactly",116],"(",["T_LNUMBER","2",116],")",")",["T_OBJECT_OPERATOR","->",116],["T_STRING","method",116],"(",["T_CONSTANT_ENCAPSED_STRING","'resolve'",116],")",["T_WHITESPACE","\n            ",116],["T_OBJECT_OPERATOR","->",117],["T_STRING","withConsecutive",117],"(",["T_WHITESPACE","\n                ",117],"[",["T_VARIABLE","$this",118],["T_OBJECT_OPERATOR","->",118],["T_STRING","equalTo",118],"(",["T_STRING","FulltextIndexer",118],["T_DOUBLE_COLON","::",118],["T_STRING","INDEXER_ID",118],")",",",["T_WHITESPACE"," ",118],["T_VARIABLE","$this",118],["T_OBJECT_OPERATOR","->",118],["T_STRING","equalTo",118],"(",["T_VARIABLE","$dimensions",118],")","]",",",["T_WHITESPACE","\n                ",118],"[",["T_VARIABLE","$this",119],["T_OBJECT_OPERATOR","->",119],["T_STRING","equalTo",119],"(",["T_STRING","FulltextIndexer",119],["T_DOUBLE_COLON","::",119],["T_STRING","INDEXER_ID",119],")",",",["T_WHITESPACE"," ",119],["T_VARIABLE","$this",119],["T_OBJECT_OPERATOR","->",119],["T_STRING","equalTo",119],"(",["T_VARIABLE","$dimensions",119],")","]",["T_WHITESPACE","\n            ",119],")",["T_WHITESPACE","\n            ",120],["T_OBJECT_OPERATOR","->",121],["T_STRING","willReturnOnConsecutiveCalls",121],"(",["T_WHITESPACE","\n                ",121],["T_CONSTANT_ENCAPSED_STRING","'catalogsearch_fulltext_scope1_tmp1'",122],",",["T_WHITESPACE","\n                ",122],["T_CONSTANT_ENCAPSED_STRING","'catalogsearch_fulltext_scope1'",123],["T_WHITESPACE","\n            ",123],")",";",["T_WHITESPACE","\n\n        ",124],["T_VARIABLE","$this",126],["T_OBJECT_OPERATOR","->",126],["T_STRING","connection",126],["T_OBJECT_OPERATOR","->",126],["T_STRING","expects",126],"(",["T_VARIABLE","$this",126],["T_OBJECT_OPERATOR","->",126],["T_STRING","exactly",126],"(",["T_LNUMBER","2",126],")",")",["T_OBJECT_OPERATOR","->",126],["T_STRING","method",126],"(",["T_CONSTANT_ENCAPSED_STRING","'isTableExists'",126],")",["T_WHITESPACE","\n            ",126],["T_OBJECT_OPERATOR","->",127],["T_STRING","withConsecutive",127],"(",["T_WHITESPACE","\n                ",127],"[",["T_VARIABLE","$this",128],["T_OBJECT_OPERATOR","->",128],["T_STRING","equalTo",128],"(",["T_CONSTANT_ENCAPSED_STRING","'catalogsearch_fulltext_scope1_tmp1'",128],")",",",["T_WHITESPACE"," ",128],["T_VARIABLE","$this",128],["T_OBJECT_OPERATOR","->",128],["T_STRING","equalTo",128],"(",["T_STRING","null",128],")","]",",",["T_WHITESPACE","\n                ",128],"[",["T_VARIABLE","$this",129],["T_OBJECT_OPERATOR","->",129],["T_STRING","equalTo",129],"(",["T_CONSTANT_ENCAPSED_STRING","'catalogsearch_fulltext_scope1'",129],")",",",["T_WHITESPACE"," ",129],["T_VARIABLE","$this",129],["T_OBJECT_OPERATOR","->",129],["T_STRING","equalTo",129],"(",["T_STRING","null",129],")","]",["T_WHITESPACE","\n            ",129],")",["T_WHITESPACE","\n            ",130],["T_OBJECT_OPERATOR","->",131],["T_STRING","willReturnOnConsecutiveCalls",131],"(",["T_WHITESPACE","\n                ",131],["T_STRING","true",132],",",["T_WHITESPACE","\n                ",132],["T_STRING","true",133],["T_WHITESPACE","\n            ",133],")",";",["T_WHITESPACE","\n\n        ",134],["T_VARIABLE","$this",136],["T_OBJECT_OPERATOR","->",136],["T_STRING","connection",136],["T_OBJECT_OPERATOR","->",136],["T_STRING","expects",136],"(",["T_VARIABLE","$this",136],["T_OBJECT_OPERATOR","->",136],["T_STRING","once",136],"(",")",")",["T_OBJECT_OPERATOR","->",136],["T_STRING","method",136],"(",["T_CONSTANT_ENCAPSED_STRING","'dropTable'",136],")",["T_OBJECT_OPERATOR","->",136],["T_STRING","with",136],"(",["T_CONSTANT_ENCAPSED_STRING","'catalogsearch_fulltext_scope1'",136],",",["T_WHITESPACE"," ",136],["T_STRING","null",136],")",";",["T_WHITESPACE","\n        ",136],["T_VARIABLE","$this",137],["T_OBJECT_OPERATOR","->",137],["T_STRING","connection",137],["T_OBJECT_OPERATOR","->",137],["T_STRING","expects",137],"(",["T_VARIABLE","$this",137],["T_OBJECT_OPERATOR","->",137],["T_STRING","once",137],"(",")",")",["T_WHITESPACE","\n            ",137],["T_OBJECT_OPERATOR","->",138],["T_STRING","method",138],"(",["T_CONSTANT_ENCAPSED_STRING","'renameTable'",138],")",["T_WHITESPACE","\n            ",138],["T_OBJECT_OPERATOR","->",139],["T_STRING","with",139],"(",["T_CONSTANT_ENCAPSED_STRING","'catalogsearch_fulltext_scope1_tmp1'",139],",",["T_WHITESPACE"," ",139],["T_CONSTANT_ENCAPSED_STRING","'catalogsearch_fulltext_scope1'",139],")",";",["T_WHITESPACE","\n\n        ",139],["T_VARIABLE","$this",141],["T_OBJECT_OPERATOR","->",141],["T_STRING","indexSwitcher",141],["T_OBJECT_OPERATOR","->",141],["T_STRING","switchIndex",141],"(",["T_VARIABLE","$dimensions",141],")",";",["T_WHITESPACE","\n    ",141],"}",["T_WHITESPACE","\n\n    ",142],["T_PUBLIC","public",144],["T_WHITESPACE"," ",144],["T_FUNCTION","function",144],["T_WHITESPACE"," ",144],["T_STRING","testSwitchTemporaryIndexWhenRegularIndexNotExist",144],"(",")",["T_WHITESPACE","\n    ",144],"{",["T_WHITESPACE","\n        ",145],["T_VARIABLE","$dimensions",146],["T_WHITESPACE"," ",146],"=",["T_WHITESPACE"," ",146],"[",["T_VARIABLE","$this",146],["T_OBJECT_OPERATOR","->",146],["T_STRING","getMockBuilder",146],"(",["T_STRING","Dimension",146],["T_DOUBLE_COLON","::",146],["T_CLASS","class",146],")",["T_OBJECT_OPERATOR","->",146],["T_STRING","setConstructorArgs",146],"(","[",["T_CONSTANT_ENCAPSED_STRING","'scope'",146],",",["T_WHITESPACE"," ",146],["T_CONSTANT_ENCAPSED_STRING","'1'",146],"]",")","]",";",["T_WHITESPACE","\n\n        ",146],["T_VARIABLE","$this",148],["T_OBJECT_OPERATOR","->",148],["T_STRING","scopeState",148],["T_OBJECT_OPERATOR","->",148],["T_STRING","expects",148],"(",["T_VARIABLE","$this",148],["T_OBJECT_OPERATOR","->",148],["T_STRING","once",148],"(",")",")",["T_WHITESPACE","\n            ",148],["T_OBJECT_OPERATOR","->",149],["T_STRING","method",149],"(",["T_CONSTANT_ENCAPSED_STRING","'getState'",149],")",["T_WHITESPACE","\n            ",149],["T_OBJECT_OPERATOR","->",150],["T_STRING","willReturn",150],"(",["T_STRING","State",150],["T_DOUBLE_COLON","::",150],["T_STRING","USE_TEMPORARY_INDEX",150],")",";",["T_WHITESPACE","\n\n        ",150],["T_VARIABLE","$this",152],["T_OBJECT_OPERATOR","->",152],["T_STRING","scopeState",152],["T_OBJECT_OPERATOR","->",152],["T_STRING","expects",152],"(",["T_VARIABLE","$this",152],["T_OBJECT_OPERATOR","->",152],["T_STRING","at",152],"(",["T_LNUMBER","1",152],")",")",["T_OBJECT_OPERATOR","->",152],["T_STRING","method",152],"(",["T_CONSTANT_ENCAPSED_STRING","'useRegularIndex'",152],")",";",["T_WHITESPACE","\n        ",152],["T_VARIABLE","$this",153],["T_OBJECT_OPERATOR","->",153],["T_STRING","scopeState",153],["T_OBJECT_OPERATOR","->",153],["T_STRING","expects",153],"(",["T_VARIABLE","$this",153],["T_OBJECT_OPERATOR","->",153],["T_STRING","at",153],"(",["T_LNUMBER","2",153],")",")",["T_OBJECT_OPERATOR","->",153],["T_STRING","method",153],"(",["T_CONSTANT_ENCAPSED_STRING","'useTemporaryIndex'",153],")",";",["T_WHITESPACE","\n\n        ",153],["T_VARIABLE","$this",155],["T_OBJECT_OPERATOR","->",155],["T_STRING","indexScopeResolver",155],["T_OBJECT_OPERATOR","->",155],["T_STRING","expects",155],"(",["T_VARIABLE","$this",155],["T_OBJECT_OPERATOR","->",155],["T_STRING","exactly",155],"(",["T_LNUMBER","2",155],")",")",["T_OBJECT_OPERATOR","->",155],["T_STRING","method",155],"(",["T_CONSTANT_ENCAPSED_STRING","'resolve'",155],")",["T_WHITESPACE","\n            ",155],["T_OBJECT_OPERATOR","->",156],["T_STRING","withConsecutive",156],"(",["T_WHITESPACE","\n                ",156],"[",["T_VARIABLE","$this",157],["T_OBJECT_OPERATOR","->",157],["T_STRING","equalTo",157],"(",["T_STRING","FulltextIndexer",157],["T_DOUBLE_COLON","::",157],["T_STRING","INDEXER_ID",157],")",",",["T_WHITESPACE"," ",157],["T_VARIABLE","$this",157],["T_OBJECT_OPERATOR","->",157],["T_STRING","equalTo",157],"(",["T_VARIABLE","$dimensions",157],")","]",",",["T_WHITESPACE","\n                ",157],"[",["T_VARIABLE","$this",158],["T_OBJECT_OPERATOR","->",158],["T_STRING","equalTo",158],"(",["T_STRING","FulltextIndexer",158],["T_DOUBLE_COLON","::",158],["T_STRING","INDEXER_ID",158],")",",",["T_WHITESPACE"," ",158],["T_VARIABLE","$this",158],["T_OBJECT_OPERATOR","->",158],["T_STRING","equalTo",158],"(",["T_VARIABLE","$dimensions",158],")","]",["T_WHITESPACE","\n            ",158],")",["T_WHITESPACE","\n            ",159],["T_OBJECT_OPERATOR","->",160],["T_STRING","willReturnOnConsecutiveCalls",160],"(",["T_WHITESPACE","\n                ",160],["T_CONSTANT_ENCAPSED_STRING","'catalogsearch_fulltext_scope1_tmp1'",161],",",["T_WHITESPACE","\n                ",161],["T_CONSTANT_ENCAPSED_STRING","'catalogsearch_fulltext_scope1'",162],["T_WHITESPACE","\n            ",162],")",";",["T_WHITESPACE","\n\n        ",163],["T_VARIABLE","$this",165],["T_OBJECT_OPERATOR","->",165],["T_STRING","connection",165],["T_OBJECT_OPERATOR","->",165],["T_STRING","expects",165],"(",["T_VARIABLE","$this",165],["T_OBJECT_OPERATOR","->",165],["T_STRING","exactly",165],"(",["T_LNUMBER","2",165],")",")",["T_OBJECT_OPERATOR","->",165],["T_STRING","method",165],"(",["T_CONSTANT_ENCAPSED_STRING","'isTableExists'",165],")",["T_WHITESPACE","\n            ",165],["T_OBJECT_OPERATOR","->",166],["T_STRING","withConsecutive",166],"(",["T_WHITESPACE","\n                ",166],"[",["T_VARIABLE","$this",167],["T_OBJECT_OPERATOR","->",167],["T_STRING","equalTo",167],"(",["T_CONSTANT_ENCAPSED_STRING","'catalogsearch_fulltext_scope1_tmp1'",167],")",",",["T_WHITESPACE"," ",167],["T_VARIABLE","$this",167],["T_OBJECT_OPERATOR","->",167],["T_STRING","equalTo",167],"(",["T_STRING","null",167],")","]",",",["T_WHITESPACE","\n                ",167],"[",["T_VARIABLE","$this",168],["T_OBJECT_OPERATOR","->",168],["T_STRING","equalTo",168],"(",["T_CONSTANT_ENCAPSED_STRING","'catalogsearch_fulltext_scope1'",168],")",",",["T_WHITESPACE"," ",168],["T_VARIABLE","$this",168],["T_OBJECT_OPERATOR","->",168],["T_STRING","equalTo",168],"(",["T_STRING","null",168],")","]",["T_WHITESPACE","\n            ",168],")",["T_WHITESPACE","\n            ",169],["T_OBJECT_OPERATOR","->",170],["T_STRING","willReturnOnConsecutiveCalls",170],"(",["T_WHITESPACE","\n                ",170],["T_STRING","true",171],",",["T_WHITESPACE","\n                ",171],["T_STRING","false",172],["T_WHITESPACE","\n            ",172],")",";",["T_WHITESPACE","\n\n        ",173],["T_VARIABLE","$this",175],["T_OBJECT_OPERATOR","->",175],["T_STRING","connection",175],["T_OBJECT_OPERATOR","->",175],["T_STRING","expects",175],"(",["T_VARIABLE","$this",175],["T_OBJECT_OPERATOR","->",175],["T_STRING","never",175],"(",")",")",["T_OBJECT_OPERATOR","->",175],["T_STRING","method",175],"(",["T_CONSTANT_ENCAPSED_STRING","'dropTable'",175],")",["T_OBJECT_OPERATOR","->",175],["T_STRING","with",175],"(",["T_CONSTANT_ENCAPSED_STRING","'catalogsearch_fulltext_scope1'",175],",",["T_WHITESPACE"," ",175],["T_STRING","null",175],")",";",["T_WHITESPACE","\n        ",175],["T_VARIABLE","$this",176],["T_OBJECT_OPERATOR","->",176],["T_STRING","connection",176],["T_OBJECT_OPERATOR","->",176],["T_STRING","expects",176],"(",["T_VARIABLE","$this",176],["T_OBJECT_OPERATOR","->",176],["T_STRING","once",176],"(",")",")",["T_WHITESPACE","\n            ",176],["T_OBJECT_OPERATOR","->",177],["T_STRING","method",177],"(",["T_CONSTANT_ENCAPSED_STRING","'renameTable'",177],")",["T_WHITESPACE","\n            ",177],["T_OBJECT_OPERATOR","->",178],["T_STRING","with",178],"(",["T_CONSTANT_ENCAPSED_STRING","'catalogsearch_fulltext_scope1_tmp1'",178],",",["T_WHITESPACE"," ",178],["T_CONSTANT_ENCAPSED_STRING","'catalogsearch_fulltext_scope1'",178],")",";",["T_WHITESPACE","\n\n        ",178],["T_VARIABLE","$this",180],["T_OBJECT_OPERATOR","->",180],["T_STRING","indexSwitcher",180],["T_OBJECT_OPERATOR","->",180],["T_STRING","switchIndex",180],"(",["T_VARIABLE","$dimensions",180],")",";",["T_WHITESPACE","\n    ",180],"}",["T_WHITESPACE","\n\n    ",181],["T_DOC_COMMENT","\/**\n     * @expectedException \\Magento\\CatalogSearch\\Model\\Indexer\\Scope\\IndexTableNotExistException\n     * @expectedExceptionMessage Temporary table for index catalogsearch_fulltext doesn't exist\n     *\/",183],["T_WHITESPACE","\n    ",186],["T_PUBLIC","public",187],["T_WHITESPACE"," ",187],["T_FUNCTION","function",187],["T_WHITESPACE"," ",187],["T_STRING","testSwitchWhenTemporaryIndexNotExist",187],"(",")",["T_WHITESPACE","\n    ",187],"{",["T_WHITESPACE","\n        ",188],["T_VARIABLE","$dimensions",189],["T_WHITESPACE"," ",189],"=",["T_WHITESPACE"," ",189],"[",["T_VARIABLE","$this",189],["T_OBJECT_OPERATOR","->",189],["T_STRING","getMockBuilder",189],"(",["T_STRING","Dimension",189],["T_DOUBLE_COLON","::",189],["T_CLASS","class",189],")",["T_OBJECT_OPERATOR","->",189],["T_STRING","setConstructorArgs",189],"(","[",["T_CONSTANT_ENCAPSED_STRING","'scope'",189],",",["T_WHITESPACE"," ",189],["T_CONSTANT_ENCAPSED_STRING","'1'",189],"]",")","]",";",["T_WHITESPACE","\n\n        ",189],["T_VARIABLE","$this",191],["T_OBJECT_OPERATOR","->",191],["T_STRING","scopeState",191],["T_OBJECT_OPERATOR","->",191],["T_STRING","expects",191],"(",["T_VARIABLE","$this",191],["T_OBJECT_OPERATOR","->",191],["T_STRING","once",191],"(",")",")",["T_WHITESPACE","\n            ",191],["T_OBJECT_OPERATOR","->",192],["T_STRING","method",192],"(",["T_CONSTANT_ENCAPSED_STRING","'getState'",192],")",["T_WHITESPACE","\n            ",192],["T_OBJECT_OPERATOR","->",193],["T_STRING","willReturn",193],"(",["T_STRING","State",193],["T_DOUBLE_COLON","::",193],["T_STRING","USE_TEMPORARY_INDEX",193],")",";",["T_WHITESPACE","\n\n        ",193],["T_VARIABLE","$this",195],["T_OBJECT_OPERATOR","->",195],["T_STRING","scopeState",195],["T_OBJECT_OPERATOR","->",195],["T_STRING","expects",195],"(",["T_VARIABLE","$this",195],["T_OBJECT_OPERATOR","->",195],["T_STRING","never",195],"(",")",")",["T_OBJECT_OPERATOR","->",195],["T_STRING","method",195],"(",["T_CONSTANT_ENCAPSED_STRING","'useRegularIndex'",195],")",";",["T_WHITESPACE","\n        ",195],["T_VARIABLE","$this",196],["T_OBJECT_OPERATOR","->",196],["T_STRING","scopeState",196],["T_OBJECT_OPERATOR","->",196],["T_STRING","expects",196],"(",["T_VARIABLE","$this",196],["T_OBJECT_OPERATOR","->",196],["T_STRING","never",196],"(",")",")",["T_OBJECT_OPERATOR","->",196],["T_STRING","method",196],"(",["T_CONSTANT_ENCAPSED_STRING","'useTemporaryIndex'",196],")",";",["T_WHITESPACE","\n\n        ",196],["T_VARIABLE","$this",198],["T_OBJECT_OPERATOR","->",198],["T_STRING","indexScopeResolver",198],["T_OBJECT_OPERATOR","->",198],["T_STRING","expects",198],"(",["T_VARIABLE","$this",198],["T_OBJECT_OPERATOR","->",198],["T_STRING","once",198],"(",")",")",["T_OBJECT_OPERATOR","->",198],["T_STRING","method",198],"(",["T_CONSTANT_ENCAPSED_STRING","'resolve'",198],")",["T_WHITESPACE","\n            ",198],["T_OBJECT_OPERATOR","->",199],["T_STRING","with",199],"(",["T_STRING","FulltextIndexer",199],["T_DOUBLE_COLON","::",199],["T_STRING","INDEXER_ID",199],",",["T_WHITESPACE"," ",199],["T_VARIABLE","$dimensions",199],")",["T_WHITESPACE","\n            ",199],["T_OBJECT_OPERATOR","->",200],["T_STRING","willReturn",200],"(",["T_CONSTANT_ENCAPSED_STRING","'catalogsearch_fulltext_scope1_tmp1'",200],")",";",["T_WHITESPACE","\n\n        ",200],["T_VARIABLE","$this",202],["T_OBJECT_OPERATOR","->",202],["T_STRING","connection",202],["T_OBJECT_OPERATOR","->",202],["T_STRING","expects",202],"(",["T_VARIABLE","$this",202],["T_OBJECT_OPERATOR","->",202],["T_STRING","once",202],"(",")",")",["T_WHITESPACE","\n            ",202],["T_OBJECT_OPERATOR","->",203],["T_STRING","method",203],"(",["T_CONSTANT_ENCAPSED_STRING","'isTableExists'",203],")",["T_WHITESPACE","\n            ",203],["T_OBJECT_OPERATOR","->",204],["T_STRING","with",204],"(",["T_CONSTANT_ENCAPSED_STRING","'catalogsearch_fulltext_scope1_tmp1'",204],",",["T_WHITESPACE"," ",204],["T_STRING","null",204],")",["T_WHITESPACE","\n            ",204],["T_OBJECT_OPERATOR","->",205],["T_STRING","willReturn",205],"(",["T_STRING","false",205],")",";",["T_WHITESPACE","\n\n        ",205],["T_VARIABLE","$this",207],["T_OBJECT_OPERATOR","->",207],["T_STRING","connection",207],["T_OBJECT_OPERATOR","->",207],["T_STRING","expects",207],"(",["T_VARIABLE","$this",207],["T_OBJECT_OPERATOR","->",207],["T_STRING","never",207],"(",")",")",["T_OBJECT_OPERATOR","->",207],["T_STRING","method",207],"(",["T_CONSTANT_ENCAPSED_STRING","'dropTable'",207],")",["T_OBJECT_OPERATOR","->",207],["T_STRING","with",207],"(",["T_CONSTANT_ENCAPSED_STRING","'catalogsearch_fulltext_scope1'",207],",",["T_WHITESPACE"," ",207],["T_STRING","null",207],")",";",["T_WHITESPACE","\n        ",207],["T_VARIABLE","$this",208],["T_OBJECT_OPERATOR","->",208],["T_STRING","connection",208],["T_OBJECT_OPERATOR","->",208],["T_STRING","expects",208],"(",["T_VARIABLE","$this",208],["T_OBJECT_OPERATOR","->",208],["T_STRING","never",208],"(",")",")",["T_OBJECT_OPERATOR","->",208],["T_STRING","method",208],"(",["T_CONSTANT_ENCAPSED_STRING","'renameTable'",208],")",";",["T_WHITESPACE","\n\n        ",208],["T_VARIABLE","$this",210],["T_OBJECT_OPERATOR","->",210],["T_STRING","indexSwitcher",210],["T_OBJECT_OPERATOR","->",210],["T_STRING","switchIndex",210],"(",["T_VARIABLE","$dimensions",210],")",";",["T_WHITESPACE","\n    ",210],"}",["T_WHITESPACE","\n",211],"}",["T_WHITESPACE","\n",212]]
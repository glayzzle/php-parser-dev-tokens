[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Copyright \u00c2\u00a9 2013-2017 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n *\/",2],["T_WHITESPACE","\n",5],["T_NAMESPACE","namespace",6],["T_WHITESPACE"," ",6],["T_STRING","Magento",6],["T_NS_SEPARATOR","\\",6],["T_STRING","CatalogSearch",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Model",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Indexer",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Fulltext",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Action",6],";",["T_WHITESPACE","\n\n",6],["T_USE","use",8],["T_WHITESPACE"," ",8],["T_STRING","Magento",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Framework",8],["T_NS_SEPARATOR","\\",8],["T_STRING","App",8],["T_NS_SEPARATOR","\\",8],["T_STRING","ResourceConnection",8],";",["T_WHITESPACE","\n",8],["T_USE","use",9],["T_WHITESPACE"," ",9],["T_STRING","Magento",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Catalog",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Api",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Data",9],["T_NS_SEPARATOR","\\",9],["T_STRING","ProductInterface",9],";",["T_WHITESPACE","\n\n",9],["T_DOC_COMMENT","\/**\n * @SuppressWarnings(PHPMD.CouplingBetweenObjects)\n *\/",11],["T_WHITESPACE","\n",13],["T_CLASS","class",14],["T_WHITESPACE"," ",14],["T_STRING","DataProvider",14],["T_WHITESPACE","\n",14],"{",["T_WHITESPACE","\n    ",15],["T_DOC_COMMENT","\/**\n     * Searchable attributes cache\n     *\n     * @var \\Magento\\Eav\\Model\\Entity\\Attribute[]\n     *\/",16],["T_WHITESPACE","\n    ",20],["T_PRIVATE","private",21],["T_WHITESPACE"," ",21],["T_VARIABLE","$searchableAttributes",21],";",["T_WHITESPACE","\n\n    ",21],["T_DOC_COMMENT","\/**\n     * Index values separator\n     *\n     * @var string\n     *\/",23],["T_WHITESPACE","\n    ",27],["T_PRIVATE","private",28],["T_WHITESPACE"," ",28],["T_VARIABLE","$separator",28],["T_WHITESPACE"," ",28],"=",["T_WHITESPACE"," ",28],["T_CONSTANT_ENCAPSED_STRING","' | '",28],";",["T_WHITESPACE","\n\n    ",28],["T_DOC_COMMENT","\/**\n     * Product Type Instances cache\n     *\n     * @var array\n     *\/",30],["T_WHITESPACE","\n    ",34],["T_PRIVATE","private",35],["T_WHITESPACE"," ",35],["T_VARIABLE","$productTypes",35],["T_WHITESPACE"," ",35],"=",["T_WHITESPACE"," ",35],"[","]",";",["T_WHITESPACE","\n\n    ",35],["T_DOC_COMMENT","\/**\n     * Product Emulators cache\n     *\n     * @var array\n     *\/",37],["T_WHITESPACE","\n    ",41],["T_PRIVATE","private",42],["T_WHITESPACE"," ",42],["T_VARIABLE","$productEmulators",42],["T_WHITESPACE"," ",42],"=",["T_WHITESPACE"," ",42],"[","]",";",["T_WHITESPACE","\n\n    ",42],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Catalog\\Model\\ResourceModel\\Product\\Attribute\\CollectionFactory\n     *\/",44],["T_WHITESPACE","\n    ",46],["T_PRIVATE","private",47],["T_WHITESPACE"," ",47],["T_VARIABLE","$productAttributeCollectionFactory",47],";",["T_WHITESPACE","\n\n    ",47],["T_DOC_COMMENT","\/**\n     * Eav config\n     *\n     * @var \\Magento\\Eav\\Model\\Config\n     *\/",49],["T_WHITESPACE","\n    ",53],["T_PRIVATE","private",54],["T_WHITESPACE"," ",54],["T_VARIABLE","$eavConfig",54],";",["T_WHITESPACE","\n\n    ",54],["T_DOC_COMMENT","\/**\n     * Catalog product type\n     *\n     * @var \\Magento\\Catalog\\Model\\Product\\Type\n     *\/",56],["T_WHITESPACE","\n    ",60],["T_PRIVATE","private",61],["T_WHITESPACE"," ",61],["T_VARIABLE","$catalogProductType",61],";",["T_WHITESPACE","\n\n    ",61],["T_DOC_COMMENT","\/**\n     * Core event manager proxy\n     *\n     * @var \\Magento\\Framework\\Event\\ManagerInterface\n     *\/",63],["T_WHITESPACE","\n    ",67],["T_PRIVATE","private",68],["T_WHITESPACE"," ",68],["T_VARIABLE","$eventManager",68],";",["T_WHITESPACE","\n\n    ",68],["T_DOC_COMMENT","\/**\n     * Store manager\n     *\n     * @var \\Magento\\Store\\Model\\StoreManagerInterface\n     *\/",70],["T_WHITESPACE","\n    ",74],["T_PRIVATE","private",75],["T_WHITESPACE"," ",75],["T_VARIABLE","$storeManager",75],";",["T_WHITESPACE","\n\n    ",75],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\CatalogSearch\\Model\\ResourceModel\\Engine\n     *\/",77],["T_WHITESPACE","\n    ",79],["T_PRIVATE","private",80],["T_WHITESPACE"," ",80],["T_VARIABLE","$engine",80],";",["T_WHITESPACE","\n\n    ",80],["T_DOC_COMMENT","\/**\n     * @var Resource\n     *\/",82],["T_WHITESPACE","\n    ",84],["T_PRIVATE","private",85],["T_WHITESPACE"," ",85],["T_VARIABLE","$resource",85],";",["T_WHITESPACE","\n\n    ",85],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Framework\\DB\\Adapter\\AdapterInterface\n     *\/",87],["T_WHITESPACE","\n    ",89],["T_PRIVATE","private",90],["T_WHITESPACE"," ",90],["T_VARIABLE","$connection",90],";",["T_WHITESPACE","\n\n    ",90],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Framework\\EntityManager\\EntityMetadata\n     *\/",92],["T_WHITESPACE","\n    ",94],["T_PRIVATE","private",95],["T_WHITESPACE"," ",95],["T_VARIABLE","$metadata",95],";",["T_WHITESPACE","\n\n    ",95],["T_DOC_COMMENT","\/**\n     * @param ResourceConnection $resource\n     * @param \\Magento\\Catalog\\Model\\Product\\Type $catalogProductType\n     * @param \\Magento\\Eav\\Model\\Config $eavConfig\n     * @param \\Magento\\Catalog\\Model\\ResourceModel\\Product\\Attribute\\CollectionFactory $prodAttributeCollectionFactory\n     * @param \\Magento\\CatalogSearch\\Model\\ResourceModel\\EngineProvider $engineProvider\n     * @param \\Magento\\Framework\\Event\\ManagerInterface $eventManager\n     * @param \\Magento\\Store\\Model\\StoreManagerInterface $storeManager\n     * @param \\Magento\\Framework\\EntityManager\\MetadataPool $metadataPool\n     *\/",97],["T_WHITESPACE","\n    ",106],["T_PUBLIC","public",107],["T_WHITESPACE"," ",107],["T_FUNCTION","function",107],["T_WHITESPACE"," ",107],["T_STRING","__construct",107],"(",["T_WHITESPACE","\n        ",107],["T_STRING","ResourceConnection",108],["T_WHITESPACE"," ",108],["T_VARIABLE","$resource",108],",",["T_WHITESPACE","\n        ",108],["T_NS_SEPARATOR","\\",109],["T_STRING","Magento",109],["T_NS_SEPARATOR","\\",109],["T_STRING","Catalog",109],["T_NS_SEPARATOR","\\",109],["T_STRING","Model",109],["T_NS_SEPARATOR","\\",109],["T_STRING","Product",109],["T_NS_SEPARATOR","\\",109],["T_STRING","Type",109],["T_WHITESPACE"," ",109],["T_VARIABLE","$catalogProductType",109],",",["T_WHITESPACE","\n        ",109],["T_NS_SEPARATOR","\\",110],["T_STRING","Magento",110],["T_NS_SEPARATOR","\\",110],["T_STRING","Eav",110],["T_NS_SEPARATOR","\\",110],["T_STRING","Model",110],["T_NS_SEPARATOR","\\",110],["T_STRING","Config",110],["T_WHITESPACE"," ",110],["T_VARIABLE","$eavConfig",110],",",["T_WHITESPACE","\n        ",110],["T_NS_SEPARATOR","\\",111],["T_STRING","Magento",111],["T_NS_SEPARATOR","\\",111],["T_STRING","Catalog",111],["T_NS_SEPARATOR","\\",111],["T_STRING","Model",111],["T_NS_SEPARATOR","\\",111],["T_STRING","ResourceModel",111],["T_NS_SEPARATOR","\\",111],["T_STRING","Product",111],["T_NS_SEPARATOR","\\",111],["T_STRING","Attribute",111],["T_NS_SEPARATOR","\\",111],["T_STRING","CollectionFactory",111],["T_WHITESPACE"," ",111],["T_VARIABLE","$prodAttributeCollectionFactory",111],",",["T_WHITESPACE","\n        ",111],["T_NS_SEPARATOR","\\",112],["T_STRING","Magento",112],["T_NS_SEPARATOR","\\",112],["T_STRING","CatalogSearch",112],["T_NS_SEPARATOR","\\",112],["T_STRING","Model",112],["T_NS_SEPARATOR","\\",112],["T_STRING","ResourceModel",112],["T_NS_SEPARATOR","\\",112],["T_STRING","EngineProvider",112],["T_WHITESPACE"," ",112],["T_VARIABLE","$engineProvider",112],",",["T_WHITESPACE","\n        ",112],["T_NS_SEPARATOR","\\",113],["T_STRING","Magento",113],["T_NS_SEPARATOR","\\",113],["T_STRING","Framework",113],["T_NS_SEPARATOR","\\",113],["T_STRING","Event",113],["T_NS_SEPARATOR","\\",113],["T_STRING","ManagerInterface",113],["T_WHITESPACE"," ",113],["T_VARIABLE","$eventManager",113],",",["T_WHITESPACE","\n        ",113],["T_NS_SEPARATOR","\\",114],["T_STRING","Magento",114],["T_NS_SEPARATOR","\\",114],["T_STRING","Store",114],["T_NS_SEPARATOR","\\",114],["T_STRING","Model",114],["T_NS_SEPARATOR","\\",114],["T_STRING","StoreManagerInterface",114],["T_WHITESPACE"," ",114],["T_VARIABLE","$storeManager",114],",",["T_WHITESPACE","\n        ",114],["T_NS_SEPARATOR","\\",115],["T_STRING","Magento",115],["T_NS_SEPARATOR","\\",115],["T_STRING","Framework",115],["T_NS_SEPARATOR","\\",115],["T_STRING","EntityManager",115],["T_NS_SEPARATOR","\\",115],["T_STRING","MetadataPool",115],["T_WHITESPACE"," ",115],["T_VARIABLE","$metadataPool",115],["T_WHITESPACE","\n    ",115],")",["T_WHITESPACE"," ",116],"{",["T_WHITESPACE","\n        ",116],["T_VARIABLE","$this",117],["T_OBJECT_OPERATOR","->",117],["T_STRING","resource",117],["T_WHITESPACE"," ",117],"=",["T_WHITESPACE"," ",117],["T_VARIABLE","$resource",117],";",["T_WHITESPACE","\n        ",117],["T_VARIABLE","$this",118],["T_OBJECT_OPERATOR","->",118],["T_STRING","connection",118],["T_WHITESPACE"," ",118],"=",["T_WHITESPACE"," ",118],["T_VARIABLE","$resource",118],["T_OBJECT_OPERATOR","->",118],["T_STRING","getConnection",118],"(",")",";",["T_WHITESPACE","\n        ",118],["T_VARIABLE","$this",119],["T_OBJECT_OPERATOR","->",119],["T_STRING","catalogProductType",119],["T_WHITESPACE"," ",119],"=",["T_WHITESPACE"," ",119],["T_VARIABLE","$catalogProductType",119],";",["T_WHITESPACE","\n        ",119],["T_VARIABLE","$this",120],["T_OBJECT_OPERATOR","->",120],["T_STRING","eavConfig",120],["T_WHITESPACE"," ",120],"=",["T_WHITESPACE"," ",120],["T_VARIABLE","$eavConfig",120],";",["T_WHITESPACE","\n        ",120],["T_VARIABLE","$this",121],["T_OBJECT_OPERATOR","->",121],["T_STRING","productAttributeCollectionFactory",121],["T_WHITESPACE"," ",121],"=",["T_WHITESPACE"," ",121],["T_VARIABLE","$prodAttributeCollectionFactory",121],";",["T_WHITESPACE","\n        ",121],["T_VARIABLE","$this",122],["T_OBJECT_OPERATOR","->",122],["T_STRING","eventManager",122],["T_WHITESPACE"," ",122],"=",["T_WHITESPACE"," ",122],["T_VARIABLE","$eventManager",122],";",["T_WHITESPACE","\n        ",122],["T_VARIABLE","$this",123],["T_OBJECT_OPERATOR","->",123],["T_STRING","storeManager",123],["T_WHITESPACE"," ",123],"=",["T_WHITESPACE"," ",123],["T_VARIABLE","$storeManager",123],";",["T_WHITESPACE","\n        ",123],["T_VARIABLE","$this",124],["T_OBJECT_OPERATOR","->",124],["T_STRING","engine",124],["T_WHITESPACE"," ",124],"=",["T_WHITESPACE"," ",124],["T_VARIABLE","$engineProvider",124],["T_OBJECT_OPERATOR","->",124],["T_STRING","get",124],"(",")",";",["T_WHITESPACE","\n        ",124],["T_VARIABLE","$this",125],["T_OBJECT_OPERATOR","->",125],["T_STRING","metadata",125],["T_WHITESPACE"," ",125],"=",["T_WHITESPACE"," ",125],["T_VARIABLE","$metadataPool",125],["T_OBJECT_OPERATOR","->",125],["T_STRING","getMetadata",125],"(",["T_STRING","ProductInterface",125],["T_DOUBLE_COLON","::",125],["T_CLASS","class",125],")",";",["T_WHITESPACE","\n    ",125],"}",["T_WHITESPACE","\n\n    ",126],["T_DOC_COMMENT","\/**\n     * Return validated table name\n     *\n     * @param string|string[] $table\n     * @return string\n     *\/",128],["T_WHITESPACE","\n    ",133],["T_PRIVATE","private",134],["T_WHITESPACE"," ",134],["T_FUNCTION","function",134],["T_WHITESPACE"," ",134],["T_STRING","getTable",134],"(",["T_VARIABLE","$table",134],")",["T_WHITESPACE","\n    ",134],"{",["T_WHITESPACE","\n        ",135],["T_RETURN","return",136],["T_WHITESPACE"," ",136],["T_VARIABLE","$this",136],["T_OBJECT_OPERATOR","->",136],["T_STRING","resource",136],["T_OBJECT_OPERATOR","->",136],["T_STRING","getTableName",136],"(",["T_VARIABLE","$table",136],")",";",["T_WHITESPACE","\n    ",136],"}",["T_WHITESPACE","\n\n    ",137],["T_DOC_COMMENT","\/**\n     * Retrieve searchable products per store\n     *\n     * @param int $storeId\n     * @param array $staticFields\n     * @param array|int $productIds\n     * @param int $lastProductId\n     * @param int $limit\n     * @return array\n     *\/",139],["T_WHITESPACE","\n    ",148],["T_PUBLIC","public",149],["T_WHITESPACE"," ",149],["T_FUNCTION","function",149],["T_WHITESPACE"," ",149],["T_STRING","getSearchableProducts",149],"(",["T_WHITESPACE","\n        ",149],["T_VARIABLE","$storeId",150],",",["T_WHITESPACE","\n        ",150],["T_ARRAY","array",151],["T_WHITESPACE"," ",151],["T_VARIABLE","$staticFields",151],",",["T_WHITESPACE","\n        ",151],["T_VARIABLE","$productIds",152],["T_WHITESPACE"," ",152],"=",["T_WHITESPACE"," ",152],["T_STRING","null",152],",",["T_WHITESPACE","\n        ",152],["T_VARIABLE","$lastProductId",153],["T_WHITESPACE"," ",153],"=",["T_WHITESPACE"," ",153],["T_LNUMBER","0",153],",",["T_WHITESPACE","\n        ",153],["T_VARIABLE","$limit",154],["T_WHITESPACE"," ",154],"=",["T_WHITESPACE"," ",154],["T_LNUMBER","100",154],["T_WHITESPACE","\n    ",154],")",["T_WHITESPACE"," ",155],"{",["T_WHITESPACE","\n        ",155],["T_VARIABLE","$websiteId",156],["T_WHITESPACE"," ",156],"=",["T_WHITESPACE"," ",156],["T_VARIABLE","$this",156],["T_OBJECT_OPERATOR","->",156],["T_STRING","storeManager",156],["T_OBJECT_OPERATOR","->",156],["T_STRING","getStore",156],"(",["T_VARIABLE","$storeId",156],")",["T_OBJECT_OPERATOR","->",156],["T_STRING","getWebsiteId",156],"(",")",";",["T_WHITESPACE","\n        ",156],["T_VARIABLE","$select",157],["T_WHITESPACE"," ",157],"=",["T_WHITESPACE"," ",157],["T_VARIABLE","$this",157],["T_OBJECT_OPERATOR","->",157],["T_STRING","connection",157],["T_OBJECT_OPERATOR","->",157],["T_STRING","select",157],"(",")",["T_WHITESPACE","\n            ",157],["T_OBJECT_OPERATOR","->",158],["T_STRING","useStraightJoin",158],"(",["T_STRING","true",158],")",["T_WHITESPACE","\n            ",158],["T_OBJECT_OPERATOR","->",159],["T_STRING","from",159],"(",["T_WHITESPACE","\n                ",159],"[",["T_CONSTANT_ENCAPSED_STRING","'e'",160],["T_WHITESPACE"," ",160],["T_DOUBLE_ARROW","=>",160],["T_WHITESPACE"," ",160],["T_VARIABLE","$this",160],["T_OBJECT_OPERATOR","->",160],["T_STRING","getTable",160],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog_product_entity'",160],")","]",",",["T_WHITESPACE","\n                ",160],["T_STRING","array_merge",161],"(","[",["T_CONSTANT_ENCAPSED_STRING","'entity_id'",161],",",["T_WHITESPACE"," ",161],["T_CONSTANT_ENCAPSED_STRING","'type_id'",161],"]",",",["T_WHITESPACE"," ",161],["T_VARIABLE","$staticFields",161],")",["T_WHITESPACE","\n            ",161],")",["T_WHITESPACE","\n            ",162],["T_OBJECT_OPERATOR","->",163],["T_STRING","join",163],"(",["T_WHITESPACE","\n                ",163],"[",["T_CONSTANT_ENCAPSED_STRING","'website'",164],["T_WHITESPACE"," ",164],["T_DOUBLE_ARROW","=>",164],["T_WHITESPACE"," ",164],["T_VARIABLE","$this",164],["T_OBJECT_OPERATOR","->",164],["T_STRING","getTable",164],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog_product_website'",164],")","]",",",["T_WHITESPACE","\n                ",164],["T_VARIABLE","$this",165],["T_OBJECT_OPERATOR","->",165],["T_STRING","connection",165],["T_OBJECT_OPERATOR","->",165],["T_STRING","quoteInto",165],"(",["T_CONSTANT_ENCAPSED_STRING","'website.product_id = e.entity_id AND website.website_id = ?'",165],",",["T_WHITESPACE"," ",165],["T_VARIABLE","$websiteId",165],")",",",["T_WHITESPACE","\n                ",165],"[","]",["T_WHITESPACE","\n            ",166],")",";",["T_WHITESPACE","\n\n        ",167],["T_IF","if",169],["T_WHITESPACE"," ",169],"(",["T_VARIABLE","$productIds",169],["T_WHITESPACE"," ",169],["T_IS_NOT_IDENTICAL","!==",169],["T_WHITESPACE"," ",169],["T_STRING","null",169],")",["T_WHITESPACE"," ",169],"{",["T_WHITESPACE","\n            ",169],["T_VARIABLE","$select",170],["T_OBJECT_OPERATOR","->",170],["T_STRING","where",170],"(",["T_CONSTANT_ENCAPSED_STRING","'e.entity_id IN (?)'",170],",",["T_WHITESPACE"," ",170],["T_VARIABLE","$productIds",170],")",";",["T_WHITESPACE","\n        ",170],"}",["T_WHITESPACE","\n\n        ",171],["T_VARIABLE","$select",173],["T_OBJECT_OPERATOR","->",173],["T_STRING","where",173],"(",["T_CONSTANT_ENCAPSED_STRING","'e.entity_id > ?'",173],",",["T_WHITESPACE"," ",173],["T_VARIABLE","$lastProductId",173],")",["T_OBJECT_OPERATOR","->",173],["T_STRING","limit",173],"(",["T_VARIABLE","$limit",173],")",["T_OBJECT_OPERATOR","->",173],["T_STRING","order",173],"(",["T_CONSTANT_ENCAPSED_STRING","'e.entity_id'",173],")",";",["T_WHITESPACE","\n\n        ",173],["T_VARIABLE","$result",175],["T_WHITESPACE"," ",175],"=",["T_WHITESPACE"," ",175],["T_VARIABLE","$this",175],["T_OBJECT_OPERATOR","->",175],["T_STRING","connection",175],["T_OBJECT_OPERATOR","->",175],["T_STRING","fetchAll",175],"(",["T_VARIABLE","$select",175],")",";",["T_WHITESPACE","\n\n        ",175],["T_RETURN","return",177],["T_WHITESPACE"," ",177],["T_VARIABLE","$result",177],";",["T_WHITESPACE","\n    ",177],"}",["T_WHITESPACE","\n\n    ",178],["T_DOC_COMMENT","\/**\n     * Retrieve EAV Config Singleton\n     *\n     * @return \\Magento\\Eav\\Model\\Config\n     *\/",180],["T_WHITESPACE","\n    ",184],["T_PRIVATE","private",185],["T_WHITESPACE"," ",185],["T_FUNCTION","function",185],["T_WHITESPACE"," ",185],["T_STRING","getEavConfig",185],"(",")",["T_WHITESPACE","\n    ",185],"{",["T_WHITESPACE","\n        ",186],["T_RETURN","return",187],["T_WHITESPACE"," ",187],["T_VARIABLE","$this",187],["T_OBJECT_OPERATOR","->",187],["T_STRING","eavConfig",187],";",["T_WHITESPACE","\n    ",187],"}",["T_WHITESPACE","\n\n    ",188],["T_DOC_COMMENT","\/**\n     * Retrieve searchable attributes\n     *\n     * @param string $backendType\n     * @return \\Magento\\Eav\\Model\\Entity\\Attribute[]\n     *\/",190],["T_WHITESPACE","\n    ",195],["T_PRIVATE","private",196],["T_WHITESPACE"," ",196],["T_FUNCTION","function",196],["T_WHITESPACE"," ",196],["T_STRING","getSearchableAttributes",196],"(",["T_VARIABLE","$backendType",196],["T_WHITESPACE"," ",196],"=",["T_WHITESPACE"," ",196],["T_STRING","null",196],")",["T_WHITESPACE","\n    ",196],"{",["T_WHITESPACE","\n        ",197],["T_IF","if",198],["T_WHITESPACE"," ",198],"(",["T_STRING","null",198],["T_WHITESPACE"," ",198],["T_IS_IDENTICAL","===",198],["T_WHITESPACE"," ",198],["T_VARIABLE","$this",198],["T_OBJECT_OPERATOR","->",198],["T_STRING","searchableAttributes",198],")",["T_WHITESPACE"," ",198],"{",["T_WHITESPACE","\n            ",198],["T_VARIABLE","$this",199],["T_OBJECT_OPERATOR","->",199],["T_STRING","searchableAttributes",199],["T_WHITESPACE"," ",199],"=",["T_WHITESPACE"," ",199],"[","]",";",["T_WHITESPACE","\n\n            ",199],["T_DOC_COMMENT","\/** @var \\Magento\\Catalog\\Model\\ResourceModel\\Product\\Attribute\\Collection $productAttributes *\/",201],["T_WHITESPACE","\n            ",201],["T_VARIABLE","$productAttributes",202],["T_WHITESPACE"," ",202],"=",["T_WHITESPACE"," ",202],["T_VARIABLE","$this",202],["T_OBJECT_OPERATOR","->",202],["T_STRING","productAttributeCollectionFactory",202],["T_OBJECT_OPERATOR","->",202],["T_STRING","create",202],"(",")",";",["T_WHITESPACE","\n            ",202],["T_VARIABLE","$productAttributes",203],["T_OBJECT_OPERATOR","->",203],["T_STRING","addToIndexFilter",203],"(",["T_STRING","true",203],")",";",["T_WHITESPACE","\n\n            ",203],["T_DOC_COMMENT","\/** @var \\Magento\\Eav\\Model\\Entity\\Attribute[] $attributes *\/",205],["T_WHITESPACE","\n            ",205],["T_VARIABLE","$attributes",206],["T_WHITESPACE"," ",206],"=",["T_WHITESPACE"," ",206],["T_VARIABLE","$productAttributes",206],["T_OBJECT_OPERATOR","->",206],["T_STRING","getItems",206],"(",")",";",["T_WHITESPACE","\n\n            ",206],["T_VARIABLE","$this",208],["T_OBJECT_OPERATOR","->",208],["T_STRING","eventManager",208],["T_OBJECT_OPERATOR","->",208],["T_STRING","dispatch",208],"(",["T_WHITESPACE","\n                ",208],["T_CONSTANT_ENCAPSED_STRING","'catelogsearch_searchable_attributes_load_after'",209],",",["T_WHITESPACE","\n                ",209],"[",["T_CONSTANT_ENCAPSED_STRING","'engine'",210],["T_WHITESPACE"," ",210],["T_DOUBLE_ARROW","=>",210],["T_WHITESPACE"," ",210],["T_VARIABLE","$this",210],["T_OBJECT_OPERATOR","->",210],["T_STRING","engine",210],",",["T_WHITESPACE"," ",210],["T_CONSTANT_ENCAPSED_STRING","'attributes'",210],["T_WHITESPACE"," ",210],["T_DOUBLE_ARROW","=>",210],["T_WHITESPACE"," ",210],["T_VARIABLE","$attributes",210],"]",["T_WHITESPACE","\n            ",210],")",";",["T_WHITESPACE","\n\n            ",211],["T_VARIABLE","$entity",213],["T_WHITESPACE"," ",213],"=",["T_WHITESPACE"," ",213],["T_VARIABLE","$this",213],["T_OBJECT_OPERATOR","->",213],["T_STRING","getEavConfig",213],"(",")",["T_OBJECT_OPERATOR","->",213],["T_STRING","getEntityType",213],"(",["T_NS_SEPARATOR","\\",213],["T_STRING","Magento",213],["T_NS_SEPARATOR","\\",213],["T_STRING","Catalog",213],["T_NS_SEPARATOR","\\",213],["T_STRING","Model",213],["T_NS_SEPARATOR","\\",213],["T_STRING","Product",213],["T_DOUBLE_COLON","::",213],["T_STRING","ENTITY",213],")",["T_OBJECT_OPERATOR","->",213],["T_STRING","getEntity",213],"(",")",";",["T_WHITESPACE","\n\n            ",213],["T_FOREACH","foreach",215],["T_WHITESPACE"," ",215],"(",["T_VARIABLE","$attributes",215],["T_WHITESPACE"," ",215],["T_AS","as",215],["T_WHITESPACE"," ",215],["T_VARIABLE","$attribute",215],")",["T_WHITESPACE"," ",215],"{",["T_WHITESPACE","\n                ",215],["T_VARIABLE","$attribute",216],["T_OBJECT_OPERATOR","->",216],["T_STRING","setEntity",216],"(",["T_VARIABLE","$entity",216],")",";",["T_WHITESPACE","\n            ",216],"}",["T_WHITESPACE","\n\n            ",217],["T_VARIABLE","$this",219],["T_OBJECT_OPERATOR","->",219],["T_STRING","searchableAttributes",219],["T_WHITESPACE"," ",219],"=",["T_WHITESPACE"," ",219],["T_VARIABLE","$attributes",219],";",["T_WHITESPACE","\n        ",219],"}",["T_WHITESPACE","\n\n        ",220],["T_IF","if",222],["T_WHITESPACE"," ",222],"(",["T_VARIABLE","$backendType",222],["T_WHITESPACE"," ",222],["T_IS_NOT_IDENTICAL","!==",222],["T_WHITESPACE"," ",222],["T_STRING","null",222],")",["T_WHITESPACE"," ",222],"{",["T_WHITESPACE","\n            ",222],["T_VARIABLE","$attributes",223],["T_WHITESPACE"," ",223],"=",["T_WHITESPACE"," ",223],"[","]",";",["T_WHITESPACE","\n            ",223],["T_FOREACH","foreach",224],["T_WHITESPACE"," ",224],"(",["T_VARIABLE","$this",224],["T_OBJECT_OPERATOR","->",224],["T_STRING","searchableAttributes",224],["T_WHITESPACE"," ",224],["T_AS","as",224],["T_WHITESPACE"," ",224],["T_VARIABLE","$attributeId",224],["T_WHITESPACE"," ",224],["T_DOUBLE_ARROW","=>",224],["T_WHITESPACE"," ",224],["T_VARIABLE","$attribute",224],")",["T_WHITESPACE"," ",224],"{",["T_WHITESPACE","\n                ",224],["T_IF","if",225],["T_WHITESPACE"," ",225],"(",["T_VARIABLE","$attribute",225],["T_OBJECT_OPERATOR","->",225],["T_STRING","getBackendType",225],"(",")",["T_WHITESPACE"," ",225],["T_IS_EQUAL","==",225],["T_WHITESPACE"," ",225],["T_VARIABLE","$backendType",225],")",["T_WHITESPACE"," ",225],"{",["T_WHITESPACE","\n                    ",225],["T_VARIABLE","$attributes",226],"[",["T_VARIABLE","$attributeId",226],"]",["T_WHITESPACE"," ",226],"=",["T_WHITESPACE"," ",226],["T_VARIABLE","$attribute",226],";",["T_WHITESPACE","\n                ",226],"}",["T_WHITESPACE","\n            ",227],"}",["T_WHITESPACE","\n\n            ",228],["T_RETURN","return",230],["T_WHITESPACE"," ",230],["T_VARIABLE","$attributes",230],";",["T_WHITESPACE","\n        ",230],"}",["T_WHITESPACE","\n\n        ",231],["T_RETURN","return",233],["T_WHITESPACE"," ",233],["T_VARIABLE","$this",233],["T_OBJECT_OPERATOR","->",233],["T_STRING","searchableAttributes",233],";",["T_WHITESPACE","\n    ",233],"}",["T_WHITESPACE","\n\n    ",234],["T_DOC_COMMENT","\/**\n     * Retrieve searchable attribute by Id or code\n     *\n     * @param int|string $attribute\n     * @return \\Magento\\Eav\\Model\\Entity\\Attribute\n     *\/",236],["T_WHITESPACE","\n    ",241],["T_PRIVATE","private",242],["T_WHITESPACE"," ",242],["T_FUNCTION","function",242],["T_WHITESPACE"," ",242],["T_STRING","getSearchableAttribute",242],"(",["T_VARIABLE","$attribute",242],")",["T_WHITESPACE","\n    ",242],"{",["T_WHITESPACE","\n        ",243],["T_VARIABLE","$attributes",244],["T_WHITESPACE"," ",244],"=",["T_WHITESPACE"," ",244],["T_VARIABLE","$this",244],["T_OBJECT_OPERATOR","->",244],["T_STRING","getSearchableAttributes",244],"(",")",";",["T_WHITESPACE","\n        ",244],["T_IF","if",245],["T_WHITESPACE"," ",245],"(",["T_STRING","is_numeric",245],"(",["T_VARIABLE","$attribute",245],")",")",["T_WHITESPACE"," ",245],"{",["T_WHITESPACE","\n            ",245],["T_IF","if",246],["T_WHITESPACE"," ",246],"(",["T_ISSET","isset",246],"(",["T_VARIABLE","$attributes",246],"[",["T_VARIABLE","$attribute",246],"]",")",")",["T_WHITESPACE"," ",246],"{",["T_WHITESPACE","\n                ",246],["T_RETURN","return",247],["T_WHITESPACE"," ",247],["T_VARIABLE","$attributes",247],"[",["T_VARIABLE","$attribute",247],"]",";",["T_WHITESPACE","\n            ",247],"}",["T_WHITESPACE","\n        ",248],"}",["T_WHITESPACE"," ",249],["T_ELSEIF","elseif",249],["T_WHITESPACE"," ",249],"(",["T_STRING","is_string",249],"(",["T_VARIABLE","$attribute",249],")",")",["T_WHITESPACE"," ",249],"{",["T_WHITESPACE","\n            ",249],["T_FOREACH","foreach",250],["T_WHITESPACE"," ",250],"(",["T_VARIABLE","$attributes",250],["T_WHITESPACE"," ",250],["T_AS","as",250],["T_WHITESPACE"," ",250],["T_VARIABLE","$attributeModel",250],")",["T_WHITESPACE"," ",250],"{",["T_WHITESPACE","\n                ",250],["T_IF","if",251],["T_WHITESPACE"," ",251],"(",["T_VARIABLE","$attributeModel",251],["T_OBJECT_OPERATOR","->",251],["T_STRING","getAttributeCode",251],"(",")",["T_WHITESPACE"," ",251],["T_IS_EQUAL","==",251],["T_WHITESPACE"," ",251],["T_VARIABLE","$attribute",251],")",["T_WHITESPACE"," ",251],"{",["T_WHITESPACE","\n                    ",251],["T_RETURN","return",252],["T_WHITESPACE"," ",252],["T_VARIABLE","$attributeModel",252],";",["T_WHITESPACE","\n                ",252],"}",["T_WHITESPACE","\n            ",253],"}",["T_WHITESPACE","\n        ",254],"}",["T_WHITESPACE","\n\n        ",255],["T_RETURN","return",257],["T_WHITESPACE"," ",257],["T_VARIABLE","$this",257],["T_OBJECT_OPERATOR","->",257],["T_STRING","getEavConfig",257],"(",")",["T_OBJECT_OPERATOR","->",257],["T_STRING","getAttribute",257],"(",["T_NS_SEPARATOR","\\",257],["T_STRING","Magento",257],["T_NS_SEPARATOR","\\",257],["T_STRING","Catalog",257],["T_NS_SEPARATOR","\\",257],["T_STRING","Model",257],["T_NS_SEPARATOR","\\",257],["T_STRING","Product",257],["T_DOUBLE_COLON","::",257],["T_STRING","ENTITY",257],",",["T_WHITESPACE"," ",257],["T_VARIABLE","$attribute",257],")",";",["T_WHITESPACE","\n    ",257],"}",["T_WHITESPACE","\n\n    ",258],["T_DOC_COMMENT","\/**\n     * Returns expression for field unification\n     *\n     * @param string $field\n     * @param string $backendType\n     * @return \\Zend_Db_Expr\n     *\/",260],["T_WHITESPACE","\n    ",266],["T_PRIVATE","private",267],["T_WHITESPACE"," ",267],["T_FUNCTION","function",267],["T_WHITESPACE"," ",267],["T_STRING","unifyField",267],"(",["T_VARIABLE","$field",267],",",["T_WHITESPACE"," ",267],["T_VARIABLE","$backendType",267],["T_WHITESPACE"," ",267],"=",["T_WHITESPACE"," ",267],["T_CONSTANT_ENCAPSED_STRING","'varchar'",267],")",["T_WHITESPACE","\n    ",267],"{",["T_WHITESPACE","\n        ",268],["T_IF","if",269],["T_WHITESPACE"," ",269],"(",["T_VARIABLE","$backendType",269],["T_WHITESPACE"," ",269],["T_IS_EQUAL","==",269],["T_WHITESPACE"," ",269],["T_CONSTANT_ENCAPSED_STRING","'datetime'",269],")",["T_WHITESPACE"," ",269],"{",["T_WHITESPACE","\n            ",269],["T_VARIABLE","$expr",270],["T_WHITESPACE"," ",270],"=",["T_WHITESPACE"," ",270],["T_VARIABLE","$this",270],["T_OBJECT_OPERATOR","->",270],["T_STRING","connection",270],["T_OBJECT_OPERATOR","->",270],["T_STRING","getDateFormatSql",270],"(",["T_VARIABLE","$field",270],",",["T_WHITESPACE"," ",270],["T_CONSTANT_ENCAPSED_STRING","'%Y-%m-%d %H:%i:%s'",270],")",";",["T_WHITESPACE","\n        ",270],"}",["T_WHITESPACE"," ",271],["T_ELSE","else",271],["T_WHITESPACE"," ",271],"{",["T_WHITESPACE","\n            ",271],["T_VARIABLE","$expr",272],["T_WHITESPACE"," ",272],"=",["T_WHITESPACE"," ",272],["T_VARIABLE","$field",272],";",["T_WHITESPACE","\n        ",272],"}",["T_WHITESPACE","\n        ",273],["T_RETURN","return",274],["T_WHITESPACE"," ",274],["T_VARIABLE","$expr",274],";",["T_WHITESPACE","\n    ",274],"}",["T_WHITESPACE","\n\n    ",275],["T_DOC_COMMENT","\/**\n     * Load product(s) attributes\n     *\n     * @param int $storeId\n     * @param array $productIds\n     * @param array $attributeTypes\n     * @return array\n     *\/",277],["T_WHITESPACE","\n    ",284],["T_PUBLIC","public",285],["T_WHITESPACE"," ",285],["T_FUNCTION","function",285],["T_WHITESPACE"," ",285],["T_STRING","getProductAttributes",285],"(",["T_VARIABLE","$storeId",285],",",["T_WHITESPACE"," ",285],["T_ARRAY","array",285],["T_WHITESPACE"," ",285],["T_VARIABLE","$productIds",285],",",["T_WHITESPACE"," ",285],["T_ARRAY","array",285],["T_WHITESPACE"," ",285],["T_VARIABLE","$attributeTypes",285],")",["T_WHITESPACE","\n    ",285],"{",["T_WHITESPACE","\n        ",286],["T_VARIABLE","$result",287],["T_WHITESPACE"," ",287],"=",["T_WHITESPACE"," ",287],"[","]",";",["T_WHITESPACE","\n        ",287],["T_VARIABLE","$selects",288],["T_WHITESPACE"," ",288],"=",["T_WHITESPACE"," ",288],"[","]",";",["T_WHITESPACE","\n        ",288],["T_VARIABLE","$ifStoreValue",289],["T_WHITESPACE"," ",289],"=",["T_WHITESPACE"," ",289],["T_VARIABLE","$this",289],["T_OBJECT_OPERATOR","->",289],["T_STRING","connection",289],["T_OBJECT_OPERATOR","->",289],["T_STRING","getCheckSql",289],"(",["T_CONSTANT_ENCAPSED_STRING","'t_store.value_id > 0'",289],",",["T_WHITESPACE"," ",289],["T_CONSTANT_ENCAPSED_STRING","'t_store.value'",289],",",["T_WHITESPACE"," ",289],["T_CONSTANT_ENCAPSED_STRING","'t_default.value'",289],")",";",["T_WHITESPACE","\n        ",289],["T_VARIABLE","$linkField",290],["T_WHITESPACE"," ",290],"=",["T_WHITESPACE"," ",290],["T_VARIABLE","$this",290],["T_OBJECT_OPERATOR","->",290],["T_STRING","metadata",290],["T_OBJECT_OPERATOR","->",290],["T_STRING","getLinkField",290],"(",")",";",["T_WHITESPACE","\n        ",290],["T_VARIABLE","$productLinkFieldsToEntityIdMap",291],["T_WHITESPACE"," ",291],"=",["T_WHITESPACE"," ",291],["T_VARIABLE","$this",291],["T_OBJECT_OPERATOR","->",291],["T_STRING","connection",291],["T_OBJECT_OPERATOR","->",291],["T_STRING","fetchPairs",291],"(",["T_WHITESPACE","\n            ",291],["T_VARIABLE","$this",292],["T_OBJECT_OPERATOR","->",292],["T_STRING","connection",292],["T_OBJECT_OPERATOR","->",292],["T_STRING","select",292],"(",")",["T_OBJECT_OPERATOR","->",292],["T_STRING","from",292],"(",["T_WHITESPACE","\n                ",292],"[",["T_CONSTANT_ENCAPSED_STRING","'cpe'",293],["T_WHITESPACE"," ",293],["T_DOUBLE_ARROW","=>",293],["T_WHITESPACE"," ",293],["T_VARIABLE","$this",293],["T_OBJECT_OPERATOR","->",293],["T_STRING","getTable",293],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog_product_entity'",293],")","]",",",["T_WHITESPACE","\n                ",293],"[",["T_VARIABLE","$linkField",294],",",["T_WHITESPACE"," ",294],["T_CONSTANT_ENCAPSED_STRING","'entity_id'",294],"]",["T_WHITESPACE","\n            ",294],")",["T_OBJECT_OPERATOR","->",295],["T_STRING","where",295],"(",["T_WHITESPACE","\n                ",295],["T_CONSTANT_ENCAPSED_STRING","'cpe.entity_id IN (?)'",296],",",["T_WHITESPACE","\n                ",296],["T_VARIABLE","$productIds",297],["T_WHITESPACE","\n            ",297],")",["T_WHITESPACE","\n        ",298],")",";",["T_WHITESPACE","\n        ",299],["T_FOREACH","foreach",300],["T_WHITESPACE"," ",300],"(",["T_VARIABLE","$attributeTypes",300],["T_WHITESPACE"," ",300],["T_AS","as",300],["T_WHITESPACE"," ",300],["T_VARIABLE","$backendType",300],["T_WHITESPACE"," ",300],["T_DOUBLE_ARROW","=>",300],["T_WHITESPACE"," ",300],["T_VARIABLE","$attributeIds",300],")",["T_WHITESPACE"," ",300],"{",["T_WHITESPACE","\n            ",300],["T_IF","if",301],["T_WHITESPACE"," ",301],"(",["T_VARIABLE","$attributeIds",301],")",["T_WHITESPACE"," ",301],"{",["T_WHITESPACE","\n                ",301],["T_VARIABLE","$tableName",302],["T_WHITESPACE"," ",302],"=",["T_WHITESPACE"," ",302],["T_VARIABLE","$this",302],["T_OBJECT_OPERATOR","->",302],["T_STRING","getTable",302],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog_product_entity_'",302],["T_WHITESPACE"," ",302],".",["T_WHITESPACE"," ",302],["T_VARIABLE","$backendType",302],")",";",["T_WHITESPACE","\n                ",302],["T_VARIABLE","$selects",303],"[","]",["T_WHITESPACE"," ",303],"=",["T_WHITESPACE"," ",303],["T_VARIABLE","$this",303],["T_OBJECT_OPERATOR","->",303],["T_STRING","connection",303],["T_OBJECT_OPERATOR","->",303],["T_STRING","select",303],"(",")",["T_OBJECT_OPERATOR","->",303],["T_STRING","from",303],"(",["T_WHITESPACE","\n                    ",303],"[",["T_CONSTANT_ENCAPSED_STRING","'t_default'",304],["T_WHITESPACE"," ",304],["T_DOUBLE_ARROW","=>",304],["T_WHITESPACE"," ",304],["T_VARIABLE","$tableName",304],"]",",",["T_WHITESPACE","\n                    ",304],"[",["T_VARIABLE","$linkField",305],",",["T_WHITESPACE"," ",305],["T_CONSTANT_ENCAPSED_STRING","'attribute_id'",305],"]",["T_WHITESPACE","\n                ",305],")",["T_OBJECT_OPERATOR","->",306],["T_STRING","joinLeft",306],"(",["T_WHITESPACE","\n                    ",306],"[",["T_CONSTANT_ENCAPSED_STRING","'t_store'",307],["T_WHITESPACE"," ",307],["T_DOUBLE_ARROW","=>",307],["T_WHITESPACE"," ",307],["T_VARIABLE","$tableName",307],"]",",",["T_WHITESPACE","\n                    ",307],["T_VARIABLE","$this",308],["T_OBJECT_OPERATOR","->",308],["T_STRING","connection",308],["T_OBJECT_OPERATOR","->",308],["T_STRING","quoteInto",308],"(",["T_WHITESPACE","\n                        ",308],["T_CONSTANT_ENCAPSED_STRING","'t_default.'",309],["T_WHITESPACE"," ",309],".",["T_WHITESPACE"," ",309],["T_VARIABLE","$linkField",309],["T_WHITESPACE"," ",309],".",["T_WHITESPACE"," ",309],["T_CONSTANT_ENCAPSED_STRING","'=t_store.'",309],["T_WHITESPACE"," ",309],".",["T_WHITESPACE"," ",309],["T_VARIABLE","$linkField",309],["T_WHITESPACE"," ",309],".",["T_WHITESPACE","\n                        ",309],["T_CONSTANT_ENCAPSED_STRING","' AND t_default.attribute_id=t_store.attribute_id'",310],["T_WHITESPACE"," ",310],".",["T_WHITESPACE","\n                        ",310],["T_CONSTANT_ENCAPSED_STRING","' AND t_store.store_id = ?'",311],",",["T_WHITESPACE","\n                        ",311],["T_VARIABLE","$storeId",312],["T_WHITESPACE","\n                    ",312],")",",",["T_WHITESPACE","\n                    ",313],"[",["T_CONSTANT_ENCAPSED_STRING","'value'",314],["T_WHITESPACE"," ",314],["T_DOUBLE_ARROW","=>",314],["T_WHITESPACE"," ",314],["T_VARIABLE","$this",314],["T_OBJECT_OPERATOR","->",314],["T_STRING","unifyField",314],"(",["T_VARIABLE","$ifStoreValue",314],",",["T_WHITESPACE"," ",314],["T_VARIABLE","$backendType",314],")","]",["T_WHITESPACE","\n                ",314],")",["T_OBJECT_OPERATOR","->",315],["T_STRING","where",315],"(",["T_WHITESPACE","\n                    ",315],["T_CONSTANT_ENCAPSED_STRING","'t_default.store_id = ?'",316],",",["T_WHITESPACE","\n                    ",316],["T_LNUMBER","0",317],["T_WHITESPACE","\n                ",317],")",["T_OBJECT_OPERATOR","->",318],["T_STRING","where",318],"(",["T_WHITESPACE","\n                    ",318],["T_CONSTANT_ENCAPSED_STRING","'t_default.attribute_id IN (?)'",319],",",["T_WHITESPACE","\n                    ",319],["T_VARIABLE","$attributeIds",320],["T_WHITESPACE","\n                ",320],")",["T_OBJECT_OPERATOR","->",321],["T_STRING","where",321],"(",["T_WHITESPACE","\n                    ",321],["T_CONSTANT_ENCAPSED_STRING","'t_default.'",322],["T_WHITESPACE"," ",322],".",["T_WHITESPACE"," ",322],["T_VARIABLE","$linkField",322],["T_WHITESPACE"," ",322],".",["T_WHITESPACE"," ",322],["T_CONSTANT_ENCAPSED_STRING","' IN (?)'",322],",",["T_WHITESPACE","\n                    ",322],["T_STRING","array_keys",323],"(",["T_VARIABLE","$productLinkFieldsToEntityIdMap",323],")",["T_WHITESPACE","\n                ",323],")",";",["T_WHITESPACE","\n            ",324],"}",["T_WHITESPACE","\n        ",325],"}",["T_WHITESPACE","\n\n        ",326],["T_IF","if",328],["T_WHITESPACE"," ",328],"(",["T_VARIABLE","$selects",328],")",["T_WHITESPACE"," ",328],"{",["T_WHITESPACE","\n            ",328],["T_VARIABLE","$select",329],["T_WHITESPACE"," ",329],"=",["T_WHITESPACE"," ",329],["T_VARIABLE","$this",329],["T_OBJECT_OPERATOR","->",329],["T_STRING","connection",329],["T_OBJECT_OPERATOR","->",329],["T_STRING","select",329],"(",")",["T_OBJECT_OPERATOR","->",329],["T_STRING","union",329],"(",["T_VARIABLE","$selects",329],",",["T_WHITESPACE"," ",329],["T_NS_SEPARATOR","\\",329],["T_STRING","Magento",329],["T_NS_SEPARATOR","\\",329],["T_STRING","Framework",329],["T_NS_SEPARATOR","\\",329],["T_STRING","DB",329],["T_NS_SEPARATOR","\\",329],["T_STRING","Select",329],["T_DOUBLE_COLON","::",329],["T_STRING","SQL_UNION_ALL",329],")",";",["T_WHITESPACE","\n            ",329],["T_VARIABLE","$query",330],["T_WHITESPACE"," ",330],"=",["T_WHITESPACE"," ",330],["T_VARIABLE","$this",330],["T_OBJECT_OPERATOR","->",330],["T_STRING","connection",330],["T_OBJECT_OPERATOR","->",330],["T_STRING","query",330],"(",["T_VARIABLE","$select",330],")",";",["T_WHITESPACE","\n            ",330],["T_WHILE","while",331],["T_WHITESPACE"," ",331],"(",["T_VARIABLE","$row",331],["T_WHITESPACE"," ",331],"=",["T_WHITESPACE"," ",331],["T_VARIABLE","$query",331],["T_OBJECT_OPERATOR","->",331],["T_STRING","fetch",331],"(",")",")",["T_WHITESPACE"," ",331],"{",["T_WHITESPACE","\n                ",331],["T_VARIABLE","$entityId",332],["T_WHITESPACE"," ",332],"=",["T_WHITESPACE"," ",332],["T_VARIABLE","$productLinkFieldsToEntityIdMap",332],"[",["T_VARIABLE","$row",332],"[",["T_VARIABLE","$linkField",332],"]","]",";",["T_WHITESPACE","\n                ",332],["T_VARIABLE","$result",333],"[",["T_VARIABLE","$entityId",333],"]","[",["T_VARIABLE","$row",333],"[",["T_CONSTANT_ENCAPSED_STRING","'attribute_id'",333],"]","]",["T_WHITESPACE"," ",333],"=",["T_WHITESPACE"," ",333],["T_VARIABLE","$row",333],"[",["T_CONSTANT_ENCAPSED_STRING","'value'",333],"]",";",["T_WHITESPACE","\n            ",333],"}",["T_WHITESPACE","\n        ",334],"}",["T_WHITESPACE","\n\n        ",335],["T_RETURN","return",337],["T_WHITESPACE"," ",337],["T_VARIABLE","$result",337],";",["T_WHITESPACE","\n    ",337],"}",["T_WHITESPACE","\n\n    ",338],["T_DOC_COMMENT","\/**\n     * Retrieve Product Type Instance\n     *\n     * @param string $typeId\n     * @return \\Magento\\Catalog\\Model\\Product\\Type\\AbstractType\n     *\/",340],["T_WHITESPACE","\n    ",345],["T_PRIVATE","private",346],["T_WHITESPACE"," ",346],["T_FUNCTION","function",346],["T_WHITESPACE"," ",346],["T_STRING","getProductTypeInstance",346],"(",["T_VARIABLE","$typeId",346],")",["T_WHITESPACE","\n    ",346],"{",["T_WHITESPACE","\n        ",347],["T_IF","if",348],["T_WHITESPACE"," ",348],"(","!",["T_ISSET","isset",348],"(",["T_VARIABLE","$this",348],["T_OBJECT_OPERATOR","->",348],["T_STRING","productTypes",348],"[",["T_VARIABLE","$typeId",348],"]",")",")",["T_WHITESPACE"," ",348],"{",["T_WHITESPACE","\n            ",348],["T_VARIABLE","$productEmulator",349],["T_WHITESPACE"," ",349],"=",["T_WHITESPACE"," ",349],["T_VARIABLE","$this",349],["T_OBJECT_OPERATOR","->",349],["T_STRING","getProductEmulator",349],"(",["T_VARIABLE","$typeId",349],")",";",["T_WHITESPACE","\n\n            ",349],["T_VARIABLE","$this",351],["T_OBJECT_OPERATOR","->",351],["T_STRING","productTypes",351],"[",["T_VARIABLE","$typeId",351],"]",["T_WHITESPACE"," ",351],"=",["T_WHITESPACE"," ",351],["T_VARIABLE","$this",351],["T_OBJECT_OPERATOR","->",351],["T_STRING","catalogProductType",351],["T_OBJECT_OPERATOR","->",351],["T_STRING","factory",351],"(",["T_VARIABLE","$productEmulator",351],")",";",["T_WHITESPACE","\n        ",351],"}",["T_WHITESPACE","\n        ",352],["T_RETURN","return",353],["T_WHITESPACE"," ",353],["T_VARIABLE","$this",353],["T_OBJECT_OPERATOR","->",353],["T_STRING","productTypes",353],"[",["T_VARIABLE","$typeId",353],"]",";",["T_WHITESPACE","\n    ",353],"}",["T_WHITESPACE","\n\n    ",354],["T_DOC_COMMENT","\/**\n     * Return all product children ids\n     *\n     * @param int $productId Product Entity Id\n     * @param string $typeId Super Product Link Type\n     * @return array|null\n     *\/",356],["T_WHITESPACE","\n    ",362],["T_PUBLIC","public",363],["T_WHITESPACE"," ",363],["T_FUNCTION","function",363],["T_WHITESPACE"," ",363],["T_STRING","getProductChildIds",363],"(",["T_VARIABLE","$productId",363],",",["T_WHITESPACE"," ",363],["T_VARIABLE","$typeId",363],")",["T_WHITESPACE","\n    ",363],"{",["T_WHITESPACE","\n        ",364],["T_VARIABLE","$typeInstance",365],["T_WHITESPACE"," ",365],"=",["T_WHITESPACE"," ",365],["T_VARIABLE","$this",365],["T_OBJECT_OPERATOR","->",365],["T_STRING","getProductTypeInstance",365],"(",["T_VARIABLE","$typeId",365],")",";",["T_WHITESPACE","\n        ",365],["T_VARIABLE","$relation",366],["T_WHITESPACE"," ",366],"=",["T_WHITESPACE"," ",366],["T_VARIABLE","$typeInstance",366],["T_OBJECT_OPERATOR","->",366],["T_STRING","isComposite",366],"(",["T_WHITESPACE","\n            ",366],["T_VARIABLE","$this",367],["T_OBJECT_OPERATOR","->",367],["T_STRING","getProductEmulator",367],"(",["T_VARIABLE","$typeId",367],")",["T_WHITESPACE","\n        ",367],")",["T_WHITESPACE"," ",368],"?",["T_WHITESPACE"," ",368],["T_VARIABLE","$typeInstance",368],["T_OBJECT_OPERATOR","->",368],["T_STRING","getRelationInfo",368],"(",")",["T_WHITESPACE"," ",368],":",["T_WHITESPACE"," ",368],["T_STRING","false",368],";",["T_WHITESPACE","\n\n        ",368],["T_IF","if",370],["T_WHITESPACE"," ",370],"(",["T_VARIABLE","$relation",370],["T_WHITESPACE"," ",370],["T_BOOLEAN_AND","&&",370],["T_WHITESPACE"," ",370],["T_VARIABLE","$relation",370],["T_OBJECT_OPERATOR","->",370],["T_STRING","getTable",370],"(",")",["T_WHITESPACE"," ",370],["T_BOOLEAN_AND","&&",370],["T_WHITESPACE"," ",370],["T_VARIABLE","$relation",370],["T_OBJECT_OPERATOR","->",370],["T_STRING","getParentFieldName",370],"(",")",["T_WHITESPACE"," ",370],["T_BOOLEAN_AND","&&",370],["T_WHITESPACE"," ",370],["T_VARIABLE","$relation",370],["T_OBJECT_OPERATOR","->",370],["T_STRING","getChildFieldName",370],"(",")",")",["T_WHITESPACE"," ",370],"{",["T_WHITESPACE","\n            ",370],["T_VARIABLE","$select",371],["T_WHITESPACE"," ",371],"=",["T_WHITESPACE"," ",371],["T_VARIABLE","$this",371],["T_OBJECT_OPERATOR","->",371],["T_STRING","connection",371],["T_OBJECT_OPERATOR","->",371],["T_STRING","select",371],"(",")",["T_OBJECT_OPERATOR","->",371],["T_STRING","from",371],"(",["T_WHITESPACE","\n                ",371],"[",["T_CONSTANT_ENCAPSED_STRING","'main'",372],["T_WHITESPACE"," ",372],["T_DOUBLE_ARROW","=>",372],["T_WHITESPACE"," ",372],["T_VARIABLE","$this",372],["T_OBJECT_OPERATOR","->",372],["T_STRING","getTable",372],"(",["T_VARIABLE","$relation",372],["T_OBJECT_OPERATOR","->",372],["T_STRING","getTable",372],"(",")",")","]",",",["T_WHITESPACE","\n                ",372],"[",["T_VARIABLE","$relation",373],["T_OBJECT_OPERATOR","->",373],["T_STRING","getChildFieldName",373],"(",")","]",["T_WHITESPACE","\n            ",373],")",";",["T_WHITESPACE","\n            ",374],["T_VARIABLE","$select",375],["T_OBJECT_OPERATOR","->",375],["T_STRING","join",375],"(",["T_WHITESPACE","\n                ",375],"[",["T_CONSTANT_ENCAPSED_STRING","'e'",376],["T_WHITESPACE"," ",376],["T_DOUBLE_ARROW","=>",376],["T_WHITESPACE"," ",376],["T_VARIABLE","$this",376],["T_OBJECT_OPERATOR","->",376],["T_STRING","resource",376],["T_OBJECT_OPERATOR","->",376],["T_STRING","getTableName",376],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog_product_entity'",376],")","]",",",["T_WHITESPACE","\n                ",376],["T_CONSTANT_ENCAPSED_STRING","'e.'",377],["T_WHITESPACE"," ",377],".",["T_WHITESPACE"," ",377],["T_VARIABLE","$this",377],["T_OBJECT_OPERATOR","->",377],["T_STRING","metadata",377],["T_OBJECT_OPERATOR","->",377],["T_STRING","getLinkField",377],"(",")",["T_WHITESPACE"," ",377],".",["T_WHITESPACE"," ",377],["T_CONSTANT_ENCAPSED_STRING","' = main.'",377],["T_WHITESPACE"," ",377],".",["T_WHITESPACE"," ",377],["T_VARIABLE","$relation",377],["T_OBJECT_OPERATOR","->",377],["T_STRING","getParentFieldName",377],"(",")",["T_WHITESPACE","\n            ",377],")",["T_OBJECT_OPERATOR","->",378],["T_STRING","where",378],"(",["T_WHITESPACE","\n                ",378],["T_CONSTANT_ENCAPSED_STRING","'e.entity_id = ?'",379],",",["T_WHITESPACE","\n                ",379],["T_VARIABLE","$productId",380],["T_WHITESPACE","\n            ",380],")",";",["T_WHITESPACE","\n\n            ",381],["T_IF","if",383],["T_WHITESPACE"," ",383],"(",["T_VARIABLE","$relation",383],["T_OBJECT_OPERATOR","->",383],["T_STRING","getWhere",383],"(",")",["T_WHITESPACE"," ",383],["T_IS_NOT_IDENTICAL","!==",383],["T_WHITESPACE"," ",383],["T_STRING","null",383],")",["T_WHITESPACE"," ",383],"{",["T_WHITESPACE","\n                ",383],["T_VARIABLE","$select",384],["T_OBJECT_OPERATOR","->",384],["T_STRING","where",384],"(",["T_VARIABLE","$relation",384],["T_OBJECT_OPERATOR","->",384],["T_STRING","getWhere",384],"(",")",")",";",["T_WHITESPACE","\n            ",384],"}",["T_WHITESPACE","\n            ",385],["T_RETURN","return",386],["T_WHITESPACE"," ",386],["T_VARIABLE","$this",386],["T_OBJECT_OPERATOR","->",386],["T_STRING","connection",386],["T_OBJECT_OPERATOR","->",386],["T_STRING","fetchCol",386],"(",["T_VARIABLE","$select",386],")",";",["T_WHITESPACE","\n        ",386],"}",["T_WHITESPACE","\n\n        ",387],["T_RETURN","return",389],["T_WHITESPACE"," ",389],["T_STRING","null",389],";",["T_WHITESPACE","\n    ",389],"}",["T_WHITESPACE","\n\n    ",390],["T_DOC_COMMENT","\/**\n     * Retrieve Product Emulator (Magento Object)\n     *\n     * @param string $typeId\n     * @return \\Magento\\Framework\\DataObject\n     *\/",392],["T_WHITESPACE","\n    ",397],["T_PRIVATE","private",398],["T_WHITESPACE"," ",398],["T_FUNCTION","function",398],["T_WHITESPACE"," ",398],["T_STRING","getProductEmulator",398],"(",["T_VARIABLE","$typeId",398],")",["T_WHITESPACE","\n    ",398],"{",["T_WHITESPACE","\n        ",399],["T_IF","if",400],["T_WHITESPACE"," ",400],"(","!",["T_ISSET","isset",400],"(",["T_VARIABLE","$this",400],["T_OBJECT_OPERATOR","->",400],["T_STRING","productEmulators",400],"[",["T_VARIABLE","$typeId",400],"]",")",")",["T_WHITESPACE"," ",400],"{",["T_WHITESPACE","\n            ",400],["T_VARIABLE","$productEmulator",401],["T_WHITESPACE"," ",401],"=",["T_WHITESPACE"," ",401],["T_NEW","new",401],["T_WHITESPACE"," ",401],["T_NS_SEPARATOR","\\",401],["T_STRING","Magento",401],["T_NS_SEPARATOR","\\",401],["T_STRING","Framework",401],["T_NS_SEPARATOR","\\",401],["T_STRING","DataObject",401],"(",")",";",["T_WHITESPACE","\n            ",401],["T_VARIABLE","$productEmulator",402],["T_OBJECT_OPERATOR","->",402],["T_STRING","setTypeId",402],"(",["T_VARIABLE","$typeId",402],")",";",["T_WHITESPACE","\n            ",402],["T_VARIABLE","$this",403],["T_OBJECT_OPERATOR","->",403],["T_STRING","productEmulators",403],"[",["T_VARIABLE","$typeId",403],"]",["T_WHITESPACE"," ",403],"=",["T_WHITESPACE"," ",403],["T_VARIABLE","$productEmulator",403],";",["T_WHITESPACE","\n        ",403],"}",["T_WHITESPACE","\n        ",404],["T_RETURN","return",405],["T_WHITESPACE"," ",405],["T_VARIABLE","$this",405],["T_OBJECT_OPERATOR","->",405],["T_STRING","productEmulators",405],"[",["T_VARIABLE","$typeId",405],"]",";",["T_WHITESPACE","\n    ",405],"}",["T_WHITESPACE","\n\n    ",406],["T_DOC_COMMENT","\/**\n     * Prepare Fulltext index value for product\n     *\n     * @param array $indexData\n     * @param array $productData\n     * @param int $storeId\n     * @return string\n     * @SuppressWarnings(PHPMD.CyclomaticComplexity)\n     *\/",408],["T_WHITESPACE","\n    ",416],["T_PUBLIC","public",417],["T_WHITESPACE"," ",417],["T_FUNCTION","function",417],["T_WHITESPACE"," ",417],["T_STRING","prepareProductIndex",417],"(",["T_VARIABLE","$indexData",417],",",["T_WHITESPACE"," ",417],["T_VARIABLE","$productData",417],",",["T_WHITESPACE"," ",417],["T_VARIABLE","$storeId",417],")",["T_WHITESPACE","\n    ",417],"{",["T_WHITESPACE","\n        ",418],["T_VARIABLE","$index",419],["T_WHITESPACE"," ",419],"=",["T_WHITESPACE"," ",419],"[","]",";",["T_WHITESPACE","\n\n        ",419],["T_FOREACH","foreach",421],["T_WHITESPACE"," ",421],"(",["T_VARIABLE","$this",421],["T_OBJECT_OPERATOR","->",421],["T_STRING","getSearchableAttributes",421],"(",["T_CONSTANT_ENCAPSED_STRING","'static'",421],")",["T_WHITESPACE"," ",421],["T_AS","as",421],["T_WHITESPACE"," ",421],["T_VARIABLE","$attribute",421],")",["T_WHITESPACE"," ",421],"{",["T_WHITESPACE","\n            ",421],["T_VARIABLE","$attributeCode",422],["T_WHITESPACE"," ",422],"=",["T_WHITESPACE"," ",422],["T_VARIABLE","$attribute",422],["T_OBJECT_OPERATOR","->",422],["T_STRING","getAttributeCode",422],"(",")",";",["T_WHITESPACE","\n\n            ",422],["T_IF","if",424],["T_WHITESPACE"," ",424],"(",["T_ISSET","isset",424],"(",["T_VARIABLE","$productData",424],"[",["T_VARIABLE","$attributeCode",424],"]",")",")",["T_WHITESPACE"," ",424],"{",["T_WHITESPACE","\n\n                ",424],["T_IF","if",426],["T_WHITESPACE"," ",426],"(",["T_CONSTANT_ENCAPSED_STRING","'store_id'",426],["T_WHITESPACE"," ",426],["T_IS_IDENTICAL","===",426],["T_WHITESPACE"," ",426],["T_VARIABLE","$attributeCode",426],")",["T_WHITESPACE"," ",426],"{",["T_WHITESPACE","\n                    ",426],["T_CONTINUE","continue",427],";",["T_WHITESPACE","\n                ",427],"}",["T_WHITESPACE","\n\n                ",428],["T_VARIABLE","$value",430],["T_WHITESPACE"," ",430],"=",["T_WHITESPACE"," ",430],["T_VARIABLE","$this",430],["T_OBJECT_OPERATOR","->",430],["T_STRING","getAttributeValue",430],"(",["T_VARIABLE","$attribute",430],["T_OBJECT_OPERATOR","->",430],["T_STRING","getId",430],"(",")",",",["T_WHITESPACE"," ",430],["T_VARIABLE","$productData",430],"[",["T_VARIABLE","$attributeCode",430],"]",",",["T_WHITESPACE"," ",430],["T_VARIABLE","$storeId",430],")",";",["T_WHITESPACE","\n                ",430],["T_IF","if",431],["T_WHITESPACE"," ",431],"(",["T_VARIABLE","$value",431],")",["T_WHITESPACE"," ",431],"{",["T_WHITESPACE","\n                    ",431],["T_IF","if",432],["T_WHITESPACE"," ",432],"(",["T_ISSET","isset",432],"(",["T_VARIABLE","$index",432],"[",["T_VARIABLE","$attribute",432],["T_OBJECT_OPERATOR","->",432],["T_STRING","getId",432],"(",")","]",")",")",["T_WHITESPACE"," ",432],"{",["T_WHITESPACE","\n                        ",432],["T_IF","if",433],["T_WHITESPACE"," ",433],"(","!",["T_STRING","is_array",433],"(",["T_VARIABLE","$index",433],"[",["T_VARIABLE","$attribute",433],["T_OBJECT_OPERATOR","->",433],["T_STRING","getId",433],"(",")","]",")",")",["T_WHITESPACE"," ",433],"{",["T_WHITESPACE","\n                            ",433],["T_VARIABLE","$index",434],"[",["T_VARIABLE","$attribute",434],["T_OBJECT_OPERATOR","->",434],["T_STRING","getId",434],"(",")","]",["T_WHITESPACE"," ",434],"=",["T_WHITESPACE"," ",434],"[",["T_VARIABLE","$index",434],"[",["T_VARIABLE","$attribute",434],["T_OBJECT_OPERATOR","->",434],["T_STRING","getId",434],"(",")","]","]",";",["T_WHITESPACE","\n                        ",434],"}",["T_WHITESPACE","\n                        ",435],["T_VARIABLE","$index",436],"[",["T_VARIABLE","$attribute",436],["T_OBJECT_OPERATOR","->",436],["T_STRING","getId",436],"(",")","]","[","]",["T_WHITESPACE"," ",436],"=",["T_WHITESPACE"," ",436],["T_VARIABLE","$value",436],";",["T_WHITESPACE","\n                    ",436],"}",["T_WHITESPACE"," ",437],["T_ELSE","else",437],["T_WHITESPACE"," ",437],"{",["T_WHITESPACE","\n                        ",437],["T_VARIABLE","$index",438],"[",["T_VARIABLE","$attribute",438],["T_OBJECT_OPERATOR","->",438],["T_STRING","getId",438],"(",")","]",["T_WHITESPACE"," ",438],"=",["T_WHITESPACE"," ",438],["T_VARIABLE","$value",438],";",["T_WHITESPACE","\n                    ",438],"}",["T_WHITESPACE","\n                ",439],"}",["T_WHITESPACE","\n            ",440],"}",["T_WHITESPACE","\n        ",441],"}",["T_WHITESPACE","\n\n        ",442],["T_FOREACH","foreach",444],["T_WHITESPACE"," ",444],"(",["T_VARIABLE","$indexData",444],["T_WHITESPACE"," ",444],["T_AS","as",444],["T_WHITESPACE"," ",444],["T_VARIABLE","$entityId",444],["T_WHITESPACE"," ",444],["T_DOUBLE_ARROW","=>",444],["T_WHITESPACE"," ",444],["T_VARIABLE","$attributeData",444],")",["T_WHITESPACE"," ",444],"{",["T_WHITESPACE","\n            ",444],["T_FOREACH","foreach",445],["T_WHITESPACE"," ",445],"(",["T_VARIABLE","$attributeData",445],["T_WHITESPACE"," ",445],["T_AS","as",445],["T_WHITESPACE"," ",445],["T_VARIABLE","$attributeId",445],["T_WHITESPACE"," ",445],["T_DOUBLE_ARROW","=>",445],["T_WHITESPACE"," ",445],["T_VARIABLE","$attributeValue",445],")",["T_WHITESPACE"," ",445],"{",["T_WHITESPACE","\n                ",445],["T_VARIABLE","$value",446],["T_WHITESPACE"," ",446],"=",["T_WHITESPACE"," ",446],["T_VARIABLE","$this",446],["T_OBJECT_OPERATOR","->",446],["T_STRING","getAttributeValue",446],"(",["T_VARIABLE","$attributeId",446],",",["T_WHITESPACE"," ",446],["T_VARIABLE","$attributeValue",446],",",["T_WHITESPACE"," ",446],["T_VARIABLE","$storeId",446],")",";",["T_WHITESPACE","\n                ",446],["T_IF","if",447],["T_WHITESPACE"," ",447],"(","!",["T_EMPTY","empty",447],"(",["T_VARIABLE","$value",447],")",")",["T_WHITESPACE"," ",447],"{",["T_WHITESPACE","\n                    ",447],["T_IF","if",448],["T_WHITESPACE"," ",448],"(",["T_ISSET","isset",448],"(",["T_VARIABLE","$index",448],"[",["T_VARIABLE","$attributeId",448],"]",")",")",["T_WHITESPACE"," ",448],"{",["T_WHITESPACE","\n                        ",448],["T_VARIABLE","$index",449],"[",["T_VARIABLE","$attributeId",449],"]","[",["T_VARIABLE","$entityId",449],"]",["T_WHITESPACE"," ",449],"=",["T_WHITESPACE"," ",449],["T_VARIABLE","$value",449],";",["T_WHITESPACE","\n                    ",449],"}",["T_WHITESPACE"," ",450],["T_ELSE","else",450],["T_WHITESPACE"," ",450],"{",["T_WHITESPACE","\n                        ",450],["T_VARIABLE","$index",451],"[",["T_VARIABLE","$attributeId",451],"]",["T_WHITESPACE"," ",451],"=",["T_WHITESPACE"," ",451],"[",["T_VARIABLE","$entityId",451],["T_WHITESPACE"," ",451],["T_DOUBLE_ARROW","=>",451],["T_WHITESPACE"," ",451],["T_VARIABLE","$value",451],"]",";",["T_WHITESPACE","\n                    ",451],"}",["T_WHITESPACE","\n                ",452],"}",["T_WHITESPACE","\n            ",453],"}",["T_WHITESPACE","\n        ",454],"}",["T_WHITESPACE","\n\n        ",455],["T_VARIABLE","$product",457],["T_WHITESPACE"," ",457],"=",["T_WHITESPACE"," ",457],["T_VARIABLE","$this",457],["T_OBJECT_OPERATOR","->",457],["T_STRING","getProductEmulator",457],"(",["T_WHITESPACE","\n            ",457],["T_VARIABLE","$productData",458],"[",["T_CONSTANT_ENCAPSED_STRING","'type_id'",458],"]",["T_WHITESPACE","\n        ",458],")",["T_OBJECT_OPERATOR","->",459],["T_STRING","setId",459],"(",["T_WHITESPACE","\n            ",459],["T_VARIABLE","$productData",460],"[",["T_CONSTANT_ENCAPSED_STRING","'entity_id'",460],"]",["T_WHITESPACE","\n        ",460],")",["T_OBJECT_OPERATOR","->",461],["T_STRING","setStoreId",461],"(",["T_WHITESPACE","\n            ",461],["T_VARIABLE","$storeId",462],["T_WHITESPACE","\n        ",462],")",";",["T_WHITESPACE","\n        ",463],["T_VARIABLE","$typeInstance",464],["T_WHITESPACE"," ",464],"=",["T_WHITESPACE"," ",464],["T_VARIABLE","$this",464],["T_OBJECT_OPERATOR","->",464],["T_STRING","getProductTypeInstance",464],"(",["T_VARIABLE","$productData",464],"[",["T_CONSTANT_ENCAPSED_STRING","'type_id'",464],"]",")",";",["T_WHITESPACE","\n        ",464],["T_VARIABLE","$data",465],["T_WHITESPACE"," ",465],"=",["T_WHITESPACE"," ",465],["T_VARIABLE","$typeInstance",465],["T_OBJECT_OPERATOR","->",465],["T_STRING","getSearchableData",465],"(",["T_VARIABLE","$product",465],")",";",["T_WHITESPACE","\n        ",465],["T_IF","if",466],["T_WHITESPACE"," ",466],"(",["T_VARIABLE","$data",466],")",["T_WHITESPACE"," ",466],"{",["T_WHITESPACE","\n            ",466],["T_VARIABLE","$index",467],"[",["T_CONSTANT_ENCAPSED_STRING","'options'",467],"]",["T_WHITESPACE"," ",467],"=",["T_WHITESPACE"," ",467],["T_VARIABLE","$data",467],";",["T_WHITESPACE","\n        ",467],"}",["T_WHITESPACE","\n\n        ",468],["T_RETURN","return",470],["T_WHITESPACE"," ",470],["T_VARIABLE","$this",470],["T_OBJECT_OPERATOR","->",470],["T_STRING","engine",470],["T_OBJECT_OPERATOR","->",470],["T_STRING","prepareEntityIndex",470],"(",["T_VARIABLE","$index",470],",",["T_WHITESPACE"," ",470],["T_VARIABLE","$this",470],["T_OBJECT_OPERATOR","->",470],["T_STRING","separator",470],")",";",["T_WHITESPACE","\n    ",470],"}",["T_WHITESPACE","\n\n    ",471],["T_DOC_COMMENT","\/**\n     * Retrieve attribute source value for search\n     *\n     * @param int $attributeId\n     * @param mixed $valueId\n     * @param int $storeId\n     * @return string\n     *\/",473],["T_WHITESPACE","\n    ",480],["T_PRIVATE","private",481],["T_WHITESPACE"," ",481],["T_FUNCTION","function",481],["T_WHITESPACE"," ",481],["T_STRING","getAttributeValue",481],"(",["T_VARIABLE","$attributeId",481],",",["T_WHITESPACE"," ",481],["T_VARIABLE","$valueId",481],",",["T_WHITESPACE"," ",481],["T_VARIABLE","$storeId",481],")",["T_WHITESPACE","\n    ",481],"{",["T_WHITESPACE","\n        ",482],["T_VARIABLE","$attribute",483],["T_WHITESPACE"," ",483],"=",["T_WHITESPACE"," ",483],["T_VARIABLE","$this",483],["T_OBJECT_OPERATOR","->",483],["T_STRING","getSearchableAttribute",483],"(",["T_VARIABLE","$attributeId",483],")",";",["T_WHITESPACE","\n        ",483],["T_VARIABLE","$value",484],["T_WHITESPACE"," ",484],"=",["T_WHITESPACE"," ",484],["T_VARIABLE","$this",484],["T_OBJECT_OPERATOR","->",484],["T_STRING","engine",484],["T_OBJECT_OPERATOR","->",484],["T_STRING","processAttributeValue",484],"(",["T_VARIABLE","$attribute",484],",",["T_WHITESPACE"," ",484],["T_VARIABLE","$valueId",484],")",";",["T_WHITESPACE","\n\n        ",484],["T_IF","if",486],["T_WHITESPACE"," ",486],"(",["T_STRING","false",486],["T_WHITESPACE"," ",486],["T_IS_NOT_IDENTICAL","!==",486],["T_WHITESPACE"," ",486],["T_VARIABLE","$value",486],["T_WHITESPACE","\n            ",486],["T_BOOLEAN_AND","&&",487],["T_WHITESPACE"," ",487],["T_VARIABLE","$attribute",487],["T_OBJECT_OPERATOR","->",487],["T_STRING","getIsSearchable",487],"(",")",["T_WHITESPACE","\n            ",487],["T_BOOLEAN_AND","&&",488],["T_WHITESPACE"," ",488],["T_VARIABLE","$attribute",488],["T_OBJECT_OPERATOR","->",488],["T_STRING","usesSource",488],"(",")",["T_WHITESPACE","\n            ",488],["T_BOOLEAN_AND","&&",489],["T_WHITESPACE"," ",489],["T_VARIABLE","$this",489],["T_OBJECT_OPERATOR","->",489],["T_STRING","engine",489],["T_OBJECT_OPERATOR","->",489],["T_STRING","allowAdvancedIndex",489],"(",")",["T_WHITESPACE","\n        ",489],")",["T_WHITESPACE"," ",490],"{",["T_WHITESPACE","\n            ",490],["T_VARIABLE","$attribute",491],["T_OBJECT_OPERATOR","->",491],["T_STRING","setStoreId",491],"(",["T_VARIABLE","$storeId",491],")",";",["T_WHITESPACE","\n\n            ",491],["T_VARIABLE","$valueText",493],["T_WHITESPACE"," ",493],"=",["T_WHITESPACE"," ",493],["T_ARRAY_CAST","(array)",493],["T_WHITESPACE"," ",493],["T_VARIABLE","$attribute",493],["T_OBJECT_OPERATOR","->",493],["T_STRING","getSource",493],"(",")",["T_OBJECT_OPERATOR","->",493],["T_STRING","getIndexOptionText",493],"(",["T_VARIABLE","$valueId",493],")",";",["T_WHITESPACE","\n\n            ",493],["T_VARIABLE","$pieces",495],["T_WHITESPACE"," ",495],"=",["T_WHITESPACE"," ",495],["T_STRING","array_filter",495],"(",["T_STRING","array_merge",495],"(","[",["T_VARIABLE","$value",495],"]",",",["T_WHITESPACE"," ",495],["T_VARIABLE","$valueText",495],")",")",";",["T_WHITESPACE","\n\n            ",495],["T_VARIABLE","$value",497],["T_WHITESPACE"," ",497],"=",["T_WHITESPACE"," ",497],["T_STRING","implode",497],"(",["T_VARIABLE","$this",497],["T_OBJECT_OPERATOR","->",497],["T_STRING","separator",497],",",["T_WHITESPACE"," ",497],["T_VARIABLE","$pieces",497],")",";",["T_WHITESPACE","\n        ",497],"}",["T_WHITESPACE","\n\n        ",498],["T_VARIABLE","$value",500],["T_WHITESPACE"," ",500],"=",["T_WHITESPACE"," ",500],["T_STRING","preg_replace",500],"(",["T_CONSTANT_ENCAPSED_STRING","'\/\\\\s+\/siu'",500],",",["T_WHITESPACE"," ",500],["T_CONSTANT_ENCAPSED_STRING","' '",500],",",["T_WHITESPACE"," ",500],["T_STRING","trim",500],"(",["T_STRING","strip_tags",500],"(",["T_VARIABLE","$value",500],")",")",")",";",["T_WHITESPACE","\n\n        ",500],["T_RETURN","return",502],["T_WHITESPACE"," ",502],["T_VARIABLE","$value",502],";",["T_WHITESPACE","\n    ",502],"}",["T_WHITESPACE","\n",503],"}",["T_WHITESPACE","\n",504]]
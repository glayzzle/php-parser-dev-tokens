[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Copyright \u00c2\u00a9 2013-2017 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n *\/",2],["T_WHITESPACE","\n",5],["T_NAMESPACE","namespace",6],["T_WHITESPACE"," ",6],["T_STRING","Magento",6],["T_NS_SEPARATOR","\\",6],["T_STRING","CatalogSearch",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Model",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Layer",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Filter",6],";",["T_WHITESPACE","\n\n",6],["T_USE","use",8],["T_WHITESPACE"," ",8],["T_STRING","Magento",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Catalog",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Model",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Layer",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Filter",8],["T_NS_SEPARATOR","\\",8],["T_STRING","AbstractFilter",8],";",["T_WHITESPACE","\n\n",8],["T_DOC_COMMENT","\/**\n * Layer price filter based on Search API\n *\n * @SuppressWarnings(PHPMD.CouplingBetweenObjects)\n *\/",10],["T_WHITESPACE","\n",14],["T_CLASS","class",15],["T_WHITESPACE"," ",15],["T_STRING","Price",15],["T_WHITESPACE"," ",15],["T_EXTENDS","extends",15],["T_WHITESPACE"," ",15],["T_STRING","AbstractFilter",15],["T_WHITESPACE","\n",15],"{",["T_WHITESPACE","\n    ",16],["T_DOC_COMMENT","\/** Price delta for filter  *\/",17],["T_WHITESPACE","\n    ",17],["T_CONST","const",18],["T_WHITESPACE"," ",18],["T_STRING","PRICE_DELTA",18],["T_WHITESPACE"," ",18],"=",["T_WHITESPACE"," ",18],["T_DNUMBER","0.001",18],";",["T_WHITESPACE","\n\n    ",18],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Catalog\\Model\\Layer\\Filter\\DataProvider\\Price\n     *\/",20],["T_WHITESPACE","\n    ",22],["T_PRIVATE","private",23],["T_WHITESPACE"," ",23],["T_VARIABLE","$dataProvider",23],";",["T_WHITESPACE","\n\n    ",23],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Framework\\Pricing\\PriceCurrencyInterface\n     *\/",25],["T_WHITESPACE","\n    ",27],["T_PRIVATE","private",28],["T_WHITESPACE"," ",28],["T_VARIABLE","$priceCurrency",28],";",["T_WHITESPACE","\n\n    ",28],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Catalog\\Model\\ResourceModel\\Layer\\Filter\\Price\n     *\/",30],["T_WHITESPACE","\n    ",32],["T_PRIVATE","private",33],["T_WHITESPACE"," ",33],["T_VARIABLE","$resource",33],";",["T_WHITESPACE","\n\n    ",33],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Customer\\Model\\Session\n     *\/",35],["T_WHITESPACE","\n    ",37],["T_PRIVATE","private",38],["T_WHITESPACE"," ",38],["T_VARIABLE","$customerSession",38],";",["T_WHITESPACE","\n\n    ",38],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Framework\\Search\\Dynamic\\Algorithm\n     *\/",40],["T_WHITESPACE","\n    ",42],["T_PRIVATE","private",43],["T_WHITESPACE"," ",43],["T_VARIABLE","$priceAlgorithm",43],";",["T_WHITESPACE","\n\n    ",43],["T_DOC_COMMENT","\/**\n     * @param \\Magento\\Catalog\\Model\\Layer\\Filter\\ItemFactory $filterItemFactory\n     * @param \\Magento\\Store\\Model\\StoreManagerInterface $storeManager\n     * @param \\Magento\\Catalog\\Model\\Layer $layer\n     * @param \\Magento\\Catalog\\Model\\Layer\\Filter\\Item\\DataBuilder $itemDataBuilder\n     * @param \\Magento\\Catalog\\Model\\ResourceModel\\Layer\\Filter\\Price $resource\n     * @param \\Magento\\Customer\\Model\\Session $customerSession\n     * @param \\Magento\\Framework\\Search\\Dynamic\\Algorithm $priceAlgorithm\n     * @param \\Magento\\Framework\\Pricing\\PriceCurrencyInterface $priceCurrency\n     * @param \\Magento\\Catalog\\Model\\Layer\\Filter\\Dynamic\\AlgorithmFactory $algorithmFactory\n     * @param \\Magento\\Catalog\\Model\\Layer\\Filter\\DataProvider\\PriceFactory $dataProviderFactory\n     * @param array $data\n     * @SuppressWarnings(PHPMD.ExcessiveParameterList)\n     * @SuppressWarnings(PHPMD.UnusedFormalParameter)\n     *\/",45],["T_WHITESPACE","\n    ",59],["T_PUBLIC","public",60],["T_WHITESPACE"," ",60],["T_FUNCTION","function",60],["T_WHITESPACE"," ",60],["T_STRING","__construct",60],"(",["T_WHITESPACE","\n        ",60],["T_NS_SEPARATOR","\\",61],["T_STRING","Magento",61],["T_NS_SEPARATOR","\\",61],["T_STRING","Catalog",61],["T_NS_SEPARATOR","\\",61],["T_STRING","Model",61],["T_NS_SEPARATOR","\\",61],["T_STRING","Layer",61],["T_NS_SEPARATOR","\\",61],["T_STRING","Filter",61],["T_NS_SEPARATOR","\\",61],["T_STRING","ItemFactory",61],["T_WHITESPACE"," ",61],["T_VARIABLE","$filterItemFactory",61],",",["T_WHITESPACE","\n        ",61],["T_NS_SEPARATOR","\\",62],["T_STRING","Magento",62],["T_NS_SEPARATOR","\\",62],["T_STRING","Store",62],["T_NS_SEPARATOR","\\",62],["T_STRING","Model",62],["T_NS_SEPARATOR","\\",62],["T_STRING","StoreManagerInterface",62],["T_WHITESPACE"," ",62],["T_VARIABLE","$storeManager",62],",",["T_WHITESPACE","\n        ",62],["T_NS_SEPARATOR","\\",63],["T_STRING","Magento",63],["T_NS_SEPARATOR","\\",63],["T_STRING","Catalog",63],["T_NS_SEPARATOR","\\",63],["T_STRING","Model",63],["T_NS_SEPARATOR","\\",63],["T_STRING","Layer",63],["T_WHITESPACE"," ",63],["T_VARIABLE","$layer",63],",",["T_WHITESPACE","\n        ",63],["T_NS_SEPARATOR","\\",64],["T_STRING","Magento",64],["T_NS_SEPARATOR","\\",64],["T_STRING","Catalog",64],["T_NS_SEPARATOR","\\",64],["T_STRING","Model",64],["T_NS_SEPARATOR","\\",64],["T_STRING","Layer",64],["T_NS_SEPARATOR","\\",64],["T_STRING","Filter",64],["T_NS_SEPARATOR","\\",64],["T_STRING","Item",64],["T_NS_SEPARATOR","\\",64],["T_STRING","DataBuilder",64],["T_WHITESPACE"," ",64],["T_VARIABLE","$itemDataBuilder",64],",",["T_WHITESPACE","\n        ",64],["T_NS_SEPARATOR","\\",65],["T_STRING","Magento",65],["T_NS_SEPARATOR","\\",65],["T_STRING","Catalog",65],["T_NS_SEPARATOR","\\",65],["T_STRING","Model",65],["T_NS_SEPARATOR","\\",65],["T_STRING","ResourceModel",65],["T_NS_SEPARATOR","\\",65],["T_STRING","Layer",65],["T_NS_SEPARATOR","\\",65],["T_STRING","Filter",65],["T_NS_SEPARATOR","\\",65],["T_STRING","Price",65],["T_WHITESPACE"," ",65],["T_VARIABLE","$resource",65],",",["T_WHITESPACE","\n        ",65],["T_NS_SEPARATOR","\\",66],["T_STRING","Magento",66],["T_NS_SEPARATOR","\\",66],["T_STRING","Customer",66],["T_NS_SEPARATOR","\\",66],["T_STRING","Model",66],["T_NS_SEPARATOR","\\",66],["T_STRING","Session",66],["T_WHITESPACE"," ",66],["T_VARIABLE","$customerSession",66],",",["T_WHITESPACE","\n        ",66],["T_NS_SEPARATOR","\\",67],["T_STRING","Magento",67],["T_NS_SEPARATOR","\\",67],["T_STRING","Framework",67],["T_NS_SEPARATOR","\\",67],["T_STRING","Search",67],["T_NS_SEPARATOR","\\",67],["T_STRING","Dynamic",67],["T_NS_SEPARATOR","\\",67],["T_STRING","Algorithm",67],["T_WHITESPACE"," ",67],["T_VARIABLE","$priceAlgorithm",67],",",["T_WHITESPACE","\n        ",67],["T_NS_SEPARATOR","\\",68],["T_STRING","Magento",68],["T_NS_SEPARATOR","\\",68],["T_STRING","Framework",68],["T_NS_SEPARATOR","\\",68],["T_STRING","Pricing",68],["T_NS_SEPARATOR","\\",68],["T_STRING","PriceCurrencyInterface",68],["T_WHITESPACE"," ",68],["T_VARIABLE","$priceCurrency",68],",",["T_WHITESPACE","\n        ",68],["T_NS_SEPARATOR","\\",69],["T_STRING","Magento",69],["T_NS_SEPARATOR","\\",69],["T_STRING","Catalog",69],["T_NS_SEPARATOR","\\",69],["T_STRING","Model",69],["T_NS_SEPARATOR","\\",69],["T_STRING","Layer",69],["T_NS_SEPARATOR","\\",69],["T_STRING","Filter",69],["T_NS_SEPARATOR","\\",69],["T_STRING","Dynamic",69],["T_NS_SEPARATOR","\\",69],["T_STRING","AlgorithmFactory",69],["T_WHITESPACE"," ",69],["T_VARIABLE","$algorithmFactory",69],",",["T_WHITESPACE","\n        ",69],["T_NS_SEPARATOR","\\",70],["T_STRING","Magento",70],["T_NS_SEPARATOR","\\",70],["T_STRING","Catalog",70],["T_NS_SEPARATOR","\\",70],["T_STRING","Model",70],["T_NS_SEPARATOR","\\",70],["T_STRING","Layer",70],["T_NS_SEPARATOR","\\",70],["T_STRING","Filter",70],["T_NS_SEPARATOR","\\",70],["T_STRING","DataProvider",70],["T_NS_SEPARATOR","\\",70],["T_STRING","PriceFactory",70],["T_WHITESPACE"," ",70],["T_VARIABLE","$dataProviderFactory",70],",",["T_WHITESPACE","\n        ",70],["T_ARRAY","array",71],["T_WHITESPACE"," ",71],["T_VARIABLE","$data",71],["T_WHITESPACE"," ",71],"=",["T_WHITESPACE"," ",71],"[","]",["T_WHITESPACE","\n    ",71],")",["T_WHITESPACE"," ",72],"{",["T_WHITESPACE","\n        ",72],["T_VARIABLE","$this",73],["T_OBJECT_OPERATOR","->",73],["T_STRING","_requestVar",73],["T_WHITESPACE"," ",73],"=",["T_WHITESPACE"," ",73],["T_CONSTANT_ENCAPSED_STRING","'price'",73],";",["T_WHITESPACE","\n        ",73],["T_VARIABLE","$this",74],["T_OBJECT_OPERATOR","->",74],["T_STRING","priceCurrency",74],["T_WHITESPACE"," ",74],"=",["T_WHITESPACE"," ",74],["T_VARIABLE","$priceCurrency",74],";",["T_WHITESPACE","\n        ",74],["T_VARIABLE","$this",75],["T_OBJECT_OPERATOR","->",75],["T_STRING","resource",75],["T_WHITESPACE"," ",75],"=",["T_WHITESPACE"," ",75],["T_VARIABLE","$resource",75],";",["T_WHITESPACE","\n        ",75],["T_VARIABLE","$this",76],["T_OBJECT_OPERATOR","->",76],["T_STRING","customerSession",76],["T_WHITESPACE"," ",76],"=",["T_WHITESPACE"," ",76],["T_VARIABLE","$customerSession",76],";",["T_WHITESPACE","\n        ",76],["T_VARIABLE","$this",77],["T_OBJECT_OPERATOR","->",77],["T_STRING","priceAlgorithm",77],["T_WHITESPACE"," ",77],"=",["T_WHITESPACE"," ",77],["T_VARIABLE","$priceAlgorithm",77],";",["T_WHITESPACE","\n        ",77],["T_STRING","parent",78],["T_DOUBLE_COLON","::",78],["T_STRING","__construct",78],"(",["T_WHITESPACE","\n            ",78],["T_VARIABLE","$filterItemFactory",79],",",["T_WHITESPACE","\n            ",79],["T_VARIABLE","$storeManager",80],",",["T_WHITESPACE","\n            ",80],["T_VARIABLE","$layer",81],",",["T_WHITESPACE","\n            ",81],["T_VARIABLE","$itemDataBuilder",82],",",["T_WHITESPACE","\n            ",82],["T_VARIABLE","$data",83],["T_WHITESPACE","\n        ",83],")",";",["T_WHITESPACE","\n        ",84],["T_VARIABLE","$this",85],["T_OBJECT_OPERATOR","->",85],["T_STRING","dataProvider",85],["T_WHITESPACE"," ",85],"=",["T_WHITESPACE"," ",85],["T_VARIABLE","$dataProviderFactory",85],["T_OBJECT_OPERATOR","->",85],["T_STRING","create",85],"(","[",["T_CONSTANT_ENCAPSED_STRING","'layer'",85],["T_WHITESPACE"," ",85],["T_DOUBLE_ARROW","=>",85],["T_WHITESPACE"," ",85],["T_VARIABLE","$this",85],["T_OBJECT_OPERATOR","->",85],["T_STRING","getLayer",85],"(",")","]",")",";",["T_WHITESPACE","\n    ",85],"}",["T_WHITESPACE","\n\n    ",86],["T_DOC_COMMENT","\/**\n     * @return \\Magento\\Catalog\\Model\\ResourceModel\\Layer\\Filter\\Price\n     *\/",88],["T_WHITESPACE","\n    ",90],["T_PUBLIC","public",91],["T_WHITESPACE"," ",91],["T_FUNCTION","function",91],["T_WHITESPACE"," ",91],["T_STRING","getResource",91],"(",")",["T_WHITESPACE","\n    ",91],"{",["T_WHITESPACE","\n        ",92],["T_RETURN","return",93],["T_WHITESPACE"," ",93],["T_VARIABLE","$this",93],["T_OBJECT_OPERATOR","->",93],["T_STRING","resource",93],";",["T_WHITESPACE","\n    ",93],"}",["T_WHITESPACE","\n\n    ",94],["T_DOC_COMMENT","\/**\n     * Set active currency rate for filter\n     *\n     * @param float $rate\n     * @return $this\n     *\/",96],["T_WHITESPACE","\n    ",101],["T_PUBLIC","public",102],["T_WHITESPACE"," ",102],["T_FUNCTION","function",102],["T_WHITESPACE"," ",102],["T_STRING","setCurrencyRate",102],"(",["T_VARIABLE","$rate",102],")",["T_WHITESPACE","\n    ",102],"{",["T_WHITESPACE","\n        ",103],["T_RETURN","return",104],["T_WHITESPACE"," ",104],["T_VARIABLE","$this",104],["T_OBJECT_OPERATOR","->",104],["T_STRING","setData",104],"(",["T_CONSTANT_ENCAPSED_STRING","'currency_rate'",104],",",["T_WHITESPACE"," ",104],["T_VARIABLE","$rate",104],")",";",["T_WHITESPACE","\n    ",104],"}",["T_WHITESPACE","\n\n    ",105],["T_DOC_COMMENT","\/**\n     * Apply price range filter\n     *\n     * @param \\Magento\\Framework\\App\\RequestInterface $request\n     * @return $this\n     * @SuppressWarnings(PHPMD.NPathComplexity)\n     *\/",107],["T_WHITESPACE","\n    ",113],["T_PUBLIC","public",114],["T_WHITESPACE"," ",114],["T_FUNCTION","function",114],["T_WHITESPACE"," ",114],["T_STRING","apply",114],"(",["T_NS_SEPARATOR","\\",114],["T_STRING","Magento",114],["T_NS_SEPARATOR","\\",114],["T_STRING","Framework",114],["T_NS_SEPARATOR","\\",114],["T_STRING","App",114],["T_NS_SEPARATOR","\\",114],["T_STRING","RequestInterface",114],["T_WHITESPACE"," ",114],["T_VARIABLE","$request",114],")",["T_WHITESPACE","\n    ",114],"{",["T_WHITESPACE","\n        ",115],["T_DOC_COMMENT","\/**\n         * Filter must be string: $fromPrice-$toPrice\n         *\/",116],["T_WHITESPACE","\n        ",118],["T_VARIABLE","$filter",119],["T_WHITESPACE"," ",119],"=",["T_WHITESPACE"," ",119],["T_VARIABLE","$request",119],["T_OBJECT_OPERATOR","->",119],["T_STRING","getParam",119],"(",["T_VARIABLE","$this",119],["T_OBJECT_OPERATOR","->",119],["T_STRING","getRequestVar",119],"(",")",")",";",["T_WHITESPACE","\n        ",119],["T_IF","if",120],["T_WHITESPACE"," ",120],"(","!",["T_VARIABLE","$filter",120],["T_WHITESPACE"," ",120],["T_BOOLEAN_OR","||",120],["T_WHITESPACE"," ",120],["T_STRING","is_array",120],"(",["T_VARIABLE","$filter",120],")",")",["T_WHITESPACE"," ",120],"{",["T_WHITESPACE","\n            ",120],["T_RETURN","return",121],["T_WHITESPACE"," ",121],["T_VARIABLE","$this",121],";",["T_WHITESPACE","\n        ",121],"}",["T_WHITESPACE","\n\n        ",122],["T_VARIABLE","$filterParams",124],["T_WHITESPACE"," ",124],"=",["T_WHITESPACE"," ",124],["T_STRING","explode",124],"(",["T_CONSTANT_ENCAPSED_STRING","','",124],",",["T_WHITESPACE"," ",124],["T_VARIABLE","$filter",124],")",";",["T_WHITESPACE","\n        ",124],["T_VARIABLE","$filter",125],["T_WHITESPACE"," ",125],"=",["T_WHITESPACE"," ",125],["T_VARIABLE","$this",125],["T_OBJECT_OPERATOR","->",125],["T_STRING","dataProvider",125],["T_OBJECT_OPERATOR","->",125],["T_STRING","validateFilter",125],"(",["T_VARIABLE","$filterParams",125],"[",["T_LNUMBER","0",125],"]",")",";",["T_WHITESPACE","\n        ",125],["T_IF","if",126],["T_WHITESPACE"," ",126],"(","!",["T_VARIABLE","$filter",126],")",["T_WHITESPACE"," ",126],"{",["T_WHITESPACE","\n            ",126],["T_RETURN","return",127],["T_WHITESPACE"," ",127],["T_VARIABLE","$this",127],";",["T_WHITESPACE","\n        ",127],"}",["T_WHITESPACE","\n\n        ",128],["T_VARIABLE","$this",130],["T_OBJECT_OPERATOR","->",130],["T_STRING","dataProvider",130],["T_OBJECT_OPERATOR","->",130],["T_STRING","setInterval",130],"(",["T_VARIABLE","$filter",130],")",";",["T_WHITESPACE","\n        ",130],["T_VARIABLE","$priorFilters",131],["T_WHITESPACE"," ",131],"=",["T_WHITESPACE"," ",131],["T_VARIABLE","$this",131],["T_OBJECT_OPERATOR","->",131],["T_STRING","dataProvider",131],["T_OBJECT_OPERATOR","->",131],["T_STRING","getPriorFilters",131],"(",["T_VARIABLE","$filterParams",131],")",";",["T_WHITESPACE","\n        ",131],["T_IF","if",132],["T_WHITESPACE"," ",132],"(",["T_VARIABLE","$priorFilters",132],")",["T_WHITESPACE"," ",132],"{",["T_WHITESPACE","\n            ",132],["T_VARIABLE","$this",133],["T_OBJECT_OPERATOR","->",133],["T_STRING","dataProvider",133],["T_OBJECT_OPERATOR","->",133],["T_STRING","setPriorIntervals",133],"(",["T_VARIABLE","$priorFilters",133],")",";",["T_WHITESPACE","\n        ",133],"}",["T_WHITESPACE","\n\n        ",134],["T_LIST","list",136],"(",["T_VARIABLE","$from",136],",",["T_WHITESPACE"," ",136],["T_VARIABLE","$to",136],")",["T_WHITESPACE"," ",136],"=",["T_WHITESPACE"," ",136],["T_VARIABLE","$filter",136],";",["T_WHITESPACE","\n\n        ",136],["T_VARIABLE","$this",138],["T_OBJECT_OPERATOR","->",138],["T_STRING","getLayer",138],"(",")",["T_OBJECT_OPERATOR","->",138],["T_STRING","getProductCollection",138],"(",")",["T_OBJECT_OPERATOR","->",138],["T_STRING","addFieldToFilter",138],"(",["T_WHITESPACE","\n            ",138],["T_CONSTANT_ENCAPSED_STRING","'price'",139],",",["T_WHITESPACE","\n            ",139],"[",["T_CONSTANT_ENCAPSED_STRING","'from'",140],["T_WHITESPACE"," ",140],["T_DOUBLE_ARROW","=>",140],["T_WHITESPACE"," ",140],["T_VARIABLE","$from",140],",",["T_WHITESPACE"," ",140],["T_CONSTANT_ENCAPSED_STRING","'to'",140],["T_WHITESPACE"," ",140],["T_DOUBLE_ARROW","=>",140],["T_WHITESPACE","  ",140],["T_EMPTY","empty",140],"(",["T_VARIABLE","$to",140],")",["T_WHITESPACE"," ",140],["T_BOOLEAN_OR","||",140],["T_WHITESPACE"," ",140],["T_VARIABLE","$from",140],["T_WHITESPACE"," ",140],["T_IS_EQUAL","==",140],["T_WHITESPACE"," ",140],["T_VARIABLE","$to",140],["T_WHITESPACE"," ",140],"?",["T_WHITESPACE"," ",140],["T_VARIABLE","$to",140],["T_WHITESPACE"," ",140],":",["T_WHITESPACE"," ",140],["T_VARIABLE","$to",140],["T_WHITESPACE"," ",140],"-",["T_WHITESPACE"," ",140],["T_STRING","self",140],["T_DOUBLE_COLON","::",140],["T_STRING","PRICE_DELTA",140],"]",["T_WHITESPACE","\n        ",140],")",";",["T_WHITESPACE","\n\n        ",141],["T_VARIABLE","$this",143],["T_OBJECT_OPERATOR","->",143],["T_STRING","getLayer",143],"(",")",["T_OBJECT_OPERATOR","->",143],["T_STRING","getState",143],"(",")",["T_OBJECT_OPERATOR","->",143],["T_STRING","addFilter",143],"(",["T_WHITESPACE","\n            ",143],["T_VARIABLE","$this",144],["T_OBJECT_OPERATOR","->",144],["T_STRING","_createItem",144],"(",["T_VARIABLE","$this",144],["T_OBJECT_OPERATOR","->",144],["T_STRING","_renderRangeLabel",144],"(",["T_EMPTY","empty",144],"(",["T_VARIABLE","$from",144],")",["T_WHITESPACE"," ",144],"?",["T_WHITESPACE"," ",144],["T_LNUMBER","0",144],["T_WHITESPACE"," ",144],":",["T_WHITESPACE"," ",144],["T_VARIABLE","$from",144],",",["T_WHITESPACE"," ",144],["T_VARIABLE","$to",144],")",",",["T_WHITESPACE"," ",144],["T_VARIABLE","$filter",144],")",["T_WHITESPACE","\n        ",144],")",";",["T_WHITESPACE","\n\n        ",145],["T_RETURN","return",147],["T_WHITESPACE"," ",147],["T_VARIABLE","$this",147],";",["T_WHITESPACE","\n    ",147],"}",["T_WHITESPACE","\n\n    ",148],["T_DOC_COMMENT","\/**\n     * Retrieve active currency rate for filter\n     *\n     * @return float\n     *\/",150],["T_WHITESPACE","\n    ",154],["T_PUBLIC","public",155],["T_WHITESPACE"," ",155],["T_FUNCTION","function",155],["T_WHITESPACE"," ",155],["T_STRING","getCurrencyRate",155],"(",")",["T_WHITESPACE","\n    ",155],"{",["T_WHITESPACE","\n        ",156],["T_VARIABLE","$rate",157],["T_WHITESPACE"," ",157],"=",["T_WHITESPACE"," ",157],["T_VARIABLE","$this",157],["T_OBJECT_OPERATOR","->",157],["T_STRING","_getData",157],"(",["T_CONSTANT_ENCAPSED_STRING","'currency_rate'",157],")",";",["T_WHITESPACE","\n        ",157],["T_IF","if",158],["T_WHITESPACE"," ",158],"(",["T_VARIABLE","$rate",158],["T_WHITESPACE"," ",158],["T_IS_IDENTICAL","===",158],["T_WHITESPACE"," ",158],["T_STRING","null",158],")",["T_WHITESPACE"," ",158],"{",["T_WHITESPACE","\n            ",158],["T_VARIABLE","$rate",159],["T_WHITESPACE"," ",159],"=",["T_WHITESPACE"," ",159],["T_VARIABLE","$this",159],["T_OBJECT_OPERATOR","->",159],["T_STRING","_storeManager",159],["T_OBJECT_OPERATOR","->",159],["T_STRING","getStore",159],"(",["T_VARIABLE","$this",159],["T_OBJECT_OPERATOR","->",159],["T_STRING","getStoreId",159],"(",")",")",["T_WHITESPACE","\n                ",159],["T_OBJECT_OPERATOR","->",160],["T_STRING","getCurrentCurrencyRate",160],"(",")",";",["T_WHITESPACE","\n        ",160],"}",["T_WHITESPACE","\n        ",161],["T_IF","if",162],["T_WHITESPACE"," ",162],"(","!",["T_VARIABLE","$rate",162],")",["T_WHITESPACE"," ",162],"{",["T_WHITESPACE","\n            ",162],["T_VARIABLE","$rate",163],["T_WHITESPACE"," ",163],"=",["T_WHITESPACE"," ",163],["T_LNUMBER","1",163],";",["T_WHITESPACE","\n        ",163],"}",["T_WHITESPACE","\n\n        ",164],["T_RETURN","return",166],["T_WHITESPACE"," ",166],["T_VARIABLE","$rate",166],";",["T_WHITESPACE","\n    ",166],"}",["T_WHITESPACE","\n\n    ",167],["T_DOC_COMMENT","\/**\n     * Prepare text of range label\n     *\n     * @param float|string $fromPrice\n     * @param float|string $toPrice\n     * @return float|\\Magento\\Framework\\Phrase\n     *\/",169],["T_WHITESPACE","\n    ",175],["T_PROTECTED","protected",176],["T_WHITESPACE"," ",176],["T_FUNCTION","function",176],["T_WHITESPACE"," ",176],["T_STRING","_renderRangeLabel",176],"(",["T_VARIABLE","$fromPrice",176],",",["T_WHITESPACE"," ",176],["T_VARIABLE","$toPrice",176],")",["T_WHITESPACE","\n    ",176],"{",["T_WHITESPACE","\n        ",177],["T_VARIABLE","$formattedFromPrice",178],["T_WHITESPACE"," ",178],"=",["T_WHITESPACE"," ",178],["T_VARIABLE","$this",178],["T_OBJECT_OPERATOR","->",178],["T_STRING","priceCurrency",178],["T_OBJECT_OPERATOR","->",178],["T_STRING","format",178],"(",["T_VARIABLE","$fromPrice",178],")",";",["T_WHITESPACE","\n        ",178],["T_IF","if",179],["T_WHITESPACE"," ",179],"(",["T_VARIABLE","$toPrice",179],["T_WHITESPACE"," ",179],["T_IS_IDENTICAL","===",179],["T_WHITESPACE"," ",179],["T_CONSTANT_ENCAPSED_STRING","''",179],")",["T_WHITESPACE"," ",179],"{",["T_WHITESPACE","\n            ",179],["T_RETURN","return",180],["T_WHITESPACE"," ",180],["T_STRING","__",180],"(",["T_CONSTANT_ENCAPSED_STRING","'%1 and above'",180],",",["T_WHITESPACE"," ",180],["T_VARIABLE","$formattedFromPrice",180],")",";",["T_WHITESPACE","\n        ",180],"}",["T_WHITESPACE"," ",181],["T_ELSEIF","elseif",181],["T_WHITESPACE"," ",181],"(",["T_VARIABLE","$fromPrice",181],["T_WHITESPACE"," ",181],["T_IS_EQUAL","==",181],["T_WHITESPACE"," ",181],["T_VARIABLE","$toPrice",181],["T_WHITESPACE"," ",181],["T_BOOLEAN_AND","&&",181],["T_WHITESPACE"," ",181],["T_VARIABLE","$this",181],["T_OBJECT_OPERATOR","->",181],["T_STRING","dataProvider",181],["T_OBJECT_OPERATOR","->",181],["T_STRING","getOnePriceIntervalValue",181],"(",")",")",["T_WHITESPACE"," ",181],"{",["T_WHITESPACE","\n            ",181],["T_RETURN","return",182],["T_WHITESPACE"," ",182],["T_VARIABLE","$formattedFromPrice",182],";",["T_WHITESPACE","\n        ",182],"}",["T_WHITESPACE"," ",183],["T_ELSE","else",183],["T_WHITESPACE"," ",183],"{",["T_WHITESPACE","\n            ",183],["T_IF","if",184],["T_WHITESPACE"," ",184],"(",["T_VARIABLE","$fromPrice",184],["T_WHITESPACE"," ",184],["T_IS_NOT_EQUAL","!=",184],["T_WHITESPACE"," ",184],["T_VARIABLE","$toPrice",184],")",["T_WHITESPACE"," ",184],"{",["T_WHITESPACE","\n                ",184],["T_VARIABLE","$toPrice",185],["T_WHITESPACE"," ",185],["T_MINUS_EQUAL","-=",185],["T_WHITESPACE"," ",185],["T_DNUMBER",".01",185],";",["T_WHITESPACE","\n            ",185],"}",["T_WHITESPACE","\n\n            ",186],["T_RETURN","return",188],["T_WHITESPACE"," ",188],["T_STRING","__",188],"(",["T_CONSTANT_ENCAPSED_STRING","'%1 - %2'",188],",",["T_WHITESPACE"," ",188],["T_VARIABLE","$formattedFromPrice",188],",",["T_WHITESPACE"," ",188],["T_VARIABLE","$this",188],["T_OBJECT_OPERATOR","->",188],["T_STRING","priceCurrency",188],["T_OBJECT_OPERATOR","->",188],["T_STRING","format",188],"(",["T_VARIABLE","$toPrice",188],")",")",";",["T_WHITESPACE","\n        ",188],"}",["T_WHITESPACE","\n    ",189],"}",["T_WHITESPACE","\n\n    ",190],["T_DOC_COMMENT","\/**\n     * Get data array for building attribute filter items\n     *\n     * @return array\n     *\n     * @SuppressWarnings(PHPMD.NPathComplexity)\n     *\/",192],["T_WHITESPACE","\n    ",198],["T_PROTECTED","protected",199],["T_WHITESPACE"," ",199],["T_FUNCTION","function",199],["T_WHITESPACE"," ",199],["T_STRING","_getItemsData",199],"(",")",["T_WHITESPACE","\n    ",199],"{",["T_WHITESPACE","\n        ",200],["T_VARIABLE","$attribute",201],["T_WHITESPACE"," ",201],"=",["T_WHITESPACE"," ",201],["T_VARIABLE","$this",201],["T_OBJECT_OPERATOR","->",201],["T_STRING","getAttributeModel",201],"(",")",";",["T_WHITESPACE","\n        ",201],["T_VARIABLE","$this",202],["T_OBJECT_OPERATOR","->",202],["T_STRING","_requestVar",202],["T_WHITESPACE"," ",202],"=",["T_WHITESPACE"," ",202],["T_VARIABLE","$attribute",202],["T_OBJECT_OPERATOR","->",202],["T_STRING","getAttributeCode",202],"(",")",";",["T_WHITESPACE","\n\n        ",202],["T_DOC_COMMENT","\/** @var \\Magento\\CatalogSearch\\Model\\ResourceModel\\Fulltext\\Collection $productCollection *\/",204],["T_WHITESPACE","\n        ",204],["T_VARIABLE","$productCollection",205],["T_WHITESPACE"," ",205],"=",["T_WHITESPACE"," ",205],["T_VARIABLE","$this",205],["T_OBJECT_OPERATOR","->",205],["T_STRING","getLayer",205],"(",")",["T_OBJECT_OPERATOR","->",205],["T_STRING","getProductCollection",205],"(",")",";",["T_WHITESPACE","\n        ",205],["T_VARIABLE","$facets",206],["T_WHITESPACE"," ",206],"=",["T_WHITESPACE"," ",206],["T_VARIABLE","$productCollection",206],["T_OBJECT_OPERATOR","->",206],["T_STRING","getFacetedData",206],"(",["T_VARIABLE","$attribute",206],["T_OBJECT_OPERATOR","->",206],["T_STRING","getAttributeCode",206],"(",")",")",";",["T_WHITESPACE","\n\n        ",206],["T_VARIABLE","$data",208],["T_WHITESPACE"," ",208],"=",["T_WHITESPACE"," ",208],"[","]",";",["T_WHITESPACE","\n        ",208],["T_IF","if",209],["T_WHITESPACE"," ",209],"(",["T_STRING","count",209],"(",["T_VARIABLE","$facets",209],")",["T_WHITESPACE"," ",209],">",["T_WHITESPACE"," ",209],["T_LNUMBER","1",209],")",["T_WHITESPACE"," ",209],"{",["T_WHITESPACE"," ",209],["T_COMMENT","\/\/ two range minimum\n",209],["T_WHITESPACE","            ",210],["T_FOREACH","foreach",210],["T_WHITESPACE"," ",210],"(",["T_VARIABLE","$facets",210],["T_WHITESPACE"," ",210],["T_AS","as",210],["T_WHITESPACE"," ",210],["T_VARIABLE","$key",210],["T_WHITESPACE"," ",210],["T_DOUBLE_ARROW","=>",210],["T_WHITESPACE"," ",210],["T_VARIABLE","$aggregation",210],")",["T_WHITESPACE"," ",210],"{",["T_WHITESPACE","\n                ",210],["T_VARIABLE","$count",211],["T_WHITESPACE"," ",211],"=",["T_WHITESPACE"," ",211],["T_VARIABLE","$aggregation",211],"[",["T_CONSTANT_ENCAPSED_STRING","'count'",211],"]",";",["T_WHITESPACE","\n                ",211],["T_IF","if",212],["T_WHITESPACE"," ",212],"(",["T_STRING","strpos",212],"(",["T_VARIABLE","$key",212],",",["T_WHITESPACE"," ",212],["T_CONSTANT_ENCAPSED_STRING","'_'",212],")",["T_WHITESPACE"," ",212],["T_IS_IDENTICAL","===",212],["T_WHITESPACE"," ",212],["T_STRING","false",212],")",["T_WHITESPACE"," ",212],"{",["T_WHITESPACE","\n                    ",212],["T_CONTINUE","continue",213],";",["T_WHITESPACE","\n                ",213],"}",["T_WHITESPACE","\n                ",214],["T_VARIABLE","$data",215],"[","]",["T_WHITESPACE"," ",215],"=",["T_WHITESPACE"," ",215],["T_VARIABLE","$this",215],["T_OBJECT_OPERATOR","->",215],["T_STRING","prepareData",215],"(",["T_VARIABLE","$key",215],",",["T_WHITESPACE"," ",215],["T_VARIABLE","$count",215],",",["T_WHITESPACE"," ",215],["T_VARIABLE","$data",215],")",";",["T_WHITESPACE","\n            ",215],"}",["T_WHITESPACE","\n        ",216],"}",["T_WHITESPACE","\n\n        ",217],["T_RETURN","return",219],["T_WHITESPACE"," ",219],["T_VARIABLE","$data",219],";",["T_WHITESPACE","\n    ",219],"}",["T_WHITESPACE","\n\n    ",220],["T_DOC_COMMENT","\/**\n     * @param float $from\n     * @return float\n     *\/",222],["T_WHITESPACE","\n    ",225],["T_PROTECTED","protected",226],["T_WHITESPACE"," ",226],["T_FUNCTION","function",226],["T_WHITESPACE"," ",226],["T_STRING","getTo",226],"(",["T_VARIABLE","$from",226],")",["T_WHITESPACE","\n    ",226],"{",["T_WHITESPACE","\n        ",227],["T_VARIABLE","$to",228],["T_WHITESPACE"," ",228],"=",["T_WHITESPACE"," ",228],["T_CONSTANT_ENCAPSED_STRING","''",228],";",["T_WHITESPACE","\n        ",228],["T_VARIABLE","$interval",229],["T_WHITESPACE"," ",229],"=",["T_WHITESPACE"," ",229],["T_VARIABLE","$this",229],["T_OBJECT_OPERATOR","->",229],["T_STRING","dataProvider",229],["T_OBJECT_OPERATOR","->",229],["T_STRING","getInterval",229],"(",")",";",["T_WHITESPACE","\n        ",229],["T_IF","if",230],["T_WHITESPACE"," ",230],"(",["T_VARIABLE","$interval",230],["T_WHITESPACE"," ",230],["T_BOOLEAN_AND","&&",230],["T_WHITESPACE"," ",230],["T_STRING","is_numeric",230],"(",["T_VARIABLE","$interval",230],"[",["T_LNUMBER","1",230],"]",")",["T_WHITESPACE"," ",230],["T_BOOLEAN_AND","&&",230],["T_WHITESPACE"," ",230],["T_VARIABLE","$interval",230],"[",["T_LNUMBER","1",230],"]",["T_WHITESPACE"," ",230],">",["T_WHITESPACE"," ",230],["T_VARIABLE","$from",230],")",["T_WHITESPACE"," ",230],"{",["T_WHITESPACE","\n            ",230],["T_VARIABLE","$to",231],["T_WHITESPACE"," ",231],"=",["T_WHITESPACE"," ",231],["T_VARIABLE","$interval",231],"[",["T_LNUMBER","1",231],"]",";",["T_WHITESPACE","\n        ",231],"}",["T_WHITESPACE","\n        ",232],["T_RETURN","return",233],["T_WHITESPACE"," ",233],["T_VARIABLE","$to",233],";",["T_WHITESPACE","\n    ",233],"}",["T_WHITESPACE","\n\n    ",234],["T_DOC_COMMENT","\/**\n     * @param float $from\n     * @return float\n     *\/",236],["T_WHITESPACE","\n    ",239],["T_PROTECTED","protected",240],["T_WHITESPACE"," ",240],["T_FUNCTION","function",240],["T_WHITESPACE"," ",240],["T_STRING","getFrom",240],"(",["T_VARIABLE","$from",240],")",["T_WHITESPACE","\n    ",240],"{",["T_WHITESPACE","\n        ",241],["T_VARIABLE","$to",242],["T_WHITESPACE"," ",242],"=",["T_WHITESPACE"," ",242],["T_CONSTANT_ENCAPSED_STRING","''",242],";",["T_WHITESPACE","\n        ",242],["T_VARIABLE","$interval",243],["T_WHITESPACE"," ",243],"=",["T_WHITESPACE"," ",243],["T_VARIABLE","$this",243],["T_OBJECT_OPERATOR","->",243],["T_STRING","dataProvider",243],["T_OBJECT_OPERATOR","->",243],["T_STRING","getInterval",243],"(",")",";",["T_WHITESPACE","\n        ",243],["T_IF","if",244],["T_WHITESPACE"," ",244],"(",["T_VARIABLE","$interval",244],["T_WHITESPACE"," ",244],["T_BOOLEAN_AND","&&",244],["T_WHITESPACE"," ",244],["T_STRING","is_numeric",244],"(",["T_VARIABLE","$interval",244],"[",["T_LNUMBER","0",244],"]",")",["T_WHITESPACE"," ",244],["T_BOOLEAN_AND","&&",244],["T_WHITESPACE"," ",244],["T_VARIABLE","$interval",244],"[",["T_LNUMBER","0",244],"]",["T_WHITESPACE"," ",244],"<",["T_WHITESPACE"," ",244],["T_VARIABLE","$from",244],")",["T_WHITESPACE"," ",244],"{",["T_WHITESPACE","\n            ",244],["T_VARIABLE","$to",245],["T_WHITESPACE"," ",245],"=",["T_WHITESPACE"," ",245],["T_VARIABLE","$interval",245],"[",["T_LNUMBER","0",245],"]",";",["T_WHITESPACE","\n        ",245],"}",["T_WHITESPACE","\n        ",246],["T_RETURN","return",247],["T_WHITESPACE"," ",247],["T_VARIABLE","$to",247],";",["T_WHITESPACE","\n    ",247],"}",["T_WHITESPACE","\n\n    ",248],["T_DOC_COMMENT","\/**\n     * @param string $key\n     * @param int $count\n     * @return array\n     *\/",250],["T_WHITESPACE","\n    ",254],["T_PRIVATE","private",255],["T_WHITESPACE"," ",255],["T_FUNCTION","function",255],["T_WHITESPACE"," ",255],["T_STRING","prepareData",255],"(",["T_VARIABLE","$key",255],",",["T_WHITESPACE"," ",255],["T_VARIABLE","$count",255],")",["T_WHITESPACE","\n    ",255],"{",["T_WHITESPACE","\n        ",256],["T_LIST","list",257],"(",["T_VARIABLE","$from",257],",",["T_WHITESPACE"," ",257],["T_VARIABLE","$to",257],")",["T_WHITESPACE"," ",257],"=",["T_WHITESPACE"," ",257],["T_STRING","explode",257],"(",["T_CONSTANT_ENCAPSED_STRING","'_'",257],",",["T_WHITESPACE"," ",257],["T_VARIABLE","$key",257],")",";",["T_WHITESPACE","\n        ",257],["T_IF","if",258],["T_WHITESPACE"," ",258],"(",["T_VARIABLE","$from",258],["T_WHITESPACE"," ",258],["T_IS_EQUAL","==",258],["T_WHITESPACE"," ",258],["T_CONSTANT_ENCAPSED_STRING","'*'",258],")",["T_WHITESPACE"," ",258],"{",["T_WHITESPACE","\n            ",258],["T_VARIABLE","$from",259],["T_WHITESPACE"," ",259],"=",["T_WHITESPACE"," ",259],["T_VARIABLE","$this",259],["T_OBJECT_OPERATOR","->",259],["T_STRING","getFrom",259],"(",["T_VARIABLE","$to",259],")",";",["T_WHITESPACE","\n        ",259],"}",["T_WHITESPACE","\n        ",260],["T_IF","if",261],["T_WHITESPACE"," ",261],"(",["T_VARIABLE","$to",261],["T_WHITESPACE"," ",261],["T_IS_EQUAL","==",261],["T_WHITESPACE"," ",261],["T_CONSTANT_ENCAPSED_STRING","'*'",261],")",["T_WHITESPACE"," ",261],"{",["T_WHITESPACE","\n            ",261],["T_VARIABLE","$to",262],["T_WHITESPACE"," ",262],"=",["T_WHITESPACE"," ",262],["T_VARIABLE","$this",262],["T_OBJECT_OPERATOR","->",262],["T_STRING","getTo",262],"(",["T_VARIABLE","$to",262],")",";",["T_WHITESPACE","\n        ",262],"}",["T_WHITESPACE","\n        ",263],["T_VARIABLE","$label",264],["T_WHITESPACE"," ",264],"=",["T_WHITESPACE"," ",264],["T_VARIABLE","$this",264],["T_OBJECT_OPERATOR","->",264],["T_STRING","_renderRangeLabel",264],"(",["T_WHITESPACE","\n            ",264],["T_EMPTY","empty",265],"(",["T_VARIABLE","$from",265],")",["T_WHITESPACE"," ",265],"?",["T_WHITESPACE"," ",265],["T_LNUMBER","0",265],["T_WHITESPACE"," ",265],":",["T_WHITESPACE"," ",265],["T_VARIABLE","$from",265],["T_WHITESPACE"," ",265],"*",["T_WHITESPACE"," ",265],["T_VARIABLE","$this",265],["T_OBJECT_OPERATOR","->",265],["T_STRING","getCurrencyRate",265],"(",")",",",["T_WHITESPACE","\n            ",265],["T_EMPTY","empty",266],"(",["T_VARIABLE","$to",266],")",["T_WHITESPACE"," ",266],"?",["T_WHITESPACE"," ",266],["T_VARIABLE","$to",266],["T_WHITESPACE"," ",266],":",["T_WHITESPACE"," ",266],["T_VARIABLE","$to",266],["T_WHITESPACE"," ",266],"*",["T_WHITESPACE"," ",266],["T_VARIABLE","$this",266],["T_OBJECT_OPERATOR","->",266],["T_STRING","getCurrencyRate",266],"(",")",["T_WHITESPACE","\n        ",266],")",";",["T_WHITESPACE","\n        ",267],["T_VARIABLE","$value",268],["T_WHITESPACE"," ",268],"=",["T_WHITESPACE"," ",268],["T_VARIABLE","$from",268],["T_WHITESPACE"," ",268],".",["T_WHITESPACE"," ",268],["T_CONSTANT_ENCAPSED_STRING","'-'",268],["T_WHITESPACE"," ",268],".",["T_WHITESPACE"," ",268],["T_VARIABLE","$to",268],["T_WHITESPACE"," ",268],".",["T_WHITESPACE"," ",268],["T_VARIABLE","$this",268],["T_OBJECT_OPERATOR","->",268],["T_STRING","dataProvider",268],["T_OBJECT_OPERATOR","->",268],["T_STRING","getAdditionalRequestData",268],"(",")",";",["T_WHITESPACE","\n\n        ",268],["T_VARIABLE","$data",270],["T_WHITESPACE"," ",270],"=",["T_WHITESPACE"," ",270],"[",["T_WHITESPACE","\n            ",270],["T_CONSTANT_ENCAPSED_STRING","'label'",271],["T_WHITESPACE"," ",271],["T_DOUBLE_ARROW","=>",271],["T_WHITESPACE"," ",271],["T_VARIABLE","$label",271],",",["T_WHITESPACE","\n            ",271],["T_CONSTANT_ENCAPSED_STRING","'value'",272],["T_WHITESPACE"," ",272],["T_DOUBLE_ARROW","=>",272],["T_WHITESPACE"," ",272],["T_VARIABLE","$value",272],",",["T_WHITESPACE","\n            ",272],["T_CONSTANT_ENCAPSED_STRING","'count'",273],["T_WHITESPACE"," ",273],["T_DOUBLE_ARROW","=>",273],["T_WHITESPACE"," ",273],["T_VARIABLE","$count",273],",",["T_WHITESPACE","\n            ",273],["T_CONSTANT_ENCAPSED_STRING","'from'",274],["T_WHITESPACE"," ",274],["T_DOUBLE_ARROW","=>",274],["T_WHITESPACE"," ",274],["T_VARIABLE","$from",274],",",["T_WHITESPACE","\n            ",274],["T_CONSTANT_ENCAPSED_STRING","'to'",275],["T_WHITESPACE"," ",275],["T_DOUBLE_ARROW","=>",275],["T_WHITESPACE"," ",275],["T_VARIABLE","$to",275],",",["T_WHITESPACE","\n        ",275],"]",";",["T_WHITESPACE","\n\n        ",276],["T_RETURN","return",278],["T_WHITESPACE"," ",278],["T_VARIABLE","$data",278],";",["T_WHITESPACE","\n    ",278],"}",["T_WHITESPACE","\n",279],"}",["T_WHITESPACE","\n",280]]
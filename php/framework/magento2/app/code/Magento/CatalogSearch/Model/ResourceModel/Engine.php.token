[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Copyright \u00c2\u00a9 2013-2017 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n *\/",2],["T_WHITESPACE","\n",5],["T_NAMESPACE","namespace",6],["T_WHITESPACE"," ",6],["T_STRING","Magento",6],["T_NS_SEPARATOR","\\",6],["T_STRING","CatalogSearch",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Model",6],["T_NS_SEPARATOR","\\",6],["T_STRING","ResourceModel",6],";",["T_WHITESPACE","\n\n",6],["T_DOC_COMMENT","\/**\n * CatalogSearch Fulltext Index Engine resource model\n *\n * @author      Magento Core Team <core@magentocommerce.com>\n *\/",8],["T_WHITESPACE","\n",12],["T_CLASS","class",13],["T_WHITESPACE"," ",13],["T_STRING","Engine",13],["T_WHITESPACE"," ",13],["T_IMPLEMENTS","implements",13],["T_WHITESPACE"," ",13],["T_STRING","EngineInterface",13],["T_WHITESPACE","\n",13],"{",["T_WHITESPACE","\n    ",14],["T_CONST","const",15],["T_WHITESPACE"," ",15],["T_STRING","ATTRIBUTE_PREFIX",15],["T_WHITESPACE"," ",15],"=",["T_WHITESPACE"," ",15],["T_CONSTANT_ENCAPSED_STRING","'attr_'",15],";",["T_WHITESPACE","\n\n    ",15],["T_DOC_COMMENT","\/**\n     * Scope identifier\n     *\/",17],["T_WHITESPACE","\n    ",19],["T_CONST","const",20],["T_WHITESPACE"," ",20],["T_STRING","SCOPE_FIELD_NAME",20],["T_WHITESPACE"," ",20],"=",["T_WHITESPACE"," ",20],["T_CONSTANT_ENCAPSED_STRING","'scope'",20],";",["T_WHITESPACE","\n\n    ",20],["T_DOC_COMMENT","\/**\n     * Catalog product visibility\n     *\n     * @var \\Magento\\Catalog\\Model\\Product\\Visibility\n     *\/",22],["T_WHITESPACE","\n    ",26],["T_PROTECTED","protected",27],["T_WHITESPACE"," ",27],["T_VARIABLE","$catalogProductVisibility",27],";",["T_WHITESPACE","\n\n    ",27],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Framework\\Indexer\\ScopeResolver\\IndexScopeResolver\n     *\/",29],["T_WHITESPACE","\n    ",31],["T_PRIVATE","private",32],["T_WHITESPACE"," ",32],["T_VARIABLE","$indexScopeResolver",32],";",["T_WHITESPACE","\n\n    ",32],["T_DOC_COMMENT","\/**\n     * Construct\n     *\n     * @param \\Magento\\Catalog\\Model\\Product\\Visibility $catalogProductVisibility\n     * @param \\Magento\\Framework\\Indexer\\ScopeResolver\\IndexScopeResolver $indexScopeResolver\n     *\/",34],["T_WHITESPACE","\n    ",39],["T_PUBLIC","public",40],["T_WHITESPACE"," ",40],["T_FUNCTION","function",40],["T_WHITESPACE"," ",40],["T_STRING","__construct",40],"(",["T_WHITESPACE","\n        ",40],["T_NS_SEPARATOR","\\",41],["T_STRING","Magento",41],["T_NS_SEPARATOR","\\",41],["T_STRING","Catalog",41],["T_NS_SEPARATOR","\\",41],["T_STRING","Model",41],["T_NS_SEPARATOR","\\",41],["T_STRING","Product",41],["T_NS_SEPARATOR","\\",41],["T_STRING","Visibility",41],["T_WHITESPACE"," ",41],["T_VARIABLE","$catalogProductVisibility",41],",",["T_WHITESPACE","\n        ",41],["T_NS_SEPARATOR","\\",42],["T_STRING","Magento",42],["T_NS_SEPARATOR","\\",42],["T_STRING","Framework",42],["T_NS_SEPARATOR","\\",42],["T_STRING","Indexer",42],["T_NS_SEPARATOR","\\",42],["T_STRING","ScopeResolver",42],["T_NS_SEPARATOR","\\",42],["T_STRING","IndexScopeResolver",42],["T_WHITESPACE"," ",42],["T_VARIABLE","$indexScopeResolver",42],["T_WHITESPACE","\n    ",42],")",["T_WHITESPACE"," ",43],"{",["T_WHITESPACE","\n        ",43],["T_VARIABLE","$this",44],["T_OBJECT_OPERATOR","->",44],["T_STRING","catalogProductVisibility",44],["T_WHITESPACE"," ",44],"=",["T_WHITESPACE"," ",44],["T_VARIABLE","$catalogProductVisibility",44],";",["T_WHITESPACE","\n        ",44],["T_VARIABLE","$this",45],["T_OBJECT_OPERATOR","->",45],["T_STRING","indexScopeResolver",45],["T_WHITESPACE"," ",45],"=",["T_WHITESPACE"," ",45],["T_VARIABLE","$indexScopeResolver",45],";",["T_WHITESPACE","\n    ",45],"}",["T_WHITESPACE","\n\n    ",46],["T_DOC_COMMENT","\/**\n     * Retrieve allowed visibility values for current engine\n     *\n     * @return int[]\n     *\/",48],["T_WHITESPACE","\n    ",52],["T_PUBLIC","public",53],["T_WHITESPACE"," ",53],["T_FUNCTION","function",53],["T_WHITESPACE"," ",53],["T_STRING","getAllowedVisibility",53],"(",")",["T_WHITESPACE","\n    ",53],"{",["T_WHITESPACE","\n        ",54],["T_RETURN","return",55],["T_WHITESPACE"," ",55],["T_VARIABLE","$this",55],["T_OBJECT_OPERATOR","->",55],["T_STRING","catalogProductVisibility",55],["T_OBJECT_OPERATOR","->",55],["T_STRING","getVisibleInSiteIds",55],"(",")",";",["T_WHITESPACE","\n    ",55],"}",["T_WHITESPACE","\n\n    ",56],["T_DOC_COMMENT","\/**\n     * Define if current search engine supports advanced index\n     *\n     * @return bool\n     *\/",58],["T_WHITESPACE","\n    ",62],["T_PUBLIC","public",63],["T_WHITESPACE"," ",63],["T_FUNCTION","function",63],["T_WHITESPACE"," ",63],["T_STRING","allowAdvancedIndex",63],"(",")",["T_WHITESPACE","\n    ",63],"{",["T_WHITESPACE","\n        ",64],["T_RETURN","return",65],["T_WHITESPACE"," ",65],["T_STRING","true",65],";",["T_WHITESPACE","\n    ",65],"}",["T_WHITESPACE","\n\n    ",66],["T_DOC_COMMENT","\/**\n     * Is Attribute Filterable as Term\n     *\n     * @param \\Magento\\Catalog\\Model\\Entity\\Attribute $attribute\n     * @return bool\n     *\/",68],["T_WHITESPACE","\n    ",73],["T_PRIVATE","private",74],["T_WHITESPACE"," ",74],["T_FUNCTION","function",74],["T_WHITESPACE"," ",74],["T_STRING","isTermFilterableAttribute",74],"(",["T_VARIABLE","$attribute",74],")",["T_WHITESPACE","\n    ",74],"{",["T_WHITESPACE","\n        ",75],["T_RETURN","return",76],["T_WHITESPACE"," ",76],"(",["T_VARIABLE","$attribute",76],["T_OBJECT_OPERATOR","->",76],["T_STRING","getIsVisibleInAdvancedSearch",76],"(",")",["T_WHITESPACE","\n            ",76],["T_BOOLEAN_OR","||",77],["T_WHITESPACE"," ",77],["T_VARIABLE","$attribute",77],["T_OBJECT_OPERATOR","->",77],["T_STRING","getIsFilterable",77],"(",")",["T_WHITESPACE","\n            ",77],["T_BOOLEAN_OR","||",78],["T_WHITESPACE"," ",78],["T_VARIABLE","$attribute",78],["T_OBJECT_OPERATOR","->",78],["T_STRING","getIsFilterableInSearch",78],"(",")",")",["T_WHITESPACE","\n        ",78],["T_BOOLEAN_AND","&&",79],["T_WHITESPACE"," ",79],["T_STRING","in_array",79],"(",["T_VARIABLE","$attribute",79],["T_OBJECT_OPERATOR","->",79],["T_STRING","getFrontendInput",79],"(",")",",",["T_WHITESPACE"," ",79],"[",["T_CONSTANT_ENCAPSED_STRING","'select'",79],",",["T_WHITESPACE"," ",79],["T_CONSTANT_ENCAPSED_STRING","'multiselect'",79],"]",")",";",["T_WHITESPACE","\n    ",79],"}",["T_WHITESPACE","\n\n    ",80],["T_DOC_COMMENT","\/**\n     * @inheritdoc\n     *\/",82],["T_WHITESPACE","\n    ",84],["T_PUBLIC","public",85],["T_WHITESPACE"," ",85],["T_FUNCTION","function",85],["T_WHITESPACE"," ",85],["T_STRING","processAttributeValue",85],"(",["T_VARIABLE","$attribute",85],",",["T_WHITESPACE"," ",85],["T_VARIABLE","$value",85],")",["T_WHITESPACE","\n    ",85],"{",["T_WHITESPACE","\n        ",86],["T_VARIABLE","$result",87],["T_WHITESPACE"," ",87],"=",["T_WHITESPACE"," ",87],["T_STRING","false",87],";",["T_WHITESPACE","\n        ",87],["T_IF","if",88],["T_WHITESPACE"," ",88],"(",["T_VARIABLE","$attribute",88],["T_OBJECT_OPERATOR","->",88],["T_STRING","getIsSearchable",88],"(",")",["T_WHITESPACE","\n            ",88],["T_BOOLEAN_AND","&&",89],["T_WHITESPACE"," ",89],["T_STRING","in_array",89],"(",["T_VARIABLE","$attribute",89],["T_OBJECT_OPERATOR","->",89],["T_STRING","getFrontendInput",89],"(",")",",",["T_WHITESPACE"," ",89],"[",["T_CONSTANT_ENCAPSED_STRING","'text'",89],",",["T_WHITESPACE"," ",89],["T_CONSTANT_ENCAPSED_STRING","'textarea'",89],"]",")",["T_WHITESPACE","\n        ",89],")",["T_WHITESPACE"," ",90],"{",["T_WHITESPACE","\n            ",90],["T_VARIABLE","$result",91],["T_WHITESPACE"," ",91],"=",["T_WHITESPACE"," ",91],["T_VARIABLE","$value",91],";",["T_WHITESPACE","\n        ",91],"}",["T_WHITESPACE"," ",92],["T_ELSEIF","elseif",92],["T_WHITESPACE"," ",92],"(",["T_VARIABLE","$this",92],["T_OBJECT_OPERATOR","->",92],["T_STRING","isTermFilterableAttribute",92],"(",["T_VARIABLE","$attribute",92],")",")",["T_WHITESPACE"," ",92],"{",["T_WHITESPACE","\n            ",92],["T_VARIABLE","$result",93],["T_WHITESPACE"," ",93],"=",["T_WHITESPACE"," ",93],["T_CONSTANT_ENCAPSED_STRING","''",93],";",["T_WHITESPACE","\n        ",93],"}",["T_WHITESPACE","\n\n        ",94],["T_RETURN","return",96],["T_WHITESPACE"," ",96],["T_VARIABLE","$result",96],";",["T_WHITESPACE","\n    ",96],"}",["T_WHITESPACE","\n\n    ",97],["T_DOC_COMMENT","\/**\n     * Prepare index array as a string glued by separator\n     * Support 2 level array gluing\n     *\n     * @param array $index\n     * @param string $separator\n     * @return string\n     *\/",99],["T_WHITESPACE","\n    ",106],["T_PUBLIC","public",107],["T_WHITESPACE"," ",107],["T_FUNCTION","function",107],["T_WHITESPACE"," ",107],["T_STRING","prepareEntityIndex",107],"(",["T_VARIABLE","$index",107],",",["T_WHITESPACE"," ",107],["T_VARIABLE","$separator",107],["T_WHITESPACE"," ",107],"=",["T_WHITESPACE"," ",107],["T_CONSTANT_ENCAPSED_STRING","' '",107],")",["T_WHITESPACE","\n    ",107],"{",["T_WHITESPACE","\n        ",108],["T_VARIABLE","$indexData",109],["T_WHITESPACE"," ",109],"=",["T_WHITESPACE"," ",109],"[","]",";",["T_WHITESPACE","\n        ",109],["T_FOREACH","foreach",110],["T_WHITESPACE"," ",110],"(",["T_VARIABLE","$index",110],["T_WHITESPACE"," ",110],["T_AS","as",110],["T_WHITESPACE"," ",110],["T_VARIABLE","$attributeId",110],["T_WHITESPACE"," ",110],["T_DOUBLE_ARROW","=>",110],["T_WHITESPACE"," ",110],["T_VARIABLE","$value",110],")",["T_WHITESPACE"," ",110],"{",["T_WHITESPACE","\n            ",110],["T_VARIABLE","$indexData",111],"[",["T_VARIABLE","$attributeId",111],"]",["T_WHITESPACE"," ",111],"=",["T_WHITESPACE"," ",111],["T_STRING","is_array",111],"(",["T_VARIABLE","$value",111],")",["T_WHITESPACE"," ",111],"?",["T_WHITESPACE"," ",111],["T_STRING","implode",111],"(",["T_VARIABLE","$separator",111],",",["T_WHITESPACE"," ",111],["T_VARIABLE","$value",111],")",["T_WHITESPACE"," ",111],":",["T_WHITESPACE"," ",111],["T_VARIABLE","$value",111],";",["T_WHITESPACE","\n        ",111],"}",["T_WHITESPACE","\n        ",112],["T_RETURN","return",113],["T_WHITESPACE"," ",113],["T_VARIABLE","$indexData",113],";",["T_WHITESPACE","\n    ",113],"}",["T_WHITESPACE","\n\n    ",114],["T_DOC_COMMENT","\/**\n     * @inheritdoc\n     *\/",116],["T_WHITESPACE","\n    ",118],["T_PUBLIC","public",119],["T_WHITESPACE"," ",119],["T_FUNCTION","function",119],["T_WHITESPACE"," ",119],["T_STRING","isAvailable",119],"(",")",["T_WHITESPACE","\n    ",119],"{",["T_WHITESPACE","\n        ",120],["T_RETURN","return",121],["T_WHITESPACE"," ",121],["T_STRING","true",121],";",["T_WHITESPACE","\n    ",121],"}",["T_WHITESPACE","\n",122],"}",["T_WHITESPACE","\n",123]]
[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Copyright \u00c2\u00a9 2013-2017 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n *\/",2],["T_WHITESPACE","\n",5],["T_NAMESPACE","namespace",6],["T_WHITESPACE"," ",6],["T_STRING","Magento",6],["T_NS_SEPARATOR","\\",6],["T_STRING","CatalogSearch",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Model",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Search",6],";",["T_WHITESPACE","\n\n",6],["T_USE","use",8],["T_WHITESPACE"," ",8],["T_STRING","Magento",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Catalog",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Api",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Data",8],["T_NS_SEPARATOR","\\",8],["T_STRING","EavAttributeInterface",8],";",["T_WHITESPACE","\n",8],["T_USE","use",9],["T_WHITESPACE"," ",9],["T_STRING","Magento",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Catalog",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Model",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Entity",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Attribute",9],";",["T_WHITESPACE","\n",9],["T_USE","use",10],["T_WHITESPACE"," ",10],["T_STRING","Magento",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Catalog",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Model",10],["T_NS_SEPARATOR","\\",10],["T_STRING","ResourceModel",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Product",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Attribute",10],["T_NS_SEPARATOR","\\",10],["T_STRING","CollectionFactory",10],";",["T_WHITESPACE","\n",10],["T_USE","use",11],["T_WHITESPACE"," ",11],["T_STRING","Magento",11],["T_NS_SEPARATOR","\\",11],["T_STRING","CatalogSearch",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Model",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Search",11],["T_NS_SEPARATOR","\\",11],["T_STRING","RequestGenerator",11],["T_NS_SEPARATOR","\\",11],["T_STRING","GeneratorResolver",11],";",["T_WHITESPACE","\n",11],["T_USE","use",12],["T_WHITESPACE"," ",12],["T_STRING","Magento",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Framework",12],["T_NS_SEPARATOR","\\",12],["T_STRING","App",12],["T_NS_SEPARATOR","\\",12],["T_STRING","ObjectManager",12],";",["T_WHITESPACE","\n",12],["T_USE","use",13],["T_WHITESPACE"," ",13],["T_STRING","Magento",13],["T_NS_SEPARATOR","\\",13],["T_STRING","Framework",13],["T_NS_SEPARATOR","\\",13],["T_STRING","Search",13],["T_NS_SEPARATOR","\\",13],["T_STRING","Request",13],["T_NS_SEPARATOR","\\",13],["T_STRING","FilterInterface",13],";",["T_WHITESPACE","\n",13],["T_USE","use",14],["T_WHITESPACE"," ",14],["T_STRING","Magento",14],["T_NS_SEPARATOR","\\",14],["T_STRING","Framework",14],["T_NS_SEPARATOR","\\",14],["T_STRING","Search",14],["T_NS_SEPARATOR","\\",14],["T_STRING","Request",14],["T_NS_SEPARATOR","\\",14],["T_STRING","QueryInterface",14],";",["T_WHITESPACE","\n\n",14],["T_CLASS","class",16],["T_WHITESPACE"," ",16],["T_STRING","RequestGenerator",16],["T_WHITESPACE","\n",16],"{",["T_WHITESPACE","\n    ",17],["T_DOC_COMMENT","\/** Filter name suffix *\/",18],["T_WHITESPACE","\n    ",18],["T_CONST","const",19],["T_WHITESPACE"," ",19],["T_STRING","FILTER_SUFFIX",19],["T_WHITESPACE"," ",19],"=",["T_WHITESPACE"," ",19],["T_CONSTANT_ENCAPSED_STRING","'_filter'",19],";",["T_WHITESPACE","\n\n    ",19],["T_DOC_COMMENT","\/** Bucket name suffix *\/",21],["T_WHITESPACE","\n    ",21],["T_CONST","const",22],["T_WHITESPACE"," ",22],["T_STRING","BUCKET_SUFFIX",22],["T_WHITESPACE"," ",22],"=",["T_WHITESPACE"," ",22],["T_CONSTANT_ENCAPSED_STRING","'_bucket'",22],";",["T_WHITESPACE","\n\n    ",22],["T_DOC_COMMENT","\/**\n     * @var CollectionFactory\n     *\/",24],["T_WHITESPACE","\n    ",26],["T_PRIVATE","private",27],["T_WHITESPACE"," ",27],["T_VARIABLE","$productAttributeCollectionFactory",27],";",["T_WHITESPACE","\n\n    ",27],["T_DOC_COMMENT","\/**\n     * @var GeneratorResolver\n     *\/",29],["T_WHITESPACE","\n    ",31],["T_PRIVATE","private",32],["T_WHITESPACE"," ",32],["T_VARIABLE","$generatorResolver",32],";",["T_WHITESPACE","\n\n    ",32],["T_DOC_COMMENT","\/**\n     * @param CollectionFactory $productAttributeCollectionFactory\n     * @param GeneratorResolver $generatorResolver\n     *\/",34],["T_WHITESPACE","\n    ",37],["T_PUBLIC","public",38],["T_WHITESPACE"," ",38],["T_FUNCTION","function",38],["T_WHITESPACE"," ",38],["T_STRING","__construct",38],"(",["T_WHITESPACE","\n        ",38],["T_STRING","CollectionFactory",39],["T_WHITESPACE"," ",39],["T_VARIABLE","$productAttributeCollectionFactory",39],",",["T_WHITESPACE","\n        ",39],["T_STRING","GeneratorResolver",40],["T_WHITESPACE"," ",40],["T_VARIABLE","$generatorResolver",40],["T_WHITESPACE"," ",40],"=",["T_WHITESPACE"," ",40],["T_STRING","null",40],["T_WHITESPACE","\n    ",40],")",["T_WHITESPACE"," ",41],"{",["T_WHITESPACE","\n        ",41],["T_VARIABLE","$this",42],["T_OBJECT_OPERATOR","->",42],["T_STRING","productAttributeCollectionFactory",42],["T_WHITESPACE"," ",42],"=",["T_WHITESPACE"," ",42],["T_VARIABLE","$productAttributeCollectionFactory",42],";",["T_WHITESPACE","\n        ",42],["T_VARIABLE","$this",43],["T_OBJECT_OPERATOR","->",43],["T_STRING","generatorResolver",43],["T_WHITESPACE"," ",43],"=",["T_WHITESPACE"," ",43],["T_VARIABLE","$generatorResolver",43],["T_WHITESPACE","\n            ",43],"?",":",["T_WHITESPACE"," ",44],["T_STRING","ObjectManager",44],["T_DOUBLE_COLON","::",44],["T_STRING","getInstance",44],"(",")",["T_OBJECT_OPERATOR","->",44],["T_STRING","get",44],"(",["T_STRING","GeneratorResolver",44],["T_DOUBLE_COLON","::",44],["T_CLASS","class",44],")",";",["T_WHITESPACE","\n    ",44],"}",["T_WHITESPACE","\n\n    ",45],["T_DOC_COMMENT","\/**\n     * Generate dynamic fields requests\n     *\n     * @return array\n     *\/",47],["T_WHITESPACE","\n    ",51],["T_PUBLIC","public",52],["T_WHITESPACE"," ",52],["T_FUNCTION","function",52],["T_WHITESPACE"," ",52],["T_STRING","generate",52],"(",")",["T_WHITESPACE","\n    ",52],"{",["T_WHITESPACE","\n        ",53],["T_VARIABLE","$requests",54],["T_WHITESPACE"," ",54],"=",["T_WHITESPACE"," ",54],"[","]",";",["T_WHITESPACE","\n        ",54],["T_VARIABLE","$requests",55],"[",["T_CONSTANT_ENCAPSED_STRING","'catalog_view_container'",55],"]",["T_WHITESPACE"," ",55],"=",["T_WHITESPACE","\n            ",55],["T_VARIABLE","$this",56],["T_OBJECT_OPERATOR","->",56],["T_STRING","generateRequest",56],"(",["T_STRING","EavAttributeInterface",56],["T_DOUBLE_COLON","::",56],["T_STRING","IS_FILTERABLE",56],",",["T_WHITESPACE"," ",56],["T_CONSTANT_ENCAPSED_STRING","'catalog_view_container'",56],",",["T_WHITESPACE"," ",56],["T_STRING","false",56],")",";",["T_WHITESPACE","\n        ",56],["T_VARIABLE","$requests",57],"[",["T_CONSTANT_ENCAPSED_STRING","'quick_search_container'",57],"]",["T_WHITESPACE"," ",57],"=",["T_WHITESPACE","\n            ",57],["T_VARIABLE","$this",58],["T_OBJECT_OPERATOR","->",58],["T_STRING","generateRequest",58],"(",["T_STRING","EavAttributeInterface",58],["T_DOUBLE_COLON","::",58],["T_STRING","IS_FILTERABLE_IN_SEARCH",58],",",["T_WHITESPACE"," ",58],["T_CONSTANT_ENCAPSED_STRING","'quick_search_container'",58],",",["T_WHITESPACE"," ",58],["T_STRING","true",58],")",";",["T_WHITESPACE","\n        ",58],["T_VARIABLE","$requests",59],"[",["T_CONSTANT_ENCAPSED_STRING","'advanced_search_container'",59],"]",["T_WHITESPACE"," ",59],"=",["T_WHITESPACE"," ",59],["T_VARIABLE","$this",59],["T_OBJECT_OPERATOR","->",59],["T_STRING","generateAdvancedSearchRequest",59],"(",")",";",["T_WHITESPACE","\n        ",59],["T_RETURN","return",60],["T_WHITESPACE"," ",60],["T_VARIABLE","$requests",60],";",["T_WHITESPACE","\n    ",60],"}",["T_WHITESPACE","\n\n    ",61],["T_DOC_COMMENT","\/**\n     * Generate search request\n     *\n     * @param string $attributeType\n     * @param string $container\n     * @param bool $useFulltext\n     * @return array\n     *\/",63],["T_WHITESPACE","\n    ",70],["T_PRIVATE","private",71],["T_WHITESPACE"," ",71],["T_FUNCTION","function",71],["T_WHITESPACE"," ",71],["T_STRING","generateRequest",71],"(",["T_VARIABLE","$attributeType",71],",",["T_WHITESPACE"," ",71],["T_VARIABLE","$container",71],",",["T_WHITESPACE"," ",71],["T_VARIABLE","$useFulltext",71],")",["T_WHITESPACE","\n    ",71],"{",["T_WHITESPACE","\n        ",72],["T_VARIABLE","$request",73],["T_WHITESPACE"," ",73],"=",["T_WHITESPACE"," ",73],"[","]",";",["T_WHITESPACE","\n        ",73],["T_FOREACH","foreach",74],["T_WHITESPACE"," ",74],"(",["T_VARIABLE","$this",74],["T_OBJECT_OPERATOR","->",74],["T_STRING","getSearchableAttributes",74],"(",")",["T_WHITESPACE"," ",74],["T_AS","as",74],["T_WHITESPACE"," ",74],["T_VARIABLE","$attribute",74],")",["T_WHITESPACE"," ",74],"{",["T_WHITESPACE","\n            ",74],["T_IF","if",75],["T_WHITESPACE"," ",75],"(",["T_VARIABLE","$attribute",75],["T_OBJECT_OPERATOR","->",75],["T_STRING","getData",75],"(",["T_VARIABLE","$attributeType",75],")",")",["T_WHITESPACE"," ",75],"{",["T_WHITESPACE","\n                ",75],["T_IF","if",76],["T_WHITESPACE"," ",76],"(","!",["T_STRING","in_array",76],"(",["T_VARIABLE","$attribute",76],["T_OBJECT_OPERATOR","->",76],["T_STRING","getAttributeCode",76],"(",")",",",["T_WHITESPACE"," ",76],"[",["T_CONSTANT_ENCAPSED_STRING","'price'",76],",",["T_WHITESPACE"," ",76],["T_CONSTANT_ENCAPSED_STRING","'category_ids'",76],"]",",",["T_WHITESPACE"," ",76],["T_STRING","true",76],")",")",["T_WHITESPACE"," ",76],"{",["T_WHITESPACE","\n                    ",76],["T_VARIABLE","$queryName",77],["T_WHITESPACE"," ",77],"=",["T_WHITESPACE"," ",77],["T_VARIABLE","$attribute",77],["T_OBJECT_OPERATOR","->",77],["T_STRING","getAttributeCode",77],"(",")",["T_WHITESPACE"," ",77],".",["T_WHITESPACE"," ",77],["T_CONSTANT_ENCAPSED_STRING","'_query'",77],";",["T_WHITESPACE","\n\n                    ",77],["T_VARIABLE","$request",79],"[",["T_CONSTANT_ENCAPSED_STRING","'queries'",79],"]","[",["T_VARIABLE","$container",79],"]","[",["T_CONSTANT_ENCAPSED_STRING","'queryReference'",79],"]","[","]",["T_WHITESPACE"," ",79],"=",["T_WHITESPACE"," ",79],"[",["T_WHITESPACE","\n                        ",79],["T_CONSTANT_ENCAPSED_STRING","'clause'",80],["T_WHITESPACE"," ",80],["T_DOUBLE_ARROW","=>",80],["T_WHITESPACE"," ",80],["T_CONSTANT_ENCAPSED_STRING","'should'",80],",",["T_WHITESPACE","\n                        ",80],["T_CONSTANT_ENCAPSED_STRING","'ref'",81],["T_WHITESPACE"," ",81],["T_DOUBLE_ARROW","=>",81],["T_WHITESPACE"," ",81],["T_VARIABLE","$queryName",81],",",["T_WHITESPACE","\n                    ",81],"]",";",["T_WHITESPACE","\n                    ",82],["T_VARIABLE","$filterName",83],["T_WHITESPACE"," ",83],"=",["T_WHITESPACE"," ",83],["T_VARIABLE","$attribute",83],["T_OBJECT_OPERATOR","->",83],["T_STRING","getAttributeCode",83],"(",")",["T_WHITESPACE"," ",83],".",["T_WHITESPACE"," ",83],["T_STRING","self",83],["T_DOUBLE_COLON","::",83],["T_STRING","FILTER_SUFFIX",83],";",["T_WHITESPACE","\n                    ",83],["T_VARIABLE","$request",84],"[",["T_CONSTANT_ENCAPSED_STRING","'queries'",84],"]","[",["T_VARIABLE","$queryName",84],"]",["T_WHITESPACE"," ",84],"=",["T_WHITESPACE"," ",84],"[",["T_WHITESPACE","\n                        ",84],["T_CONSTANT_ENCAPSED_STRING","'name'",85],["T_WHITESPACE"," ",85],["T_DOUBLE_ARROW","=>",85],["T_WHITESPACE"," ",85],["T_VARIABLE","$queryName",85],",",["T_WHITESPACE","\n                        ",85],["T_CONSTANT_ENCAPSED_STRING","'type'",86],["T_WHITESPACE"," ",86],["T_DOUBLE_ARROW","=>",86],["T_WHITESPACE"," ",86],["T_STRING","QueryInterface",86],["T_DOUBLE_COLON","::",86],["T_STRING","TYPE_FILTER",86],",",["T_WHITESPACE","\n                        ",86],["T_CONSTANT_ENCAPSED_STRING","'filterReference'",87],["T_WHITESPACE"," ",87],["T_DOUBLE_ARROW","=>",87],["T_WHITESPACE"," ",87],"[","[",["T_CONSTANT_ENCAPSED_STRING","'ref'",87],["T_WHITESPACE"," ",87],["T_DOUBLE_ARROW","=>",87],["T_WHITESPACE"," ",87],["T_VARIABLE","$filterName",87],"]","]",",",["T_WHITESPACE","\n                    ",87],"]",";",["T_WHITESPACE","\n                    ",88],["T_VARIABLE","$bucketName",89],["T_WHITESPACE"," ",89],"=",["T_WHITESPACE"," ",89],["T_VARIABLE","$attribute",89],["T_OBJECT_OPERATOR","->",89],["T_STRING","getAttributeCode",89],"(",")",["T_WHITESPACE"," ",89],".",["T_WHITESPACE"," ",89],["T_STRING","self",89],["T_DOUBLE_COLON","::",89],["T_STRING","BUCKET_SUFFIX",89],";",["T_WHITESPACE","\n                    ",89],["T_VARIABLE","$generator",90],["T_WHITESPACE"," ",90],"=",["T_WHITESPACE"," ",90],["T_VARIABLE","$this",90],["T_OBJECT_OPERATOR","->",90],["T_STRING","generatorResolver",90],["T_OBJECT_OPERATOR","->",90],["T_STRING","getGeneratorForType",90],"(",["T_VARIABLE","$attribute",90],["T_OBJECT_OPERATOR","->",90],["T_STRING","getBackendType",90],"(",")",")",";",["T_WHITESPACE","\n                    ",90],["T_VARIABLE","$request",91],"[",["T_CONSTANT_ENCAPSED_STRING","'filters'",91],"]","[",["T_VARIABLE","$filterName",91],"]",["T_WHITESPACE"," ",91],"=",["T_WHITESPACE"," ",91],["T_VARIABLE","$generator",91],["T_OBJECT_OPERATOR","->",91],["T_STRING","getFilterData",91],"(",["T_VARIABLE","$attribute",91],",",["T_WHITESPACE"," ",91],["T_VARIABLE","$filterName",91],")",";",["T_WHITESPACE","\n                    ",91],["T_VARIABLE","$request",92],"[",["T_CONSTANT_ENCAPSED_STRING","'aggregations'",92],"]","[",["T_VARIABLE","$bucketName",92],"]",["T_WHITESPACE"," ",92],"=",["T_WHITESPACE"," ",92],["T_VARIABLE","$generator",92],["T_OBJECT_OPERATOR","->",92],["T_STRING","getAggregationData",92],"(",["T_VARIABLE","$attribute",92],",",["T_WHITESPACE"," ",92],["T_VARIABLE","$bucketName",92],")",";",["T_WHITESPACE","\n                ",92],"}",["T_WHITESPACE","\n            ",93],"}",["T_WHITESPACE","\n            ",94],["T_DOC_COMMENT","\/** @var $attribute Attribute *\/",95],["T_WHITESPACE","\n            ",95],["T_IF","if",96],["T_WHITESPACE"," ",96],"(","!",["T_VARIABLE","$attribute",96],["T_OBJECT_OPERATOR","->",96],["T_STRING","getIsSearchable",96],"(",")",["T_WHITESPACE"," ",96],["T_BOOLEAN_OR","||",96],["T_WHITESPACE"," ",96],["T_STRING","in_array",96],"(",["T_VARIABLE","$attribute",96],["T_OBJECT_OPERATOR","->",96],["T_STRING","getAttributeCode",96],"(",")",",",["T_WHITESPACE"," ",96],"[",["T_CONSTANT_ENCAPSED_STRING","'price'",96],",",["T_WHITESPACE"," ",96],["T_CONSTANT_ENCAPSED_STRING","'sku'",96],"]",",",["T_WHITESPACE"," ",96],["T_STRING","true",96],")",")",["T_WHITESPACE"," ",96],"{",["T_WHITESPACE","\n                ",96],["T_COMMENT","\/\/ Some fields have their own specific handlers\n",97],["T_WHITESPACE","                ",98],["T_CONTINUE","continue",98],";",["T_WHITESPACE","\n            ",98],"}",["T_WHITESPACE","\n\n            ",99],["T_COMMENT","\/\/ Match search by custom price attribute isn't supported\n",101],["T_WHITESPACE","            ",102],["T_IF","if",102],["T_WHITESPACE"," ",102],"(",["T_VARIABLE","$useFulltext",102],["T_WHITESPACE"," ",102],["T_BOOLEAN_AND","&&",102],["T_WHITESPACE"," ",102],["T_VARIABLE","$attribute",102],["T_OBJECT_OPERATOR","->",102],["T_STRING","getFrontendInput",102],"(",")",["T_WHITESPACE"," ",102],["T_IS_NOT_IDENTICAL","!==",102],["T_WHITESPACE"," ",102],["T_CONSTANT_ENCAPSED_STRING","'price'",102],")",["T_WHITESPACE"," ",102],"{",["T_WHITESPACE","\n                ",102],["T_VARIABLE","$request",103],"[",["T_CONSTANT_ENCAPSED_STRING","'queries'",103],"]","[",["T_CONSTANT_ENCAPSED_STRING","'search'",103],"]","[",["T_CONSTANT_ENCAPSED_STRING","'match'",103],"]","[","]",["T_WHITESPACE"," ",103],"=",["T_WHITESPACE"," ",103],"[",["T_WHITESPACE","\n                    ",103],["T_CONSTANT_ENCAPSED_STRING","'field'",104],["T_WHITESPACE"," ",104],["T_DOUBLE_ARROW","=>",104],["T_WHITESPACE"," ",104],["T_VARIABLE","$attribute",104],["T_OBJECT_OPERATOR","->",104],["T_STRING","getAttributeCode",104],"(",")",",",["T_WHITESPACE","\n                    ",104],["T_CONSTANT_ENCAPSED_STRING","'boost'",105],["T_WHITESPACE"," ",105],["T_DOUBLE_ARROW","=>",105],["T_WHITESPACE"," ",105],["T_VARIABLE","$attribute",105],["T_OBJECT_OPERATOR","->",105],["T_STRING","getSearchWeight",105],"(",")",["T_WHITESPACE"," ",105],"?",":",["T_WHITESPACE"," ",105],["T_LNUMBER","1",105],",",["T_WHITESPACE","\n                ",105],"]",";",["T_WHITESPACE","\n            ",106],"}",["T_WHITESPACE","\n        ",107],"}",["T_WHITESPACE","\n\n        ",108],["T_RETURN","return",110],["T_WHITESPACE"," ",110],["T_VARIABLE","$request",110],";",["T_WHITESPACE","\n    ",110],"}",["T_WHITESPACE","\n\n    ",111],["T_DOC_COMMENT","\/**\n     * Retrieve searchable attributes\n     *\n     * @return \\Magento\\Catalog\\Model\\ResourceModel\\Product\\Attribute\\Collection\n     *\/",113],["T_WHITESPACE","\n    ",117],["T_PROTECTED","protected",118],["T_WHITESPACE"," ",118],["T_FUNCTION","function",118],["T_WHITESPACE"," ",118],["T_STRING","getSearchableAttributes",118],"(",")",["T_WHITESPACE","\n    ",118],"{",["T_WHITESPACE","\n        ",119],["T_DOC_COMMENT","\/** @var \\Magento\\Catalog\\Model\\ResourceModel\\Product\\Attribute\\Collection $productAttributes *\/",120],["T_WHITESPACE","\n        ",120],["T_VARIABLE","$productAttributes",121],["T_WHITESPACE"," ",121],"=",["T_WHITESPACE"," ",121],["T_VARIABLE","$this",121],["T_OBJECT_OPERATOR","->",121],["T_STRING","productAttributeCollectionFactory",121],["T_OBJECT_OPERATOR","->",121],["T_STRING","create",121],"(",")",";",["T_WHITESPACE","\n        ",121],["T_VARIABLE","$productAttributes",122],["T_OBJECT_OPERATOR","->",122],["T_STRING","addFieldToFilter",122],"(",["T_WHITESPACE","\n            ",122],"[",["T_CONSTANT_ENCAPSED_STRING","'is_searchable'",123],",",["T_WHITESPACE"," ",123],["T_CONSTANT_ENCAPSED_STRING","'is_visible_in_advanced_search'",123],",",["T_WHITESPACE"," ",123],["T_CONSTANT_ENCAPSED_STRING","'is_filterable'",123],",",["T_WHITESPACE"," ",123],["T_CONSTANT_ENCAPSED_STRING","'is_filterable_in_search'",123],"]",",",["T_WHITESPACE","\n            ",123],"[",["T_LNUMBER","1",124],",",["T_WHITESPACE"," ",124],["T_LNUMBER","1",124],",",["T_WHITESPACE"," ",124],"[",["T_LNUMBER","1",124],",",["T_WHITESPACE"," ",124],["T_LNUMBER","2",124],"]",",",["T_WHITESPACE"," ",124],["T_LNUMBER","1",124],"]",["T_WHITESPACE","\n        ",124],")",";",["T_WHITESPACE","\n\n        ",125],["T_RETURN","return",127],["T_WHITESPACE"," ",127],["T_VARIABLE","$productAttributes",127],";",["T_WHITESPACE","\n    ",127],"}",["T_WHITESPACE","\n\n    ",128],["T_DOC_COMMENT","\/**\n     * Generate advanced search request\n     *\n     * @return array\n     * @SuppressWarnings(PHPMD.CyclomaticComplexity)\n     *\/",130],["T_WHITESPACE","\n    ",135],["T_PRIVATE","private",136],["T_WHITESPACE"," ",136],["T_FUNCTION","function",136],["T_WHITESPACE"," ",136],["T_STRING","generateAdvancedSearchRequest",136],"(",")",["T_WHITESPACE","\n    ",136],"{",["T_WHITESPACE","\n        ",137],["T_VARIABLE","$request",138],["T_WHITESPACE"," ",138],"=",["T_WHITESPACE"," ",138],"[","]",";",["T_WHITESPACE","\n        ",138],["T_FOREACH","foreach",139],["T_WHITESPACE"," ",139],"(",["T_VARIABLE","$this",139],["T_OBJECT_OPERATOR","->",139],["T_STRING","getSearchableAttributes",139],"(",")",["T_WHITESPACE"," ",139],["T_AS","as",139],["T_WHITESPACE"," ",139],["T_VARIABLE","$attribute",139],")",["T_WHITESPACE"," ",139],"{",["T_WHITESPACE","\n            ",139],["T_DOC_COMMENT","\/** @var $attribute Attribute *\/",140],["T_WHITESPACE","\n            ",140],["T_IF","if",141],["T_WHITESPACE"," ",141],"(","!",["T_VARIABLE","$attribute",141],["T_OBJECT_OPERATOR","->",141],["T_STRING","getIsVisibleInAdvancedSearch",141],"(",")",")",["T_WHITESPACE"," ",141],"{",["T_WHITESPACE","\n                ",141],["T_CONTINUE","continue",142],";",["T_WHITESPACE","\n            ",142],"}",["T_WHITESPACE","\n            ",143],["T_IF","if",144],["T_WHITESPACE"," ",144],"(",["T_STRING","in_array",144],"(",["T_VARIABLE","$attribute",144],["T_OBJECT_OPERATOR","->",144],["T_STRING","getAttributeCode",144],"(",")",",",["T_WHITESPACE"," ",144],"[",["T_CONSTANT_ENCAPSED_STRING","'price'",144],",",["T_WHITESPACE"," ",144],["T_CONSTANT_ENCAPSED_STRING","'sku'",144],"]",")",")",["T_WHITESPACE"," ",144],"{",["T_WHITESPACE","\n                ",144],["T_COMMENT","\/\/same fields have special semantics\n",145],["T_WHITESPACE","                ",146],["T_CONTINUE","continue",146],";",["T_WHITESPACE","\n            ",146],"}",["T_WHITESPACE","\n\n            ",147],["T_VARIABLE","$queryName",149],["T_WHITESPACE"," ",149],"=",["T_WHITESPACE"," ",149],["T_VARIABLE","$attribute",149],["T_OBJECT_OPERATOR","->",149],["T_STRING","getAttributeCode",149],"(",")",["T_WHITESPACE"," ",149],".",["T_WHITESPACE"," ",149],["T_CONSTANT_ENCAPSED_STRING","'_query'",149],";",["T_WHITESPACE","\n            ",149],["T_VARIABLE","$request",150],"[",["T_CONSTANT_ENCAPSED_STRING","'queries'",150],"]","[",["T_CONSTANT_ENCAPSED_STRING","'advanced_search_container'",150],"]","[",["T_CONSTANT_ENCAPSED_STRING","'queryReference'",150],"]","[","]",["T_WHITESPACE"," ",150],"=",["T_WHITESPACE"," ",150],"[",["T_WHITESPACE","\n                ",150],["T_CONSTANT_ENCAPSED_STRING","'clause'",151],["T_WHITESPACE"," ",151],["T_DOUBLE_ARROW","=>",151],["T_WHITESPACE"," ",151],["T_CONSTANT_ENCAPSED_STRING","'should'",151],",",["T_WHITESPACE","\n                ",151],["T_CONSTANT_ENCAPSED_STRING","'ref'",152],["T_WHITESPACE"," ",152],["T_DOUBLE_ARROW","=>",152],["T_WHITESPACE"," ",152],["T_VARIABLE","$queryName",152],",",["T_WHITESPACE","\n            ",152],"]",";",["T_WHITESPACE","\n            ",153],["T_SWITCH","switch",154],["T_WHITESPACE"," ",154],"(",["T_VARIABLE","$attribute",154],["T_OBJECT_OPERATOR","->",154],["T_STRING","getBackendType",154],"(",")",")",["T_WHITESPACE"," ",154],"{",["T_WHITESPACE","\n                ",154],["T_CASE","case",155],["T_WHITESPACE"," ",155],["T_CONSTANT_ENCAPSED_STRING","'static'",155],":",["T_WHITESPACE","\n                    ",155],["T_BREAK","break",156],";",["T_WHITESPACE","\n                ",156],["T_CASE","case",157],["T_WHITESPACE"," ",157],["T_CONSTANT_ENCAPSED_STRING","'text'",157],":",["T_WHITESPACE","\n                ",157],["T_CASE","case",158],["T_WHITESPACE"," ",158],["T_CONSTANT_ENCAPSED_STRING","'varchar'",158],":",["T_WHITESPACE","\n                    ",158],["T_IF","if",159],["T_WHITESPACE"," ",159],"(",["T_VARIABLE","$attribute",159],["T_OBJECT_OPERATOR","->",159],["T_STRING","getFrontendInput",159],"(",")",["T_WHITESPACE"," ",159],["T_IS_IDENTICAL","===",159],["T_WHITESPACE"," ",159],["T_CONSTANT_ENCAPSED_STRING","'multiselect'",159],")",["T_WHITESPACE"," ",159],"{",["T_WHITESPACE","\n                        ",159],["T_VARIABLE","$filterName",160],["T_WHITESPACE"," ",160],"=",["T_WHITESPACE"," ",160],["T_VARIABLE","$attribute",160],["T_OBJECT_OPERATOR","->",160],["T_STRING","getAttributeCode",160],"(",")",["T_WHITESPACE"," ",160],".",["T_WHITESPACE"," ",160],["T_STRING","self",160],["T_DOUBLE_COLON","::",160],["T_STRING","FILTER_SUFFIX",160],";",["T_WHITESPACE","\n                        ",160],["T_VARIABLE","$request",161],"[",["T_CONSTANT_ENCAPSED_STRING","'queries'",161],"]","[",["T_VARIABLE","$queryName",161],"]",["T_WHITESPACE"," ",161],"=",["T_WHITESPACE"," ",161],"[",["T_WHITESPACE","\n                            ",161],["T_CONSTANT_ENCAPSED_STRING","'name'",162],["T_WHITESPACE"," ",162],["T_DOUBLE_ARROW","=>",162],["T_WHITESPACE"," ",162],["T_VARIABLE","$queryName",162],",",["T_WHITESPACE","\n                            ",162],["T_CONSTANT_ENCAPSED_STRING","'type'",163],["T_WHITESPACE"," ",163],["T_DOUBLE_ARROW","=>",163],["T_WHITESPACE"," ",163],["T_STRING","QueryInterface",163],["T_DOUBLE_COLON","::",163],["T_STRING","TYPE_FILTER",163],",",["T_WHITESPACE","\n                            ",163],["T_CONSTANT_ENCAPSED_STRING","'filterReference'",164],["T_WHITESPACE"," ",164],["T_DOUBLE_ARROW","=>",164],["T_WHITESPACE"," ",164],"[","[",["T_CONSTANT_ENCAPSED_STRING","'ref'",164],["T_WHITESPACE"," ",164],["T_DOUBLE_ARROW","=>",164],["T_WHITESPACE"," ",164],["T_VARIABLE","$filterName",164],"]","]",",",["T_WHITESPACE","\n                        ",164],"]",";",["T_WHITESPACE","\n\n                        ",165],["T_VARIABLE","$request",167],"[",["T_CONSTANT_ENCAPSED_STRING","'filters'",167],"]","[",["T_VARIABLE","$filterName",167],"]",["T_WHITESPACE"," ",167],"=",["T_WHITESPACE"," ",167],"[",["T_WHITESPACE","\n                            ",167],["T_CONSTANT_ENCAPSED_STRING","'type'",168],["T_WHITESPACE"," ",168],["T_DOUBLE_ARROW","=>",168],["T_WHITESPACE"," ",168],["T_STRING","FilterInterface",168],["T_DOUBLE_COLON","::",168],["T_STRING","TYPE_TERM",168],",",["T_WHITESPACE","\n                            ",168],["T_CONSTANT_ENCAPSED_STRING","'name'",169],["T_WHITESPACE"," ",169],["T_DOUBLE_ARROW","=>",169],["T_WHITESPACE"," ",169],["T_VARIABLE","$filterName",169],",",["T_WHITESPACE","\n                            ",169],["T_CONSTANT_ENCAPSED_STRING","'field'",170],["T_WHITESPACE"," ",170],["T_DOUBLE_ARROW","=>",170],["T_WHITESPACE"," ",170],["T_VARIABLE","$attribute",170],["T_OBJECT_OPERATOR","->",170],["T_STRING","getAttributeCode",170],"(",")",",",["T_WHITESPACE","\n                            ",170],["T_CONSTANT_ENCAPSED_STRING","'value'",171],["T_WHITESPACE"," ",171],["T_DOUBLE_ARROW","=>",171],["T_WHITESPACE"," ",171],["T_CONSTANT_ENCAPSED_STRING","'$'",171],["T_WHITESPACE"," ",171],".",["T_WHITESPACE"," ",171],["T_VARIABLE","$attribute",171],["T_OBJECT_OPERATOR","->",171],["T_STRING","getAttributeCode",171],"(",")",["T_WHITESPACE"," ",171],".",["T_WHITESPACE"," ",171],["T_CONSTANT_ENCAPSED_STRING","'$'",171],",",["T_WHITESPACE","\n                        ",171],"]",";",["T_WHITESPACE","\n                    ",172],"}",["T_WHITESPACE"," ",173],["T_ELSE","else",173],["T_WHITESPACE"," ",173],"{",["T_WHITESPACE","\n                        ",173],["T_VARIABLE","$request",174],"[",["T_CONSTANT_ENCAPSED_STRING","'queries'",174],"]","[",["T_VARIABLE","$queryName",174],"]",["T_WHITESPACE"," ",174],"=",["T_WHITESPACE"," ",174],"[",["T_WHITESPACE","\n                            ",174],["T_CONSTANT_ENCAPSED_STRING","'name'",175],["T_WHITESPACE"," ",175],["T_DOUBLE_ARROW","=>",175],["T_WHITESPACE"," ",175],["T_VARIABLE","$queryName",175],",",["T_WHITESPACE","\n                            ",175],["T_CONSTANT_ENCAPSED_STRING","'type'",176],["T_WHITESPACE"," ",176],["T_DOUBLE_ARROW","=>",176],["T_WHITESPACE"," ",176],["T_CONSTANT_ENCAPSED_STRING","'matchQuery'",176],",",["T_WHITESPACE","\n                            ",176],["T_CONSTANT_ENCAPSED_STRING","'value'",177],["T_WHITESPACE"," ",177],["T_DOUBLE_ARROW","=>",177],["T_WHITESPACE"," ",177],["T_CONSTANT_ENCAPSED_STRING","'$'",177],["T_WHITESPACE"," ",177],".",["T_WHITESPACE"," ",177],["T_VARIABLE","$attribute",177],["T_OBJECT_OPERATOR","->",177],["T_STRING","getAttributeCode",177],"(",")",["T_WHITESPACE"," ",177],".",["T_WHITESPACE"," ",177],["T_CONSTANT_ENCAPSED_STRING","'$'",177],",",["T_WHITESPACE","\n                            ",177],["T_CONSTANT_ENCAPSED_STRING","'match'",178],["T_WHITESPACE"," ",178],["T_DOUBLE_ARROW","=>",178],["T_WHITESPACE"," ",178],"[",["T_WHITESPACE","\n                                ",178],"[",["T_WHITESPACE","\n                                    ",179],["T_CONSTANT_ENCAPSED_STRING","'field'",180],["T_WHITESPACE"," ",180],["T_DOUBLE_ARROW","=>",180],["T_WHITESPACE"," ",180],["T_VARIABLE","$attribute",180],["T_OBJECT_OPERATOR","->",180],["T_STRING","getAttributeCode",180],"(",")",",",["T_WHITESPACE","\n                                    ",180],["T_CONSTANT_ENCAPSED_STRING","'boost'",181],["T_WHITESPACE"," ",181],["T_DOUBLE_ARROW","=>",181],["T_WHITESPACE"," ",181],["T_VARIABLE","$attribute",181],["T_OBJECT_OPERATOR","->",181],["T_STRING","getSearchWeight",181],"(",")",["T_WHITESPACE"," ",181],"?",":",["T_WHITESPACE"," ",181],["T_LNUMBER","1",181],",",["T_WHITESPACE","\n                                ",181],"]",",",["T_WHITESPACE","\n                            ",182],"]",",",["T_WHITESPACE","\n                        ",183],"]",";",["T_WHITESPACE","\n                    ",184],"}",["T_WHITESPACE","\n                    ",185],["T_BREAK","break",186],";",["T_WHITESPACE","\n                ",186],["T_CASE","case",187],["T_WHITESPACE"," ",187],["T_CONSTANT_ENCAPSED_STRING","'decimal'",187],":",["T_WHITESPACE","\n                ",187],["T_CASE","case",188],["T_WHITESPACE"," ",188],["T_CONSTANT_ENCAPSED_STRING","'datetime'",188],":",["T_WHITESPACE","\n                ",188],["T_CASE","case",189],["T_WHITESPACE"," ",189],["T_CONSTANT_ENCAPSED_STRING","'date'",189],":",["T_WHITESPACE","\n                    ",189],["T_VARIABLE","$filterName",190],["T_WHITESPACE"," ",190],"=",["T_WHITESPACE"," ",190],["T_VARIABLE","$attribute",190],["T_OBJECT_OPERATOR","->",190],["T_STRING","getAttributeCode",190],"(",")",["T_WHITESPACE"," ",190],".",["T_WHITESPACE"," ",190],["T_STRING","self",190],["T_DOUBLE_COLON","::",190],["T_STRING","FILTER_SUFFIX",190],";",["T_WHITESPACE","\n                    ",190],["T_VARIABLE","$request",191],"[",["T_CONSTANT_ENCAPSED_STRING","'queries'",191],"]","[",["T_VARIABLE","$queryName",191],"]",["T_WHITESPACE"," ",191],"=",["T_WHITESPACE"," ",191],"[",["T_WHITESPACE","\n                        ",191],["T_CONSTANT_ENCAPSED_STRING","'name'",192],["T_WHITESPACE"," ",192],["T_DOUBLE_ARROW","=>",192],["T_WHITESPACE"," ",192],["T_VARIABLE","$queryName",192],",",["T_WHITESPACE","\n                        ",192],["T_CONSTANT_ENCAPSED_STRING","'type'",193],["T_WHITESPACE"," ",193],["T_DOUBLE_ARROW","=>",193],["T_WHITESPACE"," ",193],["T_STRING","QueryInterface",193],["T_DOUBLE_COLON","::",193],["T_STRING","TYPE_FILTER",193],",",["T_WHITESPACE","\n                        ",193],["T_CONSTANT_ENCAPSED_STRING","'filterReference'",194],["T_WHITESPACE"," ",194],["T_DOUBLE_ARROW","=>",194],["T_WHITESPACE"," ",194],"[","[",["T_CONSTANT_ENCAPSED_STRING","'ref'",194],["T_WHITESPACE"," ",194],["T_DOUBLE_ARROW","=>",194],["T_WHITESPACE"," ",194],["T_VARIABLE","$filterName",194],"]","]",",",["T_WHITESPACE","\n                    ",194],"]",";",["T_WHITESPACE","\n                    ",195],["T_VARIABLE","$request",196],"[",["T_CONSTANT_ENCAPSED_STRING","'filters'",196],"]","[",["T_VARIABLE","$filterName",196],"]",["T_WHITESPACE"," ",196],"=",["T_WHITESPACE"," ",196],"[",["T_WHITESPACE","\n                        ",196],["T_CONSTANT_ENCAPSED_STRING","'field'",197],["T_WHITESPACE"," ",197],["T_DOUBLE_ARROW","=>",197],["T_WHITESPACE"," ",197],["T_VARIABLE","$attribute",197],["T_OBJECT_OPERATOR","->",197],["T_STRING","getAttributeCode",197],"(",")",",",["T_WHITESPACE","\n                        ",197],["T_CONSTANT_ENCAPSED_STRING","'name'",198],["T_WHITESPACE"," ",198],["T_DOUBLE_ARROW","=>",198],["T_WHITESPACE"," ",198],["T_VARIABLE","$filterName",198],",",["T_WHITESPACE","\n                        ",198],["T_CONSTANT_ENCAPSED_STRING","'type'",199],["T_WHITESPACE"," ",199],["T_DOUBLE_ARROW","=>",199],["T_WHITESPACE"," ",199],["T_STRING","FilterInterface",199],["T_DOUBLE_COLON","::",199],["T_STRING","TYPE_RANGE",199],",",["T_WHITESPACE","\n                        ",199],["T_CONSTANT_ENCAPSED_STRING","'from'",200],["T_WHITESPACE"," ",200],["T_DOUBLE_ARROW","=>",200],["T_WHITESPACE"," ",200],["T_CONSTANT_ENCAPSED_STRING","'$'",200],["T_WHITESPACE"," ",200],".",["T_WHITESPACE"," ",200],["T_VARIABLE","$attribute",200],["T_OBJECT_OPERATOR","->",200],["T_STRING","getAttributeCode",200],"(",")",["T_WHITESPACE"," ",200],".",["T_WHITESPACE"," ",200],["T_CONSTANT_ENCAPSED_STRING","'.from$'",200],",",["T_WHITESPACE","\n                        ",200],["T_CONSTANT_ENCAPSED_STRING","'to'",201],["T_WHITESPACE"," ",201],["T_DOUBLE_ARROW","=>",201],["T_WHITESPACE"," ",201],["T_CONSTANT_ENCAPSED_STRING","'$'",201],["T_WHITESPACE"," ",201],".",["T_WHITESPACE"," ",201],["T_VARIABLE","$attribute",201],["T_OBJECT_OPERATOR","->",201],["T_STRING","getAttributeCode",201],"(",")",["T_WHITESPACE"," ",201],".",["T_WHITESPACE"," ",201],["T_CONSTANT_ENCAPSED_STRING","'.to$'",201],",",["T_WHITESPACE","\n                    ",201],"]",";",["T_WHITESPACE","\n                    ",202],["T_BREAK","break",203],";",["T_WHITESPACE","\n                ",203],["T_DEFAULT","default",204],":",["T_WHITESPACE","\n                    ",204],["T_VARIABLE","$filterName",205],["T_WHITESPACE"," ",205],"=",["T_WHITESPACE"," ",205],["T_VARIABLE","$attribute",205],["T_OBJECT_OPERATOR","->",205],["T_STRING","getAttributeCode",205],"(",")",["T_WHITESPACE"," ",205],".",["T_WHITESPACE"," ",205],["T_STRING","self",205],["T_DOUBLE_COLON","::",205],["T_STRING","FILTER_SUFFIX",205],";",["T_WHITESPACE","\n                    ",205],["T_VARIABLE","$request",206],"[",["T_CONSTANT_ENCAPSED_STRING","'queries'",206],"]","[",["T_VARIABLE","$queryName",206],"]",["T_WHITESPACE"," ",206],"=",["T_WHITESPACE"," ",206],"[",["T_WHITESPACE","\n                        ",206],["T_CONSTANT_ENCAPSED_STRING","'name'",207],["T_WHITESPACE"," ",207],["T_DOUBLE_ARROW","=>",207],["T_WHITESPACE"," ",207],["T_VARIABLE","$queryName",207],",",["T_WHITESPACE","\n                        ",207],["T_CONSTANT_ENCAPSED_STRING","'type'",208],["T_WHITESPACE"," ",208],["T_DOUBLE_ARROW","=>",208],["T_WHITESPACE"," ",208],["T_STRING","QueryInterface",208],["T_DOUBLE_COLON","::",208],["T_STRING","TYPE_FILTER",208],",",["T_WHITESPACE","\n                        ",208],["T_CONSTANT_ENCAPSED_STRING","'filterReference'",209],["T_WHITESPACE"," ",209],["T_DOUBLE_ARROW","=>",209],["T_WHITESPACE"," ",209],"[","[",["T_CONSTANT_ENCAPSED_STRING","'ref'",209],["T_WHITESPACE"," ",209],["T_DOUBLE_ARROW","=>",209],["T_WHITESPACE"," ",209],["T_VARIABLE","$filterName",209],"]","]",",",["T_WHITESPACE","\n                    ",209],"]",";",["T_WHITESPACE","\n\n                    ",210],["T_VARIABLE","$request",212],"[",["T_CONSTANT_ENCAPSED_STRING","'filters'",212],"]","[",["T_VARIABLE","$filterName",212],"]",["T_WHITESPACE"," ",212],"=",["T_WHITESPACE"," ",212],"[",["T_WHITESPACE","\n                        ",212],["T_CONSTANT_ENCAPSED_STRING","'type'",213],["T_WHITESPACE"," ",213],["T_DOUBLE_ARROW","=>",213],["T_WHITESPACE"," ",213],["T_STRING","FilterInterface",213],["T_DOUBLE_COLON","::",213],["T_STRING","TYPE_TERM",213],",",["T_WHITESPACE","\n                        ",213],["T_CONSTANT_ENCAPSED_STRING","'name'",214],["T_WHITESPACE"," ",214],["T_DOUBLE_ARROW","=>",214],["T_WHITESPACE"," ",214],["T_VARIABLE","$filterName",214],",",["T_WHITESPACE","\n                        ",214],["T_CONSTANT_ENCAPSED_STRING","'field'",215],["T_WHITESPACE"," ",215],["T_DOUBLE_ARROW","=>",215],["T_WHITESPACE"," ",215],["T_VARIABLE","$attribute",215],["T_OBJECT_OPERATOR","->",215],["T_STRING","getAttributeCode",215],"(",")",",",["T_WHITESPACE","\n                        ",215],["T_CONSTANT_ENCAPSED_STRING","'value'",216],["T_WHITESPACE"," ",216],["T_DOUBLE_ARROW","=>",216],["T_WHITESPACE"," ",216],["T_CONSTANT_ENCAPSED_STRING","'$'",216],["T_WHITESPACE"," ",216],".",["T_WHITESPACE"," ",216],["T_VARIABLE","$attribute",216],["T_OBJECT_OPERATOR","->",216],["T_STRING","getAttributeCode",216],"(",")",["T_WHITESPACE"," ",216],".",["T_WHITESPACE"," ",216],["T_CONSTANT_ENCAPSED_STRING","'$'",216],",",["T_WHITESPACE","\n                    ",216],"]",";",["T_WHITESPACE","\n            ",217],"}",["T_WHITESPACE","\n        ",218],"}",["T_WHITESPACE","\n\n        ",219],["T_RETURN","return",221],["T_WHITESPACE"," ",221],["T_VARIABLE","$request",221],";",["T_WHITESPACE","\n    ",221],"}",["T_WHITESPACE","\n",222],"}",["T_WHITESPACE","\n",223]]
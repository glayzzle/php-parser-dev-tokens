[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Copyright \u00c2\u00a9 2013-2017 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n *\/",2],["T_WHITESPACE","\n\n",5],["T_COMMENT","\/\/ @codingStandardsIgnoreFile\n",7],["T_WHITESPACE","\n",8],["T_NAMESPACE","namespace",9],["T_WHITESPACE"," ",9],["T_STRING","Magento",9],["T_NS_SEPARATOR","\\",9],["T_STRING","CatalogSearch",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Model",9],["T_NS_SEPARATOR","\\",9],["T_STRING","ResourceModel",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Search",9],";",["T_WHITESPACE","\n\n",9],["T_DOC_COMMENT","\/**\n * Search collection\n *\n * @SuppressWarnings(PHPMD.CouplingBetweenObjects)\n *\/",11],["T_WHITESPACE","\n",15],["T_CLASS","class",16],["T_WHITESPACE"," ",16],["T_STRING","Collection",16],["T_WHITESPACE"," ",16],["T_EXTENDS","extends",16],["T_WHITESPACE"," ",16],["T_NS_SEPARATOR","\\",16],["T_STRING","Magento",16],["T_NS_SEPARATOR","\\",16],["T_STRING","Catalog",16],["T_NS_SEPARATOR","\\",16],["T_STRING","Model",16],["T_NS_SEPARATOR","\\",16],["T_STRING","ResourceModel",16],["T_NS_SEPARATOR","\\",16],["T_STRING","Product",16],["T_NS_SEPARATOR","\\",16],["T_STRING","Collection",16],["T_WHITESPACE"," ",16],["T_IMPLEMENTS","implements",16],["T_WHITESPACE"," ",16],["T_NS_SEPARATOR","\\",16],["T_STRING","Magento",16],["T_NS_SEPARATOR","\\",16],["T_STRING","Search",16],["T_NS_SEPARATOR","\\",16],["T_STRING","Model",16],["T_NS_SEPARATOR","\\",16],["T_STRING","SearchCollectionInterface",16],["T_WHITESPACE","\n",16],"{",["T_WHITESPACE","\n    ",17],["T_DOC_COMMENT","\/**\n     * Attribute collection\n     *\n     * @var array\n     *\/",18],["T_WHITESPACE","\n    ",22],["T_PROTECTED","protected",23],["T_WHITESPACE"," ",23],["T_VARIABLE","$_attributesCollection",23],";",["T_WHITESPACE","\n\n    ",23],["T_DOC_COMMENT","\/**\n     * Search query\n     *\n     * @var string\n     *\/",25],["T_WHITESPACE","\n    ",29],["T_PROTECTED","protected",30],["T_WHITESPACE"," ",30],["T_VARIABLE","$_searchQuery",30],";",["T_WHITESPACE","\n\n    ",30],["T_DOC_COMMENT","\/**\n     * Attribute collection factory\n     *\n     * @var \\Magento\\Catalog\\Model\\ResourceModel\\Product\\Attribute\\CollectionFactory\n     *\/",32],["T_WHITESPACE","\n    ",36],["T_PROTECTED","protected",37],["T_WHITESPACE"," ",37],["T_VARIABLE","$_attributeCollectionFactory",37],";",["T_WHITESPACE","\n\n    ",37],["T_DOC_COMMENT","\/**\n     * Collection constructor.\n     * @param \\Magento\\Framework\\Data\\Collection\\EntityFactory $entityFactory\n     * @param \\Psr\\Log\\LoggerInterface $logger\n     * @param \\Magento\\Framework\\Data\\Collection\\Db\\FetchStrategyInterface $fetchStrategy\n     * @param \\Magento\\Framework\\Event\\ManagerInterface $eventManager\n     * @param \\Magento\\Eav\\Model\\Config $eavConfig\n     * @param \\Magento\\Framework\\App\\ResourceConnection $resource\n     * @param \\Magento\\Eav\\Model\\EntityFactory $eavEntityFactory\n     * @param \\Magento\\Catalog\\Model\\ResourceModel\\Helper $resourceHelper\n     * @param \\Magento\\Framework\\Validator\\UniversalFactory $universalFactory\n     * @param \\Magento\\Store\\Model\\StoreManagerInterface $storeManager\n     * @param \\Magento\\Framework\\Module\\Manager $moduleManager\n     * @param \\Magento\\Catalog\\Model\\Indexer\\Product\\Flat\\State $catalogProductFlatState\n     * @param \\Magento\\Framework\\App\\Config\\ScopeConfigInterface $scopeConfig\n     * @param \\Magento\\Catalog\\Model\\Product\\OptionFactory $productOptionFactory\n     * @param \\Magento\\Catalog\\Model\\ResourceModel\\Url $catalogUrl\n     * @param \\Magento\\Framework\\Stdlib\\DateTime\\TimezoneInterface $localeDate\n     * @param \\Magento\\Customer\\Model\\Session $customerSession\n     * @param \\Magento\\Framework\\Stdlib\\DateTime $dateTime\n     * @param \\Magento\\Customer\\Api\\GroupManagementInterface $groupManagement\n     * @param \\Magento\\Catalog\\Model\\ResourceModel\\Product\\Attribute\\CollectionFactory $attributeCollectionFactory\n     * @param \\Magento\\Framework\\DB\\Adapter\\AdapterInterface $connection\n     *\n     * @SuppressWarnings(PHPMD.ExcessiveParameterList)\n     *\/",39],["T_WHITESPACE","\n    ",64],["T_PUBLIC","public",65],["T_WHITESPACE"," ",65],["T_FUNCTION","function",65],["T_WHITESPACE"," ",65],["T_STRING","__construct",65],"(",["T_WHITESPACE","\n        ",65],["T_NS_SEPARATOR","\\",66],["T_STRING","Magento",66],["T_NS_SEPARATOR","\\",66],["T_STRING","Framework",66],["T_NS_SEPARATOR","\\",66],["T_STRING","Data",66],["T_NS_SEPARATOR","\\",66],["T_STRING","Collection",66],["T_NS_SEPARATOR","\\",66],["T_STRING","EntityFactory",66],["T_WHITESPACE"," ",66],["T_VARIABLE","$entityFactory",66],",",["T_WHITESPACE","\n        ",66],["T_NS_SEPARATOR","\\",67],["T_STRING","Psr",67],["T_NS_SEPARATOR","\\",67],["T_STRING","Log",67],["T_NS_SEPARATOR","\\",67],["T_STRING","LoggerInterface",67],["T_WHITESPACE"," ",67],["T_VARIABLE","$logger",67],",",["T_WHITESPACE","\n        ",67],["T_NS_SEPARATOR","\\",68],["T_STRING","Magento",68],["T_NS_SEPARATOR","\\",68],["T_STRING","Framework",68],["T_NS_SEPARATOR","\\",68],["T_STRING","Data",68],["T_NS_SEPARATOR","\\",68],["T_STRING","Collection",68],["T_NS_SEPARATOR","\\",68],["T_STRING","Db",68],["T_NS_SEPARATOR","\\",68],["T_STRING","FetchStrategyInterface",68],["T_WHITESPACE"," ",68],["T_VARIABLE","$fetchStrategy",68],",",["T_WHITESPACE","\n        ",68],["T_NS_SEPARATOR","\\",69],["T_STRING","Magento",69],["T_NS_SEPARATOR","\\",69],["T_STRING","Framework",69],["T_NS_SEPARATOR","\\",69],["T_STRING","Event",69],["T_NS_SEPARATOR","\\",69],["T_STRING","ManagerInterface",69],["T_WHITESPACE"," ",69],["T_VARIABLE","$eventManager",69],",",["T_WHITESPACE","\n        ",69],["T_NS_SEPARATOR","\\",70],["T_STRING","Magento",70],["T_NS_SEPARATOR","\\",70],["T_STRING","Eav",70],["T_NS_SEPARATOR","\\",70],["T_STRING","Model",70],["T_NS_SEPARATOR","\\",70],["T_STRING","Config",70],["T_WHITESPACE"," ",70],["T_VARIABLE","$eavConfig",70],",",["T_WHITESPACE","\n        ",70],["T_NS_SEPARATOR","\\",71],["T_STRING","Magento",71],["T_NS_SEPARATOR","\\",71],["T_STRING","Framework",71],["T_NS_SEPARATOR","\\",71],["T_STRING","App",71],["T_NS_SEPARATOR","\\",71],["T_STRING","ResourceConnection",71],["T_WHITESPACE"," ",71],["T_VARIABLE","$resource",71],",",["T_WHITESPACE","\n        ",71],["T_NS_SEPARATOR","\\",72],["T_STRING","Magento",72],["T_NS_SEPARATOR","\\",72],["T_STRING","Eav",72],["T_NS_SEPARATOR","\\",72],["T_STRING","Model",72],["T_NS_SEPARATOR","\\",72],["T_STRING","EntityFactory",72],["T_WHITESPACE"," ",72],["T_VARIABLE","$eavEntityFactory",72],",",["T_WHITESPACE","\n        ",72],["T_NS_SEPARATOR","\\",73],["T_STRING","Magento",73],["T_NS_SEPARATOR","\\",73],["T_STRING","Catalog",73],["T_NS_SEPARATOR","\\",73],["T_STRING","Model",73],["T_NS_SEPARATOR","\\",73],["T_STRING","ResourceModel",73],["T_NS_SEPARATOR","\\",73],["T_STRING","Helper",73],["T_WHITESPACE"," ",73],["T_VARIABLE","$resourceHelper",73],",",["T_WHITESPACE","\n        ",73],["T_NS_SEPARATOR","\\",74],["T_STRING","Magento",74],["T_NS_SEPARATOR","\\",74],["T_STRING","Framework",74],["T_NS_SEPARATOR","\\",74],["T_STRING","Validator",74],["T_NS_SEPARATOR","\\",74],["T_STRING","UniversalFactory",74],["T_WHITESPACE"," ",74],["T_VARIABLE","$universalFactory",74],",",["T_WHITESPACE","\n        ",74],["T_NS_SEPARATOR","\\",75],["T_STRING","Magento",75],["T_NS_SEPARATOR","\\",75],["T_STRING","Store",75],["T_NS_SEPARATOR","\\",75],["T_STRING","Model",75],["T_NS_SEPARATOR","\\",75],["T_STRING","StoreManagerInterface",75],["T_WHITESPACE"," ",75],["T_VARIABLE","$storeManager",75],",",["T_WHITESPACE","\n        ",75],["T_NS_SEPARATOR","\\",76],["T_STRING","Magento",76],["T_NS_SEPARATOR","\\",76],["T_STRING","Framework",76],["T_NS_SEPARATOR","\\",76],["T_STRING","Module",76],["T_NS_SEPARATOR","\\",76],["T_STRING","Manager",76],["T_WHITESPACE"," ",76],["T_VARIABLE","$moduleManager",76],",",["T_WHITESPACE","\n        ",76],["T_NS_SEPARATOR","\\",77],["T_STRING","Magento",77],["T_NS_SEPARATOR","\\",77],["T_STRING","Catalog",77],["T_NS_SEPARATOR","\\",77],["T_STRING","Model",77],["T_NS_SEPARATOR","\\",77],["T_STRING","Indexer",77],["T_NS_SEPARATOR","\\",77],["T_STRING","Product",77],["T_NS_SEPARATOR","\\",77],["T_STRING","Flat",77],["T_NS_SEPARATOR","\\",77],["T_STRING","State",77],["T_WHITESPACE"," ",77],["T_VARIABLE","$catalogProductFlatState",77],",",["T_WHITESPACE","\n        ",77],["T_NS_SEPARATOR","\\",78],["T_STRING","Magento",78],["T_NS_SEPARATOR","\\",78],["T_STRING","Framework",78],["T_NS_SEPARATOR","\\",78],["T_STRING","App",78],["T_NS_SEPARATOR","\\",78],["T_STRING","Config",78],["T_NS_SEPARATOR","\\",78],["T_STRING","ScopeConfigInterface",78],["T_WHITESPACE"," ",78],["T_VARIABLE","$scopeConfig",78],",",["T_WHITESPACE","\n        ",78],["T_NS_SEPARATOR","\\",79],["T_STRING","Magento",79],["T_NS_SEPARATOR","\\",79],["T_STRING","Catalog",79],["T_NS_SEPARATOR","\\",79],["T_STRING","Model",79],["T_NS_SEPARATOR","\\",79],["T_STRING","Product",79],["T_NS_SEPARATOR","\\",79],["T_STRING","OptionFactory",79],["T_WHITESPACE"," ",79],["T_VARIABLE","$productOptionFactory",79],",",["T_WHITESPACE","\n        ",79],["T_NS_SEPARATOR","\\",80],["T_STRING","Magento",80],["T_NS_SEPARATOR","\\",80],["T_STRING","Catalog",80],["T_NS_SEPARATOR","\\",80],["T_STRING","Model",80],["T_NS_SEPARATOR","\\",80],["T_STRING","ResourceModel",80],["T_NS_SEPARATOR","\\",80],["T_STRING","Url",80],["T_WHITESPACE"," ",80],["T_VARIABLE","$catalogUrl",80],",",["T_WHITESPACE","\n        ",80],["T_NS_SEPARATOR","\\",81],["T_STRING","Magento",81],["T_NS_SEPARATOR","\\",81],["T_STRING","Framework",81],["T_NS_SEPARATOR","\\",81],["T_STRING","Stdlib",81],["T_NS_SEPARATOR","\\",81],["T_STRING","DateTime",81],["T_NS_SEPARATOR","\\",81],["T_STRING","TimezoneInterface",81],["T_WHITESPACE"," ",81],["T_VARIABLE","$localeDate",81],",",["T_WHITESPACE","\n        ",81],["T_NS_SEPARATOR","\\",82],["T_STRING","Magento",82],["T_NS_SEPARATOR","\\",82],["T_STRING","Customer",82],["T_NS_SEPARATOR","\\",82],["T_STRING","Model",82],["T_NS_SEPARATOR","\\",82],["T_STRING","Session",82],["T_WHITESPACE"," ",82],["T_VARIABLE","$customerSession",82],",",["T_WHITESPACE","\n        ",82],["T_NS_SEPARATOR","\\",83],["T_STRING","Magento",83],["T_NS_SEPARATOR","\\",83],["T_STRING","Framework",83],["T_NS_SEPARATOR","\\",83],["T_STRING","Stdlib",83],["T_NS_SEPARATOR","\\",83],["T_STRING","DateTime",83],["T_WHITESPACE"," ",83],["T_VARIABLE","$dateTime",83],",",["T_WHITESPACE","\n        ",83],["T_NS_SEPARATOR","\\",84],["T_STRING","Magento",84],["T_NS_SEPARATOR","\\",84],["T_STRING","Customer",84],["T_NS_SEPARATOR","\\",84],["T_STRING","Api",84],["T_NS_SEPARATOR","\\",84],["T_STRING","GroupManagementInterface",84],["T_WHITESPACE"," ",84],["T_VARIABLE","$groupManagement",84],",",["T_WHITESPACE","\n        ",84],["T_NS_SEPARATOR","\\",85],["T_STRING","Magento",85],["T_NS_SEPARATOR","\\",85],["T_STRING","Catalog",85],["T_NS_SEPARATOR","\\",85],["T_STRING","Model",85],["T_NS_SEPARATOR","\\",85],["T_STRING","ResourceModel",85],["T_NS_SEPARATOR","\\",85],["T_STRING","Product",85],["T_NS_SEPARATOR","\\",85],["T_STRING","Attribute",85],["T_NS_SEPARATOR","\\",85],["T_STRING","CollectionFactory",85],["T_WHITESPACE"," ",85],["T_VARIABLE","$attributeCollectionFactory",85],",",["T_WHITESPACE","\n        ",85],["T_NS_SEPARATOR","\\",86],["T_STRING","Magento",86],["T_NS_SEPARATOR","\\",86],["T_STRING","Framework",86],["T_NS_SEPARATOR","\\",86],["T_STRING","DB",86],["T_NS_SEPARATOR","\\",86],["T_STRING","Adapter",86],["T_NS_SEPARATOR","\\",86],["T_STRING","AdapterInterface",86],["T_WHITESPACE"," ",86],["T_VARIABLE","$connection",86],["T_WHITESPACE"," ",86],"=",["T_WHITESPACE"," ",86],["T_STRING","null",86],["T_WHITESPACE","\n    ",86],")",["T_WHITESPACE"," ",87],"{",["T_WHITESPACE","\n        ",87],["T_VARIABLE","$this",88],["T_OBJECT_OPERATOR","->",88],["T_STRING","_attributeCollectionFactory",88],["T_WHITESPACE"," ",88],"=",["T_WHITESPACE"," ",88],["T_VARIABLE","$attributeCollectionFactory",88],";",["T_WHITESPACE","\n        ",88],["T_STRING","parent",89],["T_DOUBLE_COLON","::",89],["T_STRING","__construct",89],"(",["T_WHITESPACE","\n            ",89],["T_VARIABLE","$entityFactory",90],",",["T_WHITESPACE","\n            ",90],["T_VARIABLE","$logger",91],",",["T_WHITESPACE","\n            ",91],["T_VARIABLE","$fetchStrategy",92],",",["T_WHITESPACE","\n            ",92],["T_VARIABLE","$eventManager",93],",",["T_WHITESPACE","\n            ",93],["T_VARIABLE","$eavConfig",94],",",["T_WHITESPACE","\n            ",94],["T_VARIABLE","$resource",95],",",["T_WHITESPACE","\n            ",95],["T_VARIABLE","$eavEntityFactory",96],",",["T_WHITESPACE","\n            ",96],["T_VARIABLE","$resourceHelper",97],",",["T_WHITESPACE","\n            ",97],["T_VARIABLE","$universalFactory",98],",",["T_WHITESPACE","\n            ",98],["T_VARIABLE","$storeManager",99],",",["T_WHITESPACE","\n            ",99],["T_VARIABLE","$moduleManager",100],",",["T_WHITESPACE","\n            ",100],["T_VARIABLE","$catalogProductFlatState",101],",",["T_WHITESPACE","\n            ",101],["T_VARIABLE","$scopeConfig",102],",",["T_WHITESPACE","\n            ",102],["T_VARIABLE","$productOptionFactory",103],",",["T_WHITESPACE","\n            ",103],["T_VARIABLE","$catalogUrl",104],",",["T_WHITESPACE","\n            ",104],["T_VARIABLE","$localeDate",105],",",["T_WHITESPACE","\n            ",105],["T_VARIABLE","$customerSession",106],",",["T_WHITESPACE","\n            ",106],["T_VARIABLE","$dateTime",107],",",["T_WHITESPACE","\n            ",107],["T_VARIABLE","$groupManagement",108],",",["T_WHITESPACE","\n            ",108],["T_VARIABLE","$connection",109],["T_WHITESPACE","\n        ",109],")",";",["T_WHITESPACE","\n    ",110],"}",["T_WHITESPACE","\n\n    ",111],["T_DOC_COMMENT","\/**\n     * Add search query filter\n     *\n     * @param string $query\n     * @return $this\n     *\/",113],["T_WHITESPACE","\n    ",118],["T_PUBLIC","public",119],["T_WHITESPACE"," ",119],["T_FUNCTION","function",119],["T_WHITESPACE"," ",119],["T_STRING","addSearchFilter",119],"(",["T_VARIABLE","$query",119],")",["T_WHITESPACE","\n    ",119],"{",["T_WHITESPACE","\n        ",120],["T_VARIABLE","$this",121],["T_OBJECT_OPERATOR","->",121],["T_STRING","_searchQuery",121],["T_WHITESPACE"," ",121],"=",["T_WHITESPACE"," ",121],["T_VARIABLE","$query",121],";",["T_WHITESPACE","\n        ",121],["T_VARIABLE","$this",122],["T_OBJECT_OPERATOR","->",122],["T_STRING","addFieldToFilter",122],"(",["T_WHITESPACE","\n            ",122],["T_VARIABLE","$this",123],["T_OBJECT_OPERATOR","->",123],["T_STRING","getEntity",123],"(",")",["T_OBJECT_OPERATOR","->",123],["T_STRING","getLinkField",123],"(",")",",",["T_WHITESPACE","\n            ",123],"[",["T_CONSTANT_ENCAPSED_STRING","'in'",124],["T_WHITESPACE"," ",124],["T_DOUBLE_ARROW","=>",124],["T_WHITESPACE"," ",124],["T_NEW","new",124],["T_WHITESPACE"," ",124],["T_NS_SEPARATOR","\\",124],["T_STRING","Zend_Db_Expr",124],"(",["T_VARIABLE","$this",124],["T_OBJECT_OPERATOR","->",124],["T_STRING","_getSearchEntityIdsSql",124],"(",["T_VARIABLE","$query",124],")",")","]",")",";",["T_WHITESPACE","\n        ",124],["T_RETURN","return",125],["T_WHITESPACE"," ",125],["T_VARIABLE","$this",125],";",["T_WHITESPACE","\n    ",125],"}",["T_WHITESPACE","\n\n    ",126],["T_DOC_COMMENT","\/**\n     * Add backend search query filter (search by all stores)\n     *\n     * @param string $query\n     * @return $this\n     *\/",128],["T_WHITESPACE","\n    ",133],["T_PUBLIC","public",134],["T_WHITESPACE"," ",134],["T_FUNCTION","function",134],["T_WHITESPACE"," ",134],["T_STRING","addBackendSearchFilter",134],"(",["T_VARIABLE","$query",134],")",["T_WHITESPACE","\n    ",134],"{",["T_WHITESPACE","\n        ",135],["T_VARIABLE","$this",136],["T_OBJECT_OPERATOR","->",136],["T_STRING","_searchQuery",136],["T_WHITESPACE"," ",136],"=",["T_WHITESPACE"," ",136],["T_VARIABLE","$query",136],";",["T_WHITESPACE","\n        ",136],["T_VARIABLE","$this",137],["T_OBJECT_OPERATOR","->",137],["T_STRING","addFieldToFilter",137],"(",["T_WHITESPACE","\n            ",137],["T_VARIABLE","$this",138],["T_OBJECT_OPERATOR","->",138],["T_STRING","getEntity",138],"(",")",["T_OBJECT_OPERATOR","->",138],["T_STRING","getLinkField",138],"(",")",",",["T_WHITESPACE","\n            ",138],"[",["T_CONSTANT_ENCAPSED_STRING","'in'",139],["T_WHITESPACE"," ",139],["T_DOUBLE_ARROW","=>",139],["T_WHITESPACE"," ",139],["T_NEW","new",139],["T_WHITESPACE"," ",139],["T_NS_SEPARATOR","\\",139],["T_STRING","Zend_Db_Expr",139],"(",["T_VARIABLE","$this",139],["T_OBJECT_OPERATOR","->",139],["T_STRING","_getSearchEntityIdsSql",139],"(",["T_VARIABLE","$query",139],",",["T_WHITESPACE"," ",139],["T_STRING","false",139],")",")","]",["T_WHITESPACE","\n        ",139],")",";",["T_WHITESPACE","\n        ",140],["T_RETURN","return",141],["T_WHITESPACE"," ",141],["T_VARIABLE","$this",141],";",["T_WHITESPACE","\n    ",141],"}",["T_WHITESPACE","\n\n    ",142],["T_DOC_COMMENT","\/**\n     * Retrieve collection of all attributes\n     *\n     * @return \\Magento\\Framework\\Data\\Collection\\AbstractDb\n     *\/",144],["T_WHITESPACE","\n    ",148],["T_PROTECTED","protected",149],["T_WHITESPACE"," ",149],["T_FUNCTION","function",149],["T_WHITESPACE"," ",149],["T_STRING","_getAttributesCollection",149],"(",")",["T_WHITESPACE","\n    ",149],"{",["T_WHITESPACE","\n        ",150],["T_IF","if",151],["T_WHITESPACE"," ",151],"(","!",["T_VARIABLE","$this",151],["T_OBJECT_OPERATOR","->",151],["T_STRING","_attributesCollection",151],")",["T_WHITESPACE"," ",151],"{",["T_WHITESPACE","\n            ",151],["T_VARIABLE","$this",152],["T_OBJECT_OPERATOR","->",152],["T_STRING","_attributesCollection",152],["T_WHITESPACE"," ",152],"=",["T_WHITESPACE"," ",152],["T_VARIABLE","$this",152],["T_OBJECT_OPERATOR","->",152],["T_STRING","_attributeCollectionFactory",152],["T_OBJECT_OPERATOR","->",152],["T_STRING","create",152],"(",")",["T_OBJECT_OPERATOR","->",152],["T_STRING","load",152],"(",")",";",["T_WHITESPACE","\n\n            ",152],["T_FOREACH","foreach",154],["T_WHITESPACE"," ",154],"(",["T_VARIABLE","$this",154],["T_OBJECT_OPERATOR","->",154],["T_STRING","_attributesCollection",154],["T_WHITESPACE"," ",154],["T_AS","as",154],["T_WHITESPACE"," ",154],["T_VARIABLE","$attribute",154],")",["T_WHITESPACE"," ",154],"{",["T_WHITESPACE","\n                ",154],["T_VARIABLE","$attribute",155],["T_OBJECT_OPERATOR","->",155],["T_STRING","setEntity",155],"(",["T_VARIABLE","$this",155],["T_OBJECT_OPERATOR","->",155],["T_STRING","getEntity",155],"(",")",")",";",["T_WHITESPACE","\n            ",155],"}",["T_WHITESPACE","\n        ",156],"}",["T_WHITESPACE","\n        ",157],["T_RETURN","return",158],["T_WHITESPACE"," ",158],["T_VARIABLE","$this",158],["T_OBJECT_OPERATOR","->",158],["T_STRING","_attributesCollection",158],";",["T_WHITESPACE","\n    ",158],"}",["T_WHITESPACE","\n\n    ",159],["T_DOC_COMMENT","\/**\n     * Check attribute is Text and is Searchable\n     *\n     * @param \\Magento\\Catalog\\Model\\Entity\\Attribute $attribute\n     * @return boolean\n     *\/",161],["T_WHITESPACE","\n    ",166],["T_PROTECTED","protected",167],["T_WHITESPACE"," ",167],["T_FUNCTION","function",167],["T_WHITESPACE"," ",167],["T_STRING","_isAttributeTextAndSearchable",167],"(",["T_VARIABLE","$attribute",167],")",["T_WHITESPACE","\n    ",167],"{",["T_WHITESPACE","\n        ",168],["T_IF","if",169],["T_WHITESPACE"," ",169],"(",["T_VARIABLE","$attribute",169],["T_OBJECT_OPERATOR","->",169],["T_STRING","getIsSearchable",169],"(",")",["T_WHITESPACE"," ",169],["T_BOOLEAN_AND","&&",169],["T_WHITESPACE"," ",169],"!",["T_STRING","in_array",169],"(",["T_WHITESPACE","\n            ",169],["T_VARIABLE","$attribute",170],["T_OBJECT_OPERATOR","->",170],["T_STRING","getFrontendInput",170],"(",")",",",["T_WHITESPACE","\n            ",170],"[",["T_CONSTANT_ENCAPSED_STRING","'select'",171],",",["T_WHITESPACE"," ",171],["T_CONSTANT_ENCAPSED_STRING","'multiselect'",171],"]",["T_WHITESPACE","\n        ",171],")",["T_WHITESPACE"," ",172],["T_BOOLEAN_AND","&&",172],["T_WHITESPACE"," ",172],"(",["T_STRING","in_array",172],"(",["T_WHITESPACE","\n            ",172],["T_VARIABLE","$attribute",173],["T_OBJECT_OPERATOR","->",173],["T_STRING","getBackendType",173],"(",")",",",["T_WHITESPACE","\n            ",173],"[",["T_CONSTANT_ENCAPSED_STRING","'varchar'",174],",",["T_WHITESPACE"," ",174],["T_CONSTANT_ENCAPSED_STRING","'text'",174],"]",["T_WHITESPACE","\n        ",174],")",["T_WHITESPACE"," ",175],["T_BOOLEAN_OR","||",175],["T_WHITESPACE"," ",175],["T_VARIABLE","$attribute",175],["T_OBJECT_OPERATOR","->",175],["T_STRING","getBackendType",175],"(",")",["T_WHITESPACE"," ",175],["T_IS_EQUAL","==",175],["T_WHITESPACE"," ",175],["T_CONSTANT_ENCAPSED_STRING","'static'",175],")",["T_WHITESPACE","\n        ",175],")",["T_WHITESPACE"," ",176],"{",["T_WHITESPACE","\n            ",176],["T_RETURN","return",177],["T_WHITESPACE"," ",177],["T_STRING","true",177],";",["T_WHITESPACE","\n        ",177],"}",["T_WHITESPACE","\n        ",178],["T_RETURN","return",179],["T_WHITESPACE"," ",179],["T_STRING","false",179],";",["T_WHITESPACE","\n    ",179],"}",["T_WHITESPACE","\n\n    ",180],["T_DOC_COMMENT","\/**\n     * Check attributes has options and searchable\n     *\n     * @param \\Magento\\Catalog\\Model\\Entity\\Attribute $attribute\n     * @return boolean\n     *\/",182],["T_WHITESPACE","\n    ",187],["T_PROTECTED","protected",188],["T_WHITESPACE"," ",188],["T_FUNCTION","function",188],["T_WHITESPACE"," ",188],["T_STRING","_hasAttributeOptionsAndSearchable",188],"(",["T_VARIABLE","$attribute",188],")",["T_WHITESPACE","\n    ",188],"{",["T_WHITESPACE","\n        ",189],["T_IF","if",190],["T_WHITESPACE"," ",190],"(",["T_VARIABLE","$attribute",190],["T_OBJECT_OPERATOR","->",190],["T_STRING","getIsSearchable",190],"(",")",["T_WHITESPACE"," ",190],["T_BOOLEAN_AND","&&",190],["T_WHITESPACE"," ",190],["T_STRING","in_array",190],"(",["T_VARIABLE","$attribute",190],["T_OBJECT_OPERATOR","->",190],["T_STRING","getFrontendInput",190],"(",")",",",["T_WHITESPACE"," ",190],"[",["T_CONSTANT_ENCAPSED_STRING","'select'",190],",",["T_WHITESPACE"," ",190],["T_CONSTANT_ENCAPSED_STRING","'multiselect'",190],"]",")",["T_WHITESPACE","\n        ",190],")",["T_WHITESPACE"," ",191],"{",["T_WHITESPACE","\n            ",191],["T_RETURN","return",192],["T_WHITESPACE"," ",192],["T_STRING","true",192],";",["T_WHITESPACE","\n        ",192],"}",["T_WHITESPACE","\n\n        ",193],["T_RETURN","return",195],["T_WHITESPACE"," ",195],["T_STRING","false",195],";",["T_WHITESPACE","\n    ",195],"}",["T_WHITESPACE","\n\n    ",196],["T_DOC_COMMENT","\/**\n     * Retrieve SQL for search entities\n     *\n     * @param mixed $query\n     * @param bool $searchOnlyInCurrentStore Search only in current store or in all stores\n     * @return string\n     *\/",198],["T_WHITESPACE","\n    ",204],["T_PROTECTED","protected",205],["T_WHITESPACE"," ",205],["T_FUNCTION","function",205],["T_WHITESPACE"," ",205],["T_STRING","_getSearchEntityIdsSql",205],"(",["T_VARIABLE","$query",205],",",["T_WHITESPACE"," ",205],["T_VARIABLE","$searchOnlyInCurrentStore",205],["T_WHITESPACE"," ",205],"=",["T_WHITESPACE"," ",205],["T_STRING","true",205],")",["T_WHITESPACE","\n    ",205],"{",["T_WHITESPACE","\n        ",206],["T_VARIABLE","$tables",207],["T_WHITESPACE"," ",207],"=",["T_WHITESPACE"," ",207],"[","]",";",["T_WHITESPACE","\n        ",207],["T_VARIABLE","$selects",208],["T_WHITESPACE"," ",208],"=",["T_WHITESPACE"," ",208],"[","]",";",["T_WHITESPACE","\n\n        ",208],["T_VARIABLE","$likeOptions",210],["T_WHITESPACE"," ",210],"=",["T_WHITESPACE"," ",210],"[",["T_CONSTANT_ENCAPSED_STRING","'position'",210],["T_WHITESPACE"," ",210],["T_DOUBLE_ARROW","=>",210],["T_WHITESPACE"," ",210],["T_CONSTANT_ENCAPSED_STRING","'any'",210],"]",";",["T_WHITESPACE","\n\n        ",210],["T_VARIABLE","$linkField",212],["T_WHITESPACE"," ",212],"=",["T_WHITESPACE"," ",212],["T_VARIABLE","$this",212],["T_OBJECT_OPERATOR","->",212],["T_STRING","getEntity",212],"(",")",["T_OBJECT_OPERATOR","->",212],["T_STRING","getLinkField",212],"(",")",";",["T_WHITESPACE","\n\n        ",212],["T_DOC_COMMENT","\/**\n         * Collect tables and attribute ids of attributes with string values\n         *\/",214],["T_WHITESPACE","\n        ",216],["T_FOREACH","foreach",217],["T_WHITESPACE"," ",217],"(",["T_VARIABLE","$this",217],["T_OBJECT_OPERATOR","->",217],["T_STRING","_getAttributesCollection",217],"(",")",["T_WHITESPACE"," ",217],["T_AS","as",217],["T_WHITESPACE"," ",217],["T_VARIABLE","$attribute",217],")",["T_WHITESPACE"," ",217],"{",["T_WHITESPACE","\n            ",217],["T_DOC_COMMENT","\/** @var \\Magento\\Catalog\\Model\\Entity\\Attribute $attribute *\/",218],["T_WHITESPACE","\n            ",218],["T_VARIABLE","$attributeCode",219],["T_WHITESPACE"," ",219],"=",["T_WHITESPACE"," ",219],["T_VARIABLE","$attribute",219],["T_OBJECT_OPERATOR","->",219],["T_STRING","getAttributeCode",219],"(",")",";",["T_WHITESPACE","\n            ",219],["T_IF","if",220],["T_WHITESPACE"," ",220],"(",["T_VARIABLE","$this",220],["T_OBJECT_OPERATOR","->",220],["T_STRING","_isAttributeTextAndSearchable",220],"(",["T_VARIABLE","$attribute",220],")",")",["T_WHITESPACE"," ",220],"{",["T_WHITESPACE","\n                ",220],["T_VARIABLE","$table",221],["T_WHITESPACE"," ",221],"=",["T_WHITESPACE"," ",221],["T_VARIABLE","$attribute",221],["T_OBJECT_OPERATOR","->",221],["T_STRING","getBackendTable",221],"(",")",";",["T_WHITESPACE","\n                ",221],["T_IF","if",222],["T_WHITESPACE"," ",222],"(","!",["T_ISSET","isset",222],"(",["T_VARIABLE","$tables",222],"[",["T_VARIABLE","$table",222],"]",")",["T_WHITESPACE"," ",222],["T_BOOLEAN_AND","&&",222],["T_WHITESPACE"," ",222],["T_VARIABLE","$attribute",222],["T_OBJECT_OPERATOR","->",222],["T_STRING","getBackendType",222],"(",")",["T_WHITESPACE"," ",222],["T_IS_NOT_EQUAL","!=",222],["T_WHITESPACE"," ",222],["T_CONSTANT_ENCAPSED_STRING","'static'",222],")",["T_WHITESPACE"," ",222],"{",["T_WHITESPACE","\n                    ",222],["T_VARIABLE","$tables",223],"[",["T_VARIABLE","$table",223],"]",["T_WHITESPACE"," ",223],"=",["T_WHITESPACE"," ",223],"[","]",";",["T_WHITESPACE","\n                ",223],"}",["T_WHITESPACE","\n\n                ",224],["T_IF","if",226],["T_WHITESPACE"," ",226],"(",["T_VARIABLE","$attribute",226],["T_OBJECT_OPERATOR","->",226],["T_STRING","getBackendType",226],"(",")",["T_WHITESPACE"," ",226],["T_IS_EQUAL","==",226],["T_WHITESPACE"," ",226],["T_CONSTANT_ENCAPSED_STRING","'static'",226],")",["T_WHITESPACE"," ",226],"{",["T_WHITESPACE","\n                    ",226],["T_VARIABLE","$selects",227],"[","]",["T_WHITESPACE"," ",227],"=",["T_WHITESPACE"," ",227],["T_VARIABLE","$this",227],["T_OBJECT_OPERATOR","->",227],["T_STRING","getConnection",227],"(",")",["T_OBJECT_OPERATOR","->",227],["T_STRING","select",227],"(",")",["T_OBJECT_OPERATOR","->",227],["T_STRING","from",227],"(",["T_WHITESPACE","\n                        ",227],["T_VARIABLE","$table",228],",",["T_WHITESPACE","\n                        ",228],["T_VARIABLE","$linkField",229],["T_WHITESPACE","\n                    ",229],")",["T_OBJECT_OPERATOR","->",230],["T_STRING","where",230],"(",["T_WHITESPACE","\n                        ",230],["T_VARIABLE","$this",231],["T_OBJECT_OPERATOR","->",231],["T_STRING","_resourceHelper",231],["T_OBJECT_OPERATOR","->",231],["T_STRING","getCILike",231],"(",["T_VARIABLE","$attributeCode",231],",",["T_WHITESPACE"," ",231],["T_VARIABLE","$this",231],["T_OBJECT_OPERATOR","->",231],["T_STRING","_searchQuery",231],",",["T_WHITESPACE"," ",231],["T_VARIABLE","$likeOptions",231],")",["T_WHITESPACE","\n                    ",231],")",";",["T_WHITESPACE","\n                ",232],"}",["T_WHITESPACE"," ",233],["T_ELSE","else",233],["T_WHITESPACE"," ",233],"{",["T_WHITESPACE","\n                    ",233],["T_VARIABLE","$tables",234],"[",["T_VARIABLE","$table",234],"]","[","]",["T_WHITESPACE"," ",234],"=",["T_WHITESPACE"," ",234],["T_VARIABLE","$attribute",234],["T_OBJECT_OPERATOR","->",234],["T_STRING","getId",234],"(",")",";",["T_WHITESPACE","\n                ",234],"}",["T_WHITESPACE","\n            ",235],"}",["T_WHITESPACE","\n        ",236],"}",["T_WHITESPACE","\n\n        ",237],["T_IF","if",239],["T_WHITESPACE"," ",239],"(",["T_VARIABLE","$searchOnlyInCurrentStore",239],")",["T_WHITESPACE"," ",239],"{",["T_WHITESPACE","\n            ",239],["T_VARIABLE","$joinCondition",240],["T_WHITESPACE"," ",240],"=",["T_WHITESPACE"," ",240],["T_VARIABLE","$this",240],["T_OBJECT_OPERATOR","->",240],["T_STRING","getConnection",240],"(",")",["T_OBJECT_OPERATOR","->",240],["T_STRING","quoteInto",240],"(",["T_WHITESPACE","\n                ",240],"\"",["T_ENCAPSED_AND_WHITESPACE","t1.",241],["T_CURLY_OPEN","{",241],["T_VARIABLE","$linkField",241],"}",["T_ENCAPSED_AND_WHITESPACE"," = t2.",241],["T_CURLY_OPEN","{",241],["T_VARIABLE","$linkField",241],"}",["T_ENCAPSED_AND_WHITESPACE"," AND t1.attribute_id = t2.attribute_id AND t2.store_id = ?",241],"\"",",",["T_WHITESPACE","\n                ",241],["T_VARIABLE","$this",242],["T_OBJECT_OPERATOR","->",242],["T_STRING","getStoreId",242],"(",")",["T_WHITESPACE","\n            ",242],")",";",["T_WHITESPACE","\n        ",243],"}",["T_WHITESPACE"," ",244],["T_ELSE","else",244],["T_WHITESPACE"," ",244],"{",["T_WHITESPACE","\n            ",244],["T_VARIABLE","$joinCondition",245],["T_WHITESPACE"," ",245],"=",["T_WHITESPACE"," ",245],"\"",["T_ENCAPSED_AND_WHITESPACE","t1.",245],["T_CURLY_OPEN","{",245],["T_VARIABLE","$linkField",245],"}",["T_ENCAPSED_AND_WHITESPACE"," = t2.",245],["T_CURLY_OPEN","{",245],["T_VARIABLE","$linkField",245],"}",["T_ENCAPSED_AND_WHITESPACE"," AND t1.attribute_id = t2.attribute_id",245],"\"",";",["T_WHITESPACE","\n        ",245],"}",["T_WHITESPACE","\n\n        ",246],["T_VARIABLE","$ifValueId",248],["T_WHITESPACE"," ",248],"=",["T_WHITESPACE"," ",248],["T_VARIABLE","$this",248],["T_OBJECT_OPERATOR","->",248],["T_STRING","getConnection",248],"(",")",["T_OBJECT_OPERATOR","->",248],["T_STRING","getIfNullSql",248],"(",["T_CONSTANT_ENCAPSED_STRING","'t2.value'",248],",",["T_WHITESPACE"," ",248],["T_CONSTANT_ENCAPSED_STRING","'t1.value'",248],")",";",["T_WHITESPACE","\n        ",248],["T_FOREACH","foreach",249],["T_WHITESPACE"," ",249],"(",["T_VARIABLE","$tables",249],["T_WHITESPACE"," ",249],["T_AS","as",249],["T_WHITESPACE"," ",249],["T_VARIABLE","$table",249],["T_WHITESPACE"," ",249],["T_DOUBLE_ARROW","=>",249],["T_WHITESPACE"," ",249],["T_VARIABLE","$attributeIds",249],")",["T_WHITESPACE"," ",249],"{",["T_WHITESPACE","\n            ",249],["T_VARIABLE","$selects",250],"[","]",["T_WHITESPACE"," ",250],"=",["T_WHITESPACE"," ",250],["T_VARIABLE","$this",250],["T_OBJECT_OPERATOR","->",250],["T_STRING","getConnection",250],"(",")",["T_OBJECT_OPERATOR","->",250],["T_STRING","select",250],"(",")",["T_OBJECT_OPERATOR","->",250],["T_STRING","from",250],"(",["T_WHITESPACE","\n                ",250],"[",["T_CONSTANT_ENCAPSED_STRING","'t1'",251],["T_WHITESPACE"," ",251],["T_DOUBLE_ARROW","=>",251],["T_WHITESPACE"," ",251],["T_VARIABLE","$table",251],"]",",",["T_WHITESPACE","\n                ",251],["T_VARIABLE","$linkField",252],["T_WHITESPACE","\n            ",252],")",["T_OBJECT_OPERATOR","->",253],["T_STRING","joinLeft",253],"(",["T_WHITESPACE","\n                ",253],"[",["T_CONSTANT_ENCAPSED_STRING","'t2'",254],["T_WHITESPACE"," ",254],["T_DOUBLE_ARROW","=>",254],["T_WHITESPACE"," ",254],["T_VARIABLE","$table",254],"]",",",["T_WHITESPACE","\n                ",254],["T_VARIABLE","$joinCondition",255],",",["T_WHITESPACE","\n                ",255],"[","]",["T_WHITESPACE","\n            ",256],")",["T_OBJECT_OPERATOR","->",257],["T_STRING","where",257],"(",["T_WHITESPACE","\n                ",257],["T_CONSTANT_ENCAPSED_STRING","'t1.attribute_id IN (?)'",258],",",["T_WHITESPACE","\n                ",258],["T_VARIABLE","$attributeIds",259],["T_WHITESPACE","\n            ",259],")",["T_OBJECT_OPERATOR","->",260],["T_STRING","where",260],"(",["T_WHITESPACE","\n                ",260],["T_CONSTANT_ENCAPSED_STRING","'t1.store_id = ?'",261],",",["T_WHITESPACE","\n                ",261],["T_LNUMBER","0",262],["T_WHITESPACE","\n            ",262],")",["T_OBJECT_OPERATOR","->",263],["T_STRING","where",263],"(",["T_WHITESPACE","\n                ",263],["T_VARIABLE","$this",264],["T_OBJECT_OPERATOR","->",264],["T_STRING","_resourceHelper",264],["T_OBJECT_OPERATOR","->",264],["T_STRING","getCILike",264],"(",["T_VARIABLE","$ifValueId",264],",",["T_WHITESPACE"," ",264],["T_VARIABLE","$this",264],["T_OBJECT_OPERATOR","->",264],["T_STRING","_searchQuery",264],",",["T_WHITESPACE"," ",264],["T_VARIABLE","$likeOptions",264],")",["T_WHITESPACE","\n            ",264],")",";",["T_WHITESPACE","\n        ",265],"}",["T_WHITESPACE","\n\n        ",266],["T_VARIABLE","$sql",268],["T_WHITESPACE"," ",268],"=",["T_WHITESPACE"," ",268],["T_VARIABLE","$this",268],["T_OBJECT_OPERATOR","->",268],["T_STRING","_getSearchInOptionSql",268],"(",["T_VARIABLE","$query",268],")",";",["T_WHITESPACE","\n        ",268],["T_IF","if",269],["T_WHITESPACE"," ",269],"(",["T_VARIABLE","$sql",269],")",["T_WHITESPACE"," ",269],"{",["T_WHITESPACE","\n            ",269],["T_VARIABLE","$selects",270],"[","]",["T_WHITESPACE"," ",270],"=",["T_WHITESPACE"," ",270],"\"",["T_ENCAPSED_AND_WHITESPACE","SELECT * FROM (",270],["T_CURLY_OPEN","{",270],["T_VARIABLE","$sql",270],"}",["T_ENCAPSED_AND_WHITESPACE",") AS inoptionsql",270],"\"",";",["T_WHITESPACE"," ",270],["T_COMMENT","\/\/ inherent unions may be inside\n",270],["T_WHITESPACE","        ",271],"}",["T_WHITESPACE","\n\n        ",271],["T_VARIABLE","$sql",273],["T_WHITESPACE"," ",273],"=",["T_WHITESPACE"," ",273],["T_VARIABLE","$this",273],["T_OBJECT_OPERATOR","->",273],["T_STRING","getConnection",273],"(",")",["T_OBJECT_OPERATOR","->",273],["T_STRING","select",273],"(",")",["T_OBJECT_OPERATOR","->",273],["T_STRING","union",273],"(",["T_VARIABLE","$selects",273],",",["T_WHITESPACE"," ",273],["T_NS_SEPARATOR","\\",273],["T_STRING","Magento",273],["T_NS_SEPARATOR","\\",273],["T_STRING","Framework",273],["T_NS_SEPARATOR","\\",273],["T_STRING","DB",273],["T_NS_SEPARATOR","\\",273],["T_STRING","Select",273],["T_DOUBLE_COLON","::",273],["T_STRING","SQL_UNION_ALL",273],")",";",["T_WHITESPACE","\n        ",273],["T_RETURN","return",274],["T_WHITESPACE"," ",274],["T_VARIABLE","$sql",274],";",["T_WHITESPACE","\n    ",274],"}",["T_WHITESPACE","\n\n    ",275],["T_DOC_COMMENT","\/**\n     * Retrieve SQL for search entities by option\n     *\n     * @param mixed $query\n     * @return string\n     * @SuppressWarnings(PHPMD.CyclomaticComplexity)\n     * @SuppressWarnings(PHPMD.UnusedFormalParameter)\n     *\/",277],["T_WHITESPACE","\n    ",284],["T_PROTECTED","protected",285],["T_WHITESPACE"," ",285],["T_FUNCTION","function",285],["T_WHITESPACE"," ",285],["T_STRING","_getSearchInOptionSql",285],"(",["T_VARIABLE","$query",285],")",["T_WHITESPACE","\n    ",285],"{",["T_WHITESPACE","\n        ",286],["T_VARIABLE","$attributeIds",287],["T_WHITESPACE"," ",287],"=",["T_WHITESPACE"," ",287],"[","]",";",["T_WHITESPACE","\n        ",287],["T_VARIABLE","$attributeTables",288],["T_WHITESPACE"," ",288],"=",["T_WHITESPACE"," ",288],"[","]",";",["T_WHITESPACE","\n        ",288],["T_VARIABLE","$storeId",289],["T_WHITESPACE"," ",289],"=",["T_WHITESPACE"," ",289],["T_INT_CAST","(int)",289],["T_VARIABLE","$this",289],["T_OBJECT_OPERATOR","->",289],["T_STRING","getStoreId",289],"(",")",";",["T_WHITESPACE","\n\n        ",289],["T_DOC_COMMENT","\/**\n         * Collect attributes with options\n         *\/",291],["T_WHITESPACE","\n        ",293],["T_FOREACH","foreach",294],["T_WHITESPACE"," ",294],"(",["T_VARIABLE","$this",294],["T_OBJECT_OPERATOR","->",294],["T_STRING","_getAttributesCollection",294],"(",")",["T_WHITESPACE"," ",294],["T_AS","as",294],["T_WHITESPACE"," ",294],["T_VARIABLE","$attribute",294],")",["T_WHITESPACE"," ",294],"{",["T_WHITESPACE","\n            ",294],["T_IF","if",295],["T_WHITESPACE"," ",295],"(",["T_VARIABLE","$this",295],["T_OBJECT_OPERATOR","->",295],["T_STRING","_hasAttributeOptionsAndSearchable",295],"(",["T_VARIABLE","$attribute",295],")",")",["T_WHITESPACE"," ",295],"{",["T_WHITESPACE","\n                ",295],["T_VARIABLE","$attributeTables",296],"[",["T_VARIABLE","$attribute",296],["T_OBJECT_OPERATOR","->",296],["T_STRING","getFrontendInput",296],"(",")","]",["T_WHITESPACE"," ",296],"=",["T_WHITESPACE"," ",296],["T_VARIABLE","$attribute",296],["T_OBJECT_OPERATOR","->",296],["T_STRING","getBackend",296],"(",")",["T_OBJECT_OPERATOR","->",296],["T_STRING","getTable",296],"(",")",";",["T_WHITESPACE","\n                ",296],["T_VARIABLE","$attributeIds",297],"[","]",["T_WHITESPACE"," ",297],"=",["T_WHITESPACE"," ",297],["T_VARIABLE","$attribute",297],["T_OBJECT_OPERATOR","->",297],["T_STRING","getId",297],"(",")",";",["T_WHITESPACE","\n            ",297],"}",["T_WHITESPACE","\n        ",298],"}",["T_WHITESPACE","\n        ",299],["T_IF","if",300],["T_WHITESPACE"," ",300],"(",["T_EMPTY","empty",300],"(",["T_VARIABLE","$attributeIds",300],")",")",["T_WHITESPACE"," ",300],"{",["T_WHITESPACE","\n            ",300],["T_RETURN","return",301],["T_WHITESPACE"," ",301],["T_STRING","false",301],";",["T_WHITESPACE","\n        ",301],"}",["T_WHITESPACE","\n\n        ",302],["T_VARIABLE","$optionTable",304],["T_WHITESPACE"," ",304],"=",["T_WHITESPACE"," ",304],["T_VARIABLE","$this",304],["T_OBJECT_OPERATOR","->",304],["T_STRING","_resource",304],["T_OBJECT_OPERATOR","->",304],["T_STRING","getTableName",304],"(",["T_CONSTANT_ENCAPSED_STRING","'eav_attribute_option'",304],")",";",["T_WHITESPACE","\n        ",304],["T_VARIABLE","$optionValueTable",305],["T_WHITESPACE"," ",305],"=",["T_WHITESPACE"," ",305],["T_VARIABLE","$this",305],["T_OBJECT_OPERATOR","->",305],["T_STRING","_resource",305],["T_OBJECT_OPERATOR","->",305],["T_STRING","getTableName",305],"(",["T_CONSTANT_ENCAPSED_STRING","'eav_attribute_option_value'",305],")",";",["T_WHITESPACE","\n        ",305],["T_VARIABLE","$attributesTable",306],["T_WHITESPACE"," ",306],"=",["T_WHITESPACE"," ",306],["T_VARIABLE","$this",306],["T_OBJECT_OPERATOR","->",306],["T_STRING","_resource",306],["T_OBJECT_OPERATOR","->",306],["T_STRING","getTableName",306],"(",["T_CONSTANT_ENCAPSED_STRING","'eav_attribute'",306],")",";",["T_WHITESPACE","\n\n        ",306],["T_DOC_COMMENT","\/**\n         * Select option Ids\n         *\/",308],["T_WHITESPACE","\n        ",310],["T_VARIABLE","$ifStoreId",311],["T_WHITESPACE"," ",311],"=",["T_WHITESPACE"," ",311],["T_VARIABLE","$this",311],["T_OBJECT_OPERATOR","->",311],["T_STRING","getConnection",311],"(",")",["T_OBJECT_OPERATOR","->",311],["T_STRING","getIfNullSql",311],"(",["T_CONSTANT_ENCAPSED_STRING","'s.store_id'",311],",",["T_WHITESPACE"," ",311],["T_CONSTANT_ENCAPSED_STRING","'d.store_id'",311],")",";",["T_WHITESPACE","\n        ",311],["T_VARIABLE","$ifValue",312],["T_WHITESPACE"," ",312],"=",["T_WHITESPACE"," ",312],["T_VARIABLE","$this",312],["T_OBJECT_OPERATOR","->",312],["T_STRING","getConnection",312],"(",")",["T_OBJECT_OPERATOR","->",312],["T_STRING","getCheckSql",312],"(",["T_CONSTANT_ENCAPSED_STRING","'s.value_id > 0'",312],",",["T_WHITESPACE"," ",312],["T_CONSTANT_ENCAPSED_STRING","'s.value'",312],",",["T_WHITESPACE"," ",312],["T_CONSTANT_ENCAPSED_STRING","'d.value'",312],")",";",["T_WHITESPACE","\n        ",312],["T_VARIABLE","$select",313],["T_WHITESPACE"," ",313],"=",["T_WHITESPACE"," ",313],["T_VARIABLE","$this",313],["T_OBJECT_OPERATOR","->",313],["T_STRING","getConnection",313],"(",")",["T_OBJECT_OPERATOR","->",313],["T_STRING","select",313],"(",")",["T_OBJECT_OPERATOR","->",313],["T_STRING","from",313],"(",["T_WHITESPACE","\n            ",313],"[",["T_CONSTANT_ENCAPSED_STRING","'d'",314],["T_WHITESPACE"," ",314],["T_DOUBLE_ARROW","=>",314],["T_WHITESPACE"," ",314],["T_VARIABLE","$optionValueTable",314],"]",",",["T_WHITESPACE","\n            ",314],"[",["T_CONSTANT_ENCAPSED_STRING","'option_id'",315],",",["T_WHITESPACE"," ",315],["T_CONSTANT_ENCAPSED_STRING","'o.attribute_id'",315],",",["T_WHITESPACE"," ",315],["T_CONSTANT_ENCAPSED_STRING","'store_id'",315],["T_WHITESPACE"," ",315],["T_DOUBLE_ARROW","=>",315],["T_WHITESPACE"," ",315],["T_VARIABLE","$ifStoreId",315],",",["T_WHITESPACE"," ",315],["T_CONSTANT_ENCAPSED_STRING","'a.frontend_input'",315],"]",["T_WHITESPACE","\n        ",315],")",["T_OBJECT_OPERATOR","->",316],["T_STRING","joinLeft",316],"(",["T_WHITESPACE","\n            ",316],"[",["T_CONSTANT_ENCAPSED_STRING","'s'",317],["T_WHITESPACE"," ",317],["T_DOUBLE_ARROW","=>",317],["T_WHITESPACE"," ",317],["T_VARIABLE","$optionValueTable",317],"]",",",["T_WHITESPACE","\n            ",317],["T_VARIABLE","$this",318],["T_OBJECT_OPERATOR","->",318],["T_STRING","getConnection",318],"(",")",["T_OBJECT_OPERATOR","->",318],["T_STRING","quoteInto",318],"(",["T_CONSTANT_ENCAPSED_STRING","'s.option_id = d.option_id AND s.store_id=?'",318],",",["T_WHITESPACE"," ",318],["T_VARIABLE","$storeId",318],")",",",["T_WHITESPACE","\n            ",318],"[","]",["T_WHITESPACE","\n        ",319],")",["T_OBJECT_OPERATOR","->",320],["T_STRING","join",320],"(",["T_WHITESPACE","\n            ",320],"[",["T_CONSTANT_ENCAPSED_STRING","'o'",321],["T_WHITESPACE"," ",321],["T_DOUBLE_ARROW","=>",321],["T_WHITESPACE"," ",321],["T_VARIABLE","$optionTable",321],"]",",",["T_WHITESPACE","\n            ",321],["T_CONSTANT_ENCAPSED_STRING","'o.option_id=d.option_id'",322],",",["T_WHITESPACE","\n            ",322],"[","]",["T_WHITESPACE","\n        ",323],")",["T_OBJECT_OPERATOR","->",324],["T_STRING","join",324],"(",["T_WHITESPACE","\n            ",324],"[",["T_CONSTANT_ENCAPSED_STRING","'a'",325],["T_WHITESPACE"," ",325],["T_DOUBLE_ARROW","=>",325],["T_WHITESPACE"," ",325],["T_VARIABLE","$attributesTable",325],"]",",",["T_WHITESPACE","\n            ",325],["T_CONSTANT_ENCAPSED_STRING","'o.attribute_id=a.attribute_id'",326],",",["T_WHITESPACE","\n            ",326],"[","]",["T_WHITESPACE","\n        ",327],")",["T_OBJECT_OPERATOR","->",328],["T_STRING","where",328],"(",["T_WHITESPACE","\n            ",328],["T_CONSTANT_ENCAPSED_STRING","'d.store_id=0'",329],["T_WHITESPACE","\n        ",329],")",["T_OBJECT_OPERATOR","->",330],["T_STRING","where",330],"(",["T_WHITESPACE","\n            ",330],["T_CONSTANT_ENCAPSED_STRING","'o.attribute_id IN (?)'",331],",",["T_WHITESPACE","\n            ",331],["T_VARIABLE","$attributeIds",332],["T_WHITESPACE","\n        ",332],")",["T_OBJECT_OPERATOR","->",333],["T_STRING","where",333],"(",["T_WHITESPACE","\n            ",333],["T_VARIABLE","$this",334],["T_OBJECT_OPERATOR","->",334],["T_STRING","_resourceHelper",334],["T_OBJECT_OPERATOR","->",334],["T_STRING","getCILike",334],"(",["T_VARIABLE","$ifValue",334],",",["T_WHITESPACE"," ",334],["T_VARIABLE","$this",334],["T_OBJECT_OPERATOR","->",334],["T_STRING","_searchQuery",334],",",["T_WHITESPACE"," ",334],"[",["T_CONSTANT_ENCAPSED_STRING","'position'",334],["T_WHITESPACE"," ",334],["T_DOUBLE_ARROW","=>",334],["T_WHITESPACE"," ",334],["T_CONSTANT_ENCAPSED_STRING","'any'",334],"]",")",["T_WHITESPACE","\n        ",334],")",";",["T_WHITESPACE","\n\n        ",335],["T_VARIABLE","$options",337],["T_WHITESPACE"," ",337],"=",["T_WHITESPACE"," ",337],["T_VARIABLE","$this",337],["T_OBJECT_OPERATOR","->",337],["T_STRING","getConnection",337],"(",")",["T_OBJECT_OPERATOR","->",337],["T_STRING","fetchAll",337],"(",["T_VARIABLE","$select",337],")",";",["T_WHITESPACE","\n        ",337],["T_IF","if",338],["T_WHITESPACE"," ",338],"(",["T_EMPTY","empty",338],"(",["T_VARIABLE","$options",338],")",")",["T_WHITESPACE"," ",338],"{",["T_WHITESPACE","\n            ",338],["T_RETURN","return",339],["T_WHITESPACE"," ",339],["T_STRING","false",339],";",["T_WHITESPACE","\n        ",339],"}",["T_WHITESPACE","\n\n        ",340],["T_COMMENT","\/\/ build selects of entity ids for specified options ids by frontend input\n",342],["T_WHITESPACE","        ",343],["T_VARIABLE","$selects",343],["T_WHITESPACE"," ",343],"=",["T_WHITESPACE"," ",343],"[","]",";",["T_WHITESPACE","\n        ",343],["T_FOREACH","foreach",344],["T_WHITESPACE"," ",344],"(","[",["T_CONSTANT_ENCAPSED_STRING","'select'",344],["T_WHITESPACE"," ",344],["T_DOUBLE_ARROW","=>",344],["T_WHITESPACE"," ",344],["T_CONSTANT_ENCAPSED_STRING","'eq'",344],",",["T_WHITESPACE"," ",344],["T_CONSTANT_ENCAPSED_STRING","'multiselect'",344],["T_WHITESPACE"," ",344],["T_DOUBLE_ARROW","=>",344],["T_WHITESPACE"," ",344],["T_CONSTANT_ENCAPSED_STRING","'finset'",344],"]",["T_WHITESPACE"," ",344],["T_AS","as",344],["T_WHITESPACE"," ",344],["T_VARIABLE","$frontendInput",344],["T_WHITESPACE"," ",344],["T_DOUBLE_ARROW","=>",344],["T_WHITESPACE"," ",344],["T_VARIABLE","$condition",344],")",["T_WHITESPACE"," ",344],"{",["T_WHITESPACE","\n            ",344],["T_IF","if",345],["T_WHITESPACE"," ",345],"(",["T_ISSET","isset",345],"(",["T_VARIABLE","$attributeTables",345],"[",["T_VARIABLE","$frontendInput",345],"]",")",")",["T_WHITESPACE"," ",345],"{",["T_WHITESPACE","\n                ",345],["T_VARIABLE","$where",346],["T_WHITESPACE"," ",346],"=",["T_WHITESPACE"," ",346],"[","]",";",["T_WHITESPACE","\n                ",346],["T_FOREACH","foreach",347],["T_WHITESPACE"," ",347],"(",["T_VARIABLE","$options",347],["T_WHITESPACE"," ",347],["T_AS","as",347],["T_WHITESPACE"," ",347],["T_VARIABLE","$option",347],")",["T_WHITESPACE"," ",347],"{",["T_WHITESPACE","\n                    ",347],["T_IF","if",348],["T_WHITESPACE"," ",348],"(",["T_VARIABLE","$frontendInput",348],["T_WHITESPACE"," ",348],["T_IS_IDENTICAL","===",348],["T_WHITESPACE"," ",348],["T_VARIABLE","$option",348],"[",["T_CONSTANT_ENCAPSED_STRING","'frontend_input'",348],"]",")",["T_WHITESPACE"," ",348],"{",["T_WHITESPACE","\n                        ",348],["T_VARIABLE","$findSet",349],["T_WHITESPACE"," ",349],"=",["T_WHITESPACE"," ",349],["T_VARIABLE","$this",349],["T_OBJECT_OPERATOR","->",349],["T_STRING","getConnection",349],"(",")",["T_OBJECT_OPERATOR","->",349],["T_STRING","prepareSqlCondition",349],"(",["T_WHITESPACE","\n                            ",349],["T_CONSTANT_ENCAPSED_STRING","'value'",350],",",["T_WHITESPACE","\n                            ",350],"[",["T_VARIABLE","$condition",351],["T_WHITESPACE"," ",351],["T_DOUBLE_ARROW","=>",351],["T_WHITESPACE"," ",351],["T_VARIABLE","$option",351],"[",["T_CONSTANT_ENCAPSED_STRING","'option_id'",351],"]","]",["T_WHITESPACE","\n                        ",351],")",";",["T_WHITESPACE","\n                        ",352],["T_VARIABLE","$whereCond",353],["T_WHITESPACE"," ",353],"=",["T_WHITESPACE"," ",353],"\"",["T_ENCAPSED_AND_WHITESPACE","(attribute_id=%d AND store_id=%d AND ",353],["T_CURLY_OPEN","{",353],["T_VARIABLE","$findSet",353],"}",["T_ENCAPSED_AND_WHITESPACE",")",353],"\"",";",["T_WHITESPACE","\n                        ",353],["T_VARIABLE","$where",354],"[","]",["T_WHITESPACE"," ",354],"=",["T_WHITESPACE"," ",354],["T_STRING","sprintf",354],"(",["T_VARIABLE","$whereCond",354],",",["T_WHITESPACE"," ",354],["T_VARIABLE","$option",354],"[",["T_CONSTANT_ENCAPSED_STRING","'attribute_id'",354],"]",",",["T_WHITESPACE"," ",354],["T_VARIABLE","$option",354],"[",["T_CONSTANT_ENCAPSED_STRING","'store_id'",354],"]",")",";",["T_WHITESPACE","\n                    ",354],"}",["T_WHITESPACE","\n                ",355],"}",["T_WHITESPACE","\n                ",356],["T_IF","if",357],["T_WHITESPACE"," ",357],"(",["T_VARIABLE","$where",357],")",["T_WHITESPACE"," ",357],"{",["T_WHITESPACE","\n                    ",357],["T_VARIABLE","$selects",358],"[",["T_VARIABLE","$frontendInput",358],"]",["T_WHITESPACE"," ",358],"=",["T_WHITESPACE"," ",358],["T_STRING_CAST","(string)",358],["T_VARIABLE","$this",358],["T_OBJECT_OPERATOR","->",358],["T_STRING","getConnection",358],"(",")",["T_OBJECT_OPERATOR","->",358],["T_STRING","select",358],"(",")",["T_OBJECT_OPERATOR","->",358],["T_STRING","from",358],"(",["T_WHITESPACE","\n                        ",358],["T_VARIABLE","$attributeTables",359],"[",["T_VARIABLE","$frontendInput",359],"]",",",["T_WHITESPACE","\n                        ",359],["T_VARIABLE","$this",360],["T_OBJECT_OPERATOR","->",360],["T_STRING","getEntity",360],"(",")",["T_OBJECT_OPERATOR","->",360],["T_STRING","getLinkField",360],"(",")",["T_WHITESPACE","\n                    ",360],")",["T_OBJECT_OPERATOR","->",361],["T_STRING","where",361],"(",["T_WHITESPACE","\n                        ",361],["T_STRING","implode",362],"(",["T_CONSTANT_ENCAPSED_STRING","' OR '",362],",",["T_WHITESPACE"," ",362],["T_VARIABLE","$where",362],")",["T_WHITESPACE","\n                    ",362],")",";",["T_WHITESPACE","\n                ",363],"}",["T_WHITESPACE","\n            ",364],"}",["T_WHITESPACE","\n        ",365],"}",["T_WHITESPACE","\n\n        ",366],["T_VARIABLE","$sql",368],["T_WHITESPACE"," ",368],"=",["T_WHITESPACE"," ",368],["T_VARIABLE","$this",368],["T_OBJECT_OPERATOR","->",368],["T_STRING","getConnection",368],"(",")",["T_OBJECT_OPERATOR","->",368],["T_STRING","select",368],"(",")",["T_OBJECT_OPERATOR","->",368],["T_STRING","union",368],"(",["T_VARIABLE","$selects",368],",",["T_WHITESPACE"," ",368],["T_NS_SEPARATOR","\\",368],["T_STRING","Magento",368],["T_NS_SEPARATOR","\\",368],["T_STRING","Framework",368],["T_NS_SEPARATOR","\\",368],["T_STRING","DB",368],["T_NS_SEPARATOR","\\",368],["T_STRING","Select",368],["T_DOUBLE_COLON","::",368],["T_STRING","SQL_UNION_ALL",368],")",";",["T_WHITESPACE","\n        ",368],["T_RETURN","return",369],["T_WHITESPACE"," ",369],["T_STRING_CAST","(string)",369],["T_VARIABLE","$sql",369],";",["T_WHITESPACE","\n    ",369],"}",["T_WHITESPACE","\n",370],"}",["T_WHITESPACE","\n",371]]
[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Copyright \u00c2\u00a9 2013-2017 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n *\/",2],["T_WHITESPACE","\n",5],["T_NAMESPACE","namespace",6],["T_WHITESPACE"," ",6],["T_STRING","Magento",6],["T_NS_SEPARATOR","\\",6],["T_STRING","CatalogSearch",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Model",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Adapter",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Mysql",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Dynamic",6],";",["T_WHITESPACE","\n\n",6],["T_USE","use",8],["T_WHITESPACE"," ",8],["T_STRING","Magento",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Catalog",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Model",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Layer",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Filter",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Price",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Range",8],";",["T_WHITESPACE","\n",8],["T_USE","use",9],["T_WHITESPACE"," ",9],["T_STRING","Magento",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Customer",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Model",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Session",9],";",["T_WHITESPACE","\n",9],["T_USE","use",10],["T_WHITESPACE"," ",10],["T_STRING","Magento",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Framework",10],["T_NS_SEPARATOR","\\",10],["T_STRING","App",10],["T_NS_SEPARATOR","\\",10],["T_STRING","ResourceConnection",10],";",["T_WHITESPACE","\n",10],["T_USE","use",11],["T_WHITESPACE"," ",11],["T_STRING","Magento",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Framework",11],["T_NS_SEPARATOR","\\",11],["T_STRING","DB",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Adapter",11],["T_NS_SEPARATOR","\\",11],["T_STRING","AdapterInterface",11],";",["T_WHITESPACE","\n",11],["T_USE","use",12],["T_WHITESPACE"," ",12],["T_STRING","Magento",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Framework",12],["T_NS_SEPARATOR","\\",12],["T_STRING","DB",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Ddl",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Table",12],";",["T_WHITESPACE","\n",12],["T_USE","use",13],["T_WHITESPACE"," ",13],["T_STRING","Magento",13],["T_NS_SEPARATOR","\\",13],["T_STRING","Framework",13],["T_NS_SEPARATOR","\\",13],["T_STRING","DB",13],["T_NS_SEPARATOR","\\",13],["T_STRING","Select",13],";",["T_WHITESPACE","\n",13],["T_USE","use",14],["T_WHITESPACE"," ",14],["T_STRING","Magento",14],["T_NS_SEPARATOR","\\",14],["T_STRING","Framework",14],["T_NS_SEPARATOR","\\",14],["T_STRING","Search",14],["T_NS_SEPARATOR","\\",14],["T_STRING","Adapter",14],["T_NS_SEPARATOR","\\",14],["T_STRING","Mysql",14],["T_NS_SEPARATOR","\\",14],["T_STRING","Aggregation",14],["T_NS_SEPARATOR","\\",14],["T_STRING","DataProviderInterface",14],["T_WHITESPACE"," ",14],["T_AS","as",14],["T_WHITESPACE"," ",14],["T_STRING","MysqlDataProviderInterface",14],";",["T_WHITESPACE","\n",14],["T_USE","use",15],["T_WHITESPACE"," ",15],["T_STRING","Magento",15],["T_NS_SEPARATOR","\\",15],["T_STRING","Framework",15],["T_NS_SEPARATOR","\\",15],["T_STRING","Search",15],["T_NS_SEPARATOR","\\",15],["T_STRING","Dynamic",15],["T_NS_SEPARATOR","\\",15],["T_STRING","DataProviderInterface",15],";",["T_WHITESPACE","\n",15],["T_USE","use",16],["T_WHITESPACE"," ",16],["T_STRING","Magento",16],["T_NS_SEPARATOR","\\",16],["T_STRING","Framework",16],["T_NS_SEPARATOR","\\",16],["T_STRING","Search",16],["T_NS_SEPARATOR","\\",16],["T_STRING","Dynamic",16],["T_NS_SEPARATOR","\\",16],["T_STRING","IntervalFactory",16],";",["T_WHITESPACE","\n",16],["T_USE","use",17],["T_WHITESPACE"," ",17],["T_STRING","Magento",17],["T_NS_SEPARATOR","\\",17],["T_STRING","Framework",17],["T_NS_SEPARATOR","\\",17],["T_STRING","Search",17],["T_NS_SEPARATOR","\\",17],["T_STRING","Request",17],["T_NS_SEPARATOR","\\",17],["T_STRING","BucketInterface",17],";",["T_WHITESPACE","\n\n",17],["T_DOC_COMMENT","\/**\n * @SuppressWarnings(PHPMD.CouplingBetweenObjects)\n *\/",19],["T_WHITESPACE","\n",21],["T_CLASS","class",22],["T_WHITESPACE"," ",22],["T_STRING","DataProvider",22],["T_WHITESPACE"," ",22],["T_IMPLEMENTS","implements",22],["T_WHITESPACE"," ",22],["T_STRING","DataProviderInterface",22],["T_WHITESPACE","\n",22],"{",["T_WHITESPACE","\n    ",23],["T_DOC_COMMENT","\/**\n     * @var Resource\n     *\/",24],["T_WHITESPACE","\n    ",26],["T_PRIVATE","private",27],["T_WHITESPACE"," ",27],["T_VARIABLE","$resource",27],";",["T_WHITESPACE","\n\n    ",27],["T_DOC_COMMENT","\/**\n     * @var Range\n     *\/",29],["T_WHITESPACE","\n    ",31],["T_PRIVATE","private",32],["T_WHITESPACE"," ",32],["T_VARIABLE","$range",32],";",["T_WHITESPACE","\n\n    ",32],["T_DOC_COMMENT","\/**\n     * @var Session\n     *\/",34],["T_WHITESPACE","\n    ",36],["T_PRIVATE","private",37],["T_WHITESPACE"," ",37],["T_VARIABLE","$customerSession",37],";",["T_WHITESPACE","\n\n    ",37],["T_DOC_COMMENT","\/**\n     * @var MysqlDataProviderInterface\n     *\/",39],["T_WHITESPACE","\n    ",41],["T_PRIVATE","private",42],["T_WHITESPACE"," ",42],["T_VARIABLE","$dataProvider",42],";",["T_WHITESPACE","\n\n    ",42],["T_DOC_COMMENT","\/**\n     * @var IntervalFactory\n     *\/",44],["T_WHITESPACE","\n    ",46],["T_PRIVATE","private",47],["T_WHITESPACE"," ",47],["T_VARIABLE","$intervalFactory",47],";",["T_WHITESPACE","\n\n    ",47],["T_DOC_COMMENT","\/**\n     * @var AdapterInterface\n     *\/",49],["T_WHITESPACE","\n    ",51],["T_PRIVATE","private",52],["T_WHITESPACE"," ",52],["T_VARIABLE","$connection",52],";",["T_WHITESPACE","\n\n    ",52],["T_DOC_COMMENT","\/**\n     * @param ResourceConnection $resource\n     * @param Range $range\n     * @param Session $customerSession\n     * @param MysqlDataProviderInterface $dataProvider\n     * @param IntervalFactory $intervalFactory\n     *\/",54],["T_WHITESPACE","\n    ",60],["T_PUBLIC","public",61],["T_WHITESPACE"," ",61],["T_FUNCTION","function",61],["T_WHITESPACE"," ",61],["T_STRING","__construct",61],"(",["T_WHITESPACE","\n        ",61],["T_STRING","ResourceConnection",62],["T_WHITESPACE"," ",62],["T_VARIABLE","$resource",62],",",["T_WHITESPACE","\n        ",62],["T_STRING","Range",63],["T_WHITESPACE"," ",63],["T_VARIABLE","$range",63],",",["T_WHITESPACE","\n        ",63],["T_STRING","Session",64],["T_WHITESPACE"," ",64],["T_VARIABLE","$customerSession",64],",",["T_WHITESPACE","\n        ",64],["T_STRING","MysqlDataProviderInterface",65],["T_WHITESPACE"," ",65],["T_VARIABLE","$dataProvider",65],",",["T_WHITESPACE","\n        ",65],["T_STRING","IntervalFactory",66],["T_WHITESPACE"," ",66],["T_VARIABLE","$intervalFactory",66],["T_WHITESPACE","\n    ",66],")",["T_WHITESPACE"," ",67],"{",["T_WHITESPACE","\n        ",67],["T_VARIABLE","$this",68],["T_OBJECT_OPERATOR","->",68],["T_STRING","resource",68],["T_WHITESPACE"," ",68],"=",["T_WHITESPACE"," ",68],["T_VARIABLE","$resource",68],";",["T_WHITESPACE","\n        ",68],["T_VARIABLE","$this",69],["T_OBJECT_OPERATOR","->",69],["T_STRING","connection",69],["T_WHITESPACE"," ",69],"=",["T_WHITESPACE"," ",69],["T_VARIABLE","$resource",69],["T_OBJECT_OPERATOR","->",69],["T_STRING","getConnection",69],"(",")",";",["T_WHITESPACE","\n        ",69],["T_VARIABLE","$this",70],["T_OBJECT_OPERATOR","->",70],["T_STRING","range",70],["T_WHITESPACE"," ",70],"=",["T_WHITESPACE"," ",70],["T_VARIABLE","$range",70],";",["T_WHITESPACE","\n        ",70],["T_VARIABLE","$this",71],["T_OBJECT_OPERATOR","->",71],["T_STRING","customerSession",71],["T_WHITESPACE"," ",71],"=",["T_WHITESPACE"," ",71],["T_VARIABLE","$customerSession",71],";",["T_WHITESPACE","\n        ",71],["T_VARIABLE","$this",72],["T_OBJECT_OPERATOR","->",72],["T_STRING","dataProvider",72],["T_WHITESPACE"," ",72],"=",["T_WHITESPACE"," ",72],["T_VARIABLE","$dataProvider",72],";",["T_WHITESPACE","\n        ",72],["T_VARIABLE","$this",73],["T_OBJECT_OPERATOR","->",73],["T_STRING","intervalFactory",73],["T_WHITESPACE"," ",73],"=",["T_WHITESPACE"," ",73],["T_VARIABLE","$intervalFactory",73],";",["T_WHITESPACE","\n    ",73],"}",["T_WHITESPACE","\n\n    ",74],["T_DOC_COMMENT","\/**\n     * {@inheritdoc}\n     *\/",76],["T_WHITESPACE","\n    ",78],["T_PUBLIC","public",79],["T_WHITESPACE"," ",79],["T_FUNCTION","function",79],["T_WHITESPACE"," ",79],["T_STRING","getRange",79],"(",")",["T_WHITESPACE","\n    ",79],"{",["T_WHITESPACE","\n        ",80],["T_RETURN","return",81],["T_WHITESPACE"," ",81],["T_VARIABLE","$this",81],["T_OBJECT_OPERATOR","->",81],["T_STRING","range",81],["T_OBJECT_OPERATOR","->",81],["T_STRING","getPriceRange",81],"(",")",";",["T_WHITESPACE","\n    ",81],"}",["T_WHITESPACE","\n\n    ",82],["T_DOC_COMMENT","\/**\n     * {@inheritdoc}\n     *\/",84],["T_WHITESPACE","\n    ",86],["T_PUBLIC","public",87],["T_WHITESPACE"," ",87],["T_FUNCTION","function",87],["T_WHITESPACE"," ",87],["T_STRING","getAggregations",87],"(",["T_NS_SEPARATOR","\\",87],["T_STRING","Magento",87],["T_NS_SEPARATOR","\\",87],["T_STRING","Framework",87],["T_NS_SEPARATOR","\\",87],["T_STRING","Search",87],["T_NS_SEPARATOR","\\",87],["T_STRING","Dynamic",87],["T_NS_SEPARATOR","\\",87],["T_STRING","EntityStorage",87],["T_WHITESPACE"," ",87],["T_VARIABLE","$entityStorage",87],")",["T_WHITESPACE","\n    ",87],"{",["T_WHITESPACE","\n        ",88],["T_VARIABLE","$aggregation",89],["T_WHITESPACE"," ",89],"=",["T_WHITESPACE"," ",89],"[",["T_WHITESPACE","\n            ",89],["T_CONSTANT_ENCAPSED_STRING","'count'",90],["T_WHITESPACE"," ",90],["T_DOUBLE_ARROW","=>",90],["T_WHITESPACE"," ",90],["T_CONSTANT_ENCAPSED_STRING","'count(DISTINCT main_table.entity_id)'",90],",",["T_WHITESPACE","\n            ",90],["T_CONSTANT_ENCAPSED_STRING","'max'",91],["T_WHITESPACE"," ",91],["T_DOUBLE_ARROW","=>",91],["T_WHITESPACE"," ",91],["T_CONSTANT_ENCAPSED_STRING","'MAX(min_price)'",91],",",["T_WHITESPACE","\n            ",91],["T_CONSTANT_ENCAPSED_STRING","'min'",92],["T_WHITESPACE"," ",92],["T_DOUBLE_ARROW","=>",92],["T_WHITESPACE"," ",92],["T_CONSTANT_ENCAPSED_STRING","'MIN(min_price)'",92],",",["T_WHITESPACE","\n            ",92],["T_CONSTANT_ENCAPSED_STRING","'std'",93],["T_WHITESPACE"," ",93],["T_DOUBLE_ARROW","=>",93],["T_WHITESPACE"," ",93],["T_CONSTANT_ENCAPSED_STRING","'STDDEV_SAMP(min_price)'",93],",",["T_WHITESPACE","\n        ",93],"]",";",["T_WHITESPACE","\n\n        ",94],["T_VARIABLE","$select",96],["T_WHITESPACE"," ",96],"=",["T_WHITESPACE"," ",96],["T_VARIABLE","$this",96],["T_OBJECT_OPERATOR","->",96],["T_STRING","getSelect",96],"(",")",";",["T_WHITESPACE","\n\n        ",96],["T_VARIABLE","$tableName",98],["T_WHITESPACE"," ",98],"=",["T_WHITESPACE"," ",98],["T_VARIABLE","$this",98],["T_OBJECT_OPERATOR","->",98],["T_STRING","resource",98],["T_OBJECT_OPERATOR","->",98],["T_STRING","getTableName",98],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog_product_index_price'",98],")",";",["T_WHITESPACE","\n        ",98],["T_DOC_COMMENT","\/** @var Table $table *\/",99],["T_WHITESPACE","\n        ",99],["T_VARIABLE","$table",100],["T_WHITESPACE"," ",100],"=",["T_WHITESPACE"," ",100],["T_VARIABLE","$entityStorage",100],["T_OBJECT_OPERATOR","->",100],["T_STRING","getSource",100],"(",")",";",["T_WHITESPACE","\n        ",100],["T_VARIABLE","$select",101],["T_OBJECT_OPERATOR","->",101],["T_STRING","from",101],"(","[",["T_CONSTANT_ENCAPSED_STRING","'main_table'",101],["T_WHITESPACE"," ",101],["T_DOUBLE_ARROW","=>",101],["T_WHITESPACE"," ",101],["T_VARIABLE","$tableName",101],"]",",",["T_WHITESPACE"," ",101],"[","]",")",["T_WHITESPACE","\n            ",101],["T_OBJECT_OPERATOR","->",102],["T_STRING","joinInner",102],"(","[",["T_CONSTANT_ENCAPSED_STRING","'entities'",102],["T_WHITESPACE"," ",102],["T_DOUBLE_ARROW","=>",102],["T_WHITESPACE"," ",102],["T_VARIABLE","$table",102],["T_OBJECT_OPERATOR","->",102],["T_STRING","getName",102],"(",")","]",",",["T_WHITESPACE"," ",102],["T_CONSTANT_ENCAPSED_STRING","'main_table.entity_id  = entities.entity_id'",102],",",["T_WHITESPACE"," ",102],"[","]",")",["T_WHITESPACE","\n            ",102],["T_OBJECT_OPERATOR","->",103],["T_STRING","columns",103],"(",["T_VARIABLE","$aggregation",103],")",";",["T_WHITESPACE","\n\n        ",103],["T_VARIABLE","$select",105],["T_WHITESPACE"," ",105],"=",["T_WHITESPACE"," ",105],["T_VARIABLE","$this",105],["T_OBJECT_OPERATOR","->",105],["T_STRING","setCustomerGroupId",105],"(",["T_VARIABLE","$select",105],")",";",["T_WHITESPACE","\n\n        ",105],["T_VARIABLE","$result",107],["T_WHITESPACE"," ",107],"=",["T_WHITESPACE"," ",107],["T_VARIABLE","$this",107],["T_OBJECT_OPERATOR","->",107],["T_STRING","connection",107],["T_OBJECT_OPERATOR","->",107],["T_STRING","fetchRow",107],"(",["T_VARIABLE","$select",107],")",";",["T_WHITESPACE","\n\n        ",107],["T_RETURN","return",109],["T_WHITESPACE"," ",109],["T_VARIABLE","$result",109],";",["T_WHITESPACE","\n    ",109],"}",["T_WHITESPACE","\n\n    ",110],["T_DOC_COMMENT","\/**\n     * {@inheritdoc}\n     *\/",112],["T_WHITESPACE","\n    ",114],["T_PUBLIC","public",115],["T_WHITESPACE"," ",115],["T_FUNCTION","function",115],["T_WHITESPACE"," ",115],["T_STRING","getInterval",115],"(",["T_WHITESPACE","\n        ",115],["T_STRING","BucketInterface",116],["T_WHITESPACE"," ",116],["T_VARIABLE","$bucket",116],",",["T_WHITESPACE","\n        ",116],["T_ARRAY","array",117],["T_WHITESPACE"," ",117],["T_VARIABLE","$dimensions",117],",",["T_WHITESPACE","\n        ",117],["T_NS_SEPARATOR","\\",118],["T_STRING","Magento",118],["T_NS_SEPARATOR","\\",118],["T_STRING","Framework",118],["T_NS_SEPARATOR","\\",118],["T_STRING","Search",118],["T_NS_SEPARATOR","\\",118],["T_STRING","Dynamic",118],["T_NS_SEPARATOR","\\",118],["T_STRING","EntityStorage",118],["T_WHITESPACE"," ",118],["T_VARIABLE","$entityStorage",118],["T_WHITESPACE","\n    ",118],")",["T_WHITESPACE"," ",119],"{",["T_WHITESPACE","\n        ",119],["T_VARIABLE","$select",120],["T_WHITESPACE"," ",120],"=",["T_WHITESPACE"," ",120],["T_VARIABLE","$this",120],["T_OBJECT_OPERATOR","->",120],["T_STRING","dataProvider",120],["T_OBJECT_OPERATOR","->",120],["T_STRING","getDataSet",120],"(",["T_VARIABLE","$bucket",120],",",["T_WHITESPACE"," ",120],["T_VARIABLE","$dimensions",120],",",["T_WHITESPACE"," ",120],["T_VARIABLE","$entityStorage",120],["T_OBJECT_OPERATOR","->",120],["T_STRING","getSource",120],"(",")",")",";",["T_WHITESPACE","\n\n        ",120],["T_RETURN","return",122],["T_WHITESPACE"," ",122],["T_VARIABLE","$this",122],["T_OBJECT_OPERATOR","->",122],["T_STRING","intervalFactory",122],["T_OBJECT_OPERATOR","->",122],["T_STRING","create",122],"(","[",["T_CONSTANT_ENCAPSED_STRING","'select'",122],["T_WHITESPACE"," ",122],["T_DOUBLE_ARROW","=>",122],["T_WHITESPACE"," ",122],["T_VARIABLE","$select",122],"]",")",";",["T_WHITESPACE","\n    ",122],"}",["T_WHITESPACE","\n\n    ",123],["T_DOC_COMMENT","\/**\n     * {@inheritdoc}\n     *\/",125],["T_WHITESPACE","\n    ",127],["T_PUBLIC","public",128],["T_WHITESPACE"," ",128],["T_FUNCTION","function",128],["T_WHITESPACE"," ",128],["T_STRING","getAggregation",128],"(",["T_WHITESPACE","\n        ",128],["T_STRING","BucketInterface",129],["T_WHITESPACE"," ",129],["T_VARIABLE","$bucket",129],",",["T_WHITESPACE","\n        ",129],["T_ARRAY","array",130],["T_WHITESPACE"," ",130],["T_VARIABLE","$dimensions",130],",",["T_WHITESPACE","\n        ",130],["T_VARIABLE","$range",131],",",["T_WHITESPACE","\n        ",131],["T_NS_SEPARATOR","\\",132],["T_STRING","Magento",132],["T_NS_SEPARATOR","\\",132],["T_STRING","Framework",132],["T_NS_SEPARATOR","\\",132],["T_STRING","Search",132],["T_NS_SEPARATOR","\\",132],["T_STRING","Dynamic",132],["T_NS_SEPARATOR","\\",132],["T_STRING","EntityStorage",132],["T_WHITESPACE"," ",132],["T_VARIABLE","$entityStorage",132],["T_WHITESPACE","\n    ",132],")",["T_WHITESPACE"," ",133],"{",["T_WHITESPACE","\n        ",133],["T_VARIABLE","$select",134],["T_WHITESPACE"," ",134],"=",["T_WHITESPACE"," ",134],["T_VARIABLE","$this",134],["T_OBJECT_OPERATOR","->",134],["T_STRING","dataProvider",134],["T_OBJECT_OPERATOR","->",134],["T_STRING","getDataSet",134],"(",["T_VARIABLE","$bucket",134],",",["T_WHITESPACE"," ",134],["T_VARIABLE","$dimensions",134],",",["T_WHITESPACE"," ",134],["T_VARIABLE","$entityStorage",134],["T_OBJECT_OPERATOR","->",134],["T_STRING","getSource",134],"(",")",")",";",["T_WHITESPACE","\n        ",134],["T_VARIABLE","$column",135],["T_WHITESPACE"," ",135],"=",["T_WHITESPACE"," ",135],["T_VARIABLE","$select",135],["T_OBJECT_OPERATOR","->",135],["T_STRING","getPart",135],"(",["T_STRING","Select",135],["T_DOUBLE_COLON","::",135],["T_STRING","COLUMNS",135],")","[",["T_LNUMBER","0",135],"]",";",["T_WHITESPACE","\n        ",135],["T_VARIABLE","$select",136],["T_OBJECT_OPERATOR","->",136],["T_STRING","reset",136],"(",["T_STRING","Select",136],["T_DOUBLE_COLON","::",136],["T_STRING","COLUMNS",136],")",";",["T_WHITESPACE","\n        ",136],["T_VARIABLE","$rangeExpr",137],["T_WHITESPACE"," ",137],"=",["T_WHITESPACE"," ",137],["T_NEW","new",137],["T_WHITESPACE"," ",137],["T_NS_SEPARATOR","\\",137],["T_STRING","Zend_Db_Expr",137],"(",["T_WHITESPACE","\n            ",137],["T_VARIABLE","$this",138],["T_OBJECT_OPERATOR","->",138],["T_STRING","connection",138],["T_OBJECT_OPERATOR","->",138],["T_STRING","getIfNullSql",138],"(",["T_WHITESPACE","\n                ",138],["T_VARIABLE","$this",139],["T_OBJECT_OPERATOR","->",139],["T_STRING","connection",139],["T_OBJECT_OPERATOR","->",139],["T_STRING","quoteInto",139],"(",["T_CONSTANT_ENCAPSED_STRING","'FLOOR('",139],["T_WHITESPACE"," ",139],".",["T_WHITESPACE"," ",139],["T_VARIABLE","$column",139],"[",["T_LNUMBER","1",139],"]",["T_WHITESPACE"," ",139],".",["T_WHITESPACE"," ",139],["T_CONSTANT_ENCAPSED_STRING","' \/ ? ) + 1'",139],",",["T_WHITESPACE"," ",139],["T_VARIABLE","$range",139],")",",",["T_WHITESPACE","\n                ",139],["T_LNUMBER","1",140],["T_WHITESPACE","\n            ",140],")",["T_WHITESPACE","\n        ",141],")",";",["T_WHITESPACE","\n\n        ",142],["T_VARIABLE","$select",144],["T_WHITESPACE","\n            ",144],["T_OBJECT_OPERATOR","->",145],["T_STRING","columns",145],"(","[",["T_CONSTANT_ENCAPSED_STRING","'range'",145],["T_WHITESPACE"," ",145],["T_DOUBLE_ARROW","=>",145],["T_WHITESPACE"," ",145],["T_VARIABLE","$rangeExpr",145],"]",")",["T_WHITESPACE","\n            ",145],["T_OBJECT_OPERATOR","->",146],["T_STRING","columns",146],"(","[",["T_CONSTANT_ENCAPSED_STRING","'metrix'",146],["T_WHITESPACE"," ",146],["T_DOUBLE_ARROW","=>",146],["T_WHITESPACE"," ",146],["T_CONSTANT_ENCAPSED_STRING","'COUNT(*)'",146],"]",")",["T_WHITESPACE","\n            ",146],["T_OBJECT_OPERATOR","->",147],["T_STRING","group",147],"(",["T_CONSTANT_ENCAPSED_STRING","'range'",147],")",["T_WHITESPACE","\n            ",147],["T_OBJECT_OPERATOR","->",148],["T_STRING","order",148],"(",["T_CONSTANT_ENCAPSED_STRING","'range'",148],")",";",["T_WHITESPACE","\n        ",148],["T_VARIABLE","$result",149],["T_WHITESPACE"," ",149],"=",["T_WHITESPACE"," ",149],["T_VARIABLE","$this",149],["T_OBJECT_OPERATOR","->",149],["T_STRING","connection",149],["T_OBJECT_OPERATOR","->",149],["T_STRING","fetchPairs",149],"(",["T_VARIABLE","$select",149],")",";",["T_WHITESPACE","\n\n        ",149],["T_RETURN","return",151],["T_WHITESPACE"," ",151],["T_VARIABLE","$result",151],";",["T_WHITESPACE","\n    ",151],"}",["T_WHITESPACE","\n\n    ",152],["T_DOC_COMMENT","\/**\n     * {@inheritdoc}\n     *\/",154],["T_WHITESPACE","\n    ",156],["T_PUBLIC","public",157],["T_WHITESPACE"," ",157],["T_FUNCTION","function",157],["T_WHITESPACE"," ",157],["T_STRING","prepareData",157],"(",["T_VARIABLE","$range",157],",",["T_WHITESPACE"," ",157],["T_ARRAY","array",157],["T_WHITESPACE"," ",157],["T_VARIABLE","$dbRanges",157],")",["T_WHITESPACE","\n    ",157],"{",["T_WHITESPACE","\n        ",158],["T_VARIABLE","$data",159],["T_WHITESPACE"," ",159],"=",["T_WHITESPACE"," ",159],"[","]",";",["T_WHITESPACE","\n        ",159],["T_IF","if",160],["T_WHITESPACE"," ",160],"(","!",["T_EMPTY","empty",160],"(",["T_VARIABLE","$dbRanges",160],")",")",["T_WHITESPACE"," ",160],"{",["T_WHITESPACE","\n            ",160],["T_VARIABLE","$lastIndex",161],["T_WHITESPACE"," ",161],"=",["T_WHITESPACE"," ",161],["T_STRING","array_keys",161],"(",["T_VARIABLE","$dbRanges",161],")",";",["T_WHITESPACE","\n            ",161],["T_VARIABLE","$lastIndex",162],["T_WHITESPACE"," ",162],"=",["T_WHITESPACE"," ",162],["T_VARIABLE","$lastIndex",162],"[",["T_STRING","count",162],"(",["T_VARIABLE","$lastIndex",162],")",["T_WHITESPACE"," ",162],"-",["T_WHITESPACE"," ",162],["T_LNUMBER","1",162],"]",";",["T_WHITESPACE","\n\n            ",162],["T_FOREACH","foreach",164],["T_WHITESPACE"," ",164],"(",["T_VARIABLE","$dbRanges",164],["T_WHITESPACE"," ",164],["T_AS","as",164],["T_WHITESPACE"," ",164],["T_VARIABLE","$index",164],["T_WHITESPACE"," ",164],["T_DOUBLE_ARROW","=>",164],["T_WHITESPACE"," ",164],["T_VARIABLE","$count",164],")",["T_WHITESPACE"," ",164],"{",["T_WHITESPACE","\n                ",164],["T_VARIABLE","$fromPrice",165],["T_WHITESPACE"," ",165],"=",["T_WHITESPACE"," ",165],["T_VARIABLE","$index",165],["T_WHITESPACE"," ",165],["T_IS_EQUAL","==",165],["T_WHITESPACE"," ",165],["T_LNUMBER","1",165],["T_WHITESPACE"," ",165],"?",["T_WHITESPACE"," ",165],["T_CONSTANT_ENCAPSED_STRING","''",165],["T_WHITESPACE"," ",165],":",["T_WHITESPACE"," ",165],"(",["T_VARIABLE","$index",165],["T_WHITESPACE"," ",165],"-",["T_WHITESPACE"," ",165],["T_LNUMBER","1",165],")",["T_WHITESPACE"," ",165],"*",["T_WHITESPACE"," ",165],["T_VARIABLE","$range",165],";",["T_WHITESPACE","\n                ",165],["T_VARIABLE","$toPrice",166],["T_WHITESPACE"," ",166],"=",["T_WHITESPACE"," ",166],["T_VARIABLE","$index",166],["T_WHITESPACE"," ",166],["T_IS_EQUAL","==",166],["T_WHITESPACE"," ",166],["T_VARIABLE","$lastIndex",166],["T_WHITESPACE"," ",166],"?",["T_WHITESPACE"," ",166],["T_CONSTANT_ENCAPSED_STRING","''",166],["T_WHITESPACE"," ",166],":",["T_WHITESPACE"," ",166],["T_VARIABLE","$index",166],["T_WHITESPACE"," ",166],"*",["T_WHITESPACE"," ",166],["T_VARIABLE","$range",166],";",["T_WHITESPACE","\n\n                ",166],["T_VARIABLE","$data",168],"[","]",["T_WHITESPACE"," ",168],"=",["T_WHITESPACE"," ",168],"[",["T_WHITESPACE","\n                    ",168],["T_CONSTANT_ENCAPSED_STRING","'from'",169],["T_WHITESPACE"," ",169],["T_DOUBLE_ARROW","=>",169],["T_WHITESPACE"," ",169],["T_VARIABLE","$fromPrice",169],",",["T_WHITESPACE","\n                    ",169],["T_CONSTANT_ENCAPSED_STRING","'to'",170],["T_WHITESPACE"," ",170],["T_DOUBLE_ARROW","=>",170],["T_WHITESPACE"," ",170],["T_VARIABLE","$toPrice",170],",",["T_WHITESPACE","\n                    ",170],["T_CONSTANT_ENCAPSED_STRING","'count'",171],["T_WHITESPACE"," ",171],["T_DOUBLE_ARROW","=>",171],["T_WHITESPACE"," ",171],["T_VARIABLE","$count",171],",",["T_WHITESPACE","\n                ",171],"]",";",["T_WHITESPACE","\n            ",172],"}",["T_WHITESPACE","\n        ",173],"}",["T_WHITESPACE","\n\n        ",174],["T_RETURN","return",176],["T_WHITESPACE"," ",176],["T_VARIABLE","$data",176],";",["T_WHITESPACE","\n    ",176],"}",["T_WHITESPACE","\n\n    ",177],["T_DOC_COMMENT","\/**\n     * @return Select\n     *\/",179],["T_WHITESPACE","\n    ",181],["T_PRIVATE","private",182],["T_WHITESPACE"," ",182],["T_FUNCTION","function",182],["T_WHITESPACE"," ",182],["T_STRING","getSelect",182],"(",")",["T_WHITESPACE","\n    ",182],"{",["T_WHITESPACE","\n        ",183],["T_RETURN","return",184],["T_WHITESPACE"," ",184],["T_VARIABLE","$this",184],["T_OBJECT_OPERATOR","->",184],["T_STRING","connection",184],["T_OBJECT_OPERATOR","->",184],["T_STRING","select",184],"(",")",";",["T_WHITESPACE","\n    ",184],"}",["T_WHITESPACE","\n\n    ",185],["T_DOC_COMMENT","\/**\n     * @param Select $select\n     * @return Select\n     *\/",187],["T_WHITESPACE","\n    ",190],["T_PRIVATE","private",191],["T_WHITESPACE"," ",191],["T_FUNCTION","function",191],["T_WHITESPACE"," ",191],["T_STRING","setCustomerGroupId",191],"(",["T_VARIABLE","$select",191],")",["T_WHITESPACE","\n    ",191],"{",["T_WHITESPACE","\n        ",192],["T_RETURN","return",193],["T_WHITESPACE"," ",193],["T_VARIABLE","$select",193],["T_OBJECT_OPERATOR","->",193],["T_STRING","where",193],"(",["T_CONSTANT_ENCAPSED_STRING","'customer_group_id = ?'",193],",",["T_WHITESPACE"," ",193],["T_VARIABLE","$this",193],["T_OBJECT_OPERATOR","->",193],["T_STRING","customerSession",193],["T_OBJECT_OPERATOR","->",193],["T_STRING","getCustomerGroupId",193],"(",")",")",";",["T_WHITESPACE","\n    ",193],"}",["T_WHITESPACE","\n",194],"}",["T_WHITESPACE","\n",195]]
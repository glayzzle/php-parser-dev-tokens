[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Copyright \u00c2\u00a9 2013-2017 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n *\/",2],["T_WHITESPACE","\n\n",5],["T_NAMESPACE","namespace",7],["T_WHITESPACE"," ",7],["T_STRING","Magento",7],["T_NS_SEPARATOR","\\",7],["T_STRING","CatalogSearch",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Model",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Indexer",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Fulltext",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Plugin",7],";",["T_WHITESPACE","\n\n",7],["T_USE","use",9],["T_WHITESPACE"," ",9],["T_STRING","Magento",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Catalog",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Model",9],["T_NS_SEPARATOR","\\",9],["T_STRING","ResourceModel",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Category",9],["T_WHITESPACE"," ",9],["T_AS","as",9],["T_WHITESPACE"," ",9],["T_STRING","ResourceCategory",9],";",["T_WHITESPACE","\n",9],["T_USE","use",10],["T_WHITESPACE"," ",10],["T_STRING","Magento",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Framework",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Model",10],["T_NS_SEPARATOR","\\",10],["T_STRING","AbstractModel",10],";",["T_WHITESPACE","\n\n",10],["T_DOC_COMMENT","\/**\n * Class Category\n * @package Magento\\CatalogSearch\\Model\\Indexer\\Fulltext\\Plugin\n *\/",12],["T_WHITESPACE","\n",15],["T_CLASS","class",16],["T_WHITESPACE"," ",16],["T_STRING","Category",16],["T_WHITESPACE"," ",16],["T_EXTENDS","extends",16],["T_WHITESPACE"," ",16],["T_STRING","AbstractPlugin",16],["T_WHITESPACE","\n",16],"{",["T_WHITESPACE","\n    ",17],["T_DOC_COMMENT","\/**\n     * Reindex on product save\n     *\n     * @param ResourceCategory $resourceCategory\n     * @param \\Closure $proceed\n     * @param AbstractModel $category\n     * @return ResourceCategory\n     * @throws \\Exception\n     *\/",18],["T_WHITESPACE","\n    ",26],["T_PUBLIC","public",27],["T_WHITESPACE"," ",27],["T_FUNCTION","function",27],["T_WHITESPACE"," ",27],["T_STRING","aroundSave",27],"(",["T_STRING","ResourceCategory",27],["T_WHITESPACE"," ",27],["T_VARIABLE","$resourceCategory",27],",",["T_WHITESPACE"," ",27],["T_NS_SEPARATOR","\\",27],["T_STRING","Closure",27],["T_WHITESPACE"," ",27],["T_VARIABLE","$proceed",27],",",["T_WHITESPACE"," ",27],["T_STRING","AbstractModel",27],["T_WHITESPACE"," ",27],["T_VARIABLE","$category",27],")",["T_WHITESPACE","\n    ",27],"{",["T_WHITESPACE","\n        ",28],["T_RETURN","return",29],["T_WHITESPACE"," ",29],["T_VARIABLE","$this",29],["T_OBJECT_OPERATOR","->",29],["T_STRING","addCommitCallback",29],"(",["T_VARIABLE","$resourceCategory",29],",",["T_WHITESPACE"," ",29],["T_VARIABLE","$proceed",29],",",["T_WHITESPACE"," ",29],["T_VARIABLE","$category",29],")",";",["T_WHITESPACE","\n    ",29],"}",["T_WHITESPACE","\n\n    ",30],["T_DOC_COMMENT","\/**\n     * @param ResourceCategory $resourceCategory\n     * @param \\Closure $proceed\n     * @param AbstractModel $category\n     * @return ResourceCategory\n     * @throws \\Exception\n     *\/",32],["T_WHITESPACE","\n    ",38],["T_PRIVATE","private",39],["T_WHITESPACE"," ",39],["T_FUNCTION","function",39],["T_WHITESPACE"," ",39],["T_STRING","addCommitCallback",39],"(",["T_STRING","ResourceCategory",39],["T_WHITESPACE"," ",39],["T_VARIABLE","$resourceCategory",39],",",["T_WHITESPACE"," ",39],["T_NS_SEPARATOR","\\",39],["T_STRING","Closure",39],["T_WHITESPACE"," ",39],["T_VARIABLE","$proceed",39],",",["T_WHITESPACE"," ",39],["T_STRING","AbstractModel",39],["T_WHITESPACE"," ",39],["T_VARIABLE","$category",39],")",["T_WHITESPACE","\n    ",39],"{",["T_WHITESPACE","\n        ",40],["T_TRY","try",41],["T_WHITESPACE"," ",41],"{",["T_WHITESPACE","\n            ",41],["T_VARIABLE","$resourceCategory",42],["T_OBJECT_OPERATOR","->",42],["T_STRING","beginTransaction",42],"(",")",";",["T_WHITESPACE","\n            ",42],["T_VARIABLE","$result",43],["T_WHITESPACE"," ",43],"=",["T_WHITESPACE"," ",43],["T_VARIABLE","$proceed",43],"(",["T_VARIABLE","$category",43],")",";",["T_WHITESPACE","\n            ",43],["T_VARIABLE","$resourceCategory",44],["T_OBJECT_OPERATOR","->",44],["T_STRING","addCommitCallback",44],"(",["T_FUNCTION","function",44],["T_WHITESPACE"," ",44],"(",")",["T_WHITESPACE"," ",44],["T_USE","use",44],["T_WHITESPACE"," ",44],"(",["T_VARIABLE","$category",44],")",["T_WHITESPACE"," ",44],"{",["T_WHITESPACE","\n                ",44],["T_VARIABLE","$affectedProducts",45],["T_WHITESPACE"," ",45],"=",["T_WHITESPACE"," ",45],["T_VARIABLE","$category",45],["T_OBJECT_OPERATOR","->",45],["T_STRING","getAffectedProductIds",45],"(",")",";",["T_WHITESPACE","\n                ",45],["T_IF","if",46],["T_WHITESPACE"," ",46],"(",["T_STRING","is_array",46],"(",["T_VARIABLE","$affectedProducts",46],")",")",["T_WHITESPACE"," ",46],"{",["T_WHITESPACE","\n                    ",46],["T_VARIABLE","$this",47],["T_OBJECT_OPERATOR","->",47],["T_STRING","reindexList",47],"(",["T_VARIABLE","$affectedProducts",47],")",";",["T_WHITESPACE","\n                ",47],"}",["T_WHITESPACE","\n            ",48],"}",")",";",["T_WHITESPACE","\n            ",49],["T_VARIABLE","$resourceCategory",50],["T_OBJECT_OPERATOR","->",50],["T_STRING","commit",50],"(",")",";",["T_WHITESPACE","\n        ",50],"}",["T_WHITESPACE"," ",51],["T_CATCH","catch",51],["T_WHITESPACE"," ",51],"(",["T_NS_SEPARATOR","\\",51],["T_STRING","Exception",51],["T_WHITESPACE"," ",51],["T_VARIABLE","$e",51],")",["T_WHITESPACE"," ",51],"{",["T_WHITESPACE","\n            ",51],["T_VARIABLE","$resourceCategory",52],["T_OBJECT_OPERATOR","->",52],["T_STRING","rollBack",52],"(",")",";",["T_WHITESPACE","\n            ",52],["T_THROW","throw",53],["T_WHITESPACE"," ",53],["T_VARIABLE","$e",53],";",["T_WHITESPACE","\n        ",53],"}",["T_WHITESPACE","\n\n        ",54],["T_RETURN","return",56],["T_WHITESPACE"," ",56],["T_VARIABLE","$result",56],";",["T_WHITESPACE","\n    ",56],"}",["T_WHITESPACE","\n",57],"}",["T_WHITESPACE","\n",58]]
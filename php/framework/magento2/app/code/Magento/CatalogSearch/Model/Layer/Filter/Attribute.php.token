[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Copyright \u00c2\u00a9 2013-2017 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n *\/",2],["T_WHITESPACE","\n",5],["T_NAMESPACE","namespace",6],["T_WHITESPACE"," ",6],["T_STRING","Magento",6],["T_NS_SEPARATOR","\\",6],["T_STRING","CatalogSearch",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Model",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Layer",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Filter",6],";",["T_WHITESPACE","\n\n",6],["T_USE","use",8],["T_WHITESPACE"," ",8],["T_STRING","Magento",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Catalog",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Model",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Layer",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Filter",8],["T_NS_SEPARATOR","\\",8],["T_STRING","AbstractFilter",8],";",["T_WHITESPACE","\n\n",8],["T_DOC_COMMENT","\/**\n * Layer attribute filter\n *\/",10],["T_WHITESPACE","\n",12],["T_CLASS","class",13],["T_WHITESPACE"," ",13],["T_STRING","Attribute",13],["T_WHITESPACE"," ",13],["T_EXTENDS","extends",13],["T_WHITESPACE"," ",13],["T_STRING","AbstractFilter",13],["T_WHITESPACE","\n",13],"{",["T_WHITESPACE","\n    ",14],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Framework\\Filter\\StripTags\n     *\/",15],["T_WHITESPACE","\n    ",17],["T_PRIVATE","private",18],["T_WHITESPACE"," ",18],["T_VARIABLE","$tagFilter",18],";",["T_WHITESPACE","\n\n    ",18],["T_DOC_COMMENT","\/**\n     * @param \\Magento\\Catalog\\Model\\Layer\\Filter\\ItemFactory $filterItemFactory\n     * @param \\Magento\\Store\\Model\\StoreManagerInterface $storeManager\n     * @param \\Magento\\Catalog\\Model\\Layer $layer\n     * @param \\Magento\\Catalog\\Model\\Layer\\Filter\\Item\\DataBuilder $itemDataBuilder\n     * @param \\Magento\\Framework\\Filter\\StripTags $tagFilter\n     * @param array $data\n     *\/",20],["T_WHITESPACE","\n    ",27],["T_PUBLIC","public",28],["T_WHITESPACE"," ",28],["T_FUNCTION","function",28],["T_WHITESPACE"," ",28],["T_STRING","__construct",28],"(",["T_WHITESPACE","\n        ",28],["T_NS_SEPARATOR","\\",29],["T_STRING","Magento",29],["T_NS_SEPARATOR","\\",29],["T_STRING","Catalog",29],["T_NS_SEPARATOR","\\",29],["T_STRING","Model",29],["T_NS_SEPARATOR","\\",29],["T_STRING","Layer",29],["T_NS_SEPARATOR","\\",29],["T_STRING","Filter",29],["T_NS_SEPARATOR","\\",29],["T_STRING","ItemFactory",29],["T_WHITESPACE"," ",29],["T_VARIABLE","$filterItemFactory",29],",",["T_WHITESPACE","\n        ",29],["T_NS_SEPARATOR","\\",30],["T_STRING","Magento",30],["T_NS_SEPARATOR","\\",30],["T_STRING","Store",30],["T_NS_SEPARATOR","\\",30],["T_STRING","Model",30],["T_NS_SEPARATOR","\\",30],["T_STRING","StoreManagerInterface",30],["T_WHITESPACE"," ",30],["T_VARIABLE","$storeManager",30],",",["T_WHITESPACE","\n        ",30],["T_NS_SEPARATOR","\\",31],["T_STRING","Magento",31],["T_NS_SEPARATOR","\\",31],["T_STRING","Catalog",31],["T_NS_SEPARATOR","\\",31],["T_STRING","Model",31],["T_NS_SEPARATOR","\\",31],["T_STRING","Layer",31],["T_WHITESPACE"," ",31],["T_VARIABLE","$layer",31],",",["T_WHITESPACE","\n        ",31],["T_NS_SEPARATOR","\\",32],["T_STRING","Magento",32],["T_NS_SEPARATOR","\\",32],["T_STRING","Catalog",32],["T_NS_SEPARATOR","\\",32],["T_STRING","Model",32],["T_NS_SEPARATOR","\\",32],["T_STRING","Layer",32],["T_NS_SEPARATOR","\\",32],["T_STRING","Filter",32],["T_NS_SEPARATOR","\\",32],["T_STRING","Item",32],["T_NS_SEPARATOR","\\",32],["T_STRING","DataBuilder",32],["T_WHITESPACE"," ",32],["T_VARIABLE","$itemDataBuilder",32],",",["T_WHITESPACE","\n        ",32],["T_NS_SEPARATOR","\\",33],["T_STRING","Magento",33],["T_NS_SEPARATOR","\\",33],["T_STRING","Framework",33],["T_NS_SEPARATOR","\\",33],["T_STRING","Filter",33],["T_NS_SEPARATOR","\\",33],["T_STRING","StripTags",33],["T_WHITESPACE"," ",33],["T_VARIABLE","$tagFilter",33],",",["T_WHITESPACE","\n        ",33],["T_ARRAY","array",34],["T_WHITESPACE"," ",34],["T_VARIABLE","$data",34],["T_WHITESPACE"," ",34],"=",["T_WHITESPACE"," ",34],"[","]",["T_WHITESPACE","\n    ",34],")",["T_WHITESPACE"," ",35],"{",["T_WHITESPACE","\n        ",35],["T_STRING","parent",36],["T_DOUBLE_COLON","::",36],["T_STRING","__construct",36],"(",["T_WHITESPACE","\n            ",36],["T_VARIABLE","$filterItemFactory",37],",",["T_WHITESPACE","\n            ",37],["T_VARIABLE","$storeManager",38],",",["T_WHITESPACE","\n            ",38],["T_VARIABLE","$layer",39],",",["T_WHITESPACE","\n            ",39],["T_VARIABLE","$itemDataBuilder",40],",",["T_WHITESPACE","\n            ",40],["T_VARIABLE","$data",41],["T_WHITESPACE","\n        ",41],")",";",["T_WHITESPACE","\n        ",42],["T_VARIABLE","$this",43],["T_OBJECT_OPERATOR","->",43],["T_STRING","tagFilter",43],["T_WHITESPACE"," ",43],"=",["T_WHITESPACE"," ",43],["T_VARIABLE","$tagFilter",43],";",["T_WHITESPACE","\n    ",43],"}",["T_WHITESPACE","\n\n    ",44],["T_DOC_COMMENT","\/**\n     * Apply attribute option filter to product collection\n     *\n     * @param \\Magento\\Framework\\App\\RequestInterface $request\n     * @return $this\n     * @throws \\Magento\\Framework\\Exception\\LocalizedException\n     *\/",46],["T_WHITESPACE","\n    ",52],["T_PUBLIC","public",53],["T_WHITESPACE"," ",53],["T_FUNCTION","function",53],["T_WHITESPACE"," ",53],["T_STRING","apply",53],"(",["T_NS_SEPARATOR","\\",53],["T_STRING","Magento",53],["T_NS_SEPARATOR","\\",53],["T_STRING","Framework",53],["T_NS_SEPARATOR","\\",53],["T_STRING","App",53],["T_NS_SEPARATOR","\\",53],["T_STRING","RequestInterface",53],["T_WHITESPACE"," ",53],["T_VARIABLE","$request",53],")",["T_WHITESPACE","\n    ",53],"{",["T_WHITESPACE","\n        ",54],["T_VARIABLE","$attributeValue",55],["T_WHITESPACE"," ",55],"=",["T_WHITESPACE"," ",55],["T_VARIABLE","$request",55],["T_OBJECT_OPERATOR","->",55],["T_STRING","getParam",55],"(",["T_VARIABLE","$this",55],["T_OBJECT_OPERATOR","->",55],["T_STRING","_requestVar",55],")",";",["T_WHITESPACE","\n        ",55],["T_IF","if",56],["T_WHITESPACE"," ",56],"(",["T_EMPTY","empty",56],"(",["T_VARIABLE","$attributeValue",56],")",")",["T_WHITESPACE"," ",56],"{",["T_WHITESPACE","\n            ",56],["T_RETURN","return",57],["T_WHITESPACE"," ",57],["T_VARIABLE","$this",57],";",["T_WHITESPACE","\n        ",57],"}",["T_WHITESPACE","\n        ",58],["T_VARIABLE","$attribute",59],["T_WHITESPACE"," ",59],"=",["T_WHITESPACE"," ",59],["T_VARIABLE","$this",59],["T_OBJECT_OPERATOR","->",59],["T_STRING","getAttributeModel",59],"(",")",";",["T_WHITESPACE","\n        ",59],["T_DOC_COMMENT","\/** @var \\Magento\\CatalogSearch\\Model\\ResourceModel\\Fulltext\\Collection $productCollection *\/",60],["T_WHITESPACE","\n        ",60],["T_VARIABLE","$productCollection",61],["T_WHITESPACE"," ",61],"=",["T_WHITESPACE"," ",61],["T_VARIABLE","$this",61],["T_OBJECT_OPERATOR","->",61],["T_STRING","getLayer",61],"(",")",["T_WHITESPACE","\n            ",61],["T_OBJECT_OPERATOR","->",62],["T_STRING","getProductCollection",62],"(",")",";",["T_WHITESPACE","\n        ",62],["T_VARIABLE","$productCollection",63],["T_OBJECT_OPERATOR","->",63],["T_STRING","addFieldToFilter",63],"(",["T_VARIABLE","$attribute",63],["T_OBJECT_OPERATOR","->",63],["T_STRING","getAttributeCode",63],"(",")",",",["T_WHITESPACE"," ",63],["T_VARIABLE","$attributeValue",63],")",";",["T_WHITESPACE","\n        ",63],["T_VARIABLE","$label",64],["T_WHITESPACE"," ",64],"=",["T_WHITESPACE"," ",64],["T_VARIABLE","$this",64],["T_OBJECT_OPERATOR","->",64],["T_STRING","getOptionText",64],"(",["T_VARIABLE","$attributeValue",64],")",";",["T_WHITESPACE","\n        ",64],["T_VARIABLE","$this",65],["T_OBJECT_OPERATOR","->",65],["T_STRING","getLayer",65],"(",")",["T_WHITESPACE","\n            ",65],["T_OBJECT_OPERATOR","->",66],["T_STRING","getState",66],"(",")",["T_WHITESPACE","\n            ",66],["T_OBJECT_OPERATOR","->",67],["T_STRING","addFilter",67],"(",["T_VARIABLE","$this",67],["T_OBJECT_OPERATOR","->",67],["T_STRING","_createItem",67],"(",["T_VARIABLE","$label",67],",",["T_WHITESPACE"," ",67],["T_VARIABLE","$attributeValue",67],")",")",";",["T_WHITESPACE","\n\n        ",67],["T_VARIABLE","$this",69],["T_OBJECT_OPERATOR","->",69],["T_STRING","setItems",69],"(","[","]",")",";",["T_WHITESPACE"," ",69],["T_COMMENT","\/\/ set items to disable show filtering\n",69],["T_WHITESPACE","        ",70],["T_RETURN","return",70],["T_WHITESPACE"," ",70],["T_VARIABLE","$this",70],";",["T_WHITESPACE","\n    ",70],"}",["T_WHITESPACE","\n\n    ",71],["T_DOC_COMMENT","\/**\n     * Get data array for building attribute filter items\n     *\n     * @return array\n     * @throws \\Magento\\Framework\\Exception\\LocalizedException\n     *\/",73],["T_WHITESPACE","\n    ",78],["T_PROTECTED","protected",79],["T_WHITESPACE"," ",79],["T_FUNCTION","function",79],["T_WHITESPACE"," ",79],["T_STRING","_getItemsData",79],"(",")",["T_WHITESPACE","\n    ",79],"{",["T_WHITESPACE","\n        ",80],["T_VARIABLE","$attribute",81],["T_WHITESPACE"," ",81],"=",["T_WHITESPACE"," ",81],["T_VARIABLE","$this",81],["T_OBJECT_OPERATOR","->",81],["T_STRING","getAttributeModel",81],"(",")",";",["T_WHITESPACE","\n        ",81],["T_DOC_COMMENT","\/** @var \\Magento\\CatalogSearch\\Model\\ResourceModel\\Fulltext\\Collection $productCollection *\/",82],["T_WHITESPACE","\n        ",82],["T_VARIABLE","$productCollection",83],["T_WHITESPACE"," ",83],"=",["T_WHITESPACE"," ",83],["T_VARIABLE","$this",83],["T_OBJECT_OPERATOR","->",83],["T_STRING","getLayer",83],"(",")",["T_WHITESPACE","\n            ",83],["T_OBJECT_OPERATOR","->",84],["T_STRING","getProductCollection",84],"(",")",";",["T_WHITESPACE","\n        ",84],["T_VARIABLE","$optionsFacetedData",85],["T_WHITESPACE"," ",85],"=",["T_WHITESPACE"," ",85],["T_VARIABLE","$productCollection",85],["T_OBJECT_OPERATOR","->",85],["T_STRING","getFacetedData",85],"(",["T_VARIABLE","$attribute",85],["T_OBJECT_OPERATOR","->",85],["T_STRING","getAttributeCode",85],"(",")",")",";",["T_WHITESPACE","\n\n        ",85],["T_IF","if",87],["T_WHITESPACE"," ",87],"(",["T_STRING","count",87],"(",["T_VARIABLE","$optionsFacetedData",87],")",["T_WHITESPACE"," ",87],["T_IS_IDENTICAL","===",87],["T_WHITESPACE"," ",87],["T_LNUMBER","0",87],["T_WHITESPACE","\n            ",87],["T_BOOLEAN_AND","&&",88],["T_WHITESPACE"," ",88],["T_VARIABLE","$this",88],["T_OBJECT_OPERATOR","->",88],["T_STRING","getAttributeIsFilterable",88],"(",["T_VARIABLE","$attribute",88],")",["T_WHITESPACE"," ",88],["T_IS_NOT_IDENTICAL","!==",88],["T_WHITESPACE"," ",88],["T_STATIC","static",88],["T_DOUBLE_COLON","::",88],["T_STRING","ATTRIBUTE_OPTIONS_ONLY_WITH_RESULTS",88],["T_WHITESPACE","\n        ",88],")",["T_WHITESPACE"," ",89],"{",["T_WHITESPACE","\n            ",89],["T_RETURN","return",90],["T_WHITESPACE"," ",90],["T_VARIABLE","$this",90],["T_OBJECT_OPERATOR","->",90],["T_STRING","itemDataBuilder",90],["T_OBJECT_OPERATOR","->",90],["T_STRING","build",90],"(",")",";",["T_WHITESPACE","\n        ",90],"}",["T_WHITESPACE","\n\n        ",91],["T_VARIABLE","$productSize",93],["T_WHITESPACE"," ",93],"=",["T_WHITESPACE"," ",93],["T_VARIABLE","$productCollection",93],["T_OBJECT_OPERATOR","->",93],["T_STRING","getSize",93],"(",")",";",["T_WHITESPACE","\n\n        ",93],["T_VARIABLE","$options",95],["T_WHITESPACE"," ",95],"=",["T_WHITESPACE"," ",95],["T_VARIABLE","$attribute",95],["T_OBJECT_OPERATOR","->",95],["T_STRING","getFrontend",95],"(",")",["T_WHITESPACE","\n            ",95],["T_OBJECT_OPERATOR","->",96],["T_STRING","getSelectOptions",96],"(",")",";",["T_WHITESPACE","\n        ",96],["T_FOREACH","foreach",97],["T_WHITESPACE"," ",97],"(",["T_VARIABLE","$options",97],["T_WHITESPACE"," ",97],["T_AS","as",97],["T_WHITESPACE"," ",97],["T_VARIABLE","$option",97],")",["T_WHITESPACE"," ",97],"{",["T_WHITESPACE","\n            ",97],["T_IF","if",98],["T_WHITESPACE"," ",98],"(",["T_EMPTY","empty",98],"(",["T_VARIABLE","$option",98],"[",["T_CONSTANT_ENCAPSED_STRING","'value'",98],"]",")",")",["T_WHITESPACE"," ",98],"{",["T_WHITESPACE","\n                ",98],["T_CONTINUE","continue",99],";",["T_WHITESPACE","\n            ",99],"}",["T_WHITESPACE","\n\n            ",100],["T_VARIABLE","$value",102],["T_WHITESPACE"," ",102],"=",["T_WHITESPACE"," ",102],["T_VARIABLE","$option",102],"[",["T_CONSTANT_ENCAPSED_STRING","'value'",102],"]",";",["T_WHITESPACE","\n\n            ",102],["T_VARIABLE","$count",104],["T_WHITESPACE"," ",104],"=",["T_WHITESPACE"," ",104],["T_ISSET","isset",104],"(",["T_VARIABLE","$optionsFacetedData",104],"[",["T_VARIABLE","$value",104],"]","[",["T_CONSTANT_ENCAPSED_STRING","'count'",104],"]",")",["T_WHITESPACE","\n                ",104],"?",["T_WHITESPACE"," ",105],["T_INT_CAST","(int)",105],["T_VARIABLE","$optionsFacetedData",105],"[",["T_VARIABLE","$value",105],"]","[",["T_CONSTANT_ENCAPSED_STRING","'count'",105],"]",["T_WHITESPACE","\n                ",105],":",["T_WHITESPACE"," ",106],["T_LNUMBER","0",106],";",["T_WHITESPACE","\n            ",106],["T_COMMENT","\/\/ Check filter type\n",107],["T_WHITESPACE","            ",108],["T_IF","if",108],["T_WHITESPACE"," ",108],"(",["T_WHITESPACE","\n                ",108],["T_VARIABLE","$this",109],["T_OBJECT_OPERATOR","->",109],["T_STRING","getAttributeIsFilterable",109],"(",["T_VARIABLE","$attribute",109],")",["T_WHITESPACE"," ",109],["T_IS_IDENTICAL","===",109],["T_WHITESPACE"," ",109],["T_STATIC","static",109],["T_DOUBLE_COLON","::",109],["T_STRING","ATTRIBUTE_OPTIONS_ONLY_WITH_RESULTS",109],["T_WHITESPACE","\n                ",109],["T_BOOLEAN_AND","&&",110],["T_WHITESPACE"," ",110],"(","!",["T_VARIABLE","$this",110],["T_OBJECT_OPERATOR","->",110],["T_STRING","isOptionReducesResults",110],"(",["T_VARIABLE","$count",110],",",["T_WHITESPACE"," ",110],["T_VARIABLE","$productSize",110],")",["T_WHITESPACE"," ",110],["T_BOOLEAN_OR","||",110],["T_WHITESPACE"," ",110],["T_VARIABLE","$count",110],["T_WHITESPACE"," ",110],["T_IS_IDENTICAL","===",110],["T_WHITESPACE"," ",110],["T_LNUMBER","0",110],")",["T_WHITESPACE","\n            ",110],")",["T_WHITESPACE"," ",111],"{",["T_WHITESPACE","\n                ",111],["T_CONTINUE","continue",112],";",["T_WHITESPACE","\n            ",112],"}",["T_WHITESPACE","\n            ",113],["T_VARIABLE","$this",114],["T_OBJECT_OPERATOR","->",114],["T_STRING","itemDataBuilder",114],["T_OBJECT_OPERATOR","->",114],["T_STRING","addItemData",114],"(",["T_WHITESPACE","\n                ",114],["T_VARIABLE","$this",115],["T_OBJECT_OPERATOR","->",115],["T_STRING","tagFilter",115],["T_OBJECT_OPERATOR","->",115],["T_STRING","filter",115],"(",["T_VARIABLE","$option",115],"[",["T_CONSTANT_ENCAPSED_STRING","'label'",115],"]",")",",",["T_WHITESPACE","\n                ",115],["T_VARIABLE","$value",116],",",["T_WHITESPACE","\n                ",116],["T_VARIABLE","$count",117],["T_WHITESPACE","\n            ",117],")",";",["T_WHITESPACE","\n        ",118],"}",["T_WHITESPACE","\n\n        ",119],["T_RETURN","return",121],["T_WHITESPACE"," ",121],["T_VARIABLE","$this",121],["T_OBJECT_OPERATOR","->",121],["T_STRING","itemDataBuilder",121],["T_OBJECT_OPERATOR","->",121],["T_STRING","build",121],"(",")",";",["T_WHITESPACE","\n    ",121],"}",["T_WHITESPACE","\n",122],"}",["T_WHITESPACE","\n",123]]
[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Copyright \u00c2\u00a9 2013-2017 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n *\/",2],["T_WHITESPACE","\n",5],["T_NAMESPACE","namespace",6],["T_WHITESPACE"," ",6],["T_STRING","Magento",6],["T_NS_SEPARATOR","\\",6],["T_STRING","GroupedProduct",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Model",6],["T_NS_SEPARATOR","\\",6],["T_STRING","ResourceModel",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Product",6],";",["T_WHITESPACE","\n\n",6],["T_USE","use",8],["T_WHITESPACE"," ",8],["T_STRING","Magento",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Catalog",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Api",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Data",8],["T_NS_SEPARATOR","\\",8],["T_STRING","ProductInterface",8],";",["T_WHITESPACE","\n",8],["T_USE","use",9],["T_WHITESPACE"," ",9],["T_STRING","Magento",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Catalog",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Model",9],["T_NS_SEPARATOR","\\",9],["T_STRING","ResourceModel",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Product",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Relation",9],";",["T_WHITESPACE","\n",9],["T_USE","use",10],["T_WHITESPACE"," ",10],["T_STRING","Magento",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Framework",10],["T_NS_SEPARATOR","\\",10],["T_STRING","EntityManager",10],["T_NS_SEPARATOR","\\",10],["T_STRING","MetadataPool",10],";",["T_WHITESPACE","\n\n",10],["T_DOC_COMMENT","\/**\n * Class Link\n *\/",12],["T_WHITESPACE","\n",14],["T_CLASS","class",15],["T_WHITESPACE"," ",15],["T_STRING","Link",15],["T_WHITESPACE"," ",15],["T_EXTENDS","extends",15],["T_WHITESPACE"," ",15],["T_NS_SEPARATOR","\\",15],["T_STRING","Magento",15],["T_NS_SEPARATOR","\\",15],["T_STRING","Catalog",15],["T_NS_SEPARATOR","\\",15],["T_STRING","Model",15],["T_NS_SEPARATOR","\\",15],["T_STRING","ResourceModel",15],["T_NS_SEPARATOR","\\",15],["T_STRING","Product",15],["T_NS_SEPARATOR","\\",15],["T_STRING","Link",15],["T_WHITESPACE","\n",15],"{",["T_WHITESPACE","\n    ",16],["T_CONST","const",17],["T_WHITESPACE"," ",17],["T_STRING","LINK_TYPE_GROUPED",17],["T_WHITESPACE"," ",17],"=",["T_WHITESPACE"," ",17],["T_LNUMBER","3",17],";",["T_WHITESPACE","\n\n    ",17],["T_DOC_COMMENT","\/**\n     * @var MetadataPool\n     *\/",19],["T_WHITESPACE","\n    ",21],["T_PROTECTED","protected",22],["T_WHITESPACE"," ",22],["T_VARIABLE","$metadataPool",22],";",["T_WHITESPACE","\n\n    ",22],["T_DOC_COMMENT","\/**\n     * Link constructor.\n     * @param \\Magento\\Framework\\Model\\ResourceModel\\Db\\Context $context\n     * @param Relation $catalogProductRelation\n     * @param MetadataPool $metadataPool\n     * @param string|null $connectionName\n     *\/",24],["T_WHITESPACE","\n    ",30],["T_PUBLIC","public",31],["T_WHITESPACE"," ",31],["T_FUNCTION","function",31],["T_WHITESPACE"," ",31],["T_STRING","__construct",31],"(",["T_WHITESPACE","\n        ",31],["T_NS_SEPARATOR","\\",32],["T_STRING","Magento",32],["T_NS_SEPARATOR","\\",32],["T_STRING","Framework",32],["T_NS_SEPARATOR","\\",32],["T_STRING","Model",32],["T_NS_SEPARATOR","\\",32],["T_STRING","ResourceModel",32],["T_NS_SEPARATOR","\\",32],["T_STRING","Db",32],["T_NS_SEPARATOR","\\",32],["T_STRING","Context",32],["T_WHITESPACE"," ",32],["T_VARIABLE","$context",32],",",["T_WHITESPACE","\n        ",32],["T_STRING","Relation",33],["T_WHITESPACE"," ",33],["T_VARIABLE","$catalogProductRelation",33],",",["T_WHITESPACE","\n        ",33],["T_STRING","MetadataPool",34],["T_WHITESPACE"," ",34],["T_VARIABLE","$metadataPool",34],",",["T_WHITESPACE","\n        ",34],["T_VARIABLE","$connectionName",35],["T_WHITESPACE"," ",35],"=",["T_WHITESPACE"," ",35],["T_STRING","null",35],["T_WHITESPACE","\n    ",35],")",["T_WHITESPACE"," ",36],"{",["T_WHITESPACE","\n        ",36],["T_VARIABLE","$this",37],["T_OBJECT_OPERATOR","->",37],["T_STRING","metadataPool",37],["T_WHITESPACE"," ",37],"=",["T_WHITESPACE"," ",37],["T_VARIABLE","$metadataPool",37],";",["T_WHITESPACE","\n        ",37],["T_STRING","parent",38],["T_DOUBLE_COLON","::",38],["T_STRING","__construct",38],"(",["T_WHITESPACE","\n            ",38],["T_VARIABLE","$context",39],",",["T_WHITESPACE","\n            ",39],["T_VARIABLE","$catalogProductRelation",40],",",["T_WHITESPACE","\n            ",40],["T_VARIABLE","$connectionName",41],["T_WHITESPACE","\n        ",41],")",";",["T_WHITESPACE","\n    ",42],"}",["T_WHITESPACE","\n\n    ",43],["T_DOC_COMMENT","\/**\n     * Retrieve Required children ids\n     * Return grouped array, ex array(\n     *   group => array(ids)\n     * )\n     *\n     * @param int $parentId\n     * @param int $typeId\n     * @return array\n     *\/",45],["T_WHITESPACE","\n    ",54],["T_PUBLIC","public",55],["T_WHITESPACE"," ",55],["T_FUNCTION","function",55],["T_WHITESPACE"," ",55],["T_STRING","getChildrenIds",55],"(",["T_VARIABLE","$parentId",55],",",["T_WHITESPACE"," ",55],["T_VARIABLE","$typeId",55],")",["T_WHITESPACE","\n    ",55],"{",["T_WHITESPACE","\n        ",56],["T_VARIABLE","$connection",57],["T_WHITESPACE"," ",57],"=",["T_WHITESPACE"," ",57],["T_VARIABLE","$this",57],["T_OBJECT_OPERATOR","->",57],["T_STRING","getConnection",57],"(",")",";",["T_WHITESPACE","\n        ",57],["T_VARIABLE","$childrenIds",58],["T_WHITESPACE"," ",58],"=",["T_WHITESPACE"," ",58],"[","]",";",["T_WHITESPACE","\n        ",58],["T_VARIABLE","$bind",59],["T_WHITESPACE"," ",59],"=",["T_WHITESPACE"," ",59],"[",["T_CONSTANT_ENCAPSED_STRING","':product_id'",59],["T_WHITESPACE"," ",59],["T_DOUBLE_ARROW","=>",59],["T_WHITESPACE"," ",59],["T_INT_CAST","(int)",59],["T_VARIABLE","$parentId",59],",",["T_WHITESPACE"," ",59],["T_CONSTANT_ENCAPSED_STRING","':link_type_id'",59],["T_WHITESPACE"," ",59],["T_DOUBLE_ARROW","=>",59],["T_WHITESPACE"," ",59],["T_INT_CAST","(int)",59],["T_VARIABLE","$typeId",59],"]",";",["T_WHITESPACE","\n        ",59],["T_VARIABLE","$select",60],["T_WHITESPACE"," ",60],"=",["T_WHITESPACE"," ",60],["T_VARIABLE","$connection",60],["T_OBJECT_OPERATOR","->",60],["T_STRING","select",60],"(",")",["T_OBJECT_OPERATOR","->",60],["T_STRING","from",60],"(",["T_WHITESPACE","\n            ",60],"[",["T_CONSTANT_ENCAPSED_STRING","'l'",61],["T_WHITESPACE"," ",61],["T_DOUBLE_ARROW","=>",61],["T_WHITESPACE"," ",61],["T_VARIABLE","$this",61],["T_OBJECT_OPERATOR","->",61],["T_STRING","getMainTable",61],"(",")","]",",",["T_WHITESPACE","\n            ",61],"[",["T_CONSTANT_ENCAPSED_STRING","'linked_product_id'",62],"]",["T_WHITESPACE","\n        ",62],")",["T_OBJECT_OPERATOR","->",63],["T_STRING","join",63],"(",["T_WHITESPACE","\n            ",63],"[",["T_CONSTANT_ENCAPSED_STRING","'cpe'",64],["T_WHITESPACE"," ",64],["T_DOUBLE_ARROW","=>",64],["T_WHITESPACE"," ",64],["T_VARIABLE","$this",64],["T_OBJECT_OPERATOR","->",64],["T_STRING","getTable",64],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog_product_entity'",64],")","]",",",["T_WHITESPACE","\n            ",64],["T_STRING","sprintf",65],"(",["T_WHITESPACE","\n                ",65],["T_CONSTANT_ENCAPSED_STRING","'cpe.%s = l.product_id'",66],",",["T_WHITESPACE","\n                ",66],["T_VARIABLE","$this",67],["T_OBJECT_OPERATOR","->",67],["T_STRING","metadataPool",67],["T_OBJECT_OPERATOR","->",67],["T_STRING","getMetadata",67],"(",["T_STRING","ProductInterface",67],["T_DOUBLE_COLON","::",67],["T_CLASS","class",67],")",["T_OBJECT_OPERATOR","->",67],["T_STRING","getLinkField",67],"(",")",["T_WHITESPACE","\n            ",67],")",["T_WHITESPACE","\n        ",68],")",["T_OBJECT_OPERATOR","->",69],["T_STRING","where",69],"(",["T_WHITESPACE","\n            ",69],["T_CONSTANT_ENCAPSED_STRING","'cpe.entity_id = :product_id'",70],["T_WHITESPACE","\n        ",70],")",["T_OBJECT_OPERATOR","->",71],["T_STRING","where",71],"(",["T_WHITESPACE","\n            ",71],["T_CONSTANT_ENCAPSED_STRING","'link_type_id = :link_type_id'",72],["T_WHITESPACE","\n        ",72],")",";",["T_WHITESPACE","\n\n        ",73],["T_VARIABLE","$select",75],["T_OBJECT_OPERATOR","->",75],["T_STRING","join",75],"(",["T_WHITESPACE","\n            ",75],"[",["T_CONSTANT_ENCAPSED_STRING","'e'",76],["T_WHITESPACE"," ",76],["T_DOUBLE_ARROW","=>",76],["T_WHITESPACE"," ",76],["T_VARIABLE","$this",76],["T_OBJECT_OPERATOR","->",76],["T_STRING","getTable",76],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog_product_entity'",76],")","]",",",["T_WHITESPACE","\n            ",76],["T_CONSTANT_ENCAPSED_STRING","'e.entity_id = l.linked_product_id AND e.required_options = 0'",77],",",["T_WHITESPACE","\n            ",77],"[","]",["T_WHITESPACE","\n        ",78],")",";",["T_WHITESPACE","\n\n        ",79],["T_VARIABLE","$childrenIds",81],"[",["T_VARIABLE","$typeId",81],"]",["T_WHITESPACE"," ",81],"=",["T_WHITESPACE"," ",81],"[","]",";",["T_WHITESPACE","\n        ",81],["T_VARIABLE","$result",82],["T_WHITESPACE"," ",82],"=",["T_WHITESPACE"," ",82],["T_VARIABLE","$connection",82],["T_OBJECT_OPERATOR","->",82],["T_STRING","fetchAll",82],"(",["T_VARIABLE","$select",82],",",["T_WHITESPACE"," ",82],["T_VARIABLE","$bind",82],")",";",["T_WHITESPACE","\n        ",82],["T_FOREACH","foreach",83],["T_WHITESPACE"," ",83],"(",["T_VARIABLE","$result",83],["T_WHITESPACE"," ",83],["T_AS","as",83],["T_WHITESPACE"," ",83],["T_VARIABLE","$row",83],")",["T_WHITESPACE"," ",83],"{",["T_WHITESPACE","\n            ",83],["T_VARIABLE","$childrenIds",84],"[",["T_VARIABLE","$typeId",84],"]","[",["T_VARIABLE","$row",84],"[",["T_CONSTANT_ENCAPSED_STRING","'linked_product_id'",84],"]","]",["T_WHITESPACE"," ",84],"=",["T_WHITESPACE"," ",84],["T_VARIABLE","$row",84],"[",["T_CONSTANT_ENCAPSED_STRING","'linked_product_id'",84],"]",";",["T_WHITESPACE","\n        ",84],"}",["T_WHITESPACE","\n\n        ",85],["T_RETURN","return",87],["T_WHITESPACE"," ",87],["T_VARIABLE","$childrenIds",87],";",["T_WHITESPACE","\n    ",87],"}",["T_WHITESPACE","\n",88],"}",["T_WHITESPACE","\n",89]]
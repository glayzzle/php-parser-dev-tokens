[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Grouped product type implementation\n *\n * Copyright \u00c2\u00a9 2013-2017 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n *\/",2],["T_WHITESPACE","\n",7],["T_NAMESPACE","namespace",8],["T_WHITESPACE"," ",8],["T_STRING","Magento",8],["T_NS_SEPARATOR","\\",8],["T_STRING","GroupedProduct",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Model",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Product",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Type",8],";",["T_WHITESPACE","\n\n",8],["T_USE","use",10],["T_WHITESPACE"," ",10],["T_STRING","Magento",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Catalog",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Api",10],["T_NS_SEPARATOR","\\",10],["T_STRING","ProductRepositoryInterface",10],";",["T_WHITESPACE","\n\n",10],["T_DOC_COMMENT","\/**\n * @SuppressWarnings(PHPMD.CouplingBetweenObjects)\n *\/",12],["T_WHITESPACE","\n",14],["T_CLASS","class",15],["T_WHITESPACE"," ",15],["T_STRING","Grouped",15],["T_WHITESPACE"," ",15],["T_EXTENDS","extends",15],["T_WHITESPACE"," ",15],["T_NS_SEPARATOR","\\",15],["T_STRING","Magento",15],["T_NS_SEPARATOR","\\",15],["T_STRING","Catalog",15],["T_NS_SEPARATOR","\\",15],["T_STRING","Model",15],["T_NS_SEPARATOR","\\",15],["T_STRING","Product",15],["T_NS_SEPARATOR","\\",15],["T_STRING","Type",15],["T_NS_SEPARATOR","\\",15],["T_STRING","AbstractType",15],["T_WHITESPACE","\n",15],"{",["T_WHITESPACE","\n    ",16],["T_CONST","const",17],["T_WHITESPACE"," ",17],["T_STRING","TYPE_CODE",17],["T_WHITESPACE"," ",17],"=",["T_WHITESPACE"," ",17],["T_CONSTANT_ENCAPSED_STRING","'grouped'",17],";",["T_WHITESPACE","\n\n    ",17],["T_DOC_COMMENT","\/**\n     * Cache key for Associated Products\n     *\n     * @var string\n     *\/",19],["T_WHITESPACE","\n    ",23],["T_PROTECTED","protected",24],["T_WHITESPACE"," ",24],["T_VARIABLE","$_keyAssociatedProducts",24],["T_WHITESPACE"," ",24],"=",["T_WHITESPACE"," ",24],["T_CONSTANT_ENCAPSED_STRING","'_cache_instance_associated_products'",24],";",["T_WHITESPACE","\n\n    ",24],["T_DOC_COMMENT","\/**\n     * Cache key for Associated Product Ids\n     *\n     * @var string\n     *\/",26],["T_WHITESPACE","\n    ",30],["T_PROTECTED","protected",31],["T_WHITESPACE"," ",31],["T_VARIABLE","$_keyAssociatedProductIds",31],["T_WHITESPACE"," ",31],"=",["T_WHITESPACE"," ",31],["T_CONSTANT_ENCAPSED_STRING","'_cache_instance_associated_product_ids'",31],";",["T_WHITESPACE","\n\n    ",31],["T_DOC_COMMENT","\/**\n     * Cache key for Status Filters\n     *\n     * @var string\n     *\/",33],["T_WHITESPACE","\n    ",37],["T_PROTECTED","protected",38],["T_WHITESPACE"," ",38],["T_VARIABLE","$_keyStatusFilters",38],["T_WHITESPACE"," ",38],"=",["T_WHITESPACE"," ",38],["T_CONSTANT_ENCAPSED_STRING","'_cache_instance_status_filters'",38],";",["T_WHITESPACE","\n\n    ",38],["T_DOC_COMMENT","\/**\n     * Product is composite properties\n     *\n     * @var bool\n     *\/",40],["T_WHITESPACE","\n    ",44],["T_PROTECTED","protected",45],["T_WHITESPACE"," ",45],["T_VARIABLE","$_isComposite",45],["T_WHITESPACE"," ",45],"=",["T_WHITESPACE"," ",45],["T_STRING","true",45],";",["T_WHITESPACE","\n\n    ",45],["T_DOC_COMMENT","\/**\n     * Product is possible to configure\n     *\n     * @var bool\n     *\/",47],["T_WHITESPACE","\n    ",51],["T_PROTECTED","protected",52],["T_WHITESPACE"," ",52],["T_VARIABLE","$_canConfigure",52],["T_WHITESPACE"," ",52],"=",["T_WHITESPACE"," ",52],["T_STRING","true",52],";",["T_WHITESPACE","\n\n    ",52],["T_DOC_COMMENT","\/**\n     * Catalog product status\n     *\n     * @var \\Magento\\Catalog\\Model\\Product\\Attribute\\Source\\Status\n     *\/",54],["T_WHITESPACE","\n    ",58],["T_PROTECTED","protected",59],["T_WHITESPACE"," ",59],["T_VARIABLE","$_catalogProductStatus",59],";",["T_WHITESPACE","\n\n    ",59],["T_DOC_COMMENT","\/**\n     * Store manager\n     *\n     * @var \\Magento\\Store\\Model\\StoreManagerInterface\n     *\/",61],["T_WHITESPACE","\n    ",65],["T_PROTECTED","protected",66],["T_WHITESPACE"," ",66],["T_VARIABLE","$_storeManager",66],";",["T_WHITESPACE","\n\n    ",66],["T_DOC_COMMENT","\/**\n     * Catalog product link\n     *\n     * @var \\Magento\\GroupedProduct\\Model\\ResourceModel\\Product\\Link\n     *\/",68],["T_WHITESPACE","\n    ",72],["T_PROTECTED","protected",73],["T_WHITESPACE"," ",73],["T_VARIABLE","$productLinks",73],";",["T_WHITESPACE","\n\n    ",73],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Framework\\App\\State\n     *\/",75],["T_WHITESPACE","\n    ",77],["T_PROTECTED","protected",78],["T_WHITESPACE"," ",78],["T_VARIABLE","$_appState",78],";",["T_WHITESPACE","\n\n    ",78],["T_DOC_COMMENT","\/** @var \\Magento\\Msrp\\Helper\\Data  *\/",80],["T_WHITESPACE","\n    ",80],["T_PROTECTED","protected",81],["T_WHITESPACE"," ",81],["T_VARIABLE","$msrpData",81],";",["T_WHITESPACE","\n\n    ",81],["T_DOC_COMMENT","\/**\n     * @param \\Magento\\Catalog\\Model\\Product\\Option $catalogProductOption\n     * @param \\Magento\\Eav\\Model\\Config $eavConfig\n     * @param \\Magento\\Catalog\\Model\\Product\\Type $catalogProductType\n     * @param \\Magento\\Framework\\Event\\ManagerInterface $eventManager\n     * @param \\Magento\\MediaStorage\\Helper\\File\\Storage\\Database $fileStorageDb\n     * @param \\Magento\\Framework\\Filesystem $filesystem\n     * @param \\Magento\\Framework\\Registry $coreRegistry\n     * @param \\Psr\\Log\\LoggerInterface $logger\n     * @param ProductRepositoryInterface $productRepository\n     * @param \\Magento\\GroupedProduct\\Model\\ResourceModel\\Product\\Link $catalogProductLink\n     * @param \\Magento\\Store\\Model\\StoreManagerInterface $storeManager\n     * @param \\Magento\\Catalog\\Model\\Product\\Attribute\\Source\\Status $catalogProductStatus\n     * @param \\Magento\\Framework\\App\\State $appState\n     * @param \\Magento\\Msrp\\Helper\\Data $msrpData\n     * @param \\Magento\\Framework\\Serialize\\Serializer\\Json|null $serializer\n     * @SuppressWarnings(PHPMD.ExcessiveParameterList)\n     *\/",83],["T_WHITESPACE","\n    ",100],["T_PUBLIC","public",101],["T_WHITESPACE"," ",101],["T_FUNCTION","function",101],["T_WHITESPACE"," ",101],["T_STRING","__construct",101],"(",["T_WHITESPACE","\n        ",101],["T_NS_SEPARATOR","\\",102],["T_STRING","Magento",102],["T_NS_SEPARATOR","\\",102],["T_STRING","Catalog",102],["T_NS_SEPARATOR","\\",102],["T_STRING","Model",102],["T_NS_SEPARATOR","\\",102],["T_STRING","Product",102],["T_NS_SEPARATOR","\\",102],["T_STRING","Option",102],["T_WHITESPACE"," ",102],["T_VARIABLE","$catalogProductOption",102],",",["T_WHITESPACE","\n        ",102],["T_NS_SEPARATOR","\\",103],["T_STRING","Magento",103],["T_NS_SEPARATOR","\\",103],["T_STRING","Eav",103],["T_NS_SEPARATOR","\\",103],["T_STRING","Model",103],["T_NS_SEPARATOR","\\",103],["T_STRING","Config",103],["T_WHITESPACE"," ",103],["T_VARIABLE","$eavConfig",103],",",["T_WHITESPACE","\n        ",103],["T_NS_SEPARATOR","\\",104],["T_STRING","Magento",104],["T_NS_SEPARATOR","\\",104],["T_STRING","Catalog",104],["T_NS_SEPARATOR","\\",104],["T_STRING","Model",104],["T_NS_SEPARATOR","\\",104],["T_STRING","Product",104],["T_NS_SEPARATOR","\\",104],["T_STRING","Type",104],["T_WHITESPACE"," ",104],["T_VARIABLE","$catalogProductType",104],",",["T_WHITESPACE","\n        ",104],["T_NS_SEPARATOR","\\",105],["T_STRING","Magento",105],["T_NS_SEPARATOR","\\",105],["T_STRING","Framework",105],["T_NS_SEPARATOR","\\",105],["T_STRING","Event",105],["T_NS_SEPARATOR","\\",105],["T_STRING","ManagerInterface",105],["T_WHITESPACE"," ",105],["T_VARIABLE","$eventManager",105],",",["T_WHITESPACE","\n        ",105],["T_NS_SEPARATOR","\\",106],["T_STRING","Magento",106],["T_NS_SEPARATOR","\\",106],["T_STRING","MediaStorage",106],["T_NS_SEPARATOR","\\",106],["T_STRING","Helper",106],["T_NS_SEPARATOR","\\",106],["T_STRING","File",106],["T_NS_SEPARATOR","\\",106],["T_STRING","Storage",106],["T_NS_SEPARATOR","\\",106],["T_STRING","Database",106],["T_WHITESPACE"," ",106],["T_VARIABLE","$fileStorageDb",106],",",["T_WHITESPACE","\n        ",106],["T_NS_SEPARATOR","\\",107],["T_STRING","Magento",107],["T_NS_SEPARATOR","\\",107],["T_STRING","Framework",107],["T_NS_SEPARATOR","\\",107],["T_STRING","Filesystem",107],["T_WHITESPACE"," ",107],["T_VARIABLE","$filesystem",107],",",["T_WHITESPACE","\n        ",107],["T_NS_SEPARATOR","\\",108],["T_STRING","Magento",108],["T_NS_SEPARATOR","\\",108],["T_STRING","Framework",108],["T_NS_SEPARATOR","\\",108],["T_STRING","Registry",108],["T_WHITESPACE"," ",108],["T_VARIABLE","$coreRegistry",108],",",["T_WHITESPACE","\n        ",108],["T_NS_SEPARATOR","\\",109],["T_STRING","Psr",109],["T_NS_SEPARATOR","\\",109],["T_STRING","Log",109],["T_NS_SEPARATOR","\\",109],["T_STRING","LoggerInterface",109],["T_WHITESPACE"," ",109],["T_VARIABLE","$logger",109],",",["T_WHITESPACE","\n        ",109],["T_STRING","ProductRepositoryInterface",110],["T_WHITESPACE"," ",110],["T_VARIABLE","$productRepository",110],",",["T_WHITESPACE","\n        ",110],["T_NS_SEPARATOR","\\",111],["T_STRING","Magento",111],["T_NS_SEPARATOR","\\",111],["T_STRING","GroupedProduct",111],["T_NS_SEPARATOR","\\",111],["T_STRING","Model",111],["T_NS_SEPARATOR","\\",111],["T_STRING","ResourceModel",111],["T_NS_SEPARATOR","\\",111],["T_STRING","Product",111],["T_NS_SEPARATOR","\\",111],["T_STRING","Link",111],["T_WHITESPACE"," ",111],["T_VARIABLE","$catalogProductLink",111],",",["T_WHITESPACE","\n        ",111],["T_NS_SEPARATOR","\\",112],["T_STRING","Magento",112],["T_NS_SEPARATOR","\\",112],["T_STRING","Store",112],["T_NS_SEPARATOR","\\",112],["T_STRING","Model",112],["T_NS_SEPARATOR","\\",112],["T_STRING","StoreManagerInterface",112],["T_WHITESPACE"," ",112],["T_VARIABLE","$storeManager",112],",",["T_WHITESPACE","\n        ",112],["T_NS_SEPARATOR","\\",113],["T_STRING","Magento",113],["T_NS_SEPARATOR","\\",113],["T_STRING","Catalog",113],["T_NS_SEPARATOR","\\",113],["T_STRING","Model",113],["T_NS_SEPARATOR","\\",113],["T_STRING","Product",113],["T_NS_SEPARATOR","\\",113],["T_STRING","Attribute",113],["T_NS_SEPARATOR","\\",113],["T_STRING","Source",113],["T_NS_SEPARATOR","\\",113],["T_STRING","Status",113],["T_WHITESPACE"," ",113],["T_VARIABLE","$catalogProductStatus",113],",",["T_WHITESPACE","\n        ",113],["T_NS_SEPARATOR","\\",114],["T_STRING","Magento",114],["T_NS_SEPARATOR","\\",114],["T_STRING","Framework",114],["T_NS_SEPARATOR","\\",114],["T_STRING","App",114],["T_NS_SEPARATOR","\\",114],["T_STRING","State",114],["T_WHITESPACE"," ",114],["T_VARIABLE","$appState",114],",",["T_WHITESPACE","\n        ",114],["T_NS_SEPARATOR","\\",115],["T_STRING","Magento",115],["T_NS_SEPARATOR","\\",115],["T_STRING","Msrp",115],["T_NS_SEPARATOR","\\",115],["T_STRING","Helper",115],["T_NS_SEPARATOR","\\",115],["T_STRING","Data",115],["T_WHITESPACE"," ",115],["T_VARIABLE","$msrpData",115],",",["T_WHITESPACE","\n        ",115],["T_NS_SEPARATOR","\\",116],["T_STRING","Magento",116],["T_NS_SEPARATOR","\\",116],["T_STRING","Framework",116],["T_NS_SEPARATOR","\\",116],["T_STRING","Serialize",116],["T_NS_SEPARATOR","\\",116],["T_STRING","Serializer",116],["T_NS_SEPARATOR","\\",116],["T_STRING","Json",116],["T_WHITESPACE"," ",116],["T_VARIABLE","$serializer",116],["T_WHITESPACE"," ",116],"=",["T_WHITESPACE"," ",116],["T_STRING","null",116],["T_WHITESPACE","\n    ",116],")",["T_WHITESPACE"," ",117],"{",["T_WHITESPACE","\n        ",117],["T_VARIABLE","$this",118],["T_OBJECT_OPERATOR","->",118],["T_STRING","productLinks",118],["T_WHITESPACE"," ",118],"=",["T_WHITESPACE"," ",118],["T_VARIABLE","$catalogProductLink",118],";",["T_WHITESPACE","\n        ",118],["T_VARIABLE","$this",119],["T_OBJECT_OPERATOR","->",119],["T_STRING","_storeManager",119],["T_WHITESPACE"," ",119],"=",["T_WHITESPACE"," ",119],["T_VARIABLE","$storeManager",119],";",["T_WHITESPACE","\n        ",119],["T_VARIABLE","$this",120],["T_OBJECT_OPERATOR","->",120],["T_STRING","_catalogProductStatus",120],["T_WHITESPACE"," ",120],"=",["T_WHITESPACE"," ",120],["T_VARIABLE","$catalogProductStatus",120],";",["T_WHITESPACE","\n        ",120],["T_VARIABLE","$this",121],["T_OBJECT_OPERATOR","->",121],["T_STRING","_appState",121],["T_WHITESPACE"," ",121],"=",["T_WHITESPACE"," ",121],["T_VARIABLE","$appState",121],";",["T_WHITESPACE","\n        ",121],["T_VARIABLE","$this",122],["T_OBJECT_OPERATOR","->",122],["T_STRING","msrpData",122],["T_WHITESPACE"," ",122],"=",["T_WHITESPACE"," ",122],["T_VARIABLE","$msrpData",122],";",["T_WHITESPACE","\n        ",122],["T_STRING","parent",123],["T_DOUBLE_COLON","::",123],["T_STRING","__construct",123],"(",["T_WHITESPACE","\n            ",123],["T_VARIABLE","$catalogProductOption",124],",",["T_WHITESPACE","\n            ",124],["T_VARIABLE","$eavConfig",125],",",["T_WHITESPACE","\n            ",125],["T_VARIABLE","$catalogProductType",126],",",["T_WHITESPACE","\n            ",126],["T_VARIABLE","$eventManager",127],",",["T_WHITESPACE","\n            ",127],["T_VARIABLE","$fileStorageDb",128],",",["T_WHITESPACE","\n            ",128],["T_VARIABLE","$filesystem",129],",",["T_WHITESPACE","\n            ",129],["T_VARIABLE","$coreRegistry",130],",",["T_WHITESPACE","\n            ",130],["T_VARIABLE","$logger",131],",",["T_WHITESPACE","\n            ",131],["T_VARIABLE","$productRepository",132],",",["T_WHITESPACE","\n            ",132],["T_VARIABLE","$serializer",133],["T_WHITESPACE","\n        ",133],")",";",["T_WHITESPACE","\n    ",134],"}",["T_WHITESPACE","\n\n    ",135],["T_DOC_COMMENT","\/**\n     * Return relation info about used products\n     *\n     * @return \\Magento\\Framework\\DataObject Object with information data\n     *\/",137],["T_WHITESPACE","\n    ",141],["T_PUBLIC","public",142],["T_WHITESPACE"," ",142],["T_FUNCTION","function",142],["T_WHITESPACE"," ",142],["T_STRING","getRelationInfo",142],"(",")",["T_WHITESPACE","\n    ",142],"{",["T_WHITESPACE","\n        ",143],["T_VARIABLE","$info",144],["T_WHITESPACE"," ",144],"=",["T_WHITESPACE"," ",144],["T_NEW","new",144],["T_WHITESPACE"," ",144],["T_NS_SEPARATOR","\\",144],["T_STRING","Magento",144],["T_NS_SEPARATOR","\\",144],["T_STRING","Framework",144],["T_NS_SEPARATOR","\\",144],["T_STRING","DataObject",144],"(",")",";",["T_WHITESPACE","\n        ",144],["T_VARIABLE","$info",145],["T_OBJECT_OPERATOR","->",145],["T_STRING","setTable",145],"(",["T_WHITESPACE","\n            ",145],["T_CONSTANT_ENCAPSED_STRING","'catalog_product_link'",146],["T_WHITESPACE","\n        ",146],")",["T_OBJECT_OPERATOR","->",147],["T_STRING","setParentFieldName",147],"(",["T_WHITESPACE","\n            ",147],["T_CONSTANT_ENCAPSED_STRING","'product_id'",148],["T_WHITESPACE","\n        ",148],")",["T_OBJECT_OPERATOR","->",149],["T_STRING","setChildFieldName",149],"(",["T_WHITESPACE","\n            ",149],["T_CONSTANT_ENCAPSED_STRING","'linked_product_id'",150],["T_WHITESPACE","\n        ",150],")",["T_OBJECT_OPERATOR","->",151],["T_STRING","setWhere",151],"(",["T_WHITESPACE","\n            ",151],["T_CONSTANT_ENCAPSED_STRING","'link_type_id='",152],["T_WHITESPACE"," ",152],".",["T_WHITESPACE"," ",152],["T_NS_SEPARATOR","\\",152],["T_STRING","Magento",152],["T_NS_SEPARATOR","\\",152],["T_STRING","GroupedProduct",152],["T_NS_SEPARATOR","\\",152],["T_STRING","Model",152],["T_NS_SEPARATOR","\\",152],["T_STRING","ResourceModel",152],["T_NS_SEPARATOR","\\",152],["T_STRING","Product",152],["T_NS_SEPARATOR","\\",152],["T_STRING","Link",152],["T_DOUBLE_COLON","::",152],["T_STRING","LINK_TYPE_GROUPED",152],["T_WHITESPACE","\n        ",152],")",";",["T_WHITESPACE","\n        ",153],["T_RETURN","return",154],["T_WHITESPACE"," ",154],["T_VARIABLE","$info",154],";",["T_WHITESPACE","\n    ",154],"}",["T_WHITESPACE","\n\n    ",155],["T_DOC_COMMENT","\/**\n     * Retrieve Required children ids\n     * Return grouped array, ex array(\n     *   group => array(ids)\n     * )\n     *\n     * @param int $parentId\n     * @param bool $required\n     * @return array\n     *\n     * @SuppressWarnings(PHPMD.UnusedFormalParameter)\n     *\/",157],["T_WHITESPACE","\n    ",168],["T_PUBLIC","public",169],["T_WHITESPACE"," ",169],["T_FUNCTION","function",169],["T_WHITESPACE"," ",169],["T_STRING","getChildrenIds",169],"(",["T_VARIABLE","$parentId",169],",",["T_WHITESPACE"," ",169],["T_VARIABLE","$required",169],["T_WHITESPACE"," ",169],"=",["T_WHITESPACE"," ",169],["T_STRING","true",169],")",["T_WHITESPACE","\n    ",169],"{",["T_WHITESPACE","\n        ",170],["T_RETURN","return",171],["T_WHITESPACE"," ",171],["T_VARIABLE","$this",171],["T_OBJECT_OPERATOR","->",171],["T_STRING","productLinks",171],["T_OBJECT_OPERATOR","->",171],["T_STRING","getChildrenIds",171],"(",["T_WHITESPACE","\n            ",171],["T_VARIABLE","$parentId",172],",",["T_WHITESPACE","\n            ",172],["T_NS_SEPARATOR","\\",173],["T_STRING","Magento",173],["T_NS_SEPARATOR","\\",173],["T_STRING","GroupedProduct",173],["T_NS_SEPARATOR","\\",173],["T_STRING","Model",173],["T_NS_SEPARATOR","\\",173],["T_STRING","ResourceModel",173],["T_NS_SEPARATOR","\\",173],["T_STRING","Product",173],["T_NS_SEPARATOR","\\",173],["T_STRING","Link",173],["T_DOUBLE_COLON","::",173],["T_STRING","LINK_TYPE_GROUPED",173],["T_WHITESPACE","\n        ",173],")",";",["T_WHITESPACE","\n    ",174],"}",["T_WHITESPACE","\n\n    ",175],["T_DOC_COMMENT","\/**\n     * Retrieve parent ids array by requested child\n     *\n     * @param int|array $childId\n     * @return array\n     *\/",177],["T_WHITESPACE","\n    ",182],["T_PUBLIC","public",183],["T_WHITESPACE"," ",183],["T_FUNCTION","function",183],["T_WHITESPACE"," ",183],["T_STRING","getParentIdsByChild",183],"(",["T_VARIABLE","$childId",183],")",["T_WHITESPACE","\n    ",183],"{",["T_WHITESPACE","\n        ",184],["T_RETURN","return",185],["T_WHITESPACE"," ",185],["T_VARIABLE","$this",185],["T_OBJECT_OPERATOR","->",185],["T_STRING","productLinks",185],["T_OBJECT_OPERATOR","->",185],["T_STRING","getParentIdsByChild",185],"(",["T_WHITESPACE","\n            ",185],["T_VARIABLE","$childId",186],",",["T_WHITESPACE","\n            ",186],["T_NS_SEPARATOR","\\",187],["T_STRING","Magento",187],["T_NS_SEPARATOR","\\",187],["T_STRING","GroupedProduct",187],["T_NS_SEPARATOR","\\",187],["T_STRING","Model",187],["T_NS_SEPARATOR","\\",187],["T_STRING","ResourceModel",187],["T_NS_SEPARATOR","\\",187],["T_STRING","Product",187],["T_NS_SEPARATOR","\\",187],["T_STRING","Link",187],["T_DOUBLE_COLON","::",187],["T_STRING","LINK_TYPE_GROUPED",187],["T_WHITESPACE","\n        ",187],")",";",["T_WHITESPACE","\n    ",188],"}",["T_WHITESPACE","\n\n    ",189],["T_DOC_COMMENT","\/**\n     * Retrieve array of associated products\n     *\n     * @param \\Magento\\Catalog\\Model\\Product $product\n     * @return array\n     *\/",191],["T_WHITESPACE","\n    ",196],["T_PUBLIC","public",197],["T_WHITESPACE"," ",197],["T_FUNCTION","function",197],["T_WHITESPACE"," ",197],["T_STRING","getAssociatedProducts",197],"(",["T_VARIABLE","$product",197],")",["T_WHITESPACE","\n    ",197],"{",["T_WHITESPACE","\n        ",198],["T_IF","if",199],["T_WHITESPACE"," ",199],"(","!",["T_VARIABLE","$product",199],["T_OBJECT_OPERATOR","->",199],["T_STRING","hasData",199],"(",["T_VARIABLE","$this",199],["T_OBJECT_OPERATOR","->",199],["T_STRING","_keyAssociatedProducts",199],")",")",["T_WHITESPACE"," ",199],"{",["T_WHITESPACE","\n            ",199],["T_VARIABLE","$associatedProducts",200],["T_WHITESPACE"," ",200],"=",["T_WHITESPACE"," ",200],"[","]",";",["T_WHITESPACE","\n\n            ",200],["T_VARIABLE","$this",202],["T_OBJECT_OPERATOR","->",202],["T_STRING","setSaleableStatus",202],"(",["T_VARIABLE","$product",202],")",";",["T_WHITESPACE","\n\n            ",202],["T_VARIABLE","$collection",204],["T_WHITESPACE"," ",204],"=",["T_WHITESPACE"," ",204],["T_VARIABLE","$this",204],["T_OBJECT_OPERATOR","->",204],["T_STRING","getAssociatedProductCollection",204],"(",["T_WHITESPACE","\n                ",204],["T_VARIABLE","$product",205],["T_WHITESPACE","\n            ",205],")",["T_OBJECT_OPERATOR","->",206],["T_STRING","addAttributeToSelect",206],"(",["T_WHITESPACE","\n                ",206],"[",["T_CONSTANT_ENCAPSED_STRING","'name'",207],",",["T_WHITESPACE"," ",207],["T_CONSTANT_ENCAPSED_STRING","'price'",207],",",["T_WHITESPACE"," ",207],["T_CONSTANT_ENCAPSED_STRING","'special_price'",207],",",["T_WHITESPACE"," ",207],["T_CONSTANT_ENCAPSED_STRING","'special_from_date'",207],",",["T_WHITESPACE"," ",207],["T_CONSTANT_ENCAPSED_STRING","'special_to_date'",207],",",["T_WHITESPACE"," ",207],["T_CONSTANT_ENCAPSED_STRING","'tax_class_id'",207],"]",["T_WHITESPACE","\n            ",207],")",["T_OBJECT_OPERATOR","->",208],["T_STRING","addFilterByRequiredOptions",208],"(",")",["T_OBJECT_OPERATOR","->",208],["T_STRING","setPositionOrder",208],"(",")",["T_OBJECT_OPERATOR","->",208],["T_STRING","addStoreFilter",208],"(",["T_WHITESPACE","\n                ",208],["T_VARIABLE","$this",209],["T_OBJECT_OPERATOR","->",209],["T_STRING","getStoreFilter",209],"(",["T_VARIABLE","$product",209],")",["T_WHITESPACE","\n            ",209],")",["T_OBJECT_OPERATOR","->",210],["T_STRING","addAttributeToFilter",210],"(",["T_WHITESPACE","\n                ",210],["T_CONSTANT_ENCAPSED_STRING","'status'",211],",",["T_WHITESPACE","\n                ",211],"[",["T_CONSTANT_ENCAPSED_STRING","'in'",212],["T_WHITESPACE"," ",212],["T_DOUBLE_ARROW","=>",212],["T_WHITESPACE"," ",212],["T_VARIABLE","$this",212],["T_OBJECT_OPERATOR","->",212],["T_STRING","getStatusFilters",212],"(",["T_VARIABLE","$product",212],")","]",["T_WHITESPACE","\n            ",212],")",";",["T_WHITESPACE","\n\n            ",213],["T_FOREACH","foreach",215],["T_WHITESPACE"," ",215],"(",["T_VARIABLE","$collection",215],["T_WHITESPACE"," ",215],["T_AS","as",215],["T_WHITESPACE"," ",215],["T_VARIABLE","$item",215],")",["T_WHITESPACE"," ",215],"{",["T_WHITESPACE","\n                ",215],["T_VARIABLE","$associatedProducts",216],"[","]",["T_WHITESPACE"," ",216],"=",["T_WHITESPACE"," ",216],["T_VARIABLE","$item",216],";",["T_WHITESPACE","\n            ",216],"}",["T_WHITESPACE","\n\n            ",217],["T_VARIABLE","$product",219],["T_OBJECT_OPERATOR","->",219],["T_STRING","setData",219],"(",["T_VARIABLE","$this",219],["T_OBJECT_OPERATOR","->",219],["T_STRING","_keyAssociatedProducts",219],",",["T_WHITESPACE"," ",219],["T_VARIABLE","$associatedProducts",219],")",";",["T_WHITESPACE","\n        ",219],"}",["T_WHITESPACE","\n        ",220],["T_RETURN","return",221],["T_WHITESPACE"," ",221],["T_VARIABLE","$product",221],["T_OBJECT_OPERATOR","->",221],["T_STRING","getData",221],"(",["T_VARIABLE","$this",221],["T_OBJECT_OPERATOR","->",221],["T_STRING","_keyAssociatedProducts",221],")",";",["T_WHITESPACE","\n    ",221],"}",["T_WHITESPACE","\n\n    ",222],["T_DOC_COMMENT","\/**\n     * @param \\Magento\\Catalog\\Model\\Product $product\n     * @return \\Magento\\Catalog\\Model\\Product\n     *\/",224],["T_WHITESPACE","\n    ",227],["T_PUBLIC","public",228],["T_WHITESPACE"," ",228],["T_FUNCTION","function",228],["T_WHITESPACE"," ",228],["T_STRING","flushAssociatedProductsCache",228],"(",["T_VARIABLE","$product",228],")",["T_WHITESPACE","\n    ",228],"{",["T_WHITESPACE","\n        ",229],["T_RETURN","return",230],["T_WHITESPACE"," ",230],["T_VARIABLE","$product",230],["T_OBJECT_OPERATOR","->",230],["T_STRING","unsData",230],"(",["T_VARIABLE","$this",230],["T_OBJECT_OPERATOR","->",230],["T_STRING","_keyAssociatedProducts",230],")",";",["T_WHITESPACE","\n    ",230],"}",["T_WHITESPACE","\n\n    ",231],["T_DOC_COMMENT","\/**\n     * Add status filter to collection\n     *\n     * @param  int $status\n     * @param  \\Magento\\Catalog\\Model\\Product $product\n     * @return $this\n     *\/",233],["T_WHITESPACE","\n    ",239],["T_PUBLIC","public",240],["T_WHITESPACE"," ",240],["T_FUNCTION","function",240],["T_WHITESPACE"," ",240],["T_STRING","addStatusFilter",240],"(",["T_VARIABLE","$status",240],",",["T_WHITESPACE"," ",240],["T_VARIABLE","$product",240],")",["T_WHITESPACE","\n    ",240],"{",["T_WHITESPACE","\n        ",241],["T_VARIABLE","$statusFilters",242],["T_WHITESPACE"," ",242],"=",["T_WHITESPACE"," ",242],["T_VARIABLE","$product",242],["T_OBJECT_OPERATOR","->",242],["T_STRING","getData",242],"(",["T_VARIABLE","$this",242],["T_OBJECT_OPERATOR","->",242],["T_STRING","_keyStatusFilters",242],")",";",["T_WHITESPACE","\n        ",242],["T_IF","if",243],["T_WHITESPACE"," ",243],"(","!",["T_STRING","is_array",243],"(",["T_VARIABLE","$statusFilters",243],")",")",["T_WHITESPACE"," ",243],"{",["T_WHITESPACE","\n            ",243],["T_VARIABLE","$statusFilters",244],["T_WHITESPACE"," ",244],"=",["T_WHITESPACE"," ",244],"[","]",";",["T_WHITESPACE","\n        ",244],"}",["T_WHITESPACE","\n\n        ",245],["T_VARIABLE","$statusFilters",247],"[","]",["T_WHITESPACE"," ",247],"=",["T_WHITESPACE"," ",247],["T_VARIABLE","$status",247],";",["T_WHITESPACE","\n        ",247],["T_VARIABLE","$product",248],["T_OBJECT_OPERATOR","->",248],["T_STRING","setData",248],"(",["T_VARIABLE","$this",248],["T_OBJECT_OPERATOR","->",248],["T_STRING","_keyStatusFilters",248],",",["T_WHITESPACE"," ",248],["T_VARIABLE","$statusFilters",248],")",";",["T_WHITESPACE","\n\n        ",248],["T_RETURN","return",250],["T_WHITESPACE"," ",250],["T_VARIABLE","$this",250],";",["T_WHITESPACE","\n    ",250],"}",["T_WHITESPACE","\n\n    ",251],["T_DOC_COMMENT","\/**\n     * Set only saleable filter\n     *\n     * @param  \\Magento\\Catalog\\Model\\Product $product\n     * @return $this\n     *\/",253],["T_WHITESPACE","\n    ",258],["T_PUBLIC","public",259],["T_WHITESPACE"," ",259],["T_FUNCTION","function",259],["T_WHITESPACE"," ",259],["T_STRING","setSaleableStatus",259],"(",["T_VARIABLE","$product",259],")",["T_WHITESPACE","\n    ",259],"{",["T_WHITESPACE","\n        ",260],["T_VARIABLE","$product",261],["T_OBJECT_OPERATOR","->",261],["T_STRING","setData",261],"(",["T_VARIABLE","$this",261],["T_OBJECT_OPERATOR","->",261],["T_STRING","_keyStatusFilters",261],",",["T_WHITESPACE"," ",261],["T_VARIABLE","$this",261],["T_OBJECT_OPERATOR","->",261],["T_STRING","_catalogProductStatus",261],["T_OBJECT_OPERATOR","->",261],["T_STRING","getSaleableStatusIds",261],"(",")",")",";",["T_WHITESPACE","\n        ",261],["T_RETURN","return",262],["T_WHITESPACE"," ",262],["T_VARIABLE","$this",262],";",["T_WHITESPACE","\n    ",262],"}",["T_WHITESPACE","\n\n    ",263],["T_DOC_COMMENT","\/**\n     * Return all assigned status filters\n     *\n     * @param \\Magento\\Catalog\\Model\\Product $product\n     * @return array\n     *\/",265],["T_WHITESPACE","\n    ",270],["T_PUBLIC","public",271],["T_WHITESPACE"," ",271],["T_FUNCTION","function",271],["T_WHITESPACE"," ",271],["T_STRING","getStatusFilters",271],"(",["T_VARIABLE","$product",271],")",["T_WHITESPACE","\n    ",271],"{",["T_WHITESPACE","\n        ",272],["T_IF","if",273],["T_WHITESPACE"," ",273],"(","!",["T_VARIABLE","$product",273],["T_OBJECT_OPERATOR","->",273],["T_STRING","hasData",273],"(",["T_VARIABLE","$this",273],["T_OBJECT_OPERATOR","->",273],["T_STRING","_keyStatusFilters",273],")",")",["T_WHITESPACE"," ",273],"{",["T_WHITESPACE","\n            ",273],["T_RETURN","return",274],["T_WHITESPACE"," ",274],"[",["T_WHITESPACE","\n                ",274],["T_NS_SEPARATOR","\\",275],["T_STRING","Magento",275],["T_NS_SEPARATOR","\\",275],["T_STRING","Catalog",275],["T_NS_SEPARATOR","\\",275],["T_STRING","Model",275],["T_NS_SEPARATOR","\\",275],["T_STRING","Product",275],["T_NS_SEPARATOR","\\",275],["T_STRING","Attribute",275],["T_NS_SEPARATOR","\\",275],["T_STRING","Source",275],["T_NS_SEPARATOR","\\",275],["T_STRING","Status",275],["T_DOUBLE_COLON","::",275],["T_STRING","STATUS_ENABLED",275],",",["T_WHITESPACE","\n                ",275],["T_NS_SEPARATOR","\\",276],["T_STRING","Magento",276],["T_NS_SEPARATOR","\\",276],["T_STRING","Catalog",276],["T_NS_SEPARATOR","\\",276],["T_STRING","Model",276],["T_NS_SEPARATOR","\\",276],["T_STRING","Product",276],["T_NS_SEPARATOR","\\",276],["T_STRING","Attribute",276],["T_NS_SEPARATOR","\\",276],["T_STRING","Source",276],["T_NS_SEPARATOR","\\",276],["T_STRING","Status",276],["T_DOUBLE_COLON","::",276],["T_STRING","STATUS_DISABLED",276],",",["T_WHITESPACE","\n            ",276],"]",";",["T_WHITESPACE","\n        ",277],"}",["T_WHITESPACE","\n        ",278],["T_RETURN","return",279],["T_WHITESPACE"," ",279],["T_VARIABLE","$product",279],["T_OBJECT_OPERATOR","->",279],["T_STRING","getData",279],"(",["T_VARIABLE","$this",279],["T_OBJECT_OPERATOR","->",279],["T_STRING","_keyStatusFilters",279],")",";",["T_WHITESPACE","\n    ",279],"}",["T_WHITESPACE","\n\n    ",280],["T_DOC_COMMENT","\/**\n     * Retrieve related products identifiers\n     *\n     * @param \\Magento\\Catalog\\Model\\Product $product\n     * @return array\n     *\/",282],["T_WHITESPACE","\n    ",287],["T_PUBLIC","public",288],["T_WHITESPACE"," ",288],["T_FUNCTION","function",288],["T_WHITESPACE"," ",288],["T_STRING","getAssociatedProductIds",288],"(",["T_VARIABLE","$product",288],")",["T_WHITESPACE","\n    ",288],"{",["T_WHITESPACE","\n        ",289],["T_IF","if",290],["T_WHITESPACE"," ",290],"(","!",["T_VARIABLE","$product",290],["T_OBJECT_OPERATOR","->",290],["T_STRING","hasData",290],"(",["T_VARIABLE","$this",290],["T_OBJECT_OPERATOR","->",290],["T_STRING","_keyAssociatedProductIds",290],")",")",["T_WHITESPACE"," ",290],"{",["T_WHITESPACE","\n            ",290],["T_VARIABLE","$associatedProductIds",291],["T_WHITESPACE"," ",291],"=",["T_WHITESPACE"," ",291],"[","]",";",["T_WHITESPACE","\n            ",291],["T_DOC_COMMENT","\/** @var $item \\Magento\\Catalog\\Model\\Product *\/",292],["T_WHITESPACE","\n            ",292],["T_FOREACH","foreach",293],["T_WHITESPACE"," ",293],"(",["T_VARIABLE","$this",293],["T_OBJECT_OPERATOR","->",293],["T_STRING","getAssociatedProducts",293],"(",["T_VARIABLE","$product",293],")",["T_WHITESPACE"," ",293],["T_AS","as",293],["T_WHITESPACE"," ",293],["T_VARIABLE","$item",293],")",["T_WHITESPACE"," ",293],"{",["T_WHITESPACE","\n                ",293],["T_VARIABLE","$associatedProductIds",294],"[","]",["T_WHITESPACE"," ",294],"=",["T_WHITESPACE"," ",294],["T_VARIABLE","$item",294],["T_OBJECT_OPERATOR","->",294],["T_STRING","getId",294],"(",")",";",["T_WHITESPACE","\n            ",294],"}",["T_WHITESPACE","\n            ",295],["T_VARIABLE","$product",296],["T_OBJECT_OPERATOR","->",296],["T_STRING","setData",296],"(",["T_VARIABLE","$this",296],["T_OBJECT_OPERATOR","->",296],["T_STRING","_keyAssociatedProductIds",296],",",["T_WHITESPACE"," ",296],["T_VARIABLE","$associatedProductIds",296],")",";",["T_WHITESPACE","\n        ",296],"}",["T_WHITESPACE","\n        ",297],["T_RETURN","return",298],["T_WHITESPACE"," ",298],["T_VARIABLE","$product",298],["T_OBJECT_OPERATOR","->",298],["T_STRING","getData",298],"(",["T_VARIABLE","$this",298],["T_OBJECT_OPERATOR","->",298],["T_STRING","_keyAssociatedProductIds",298],")",";",["T_WHITESPACE","\n    ",298],"}",["T_WHITESPACE","\n\n    ",299],["T_DOC_COMMENT","\/**\n     * Retrieve collection of associated products\n     *\n     * @param \\Magento\\Catalog\\Model\\Product $product\n     * @return \\Magento\\Catalog\\Model\\ResourceModel\\Product\\Link\\Product\\Collection\n     *\/",301],["T_WHITESPACE","\n    ",306],["T_PUBLIC","public",307],["T_WHITESPACE"," ",307],["T_FUNCTION","function",307],["T_WHITESPACE"," ",307],["T_STRING","getAssociatedProductCollection",307],"(",["T_VARIABLE","$product",307],")",["T_WHITESPACE","\n    ",307],"{",["T_WHITESPACE","\n        ",308],["T_DOC_COMMENT","\/** @var \\Magento\\Catalog\\Model\\Product\\Link  $links *\/",309],["T_WHITESPACE","\n        ",309],["T_VARIABLE","$links",310],["T_WHITESPACE"," ",310],"=",["T_WHITESPACE"," ",310],["T_VARIABLE","$product",310],["T_OBJECT_OPERATOR","->",310],["T_STRING","getLinkInstance",310],"(",")",";",["T_WHITESPACE","\n        ",310],["T_VARIABLE","$links",311],["T_OBJECT_OPERATOR","->",311],["T_STRING","setLinkTypeId",311],"(",["T_NS_SEPARATOR","\\",311],["T_STRING","Magento",311],["T_NS_SEPARATOR","\\",311],["T_STRING","GroupedProduct",311],["T_NS_SEPARATOR","\\",311],["T_STRING","Model",311],["T_NS_SEPARATOR","\\",311],["T_STRING","ResourceModel",311],["T_NS_SEPARATOR","\\",311],["T_STRING","Product",311],["T_NS_SEPARATOR","\\",311],["T_STRING","Link",311],["T_DOUBLE_COLON","::",311],["T_STRING","LINK_TYPE_GROUPED",311],")",";",["T_WHITESPACE","\n        ",311],["T_VARIABLE","$collection",312],["T_WHITESPACE"," ",312],"=",["T_WHITESPACE"," ",312],["T_VARIABLE","$links",312],["T_OBJECT_OPERATOR","->",312],["T_STRING","getProductCollection",312],"(",")",["T_OBJECT_OPERATOR","->",312],["T_STRING","setFlag",312],"(",["T_WHITESPACE","\n            ",312],["T_CONSTANT_ENCAPSED_STRING","'product_children'",313],",",["T_WHITESPACE","\n            ",313],["T_STRING","true",314],["T_WHITESPACE","\n        ",314],")",["T_OBJECT_OPERATOR","->",315],["T_STRING","setIsStrongMode",315],"(",")",";",["T_WHITESPACE","\n        ",315],["T_VARIABLE","$collection",316],["T_OBJECT_OPERATOR","->",316],["T_STRING","setProduct",316],"(",["T_VARIABLE","$product",316],")",";",["T_WHITESPACE","\n        ",316],["T_RETURN","return",317],["T_WHITESPACE"," ",317],["T_VARIABLE","$collection",317],";",["T_WHITESPACE","\n    ",317],"}",["T_WHITESPACE","\n\n    ",318],["T_DOC_COMMENT","\/**\n     * @param \\Magento\\Framework\\DataObject $buyRequest\n     * @param \\Magento\\Catalog\\Model\\Product $product\n     * @param bool $isStrictProcessMode\n     * @return array|string\n     *\/",320],["T_WHITESPACE","\n    ",325],["T_PROTECTED","protected",326],["T_WHITESPACE"," ",326],["T_FUNCTION","function",326],["T_WHITESPACE"," ",326],["T_STRING","getProductInfo",326],"(",["T_NS_SEPARATOR","\\",326],["T_STRING","Magento",326],["T_NS_SEPARATOR","\\",326],["T_STRING","Framework",326],["T_NS_SEPARATOR","\\",326],["T_STRING","DataObject",326],["T_WHITESPACE"," ",326],["T_VARIABLE","$buyRequest",326],",",["T_WHITESPACE"," ",326],["T_VARIABLE","$product",326],",",["T_WHITESPACE"," ",326],["T_VARIABLE","$isStrictProcessMode",326],")",["T_WHITESPACE","\n    ",326],"{",["T_WHITESPACE","\n        ",327],["T_VARIABLE","$productsInfo",328],["T_WHITESPACE"," ",328],"=",["T_WHITESPACE"," ",328],["T_VARIABLE","$buyRequest",328],["T_OBJECT_OPERATOR","->",328],["T_STRING","getSuperGroup",328],"(",")",["T_WHITESPACE"," ",328],"?",":",["T_WHITESPACE"," ",328],"[","]",";",["T_WHITESPACE","\n        ",328],["T_VARIABLE","$associatedProducts",329],["T_WHITESPACE"," ",329],"=",["T_WHITESPACE"," ",329],["T_VARIABLE","$this",329],["T_OBJECT_OPERATOR","->",329],["T_STRING","getAssociatedProducts",329],"(",["T_VARIABLE","$product",329],")",";",["T_WHITESPACE","\n\n        ",329],["T_IF","if",331],["T_WHITESPACE"," ",331],"(","!",["T_STRING","is_array",331],"(",["T_VARIABLE","$productsInfo",331],")",")",["T_WHITESPACE"," ",331],"{",["T_WHITESPACE","\n            ",331],["T_RETURN","return",332],["T_WHITESPACE"," ",332],["T_STRING","__",332],"(",["T_CONSTANT_ENCAPSED_STRING","'Please specify the quantity of product(s).'",332],")",["T_OBJECT_OPERATOR","->",332],["T_STRING","render",332],"(",")",";",["T_WHITESPACE","\n        ",332],"}",["T_WHITESPACE","\n        ",333],["T_FOREACH","foreach",334],["T_WHITESPACE"," ",334],"(",["T_VARIABLE","$associatedProducts",334],["T_WHITESPACE"," ",334],["T_AS","as",334],["T_WHITESPACE"," ",334],["T_VARIABLE","$subProduct",334],")",["T_WHITESPACE"," ",334],"{",["T_WHITESPACE","\n            ",334],["T_IF","if",335],["T_WHITESPACE"," ",335],"(","!",["T_ISSET","isset",335],"(",["T_VARIABLE","$productsInfo",335],"[",["T_VARIABLE","$subProduct",335],["T_OBJECT_OPERATOR","->",335],["T_STRING","getId",335],"(",")","]",")",")",["T_WHITESPACE"," ",335],"{",["T_WHITESPACE","\n                ",335],["T_IF","if",336],["T_WHITESPACE"," ",336],"(",["T_VARIABLE","$isStrictProcessMode",336],["T_WHITESPACE"," ",336],["T_BOOLEAN_AND","&&",336],["T_WHITESPACE"," ",336],"!",["T_VARIABLE","$subProduct",336],["T_OBJECT_OPERATOR","->",336],["T_STRING","getQty",336],"(",")",")",["T_WHITESPACE"," ",336],"{",["T_WHITESPACE","\n                    ",336],["T_RETURN","return",337],["T_WHITESPACE"," ",337],["T_STRING","__",337],"(",["T_CONSTANT_ENCAPSED_STRING","'Please specify the quantity of product(s).'",337],")",["T_OBJECT_OPERATOR","->",337],["T_STRING","render",337],"(",")",";",["T_WHITESPACE","\n                ",337],"}",["T_WHITESPACE","\n                ",338],["T_VARIABLE","$productsInfo",339],"[",["T_VARIABLE","$subProduct",339],["T_OBJECT_OPERATOR","->",339],["T_STRING","getId",339],"(",")","]",["T_WHITESPACE"," ",339],"=",["T_WHITESPACE"," ",339],["T_STRING","intval",339],"(",["T_VARIABLE","$subProduct",339],["T_OBJECT_OPERATOR","->",339],["T_STRING","getQty",339],"(",")",")",";",["T_WHITESPACE","\n            ",339],"}",["T_WHITESPACE","\n        ",340],"}",["T_WHITESPACE","\n\n        ",341],["T_RETURN","return",343],["T_WHITESPACE"," ",343],["T_VARIABLE","$productsInfo",343],";",["T_WHITESPACE","\n    ",343],"}",["T_WHITESPACE","\n\n    ",344],["T_DOC_COMMENT","\/**\n     * Prepare product and its configuration to be added to some products list.\n     * Perform standard preparation process and add logic specific to Grouped product type.\n     *\n     * @param \\Magento\\Framework\\DataObject $buyRequest\n     * @param \\Magento\\Catalog\\Model\\Product $product\n     * @param string $processMode\n     * @return \\Magento\\Framework\\Phrase|array|string\n     * @SuppressWarnings(PHPMD.CyclomaticComplexity)\n     * @SuppressWarnings(PHPMD.NPathComplexity)\n     *\/",346],["T_WHITESPACE","\n    ",356],["T_PROTECTED","protected",357],["T_WHITESPACE"," ",357],["T_FUNCTION","function",357],["T_WHITESPACE"," ",357],["T_STRING","_prepareProduct",357],"(",["T_NS_SEPARATOR","\\",357],["T_STRING","Magento",357],["T_NS_SEPARATOR","\\",357],["T_STRING","Framework",357],["T_NS_SEPARATOR","\\",357],["T_STRING","DataObject",357],["T_WHITESPACE"," ",357],["T_VARIABLE","$buyRequest",357],",",["T_WHITESPACE"," ",357],["T_VARIABLE","$product",357],",",["T_WHITESPACE"," ",357],["T_VARIABLE","$processMode",357],")",["T_WHITESPACE","\n    ",357],"{",["T_WHITESPACE","\n        ",358],["T_VARIABLE","$products",359],["T_WHITESPACE"," ",359],"=",["T_WHITESPACE"," ",359],"[","]",";",["T_WHITESPACE","\n        ",359],["T_VARIABLE","$associatedProductsInfo",360],["T_WHITESPACE"," ",360],"=",["T_WHITESPACE"," ",360],"[","]",";",["T_WHITESPACE","\n        ",360],["T_VARIABLE","$isStrictProcessMode",361],["T_WHITESPACE"," ",361],"=",["T_WHITESPACE"," ",361],["T_VARIABLE","$this",361],["T_OBJECT_OPERATOR","->",361],["T_STRING","_isStrictProcessMode",361],"(",["T_VARIABLE","$processMode",361],")",";",["T_WHITESPACE","\n        ",361],["T_VARIABLE","$productsInfo",362],["T_WHITESPACE"," ",362],"=",["T_WHITESPACE"," ",362],["T_VARIABLE","$this",362],["T_OBJECT_OPERATOR","->",362],["T_STRING","getProductInfo",362],"(",["T_VARIABLE","$buyRequest",362],",",["T_WHITESPACE"," ",362],["T_VARIABLE","$product",362],",",["T_WHITESPACE"," ",362],["T_VARIABLE","$isStrictProcessMode",362],")",";",["T_WHITESPACE","\n        ",362],["T_IF","if",363],["T_WHITESPACE"," ",363],"(",["T_STRING","is_string",363],"(",["T_VARIABLE","$productsInfo",363],")",")",["T_WHITESPACE"," ",363],"{",["T_WHITESPACE","\n            ",363],["T_RETURN","return",364],["T_WHITESPACE"," ",364],["T_VARIABLE","$productsInfo",364],";",["T_WHITESPACE","\n        ",364],"}",["T_WHITESPACE","\n        ",365],["T_VARIABLE","$associatedProducts",366],["T_WHITESPACE"," ",366],"=",["T_WHITESPACE"," ",366],"!",["T_VARIABLE","$isStrictProcessMode",366],["T_WHITESPACE"," ",366],["T_BOOLEAN_OR","||",366],["T_WHITESPACE"," ",366],"!",["T_EMPTY","empty",366],"(",["T_VARIABLE","$productsInfo",366],")",["T_WHITESPACE","\n            ",366],"?",["T_WHITESPACE"," ",367],["T_VARIABLE","$this",367],["T_OBJECT_OPERATOR","->",367],["T_STRING","getAssociatedProducts",367],"(",["T_VARIABLE","$product",367],")",["T_WHITESPACE","\n            ",367],":",["T_WHITESPACE"," ",368],["T_STRING","false",368],";",["T_WHITESPACE","\n\n        ",368],["T_FOREACH","foreach",370],["T_WHITESPACE"," ",370],"(",["T_VARIABLE","$associatedProducts",370],["T_WHITESPACE"," ",370],["T_AS","as",370],["T_WHITESPACE"," ",370],["T_VARIABLE","$subProduct",370],")",["T_WHITESPACE"," ",370],"{",["T_WHITESPACE","\n            ",370],["T_VARIABLE","$qty",371],["T_WHITESPACE"," ",371],"=",["T_WHITESPACE"," ",371],["T_VARIABLE","$productsInfo",371],"[",["T_VARIABLE","$subProduct",371],["T_OBJECT_OPERATOR","->",371],["T_STRING","getId",371],"(",")","]",";",["T_WHITESPACE","\n            ",371],["T_IF","if",372],["T_WHITESPACE"," ",372],"(","!",["T_STRING","is_numeric",372],"(",["T_VARIABLE","$qty",372],")",["T_WHITESPACE"," ",372],["T_BOOLEAN_OR","||",372],["T_WHITESPACE"," ",372],["T_EMPTY","empty",372],"(",["T_VARIABLE","$qty",372],")",")",["T_WHITESPACE"," ",372],"{",["T_WHITESPACE","\n                ",372],["T_CONTINUE","continue",373],";",["T_WHITESPACE","\n            ",373],"}",["T_WHITESPACE","\n\n            ",374],["T_VARIABLE","$_result",376],["T_WHITESPACE"," ",376],"=",["T_WHITESPACE"," ",376],["T_VARIABLE","$subProduct",376],["T_OBJECT_OPERATOR","->",376],["T_STRING","getTypeInstance",376],"(",")",["T_OBJECT_OPERATOR","->",376],["T_STRING","_prepareProduct",376],"(",["T_VARIABLE","$buyRequest",376],",",["T_WHITESPACE"," ",376],["T_VARIABLE","$subProduct",376],",",["T_WHITESPACE"," ",376],["T_VARIABLE","$processMode",376],")",";",["T_WHITESPACE","\n\n            ",376],["T_IF","if",378],["T_WHITESPACE"," ",378],"(",["T_STRING","is_string",378],"(",["T_VARIABLE","$_result",378],")",")",["T_WHITESPACE"," ",378],"{",["T_WHITESPACE","\n                ",378],["T_RETURN","return",379],["T_WHITESPACE"," ",379],["T_VARIABLE","$_result",379],";",["T_WHITESPACE","\n            ",379],"}",["T_WHITESPACE"," ",380],["T_ELSEIF","elseif",380],["T_WHITESPACE"," ",380],"(","!",["T_ISSET","isset",380],"(",["T_VARIABLE","$_result",380],"[",["T_LNUMBER","0",380],"]",")",")",["T_WHITESPACE"," ",380],"{",["T_WHITESPACE","\n                ",380],["T_RETURN","return",381],["T_WHITESPACE"," ",381],["T_STRING","__",381],"(",["T_CONSTANT_ENCAPSED_STRING","'Cannot process the item.'",381],")",["T_OBJECT_OPERATOR","->",381],["T_STRING","render",381],"(",")",";",["T_WHITESPACE","\n            ",381],"}",["T_WHITESPACE","\n\n            ",382],["T_IF","if",384],["T_WHITESPACE"," ",384],"(",["T_VARIABLE","$isStrictProcessMode",384],")",["T_WHITESPACE"," ",384],"{",["T_WHITESPACE","\n                ",384],["T_VARIABLE","$_result",385],"[",["T_LNUMBER","0",385],"]",["T_OBJECT_OPERATOR","->",385],["T_STRING","setCartQty",385],"(",["T_VARIABLE","$qty",385],")",";",["T_WHITESPACE","\n                ",385],["T_VARIABLE","$_result",386],"[",["T_LNUMBER","0",386],"]",["T_OBJECT_OPERATOR","->",386],["T_STRING","addCustomOption",386],"(",["T_CONSTANT_ENCAPSED_STRING","'product_type'",386],",",["T_WHITESPACE"," ",386],["T_STRING","self",386],["T_DOUBLE_COLON","::",386],["T_STRING","TYPE_CODE",386],",",["T_WHITESPACE"," ",386],["T_VARIABLE","$product",386],")",";",["T_WHITESPACE","\n                ",386],["T_VARIABLE","$_result",387],"[",["T_LNUMBER","0",387],"]",["T_OBJECT_OPERATOR","->",387],["T_STRING","addCustomOption",387],"(",["T_WHITESPACE","\n                    ",387],["T_CONSTANT_ENCAPSED_STRING","'info_buyRequest'",388],",",["T_WHITESPACE","\n                    ",388],["T_VARIABLE","$this",389],["T_OBJECT_OPERATOR","->",389],["T_STRING","serializer",389],["T_OBJECT_OPERATOR","->",389],["T_STRING","serialize",389],"(",["T_WHITESPACE","\n                        ",389],"[",["T_WHITESPACE","\n                            ",390],["T_CONSTANT_ENCAPSED_STRING","'super_product_config'",391],["T_WHITESPACE"," ",391],["T_DOUBLE_ARROW","=>",391],["T_WHITESPACE"," ",391],"[",["T_WHITESPACE","\n                                ",391],["T_CONSTANT_ENCAPSED_STRING","'product_type'",392],["T_WHITESPACE"," ",392],["T_DOUBLE_ARROW","=>",392],["T_WHITESPACE"," ",392],["T_STRING","self",392],["T_DOUBLE_COLON","::",392],["T_STRING","TYPE_CODE",392],",",["T_WHITESPACE","\n                                ",392],["T_CONSTANT_ENCAPSED_STRING","'product_id'",393],["T_WHITESPACE"," ",393],["T_DOUBLE_ARROW","=>",393],["T_WHITESPACE"," ",393],["T_VARIABLE","$product",393],["T_OBJECT_OPERATOR","->",393],["T_STRING","getId",393],"(",")",",",["T_WHITESPACE","\n                            ",393],"]",",",["T_WHITESPACE","\n                        ",394],"]",["T_WHITESPACE","\n                    ",395],")",["T_WHITESPACE","\n                ",396],")",";",["T_WHITESPACE","\n                ",397],["T_VARIABLE","$products",398],"[","]",["T_WHITESPACE"," ",398],"=",["T_WHITESPACE"," ",398],["T_VARIABLE","$_result",398],"[",["T_LNUMBER","0",398],"]",";",["T_WHITESPACE","\n            ",398],"}",["T_WHITESPACE"," ",399],["T_ELSE","else",399],["T_WHITESPACE"," ",399],"{",["T_WHITESPACE","\n                ",399],["T_VARIABLE","$associatedProductsInfo",400],"[","]",["T_WHITESPACE"," ",400],"=",["T_WHITESPACE"," ",400],"[",["T_VARIABLE","$subProduct",400],["T_OBJECT_OPERATOR","->",400],["T_STRING","getId",400],"(",")",["T_WHITESPACE"," ",400],["T_DOUBLE_ARROW","=>",400],["T_WHITESPACE"," ",400],["T_VARIABLE","$qty",400],"]",";",["T_WHITESPACE","\n                ",400],["T_VARIABLE","$product",401],["T_OBJECT_OPERATOR","->",401],["T_STRING","addCustomOption",401],"(",["T_CONSTANT_ENCAPSED_STRING","'associated_product_'",401],["T_WHITESPACE"," ",401],".",["T_WHITESPACE"," ",401],["T_VARIABLE","$subProduct",401],["T_OBJECT_OPERATOR","->",401],["T_STRING","getId",401],"(",")",",",["T_WHITESPACE"," ",401],["T_VARIABLE","$qty",401],")",";",["T_WHITESPACE","\n            ",401],"}",["T_WHITESPACE","\n        ",402],"}",["T_WHITESPACE","\n\n        ",403],["T_IF","if",405],["T_WHITESPACE"," ",405],"(","!",["T_VARIABLE","$isStrictProcessMode",405],["T_WHITESPACE"," ",405],["T_BOOLEAN_OR","||",405],["T_WHITESPACE"," ",405],["T_STRING","count",405],"(",["T_VARIABLE","$associatedProductsInfo",405],")",")",["T_WHITESPACE"," ",405],"{",["T_WHITESPACE","\n            ",405],["T_VARIABLE","$product",406],["T_OBJECT_OPERATOR","->",406],["T_STRING","addCustomOption",406],"(",["T_CONSTANT_ENCAPSED_STRING","'product_type'",406],",",["T_WHITESPACE"," ",406],["T_STRING","self",406],["T_DOUBLE_COLON","::",406],["T_STRING","TYPE_CODE",406],",",["T_WHITESPACE"," ",406],["T_VARIABLE","$product",406],")",";",["T_WHITESPACE","\n            ",406],["T_VARIABLE","$product",407],["T_OBJECT_OPERATOR","->",407],["T_STRING","addCustomOption",407],"(",["T_CONSTANT_ENCAPSED_STRING","'info_buyRequest'",407],",",["T_WHITESPACE"," ",407],["T_VARIABLE","$this",407],["T_OBJECT_OPERATOR","->",407],["T_STRING","serializer",407],["T_OBJECT_OPERATOR","->",407],["T_STRING","serialize",407],"(",["T_VARIABLE","$buyRequest",407],["T_OBJECT_OPERATOR","->",407],["T_STRING","getData",407],"(",")",")",")",";",["T_WHITESPACE","\n\n            ",407],["T_VARIABLE","$products",409],"[","]",["T_WHITESPACE"," ",409],"=",["T_WHITESPACE"," ",409],["T_VARIABLE","$product",409],";",["T_WHITESPACE","\n        ",409],"}",["T_WHITESPACE","\n\n        ",410],["T_IF","if",412],["T_WHITESPACE"," ",412],"(",["T_STRING","count",412],"(",["T_VARIABLE","$products",412],")",")",["T_WHITESPACE"," ",412],"{",["T_WHITESPACE","\n            ",412],["T_RETURN","return",413],["T_WHITESPACE"," ",413],["T_VARIABLE","$products",413],";",["T_WHITESPACE","\n        ",413],"}",["T_WHITESPACE","\n\n        ",414],["T_RETURN","return",416],["T_WHITESPACE"," ",416],["T_STRING","__",416],"(",["T_CONSTANT_ENCAPSED_STRING","'Please specify the quantity of product(s).'",416],")",["T_OBJECT_OPERATOR","->",416],["T_STRING","render",416],"(",")",";",["T_WHITESPACE","\n    ",416],"}",["T_WHITESPACE","\n\n    ",417],["T_DOC_COMMENT","\/**\n     * Retrieve products divided into groups required to purchase\n     * At least one product in each group has to be purchased\n     *\n     * @param \\Magento\\Catalog\\Model\\Product $product\n     * @return array\n     *\/",419],["T_WHITESPACE","\n    ",425],["T_PUBLIC","public",426],["T_WHITESPACE"," ",426],["T_FUNCTION","function",426],["T_WHITESPACE"," ",426],["T_STRING","getProductsToPurchaseByReqGroups",426],"(",["T_VARIABLE","$product",426],")",["T_WHITESPACE","\n    ",426],"{",["T_WHITESPACE","\n        ",427],["T_RETURN","return",428],["T_WHITESPACE"," ",428],"[",["T_VARIABLE","$this",428],["T_OBJECT_OPERATOR","->",428],["T_STRING","getAssociatedProducts",428],"(",["T_VARIABLE","$product",428],")","]",";",["T_WHITESPACE","\n    ",428],"}",["T_WHITESPACE","\n\n    ",429],["T_DOC_COMMENT","\/**\n     * Prepare selected qty for grouped product's options\n     *\n     * @param  \\Magento\\Catalog\\Model\\Product $product\n     * @param  \\Magento\\Framework\\DataObject $buyRequest\n     * @return array\n     * @SuppressWarnings(PHPMD.UnusedFormalParameter)\n     *\/",431],["T_WHITESPACE","\n    ",438],["T_PUBLIC","public",439],["T_WHITESPACE"," ",439],["T_FUNCTION","function",439],["T_WHITESPACE"," ",439],["T_STRING","processBuyRequest",439],"(",["T_VARIABLE","$product",439],",",["T_WHITESPACE"," ",439],["T_VARIABLE","$buyRequest",439],")",["T_WHITESPACE","\n    ",439],"{",["T_WHITESPACE","\n        ",440],["T_VARIABLE","$superGroup",441],["T_WHITESPACE"," ",441],"=",["T_WHITESPACE"," ",441],["T_VARIABLE","$buyRequest",441],["T_OBJECT_OPERATOR","->",441],["T_STRING","getSuperGroup",441],"(",")",";",["T_WHITESPACE","\n        ",441],["T_VARIABLE","$superGroup",442],["T_WHITESPACE"," ",442],"=",["T_WHITESPACE"," ",442],["T_STRING","is_array",442],"(",["T_VARIABLE","$superGroup",442],")",["T_WHITESPACE"," ",442],"?",["T_WHITESPACE"," ",442],["T_STRING","array_filter",442],"(",["T_VARIABLE","$superGroup",442],",",["T_WHITESPACE"," ",442],["T_CONSTANT_ENCAPSED_STRING","'intval'",442],")",["T_WHITESPACE"," ",442],":",["T_WHITESPACE"," ",442],"[","]",";",["T_WHITESPACE","\n\n        ",442],["T_VARIABLE","$options",444],["T_WHITESPACE"," ",444],"=",["T_WHITESPACE"," ",444],"[",["T_CONSTANT_ENCAPSED_STRING","'super_group'",444],["T_WHITESPACE"," ",444],["T_DOUBLE_ARROW","=>",444],["T_WHITESPACE"," ",444],["T_VARIABLE","$superGroup",444],"]",";",["T_WHITESPACE","\n\n        ",444],["T_RETURN","return",446],["T_WHITESPACE"," ",446],["T_VARIABLE","$options",446],";",["T_WHITESPACE","\n    ",446],"}",["T_WHITESPACE","\n\n    ",447],["T_DOC_COMMENT","\/**\n     * Check that product of this type has weight\n     *\n     * @return bool\n     *\/",449],["T_WHITESPACE","\n    ",453],["T_PUBLIC","public",454],["T_WHITESPACE"," ",454],["T_FUNCTION","function",454],["T_WHITESPACE"," ",454],["T_STRING","hasWeight",454],"(",")",["T_WHITESPACE","\n    ",454],"{",["T_WHITESPACE","\n        ",455],["T_RETURN","return",456],["T_WHITESPACE"," ",456],["T_STRING","false",456],";",["T_WHITESPACE","\n    ",456],"}",["T_WHITESPACE","\n\n    ",457],["T_DOC_COMMENT","\/**\n     * Delete data specific for Grouped product type\n     *\n     * @param \\Magento\\Catalog\\Model\\Product $product\n     * @return void\n     * @SuppressWarnings(PHPMD.UnusedFormalParameter)\n     *\/",459],["T_WHITESPACE","\n    ",465],["T_PUBLIC","public",466],["T_WHITESPACE"," ",466],["T_FUNCTION","function",466],["T_WHITESPACE"," ",466],["T_STRING","deleteTypeSpecificData",466],"(",["T_NS_SEPARATOR","\\",466],["T_STRING","Magento",466],["T_NS_SEPARATOR","\\",466],["T_STRING","Catalog",466],["T_NS_SEPARATOR","\\",466],["T_STRING","Model",466],["T_NS_SEPARATOR","\\",466],["T_STRING","Product",466],["T_WHITESPACE"," ",466],["T_VARIABLE","$product",466],")",["T_WHITESPACE","\n    ",466],"{",["T_WHITESPACE","\n    ",467],"}",["T_WHITESPACE","\n\n    ",468],["T_DOC_COMMENT","\/**\n     * {@inheritdoc}\n     *\/",470],["T_WHITESPACE","\n    ",472],["T_PUBLIC","public",473],["T_WHITESPACE"," ",473],["T_FUNCTION","function",473],["T_WHITESPACE"," ",473],["T_STRING","beforeSave",473],"(",["T_VARIABLE","$product",473],")",["T_WHITESPACE","\n    ",473],"{",["T_WHITESPACE","\n        ",474],["T_COMMENT","\/\/clear cached associated links\n",475],["T_WHITESPACE","        ",476],["T_VARIABLE","$product",476],["T_OBJECT_OPERATOR","->",476],["T_STRING","unsetData",476],"(",["T_VARIABLE","$this",476],["T_OBJECT_OPERATOR","->",476],["T_STRING","_keyAssociatedProducts",476],")",";",["T_WHITESPACE","\n        ",476],["T_IF","if",477],["T_WHITESPACE"," ",477],"(",["T_VARIABLE","$product",477],["T_OBJECT_OPERATOR","->",477],["T_STRING","hasData",477],"(",["T_CONSTANT_ENCAPSED_STRING","'product_options'",477],")",["T_WHITESPACE"," ",477],["T_BOOLEAN_AND","&&",477],["T_WHITESPACE"," ",477],"!",["T_EMPTY","empty",477],"(",["T_VARIABLE","$product",477],["T_OBJECT_OPERATOR","->",477],["T_STRING","getData",477],"(",["T_CONSTANT_ENCAPSED_STRING","'product_options'",477],")",")",")",["T_WHITESPACE"," ",477],"{",["T_WHITESPACE","\n            ",477],["T_THROW","throw",478],["T_WHITESPACE"," ",478],["T_NEW","new",478],["T_WHITESPACE"," ",478],["T_NS_SEPARATOR","\\",478],["T_STRING","Exception",478],"(",["T_CONSTANT_ENCAPSED_STRING","'Custom options for grouped product type are not supported'",478],")",";",["T_WHITESPACE","\n        ",478],"}",["T_WHITESPACE","\n        ",479],["T_RETURN","return",480],["T_WHITESPACE"," ",480],["T_STRING","parent",480],["T_DOUBLE_COLON","::",480],["T_STRING","beforeSave",480],"(",["T_VARIABLE","$product",480],")",";",["T_WHITESPACE","\n    ",480],"}",["T_WHITESPACE","\n\n    ",481],["T_DOC_COMMENT","\/**\n     * @param \\Magento\\Catalog\\Model\\Product $product\n     * @return int\n     *\/",483],["T_WHITESPACE","\n    ",486],["T_PUBLIC","public",487],["T_WHITESPACE"," ",487],["T_FUNCTION","function",487],["T_WHITESPACE"," ",487],["T_STRING","getChildrenMsrp",487],"(",["T_NS_SEPARATOR","\\",487],["T_STRING","Magento",487],["T_NS_SEPARATOR","\\",487],["T_STRING","Catalog",487],["T_NS_SEPARATOR","\\",487],["T_STRING","Model",487],["T_NS_SEPARATOR","\\",487],["T_STRING","Product",487],["T_WHITESPACE"," ",487],["T_VARIABLE","$product",487],")",["T_WHITESPACE","\n    ",487],"{",["T_WHITESPACE","\n        ",488],["T_VARIABLE","$prices",489],["T_WHITESPACE"," ",489],"=",["T_WHITESPACE"," ",489],"[","]",";",["T_WHITESPACE","\n        ",489],["T_FOREACH","foreach",490],["T_WHITESPACE"," ",490],"(",["T_VARIABLE","$this",490],["T_OBJECT_OPERATOR","->",490],["T_STRING","getAssociatedProducts",490],"(",["T_VARIABLE","$product",490],")",["T_WHITESPACE"," ",490],["T_AS","as",490],["T_WHITESPACE"," ",490],["T_VARIABLE","$item",490],")",["T_WHITESPACE"," ",490],"{",["T_WHITESPACE","\n            ",490],["T_IF","if",491],["T_WHITESPACE"," ",491],"(",["T_VARIABLE","$item",491],["T_OBJECT_OPERATOR","->",491],["T_STRING","getMsrp",491],"(",")",["T_WHITESPACE"," ",491],["T_IS_NOT_IDENTICAL","!==",491],["T_WHITESPACE"," ",491],["T_STRING","null",491],")",["T_WHITESPACE"," ",491],"{",["T_WHITESPACE","\n                ",491],["T_VARIABLE","$prices",492],"[","]",["T_WHITESPACE"," ",492],"=",["T_WHITESPACE"," ",492],["T_VARIABLE","$item",492],["T_OBJECT_OPERATOR","->",492],["T_STRING","getMsrp",492],"(",")",";",["T_WHITESPACE","\n            ",492],"}",["T_WHITESPACE","\n        ",493],"}",["T_WHITESPACE","\n        ",494],["T_RETURN","return",495],["T_WHITESPACE"," ",495],["T_VARIABLE","$prices",495],["T_WHITESPACE"," ",495],"?",["T_WHITESPACE"," ",495],["T_STRING","min",495],"(",["T_VARIABLE","$prices",495],")",["T_WHITESPACE"," ",495],":",["T_WHITESPACE"," ",495],["T_LNUMBER","0",495],";",["T_WHITESPACE","\n    ",495],"}",["T_WHITESPACE","\n",496],"}",["T_WHITESPACE","\n",497]]
[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Copyright \u00c2\u00a9 2013-2017 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n *\/",2],["T_WHITESPACE","\n",5],["T_NAMESPACE","namespace",6],["T_WHITESPACE"," ",6],["T_STRING","Magento",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Payment",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Test",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Unit",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Model",6],";",["T_WHITESPACE","\n\n",6],["T_USE","use",8],["T_WHITESPACE"," ",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Magento",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Payment",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Model",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Cart",8],";",["T_WHITESPACE","\n\n",8],["T_CLASS","class",10],["T_WHITESPACE"," ",10],["T_STRING","CartTest",10],["T_WHITESPACE"," ",10],["T_EXTENDS","extends",10],["T_WHITESPACE"," ",10],["T_NS_SEPARATOR","\\",10],["T_STRING","PHPUnit_Framework_TestCase",10],["T_WHITESPACE","\n",10],"{",["T_WHITESPACE","\n    ",11],["T_DOC_COMMENT","\/** @var \\Magento\\Payment\\Model\\Cart *\/",12],["T_WHITESPACE","\n    ",12],["T_PROTECTED","protected",13],["T_WHITESPACE"," ",13],["T_VARIABLE","$_model",13],";",["T_WHITESPACE","\n\n    ",13],["T_DOC_COMMENT","\/**  @var \\PHPUnit_Framework_MockObject_MockObject *\/",15],["T_WHITESPACE","\n    ",15],["T_PROTECTED","protected",16],["T_WHITESPACE"," ",16],["T_VARIABLE","$_eventManagerMock",16],";",["T_WHITESPACE","\n\n    ",16],["T_DOC_COMMENT","\/**  @var \\PHPUnit_Framework_MockObject_MockObject *\/",18],["T_WHITESPACE","\n    ",18],["T_PROTECTED","protected",19],["T_WHITESPACE"," ",19],["T_VARIABLE","$_salesModelMock",19],";",["T_WHITESPACE","\n\n    ",19],["T_PROTECTED","protected",21],["T_WHITESPACE"," ",21],["T_FUNCTION","function",21],["T_WHITESPACE"," ",21],["T_STRING","setUp",21],"(",")",["T_WHITESPACE","\n    ",21],"{",["T_WHITESPACE","\n        ",22],["T_VARIABLE","$this",23],["T_OBJECT_OPERATOR","->",23],["T_STRING","_eventManagerMock",23],["T_WHITESPACE"," ",23],"=",["T_WHITESPACE"," ",23],["T_VARIABLE","$this",23],["T_OBJECT_OPERATOR","->",23],["T_STRING","getMock",23],"(",["T_NS_SEPARATOR","\\",23],["T_STRING","Magento",23],["T_NS_SEPARATOR","\\",23],["T_STRING","Framework",23],["T_NS_SEPARATOR","\\",23],["T_STRING","Event",23],["T_NS_SEPARATOR","\\",23],["T_STRING","ManagerInterface",23],["T_DOUBLE_COLON","::",23],["T_CLASS","class",23],")",";",["T_WHITESPACE","\n        ",23],["T_VARIABLE","$this",24],["T_OBJECT_OPERATOR","->",24],["T_STRING","_salesModelMock",24],["T_WHITESPACE"," ",24],"=",["T_WHITESPACE"," ",24],["T_VARIABLE","$this",24],["T_OBJECT_OPERATOR","->",24],["T_STRING","getMock",24],"(",["T_NS_SEPARATOR","\\",24],["T_STRING","Magento",24],["T_NS_SEPARATOR","\\",24],["T_STRING","Payment",24],["T_NS_SEPARATOR","\\",24],["T_STRING","Model",24],["T_NS_SEPARATOR","\\",24],["T_STRING","Cart",24],["T_NS_SEPARATOR","\\",24],["T_STRING","SalesModel",24],["T_NS_SEPARATOR","\\",24],["T_STRING","SalesModelInterface",24],["T_DOUBLE_COLON","::",24],["T_CLASS","class",24],")",";",["T_WHITESPACE","\n        ",24],["T_VARIABLE","$factoryMock",25],["T_WHITESPACE"," ",25],"=",["T_WHITESPACE"," ",25],["T_VARIABLE","$this",25],["T_OBJECT_OPERATOR","->",25],["T_STRING","getMock",25],"(",["T_NS_SEPARATOR","\\",25],["T_STRING","Magento",25],["T_NS_SEPARATOR","\\",25],["T_STRING","Payment",25],["T_NS_SEPARATOR","\\",25],["T_STRING","Model",25],["T_NS_SEPARATOR","\\",25],["T_STRING","Cart",25],["T_NS_SEPARATOR","\\",25],["T_STRING","SalesModel",25],["T_NS_SEPARATOR","\\",25],["T_STRING","Factory",25],["T_DOUBLE_COLON","::",25],["T_CLASS","class",25],",",["T_WHITESPACE"," ",25],"[","]",",",["T_WHITESPACE"," ",25],"[","]",",",["T_WHITESPACE"," ",25],["T_CONSTANT_ENCAPSED_STRING","''",25],",",["T_WHITESPACE"," ",25],["T_STRING","false",25],")",";",["T_WHITESPACE","\n        ",25],["T_VARIABLE","$factoryMock",26],["T_OBJECT_OPERATOR","->",26],["T_STRING","expects",26],"(",["T_VARIABLE","$this",26],["T_OBJECT_OPERATOR","->",26],["T_STRING","once",26],"(",")",")",["T_OBJECT_OPERATOR","->",26],["T_STRING","method",26],"(",["T_CONSTANT_ENCAPSED_STRING","'create'",26],")",["T_OBJECT_OPERATOR","->",26],["T_STRING","will",26],"(",["T_VARIABLE","$this",26],["T_OBJECT_OPERATOR","->",26],["T_STRING","returnValue",26],"(",["T_VARIABLE","$this",26],["T_OBJECT_OPERATOR","->",26],["T_STRING","_salesModelMock",26],")",")",";",["T_WHITESPACE","\n\n        ",26],["T_VARIABLE","$this",28],["T_OBJECT_OPERATOR","->",28],["T_STRING","_model",28],["T_WHITESPACE"," ",28],"=",["T_WHITESPACE"," ",28],["T_NEW","new",28],["T_WHITESPACE"," ",28],["T_NS_SEPARATOR","\\",28],["T_STRING","Magento",28],["T_NS_SEPARATOR","\\",28],["T_STRING","Payment",28],["T_NS_SEPARATOR","\\",28],["T_STRING","Model",28],["T_NS_SEPARATOR","\\",28],["T_STRING","Cart",28],"(",["T_VARIABLE","$factoryMock",28],",",["T_WHITESPACE"," ",28],["T_VARIABLE","$this",28],["T_OBJECT_OPERATOR","->",28],["T_STRING","_eventManagerMock",28],",",["T_WHITESPACE"," ",28],["T_STRING","null",28],")",";",["T_WHITESPACE","\n    ",28],"}",["T_WHITESPACE","\n\n    ",29],["T_DOC_COMMENT","\/**\n     * Test sales model getter\n     *\/",31],["T_WHITESPACE","\n    ",33],["T_PUBLIC","public",34],["T_WHITESPACE"," ",34],["T_FUNCTION","function",34],["T_WHITESPACE"," ",34],["T_STRING","testGetSalesModel",34],"(",")",["T_WHITESPACE","\n    ",34],"{",["T_WHITESPACE","\n        ",35],["T_VARIABLE","$this",36],["T_OBJECT_OPERATOR","->",36],["T_STRING","assertTrue",36],"(",["T_VARIABLE","$this",36],["T_OBJECT_OPERATOR","->",36],["T_STRING","_salesModelMock",36],["T_WHITESPACE"," ",36],["T_IS_IDENTICAL","===",36],["T_WHITESPACE"," ",36],["T_VARIABLE","$this",36],["T_OBJECT_OPERATOR","->",36],["T_STRING","_model",36],["T_OBJECT_OPERATOR","->",36],["T_STRING","getSalesModel",36],"(",")",")",";",["T_WHITESPACE","\n    ",36],"}",["T_WHITESPACE","\n\n    ",37],["T_DOC_COMMENT","\/**\n     * Test addCustomItem()\n     *\/",39],["T_WHITESPACE","\n    ",41],["T_PUBLIC","public",42],["T_WHITESPACE"," ",42],["T_FUNCTION","function",42],["T_WHITESPACE"," ",42],["T_STRING","testAddCustomItem",42],"(",")",["T_WHITESPACE","\n    ",42],"{",["T_WHITESPACE","\n        ",43],["T_VARIABLE","$this",44],["T_OBJECT_OPERATOR","->",44],["T_STRING","_salesModelMock",44],["T_OBJECT_OPERATOR","->",44],["T_STRING","expects",44],"(",["T_WHITESPACE","\n            ",44],["T_VARIABLE","$this",45],["T_OBJECT_OPERATOR","->",45],["T_STRING","once",45],"(",")",["T_WHITESPACE","\n        ",45],")",["T_OBJECT_OPERATOR","->",46],["T_STRING","method",46],"(",["T_WHITESPACE","\n            ",46],["T_CONSTANT_ENCAPSED_STRING","'getAllItems'",47],["T_WHITESPACE","\n        ",47],")",["T_OBJECT_OPERATOR","->",48],["T_STRING","will",48],"(",["T_WHITESPACE","\n            ",48],["T_VARIABLE","$this",49],["T_OBJECT_OPERATOR","->",49],["T_STRING","returnValue",49],"(",["T_VARIABLE","$this",49],["T_OBJECT_OPERATOR","->",49],["T_STRING","_getSalesModelItems",49],"(",")",")",["T_WHITESPACE","\n        ",49],")",";",["T_WHITESPACE","\n        ",50],["T_VARIABLE","$this",51],["T_OBJECT_OPERATOR","->",51],["T_STRING","_model",51],["T_OBJECT_OPERATOR","->",51],["T_STRING","getAllItems",51],"(",")",";",["T_WHITESPACE","\n        ",51],["T_VARIABLE","$this",52],["T_OBJECT_OPERATOR","->",52],["T_STRING","_model",52],["T_OBJECT_OPERATOR","->",52],["T_STRING","addCustomItem",52],"(",["T_CONSTANT_ENCAPSED_STRING","'test'",52],",",["T_WHITESPACE"," ",52],["T_LNUMBER","10",52],",",["T_WHITESPACE"," ",52],["T_DNUMBER","10.5",52],",",["T_WHITESPACE"," ",52],["T_CONSTANT_ENCAPSED_STRING","'some_id'",52],")",";",["T_WHITESPACE","\n        ",52],["T_VARIABLE","$items",53],["T_WHITESPACE"," ",53],"=",["T_WHITESPACE"," ",53],["T_VARIABLE","$this",53],["T_OBJECT_OPERATOR","->",53],["T_STRING","_model",53],["T_OBJECT_OPERATOR","->",53],["T_STRING","getAllItems",53],"(",")",";",["T_WHITESPACE","\n        ",53],["T_VARIABLE","$customItem",54],["T_WHITESPACE"," ",54],"=",["T_WHITESPACE"," ",54],["T_STRING","array_pop",54],"(",["T_VARIABLE","$items",54],")",";",["T_WHITESPACE","\n        ",54],["T_VARIABLE","$this",55],["T_OBJECT_OPERATOR","->",55],["T_STRING","assertTrue",55],"(",["T_WHITESPACE","\n            ",55],["T_VARIABLE","$customItem",56],["T_OBJECT_OPERATOR","->",56],["T_STRING","getName",56],"(",")",["T_WHITESPACE"," ",56],["T_IS_EQUAL","==",56],["T_WHITESPACE"," ",56],["T_CONSTANT_ENCAPSED_STRING","'test'",56],["T_WHITESPACE"," ",56],["T_BOOLEAN_AND","&&",56],["T_WHITESPACE","\n            ",56],["T_VARIABLE","$customItem",57],["T_OBJECT_OPERATOR","->",57],["T_STRING","getQty",57],"(",")",["T_WHITESPACE"," ",57],["T_IS_EQUAL","==",57],["T_WHITESPACE"," ",57],["T_LNUMBER","10",57],["T_WHITESPACE"," ",57],["T_BOOLEAN_AND","&&",57],["T_WHITESPACE","\n            ",57],["T_VARIABLE","$customItem",58],["T_OBJECT_OPERATOR","->",58],["T_STRING","getAmount",58],"(",")",["T_WHITESPACE"," ",58],["T_IS_EQUAL","==",58],["T_WHITESPACE"," ",58],["T_DNUMBER","10.5",58],["T_WHITESPACE"," ",58],["T_BOOLEAN_AND","&&",58],["T_WHITESPACE","\n            ",58],["T_VARIABLE","$customItem",59],["T_OBJECT_OPERATOR","->",59],["T_STRING","getId",59],"(",")",["T_WHITESPACE"," ",59],["T_IS_EQUAL","==",59],["T_WHITESPACE"," ",59],["T_CONSTANT_ENCAPSED_STRING","'some_id'",59],["T_WHITESPACE","\n        ",59],")",";",["T_WHITESPACE","\n    ",60],"}",["T_WHITESPACE","\n\n    ",61],["T_DOC_COMMENT","\/**\n     * @param array $transferFlags\n     * @param array $salesModelItems\n     * @param array $salesModelAmounts\n     * @param array $expected\n     * @dataProvider cartDataProvider\n     *\/",63],["T_WHITESPACE","\n    ",69],["T_PUBLIC","public",70],["T_WHITESPACE"," ",70],["T_FUNCTION","function",70],["T_WHITESPACE"," ",70],["T_STRING","testGetAmounts",70],"(",["T_VARIABLE","$transferFlags",70],",",["T_WHITESPACE"," ",70],["T_VARIABLE","$salesModelItems",70],",",["T_WHITESPACE"," ",70],["T_VARIABLE","$salesModelAmounts",70],",",["T_WHITESPACE"," ",70],["T_VARIABLE","$expected",70],")",["T_WHITESPACE","\n    ",70],"{",["T_WHITESPACE","\n        ",71],["T_VARIABLE","$amounts",72],["T_WHITESPACE"," ",72],"=",["T_WHITESPACE"," ",72],["T_VARIABLE","$this",72],["T_OBJECT_OPERATOR","->",72],["T_STRING","_collectItemsAndAmounts",72],"(",["T_VARIABLE","$transferFlags",72],",",["T_WHITESPACE"," ",72],["T_VARIABLE","$salesModelItems",72],",",["T_WHITESPACE"," ",72],["T_VARIABLE","$salesModelAmounts",72],")",";",["T_WHITESPACE","\n        ",72],["T_VARIABLE","$this",73],["T_OBJECT_OPERATOR","->",73],["T_STRING","assertEquals",73],"(",["T_VARIABLE","$expected",73],",",["T_WHITESPACE"," ",73],["T_VARIABLE","$amounts",73],")",";",["T_WHITESPACE","\n\n        ",73],["T_COMMENT","\/\/ check that method just return calculated result for further calls\n",75],["T_WHITESPACE","        ",76],["T_VARIABLE","$this",76],["T_OBJECT_OPERATOR","->",76],["T_STRING","_eventManagerMock",76],["T_OBJECT_OPERATOR","->",76],["T_STRING","expects",76],"(",["T_VARIABLE","$this",76],["T_OBJECT_OPERATOR","->",76],["T_STRING","never",76],"(",")",")",["T_OBJECT_OPERATOR","->",76],["T_STRING","method",76],"(",["T_CONSTANT_ENCAPSED_STRING","'dispatch'",76],")",";",["T_WHITESPACE","\n        ",76],["T_VARIABLE","$amounts",77],["T_WHITESPACE"," ",77],"=",["T_WHITESPACE"," ",77],["T_VARIABLE","$this",77],["T_OBJECT_OPERATOR","->",77],["T_STRING","_model",77],["T_OBJECT_OPERATOR","->",77],["T_STRING","getAmounts",77],"(",")",";",["T_WHITESPACE","\n        ",77],["T_VARIABLE","$this",78],["T_OBJECT_OPERATOR","->",78],["T_STRING","assertEquals",78],"(",["T_VARIABLE","$expected",78],",",["T_WHITESPACE"," ",78],["T_VARIABLE","$amounts",78],")",";",["T_WHITESPACE","\n    ",78],"}",["T_WHITESPACE","\n\n    ",79],["T_DOC_COMMENT","\/**\n     * @param array $transferFlags\n     * @param array $salesModelItems\n     * @param array $salesModelAmounts\n     * @dataProvider cartDataProvider\n     *\/",81],["T_WHITESPACE","\n    ",86],["T_PUBLIC","public",87],["T_WHITESPACE"," ",87],["T_FUNCTION","function",87],["T_WHITESPACE"," ",87],["T_STRING","testGetAllItems",87],"(",["T_VARIABLE","$transferFlags",87],",",["T_WHITESPACE"," ",87],["T_VARIABLE","$salesModelItems",87],",",["T_WHITESPACE"," ",87],["T_VARIABLE","$salesModelAmounts",87],")",["T_WHITESPACE","\n    ",87],"{",["T_WHITESPACE","\n        ",88],["T_VARIABLE","$this",89],["T_OBJECT_OPERATOR","->",89],["T_STRING","_collectItemsAndAmounts",89],"(",["T_VARIABLE","$transferFlags",89],",",["T_WHITESPACE"," ",89],["T_VARIABLE","$salesModelItems",89],",",["T_WHITESPACE"," ",89],["T_VARIABLE","$salesModelAmounts",89],")",";",["T_WHITESPACE","\n\n        ",89],["T_VARIABLE","$customItems",91],["T_WHITESPACE"," ",91],"=",["T_WHITESPACE"," ",91],"[","]",";",["T_WHITESPACE","\n        ",91],["T_IF","if",92],["T_WHITESPACE"," ",92],"(",["T_VARIABLE","$transferFlags",92],"[",["T_CONSTANT_ENCAPSED_STRING","'transfer_shipping'",92],"]",")",["T_WHITESPACE"," ",92],"{",["T_WHITESPACE","\n            ",92],["T_VARIABLE","$customItems",93],"[","]",["T_WHITESPACE"," ",93],"=",["T_WHITESPACE"," ",93],["T_NEW","new",93],["T_WHITESPACE"," ",93],["T_NS_SEPARATOR","\\",93],["T_STRING","Magento",93],["T_NS_SEPARATOR","\\",93],["T_STRING","Framework",93],["T_NS_SEPARATOR","\\",93],["T_STRING","DataObject",93],"(",["T_WHITESPACE","\n                ",93],"[",["T_CONSTANT_ENCAPSED_STRING","'name'",94],["T_WHITESPACE"," ",94],["T_DOUBLE_ARROW","=>",94],["T_WHITESPACE"," ",94],["T_CONSTANT_ENCAPSED_STRING","'Shipping'",94],",",["T_WHITESPACE"," ",94],["T_CONSTANT_ENCAPSED_STRING","'qty'",94],["T_WHITESPACE"," ",94],["T_DOUBLE_ARROW","=>",94],["T_WHITESPACE"," ",94],["T_LNUMBER","1",94],",",["T_WHITESPACE"," ",94],["T_CONSTANT_ENCAPSED_STRING","'amount'",94],["T_WHITESPACE"," ",94],["T_DOUBLE_ARROW","=>",94],["T_WHITESPACE"," ",94],["T_VARIABLE","$salesModelAmounts",94],"[",["T_CONSTANT_ENCAPSED_STRING","'BaseShippingAmount'",94],"]","]",["T_WHITESPACE","\n            ",94],")",";",["T_WHITESPACE","\n        ",95],"}",["T_WHITESPACE","\n        ",96],["T_IF","if",97],["T_WHITESPACE"," ",97],"(",["T_VARIABLE","$transferFlags",97],"[",["T_CONSTANT_ENCAPSED_STRING","'transfer_discount'",97],"]",")",["T_WHITESPACE"," ",97],"{",["T_WHITESPACE","\n            ",97],["T_VARIABLE","$customItems",98],"[","]",["T_WHITESPACE"," ",98],"=",["T_WHITESPACE"," ",98],["T_NEW","new",98],["T_WHITESPACE"," ",98],["T_NS_SEPARATOR","\\",98],["T_STRING","Magento",98],["T_NS_SEPARATOR","\\",98],["T_STRING","Framework",98],["T_NS_SEPARATOR","\\",98],["T_STRING","DataObject",98],"(",["T_WHITESPACE","\n                ",98],"[",["T_CONSTANT_ENCAPSED_STRING","'name'",99],["T_WHITESPACE"," ",99],["T_DOUBLE_ARROW","=>",99],["T_WHITESPACE"," ",99],["T_CONSTANT_ENCAPSED_STRING","'Discount'",99],",",["T_WHITESPACE"," ",99],["T_CONSTANT_ENCAPSED_STRING","'qty'",99],["T_WHITESPACE"," ",99],["T_DOUBLE_ARROW","=>",99],["T_WHITESPACE"," ",99],["T_LNUMBER","1",99],",",["T_WHITESPACE"," ",99],["T_CONSTANT_ENCAPSED_STRING","'amount'",99],["T_WHITESPACE"," ",99],["T_DOUBLE_ARROW","=>",99],["T_WHITESPACE"," ",99],"-",["T_DNUMBER","1.00",99],["T_WHITESPACE"," ",99],"*",["T_WHITESPACE"," ",99],["T_VARIABLE","$salesModelAmounts",99],"[",["T_CONSTANT_ENCAPSED_STRING","'BaseDiscountAmount'",99],"]","]",["T_WHITESPACE","\n            ",99],")",";",["T_WHITESPACE","\n        ",100],"}",["T_WHITESPACE","\n\n        ",101],["T_VARIABLE","$cartItems",103],["T_WHITESPACE"," ",103],"=",["T_WHITESPACE"," ",103],["T_VARIABLE","$this",103],["T_OBJECT_OPERATOR","->",103],["T_STRING","_convertToCartItems",103],"(",["T_VARIABLE","$salesModelItems",103],")",";",["T_WHITESPACE","\n        ",103],["T_VARIABLE","$expected",104],["T_WHITESPACE"," ",104],"=",["T_WHITESPACE"," ",104],["T_STRING","array_merge",104],"(",["T_VARIABLE","$cartItems",104],",",["T_WHITESPACE"," ",104],["T_VARIABLE","$customItems",104],")",";",["T_WHITESPACE","\n        ",104],["T_VARIABLE","$areEqual",105],["T_WHITESPACE"," ",105],"=",["T_WHITESPACE"," ",105],["T_VARIABLE","$this",105],["T_OBJECT_OPERATOR","->",105],["T_STRING","_compareSalesItems",105],"(",["T_VARIABLE","$expected",105],",",["T_WHITESPACE"," ",105],["T_VARIABLE","$this",105],["T_OBJECT_OPERATOR","->",105],["T_STRING","_model",105],["T_OBJECT_OPERATOR","->",105],["T_STRING","getAllItems",105],"(",")",")",";",["T_WHITESPACE","\n        ",105],["T_VARIABLE","$this",106],["T_OBJECT_OPERATOR","->",106],["T_STRING","assertTrue",106],"(",["T_VARIABLE","$areEqual",106],")",";",["T_WHITESPACE","\n    ",106],"}",["T_WHITESPACE","\n\n    ",107],["T_DOC_COMMENT","\/**\n     * Test all amount specific methods i.e. add...(), set...(), get...()\n     *\/",109],["T_WHITESPACE","\n    ",111],["T_PUBLIC","public",112],["T_WHITESPACE"," ",112],["T_FUNCTION","function",112],["T_WHITESPACE"," ",112],["T_STRING","testAmountSettersAndGetters",112],"(",")",["T_WHITESPACE","\n    ",112],"{",["T_WHITESPACE","\n        ",113],["T_FOREACH","foreach",114],["T_WHITESPACE"," ",114],"(","[",["T_CONSTANT_ENCAPSED_STRING","'Discount'",114],",",["T_WHITESPACE"," ",114],["T_CONSTANT_ENCAPSED_STRING","'Shipping'",114],",",["T_WHITESPACE"," ",114],["T_CONSTANT_ENCAPSED_STRING","'Tax'",114],"]",["T_WHITESPACE"," ",114],["T_AS","as",114],["T_WHITESPACE"," ",114],["T_VARIABLE","$amountType",114],")",["T_WHITESPACE"," ",114],"{",["T_WHITESPACE","\n            ",114],["T_VARIABLE","$setMethod",115],["T_WHITESPACE"," ",115],"=",["T_WHITESPACE"," ",115],["T_CONSTANT_ENCAPSED_STRING","'set'",115],["T_WHITESPACE"," ",115],".",["T_WHITESPACE"," ",115],["T_VARIABLE","$amountType",115],";",["T_WHITESPACE","\n            ",115],["T_VARIABLE","$getMethod",116],["T_WHITESPACE"," ",116],"=",["T_WHITESPACE"," ",116],["T_CONSTANT_ENCAPSED_STRING","'get'",116],["T_WHITESPACE"," ",116],".",["T_WHITESPACE"," ",116],["T_VARIABLE","$amountType",116],";",["T_WHITESPACE","\n            ",116],["T_VARIABLE","$addMethod",117],["T_WHITESPACE"," ",117],"=",["T_WHITESPACE"," ",117],["T_CONSTANT_ENCAPSED_STRING","'add'",117],["T_WHITESPACE"," ",117],".",["T_WHITESPACE"," ",117],["T_VARIABLE","$amountType",117],";",["T_WHITESPACE","\n\n            ",117],["T_VARIABLE","$this",119],["T_OBJECT_OPERATOR","->",119],["T_STRING","_model",119],["T_OBJECT_OPERATOR","->",119],"{",["T_VARIABLE","$setMethod",119],"}","(",["T_LNUMBER","10",119],")",";",["T_WHITESPACE","\n            ",119],["T_VARIABLE","$this",120],["T_OBJECT_OPERATOR","->",120],["T_STRING","assertEquals",120],"(",["T_LNUMBER","10",120],",",["T_WHITESPACE"," ",120],["T_VARIABLE","$this",120],["T_OBJECT_OPERATOR","->",120],["T_STRING","_model",120],["T_OBJECT_OPERATOR","->",120],"{",["T_VARIABLE","$getMethod",120],"}","(",")",")",";",["T_WHITESPACE","\n\n            ",120],["T_VARIABLE","$this",122],["T_OBJECT_OPERATOR","->",122],["T_STRING","_model",122],["T_OBJECT_OPERATOR","->",122],"{",["T_VARIABLE","$addMethod",122],"}","(",["T_LNUMBER","5",122],")",";",["T_WHITESPACE","\n            ",122],["T_VARIABLE","$this",123],["T_OBJECT_OPERATOR","->",123],["T_STRING","assertEquals",123],"(",["T_LNUMBER","15",123],",",["T_WHITESPACE"," ",123],["T_VARIABLE","$this",123],["T_OBJECT_OPERATOR","->",123],["T_STRING","_model",123],["T_OBJECT_OPERATOR","->",123],"{",["T_VARIABLE","$getMethod",123],"}","(",")",")",";",["T_WHITESPACE","\n\n            ",123],["T_VARIABLE","$this",125],["T_OBJECT_OPERATOR","->",125],["T_STRING","_model",125],["T_OBJECT_OPERATOR","->",125],"{",["T_VARIABLE","$addMethod",125],"}","(","-",["T_LNUMBER","20",125],")",";",["T_WHITESPACE","\n            ",125],["T_VARIABLE","$this",126],["T_OBJECT_OPERATOR","->",126],["T_STRING","assertEquals",126],"(","-",["T_LNUMBER","5",126],",",["T_WHITESPACE"," ",126],["T_VARIABLE","$this",126],["T_OBJECT_OPERATOR","->",126],["T_STRING","_model",126],["T_OBJECT_OPERATOR","->",126],"{",["T_VARIABLE","$getMethod",126],"}","(",")",")",";",["T_WHITESPACE","\n\n            ",126],["T_VARIABLE","$this",128],["T_OBJECT_OPERATOR","->",128],["T_STRING","_model",128],["T_OBJECT_OPERATOR","->",128],"{",["T_VARIABLE","$setMethod",128],"}","(",["T_LNUMBER","10",128],")",";",["T_WHITESPACE","\n            ",128],["T_VARIABLE","$this",129],["T_OBJECT_OPERATOR","->",129],["T_STRING","assertEquals",129],"(",["T_LNUMBER","10",129],",",["T_WHITESPACE"," ",129],["T_VARIABLE","$this",129],["T_OBJECT_OPERATOR","->",129],["T_STRING","_model",129],["T_OBJECT_OPERATOR","->",129],"{",["T_VARIABLE","$getMethod",129],"}","(",")",")",";",["T_WHITESPACE","\n        ",129],"}",["T_WHITESPACE","\n\n        ",130],["T_COMMENT","\/\/ there is no method setSubtotal(), so test the following separately\n",132],["T_WHITESPACE","        ",133],["T_VARIABLE","$this",133],["T_OBJECT_OPERATOR","->",133],["T_STRING","_model",133],["T_OBJECT_OPERATOR","->",133],["T_STRING","addSubtotal",133],"(",["T_LNUMBER","10",133],")",";",["T_WHITESPACE","\n        ",133],["T_VARIABLE","$this",134],["T_OBJECT_OPERATOR","->",134],["T_STRING","assertEquals",134],"(",["T_LNUMBER","10",134],",",["T_WHITESPACE"," ",134],["T_VARIABLE","$this",134],["T_OBJECT_OPERATOR","->",134],["T_STRING","_model",134],["T_OBJECT_OPERATOR","->",134],["T_STRING","getSubtotal",134],"(",")",")",";",["T_WHITESPACE","\n\n        ",134],["T_VARIABLE","$this",136],["T_OBJECT_OPERATOR","->",136],["T_STRING","_model",136],["T_OBJECT_OPERATOR","->",136],["T_STRING","addSubtotal",136],"(",["T_LNUMBER","2",136],")",";",["T_WHITESPACE","\n        ",136],["T_VARIABLE","$this",137],["T_OBJECT_OPERATOR","->",137],["T_STRING","assertEquals",137],"(",["T_LNUMBER","12",137],",",["T_WHITESPACE"," ",137],["T_VARIABLE","$this",137],["T_OBJECT_OPERATOR","->",137],["T_STRING","_model",137],["T_OBJECT_OPERATOR","->",137],["T_STRING","getSubtotal",137],"(",")",")",";",["T_WHITESPACE","\n\n        ",137],["T_VARIABLE","$this",139],["T_OBJECT_OPERATOR","->",139],["T_STRING","_model",139],["T_OBJECT_OPERATOR","->",139],["T_STRING","addSubtotal",139],"(","-",["T_LNUMBER","20",139],")",";",["T_WHITESPACE","\n        ",139],["T_VARIABLE","$this",140],["T_OBJECT_OPERATOR","->",140],["T_STRING","assertEquals",140],"(","-",["T_LNUMBER","8",140],",",["T_WHITESPACE"," ",140],["T_VARIABLE","$this",140],["T_OBJECT_OPERATOR","->",140],["T_STRING","_model",140],["T_OBJECT_OPERATOR","->",140],["T_STRING","getSubtotal",140],"(",")",")",";",["T_WHITESPACE","\n    ",140],"}",["T_WHITESPACE","\n\n    ",141],["T_DOC_COMMENT","\/**\n     * Data provider\n     *\n     * @return array\n     *\/",143],["T_WHITESPACE","\n    ",147],["T_PUBLIC","public",148],["T_WHITESPACE"," ",148],["T_FUNCTION","function",148],["T_WHITESPACE"," ",148],["T_STRING","cartDataProvider",148],"(",")",["T_WHITESPACE","\n    ",148],"{",["T_WHITESPACE","\n        ",149],["T_RETURN","return",150],["T_WHITESPACE"," ",150],"[",["T_WHITESPACE","\n            ",150],["T_COMMENT","\/\/ 1. All transfer flags set to true\n",151],["T_WHITESPACE","            ",152],"[",["T_WHITESPACE","\n                ",152],"[",["T_CONSTANT_ENCAPSED_STRING","'transfer_shipping'",153],["T_WHITESPACE"," ",153],["T_DOUBLE_ARROW","=>",153],["T_WHITESPACE"," ",153],["T_STRING","true",153],",",["T_WHITESPACE"," ",153],["T_CONSTANT_ENCAPSED_STRING","'transfer_discount'",153],["T_WHITESPACE"," ",153],["T_DOUBLE_ARROW","=>",153],["T_WHITESPACE"," ",153],["T_STRING","true",153],"]",",",["T_WHITESPACE","\n                ",153],["T_VARIABLE","$this",154],["T_OBJECT_OPERATOR","->",154],["T_STRING","_getSalesModelItems",154],"(",")",",",["T_WHITESPACE","\n                ",154],"[",["T_WHITESPACE","\n                    ",155],["T_CONSTANT_ENCAPSED_STRING","'BaseDiscountAmount'",156],["T_WHITESPACE"," ",156],["T_DOUBLE_ARROW","=>",156],["T_WHITESPACE"," ",156],["T_DNUMBER","15.0",156],",",["T_WHITESPACE","\n                    ",156],["T_CONSTANT_ENCAPSED_STRING","'BaseShippingAmount'",157],["T_WHITESPACE"," ",157],["T_DOUBLE_ARROW","=>",157],["T_WHITESPACE"," ",157],["T_DNUMBER","20.0",157],",",["T_WHITESPACE","\n                    ",157],["T_CONSTANT_ENCAPSED_STRING","'BaseSubtotal'",158],["T_WHITESPACE"," ",158],["T_DOUBLE_ARROW","=>",158],["T_WHITESPACE"," ",158],["T_DNUMBER","100.0",158],",",["T_WHITESPACE","\n                    ",158],["T_CONSTANT_ENCAPSED_STRING","'BaseTaxAmount'",159],["T_WHITESPACE"," ",159],["T_DOUBLE_ARROW","=>",159],["T_WHITESPACE"," ",159],["T_DNUMBER","8.0",159],["T_WHITESPACE","\n                ",159],"]",",",["T_WHITESPACE","\n                ",160],"[",["T_WHITESPACE","\n                    ",161],["T_STRING","Cart",162],["T_DOUBLE_COLON","::",162],["T_STRING","AMOUNT_DISCOUNT",162],["T_WHITESPACE"," ",162],["T_DOUBLE_ARROW","=>",162],["T_WHITESPACE"," ",162],["T_DNUMBER","0.0",162],",",["T_WHITESPACE","\n                    ",162],["T_STRING","Cart",163],["T_DOUBLE_COLON","::",163],["T_STRING","AMOUNT_SHIPPING",163],["T_WHITESPACE"," ",163],["T_DOUBLE_ARROW","=>",163],["T_WHITESPACE"," ",163],["T_DNUMBER","0.0",163],",",["T_WHITESPACE","\n                    ",163],["T_STRING","Cart",164],["T_DOUBLE_COLON","::",164],["T_STRING","AMOUNT_SUBTOTAL",164],["T_WHITESPACE"," ",164],["T_DOUBLE_ARROW","=>",164],["T_WHITESPACE"," ",164],["T_DNUMBER","105.0",164],",",["T_WHITESPACE"," ",164],["T_COMMENT","\/\/ = 100.5 + shipping - discount\n",164],["T_WHITESPACE","                    ",165],["T_STRING","Cart",165],["T_DOUBLE_COLON","::",165],["T_STRING","AMOUNT_TAX",165],["T_WHITESPACE"," ",165],["T_DOUBLE_ARROW","=>",165],["T_WHITESPACE"," ",165],["T_DNUMBER","8.0",165],["T_WHITESPACE","\n                ",165],"]",["T_WHITESPACE","\n            ",166],"]",",",["T_WHITESPACE","\n            ",167],["T_COMMENT","\/\/ 2. All transfer flags set to false\n",168],["T_WHITESPACE","            ",169],"[",["T_WHITESPACE","\n                ",169],"[",["T_CONSTANT_ENCAPSED_STRING","'transfer_shipping'",170],["T_WHITESPACE"," ",170],["T_DOUBLE_ARROW","=>",170],["T_WHITESPACE"," ",170],["T_STRING","false",170],",",["T_WHITESPACE"," ",170],["T_CONSTANT_ENCAPSED_STRING","'transfer_discount'",170],["T_WHITESPACE"," ",170],["T_DOUBLE_ARROW","=>",170],["T_WHITESPACE"," ",170],["T_STRING","false",170],"]",",",["T_WHITESPACE","\n                ",170],["T_VARIABLE","$this",171],["T_OBJECT_OPERATOR","->",171],["T_STRING","_getSalesModelItems",171],"(",")",",",["T_WHITESPACE","\n                ",171],"[",["T_WHITESPACE","\n                    ",172],["T_CONSTANT_ENCAPSED_STRING","'BaseDiscountAmount'",173],["T_WHITESPACE"," ",173],["T_DOUBLE_ARROW","=>",173],["T_WHITESPACE"," ",173],["T_DNUMBER","15.0",173],",",["T_WHITESPACE","\n                    ",173],["T_CONSTANT_ENCAPSED_STRING","'BaseShippingAmount'",174],["T_WHITESPACE"," ",174],["T_DOUBLE_ARROW","=>",174],["T_WHITESPACE"," ",174],["T_DNUMBER","20.0",174],",",["T_WHITESPACE","\n                    ",174],["T_CONSTANT_ENCAPSED_STRING","'BaseSubtotal'",175],["T_WHITESPACE"," ",175],["T_DOUBLE_ARROW","=>",175],["T_WHITESPACE"," ",175],["T_DNUMBER","100.0",175],",",["T_WHITESPACE","\n                    ",175],["T_CONSTANT_ENCAPSED_STRING","'BaseTaxAmount'",176],["T_WHITESPACE"," ",176],["T_DOUBLE_ARROW","=>",176],["T_WHITESPACE"," ",176],["T_DNUMBER","8.0",176],["T_WHITESPACE","\n                ",176],"]",",",["T_WHITESPACE","\n                ",177],"[",["T_WHITESPACE","\n                    ",178],["T_STRING","Cart",179],["T_DOUBLE_COLON","::",179],["T_STRING","AMOUNT_DISCOUNT",179],["T_WHITESPACE"," ",179],["T_DOUBLE_ARROW","=>",179],["T_WHITESPACE"," ",179],["T_DNUMBER","15.0",179],",",["T_WHITESPACE","\n                    ",179],["T_STRING","Cart",180],["T_DOUBLE_COLON","::",180],["T_STRING","AMOUNT_SHIPPING",180],["T_WHITESPACE"," ",180],["T_DOUBLE_ARROW","=>",180],["T_WHITESPACE"," ",180],["T_DNUMBER","20.0",180],",",["T_WHITESPACE","\n                    ",180],["T_STRING","Cart",181],["T_DOUBLE_COLON","::",181],["T_STRING","AMOUNT_SUBTOTAL",181],["T_WHITESPACE"," ",181],["T_DOUBLE_ARROW","=>",181],["T_WHITESPACE"," ",181],["T_DNUMBER","100.0",181],",",["T_WHITESPACE","\n                    ",181],["T_STRING","Cart",182],["T_DOUBLE_COLON","::",182],["T_STRING","AMOUNT_TAX",182],["T_WHITESPACE"," ",182],["T_DOUBLE_ARROW","=>",182],["T_WHITESPACE"," ",182],["T_DNUMBER","8.0",182],["T_WHITESPACE","\n                ",182],"]",["T_WHITESPACE","\n            ",183],"]",",",["T_WHITESPACE","\n            ",184],["T_COMMENT","\/\/ 3. Shipping transfer flag set to true, discount to false, sales items are empty (don't affect result)\n",185],["T_WHITESPACE","            ",186],"[",["T_WHITESPACE","\n                ",186],"[",["T_CONSTANT_ENCAPSED_STRING","'transfer_shipping'",187],["T_WHITESPACE"," ",187],["T_DOUBLE_ARROW","=>",187],["T_WHITESPACE"," ",187],["T_STRING","true",187],",",["T_WHITESPACE"," ",187],["T_CONSTANT_ENCAPSED_STRING","'transfer_discount'",187],["T_WHITESPACE"," ",187],["T_DOUBLE_ARROW","=>",187],["T_WHITESPACE"," ",187],["T_STRING","false",187],"]",",",["T_WHITESPACE","\n                ",187],"[","]",",",["T_WHITESPACE","\n                ",188],"[",["T_WHITESPACE","\n                    ",189],["T_CONSTANT_ENCAPSED_STRING","'BaseDiscountAmount'",190],["T_WHITESPACE"," ",190],["T_DOUBLE_ARROW","=>",190],["T_WHITESPACE"," ",190],["T_DNUMBER","15.0",190],",",["T_WHITESPACE","\n                    ",190],["T_CONSTANT_ENCAPSED_STRING","'BaseShippingAmount'",191],["T_WHITESPACE"," ",191],["T_DOUBLE_ARROW","=>",191],["T_WHITESPACE"," ",191],["T_DNUMBER","20.0",191],",",["T_WHITESPACE","\n                    ",191],["T_CONSTANT_ENCAPSED_STRING","'BaseSubtotal'",192],["T_WHITESPACE"," ",192],["T_DOUBLE_ARROW","=>",192],["T_WHITESPACE"," ",192],["T_DNUMBER","100.0",192],",",["T_WHITESPACE","\n                    ",192],["T_CONSTANT_ENCAPSED_STRING","'BaseTaxAmount'",193],["T_WHITESPACE"," ",193],["T_DOUBLE_ARROW","=>",193],["T_WHITESPACE"," ",193],["T_DNUMBER","8.0",193],["T_WHITESPACE","\n                ",193],"]",",",["T_WHITESPACE","\n                ",194],"[",["T_WHITESPACE","\n                    ",195],["T_STRING","Cart",196],["T_DOUBLE_COLON","::",196],["T_STRING","AMOUNT_DISCOUNT",196],["T_WHITESPACE"," ",196],["T_DOUBLE_ARROW","=>",196],["T_WHITESPACE"," ",196],["T_DNUMBER","15.0",196],",",["T_WHITESPACE","\n                    ",196],["T_STRING","Cart",197],["T_DOUBLE_COLON","::",197],["T_STRING","AMOUNT_SHIPPING",197],["T_WHITESPACE"," ",197],["T_DOUBLE_ARROW","=>",197],["T_WHITESPACE"," ",197],["T_DNUMBER","0.0",197],",",["T_WHITESPACE","\n                    ",197],["T_STRING","Cart",198],["T_DOUBLE_COLON","::",198],["T_STRING","AMOUNT_SUBTOTAL",198],["T_WHITESPACE"," ",198],["T_DOUBLE_ARROW","=>",198],["T_WHITESPACE"," ",198],["T_DNUMBER","120.0",198],",",["T_WHITESPACE","\n                    ",198],["T_STRING","Cart",199],["T_DOUBLE_COLON","::",199],["T_STRING","AMOUNT_TAX",199],["T_WHITESPACE"," ",199],["T_DOUBLE_ARROW","=>",199],["T_WHITESPACE"," ",199],["T_DNUMBER","8.0",199],["T_WHITESPACE","\n                ",199],"]",["T_WHITESPACE","\n            ",200],"]",["T_WHITESPACE","\n        ",201],"]",";",["T_WHITESPACE","\n    ",202],"}",["T_WHITESPACE","\n\n    ",203],["T_DOC_COMMENT","\/**\n     * Return true if arrays of cart sales items are equal, false otherwise. Elements order not considered\n     *\n     * @param array $salesItemsA\n     * @param array $salesItemsB\n     * @return bool\n     *\/",205],["T_WHITESPACE","\n    ",211],["T_PROTECTED","protected",212],["T_WHITESPACE"," ",212],["T_FUNCTION","function",212],["T_WHITESPACE"," ",212],["T_STRING","_compareSalesItems",212],"(",["T_ARRAY","array",212],["T_WHITESPACE"," ",212],["T_VARIABLE","$salesItemsA",212],",",["T_WHITESPACE"," ",212],["T_ARRAY","array",212],["T_WHITESPACE"," ",212],["T_VARIABLE","$salesItemsB",212],")",["T_WHITESPACE","\n    ",212],"{",["T_WHITESPACE","\n        ",213],["T_IF","if",214],["T_WHITESPACE"," ",214],"(",["T_STRING","count",214],"(",["T_VARIABLE","$salesItemsA",214],")",["T_WHITESPACE"," ",214],["T_IS_NOT_EQUAL","!=",214],["T_WHITESPACE"," ",214],["T_STRING","count",214],"(",["T_VARIABLE","$salesItemsB",214],")",")",["T_WHITESPACE"," ",214],"{",["T_WHITESPACE","\n            ",214],["T_RETURN","return",215],["T_WHITESPACE"," ",215],["T_STRING","false",215],";",["T_WHITESPACE","\n        ",215],"}",["T_WHITESPACE","\n\n        ",216],["T_VARIABLE","$toStringCallback",218],["T_WHITESPACE"," ",218],"=",["T_WHITESPACE"," ",218],["T_FUNCTION","function",218],["T_WHITESPACE"," ",218],"(","&",["T_VARIABLE","$item",218],")",["T_WHITESPACE"," ",218],"{",["T_WHITESPACE","\n            ",218],["T_VARIABLE","$item",219],["T_WHITESPACE"," ",219],"=",["T_WHITESPACE"," ",219],["T_VARIABLE","$item",219],["T_OBJECT_OPERATOR","->",219],["T_STRING","toString",219],"(",")",";",["T_WHITESPACE","\n        ",219],"}",";",["T_WHITESPACE","\n\n        ",220],["T_STRING","array_walk",222],"(",["T_VARIABLE","$salesItemsA",222],",",["T_WHITESPACE"," ",222],["T_VARIABLE","$toStringCallback",222],")",";",["T_WHITESPACE","\n        ",222],["T_STRING","array_walk",223],"(",["T_VARIABLE","$salesItemsB",223],",",["T_WHITESPACE"," ",223],["T_VARIABLE","$toStringCallback",223],")",";",["T_WHITESPACE","\n\n        ",223],["T_STRING","sort",225],"(",["T_VARIABLE","$salesItemsA",225],")",";",["T_WHITESPACE","\n        ",225],["T_STRING","sort",226],"(",["T_VARIABLE","$salesItemsB",226],")",";",["T_WHITESPACE","\n\n        ",226],["T_RETURN","return",228],["T_WHITESPACE"," ",228],["T_STRING","implode",228],"(",["T_CONSTANT_ENCAPSED_STRING","''",228],",",["T_WHITESPACE"," ",228],["T_VARIABLE","$salesItemsA",228],")",["T_WHITESPACE"," ",228],["T_IS_EQUAL","==",228],["T_WHITESPACE"," ",228],["T_STRING","implode",228],"(",["T_CONSTANT_ENCAPSED_STRING","''",228],",",["T_WHITESPACE"," ",228],["T_VARIABLE","$salesItemsB",228],")",";",["T_WHITESPACE","\n    ",228],"}",["T_WHITESPACE","\n\n    ",229],["T_DOC_COMMENT","\/**\n     * Collect sales model items and calculate amounts of sales model\n     *\n     * @param array $transferFlags\n     * @param array $salesModelItems\n     * @param array $salesModelAmounts\n     * @return array Cart amounts\n     *\/",231],["T_WHITESPACE","\n    ",238],["T_PROTECTED","protected",239],["T_WHITESPACE"," ",239],["T_FUNCTION","function",239],["T_WHITESPACE"," ",239],["T_STRING","_collectItemsAndAmounts",239],"(",["T_VARIABLE","$transferFlags",239],",",["T_WHITESPACE"," ",239],["T_VARIABLE","$salesModelItems",239],",",["T_WHITESPACE"," ",239],["T_VARIABLE","$salesModelAmounts",239],")",["T_WHITESPACE","\n    ",239],"{",["T_WHITESPACE","\n        ",240],["T_IF","if",241],["T_WHITESPACE"," ",241],"(",["T_VARIABLE","$transferFlags",241],"[",["T_CONSTANT_ENCAPSED_STRING","'transfer_shipping'",241],"]",")",["T_WHITESPACE"," ",241],"{",["T_WHITESPACE","\n            ",241],["T_VARIABLE","$this",242],["T_OBJECT_OPERATOR","->",242],["T_STRING","_model",242],["T_OBJECT_OPERATOR","->",242],["T_STRING","setTransferShippingAsItem",242],"(",")",";",["T_WHITESPACE","\n        ",242],"}",["T_WHITESPACE","\n        ",243],["T_IF","if",244],["T_WHITESPACE"," ",244],"(",["T_VARIABLE","$transferFlags",244],"[",["T_CONSTANT_ENCAPSED_STRING","'transfer_discount'",244],"]",")",["T_WHITESPACE"," ",244],"{",["T_WHITESPACE","\n            ",244],["T_VARIABLE","$this",245],["T_OBJECT_OPERATOR","->",245],["T_STRING","_model",245],["T_OBJECT_OPERATOR","->",245],["T_STRING","setTransferDiscountAsItem",245],"(",")",";",["T_WHITESPACE","\n        ",245],"}",["T_WHITESPACE","\n\n        ",246],["T_VARIABLE","$this",248],["T_OBJECT_OPERATOR","->",248],["T_STRING","_eventManagerMock",248],["T_OBJECT_OPERATOR","->",248],["T_STRING","expects",248],"(",["T_WHITESPACE","\n            ",248],["T_VARIABLE","$this",249],["T_OBJECT_OPERATOR","->",249],["T_STRING","once",249],"(",")",["T_WHITESPACE","\n        ",249],")",["T_OBJECT_OPERATOR","->",250],["T_STRING","method",250],"(",["T_WHITESPACE","\n            ",250],["T_CONSTANT_ENCAPSED_STRING","'dispatch'",251],["T_WHITESPACE","\n        ",251],")",["T_OBJECT_OPERATOR","->",252],["T_STRING","with",252],"(",["T_WHITESPACE","\n            ",252],["T_VARIABLE","$this",253],["T_OBJECT_OPERATOR","->",253],["T_STRING","equalTo",253],"(",["T_CONSTANT_ENCAPSED_STRING","'payment_cart_collect_items_and_amounts'",253],")",",",["T_WHITESPACE","\n            ",253],["T_VARIABLE","$this",254],["T_OBJECT_OPERATOR","->",254],["T_STRING","equalTo",254],"(","[",["T_CONSTANT_ENCAPSED_STRING","'cart'",254],["T_WHITESPACE"," ",254],["T_DOUBLE_ARROW","=>",254],["T_WHITESPACE"," ",254],["T_VARIABLE","$this",254],["T_OBJECT_OPERATOR","->",254],["T_STRING","_model",254],"]",")",["T_WHITESPACE","\n        ",254],")",";",["T_WHITESPACE","\n\n        ",255],["T_VARIABLE","$this",257],["T_OBJECT_OPERATOR","->",257],["T_STRING","_salesModelMock",257],["T_OBJECT_OPERATOR","->",257],["T_STRING","expects",257],"(",["T_WHITESPACE","\n            ",257],["T_VARIABLE","$this",258],["T_OBJECT_OPERATOR","->",258],["T_STRING","once",258],"(",")",["T_WHITESPACE","\n        ",258],")",["T_OBJECT_OPERATOR","->",259],["T_STRING","method",259],"(",["T_WHITESPACE","\n            ",259],["T_CONSTANT_ENCAPSED_STRING","'getAllItems'",260],["T_WHITESPACE","\n        ",260],")",["T_OBJECT_OPERATOR","->",261],["T_STRING","will",261],"(",["T_WHITESPACE","\n            ",261],["T_VARIABLE","$this",262],["T_OBJECT_OPERATOR","->",262],["T_STRING","returnValue",262],"(",["T_VARIABLE","$salesModelItems",262],")",["T_WHITESPACE","\n        ",262],")",";",["T_WHITESPACE","\n\n        ",263],["T_FOREACH","foreach",265],["T_WHITESPACE"," ",265],"(",["T_VARIABLE","$salesModelAmounts",265],["T_WHITESPACE"," ",265],["T_AS","as",265],["T_WHITESPACE"," ",265],["T_VARIABLE","$key",265],["T_WHITESPACE"," ",265],["T_DOUBLE_ARROW","=>",265],["T_WHITESPACE"," ",265],["T_VARIABLE","$value",265],")",["T_WHITESPACE"," ",265],"{",["T_WHITESPACE","\n            ",265],["T_VARIABLE","$this",266],["T_OBJECT_OPERATOR","->",266],["T_STRING","_salesModelMock",266],["T_OBJECT_OPERATOR","->",266],["T_STRING","expects",266],"(",["T_VARIABLE","$this",266],["T_OBJECT_OPERATOR","->",266],["T_STRING","once",266],"(",")",")",["T_OBJECT_OPERATOR","->",266],["T_STRING","method",266],"(",["T_CONSTANT_ENCAPSED_STRING","'get'",266],["T_WHITESPACE"," ",266],".",["T_WHITESPACE"," ",266],["T_VARIABLE","$key",266],")",["T_OBJECT_OPERATOR","->",266],["T_STRING","will",266],"(",["T_VARIABLE","$this",266],["T_OBJECT_OPERATOR","->",266],["T_STRING","returnValue",266],"(",["T_VARIABLE","$value",266],")",")",";",["T_WHITESPACE","\n        ",266],"}",["T_WHITESPACE","\n\n        ",267],["T_RETURN","return",269],["T_WHITESPACE"," ",269],["T_VARIABLE","$this",269],["T_OBJECT_OPERATOR","->",269],["T_STRING","_model",269],["T_OBJECT_OPERATOR","->",269],["T_STRING","getAmounts",269],"(",")",";",["T_WHITESPACE","\n    ",269],"}",["T_WHITESPACE","\n\n    ",270],["T_DOC_COMMENT","\/**\n     * Return sales model items\n     *\n     * @return array\n     *\/",272],["T_WHITESPACE","\n    ",276],["T_PROTECTED","protected",277],["T_WHITESPACE"," ",277],["T_FUNCTION","function",277],["T_WHITESPACE"," ",277],["T_STRING","_getSalesModelItems",277],"(",")",["T_WHITESPACE","\n    ",277],"{",["T_WHITESPACE","\n        ",278],["T_VARIABLE","$product",279],["T_WHITESPACE"," ",279],"=",["T_WHITESPACE"," ",279],["T_NEW","new",279],["T_WHITESPACE"," ",279],["T_NS_SEPARATOR","\\",279],["T_STRING","Magento",279],["T_NS_SEPARATOR","\\",279],["T_STRING","Framework",279],["T_NS_SEPARATOR","\\",279],["T_STRING","DataObject",279],"(","[",["T_CONSTANT_ENCAPSED_STRING","'id'",279],["T_WHITESPACE"," ",279],["T_DOUBLE_ARROW","=>",279],["T_WHITESPACE"," ",279],["T_CONSTANT_ENCAPSED_STRING","'1'",279],"]",")",";",["T_WHITESPACE","\n        ",279],["T_RETURN","return",280],["T_WHITESPACE"," ",280],"[",["T_WHITESPACE","\n            ",280],["T_NEW","new",281],["T_WHITESPACE"," ",281],["T_NS_SEPARATOR","\\",281],["T_STRING","Magento",281],["T_NS_SEPARATOR","\\",281],["T_STRING","Framework",281],["T_NS_SEPARATOR","\\",281],["T_STRING","DataObject",281],"(",["T_WHITESPACE","\n                ",281],"[",["T_CONSTANT_ENCAPSED_STRING","'name'",282],["T_WHITESPACE"," ",282],["T_DOUBLE_ARROW","=>",282],["T_WHITESPACE"," ",282],["T_CONSTANT_ENCAPSED_STRING","'name 1'",282],",",["T_WHITESPACE"," ",282],["T_CONSTANT_ENCAPSED_STRING","'qty'",282],["T_WHITESPACE"," ",282],["T_DOUBLE_ARROW","=>",282],["T_WHITESPACE"," ",282],["T_LNUMBER","1",282],",",["T_WHITESPACE"," ",282],["T_CONSTANT_ENCAPSED_STRING","'price'",282],["T_WHITESPACE"," ",282],["T_DOUBLE_ARROW","=>",282],["T_WHITESPACE"," ",282],["T_DNUMBER","0.1",282],",",["T_WHITESPACE"," ",282],["T_CONSTANT_ENCAPSED_STRING","'original_item'",282],["T_WHITESPACE"," ",282],["T_DOUBLE_ARROW","=>",282],["T_WHITESPACE"," ",282],["T_VARIABLE","$product",282],"]",["T_WHITESPACE","\n            ",282],")",",",["T_WHITESPACE","\n            ",283],["T_NEW","new",284],["T_WHITESPACE"," ",284],["T_NS_SEPARATOR","\\",284],["T_STRING","Magento",284],["T_NS_SEPARATOR","\\",284],["T_STRING","Framework",284],["T_NS_SEPARATOR","\\",284],["T_STRING","DataObject",284],"(",["T_WHITESPACE","\n                ",284],"[",["T_CONSTANT_ENCAPSED_STRING","'name'",285],["T_WHITESPACE"," ",285],["T_DOUBLE_ARROW","=>",285],["T_WHITESPACE"," ",285],["T_CONSTANT_ENCAPSED_STRING","'name 2'",285],",",["T_WHITESPACE"," ",285],["T_CONSTANT_ENCAPSED_STRING","'qty'",285],["T_WHITESPACE"," ",285],["T_DOUBLE_ARROW","=>",285],["T_WHITESPACE"," ",285],["T_LNUMBER","2",285],",",["T_WHITESPACE"," ",285],["T_CONSTANT_ENCAPSED_STRING","'price'",285],["T_WHITESPACE"," ",285],["T_DOUBLE_ARROW","=>",285],["T_WHITESPACE"," ",285],["T_DNUMBER","1.2",285],",",["T_WHITESPACE"," ",285],["T_CONSTANT_ENCAPSED_STRING","'original_item'",285],["T_WHITESPACE"," ",285],["T_DOUBLE_ARROW","=>",285],["T_WHITESPACE"," ",285],["T_VARIABLE","$product",285],"]",["T_WHITESPACE","\n            ",285],")",",",["T_WHITESPACE","\n            ",286],["T_NEW","new",287],["T_WHITESPACE"," ",287],["T_NS_SEPARATOR","\\",287],["T_STRING","Magento",287],["T_NS_SEPARATOR","\\",287],["T_STRING","Framework",287],["T_NS_SEPARATOR","\\",287],["T_STRING","DataObject",287],"(",["T_WHITESPACE","\n                ",287],"[",["T_WHITESPACE","\n                    ",288],["T_CONSTANT_ENCAPSED_STRING","'parent_item'",289],["T_WHITESPACE"," ",289],["T_DOUBLE_ARROW","=>",289],["T_WHITESPACE"," ",289],["T_CONSTANT_ENCAPSED_STRING","'parent item 3'",289],",",["T_WHITESPACE","\n                    ",289],["T_CONSTANT_ENCAPSED_STRING","'name'",290],["T_WHITESPACE"," ",290],["T_DOUBLE_ARROW","=>",290],["T_WHITESPACE"," ",290],["T_CONSTANT_ENCAPSED_STRING","'name 3'",290],",",["T_WHITESPACE","\n                    ",290],["T_CONSTANT_ENCAPSED_STRING","'qty'",291],["T_WHITESPACE"," ",291],["T_DOUBLE_ARROW","=>",291],["T_WHITESPACE"," ",291],["T_LNUMBER","3",291],",",["T_WHITESPACE","\n                    ",291],["T_CONSTANT_ENCAPSED_STRING","'price'",292],["T_WHITESPACE"," ",292],["T_DOUBLE_ARROW","=>",292],["T_WHITESPACE"," ",292],["T_DNUMBER","2.3",292],",",["T_WHITESPACE","\n                    ",292],["T_CONSTANT_ENCAPSED_STRING","'original_item'",293],["T_WHITESPACE"," ",293],["T_DOUBLE_ARROW","=>",293],["T_WHITESPACE"," ",293],["T_VARIABLE","$product",293],",",["T_WHITESPACE","\n                ",293],"]",["T_WHITESPACE","\n            ",294],")",["T_WHITESPACE","\n        ",295],"]",";",["T_WHITESPACE","\n    ",296],"}",["T_WHITESPACE","\n\n    ",297],["T_DOC_COMMENT","\/**\n     * Convert sales model items to cart items\n     *\n     * @param array $salesModelItems\n     * @return array\n     *\/",299],["T_WHITESPACE","\n    ",304],["T_PROTECTED","protected",305],["T_WHITESPACE"," ",305],["T_FUNCTION","function",305],["T_WHITESPACE"," ",305],["T_STRING","_convertToCartItems",305],"(",["T_ARRAY","array",305],["T_WHITESPACE"," ",305],["T_VARIABLE","$salesModelItems",305],")",["T_WHITESPACE","\n    ",305],"{",["T_WHITESPACE","\n        ",306],["T_VARIABLE","$result",307],["T_WHITESPACE"," ",307],"=",["T_WHITESPACE"," ",307],"[","]",";",["T_WHITESPACE","\n        ",307],["T_FOREACH","foreach",308],["T_WHITESPACE"," ",308],"(",["T_VARIABLE","$salesModelItems",308],["T_WHITESPACE"," ",308],["T_AS","as",308],["T_WHITESPACE"," ",308],["T_VARIABLE","$item",308],")",["T_WHITESPACE"," ",308],"{",["T_WHITESPACE","\n            ",308],["T_IF","if",309],["T_WHITESPACE"," ",309],"(",["T_VARIABLE","$item",309],["T_OBJECT_OPERATOR","->",309],["T_STRING","getParentItem",309],"(",")",")",["T_WHITESPACE"," ",309],"{",["T_WHITESPACE","\n                ",309],["T_CONTINUE","continue",310],";",["T_WHITESPACE","\n            ",310],"}",["T_WHITESPACE","\n            ",311],["T_VARIABLE","$result",312],"[","]",["T_WHITESPACE"," ",312],"=",["T_WHITESPACE"," ",312],["T_NEW","new",312],["T_WHITESPACE"," ",312],["T_NS_SEPARATOR","\\",312],["T_STRING","Magento",312],["T_NS_SEPARATOR","\\",312],["T_STRING","Framework",312],["T_NS_SEPARATOR","\\",312],["T_STRING","DataObject",312],"(",["T_WHITESPACE","\n                ",312],"[",["T_WHITESPACE","\n                    ",313],["T_CONSTANT_ENCAPSED_STRING","'name'",314],["T_WHITESPACE"," ",314],["T_DOUBLE_ARROW","=>",314],["T_WHITESPACE"," ",314],["T_VARIABLE","$item",314],["T_OBJECT_OPERATOR","->",314],["T_STRING","getName",314],"(",")",",",["T_WHITESPACE","\n                    ",314],["T_CONSTANT_ENCAPSED_STRING","'qty'",315],["T_WHITESPACE"," ",315],["T_DOUBLE_ARROW","=>",315],["T_WHITESPACE"," ",315],["T_VARIABLE","$item",315],["T_OBJECT_OPERATOR","->",315],["T_STRING","getQty",315],"(",")",",",["T_WHITESPACE","\n                    ",315],["T_CONSTANT_ENCAPSED_STRING","'amount'",316],["T_WHITESPACE"," ",316],["T_DOUBLE_ARROW","=>",316],["T_WHITESPACE"," ",316],["T_VARIABLE","$item",316],["T_OBJECT_OPERATOR","->",316],["T_STRING","getPrice",316],"(",")",",",["T_WHITESPACE","\n                    ",316],["T_CONSTANT_ENCAPSED_STRING","'id'",317],["T_WHITESPACE"," ",317],["T_DOUBLE_ARROW","=>",317],["T_WHITESPACE"," ",317],["T_VARIABLE","$item",317],["T_OBJECT_OPERATOR","->",317],["T_STRING","getOriginalItem",317],"(",")",["T_OBJECT_OPERATOR","->",317],["T_STRING","getId",317],"(",")",",",["T_WHITESPACE","\n                ",317],"]",["T_WHITESPACE","\n            ",318],")",";",["T_WHITESPACE","\n        ",319],"}",["T_WHITESPACE","\n        ",320],["T_RETURN","return",321],["T_WHITESPACE"," ",321],["T_VARIABLE","$result",321],";",["T_WHITESPACE","\n    ",321],"}",["T_WHITESPACE","\n",322],"}",["T_WHITESPACE","\n",323]]
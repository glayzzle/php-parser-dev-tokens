[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Copyright \u00c2\u00a9 2013-2017 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n *\/",2],["T_WHITESPACE","\n\n",5],["T_NAMESPACE","namespace",7],["T_WHITESPACE"," ",7],["T_STRING","Magento",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Payment",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Test",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Unit",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Observer",7],";",["T_WHITESPACE","\n\n",7],["T_USE","use",9],["T_WHITESPACE"," ",9],["T_STRING","Magento",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Framework",9],["T_NS_SEPARATOR","\\",9],["T_STRING","TestFramework",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Unit",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Helper",9],["T_NS_SEPARATOR","\\",9],["T_STRING","ObjectManager",9],["T_WHITESPACE"," ",9],["T_AS","as",9],["T_WHITESPACE"," ",9],["T_STRING","ObjectManagerHelper",9],";",["T_WHITESPACE","\n\n",9],["T_CLASS","class",11],["T_WHITESPACE"," ",11],["T_STRING","SalesOrderBeforeSaveObserverTest",11],["T_WHITESPACE"," ",11],["T_EXTENDS","extends",11],["T_WHITESPACE"," ",11],["T_NS_SEPARATOR","\\",11],["T_STRING","PHPUnit_Framework_TestCase",11],["T_WHITESPACE","\n",11],"{",["T_WHITESPACE","\n    ",12],["T_DOC_COMMENT","\/** @var \\Magento\\Payment\\Observer\\SalesOrderBeforeSaveObserver *\/",13],["T_WHITESPACE","\n    ",13],["T_PROTECTED","protected",14],["T_WHITESPACE"," ",14],["T_VARIABLE","$salesOrderBeforeSaveObserver",14],";",["T_WHITESPACE","\n\n    ",14],["T_DOC_COMMENT","\/** @var ObjectManagerHelper *\/",16],["T_WHITESPACE","\n    ",16],["T_PROTECTED","protected",17],["T_WHITESPACE"," ",17],["T_VARIABLE","$objectManagerHelper",17],";",["T_WHITESPACE","\n\n    ",17],["T_DOC_COMMENT","\/** @var \\Magento\\Framework\\Event\\Observer|\\PHPUnit_Framework_MockObject_MockObject *\/",19],["T_WHITESPACE","\n    ",19],["T_PROTECTED","protected",20],["T_WHITESPACE"," ",20],["T_VARIABLE","$observerMock",20],";",["T_WHITESPACE","\n\n    ",20],["T_DOC_COMMENT","\/** @var \\Magento\\Framework\\Event|\\PHPUnit_Framework_MockObject_MockObject *\/",22],["T_WHITESPACE","\n    ",22],["T_PROTECTED","protected",23],["T_WHITESPACE"," ",23],["T_VARIABLE","$eventMock",23],";",["T_WHITESPACE","\n\n    ",23],["T_PROTECTED","protected",25],["T_WHITESPACE"," ",25],["T_FUNCTION","function",25],["T_WHITESPACE"," ",25],["T_STRING","setUp",25],"(",")",["T_WHITESPACE","\n    ",25],"{",["T_WHITESPACE","\n        ",26],["T_VARIABLE","$this",27],["T_OBJECT_OPERATOR","->",27],["T_STRING","objectManagerHelper",27],["T_WHITESPACE"," ",27],"=",["T_WHITESPACE"," ",27],["T_NEW","new",27],["T_WHITESPACE"," ",27],["T_STRING","ObjectManagerHelper",27],"(",["T_VARIABLE","$this",27],")",";",["T_WHITESPACE","\n        ",27],["T_VARIABLE","$this",28],["T_OBJECT_OPERATOR","->",28],["T_STRING","salesOrderBeforeSaveObserver",28],["T_WHITESPACE"," ",28],"=",["T_WHITESPACE"," ",28],["T_VARIABLE","$this",28],["T_OBJECT_OPERATOR","->",28],["T_STRING","objectManagerHelper",28],["T_OBJECT_OPERATOR","->",28],["T_STRING","getObject",28],"(",["T_WHITESPACE","\n            ",28],["T_NS_SEPARATOR","\\",29],["T_STRING","Magento",29],["T_NS_SEPARATOR","\\",29],["T_STRING","Payment",29],["T_NS_SEPARATOR","\\",29],["T_STRING","Observer",29],["T_NS_SEPARATOR","\\",29],["T_STRING","SalesOrderBeforeSaveObserver",29],["T_DOUBLE_COLON","::",29],["T_CLASS","class",29],",",["T_WHITESPACE","\n            ",29],"[","]",["T_WHITESPACE","\n        ",30],")",";",["T_WHITESPACE","\n\n        ",31],["T_VARIABLE","$this",33],["T_OBJECT_OPERATOR","->",33],["T_STRING","observerMock",33],["T_WHITESPACE"," ",33],"=",["T_WHITESPACE"," ",33],["T_VARIABLE","$this",33],["T_OBJECT_OPERATOR","->",33],["T_STRING","getMockBuilder",33],"(",["T_WHITESPACE","\n            ",33],["T_NS_SEPARATOR","\\",34],["T_STRING","Magento",34],["T_NS_SEPARATOR","\\",34],["T_STRING","Framework",34],["T_NS_SEPARATOR","\\",34],["T_STRING","Event",34],["T_NS_SEPARATOR","\\",34],["T_STRING","Observer",34],["T_DOUBLE_COLON","::",34],["T_CLASS","class",34],["T_WHITESPACE","\n        ",34],")",["T_OBJECT_OPERATOR","->",35],["T_STRING","disableOriginalConstructor",35],"(",")",["T_OBJECT_OPERATOR","->",35],["T_STRING","setMethods",35],"(","[","]",")",["T_OBJECT_OPERATOR","->",35],["T_STRING","getMock",35],"(",")",";",["T_WHITESPACE","\n    ",35],"}",["T_WHITESPACE","\n\n    ",36],["T_PUBLIC","public",38],["T_WHITESPACE"," ",38],["T_FUNCTION","function",38],["T_WHITESPACE"," ",38],["T_STRING","testSalesOrderBeforeSaveMethodNotFree",38],"(",")",["T_WHITESPACE","\n    ",38],"{",["T_WHITESPACE","\n        ",39],["T_VARIABLE","$this",40],["T_OBJECT_OPERATOR","->",40],["T_STRING","_prepareEventMockWithMethods",40],"(","[",["T_CONSTANT_ENCAPSED_STRING","'getOrder'",40],"]",")",";",["T_WHITESPACE","\n        ",40],["T_VARIABLE","$neverInvokedMethods",41],["T_WHITESPACE"," ",41],"=",["T_WHITESPACE"," ",41],"[",["T_CONSTANT_ENCAPSED_STRING","'canUnhold'",41],",",["T_WHITESPACE"," ",41],["T_CONSTANT_ENCAPSED_STRING","'isCanceled'",41],",",["T_WHITESPACE"," ",41],["T_CONSTANT_ENCAPSED_STRING","'getState'",41],",",["T_WHITESPACE"," ",41],["T_CONSTANT_ENCAPSED_STRING","'hasForcedCanCreditMemo'",41],"]",";",["T_WHITESPACE","\n        ",41],["T_VARIABLE","$order",42],["T_WHITESPACE"," ",42],"=",["T_WHITESPACE"," ",42],["T_VARIABLE","$this",42],["T_OBJECT_OPERATOR","->",42],["T_STRING","_getPreparedOrderMethod",42],"(",["T_WHITESPACE","\n            ",42],["T_CONSTANT_ENCAPSED_STRING","'not_free'",43],",",["T_WHITESPACE","\n            ",43],["T_VARIABLE","$neverInvokedMethods",44],["T_WHITESPACE","\n        ",44],")",";",["T_WHITESPACE","\n        ",45],["T_VARIABLE","$this",46],["T_OBJECT_OPERATOR","->",46],["T_STRING","_prepareNeverInvokedOrderMethods",46],"(",["T_VARIABLE","$order",46],",",["T_WHITESPACE"," ",46],["T_VARIABLE","$neverInvokedMethods",46],")",";",["T_WHITESPACE","\n        ",46],["T_VARIABLE","$this",47],["T_OBJECT_OPERATOR","->",47],["T_STRING","eventMock",47],["T_OBJECT_OPERATOR","->",47],["T_STRING","expects",47],"(",["T_VARIABLE","$this",47],["T_OBJECT_OPERATOR","->",47],["T_STRING","once",47],"(",")",")",["T_OBJECT_OPERATOR","->",47],["T_STRING","method",47],"(",["T_CONSTANT_ENCAPSED_STRING","'getOrder'",47],")",["T_OBJECT_OPERATOR","->",47],["T_STRING","will",47],"(",["T_WHITESPACE","\n            ",47],["T_VARIABLE","$this",48],["T_OBJECT_OPERATOR","->",48],["T_STRING","returnValue",48],"(",["T_VARIABLE","$order",48],")",["T_WHITESPACE","\n        ",48],")",";",["T_WHITESPACE","\n\n        ",49],["T_VARIABLE","$this",51],["T_OBJECT_OPERATOR","->",51],["T_STRING","salesOrderBeforeSaveObserver",51],["T_OBJECT_OPERATOR","->",51],["T_STRING","execute",51],"(",["T_VARIABLE","$this",51],["T_OBJECT_OPERATOR","->",51],["T_STRING","observerMock",51],")",";",["T_WHITESPACE","\n    ",51],"}",["T_WHITESPACE","\n\n    ",52],["T_PUBLIC","public",54],["T_WHITESPACE"," ",54],["T_FUNCTION","function",54],["T_WHITESPACE"," ",54],["T_STRING","testSalesOrderBeforeSaveCantUnhold",54],"(",")",["T_WHITESPACE","\n    ",54],"{",["T_WHITESPACE","\n        ",55],["T_VARIABLE","$this",56],["T_OBJECT_OPERATOR","->",56],["T_STRING","_prepareEventMockWithMethods",56],"(","[",["T_CONSTANT_ENCAPSED_STRING","'getOrder'",56],"]",")",";",["T_WHITESPACE","\n        ",56],["T_VARIABLE","$neverInvokedMethods",57],["T_WHITESPACE"," ",57],"=",["T_WHITESPACE"," ",57],"[",["T_CONSTANT_ENCAPSED_STRING","'isCanceled'",57],",",["T_WHITESPACE"," ",57],["T_CONSTANT_ENCAPSED_STRING","'getState'",57],",",["T_WHITESPACE"," ",57],["T_CONSTANT_ENCAPSED_STRING","'hasForcedCanCreditMemo'",57],"]",";",["T_WHITESPACE","\n        ",57],["T_VARIABLE","$order",58],["T_WHITESPACE"," ",58],"=",["T_WHITESPACE"," ",58],["T_VARIABLE","$this",58],["T_OBJECT_OPERATOR","->",58],["T_STRING","_getPreparedOrderMethod",58],"(",["T_CONSTANT_ENCAPSED_STRING","'free'",58],",",["T_WHITESPACE"," ",58],"[",["T_CONSTANT_ENCAPSED_STRING","'canUnhold'",58],"]",["T_WHITESPACE"," ",58],"+",["T_WHITESPACE"," ",58],["T_VARIABLE","$neverInvokedMethods",58],")",";",["T_WHITESPACE","\n        ",58],["T_VARIABLE","$this",59],["T_OBJECT_OPERATOR","->",59],["T_STRING","_prepareNeverInvokedOrderMethods",59],"(",["T_VARIABLE","$order",59],",",["T_WHITESPACE"," ",59],["T_VARIABLE","$neverInvokedMethods",59],")",";",["T_WHITESPACE","\n        ",59],["T_VARIABLE","$this",60],["T_OBJECT_OPERATOR","->",60],["T_STRING","eventMock",60],["T_OBJECT_OPERATOR","->",60],["T_STRING","expects",60],"(",["T_VARIABLE","$this",60],["T_OBJECT_OPERATOR","->",60],["T_STRING","once",60],"(",")",")",["T_OBJECT_OPERATOR","->",60],["T_STRING","method",60],"(",["T_CONSTANT_ENCAPSED_STRING","'getOrder'",60],")",["T_OBJECT_OPERATOR","->",60],["T_STRING","will",60],"(",["T_WHITESPACE","\n            ",60],["T_VARIABLE","$this",61],["T_OBJECT_OPERATOR","->",61],["T_STRING","returnValue",61],"(",["T_VARIABLE","$order",61],")",["T_WHITESPACE","\n        ",61],")",";",["T_WHITESPACE","\n        ",62],["T_VARIABLE","$order",63],["T_OBJECT_OPERATOR","->",63],["T_STRING","expects",63],"(",["T_VARIABLE","$this",63],["T_OBJECT_OPERATOR","->",63],["T_STRING","once",63],"(",")",")",["T_OBJECT_OPERATOR","->",63],["T_STRING","method",63],"(",["T_CONSTANT_ENCAPSED_STRING","'canUnhold'",63],")",["T_OBJECT_OPERATOR","->",63],["T_STRING","will",63],"(",["T_VARIABLE","$this",63],["T_OBJECT_OPERATOR","->",63],["T_STRING","returnValue",63],"(",["T_STRING","true",63],")",")",";",["T_WHITESPACE","\n        ",63],["T_VARIABLE","$this",64],["T_OBJECT_OPERATOR","->",64],["T_STRING","salesOrderBeforeSaveObserver",64],["T_OBJECT_OPERATOR","->",64],["T_STRING","execute",64],"(",["T_VARIABLE","$this",64],["T_OBJECT_OPERATOR","->",64],["T_STRING","observerMock",64],")",";",["T_WHITESPACE","\n    ",64],"}",["T_WHITESPACE","\n\n    ",65],["T_PUBLIC","public",67],["T_WHITESPACE"," ",67],["T_FUNCTION","function",67],["T_WHITESPACE"," ",67],["T_STRING","testSalesOrderBeforeSaveIsCanceled",67],"(",")",["T_WHITESPACE","\n    ",67],"{",["T_WHITESPACE","\n        ",68],["T_COMMENT","\/\/ check first canceled state\n",69],["T_WHITESPACE","        ",70],["T_VARIABLE","$this",70],["T_OBJECT_OPERATOR","->",70],["T_STRING","_prepareEventMockWithMethods",70],"(","[",["T_CONSTANT_ENCAPSED_STRING","'getOrder'",70],"]",")",";",["T_WHITESPACE","\n        ",70],["T_VARIABLE","$neverInvokedMethods",71],["T_WHITESPACE"," ",71],"=",["T_WHITESPACE"," ",71],"[",["T_CONSTANT_ENCAPSED_STRING","'getState'",71],",",["T_WHITESPACE"," ",71],["T_CONSTANT_ENCAPSED_STRING","'hasForcedCanCreditMemo'",71],"]",";",["T_WHITESPACE","\n        ",71],["T_VARIABLE","$order",72],["T_WHITESPACE"," ",72],"=",["T_WHITESPACE"," ",72],["T_VARIABLE","$this",72],["T_OBJECT_OPERATOR","->",72],["T_STRING","_getPreparedOrderMethod",72],"(",["T_CONSTANT_ENCAPSED_STRING","'free'",72],",",["T_WHITESPACE"," ",72],"[",["T_CONSTANT_ENCAPSED_STRING","'canUnhold'",72],",",["T_WHITESPACE"," ",72],["T_CONSTANT_ENCAPSED_STRING","'isCanceled'",72],"]",["T_WHITESPACE"," ",72],"+",["T_WHITESPACE"," ",72],["T_VARIABLE","$neverInvokedMethods",72],")",";",["T_WHITESPACE","\n        ",72],["T_VARIABLE","$this",73],["T_OBJECT_OPERATOR","->",73],["T_STRING","_prepareNeverInvokedOrderMethods",73],"(",["T_VARIABLE","$order",73],",",["T_WHITESPACE"," ",73],["T_VARIABLE","$neverInvokedMethods",73],")",";",["T_WHITESPACE","\n        ",73],["T_VARIABLE","$this",74],["T_OBJECT_OPERATOR","->",74],["T_STRING","eventMock",74],["T_OBJECT_OPERATOR","->",74],["T_STRING","expects",74],"(",["T_VARIABLE","$this",74],["T_OBJECT_OPERATOR","->",74],["T_STRING","once",74],"(",")",")",["T_OBJECT_OPERATOR","->",74],["T_STRING","method",74],"(",["T_CONSTANT_ENCAPSED_STRING","'getOrder'",74],")",["T_OBJECT_OPERATOR","->",74],["T_STRING","will",74],"(",["T_WHITESPACE","\n            ",74],["T_VARIABLE","$this",75],["T_OBJECT_OPERATOR","->",75],["T_STRING","returnValue",75],"(",["T_VARIABLE","$order",75],")",["T_WHITESPACE","\n        ",75],")",";",["T_WHITESPACE","\n        ",76],["T_VARIABLE","$order",77],["T_OBJECT_OPERATOR","->",77],["T_STRING","expects",77],"(",["T_VARIABLE","$this",77],["T_OBJECT_OPERATOR","->",77],["T_STRING","once",77],"(",")",")",["T_OBJECT_OPERATOR","->",77],["T_STRING","method",77],"(",["T_CONSTANT_ENCAPSED_STRING","'canUnhold'",77],")",["T_OBJECT_OPERATOR","->",77],["T_STRING","will",77],"(",["T_VARIABLE","$this",77],["T_OBJECT_OPERATOR","->",77],["T_STRING","returnValue",77],"(",["T_STRING","false",77],")",")",";",["T_WHITESPACE","\n\n        ",77],["T_VARIABLE","$order",79],["T_OBJECT_OPERATOR","->",79],["T_STRING","expects",79],"(",["T_VARIABLE","$this",79],["T_OBJECT_OPERATOR","->",79],["T_STRING","once",79],"(",")",")",["T_OBJECT_OPERATOR","->",79],["T_STRING","method",79],"(",["T_CONSTANT_ENCAPSED_STRING","'isCanceled'",79],")",["T_OBJECT_OPERATOR","->",79],["T_STRING","will",79],"(",["T_VARIABLE","$this",79],["T_OBJECT_OPERATOR","->",79],["T_STRING","returnValue",79],"(",["T_STRING","true",79],")",")",";",["T_WHITESPACE","\n\n        ",79],["T_VARIABLE","$this",81],["T_OBJECT_OPERATOR","->",81],["T_STRING","salesOrderBeforeSaveObserver",81],["T_OBJECT_OPERATOR","->",81],["T_STRING","execute",81],"(",["T_VARIABLE","$this",81],["T_OBJECT_OPERATOR","->",81],["T_STRING","observerMock",81],")",";",["T_WHITESPACE","\n    ",81],"}",["T_WHITESPACE","\n\n    ",82],["T_PUBLIC","public",84],["T_WHITESPACE"," ",84],["T_FUNCTION","function",84],["T_WHITESPACE"," ",84],["T_STRING","testSalesOrderBeforeSaveIsClosed",84],"(",")",["T_WHITESPACE","\n    ",84],"{",["T_WHITESPACE","\n        ",85],["T_COMMENT","\/\/ check closed state at second\n",86],["T_WHITESPACE","        ",87],["T_VARIABLE","$this",87],["T_OBJECT_OPERATOR","->",87],["T_STRING","_prepareEventMockWithMethods",87],"(","[",["T_CONSTANT_ENCAPSED_STRING","'getOrder'",87],"]",")",";",["T_WHITESPACE","\n        ",87],["T_VARIABLE","$neverInvokedMethods",88],["T_WHITESPACE"," ",88],"=",["T_WHITESPACE"," ",88],"[",["T_CONSTANT_ENCAPSED_STRING","'hasForcedCanCreditMemo'",88],"]",";",["T_WHITESPACE","\n        ",88],["T_VARIABLE","$order",89],["T_WHITESPACE"," ",89],"=",["T_WHITESPACE"," ",89],["T_VARIABLE","$this",89],["T_OBJECT_OPERATOR","->",89],["T_STRING","_getPreparedOrderMethod",89],"(",["T_CONSTANT_ENCAPSED_STRING","'free'",89],",",["T_WHITESPACE"," ",89],"[",["T_CONSTANT_ENCAPSED_STRING","'canUnhold'",89],",",["T_WHITESPACE"," ",89],["T_CONSTANT_ENCAPSED_STRING","'isCanceled'",89],",",["T_WHITESPACE"," ",89],["T_CONSTANT_ENCAPSED_STRING","'getState'",89],"]",["T_WHITESPACE"," ",89],"+",["T_WHITESPACE"," ",89],["T_VARIABLE","$neverInvokedMethods",89],")",";",["T_WHITESPACE","\n        ",89],["T_VARIABLE","$this",90],["T_OBJECT_OPERATOR","->",90],["T_STRING","_prepareNeverInvokedOrderMethods",90],"(",["T_VARIABLE","$order",90],",",["T_WHITESPACE"," ",90],["T_VARIABLE","$neverInvokedMethods",90],")",";",["T_WHITESPACE","\n        ",90],["T_VARIABLE","$this",91],["T_OBJECT_OPERATOR","->",91],["T_STRING","eventMock",91],["T_OBJECT_OPERATOR","->",91],["T_STRING","expects",91],"(",["T_VARIABLE","$this",91],["T_OBJECT_OPERATOR","->",91],["T_STRING","once",91],"(",")",")",["T_OBJECT_OPERATOR","->",91],["T_STRING","method",91],"(",["T_CONSTANT_ENCAPSED_STRING","'getOrder'",91],")",["T_OBJECT_OPERATOR","->",91],["T_STRING","will",91],"(",["T_WHITESPACE","\n            ",91],["T_VARIABLE","$this",92],["T_OBJECT_OPERATOR","->",92],["T_STRING","returnValue",92],"(",["T_VARIABLE","$order",92],")",["T_WHITESPACE","\n        ",92],")",";",["T_WHITESPACE","\n        ",93],["T_VARIABLE","$order",94],["T_OBJECT_OPERATOR","->",94],["T_STRING","expects",94],"(",["T_VARIABLE","$this",94],["T_OBJECT_OPERATOR","->",94],["T_STRING","once",94],"(",")",")",["T_OBJECT_OPERATOR","->",94],["T_STRING","method",94],"(",["T_CONSTANT_ENCAPSED_STRING","'canUnhold'",94],")",["T_OBJECT_OPERATOR","->",94],["T_STRING","will",94],"(",["T_VARIABLE","$this",94],["T_OBJECT_OPERATOR","->",94],["T_STRING","returnValue",94],"(",["T_STRING","false",94],")",")",";",["T_WHITESPACE","\n\n        ",94],["T_VARIABLE","$order",96],["T_OBJECT_OPERATOR","->",96],["T_STRING","expects",96],"(",["T_VARIABLE","$this",96],["T_OBJECT_OPERATOR","->",96],["T_STRING","once",96],"(",")",")",["T_OBJECT_OPERATOR","->",96],["T_STRING","method",96],"(",["T_CONSTANT_ENCAPSED_STRING","'isCanceled'",96],")",["T_OBJECT_OPERATOR","->",96],["T_STRING","will",96],"(",["T_VARIABLE","$this",96],["T_OBJECT_OPERATOR","->",96],["T_STRING","returnValue",96],"(",["T_STRING","false",96],")",")",";",["T_WHITESPACE","\n        ",96],["T_VARIABLE","$order",97],["T_OBJECT_OPERATOR","->",97],["T_STRING","expects",97],"(",["T_VARIABLE","$this",97],["T_OBJECT_OPERATOR","->",97],["T_STRING","once",97],"(",")",")",["T_OBJECT_OPERATOR","->",97],["T_STRING","method",97],"(",["T_CONSTANT_ENCAPSED_STRING","'getState'",97],")",["T_OBJECT_OPERATOR","->",97],["T_STRING","will",97],"(",["T_WHITESPACE","\n            ",97],["T_VARIABLE","$this",98],["T_OBJECT_OPERATOR","->",98],["T_STRING","returnValue",98],"(",["T_NS_SEPARATOR","\\",98],["T_STRING","Magento",98],["T_NS_SEPARATOR","\\",98],["T_STRING","Sales",98],["T_NS_SEPARATOR","\\",98],["T_STRING","Model",98],["T_NS_SEPARATOR","\\",98],["T_STRING","Order",98],["T_DOUBLE_COLON","::",98],["T_STRING","STATE_CLOSED",98],")",["T_WHITESPACE","\n        ",98],")",";",["T_WHITESPACE","\n        ",99],["T_VARIABLE","$this",100],["T_OBJECT_OPERATOR","->",100],["T_STRING","salesOrderBeforeSaveObserver",100],["T_OBJECT_OPERATOR","->",100],["T_STRING","execute",100],"(",["T_VARIABLE","$this",100],["T_OBJECT_OPERATOR","->",100],["T_STRING","observerMock",100],")",";",["T_WHITESPACE","\n    ",100],"}",["T_WHITESPACE","\n\n    ",101],["T_PUBLIC","public",103],["T_WHITESPACE"," ",103],["T_FUNCTION","function",103],["T_WHITESPACE"," ",103],["T_STRING","testSalesOrderBeforeSaveSetForced",103],"(",")",["T_WHITESPACE","\n    ",103],"{",["T_WHITESPACE","\n        ",104],["T_COMMENT","\/\/ check closed state at second\n",105],["T_WHITESPACE","        ",106],["T_VARIABLE","$this",106],["T_OBJECT_OPERATOR","->",106],["T_STRING","_prepareEventMockWithMethods",106],"(","[",["T_CONSTANT_ENCAPSED_STRING","'getOrder'",106],"]",")",";",["T_WHITESPACE","\n        ",106],["T_VARIABLE","$order",107],["T_WHITESPACE"," ",107],"=",["T_WHITESPACE"," ",107],["T_VARIABLE","$this",107],["T_OBJECT_OPERATOR","->",107],["T_STRING","_getPreparedOrderMethod",107],"(",["T_WHITESPACE","\n            ",107],["T_CONSTANT_ENCAPSED_STRING","'free'",108],",",["T_WHITESPACE","\n            ",108],"[",["T_CONSTANT_ENCAPSED_STRING","'canUnhold'",109],",",["T_WHITESPACE"," ",109],["T_CONSTANT_ENCAPSED_STRING","'isCanceled'",109],",",["T_WHITESPACE"," ",109],["T_CONSTANT_ENCAPSED_STRING","'getState'",109],",",["T_WHITESPACE"," ",109],["T_CONSTANT_ENCAPSED_STRING","'setForcedCanCreditmemo'",109],",",["T_WHITESPACE"," ",109],["T_CONSTANT_ENCAPSED_STRING","'hasForcedCanCreditmemo'",109],"]",["T_WHITESPACE","\n        ",109],")",";",["T_WHITESPACE","\n        ",110],["T_VARIABLE","$this",111],["T_OBJECT_OPERATOR","->",111],["T_STRING","eventMock",111],["T_OBJECT_OPERATOR","->",111],["T_STRING","expects",111],"(",["T_VARIABLE","$this",111],["T_OBJECT_OPERATOR","->",111],["T_STRING","once",111],"(",")",")",["T_OBJECT_OPERATOR","->",111],["T_STRING","method",111],"(",["T_CONSTANT_ENCAPSED_STRING","'getOrder'",111],")",["T_OBJECT_OPERATOR","->",111],["T_STRING","will",111],"(",["T_WHITESPACE","\n            ",111],["T_VARIABLE","$this",112],["T_OBJECT_OPERATOR","->",112],["T_STRING","returnValue",112],"(",["T_VARIABLE","$order",112],")",["T_WHITESPACE","\n        ",112],")",";",["T_WHITESPACE","\n        ",113],["T_VARIABLE","$order",114],["T_OBJECT_OPERATOR","->",114],["T_STRING","expects",114],"(",["T_VARIABLE","$this",114],["T_OBJECT_OPERATOR","->",114],["T_STRING","once",114],"(",")",")",["T_OBJECT_OPERATOR","->",114],["T_STRING","method",114],"(",["T_CONSTANT_ENCAPSED_STRING","'canUnhold'",114],")",["T_OBJECT_OPERATOR","->",114],["T_STRING","will",114],"(",["T_VARIABLE","$this",114],["T_OBJECT_OPERATOR","->",114],["T_STRING","returnValue",114],"(",["T_STRING","false",114],")",")",";",["T_WHITESPACE","\n\n        ",114],["T_VARIABLE","$order",116],["T_OBJECT_OPERATOR","->",116],["T_STRING","expects",116],"(",["T_VARIABLE","$this",116],["T_OBJECT_OPERATOR","->",116],["T_STRING","once",116],"(",")",")",["T_OBJECT_OPERATOR","->",116],["T_STRING","method",116],"(",["T_CONSTANT_ENCAPSED_STRING","'isCanceled'",116],")",["T_OBJECT_OPERATOR","->",116],["T_STRING","will",116],"(",["T_VARIABLE","$this",116],["T_OBJECT_OPERATOR","->",116],["T_STRING","returnValue",116],"(",["T_STRING","false",116],")",")",";",["T_WHITESPACE","\n        ",116],["T_VARIABLE","$order",117],["T_OBJECT_OPERATOR","->",117],["T_STRING","expects",117],"(",["T_VARIABLE","$this",117],["T_OBJECT_OPERATOR","->",117],["T_STRING","once",117],"(",")",")",["T_OBJECT_OPERATOR","->",117],["T_STRING","method",117],"(",["T_CONSTANT_ENCAPSED_STRING","'getState'",117],")",["T_OBJECT_OPERATOR","->",117],["T_STRING","will",117],"(",["T_WHITESPACE","\n            ",117],["T_VARIABLE","$this",118],["T_OBJECT_OPERATOR","->",118],["T_STRING","returnValue",118],"(",["T_CONSTANT_ENCAPSED_STRING","'not_closed_state'",118],")",["T_WHITESPACE","\n        ",118],")",";",["T_WHITESPACE","\n        ",119],["T_VARIABLE","$order",120],["T_OBJECT_OPERATOR","->",120],["T_STRING","expects",120],"(",["T_VARIABLE","$this",120],["T_OBJECT_OPERATOR","->",120],["T_STRING","once",120],"(",")",")",["T_OBJECT_OPERATOR","->",120],["T_STRING","method",120],"(",["T_CONSTANT_ENCAPSED_STRING","'hasForcedCanCreditmemo'",120],")",["T_OBJECT_OPERATOR","->",120],["T_STRING","will",120],"(",["T_VARIABLE","$this",120],["T_OBJECT_OPERATOR","->",120],["T_STRING","returnValue",120],"(",["T_STRING","false",120],")",")",";",["T_WHITESPACE","\n        ",120],["T_VARIABLE","$order",121],["T_OBJECT_OPERATOR","->",121],["T_STRING","expects",121],"(",["T_VARIABLE","$this",121],["T_OBJECT_OPERATOR","->",121],["T_STRING","once",121],"(",")",")",["T_OBJECT_OPERATOR","->",121],["T_STRING","method",121],"(",["T_CONSTANT_ENCAPSED_STRING","'setForcedCanCreditmemo'",121],")",["T_OBJECT_OPERATOR","->",121],["T_STRING","will",121],"(",["T_VARIABLE","$this",121],["T_OBJECT_OPERATOR","->",121],["T_STRING","returnValue",121],"(",["T_STRING","true",121],")",")",";",["T_WHITESPACE","\n\n        ",121],["T_VARIABLE","$this",123],["T_OBJECT_OPERATOR","->",123],["T_STRING","salesOrderBeforeSaveObserver",123],["T_OBJECT_OPERATOR","->",123],["T_STRING","execute",123],"(",["T_VARIABLE","$this",123],["T_OBJECT_OPERATOR","->",123],["T_STRING","observerMock",123],")",";",["T_WHITESPACE","\n    ",123],"}",["T_WHITESPACE","\n\n    ",124],["T_DOC_COMMENT","\/**\n     * Prepares EventMock with set of methods\n     *\n     * @param $methodsList\n     *\/",126],["T_WHITESPACE","\n    ",130],["T_PRIVATE","private",131],["T_WHITESPACE"," ",131],["T_FUNCTION","function",131],["T_WHITESPACE"," ",131],["T_STRING","_prepareEventMockWithMethods",131],"(",["T_VARIABLE","$methodsList",131],")",["T_WHITESPACE","\n    ",131],"{",["T_WHITESPACE","\n        ",132],["T_VARIABLE","$this",133],["T_OBJECT_OPERATOR","->",133],["T_STRING","eventMock",133],["T_WHITESPACE"," ",133],"=",["T_WHITESPACE"," ",133],["T_VARIABLE","$this",133],["T_OBJECT_OPERATOR","->",133],["T_STRING","getMockBuilder",133],"(",["T_WHITESPACE","\n            ",133],["T_NS_SEPARATOR","\\",134],["T_STRING","Magento",134],["T_NS_SEPARATOR","\\",134],["T_STRING","Framework",134],["T_NS_SEPARATOR","\\",134],["T_STRING","Event",134],["T_DOUBLE_COLON","::",134],["T_CLASS","class",134],["T_WHITESPACE","\n        ",134],")",["T_OBJECT_OPERATOR","->",135],["T_STRING","disableOriginalConstructor",135],"(",")",["T_OBJECT_OPERATOR","->",135],["T_STRING","setMethods",135],"(",["T_VARIABLE","$methodsList",135],")",["T_OBJECT_OPERATOR","->",135],["T_STRING","getMock",135],"(",")",";",["T_WHITESPACE","\n        ",135],["T_VARIABLE","$this",136],["T_OBJECT_OPERATOR","->",136],["T_STRING","observerMock",136],["T_OBJECT_OPERATOR","->",136],["T_STRING","expects",136],"(",["T_VARIABLE","$this",136],["T_OBJECT_OPERATOR","->",136],["T_STRING","any",136],"(",")",")",["T_OBJECT_OPERATOR","->",136],["T_STRING","method",136],"(",["T_CONSTANT_ENCAPSED_STRING","'getEvent'",136],")",["T_OBJECT_OPERATOR","->",136],["T_STRING","will",136],"(",["T_VARIABLE","$this",136],["T_OBJECT_OPERATOR","->",136],["T_STRING","returnValue",136],"(",["T_VARIABLE","$this",136],["T_OBJECT_OPERATOR","->",136],["T_STRING","eventMock",136],")",")",";",["T_WHITESPACE","\n    ",136],"}",["T_WHITESPACE","\n\n    ",137],["T_DOC_COMMENT","\/**\n     * Prepares Order with MethodInterface\n     *\n     * @param string $methodCode\n     * @param array $orderMethods\n     * @return \\PHPUnit_Framework_MockObject_MockObject\n     *\/",139],["T_WHITESPACE","\n    ",145],["T_PRIVATE","private",146],["T_WHITESPACE"," ",146],["T_FUNCTION","function",146],["T_WHITESPACE"," ",146],["T_STRING","_getPreparedOrderMethod",146],"(",["T_VARIABLE","$methodCode",146],",",["T_WHITESPACE"," ",146],["T_VARIABLE","$orderMethods",146],["T_WHITESPACE"," ",146],"=",["T_WHITESPACE"," ",146],"[","]",")",["T_WHITESPACE","\n    ",146],"{",["T_WHITESPACE","\n        ",147],["T_VARIABLE","$order",148],["T_WHITESPACE"," ",148],"=",["T_WHITESPACE"," ",148],["T_VARIABLE","$this",148],["T_OBJECT_OPERATOR","->",148],["T_STRING","getMockBuilder",148],"(",["T_NS_SEPARATOR","\\",148],["T_STRING","Magento",148],["T_NS_SEPARATOR","\\",148],["T_STRING","Sales",148],["T_NS_SEPARATOR","\\",148],["T_STRING","Model",148],["T_NS_SEPARATOR","\\",148],["T_STRING","Order",148],["T_DOUBLE_COLON","::",148],["T_CLASS","class",148],")",["T_OBJECT_OPERATOR","->",148],["T_STRING","disableOriginalConstructor",148],"(",")",["T_OBJECT_OPERATOR","->",148],["T_STRING","setMethods",148],"(",["T_WHITESPACE","\n            ",148],["T_STRING","array_merge",149],"(","[",["T_CONSTANT_ENCAPSED_STRING","'__wakeup'",149],",",["T_WHITESPACE"," ",149],["T_CONSTANT_ENCAPSED_STRING","'getPayment'",149],"]",",",["T_WHITESPACE"," ",149],["T_VARIABLE","$orderMethods",149],")",["T_WHITESPACE","\n        ",149],")",["T_OBJECT_OPERATOR","->",150],["T_STRING","getMock",150],"(",")",";",["T_WHITESPACE","\n        ",150],["T_VARIABLE","$paymentMock",151],["T_WHITESPACE"," ",151],"=",["T_WHITESPACE"," ",151],["T_VARIABLE","$this",151],["T_OBJECT_OPERATOR","->",151],["T_STRING","getMockBuilder",151],"(",["T_WHITESPACE","\n            ",151],["T_NS_SEPARATOR","\\",152],["T_STRING","Magento",152],["T_NS_SEPARATOR","\\",152],["T_STRING","Sales",152],["T_NS_SEPARATOR","\\",152],["T_STRING","Model",152],["T_NS_SEPARATOR","\\",152],["T_STRING","Order",152],["T_NS_SEPARATOR","\\",152],["T_STRING","Payment",152],["T_DOUBLE_COLON","::",152],["T_CLASS","class",152],["T_WHITESPACE","\n        ",152],")",["T_OBJECT_OPERATOR","->",153],["T_STRING","disableOriginalConstructor",153],"(",")",["T_OBJECT_OPERATOR","->",153],["T_STRING","setMethods",153],"(","[","]",")",["T_OBJECT_OPERATOR","->",153],["T_STRING","getMock",153],"(",")",";",["T_WHITESPACE","\n        ",153],["T_VARIABLE","$order",154],["T_OBJECT_OPERATOR","->",154],["T_STRING","expects",154],"(",["T_VARIABLE","$this",154],["T_OBJECT_OPERATOR","->",154],["T_STRING","once",154],"(",")",")",["T_OBJECT_OPERATOR","->",154],["T_STRING","method",154],"(",["T_CONSTANT_ENCAPSED_STRING","'getPayment'",154],")",["T_OBJECT_OPERATOR","->",154],["T_STRING","will",154],"(",["T_VARIABLE","$this",154],["T_OBJECT_OPERATOR","->",154],["T_STRING","returnValue",154],"(",["T_VARIABLE","$paymentMock",154],")",")",";",["T_WHITESPACE","\n        ",154],["T_VARIABLE","$methodInstance",155],["T_WHITESPACE"," ",155],"=",["T_WHITESPACE"," ",155],["T_VARIABLE","$this",155],["T_OBJECT_OPERATOR","->",155],["T_STRING","getMockBuilder",155],"(",["T_WHITESPACE","\n            ",155],["T_NS_SEPARATOR","\\",156],["T_STRING","Magento",156],["T_NS_SEPARATOR","\\",156],["T_STRING","Payment",156],["T_NS_SEPARATOR","\\",156],["T_STRING","Model",156],["T_NS_SEPARATOR","\\",156],["T_STRING","MethodInterface",156],["T_DOUBLE_COLON","::",156],["T_CLASS","class",156],["T_WHITESPACE","\n        ",156],")",["T_OBJECT_OPERATOR","->",157],["T_STRING","getMockForAbstractClass",157],"(",")",";",["T_WHITESPACE","\n        ",157],["T_VARIABLE","$paymentMock",158],["T_OBJECT_OPERATOR","->",158],["T_STRING","expects",158],"(",["T_VARIABLE","$this",158],["T_OBJECT_OPERATOR","->",158],["T_STRING","once",158],"(",")",")",["T_OBJECT_OPERATOR","->",158],["T_STRING","method",158],"(",["T_CONSTANT_ENCAPSED_STRING","'getMethodInstance'",158],")",["T_OBJECT_OPERATOR","->",158],["T_STRING","will",158],"(",["T_VARIABLE","$this",158],["T_OBJECT_OPERATOR","->",158],["T_STRING","returnValue",158],"(",["T_VARIABLE","$methodInstance",158],")",")",";",["T_WHITESPACE","\n        ",158],["T_VARIABLE","$methodInstance",159],["T_OBJECT_OPERATOR","->",159],["T_STRING","expects",159],"(",["T_VARIABLE","$this",159],["T_OBJECT_OPERATOR","->",159],["T_STRING","once",159],"(",")",")",["T_OBJECT_OPERATOR","->",159],["T_STRING","method",159],"(",["T_CONSTANT_ENCAPSED_STRING","'getCode'",159],")",["T_OBJECT_OPERATOR","->",159],["T_STRING","will",159],"(",["T_VARIABLE","$this",159],["T_OBJECT_OPERATOR","->",159],["T_STRING","returnValue",159],"(",["T_VARIABLE","$methodCode",159],")",")",";",["T_WHITESPACE","\n        ",159],["T_RETURN","return",160],["T_WHITESPACE"," ",160],["T_VARIABLE","$order",160],";",["T_WHITESPACE","\n    ",160],"}",["T_WHITESPACE","\n\n    ",161],["T_DOC_COMMENT","\/**\n     * Sets never expectation for order methods listed in $method\n     *\n     * @param \\PHPUnit_Framework_MockObject_MockObject $order\n     * @param array $methods\n     *\/",163],["T_WHITESPACE","\n    ",168],["T_PRIVATE","private",169],["T_WHITESPACE"," ",169],["T_FUNCTION","function",169],["T_WHITESPACE"," ",169],["T_STRING","_prepareNeverInvokedOrderMethods",169],"(",["T_NS_SEPARATOR","\\",169],["T_STRING","PHPUnit_Framework_MockObject_MockObject",169],["T_WHITESPACE"," ",169],["T_VARIABLE","$order",169],",",["T_WHITESPACE"," ",169],["T_VARIABLE","$methods",169],["T_WHITESPACE"," ",169],"=",["T_WHITESPACE"," ",169],"[","]",")",["T_WHITESPACE","\n    ",169],"{",["T_WHITESPACE","\n        ",170],["T_FOREACH","foreach",171],["T_WHITESPACE"," ",171],"(",["T_VARIABLE","$methods",171],["T_WHITESPACE"," ",171],["T_AS","as",171],["T_WHITESPACE"," ",171],["T_VARIABLE","$method",171],")",["T_WHITESPACE"," ",171],"{",["T_WHITESPACE","\n            ",171],["T_VARIABLE","$order",172],["T_OBJECT_OPERATOR","->",172],["T_STRING","expects",172],"(",["T_VARIABLE","$this",172],["T_OBJECT_OPERATOR","->",172],["T_STRING","never",172],"(",")",")",["T_OBJECT_OPERATOR","->",172],["T_STRING","method",172],"(",["T_VARIABLE","$method",172],")",";",["T_WHITESPACE","\n        ",172],"}",["T_WHITESPACE","\n    ",173],"}",["T_WHITESPACE","\n",174],"}",["T_WHITESPACE","\n",175]]
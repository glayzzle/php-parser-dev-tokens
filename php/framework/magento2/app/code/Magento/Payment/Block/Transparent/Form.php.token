[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Copyright \u00c2\u00a9 2013-2017 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n *\/",2],["T_WHITESPACE","\n",5],["T_NAMESPACE","namespace",6],["T_WHITESPACE"," ",6],["T_STRING","Magento",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Payment",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Block",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Transparent",6],";",["T_WHITESPACE","\n\n",6],["T_USE","use",8],["T_WHITESPACE"," ",8],["T_STRING","Magento",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Framework",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Exception",8],["T_NS_SEPARATOR","\\",8],["T_STRING","LocalizedException",8],";",["T_WHITESPACE","\n",8],["T_USE","use",9],["T_WHITESPACE"," ",9],["T_STRING","Magento",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Payment",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Model",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Method",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Adapter",9],";",["T_WHITESPACE","\n",9],["T_USE","use",10],["T_WHITESPACE"," ",10],["T_STRING","Magento",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Payment",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Model",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Method",10],["T_NS_SEPARATOR","\\",10],["T_STRING","TransparentInterface",10],";",["T_WHITESPACE","\n",10],["T_USE","use",11],["T_WHITESPACE"," ",11],["T_STRING","Magento",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Checkout",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Model",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Session",11],";",["T_WHITESPACE","\n",11],["T_USE","use",12],["T_WHITESPACE"," ",12],["T_STRING","Magento",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Payment",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Model",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Config",12],";",["T_WHITESPACE","\n",12],["T_USE","use",13],["T_WHITESPACE"," ",13],["T_STRING","Magento",13],["T_NS_SEPARATOR","\\",13],["T_STRING","Framework",13],["T_NS_SEPARATOR","\\",13],["T_STRING","View",13],["T_NS_SEPARATOR","\\",13],["T_STRING","Element",13],["T_NS_SEPARATOR","\\",13],["T_STRING","Template",13],["T_NS_SEPARATOR","\\",13],["T_STRING","Context",13],";",["T_WHITESPACE","\n\n",13],["T_DOC_COMMENT","\/**\n * Transparent form block\n *\n * @author     Magento Core Team <core@magentocommerce.com>\n *\/",15],["T_WHITESPACE","\n",19],["T_CLASS","class",20],["T_WHITESPACE"," ",20],["T_STRING","Form",20],["T_WHITESPACE"," ",20],["T_EXTENDS","extends",20],["T_WHITESPACE"," ",20],["T_NS_SEPARATOR","\\",20],["T_STRING","Magento",20],["T_NS_SEPARATOR","\\",20],["T_STRING","Payment",20],["T_NS_SEPARATOR","\\",20],["T_STRING","Block",20],["T_NS_SEPARATOR","\\",20],["T_STRING","Form",20],["T_NS_SEPARATOR","\\",20],["T_STRING","Cc",20],["T_WHITESPACE","\n",20],"{",["T_WHITESPACE","\n    ",21],["T_DOC_COMMENT","\/**\n     * @var Session\n     *\/",22],["T_WHITESPACE","\n    ",24],["T_PRIVATE","private",25],["T_WHITESPACE"," ",25],["T_VARIABLE","$checkoutSession",25],";",["T_WHITESPACE","\n\n    ",25],["T_DOC_COMMENT","\/**\n     * @var string\n     *\/",27],["T_WHITESPACE","\n    ",29],["T_PROTECTED","protected",30],["T_WHITESPACE"," ",30],["T_VARIABLE","$_template",30],["T_WHITESPACE"," ",30],"=",["T_WHITESPACE"," ",30],["T_CONSTANT_ENCAPSED_STRING","'Magento_Payment::transparent\/form.phtml'",30],";",["T_WHITESPACE","\n\n    ",30],["T_DOC_COMMENT","\/**\n     * @param Context $context\n     * @param Config $paymentConfig\n     * @param Session $checkoutSession\n     * @param array $data\n     *\/",32],["T_WHITESPACE","\n    ",37],["T_PUBLIC","public",38],["T_WHITESPACE"," ",38],["T_FUNCTION","function",38],["T_WHITESPACE"," ",38],["T_STRING","__construct",38],"(",["T_WHITESPACE","\n        ",38],["T_STRING","Context",39],["T_WHITESPACE"," ",39],["T_VARIABLE","$context",39],",",["T_WHITESPACE","\n        ",39],["T_STRING","Config",40],["T_WHITESPACE"," ",40],["T_VARIABLE","$paymentConfig",40],",",["T_WHITESPACE","\n        ",40],["T_STRING","Session",41],["T_WHITESPACE"," ",41],["T_VARIABLE","$checkoutSession",41],",",["T_WHITESPACE","\n        ",41],["T_ARRAY","array",42],["T_WHITESPACE"," ",42],["T_VARIABLE","$data",42],["T_WHITESPACE"," ",42],"=",["T_WHITESPACE"," ",42],"[","]",["T_WHITESPACE","\n    ",42],")",["T_WHITESPACE"," ",43],"{",["T_WHITESPACE","\n        ",43],["T_STRING","parent",44],["T_DOUBLE_COLON","::",44],["T_STRING","__construct",44],"(",["T_VARIABLE","$context",44],",",["T_WHITESPACE"," ",44],["T_VARIABLE","$paymentConfig",44],",",["T_WHITESPACE"," ",44],["T_VARIABLE","$data",44],")",";",["T_WHITESPACE","\n        ",44],["T_VARIABLE","$this",45],["T_OBJECT_OPERATOR","->",45],["T_STRING","checkoutSession",45],["T_WHITESPACE"," ",45],"=",["T_WHITESPACE"," ",45],["T_VARIABLE","$checkoutSession",45],";",["T_WHITESPACE","\n    ",45],"}",["T_WHITESPACE","\n\n    ",46],["T_DOC_COMMENT","\/**\n     * {inheritdoc}\n     *\/",48],["T_WHITESPACE","\n    ",50],["T_PROTECTED","protected",51],["T_WHITESPACE"," ",51],["T_FUNCTION","function",51],["T_WHITESPACE"," ",51],["T_STRING","_toHtml",51],"(",")",["T_WHITESPACE","\n    ",51],"{",["T_WHITESPACE","\n        ",52],["T_IF","if",53],["T_WHITESPACE"," ",53],"(",["T_VARIABLE","$this",53],["T_OBJECT_OPERATOR","->",53],["T_STRING","shouldRender",53],"(",")",")",["T_WHITESPACE"," ",53],"{",["T_WHITESPACE","\n            ",53],["T_RETURN","return",54],["T_WHITESPACE"," ",54],["T_VARIABLE","$this",54],["T_OBJECT_OPERATOR","->",54],["T_STRING","processHtml",54],"(",")",";",["T_WHITESPACE","\n        ",54],"}",["T_WHITESPACE","\n\n        ",55],["T_RETURN","return",57],["T_WHITESPACE"," ",57],["T_CONSTANT_ENCAPSED_STRING","''",57],";",["T_WHITESPACE","\n    ",57],"}",["T_WHITESPACE","\n\n    ",58],["T_DOC_COMMENT","\/**\n     * Checks whether block should be rendered\n     * basing on TransparentInterface presence in checkout session\n     *\n     * @return bool\n     *\/",60],["T_WHITESPACE","\n    ",65],["T_PROTECTED","protected",66],["T_WHITESPACE"," ",66],["T_FUNCTION","function",66],["T_WHITESPACE"," ",66],["T_STRING","shouldRender",66],"(",")",["T_WHITESPACE","\n    ",66],"{",["T_WHITESPACE","\n        ",67],["T_VARIABLE","$quote",68],["T_WHITESPACE"," ",68],"=",["T_WHITESPACE"," ",68],["T_VARIABLE","$this",68],["T_OBJECT_OPERATOR","->",68],["T_STRING","checkoutSession",68],["T_OBJECT_OPERATOR","->",68],["T_STRING","getQuote",68],"(",")",";",["T_WHITESPACE","\n        ",68],["T_IF","if",69],["T_WHITESPACE"," ",69],"(",["T_VARIABLE","$quote",69],")",["T_WHITESPACE"," ",69],"{",["T_WHITESPACE","\n            ",69],["T_VARIABLE","$payment",70],["T_WHITESPACE"," ",70],"=",["T_WHITESPACE"," ",70],["T_VARIABLE","$quote",70],["T_OBJECT_OPERATOR","->",70],["T_STRING","getPayment",70],"(",")",";",["T_WHITESPACE","\n            ",70],["T_RETURN","return",71],["T_WHITESPACE"," ",71],["T_VARIABLE","$payment",71],["T_WHITESPACE"," ",71],["T_BOOLEAN_AND","&&",71],["T_WHITESPACE"," ",71],["T_VARIABLE","$payment",71],["T_OBJECT_OPERATOR","->",71],["T_STRING","getMethodInstance",71],"(",")",["T_WHITESPACE"," ",71],["T_INSTANCEOF","instanceof",71],["T_WHITESPACE"," ",71],["T_STRING","TransparentInterface",71],";",["T_WHITESPACE","\n        ",71],"}",["T_WHITESPACE","\n\n        ",72],["T_RETURN","return",74],["T_WHITESPACE"," ",74],["T_STRING","false",74],";",["T_WHITESPACE","\n    ",74],"}",["T_WHITESPACE","\n\n    ",75],["T_DOC_COMMENT","\/**\n     * Initializes method\n     *\n     * @return void\n     *\/",77],["T_WHITESPACE","\n    ",81],["T_PROTECTED","protected",82],["T_WHITESPACE"," ",82],["T_FUNCTION","function",82],["T_WHITESPACE"," ",82],["T_STRING","initializeMethod",82],"(",")",["T_WHITESPACE","\n    ",82],"{",["T_WHITESPACE","\n        ",83],["T_VARIABLE","$this",84],["T_OBJECT_OPERATOR","->",84],["T_STRING","setData",84],"(",["T_WHITESPACE","\n            ",84],["T_CONSTANT_ENCAPSED_STRING","'method'",85],",",["T_WHITESPACE","\n            ",85],["T_VARIABLE","$this",86],["T_OBJECT_OPERATOR","->",86],["T_STRING","checkoutSession",86],["T_WHITESPACE","\n                ",86],["T_OBJECT_OPERATOR","->",87],["T_STRING","getQuote",87],"(",")",["T_WHITESPACE","\n                ",87],["T_OBJECT_OPERATOR","->",88],["T_STRING","getPayment",88],"(",")",["T_WHITESPACE","\n                ",88],["T_OBJECT_OPERATOR","->",89],["T_STRING","getMethodInstance",89],"(",")",["T_WHITESPACE","\n        ",89],")",";",["T_WHITESPACE","\n    ",90],"}",["T_WHITESPACE","\n\n    ",91],["T_DOC_COMMENT","\/**\n     * Parent rendering wrapper\n     *\n     * @return string\n     *\/",93],["T_WHITESPACE","\n    ",97],["T_PROTECTED","protected",98],["T_WHITESPACE"," ",98],["T_FUNCTION","function",98],["T_WHITESPACE"," ",98],["T_STRING","processHtml",98],"(",")",["T_WHITESPACE","\n    ",98],"{",["T_WHITESPACE","\n        ",99],["T_VARIABLE","$this",100],["T_OBJECT_OPERATOR","->",100],["T_STRING","initializeMethod",100],"(",")",";",["T_WHITESPACE","\n        ",100],["T_RETURN","return",101],["T_WHITESPACE"," ",101],["T_STRING","parent",101],["T_DOUBLE_COLON","::",101],["T_STRING","_toHtml",101],"(",")",";",["T_WHITESPACE","\n    ",101],"}",["T_WHITESPACE","\n\n    ",102],["T_DOC_COMMENT","\/**\n     * Get type of request\n     *\n     * @return bool\n     *\/",104],["T_WHITESPACE","\n    ",108],["T_PUBLIC","public",109],["T_WHITESPACE"," ",109],["T_FUNCTION","function",109],["T_WHITESPACE"," ",109],["T_STRING","isAjaxRequest",109],"(",")",["T_WHITESPACE","\n    ",109],"{",["T_WHITESPACE","\n        ",110],["T_RETURN","return",111],["T_WHITESPACE"," ",111],["T_VARIABLE","$this",111],["T_OBJECT_OPERATOR","->",111],["T_STRING","getRequest",111],"(",")",["T_OBJECT_OPERATOR","->",111],["T_STRING","getParam",111],"(",["T_CONSTANT_ENCAPSED_STRING","'isAjax'",111],")",";",["T_WHITESPACE","\n    ",111],"}",["T_WHITESPACE","\n\n    ",112],["T_DOC_COMMENT","\/**\n     * Get delimiter for date\n     *\n     * @return string\n     *\/",114],["T_WHITESPACE","\n    ",118],["T_PUBLIC","public",119],["T_WHITESPACE"," ",119],["T_FUNCTION","function",119],["T_WHITESPACE"," ",119],["T_STRING","getDateDelim",119],"(",")",["T_WHITESPACE","\n    ",119],"{",["T_WHITESPACE","\n        ",120],["T_RETURN","return",121],["T_WHITESPACE"," ",121],["T_VARIABLE","$this",121],["T_OBJECT_OPERATOR","->",121],["T_STRING","getMethodConfigData",121],"(",["T_CONSTANT_ENCAPSED_STRING","'date_delim'",121],")",";",["T_WHITESPACE","\n    ",121],"}",["T_WHITESPACE","\n\n    ",122],["T_DOC_COMMENT","\/**\n     * Get map of cc_code, cc_num, cc_expdate for gateway\n     * Returns json formatted string\n     *\n     * @return string\n     *\/",124],["T_WHITESPACE","\n    ",129],["T_PUBLIC","public",130],["T_WHITESPACE"," ",130],["T_FUNCTION","function",130],["T_WHITESPACE"," ",130],["T_STRING","getCardFieldsMap",130],"(",")",["T_WHITESPACE","\n    ",130],"{",["T_WHITESPACE","\n        ",131],["T_VARIABLE","$keys",132],["T_WHITESPACE"," ",132],"=",["T_WHITESPACE"," ",132],"[",["T_CONSTANT_ENCAPSED_STRING","'cccvv'",132],",",["T_WHITESPACE"," ",132],["T_CONSTANT_ENCAPSED_STRING","'ccexpdate'",132],",",["T_WHITESPACE"," ",132],["T_CONSTANT_ENCAPSED_STRING","'ccnum'",132],"]",";",["T_WHITESPACE","\n        ",132],["T_VARIABLE","$ccfields",133],["T_WHITESPACE"," ",133],"=",["T_WHITESPACE"," ",133],["T_STRING","array_combine",133],"(",["T_VARIABLE","$keys",133],",",["T_WHITESPACE"," ",133],["T_STRING","explode",133],"(",["T_CONSTANT_ENCAPSED_STRING","','",133],",",["T_WHITESPACE"," ",133],["T_VARIABLE","$this",133],["T_OBJECT_OPERATOR","->",133],["T_STRING","getMethodConfigData",133],"(",["T_CONSTANT_ENCAPSED_STRING","'ccfields'",133],")",")",")",";",["T_WHITESPACE","\n        ",133],["T_RETURN","return",134],["T_WHITESPACE"," ",134],["T_STRING","json_encode",134],"(",["T_VARIABLE","$ccfields",134],")",";",["T_WHITESPACE","\n    ",134],"}",["T_WHITESPACE","\n\n    ",135],["T_DOC_COMMENT","\/**\n     * Retrieve place order url on front\n     *\n     * @return string\n     *\/",137],["T_WHITESPACE","\n    ",141],["T_PUBLIC","public",142],["T_WHITESPACE"," ",142],["T_FUNCTION","function",142],["T_WHITESPACE"," ",142],["T_STRING","getOrderUrl",142],"(",")",["T_WHITESPACE","\n    ",142],"{",["T_WHITESPACE","\n        ",143],["T_RETURN","return",144],["T_WHITESPACE"," ",144],["T_VARIABLE","$this",144],["T_OBJECT_OPERATOR","->",144],["T_STRING","_urlBuilder",144],["T_OBJECT_OPERATOR","->",144],["T_STRING","getUrl",144],"(",["T_WHITESPACE","\n            ",144],["T_VARIABLE","$this",145],["T_OBJECT_OPERATOR","->",145],["T_STRING","getMethodConfigData",145],"(",["T_CONSTANT_ENCAPSED_STRING","'place_order_url'",145],")",",",["T_WHITESPACE","\n            ",145],"[",["T_WHITESPACE","\n                ",146],["T_CONSTANT_ENCAPSED_STRING","'_secure'",147],["T_WHITESPACE"," ",147],["T_DOUBLE_ARROW","=>",147],["T_WHITESPACE"," ",147],["T_VARIABLE","$this",147],["T_OBJECT_OPERATOR","->",147],["T_STRING","getRequest",147],"(",")",["T_OBJECT_OPERATOR","->",147],["T_STRING","isSecure",147],"(",")",["T_WHITESPACE","\n            ",147],"]",["T_WHITESPACE","\n        ",148],")",";",["T_WHITESPACE","\n    ",149],"}",["T_WHITESPACE","\n\n    ",150],["T_DOC_COMMENT","\/**\n     * Retrieve gateway url\n     *\n     * @return string\n     *\/",152],["T_WHITESPACE","\n    ",156],["T_PUBLIC","public",157],["T_WHITESPACE"," ",157],["T_FUNCTION","function",157],["T_WHITESPACE"," ",157],["T_STRING","getCgiUrl",157],"(",")",["T_WHITESPACE","\n    ",157],"{",["T_WHITESPACE","\n        ",158],["T_RETURN","return",159],["T_WHITESPACE"," ",159],["T_BOOL_CAST","(bool)",159],["T_VARIABLE","$this",159],["T_OBJECT_OPERATOR","->",159],["T_STRING","getMethodConfigData",159],"(",["T_CONSTANT_ENCAPSED_STRING","'sandbox_flag'",159],")",["T_WHITESPACE","\n            ",159],"?",["T_WHITESPACE"," ",160],["T_VARIABLE","$this",160],["T_OBJECT_OPERATOR","->",160],["T_STRING","getMethodConfigData",160],"(",["T_CONSTANT_ENCAPSED_STRING","'cgi_url_test_mode'",160],")",["T_WHITESPACE","\n            ",160],":",["T_WHITESPACE"," ",161],["T_VARIABLE","$this",161],["T_OBJECT_OPERATOR","->",161],["T_STRING","getMethodConfigData",161],"(",["T_CONSTANT_ENCAPSED_STRING","'cgi_url'",161],")",";",["T_WHITESPACE","\n    ",161],"}",["T_WHITESPACE","\n\n    ",162],["T_DOC_COMMENT","\/**\n     * Retrieve config data value by field name\n     *\n     * @param string $fieldName\n     * @return mixed\n     *\/",164],["T_WHITESPACE","\n    ",169],["T_PUBLIC","public",170],["T_WHITESPACE"," ",170],["T_FUNCTION","function",170],["T_WHITESPACE"," ",170],["T_STRING","getMethodConfigData",170],"(",["T_VARIABLE","$fieldName",170],")",["T_WHITESPACE","\n    ",170],"{",["T_WHITESPACE","\n        ",171],["T_VARIABLE","$method",172],["T_WHITESPACE"," ",172],"=",["T_WHITESPACE"," ",172],["T_VARIABLE","$this",172],["T_OBJECT_OPERATOR","->",172],["T_STRING","getMethod",172],"(",")",";",["T_WHITESPACE","\n        ",172],["T_IF","if",173],["T_WHITESPACE"," ",173],"(",["T_VARIABLE","$method",173],["T_WHITESPACE"," ",173],["T_INSTANCEOF","instanceof",173],["T_WHITESPACE"," ",173],["T_STRING","TransparentInterface",173],")",["T_WHITESPACE"," ",173],"{",["T_WHITESPACE","\n            ",173],["T_RETURN","return",174],["T_WHITESPACE"," ",174],["T_VARIABLE","$method",174],["T_OBJECT_OPERATOR","->",174],["T_STRING","getConfigInterface",174],"(",")",["T_OBJECT_OPERATOR","->",174],["T_STRING","getValue",174],"(",["T_VARIABLE","$fieldName",174],")",";",["T_WHITESPACE","\n        ",174],"}",["T_WHITESPACE","\n        ",175],["T_RETURN","return",176],["T_WHITESPACE"," ",176],["T_VARIABLE","$method",176],["T_OBJECT_OPERATOR","->",176],["T_STRING","getConfigData",176],"(",["T_VARIABLE","$fieldName",176],")",";",["T_WHITESPACE","\n    ",176],"}",["T_WHITESPACE","\n\n    ",177],["T_DOC_COMMENT","\/**\n     * Returns transparent method service\n     *\n     * @return TransparentInterface\n     * @throws LocalizedException\n     *\/",179],["T_WHITESPACE","\n    ",184],["T_PUBLIC","public",185],["T_WHITESPACE"," ",185],["T_FUNCTION","function",185],["T_WHITESPACE"," ",185],["T_STRING","getMethod",185],"(",")",["T_WHITESPACE","\n    ",185],"{",["T_WHITESPACE","\n        ",186],["T_VARIABLE","$method",187],["T_WHITESPACE"," ",187],"=",["T_WHITESPACE"," ",187],["T_STRING","parent",187],["T_DOUBLE_COLON","::",187],["T_STRING","getMethod",187],"(",")",";",["T_WHITESPACE","\n\n        ",187],["T_IF","if",189],["T_WHITESPACE"," ",189],"(","!",["T_VARIABLE","$method",189],["T_WHITESPACE"," ",189],["T_INSTANCEOF","instanceof",189],["T_WHITESPACE"," ",189],["T_STRING","TransparentInterface",189],["T_WHITESPACE"," ",189],["T_BOOLEAN_AND","&&",189],["T_WHITESPACE"," ",189],"!",["T_VARIABLE","$method",189],["T_WHITESPACE"," ",189],["T_INSTANCEOF","instanceof",189],["T_WHITESPACE"," ",189],["T_STRING","Adapter",189],")",["T_WHITESPACE"," ",189],"{",["T_WHITESPACE","\n            ",189],["T_THROW","throw",190],["T_WHITESPACE"," ",190],["T_NEW","new",190],["T_WHITESPACE"," ",190],["T_STRING","LocalizedException",190],"(",["T_WHITESPACE","\n                ",190],["T_STRING","__",191],"(",["T_CONSTANT_ENCAPSED_STRING","'We cannot retrieve the transparent payment method model object.'",191],")",["T_WHITESPACE","\n            ",191],")",";",["T_WHITESPACE","\n        ",192],"}",["T_WHITESPACE","\n        ",193],["T_RETURN","return",194],["T_WHITESPACE"," ",194],["T_VARIABLE","$method",194],";",["T_WHITESPACE","\n    ",194],"}",["T_WHITESPACE","\n",195],"}",["T_WHITESPACE","\n",196]]
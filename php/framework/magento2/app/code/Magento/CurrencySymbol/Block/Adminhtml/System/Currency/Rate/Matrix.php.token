[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Copyright \u00c2\u00a9 2013-2017 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n *\/",2],["T_WHITESPACE","\n\n",5],["T_DOC_COMMENT","\/**\n * Manage currency block\n *\n * @author      Magento Core Team <core@magentocommerce.com>\n *\/",7],["T_WHITESPACE","\n",11],["T_NAMESPACE","namespace",12],["T_WHITESPACE"," ",12],["T_STRING","Magento",12],["T_NS_SEPARATOR","\\",12],["T_STRING","CurrencySymbol",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Block",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Adminhtml",12],["T_NS_SEPARATOR","\\",12],["T_STRING","System",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Currency",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Rate",12],";",["T_WHITESPACE","\n\n",12],["T_CLASS","class",14],["T_WHITESPACE"," ",14],["T_STRING","Matrix",14],["T_WHITESPACE"," ",14],["T_EXTENDS","extends",14],["T_WHITESPACE"," ",14],["T_NS_SEPARATOR","\\",14],["T_STRING","Magento",14],["T_NS_SEPARATOR","\\",14],["T_STRING","Backend",14],["T_NS_SEPARATOR","\\",14],["T_STRING","Block",14],["T_NS_SEPARATOR","\\",14],["T_STRING","Template",14],["T_WHITESPACE","\n",14],"{",["T_WHITESPACE","\n    ",15],["T_DOC_COMMENT","\/**\n     * @var string\n     *\/",16],["T_WHITESPACE","\n    ",18],["T_PROTECTED","protected",19],["T_WHITESPACE"," ",19],["T_VARIABLE","$_template",19],["T_WHITESPACE"," ",19],"=",["T_WHITESPACE"," ",19],["T_CONSTANT_ENCAPSED_STRING","'system\/currency\/rate\/matrix.phtml'",19],";",["T_WHITESPACE","\n\n    ",19],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Directory\\Model\\CurrencyFactory\n     *\/",21],["T_WHITESPACE","\n    ",23],["T_PROTECTED","protected",24],["T_WHITESPACE"," ",24],["T_VARIABLE","$_dirCurrencyFactory",24],";",["T_WHITESPACE","\n\n    ",24],["T_DOC_COMMENT","\/**\n     * @param \\Magento\\Backend\\Block\\Template\\Context $context\n     * @param \\Magento\\Directory\\Model\\CurrencyFactory $dirCurrencyFactory\n     * @param array $data\n     *\/",26],["T_WHITESPACE","\n    ",30],["T_PUBLIC","public",31],["T_WHITESPACE"," ",31],["T_FUNCTION","function",31],["T_WHITESPACE"," ",31],["T_STRING","__construct",31],"(",["T_WHITESPACE","\n        ",31],["T_NS_SEPARATOR","\\",32],["T_STRING","Magento",32],["T_NS_SEPARATOR","\\",32],["T_STRING","Backend",32],["T_NS_SEPARATOR","\\",32],["T_STRING","Block",32],["T_NS_SEPARATOR","\\",32],["T_STRING","Template",32],["T_NS_SEPARATOR","\\",32],["T_STRING","Context",32],["T_WHITESPACE"," ",32],["T_VARIABLE","$context",32],",",["T_WHITESPACE","\n        ",32],["T_NS_SEPARATOR","\\",33],["T_STRING","Magento",33],["T_NS_SEPARATOR","\\",33],["T_STRING","Directory",33],["T_NS_SEPARATOR","\\",33],["T_STRING","Model",33],["T_NS_SEPARATOR","\\",33],["T_STRING","CurrencyFactory",33],["T_WHITESPACE"," ",33],["T_VARIABLE","$dirCurrencyFactory",33],",",["T_WHITESPACE","\n        ",33],["T_ARRAY","array",34],["T_WHITESPACE"," ",34],["T_VARIABLE","$data",34],["T_WHITESPACE"," ",34],"=",["T_WHITESPACE"," ",34],"[","]",["T_WHITESPACE","\n    ",34],")",["T_WHITESPACE"," ",35],"{",["T_WHITESPACE","\n        ",35],["T_VARIABLE","$this",36],["T_OBJECT_OPERATOR","->",36],["T_STRING","_dirCurrencyFactory",36],["T_WHITESPACE"," ",36],"=",["T_WHITESPACE"," ",36],["T_VARIABLE","$dirCurrencyFactory",36],";",["T_WHITESPACE","\n        ",36],["T_STRING","parent",37],["T_DOUBLE_COLON","::",37],["T_STRING","__construct",37],"(",["T_VARIABLE","$context",37],",",["T_WHITESPACE"," ",37],["T_VARIABLE","$data",37],")",";",["T_WHITESPACE","\n    ",37],"}",["T_WHITESPACE","\n\n    ",38],["T_DOC_COMMENT","\/**\n     * Prepare layout\n     *\n     * @return \\Magento\\Framework\\View\\Element\\AbstractBlock\n     *\/",40],["T_WHITESPACE","\n    ",44],["T_PROTECTED","protected",45],["T_WHITESPACE"," ",45],["T_FUNCTION","function",45],["T_WHITESPACE"," ",45],["T_STRING","_prepareLayout",45],"(",")",["T_WHITESPACE","\n    ",45],"{",["T_WHITESPACE","\n        ",46],["T_VARIABLE","$newRates",47],["T_WHITESPACE"," ",47],"=",["T_WHITESPACE"," ",47],["T_VARIABLE","$this",47],["T_OBJECT_OPERATOR","->",47],["T_STRING","_backendSession",47],["T_OBJECT_OPERATOR","->",47],["T_STRING","getRates",47],"(",")",";",["T_WHITESPACE","\n        ",47],["T_VARIABLE","$this",48],["T_OBJECT_OPERATOR","->",48],["T_STRING","_backendSession",48],["T_OBJECT_OPERATOR","->",48],["T_STRING","unsetData",48],"(",["T_CONSTANT_ENCAPSED_STRING","'rates'",48],")",";",["T_WHITESPACE","\n\n        ",48],["T_VARIABLE","$currencyModel",50],["T_WHITESPACE"," ",50],"=",["T_WHITESPACE"," ",50],["T_VARIABLE","$this",50],["T_OBJECT_OPERATOR","->",50],["T_STRING","_dirCurrencyFactory",50],["T_OBJECT_OPERATOR","->",50],["T_STRING","create",50],"(",")",";",["T_WHITESPACE","\n        ",50],["T_VARIABLE","$currencies",51],["T_WHITESPACE"," ",51],"=",["T_WHITESPACE"," ",51],["T_VARIABLE","$currencyModel",51],["T_OBJECT_OPERATOR","->",51],["T_STRING","getConfigAllowCurrencies",51],"(",")",";",["T_WHITESPACE","\n        ",51],["T_VARIABLE","$defaultCurrencies",52],["T_WHITESPACE"," ",52],"=",["T_WHITESPACE"," ",52],["T_VARIABLE","$currencyModel",52],["T_OBJECT_OPERATOR","->",52],["T_STRING","getConfigBaseCurrencies",52],"(",")",";",["T_WHITESPACE","\n        ",52],["T_VARIABLE","$oldCurrencies",53],["T_WHITESPACE"," ",53],"=",["T_WHITESPACE"," ",53],["T_VARIABLE","$this",53],["T_OBJECT_OPERATOR","->",53],["T_STRING","_prepareRates",53],"(",["T_VARIABLE","$currencyModel",53],["T_OBJECT_OPERATOR","->",53],["T_STRING","getCurrencyRates",53],"(",["T_VARIABLE","$defaultCurrencies",53],",",["T_WHITESPACE"," ",53],["T_VARIABLE","$currencies",53],")",")",";",["T_WHITESPACE","\n\n        ",53],["T_FOREACH","foreach",55],["T_WHITESPACE"," ",55],"(",["T_VARIABLE","$currencies",55],["T_WHITESPACE"," ",55],["T_AS","as",55],["T_WHITESPACE"," ",55],["T_VARIABLE","$currency",55],")",["T_WHITESPACE"," ",55],"{",["T_WHITESPACE","\n            ",55],["T_FOREACH","foreach",56],["T_WHITESPACE"," ",56],"(",["T_VARIABLE","$oldCurrencies",56],["T_WHITESPACE"," ",56],["T_AS","as",56],["T_WHITESPACE"," ",56],["T_VARIABLE","$key",56],["T_WHITESPACE"," ",56],["T_DOUBLE_ARROW","=>",56],["T_WHITESPACE"," ",56],["T_VARIABLE","$value",56],")",["T_WHITESPACE"," ",56],"{",["T_WHITESPACE","\n                ",56],["T_IF","if",57],["T_WHITESPACE"," ",57],"(","!",["T_STRING","array_key_exists",57],"(",["T_VARIABLE","$currency",57],",",["T_WHITESPACE"," ",57],["T_VARIABLE","$oldCurrencies",57],"[",["T_VARIABLE","$key",57],"]",")",")",["T_WHITESPACE"," ",57],"{",["T_WHITESPACE","\n                    ",57],["T_VARIABLE","$oldCurrencies",58],"[",["T_VARIABLE","$key",58],"]","[",["T_VARIABLE","$currency",58],"]",["T_WHITESPACE"," ",58],"=",["T_WHITESPACE"," ",58],["T_CONSTANT_ENCAPSED_STRING","''",58],";",["T_WHITESPACE","\n                ",58],"}",["T_WHITESPACE","\n            ",59],"}",["T_WHITESPACE","\n        ",60],"}",["T_WHITESPACE","\n\n        ",61],["T_FOREACH","foreach",63],["T_WHITESPACE"," ",63],"(",["T_VARIABLE","$oldCurrencies",63],["T_WHITESPACE"," ",63],["T_AS","as",63],["T_WHITESPACE"," ",63],["T_VARIABLE","$key",63],["T_WHITESPACE"," ",63],["T_DOUBLE_ARROW","=>",63],["T_WHITESPACE"," ",63],["T_VARIABLE","$value",63],")",["T_WHITESPACE"," ",63],"{",["T_WHITESPACE","\n            ",63],["T_STRING","ksort",64],"(",["T_VARIABLE","$oldCurrencies",64],"[",["T_VARIABLE","$key",64],"]",")",";",["T_WHITESPACE","\n        ",64],"}",["T_WHITESPACE","\n\n        ",65],["T_STRING","sort",67],"(",["T_VARIABLE","$currencies",67],")",";",["T_WHITESPACE","\n\n        ",67],["T_VARIABLE","$this",69],["T_OBJECT_OPERATOR","->",69],["T_STRING","setAllowedCurrencies",69],"(",["T_WHITESPACE","\n            ",69],["T_VARIABLE","$currencies",70],["T_WHITESPACE","\n        ",70],")",["T_OBJECT_OPERATOR","->",71],["T_STRING","setDefaultCurrencies",71],"(",["T_WHITESPACE","\n            ",71],["T_VARIABLE","$defaultCurrencies",72],["T_WHITESPACE","\n        ",72],")",["T_OBJECT_OPERATOR","->",73],["T_STRING","setOldRates",73],"(",["T_WHITESPACE","\n            ",73],["T_VARIABLE","$oldCurrencies",74],["T_WHITESPACE","\n        ",74],")",["T_OBJECT_OPERATOR","->",75],["T_STRING","setNewRates",75],"(",["T_WHITESPACE","\n            ",75],["T_VARIABLE","$this",76],["T_OBJECT_OPERATOR","->",76],["T_STRING","_prepareRates",76],"(",["T_VARIABLE","$newRates",76],")",["T_WHITESPACE","\n        ",76],")",";",["T_WHITESPACE","\n\n        ",77],["T_RETURN","return",79],["T_WHITESPACE"," ",79],["T_STRING","parent",79],["T_DOUBLE_COLON","::",79],["T_STRING","_prepareLayout",79],"(",")",";",["T_WHITESPACE","\n    ",79],"}",["T_WHITESPACE","\n\n    ",80],["T_DOC_COMMENT","\/**\n     * Get rates form action\n     *\n     * @return string\n     * @codeCoverageIgnore\n     *\/",82],["T_WHITESPACE","\n    ",87],["T_PUBLIC","public",88],["T_WHITESPACE"," ",88],["T_FUNCTION","function",88],["T_WHITESPACE"," ",88],["T_STRING","getRatesFormAction",88],"(",")",["T_WHITESPACE","\n    ",88],"{",["T_WHITESPACE","\n        ",89],["T_RETURN","return",90],["T_WHITESPACE"," ",90],["T_VARIABLE","$this",90],["T_OBJECT_OPERATOR","->",90],["T_STRING","getUrl",90],"(",["T_CONSTANT_ENCAPSED_STRING","'adminhtml\/*\/saveRates'",90],")",";",["T_WHITESPACE","\n    ",90],"}",["T_WHITESPACE","\n\n    ",91],["T_DOC_COMMENT","\/**\n     * Prepare rates\n     *\n     * @param array $array\n     * @return array\n     *\/",93],["T_WHITESPACE","\n    ",98],["T_PROTECTED","protected",99],["T_WHITESPACE"," ",99],["T_FUNCTION","function",99],["T_WHITESPACE"," ",99],["T_STRING","_prepareRates",99],"(",["T_VARIABLE","$array",99],")",["T_WHITESPACE","\n    ",99],"{",["T_WHITESPACE","\n        ",100],["T_IF","if",101],["T_WHITESPACE"," ",101],"(","!",["T_STRING","is_array",101],"(",["T_VARIABLE","$array",101],")",")",["T_WHITESPACE"," ",101],"{",["T_WHITESPACE","\n            ",101],["T_RETURN","return",102],["T_WHITESPACE"," ",102],["T_VARIABLE","$array",102],";",["T_WHITESPACE","\n        ",102],"}",["T_WHITESPACE","\n\n        ",103],["T_FOREACH","foreach",105],["T_WHITESPACE"," ",105],"(",["T_VARIABLE","$array",105],["T_WHITESPACE"," ",105],["T_AS","as",105],["T_WHITESPACE"," ",105],["T_VARIABLE","$key",105],["T_WHITESPACE"," ",105],["T_DOUBLE_ARROW","=>",105],["T_WHITESPACE"," ",105],["T_VARIABLE","$rate",105],")",["T_WHITESPACE"," ",105],"{",["T_WHITESPACE","\n            ",105],["T_FOREACH","foreach",106],["T_WHITESPACE"," ",106],"(",["T_VARIABLE","$rate",106],["T_WHITESPACE"," ",106],["T_AS","as",106],["T_WHITESPACE"," ",106],["T_VARIABLE","$code",106],["T_WHITESPACE"," ",106],["T_DOUBLE_ARROW","=>",106],["T_WHITESPACE"," ",106],["T_VARIABLE","$value",106],")",["T_WHITESPACE"," ",106],"{",["T_WHITESPACE","\n                ",106],["T_VARIABLE","$parts",107],["T_WHITESPACE"," ",107],"=",["T_WHITESPACE"," ",107],["T_STRING","explode",107],"(",["T_CONSTANT_ENCAPSED_STRING","'.'",107],",",["T_WHITESPACE"," ",107],["T_VARIABLE","$value",107],")",";",["T_WHITESPACE","\n                ",107],["T_IF","if",108],["T_WHITESPACE"," ",108],"(",["T_STRING","sizeof",108],"(",["T_VARIABLE","$parts",108],")",["T_WHITESPACE"," ",108],["T_IS_EQUAL","==",108],["T_WHITESPACE"," ",108],["T_LNUMBER","2",108],")",["T_WHITESPACE"," ",108],"{",["T_WHITESPACE","\n                    ",108],["T_VARIABLE","$parts",109],"[",["T_LNUMBER","1",109],"]",["T_WHITESPACE"," ",109],"=",["T_WHITESPACE"," ",109],["T_STRING","str_pad",109],"(",["T_STRING","rtrim",109],"(",["T_VARIABLE","$parts",109],"[",["T_LNUMBER","1",109],"]",",",["T_WHITESPACE"," ",109],["T_LNUMBER","0",109],")",",",["T_WHITESPACE"," ",109],["T_LNUMBER","4",109],",",["T_WHITESPACE"," ",109],["T_CONSTANT_ENCAPSED_STRING","'0'",109],",",["T_WHITESPACE"," ",109],["T_STRING","STR_PAD_RIGHT",109],")",";",["T_WHITESPACE","\n                    ",109],["T_VARIABLE","$array",110],"[",["T_VARIABLE","$key",110],"]","[",["T_VARIABLE","$code",110],"]",["T_WHITESPACE"," ",110],"=",["T_WHITESPACE"," ",110],["T_STRING","join",110],"(",["T_CONSTANT_ENCAPSED_STRING","'.'",110],",",["T_WHITESPACE"," ",110],["T_VARIABLE","$parts",110],")",";",["T_WHITESPACE","\n                ",110],"}",["T_WHITESPACE"," ",111],["T_ELSEIF","elseif",111],["T_WHITESPACE"," ",111],"(",["T_VARIABLE","$value",111],["T_WHITESPACE"," ",111],">",["T_WHITESPACE"," ",111],["T_LNUMBER","0",111],")",["T_WHITESPACE"," ",111],"{",["T_WHITESPACE","\n                    ",111],["T_VARIABLE","$array",112],"[",["T_VARIABLE","$key",112],"]","[",["T_VARIABLE","$code",112],"]",["T_WHITESPACE"," ",112],"=",["T_WHITESPACE"," ",112],["T_STRING","number_format",112],"(",["T_VARIABLE","$value",112],",",["T_WHITESPACE"," ",112],["T_LNUMBER","4",112],")",";",["T_WHITESPACE","\n                ",112],"}",["T_WHITESPACE"," ",113],["T_ELSE","else",113],["T_WHITESPACE"," ",113],"{",["T_WHITESPACE","\n                    ",113],["T_VARIABLE","$array",114],"[",["T_VARIABLE","$key",114],"]","[",["T_VARIABLE","$code",114],"]",["T_WHITESPACE"," ",114],"=",["T_WHITESPACE"," ",114],["T_STRING","null",114],";",["T_WHITESPACE","\n                ",114],"}",["T_WHITESPACE","\n            ",115],"}",["T_WHITESPACE","\n        ",116],"}",["T_WHITESPACE","\n        ",117],["T_RETURN","return",118],["T_WHITESPACE"," ",118],["T_VARIABLE","$array",118],";",["T_WHITESPACE","\n    ",118],"}",["T_WHITESPACE","\n",119],"}",["T_WHITESPACE","\n",120]]
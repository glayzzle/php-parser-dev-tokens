[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Copyright \u00c2\u00a9 2013-2017 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n *\/",2],["T_WHITESPACE","\n\n",5],["T_DOC_COMMENT","\/**\n * Handling cron jobs\n *\/",7],["T_WHITESPACE","\n",9],["T_NAMESPACE","namespace",10],["T_WHITESPACE"," ",10],["T_STRING","Magento",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Cron",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Observer",10],";",["T_WHITESPACE","\n\n",10],["T_USE","use",12],["T_WHITESPACE"," ",12],["T_STRING","Magento",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Framework",12],["T_NS_SEPARATOR","\\",12],["T_STRING","App",12],["T_NS_SEPARATOR","\\",12],["T_STRING","State",12],";",["T_WHITESPACE","\n",12],["T_USE","use",13],["T_WHITESPACE"," ",13],["T_STRING","Magento",13],["T_NS_SEPARATOR","\\",13],["T_STRING","Framework",13],["T_NS_SEPARATOR","\\",13],["T_STRING","Console",13],["T_NS_SEPARATOR","\\",13],["T_STRING","CLI",13],";",["T_WHITESPACE","\n",13],["T_USE","use",14],["T_WHITESPACE"," ",14],["T_STRING","Magento",14],["T_NS_SEPARATOR","\\",14],["T_STRING","Framework",14],["T_NS_SEPARATOR","\\",14],["T_STRING","Event",14],["T_NS_SEPARATOR","\\",14],["T_STRING","ObserverInterface",14],";",["T_WHITESPACE","\n",14],["T_USE","use",15],["T_WHITESPACE"," ",15],["T_NS_SEPARATOR","\\",15],["T_STRING","Magento",15],["T_NS_SEPARATOR","\\",15],["T_STRING","Cron",15],["T_NS_SEPARATOR","\\",15],["T_STRING","Model",15],["T_NS_SEPARATOR","\\",15],["T_STRING","Schedule",15],";",["T_WHITESPACE","\n\n",15],["T_DOC_COMMENT","\/**\n * @SuppressWarnings(PHPMD.CouplingBetweenObjects)\n *\/",17],["T_WHITESPACE","\n",19],["T_CLASS","class",20],["T_WHITESPACE"," ",20],["T_STRING","ProcessCronQueueObserver",20],["T_WHITESPACE"," ",20],["T_IMPLEMENTS","implements",20],["T_WHITESPACE"," ",20],["T_STRING","ObserverInterface",20],["T_WHITESPACE","\n",20],"{",["T_WHITESPACE","\n    ",21],["T_COMMENT","\/**#@+\n     * Cache key values\n     *\/",22],["T_WHITESPACE","\n    ",24],["T_CONST","const",25],["T_WHITESPACE"," ",25],["T_STRING","CACHE_KEY_LAST_SCHEDULE_GENERATE_AT",25],["T_WHITESPACE"," ",25],"=",["T_WHITESPACE"," ",25],["T_CONSTANT_ENCAPSED_STRING","'cron_last_schedule_generate_at'",25],";",["T_WHITESPACE","\n\n    ",25],["T_CONST","const",27],["T_WHITESPACE"," ",27],["T_STRING","CACHE_KEY_LAST_HISTORY_CLEANUP_AT",27],["T_WHITESPACE"," ",27],"=",["T_WHITESPACE"," ",27],["T_CONSTANT_ENCAPSED_STRING","'cron_last_history_cleanup_at'",27],";",["T_WHITESPACE","\n\n    ",27],["T_DOC_COMMENT","\/**\n     * Flag for internal communication between processes for running\n     * all jobs in a group in parallel as a separate process\n     *\/",29],["T_WHITESPACE","\n    ",32],["T_CONST","const",33],["T_WHITESPACE"," ",33],["T_STRING","STANDALONE_PROCESS_STARTED",33],["T_WHITESPACE"," ",33],"=",["T_WHITESPACE"," ",33],["T_CONSTANT_ENCAPSED_STRING","'standaloneProcessStarted'",33],";",["T_WHITESPACE","\n\n    ",33],["T_COMMENT","\/**#@-*\/",35],["T_WHITESPACE","\n\n    ",35],["T_COMMENT","\/**#@+\n     * List of configurable constants used to calculate and validate during handling cron jobs\n     *\/",37],["T_WHITESPACE","\n    ",39],["T_CONST","const",40],["T_WHITESPACE"," ",40],["T_STRING","XML_PATH_SCHEDULE_GENERATE_EVERY",40],["T_WHITESPACE"," ",40],"=",["T_WHITESPACE"," ",40],["T_CONSTANT_ENCAPSED_STRING","'schedule_generate_every'",40],";",["T_WHITESPACE","\n\n    ",40],["T_CONST","const",42],["T_WHITESPACE"," ",42],["T_STRING","XML_PATH_SCHEDULE_AHEAD_FOR",42],["T_WHITESPACE"," ",42],"=",["T_WHITESPACE"," ",42],["T_CONSTANT_ENCAPSED_STRING","'schedule_ahead_for'",42],";",["T_WHITESPACE","\n\n    ",42],["T_CONST","const",44],["T_WHITESPACE"," ",44],["T_STRING","XML_PATH_SCHEDULE_LIFETIME",44],["T_WHITESPACE"," ",44],"=",["T_WHITESPACE"," ",44],["T_CONSTANT_ENCAPSED_STRING","'schedule_lifetime'",44],";",["T_WHITESPACE","\n\n    ",44],["T_CONST","const",46],["T_WHITESPACE"," ",46],["T_STRING","XML_PATH_HISTORY_CLEANUP_EVERY",46],["T_WHITESPACE"," ",46],"=",["T_WHITESPACE"," ",46],["T_CONSTANT_ENCAPSED_STRING","'history_cleanup_every'",46],";",["T_WHITESPACE","\n\n    ",46],["T_CONST","const",48],["T_WHITESPACE"," ",48],["T_STRING","XML_PATH_HISTORY_SUCCESS",48],["T_WHITESPACE"," ",48],"=",["T_WHITESPACE"," ",48],["T_CONSTANT_ENCAPSED_STRING","'history_success_lifetime'",48],";",["T_WHITESPACE","\n\n    ",48],["T_CONST","const",50],["T_WHITESPACE"," ",50],["T_STRING","XML_PATH_HISTORY_FAILURE",50],["T_WHITESPACE"," ",50],"=",["T_WHITESPACE"," ",50],["T_CONSTANT_ENCAPSED_STRING","'history_failure_lifetime'",50],";",["T_WHITESPACE","\n\n    ",50],["T_COMMENT","\/**#@-*\/",52],["T_WHITESPACE","\n\n    ",52],["T_DOC_COMMENT","\/**\n     * Value of seconds in one minute\n     *\/",54],["T_WHITESPACE","\n    ",56],["T_CONST","const",57],["T_WHITESPACE"," ",57],["T_STRING","SECONDS_IN_MINUTE",57],["T_WHITESPACE"," ",57],"=",["T_WHITESPACE"," ",57],["T_LNUMBER","60",57],";",["T_WHITESPACE","\n\n    ",57],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Cron\\Model\\ResourceModel\\Schedule\\Collection\n     *\/",59],["T_WHITESPACE","\n    ",61],["T_PROTECTED","protected",62],["T_WHITESPACE"," ",62],["T_VARIABLE","$_pendingSchedules",62],";",["T_WHITESPACE","\n\n    ",62],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Cron\\Model\\ConfigInterface\n     *\/",64],["T_WHITESPACE","\n    ",66],["T_PROTECTED","protected",67],["T_WHITESPACE"," ",67],["T_VARIABLE","$_config",67],";",["T_WHITESPACE","\n\n    ",67],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Framework\\App\\ObjectManager\n     *\/",69],["T_WHITESPACE","\n    ",71],["T_PROTECTED","protected",72],["T_WHITESPACE"," ",72],["T_VARIABLE","$_objectManager",72],";",["T_WHITESPACE","\n\n    ",72],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Framework\\App\\CacheInterface\n     *\/",74],["T_WHITESPACE","\n    ",76],["T_PROTECTED","protected",77],["T_WHITESPACE"," ",77],["T_VARIABLE","$_cache",77],";",["T_WHITESPACE","\n\n    ",77],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Framework\\App\\Config\\ScopeConfigInterface\n     *\/",79],["T_WHITESPACE","\n    ",81],["T_PROTECTED","protected",82],["T_WHITESPACE"," ",82],["T_VARIABLE","$_scopeConfig",82],";",["T_WHITESPACE","\n\n    ",82],["T_DOC_COMMENT","\/**\n     * @var ScheduleFactory\n     *\/",84],["T_WHITESPACE","\n    ",86],["T_PROTECTED","protected",87],["T_WHITESPACE"," ",87],["T_VARIABLE","$_scheduleFactory",87],";",["T_WHITESPACE","\n\n    ",87],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Framework\\App\\Console\\Request\n     *\/",89],["T_WHITESPACE","\n    ",91],["T_PROTECTED","protected",92],["T_WHITESPACE"," ",92],["T_VARIABLE","$_request",92],";",["T_WHITESPACE","\n\n    ",92],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Framework\\ShellInterface\n     *\/",94],["T_WHITESPACE","\n    ",96],["T_PROTECTED","protected",97],["T_WHITESPACE"," ",97],["T_VARIABLE","$_shell",97],";",["T_WHITESPACE","\n\n    ",97],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Framework\\Stdlib\\DateTime\\TimezoneInterface\n     *\/",99],["T_WHITESPACE","\n    ",101],["T_PROTECTED","protected",102],["T_WHITESPACE"," ",102],["T_VARIABLE","$timezone",102],";",["T_WHITESPACE","\n\n    ",102],["T_DOC_COMMENT","\/**\n     * @var \\Symfony\\Component\\Process\\PhpExecutableFinder\n     *\/",104],["T_WHITESPACE","\n    ",106],["T_PROTECTED","protected",107],["T_WHITESPACE"," ",107],["T_VARIABLE","$phpExecutableFinder",107],";",["T_WHITESPACE","\n\n    ",107],["T_DOC_COMMENT","\/**\n     * @var \\Psr\\Log\\LoggerInterface\n     *\/",109],["T_WHITESPACE","\n    ",111],["T_PRIVATE","private",112],["T_WHITESPACE"," ",112],["T_VARIABLE","$logger",112],";",["T_WHITESPACE","\n\n    ",112],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Framework\\App\\State\n     *\/",114],["T_WHITESPACE","\n    ",116],["T_PRIVATE","private",117],["T_WHITESPACE"," ",117],["T_VARIABLE","$state",117],";",["T_WHITESPACE","\n\n    ",117],["T_DOC_COMMENT","\/**\n     * @param \\Magento\\Framework\\ObjectManagerInterface $objectManager\n     * @param \\Magento\\Cron\\Model\\ScheduleFactory $scheduleFactory\n     * @param \\Magento\\Framework\\App\\CacheInterface $cache\n     * @param \\Magento\\Cron\\Model\\ConfigInterface $config\n     * @param \\Magento\\Framework\\App\\Config\\ScopeConfigInterface $scopeConfig\n     * @param \\Magento\\Framework\\App\\Console\\Request $request\n     * @param \\Magento\\Framework\\ShellInterface $shell\n     * @param \\Magento\\Framework\\Stdlib\\DateTime\\TimezoneInterface $timezone\n     * @param \\Magento\\Framework\\Process\\PhpExecutableFinderFactory $phpExecutableFinderFactory\n     * @param \\Psr\\Log\\LoggerInterface $logger\n     * @param \\Magento\\Framework\\App\\State $state\n     *\/",119],["T_WHITESPACE","\n    ",131],["T_PUBLIC","public",132],["T_WHITESPACE"," ",132],["T_FUNCTION","function",132],["T_WHITESPACE"," ",132],["T_STRING","__construct",132],"(",["T_WHITESPACE","\n        ",132],["T_NS_SEPARATOR","\\",133],["T_STRING","Magento",133],["T_NS_SEPARATOR","\\",133],["T_STRING","Framework",133],["T_NS_SEPARATOR","\\",133],["T_STRING","ObjectManagerInterface",133],["T_WHITESPACE"," ",133],["T_VARIABLE","$objectManager",133],",",["T_WHITESPACE","\n        ",133],["T_NS_SEPARATOR","\\",134],["T_STRING","Magento",134],["T_NS_SEPARATOR","\\",134],["T_STRING","Cron",134],["T_NS_SEPARATOR","\\",134],["T_STRING","Model",134],["T_NS_SEPARATOR","\\",134],["T_STRING","ScheduleFactory",134],["T_WHITESPACE"," ",134],["T_VARIABLE","$scheduleFactory",134],",",["T_WHITESPACE","\n        ",134],["T_NS_SEPARATOR","\\",135],["T_STRING","Magento",135],["T_NS_SEPARATOR","\\",135],["T_STRING","Framework",135],["T_NS_SEPARATOR","\\",135],["T_STRING","App",135],["T_NS_SEPARATOR","\\",135],["T_STRING","CacheInterface",135],["T_WHITESPACE"," ",135],["T_VARIABLE","$cache",135],",",["T_WHITESPACE","\n        ",135],["T_NS_SEPARATOR","\\",136],["T_STRING","Magento",136],["T_NS_SEPARATOR","\\",136],["T_STRING","Cron",136],["T_NS_SEPARATOR","\\",136],["T_STRING","Model",136],["T_NS_SEPARATOR","\\",136],["T_STRING","ConfigInterface",136],["T_WHITESPACE"," ",136],["T_VARIABLE","$config",136],",",["T_WHITESPACE","\n        ",136],["T_NS_SEPARATOR","\\",137],["T_STRING","Magento",137],["T_NS_SEPARATOR","\\",137],["T_STRING","Framework",137],["T_NS_SEPARATOR","\\",137],["T_STRING","App",137],["T_NS_SEPARATOR","\\",137],["T_STRING","Config",137],["T_NS_SEPARATOR","\\",137],["T_STRING","ScopeConfigInterface",137],["T_WHITESPACE"," ",137],["T_VARIABLE","$scopeConfig",137],",",["T_WHITESPACE","\n        ",137],["T_NS_SEPARATOR","\\",138],["T_STRING","Magento",138],["T_NS_SEPARATOR","\\",138],["T_STRING","Framework",138],["T_NS_SEPARATOR","\\",138],["T_STRING","App",138],["T_NS_SEPARATOR","\\",138],["T_STRING","Console",138],["T_NS_SEPARATOR","\\",138],["T_STRING","Request",138],["T_WHITESPACE"," ",138],["T_VARIABLE","$request",138],",",["T_WHITESPACE","\n        ",138],["T_NS_SEPARATOR","\\",139],["T_STRING","Magento",139],["T_NS_SEPARATOR","\\",139],["T_STRING","Framework",139],["T_NS_SEPARATOR","\\",139],["T_STRING","ShellInterface",139],["T_WHITESPACE"," ",139],["T_VARIABLE","$shell",139],",",["T_WHITESPACE","\n        ",139],["T_NS_SEPARATOR","\\",140],["T_STRING","Magento",140],["T_NS_SEPARATOR","\\",140],["T_STRING","Framework",140],["T_NS_SEPARATOR","\\",140],["T_STRING","Stdlib",140],["T_NS_SEPARATOR","\\",140],["T_STRING","DateTime",140],["T_NS_SEPARATOR","\\",140],["T_STRING","TimezoneInterface",140],["T_WHITESPACE"," ",140],["T_VARIABLE","$timezone",140],",",["T_WHITESPACE","\n        ",140],["T_NS_SEPARATOR","\\",141],["T_STRING","Magento",141],["T_NS_SEPARATOR","\\",141],["T_STRING","Framework",141],["T_NS_SEPARATOR","\\",141],["T_STRING","Process",141],["T_NS_SEPARATOR","\\",141],["T_STRING","PhpExecutableFinderFactory",141],["T_WHITESPACE"," ",141],["T_VARIABLE","$phpExecutableFinderFactory",141],",",["T_WHITESPACE","\n        ",141],["T_NS_SEPARATOR","\\",142],["T_STRING","Psr",142],["T_NS_SEPARATOR","\\",142],["T_STRING","Log",142],["T_NS_SEPARATOR","\\",142],["T_STRING","LoggerInterface",142],["T_WHITESPACE"," ",142],["T_VARIABLE","$logger",142],",",["T_WHITESPACE","\n        ",142],["T_NS_SEPARATOR","\\",143],["T_STRING","Magento",143],["T_NS_SEPARATOR","\\",143],["T_STRING","Framework",143],["T_NS_SEPARATOR","\\",143],["T_STRING","App",143],["T_NS_SEPARATOR","\\",143],["T_STRING","State",143],["T_WHITESPACE"," ",143],["T_VARIABLE","$state",143],["T_WHITESPACE","\n    ",143],")",["T_WHITESPACE"," ",144],"{",["T_WHITESPACE","\n        ",144],["T_VARIABLE","$this",145],["T_OBJECT_OPERATOR","->",145],["T_STRING","_objectManager",145],["T_WHITESPACE"," ",145],"=",["T_WHITESPACE"," ",145],["T_VARIABLE","$objectManager",145],";",["T_WHITESPACE","\n        ",145],["T_VARIABLE","$this",146],["T_OBJECT_OPERATOR","->",146],["T_STRING","_scheduleFactory",146],["T_WHITESPACE"," ",146],"=",["T_WHITESPACE"," ",146],["T_VARIABLE","$scheduleFactory",146],";",["T_WHITESPACE","\n        ",146],["T_VARIABLE","$this",147],["T_OBJECT_OPERATOR","->",147],["T_STRING","_cache",147],["T_WHITESPACE"," ",147],"=",["T_WHITESPACE"," ",147],["T_VARIABLE","$cache",147],";",["T_WHITESPACE","\n        ",147],["T_VARIABLE","$this",148],["T_OBJECT_OPERATOR","->",148],["T_STRING","_config",148],["T_WHITESPACE"," ",148],"=",["T_WHITESPACE"," ",148],["T_VARIABLE","$config",148],";",["T_WHITESPACE","\n        ",148],["T_VARIABLE","$this",149],["T_OBJECT_OPERATOR","->",149],["T_STRING","_scopeConfig",149],["T_WHITESPACE"," ",149],"=",["T_WHITESPACE"," ",149],["T_VARIABLE","$scopeConfig",149],";",["T_WHITESPACE","\n        ",149],["T_VARIABLE","$this",150],["T_OBJECT_OPERATOR","->",150],["T_STRING","_request",150],["T_WHITESPACE"," ",150],"=",["T_WHITESPACE"," ",150],["T_VARIABLE","$request",150],";",["T_WHITESPACE","\n        ",150],["T_VARIABLE","$this",151],["T_OBJECT_OPERATOR","->",151],["T_STRING","_shell",151],["T_WHITESPACE"," ",151],"=",["T_WHITESPACE"," ",151],["T_VARIABLE","$shell",151],";",["T_WHITESPACE","\n        ",151],["T_VARIABLE","$this",152],["T_OBJECT_OPERATOR","->",152],["T_STRING","timezone",152],["T_WHITESPACE"," ",152],"=",["T_WHITESPACE"," ",152],["T_VARIABLE","$timezone",152],";",["T_WHITESPACE","\n        ",152],["T_VARIABLE","$this",153],["T_OBJECT_OPERATOR","->",153],["T_STRING","phpExecutableFinder",153],["T_WHITESPACE"," ",153],"=",["T_WHITESPACE"," ",153],["T_VARIABLE","$phpExecutableFinderFactory",153],["T_OBJECT_OPERATOR","->",153],["T_STRING","create",153],"(",")",";",["T_WHITESPACE","\n        ",153],["T_VARIABLE","$this",154],["T_OBJECT_OPERATOR","->",154],["T_STRING","logger",154],["T_WHITESPACE"," ",154],"=",["T_WHITESPACE"," ",154],["T_VARIABLE","$logger",154],";",["T_WHITESPACE","\n        ",154],["T_VARIABLE","$this",155],["T_OBJECT_OPERATOR","->",155],["T_STRING","state",155],["T_WHITESPACE"," ",155],"=",["T_WHITESPACE"," ",155],["T_VARIABLE","$state",155],";",["T_WHITESPACE","\n    ",155],"}",["T_WHITESPACE","\n\n    ",156],["T_DOC_COMMENT","\/**\n     * Process cron queue\n     * Generate tasks schedule\n     * Cleanup tasks schedule\n     *\n     * @param \\Magento\\Framework\\Event\\Observer $observer\n     * @return void\n     * @SuppressWarnings(PHPMD.CyclomaticComplexity)\n     * @SuppressWarnings(PHPMD.NPathComplexity)\n     * @SuppressWarnings(PHPMD.UnusedFormalParameter)\n     *\/",158],["T_WHITESPACE","\n    ",168],["T_PUBLIC","public",169],["T_WHITESPACE"," ",169],["T_FUNCTION","function",169],["T_WHITESPACE"," ",169],["T_STRING","execute",169],"(",["T_NS_SEPARATOR","\\",169],["T_STRING","Magento",169],["T_NS_SEPARATOR","\\",169],["T_STRING","Framework",169],["T_NS_SEPARATOR","\\",169],["T_STRING","Event",169],["T_NS_SEPARATOR","\\",169],["T_STRING","Observer",169],["T_WHITESPACE"," ",169],["T_VARIABLE","$observer",169],")",["T_WHITESPACE","\n    ",169],"{",["T_WHITESPACE","\n        ",170],["T_VARIABLE","$pendingJobs",171],["T_WHITESPACE"," ",171],"=",["T_WHITESPACE"," ",171],["T_VARIABLE","$this",171],["T_OBJECT_OPERATOR","->",171],["T_STRING","_getPendingSchedules",171],"(",")",";",["T_WHITESPACE","\n        ",171],["T_VARIABLE","$currentTime",172],["T_WHITESPACE"," ",172],"=",["T_WHITESPACE"," ",172],["T_VARIABLE","$this",172],["T_OBJECT_OPERATOR","->",172],["T_STRING","timezone",172],["T_OBJECT_OPERATOR","->",172],["T_STRING","scopeTimeStamp",172],"(",")",";",["T_WHITESPACE","\n        ",172],["T_VARIABLE","$jobGroupsRoot",173],["T_WHITESPACE"," ",173],"=",["T_WHITESPACE"," ",173],["T_VARIABLE","$this",173],["T_OBJECT_OPERATOR","->",173],["T_STRING","_config",173],["T_OBJECT_OPERATOR","->",173],["T_STRING","getJobs",173],"(",")",";",["T_WHITESPACE","\n\n        ",173],["T_VARIABLE","$phpPath",175],["T_WHITESPACE"," ",175],"=",["T_WHITESPACE"," ",175],["T_VARIABLE","$this",175],["T_OBJECT_OPERATOR","->",175],["T_STRING","phpExecutableFinder",175],["T_OBJECT_OPERATOR","->",175],["T_STRING","find",175],"(",")",["T_WHITESPACE"," ",175],"?",":",["T_WHITESPACE"," ",175],["T_CONSTANT_ENCAPSED_STRING","'php'",175],";",["T_WHITESPACE","\n\n        ",175],["T_FOREACH","foreach",177],["T_WHITESPACE"," ",177],"(",["T_VARIABLE","$jobGroupsRoot",177],["T_WHITESPACE"," ",177],["T_AS","as",177],["T_WHITESPACE"," ",177],["T_VARIABLE","$groupId",177],["T_WHITESPACE"," ",177],["T_DOUBLE_ARROW","=>",177],["T_WHITESPACE"," ",177],["T_VARIABLE","$jobsRoot",177],")",["T_WHITESPACE"," ",177],"{",["T_WHITESPACE","\n            ",177],["T_IF","if",178],["T_WHITESPACE"," ",178],"(",["T_VARIABLE","$this",178],["T_OBJECT_OPERATOR","->",178],["T_STRING","_request",178],["T_OBJECT_OPERATOR","->",178],["T_STRING","getParam",178],"(",["T_CONSTANT_ENCAPSED_STRING","'group'",178],")",["T_WHITESPACE"," ",178],["T_IS_NOT_IDENTICAL","!==",178],["T_WHITESPACE"," ",178],["T_STRING","null",178],["T_WHITESPACE","\n                ",178],["T_BOOLEAN_AND","&&",179],["T_WHITESPACE"," ",179],["T_VARIABLE","$this",179],["T_OBJECT_OPERATOR","->",179],["T_STRING","_request",179],["T_OBJECT_OPERATOR","->",179],["T_STRING","getParam",179],"(",["T_CONSTANT_ENCAPSED_STRING","'group'",179],")",["T_WHITESPACE"," ",179],["T_IS_NOT_IDENTICAL","!==",179],["T_WHITESPACE"," ",179],["T_CONSTANT_ENCAPSED_STRING","'\\''",179],["T_WHITESPACE"," ",179],".",["T_WHITESPACE"," ",179],"(",["T_VARIABLE","$groupId",179],")",["T_WHITESPACE"," ",179],".",["T_WHITESPACE"," ",179],["T_CONSTANT_ENCAPSED_STRING","'\\''",179],["T_WHITESPACE","\n                ",179],["T_BOOLEAN_AND","&&",180],["T_WHITESPACE"," ",180],["T_VARIABLE","$this",180],["T_OBJECT_OPERATOR","->",180],["T_STRING","_request",180],["T_OBJECT_OPERATOR","->",180],["T_STRING","getParam",180],"(",["T_CONSTANT_ENCAPSED_STRING","'group'",180],")",["T_WHITESPACE"," ",180],["T_IS_NOT_IDENTICAL","!==",180],["T_WHITESPACE"," ",180],["T_VARIABLE","$groupId",180],")",["T_WHITESPACE"," ",180],"{",["T_WHITESPACE","\n                ",180],["T_CONTINUE","continue",181],";",["T_WHITESPACE","\n            ",181],"}",["T_WHITESPACE","\n            ",182],["T_IF","if",183],["T_WHITESPACE"," ",183],"(","(",["T_VARIABLE","$this",183],["T_OBJECT_OPERATOR","->",183],["T_STRING","_request",183],["T_OBJECT_OPERATOR","->",183],["T_STRING","getParam",183],"(",["T_STRING","self",183],["T_DOUBLE_COLON","::",183],["T_STRING","STANDALONE_PROCESS_STARTED",183],")",["T_WHITESPACE"," ",183],["T_IS_NOT_IDENTICAL","!==",183],["T_WHITESPACE"," ",183],["T_CONSTANT_ENCAPSED_STRING","'1'",183],")",["T_WHITESPACE"," ",183],["T_BOOLEAN_AND","&&",183],["T_WHITESPACE"," ",183],"(",["T_WHITESPACE","\n                    ",183],["T_VARIABLE","$this",184],["T_OBJECT_OPERATOR","->",184],["T_STRING","_scopeConfig",184],["T_OBJECT_OPERATOR","->",184],["T_STRING","getValue",184],"(",["T_WHITESPACE","\n                        ",184],["T_CONSTANT_ENCAPSED_STRING","'system\/cron\/'",185],["T_WHITESPACE"," ",185],".",["T_WHITESPACE"," ",185],["T_VARIABLE","$groupId",185],["T_WHITESPACE"," ",185],".",["T_WHITESPACE"," ",185],["T_CONSTANT_ENCAPSED_STRING","'\/use_separate_process'",185],",",["T_WHITESPACE","\n                        ",185],["T_NS_SEPARATOR","\\",186],["T_STRING","Magento",186],["T_NS_SEPARATOR","\\",186],["T_STRING","Store",186],["T_NS_SEPARATOR","\\",186],["T_STRING","Model",186],["T_NS_SEPARATOR","\\",186],["T_STRING","ScopeInterface",186],["T_DOUBLE_COLON","::",186],["T_STRING","SCOPE_STORE",186],["T_WHITESPACE","\n                    ",186],")",["T_WHITESPACE"," ",187],["T_IS_EQUAL","==",187],["T_WHITESPACE"," ",187],["T_LNUMBER","1",187],["T_WHITESPACE","\n                ",187],")",")",["T_WHITESPACE"," ",188],"{",["T_WHITESPACE","\n                ",188],["T_VARIABLE","$this",189],["T_OBJECT_OPERATOR","->",189],["T_STRING","_shell",189],["T_OBJECT_OPERATOR","->",189],["T_STRING","execute",189],"(",["T_WHITESPACE","\n                    ",189],["T_VARIABLE","$phpPath",190],["T_WHITESPACE"," ",190],".",["T_WHITESPACE"," ",190],["T_CONSTANT_ENCAPSED_STRING","' %s cron:run --group='",190],["T_WHITESPACE"," ",190],".",["T_WHITESPACE"," ",190],["T_VARIABLE","$groupId",190],["T_WHITESPACE"," ",190],".",["T_WHITESPACE"," ",190],["T_CONSTANT_ENCAPSED_STRING","' --'",190],["T_WHITESPACE"," ",190],".",["T_WHITESPACE"," ",190],["T_STRING","CLI",190],["T_DOUBLE_COLON","::",190],["T_STRING","INPUT_KEY_BOOTSTRAP",190],["T_WHITESPACE"," ",190],".",["T_WHITESPACE"," ",190],["T_CONSTANT_ENCAPSED_STRING","'='",190],["T_WHITESPACE","\n                    ",190],".",["T_WHITESPACE"," ",191],["T_STRING","self",191],["T_DOUBLE_COLON","::",191],["T_STRING","STANDALONE_PROCESS_STARTED",191],["T_WHITESPACE"," ",191],".",["T_WHITESPACE"," ",191],["T_CONSTANT_ENCAPSED_STRING","'=1'",191],",",["T_WHITESPACE","\n                    ",191],"[",["T_WHITESPACE","\n                        ",192],["T_STRING","BP",193],["T_WHITESPACE"," ",193],".",["T_WHITESPACE"," ",193],["T_CONSTANT_ENCAPSED_STRING","'\/bin\/magento'",193],["T_WHITESPACE","\n                    ",193],"]",["T_WHITESPACE","\n                ",194],")",";",["T_WHITESPACE","\n                ",195],["T_CONTINUE","continue",196],";",["T_WHITESPACE","\n            ",196],"}",["T_WHITESPACE","\n\n            ",197],["T_FOREACH","foreach",199],["T_WHITESPACE"," ",199],"(",["T_VARIABLE","$pendingJobs",199],["T_WHITESPACE"," ",199],["T_AS","as",199],["T_WHITESPACE"," ",199],["T_VARIABLE","$schedule",199],")",["T_WHITESPACE"," ",199],"{",["T_WHITESPACE","\n                ",199],["T_VARIABLE","$jobConfig",200],["T_WHITESPACE"," ",200],"=",["T_WHITESPACE"," ",200],["T_ISSET","isset",200],"(",["T_VARIABLE","$jobsRoot",200],"[",["T_VARIABLE","$schedule",200],["T_OBJECT_OPERATOR","->",200],["T_STRING","getJobCode",200],"(",")","]",")",["T_WHITESPACE"," ",200],"?",["T_WHITESPACE"," ",200],["T_VARIABLE","$jobsRoot",200],"[",["T_VARIABLE","$schedule",200],["T_OBJECT_OPERATOR","->",200],["T_STRING","getJobCode",200],"(",")","]",["T_WHITESPACE"," ",200],":",["T_WHITESPACE"," ",200],["T_STRING","null",200],";",["T_WHITESPACE","\n                ",200],["T_IF","if",201],["T_WHITESPACE"," ",201],"(","!",["T_VARIABLE","$jobConfig",201],")",["T_WHITESPACE"," ",201],"{",["T_WHITESPACE","\n                    ",201],["T_CONTINUE","continue",202],";",["T_WHITESPACE","\n                ",202],"}",["T_WHITESPACE","\n\n                ",203],["T_VARIABLE","$scheduledTime",205],["T_WHITESPACE"," ",205],"=",["T_WHITESPACE"," ",205],["T_STRING","strtotime",205],"(",["T_VARIABLE","$schedule",205],["T_OBJECT_OPERATOR","->",205],["T_STRING","getScheduledAt",205],"(",")",")",";",["T_WHITESPACE","\n                ",205],["T_IF","if",206],["T_WHITESPACE"," ",206],"(",["T_VARIABLE","$scheduledTime",206],["T_WHITESPACE"," ",206],">",["T_WHITESPACE"," ",206],["T_VARIABLE","$currentTime",206],")",["T_WHITESPACE"," ",206],"{",["T_WHITESPACE","\n                    ",206],["T_CONTINUE","continue",207],";",["T_WHITESPACE","\n                ",207],"}",["T_WHITESPACE","\n\n                ",208],["T_TRY","try",210],["T_WHITESPACE"," ",210],"{",["T_WHITESPACE","\n                    ",210],["T_IF","if",211],["T_WHITESPACE"," ",211],"(",["T_VARIABLE","$schedule",211],["T_OBJECT_OPERATOR","->",211],["T_STRING","tryLockJob",211],"(",")",")",["T_WHITESPACE"," ",211],"{",["T_WHITESPACE","\n                        ",211],["T_VARIABLE","$this",212],["T_OBJECT_OPERATOR","->",212],["T_STRING","_runJob",212],"(",["T_VARIABLE","$scheduledTime",212],",",["T_WHITESPACE"," ",212],["T_VARIABLE","$currentTime",212],",",["T_WHITESPACE"," ",212],["T_VARIABLE","$jobConfig",212],",",["T_WHITESPACE"," ",212],["T_VARIABLE","$schedule",212],",",["T_WHITESPACE"," ",212],["T_VARIABLE","$groupId",212],")",";",["T_WHITESPACE","\n                    ",212],"}",["T_WHITESPACE","\n                ",213],"}",["T_WHITESPACE"," ",214],["T_CATCH","catch",214],["T_WHITESPACE"," ",214],"(",["T_NS_SEPARATOR","\\",214],["T_STRING","Exception",214],["T_WHITESPACE"," ",214],["T_VARIABLE","$e",214],")",["T_WHITESPACE"," ",214],"{",["T_WHITESPACE","\n                    ",214],["T_VARIABLE","$schedule",215],["T_OBJECT_OPERATOR","->",215],["T_STRING","setMessages",215],"(",["T_VARIABLE","$e",215],["T_OBJECT_OPERATOR","->",215],["T_STRING","getMessage",215],"(",")",")",";",["T_WHITESPACE","\n                    ",215],["T_IF","if",216],["T_WHITESPACE"," ",216],"(",["T_VARIABLE","$schedule",216],["T_OBJECT_OPERATOR","->",216],["T_STRING","getStatus",216],"(",")",["T_WHITESPACE"," ",216],["T_IS_IDENTICAL","===",216],["T_WHITESPACE"," ",216],["T_STRING","Schedule",216],["T_DOUBLE_COLON","::",216],["T_STRING","STATUS_ERROR",216],")",["T_WHITESPACE"," ",216],"{",["T_WHITESPACE","\n                        ",216],["T_VARIABLE","$this",217],["T_OBJECT_OPERATOR","->",217],["T_STRING","logger",217],["T_OBJECT_OPERATOR","->",217],["T_STRING","critical",217],"(",["T_VARIABLE","$e",217],")",";",["T_WHITESPACE","\n                    ",217],"}",["T_WHITESPACE","\n                    ",218],["T_IF","if",219],["T_WHITESPACE"," ",219],"(",["T_VARIABLE","$schedule",219],["T_OBJECT_OPERATOR","->",219],["T_STRING","getStatus",219],"(",")",["T_WHITESPACE"," ",219],["T_IS_IDENTICAL","===",219],["T_WHITESPACE"," ",219],["T_STRING","Schedule",219],["T_DOUBLE_COLON","::",219],["T_STRING","STATUS_MISSED",219],["T_WHITESPACE","\n                        ",219],["T_BOOLEAN_AND","&&",220],["T_WHITESPACE"," ",220],["T_VARIABLE","$this",220],["T_OBJECT_OPERATOR","->",220],["T_STRING","state",220],["T_OBJECT_OPERATOR","->",220],["T_STRING","getMode",220],"(",")",["T_WHITESPACE"," ",220],["T_IS_IDENTICAL","===",220],["T_WHITESPACE"," ",220],["T_STRING","State",220],["T_DOUBLE_COLON","::",220],["T_STRING","MODE_DEVELOPER",220],["T_WHITESPACE","\n                    ",220],")",["T_WHITESPACE"," ",221],"{",["T_WHITESPACE","\n                        ",221],["T_VARIABLE","$this",222],["T_OBJECT_OPERATOR","->",222],["T_STRING","logger",222],["T_OBJECT_OPERATOR","->",222],["T_STRING","info",222],"(",["T_WHITESPACE","\n                            ",222],["T_STRING","sprintf",223],"(",["T_WHITESPACE","\n                                ",223],["T_CONSTANT_ENCAPSED_STRING","\"%s Schedule Id: %s Job Code: %s\"",224],",",["T_WHITESPACE","\n                                ",224],["T_VARIABLE","$schedule",225],["T_OBJECT_OPERATOR","->",225],["T_STRING","getMessages",225],"(",")",",",["T_WHITESPACE","\n                                ",225],["T_VARIABLE","$schedule",226],["T_OBJECT_OPERATOR","->",226],["T_STRING","getScheduleId",226],"(",")",",",["T_WHITESPACE","\n                                ",226],["T_VARIABLE","$schedule",227],["T_OBJECT_OPERATOR","->",227],["T_STRING","getJobCode",227],"(",")",["T_WHITESPACE","\n                            ",227],")",["T_WHITESPACE","\n                        ",228],")",";",["T_WHITESPACE","\n                    ",229],"}",["T_WHITESPACE","\n                ",230],"}",["T_WHITESPACE","\n                ",231],["T_VARIABLE","$schedule",232],["T_OBJECT_OPERATOR","->",232],["T_STRING","save",232],"(",")",";",["T_WHITESPACE","\n            ",232],"}",["T_WHITESPACE","\n\n            ",233],["T_VARIABLE","$this",235],["T_OBJECT_OPERATOR","->",235],["T_STRING","_generate",235],"(",["T_VARIABLE","$groupId",235],")",";",["T_WHITESPACE","\n            ",235],["T_VARIABLE","$this",236],["T_OBJECT_OPERATOR","->",236],["T_STRING","_cleanup",236],"(",["T_VARIABLE","$groupId",236],")",";",["T_WHITESPACE","\n        ",236],"}",["T_WHITESPACE","\n    ",237],"}",["T_WHITESPACE","\n\n    ",238],["T_DOC_COMMENT","\/**\n     * Execute job by calling specific class::method\n     *\n     * @param int $scheduledTime\n     * @param int $currentTime\n     * @param string[] $jobConfig\n     * @param Schedule $schedule\n     * @param string $groupId\n     * @return void\n     * @throws \\Exception\n     *\/",240],["T_WHITESPACE","\n    ",250],["T_PROTECTED","protected",251],["T_WHITESPACE"," ",251],["T_FUNCTION","function",251],["T_WHITESPACE"," ",251],["T_STRING","_runJob",251],"(",["T_VARIABLE","$scheduledTime",251],",",["T_WHITESPACE"," ",251],["T_VARIABLE","$currentTime",251],",",["T_WHITESPACE"," ",251],["T_VARIABLE","$jobConfig",251],",",["T_WHITESPACE"," ",251],["T_VARIABLE","$schedule",251],",",["T_WHITESPACE"," ",251],["T_VARIABLE","$groupId",251],")",["T_WHITESPACE","\n    ",251],"{",["T_WHITESPACE","\n        ",252],["T_VARIABLE","$scheduleLifetime",253],["T_WHITESPACE"," ",253],"=",["T_WHITESPACE"," ",253],["T_INT_CAST","(int)",253],["T_VARIABLE","$this",253],["T_OBJECT_OPERATOR","->",253],["T_STRING","_scopeConfig",253],["T_OBJECT_OPERATOR","->",253],["T_STRING","getValue",253],"(",["T_WHITESPACE","\n            ",253],["T_CONSTANT_ENCAPSED_STRING","'system\/cron\/'",254],["T_WHITESPACE"," ",254],".",["T_WHITESPACE"," ",254],["T_VARIABLE","$groupId",254],["T_WHITESPACE"," ",254],".",["T_WHITESPACE"," ",254],["T_CONSTANT_ENCAPSED_STRING","'\/'",254],["T_WHITESPACE"," ",254],".",["T_WHITESPACE"," ",254],["T_STRING","self",254],["T_DOUBLE_COLON","::",254],["T_STRING","XML_PATH_SCHEDULE_LIFETIME",254],",",["T_WHITESPACE","\n            ",254],["T_NS_SEPARATOR","\\",255],["T_STRING","Magento",255],["T_NS_SEPARATOR","\\",255],["T_STRING","Store",255],["T_NS_SEPARATOR","\\",255],["T_STRING","Model",255],["T_NS_SEPARATOR","\\",255],["T_STRING","ScopeInterface",255],["T_DOUBLE_COLON","::",255],["T_STRING","SCOPE_STORE",255],["T_WHITESPACE","\n        ",255],")",";",["T_WHITESPACE","\n        ",256],["T_VARIABLE","$scheduleLifetime",257],["T_WHITESPACE"," ",257],"=",["T_WHITESPACE"," ",257],["T_VARIABLE","$scheduleLifetime",257],["T_WHITESPACE"," ",257],"*",["T_WHITESPACE"," ",257],["T_STRING","self",257],["T_DOUBLE_COLON","::",257],["T_STRING","SECONDS_IN_MINUTE",257],";",["T_WHITESPACE","\n        ",257],["T_IF","if",258],["T_WHITESPACE"," ",258],"(",["T_VARIABLE","$scheduledTime",258],["T_WHITESPACE"," ",258],"<",["T_WHITESPACE"," ",258],["T_VARIABLE","$currentTime",258],["T_WHITESPACE"," ",258],"-",["T_WHITESPACE"," ",258],["T_VARIABLE","$scheduleLifetime",258],")",["T_WHITESPACE"," ",258],"{",["T_WHITESPACE","\n            ",258],["T_VARIABLE","$schedule",259],["T_OBJECT_OPERATOR","->",259],["T_STRING","setStatus",259],"(",["T_STRING","Schedule",259],["T_DOUBLE_COLON","::",259],["T_STRING","STATUS_MISSED",259],")",";",["T_WHITESPACE","\n            ",259],["T_THROW","throw",260],["T_WHITESPACE"," ",260],["T_NEW","new",260],["T_WHITESPACE"," ",260],["T_NS_SEPARATOR","\\",260],["T_STRING","Exception",260],"(",["T_CONSTANT_ENCAPSED_STRING","'Too late for the schedule'",260],")",";",["T_WHITESPACE","\n        ",260],"}",["T_WHITESPACE","\n\n        ",261],["T_IF","if",263],["T_WHITESPACE"," ",263],"(","!",["T_ISSET","isset",263],"(",["T_VARIABLE","$jobConfig",263],"[",["T_CONSTANT_ENCAPSED_STRING","'instance'",263],"]",",",["T_WHITESPACE"," ",263],["T_VARIABLE","$jobConfig",263],"[",["T_CONSTANT_ENCAPSED_STRING","'method'",263],"]",")",")",["T_WHITESPACE"," ",263],"{",["T_WHITESPACE","\n            ",263],["T_VARIABLE","$schedule",264],["T_OBJECT_OPERATOR","->",264],["T_STRING","setStatus",264],"(",["T_STRING","Schedule",264],["T_DOUBLE_COLON","::",264],["T_STRING","STATUS_ERROR",264],")",";",["T_WHITESPACE","\n            ",264],["T_THROW","throw",265],["T_WHITESPACE"," ",265],["T_NEW","new",265],["T_WHITESPACE"," ",265],["T_NS_SEPARATOR","\\",265],["T_STRING","Exception",265],"(",["T_CONSTANT_ENCAPSED_STRING","'No callbacks found'",265],")",";",["T_WHITESPACE","\n        ",265],"}",["T_WHITESPACE","\n        ",266],["T_VARIABLE","$model",267],["T_WHITESPACE"," ",267],"=",["T_WHITESPACE"," ",267],["T_VARIABLE","$this",267],["T_OBJECT_OPERATOR","->",267],["T_STRING","_objectManager",267],["T_OBJECT_OPERATOR","->",267],["T_STRING","create",267],"(",["T_VARIABLE","$jobConfig",267],"[",["T_CONSTANT_ENCAPSED_STRING","'instance'",267],"]",")",";",["T_WHITESPACE","\n        ",267],["T_VARIABLE","$callback",268],["T_WHITESPACE"," ",268],"=",["T_WHITESPACE"," ",268],"[",["T_VARIABLE","$model",268],",",["T_WHITESPACE"," ",268],["T_VARIABLE","$jobConfig",268],"[",["T_CONSTANT_ENCAPSED_STRING","'method'",268],"]","]",";",["T_WHITESPACE","\n        ",268],["T_IF","if",269],["T_WHITESPACE"," ",269],"(","!",["T_STRING","is_callable",269],"(",["T_VARIABLE","$callback",269],")",")",["T_WHITESPACE"," ",269],"{",["T_WHITESPACE","\n            ",269],["T_VARIABLE","$schedule",270],["T_OBJECT_OPERATOR","->",270],["T_STRING","setStatus",270],"(",["T_STRING","Schedule",270],["T_DOUBLE_COLON","::",270],["T_STRING","STATUS_ERROR",270],")",";",["T_WHITESPACE","\n            ",270],["T_THROW","throw",271],["T_WHITESPACE"," ",271],["T_NEW","new",271],["T_WHITESPACE"," ",271],["T_NS_SEPARATOR","\\",271],["T_STRING","Exception",271],"(",["T_WHITESPACE","\n                ",271],["T_STRING","sprintf",272],"(",["T_CONSTANT_ENCAPSED_STRING","'Invalid callback: %s::%s can\\'t be called'",272],",",["T_WHITESPACE"," ",272],["T_VARIABLE","$jobConfig",272],"[",["T_CONSTANT_ENCAPSED_STRING","'instance'",272],"]",",",["T_WHITESPACE"," ",272],["T_VARIABLE","$jobConfig",272],"[",["T_CONSTANT_ENCAPSED_STRING","'method'",272],"]",")",["T_WHITESPACE","\n            ",272],")",";",["T_WHITESPACE","\n        ",273],"}",["T_WHITESPACE","\n\n        ",274],["T_VARIABLE","$schedule",276],["T_OBJECT_OPERATOR","->",276],["T_STRING","setExecutedAt",276],"(",["T_STRING","strftime",276],"(",["T_CONSTANT_ENCAPSED_STRING","'%Y-%m-%d %H:%M:%S'",276],",",["T_WHITESPACE"," ",276],["T_VARIABLE","$this",276],["T_OBJECT_OPERATOR","->",276],["T_STRING","timezone",276],["T_OBJECT_OPERATOR","->",276],["T_STRING","scopeTimeStamp",276],"(",")",")",")",["T_OBJECT_OPERATOR","->",276],["T_STRING","save",276],"(",")",";",["T_WHITESPACE","\n\n        ",276],["T_TRY","try",278],["T_WHITESPACE"," ",278],"{",["T_WHITESPACE","\n            ",278],["T_STRING","call_user_func_array",279],"(",["T_VARIABLE","$callback",279],",",["T_WHITESPACE"," ",279],"[",["T_VARIABLE","$schedule",279],"]",")",";",["T_WHITESPACE","\n        ",279],"}",["T_WHITESPACE"," ",280],["T_CATCH","catch",280],["T_WHITESPACE"," ",280],"(",["T_NS_SEPARATOR","\\",280],["T_STRING","Exception",280],["T_WHITESPACE"," ",280],["T_VARIABLE","$e",280],")",["T_WHITESPACE"," ",280],"{",["T_WHITESPACE","\n            ",280],["T_VARIABLE","$schedule",281],["T_OBJECT_OPERATOR","->",281],["T_STRING","setStatus",281],"(",["T_STRING","Schedule",281],["T_DOUBLE_COLON","::",281],["T_STRING","STATUS_ERROR",281],")",";",["T_WHITESPACE","\n            ",281],["T_THROW","throw",282],["T_WHITESPACE"," ",282],["T_VARIABLE","$e",282],";",["T_WHITESPACE","\n        ",282],"}",["T_WHITESPACE","\n\n        ",283],["T_VARIABLE","$schedule",285],["T_OBJECT_OPERATOR","->",285],["T_STRING","setStatus",285],"(",["T_STRING","Schedule",285],["T_DOUBLE_COLON","::",285],["T_STRING","STATUS_SUCCESS",285],")",["T_OBJECT_OPERATOR","->",285],["T_STRING","setFinishedAt",285],"(",["T_STRING","strftime",285],"(",["T_WHITESPACE","\n            ",285],["T_CONSTANT_ENCAPSED_STRING","'%Y-%m-%d %H:%M:%S'",286],",",["T_WHITESPACE","\n            ",286],["T_VARIABLE","$this",287],["T_OBJECT_OPERATOR","->",287],["T_STRING","timezone",287],["T_OBJECT_OPERATOR","->",287],["T_STRING","scopeTimeStamp",287],"(",")",["T_WHITESPACE","\n        ",287],")",")",";",["T_WHITESPACE","\n    ",288],"}",["T_WHITESPACE","\n\n    ",289],["T_DOC_COMMENT","\/**\n     * Return job collection from data base with status 'pending'\n     *\n     * @return \\Magento\\Cron\\Model\\ResourceModel\\Schedule\\Collection\n     *\/",291],["T_WHITESPACE","\n    ",295],["T_PROTECTED","protected",296],["T_WHITESPACE"," ",296],["T_FUNCTION","function",296],["T_WHITESPACE"," ",296],["T_STRING","_getPendingSchedules",296],"(",")",["T_WHITESPACE","\n    ",296],"{",["T_WHITESPACE","\n        ",297],["T_IF","if",298],["T_WHITESPACE"," ",298],"(","!",["T_VARIABLE","$this",298],["T_OBJECT_OPERATOR","->",298],["T_STRING","_pendingSchedules",298],")",["T_WHITESPACE"," ",298],"{",["T_WHITESPACE","\n            ",298],["T_VARIABLE","$this",299],["T_OBJECT_OPERATOR","->",299],["T_STRING","_pendingSchedules",299],["T_WHITESPACE"," ",299],"=",["T_WHITESPACE"," ",299],["T_VARIABLE","$this",299],["T_OBJECT_OPERATOR","->",299],["T_STRING","_scheduleFactory",299],["T_OBJECT_OPERATOR","->",299],["T_STRING","create",299],"(",")",["T_OBJECT_OPERATOR","->",299],["T_STRING","getCollection",299],"(",")",["T_OBJECT_OPERATOR","->",299],["T_STRING","addFieldToFilter",299],"(",["T_WHITESPACE","\n                ",299],["T_CONSTANT_ENCAPSED_STRING","'status'",300],",",["T_WHITESPACE","\n                ",300],["T_STRING","Schedule",301],["T_DOUBLE_COLON","::",301],["T_STRING","STATUS_PENDING",301],["T_WHITESPACE","\n            ",301],")",["T_OBJECT_OPERATOR","->",302],["T_STRING","load",302],"(",")",";",["T_WHITESPACE","\n        ",302],"}",["T_WHITESPACE","\n        ",303],["T_RETURN","return",304],["T_WHITESPACE"," ",304],["T_VARIABLE","$this",304],["T_OBJECT_OPERATOR","->",304],["T_STRING","_pendingSchedules",304],";",["T_WHITESPACE","\n    ",304],"}",["T_WHITESPACE","\n\n    ",305],["T_DOC_COMMENT","\/**\n     * Generate cron schedule\n     *\n     * @param string $groupId\n     * @return $this\n     *\/",307],["T_WHITESPACE","\n    ",312],["T_PROTECTED","protected",313],["T_WHITESPACE"," ",313],["T_FUNCTION","function",313],["T_WHITESPACE"," ",313],["T_STRING","_generate",313],"(",["T_VARIABLE","$groupId",313],")",["T_WHITESPACE","\n    ",313],"{",["T_WHITESPACE","\n        ",314],["T_DOC_COMMENT","\/**\n         * check if schedule generation is needed\n         *\/",315],["T_WHITESPACE","\n        ",317],["T_VARIABLE","$lastRun",318],["T_WHITESPACE"," ",318],"=",["T_WHITESPACE"," ",318],["T_INT_CAST","(int)",318],["T_VARIABLE","$this",318],["T_OBJECT_OPERATOR","->",318],["T_STRING","_cache",318],["T_OBJECT_OPERATOR","->",318],["T_STRING","load",318],"(",["T_STRING","self",318],["T_DOUBLE_COLON","::",318],["T_STRING","CACHE_KEY_LAST_SCHEDULE_GENERATE_AT",318],["T_WHITESPACE"," ",318],".",["T_WHITESPACE"," ",318],["T_VARIABLE","$groupId",318],")",";",["T_WHITESPACE","\n        ",318],["T_VARIABLE","$rawSchedulePeriod",319],["T_WHITESPACE"," ",319],"=",["T_WHITESPACE"," ",319],["T_INT_CAST","(int)",319],["T_VARIABLE","$this",319],["T_OBJECT_OPERATOR","->",319],["T_STRING","_scopeConfig",319],["T_OBJECT_OPERATOR","->",319],["T_STRING","getValue",319],"(",["T_WHITESPACE","\n            ",319],["T_CONSTANT_ENCAPSED_STRING","'system\/cron\/'",320],["T_WHITESPACE"," ",320],".",["T_WHITESPACE"," ",320],["T_VARIABLE","$groupId",320],["T_WHITESPACE"," ",320],".",["T_WHITESPACE"," ",320],["T_CONSTANT_ENCAPSED_STRING","'\/'",320],["T_WHITESPACE"," ",320],".",["T_WHITESPACE"," ",320],["T_STRING","self",320],["T_DOUBLE_COLON","::",320],["T_STRING","XML_PATH_SCHEDULE_GENERATE_EVERY",320],",",["T_WHITESPACE","\n            ",320],["T_NS_SEPARATOR","\\",321],["T_STRING","Magento",321],["T_NS_SEPARATOR","\\",321],["T_STRING","Store",321],["T_NS_SEPARATOR","\\",321],["T_STRING","Model",321],["T_NS_SEPARATOR","\\",321],["T_STRING","ScopeInterface",321],["T_DOUBLE_COLON","::",321],["T_STRING","SCOPE_STORE",321],["T_WHITESPACE","\n        ",321],")",";",["T_WHITESPACE","\n        ",322],["T_VARIABLE","$schedulePeriod",323],["T_WHITESPACE"," ",323],"=",["T_WHITESPACE"," ",323],["T_VARIABLE","$rawSchedulePeriod",323],["T_WHITESPACE"," ",323],"*",["T_WHITESPACE"," ",323],["T_STRING","self",323],["T_DOUBLE_COLON","::",323],["T_STRING","SECONDS_IN_MINUTE",323],";",["T_WHITESPACE","\n        ",323],["T_IF","if",324],["T_WHITESPACE"," ",324],"(",["T_VARIABLE","$lastRun",324],["T_WHITESPACE"," ",324],">",["T_WHITESPACE"," ",324],["T_VARIABLE","$this",324],["T_OBJECT_OPERATOR","->",324],["T_STRING","timezone",324],["T_OBJECT_OPERATOR","->",324],["T_STRING","scopeTimeStamp",324],"(",")",["T_WHITESPACE"," ",324],"-",["T_WHITESPACE"," ",324],["T_VARIABLE","$schedulePeriod",324],")",["T_WHITESPACE"," ",324],"{",["T_WHITESPACE","\n            ",324],["T_RETURN","return",325],["T_WHITESPACE"," ",325],["T_VARIABLE","$this",325],";",["T_WHITESPACE","\n        ",325],"}",["T_WHITESPACE","\n\n        ",326],["T_VARIABLE","$schedules",328],["T_WHITESPACE"," ",328],"=",["T_WHITESPACE"," ",328],["T_VARIABLE","$this",328],["T_OBJECT_OPERATOR","->",328],["T_STRING","_getPendingSchedules",328],"(",")",";",["T_WHITESPACE","\n        ",328],["T_VARIABLE","$exists",329],["T_WHITESPACE"," ",329],"=",["T_WHITESPACE"," ",329],"[","]",";",["T_WHITESPACE","\n        ",329],["T_DOC_COMMENT","\/** @var Schedule $schedule *\/",330],["T_WHITESPACE","\n        ",330],["T_FOREACH","foreach",331],["T_WHITESPACE"," ",331],"(",["T_VARIABLE","$schedules",331],["T_WHITESPACE"," ",331],["T_AS","as",331],["T_WHITESPACE"," ",331],["T_VARIABLE","$schedule",331],")",["T_WHITESPACE"," ",331],"{",["T_WHITESPACE","\n            ",331],["T_VARIABLE","$exists",332],"[",["T_VARIABLE","$schedule",332],["T_OBJECT_OPERATOR","->",332],["T_STRING","getJobCode",332],"(",")",["T_WHITESPACE"," ",332],".",["T_WHITESPACE"," ",332],["T_CONSTANT_ENCAPSED_STRING","'\/'",332],["T_WHITESPACE"," ",332],".",["T_WHITESPACE"," ",332],["T_VARIABLE","$schedule",332],["T_OBJECT_OPERATOR","->",332],["T_STRING","getScheduledAt",332],"(",")","]",["T_WHITESPACE"," ",332],"=",["T_WHITESPACE"," ",332],["T_LNUMBER","1",332],";",["T_WHITESPACE","\n        ",332],"}",["T_WHITESPACE","\n\n        ",333],["T_DOC_COMMENT","\/**\n         * generate global crontab jobs\n         *\/",335],["T_WHITESPACE","\n        ",337],["T_VARIABLE","$jobs",338],["T_WHITESPACE"," ",338],"=",["T_WHITESPACE"," ",338],["T_VARIABLE","$this",338],["T_OBJECT_OPERATOR","->",338],["T_STRING","_config",338],["T_OBJECT_OPERATOR","->",338],["T_STRING","getJobs",338],"(",")",";",["T_WHITESPACE","\n        ",338],["T_VARIABLE","$this",339],["T_OBJECT_OPERATOR","->",339],["T_STRING","_generateJobs",339],"(",["T_VARIABLE","$jobs",339],"[",["T_VARIABLE","$groupId",339],"]",",",["T_WHITESPACE"," ",339],["T_VARIABLE","$exists",339],",",["T_WHITESPACE"," ",339],["T_VARIABLE","$groupId",339],")",";",["T_WHITESPACE","\n\n        ",339],["T_DOC_COMMENT","\/**\n         * save time schedules generation was ran with no expiration\n         *\/",341],["T_WHITESPACE","\n        ",343],["T_VARIABLE","$this",344],["T_OBJECT_OPERATOR","->",344],["T_STRING","_cache",344],["T_OBJECT_OPERATOR","->",344],["T_STRING","save",344],"(",["T_WHITESPACE","\n            ",344],["T_VARIABLE","$this",345],["T_OBJECT_OPERATOR","->",345],["T_STRING","timezone",345],["T_OBJECT_OPERATOR","->",345],["T_STRING","scopeTimeStamp",345],"(",")",",",["T_WHITESPACE","\n            ",345],["T_STRING","self",346],["T_DOUBLE_COLON","::",346],["T_STRING","CACHE_KEY_LAST_SCHEDULE_GENERATE_AT",346],["T_WHITESPACE"," ",346],".",["T_WHITESPACE"," ",346],["T_VARIABLE","$groupId",346],",",["T_WHITESPACE","\n            ",346],"[",["T_CONSTANT_ENCAPSED_STRING","'crontab'",347],"]",",",["T_WHITESPACE","\n            ",347],["T_STRING","null",348],["T_WHITESPACE","\n        ",348],")",";",["T_WHITESPACE","\n\n        ",349],["T_RETURN","return",351],["T_WHITESPACE"," ",351],["T_VARIABLE","$this",351],";",["T_WHITESPACE","\n    ",351],"}",["T_WHITESPACE","\n\n    ",352],["T_DOC_COMMENT","\/**\n     * Generate jobs for config information\n     *\n     * @param   array $jobs\n     * @param   array $exists\n     * @param   string $groupId\n     * @return  $this\n     *\/",354],["T_WHITESPACE","\n    ",361],["T_PROTECTED","protected",362],["T_WHITESPACE"," ",362],["T_FUNCTION","function",362],["T_WHITESPACE"," ",362],["T_STRING","_generateJobs",362],"(",["T_VARIABLE","$jobs",362],",",["T_WHITESPACE"," ",362],["T_VARIABLE","$exists",362],",",["T_WHITESPACE"," ",362],["T_VARIABLE","$groupId",362],")",["T_WHITESPACE","\n    ",362],"{",["T_WHITESPACE","\n        ",363],["T_FOREACH","foreach",364],["T_WHITESPACE"," ",364],"(",["T_VARIABLE","$jobs",364],["T_WHITESPACE"," ",364],["T_AS","as",364],["T_WHITESPACE"," ",364],["T_VARIABLE","$jobCode",364],["T_WHITESPACE"," ",364],["T_DOUBLE_ARROW","=>",364],["T_WHITESPACE"," ",364],["T_VARIABLE","$jobConfig",364],")",["T_WHITESPACE"," ",364],"{",["T_WHITESPACE","\n            ",364],["T_VARIABLE","$cronExpression",365],["T_WHITESPACE"," ",365],"=",["T_WHITESPACE"," ",365],["T_STRING","null",365],";",["T_WHITESPACE","\n            ",365],["T_IF","if",366],["T_WHITESPACE"," ",366],"(",["T_ISSET","isset",366],"(",["T_VARIABLE","$jobConfig",366],"[",["T_CONSTANT_ENCAPSED_STRING","'config_path'",366],"]",")",")",["T_WHITESPACE"," ",366],"{",["T_WHITESPACE","\n                ",366],["T_VARIABLE","$cronExpression",367],["T_WHITESPACE"," ",367],"=",["T_WHITESPACE"," ",367],["T_VARIABLE","$this",367],["T_OBJECT_OPERATOR","->",367],["T_STRING","getConfigSchedule",367],"(",["T_VARIABLE","$jobConfig",367],")",["T_WHITESPACE"," ",367],"?",":",["T_WHITESPACE"," ",367],["T_STRING","null",367],";",["T_WHITESPACE","\n            ",367],"}",["T_WHITESPACE","\n\n            ",368],["T_IF","if",370],["T_WHITESPACE"," ",370],"(","!",["T_VARIABLE","$cronExpression",370],")",["T_WHITESPACE"," ",370],"{",["T_WHITESPACE","\n                ",370],["T_IF","if",371],["T_WHITESPACE"," ",371],"(",["T_ISSET","isset",371],"(",["T_VARIABLE","$jobConfig",371],"[",["T_CONSTANT_ENCAPSED_STRING","'schedule'",371],"]",")",")",["T_WHITESPACE"," ",371],"{",["T_WHITESPACE","\n                    ",371],["T_VARIABLE","$cronExpression",372],["T_WHITESPACE"," ",372],"=",["T_WHITESPACE"," ",372],["T_VARIABLE","$jobConfig",372],"[",["T_CONSTANT_ENCAPSED_STRING","'schedule'",372],"]",";",["T_WHITESPACE","\n                ",372],"}",["T_WHITESPACE","\n            ",373],"}",["T_WHITESPACE","\n\n            ",374],["T_IF","if",376],["T_WHITESPACE"," ",376],"(","!",["T_VARIABLE","$cronExpression",376],")",["T_WHITESPACE"," ",376],"{",["T_WHITESPACE","\n                ",376],["T_CONTINUE","continue",377],";",["T_WHITESPACE","\n            ",377],"}",["T_WHITESPACE","\n\n            ",378],["T_VARIABLE","$timeInterval",380],["T_WHITESPACE"," ",380],"=",["T_WHITESPACE"," ",380],["T_VARIABLE","$this",380],["T_OBJECT_OPERATOR","->",380],["T_STRING","getScheduleTimeInterval",380],"(",["T_VARIABLE","$groupId",380],")",";",["T_WHITESPACE","\n            ",380],["T_VARIABLE","$this",381],["T_OBJECT_OPERATOR","->",381],["T_STRING","saveSchedule",381],"(",["T_VARIABLE","$jobCode",381],",",["T_WHITESPACE"," ",381],["T_VARIABLE","$cronExpression",381],",",["T_WHITESPACE"," ",381],["T_VARIABLE","$timeInterval",381],",",["T_WHITESPACE"," ",381],["T_VARIABLE","$exists",381],")",";",["T_WHITESPACE","\n        ",381],"}",["T_WHITESPACE","\n        ",382],["T_RETURN","return",383],["T_WHITESPACE"," ",383],["T_VARIABLE","$this",383],";",["T_WHITESPACE","\n    ",383],"}",["T_WHITESPACE","\n\n    ",384],["T_DOC_COMMENT","\/**\n     * Clean existed jobs\n     *\n     * @param string $groupId\n     * @return $this\n     *\/",386],["T_WHITESPACE","\n    ",391],["T_PROTECTED","protected",392],["T_WHITESPACE"," ",392],["T_FUNCTION","function",392],["T_WHITESPACE"," ",392],["T_STRING","_cleanup",392],"(",["T_VARIABLE","$groupId",392],")",["T_WHITESPACE","\n    ",392],"{",["T_WHITESPACE","\n        ",393],["T_COMMENT","\/\/ check if history cleanup is needed\n",394],["T_WHITESPACE","        ",395],["T_VARIABLE","$lastCleanup",395],["T_WHITESPACE"," ",395],"=",["T_WHITESPACE"," ",395],["T_INT_CAST","(int)",395],["T_VARIABLE","$this",395],["T_OBJECT_OPERATOR","->",395],["T_STRING","_cache",395],["T_OBJECT_OPERATOR","->",395],["T_STRING","load",395],"(",["T_STRING","self",395],["T_DOUBLE_COLON","::",395],["T_STRING","CACHE_KEY_LAST_HISTORY_CLEANUP_AT",395],["T_WHITESPACE"," ",395],".",["T_WHITESPACE"," ",395],["T_VARIABLE","$groupId",395],")",";",["T_WHITESPACE","\n        ",395],["T_VARIABLE","$historyCleanUp",396],["T_WHITESPACE"," ",396],"=",["T_WHITESPACE"," ",396],["T_INT_CAST","(int)",396],["T_VARIABLE","$this",396],["T_OBJECT_OPERATOR","->",396],["T_STRING","_scopeConfig",396],["T_OBJECT_OPERATOR","->",396],["T_STRING","getValue",396],"(",["T_WHITESPACE","\n            ",396],["T_CONSTANT_ENCAPSED_STRING","'system\/cron\/'",397],["T_WHITESPACE"," ",397],".",["T_WHITESPACE"," ",397],["T_VARIABLE","$groupId",397],["T_WHITESPACE"," ",397],".",["T_WHITESPACE"," ",397],["T_CONSTANT_ENCAPSED_STRING","'\/'",397],["T_WHITESPACE"," ",397],".",["T_WHITESPACE"," ",397],["T_STRING","self",397],["T_DOUBLE_COLON","::",397],["T_STRING","XML_PATH_HISTORY_CLEANUP_EVERY",397],",",["T_WHITESPACE","\n            ",397],["T_NS_SEPARATOR","\\",398],["T_STRING","Magento",398],["T_NS_SEPARATOR","\\",398],["T_STRING","Store",398],["T_NS_SEPARATOR","\\",398],["T_STRING","Model",398],["T_NS_SEPARATOR","\\",398],["T_STRING","ScopeInterface",398],["T_DOUBLE_COLON","::",398],["T_STRING","SCOPE_STORE",398],["T_WHITESPACE","\n        ",398],")",";",["T_WHITESPACE","\n        ",399],["T_IF","if",400],["T_WHITESPACE"," ",400],"(",["T_VARIABLE","$lastCleanup",400],["T_WHITESPACE"," ",400],">",["T_WHITESPACE"," ",400],["T_VARIABLE","$this",400],["T_OBJECT_OPERATOR","->",400],["T_STRING","timezone",400],["T_OBJECT_OPERATOR","->",400],["T_STRING","scopeTimeStamp",400],"(",")",["T_WHITESPACE"," ",400],"-",["T_WHITESPACE"," ",400],["T_VARIABLE","$historyCleanUp",400],["T_WHITESPACE"," ",400],"*",["T_WHITESPACE"," ",400],["T_STRING","self",400],["T_DOUBLE_COLON","::",400],["T_STRING","SECONDS_IN_MINUTE",400],")",["T_WHITESPACE"," ",400],"{",["T_WHITESPACE","\n            ",400],["T_RETURN","return",401],["T_WHITESPACE"," ",401],["T_VARIABLE","$this",401],";",["T_WHITESPACE","\n        ",401],"}",["T_WHITESPACE","\n\n        ",402],["T_COMMENT","\/\/ check how long the record should stay unprocessed before marked as MISSED\n",404],["T_WHITESPACE","        ",405],["T_VARIABLE","$scheduleLifetime",405],["T_WHITESPACE"," ",405],"=",["T_WHITESPACE"," ",405],["T_INT_CAST","(int)",405],["T_VARIABLE","$this",405],["T_OBJECT_OPERATOR","->",405],["T_STRING","_scopeConfig",405],["T_OBJECT_OPERATOR","->",405],["T_STRING","getValue",405],"(",["T_WHITESPACE","\n            ",405],["T_CONSTANT_ENCAPSED_STRING","'system\/cron\/'",406],["T_WHITESPACE"," ",406],".",["T_WHITESPACE"," ",406],["T_VARIABLE","$groupId",406],["T_WHITESPACE"," ",406],".",["T_WHITESPACE"," ",406],["T_CONSTANT_ENCAPSED_STRING","'\/'",406],["T_WHITESPACE"," ",406],".",["T_WHITESPACE"," ",406],["T_STRING","self",406],["T_DOUBLE_COLON","::",406],["T_STRING","XML_PATH_SCHEDULE_LIFETIME",406],",",["T_WHITESPACE","\n            ",406],["T_NS_SEPARATOR","\\",407],["T_STRING","Magento",407],["T_NS_SEPARATOR","\\",407],["T_STRING","Store",407],["T_NS_SEPARATOR","\\",407],["T_STRING","Model",407],["T_NS_SEPARATOR","\\",407],["T_STRING","ScopeInterface",407],["T_DOUBLE_COLON","::",407],["T_STRING","SCOPE_STORE",407],["T_WHITESPACE","\n        ",407],")",";",["T_WHITESPACE","\n        ",408],["T_VARIABLE","$scheduleLifetime",409],["T_WHITESPACE"," ",409],"=",["T_WHITESPACE"," ",409],["T_VARIABLE","$scheduleLifetime",409],["T_WHITESPACE"," ",409],"*",["T_WHITESPACE"," ",409],["T_STRING","self",409],["T_DOUBLE_COLON","::",409],["T_STRING","SECONDS_IN_MINUTE",409],";",["T_WHITESPACE","\n\n        ",409],["T_DOC_COMMENT","\/**\n         * @var \\Magento\\Cron\\Model\\ResourceModel\\Schedule\\Collection $history\n         *\/",411],["T_WHITESPACE","\n        ",413],["T_VARIABLE","$history",414],["T_WHITESPACE"," ",414],"=",["T_WHITESPACE"," ",414],["T_VARIABLE","$this",414],["T_OBJECT_OPERATOR","->",414],["T_STRING","_scheduleFactory",414],["T_OBJECT_OPERATOR","->",414],["T_STRING","create",414],"(",")",["T_OBJECT_OPERATOR","->",414],["T_STRING","getCollection",414],"(",")",["T_OBJECT_OPERATOR","->",414],["T_STRING","addFieldToFilter",414],"(",["T_WHITESPACE","\n            ",414],["T_CONSTANT_ENCAPSED_STRING","'status'",415],",",["T_WHITESPACE","\n            ",415],"[",["T_CONSTANT_ENCAPSED_STRING","'in'",416],["T_WHITESPACE"," ",416],["T_DOUBLE_ARROW","=>",416],["T_WHITESPACE"," ",416],"[",["T_STRING","Schedule",416],["T_DOUBLE_COLON","::",416],["T_STRING","STATUS_SUCCESS",416],",",["T_WHITESPACE"," ",416],["T_STRING","Schedule",416],["T_DOUBLE_COLON","::",416],["T_STRING","STATUS_MISSED",416],",",["T_WHITESPACE"," ",416],["T_STRING","Schedule",416],["T_DOUBLE_COLON","::",416],["T_STRING","STATUS_ERROR",416],"]","]",["T_WHITESPACE","\n        ",416],")",["T_OBJECT_OPERATOR","->",417],["T_STRING","load",417],"(",")",";",["T_WHITESPACE","\n\n        ",417],["T_VARIABLE","$historySuccess",419],["T_WHITESPACE"," ",419],"=",["T_WHITESPACE"," ",419],["T_INT_CAST","(int)",419],["T_VARIABLE","$this",419],["T_OBJECT_OPERATOR","->",419],["T_STRING","_scopeConfig",419],["T_OBJECT_OPERATOR","->",419],["T_STRING","getValue",419],"(",["T_WHITESPACE","\n            ",419],["T_CONSTANT_ENCAPSED_STRING","'system\/cron\/'",420],["T_WHITESPACE"," ",420],".",["T_WHITESPACE"," ",420],["T_VARIABLE","$groupId",420],["T_WHITESPACE"," ",420],".",["T_WHITESPACE"," ",420],["T_CONSTANT_ENCAPSED_STRING","'\/'",420],["T_WHITESPACE"," ",420],".",["T_WHITESPACE"," ",420],["T_STRING","self",420],["T_DOUBLE_COLON","::",420],["T_STRING","XML_PATH_HISTORY_SUCCESS",420],",",["T_WHITESPACE","\n            ",420],["T_NS_SEPARATOR","\\",421],["T_STRING","Magento",421],["T_NS_SEPARATOR","\\",421],["T_STRING","Store",421],["T_NS_SEPARATOR","\\",421],["T_STRING","Model",421],["T_NS_SEPARATOR","\\",421],["T_STRING","ScopeInterface",421],["T_DOUBLE_COLON","::",421],["T_STRING","SCOPE_STORE",421],["T_WHITESPACE","\n        ",421],")",";",["T_WHITESPACE","\n        ",422],["T_VARIABLE","$historyFailure",423],["T_WHITESPACE"," ",423],"=",["T_WHITESPACE"," ",423],["T_INT_CAST","(int)",423],["T_VARIABLE","$this",423],["T_OBJECT_OPERATOR","->",423],["T_STRING","_scopeConfig",423],["T_OBJECT_OPERATOR","->",423],["T_STRING","getValue",423],"(",["T_WHITESPACE","\n            ",423],["T_CONSTANT_ENCAPSED_STRING","'system\/cron\/'",424],["T_WHITESPACE"," ",424],".",["T_WHITESPACE"," ",424],["T_VARIABLE","$groupId",424],["T_WHITESPACE"," ",424],".",["T_WHITESPACE"," ",424],["T_CONSTANT_ENCAPSED_STRING","'\/'",424],["T_WHITESPACE"," ",424],".",["T_WHITESPACE"," ",424],["T_STRING","self",424],["T_DOUBLE_COLON","::",424],["T_STRING","XML_PATH_HISTORY_FAILURE",424],",",["T_WHITESPACE","\n            ",424],["T_NS_SEPARATOR","\\",425],["T_STRING","Magento",425],["T_NS_SEPARATOR","\\",425],["T_STRING","Store",425],["T_NS_SEPARATOR","\\",425],["T_STRING","Model",425],["T_NS_SEPARATOR","\\",425],["T_STRING","ScopeInterface",425],["T_DOUBLE_COLON","::",425],["T_STRING","SCOPE_STORE",425],["T_WHITESPACE","\n        ",425],")",";",["T_WHITESPACE","\n        ",426],["T_VARIABLE","$historyLifetimes",427],["T_WHITESPACE"," ",427],"=",["T_WHITESPACE"," ",427],"[",["T_WHITESPACE","\n            ",427],["T_STRING","Schedule",428],["T_DOUBLE_COLON","::",428],["T_STRING","STATUS_SUCCESS",428],["T_WHITESPACE"," ",428],["T_DOUBLE_ARROW","=>",428],["T_WHITESPACE"," ",428],["T_VARIABLE","$historySuccess",428],["T_WHITESPACE"," ",428],"*",["T_WHITESPACE"," ",428],["T_STRING","self",428],["T_DOUBLE_COLON","::",428],["T_STRING","SECONDS_IN_MINUTE",428],",",["T_WHITESPACE","\n            ",428],["T_STRING","Schedule",429],["T_DOUBLE_COLON","::",429],["T_STRING","STATUS_MISSED",429],["T_WHITESPACE"," ",429],["T_DOUBLE_ARROW","=>",429],["T_WHITESPACE"," ",429],["T_VARIABLE","$historyFailure",429],["T_WHITESPACE"," ",429],"*",["T_WHITESPACE"," ",429],["T_STRING","self",429],["T_DOUBLE_COLON","::",429],["T_STRING","SECONDS_IN_MINUTE",429],",",["T_WHITESPACE","\n            ",429],["T_STRING","Schedule",430],["T_DOUBLE_COLON","::",430],["T_STRING","STATUS_ERROR",430],["T_WHITESPACE"," ",430],["T_DOUBLE_ARROW","=>",430],["T_WHITESPACE"," ",430],["T_VARIABLE","$historyFailure",430],["T_WHITESPACE"," ",430],"*",["T_WHITESPACE"," ",430],["T_STRING","self",430],["T_DOUBLE_COLON","::",430],["T_STRING","SECONDS_IN_MINUTE",430],",",["T_WHITESPACE","\n        ",430],"]",";",["T_WHITESPACE","\n\n        ",431],["T_VARIABLE","$now",433],["T_WHITESPACE"," ",433],"=",["T_WHITESPACE"," ",433],["T_VARIABLE","$this",433],["T_OBJECT_OPERATOR","->",433],["T_STRING","timezone",433],["T_OBJECT_OPERATOR","->",433],["T_STRING","scopeTimeStamp",433],"(",")",";",["T_WHITESPACE","\n        ",433],["T_DOC_COMMENT","\/** @var Schedule $record *\/",434],["T_WHITESPACE","\n        ",434],["T_FOREACH","foreach",435],["T_WHITESPACE"," ",435],"(",["T_VARIABLE","$history",435],["T_WHITESPACE"," ",435],["T_AS","as",435],["T_WHITESPACE"," ",435],["T_VARIABLE","$record",435],")",["T_WHITESPACE"," ",435],"{",["T_WHITESPACE","\n            ",435],["T_VARIABLE","$checkTime",436],["T_WHITESPACE"," ",436],"=",["T_WHITESPACE"," ",436],["T_VARIABLE","$record",436],["T_OBJECT_OPERATOR","->",436],["T_STRING","getExecutedAt",436],"(",")",["T_WHITESPACE"," ",436],"?",["T_WHITESPACE"," ",436],["T_STRING","strtotime",436],"(",["T_VARIABLE","$record",436],["T_OBJECT_OPERATOR","->",436],["T_STRING","getExecutedAt",436],"(",")",")",["T_WHITESPACE"," ",436],":",["T_WHITESPACE","\n                ",436],["T_STRING","strtotime",437],"(",["T_VARIABLE","$record",437],["T_OBJECT_OPERATOR","->",437],["T_STRING","getScheduledAt",437],"(",")",")",["T_WHITESPACE"," ",437],"+",["T_WHITESPACE"," ",437],["T_VARIABLE","$scheduleLifetime",437],";",["T_WHITESPACE","\n            ",437],["T_IF","if",438],["T_WHITESPACE"," ",438],"(",["T_VARIABLE","$checkTime",438],["T_WHITESPACE"," ",438],"<",["T_WHITESPACE"," ",438],["T_VARIABLE","$now",438],["T_WHITESPACE"," ",438],"-",["T_WHITESPACE"," ",438],["T_VARIABLE","$historyLifetimes",438],"[",["T_VARIABLE","$record",438],["T_OBJECT_OPERATOR","->",438],["T_STRING","getStatus",438],"(",")","]",")",["T_WHITESPACE"," ",438],"{",["T_WHITESPACE","\n                ",438],["T_VARIABLE","$record",439],["T_OBJECT_OPERATOR","->",439],["T_STRING","delete",439],"(",")",";",["T_WHITESPACE","\n            ",439],"}",["T_WHITESPACE","\n        ",440],"}",["T_WHITESPACE","\n\n        ",441],["T_COMMENT","\/\/ save time history cleanup was ran with no expiration\n",443],["T_WHITESPACE","        ",444],["T_VARIABLE","$this",444],["T_OBJECT_OPERATOR","->",444],["T_STRING","_cache",444],["T_OBJECT_OPERATOR","->",444],["T_STRING","save",444],"(",["T_WHITESPACE","\n            ",444],["T_VARIABLE","$this",445],["T_OBJECT_OPERATOR","->",445],["T_STRING","timezone",445],["T_OBJECT_OPERATOR","->",445],["T_STRING","scopeTimeStamp",445],"(",")",",",["T_WHITESPACE","\n            ",445],["T_STRING","self",446],["T_DOUBLE_COLON","::",446],["T_STRING","CACHE_KEY_LAST_HISTORY_CLEANUP_AT",446],["T_WHITESPACE"," ",446],".",["T_WHITESPACE"," ",446],["T_VARIABLE","$groupId",446],",",["T_WHITESPACE","\n            ",446],"[",["T_CONSTANT_ENCAPSED_STRING","'crontab'",447],"]",",",["T_WHITESPACE","\n            ",447],["T_STRING","null",448],["T_WHITESPACE","\n        ",448],")",";",["T_WHITESPACE","\n\n        ",449],["T_RETURN","return",451],["T_WHITESPACE"," ",451],["T_VARIABLE","$this",451],";",["T_WHITESPACE","\n    ",451],"}",["T_WHITESPACE","\n\n    ",452],["T_DOC_COMMENT","\/**\n     * @param array $jobConfig\n     * @return mixed\n     *\/",454],["T_WHITESPACE","\n    ",457],["T_PROTECTED","protected",458],["T_WHITESPACE"," ",458],["T_FUNCTION","function",458],["T_WHITESPACE"," ",458],["T_STRING","getConfigSchedule",458],"(",["T_VARIABLE","$jobConfig",458],")",["T_WHITESPACE","\n    ",458],"{",["T_WHITESPACE","\n        ",459],["T_VARIABLE","$cronExpr",460],["T_WHITESPACE"," ",460],"=",["T_WHITESPACE"," ",460],["T_VARIABLE","$this",460],["T_OBJECT_OPERATOR","->",460],["T_STRING","_scopeConfig",460],["T_OBJECT_OPERATOR","->",460],["T_STRING","getValue",460],"(",["T_WHITESPACE","\n            ",460],["T_VARIABLE","$jobConfig",461],"[",["T_CONSTANT_ENCAPSED_STRING","'config_path'",461],"]",",",["T_WHITESPACE","\n            ",461],["T_NS_SEPARATOR","\\",462],["T_STRING","Magento",462],["T_NS_SEPARATOR","\\",462],["T_STRING","Store",462],["T_NS_SEPARATOR","\\",462],["T_STRING","Model",462],["T_NS_SEPARATOR","\\",462],["T_STRING","ScopeInterface",462],["T_DOUBLE_COLON","::",462],["T_STRING","SCOPE_STORE",462],["T_WHITESPACE","\n        ",462],")",";",["T_WHITESPACE","\n\n        ",463],["T_RETURN","return",465],["T_WHITESPACE"," ",465],["T_VARIABLE","$cronExpr",465],";",["T_WHITESPACE","\n    ",465],"}",["T_WHITESPACE","\n\n    ",466],["T_DOC_COMMENT","\/**\n     * @param string $jobCode\n     * @param string $cronExpression\n     * @param int $timeInterval\n     * @param array $exists\n     * @return void\n     *\/",468],["T_WHITESPACE","\n    ",474],["T_PROTECTED","protected",475],["T_WHITESPACE"," ",475],["T_FUNCTION","function",475],["T_WHITESPACE"," ",475],["T_STRING","saveSchedule",475],"(",["T_VARIABLE","$jobCode",475],",",["T_WHITESPACE"," ",475],["T_VARIABLE","$cronExpression",475],",",["T_WHITESPACE"," ",475],["T_VARIABLE","$timeInterval",475],",",["T_WHITESPACE"," ",475],["T_VARIABLE","$exists",475],")",["T_WHITESPACE","\n    ",475],"{",["T_WHITESPACE","\n        ",476],["T_VARIABLE","$currentTime",477],["T_WHITESPACE"," ",477],"=",["T_WHITESPACE"," ",477],["T_VARIABLE","$this",477],["T_OBJECT_OPERATOR","->",477],["T_STRING","timezone",477],["T_OBJECT_OPERATOR","->",477],["T_STRING","scopeTimeStamp",477],"(",")",";",["T_WHITESPACE","\n        ",477],["T_VARIABLE","$timeAhead",478],["T_WHITESPACE"," ",478],"=",["T_WHITESPACE"," ",478],["T_VARIABLE","$currentTime",478],["T_WHITESPACE"," ",478],"+",["T_WHITESPACE"," ",478],["T_VARIABLE","$timeInterval",478],";",["T_WHITESPACE","\n        ",478],["T_FOR","for",479],["T_WHITESPACE"," ",479],"(",["T_VARIABLE","$time",479],["T_WHITESPACE"," ",479],"=",["T_WHITESPACE"," ",479],["T_VARIABLE","$currentTime",479],";",["T_WHITESPACE"," ",479],["T_VARIABLE","$time",479],["T_WHITESPACE"," ",479],"<",["T_WHITESPACE"," ",479],["T_VARIABLE","$timeAhead",479],";",["T_WHITESPACE"," ",479],["T_VARIABLE","$time",479],["T_WHITESPACE"," ",479],["T_PLUS_EQUAL","+=",479],["T_WHITESPACE"," ",479],["T_STRING","self",479],["T_DOUBLE_COLON","::",479],["T_STRING","SECONDS_IN_MINUTE",479],")",["T_WHITESPACE"," ",479],"{",["T_WHITESPACE","\n            ",479],["T_VARIABLE","$ts",480],["T_WHITESPACE"," ",480],"=",["T_WHITESPACE"," ",480],["T_STRING","strftime",480],"(",["T_CONSTANT_ENCAPSED_STRING","'%Y-%m-%d %H:%M:00'",480],",",["T_WHITESPACE"," ",480],["T_VARIABLE","$time",480],")",";",["T_WHITESPACE","\n            ",480],["T_IF","if",481],["T_WHITESPACE"," ",481],"(","!",["T_EMPTY","empty",481],"(",["T_VARIABLE","$exists",481],"[",["T_VARIABLE","$jobCode",481],["T_WHITESPACE"," ",481],".",["T_WHITESPACE"," ",481],["T_CONSTANT_ENCAPSED_STRING","'\/'",481],["T_WHITESPACE"," ",481],".",["T_WHITESPACE"," ",481],["T_VARIABLE","$ts",481],"]",")",")",["T_WHITESPACE"," ",481],"{",["T_WHITESPACE","\n                ",481],["T_COMMENT","\/\/ already scheduled\n",482],["T_WHITESPACE","                ",483],["T_CONTINUE","continue",483],";",["T_WHITESPACE","\n            ",483],"}",["T_WHITESPACE","\n            ",484],["T_VARIABLE","$schedule",485],["T_WHITESPACE"," ",485],"=",["T_WHITESPACE"," ",485],["T_VARIABLE","$this",485],["T_OBJECT_OPERATOR","->",485],["T_STRING","generateSchedule",485],"(",["T_VARIABLE","$jobCode",485],",",["T_WHITESPACE"," ",485],["T_VARIABLE","$cronExpression",485],",",["T_WHITESPACE"," ",485],["T_VARIABLE","$time",485],")",";",["T_WHITESPACE","\n            ",485],["T_IF","if",486],["T_WHITESPACE"," ",486],"(",["T_VARIABLE","$schedule",486],["T_OBJECT_OPERATOR","->",486],["T_STRING","trySchedule",486],"(",")",")",["T_WHITESPACE"," ",486],"{",["T_WHITESPACE","\n                ",486],["T_COMMENT","\/\/ time matches cron expression\n",487],["T_WHITESPACE","                ",488],["T_VARIABLE","$schedule",488],["T_OBJECT_OPERATOR","->",488],["T_STRING","save",488],"(",")",";",["T_WHITESPACE","\n                ",488],["T_RETURN","return",489],";",["T_WHITESPACE","\n            ",489],"}",["T_WHITESPACE","\n        ",490],"}",["T_WHITESPACE","\n    ",491],"}",["T_WHITESPACE","\n\n    ",492],["T_DOC_COMMENT","\/**\n     * @param string $jobCode\n     * @param string $cronExpression\n     * @param int $time\n     * @return Schedule\n     *\/",494],["T_WHITESPACE","\n    ",499],["T_PROTECTED","protected",500],["T_WHITESPACE"," ",500],["T_FUNCTION","function",500],["T_WHITESPACE"," ",500],["T_STRING","generateSchedule",500],"(",["T_VARIABLE","$jobCode",500],",",["T_WHITESPACE"," ",500],["T_VARIABLE","$cronExpression",500],",",["T_WHITESPACE"," ",500],["T_VARIABLE","$time",500],")",["T_WHITESPACE","\n    ",500],"{",["T_WHITESPACE","\n        ",501],["T_VARIABLE","$schedule",502],["T_WHITESPACE"," ",502],"=",["T_WHITESPACE"," ",502],["T_VARIABLE","$this",502],["T_OBJECT_OPERATOR","->",502],["T_STRING","_scheduleFactory",502],["T_OBJECT_OPERATOR","->",502],["T_STRING","create",502],"(",")",["T_WHITESPACE","\n            ",502],["T_OBJECT_OPERATOR","->",503],["T_STRING","setCronExpr",503],"(",["T_VARIABLE","$cronExpression",503],")",["T_WHITESPACE","\n            ",503],["T_OBJECT_OPERATOR","->",504],["T_STRING","setJobCode",504],"(",["T_VARIABLE","$jobCode",504],")",["T_WHITESPACE","\n            ",504],["T_OBJECT_OPERATOR","->",505],["T_STRING","setStatus",505],"(",["T_STRING","Schedule",505],["T_DOUBLE_COLON","::",505],["T_STRING","STATUS_PENDING",505],")",["T_WHITESPACE","\n            ",505],["T_OBJECT_OPERATOR","->",506],["T_STRING","setCreatedAt",506],"(",["T_STRING","strftime",506],"(",["T_CONSTANT_ENCAPSED_STRING","'%Y-%m-%d %H:%M:%S'",506],",",["T_WHITESPACE"," ",506],["T_VARIABLE","$this",506],["T_OBJECT_OPERATOR","->",506],["T_STRING","timezone",506],["T_OBJECT_OPERATOR","->",506],["T_STRING","scopeTimeStamp",506],"(",")",")",")",["T_WHITESPACE","\n            ",506],["T_OBJECT_OPERATOR","->",507],["T_STRING","setScheduledAt",507],"(",["T_STRING","strftime",507],"(",["T_CONSTANT_ENCAPSED_STRING","'%Y-%m-%d %H:%M'",507],",",["T_WHITESPACE"," ",507],["T_VARIABLE","$time",507],")",")",";",["T_WHITESPACE","\n\n        ",507],["T_RETURN","return",509],["T_WHITESPACE"," ",509],["T_VARIABLE","$schedule",509],";",["T_WHITESPACE","\n    ",509],"}",["T_WHITESPACE","\n\n    ",510],["T_DOC_COMMENT","\/**\n     * @param string $groupId\n     * @return int\n     *\/",512],["T_WHITESPACE","\n    ",515],["T_PROTECTED","protected",516],["T_WHITESPACE"," ",516],["T_FUNCTION","function",516],["T_WHITESPACE"," ",516],["T_STRING","getScheduleTimeInterval",516],"(",["T_VARIABLE","$groupId",516],")",["T_WHITESPACE","\n    ",516],"{",["T_WHITESPACE","\n        ",517],["T_VARIABLE","$scheduleAheadFor",518],["T_WHITESPACE"," ",518],"=",["T_WHITESPACE"," ",518],["T_INT_CAST","(int)",518],["T_VARIABLE","$this",518],["T_OBJECT_OPERATOR","->",518],["T_STRING","_scopeConfig",518],["T_OBJECT_OPERATOR","->",518],["T_STRING","getValue",518],"(",["T_WHITESPACE","\n            ",518],["T_CONSTANT_ENCAPSED_STRING","'system\/cron\/'",519],["T_WHITESPACE"," ",519],".",["T_WHITESPACE"," ",519],["T_VARIABLE","$groupId",519],["T_WHITESPACE"," ",519],".",["T_WHITESPACE"," ",519],["T_CONSTANT_ENCAPSED_STRING","'\/'",519],["T_WHITESPACE"," ",519],".",["T_WHITESPACE"," ",519],["T_STRING","self",519],["T_DOUBLE_COLON","::",519],["T_STRING","XML_PATH_SCHEDULE_AHEAD_FOR",519],",",["T_WHITESPACE","\n            ",519],["T_NS_SEPARATOR","\\",520],["T_STRING","Magento",520],["T_NS_SEPARATOR","\\",520],["T_STRING","Store",520],["T_NS_SEPARATOR","\\",520],["T_STRING","Model",520],["T_NS_SEPARATOR","\\",520],["T_STRING","ScopeInterface",520],["T_DOUBLE_COLON","::",520],["T_STRING","SCOPE_STORE",520],["T_WHITESPACE","\n        ",520],")",";",["T_WHITESPACE","\n        ",521],["T_VARIABLE","$scheduleAheadFor",522],["T_WHITESPACE"," ",522],"=",["T_WHITESPACE"," ",522],["T_VARIABLE","$scheduleAheadFor",522],["T_WHITESPACE"," ",522],"*",["T_WHITESPACE"," ",522],["T_STRING","self",522],["T_DOUBLE_COLON","::",522],["T_STRING","SECONDS_IN_MINUTE",522],";",["T_WHITESPACE","\n\n        ",522],["T_RETURN","return",524],["T_WHITESPACE"," ",524],["T_VARIABLE","$scheduleAheadFor",524],";",["T_WHITESPACE","\n    ",524],"}",["T_WHITESPACE","\n",525],"}",["T_WHITESPACE","\n",526]]
[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Copyright \u00c2\u00a9 2013-2017 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n *\/",2],["T_WHITESPACE","\n",5],["T_NAMESPACE","namespace",6],["T_WHITESPACE"," ",6],["T_STRING","Magento",6],["T_NS_SEPARATOR","\\",6],["T_STRING","AdvancedPricingImportExport",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Model",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Import",6],";",["T_WHITESPACE","\n\n",6],["T_USE","use",8],["T_WHITESPACE"," ",8],["T_STRING","Magento",8],["T_NS_SEPARATOR","\\",8],["T_STRING","CatalogImportExport",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Model",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Import",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Product",8],["T_WHITESPACE"," ",8],["T_AS","as",8],["T_WHITESPACE"," ",8],["T_STRING","ImportProduct",8],";",["T_WHITESPACE","\n",8],["T_USE","use",9],["T_WHITESPACE"," ",9],["T_STRING","Magento",9],["T_NS_SEPARATOR","\\",9],["T_STRING","CatalogImportExport",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Model",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Import",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Product",9],["T_NS_SEPARATOR","\\",9],["T_STRING","RowValidatorInterface",9],["T_WHITESPACE"," ",9],["T_AS","as",9],["T_WHITESPACE"," ",9],["T_STRING","ValidatorInterface",9],";",["T_WHITESPACE","\n",9],["T_USE","use",10],["T_WHITESPACE"," ",10],["T_STRING","Magento",10],["T_NS_SEPARATOR","\\",10],["T_STRING","ImportExport",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Model",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Import",10],["T_NS_SEPARATOR","\\",10],["T_STRING","ErrorProcessing",10],["T_NS_SEPARATOR","\\",10],["T_STRING","ProcessingErrorAggregatorInterface",10],";",["T_WHITESPACE","\n",10],["T_USE","use",11],["T_WHITESPACE"," ",11],["T_STRING","Magento",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Framework",11],["T_NS_SEPARATOR","\\",11],["T_STRING","App",11],["T_NS_SEPARATOR","\\",11],["T_STRING","ResourceConnection",11],";",["T_WHITESPACE","\n\n",11],["T_DOC_COMMENT","\/**\n * Class AdvancedPricing\n *\n * @SuppressWarnings(PHPMD.ExcessiveParameterList)\n * @SuppressWarnings(PHPMD.CouplingBetweenObjects)\n * @SuppressWarnings(PHPMD.TooManyFields)\n *\/",13],["T_WHITESPACE","\n",19],["T_CLASS","class",20],["T_WHITESPACE"," ",20],["T_STRING","AdvancedPricing",20],["T_WHITESPACE"," ",20],["T_EXTENDS","extends",20],["T_WHITESPACE"," ",20],["T_NS_SEPARATOR","\\",20],["T_STRING","Magento",20],["T_NS_SEPARATOR","\\",20],["T_STRING","ImportExport",20],["T_NS_SEPARATOR","\\",20],["T_STRING","Model",20],["T_NS_SEPARATOR","\\",20],["T_STRING","Import",20],["T_NS_SEPARATOR","\\",20],["T_STRING","Entity",20],["T_NS_SEPARATOR","\\",20],["T_STRING","AbstractEntity",20],["T_WHITESPACE","\n",20],"{",["T_WHITESPACE","\n    ",21],["T_CONST","const",22],["T_WHITESPACE"," ",22],["T_STRING","VALUE_ALL_GROUPS",22],["T_WHITESPACE"," ",22],"=",["T_WHITESPACE"," ",22],["T_CONSTANT_ENCAPSED_STRING","'ALL GROUPS'",22],";",["T_WHITESPACE","\n\n    ",22],["T_CONST","const",24],["T_WHITESPACE"," ",24],["T_STRING","VALUE_ALL_WEBSITES",24],["T_WHITESPACE"," ",24],"=",["T_WHITESPACE"," ",24],["T_CONSTANT_ENCAPSED_STRING","'All Websites'",24],";",["T_WHITESPACE","\n\n    ",24],["T_CONST","const",26],["T_WHITESPACE"," ",26],["T_STRING","COL_SKU",26],["T_WHITESPACE"," ",26],"=",["T_WHITESPACE"," ",26],["T_CONSTANT_ENCAPSED_STRING","'sku'",26],";",["T_WHITESPACE","\n\n    ",26],["T_CONST","const",28],["T_WHITESPACE"," ",28],["T_STRING","COL_TIER_PRICE_WEBSITE",28],["T_WHITESPACE"," ",28],"=",["T_WHITESPACE"," ",28],["T_CONSTANT_ENCAPSED_STRING","'tier_price_website'",28],";",["T_WHITESPACE","\n\n    ",28],["T_CONST","const",30],["T_WHITESPACE"," ",30],["T_STRING","COL_TIER_PRICE_CUSTOMER_GROUP",30],["T_WHITESPACE"," ",30],"=",["T_WHITESPACE"," ",30],["T_CONSTANT_ENCAPSED_STRING","'tier_price_customer_group'",30],";",["T_WHITESPACE","\n\n    ",30],["T_CONST","const",32],["T_WHITESPACE"," ",32],["T_STRING","COL_TIER_PRICE_QTY",32],["T_WHITESPACE"," ",32],"=",["T_WHITESPACE"," ",32],["T_CONSTANT_ENCAPSED_STRING","'tier_price_qty'",32],";",["T_WHITESPACE","\n\n    ",32],["T_CONST","const",34],["T_WHITESPACE"," ",34],["T_STRING","COL_TIER_PRICE",34],["T_WHITESPACE"," ",34],"=",["T_WHITESPACE"," ",34],["T_CONSTANT_ENCAPSED_STRING","'tier_price'",34],";",["T_WHITESPACE","\n\n    ",34],["T_CONST","const",36],["T_WHITESPACE"," ",36],["T_STRING","COL_TIER_PRICE_PERCENTAGE_VALUE",36],["T_WHITESPACE"," ",36],"=",["T_WHITESPACE"," ",36],["T_CONSTANT_ENCAPSED_STRING","'percentage_value'",36],";",["T_WHITESPACE","\n\n    ",36],["T_CONST","const",38],["T_WHITESPACE"," ",38],["T_STRING","COL_TIER_PRICE_TYPE",38],["T_WHITESPACE"," ",38],"=",["T_WHITESPACE"," ",38],["T_CONSTANT_ENCAPSED_STRING","'tier_price_value_type'",38],";",["T_WHITESPACE","\n\n    ",38],["T_CONST","const",40],["T_WHITESPACE"," ",40],["T_STRING","TIER_PRICE_TYPE_FIXED",40],["T_WHITESPACE"," ",40],"=",["T_WHITESPACE"," ",40],["T_CONSTANT_ENCAPSED_STRING","'Fixed'",40],";",["T_WHITESPACE","\n\n    ",40],["T_CONST","const",42],["T_WHITESPACE"," ",42],["T_STRING","TIER_PRICE_TYPE_PERCENT",42],["T_WHITESPACE"," ",42],"=",["T_WHITESPACE"," ",42],["T_CONSTANT_ENCAPSED_STRING","'Discount'",42],";",["T_WHITESPACE","\n\n    ",42],["T_CONST","const",44],["T_WHITESPACE"," ",44],["T_STRING","TABLE_TIER_PRICE",44],["T_WHITESPACE"," ",44],"=",["T_WHITESPACE"," ",44],["T_CONSTANT_ENCAPSED_STRING","'catalog_product_entity_tier_price'",44],";",["T_WHITESPACE","\n\n    ",44],["T_CONST","const",46],["T_WHITESPACE"," ",46],["T_STRING","DEFAULT_ALL_GROUPS_GROUPED_PRICE_VALUE",46],["T_WHITESPACE"," ",46],"=",["T_WHITESPACE"," ",46],["T_CONSTANT_ENCAPSED_STRING","'0'",46],";",["T_WHITESPACE","\n\n    ",46],["T_CONST","const",48],["T_WHITESPACE"," ",48],["T_STRING","ENTITY_TYPE_CODE",48],["T_WHITESPACE"," ",48],"=",["T_WHITESPACE"," ",48],["T_CONSTANT_ENCAPSED_STRING","'advanced_pricing'",48],";",["T_WHITESPACE","\n\n    ",48],["T_CONST","const",50],["T_WHITESPACE"," ",50],["T_STRING","VALIDATOR_MAIN",50],["T_WHITESPACE"," ",50],"=",["T_WHITESPACE"," ",50],["T_CONSTANT_ENCAPSED_STRING","'validator'",50],";",["T_WHITESPACE","\n\n    ",50],["T_CONST","const",52],["T_WHITESPACE"," ",52],["T_STRING","VALIDATOR_WEBSITE",52],["T_WHITESPACE"," ",52],"=",["T_WHITESPACE"," ",52],["T_CONSTANT_ENCAPSED_STRING","'validator_website'",52],";",["T_WHITESPACE","\n\n    ",52],["T_CONST","const",54],["T_WHITESPACE"," ",54],["T_STRING","VALIDATOR_TEAR_PRICE",54],["T_WHITESPACE"," ",54],"=",["T_WHITESPACE"," ",54],["T_CONSTANT_ENCAPSED_STRING","'validator_tear_price'",54],";",["T_WHITESPACE","\n\n    ",54],["T_DOC_COMMENT","\/**\n     * Validation failure message template definitions.\n     *\n     * @var array\n     *\/",56],["T_WHITESPACE","\n    ",60],["T_PROTECTED","protected",61],["T_WHITESPACE"," ",61],["T_VARIABLE","$_messageTemplates",61],["T_WHITESPACE"," ",61],"=",["T_WHITESPACE"," ",61],"[",["T_WHITESPACE","\n        ",61],["T_STRING","ValidatorInterface",62],["T_DOUBLE_COLON","::",62],["T_STRING","ERROR_INVALID_WEBSITE",62],["T_WHITESPACE"," ",62],["T_DOUBLE_ARROW","=>",62],["T_WHITESPACE"," ",62],["T_CONSTANT_ENCAPSED_STRING","'Invalid value in Website column (website does not exists?)'",62],",",["T_WHITESPACE","\n        ",62],["T_STRING","ValidatorInterface",63],["T_DOUBLE_COLON","::",63],["T_STRING","ERROR_SKU_IS_EMPTY",63],["T_WHITESPACE"," ",63],["T_DOUBLE_ARROW","=>",63],["T_WHITESPACE"," ",63],["T_CONSTANT_ENCAPSED_STRING","'SKU is empty'",63],",",["T_WHITESPACE","\n        ",63],["T_STRING","ValidatorInterface",64],["T_DOUBLE_COLON","::",64],["T_STRING","ERROR_SKU_NOT_FOUND_FOR_DELETE",64],["T_WHITESPACE"," ",64],["T_DOUBLE_ARROW","=>",64],["T_WHITESPACE"," ",64],["T_CONSTANT_ENCAPSED_STRING","'Product with specified SKU not found'",64],",",["T_WHITESPACE","\n        ",64],["T_STRING","ValidatorInterface",65],["T_DOUBLE_COLON","::",65],["T_STRING","ERROR_INVALID_TIER_PRICE_QTY",65],["T_WHITESPACE"," ",65],["T_DOUBLE_ARROW","=>",65],["T_WHITESPACE"," ",65],["T_CONSTANT_ENCAPSED_STRING","'Tier Price data price or quantity value is invalid'",65],",",["T_WHITESPACE","\n        ",65],["T_STRING","ValidatorInterface",66],["T_DOUBLE_COLON","::",66],["T_STRING","ERROR_INVALID_TIER_PRICE_SITE",66],["T_WHITESPACE"," ",66],["T_DOUBLE_ARROW","=>",66],["T_WHITESPACE"," ",66],["T_CONSTANT_ENCAPSED_STRING","'Tier Price data website is invalid'",66],",",["T_WHITESPACE","\n        ",66],["T_STRING","ValidatorInterface",67],["T_DOUBLE_COLON","::",67],["T_STRING","ERROR_INVALID_TIER_PRICE_GROUP",67],["T_WHITESPACE"," ",67],["T_DOUBLE_ARROW","=>",67],["T_WHITESPACE"," ",67],["T_CONSTANT_ENCAPSED_STRING","'Tier Price customer group is invalid'",67],",",["T_WHITESPACE","\n        ",67],["T_STRING","ValidatorInterface",68],["T_DOUBLE_COLON","::",68],["T_STRING","ERROR_INVALID_TIER_PRICE_TYPE",68],["T_WHITESPACE"," ",68],["T_DOUBLE_ARROW","=>",68],["T_WHITESPACE"," ",68],["T_CONSTANT_ENCAPSED_STRING","'Value for \\'tier_price_value_type\\' '",68],["T_WHITESPACE"," ",68],".",["T_WHITESPACE","\n            ",68],["T_CONSTANT_ENCAPSED_STRING","'attribute contains incorrect value, acceptable values are Fixed, Discount'",69],",",["T_WHITESPACE","\n        ",69],["T_STRING","ValidatorInterface",70],["T_DOUBLE_COLON","::",70],["T_STRING","ERROR_TIER_DATA_INCOMPLETE",70],["T_WHITESPACE"," ",70],["T_DOUBLE_ARROW","=>",70],["T_WHITESPACE"," ",70],["T_CONSTANT_ENCAPSED_STRING","'Tier Price data is incomplete'",70],",",["T_WHITESPACE","\n        ",70],["T_STRING","ValidatorInterface",71],["T_DOUBLE_COLON","::",71],["T_STRING","ERROR_INVALID_ATTRIBUTE_DECIMAL",71],["T_WHITESPACE"," ",71],["T_DOUBLE_ARROW","=>",71],["T_WHITESPACE","\n            ",71],["T_CONSTANT_ENCAPSED_STRING","'Value for \\'%s\\' attribute contains incorrect value, acceptable values are in decimal format'",72],",",["T_WHITESPACE","\n    ",72],"]",";",["T_WHITESPACE","\n\n    ",73],["T_DOC_COMMENT","\/**\n     * If we should check column names\n     *\n     * @var bool\n     *\/",75],["T_WHITESPACE","\n    ",79],["T_PROTECTED","protected",80],["T_WHITESPACE"," ",80],["T_VARIABLE","$needColumnCheck",80],["T_WHITESPACE"," ",80],"=",["T_WHITESPACE"," ",80],["T_STRING","true",80],";",["T_WHITESPACE","\n\n    ",80],["T_DOC_COMMENT","\/**\n     * Valid column names.\n     *\n     * @array\n     *\/",82],["T_WHITESPACE","\n    ",86],["T_PROTECTED","protected",87],["T_WHITESPACE"," ",87],["T_VARIABLE","$validColumnNames",87],["T_WHITESPACE"," ",87],"=",["T_WHITESPACE"," ",87],"[",["T_WHITESPACE","\n        ",87],["T_STRING","self",88],["T_DOUBLE_COLON","::",88],["T_STRING","COL_SKU",88],",",["T_WHITESPACE","\n        ",88],["T_STRING","self",89],["T_DOUBLE_COLON","::",89],["T_STRING","COL_TIER_PRICE_WEBSITE",89],",",["T_WHITESPACE","\n        ",89],["T_STRING","self",90],["T_DOUBLE_COLON","::",90],["T_STRING","COL_TIER_PRICE_CUSTOMER_GROUP",90],",",["T_WHITESPACE","\n        ",90],["T_STRING","self",91],["T_DOUBLE_COLON","::",91],["T_STRING","COL_TIER_PRICE_QTY",91],",",["T_WHITESPACE","\n        ",91],["T_STRING","self",92],["T_DOUBLE_COLON","::",92],["T_STRING","COL_TIER_PRICE",92],",",["T_WHITESPACE","\n        ",92],["T_STRING","self",93],["T_DOUBLE_COLON","::",93],["T_STRING","COL_TIER_PRICE_TYPE",93],["T_WHITESPACE","\n    ",93],"]",";",["T_WHITESPACE","\n\n    ",94],["T_DOC_COMMENT","\/**\n     * Need to log in import history\n     *\n     * @var bool\n     *\/",96],["T_WHITESPACE","\n    ",100],["T_PROTECTED","protected",101],["T_WHITESPACE"," ",101],["T_VARIABLE","$logInHistory",101],["T_WHITESPACE"," ",101],"=",["T_WHITESPACE"," ",101],["T_STRING","true",101],";",["T_WHITESPACE","\n\n    ",101],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\CatalogImportExport\\Model\\Import\\Proxy\\Product\\ResourceModelFactory\n     *\/",103],["T_WHITESPACE","\n    ",105],["T_PROTECTED","protected",106],["T_WHITESPACE"," ",106],["T_VARIABLE","$_resourceFactory",106],";",["T_WHITESPACE","\n\n    ",106],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Catalog\\Helper\\Data\n     *\/",108],["T_WHITESPACE","\n    ",110],["T_PROTECTED","protected",111],["T_WHITESPACE"," ",111],["T_VARIABLE","$_catalogData",111],";",["T_WHITESPACE","\n\n    ",111],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Catalog\\Model\\Product\n     *\/",113],["T_WHITESPACE","\n    ",115],["T_PROTECTED","protected",116],["T_WHITESPACE"," ",116],["T_VARIABLE","$_productModel",116],";",["T_WHITESPACE","\n\n    ",116],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\CatalogImportExport\\Model\\Import\\Product\\StoreResolver\n     *\/",118],["T_WHITESPACE","\n    ",120],["T_PROTECTED","protected",121],["T_WHITESPACE"," ",121],["T_VARIABLE","$_storeResolver",121],";",["T_WHITESPACE","\n\n    ",121],["T_DOC_COMMENT","\/**\n     * @var ImportProduct\n     *\/",123],["T_WHITESPACE","\n    ",125],["T_PROTECTED","protected",126],["T_WHITESPACE"," ",126],["T_VARIABLE","$_importProduct",126],";",["T_WHITESPACE","\n\n    ",126],["T_DOC_COMMENT","\/**\n     * @var array\n     *\/",128],["T_WHITESPACE","\n    ",130],["T_PROTECTED","protected",131],["T_WHITESPACE"," ",131],["T_VARIABLE","$_validators",131],["T_WHITESPACE"," ",131],"=",["T_WHITESPACE"," ",131],"[","]",";",["T_WHITESPACE","\n\n    ",131],["T_DOC_COMMENT","\/**\n     * @var array\n     *\/",133],["T_WHITESPACE","\n    ",135],["T_PROTECTED","protected",136],["T_WHITESPACE"," ",136],["T_VARIABLE","$_cachedSkuToDelete",136],";",["T_WHITESPACE","\n\n    ",136],["T_DOC_COMMENT","\/**\n     * @var array\n     *\/",138],["T_WHITESPACE","\n    ",140],["T_PROTECTED","protected",141],["T_WHITESPACE"," ",141],["T_VARIABLE","$_oldSkus",141],["T_WHITESPACE"," ",141],"=",["T_WHITESPACE"," ",141],["T_STRING","null",141],";",["T_WHITESPACE","\n\n    ",141],["T_DOC_COMMENT","\/**\n     * Permanent entity columns.\n     *\n     * @var string[]\n     *\/",143],["T_WHITESPACE","\n    ",147],["T_PROTECTED","protected",148],["T_WHITESPACE"," ",148],["T_VARIABLE","$_permanentAttributes",148],["T_WHITESPACE"," ",148],"=",["T_WHITESPACE"," ",148],"[",["T_STRING","self",148],["T_DOUBLE_COLON","::",148],["T_STRING","COL_SKU",148],"]",";",["T_WHITESPACE","\n\n    ",148],["T_DOC_COMMENT","\/**\n     * Catalog product entity\n     *\n     * @var string\n     *\/",150],["T_WHITESPACE","\n    ",154],["T_PROTECTED","protected",155],["T_WHITESPACE"," ",155],["T_VARIABLE","$_catalogProductEntity",155],";",["T_WHITESPACE","\n\n    ",155],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Framework\\Stdlib\\DateTime\\DateTime\n     *\/",157],["T_WHITESPACE","\n    ",159],["T_PROTECTED","protected",160],["T_WHITESPACE"," ",160],["T_VARIABLE","$dateTime",160],";",["T_WHITESPACE","\n\n    ",160],["T_DOC_COMMENT","\/**\n     * Product entity link field\n     *\n     * @var string\n     *\/",162],["T_WHITESPACE","\n    ",166],["T_PRIVATE","private",167],["T_WHITESPACE"," ",167],["T_VARIABLE","$productEntityLinkField",167],";",["T_WHITESPACE","\n\n    ",167],["T_DOC_COMMENT","\/**\n     * @SuppressWarnings(PHPMD.CouplingBetweenObjects)\n     * @param \\Magento\\Framework\\Json\\Helper\\Data $jsonHelper\n     * @param \\Magento\\ImportExport\\Helper\\Data $importExportData\n     * @param \\Magento\\ImportExport\\Model\\ResourceModel\\Import\\Data $importData\n     * @param \\Magento\\Eav\\Model\\Config $config\n     * @param \\Magento\\Framework\\App\\ResourceConnection $resource\n     * @param \\Magento\\ImportExport\\Model\\ResourceModel\\Helper $resourceHelper\n     * @param \\Magento\\Framework\\Stdlib\\StringUtils $string\n     * @param ProcessingErrorAggregatorInterface $errorAggregator\n     * @param \\Magento\\Framework\\Stdlib\\DateTime\\DateTime $dateTime\n     * @param \\Magento\\CatalogImportExport\\Model\\Import\\Proxy\\Product\\ResourceModelFactory $resourceFactory\n     * @param \\Magento\\Catalog\\Model\\Product $productModel\n     * @param \\Magento\\Catalog\\Helper\\Data $catalogData\n     * @param ImportProduct\\StoreResolver $storeResolver\n     * @param ImportProduct $importProduct\n     * @param AdvancedPricing\\Validator $validator\n     * @param AdvancedPricing\\Validator\\Website $websiteValidator\n     * @param AdvancedPricing\\Validator\\TierPrice $tierPriceValidator\n     * @SuppressWarnings(PHPMD.UnusedFormalParameter)\n     *\/",169],["T_WHITESPACE","\n    ",189],["T_PUBLIC","public",190],["T_WHITESPACE"," ",190],["T_FUNCTION","function",190],["T_WHITESPACE"," ",190],["T_STRING","__construct",190],"(",["T_WHITESPACE","\n        ",190],["T_NS_SEPARATOR","\\",191],["T_STRING","Magento",191],["T_NS_SEPARATOR","\\",191],["T_STRING","Framework",191],["T_NS_SEPARATOR","\\",191],["T_STRING","Json",191],["T_NS_SEPARATOR","\\",191],["T_STRING","Helper",191],["T_NS_SEPARATOR","\\",191],["T_STRING","Data",191],["T_WHITESPACE"," ",191],["T_VARIABLE","$jsonHelper",191],",",["T_WHITESPACE","\n        ",191],["T_NS_SEPARATOR","\\",192],["T_STRING","Magento",192],["T_NS_SEPARATOR","\\",192],["T_STRING","ImportExport",192],["T_NS_SEPARATOR","\\",192],["T_STRING","Helper",192],["T_NS_SEPARATOR","\\",192],["T_STRING","Data",192],["T_WHITESPACE"," ",192],["T_VARIABLE","$importExportData",192],",",["T_WHITESPACE","\n        ",192],["T_NS_SEPARATOR","\\",193],["T_STRING","Magento",193],["T_NS_SEPARATOR","\\",193],["T_STRING","ImportExport",193],["T_NS_SEPARATOR","\\",193],["T_STRING","Model",193],["T_NS_SEPARATOR","\\",193],["T_STRING","ResourceModel",193],["T_NS_SEPARATOR","\\",193],["T_STRING","Import",193],["T_NS_SEPARATOR","\\",193],["T_STRING","Data",193],["T_WHITESPACE"," ",193],["T_VARIABLE","$importData",193],",",["T_WHITESPACE","\n        ",193],["T_NS_SEPARATOR","\\",194],["T_STRING","Magento",194],["T_NS_SEPARATOR","\\",194],["T_STRING","Eav",194],["T_NS_SEPARATOR","\\",194],["T_STRING","Model",194],["T_NS_SEPARATOR","\\",194],["T_STRING","Config",194],["T_WHITESPACE"," ",194],["T_VARIABLE","$config",194],",",["T_WHITESPACE","\n        ",194],["T_NS_SEPARATOR","\\",195],["T_STRING","Magento",195],["T_NS_SEPARATOR","\\",195],["T_STRING","Framework",195],["T_NS_SEPARATOR","\\",195],["T_STRING","App",195],["T_NS_SEPARATOR","\\",195],["T_STRING","ResourceConnection",195],["T_WHITESPACE"," ",195],["T_VARIABLE","$resource",195],",",["T_WHITESPACE","\n        ",195],["T_NS_SEPARATOR","\\",196],["T_STRING","Magento",196],["T_NS_SEPARATOR","\\",196],["T_STRING","ImportExport",196],["T_NS_SEPARATOR","\\",196],["T_STRING","Model",196],["T_NS_SEPARATOR","\\",196],["T_STRING","ResourceModel",196],["T_NS_SEPARATOR","\\",196],["T_STRING","Helper",196],["T_WHITESPACE"," ",196],["T_VARIABLE","$resourceHelper",196],",",["T_WHITESPACE","\n        ",196],["T_NS_SEPARATOR","\\",197],["T_STRING","Magento",197],["T_NS_SEPARATOR","\\",197],["T_STRING","Framework",197],["T_NS_SEPARATOR","\\",197],["T_STRING","Stdlib",197],["T_NS_SEPARATOR","\\",197],["T_STRING","StringUtils",197],["T_WHITESPACE"," ",197],["T_VARIABLE","$string",197],",",["T_WHITESPACE","\n        ",197],["T_STRING","ProcessingErrorAggregatorInterface",198],["T_WHITESPACE"," ",198],["T_VARIABLE","$errorAggregator",198],",",["T_WHITESPACE","\n        ",198],["T_NS_SEPARATOR","\\",199],["T_STRING","Magento",199],["T_NS_SEPARATOR","\\",199],["T_STRING","Framework",199],["T_NS_SEPARATOR","\\",199],["T_STRING","Stdlib",199],["T_NS_SEPARATOR","\\",199],["T_STRING","DateTime",199],["T_NS_SEPARATOR","\\",199],["T_STRING","DateTime",199],["T_WHITESPACE"," ",199],["T_VARIABLE","$dateTime",199],",",["T_WHITESPACE","\n        ",199],["T_NS_SEPARATOR","\\",200],["T_STRING","Magento",200],["T_NS_SEPARATOR","\\",200],["T_STRING","CatalogImportExport",200],["T_NS_SEPARATOR","\\",200],["T_STRING","Model",200],["T_NS_SEPARATOR","\\",200],["T_STRING","Import",200],["T_NS_SEPARATOR","\\",200],["T_STRING","Proxy",200],["T_NS_SEPARATOR","\\",200],["T_STRING","Product",200],["T_NS_SEPARATOR","\\",200],["T_STRING","ResourceModelFactory",200],["T_WHITESPACE"," ",200],["T_VARIABLE","$resourceFactory",200],",",["T_WHITESPACE","\n        ",200],["T_NS_SEPARATOR","\\",201],["T_STRING","Magento",201],["T_NS_SEPARATOR","\\",201],["T_STRING","Catalog",201],["T_NS_SEPARATOR","\\",201],["T_STRING","Model",201],["T_NS_SEPARATOR","\\",201],["T_STRING","Product",201],["T_WHITESPACE"," ",201],["T_VARIABLE","$productModel",201],",",["T_WHITESPACE","\n        ",201],["T_NS_SEPARATOR","\\",202],["T_STRING","Magento",202],["T_NS_SEPARATOR","\\",202],["T_STRING","Catalog",202],["T_NS_SEPARATOR","\\",202],["T_STRING","Helper",202],["T_NS_SEPARATOR","\\",202],["T_STRING","Data",202],["T_WHITESPACE"," ",202],["T_VARIABLE","$catalogData",202],",",["T_WHITESPACE","\n        ",202],["T_NS_SEPARATOR","\\",203],["T_STRING","Magento",203],["T_NS_SEPARATOR","\\",203],["T_STRING","CatalogImportExport",203],["T_NS_SEPARATOR","\\",203],["T_STRING","Model",203],["T_NS_SEPARATOR","\\",203],["T_STRING","Import",203],["T_NS_SEPARATOR","\\",203],["T_STRING","Product",203],["T_NS_SEPARATOR","\\",203],["T_STRING","StoreResolver",203],["T_WHITESPACE"," ",203],["T_VARIABLE","$storeResolver",203],",",["T_WHITESPACE","\n        ",203],["T_STRING","ImportProduct",204],["T_WHITESPACE"," ",204],["T_VARIABLE","$importProduct",204],",",["T_WHITESPACE","\n        ",204],["T_STRING","AdvancedPricing",205],["T_NS_SEPARATOR","\\",205],["T_STRING","Validator",205],["T_WHITESPACE"," ",205],["T_VARIABLE","$validator",205],",",["T_WHITESPACE","\n        ",205],["T_STRING","AdvancedPricing",206],["T_NS_SEPARATOR","\\",206],["T_STRING","Validator",206],["T_NS_SEPARATOR","\\",206],["T_STRING","Website",206],["T_WHITESPACE"," ",206],["T_VARIABLE","$websiteValidator",206],",",["T_WHITESPACE","\n        ",206],["T_STRING","AdvancedPricing",207],["T_NS_SEPARATOR","\\",207],["T_STRING","Validator",207],["T_NS_SEPARATOR","\\",207],["T_STRING","TierPrice",207],["T_WHITESPACE"," ",207],["T_VARIABLE","$tierPriceValidator",207],["T_WHITESPACE","\n    ",207],")",["T_WHITESPACE"," ",208],"{",["T_WHITESPACE","\n        ",208],["T_VARIABLE","$this",209],["T_OBJECT_OPERATOR","->",209],["T_STRING","dateTime",209],["T_WHITESPACE"," ",209],"=",["T_WHITESPACE"," ",209],["T_VARIABLE","$dateTime",209],";",["T_WHITESPACE","\n        ",209],["T_VARIABLE","$this",210],["T_OBJECT_OPERATOR","->",210],["T_STRING","jsonHelper",210],["T_WHITESPACE"," ",210],"=",["T_WHITESPACE"," ",210],["T_VARIABLE","$jsonHelper",210],";",["T_WHITESPACE","\n        ",210],["T_VARIABLE","$this",211],["T_OBJECT_OPERATOR","->",211],["T_STRING","_importExportData",211],["T_WHITESPACE"," ",211],"=",["T_WHITESPACE"," ",211],["T_VARIABLE","$importExportData",211],";",["T_WHITESPACE","\n        ",211],["T_VARIABLE","$this",212],["T_OBJECT_OPERATOR","->",212],["T_STRING","_resourceHelper",212],["T_WHITESPACE"," ",212],"=",["T_WHITESPACE"," ",212],["T_VARIABLE","$resourceHelper",212],";",["T_WHITESPACE","\n        ",212],["T_VARIABLE","$this",213],["T_OBJECT_OPERATOR","->",213],["T_STRING","_dataSourceModel",213],["T_WHITESPACE"," ",213],"=",["T_WHITESPACE"," ",213],["T_VARIABLE","$importData",213],";",["T_WHITESPACE","\n        ",213],["T_VARIABLE","$this",214],["T_OBJECT_OPERATOR","->",214],["T_STRING","_connection",214],["T_WHITESPACE"," ",214],"=",["T_WHITESPACE"," ",214],["T_VARIABLE","$resource",214],["T_OBJECT_OPERATOR","->",214],["T_STRING","getConnection",214],"(",["T_CONSTANT_ENCAPSED_STRING","'write'",214],")",";",["T_WHITESPACE","\n        ",214],["T_VARIABLE","$this",215],["T_OBJECT_OPERATOR","->",215],["T_STRING","_resourceFactory",215],["T_WHITESPACE"," ",215],"=",["T_WHITESPACE"," ",215],["T_VARIABLE","$resourceFactory",215],";",["T_WHITESPACE","\n        ",215],["T_VARIABLE","$this",216],["T_OBJECT_OPERATOR","->",216],["T_STRING","_productModel",216],["T_WHITESPACE"," ",216],"=",["T_WHITESPACE"," ",216],["T_VARIABLE","$productModel",216],";",["T_WHITESPACE","\n        ",216],["T_VARIABLE","$this",217],["T_OBJECT_OPERATOR","->",217],["T_STRING","_catalogData",217],["T_WHITESPACE"," ",217],"=",["T_WHITESPACE"," ",217],["T_VARIABLE","$catalogData",217],";",["T_WHITESPACE","\n        ",217],["T_VARIABLE","$this",218],["T_OBJECT_OPERATOR","->",218],["T_STRING","_storeResolver",218],["T_WHITESPACE"," ",218],"=",["T_WHITESPACE"," ",218],["T_VARIABLE","$storeResolver",218],";",["T_WHITESPACE","\n        ",218],["T_VARIABLE","$this",219],["T_OBJECT_OPERATOR","->",219],["T_STRING","_importProduct",219],["T_WHITESPACE"," ",219],"=",["T_WHITESPACE"," ",219],["T_VARIABLE","$importProduct",219],";",["T_WHITESPACE","\n        ",219],["T_VARIABLE","$this",220],["T_OBJECT_OPERATOR","->",220],["T_STRING","_validators",220],"[",["T_STRING","self",220],["T_DOUBLE_COLON","::",220],["T_STRING","VALIDATOR_MAIN",220],"]",["T_WHITESPACE"," ",220],"=",["T_WHITESPACE"," ",220],["T_VARIABLE","$validator",220],["T_OBJECT_OPERATOR","->",220],["T_STRING","init",220],"(",["T_VARIABLE","$this",220],")",";",["T_WHITESPACE","\n        ",220],["T_VARIABLE","$this",221],["T_OBJECT_OPERATOR","->",221],["T_STRING","_catalogProductEntity",221],["T_WHITESPACE"," ",221],"=",["T_WHITESPACE"," ",221],["T_VARIABLE","$this",221],["T_OBJECT_OPERATOR","->",221],["T_STRING","_resourceFactory",221],["T_OBJECT_OPERATOR","->",221],["T_STRING","create",221],"(",")",["T_OBJECT_OPERATOR","->",221],["T_STRING","getTable",221],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog_product_entity'",221],")",";",["T_WHITESPACE","\n        ",221],["T_VARIABLE","$this",222],["T_OBJECT_OPERATOR","->",222],["T_STRING","_oldSkus",222],["T_WHITESPACE"," ",222],"=",["T_WHITESPACE"," ",222],["T_VARIABLE","$this",222],["T_OBJECT_OPERATOR","->",222],["T_STRING","retrieveOldSkus",222],"(",")",";",["T_WHITESPACE","\n        ",222],["T_VARIABLE","$this",223],["T_OBJECT_OPERATOR","->",223],["T_STRING","_validators",223],"[",["T_STRING","self",223],["T_DOUBLE_COLON","::",223],["T_STRING","VALIDATOR_WEBSITE",223],"]",["T_WHITESPACE"," ",223],"=",["T_WHITESPACE"," ",223],["T_VARIABLE","$websiteValidator",223],";",["T_WHITESPACE","\n        ",223],["T_VARIABLE","$this",224],["T_OBJECT_OPERATOR","->",224],["T_STRING","_validators",224],"[",["T_STRING","self",224],["T_DOUBLE_COLON","::",224],["T_STRING","VALIDATOR_TEAR_PRICE",224],"]",["T_WHITESPACE"," ",224],"=",["T_WHITESPACE"," ",224],["T_VARIABLE","$tierPriceValidator",224],";",["T_WHITESPACE","\n        ",224],["T_VARIABLE","$this",225],["T_OBJECT_OPERATOR","->",225],["T_STRING","errorAggregator",225],["T_WHITESPACE"," ",225],"=",["T_WHITESPACE"," ",225],["T_VARIABLE","$errorAggregator",225],";",["T_WHITESPACE","\n\n        ",225],["T_FOREACH","foreach",227],["T_WHITESPACE"," ",227],"(",["T_STRING","array_merge",227],"(",["T_VARIABLE","$this",227],["T_OBJECT_OPERATOR","->",227],["T_STRING","errorMessageTemplates",227],",",["T_WHITESPACE"," ",227],["T_VARIABLE","$this",227],["T_OBJECT_OPERATOR","->",227],["T_STRING","_messageTemplates",227],")",["T_WHITESPACE"," ",227],["T_AS","as",227],["T_WHITESPACE"," ",227],["T_VARIABLE","$errorCode",227],["T_WHITESPACE"," ",227],["T_DOUBLE_ARROW","=>",227],["T_WHITESPACE"," ",227],["T_VARIABLE","$message",227],")",["T_WHITESPACE"," ",227],"{",["T_WHITESPACE","\n            ",227],["T_VARIABLE","$this",228],["T_OBJECT_OPERATOR","->",228],["T_STRING","getErrorAggregator",228],"(",")",["T_OBJECT_OPERATOR","->",228],["T_STRING","addErrorMessageTemplate",228],"(",["T_VARIABLE","$errorCode",228],",",["T_WHITESPACE"," ",228],["T_VARIABLE","$message",228],")",";",["T_WHITESPACE","\n        ",228],"}",["T_WHITESPACE","\n    ",229],"}",["T_WHITESPACE","\n\n    ",230],["T_DOC_COMMENT","\/**\n     * Validator object getter.\n     *\n     * @param string $type\n     * @return AdvancedPricing\\Validator|AdvancedPricing\\Validator\\Website\n     *\/",232],["T_WHITESPACE","\n    ",237],["T_PROTECTED","protected",238],["T_WHITESPACE"," ",238],["T_FUNCTION","function",238],["T_WHITESPACE"," ",238],["T_STRING","_getValidator",238],"(",["T_VARIABLE","$type",238],")",["T_WHITESPACE","\n    ",238],"{",["T_WHITESPACE","\n        ",239],["T_RETURN","return",240],["T_WHITESPACE"," ",240],["T_VARIABLE","$this",240],["T_OBJECT_OPERATOR","->",240],["T_STRING","_validators",240],"[",["T_VARIABLE","$type",240],"]",";",["T_WHITESPACE","\n    ",240],"}",["T_WHITESPACE","\n\n    ",241],["T_DOC_COMMENT","\/**\n     * Entity type code getter.\n     *\n     * @return string\n     *\/",243],["T_WHITESPACE","\n    ",247],["T_PUBLIC","public",248],["T_WHITESPACE"," ",248],["T_FUNCTION","function",248],["T_WHITESPACE"," ",248],["T_STRING","getEntityTypeCode",248],"(",")",["T_WHITESPACE","\n    ",248],"{",["T_WHITESPACE","\n        ",249],["T_RETURN","return",250],["T_WHITESPACE"," ",250],["T_CONSTANT_ENCAPSED_STRING","'advanced_pricing'",250],";",["T_WHITESPACE","\n    ",250],"}",["T_WHITESPACE","\n\n    ",251],["T_DOC_COMMENT","\/**\n     * Row validation.\n     *\n     * @param array $rowData\n     * @param int $rowNum\n     * @return bool\n     *\/",253],["T_WHITESPACE","\n    ",259],["T_PUBLIC","public",260],["T_WHITESPACE"," ",260],["T_FUNCTION","function",260],["T_WHITESPACE"," ",260],["T_STRING","validateRow",260],"(",["T_ARRAY","array",260],["T_WHITESPACE"," ",260],["T_VARIABLE","$rowData",260],",",["T_WHITESPACE"," ",260],["T_VARIABLE","$rowNum",260],")",["T_WHITESPACE","\n    ",260],"{",["T_WHITESPACE","\n        ",261],["T_VARIABLE","$sku",262],["T_WHITESPACE"," ",262],"=",["T_WHITESPACE"," ",262],["T_STRING","false",262],";",["T_WHITESPACE","\n        ",262],["T_IF","if",263],["T_WHITESPACE"," ",263],"(",["T_ISSET","isset",263],"(",["T_VARIABLE","$this",263],["T_OBJECT_OPERATOR","->",263],["T_STRING","_validatedRows",263],"[",["T_VARIABLE","$rowNum",263],"]",")",")",["T_WHITESPACE"," ",263],"{",["T_WHITESPACE","\n            ",263],["T_RETURN","return",264],["T_WHITESPACE"," ",264],"!",["T_VARIABLE","$this",264],["T_OBJECT_OPERATOR","->",264],["T_STRING","getErrorAggregator",264],"(",")",["T_OBJECT_OPERATOR","->",264],["T_STRING","isRowInvalid",264],"(",["T_VARIABLE","$rowNum",264],")",";",["T_WHITESPACE","\n        ",264],"}",["T_WHITESPACE","\n        ",265],["T_VARIABLE","$this",266],["T_OBJECT_OPERATOR","->",266],["T_STRING","_validatedRows",266],"[",["T_VARIABLE","$rowNum",266],"]",["T_WHITESPACE"," ",266],"=",["T_WHITESPACE"," ",266],["T_STRING","true",266],";",["T_WHITESPACE","\n        ",266],["T_COMMENT","\/\/ BEHAVIOR_DELETE use specific validation logic\n",267],["T_WHITESPACE","        ",268],["T_IF","if",268],["T_WHITESPACE"," ",268],"(",["T_NS_SEPARATOR","\\",268],["T_STRING","Magento",268],["T_NS_SEPARATOR","\\",268],["T_STRING","ImportExport",268],["T_NS_SEPARATOR","\\",268],["T_STRING","Model",268],["T_NS_SEPARATOR","\\",268],["T_STRING","Import",268],["T_DOUBLE_COLON","::",268],["T_STRING","BEHAVIOR_DELETE",268],["T_WHITESPACE"," ",268],["T_IS_EQUAL","==",268],["T_WHITESPACE"," ",268],["T_VARIABLE","$this",268],["T_OBJECT_OPERATOR","->",268],["T_STRING","getBehavior",268],"(",")",")",["T_WHITESPACE"," ",268],"{",["T_WHITESPACE","\n            ",268],["T_IF","if",269],["T_WHITESPACE"," ",269],"(","!",["T_ISSET","isset",269],"(",["T_VARIABLE","$rowData",269],"[",["T_STRING","self",269],["T_DOUBLE_COLON","::",269],["T_STRING","COL_SKU",269],"]",")",")",["T_WHITESPACE"," ",269],"{",["T_WHITESPACE","\n                ",269],["T_VARIABLE","$this",270],["T_OBJECT_OPERATOR","->",270],["T_STRING","addRowError",270],"(",["T_STRING","ValidatorInterface",270],["T_DOUBLE_COLON","::",270],["T_STRING","ERROR_SKU_IS_EMPTY",270],",",["T_WHITESPACE"," ",270],["T_VARIABLE","$rowNum",270],")",";",["T_WHITESPACE","\n                ",270],["T_RETURN","return",271],["T_WHITESPACE"," ",271],["T_STRING","false",271],";",["T_WHITESPACE","\n            ",271],"}",["T_WHITESPACE","\n            ",272],["T_RETURN","return",273],["T_WHITESPACE"," ",273],["T_STRING","true",273],";",["T_WHITESPACE","\n        ",273],"}",["T_WHITESPACE","\n        ",274],["T_IF","if",275],["T_WHITESPACE"," ",275],"(","!",["T_VARIABLE","$this",275],["T_OBJECT_OPERATOR","->",275],["T_STRING","_getValidator",275],"(",["T_STRING","self",275],["T_DOUBLE_COLON","::",275],["T_STRING","VALIDATOR_MAIN",275],")",["T_OBJECT_OPERATOR","->",275],["T_STRING","isValid",275],"(",["T_VARIABLE","$rowData",275],")",")",["T_WHITESPACE"," ",275],"{",["T_WHITESPACE","\n            ",275],["T_FOREACH","foreach",276],["T_WHITESPACE"," ",276],"(",["T_VARIABLE","$this",276],["T_OBJECT_OPERATOR","->",276],["T_STRING","_getValidator",276],"(",["T_STRING","self",276],["T_DOUBLE_COLON","::",276],["T_STRING","VALIDATOR_MAIN",276],")",["T_OBJECT_OPERATOR","->",276],["T_STRING","getMessages",276],"(",")",["T_WHITESPACE"," ",276],["T_AS","as",276],["T_WHITESPACE"," ",276],["T_VARIABLE","$message",276],")",["T_WHITESPACE"," ",276],"{",["T_WHITESPACE","\n                ",276],["T_VARIABLE","$this",277],["T_OBJECT_OPERATOR","->",277],["T_STRING","addRowError",277],"(",["T_VARIABLE","$message",277],",",["T_WHITESPACE"," ",277],["T_VARIABLE","$rowNum",277],")",";",["T_WHITESPACE","\n            ",277],"}",["T_WHITESPACE","\n        ",278],"}",["T_WHITESPACE","\n        ",279],["T_IF","if",280],["T_WHITESPACE"," ",280],"(",["T_ISSET","isset",280],"(",["T_VARIABLE","$rowData",280],"[",["T_STRING","self",280],["T_DOUBLE_COLON","::",280],["T_STRING","COL_SKU",280],"]",")",")",["T_WHITESPACE"," ",280],"{",["T_WHITESPACE","\n            ",280],["T_VARIABLE","$sku",281],["T_WHITESPACE"," ",281],"=",["T_WHITESPACE"," ",281],["T_VARIABLE","$rowData",281],"[",["T_STRING","self",281],["T_DOUBLE_COLON","::",281],["T_STRING","COL_SKU",281],"]",";",["T_WHITESPACE","\n        ",281],"}",["T_WHITESPACE","\n        ",282],["T_IF","if",283],["T_WHITESPACE"," ",283],"(",["T_STRING","false",283],["T_WHITESPACE"," ",283],["T_IS_IDENTICAL","===",283],["T_WHITESPACE"," ",283],["T_VARIABLE","$sku",283],")",["T_WHITESPACE"," ",283],"{",["T_WHITESPACE","\n            ",283],["T_VARIABLE","$this",284],["T_OBJECT_OPERATOR","->",284],["T_STRING","addRowError",284],"(",["T_STRING","ValidatorInterface",284],["T_DOUBLE_COLON","::",284],["T_STRING","ERROR_ROW_IS_ORPHAN",284],",",["T_WHITESPACE"," ",284],["T_VARIABLE","$rowNum",284],")",";",["T_WHITESPACE","\n        ",284],"}",["T_WHITESPACE","\n        ",285],["T_RETURN","return",286],["T_WHITESPACE"," ",286],"!",["T_VARIABLE","$this",286],["T_OBJECT_OPERATOR","->",286],["T_STRING","getErrorAggregator",286],"(",")",["T_OBJECT_OPERATOR","->",286],["T_STRING","isRowInvalid",286],"(",["T_VARIABLE","$rowNum",286],")",";",["T_WHITESPACE","\n    ",286],"}",["T_WHITESPACE","\n\n    ",287],["T_DOC_COMMENT","\/**\n     * Create Advanced price data from raw data.\n     *\n     * @throws \\Exception\n     * @return bool Result of operation.\n     *\/",289],["T_WHITESPACE","\n    ",294],["T_PROTECTED","protected",295],["T_WHITESPACE"," ",295],["T_FUNCTION","function",295],["T_WHITESPACE"," ",295],["T_STRING","_importData",295],"(",")",["T_WHITESPACE","\n    ",295],"{",["T_WHITESPACE","\n        ",296],["T_IF","if",297],["T_WHITESPACE"," ",297],"(",["T_NS_SEPARATOR","\\",297],["T_STRING","Magento",297],["T_NS_SEPARATOR","\\",297],["T_STRING","ImportExport",297],["T_NS_SEPARATOR","\\",297],["T_STRING","Model",297],["T_NS_SEPARATOR","\\",297],["T_STRING","Import",297],["T_DOUBLE_COLON","::",297],["T_STRING","BEHAVIOR_DELETE",297],["T_WHITESPACE"," ",297],["T_IS_EQUAL","==",297],["T_WHITESPACE"," ",297],["T_VARIABLE","$this",297],["T_OBJECT_OPERATOR","->",297],["T_STRING","getBehavior",297],"(",")",")",["T_WHITESPACE"," ",297],"{",["T_WHITESPACE","\n            ",297],["T_VARIABLE","$this",298],["T_OBJECT_OPERATOR","->",298],["T_STRING","deleteAdvancedPricing",298],"(",")",";",["T_WHITESPACE","\n        ",298],"}",["T_WHITESPACE"," ",299],["T_ELSEIF","elseif",299],["T_WHITESPACE"," ",299],"(",["T_NS_SEPARATOR","\\",299],["T_STRING","Magento",299],["T_NS_SEPARATOR","\\",299],["T_STRING","ImportExport",299],["T_NS_SEPARATOR","\\",299],["T_STRING","Model",299],["T_NS_SEPARATOR","\\",299],["T_STRING","Import",299],["T_DOUBLE_COLON","::",299],["T_STRING","BEHAVIOR_REPLACE",299],["T_WHITESPACE"," ",299],["T_IS_EQUAL","==",299],["T_WHITESPACE"," ",299],["T_VARIABLE","$this",299],["T_OBJECT_OPERATOR","->",299],["T_STRING","getBehavior",299],"(",")",")",["T_WHITESPACE"," ",299],"{",["T_WHITESPACE","\n            ",299],["T_VARIABLE","$this",300],["T_OBJECT_OPERATOR","->",300],["T_STRING","replaceAdvancedPricing",300],"(",")",";",["T_WHITESPACE","\n        ",300],"}",["T_WHITESPACE"," ",301],["T_ELSEIF","elseif",301],["T_WHITESPACE"," ",301],"(",["T_NS_SEPARATOR","\\",301],["T_STRING","Magento",301],["T_NS_SEPARATOR","\\",301],["T_STRING","ImportExport",301],["T_NS_SEPARATOR","\\",301],["T_STRING","Model",301],["T_NS_SEPARATOR","\\",301],["T_STRING","Import",301],["T_DOUBLE_COLON","::",301],["T_STRING","BEHAVIOR_APPEND",301],["T_WHITESPACE"," ",301],["T_IS_EQUAL","==",301],["T_WHITESPACE"," ",301],["T_VARIABLE","$this",301],["T_OBJECT_OPERATOR","->",301],["T_STRING","getBehavior",301],"(",")",")",["T_WHITESPACE"," ",301],"{",["T_WHITESPACE","\n            ",301],["T_VARIABLE","$this",302],["T_OBJECT_OPERATOR","->",302],["T_STRING","saveAdvancedPricing",302],"(",")",";",["T_WHITESPACE","\n        ",302],"}",["T_WHITESPACE","\n\n        ",303],["T_RETURN","return",305],["T_WHITESPACE"," ",305],["T_STRING","true",305],";",["T_WHITESPACE","\n    ",305],"}",["T_WHITESPACE","\n\n    ",306],["T_DOC_COMMENT","\/**\n     * Save advanced pricing\n     *\n     * @return $this\n     *\/",308],["T_WHITESPACE","\n    ",312],["T_PUBLIC","public",313],["T_WHITESPACE"," ",313],["T_FUNCTION","function",313],["T_WHITESPACE"," ",313],["T_STRING","saveAdvancedPricing",313],"(",")",["T_WHITESPACE","\n    ",313],"{",["T_WHITESPACE","\n        ",314],["T_VARIABLE","$this",315],["T_OBJECT_OPERATOR","->",315],["T_STRING","saveAndReplaceAdvancedPrices",315],"(",")",";",["T_WHITESPACE","\n        ",315],["T_RETURN","return",316],["T_WHITESPACE"," ",316],["T_VARIABLE","$this",316],";",["T_WHITESPACE","\n    ",316],"}",["T_WHITESPACE","\n\n    ",317],["T_DOC_COMMENT","\/**\n     * Deletes Advanced price data from raw data.\n     *\n     * @return $this\n     *\/",319],["T_WHITESPACE","\n    ",323],["T_PUBLIC","public",324],["T_WHITESPACE"," ",324],["T_FUNCTION","function",324],["T_WHITESPACE"," ",324],["T_STRING","deleteAdvancedPricing",324],"(",")",["T_WHITESPACE","\n    ",324],"{",["T_WHITESPACE","\n        ",325],["T_VARIABLE","$this",326],["T_OBJECT_OPERATOR","->",326],["T_STRING","_cachedSkuToDelete",326],["T_WHITESPACE"," ",326],"=",["T_WHITESPACE"," ",326],["T_STRING","null",326],";",["T_WHITESPACE","\n        ",326],["T_VARIABLE","$listSku",327],["T_WHITESPACE"," ",327],"=",["T_WHITESPACE"," ",327],"[","]",";",["T_WHITESPACE","\n        ",327],["T_WHILE","while",328],["T_WHITESPACE"," ",328],"(",["T_VARIABLE","$bunch",328],["T_WHITESPACE"," ",328],"=",["T_WHITESPACE"," ",328],["T_VARIABLE","$this",328],["T_OBJECT_OPERATOR","->",328],["T_STRING","_dataSourceModel",328],["T_OBJECT_OPERATOR","->",328],["T_STRING","getNextBunch",328],"(",")",")",["T_WHITESPACE"," ",328],"{",["T_WHITESPACE","\n            ",328],["T_FOREACH","foreach",329],["T_WHITESPACE"," ",329],"(",["T_VARIABLE","$bunch",329],["T_WHITESPACE"," ",329],["T_AS","as",329],["T_WHITESPACE"," ",329],["T_VARIABLE","$rowNum",329],["T_WHITESPACE"," ",329],["T_DOUBLE_ARROW","=>",329],["T_WHITESPACE"," ",329],["T_VARIABLE","$rowData",329],")",["T_WHITESPACE"," ",329],"{",["T_WHITESPACE","\n                ",329],["T_VARIABLE","$this",330],["T_OBJECT_OPERATOR","->",330],["T_STRING","validateRow",330],"(",["T_VARIABLE","$rowData",330],",",["T_WHITESPACE"," ",330],["T_VARIABLE","$rowNum",330],")",";",["T_WHITESPACE","\n                ",330],["T_IF","if",331],["T_WHITESPACE"," ",331],"(","!",["T_VARIABLE","$this",331],["T_OBJECT_OPERATOR","->",331],["T_STRING","getErrorAggregator",331],"(",")",["T_OBJECT_OPERATOR","->",331],["T_STRING","isRowInvalid",331],"(",["T_VARIABLE","$rowNum",331],")",")",["T_WHITESPACE"," ",331],"{",["T_WHITESPACE","\n                    ",331],["T_VARIABLE","$rowSku",332],["T_WHITESPACE"," ",332],"=",["T_WHITESPACE"," ",332],["T_VARIABLE","$rowData",332],"[",["T_STRING","self",332],["T_DOUBLE_COLON","::",332],["T_STRING","COL_SKU",332],"]",";",["T_WHITESPACE","\n                    ",332],["T_VARIABLE","$listSku",333],"[","]",["T_WHITESPACE"," ",333],"=",["T_WHITESPACE"," ",333],["T_VARIABLE","$rowSku",333],";",["T_WHITESPACE","\n                ",333],"}",["T_WHITESPACE","\n                ",334],["T_IF","if",335],["T_WHITESPACE"," ",335],"(",["T_VARIABLE","$this",335],["T_OBJECT_OPERATOR","->",335],["T_STRING","getErrorAggregator",335],"(",")",["T_OBJECT_OPERATOR","->",335],["T_STRING","hasToBeTerminated",335],"(",")",")",["T_WHITESPACE"," ",335],"{",["T_WHITESPACE","\n                    ",335],["T_VARIABLE","$this",336],["T_OBJECT_OPERATOR","->",336],["T_STRING","getErrorAggregator",336],"(",")",["T_OBJECT_OPERATOR","->",336],["T_STRING","addRowToSkip",336],"(",["T_VARIABLE","$rowNum",336],")",";",["T_WHITESPACE","\n                ",336],"}",["T_WHITESPACE","\n            ",337],"}",["T_WHITESPACE","\n        ",338],"}",["T_WHITESPACE","\n        ",339],["T_IF","if",340],["T_WHITESPACE"," ",340],"(",["T_VARIABLE","$listSku",340],")",["T_WHITESPACE"," ",340],"{",["T_WHITESPACE","\n            ",340],["T_VARIABLE","$this",341],["T_OBJECT_OPERATOR","->",341],["T_STRING","deleteProductTierPrices",341],"(",["T_STRING","array_unique",341],"(",["T_VARIABLE","$listSku",341],")",",",["T_WHITESPACE"," ",341],["T_STRING","self",341],["T_DOUBLE_COLON","::",341],["T_STRING","TABLE_TIER_PRICE",341],")",";",["T_WHITESPACE","\n            ",341],["T_VARIABLE","$this",342],["T_OBJECT_OPERATOR","->",342],["T_STRING","setUpdatedAt",342],"(",["T_VARIABLE","$listSku",342],")",";",["T_WHITESPACE","\n        ",342],"}",["T_WHITESPACE","\n        ",343],["T_RETURN","return",344],["T_WHITESPACE"," ",344],["T_VARIABLE","$this",344],";",["T_WHITESPACE","\n    ",344],"}",["T_WHITESPACE","\n\n    ",345],["T_DOC_COMMENT","\/**\n     * Replace advanced pricing\n     *\n     * @return $this\n     *\/",347],["T_WHITESPACE","\n    ",351],["T_PUBLIC","public",352],["T_WHITESPACE"," ",352],["T_FUNCTION","function",352],["T_WHITESPACE"," ",352],["T_STRING","replaceAdvancedPricing",352],"(",")",["T_WHITESPACE","\n    ",352],"{",["T_WHITESPACE","\n        ",353],["T_VARIABLE","$this",354],["T_OBJECT_OPERATOR","->",354],["T_STRING","saveAndReplaceAdvancedPrices",354],"(",")",";",["T_WHITESPACE","\n        ",354],["T_RETURN","return",355],["T_WHITESPACE"," ",355],["T_VARIABLE","$this",355],";",["T_WHITESPACE","\n    ",355],"}",["T_WHITESPACE","\n\n    ",356],["T_DOC_COMMENT","\/**\n     * Save and replace advanced prices\n     *\n     * @return $this\n     * @SuppressWarnings(PHPMD.CyclomaticComplexity)\n     * @SuppressWarnings(PHPMD.NPathComplexity)\n     *\/",358],["T_WHITESPACE","\n    ",364],["T_PROTECTED","protected",365],["T_WHITESPACE"," ",365],["T_FUNCTION","function",365],["T_WHITESPACE"," ",365],["T_STRING","saveAndReplaceAdvancedPrices",365],"(",")",["T_WHITESPACE","\n    ",365],"{",["T_WHITESPACE","\n        ",366],["T_VARIABLE","$behavior",367],["T_WHITESPACE"," ",367],"=",["T_WHITESPACE"," ",367],["T_VARIABLE","$this",367],["T_OBJECT_OPERATOR","->",367],["T_STRING","getBehavior",367],"(",")",";",["T_WHITESPACE","\n        ",367],["T_IF","if",368],["T_WHITESPACE"," ",368],"(",["T_NS_SEPARATOR","\\",368],["T_STRING","Magento",368],["T_NS_SEPARATOR","\\",368],["T_STRING","ImportExport",368],["T_NS_SEPARATOR","\\",368],["T_STRING","Model",368],["T_NS_SEPARATOR","\\",368],["T_STRING","Import",368],["T_DOUBLE_COLON","::",368],["T_STRING","BEHAVIOR_REPLACE",368],["T_WHITESPACE"," ",368],["T_IS_EQUAL","==",368],["T_WHITESPACE"," ",368],["T_VARIABLE","$behavior",368],")",["T_WHITESPACE"," ",368],"{",["T_WHITESPACE","\n            ",368],["T_VARIABLE","$this",369],["T_OBJECT_OPERATOR","->",369],["T_STRING","_cachedSkuToDelete",369],["T_WHITESPACE"," ",369],"=",["T_WHITESPACE"," ",369],["T_STRING","null",369],";",["T_WHITESPACE","\n        ",369],"}",["T_WHITESPACE","\n        ",370],["T_VARIABLE","$listSku",371],["T_WHITESPACE"," ",371],"=",["T_WHITESPACE"," ",371],"[","]",";",["T_WHITESPACE","\n        ",371],["T_WHILE","while",372],["T_WHITESPACE"," ",372],"(",["T_VARIABLE","$bunch",372],["T_WHITESPACE"," ",372],"=",["T_WHITESPACE"," ",372],["T_VARIABLE","$this",372],["T_OBJECT_OPERATOR","->",372],["T_STRING","_dataSourceModel",372],["T_OBJECT_OPERATOR","->",372],["T_STRING","getNextBunch",372],"(",")",")",["T_WHITESPACE"," ",372],"{",["T_WHITESPACE","\n            ",372],["T_VARIABLE","$tierPrices",373],["T_WHITESPACE"," ",373],"=",["T_WHITESPACE"," ",373],"[","]",";",["T_WHITESPACE","\n            ",373],["T_FOREACH","foreach",374],["T_WHITESPACE"," ",374],"(",["T_VARIABLE","$bunch",374],["T_WHITESPACE"," ",374],["T_AS","as",374],["T_WHITESPACE"," ",374],["T_VARIABLE","$rowNum",374],["T_WHITESPACE"," ",374],["T_DOUBLE_ARROW","=>",374],["T_WHITESPACE"," ",374],["T_VARIABLE","$rowData",374],")",["T_WHITESPACE"," ",374],"{",["T_WHITESPACE","\n                ",374],["T_IF","if",375],["T_WHITESPACE"," ",375],"(","!",["T_VARIABLE","$this",375],["T_OBJECT_OPERATOR","->",375],["T_STRING","validateRow",375],"(",["T_VARIABLE","$rowData",375],",",["T_WHITESPACE"," ",375],["T_VARIABLE","$rowNum",375],")",")",["T_WHITESPACE"," ",375],"{",["T_WHITESPACE","\n                    ",375],["T_VARIABLE","$this",376],["T_OBJECT_OPERATOR","->",376],["T_STRING","addRowError",376],"(",["T_STRING","ValidatorInterface",376],["T_DOUBLE_COLON","::",376],["T_STRING","ERROR_SKU_IS_EMPTY",376],",",["T_WHITESPACE"," ",376],["T_VARIABLE","$rowNum",376],")",";",["T_WHITESPACE","\n                    ",376],["T_CONTINUE","continue",377],";",["T_WHITESPACE","\n                ",377],"}",["T_WHITESPACE","\n                ",378],["T_IF","if",379],["T_WHITESPACE"," ",379],"(",["T_VARIABLE","$this",379],["T_OBJECT_OPERATOR","->",379],["T_STRING","getErrorAggregator",379],"(",")",["T_OBJECT_OPERATOR","->",379],["T_STRING","hasToBeTerminated",379],"(",")",")",["T_WHITESPACE"," ",379],"{",["T_WHITESPACE","\n                    ",379],["T_VARIABLE","$this",380],["T_OBJECT_OPERATOR","->",380],["T_STRING","getErrorAggregator",380],"(",")",["T_OBJECT_OPERATOR","->",380],["T_STRING","addRowToSkip",380],"(",["T_VARIABLE","$rowNum",380],")",";",["T_WHITESPACE","\n                    ",380],["T_CONTINUE","continue",381],";",["T_WHITESPACE","\n                ",381],"}",["T_WHITESPACE","\n\n                ",382],["T_VARIABLE","$rowSku",384],["T_WHITESPACE"," ",384],"=",["T_WHITESPACE"," ",384],["T_VARIABLE","$rowData",384],"[",["T_STRING","self",384],["T_DOUBLE_COLON","::",384],["T_STRING","COL_SKU",384],"]",";",["T_WHITESPACE","\n                ",384],["T_VARIABLE","$listSku",385],"[","]",["T_WHITESPACE"," ",385],"=",["T_WHITESPACE"," ",385],["T_VARIABLE","$rowSku",385],";",["T_WHITESPACE","\n                ",385],["T_IF","if",386],["T_WHITESPACE"," ",386],"(","!",["T_EMPTY","empty",386],"(",["T_VARIABLE","$rowData",386],"[",["T_STRING","self",386],["T_DOUBLE_COLON","::",386],["T_STRING","COL_TIER_PRICE_WEBSITE",386],"]",")",")",["T_WHITESPACE"," ",386],"{",["T_WHITESPACE","\n                    ",386],["T_VARIABLE","$tierPrices",387],"[",["T_VARIABLE","$rowSku",387],"]","[","]",["T_WHITESPACE"," ",387],"=",["T_WHITESPACE"," ",387],"[",["T_WHITESPACE","\n                        ",387],["T_CONSTANT_ENCAPSED_STRING","'all_groups'",388],["T_WHITESPACE"," ",388],["T_DOUBLE_ARROW","=>",388],["T_WHITESPACE"," ",388],["T_VARIABLE","$rowData",388],"[",["T_STRING","self",388],["T_DOUBLE_COLON","::",388],["T_STRING","COL_TIER_PRICE_CUSTOMER_GROUP",388],"]",["T_WHITESPACE"," ",388],["T_IS_EQUAL","==",388],["T_WHITESPACE"," ",388],["T_STRING","self",388],["T_DOUBLE_COLON","::",388],["T_STRING","VALUE_ALL_GROUPS",388],",",["T_WHITESPACE","\n                        ",388],["T_CONSTANT_ENCAPSED_STRING","'customer_group_id'",389],["T_WHITESPACE"," ",389],["T_DOUBLE_ARROW","=>",389],["T_WHITESPACE"," ",389],["T_VARIABLE","$this",389],["T_OBJECT_OPERATOR","->",389],["T_STRING","getCustomerGroupId",389],"(",["T_WHITESPACE","\n                            ",389],["T_VARIABLE","$rowData",390],"[",["T_STRING","self",390],["T_DOUBLE_COLON","::",390],["T_STRING","COL_TIER_PRICE_CUSTOMER_GROUP",390],"]",["T_WHITESPACE","\n                        ",390],")",",",["T_WHITESPACE","\n                        ",391],["T_CONSTANT_ENCAPSED_STRING","'qty'",392],["T_WHITESPACE"," ",392],["T_DOUBLE_ARROW","=>",392],["T_WHITESPACE"," ",392],["T_VARIABLE","$rowData",392],"[",["T_STRING","self",392],["T_DOUBLE_COLON","::",392],["T_STRING","COL_TIER_PRICE_QTY",392],"]",",",["T_WHITESPACE","\n                        ",392],["T_CONSTANT_ENCAPSED_STRING","'value'",393],["T_WHITESPACE"," ",393],["T_DOUBLE_ARROW","=>",393],["T_WHITESPACE"," ",393],["T_VARIABLE","$rowData",393],"[",["T_STRING","self",393],["T_DOUBLE_COLON","::",393],["T_STRING","COL_TIER_PRICE_TYPE",393],"]",["T_WHITESPACE"," ",393],["T_IS_IDENTICAL","===",393],["T_WHITESPACE"," ",393],["T_STRING","self",393],["T_DOUBLE_COLON","::",393],["T_STRING","TIER_PRICE_TYPE_FIXED",393],["T_WHITESPACE","\n                            ",393],"?",["T_WHITESPACE"," ",394],["T_VARIABLE","$rowData",394],"[",["T_STRING","self",394],["T_DOUBLE_COLON","::",394],["T_STRING","COL_TIER_PRICE",394],"]",["T_WHITESPACE"," ",394],":",["T_WHITESPACE"," ",394],["T_LNUMBER","0",394],",",["T_WHITESPACE","\n                        ",394],["T_CONSTANT_ENCAPSED_STRING","'percentage_value'",395],["T_WHITESPACE"," ",395],["T_DOUBLE_ARROW","=>",395],["T_WHITESPACE"," ",395],["T_VARIABLE","$rowData",395],"[",["T_STRING","self",395],["T_DOUBLE_COLON","::",395],["T_STRING","COL_TIER_PRICE_TYPE",395],"]",["T_WHITESPACE"," ",395],["T_IS_IDENTICAL","===",395],["T_WHITESPACE"," ",395],["T_STRING","self",395],["T_DOUBLE_COLON","::",395],["T_STRING","TIER_PRICE_TYPE_PERCENT",395],["T_WHITESPACE","\n                            ",395],"?",["T_WHITESPACE"," ",396],["T_VARIABLE","$rowData",396],"[",["T_STRING","self",396],["T_DOUBLE_COLON","::",396],["T_STRING","COL_TIER_PRICE",396],"]",["T_WHITESPACE"," ",396],":",["T_WHITESPACE"," ",396],["T_STRING","null",396],",",["T_WHITESPACE","\n                        ",396],["T_CONSTANT_ENCAPSED_STRING","'website_id'",397],["T_WHITESPACE"," ",397],["T_DOUBLE_ARROW","=>",397],["T_WHITESPACE"," ",397],["T_VARIABLE","$this",397],["T_OBJECT_OPERATOR","->",397],["T_STRING","getWebsiteId",397],"(",["T_VARIABLE","$rowData",397],"[",["T_STRING","self",397],["T_DOUBLE_COLON","::",397],["T_STRING","COL_TIER_PRICE_WEBSITE",397],"]",")",["T_WHITESPACE","\n                    ",397],"]",";",["T_WHITESPACE","\n                ",398],"}",["T_WHITESPACE","\n            ",399],"}",["T_WHITESPACE","\n            ",400],["T_IF","if",401],["T_WHITESPACE"," ",401],"(",["T_NS_SEPARATOR","\\",401],["T_STRING","Magento",401],["T_NS_SEPARATOR","\\",401],["T_STRING","ImportExport",401],["T_NS_SEPARATOR","\\",401],["T_STRING","Model",401],["T_NS_SEPARATOR","\\",401],["T_STRING","Import",401],["T_DOUBLE_COLON","::",401],["T_STRING","BEHAVIOR_REPLACE",401],["T_WHITESPACE"," ",401],["T_IS_EQUAL","==",401],["T_WHITESPACE"," ",401],["T_VARIABLE","$behavior",401],")",["T_WHITESPACE"," ",401],"{",["T_WHITESPACE","\n                ",401],["T_IF","if",402],["T_WHITESPACE"," ",402],"(",["T_VARIABLE","$listSku",402],")",["T_WHITESPACE"," ",402],"{",["T_WHITESPACE","\n                    ",402],["T_VARIABLE","$this",403],["T_OBJECT_OPERATOR","->",403],["T_STRING","processCountNewPrices",403],"(",["T_VARIABLE","$tierPrices",403],")",";",["T_WHITESPACE","\n                    ",403],["T_IF","if",404],["T_WHITESPACE"," ",404],"(",["T_VARIABLE","$this",404],["T_OBJECT_OPERATOR","->",404],["T_STRING","deleteProductTierPrices",404],"(",["T_STRING","array_unique",404],"(",["T_VARIABLE","$listSku",404],")",",",["T_WHITESPACE"," ",404],["T_STRING","self",404],["T_DOUBLE_COLON","::",404],["T_STRING","TABLE_TIER_PRICE",404],")",")",["T_WHITESPACE"," ",404],"{",["T_WHITESPACE","\n                        ",404],["T_VARIABLE","$this",405],["T_OBJECT_OPERATOR","->",405],["T_STRING","saveProductPrices",405],"(",["T_VARIABLE","$tierPrices",405],",",["T_WHITESPACE"," ",405],["T_STRING","self",405],["T_DOUBLE_COLON","::",405],["T_STRING","TABLE_TIER_PRICE",405],")",";",["T_WHITESPACE","\n                        ",405],["T_VARIABLE","$this",406],["T_OBJECT_OPERATOR","->",406],["T_STRING","setUpdatedAt",406],"(",["T_VARIABLE","$listSku",406],")",";",["T_WHITESPACE","\n                    ",406],"}",["T_WHITESPACE","\n                ",407],"}",["T_WHITESPACE","\n            ",408],"}",["T_WHITESPACE"," ",409],["T_ELSEIF","elseif",409],["T_WHITESPACE"," ",409],"(",["T_NS_SEPARATOR","\\",409],["T_STRING","Magento",409],["T_NS_SEPARATOR","\\",409],["T_STRING","ImportExport",409],["T_NS_SEPARATOR","\\",409],["T_STRING","Model",409],["T_NS_SEPARATOR","\\",409],["T_STRING","Import",409],["T_DOUBLE_COLON","::",409],["T_STRING","BEHAVIOR_APPEND",409],["T_WHITESPACE"," ",409],["T_IS_EQUAL","==",409],["T_WHITESPACE"," ",409],["T_VARIABLE","$behavior",409],")",["T_WHITESPACE"," ",409],"{",["T_WHITESPACE","\n                ",409],["T_VARIABLE","$this",410],["T_OBJECT_OPERATOR","->",410],["T_STRING","processCountExistingPrices",410],"(",["T_VARIABLE","$tierPrices",410],",",["T_WHITESPACE"," ",410],["T_STRING","self",410],["T_DOUBLE_COLON","::",410],["T_STRING","TABLE_TIER_PRICE",410],")",["T_WHITESPACE","\n                    ",410],["T_OBJECT_OPERATOR","->",411],["T_STRING","processCountNewPrices",411],"(",["T_VARIABLE","$tierPrices",411],")",";",["T_WHITESPACE","\n                ",411],["T_VARIABLE","$this",412],["T_OBJECT_OPERATOR","->",412],["T_STRING","saveProductPrices",412],"(",["T_VARIABLE","$tierPrices",412],",",["T_WHITESPACE"," ",412],["T_STRING","self",412],["T_DOUBLE_COLON","::",412],["T_STRING","TABLE_TIER_PRICE",412],")",";",["T_WHITESPACE","\n                ",412],["T_IF","if",413],["T_WHITESPACE"," ",413],"(",["T_VARIABLE","$listSku",413],")",["T_WHITESPACE"," ",413],"{",["T_WHITESPACE","\n                    ",413],["T_VARIABLE","$this",414],["T_OBJECT_OPERATOR","->",414],["T_STRING","setUpdatedAt",414],"(",["T_VARIABLE","$listSku",414],")",";",["T_WHITESPACE","\n                ",414],"}",["T_WHITESPACE","\n            ",415],"}",["T_WHITESPACE","\n        ",416],"}",["T_WHITESPACE","\n        ",417],["T_RETURN","return",418],["T_WHITESPACE"," ",418],["T_VARIABLE","$this",418],";",["T_WHITESPACE","\n    ",418],"}",["T_WHITESPACE","\n\n    ",419],["T_DOC_COMMENT","\/**\n     * Save product prices.\n     *\n     * @param array $priceData\n     * @param string $table\n     * @return $this\n     *\/",421],["T_WHITESPACE","\n    ",427],["T_PROTECTED","protected",428],["T_WHITESPACE"," ",428],["T_FUNCTION","function",428],["T_WHITESPACE"," ",428],["T_STRING","saveProductPrices",428],"(",["T_ARRAY","array",428],["T_WHITESPACE"," ",428],["T_VARIABLE","$priceData",428],",",["T_WHITESPACE"," ",428],["T_VARIABLE","$table",428],")",["T_WHITESPACE","\n    ",428],"{",["T_WHITESPACE","\n        ",429],["T_IF","if",430],["T_WHITESPACE"," ",430],"(",["T_VARIABLE","$priceData",430],")",["T_WHITESPACE"," ",430],"{",["T_WHITESPACE","\n            ",430],["T_VARIABLE","$tableName",431],["T_WHITESPACE"," ",431],"=",["T_WHITESPACE"," ",431],["T_VARIABLE","$this",431],["T_OBJECT_OPERATOR","->",431],["T_STRING","_resourceFactory",431],["T_OBJECT_OPERATOR","->",431],["T_STRING","create",431],"(",")",["T_OBJECT_OPERATOR","->",431],["T_STRING","getTable",431],"(",["T_VARIABLE","$table",431],")",";",["T_WHITESPACE","\n            ",431],["T_VARIABLE","$priceIn",432],["T_WHITESPACE"," ",432],"=",["T_WHITESPACE"," ",432],"[","]",";",["T_WHITESPACE","\n            ",432],["T_VARIABLE","$entityIds",433],["T_WHITESPACE"," ",433],"=",["T_WHITESPACE"," ",433],"[","]",";",["T_WHITESPACE","\n            ",433],["T_VARIABLE","$oldSkus",434],["T_WHITESPACE"," ",434],"=",["T_WHITESPACE"," ",434],["T_VARIABLE","$this",434],["T_OBJECT_OPERATOR","->",434],["T_STRING","retrieveOldSkus",434],"(",")",";",["T_WHITESPACE","\n            ",434],["T_FOREACH","foreach",435],["T_WHITESPACE"," ",435],"(",["T_VARIABLE","$priceData",435],["T_WHITESPACE"," ",435],["T_AS","as",435],["T_WHITESPACE"," ",435],["T_VARIABLE","$sku",435],["T_WHITESPACE"," ",435],["T_DOUBLE_ARROW","=>",435],["T_WHITESPACE"," ",435],["T_VARIABLE","$priceRows",435],")",["T_WHITESPACE"," ",435],"{",["T_WHITESPACE","\n                ",435],["T_IF","if",436],["T_WHITESPACE"," ",436],"(",["T_ISSET","isset",436],"(",["T_VARIABLE","$oldSkus",436],"[",["T_VARIABLE","$sku",436],"]",")",")",["T_WHITESPACE"," ",436],"{",["T_WHITESPACE","\n                    ",436],["T_VARIABLE","$productId",437],["T_WHITESPACE"," ",437],"=",["T_WHITESPACE"," ",437],["T_VARIABLE","$oldSkus",437],"[",["T_VARIABLE","$sku",437],"]",";",["T_WHITESPACE","\n                    ",437],["T_FOREACH","foreach",438],["T_WHITESPACE"," ",438],"(",["T_VARIABLE","$priceRows",438],["T_WHITESPACE"," ",438],["T_AS","as",438],["T_WHITESPACE"," ",438],["T_VARIABLE","$row",438],")",["T_WHITESPACE"," ",438],"{",["T_WHITESPACE","\n                        ",438],["T_VARIABLE","$row",439],"[",["T_VARIABLE","$this",439],["T_OBJECT_OPERATOR","->",439],["T_STRING","getProductEntityLinkField",439],"(",")","]",["T_WHITESPACE"," ",439],"=",["T_WHITESPACE"," ",439],["T_VARIABLE","$productId",439],";",["T_WHITESPACE","\n                        ",439],["T_VARIABLE","$priceIn",440],"[","]",["T_WHITESPACE"," ",440],"=",["T_WHITESPACE"," ",440],["T_VARIABLE","$row",440],";",["T_WHITESPACE","\n                        ",440],["T_VARIABLE","$entityIds",441],"[","]",["T_WHITESPACE"," ",441],"=",["T_WHITESPACE"," ",441],["T_VARIABLE","$productId",441],";",["T_WHITESPACE","\n                    ",441],"}",["T_WHITESPACE","\n                ",442],"}",["T_WHITESPACE","\n            ",443],"}",["T_WHITESPACE","\n            ",444],["T_IF","if",445],["T_WHITESPACE"," ",445],"(",["T_VARIABLE","$priceIn",445],")",["T_WHITESPACE"," ",445],"{",["T_WHITESPACE","\n                ",445],["T_VARIABLE","$this",446],["T_OBJECT_OPERATOR","->",446],["T_STRING","_connection",446],["T_OBJECT_OPERATOR","->",446],["T_STRING","insertOnDuplicate",446],"(",["T_VARIABLE","$tableName",446],",",["T_WHITESPACE"," ",446],["T_VARIABLE","$priceIn",446],",",["T_WHITESPACE"," ",446],"[",["T_CONSTANT_ENCAPSED_STRING","'value'",446],",",["T_WHITESPACE"," ",446],["T_CONSTANT_ENCAPSED_STRING","'percentage_value'",446],"]",")",";",["T_WHITESPACE","\n            ",446],"}",["T_WHITESPACE","\n        ",447],"}",["T_WHITESPACE","\n        ",448],["T_RETURN","return",449],["T_WHITESPACE"," ",449],["T_VARIABLE","$this",449],";",["T_WHITESPACE","\n    ",449],"}",["T_WHITESPACE","\n\n    ",450],["T_DOC_COMMENT","\/**\n     * Deletes tier prices prices.\n     *\n     * @param array $listSku\n     * @param string $table\n     * @return boolean\n     *\/",452],["T_WHITESPACE","\n    ",458],["T_PROTECTED","protected",459],["T_WHITESPACE"," ",459],["T_FUNCTION","function",459],["T_WHITESPACE"," ",459],["T_STRING","deleteProductTierPrices",459],"(",["T_ARRAY","array",459],["T_WHITESPACE"," ",459],["T_VARIABLE","$listSku",459],",",["T_WHITESPACE"," ",459],["T_VARIABLE","$table",459],")",["T_WHITESPACE","\n    ",459],"{",["T_WHITESPACE","\n        ",460],["T_VARIABLE","$tableName",461],["T_WHITESPACE"," ",461],"=",["T_WHITESPACE"," ",461],["T_VARIABLE","$this",461],["T_OBJECT_OPERATOR","->",461],["T_STRING","_resourceFactory",461],["T_OBJECT_OPERATOR","->",461],["T_STRING","create",461],"(",")",["T_OBJECT_OPERATOR","->",461],["T_STRING","getTable",461],"(",["T_VARIABLE","$table",461],")",";",["T_WHITESPACE","\n        ",461],["T_VARIABLE","$productEntityLinkField",462],["T_WHITESPACE"," ",462],"=",["T_WHITESPACE"," ",462],["T_VARIABLE","$this",462],["T_OBJECT_OPERATOR","->",462],["T_STRING","getProductEntityLinkField",462],"(",")",";",["T_WHITESPACE","\n        ",462],["T_IF","if",463],["T_WHITESPACE"," ",463],"(",["T_VARIABLE","$tableName",463],["T_WHITESPACE"," ",463],["T_BOOLEAN_AND","&&",463],["T_WHITESPACE"," ",463],["T_VARIABLE","$listSku",463],")",["T_WHITESPACE"," ",463],"{",["T_WHITESPACE","\n            ",463],["T_IF","if",464],["T_WHITESPACE"," ",464],"(","!",["T_VARIABLE","$this",464],["T_OBJECT_OPERATOR","->",464],["T_STRING","_cachedSkuToDelete",464],")",["T_WHITESPACE"," ",464],"{",["T_WHITESPACE","\n                ",464],["T_VARIABLE","$this",465],["T_OBJECT_OPERATOR","->",465],["T_STRING","_cachedSkuToDelete",465],["T_WHITESPACE"," ",465],"=",["T_WHITESPACE"," ",465],["T_VARIABLE","$this",465],["T_OBJECT_OPERATOR","->",465],["T_STRING","_connection",465],["T_OBJECT_OPERATOR","->",465],["T_STRING","fetchCol",465],"(",["T_WHITESPACE","\n                    ",465],["T_VARIABLE","$this",466],["T_OBJECT_OPERATOR","->",466],["T_STRING","_connection",466],["T_OBJECT_OPERATOR","->",466],["T_STRING","select",466],"(",")",["T_WHITESPACE","\n                        ",466],["T_OBJECT_OPERATOR","->",467],["T_STRING","from",467],"(",["T_VARIABLE","$this",467],["T_OBJECT_OPERATOR","->",467],["T_STRING","_catalogProductEntity",467],",",["T_WHITESPACE"," ",467],["T_VARIABLE","$productEntityLinkField",467],")",["T_WHITESPACE","\n                        ",467],["T_OBJECT_OPERATOR","->",468],["T_STRING","where",468],"(",["T_CONSTANT_ENCAPSED_STRING","'sku IN (?)'",468],",",["T_WHITESPACE"," ",468],["T_VARIABLE","$listSku",468],")",["T_WHITESPACE","\n                ",468],")",";",["T_WHITESPACE","\n            ",469],"}",["T_WHITESPACE","\n            ",470],["T_IF","if",471],["T_WHITESPACE"," ",471],"(",["T_VARIABLE","$this",471],["T_OBJECT_OPERATOR","->",471],["T_STRING","_cachedSkuToDelete",471],")",["T_WHITESPACE"," ",471],"{",["T_WHITESPACE","\n                ",471],["T_TRY","try",472],["T_WHITESPACE"," ",472],"{",["T_WHITESPACE","\n                    ",472],["T_VARIABLE","$this",473],["T_OBJECT_OPERATOR","->",473],["T_STRING","countItemsDeleted",473],["T_WHITESPACE"," ",473],["T_PLUS_EQUAL","+=",473],["T_WHITESPACE"," ",473],["T_VARIABLE","$this",473],["T_OBJECT_OPERATOR","->",473],["T_STRING","_connection",473],["T_OBJECT_OPERATOR","->",473],["T_STRING","delete",473],"(",["T_WHITESPACE","\n                        ",473],["T_VARIABLE","$tableName",474],",",["T_WHITESPACE","\n                        ",474],["T_VARIABLE","$this",475],["T_OBJECT_OPERATOR","->",475],["T_STRING","_connection",475],["T_OBJECT_OPERATOR","->",475],["T_STRING","quoteInto",475],"(",["T_VARIABLE","$productEntityLinkField",475],["T_WHITESPACE"," ",475],".",["T_WHITESPACE"," ",475],["T_CONSTANT_ENCAPSED_STRING","' IN (?)'",475],",",["T_WHITESPACE"," ",475],["T_VARIABLE","$this",475],["T_OBJECT_OPERATOR","->",475],["T_STRING","_cachedSkuToDelete",475],")",["T_WHITESPACE","\n                    ",475],")",";",["T_WHITESPACE","\n                    ",476],["T_RETURN","return",477],["T_WHITESPACE"," ",477],["T_STRING","true",477],";",["T_WHITESPACE","\n                ",477],"}",["T_WHITESPACE"," ",478],["T_CATCH","catch",478],["T_WHITESPACE"," ",478],"(",["T_NS_SEPARATOR","\\",478],["T_STRING","Exception",478],["T_WHITESPACE"," ",478],["T_VARIABLE","$e",478],")",["T_WHITESPACE"," ",478],"{",["T_WHITESPACE","\n                    ",478],["T_RETURN","return",479],["T_WHITESPACE"," ",479],["T_STRING","false",479],";",["T_WHITESPACE","\n                ",479],"}",["T_WHITESPACE","\n            ",480],"}",["T_WHITESPACE"," ",481],["T_ELSE","else",481],["T_WHITESPACE"," ",481],"{",["T_WHITESPACE","\n                ",481],["T_VARIABLE","$this",482],["T_OBJECT_OPERATOR","->",482],["T_STRING","addRowError",482],"(",["T_STRING","ValidatorInterface",482],["T_DOUBLE_COLON","::",482],["T_STRING","ERROR_SKU_IS_EMPTY",482],",",["T_WHITESPACE"," ",482],["T_LNUMBER","0",482],")",";",["T_WHITESPACE","\n                ",482],["T_RETURN","return",483],["T_WHITESPACE"," ",483],["T_STRING","false",483],";",["T_WHITESPACE","\n            ",483],"}",["T_WHITESPACE","\n        ",484],"}",["T_WHITESPACE"," ",485],["T_ELSE","else",485],["T_WHITESPACE"," ",485],"{",["T_WHITESPACE","\n            ",485],["T_RETURN","return",486],["T_WHITESPACE"," ",486],["T_STRING","false",486],";",["T_WHITESPACE","\n        ",486],"}",["T_WHITESPACE","\n    ",487],"}",["T_WHITESPACE","\n\n    ",488],["T_DOC_COMMENT","\/**\n     * Set updated_at for product\n     *\n     * @param array $listSku\n     * @return $this\n     *\/",490],["T_WHITESPACE","\n    ",495],["T_PROTECTED","protected",496],["T_WHITESPACE"," ",496],["T_FUNCTION","function",496],["T_WHITESPACE"," ",496],["T_STRING","setUpdatedAt",496],"(",["T_ARRAY","array",496],["T_WHITESPACE"," ",496],["T_VARIABLE","$listSku",496],")",["T_WHITESPACE","\n    ",496],"{",["T_WHITESPACE","\n        ",497],["T_VARIABLE","$updatedAt",498],["T_WHITESPACE"," ",498],"=",["T_WHITESPACE"," ",498],["T_VARIABLE","$this",498],["T_OBJECT_OPERATOR","->",498],["T_STRING","dateTime",498],["T_OBJECT_OPERATOR","->",498],["T_STRING","gmtDate",498],"(",["T_CONSTANT_ENCAPSED_STRING","'Y-m-d H:i:s'",498],")",";",["T_WHITESPACE","\n        ",498],["T_VARIABLE","$this",499],["T_OBJECT_OPERATOR","->",499],["T_STRING","_connection",499],["T_OBJECT_OPERATOR","->",499],["T_STRING","update",499],"(",["T_WHITESPACE","\n            ",499],["T_VARIABLE","$this",500],["T_OBJECT_OPERATOR","->",500],["T_STRING","_catalogProductEntity",500],",",["T_WHITESPACE","\n            ",500],"[",["T_NS_SEPARATOR","\\",501],["T_STRING","Magento",501],["T_NS_SEPARATOR","\\",501],["T_STRING","Catalog",501],["T_NS_SEPARATOR","\\",501],["T_STRING","Model",501],["T_NS_SEPARATOR","\\",501],["T_STRING","Category",501],["T_DOUBLE_COLON","::",501],["T_STRING","KEY_UPDATED_AT",501],["T_WHITESPACE"," ",501],["T_DOUBLE_ARROW","=>",501],["T_WHITESPACE"," ",501],["T_VARIABLE","$updatedAt",501],"]",",",["T_WHITESPACE","\n            ",501],["T_VARIABLE","$this",502],["T_OBJECT_OPERATOR","->",502],["T_STRING","_connection",502],["T_OBJECT_OPERATOR","->",502],["T_STRING","quoteInto",502],"(",["T_CONSTANT_ENCAPSED_STRING","'sku IN (?)'",502],",",["T_WHITESPACE"," ",502],["T_STRING","array_unique",502],"(",["T_VARIABLE","$listSku",502],")",")",["T_WHITESPACE","\n        ",502],")",";",["T_WHITESPACE","\n        ",503],["T_RETURN","return",504],["T_WHITESPACE"," ",504],["T_VARIABLE","$this",504],";",["T_WHITESPACE","\n    ",504],"}",["T_WHITESPACE","\n\n    ",505],["T_DOC_COMMENT","\/**\n     * Get website id by code\n     *\n     * @param string $websiteCode\n     * @return array|int|string\n     *\/",507],["T_WHITESPACE","\n    ",512],["T_PROTECTED","protected",513],["T_WHITESPACE"," ",513],["T_FUNCTION","function",513],["T_WHITESPACE"," ",513],["T_STRING","getWebSiteId",513],"(",["T_VARIABLE","$websiteCode",513],")",["T_WHITESPACE","\n    ",513],"{",["T_WHITESPACE","\n        ",514],["T_VARIABLE","$result",515],["T_WHITESPACE"," ",515],"=",["T_WHITESPACE"," ",515],["T_VARIABLE","$websiteCode",515],["T_WHITESPACE"," ",515],["T_IS_EQUAL","==",515],["T_WHITESPACE"," ",515],["T_VARIABLE","$this",515],["T_OBJECT_OPERATOR","->",515],["T_STRING","_getValidator",515],"(",["T_STRING","self",515],["T_DOUBLE_COLON","::",515],["T_STRING","VALIDATOR_WEBSITE",515],")",["T_OBJECT_OPERATOR","->",515],["T_STRING","getAllWebsitesValue",515],"(",")",["T_WHITESPACE"," ",515],["T_BOOLEAN_OR","||",515],["T_WHITESPACE","\n        ",515],["T_VARIABLE","$this",516],["T_OBJECT_OPERATOR","->",516],["T_STRING","_catalogData",516],["T_OBJECT_OPERATOR","->",516],["T_STRING","isPriceGlobal",516],"(",")",["T_WHITESPACE"," ",516],"?",["T_WHITESPACE"," ",516],["T_LNUMBER","0",516],["T_WHITESPACE"," ",516],":",["T_WHITESPACE"," ",516],["T_VARIABLE","$this",516],["T_OBJECT_OPERATOR","->",516],["T_STRING","_storeResolver",516],["T_OBJECT_OPERATOR","->",516],["T_STRING","getWebsiteCodeToId",516],"(",["T_VARIABLE","$websiteCode",516],")",";",["T_WHITESPACE","\n        ",516],["T_RETURN","return",517],["T_WHITESPACE"," ",517],["T_VARIABLE","$result",517],";",["T_WHITESPACE","\n    ",517],"}",["T_WHITESPACE","\n\n    ",518],["T_DOC_COMMENT","\/**\n     * Get customer group id\n     *\n     * @param string $customerGroup\n     * @return int\n     *\/",520],["T_WHITESPACE","\n    ",525],["T_PROTECTED","protected",526],["T_WHITESPACE"," ",526],["T_FUNCTION","function",526],["T_WHITESPACE"," ",526],["T_STRING","getCustomerGroupId",526],"(",["T_VARIABLE","$customerGroup",526],")",["T_WHITESPACE","\n    ",526],"{",["T_WHITESPACE","\n        ",527],["T_VARIABLE","$customerGroups",528],["T_WHITESPACE"," ",528],"=",["T_WHITESPACE"," ",528],["T_VARIABLE","$this",528],["T_OBJECT_OPERATOR","->",528],["T_STRING","_getValidator",528],"(",["T_STRING","self",528],["T_DOUBLE_COLON","::",528],["T_STRING","VALIDATOR_TEAR_PRICE",528],")",["T_OBJECT_OPERATOR","->",528],["T_STRING","getCustomerGroups",528],"(",")",";",["T_WHITESPACE","\n        ",528],["T_RETURN","return",529],["T_WHITESPACE"," ",529],["T_VARIABLE","$customerGroup",529],["T_WHITESPACE"," ",529],["T_IS_EQUAL","==",529],["T_WHITESPACE"," ",529],["T_STRING","self",529],["T_DOUBLE_COLON","::",529],["T_STRING","VALUE_ALL_GROUPS",529],["T_WHITESPACE"," ",529],"?",["T_WHITESPACE"," ",529],["T_LNUMBER","0",529],["T_WHITESPACE"," ",529],":",["T_WHITESPACE"," ",529],["T_VARIABLE","$customerGroups",529],"[",["T_VARIABLE","$customerGroup",529],"]",";",["T_WHITESPACE","\n    ",529],"}",["T_WHITESPACE","\n\n    ",530],["T_DOC_COMMENT","\/**\n     * Retrieve product skus\n     *\n     * @return array\n     *\/",532],["T_WHITESPACE","\n    ",536],["T_PROTECTED","protected",537],["T_WHITESPACE"," ",537],["T_FUNCTION","function",537],["T_WHITESPACE"," ",537],["T_STRING","retrieveOldSkus",537],"(",")",["T_WHITESPACE","\n    ",537],"{",["T_WHITESPACE","\n        ",538],["T_IF","if",539],["T_WHITESPACE"," ",539],"(",["T_VARIABLE","$this",539],["T_OBJECT_OPERATOR","->",539],["T_STRING","_oldSkus",539],["T_WHITESPACE"," ",539],["T_IS_IDENTICAL","===",539],["T_WHITESPACE"," ",539],["T_STRING","null",539],")",["T_WHITESPACE"," ",539],"{",["T_WHITESPACE","\n            ",539],["T_VARIABLE","$this",540],["T_OBJECT_OPERATOR","->",540],["T_STRING","_oldSkus",540],["T_WHITESPACE"," ",540],"=",["T_WHITESPACE"," ",540],["T_VARIABLE","$this",540],["T_OBJECT_OPERATOR","->",540],["T_STRING","_connection",540],["T_OBJECT_OPERATOR","->",540],["T_STRING","fetchPairs",540],"(",["T_WHITESPACE","\n                ",540],["T_VARIABLE","$this",541],["T_OBJECT_OPERATOR","->",541],["T_STRING","_connection",541],["T_OBJECT_OPERATOR","->",541],["T_STRING","select",541],"(",")",["T_OBJECT_OPERATOR","->",541],["T_STRING","from",541],"(",["T_WHITESPACE","\n                    ",541],["T_VARIABLE","$this",542],["T_OBJECT_OPERATOR","->",542],["T_STRING","_catalogProductEntity",542],",",["T_WHITESPACE","\n                    ",542],"[",["T_CONSTANT_ENCAPSED_STRING","'sku'",543],",",["T_WHITESPACE"," ",543],["T_VARIABLE","$this",543],["T_OBJECT_OPERATOR","->",543],["T_STRING","getProductEntityLinkField",543],"(",")","]",["T_WHITESPACE","\n                ",543],")",["T_WHITESPACE","\n            ",544],")",";",["T_WHITESPACE","\n        ",545],"}",["T_WHITESPACE","\n        ",546],["T_RETURN","return",547],["T_WHITESPACE"," ",547],["T_VARIABLE","$this",547],["T_OBJECT_OPERATOR","->",547],["T_STRING","_oldSkus",547],";",["T_WHITESPACE","\n    ",547],"}",["T_WHITESPACE","\n\n    ",548],["T_DOC_COMMENT","\/**\n     * Count existing prices\n     *\n     * @param array $prices\n     * @param string $table\n     * @return $this\n     *\/",550],["T_WHITESPACE","\n    ",556],["T_PROTECTED","protected",557],["T_WHITESPACE"," ",557],["T_FUNCTION","function",557],["T_WHITESPACE"," ",557],["T_STRING","processCountExistingPrices",557],"(",["T_VARIABLE","$prices",557],",",["T_WHITESPACE"," ",557],["T_VARIABLE","$table",557],")",["T_WHITESPACE","\n    ",557],"{",["T_WHITESPACE","\n        ",558],["T_VARIABLE","$oldSkus",559],["T_WHITESPACE"," ",559],"=",["T_WHITESPACE"," ",559],["T_VARIABLE","$this",559],["T_OBJECT_OPERATOR","->",559],["T_STRING","retrieveOldSkus",559],"(",")",";",["T_WHITESPACE","\n        ",559],["T_VARIABLE","$existProductIds",560],["T_WHITESPACE"," ",560],"=",["T_WHITESPACE"," ",560],["T_STRING","array_intersect_key",560],"(",["T_VARIABLE","$oldSkus",560],",",["T_WHITESPACE"," ",560],["T_VARIABLE","$prices",560],")",";",["T_WHITESPACE","\n        ",560],["T_IF","if",561],["T_WHITESPACE"," ",561],"(","!",["T_STRING","count",561],"(",["T_VARIABLE","$existProductIds",561],")",")",["T_WHITESPACE"," ",561],"{",["T_WHITESPACE","\n            ",561],["T_RETURN","return",562],["T_WHITESPACE"," ",562],["T_VARIABLE","$this",562],";",["T_WHITESPACE","\n        ",562],"}",["T_WHITESPACE","\n\n        ",563],["T_VARIABLE","$tableName",565],["T_WHITESPACE"," ",565],"=",["T_WHITESPACE"," ",565],["T_VARIABLE","$this",565],["T_OBJECT_OPERATOR","->",565],["T_STRING","_resourceFactory",565],["T_OBJECT_OPERATOR","->",565],["T_STRING","create",565],"(",")",["T_OBJECT_OPERATOR","->",565],["T_STRING","getTable",565],"(",["T_VARIABLE","$table",565],")",";",["T_WHITESPACE","\n        ",565],["T_VARIABLE","$productEntityLinkField",566],["T_WHITESPACE"," ",566],"=",["T_WHITESPACE"," ",566],["T_VARIABLE","$this",566],["T_OBJECT_OPERATOR","->",566],["T_STRING","getProductEntityLinkField",566],"(",")",";",["T_WHITESPACE","\n        ",566],["T_VARIABLE","$existingPrices",567],["T_WHITESPACE"," ",567],"=",["T_WHITESPACE"," ",567],["T_VARIABLE","$this",567],["T_OBJECT_OPERATOR","->",567],["T_STRING","_connection",567],["T_OBJECT_OPERATOR","->",567],["T_STRING","fetchAssoc",567],"(",["T_WHITESPACE","\n            ",567],["T_VARIABLE","$this",568],["T_OBJECT_OPERATOR","->",568],["T_STRING","_connection",568],["T_OBJECT_OPERATOR","->",568],["T_STRING","select",568],"(",")",["T_OBJECT_OPERATOR","->",568],["T_STRING","from",568],"(",["T_WHITESPACE","\n                ",568],["T_VARIABLE","$tableName",569],",",["T_WHITESPACE","\n                ",569],"[",["T_CONSTANT_ENCAPSED_STRING","'value_id'",570],",",["T_WHITESPACE"," ",570],["T_VARIABLE","$productEntityLinkField",570],",",["T_WHITESPACE"," ",570],["T_CONSTANT_ENCAPSED_STRING","'all_groups'",570],",",["T_WHITESPACE"," ",570],["T_CONSTANT_ENCAPSED_STRING","'customer_group_id'",570],"]",["T_WHITESPACE","\n            ",570],")",["T_OBJECT_OPERATOR","->",571],["T_STRING","where",571],"(",["T_VARIABLE","$productEntityLinkField",571],["T_WHITESPACE"," ",571],".",["T_WHITESPACE"," ",571],["T_CONSTANT_ENCAPSED_STRING","' IN (?)'",571],",",["T_WHITESPACE"," ",571],["T_VARIABLE","$existProductIds",571],")",["T_WHITESPACE","\n        ",571],")",";",["T_WHITESPACE","\n        ",572],["T_FOREACH","foreach",573],["T_WHITESPACE"," ",573],"(",["T_VARIABLE","$existingPrices",573],["T_WHITESPACE"," ",573],["T_AS","as",573],["T_WHITESPACE"," ",573],["T_VARIABLE","$existingPrice",573],")",["T_WHITESPACE"," ",573],"{",["T_WHITESPACE","\n            ",573],["T_FOREACH","foreach",574],["T_WHITESPACE"," ",574],"(",["T_VARIABLE","$prices",574],["T_WHITESPACE"," ",574],["T_AS","as",574],["T_WHITESPACE"," ",574],["T_VARIABLE","$sku",574],["T_WHITESPACE"," ",574],["T_DOUBLE_ARROW","=>",574],["T_WHITESPACE"," ",574],["T_VARIABLE","$skuPrices",574],")",["T_WHITESPACE"," ",574],"{",["T_WHITESPACE","\n                ",574],["T_IF","if",575],["T_WHITESPACE"," ",575],"(",["T_ISSET","isset",575],"(",["T_VARIABLE","$oldSkus",575],"[",["T_VARIABLE","$sku",575],"]",")",["T_WHITESPACE"," ",575],["T_BOOLEAN_AND","&&",575],["T_WHITESPACE"," ",575],["T_VARIABLE","$existingPrice",575],"[",["T_VARIABLE","$productEntityLinkField",575],"]",["T_WHITESPACE"," ",575],["T_IS_EQUAL","==",575],["T_WHITESPACE"," ",575],["T_VARIABLE","$oldSkus",575],"[",["T_VARIABLE","$sku",575],"]",")",["T_WHITESPACE"," ",575],"{",["T_WHITESPACE","\n                    ",575],["T_VARIABLE","$this",576],["T_OBJECT_OPERATOR","->",576],["T_STRING","incrementCounterUpdated",576],"(",["T_VARIABLE","$skuPrices",576],",",["T_WHITESPACE"," ",576],["T_VARIABLE","$existingPrice",576],")",";",["T_WHITESPACE","\n                ",576],"}",["T_WHITESPACE","\n            ",577],"}",["T_WHITESPACE","\n        ",578],"}",["T_WHITESPACE","\n\n        ",579],["T_RETURN","return",581],["T_WHITESPACE"," ",581],["T_VARIABLE","$this",581],";",["T_WHITESPACE","\n    ",581],"}",["T_WHITESPACE","\n\n    ",582],["T_DOC_COMMENT","\/**\n     * Increment counter of updated items\n     *\n     * @param array $prices\n     * @param array $existingPrice\n     * @return void\n     *\/",584],["T_WHITESPACE","\n    ",590],["T_PROTECTED","protected",591],["T_WHITESPACE"," ",591],["T_FUNCTION","function",591],["T_WHITESPACE"," ",591],["T_STRING","incrementCounterUpdated",591],"(",["T_VARIABLE","$prices",591],",",["T_WHITESPACE"," ",591],["T_VARIABLE","$existingPrice",591],")",["T_WHITESPACE","\n    ",591],"{",["T_WHITESPACE","\n        ",592],["T_FOREACH","foreach",593],["T_WHITESPACE"," ",593],"(",["T_VARIABLE","$prices",593],["T_WHITESPACE"," ",593],["T_AS","as",593],["T_WHITESPACE"," ",593],["T_VARIABLE","$price",593],")",["T_WHITESPACE"," ",593],"{",["T_WHITESPACE","\n            ",593],["T_IF","if",594],["T_WHITESPACE"," ",594],"(",["T_VARIABLE","$existingPrice",594],"[",["T_CONSTANT_ENCAPSED_STRING","'all_groups'",594],"]",["T_WHITESPACE"," ",594],["T_IS_EQUAL","==",594],["T_WHITESPACE"," ",594],["T_VARIABLE","$price",594],"[",["T_CONSTANT_ENCAPSED_STRING","'all_groups'",594],"]",["T_WHITESPACE","\n                ",594],["T_BOOLEAN_AND","&&",595],["T_WHITESPACE"," ",595],["T_VARIABLE","$existingPrice",595],"[",["T_CONSTANT_ENCAPSED_STRING","'customer_group_id'",595],"]",["T_WHITESPACE"," ",595],["T_IS_EQUAL","==",595],["T_WHITESPACE"," ",595],["T_VARIABLE","$price",595],"[",["T_CONSTANT_ENCAPSED_STRING","'customer_group_id'",595],"]",["T_WHITESPACE","\n            ",595],")",["T_WHITESPACE"," ",596],"{",["T_WHITESPACE","\n                ",596],["T_VARIABLE","$this",597],["T_OBJECT_OPERATOR","->",597],["T_STRING","countItemsUpdated",597],["T_INC","++",597],";",["T_WHITESPACE","\n            ",597],"}",["T_WHITESPACE","\n        ",598],"}",["T_WHITESPACE","\n    ",599],"}",["T_WHITESPACE","\n\n    ",600],["T_DOC_COMMENT","\/**\n     * Count new prices\n     *\n     * @param array $tierPrices\n     * @return $this\n     *\/",602],["T_WHITESPACE","\n    ",607],["T_PROTECTED","protected",608],["T_WHITESPACE"," ",608],["T_FUNCTION","function",608],["T_WHITESPACE"," ",608],["T_STRING","processCountNewPrices",608],"(",["T_ARRAY","array",608],["T_WHITESPACE"," ",608],["T_VARIABLE","$tierPrices",608],")",["T_WHITESPACE","\n    ",608],"{",["T_WHITESPACE","\n        ",609],["T_FOREACH","foreach",610],["T_WHITESPACE"," ",610],"(",["T_VARIABLE","$tierPrices",610],["T_WHITESPACE"," ",610],["T_AS","as",610],["T_WHITESPACE"," ",610],["T_VARIABLE","$productPrices",610],")",["T_WHITESPACE"," ",610],"{",["T_WHITESPACE","\n            ",610],["T_VARIABLE","$this",611],["T_OBJECT_OPERATOR","->",611],["T_STRING","countItemsCreated",611],["T_WHITESPACE"," ",611],["T_PLUS_EQUAL","+=",611],["T_WHITESPACE"," ",611],["T_STRING","count",611],"(",["T_VARIABLE","$productPrices",611],")",";",["T_WHITESPACE","\n        ",611],"}",["T_WHITESPACE","\n        ",612],["T_VARIABLE","$this",613],["T_OBJECT_OPERATOR","->",613],["T_STRING","countItemsCreated",613],["T_WHITESPACE"," ",613],["T_MINUS_EQUAL","-=",613],["T_WHITESPACE"," ",613],["T_VARIABLE","$this",613],["T_OBJECT_OPERATOR","->",613],["T_STRING","countItemsUpdated",613],";",["T_WHITESPACE","\n\n        ",613],["T_RETURN","return",615],["T_WHITESPACE"," ",615],["T_VARIABLE","$this",615],";",["T_WHITESPACE","\n    ",615],"}",["T_WHITESPACE","\n\n    ",616],["T_DOC_COMMENT","\/**\n     * Get product entity link field\n     *\n     * @return string\n     *\/",618],["T_WHITESPACE","\n    ",622],["T_PRIVATE","private",623],["T_WHITESPACE"," ",623],["T_FUNCTION","function",623],["T_WHITESPACE"," ",623],["T_STRING","getProductEntityLinkField",623],"(",")",["T_WHITESPACE","\n    ",623],"{",["T_WHITESPACE","\n        ",624],["T_IF","if",625],["T_WHITESPACE"," ",625],"(","!",["T_VARIABLE","$this",625],["T_OBJECT_OPERATOR","->",625],["T_STRING","productEntityLinkField",625],")",["T_WHITESPACE"," ",625],"{",["T_WHITESPACE","\n            ",625],["T_VARIABLE","$this",626],["T_OBJECT_OPERATOR","->",626],["T_STRING","productEntityLinkField",626],["T_WHITESPACE"," ",626],"=",["T_WHITESPACE"," ",626],["T_VARIABLE","$this",626],["T_OBJECT_OPERATOR","->",626],["T_STRING","getMetadataPool",626],"(",")",["T_WHITESPACE","\n                ",626],["T_OBJECT_OPERATOR","->",627],["T_STRING","getMetadata",627],"(",["T_NS_SEPARATOR","\\",627],["T_STRING","Magento",627],["T_NS_SEPARATOR","\\",627],["T_STRING","Catalog",627],["T_NS_SEPARATOR","\\",627],["T_STRING","Api",627],["T_NS_SEPARATOR","\\",627],["T_STRING","Data",627],["T_NS_SEPARATOR","\\",627],["T_STRING","ProductInterface",627],["T_DOUBLE_COLON","::",627],["T_CLASS","class",627],")",["T_WHITESPACE","\n                ",627],["T_OBJECT_OPERATOR","->",628],["T_STRING","getLinkField",628],"(",")",";",["T_WHITESPACE","\n        ",628],"}",["T_WHITESPACE","\n        ",629],["T_RETURN","return",630],["T_WHITESPACE"," ",630],["T_VARIABLE","$this",630],["T_OBJECT_OPERATOR","->",630],["T_STRING","productEntityLinkField",630],";",["T_WHITESPACE","\n    ",630],"}",["T_WHITESPACE","\n",631],"}",["T_WHITESPACE","\n",632]]
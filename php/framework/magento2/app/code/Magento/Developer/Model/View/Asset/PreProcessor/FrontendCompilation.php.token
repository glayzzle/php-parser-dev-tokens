[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Copyright \u00c2\u00a9 2013-2017 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n *\/",2],["T_WHITESPACE","\n",5],["T_NAMESPACE","namespace",6],["T_WHITESPACE"," ",6],["T_STRING","Magento",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Developer",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Model",6],["T_NS_SEPARATOR","\\",6],["T_STRING","View",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Asset",6],["T_NS_SEPARATOR","\\",6],["T_STRING","PreProcessor",6],";",["T_WHITESPACE","\n\n",6],["T_USE","use",8],["T_WHITESPACE"," ",8],["T_STRING","Magento",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Framework",8],["T_NS_SEPARATOR","\\",8],["T_STRING","View",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Asset",8],["T_NS_SEPARATOR","\\",8],["T_STRING","File",8],["T_NS_SEPARATOR","\\",8],["T_STRING","FallbackContext",8],";",["T_WHITESPACE","\n",8],["T_USE","use",9],["T_WHITESPACE"," ",9],["T_STRING","Magento",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Framework",9],["T_NS_SEPARATOR","\\",9],["T_STRING","View",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Asset",9],["T_NS_SEPARATOR","\\",9],["T_STRING","PreProcessor",9],";",["T_WHITESPACE","\n",9],["T_USE","use",10],["T_WHITESPACE"," ",10],["T_STRING","Magento",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Framework",10],["T_NS_SEPARATOR","\\",10],["T_STRING","View",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Asset",10],["T_NS_SEPARATOR","\\",10],["T_STRING","PreProcessorInterface",10],";",["T_WHITESPACE","\n",10],["T_USE","use",11],["T_WHITESPACE"," ",11],["T_STRING","Magento",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Framework",11],["T_NS_SEPARATOR","\\",11],["T_STRING","View",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Asset",11],["T_NS_SEPARATOR","\\",11],["T_STRING","LockerProcessInterface",11],";",["T_WHITESPACE","\n",11],["T_USE","use",12],["T_WHITESPACE"," ",12],["T_STRING","Magento",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Framework",12],["T_NS_SEPARATOR","\\",12],["T_STRING","View",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Asset",12],["T_NS_SEPARATOR","\\",12],["T_STRING","PreProcessor",12],["T_NS_SEPARATOR","\\",12],["T_STRING","AlternativeSourceInterface",12],";",["T_WHITESPACE","\n",12],["T_USE","use",13],["T_WHITESPACE"," ",13],["T_STRING","Magento",13],["T_NS_SEPARATOR","\\",13],["T_STRING","Framework",13],["T_NS_SEPARATOR","\\",13],["T_STRING","View",13],["T_NS_SEPARATOR","\\",13],["T_STRING","Asset",13],["T_NS_SEPARATOR","\\",13],["T_STRING","PreProcessor",13],["T_NS_SEPARATOR","\\",13],["T_STRING","AlternativeSource",13],["T_NS_SEPARATOR","\\",13],["T_STRING","AssetBuilder",13],";",["T_WHITESPACE","\n",13],["T_USE","use",14],["T_WHITESPACE"," ",14],["T_STRING","Magento",14],["T_NS_SEPARATOR","\\",14],["T_STRING","Framework",14],["T_NS_SEPARATOR","\\",14],["T_STRING","View",14],["T_NS_SEPARATOR","\\",14],["T_STRING","Asset",14],["T_NS_SEPARATOR","\\",14],["T_STRING","Source",14],";",["T_WHITESPACE","\n\n",14],["T_DOC_COMMENT","\/**\n * Class FrontendCompilation\n *\/",16],["T_WHITESPACE","\n",18],["T_CLASS","class",19],["T_WHITESPACE"," ",19],["T_STRING","FrontendCompilation",19],["T_WHITESPACE"," ",19],["T_IMPLEMENTS","implements",19],["T_WHITESPACE"," ",19],["T_STRING","PreProcessorInterface",19],["T_WHITESPACE","\n",19],"{",["T_WHITESPACE","\n    ",20],["T_DOC_COMMENT","\/**\n     * @var AlternativeSourceInterface\n     *\/",21],["T_WHITESPACE","\n    ",23],["T_PRIVATE","private",24],["T_WHITESPACE"," ",24],["T_VARIABLE","$alternativeSource",24],";",["T_WHITESPACE","\n\n    ",24],["T_DOC_COMMENT","\/**\n     * @var AssetBuilder\n     *\/",26],["T_WHITESPACE","\n    ",28],["T_PRIVATE","private",29],["T_WHITESPACE"," ",29],["T_VARIABLE","$assetBuilder",29],";",["T_WHITESPACE","\n\n    ",29],["T_DOC_COMMENT","\/**\n     * @var LockerProcessInterface\n     *\/",31],["T_WHITESPACE","\n    ",33],["T_PRIVATE","private",34],["T_WHITESPACE"," ",34],["T_VARIABLE","$lockerProcess",34],";",["T_WHITESPACE","\n\n    ",34],["T_DOC_COMMENT","\/**\n     * @var string\n     *\/",36],["T_WHITESPACE","\n    ",38],["T_PRIVATE","private",39],["T_WHITESPACE"," ",39],["T_VARIABLE","$lockName",39],";",["T_WHITESPACE","\n\n    ",39],["T_DOC_COMMENT","\/**\n     * @var Source\n     *\/",41],["T_WHITESPACE","\n    ",43],["T_PRIVATE","private",44],["T_WHITESPACE"," ",44],["T_VARIABLE","$assetSource",44],";",["T_WHITESPACE","\n\n    ",44],["T_DOC_COMMENT","\/**\n     * Constructor\n     *\n     * @param Source $assetSource\n     * @param AssetBuilder $assetBuilder\n     * @param AlternativeSourceInterface $alternativeSource\n     * @param LockerProcessInterface $lockerProcess\n     * @param string $lockName\n     *\/",46],["T_WHITESPACE","\n    ",54],["T_PUBLIC","public",55],["T_WHITESPACE"," ",55],["T_FUNCTION","function",55],["T_WHITESPACE"," ",55],["T_STRING","__construct",55],"(",["T_WHITESPACE","\n        ",55],["T_STRING","Source",56],["T_WHITESPACE"," ",56],["T_VARIABLE","$assetSource",56],",",["T_WHITESPACE","\n        ",56],["T_STRING","AssetBuilder",57],["T_WHITESPACE"," ",57],["T_VARIABLE","$assetBuilder",57],",",["T_WHITESPACE","\n        ",57],["T_STRING","AlternativeSourceInterface",58],["T_WHITESPACE"," ",58],["T_VARIABLE","$alternativeSource",58],",",["T_WHITESPACE","\n        ",58],["T_STRING","LockerProcessInterface",59],["T_WHITESPACE"," ",59],["T_VARIABLE","$lockerProcess",59],",",["T_WHITESPACE","\n        ",59],["T_VARIABLE","$lockName",60],["T_WHITESPACE","\n    ",60],")",["T_WHITESPACE"," ",61],"{",["T_WHITESPACE","\n        ",61],["T_VARIABLE","$this",62],["T_OBJECT_OPERATOR","->",62],["T_STRING","assetSource",62],["T_WHITESPACE"," ",62],"=",["T_WHITESPACE"," ",62],["T_VARIABLE","$assetSource",62],";",["T_WHITESPACE","\n        ",62],["T_VARIABLE","$this",63],["T_OBJECT_OPERATOR","->",63],["T_STRING","alternativeSource",63],["T_WHITESPACE"," ",63],"=",["T_WHITESPACE"," ",63],["T_VARIABLE","$alternativeSource",63],";",["T_WHITESPACE","\n        ",63],["T_VARIABLE","$this",64],["T_OBJECT_OPERATOR","->",64],["T_STRING","assetBuilder",64],["T_WHITESPACE"," ",64],"=",["T_WHITESPACE"," ",64],["T_VARIABLE","$assetBuilder",64],";",["T_WHITESPACE","\n        ",64],["T_VARIABLE","$this",65],["T_OBJECT_OPERATOR","->",65],["T_STRING","lockerProcess",65],["T_WHITESPACE"," ",65],"=",["T_WHITESPACE"," ",65],["T_VARIABLE","$lockerProcess",65],";",["T_WHITESPACE","\n        ",65],["T_VARIABLE","$this",66],["T_OBJECT_OPERATOR","->",66],["T_STRING","lockName",66],["T_WHITESPACE"," ",66],"=",["T_WHITESPACE"," ",66],["T_VARIABLE","$lockName",66],";",["T_WHITESPACE","\n    ",66],"}",["T_WHITESPACE","\n\n    ",67],["T_DOC_COMMENT","\/**\n     * Transform content and\/or content type for the specified preprocessing chain object\n     *\n     * @param PreProcessor\\Chain $chain\n     * @return void\n     *\/",69],["T_WHITESPACE","\n    ",74],["T_PUBLIC","public",75],["T_WHITESPACE"," ",75],["T_FUNCTION","function",75],["T_WHITESPACE"," ",75],["T_STRING","process",75],"(",["T_STRING","PreProcessor",75],["T_NS_SEPARATOR","\\",75],["T_STRING","Chain",75],["T_WHITESPACE"," ",75],["T_VARIABLE","$chain",75],")",["T_WHITESPACE","\n    ",75],"{",["T_WHITESPACE","\n\n        ",76],["T_TRY","try",78],["T_WHITESPACE"," ",78],"{",["T_WHITESPACE","\n            ",78],["T_VARIABLE","$this",79],["T_OBJECT_OPERATOR","->",79],["T_STRING","lockerProcess",79],["T_OBJECT_OPERATOR","->",79],["T_STRING","lockProcess",79],"(",["T_VARIABLE","$this",79],["T_OBJECT_OPERATOR","->",79],["T_STRING","lockName",79],")",";",["T_WHITESPACE","\n\n            ",79],["T_VARIABLE","$path",81],["T_WHITESPACE"," ",81],"=",["T_WHITESPACE"," ",81],["T_VARIABLE","$chain",81],["T_OBJECT_OPERATOR","->",81],["T_STRING","getAsset",81],"(",")",["T_OBJECT_OPERATOR","->",81],["T_STRING","getFilePath",81],"(",")",";",["T_WHITESPACE","\n            ",81],["T_VARIABLE","$module",82],["T_WHITESPACE"," ",82],"=",["T_WHITESPACE"," ",82],["T_VARIABLE","$chain",82],["T_OBJECT_OPERATOR","->",82],["T_STRING","getAsset",82],"(",")",["T_OBJECT_OPERATOR","->",82],["T_STRING","getModule",82],"(",")",";",["T_WHITESPACE","\n\n            ",82],["T_DOC_COMMENT","\/** @var FallbackContext $context *\/",84],["T_WHITESPACE","\n            ",84],["T_VARIABLE","$context",85],["T_WHITESPACE"," ",85],"=",["T_WHITESPACE"," ",85],["T_VARIABLE","$chain",85],["T_OBJECT_OPERATOR","->",85],["T_STRING","getAsset",85],"(",")",["T_OBJECT_OPERATOR","->",85],["T_STRING","getContext",85],"(",")",";",["T_WHITESPACE","\n\n            ",85],["T_VARIABLE","$result",87],["T_WHITESPACE"," ",87],"=",["T_WHITESPACE"," ",87],["T_VARIABLE","$this",87],["T_OBJECT_OPERATOR","->",87],["T_STRING","processContent",87],"(",["T_VARIABLE","$path",87],",",["T_WHITESPACE"," ",87],["T_VARIABLE","$chain",87],["T_OBJECT_OPERATOR","->",87],["T_STRING","getContent",87],"(",")",",",["T_WHITESPACE"," ",87],["T_VARIABLE","$module",87],",",["T_WHITESPACE"," ",87],["T_VARIABLE","$context",87],")",";",["T_WHITESPACE","\n            ",87],["T_VARIABLE","$chain",88],["T_OBJECT_OPERATOR","->",88],["T_STRING","setContent",88],"(",["T_VARIABLE","$result",88],"[",["T_CONSTANT_ENCAPSED_STRING","'content'",88],"]",")",";",["T_WHITESPACE","\n            ",88],["T_VARIABLE","$chain",89],["T_OBJECT_OPERATOR","->",89],["T_STRING","setContentType",89],"(",["T_VARIABLE","$result",89],"[",["T_CONSTANT_ENCAPSED_STRING","'sourceType'",89],"]",")",";",["T_WHITESPACE","\n        ",89],"}",["T_WHITESPACE"," ",90],["T_FINALLY","finally",90],["T_WHITESPACE"," ",90],"{",["T_WHITESPACE","\n            ",90],["T_VARIABLE","$this",91],["T_OBJECT_OPERATOR","->",91],["T_STRING","lockerProcess",91],["T_OBJECT_OPERATOR","->",91],["T_STRING","unlockProcess",91],"(",")",";",["T_WHITESPACE","\n        ",91],"}",["T_WHITESPACE","\n    ",92],"}",["T_WHITESPACE","\n\n    ",93],["T_DOC_COMMENT","\/**\n     * Preparation of content for the destination file\n     *\n     * @param string $path\n     * @param string $content\n     * @param string $module\n     * @param FallbackContext $context\n     * @return array\n     *\/",95],["T_WHITESPACE","\n    ",103],["T_PRIVATE","private",104],["T_WHITESPACE"," ",104],["T_FUNCTION","function",104],["T_WHITESPACE"," ",104],["T_STRING","processContent",104],"(",["T_VARIABLE","$path",104],",",["T_WHITESPACE"," ",104],["T_VARIABLE","$content",104],",",["T_WHITESPACE"," ",104],["T_VARIABLE","$module",104],",",["T_WHITESPACE"," ",104],["T_STRING","FallbackContext",104],["T_WHITESPACE"," ",104],["T_VARIABLE","$context",104],")",["T_WHITESPACE","\n    ",104],"{",["T_WHITESPACE","\n        ",105],["T_VARIABLE","$sourceTypePattern",106],["T_WHITESPACE"," ",106],"=",["T_WHITESPACE"," ",106],["T_CONSTANT_ENCAPSED_STRING","'#\\.'",106],["T_WHITESPACE"," ",106],".",["T_WHITESPACE"," ",106],["T_STRING","preg_quote",106],"(",["T_STRING","pathinfo",106],"(",["T_VARIABLE","$path",106],",",["T_WHITESPACE"," ",106],["T_STRING","PATHINFO_EXTENSION",106],")",",",["T_WHITESPACE"," ",106],["T_CONSTANT_ENCAPSED_STRING","'#'",106],")",["T_WHITESPACE"," ",106],".",["T_WHITESPACE"," ",106],["T_CONSTANT_ENCAPSED_STRING","'$#'",106],";",["T_WHITESPACE","\n\n        ",106],["T_FOREACH","foreach",108],["T_WHITESPACE"," ",108],"(",["T_VARIABLE","$this",108],["T_OBJECT_OPERATOR","->",108],["T_STRING","alternativeSource",108],["T_OBJECT_OPERATOR","->",108],["T_STRING","getAlternativesExtensionsNames",108],"(",")",["T_WHITESPACE"," ",108],["T_AS","as",108],["T_WHITESPACE"," ",108],["T_VARIABLE","$name",108],")",["T_WHITESPACE"," ",108],"{",["T_WHITESPACE","\n            ",108],["T_VARIABLE","$asset",109],["T_WHITESPACE"," ",109],"=",["T_WHITESPACE"," ",109],["T_VARIABLE","$this",109],["T_OBJECT_OPERATOR","->",109],["T_STRING","assetBuilder",109],["T_OBJECT_OPERATOR","->",109],["T_STRING","setArea",109],"(",["T_VARIABLE","$context",109],["T_OBJECT_OPERATOR","->",109],["T_STRING","getAreaCode",109],"(",")",")",["T_WHITESPACE","\n                ",109],["T_OBJECT_OPERATOR","->",110],["T_STRING","setTheme",110],"(",["T_VARIABLE","$context",110],["T_OBJECT_OPERATOR","->",110],["T_STRING","getThemePath",110],"(",")",")",["T_WHITESPACE","\n                ",110],["T_OBJECT_OPERATOR","->",111],["T_STRING","setLocale",111],"(",["T_VARIABLE","$context",111],["T_OBJECT_OPERATOR","->",111],["T_STRING","getLocale",111],"(",")",")",["T_WHITESPACE","\n                ",111],["T_OBJECT_OPERATOR","->",112],["T_STRING","setModule",112],"(",["T_VARIABLE","$module",112],")",["T_WHITESPACE","\n                ",112],["T_OBJECT_OPERATOR","->",113],["T_STRING","setPath",113],"(",["T_STRING","preg_replace",113],"(",["T_VARIABLE","$sourceTypePattern",113],",",["T_WHITESPACE"," ",113],["T_CONSTANT_ENCAPSED_STRING","'.'",113],["T_WHITESPACE"," ",113],".",["T_WHITESPACE"," ",113],["T_VARIABLE","$name",113],",",["T_WHITESPACE"," ",113],["T_VARIABLE","$path",113],")",")",["T_WHITESPACE","\n                ",113],["T_OBJECT_OPERATOR","->",114],["T_STRING","build",114],"(",")",";",["T_WHITESPACE","\n\n            ",114],["T_VARIABLE","$processedContent",116],["T_WHITESPACE"," ",116],"=",["T_WHITESPACE"," ",116],["T_VARIABLE","$this",116],["T_OBJECT_OPERATOR","->",116],["T_STRING","assetSource",116],["T_OBJECT_OPERATOR","->",116],["T_STRING","getContent",116],"(",["T_VARIABLE","$asset",116],")",";",["T_WHITESPACE","\n\n            ",116],["T_IF","if",118],["T_WHITESPACE"," ",118],"(",["T_STRING","trim",118],"(",["T_VARIABLE","$processedContent",118],")",["T_WHITESPACE"," ",118],["T_IS_NOT_IDENTICAL","!==",118],["T_WHITESPACE"," ",118],["T_CONSTANT_ENCAPSED_STRING","''",118],")",["T_WHITESPACE"," ",118],"{",["T_WHITESPACE","\n                ",118],["T_RETURN","return",119],["T_WHITESPACE"," ",119],"[",["T_WHITESPACE","\n                    ",119],["T_CONSTANT_ENCAPSED_STRING","'content'",120],["T_WHITESPACE"," ",120],["T_DOUBLE_ARROW","=>",120],["T_WHITESPACE"," ",120],["T_VARIABLE","$processedContent",120],",",["T_WHITESPACE","\n                    ",120],["T_CONSTANT_ENCAPSED_STRING","'sourceType'",121],["T_WHITESPACE"," ",121],["T_DOUBLE_ARROW","=>",121],["T_WHITESPACE"," ",121],["T_VARIABLE","$name",121],["T_WHITESPACE","\n                ",121],"]",";",["T_WHITESPACE","\n            ",122],"}",["T_WHITESPACE","\n        ",123],"}",["T_WHITESPACE","\n\n        ",124],["T_RETURN","return",126],["T_WHITESPACE"," ",126],"[",["T_WHITESPACE","\n            ",126],["T_CONSTANT_ENCAPSED_STRING","'content'",127],["T_WHITESPACE"," ",127],["T_DOUBLE_ARROW","=>",127],["T_WHITESPACE"," ",127],["T_VARIABLE","$content",127],",",["T_WHITESPACE","\n            ",127],["T_CONSTANT_ENCAPSED_STRING","'sourceType'",128],["T_WHITESPACE"," ",128],["T_DOUBLE_ARROW","=>",128],["T_WHITESPACE"," ",128],["T_STRING","pathinfo",128],"(",["T_VARIABLE","$path",128],",",["T_WHITESPACE"," ",128],["T_STRING","PATHINFO_EXTENSION",128],")",["T_WHITESPACE","\n        ",128],"]",";",["T_WHITESPACE","\n    ",129],"}",["T_WHITESPACE","\n",130],"}",["T_WHITESPACE","\n",131]]
[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Copyright \u00c2\u00a9 2013-2017 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n *\/",2],["T_WHITESPACE","\n",5],["T_NAMESPACE","namespace",6],["T_WHITESPACE"," ",6],["T_STRING","Magento",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Store",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Model",6],["T_NS_SEPARATOR","\\",6],["T_STRING","ResourceModel",6],";",["T_WHITESPACE","\n\n",6],["T_DOC_COMMENT","\/**\n * Store group resource model\n *\/",8],["T_WHITESPACE","\n",10],["T_CLASS","class",11],["T_WHITESPACE"," ",11],["T_STRING","Group",11],["T_WHITESPACE"," ",11],["T_EXTENDS","extends",11],["T_WHITESPACE"," ",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Magento",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Framework",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Model",11],["T_NS_SEPARATOR","\\",11],["T_STRING","ResourceModel",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Db",11],["T_NS_SEPARATOR","\\",11],["T_STRING","AbstractDb",11],["T_WHITESPACE","\n",11],"{",["T_WHITESPACE","\n    ",12],["T_DOC_COMMENT","\/**\n     * Define main table\n     *\n     * @return void\n     *\/",13],["T_WHITESPACE","\n    ",17],["T_PROTECTED","protected",18],["T_WHITESPACE"," ",18],["T_FUNCTION","function",18],["T_WHITESPACE"," ",18],["T_STRING","_construct",18],"(",")",["T_WHITESPACE","\n    ",18],"{",["T_WHITESPACE","\n        ",19],["T_VARIABLE","$this",20],["T_OBJECT_OPERATOR","->",20],["T_STRING","_init",20],"(",["T_CONSTANT_ENCAPSED_STRING","'store_group'",20],",",["T_WHITESPACE"," ",20],["T_CONSTANT_ENCAPSED_STRING","'group_id'",20],")",";",["T_WHITESPACE","\n    ",20],"}",["T_WHITESPACE","\n\n    ",21],["T_DOC_COMMENT","\/**\n     * Update default store group for website\n     *\n     * @param \\Magento\\Framework\\Model\\AbstractModel $model\n     * @return $this\n     *\/",23],["T_WHITESPACE","\n    ",28],["T_PROTECTED","protected",29],["T_WHITESPACE"," ",29],["T_FUNCTION","function",29],["T_WHITESPACE"," ",29],["T_STRING","_afterSave",29],"(",["T_NS_SEPARATOR","\\",29],["T_STRING","Magento",29],["T_NS_SEPARATOR","\\",29],["T_STRING","Framework",29],["T_NS_SEPARATOR","\\",29],["T_STRING","Model",29],["T_NS_SEPARATOR","\\",29],["T_STRING","AbstractModel",29],["T_WHITESPACE"," ",29],["T_VARIABLE","$model",29],")",["T_WHITESPACE","\n    ",29],"{",["T_WHITESPACE","\n        ",30],["T_VARIABLE","$this",31],["T_OBJECT_OPERATOR","->",31],["T_STRING","_updateStoreWebsite",31],"(",["T_VARIABLE","$model",31],["T_OBJECT_OPERATOR","->",31],["T_STRING","getId",31],"(",")",",",["T_WHITESPACE"," ",31],["T_VARIABLE","$model",31],["T_OBJECT_OPERATOR","->",31],["T_STRING","getWebsiteId",31],"(",")",")",";",["T_WHITESPACE","\n        ",31],["T_VARIABLE","$this",32],["T_OBJECT_OPERATOR","->",32],["T_STRING","_updateWebsiteDefaultGroup",32],"(",["T_VARIABLE","$model",32],["T_OBJECT_OPERATOR","->",32],["T_STRING","getWebsiteId",32],"(",")",",",["T_WHITESPACE"," ",32],["T_VARIABLE","$model",32],["T_OBJECT_OPERATOR","->",32],["T_STRING","getId",32],"(",")",")",";",["T_WHITESPACE","\n        ",32],["T_VARIABLE","$this",33],["T_OBJECT_OPERATOR","->",33],["T_STRING","_changeWebsite",33],"(",["T_VARIABLE","$model",33],")",";",["T_WHITESPACE","\n\n        ",33],["T_RETURN","return",35],["T_WHITESPACE"," ",35],["T_VARIABLE","$this",35],";",["T_WHITESPACE","\n    ",35],"}",["T_WHITESPACE","\n\n    ",36],["T_DOC_COMMENT","\/**\n     * Update default store group for website\n     *\n     * @param int $websiteId\n     * @param int $groupId\n     * @return $this\n     *\/",38],["T_WHITESPACE","\n    ",44],["T_PROTECTED","protected",45],["T_WHITESPACE"," ",45],["T_FUNCTION","function",45],["T_WHITESPACE"," ",45],["T_STRING","_updateWebsiteDefaultGroup",45],"(",["T_VARIABLE","$websiteId",45],",",["T_WHITESPACE"," ",45],["T_VARIABLE","$groupId",45],")",["T_WHITESPACE","\n    ",45],"{",["T_WHITESPACE","\n        ",46],["T_VARIABLE","$select",47],["T_WHITESPACE"," ",47],"=",["T_WHITESPACE"," ",47],["T_VARIABLE","$this",47],["T_OBJECT_OPERATOR","->",47],["T_STRING","getConnection",47],"(",")",["T_OBJECT_OPERATOR","->",47],["T_STRING","select",47],"(",")",["T_OBJECT_OPERATOR","->",47],["T_STRING","from",47],"(",["T_WHITESPACE","\n            ",47],["T_VARIABLE","$this",48],["T_OBJECT_OPERATOR","->",48],["T_STRING","getMainTable",48],"(",")",",",["T_WHITESPACE","\n            ",48],["T_CONSTANT_ENCAPSED_STRING","'COUNT(*)'",49],["T_WHITESPACE","\n        ",49],")",["T_OBJECT_OPERATOR","->",50],["T_STRING","where",50],"(",["T_WHITESPACE","\n            ",50],["T_CONSTANT_ENCAPSED_STRING","'website_id = :website'",51],["T_WHITESPACE","\n        ",51],")",";",["T_WHITESPACE","\n        ",52],["T_VARIABLE","$count",53],["T_WHITESPACE"," ",53],"=",["T_WHITESPACE"," ",53],["T_VARIABLE","$this",53],["T_OBJECT_OPERATOR","->",53],["T_STRING","getConnection",53],"(",")",["T_OBJECT_OPERATOR","->",53],["T_STRING","fetchOne",53],"(",["T_VARIABLE","$select",53],",",["T_WHITESPACE"," ",53],"[",["T_CONSTANT_ENCAPSED_STRING","'website'",53],["T_WHITESPACE"," ",53],["T_DOUBLE_ARROW","=>",53],["T_WHITESPACE"," ",53],["T_VARIABLE","$websiteId",53],"]",")",";",["T_WHITESPACE","\n\n        ",53],["T_IF","if",55],["T_WHITESPACE"," ",55],"(",["T_VARIABLE","$count",55],["T_WHITESPACE"," ",55],["T_IS_EQUAL","==",55],["T_WHITESPACE"," ",55],["T_LNUMBER","1",55],")",["T_WHITESPACE"," ",55],"{",["T_WHITESPACE","\n            ",55],["T_VARIABLE","$bind",56],["T_WHITESPACE"," ",56],"=",["T_WHITESPACE"," ",56],"[",["T_CONSTANT_ENCAPSED_STRING","'default_group_id'",56],["T_WHITESPACE"," ",56],["T_DOUBLE_ARROW","=>",56],["T_WHITESPACE"," ",56],["T_VARIABLE","$groupId",56],"]",";",["T_WHITESPACE","\n            ",56],["T_VARIABLE","$where",57],["T_WHITESPACE"," ",57],"=",["T_WHITESPACE"," ",57],"[",["T_CONSTANT_ENCAPSED_STRING","'website_id = ?'",57],["T_WHITESPACE"," ",57],["T_DOUBLE_ARROW","=>",57],["T_WHITESPACE"," ",57],["T_VARIABLE","$websiteId",57],"]",";",["T_WHITESPACE","\n            ",57],["T_VARIABLE","$this",58],["T_OBJECT_OPERATOR","->",58],["T_STRING","getConnection",58],"(",")",["T_OBJECT_OPERATOR","->",58],["T_STRING","update",58],"(",["T_VARIABLE","$this",58],["T_OBJECT_OPERATOR","->",58],["T_STRING","getTable",58],"(",["T_CONSTANT_ENCAPSED_STRING","'store_website'",58],")",",",["T_WHITESPACE"," ",58],["T_VARIABLE","$bind",58],",",["T_WHITESPACE"," ",58],["T_VARIABLE","$where",58],")",";",["T_WHITESPACE","\n        ",58],"}",["T_WHITESPACE","\n        ",59],["T_RETURN","return",60],["T_WHITESPACE"," ",60],["T_VARIABLE","$this",60],";",["T_WHITESPACE","\n    ",60],"}",["T_WHITESPACE","\n\n    ",61],["T_DOC_COMMENT","\/**\n     * Change store group website\n     *\n     * @param \\Magento\\Framework\\Model\\AbstractModel $model\n     * @return $this\n     *\/",63],["T_WHITESPACE","\n    ",68],["T_PROTECTED","protected",69],["T_WHITESPACE"," ",69],["T_FUNCTION","function",69],["T_WHITESPACE"," ",69],["T_STRING","_changeWebsite",69],"(",["T_NS_SEPARATOR","\\",69],["T_STRING","Magento",69],["T_NS_SEPARATOR","\\",69],["T_STRING","Framework",69],["T_NS_SEPARATOR","\\",69],["T_STRING","Model",69],["T_NS_SEPARATOR","\\",69],["T_STRING","AbstractModel",69],["T_WHITESPACE"," ",69],["T_VARIABLE","$model",69],")",["T_WHITESPACE","\n    ",69],"{",["T_WHITESPACE","\n        ",70],["T_IF","if",71],["T_WHITESPACE"," ",71],"(",["T_VARIABLE","$model",71],["T_OBJECT_OPERATOR","->",71],["T_STRING","getOriginalWebsiteId",71],"(",")",["T_WHITESPACE"," ",71],["T_BOOLEAN_AND","&&",71],["T_WHITESPACE"," ",71],["T_VARIABLE","$model",71],["T_OBJECT_OPERATOR","->",71],["T_STRING","getWebsiteId",71],"(",")",["T_WHITESPACE"," ",71],["T_IS_NOT_EQUAL","!=",71],["T_WHITESPACE"," ",71],["T_VARIABLE","$model",71],["T_OBJECT_OPERATOR","->",71],["T_STRING","getOriginalWebsiteId",71],"(",")",")",["T_WHITESPACE"," ",71],"{",["T_WHITESPACE","\n            ",71],["T_VARIABLE","$select",72],["T_WHITESPACE"," ",72],"=",["T_WHITESPACE"," ",72],["T_VARIABLE","$this",72],["T_OBJECT_OPERATOR","->",72],["T_STRING","getConnection",72],"(",")",["T_OBJECT_OPERATOR","->",72],["T_STRING","select",72],"(",")",["T_OBJECT_OPERATOR","->",72],["T_STRING","from",72],"(",["T_WHITESPACE","\n                ",72],["T_VARIABLE","$this",73],["T_OBJECT_OPERATOR","->",73],["T_STRING","getTable",73],"(",["T_CONSTANT_ENCAPSED_STRING","'store_website'",73],")",",",["T_WHITESPACE","\n                ",73],["T_CONSTANT_ENCAPSED_STRING","'default_group_id'",74],["T_WHITESPACE","\n            ",74],")",["T_OBJECT_OPERATOR","->",75],["T_STRING","where",75],"(",["T_WHITESPACE","\n                ",75],["T_CONSTANT_ENCAPSED_STRING","'website_id = :website_id'",76],["T_WHITESPACE","\n            ",76],")",";",["T_WHITESPACE","\n            ",77],["T_VARIABLE","$groupId",78],["T_WHITESPACE"," ",78],"=",["T_WHITESPACE"," ",78],["T_VARIABLE","$this",78],["T_OBJECT_OPERATOR","->",78],["T_STRING","getConnection",78],"(",")",["T_OBJECT_OPERATOR","->",78],["T_STRING","fetchOne",78],"(",["T_WHITESPACE","\n                ",78],["T_VARIABLE","$select",79],",",["T_WHITESPACE","\n                ",79],"[",["T_CONSTANT_ENCAPSED_STRING","'website_id'",80],["T_WHITESPACE"," ",80],["T_DOUBLE_ARROW","=>",80],["T_WHITESPACE"," ",80],["T_VARIABLE","$model",80],["T_OBJECT_OPERATOR","->",80],["T_STRING","getOriginalWebsiteId",80],"(",")","]",["T_WHITESPACE","\n            ",80],")",";",["T_WHITESPACE","\n\n            ",81],["T_IF","if",83],["T_WHITESPACE"," ",83],"(",["T_VARIABLE","$groupId",83],["T_WHITESPACE"," ",83],["T_IS_EQUAL","==",83],["T_WHITESPACE"," ",83],["T_VARIABLE","$model",83],["T_OBJECT_OPERATOR","->",83],["T_STRING","getId",83],"(",")",")",["T_WHITESPACE"," ",83],"{",["T_WHITESPACE","\n                ",83],["T_VARIABLE","$bind",84],["T_WHITESPACE"," ",84],"=",["T_WHITESPACE"," ",84],"[",["T_CONSTANT_ENCAPSED_STRING","'default_group_id'",84],["T_WHITESPACE"," ",84],["T_DOUBLE_ARROW","=>",84],["T_WHITESPACE"," ",84],["T_LNUMBER","0",84],"]",";",["T_WHITESPACE","\n                ",84],["T_VARIABLE","$where",85],["T_WHITESPACE"," ",85],"=",["T_WHITESPACE"," ",85],"[",["T_CONSTANT_ENCAPSED_STRING","'website_id = ?'",85],["T_WHITESPACE"," ",85],["T_DOUBLE_ARROW","=>",85],["T_WHITESPACE"," ",85],["T_VARIABLE","$model",85],["T_OBJECT_OPERATOR","->",85],["T_STRING","getOriginalWebsiteId",85],"(",")","]",";",["T_WHITESPACE","\n                ",85],["T_VARIABLE","$this",86],["T_OBJECT_OPERATOR","->",86],["T_STRING","getConnection",86],"(",")",["T_OBJECT_OPERATOR","->",86],["T_STRING","update",86],"(",["T_VARIABLE","$this",86],["T_OBJECT_OPERATOR","->",86],["T_STRING","getTable",86],"(",["T_CONSTANT_ENCAPSED_STRING","'store_website'",86],")",",",["T_WHITESPACE"," ",86],["T_VARIABLE","$bind",86],",",["T_WHITESPACE"," ",86],["T_VARIABLE","$where",86],")",";",["T_WHITESPACE","\n            ",86],"}",["T_WHITESPACE","\n        ",87],"}",["T_WHITESPACE","\n        ",88],["T_RETURN","return",89],["T_WHITESPACE"," ",89],["T_VARIABLE","$this",89],";",["T_WHITESPACE","\n    ",89],"}",["T_WHITESPACE","\n\n    ",90],["T_DOC_COMMENT","\/**\n     * Update website for stores that assigned to store group\n     *\n     * @param int $groupId\n     * @param int $websiteId\n     * @return $this\n     *\/",92],["T_WHITESPACE","\n    ",98],["T_PROTECTED","protected",99],["T_WHITESPACE"," ",99],["T_FUNCTION","function",99],["T_WHITESPACE"," ",99],["T_STRING","_updateStoreWebsite",99],"(",["T_VARIABLE","$groupId",99],",",["T_WHITESPACE"," ",99],["T_VARIABLE","$websiteId",99],")",["T_WHITESPACE","\n    ",99],"{",["T_WHITESPACE","\n        ",100],["T_VARIABLE","$bind",101],["T_WHITESPACE"," ",101],"=",["T_WHITESPACE"," ",101],"[",["T_CONSTANT_ENCAPSED_STRING","'website_id'",101],["T_WHITESPACE"," ",101],["T_DOUBLE_ARROW","=>",101],["T_WHITESPACE"," ",101],["T_VARIABLE","$websiteId",101],"]",";",["T_WHITESPACE","\n        ",101],["T_VARIABLE","$where",102],["T_WHITESPACE"," ",102],"=",["T_WHITESPACE"," ",102],"[",["T_CONSTANT_ENCAPSED_STRING","'group_id = ?'",102],["T_WHITESPACE"," ",102],["T_DOUBLE_ARROW","=>",102],["T_WHITESPACE"," ",102],["T_VARIABLE","$groupId",102],"]",";",["T_WHITESPACE","\n        ",102],["T_VARIABLE","$this",103],["T_OBJECT_OPERATOR","->",103],["T_STRING","getConnection",103],"(",")",["T_OBJECT_OPERATOR","->",103],["T_STRING","update",103],"(",["T_VARIABLE","$this",103],["T_OBJECT_OPERATOR","->",103],["T_STRING","getTable",103],"(",["T_CONSTANT_ENCAPSED_STRING","'store'",103],")",",",["T_WHITESPACE"," ",103],["T_VARIABLE","$bind",103],",",["T_WHITESPACE"," ",103],["T_VARIABLE","$where",103],")",";",["T_WHITESPACE","\n        ",103],["T_RETURN","return",104],["T_WHITESPACE"," ",104],["T_VARIABLE","$this",104],";",["T_WHITESPACE","\n    ",104],"}",["T_WHITESPACE","\n\n    ",105],["T_DOC_COMMENT","\/**\n     * Save default store for store group\n     *\n     * @param int $groupId\n     * @param int $storeId\n     * @return $this\n     *\/",107],["T_WHITESPACE","\n    ",113],["T_PROTECTED","protected",114],["T_WHITESPACE"," ",114],["T_FUNCTION","function",114],["T_WHITESPACE"," ",114],["T_STRING","_saveDefaultStore",114],"(",["T_VARIABLE","$groupId",114],",",["T_WHITESPACE"," ",114],["T_VARIABLE","$storeId",114],")",["T_WHITESPACE","\n    ",114],"{",["T_WHITESPACE","\n        ",115],["T_VARIABLE","$bind",116],["T_WHITESPACE"," ",116],"=",["T_WHITESPACE"," ",116],"[",["T_CONSTANT_ENCAPSED_STRING","'default_store_id'",116],["T_WHITESPACE"," ",116],["T_DOUBLE_ARROW","=>",116],["T_WHITESPACE"," ",116],["T_VARIABLE","$storeId",116],"]",";",["T_WHITESPACE","\n        ",116],["T_VARIABLE","$where",117],["T_WHITESPACE"," ",117],"=",["T_WHITESPACE"," ",117],"[",["T_CONSTANT_ENCAPSED_STRING","'group_id = ?'",117],["T_WHITESPACE"," ",117],["T_DOUBLE_ARROW","=>",117],["T_WHITESPACE"," ",117],["T_VARIABLE","$groupId",117],"]",";",["T_WHITESPACE","\n        ",117],["T_VARIABLE","$this",118],["T_OBJECT_OPERATOR","->",118],["T_STRING","getConnection",118],"(",")",["T_OBJECT_OPERATOR","->",118],["T_STRING","update",118],"(",["T_VARIABLE","$this",118],["T_OBJECT_OPERATOR","->",118],["T_STRING","getMainTable",118],"(",")",",",["T_WHITESPACE"," ",118],["T_VARIABLE","$bind",118],",",["T_WHITESPACE"," ",118],["T_VARIABLE","$where",118],")",";",["T_WHITESPACE","\n\n        ",118],["T_RETURN","return",120],["T_WHITESPACE"," ",120],["T_VARIABLE","$this",120],";",["T_WHITESPACE","\n    ",120],"}",["T_WHITESPACE","\n\n    ",121],["T_DOC_COMMENT","\/**\n     * Count number of all entities in the system\n     *\n     * By default won't count admin store\n     *\n     * @param bool $countAdmin\n     * @return int\n     *\/",123],["T_WHITESPACE","\n    ",130],["T_PUBLIC","public",131],["T_WHITESPACE"," ",131],["T_FUNCTION","function",131],["T_WHITESPACE"," ",131],["T_STRING","countAll",131],"(",["T_VARIABLE","$countAdmin",131],["T_WHITESPACE"," ",131],"=",["T_WHITESPACE"," ",131],["T_STRING","false",131],")",["T_WHITESPACE","\n    ",131],"{",["T_WHITESPACE","\n        ",132],["T_VARIABLE","$connection",133],["T_WHITESPACE"," ",133],"=",["T_WHITESPACE"," ",133],["T_VARIABLE","$this",133],["T_OBJECT_OPERATOR","->",133],["T_STRING","getConnection",133],"(",")",";",["T_WHITESPACE","\n        ",133],["T_VARIABLE","$select",134],["T_WHITESPACE"," ",134],"=",["T_WHITESPACE"," ",134],["T_VARIABLE","$connection",134],["T_OBJECT_OPERATOR","->",134],["T_STRING","select",134],"(",")",["T_OBJECT_OPERATOR","->",134],["T_STRING","from",134],"(","[",["T_CONSTANT_ENCAPSED_STRING","'main'",134],["T_WHITESPACE"," ",134],["T_DOUBLE_ARROW","=>",134],["T_WHITESPACE"," ",134],["T_VARIABLE","$this",134],["T_OBJECT_OPERATOR","->",134],["T_STRING","getMainTable",134],"(",")","]",",",["T_WHITESPACE"," ",134],["T_CONSTANT_ENCAPSED_STRING","'COUNT(*)'",134],")",";",["T_WHITESPACE","\n        ",134],["T_IF","if",135],["T_WHITESPACE"," ",135],"(","!",["T_VARIABLE","$countAdmin",135],")",["T_WHITESPACE"," ",135],"{",["T_WHITESPACE","\n            ",135],["T_VARIABLE","$select",136],["T_OBJECT_OPERATOR","->",136],["T_STRING","joinLeft",136],"(",["T_WHITESPACE","\n                ",136],"[",["T_CONSTANT_ENCAPSED_STRING","'store_website'",137],["T_WHITESPACE"," ",137],["T_DOUBLE_ARROW","=>",137],["T_WHITESPACE"," ",137],["T_VARIABLE","$this",137],["T_OBJECT_OPERATOR","->",137],["T_STRING","getTable",137],"(",["T_CONSTANT_ENCAPSED_STRING","'store_website'",137],")","]",",",["T_WHITESPACE","\n                ",137],["T_CONSTANT_ENCAPSED_STRING","'store_website.website_id = main.website_id'",138],",",["T_WHITESPACE","\n                ",138],["T_STRING","null",139],["T_WHITESPACE","\n            ",139],")",["T_OBJECT_OPERATOR","->",140],["T_STRING","where",140],"(",["T_WHITESPACE","\n                ",140],["T_STRING","sprintf",141],"(",["T_CONSTANT_ENCAPSED_STRING","'%s <> %s'",141],",",["T_WHITESPACE"," ",141],["T_VARIABLE","$connection",141],["T_OBJECT_OPERATOR","->",141],["T_STRING","quoteIdentifier",141],"(",["T_CONSTANT_ENCAPSED_STRING","'code'",141],")",",",["T_WHITESPACE"," ",141],["T_VARIABLE","$connection",141],["T_OBJECT_OPERATOR","->",141],["T_STRING","quote",141],"(",["T_CONSTANT_ENCAPSED_STRING","'admin'",141],")",")",["T_WHITESPACE","\n            ",141],")",";",["T_WHITESPACE","\n        ",142],"}",["T_WHITESPACE","\n        ",143],["T_RETURN","return",144],["T_WHITESPACE"," ",144],["T_INT_CAST","(int)",144],["T_VARIABLE","$connection",144],["T_OBJECT_OPERATOR","->",144],["T_STRING","fetchOne",144],"(",["T_VARIABLE","$select",144],")",";",["T_WHITESPACE","\n    ",144],"}",["T_WHITESPACE","\n",145],"}",["T_WHITESPACE","\n",146]]
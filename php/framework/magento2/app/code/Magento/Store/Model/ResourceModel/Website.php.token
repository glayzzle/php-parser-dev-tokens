[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Copyright \u00c2\u00a9 2013-2017 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n *\/",2],["T_WHITESPACE","\n\n",5],["T_COMMENT","\/\/ @codingStandardsIgnoreFile\n",7],["T_WHITESPACE","\n",8],["T_NAMESPACE","namespace",9],["T_WHITESPACE"," ",9],["T_STRING","Magento",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Store",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Model",9],["T_NS_SEPARATOR","\\",9],["T_STRING","ResourceModel",9],";",["T_WHITESPACE","\n\n",9],["T_DOC_COMMENT","\/**\n * Website Resource Model\n *\/",11],["T_WHITESPACE","\n",13],["T_CLASS","class",14],["T_WHITESPACE"," ",14],["T_STRING","Website",14],["T_WHITESPACE"," ",14],["T_EXTENDS","extends",14],["T_WHITESPACE"," ",14],["T_NS_SEPARATOR","\\",14],["T_STRING","Magento",14],["T_NS_SEPARATOR","\\",14],["T_STRING","Framework",14],["T_NS_SEPARATOR","\\",14],["T_STRING","Model",14],["T_NS_SEPARATOR","\\",14],["T_STRING","ResourceModel",14],["T_NS_SEPARATOR","\\",14],["T_STRING","Db",14],["T_NS_SEPARATOR","\\",14],["T_STRING","AbstractDb",14],["T_WHITESPACE","\n",14],"{",["T_WHITESPACE","\n    ",15],["T_DOC_COMMENT","\/**\n     * Define main table\n     *\n     * @return void\n     *\/",16],["T_WHITESPACE","\n    ",20],["T_PROTECTED","protected",21],["T_WHITESPACE"," ",21],["T_FUNCTION","function",21],["T_WHITESPACE"," ",21],["T_STRING","_construct",21],"(",")",["T_WHITESPACE","\n    ",21],"{",["T_WHITESPACE","\n        ",22],["T_VARIABLE","$this",23],["T_OBJECT_OPERATOR","->",23],["T_STRING","_init",23],"(",["T_CONSTANT_ENCAPSED_STRING","'store_website'",23],",",["T_WHITESPACE"," ",23],["T_CONSTANT_ENCAPSED_STRING","'website_id'",23],")",";",["T_WHITESPACE","\n    ",23],"}",["T_WHITESPACE","\n\n    ",24],["T_DOC_COMMENT","\/**\n     * Initialize unique fields\n     *\n     * @return $this\n     *\/",26],["T_WHITESPACE","\n    ",30],["T_PROTECTED","protected",31],["T_WHITESPACE"," ",31],["T_FUNCTION","function",31],["T_WHITESPACE"," ",31],["T_STRING","_initUniqueFields",31],"(",")",["T_WHITESPACE","\n    ",31],"{",["T_WHITESPACE","\n        ",32],["T_VARIABLE","$this",33],["T_OBJECT_OPERATOR","->",33],["T_STRING","_uniqueFields",33],["T_WHITESPACE"," ",33],"=",["T_WHITESPACE"," ",33],"[","[",["T_CONSTANT_ENCAPSED_STRING","'field'",33],["T_WHITESPACE"," ",33],["T_DOUBLE_ARROW","=>",33],["T_WHITESPACE"," ",33],["T_CONSTANT_ENCAPSED_STRING","'code'",33],",",["T_WHITESPACE"," ",33],["T_CONSTANT_ENCAPSED_STRING","'title'",33],["T_WHITESPACE"," ",33],["T_DOUBLE_ARROW","=>",33],["T_WHITESPACE"," ",33],["T_STRING","__",33],"(",["T_CONSTANT_ENCAPSED_STRING","'Website with the same code'",33],")","]","]",";",["T_WHITESPACE","\n        ",33],["T_RETURN","return",34],["T_WHITESPACE"," ",34],["T_VARIABLE","$this",34],";",["T_WHITESPACE","\n    ",34],"}",["T_WHITESPACE","\n\n    ",35],["T_DOC_COMMENT","\/**\n     * Validate website code before object save\n     *\n     * @param \\Magento\\Framework\\Model\\AbstractModel $object\n     * @return $this\n     * @throws \\Magento\\Framework\\Exception\\LocalizedException\n     *\/",37],["T_WHITESPACE","\n    ",43],["T_PROTECTED","protected",44],["T_WHITESPACE"," ",44],["T_FUNCTION","function",44],["T_WHITESPACE"," ",44],["T_STRING","_beforeSave",44],"(",["T_NS_SEPARATOR","\\",44],["T_STRING","Magento",44],["T_NS_SEPARATOR","\\",44],["T_STRING","Framework",44],["T_NS_SEPARATOR","\\",44],["T_STRING","Model",44],["T_NS_SEPARATOR","\\",44],["T_STRING","AbstractModel",44],["T_WHITESPACE"," ",44],["T_VARIABLE","$object",44],")",["T_WHITESPACE","\n    ",44],"{",["T_WHITESPACE","\n        ",45],["T_IF","if",46],["T_WHITESPACE"," ",46],"(","!",["T_STRING","preg_match",46],"(",["T_CONSTANT_ENCAPSED_STRING","'\/^[a-z]+[a-z0-9_]*$\/'",46],",",["T_WHITESPACE"," ",46],["T_VARIABLE","$object",46],["T_OBJECT_OPERATOR","->",46],["T_STRING","getCode",46],"(",")",")",")",["T_WHITESPACE"," ",46],"{",["T_WHITESPACE","\n            ",46],["T_THROW","throw",47],["T_WHITESPACE"," ",47],["T_NEW","new",47],["T_WHITESPACE"," ",47],["T_NS_SEPARATOR","\\",47],["T_STRING","Magento",47],["T_NS_SEPARATOR","\\",47],["T_STRING","Framework",47],["T_NS_SEPARATOR","\\",47],["T_STRING","Exception",47],["T_NS_SEPARATOR","\\",47],["T_STRING","LocalizedException",47],"(",["T_WHITESPACE","\n                ",47],["T_STRING","__",48],"(",["T_WHITESPACE","\n                    ",48],["T_CONSTANT_ENCAPSED_STRING","'Website code may only contain letters (a-z), numbers (0-9) or underscore (_),'",49],["T_WHITESPACE","\n                    ",49],".",["T_WHITESPACE"," ",50],["T_CONSTANT_ENCAPSED_STRING","' and the first character must be a letter.'",50],["T_WHITESPACE","\n                ",50],")",["T_WHITESPACE","\n            ",51],")",";",["T_WHITESPACE","\n        ",52],"}",["T_WHITESPACE","\n\n        ",53],["T_RETURN","return",55],["T_WHITESPACE"," ",55],["T_STRING","parent",55],["T_DOUBLE_COLON","::",55],["T_STRING","_beforeSave",55],"(",["T_VARIABLE","$object",55],")",";",["T_WHITESPACE","\n    ",55],"}",["T_WHITESPACE","\n\n    ",56],["T_DOC_COMMENT","\/**\n     * Perform actions after object save\n     *\n     * @param \\Magento\\Framework\\Model\\AbstractModel $object\n     * @return $this\n     *\/",58],["T_WHITESPACE","\n    ",63],["T_PROTECTED","protected",64],["T_WHITESPACE"," ",64],["T_FUNCTION","function",64],["T_WHITESPACE"," ",64],["T_STRING","_afterSave",64],"(",["T_NS_SEPARATOR","\\",64],["T_STRING","Magento",64],["T_NS_SEPARATOR","\\",64],["T_STRING","Framework",64],["T_NS_SEPARATOR","\\",64],["T_STRING","Model",64],["T_NS_SEPARATOR","\\",64],["T_STRING","AbstractModel",64],["T_WHITESPACE"," ",64],["T_VARIABLE","$object",64],")",["T_WHITESPACE","\n    ",64],"{",["T_WHITESPACE","\n        ",65],["T_IF","if",66],["T_WHITESPACE"," ",66],"(",["T_VARIABLE","$object",66],["T_OBJECT_OPERATOR","->",66],["T_STRING","getIsDefault",66],"(",")",")",["T_WHITESPACE"," ",66],"{",["T_WHITESPACE","\n            ",66],["T_VARIABLE","$this",67],["T_OBJECT_OPERATOR","->",67],["T_STRING","getConnection",67],"(",")",["T_OBJECT_OPERATOR","->",67],["T_STRING","update",67],"(",["T_VARIABLE","$this",67],["T_OBJECT_OPERATOR","->",67],["T_STRING","getMainTable",67],"(",")",",",["T_WHITESPACE"," ",67],"[",["T_CONSTANT_ENCAPSED_STRING","'is_default'",67],["T_WHITESPACE"," ",67],["T_DOUBLE_ARROW","=>",67],["T_WHITESPACE"," ",67],["T_LNUMBER","0",67],"]",")",";",["T_WHITESPACE","\n            ",67],["T_VARIABLE","$where",68],["T_WHITESPACE"," ",68],"=",["T_WHITESPACE"," ",68],"[",["T_CONSTANT_ENCAPSED_STRING","'website_id = ?'",68],["T_WHITESPACE"," ",68],["T_DOUBLE_ARROW","=>",68],["T_WHITESPACE"," ",68],["T_VARIABLE","$object",68],["T_OBJECT_OPERATOR","->",68],["T_STRING","getId",68],"(",")","]",";",["T_WHITESPACE","\n            ",68],["T_VARIABLE","$this",69],["T_OBJECT_OPERATOR","->",69],["T_STRING","getConnection",69],"(",")",["T_OBJECT_OPERATOR","->",69],["T_STRING","update",69],"(",["T_VARIABLE","$this",69],["T_OBJECT_OPERATOR","->",69],["T_STRING","getMainTable",69],"(",")",",",["T_WHITESPACE"," ",69],"[",["T_CONSTANT_ENCAPSED_STRING","'is_default'",69],["T_WHITESPACE"," ",69],["T_DOUBLE_ARROW","=>",69],["T_WHITESPACE"," ",69],["T_LNUMBER","1",69],"]",",",["T_WHITESPACE"," ",69],["T_VARIABLE","$where",69],")",";",["T_WHITESPACE","\n        ",69],"}",["T_WHITESPACE","\n        ",70],["T_RETURN","return",71],["T_WHITESPACE"," ",71],["T_STRING","parent",71],["T_DOUBLE_COLON","::",71],["T_STRING","_afterSave",71],"(",["T_VARIABLE","$object",71],")",";",["T_WHITESPACE","\n    ",71],"}",["T_WHITESPACE","\n\n    ",72],["T_DOC_COMMENT","\/**\n     * Remove configuration data after delete website\n     *\n     * @param \\Magento\\Framework\\Model\\AbstractModel $model\n     * @return $this\n     *\/",74],["T_WHITESPACE","\n    ",79],["T_PROTECTED","protected",80],["T_WHITESPACE"," ",80],["T_FUNCTION","function",80],["T_WHITESPACE"," ",80],["T_STRING","_afterDelete",80],"(",["T_NS_SEPARATOR","\\",80],["T_STRING","Magento",80],["T_NS_SEPARATOR","\\",80],["T_STRING","Framework",80],["T_NS_SEPARATOR","\\",80],["T_STRING","Model",80],["T_NS_SEPARATOR","\\",80],["T_STRING","AbstractModel",80],["T_WHITESPACE"," ",80],["T_VARIABLE","$model",80],")",["T_WHITESPACE","\n    ",80],"{",["T_WHITESPACE","\n        ",81],["T_VARIABLE","$where",82],["T_WHITESPACE"," ",82],"=",["T_WHITESPACE"," ",82],"[",["T_WHITESPACE","\n            ",82],["T_CONSTANT_ENCAPSED_STRING","'scope = ?'",83],["T_WHITESPACE"," ",83],["T_DOUBLE_ARROW","=>",83],["T_WHITESPACE"," ",83],["T_NS_SEPARATOR","\\",83],["T_STRING","Magento",83],["T_NS_SEPARATOR","\\",83],["T_STRING","Store",83],["T_NS_SEPARATOR","\\",83],["T_STRING","Model",83],["T_NS_SEPARATOR","\\",83],["T_STRING","ScopeInterface",83],["T_DOUBLE_COLON","::",83],["T_STRING","SCOPE_WEBSITES",83],",",["T_WHITESPACE","\n            ",83],["T_CONSTANT_ENCAPSED_STRING","'scope_id = ?'",84],["T_WHITESPACE"," ",84],["T_DOUBLE_ARROW","=>",84],["T_WHITESPACE"," ",84],["T_VARIABLE","$model",84],["T_OBJECT_OPERATOR","->",84],["T_STRING","getWebsiteId",84],"(",")",",",["T_WHITESPACE","\n        ",84],"]",";",["T_WHITESPACE","\n\n        ",85],["T_VARIABLE","$this",87],["T_OBJECT_OPERATOR","->",87],["T_STRING","getConnection",87],"(",")",["T_OBJECT_OPERATOR","->",87],["T_STRING","delete",87],"(",["T_VARIABLE","$this",87],["T_OBJECT_OPERATOR","->",87],["T_STRING","getTable",87],"(",["T_CONSTANT_ENCAPSED_STRING","'core_config_data'",87],")",",",["T_WHITESPACE"," ",87],["T_VARIABLE","$where",87],")",";",["T_WHITESPACE","\n\n        ",87],["T_RETURN","return",89],["T_WHITESPACE"," ",89],["T_VARIABLE","$this",89],";",["T_WHITESPACE","\n    ",89],"}",["T_WHITESPACE","\n\n    ",90],["T_DOC_COMMENT","\/**\n     * Retrieve default stores select object\n     * Select fields website_id, store_id\n     *\n     * @param bool $includeDefault include\/exclude default admin website\n     * @return \\Magento\\Framework\\DB\\Select\n     *\/",92],["T_WHITESPACE","\n    ",98],["T_PUBLIC","public",99],["T_WHITESPACE"," ",99],["T_FUNCTION","function",99],["T_WHITESPACE"," ",99],["T_STRING","getDefaultStoresSelect",99],"(",["T_VARIABLE","$includeDefault",99],["T_WHITESPACE"," ",99],"=",["T_WHITESPACE"," ",99],["T_STRING","false",99],")",["T_WHITESPACE","\n    ",99],"{",["T_WHITESPACE","\n        ",100],["T_VARIABLE","$ifNull",101],["T_WHITESPACE"," ",101],"=",["T_WHITESPACE"," ",101],["T_VARIABLE","$this",101],["T_OBJECT_OPERATOR","->",101],["T_STRING","getConnection",101],"(",")",["T_OBJECT_OPERATOR","->",101],["T_STRING","getCheckSql",101],"(",["T_WHITESPACE","\n            ",101],["T_CONSTANT_ENCAPSED_STRING","'store_group_table.default_store_id IS NULL'",102],",",["T_WHITESPACE","\n            ",102],["T_CONSTANT_ENCAPSED_STRING","'0'",103],",",["T_WHITESPACE","\n            ",103],["T_CONSTANT_ENCAPSED_STRING","'store_group_table.default_store_id'",104],["T_WHITESPACE","\n        ",104],")",";",["T_WHITESPACE","\n        ",105],["T_VARIABLE","$select",106],["T_WHITESPACE"," ",106],"=",["T_WHITESPACE"," ",106],["T_VARIABLE","$this",106],["T_OBJECT_OPERATOR","->",106],["T_STRING","getConnection",106],"(",")",["T_OBJECT_OPERATOR","->",106],["T_STRING","select",106],"(",")",["T_OBJECT_OPERATOR","->",106],["T_STRING","from",106],"(",["T_WHITESPACE","\n            ",106],"[",["T_CONSTANT_ENCAPSED_STRING","'website_table'",107],["T_WHITESPACE"," ",107],["T_DOUBLE_ARROW","=>",107],["T_WHITESPACE"," ",107],["T_VARIABLE","$this",107],["T_OBJECT_OPERATOR","->",107],["T_STRING","getTable",107],"(",["T_CONSTANT_ENCAPSED_STRING","'store_website'",107],")","]",",",["T_WHITESPACE","\n            ",107],"[",["T_CONSTANT_ENCAPSED_STRING","'website_id'",108],"]",["T_WHITESPACE","\n        ",108],")",["T_OBJECT_OPERATOR","->",109],["T_STRING","joinLeft",109],"(",["T_WHITESPACE","\n            ",109],"[",["T_CONSTANT_ENCAPSED_STRING","'store_group_table'",110],["T_WHITESPACE"," ",110],["T_DOUBLE_ARROW","=>",110],["T_WHITESPACE"," ",110],["T_VARIABLE","$this",110],["T_OBJECT_OPERATOR","->",110],["T_STRING","getTable",110],"(",["T_CONSTANT_ENCAPSED_STRING","'store_group'",110],")","]",",",["T_WHITESPACE","\n            ",110],["T_CONSTANT_ENCAPSED_STRING","'website_table.website_id=store_group_table.website_id'",111],["T_WHITESPACE"," ",111],".",["T_WHITESPACE","\n            ",111],["T_CONSTANT_ENCAPSED_STRING","' AND website_table.default_group_id = store_group_table.group_id'",112],",",["T_WHITESPACE","\n            ",112],"[",["T_CONSTANT_ENCAPSED_STRING","'store_id'",113],["T_WHITESPACE"," ",113],["T_DOUBLE_ARROW","=>",113],["T_WHITESPACE"," ",113],["T_VARIABLE","$ifNull",113],"]",["T_WHITESPACE","\n        ",113],")",";",["T_WHITESPACE","\n        ",114],["T_IF","if",115],["T_WHITESPACE"," ",115],"(","!",["T_VARIABLE","$includeDefault",115],")",["T_WHITESPACE"," ",115],"{",["T_WHITESPACE","\n            ",115],["T_VARIABLE","$select",116],["T_OBJECT_OPERATOR","->",116],["T_STRING","where",116],"(",["T_CONSTANT_ENCAPSED_STRING","'website_table.website_id <> ?'",116],",",["T_WHITESPACE"," ",116],["T_LNUMBER","0",116],")",";",["T_WHITESPACE","\n        ",116],"}",["T_WHITESPACE","\n        ",117],["T_RETURN","return",118],["T_WHITESPACE"," ",118],["T_VARIABLE","$select",118],";",["T_WHITESPACE","\n    ",118],"}",["T_WHITESPACE","\n\n    ",119],["T_DOC_COMMENT","\/**\n     * Get total number of persistent entities in the system, excluding the admin website by default\n     *\n     * @param bool $includeDefault\n     * @return int\n     *\/",121],["T_WHITESPACE","\n    ",126],["T_PUBLIC","public",127],["T_WHITESPACE"," ",127],["T_FUNCTION","function",127],["T_WHITESPACE"," ",127],["T_STRING","countAll",127],"(",["T_VARIABLE","$includeDefault",127],["T_WHITESPACE"," ",127],"=",["T_WHITESPACE"," ",127],["T_STRING","false",127],")",["T_WHITESPACE","\n    ",127],"{",["T_WHITESPACE","\n        ",128],["T_VARIABLE","$connection",129],["T_WHITESPACE"," ",129],"=",["T_WHITESPACE"," ",129],["T_VARIABLE","$this",129],["T_OBJECT_OPERATOR","->",129],["T_STRING","getConnection",129],"(",")",";",["T_WHITESPACE","\n        ",129],["T_VARIABLE","$select",130],["T_WHITESPACE"," ",130],"=",["T_WHITESPACE"," ",130],["T_VARIABLE","$connection",130],["T_OBJECT_OPERATOR","->",130],["T_STRING","select",130],"(",")",["T_OBJECT_OPERATOR","->",130],["T_STRING","from",130],"(",["T_VARIABLE","$this",130],["T_OBJECT_OPERATOR","->",130],["T_STRING","getMainTable",130],"(",")",",",["T_WHITESPACE"," ",130],["T_CONSTANT_ENCAPSED_STRING","'COUNT(*)'",130],")",";",["T_WHITESPACE","\n        ",130],["T_IF","if",131],["T_WHITESPACE"," ",131],"(","!",["T_VARIABLE","$includeDefault",131],")",["T_WHITESPACE"," ",131],"{",["T_WHITESPACE","\n            ",131],["T_VARIABLE","$select",132],["T_OBJECT_OPERATOR","->",132],["T_STRING","where",132],"(",["T_CONSTANT_ENCAPSED_STRING","'website_id <> ?'",132],",",["T_WHITESPACE"," ",132],["T_LNUMBER","0",132],")",";",["T_WHITESPACE","\n        ",132],"}",["T_WHITESPACE","\n        ",133],["T_RETURN","return",134],["T_WHITESPACE"," ",134],["T_INT_CAST","(int)",134],["T_VARIABLE","$connection",134],["T_OBJECT_OPERATOR","->",134],["T_STRING","fetchOne",134],"(",["T_VARIABLE","$select",134],")",";",["T_WHITESPACE","\n    ",134],"}",["T_WHITESPACE","\n",135],"}",["T_WHITESPACE","\n",136]]
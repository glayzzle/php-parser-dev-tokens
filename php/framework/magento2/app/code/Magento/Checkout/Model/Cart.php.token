[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Copyright \u00c2\u00a9 2013-2017 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n *\/",2],["T_WHITESPACE","\n",5],["T_NAMESPACE","namespace",6],["T_WHITESPACE"," ",6],["T_STRING","Magento",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Checkout",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Model",6],";",["T_WHITESPACE","\n\n",6],["T_USE","use",8],["T_WHITESPACE"," ",8],["T_STRING","Magento",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Catalog",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Api",8],["T_NS_SEPARATOR","\\",8],["T_STRING","ProductRepositoryInterface",8],";",["T_WHITESPACE","\n",8],["T_USE","use",9],["T_WHITESPACE"," ",9],["T_STRING","Magento",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Catalog",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Model",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Product",9],";",["T_WHITESPACE","\n",9],["T_USE","use",10],["T_WHITESPACE"," ",10],["T_STRING","Magento",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Checkout",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Model",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Cart",10],["T_NS_SEPARATOR","\\",10],["T_STRING","CartInterface",10],";",["T_WHITESPACE","\n",10],["T_USE","use",11],["T_WHITESPACE"," ",11],["T_STRING","Magento",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Framework",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Exception",11],["T_NS_SEPARATOR","\\",11],["T_STRING","NoSuchEntityException",11],";",["T_WHITESPACE","\n",11],["T_USE","use",12],["T_WHITESPACE"," ",12],["T_STRING","Magento",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Framework",12],["T_NS_SEPARATOR","\\",12],["T_STRING","DataObject",12],";",["T_WHITESPACE","\n\n",12],["T_DOC_COMMENT","\/**\n * Shopping cart model\n * @SuppressWarnings(PHPMD.CouplingBetweenObjects)\n * @deprecated \n *\/",14],["T_WHITESPACE","\n",18],["T_CLASS","class",19],["T_WHITESPACE"," ",19],["T_STRING","Cart",19],["T_WHITESPACE"," ",19],["T_EXTENDS","extends",19],["T_WHITESPACE"," ",19],["T_STRING","DataObject",19],["T_WHITESPACE"," ",19],["T_IMPLEMENTS","implements",19],["T_WHITESPACE"," ",19],["T_STRING","CartInterface",19],["T_WHITESPACE","\n",19],"{",["T_WHITESPACE","\n    ",20],["T_DOC_COMMENT","\/**\n     * Shopping cart items summary quantity(s)\n     *\n     * @var int|null\n     *\/",21],["T_WHITESPACE","\n    ",25],["T_PROTECTED","protected",26],["T_WHITESPACE"," ",26],["T_VARIABLE","$_summaryQty",26],";",["T_WHITESPACE","\n\n    ",26],["T_DOC_COMMENT","\/**\n     * List of product ids in shopping cart\n     *\n     * @var int[]|null\n     *\/",28],["T_WHITESPACE","\n    ",32],["T_PROTECTED","protected",33],["T_WHITESPACE"," ",33],["T_VARIABLE","$_productIds",33],";",["T_WHITESPACE","\n\n    ",33],["T_DOC_COMMENT","\/**\n     * Core event manager proxy\n     *\n     * @var \\Magento\\Framework\\Event\\ManagerInterface\n     *\/",35],["T_WHITESPACE","\n    ",39],["T_PROTECTED","protected",40],["T_WHITESPACE"," ",40],["T_VARIABLE","$_eventManager",40],";",["T_WHITESPACE","\n\n    ",40],["T_DOC_COMMENT","\/**\n     * Core store config\n     *\n     * @var \\Magento\\Framework\\App\\Config\\ScopeConfigInterface\n     *\/",42],["T_WHITESPACE","\n    ",46],["T_PROTECTED","protected",47],["T_WHITESPACE"," ",47],["T_VARIABLE","$_scopeConfig",47],";",["T_WHITESPACE","\n\n    ",47],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Store\\Model\\StoreManagerInterface\n     *\/",49],["T_WHITESPACE","\n    ",51],["T_PROTECTED","protected",52],["T_WHITESPACE"," ",52],["T_VARIABLE","$_storeManager",52],";",["T_WHITESPACE","\n\n    ",52],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Checkout\\Model\\ResourceModel\\Cart\n     *\/",54],["T_WHITESPACE","\n    ",56],["T_PROTECTED","protected",57],["T_WHITESPACE"," ",57],["T_VARIABLE","$_resourceCart",57],";",["T_WHITESPACE","\n\n    ",57],["T_DOC_COMMENT","\/**\n     * @var Session\n     *\/",59],["T_WHITESPACE","\n    ",61],["T_PROTECTED","protected",62],["T_WHITESPACE"," ",62],["T_VARIABLE","$_checkoutSession",62],";",["T_WHITESPACE","\n\n    ",62],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Customer\\Model\\Session\n     *\/",64],["T_WHITESPACE","\n    ",66],["T_PROTECTED","protected",67],["T_WHITESPACE"," ",67],["T_VARIABLE","$_customerSession",67],";",["T_WHITESPACE","\n\n    ",67],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Framework\\Message\\ManagerInterface\n     *\/",69],["T_WHITESPACE","\n    ",71],["T_PROTECTED","protected",72],["T_WHITESPACE"," ",72],["T_VARIABLE","$messageManager",72],";",["T_WHITESPACE","\n\n    ",72],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\CatalogInventory\\Api\\StockRegistryInterface\n     *\/",74],["T_WHITESPACE","\n    ",76],["T_PROTECTED","protected",77],["T_WHITESPACE"," ",77],["T_VARIABLE","$stockRegistry",77],";",["T_WHITESPACE","\n\n    ",77],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\CatalogInventory\\Api\\StockStateInterface\n     *\/",79],["T_WHITESPACE","\n    ",81],["T_PROTECTED","protected",82],["T_WHITESPACE"," ",82],["T_VARIABLE","$stockState",82],";",["T_WHITESPACE","\n\n    ",82],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Quote\\Api\\CartRepositoryInterface\n     *\/",84],["T_WHITESPACE","\n    ",86],["T_PROTECTED","protected",87],["T_WHITESPACE"," ",87],["T_VARIABLE","$quoteRepository",87],";",["T_WHITESPACE","\n\n    ",87],["T_DOC_COMMENT","\/**\n     * @var ProductRepositoryInterface\n     *\/",89],["T_WHITESPACE","\n    ",91],["T_PROTECTED","protected",92],["T_WHITESPACE"," ",92],["T_VARIABLE","$productRepository",92],";",["T_WHITESPACE","\n\n    ",92],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Checkout\\Model\\Cart\\RequestInfoFilterInterface\n     *\/",94],["T_WHITESPACE","\n    ",96],["T_PRIVATE","private",97],["T_WHITESPACE"," ",97],["T_VARIABLE","$requestInfoFilter",97],";",["T_WHITESPACE","\n\n    ",97],["T_DOC_COMMENT","\/**\n     * @param \\Magento\\Framework\\Event\\ManagerInterface $eventManager\n     * @param \\Magento\\Framework\\App\\Config\\ScopeConfigInterface $scopeConfig\n     * @param \\Magento\\Store\\Model\\StoreManagerInterface $storeManager\n     * @param \\Magento\\Checkout\\Model\\ResourceModel\\Cart $resourceCart\n     * @param Session $checkoutSession\n     * @param \\Magento\\Customer\\Model\\Session $customerSession\n     * @param \\Magento\\Framework\\Message\\ManagerInterface $messageManager\n     * @param \\Magento\\CatalogInventory\\Api\\StockRegistryInterface $stockRegistry\n     * @param \\Magento\\CatalogInventory\\Api\\StockStateInterface $stockState\n     * @param \\Magento\\Quote\\Api\\CartRepositoryInterface $quoteRepository\n     * @param ProductRepositoryInterface $productRepository\n     * @param array $data\n     * @codeCoverageIgnore\n     * @SuppressWarnings(PHPMD.ExcessiveParameterList)\n     *\/",99],["T_WHITESPACE","\n    ",114],["T_PUBLIC","public",115],["T_WHITESPACE"," ",115],["T_FUNCTION","function",115],["T_WHITESPACE"," ",115],["T_STRING","__construct",115],"(",["T_WHITESPACE","\n        ",115],["T_NS_SEPARATOR","\\",116],["T_STRING","Magento",116],["T_NS_SEPARATOR","\\",116],["T_STRING","Framework",116],["T_NS_SEPARATOR","\\",116],["T_STRING","Event",116],["T_NS_SEPARATOR","\\",116],["T_STRING","ManagerInterface",116],["T_WHITESPACE"," ",116],["T_VARIABLE","$eventManager",116],",",["T_WHITESPACE","\n        ",116],["T_NS_SEPARATOR","\\",117],["T_STRING","Magento",117],["T_NS_SEPARATOR","\\",117],["T_STRING","Framework",117],["T_NS_SEPARATOR","\\",117],["T_STRING","App",117],["T_NS_SEPARATOR","\\",117],["T_STRING","Config",117],["T_NS_SEPARATOR","\\",117],["T_STRING","ScopeConfigInterface",117],["T_WHITESPACE"," ",117],["T_VARIABLE","$scopeConfig",117],",",["T_WHITESPACE","\n        ",117],["T_NS_SEPARATOR","\\",118],["T_STRING","Magento",118],["T_NS_SEPARATOR","\\",118],["T_STRING","Store",118],["T_NS_SEPARATOR","\\",118],["T_STRING","Model",118],["T_NS_SEPARATOR","\\",118],["T_STRING","StoreManagerInterface",118],["T_WHITESPACE"," ",118],["T_VARIABLE","$storeManager",118],",",["T_WHITESPACE","\n        ",118],["T_NS_SEPARATOR","\\",119],["T_STRING","Magento",119],["T_NS_SEPARATOR","\\",119],["T_STRING","Checkout",119],["T_NS_SEPARATOR","\\",119],["T_STRING","Model",119],["T_NS_SEPARATOR","\\",119],["T_STRING","ResourceModel",119],["T_NS_SEPARATOR","\\",119],["T_STRING","Cart",119],["T_WHITESPACE"," ",119],["T_VARIABLE","$resourceCart",119],",",["T_WHITESPACE","\n        ",119],["T_STRING","Session",120],["T_WHITESPACE"," ",120],["T_VARIABLE","$checkoutSession",120],",",["T_WHITESPACE","\n        ",120],["T_NS_SEPARATOR","\\",121],["T_STRING","Magento",121],["T_NS_SEPARATOR","\\",121],["T_STRING","Customer",121],["T_NS_SEPARATOR","\\",121],["T_STRING","Model",121],["T_NS_SEPARATOR","\\",121],["T_STRING","Session",121],["T_WHITESPACE"," ",121],["T_VARIABLE","$customerSession",121],",",["T_WHITESPACE","\n        ",121],["T_NS_SEPARATOR","\\",122],["T_STRING","Magento",122],["T_NS_SEPARATOR","\\",122],["T_STRING","Framework",122],["T_NS_SEPARATOR","\\",122],["T_STRING","Message",122],["T_NS_SEPARATOR","\\",122],["T_STRING","ManagerInterface",122],["T_WHITESPACE"," ",122],["T_VARIABLE","$messageManager",122],",",["T_WHITESPACE","\n        ",122],["T_NS_SEPARATOR","\\",123],["T_STRING","Magento",123],["T_NS_SEPARATOR","\\",123],["T_STRING","CatalogInventory",123],["T_NS_SEPARATOR","\\",123],["T_STRING","Api",123],["T_NS_SEPARATOR","\\",123],["T_STRING","StockRegistryInterface",123],["T_WHITESPACE"," ",123],["T_VARIABLE","$stockRegistry",123],",",["T_WHITESPACE","\n        ",123],["T_NS_SEPARATOR","\\",124],["T_STRING","Magento",124],["T_NS_SEPARATOR","\\",124],["T_STRING","CatalogInventory",124],["T_NS_SEPARATOR","\\",124],["T_STRING","Api",124],["T_NS_SEPARATOR","\\",124],["T_STRING","StockStateInterface",124],["T_WHITESPACE"," ",124],["T_VARIABLE","$stockState",124],",",["T_WHITESPACE","\n        ",124],["T_NS_SEPARATOR","\\",125],["T_STRING","Magento",125],["T_NS_SEPARATOR","\\",125],["T_STRING","Quote",125],["T_NS_SEPARATOR","\\",125],["T_STRING","Api",125],["T_NS_SEPARATOR","\\",125],["T_STRING","CartRepositoryInterface",125],["T_WHITESPACE"," ",125],["T_VARIABLE","$quoteRepository",125],",",["T_WHITESPACE","\n        ",125],["T_STRING","ProductRepositoryInterface",126],["T_WHITESPACE"," ",126],["T_VARIABLE","$productRepository",126],",",["T_WHITESPACE","\n        ",126],["T_ARRAY","array",127],["T_WHITESPACE"," ",127],["T_VARIABLE","$data",127],["T_WHITESPACE"," ",127],"=",["T_WHITESPACE"," ",127],"[","]",["T_WHITESPACE","\n    ",127],")",["T_WHITESPACE"," ",128],"{",["T_WHITESPACE","\n        ",128],["T_VARIABLE","$this",129],["T_OBJECT_OPERATOR","->",129],["T_STRING","_eventManager",129],["T_WHITESPACE"," ",129],"=",["T_WHITESPACE"," ",129],["T_VARIABLE","$eventManager",129],";",["T_WHITESPACE","\n        ",129],["T_VARIABLE","$this",130],["T_OBJECT_OPERATOR","->",130],["T_STRING","_scopeConfig",130],["T_WHITESPACE"," ",130],"=",["T_WHITESPACE"," ",130],["T_VARIABLE","$scopeConfig",130],";",["T_WHITESPACE","\n        ",130],["T_VARIABLE","$this",131],["T_OBJECT_OPERATOR","->",131],["T_STRING","_storeManager",131],["T_WHITESPACE"," ",131],"=",["T_WHITESPACE"," ",131],["T_VARIABLE","$storeManager",131],";",["T_WHITESPACE","\n        ",131],["T_VARIABLE","$this",132],["T_OBJECT_OPERATOR","->",132],["T_STRING","_resourceCart",132],["T_WHITESPACE"," ",132],"=",["T_WHITESPACE"," ",132],["T_VARIABLE","$resourceCart",132],";",["T_WHITESPACE","\n        ",132],["T_VARIABLE","$this",133],["T_OBJECT_OPERATOR","->",133],["T_STRING","_checkoutSession",133],["T_WHITESPACE"," ",133],"=",["T_WHITESPACE"," ",133],["T_VARIABLE","$checkoutSession",133],";",["T_WHITESPACE","\n        ",133],["T_VARIABLE","$this",134],["T_OBJECT_OPERATOR","->",134],["T_STRING","_customerSession",134],["T_WHITESPACE"," ",134],"=",["T_WHITESPACE"," ",134],["T_VARIABLE","$customerSession",134],";",["T_WHITESPACE","\n        ",134],["T_VARIABLE","$this",135],["T_OBJECT_OPERATOR","->",135],["T_STRING","messageManager",135],["T_WHITESPACE"," ",135],"=",["T_WHITESPACE"," ",135],["T_VARIABLE","$messageManager",135],";",["T_WHITESPACE","\n        ",135],["T_VARIABLE","$this",136],["T_OBJECT_OPERATOR","->",136],["T_STRING","stockRegistry",136],["T_WHITESPACE"," ",136],"=",["T_WHITESPACE"," ",136],["T_VARIABLE","$stockRegistry",136],";",["T_WHITESPACE","\n        ",136],["T_VARIABLE","$this",137],["T_OBJECT_OPERATOR","->",137],["T_STRING","stockState",137],["T_WHITESPACE"," ",137],"=",["T_WHITESPACE"," ",137],["T_VARIABLE","$stockState",137],";",["T_WHITESPACE","\n        ",137],["T_VARIABLE","$this",138],["T_OBJECT_OPERATOR","->",138],["T_STRING","quoteRepository",138],["T_WHITESPACE"," ",138],"=",["T_WHITESPACE"," ",138],["T_VARIABLE","$quoteRepository",138],";",["T_WHITESPACE","\n        ",138],["T_STRING","parent",139],["T_DOUBLE_COLON","::",139],["T_STRING","__construct",139],"(",["T_VARIABLE","$data",139],")",";",["T_WHITESPACE","\n        ",139],["T_VARIABLE","$this",140],["T_OBJECT_OPERATOR","->",140],["T_STRING","productRepository",140],["T_WHITESPACE"," ",140],"=",["T_WHITESPACE"," ",140],["T_VARIABLE","$productRepository",140],";",["T_WHITESPACE","\n    ",140],"}",["T_WHITESPACE","\n\n    ",141],["T_DOC_COMMENT","\/**\n     * Get shopping cart resource model\n     *\n     * @return \\Magento\\Checkout\\Model\\ResourceModel\\Cart\n     * @codeCoverageIgnore\n     *\/",143],["T_WHITESPACE","\n    ",148],["T_PROTECTED","protected",149],["T_WHITESPACE"," ",149],["T_FUNCTION","function",149],["T_WHITESPACE"," ",149],["T_STRING","_getResource",149],"(",")",["T_WHITESPACE","\n    ",149],"{",["T_WHITESPACE","\n        ",150],["T_RETURN","return",151],["T_WHITESPACE"," ",151],["T_VARIABLE","$this",151],["T_OBJECT_OPERATOR","->",151],["T_STRING","_resourceCart",151],";",["T_WHITESPACE","\n    ",151],"}",["T_WHITESPACE","\n\n    ",152],["T_DOC_COMMENT","\/**\n     * Retrieve checkout session model\n     *\n     * @return Session\n     * @codeCoverageIgnore\n     *\/",154],["T_WHITESPACE","\n    ",159],["T_PUBLIC","public",160],["T_WHITESPACE"," ",160],["T_FUNCTION","function",160],["T_WHITESPACE"," ",160],["T_STRING","getCheckoutSession",160],"(",")",["T_WHITESPACE","\n    ",160],"{",["T_WHITESPACE","\n        ",161],["T_RETURN","return",162],["T_WHITESPACE"," ",162],["T_VARIABLE","$this",162],["T_OBJECT_OPERATOR","->",162],["T_STRING","_checkoutSession",162],";",["T_WHITESPACE","\n    ",162],"}",["T_WHITESPACE","\n\n    ",163],["T_DOC_COMMENT","\/**\n     * Retrieve customer session model\n     *\n     * @return \\Magento\\Customer\\Model\\Session\n     * @codeCoverageIgnore\n     *\/",165],["T_WHITESPACE","\n    ",170],["T_PUBLIC","public",171],["T_WHITESPACE"," ",171],["T_FUNCTION","function",171],["T_WHITESPACE"," ",171],["T_STRING","getCustomerSession",171],"(",")",["T_WHITESPACE","\n    ",171],"{",["T_WHITESPACE","\n        ",172],["T_RETURN","return",173],["T_WHITESPACE"," ",173],["T_VARIABLE","$this",173],["T_OBJECT_OPERATOR","->",173],["T_STRING","_customerSession",173],";",["T_WHITESPACE","\n    ",173],"}",["T_WHITESPACE","\n\n    ",174],["T_DOC_COMMENT","\/**\n     * List of shopping cart items\n     *\n     * @return \\Magento\\Eav\\Model\\Entity\\Collection\\AbstractCollection|array\n     *\/",176],["T_WHITESPACE","\n    ",180],["T_PUBLIC","public",181],["T_WHITESPACE"," ",181],["T_FUNCTION","function",181],["T_WHITESPACE"," ",181],["T_STRING","getItems",181],"(",")",["T_WHITESPACE","\n    ",181],"{",["T_WHITESPACE","\n        ",182],["T_IF","if",183],["T_WHITESPACE"," ",183],"(","!",["T_VARIABLE","$this",183],["T_OBJECT_OPERATOR","->",183],["T_STRING","getQuote",183],"(",")",["T_OBJECT_OPERATOR","->",183],["T_STRING","getId",183],"(",")",")",["T_WHITESPACE"," ",183],"{",["T_WHITESPACE","\n            ",183],["T_RETURN","return",184],["T_WHITESPACE"," ",184],"[","]",";",["T_WHITESPACE","\n        ",184],"}",["T_WHITESPACE","\n        ",185],["T_RETURN","return",186],["T_WHITESPACE"," ",186],["T_VARIABLE","$this",186],["T_OBJECT_OPERATOR","->",186],["T_STRING","getQuote",186],"(",")",["T_OBJECT_OPERATOR","->",186],["T_STRING","getItemsCollection",186],"(",")",";",["T_WHITESPACE","\n    ",186],"}",["T_WHITESPACE","\n\n    ",187],["T_DOC_COMMENT","\/**\n     * Retrieve array of cart product ids\n     *\n     * @return array\n     *\/",189],["T_WHITESPACE","\n    ",193],["T_PUBLIC","public",194],["T_WHITESPACE"," ",194],["T_FUNCTION","function",194],["T_WHITESPACE"," ",194],["T_STRING","getQuoteProductIds",194],"(",")",["T_WHITESPACE","\n    ",194],"{",["T_WHITESPACE","\n        ",195],["T_VARIABLE","$products",196],["T_WHITESPACE"," ",196],"=",["T_WHITESPACE"," ",196],["T_VARIABLE","$this",196],["T_OBJECT_OPERATOR","->",196],["T_STRING","getData",196],"(",["T_CONSTANT_ENCAPSED_STRING","'product_ids'",196],")",";",["T_WHITESPACE","\n        ",196],["T_IF","if",197],["T_WHITESPACE"," ",197],"(",["T_VARIABLE","$products",197],["T_WHITESPACE"," ",197],["T_IS_IDENTICAL","===",197],["T_WHITESPACE"," ",197],["T_STRING","null",197],")",["T_WHITESPACE"," ",197],"{",["T_WHITESPACE","\n            ",197],["T_VARIABLE","$products",198],["T_WHITESPACE"," ",198],"=",["T_WHITESPACE"," ",198],"[","]",";",["T_WHITESPACE","\n            ",198],["T_FOREACH","foreach",199],["T_WHITESPACE"," ",199],"(",["T_VARIABLE","$this",199],["T_OBJECT_OPERATOR","->",199],["T_STRING","getQuote",199],"(",")",["T_OBJECT_OPERATOR","->",199],["T_STRING","getAllItems",199],"(",")",["T_WHITESPACE"," ",199],["T_AS","as",199],["T_WHITESPACE"," ",199],["T_VARIABLE","$item",199],")",["T_WHITESPACE"," ",199],"{",["T_WHITESPACE","\n                ",199],["T_VARIABLE","$products",200],"[",["T_VARIABLE","$item",200],["T_OBJECT_OPERATOR","->",200],["T_STRING","getProductId",200],"(",")","]",["T_WHITESPACE"," ",200],"=",["T_WHITESPACE"," ",200],["T_VARIABLE","$item",200],["T_OBJECT_OPERATOR","->",200],["T_STRING","getProductId",200],"(",")",";",["T_WHITESPACE","\n            ",200],"}",["T_WHITESPACE","\n            ",201],["T_VARIABLE","$this",202],["T_OBJECT_OPERATOR","->",202],["T_STRING","setData",202],"(",["T_CONSTANT_ENCAPSED_STRING","'product_ids'",202],",",["T_WHITESPACE"," ",202],["T_VARIABLE","$products",202],")",";",["T_WHITESPACE","\n        ",202],"}",["T_WHITESPACE","\n        ",203],["T_RETURN","return",204],["T_WHITESPACE"," ",204],["T_VARIABLE","$products",204],";",["T_WHITESPACE","\n    ",204],"}",["T_WHITESPACE","\n\n    ",205],["T_DOC_COMMENT","\/**\n     * Get quote object associated with cart. By default it is current customer session quote\n     *\n     * @return \\Magento\\Quote\\Model\\Quote\n     *\/",207],["T_WHITESPACE","\n    ",211],["T_PUBLIC","public",212],["T_WHITESPACE"," ",212],["T_FUNCTION","function",212],["T_WHITESPACE"," ",212],["T_STRING","getQuote",212],"(",")",["T_WHITESPACE","\n    ",212],"{",["T_WHITESPACE","\n        ",213],["T_IF","if",214],["T_WHITESPACE"," ",214],"(","!",["T_VARIABLE","$this",214],["T_OBJECT_OPERATOR","->",214],["T_STRING","hasData",214],"(",["T_CONSTANT_ENCAPSED_STRING","'quote'",214],")",")",["T_WHITESPACE"," ",214],"{",["T_WHITESPACE","\n            ",214],["T_VARIABLE","$this",215],["T_OBJECT_OPERATOR","->",215],["T_STRING","setData",215],"(",["T_CONSTANT_ENCAPSED_STRING","'quote'",215],",",["T_WHITESPACE"," ",215],["T_VARIABLE","$this",215],["T_OBJECT_OPERATOR","->",215],["T_STRING","_checkoutSession",215],["T_OBJECT_OPERATOR","->",215],["T_STRING","getQuote",215],"(",")",")",";",["T_WHITESPACE","\n        ",215],"}",["T_WHITESPACE","\n        ",216],["T_RETURN","return",217],["T_WHITESPACE"," ",217],["T_VARIABLE","$this",217],["T_OBJECT_OPERATOR","->",217],["T_STRING","_getData",217],"(",["T_CONSTANT_ENCAPSED_STRING","'quote'",217],")",";",["T_WHITESPACE","\n    ",217],"}",["T_WHITESPACE","\n\n    ",218],["T_DOC_COMMENT","\/**\n     * Set quote object associated with the cart\n     *\n     * @param \\Magento\\Quote\\Model\\Quote $quote\n     * @return $this\n     * @codeCoverageIgnore\n     *\/",220],["T_WHITESPACE","\n    ",226],["T_PUBLIC","public",227],["T_WHITESPACE"," ",227],["T_FUNCTION","function",227],["T_WHITESPACE"," ",227],["T_STRING","setQuote",227],"(",["T_NS_SEPARATOR","\\",227],["T_STRING","Magento",227],["T_NS_SEPARATOR","\\",227],["T_STRING","Quote",227],["T_NS_SEPARATOR","\\",227],["T_STRING","Model",227],["T_NS_SEPARATOR","\\",227],["T_STRING","Quote",227],["T_WHITESPACE"," ",227],["T_VARIABLE","$quote",227],")",["T_WHITESPACE","\n    ",227],"{",["T_WHITESPACE","\n        ",228],["T_VARIABLE","$this",229],["T_OBJECT_OPERATOR","->",229],["T_STRING","setData",229],"(",["T_CONSTANT_ENCAPSED_STRING","'quote'",229],",",["T_WHITESPACE"," ",229],["T_VARIABLE","$quote",229],")",";",["T_WHITESPACE","\n        ",229],["T_RETURN","return",230],["T_WHITESPACE"," ",230],["T_VARIABLE","$this",230],";",["T_WHITESPACE","\n    ",230],"}",["T_WHITESPACE","\n\n    ",231],["T_DOC_COMMENT","\/**\n     * Reinitialize cart quote state\n     *\n     * @return $this\n     *\/",233],["T_WHITESPACE","\n    ",237],["T_PROTECTED","protected",238],["T_WHITESPACE"," ",238],["T_FUNCTION","function",238],["T_WHITESPACE"," ",238],["T_STRING","reinitializeState",238],"(",")",["T_WHITESPACE","\n    ",238],"{",["T_WHITESPACE","\n        ",239],["T_VARIABLE","$quote",240],["T_WHITESPACE"," ",240],"=",["T_WHITESPACE"," ",240],["T_VARIABLE","$this",240],["T_OBJECT_OPERATOR","->",240],["T_STRING","getQuote",240],"(",")",["T_OBJECT_OPERATOR","->",240],["T_STRING","setCheckoutMethod",240],"(",["T_CONSTANT_ENCAPSED_STRING","''",240],")",";",["T_WHITESPACE","\n        ",240],["T_VARIABLE","$this",241],["T_OBJECT_OPERATOR","->",241],["T_STRING","_checkoutSession",241],["T_OBJECT_OPERATOR","->",241],["T_STRING","setCartWasUpdated",241],"(",["T_STRING","true",241],")",";",["T_WHITESPACE","\n        ",241],["T_COMMENT","\/\/ TODO: Move this logic to Multishipping module as plug-in.\n",242],["T_WHITESPACE","        ",243],["T_COMMENT","\/\/ reset for multiple address checkout\n",243],["T_WHITESPACE","        ",244],["T_IF","if",244],["T_WHITESPACE"," ",244],"(",["T_VARIABLE","$this",244],["T_OBJECT_OPERATOR","->",244],["T_STRING","_checkoutSession",244],["T_OBJECT_OPERATOR","->",244],["T_STRING","getCheckoutState",244],"(",")",["T_WHITESPACE"," ",244],["T_IS_NOT_IDENTICAL","!==",244],["T_WHITESPACE"," ",244],["T_STRING","Session",244],["T_DOUBLE_COLON","::",244],["T_STRING","CHECKOUT_STATE_BEGIN",244],["T_WHITESPACE","\n            ",244],["T_BOOLEAN_AND","&&",245],["T_WHITESPACE"," ",245],["T_VARIABLE","$this",245],["T_OBJECT_OPERATOR","->",245],["T_STRING","_checkoutSession",245],["T_OBJECT_OPERATOR","->",245],["T_STRING","getCheckoutState",245],"(",")",["T_WHITESPACE"," ",245],["T_IS_NOT_IDENTICAL","!==",245],["T_WHITESPACE"," ",245],["T_STRING","null",245],")",["T_WHITESPACE"," ",245],"{",["T_WHITESPACE","\n            ",245],["T_VARIABLE","$quote",246],["T_OBJECT_OPERATOR","->",246],["T_STRING","removeAllAddresses",246],"(",")",["T_OBJECT_OPERATOR","->",246],["T_STRING","removePayment",246],"(",")",";",["T_WHITESPACE","\n            ",246],["T_VARIABLE","$this",247],["T_OBJECT_OPERATOR","->",247],["T_STRING","_checkoutSession",247],["T_OBJECT_OPERATOR","->",247],["T_STRING","resetCheckout",247],"(",")",";",["T_WHITESPACE","\n        ",247],"}",["T_WHITESPACE","\n        ",248],["T_RETURN","return",249],["T_WHITESPACE"," ",249],["T_VARIABLE","$this",249],";",["T_WHITESPACE","\n    ",249],"}",["T_WHITESPACE","\n\n    ",250],["T_DOC_COMMENT","\/**\n     * Convert order item to quote item\n     *\n     * @param \\Magento\\Sales\\Model\\Order\\Item $orderItem\n     * @param true|null $qtyFlag if is null set product qty like in order\n     * @return $this\n     *\/",252],["T_WHITESPACE","\n    ",258],["T_PUBLIC","public",259],["T_WHITESPACE"," ",259],["T_FUNCTION","function",259],["T_WHITESPACE"," ",259],["T_STRING","addOrderItem",259],"(",["T_VARIABLE","$orderItem",259],",",["T_WHITESPACE"," ",259],["T_VARIABLE","$qtyFlag",259],["T_WHITESPACE"," ",259],"=",["T_WHITESPACE"," ",259],["T_STRING","null",259],")",["T_WHITESPACE","\n    ",259],"{",["T_WHITESPACE","\n        ",260],["T_COMMENT","\/* @var $orderItem \\Magento\\Sales\\Model\\Order\\Item *\/",261],["T_WHITESPACE","\n        ",261],["T_IF","if",262],["T_WHITESPACE"," ",262],"(",["T_VARIABLE","$orderItem",262],["T_OBJECT_OPERATOR","->",262],["T_STRING","getParentItem",262],"(",")",["T_WHITESPACE"," ",262],["T_IS_IDENTICAL","===",262],["T_WHITESPACE"," ",262],["T_STRING","null",262],")",["T_WHITESPACE"," ",262],"{",["T_WHITESPACE","\n            ",262],["T_VARIABLE","$storeId",263],["T_WHITESPACE"," ",263],"=",["T_WHITESPACE"," ",263],["T_VARIABLE","$this",263],["T_OBJECT_OPERATOR","->",263],["T_STRING","_storeManager",263],["T_OBJECT_OPERATOR","->",263],["T_STRING","getStore",263],"(",")",["T_OBJECT_OPERATOR","->",263],["T_STRING","getId",263],"(",")",";",["T_WHITESPACE","\n            ",263],["T_TRY","try",264],["T_WHITESPACE"," ",264],"{",["T_WHITESPACE","\n                ",264],["T_DOC_COMMENT","\/**\n                 * We need to reload product in this place, because products\n                 * with the same id may have different sets of order attributes.\n                 *\/",265],["T_WHITESPACE","\n                ",268],["T_VARIABLE","$product",269],["T_WHITESPACE"," ",269],"=",["T_WHITESPACE"," ",269],["T_VARIABLE","$this",269],["T_OBJECT_OPERATOR","->",269],["T_STRING","productRepository",269],["T_OBJECT_OPERATOR","->",269],["T_STRING","getById",269],"(",["T_VARIABLE","$orderItem",269],["T_OBJECT_OPERATOR","->",269],["T_STRING","getProductId",269],"(",")",",",["T_WHITESPACE"," ",269],["T_STRING","false",269],",",["T_WHITESPACE"," ",269],["T_VARIABLE","$storeId",269],",",["T_WHITESPACE"," ",269],["T_STRING","true",269],")",";",["T_WHITESPACE","\n            ",269],"}",["T_WHITESPACE"," ",270],["T_CATCH","catch",270],["T_WHITESPACE"," ",270],"(",["T_STRING","NoSuchEntityException",270],["T_WHITESPACE"," ",270],["T_VARIABLE","$e",270],")",["T_WHITESPACE"," ",270],"{",["T_WHITESPACE","\n                ",270],["T_RETURN","return",271],["T_WHITESPACE"," ",271],["T_VARIABLE","$this",271],";",["T_WHITESPACE","\n            ",271],"}",["T_WHITESPACE","\n            ",272],["T_VARIABLE","$info",273],["T_WHITESPACE"," ",273],"=",["T_WHITESPACE"," ",273],["T_VARIABLE","$orderItem",273],["T_OBJECT_OPERATOR","->",273],["T_STRING","getProductOptionByCode",273],"(",["T_CONSTANT_ENCAPSED_STRING","'info_buyRequest'",273],")",";",["T_WHITESPACE","\n            ",273],["T_VARIABLE","$info",274],["T_WHITESPACE"," ",274],"=",["T_WHITESPACE"," ",274],["T_NEW","new",274],["T_WHITESPACE"," ",274],["T_NS_SEPARATOR","\\",274],["T_STRING","Magento",274],["T_NS_SEPARATOR","\\",274],["T_STRING","Framework",274],["T_NS_SEPARATOR","\\",274],["T_STRING","DataObject",274],"(",["T_VARIABLE","$info",274],")",";",["T_WHITESPACE","\n            ",274],["T_IF","if",275],["T_WHITESPACE"," ",275],"(",["T_VARIABLE","$qtyFlag",275],["T_WHITESPACE"," ",275],["T_IS_IDENTICAL","===",275],["T_WHITESPACE"," ",275],["T_STRING","null",275],")",["T_WHITESPACE"," ",275],"{",["T_WHITESPACE","\n                ",275],["T_VARIABLE","$info",276],["T_OBJECT_OPERATOR","->",276],["T_STRING","setQty",276],"(",["T_VARIABLE","$orderItem",276],["T_OBJECT_OPERATOR","->",276],["T_STRING","getQtyOrdered",276],"(",")",")",";",["T_WHITESPACE","\n            ",276],"}",["T_WHITESPACE"," ",277],["T_ELSE","else",277],["T_WHITESPACE"," ",277],"{",["T_WHITESPACE","\n                ",277],["T_VARIABLE","$info",278],["T_OBJECT_OPERATOR","->",278],["T_STRING","setQty",278],"(",["T_LNUMBER","1",278],")",";",["T_WHITESPACE","\n            ",278],"}",["T_WHITESPACE","\n\n            ",279],["T_VARIABLE","$this",281],["T_OBJECT_OPERATOR","->",281],["T_STRING","addProduct",281],"(",["T_VARIABLE","$product",281],",",["T_WHITESPACE"," ",281],["T_VARIABLE","$info",281],")",";",["T_WHITESPACE","\n        ",281],"}",["T_WHITESPACE","\n        ",282],["T_RETURN","return",283],["T_WHITESPACE"," ",283],["T_VARIABLE","$this",283],";",["T_WHITESPACE","\n    ",283],"}",["T_WHITESPACE","\n\n    ",284],["T_DOC_COMMENT","\/**\n     * Get product object based on requested product information\n     *\n     * @param   Product|int|string $productInfo\n     * @return  Product\n     * @throws \\Magento\\Framework\\Exception\\LocalizedException\n     *\/",286],["T_WHITESPACE","\n    ",292],["T_PROTECTED","protected",293],["T_WHITESPACE"," ",293],["T_FUNCTION","function",293],["T_WHITESPACE"," ",293],["T_STRING","_getProduct",293],"(",["T_VARIABLE","$productInfo",293],")",["T_WHITESPACE","\n    ",293],"{",["T_WHITESPACE","\n        ",294],["T_VARIABLE","$product",295],["T_WHITESPACE"," ",295],"=",["T_WHITESPACE"," ",295],["T_STRING","null",295],";",["T_WHITESPACE","\n        ",295],["T_IF","if",296],["T_WHITESPACE"," ",296],"(",["T_VARIABLE","$productInfo",296],["T_WHITESPACE"," ",296],["T_INSTANCEOF","instanceof",296],["T_WHITESPACE"," ",296],["T_STRING","Product",296],")",["T_WHITESPACE"," ",296],"{",["T_WHITESPACE","\n            ",296],["T_VARIABLE","$product",297],["T_WHITESPACE"," ",297],"=",["T_WHITESPACE"," ",297],["T_VARIABLE","$productInfo",297],";",["T_WHITESPACE","\n            ",297],["T_IF","if",298],["T_WHITESPACE"," ",298],"(","!",["T_VARIABLE","$product",298],["T_OBJECT_OPERATOR","->",298],["T_STRING","getId",298],"(",")",")",["T_WHITESPACE"," ",298],"{",["T_WHITESPACE","\n                ",298],["T_THROW","throw",299],["T_WHITESPACE"," ",299],["T_NEW","new",299],["T_WHITESPACE"," ",299],["T_NS_SEPARATOR","\\",299],["T_STRING","Magento",299],["T_NS_SEPARATOR","\\",299],["T_STRING","Framework",299],["T_NS_SEPARATOR","\\",299],["T_STRING","Exception",299],["T_NS_SEPARATOR","\\",299],["T_STRING","LocalizedException",299],"(",["T_STRING","__",299],"(",["T_CONSTANT_ENCAPSED_STRING","'We can\\'t find the product.'",299],")",")",";",["T_WHITESPACE","\n            ",299],"}",["T_WHITESPACE","\n        ",300],"}",["T_WHITESPACE"," ",301],["T_ELSEIF","elseif",301],["T_WHITESPACE"," ",301],"(",["T_STRING","is_int",301],"(",["T_VARIABLE","$productInfo",301],")",["T_WHITESPACE"," ",301],["T_BOOLEAN_OR","||",301],["T_WHITESPACE"," ",301],["T_STRING","is_string",301],"(",["T_VARIABLE","$productInfo",301],")",")",["T_WHITESPACE"," ",301],"{",["T_WHITESPACE","\n            ",301],["T_VARIABLE","$storeId",302],["T_WHITESPACE"," ",302],"=",["T_WHITESPACE"," ",302],["T_VARIABLE","$this",302],["T_OBJECT_OPERATOR","->",302],["T_STRING","_storeManager",302],["T_OBJECT_OPERATOR","->",302],["T_STRING","getStore",302],"(",")",["T_OBJECT_OPERATOR","->",302],["T_STRING","getId",302],"(",")",";",["T_WHITESPACE","\n            ",302],["T_TRY","try",303],["T_WHITESPACE"," ",303],"{",["T_WHITESPACE","\n                ",303],["T_VARIABLE","$product",304],["T_WHITESPACE"," ",304],"=",["T_WHITESPACE"," ",304],["T_VARIABLE","$this",304],["T_OBJECT_OPERATOR","->",304],["T_STRING","productRepository",304],["T_OBJECT_OPERATOR","->",304],["T_STRING","getById",304],"(",["T_VARIABLE","$productInfo",304],",",["T_WHITESPACE"," ",304],["T_STRING","false",304],",",["T_WHITESPACE"," ",304],["T_VARIABLE","$storeId",304],")",";",["T_WHITESPACE","\n            ",304],"}",["T_WHITESPACE"," ",305],["T_CATCH","catch",305],["T_WHITESPACE"," ",305],"(",["T_STRING","NoSuchEntityException",305],["T_WHITESPACE"," ",305],["T_VARIABLE","$e",305],")",["T_WHITESPACE"," ",305],"{",["T_WHITESPACE","\n                ",305],["T_THROW","throw",306],["T_WHITESPACE"," ",306],["T_NEW","new",306],["T_WHITESPACE"," ",306],["T_NS_SEPARATOR","\\",306],["T_STRING","Magento",306],["T_NS_SEPARATOR","\\",306],["T_STRING","Framework",306],["T_NS_SEPARATOR","\\",306],["T_STRING","Exception",306],["T_NS_SEPARATOR","\\",306],["T_STRING","LocalizedException",306],"(",["T_STRING","__",306],"(",["T_CONSTANT_ENCAPSED_STRING","'We can\\'t find the product.'",306],")",",",["T_WHITESPACE"," ",306],["T_VARIABLE","$e",306],")",";",["T_WHITESPACE","\n            ",306],"}",["T_WHITESPACE","\n        ",307],"}",["T_WHITESPACE"," ",308],["T_ELSE","else",308],["T_WHITESPACE"," ",308],"{",["T_WHITESPACE","\n            ",308],["T_THROW","throw",309],["T_WHITESPACE"," ",309],["T_NEW","new",309],["T_WHITESPACE"," ",309],["T_NS_SEPARATOR","\\",309],["T_STRING","Magento",309],["T_NS_SEPARATOR","\\",309],["T_STRING","Framework",309],["T_NS_SEPARATOR","\\",309],["T_STRING","Exception",309],["T_NS_SEPARATOR","\\",309],["T_STRING","LocalizedException",309],"(",["T_STRING","__",309],"(",["T_CONSTANT_ENCAPSED_STRING","'We can\\'t find the product.'",309],")",")",";",["T_WHITESPACE","\n        ",309],"}",["T_WHITESPACE","\n        ",310],["T_VARIABLE","$currentWebsiteId",311],["T_WHITESPACE"," ",311],"=",["T_WHITESPACE"," ",311],["T_VARIABLE","$this",311],["T_OBJECT_OPERATOR","->",311],["T_STRING","_storeManager",311],["T_OBJECT_OPERATOR","->",311],["T_STRING","getStore",311],"(",")",["T_OBJECT_OPERATOR","->",311],["T_STRING","getWebsiteId",311],"(",")",";",["T_WHITESPACE","\n        ",311],["T_IF","if",312],["T_WHITESPACE"," ",312],"(","!",["T_STRING","is_array",312],"(",["T_VARIABLE","$product",312],["T_OBJECT_OPERATOR","->",312],["T_STRING","getWebsiteIds",312],"(",")",")",["T_WHITESPACE"," ",312],["T_BOOLEAN_OR","||",312],["T_WHITESPACE"," ",312],"!",["T_STRING","in_array",312],"(",["T_VARIABLE","$currentWebsiteId",312],",",["T_WHITESPACE"," ",312],["T_VARIABLE","$product",312],["T_OBJECT_OPERATOR","->",312],["T_STRING","getWebsiteIds",312],"(",")",")",")",["T_WHITESPACE"," ",312],"{",["T_WHITESPACE","\n            ",312],["T_THROW","throw",313],["T_WHITESPACE"," ",313],["T_NEW","new",313],["T_WHITESPACE"," ",313],["T_NS_SEPARATOR","\\",313],["T_STRING","Magento",313],["T_NS_SEPARATOR","\\",313],["T_STRING","Framework",313],["T_NS_SEPARATOR","\\",313],["T_STRING","Exception",313],["T_NS_SEPARATOR","\\",313],["T_STRING","LocalizedException",313],"(",["T_STRING","__",313],"(",["T_CONSTANT_ENCAPSED_STRING","'We can\\'t find the product.'",313],")",")",";",["T_WHITESPACE","\n        ",313],"}",["T_WHITESPACE","\n        ",314],["T_RETURN","return",315],["T_WHITESPACE"," ",315],["T_VARIABLE","$product",315],";",["T_WHITESPACE","\n    ",315],"}",["T_WHITESPACE","\n\n    ",316],["T_DOC_COMMENT","\/**\n     * Get request for product add to cart procedure\n     *\n     * @param   \\Magento\\Framework\\DataObject|int|array $requestInfo\n     * @return  \\Magento\\Framework\\DataObject\n     * @throws \\Magento\\Framework\\Exception\\LocalizedException\n     *\/",318],["T_WHITESPACE","\n    ",324],["T_PROTECTED","protected",325],["T_WHITESPACE"," ",325],["T_FUNCTION","function",325],["T_WHITESPACE"," ",325],["T_STRING","_getProductRequest",325],"(",["T_VARIABLE","$requestInfo",325],")",["T_WHITESPACE","\n    ",325],"{",["T_WHITESPACE","\n        ",326],["T_IF","if",327],["T_WHITESPACE"," ",327],"(",["T_VARIABLE","$requestInfo",327],["T_WHITESPACE"," ",327],["T_INSTANCEOF","instanceof",327],["T_WHITESPACE"," ",327],["T_NS_SEPARATOR","\\",327],["T_STRING","Magento",327],["T_NS_SEPARATOR","\\",327],["T_STRING","Framework",327],["T_NS_SEPARATOR","\\",327],["T_STRING","DataObject",327],")",["T_WHITESPACE"," ",327],"{",["T_WHITESPACE","\n            ",327],["T_VARIABLE","$request",328],["T_WHITESPACE"," ",328],"=",["T_WHITESPACE"," ",328],["T_VARIABLE","$requestInfo",328],";",["T_WHITESPACE","\n        ",328],"}",["T_WHITESPACE"," ",329],["T_ELSEIF","elseif",329],["T_WHITESPACE"," ",329],"(",["T_STRING","is_numeric",329],"(",["T_VARIABLE","$requestInfo",329],")",")",["T_WHITESPACE"," ",329],"{",["T_WHITESPACE","\n            ",329],["T_VARIABLE","$request",330],["T_WHITESPACE"," ",330],"=",["T_WHITESPACE"," ",330],["T_NEW","new",330],["T_WHITESPACE"," ",330],["T_NS_SEPARATOR","\\",330],["T_STRING","Magento",330],["T_NS_SEPARATOR","\\",330],["T_STRING","Framework",330],["T_NS_SEPARATOR","\\",330],["T_STRING","DataObject",330],"(","[",["T_CONSTANT_ENCAPSED_STRING","'qty'",330],["T_WHITESPACE"," ",330],["T_DOUBLE_ARROW","=>",330],["T_WHITESPACE"," ",330],["T_VARIABLE","$requestInfo",330],"]",")",";",["T_WHITESPACE","\n        ",330],"}",["T_WHITESPACE"," ",331],["T_ELSEIF","elseif",331],["T_WHITESPACE"," ",331],"(",["T_STRING","is_array",331],"(",["T_VARIABLE","$requestInfo",331],")",")",["T_WHITESPACE"," ",331],"{",["T_WHITESPACE","\n            ",331],["T_VARIABLE","$request",332],["T_WHITESPACE"," ",332],"=",["T_WHITESPACE"," ",332],["T_NEW","new",332],["T_WHITESPACE"," ",332],["T_NS_SEPARATOR","\\",332],["T_STRING","Magento",332],["T_NS_SEPARATOR","\\",332],["T_STRING","Framework",332],["T_NS_SEPARATOR","\\",332],["T_STRING","DataObject",332],"(",["T_VARIABLE","$requestInfo",332],")",";",["T_WHITESPACE","\n        ",332],"}",["T_WHITESPACE"," ",333],["T_ELSE","else",333],["T_WHITESPACE"," ",333],"{",["T_WHITESPACE","\n            ",333],["T_THROW","throw",334],["T_WHITESPACE"," ",334],["T_NEW","new",334],["T_WHITESPACE"," ",334],["T_NS_SEPARATOR","\\",334],["T_STRING","Magento",334],["T_NS_SEPARATOR","\\",334],["T_STRING","Framework",334],["T_NS_SEPARATOR","\\",334],["T_STRING","Exception",334],["T_NS_SEPARATOR","\\",334],["T_STRING","LocalizedException",334],"(",["T_WHITESPACE","\n                ",334],["T_STRING","__",335],"(",["T_CONSTANT_ENCAPSED_STRING","'We found an invalid request for adding product to quote.'",335],")",["T_WHITESPACE","\n            ",335],")",";",["T_WHITESPACE","\n        ",336],"}",["T_WHITESPACE","\n        ",337],["T_VARIABLE","$this",338],["T_OBJECT_OPERATOR","->",338],["T_STRING","getRequestInfoFilter",338],"(",")",["T_OBJECT_OPERATOR","->",338],["T_STRING","filter",338],"(",["T_VARIABLE","$request",338],")",";",["T_WHITESPACE","\n\n        ",338],["T_RETURN","return",340],["T_WHITESPACE"," ",340],["T_VARIABLE","$request",340],";",["T_WHITESPACE","\n    ",340],"}",["T_WHITESPACE","\n\n    ",341],["T_DOC_COMMENT","\/**\n     * Add product to shopping cart (quote)\n     *\n     * @param int|Product $productInfo\n     * @param \\Magento\\Framework\\DataObject|int|array $requestInfo\n     * @return $this\n     * @throws \\Magento\\Framework\\Exception\\LocalizedException\n     * @SuppressWarnings(PHPMD.CyclomaticComplexity)\n     *\/",343],["T_WHITESPACE","\n    ",351],["T_PUBLIC","public",352],["T_WHITESPACE"," ",352],["T_FUNCTION","function",352],["T_WHITESPACE"," ",352],["T_STRING","addProduct",352],"(",["T_VARIABLE","$productInfo",352],",",["T_WHITESPACE"," ",352],["T_VARIABLE","$requestInfo",352],["T_WHITESPACE"," ",352],"=",["T_WHITESPACE"," ",352],["T_STRING","null",352],")",["T_WHITESPACE","\n    ",352],"{",["T_WHITESPACE","\n        ",353],["T_VARIABLE","$product",354],["T_WHITESPACE"," ",354],"=",["T_WHITESPACE"," ",354],["T_VARIABLE","$this",354],["T_OBJECT_OPERATOR","->",354],["T_STRING","_getProduct",354],"(",["T_VARIABLE","$productInfo",354],")",";",["T_WHITESPACE","\n        ",354],["T_VARIABLE","$request",355],["T_WHITESPACE"," ",355],"=",["T_WHITESPACE"," ",355],["T_VARIABLE","$this",355],["T_OBJECT_OPERATOR","->",355],["T_STRING","_getProductRequest",355],"(",["T_VARIABLE","$requestInfo",355],")",";",["T_WHITESPACE","\n        ",355],["T_VARIABLE","$productId",356],["T_WHITESPACE"," ",356],"=",["T_WHITESPACE"," ",356],["T_VARIABLE","$product",356],["T_OBJECT_OPERATOR","->",356],["T_STRING","getId",356],"(",")",";",["T_WHITESPACE","\n\n        ",356],["T_IF","if",358],["T_WHITESPACE"," ",358],"(",["T_VARIABLE","$productId",358],")",["T_WHITESPACE"," ",358],"{",["T_WHITESPACE","\n            ",358],["T_VARIABLE","$stockItem",359],["T_WHITESPACE"," ",359],"=",["T_WHITESPACE"," ",359],["T_VARIABLE","$this",359],["T_OBJECT_OPERATOR","->",359],["T_STRING","stockRegistry",359],["T_OBJECT_OPERATOR","->",359],["T_STRING","getStockItem",359],"(",["T_VARIABLE","$productId",359],",",["T_WHITESPACE"," ",359],["T_VARIABLE","$product",359],["T_OBJECT_OPERATOR","->",359],["T_STRING","getStore",359],"(",")",["T_OBJECT_OPERATOR","->",359],["T_STRING","getWebsiteId",359],"(",")",")",";",["T_WHITESPACE","\n            ",359],["T_VARIABLE","$minimumQty",360],["T_WHITESPACE"," ",360],"=",["T_WHITESPACE"," ",360],["T_VARIABLE","$stockItem",360],["T_OBJECT_OPERATOR","->",360],["T_STRING","getMinSaleQty",360],"(",")",";",["T_WHITESPACE","\n            ",360],["T_COMMENT","\/\/If product quantity is not specified in request and there is set minimal qty for it\n",361],["T_WHITESPACE","            ",362],["T_IF","if",362],["T_WHITESPACE"," ",362],"(",["T_VARIABLE","$minimumQty",362],["T_WHITESPACE","\n                ",362],["T_BOOLEAN_AND","&&",363],["T_WHITESPACE"," ",363],["T_VARIABLE","$minimumQty",363],["T_WHITESPACE"," ",363],">",["T_WHITESPACE"," ",363],["T_LNUMBER","0",363],["T_WHITESPACE","\n                ",363],["T_BOOLEAN_AND","&&",364],["T_WHITESPACE"," ",364],"!",["T_VARIABLE","$request",364],["T_OBJECT_OPERATOR","->",364],["T_STRING","getQty",364],"(",")",["T_WHITESPACE","\n            ",364],")",["T_WHITESPACE"," ",365],"{",["T_WHITESPACE","\n                ",365],["T_VARIABLE","$request",366],["T_OBJECT_OPERATOR","->",366],["T_STRING","setQty",366],"(",["T_VARIABLE","$minimumQty",366],")",";",["T_WHITESPACE","\n            ",366],"}",["T_WHITESPACE","\n        ",367],"}",["T_WHITESPACE","\n\n        ",368],["T_IF","if",370],["T_WHITESPACE"," ",370],"(",["T_VARIABLE","$productId",370],")",["T_WHITESPACE"," ",370],"{",["T_WHITESPACE","\n            ",370],["T_TRY","try",371],["T_WHITESPACE"," ",371],"{",["T_WHITESPACE","\n                ",371],["T_VARIABLE","$result",372],["T_WHITESPACE"," ",372],"=",["T_WHITESPACE"," ",372],["T_VARIABLE","$this",372],["T_OBJECT_OPERATOR","->",372],["T_STRING","getQuote",372],"(",")",["T_OBJECT_OPERATOR","->",372],["T_STRING","addProduct",372],"(",["T_VARIABLE","$product",372],",",["T_WHITESPACE"," ",372],["T_VARIABLE","$request",372],")",";",["T_WHITESPACE","\n            ",372],"}",["T_WHITESPACE"," ",373],["T_CATCH","catch",373],["T_WHITESPACE"," ",373],"(",["T_NS_SEPARATOR","\\",373],["T_STRING","Magento",373],["T_NS_SEPARATOR","\\",373],["T_STRING","Framework",373],["T_NS_SEPARATOR","\\",373],["T_STRING","Exception",373],["T_NS_SEPARATOR","\\",373],["T_STRING","LocalizedException",373],["T_WHITESPACE"," ",373],["T_VARIABLE","$e",373],")",["T_WHITESPACE"," ",373],"{",["T_WHITESPACE","\n                ",373],["T_VARIABLE","$this",374],["T_OBJECT_OPERATOR","->",374],["T_STRING","_checkoutSession",374],["T_OBJECT_OPERATOR","->",374],["T_STRING","setUseNotice",374],"(",["T_STRING","false",374],")",";",["T_WHITESPACE","\n                ",374],["T_VARIABLE","$result",375],["T_WHITESPACE"," ",375],"=",["T_WHITESPACE"," ",375],["T_VARIABLE","$e",375],["T_OBJECT_OPERATOR","->",375],["T_STRING","getMessage",375],"(",")",";",["T_WHITESPACE","\n            ",375],"}",["T_WHITESPACE","\n            ",376],["T_DOC_COMMENT","\/**\n             * String we can get if prepare process has error\n             *\/",377],["T_WHITESPACE","\n            ",379],["T_IF","if",380],["T_WHITESPACE"," ",380],"(",["T_STRING","is_string",380],"(",["T_VARIABLE","$result",380],")",")",["T_WHITESPACE"," ",380],"{",["T_WHITESPACE","\n                ",380],["T_IF","if",381],["T_WHITESPACE"," ",381],"(",["T_VARIABLE","$product",381],["T_OBJECT_OPERATOR","->",381],["T_STRING","hasOptionsValidationFail",381],"(",")",")",["T_WHITESPACE"," ",381],"{",["T_WHITESPACE","\n                    ",381],["T_VARIABLE","$redirectUrl",382],["T_WHITESPACE"," ",382],"=",["T_WHITESPACE"," ",382],["T_VARIABLE","$product",382],["T_OBJECT_OPERATOR","->",382],["T_STRING","getUrlModel",382],"(",")",["T_OBJECT_OPERATOR","->",382],["T_STRING","getUrl",382],"(",["T_WHITESPACE","\n                        ",382],["T_VARIABLE","$product",383],",",["T_WHITESPACE","\n                        ",383],"[",["T_CONSTANT_ENCAPSED_STRING","'_query'",384],["T_WHITESPACE"," ",384],["T_DOUBLE_ARROW","=>",384],["T_WHITESPACE"," ",384],"[",["T_CONSTANT_ENCAPSED_STRING","'startcustomization'",384],["T_WHITESPACE"," ",384],["T_DOUBLE_ARROW","=>",384],["T_WHITESPACE"," ",384],["T_LNUMBER","1",384],"]","]",["T_WHITESPACE","\n                    ",384],")",";",["T_WHITESPACE","\n                ",385],"}",["T_WHITESPACE"," ",386],["T_ELSE","else",386],["T_WHITESPACE"," ",386],"{",["T_WHITESPACE","\n                    ",386],["T_VARIABLE","$redirectUrl",387],["T_WHITESPACE"," ",387],"=",["T_WHITESPACE"," ",387],["T_VARIABLE","$product",387],["T_OBJECT_OPERATOR","->",387],["T_STRING","getProductUrl",387],"(",")",";",["T_WHITESPACE","\n                ",387],"}",["T_WHITESPACE","\n                ",388],["T_VARIABLE","$this",389],["T_OBJECT_OPERATOR","->",389],["T_STRING","_checkoutSession",389],["T_OBJECT_OPERATOR","->",389],["T_STRING","setRedirectUrl",389],"(",["T_VARIABLE","$redirectUrl",389],")",";",["T_WHITESPACE","\n                ",389],["T_IF","if",390],["T_WHITESPACE"," ",390],"(",["T_VARIABLE","$this",390],["T_OBJECT_OPERATOR","->",390],["T_STRING","_checkoutSession",390],["T_OBJECT_OPERATOR","->",390],["T_STRING","getUseNotice",390],"(",")",["T_WHITESPACE"," ",390],["T_IS_IDENTICAL","===",390],["T_WHITESPACE"," ",390],["T_STRING","null",390],")",["T_WHITESPACE"," ",390],"{",["T_WHITESPACE","\n                    ",390],["T_VARIABLE","$this",391],["T_OBJECT_OPERATOR","->",391],["T_STRING","_checkoutSession",391],["T_OBJECT_OPERATOR","->",391],["T_STRING","setUseNotice",391],"(",["T_STRING","true",391],")",";",["T_WHITESPACE","\n                ",391],"}",["T_WHITESPACE","\n                ",392],["T_THROW","throw",393],["T_WHITESPACE"," ",393],["T_NEW","new",393],["T_WHITESPACE"," ",393],["T_NS_SEPARATOR","\\",393],["T_STRING","Magento",393],["T_NS_SEPARATOR","\\",393],["T_STRING","Framework",393],["T_NS_SEPARATOR","\\",393],["T_STRING","Exception",393],["T_NS_SEPARATOR","\\",393],["T_STRING","LocalizedException",393],"(",["T_STRING","__",393],"(",["T_VARIABLE","$result",393],")",")",";",["T_WHITESPACE","\n            ",393],"}",["T_WHITESPACE","\n        ",394],"}",["T_WHITESPACE"," ",395],["T_ELSE","else",395],["T_WHITESPACE"," ",395],"{",["T_WHITESPACE","\n            ",395],["T_THROW","throw",396],["T_WHITESPACE"," ",396],["T_NEW","new",396],["T_WHITESPACE"," ",396],["T_NS_SEPARATOR","\\",396],["T_STRING","Magento",396],["T_NS_SEPARATOR","\\",396],["T_STRING","Framework",396],["T_NS_SEPARATOR","\\",396],["T_STRING","Exception",396],["T_NS_SEPARATOR","\\",396],["T_STRING","LocalizedException",396],"(",["T_STRING","__",396],"(",["T_CONSTANT_ENCAPSED_STRING","'The product does not exist.'",396],")",")",";",["T_WHITESPACE","\n        ",396],"}",["T_WHITESPACE","\n\n        ",397],["T_VARIABLE","$this",399],["T_OBJECT_OPERATOR","->",399],["T_STRING","_eventManager",399],["T_OBJECT_OPERATOR","->",399],["T_STRING","dispatch",399],"(",["T_WHITESPACE","\n            ",399],["T_CONSTANT_ENCAPSED_STRING","'checkout_cart_product_add_after'",400],",",["T_WHITESPACE","\n            ",400],"[",["T_CONSTANT_ENCAPSED_STRING","'quote_item'",401],["T_WHITESPACE"," ",401],["T_DOUBLE_ARROW","=>",401],["T_WHITESPACE"," ",401],["T_VARIABLE","$result",401],",",["T_WHITESPACE"," ",401],["T_CONSTANT_ENCAPSED_STRING","'product'",401],["T_WHITESPACE"," ",401],["T_DOUBLE_ARROW","=>",401],["T_WHITESPACE"," ",401],["T_VARIABLE","$product",401],"]",["T_WHITESPACE","\n        ",401],")",";",["T_WHITESPACE","\n        ",402],["T_VARIABLE","$this",403],["T_OBJECT_OPERATOR","->",403],["T_STRING","_checkoutSession",403],["T_OBJECT_OPERATOR","->",403],["T_STRING","setLastAddedProductId",403],"(",["T_VARIABLE","$productId",403],")",";",["T_WHITESPACE","\n        ",403],["T_RETURN","return",404],["T_WHITESPACE"," ",404],["T_VARIABLE","$this",404],";",["T_WHITESPACE","\n    ",404],"}",["T_WHITESPACE","\n\n    ",405],["T_DOC_COMMENT","\/**\n     * Adding products to cart by ids\n     *\n     * @param  int[] $productIds\n     * @return $this\n     *\/",407],["T_WHITESPACE","\n    ",412],["T_PUBLIC","public",413],["T_WHITESPACE"," ",413],["T_FUNCTION","function",413],["T_WHITESPACE"," ",413],["T_STRING","addProductsByIds",413],"(",["T_VARIABLE","$productIds",413],")",["T_WHITESPACE","\n    ",413],"{",["T_WHITESPACE","\n        ",414],["T_VARIABLE","$allAvailable",415],["T_WHITESPACE"," ",415],"=",["T_WHITESPACE"," ",415],["T_STRING","true",415],";",["T_WHITESPACE","\n        ",415],["T_VARIABLE","$allAdded",416],["T_WHITESPACE"," ",416],"=",["T_WHITESPACE"," ",416],["T_STRING","true",416],";",["T_WHITESPACE","\n\n        ",416],["T_IF","if",418],["T_WHITESPACE"," ",418],"(","!",["T_EMPTY","empty",418],"(",["T_VARIABLE","$productIds",418],")",")",["T_WHITESPACE"," ",418],"{",["T_WHITESPACE","\n            ",418],["T_FOREACH","foreach",419],["T_WHITESPACE"," ",419],"(",["T_VARIABLE","$productIds",419],["T_WHITESPACE"," ",419],["T_AS","as",419],["T_WHITESPACE"," ",419],["T_VARIABLE","$productId",419],")",["T_WHITESPACE"," ",419],"{",["T_WHITESPACE","\n                ",419],["T_VARIABLE","$productId",420],["T_WHITESPACE"," ",420],"=",["T_WHITESPACE"," ",420],["T_INT_CAST","(int)",420],["T_VARIABLE","$productId",420],";",["T_WHITESPACE","\n                ",420],["T_IF","if",421],["T_WHITESPACE"," ",421],"(","!",["T_VARIABLE","$productId",421],")",["T_WHITESPACE"," ",421],"{",["T_WHITESPACE","\n                    ",421],["T_CONTINUE","continue",422],";",["T_WHITESPACE","\n                ",422],"}",["T_WHITESPACE","\n                ",423],["T_VARIABLE","$product",424],["T_WHITESPACE"," ",424],"=",["T_WHITESPACE"," ",424],["T_VARIABLE","$this",424],["T_OBJECT_OPERATOR","->",424],["T_STRING","_getProduct",424],"(",["T_VARIABLE","$productId",424],")",";",["T_WHITESPACE","\n                ",424],["T_IF","if",425],["T_WHITESPACE"," ",425],"(",["T_VARIABLE","$product",425],["T_OBJECT_OPERATOR","->",425],["T_STRING","getId",425],"(",")",["T_WHITESPACE"," ",425],["T_BOOLEAN_AND","&&",425],["T_WHITESPACE"," ",425],["T_VARIABLE","$product",425],["T_OBJECT_OPERATOR","->",425],["T_STRING","isVisibleInCatalog",425],"(",")",")",["T_WHITESPACE"," ",425],"{",["T_WHITESPACE","\n                    ",425],["T_TRY","try",426],["T_WHITESPACE"," ",426],"{",["T_WHITESPACE","\n                        ",426],["T_VARIABLE","$this",427],["T_OBJECT_OPERATOR","->",427],["T_STRING","getQuote",427],"(",")",["T_OBJECT_OPERATOR","->",427],["T_STRING","addProduct",427],"(",["T_VARIABLE","$product",427],")",";",["T_WHITESPACE","\n                    ",427],"}",["T_WHITESPACE"," ",428],["T_CATCH","catch",428],["T_WHITESPACE"," ",428],"(",["T_NS_SEPARATOR","\\",428],["T_STRING","Exception",428],["T_WHITESPACE"," ",428],["T_VARIABLE","$e",428],")",["T_WHITESPACE"," ",428],"{",["T_WHITESPACE","\n                        ",428],["T_VARIABLE","$allAdded",429],["T_WHITESPACE"," ",429],"=",["T_WHITESPACE"," ",429],["T_STRING","false",429],";",["T_WHITESPACE","\n                    ",429],"}",["T_WHITESPACE","\n                ",430],"}",["T_WHITESPACE"," ",431],["T_ELSE","else",431],["T_WHITESPACE"," ",431],"{",["T_WHITESPACE","\n                    ",431],["T_VARIABLE","$allAvailable",432],["T_WHITESPACE"," ",432],"=",["T_WHITESPACE"," ",432],["T_STRING","false",432],";",["T_WHITESPACE","\n                ",432],"}",["T_WHITESPACE","\n            ",433],"}",["T_WHITESPACE","\n\n            ",434],["T_IF","if",436],["T_WHITESPACE"," ",436],"(","!",["T_VARIABLE","$allAvailable",436],")",["T_WHITESPACE"," ",436],"{",["T_WHITESPACE","\n                ",436],["T_VARIABLE","$this",437],["T_OBJECT_OPERATOR","->",437],["T_STRING","messageManager",437],["T_OBJECT_OPERATOR","->",437],["T_STRING","addError",437],"(",["T_STRING","__",437],"(",["T_CONSTANT_ENCAPSED_STRING","\"We don't have some of the products you want.\"",437],")",")",";",["T_WHITESPACE","\n            ",437],"}",["T_WHITESPACE","\n            ",438],["T_IF","if",439],["T_WHITESPACE"," ",439],"(","!",["T_VARIABLE","$allAdded",439],")",["T_WHITESPACE"," ",439],"{",["T_WHITESPACE","\n                ",439],["T_VARIABLE","$this",440],["T_OBJECT_OPERATOR","->",440],["T_STRING","messageManager",440],["T_OBJECT_OPERATOR","->",440],["T_STRING","addError",440],"(",["T_STRING","__",440],"(",["T_CONSTANT_ENCAPSED_STRING","\"We don't have as many of some products as you want.\"",440],")",")",";",["T_WHITESPACE","\n            ",440],"}",["T_WHITESPACE","\n        ",441],"}",["T_WHITESPACE","\n        ",442],["T_RETURN","return",443],["T_WHITESPACE"," ",443],["T_VARIABLE","$this",443],";",["T_WHITESPACE","\n    ",443],"}",["T_WHITESPACE","\n\n    ",444],["T_DOC_COMMENT","\/**\n     * Returns suggested quantities for items.\n     * Can be used to automatically fix user entered quantities before updating cart\n     * so that cart contains valid qty values\n     *\n     * The $data is an array of ($quoteItemId => (item info array with 'qty' key), ...)\n     *\n     * @param   array $data\n     * @return  array\n     *\/",446],["T_WHITESPACE","\n    ",455],["T_PUBLIC","public",456],["T_WHITESPACE"," ",456],["T_FUNCTION","function",456],["T_WHITESPACE"," ",456],["T_STRING","suggestItemsQty",456],"(",["T_VARIABLE","$data",456],")",["T_WHITESPACE","\n    ",456],"{",["T_WHITESPACE","\n        ",457],["T_FOREACH","foreach",458],["T_WHITESPACE"," ",458],"(",["T_VARIABLE","$data",458],["T_WHITESPACE"," ",458],["T_AS","as",458],["T_WHITESPACE"," ",458],["T_VARIABLE","$itemId",458],["T_WHITESPACE"," ",458],["T_DOUBLE_ARROW","=>",458],["T_WHITESPACE"," ",458],["T_VARIABLE","$itemInfo",458],")",["T_WHITESPACE"," ",458],"{",["T_WHITESPACE","\n            ",458],["T_IF","if",459],["T_WHITESPACE"," ",459],"(","!",["T_ISSET","isset",459],"(",["T_VARIABLE","$itemInfo",459],"[",["T_CONSTANT_ENCAPSED_STRING","'qty'",459],"]",")",")",["T_WHITESPACE"," ",459],"{",["T_WHITESPACE","\n                ",459],["T_CONTINUE","continue",460],";",["T_WHITESPACE","\n            ",460],"}",["T_WHITESPACE","\n            ",461],["T_VARIABLE","$qty",462],["T_WHITESPACE"," ",462],"=",["T_WHITESPACE"," ",462],["T_DOUBLE_CAST","(float)",462],["T_VARIABLE","$itemInfo",462],"[",["T_CONSTANT_ENCAPSED_STRING","'qty'",462],"]",";",["T_WHITESPACE","\n            ",462],["T_IF","if",463],["T_WHITESPACE"," ",463],"(",["T_VARIABLE","$qty",463],["T_WHITESPACE"," ",463],["T_IS_SMALLER_OR_EQUAL","<=",463],["T_WHITESPACE"," ",463],["T_LNUMBER","0",463],")",["T_WHITESPACE"," ",463],"{",["T_WHITESPACE","\n                ",463],["T_CONTINUE","continue",464],";",["T_WHITESPACE","\n            ",464],"}",["T_WHITESPACE","\n\n            ",465],["T_VARIABLE","$quoteItem",467],["T_WHITESPACE"," ",467],"=",["T_WHITESPACE"," ",467],["T_VARIABLE","$this",467],["T_OBJECT_OPERATOR","->",467],["T_STRING","getQuote",467],"(",")",["T_OBJECT_OPERATOR","->",467],["T_STRING","getItemById",467],"(",["T_VARIABLE","$itemId",467],")",";",["T_WHITESPACE","\n            ",467],["T_IF","if",468],["T_WHITESPACE"," ",468],"(","!",["T_VARIABLE","$quoteItem",468],")",["T_WHITESPACE"," ",468],"{",["T_WHITESPACE","\n                ",468],["T_CONTINUE","continue",469],";",["T_WHITESPACE","\n            ",469],"}",["T_WHITESPACE","\n\n            ",470],["T_VARIABLE","$product",472],["T_WHITESPACE"," ",472],"=",["T_WHITESPACE"," ",472],["T_VARIABLE","$quoteItem",472],["T_OBJECT_OPERATOR","->",472],["T_STRING","getProduct",472],"(",")",";",["T_WHITESPACE","\n            ",472],["T_IF","if",473],["T_WHITESPACE"," ",473],"(","!",["T_VARIABLE","$product",473],")",["T_WHITESPACE"," ",473],"{",["T_WHITESPACE","\n                ",473],["T_CONTINUE","continue",474],";",["T_WHITESPACE","\n            ",474],"}",["T_WHITESPACE","\n\n            ",475],["T_VARIABLE","$data",477],"[",["T_VARIABLE","$itemId",477],"]","[",["T_CONSTANT_ENCAPSED_STRING","'before_suggest_qty'",477],"]",["T_WHITESPACE"," ",477],"=",["T_WHITESPACE"," ",477],["T_VARIABLE","$qty",477],";",["T_WHITESPACE","\n            ",477],["T_VARIABLE","$data",478],"[",["T_VARIABLE","$itemId",478],"]","[",["T_CONSTANT_ENCAPSED_STRING","'qty'",478],"]",["T_WHITESPACE"," ",478],"=",["T_WHITESPACE"," ",478],["T_VARIABLE","$this",478],["T_OBJECT_OPERATOR","->",478],["T_STRING","stockState",478],["T_OBJECT_OPERATOR","->",478],["T_STRING","suggestQty",478],"(",["T_WHITESPACE","\n                ",478],["T_VARIABLE","$product",479],["T_OBJECT_OPERATOR","->",479],["T_STRING","getId",479],"(",")",",",["T_WHITESPACE","\n                ",479],["T_VARIABLE","$qty",480],",",["T_WHITESPACE","\n                ",480],["T_VARIABLE","$product",481],["T_OBJECT_OPERATOR","->",481],["T_STRING","getStore",481],"(",")",["T_OBJECT_OPERATOR","->",481],["T_STRING","getWebsiteId",481],"(",")",["T_WHITESPACE","\n            ",481],")",";",["T_WHITESPACE","\n        ",482],"}",["T_WHITESPACE","\n        ",483],["T_RETURN","return",484],["T_WHITESPACE"," ",484],["T_VARIABLE","$data",484],";",["T_WHITESPACE","\n    ",484],"}",["T_WHITESPACE","\n\n    ",485],["T_DOC_COMMENT","\/**\n     * Update cart items information\n     *\n     * @param  array $data\n     * @return $this\n     * @throws \\Magento\\Framework\\Exception\\LocalizedException\n     * @SuppressWarnings(PHPMD.CyclomaticComplexity)\n     * @SuppressWarnings(PHPMD.NPathComplexity)\n     *\/",487],["T_WHITESPACE","\n    ",495],["T_PUBLIC","public",496],["T_WHITESPACE"," ",496],["T_FUNCTION","function",496],["T_WHITESPACE"," ",496],["T_STRING","updateItems",496],"(",["T_VARIABLE","$data",496],")",["T_WHITESPACE","\n    ",496],"{",["T_WHITESPACE","\n        ",497],["T_VARIABLE","$infoDataObject",498],["T_WHITESPACE"," ",498],"=",["T_WHITESPACE"," ",498],["T_NEW","new",498],["T_WHITESPACE"," ",498],["T_NS_SEPARATOR","\\",498],["T_STRING","Magento",498],["T_NS_SEPARATOR","\\",498],["T_STRING","Framework",498],["T_NS_SEPARATOR","\\",498],["T_STRING","DataObject",498],"(",["T_VARIABLE","$data",498],")",";",["T_WHITESPACE","\n        ",498],["T_VARIABLE","$this",499],["T_OBJECT_OPERATOR","->",499],["T_STRING","_eventManager",499],["T_OBJECT_OPERATOR","->",499],["T_STRING","dispatch",499],"(",["T_WHITESPACE","\n            ",499],["T_CONSTANT_ENCAPSED_STRING","'checkout_cart_update_items_before'",500],",",["T_WHITESPACE","\n            ",500],"[",["T_CONSTANT_ENCAPSED_STRING","'cart'",501],["T_WHITESPACE"," ",501],["T_DOUBLE_ARROW","=>",501],["T_WHITESPACE"," ",501],["T_VARIABLE","$this",501],",",["T_WHITESPACE"," ",501],["T_CONSTANT_ENCAPSED_STRING","'info'",501],["T_WHITESPACE"," ",501],["T_DOUBLE_ARROW","=>",501],["T_WHITESPACE"," ",501],["T_VARIABLE","$infoDataObject",501],"]",["T_WHITESPACE","\n        ",501],")",";",["T_WHITESPACE","\n\n        ",502],["T_VARIABLE","$qtyRecalculatedFlag",504],["T_WHITESPACE"," ",504],"=",["T_WHITESPACE"," ",504],["T_STRING","false",504],";",["T_WHITESPACE","\n        ",504],["T_FOREACH","foreach",505],["T_WHITESPACE"," ",505],"(",["T_VARIABLE","$data",505],["T_WHITESPACE"," ",505],["T_AS","as",505],["T_WHITESPACE"," ",505],["T_VARIABLE","$itemId",505],["T_WHITESPACE"," ",505],["T_DOUBLE_ARROW","=>",505],["T_WHITESPACE"," ",505],["T_VARIABLE","$itemInfo",505],")",["T_WHITESPACE"," ",505],"{",["T_WHITESPACE","\n            ",505],["T_VARIABLE","$item",506],["T_WHITESPACE"," ",506],"=",["T_WHITESPACE"," ",506],["T_VARIABLE","$this",506],["T_OBJECT_OPERATOR","->",506],["T_STRING","getQuote",506],"(",")",["T_OBJECT_OPERATOR","->",506],["T_STRING","getItemById",506],"(",["T_VARIABLE","$itemId",506],")",";",["T_WHITESPACE","\n            ",506],["T_IF","if",507],["T_WHITESPACE"," ",507],"(","!",["T_VARIABLE","$item",507],")",["T_WHITESPACE"," ",507],"{",["T_WHITESPACE","\n                ",507],["T_CONTINUE","continue",508],";",["T_WHITESPACE","\n            ",508],"}",["T_WHITESPACE","\n\n            ",509],["T_IF","if",511],["T_WHITESPACE"," ",511],"(","!",["T_EMPTY","empty",511],"(",["T_VARIABLE","$itemInfo",511],"[",["T_CONSTANT_ENCAPSED_STRING","'remove'",511],"]",")",["T_WHITESPACE"," ",511],["T_BOOLEAN_OR","||",511],["T_WHITESPACE"," ",511],["T_ISSET","isset",511],"(",["T_VARIABLE","$itemInfo",511],"[",["T_CONSTANT_ENCAPSED_STRING","'qty'",511],"]",")",["T_WHITESPACE"," ",511],["T_BOOLEAN_AND","&&",511],["T_WHITESPACE"," ",511],["T_VARIABLE","$itemInfo",511],"[",["T_CONSTANT_ENCAPSED_STRING","'qty'",511],"]",["T_WHITESPACE"," ",511],["T_IS_EQUAL","==",511],["T_WHITESPACE"," ",511],["T_CONSTANT_ENCAPSED_STRING","'0'",511],")",["T_WHITESPACE"," ",511],"{",["T_WHITESPACE","\n                ",511],["T_VARIABLE","$this",512],["T_OBJECT_OPERATOR","->",512],["T_STRING","removeItem",512],"(",["T_VARIABLE","$itemId",512],")",";",["T_WHITESPACE","\n                ",512],["T_CONTINUE","continue",513],";",["T_WHITESPACE","\n            ",513],"}",["T_WHITESPACE","\n\n            ",514],["T_VARIABLE","$qty",516],["T_WHITESPACE"," ",516],"=",["T_WHITESPACE"," ",516],["T_ISSET","isset",516],"(",["T_VARIABLE","$itemInfo",516],"[",["T_CONSTANT_ENCAPSED_STRING","'qty'",516],"]",")",["T_WHITESPACE"," ",516],"?",["T_WHITESPACE"," ",516],["T_DOUBLE_CAST","(double)",516],["T_VARIABLE","$itemInfo",516],"[",["T_CONSTANT_ENCAPSED_STRING","'qty'",516],"]",["T_WHITESPACE"," ",516],":",["T_WHITESPACE"," ",516],["T_STRING","false",516],";",["T_WHITESPACE","\n            ",516],["T_IF","if",517],["T_WHITESPACE"," ",517],"(",["T_VARIABLE","$qty",517],["T_WHITESPACE"," ",517],">",["T_WHITESPACE"," ",517],["T_LNUMBER","0",517],")",["T_WHITESPACE"," ",517],"{",["T_WHITESPACE","\n                ",517],["T_VARIABLE","$item",518],["T_OBJECT_OPERATOR","->",518],["T_STRING","setQty",518],"(",["T_VARIABLE","$qty",518],")",";",["T_WHITESPACE","\n\n                ",518],["T_IF","if",520],["T_WHITESPACE"," ",520],"(",["T_VARIABLE","$item",520],["T_OBJECT_OPERATOR","->",520],["T_STRING","getHasError",520],"(",")",")",["T_WHITESPACE"," ",520],"{",["T_WHITESPACE","\n                    ",520],["T_THROW","throw",521],["T_WHITESPACE"," ",521],["T_NEW","new",521],["T_WHITESPACE"," ",521],["T_NS_SEPARATOR","\\",521],["T_STRING","Magento",521],["T_NS_SEPARATOR","\\",521],["T_STRING","Framework",521],["T_NS_SEPARATOR","\\",521],["T_STRING","Exception",521],["T_NS_SEPARATOR","\\",521],["T_STRING","LocalizedException",521],"(",["T_STRING","__",521],"(",["T_VARIABLE","$item",521],["T_OBJECT_OPERATOR","->",521],["T_STRING","getMessage",521],"(",")",")",")",";",["T_WHITESPACE","\n                ",521],"}",["T_WHITESPACE","\n\n                ",522],["T_IF","if",524],["T_WHITESPACE"," ",524],"(",["T_ISSET","isset",524],"(",["T_VARIABLE","$itemInfo",524],"[",["T_CONSTANT_ENCAPSED_STRING","'before_suggest_qty'",524],"]",")",["T_WHITESPACE"," ",524],["T_BOOLEAN_AND","&&",524],["T_WHITESPACE"," ",524],["T_VARIABLE","$itemInfo",524],"[",["T_CONSTANT_ENCAPSED_STRING","'before_suggest_qty'",524],"]",["T_WHITESPACE"," ",524],["T_IS_NOT_EQUAL","!=",524],["T_WHITESPACE"," ",524],["T_VARIABLE","$qty",524],")",["T_WHITESPACE"," ",524],"{",["T_WHITESPACE","\n                    ",524],["T_VARIABLE","$qtyRecalculatedFlag",525],["T_WHITESPACE"," ",525],"=",["T_WHITESPACE"," ",525],["T_STRING","true",525],";",["T_WHITESPACE","\n                    ",525],["T_VARIABLE","$this",526],["T_OBJECT_OPERATOR","->",526],["T_STRING","messageManager",526],["T_OBJECT_OPERATOR","->",526],["T_STRING","addNotice",526],"(",["T_WHITESPACE","\n                        ",526],["T_STRING","__",527],"(",["T_CONSTANT_ENCAPSED_STRING","'Quantity was recalculated from %1 to %2'",527],",",["T_WHITESPACE"," ",527],["T_VARIABLE","$itemInfo",527],"[",["T_CONSTANT_ENCAPSED_STRING","'before_suggest_qty'",527],"]",",",["T_WHITESPACE"," ",527],["T_VARIABLE","$qty",527],")",",",["T_WHITESPACE","\n                        ",527],["T_CONSTANT_ENCAPSED_STRING","'quote_item'",528],["T_WHITESPACE"," ",528],".",["T_WHITESPACE"," ",528],["T_VARIABLE","$item",528],["T_OBJECT_OPERATOR","->",528],["T_STRING","getId",528],"(",")",["T_WHITESPACE","\n                    ",528],")",";",["T_WHITESPACE","\n                ",529],"}",["T_WHITESPACE","\n            ",530],"}",["T_WHITESPACE","\n        ",531],"}",["T_WHITESPACE","\n\n        ",532],["T_IF","if",534],["T_WHITESPACE"," ",534],"(",["T_VARIABLE","$qtyRecalculatedFlag",534],")",["T_WHITESPACE"," ",534],"{",["T_WHITESPACE","\n            ",534],["T_VARIABLE","$this",535],["T_OBJECT_OPERATOR","->",535],["T_STRING","messageManager",535],["T_OBJECT_OPERATOR","->",535],["T_STRING","addNotice",535],"(",["T_WHITESPACE","\n                ",535],["T_STRING","__",536],"(",["T_CONSTANT_ENCAPSED_STRING","'We adjusted product quantities to fit the required increments.'",536],")",["T_WHITESPACE","\n            ",536],")",";",["T_WHITESPACE","\n        ",537],"}",["T_WHITESPACE","\n\n        ",538],["T_VARIABLE","$this",540],["T_OBJECT_OPERATOR","->",540],["T_STRING","_eventManager",540],["T_OBJECT_OPERATOR","->",540],["T_STRING","dispatch",540],"(",["T_WHITESPACE","\n            ",540],["T_CONSTANT_ENCAPSED_STRING","'checkout_cart_update_items_after'",541],",",["T_WHITESPACE","\n            ",541],"[",["T_CONSTANT_ENCAPSED_STRING","'cart'",542],["T_WHITESPACE"," ",542],["T_DOUBLE_ARROW","=>",542],["T_WHITESPACE"," ",542],["T_VARIABLE","$this",542],",",["T_WHITESPACE"," ",542],["T_CONSTANT_ENCAPSED_STRING","'info'",542],["T_WHITESPACE"," ",542],["T_DOUBLE_ARROW","=>",542],["T_WHITESPACE"," ",542],["T_VARIABLE","$infoDataObject",542],"]",["T_WHITESPACE","\n        ",542],")",";",["T_WHITESPACE","\n\n        ",543],["T_RETURN","return",545],["T_WHITESPACE"," ",545],["T_VARIABLE","$this",545],";",["T_WHITESPACE","\n    ",545],"}",["T_WHITESPACE","\n\n    ",546],["T_DOC_COMMENT","\/**\n     * Remove item from cart\n     *\n     * @param  int $itemId\n     * @return $this\n     * @codeCoverageIgnore\n     *\/",548],["T_WHITESPACE","\n    ",554],["T_PUBLIC","public",555],["T_WHITESPACE"," ",555],["T_FUNCTION","function",555],["T_WHITESPACE"," ",555],["T_STRING","removeItem",555],"(",["T_VARIABLE","$itemId",555],")",["T_WHITESPACE","\n    ",555],"{",["T_WHITESPACE","\n        ",556],["T_VARIABLE","$this",557],["T_OBJECT_OPERATOR","->",557],["T_STRING","getQuote",557],"(",")",["T_OBJECT_OPERATOR","->",557],["T_STRING","removeItem",557],"(",["T_VARIABLE","$itemId",557],")",";",["T_WHITESPACE","\n        ",557],["T_RETURN","return",558],["T_WHITESPACE"," ",558],["T_VARIABLE","$this",558],";",["T_WHITESPACE","\n    ",558],"}",["T_WHITESPACE","\n\n    ",559],["T_DOC_COMMENT","\/**\n     * Save cart\n     *\n     * @return $this\n     *\/",561],["T_WHITESPACE","\n    ",565],["T_PUBLIC","public",566],["T_WHITESPACE"," ",566],["T_FUNCTION","function",566],["T_WHITESPACE"," ",566],["T_STRING","save",566],"(",")",["T_WHITESPACE","\n    ",566],"{",["T_WHITESPACE","\n        ",567],["T_VARIABLE","$this",568],["T_OBJECT_OPERATOR","->",568],["T_STRING","_eventManager",568],["T_OBJECT_OPERATOR","->",568],["T_STRING","dispatch",568],"(",["T_CONSTANT_ENCAPSED_STRING","'checkout_cart_save_before'",568],",",["T_WHITESPACE"," ",568],"[",["T_CONSTANT_ENCAPSED_STRING","'cart'",568],["T_WHITESPACE"," ",568],["T_DOUBLE_ARROW","=>",568],["T_WHITESPACE"," ",568],["T_VARIABLE","$this",568],"]",")",";",["T_WHITESPACE","\n\n        ",568],["T_VARIABLE","$this",570],["T_OBJECT_OPERATOR","->",570],["T_STRING","getQuote",570],"(",")",["T_OBJECT_OPERATOR","->",570],["T_STRING","getBillingAddress",570],"(",")",";",["T_WHITESPACE","\n        ",570],["T_VARIABLE","$this",571],["T_OBJECT_OPERATOR","->",571],["T_STRING","getQuote",571],"(",")",["T_OBJECT_OPERATOR","->",571],["T_STRING","getShippingAddress",571],"(",")",["T_OBJECT_OPERATOR","->",571],["T_STRING","setCollectShippingRates",571],"(",["T_STRING","true",571],")",";",["T_WHITESPACE","\n        ",571],["T_VARIABLE","$this",572],["T_OBJECT_OPERATOR","->",572],["T_STRING","getQuote",572],"(",")",["T_OBJECT_OPERATOR","->",572],["T_STRING","collectTotals",572],"(",")",";",["T_WHITESPACE","\n        ",572],["T_VARIABLE","$this",573],["T_OBJECT_OPERATOR","->",573],["T_STRING","quoteRepository",573],["T_OBJECT_OPERATOR","->",573],["T_STRING","save",573],"(",["T_VARIABLE","$this",573],["T_OBJECT_OPERATOR","->",573],["T_STRING","getQuote",573],"(",")",")",";",["T_WHITESPACE","\n        ",573],["T_VARIABLE","$this",574],["T_OBJECT_OPERATOR","->",574],["T_STRING","_checkoutSession",574],["T_OBJECT_OPERATOR","->",574],["T_STRING","setQuoteId",574],"(",["T_VARIABLE","$this",574],["T_OBJECT_OPERATOR","->",574],["T_STRING","getQuote",574],"(",")",["T_OBJECT_OPERATOR","->",574],["T_STRING","getId",574],"(",")",")",";",["T_WHITESPACE","\n        ",574],["T_DOC_COMMENT","\/**\n         * Cart save usually called after changes with cart items.\n         *\/",575],["T_WHITESPACE","\n        ",577],["T_VARIABLE","$this",578],["T_OBJECT_OPERATOR","->",578],["T_STRING","_eventManager",578],["T_OBJECT_OPERATOR","->",578],["T_STRING","dispatch",578],"(",["T_CONSTANT_ENCAPSED_STRING","'checkout_cart_save_after'",578],",",["T_WHITESPACE"," ",578],"[",["T_CONSTANT_ENCAPSED_STRING","'cart'",578],["T_WHITESPACE"," ",578],["T_DOUBLE_ARROW","=>",578],["T_WHITESPACE"," ",578],["T_VARIABLE","$this",578],"]",")",";",["T_WHITESPACE","\n        ",578],["T_VARIABLE","$this",579],["T_OBJECT_OPERATOR","->",579],["T_STRING","reinitializeState",579],"(",")",";",["T_WHITESPACE","\n        ",579],["T_RETURN","return",580],["T_WHITESPACE"," ",580],["T_VARIABLE","$this",580],";",["T_WHITESPACE","\n    ",580],"}",["T_WHITESPACE","\n\n    ",581],["T_DOC_COMMENT","\/**\n     * Save cart (implement interface method)\n     *\n     * @return void\n     * @codeCoverageIgnore\n     *\/",583],["T_WHITESPACE","\n    ",588],["T_PUBLIC","public",589],["T_WHITESPACE"," ",589],["T_FUNCTION","function",589],["T_WHITESPACE"," ",589],["T_STRING","saveQuote",589],"(",")",["T_WHITESPACE","\n    ",589],"{",["T_WHITESPACE","\n        ",590],["T_VARIABLE","$this",591],["T_OBJECT_OPERATOR","->",591],["T_STRING","save",591],"(",")",";",["T_WHITESPACE","\n    ",591],"}",["T_WHITESPACE","\n\n    ",592],["T_DOC_COMMENT","\/**\n     * Mark all quote items as deleted (empty shopping cart)\n     *\n     * @return $this\n     * @codeCoverageIgnore\n     *\/",594],["T_WHITESPACE","\n    ",599],["T_PUBLIC","public",600],["T_WHITESPACE"," ",600],["T_FUNCTION","function",600],["T_WHITESPACE"," ",600],["T_STRING","truncate",600],"(",")",["T_WHITESPACE","\n    ",600],"{",["T_WHITESPACE","\n        ",601],["T_VARIABLE","$this",602],["T_OBJECT_OPERATOR","->",602],["T_STRING","getQuote",602],"(",")",["T_OBJECT_OPERATOR","->",602],["T_STRING","removeAllItems",602],"(",")",";",["T_WHITESPACE","\n        ",602],["T_RETURN","return",603],["T_WHITESPACE"," ",603],["T_VARIABLE","$this",603],";",["T_WHITESPACE","\n    ",603],"}",["T_WHITESPACE","\n\n    ",604],["T_DOC_COMMENT","\/**\n     * @return int[]\n     *\/",606],["T_WHITESPACE","\n    ",608],["T_PUBLIC","public",609],["T_WHITESPACE"," ",609],["T_FUNCTION","function",609],["T_WHITESPACE"," ",609],["T_STRING","getProductIds",609],"(",")",["T_WHITESPACE","\n    ",609],"{",["T_WHITESPACE","\n        ",610],["T_IF","if",611],["T_WHITESPACE"," ",611],"(",["T_STRING","null",611],["T_WHITESPACE"," ",611],["T_IS_IDENTICAL","===",611],["T_WHITESPACE"," ",611],["T_VARIABLE","$this",611],["T_OBJECT_OPERATOR","->",611],["T_STRING","_productIds",611],")",["T_WHITESPACE"," ",611],"{",["T_WHITESPACE","\n            ",611],["T_VARIABLE","$this",612],["T_OBJECT_OPERATOR","->",612],["T_STRING","_productIds",612],["T_WHITESPACE"," ",612],"=",["T_WHITESPACE"," ",612],"[","]",";",["T_WHITESPACE","\n            ",612],["T_IF","if",613],["T_WHITESPACE"," ",613],"(",["T_VARIABLE","$this",613],["T_OBJECT_OPERATOR","->",613],["T_STRING","getSummaryQty",613],"(",")",["T_WHITESPACE"," ",613],">",["T_WHITESPACE"," ",613],["T_LNUMBER","0",613],")",["T_WHITESPACE"," ",613],"{",["T_WHITESPACE","\n                ",613],["T_FOREACH","foreach",614],["T_WHITESPACE"," ",614],"(",["T_VARIABLE","$this",614],["T_OBJECT_OPERATOR","->",614],["T_STRING","getQuote",614],"(",")",["T_OBJECT_OPERATOR","->",614],["T_STRING","getAllItems",614],"(",")",["T_WHITESPACE"," ",614],["T_AS","as",614],["T_WHITESPACE"," ",614],["T_VARIABLE","$item",614],")",["T_WHITESPACE"," ",614],"{",["T_WHITESPACE","\n                    ",614],["T_VARIABLE","$this",615],["T_OBJECT_OPERATOR","->",615],["T_STRING","_productIds",615],"[","]",["T_WHITESPACE"," ",615],"=",["T_WHITESPACE"," ",615],["T_VARIABLE","$item",615],["T_OBJECT_OPERATOR","->",615],["T_STRING","getProductId",615],"(",")",";",["T_WHITESPACE","\n                ",615],"}",["T_WHITESPACE","\n            ",616],"}",["T_WHITESPACE","\n            ",617],["T_VARIABLE","$this",618],["T_OBJECT_OPERATOR","->",618],["T_STRING","_productIds",618],["T_WHITESPACE"," ",618],"=",["T_WHITESPACE"," ",618],["T_STRING","array_unique",618],"(",["T_VARIABLE","$this",618],["T_OBJECT_OPERATOR","->",618],["T_STRING","_productIds",618],")",";",["T_WHITESPACE","\n        ",618],"}",["T_WHITESPACE","\n        ",619],["T_RETURN","return",620],["T_WHITESPACE"," ",620],["T_VARIABLE","$this",620],["T_OBJECT_OPERATOR","->",620],["T_STRING","_productIds",620],";",["T_WHITESPACE","\n    ",620],"}",["T_WHITESPACE","\n\n    ",621],["T_DOC_COMMENT","\/**\n     * Get shopping cart items summary (includes config settings)\n     *\n     * @return int|float\n     *\/",623],["T_WHITESPACE","\n    ",627],["T_PUBLIC","public",628],["T_WHITESPACE"," ",628],["T_FUNCTION","function",628],["T_WHITESPACE"," ",628],["T_STRING","getSummaryQty",628],"(",")",["T_WHITESPACE","\n    ",628],"{",["T_WHITESPACE","\n        ",629],["T_VARIABLE","$quoteId",630],["T_WHITESPACE"," ",630],"=",["T_WHITESPACE"," ",630],["T_VARIABLE","$this",630],["T_OBJECT_OPERATOR","->",630],["T_STRING","_checkoutSession",630],["T_OBJECT_OPERATOR","->",630],["T_STRING","getQuoteId",630],"(",")",";",["T_WHITESPACE","\n\n        ",630],["T_COMMENT","\/\/If there is no quote id in session trying to load quote\n",632],["T_WHITESPACE","        ",633],["T_COMMENT","\/\/and get new quote id. This is done for cases when quote was created\n",633],["T_WHITESPACE","        ",634],["T_COMMENT","\/\/not by customer (from backend for example).\n",634],["T_WHITESPACE","        ",635],["T_IF","if",635],["T_WHITESPACE"," ",635],"(","!",["T_VARIABLE","$quoteId",635],["T_WHITESPACE"," ",635],["T_BOOLEAN_AND","&&",635],["T_WHITESPACE"," ",635],["T_VARIABLE","$this",635],["T_OBJECT_OPERATOR","->",635],["T_STRING","_customerSession",635],["T_OBJECT_OPERATOR","->",635],["T_STRING","isLoggedIn",635],"(",")",")",["T_WHITESPACE"," ",635],"{",["T_WHITESPACE","\n            ",635],["T_VARIABLE","$this",636],["T_OBJECT_OPERATOR","->",636],["T_STRING","_checkoutSession",636],["T_OBJECT_OPERATOR","->",636],["T_STRING","getQuote",636],"(",")",";",["T_WHITESPACE","\n            ",636],["T_VARIABLE","$quoteId",637],["T_WHITESPACE"," ",637],"=",["T_WHITESPACE"," ",637],["T_VARIABLE","$this",637],["T_OBJECT_OPERATOR","->",637],["T_STRING","_checkoutSession",637],["T_OBJECT_OPERATOR","->",637],["T_STRING","getQuoteId",637],"(",")",";",["T_WHITESPACE","\n        ",637],"}",["T_WHITESPACE","\n\n        ",638],["T_IF","if",640],["T_WHITESPACE"," ",640],"(",["T_VARIABLE","$quoteId",640],["T_WHITESPACE"," ",640],["T_BOOLEAN_AND","&&",640],["T_WHITESPACE"," ",640],["T_VARIABLE","$this",640],["T_OBJECT_OPERATOR","->",640],["T_STRING","_summaryQty",640],["T_WHITESPACE"," ",640],["T_IS_IDENTICAL","===",640],["T_WHITESPACE"," ",640],["T_STRING","null",640],")",["T_WHITESPACE"," ",640],"{",["T_WHITESPACE","\n            ",640],["T_VARIABLE","$useQty",641],["T_WHITESPACE"," ",641],"=",["T_WHITESPACE"," ",641],["T_VARIABLE","$this",641],["T_OBJECT_OPERATOR","->",641],["T_STRING","_scopeConfig",641],["T_OBJECT_OPERATOR","->",641],["T_STRING","getValue",641],"(",["T_WHITESPACE","\n                ",641],["T_CONSTANT_ENCAPSED_STRING","'checkout\/cart_link\/use_qty'",642],",",["T_WHITESPACE","\n                ",642],["T_NS_SEPARATOR","\\",643],["T_STRING","Magento",643],["T_NS_SEPARATOR","\\",643],["T_STRING","Store",643],["T_NS_SEPARATOR","\\",643],["T_STRING","Model",643],["T_NS_SEPARATOR","\\",643],["T_STRING","ScopeInterface",643],["T_DOUBLE_COLON","::",643],["T_STRING","SCOPE_STORE",643],["T_WHITESPACE","\n            ",643],")",";",["T_WHITESPACE","\n            ",644],["T_VARIABLE","$this",645],["T_OBJECT_OPERATOR","->",645],["T_STRING","_summaryQty",645],["T_WHITESPACE"," ",645],"=",["T_WHITESPACE"," ",645],["T_VARIABLE","$useQty",645],["T_WHITESPACE"," ",645],"?",["T_WHITESPACE"," ",645],["T_VARIABLE","$this",645],["T_OBJECT_OPERATOR","->",645],["T_STRING","getItemsQty",645],"(",")",["T_WHITESPACE"," ",645],":",["T_WHITESPACE"," ",645],["T_VARIABLE","$this",645],["T_OBJECT_OPERATOR","->",645],["T_STRING","getItemsCount",645],"(",")",";",["T_WHITESPACE","\n        ",645],"}",["T_WHITESPACE","\n        ",646],["T_RETURN","return",647],["T_WHITESPACE"," ",647],["T_VARIABLE","$this",647],["T_OBJECT_OPERATOR","->",647],["T_STRING","_summaryQty",647],";",["T_WHITESPACE","\n    ",647],"}",["T_WHITESPACE","\n\n    ",648],["T_DOC_COMMENT","\/**\n     * Get shopping cart items count\n     *\n     * @return int\n     * @codeCoverageIgnore\n     *\/",650],["T_WHITESPACE","\n    ",655],["T_PUBLIC","public",656],["T_WHITESPACE"," ",656],["T_FUNCTION","function",656],["T_WHITESPACE"," ",656],["T_STRING","getItemsCount",656],"(",")",["T_WHITESPACE","\n    ",656],"{",["T_WHITESPACE","\n        ",657],["T_RETURN","return",658],["T_WHITESPACE"," ",658],["T_VARIABLE","$this",658],["T_OBJECT_OPERATOR","->",658],["T_STRING","getQuote",658],"(",")",["T_OBJECT_OPERATOR","->",658],["T_STRING","getItemsCount",658],"(",")",["T_WHITESPACE"," ",658],"*",["T_WHITESPACE"," ",658],["T_LNUMBER","1",658],";",["T_WHITESPACE","\n    ",658],"}",["T_WHITESPACE","\n\n    ",659],["T_DOC_COMMENT","\/**\n     * Get shopping cart summary qty\n     *\n     * @return int|float\n     * @codeCoverageIgnore\n     *\/",661],["T_WHITESPACE","\n    ",666],["T_PUBLIC","public",667],["T_WHITESPACE"," ",667],["T_FUNCTION","function",667],["T_WHITESPACE"," ",667],["T_STRING","getItemsQty",667],"(",")",["T_WHITESPACE","\n    ",667],"{",["T_WHITESPACE","\n        ",668],["T_RETURN","return",669],["T_WHITESPACE"," ",669],["T_VARIABLE","$this",669],["T_OBJECT_OPERATOR","->",669],["T_STRING","getQuote",669],"(",")",["T_OBJECT_OPERATOR","->",669],["T_STRING","getItemsQty",669],"(",")",["T_WHITESPACE"," ",669],"*",["T_WHITESPACE"," ",669],["T_LNUMBER","1",669],";",["T_WHITESPACE","\n    ",669],"}",["T_WHITESPACE","\n\n    ",670],["T_DOC_COMMENT","\/**\n     * Update item in shopping cart (quote)\n     * $requestInfo - either qty (int) or buyRequest in form of array or \\Magento\\Framework\\DataObject\n     * $updatingParams - information on how to perform update, passed to Quote->updateItem() method\n     *\n     * @param int $itemId\n     * @param int|array|\\Magento\\Framework\\DataObject $requestInfo\n     * @param null|array|\\Magento\\Framework\\DataObject $updatingParams\n     * @return \\Magento\\Quote\\Model\\Quote\\Item|string\n     * @throws \\Magento\\Framework\\Exception\\LocalizedException\n     *\n     * @see \\Magento\\Quote\\Model\\Quote::updateItem()\n     * @SuppressWarnings(PHPMD.CyclomaticComplexity)\n     *\/",672],["T_WHITESPACE","\n    ",685],["T_PUBLIC","public",686],["T_WHITESPACE"," ",686],["T_FUNCTION","function",686],["T_WHITESPACE"," ",686],["T_STRING","updateItem",686],"(",["T_VARIABLE","$itemId",686],",",["T_WHITESPACE"," ",686],["T_VARIABLE","$requestInfo",686],["T_WHITESPACE"," ",686],"=",["T_WHITESPACE"," ",686],["T_STRING","null",686],",",["T_WHITESPACE"," ",686],["T_VARIABLE","$updatingParams",686],["T_WHITESPACE"," ",686],"=",["T_WHITESPACE"," ",686],["T_STRING","null",686],")",["T_WHITESPACE","\n    ",686],"{",["T_WHITESPACE","\n        ",687],["T_TRY","try",688],["T_WHITESPACE"," ",688],"{",["T_WHITESPACE","\n            ",688],["T_VARIABLE","$item",689],["T_WHITESPACE"," ",689],"=",["T_WHITESPACE"," ",689],["T_VARIABLE","$this",689],["T_OBJECT_OPERATOR","->",689],["T_STRING","getQuote",689],"(",")",["T_OBJECT_OPERATOR","->",689],["T_STRING","getItemById",689],"(",["T_VARIABLE","$itemId",689],")",";",["T_WHITESPACE","\n            ",689],["T_IF","if",690],["T_WHITESPACE"," ",690],"(","!",["T_VARIABLE","$item",690],")",["T_WHITESPACE"," ",690],"{",["T_WHITESPACE","\n                ",690],["T_THROW","throw",691],["T_WHITESPACE"," ",691],["T_NEW","new",691],["T_WHITESPACE"," ",691],["T_NS_SEPARATOR","\\",691],["T_STRING","Magento",691],["T_NS_SEPARATOR","\\",691],["T_STRING","Framework",691],["T_NS_SEPARATOR","\\",691],["T_STRING","Exception",691],["T_NS_SEPARATOR","\\",691],["T_STRING","LocalizedException",691],"(",["T_STRING","__",691],"(",["T_CONSTANT_ENCAPSED_STRING","'This quote item does not exist.'",691],")",")",";",["T_WHITESPACE","\n            ",691],"}",["T_WHITESPACE","\n            ",692],["T_VARIABLE","$productId",693],["T_WHITESPACE"," ",693],"=",["T_WHITESPACE"," ",693],["T_VARIABLE","$item",693],["T_OBJECT_OPERATOR","->",693],["T_STRING","getProduct",693],"(",")",["T_OBJECT_OPERATOR","->",693],["T_STRING","getId",693],"(",")",";",["T_WHITESPACE","\n            ",693],["T_VARIABLE","$product",694],["T_WHITESPACE"," ",694],"=",["T_WHITESPACE"," ",694],["T_VARIABLE","$this",694],["T_OBJECT_OPERATOR","->",694],["T_STRING","_getProduct",694],"(",["T_VARIABLE","$productId",694],")",";",["T_WHITESPACE","\n            ",694],["T_VARIABLE","$request",695],["T_WHITESPACE"," ",695],"=",["T_WHITESPACE"," ",695],["T_VARIABLE","$this",695],["T_OBJECT_OPERATOR","->",695],["T_STRING","_getProductRequest",695],"(",["T_VARIABLE","$requestInfo",695],")",";",["T_WHITESPACE","\n\n            ",695],["T_IF","if",697],["T_WHITESPACE"," ",697],"(",["T_VARIABLE","$productId",697],")",["T_WHITESPACE"," ",697],"{",["T_WHITESPACE","\n                ",697],["T_VARIABLE","$stockItem",698],["T_WHITESPACE"," ",698],"=",["T_WHITESPACE"," ",698],["T_VARIABLE","$this",698],["T_OBJECT_OPERATOR","->",698],["T_STRING","stockRegistry",698],["T_OBJECT_OPERATOR","->",698],["T_STRING","getStockItem",698],"(",["T_VARIABLE","$productId",698],",",["T_WHITESPACE"," ",698],["T_VARIABLE","$product",698],["T_OBJECT_OPERATOR","->",698],["T_STRING","getStore",698],"(",")",["T_OBJECT_OPERATOR","->",698],["T_STRING","getWebsiteId",698],"(",")",")",";",["T_WHITESPACE","\n                ",698],["T_VARIABLE","$minimumQty",699],["T_WHITESPACE"," ",699],"=",["T_WHITESPACE"," ",699],["T_VARIABLE","$stockItem",699],["T_OBJECT_OPERATOR","->",699],["T_STRING","getMinSaleQty",699],"(",")",";",["T_WHITESPACE","\n                ",699],["T_COMMENT","\/\/ If product was not found in cart and there is set minimal qty for it\n",700],["T_WHITESPACE","                ",701],["T_IF","if",701],["T_WHITESPACE"," ",701],"(",["T_VARIABLE","$minimumQty",701],["T_WHITESPACE","\n                    ",701],["T_BOOLEAN_AND","&&",702],["T_WHITESPACE"," ",702],["T_VARIABLE","$minimumQty",702],["T_WHITESPACE"," ",702],">",["T_WHITESPACE"," ",702],["T_LNUMBER","0",702],["T_WHITESPACE","\n                    ",702],["T_BOOLEAN_AND","&&",703],["T_WHITESPACE"," ",703],"!",["T_VARIABLE","$request",703],["T_OBJECT_OPERATOR","->",703],["T_STRING","getQty",703],"(",")",["T_WHITESPACE","\n                    ",703],["T_BOOLEAN_AND","&&",704],["T_WHITESPACE"," ",704],"!",["T_VARIABLE","$this",704],["T_OBJECT_OPERATOR","->",704],["T_STRING","getQuote",704],"(",")",["T_OBJECT_OPERATOR","->",704],["T_STRING","hasProductId",704],"(",["T_VARIABLE","$productId",704],")",["T_WHITESPACE","\n                ",704],")",["T_WHITESPACE"," ",705],"{",["T_WHITESPACE","\n                    ",705],["T_VARIABLE","$request",706],["T_OBJECT_OPERATOR","->",706],["T_STRING","setQty",706],"(",["T_VARIABLE","$minimumQty",706],")",";",["T_WHITESPACE","\n                ",706],"}",["T_WHITESPACE","\n            ",707],"}",["T_WHITESPACE","\n\n            ",708],["T_VARIABLE","$result",710],["T_WHITESPACE"," ",710],"=",["T_WHITESPACE"," ",710],["T_VARIABLE","$this",710],["T_OBJECT_OPERATOR","->",710],["T_STRING","getQuote",710],"(",")",["T_OBJECT_OPERATOR","->",710],["T_STRING","updateItem",710],"(",["T_VARIABLE","$itemId",710],",",["T_WHITESPACE"," ",710],["T_VARIABLE","$request",710],",",["T_WHITESPACE"," ",710],["T_VARIABLE","$updatingParams",710],")",";",["T_WHITESPACE","\n        ",710],"}",["T_WHITESPACE"," ",711],["T_CATCH","catch",711],["T_WHITESPACE"," ",711],"(",["T_NS_SEPARATOR","\\",711],["T_STRING","Magento",711],["T_NS_SEPARATOR","\\",711],["T_STRING","Framework",711],["T_NS_SEPARATOR","\\",711],["T_STRING","Exception",711],["T_NS_SEPARATOR","\\",711],["T_STRING","LocalizedException",711],["T_WHITESPACE"," ",711],["T_VARIABLE","$e",711],")",["T_WHITESPACE"," ",711],"{",["T_WHITESPACE","\n            ",711],["T_VARIABLE","$this",712],["T_OBJECT_OPERATOR","->",712],["T_STRING","_checkoutSession",712],["T_OBJECT_OPERATOR","->",712],["T_STRING","setUseNotice",712],"(",["T_STRING","false",712],")",";",["T_WHITESPACE","\n            ",712],["T_VARIABLE","$result",713],["T_WHITESPACE"," ",713],"=",["T_WHITESPACE"," ",713],["T_VARIABLE","$e",713],["T_OBJECT_OPERATOR","->",713],["T_STRING","getMessage",713],"(",")",";",["T_WHITESPACE","\n        ",713],"}",["T_WHITESPACE","\n\n        ",714],["T_DOC_COMMENT","\/**\n         * We can get string if updating process had some errors\n         *\/",716],["T_WHITESPACE","\n        ",718],["T_IF","if",719],["T_WHITESPACE"," ",719],"(",["T_STRING","is_string",719],"(",["T_VARIABLE","$result",719],")",")",["T_WHITESPACE"," ",719],"{",["T_WHITESPACE","\n            ",719],["T_IF","if",720],["T_WHITESPACE"," ",720],"(",["T_VARIABLE","$this",720],["T_OBJECT_OPERATOR","->",720],["T_STRING","_checkoutSession",720],["T_OBJECT_OPERATOR","->",720],["T_STRING","getUseNotice",720],"(",")",["T_WHITESPACE"," ",720],["T_IS_IDENTICAL","===",720],["T_WHITESPACE"," ",720],["T_STRING","null",720],")",["T_WHITESPACE"," ",720],"{",["T_WHITESPACE","\n                ",720],["T_VARIABLE","$this",721],["T_OBJECT_OPERATOR","->",721],["T_STRING","_checkoutSession",721],["T_OBJECT_OPERATOR","->",721],["T_STRING","setUseNotice",721],"(",["T_STRING","true",721],")",";",["T_WHITESPACE","\n            ",721],"}",["T_WHITESPACE","\n            ",722],["T_THROW","throw",723],["T_WHITESPACE"," ",723],["T_NEW","new",723],["T_WHITESPACE"," ",723],["T_NS_SEPARATOR","\\",723],["T_STRING","Magento",723],["T_NS_SEPARATOR","\\",723],["T_STRING","Framework",723],["T_NS_SEPARATOR","\\",723],["T_STRING","Exception",723],["T_NS_SEPARATOR","\\",723],["T_STRING","LocalizedException",723],"(",["T_STRING","__",723],"(",["T_VARIABLE","$result",723],")",")",";",["T_WHITESPACE","\n        ",723],"}",["T_WHITESPACE","\n\n        ",724],["T_VARIABLE","$this",726],["T_OBJECT_OPERATOR","->",726],["T_STRING","_eventManager",726],["T_OBJECT_OPERATOR","->",726],["T_STRING","dispatch",726],"(",["T_WHITESPACE","\n            ",726],["T_CONSTANT_ENCAPSED_STRING","'checkout_cart_product_update_after'",727],",",["T_WHITESPACE","\n            ",727],"[",["T_CONSTANT_ENCAPSED_STRING","'quote_item'",728],["T_WHITESPACE"," ",728],["T_DOUBLE_ARROW","=>",728],["T_WHITESPACE"," ",728],["T_VARIABLE","$result",728],",",["T_WHITESPACE"," ",728],["T_CONSTANT_ENCAPSED_STRING","'product'",728],["T_WHITESPACE"," ",728],["T_DOUBLE_ARROW","=>",728],["T_WHITESPACE"," ",728],["T_VARIABLE","$product",728],"]",["T_WHITESPACE","\n        ",728],")",";",["T_WHITESPACE","\n        ",729],["T_VARIABLE","$this",730],["T_OBJECT_OPERATOR","->",730],["T_STRING","_checkoutSession",730],["T_OBJECT_OPERATOR","->",730],["T_STRING","setLastAddedProductId",730],"(",["T_VARIABLE","$productId",730],")",";",["T_WHITESPACE","\n        ",730],["T_RETURN","return",731],["T_WHITESPACE"," ",731],["T_VARIABLE","$result",731],";",["T_WHITESPACE","\n    ",731],"}",["T_WHITESPACE","\n\n    ",732],["T_DOC_COMMENT","\/**\n     * Getter for RequestInfoFilter\n     *\n     * @deprecated\n     * @return \\Magento\\Checkout\\Model\\Cart\\RequestInfoFilterInterface\n     *\/",734],["T_WHITESPACE","\n    ",739],["T_PRIVATE","private",740],["T_WHITESPACE"," ",740],["T_FUNCTION","function",740],["T_WHITESPACE"," ",740],["T_STRING","getRequestInfoFilter",740],"(",")",["T_WHITESPACE","\n    ",740],"{",["T_WHITESPACE","\n        ",741],["T_IF","if",742],["T_WHITESPACE"," ",742],"(",["T_VARIABLE","$this",742],["T_OBJECT_OPERATOR","->",742],["T_STRING","requestInfoFilter",742],["T_WHITESPACE"," ",742],["T_IS_IDENTICAL","===",742],["T_WHITESPACE"," ",742],["T_STRING","null",742],")",["T_WHITESPACE"," ",742],"{",["T_WHITESPACE","\n            ",742],["T_VARIABLE","$this",743],["T_OBJECT_OPERATOR","->",743],["T_STRING","requestInfoFilter",743],["T_WHITESPACE"," ",743],"=",["T_WHITESPACE"," ",743],["T_NS_SEPARATOR","\\",743],["T_STRING","Magento",743],["T_NS_SEPARATOR","\\",743],["T_STRING","Framework",743],["T_NS_SEPARATOR","\\",743],["T_STRING","App",743],["T_NS_SEPARATOR","\\",743],["T_STRING","ObjectManager",743],["T_DOUBLE_COLON","::",743],["T_STRING","getInstance",743],"(",")",["T_WHITESPACE","\n                ",743],["T_OBJECT_OPERATOR","->",744],["T_STRING","get",744],"(",["T_NS_SEPARATOR","\\",744],["T_STRING","Magento",744],["T_NS_SEPARATOR","\\",744],["T_STRING","Checkout",744],["T_NS_SEPARATOR","\\",744],["T_STRING","Model",744],["T_NS_SEPARATOR","\\",744],["T_STRING","Cart",744],["T_NS_SEPARATOR","\\",744],["T_STRING","RequestInfoFilterInterface",744],["T_DOUBLE_COLON","::",744],["T_CLASS","class",744],")",";",["T_WHITESPACE","\n        ",744],"}",["T_WHITESPACE","\n        ",745],["T_RETURN","return",746],["T_WHITESPACE"," ",746],["T_VARIABLE","$this",746],["T_OBJECT_OPERATOR","->",746],["T_STRING","requestInfoFilter",746],";",["T_WHITESPACE","\n    ",746],"}",["T_WHITESPACE","\n",747],"}",["T_WHITESPACE","\n",748]]
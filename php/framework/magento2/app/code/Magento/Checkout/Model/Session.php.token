[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Copyright \u00c2\u00a9 2013-2017 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n *\/",2],["T_WHITESPACE","\n",5],["T_NAMESPACE","namespace",6],["T_WHITESPACE"," ",6],["T_STRING","Magento",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Checkout",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Model",6],";",["T_WHITESPACE","\n\n",6],["T_USE","use",8],["T_WHITESPACE"," ",8],["T_STRING","Magento",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Customer",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Api",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Data",8],["T_NS_SEPARATOR","\\",8],["T_STRING","CustomerInterface",8],";",["T_WHITESPACE","\n",8],["T_USE","use",9],["T_WHITESPACE"," ",9],["T_STRING","Magento",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Quote",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Model",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Quote",9],";",["T_WHITESPACE","\n",9],["T_USE","use",10],["T_WHITESPACE"," ",10],["T_STRING","Magento",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Quote",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Model",10],["T_NS_SEPARATOR","\\",10],["T_STRING","QuoteIdMaskFactory",10],";",["T_WHITESPACE","\n\n",10],["T_DOC_COMMENT","\/**\n * @SuppressWarnings(PHPMD.CouplingBetweenObjects)\n *\/",12],["T_WHITESPACE","\n",14],["T_CLASS","class",15],["T_WHITESPACE"," ",15],["T_STRING","Session",15],["T_WHITESPACE"," ",15],["T_EXTENDS","extends",15],["T_WHITESPACE"," ",15],["T_NS_SEPARATOR","\\",15],["T_STRING","Magento",15],["T_NS_SEPARATOR","\\",15],["T_STRING","Framework",15],["T_NS_SEPARATOR","\\",15],["T_STRING","Session",15],["T_NS_SEPARATOR","\\",15],["T_STRING","SessionManager",15],["T_WHITESPACE","\n",15],"{",["T_WHITESPACE","\n    ",16],["T_DOC_COMMENT","\/**\n     * Checkout state begin\n     *\/",17],["T_WHITESPACE","\n    ",19],["T_CONST","const",20],["T_WHITESPACE"," ",20],["T_STRING","CHECKOUT_STATE_BEGIN",20],["T_WHITESPACE"," ",20],"=",["T_WHITESPACE"," ",20],["T_CONSTANT_ENCAPSED_STRING","'begin'",20],";",["T_WHITESPACE","\n\n    ",20],["T_DOC_COMMENT","\/**\n     * Quote instance\n     *\n     * @var Quote\n     *\/",22],["T_WHITESPACE","\n    ",26],["T_PROTECTED","protected",27],["T_WHITESPACE"," ",27],["T_VARIABLE","$_quote",27],";",["T_WHITESPACE","\n\n    ",27],["T_DOC_COMMENT","\/**\n     * Customer Data Object\n     *\n     * @var CustomerInterface|null\n     *\/",29],["T_WHITESPACE","\n    ",33],["T_PROTECTED","protected",34],["T_WHITESPACE"," ",34],["T_VARIABLE","$_customer",34],";",["T_WHITESPACE","\n\n    ",34],["T_DOC_COMMENT","\/**\n     * Whether load only active quote\n     *\n     * @var bool\n     *\/",36],["T_WHITESPACE","\n    ",40],["T_PROTECTED","protected",41],["T_WHITESPACE"," ",41],["T_VARIABLE","$_loadInactive",41],["T_WHITESPACE"," ",41],"=",["T_WHITESPACE"," ",41],["T_STRING","false",41],";",["T_WHITESPACE","\n\n    ",41],["T_DOC_COMMENT","\/**\n     * Loaded order instance\n     *\n     * @var \\Magento\\Sales\\Model\\Order\n     *\/",43],["T_WHITESPACE","\n    ",47],["T_PROTECTED","protected",48],["T_WHITESPACE"," ",48],["T_VARIABLE","$_order",48],";",["T_WHITESPACE","\n\n    ",48],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Sales\\Model\\OrderFactory\n     *\/",50],["T_WHITESPACE","\n    ",52],["T_PROTECTED","protected",53],["T_WHITESPACE"," ",53],["T_VARIABLE","$_orderFactory",53],";",["T_WHITESPACE","\n\n    ",53],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Customer\\Model\\Session\n     *\/",55],["T_WHITESPACE","\n    ",57],["T_PROTECTED","protected",58],["T_WHITESPACE"," ",58],["T_VARIABLE","$_customerSession",58],";",["T_WHITESPACE","\n\n    ",58],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Quote\\Api\\CartRepositoryInterface\n     *\/",60],["T_WHITESPACE","\n    ",62],["T_PROTECTED","protected",63],["T_WHITESPACE"," ",63],["T_VARIABLE","$quoteRepository",63],";",["T_WHITESPACE","\n\n    ",63],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Framework\\HTTP\\PhpEnvironment\\RemoteAddress\n     *\/",65],["T_WHITESPACE","\n    ",67],["T_PROTECTED","protected",68],["T_WHITESPACE"," ",68],["T_VARIABLE","$_remoteAddress",68],";",["T_WHITESPACE","\n\n    ",68],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Framework\\Event\\ManagerInterface\n     *\/",70],["T_WHITESPACE","\n    ",72],["T_PROTECTED","protected",73],["T_WHITESPACE"," ",73],["T_VARIABLE","$_eventManager",73],";",["T_WHITESPACE","\n\n    ",73],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Store\\Model\\StoreManagerInterface\n     *\/",75],["T_WHITESPACE","\n    ",77],["T_PROTECTED","protected",78],["T_WHITESPACE"," ",78],["T_VARIABLE","$_storeManager",78],";",["T_WHITESPACE","\n\n    ",78],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Customer\\Api\\CustomerRepositoryInterface\n     *\/",80],["T_WHITESPACE","\n    ",82],["T_PROTECTED","protected",83],["T_WHITESPACE"," ",83],["T_VARIABLE","$customerRepository",83],";",["T_WHITESPACE","\n\n    ",83],["T_DOC_COMMENT","\/**\n     * @param QuoteIdMaskFactory\n     *\/",85],["T_WHITESPACE","\n    ",87],["T_PROTECTED","protected",88],["T_WHITESPACE"," ",88],["T_VARIABLE","$quoteIdMaskFactory",88],";",["T_WHITESPACE","\n\n    ",88],["T_DOC_COMMENT","\/**\n     * @param bool\n     *\/",90],["T_WHITESPACE","\n    ",92],["T_PROTECTED","protected",93],["T_WHITESPACE"," ",93],["T_VARIABLE","$isQuoteMasked",93],";",["T_WHITESPACE","\n\n    ",93],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Quote\\Model\\QuoteFactory\n     *\/",95],["T_WHITESPACE","\n    ",97],["T_PROTECTED","protected",98],["T_WHITESPACE"," ",98],["T_VARIABLE","$quoteFactory",98],";",["T_WHITESPACE","\n\n    ",98],["T_DOC_COMMENT","\/**\n     * @param \\Magento\\Framework\\App\\Request\\Http $request\n     * @param \\Magento\\Framework\\Session\\SidResolverInterface $sidResolver\n     * @param \\Magento\\Framework\\Session\\Config\\ConfigInterface $sessionConfig\n     * @param \\Magento\\Framework\\Session\\SaveHandlerInterface $saveHandler\n     * @param \\Magento\\Framework\\Session\\ValidatorInterface $validator\n     * @param \\Magento\\Framework\\Session\\StorageInterface $storage\n     * @param \\Magento\\Framework\\Stdlib\\CookieManagerInterface $cookieManager\n     * @param \\Magento\\Framework\\Stdlib\\Cookie\\CookieMetadataFactory $cookieMetadataFactory\n     * @param \\Magento\\Framework\\App\\State $appState\n     * @param \\Magento\\Sales\\Model\\OrderFactory $orderFactory\n     * @param \\Magento\\Customer\\Model\\Session $customerSession\n     * @param \\Magento\\Quote\\Api\\CartRepositoryInterface $quoteRepository\n     * @param \\Magento\\Framework\\HTTP\\PhpEnvironment\\RemoteAddress $remoteAddress\n     * @param \\Magento\\Framework\\Event\\ManagerInterface $eventManager\n     * @param \\Magento\\Store\\Model\\StoreManagerInterface $storeManager\n     * @param \\Magento\\Customer\\Api\\CustomerRepositoryInterface $customerRepository\n     * @param QuoteIdMaskFactory $quoteIdMaskFactory\n     * @param \\Magento\\Quote\\Model\\QuoteFactory $quoteFactory\n     * @SuppressWarnings(PHPMD.ExcessiveParameterList)\n     *\/",100],["T_WHITESPACE","\n    ",120],["T_PUBLIC","public",121],["T_WHITESPACE"," ",121],["T_FUNCTION","function",121],["T_WHITESPACE"," ",121],["T_STRING","__construct",121],"(",["T_WHITESPACE","\n        ",121],["T_NS_SEPARATOR","\\",122],["T_STRING","Magento",122],["T_NS_SEPARATOR","\\",122],["T_STRING","Framework",122],["T_NS_SEPARATOR","\\",122],["T_STRING","App",122],["T_NS_SEPARATOR","\\",122],["T_STRING","Request",122],["T_NS_SEPARATOR","\\",122],["T_STRING","Http",122],["T_WHITESPACE"," ",122],["T_VARIABLE","$request",122],",",["T_WHITESPACE","\n        ",122],["T_NS_SEPARATOR","\\",123],["T_STRING","Magento",123],["T_NS_SEPARATOR","\\",123],["T_STRING","Framework",123],["T_NS_SEPARATOR","\\",123],["T_STRING","Session",123],["T_NS_SEPARATOR","\\",123],["T_STRING","SidResolverInterface",123],["T_WHITESPACE"," ",123],["T_VARIABLE","$sidResolver",123],",",["T_WHITESPACE","\n        ",123],["T_NS_SEPARATOR","\\",124],["T_STRING","Magento",124],["T_NS_SEPARATOR","\\",124],["T_STRING","Framework",124],["T_NS_SEPARATOR","\\",124],["T_STRING","Session",124],["T_NS_SEPARATOR","\\",124],["T_STRING","Config",124],["T_NS_SEPARATOR","\\",124],["T_STRING","ConfigInterface",124],["T_WHITESPACE"," ",124],["T_VARIABLE","$sessionConfig",124],",",["T_WHITESPACE","\n        ",124],["T_NS_SEPARATOR","\\",125],["T_STRING","Magento",125],["T_NS_SEPARATOR","\\",125],["T_STRING","Framework",125],["T_NS_SEPARATOR","\\",125],["T_STRING","Session",125],["T_NS_SEPARATOR","\\",125],["T_STRING","SaveHandlerInterface",125],["T_WHITESPACE"," ",125],["T_VARIABLE","$saveHandler",125],",",["T_WHITESPACE","\n        ",125],["T_NS_SEPARATOR","\\",126],["T_STRING","Magento",126],["T_NS_SEPARATOR","\\",126],["T_STRING","Framework",126],["T_NS_SEPARATOR","\\",126],["T_STRING","Session",126],["T_NS_SEPARATOR","\\",126],["T_STRING","ValidatorInterface",126],["T_WHITESPACE"," ",126],["T_VARIABLE","$validator",126],",",["T_WHITESPACE","\n        ",126],["T_NS_SEPARATOR","\\",127],["T_STRING","Magento",127],["T_NS_SEPARATOR","\\",127],["T_STRING","Framework",127],["T_NS_SEPARATOR","\\",127],["T_STRING","Session",127],["T_NS_SEPARATOR","\\",127],["T_STRING","StorageInterface",127],["T_WHITESPACE"," ",127],["T_VARIABLE","$storage",127],",",["T_WHITESPACE","\n        ",127],["T_NS_SEPARATOR","\\",128],["T_STRING","Magento",128],["T_NS_SEPARATOR","\\",128],["T_STRING","Framework",128],["T_NS_SEPARATOR","\\",128],["T_STRING","Stdlib",128],["T_NS_SEPARATOR","\\",128],["T_STRING","CookieManagerInterface",128],["T_WHITESPACE"," ",128],["T_VARIABLE","$cookieManager",128],",",["T_WHITESPACE","\n        ",128],["T_NS_SEPARATOR","\\",129],["T_STRING","Magento",129],["T_NS_SEPARATOR","\\",129],["T_STRING","Framework",129],["T_NS_SEPARATOR","\\",129],["T_STRING","Stdlib",129],["T_NS_SEPARATOR","\\",129],["T_STRING","Cookie",129],["T_NS_SEPARATOR","\\",129],["T_STRING","CookieMetadataFactory",129],["T_WHITESPACE"," ",129],["T_VARIABLE","$cookieMetadataFactory",129],",",["T_WHITESPACE","\n        ",129],["T_NS_SEPARATOR","\\",130],["T_STRING","Magento",130],["T_NS_SEPARATOR","\\",130],["T_STRING","Framework",130],["T_NS_SEPARATOR","\\",130],["T_STRING","App",130],["T_NS_SEPARATOR","\\",130],["T_STRING","State",130],["T_WHITESPACE"," ",130],["T_VARIABLE","$appState",130],",",["T_WHITESPACE","\n        ",130],["T_NS_SEPARATOR","\\",131],["T_STRING","Magento",131],["T_NS_SEPARATOR","\\",131],["T_STRING","Sales",131],["T_NS_SEPARATOR","\\",131],["T_STRING","Model",131],["T_NS_SEPARATOR","\\",131],["T_STRING","OrderFactory",131],["T_WHITESPACE"," ",131],["T_VARIABLE","$orderFactory",131],",",["T_WHITESPACE","\n        ",131],["T_NS_SEPARATOR","\\",132],["T_STRING","Magento",132],["T_NS_SEPARATOR","\\",132],["T_STRING","Customer",132],["T_NS_SEPARATOR","\\",132],["T_STRING","Model",132],["T_NS_SEPARATOR","\\",132],["T_STRING","Session",132],["T_WHITESPACE"," ",132],["T_VARIABLE","$customerSession",132],",",["T_WHITESPACE","\n        ",132],["T_NS_SEPARATOR","\\",133],["T_STRING","Magento",133],["T_NS_SEPARATOR","\\",133],["T_STRING","Quote",133],["T_NS_SEPARATOR","\\",133],["T_STRING","Api",133],["T_NS_SEPARATOR","\\",133],["T_STRING","CartRepositoryInterface",133],["T_WHITESPACE"," ",133],["T_VARIABLE","$quoteRepository",133],",",["T_WHITESPACE","\n        ",133],["T_NS_SEPARATOR","\\",134],["T_STRING","Magento",134],["T_NS_SEPARATOR","\\",134],["T_STRING","Framework",134],["T_NS_SEPARATOR","\\",134],["T_STRING","HTTP",134],["T_NS_SEPARATOR","\\",134],["T_STRING","PhpEnvironment",134],["T_NS_SEPARATOR","\\",134],["T_STRING","RemoteAddress",134],["T_WHITESPACE"," ",134],["T_VARIABLE","$remoteAddress",134],",",["T_WHITESPACE","\n        ",134],["T_NS_SEPARATOR","\\",135],["T_STRING","Magento",135],["T_NS_SEPARATOR","\\",135],["T_STRING","Framework",135],["T_NS_SEPARATOR","\\",135],["T_STRING","Event",135],["T_NS_SEPARATOR","\\",135],["T_STRING","ManagerInterface",135],["T_WHITESPACE"," ",135],["T_VARIABLE","$eventManager",135],",",["T_WHITESPACE","\n        ",135],["T_NS_SEPARATOR","\\",136],["T_STRING","Magento",136],["T_NS_SEPARATOR","\\",136],["T_STRING","Store",136],["T_NS_SEPARATOR","\\",136],["T_STRING","Model",136],["T_NS_SEPARATOR","\\",136],["T_STRING","StoreManagerInterface",136],["T_WHITESPACE"," ",136],["T_VARIABLE","$storeManager",136],",",["T_WHITESPACE","\n        ",136],["T_NS_SEPARATOR","\\",137],["T_STRING","Magento",137],["T_NS_SEPARATOR","\\",137],["T_STRING","Customer",137],["T_NS_SEPARATOR","\\",137],["T_STRING","Api",137],["T_NS_SEPARATOR","\\",137],["T_STRING","CustomerRepositoryInterface",137],["T_WHITESPACE"," ",137],["T_VARIABLE","$customerRepository",137],",",["T_WHITESPACE","\n        ",137],["T_STRING","QuoteIdMaskFactory",138],["T_WHITESPACE"," ",138],["T_VARIABLE","$quoteIdMaskFactory",138],",",["T_WHITESPACE","\n        ",138],["T_NS_SEPARATOR","\\",139],["T_STRING","Magento",139],["T_NS_SEPARATOR","\\",139],["T_STRING","Quote",139],["T_NS_SEPARATOR","\\",139],["T_STRING","Model",139],["T_NS_SEPARATOR","\\",139],["T_STRING","QuoteFactory",139],["T_WHITESPACE"," ",139],["T_VARIABLE","$quoteFactory",139],["T_WHITESPACE","\n    ",139],")",["T_WHITESPACE"," ",140],"{",["T_WHITESPACE","\n        ",140],["T_VARIABLE","$this",141],["T_OBJECT_OPERATOR","->",141],["T_STRING","_orderFactory",141],["T_WHITESPACE"," ",141],"=",["T_WHITESPACE"," ",141],["T_VARIABLE","$orderFactory",141],";",["T_WHITESPACE","\n        ",141],["T_VARIABLE","$this",142],["T_OBJECT_OPERATOR","->",142],["T_STRING","_customerSession",142],["T_WHITESPACE"," ",142],"=",["T_WHITESPACE"," ",142],["T_VARIABLE","$customerSession",142],";",["T_WHITESPACE","\n        ",142],["T_VARIABLE","$this",143],["T_OBJECT_OPERATOR","->",143],["T_STRING","quoteRepository",143],["T_WHITESPACE"," ",143],"=",["T_WHITESPACE"," ",143],["T_VARIABLE","$quoteRepository",143],";",["T_WHITESPACE","\n        ",143],["T_VARIABLE","$this",144],["T_OBJECT_OPERATOR","->",144],["T_STRING","_remoteAddress",144],["T_WHITESPACE"," ",144],"=",["T_WHITESPACE"," ",144],["T_VARIABLE","$remoteAddress",144],";",["T_WHITESPACE","\n        ",144],["T_VARIABLE","$this",145],["T_OBJECT_OPERATOR","->",145],["T_STRING","_eventManager",145],["T_WHITESPACE"," ",145],"=",["T_WHITESPACE"," ",145],["T_VARIABLE","$eventManager",145],";",["T_WHITESPACE","\n        ",145],["T_VARIABLE","$this",146],["T_OBJECT_OPERATOR","->",146],["T_STRING","_storeManager",146],["T_WHITESPACE"," ",146],"=",["T_WHITESPACE"," ",146],["T_VARIABLE","$storeManager",146],";",["T_WHITESPACE","\n        ",146],["T_VARIABLE","$this",147],["T_OBJECT_OPERATOR","->",147],["T_STRING","customerRepository",147],["T_WHITESPACE"," ",147],"=",["T_WHITESPACE"," ",147],["T_VARIABLE","$customerRepository",147],";",["T_WHITESPACE","\n        ",147],["T_VARIABLE","$this",148],["T_OBJECT_OPERATOR","->",148],["T_STRING","quoteIdMaskFactory",148],["T_WHITESPACE"," ",148],"=",["T_WHITESPACE"," ",148],["T_VARIABLE","$quoteIdMaskFactory",148],";",["T_WHITESPACE","\n        ",148],["T_VARIABLE","$this",149],["T_OBJECT_OPERATOR","->",149],["T_STRING","quoteFactory",149],["T_WHITESPACE"," ",149],"=",["T_WHITESPACE"," ",149],["T_VARIABLE","$quoteFactory",149],";",["T_WHITESPACE","\n        ",149],["T_STRING","parent",150],["T_DOUBLE_COLON","::",150],["T_STRING","__construct",150],"(",["T_WHITESPACE","\n            ",150],["T_VARIABLE","$request",151],",",["T_WHITESPACE","\n            ",151],["T_VARIABLE","$sidResolver",152],",",["T_WHITESPACE","\n            ",152],["T_VARIABLE","$sessionConfig",153],",",["T_WHITESPACE","\n            ",153],["T_VARIABLE","$saveHandler",154],",",["T_WHITESPACE","\n            ",154],["T_VARIABLE","$validator",155],",",["T_WHITESPACE","\n            ",155],["T_VARIABLE","$storage",156],",",["T_WHITESPACE","\n            ",156],["T_VARIABLE","$cookieManager",157],",",["T_WHITESPACE","\n            ",157],["T_VARIABLE","$cookieMetadataFactory",158],",",["T_WHITESPACE","\n            ",158],["T_VARIABLE","$appState",159],["T_WHITESPACE","\n        ",159],")",";",["T_WHITESPACE","\n    ",160],"}",["T_WHITESPACE","\n\n    ",161],["T_DOC_COMMENT","\/**\n     * Set customer data.\n     *\n     * @param CustomerInterface|null $customer\n     * @return \\Magento\\Checkout\\Model\\Session\n     * @codeCoverageIgnore\n     *\/",163],["T_WHITESPACE","\n    ",169],["T_PUBLIC","public",170],["T_WHITESPACE"," ",170],["T_FUNCTION","function",170],["T_WHITESPACE"," ",170],["T_STRING","setCustomerData",170],"(",["T_VARIABLE","$customer",170],")",["T_WHITESPACE","\n    ",170],"{",["T_WHITESPACE","\n        ",171],["T_VARIABLE","$this",172],["T_OBJECT_OPERATOR","->",172],["T_STRING","_customer",172],["T_WHITESPACE"," ",172],"=",["T_WHITESPACE"," ",172],["T_VARIABLE","$customer",172],";",["T_WHITESPACE","\n        ",172],["T_RETURN","return",173],["T_WHITESPACE"," ",173],["T_VARIABLE","$this",173],";",["T_WHITESPACE","\n    ",173],"}",["T_WHITESPACE","\n\n    ",174],["T_DOC_COMMENT","\/**\n     * Check whether current session has quote\n     *\n     * @return bool\n     * @codeCoverageIgnore\n     *\/",176],["T_WHITESPACE","\n    ",181],["T_PUBLIC","public",182],["T_WHITESPACE"," ",182],["T_FUNCTION","function",182],["T_WHITESPACE"," ",182],["T_STRING","hasQuote",182],"(",")",["T_WHITESPACE","\n    ",182],"{",["T_WHITESPACE","\n        ",183],["T_RETURN","return",184],["T_WHITESPACE"," ",184],["T_ISSET","isset",184],"(",["T_VARIABLE","$this",184],["T_OBJECT_OPERATOR","->",184],["T_STRING","_quote",184],")",";",["T_WHITESPACE","\n    ",184],"}",["T_WHITESPACE","\n\n    ",185],["T_DOC_COMMENT","\/**\n     * Set quote to be loaded even if inactive\n     *\n     * @param bool $load\n     * @return $this\n     * @codeCoverageIgnore\n     *\/",187],["T_WHITESPACE","\n    ",193],["T_PUBLIC","public",194],["T_WHITESPACE"," ",194],["T_FUNCTION","function",194],["T_WHITESPACE"," ",194],["T_STRING","setLoadInactive",194],"(",["T_VARIABLE","$load",194],["T_WHITESPACE"," ",194],"=",["T_WHITESPACE"," ",194],["T_STRING","true",194],")",["T_WHITESPACE","\n    ",194],"{",["T_WHITESPACE","\n        ",195],["T_VARIABLE","$this",196],["T_OBJECT_OPERATOR","->",196],["T_STRING","_loadInactive",196],["T_WHITESPACE"," ",196],"=",["T_WHITESPACE"," ",196],["T_VARIABLE","$load",196],";",["T_WHITESPACE","\n        ",196],["T_RETURN","return",197],["T_WHITESPACE"," ",197],["T_VARIABLE","$this",197],";",["T_WHITESPACE","\n    ",197],"}",["T_WHITESPACE","\n\n    ",198],["T_DOC_COMMENT","\/**\n     * Get checkout quote instance by current session\n     *\n     * @return Quote\n     * @SuppressWarnings(PHPMD.CyclomaticComplexity)\n     * @SuppressWarnings(PHPMD.NPathComplexity)\n     *\/",200],["T_WHITESPACE","\n    ",206],["T_PUBLIC","public",207],["T_WHITESPACE"," ",207],["T_FUNCTION","function",207],["T_WHITESPACE"," ",207],["T_STRING","getQuote",207],"(",")",["T_WHITESPACE","\n    ",207],"{",["T_WHITESPACE","\n        ",208],["T_VARIABLE","$this",209],["T_OBJECT_OPERATOR","->",209],["T_STRING","_eventManager",209],["T_OBJECT_OPERATOR","->",209],["T_STRING","dispatch",209],"(",["T_CONSTANT_ENCAPSED_STRING","'custom_quote_process'",209],",",["T_WHITESPACE"," ",209],"[",["T_CONSTANT_ENCAPSED_STRING","'checkout_session'",209],["T_WHITESPACE"," ",209],["T_DOUBLE_ARROW","=>",209],["T_WHITESPACE"," ",209],["T_VARIABLE","$this",209],"]",")",";",["T_WHITESPACE","\n\n        ",209],["T_IF","if",211],["T_WHITESPACE"," ",211],"(",["T_VARIABLE","$this",211],["T_OBJECT_OPERATOR","->",211],["T_STRING","_quote",211],["T_WHITESPACE"," ",211],["T_IS_IDENTICAL","===",211],["T_WHITESPACE"," ",211],["T_STRING","null",211],")",["T_WHITESPACE"," ",211],"{",["T_WHITESPACE","\n            ",211],["T_VARIABLE","$quote",212],["T_WHITESPACE"," ",212],"=",["T_WHITESPACE"," ",212],["T_VARIABLE","$this",212],["T_OBJECT_OPERATOR","->",212],["T_STRING","quoteFactory",212],["T_OBJECT_OPERATOR","->",212],["T_STRING","create",212],"(",")",";",["T_WHITESPACE","\n            ",212],["T_IF","if",213],["T_WHITESPACE"," ",213],"(",["T_VARIABLE","$this",213],["T_OBJECT_OPERATOR","->",213],["T_STRING","getQuoteId",213],"(",")",")",["T_WHITESPACE"," ",213],"{",["T_WHITESPACE","\n                ",213],["T_TRY","try",214],["T_WHITESPACE"," ",214],"{",["T_WHITESPACE","\n                    ",214],["T_IF","if",215],["T_WHITESPACE"," ",215],"(",["T_VARIABLE","$this",215],["T_OBJECT_OPERATOR","->",215],["T_STRING","_loadInactive",215],")",["T_WHITESPACE"," ",215],"{",["T_WHITESPACE","\n                        ",215],["T_VARIABLE","$quote",216],["T_WHITESPACE"," ",216],"=",["T_WHITESPACE"," ",216],["T_VARIABLE","$this",216],["T_OBJECT_OPERATOR","->",216],["T_STRING","quoteRepository",216],["T_OBJECT_OPERATOR","->",216],["T_STRING","get",216],"(",["T_VARIABLE","$this",216],["T_OBJECT_OPERATOR","->",216],["T_STRING","getQuoteId",216],"(",")",")",";",["T_WHITESPACE","\n                    ",216],"}",["T_WHITESPACE"," ",217],["T_ELSE","else",217],["T_WHITESPACE"," ",217],"{",["T_WHITESPACE","\n                        ",217],["T_VARIABLE","$quote",218],["T_WHITESPACE"," ",218],"=",["T_WHITESPACE"," ",218],["T_VARIABLE","$this",218],["T_OBJECT_OPERATOR","->",218],["T_STRING","quoteRepository",218],["T_OBJECT_OPERATOR","->",218],["T_STRING","getActive",218],"(",["T_VARIABLE","$this",218],["T_OBJECT_OPERATOR","->",218],["T_STRING","getQuoteId",218],"(",")",")",";",["T_WHITESPACE","\n                    ",218],"}",["T_WHITESPACE","\n\n                    ",219],["T_DOC_COMMENT","\/**\n                     * If current currency code of quote is not equal current currency code of store,\n                     * need recalculate totals of quote. It is possible if customer use currency switcher or\n                     * store switcher.\n                     *\/",221],["T_WHITESPACE","\n                    ",225],["T_IF","if",226],["T_WHITESPACE"," ",226],"(",["T_VARIABLE","$quote",226],["T_OBJECT_OPERATOR","->",226],["T_STRING","getQuoteCurrencyCode",226],"(",")",["T_WHITESPACE"," ",226],["T_IS_NOT_EQUAL","!=",226],["T_WHITESPACE"," ",226],["T_VARIABLE","$this",226],["T_OBJECT_OPERATOR","->",226],["T_STRING","_storeManager",226],["T_OBJECT_OPERATOR","->",226],["T_STRING","getStore",226],"(",")",["T_OBJECT_OPERATOR","->",226],["T_STRING","getCurrentCurrencyCode",226],"(",")",")",["T_WHITESPACE"," ",226],"{",["T_WHITESPACE","\n                        ",226],["T_VARIABLE","$quote",227],["T_OBJECT_OPERATOR","->",227],["T_STRING","setStore",227],"(",["T_VARIABLE","$this",227],["T_OBJECT_OPERATOR","->",227],["T_STRING","_storeManager",227],["T_OBJECT_OPERATOR","->",227],["T_STRING","getStore",227],"(",")",")",";",["T_WHITESPACE","\n                        ",227],["T_VARIABLE","$this",228],["T_OBJECT_OPERATOR","->",228],["T_STRING","quoteRepository",228],["T_OBJECT_OPERATOR","->",228],["T_STRING","save",228],"(",["T_VARIABLE","$quote",228],["T_OBJECT_OPERATOR","->",228],["T_STRING","collectTotals",228],"(",")",")",";",["T_WHITESPACE","\n                        ",228],["T_COMMENT","\/*\n                         * We mast to create new quote object, because collectTotals()\n                         * can to create links with other objects.\n                         *\/",229],["T_WHITESPACE","\n                        ",232],["T_VARIABLE","$quote",233],["T_WHITESPACE"," ",233],"=",["T_WHITESPACE"," ",233],["T_VARIABLE","$this",233],["T_OBJECT_OPERATOR","->",233],["T_STRING","quoteRepository",233],["T_OBJECT_OPERATOR","->",233],["T_STRING","get",233],"(",["T_VARIABLE","$this",233],["T_OBJECT_OPERATOR","->",233],["T_STRING","getQuoteId",233],"(",")",")",";",["T_WHITESPACE","\n                    ",233],"}",["T_WHITESPACE","\n                ",234],"}",["T_WHITESPACE"," ",235],["T_CATCH","catch",235],["T_WHITESPACE"," ",235],"(",["T_NS_SEPARATOR","\\",235],["T_STRING","Magento",235],["T_NS_SEPARATOR","\\",235],["T_STRING","Framework",235],["T_NS_SEPARATOR","\\",235],["T_STRING","Exception",235],["T_NS_SEPARATOR","\\",235],["T_STRING","NoSuchEntityException",235],["T_WHITESPACE"," ",235],["T_VARIABLE","$e",235],")",["T_WHITESPACE"," ",235],"{",["T_WHITESPACE","\n                    ",235],["T_VARIABLE","$this",236],["T_OBJECT_OPERATOR","->",236],["T_STRING","setQuoteId",236],"(",["T_STRING","null",236],")",";",["T_WHITESPACE","\n                ",236],"}",["T_WHITESPACE","\n            ",237],"}",["T_WHITESPACE","\n\n            ",238],["T_IF","if",240],["T_WHITESPACE"," ",240],"(","!",["T_VARIABLE","$this",240],["T_OBJECT_OPERATOR","->",240],["T_STRING","getQuoteId",240],"(",")",")",["T_WHITESPACE"," ",240],"{",["T_WHITESPACE","\n                ",240],["T_IF","if",241],["T_WHITESPACE"," ",241],"(",["T_VARIABLE","$this",241],["T_OBJECT_OPERATOR","->",241],["T_STRING","_customerSession",241],["T_OBJECT_OPERATOR","->",241],["T_STRING","isLoggedIn",241],"(",")",["T_WHITESPACE"," ",241],["T_BOOLEAN_OR","||",241],["T_WHITESPACE"," ",241],["T_VARIABLE","$this",241],["T_OBJECT_OPERATOR","->",241],["T_STRING","_customer",241],")",["T_WHITESPACE"," ",241],"{",["T_WHITESPACE","\n                    ",241],["T_VARIABLE","$customerId",242],["T_WHITESPACE"," ",242],"=",["T_WHITESPACE"," ",242],["T_VARIABLE","$this",242],["T_OBJECT_OPERATOR","->",242],["T_STRING","_customer",242],["T_WHITESPACE","\n                        ",242],"?",["T_WHITESPACE"," ",243],["T_VARIABLE","$this",243],["T_OBJECT_OPERATOR","->",243],["T_STRING","_customer",243],["T_OBJECT_OPERATOR","->",243],["T_STRING","getId",243],"(",")",["T_WHITESPACE","\n                        ",243],":",["T_WHITESPACE"," ",244],["T_VARIABLE","$this",244],["T_OBJECT_OPERATOR","->",244],["T_STRING","_customerSession",244],["T_OBJECT_OPERATOR","->",244],["T_STRING","getCustomerId",244],"(",")",";",["T_WHITESPACE","\n                    ",244],["T_TRY","try",245],["T_WHITESPACE"," ",245],"{",["T_WHITESPACE","\n                        ",245],["T_VARIABLE","$quote",246],["T_WHITESPACE"," ",246],"=",["T_WHITESPACE"," ",246],["T_VARIABLE","$this",246],["T_OBJECT_OPERATOR","->",246],["T_STRING","quoteRepository",246],["T_OBJECT_OPERATOR","->",246],["T_STRING","getActiveForCustomer",246],"(",["T_VARIABLE","$customerId",246],")",";",["T_WHITESPACE","\n                        ",246],["T_VARIABLE","$this",247],["T_OBJECT_OPERATOR","->",247],["T_STRING","setQuoteId",247],"(",["T_VARIABLE","$quote",247],["T_OBJECT_OPERATOR","->",247],["T_STRING","getId",247],"(",")",")",";",["T_WHITESPACE","\n                    ",247],"}",["T_WHITESPACE"," ",248],["T_CATCH","catch",248],["T_WHITESPACE"," ",248],"(",["T_NS_SEPARATOR","\\",248],["T_STRING","Magento",248],["T_NS_SEPARATOR","\\",248],["T_STRING","Framework",248],["T_NS_SEPARATOR","\\",248],["T_STRING","Exception",248],["T_NS_SEPARATOR","\\",248],["T_STRING","NoSuchEntityException",248],["T_WHITESPACE"," ",248],["T_VARIABLE","$e",248],")",["T_WHITESPACE"," ",248],"{",["T_WHITESPACE","\n                    ",248],"}",["T_WHITESPACE","\n                ",249],"}",["T_WHITESPACE"," ",250],["T_ELSE","else",250],["T_WHITESPACE"," ",250],"{",["T_WHITESPACE","\n                    ",250],["T_VARIABLE","$quote",251],["T_OBJECT_OPERATOR","->",251],["T_STRING","setIsCheckoutCart",251],"(",["T_STRING","true",251],")",";",["T_WHITESPACE","\n                    ",251],["T_VARIABLE","$this",252],["T_OBJECT_OPERATOR","->",252],["T_STRING","_eventManager",252],["T_OBJECT_OPERATOR","->",252],["T_STRING","dispatch",252],"(",["T_CONSTANT_ENCAPSED_STRING","'checkout_quote_init'",252],",",["T_WHITESPACE"," ",252],"[",["T_CONSTANT_ENCAPSED_STRING","'quote'",252],["T_WHITESPACE"," ",252],["T_DOUBLE_ARROW","=>",252],["T_WHITESPACE"," ",252],["T_VARIABLE","$quote",252],"]",")",";",["T_WHITESPACE","\n                ",252],"}",["T_WHITESPACE","\n            ",253],"}",["T_WHITESPACE","\n\n            ",254],["T_IF","if",256],["T_WHITESPACE"," ",256],"(",["T_VARIABLE","$this",256],["T_OBJECT_OPERATOR","->",256],["T_STRING","_customer",256],")",["T_WHITESPACE"," ",256],"{",["T_WHITESPACE","\n                ",256],["T_VARIABLE","$quote",257],["T_OBJECT_OPERATOR","->",257],["T_STRING","setCustomer",257],"(",["T_VARIABLE","$this",257],["T_OBJECT_OPERATOR","->",257],["T_STRING","_customer",257],")",";",["T_WHITESPACE","\n            ",257],"}",["T_WHITESPACE"," ",258],["T_ELSEIF","elseif",258],["T_WHITESPACE"," ",258],"(",["T_VARIABLE","$this",258],["T_OBJECT_OPERATOR","->",258],["T_STRING","_customerSession",258],["T_OBJECT_OPERATOR","->",258],["T_STRING","isLoggedIn",258],"(",")",")",["T_WHITESPACE"," ",258],"{",["T_WHITESPACE","\n                ",258],["T_VARIABLE","$quote",259],["T_OBJECT_OPERATOR","->",259],["T_STRING","setCustomer",259],"(",["T_VARIABLE","$this",259],["T_OBJECT_OPERATOR","->",259],["T_STRING","customerRepository",259],["T_OBJECT_OPERATOR","->",259],["T_STRING","getById",259],"(",["T_VARIABLE","$this",259],["T_OBJECT_OPERATOR","->",259],["T_STRING","_customerSession",259],["T_OBJECT_OPERATOR","->",259],["T_STRING","getCustomerId",259],"(",")",")",")",";",["T_WHITESPACE","\n            ",259],"}",["T_WHITESPACE","\n\n            ",260],["T_VARIABLE","$quote",262],["T_OBJECT_OPERATOR","->",262],["T_STRING","setStore",262],"(",["T_VARIABLE","$this",262],["T_OBJECT_OPERATOR","->",262],["T_STRING","_storeManager",262],["T_OBJECT_OPERATOR","->",262],["T_STRING","getStore",262],"(",")",")",";",["T_WHITESPACE","\n            ",262],["T_VARIABLE","$this",263],["T_OBJECT_OPERATOR","->",263],["T_STRING","_quote",263],["T_WHITESPACE"," ",263],"=",["T_WHITESPACE"," ",263],["T_VARIABLE","$quote",263],";",["T_WHITESPACE","\n        ",263],"}",["T_WHITESPACE","\n\n        ",264],["T_IF","if",266],["T_WHITESPACE"," ",266],"(","!",["T_VARIABLE","$this",266],["T_OBJECT_OPERATOR","->",266],["T_STRING","isQuoteMasked",266],"(",")",["T_WHITESPACE"," ",266],["T_BOOLEAN_AND","&&",266],["T_WHITESPACE"," ",266],"!",["T_VARIABLE","$this",266],["T_OBJECT_OPERATOR","->",266],["T_STRING","_customerSession",266],["T_OBJECT_OPERATOR","->",266],["T_STRING","isLoggedIn",266],"(",")",["T_WHITESPACE"," ",266],["T_BOOLEAN_AND","&&",266],["T_WHITESPACE"," ",266],["T_VARIABLE","$this",266],["T_OBJECT_OPERATOR","->",266],["T_STRING","getQuoteId",266],"(",")",")",["T_WHITESPACE"," ",266],"{",["T_WHITESPACE","\n            ",266],["T_VARIABLE","$quoteId",267],["T_WHITESPACE"," ",267],"=",["T_WHITESPACE"," ",267],["T_VARIABLE","$this",267],["T_OBJECT_OPERATOR","->",267],["T_STRING","getQuoteId",267],"(",")",";",["T_WHITESPACE","\n            ",267],["T_DOC_COMMENT","\/** @var $quoteIdMask \\Magento\\Quote\\Model\\QuoteIdMask *\/",268],["T_WHITESPACE","\n            ",268],["T_VARIABLE","$quoteIdMask",269],["T_WHITESPACE"," ",269],"=",["T_WHITESPACE"," ",269],["T_VARIABLE","$this",269],["T_OBJECT_OPERATOR","->",269],["T_STRING","quoteIdMaskFactory",269],["T_OBJECT_OPERATOR","->",269],["T_STRING","create",269],"(",")",["T_OBJECT_OPERATOR","->",269],["T_STRING","load",269],"(",["T_VARIABLE","$quoteId",269],",",["T_WHITESPACE"," ",269],["T_CONSTANT_ENCAPSED_STRING","'quote_id'",269],")",";",["T_WHITESPACE","\n            ",269],["T_IF","if",270],["T_WHITESPACE"," ",270],"(",["T_VARIABLE","$quoteIdMask",270],["T_OBJECT_OPERATOR","->",270],["T_STRING","getMaskedId",270],"(",")",["T_WHITESPACE"," ",270],["T_IS_IDENTICAL","===",270],["T_WHITESPACE"," ",270],["T_STRING","null",270],")",["T_WHITESPACE"," ",270],"{",["T_WHITESPACE","\n                ",270],["T_VARIABLE","$quoteIdMask",271],["T_OBJECT_OPERATOR","->",271],["T_STRING","setQuoteId",271],"(",["T_VARIABLE","$quoteId",271],")",["T_OBJECT_OPERATOR","->",271],["T_STRING","save",271],"(",")",";",["T_WHITESPACE","\n            ",271],"}",["T_WHITESPACE","\n            ",272],["T_VARIABLE","$this",273],["T_OBJECT_OPERATOR","->",273],["T_STRING","setIsQuoteMasked",273],"(",["T_STRING","true",273],")",";",["T_WHITESPACE","\n        ",273],"}",["T_WHITESPACE","\n\n        ",274],["T_VARIABLE","$remoteAddress",276],["T_WHITESPACE"," ",276],"=",["T_WHITESPACE"," ",276],["T_VARIABLE","$this",276],["T_OBJECT_OPERATOR","->",276],["T_STRING","_remoteAddress",276],["T_OBJECT_OPERATOR","->",276],["T_STRING","getRemoteAddress",276],"(",")",";",["T_WHITESPACE","\n        ",276],["T_IF","if",277],["T_WHITESPACE"," ",277],"(",["T_VARIABLE","$remoteAddress",277],")",["T_WHITESPACE"," ",277],"{",["T_WHITESPACE","\n            ",277],["T_VARIABLE","$this",278],["T_OBJECT_OPERATOR","->",278],["T_STRING","_quote",278],["T_OBJECT_OPERATOR","->",278],["T_STRING","setRemoteIp",278],"(",["T_VARIABLE","$remoteAddress",278],")",";",["T_WHITESPACE","\n            ",278],["T_VARIABLE","$xForwardIp",279],["T_WHITESPACE"," ",279],"=",["T_WHITESPACE"," ",279],["T_VARIABLE","$this",279],["T_OBJECT_OPERATOR","->",279],["T_STRING","request",279],["T_OBJECT_OPERATOR","->",279],["T_STRING","getServer",279],"(",["T_CONSTANT_ENCAPSED_STRING","'HTTP_X_FORWARDED_FOR'",279],")",";",["T_WHITESPACE","\n            ",279],["T_VARIABLE","$this",280],["T_OBJECT_OPERATOR","->",280],["T_STRING","_quote",280],["T_OBJECT_OPERATOR","->",280],["T_STRING","setXForwardedFor",280],"(",["T_VARIABLE","$xForwardIp",280],")",";",["T_WHITESPACE","\n        ",280],"}",["T_WHITESPACE","\n\n        ",281],["T_RETURN","return",283],["T_WHITESPACE"," ",283],["T_VARIABLE","$this",283],["T_OBJECT_OPERATOR","->",283],["T_STRING","_quote",283],";",["T_WHITESPACE","\n    ",283],"}",["T_WHITESPACE","\n\n    ",284],["T_DOC_COMMENT","\/**\n     * @return string\n     * @codeCoverageIgnore\n     *\/",286],["T_WHITESPACE","\n    ",289],["T_PROTECTED","protected",290],["T_WHITESPACE"," ",290],["T_FUNCTION","function",290],["T_WHITESPACE"," ",290],["T_STRING","_getQuoteIdKey",290],"(",")",["T_WHITESPACE","\n    ",290],"{",["T_WHITESPACE","\n        ",291],["T_RETURN","return",292],["T_WHITESPACE"," ",292],["T_CONSTANT_ENCAPSED_STRING","'quote_id_'",292],["T_WHITESPACE"," ",292],".",["T_WHITESPACE"," ",292],["T_VARIABLE","$this",292],["T_OBJECT_OPERATOR","->",292],["T_STRING","_storeManager",292],["T_OBJECT_OPERATOR","->",292],["T_STRING","getStore",292],"(",")",["T_OBJECT_OPERATOR","->",292],["T_STRING","getWebsiteId",292],"(",")",";",["T_WHITESPACE","\n    ",292],"}",["T_WHITESPACE","\n\n    ",293],["T_DOC_COMMENT","\/**\n     * @param int $quoteId\n     * @return void\n     * @codeCoverageIgnore\n     *\/",295],["T_WHITESPACE","\n    ",299],["T_PUBLIC","public",300],["T_WHITESPACE"," ",300],["T_FUNCTION","function",300],["T_WHITESPACE"," ",300],["T_STRING","setQuoteId",300],"(",["T_VARIABLE","$quoteId",300],")",["T_WHITESPACE","\n    ",300],"{",["T_WHITESPACE","\n        ",301],["T_VARIABLE","$this",302],["T_OBJECT_OPERATOR","->",302],["T_STRING","storage",302],["T_OBJECT_OPERATOR","->",302],["T_STRING","setData",302],"(",["T_VARIABLE","$this",302],["T_OBJECT_OPERATOR","->",302],["T_STRING","_getQuoteIdKey",302],"(",")",",",["T_WHITESPACE"," ",302],["T_VARIABLE","$quoteId",302],")",";",["T_WHITESPACE","\n    ",302],"}",["T_WHITESPACE","\n\n    ",303],["T_DOC_COMMENT","\/**\n     * @return int\n     * @codeCoverageIgnore\n     *\/",305],["T_WHITESPACE","\n    ",308],["T_PUBLIC","public",309],["T_WHITESPACE"," ",309],["T_FUNCTION","function",309],["T_WHITESPACE"," ",309],["T_STRING","getQuoteId",309],"(",")",["T_WHITESPACE","\n    ",309],"{",["T_WHITESPACE","\n        ",310],["T_RETURN","return",311],["T_WHITESPACE"," ",311],["T_VARIABLE","$this",311],["T_OBJECT_OPERATOR","->",311],["T_STRING","getData",311],"(",["T_VARIABLE","$this",311],["T_OBJECT_OPERATOR","->",311],["T_STRING","_getQuoteIdKey",311],"(",")",")",";",["T_WHITESPACE","\n    ",311],"}",["T_WHITESPACE","\n\n    ",312],["T_DOC_COMMENT","\/**\n     * Load data for customer quote and merge with current quote\n     *\n     * @return $this\n     *\/",314],["T_WHITESPACE","\n    ",318],["T_PUBLIC","public",319],["T_WHITESPACE"," ",319],["T_FUNCTION","function",319],["T_WHITESPACE"," ",319],["T_STRING","loadCustomerQuote",319],"(",")",["T_WHITESPACE","\n    ",319],"{",["T_WHITESPACE","\n        ",320],["T_IF","if",321],["T_WHITESPACE"," ",321],"(","!",["T_VARIABLE","$this",321],["T_OBJECT_OPERATOR","->",321],["T_STRING","_customerSession",321],["T_OBJECT_OPERATOR","->",321],["T_STRING","getCustomerId",321],"(",")",")",["T_WHITESPACE"," ",321],"{",["T_WHITESPACE","\n            ",321],["T_RETURN","return",322],["T_WHITESPACE"," ",322],["T_VARIABLE","$this",322],";",["T_WHITESPACE","\n        ",322],"}",["T_WHITESPACE","\n\n        ",323],["T_VARIABLE","$this",325],["T_OBJECT_OPERATOR","->",325],["T_STRING","_eventManager",325],["T_OBJECT_OPERATOR","->",325],["T_STRING","dispatch",325],"(",["T_CONSTANT_ENCAPSED_STRING","'load_customer_quote_before'",325],",",["T_WHITESPACE"," ",325],"[",["T_CONSTANT_ENCAPSED_STRING","'checkout_session'",325],["T_WHITESPACE"," ",325],["T_DOUBLE_ARROW","=>",325],["T_WHITESPACE"," ",325],["T_VARIABLE","$this",325],"]",")",";",["T_WHITESPACE","\n\n        ",325],["T_TRY","try",327],["T_WHITESPACE"," ",327],"{",["T_WHITESPACE","\n            ",327],["T_VARIABLE","$customerQuote",328],["T_WHITESPACE"," ",328],"=",["T_WHITESPACE"," ",328],["T_VARIABLE","$this",328],["T_OBJECT_OPERATOR","->",328],["T_STRING","quoteRepository",328],["T_OBJECT_OPERATOR","->",328],["T_STRING","getForCustomer",328],"(",["T_VARIABLE","$this",328],["T_OBJECT_OPERATOR","->",328],["T_STRING","_customerSession",328],["T_OBJECT_OPERATOR","->",328],["T_STRING","getCustomerId",328],"(",")",")",";",["T_WHITESPACE","\n        ",328],"}",["T_WHITESPACE"," ",329],["T_CATCH","catch",329],["T_WHITESPACE"," ",329],"(",["T_NS_SEPARATOR","\\",329],["T_STRING","Magento",329],["T_NS_SEPARATOR","\\",329],["T_STRING","Framework",329],["T_NS_SEPARATOR","\\",329],["T_STRING","Exception",329],["T_NS_SEPARATOR","\\",329],["T_STRING","NoSuchEntityException",329],["T_WHITESPACE"," ",329],["T_VARIABLE","$e",329],")",["T_WHITESPACE"," ",329],"{",["T_WHITESPACE","\n            ",329],["T_VARIABLE","$customerQuote",330],["T_WHITESPACE"," ",330],"=",["T_WHITESPACE"," ",330],["T_VARIABLE","$this",330],["T_OBJECT_OPERATOR","->",330],["T_STRING","quoteFactory",330],["T_OBJECT_OPERATOR","->",330],["T_STRING","create",330],"(",")",";",["T_WHITESPACE","\n        ",330],"}",["T_WHITESPACE","\n        ",331],["T_VARIABLE","$customerQuote",332],["T_OBJECT_OPERATOR","->",332],["T_STRING","setStoreId",332],"(",["T_VARIABLE","$this",332],["T_OBJECT_OPERATOR","->",332],["T_STRING","_storeManager",332],["T_OBJECT_OPERATOR","->",332],["T_STRING","getStore",332],"(",")",["T_OBJECT_OPERATOR","->",332],["T_STRING","getId",332],"(",")",")",";",["T_WHITESPACE","\n\n        ",332],["T_IF","if",334],["T_WHITESPACE"," ",334],"(",["T_VARIABLE","$customerQuote",334],["T_OBJECT_OPERATOR","->",334],["T_STRING","getId",334],"(",")",["T_WHITESPACE"," ",334],["T_BOOLEAN_AND","&&",334],["T_WHITESPACE"," ",334],["T_VARIABLE","$this",334],["T_OBJECT_OPERATOR","->",334],["T_STRING","getQuoteId",334],"(",")",["T_WHITESPACE"," ",334],["T_IS_NOT_EQUAL","!=",334],["T_WHITESPACE"," ",334],["T_VARIABLE","$customerQuote",334],["T_OBJECT_OPERATOR","->",334],["T_STRING","getId",334],"(",")",")",["T_WHITESPACE"," ",334],"{",["T_WHITESPACE","\n            ",334],["T_IF","if",335],["T_WHITESPACE"," ",335],"(",["T_VARIABLE","$this",335],["T_OBJECT_OPERATOR","->",335],["T_STRING","getQuoteId",335],"(",")",")",["T_WHITESPACE"," ",335],"{",["T_WHITESPACE","\n                ",335],["T_VARIABLE","$this",336],["T_OBJECT_OPERATOR","->",336],["T_STRING","quoteRepository",336],["T_OBJECT_OPERATOR","->",336],["T_STRING","save",336],"(",["T_WHITESPACE","\n                    ",336],["T_VARIABLE","$customerQuote",337],["T_OBJECT_OPERATOR","->",337],["T_STRING","merge",337],"(",["T_VARIABLE","$this",337],["T_OBJECT_OPERATOR","->",337],["T_STRING","getQuote",337],"(",")",")",["T_OBJECT_OPERATOR","->",337],["T_STRING","collectTotals",337],"(",")",["T_WHITESPACE","\n                ",337],")",";",["T_WHITESPACE","\n            ",338],"}",["T_WHITESPACE","\n\n            ",339],["T_VARIABLE","$this",341],["T_OBJECT_OPERATOR","->",341],["T_STRING","setQuoteId",341],"(",["T_VARIABLE","$customerQuote",341],["T_OBJECT_OPERATOR","->",341],["T_STRING","getId",341],"(",")",")",";",["T_WHITESPACE","\n\n            ",341],["T_IF","if",343],["T_WHITESPACE"," ",343],"(",["T_VARIABLE","$this",343],["T_OBJECT_OPERATOR","->",343],["T_STRING","_quote",343],")",["T_WHITESPACE"," ",343],"{",["T_WHITESPACE","\n                ",343],["T_VARIABLE","$this",344],["T_OBJECT_OPERATOR","->",344],["T_STRING","quoteRepository",344],["T_OBJECT_OPERATOR","->",344],["T_STRING","delete",344],"(",["T_VARIABLE","$this",344],["T_OBJECT_OPERATOR","->",344],["T_STRING","_quote",344],")",";",["T_WHITESPACE","\n            ",344],"}",["T_WHITESPACE","\n            ",345],["T_VARIABLE","$this",346],["T_OBJECT_OPERATOR","->",346],["T_STRING","_quote",346],["T_WHITESPACE"," ",346],"=",["T_WHITESPACE"," ",346],["T_VARIABLE","$customerQuote",346],";",["T_WHITESPACE","\n        ",346],"}",["T_WHITESPACE"," ",347],["T_ELSE","else",347],["T_WHITESPACE"," ",347],"{",["T_WHITESPACE","\n            ",347],["T_VARIABLE","$this",348],["T_OBJECT_OPERATOR","->",348],["T_STRING","getQuote",348],"(",")",["T_OBJECT_OPERATOR","->",348],["T_STRING","getBillingAddress",348],"(",")",";",["T_WHITESPACE","\n            ",348],["T_VARIABLE","$this",349],["T_OBJECT_OPERATOR","->",349],["T_STRING","getQuote",349],"(",")",["T_OBJECT_OPERATOR","->",349],["T_STRING","getShippingAddress",349],"(",")",";",["T_WHITESPACE","\n            ",349],["T_VARIABLE","$this",350],["T_OBJECT_OPERATOR","->",350],["T_STRING","getQuote",350],"(",")",["T_OBJECT_OPERATOR","->",350],["T_STRING","setCustomer",350],"(",["T_VARIABLE","$this",350],["T_OBJECT_OPERATOR","->",350],["T_STRING","_customerSession",350],["T_OBJECT_OPERATOR","->",350],["T_STRING","getCustomerDataObject",350],"(",")",")",["T_WHITESPACE","\n                ",350],["T_OBJECT_OPERATOR","->",351],["T_STRING","setTotalsCollectedFlag",351],"(",["T_STRING","false",351],")",["T_WHITESPACE","\n                ",351],["T_OBJECT_OPERATOR","->",352],["T_STRING","collectTotals",352],"(",")",";",["T_WHITESPACE","\n            ",352],["T_VARIABLE","$this",353],["T_OBJECT_OPERATOR","->",353],["T_STRING","quoteRepository",353],["T_OBJECT_OPERATOR","->",353],["T_STRING","save",353],"(",["T_VARIABLE","$this",353],["T_OBJECT_OPERATOR","->",353],["T_STRING","getQuote",353],"(",")",")",";",["T_WHITESPACE","\n        ",353],"}",["T_WHITESPACE","\n        ",354],["T_RETURN","return",355],["T_WHITESPACE"," ",355],["T_VARIABLE","$this",355],";",["T_WHITESPACE","\n    ",355],"}",["T_WHITESPACE","\n\n    ",356],["T_DOC_COMMENT","\/**\n     * @param string $step\n     * @param array|string $data\n     * @param bool|string|null $value\n     * @return $this\n     *\/",358],["T_WHITESPACE","\n    ",363],["T_PUBLIC","public",364],["T_WHITESPACE"," ",364],["T_FUNCTION","function",364],["T_WHITESPACE"," ",364],["T_STRING","setStepData",364],"(",["T_VARIABLE","$step",364],",",["T_WHITESPACE"," ",364],["T_VARIABLE","$data",364],",",["T_WHITESPACE"," ",364],["T_VARIABLE","$value",364],["T_WHITESPACE"," ",364],"=",["T_WHITESPACE"," ",364],["T_STRING","null",364],")",["T_WHITESPACE","\n    ",364],"{",["T_WHITESPACE","\n        ",365],["T_VARIABLE","$steps",366],["T_WHITESPACE"," ",366],"=",["T_WHITESPACE"," ",366],["T_VARIABLE","$this",366],["T_OBJECT_OPERATOR","->",366],["T_STRING","getSteps",366],"(",")",";",["T_WHITESPACE","\n        ",366],["T_IF","if",367],["T_WHITESPACE"," ",367],"(",["T_VARIABLE","$value",367],["T_WHITESPACE"," ",367],["T_IS_IDENTICAL","===",367],["T_WHITESPACE"," ",367],["T_STRING","null",367],")",["T_WHITESPACE"," ",367],"{",["T_WHITESPACE","\n            ",367],["T_IF","if",368],["T_WHITESPACE"," ",368],"(",["T_STRING","is_array",368],"(",["T_VARIABLE","$data",368],")",")",["T_WHITESPACE"," ",368],"{",["T_WHITESPACE","\n                ",368],["T_VARIABLE","$steps",369],"[",["T_VARIABLE","$step",369],"]",["T_WHITESPACE"," ",369],"=",["T_WHITESPACE"," ",369],["T_VARIABLE","$data",369],";",["T_WHITESPACE","\n            ",369],"}",["T_WHITESPACE","\n        ",370],"}",["T_WHITESPACE"," ",371],["T_ELSE","else",371],["T_WHITESPACE"," ",371],"{",["T_WHITESPACE","\n            ",371],["T_IF","if",372],["T_WHITESPACE"," ",372],"(","!",["T_ISSET","isset",372],"(",["T_VARIABLE","$steps",372],"[",["T_VARIABLE","$step",372],"]",")",")",["T_WHITESPACE"," ",372],"{",["T_WHITESPACE","\n                ",372],["T_VARIABLE","$steps",373],"[",["T_VARIABLE","$step",373],"]",["T_WHITESPACE"," ",373],"=",["T_WHITESPACE"," ",373],"[","]",";",["T_WHITESPACE","\n            ",373],"}",["T_WHITESPACE","\n            ",374],["T_IF","if",375],["T_WHITESPACE"," ",375],"(",["T_STRING","is_string",375],"(",["T_VARIABLE","$data",375],")",")",["T_WHITESPACE"," ",375],"{",["T_WHITESPACE","\n                ",375],["T_VARIABLE","$steps",376],"[",["T_VARIABLE","$step",376],"]","[",["T_VARIABLE","$data",376],"]",["T_WHITESPACE"," ",376],"=",["T_WHITESPACE"," ",376],["T_VARIABLE","$value",376],";",["T_WHITESPACE","\n            ",376],"}",["T_WHITESPACE","\n        ",377],"}",["T_WHITESPACE","\n        ",378],["T_VARIABLE","$this",379],["T_OBJECT_OPERATOR","->",379],["T_STRING","setSteps",379],"(",["T_VARIABLE","$steps",379],")",";",["T_WHITESPACE","\n\n        ",379],["T_RETURN","return",381],["T_WHITESPACE"," ",381],["T_VARIABLE","$this",381],";",["T_WHITESPACE","\n    ",381],"}",["T_WHITESPACE","\n\n    ",382],["T_DOC_COMMENT","\/**\n     * @param string|null $step\n     * @param string|null $data\n     * @return array|string|bool\n     *\/",384],["T_WHITESPACE","\n    ",388],["T_PUBLIC","public",389],["T_WHITESPACE"," ",389],["T_FUNCTION","function",389],["T_WHITESPACE"," ",389],["T_STRING","getStepData",389],"(",["T_VARIABLE","$step",389],["T_WHITESPACE"," ",389],"=",["T_WHITESPACE"," ",389],["T_STRING","null",389],",",["T_WHITESPACE"," ",389],["T_VARIABLE","$data",389],["T_WHITESPACE"," ",389],"=",["T_WHITESPACE"," ",389],["T_STRING","null",389],")",["T_WHITESPACE","\n    ",389],"{",["T_WHITESPACE","\n        ",390],["T_VARIABLE","$steps",391],["T_WHITESPACE"," ",391],"=",["T_WHITESPACE"," ",391],["T_VARIABLE","$this",391],["T_OBJECT_OPERATOR","->",391],["T_STRING","getSteps",391],"(",")",";",["T_WHITESPACE","\n        ",391],["T_IF","if",392],["T_WHITESPACE"," ",392],"(",["T_VARIABLE","$step",392],["T_WHITESPACE"," ",392],["T_IS_IDENTICAL","===",392],["T_WHITESPACE"," ",392],["T_STRING","null",392],")",["T_WHITESPACE"," ",392],"{",["T_WHITESPACE","\n            ",392],["T_RETURN","return",393],["T_WHITESPACE"," ",393],["T_VARIABLE","$steps",393],";",["T_WHITESPACE","\n        ",393],"}",["T_WHITESPACE","\n        ",394],["T_IF","if",395],["T_WHITESPACE"," ",395],"(","!",["T_ISSET","isset",395],"(",["T_VARIABLE","$steps",395],"[",["T_VARIABLE","$step",395],"]",")",")",["T_WHITESPACE"," ",395],"{",["T_WHITESPACE","\n            ",395],["T_RETURN","return",396],["T_WHITESPACE"," ",396],["T_STRING","false",396],";",["T_WHITESPACE","\n        ",396],"}",["T_WHITESPACE","\n        ",397],["T_IF","if",398],["T_WHITESPACE"," ",398],"(",["T_VARIABLE","$data",398],["T_WHITESPACE"," ",398],["T_IS_IDENTICAL","===",398],["T_WHITESPACE"," ",398],["T_STRING","null",398],")",["T_WHITESPACE"," ",398],"{",["T_WHITESPACE","\n            ",398],["T_RETURN","return",399],["T_WHITESPACE"," ",399],["T_VARIABLE","$steps",399],"[",["T_VARIABLE","$step",399],"]",";",["T_WHITESPACE","\n        ",399],"}",["T_WHITESPACE","\n        ",400],["T_IF","if",401],["T_WHITESPACE"," ",401],"(","!",["T_STRING","is_string",401],"(",["T_VARIABLE","$data",401],")",["T_WHITESPACE"," ",401],["T_BOOLEAN_OR","||",401],["T_WHITESPACE"," ",401],"!",["T_ISSET","isset",401],"(",["T_VARIABLE","$steps",401],"[",["T_VARIABLE","$step",401],"]","[",["T_VARIABLE","$data",401],"]",")",")",["T_WHITESPACE"," ",401],"{",["T_WHITESPACE","\n            ",401],["T_RETURN","return",402],["T_WHITESPACE"," ",402],["T_STRING","false",402],";",["T_WHITESPACE","\n        ",402],"}",["T_WHITESPACE","\n        ",403],["T_RETURN","return",404],["T_WHITESPACE"," ",404],["T_VARIABLE","$steps",404],"[",["T_VARIABLE","$step",404],"]","[",["T_VARIABLE","$data",404],"]",";",["T_WHITESPACE","\n    ",404],"}",["T_WHITESPACE","\n\n    ",405],["T_DOC_COMMENT","\/**\n     * Destroy\/end a session\n     * Unset all data associated with object\n     *\n     * @return $this\n     *\/",407],["T_WHITESPACE","\n    ",412],["T_PUBLIC","public",413],["T_WHITESPACE"," ",413],["T_FUNCTION","function",413],["T_WHITESPACE"," ",413],["T_STRING","clearQuote",413],"(",")",["T_WHITESPACE","\n    ",413],"{",["T_WHITESPACE","\n        ",414],["T_VARIABLE","$this",415],["T_OBJECT_OPERATOR","->",415],["T_STRING","_eventManager",415],["T_OBJECT_OPERATOR","->",415],["T_STRING","dispatch",415],"(",["T_CONSTANT_ENCAPSED_STRING","'checkout_quote_destroy'",415],",",["T_WHITESPACE"," ",415],"[",["T_CONSTANT_ENCAPSED_STRING","'quote'",415],["T_WHITESPACE"," ",415],["T_DOUBLE_ARROW","=>",415],["T_WHITESPACE"," ",415],["T_VARIABLE","$this",415],["T_OBJECT_OPERATOR","->",415],["T_STRING","getQuote",415],"(",")","]",")",";",["T_WHITESPACE","\n        ",415],["T_VARIABLE","$this",416],["T_OBJECT_OPERATOR","->",416],["T_STRING","_quote",416],["T_WHITESPACE"," ",416],"=",["T_WHITESPACE"," ",416],["T_STRING","null",416],";",["T_WHITESPACE","\n        ",416],["T_VARIABLE","$this",417],["T_OBJECT_OPERATOR","->",417],["T_STRING","setQuoteId",417],"(",["T_STRING","null",417],")",";",["T_WHITESPACE","\n        ",417],["T_VARIABLE","$this",418],["T_OBJECT_OPERATOR","->",418],["T_STRING","setLastSuccessQuoteId",418],"(",["T_STRING","null",418],")",";",["T_WHITESPACE","\n        ",418],["T_RETURN","return",419],["T_WHITESPACE"," ",419],["T_VARIABLE","$this",419],";",["T_WHITESPACE","\n    ",419],"}",["T_WHITESPACE","\n\n    ",420],["T_DOC_COMMENT","\/**\n     * Unset all session data and quote\n     *\n     * @return $this\n     *\/",422],["T_WHITESPACE","\n    ",426],["T_PUBLIC","public",427],["T_WHITESPACE"," ",427],["T_FUNCTION","function",427],["T_WHITESPACE"," ",427],["T_STRING","clearStorage",427],"(",")",["T_WHITESPACE","\n    ",427],"{",["T_WHITESPACE","\n        ",428],["T_STRING","parent",429],["T_DOUBLE_COLON","::",429],["T_STRING","clearStorage",429],"(",")",";",["T_WHITESPACE","\n        ",429],["T_VARIABLE","$this",430],["T_OBJECT_OPERATOR","->",430],["T_STRING","_quote",430],["T_WHITESPACE"," ",430],"=",["T_WHITESPACE"," ",430],["T_STRING","null",430],";",["T_WHITESPACE","\n        ",430],["T_RETURN","return",431],["T_WHITESPACE"," ",431],["T_VARIABLE","$this",431],";",["T_WHITESPACE","\n    ",431],"}",["T_WHITESPACE","\n\n    ",432],["T_DOC_COMMENT","\/**\n     * Clear misc checkout parameters\n     *\n     * @return void\n     *\/",434],["T_WHITESPACE","\n    ",438],["T_PUBLIC","public",439],["T_WHITESPACE"," ",439],["T_FUNCTION","function",439],["T_WHITESPACE"," ",439],["T_STRING","clearHelperData",439],"(",")",["T_WHITESPACE","\n    ",439],"{",["T_WHITESPACE","\n        ",440],["T_VARIABLE","$this",441],["T_OBJECT_OPERATOR","->",441],["T_STRING","setRedirectUrl",441],"(",["T_STRING","null",441],")",["T_OBJECT_OPERATOR","->",441],["T_STRING","setLastOrderId",441],"(",["T_STRING","null",441],")",["T_OBJECT_OPERATOR","->",441],["T_STRING","setLastRealOrderId",441],"(",["T_STRING","null",441],")",["T_OBJECT_OPERATOR","->",441],["T_STRING","setAdditionalMessages",441],"(",["T_STRING","null",441],")",";",["T_WHITESPACE","\n    ",441],"}",["T_WHITESPACE","\n\n    ",442],["T_DOC_COMMENT","\/**\n     * @return $this\n     * @codeCoverageIgnore\n     *\/",444],["T_WHITESPACE","\n    ",447],["T_PUBLIC","public",448],["T_WHITESPACE"," ",448],["T_FUNCTION","function",448],["T_WHITESPACE"," ",448],["T_STRING","resetCheckout",448],"(",")",["T_WHITESPACE","\n    ",448],"{",["T_WHITESPACE","\n        ",449],["T_VARIABLE","$this",450],["T_OBJECT_OPERATOR","->",450],["T_STRING","setCheckoutState",450],"(",["T_STRING","self",450],["T_DOUBLE_COLON","::",450],["T_STRING","CHECKOUT_STATE_BEGIN",450],")",";",["T_WHITESPACE","\n        ",450],["T_RETURN","return",451],["T_WHITESPACE"," ",451],["T_VARIABLE","$this",451],";",["T_WHITESPACE","\n    ",451],"}",["T_WHITESPACE","\n\n    ",452],["T_DOC_COMMENT","\/**\n     * @param Quote $quote\n     * @return $this\n     *\/",454],["T_WHITESPACE","\n    ",457],["T_PUBLIC","public",458],["T_WHITESPACE"," ",458],["T_FUNCTION","function",458],["T_WHITESPACE"," ",458],["T_STRING","replaceQuote",458],"(",["T_VARIABLE","$quote",458],")",["T_WHITESPACE","\n    ",458],"{",["T_WHITESPACE","\n        ",459],["T_VARIABLE","$this",460],["T_OBJECT_OPERATOR","->",460],["T_STRING","_quote",460],["T_WHITESPACE"," ",460],"=",["T_WHITESPACE"," ",460],["T_VARIABLE","$quote",460],";",["T_WHITESPACE","\n        ",460],["T_VARIABLE","$this",461],["T_OBJECT_OPERATOR","->",461],["T_STRING","setQuoteId",461],"(",["T_VARIABLE","$quote",461],["T_OBJECT_OPERATOR","->",461],["T_STRING","getId",461],"(",")",")",";",["T_WHITESPACE","\n        ",461],["T_RETURN","return",462],["T_WHITESPACE"," ",462],["T_VARIABLE","$this",462],";",["T_WHITESPACE","\n    ",462],"}",["T_WHITESPACE","\n\n    ",463],["T_DOC_COMMENT","\/**\n     * Get order instance based on last order ID\n     *\n     * @return \\Magento\\Sales\\Model\\Order\n     *\/",465],["T_WHITESPACE","\n    ",469],["T_PUBLIC","public",470],["T_WHITESPACE"," ",470],["T_FUNCTION","function",470],["T_WHITESPACE"," ",470],["T_STRING","getLastRealOrder",470],"(",")",["T_WHITESPACE","\n    ",470],"{",["T_WHITESPACE","\n        ",471],["T_VARIABLE","$orderId",472],["T_WHITESPACE"," ",472],"=",["T_WHITESPACE"," ",472],["T_VARIABLE","$this",472],["T_OBJECT_OPERATOR","->",472],["T_STRING","getLastRealOrderId",472],"(",")",";",["T_WHITESPACE","\n        ",472],["T_IF","if",473],["T_WHITESPACE"," ",473],"(",["T_VARIABLE","$this",473],["T_OBJECT_OPERATOR","->",473],["T_STRING","_order",473],["T_WHITESPACE"," ",473],["T_IS_NOT_IDENTICAL","!==",473],["T_WHITESPACE"," ",473],["T_STRING","null",473],["T_WHITESPACE"," ",473],["T_BOOLEAN_AND","&&",473],["T_WHITESPACE"," ",473],["T_VARIABLE","$orderId",473],["T_WHITESPACE"," ",473],["T_IS_EQUAL","==",473],["T_WHITESPACE"," ",473],["T_VARIABLE","$this",473],["T_OBJECT_OPERATOR","->",473],["T_STRING","_order",473],["T_OBJECT_OPERATOR","->",473],["T_STRING","getIncrementId",473],"(",")",")",["T_WHITESPACE"," ",473],"{",["T_WHITESPACE","\n            ",473],["T_RETURN","return",474],["T_WHITESPACE"," ",474],["T_VARIABLE","$this",474],["T_OBJECT_OPERATOR","->",474],["T_STRING","_order",474],";",["T_WHITESPACE","\n        ",474],"}",["T_WHITESPACE","\n        ",475],["T_VARIABLE","$this",476],["T_OBJECT_OPERATOR","->",476],["T_STRING","_order",476],["T_WHITESPACE"," ",476],"=",["T_WHITESPACE"," ",476],["T_VARIABLE","$this",476],["T_OBJECT_OPERATOR","->",476],["T_STRING","_orderFactory",476],["T_OBJECT_OPERATOR","->",476],["T_STRING","create",476],"(",")",";",["T_WHITESPACE","\n        ",476],["T_IF","if",477],["T_WHITESPACE"," ",477],"(",["T_VARIABLE","$orderId",477],")",["T_WHITESPACE"," ",477],"{",["T_WHITESPACE","\n            ",477],["T_VARIABLE","$this",478],["T_OBJECT_OPERATOR","->",478],["T_STRING","_order",478],["T_OBJECT_OPERATOR","->",478],["T_STRING","loadByIncrementId",478],"(",["T_VARIABLE","$orderId",478],")",";",["T_WHITESPACE","\n        ",478],"}",["T_WHITESPACE","\n        ",479],["T_RETURN","return",480],["T_WHITESPACE"," ",480],["T_VARIABLE","$this",480],["T_OBJECT_OPERATOR","->",480],["T_STRING","_order",480],";",["T_WHITESPACE","\n    ",480],"}",["T_WHITESPACE","\n\n    ",481],["T_DOC_COMMENT","\/**\n     * Restore last active quote\n     *\n     * @return bool True if quote restored successfully, false otherwise\n     *\/",483],["T_WHITESPACE","\n    ",487],["T_PUBLIC","public",488],["T_WHITESPACE"," ",488],["T_FUNCTION","function",488],["T_WHITESPACE"," ",488],["T_STRING","restoreQuote",488],"(",")",["T_WHITESPACE","\n    ",488],"{",["T_WHITESPACE","\n        ",489],["T_DOC_COMMENT","\/** @var \\Magento\\Sales\\Model\\Order $order *\/",490],["T_WHITESPACE","\n        ",490],["T_VARIABLE","$order",491],["T_WHITESPACE"," ",491],"=",["T_WHITESPACE"," ",491],["T_VARIABLE","$this",491],["T_OBJECT_OPERATOR","->",491],["T_STRING","getLastRealOrder",491],"(",")",";",["T_WHITESPACE","\n        ",491],["T_IF","if",492],["T_WHITESPACE"," ",492],"(",["T_VARIABLE","$order",492],["T_OBJECT_OPERATOR","->",492],["T_STRING","getId",492],"(",")",")",["T_WHITESPACE"," ",492],"{",["T_WHITESPACE","\n            ",492],["T_TRY","try",493],["T_WHITESPACE"," ",493],"{",["T_WHITESPACE","\n                ",493],["T_VARIABLE","$quote",494],["T_WHITESPACE"," ",494],"=",["T_WHITESPACE"," ",494],["T_VARIABLE","$this",494],["T_OBJECT_OPERATOR","->",494],["T_STRING","quoteRepository",494],["T_OBJECT_OPERATOR","->",494],["T_STRING","get",494],"(",["T_VARIABLE","$order",494],["T_OBJECT_OPERATOR","->",494],["T_STRING","getQuoteId",494],"(",")",")",";",["T_WHITESPACE","\n                ",494],["T_VARIABLE","$quote",495],["T_OBJECT_OPERATOR","->",495],["T_STRING","setIsActive",495],"(",["T_LNUMBER","1",495],")",["T_OBJECT_OPERATOR","->",495],["T_STRING","setReservedOrderId",495],"(",["T_STRING","null",495],")",";",["T_WHITESPACE","\n                ",495],["T_VARIABLE","$this",496],["T_OBJECT_OPERATOR","->",496],["T_STRING","quoteRepository",496],["T_OBJECT_OPERATOR","->",496],["T_STRING","save",496],"(",["T_VARIABLE","$quote",496],")",";",["T_WHITESPACE","\n                ",496],["T_VARIABLE","$this",497],["T_OBJECT_OPERATOR","->",497],["T_STRING","replaceQuote",497],"(",["T_VARIABLE","$quote",497],")",["T_OBJECT_OPERATOR","->",497],["T_STRING","unsLastRealOrderId",497],"(",")",";",["T_WHITESPACE","\n                ",497],["T_VARIABLE","$this",498],["T_OBJECT_OPERATOR","->",498],["T_STRING","_eventManager",498],["T_OBJECT_OPERATOR","->",498],["T_STRING","dispatch",498],"(",["T_CONSTANT_ENCAPSED_STRING","'restore_quote'",498],",",["T_WHITESPACE"," ",498],"[",["T_CONSTANT_ENCAPSED_STRING","'order'",498],["T_WHITESPACE"," ",498],["T_DOUBLE_ARROW","=>",498],["T_WHITESPACE"," ",498],["T_VARIABLE","$order",498],",",["T_WHITESPACE"," ",498],["T_CONSTANT_ENCAPSED_STRING","'quote'",498],["T_WHITESPACE"," ",498],["T_DOUBLE_ARROW","=>",498],["T_WHITESPACE"," ",498],["T_VARIABLE","$quote",498],"]",")",";",["T_WHITESPACE","\n                ",498],["T_RETURN","return",499],["T_WHITESPACE"," ",499],["T_STRING","true",499],";",["T_WHITESPACE","\n            ",499],"}",["T_WHITESPACE"," ",500],["T_CATCH","catch",500],["T_WHITESPACE"," ",500],"(",["T_NS_SEPARATOR","\\",500],["T_STRING","Magento",500],["T_NS_SEPARATOR","\\",500],["T_STRING","Framework",500],["T_NS_SEPARATOR","\\",500],["T_STRING","Exception",500],["T_NS_SEPARATOR","\\",500],["T_STRING","NoSuchEntityException",500],["T_WHITESPACE"," ",500],["T_VARIABLE","$e",500],")",["T_WHITESPACE"," ",500],"{",["T_WHITESPACE","\n            ",500],"}",["T_WHITESPACE","\n        ",501],"}",["T_WHITESPACE","\n        ",502],["T_RETURN","return",503],["T_WHITESPACE"," ",503],["T_STRING","false",503],";",["T_WHITESPACE","\n    ",503],"}",["T_WHITESPACE","\n\n    ",504],["T_DOC_COMMENT","\/**\n     * @param $isQuoteMasked bool\n     * @return void\n     * @codeCoverageIgnore\n     *\/",506],["T_WHITESPACE","\n    ",510],["T_PROTECTED","protected",511],["T_WHITESPACE"," ",511],["T_FUNCTION","function",511],["T_WHITESPACE"," ",511],["T_STRING","setIsQuoteMasked",511],"(",["T_VARIABLE","$isQuoteMasked",511],")",["T_WHITESPACE","\n    ",511],"{",["T_WHITESPACE","\n        ",512],["T_VARIABLE","$this",513],["T_OBJECT_OPERATOR","->",513],["T_STRING","isQuoteMasked",513],["T_WHITESPACE"," ",513],"=",["T_WHITESPACE"," ",513],["T_VARIABLE","$isQuoteMasked",513],";",["T_WHITESPACE","\n    ",513],"}",["T_WHITESPACE","\n\n    ",514],["T_DOC_COMMENT","\/**\n     * @return bool|null\n     * @codeCoverageIgnore\n     *\/",516],["T_WHITESPACE","\n    ",519],["T_PROTECTED","protected",520],["T_WHITESPACE"," ",520],["T_FUNCTION","function",520],["T_WHITESPACE"," ",520],["T_STRING","isQuoteMasked",520],"(",")",["T_WHITESPACE","\n    ",520],"{",["T_WHITESPACE","\n        ",521],["T_RETURN","return",522],["T_WHITESPACE"," ",522],["T_VARIABLE","$this",522],["T_OBJECT_OPERATOR","->",522],["T_STRING","isQuoteMasked",522],";",["T_WHITESPACE","\n    ",522],"}",["T_WHITESPACE","\n",523],"}",["T_WHITESPACE","\n",524]]
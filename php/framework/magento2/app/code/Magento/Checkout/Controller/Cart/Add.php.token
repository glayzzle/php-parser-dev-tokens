[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n *\n * Copyright \u00c2\u00a9 2013-2017 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n *\/",2],["T_WHITESPACE","\n",6],["T_NAMESPACE","namespace",7],["T_WHITESPACE"," ",7],["T_STRING","Magento",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Checkout",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Controller",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Cart",7],";",["T_WHITESPACE","\n\n",7],["T_USE","use",9],["T_WHITESPACE"," ",9],["T_STRING","Magento",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Catalog",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Api",9],["T_NS_SEPARATOR","\\",9],["T_STRING","ProductRepositoryInterface",9],";",["T_WHITESPACE","\n",9],["T_USE","use",10],["T_WHITESPACE"," ",10],["T_STRING","Magento",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Checkout",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Model",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Cart",10],["T_WHITESPACE"," ",10],["T_AS","as",10],["T_WHITESPACE"," ",10],["T_STRING","CustomerCart",10],";",["T_WHITESPACE","\n",10],["T_USE","use",11],["T_WHITESPACE"," ",11],["T_STRING","Magento",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Framework",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Exception",11],["T_NS_SEPARATOR","\\",11],["T_STRING","NoSuchEntityException",11],";",["T_WHITESPACE","\n\n",11],["T_DOC_COMMENT","\/**\n * @SuppressWarnings(PHPMD.CouplingBetweenObjects)\n *\/",13],["T_WHITESPACE","\n",15],["T_CLASS","class",16],["T_WHITESPACE"," ",16],["T_STRING","Add",16],["T_WHITESPACE"," ",16],["T_EXTENDS","extends",16],["T_WHITESPACE"," ",16],["T_NS_SEPARATOR","\\",16],["T_STRING","Magento",16],["T_NS_SEPARATOR","\\",16],["T_STRING","Checkout",16],["T_NS_SEPARATOR","\\",16],["T_STRING","Controller",16],["T_NS_SEPARATOR","\\",16],["T_STRING","Cart",16],["T_WHITESPACE","\n",16],"{",["T_WHITESPACE","\n    ",17],["T_DOC_COMMENT","\/**\n     * @var ProductRepositoryInterface\n     *\/",18],["T_WHITESPACE","\n    ",20],["T_PROTECTED","protected",21],["T_WHITESPACE"," ",21],["T_VARIABLE","$productRepository",21],";",["T_WHITESPACE","\n\n    ",21],["T_DOC_COMMENT","\/**\n     * @param \\Magento\\Framework\\App\\Action\\Context $context\n     * @param \\Magento\\Framework\\App\\Config\\ScopeConfigInterface $scopeConfig\n     * @param \\Magento\\Checkout\\Model\\Session $checkoutSession\n     * @param \\Magento\\Store\\Model\\StoreManagerInterface $storeManager\n     * @param \\Magento\\Framework\\Data\\Form\\FormKey\\Validator $formKeyValidator\n     * @param CustomerCart $cart\n     * @param ProductRepositoryInterface $productRepository\n     * @codeCoverageIgnore\n     *\/",23],["T_WHITESPACE","\n    ",32],["T_PUBLIC","public",33],["T_WHITESPACE"," ",33],["T_FUNCTION","function",33],["T_WHITESPACE"," ",33],["T_STRING","__construct",33],"(",["T_WHITESPACE","\n        ",33],["T_NS_SEPARATOR","\\",34],["T_STRING","Magento",34],["T_NS_SEPARATOR","\\",34],["T_STRING","Framework",34],["T_NS_SEPARATOR","\\",34],["T_STRING","App",34],["T_NS_SEPARATOR","\\",34],["T_STRING","Action",34],["T_NS_SEPARATOR","\\",34],["T_STRING","Context",34],["T_WHITESPACE"," ",34],["T_VARIABLE","$context",34],",",["T_WHITESPACE","\n        ",34],["T_NS_SEPARATOR","\\",35],["T_STRING","Magento",35],["T_NS_SEPARATOR","\\",35],["T_STRING","Framework",35],["T_NS_SEPARATOR","\\",35],["T_STRING","App",35],["T_NS_SEPARATOR","\\",35],["T_STRING","Config",35],["T_NS_SEPARATOR","\\",35],["T_STRING","ScopeConfigInterface",35],["T_WHITESPACE"," ",35],["T_VARIABLE","$scopeConfig",35],",",["T_WHITESPACE","\n        ",35],["T_NS_SEPARATOR","\\",36],["T_STRING","Magento",36],["T_NS_SEPARATOR","\\",36],["T_STRING","Checkout",36],["T_NS_SEPARATOR","\\",36],["T_STRING","Model",36],["T_NS_SEPARATOR","\\",36],["T_STRING","Session",36],["T_WHITESPACE"," ",36],["T_VARIABLE","$checkoutSession",36],",",["T_WHITESPACE","\n        ",36],["T_NS_SEPARATOR","\\",37],["T_STRING","Magento",37],["T_NS_SEPARATOR","\\",37],["T_STRING","Store",37],["T_NS_SEPARATOR","\\",37],["T_STRING","Model",37],["T_NS_SEPARATOR","\\",37],["T_STRING","StoreManagerInterface",37],["T_WHITESPACE"," ",37],["T_VARIABLE","$storeManager",37],",",["T_WHITESPACE","\n        ",37],["T_NS_SEPARATOR","\\",38],["T_STRING","Magento",38],["T_NS_SEPARATOR","\\",38],["T_STRING","Framework",38],["T_NS_SEPARATOR","\\",38],["T_STRING","Data",38],["T_NS_SEPARATOR","\\",38],["T_STRING","Form",38],["T_NS_SEPARATOR","\\",38],["T_STRING","FormKey",38],["T_NS_SEPARATOR","\\",38],["T_STRING","Validator",38],["T_WHITESPACE"," ",38],["T_VARIABLE","$formKeyValidator",38],",",["T_WHITESPACE","\n        ",38],["T_STRING","CustomerCart",39],["T_WHITESPACE"," ",39],["T_VARIABLE","$cart",39],",",["T_WHITESPACE","\n        ",39],["T_STRING","ProductRepositoryInterface",40],["T_WHITESPACE"," ",40],["T_VARIABLE","$productRepository",40],["T_WHITESPACE","\n    ",40],")",["T_WHITESPACE"," ",41],"{",["T_WHITESPACE","\n        ",41],["T_STRING","parent",42],["T_DOUBLE_COLON","::",42],["T_STRING","__construct",42],"(",["T_WHITESPACE","\n            ",42],["T_VARIABLE","$context",43],",",["T_WHITESPACE","\n            ",43],["T_VARIABLE","$scopeConfig",44],",",["T_WHITESPACE","\n            ",44],["T_VARIABLE","$checkoutSession",45],",",["T_WHITESPACE","\n            ",45],["T_VARIABLE","$storeManager",46],",",["T_WHITESPACE","\n            ",46],["T_VARIABLE","$formKeyValidator",47],",",["T_WHITESPACE","\n            ",47],["T_VARIABLE","$cart",48],["T_WHITESPACE","\n        ",48],")",";",["T_WHITESPACE","\n        ",49],["T_VARIABLE","$this",50],["T_OBJECT_OPERATOR","->",50],["T_STRING","productRepository",50],["T_WHITESPACE"," ",50],"=",["T_WHITESPACE"," ",50],["T_VARIABLE","$productRepository",50],";",["T_WHITESPACE","\n    ",50],"}",["T_WHITESPACE","\n\n    ",51],["T_DOC_COMMENT","\/**\n     * Initialize product instance from request data\n     *\n     * @return \\Magento\\Catalog\\Model\\Product|false\n     *\/",53],["T_WHITESPACE","\n    ",57],["T_PROTECTED","protected",58],["T_WHITESPACE"," ",58],["T_FUNCTION","function",58],["T_WHITESPACE"," ",58],["T_STRING","_initProduct",58],"(",")",["T_WHITESPACE","\n    ",58],"{",["T_WHITESPACE","\n        ",59],["T_VARIABLE","$productId",60],["T_WHITESPACE"," ",60],"=",["T_WHITESPACE"," ",60],["T_INT_CAST","(int)",60],["T_VARIABLE","$this",60],["T_OBJECT_OPERATOR","->",60],["T_STRING","getRequest",60],"(",")",["T_OBJECT_OPERATOR","->",60],["T_STRING","getParam",60],"(",["T_CONSTANT_ENCAPSED_STRING","'product'",60],")",";",["T_WHITESPACE","\n        ",60],["T_IF","if",61],["T_WHITESPACE"," ",61],"(",["T_VARIABLE","$productId",61],")",["T_WHITESPACE"," ",61],"{",["T_WHITESPACE","\n            ",61],["T_VARIABLE","$storeId",62],["T_WHITESPACE"," ",62],"=",["T_WHITESPACE"," ",62],["T_VARIABLE","$this",62],["T_OBJECT_OPERATOR","->",62],["T_STRING","_objectManager",62],["T_OBJECT_OPERATOR","->",62],["T_STRING","get",62],"(",["T_WHITESPACE","\n                ",62],["T_NS_SEPARATOR","\\",63],["T_STRING","Magento",63],["T_NS_SEPARATOR","\\",63],["T_STRING","Store",63],["T_NS_SEPARATOR","\\",63],["T_STRING","Model",63],["T_NS_SEPARATOR","\\",63],["T_STRING","StoreManagerInterface",63],["T_DOUBLE_COLON","::",63],["T_CLASS","class",63],["T_WHITESPACE","\n            ",63],")",["T_OBJECT_OPERATOR","->",64],["T_STRING","getStore",64],"(",")",["T_OBJECT_OPERATOR","->",64],["T_STRING","getId",64],"(",")",";",["T_WHITESPACE","\n            ",64],["T_TRY","try",65],["T_WHITESPACE"," ",65],"{",["T_WHITESPACE","\n                ",65],["T_RETURN","return",66],["T_WHITESPACE"," ",66],["T_VARIABLE","$this",66],["T_OBJECT_OPERATOR","->",66],["T_STRING","productRepository",66],["T_OBJECT_OPERATOR","->",66],["T_STRING","getById",66],"(",["T_VARIABLE","$productId",66],",",["T_WHITESPACE"," ",66],["T_STRING","false",66],",",["T_WHITESPACE"," ",66],["T_VARIABLE","$storeId",66],")",";",["T_WHITESPACE","\n            ",66],"}",["T_WHITESPACE"," ",67],["T_CATCH","catch",67],["T_WHITESPACE"," ",67],"(",["T_STRING","NoSuchEntityException",67],["T_WHITESPACE"," ",67],["T_VARIABLE","$e",67],")",["T_WHITESPACE"," ",67],"{",["T_WHITESPACE","\n                ",67],["T_RETURN","return",68],["T_WHITESPACE"," ",68],["T_STRING","false",68],";",["T_WHITESPACE","\n            ",68],"}",["T_WHITESPACE","\n        ",69],"}",["T_WHITESPACE","\n        ",70],["T_RETURN","return",71],["T_WHITESPACE"," ",71],["T_STRING","false",71],";",["T_WHITESPACE","\n    ",71],"}",["T_WHITESPACE","\n\n    ",72],["T_DOC_COMMENT","\/**\n     * Add product to shopping cart action\n     *\n     * @return \\Magento\\Framework\\Controller\\Result\\Redirect\n     * @SuppressWarnings(PHPMD.CyclomaticComplexity)\n     *\/",74],["T_WHITESPACE","\n    ",79],["T_PUBLIC","public",80],["T_WHITESPACE"," ",80],["T_FUNCTION","function",80],["T_WHITESPACE"," ",80],["T_STRING","execute",80],"(",")",["T_WHITESPACE","\n    ",80],"{",["T_WHITESPACE","\n        ",81],["T_IF","if",82],["T_WHITESPACE"," ",82],"(","!",["T_VARIABLE","$this",82],["T_OBJECT_OPERATOR","->",82],["T_STRING","_formKeyValidator",82],["T_OBJECT_OPERATOR","->",82],["T_STRING","validate",82],"(",["T_VARIABLE","$this",82],["T_OBJECT_OPERATOR","->",82],["T_STRING","getRequest",82],"(",")",")",")",["T_WHITESPACE"," ",82],"{",["T_WHITESPACE","\n            ",82],["T_RETURN","return",83],["T_WHITESPACE"," ",83],["T_VARIABLE","$this",83],["T_OBJECT_OPERATOR","->",83],["T_STRING","resultRedirectFactory",83],["T_OBJECT_OPERATOR","->",83],["T_STRING","create",83],"(",")",["T_OBJECT_OPERATOR","->",83],["T_STRING","setPath",83],"(",["T_CONSTANT_ENCAPSED_STRING","'*\/*\/'",83],")",";",["T_WHITESPACE","\n        ",83],"}",["T_WHITESPACE","\n\n        ",84],["T_VARIABLE","$params",86],["T_WHITESPACE"," ",86],"=",["T_WHITESPACE"," ",86],["T_VARIABLE","$this",86],["T_OBJECT_OPERATOR","->",86],["T_STRING","getRequest",86],"(",")",["T_OBJECT_OPERATOR","->",86],["T_STRING","getParams",86],"(",")",";",["T_WHITESPACE","\n\n        ",86],["T_TRY","try",88],["T_WHITESPACE"," ",88],"{",["T_WHITESPACE","\n            ",88],["T_IF","if",89],["T_WHITESPACE"," ",89],"(",["T_ISSET","isset",89],"(",["T_VARIABLE","$params",89],"[",["T_CONSTANT_ENCAPSED_STRING","'qty'",89],"]",")",")",["T_WHITESPACE"," ",89],"{",["T_WHITESPACE","\n                ",89],["T_VARIABLE","$filter",90],["T_WHITESPACE"," ",90],"=",["T_WHITESPACE"," ",90],["T_NEW","new",90],["T_WHITESPACE"," ",90],["T_NS_SEPARATOR","\\",90],["T_STRING","Zend_Filter_LocalizedToNormalized",90],"(",["T_WHITESPACE","\n                    ",90],"[",["T_CONSTANT_ENCAPSED_STRING","'locale'",91],["T_WHITESPACE"," ",91],["T_DOUBLE_ARROW","=>",91],["T_WHITESPACE"," ",91],["T_VARIABLE","$this",91],["T_OBJECT_OPERATOR","->",91],["T_STRING","_objectManager",91],["T_OBJECT_OPERATOR","->",91],["T_STRING","get",91],"(",["T_WHITESPACE","\n                        ",91],["T_NS_SEPARATOR","\\",92],["T_STRING","Magento",92],["T_NS_SEPARATOR","\\",92],["T_STRING","Framework",92],["T_NS_SEPARATOR","\\",92],["T_STRING","Locale",92],["T_NS_SEPARATOR","\\",92],["T_STRING","ResolverInterface",92],["T_DOUBLE_COLON","::",92],["T_CLASS","class",92],["T_WHITESPACE","\n                    ",92],")",["T_OBJECT_OPERATOR","->",93],["T_STRING","getLocale",93],"(",")","]",["T_WHITESPACE","\n                ",93],")",";",["T_WHITESPACE","\n                ",94],["T_VARIABLE","$params",95],"[",["T_CONSTANT_ENCAPSED_STRING","'qty'",95],"]",["T_WHITESPACE"," ",95],"=",["T_WHITESPACE"," ",95],["T_VARIABLE","$filter",95],["T_OBJECT_OPERATOR","->",95],["T_STRING","filter",95],"(",["T_VARIABLE","$params",95],"[",["T_CONSTANT_ENCAPSED_STRING","'qty'",95],"]",")",";",["T_WHITESPACE","\n            ",95],"}",["T_WHITESPACE","\n\n            ",96],["T_VARIABLE","$product",98],["T_WHITESPACE"," ",98],"=",["T_WHITESPACE"," ",98],["T_VARIABLE","$this",98],["T_OBJECT_OPERATOR","->",98],["T_STRING","_initProduct",98],"(",")",";",["T_WHITESPACE","\n            ",98],["T_VARIABLE","$related",99],["T_WHITESPACE"," ",99],"=",["T_WHITESPACE"," ",99],["T_VARIABLE","$this",99],["T_OBJECT_OPERATOR","->",99],["T_STRING","getRequest",99],"(",")",["T_OBJECT_OPERATOR","->",99],["T_STRING","getParam",99],"(",["T_CONSTANT_ENCAPSED_STRING","'related_product'",99],")",";",["T_WHITESPACE","\n\n            ",99],["T_DOC_COMMENT","\/**\n             * Check product availability\n             *\/",101],["T_WHITESPACE","\n            ",103],["T_IF","if",104],["T_WHITESPACE"," ",104],"(","!",["T_VARIABLE","$product",104],")",["T_WHITESPACE"," ",104],"{",["T_WHITESPACE","\n                ",104],["T_RETURN","return",105],["T_WHITESPACE"," ",105],["T_VARIABLE","$this",105],["T_OBJECT_OPERATOR","->",105],["T_STRING","goBack",105],"(",")",";",["T_WHITESPACE","\n            ",105],"}",["T_WHITESPACE","\n\n            ",106],["T_VARIABLE","$this",108],["T_OBJECT_OPERATOR","->",108],["T_STRING","cart",108],["T_OBJECT_OPERATOR","->",108],["T_STRING","addProduct",108],"(",["T_VARIABLE","$product",108],",",["T_WHITESPACE"," ",108],["T_VARIABLE","$params",108],")",";",["T_WHITESPACE","\n            ",108],["T_IF","if",109],["T_WHITESPACE"," ",109],"(","!",["T_EMPTY","empty",109],"(",["T_VARIABLE","$related",109],")",")",["T_WHITESPACE"," ",109],"{",["T_WHITESPACE","\n                ",109],["T_VARIABLE","$this",110],["T_OBJECT_OPERATOR","->",110],["T_STRING","cart",110],["T_OBJECT_OPERATOR","->",110],["T_STRING","addProductsByIds",110],"(",["T_STRING","explode",110],"(",["T_CONSTANT_ENCAPSED_STRING","','",110],",",["T_WHITESPACE"," ",110],["T_VARIABLE","$related",110],")",")",";",["T_WHITESPACE","\n            ",110],"}",["T_WHITESPACE","\n\n            ",111],["T_VARIABLE","$this",113],["T_OBJECT_OPERATOR","->",113],["T_STRING","cart",113],["T_OBJECT_OPERATOR","->",113],["T_STRING","save",113],"(",")",";",["T_WHITESPACE","\n\n            ",113],["T_DOC_COMMENT","\/**\n             * @todo remove wishlist observer \\Magento\\Wishlist\\Observer\\AddToCart\n             *\/",115],["T_WHITESPACE","\n            ",117],["T_VARIABLE","$this",118],["T_OBJECT_OPERATOR","->",118],["T_STRING","_eventManager",118],["T_OBJECT_OPERATOR","->",118],["T_STRING","dispatch",118],"(",["T_WHITESPACE","\n                ",118],["T_CONSTANT_ENCAPSED_STRING","'checkout_cart_add_product_complete'",119],",",["T_WHITESPACE","\n                ",119],"[",["T_CONSTANT_ENCAPSED_STRING","'product'",120],["T_WHITESPACE"," ",120],["T_DOUBLE_ARROW","=>",120],["T_WHITESPACE"," ",120],["T_VARIABLE","$product",120],",",["T_WHITESPACE"," ",120],["T_CONSTANT_ENCAPSED_STRING","'request'",120],["T_WHITESPACE"," ",120],["T_DOUBLE_ARROW","=>",120],["T_WHITESPACE"," ",120],["T_VARIABLE","$this",120],["T_OBJECT_OPERATOR","->",120],["T_STRING","getRequest",120],"(",")",",",["T_WHITESPACE"," ",120],["T_CONSTANT_ENCAPSED_STRING","'response'",120],["T_WHITESPACE"," ",120],["T_DOUBLE_ARROW","=>",120],["T_WHITESPACE"," ",120],["T_VARIABLE","$this",120],["T_OBJECT_OPERATOR","->",120],["T_STRING","getResponse",120],"(",")","]",["T_WHITESPACE","\n            ",120],")",";",["T_WHITESPACE","\n\n            ",121],["T_IF","if",123],["T_WHITESPACE"," ",123],"(","!",["T_VARIABLE","$this",123],["T_OBJECT_OPERATOR","->",123],["T_STRING","_checkoutSession",123],["T_OBJECT_OPERATOR","->",123],["T_STRING","getNoCartRedirect",123],"(",["T_STRING","true",123],")",")",["T_WHITESPACE"," ",123],"{",["T_WHITESPACE","\n                ",123],["T_IF","if",124],["T_WHITESPACE"," ",124],"(","!",["T_VARIABLE","$this",124],["T_OBJECT_OPERATOR","->",124],["T_STRING","cart",124],["T_OBJECT_OPERATOR","->",124],["T_STRING","getQuote",124],"(",")",["T_OBJECT_OPERATOR","->",124],["T_STRING","getHasError",124],"(",")",")",["T_WHITESPACE"," ",124],"{",["T_WHITESPACE","\n                    ",124],["T_VARIABLE","$message",125],["T_WHITESPACE"," ",125],"=",["T_WHITESPACE"," ",125],["T_STRING","__",125],"(",["T_WHITESPACE","\n                        ",125],["T_CONSTANT_ENCAPSED_STRING","'You added %1 to your shopping cart.'",126],",",["T_WHITESPACE","\n                        ",126],["T_VARIABLE","$product",127],["T_OBJECT_OPERATOR","->",127],["T_STRING","getName",127],"(",")",["T_WHITESPACE","\n                    ",127],")",";",["T_WHITESPACE","\n                    ",128],["T_VARIABLE","$this",129],["T_OBJECT_OPERATOR","->",129],["T_STRING","messageManager",129],["T_OBJECT_OPERATOR","->",129],["T_STRING","addSuccessMessage",129],"(",["T_VARIABLE","$message",129],")",";",["T_WHITESPACE","\n                ",129],"}",["T_WHITESPACE","\n                ",130],["T_RETURN","return",131],["T_WHITESPACE"," ",131],["T_VARIABLE","$this",131],["T_OBJECT_OPERATOR","->",131],["T_STRING","goBack",131],"(",["T_STRING","null",131],",",["T_WHITESPACE"," ",131],["T_VARIABLE","$product",131],")",";",["T_WHITESPACE","\n            ",131],"}",["T_WHITESPACE","\n        ",132],"}",["T_WHITESPACE"," ",133],["T_CATCH","catch",133],["T_WHITESPACE"," ",133],"(",["T_NS_SEPARATOR","\\",133],["T_STRING","Magento",133],["T_NS_SEPARATOR","\\",133],["T_STRING","Framework",133],["T_NS_SEPARATOR","\\",133],["T_STRING","Exception",133],["T_NS_SEPARATOR","\\",133],["T_STRING","LocalizedException",133],["T_WHITESPACE"," ",133],["T_VARIABLE","$e",133],")",["T_WHITESPACE"," ",133],"{",["T_WHITESPACE","\n            ",133],["T_IF","if",134],["T_WHITESPACE"," ",134],"(",["T_VARIABLE","$this",134],["T_OBJECT_OPERATOR","->",134],["T_STRING","_checkoutSession",134],["T_OBJECT_OPERATOR","->",134],["T_STRING","getUseNotice",134],"(",["T_STRING","true",134],")",")",["T_WHITESPACE"," ",134],"{",["T_WHITESPACE","\n                ",134],["T_VARIABLE","$this",135],["T_OBJECT_OPERATOR","->",135],["T_STRING","messageManager",135],["T_OBJECT_OPERATOR","->",135],["T_STRING","addNotice",135],"(",["T_WHITESPACE","\n                    ",135],["T_VARIABLE","$this",136],["T_OBJECT_OPERATOR","->",136],["T_STRING","_objectManager",136],["T_OBJECT_OPERATOR","->",136],["T_STRING","get",136],"(",["T_NS_SEPARATOR","\\",136],["T_STRING","Magento",136],["T_NS_SEPARATOR","\\",136],["T_STRING","Framework",136],["T_NS_SEPARATOR","\\",136],["T_STRING","Escaper",136],["T_DOUBLE_COLON","::",136],["T_CLASS","class",136],")",["T_OBJECT_OPERATOR","->",136],["T_STRING","escapeHtml",136],"(",["T_VARIABLE","$e",136],["T_OBJECT_OPERATOR","->",136],["T_STRING","getMessage",136],"(",")",")",["T_WHITESPACE","\n                ",136],")",";",["T_WHITESPACE","\n            ",137],"}",["T_WHITESPACE"," ",138],["T_ELSE","else",138],["T_WHITESPACE"," ",138],"{",["T_WHITESPACE","\n                ",138],["T_VARIABLE","$messages",139],["T_WHITESPACE"," ",139],"=",["T_WHITESPACE"," ",139],["T_STRING","array_unique",139],"(",["T_STRING","explode",139],"(",["T_CONSTANT_ENCAPSED_STRING","\"\\n\"",139],",",["T_WHITESPACE"," ",139],["T_VARIABLE","$e",139],["T_OBJECT_OPERATOR","->",139],["T_STRING","getMessage",139],"(",")",")",")",";",["T_WHITESPACE","\n                ",139],["T_FOREACH","foreach",140],["T_WHITESPACE"," ",140],"(",["T_VARIABLE","$messages",140],["T_WHITESPACE"," ",140],["T_AS","as",140],["T_WHITESPACE"," ",140],["T_VARIABLE","$message",140],")",["T_WHITESPACE"," ",140],"{",["T_WHITESPACE","\n                    ",140],["T_VARIABLE","$this",141],["T_OBJECT_OPERATOR","->",141],["T_STRING","messageManager",141],["T_OBJECT_OPERATOR","->",141],["T_STRING","addError",141],"(",["T_WHITESPACE","\n                        ",141],["T_VARIABLE","$this",142],["T_OBJECT_OPERATOR","->",142],["T_STRING","_objectManager",142],["T_OBJECT_OPERATOR","->",142],["T_STRING","get",142],"(",["T_NS_SEPARATOR","\\",142],["T_STRING","Magento",142],["T_NS_SEPARATOR","\\",142],["T_STRING","Framework",142],["T_NS_SEPARATOR","\\",142],["T_STRING","Escaper",142],["T_DOUBLE_COLON","::",142],["T_CLASS","class",142],")",["T_OBJECT_OPERATOR","->",142],["T_STRING","escapeHtml",142],"(",["T_VARIABLE","$message",142],")",["T_WHITESPACE","\n                    ",142],")",";",["T_WHITESPACE","\n                ",143],"}",["T_WHITESPACE","\n            ",144],"}",["T_WHITESPACE","\n\n            ",145],["T_VARIABLE","$url",147],["T_WHITESPACE"," ",147],"=",["T_WHITESPACE"," ",147],["T_VARIABLE","$this",147],["T_OBJECT_OPERATOR","->",147],["T_STRING","_checkoutSession",147],["T_OBJECT_OPERATOR","->",147],["T_STRING","getRedirectUrl",147],"(",["T_STRING","true",147],")",";",["T_WHITESPACE","\n\n            ",147],["T_IF","if",149],["T_WHITESPACE"," ",149],"(","!",["T_VARIABLE","$url",149],")",["T_WHITESPACE"," ",149],"{",["T_WHITESPACE","\n                ",149],["T_VARIABLE","$cartUrl",150],["T_WHITESPACE"," ",150],"=",["T_WHITESPACE"," ",150],["T_VARIABLE","$this",150],["T_OBJECT_OPERATOR","->",150],["T_STRING","_objectManager",150],["T_OBJECT_OPERATOR","->",150],["T_STRING","get",150],"(",["T_NS_SEPARATOR","\\",150],["T_STRING","Magento",150],["T_NS_SEPARATOR","\\",150],["T_STRING","Checkout",150],["T_NS_SEPARATOR","\\",150],["T_STRING","Helper",150],["T_NS_SEPARATOR","\\",150],["T_STRING","Cart",150],["T_DOUBLE_COLON","::",150],["T_CLASS","class",150],")",["T_OBJECT_OPERATOR","->",150],["T_STRING","getCartUrl",150],"(",")",";",["T_WHITESPACE","\n                ",150],["T_VARIABLE","$url",151],["T_WHITESPACE"," ",151],"=",["T_WHITESPACE"," ",151],["T_VARIABLE","$this",151],["T_OBJECT_OPERATOR","->",151],["T_STRING","_redirect",151],["T_OBJECT_OPERATOR","->",151],["T_STRING","getRedirectUrl",151],"(",["T_VARIABLE","$cartUrl",151],")",";",["T_WHITESPACE","\n            ",151],"}",["T_WHITESPACE","\n\n            ",152],["T_RETURN","return",154],["T_WHITESPACE"," ",154],["T_VARIABLE","$this",154],["T_OBJECT_OPERATOR","->",154],["T_STRING","goBack",154],"(",["T_VARIABLE","$url",154],")",";",["T_WHITESPACE","\n\n        ",154],"}",["T_WHITESPACE"," ",156],["T_CATCH","catch",156],["T_WHITESPACE"," ",156],"(",["T_NS_SEPARATOR","\\",156],["T_STRING","Exception",156],["T_WHITESPACE"," ",156],["T_VARIABLE","$e",156],")",["T_WHITESPACE"," ",156],"{",["T_WHITESPACE","\n            ",156],["T_VARIABLE","$this",157],["T_OBJECT_OPERATOR","->",157],["T_STRING","messageManager",157],["T_OBJECT_OPERATOR","->",157],["T_STRING","addException",157],"(",["T_VARIABLE","$e",157],",",["T_WHITESPACE"," ",157],["T_STRING","__",157],"(",["T_CONSTANT_ENCAPSED_STRING","'We can\\'t add this item to your shopping cart right now.'",157],")",")",";",["T_WHITESPACE","\n            ",157],["T_VARIABLE","$this",158],["T_OBJECT_OPERATOR","->",158],["T_STRING","_objectManager",158],["T_OBJECT_OPERATOR","->",158],["T_STRING","get",158],"(",["T_NS_SEPARATOR","\\",158],["T_STRING","Psr",158],["T_NS_SEPARATOR","\\",158],["T_STRING","Log",158],["T_NS_SEPARATOR","\\",158],["T_STRING","LoggerInterface",158],["T_DOUBLE_COLON","::",158],["T_CLASS","class",158],")",["T_OBJECT_OPERATOR","->",158],["T_STRING","critical",158],"(",["T_VARIABLE","$e",158],")",";",["T_WHITESPACE","\n            ",158],["T_RETURN","return",159],["T_WHITESPACE"," ",159],["T_VARIABLE","$this",159],["T_OBJECT_OPERATOR","->",159],["T_STRING","goBack",159],"(",")",";",["T_WHITESPACE","\n        ",159],"}",["T_WHITESPACE","\n    ",160],"}",["T_WHITESPACE","\n\n    ",161],["T_DOC_COMMENT","\/**\n     * Resolve response\n     *\n     * @param string $backUrl\n     * @param \\Magento\\Catalog\\Model\\Product $product\n     * @return $this|\\Magento\\Framework\\Controller\\Result\\Redirect\n     *\/",163],["T_WHITESPACE","\n    ",169],["T_PROTECTED","protected",170],["T_WHITESPACE"," ",170],["T_FUNCTION","function",170],["T_WHITESPACE"," ",170],["T_STRING","goBack",170],"(",["T_VARIABLE","$backUrl",170],["T_WHITESPACE"," ",170],"=",["T_WHITESPACE"," ",170],["T_STRING","null",170],",",["T_WHITESPACE"," ",170],["T_VARIABLE","$product",170],["T_WHITESPACE"," ",170],"=",["T_WHITESPACE"," ",170],["T_STRING","null",170],")",["T_WHITESPACE","\n    ",170],"{",["T_WHITESPACE","\n        ",171],["T_IF","if",172],["T_WHITESPACE"," ",172],"(","!",["T_VARIABLE","$this",172],["T_OBJECT_OPERATOR","->",172],["T_STRING","getRequest",172],"(",")",["T_OBJECT_OPERATOR","->",172],["T_STRING","isAjax",172],"(",")",")",["T_WHITESPACE"," ",172],"{",["T_WHITESPACE","\n            ",172],["T_RETURN","return",173],["T_WHITESPACE"," ",173],["T_STRING","parent",173],["T_DOUBLE_COLON","::",173],["T_STRING","_goBack",173],"(",["T_VARIABLE","$backUrl",173],")",";",["T_WHITESPACE","\n        ",173],"}",["T_WHITESPACE","\n\n        ",174],["T_VARIABLE","$result",176],["T_WHITESPACE"," ",176],"=",["T_WHITESPACE"," ",176],"[","]",";",["T_WHITESPACE","\n\n        ",176],["T_IF","if",178],["T_WHITESPACE"," ",178],"(",["T_VARIABLE","$backUrl",178],["T_WHITESPACE"," ",178],["T_BOOLEAN_OR","||",178],["T_WHITESPACE"," ",178],["T_VARIABLE","$backUrl",178],["T_WHITESPACE"," ",178],"=",["T_WHITESPACE"," ",178],["T_VARIABLE","$this",178],["T_OBJECT_OPERATOR","->",178],["T_STRING","getBackUrl",178],"(",")",")",["T_WHITESPACE"," ",178],"{",["T_WHITESPACE","\n            ",178],["T_VARIABLE","$result",179],"[",["T_CONSTANT_ENCAPSED_STRING","'backUrl'",179],"]",["T_WHITESPACE"," ",179],"=",["T_WHITESPACE"," ",179],["T_VARIABLE","$backUrl",179],";",["T_WHITESPACE","\n        ",179],"}",["T_WHITESPACE"," ",180],["T_ELSE","else",180],["T_WHITESPACE"," ",180],"{",["T_WHITESPACE","\n            ",180],["T_IF","if",181],["T_WHITESPACE"," ",181],"(",["T_VARIABLE","$product",181],["T_WHITESPACE"," ",181],["T_BOOLEAN_AND","&&",181],["T_WHITESPACE"," ",181],"!",["T_VARIABLE","$product",181],["T_OBJECT_OPERATOR","->",181],["T_STRING","getIsSalable",181],"(",")",")",["T_WHITESPACE"," ",181],"{",["T_WHITESPACE","\n                ",181],["T_VARIABLE","$result",182],"[",["T_CONSTANT_ENCAPSED_STRING","'product'",182],"]",["T_WHITESPACE"," ",182],"=",["T_WHITESPACE"," ",182],"[",["T_WHITESPACE","\n                    ",182],["T_CONSTANT_ENCAPSED_STRING","'statusText'",183],["T_WHITESPACE"," ",183],["T_DOUBLE_ARROW","=>",183],["T_WHITESPACE"," ",183],["T_STRING","__",183],"(",["T_CONSTANT_ENCAPSED_STRING","'Out of stock'",183],")",["T_WHITESPACE","\n                ",183],"]",";",["T_WHITESPACE","\n            ",184],"}",["T_WHITESPACE","\n        ",185],"}",["T_WHITESPACE","\n\n        ",186],["T_VARIABLE","$this",188],["T_OBJECT_OPERATOR","->",188],["T_STRING","getResponse",188],"(",")",["T_OBJECT_OPERATOR","->",188],["T_STRING","representJson",188],"(",["T_WHITESPACE","\n            ",188],["T_VARIABLE","$this",189],["T_OBJECT_OPERATOR","->",189],["T_STRING","_objectManager",189],["T_OBJECT_OPERATOR","->",189],["T_STRING","get",189],"(",["T_NS_SEPARATOR","\\",189],["T_STRING","Magento",189],["T_NS_SEPARATOR","\\",189],["T_STRING","Framework",189],["T_NS_SEPARATOR","\\",189],["T_STRING","Json",189],["T_NS_SEPARATOR","\\",189],["T_STRING","Helper",189],["T_NS_SEPARATOR","\\",189],["T_STRING","Data",189],["T_DOUBLE_COLON","::",189],["T_CLASS","class",189],")",["T_OBJECT_OPERATOR","->",189],["T_STRING","jsonEncode",189],"(",["T_VARIABLE","$result",189],")",["T_WHITESPACE","\n        ",189],")",";",["T_WHITESPACE","\n    ",190],"}",["T_WHITESPACE","\n",191],"}",["T_WHITESPACE","\n",192]]
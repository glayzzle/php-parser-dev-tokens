[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Copyright \u00c2\u00a9 2013-2017 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n *\/",2],["T_WHITESPACE","\n\n",5],["T_NAMESPACE","namespace",7],["T_WHITESPACE"," ",7],["T_STRING","Magento",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Directory",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Test",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Unit",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Model",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Currency",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Import",7],";",["T_WHITESPACE","\n\n",7],["T_CLASS","class",9],["T_WHITESPACE"," ",9],["T_STRING","YahooFinanceTest",9],["T_WHITESPACE"," ",9],["T_EXTENDS","extends",9],["T_WHITESPACE"," ",9],["T_NS_SEPARATOR","\\",9],["T_STRING","PHPUnit_Framework_TestCase",9],["T_WHITESPACE","\n",9],"{",["T_WHITESPACE","\n    ",10],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Directory\\Model\\Currency\\Import\\YahooFinance\n     *\/",11],["T_WHITESPACE","\n    ",13],["T_PRIVATE","private",14],["T_WHITESPACE"," ",14],["T_VARIABLE","$model",14],";",["T_WHITESPACE","\n\n    ",14],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Directory\\Model\\CurrencyFactory|\\PHPUnit_Framework_MockObject_MockObject\n     *\/",16],["T_WHITESPACE","\n    ",18],["T_PRIVATE","private",19],["T_WHITESPACE"," ",19],["T_VARIABLE","$currencyFactoryMock",19],";",["T_WHITESPACE","\n\n    ",19],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Framework\\HTTP\\ZendClientFactory|\\PHPUnit_Framework_MockObject_MockObject\n     *\/",21],["T_WHITESPACE","\n    ",23],["T_PRIVATE","private",24],["T_WHITESPACE"," ",24],["T_VARIABLE","$httpClientFactoryMock",24],";",["T_WHITESPACE","\n\n    ",24],["T_PROTECTED","protected",26],["T_WHITESPACE"," ",26],["T_FUNCTION","function",26],["T_WHITESPACE"," ",26],["T_STRING","setUp",26],"(",")",["T_WHITESPACE","\n    ",26],"{",["T_WHITESPACE","\n        ",27],["T_VARIABLE","$objectManagerHelper",28],["T_WHITESPACE"," ",28],"=",["T_WHITESPACE"," ",28],["T_NEW","new",28],["T_WHITESPACE"," ",28],["T_NS_SEPARATOR","\\",28],["T_STRING","Magento",28],["T_NS_SEPARATOR","\\",28],["T_STRING","Framework",28],["T_NS_SEPARATOR","\\",28],["T_STRING","TestFramework",28],["T_NS_SEPARATOR","\\",28],["T_STRING","Unit",28],["T_NS_SEPARATOR","\\",28],["T_STRING","Helper",28],["T_NS_SEPARATOR","\\",28],["T_STRING","ObjectManager",28],"(",["T_VARIABLE","$this",28],")",";",["T_WHITESPACE","\n\n        ",28],["T_VARIABLE","$this",30],["T_OBJECT_OPERATOR","->",30],["T_STRING","currencyFactoryMock",30],["T_WHITESPACE"," ",30],"=",["T_WHITESPACE"," ",30],["T_VARIABLE","$this",30],["T_OBJECT_OPERATOR","->",30],["T_STRING","getMockBuilder",30],"(",["T_NS_SEPARATOR","\\",30],["T_STRING","Magento",30],["T_NS_SEPARATOR","\\",30],["T_STRING","Directory",30],["T_NS_SEPARATOR","\\",30],["T_STRING","Model",30],["T_NS_SEPARATOR","\\",30],["T_STRING","CurrencyFactory",30],["T_DOUBLE_COLON","::",30],["T_CLASS","class",30],")",["T_WHITESPACE","\n            ",30],["T_OBJECT_OPERATOR","->",31],["T_STRING","disableOriginalConstructor",31],"(",")",["T_WHITESPACE","\n            ",31],["T_OBJECT_OPERATOR","->",32],["T_STRING","setMethods",32],"(","[",["T_CONSTANT_ENCAPSED_STRING","'create'",32],"]",")",["T_WHITESPACE","\n            ",32],["T_OBJECT_OPERATOR","->",33],["T_STRING","getMock",33],"(",")",";",["T_WHITESPACE","\n        ",33],["T_VARIABLE","$this",34],["T_OBJECT_OPERATOR","->",34],["T_STRING","httpClientFactoryMock",34],["T_WHITESPACE"," ",34],"=",["T_WHITESPACE"," ",34],["T_VARIABLE","$this",34],["T_OBJECT_OPERATOR","->",34],["T_STRING","getMockBuilder",34],"(",["T_NS_SEPARATOR","\\",34],["T_STRING","Magento",34],["T_NS_SEPARATOR","\\",34],["T_STRING","Framework",34],["T_NS_SEPARATOR","\\",34],["T_STRING","HTTP",34],["T_NS_SEPARATOR","\\",34],["T_STRING","ZendClientFactory",34],["T_DOUBLE_COLON","::",34],["T_CLASS","class",34],")",["T_WHITESPACE","\n            ",34],["T_OBJECT_OPERATOR","->",35],["T_STRING","disableOriginalConstructor",35],"(",")",["T_WHITESPACE","\n            ",35],["T_OBJECT_OPERATOR","->",36],["T_STRING","setMethods",36],"(","[",["T_CONSTANT_ENCAPSED_STRING","'create'",36],"]",")",["T_WHITESPACE","\n            ",36],["T_OBJECT_OPERATOR","->",37],["T_STRING","getMock",37],"(",")",";",["T_WHITESPACE","\n        ",37],["T_VARIABLE","$scopeMock",38],["T_WHITESPACE"," ",38],"=",["T_WHITESPACE"," ",38],["T_VARIABLE","$this",38],["T_OBJECT_OPERATOR","->",38],["T_STRING","getMockBuilder",38],"(",["T_NS_SEPARATOR","\\",38],["T_STRING","Magento",38],["T_NS_SEPARATOR","\\",38],["T_STRING","Framework",38],["T_NS_SEPARATOR","\\",38],["T_STRING","App",38],["T_NS_SEPARATOR","\\",38],["T_STRING","Config",38],["T_NS_SEPARATOR","\\",38],["T_STRING","ScopeConfigInterface",38],["T_DOUBLE_COLON","::",38],["T_CLASS","class",38],")",["T_WHITESPACE","\n            ",38],["T_OBJECT_OPERATOR","->",39],["T_STRING","disableOriginalConstructor",39],"(",")",["T_WHITESPACE","\n            ",39],["T_OBJECT_OPERATOR","->",40],["T_STRING","setMethods",40],"(","[","]",")",["T_WHITESPACE","\n            ",40],["T_OBJECT_OPERATOR","->",41],["T_STRING","getMock",41],"(",")",";",["T_WHITESPACE","\n\n        ",41],["T_VARIABLE","$this",43],["T_OBJECT_OPERATOR","->",43],["T_STRING","model",43],["T_WHITESPACE"," ",43],"=",["T_WHITESPACE"," ",43],["T_VARIABLE","$objectManagerHelper",43],["T_OBJECT_OPERATOR","->",43],["T_STRING","getObject",43],"(",["T_WHITESPACE","\n            ",43],["T_NS_SEPARATOR","\\",44],["T_STRING","Magento",44],["T_NS_SEPARATOR","\\",44],["T_STRING","Directory",44],["T_NS_SEPARATOR","\\",44],["T_STRING","Model",44],["T_NS_SEPARATOR","\\",44],["T_STRING","Currency",44],["T_NS_SEPARATOR","\\",44],["T_STRING","Import",44],["T_NS_SEPARATOR","\\",44],["T_STRING","YahooFinance",44],["T_DOUBLE_COLON","::",44],["T_CLASS","class",44],",",["T_WHITESPACE","\n            ",44],"[",["T_WHITESPACE","\n                ",45],["T_CONSTANT_ENCAPSED_STRING","'currencyFactory'",46],["T_WHITESPACE"," ",46],["T_DOUBLE_ARROW","=>",46],["T_WHITESPACE"," ",46],["T_VARIABLE","$this",46],["T_OBJECT_OPERATOR","->",46],["T_STRING","currencyFactoryMock",46],",",["T_WHITESPACE","\n                ",46],["T_CONSTANT_ENCAPSED_STRING","'scopeConfig'",47],["T_WHITESPACE"," ",47],["T_DOUBLE_ARROW","=>",47],["T_WHITESPACE"," ",47],["T_VARIABLE","$scopeMock",47],",",["T_WHITESPACE","\n                ",47],["T_CONSTANT_ENCAPSED_STRING","'httpClientFactory'",48],["T_WHITESPACE"," ",48],["T_DOUBLE_ARROW","=>",48],["T_WHITESPACE"," ",48],["T_VARIABLE","$this",48],["T_OBJECT_OPERATOR","->",48],["T_STRING","httpClientFactoryMock",48],["T_WHITESPACE","\n            ",48],"]",["T_WHITESPACE","\n        ",49],")",";",["T_WHITESPACE","\n    ",50],"}",["T_WHITESPACE","\n\n    ",51],["T_PUBLIC","public",53],["T_WHITESPACE"," ",53],["T_FUNCTION","function",53],["T_WHITESPACE"," ",53],["T_STRING","testFetchRates",53],"(",")",["T_WHITESPACE","\n    ",53],"{",["T_WHITESPACE","\n        ",54],["T_VARIABLE","$currencyFromList",55],["T_WHITESPACE"," ",55],"=",["T_WHITESPACE"," ",55],"[",["T_CONSTANT_ENCAPSED_STRING","'USD'",55],"]",";",["T_WHITESPACE","\n        ",55],["T_VARIABLE","$currencyToList",56],["T_WHITESPACE"," ",56],"=",["T_WHITESPACE"," ",56],"[",["T_CONSTANT_ENCAPSED_STRING","'EUR'",56],",",["T_WHITESPACE"," ",56],["T_CONSTANT_ENCAPSED_STRING","'UAH'",56],"]",";",["T_WHITESPACE","\n        ",56],["T_VARIABLE","$responseBody",57],["T_WHITESPACE"," ",57],"=",["T_WHITESPACE"," ",57],["T_CONSTANT_ENCAPSED_STRING","'{\"query\":{\"count\":7,\"created\":\"2016-04-05T16:46:55Z\",\"lang\":\"en-US\",\"results\":{\"rate\":'",57],["T_WHITESPACE","\n            ",57],".",["T_WHITESPACE"," ",58],["T_CONSTANT_ENCAPSED_STRING","'[{\"id\":\"USDEUR\",\"Name\":\"USD\/EUR\",\"Rate\":\"0.9022\",\"Date\":\"4\/5\/2016\"}]}}}'",58],";",["T_WHITESPACE","\n        ",58],["T_VARIABLE","$expectedCurrencyRateList",59],["T_WHITESPACE"," ",59],"=",["T_WHITESPACE"," ",59],"[",["T_CONSTANT_ENCAPSED_STRING","'USD'",59],["T_WHITESPACE"," ",59],["T_DOUBLE_ARROW","=>",59],["T_WHITESPACE"," ",59],"[",["T_CONSTANT_ENCAPSED_STRING","'EUR'",59],["T_WHITESPACE"," ",59],["T_DOUBLE_ARROW","=>",59],["T_WHITESPACE"," ",59],["T_DNUMBER","0.9022",59],",",["T_WHITESPACE"," ",59],["T_CONSTANT_ENCAPSED_STRING","'UAH'",59],["T_WHITESPACE"," ",59],["T_DOUBLE_ARROW","=>",59],["T_WHITESPACE"," ",59],["T_STRING","null",59],"]","]",";",["T_WHITESPACE","\n        ",59],["T_VARIABLE","$message",60],["T_WHITESPACE"," ",60],"=",["T_WHITESPACE"," ",60],["T_CONSTANT_ENCAPSED_STRING","\"We can't retrieve a rate from http:\/\/query.yahooapis.com\/v1\/public\/yql?format=json\"",60],["T_WHITESPACE","\n            ",60],".",["T_WHITESPACE"," ",61],["T_CONSTANT_ENCAPSED_STRING","\"&q=select+*+from+yahoo.finance.xchange+where+pair+in+%28%22USDEUR%22%2C%22USDUAH%22)\"",61],["T_WHITESPACE","\n            ",61],".",["T_WHITESPACE"," ",62],["T_CONSTANT_ENCAPSED_STRING","\"&env=store:\/\/datatables.org\/alltableswithkeys for UAH.\"",62],";",["T_WHITESPACE","\n\n        ",62],["T_DOC_COMMENT","\/** @var \\Magento\\Directory\\Model\\Currency|\\PHPUnit_Framework_MockObject_MockObject $currencyMock *\/",64],["T_WHITESPACE","\n        ",64],["T_VARIABLE","$currencyMock",65],["T_WHITESPACE"," ",65],"=",["T_WHITESPACE"," ",65],["T_VARIABLE","$this",65],["T_OBJECT_OPERATOR","->",65],["T_STRING","getMockBuilder",65],"(",["T_NS_SEPARATOR","\\",65],["T_STRING","Magento",65],["T_NS_SEPARATOR","\\",65],["T_STRING","Directory",65],["T_NS_SEPARATOR","\\",65],["T_STRING","Model",65],["T_NS_SEPARATOR","\\",65],["T_STRING","Currency",65],["T_DOUBLE_COLON","::",65],["T_CLASS","class",65],")",["T_WHITESPACE","\n            ",65],["T_OBJECT_OPERATOR","->",66],["T_STRING","disableOriginalConstructor",66],"(",")",["T_WHITESPACE","\n            ",66],["T_OBJECT_OPERATOR","->",67],["T_STRING","setMethods",67],"(","[","]",")",["T_WHITESPACE","\n            ",67],["T_OBJECT_OPERATOR","->",68],["T_STRING","getMock",68],"(",")",";",["T_WHITESPACE","\n        ",68],["T_DOC_COMMENT","\/** @var \\Magento\\Framework\\HTTP\\ZendClient|\\PHPUnit_Framework_MockObject_MockObject $currencyMock *\/",69],["T_WHITESPACE","\n        ",69],["T_VARIABLE","$httpClientMock",70],["T_WHITESPACE"," ",70],"=",["T_WHITESPACE"," ",70],["T_VARIABLE","$this",70],["T_OBJECT_OPERATOR","->",70],["T_STRING","getMockBuilder",70],"(",["T_NS_SEPARATOR","\\",70],["T_STRING","Magento",70],["T_NS_SEPARATOR","\\",70],["T_STRING","Framework",70],["T_NS_SEPARATOR","\\",70],["T_STRING","HTTP",70],["T_NS_SEPARATOR","\\",70],["T_STRING","ZendClient",70],["T_DOUBLE_COLON","::",70],["T_CLASS","class",70],")",["T_WHITESPACE","\n            ",70],["T_OBJECT_OPERATOR","->",71],["T_STRING","disableOriginalConstructor",71],"(",")",["T_WHITESPACE","\n            ",71],["T_OBJECT_OPERATOR","->",72],["T_STRING","setMethods",72],"(","[","]",")",["T_WHITESPACE","\n            ",72],["T_OBJECT_OPERATOR","->",73],["T_STRING","getMock",73],"(",")",";",["T_WHITESPACE","\n        ",73],["T_DOC_COMMENT","\/** @var \\Zend_Http_Response|\\PHPUnit_Framework_MockObject_MockObject $currencyMock *\/",74],["T_WHITESPACE","\n        ",74],["T_VARIABLE","$httpResponseMock",75],["T_WHITESPACE"," ",75],"=",["T_WHITESPACE"," ",75],["T_VARIABLE","$this",75],["T_OBJECT_OPERATOR","->",75],["T_STRING","getMockBuilder",75],"(",["T_CONSTANT_ENCAPSED_STRING","'Zend_Http_Response'",75],")",["T_WHITESPACE","\n            ",75],["T_OBJECT_OPERATOR","->",76],["T_STRING","disableOriginalConstructor",76],"(",")",["T_WHITESPACE","\n            ",76],["T_OBJECT_OPERATOR","->",77],["T_STRING","setMethods",77],"(","[","]",")",["T_WHITESPACE","\n            ",77],["T_OBJECT_OPERATOR","->",78],["T_STRING","getMock",78],"(",")",";",["T_WHITESPACE","\n        ",78],["T_VARIABLE","$this",79],["T_OBJECT_OPERATOR","->",79],["T_STRING","currencyFactoryMock",79],["T_OBJECT_OPERATOR","->",79],["T_STRING","expects",79],"(",["T_VARIABLE","$this",79],["T_OBJECT_OPERATOR","->",79],["T_STRING","any",79],"(",")",")",["T_OBJECT_OPERATOR","->",79],["T_STRING","method",79],"(",["T_CONSTANT_ENCAPSED_STRING","'create'",79],")",["T_OBJECT_OPERATOR","->",79],["T_STRING","willReturn",79],"(",["T_VARIABLE","$currencyMock",79],")",";",["T_WHITESPACE","\n        ",79],["T_VARIABLE","$currencyMock",80],["T_OBJECT_OPERATOR","->",80],["T_STRING","expects",80],"(",["T_VARIABLE","$this",80],["T_OBJECT_OPERATOR","->",80],["T_STRING","once",80],"(",")",")",["T_OBJECT_OPERATOR","->",80],["T_STRING","method",80],"(",["T_CONSTANT_ENCAPSED_STRING","'getConfigBaseCurrencies'",80],")",["T_OBJECT_OPERATOR","->",80],["T_STRING","willReturn",80],"(",["T_VARIABLE","$currencyFromList",80],")",";",["T_WHITESPACE","\n        ",80],["T_VARIABLE","$currencyMock",81],["T_OBJECT_OPERATOR","->",81],["T_STRING","expects",81],"(",["T_VARIABLE","$this",81],["T_OBJECT_OPERATOR","->",81],["T_STRING","once",81],"(",")",")",["T_OBJECT_OPERATOR","->",81],["T_STRING","method",81],"(",["T_CONSTANT_ENCAPSED_STRING","'getConfigAllowCurrencies'",81],")",["T_OBJECT_OPERATOR","->",81],["T_STRING","willReturn",81],"(",["T_VARIABLE","$currencyToList",81],")",";",["T_WHITESPACE","\n        ",81],["T_VARIABLE","$this",82],["T_OBJECT_OPERATOR","->",82],["T_STRING","httpClientFactoryMock",82],["T_OBJECT_OPERATOR","->",82],["T_STRING","expects",82],"(",["T_VARIABLE","$this",82],["T_OBJECT_OPERATOR","->",82],["T_STRING","any",82],"(",")",")",["T_OBJECT_OPERATOR","->",82],["T_STRING","method",82],"(",["T_CONSTANT_ENCAPSED_STRING","'create'",82],")",["T_OBJECT_OPERATOR","->",82],["T_STRING","willReturn",82],"(",["T_VARIABLE","$httpClientMock",82],")",";",["T_WHITESPACE","\n        ",82],["T_VARIABLE","$httpClientMock",83],["T_OBJECT_OPERATOR","->",83],["T_STRING","expects",83],"(",["T_VARIABLE","$this",83],["T_OBJECT_OPERATOR","->",83],["T_STRING","atLeastOnce",83],"(",")",")",["T_OBJECT_OPERATOR","->",83],["T_STRING","method",83],"(",["T_CONSTANT_ENCAPSED_STRING","'setUri'",83],")",["T_OBJECT_OPERATOR","->",83],["T_STRING","willReturnSelf",83],"(",")",";",["T_WHITESPACE","\n        ",83],["T_VARIABLE","$httpClientMock",84],["T_OBJECT_OPERATOR","->",84],["T_STRING","expects",84],"(",["T_VARIABLE","$this",84],["T_OBJECT_OPERATOR","->",84],["T_STRING","atLeastOnce",84],"(",")",")",["T_OBJECT_OPERATOR","->",84],["T_STRING","method",84],"(",["T_CONSTANT_ENCAPSED_STRING","'setConfig'",84],")",["T_OBJECT_OPERATOR","->",84],["T_STRING","willReturnSelf",84],"(",")",";",["T_WHITESPACE","\n        ",84],["T_VARIABLE","$httpClientMock",85],["T_OBJECT_OPERATOR","->",85],["T_STRING","expects",85],"(",["T_VARIABLE","$this",85],["T_OBJECT_OPERATOR","->",85],["T_STRING","atLeastOnce",85],"(",")",")",["T_OBJECT_OPERATOR","->",85],["T_STRING","method",85],"(",["T_CONSTANT_ENCAPSED_STRING","'request'",85],")",["T_OBJECT_OPERATOR","->",85],["T_STRING","willReturn",85],"(",["T_VARIABLE","$httpResponseMock",85],")",";",["T_WHITESPACE","\n        ",85],["T_VARIABLE","$httpResponseMock",86],["T_OBJECT_OPERATOR","->",86],["T_STRING","expects",86],"(",["T_VARIABLE","$this",86],["T_OBJECT_OPERATOR","->",86],["T_STRING","any",86],"(",")",")",["T_OBJECT_OPERATOR","->",86],["T_STRING","method",86],"(",["T_CONSTANT_ENCAPSED_STRING","'getBody'",86],")",["T_OBJECT_OPERATOR","->",86],["T_STRING","willReturn",86],"(",["T_VARIABLE","$responseBody",86],")",";",["T_WHITESPACE","\n\n        ",86],["T_VARIABLE","$this",88],["T_OBJECT_OPERATOR","->",88],["T_STRING","assertEquals",88],"(",["T_VARIABLE","$expectedCurrencyRateList",88],",",["T_WHITESPACE"," ",88],["T_VARIABLE","$this",88],["T_OBJECT_OPERATOR","->",88],["T_STRING","model",88],["T_OBJECT_OPERATOR","->",88],["T_STRING","fetchRates",88],"(",")",")",";",["T_WHITESPACE","\n        ",88],["T_VARIABLE","$messages",89],["T_WHITESPACE"," ",89],"=",["T_WHITESPACE"," ",89],["T_VARIABLE","$this",89],["T_OBJECT_OPERATOR","->",89],["T_STRING","model",89],["T_OBJECT_OPERATOR","->",89],["T_STRING","getMessages",89],"(",")",";",["T_WHITESPACE","\n        ",89],["T_VARIABLE","$this",90],["T_OBJECT_OPERATOR","->",90],["T_STRING","assertNotEmpty",90],"(",["T_VARIABLE","$messages",90],")",";",["T_WHITESPACE","\n        ",90],["T_VARIABLE","$this",91],["T_OBJECT_OPERATOR","->",91],["T_STRING","assertTrue",91],"(",["T_STRING","is_array",91],"(",["T_VARIABLE","$messages",91],")",")",";",["T_WHITESPACE","\n        ",91],["T_VARIABLE","$this",92],["T_OBJECT_OPERATOR","->",92],["T_STRING","assertEquals",92],"(",["T_VARIABLE","$message",92],",",["T_WHITESPACE"," ",92],["T_STRING_CAST","(string)",92],["T_VARIABLE","$messages",92],"[",["T_LNUMBER","0",92],"]",")",";",["T_WHITESPACE","\n    ",92],"}",["T_WHITESPACE","\n",93],"}",["T_WHITESPACE","\n",94]]
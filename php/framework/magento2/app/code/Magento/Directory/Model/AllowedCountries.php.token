[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Copyright \u00c2\u00a9 2013-2017 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n *\/",2],["T_WHITESPACE","\n\n",5],["T_NAMESPACE","namespace",7],["T_WHITESPACE"," ",7],["T_STRING","Magento",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Directory",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Model",7],";",["T_WHITESPACE","\n\n",7],["T_USE","use",9],["T_WHITESPACE"," ",9],["T_STRING","Magento",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Framework",9],["T_NS_SEPARATOR","\\",9],["T_STRING","App",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Config",9],["T_NS_SEPARATOR","\\",9],["T_STRING","ScopeConfigInterface",9],";",["T_WHITESPACE","\n",9],["T_USE","use",10],["T_WHITESPACE"," ",10],["T_STRING","Magento",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Framework",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Data",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Collection",10],["T_NS_SEPARATOR","\\",10],["T_STRING","AbstractDb",10],";",["T_WHITESPACE","\n",10],["T_USE","use",11],["T_WHITESPACE"," ",11],["T_STRING","Magento",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Store",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Model",11],["T_NS_SEPARATOR","\\",11],["T_STRING","ScopeInterface",11],";",["T_WHITESPACE","\n",11],["T_USE","use",12],["T_WHITESPACE"," ",12],["T_STRING","Magento",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Store",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Model",12],["T_NS_SEPARATOR","\\",12],["T_STRING","StoreManagerInterface",12],";",["T_WHITESPACE","\n\n",12],["T_DOC_COMMENT","\/**\n * Class CountryHandler\n *\/",14],["T_WHITESPACE","\n",16],["T_CLASS","class",17],["T_WHITESPACE"," ",17],["T_STRING","AllowedCountries",17],["T_WHITESPACE","\n",17],"{",["T_WHITESPACE","\n    ",18],["T_CONST","const",19],["T_WHITESPACE"," ",19],["T_STRING","ALLOWED_COUNTRIES_PATH",19],["T_WHITESPACE"," ",19],"=",["T_WHITESPACE"," ",19],["T_CONSTANT_ENCAPSED_STRING","'general\/country\/allow'",19],";",["T_WHITESPACE","\n\n    ",19],["T_DOC_COMMENT","\/**\n     * @var ScopeConfigInterface\n     *\/",21],["T_WHITESPACE","\n    ",23],["T_PRIVATE","private",24],["T_WHITESPACE"," ",24],["T_VARIABLE","$scopeConfig",24],";",["T_WHITESPACE","\n\n    ",24],["T_DOC_COMMENT","\/**\n     * @var StoreManagerInterface\n     *\/",26],["T_WHITESPACE","\n    ",28],["T_PRIVATE","private",29],["T_WHITESPACE"," ",29],["T_VARIABLE","$storeManager",29],";",["T_WHITESPACE","\n\n    ",29],["T_DOC_COMMENT","\/**\n     * @param \\Magento\\Framework\\App\\Config\\ScopeConfigInterface $scopeConfig\n     * @param \\Magento\\Store\\Model\\StoreManagerInterface $storeManager\n     * @return void\n     *\/",31],["T_WHITESPACE","\n    ",35],["T_PUBLIC","public",36],["T_WHITESPACE"," ",36],["T_FUNCTION","function",36],["T_WHITESPACE"," ",36],["T_STRING","__construct",36],"(",["T_WHITESPACE","\n        ",36],["T_STRING","ScopeConfigInterface",37],["T_WHITESPACE"," ",37],["T_VARIABLE","$scopeConfig",37],",",["T_WHITESPACE","\n        ",37],["T_STRING","StoreManagerInterface",38],["T_WHITESPACE"," ",38],["T_VARIABLE","$storeManager",38],["T_WHITESPACE","\n    ",38],")",["T_WHITESPACE"," ",39],"{",["T_WHITESPACE","\n        ",39],["T_VARIABLE","$this",40],["T_OBJECT_OPERATOR","->",40],["T_STRING","scopeConfig",40],["T_WHITESPACE"," ",40],"=",["T_WHITESPACE"," ",40],["T_VARIABLE","$scopeConfig",40],";",["T_WHITESPACE","\n        ",40],["T_VARIABLE","$this",41],["T_OBJECT_OPERATOR","->",41],["T_STRING","storeManager",41],["T_WHITESPACE"," ",41],"=",["T_WHITESPACE"," ",41],["T_VARIABLE","$storeManager",41],";",["T_WHITESPACE","\n    ",41],"}",["T_WHITESPACE","\n\n    ",42],["T_DOC_COMMENT","\/**\n     * Retrieve all allowed countries for scope or scopes\n     *\n     * @param string | null $scopeCode\n     * @param string $scope\n     * @return array\n     *\/",44],["T_WHITESPACE","\n    ",50],["T_PUBLIC","public",51],["T_WHITESPACE"," ",51],["T_FUNCTION","function",51],["T_WHITESPACE"," ",51],["T_STRING","getAllowedCountries",51],"(",["T_WHITESPACE","\n        ",51],["T_VARIABLE","$scope",52],["T_WHITESPACE"," ",52],"=",["T_WHITESPACE"," ",52],["T_STRING","ScopeInterface",52],["T_DOUBLE_COLON","::",52],["T_STRING","SCOPE_WEBSITE",52],",",["T_WHITESPACE","\n        ",52],["T_VARIABLE","$scopeCode",53],["T_WHITESPACE"," ",53],"=",["T_WHITESPACE"," ",53],["T_STRING","null",53],["T_WHITESPACE","\n    ",53],")",["T_WHITESPACE"," ",54],"{",["T_WHITESPACE","\n        ",54],["T_IF","if",55],["T_WHITESPACE"," ",55],"(",["T_EMPTY","empty",55],"(",["T_VARIABLE","$scopeCode",55],")",")",["T_WHITESPACE"," ",55],"{",["T_WHITESPACE","\n            ",55],["T_VARIABLE","$scopeCode",56],["T_WHITESPACE"," ",56],"=",["T_WHITESPACE"," ",56],["T_VARIABLE","$this",56],["T_OBJECT_OPERATOR","->",56],["T_STRING","getDefaultScopeCode",56],"(",["T_VARIABLE","$scope",56],")",";",["T_WHITESPACE","\n        ",56],"}",["T_WHITESPACE","\n\n        ",57],["T_SWITCH","switch",59],["T_WHITESPACE"," ",59],"(",["T_VARIABLE","$scope",59],")",["T_WHITESPACE"," ",59],"{",["T_WHITESPACE","\n            ",59],["T_CASE","case",60],["T_WHITESPACE"," ",60],["T_STRING","ScopeInterface",60],["T_DOUBLE_COLON","::",60],["T_STRING","SCOPE_WEBSITES",60],":",["T_WHITESPACE","\n            ",60],["T_CASE","case",61],["T_WHITESPACE"," ",61],["T_STRING","ScopeInterface",61],["T_DOUBLE_COLON","::",61],["T_STRING","SCOPE_STORES",61],":",["T_WHITESPACE","\n                ",61],["T_VARIABLE","$allowedCountries",62],["T_WHITESPACE"," ",62],"=",["T_WHITESPACE"," ",62],"[","]",";",["T_WHITESPACE","\n                ",62],["T_FOREACH","foreach",63],["T_WHITESPACE"," ",63],"(",["T_VARIABLE","$scopeCode",63],["T_WHITESPACE"," ",63],["T_AS","as",63],["T_WHITESPACE"," ",63],["T_VARIABLE","$singleFilter",63],")",["T_WHITESPACE"," ",63],"{",["T_WHITESPACE","\n                    ",63],["T_VARIABLE","$allowedCountries",64],["T_WHITESPACE"," ",64],"=",["T_WHITESPACE"," ",64],["T_STRING","array_merge",64],"(",["T_WHITESPACE","\n                        ",64],["T_VARIABLE","$allowedCountries",65],",",["T_WHITESPACE","\n                        ",65],["T_VARIABLE","$this",66],["T_OBJECT_OPERATOR","->",66],["T_STRING","getCountriesFromConfig",66],"(",["T_VARIABLE","$this",66],["T_OBJECT_OPERATOR","->",66],["T_STRING","getSingleScope",66],"(",["T_VARIABLE","$scope",66],")",",",["T_WHITESPACE"," ",66],["T_VARIABLE","$singleFilter",66],")",["T_WHITESPACE","\n                    ",66],")",";",["T_WHITESPACE","\n                ",67],"}",["T_WHITESPACE","\n                ",68],["T_BREAK","break",69],";",["T_WHITESPACE","\n            ",69],["T_DEFAULT","default",70],":",["T_WHITESPACE","\n                ",70],["T_VARIABLE","$allowedCountries",71],["T_WHITESPACE"," ",71],"=",["T_WHITESPACE"," ",71],["T_VARIABLE","$this",71],["T_OBJECT_OPERATOR","->",71],["T_STRING","getCountriesFromConfig",71],"(",["T_VARIABLE","$scope",71],",",["T_WHITESPACE"," ",71],["T_VARIABLE","$scopeCode",71],")",";",["T_WHITESPACE","\n        ",71],"}",["T_WHITESPACE","\n\n        ",72],["T_RETURN","return",74],["T_WHITESPACE"," ",74],["T_VARIABLE","$this",74],["T_OBJECT_OPERATOR","->",74],["T_STRING","makeCountriesUnique",74],"(",["T_VARIABLE","$allowedCountries",74],")",";",["T_WHITESPACE","\n    ",74],"}",["T_WHITESPACE","\n\n    ",75],["T_DOC_COMMENT","\/**\n     * Resolve scope code by scope\n     *\n     * @throws \\InvalidArgumentException\n     * @param string $scope\n     * @return array|int\n     *\/",77],["T_WHITESPACE","\n    ",83],["T_PRIVATE","private",84],["T_WHITESPACE"," ",84],["T_FUNCTION","function",84],["T_WHITESPACE"," ",84],["T_STRING","getDefaultScopeCode",84],"(",["T_VARIABLE","$scope",84],")",["T_WHITESPACE","\n    ",84],"{",["T_WHITESPACE","\n        ",85],["T_SWITCH","switch",86],["T_WHITESPACE"," ",86],"(",["T_VARIABLE","$scope",86],")",["T_WHITESPACE"," ",86],"{",["T_WHITESPACE","\n            ",86],["T_CASE","case",87],["T_WHITESPACE"," ",87],["T_STRING","ScopeInterface",87],["T_DOUBLE_COLON","::",87],["T_STRING","SCOPE_WEBSITE",87],":",["T_WHITESPACE","\n                ",87],["T_RETURN","return",88],["T_WHITESPACE"," ",88],["T_VARIABLE","$this",88],["T_OBJECT_OPERATOR","->",88],["T_STRING","storeManager",88],["T_OBJECT_OPERATOR","->",88],["T_STRING","getWebsite",88],"(",")",["T_OBJECT_OPERATOR","->",88],["T_STRING","getId",88],"(",")",";",["T_WHITESPACE","\n            ",88],["T_CASE","case",89],["T_WHITESPACE"," ",89],["T_STRING","ScopeInterface",89],["T_DOUBLE_COLON","::",89],["T_STRING","SCOPE_STORE",89],":",["T_WHITESPACE","\n                ",89],["T_RETURN","return",90],["T_WHITESPACE"," ",90],["T_VARIABLE","$this",90],["T_OBJECT_OPERATOR","->",90],["T_STRING","storeManager",90],["T_OBJECT_OPERATOR","->",90],["T_STRING","getStore",90],"(",")",["T_OBJECT_OPERATOR","->",90],["T_STRING","getId",90],"(",")",";",["T_WHITESPACE","\n            ",90],["T_CASE","case",91],["T_WHITESPACE"," ",91],["T_STRING","ScopeInterface",91],["T_DOUBLE_COLON","::",91],["T_STRING","SCOPE_GROUP",91],":",["T_WHITESPACE","\n                ",91],["T_RETURN","return",92],["T_WHITESPACE"," ",92],["T_VARIABLE","$this",92],["T_OBJECT_OPERATOR","->",92],["T_STRING","storeManager",92],["T_OBJECT_OPERATOR","->",92],["T_STRING","getGroup",92],"(",")",["T_OBJECT_OPERATOR","->",92],["T_STRING","getId",92],"(",")",";",["T_WHITESPACE","\n            ",92],["T_CASE","case",93],["T_WHITESPACE"," ",93],["T_STRING","ScopeInterface",93],["T_DOUBLE_COLON","::",93],["T_STRING","SCOPE_WEBSITES",93],":",["T_WHITESPACE","\n                ",93],["T_RETURN","return",94],["T_WHITESPACE"," ",94],"[",["T_VARIABLE","$this",94],["T_OBJECT_OPERATOR","->",94],["T_STRING","storeManager",94],["T_OBJECT_OPERATOR","->",94],["T_STRING","getWebsite",94],"(",")",["T_OBJECT_OPERATOR","->",94],["T_STRING","getId",94],"(",")","]",";",["T_WHITESPACE","\n            ",94],["T_CASE","case",95],["T_WHITESPACE"," ",95],["T_STRING","ScopeInterface",95],["T_DOUBLE_COLON","::",95],["T_STRING","SCOPE_STORES",95],":",["T_WHITESPACE","\n                ",95],["T_RETURN","return",96],["T_WHITESPACE"," ",96],"[",["T_VARIABLE","$this",96],["T_OBJECT_OPERATOR","->",96],["T_STRING","storeManager",96],["T_OBJECT_OPERATOR","->",96],["T_STRING","getStore",96],"(",")",["T_OBJECT_OPERATOR","->",96],["T_STRING","getId",96],"(",")","]",";",["T_WHITESPACE","\n            ",96],["T_DEFAULT","default",97],":",["T_WHITESPACE","\n                ",97],["T_THROW","throw",98],["T_WHITESPACE"," ",98],["T_NEW","new",98],["T_WHITESPACE"," ",98],["T_NS_SEPARATOR","\\",98],["T_STRING","InvalidArgumentException",98],"(",["T_CONSTANT_ENCAPSED_STRING","\"Invalid scope is specified\"",98],")",";",["T_WHITESPACE","\n        ",98],"}",["T_WHITESPACE","\n    ",99],"}",["T_WHITESPACE","\n\n    ",100],["T_DOC_COMMENT","\/**\n     * Return Unique Countries by merging them by keys\n     *\n     * @param array $allowedCountries\n     * @return array\n     *\/",102],["T_WHITESPACE","\n    ",107],["T_PUBLIC","public",108],["T_WHITESPACE"," ",108],["T_FUNCTION","function",108],["T_WHITESPACE"," ",108],["T_STRING","makeCountriesUnique",108],"(",["T_ARRAY","array",108],["T_WHITESPACE"," ",108],["T_VARIABLE","$allowedCountries",108],")",["T_WHITESPACE","\n    ",108],"{",["T_WHITESPACE","\n        ",109],["T_RETURN","return",110],["T_WHITESPACE"," ",110],["T_STRING","array_combine",110],"(",["T_VARIABLE","$allowedCountries",110],",",["T_WHITESPACE"," ",110],["T_VARIABLE","$allowedCountries",110],")",";",["T_WHITESPACE","\n    ",110],"}",["T_WHITESPACE","\n\n    ",111],["T_DOC_COMMENT","\/**\n     * Takes countries from Countries Config data\n     *\n     * @param string $scope\n     * @param int $scopeCode\n     * @return array\n     *\/",113],["T_WHITESPACE","\n    ",119],["T_PUBLIC","public",120],["T_WHITESPACE"," ",120],["T_FUNCTION","function",120],["T_WHITESPACE"," ",120],["T_STRING","getCountriesFromConfig",120],"(",["T_VARIABLE","$scope",120],",",["T_WHITESPACE"," ",120],["T_VARIABLE","$scopeCode",120],")",["T_WHITESPACE","\n    ",120],"{",["T_WHITESPACE","\n        ",121],["T_RETURN","return",122],["T_WHITESPACE"," ",122],["T_STRING","explode",122],"(",["T_WHITESPACE","\n            ",122],["T_CONSTANT_ENCAPSED_STRING","','",123],",",["T_WHITESPACE","\n            ",123],["T_STRING_CAST","(string)",124],["T_WHITESPACE"," ",124],["T_VARIABLE","$this",124],["T_OBJECT_OPERATOR","->",124],["T_STRING","scopeConfig",124],["T_OBJECT_OPERATOR","->",124],["T_STRING","getValue",124],"(",["T_WHITESPACE","\n                ",124],["T_STRING","self",125],["T_DOUBLE_COLON","::",125],["T_STRING","ALLOWED_COUNTRIES_PATH",125],",",["T_WHITESPACE","\n                ",125],["T_VARIABLE","$scope",126],",",["T_WHITESPACE","\n                ",126],["T_VARIABLE","$scopeCode",127],["T_WHITESPACE","\n            ",127],")",["T_WHITESPACE","\n        ",128],")",";",["T_WHITESPACE","\n    ",129],"}",["T_WHITESPACE","\n\n    ",130],["T_DOC_COMMENT","\/**\n     * Return Single Scope\n     *\n     * @param string $scope\n     * @return string\n     *\/",132],["T_WHITESPACE","\n    ",137],["T_PRIVATE","private",138],["T_WHITESPACE"," ",138],["T_FUNCTION","function",138],["T_WHITESPACE"," ",138],["T_STRING","getSingleScope",138],"(",["T_VARIABLE","$scope",138],")",["T_WHITESPACE","\n    ",138],"{",["T_WHITESPACE","\n        ",139],["T_IF","if",140],["T_WHITESPACE"," ",140],"(",["T_VARIABLE","$scope",140],["T_WHITESPACE"," ",140],["T_IS_EQUAL","==",140],["T_WHITESPACE"," ",140],["T_STRING","ScopeInterface",140],["T_DOUBLE_COLON","::",140],["T_STRING","SCOPE_WEBSITES",140],")",["T_WHITESPACE"," ",140],"{",["T_WHITESPACE","\n            ",140],["T_RETURN","return",141],["T_WHITESPACE"," ",141],["T_STRING","ScopeInterface",141],["T_DOUBLE_COLON","::",141],["T_STRING","SCOPE_WEBSITE",141],";",["T_WHITESPACE","\n        ",141],"}",["T_WHITESPACE","\n\n        ",142],["T_IF","if",144],["T_WHITESPACE"," ",144],"(",["T_VARIABLE","$scope",144],["T_WHITESPACE"," ",144],["T_IS_EQUAL","==",144],["T_WHITESPACE"," ",144],["T_STRING","ScopeInterface",144],["T_DOUBLE_COLON","::",144],["T_STRING","SCOPE_STORES",144],")",["T_WHITESPACE"," ",144],"{",["T_WHITESPACE","\n            ",144],["T_RETURN","return",145],["T_WHITESPACE"," ",145],["T_STRING","ScopeInterface",145],["T_DOUBLE_COLON","::",145],["T_STRING","SCOPE_STORE",145],";",["T_WHITESPACE","\n        ",145],"}",["T_WHITESPACE","\n\n        ",146],["T_RETURN","return",148],["T_WHITESPACE"," ",148],["T_VARIABLE","$scope",148],";",["T_WHITESPACE","\n    ",148],"}",["T_WHITESPACE","\n",149],"}",["T_WHITESPACE","\n",150]]
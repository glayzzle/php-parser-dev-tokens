[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Copyright \u00c2\u00a9 2013-2017 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n *\/",2],["T_WHITESPACE","\n\n",5],["T_DOC_COMMENT","\/**\n * Directory Currency Resource Model\n *\/",7],["T_WHITESPACE","\n",9],["T_NAMESPACE","namespace",10],["T_WHITESPACE"," ",10],["T_STRING","Magento",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Directory",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Model",10],["T_NS_SEPARATOR","\\",10],["T_STRING","ResourceModel",10],";",["T_WHITESPACE","\n\n",10],["T_CLASS","class",12],["T_WHITESPACE"," ",12],["T_STRING","Currency",12],["T_WHITESPACE"," ",12],["T_EXTENDS","extends",12],["T_WHITESPACE"," ",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Magento",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Framework",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Model",12],["T_NS_SEPARATOR","\\",12],["T_STRING","ResourceModel",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Db",12],["T_NS_SEPARATOR","\\",12],["T_STRING","AbstractDb",12],["T_WHITESPACE","\n",12],"{",["T_WHITESPACE","\n    ",13],["T_DOC_COMMENT","\/**\n     * Currency rate table\n     *\n     * @var string\n     *\/",14],["T_WHITESPACE","\n    ",18],["T_PROTECTED","protected",19],["T_WHITESPACE"," ",19],["T_VARIABLE","$_currencyRateTable",19],";",["T_WHITESPACE","\n\n    ",19],["T_DOC_COMMENT","\/**\n     * Currency rate cache array\n     *\n     * @var array\n     *\/",21],["T_WHITESPACE","\n    ",25],["T_PROTECTED","protected",26],["T_WHITESPACE"," ",26],["T_STATIC","static",26],["T_WHITESPACE"," ",26],["T_VARIABLE","$_rateCache",26],";",["T_WHITESPACE","\n\n    ",26],["T_DOC_COMMENT","\/**\n     * Define main and currency rate tables\n     *\n     * @return void\n     *\/",28],["T_WHITESPACE","\n    ",32],["T_PROTECTED","protected",33],["T_WHITESPACE"," ",33],["T_FUNCTION","function",33],["T_WHITESPACE"," ",33],["T_STRING","_construct",33],"(",")",["T_WHITESPACE","\n    ",33],"{",["T_WHITESPACE","\n        ",34],["T_VARIABLE","$this",35],["T_OBJECT_OPERATOR","->",35],["T_STRING","_init",35],"(",["T_CONSTANT_ENCAPSED_STRING","'directory_currency'",35],",",["T_WHITESPACE"," ",35],["T_CONSTANT_ENCAPSED_STRING","'currency_code'",35],")",";",["T_WHITESPACE","\n        ",35],["T_VARIABLE","$this",36],["T_OBJECT_OPERATOR","->",36],["T_STRING","_currencyRateTable",36],["T_WHITESPACE"," ",36],"=",["T_WHITESPACE"," ",36],["T_VARIABLE","$this",36],["T_OBJECT_OPERATOR","->",36],["T_STRING","getTable",36],"(",["T_CONSTANT_ENCAPSED_STRING","'directory_currency_rate'",36],")",";",["T_WHITESPACE","\n    ",36],"}",["T_WHITESPACE","\n\n    ",37],["T_DOC_COMMENT","\/**\n     * Retrieve currency rate (only base=>allowed)\n     *\n     * @param \\Magento\\Directory\\Model\\Currency|string $currencyFrom\n     * @param \\Magento\\Directory\\Model\\Currency|string $currencyTo\n     * @return float\n     *\/",39],["T_WHITESPACE","\n    ",45],["T_PUBLIC","public",46],["T_WHITESPACE"," ",46],["T_FUNCTION","function",46],["T_WHITESPACE"," ",46],["T_STRING","getRate",46],"(",["T_VARIABLE","$currencyFrom",46],",",["T_WHITESPACE"," ",46],["T_VARIABLE","$currencyTo",46],")",["T_WHITESPACE","\n    ",46],"{",["T_WHITESPACE","\n        ",47],["T_IF","if",48],["T_WHITESPACE"," ",48],"(",["T_VARIABLE","$currencyFrom",48],["T_WHITESPACE"," ",48],["T_INSTANCEOF","instanceof",48],["T_WHITESPACE"," ",48],["T_NS_SEPARATOR","\\",48],["T_STRING","Magento",48],["T_NS_SEPARATOR","\\",48],["T_STRING","Directory",48],["T_NS_SEPARATOR","\\",48],["T_STRING","Model",48],["T_NS_SEPARATOR","\\",48],["T_STRING","Currency",48],")",["T_WHITESPACE"," ",48],"{",["T_WHITESPACE","\n            ",48],["T_VARIABLE","$currencyFrom",49],["T_WHITESPACE"," ",49],"=",["T_WHITESPACE"," ",49],["T_VARIABLE","$currencyFrom",49],["T_OBJECT_OPERATOR","->",49],["T_STRING","getCode",49],"(",")",";",["T_WHITESPACE","\n        ",49],"}",["T_WHITESPACE","\n\n        ",50],["T_IF","if",52],["T_WHITESPACE"," ",52],"(",["T_VARIABLE","$currencyTo",52],["T_WHITESPACE"," ",52],["T_INSTANCEOF","instanceof",52],["T_WHITESPACE"," ",52],["T_NS_SEPARATOR","\\",52],["T_STRING","Magento",52],["T_NS_SEPARATOR","\\",52],["T_STRING","Directory",52],["T_NS_SEPARATOR","\\",52],["T_STRING","Model",52],["T_NS_SEPARATOR","\\",52],["T_STRING","Currency",52],")",["T_WHITESPACE"," ",52],"{",["T_WHITESPACE","\n            ",52],["T_VARIABLE","$currencyTo",53],["T_WHITESPACE"," ",53],"=",["T_WHITESPACE"," ",53],["T_VARIABLE","$currencyTo",53],["T_OBJECT_OPERATOR","->",53],["T_STRING","getCode",53],"(",")",";",["T_WHITESPACE","\n        ",53],"}",["T_WHITESPACE","\n\n        ",54],["T_IF","if",56],["T_WHITESPACE"," ",56],"(",["T_VARIABLE","$currencyFrom",56],["T_WHITESPACE"," ",56],["T_IS_EQUAL","==",56],["T_WHITESPACE"," ",56],["T_VARIABLE","$currencyTo",56],")",["T_WHITESPACE"," ",56],"{",["T_WHITESPACE","\n            ",56],["T_RETURN","return",57],["T_WHITESPACE"," ",57],["T_LNUMBER","1",57],";",["T_WHITESPACE","\n        ",57],"}",["T_WHITESPACE","\n\n        ",58],["T_IF","if",60],["T_WHITESPACE"," ",60],"(","!",["T_ISSET","isset",60],"(",["T_STRING","self",60],["T_DOUBLE_COLON","::",60],["T_VARIABLE","$_rateCache",60],"[",["T_VARIABLE","$currencyFrom",60],"]","[",["T_VARIABLE","$currencyTo",60],"]",")",")",["T_WHITESPACE"," ",60],"{",["T_WHITESPACE","\n            ",60],["T_VARIABLE","$connection",61],["T_WHITESPACE"," ",61],"=",["T_WHITESPACE"," ",61],["T_VARIABLE","$this",61],["T_OBJECT_OPERATOR","->",61],["T_STRING","getConnection",61],"(",")",";",["T_WHITESPACE","\n            ",61],["T_VARIABLE","$bind",62],["T_WHITESPACE"," ",62],"=",["T_WHITESPACE"," ",62],"[",["T_CONSTANT_ENCAPSED_STRING","':currency_from'",62],["T_WHITESPACE"," ",62],["T_DOUBLE_ARROW","=>",62],["T_WHITESPACE"," ",62],["T_STRING","strtoupper",62],"(",["T_VARIABLE","$currencyFrom",62],")",",",["T_WHITESPACE"," ",62],["T_CONSTANT_ENCAPSED_STRING","':currency_to'",62],["T_WHITESPACE"," ",62],["T_DOUBLE_ARROW","=>",62],["T_WHITESPACE"," ",62],["T_STRING","strtoupper",62],"(",["T_VARIABLE","$currencyTo",62],")","]",";",["T_WHITESPACE","\n            ",62],["T_VARIABLE","$select",63],["T_WHITESPACE"," ",63],"=",["T_WHITESPACE"," ",63],["T_VARIABLE","$connection",63],["T_OBJECT_OPERATOR","->",63],["T_STRING","select",63],"(",")",["T_OBJECT_OPERATOR","->",63],["T_STRING","from",63],"(",["T_WHITESPACE","\n                ",63],["T_VARIABLE","$this",64],["T_OBJECT_OPERATOR","->",64],["T_STRING","_currencyRateTable",64],",",["T_WHITESPACE","\n                ",64],["T_CONSTANT_ENCAPSED_STRING","'rate'",65],["T_WHITESPACE","\n            ",65],")",["T_OBJECT_OPERATOR","->",66],["T_STRING","where",66],"(",["T_WHITESPACE","\n                ",66],["T_CONSTANT_ENCAPSED_STRING","'currency_from = :currency_from'",67],["T_WHITESPACE","\n            ",67],")",["T_OBJECT_OPERATOR","->",68],["T_STRING","where",68],"(",["T_WHITESPACE","\n                ",68],["T_CONSTANT_ENCAPSED_STRING","'currency_to = :currency_to'",69],["T_WHITESPACE","\n            ",69],")",";",["T_WHITESPACE","\n\n            ",70],["T_STRING","self",72],["T_DOUBLE_COLON","::",72],["T_VARIABLE","$_rateCache",72],"[",["T_VARIABLE","$currencyFrom",72],"]","[",["T_VARIABLE","$currencyTo",72],"]",["T_WHITESPACE"," ",72],"=",["T_WHITESPACE"," ",72],["T_VARIABLE","$connection",72],["T_OBJECT_OPERATOR","->",72],["T_STRING","fetchOne",72],"(",["T_VARIABLE","$select",72],",",["T_WHITESPACE"," ",72],["T_VARIABLE","$bind",72],")",";",["T_WHITESPACE","\n        ",72],"}",["T_WHITESPACE","\n\n        ",73],["T_RETURN","return",75],["T_WHITESPACE"," ",75],["T_STRING","self",75],["T_DOUBLE_COLON","::",75],["T_VARIABLE","$_rateCache",75],"[",["T_VARIABLE","$currencyFrom",75],"]","[",["T_VARIABLE","$currencyTo",75],"]",";",["T_WHITESPACE","\n    ",75],"}",["T_WHITESPACE","\n\n    ",76],["T_DOC_COMMENT","\/**\n     * Retrieve currency rate (base=>allowed or allowed=>base)\n     *\n     * @param \\Magento\\Directory\\Model\\Currency|string $currencyFrom\n     * @param \\Magento\\Directory\\Model\\Currency|string $currencyTo\n     * @return float\n     *\/",78],["T_WHITESPACE","\n    ",84],["T_PUBLIC","public",85],["T_WHITESPACE"," ",85],["T_FUNCTION","function",85],["T_WHITESPACE"," ",85],["T_STRING","getAnyRate",85],"(",["T_VARIABLE","$currencyFrom",85],",",["T_WHITESPACE"," ",85],["T_VARIABLE","$currencyTo",85],")",["T_WHITESPACE","\n    ",85],"{",["T_WHITESPACE","\n        ",86],["T_IF","if",87],["T_WHITESPACE"," ",87],"(",["T_VARIABLE","$currencyFrom",87],["T_WHITESPACE"," ",87],["T_INSTANCEOF","instanceof",87],["T_WHITESPACE"," ",87],["T_NS_SEPARATOR","\\",87],["T_STRING","Magento",87],["T_NS_SEPARATOR","\\",87],["T_STRING","Directory",87],["T_NS_SEPARATOR","\\",87],["T_STRING","Model",87],["T_NS_SEPARATOR","\\",87],["T_STRING","Currency",87],")",["T_WHITESPACE"," ",87],"{",["T_WHITESPACE","\n            ",87],["T_VARIABLE","$currencyFrom",88],["T_WHITESPACE"," ",88],"=",["T_WHITESPACE"," ",88],["T_VARIABLE","$currencyFrom",88],["T_OBJECT_OPERATOR","->",88],["T_STRING","getCode",88],"(",")",";",["T_WHITESPACE","\n        ",88],"}",["T_WHITESPACE","\n\n        ",89],["T_IF","if",91],["T_WHITESPACE"," ",91],"(",["T_VARIABLE","$currencyTo",91],["T_WHITESPACE"," ",91],["T_INSTANCEOF","instanceof",91],["T_WHITESPACE"," ",91],["T_NS_SEPARATOR","\\",91],["T_STRING","Magento",91],["T_NS_SEPARATOR","\\",91],["T_STRING","Directory",91],["T_NS_SEPARATOR","\\",91],["T_STRING","Model",91],["T_NS_SEPARATOR","\\",91],["T_STRING","Currency",91],")",["T_WHITESPACE"," ",91],"{",["T_WHITESPACE","\n            ",91],["T_VARIABLE","$currencyTo",92],["T_WHITESPACE"," ",92],"=",["T_WHITESPACE"," ",92],["T_VARIABLE","$currencyTo",92],["T_OBJECT_OPERATOR","->",92],["T_STRING","getCode",92],"(",")",";",["T_WHITESPACE","\n        ",92],"}",["T_WHITESPACE","\n\n        ",93],["T_IF","if",95],["T_WHITESPACE"," ",95],"(",["T_VARIABLE","$currencyFrom",95],["T_WHITESPACE"," ",95],["T_IS_EQUAL","==",95],["T_WHITESPACE"," ",95],["T_VARIABLE","$currencyTo",95],")",["T_WHITESPACE"," ",95],"{",["T_WHITESPACE","\n            ",95],["T_RETURN","return",96],["T_WHITESPACE"," ",96],["T_LNUMBER","1",96],";",["T_WHITESPACE","\n        ",96],"}",["T_WHITESPACE","\n\n        ",97],["T_IF","if",99],["T_WHITESPACE"," ",99],"(","!",["T_ISSET","isset",99],"(",["T_STRING","self",99],["T_DOUBLE_COLON","::",99],["T_VARIABLE","$_rateCache",99],"[",["T_VARIABLE","$currencyFrom",99],"]","[",["T_VARIABLE","$currencyTo",99],"]",")",")",["T_WHITESPACE"," ",99],"{",["T_WHITESPACE","\n            ",99],["T_VARIABLE","$connection",100],["T_WHITESPACE"," ",100],"=",["T_WHITESPACE"," ",100],["T_VARIABLE","$this",100],["T_OBJECT_OPERATOR","->",100],["T_STRING","getConnection",100],"(",")",";",["T_WHITESPACE","\n            ",100],["T_VARIABLE","$bind",101],["T_WHITESPACE"," ",101],"=",["T_WHITESPACE"," ",101],"[",["T_CONSTANT_ENCAPSED_STRING","':currency_from'",101],["T_WHITESPACE"," ",101],["T_DOUBLE_ARROW","=>",101],["T_WHITESPACE"," ",101],["T_STRING","strtoupper",101],"(",["T_VARIABLE","$currencyFrom",101],")",",",["T_WHITESPACE"," ",101],["T_CONSTANT_ENCAPSED_STRING","':currency_to'",101],["T_WHITESPACE"," ",101],["T_DOUBLE_ARROW","=>",101],["T_WHITESPACE"," ",101],["T_STRING","strtoupper",101],"(",["T_VARIABLE","$currencyTo",101],")","]",";",["T_WHITESPACE","\n            ",101],["T_VARIABLE","$select",102],["T_WHITESPACE"," ",102],"=",["T_WHITESPACE"," ",102],["T_VARIABLE","$connection",102],["T_OBJECT_OPERATOR","->",102],["T_STRING","select",102],"(",")",["T_OBJECT_OPERATOR","->",102],["T_STRING","from",102],"(",["T_WHITESPACE","\n                ",102],["T_VARIABLE","$this",103],["T_OBJECT_OPERATOR","->",103],["T_STRING","_currencyRateTable",103],",",["T_WHITESPACE","\n                ",103],["T_CONSTANT_ENCAPSED_STRING","'rate'",104],["T_WHITESPACE","\n            ",104],")",["T_OBJECT_OPERATOR","->",105],["T_STRING","where",105],"(",["T_WHITESPACE","\n                ",105],["T_CONSTANT_ENCAPSED_STRING","'currency_from = :currency_from'",106],["T_WHITESPACE","\n            ",106],")",["T_OBJECT_OPERATOR","->",107],["T_STRING","where",107],"(",["T_WHITESPACE","\n                ",107],["T_CONSTANT_ENCAPSED_STRING","'currency_to = :currency_to'",108],["T_WHITESPACE","\n            ",108],")",";",["T_WHITESPACE","\n\n            ",109],["T_VARIABLE","$rate",111],["T_WHITESPACE"," ",111],"=",["T_WHITESPACE"," ",111],["T_VARIABLE","$connection",111],["T_OBJECT_OPERATOR","->",111],["T_STRING","fetchOne",111],"(",["T_VARIABLE","$select",111],",",["T_WHITESPACE"," ",111],["T_VARIABLE","$bind",111],")",";",["T_WHITESPACE","\n            ",111],["T_IF","if",112],["T_WHITESPACE"," ",112],"(",["T_VARIABLE","$rate",112],["T_WHITESPACE"," ",112],["T_IS_IDENTICAL","===",112],["T_WHITESPACE"," ",112],["T_STRING","false",112],")",["T_WHITESPACE"," ",112],"{",["T_WHITESPACE","\n                ",112],["T_VARIABLE","$select",113],["T_WHITESPACE"," ",113],"=",["T_WHITESPACE"," ",113],["T_VARIABLE","$connection",113],["T_OBJECT_OPERATOR","->",113],["T_STRING","select",113],"(",")",["T_OBJECT_OPERATOR","->",113],["T_STRING","from",113],"(",["T_WHITESPACE","\n                    ",113],["T_VARIABLE","$this",114],["T_OBJECT_OPERATOR","->",114],["T_STRING","_currencyRateTable",114],",",["T_WHITESPACE","\n                    ",114],["T_NEW","new",115],["T_WHITESPACE"," ",115],["T_NS_SEPARATOR","\\",115],["T_STRING","Zend_Db_Expr",115],"(",["T_CONSTANT_ENCAPSED_STRING","'1\/rate'",115],")",["T_WHITESPACE","\n                ",115],")",["T_OBJECT_OPERATOR","->",116],["T_STRING","where",116],"(",["T_WHITESPACE","\n                    ",116],["T_CONSTANT_ENCAPSED_STRING","'currency_to = :currency_from'",117],["T_WHITESPACE","\n                ",117],")",["T_OBJECT_OPERATOR","->",118],["T_STRING","where",118],"(",["T_WHITESPACE","\n                    ",118],["T_CONSTANT_ENCAPSED_STRING","'currency_from = :currency_to'",119],["T_WHITESPACE","\n                ",119],")",";",["T_WHITESPACE","\n                ",120],["T_VARIABLE","$rate",121],["T_WHITESPACE"," ",121],"=",["T_WHITESPACE"," ",121],["T_VARIABLE","$connection",121],["T_OBJECT_OPERATOR","->",121],["T_STRING","fetchOne",121],"(",["T_VARIABLE","$select",121],",",["T_WHITESPACE"," ",121],["T_VARIABLE","$bind",121],")",";",["T_WHITESPACE","\n            ",121],"}",["T_WHITESPACE","\n            ",122],["T_STRING","self",123],["T_DOUBLE_COLON","::",123],["T_VARIABLE","$_rateCache",123],"[",["T_VARIABLE","$currencyFrom",123],"]","[",["T_VARIABLE","$currencyTo",123],"]",["T_WHITESPACE"," ",123],"=",["T_WHITESPACE"," ",123],["T_VARIABLE","$rate",123],";",["T_WHITESPACE","\n        ",123],"}",["T_WHITESPACE","\n\n        ",124],["T_RETURN","return",126],["T_WHITESPACE"," ",126],["T_STRING","self",126],["T_DOUBLE_COLON","::",126],["T_VARIABLE","$_rateCache",126],"[",["T_VARIABLE","$currencyFrom",126],"]","[",["T_VARIABLE","$currencyTo",126],"]",";",["T_WHITESPACE","\n    ",126],"}",["T_WHITESPACE","\n\n    ",127],["T_DOC_COMMENT","\/**\n     * Saving currency rates\n     *\n     * @param array $rates\n     * @return void\n     * @throws \\Magento\\Framework\\Exception\\LocalizedException\n     *\/",129],["T_WHITESPACE","\n    ",135],["T_PUBLIC","public",136],["T_WHITESPACE"," ",136],["T_FUNCTION","function",136],["T_WHITESPACE"," ",136],["T_STRING","saveRates",136],"(",["T_VARIABLE","$rates",136],")",["T_WHITESPACE","\n    ",136],"{",["T_WHITESPACE","\n        ",137],["T_IF","if",138],["T_WHITESPACE"," ",138],"(",["T_STRING","is_array",138],"(",["T_VARIABLE","$rates",138],")",["T_WHITESPACE"," ",138],["T_BOOLEAN_AND","&&",138],["T_WHITESPACE"," ",138],["T_STRING","sizeof",138],"(",["T_VARIABLE","$rates",138],")",["T_WHITESPACE"," ",138],">",["T_WHITESPACE"," ",138],["T_LNUMBER","0",138],")",["T_WHITESPACE"," ",138],"{",["T_WHITESPACE","\n            ",138],["T_VARIABLE","$connection",139],["T_WHITESPACE"," ",139],"=",["T_WHITESPACE"," ",139],["T_VARIABLE","$this",139],["T_OBJECT_OPERATOR","->",139],["T_STRING","getConnection",139],"(",")",";",["T_WHITESPACE","\n            ",139],["T_VARIABLE","$data",140],["T_WHITESPACE"," ",140],"=",["T_WHITESPACE"," ",140],"[","]",";",["T_WHITESPACE","\n            ",140],["T_FOREACH","foreach",141],["T_WHITESPACE"," ",141],"(",["T_VARIABLE","$rates",141],["T_WHITESPACE"," ",141],["T_AS","as",141],["T_WHITESPACE"," ",141],["T_VARIABLE","$currencyCode",141],["T_WHITESPACE"," ",141],["T_DOUBLE_ARROW","=>",141],["T_WHITESPACE"," ",141],["T_VARIABLE","$rate",141],")",["T_WHITESPACE"," ",141],"{",["T_WHITESPACE","\n                ",141],["T_FOREACH","foreach",142],["T_WHITESPACE"," ",142],"(",["T_VARIABLE","$rate",142],["T_WHITESPACE"," ",142],["T_AS","as",142],["T_WHITESPACE"," ",142],["T_VARIABLE","$currencyTo",142],["T_WHITESPACE"," ",142],["T_DOUBLE_ARROW","=>",142],["T_WHITESPACE"," ",142],["T_VARIABLE","$value",142],")",["T_WHITESPACE"," ",142],"{",["T_WHITESPACE","\n                    ",142],["T_VARIABLE","$value",143],["T_WHITESPACE"," ",143],"=",["T_WHITESPACE"," ",143],["T_STRING","abs",143],"(",["T_VARIABLE","$value",143],")",";",["T_WHITESPACE","\n                    ",143],["T_IF","if",144],["T_WHITESPACE"," ",144],"(",["T_VARIABLE","$value",144],["T_WHITESPACE"," ",144],["T_IS_EQUAL","==",144],["T_WHITESPACE"," ",144],["T_LNUMBER","0",144],")",["T_WHITESPACE"," ",144],"{",["T_WHITESPACE","\n                        ",144],["T_CONTINUE","continue",145],";",["T_WHITESPACE","\n                    ",145],"}",["T_WHITESPACE","\n                    ",146],["T_VARIABLE","$data",147],"[","]",["T_WHITESPACE"," ",147],"=",["T_WHITESPACE"," ",147],"[",["T_CONSTANT_ENCAPSED_STRING","'currency_from'",147],["T_WHITESPACE"," ",147],["T_DOUBLE_ARROW","=>",147],["T_WHITESPACE"," ",147],["T_VARIABLE","$currencyCode",147],",",["T_WHITESPACE"," ",147],["T_CONSTANT_ENCAPSED_STRING","'currency_to'",147],["T_WHITESPACE"," ",147],["T_DOUBLE_ARROW","=>",147],["T_WHITESPACE"," ",147],["T_VARIABLE","$currencyTo",147],",",["T_WHITESPACE"," ",147],["T_CONSTANT_ENCAPSED_STRING","'rate'",147],["T_WHITESPACE"," ",147],["T_DOUBLE_ARROW","=>",147],["T_WHITESPACE"," ",147],["T_VARIABLE","$value",147],"]",";",["T_WHITESPACE","\n                ",147],"}",["T_WHITESPACE","\n            ",148],"}",["T_WHITESPACE","\n            ",149],["T_IF","if",150],["T_WHITESPACE"," ",150],"(",["T_VARIABLE","$data",150],")",["T_WHITESPACE"," ",150],"{",["T_WHITESPACE","\n                ",150],["T_VARIABLE","$connection",151],["T_OBJECT_OPERATOR","->",151],["T_STRING","insertOnDuplicate",151],"(",["T_VARIABLE","$this",151],["T_OBJECT_OPERATOR","->",151],["T_STRING","_currencyRateTable",151],",",["T_WHITESPACE"," ",151],["T_VARIABLE","$data",151],",",["T_WHITESPACE"," ",151],"[",["T_CONSTANT_ENCAPSED_STRING","'rate'",151],"]",")",";",["T_WHITESPACE","\n            ",151],"}",["T_WHITESPACE","\n        ",152],"}",["T_WHITESPACE"," ",153],["T_ELSE","else",153],["T_WHITESPACE"," ",153],"{",["T_WHITESPACE","\n            ",153],["T_THROW","throw",154],["T_WHITESPACE"," ",154],["T_NEW","new",154],["T_WHITESPACE"," ",154],["T_NS_SEPARATOR","\\",154],["T_STRING","Magento",154],["T_NS_SEPARATOR","\\",154],["T_STRING","Framework",154],["T_NS_SEPARATOR","\\",154],["T_STRING","Exception",154],["T_NS_SEPARATOR","\\",154],["T_STRING","LocalizedException",154],"(",["T_STRING","__",154],"(",["T_CONSTANT_ENCAPSED_STRING","'Please correct the rates received'",154],")",")",";",["T_WHITESPACE","\n        ",154],"}",["T_WHITESPACE","\n    ",155],"}",["T_WHITESPACE","\n\n    ",156],["T_DOC_COMMENT","\/**\n     * Retrieve config currency data by config path\n     *\n     * @param \\Magento\\Directory\\Model\\Currency $model\n     * @param string $path\n     * @return array\n     * @SuppressWarnings(PHPMD.UnusedFormalParameter)\n     *\/",158],["T_WHITESPACE","\n    ",165],["T_PUBLIC","public",166],["T_WHITESPACE"," ",166],["T_FUNCTION","function",166],["T_WHITESPACE"," ",166],["T_STRING","getConfigCurrencies",166],"(",["T_VARIABLE","$model",166],",",["T_WHITESPACE"," ",166],["T_VARIABLE","$path",166],")",["T_WHITESPACE","\n    ",166],"{",["T_WHITESPACE","\n        ",167],["T_VARIABLE","$connection",168],["T_WHITESPACE"," ",168],"=",["T_WHITESPACE"," ",168],["T_VARIABLE","$this",168],["T_OBJECT_OPERATOR","->",168],["T_STRING","getConnection",168],"(",")",";",["T_WHITESPACE","\n        ",168],["T_VARIABLE","$bind",169],["T_WHITESPACE"," ",169],"=",["T_WHITESPACE"," ",169],"[",["T_CONSTANT_ENCAPSED_STRING","':config_path'",169],["T_WHITESPACE"," ",169],["T_DOUBLE_ARROW","=>",169],["T_WHITESPACE"," ",169],["T_VARIABLE","$path",169],"]",";",["T_WHITESPACE","\n        ",169],["T_VARIABLE","$select",170],["T_WHITESPACE"," ",170],"=",["T_WHITESPACE"," ",170],["T_VARIABLE","$connection",170],["T_OBJECT_OPERATOR","->",170],["T_STRING","select",170],"(",")",["T_OBJECT_OPERATOR","->",170],["T_STRING","from",170],"(",["T_VARIABLE","$this",170],["T_OBJECT_OPERATOR","->",170],["T_STRING","getTable",170],"(",["T_CONSTANT_ENCAPSED_STRING","'core_config_data'",170],")",")",["T_OBJECT_OPERATOR","->",170],["T_STRING","where",170],"(",["T_CONSTANT_ENCAPSED_STRING","'path = :config_path'",170],")",";",["T_WHITESPACE","\n        ",170],["T_VARIABLE","$result",171],["T_WHITESPACE"," ",171],"=",["T_WHITESPACE"," ",171],"[","]",";",["T_WHITESPACE","\n        ",171],["T_VARIABLE","$rowSet",172],["T_WHITESPACE"," ",172],"=",["T_WHITESPACE"," ",172],["T_VARIABLE","$connection",172],["T_OBJECT_OPERATOR","->",172],["T_STRING","fetchAll",172],"(",["T_VARIABLE","$select",172],",",["T_WHITESPACE"," ",172],["T_VARIABLE","$bind",172],")",";",["T_WHITESPACE","\n        ",172],["T_FOREACH","foreach",173],["T_WHITESPACE"," ",173],"(",["T_VARIABLE","$rowSet",173],["T_WHITESPACE"," ",173],["T_AS","as",173],["T_WHITESPACE"," ",173],["T_VARIABLE","$row",173],")",["T_WHITESPACE"," ",173],"{",["T_WHITESPACE","\n            ",173],["T_VARIABLE","$result",174],["T_WHITESPACE"," ",174],"=",["T_WHITESPACE"," ",174],["T_STRING","array_merge",174],"(",["T_VARIABLE","$result",174],",",["T_WHITESPACE"," ",174],["T_STRING","explode",174],"(",["T_CONSTANT_ENCAPSED_STRING","','",174],",",["T_WHITESPACE"," ",174],["T_VARIABLE","$row",174],"[",["T_CONSTANT_ENCAPSED_STRING","'value'",174],"]",")",")",";",["T_WHITESPACE","\n        ",174],"}",["T_WHITESPACE","\n        ",175],["T_STRING","sort",176],"(",["T_VARIABLE","$result",176],")",";",["T_WHITESPACE","\n\n        ",176],["T_RETURN","return",178],["T_WHITESPACE"," ",178],["T_STRING","array_unique",178],"(",["T_VARIABLE","$result",178],")",";",["T_WHITESPACE","\n    ",178],"}",["T_WHITESPACE","\n\n    ",179],["T_DOC_COMMENT","\/**\n     * Return currency rates\n     *\n     * @param string|array $currency\n     * @param array $toCurrencies\n     * @return array\n     *\/",181],["T_WHITESPACE","\n    ",187],["T_PUBLIC","public",188],["T_WHITESPACE"," ",188],["T_FUNCTION","function",188],["T_WHITESPACE"," ",188],["T_STRING","getCurrencyRates",188],"(",["T_VARIABLE","$currency",188],",",["T_WHITESPACE"," ",188],["T_VARIABLE","$toCurrencies",188],["T_WHITESPACE"," ",188],"=",["T_WHITESPACE"," ",188],["T_STRING","null",188],")",["T_WHITESPACE","\n    ",188],"{",["T_WHITESPACE","\n        ",189],["T_VARIABLE","$rates",190],["T_WHITESPACE"," ",190],"=",["T_WHITESPACE"," ",190],"[","]",";",["T_WHITESPACE","\n        ",190],["T_IF","if",191],["T_WHITESPACE"," ",191],"(",["T_STRING","is_array",191],"(",["T_VARIABLE","$currency",191],")",")",["T_WHITESPACE"," ",191],"{",["T_WHITESPACE","\n            ",191],["T_FOREACH","foreach",192],["T_WHITESPACE"," ",192],"(",["T_VARIABLE","$currency",192],["T_WHITESPACE"," ",192],["T_AS","as",192],["T_WHITESPACE"," ",192],["T_VARIABLE","$code",192],")",["T_WHITESPACE"," ",192],"{",["T_WHITESPACE","\n                ",192],["T_VARIABLE","$rates",193],"[",["T_VARIABLE","$code",193],"]",["T_WHITESPACE"," ",193],"=",["T_WHITESPACE"," ",193],["T_VARIABLE","$this",193],["T_OBJECT_OPERATOR","->",193],["T_STRING","_getRatesByCode",193],"(",["T_VARIABLE","$code",193],",",["T_WHITESPACE"," ",193],["T_VARIABLE","$toCurrencies",193],")",";",["T_WHITESPACE","\n            ",193],"}",["T_WHITESPACE","\n        ",194],"}",["T_WHITESPACE"," ",195],["T_ELSE","else",195],["T_WHITESPACE"," ",195],"{",["T_WHITESPACE","\n            ",195],["T_VARIABLE","$rates",196],["T_WHITESPACE"," ",196],"=",["T_WHITESPACE"," ",196],["T_VARIABLE","$this",196],["T_OBJECT_OPERATOR","->",196],["T_STRING","_getRatesByCode",196],"(",["T_VARIABLE","$currency",196],",",["T_WHITESPACE"," ",196],["T_VARIABLE","$toCurrencies",196],")",";",["T_WHITESPACE","\n        ",196],"}",["T_WHITESPACE","\n\n        ",197],["T_RETURN","return",199],["T_WHITESPACE"," ",199],["T_VARIABLE","$rates",199],";",["T_WHITESPACE","\n    ",199],"}",["T_WHITESPACE","\n\n    ",200],["T_DOC_COMMENT","\/**\n     * Protected method used by getCurrencyRates() method\n     *\n     * @param string $code\n     * @param array $toCurrencies\n     * @return array\n     *\/",202],["T_WHITESPACE","\n    ",208],["T_PROTECTED","protected",209],["T_WHITESPACE"," ",209],["T_FUNCTION","function",209],["T_WHITESPACE"," ",209],["T_STRING","_getRatesByCode",209],"(",["T_VARIABLE","$code",209],",",["T_WHITESPACE"," ",209],["T_VARIABLE","$toCurrencies",209],["T_WHITESPACE"," ",209],"=",["T_WHITESPACE"," ",209],["T_STRING","null",209],")",["T_WHITESPACE","\n    ",209],"{",["T_WHITESPACE","\n        ",210],["T_VARIABLE","$connection",211],["T_WHITESPACE"," ",211],"=",["T_WHITESPACE"," ",211],["T_VARIABLE","$this",211],["T_OBJECT_OPERATOR","->",211],["T_STRING","getConnection",211],"(",")",";",["T_WHITESPACE","\n        ",211],["T_VARIABLE","$bind",212],["T_WHITESPACE"," ",212],"=",["T_WHITESPACE"," ",212],"[",["T_CONSTANT_ENCAPSED_STRING","':currency_from'",212],["T_WHITESPACE"," ",212],["T_DOUBLE_ARROW","=>",212],["T_WHITESPACE"," ",212],["T_VARIABLE","$code",212],"]",";",["T_WHITESPACE","\n        ",212],["T_VARIABLE","$select",213],["T_WHITESPACE"," ",213],"=",["T_WHITESPACE"," ",213],["T_VARIABLE","$connection",213],["T_OBJECT_OPERATOR","->",213],["T_STRING","select",213],"(",")",["T_OBJECT_OPERATOR","->",213],["T_STRING","from",213],"(",["T_WHITESPACE","\n            ",213],["T_VARIABLE","$this",214],["T_OBJECT_OPERATOR","->",214],["T_STRING","getTable",214],"(",["T_CONSTANT_ENCAPSED_STRING","'directory_currency_rate'",214],")",",",["T_WHITESPACE","\n            ",214],"[",["T_CONSTANT_ENCAPSED_STRING","'currency_to'",215],",",["T_WHITESPACE"," ",215],["T_CONSTANT_ENCAPSED_STRING","'rate'",215],"]",["T_WHITESPACE","\n        ",215],")",["T_OBJECT_OPERATOR","->",216],["T_STRING","where",216],"(",["T_WHITESPACE","\n            ",216],["T_CONSTANT_ENCAPSED_STRING","'currency_from = :currency_from'",217],["T_WHITESPACE","\n        ",217],")",["T_OBJECT_OPERATOR","->",218],["T_STRING","where",218],"(",["T_WHITESPACE","\n            ",218],["T_CONSTANT_ENCAPSED_STRING","'currency_to IN(?)'",219],",",["T_WHITESPACE","\n            ",219],["T_VARIABLE","$toCurrencies",220],["T_WHITESPACE","\n        ",220],")",";",["T_WHITESPACE","\n        ",221],["T_VARIABLE","$rowSet",222],["T_WHITESPACE"," ",222],"=",["T_WHITESPACE"," ",222],["T_VARIABLE","$connection",222],["T_OBJECT_OPERATOR","->",222],["T_STRING","fetchAll",222],"(",["T_VARIABLE","$select",222],",",["T_WHITESPACE"," ",222],["T_VARIABLE","$bind",222],")",";",["T_WHITESPACE","\n        ",222],["T_VARIABLE","$result",223],["T_WHITESPACE"," ",223],"=",["T_WHITESPACE"," ",223],"[","]",";",["T_WHITESPACE","\n\n        ",223],["T_FOREACH","foreach",225],["T_WHITESPACE"," ",225],"(",["T_VARIABLE","$rowSet",225],["T_WHITESPACE"," ",225],["T_AS","as",225],["T_WHITESPACE"," ",225],["T_VARIABLE","$row",225],")",["T_WHITESPACE"," ",225],"{",["T_WHITESPACE","\n            ",225],["T_VARIABLE","$result",226],"[",["T_VARIABLE","$row",226],"[",["T_CONSTANT_ENCAPSED_STRING","'currency_to'",226],"]","]",["T_WHITESPACE"," ",226],"=",["T_WHITESPACE"," ",226],["T_VARIABLE","$row",226],"[",["T_CONSTANT_ENCAPSED_STRING","'rate'",226],"]",";",["T_WHITESPACE","\n        ",226],"}",["T_WHITESPACE","\n\n        ",227],["T_RETURN","return",229],["T_WHITESPACE"," ",229],["T_VARIABLE","$result",229],";",["T_WHITESPACE","\n    ",229],"}",["T_WHITESPACE","\n",230],"}",["T_WHITESPACE","\n",231]]
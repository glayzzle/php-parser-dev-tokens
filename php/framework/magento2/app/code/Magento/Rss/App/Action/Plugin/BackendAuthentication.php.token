[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * RSS Backend Authentication plugin\n *\n * Copyright \u00c2\u00a9 2013-2017 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n *\/",2],["T_WHITESPACE","\n",7],["T_NAMESPACE","namespace",8],["T_WHITESPACE"," ",8],["T_STRING","Magento",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Rss",8],["T_NS_SEPARATOR","\\",8],["T_STRING","App",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Action",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Plugin",8],";",["T_WHITESPACE","\n\n",8],["T_USE","use",10],["T_WHITESPACE"," ",10],["T_STRING","Magento",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Backend",10],["T_NS_SEPARATOR","\\",10],["T_STRING","App",10],["T_NS_SEPARATOR","\\",10],["T_STRING","AbstractAction",10],";",["T_WHITESPACE","\n",10],["T_USE","use",11],["T_WHITESPACE"," ",11],["T_STRING","Magento",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Framework",11],["T_NS_SEPARATOR","\\",11],["T_STRING","App",11],["T_NS_SEPARATOR","\\",11],["T_STRING","RequestInterface",11],";",["T_WHITESPACE","\n",11],["T_USE","use",12],["T_WHITESPACE"," ",12],["T_STRING","Magento",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Framework",12],["T_NS_SEPARATOR","\\",12],["T_STRING","App",12],["T_NS_SEPARATOR","\\",12],["T_STRING","ResponseInterface",12],";",["T_WHITESPACE","\n",12],["T_USE","use",13],["T_WHITESPACE"," ",13],["T_STRING","Magento",13],["T_NS_SEPARATOR","\\",13],["T_STRING","Framework",13],["T_NS_SEPARATOR","\\",13],["T_STRING","Exception",13],["T_NS_SEPARATOR","\\",13],["T_STRING","AuthenticationException",13],";",["T_WHITESPACE","\n\n",13],["T_DOC_COMMENT","\/**\n * Class BackendAuthentication\n *\n * @SuppressWarnings(PHPMD.CouplingBetweenObjects)\n *\/",15],["T_WHITESPACE","\n",19],["T_CLASS","class",20],["T_WHITESPACE"," ",20],["T_STRING","BackendAuthentication",20],["T_WHITESPACE"," ",20],["T_EXTENDS","extends",20],["T_WHITESPACE"," ",20],["T_NS_SEPARATOR","\\",20],["T_STRING","Magento",20],["T_NS_SEPARATOR","\\",20],["T_STRING","Backend",20],["T_NS_SEPARATOR","\\",20],["T_STRING","App",20],["T_NS_SEPARATOR","\\",20],["T_STRING","Action",20],["T_NS_SEPARATOR","\\",20],["T_STRING","Plugin",20],["T_NS_SEPARATOR","\\",20],["T_STRING","Authentication",20],["T_WHITESPACE","\n",20],"{",["T_WHITESPACE","\n    ",21],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Framework\\HTTP\\Authentication\n     *\/",22],["T_WHITESPACE","\n    ",24],["T_PROTECTED","protected",25],["T_WHITESPACE"," ",25],["T_VARIABLE","$httpAuthentication",25],";",["T_WHITESPACE","\n\n    ",25],["T_DOC_COMMENT","\/**\n     * @var \\Psr\\Log\\LoggerInterface\n     *\/",27],["T_WHITESPACE","\n    ",29],["T_PROTECTED","protected",30],["T_WHITESPACE"," ",30],["T_VARIABLE","$logger",30],";",["T_WHITESPACE","\n\n    ",30],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Framework\\AuthorizationInterface\n     *\/",32],["T_WHITESPACE","\n    ",34],["T_PROTECTED","protected",35],["T_WHITESPACE"," ",35],["T_VARIABLE","$authorization",35],";",["T_WHITESPACE","\n\n    ",35],["T_DOC_COMMENT","\/**\n     * @var array\n     *\/",37],["T_WHITESPACE","\n    ",39],["T_PROTECTED","protected",40],["T_WHITESPACE"," ",40],["T_VARIABLE","$aclResources",40],";",["T_WHITESPACE","\n\n    ",40],["T_DOC_COMMENT","\/**\n     * @param \\Magento\\Backend\\Model\\Auth $auth\n     * @param \\Magento\\Backend\\Model\\UrlInterface $url\n     * @param ResponseInterface $response\n     * @param \\Magento\\Framework\\App\\ActionFlag $actionFlag\n     * @param \\Magento\\Framework\\Message\\ManagerInterface $messageManager\n     * @param \\Magento\\Backend\\Model\\UrlInterface $backendUrl\n     * @param \\Magento\\Framework\\Controller\\Result\\RedirectFactory $resultRedirectFactory\n     * @param \\Magento\\Backend\\App\\BackendAppList $backendAppList\n     * @param \\Magento\\Framework\\Data\\Form\\FormKey\\Validator $formKeyValidator\n     * @param \\Magento\\Framework\\HTTP\\Authentication $httpAuthentication\n     * @param \\Psr\\Log\\LoggerInterface $logger\n     * @param \\Magento\\Framework\\AuthorizationInterface $authorization\n     * @param array $aclResources\n     * @SuppressWarnings(PHPMD.ExcessiveParameterList)\n     *\/",42],["T_WHITESPACE","\n    ",57],["T_PUBLIC","public",58],["T_WHITESPACE"," ",58],["T_FUNCTION","function",58],["T_WHITESPACE"," ",58],["T_STRING","__construct",58],"(",["T_WHITESPACE","\n        ",58],["T_NS_SEPARATOR","\\",59],["T_STRING","Magento",59],["T_NS_SEPARATOR","\\",59],["T_STRING","Backend",59],["T_NS_SEPARATOR","\\",59],["T_STRING","Model",59],["T_NS_SEPARATOR","\\",59],["T_STRING","Auth",59],["T_WHITESPACE"," ",59],["T_VARIABLE","$auth",59],",",["T_WHITESPACE","\n        ",59],["T_NS_SEPARATOR","\\",60],["T_STRING","Magento",60],["T_NS_SEPARATOR","\\",60],["T_STRING","Backend",60],["T_NS_SEPARATOR","\\",60],["T_STRING","Model",60],["T_NS_SEPARATOR","\\",60],["T_STRING","UrlInterface",60],["T_WHITESPACE"," ",60],["T_VARIABLE","$url",60],",",["T_WHITESPACE","\n        ",60],["T_STRING","ResponseInterface",61],["T_WHITESPACE"," ",61],["T_VARIABLE","$response",61],",",["T_WHITESPACE","\n        ",61],["T_NS_SEPARATOR","\\",62],["T_STRING","Magento",62],["T_NS_SEPARATOR","\\",62],["T_STRING","Framework",62],["T_NS_SEPARATOR","\\",62],["T_STRING","App",62],["T_NS_SEPARATOR","\\",62],["T_STRING","ActionFlag",62],["T_WHITESPACE"," ",62],["T_VARIABLE","$actionFlag",62],",",["T_WHITESPACE","\n        ",62],["T_NS_SEPARATOR","\\",63],["T_STRING","Magento",63],["T_NS_SEPARATOR","\\",63],["T_STRING","Framework",63],["T_NS_SEPARATOR","\\",63],["T_STRING","Message",63],["T_NS_SEPARATOR","\\",63],["T_STRING","ManagerInterface",63],["T_WHITESPACE"," ",63],["T_VARIABLE","$messageManager",63],",",["T_WHITESPACE","\n        ",63],["T_NS_SEPARATOR","\\",64],["T_STRING","Magento",64],["T_NS_SEPARATOR","\\",64],["T_STRING","Backend",64],["T_NS_SEPARATOR","\\",64],["T_STRING","Model",64],["T_NS_SEPARATOR","\\",64],["T_STRING","UrlInterface",64],["T_WHITESPACE"," ",64],["T_VARIABLE","$backendUrl",64],",",["T_WHITESPACE","\n        ",64],["T_NS_SEPARATOR","\\",65],["T_STRING","Magento",65],["T_NS_SEPARATOR","\\",65],["T_STRING","Framework",65],["T_NS_SEPARATOR","\\",65],["T_STRING","Controller",65],["T_NS_SEPARATOR","\\",65],["T_STRING","Result",65],["T_NS_SEPARATOR","\\",65],["T_STRING","RedirectFactory",65],["T_WHITESPACE"," ",65],["T_VARIABLE","$resultRedirectFactory",65],",",["T_WHITESPACE","\n        ",65],["T_NS_SEPARATOR","\\",66],["T_STRING","Magento",66],["T_NS_SEPARATOR","\\",66],["T_STRING","Backend",66],["T_NS_SEPARATOR","\\",66],["T_STRING","App",66],["T_NS_SEPARATOR","\\",66],["T_STRING","BackendAppList",66],["T_WHITESPACE"," ",66],["T_VARIABLE","$backendAppList",66],",",["T_WHITESPACE","\n        ",66],["T_NS_SEPARATOR","\\",67],["T_STRING","Magento",67],["T_NS_SEPARATOR","\\",67],["T_STRING","Framework",67],["T_NS_SEPARATOR","\\",67],["T_STRING","Data",67],["T_NS_SEPARATOR","\\",67],["T_STRING","Form",67],["T_NS_SEPARATOR","\\",67],["T_STRING","FormKey",67],["T_NS_SEPARATOR","\\",67],["T_STRING","Validator",67],["T_WHITESPACE"," ",67],["T_VARIABLE","$formKeyValidator",67],",",["T_WHITESPACE","\n        ",67],["T_NS_SEPARATOR","\\",68],["T_STRING","Magento",68],["T_NS_SEPARATOR","\\",68],["T_STRING","Framework",68],["T_NS_SEPARATOR","\\",68],["T_STRING","HTTP",68],["T_NS_SEPARATOR","\\",68],["T_STRING","Authentication",68],["T_WHITESPACE"," ",68],["T_VARIABLE","$httpAuthentication",68],",",["T_WHITESPACE","\n        ",68],["T_NS_SEPARATOR","\\",69],["T_STRING","Psr",69],["T_NS_SEPARATOR","\\",69],["T_STRING","Log",69],["T_NS_SEPARATOR","\\",69],["T_STRING","LoggerInterface",69],["T_WHITESPACE"," ",69],["T_VARIABLE","$logger",69],",",["T_WHITESPACE","\n        ",69],["T_NS_SEPARATOR","\\",70],["T_STRING","Magento",70],["T_NS_SEPARATOR","\\",70],["T_STRING","Framework",70],["T_NS_SEPARATOR","\\",70],["T_STRING","AuthorizationInterface",70],["T_WHITESPACE"," ",70],["T_VARIABLE","$authorization",70],",",["T_WHITESPACE","\n        ",70],["T_ARRAY","array",71],["T_WHITESPACE"," ",71],["T_VARIABLE","$aclResources",71],["T_WHITESPACE","\n    ",71],")",["T_WHITESPACE"," ",72],"{",["T_WHITESPACE","\n        ",72],["T_VARIABLE","$this",73],["T_OBJECT_OPERATOR","->",73],["T_STRING","httpAuthentication",73],["T_WHITESPACE"," ",73],"=",["T_WHITESPACE"," ",73],["T_VARIABLE","$httpAuthentication",73],";",["T_WHITESPACE","\n        ",73],["T_VARIABLE","$this",74],["T_OBJECT_OPERATOR","->",74],["T_STRING","logger",74],["T_WHITESPACE"," ",74],"=",["T_WHITESPACE"," ",74],["T_VARIABLE","$logger",74],";",["T_WHITESPACE","\n        ",74],["T_VARIABLE","$this",75],["T_OBJECT_OPERATOR","->",75],["T_STRING","authorization",75],["T_WHITESPACE"," ",75],"=",["T_WHITESPACE"," ",75],["T_VARIABLE","$authorization",75],";",["T_WHITESPACE","\n        ",75],["T_VARIABLE","$this",76],["T_OBJECT_OPERATOR","->",76],["T_STRING","aclResources",76],["T_WHITESPACE"," ",76],"=",["T_WHITESPACE"," ",76],["T_VARIABLE","$aclResources",76],";",["T_WHITESPACE","\n        ",76],["T_STRING","parent",77],["T_DOUBLE_COLON","::",77],["T_STRING","__construct",77],"(",["T_WHITESPACE","\n            ",77],["T_VARIABLE","$auth",78],",",["T_WHITESPACE","\n            ",78],["T_VARIABLE","$url",79],",",["T_WHITESPACE","\n            ",79],["T_VARIABLE","$response",80],",",["T_WHITESPACE","\n            ",80],["T_VARIABLE","$actionFlag",81],",",["T_WHITESPACE","\n            ",81],["T_VARIABLE","$messageManager",82],",",["T_WHITESPACE","\n            ",82],["T_VARIABLE","$backendUrl",83],",",["T_WHITESPACE","\n            ",83],["T_VARIABLE","$resultRedirectFactory",84],",",["T_WHITESPACE","\n            ",84],["T_VARIABLE","$backendAppList",85],",",["T_WHITESPACE","\n            ",85],["T_VARIABLE","$formKeyValidator",86],["T_WHITESPACE","\n        ",86],")",";",["T_WHITESPACE","\n    ",87],"}",["T_WHITESPACE","\n\n    ",88],["T_DOC_COMMENT","\/**\n     * Replace standard admin login form with HTTP Basic authentication\n     *\n     * @param AbstractAction $subject\n     * @param callable $proceed\n     * @param RequestInterface $request\n     * @return ResponseInterface\n     * @SuppressWarnings(PHPMD.UnusedFormalParameter)\n     * @SuppressWarnings(PHPMD.CyclomaticComplexity)\n     * @SuppressWarnings(PHPMD.NPathComplexity)\n     *\/",90],["T_WHITESPACE","\n    ",100],["T_PUBLIC","public",101],["T_WHITESPACE"," ",101],["T_FUNCTION","function",101],["T_WHITESPACE"," ",101],["T_STRING","aroundDispatch",101],"(",["T_STRING","AbstractAction",101],["T_WHITESPACE"," ",101],["T_VARIABLE","$subject",101],",",["T_WHITESPACE"," ",101],["T_NS_SEPARATOR","\\",101],["T_STRING","Closure",101],["T_WHITESPACE"," ",101],["T_VARIABLE","$proceed",101],",",["T_WHITESPACE"," ",101],["T_STRING","RequestInterface",101],["T_WHITESPACE"," ",101],["T_VARIABLE","$request",101],")",["T_WHITESPACE","\n    ",101],"{",["T_WHITESPACE","\n        ",102],["T_VARIABLE","$resource",103],["T_WHITESPACE"," ",103],"=",["T_WHITESPACE"," ",103],["T_ISSET","isset",103],"(",["T_VARIABLE","$this",103],["T_OBJECT_OPERATOR","->",103],["T_STRING","aclResources",103],"[",["T_VARIABLE","$request",103],["T_OBJECT_OPERATOR","->",103],["T_STRING","getControllerName",103],"(",")","]",")",["T_WHITESPACE","\n            ",103],"?",["T_WHITESPACE"," ",104],["T_ISSET","isset",104],"(",["T_VARIABLE","$this",104],["T_OBJECT_OPERATOR","->",104],["T_STRING","aclResources",104],"[",["T_VARIABLE","$request",104],["T_OBJECT_OPERATOR","->",104],["T_STRING","getControllerName",104],"(",")","]","[",["T_VARIABLE","$request",104],["T_OBJECT_OPERATOR","->",104],["T_STRING","getActionName",104],"(",")","]",")",["T_WHITESPACE","\n                ",104],"?",["T_WHITESPACE"," ",105],["T_VARIABLE","$this",105],["T_OBJECT_OPERATOR","->",105],["T_STRING","aclResources",105],"[",["T_VARIABLE","$request",105],["T_OBJECT_OPERATOR","->",105],["T_STRING","getControllerName",105],"(",")","]","[",["T_VARIABLE","$request",105],["T_OBJECT_OPERATOR","->",105],["T_STRING","getActionName",105],"(",")","]",["T_WHITESPACE","\n                ",105],":",["T_WHITESPACE"," ",106],["T_VARIABLE","$this",106],["T_OBJECT_OPERATOR","->",106],["T_STRING","aclResources",106],"[",["T_VARIABLE","$request",106],["T_OBJECT_OPERATOR","->",106],["T_STRING","getControllerName",106],"(",")","]",["T_WHITESPACE","\n            ",106],":",["T_WHITESPACE"," ",107],["T_STRING","null",107],";",["T_WHITESPACE","\n\n        ",107],["T_VARIABLE","$type",109],["T_WHITESPACE"," ",109],"=",["T_WHITESPACE"," ",109],["T_VARIABLE","$request",109],["T_OBJECT_OPERATOR","->",109],["T_STRING","getParam",109],"(",["T_CONSTANT_ENCAPSED_STRING","'type'",109],")",";",["T_WHITESPACE","\n        ",109],["T_VARIABLE","$resourceType",110],["T_WHITESPACE"," ",110],"=",["T_WHITESPACE"," ",110],["T_ISSET","isset",110],"(",["T_VARIABLE","$this",110],["T_OBJECT_OPERATOR","->",110],["T_STRING","aclResources",110],"[",["T_VARIABLE","$type",110],"]",")",["T_WHITESPACE"," ",110],"?",["T_WHITESPACE"," ",110],["T_VARIABLE","$this",110],["T_OBJECT_OPERATOR","->",110],["T_STRING","aclResources",110],"[",["T_VARIABLE","$type",110],"]",["T_WHITESPACE"," ",110],":",["T_WHITESPACE"," ",110],["T_STRING","null",110],";",["T_WHITESPACE","\n\n        ",110],["T_IF","if",112],["T_WHITESPACE"," ",112],"(","!",["T_VARIABLE","$resource",112],["T_WHITESPACE"," ",112],["T_BOOLEAN_OR","||",112],["T_WHITESPACE"," ",112],"!",["T_VARIABLE","$resourceType",112],")",["T_WHITESPACE"," ",112],"{",["T_WHITESPACE","\n            ",112],["T_RETURN","return",113],["T_WHITESPACE"," ",113],["T_STRING","parent",113],["T_DOUBLE_COLON","::",113],["T_STRING","aroundDispatch",113],"(",["T_VARIABLE","$subject",113],",",["T_WHITESPACE"," ",113],["T_VARIABLE","$proceed",113],",",["T_WHITESPACE"," ",113],["T_VARIABLE","$request",113],")",";",["T_WHITESPACE","\n        ",113],"}",["T_WHITESPACE","\n\n        ",114],["T_VARIABLE","$session",116],["T_WHITESPACE"," ",116],"=",["T_WHITESPACE"," ",116],["T_VARIABLE","$this",116],["T_OBJECT_OPERATOR","->",116],["T_STRING","_auth",116],["T_OBJECT_OPERATOR","->",116],["T_STRING","getAuthStorage",116],"(",")",";",["T_WHITESPACE","\n\n        ",116],["T_COMMENT","\/\/ Try to login using HTTP-authentication\n",118],["T_WHITESPACE","        ",119],["T_IF","if",119],["T_WHITESPACE"," ",119],"(","!",["T_VARIABLE","$session",119],["T_OBJECT_OPERATOR","->",119],["T_STRING","isLoggedIn",119],"(",")",")",["T_WHITESPACE"," ",119],"{",["T_WHITESPACE","\n            ",119],["T_LIST","list",120],"(",["T_VARIABLE","$login",120],",",["T_WHITESPACE"," ",120],["T_VARIABLE","$password",120],")",["T_WHITESPACE"," ",120],"=",["T_WHITESPACE"," ",120],["T_VARIABLE","$this",120],["T_OBJECT_OPERATOR","->",120],["T_STRING","httpAuthentication",120],["T_OBJECT_OPERATOR","->",120],["T_STRING","getCredentials",120],"(",")",";",["T_WHITESPACE","\n            ",120],["T_TRY","try",121],["T_WHITESPACE"," ",121],"{",["T_WHITESPACE","\n                ",121],["T_VARIABLE","$this",122],["T_OBJECT_OPERATOR","->",122],["T_STRING","_auth",122],["T_OBJECT_OPERATOR","->",122],["T_STRING","login",122],"(",["T_VARIABLE","$login",122],",",["T_WHITESPACE"," ",122],["T_VARIABLE","$password",122],")",";",["T_WHITESPACE","\n            ",122],"}",["T_WHITESPACE"," ",123],["T_CATCH","catch",123],["T_WHITESPACE"," ",123],"(",["T_STRING","AuthenticationException",123],["T_WHITESPACE"," ",123],["T_VARIABLE","$e",123],")",["T_WHITESPACE"," ",123],"{",["T_WHITESPACE","\n                ",123],["T_VARIABLE","$this",124],["T_OBJECT_OPERATOR","->",124],["T_STRING","logger",124],["T_OBJECT_OPERATOR","->",124],["T_STRING","critical",124],"(",["T_VARIABLE","$e",124],")",";",["T_WHITESPACE","\n            ",124],"}",["T_WHITESPACE","\n        ",125],"}",["T_WHITESPACE","\n\n        ",126],["T_COMMENT","\/\/ Verify if logged in and authorized\n",128],["T_WHITESPACE","        ",129],["T_IF","if",129],["T_WHITESPACE"," ",129],"(","!",["T_VARIABLE","$session",129],["T_OBJECT_OPERATOR","->",129],["T_STRING","isLoggedIn",129],"(",")",["T_WHITESPACE"," ",129],["T_BOOLEAN_OR","||",129],["T_WHITESPACE"," ",129],"!",["T_VARIABLE","$this",129],["T_OBJECT_OPERATOR","->",129],["T_STRING","authorization",129],["T_OBJECT_OPERATOR","->",129],["T_STRING","isAllowed",129],"(",["T_VARIABLE","$resource",129],")",["T_WHITESPACE","\n            ",129],["T_BOOLEAN_OR","||",130],["T_WHITESPACE"," ",130],"!",["T_VARIABLE","$this",130],["T_OBJECT_OPERATOR","->",130],["T_STRING","authorization",130],["T_OBJECT_OPERATOR","->",130],["T_STRING","isAllowed",130],"(",["T_VARIABLE","$resourceType",130],")",")",["T_WHITESPACE"," ",130],"{",["T_WHITESPACE","\n            ",130],["T_VARIABLE","$this",131],["T_OBJECT_OPERATOR","->",131],["T_STRING","httpAuthentication",131],["T_OBJECT_OPERATOR","->",131],["T_STRING","setAuthenticationFailed",131],"(",["T_CONSTANT_ENCAPSED_STRING","'RSS Feeds'",131],")",";",["T_WHITESPACE","\n            ",131],["T_RETURN","return",132],["T_WHITESPACE"," ",132],["T_VARIABLE","$this",132],["T_OBJECT_OPERATOR","->",132],["T_STRING","_response",132],";",["T_WHITESPACE","\n        ",132],"}",["T_WHITESPACE","\n\n        ",133],["T_RETURN","return",135],["T_WHITESPACE"," ",135],["T_STRING","parent",135],["T_DOUBLE_COLON","::",135],["T_STRING","aroundDispatch",135],"(",["T_VARIABLE","$subject",135],",",["T_WHITESPACE"," ",135],["T_VARIABLE","$proceed",135],",",["T_WHITESPACE"," ",135],["T_VARIABLE","$request",135],")",";",["T_WHITESPACE","\n    ",135],"}",["T_WHITESPACE","\n",136],"}",["T_WHITESPACE","\n",137]]
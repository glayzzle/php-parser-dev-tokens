[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Copyright \u00c2\u00a9 2013-2017 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n *\/",2],["T_WHITESPACE","\n",5],["T_NAMESPACE","namespace",6],["T_WHITESPACE"," ",6],["T_STRING","Magento",6],["T_NS_SEPARATOR","\\",6],["T_STRING","CheckoutAgreements",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Model",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Checkout",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Plugin",6],";",["T_WHITESPACE","\n\n",6],["T_USE","use",8],["T_WHITESPACE"," ",8],["T_STRING","Magento",8],["T_NS_SEPARATOR","\\",8],["T_STRING","CheckoutAgreements",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Model",8],["T_NS_SEPARATOR","\\",8],["T_STRING","AgreementsProvider",8],";",["T_WHITESPACE","\n",8],["T_USE","use",9],["T_WHITESPACE"," ",9],["T_STRING","Magento",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Store",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Model",9],["T_NS_SEPARATOR","\\",9],["T_STRING","ScopeInterface",9],";",["T_WHITESPACE","\n\n",9],["T_DOC_COMMENT","\/**\n * Class Validation\n *\/",11],["T_WHITESPACE","\n",13],["T_CLASS","class",14],["T_WHITESPACE"," ",14],["T_STRING","Validation",14],["T_WHITESPACE","\n",14],"{",["T_WHITESPACE","\n    ",15],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Framework\\App\\Config\\ScopeConfigInterface\n     *\/",16],["T_WHITESPACE","\n    ",18],["T_PROTECTED","protected",19],["T_WHITESPACE"," ",19],["T_VARIABLE","$scopeConfiguration",19],";",["T_WHITESPACE","\n\n    ",19],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\CheckoutAgreements\\Api\\CheckoutAgreementsRepositoryInterface\n     *\/",21],["T_WHITESPACE","\n    ",23],["T_PROTECTED","protected",24],["T_WHITESPACE"," ",24],["T_VARIABLE","$checkoutAgreementsRepository",24],";",["T_WHITESPACE","\n\n    ",24],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Checkout\\Api\\AgreementsValidatorInterface\n     *\/",26],["T_WHITESPACE","\n    ",28],["T_PROTECTED","protected",29],["T_WHITESPACE"," ",29],["T_VARIABLE","$agreementsValidator",29],";",["T_WHITESPACE","\n\n    ",29],["T_DOC_COMMENT","\/**\n     * @param \\Magento\\Checkout\\Api\\AgreementsValidatorInterface $agreementsValidator\n     * @param \\Magento\\Framework\\App\\Config\\ScopeConfigInterface $scopeConfiguration\n     * @param \\Magento\\CheckoutAgreements\\Api\\CheckoutAgreementsRepositoryInterface $checkoutAgreementsRepository\n     *\/",31],["T_WHITESPACE","\n    ",35],["T_PUBLIC","public",36],["T_WHITESPACE"," ",36],["T_FUNCTION","function",36],["T_WHITESPACE"," ",36],["T_STRING","__construct",36],"(",["T_WHITESPACE","\n        ",36],["T_NS_SEPARATOR","\\",37],["T_STRING","Magento",37],["T_NS_SEPARATOR","\\",37],["T_STRING","Checkout",37],["T_NS_SEPARATOR","\\",37],["T_STRING","Api",37],["T_NS_SEPARATOR","\\",37],["T_STRING","AgreementsValidatorInterface",37],["T_WHITESPACE"," ",37],["T_VARIABLE","$agreementsValidator",37],",",["T_WHITESPACE","\n        ",37],["T_NS_SEPARATOR","\\",38],["T_STRING","Magento",38],["T_NS_SEPARATOR","\\",38],["T_STRING","Framework",38],["T_NS_SEPARATOR","\\",38],["T_STRING","App",38],["T_NS_SEPARATOR","\\",38],["T_STRING","Config",38],["T_NS_SEPARATOR","\\",38],["T_STRING","ScopeConfigInterface",38],["T_WHITESPACE"," ",38],["T_VARIABLE","$scopeConfiguration",38],",",["T_WHITESPACE","\n        ",38],["T_NS_SEPARATOR","\\",39],["T_STRING","Magento",39],["T_NS_SEPARATOR","\\",39],["T_STRING","CheckoutAgreements",39],["T_NS_SEPARATOR","\\",39],["T_STRING","Api",39],["T_NS_SEPARATOR","\\",39],["T_STRING","CheckoutAgreementsRepositoryInterface",39],["T_WHITESPACE"," ",39],["T_VARIABLE","$checkoutAgreementsRepository",39],["T_WHITESPACE","\n    ",39],")",["T_WHITESPACE"," ",40],"{",["T_WHITESPACE","\n        ",40],["T_VARIABLE","$this",41],["T_OBJECT_OPERATOR","->",41],["T_STRING","agreementsValidator",41],["T_WHITESPACE"," ",41],"=",["T_WHITESPACE"," ",41],["T_VARIABLE","$agreementsValidator",41],";",["T_WHITESPACE","\n        ",41],["T_VARIABLE","$this",42],["T_OBJECT_OPERATOR","->",42],["T_STRING","scopeConfiguration",42],["T_WHITESPACE"," ",42],"=",["T_WHITESPACE"," ",42],["T_VARIABLE","$scopeConfiguration",42],";",["T_WHITESPACE","\n        ",42],["T_VARIABLE","$this",43],["T_OBJECT_OPERATOR","->",43],["T_STRING","checkoutAgreementsRepository",43],["T_WHITESPACE"," ",43],"=",["T_WHITESPACE"," ",43],["T_VARIABLE","$checkoutAgreementsRepository",43],";",["T_WHITESPACE","\n    ",43],"}",["T_WHITESPACE","\n\n    ",44],["T_DOC_COMMENT","\/**\n     * @param \\Magento\\Checkout\\Api\\PaymentInformationManagementInterface $subject\n     * @param int $cartId\n     * @param \\Magento\\Quote\\Api\\Data\\PaymentInterface $paymentMethod\n     * @param \\Magento\\Quote\\Api\\Data\\AddressInterface|null $billingAddress\n     * @return void\n     * @SuppressWarnings(PHPMD.UnusedFormalParameter)\n     *\/",46],["T_WHITESPACE","\n    ",53],["T_PUBLIC","public",54],["T_WHITESPACE"," ",54],["T_FUNCTION","function",54],["T_WHITESPACE"," ",54],["T_STRING","beforeSavePaymentInformationAndPlaceOrder",54],"(",["T_WHITESPACE","\n        ",54],["T_NS_SEPARATOR","\\",55],["T_STRING","Magento",55],["T_NS_SEPARATOR","\\",55],["T_STRING","Checkout",55],["T_NS_SEPARATOR","\\",55],["T_STRING","Api",55],["T_NS_SEPARATOR","\\",55],["T_STRING","PaymentInformationManagementInterface",55],["T_WHITESPACE"," ",55],["T_VARIABLE","$subject",55],",",["T_WHITESPACE","\n        ",55],["T_VARIABLE","$cartId",56],",",["T_WHITESPACE","\n        ",56],["T_NS_SEPARATOR","\\",57],["T_STRING","Magento",57],["T_NS_SEPARATOR","\\",57],["T_STRING","Quote",57],["T_NS_SEPARATOR","\\",57],["T_STRING","Api",57],["T_NS_SEPARATOR","\\",57],["T_STRING","Data",57],["T_NS_SEPARATOR","\\",57],["T_STRING","PaymentInterface",57],["T_WHITESPACE"," ",57],["T_VARIABLE","$paymentMethod",57],",",["T_WHITESPACE","\n        ",57],["T_NS_SEPARATOR","\\",58],["T_STRING","Magento",58],["T_NS_SEPARATOR","\\",58],["T_STRING","Quote",58],["T_NS_SEPARATOR","\\",58],["T_STRING","Api",58],["T_NS_SEPARATOR","\\",58],["T_STRING","Data",58],["T_NS_SEPARATOR","\\",58],["T_STRING","AddressInterface",58],["T_WHITESPACE"," ",58],["T_VARIABLE","$billingAddress",58],["T_WHITESPACE"," ",58],"=",["T_WHITESPACE"," ",58],["T_STRING","null",58],["T_WHITESPACE","\n    ",58],")",["T_WHITESPACE"," ",59],"{",["T_WHITESPACE","\n        ",59],["T_IF","if",60],["T_WHITESPACE"," ",60],"(",["T_VARIABLE","$this",60],["T_OBJECT_OPERATOR","->",60],["T_STRING","isAgreementEnabled",60],"(",")",")",["T_WHITESPACE"," ",60],"{",["T_WHITESPACE","\n            ",60],["T_VARIABLE","$this",61],["T_OBJECT_OPERATOR","->",61],["T_STRING","validateAgreements",61],"(",["T_VARIABLE","$paymentMethod",61],")",";",["T_WHITESPACE","\n        ",61],"}",["T_WHITESPACE","\n    ",62],"}",["T_WHITESPACE","\n\n    ",63],["T_DOC_COMMENT","\/**\n     * @param \\Magento\\Checkout\\Api\\PaymentInformationManagementInterface $subject\n     * @param int $cartId\n     * @param \\Magento\\Quote\\Api\\Data\\PaymentInterface $paymentMethod\n     * @param \\Magento\\Quote\\Api\\Data\\AddressInterface|null $billingAddress\n     * @return void\n     * @SuppressWarnings(PHPMD.UnusedFormalParameter)\n     *\/",65],["T_WHITESPACE","\n    ",72],["T_PUBLIC","public",73],["T_WHITESPACE"," ",73],["T_FUNCTION","function",73],["T_WHITESPACE"," ",73],["T_STRING","beforeSavePaymentInformation",73],"(",["T_WHITESPACE","\n        ",73],["T_NS_SEPARATOR","\\",74],["T_STRING","Magento",74],["T_NS_SEPARATOR","\\",74],["T_STRING","Checkout",74],["T_NS_SEPARATOR","\\",74],["T_STRING","Api",74],["T_NS_SEPARATOR","\\",74],["T_STRING","PaymentInformationManagementInterface",74],["T_WHITESPACE"," ",74],["T_VARIABLE","$subject",74],",",["T_WHITESPACE","\n        ",74],["T_VARIABLE","$cartId",75],",",["T_WHITESPACE","\n        ",75],["T_NS_SEPARATOR","\\",76],["T_STRING","Magento",76],["T_NS_SEPARATOR","\\",76],["T_STRING","Quote",76],["T_NS_SEPARATOR","\\",76],["T_STRING","Api",76],["T_NS_SEPARATOR","\\",76],["T_STRING","Data",76],["T_NS_SEPARATOR","\\",76],["T_STRING","PaymentInterface",76],["T_WHITESPACE"," ",76],["T_VARIABLE","$paymentMethod",76],",",["T_WHITESPACE","\n        ",76],["T_NS_SEPARATOR","\\",77],["T_STRING","Magento",77],["T_NS_SEPARATOR","\\",77],["T_STRING","Quote",77],["T_NS_SEPARATOR","\\",77],["T_STRING","Api",77],["T_NS_SEPARATOR","\\",77],["T_STRING","Data",77],["T_NS_SEPARATOR","\\",77],["T_STRING","AddressInterface",77],["T_WHITESPACE"," ",77],["T_VARIABLE","$billingAddress",77],["T_WHITESPACE"," ",77],"=",["T_WHITESPACE"," ",77],["T_STRING","null",77],["T_WHITESPACE","\n    ",77],")",["T_WHITESPACE"," ",78],"{",["T_WHITESPACE","\n        ",78],["T_IF","if",79],["T_WHITESPACE"," ",79],"(",["T_VARIABLE","$this",79],["T_OBJECT_OPERATOR","->",79],["T_STRING","isAgreementEnabled",79],"(",")",")",["T_WHITESPACE"," ",79],"{",["T_WHITESPACE","\n            ",79],["T_VARIABLE","$this",80],["T_OBJECT_OPERATOR","->",80],["T_STRING","validateAgreements",80],"(",["T_VARIABLE","$paymentMethod",80],")",";",["T_WHITESPACE","\n        ",80],"}",["T_WHITESPACE","\n    ",81],"}",["T_WHITESPACE","\n\n    ",82],["T_DOC_COMMENT","\/**\n     * @param \\Magento\\Quote\\Api\\Data\\PaymentInterface $paymentMethod\n     * @throws \\Magento\\Framework\\Exception\\CouldNotSaveException\n     * @return void\n     *\/",84],["T_WHITESPACE","\n    ",88],["T_PROTECTED","protected",89],["T_WHITESPACE"," ",89],["T_FUNCTION","function",89],["T_WHITESPACE"," ",89],["T_STRING","validateAgreements",89],"(",["T_NS_SEPARATOR","\\",89],["T_STRING","Magento",89],["T_NS_SEPARATOR","\\",89],["T_STRING","Quote",89],["T_NS_SEPARATOR","\\",89],["T_STRING","Api",89],["T_NS_SEPARATOR","\\",89],["T_STRING","Data",89],["T_NS_SEPARATOR","\\",89],["T_STRING","PaymentInterface",89],["T_WHITESPACE"," ",89],["T_VARIABLE","$paymentMethod",89],")",["T_WHITESPACE","\n    ",89],"{",["T_WHITESPACE","\n        ",90],["T_VARIABLE","$agreements",91],["T_WHITESPACE"," ",91],"=",["T_WHITESPACE"," ",91],["T_VARIABLE","$paymentMethod",91],["T_OBJECT_OPERATOR","->",91],["T_STRING","getExtensionAttributes",91],"(",")",["T_WHITESPACE"," ",91],["T_IS_IDENTICAL","===",91],["T_WHITESPACE"," ",91],["T_STRING","null",91],["T_WHITESPACE","\n            ",91],"?",["T_WHITESPACE"," ",92],"[","]",["T_WHITESPACE","\n            ",92],":",["T_WHITESPACE"," ",93],["T_VARIABLE","$paymentMethod",93],["T_OBJECT_OPERATOR","->",93],["T_STRING","getExtensionAttributes",93],"(",")",["T_OBJECT_OPERATOR","->",93],["T_STRING","getAgreementIds",93],"(",")",";",["T_WHITESPACE","\n\n        ",93],["T_IF","if",95],["T_WHITESPACE"," ",95],"(","!",["T_VARIABLE","$this",95],["T_OBJECT_OPERATOR","->",95],["T_STRING","agreementsValidator",95],["T_OBJECT_OPERATOR","->",95],["T_STRING","isValid",95],"(",["T_VARIABLE","$agreements",95],")",")",["T_WHITESPACE"," ",95],"{",["T_WHITESPACE","\n            ",95],["T_THROW","throw",96],["T_WHITESPACE"," ",96],["T_NEW","new",96],["T_WHITESPACE"," ",96],["T_NS_SEPARATOR","\\",96],["T_STRING","Magento",96],["T_NS_SEPARATOR","\\",96],["T_STRING","Framework",96],["T_NS_SEPARATOR","\\",96],["T_STRING","Exception",96],["T_NS_SEPARATOR","\\",96],["T_STRING","CouldNotSaveException",96],"(",["T_WHITESPACE","\n                ",96],["T_STRING","__",97],"(",["T_CONSTANT_ENCAPSED_STRING","'Please agree to all the terms and conditions before placing the order.'",97],")",["T_WHITESPACE","\n            ",97],")",";",["T_WHITESPACE","\n        ",98],"}",["T_WHITESPACE","\n    ",99],"}",["T_WHITESPACE","\n\n    ",100],["T_DOC_COMMENT","\/**\n     * Verify if agreement validation needed\n     * @return bool\n     *\/",102],["T_WHITESPACE","\n    ",105],["T_PROTECTED","protected",106],["T_WHITESPACE"," ",106],["T_FUNCTION","function",106],["T_WHITESPACE"," ",106],["T_STRING","isAgreementEnabled",106],"(",")",["T_WHITESPACE","\n    ",106],"{",["T_WHITESPACE","\n        ",107],["T_VARIABLE","$isAgreementsEnabled",108],["T_WHITESPACE"," ",108],"=",["T_WHITESPACE"," ",108],["T_VARIABLE","$this",108],["T_OBJECT_OPERATOR","->",108],["T_STRING","scopeConfiguration",108],["T_OBJECT_OPERATOR","->",108],["T_STRING","isSetFlag",108],"(",["T_WHITESPACE","\n            ",108],["T_STRING","AgreementsProvider",109],["T_DOUBLE_COLON","::",109],["T_STRING","PATH_ENABLED",109],",",["T_WHITESPACE","\n            ",109],["T_STRING","ScopeInterface",110],["T_DOUBLE_COLON","::",110],["T_STRING","SCOPE_STORE",110],["T_WHITESPACE","\n        ",110],")",";",["T_WHITESPACE","\n        ",111],["T_VARIABLE","$agreementsList",112],["T_WHITESPACE"," ",112],"=",["T_WHITESPACE"," ",112],["T_VARIABLE","$isAgreementsEnabled",112],["T_WHITESPACE"," ",112],"?",["T_WHITESPACE"," ",112],["T_VARIABLE","$this",112],["T_OBJECT_OPERATOR","->",112],["T_STRING","checkoutAgreementsRepository",112],["T_OBJECT_OPERATOR","->",112],["T_STRING","getList",112],"(",")",["T_WHITESPACE"," ",112],":",["T_WHITESPACE"," ",112],"[","]",";",["T_WHITESPACE","\n        ",112],["T_RETURN","return",113],["T_WHITESPACE"," ",113],["T_BOOL_CAST","(bool)",113],"(",["T_VARIABLE","$isAgreementsEnabled",113],["T_WHITESPACE"," ",113],["T_BOOLEAN_AND","&&",113],["T_WHITESPACE"," ",113],["T_STRING","count",113],"(",["T_VARIABLE","$agreementsList",113],")",["T_WHITESPACE"," ",113],">",["T_WHITESPACE"," ",113],["T_LNUMBER","0",113],")",";",["T_WHITESPACE","\n    ",113],"}",["T_WHITESPACE","\n",114],"}",["T_WHITESPACE","\n",115]]
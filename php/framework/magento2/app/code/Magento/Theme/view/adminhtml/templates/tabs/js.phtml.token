[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Copyright \u00c2\u00a9 2013-2017 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n *\/",2],["T_WHITESPACE","\n",5],["T_CLOSE_TAG","?>\n",6],["T_OPEN_TAG","<?php ",7],["T_DOC_COMMENT","\/** @var $block \\Magento\\Theme\\Block\\Adminhtml\\System\\Design\\Theme\\Edit\\Tab\\Js *\/",7],["T_WHITESPACE"," ",7],["T_CLOSE_TAG","?>\n",7],["T_OPEN_TAG","<?php ",8],["T_ECHO","echo",8],["T_WHITESPACE"," ",8],["T_VARIABLE","$block",8],["T_OBJECT_OPERATOR","->",8],["T_STRING","getFormHtml",8],"(",")",";",["T_WHITESPACE"," ",8],["T_CLOSE_TAG","?>\n",8],["T_INLINE_HTML","\n<script>\nrequire([\n    \"jquery\",\n    \"mage\/template\",\n    \"Magento_Ui\/js\/modal\/alert\",\n    \"jquery\/file-uploader\",\n    \"Magento_Theme\/js\/sortable\",\n    \"mage\/translate\"\n], function ($, mageTemplate, alert) {\n\n    $('#js_files_uploader').fileupload({\n        dataType: 'json',\n        replaceFileInput: false,\n        sequentialUploads: true,\n        url: '",9],["T_OPEN_TAG","<?php ",24],["T_COMMENT","\/* @escapeNotVerified *\/",24],["T_WHITESPACE"," ",24],["T_ECHO","echo",24],["T_WHITESPACE"," ",24],["T_VARIABLE","$block",24],["T_OBJECT_OPERATOR","->",24],["T_STRING","getJsUploadUrl",24],"(",")",";",["T_WHITESPACE"," ",24],["T_CLOSE_TAG","?>",24],["T_INLINE_HTML","',\n\n        \/**\n         * Add data\n         * @param e\n         * @param data\n         *\/\n        add: function (e, data) {\n            var progressTmpl = mageTemplate('#js-file-uploader-template'),\n                fileSize,\n                tmpl;\n\n            $.each(data.files, function (index, file) {\n                fileSize = typeof file.size == \"undefined\" ?\n                    $.mage.__('We could not detect a size.') :\n                    byteConvert(file.size);\n\n                data.fileId = Math.random().toString(36).substr(2, 9);\n\n                tmpl = progressTmpl({\n                    data: {\n                        name: file.name,\n                        size: fileSize,\n                        id: data.fileId\n                    }\n                });\n\n                $(tmpl).appendTo('#js-file-uploader');\n            });\n\n            var uploadButton = $('#js_uploader_button');\n            uploadButton.removeAttr('disabled');\n\n            uploadButton.click(function () {\n                $('#messages').html('');\n                $(this).attr('disabled', 'disabled');\n\n                data.submit();\n            });\n        },\n\n        \/**\n         * On done event\n         * @param e\n         * @param data\n         *\/\n        done: function (e, data) {\n            $('#no-js-files-found').remove();\n\n            var progressSelector = '#' + data.fileId + ' .progressbar-container .progressbar';\n            $(progressSelector).css('width', '100%');\n\n            $(this).val('');\n\n            if (!data.result.error) {\n                $(progressSelector).removeClass('upload-progress').addClass('upload-success');\n\n                $('#' + data.fileId).delay(2000).fadeOut(2000);\n                $('body').trigger('refreshJsList', {\n                    jsList: data.result.files\n                });\n            } else {\n                $(progressSelector).removeClass('upload-progress').addClass('upload-failure');\n            }\n\n            $('.ui-sortable').sortable('initButtons');\n        },\n\n        \/**\n         * On progress\n         * @param e\n         * @param data\n         *\/\n        progress: function (e, data) {\n            var progress = parseInt(data.loaded \/ data.total * 100, 10);\n            var progressSelector = '#' + data.fileId + ' .progressbar-container .progressbar';\n            $(progressSelector).css('width', progress + '%');\n        },\n\n        \/**\n         * Fail event\n         * @param e\n         * @param data\n         *\/\n        fail: function (e, data) {\n            var progressSelector = '#' + data.fileId + ' .progressbar-container .progressbar';\n            $(progressSelector).removeClass('upload-progress').addClass('upload-failure');\n\n            $(this).val('');\n            alert({\n                content: $.mage.__(\"We don't recognize this file extension.\")\n            });\n        }\n    });\n\n    $('#js_files_uploader').click(function () {\n        \/** Unbind click event on file change *\/\n        $('#js-file-uploader').html('');\n        $('#js_uploader_button').unbind('click');\n    });\n\n\n});\n<\/script>\n",24]]
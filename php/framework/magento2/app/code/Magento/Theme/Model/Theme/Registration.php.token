[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Copyright \u00c2\u00a9 2013-2017 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n *\/",2],["T_WHITESPACE","\n",5],["T_NAMESPACE","namespace",6],["T_WHITESPACE"," ",6],["T_STRING","Magento",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Theme",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Model",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Theme",6],";",["T_WHITESPACE","\n\n",6],["T_USE","use",8],["T_WHITESPACE"," ",8],["T_STRING","Magento",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Framework",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Filesystem",8],";",["T_WHITESPACE","\n",8],["T_USE","use",9],["T_WHITESPACE"," ",9],["T_STRING","Magento",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Framework",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Exception",9],["T_NS_SEPARATOR","\\",9],["T_STRING","LocalizedException",9],";",["T_WHITESPACE","\n",9],["T_USE","use",10],["T_WHITESPACE"," ",10],["T_STRING","Magento",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Framework",10],["T_NS_SEPARATOR","\\",10],["T_STRING","View",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Design",10],["T_NS_SEPARATOR","\\",10],["T_STRING","ThemeInterface",10],";",["T_WHITESPACE","\n\n",10],["T_DOC_COMMENT","\/**\n * Theme registration model class\n *\/",12],["T_WHITESPACE","\n",14],["T_CLASS","class",15],["T_WHITESPACE"," ",15],["T_STRING","Registration",15],["T_WHITESPACE","\n",15],"{",["T_WHITESPACE","\n    ",16],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Theme\\Model\\ResourceModel\\Theme\\Data\\CollectionFactory\n     *\/",17],["T_WHITESPACE","\n    ",19],["T_PROTECTED","protected",20],["T_WHITESPACE"," ",20],["T_VARIABLE","$_collectionFactory",20],";",["T_WHITESPACE","\n\n    ",20],["T_DOC_COMMENT","\/**\n     * Collection of themes in file-system\n     *\n     * @var Collection\n     *\/",22],["T_WHITESPACE","\n    ",26],["T_PROTECTED","protected",27],["T_WHITESPACE"," ",27],["T_VARIABLE","$_themeCollection",27],";",["T_WHITESPACE","\n\n    ",27],["T_DOC_COMMENT","\/**\n     * Allowed sequence relation by type, array(parent theme, child theme)\n     *\n     * @var array\n     *\/",29],["T_WHITESPACE","\n    ",33],["T_PROTECTED","protected",34],["T_WHITESPACE"," ",34],["T_VARIABLE","$_allowedRelations",34],["T_WHITESPACE"," ",34],"=",["T_WHITESPACE"," ",34],"[",["T_WHITESPACE","\n        ",34],"[",["T_STRING","ThemeInterface",35],["T_DOUBLE_COLON","::",35],["T_STRING","TYPE_PHYSICAL",35],",",["T_WHITESPACE"," ",35],["T_STRING","ThemeInterface",35],["T_DOUBLE_COLON","::",35],["T_STRING","TYPE_VIRTUAL",35],"]",",",["T_WHITESPACE","\n        ",35],"[",["T_STRING","ThemeInterface",36],["T_DOUBLE_COLON","::",36],["T_STRING","TYPE_VIRTUAL",36],",",["T_WHITESPACE"," ",36],["T_STRING","ThemeInterface",36],["T_DOUBLE_COLON","::",36],["T_STRING","TYPE_STAGING",36],"]",",",["T_WHITESPACE","\n    ",36],"]",";",["T_WHITESPACE","\n\n    ",37],["T_DOC_COMMENT","\/**\n     * Forbidden sequence relation by type\n     *\n     * @var array\n     *\/",39],["T_WHITESPACE","\n    ",43],["T_PROTECTED","protected",44],["T_WHITESPACE"," ",44],["T_VARIABLE","$_forbiddenRelations",44],["T_WHITESPACE"," ",44],"=",["T_WHITESPACE"," ",44],"[",["T_WHITESPACE","\n        ",44],"[",["T_STRING","ThemeInterface",45],["T_DOUBLE_COLON","::",45],["T_STRING","TYPE_VIRTUAL",45],",",["T_WHITESPACE"," ",45],["T_STRING","ThemeInterface",45],["T_DOUBLE_COLON","::",45],["T_STRING","TYPE_VIRTUAL",45],"]",",",["T_WHITESPACE","\n        ",45],"[",["T_STRING","ThemeInterface",46],["T_DOUBLE_COLON","::",46],["T_STRING","TYPE_PHYSICAL",46],",",["T_WHITESPACE"," ",46],["T_STRING","ThemeInterface",46],["T_DOUBLE_COLON","::",46],["T_STRING","TYPE_STAGING",46],"]",",",["T_WHITESPACE","\n    ",46],"]",";",["T_WHITESPACE","\n\n    ",47],["T_DOC_COMMENT","\/**\n     * Initialize dependencies\n     *\n     * @param \\Magento\\Theme\\Model\\ResourceModel\\Theme\\Data\\CollectionFactory $collectionFactory\n     * @param \\Magento\\Theme\\Model\\Theme\\Data\\Collection $filesystemCollection\n     *\/",49],["T_WHITESPACE","\n    ",54],["T_PUBLIC","public",55],["T_WHITESPACE"," ",55],["T_FUNCTION","function",55],["T_WHITESPACE"," ",55],["T_STRING","__construct",55],"(",["T_WHITESPACE","\n        ",55],["T_NS_SEPARATOR","\\",56],["T_STRING","Magento",56],["T_NS_SEPARATOR","\\",56],["T_STRING","Theme",56],["T_NS_SEPARATOR","\\",56],["T_STRING","Model",56],["T_NS_SEPARATOR","\\",56],["T_STRING","ResourceModel",56],["T_NS_SEPARATOR","\\",56],["T_STRING","Theme",56],["T_NS_SEPARATOR","\\",56],["T_STRING","Data",56],["T_NS_SEPARATOR","\\",56],["T_STRING","CollectionFactory",56],["T_WHITESPACE"," ",56],["T_VARIABLE","$collectionFactory",56],",",["T_WHITESPACE","\n        ",56],["T_NS_SEPARATOR","\\",57],["T_STRING","Magento",57],["T_NS_SEPARATOR","\\",57],["T_STRING","Theme",57],["T_NS_SEPARATOR","\\",57],["T_STRING","Model",57],["T_NS_SEPARATOR","\\",57],["T_STRING","Theme",57],["T_NS_SEPARATOR","\\",57],["T_STRING","Data",57],["T_NS_SEPARATOR","\\",57],["T_STRING","Collection",57],["T_WHITESPACE"," ",57],["T_VARIABLE","$filesystemCollection",57],["T_WHITESPACE","\n    ",57],")",["T_WHITESPACE"," ",58],"{",["T_WHITESPACE","\n        ",58],["T_VARIABLE","$this",59],["T_OBJECT_OPERATOR","->",59],["T_STRING","_collectionFactory",59],["T_WHITESPACE"," ",59],"=",["T_WHITESPACE"," ",59],["T_VARIABLE","$collectionFactory",59],";",["T_WHITESPACE","\n        ",59],["T_VARIABLE","$this",60],["T_OBJECT_OPERATOR","->",60],["T_STRING","_themeCollection",60],["T_WHITESPACE"," ",60],"=",["T_WHITESPACE"," ",60],["T_VARIABLE","$filesystemCollection",60],";",["T_WHITESPACE","\n    ",60],"}",["T_WHITESPACE","\n\n    ",61],["T_DOC_COMMENT","\/**\n     * Theme registration\n     *\n     * @return $this\n     *\/",63],["T_WHITESPACE","\n    ",67],["T_PUBLIC","public",68],["T_WHITESPACE"," ",68],["T_FUNCTION","function",68],["T_WHITESPACE"," ",68],["T_STRING","register",68],"(",")",["T_WHITESPACE","\n    ",68],"{",["T_WHITESPACE","\n        ",69],["T_VARIABLE","$this",70],["T_OBJECT_OPERATOR","->",70],["T_STRING","_themeCollection",70],["T_OBJECT_OPERATOR","->",70],["T_STRING","clear",70],"(",")",";",["T_WHITESPACE","\n\n        ",70],["T_FOREACH","foreach",72],["T_WHITESPACE"," ",72],"(",["T_VARIABLE","$this",72],["T_OBJECT_OPERATOR","->",72],["T_STRING","_themeCollection",72],["T_WHITESPACE"," ",72],["T_AS","as",72],["T_WHITESPACE"," ",72],["T_VARIABLE","$theme",72],")",["T_WHITESPACE"," ",72],"{",["T_WHITESPACE","\n            ",72],["T_VARIABLE","$this",73],["T_OBJECT_OPERATOR","->",73],["T_STRING","_registerThemeRecursively",73],"(",["T_VARIABLE","$theme",73],")",";",["T_WHITESPACE","\n        ",73],"}",["T_WHITESPACE","\n\n        ",74],["T_VARIABLE","$this",76],["T_OBJECT_OPERATOR","->",76],["T_STRING","checkPhysicalThemes",76],"(",")",["T_OBJECT_OPERATOR","->",76],["T_STRING","checkAllowedThemeRelations",76],"(",")",";",["T_WHITESPACE","\n\n        ",76],["T_RETURN","return",78],["T_WHITESPACE"," ",78],["T_VARIABLE","$this",78],";",["T_WHITESPACE","\n    ",78],"}",["T_WHITESPACE","\n\n    ",79],["T_DOC_COMMENT","\/**\n     * Register theme and recursively all its ascendants\n     * Second param is optional and is used to prevent circular references in inheritance chain\n     *\n     * @param ThemeInterface &$theme\n     * @param array $inheritanceChain\n     * @return $this\n     * @throws LocalizedException\n     *\/",81],["T_WHITESPACE","\n    ",89],["T_PROTECTED","protected",90],["T_WHITESPACE"," ",90],["T_FUNCTION","function",90],["T_WHITESPACE"," ",90],["T_STRING","_registerThemeRecursively",90],"(","&",["T_VARIABLE","$theme",90],",",["T_WHITESPACE"," ",90],["T_VARIABLE","$inheritanceChain",90],["T_WHITESPACE"," ",90],"=",["T_WHITESPACE"," ",90],"[","]",")",["T_WHITESPACE","\n    ",90],"{",["T_WHITESPACE","\n        ",91],["T_IF","if",92],["T_WHITESPACE"," ",92],"(",["T_VARIABLE","$theme",92],["T_OBJECT_OPERATOR","->",92],["T_STRING","getId",92],"(",")",")",["T_WHITESPACE"," ",92],"{",["T_WHITESPACE","\n            ",92],["T_RETURN","return",93],["T_WHITESPACE"," ",93],["T_VARIABLE","$this",93],";",["T_WHITESPACE","\n        ",93],"}",["T_WHITESPACE","\n        ",94],["T_VARIABLE","$themeModel",95],["T_WHITESPACE"," ",95],"=",["T_WHITESPACE"," ",95],["T_VARIABLE","$this",95],["T_OBJECT_OPERATOR","->",95],["T_STRING","getThemeFromDb",95],"(",["T_VARIABLE","$theme",95],["T_OBJECT_OPERATOR","->",95],["T_STRING","getFullPath",95],"(",")",")",";",["T_WHITESPACE","\n        ",95],["T_IF","if",96],["T_WHITESPACE"," ",96],"(",["T_VARIABLE","$themeModel",96],["T_OBJECT_OPERATOR","->",96],["T_STRING","getId",96],"(",")",")",["T_WHITESPACE"," ",96],"{",["T_WHITESPACE","\n            ",96],["T_VARIABLE","$theme",97],["T_WHITESPACE"," ",97],"=",["T_WHITESPACE"," ",97],["T_VARIABLE","$themeModel",97],";",["T_WHITESPACE","\n            ",97],["T_RETURN","return",98],["T_WHITESPACE"," ",98],["T_VARIABLE","$this",98],";",["T_WHITESPACE","\n        ",98],"}",["T_WHITESPACE","\n\n        ",99],["T_VARIABLE","$tempId",101],["T_WHITESPACE"," ",101],"=",["T_WHITESPACE"," ",101],["T_VARIABLE","$theme",101],["T_OBJECT_OPERATOR","->",101],["T_STRING","getFullPath",101],"(",")",";",["T_WHITESPACE","\n        ",101],["T_IF","if",102],["T_WHITESPACE"," ",102],"(",["T_STRING","in_array",102],"(",["T_VARIABLE","$tempId",102],",",["T_WHITESPACE"," ",102],["T_VARIABLE","$inheritanceChain",102],")",")",["T_WHITESPACE"," ",102],"{",["T_WHITESPACE","\n            ",102],["T_THROW","throw",103],["T_WHITESPACE"," ",103],["T_NEW","new",103],["T_WHITESPACE"," ",103],["T_STRING","LocalizedException",103],"(",["T_STRING","__",103],"(",["T_CONSTANT_ENCAPSED_STRING","'Circular-reference in theme inheritance detected for \"%1\"'",103],",",["T_WHITESPACE"," ",103],["T_VARIABLE","$tempId",103],")",")",";",["T_WHITESPACE","\n        ",103],"}",["T_WHITESPACE","\n        ",104],["T_VARIABLE","$inheritanceChain",105],"[","]",["T_WHITESPACE"," ",105],"=",["T_WHITESPACE"," ",105],["T_VARIABLE","$tempId",105],";",["T_WHITESPACE","\n        ",105],["T_VARIABLE","$parentTheme",106],["T_WHITESPACE"," ",106],"=",["T_WHITESPACE"," ",106],["T_VARIABLE","$theme",106],["T_OBJECT_OPERATOR","->",106],["T_STRING","getParentTheme",106],"(",")",";",["T_WHITESPACE","\n        ",106],["T_IF","if",107],["T_WHITESPACE"," ",107],"(",["T_VARIABLE","$parentTheme",107],")",["T_WHITESPACE"," ",107],"{",["T_WHITESPACE","\n            ",107],["T_VARIABLE","$this",108],["T_OBJECT_OPERATOR","->",108],["T_STRING","_registerThemeRecursively",108],"(",["T_VARIABLE","$parentTheme",108],",",["T_WHITESPACE"," ",108],["T_VARIABLE","$inheritanceChain",108],")",";",["T_WHITESPACE","\n            ",108],["T_VARIABLE","$theme",109],["T_OBJECT_OPERATOR","->",109],["T_STRING","setParentId",109],"(",["T_VARIABLE","$parentTheme",109],["T_OBJECT_OPERATOR","->",109],["T_STRING","getId",109],"(",")",")",";",["T_WHITESPACE","\n        ",109],"}",["T_WHITESPACE","\n\n        ",110],["T_VARIABLE","$this",112],["T_OBJECT_OPERATOR","->",112],["T_STRING","_savePreviewImage",112],"(",["T_VARIABLE","$theme",112],")",";",["T_WHITESPACE","\n        ",112],["T_VARIABLE","$theme",113],["T_OBJECT_OPERATOR","->",113],["T_STRING","setType",113],"(",["T_STRING","ThemeInterface",113],["T_DOUBLE_COLON","::",113],["T_STRING","TYPE_PHYSICAL",113],")",";",["T_WHITESPACE","\n        ",113],["T_VARIABLE","$theme",114],["T_OBJECT_OPERATOR","->",114],["T_STRING","save",114],"(",")",";",["T_WHITESPACE","\n\n        ",114],["T_RETURN","return",116],["T_WHITESPACE"," ",116],["T_VARIABLE","$this",116],";",["T_WHITESPACE","\n    ",116],"}",["T_WHITESPACE","\n\n    ",117],["T_DOC_COMMENT","\/**\n     * Save preview image for theme\n     *\n     * @param ThemeInterface $theme\n     * @return $this\n     *\/",119],["T_WHITESPACE","\n    ",124],["T_PROTECTED","protected",125],["T_WHITESPACE"," ",125],["T_FUNCTION","function",125],["T_WHITESPACE"," ",125],["T_STRING","_savePreviewImage",125],"(",["T_STRING","ThemeInterface",125],["T_WHITESPACE"," ",125],["T_VARIABLE","$theme",125],")",["T_WHITESPACE","\n    ",125],"{",["T_WHITESPACE","\n        ",126],["T_VARIABLE","$themeDirectory",127],["T_WHITESPACE"," ",127],"=",["T_WHITESPACE"," ",127],["T_VARIABLE","$theme",127],["T_OBJECT_OPERATOR","->",127],["T_STRING","getCustomization",127],"(",")",["T_OBJECT_OPERATOR","->",127],["T_STRING","getThemeFilesPath",127],"(",")",";",["T_WHITESPACE","\n        ",127],["T_IF","if",128],["T_WHITESPACE"," ",128],"(","!",["T_VARIABLE","$theme",128],["T_OBJECT_OPERATOR","->",128],["T_STRING","getPreviewImage",128],"(",")",["T_WHITESPACE"," ",128],["T_BOOLEAN_OR","||",128],["T_WHITESPACE"," ",128],"!",["T_VARIABLE","$themeDirectory",128],")",["T_WHITESPACE"," ",128],"{",["T_WHITESPACE","\n            ",128],["T_RETURN","return",129],["T_WHITESPACE"," ",129],["T_VARIABLE","$this",129],";",["T_WHITESPACE","\n        ",129],"}",["T_WHITESPACE","\n        ",130],["T_VARIABLE","$imagePath",131],["T_WHITESPACE"," ",131],"=",["T_WHITESPACE"," ",131],["T_VARIABLE","$themeDirectory",131],["T_WHITESPACE"," ",131],".",["T_WHITESPACE"," ",131],["T_CONSTANT_ENCAPSED_STRING","'\/'",131],["T_WHITESPACE"," ",131],".",["T_WHITESPACE"," ",131],["T_VARIABLE","$theme",131],["T_OBJECT_OPERATOR","->",131],["T_STRING","getPreviewImage",131],"(",")",";",["T_WHITESPACE","\n        ",131],["T_IF","if",132],["T_WHITESPACE"," ",132],"(",["T_LNUMBER","0",132],["T_WHITESPACE"," ",132],["T_IS_IDENTICAL","===",132],["T_WHITESPACE"," ",132],["T_STRING","strpos",132],"(",["T_VARIABLE","$imagePath",132],",",["T_WHITESPACE"," ",132],["T_VARIABLE","$themeDirectory",132],")",")",["T_WHITESPACE"," ",132],"{",["T_WHITESPACE","\n            ",132],["T_VARIABLE","$theme",133],["T_OBJECT_OPERATOR","->",133],["T_STRING","getThemeImage",133],"(",")",["T_OBJECT_OPERATOR","->",133],["T_STRING","createPreviewImage",133],"(",["T_VARIABLE","$imagePath",133],")",";",["T_WHITESPACE","\n        ",133],"}",["T_WHITESPACE","\n        ",134],["T_RETURN","return",135],["T_WHITESPACE"," ",135],["T_VARIABLE","$this",135],";",["T_WHITESPACE","\n    ",135],"}",["T_WHITESPACE","\n\n    ",136],["T_DOC_COMMENT","\/**\n     * Get theme from DB by full path\n     *\n     * @param string $fullPath\n     * @return ThemeInterface\n     *\/",138],["T_WHITESPACE","\n    ",143],["T_PUBLIC","public",144],["T_WHITESPACE"," ",144],["T_FUNCTION","function",144],["T_WHITESPACE"," ",144],["T_STRING","getThemeFromDb",144],"(",["T_VARIABLE","$fullPath",144],")",["T_WHITESPACE","\n    ",144],"{",["T_WHITESPACE","\n        ",145],["T_RETURN","return",146],["T_WHITESPACE"," ",146],["T_VARIABLE","$this",146],["T_OBJECT_OPERATOR","->",146],["T_STRING","_collectionFactory",146],["T_OBJECT_OPERATOR","->",146],["T_STRING","create",146],"(",")",["T_OBJECT_OPERATOR","->",146],["T_STRING","getThemeByFullPath",146],"(",["T_VARIABLE","$fullPath",146],")",";",["T_WHITESPACE","\n    ",146],"}",["T_WHITESPACE","\n\n    ",147],["T_DOC_COMMENT","\/**\n     * Checks all physical themes that they were not deleted\n     *\n     * @return $this\n     *\/",149],["T_WHITESPACE","\n    ",153],["T_PUBLIC","public",154],["T_WHITESPACE"," ",154],["T_FUNCTION","function",154],["T_WHITESPACE"," ",154],["T_STRING","checkPhysicalThemes",154],"(",")",["T_WHITESPACE","\n    ",154],"{",["T_WHITESPACE","\n        ",155],["T_VARIABLE","$themes",156],["T_WHITESPACE"," ",156],"=",["T_WHITESPACE"," ",156],["T_VARIABLE","$this",156],["T_OBJECT_OPERATOR","->",156],["T_STRING","_collectionFactory",156],["T_OBJECT_OPERATOR","->",156],["T_STRING","create",156],"(",")",["T_OBJECT_OPERATOR","->",156],["T_STRING","addTypeFilter",156],"(",["T_STRING","ThemeInterface",156],["T_DOUBLE_COLON","::",156],["T_STRING","TYPE_PHYSICAL",156],")",";",["T_WHITESPACE","\n        ",156],["T_DOC_COMMENT","\/** @var $theme ThemeInterface *\/",157],["T_WHITESPACE","\n        ",157],["T_FOREACH","foreach",158],["T_WHITESPACE"," ",158],"(",["T_VARIABLE","$themes",158],["T_WHITESPACE"," ",158],["T_AS","as",158],["T_WHITESPACE"," ",158],["T_VARIABLE","$theme",158],")",["T_WHITESPACE"," ",158],"{",["T_WHITESPACE","\n            ",158],["T_IF","if",159],["T_WHITESPACE"," ",159],"(","!",["T_VARIABLE","$this",159],["T_OBJECT_OPERATOR","->",159],["T_STRING","_themeCollection",159],["T_OBJECT_OPERATOR","->",159],["T_STRING","hasTheme",159],"(",["T_VARIABLE","$theme",159],")",")",["T_WHITESPACE"," ",159],"{",["T_WHITESPACE","\n                ",159],["T_VARIABLE","$theme",160],["T_OBJECT_OPERATOR","->",160],["T_STRING","setType",160],"(",["T_STRING","ThemeInterface",160],["T_DOUBLE_COLON","::",160],["T_STRING","TYPE_VIRTUAL",160],")",["T_OBJECT_OPERATOR","->",160],["T_STRING","save",160],"(",")",";",["T_WHITESPACE","\n            ",160],"}",["T_WHITESPACE","\n        ",161],"}",["T_WHITESPACE","\n        ",162],["T_RETURN","return",163],["T_WHITESPACE"," ",163],["T_VARIABLE","$this",163],";",["T_WHITESPACE","\n    ",163],"}",["T_WHITESPACE","\n\n    ",164],["T_DOC_COMMENT","\/**\n     * Check whether all themes have correct parent theme by type\n     *\n     * @return $this\n     *\/",166],["T_WHITESPACE","\n    ",170],["T_PUBLIC","public",171],["T_WHITESPACE"," ",171],["T_FUNCTION","function",171],["T_WHITESPACE"," ",171],["T_STRING","checkAllowedThemeRelations",171],"(",")",["T_WHITESPACE","\n    ",171],"{",["T_WHITESPACE","\n        ",172],["T_FOREACH","foreach",173],["T_WHITESPACE"," ",173],"(",["T_VARIABLE","$this",173],["T_OBJECT_OPERATOR","->",173],["T_STRING","_forbiddenRelations",173],["T_WHITESPACE"," ",173],["T_AS","as",173],["T_WHITESPACE"," ",173],["T_VARIABLE","$typesSequence",173],")",["T_WHITESPACE"," ",173],"{",["T_WHITESPACE","\n            ",173],["T_LIST","list",174],"(",["T_VARIABLE","$parentType",174],",",["T_WHITESPACE"," ",174],["T_VARIABLE","$childType",174],")",["T_WHITESPACE"," ",174],"=",["T_WHITESPACE"," ",174],["T_VARIABLE","$typesSequence",174],";",["T_WHITESPACE","\n            ",174],["T_VARIABLE","$collection",175],["T_WHITESPACE"," ",175],"=",["T_WHITESPACE"," ",175],["T_VARIABLE","$this",175],["T_OBJECT_OPERATOR","->",175],["T_STRING","_collectionFactory",175],["T_OBJECT_OPERATOR","->",175],["T_STRING","create",175],"(",")",";",["T_WHITESPACE","\n            ",175],["T_VARIABLE","$collection",176],["T_OBJECT_OPERATOR","->",176],["T_STRING","addTypeRelationFilter",176],"(",["T_VARIABLE","$parentType",176],",",["T_WHITESPACE"," ",176],["T_VARIABLE","$childType",176],")",";",["T_WHITESPACE","\n            ",176],["T_DOC_COMMENT","\/** @var $theme ThemeInterface *\/",177],["T_WHITESPACE","\n            ",177],["T_FOREACH","foreach",178],["T_WHITESPACE"," ",178],"(",["T_VARIABLE","$collection",178],["T_WHITESPACE"," ",178],["T_AS","as",178],["T_WHITESPACE"," ",178],["T_VARIABLE","$theme",178],")",["T_WHITESPACE"," ",178],"{",["T_WHITESPACE","\n                ",178],["T_VARIABLE","$parentId",179],["T_WHITESPACE"," ",179],"=",["T_WHITESPACE"," ",179],["T_VARIABLE","$this",179],["T_OBJECT_OPERATOR","->",179],["T_STRING","_getResetParentId",179],"(",["T_VARIABLE","$theme",179],")",";",["T_WHITESPACE","\n                ",179],["T_IF","if",180],["T_WHITESPACE"," ",180],"(",["T_VARIABLE","$theme",180],["T_OBJECT_OPERATOR","->",180],["T_STRING","getParentId",180],"(",")",["T_WHITESPACE"," ",180],["T_IS_NOT_EQUAL","!=",180],["T_WHITESPACE"," ",180],["T_VARIABLE","$parentId",180],")",["T_WHITESPACE"," ",180],"{",["T_WHITESPACE","\n                    ",180],["T_VARIABLE","$theme",181],["T_OBJECT_OPERATOR","->",181],["T_STRING","setParentId",181],"(",["T_VARIABLE","$parentId",181],")",["T_OBJECT_OPERATOR","->",181],["T_STRING","save",181],"(",")",";",["T_WHITESPACE","\n                ",181],"}",["T_WHITESPACE","\n            ",182],"}",["T_WHITESPACE","\n        ",183],"}",["T_WHITESPACE","\n        ",184],["T_RETURN","return",185],["T_WHITESPACE"," ",185],["T_VARIABLE","$this",185],";",["T_WHITESPACE","\n    ",185],"}",["T_WHITESPACE","\n\n    ",186],["T_DOC_COMMENT","\/**\n     * Reset parent themes by type\n     *\n     * @param ThemeInterface $theme\n     * @return int|null\n     *\/",188],["T_WHITESPACE","\n    ",193],["T_PROTECTED","protected",194],["T_WHITESPACE"," ",194],["T_FUNCTION","function",194],["T_WHITESPACE"," ",194],["T_STRING","_getResetParentId",194],"(",["T_STRING","ThemeInterface",194],["T_WHITESPACE"," ",194],["T_VARIABLE","$theme",194],")",["T_WHITESPACE","\n    ",194],"{",["T_WHITESPACE","\n        ",195],["T_VARIABLE","$parentTheme",196],["T_WHITESPACE"," ",196],"=",["T_WHITESPACE"," ",196],["T_VARIABLE","$theme",196],["T_OBJECT_OPERATOR","->",196],["T_STRING","getParentTheme",196],"(",")",";",["T_WHITESPACE","\n        ",196],["T_WHILE","while",197],["T_WHITESPACE"," ",197],"(",["T_VARIABLE","$parentTheme",197],")",["T_WHITESPACE"," ",197],"{",["T_WHITESPACE","\n            ",197],["T_FOREACH","foreach",198],["T_WHITESPACE"," ",198],"(",["T_VARIABLE","$this",198],["T_OBJECT_OPERATOR","->",198],["T_STRING","_allowedRelations",198],["T_WHITESPACE"," ",198],["T_AS","as",198],["T_WHITESPACE"," ",198],["T_VARIABLE","$typesSequence",198],")",["T_WHITESPACE"," ",198],"{",["T_WHITESPACE","\n                ",198],["T_LIST","list",199],"(",["T_VARIABLE","$parentType",199],",",["T_WHITESPACE"," ",199],["T_VARIABLE","$childType",199],")",["T_WHITESPACE"," ",199],"=",["T_WHITESPACE"," ",199],["T_VARIABLE","$typesSequence",199],";",["T_WHITESPACE","\n                ",199],["T_IF","if",200],["T_WHITESPACE"," ",200],"(",["T_VARIABLE","$theme",200],["T_OBJECT_OPERATOR","->",200],["T_STRING","getType",200],"(",")",["T_WHITESPACE"," ",200],["T_IS_EQUAL","==",200],["T_WHITESPACE"," ",200],["T_VARIABLE","$childType",200],["T_WHITESPACE"," ",200],["T_BOOLEAN_AND","&&",200],["T_WHITESPACE"," ",200],["T_VARIABLE","$parentTheme",200],["T_OBJECT_OPERATOR","->",200],["T_STRING","getType",200],"(",")",["T_WHITESPACE"," ",200],["T_IS_EQUAL","==",200],["T_WHITESPACE"," ",200],["T_VARIABLE","$parentType",200],")",["T_WHITESPACE"," ",200],"{",["T_WHITESPACE","\n                    ",200],["T_RETURN","return",201],["T_WHITESPACE"," ",201],["T_VARIABLE","$parentTheme",201],["T_OBJECT_OPERATOR","->",201],["T_STRING","getId",201],"(",")",";",["T_WHITESPACE","\n                ",201],"}",["T_WHITESPACE","\n            ",202],"}",["T_WHITESPACE","\n            ",203],["T_VARIABLE","$parentTheme",204],["T_WHITESPACE"," ",204],"=",["T_WHITESPACE"," ",204],["T_VARIABLE","$parentTheme",204],["T_OBJECT_OPERATOR","->",204],["T_STRING","getParentTheme",204],"(",")",";",["T_WHITESPACE","\n        ",204],"}",["T_WHITESPACE","\n        ",205],["T_RETURN","return",206],["T_WHITESPACE"," ",206],["T_STRING","null",206],";",["T_WHITESPACE","\n    ",206],"}",["T_WHITESPACE","\n",207],"}",["T_WHITESPACE","\n",208]]
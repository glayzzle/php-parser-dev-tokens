[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Copyright \u00c2\u00a9 2013-2017 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n *\/",2],["T_WHITESPACE","\n\n",5],["T_DOC_COMMENT","\/**\n * Theme wysiwyg storage model\n *\/",7],["T_WHITESPACE","\n",9],["T_NAMESPACE","namespace",10],["T_WHITESPACE"," ",10],["T_STRING","Magento",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Theme",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Model",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Wysiwyg",10],";",["T_WHITESPACE","\n\n",10],["T_USE","use",12],["T_WHITESPACE"," ",12],["T_STRING","Magento",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Framework",12],["T_NS_SEPARATOR","\\",12],["T_STRING","App",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Filesystem",12],["T_NS_SEPARATOR","\\",12],["T_STRING","DirectoryList",12],";",["T_WHITESPACE","\n\n",12],["T_CLASS","class",14],["T_WHITESPACE"," ",14],["T_STRING","Storage",14],["T_WHITESPACE","\n",14],"{",["T_WHITESPACE","\n    ",15],["T_DOC_COMMENT","\/**\n     * Type font\n     *\/",16],["T_WHITESPACE","\n    ",18],["T_CONST","const",19],["T_WHITESPACE"," ",19],["T_STRING","TYPE_FONT",19],["T_WHITESPACE"," ",19],"=",["T_WHITESPACE"," ",19],["T_CONSTANT_ENCAPSED_STRING","'font'",19],";",["T_WHITESPACE","\n\n    ",19],["T_DOC_COMMENT","\/**\n     * Type image\n     *\/",21],["T_WHITESPACE","\n    ",23],["T_CONST","const",24],["T_WHITESPACE"," ",24],["T_STRING","TYPE_IMAGE",24],["T_WHITESPACE"," ",24],"=",["T_WHITESPACE"," ",24],["T_CONSTANT_ENCAPSED_STRING","'image'",24],";",["T_WHITESPACE","\n\n    ",24],["T_DOC_COMMENT","\/**\n     * \\Directory for image thumbnail\n     *\/",26],["T_WHITESPACE","\n    ",28],["T_CONST","const",29],["T_WHITESPACE"," ",29],["T_STRING","THUMBNAIL_DIRECTORY",29],["T_WHITESPACE"," ",29],"=",["T_WHITESPACE"," ",29],["T_CONSTANT_ENCAPSED_STRING","'.thumbnail'",29],";",["T_WHITESPACE","\n\n    ",29],["T_DOC_COMMENT","\/**\n     * Image thumbnail width\n     *\/",31],["T_WHITESPACE","\n    ",33],["T_CONST","const",34],["T_WHITESPACE"," ",34],["T_STRING","THUMBNAIL_WIDTH",34],["T_WHITESPACE"," ",34],"=",["T_WHITESPACE"," ",34],["T_LNUMBER","100",34],";",["T_WHITESPACE","\n\n    ",34],["T_DOC_COMMENT","\/**\n     * Image thumbnail height\n     *\/",36],["T_WHITESPACE","\n    ",38],["T_CONST","const",39],["T_WHITESPACE"," ",39],["T_STRING","THUMBNAIL_HEIGHT",39],["T_WHITESPACE"," ",39],"=",["T_WHITESPACE"," ",39],["T_LNUMBER","100",39],";",["T_WHITESPACE","\n\n    ",39],["T_DOC_COMMENT","\/**\n     * \\Directory name regular expression\n     *\/",41],["T_WHITESPACE","\n    ",43],["T_CONST","const",44],["T_WHITESPACE"," ",44],["T_STRING","DIRECTORY_NAME_REGEXP",44],["T_WHITESPACE"," ",44],"=",["T_WHITESPACE"," ",44],["T_CONSTANT_ENCAPSED_STRING","'\/^[a-z0-9\\-\\_]+$\/si'",44],";",["T_WHITESPACE","\n\n    ",44],["T_DOC_COMMENT","\/**\n     * Storage helper\n     *\n     * @var \\Magento\\Theme\\Helper\\Storage\n     *\/",46],["T_WHITESPACE","\n    ",50],["T_PROTECTED","protected",51],["T_WHITESPACE"," ",51],["T_VARIABLE","$_helper",51],";",["T_WHITESPACE","\n\n    ",51],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Framework\\ObjectManagerInterface\n     *\/",53],["T_WHITESPACE","\n    ",55],["T_PROTECTED","protected",56],["T_WHITESPACE"," ",56],["T_VARIABLE","$_objectManager",56],";",["T_WHITESPACE","\n\n    ",56],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Framework\\Image\\AdapterFactory\n     *\/",58],["T_WHITESPACE","\n    ",60],["T_PROTECTED","protected",61],["T_WHITESPACE"," ",61],["T_VARIABLE","$_imageFactory",61],";",["T_WHITESPACE","\n\n    ",61],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Framework\\Filesystem\\Directory\\Write\n     *\/",63],["T_WHITESPACE","\n    ",65],["T_PROTECTED","protected",66],["T_WHITESPACE"," ",66],["T_VARIABLE","$mediaWriteDirectory",66],";",["T_WHITESPACE","\n\n    ",66],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Framework\\Url\\EncoderInterface\n     *\/",68],["T_WHITESPACE","\n    ",70],["T_PROTECTED","protected",71],["T_WHITESPACE"," ",71],["T_VARIABLE","$urlEncoder",71],";",["T_WHITESPACE","\n\n    ",71],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Framework\\Url\\DecoderInterface\n     *\/",73],["T_WHITESPACE","\n    ",75],["T_PROTECTED","protected",76],["T_WHITESPACE"," ",76],["T_VARIABLE","$urlDecoder",76],";",["T_WHITESPACE","\n\n    ",76],["T_DOC_COMMENT","\/**\n     * Initialize dependencies\n     *\n     * @param \\Magento\\Framework\\Filesystem $filesystem\n     * @param \\Magento\\Theme\\Helper\\Storage $helper\n     * @param \\Magento\\Framework\\ObjectManagerInterface $objectManager\n     * @param \\Magento\\Framework\\Image\\AdapterFactory $imageFactory\n     * @param \\Magento\\Framework\\Url\\EncoderInterface $urlEncoder\n     * @param \\Magento\\Framework\\Url\\DecoderInterface $urlDecoder\n     *\/",78],["T_WHITESPACE","\n    ",87],["T_PUBLIC","public",88],["T_WHITESPACE"," ",88],["T_FUNCTION","function",88],["T_WHITESPACE"," ",88],["T_STRING","__construct",88],"(",["T_WHITESPACE","\n        ",88],["T_NS_SEPARATOR","\\",89],["T_STRING","Magento",89],["T_NS_SEPARATOR","\\",89],["T_STRING","Framework",89],["T_NS_SEPARATOR","\\",89],["T_STRING","Filesystem",89],["T_WHITESPACE"," ",89],["T_VARIABLE","$filesystem",89],",",["T_WHITESPACE","\n        ",89],["T_NS_SEPARATOR","\\",90],["T_STRING","Magento",90],["T_NS_SEPARATOR","\\",90],["T_STRING","Theme",90],["T_NS_SEPARATOR","\\",90],["T_STRING","Helper",90],["T_NS_SEPARATOR","\\",90],["T_STRING","Storage",90],["T_WHITESPACE"," ",90],["T_VARIABLE","$helper",90],",",["T_WHITESPACE","\n        ",90],["T_NS_SEPARATOR","\\",91],["T_STRING","Magento",91],["T_NS_SEPARATOR","\\",91],["T_STRING","Framework",91],["T_NS_SEPARATOR","\\",91],["T_STRING","ObjectManagerInterface",91],["T_WHITESPACE"," ",91],["T_VARIABLE","$objectManager",91],",",["T_WHITESPACE","\n        ",91],["T_NS_SEPARATOR","\\",92],["T_STRING","Magento",92],["T_NS_SEPARATOR","\\",92],["T_STRING","Framework",92],["T_NS_SEPARATOR","\\",92],["T_STRING","Image",92],["T_NS_SEPARATOR","\\",92],["T_STRING","AdapterFactory",92],["T_WHITESPACE"," ",92],["T_VARIABLE","$imageFactory",92],",",["T_WHITESPACE","\n        ",92],["T_NS_SEPARATOR","\\",93],["T_STRING","Magento",93],["T_NS_SEPARATOR","\\",93],["T_STRING","Framework",93],["T_NS_SEPARATOR","\\",93],["T_STRING","Url",93],["T_NS_SEPARATOR","\\",93],["T_STRING","EncoderInterface",93],["T_WHITESPACE"," ",93],["T_VARIABLE","$urlEncoder",93],",",["T_WHITESPACE","\n        ",93],["T_NS_SEPARATOR","\\",94],["T_STRING","Magento",94],["T_NS_SEPARATOR","\\",94],["T_STRING","Framework",94],["T_NS_SEPARATOR","\\",94],["T_STRING","Url",94],["T_NS_SEPARATOR","\\",94],["T_STRING","DecoderInterface",94],["T_WHITESPACE"," ",94],["T_VARIABLE","$urlDecoder",94],["T_WHITESPACE","\n    ",94],")",["T_WHITESPACE"," ",95],"{",["T_WHITESPACE","\n        ",95],["T_VARIABLE","$this",96],["T_OBJECT_OPERATOR","->",96],["T_STRING","mediaWriteDirectory",96],["T_WHITESPACE"," ",96],"=",["T_WHITESPACE"," ",96],["T_VARIABLE","$filesystem",96],["T_OBJECT_OPERATOR","->",96],["T_STRING","getDirectoryWrite",96],"(",["T_STRING","DirectoryList",96],["T_DOUBLE_COLON","::",96],["T_STRING","MEDIA",96],")",";",["T_WHITESPACE","\n        ",96],["T_VARIABLE","$this",97],["T_OBJECT_OPERATOR","->",97],["T_STRING","_helper",97],["T_WHITESPACE"," ",97],"=",["T_WHITESPACE"," ",97],["T_VARIABLE","$helper",97],";",["T_WHITESPACE","\n        ",97],["T_VARIABLE","$this",98],["T_OBJECT_OPERATOR","->",98],["T_STRING","_objectManager",98],["T_WHITESPACE"," ",98],"=",["T_WHITESPACE"," ",98],["T_VARIABLE","$objectManager",98],";",["T_WHITESPACE","\n        ",98],["T_VARIABLE","$this",99],["T_OBJECT_OPERATOR","->",99],["T_STRING","_imageFactory",99],["T_WHITESPACE"," ",99],"=",["T_WHITESPACE"," ",99],["T_VARIABLE","$imageFactory",99],";",["T_WHITESPACE","\n        ",99],["T_VARIABLE","$this",100],["T_OBJECT_OPERATOR","->",100],["T_STRING","urlEncoder",100],["T_WHITESPACE"," ",100],"=",["T_WHITESPACE"," ",100],["T_VARIABLE","$urlEncoder",100],";",["T_WHITESPACE","\n        ",100],["T_VARIABLE","$this",101],["T_OBJECT_OPERATOR","->",101],["T_STRING","urlDecoder",101],["T_WHITESPACE"," ",101],"=",["T_WHITESPACE"," ",101],["T_VARIABLE","$urlDecoder",101],";",["T_WHITESPACE","\n    ",101],"}",["T_WHITESPACE","\n\n    ",102],["T_DOC_COMMENT","\/**\n     * Upload file\n     *\n     * @param string $targetPath\n     * @return bool\n     * @throws \\Magento\\Framework\\Exception\\LocalizedException\n     *\/",104],["T_WHITESPACE","\n    ",110],["T_PUBLIC","public",111],["T_WHITESPACE"," ",111],["T_FUNCTION","function",111],["T_WHITESPACE"," ",111],["T_STRING","uploadFile",111],"(",["T_VARIABLE","$targetPath",111],")",["T_WHITESPACE","\n    ",111],"{",["T_WHITESPACE","\n        ",112],["T_DOC_COMMENT","\/** @var $uploader \\Magento\\MediaStorage\\Model\\File\\Uploader *\/",113],["T_WHITESPACE","\n        ",113],["T_VARIABLE","$uploader",114],["T_WHITESPACE"," ",114],"=",["T_WHITESPACE"," ",114],["T_VARIABLE","$this",114],["T_OBJECT_OPERATOR","->",114],["T_STRING","_objectManager",114],["T_OBJECT_OPERATOR","->",114],["T_STRING","create",114],"(",["T_WHITESPACE","\n            ",114],["T_NS_SEPARATOR","\\",115],["T_STRING","Magento",115],["T_NS_SEPARATOR","\\",115],["T_STRING","MediaStorage",115],["T_NS_SEPARATOR","\\",115],["T_STRING","Model",115],["T_NS_SEPARATOR","\\",115],["T_STRING","File",115],["T_NS_SEPARATOR","\\",115],["T_STRING","Uploader",115],["T_DOUBLE_COLON","::",115],["T_CLASS","class",115],",",["T_WHITESPACE","\n            ",115],"[",["T_CONSTANT_ENCAPSED_STRING","'fileId'",116],["T_WHITESPACE"," ",116],["T_DOUBLE_ARROW","=>",116],["T_WHITESPACE"," ",116],["T_CONSTANT_ENCAPSED_STRING","'file'",116],"]",["T_WHITESPACE","\n        ",116],")",";",["T_WHITESPACE","\n        ",117],["T_VARIABLE","$uploader",118],["T_OBJECT_OPERATOR","->",118],["T_STRING","setAllowedExtensions",118],"(",["T_VARIABLE","$this",118],["T_OBJECT_OPERATOR","->",118],["T_STRING","_helper",118],["T_OBJECT_OPERATOR","->",118],["T_STRING","getAllowedExtensionsByType",118],"(",")",")",";",["T_WHITESPACE","\n        ",118],["T_VARIABLE","$uploader",119],["T_OBJECT_OPERATOR","->",119],["T_STRING","setAllowRenameFiles",119],"(",["T_STRING","true",119],")",";",["T_WHITESPACE","\n        ",119],["T_VARIABLE","$uploader",120],["T_OBJECT_OPERATOR","->",120],["T_STRING","setFilesDispersion",120],"(",["T_STRING","false",120],")",";",["T_WHITESPACE","\n        ",120],["T_VARIABLE","$result",121],["T_WHITESPACE"," ",121],"=",["T_WHITESPACE"," ",121],["T_VARIABLE","$uploader",121],["T_OBJECT_OPERATOR","->",121],["T_STRING","save",121],"(",["T_VARIABLE","$targetPath",121],")",";",["T_WHITESPACE","\n\n        ",121],["T_IF","if",123],["T_WHITESPACE"," ",123],"(","!",["T_VARIABLE","$result",123],")",["T_WHITESPACE"," ",123],"{",["T_WHITESPACE","\n            ",123],["T_THROW","throw",124],["T_WHITESPACE"," ",124],["T_NEW","new",124],["T_WHITESPACE"," ",124],["T_NS_SEPARATOR","\\",124],["T_STRING","Magento",124],["T_NS_SEPARATOR","\\",124],["T_STRING","Framework",124],["T_NS_SEPARATOR","\\",124],["T_STRING","Exception",124],["T_NS_SEPARATOR","\\",124],["T_STRING","LocalizedException",124],"(",["T_STRING","__",124],"(",["T_CONSTANT_ENCAPSED_STRING","'We can\\'t upload the file right now.'",124],")",")",";",["T_WHITESPACE","\n        ",124],"}",["T_WHITESPACE","\n\n        ",125],["T_VARIABLE","$this",127],["T_OBJECT_OPERATOR","->",127],["T_STRING","_createThumbnail",127],"(",["T_VARIABLE","$targetPath",127],["T_WHITESPACE"," ",127],".",["T_WHITESPACE"," ",127],["T_CONSTANT_ENCAPSED_STRING","'\/'",127],["T_WHITESPACE"," ",127],".",["T_WHITESPACE"," ",127],["T_VARIABLE","$uploader",127],["T_OBJECT_OPERATOR","->",127],["T_STRING","getUploadedFileName",127],"(",")",")",";",["T_WHITESPACE","\n\n        ",127],["T_VARIABLE","$result",129],"[",["T_CONSTANT_ENCAPSED_STRING","'cookie'",129],"]",["T_WHITESPACE"," ",129],"=",["T_WHITESPACE"," ",129],"[",["T_WHITESPACE","\n            ",129],["T_CONSTANT_ENCAPSED_STRING","'name'",130],["T_WHITESPACE"," ",130],["T_DOUBLE_ARROW","=>",130],["T_WHITESPACE"," ",130],["T_VARIABLE","$this",130],["T_OBJECT_OPERATOR","->",130],["T_STRING","_helper",130],["T_OBJECT_OPERATOR","->",130],["T_STRING","getSession",130],"(",")",["T_OBJECT_OPERATOR","->",130],["T_STRING","getName",130],"(",")",",",["T_WHITESPACE","\n            ",130],["T_CONSTANT_ENCAPSED_STRING","'value'",131],["T_WHITESPACE"," ",131],["T_DOUBLE_ARROW","=>",131],["T_WHITESPACE"," ",131],["T_VARIABLE","$this",131],["T_OBJECT_OPERATOR","->",131],["T_STRING","_helper",131],["T_OBJECT_OPERATOR","->",131],["T_STRING","getSession",131],"(",")",["T_OBJECT_OPERATOR","->",131],["T_STRING","getSessionId",131],"(",")",",",["T_WHITESPACE","\n            ",131],["T_CONSTANT_ENCAPSED_STRING","'lifetime'",132],["T_WHITESPACE"," ",132],["T_DOUBLE_ARROW","=>",132],["T_WHITESPACE"," ",132],["T_VARIABLE","$this",132],["T_OBJECT_OPERATOR","->",132],["T_STRING","_helper",132],["T_OBJECT_OPERATOR","->",132],["T_STRING","getSession",132],"(",")",["T_OBJECT_OPERATOR","->",132],["T_STRING","getCookieLifetime",132],"(",")",",",["T_WHITESPACE","\n            ",132],["T_CONSTANT_ENCAPSED_STRING","'path'",133],["T_WHITESPACE"," ",133],["T_DOUBLE_ARROW","=>",133],["T_WHITESPACE"," ",133],["T_VARIABLE","$this",133],["T_OBJECT_OPERATOR","->",133],["T_STRING","_helper",133],["T_OBJECT_OPERATOR","->",133],["T_STRING","getSession",133],"(",")",["T_OBJECT_OPERATOR","->",133],["T_STRING","getCookiePath",133],"(",")",",",["T_WHITESPACE","\n            ",133],["T_CONSTANT_ENCAPSED_STRING","'domain'",134],["T_WHITESPACE"," ",134],["T_DOUBLE_ARROW","=>",134],["T_WHITESPACE"," ",134],["T_VARIABLE","$this",134],["T_OBJECT_OPERATOR","->",134],["T_STRING","_helper",134],["T_OBJECT_OPERATOR","->",134],["T_STRING","getSession",134],"(",")",["T_OBJECT_OPERATOR","->",134],["T_STRING","getCookieDomain",134],"(",")",["T_WHITESPACE","\n        ",134],"]",";",["T_WHITESPACE","\n\n        ",135],["T_RETURN","return",137],["T_WHITESPACE"," ",137],["T_VARIABLE","$result",137],";",["T_WHITESPACE","\n    ",137],"}",["T_WHITESPACE","\n\n    ",138],["T_DOC_COMMENT","\/**\n     * Create thumbnail for image and save it to thumbnails directory\n     *\n     * @param string $source\n     * @return bool|string Resized filepath or false if errors were occurred\n     *\/",140],["T_WHITESPACE","\n    ",145],["T_PUBLIC","public",146],["T_WHITESPACE"," ",146],["T_FUNCTION","function",146],["T_WHITESPACE"," ",146],["T_STRING","_createThumbnail",146],"(",["T_VARIABLE","$source",146],")",["T_WHITESPACE","\n    ",146],"{",["T_WHITESPACE","\n        ",147],["T_IF","if",148],["T_WHITESPACE"," ",148],"(",["T_STRING","self",148],["T_DOUBLE_COLON","::",148],["T_STRING","TYPE_IMAGE",148],["T_WHITESPACE"," ",148],["T_IS_NOT_EQUAL","!=",148],["T_WHITESPACE"," ",148],["T_VARIABLE","$this",148],["T_OBJECT_OPERATOR","->",148],["T_STRING","_helper",148],["T_OBJECT_OPERATOR","->",148],["T_STRING","getStorageType",148],"(",")",["T_WHITESPACE"," ",148],["T_BOOLEAN_OR","||",148],["T_WHITESPACE"," ",148],"!",["T_VARIABLE","$this",148],["T_OBJECT_OPERATOR","->",148],["T_STRING","mediaWriteDirectory",148],["T_OBJECT_OPERATOR","->",148],["T_STRING","isFile",148],"(",["T_WHITESPACE","\n            ",148],["T_VARIABLE","$source",149],["T_WHITESPACE","\n        ",149],")",["T_WHITESPACE"," ",150],["T_BOOLEAN_OR","||",150],["T_WHITESPACE"," ",150],"!",["T_VARIABLE","$this",150],["T_OBJECT_OPERATOR","->",150],["T_STRING","mediaWriteDirectory",150],["T_OBJECT_OPERATOR","->",150],["T_STRING","isReadable",150],"(",["T_WHITESPACE","\n            ",150],["T_VARIABLE","$source",151],["T_WHITESPACE","\n        ",151],")",["T_WHITESPACE","\n        ",152],")",["T_WHITESPACE"," ",153],"{",["T_WHITESPACE","\n            ",153],["T_RETURN","return",154],["T_WHITESPACE"," ",154],["T_STRING","false",154],";",["T_WHITESPACE","\n        ",154],"}",["T_WHITESPACE","\n        ",155],["T_VARIABLE","$thumbnailDir",156],["T_WHITESPACE"," ",156],"=",["T_WHITESPACE"," ",156],["T_VARIABLE","$this",156],["T_OBJECT_OPERATOR","->",156],["T_STRING","_helper",156],["T_OBJECT_OPERATOR","->",156],["T_STRING","getThumbnailDirectory",156],"(",["T_VARIABLE","$source",156],")",";",["T_WHITESPACE","\n        ",156],["T_VARIABLE","$thumbnailPath",157],["T_WHITESPACE"," ",157],"=",["T_WHITESPACE"," ",157],["T_VARIABLE","$thumbnailDir",157],["T_WHITESPACE"," ",157],".",["T_WHITESPACE"," ",157],["T_CONSTANT_ENCAPSED_STRING","'\/'",157],["T_WHITESPACE"," ",157],".",["T_WHITESPACE"," ",157],["T_STRING","pathinfo",157],"(",["T_VARIABLE","$source",157],",",["T_WHITESPACE"," ",157],["T_STRING","PATHINFO_BASENAME",157],")",";",["T_WHITESPACE","\n        ",157],["T_TRY","try",158],["T_WHITESPACE"," ",158],"{",["T_WHITESPACE","\n            ",158],["T_VARIABLE","$this",159],["T_OBJECT_OPERATOR","->",159],["T_STRING","mediaWriteDirectory",159],["T_OBJECT_OPERATOR","->",159],["T_STRING","isExist",159],"(",["T_VARIABLE","$thumbnailDir",159],")",";",["T_WHITESPACE","\n            ",159],["T_VARIABLE","$image",160],["T_WHITESPACE"," ",160],"=",["T_WHITESPACE"," ",160],["T_VARIABLE","$this",160],["T_OBJECT_OPERATOR","->",160],["T_STRING","_imageFactory",160],["T_OBJECT_OPERATOR","->",160],["T_STRING","create",160],"(",")",";",["T_WHITESPACE","\n            ",160],["T_VARIABLE","$image",161],["T_OBJECT_OPERATOR","->",161],["T_STRING","open",161],"(",["T_VARIABLE","$this",161],["T_OBJECT_OPERATOR","->",161],["T_STRING","mediaWriteDirectory",161],["T_OBJECT_OPERATOR","->",161],["T_STRING","getAbsolutePath",161],"(",["T_VARIABLE","$source",161],")",")",";",["T_WHITESPACE","\n            ",161],["T_VARIABLE","$image",162],["T_OBJECT_OPERATOR","->",162],["T_STRING","keepAspectRatio",162],"(",["T_STRING","true",162],")",";",["T_WHITESPACE","\n            ",162],["T_VARIABLE","$image",163],["T_OBJECT_OPERATOR","->",163],["T_STRING","resize",163],"(",["T_STRING","self",163],["T_DOUBLE_COLON","::",163],["T_STRING","THUMBNAIL_WIDTH",163],",",["T_WHITESPACE"," ",163],["T_STRING","self",163],["T_DOUBLE_COLON","::",163],["T_STRING","THUMBNAIL_HEIGHT",163],")",";",["T_WHITESPACE","\n            ",163],["T_VARIABLE","$image",164],["T_OBJECT_OPERATOR","->",164],["T_STRING","save",164],"(",["T_VARIABLE","$this",164],["T_OBJECT_OPERATOR","->",164],["T_STRING","mediaWriteDirectory",164],["T_OBJECT_OPERATOR","->",164],["T_STRING","getAbsolutePath",164],"(",["T_VARIABLE","$thumbnailPath",164],")",")",";",["T_WHITESPACE","\n        ",164],"}",["T_WHITESPACE"," ",165],["T_CATCH","catch",165],["T_WHITESPACE"," ",165],"(",["T_NS_SEPARATOR","\\",165],["T_STRING","Magento",165],["T_NS_SEPARATOR","\\",165],["T_STRING","Framework",165],["T_NS_SEPARATOR","\\",165],["T_STRING","Exception",165],["T_NS_SEPARATOR","\\",165],["T_STRING","FileSystemException",165],["T_WHITESPACE"," ",165],["T_VARIABLE","$e",165],")",["T_WHITESPACE"," ",165],"{",["T_WHITESPACE","\n            ",165],["T_VARIABLE","$this",166],["T_OBJECT_OPERATOR","->",166],["T_STRING","_objectManager",166],["T_OBJECT_OPERATOR","->",166],["T_STRING","get",166],"(",["T_NS_SEPARATOR","\\",166],["T_STRING","Psr",166],["T_NS_SEPARATOR","\\",166],["T_STRING","Log",166],["T_NS_SEPARATOR","\\",166],["T_STRING","LoggerInterface",166],["T_DOUBLE_COLON","::",166],["T_CLASS","class",166],")",["T_OBJECT_OPERATOR","->",166],["T_STRING","critical",166],"(",["T_VARIABLE","$e",166],")",";",["T_WHITESPACE","\n            ",166],["T_RETURN","return",167],["T_WHITESPACE"," ",167],["T_STRING","false",167],";",["T_WHITESPACE","\n        ",167],"}",["T_WHITESPACE","\n\n        ",168],["T_IF","if",170],["T_WHITESPACE"," ",170],"(",["T_VARIABLE","$this",170],["T_OBJECT_OPERATOR","->",170],["T_STRING","mediaWriteDirectory",170],["T_OBJECT_OPERATOR","->",170],["T_STRING","isFile",170],"(",["T_VARIABLE","$thumbnailPath",170],")",")",["T_WHITESPACE"," ",170],"{",["T_WHITESPACE","\n            ",170],["T_RETURN","return",171],["T_WHITESPACE"," ",171],["T_VARIABLE","$thumbnailPath",171],";",["T_WHITESPACE","\n        ",171],"}",["T_WHITESPACE","\n        ",172],["T_RETURN","return",173],["T_WHITESPACE"," ",173],["T_STRING","false",173],";",["T_WHITESPACE","\n    ",173],"}",["T_WHITESPACE","\n\n    ",174],["T_DOC_COMMENT","\/**\n     * Create folder\n     *\n     * @param string $name\n     * @param string $path\n     * @return array\n     * @throws \\Magento\\Framework\\Exception\\LocalizedException\n     *\/",176],["T_WHITESPACE","\n    ",183],["T_PUBLIC","public",184],["T_WHITESPACE"," ",184],["T_FUNCTION","function",184],["T_WHITESPACE"," ",184],["T_STRING","createFolder",184],"(",["T_VARIABLE","$name",184],",",["T_WHITESPACE"," ",184],["T_VARIABLE","$path",184],")",["T_WHITESPACE","\n    ",184],"{",["T_WHITESPACE","\n        ",185],["T_IF","if",186],["T_WHITESPACE"," ",186],"(","!",["T_STRING","preg_match",186],"(",["T_STRING","self",186],["T_DOUBLE_COLON","::",186],["T_STRING","DIRECTORY_NAME_REGEXP",186],",",["T_WHITESPACE"," ",186],["T_VARIABLE","$name",186],")",")",["T_WHITESPACE"," ",186],"{",["T_WHITESPACE","\n            ",186],["T_THROW","throw",187],["T_WHITESPACE"," ",187],["T_NEW","new",187],["T_WHITESPACE"," ",187],["T_NS_SEPARATOR","\\",187],["T_STRING","Magento",187],["T_NS_SEPARATOR","\\",187],["T_STRING","Framework",187],["T_NS_SEPARATOR","\\",187],["T_STRING","Exception",187],["T_NS_SEPARATOR","\\",187],["T_STRING","LocalizedException",187],"(",["T_WHITESPACE","\n                ",187],["T_STRING","__",188],"(",["T_CONSTANT_ENCAPSED_STRING","'Use only standard alphanumeric, dashes and underscores.'",188],")",["T_WHITESPACE","\n            ",188],")",";",["T_WHITESPACE","\n        ",189],"}",["T_WHITESPACE","\n        ",190],["T_IF","if",191],["T_WHITESPACE"," ",191],"(","!",["T_VARIABLE","$this",191],["T_OBJECT_OPERATOR","->",191],["T_STRING","mediaWriteDirectory",191],["T_OBJECT_OPERATOR","->",191],["T_STRING","isWritable",191],"(",["T_VARIABLE","$path",191],")",")",["T_WHITESPACE"," ",191],"{",["T_WHITESPACE","\n            ",191],["T_VARIABLE","$path",192],["T_WHITESPACE"," ",192],"=",["T_WHITESPACE"," ",192],["T_VARIABLE","$this",192],["T_OBJECT_OPERATOR","->",192],["T_STRING","_helper",192],["T_OBJECT_OPERATOR","->",192],["T_STRING","getStorageRoot",192],"(",")",";",["T_WHITESPACE","\n        ",192],"}",["T_WHITESPACE","\n\n        ",193],["T_VARIABLE","$newPath",195],["T_WHITESPACE"," ",195],"=",["T_WHITESPACE"," ",195],["T_VARIABLE","$path",195],["T_WHITESPACE"," ",195],".",["T_WHITESPACE"," ",195],["T_CONSTANT_ENCAPSED_STRING","'\/'",195],["T_WHITESPACE"," ",195],".",["T_WHITESPACE"," ",195],["T_VARIABLE","$name",195],";",["T_WHITESPACE","\n\n        ",195],["T_IF","if",197],["T_WHITESPACE"," ",197],"(",["T_VARIABLE","$this",197],["T_OBJECT_OPERATOR","->",197],["T_STRING","mediaWriteDirectory",197],["T_OBJECT_OPERATOR","->",197],["T_STRING","isExist",197],"(",["T_VARIABLE","$newPath",197],")",")",["T_WHITESPACE"," ",197],"{",["T_WHITESPACE","\n            ",197],["T_THROW","throw",198],["T_WHITESPACE"," ",198],["T_NEW","new",198],["T_WHITESPACE"," ",198],["T_NS_SEPARATOR","\\",198],["T_STRING","Magento",198],["T_NS_SEPARATOR","\\",198],["T_STRING","Framework",198],["T_NS_SEPARATOR","\\",198],["T_STRING","Exception",198],["T_NS_SEPARATOR","\\",198],["T_STRING","LocalizedException",198],"(",["T_STRING","__",198],"(",["T_CONSTANT_ENCAPSED_STRING","'We found a directory with the same name.'",198],")",")",";",["T_WHITESPACE","\n        ",198],"}",["T_WHITESPACE","\n\n        ",199],["T_VARIABLE","$this",201],["T_OBJECT_OPERATOR","->",201],["T_STRING","mediaWriteDirectory",201],["T_OBJECT_OPERATOR","->",201],["T_STRING","create",201],"(",["T_VARIABLE","$newPath",201],")",";",["T_WHITESPACE","\n\n        ",201],["T_VARIABLE","$result",203],["T_WHITESPACE"," ",203],"=",["T_WHITESPACE"," ",203],"[",["T_WHITESPACE","\n            ",203],["T_CONSTANT_ENCAPSED_STRING","'name'",204],["T_WHITESPACE"," ",204],["T_DOUBLE_ARROW","=>",204],["T_WHITESPACE"," ",204],["T_VARIABLE","$name",204],",",["T_WHITESPACE","\n            ",204],["T_CONSTANT_ENCAPSED_STRING","'short_name'",205],["T_WHITESPACE"," ",205],["T_DOUBLE_ARROW","=>",205],["T_WHITESPACE"," ",205],["T_VARIABLE","$this",205],["T_OBJECT_OPERATOR","->",205],["T_STRING","_helper",205],["T_OBJECT_OPERATOR","->",205],["T_STRING","getShortFilename",205],"(",["T_VARIABLE","$name",205],")",",",["T_WHITESPACE","\n            ",205],["T_CONSTANT_ENCAPSED_STRING","'path'",206],["T_WHITESPACE"," ",206],["T_DOUBLE_ARROW","=>",206],["T_WHITESPACE"," ",206],["T_STRING","str_replace",206],"(",["T_VARIABLE","$this",206],["T_OBJECT_OPERATOR","->",206],["T_STRING","_helper",206],["T_OBJECT_OPERATOR","->",206],["T_STRING","getStorageRoot",206],"(",")",",",["T_WHITESPACE"," ",206],["T_CONSTANT_ENCAPSED_STRING","''",206],",",["T_WHITESPACE"," ",206],["T_VARIABLE","$newPath",206],")",",",["T_WHITESPACE","\n            ",206],["T_CONSTANT_ENCAPSED_STRING","'id'",207],["T_WHITESPACE"," ",207],["T_DOUBLE_ARROW","=>",207],["T_WHITESPACE"," ",207],["T_VARIABLE","$this",207],["T_OBJECT_OPERATOR","->",207],["T_STRING","_helper",207],["T_OBJECT_OPERATOR","->",207],["T_STRING","convertPathToId",207],"(",["T_VARIABLE","$newPath",207],")",["T_WHITESPACE","\n        ",207],"]",";",["T_WHITESPACE","\n\n        ",208],["T_RETURN","return",210],["T_WHITESPACE"," ",210],["T_VARIABLE","$result",210],";",["T_WHITESPACE","\n    ",210],"}",["T_WHITESPACE","\n\n    ",211],["T_DOC_COMMENT","\/**\n     * Delete file\n     *\n     * @param string $file\n     * @return \\Magento\\Theme\\Model\\Wysiwyg\\Storage\n     *\/",213],["T_WHITESPACE","\n    ",218],["T_PUBLIC","public",219],["T_WHITESPACE"," ",219],["T_FUNCTION","function",219],["T_WHITESPACE"," ",219],["T_STRING","deleteFile",219],"(",["T_VARIABLE","$file",219],")",["T_WHITESPACE","\n    ",219],"{",["T_WHITESPACE","\n        ",220],["T_VARIABLE","$file",221],["T_WHITESPACE"," ",221],"=",["T_WHITESPACE"," ",221],["T_VARIABLE","$this",221],["T_OBJECT_OPERATOR","->",221],["T_STRING","urlDecoder",221],["T_OBJECT_OPERATOR","->",221],["T_STRING","decode",221],"(",["T_VARIABLE","$file",221],")",";",["T_WHITESPACE","\n        ",221],["T_VARIABLE","$path",222],["T_WHITESPACE"," ",222],"=",["T_WHITESPACE"," ",222],["T_VARIABLE","$this",222],["T_OBJECT_OPERATOR","->",222],["T_STRING","mediaWriteDirectory",222],["T_OBJECT_OPERATOR","->",222],["T_STRING","getRelativePath",222],"(",["T_VARIABLE","$this",222],["T_OBJECT_OPERATOR","->",222],["T_STRING","_helper",222],["T_OBJECT_OPERATOR","->",222],["T_STRING","getCurrentPath",222],"(",")",")",";",["T_WHITESPACE","\n\n        ",222],["T_VARIABLE","$filePath",224],["T_WHITESPACE"," ",224],"=",["T_WHITESPACE"," ",224],["T_VARIABLE","$this",224],["T_OBJECT_OPERATOR","->",224],["T_STRING","mediaWriteDirectory",224],["T_OBJECT_OPERATOR","->",224],["T_STRING","getRelativePath",224],"(",["T_VARIABLE","$path",224],["T_WHITESPACE"," ",224],".",["T_WHITESPACE"," ",224],["T_CONSTANT_ENCAPSED_STRING","'\/'",224],["T_WHITESPACE"," ",224],".",["T_WHITESPACE"," ",224],["T_VARIABLE","$file",224],")",";",["T_WHITESPACE","\n        ",224],["T_VARIABLE","$thumbnailPath",225],["T_WHITESPACE"," ",225],"=",["T_WHITESPACE"," ",225],["T_VARIABLE","$this",225],["T_OBJECT_OPERATOR","->",225],["T_STRING","_helper",225],["T_OBJECT_OPERATOR","->",225],["T_STRING","getThumbnailDirectory",225],"(",["T_VARIABLE","$filePath",225],")",["T_WHITESPACE"," ",225],".",["T_WHITESPACE"," ",225],["T_CONSTANT_ENCAPSED_STRING","'\/'",225],["T_WHITESPACE"," ",225],".",["T_WHITESPACE"," ",225],["T_VARIABLE","$file",225],";",["T_WHITESPACE","\n\n        ",225],["T_IF","if",227],["T_WHITESPACE"," ",227],"(",["T_LNUMBER","0",227],["T_WHITESPACE"," ",227],["T_IS_IDENTICAL","===",227],["T_WHITESPACE"," ",227],["T_STRING","strpos",227],"(",["T_VARIABLE","$filePath",227],",",["T_WHITESPACE"," ",227],["T_VARIABLE","$path",227],")",["T_WHITESPACE"," ",227],["T_BOOLEAN_AND","&&",227],["T_WHITESPACE"," ",227],["T_LNUMBER","0",227],["T_WHITESPACE"," ",227],["T_IS_IDENTICAL","===",227],["T_WHITESPACE"," ",227],["T_STRING","strpos",227],"(",["T_VARIABLE","$filePath",227],",",["T_WHITESPACE"," ",227],["T_VARIABLE","$this",227],["T_OBJECT_OPERATOR","->",227],["T_STRING","_helper",227],["T_OBJECT_OPERATOR","->",227],["T_STRING","getStorageRoot",227],"(",")",")",")",["T_WHITESPACE"," ",227],"{",["T_WHITESPACE","\n            ",227],["T_VARIABLE","$this",228],["T_OBJECT_OPERATOR","->",228],["T_STRING","mediaWriteDirectory",228],["T_OBJECT_OPERATOR","->",228],["T_STRING","delete",228],"(",["T_VARIABLE","$filePath",228],")",";",["T_WHITESPACE","\n            ",228],["T_VARIABLE","$this",229],["T_OBJECT_OPERATOR","->",229],["T_STRING","mediaWriteDirectory",229],["T_OBJECT_OPERATOR","->",229],["T_STRING","delete",229],"(",["T_VARIABLE","$thumbnailPath",229],")",";",["T_WHITESPACE","\n        ",229],"}",["T_WHITESPACE","\n        ",230],["T_RETURN","return",231],["T_WHITESPACE"," ",231],["T_VARIABLE","$this",231],";",["T_WHITESPACE","\n    ",231],"}",["T_WHITESPACE","\n\n    ",232],["T_DOC_COMMENT","\/**\n     * Get directory collection\n     *\n     * @param string $currentPath\n     * @return array\n     * @throws \\Magento\\Framework\\Exception\\LocalizedException\n     *\/",234],["T_WHITESPACE","\n    ",240],["T_PUBLIC","public",241],["T_WHITESPACE"," ",241],["T_FUNCTION","function",241],["T_WHITESPACE"," ",241],["T_STRING","getDirsCollection",241],"(",["T_VARIABLE","$currentPath",241],")",["T_WHITESPACE","\n    ",241],"{",["T_WHITESPACE","\n        ",242],["T_IF","if",243],["T_WHITESPACE"," ",243],"(","!",["T_VARIABLE","$this",243],["T_OBJECT_OPERATOR","->",243],["T_STRING","mediaWriteDirectory",243],["T_OBJECT_OPERATOR","->",243],["T_STRING","isExist",243],"(",["T_VARIABLE","$currentPath",243],")",")",["T_WHITESPACE"," ",243],"{",["T_WHITESPACE","\n            ",243],["T_THROW","throw",244],["T_WHITESPACE"," ",244],["T_NEW","new",244],["T_WHITESPACE"," ",244],["T_NS_SEPARATOR","\\",244],["T_STRING","Magento",244],["T_NS_SEPARATOR","\\",244],["T_STRING","Framework",244],["T_NS_SEPARATOR","\\",244],["T_STRING","Exception",244],["T_NS_SEPARATOR","\\",244],["T_STRING","LocalizedException",244],"(",["T_STRING","__",244],"(",["T_CONSTANT_ENCAPSED_STRING","'We cannot find a directory with this name.'",244],")",")",";",["T_WHITESPACE","\n        ",244],"}",["T_WHITESPACE","\n        ",245],["T_VARIABLE","$paths",246],["T_WHITESPACE"," ",246],"=",["T_WHITESPACE"," ",246],["T_VARIABLE","$this",246],["T_OBJECT_OPERATOR","->",246],["T_STRING","mediaWriteDirectory",246],["T_OBJECT_OPERATOR","->",246],["T_STRING","search",246],"(",["T_CONSTANT_ENCAPSED_STRING","'.*'",246],",",["T_WHITESPACE"," ",246],["T_VARIABLE","$currentPath",246],")",";",["T_WHITESPACE","\n        ",246],["T_VARIABLE","$directories",247],["T_WHITESPACE"," ",247],"=",["T_WHITESPACE"," ",247],"[","]",";",["T_WHITESPACE","\n        ",247],["T_FOREACH","foreach",248],["T_WHITESPACE"," ",248],"(",["T_VARIABLE","$paths",248],["T_WHITESPACE"," ",248],["T_AS","as",248],["T_WHITESPACE"," ",248],["T_VARIABLE","$path",248],")",["T_WHITESPACE"," ",248],"{",["T_WHITESPACE","\n            ",248],["T_IF","if",249],["T_WHITESPACE"," ",249],"(",["T_VARIABLE","$this",249],["T_OBJECT_OPERATOR","->",249],["T_STRING","mediaWriteDirectory",249],["T_OBJECT_OPERATOR","->",249],["T_STRING","isDirectory",249],"(",["T_VARIABLE","$path",249],")",")",["T_WHITESPACE"," ",249],"{",["T_WHITESPACE","\n                ",249],["T_VARIABLE","$directories",250],"[","]",["T_WHITESPACE"," ",250],"=",["T_WHITESPACE"," ",250],["T_VARIABLE","$path",250],";",["T_WHITESPACE","\n            ",250],"}",["T_WHITESPACE","\n        ",251],"}",["T_WHITESPACE","\n        ",252],["T_RETURN","return",253],["T_WHITESPACE"," ",253],["T_VARIABLE","$directories",253],";",["T_WHITESPACE","\n    ",253],"}",["T_WHITESPACE","\n\n    ",254],["T_DOC_COMMENT","\/**\n     * Get files collection\n     *\n     * @return array\n     *\/",256],["T_WHITESPACE","\n    ",260],["T_PUBLIC","public",261],["T_WHITESPACE"," ",261],["T_FUNCTION","function",261],["T_WHITESPACE"," ",261],["T_STRING","getFilesCollection",261],"(",")",["T_WHITESPACE","\n    ",261],"{",["T_WHITESPACE","\n        ",262],["T_VARIABLE","$paths",263],["T_WHITESPACE"," ",263],"=",["T_WHITESPACE"," ",263],["T_VARIABLE","$this",263],["T_OBJECT_OPERATOR","->",263],["T_STRING","mediaWriteDirectory",263],["T_OBJECT_OPERATOR","->",263],["T_STRING","search",263],"(",["T_CONSTANT_ENCAPSED_STRING","'.*'",263],",",["T_WHITESPACE"," ",263],["T_VARIABLE","$this",263],["T_OBJECT_OPERATOR","->",263],["T_STRING","_helper",263],["T_OBJECT_OPERATOR","->",263],["T_STRING","getCurrentPath",263],"(",")",")",";",["T_WHITESPACE","\n        ",263],["T_VARIABLE","$files",264],["T_WHITESPACE"," ",264],"=",["T_WHITESPACE"," ",264],"[","]",";",["T_WHITESPACE","\n        ",264],["T_VARIABLE","$requestParams",265],["T_WHITESPACE"," ",265],"=",["T_WHITESPACE"," ",265],["T_VARIABLE","$this",265],["T_OBJECT_OPERATOR","->",265],["T_STRING","_helper",265],["T_OBJECT_OPERATOR","->",265],["T_STRING","getRequestParams",265],"(",")",";",["T_WHITESPACE","\n        ",265],["T_VARIABLE","$storageType",266],["T_WHITESPACE"," ",266],"=",["T_WHITESPACE"," ",266],["T_VARIABLE","$this",266],["T_OBJECT_OPERATOR","->",266],["T_STRING","_helper",266],["T_OBJECT_OPERATOR","->",266],["T_STRING","getStorageType",266],"(",")",";",["T_WHITESPACE","\n        ",266],["T_FOREACH","foreach",267],["T_WHITESPACE"," ",267],"(",["T_VARIABLE","$paths",267],["T_WHITESPACE"," ",267],["T_AS","as",267],["T_WHITESPACE"," ",267],["T_VARIABLE","$path",267],")",["T_WHITESPACE"," ",267],"{",["T_WHITESPACE","\n            ",267],["T_IF","if",268],["T_WHITESPACE"," ",268],"(","!",["T_VARIABLE","$this",268],["T_OBJECT_OPERATOR","->",268],["T_STRING","mediaWriteDirectory",268],["T_OBJECT_OPERATOR","->",268],["T_STRING","isFile",268],"(",["T_VARIABLE","$path",268],")",")",["T_WHITESPACE"," ",268],"{",["T_WHITESPACE","\n                ",268],["T_CONTINUE","continue",269],";",["T_WHITESPACE","\n            ",269],"}",["T_WHITESPACE","\n            ",270],["T_VARIABLE","$fileName",271],["T_WHITESPACE"," ",271],"=",["T_WHITESPACE"," ",271],["T_STRING","pathinfo",271],"(",["T_VARIABLE","$path",271],",",["T_WHITESPACE"," ",271],["T_STRING","PATHINFO_BASENAME",271],")",";",["T_WHITESPACE","\n            ",271],["T_VARIABLE","$file",272],["T_WHITESPACE"," ",272],"=",["T_WHITESPACE"," ",272],"[",["T_CONSTANT_ENCAPSED_STRING","'text'",272],["T_WHITESPACE"," ",272],["T_DOUBLE_ARROW","=>",272],["T_WHITESPACE"," ",272],["T_VARIABLE","$fileName",272],",",["T_WHITESPACE"," ",272],["T_CONSTANT_ENCAPSED_STRING","'id'",272],["T_WHITESPACE"," ",272],["T_DOUBLE_ARROW","=>",272],["T_WHITESPACE"," ",272],["T_VARIABLE","$this",272],["T_OBJECT_OPERATOR","->",272],["T_STRING","urlEncoder",272],["T_OBJECT_OPERATOR","->",272],["T_STRING","encode",272],"(",["T_VARIABLE","$fileName",272],")","]",";",["T_WHITESPACE","\n            ",272],["T_IF","if",273],["T_WHITESPACE"," ",273],"(",["T_STRING","self",273],["T_DOUBLE_COLON","::",273],["T_STRING","TYPE_IMAGE",273],["T_WHITESPACE"," ",273],["T_IS_EQUAL","==",273],["T_WHITESPACE"," ",273],["T_VARIABLE","$storageType",273],")",["T_WHITESPACE"," ",273],"{",["T_WHITESPACE","\n                ",273],["T_VARIABLE","$requestParams",274],"[",["T_CONSTANT_ENCAPSED_STRING","'file'",274],"]",["T_WHITESPACE"," ",274],"=",["T_WHITESPACE"," ",274],["T_VARIABLE","$fileName",274],";",["T_WHITESPACE","\n                ",274],["T_VARIABLE","$file",275],"[",["T_CONSTANT_ENCAPSED_STRING","'thumbnailParams'",275],"]",["T_WHITESPACE"," ",275],"=",["T_WHITESPACE"," ",275],["T_VARIABLE","$requestParams",275],";",["T_WHITESPACE","\n\n                ",275],["T_VARIABLE","$size",277],["T_WHITESPACE"," ",277],"=",["T_WHITESPACE"," ",277],"@",["T_STRING","getimagesize",277],"(",["T_VARIABLE","$path",277],")",";",["T_WHITESPACE","\n                ",277],["T_IF","if",278],["T_WHITESPACE"," ",278],"(",["T_STRING","is_array",278],"(",["T_VARIABLE","$size",278],")",")",["T_WHITESPACE"," ",278],"{",["T_WHITESPACE","\n                    ",278],["T_VARIABLE","$file",279],"[",["T_CONSTANT_ENCAPSED_STRING","'width'",279],"]",["T_WHITESPACE"," ",279],"=",["T_WHITESPACE"," ",279],["T_VARIABLE","$size",279],"[",["T_LNUMBER","0",279],"]",";",["T_WHITESPACE","\n                    ",279],["T_VARIABLE","$file",280],"[",["T_CONSTANT_ENCAPSED_STRING","'height'",280],"]",["T_WHITESPACE"," ",280],"=",["T_WHITESPACE"," ",280],["T_VARIABLE","$size",280],"[",["T_LNUMBER","1",280],"]",";",["T_WHITESPACE","\n                ",280],"}",["T_WHITESPACE","\n            ",281],"}",["T_WHITESPACE","\n            ",282],["T_VARIABLE","$files",283],"[","]",["T_WHITESPACE"," ",283],"=",["T_WHITESPACE"," ",283],["T_VARIABLE","$file",283],";",["T_WHITESPACE","\n        ",283],"}",["T_WHITESPACE","\n        ",284],["T_RETURN","return",285],["T_WHITESPACE"," ",285],["T_VARIABLE","$files",285],";",["T_WHITESPACE","\n    ",285],"}",["T_WHITESPACE","\n\n    ",286],["T_DOC_COMMENT","\/**\n     * Get directories tree array\n     *\n     * @return array\n     *\/",288],["T_WHITESPACE","\n    ",292],["T_PUBLIC","public",293],["T_WHITESPACE"," ",293],["T_FUNCTION","function",293],["T_WHITESPACE"," ",293],["T_STRING","getTreeArray",293],"(",")",["T_WHITESPACE","\n    ",293],"{",["T_WHITESPACE","\n        ",294],["T_VARIABLE","$directories",295],["T_WHITESPACE"," ",295],"=",["T_WHITESPACE"," ",295],["T_VARIABLE","$this",295],["T_OBJECT_OPERATOR","->",295],["T_STRING","getDirsCollection",295],"(",["T_VARIABLE","$this",295],["T_OBJECT_OPERATOR","->",295],["T_STRING","_helper",295],["T_OBJECT_OPERATOR","->",295],["T_STRING","getCurrentPath",295],"(",")",")",";",["T_WHITESPACE","\n        ",295],["T_VARIABLE","$resultArray",296],["T_WHITESPACE"," ",296],"=",["T_WHITESPACE"," ",296],"[","]",";",["T_WHITESPACE","\n        ",296],["T_FOREACH","foreach",297],["T_WHITESPACE"," ",297],"(",["T_VARIABLE","$directories",297],["T_WHITESPACE"," ",297],["T_AS","as",297],["T_WHITESPACE"," ",297],["T_VARIABLE","$path",297],")",["T_WHITESPACE"," ",297],"{",["T_WHITESPACE","\n            ",297],["T_VARIABLE","$resultArray",298],"[","]",["T_WHITESPACE"," ",298],"=",["T_WHITESPACE"," ",298],"[",["T_WHITESPACE","\n                ",298],["T_CONSTANT_ENCAPSED_STRING","'text'",299],["T_WHITESPACE"," ",299],["T_DOUBLE_ARROW","=>",299],["T_WHITESPACE"," ",299],["T_VARIABLE","$this",299],["T_OBJECT_OPERATOR","->",299],["T_STRING","_helper",299],["T_OBJECT_OPERATOR","->",299],["T_STRING","getShortFilename",299],"(",["T_STRING","pathinfo",299],"(",["T_VARIABLE","$path",299],",",["T_WHITESPACE"," ",299],["T_STRING","PATHINFO_BASENAME",299],")",",",["T_WHITESPACE"," ",299],["T_LNUMBER","20",299],")",",",["T_WHITESPACE","\n                ",299],["T_CONSTANT_ENCAPSED_STRING","'id'",300],["T_WHITESPACE"," ",300],["T_DOUBLE_ARROW","=>",300],["T_WHITESPACE"," ",300],["T_VARIABLE","$this",300],["T_OBJECT_OPERATOR","->",300],["T_STRING","_helper",300],["T_OBJECT_OPERATOR","->",300],["T_STRING","convertPathToId",300],"(",["T_VARIABLE","$path",300],")",",",["T_WHITESPACE","\n                ",300],["T_CONSTANT_ENCAPSED_STRING","'cls'",301],["T_WHITESPACE"," ",301],["T_DOUBLE_ARROW","=>",301],["T_WHITESPACE"," ",301],["T_CONSTANT_ENCAPSED_STRING","'folder'",301],["T_WHITESPACE","\n            ",301],"]",";",["T_WHITESPACE","\n        ",302],"}",["T_WHITESPACE","\n        ",303],["T_RETURN","return",304],["T_WHITESPACE"," ",304],["T_VARIABLE","$resultArray",304],";",["T_WHITESPACE","\n    ",304],"}",["T_WHITESPACE","\n\n    ",305],["T_DOC_COMMENT","\/**\n     * Delete directory\n     *\n     * @param string $path\n     * @return bool\n     * @throws \\Magento\\Framework\\Exception\\LocalizedException\n     *\/",307],["T_WHITESPACE","\n    ",313],["T_PUBLIC","public",314],["T_WHITESPACE"," ",314],["T_FUNCTION","function",314],["T_WHITESPACE"," ",314],["T_STRING","deleteDirectory",314],"(",["T_VARIABLE","$path",314],")",["T_WHITESPACE","\n    ",314],"{",["T_WHITESPACE","\n        ",315],["T_VARIABLE","$rootCmp",316],["T_WHITESPACE"," ",316],"=",["T_WHITESPACE"," ",316],["T_STRING","rtrim",316],"(",["T_VARIABLE","$this",316],["T_OBJECT_OPERATOR","->",316],["T_STRING","_helper",316],["T_OBJECT_OPERATOR","->",316],["T_STRING","getStorageRoot",316],"(",")",",",["T_WHITESPACE"," ",316],["T_CONSTANT_ENCAPSED_STRING","'\/'",316],")",";",["T_WHITESPACE","\n        ",316],["T_VARIABLE","$pathCmp",317],["T_WHITESPACE"," ",317],"=",["T_WHITESPACE"," ",317],["T_STRING","rtrim",317],"(",["T_VARIABLE","$path",317],",",["T_WHITESPACE"," ",317],["T_CONSTANT_ENCAPSED_STRING","'\/'",317],")",";",["T_WHITESPACE","\n\n        ",317],["T_IF","if",319],["T_WHITESPACE"," ",319],"(",["T_VARIABLE","$rootCmp",319],["T_WHITESPACE"," ",319],["T_IS_EQUAL","==",319],["T_WHITESPACE"," ",319],["T_VARIABLE","$pathCmp",319],")",["T_WHITESPACE"," ",319],"{",["T_WHITESPACE","\n            ",319],["T_THROW","throw",320],["T_WHITESPACE"," ",320],["T_NEW","new",320],["T_WHITESPACE"," ",320],["T_NS_SEPARATOR","\\",320],["T_STRING","Magento",320],["T_NS_SEPARATOR","\\",320],["T_STRING","Framework",320],["T_NS_SEPARATOR","\\",320],["T_STRING","Exception",320],["T_NS_SEPARATOR","\\",320],["T_STRING","LocalizedException",320],"(",["T_WHITESPACE","\n                ",320],["T_STRING","__",321],"(",["T_CONSTANT_ENCAPSED_STRING","'We can\\'t delete root directory %1 right now.'",321],",",["T_WHITESPACE"," ",321],["T_VARIABLE","$path",321],")",["T_WHITESPACE","\n            ",321],")",";",["T_WHITESPACE","\n        ",322],"}",["T_WHITESPACE","\n\n        ",323],["T_RETURN","return",325],["T_WHITESPACE"," ",325],["T_VARIABLE","$this",325],["T_OBJECT_OPERATOR","->",325],["T_STRING","mediaWriteDirectory",325],["T_OBJECT_OPERATOR","->",325],["T_STRING","delete",325],"(",["T_VARIABLE","$path",325],")",";",["T_WHITESPACE","\n    ",325],"}",["T_WHITESPACE","\n",326],"}",["T_WHITESPACE","\n",327]]
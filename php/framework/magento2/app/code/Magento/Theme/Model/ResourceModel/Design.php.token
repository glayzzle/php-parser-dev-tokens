[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Copyright \u00c2\u00a9 2013-2017 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n *\/",2],["T_WHITESPACE","\n",5],["T_COMMENT","\/\/ @codingStandardsIgnoreFile\n",6],["T_NAMESPACE","namespace",7],["T_WHITESPACE"," ",7],["T_STRING","Magento",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Theme",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Model",7],["T_NS_SEPARATOR","\\",7],["T_STRING","ResourceModel",7],";",["T_WHITESPACE","\n\n",7],["T_USE","use",9],["T_WHITESPACE"," ",9],["T_STRING","Magento",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Framework",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Stdlib",9],["T_NS_SEPARATOR","\\",9],["T_STRING","DateTime",9],";",["T_WHITESPACE","\n\n",9],["T_DOC_COMMENT","\/**\n * Core Design Resource Model\n *\n * @author      Magento Core Team <core@magentocommerce.com>\n *\/",11],["T_WHITESPACE","\n",15],["T_CLASS","class",16],["T_WHITESPACE"," ",16],["T_STRING","Design",16],["T_WHITESPACE"," ",16],["T_EXTENDS","extends",16],["T_WHITESPACE"," ",16],["T_NS_SEPARATOR","\\",16],["T_STRING","Magento",16],["T_NS_SEPARATOR","\\",16],["T_STRING","Framework",16],["T_NS_SEPARATOR","\\",16],["T_STRING","Model",16],["T_NS_SEPARATOR","\\",16],["T_STRING","ResourceModel",16],["T_NS_SEPARATOR","\\",16],["T_STRING","Db",16],["T_NS_SEPARATOR","\\",16],["T_STRING","AbstractDb",16],["T_WHITESPACE","\n",16],"{",["T_WHITESPACE","\n    ",17],["T_DOC_COMMENT","\/**\n     * @var DateTime\n     *\/",18],["T_WHITESPACE","\n    ",20],["T_PROTECTED","protected",21],["T_WHITESPACE"," ",21],["T_VARIABLE","$dateTime",21],";",["T_WHITESPACE","\n\n    ",21],["T_DOC_COMMENT","\/**\n     * @param \\Magento\\Framework\\Model\\ResourceModel\\Db\\Context $context\n     * @param DateTime $dateTime\n     * @param string $connectionName\n     *\/",23],["T_WHITESPACE","\n    ",27],["T_PUBLIC","public",28],["T_WHITESPACE"," ",28],["T_FUNCTION","function",28],["T_WHITESPACE"," ",28],["T_STRING","__construct",28],"(",["T_WHITESPACE","\n        ",28],["T_NS_SEPARATOR","\\",29],["T_STRING","Magento",29],["T_NS_SEPARATOR","\\",29],["T_STRING","Framework",29],["T_NS_SEPARATOR","\\",29],["T_STRING","Model",29],["T_NS_SEPARATOR","\\",29],["T_STRING","ResourceModel",29],["T_NS_SEPARATOR","\\",29],["T_STRING","Db",29],["T_NS_SEPARATOR","\\",29],["T_STRING","Context",29],["T_WHITESPACE"," ",29],["T_VARIABLE","$context",29],",",["T_WHITESPACE","\n        ",29],["T_STRING","DateTime",30],["T_WHITESPACE"," ",30],["T_VARIABLE","$dateTime",30],",",["T_WHITESPACE","\n        ",30],["T_VARIABLE","$connectionName",31],["T_WHITESPACE"," ",31],"=",["T_WHITESPACE"," ",31],["T_STRING","null",31],["T_WHITESPACE","\n    ",31],")",["T_WHITESPACE"," ",32],"{",["T_WHITESPACE","\n        ",32],["T_VARIABLE","$this",33],["T_OBJECT_OPERATOR","->",33],["T_STRING","dateTime",33],["T_WHITESPACE"," ",33],"=",["T_WHITESPACE"," ",33],["T_VARIABLE","$dateTime",33],";",["T_WHITESPACE","\n        ",33],["T_STRING","parent",34],["T_DOUBLE_COLON","::",34],["T_STRING","__construct",34],"(",["T_VARIABLE","$context",34],",",["T_WHITESPACE"," ",34],["T_VARIABLE","$connectionName",34],")",";",["T_WHITESPACE","\n    ",34],"}",["T_WHITESPACE","\n\n    ",35],["T_DOC_COMMENT","\/**\n     * Define main table and primary key\n     *\n     * @return void\n     *\/",37],["T_WHITESPACE","\n    ",41],["T_PROTECTED","protected",42],["T_WHITESPACE"," ",42],["T_FUNCTION","function",42],["T_WHITESPACE"," ",42],["T_STRING","_construct",42],"(",")",["T_WHITESPACE","\n    ",42],"{",["T_WHITESPACE","\n        ",43],["T_VARIABLE","$this",44],["T_OBJECT_OPERATOR","->",44],["T_STRING","_init",44],"(",["T_CONSTANT_ENCAPSED_STRING","'design_change'",44],",",["T_WHITESPACE"," ",44],["T_CONSTANT_ENCAPSED_STRING","'design_change_id'",44],")",";",["T_WHITESPACE","\n    ",44],"}",["T_WHITESPACE","\n\n    ",45],["T_DOC_COMMENT","\/**\n     * Perform actions before object save\n     *\n     * @param \\Magento\\Framework\\Model\\AbstractModel $object\n     * @return $this\n     * @throws \\Magento\\Framework\\Exception\\LocalizedException\n     *\/",47],["T_WHITESPACE","\n    ",53],["T_PUBLIC","public",54],["T_WHITESPACE"," ",54],["T_FUNCTION","function",54],["T_WHITESPACE"," ",54],["T_STRING","_beforeSave",54],"(",["T_NS_SEPARATOR","\\",54],["T_STRING","Magento",54],["T_NS_SEPARATOR","\\",54],["T_STRING","Framework",54],["T_NS_SEPARATOR","\\",54],["T_STRING","Model",54],["T_NS_SEPARATOR","\\",54],["T_STRING","AbstractModel",54],["T_WHITESPACE"," ",54],["T_VARIABLE","$object",54],")",["T_WHITESPACE","\n    ",54],"{",["T_WHITESPACE","\n        ",55],["T_IF","if",56],["T_WHITESPACE"," ",56],"(",["T_VARIABLE","$date",56],["T_WHITESPACE"," ",56],"=",["T_WHITESPACE"," ",56],["T_VARIABLE","$object",56],["T_OBJECT_OPERATOR","->",56],["T_STRING","getDateFrom",56],"(",")",")",["T_WHITESPACE"," ",56],"{",["T_WHITESPACE","\n            ",56],["T_VARIABLE","$object",57],["T_OBJECT_OPERATOR","->",57],["T_STRING","setDateFrom",57],"(",["T_VARIABLE","$this",57],["T_OBJECT_OPERATOR","->",57],["T_STRING","dateTime",57],["T_OBJECT_OPERATOR","->",57],["T_STRING","formatDate",57],"(",["T_VARIABLE","$date",57],")",")",";",["T_WHITESPACE","\n        ",57],"}",["T_WHITESPACE"," ",58],["T_ELSE","else",58],["T_WHITESPACE"," ",58],"{",["T_WHITESPACE","\n            ",58],["T_VARIABLE","$object",59],["T_OBJECT_OPERATOR","->",59],["T_STRING","setDateFrom",59],"(",["T_STRING","null",59],")",";",["T_WHITESPACE","\n        ",59],"}",["T_WHITESPACE","\n\n        ",60],["T_IF","if",62],["T_WHITESPACE"," ",62],"(",["T_VARIABLE","$date",62],["T_WHITESPACE"," ",62],"=",["T_WHITESPACE"," ",62],["T_VARIABLE","$object",62],["T_OBJECT_OPERATOR","->",62],["T_STRING","getDateTo",62],"(",")",")",["T_WHITESPACE"," ",62],"{",["T_WHITESPACE","\n            ",62],["T_VARIABLE","$object",63],["T_OBJECT_OPERATOR","->",63],["T_STRING","setDateTo",63],"(",["T_VARIABLE","$this",63],["T_OBJECT_OPERATOR","->",63],["T_STRING","dateTime",63],["T_OBJECT_OPERATOR","->",63],["T_STRING","formatDate",63],"(",["T_VARIABLE","$date",63],")",")",";",["T_WHITESPACE","\n        ",63],"}",["T_WHITESPACE"," ",64],["T_ELSE","else",64],["T_WHITESPACE"," ",64],"{",["T_WHITESPACE","\n            ",64],["T_VARIABLE","$object",65],["T_OBJECT_OPERATOR","->",65],["T_STRING","setDateTo",65],"(",["T_STRING","null",65],")",";",["T_WHITESPACE","\n        ",65],"}",["T_WHITESPACE","\n\n        ",66],["T_IF","if",68],["T_WHITESPACE"," ",68],"(","!",["T_STRING","is_null",68],"(",["T_VARIABLE","$object",68],["T_OBJECT_OPERATOR","->",68],["T_STRING","getDateFrom",68],"(",")",")",["T_WHITESPACE","\n            ",68],["T_BOOLEAN_AND","&&",69],["T_WHITESPACE"," ",69],"!",["T_STRING","is_null",69],"(",["T_VARIABLE","$object",69],["T_OBJECT_OPERATOR","->",69],["T_STRING","getDateTo",69],"(",")",")",["T_WHITESPACE","\n            ",69],["T_BOOLEAN_AND","&&",70],["T_WHITESPACE"," ",70],"(",["T_NEW","new",70],["T_WHITESPACE"," ",70],["T_NS_SEPARATOR","\\",70],["T_STRING","DateTime",70],"(",["T_VARIABLE","$object",70],["T_OBJECT_OPERATOR","->",70],["T_STRING","getDateFrom",70],"(",")",")",")",["T_OBJECT_OPERATOR","->",70],["T_STRING","getTimestamp",70],"(",")",["T_WHITESPACE","\n            ",70],">",["T_WHITESPACE"," ",71],"(",["T_NEW","new",71],["T_WHITESPACE"," ",71],["T_NS_SEPARATOR","\\",71],["T_STRING","DateTime",71],"(",["T_VARIABLE","$object",71],["T_OBJECT_OPERATOR","->",71],["T_STRING","getDateTo",71],"(",")",")",")",["T_OBJECT_OPERATOR","->",71],["T_STRING","getTimestamp",71],"(",")",["T_WHITESPACE","\n        ",71],")",["T_WHITESPACE"," ",72],"{",["T_WHITESPACE","\n            ",72],["T_THROW","throw",73],["T_WHITESPACE"," ",73],["T_NEW","new",73],["T_WHITESPACE"," ",73],["T_NS_SEPARATOR","\\",73],["T_STRING","Magento",73],["T_NS_SEPARATOR","\\",73],["T_STRING","Framework",73],["T_NS_SEPARATOR","\\",73],["T_STRING","Exception",73],["T_NS_SEPARATOR","\\",73],["T_STRING","LocalizedException",73],"(",["T_WHITESPACE","\n                ",73],["T_STRING","__",74],"(",["T_CONSTANT_ENCAPSED_STRING","'The start date can\\'t follow the end date.'",74],")",["T_WHITESPACE","\n            ",74],")",";",["T_WHITESPACE","\n        ",75],"}",["T_WHITESPACE","\n\n        ",76],["T_VARIABLE","$check",78],["T_WHITESPACE"," ",78],"=",["T_WHITESPACE"," ",78],["T_VARIABLE","$this",78],["T_OBJECT_OPERATOR","->",78],["T_STRING","_checkIntersection",78],"(",["T_WHITESPACE","\n            ",78],["T_VARIABLE","$object",79],["T_OBJECT_OPERATOR","->",79],["T_STRING","getStoreId",79],"(",")",",",["T_WHITESPACE","\n            ",79],["T_VARIABLE","$object",80],["T_OBJECT_OPERATOR","->",80],["T_STRING","getDateFrom",80],"(",")",",",["T_WHITESPACE","\n            ",80],["T_VARIABLE","$object",81],["T_OBJECT_OPERATOR","->",81],["T_STRING","getDateTo",81],"(",")",",",["T_WHITESPACE","\n            ",81],["T_VARIABLE","$object",82],["T_OBJECT_OPERATOR","->",82],["T_STRING","getId",82],"(",")",["T_WHITESPACE","\n        ",82],")",";",["T_WHITESPACE","\n\n        ",83],["T_IF","if",85],["T_WHITESPACE"," ",85],"(",["T_VARIABLE","$check",85],")",["T_WHITESPACE"," ",85],"{",["T_WHITESPACE","\n            ",85],["T_THROW","throw",86],["T_WHITESPACE"," ",86],["T_NEW","new",86],["T_WHITESPACE"," ",86],["T_NS_SEPARATOR","\\",86],["T_STRING","Magento",86],["T_NS_SEPARATOR","\\",86],["T_STRING","Framework",86],["T_NS_SEPARATOR","\\",86],["T_STRING","Exception",86],["T_NS_SEPARATOR","\\",86],["T_STRING","LocalizedException",86],"(",["T_WHITESPACE","\n                ",86],["T_STRING","__",87],"(",["T_CONSTANT_ENCAPSED_STRING","'The date range for this design change overlaps another design change for the specified store.'",87],")",["T_WHITESPACE","\n            ",87],")",";",["T_WHITESPACE","\n        ",88],"}",["T_WHITESPACE","\n\n        ",89],["T_IF","if",91],["T_WHITESPACE"," ",91],"(",["T_VARIABLE","$object",91],["T_OBJECT_OPERATOR","->",91],["T_STRING","getDateFrom",91],"(",")",["T_WHITESPACE"," ",91],["T_IS_IDENTICAL","===",91],["T_WHITESPACE"," ",91],["T_STRING","null",91],")",["T_WHITESPACE"," ",91],"{",["T_WHITESPACE","\n            ",91],["T_VARIABLE","$object",92],["T_OBJECT_OPERATOR","->",92],["T_STRING","setDateFrom",92],"(",["T_NEW","new",92],["T_WHITESPACE"," ",92],["T_NS_SEPARATOR","\\",92],["T_STRING","Zend_Db_Expr",92],"(",["T_CONSTANT_ENCAPSED_STRING","'null'",92],")",")",";",["T_WHITESPACE","\n        ",92],"}",["T_WHITESPACE","\n        ",93],["T_IF","if",94],["T_WHITESPACE"," ",94],"(",["T_VARIABLE","$object",94],["T_OBJECT_OPERATOR","->",94],["T_STRING","getDateTo",94],"(",")",["T_WHITESPACE"," ",94],["T_IS_IDENTICAL","===",94],["T_WHITESPACE"," ",94],["T_STRING","null",94],")",["T_WHITESPACE"," ",94],"{",["T_WHITESPACE","\n            ",94],["T_VARIABLE","$object",95],["T_OBJECT_OPERATOR","->",95],["T_STRING","setDateTo",95],"(",["T_NEW","new",95],["T_WHITESPACE"," ",95],["T_NS_SEPARATOR","\\",95],["T_STRING","Zend_Db_Expr",95],"(",["T_CONSTANT_ENCAPSED_STRING","'null'",95],")",")",";",["T_WHITESPACE","\n        ",95],"}",["T_WHITESPACE","\n\n        ",96],["T_STRING","parent",98],["T_DOUBLE_COLON","::",98],["T_STRING","_beforeSave",98],"(",["T_VARIABLE","$object",98],")",";",["T_WHITESPACE","\n    ",98],"}",["T_WHITESPACE","\n\n    ",99],["T_DOC_COMMENT","\/**\n     * Check intersections\n     *\n     * @param int $storeId\n     * @param string $dateFrom\n     * @param string $dateTo\n     * @param int $currentId\n     * @return string\n     *\n     * @SuppressWarnings(PHPMD.CyclomaticComplexity)\n     * @SuppressWarnings(PHPMD.NPathComplexity)\n     *\/",101],["T_WHITESPACE","\n    ",112],["T_PROTECTED","protected",113],["T_WHITESPACE"," ",113],["T_FUNCTION","function",113],["T_WHITESPACE"," ",113],["T_STRING","_checkIntersection",113],"(",["T_VARIABLE","$storeId",113],",",["T_WHITESPACE"," ",113],["T_VARIABLE","$dateFrom",113],",",["T_WHITESPACE"," ",113],["T_VARIABLE","$dateTo",113],",",["T_WHITESPACE"," ",113],["T_VARIABLE","$currentId",113],")",["T_WHITESPACE","\n    ",113],"{",["T_WHITESPACE","\n        ",114],["T_VARIABLE","$connection",115],["T_WHITESPACE"," ",115],"=",["T_WHITESPACE"," ",115],["T_VARIABLE","$this",115],["T_OBJECT_OPERATOR","->",115],["T_STRING","getConnection",115],"(",")",";",["T_WHITESPACE","\n        ",115],["T_VARIABLE","$select",116],["T_WHITESPACE"," ",116],"=",["T_WHITESPACE"," ",116],["T_VARIABLE","$connection",116],["T_OBJECT_OPERATOR","->",116],["T_STRING","select",116],"(",")",["T_OBJECT_OPERATOR","->",116],["T_STRING","from",116],"(",["T_WHITESPACE","\n            ",116],"[",["T_CONSTANT_ENCAPSED_STRING","'main_table'",117],["T_WHITESPACE"," ",117],["T_DOUBLE_ARROW","=>",117],["T_WHITESPACE"," ",117],["T_VARIABLE","$this",117],["T_OBJECT_OPERATOR","->",117],["T_STRING","getTable",117],"(",["T_CONSTANT_ENCAPSED_STRING","'design_change'",117],")","]",["T_WHITESPACE","\n        ",117],")",["T_OBJECT_OPERATOR","->",118],["T_STRING","where",118],"(",["T_WHITESPACE","\n            ",118],["T_CONSTANT_ENCAPSED_STRING","'main_table.store_id = :store_id'",119],["T_WHITESPACE","\n        ",119],")",["T_OBJECT_OPERATOR","->",120],["T_STRING","where",120],"(",["T_WHITESPACE","\n            ",120],["T_CONSTANT_ENCAPSED_STRING","'main_table.design_change_id <> :current_id'",121],["T_WHITESPACE","\n        ",121],")",";",["T_WHITESPACE","\n\n        ",122],["T_VARIABLE","$dateConditions",124],["T_WHITESPACE"," ",124],"=",["T_WHITESPACE"," ",124],"[",["T_CONSTANT_ENCAPSED_STRING","'date_to IS NULL AND date_from IS NULL'",124],"]",";",["T_WHITESPACE","\n\n        ",124],["T_IF","if",126],["T_WHITESPACE"," ",126],"(","!",["T_STRING","is_null",126],"(",["T_VARIABLE","$dateFrom",126],")",")",["T_WHITESPACE"," ",126],"{",["T_WHITESPACE","\n            ",126],["T_VARIABLE","$dateConditions",127],"[","]",["T_WHITESPACE"," ",127],"=",["T_WHITESPACE"," ",127],["T_CONSTANT_ENCAPSED_STRING","':date_from BETWEEN date_from AND date_to'",127],";",["T_WHITESPACE","\n            ",127],["T_VARIABLE","$dateConditions",128],"[","]",["T_WHITESPACE"," ",128],"=",["T_WHITESPACE"," ",128],["T_CONSTANT_ENCAPSED_STRING","':date_from >= date_from and date_to IS NULL'",128],";",["T_WHITESPACE","\n            ",128],["T_VARIABLE","$dateConditions",129],"[","]",["T_WHITESPACE"," ",129],"=",["T_WHITESPACE"," ",129],["T_CONSTANT_ENCAPSED_STRING","':date_from <= date_to and date_from IS NULL'",129],";",["T_WHITESPACE","\n        ",129],"}",["T_WHITESPACE"," ",130],["T_ELSE","else",130],["T_WHITESPACE"," ",130],"{",["T_WHITESPACE","\n            ",130],["T_VARIABLE","$dateConditions",131],"[","]",["T_WHITESPACE"," ",131],"=",["T_WHITESPACE"," ",131],["T_CONSTANT_ENCAPSED_STRING","'date_from IS NULL'",131],";",["T_WHITESPACE","\n        ",131],"}",["T_WHITESPACE","\n\n        ",132],["T_IF","if",134],["T_WHITESPACE"," ",134],"(","!",["T_STRING","is_null",134],"(",["T_VARIABLE","$dateTo",134],")",")",["T_WHITESPACE"," ",134],"{",["T_WHITESPACE","\n            ",134],["T_VARIABLE","$dateConditions",135],"[","]",["T_WHITESPACE"," ",135],"=",["T_WHITESPACE"," ",135],["T_CONSTANT_ENCAPSED_STRING","':date_to BETWEEN date_from AND date_to'",135],";",["T_WHITESPACE","\n            ",135],["T_VARIABLE","$dateConditions",136],"[","]",["T_WHITESPACE"," ",136],"=",["T_WHITESPACE"," ",136],["T_CONSTANT_ENCAPSED_STRING","':date_to >= date_from AND date_to IS NULL'",136],";",["T_WHITESPACE","\n            ",136],["T_VARIABLE","$dateConditions",137],"[","]",["T_WHITESPACE"," ",137],"=",["T_WHITESPACE"," ",137],["T_CONSTANT_ENCAPSED_STRING","':date_to <= date_to AND date_from IS NULL'",137],";",["T_WHITESPACE","\n        ",137],"}",["T_WHITESPACE"," ",138],["T_ELSE","else",138],["T_WHITESPACE"," ",138],"{",["T_WHITESPACE","\n            ",138],["T_VARIABLE","$dateConditions",139],"[","]",["T_WHITESPACE"," ",139],"=",["T_WHITESPACE"," ",139],["T_CONSTANT_ENCAPSED_STRING","'date_to IS NULL'",139],";",["T_WHITESPACE","\n        ",139],"}",["T_WHITESPACE","\n\n        ",140],["T_IF","if",142],["T_WHITESPACE"," ",142],"(",["T_STRING","is_null",142],"(",["T_VARIABLE","$dateFrom",142],")",["T_WHITESPACE"," ",142],["T_BOOLEAN_AND","&&",142],["T_WHITESPACE"," ",142],"!",["T_STRING","is_null",142],"(",["T_VARIABLE","$dateTo",142],")",")",["T_WHITESPACE"," ",142],"{",["T_WHITESPACE","\n            ",142],["T_VARIABLE","$dateConditions",143],"[","]",["T_WHITESPACE"," ",143],"=",["T_WHITESPACE"," ",143],["T_CONSTANT_ENCAPSED_STRING","'date_to <= :date_to OR date_from <= :date_to'",143],";",["T_WHITESPACE","\n        ",143],"}",["T_WHITESPACE","\n\n        ",144],["T_IF","if",146],["T_WHITESPACE"," ",146],"(","!",["T_STRING","is_null",146],"(",["T_VARIABLE","$dateFrom",146],")",["T_WHITESPACE"," ",146],["T_BOOLEAN_AND","&&",146],["T_WHITESPACE"," ",146],["T_STRING","is_null",146],"(",["T_VARIABLE","$dateTo",146],")",")",["T_WHITESPACE"," ",146],"{",["T_WHITESPACE","\n            ",146],["T_VARIABLE","$dateConditions",147],"[","]",["T_WHITESPACE"," ",147],"=",["T_WHITESPACE"," ",147],["T_CONSTANT_ENCAPSED_STRING","'date_to >= :date_from OR date_from >= :date_from'",147],";",["T_WHITESPACE","\n        ",147],"}",["T_WHITESPACE","\n\n        ",148],["T_IF","if",150],["T_WHITESPACE"," ",150],"(","!",["T_STRING","is_null",150],"(",["T_VARIABLE","$dateFrom",150],")",["T_WHITESPACE"," ",150],["T_BOOLEAN_AND","&&",150],["T_WHITESPACE"," ",150],"!",["T_STRING","is_null",150],"(",["T_VARIABLE","$dateTo",150],")",")",["T_WHITESPACE"," ",150],"{",["T_WHITESPACE","\n            ",150],["T_VARIABLE","$dateConditions",151],"[","]",["T_WHITESPACE"," ",151],"=",["T_WHITESPACE"," ",151],["T_CONSTANT_ENCAPSED_STRING","'date_from BETWEEN :date_from AND :date_to'",151],";",["T_WHITESPACE","\n            ",151],["T_VARIABLE","$dateConditions",152],"[","]",["T_WHITESPACE"," ",152],"=",["T_WHITESPACE"," ",152],["T_CONSTANT_ENCAPSED_STRING","'date_to BETWEEN :date_from AND :date_to'",152],";",["T_WHITESPACE","\n        ",152],"}",["T_WHITESPACE"," ",153],["T_ELSEIF","elseif",153],["T_WHITESPACE"," ",153],"(",["T_STRING","is_null",153],"(",["T_VARIABLE","$dateFrom",153],")",["T_WHITESPACE"," ",153],["T_BOOLEAN_AND","&&",153],["T_WHITESPACE"," ",153],["T_STRING","is_null",153],"(",["T_VARIABLE","$dateTo",153],")",")",["T_WHITESPACE"," ",153],"{",["T_WHITESPACE","\n            ",153],["T_VARIABLE","$dateConditions",154],["T_WHITESPACE"," ",154],"=",["T_WHITESPACE"," ",154],"[","]",";",["T_WHITESPACE","\n        ",154],"}",["T_WHITESPACE","\n\n        ",155],["T_VARIABLE","$condition",157],["T_WHITESPACE"," ",157],"=",["T_WHITESPACE"," ",157],["T_CONSTANT_ENCAPSED_STRING","''",157],";",["T_WHITESPACE","\n        ",157],["T_IF","if",158],["T_WHITESPACE"," ",158],"(","!",["T_EMPTY","empty",158],"(",["T_VARIABLE","$dateConditions",158],")",")",["T_WHITESPACE"," ",158],"{",["T_WHITESPACE","\n            ",158],["T_VARIABLE","$condition",159],["T_WHITESPACE"," ",159],"=",["T_WHITESPACE"," ",159],["T_CONSTANT_ENCAPSED_STRING","'('",159],["T_WHITESPACE"," ",159],".",["T_WHITESPACE"," ",159],["T_STRING","implode",159],"(",["T_CONSTANT_ENCAPSED_STRING","') OR ('",159],",",["T_WHITESPACE"," ",159],["T_VARIABLE","$dateConditions",159],")",["T_WHITESPACE"," ",159],".",["T_WHITESPACE"," ",159],["T_CONSTANT_ENCAPSED_STRING","')'",159],";",["T_WHITESPACE","\n            ",159],["T_VARIABLE","$select",160],["T_OBJECT_OPERATOR","->",160],["T_STRING","where",160],"(",["T_VARIABLE","$condition",160],")",";",["T_WHITESPACE","\n        ",160],"}",["T_WHITESPACE","\n\n        ",161],["T_VARIABLE","$bind",163],["T_WHITESPACE"," ",163],"=",["T_WHITESPACE"," ",163],"[",["T_CONSTANT_ENCAPSED_STRING","'store_id'",163],["T_WHITESPACE"," ",163],["T_DOUBLE_ARROW","=>",163],["T_WHITESPACE"," ",163],["T_INT_CAST","(int)",163],["T_VARIABLE","$storeId",163],",",["T_WHITESPACE"," ",163],["T_CONSTANT_ENCAPSED_STRING","'current_id'",163],["T_WHITESPACE"," ",163],["T_DOUBLE_ARROW","=>",163],["T_WHITESPACE"," ",163],["T_INT_CAST","(int)",163],["T_VARIABLE","$currentId",163],"]",";",["T_WHITESPACE","\n\n        ",163],["T_IF","if",165],["T_WHITESPACE"," ",165],"(","!",["T_STRING","is_null",165],"(",["T_VARIABLE","$dateTo",165],")",")",["T_WHITESPACE"," ",165],"{",["T_WHITESPACE","\n            ",165],["T_VARIABLE","$bind",166],"[",["T_CONSTANT_ENCAPSED_STRING","'date_to'",166],"]",["T_WHITESPACE"," ",166],"=",["T_WHITESPACE"," ",166],["T_VARIABLE","$dateTo",166],";",["T_WHITESPACE","\n        ",166],"}",["T_WHITESPACE","\n        ",167],["T_IF","if",168],["T_WHITESPACE"," ",168],"(","!",["T_STRING","is_null",168],"(",["T_VARIABLE","$dateFrom",168],")",")",["T_WHITESPACE"," ",168],"{",["T_WHITESPACE","\n            ",168],["T_VARIABLE","$bind",169],"[",["T_CONSTANT_ENCAPSED_STRING","'date_from'",169],"]",["T_WHITESPACE"," ",169],"=",["T_WHITESPACE"," ",169],["T_VARIABLE","$dateFrom",169],";",["T_WHITESPACE","\n        ",169],"}",["T_WHITESPACE","\n\n        ",170],["T_VARIABLE","$result",172],["T_WHITESPACE"," ",172],"=",["T_WHITESPACE"," ",172],["T_VARIABLE","$connection",172],["T_OBJECT_OPERATOR","->",172],["T_STRING","fetchOne",172],"(",["T_VARIABLE","$select",172],",",["T_WHITESPACE"," ",172],["T_VARIABLE","$bind",172],")",";",["T_WHITESPACE","\n        ",172],["T_RETURN","return",173],["T_WHITESPACE"," ",173],["T_VARIABLE","$result",173],";",["T_WHITESPACE","\n    ",173],"}",["T_WHITESPACE","\n\n    ",174],["T_DOC_COMMENT","\/**\n     * Load changes for specific store and date\n     *\n     * @param int $storeId\n     * @param string $date\n     * @return array\n     *\/",176],["T_WHITESPACE","\n    ",182],["T_PUBLIC","public",183],["T_WHITESPACE"," ",183],["T_FUNCTION","function",183],["T_WHITESPACE"," ",183],["T_STRING","loadChange",183],"(",["T_VARIABLE","$storeId",183],",",["T_WHITESPACE"," ",183],["T_VARIABLE","$date",183],")",["T_WHITESPACE","\n    ",183],"{",["T_WHITESPACE","\n        ",184],["T_VARIABLE","$select",185],["T_WHITESPACE"," ",185],"=",["T_WHITESPACE"," ",185],["T_VARIABLE","$this",185],["T_OBJECT_OPERATOR","->",185],["T_STRING","getConnection",185],"(",")",["T_OBJECT_OPERATOR","->",185],["T_STRING","select",185],"(",")",["T_OBJECT_OPERATOR","->",185],["T_STRING","from",185],"(",["T_WHITESPACE","\n            ",185],"[",["T_CONSTANT_ENCAPSED_STRING","'main_table'",186],["T_WHITESPACE"," ",186],["T_DOUBLE_ARROW","=>",186],["T_WHITESPACE"," ",186],["T_VARIABLE","$this",186],["T_OBJECT_OPERATOR","->",186],["T_STRING","getTable",186],"(",["T_CONSTANT_ENCAPSED_STRING","'design_change'",186],")","]",["T_WHITESPACE","\n        ",186],")",["T_OBJECT_OPERATOR","->",187],["T_STRING","where",187],"(",["T_WHITESPACE","\n            ",187],["T_CONSTANT_ENCAPSED_STRING","'store_id = :store_id'",188],["T_WHITESPACE","\n        ",188],")",["T_OBJECT_OPERATOR","->",189],["T_STRING","where",189],"(",["T_WHITESPACE","\n            ",189],["T_CONSTANT_ENCAPSED_STRING","'date_from <= :required_date or date_from IS NULL'",190],["T_WHITESPACE","\n        ",190],")",["T_OBJECT_OPERATOR","->",191],["T_STRING","where",191],"(",["T_WHITESPACE","\n            ",191],["T_CONSTANT_ENCAPSED_STRING","'date_to >= :required_date or date_to IS NULL'",192],["T_WHITESPACE","\n        ",192],")",";",["T_WHITESPACE","\n\n        ",193],["T_VARIABLE","$bind",195],["T_WHITESPACE"," ",195],"=",["T_WHITESPACE"," ",195],"[",["T_CONSTANT_ENCAPSED_STRING","'store_id'",195],["T_WHITESPACE"," ",195],["T_DOUBLE_ARROW","=>",195],["T_WHITESPACE"," ",195],["T_INT_CAST","(int)",195],["T_VARIABLE","$storeId",195],",",["T_WHITESPACE"," ",195],["T_CONSTANT_ENCAPSED_STRING","'required_date'",195],["T_WHITESPACE"," ",195],["T_DOUBLE_ARROW","=>",195],["T_WHITESPACE"," ",195],["T_VARIABLE","$date",195],"]",";",["T_WHITESPACE","\n\n        ",195],["T_RETURN","return",197],["T_WHITESPACE"," ",197],["T_VARIABLE","$this",197],["T_OBJECT_OPERATOR","->",197],["T_STRING","getConnection",197],"(",")",["T_OBJECT_OPERATOR","->",197],["T_STRING","fetchRow",197],"(",["T_VARIABLE","$select",197],",",["T_WHITESPACE"," ",197],["T_VARIABLE","$bind",197],")",";",["T_WHITESPACE","\n    ",197],"}",["T_WHITESPACE","\n",198],"}",["T_WHITESPACE","\n",199]]
[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Copyright \u00c2\u00a9 2013-2017 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n *\/",2],["T_WHITESPACE","\n",5],["T_NAMESPACE","namespace",6],["T_WHITESPACE"," ",6],["T_STRING","Magento",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Vault",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Model",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Ui",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Adminhtml",6],";",["T_WHITESPACE","\n\n",6],["T_USE","use",8],["T_WHITESPACE"," ",8],["T_STRING","Magento",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Framework",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Api",8],["T_NS_SEPARATOR","\\",8],["T_STRING","FilterBuilder",8],";",["T_WHITESPACE","\n",8],["T_USE","use",9],["T_WHITESPACE"," ",9],["T_STRING","Magento",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Framework",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Api",9],["T_NS_SEPARATOR","\\",9],["T_STRING","SearchCriteriaBuilder",9],";",["T_WHITESPACE","\n",9],["T_USE","use",10],["T_WHITESPACE"," ",10],["T_STRING","Magento",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Framework",10],["T_NS_SEPARATOR","\\",10],["T_STRING","App",10],["T_NS_SEPARATOR","\\",10],["T_STRING","ObjectManager",10],";",["T_WHITESPACE","\n",10],["T_USE","use",11],["T_WHITESPACE"," ",11],["T_STRING","Magento",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Framework",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Exception",11],["T_NS_SEPARATOR","\\",11],["T_STRING","InputException",11],";",["T_WHITESPACE","\n",11],["T_USE","use",12],["T_WHITESPACE"," ",12],["T_STRING","Magento",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Framework",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Exception",12],["T_NS_SEPARATOR","\\",12],["T_STRING","NoSuchEntityException",12],";",["T_WHITESPACE","\n",12],["T_USE","use",13],["T_WHITESPACE"," ",13],["T_STRING","Magento",13],["T_NS_SEPARATOR","\\",13],["T_STRING","Framework",13],["T_NS_SEPARATOR","\\",13],["T_STRING","Intl",13],["T_NS_SEPARATOR","\\",13],["T_STRING","DateTimeFactory",13],";",["T_WHITESPACE","\n",13],["T_USE","use",14],["T_WHITESPACE"," ",14],["T_STRING","Magento",14],["T_NS_SEPARATOR","\\",14],["T_STRING","Framework",14],["T_NS_SEPARATOR","\\",14],["T_STRING","Session",14],["T_NS_SEPARATOR","\\",14],["T_STRING","SessionManagerInterface",14],";",["T_WHITESPACE","\n",14],["T_USE","use",15],["T_WHITESPACE"," ",15],["T_STRING","Magento",15],["T_NS_SEPARATOR","\\",15],["T_STRING","Payment",15],["T_NS_SEPARATOR","\\",15],["T_STRING","Helper",15],["T_NS_SEPARATOR","\\",15],["T_STRING","Data",15],";",["T_WHITESPACE","\n",15],["T_USE","use",16],["T_WHITESPACE"," ",16],["T_STRING","Magento",16],["T_NS_SEPARATOR","\\",16],["T_STRING","Sales",16],["T_NS_SEPARATOR","\\",16],["T_STRING","Api",16],["T_NS_SEPARATOR","\\",16],["T_STRING","OrderRepositoryInterface",16],";",["T_WHITESPACE","\n",16],["T_USE","use",17],["T_WHITESPACE"," ",17],["T_STRING","Magento",17],["T_NS_SEPARATOR","\\",17],["T_STRING","Store",17],["T_NS_SEPARATOR","\\",17],["T_STRING","Model",17],["T_NS_SEPARATOR","\\",17],["T_STRING","StoreManagerInterface",17],";",["T_WHITESPACE","\n",17],["T_USE","use",18],["T_WHITESPACE"," ",18],["T_STRING","Magento",18],["T_NS_SEPARATOR","\\",18],["T_STRING","Vault",18],["T_NS_SEPARATOR","\\",18],["T_STRING","Api",18],["T_NS_SEPARATOR","\\",18],["T_STRING","Data",18],["T_NS_SEPARATOR","\\",18],["T_STRING","PaymentTokenInterface",18],";",["T_WHITESPACE","\n",18],["T_USE","use",19],["T_WHITESPACE"," ",19],["T_STRING","Magento",19],["T_NS_SEPARATOR","\\",19],["T_STRING","Vault",19],["T_NS_SEPARATOR","\\",19],["T_STRING","Api",19],["T_NS_SEPARATOR","\\",19],["T_STRING","PaymentTokenManagementInterface",19],";",["T_WHITESPACE","\n",19],["T_USE","use",20],["T_WHITESPACE"," ",20],["T_STRING","Magento",20],["T_NS_SEPARATOR","\\",20],["T_STRING","Vault",20],["T_NS_SEPARATOR","\\",20],["T_STRING","Api",20],["T_NS_SEPARATOR","\\",20],["T_STRING","PaymentTokenRepositoryInterface",20],";",["T_WHITESPACE","\n",20],["T_USE","use",21],["T_WHITESPACE"," ",21],["T_STRING","Magento",21],["T_NS_SEPARATOR","\\",21],["T_STRING","Vault",21],["T_NS_SEPARATOR","\\",21],["T_STRING","Model",21],["T_NS_SEPARATOR","\\",21],["T_STRING","Ui",21],["T_NS_SEPARATOR","\\",21],["T_STRING","TokenUiComponentInterface",21],";",["T_WHITESPACE","\n",21],["T_USE","use",22],["T_WHITESPACE"," ",22],["T_STRING","Magento",22],["T_NS_SEPARATOR","\\",22],["T_STRING","Vault",22],["T_NS_SEPARATOR","\\",22],["T_STRING","Model",22],["T_NS_SEPARATOR","\\",22],["T_STRING","Ui",22],["T_NS_SEPARATOR","\\",22],["T_STRING","TokenUiComponentProviderInterface",22],";",["T_WHITESPACE","\n",22],["T_USE","use",23],["T_WHITESPACE"," ",23],["T_STRING","Magento",23],["T_NS_SEPARATOR","\\",23],["T_STRING","Vault",23],["T_NS_SEPARATOR","\\",23],["T_STRING","Model",23],["T_NS_SEPARATOR","\\",23],["T_STRING","VaultPaymentInterface",23],";",["T_WHITESPACE","\n\n",23],["T_DOC_COMMENT","\/**\n * Class ConfigProvider\n * @api\n * @SuppressWarnings(PHPMD.CouplingBetweenObjects)\n *\/",25],["T_WHITESPACE","\n",29],["T_FINAL","final",30],["T_WHITESPACE"," ",30],["T_CLASS","class",30],["T_WHITESPACE"," ",30],["T_STRING","TokensConfigProvider",30],["T_WHITESPACE","\n",30],"{",["T_WHITESPACE","\n    ",31],["T_DOC_COMMENT","\/**\n     * @var PaymentTokenRepositoryInterface\n     *\/",32],["T_WHITESPACE","\n    ",34],["T_PRIVATE","private",35],["T_WHITESPACE"," ",35],["T_VARIABLE","$paymentTokenRepository",35],";",["T_WHITESPACE","\n\n    ",35],["T_DOC_COMMENT","\/**\n     * @var FilterBuilder\n     *\/",37],["T_WHITESPACE","\n    ",39],["T_PRIVATE","private",40],["T_WHITESPACE"," ",40],["T_VARIABLE","$filterBuilder",40],";",["T_WHITESPACE","\n\n    ",40],["T_DOC_COMMENT","\/**\n     * @var SearchCriteriaBuilder\n     *\/",42],["T_WHITESPACE","\n    ",44],["T_PRIVATE","private",45],["T_WHITESPACE"," ",45],["T_VARIABLE","$searchCriteriaBuilder",45],";",["T_WHITESPACE","\n\n    ",45],["T_DOC_COMMENT","\/**\n     * @var SessionManagerInterface\n     *\/",47],["T_WHITESPACE","\n    ",49],["T_PRIVATE","private",50],["T_WHITESPACE"," ",50],["T_VARIABLE","$session",50],";",["T_WHITESPACE","\n\n    ",50],["T_DOC_COMMENT","\/**\n     * @var StoreManagerInterface\n     *\/",52],["T_WHITESPACE","\n    ",54],["T_PRIVATE","private",55],["T_WHITESPACE"," ",55],["T_VARIABLE","$storeManager",55],";",["T_WHITESPACE","\n\n    ",55],["T_DOC_COMMENT","\/**\n     * @var TokenUiComponentProviderInterface[]\n     *\/",57],["T_WHITESPACE","\n    ",59],["T_PRIVATE","private",60],["T_WHITESPACE"," ",60],["T_VARIABLE","$tokenUiComponentProviders",60],";",["T_WHITESPACE","\n\n    ",60],["T_DOC_COMMENT","\/**\n     * @var DateTimeFactory\n     *\/",62],["T_WHITESPACE","\n    ",64],["T_PRIVATE","private",65],["T_WHITESPACE"," ",65],["T_VARIABLE","$dateTimeFactory",65],";",["T_WHITESPACE","\n\n    ",65],["T_DOC_COMMENT","\/**\n     * @var Data\n     *\/",67],["T_WHITESPACE","\n    ",69],["T_PRIVATE","private",70],["T_WHITESPACE"," ",70],["T_VARIABLE","$paymentDataHelper",70],";",["T_WHITESPACE","\n\n    ",70],["T_DOC_COMMENT","\/**\n     * @var OrderRepositoryInterface\n     *\/",72],["T_WHITESPACE","\n    ",74],["T_PRIVATE","private",75],["T_WHITESPACE"," ",75],["T_VARIABLE","$orderRepository",75],";",["T_WHITESPACE","\n\n    ",75],["T_DOC_COMMENT","\/**\n     * @var PaymentTokenManagementInterface\n     *\/",77],["T_WHITESPACE","\n    ",79],["T_PRIVATE","private",80],["T_WHITESPACE"," ",80],["T_VARIABLE","$paymentTokenManagement",80],";",["T_WHITESPACE","\n\n    ",80],["T_DOC_COMMENT","\/**\n     * Constructor\n     *\n     * @param SessionManagerInterface $session\n     * @param PaymentTokenRepositoryInterface $paymentTokenRepository\n     * @param FilterBuilder $filterBuilder\n     * @param SearchCriteriaBuilder $searchCriteriaBuilder\n     * @param StoreManagerInterface $storeManager\n     * @param DateTimeFactory $dateTimeFactory\n     * @param TokenUiComponentProviderInterface[] $tokenUiComponentProviders\n     *\/",82],["T_WHITESPACE","\n    ",92],["T_PUBLIC","public",93],["T_WHITESPACE"," ",93],["T_FUNCTION","function",93],["T_WHITESPACE"," ",93],["T_STRING","__construct",93],"(",["T_WHITESPACE","\n        ",93],["T_STRING","SessionManagerInterface",94],["T_WHITESPACE"," ",94],["T_VARIABLE","$session",94],",",["T_WHITESPACE","\n        ",94],["T_STRING","PaymentTokenRepositoryInterface",95],["T_WHITESPACE"," ",95],["T_VARIABLE","$paymentTokenRepository",95],",",["T_WHITESPACE","\n        ",95],["T_STRING","FilterBuilder",96],["T_WHITESPACE"," ",96],["T_VARIABLE","$filterBuilder",96],",",["T_WHITESPACE","\n        ",96],["T_STRING","SearchCriteriaBuilder",97],["T_WHITESPACE"," ",97],["T_VARIABLE","$searchCriteriaBuilder",97],",",["T_WHITESPACE","\n        ",97],["T_STRING","StoreManagerInterface",98],["T_WHITESPACE"," ",98],["T_VARIABLE","$storeManager",98],",",["T_WHITESPACE","\n        ",98],["T_STRING","DateTimeFactory",99],["T_WHITESPACE"," ",99],["T_VARIABLE","$dateTimeFactory",99],",",["T_WHITESPACE","\n        ",99],["T_ARRAY","array",100],["T_WHITESPACE"," ",100],["T_VARIABLE","$tokenUiComponentProviders",100],["T_WHITESPACE"," ",100],"=",["T_WHITESPACE"," ",100],"[","]",["T_WHITESPACE","\n    ",100],")",["T_WHITESPACE"," ",101],"{",["T_WHITESPACE","\n        ",101],["T_VARIABLE","$this",102],["T_OBJECT_OPERATOR","->",102],["T_STRING","paymentTokenRepository",102],["T_WHITESPACE"," ",102],"=",["T_WHITESPACE"," ",102],["T_VARIABLE","$paymentTokenRepository",102],";",["T_WHITESPACE","\n        ",102],["T_VARIABLE","$this",103],["T_OBJECT_OPERATOR","->",103],["T_STRING","filterBuilder",103],["T_WHITESPACE"," ",103],"=",["T_WHITESPACE"," ",103],["T_VARIABLE","$filterBuilder",103],";",["T_WHITESPACE","\n        ",103],["T_VARIABLE","$this",104],["T_OBJECT_OPERATOR","->",104],["T_STRING","searchCriteriaBuilder",104],["T_WHITESPACE"," ",104],"=",["T_WHITESPACE"," ",104],["T_VARIABLE","$searchCriteriaBuilder",104],";",["T_WHITESPACE","\n        ",104],["T_VARIABLE","$this",105],["T_OBJECT_OPERATOR","->",105],["T_STRING","session",105],["T_WHITESPACE"," ",105],"=",["T_WHITESPACE"," ",105],["T_VARIABLE","$session",105],";",["T_WHITESPACE","\n        ",105],["T_VARIABLE","$this",106],["T_OBJECT_OPERATOR","->",106],["T_STRING","storeManager",106],["T_WHITESPACE"," ",106],"=",["T_WHITESPACE"," ",106],["T_VARIABLE","$storeManager",106],";",["T_WHITESPACE","\n        ",106],["T_VARIABLE","$this",107],["T_OBJECT_OPERATOR","->",107],["T_STRING","tokenUiComponentProviders",107],["T_WHITESPACE"," ",107],"=",["T_WHITESPACE"," ",107],["T_VARIABLE","$tokenUiComponentProviders",107],";",["T_WHITESPACE","\n        ",107],["T_VARIABLE","$this",108],["T_OBJECT_OPERATOR","->",108],["T_STRING","dateTimeFactory",108],["T_WHITESPACE"," ",108],"=",["T_WHITESPACE"," ",108],["T_VARIABLE","$dateTimeFactory",108],";",["T_WHITESPACE","\n    ",108],"}",["T_WHITESPACE","\n\n    ",109],["T_DOC_COMMENT","\/**\n     * @param string $vaultPaymentCode\n     * @return TokenUiComponentInterface[]\n     *\/",111],["T_WHITESPACE","\n    ",114],["T_PUBLIC","public",115],["T_WHITESPACE"," ",115],["T_FUNCTION","function",115],["T_WHITESPACE"," ",115],["T_STRING","getTokensComponents",115],"(",["T_VARIABLE","$vaultPaymentCode",115],")",["T_WHITESPACE","\n    ",115],"{",["T_WHITESPACE","\n        ",116],["T_VARIABLE","$result",117],["T_WHITESPACE"," ",117],"=",["T_WHITESPACE"," ",117],"[","]",";",["T_WHITESPACE","\n\n        ",117],["T_VARIABLE","$customerId",119],["T_WHITESPACE"," ",119],"=",["T_WHITESPACE"," ",119],["T_VARIABLE","$this",119],["T_OBJECT_OPERATOR","->",119],["T_STRING","session",119],["T_OBJECT_OPERATOR","->",119],["T_STRING","getCustomerId",119],"(",")",";",["T_WHITESPACE","\n\n        ",119],["T_VARIABLE","$vaultPayment",121],["T_WHITESPACE"," ",121],"=",["T_WHITESPACE"," ",121],["T_VARIABLE","$this",121],["T_OBJECT_OPERATOR","->",121],["T_STRING","getVaultPayment",121],"(",["T_VARIABLE","$vaultPaymentCode",121],")",";",["T_WHITESPACE","\n        ",121],["T_IF","if",122],["T_WHITESPACE"," ",122],"(",["T_VARIABLE","$vaultPayment",122],["T_WHITESPACE"," ",122],["T_IS_IDENTICAL","===",122],["T_WHITESPACE"," ",122],["T_STRING","null",122],")",["T_WHITESPACE"," ",122],"{",["T_WHITESPACE","\n            ",122],["T_RETURN","return",123],["T_WHITESPACE"," ",123],["T_VARIABLE","$result",123],";",["T_WHITESPACE","\n        ",123],"}",["T_WHITESPACE","\n\n        ",124],["T_VARIABLE","$vaultProviderCode",126],["T_WHITESPACE"," ",126],"=",["T_WHITESPACE"," ",126],["T_VARIABLE","$vaultPayment",126],["T_OBJECT_OPERATOR","->",126],["T_STRING","getProviderCode",126],"(",")",";",["T_WHITESPACE","\n        ",126],["T_VARIABLE","$componentProvider",127],["T_WHITESPACE"," ",127],"=",["T_WHITESPACE"," ",127],["T_VARIABLE","$this",127],["T_OBJECT_OPERATOR","->",127],["T_STRING","getComponentProvider",127],"(",["T_VARIABLE","$vaultProviderCode",127],")",";",["T_WHITESPACE","\n        ",127],["T_IF","if",128],["T_WHITESPACE"," ",128],"(",["T_VARIABLE","$componentProvider",128],["T_WHITESPACE"," ",128],["T_IS_IDENTICAL","===",128],["T_WHITESPACE"," ",128],["T_STRING","null",128],")",["T_WHITESPACE"," ",128],"{",["T_WHITESPACE","\n            ",128],["T_RETURN","return",129],["T_WHITESPACE"," ",129],["T_VARIABLE","$result",129],";",["T_WHITESPACE","\n        ",129],"}",["T_WHITESPACE","\n\n        ",130],["T_IF","if",132],["T_WHITESPACE"," ",132],"(",["T_VARIABLE","$customerId",132],")",["T_WHITESPACE"," ",132],"{",["T_WHITESPACE","\n            ",132],["T_VARIABLE","$this",133],["T_OBJECT_OPERATOR","->",133],["T_STRING","searchCriteriaBuilder",133],["T_OBJECT_OPERATOR","->",133],["T_STRING","addFilters",133],"(",["T_WHITESPACE","\n                ",133],"[",["T_WHITESPACE","\n                    ",134],["T_VARIABLE","$this",135],["T_OBJECT_OPERATOR","->",135],["T_STRING","filterBuilder",135],["T_OBJECT_OPERATOR","->",135],["T_STRING","setField",135],"(",["T_STRING","PaymentTokenInterface",135],["T_DOUBLE_COLON","::",135],["T_STRING","CUSTOMER_ID",135],")",["T_WHITESPACE","\n                    ",135],["T_OBJECT_OPERATOR","->",136],["T_STRING","setValue",136],"(",["T_VARIABLE","$customerId",136],")",["T_WHITESPACE","\n                    ",136],["T_OBJECT_OPERATOR","->",137],["T_STRING","create",137],"(",")",",",["T_WHITESPACE","\n                ",137],"]",["T_WHITESPACE","\n            ",138],")",";",["T_WHITESPACE","\n        ",139],"}",["T_WHITESPACE"," ",140],["T_ELSE","else",140],["T_WHITESPACE"," ",140],"{",["T_WHITESPACE","\n            ",140],["T_TRY","try",141],["T_WHITESPACE"," ",141],"{",["T_WHITESPACE","\n                ",141],["T_VARIABLE","$this",142],["T_OBJECT_OPERATOR","->",142],["T_STRING","searchCriteriaBuilder",142],["T_OBJECT_OPERATOR","->",142],["T_STRING","addFilters",142],"(",["T_WHITESPACE","\n                    ",142],"[",["T_WHITESPACE","\n                        ",143],["T_VARIABLE","$this",144],["T_OBJECT_OPERATOR","->",144],["T_STRING","filterBuilder",144],["T_OBJECT_OPERATOR","->",144],["T_STRING","setField",144],"(",["T_STRING","PaymentTokenInterface",144],["T_DOUBLE_COLON","::",144],["T_STRING","ENTITY_ID",144],")",["T_WHITESPACE","\n                            ",144],["T_OBJECT_OPERATOR","->",145],["T_STRING","setValue",145],"(",["T_VARIABLE","$this",145],["T_OBJECT_OPERATOR","->",145],["T_STRING","getPaymentTokenEntityId",145],"(",")",")",["T_WHITESPACE","\n                            ",145],["T_OBJECT_OPERATOR","->",146],["T_STRING","create",146],"(",")",",",["T_WHITESPACE","\n                    ",146],"]",["T_WHITESPACE","\n                ",147],")",";",["T_WHITESPACE","\n            ",148],"}",["T_WHITESPACE"," ",149],["T_CATCH","catch",149],["T_WHITESPACE"," ",149],"(",["T_STRING","InputException",149],["T_WHITESPACE"," ",149],["T_VARIABLE","$e",149],")",["T_WHITESPACE"," ",149],"{",["T_WHITESPACE","\n                ",149],["T_RETURN","return",150],["T_WHITESPACE"," ",150],["T_VARIABLE","$result",150],";",["T_WHITESPACE","\n            ",150],"}",["T_WHITESPACE"," ",151],["T_CATCH","catch",151],["T_WHITESPACE"," ",151],"(",["T_STRING","NoSuchEntityException",151],["T_WHITESPACE"," ",151],["T_VARIABLE","$e",151],")",["T_WHITESPACE"," ",151],"{",["T_WHITESPACE","\n                ",151],["T_RETURN","return",152],["T_WHITESPACE"," ",152],["T_VARIABLE","$result",152],";",["T_WHITESPACE","\n            ",152],"}",["T_WHITESPACE","\n        ",153],"}",["T_WHITESPACE","\n        ",154],["T_VARIABLE","$this",155],["T_OBJECT_OPERATOR","->",155],["T_STRING","searchCriteriaBuilder",155],["T_OBJECT_OPERATOR","->",155],["T_STRING","addFilters",155],"(",["T_WHITESPACE","\n            ",155],"[",["T_WHITESPACE","\n                ",156],["T_VARIABLE","$this",157],["T_OBJECT_OPERATOR","->",157],["T_STRING","filterBuilder",157],["T_OBJECT_OPERATOR","->",157],["T_STRING","setField",157],"(",["T_STRING","PaymentTokenInterface",157],["T_DOUBLE_COLON","::",157],["T_STRING","PAYMENT_METHOD_CODE",157],")",["T_WHITESPACE","\n                    ",157],["T_OBJECT_OPERATOR","->",158],["T_STRING","setValue",158],"(",["T_VARIABLE","$vaultProviderCode",158],")",["T_WHITESPACE","\n                    ",158],["T_OBJECT_OPERATOR","->",159],["T_STRING","create",159],"(",")",",",["T_WHITESPACE","\n                ",159],"]",["T_WHITESPACE","\n        ",160],")",";",["T_WHITESPACE","\n        ",161],["T_VARIABLE","$this",162],["T_OBJECT_OPERATOR","->",162],["T_STRING","searchCriteriaBuilder",162],["T_OBJECT_OPERATOR","->",162],["T_STRING","addFilters",162],"(",["T_WHITESPACE","\n            ",162],"[",["T_WHITESPACE","\n                ",163],["T_VARIABLE","$this",164],["T_OBJECT_OPERATOR","->",164],["T_STRING","filterBuilder",164],["T_OBJECT_OPERATOR","->",164],["T_STRING","setField",164],"(",["T_STRING","PaymentTokenInterface",164],["T_DOUBLE_COLON","::",164],["T_STRING","IS_ACTIVE",164],")",["T_WHITESPACE","\n                    ",164],["T_OBJECT_OPERATOR","->",165],["T_STRING","setValue",165],"(",["T_LNUMBER","1",165],")",["T_WHITESPACE","\n                    ",165],["T_OBJECT_OPERATOR","->",166],["T_STRING","create",166],"(",")",",",["T_WHITESPACE","\n                ",166],"]",["T_WHITESPACE","\n        ",167],")",";",["T_WHITESPACE","\n        ",168],["T_VARIABLE","$this",169],["T_OBJECT_OPERATOR","->",169],["T_STRING","searchCriteriaBuilder",169],["T_OBJECT_OPERATOR","->",169],["T_STRING","addFilters",169],"(",["T_WHITESPACE","\n            ",169],"[",["T_WHITESPACE","\n                ",170],["T_VARIABLE","$this",171],["T_OBJECT_OPERATOR","->",171],["T_STRING","filterBuilder",171],["T_OBJECT_OPERATOR","->",171],["T_STRING","setField",171],"(",["T_STRING","PaymentTokenInterface",171],["T_DOUBLE_COLON","::",171],["T_STRING","EXPIRES_AT",171],")",["T_WHITESPACE","\n                    ",171],["T_OBJECT_OPERATOR","->",172],["T_STRING","setConditionType",172],"(",["T_CONSTANT_ENCAPSED_STRING","'gt'",172],")",["T_WHITESPACE","\n                    ",172],["T_OBJECT_OPERATOR","->",173],["T_STRING","setValue",173],"(",["T_WHITESPACE","\n                        ",173],["T_VARIABLE","$this",174],["T_OBJECT_OPERATOR","->",174],["T_STRING","dateTimeFactory",174],["T_OBJECT_OPERATOR","->",174],["T_STRING","create",174],"(",["T_WHITESPACE","\n                            ",174],["T_CONSTANT_ENCAPSED_STRING","'now'",175],",",["T_WHITESPACE","\n                            ",175],["T_NEW","new",176],["T_WHITESPACE"," ",176],["T_NS_SEPARATOR","\\",176],["T_STRING","DateTimeZone",176],"(",["T_CONSTANT_ENCAPSED_STRING","'UTC'",176],")",["T_WHITESPACE","\n                        ",176],")",["T_OBJECT_OPERATOR","->",177],["T_STRING","format",177],"(",["T_CONSTANT_ENCAPSED_STRING","'Y-m-d 00:00:00'",177],")",["T_WHITESPACE","\n                    ",177],")",["T_WHITESPACE","\n                    ",178],["T_OBJECT_OPERATOR","->",179],["T_STRING","create",179],"(",")",",",["T_WHITESPACE","\n                ",179],"]",["T_WHITESPACE","\n        ",180],")",";",["T_WHITESPACE","\n\n        ",181],["T_VARIABLE","$searchCriteria",183],["T_WHITESPACE"," ",183],"=",["T_WHITESPACE"," ",183],["T_VARIABLE","$this",183],["T_OBJECT_OPERATOR","->",183],["T_STRING","searchCriteriaBuilder",183],["T_OBJECT_OPERATOR","->",183],["T_STRING","create",183],"(",")",";",["T_WHITESPACE","\n\n        ",183],["T_FOREACH","foreach",185],["T_WHITESPACE"," ",185],"(",["T_VARIABLE","$this",185],["T_OBJECT_OPERATOR","->",185],["T_STRING","paymentTokenRepository",185],["T_OBJECT_OPERATOR","->",185],["T_STRING","getList",185],"(",["T_VARIABLE","$searchCriteria",185],")",["T_OBJECT_OPERATOR","->",185],["T_STRING","getItems",185],"(",")",["T_WHITESPACE"," ",185],["T_AS","as",185],["T_WHITESPACE"," ",185],["T_VARIABLE","$token",185],")",["T_WHITESPACE"," ",185],"{",["T_WHITESPACE","\n            ",185],["T_VARIABLE","$result",186],"[","]",["T_WHITESPACE"," ",186],"=",["T_WHITESPACE"," ",186],["T_VARIABLE","$componentProvider",186],["T_OBJECT_OPERATOR","->",186],["T_STRING","getComponentForToken",186],"(",["T_VARIABLE","$token",186],")",";",["T_WHITESPACE","\n        ",186],"}",["T_WHITESPACE","\n\n        ",187],["T_RETURN","return",189],["T_WHITESPACE"," ",189],["T_VARIABLE","$result",189],";",["T_WHITESPACE","\n    ",189],"}",["T_WHITESPACE","\n\n    ",190],["T_DOC_COMMENT","\/**\n     * @param string $vaultProviderCode\n     * @return TokenUiComponentProviderInterface|null\n     *\/",192],["T_WHITESPACE","\n    ",195],["T_PRIVATE","private",196],["T_WHITESPACE"," ",196],["T_FUNCTION","function",196],["T_WHITESPACE"," ",196],["T_STRING","getComponentProvider",196],"(",["T_VARIABLE","$vaultProviderCode",196],")",["T_WHITESPACE","\n    ",196],"{",["T_WHITESPACE","\n        ",197],["T_VARIABLE","$componentProvider",198],["T_WHITESPACE"," ",198],"=",["T_WHITESPACE"," ",198],["T_ISSET","isset",198],"(",["T_VARIABLE","$this",198],["T_OBJECT_OPERATOR","->",198],["T_STRING","tokenUiComponentProviders",198],"[",["T_VARIABLE","$vaultProviderCode",198],"]",")",["T_WHITESPACE","\n            ",198],"?",["T_WHITESPACE"," ",199],["T_VARIABLE","$this",199],["T_OBJECT_OPERATOR","->",199],["T_STRING","tokenUiComponentProviders",199],"[",["T_VARIABLE","$vaultProviderCode",199],"]",["T_WHITESPACE","\n            ",199],":",["T_WHITESPACE"," ",200],["T_STRING","null",200],";",["T_WHITESPACE","\n        ",200],["T_RETURN","return",201],["T_WHITESPACE"," ",201],["T_VARIABLE","$componentProvider",201],["T_WHITESPACE"," ",201],["T_INSTANCEOF","instanceof",201],["T_WHITESPACE"," ",201],["T_STRING","TokenUiComponentProviderInterface",201],["T_WHITESPACE","\n            ",201],"?",["T_WHITESPACE"," ",202],["T_VARIABLE","$componentProvider",202],["T_WHITESPACE","\n            ",202],":",["T_WHITESPACE"," ",203],["T_STRING","null",203],";",["T_WHITESPACE","\n    ",203],"}",["T_WHITESPACE","\n\n    ",204],["T_DOC_COMMENT","\/**\n     * Get active vault payment by code\n     * @param string $vaultPaymentCode\n     * @return VaultPaymentInterface|null\n     *\/",206],["T_WHITESPACE","\n    ",210],["T_PRIVATE","private",211],["T_WHITESPACE"," ",211],["T_FUNCTION","function",211],["T_WHITESPACE"," ",211],["T_STRING","getVaultPayment",211],"(",["T_VARIABLE","$vaultPaymentCode",211],")",["T_WHITESPACE","\n    ",211],"{",["T_WHITESPACE","\n        ",212],["T_VARIABLE","$storeId",213],["T_WHITESPACE"," ",213],"=",["T_WHITESPACE"," ",213],["T_VARIABLE","$this",213],["T_OBJECT_OPERATOR","->",213],["T_STRING","storeManager",213],["T_OBJECT_OPERATOR","->",213],["T_STRING","getStore",213],"(",")",["T_OBJECT_OPERATOR","->",213],["T_STRING","getId",213],"(",")",";",["T_WHITESPACE","\n        ",213],["T_VARIABLE","$vaultPayment",214],["T_WHITESPACE"," ",214],"=",["T_WHITESPACE"," ",214],["T_VARIABLE","$this",214],["T_OBJECT_OPERATOR","->",214],["T_STRING","getPaymentDataHelper",214],"(",")",["T_OBJECT_OPERATOR","->",214],["T_STRING","getMethodInstance",214],"(",["T_VARIABLE","$vaultPaymentCode",214],")",";",["T_WHITESPACE","\n        ",214],["T_RETURN","return",215],["T_WHITESPACE"," ",215],["T_VARIABLE","$vaultPayment",215],["T_OBJECT_OPERATOR","->",215],["T_STRING","isActive",215],"(",["T_VARIABLE","$storeId",215],")",["T_WHITESPACE"," ",215],"?",["T_WHITESPACE"," ",215],["T_VARIABLE","$vaultPayment",215],["T_WHITESPACE"," ",215],":",["T_WHITESPACE"," ",215],["T_STRING","null",215],";",["T_WHITESPACE","\n    ",215],"}",["T_WHITESPACE","\n\n    ",216],["T_DOC_COMMENT","\/**\n     * Returns payment token entity id by order payment id\n     * @return int|null\n     *\/",218],["T_WHITESPACE","\n    ",221],["T_PRIVATE","private",222],["T_WHITESPACE"," ",222],["T_FUNCTION","function",222],["T_WHITESPACE"," ",222],["T_STRING","getPaymentTokenEntityId",222],"(",")",["T_WHITESPACE","\n    ",222],"{",["T_WHITESPACE","\n        ",223],["T_VARIABLE","$paymentToken",224],["T_WHITESPACE"," ",224],"=",["T_WHITESPACE"," ",224],["T_VARIABLE","$this",224],["T_OBJECT_OPERATOR","->",224],["T_STRING","getPaymentTokenManagement",224],"(",")",["T_OBJECT_OPERATOR","->",224],["T_STRING","getByPaymentId",224],"(",["T_VARIABLE","$this",224],["T_OBJECT_OPERATOR","->",224],["T_STRING","getOrderPaymentEntityId",224],"(",")",")",";",["T_WHITESPACE","\n        ",224],["T_IF","if",225],["T_WHITESPACE"," ",225],"(",["T_VARIABLE","$paymentToken",225],["T_WHITESPACE"," ",225],["T_IS_IDENTICAL","===",225],["T_WHITESPACE"," ",225],["T_STRING","null",225],")",["T_WHITESPACE"," ",225],"{",["T_WHITESPACE","\n            ",225],["T_THROW","throw",226],["T_WHITESPACE"," ",226],["T_NEW","new",226],["T_WHITESPACE"," ",226],["T_STRING","NoSuchEntityException",226],"(",["T_STRING","__",226],"(",["T_CONSTANT_ENCAPSED_STRING","'No available payment tokens for specified order payment.'",226],")",")",";",["T_WHITESPACE","\n        ",226],"}",["T_WHITESPACE","\n        ",227],["T_RETURN","return",228],["T_WHITESPACE"," ",228],["T_VARIABLE","$paymentToken",228],["T_OBJECT_OPERATOR","->",228],["T_STRING","getEntityId",228],"(",")",";",["T_WHITESPACE","\n    ",228],"}",["T_WHITESPACE","\n\n    ",229],["T_DOC_COMMENT","\/**\n     * Returns order payment entity id\n     * Using 'getReordered' for Reorder action\n     * Using 'getOrder' for Edit action\n     * @return int\n     *\/",231],["T_WHITESPACE","\n    ",236],["T_PRIVATE","private",237],["T_WHITESPACE"," ",237],["T_FUNCTION","function",237],["T_WHITESPACE"," ",237],["T_STRING","getOrderPaymentEntityId",237],"(",")",["T_WHITESPACE","\n    ",237],"{",["T_WHITESPACE","\n        ",238],["T_VARIABLE","$orderId",239],["T_WHITESPACE"," ",239],"=",["T_WHITESPACE"," ",239],["T_VARIABLE","$this",239],["T_OBJECT_OPERATOR","->",239],["T_STRING","session",239],["T_OBJECT_OPERATOR","->",239],["T_STRING","getReordered",239],"(",")",["T_WHITESPACE","\n            ",239],"?",":",["T_WHITESPACE"," ",240],["T_VARIABLE","$this",240],["T_OBJECT_OPERATOR","->",240],["T_STRING","session",240],["T_OBJECT_OPERATOR","->",240],["T_STRING","getOrder",240],"(",")",["T_OBJECT_OPERATOR","->",240],["T_STRING","getEntityId",240],"(",")",";",["T_WHITESPACE","\n        ",240],["T_VARIABLE","$order",241],["T_WHITESPACE"," ",241],"=",["T_WHITESPACE"," ",241],["T_VARIABLE","$this",241],["T_OBJECT_OPERATOR","->",241],["T_STRING","getOrderRepository",241],"(",")",["T_OBJECT_OPERATOR","->",241],["T_STRING","get",241],"(",["T_VARIABLE","$orderId",241],")",";",["T_WHITESPACE","\n\n        ",241],["T_RETURN","return",243],["T_WHITESPACE"," ",243],["T_INT_CAST","(int)",243],["T_WHITESPACE"," ",243],["T_VARIABLE","$order",243],["T_OBJECT_OPERATOR","->",243],["T_STRING","getPayment",243],"(",")",["T_OBJECT_OPERATOR","->",243],["T_STRING","getEntityId",243],"(",")",";",["T_WHITESPACE","\n    ",243],"}",["T_WHITESPACE","\n\n    ",244],["T_DOC_COMMENT","\/**\n     * Get payment data helper instance\n     * @return Data\n     * @deprecated\n     *\/",246],["T_WHITESPACE","\n    ",250],["T_PRIVATE","private",251],["T_WHITESPACE"," ",251],["T_FUNCTION","function",251],["T_WHITESPACE"," ",251],["T_STRING","getPaymentDataHelper",251],"(",")",["T_WHITESPACE","\n    ",251],"{",["T_WHITESPACE","\n        ",252],["T_IF","if",253],["T_WHITESPACE"," ",253],"(",["T_VARIABLE","$this",253],["T_OBJECT_OPERATOR","->",253],["T_STRING","paymentDataHelper",253],["T_WHITESPACE"," ",253],["T_IS_IDENTICAL","===",253],["T_WHITESPACE"," ",253],["T_STRING","null",253],")",["T_WHITESPACE"," ",253],"{",["T_WHITESPACE","\n            ",253],["T_VARIABLE","$this",254],["T_OBJECT_OPERATOR","->",254],["T_STRING","paymentDataHelper",254],["T_WHITESPACE"," ",254],"=",["T_WHITESPACE"," ",254],["T_STRING","ObjectManager",254],["T_DOUBLE_COLON","::",254],["T_STRING","getInstance",254],"(",")",["T_OBJECT_OPERATOR","->",254],["T_STRING","get",254],"(",["T_STRING","Data",254],["T_DOUBLE_COLON","::",254],["T_CLASS","class",254],")",";",["T_WHITESPACE","\n        ",254],"}",["T_WHITESPACE","\n        ",255],["T_RETURN","return",256],["T_WHITESPACE"," ",256],["T_VARIABLE","$this",256],["T_OBJECT_OPERATOR","->",256],["T_STRING","paymentDataHelper",256],";",["T_WHITESPACE","\n    ",256],"}",["T_WHITESPACE","\n\n    ",257],["T_DOC_COMMENT","\/**\n     * Returns order repository instance\n     * @return OrderRepositoryInterface\n     * @deprecated\n     *\/",259],["T_WHITESPACE","\n    ",263],["T_PRIVATE","private",264],["T_WHITESPACE"," ",264],["T_FUNCTION","function",264],["T_WHITESPACE"," ",264],["T_STRING","getOrderRepository",264],"(",")",["T_WHITESPACE","\n    ",264],"{",["T_WHITESPACE","\n        ",265],["T_IF","if",266],["T_WHITESPACE"," ",266],"(",["T_VARIABLE","$this",266],["T_OBJECT_OPERATOR","->",266],["T_STRING","orderRepository",266],["T_WHITESPACE"," ",266],["T_IS_IDENTICAL","===",266],["T_WHITESPACE"," ",266],["T_STRING","null",266],")",["T_WHITESPACE"," ",266],"{",["T_WHITESPACE","\n            ",266],["T_VARIABLE","$this",267],["T_OBJECT_OPERATOR","->",267],["T_STRING","orderRepository",267],["T_WHITESPACE"," ",267],"=",["T_WHITESPACE"," ",267],["T_STRING","ObjectManager",267],["T_DOUBLE_COLON","::",267],["T_STRING","getInstance",267],"(",")",["T_WHITESPACE","\n                ",267],["T_OBJECT_OPERATOR","->",268],["T_STRING","get",268],"(",["T_STRING","OrderRepositoryInterface",268],["T_DOUBLE_COLON","::",268],["T_CLASS","class",268],")",";",["T_WHITESPACE","\n        ",268],"}",["T_WHITESPACE","\n\n        ",269],["T_RETURN","return",271],["T_WHITESPACE"," ",271],["T_VARIABLE","$this",271],["T_OBJECT_OPERATOR","->",271],["T_STRING","orderRepository",271],";",["T_WHITESPACE","\n    ",271],"}",["T_WHITESPACE","\n\n    ",272],["T_DOC_COMMENT","\/**\n     * Returns payment token management instance\n     * @return PaymentTokenManagementInterface\n     * @deprecated\n     *\/",274],["T_WHITESPACE","\n    ",278],["T_PRIVATE","private",279],["T_WHITESPACE"," ",279],["T_FUNCTION","function",279],["T_WHITESPACE"," ",279],["T_STRING","getPaymentTokenManagement",279],"(",")",["T_WHITESPACE","\n    ",279],"{",["T_WHITESPACE","\n        ",280],["T_IF","if",281],["T_WHITESPACE"," ",281],"(",["T_VARIABLE","$this",281],["T_OBJECT_OPERATOR","->",281],["T_STRING","paymentTokenManagement",281],["T_WHITESPACE"," ",281],["T_IS_IDENTICAL","===",281],["T_WHITESPACE"," ",281],["T_STRING","null",281],")",["T_WHITESPACE"," ",281],"{",["T_WHITESPACE","\n            ",281],["T_VARIABLE","$this",282],["T_OBJECT_OPERATOR","->",282],["T_STRING","paymentTokenManagement",282],["T_WHITESPACE"," ",282],"=",["T_WHITESPACE"," ",282],["T_STRING","ObjectManager",282],["T_DOUBLE_COLON","::",282],["T_STRING","getInstance",282],"(",")",["T_WHITESPACE","\n                ",282],["T_OBJECT_OPERATOR","->",283],["T_STRING","get",283],"(",["T_STRING","PaymentTokenManagementInterface",283],["T_DOUBLE_COLON","::",283],["T_CLASS","class",283],")",";",["T_WHITESPACE","\n        ",283],"}",["T_WHITESPACE","\n\n        ",284],["T_RETURN","return",286],["T_WHITESPACE"," ",286],["T_VARIABLE","$this",286],["T_OBJECT_OPERATOR","->",286],["T_STRING","paymentTokenManagement",286],";",["T_WHITESPACE","\n    ",286],"}",["T_WHITESPACE","\n",287],"}",["T_WHITESPACE","\n",288]]
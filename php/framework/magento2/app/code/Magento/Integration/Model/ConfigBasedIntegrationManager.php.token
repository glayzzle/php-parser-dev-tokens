[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Copyright \u00c2\u00a9 2013-2017 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n *\/",2],["T_WHITESPACE","\n",5],["T_NAMESPACE","namespace",6],["T_WHITESPACE"," ",6],["T_STRING","Magento",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Integration",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Model",6],";",["T_WHITESPACE","\n\n",6],["T_USE","use",8],["T_WHITESPACE"," ",8],["T_STRING","Magento",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Integration",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Model",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Config",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Converter",8],";",["T_WHITESPACE","\n",8],["T_USE","use",9],["T_WHITESPACE"," ",9],["T_STRING","Magento",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Authorization",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Model",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Acl",9],["T_NS_SEPARATOR","\\",9],["T_STRING","AclRetriever",9],";",["T_WHITESPACE","\n",9],["T_USE","use",10],["T_WHITESPACE"," ",10],["T_STRING","Magento",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Authorization",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Model",10],["T_NS_SEPARATOR","\\",10],["T_STRING","UserContextInterface",10],";",["T_WHITESPACE","\n\n",10],["T_DOC_COMMENT","\/**\n * Class to manage integrations installed from config file\n *\n *\/",12],["T_WHITESPACE","\n",15],["T_CLASS","class",16],["T_WHITESPACE"," ",16],["T_STRING","ConfigBasedIntegrationManager",16],["T_WHITESPACE","\n",16],"{",["T_WHITESPACE","\n    ",17],["T_DOC_COMMENT","\/**\n     * Integration service\n     *\n     * @var \\Magento\\Integration\\Api\\IntegrationServiceInterface\n     *\/",18],["T_WHITESPACE","\n    ",22],["T_PROTECTED","protected",23],["T_WHITESPACE"," ",23],["T_VARIABLE","$integrationService",23],";",["T_WHITESPACE","\n\n    ",23],["T_DOC_COMMENT","\/**\n     * @var  AclRetriever\n     *\/",25],["T_WHITESPACE","\n    ",27],["T_PROTECTED","protected",28],["T_WHITESPACE"," ",28],["T_VARIABLE","$aclRetriever",28],";",["T_WHITESPACE","\n\n    ",28],["T_DOC_COMMENT","\/**\n     * Integration config\n     *\n     * @var Config\n     *\/",30],["T_WHITESPACE","\n    ",34],["T_PROTECTED","protected",35],["T_WHITESPACE"," ",35],["T_VARIABLE","$integrationConfig",35],";",["T_WHITESPACE","\n\n    ",35],["T_DOC_COMMENT","\/**\n     * @param \\Magento\\Integration\\Api\\IntegrationServiceInterface $integrationService\n     * @param AclRetriever $aclRetriever\n     * @param Config $integrationConfig\n     *\/",37],["T_WHITESPACE","\n    ",41],["T_PUBLIC","public",42],["T_WHITESPACE"," ",42],["T_FUNCTION","function",42],["T_WHITESPACE"," ",42],["T_STRING","__construct",42],"(",["T_WHITESPACE","\n        ",42],["T_NS_SEPARATOR","\\",43],["T_STRING","Magento",43],["T_NS_SEPARATOR","\\",43],["T_STRING","Integration",43],["T_NS_SEPARATOR","\\",43],["T_STRING","Api",43],["T_NS_SEPARATOR","\\",43],["T_STRING","IntegrationServiceInterface",43],["T_WHITESPACE"," ",43],["T_VARIABLE","$integrationService",43],",",["T_WHITESPACE","\n        ",43],["T_STRING","AclRetriever",44],["T_WHITESPACE"," ",44],["T_VARIABLE","$aclRetriever",44],",",["T_WHITESPACE","\n        ",44],["T_STRING","Config",45],["T_WHITESPACE"," ",45],["T_VARIABLE","$integrationConfig",45],["T_WHITESPACE","\n    ",45],")",["T_WHITESPACE"," ",46],"{",["T_WHITESPACE","\n        ",46],["T_VARIABLE","$this",47],["T_OBJECT_OPERATOR","->",47],["T_STRING","integrationService",47],["T_WHITESPACE"," ",47],"=",["T_WHITESPACE"," ",47],["T_VARIABLE","$integrationService",47],";",["T_WHITESPACE","\n        ",47],["T_VARIABLE","$this",48],["T_OBJECT_OPERATOR","->",48],["T_STRING","aclRetriever",48],["T_WHITESPACE"," ",48],"=",["T_WHITESPACE"," ",48],["T_VARIABLE","$aclRetriever",48],";",["T_WHITESPACE","\n        ",48],["T_VARIABLE","$this",49],["T_OBJECT_OPERATOR","->",49],["T_STRING","integrationConfig",49],["T_WHITESPACE"," ",49],"=",["T_WHITESPACE"," ",49],["T_VARIABLE","$integrationConfig",49],";",["T_WHITESPACE","\n    ",49],"}",["T_WHITESPACE","\n\n    ",50],["T_DOC_COMMENT","\/**\n     * Process integrations from config files for the given array of integration names\n     *\n     * @param array $integrationNames\n     * @return array\n     * @deprecated\n     *\/",52],["T_WHITESPACE","\n    ",58],["T_PUBLIC","public",59],["T_WHITESPACE"," ",59],["T_FUNCTION","function",59],["T_WHITESPACE"," ",59],["T_STRING","processIntegrationConfig",59],"(",["T_ARRAY","array",59],["T_WHITESPACE"," ",59],["T_VARIABLE","$integrationNames",59],")",["T_WHITESPACE","\n    ",59],"{",["T_WHITESPACE","\n        ",60],["T_IF","if",61],["T_WHITESPACE"," ",61],"(",["T_EMPTY","empty",61],"(",["T_VARIABLE","$integrationNames",61],")",")",["T_WHITESPACE"," ",61],"{",["T_WHITESPACE","\n            ",61],["T_RETURN","return",62],["T_WHITESPACE"," ",62],"[","]",";",["T_WHITESPACE","\n        ",62],"}",["T_WHITESPACE","\n        ",63],["T_DOC_COMMENT","\/** @var array $integrations *\/",64],["T_WHITESPACE","\n        ",64],["T_VARIABLE","$integrations",65],["T_WHITESPACE"," ",65],"=",["T_WHITESPACE"," ",65],["T_VARIABLE","$this",65],["T_OBJECT_OPERATOR","->",65],["T_STRING","integrationConfig",65],["T_OBJECT_OPERATOR","->",65],["T_STRING","getIntegrations",65],"(",")",";",["T_WHITESPACE","\n        ",65],["T_FOREACH","foreach",66],["T_WHITESPACE"," ",66],"(",["T_VARIABLE","$integrationNames",66],["T_WHITESPACE"," ",66],["T_AS","as",66],["T_WHITESPACE"," ",66],["T_VARIABLE","$name",66],")",["T_WHITESPACE"," ",66],"{",["T_WHITESPACE","\n            ",66],["T_VARIABLE","$integrationDetails",67],["T_WHITESPACE"," ",67],"=",["T_WHITESPACE"," ",67],["T_VARIABLE","$integrations",67],"[",["T_VARIABLE","$name",67],"]",";",["T_WHITESPACE","\n            ",67],["T_VARIABLE","$integrationData",68],["T_WHITESPACE"," ",68],"=",["T_WHITESPACE"," ",68],"[",["T_STRING","Integration",68],["T_DOUBLE_COLON","::",68],["T_STRING","NAME",68],["T_WHITESPACE"," ",68],["T_DOUBLE_ARROW","=>",68],["T_WHITESPACE"," ",68],["T_VARIABLE","$name",68],"]",";",["T_WHITESPACE","\n            ",68],["T_IF","if",69],["T_WHITESPACE"," ",69],"(",["T_ISSET","isset",69],"(",["T_VARIABLE","$integrationDetails",69],"[",["T_STRING","Converter",69],["T_DOUBLE_COLON","::",69],["T_STRING","KEY_EMAIL",69],"]",")",")",["T_WHITESPACE"," ",69],"{",["T_WHITESPACE","\n                ",69],["T_VARIABLE","$integrationData",70],"[",["T_STRING","Integration",70],["T_DOUBLE_COLON","::",70],["T_STRING","EMAIL",70],"]",["T_WHITESPACE"," ",70],"=",["T_WHITESPACE"," ",70],["T_VARIABLE","$integrationDetails",70],"[",["T_STRING","Converter",70],["T_DOUBLE_COLON","::",70],["T_STRING","KEY_EMAIL",70],"]",";",["T_WHITESPACE","\n            ",70],"}",["T_WHITESPACE","\n            ",71],["T_IF","if",72],["T_WHITESPACE"," ",72],"(",["T_ISSET","isset",72],"(",["T_VARIABLE","$integrationDetails",72],"[",["T_STRING","Converter",72],["T_DOUBLE_COLON","::",72],["T_STRING","KEY_AUTHENTICATION_ENDPOINT_URL",72],"]",")",")",["T_WHITESPACE"," ",72],"{",["T_WHITESPACE","\n                ",72],["T_VARIABLE","$integrationData",73],"[",["T_STRING","Integration",73],["T_DOUBLE_COLON","::",73],["T_STRING","ENDPOINT",73],"]",["T_WHITESPACE"," ",73],"=",["T_WHITESPACE","\n                    ",73],["T_VARIABLE","$integrationDetails",74],"[",["T_STRING","Converter",74],["T_DOUBLE_COLON","::",74],["T_STRING","KEY_AUTHENTICATION_ENDPOINT_URL",74],"]",";",["T_WHITESPACE","\n            ",74],"}",["T_WHITESPACE","\n            ",75],["T_IF","if",76],["T_WHITESPACE"," ",76],"(",["T_ISSET","isset",76],"(",["T_VARIABLE","$integrationDetails",76],"[",["T_STRING","Converter",76],["T_DOUBLE_COLON","::",76],["T_STRING","KEY_IDENTITY_LINKING_URL",76],"]",")",")",["T_WHITESPACE"," ",76],"{",["T_WHITESPACE","\n                ",76],["T_VARIABLE","$integrationData",77],"[",["T_STRING","Integration",77],["T_DOUBLE_COLON","::",77],["T_STRING","IDENTITY_LINK_URL",77],"]",["T_WHITESPACE"," ",77],"=",["T_WHITESPACE","\n                    ",77],["T_VARIABLE","$integrationDetails",78],"[",["T_STRING","Converter",78],["T_DOUBLE_COLON","::",78],["T_STRING","KEY_IDENTITY_LINKING_URL",78],"]",";",["T_WHITESPACE","\n            ",78],"}",["T_WHITESPACE","\n            ",79],["T_VARIABLE","$integrationData",80],"[",["T_STRING","Integration",80],["T_DOUBLE_COLON","::",80],["T_STRING","SETUP_TYPE",80],"]",["T_WHITESPACE"," ",80],"=",["T_WHITESPACE"," ",80],["T_STRING","Integration",80],["T_DOUBLE_COLON","::",80],["T_STRING","TYPE_CONFIG",80],";",["T_WHITESPACE","\n            ",80],["T_COMMENT","\/\/ If it already exists, update it\n",81],["T_WHITESPACE","            ",82],["T_VARIABLE","$integration",82],["T_WHITESPACE"," ",82],"=",["T_WHITESPACE"," ",82],["T_VARIABLE","$this",82],["T_OBJECT_OPERATOR","->",82],["T_STRING","integrationService",82],["T_OBJECT_OPERATOR","->",82],["T_STRING","findByName",82],"(",["T_VARIABLE","$name",82],")",";",["T_WHITESPACE","\n            ",82],["T_IF","if",83],["T_WHITESPACE"," ",83],"(",["T_VARIABLE","$integration",83],["T_OBJECT_OPERATOR","->",83],["T_STRING","getId",83],"(",")",")",["T_WHITESPACE"," ",83],"{",["T_WHITESPACE","\n                ",83],["T_COMMENT","\/\/If Integration already exists, update it.\n",84],["T_WHITESPACE","                ",85],["T_COMMENT","\/\/For now we will just overwrite the integration with same name but we will need a long term solution\n",85],["T_WHITESPACE","                ",86],["T_VARIABLE","$integrationData",86],"[",["T_STRING","Integration",86],["T_DOUBLE_COLON","::",86],["T_STRING","ID",86],"]",["T_WHITESPACE"," ",86],"=",["T_WHITESPACE"," ",86],["T_VARIABLE","$integration",86],["T_OBJECT_OPERATOR","->",86],["T_STRING","getId",86],"(",")",";",["T_WHITESPACE","\n                ",86],["T_VARIABLE","$this",87],["T_OBJECT_OPERATOR","->",87],["T_STRING","integrationService",87],["T_OBJECT_OPERATOR","->",87],["T_STRING","update",87],"(",["T_VARIABLE","$integrationData",87],")",";",["T_WHITESPACE","\n            ",87],"}",["T_WHITESPACE"," ",88],["T_ELSE","else",88],["T_WHITESPACE"," ",88],"{",["T_WHITESPACE","\n                ",88],["T_VARIABLE","$this",89],["T_OBJECT_OPERATOR","->",89],["T_STRING","integrationService",89],["T_OBJECT_OPERATOR","->",89],["T_STRING","create",89],"(",["T_VARIABLE","$integrationData",89],")",";",["T_WHITESPACE","\n            ",89],"}",["T_WHITESPACE","\n        ",90],"}",["T_WHITESPACE","\n        ",91],["T_RETURN","return",92],["T_WHITESPACE"," ",92],["T_VARIABLE","$integrationNames",92],";",["T_WHITESPACE","\n    ",92],"}",["T_WHITESPACE","\n\n    ",93],["T_DOC_COMMENT","\/**\n     * Process integrations from config files for the given array of integration names\n     *  to be used with consolidated integration config\n     *\n     * @param array $integrations\n     * @return array\n     *\/",95],["T_WHITESPACE","\n    ",101],["T_PUBLIC","public",102],["T_WHITESPACE"," ",102],["T_FUNCTION","function",102],["T_WHITESPACE"," ",102],["T_STRING","processConfigBasedIntegrations",102],"(",["T_ARRAY","array",102],["T_WHITESPACE"," ",102],["T_VARIABLE","$integrations",102],")",["T_WHITESPACE","\n    ",102],"{",["T_WHITESPACE","\n        ",103],["T_IF","if",104],["T_WHITESPACE"," ",104],"(",["T_EMPTY","empty",104],"(",["T_VARIABLE","$integrations",104],")",")",["T_WHITESPACE"," ",104],"{",["T_WHITESPACE","\n            ",104],["T_RETURN","return",105],["T_WHITESPACE"," ",105],"[","]",";",["T_WHITESPACE","\n        ",105],"}",["T_WHITESPACE","\n\n        ",106],["T_FOREACH","foreach",108],["T_WHITESPACE"," ",108],"(",["T_STRING","array_keys",108],"(",["T_VARIABLE","$integrations",108],")",["T_WHITESPACE"," ",108],["T_AS","as",108],["T_WHITESPACE"," ",108],["T_VARIABLE","$name",108],")",["T_WHITESPACE"," ",108],"{",["T_WHITESPACE","\n            ",108],["T_VARIABLE","$integrationDetails",109],["T_WHITESPACE"," ",109],"=",["T_WHITESPACE"," ",109],["T_VARIABLE","$integrations",109],"[",["T_VARIABLE","$name",109],"]",";",["T_WHITESPACE","\n            ",109],["T_VARIABLE","$integrationData",110],["T_WHITESPACE"," ",110],"=",["T_WHITESPACE"," ",110],"[",["T_STRING","Integration",110],["T_DOUBLE_COLON","::",110],["T_STRING","NAME",110],["T_WHITESPACE"," ",110],["T_DOUBLE_ARROW","=>",110],["T_WHITESPACE"," ",110],["T_VARIABLE","$name",110],"]",";",["T_WHITESPACE","\n\n            ",110],["T_IF","if",112],["T_WHITESPACE"," ",112],"(",["T_ISSET","isset",112],"(",["T_VARIABLE","$integrationDetails",112],"[",["T_STRING","Converter",112],["T_DOUBLE_COLON","::",112],["T_STRING","KEY_EMAIL",112],"]",")",")",["T_WHITESPACE"," ",112],"{",["T_WHITESPACE","\n                ",112],["T_VARIABLE","$integrationData",113],"[",["T_STRING","Integration",113],["T_DOUBLE_COLON","::",113],["T_STRING","EMAIL",113],"]",["T_WHITESPACE"," ",113],"=",["T_WHITESPACE"," ",113],["T_VARIABLE","$integrationDetails",113],"[",["T_STRING","Converter",113],["T_DOUBLE_COLON","::",113],["T_STRING","KEY_EMAIL",113],"]",";",["T_WHITESPACE","\n            ",113],"}",["T_WHITESPACE","\n            ",114],["T_IF","if",115],["T_WHITESPACE"," ",115],"(",["T_ISSET","isset",115],"(",["T_VARIABLE","$integrationDetails",115],"[",["T_STRING","Converter",115],["T_DOUBLE_COLON","::",115],["T_STRING","KEY_AUTHENTICATION_ENDPOINT_URL",115],"]",")",")",["T_WHITESPACE"," ",115],"{",["T_WHITESPACE","\n                ",115],["T_VARIABLE","$integrationData",116],"[",["T_STRING","Integration",116],["T_DOUBLE_COLON","::",116],["T_STRING","ENDPOINT",116],"]",["T_WHITESPACE"," ",116],"=",["T_WHITESPACE","\n                    ",116],["T_VARIABLE","$integrationDetails",117],"[",["T_STRING","Converter",117],["T_DOUBLE_COLON","::",117],["T_STRING","KEY_AUTHENTICATION_ENDPOINT_URL",117],"]",";",["T_WHITESPACE","\n            ",117],"}",["T_WHITESPACE","\n            ",118],["T_IF","if",119],["T_WHITESPACE"," ",119],"(",["T_ISSET","isset",119],"(",["T_VARIABLE","$integrationDetails",119],"[",["T_STRING","Converter",119],["T_DOUBLE_COLON","::",119],["T_STRING","KEY_IDENTITY_LINKING_URL",119],"]",")",")",["T_WHITESPACE"," ",119],"{",["T_WHITESPACE","\n                ",119],["T_VARIABLE","$integrationData",120],"[",["T_STRING","Integration",120],["T_DOUBLE_COLON","::",120],["T_STRING","IDENTITY_LINK_URL",120],"]",["T_WHITESPACE"," ",120],"=",["T_WHITESPACE","\n                    ",120],["T_VARIABLE","$integrationDetails",121],"[",["T_STRING","Converter",121],["T_DOUBLE_COLON","::",121],["T_STRING","KEY_IDENTITY_LINKING_URL",121],"]",";",["T_WHITESPACE","\n            ",121],"}",["T_WHITESPACE","\n            ",122],["T_IF","if",123],["T_WHITESPACE"," ",123],"(",["T_ISSET","isset",123],"(",["T_VARIABLE","$integrationDetails",123],"[",["T_VARIABLE","$name",123],"]","[",["T_CONSTANT_ENCAPSED_STRING","'resource'",123],"]",")",")",["T_WHITESPACE"," ",123],"{",["T_WHITESPACE","\n                ",123],["T_VARIABLE","$integrationData",124],"[",["T_CONSTANT_ENCAPSED_STRING","'resource'",124],"]",["T_WHITESPACE"," ",124],"=",["T_WHITESPACE"," ",124],["T_VARIABLE","$integrationDetails",124],"[",["T_VARIABLE","$name",124],"]","[",["T_CONSTANT_ENCAPSED_STRING","'resource'",124],"]",";",["T_WHITESPACE","\n            ",124],"}",["T_WHITESPACE","\n            ",125],["T_VARIABLE","$integrationData",126],"[",["T_STRING","Integration",126],["T_DOUBLE_COLON","::",126],["T_STRING","SETUP_TYPE",126],"]",["T_WHITESPACE"," ",126],"=",["T_WHITESPACE"," ",126],["T_STRING","Integration",126],["T_DOUBLE_COLON","::",126],["T_STRING","TYPE_CONFIG",126],";",["T_WHITESPACE","\n\n            ",126],["T_VARIABLE","$integration",128],["T_WHITESPACE"," ",128],"=",["T_WHITESPACE"," ",128],["T_VARIABLE","$this",128],["T_OBJECT_OPERATOR","->",128],["T_STRING","integrationService",128],["T_OBJECT_OPERATOR","->",128],["T_STRING","findByName",128],"(",["T_VARIABLE","$name",128],")",";",["T_WHITESPACE","\n            ",128],["T_IF","if",129],["T_WHITESPACE"," ",129],"(",["T_VARIABLE","$integration",129],["T_OBJECT_OPERATOR","->",129],["T_STRING","getId",129],"(",")",")",["T_WHITESPACE"," ",129],"{",["T_WHITESPACE","\n                ",129],["T_VARIABLE","$originalResources",130],["T_WHITESPACE"," ",130],"=",["T_WHITESPACE"," ",130],["T_VARIABLE","$this",130],["T_OBJECT_OPERATOR","->",130],["T_STRING","aclRetriever",130],["T_OBJECT_OPERATOR","->",130],["T_STRING","getAllowedResourcesByUser",130],"(",["T_WHITESPACE","\n                    ",130],["T_STRING","UserContextInterface",131],["T_DOUBLE_COLON","::",131],["T_STRING","USER_TYPE_INTEGRATION",131],",",["T_WHITESPACE","\n                    ",131],["T_VARIABLE","$integration",132],["T_OBJECT_OPERATOR","->",132],["T_STRING","getId",132],"(",")",["T_WHITESPACE","\n                ",132],")",";",["T_WHITESPACE","\n                ",133],["T_VARIABLE","$updateData",134],["T_WHITESPACE"," ",134],"=",["T_WHITESPACE"," ",134],["T_VARIABLE","$integrationData",134],";",["T_WHITESPACE","\n                ",134],["T_VARIABLE","$updateData",135],"[",["T_STRING","Integration",135],["T_DOUBLE_COLON","::",135],["T_STRING","ID",135],"]",["T_WHITESPACE"," ",135],"=",["T_WHITESPACE"," ",135],["T_VARIABLE","$integration",135],["T_OBJECT_OPERATOR","->",135],["T_STRING","getId",135],"(",")",";",["T_WHITESPACE","\n                ",135],["T_VARIABLE","$integration",136],["T_WHITESPACE"," ",136],"=",["T_WHITESPACE"," ",136],["T_VARIABLE","$this",136],["T_OBJECT_OPERATOR","->",136],["T_STRING","integrationService",136],["T_OBJECT_OPERATOR","->",136],["T_STRING","update",136],"(",["T_VARIABLE","$updateData",136],")",";",["T_WHITESPACE","\n\n                ",136],["T_COMMENT","\/\/ If there were any changes, delete then recreate integration\n",138],["T_WHITESPACE","                ",139],["T_IF","if",139],["T_WHITESPACE"," ",139],"(",["T_VARIABLE","$this",139],["T_OBJECT_OPERATOR","->",139],["T_STRING","hasDataChanged",139],"(",["T_VARIABLE","$integration",139],",",["T_WHITESPACE"," ",139],["T_VARIABLE","$originalResources",139],")",")",["T_WHITESPACE"," ",139],"{",["T_WHITESPACE","\n                    ",139],["T_VARIABLE","$this",140],["T_OBJECT_OPERATOR","->",140],["T_STRING","integrationService",140],["T_OBJECT_OPERATOR","->",140],["T_STRING","delete",140],"(",["T_VARIABLE","$integration",140],["T_OBJECT_OPERATOR","->",140],["T_STRING","getId",140],"(",")",")",";",["T_WHITESPACE","\n                    ",140],["T_VARIABLE","$integrationData",141],"[",["T_STRING","Integration",141],["T_DOUBLE_COLON","::",141],["T_STRING","STATUS",141],"]",["T_WHITESPACE"," ",141],"=",["T_WHITESPACE"," ",141],["T_STRING","Integration",141],["T_DOUBLE_COLON","::",141],["T_STRING","STATUS_RECREATED",141],";",["T_WHITESPACE","\n                ",141],"}",["T_WHITESPACE"," ",142],["T_ELSE","else",142],["T_WHITESPACE"," ",142],"{",["T_WHITESPACE","\n                    ",142],["T_CONTINUE","continue",143],";",["T_WHITESPACE","\n                ",143],"}",["T_WHITESPACE","\n            ",144],"}",["T_WHITESPACE","\n            ",145],["T_VARIABLE","$this",146],["T_OBJECT_OPERATOR","->",146],["T_STRING","integrationService",146],["T_OBJECT_OPERATOR","->",146],["T_STRING","create",146],"(",["T_VARIABLE","$integrationData",146],")",";",["T_WHITESPACE","\n        ",146],"}",["T_WHITESPACE","\n        ",147],["T_RETURN","return",148],["T_WHITESPACE"," ",148],["T_VARIABLE","$integrations",148],";",["T_WHITESPACE","\n    ",148],"}",["T_WHITESPACE","\n\n    ",149],["T_DOC_COMMENT","\/**\n     * Check whether integration data or assigned resources were changed\n     *\n     * @param Integration $integration\n     * @param array $originalResources\n     * @return bool\n     *\/",151],["T_WHITESPACE","\n    ",157],["T_PRIVATE","private",158],["T_WHITESPACE"," ",158],["T_FUNCTION","function",158],["T_WHITESPACE"," ",158],["T_STRING","hasDataChanged",158],"(",["T_STRING","Integration",158],["T_WHITESPACE"," ",158],["T_VARIABLE","$integration",158],",",["T_WHITESPACE"," ",158],["T_VARIABLE","$originalResources",158],")",["T_WHITESPACE","\n    ",158],"{",["T_WHITESPACE","\n        ",159],["T_IF","if",160],["T_WHITESPACE"," ",160],"(","!",["T_VARIABLE","$integration",160],["T_OBJECT_OPERATOR","->",160],["T_STRING","getOrigData",160],"(",")",")",["T_WHITESPACE"," ",160],"{",["T_WHITESPACE","\n            ",160],["T_RETURN","return",161],["T_WHITESPACE"," ",161],["T_STRING","true",161],";",["T_WHITESPACE","\n        ",161],"}",["T_WHITESPACE","\n\n        ",162],["T_COMMENT","\/\/ Check if resources have changed\n",164],["T_WHITESPACE","        ",165],["T_VARIABLE","$newResources",165],["T_WHITESPACE"," ",165],"=",["T_WHITESPACE"," ",165],["T_VARIABLE","$integration",165],["T_OBJECT_OPERATOR","->",165],["T_STRING","getData",165],"(",["T_CONSTANT_ENCAPSED_STRING","'resource'",165],")",";",["T_WHITESPACE","\n        ",165],["T_VARIABLE","$commonResources",166],["T_WHITESPACE"," ",166],"=",["T_WHITESPACE"," ",166],["T_STRING","array_intersect",166],"(",["T_WHITESPACE","\n            ",166],["T_VARIABLE","$originalResources",167],",",["T_WHITESPACE","\n            ",167],["T_VARIABLE","$newResources",168],["T_WHITESPACE","\n        ",168],")",";",["T_WHITESPACE","\n\n        ",169],["T_IF","if",171],["T_WHITESPACE"," ",171],"(",["T_STRING","count",171],"(",["T_VARIABLE","$commonResources",171],")",["T_WHITESPACE"," ",171],["T_IS_NOT_EQUAL","!=",171],["T_WHITESPACE"," ",171],["T_STRING","count",171],"(",["T_VARIABLE","$originalResources",171],")",["T_WHITESPACE"," ",171],["T_BOOLEAN_OR","||",171],["T_WHITESPACE"," ",171],["T_STRING","count",171],"(",["T_VARIABLE","$commonResources",171],")",["T_WHITESPACE"," ",171],["T_IS_NOT_EQUAL","!=",171],["T_WHITESPACE"," ",171],["T_STRING","count",171],"(",["T_VARIABLE","$newResources",171],")",")",["T_WHITESPACE"," ",171],"{",["T_WHITESPACE","\n            ",171],["T_RETURN","return",172],["T_WHITESPACE"," ",172],["T_STRING","true",172],";",["T_WHITESPACE","\n        ",172],"}",["T_WHITESPACE","\n\n        ",173],["T_COMMENT","\/\/ Check if other data has changed\n",175],["T_WHITESPACE","        ",176],["T_VARIABLE","$fields",176],["T_WHITESPACE"," ",176],"=",["T_WHITESPACE"," ",176],"[",["T_WHITESPACE","\n            ",176],["T_STRING","Integration",177],["T_DOUBLE_COLON","::",177],["T_STRING","ID",177],",",["T_WHITESPACE","\n            ",177],["T_STRING","Integration",178],["T_DOUBLE_COLON","::",178],["T_STRING","NAME",178],",",["T_WHITESPACE","\n            ",178],["T_STRING","Integration",179],["T_DOUBLE_COLON","::",179],["T_STRING","EMAIL",179],",",["T_WHITESPACE","\n            ",179],["T_STRING","Integration",180],["T_DOUBLE_COLON","::",180],["T_STRING","ENDPOINT",180],",",["T_WHITESPACE","\n            ",180],["T_STRING","Integration",181],["T_DOUBLE_COLON","::",181],["T_STRING","IDENTITY_LINK_URL",181],",",["T_WHITESPACE","\n            ",181],["T_STRING","Integration",182],["T_DOUBLE_COLON","::",182],["T_STRING","SETUP_TYPE",182],",",["T_WHITESPACE","\n            ",182],["T_STRING","Integration",183],["T_DOUBLE_COLON","::",183],["T_STRING","CONSUMER_ID",183],["T_WHITESPACE","\n        ",183],"]",";",["T_WHITESPACE","\n        ",184],["T_FOREACH","foreach",185],["T_WHITESPACE"," ",185],"(",["T_VARIABLE","$fields",185],["T_WHITESPACE"," ",185],["T_AS","as",185],["T_WHITESPACE"," ",185],["T_VARIABLE","$field",185],")",["T_WHITESPACE"," ",185],"{",["T_WHITESPACE","\n            ",185],["T_IF","if",186],["T_WHITESPACE"," ",186],"(",["T_VARIABLE","$integration",186],["T_OBJECT_OPERATOR","->",186],["T_STRING","getOrigData",186],"(",["T_VARIABLE","$field",186],")",["T_WHITESPACE"," ",186],["T_IS_NOT_EQUAL","!=",186],["T_WHITESPACE"," ",186],["T_VARIABLE","$integration",186],["T_OBJECT_OPERATOR","->",186],["T_STRING","getData",186],"(",["T_VARIABLE","$field",186],")",")",["T_WHITESPACE"," ",186],"{",["T_WHITESPACE","\n                ",186],["T_RETURN","return",187],["T_WHITESPACE"," ",187],["T_STRING","true",187],";",["T_WHITESPACE","\n            ",187],"}",["T_WHITESPACE","\n        ",188],"}",["T_WHITESPACE","\n\n        ",189],["T_RETURN","return",191],["T_WHITESPACE"," ",191],["T_STRING","false",191],";",["T_WHITESPACE","\n    ",191],"}",["T_WHITESPACE","\n",192],"}",["T_WHITESPACE","\n",193]]
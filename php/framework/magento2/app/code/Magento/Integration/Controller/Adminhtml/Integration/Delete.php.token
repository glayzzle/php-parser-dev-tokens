[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n *\n * Copyright \u00c2\u00a9 2013-2017 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n *\/",2],["T_WHITESPACE","\n",6],["T_NAMESPACE","namespace",7],["T_WHITESPACE"," ",7],["T_STRING","Magento",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Integration",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Controller",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Adminhtml",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Integration",7],";",["T_WHITESPACE","\n\n",7],["T_USE","use",9],["T_WHITESPACE"," ",9],["T_STRING","Magento",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Integration",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Block",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Adminhtml",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Integration",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Edit",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Tab",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Info",9],";",["T_WHITESPACE","\n",9],["T_USE","use",10],["T_WHITESPACE"," ",10],["T_STRING","Magento",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Framework",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Exception",10],["T_NS_SEPARATOR","\\",10],["T_STRING","IntegrationException",10],";",["T_WHITESPACE","\n",10],["T_USE","use",11],["T_WHITESPACE"," ",11],["T_STRING","Magento",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Framework",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Controller",11],["T_NS_SEPARATOR","\\",11],["T_STRING","ResultFactory",11],";",["T_WHITESPACE","\n\n",11],["T_CLASS","class",13],["T_WHITESPACE"," ",13],["T_STRING","Delete",13],["T_WHITESPACE"," ",13],["T_EXTENDS","extends",13],["T_WHITESPACE"," ",13],["T_NS_SEPARATOR","\\",13],["T_STRING","Magento",13],["T_NS_SEPARATOR","\\",13],["T_STRING","Integration",13],["T_NS_SEPARATOR","\\",13],["T_STRING","Controller",13],["T_NS_SEPARATOR","\\",13],["T_STRING","Adminhtml",13],["T_NS_SEPARATOR","\\",13],["T_STRING","Integration",13],["T_WHITESPACE","\n",13],"{",["T_WHITESPACE","\n    ",14],["T_DOC_COMMENT","\/**\n     * Delete the integration.\n     *\n     * @return \\Magento\\Backend\\Model\\View\\Result\\Redirect\n     *\/",15],["T_WHITESPACE","\n    ",19],["T_PUBLIC","public",20],["T_WHITESPACE"," ",20],["T_FUNCTION","function",20],["T_WHITESPACE"," ",20],["T_STRING","execute",20],"(",")",["T_WHITESPACE","\n    ",20],"{",["T_WHITESPACE","\n        ",21],["T_DOC_COMMENT","\/** @var \\Magento\\Backend\\Model\\View\\Result\\Redirect $resultRedirect *\/",22],["T_WHITESPACE","\n        ",22],["T_VARIABLE","$resultRedirect",23],["T_WHITESPACE"," ",23],"=",["T_WHITESPACE"," ",23],["T_VARIABLE","$this",23],["T_OBJECT_OPERATOR","->",23],["T_STRING","resultFactory",23],["T_OBJECT_OPERATOR","->",23],["T_STRING","create",23],"(",["T_STRING","ResultFactory",23],["T_DOUBLE_COLON","::",23],["T_STRING","TYPE_REDIRECT",23],")",";",["T_WHITESPACE","\n        ",23],["T_VARIABLE","$integrationId",24],["T_WHITESPACE"," ",24],"=",["T_WHITESPACE"," ",24],["T_INT_CAST","(int)",24],["T_VARIABLE","$this",24],["T_OBJECT_OPERATOR","->",24],["T_STRING","getRequest",24],"(",")",["T_OBJECT_OPERATOR","->",24],["T_STRING","getParam",24],"(",["T_STRING","self",24],["T_DOUBLE_COLON","::",24],["T_STRING","PARAM_INTEGRATION_ID",24],")",";",["T_WHITESPACE","\n        ",24],["T_TRY","try",25],["T_WHITESPACE"," ",25],"{",["T_WHITESPACE","\n            ",25],["T_IF","if",26],["T_WHITESPACE"," ",26],"(",["T_VARIABLE","$integrationId",26],")",["T_WHITESPACE"," ",26],"{",["T_WHITESPACE","\n                ",26],["T_VARIABLE","$integrationData",27],["T_WHITESPACE"," ",27],"=",["T_WHITESPACE"," ",27],["T_VARIABLE","$this",27],["T_OBJECT_OPERATOR","->",27],["T_STRING","_integrationService",27],["T_OBJECT_OPERATOR","->",27],["T_STRING","get",27],"(",["T_VARIABLE","$integrationId",27],")",";",["T_WHITESPACE","\n                ",27],["T_IF","if",28],["T_WHITESPACE"," ",28],"(",["T_VARIABLE","$this",28],["T_OBJECT_OPERATOR","->",28],["T_STRING","_integrationData",28],["T_OBJECT_OPERATOR","->",28],["T_STRING","isConfigType",28],"(",["T_VARIABLE","$integrationData",28],")",")",["T_WHITESPACE"," ",28],"{",["T_WHITESPACE","\n                    ",28],["T_VARIABLE","$this",29],["T_OBJECT_OPERATOR","->",29],["T_STRING","messageManager",29],["T_OBJECT_OPERATOR","->",29],["T_STRING","addError",29],"(",["T_WHITESPACE","\n                        ",29],["T_STRING","__",30],"(",["T_WHITESPACE","\n                            ",30],["T_CONSTANT_ENCAPSED_STRING","\"Uninstall the extension to remove integration '%1'.\"",31],",",["T_WHITESPACE","\n                            ",31],["T_VARIABLE","$this",32],["T_OBJECT_OPERATOR","->",32],["T_STRING","escaper",32],["T_OBJECT_OPERATOR","->",32],["T_STRING","escapeHtml",32],"(",["T_VARIABLE","$integrationData",32],"[",["T_STRING","Info",32],["T_DOUBLE_COLON","::",32],["T_STRING","DATA_NAME",32],"]",")",["T_WHITESPACE","\n                        ",32],")",["T_WHITESPACE","\n                    ",33],")",";",["T_WHITESPACE","\n                    ",34],["T_RETURN","return",35],["T_WHITESPACE"," ",35],["T_VARIABLE","$resultRedirect",35],["T_OBJECT_OPERATOR","->",35],["T_STRING","setPath",35],"(",["T_CONSTANT_ENCAPSED_STRING","'*\/*\/'",35],")",";",["T_WHITESPACE","\n                ",35],"}",["T_WHITESPACE","\n                ",36],["T_VARIABLE","$integrationData",37],["T_WHITESPACE"," ",37],"=",["T_WHITESPACE"," ",37],["T_VARIABLE","$this",37],["T_OBJECT_OPERATOR","->",37],["T_STRING","_integrationService",37],["T_OBJECT_OPERATOR","->",37],["T_STRING","delete",37],"(",["T_VARIABLE","$integrationId",37],")",";",["T_WHITESPACE","\n                ",37],["T_IF","if",38],["T_WHITESPACE"," ",38],"(","!",["T_VARIABLE","$integrationData",38],"[",["T_STRING","Info",38],["T_DOUBLE_COLON","::",38],["T_STRING","DATA_ID",38],"]",")",["T_WHITESPACE"," ",38],"{",["T_WHITESPACE","\n                    ",38],["T_VARIABLE","$this",39],["T_OBJECT_OPERATOR","->",39],["T_STRING","messageManager",39],["T_OBJECT_OPERATOR","->",39],["T_STRING","addError",39],"(",["T_STRING","__",39],"(",["T_CONSTANT_ENCAPSED_STRING","'This integration no longer exists.'",39],")",")",";",["T_WHITESPACE","\n                ",39],"}",["T_WHITESPACE"," ",40],["T_ELSE","else",40],["T_WHITESPACE"," ",40],"{",["T_WHITESPACE","\n                    ",40],["T_COMMENT","\/\/Integration deleted successfully, now safe to delete the associated consumer data\n",41],["T_WHITESPACE","                    ",42],["T_IF","if",42],["T_WHITESPACE"," ",42],"(",["T_ISSET","isset",42],"(",["T_VARIABLE","$integrationData",42],"[",["T_STRING","Info",42],["T_DOUBLE_COLON","::",42],["T_STRING","DATA_CONSUMER_ID",42],"]",")",")",["T_WHITESPACE"," ",42],"{",["T_WHITESPACE","\n                        ",42],["T_VARIABLE","$this",43],["T_OBJECT_OPERATOR","->",43],["T_STRING","_oauthService",43],["T_OBJECT_OPERATOR","->",43],["T_STRING","deleteConsumer",43],"(",["T_VARIABLE","$integrationData",43],"[",["T_STRING","Info",43],["T_DOUBLE_COLON","::",43],["T_STRING","DATA_CONSUMER_ID",43],"]",")",";",["T_WHITESPACE","\n                    ",43],"}",["T_WHITESPACE","\n                    ",44],["T_VARIABLE","$this",45],["T_OBJECT_OPERATOR","->",45],["T_STRING","_registry",45],["T_OBJECT_OPERATOR","->",45],["T_STRING","register",45],"(",["T_STRING","self",45],["T_DOUBLE_COLON","::",45],["T_STRING","REGISTRY_KEY_CURRENT_INTEGRATION",45],",",["T_WHITESPACE"," ",45],["T_VARIABLE","$integrationData",45],")",";",["T_WHITESPACE","\n                    ",45],["T_VARIABLE","$this",46],["T_OBJECT_OPERATOR","->",46],["T_STRING","messageManager",46],["T_OBJECT_OPERATOR","->",46],["T_STRING","addSuccess",46],"(",["T_WHITESPACE","\n                        ",46],["T_STRING","__",47],"(",["T_WHITESPACE","\n                            ",47],["T_CONSTANT_ENCAPSED_STRING","\"The integration '%1' has been deleted.\"",48],",",["T_WHITESPACE","\n                            ",48],["T_VARIABLE","$this",49],["T_OBJECT_OPERATOR","->",49],["T_STRING","escaper",49],["T_OBJECT_OPERATOR","->",49],["T_STRING","escapeHtml",49],"(",["T_VARIABLE","$integrationData",49],"[",["T_STRING","Info",49],["T_DOUBLE_COLON","::",49],["T_STRING","DATA_NAME",49],"]",")",["T_WHITESPACE","\n                        ",49],")",["T_WHITESPACE","\n                    ",50],")",";",["T_WHITESPACE","\n                ",51],"}",["T_WHITESPACE","\n            ",52],"}",["T_WHITESPACE"," ",53],["T_ELSE","else",53],["T_WHITESPACE"," ",53],"{",["T_WHITESPACE","\n                ",53],["T_VARIABLE","$this",54],["T_OBJECT_OPERATOR","->",54],["T_STRING","messageManager",54],["T_OBJECT_OPERATOR","->",54],["T_STRING","addError",54],"(",["T_STRING","__",54],"(",["T_CONSTANT_ENCAPSED_STRING","'Integration ID is not specified or is invalid.'",54],")",")",";",["T_WHITESPACE","\n            ",54],"}",["T_WHITESPACE","\n        ",55],"}",["T_WHITESPACE"," ",56],["T_CATCH","catch",56],["T_WHITESPACE"," ",56],"(",["T_STRING","IntegrationException",56],["T_WHITESPACE"," ",56],["T_VARIABLE","$e",56],")",["T_WHITESPACE"," ",56],"{",["T_WHITESPACE","\n            ",56],["T_VARIABLE","$this",57],["T_OBJECT_OPERATOR","->",57],["T_STRING","messageManager",57],["T_OBJECT_OPERATOR","->",57],["T_STRING","addError",57],"(",["T_VARIABLE","$e",57],["T_OBJECT_OPERATOR","->",57],["T_STRING","getMessage",57],"(",")",")",";",["T_WHITESPACE","\n        ",57],"}",["T_WHITESPACE"," ",58],["T_CATCH","catch",58],["T_WHITESPACE"," ",58],"(",["T_NS_SEPARATOR","\\",58],["T_STRING","Exception",58],["T_WHITESPACE"," ",58],["T_VARIABLE","$e",58],")",["T_WHITESPACE"," ",58],"{",["T_WHITESPACE","\n            ",58],["T_VARIABLE","$this",59],["T_OBJECT_OPERATOR","->",59],["T_STRING","_logger",59],["T_OBJECT_OPERATOR","->",59],["T_STRING","critical",59],"(",["T_VARIABLE","$e",59],")",";",["T_WHITESPACE","\n        ",59],"}",["T_WHITESPACE","\n\n        ",60],["T_RETURN","return",62],["T_WHITESPACE"," ",62],["T_VARIABLE","$resultRedirect",62],["T_OBJECT_OPERATOR","->",62],["T_STRING","setPath",62],"(",["T_CONSTANT_ENCAPSED_STRING","'*\/*\/'",62],")",";",["T_WHITESPACE","\n    ",62],"}",["T_WHITESPACE","\n",63],"}",["T_WHITESPACE","\n",64]]
[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Copyright \u00c2\u00a9 2013-2017 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n *\/",2],["T_WHITESPACE","\n",5],["T_NAMESPACE","namespace",6],["T_WHITESPACE"," ",6],["T_STRING","Magento",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Integration",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Controller",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Adminhtml",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Integration",6],";",["T_WHITESPACE","\n\n",6],["T_USE","use",8],["T_WHITESPACE"," ",8],["T_STRING","Magento",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Integration",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Block",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Adminhtml",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Integration",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Edit",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Tab",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Info",8],";",["T_WHITESPACE","\n",8],["T_USE","use",9],["T_WHITESPACE"," ",9],["T_STRING","Magento",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Framework",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Exception",9],["T_NS_SEPARATOR","\\",9],["T_STRING","IntegrationException",9],";",["T_WHITESPACE","\n",9],["T_USE","use",10],["T_WHITESPACE"," ",10],["T_STRING","Magento",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Framework",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Exception",10],["T_NS_SEPARATOR","\\",10],["T_STRING","LocalizedException",10],";",["T_WHITESPACE","\n",10],["T_USE","use",11],["T_WHITESPACE"," ",11],["T_STRING","Magento",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Integration",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Model",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Integration",11],["T_WHITESPACE"," ",11],["T_AS","as",11],["T_WHITESPACE"," ",11],["T_STRING","IntegrationModel",11],";",["T_WHITESPACE","\n",11],["T_USE","use",12],["T_WHITESPACE"," ",12],["T_STRING","Magento",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Framework",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Exception",12],["T_NS_SEPARATOR","\\",12],["T_STRING","State",12],["T_NS_SEPARATOR","\\",12],["T_STRING","UserLockedException",12],";",["T_WHITESPACE","\n",12],["T_USE","use",13],["T_WHITESPACE"," ",13],["T_STRING","Magento",13],["T_NS_SEPARATOR","\\",13],["T_STRING","Security",13],["T_NS_SEPARATOR","\\",13],["T_STRING","Model",13],["T_NS_SEPARATOR","\\",13],["T_STRING","SecurityCookie",13],";",["T_WHITESPACE","\n\n",13],["T_DOC_COMMENT","\/**\n * Integration Save controller\n *\n * @SuppressWarnings(PHPMD.CouplingBetweenObjects)\n *\/",15],["T_WHITESPACE","\n",19],["T_CLASS","class",20],["T_WHITESPACE"," ",20],["T_STRING","Save",20],["T_WHITESPACE"," ",20],["T_EXTENDS","extends",20],["T_WHITESPACE"," ",20],["T_NS_SEPARATOR","\\",20],["T_STRING","Magento",20],["T_NS_SEPARATOR","\\",20],["T_STRING","Integration",20],["T_NS_SEPARATOR","\\",20],["T_STRING","Controller",20],["T_NS_SEPARATOR","\\",20],["T_STRING","Adminhtml",20],["T_NS_SEPARATOR","\\",20],["T_STRING","Integration",20],["T_WHITESPACE","\n",20],"{",["T_WHITESPACE","\n    ",21],["T_DOC_COMMENT","\/**\n     * @var SecurityCookie\n     *\/",22],["T_WHITESPACE","\n    ",24],["T_PRIVATE","private",25],["T_WHITESPACE"," ",25],["T_VARIABLE","$securityCookie",25],";",["T_WHITESPACE","\n\n    ",25],["T_DOC_COMMENT","\/**\n     * Get security cookie\n     *\n     * @return SecurityCookie\n     * @deprecated\n     *\/",27],["T_WHITESPACE","\n    ",32],["T_PRIVATE","private",33],["T_WHITESPACE"," ",33],["T_FUNCTION","function",33],["T_WHITESPACE"," ",33],["T_STRING","getSecurityCookie",33],"(",")",["T_WHITESPACE","\n    ",33],"{",["T_WHITESPACE","\n        ",34],["T_IF","if",35],["T_WHITESPACE"," ",35],"(","!","(",["T_VARIABLE","$this",35],["T_OBJECT_OPERATOR","->",35],["T_STRING","securityCookie",35],["T_WHITESPACE"," ",35],["T_INSTANCEOF","instanceof",35],["T_WHITESPACE"," ",35],["T_STRING","SecurityCookie",35],")",")",["T_WHITESPACE"," ",35],"{",["T_WHITESPACE","\n            ",35],["T_RETURN","return",36],["T_WHITESPACE"," ",36],["T_NS_SEPARATOR","\\",36],["T_STRING","Magento",36],["T_NS_SEPARATOR","\\",36],["T_STRING","Framework",36],["T_NS_SEPARATOR","\\",36],["T_STRING","App",36],["T_NS_SEPARATOR","\\",36],["T_STRING","ObjectManager",36],["T_DOUBLE_COLON","::",36],["T_STRING","getInstance",36],"(",")",["T_OBJECT_OPERATOR","->",36],["T_STRING","get",36],"(",["T_STRING","SecurityCookie",36],["T_DOUBLE_COLON","::",36],["T_CLASS","class",36],")",";",["T_WHITESPACE","\n        ",36],"}",["T_WHITESPACE"," ",37],["T_ELSE","else",37],["T_WHITESPACE"," ",37],"{",["T_WHITESPACE","\n            ",37],["T_RETURN","return",38],["T_WHITESPACE"," ",38],["T_VARIABLE","$this",38],["T_OBJECT_OPERATOR","->",38],["T_STRING","securityCookie",38],";",["T_WHITESPACE","\n        ",38],"}",["T_WHITESPACE","\n    ",39],"}",["T_WHITESPACE","\n\n    ",40],["T_DOC_COMMENT","\/**\n     * Save integration action.\n     *\n     * @return void\n     *\/",42],["T_WHITESPACE","\n    ",46],["T_PUBLIC","public",47],["T_WHITESPACE"," ",47],["T_FUNCTION","function",47],["T_WHITESPACE"," ",47],["T_STRING","execute",47],"(",")",["T_WHITESPACE","\n    ",47],"{",["T_WHITESPACE","\n        ",48],["T_DOC_COMMENT","\/** @var array $integrationData *\/",49],["T_WHITESPACE","\n        ",49],["T_VARIABLE","$integrationData",50],["T_WHITESPACE"," ",50],"=",["T_WHITESPACE"," ",50],"[","]",";",["T_WHITESPACE","\n        ",50],["T_TRY","try",51],["T_WHITESPACE"," ",51],"{",["T_WHITESPACE","\n            ",51],["T_VARIABLE","$integrationId",52],["T_WHITESPACE"," ",52],"=",["T_WHITESPACE"," ",52],["T_INT_CAST","(int)",52],["T_VARIABLE","$this",52],["T_OBJECT_OPERATOR","->",52],["T_STRING","getRequest",52],"(",")",["T_OBJECT_OPERATOR","->",52],["T_STRING","getParam",52],"(",["T_STRING","self",52],["T_DOUBLE_COLON","::",52],["T_STRING","PARAM_INTEGRATION_ID",52],")",";",["T_WHITESPACE","\n            ",52],["T_IF","if",53],["T_WHITESPACE"," ",53],"(",["T_VARIABLE","$integrationId",53],")",["T_WHITESPACE"," ",53],"{",["T_WHITESPACE","\n                ",53],["T_VARIABLE","$integrationData",54],["T_WHITESPACE"," ",54],"=",["T_WHITESPACE"," ",54],["T_VARIABLE","$this",54],["T_OBJECT_OPERATOR","->",54],["T_STRING","getIntegration",54],"(",["T_VARIABLE","$integrationId",54],")",";",["T_WHITESPACE","\n                ",54],["T_IF","if",55],["T_WHITESPACE"," ",55],"(","!",["T_VARIABLE","$integrationData",55],")",["T_WHITESPACE"," ",55],"{",["T_WHITESPACE","\n                    ",55],["T_RETURN","return",56],";",["T_WHITESPACE","\n                ",56],"}",["T_WHITESPACE","\n                ",57],["T_IF","if",58],["T_WHITESPACE"," ",58],"(",["T_VARIABLE","$integrationData",58],"[",["T_STRING","Info",58],["T_DOUBLE_COLON","::",58],["T_STRING","DATA_SETUP_TYPE",58],"]",["T_WHITESPACE"," ",58],["T_IS_EQUAL","==",58],["T_WHITESPACE"," ",58],["T_STRING","IntegrationModel",58],["T_DOUBLE_COLON","::",58],["T_STRING","TYPE_CONFIG",58],")",["T_WHITESPACE"," ",58],"{",["T_WHITESPACE","\n                    ",58],["T_THROW","throw",59],["T_WHITESPACE"," ",59],["T_NEW","new",59],["T_WHITESPACE"," ",59],["T_STRING","LocalizedException",59],"(",["T_STRING","__",59],"(",["T_CONSTANT_ENCAPSED_STRING","'Cannot edit integrations created via config file.'",59],")",")",";",["T_WHITESPACE","\n                ",59],"}",["T_WHITESPACE","\n            ",60],"}",["T_WHITESPACE","\n            ",61],["T_VARIABLE","$this",62],["T_OBJECT_OPERATOR","->",62],["T_STRING","validateUser",62],"(",")",";",["T_WHITESPACE","\n            ",62],["T_VARIABLE","$this",63],["T_OBJECT_OPERATOR","->",63],["T_STRING","processData",63],"(",["T_VARIABLE","$integrationData",63],")",";",["T_WHITESPACE","\n        ",63],"}",["T_WHITESPACE"," ",64],["T_CATCH","catch",64],["T_WHITESPACE"," ",64],"(",["T_STRING","UserLockedException",64],["T_WHITESPACE"," ",64],["T_VARIABLE","$e",64],")",["T_WHITESPACE"," ",64],"{",["T_WHITESPACE","\n            ",64],["T_VARIABLE","$this",65],["T_OBJECT_OPERATOR","->",65],["T_STRING","_auth",65],["T_OBJECT_OPERATOR","->",65],["T_STRING","logout",65],"(",")",";",["T_WHITESPACE","\n            ",65],["T_VARIABLE","$this",66],["T_OBJECT_OPERATOR","->",66],["T_STRING","getSecurityCookie",66],"(",")",["T_OBJECT_OPERATOR","->",66],["T_STRING","setLogoutReasonCookie",66],"(",["T_WHITESPACE","\n                ",66],["T_NS_SEPARATOR","\\",67],["T_STRING","Magento",67],["T_NS_SEPARATOR","\\",67],["T_STRING","Security",67],["T_NS_SEPARATOR","\\",67],["T_STRING","Model",67],["T_NS_SEPARATOR","\\",67],["T_STRING","AdminSessionsManager",67],["T_DOUBLE_COLON","::",67],["T_STRING","LOGOUT_REASON_USER_LOCKED",67],["T_WHITESPACE","\n            ",67],")",";",["T_WHITESPACE","\n            ",68],["T_VARIABLE","$this",69],["T_OBJECT_OPERATOR","->",69],["T_STRING","_redirect",69],"(",["T_CONSTANT_ENCAPSED_STRING","'*'",69],")",";",["T_WHITESPACE","\n        ",69],"}",["T_WHITESPACE"," ",70],["T_CATCH","catch",70],["T_WHITESPACE"," ",70],"(",["T_NS_SEPARATOR","\\",70],["T_STRING","Magento",70],["T_NS_SEPARATOR","\\",70],["T_STRING","Framework",70],["T_NS_SEPARATOR","\\",70],["T_STRING","Exception",70],["T_NS_SEPARATOR","\\",70],["T_STRING","AuthenticationException",70],["T_WHITESPACE"," ",70],["T_VARIABLE","$e",70],")",["T_WHITESPACE"," ",70],"{",["T_WHITESPACE","\n            ",70],["T_VARIABLE","$this",71],["T_OBJECT_OPERATOR","->",71],["T_STRING","messageManager",71],["T_OBJECT_OPERATOR","->",71],["T_STRING","addError",71],"(",["T_VARIABLE","$e",71],["T_OBJECT_OPERATOR","->",71],["T_STRING","getMessage",71],"(",")",")",";",["T_WHITESPACE","\n            ",71],["T_VARIABLE","$this",72],["T_OBJECT_OPERATOR","->",72],["T_STRING","_getSession",72],"(",")",["T_OBJECT_OPERATOR","->",72],["T_STRING","setIntegrationData",72],"(",["T_VARIABLE","$this",72],["T_OBJECT_OPERATOR","->",72],["T_STRING","getRequest",72],"(",")",["T_OBJECT_OPERATOR","->",72],["T_STRING","getPostValue",72],"(",")",")",";",["T_WHITESPACE","\n            ",72],["T_VARIABLE","$this",73],["T_OBJECT_OPERATOR","->",73],["T_STRING","_redirectOnSaveError",73],"(",")",";",["T_WHITESPACE","\n        ",73],"}",["T_WHITESPACE"," ",74],["T_CATCH","catch",74],["T_WHITESPACE"," ",74],"(",["T_STRING","IntegrationException",74],["T_WHITESPACE"," ",74],["T_VARIABLE","$e",74],")",["T_WHITESPACE"," ",74],"{",["T_WHITESPACE","\n            ",74],["T_VARIABLE","$this",75],["T_OBJECT_OPERATOR","->",75],["T_STRING","messageManager",75],["T_OBJECT_OPERATOR","->",75],["T_STRING","addError",75],"(",["T_VARIABLE","$this",75],["T_OBJECT_OPERATOR","->",75],["T_STRING","escaper",75],["T_OBJECT_OPERATOR","->",75],["T_STRING","escapeHtml",75],"(",["T_VARIABLE","$e",75],["T_OBJECT_OPERATOR","->",75],["T_STRING","getMessage",75],"(",")",")",")",";",["T_WHITESPACE","\n            ",75],["T_VARIABLE","$this",76],["T_OBJECT_OPERATOR","->",76],["T_STRING","_getSession",76],"(",")",["T_OBJECT_OPERATOR","->",76],["T_STRING","setIntegrationData",76],"(",["T_VARIABLE","$integrationData",76],")",";",["T_WHITESPACE","\n            ",76],["T_VARIABLE","$this",77],["T_OBJECT_OPERATOR","->",77],["T_STRING","_redirectOnSaveError",77],"(",")",";",["T_WHITESPACE","\n        ",77],"}",["T_WHITESPACE"," ",78],["T_CATCH","catch",78],["T_WHITESPACE"," ",78],"(",["T_NS_SEPARATOR","\\",78],["T_STRING","Magento",78],["T_NS_SEPARATOR","\\",78],["T_STRING","Framework",78],["T_NS_SEPARATOR","\\",78],["T_STRING","Exception",78],["T_NS_SEPARATOR","\\",78],["T_STRING","LocalizedException",78],["T_WHITESPACE"," ",78],["T_VARIABLE","$e",78],")",["T_WHITESPACE"," ",78],"{",["T_WHITESPACE","\n            ",78],["T_VARIABLE","$this",79],["T_OBJECT_OPERATOR","->",79],["T_STRING","messageManager",79],["T_OBJECT_OPERATOR","->",79],["T_STRING","addError",79],"(",["T_VARIABLE","$this",79],["T_OBJECT_OPERATOR","->",79],["T_STRING","escaper",79],["T_OBJECT_OPERATOR","->",79],["T_STRING","escapeHtml",79],"(",["T_VARIABLE","$e",79],["T_OBJECT_OPERATOR","->",79],["T_STRING","getMessage",79],"(",")",")",")",";",["T_WHITESPACE","\n            ",79],["T_VARIABLE","$this",80],["T_OBJECT_OPERATOR","->",80],["T_STRING","_redirectOnSaveError",80],"(",")",";",["T_WHITESPACE","\n        ",80],"}",["T_WHITESPACE"," ",81],["T_CATCH","catch",81],["T_WHITESPACE"," ",81],"(",["T_NS_SEPARATOR","\\",81],["T_STRING","Exception",81],["T_WHITESPACE"," ",81],["T_VARIABLE","$e",81],")",["T_WHITESPACE"," ",81],"{",["T_WHITESPACE","\n            ",81],["T_VARIABLE","$this",82],["T_OBJECT_OPERATOR","->",82],["T_STRING","_logger",82],["T_OBJECT_OPERATOR","->",82],["T_STRING","critical",82],"(",["T_VARIABLE","$e",82],")",";",["T_WHITESPACE","\n            ",82],["T_VARIABLE","$this",83],["T_OBJECT_OPERATOR","->",83],["T_STRING","messageManager",83],["T_OBJECT_OPERATOR","->",83],["T_STRING","addError",83],"(",["T_VARIABLE","$this",83],["T_OBJECT_OPERATOR","->",83],["T_STRING","escaper",83],["T_OBJECT_OPERATOR","->",83],["T_STRING","escapeHtml",83],"(",["T_VARIABLE","$e",83],["T_OBJECT_OPERATOR","->",83],["T_STRING","getMessage",83],"(",")",")",")",";",["T_WHITESPACE","\n            ",83],["T_VARIABLE","$this",84],["T_OBJECT_OPERATOR","->",84],["T_STRING","_redirectOnSaveError",84],"(",")",";",["T_WHITESPACE","\n        ",84],"}",["T_WHITESPACE","\n    ",85],"}",["T_WHITESPACE","\n\n    ",86],["T_DOC_COMMENT","\/**\n     * Validate current user password\n     *\n     * @return $this\n     * @throws UserLockedException\n     * @throws \\Magento\\Framework\\Exception\\AuthenticationException\n     *\/",88],["T_WHITESPACE","\n    ",94],["T_PROTECTED","protected",95],["T_WHITESPACE"," ",95],["T_FUNCTION","function",95],["T_WHITESPACE"," ",95],["T_STRING","validateUser",95],"(",")",["T_WHITESPACE","\n    ",95],"{",["T_WHITESPACE","\n        ",96],["T_VARIABLE","$password",97],["T_WHITESPACE"," ",97],"=",["T_WHITESPACE"," ",97],["T_VARIABLE","$this",97],["T_OBJECT_OPERATOR","->",97],["T_STRING","getRequest",97],"(",")",["T_OBJECT_OPERATOR","->",97],["T_STRING","getParam",97],"(",["T_WHITESPACE","\n            ",97],["T_NS_SEPARATOR","\\",98],["T_STRING","Magento",98],["T_NS_SEPARATOR","\\",98],["T_STRING","Integration",98],["T_NS_SEPARATOR","\\",98],["T_STRING","Block",98],["T_NS_SEPARATOR","\\",98],["T_STRING","Adminhtml",98],["T_NS_SEPARATOR","\\",98],["T_STRING","Integration",98],["T_NS_SEPARATOR","\\",98],["T_STRING","Edit",98],["T_NS_SEPARATOR","\\",98],["T_STRING","Tab",98],["T_NS_SEPARATOR","\\",98],["T_STRING","Info",98],["T_DOUBLE_COLON","::",98],["T_STRING","DATA_CONSUMER_PASSWORD",98],["T_WHITESPACE","\n        ",98],")",";",["T_WHITESPACE","\n        ",99],["T_VARIABLE","$user",100],["T_WHITESPACE"," ",100],"=",["T_WHITESPACE"," ",100],["T_VARIABLE","$this",100],["T_OBJECT_OPERATOR","->",100],["T_STRING","_auth",100],["T_OBJECT_OPERATOR","->",100],["T_STRING","getUser",100],"(",")",";",["T_WHITESPACE","\n        ",100],["T_VARIABLE","$user",101],["T_OBJECT_OPERATOR","->",101],["T_STRING","performIdentityCheck",101],"(",["T_VARIABLE","$password",101],")",";",["T_WHITESPACE","\n\n        ",101],["T_RETURN","return",103],["T_WHITESPACE"," ",103],["T_VARIABLE","$this",103],";",["T_WHITESPACE","\n    ",103],"}",["T_WHITESPACE","\n\n    ",104],["T_DOC_COMMENT","\/**\n     * Get Integration entity\n     *\n     * @param int $integrationId\n     * @return \\Magento\\Integration\\Model\\Integration|null\n     *\/",106],["T_WHITESPACE","\n    ",111],["T_PROTECTED","protected",112],["T_WHITESPACE"," ",112],["T_FUNCTION","function",112],["T_WHITESPACE"," ",112],["T_STRING","getIntegration",112],"(",["T_VARIABLE","$integrationId",112],")",["T_WHITESPACE","\n    ",112],"{",["T_WHITESPACE","\n        ",113],["T_TRY","try",114],["T_WHITESPACE"," ",114],"{",["T_WHITESPACE","\n            ",114],["T_VARIABLE","$integrationData",115],["T_WHITESPACE"," ",115],"=",["T_WHITESPACE"," ",115],["T_VARIABLE","$this",115],["T_OBJECT_OPERATOR","->",115],["T_STRING","_integrationService",115],["T_OBJECT_OPERATOR","->",115],["T_STRING","get",115],"(",["T_VARIABLE","$integrationId",115],")",["T_OBJECT_OPERATOR","->",115],["T_STRING","getData",115],"(",")",";",["T_WHITESPACE","\n        ",115],"}",["T_WHITESPACE"," ",116],["T_CATCH","catch",116],["T_WHITESPACE"," ",116],"(",["T_STRING","IntegrationException",116],["T_WHITESPACE"," ",116],["T_VARIABLE","$e",116],")",["T_WHITESPACE"," ",116],"{",["T_WHITESPACE","\n            ",116],["T_VARIABLE","$this",117],["T_OBJECT_OPERATOR","->",117],["T_STRING","messageManager",117],["T_OBJECT_OPERATOR","->",117],["T_STRING","addError",117],"(",["T_VARIABLE","$this",117],["T_OBJECT_OPERATOR","->",117],["T_STRING","escaper",117],["T_OBJECT_OPERATOR","->",117],["T_STRING","escapeHtml",117],"(",["T_VARIABLE","$e",117],["T_OBJECT_OPERATOR","->",117],["T_STRING","getMessage",117],"(",")",")",")",";",["T_WHITESPACE","\n            ",117],["T_VARIABLE","$this",118],["T_OBJECT_OPERATOR","->",118],["T_STRING","_redirect",118],"(",["T_CONSTANT_ENCAPSED_STRING","'*\/*\/'",118],")",";",["T_WHITESPACE","\n            ",118],["T_RETURN","return",119],["T_WHITESPACE"," ",119],["T_STRING","null",119],";",["T_WHITESPACE","\n        ",119],"}",["T_WHITESPACE"," ",120],["T_CATCH","catch",120],["T_WHITESPACE"," ",120],"(",["T_NS_SEPARATOR","\\",120],["T_STRING","Exception",120],["T_WHITESPACE"," ",120],["T_VARIABLE","$e",120],")",["T_WHITESPACE"," ",120],"{",["T_WHITESPACE","\n            ",120],["T_VARIABLE","$this",121],["T_OBJECT_OPERATOR","->",121],["T_STRING","_logger",121],["T_OBJECT_OPERATOR","->",121],["T_STRING","critical",121],"(",["T_VARIABLE","$e",121],")",";",["T_WHITESPACE","\n            ",121],["T_VARIABLE","$this",122],["T_OBJECT_OPERATOR","->",122],["T_STRING","messageManager",122],["T_OBJECT_OPERATOR","->",122],["T_STRING","addError",122],"(",["T_STRING","__",122],"(",["T_CONSTANT_ENCAPSED_STRING","'Internal error. Check exception log for details.'",122],")",")",";",["T_WHITESPACE","\n            ",122],["T_VARIABLE","$this",123],["T_OBJECT_OPERATOR","->",123],["T_STRING","_redirect",123],"(",["T_CONSTANT_ENCAPSED_STRING","'*\/*'",123],")",";",["T_WHITESPACE","\n            ",123],["T_RETURN","return",124],["T_WHITESPACE"," ",124],["T_STRING","null",124],";",["T_WHITESPACE","\n        ",124],"}",["T_WHITESPACE","\n\n        ",125],["T_RETURN","return",127],["T_WHITESPACE"," ",127],["T_VARIABLE","$integrationData",127],";",["T_WHITESPACE","\n    ",127],"}",["T_WHITESPACE","\n\n    ",128],["T_DOC_COMMENT","\/**\n     * Redirect merchant to 'Edit integration' or 'New integration' if error happened during integration save.\n     *\n     * @return void\n     *\/",130],["T_WHITESPACE","\n    ",134],["T_PROTECTED","protected",135],["T_WHITESPACE"," ",135],["T_FUNCTION","function",135],["T_WHITESPACE"," ",135],["T_STRING","_redirectOnSaveError",135],"(",")",["T_WHITESPACE","\n    ",135],"{",["T_WHITESPACE","\n        ",136],["T_VARIABLE","$integrationId",137],["T_WHITESPACE"," ",137],"=",["T_WHITESPACE"," ",137],["T_VARIABLE","$this",137],["T_OBJECT_OPERATOR","->",137],["T_STRING","getRequest",137],"(",")",["T_OBJECT_OPERATOR","->",137],["T_STRING","getParam",137],"(",["T_STRING","self",137],["T_DOUBLE_COLON","::",137],["T_STRING","PARAM_INTEGRATION_ID",137],")",";",["T_WHITESPACE","\n        ",137],["T_IF","if",138],["T_WHITESPACE"," ",138],"(",["T_VARIABLE","$integrationId",138],")",["T_WHITESPACE"," ",138],"{",["T_WHITESPACE","\n            ",138],["T_VARIABLE","$this",139],["T_OBJECT_OPERATOR","->",139],["T_STRING","_redirect",139],"(",["T_CONSTANT_ENCAPSED_STRING","'*\/*\/edit'",139],",",["T_WHITESPACE"," ",139],"[",["T_CONSTANT_ENCAPSED_STRING","'id'",139],["T_WHITESPACE"," ",139],["T_DOUBLE_ARROW","=>",139],["T_WHITESPACE"," ",139],["T_VARIABLE","$integrationId",139],"]",")",";",["T_WHITESPACE","\n        ",139],"}",["T_WHITESPACE"," ",140],["T_ELSE","else",140],["T_WHITESPACE"," ",140],"{",["T_WHITESPACE","\n            ",140],["T_VARIABLE","$this",141],["T_OBJECT_OPERATOR","->",141],["T_STRING","_redirect",141],"(",["T_CONSTANT_ENCAPSED_STRING","'*\/*\/new'",141],")",";",["T_WHITESPACE","\n        ",141],"}",["T_WHITESPACE","\n    ",142],"}",["T_WHITESPACE","\n\n    ",143],["T_DOC_COMMENT","\/**\n     * Save integration data.\n     *\n     * @param array $integrationData\n     * @return void\n     *\/",145],["T_WHITESPACE","\n    ",150],["T_PRIVATE","private",151],["T_WHITESPACE"," ",151],["T_FUNCTION","function",151],["T_WHITESPACE"," ",151],["T_STRING","processData",151],"(",["T_VARIABLE","$integrationData",151],")",["T_WHITESPACE","\n    ",151],"{",["T_WHITESPACE","\n        ",152],["T_DOC_COMMENT","\/** @var array $data *\/",153],["T_WHITESPACE","\n        ",153],["T_VARIABLE","$data",154],["T_WHITESPACE"," ",154],"=",["T_WHITESPACE"," ",154],["T_VARIABLE","$this",154],["T_OBJECT_OPERATOR","->",154],["T_STRING","getRequest",154],"(",")",["T_OBJECT_OPERATOR","->",154],["T_STRING","getPostValue",154],"(",")",";",["T_WHITESPACE","\n        ",154],["T_IF","if",155],["T_WHITESPACE"," ",155],"(","!",["T_EMPTY","empty",155],"(",["T_VARIABLE","$data",155],")",")",["T_WHITESPACE"," ",155],"{",["T_WHITESPACE","\n            ",155],["T_IF","if",156],["T_WHITESPACE"," ",156],"(","!",["T_ISSET","isset",156],"(",["T_VARIABLE","$data",156],"[",["T_CONSTANT_ENCAPSED_STRING","'resource'",156],"]",")",")",["T_WHITESPACE"," ",156],"{",["T_WHITESPACE","\n                ",156],["T_VARIABLE","$integrationData",157],"[",["T_CONSTANT_ENCAPSED_STRING","'resource'",157],"]",["T_WHITESPACE"," ",157],"=",["T_WHITESPACE"," ",157],"[","]",";",["T_WHITESPACE","\n            ",157],"}",["T_WHITESPACE","\n            ",158],["T_VARIABLE","$integrationData",159],["T_WHITESPACE"," ",159],"=",["T_WHITESPACE"," ",159],["T_STRING","array_merge",159],"(",["T_VARIABLE","$integrationData",159],",",["T_WHITESPACE"," ",159],["T_VARIABLE","$data",159],")",";",["T_WHITESPACE","\n            ",159],["T_IF","if",160],["T_WHITESPACE"," ",160],"(","!",["T_ISSET","isset",160],"(",["T_VARIABLE","$integrationData",160],"[",["T_STRING","Info",160],["T_DOUBLE_COLON","::",160],["T_STRING","DATA_ID",160],"]",")",")",["T_WHITESPACE"," ",160],"{",["T_WHITESPACE","\n                ",160],["T_VARIABLE","$integration",161],["T_WHITESPACE"," ",161],"=",["T_WHITESPACE"," ",161],["T_VARIABLE","$this",161],["T_OBJECT_OPERATOR","->",161],["T_STRING","_integrationService",161],["T_OBJECT_OPERATOR","->",161],["T_STRING","create",161],"(",["T_VARIABLE","$integrationData",161],")",";",["T_WHITESPACE","\n            ",161],"}",["T_WHITESPACE"," ",162],["T_ELSE","else",162],["T_WHITESPACE"," ",162],"{",["T_WHITESPACE","\n                ",162],["T_VARIABLE","$integration",163],["T_WHITESPACE"," ",163],"=",["T_WHITESPACE"," ",163],["T_VARIABLE","$this",163],["T_OBJECT_OPERATOR","->",163],["T_STRING","_integrationService",163],["T_OBJECT_OPERATOR","->",163],["T_STRING","update",163],"(",["T_VARIABLE","$integrationData",163],")",";",["T_WHITESPACE","\n            ",163],"}",["T_WHITESPACE","\n            ",164],["T_IF","if",165],["T_WHITESPACE"," ",165],"(","!",["T_VARIABLE","$this",165],["T_OBJECT_OPERATOR","->",165],["T_STRING","getRequest",165],"(",")",["T_OBJECT_OPERATOR","->",165],["T_STRING","isXmlHttpRequest",165],"(",")",")",["T_WHITESPACE"," ",165],"{",["T_WHITESPACE","\n                ",165],["T_VARIABLE","$this",166],["T_OBJECT_OPERATOR","->",166],["T_STRING","messageManager",166],["T_OBJECT_OPERATOR","->",166],["T_STRING","addSuccess",166],"(",["T_WHITESPACE","\n                    ",166],["T_STRING","__",167],"(",["T_WHITESPACE","\n                        ",167],["T_CONSTANT_ENCAPSED_STRING","'The integration \\'%1\\' has been saved.'",168],",",["T_WHITESPACE","\n                        ",168],["T_VARIABLE","$this",169],["T_OBJECT_OPERATOR","->",169],["T_STRING","escaper",169],["T_OBJECT_OPERATOR","->",169],["T_STRING","escapeHtml",169],"(",["T_VARIABLE","$integration",169],["T_OBJECT_OPERATOR","->",169],["T_STRING","getName",169],"(",")",")",["T_WHITESPACE","\n                    ",169],")",["T_WHITESPACE","\n                ",170],")",";",["T_WHITESPACE","\n                ",171],["T_VARIABLE","$this",172],["T_OBJECT_OPERATOR","->",172],["T_STRING","_redirect",172],"(",["T_CONSTANT_ENCAPSED_STRING","'*\/*\/'",172],")",";",["T_WHITESPACE","\n            ",172],"}",["T_WHITESPACE"," ",173],["T_ELSE","else",173],["T_WHITESPACE"," ",173],"{",["T_WHITESPACE","\n                ",173],["T_VARIABLE","$isTokenExchange",174],["T_WHITESPACE"," ",174],"=",["T_WHITESPACE"," ",174],["T_VARIABLE","$integration",174],["T_OBJECT_OPERATOR","->",174],["T_STRING","getEndpoint",174],"(",")",["T_WHITESPACE"," ",174],["T_BOOLEAN_AND","&&",174],["T_WHITESPACE"," ",174],["T_VARIABLE","$integration",174],["T_OBJECT_OPERATOR","->",174],["T_STRING","getIdentityLinkUrl",174],"(",")",["T_WHITESPACE"," ",174],"?",["T_WHITESPACE"," ",174],["T_CONSTANT_ENCAPSED_STRING","'1'",174],["T_WHITESPACE"," ",174],":",["T_WHITESPACE"," ",174],["T_CONSTANT_ENCAPSED_STRING","'0'",174],";",["T_WHITESPACE","\n                ",174],["T_VARIABLE","$this",175],["T_OBJECT_OPERATOR","->",175],["T_STRING","getResponse",175],"(",")",["T_OBJECT_OPERATOR","->",175],["T_STRING","representJson",175],"(",["T_WHITESPACE","\n                    ",175],["T_VARIABLE","$this",176],["T_OBJECT_OPERATOR","->",176],["T_STRING","jsonHelper",176],["T_OBJECT_OPERATOR","->",176],["T_STRING","jsonEncode",176],"(",["T_WHITESPACE","\n                        ",176],"[",["T_CONSTANT_ENCAPSED_STRING","'integrationId'",177],["T_WHITESPACE"," ",177],["T_DOUBLE_ARROW","=>",177],["T_WHITESPACE"," ",177],["T_VARIABLE","$integration",177],["T_OBJECT_OPERATOR","->",177],["T_STRING","getId",177],"(",")",",",["T_WHITESPACE"," ",177],["T_CONSTANT_ENCAPSED_STRING","'isTokenExchange'",177],["T_WHITESPACE"," ",177],["T_DOUBLE_ARROW","=>",177],["T_WHITESPACE"," ",177],["T_VARIABLE","$isTokenExchange",177],"]",["T_WHITESPACE","\n                    ",177],")",["T_WHITESPACE","\n                ",178],")",";",["T_WHITESPACE","\n            ",179],"}",["T_WHITESPACE","\n        ",180],"}",["T_WHITESPACE"," ",181],["T_ELSE","else",181],["T_WHITESPACE"," ",181],"{",["T_WHITESPACE","\n            ",181],["T_VARIABLE","$this",182],["T_OBJECT_OPERATOR","->",182],["T_STRING","messageManager",182],["T_OBJECT_OPERATOR","->",182],["T_STRING","addError",182],"(",["T_STRING","__",182],"(",["T_CONSTANT_ENCAPSED_STRING","'The integration was not saved.'",182],")",")",";",["T_WHITESPACE","\n        ",182],"}",["T_WHITESPACE","\n    ",183],"}",["T_WHITESPACE","\n",184],"}",["T_WHITESPACE","\n",185]]
[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Copyright \u00c2\u00a9 2013-2017 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n *\/",2],["T_WHITESPACE","\n",5],["T_NAMESPACE","namespace",6],["T_WHITESPACE"," ",6],["T_STRING","Magento",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Integration",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Controller",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Adminhtml",6],";",["T_WHITESPACE","\n\n",6],["T_USE","use",8],["T_WHITESPACE"," ",8],["T_STRING","Magento",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Backend",8],["T_NS_SEPARATOR","\\",8],["T_STRING","App",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Action",8],";",["T_WHITESPACE","\n",8],["T_USE","use",9],["T_WHITESPACE"," ",9],["T_STRING","Magento",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Integration",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Api",9],["T_NS_SEPARATOR","\\",9],["T_STRING","OauthServiceInterface",9],["T_WHITESPACE"," ",9],["T_AS","as",9],["T_WHITESPACE"," ",9],["T_STRING","IntegrationOauthService",9],";",["T_WHITESPACE","\n\n",9],["T_DOC_COMMENT","\/**\n * Controller for integrations management.\n *\n * @SuppressWarnings(PHPMD.CouplingBetweenObjects)\n *\/",11],["T_WHITESPACE","\n",15],["T_ABSTRACT","abstract",16],["T_WHITESPACE"," ",16],["T_CLASS","class",16],["T_WHITESPACE"," ",16],["T_STRING","Integration",16],["T_WHITESPACE"," ",16],["T_EXTENDS","extends",16],["T_WHITESPACE"," ",16],["T_STRING","Action",16],["T_WHITESPACE","\n",16],"{",["T_WHITESPACE","\n    ",17],["T_DOC_COMMENT","\/**\n     * Authorization level of a basic admin session\n     *\n     * @see _isAllowed()\n     *\/",18],["T_WHITESPACE","\n    ",22],["T_CONST","const",23],["T_WHITESPACE"," ",23],["T_STRING","ADMIN_RESOURCE",23],["T_WHITESPACE"," ",23],"=",["T_WHITESPACE"," ",23],["T_CONSTANT_ENCAPSED_STRING","'Magento_Integration::integrations'",23],";",["T_WHITESPACE","\n\n    ",23],["T_DOC_COMMENT","\/** Param Key for extracting integration id from Request *\/",25],["T_WHITESPACE","\n    ",25],["T_CONST","const",26],["T_WHITESPACE"," ",26],["T_STRING","PARAM_INTEGRATION_ID",26],["T_WHITESPACE"," ",26],"=",["T_WHITESPACE"," ",26],["T_CONSTANT_ENCAPSED_STRING","'id'",26],";",["T_WHITESPACE","\n\n    ",26],["T_DOC_COMMENT","\/** Reauthorize flag is used to distinguish activation from reauthorization *\/",28],["T_WHITESPACE","\n    ",28],["T_CONST","const",29],["T_WHITESPACE"," ",29],["T_STRING","PARAM_REAUTHORIZE",29],["T_WHITESPACE"," ",29],"=",["T_WHITESPACE"," ",29],["T_CONSTANT_ENCAPSED_STRING","'reauthorize'",29],";",["T_WHITESPACE","\n\n    ",29],["T_CONST","const",31],["T_WHITESPACE"," ",31],["T_STRING","REGISTRY_KEY_CURRENT_INTEGRATION",31],["T_WHITESPACE"," ",31],"=",["T_WHITESPACE"," ",31],["T_CONSTANT_ENCAPSED_STRING","'current_integration'",31],";",["T_WHITESPACE","\n\n    ",31],["T_DOC_COMMENT","\/** Saved API form data session key *\/",33],["T_WHITESPACE","\n    ",33],["T_CONST","const",34],["T_WHITESPACE"," ",34],["T_STRING","REGISTRY_KEY_CURRENT_RESOURCE",34],["T_WHITESPACE"," ",34],"=",["T_WHITESPACE"," ",34],["T_CONSTANT_ENCAPSED_STRING","'current_resource'",34],";",["T_WHITESPACE","\n\n    ",34],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Framework\\Registry\n     *\/",36],["T_WHITESPACE","\n    ",38],["T_PROTECTED","protected",39],["T_WHITESPACE"," ",39],["T_VARIABLE","$_registry",39],";",["T_WHITESPACE","\n\n    ",39],["T_DOC_COMMENT","\/** @var \\Psr\\Log\\LoggerInterface *\/",41],["T_WHITESPACE","\n    ",41],["T_PROTECTED","protected",42],["T_WHITESPACE"," ",42],["T_VARIABLE","$_logger",42],";",["T_WHITESPACE","\n\n    ",42],["T_DOC_COMMENT","\/** @var \\Magento\\Integration\\Api\\IntegrationServiceInterface *\/",44],["T_WHITESPACE","\n    ",44],["T_PROTECTED","protected",45],["T_WHITESPACE"," ",45],["T_VARIABLE","$_integrationService",45],";",["T_WHITESPACE","\n\n    ",45],["T_DOC_COMMENT","\/** @var \\Magento\\Integration\\Api\\OauthServiceInterface *\/",47],["T_WHITESPACE","\n    ",47],["T_PROTECTED","protected",48],["T_WHITESPACE"," ",48],["T_VARIABLE","$_oauthService",48],";",["T_WHITESPACE","\n\n    ",48],["T_DOC_COMMENT","\/** @var \\Magento\\Framework\\Json\\Helper\\Data *\/",50],["T_WHITESPACE","\n    ",50],["T_PROTECTED","protected",51],["T_WHITESPACE"," ",51],["T_VARIABLE","$jsonHelper",51],";",["T_WHITESPACE","\n\n    ",51],["T_DOC_COMMENT","\/** @var \\Magento\\Integration\\Helper\\Data *\/",53],["T_WHITESPACE","\n    ",53],["T_PROTECTED","protected",54],["T_WHITESPACE"," ",54],["T_VARIABLE","$_integrationData",54],";",["T_WHITESPACE","\n\n    ",54],["T_DOC_COMMENT","\/** @var \\Magento\\Integration\\Model\\ResourceModel\\Integration\\Collection *\/",56],["T_WHITESPACE","\n    ",56],["T_PROTECTED","protected",57],["T_WHITESPACE"," ",57],["T_VARIABLE","$_integrationCollection",57],";",["T_WHITESPACE","\n\n    ",57],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Framework\\Escaper\n     *\/",59],["T_WHITESPACE","\n    ",61],["T_PROTECTED","protected",62],["T_WHITESPACE"," ",62],["T_VARIABLE","$escaper",62],";",["T_WHITESPACE","\n\n    ",62],["T_DOC_COMMENT","\/**\n     * @param \\Magento\\Backend\\App\\Action\\Context $context\n     * @param \\Magento\\Framework\\Registry $registry\n     * @param \\Psr\\Log\\LoggerInterface $logger\n     * @param \\Magento\\Integration\\Api\\IntegrationServiceInterface $integrationService\n     * @param \\Magento\\Integration\\Api\\OauthServiceInterface $oauthService\n     * @param \\Magento\\Framework\\Json\\Helper\\Data $jsonHelper\n     * @param \\Magento\\Integration\\Helper\\Data $integrationData\n     * @param \\Magento\\Framework\\Escaper $escaper\n     * @param \\Magento\\Integration\\Model\\ResourceModel\\Integration\\Collection $integrationCollection\n     *\/",64],["T_WHITESPACE","\n    ",74],["T_PUBLIC","public",75],["T_WHITESPACE"," ",75],["T_FUNCTION","function",75],["T_WHITESPACE"," ",75],["T_STRING","__construct",75],"(",["T_WHITESPACE","\n        ",75],["T_NS_SEPARATOR","\\",76],["T_STRING","Magento",76],["T_NS_SEPARATOR","\\",76],["T_STRING","Backend",76],["T_NS_SEPARATOR","\\",76],["T_STRING","App",76],["T_NS_SEPARATOR","\\",76],["T_STRING","Action",76],["T_NS_SEPARATOR","\\",76],["T_STRING","Context",76],["T_WHITESPACE"," ",76],["T_VARIABLE","$context",76],",",["T_WHITESPACE","\n        ",76],["T_NS_SEPARATOR","\\",77],["T_STRING","Magento",77],["T_NS_SEPARATOR","\\",77],["T_STRING","Framework",77],["T_NS_SEPARATOR","\\",77],["T_STRING","Registry",77],["T_WHITESPACE"," ",77],["T_VARIABLE","$registry",77],",",["T_WHITESPACE","\n        ",77],["T_NS_SEPARATOR","\\",78],["T_STRING","Psr",78],["T_NS_SEPARATOR","\\",78],["T_STRING","Log",78],["T_NS_SEPARATOR","\\",78],["T_STRING","LoggerInterface",78],["T_WHITESPACE"," ",78],["T_VARIABLE","$logger",78],",",["T_WHITESPACE","\n        ",78],["T_NS_SEPARATOR","\\",79],["T_STRING","Magento",79],["T_NS_SEPARATOR","\\",79],["T_STRING","Integration",79],["T_NS_SEPARATOR","\\",79],["T_STRING","Api",79],["T_NS_SEPARATOR","\\",79],["T_STRING","IntegrationServiceInterface",79],["T_WHITESPACE"," ",79],["T_VARIABLE","$integrationService",79],",",["T_WHITESPACE","\n        ",79],["T_NS_SEPARATOR","\\",80],["T_STRING","Magento",80],["T_NS_SEPARATOR","\\",80],["T_STRING","Integration",80],["T_NS_SEPARATOR","\\",80],["T_STRING","Api",80],["T_NS_SEPARATOR","\\",80],["T_STRING","OauthServiceInterface",80],["T_WHITESPACE"," ",80],["T_VARIABLE","$oauthService",80],",",["T_WHITESPACE","\n        ",80],["T_NS_SEPARATOR","\\",81],["T_STRING","Magento",81],["T_NS_SEPARATOR","\\",81],["T_STRING","Framework",81],["T_NS_SEPARATOR","\\",81],["T_STRING","Json",81],["T_NS_SEPARATOR","\\",81],["T_STRING","Helper",81],["T_NS_SEPARATOR","\\",81],["T_STRING","Data",81],["T_WHITESPACE"," ",81],["T_VARIABLE","$jsonHelper",81],",",["T_WHITESPACE","\n        ",81],["T_NS_SEPARATOR","\\",82],["T_STRING","Magento",82],["T_NS_SEPARATOR","\\",82],["T_STRING","Integration",82],["T_NS_SEPARATOR","\\",82],["T_STRING","Helper",82],["T_NS_SEPARATOR","\\",82],["T_STRING","Data",82],["T_WHITESPACE"," ",82],["T_VARIABLE","$integrationData",82],",",["T_WHITESPACE","\n        ",82],["T_NS_SEPARATOR","\\",83],["T_STRING","Magento",83],["T_NS_SEPARATOR","\\",83],["T_STRING","Framework",83],["T_NS_SEPARATOR","\\",83],["T_STRING","Escaper",83],["T_WHITESPACE"," ",83],["T_VARIABLE","$escaper",83],",",["T_WHITESPACE","\n        ",83],["T_NS_SEPARATOR","\\",84],["T_STRING","Magento",84],["T_NS_SEPARATOR","\\",84],["T_STRING","Integration",84],["T_NS_SEPARATOR","\\",84],["T_STRING","Model",84],["T_NS_SEPARATOR","\\",84],["T_STRING","ResourceModel",84],["T_NS_SEPARATOR","\\",84],["T_STRING","Integration",84],["T_NS_SEPARATOR","\\",84],["T_STRING","Collection",84],["T_WHITESPACE"," ",84],["T_VARIABLE","$integrationCollection",84],["T_WHITESPACE","\n    ",84],")",["T_WHITESPACE"," ",85],"{",["T_WHITESPACE","\n        ",85],["T_STRING","parent",86],["T_DOUBLE_COLON","::",86],["T_STRING","__construct",86],"(",["T_VARIABLE","$context",86],")",";",["T_WHITESPACE","\n        ",86],["T_VARIABLE","$this",87],["T_OBJECT_OPERATOR","->",87],["T_STRING","_registry",87],["T_WHITESPACE"," ",87],"=",["T_WHITESPACE"," ",87],["T_VARIABLE","$registry",87],";",["T_WHITESPACE","\n        ",87],["T_VARIABLE","$this",88],["T_OBJECT_OPERATOR","->",88],["T_STRING","_logger",88],["T_WHITESPACE"," ",88],"=",["T_WHITESPACE"," ",88],["T_VARIABLE","$logger",88],";",["T_WHITESPACE","\n        ",88],["T_VARIABLE","$this",89],["T_OBJECT_OPERATOR","->",89],["T_STRING","_integrationService",89],["T_WHITESPACE"," ",89],"=",["T_WHITESPACE"," ",89],["T_VARIABLE","$integrationService",89],";",["T_WHITESPACE","\n        ",89],["T_VARIABLE","$this",90],["T_OBJECT_OPERATOR","->",90],["T_STRING","_oauthService",90],["T_WHITESPACE"," ",90],"=",["T_WHITESPACE"," ",90],["T_VARIABLE","$oauthService",90],";",["T_WHITESPACE","\n        ",90],["T_VARIABLE","$this",91],["T_OBJECT_OPERATOR","->",91],["T_STRING","jsonHelper",91],["T_WHITESPACE"," ",91],"=",["T_WHITESPACE"," ",91],["T_VARIABLE","$jsonHelper",91],";",["T_WHITESPACE","\n        ",91],["T_VARIABLE","$this",92],["T_OBJECT_OPERATOR","->",92],["T_STRING","_integrationData",92],["T_WHITESPACE"," ",92],"=",["T_WHITESPACE"," ",92],["T_VARIABLE","$integrationData",92],";",["T_WHITESPACE","\n        ",92],["T_VARIABLE","$this",93],["T_OBJECT_OPERATOR","->",93],["T_STRING","escaper",93],["T_WHITESPACE"," ",93],"=",["T_WHITESPACE"," ",93],["T_VARIABLE","$escaper",93],";",["T_WHITESPACE","\n        ",93],["T_VARIABLE","$this",94],["T_OBJECT_OPERATOR","->",94],["T_STRING","_integrationCollection",94],["T_WHITESPACE"," ",94],"=",["T_WHITESPACE"," ",94],["T_VARIABLE","$integrationCollection",94],";",["T_WHITESPACE","\n        ",94],["T_STRING","parent",95],["T_DOUBLE_COLON","::",95],["T_STRING","__construct",95],"(",["T_VARIABLE","$context",95],")",";",["T_WHITESPACE","\n    ",95],"}",["T_WHITESPACE","\n\n    ",96],["T_DOC_COMMENT","\/**\n     * Don't actually redirect if we've got AJAX request - return redirect URL instead.\n     *\n     * @param string $path\n     * @param array $arguments\n     * @return $this|\\Magento\\Backend\\App\\AbstractAction\n     *\/",98],["T_WHITESPACE","\n    ",104],["T_PROTECTED","protected",105],["T_WHITESPACE"," ",105],["T_FUNCTION","function",105],["T_WHITESPACE"," ",105],["T_STRING","_redirect",105],"(",["T_VARIABLE","$path",105],",",["T_WHITESPACE"," ",105],["T_VARIABLE","$arguments",105],["T_WHITESPACE"," ",105],"=",["T_WHITESPACE"," ",105],"[","]",")",["T_WHITESPACE","\n    ",105],"{",["T_WHITESPACE","\n        ",106],["T_IF","if",107],["T_WHITESPACE"," ",107],"(",["T_VARIABLE","$this",107],["T_OBJECT_OPERATOR","->",107],["T_STRING","getRequest",107],"(",")",["T_OBJECT_OPERATOR","->",107],["T_STRING","isXmlHttpRequest",107],"(",")",")",["T_WHITESPACE"," ",107],"{",["T_WHITESPACE","\n            ",107],["T_VARIABLE","$this",108],["T_OBJECT_OPERATOR","->",108],["T_STRING","getResponse",108],"(",")",["T_OBJECT_OPERATOR","->",108],["T_STRING","representJson",108],"(",["T_WHITESPACE","\n                ",108],["T_VARIABLE","$this",109],["T_OBJECT_OPERATOR","->",109],["T_STRING","jsonHelper",109],["T_OBJECT_OPERATOR","->",109],["T_STRING","jsonEncode",109],"(","[",["T_CONSTANT_ENCAPSED_STRING","'_redirect'",109],["T_WHITESPACE"," ",109],["T_DOUBLE_ARROW","=>",109],["T_WHITESPACE"," ",109],["T_VARIABLE","$this",109],["T_OBJECT_OPERATOR","->",109],["T_STRING","getUrl",109],"(",["T_VARIABLE","$path",109],",",["T_WHITESPACE"," ",109],["T_VARIABLE","$arguments",109],")","]",")",["T_WHITESPACE","\n            ",109],")",";",["T_WHITESPACE","\n            ",110],["T_RETURN","return",111],["T_WHITESPACE"," ",111],["T_VARIABLE","$this",111],";",["T_WHITESPACE","\n        ",111],"}",["T_WHITESPACE"," ",112],["T_ELSE","else",112],["T_WHITESPACE"," ",112],"{",["T_WHITESPACE","\n            ",112],["T_RETURN","return",113],["T_WHITESPACE"," ",113],["T_STRING","parent",113],["T_DOUBLE_COLON","::",113],["T_STRING","_redirect",113],"(",["T_VARIABLE","$path",113],",",["T_WHITESPACE"," ",113],["T_VARIABLE","$arguments",113],")",";",["T_WHITESPACE","\n        ",113],"}",["T_WHITESPACE","\n    ",114],"}",["T_WHITESPACE","\n\n    ",115],["T_DOC_COMMENT","\/**\n     * Restore saved form resources\n     *\n     * @return void\n     *\/",117],["T_WHITESPACE","\n    ",121],["T_PROTECTED","protected",122],["T_WHITESPACE"," ",122],["T_FUNCTION","function",122],["T_WHITESPACE"," ",122],["T_STRING","restoreResourceAndSaveToRegistry",122],"(",")",["T_WHITESPACE","\n    ",122],"{",["T_WHITESPACE","\n        ",123],["T_VARIABLE","$restoredFormData",124],["T_WHITESPACE"," ",124],"=",["T_WHITESPACE"," ",124],["T_VARIABLE","$this",124],["T_OBJECT_OPERATOR","->",124],["T_STRING","_getSession",124],"(",")",["T_OBJECT_OPERATOR","->",124],["T_STRING","getIntegrationData",124],"(",")",";",["T_WHITESPACE","\n        ",124],["T_IF","if",125],["T_WHITESPACE"," ",125],"(",["T_VARIABLE","$restoredFormData",125],")",["T_WHITESPACE"," ",125],"{",["T_WHITESPACE","\n            ",125],["T_VARIABLE","$resource",126],["T_WHITESPACE"," ",126],"=",["T_WHITESPACE"," ",126],["T_ISSET","isset",126],"(",["T_VARIABLE","$restoredFormData",126],"[",["T_CONSTANT_ENCAPSED_STRING","'resource'",126],"]",")",["T_WHITESPACE"," ",126],"?",["T_WHITESPACE"," ",126],["T_VARIABLE","$restoredFormData",126],"[",["T_CONSTANT_ENCAPSED_STRING","'resource'",126],"]",["T_WHITESPACE"," ",126],":",["T_WHITESPACE"," ",126],"[","]",";",["T_WHITESPACE","\n            ",126],["T_VARIABLE","$this",127],["T_OBJECT_OPERATOR","->",127],["T_STRING","_registry",127],["T_OBJECT_OPERATOR","->",127],["T_STRING","register",127],"(",["T_WHITESPACE","\n                ",127],["T_STRING","self",128],["T_DOUBLE_COLON","::",128],["T_STRING","REGISTRY_KEY_CURRENT_RESOURCE",128],",",["T_WHITESPACE","\n                ",128],"[",["T_CONSTANT_ENCAPSED_STRING","'all_resources'",129],["T_WHITESPACE"," ",129],["T_DOUBLE_ARROW","=>",129],["T_WHITESPACE"," ",129],["T_VARIABLE","$restoredFormData",129],"[",["T_CONSTANT_ENCAPSED_STRING","'all_resources'",129],"]",",",["T_WHITESPACE"," ",129],["T_CONSTANT_ENCAPSED_STRING","'resource'",129],["T_WHITESPACE"," ",129],["T_DOUBLE_ARROW","=>",129],["T_WHITESPACE"," ",129],["T_VARIABLE","$resource",129],"]",["T_WHITESPACE","\n            ",129],")",";",["T_WHITESPACE","\n        ",130],"}",["T_WHITESPACE","\n    ",131],"}",["T_WHITESPACE","\n",132],"}",["T_WHITESPACE","\n",133]]
[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Copyright \u00c2\u00a9 2013-2017 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n *\/",2],["T_WHITESPACE","\n\n",5],["T_NAMESPACE","namespace",7],["T_WHITESPACE"," ",7],["T_STRING","Magento",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Integration",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Test",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Unit",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Model",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Oauth",7],";",["T_WHITESPACE","\n\n",7],["T_USE","use",9],["T_WHITESPACE"," ",9],["T_STRING","Magento",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Integration",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Model",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Oauth",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Consumer",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Validator",9],["T_NS_SEPARATOR","\\",9],["T_STRING","KeyLengthFactory",9],";",["T_WHITESPACE","\n",9],["T_USE","use",10],["T_WHITESPACE"," ",10],["T_STRING","Magento",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Integration",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Model",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Oauth",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Token",10],";",["T_WHITESPACE","\n",10],["T_USE","use",11],["T_WHITESPACE"," ",11],["T_STRING","Magento",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Framework",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Oauth",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Helper",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Oauth",11],["T_WHITESPACE"," ",11],["T_AS","as",11],["T_WHITESPACE"," ",11],["T_STRING","OauthHelper",11],";",["T_WHITESPACE","\n",11],["T_USE","use",12],["T_WHITESPACE"," ",12],["T_STRING","Magento",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Authorization",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Model",12],["T_NS_SEPARATOR","\\",12],["T_STRING","UserContextInterface",12],";",["T_WHITESPACE","\n",12],["T_USE","use",13],["T_WHITESPACE"," ",13],["T_STRING","Magento",13],["T_NS_SEPARATOR","\\",13],["T_STRING","Framework",13],["T_NS_SEPARATOR","\\",13],["T_STRING","TestFramework",13],["T_NS_SEPARATOR","\\",13],["T_STRING","Unit",13],["T_NS_SEPARATOR","\\",13],["T_STRING","Matcher",13],["T_NS_SEPARATOR","\\",13],["T_STRING","MethodInvokedAtIndex",13],";",["T_WHITESPACE","\n\n",13],["T_DOC_COMMENT","\/**\n * Unit test for \\Magento\\Integration\\Model\\Oauth\\Nonce\n * @SuppressWarnings(PHPMD.CouplingBetweenObjects)\n *\/",15],["T_WHITESPACE","\n",18],["T_CLASS","class",19],["T_WHITESPACE"," ",19],["T_STRING","TokenTest",19],["T_WHITESPACE"," ",19],["T_EXTENDS","extends",19],["T_WHITESPACE"," ",19],["T_NS_SEPARATOR","\\",19],["T_STRING","PHPUnit_Framework_TestCase",19],["T_WHITESPACE","\n",19],"{",["T_WHITESPACE","\n    ",20],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Integration\\Model\\Oauth\\Token\n     *\/",21],["T_WHITESPACE","\n    ",23],["T_PROTECTED","protected",24],["T_WHITESPACE"," ",24],["T_VARIABLE","$tokenModel",24],";",["T_WHITESPACE","\n\n    ",24],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Framework\\Model\\Context|\\PHPUnit_Framework_MockObject_MockObject\n     *\/",26],["T_WHITESPACE","\n    ",28],["T_PROTECTED","protected",29],["T_WHITESPACE"," ",29],["T_VARIABLE","$contextMock",29],";",["T_WHITESPACE","\n\n    ",29],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Framework\\Registry|\\PHPUnit_Framework_MockObject_MockObject\n     *\/",31],["T_WHITESPACE","\n    ",33],["T_PROTECTED","protected",34],["T_WHITESPACE"," ",34],["T_VARIABLE","$registryMock",34],";",["T_WHITESPACE","\n\n    ",34],["T_DOC_COMMENT","\/**\n     * @var KeyLengthFactory|\\PHPUnit_Framework_MockObject_MockObject\n     *\/",36],["T_WHITESPACE","\n    ",38],["T_PROTECTED","protected",39],["T_WHITESPACE"," ",39],["T_VARIABLE","$keyLengthFactoryMock",39],";",["T_WHITESPACE","\n\n    ",39],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Integration\\Model\\Oauth\\Consumer\\Validator\\KeyLength|\\PHPUnit_Framework_MockObject_MockObject\n     *\/",41],["T_WHITESPACE","\n    ",43],["T_PROTECTED","protected",44],["T_WHITESPACE"," ",44],["T_VARIABLE","$validatorKeyLengthMock",44],";",["T_WHITESPACE","\n\n    ",44],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Framework\\Url\\Validator|\\PHPUnit_Framework_MockObject_MockObject\n     *\/",46],["T_WHITESPACE","\n    ",48],["T_PROTECTED","protected",49],["T_WHITESPACE"," ",49],["T_VARIABLE","$validatorMock",49],";",["T_WHITESPACE","\n\n    ",49],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Integration\\Model\\Oauth\\ConsumerFactory|\\PHPUnit_Framework_MockObject_MockObject\n     *\/",51],["T_WHITESPACE","\n    ",53],["T_PROTECTED","protected",54],["T_WHITESPACE"," ",54],["T_VARIABLE","$consumerFactoryMock",54],";",["T_WHITESPACE","\n\n    ",54],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Integration\\Helper\\Oauth\\Data|\\PHPUnit_Framework_MockObject_MockObject\n     *\/",56],["T_WHITESPACE","\n    ",58],["T_PROTECTED","protected",59],["T_WHITESPACE"," ",59],["T_VARIABLE","$oauthDataMock",59],";",["T_WHITESPACE","\n\n    ",59],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Framework\\Oauth\\Helper\\Oauth|\\PHPUnit_Framework_MockObject_MockObject\n     *\/",61],["T_WHITESPACE","\n    ",63],["T_PROTECTED","protected",64],["T_WHITESPACE"," ",64],["T_VARIABLE","$oauthHelperMock",64],";",["T_WHITESPACE","\n\n    ",64],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Framework\\Model\\ResourceModel\\AbstractResource|\\PHPUnit_Framework_MockObject_MockObject\n     *\/",66],["T_WHITESPACE","\n    ",68],["T_PROTECTED","protected",69],["T_WHITESPACE"," ",69],["T_VARIABLE","$resourceMock",69],";",["T_WHITESPACE","\n\n    ",69],["T_PROTECTED","protected",71],["T_WHITESPACE"," ",71],["T_FUNCTION","function",71],["T_WHITESPACE"," ",71],["T_STRING","setUp",71],"(",")",["T_WHITESPACE","\n    ",71],"{",["T_WHITESPACE","\n        ",72],["T_VARIABLE","$this",73],["T_OBJECT_OPERATOR","->",73],["T_STRING","contextMock",73],["T_WHITESPACE"," ",73],"=",["T_WHITESPACE"," ",73],["T_VARIABLE","$this",73],["T_OBJECT_OPERATOR","->",73],["T_STRING","getMockBuilder",73],"(",["T_NS_SEPARATOR","\\",73],["T_STRING","Magento",73],["T_NS_SEPARATOR","\\",73],["T_STRING","Framework",73],["T_NS_SEPARATOR","\\",73],["T_STRING","Model",73],["T_NS_SEPARATOR","\\",73],["T_STRING","Context",73],["T_DOUBLE_COLON","::",73],["T_CLASS","class",73],")",["T_WHITESPACE","\n            ",73],["T_OBJECT_OPERATOR","->",74],["T_STRING","setMethods",74],"(","[",["T_CONSTANT_ENCAPSED_STRING","'getEventDispatcher'",74],"]",")",["T_WHITESPACE","\n            ",74],["T_OBJECT_OPERATOR","->",75],["T_STRING","disableOriginalConstructor",75],"(",")",["T_WHITESPACE","\n            ",75],["T_OBJECT_OPERATOR","->",76],["T_STRING","getMock",76],"(",")",";",["T_WHITESPACE","\n\n        ",76],["T_VARIABLE","$this",78],["T_OBJECT_OPERATOR","->",78],["T_STRING","registryMock",78],["T_WHITESPACE"," ",78],"=",["T_WHITESPACE"," ",78],["T_VARIABLE","$this",78],["T_OBJECT_OPERATOR","->",78],["T_STRING","getMockBuilder",78],"(",["T_NS_SEPARATOR","\\",78],["T_STRING","Magento",78],["T_NS_SEPARATOR","\\",78],["T_STRING","Framework",78],["T_NS_SEPARATOR","\\",78],["T_STRING","Registry",78],["T_DOUBLE_COLON","::",78],["T_CLASS","class",78],")",["T_WHITESPACE","\n            ",78],["T_OBJECT_OPERATOR","->",79],["T_STRING","disableOriginalConstructor",79],"(",")",["T_WHITESPACE","\n            ",79],["T_OBJECT_OPERATOR","->",80],["T_STRING","getMock",80],"(",")",";",["T_WHITESPACE","\n\n        ",80],["T_VARIABLE","$this",82],["T_OBJECT_OPERATOR","->",82],["T_STRING","validatorKeyLengthMock",82],["T_WHITESPACE"," ",82],"=",["T_WHITESPACE"," ",82],["T_VARIABLE","$this",82],["T_OBJECT_OPERATOR","->",82],["T_STRING","getMockBuilder",82],"(",["T_WHITESPACE","\n            ",82],["T_NS_SEPARATOR","\\",83],["T_STRING","Magento",83],["T_NS_SEPARATOR","\\",83],["T_STRING","Integration",83],["T_NS_SEPARATOR","\\",83],["T_STRING","Model",83],["T_NS_SEPARATOR","\\",83],["T_STRING","Oauth",83],["T_NS_SEPARATOR","\\",83],["T_STRING","Consumer",83],["T_NS_SEPARATOR","\\",83],["T_STRING","Validator",83],["T_NS_SEPARATOR","\\",83],["T_STRING","KeyLength",83],["T_DOUBLE_COLON","::",83],["T_CLASS","class",83],["T_WHITESPACE","\n        ",83],")",["T_WHITESPACE","\n            ",84],["T_OBJECT_OPERATOR","->",85],["T_STRING","setMethods",85],"(","[",["T_CONSTANT_ENCAPSED_STRING","'isValid'",85],",",["T_WHITESPACE"," ",85],["T_CONSTANT_ENCAPSED_STRING","'setLength'",85],",",["T_WHITESPACE"," ",85],["T_CONSTANT_ENCAPSED_STRING","'setName'",85],",",["T_WHITESPACE"," ",85],["T_CONSTANT_ENCAPSED_STRING","'getMessages'",85],"]",")",["T_WHITESPACE","\n            ",85],["T_OBJECT_OPERATOR","->",86],["T_STRING","disableOriginalConstructor",86],"(",")",["T_WHITESPACE","\n            ",86],["T_OBJECT_OPERATOR","->",87],["T_STRING","getMock",87],"(",")",";",["T_WHITESPACE","\n\n        ",87],["T_VARIABLE","$this",89],["T_OBJECT_OPERATOR","->",89],["T_STRING","keyLengthFactoryMock",89],["T_WHITESPACE"," ",89],"=",["T_WHITESPACE"," ",89],["T_VARIABLE","$this",89],["T_OBJECT_OPERATOR","->",89],["T_STRING","getMockBuilder",89],"(",["T_WHITESPACE","\n            ",89],["T_NS_SEPARATOR","\\",90],["T_STRING","Magento",90],["T_NS_SEPARATOR","\\",90],["T_STRING","Integration",90],["T_NS_SEPARATOR","\\",90],["T_STRING","Model",90],["T_NS_SEPARATOR","\\",90],["T_STRING","Oauth",90],["T_NS_SEPARATOR","\\",90],["T_STRING","Consumer",90],["T_NS_SEPARATOR","\\",90],["T_STRING","Validator",90],["T_NS_SEPARATOR","\\",90],["T_STRING","KeyLengthFactory",90],["T_DOUBLE_COLON","::",90],["T_CLASS","class",90],["T_WHITESPACE","\n        ",90],")",["T_WHITESPACE","\n            ",91],["T_OBJECT_OPERATOR","->",92],["T_STRING","setMethods",92],"(","[",["T_CONSTANT_ENCAPSED_STRING","'create'",92],"]",")",["T_WHITESPACE","\n            ",92],["T_OBJECT_OPERATOR","->",93],["T_STRING","disableOriginalConstructor",93],"(",")",["T_WHITESPACE","\n            ",93],["T_OBJECT_OPERATOR","->",94],["T_STRING","getMock",94],"(",")",";",["T_WHITESPACE","\n\n        ",94],["T_VARIABLE","$this",96],["T_OBJECT_OPERATOR","->",96],["T_STRING","validatorMock",96],["T_WHITESPACE"," ",96],"=",["T_WHITESPACE"," ",96],["T_VARIABLE","$this",96],["T_OBJECT_OPERATOR","->",96],["T_STRING","getMockBuilder",96],"(",["T_NS_SEPARATOR","\\",96],["T_STRING","Magento",96],["T_NS_SEPARATOR","\\",96],["T_STRING","Framework",96],["T_NS_SEPARATOR","\\",96],["T_STRING","Url",96],["T_NS_SEPARATOR","\\",96],["T_STRING","Validator",96],["T_DOUBLE_COLON","::",96],["T_CLASS","class",96],")",["T_WHITESPACE","\n            ",96],["T_OBJECT_OPERATOR","->",97],["T_STRING","disableOriginalConstructor",97],"(",")",["T_WHITESPACE","\n            ",97],["T_OBJECT_OPERATOR","->",98],["T_STRING","getMock",98],"(",")",";",["T_WHITESPACE","\n\n        ",98],["T_VARIABLE","$this",100],["T_OBJECT_OPERATOR","->",100],["T_STRING","consumerFactoryMock",100],["T_WHITESPACE"," ",100],"=",["T_WHITESPACE"," ",100],["T_VARIABLE","$this",100],["T_OBJECT_OPERATOR","->",100],["T_STRING","getMockBuilder",100],"(",["T_NS_SEPARATOR","\\",100],["T_STRING","Magento",100],["T_NS_SEPARATOR","\\",100],["T_STRING","Integration",100],["T_NS_SEPARATOR","\\",100],["T_STRING","Model",100],["T_NS_SEPARATOR","\\",100],["T_STRING","Oauth",100],["T_NS_SEPARATOR","\\",100],["T_STRING","ConsumerFactory",100],["T_DOUBLE_COLON","::",100],["T_CLASS","class",100],")",["T_WHITESPACE","\n            ",100],["T_OBJECT_OPERATOR","->",101],["T_STRING","setMethods",101],"(","[",["T_CONSTANT_ENCAPSED_STRING","'create'",101],"]",")",["T_WHITESPACE","\n            ",101],["T_OBJECT_OPERATOR","->",102],["T_STRING","disableOriginalConstructor",102],"(",")",["T_WHITESPACE","\n            ",102],["T_OBJECT_OPERATOR","->",103],["T_STRING","getMock",103],"(",")",";",["T_WHITESPACE","\n\n        ",103],["T_VARIABLE","$this",105],["T_OBJECT_OPERATOR","->",105],["T_STRING","oauthDataMock",105],["T_WHITESPACE"," ",105],"=",["T_WHITESPACE"," ",105],["T_VARIABLE","$this",105],["T_OBJECT_OPERATOR","->",105],["T_STRING","getMockBuilder",105],"(",["T_NS_SEPARATOR","\\",105],["T_STRING","Magento",105],["T_NS_SEPARATOR","\\",105],["T_STRING","Integration",105],["T_NS_SEPARATOR","\\",105],["T_STRING","Helper",105],["T_NS_SEPARATOR","\\",105],["T_STRING","Oauth",105],["T_NS_SEPARATOR","\\",105],["T_STRING","Data",105],["T_DOUBLE_COLON","::",105],["T_CLASS","class",105],")",["T_WHITESPACE","\n            ",105],["T_OBJECT_OPERATOR","->",106],["T_STRING","setMethods",106],"(","[",["T_CONSTANT_ENCAPSED_STRING","'isCleanupProbability'",106],",",["T_WHITESPACE"," ",106],["T_CONSTANT_ENCAPSED_STRING","'getCleanupExpirationPeriod'",106],"]",")",["T_WHITESPACE","\n            ",106],["T_OBJECT_OPERATOR","->",107],["T_STRING","disableOriginalConstructor",107],"(",")",["T_WHITESPACE","\n            ",107],["T_OBJECT_OPERATOR","->",108],["T_STRING","getMock",108],"(",")",";",["T_WHITESPACE","\n\n        ",108],["T_VARIABLE","$this",110],["T_OBJECT_OPERATOR","->",110],["T_STRING","oauthHelperMock",110],["T_WHITESPACE"," ",110],"=",["T_WHITESPACE"," ",110],["T_VARIABLE","$this",110],["T_OBJECT_OPERATOR","->",110],["T_STRING","getMockBuilder",110],"(",["T_NS_SEPARATOR","\\",110],["T_STRING","Magento",110],["T_NS_SEPARATOR","\\",110],["T_STRING","Framework",110],["T_NS_SEPARATOR","\\",110],["T_STRING","Oauth",110],["T_NS_SEPARATOR","\\",110],["T_STRING","Helper",110],["T_NS_SEPARATOR","\\",110],["T_STRING","Oauth",110],["T_DOUBLE_COLON","::",110],["T_CLASS","class",110],")",["T_WHITESPACE","\n            ",110],["T_OBJECT_OPERATOR","->",111],["T_STRING","disableOriginalConstructor",111],"(",")",["T_WHITESPACE","\n            ",111],["T_OBJECT_OPERATOR","->",112],["T_STRING","getMock",112],"(",")",";",["T_WHITESPACE","\n\n        ",112],["T_VARIABLE","$this",114],["T_OBJECT_OPERATOR","->",114],["T_STRING","resourceMock",114],["T_WHITESPACE"," ",114],"=",["T_WHITESPACE"," ",114],["T_VARIABLE","$this",114],["T_OBJECT_OPERATOR","->",114],["T_STRING","getMockBuilder",114],"(",["T_NS_SEPARATOR","\\",114],["T_STRING","Magento",114],["T_NS_SEPARATOR","\\",114],["T_STRING","Framework",114],["T_NS_SEPARATOR","\\",114],["T_STRING","Model",114],["T_NS_SEPARATOR","\\",114],["T_STRING","ResourceModel",114],["T_NS_SEPARATOR","\\",114],["T_STRING","AbstractResource",114],["T_DOUBLE_COLON","::",114],["T_CLASS","class",114],")",["T_WHITESPACE","\n            ",114],["T_OBJECT_OPERATOR","->",115],["T_STRING","setMethods",115],"(",["T_WHITESPACE","\n                ",115],"[",["T_WHITESPACE","\n                    ",116],["T_CONSTANT_ENCAPSED_STRING","'getIdFieldName'",117],",",["T_WHITESPACE","\n                    ",117],["T_CONSTANT_ENCAPSED_STRING","'deleteOldEntries'",118],",",["T_WHITESPACE","\n                    ",118],["T_CONSTANT_ENCAPSED_STRING","'_construct'",119],",",["T_WHITESPACE","\n                    ",119],["T_CONSTANT_ENCAPSED_STRING","'getConnection'",120],",",["T_WHITESPACE","\n                    ",120],["T_CONSTANT_ENCAPSED_STRING","'selectTokenByType'",121],",",["T_WHITESPACE","\n                    ",121],["T_CONSTANT_ENCAPSED_STRING","'save'",122],",",["T_WHITESPACE","\n                    ",122],["T_CONSTANT_ENCAPSED_STRING","'selectTokenByConsumerIdAndUserType'",123],",",["T_WHITESPACE","\n                    ",123],["T_CONSTANT_ENCAPSED_STRING","'selectTokenByAdminId'",124],",",["T_WHITESPACE","\n                    ",124],["T_CONSTANT_ENCAPSED_STRING","'selectTokenByCustomerId'",125],",",["T_WHITESPACE","\n                    ",125],["T_CONSTANT_ENCAPSED_STRING","'load'",126],["T_WHITESPACE","\n                ",126],"]",["T_WHITESPACE","\n            ",127],")",["T_WHITESPACE","\n            ",128],["T_OBJECT_OPERATOR","->",129],["T_STRING","disableOriginalConstructor",129],"(",")",["T_WHITESPACE","\n            ",129],["T_OBJECT_OPERATOR","->",130],["T_STRING","getMockForAbstractClass",130],"(",")",";",["T_WHITESPACE","\n\n        ",130],["T_VARIABLE","$this",132],["T_OBJECT_OPERATOR","->",132],["T_STRING","resourceMock",132],["T_OBJECT_OPERATOR","->",132],["T_STRING","expects",132],"(",["T_VARIABLE","$this",132],["T_OBJECT_OPERATOR","->",132],["T_STRING","any",132],"(",")",")",["T_WHITESPACE","\n            ",132],["T_OBJECT_OPERATOR","->",133],["T_STRING","method",133],"(",["T_CONSTANT_ENCAPSED_STRING","'getIdFieldName'",133],")",["T_WHITESPACE","\n            ",133],["T_OBJECT_OPERATOR","->",134],["T_STRING","willReturn",134],"(",["T_CONSTANT_ENCAPSED_STRING","'id'",134],")",";",["T_WHITESPACE","\n\n        ",134],["T_VARIABLE","$eventManagerMock",136],["T_WHITESPACE"," ",136],"=",["T_WHITESPACE"," ",136],["T_VARIABLE","$this",136],["T_OBJECT_OPERATOR","->",136],["T_STRING","getMockBuilder",136],"(",["T_NS_SEPARATOR","\\",136],["T_STRING","Magento",136],["T_NS_SEPARATOR","\\",136],["T_STRING","Framework",136],["T_NS_SEPARATOR","\\",136],["T_STRING","Event",136],["T_NS_SEPARATOR","\\",136],["T_STRING","ManagerInterface",136],["T_DOUBLE_COLON","::",136],["T_CLASS","class",136],")",["T_WHITESPACE","\n            ",136],["T_OBJECT_OPERATOR","->",137],["T_STRING","setMethods",137],"(","[",["T_CONSTANT_ENCAPSED_STRING","'dispatch'",137],"]",")",["T_WHITESPACE","\n            ",137],["T_OBJECT_OPERATOR","->",138],["T_STRING","disableOriginalConstructor",138],"(",")",["T_WHITESPACE","\n            ",138],["T_OBJECT_OPERATOR","->",139],["T_STRING","getMock",139],"(",")",";",["T_WHITESPACE","\n\n        ",139],["T_VARIABLE","$this",141],["T_OBJECT_OPERATOR","->",141],["T_STRING","contextMock",141],["T_OBJECT_OPERATOR","->",141],["T_STRING","expects",141],"(",["T_VARIABLE","$this",141],["T_OBJECT_OPERATOR","->",141],["T_STRING","once",141],"(",")",")",["T_WHITESPACE","\n            ",141],["T_OBJECT_OPERATOR","->",142],["T_STRING","method",142],"(",["T_CONSTANT_ENCAPSED_STRING","'getEventDispatcher'",142],")",["T_WHITESPACE","\n            ",142],["T_OBJECT_OPERATOR","->",143],["T_STRING","willReturn",143],"(",["T_VARIABLE","$eventManagerMock",143],")",";",["T_WHITESPACE","\n\n        ",143],["T_VARIABLE","$this",145],["T_OBJECT_OPERATOR","->",145],["T_STRING","tokenModel",145],["T_WHITESPACE"," ",145],"=",["T_WHITESPACE"," ",145],["T_NEW","new",145],["T_WHITESPACE"," ",145],["T_NS_SEPARATOR","\\",145],["T_STRING","Magento",145],["T_NS_SEPARATOR","\\",145],["T_STRING","Integration",145],["T_NS_SEPARATOR","\\",145],["T_STRING","Model",145],["T_NS_SEPARATOR","\\",145],["T_STRING","Oauth",145],["T_NS_SEPARATOR","\\",145],["T_STRING","Token",145],"(",["T_WHITESPACE","\n            ",145],["T_VARIABLE","$this",146],["T_OBJECT_OPERATOR","->",146],["T_STRING","contextMock",146],",",["T_WHITESPACE","\n            ",146],["T_VARIABLE","$this",147],["T_OBJECT_OPERATOR","->",147],["T_STRING","registryMock",147],",",["T_WHITESPACE","\n            ",147],["T_VARIABLE","$this",148],["T_OBJECT_OPERATOR","->",148],["T_STRING","keyLengthFactoryMock",148],",",["T_WHITESPACE","\n            ",148],["T_VARIABLE","$this",149],["T_OBJECT_OPERATOR","->",149],["T_STRING","validatorMock",149],",",["T_WHITESPACE","\n            ",149],["T_VARIABLE","$this",150],["T_OBJECT_OPERATOR","->",150],["T_STRING","consumerFactoryMock",150],",",["T_WHITESPACE","\n            ",150],["T_VARIABLE","$this",151],["T_OBJECT_OPERATOR","->",151],["T_STRING","oauthDataMock",151],",",["T_WHITESPACE","\n            ",151],["T_VARIABLE","$this",152],["T_OBJECT_OPERATOR","->",152],["T_STRING","oauthHelperMock",152],",",["T_WHITESPACE","\n            ",152],["T_VARIABLE","$this",153],["T_OBJECT_OPERATOR","->",153],["T_STRING","resourceMock",153],["T_WHITESPACE","\n        ",153],")",";",["T_WHITESPACE","\n    ",154],"}",["T_WHITESPACE","\n\n    ",155],["T_PUBLIC","public",157],["T_WHITESPACE"," ",157],["T_FUNCTION","function",157],["T_WHITESPACE"," ",157],["T_STRING","testAfterSave",157],"(",")",["T_WHITESPACE","\n    ",157],"{",["T_WHITESPACE","\n        ",158],["T_VARIABLE","$this",159],["T_OBJECT_OPERATOR","->",159],["T_STRING","oauthDataMock",159],["T_OBJECT_OPERATOR","->",159],["T_STRING","expects",159],"(",["T_VARIABLE","$this",159],["T_OBJECT_OPERATOR","->",159],["T_STRING","once",159],"(",")",")",["T_OBJECT_OPERATOR","->",159],["T_STRING","method",159],"(",["T_CONSTANT_ENCAPSED_STRING","'isCleanupProbability'",159],")",["T_OBJECT_OPERATOR","->",159],["T_STRING","willReturn",159],"(",["T_STRING","true",159],")",";",["T_WHITESPACE","\n        ",159],["T_VARIABLE","$this",160],["T_OBJECT_OPERATOR","->",160],["T_STRING","oauthDataMock",160],["T_OBJECT_OPERATOR","->",160],["T_STRING","expects",160],"(",["T_VARIABLE","$this",160],["T_OBJECT_OPERATOR","->",160],["T_STRING","once",160],"(",")",")",["T_OBJECT_OPERATOR","->",160],["T_STRING","method",160],"(",["T_CONSTANT_ENCAPSED_STRING","'getCleanupExpirationPeriod'",160],")",["T_OBJECT_OPERATOR","->",160],["T_STRING","willReturn",160],"(",["T_LNUMBER","30",160],")",";",["T_WHITESPACE","\n        ",160],["T_VARIABLE","$this",161],["T_OBJECT_OPERATOR","->",161],["T_STRING","resourceMock",161],["T_OBJECT_OPERATOR","->",161],["T_STRING","expects",161],"(",["T_VARIABLE","$this",161],["T_OBJECT_OPERATOR","->",161],["T_STRING","once",161],"(",")",")",["T_OBJECT_OPERATOR","->",161],["T_STRING","method",161],"(",["T_CONSTANT_ENCAPSED_STRING","'deleteOldEntries'",161],")",["T_OBJECT_OPERATOR","->",161],["T_STRING","with",161],"(",["T_LNUMBER","30",161],")",";",["T_WHITESPACE","\n\n        ",161],["T_VARIABLE","$this",163],["T_OBJECT_OPERATOR","->",163],["T_STRING","assertEquals",163],"(",["T_VARIABLE","$this",163],["T_OBJECT_OPERATOR","->",163],["T_STRING","tokenModel",163],",",["T_WHITESPACE"," ",163],["T_VARIABLE","$this",163],["T_OBJECT_OPERATOR","->",163],["T_STRING","tokenModel",163],["T_OBJECT_OPERATOR","->",163],["T_STRING","afterSave",163],"(",")",")",";",["T_WHITESPACE","\n    ",163],"}",["T_WHITESPACE","\n\n    ",164],["T_PUBLIC","public",166],["T_WHITESPACE"," ",166],["T_FUNCTION","function",166],["T_WHITESPACE"," ",166],["T_STRING","testAfterSaveNoCleanupProbability",166],"(",")",["T_WHITESPACE","\n    ",166],"{",["T_WHITESPACE","\n        ",167],["T_VARIABLE","$this",168],["T_OBJECT_OPERATOR","->",168],["T_STRING","oauthDataMock",168],["T_OBJECT_OPERATOR","->",168],["T_STRING","expects",168],"(",["T_VARIABLE","$this",168],["T_OBJECT_OPERATOR","->",168],["T_STRING","once",168],"(",")",")",["T_OBJECT_OPERATOR","->",168],["T_STRING","method",168],"(",["T_CONSTANT_ENCAPSED_STRING","'isCleanupProbability'",168],")",["T_OBJECT_OPERATOR","->",168],["T_STRING","willReturn",168],"(",["T_STRING","false",168],")",";",["T_WHITESPACE","\n        ",168],["T_VARIABLE","$this",169],["T_OBJECT_OPERATOR","->",169],["T_STRING","oauthDataMock",169],["T_OBJECT_OPERATOR","->",169],["T_STRING","expects",169],"(",["T_VARIABLE","$this",169],["T_OBJECT_OPERATOR","->",169],["T_STRING","never",169],"(",")",")",["T_OBJECT_OPERATOR","->",169],["T_STRING","method",169],"(",["T_CONSTANT_ENCAPSED_STRING","'getCleanupExpirationPeriod'",169],")",";",["T_WHITESPACE","\n        ",169],["T_VARIABLE","$this",170],["T_OBJECT_OPERATOR","->",170],["T_STRING","resourceMock",170],["T_OBJECT_OPERATOR","->",170],["T_STRING","expects",170],"(",["T_VARIABLE","$this",170],["T_OBJECT_OPERATOR","->",170],["T_STRING","never",170],"(",")",")",["T_OBJECT_OPERATOR","->",170],["T_STRING","method",170],"(",["T_CONSTANT_ENCAPSED_STRING","'deleteOldEntries'",170],")",";",["T_WHITESPACE","\n\n        ",170],["T_VARIABLE","$this",172],["T_OBJECT_OPERATOR","->",172],["T_STRING","assertEquals",172],"(",["T_VARIABLE","$this",172],["T_OBJECT_OPERATOR","->",172],["T_STRING","tokenModel",172],",",["T_WHITESPACE"," ",172],["T_VARIABLE","$this",172],["T_OBJECT_OPERATOR","->",172],["T_STRING","tokenModel",172],["T_OBJECT_OPERATOR","->",172],["T_STRING","afterSave",172],"(",")",")",";",["T_WHITESPACE","\n    ",172],"}",["T_WHITESPACE","\n\n    ",173],["T_PUBLIC","public",175],["T_WHITESPACE"," ",175],["T_FUNCTION","function",175],["T_WHITESPACE"," ",175],["T_STRING","testCreateVerifierToken",175],"(",")",["T_WHITESPACE","\n    ",175],"{",["T_WHITESPACE","\n        ",176],["T_VARIABLE","$consumerId",177],["T_WHITESPACE"," ",177],"=",["T_WHITESPACE"," ",177],["T_LNUMBER","1",177],";",["T_WHITESPACE","\n\n        ",177],["T_VARIABLE","$this",179],["T_OBJECT_OPERATOR","->",179],["T_STRING","resourceMock",179],["T_OBJECT_OPERATOR","->",179],["T_STRING","expects",179],"(",["T_VARIABLE","$this",179],["T_OBJECT_OPERATOR","->",179],["T_STRING","once",179],"(",")",")",["T_WHITESPACE","\n            ",179],["T_OBJECT_OPERATOR","->",180],["T_STRING","method",180],"(",["T_CONSTANT_ENCAPSED_STRING","'selectTokenByType'",180],")",["T_WHITESPACE","\n            ",180],["T_OBJECT_OPERATOR","->",181],["T_STRING","with",181],"(",["T_VARIABLE","$consumerId",181],",",["T_WHITESPACE"," ",181],["T_STRING","Token",181],["T_DOUBLE_COLON","::",181],["T_STRING","TYPE_VERIFIER",181],")",["T_WHITESPACE","\n            ",181],["T_OBJECT_OPERATOR","->",182],["T_STRING","willReturn",182],"(","[",["T_CONSTANT_ENCAPSED_STRING","'id'",182],["T_WHITESPACE"," ",182],["T_DOUBLE_ARROW","=>",182],["T_WHITESPACE"," ",182],["T_LNUMBER","123",182],"]",")",";",["T_WHITESPACE","\n\n        ",182],["T_VARIABLE","$this",184],["T_OBJECT_OPERATOR","->",184],["T_STRING","oauthHelperMock",184],["T_OBJECT_OPERATOR","->",184],["T_STRING","expects",184],"(",["T_VARIABLE","$this",184],["T_OBJECT_OPERATOR","->",184],["T_STRING","never",184],"(",")",")",["T_OBJECT_OPERATOR","->",184],["T_STRING","method",184],"(",["T_CONSTANT_ENCAPSED_STRING","'generateToken'",184],")",";",["T_WHITESPACE","\n        ",184],["T_VARIABLE","$this",185],["T_OBJECT_OPERATOR","->",185],["T_STRING","oauthHelperMock",185],["T_OBJECT_OPERATOR","->",185],["T_STRING","expects",185],"(",["T_VARIABLE","$this",185],["T_OBJECT_OPERATOR","->",185],["T_STRING","never",185],"(",")",")",["T_OBJECT_OPERATOR","->",185],["T_STRING","method",185],"(",["T_CONSTANT_ENCAPSED_STRING","'generateTokenSecret'",185],")",";",["T_WHITESPACE","\n        ",185],["T_VARIABLE","$this",186],["T_OBJECT_OPERATOR","->",186],["T_STRING","oauthHelperMock",186],["T_OBJECT_OPERATOR","->",186],["T_STRING","expects",186],"(",["T_VARIABLE","$this",186],["T_OBJECT_OPERATOR","->",186],["T_STRING","never",186],"(",")",")",["T_OBJECT_OPERATOR","->",186],["T_STRING","method",186],"(",["T_CONSTANT_ENCAPSED_STRING","'generateVerifier'",186],")",";",["T_WHITESPACE","\n        ",186],["T_VARIABLE","$this",187],["T_OBJECT_OPERATOR","->",187],["T_STRING","validatorMock",187],["T_OBJECT_OPERATOR","->",187],["T_STRING","expects",187],"(",["T_VARIABLE","$this",187],["T_OBJECT_OPERATOR","->",187],["T_STRING","never",187],"(",")",")",["T_OBJECT_OPERATOR","->",187],["T_STRING","method",187],"(",["T_CONSTANT_ENCAPSED_STRING","'isValid'",187],")",";",["T_WHITESPACE","\n        ",187],["T_VARIABLE","$this",188],["T_OBJECT_OPERATOR","->",188],["T_STRING","keyLengthFactoryMock",188],["T_OBJECT_OPERATOR","->",188],["T_STRING","expects",188],"(",["T_VARIABLE","$this",188],["T_OBJECT_OPERATOR","->",188],["T_STRING","never",188],"(",")",")",["T_OBJECT_OPERATOR","->",188],["T_STRING","method",188],"(",["T_CONSTANT_ENCAPSED_STRING","'create'",188],")",";",["T_WHITESPACE","\n        ",188],["T_VARIABLE","$this",189],["T_OBJECT_OPERATOR","->",189],["T_STRING","resourceMock",189],["T_OBJECT_OPERATOR","->",189],["T_STRING","expects",189],"(",["T_VARIABLE","$this",189],["T_OBJECT_OPERATOR","->",189],["T_STRING","never",189],"(",")",")",["T_OBJECT_OPERATOR","->",189],["T_STRING","method",189],"(",["T_CONSTANT_ENCAPSED_STRING","'save'",189],")",";",["T_WHITESPACE","\n        ",189],["T_VARIABLE","$this",190],["T_OBJECT_OPERATOR","->",190],["T_STRING","assertEquals",190],"(",["T_VARIABLE","$this",190],["T_OBJECT_OPERATOR","->",190],["T_STRING","tokenModel",190],",",["T_WHITESPACE"," ",190],["T_VARIABLE","$this",190],["T_OBJECT_OPERATOR","->",190],["T_STRING","tokenModel",190],["T_OBJECT_OPERATOR","->",190],["T_STRING","createVerifierToken",190],"(",["T_VARIABLE","$consumerId",190],")",")",";",["T_WHITESPACE","\n    ",190],"}",["T_WHITESPACE","\n\n    ",191],["T_PUBLIC","public",193],["T_WHITESPACE"," ",193],["T_FUNCTION","function",193],["T_WHITESPACE"," ",193],["T_STRING","testCreateVerifierTokenIfNoTokenId",193],"(",")",["T_WHITESPACE","\n    ",193],"{",["T_WHITESPACE","\n        ",194],["T_VARIABLE","$consumerId",195],["T_WHITESPACE"," ",195],"=",["T_WHITESPACE"," ",195],["T_LNUMBER","1",195],";",["T_WHITESPACE","\n        ",195],["T_VARIABLE","$secret",196],["T_WHITESPACE"," ",196],"=",["T_WHITESPACE"," ",196],["T_CONSTANT_ENCAPSED_STRING","'secret'",196],";",["T_WHITESPACE","\n        ",196],["T_VARIABLE","$token",197],["T_WHITESPACE"," ",197],"=",["T_WHITESPACE"," ",197],["T_CONSTANT_ENCAPSED_STRING","'token'",197],";",["T_WHITESPACE","\n        ",197],["T_VARIABLE","$verifier",198],["T_WHITESPACE"," ",198],"=",["T_WHITESPACE"," ",198],["T_CONSTANT_ENCAPSED_STRING","'verifier'",198],";",["T_WHITESPACE","\n\n        ",198],["T_VARIABLE","$this",200],["T_OBJECT_OPERATOR","->",200],["T_STRING","oauthHelperMock",200],["T_OBJECT_OPERATOR","->",200],["T_STRING","expects",200],"(",["T_VARIABLE","$this",200],["T_OBJECT_OPERATOR","->",200],["T_STRING","once",200],"(",")",")",["T_OBJECT_OPERATOR","->",200],["T_STRING","method",200],"(",["T_CONSTANT_ENCAPSED_STRING","'generateTokenSecret'",200],")",["T_OBJECT_OPERATOR","->",200],["T_STRING","willReturn",200],"(",["T_VARIABLE","$secret",200],")",";",["T_WHITESPACE","\n        ",200],["T_VARIABLE","$this",201],["T_OBJECT_OPERATOR","->",201],["T_STRING","oauthHelperMock",201],["T_OBJECT_OPERATOR","->",201],["T_STRING","expects",201],"(",["T_VARIABLE","$this",201],["T_OBJECT_OPERATOR","->",201],["T_STRING","once",201],"(",")",")",["T_OBJECT_OPERATOR","->",201],["T_STRING","method",201],"(",["T_CONSTANT_ENCAPSED_STRING","'generateToken'",201],")",["T_OBJECT_OPERATOR","->",201],["T_STRING","willReturn",201],"(",["T_VARIABLE","$token",201],")",";",["T_WHITESPACE","\n        ",201],["T_VARIABLE","$this",202],["T_OBJECT_OPERATOR","->",202],["T_STRING","oauthHelperMock",202],["T_OBJECT_OPERATOR","->",202],["T_STRING","expects",202],"(",["T_VARIABLE","$this",202],["T_OBJECT_OPERATOR","->",202],["T_STRING","once",202],"(",")",")",["T_OBJECT_OPERATOR","->",202],["T_STRING","method",202],"(",["T_CONSTANT_ENCAPSED_STRING","'generateVerifier'",202],")",["T_OBJECT_OPERATOR","->",202],["T_STRING","willReturn",202],"(",["T_VARIABLE","$verifier",202],")",";",["T_WHITESPACE","\n\n        ",202],["T_VARIABLE","$this",204],["T_OBJECT_OPERATOR","->",204],["T_STRING","resourceMock",204],["T_OBJECT_OPERATOR","->",204],["T_STRING","expects",204],"(",["T_VARIABLE","$this",204],["T_OBJECT_OPERATOR","->",204],["T_STRING","once",204],"(",")",")",["T_WHITESPACE","\n            ",204],["T_OBJECT_OPERATOR","->",205],["T_STRING","method",205],"(",["T_CONSTANT_ENCAPSED_STRING","'selectTokenByType'",205],")",["T_WHITESPACE","\n            ",205],["T_OBJECT_OPERATOR","->",206],["T_STRING","with",206],"(",["T_VARIABLE","$consumerId",206],",",["T_WHITESPACE"," ",206],["T_STRING","Token",206],["T_DOUBLE_COLON","::",206],["T_STRING","TYPE_VERIFIER",206],")",["T_WHITESPACE","\n            ",206],["T_OBJECT_OPERATOR","->",207],["T_STRING","willReturn",207],"(","[","]",")",";",["T_WHITESPACE","\n\n        ",207],["T_VARIABLE","$this",209],["T_OBJECT_OPERATOR","->",209],["T_STRING","tokenModel",209],["T_OBJECT_OPERATOR","->",209],["T_STRING","setCallbackUrl",209],"(",["T_STRING","OauthHelper",209],["T_DOUBLE_COLON","::",209],["T_STRING","CALLBACK_ESTABLISHED",209],")",";",["T_WHITESPACE","\n\n        ",209],["T_VARIABLE","$this",211],["T_OBJECT_OPERATOR","->",211],["T_STRING","keyLengthFactoryMock",211],["T_OBJECT_OPERATOR","->",211],["T_STRING","expects",211],"(",["T_VARIABLE","$this",211],["T_OBJECT_OPERATOR","->",211],["T_STRING","once",211],"(",")",")",["T_OBJECT_OPERATOR","->",211],["T_STRING","method",211],"(",["T_CONSTANT_ENCAPSED_STRING","'create'",211],")",["T_OBJECT_OPERATOR","->",211],["T_STRING","willReturn",211],"(",["T_WHITESPACE","\n            ",211],["T_VARIABLE","$this",212],["T_OBJECT_OPERATOR","->",212],["T_STRING","validatorKeyLengthMock",212],["T_WHITESPACE","\n        ",212],")",";",["T_WHITESPACE","\n        ",213],["T_VARIABLE","$this",214],["T_OBJECT_OPERATOR","->",214],["T_STRING","validatorKeyLengthMock",214],["T_OBJECT_OPERATOR","->",214],["T_STRING","expects",214],"(",["T_VARIABLE","$this",214],["T_OBJECT_OPERATOR","->",214],["T_STRING","exactly",214],"(",["T_LNUMBER","3",214],")",")",["T_OBJECT_OPERATOR","->",214],["T_STRING","method",214],"(",["T_CONSTANT_ENCAPSED_STRING","'setLength'",214],")",";",["T_WHITESPACE","\n        ",214],["T_VARIABLE","$this",215],["T_OBJECT_OPERATOR","->",215],["T_STRING","validatorKeyLengthMock",215],["T_OBJECT_OPERATOR","->",215],["T_STRING","expects",215],"(",["T_VARIABLE","$this",215],["T_OBJECT_OPERATOR","->",215],["T_STRING","exactly",215],"(",["T_LNUMBER","3",215],")",")",["T_OBJECT_OPERATOR","->",215],["T_STRING","method",215],"(",["T_CONSTANT_ENCAPSED_STRING","'setName'",215],")",";",["T_WHITESPACE","\n        ",215],["T_VARIABLE","$this",216],["T_OBJECT_OPERATOR","->",216],["T_STRING","validatorKeyLengthMock",216],["T_OBJECT_OPERATOR","->",216],["T_STRING","expects",216],"(",["T_VARIABLE","$this",216],["T_OBJECT_OPERATOR","->",216],["T_STRING","exactly",216],"(",["T_LNUMBER","3",216],")",")",["T_OBJECT_OPERATOR","->",216],["T_STRING","method",216],"(",["T_CONSTANT_ENCAPSED_STRING","'isValid'",216],")",["T_OBJECT_OPERATOR","->",216],["T_STRING","willReturn",216],"(",["T_STRING","true",216],")",";",["T_WHITESPACE","\n        ",216],["T_VARIABLE","$this",217],["T_OBJECT_OPERATOR","->",217],["T_STRING","resourceMock",217],["T_OBJECT_OPERATOR","->",217],["T_STRING","expects",217],"(",["T_VARIABLE","$this",217],["T_OBJECT_OPERATOR","->",217],["T_STRING","once",217],"(",")",")",["T_OBJECT_OPERATOR","->",217],["T_STRING","method",217],"(",["T_CONSTANT_ENCAPSED_STRING","'save'",217],")",";",["T_WHITESPACE","\n        ",217],["T_VARIABLE","$this",218],["T_OBJECT_OPERATOR","->",218],["T_STRING","assertEquals",218],"(",["T_VARIABLE","$this",218],["T_OBJECT_OPERATOR","->",218],["T_STRING","tokenModel",218],",",["T_WHITESPACE"," ",218],["T_VARIABLE","$this",218],["T_OBJECT_OPERATOR","->",218],["T_STRING","tokenModel",218],["T_OBJECT_OPERATOR","->",218],["T_STRING","createVerifierToken",218],"(",["T_VARIABLE","$consumerId",218],")",")",";",["T_WHITESPACE","\n    ",218],"}",["T_WHITESPACE","\n\n    ",219],["T_DOC_COMMENT","\/**\n     * @expectedException \\Magento\\Framework\\Oauth\\Exception\n     * @expectedExceptionMessage Cannot convert to access token due to token is not request type\n     *\/",221],["T_WHITESPACE","\n    ",224],["T_PUBLIC","public",225],["T_WHITESPACE"," ",225],["T_FUNCTION","function",225],["T_WHITESPACE"," ",225],["T_STRING","testConvertToAccessIfIsNotRequestType",225],"(",")",["T_WHITESPACE","\n    ",225],"{",["T_WHITESPACE","\n        ",226],["T_VARIABLE","$this",227],["T_OBJECT_OPERATOR","->",227],["T_STRING","tokenModel",227],["T_OBJECT_OPERATOR","->",227],["T_STRING","setType",227],"(",["T_CONSTANT_ENCAPSED_STRING","'isNotRequestType'",227],")",";",["T_WHITESPACE","\n        ",227],["T_VARIABLE","$this",228],["T_OBJECT_OPERATOR","->",228],["T_STRING","tokenModel",228],["T_OBJECT_OPERATOR","->",228],["T_STRING","convertToAccess",228],"(",")",";",["T_WHITESPACE","\n    ",228],"}",["T_WHITESPACE","\n\n    ",229],["T_PUBLIC","public",231],["T_WHITESPACE"," ",231],["T_FUNCTION","function",231],["T_WHITESPACE"," ",231],["T_STRING","testConvertToAccess",231],"(",")",["T_WHITESPACE","\n    ",231],"{",["T_WHITESPACE","\n        ",232],["T_VARIABLE","$token",233],["T_WHITESPACE"," ",233],"=",["T_WHITESPACE"," ",233],["T_CONSTANT_ENCAPSED_STRING","'token'",233],";",["T_WHITESPACE","\n        ",233],["T_VARIABLE","$secret",234],["T_WHITESPACE"," ",234],"=",["T_WHITESPACE"," ",234],["T_CONSTANT_ENCAPSED_STRING","'secret'",234],";",["T_WHITESPACE","\n\n        ",234],["T_VARIABLE","$this",236],["T_OBJECT_OPERATOR","->",236],["T_STRING","tokenModel",236],["T_OBJECT_OPERATOR","->",236],["T_STRING","setType",236],"(",["T_STRING","Token",236],["T_DOUBLE_COLON","::",236],["T_STRING","TYPE_REQUEST",236],")",";",["T_WHITESPACE","\n        ",236],["T_VARIABLE","$this",237],["T_OBJECT_OPERATOR","->",237],["T_STRING","oauthHelperMock",237],["T_OBJECT_OPERATOR","->",237],["T_STRING","expects",237],"(",["T_VARIABLE","$this",237],["T_OBJECT_OPERATOR","->",237],["T_STRING","once",237],"(",")",")",["T_OBJECT_OPERATOR","->",237],["T_STRING","method",237],"(",["T_CONSTANT_ENCAPSED_STRING","'generateToken'",237],")",["T_OBJECT_OPERATOR","->",237],["T_STRING","willReturn",237],"(",["T_VARIABLE","$token",237],")",";",["T_WHITESPACE","\n        ",237],["T_VARIABLE","$this",238],["T_OBJECT_OPERATOR","->",238],["T_STRING","oauthHelperMock",238],["T_OBJECT_OPERATOR","->",238],["T_STRING","expects",238],"(",["T_VARIABLE","$this",238],["T_OBJECT_OPERATOR","->",238],["T_STRING","once",238],"(",")",")",["T_OBJECT_OPERATOR","->",238],["T_STRING","method",238],"(",["T_CONSTANT_ENCAPSED_STRING","'generateTokenSecret'",238],")",["T_OBJECT_OPERATOR","->",238],["T_STRING","willReturn",238],"(",["T_VARIABLE","$secret",238],")",";",["T_WHITESPACE","\n        ",238],["T_VARIABLE","$this",239],["T_OBJECT_OPERATOR","->",239],["T_STRING","resourceMock",239],["T_OBJECT_OPERATOR","->",239],["T_STRING","expects",239],"(",["T_VARIABLE","$this",239],["T_OBJECT_OPERATOR","->",239],["T_STRING","once",239],"(",")",")",["T_OBJECT_OPERATOR","->",239],["T_STRING","method",239],"(",["T_CONSTANT_ENCAPSED_STRING","'save'",239],")",";",["T_WHITESPACE","\n\n        ",239],["T_VARIABLE","$result",241],["T_WHITESPACE"," ",241],"=",["T_WHITESPACE"," ",241],["T_VARIABLE","$this",241],["T_OBJECT_OPERATOR","->",241],["T_STRING","tokenModel",241],["T_OBJECT_OPERATOR","->",241],["T_STRING","convertToAccess",241],"(",")",";",["T_WHITESPACE","\n        ",241],["T_VARIABLE","$this",242],["T_OBJECT_OPERATOR","->",242],["T_STRING","assertEquals",242],"(",["T_VARIABLE","$this",242],["T_OBJECT_OPERATOR","->",242],["T_STRING","tokenModel",242],",",["T_WHITESPACE"," ",242],["T_VARIABLE","$result",242],")",";",["T_WHITESPACE","\n        ",242],["T_VARIABLE","$this",243],["T_OBJECT_OPERATOR","->",243],["T_STRING","assertEquals",243],"(",["T_VARIABLE","$token",243],",",["T_WHITESPACE"," ",243],["T_VARIABLE","$result",243],["T_OBJECT_OPERATOR","->",243],["T_STRING","getToken",243],"(",")",")",";",["T_WHITESPACE","\n        ",243],["T_VARIABLE","$this",244],["T_OBJECT_OPERATOR","->",244],["T_STRING","assertEquals",244],"(",["T_VARIABLE","$secret",244],",",["T_WHITESPACE"," ",244],["T_VARIABLE","$result",244],["T_OBJECT_OPERATOR","->",244],["T_STRING","getSecret",244],"(",")",")",";",["T_WHITESPACE","\n        ",244],["T_VARIABLE","$this",245],["T_OBJECT_OPERATOR","->",245],["T_STRING","assertEquals",245],"(",["T_STRING","UserContextInterface",245],["T_DOUBLE_COLON","::",245],["T_STRING","USER_TYPE_INTEGRATION",245],",",["T_WHITESPACE"," ",245],["T_VARIABLE","$result",245],["T_OBJECT_OPERATOR","->",245],["T_STRING","getUserType",245],"(",")",")",";",["T_WHITESPACE","\n    ",245],"}",["T_WHITESPACE","\n\n    ",246],["T_PUBLIC","public",248],["T_WHITESPACE"," ",248],["T_FUNCTION","function",248],["T_WHITESPACE"," ",248],["T_STRING","testCreateAdminToken",248],"(",")",["T_WHITESPACE","\n    ",248],"{",["T_WHITESPACE","\n        ",249],["T_VARIABLE","$userId",250],["T_WHITESPACE"," ",250],"=",["T_WHITESPACE"," ",250],["T_LNUMBER","1",250],";",["T_WHITESPACE","\n        ",250],["T_VARIABLE","$token",251],["T_WHITESPACE"," ",251],"=",["T_WHITESPACE"," ",251],["T_CONSTANT_ENCAPSED_STRING","'token'",251],";",["T_WHITESPACE","\n        ",251],["T_VARIABLE","$secret",252],["T_WHITESPACE"," ",252],"=",["T_WHITESPACE"," ",252],["T_CONSTANT_ENCAPSED_STRING","'secret'",252],";",["T_WHITESPACE","\n\n        ",252],["T_VARIABLE","$this",254],["T_OBJECT_OPERATOR","->",254],["T_STRING","oauthHelperMock",254],["T_OBJECT_OPERATOR","->",254],["T_STRING","expects",254],"(",["T_VARIABLE","$this",254],["T_OBJECT_OPERATOR","->",254],["T_STRING","once",254],"(",")",")",["T_OBJECT_OPERATOR","->",254],["T_STRING","method",254],"(",["T_CONSTANT_ENCAPSED_STRING","'generateToken'",254],")",["T_OBJECT_OPERATOR","->",254],["T_STRING","willReturn",254],"(",["T_VARIABLE","$token",254],")",";",["T_WHITESPACE","\n        ",254],["T_VARIABLE","$this",255],["T_OBJECT_OPERATOR","->",255],["T_STRING","oauthHelperMock",255],["T_OBJECT_OPERATOR","->",255],["T_STRING","expects",255],"(",["T_VARIABLE","$this",255],["T_OBJECT_OPERATOR","->",255],["T_STRING","once",255],"(",")",")",["T_OBJECT_OPERATOR","->",255],["T_STRING","method",255],"(",["T_CONSTANT_ENCAPSED_STRING","'generateTokenSecret'",255],")",["T_OBJECT_OPERATOR","->",255],["T_STRING","willReturn",255],"(",["T_VARIABLE","$secret",255],")",";",["T_WHITESPACE","\n        ",255],["T_VARIABLE","$this",256],["T_OBJECT_OPERATOR","->",256],["T_STRING","resourceMock",256],["T_OBJECT_OPERATOR","->",256],["T_STRING","expects",256],"(",["T_VARIABLE","$this",256],["T_OBJECT_OPERATOR","->",256],["T_STRING","once",256],"(",")",")",["T_OBJECT_OPERATOR","->",256],["T_STRING","method",256],"(",["T_CONSTANT_ENCAPSED_STRING","'save'",256],")",";",["T_WHITESPACE","\n\n        ",256],["T_VARIABLE","$result",258],["T_WHITESPACE"," ",258],"=",["T_WHITESPACE"," ",258],["T_VARIABLE","$this",258],["T_OBJECT_OPERATOR","->",258],["T_STRING","tokenModel",258],["T_OBJECT_OPERATOR","->",258],["T_STRING","createAdminToken",258],"(",["T_VARIABLE","$userId",258],")",";",["T_WHITESPACE","\n        ",258],["T_VARIABLE","$this",259],["T_OBJECT_OPERATOR","->",259],["T_STRING","assertEquals",259],"(",["T_VARIABLE","$this",259],["T_OBJECT_OPERATOR","->",259],["T_STRING","tokenModel",259],",",["T_WHITESPACE"," ",259],["T_VARIABLE","$result",259],")",";",["T_WHITESPACE","\n        ",259],["T_VARIABLE","$this",260],["T_OBJECT_OPERATOR","->",260],["T_STRING","assertEquals",260],"(",["T_VARIABLE","$token",260],",",["T_WHITESPACE"," ",260],["T_VARIABLE","$result",260],["T_OBJECT_OPERATOR","->",260],["T_STRING","getToken",260],"(",")",")",";",["T_WHITESPACE","\n        ",260],["T_VARIABLE","$this",261],["T_OBJECT_OPERATOR","->",261],["T_STRING","assertEquals",261],"(",["T_VARIABLE","$secret",261],",",["T_WHITESPACE"," ",261],["T_VARIABLE","$result",261],["T_OBJECT_OPERATOR","->",261],["T_STRING","getSecret",261],"(",")",")",";",["T_WHITESPACE","\n        ",261],["T_VARIABLE","$this",262],["T_OBJECT_OPERATOR","->",262],["T_STRING","assertEquals",262],"(",["T_VARIABLE","$userId",262],",",["T_WHITESPACE"," ",262],["T_VARIABLE","$result",262],["T_OBJECT_OPERATOR","->",262],["T_STRING","getAdminId",262],"(",")",")",";",["T_WHITESPACE","\n        ",262],["T_VARIABLE","$this",263],["T_OBJECT_OPERATOR","->",263],["T_STRING","assertEquals",263],"(",["T_STRING","UserContextInterface",263],["T_DOUBLE_COLON","::",263],["T_STRING","USER_TYPE_ADMIN",263],",",["T_WHITESPACE"," ",263],["T_VARIABLE","$result",263],["T_OBJECT_OPERATOR","->",263],["T_STRING","getUserType",263],"(",")",")",";",["T_WHITESPACE","\n    ",263],"}",["T_WHITESPACE","\n\n    ",264],["T_PUBLIC","public",266],["T_WHITESPACE"," ",266],["T_FUNCTION","function",266],["T_WHITESPACE"," ",266],["T_STRING","testCreateCustomerToken",266],"(",")",["T_WHITESPACE","\n    ",266],"{",["T_WHITESPACE","\n        ",267],["T_VARIABLE","$userId",268],["T_WHITESPACE"," ",268],"=",["T_WHITESPACE"," ",268],["T_LNUMBER","1",268],";",["T_WHITESPACE","\n        ",268],["T_VARIABLE","$token",269],["T_WHITESPACE"," ",269],"=",["T_WHITESPACE"," ",269],["T_CONSTANT_ENCAPSED_STRING","'token'",269],";",["T_WHITESPACE","\n        ",269],["T_VARIABLE","$secret",270],["T_WHITESPACE"," ",270],"=",["T_WHITESPACE"," ",270],["T_CONSTANT_ENCAPSED_STRING","'secret'",270],";",["T_WHITESPACE","\n\n        ",270],["T_VARIABLE","$this",272],["T_OBJECT_OPERATOR","->",272],["T_STRING","oauthHelperMock",272],["T_OBJECT_OPERATOR","->",272],["T_STRING","expects",272],"(",["T_VARIABLE","$this",272],["T_OBJECT_OPERATOR","->",272],["T_STRING","once",272],"(",")",")",["T_OBJECT_OPERATOR","->",272],["T_STRING","method",272],"(",["T_CONSTANT_ENCAPSED_STRING","'generateToken'",272],")",["T_OBJECT_OPERATOR","->",272],["T_STRING","willReturn",272],"(",["T_VARIABLE","$token",272],")",";",["T_WHITESPACE","\n        ",272],["T_VARIABLE","$this",273],["T_OBJECT_OPERATOR","->",273],["T_STRING","oauthHelperMock",273],["T_OBJECT_OPERATOR","->",273],["T_STRING","expects",273],"(",["T_VARIABLE","$this",273],["T_OBJECT_OPERATOR","->",273],["T_STRING","once",273],"(",")",")",["T_OBJECT_OPERATOR","->",273],["T_STRING","method",273],"(",["T_CONSTANT_ENCAPSED_STRING","'generateTokenSecret'",273],")",["T_OBJECT_OPERATOR","->",273],["T_STRING","willReturn",273],"(",["T_VARIABLE","$secret",273],")",";",["T_WHITESPACE","\n        ",273],["T_VARIABLE","$this",274],["T_OBJECT_OPERATOR","->",274],["T_STRING","resourceMock",274],["T_OBJECT_OPERATOR","->",274],["T_STRING","expects",274],"(",["T_VARIABLE","$this",274],["T_OBJECT_OPERATOR","->",274],["T_STRING","once",274],"(",")",")",["T_OBJECT_OPERATOR","->",274],["T_STRING","method",274],"(",["T_CONSTANT_ENCAPSED_STRING","'save'",274],")",";",["T_WHITESPACE","\n\n        ",274],["T_VARIABLE","$result",276],["T_WHITESPACE"," ",276],"=",["T_WHITESPACE"," ",276],["T_VARIABLE","$this",276],["T_OBJECT_OPERATOR","->",276],["T_STRING","tokenModel",276],["T_OBJECT_OPERATOR","->",276],["T_STRING","createCustomerToken",276],"(",["T_VARIABLE","$userId",276],")",";",["T_WHITESPACE","\n        ",276],["T_VARIABLE","$this",277],["T_OBJECT_OPERATOR","->",277],["T_STRING","assertEquals",277],"(",["T_VARIABLE","$this",277],["T_OBJECT_OPERATOR","->",277],["T_STRING","tokenModel",277],",",["T_WHITESPACE"," ",277],["T_VARIABLE","$result",277],")",";",["T_WHITESPACE","\n        ",277],["T_VARIABLE","$this",278],["T_OBJECT_OPERATOR","->",278],["T_STRING","assertEquals",278],"(",["T_VARIABLE","$token",278],",",["T_WHITESPACE"," ",278],["T_VARIABLE","$result",278],["T_OBJECT_OPERATOR","->",278],["T_STRING","getToken",278],"(",")",")",";",["T_WHITESPACE","\n        ",278],["T_VARIABLE","$this",279],["T_OBJECT_OPERATOR","->",279],["T_STRING","assertEquals",279],"(",["T_VARIABLE","$secret",279],",",["T_WHITESPACE"," ",279],["T_VARIABLE","$result",279],["T_OBJECT_OPERATOR","->",279],["T_STRING","getSecret",279],"(",")",")",";",["T_WHITESPACE","\n        ",279],["T_VARIABLE","$this",280],["T_OBJECT_OPERATOR","->",280],["T_STRING","assertEquals",280],"(",["T_VARIABLE","$userId",280],",",["T_WHITESPACE"," ",280],["T_VARIABLE","$result",280],["T_OBJECT_OPERATOR","->",280],["T_STRING","getCustomerId",280],"(",")",")",";",["T_WHITESPACE","\n        ",280],["T_VARIABLE","$this",281],["T_OBJECT_OPERATOR","->",281],["T_STRING","assertNotEquals",281],"(",["T_VARIABLE","$userId",281],",",["T_WHITESPACE"," ",281],["T_VARIABLE","$result",281],["T_OBJECT_OPERATOR","->",281],["T_STRING","getAdminId",281],"(",")",")",";",["T_WHITESPACE","\n        ",281],["T_VARIABLE","$this",282],["T_OBJECT_OPERATOR","->",282],["T_STRING","assertEquals",282],"(",["T_STRING","UserContextInterface",282],["T_DOUBLE_COLON","::",282],["T_STRING","USER_TYPE_CUSTOMER",282],",",["T_WHITESPACE"," ",282],["T_VARIABLE","$result",282],["T_OBJECT_OPERATOR","->",282],["T_STRING","getUserType",282],"(",")",")",";",["T_WHITESPACE","\n    ",282],"}",["T_WHITESPACE","\n\n    ",283],["T_PUBLIC","public",285],["T_WHITESPACE"," ",285],["T_FUNCTION","function",285],["T_WHITESPACE"," ",285],["T_STRING","testCreateRequestToken",285],"(",")",["T_WHITESPACE","\n    ",285],"{",["T_WHITESPACE","\n        ",286],["T_VARIABLE","$entityId",287],["T_WHITESPACE"," ",287],"=",["T_WHITESPACE"," ",287],["T_LNUMBER","1",287],";",["T_WHITESPACE","\n        ",287],["T_VARIABLE","$callbackUrl",288],["T_WHITESPACE"," ",288],"=",["T_WHITESPACE"," ",288],["T_STRING","OauthHelper",288],["T_DOUBLE_COLON","::",288],["T_STRING","CALLBACK_ESTABLISHED",288],";",["T_WHITESPACE","\n        ",288],["T_VARIABLE","$token",289],["T_WHITESPACE"," ",289],"=",["T_WHITESPACE"," ",289],["T_CONSTANT_ENCAPSED_STRING","'token'",289],";",["T_WHITESPACE","\n        ",289],["T_VARIABLE","$secret",290],["T_WHITESPACE"," ",290],"=",["T_WHITESPACE"," ",290],["T_CONSTANT_ENCAPSED_STRING","'secret'",290],";",["T_WHITESPACE","\n\n        ",290],["T_VARIABLE","$this",292],["T_OBJECT_OPERATOR","->",292],["T_STRING","oauthHelperMock",292],["T_OBJECT_OPERATOR","->",292],["T_STRING","expects",292],"(",["T_VARIABLE","$this",292],["T_OBJECT_OPERATOR","->",292],["T_STRING","once",292],"(",")",")",["T_OBJECT_OPERATOR","->",292],["T_STRING","method",292],"(",["T_CONSTANT_ENCAPSED_STRING","'generateTokenSecret'",292],")",["T_OBJECT_OPERATOR","->",292],["T_STRING","willReturn",292],"(",["T_VARIABLE","$secret",292],")",";",["T_WHITESPACE","\n        ",292],["T_VARIABLE","$this",293],["T_OBJECT_OPERATOR","->",293],["T_STRING","oauthHelperMock",293],["T_OBJECT_OPERATOR","->",293],["T_STRING","expects",293],"(",["T_VARIABLE","$this",293],["T_OBJECT_OPERATOR","->",293],["T_STRING","once",293],"(",")",")",["T_OBJECT_OPERATOR","->",293],["T_STRING","method",293],"(",["T_CONSTANT_ENCAPSED_STRING","'generateToken'",293],")",["T_OBJECT_OPERATOR","->",293],["T_STRING","willReturn",293],"(",["T_VARIABLE","$token",293],")",";",["T_WHITESPACE","\n\n        ",293],["T_VARIABLE","$this",295],["T_OBJECT_OPERATOR","->",295],["T_STRING","tokenModel",295],["T_OBJECT_OPERATOR","->",295],["T_STRING","setCallbackUrl",295],"(",["T_VARIABLE","$callbackUrl",295],")",";",["T_WHITESPACE","\n        ",295],["T_VARIABLE","$this",296],["T_OBJECT_OPERATOR","->",296],["T_STRING","keyLengthFactoryMock",296],["T_OBJECT_OPERATOR","->",296],["T_STRING","expects",296],"(",["T_VARIABLE","$this",296],["T_OBJECT_OPERATOR","->",296],["T_STRING","once",296],"(",")",")",["T_OBJECT_OPERATOR","->",296],["T_STRING","method",296],"(",["T_CONSTANT_ENCAPSED_STRING","'create'",296],")",["T_OBJECT_OPERATOR","->",296],["T_STRING","willReturn",296],"(",["T_WHITESPACE","\n            ",296],["T_VARIABLE","$this",297],["T_OBJECT_OPERATOR","->",297],["T_STRING","validatorKeyLengthMock",297],["T_WHITESPACE","\n        ",297],")",";",["T_WHITESPACE","\n        ",298],["T_VARIABLE","$this",299],["T_OBJECT_OPERATOR","->",299],["T_STRING","validatorKeyLengthMock",299],["T_OBJECT_OPERATOR","->",299],["T_STRING","expects",299],"(",["T_VARIABLE","$this",299],["T_OBJECT_OPERATOR","->",299],["T_STRING","exactly",299],"(",["T_LNUMBER","2",299],")",")",["T_OBJECT_OPERATOR","->",299],["T_STRING","method",299],"(",["T_CONSTANT_ENCAPSED_STRING","'setLength'",299],")",";",["T_WHITESPACE","\n        ",299],["T_VARIABLE","$this",300],["T_OBJECT_OPERATOR","->",300],["T_STRING","validatorKeyLengthMock",300],["T_OBJECT_OPERATOR","->",300],["T_STRING","expects",300],"(",["T_VARIABLE","$this",300],["T_OBJECT_OPERATOR","->",300],["T_STRING","exactly",300],"(",["T_LNUMBER","2",300],")",")",["T_OBJECT_OPERATOR","->",300],["T_STRING","method",300],"(",["T_CONSTANT_ENCAPSED_STRING","'setName'",300],")",";",["T_WHITESPACE","\n        ",300],["T_VARIABLE","$this",301],["T_OBJECT_OPERATOR","->",301],["T_STRING","validatorKeyLengthMock",301],["T_OBJECT_OPERATOR","->",301],["T_STRING","expects",301],"(",["T_VARIABLE","$this",301],["T_OBJECT_OPERATOR","->",301],["T_STRING","exactly",301],"(",["T_LNUMBER","2",301],")",")",["T_OBJECT_OPERATOR","->",301],["T_STRING","method",301],"(",["T_CONSTANT_ENCAPSED_STRING","'isValid'",301],")",["T_OBJECT_OPERATOR","->",301],["T_STRING","willReturn",301],"(",["T_STRING","true",301],")",";",["T_WHITESPACE","\n        ",301],["T_VARIABLE","$this",302],["T_OBJECT_OPERATOR","->",302],["T_STRING","resourceMock",302],["T_OBJECT_OPERATOR","->",302],["T_STRING","expects",302],"(",["T_VARIABLE","$this",302],["T_OBJECT_OPERATOR","->",302],["T_STRING","once",302],"(",")",")",["T_OBJECT_OPERATOR","->",302],["T_STRING","method",302],"(",["T_CONSTANT_ENCAPSED_STRING","'save'",302],")",";",["T_WHITESPACE","\n\n        ",302],["T_VARIABLE","$actualToken",304],["T_WHITESPACE"," ",304],"=",["T_WHITESPACE"," ",304],["T_VARIABLE","$this",304],["T_OBJECT_OPERATOR","->",304],["T_STRING","tokenModel",304],["T_OBJECT_OPERATOR","->",304],["T_STRING","createRequestToken",304],"(",["T_VARIABLE","$entityId",304],",",["T_WHITESPACE"," ",304],["T_VARIABLE","$callbackUrl",304],")",";",["T_WHITESPACE","\n        ",304],["T_VARIABLE","$this",305],["T_OBJECT_OPERATOR","->",305],["T_STRING","assertEquals",305],"(",["T_VARIABLE","$this",305],["T_OBJECT_OPERATOR","->",305],["T_STRING","tokenModel",305],",",["T_WHITESPACE"," ",305],["T_VARIABLE","$actualToken",305],")",";",["T_WHITESPACE","\n        ",305],["T_VARIABLE","$this",306],["T_OBJECT_OPERATOR","->",306],["T_STRING","assertEquals",306],"(",["T_VARIABLE","$this",306],["T_OBJECT_OPERATOR","->",306],["T_STRING","tokenModel",306],["T_OBJECT_OPERATOR","->",306],["T_STRING","getSecret",306],"(",")",",",["T_WHITESPACE"," ",306],["T_VARIABLE","$actualToken",306],["T_OBJECT_OPERATOR","->",306],["T_STRING","getSecret",306],"(",")",")",";",["T_WHITESPACE","\n        ",306],["T_VARIABLE","$this",307],["T_OBJECT_OPERATOR","->",307],["T_STRING","assertEquals",307],"(",["T_VARIABLE","$this",307],["T_OBJECT_OPERATOR","->",307],["T_STRING","tokenModel",307],["T_OBJECT_OPERATOR","->",307],["T_STRING","getToken",307],"(",")",",",["T_WHITESPACE"," ",307],["T_VARIABLE","$actualToken",307],["T_OBJECT_OPERATOR","->",307],["T_STRING","getToken",307],"(",")",")",";",["T_WHITESPACE","\n    ",307],"}",["T_WHITESPACE","\n\n    ",308],["T_PUBLIC","public",310],["T_WHITESPACE"," ",310],["T_FUNCTION","function",310],["T_WHITESPACE"," ",310],["T_STRING","testToString",310],"(",")",["T_WHITESPACE","\n    ",310],"{",["T_WHITESPACE","\n        ",311],["T_VARIABLE","$token",312],["T_WHITESPACE"," ",312],"=",["T_WHITESPACE"," ",312],["T_CONSTANT_ENCAPSED_STRING","'token'",312],";",["T_WHITESPACE","\n        ",312],["T_VARIABLE","$secret",313],["T_WHITESPACE"," ",313],"=",["T_WHITESPACE"," ",313],["T_CONSTANT_ENCAPSED_STRING","'secret'",313],";",["T_WHITESPACE","\n        ",313],["T_VARIABLE","$expectedResponse",314],["T_WHITESPACE"," ",314],"=",["T_WHITESPACE"," ",314],"\"",["T_ENCAPSED_AND_WHITESPACE","oauth_token=",314],["T_CURLY_OPEN","{",314],["T_VARIABLE","$token",314],"}",["T_ENCAPSED_AND_WHITESPACE","&oauth_token_secret=",314],["T_CURLY_OPEN","{",314],["T_VARIABLE","$secret",314],"}","\"",";",["T_WHITESPACE","\n\n        ",314],["T_VARIABLE","$this",316],["T_OBJECT_OPERATOR","->",316],["T_STRING","tokenModel",316],["T_OBJECT_OPERATOR","->",316],["T_STRING","setToken",316],"(",["T_VARIABLE","$token",316],")",["T_OBJECT_OPERATOR","->",316],["T_STRING","setSecret",316],"(",["T_VARIABLE","$secret",316],")",";",["T_WHITESPACE","\n\n        ",316],["T_VARIABLE","$this",318],["T_OBJECT_OPERATOR","->",318],["T_STRING","assertEquals",318],"(",["T_VARIABLE","$expectedResponse",318],",",["T_WHITESPACE"," ",318],["T_STRING","sprintf",318],"(",["T_VARIABLE","$this",318],["T_OBJECT_OPERATOR","->",318],["T_STRING","tokenModel",318],")",")",";",["T_WHITESPACE","\n    ",318],"}",["T_WHITESPACE","\n\n    ",319],["T_PUBLIC","public",321],["T_WHITESPACE"," ",321],["T_FUNCTION","function",321],["T_WHITESPACE"," ",321],["T_STRING","testBeforeSave",321],"(",")",["T_WHITESPACE","\n    ",321],"{",["T_WHITESPACE","\n        ",322],["T_VARIABLE","$this",323],["T_OBJECT_OPERATOR","->",323],["T_STRING","assertEquals",323],"(",["T_VARIABLE","$this",323],["T_OBJECT_OPERATOR","->",323],["T_STRING","tokenModel",323],",",["T_WHITESPACE"," ",323],["T_VARIABLE","$this",323],["T_OBJECT_OPERATOR","->",323],["T_STRING","tokenModel",323],["T_OBJECT_OPERATOR","->",323],["T_STRING","beforeSave",323],"(",")",")",";",["T_WHITESPACE","\n    ",323],"}",["T_WHITESPACE","\n\n    ",324],["T_PUBLIC","public",326],["T_WHITESPACE"," ",326],["T_FUNCTION","function",326],["T_WHITESPACE"," ",326],["T_STRING","testGetVerifier",326],"(",")",["T_WHITESPACE","\n    ",326],"{",["T_WHITESPACE","\n        ",327],["T_VARIABLE","$verifier",328],["T_WHITESPACE"," ",328],"=",["T_WHITESPACE"," ",328],["T_CONSTANT_ENCAPSED_STRING","'testVerifier'",328],";",["T_WHITESPACE","\n        ",328],["T_VARIABLE","$this",329],["T_OBJECT_OPERATOR","->",329],["T_STRING","tokenModel",329],["T_OBJECT_OPERATOR","->",329],["T_STRING","setData",329],"(",["T_CONSTANT_ENCAPSED_STRING","'verifier'",329],",",["T_WHITESPACE"," ",329],["T_VARIABLE","$verifier",329],")",";",["T_WHITESPACE","\n        ",329],["T_VARIABLE","$this",330],["T_OBJECT_OPERATOR","->",330],["T_STRING","assertEquals",330],"(",["T_VARIABLE","$verifier",330],",",["T_WHITESPACE"," ",330],["T_VARIABLE","$this",330],["T_OBJECT_OPERATOR","->",330],["T_STRING","tokenModel",330],["T_OBJECT_OPERATOR","->",330],["T_STRING","getVerifier",330],"(",")",")",";",["T_WHITESPACE","\n    ",330],"}",["T_WHITESPACE","\n\n    ",331],["T_PUBLIC","public",333],["T_WHITESPACE"," ",333],["T_FUNCTION","function",333],["T_WHITESPACE"," ",333],["T_STRING","testLoadByConsumerIdAndUserType",333],"(",")",["T_WHITESPACE","\n    ",333],"{",["T_WHITESPACE","\n        ",334],["T_VARIABLE","$consumerId",335],["T_WHITESPACE"," ",335],"=",["T_WHITESPACE"," ",335],["T_LNUMBER","1",335],";",["T_WHITESPACE","\n        ",335],["T_VARIABLE","$userType",336],["T_WHITESPACE"," ",336],"=",["T_WHITESPACE"," ",336],["T_LNUMBER","1",336],";",["T_WHITESPACE","\n        ",336],["T_VARIABLE","$tokenData",337],["T_WHITESPACE"," ",337],"=",["T_WHITESPACE"," ",337],["T_CONSTANT_ENCAPSED_STRING","'testToken'",337],";",["T_WHITESPACE","\n        ",337],["T_VARIABLE","$data",338],["T_WHITESPACE"," ",338],"=",["T_WHITESPACE"," ",338],"[",["T_CONSTANT_ENCAPSED_STRING","'token'",338],["T_WHITESPACE"," ",338],["T_DOUBLE_ARROW","=>",338],["T_WHITESPACE"," ",338],["T_VARIABLE","$tokenData",338],"]",";",["T_WHITESPACE","\n\n        ",338],["T_VARIABLE","$this",340],["T_OBJECT_OPERATOR","->",340],["T_STRING","resourceMock",340],["T_OBJECT_OPERATOR","->",340],["T_STRING","expects",340],"(",["T_VARIABLE","$this",340],["T_OBJECT_OPERATOR","->",340],["T_STRING","once",340],"(",")",")",["T_OBJECT_OPERATOR","->",340],["T_STRING","method",340],"(",["T_CONSTANT_ENCAPSED_STRING","'selectTokenByConsumerIdAndUserType'",340],")",["T_OBJECT_OPERATOR","->",340],["T_STRING","willReturn",340],"(",["T_VARIABLE","$data",340],")",";",["T_WHITESPACE","\n        ",340],["T_VARIABLE","$actualToken",341],["T_WHITESPACE"," ",341],"=",["T_WHITESPACE"," ",341],["T_VARIABLE","$this",341],["T_OBJECT_OPERATOR","->",341],["T_STRING","tokenModel",341],["T_OBJECT_OPERATOR","->",341],["T_STRING","loadByConsumerIdAndUserType",341],"(",["T_VARIABLE","$consumerId",341],",",["T_WHITESPACE"," ",341],["T_VARIABLE","$userType",341],")",";",["T_WHITESPACE","\n        ",341],["T_VARIABLE","$this",342],["T_OBJECT_OPERATOR","->",342],["T_STRING","assertEquals",342],"(",["T_VARIABLE","$this",342],["T_OBJECT_OPERATOR","->",342],["T_STRING","tokenModel",342],",",["T_WHITESPACE"," ",342],["T_VARIABLE","$actualToken",342],")",";",["T_WHITESPACE","\n        ",342],["T_VARIABLE","$this",343],["T_OBJECT_OPERATOR","->",343],["T_STRING","assertEquals",343],"(",["T_VARIABLE","$tokenData",343],",",["T_WHITESPACE"," ",343],["T_VARIABLE","$actualToken",343],["T_OBJECT_OPERATOR","->",343],["T_STRING","getToken",343],"(",")",")",";",["T_WHITESPACE","\n    ",343],"}",["T_WHITESPACE","\n\n    ",344],["T_PUBLIC","public",346],["T_WHITESPACE"," ",346],["T_FUNCTION","function",346],["T_WHITESPACE"," ",346],["T_STRING","testLoadByAdminId",346],"(",")",["T_WHITESPACE","\n    ",346],"{",["T_WHITESPACE","\n        ",347],["T_VARIABLE","$adminId",348],["T_WHITESPACE"," ",348],"=",["T_WHITESPACE"," ",348],["T_LNUMBER","1",348],";",["T_WHITESPACE","\n        ",348],["T_VARIABLE","$tokenData",349],["T_WHITESPACE"," ",349],"=",["T_WHITESPACE"," ",349],["T_CONSTANT_ENCAPSED_STRING","'testToken'",349],";",["T_WHITESPACE","\n        ",349],["T_VARIABLE","$data",350],["T_WHITESPACE"," ",350],"=",["T_WHITESPACE"," ",350],"[",["T_CONSTANT_ENCAPSED_STRING","'token'",350],["T_WHITESPACE"," ",350],["T_DOUBLE_ARROW","=>",350],["T_WHITESPACE"," ",350],["T_VARIABLE","$tokenData",350],"]",";",["T_WHITESPACE","\n\n        ",350],["T_VARIABLE","$this",352],["T_OBJECT_OPERATOR","->",352],["T_STRING","resourceMock",352],["T_OBJECT_OPERATOR","->",352],["T_STRING","expects",352],"(",["T_VARIABLE","$this",352],["T_OBJECT_OPERATOR","->",352],["T_STRING","once",352],"(",")",")",["T_OBJECT_OPERATOR","->",352],["T_STRING","method",352],"(",["T_CONSTANT_ENCAPSED_STRING","'selectTokenByAdminId'",352],")",["T_OBJECT_OPERATOR","->",352],["T_STRING","willReturn",352],"(",["T_VARIABLE","$data",352],")",";",["T_WHITESPACE","\n        ",352],["T_VARIABLE","$actualToken",353],["T_WHITESPACE"," ",353],"=",["T_WHITESPACE"," ",353],["T_VARIABLE","$this",353],["T_OBJECT_OPERATOR","->",353],["T_STRING","tokenModel",353],["T_OBJECT_OPERATOR","->",353],["T_STRING","loadByAdminId",353],"(",["T_VARIABLE","$adminId",353],")",";",["T_WHITESPACE","\n        ",353],["T_VARIABLE","$this",354],["T_OBJECT_OPERATOR","->",354],["T_STRING","assertEquals",354],"(",["T_VARIABLE","$this",354],["T_OBJECT_OPERATOR","->",354],["T_STRING","tokenModel",354],",",["T_WHITESPACE"," ",354],["T_VARIABLE","$actualToken",354],")",";",["T_WHITESPACE","\n        ",354],["T_VARIABLE","$this",355],["T_OBJECT_OPERATOR","->",355],["T_STRING","assertEquals",355],"(",["T_VARIABLE","$tokenData",355],",",["T_WHITESPACE"," ",355],["T_VARIABLE","$actualToken",355],["T_OBJECT_OPERATOR","->",355],["T_STRING","getToken",355],"(",")",")",";",["T_WHITESPACE","\n    ",355],"}",["T_WHITESPACE","\n\n    ",356],["T_PUBLIC","public",358],["T_WHITESPACE"," ",358],["T_FUNCTION","function",358],["T_WHITESPACE"," ",358],["T_STRING","testLoadByCustomerId",358],"(",")",["T_WHITESPACE","\n    ",358],"{",["T_WHITESPACE","\n        ",359],["T_VARIABLE","$customerId",360],["T_WHITESPACE"," ",360],"=",["T_WHITESPACE"," ",360],["T_LNUMBER","1",360],";",["T_WHITESPACE","\n        ",360],["T_VARIABLE","$tokenData",361],["T_WHITESPACE"," ",361],"=",["T_WHITESPACE"," ",361],["T_CONSTANT_ENCAPSED_STRING","'testToken'",361],";",["T_WHITESPACE","\n        ",361],["T_VARIABLE","$data",362],["T_WHITESPACE"," ",362],"=",["T_WHITESPACE"," ",362],"[",["T_CONSTANT_ENCAPSED_STRING","'token'",362],["T_WHITESPACE"," ",362],["T_DOUBLE_ARROW","=>",362],["T_WHITESPACE"," ",362],["T_VARIABLE","$tokenData",362],"]",";",["T_WHITESPACE","\n\n        ",362],["T_VARIABLE","$this",364],["T_OBJECT_OPERATOR","->",364],["T_STRING","resourceMock",364],["T_OBJECT_OPERATOR","->",364],["T_STRING","expects",364],"(",["T_VARIABLE","$this",364],["T_OBJECT_OPERATOR","->",364],["T_STRING","once",364],"(",")",")",["T_OBJECT_OPERATOR","->",364],["T_STRING","method",364],"(",["T_CONSTANT_ENCAPSED_STRING","'selectTokenByCustomerId'",364],")",["T_OBJECT_OPERATOR","->",364],["T_STRING","willReturn",364],"(",["T_VARIABLE","$data",364],")",";",["T_WHITESPACE","\n        ",364],["T_VARIABLE","$actualToken",365],["T_WHITESPACE"," ",365],"=",["T_WHITESPACE"," ",365],["T_VARIABLE","$this",365],["T_OBJECT_OPERATOR","->",365],["T_STRING","tokenModel",365],["T_OBJECT_OPERATOR","->",365],["T_STRING","loadByCustomerId",365],"(",["T_VARIABLE","$customerId",365],")",";",["T_WHITESPACE","\n        ",365],["T_VARIABLE","$this",366],["T_OBJECT_OPERATOR","->",366],["T_STRING","assertEquals",366],"(",["T_VARIABLE","$this",366],["T_OBJECT_OPERATOR","->",366],["T_STRING","tokenModel",366],",",["T_WHITESPACE"," ",366],["T_VARIABLE","$actualToken",366],")",";",["T_WHITESPACE","\n        ",366],["T_VARIABLE","$this",367],["T_OBJECT_OPERATOR","->",367],["T_STRING","assertEquals",367],"(",["T_VARIABLE","$tokenData",367],",",["T_WHITESPACE"," ",367],["T_VARIABLE","$actualToken",367],["T_OBJECT_OPERATOR","->",367],["T_STRING","getToken",367],"(",")",")",";",["T_WHITESPACE","\n    ",367],"}",["T_WHITESPACE","\n\n    ",368],["T_PUBLIC","public",370],["T_WHITESPACE"," ",370],["T_FUNCTION","function",370],["T_WHITESPACE"," ",370],["T_STRING","testLoad",370],"(",")",["T_WHITESPACE","\n    ",370],"{",["T_WHITESPACE","\n        ",371],["T_VARIABLE","$token",372],["T_WHITESPACE"," ",372],"=",["T_WHITESPACE"," ",372],["T_CONSTANT_ENCAPSED_STRING","'testToken'",372],";",["T_WHITESPACE","\n\n        ",372],["T_VARIABLE","$this",374],["T_OBJECT_OPERATOR","->",374],["T_STRING","resourceMock",374],["T_OBJECT_OPERATOR","->",374],["T_STRING","expects",374],"(",["T_VARIABLE","$this",374],["T_OBJECT_OPERATOR","->",374],["T_STRING","once",374],"(",")",")",["T_OBJECT_OPERATOR","->",374],["T_STRING","method",374],"(",["T_CONSTANT_ENCAPSED_STRING","'load'",374],")",";",["T_WHITESPACE","\n        ",374],["T_VARIABLE","$actualToken",375],["T_WHITESPACE"," ",375],"=",["T_WHITESPACE"," ",375],["T_VARIABLE","$this",375],["T_OBJECT_OPERATOR","->",375],["T_STRING","tokenModel",375],["T_OBJECT_OPERATOR","->",375],["T_STRING","loadByToken",375],"(",["T_VARIABLE","$token",375],")",";",["T_WHITESPACE","\n        ",375],["T_VARIABLE","$this",376],["T_OBJECT_OPERATOR","->",376],["T_STRING","assertEquals",376],"(",["T_VARIABLE","$this",376],["T_OBJECT_OPERATOR","->",376],["T_STRING","tokenModel",376],",",["T_WHITESPACE"," ",376],["T_VARIABLE","$actualToken",376],")",";",["T_WHITESPACE","\n    ",376],"}",["T_WHITESPACE","\n\n    ",377],["T_PUBLIC","public",379],["T_WHITESPACE"," ",379],["T_FUNCTION","function",379],["T_WHITESPACE"," ",379],["T_STRING","testValidateIfNotCallbackEstablishedAndNotValid",379],"(",")",["T_WHITESPACE","\n    ",379],"{",["T_WHITESPACE","\n        ",380],["T_VARIABLE","$exceptionMessage",381],["T_WHITESPACE"," ",381],"=",["T_WHITESPACE"," ",381],["T_CONSTANT_ENCAPSED_STRING","'exceptionMessage'",381],";",["T_WHITESPACE","\n\n        ",381],["T_VARIABLE","$this",383],["T_OBJECT_OPERATOR","->",383],["T_STRING","tokenModel",383],["T_OBJECT_OPERATOR","->",383],["T_STRING","setCallbackUrl",383],"(",["T_CONSTANT_ENCAPSED_STRING","'notCallbackEstablished'",383],")",";",["T_WHITESPACE","\n        ",383],["T_VARIABLE","$this",384],["T_OBJECT_OPERATOR","->",384],["T_STRING","validatorMock",384],["T_OBJECT_OPERATOR","->",384],["T_STRING","expects",384],"(",["T_VARIABLE","$this",384],["T_OBJECT_OPERATOR","->",384],["T_STRING","once",384],"(",")",")",["T_OBJECT_OPERATOR","->",384],["T_STRING","method",384],"(",["T_CONSTANT_ENCAPSED_STRING","'isValid'",384],")",["T_OBJECT_OPERATOR","->",384],["T_STRING","willReturn",384],"(",["T_STRING","false",384],")",";",["T_WHITESPACE","\n        ",384],["T_VARIABLE","$this",385],["T_OBJECT_OPERATOR","->",385],["T_STRING","validatorMock",385],["T_OBJECT_OPERATOR","->",385],["T_STRING","expects",385],"(",["T_VARIABLE","$this",385],["T_OBJECT_OPERATOR","->",385],["T_STRING","once",385],"(",")",")",["T_OBJECT_OPERATOR","->",385],["T_STRING","method",385],"(",["T_CONSTANT_ENCAPSED_STRING","'getMessages'",385],")",["T_OBJECT_OPERATOR","->",385],["T_STRING","willReturn",385],"(","[",["T_VARIABLE","$exceptionMessage",385],"]",")",";",["T_WHITESPACE","\n\n        ",385],["T_VARIABLE","$this",387],["T_OBJECT_OPERATOR","->",387],["T_STRING","setExpectedException",387],"(",["T_NS_SEPARATOR","\\",387],["T_STRING","Magento",387],["T_NS_SEPARATOR","\\",387],["T_STRING","Framework",387],["T_NS_SEPARATOR","\\",387],["T_STRING","Oauth",387],["T_NS_SEPARATOR","\\",387],["T_STRING","Exception",387],["T_DOUBLE_COLON","::",387],["T_CLASS","class",387],",",["T_WHITESPACE"," ",387],["T_VARIABLE","$exceptionMessage",387],")",";",["T_WHITESPACE","\n\n        ",387],["T_VARIABLE","$this",389],["T_OBJECT_OPERATOR","->",389],["T_STRING","tokenModel",389],["T_OBJECT_OPERATOR","->",389],["T_STRING","validate",389],"(",")",";",["T_WHITESPACE","\n    ",389],"}",["T_WHITESPACE","\n\n    ",390],["T_PUBLIC","public",392],["T_WHITESPACE"," ",392],["T_FUNCTION","function",392],["T_WHITESPACE"," ",392],["T_STRING","testValidateIfSecretNotValid",392],"(",")",["T_WHITESPACE","\n    ",392],"{",["T_WHITESPACE","\n        ",393],["T_VARIABLE","$exceptionMessage",394],["T_WHITESPACE"," ",394],"=",["T_WHITESPACE"," ",394],["T_CONSTANT_ENCAPSED_STRING","'exceptionMessage'",394],";",["T_WHITESPACE","\n\n        ",394],["T_VARIABLE","$this",396],["T_OBJECT_OPERATOR","->",396],["T_STRING","tokenModel",396],["T_OBJECT_OPERATOR","->",396],["T_STRING","setCallbackUrl",396],"(",["T_CONSTANT_ENCAPSED_STRING","'notCallbackEstablished'",396],")",";",["T_WHITESPACE","\n        ",396],["T_VARIABLE","$this",397],["T_OBJECT_OPERATOR","->",397],["T_STRING","validatorMock",397],["T_OBJECT_OPERATOR","->",397],["T_STRING","expects",397],"(",["T_VARIABLE","$this",397],["T_OBJECT_OPERATOR","->",397],["T_STRING","once",397],"(",")",")",["T_OBJECT_OPERATOR","->",397],["T_STRING","method",397],"(",["T_CONSTANT_ENCAPSED_STRING","'isValid'",397],")",["T_OBJECT_OPERATOR","->",397],["T_STRING","willReturn",397],"(",["T_STRING","true",397],")",";",["T_WHITESPACE","\n\n        ",397],["T_VARIABLE","$this",399],["T_OBJECT_OPERATOR","->",399],["T_STRING","keyLengthFactoryMock",399],["T_OBJECT_OPERATOR","->",399],["T_STRING","expects",399],"(",["T_VARIABLE","$this",399],["T_OBJECT_OPERATOR","->",399],["T_STRING","once",399],"(",")",")",["T_OBJECT_OPERATOR","->",399],["T_STRING","method",399],"(",["T_CONSTANT_ENCAPSED_STRING","'create'",399],")",["T_OBJECT_OPERATOR","->",399],["T_STRING","willReturn",399],"(",["T_WHITESPACE","\n            ",399],["T_VARIABLE","$this",400],["T_OBJECT_OPERATOR","->",400],["T_STRING","validatorKeyLengthMock",400],["T_WHITESPACE","\n        ",400],")",";",["T_WHITESPACE","\n        ",401],["T_VARIABLE","$this",402],["T_OBJECT_OPERATOR","->",402],["T_STRING","validatorKeyLengthMock",402],["T_OBJECT_OPERATOR","->",402],["T_STRING","expects",402],"(",["T_VARIABLE","$this",402],["T_OBJECT_OPERATOR","->",402],["T_STRING","once",402],"(",")",")",["T_OBJECT_OPERATOR","->",402],["T_STRING","method",402],"(",["T_CONSTANT_ENCAPSED_STRING","'isValid'",402],")",["T_OBJECT_OPERATOR","->",402],["T_STRING","willReturn",402],"(",["T_STRING","false",402],")",";",["T_WHITESPACE","\n        ",402],["T_VARIABLE","$this",403],["T_OBJECT_OPERATOR","->",403],["T_STRING","validatorKeyLengthMock",403],["T_OBJECT_OPERATOR","->",403],["T_STRING","expects",403],"(",["T_VARIABLE","$this",403],["T_OBJECT_OPERATOR","->",403],["T_STRING","once",403],"(",")",")",["T_OBJECT_OPERATOR","->",403],["T_STRING","method",403],"(",["T_CONSTANT_ENCAPSED_STRING","'getMessages'",403],")",["T_OBJECT_OPERATOR","->",403],["T_STRING","willReturn",403],"(","[",["T_VARIABLE","$exceptionMessage",403],"]",")",";",["T_WHITESPACE","\n\n        ",403],["T_VARIABLE","$this",405],["T_OBJECT_OPERATOR","->",405],["T_STRING","setExpectedException",405],"(",["T_NS_SEPARATOR","\\",405],["T_STRING","Magento",405],["T_NS_SEPARATOR","\\",405],["T_STRING","Framework",405],["T_NS_SEPARATOR","\\",405],["T_STRING","Oauth",405],["T_NS_SEPARATOR","\\",405],["T_STRING","Exception",405],["T_DOUBLE_COLON","::",405],["T_CLASS","class",405],",",["T_WHITESPACE"," ",405],["T_VARIABLE","$exceptionMessage",405],")",";",["T_WHITESPACE","\n\n        ",405],["T_VARIABLE","$this",407],["T_OBJECT_OPERATOR","->",407],["T_STRING","tokenModel",407],["T_OBJECT_OPERATOR","->",407],["T_STRING","validate",407],"(",")",";",["T_WHITESPACE","\n    ",407],"}",["T_WHITESPACE","\n\n    ",408],["T_PUBLIC","public",410],["T_WHITESPACE"," ",410],["T_FUNCTION","function",410],["T_WHITESPACE"," ",410],["T_STRING","testValidateIfTokenNotValid",410],"(",")",["T_WHITESPACE","\n    ",410],"{",["T_WHITESPACE","\n        ",411],["T_VARIABLE","$exceptionMessage",412],["T_WHITESPACE"," ",412],"=",["T_WHITESPACE"," ",412],["T_CONSTANT_ENCAPSED_STRING","'exceptionMessage'",412],";",["T_WHITESPACE","\n        ",412],["T_VARIABLE","$token",413],["T_WHITESPACE"," ",413],"=",["T_WHITESPACE"," ",413],["T_CONSTANT_ENCAPSED_STRING","'token'",413],";",["T_WHITESPACE","\n        ",413],["T_VARIABLE","$secret",414],["T_WHITESPACE"," ",414],"=",["T_WHITESPACE"," ",414],["T_CONSTANT_ENCAPSED_STRING","'secret'",414],";",["T_WHITESPACE","\n\n        ",414],["T_VARIABLE","$this",416],["T_OBJECT_OPERATOR","->",416],["T_STRING","tokenModel",416],["T_OBJECT_OPERATOR","->",416],["T_STRING","setCallbackUrl",416],"(",["T_CONSTANT_ENCAPSED_STRING","'notCallbackEstablished'",416],")",";",["T_WHITESPACE","\n        ",416],["T_VARIABLE","$this",417],["T_OBJECT_OPERATOR","->",417],["T_STRING","validatorMock",417],["T_OBJECT_OPERATOR","->",417],["T_STRING","expects",417],"(",["T_VARIABLE","$this",417],["T_OBJECT_OPERATOR","->",417],["T_STRING","once",417],"(",")",")",["T_OBJECT_OPERATOR","->",417],["T_STRING","method",417],"(",["T_CONSTANT_ENCAPSED_STRING","'isValid'",417],")",["T_OBJECT_OPERATOR","->",417],["T_STRING","willReturn",417],"(",["T_STRING","true",417],")",";",["T_WHITESPACE","\n\n        ",417],["T_VARIABLE","$this",419],["T_OBJECT_OPERATOR","->",419],["T_STRING","keyLengthFactoryMock",419],["T_OBJECT_OPERATOR","->",419],["T_STRING","expects",419],"(",["T_VARIABLE","$this",419],["T_OBJECT_OPERATOR","->",419],["T_STRING","once",419],"(",")",")",["T_WHITESPACE","\n            ",419],["T_OBJECT_OPERATOR","->",420],["T_STRING","method",420],"(",["T_CONSTANT_ENCAPSED_STRING","'create'",420],")",["T_WHITESPACE","\n            ",420],["T_OBJECT_OPERATOR","->",421],["T_STRING","willReturn",421],"(",["T_VARIABLE","$this",421],["T_OBJECT_OPERATOR","->",421],["T_STRING","validatorKeyLengthMock",421],")",";",["T_WHITESPACE","\n\n        ",421],["T_VARIABLE","$this",423],["T_OBJECT_OPERATOR","->",423],["T_STRING","tokenModel",423],["T_OBJECT_OPERATOR","->",423],["T_STRING","setSecret",423],"(",["T_VARIABLE","$secret",423],")",";",["T_WHITESPACE","\n        ",423],["T_VARIABLE","$this",424],["T_OBJECT_OPERATOR","->",424],["T_STRING","tokenModel",424],["T_OBJECT_OPERATOR","->",424],["T_STRING","setToken",424],"(",["T_VARIABLE","$token",424],")",";",["T_WHITESPACE","\n        ",424],["T_VARIABLE","$this",425],["T_OBJECT_OPERATOR","->",425],["T_STRING","validatorKeyLengthMock",425],["T_OBJECT_OPERATOR","->",425],["T_STRING","expects",425],"(",["T_VARIABLE","$this",425],["T_OBJECT_OPERATOR","->",425],["T_STRING","exactly",425],"(",["T_LNUMBER","2",425],")",")",["T_OBJECT_OPERATOR","->",425],["T_STRING","method",425],"(",["T_CONSTANT_ENCAPSED_STRING","'isValid'",425],")",["T_OBJECT_OPERATOR","->",425],["T_STRING","willReturnMap",425],"(",["T_WHITESPACE","\n            ",425],"[",["T_WHITESPACE","\n                ",426],"[",["T_VARIABLE","$secret",427],",",["T_WHITESPACE"," ",427],["T_STRING","true",427],"]",",",["T_WHITESPACE","\n                ",427],"[",["T_VARIABLE","$token",428],",",["T_WHITESPACE"," ",428],["T_STRING","false",428],"]",["T_WHITESPACE","\n            ",428],"]",["T_WHITESPACE","\n        ",429],")",";",["T_WHITESPACE","\n        ",430],["T_VARIABLE","$this",431],["T_OBJECT_OPERATOR","->",431],["T_STRING","validatorKeyLengthMock",431],["T_OBJECT_OPERATOR","->",431],["T_STRING","expects",431],"(",["T_VARIABLE","$this",431],["T_OBJECT_OPERATOR","->",431],["T_STRING","once",431],"(",")",")",["T_OBJECT_OPERATOR","->",431],["T_STRING","method",431],"(",["T_CONSTANT_ENCAPSED_STRING","'getMessages'",431],")",["T_OBJECT_OPERATOR","->",431],["T_STRING","willReturn",431],"(","[",["T_VARIABLE","$exceptionMessage",431],"]",")",";",["T_WHITESPACE","\n        ",431],["T_VARIABLE","$this",432],["T_OBJECT_OPERATOR","->",432],["T_STRING","setExpectedException",432],"(",["T_NS_SEPARATOR","\\",432],["T_STRING","Magento",432],["T_NS_SEPARATOR","\\",432],["T_STRING","Framework",432],["T_NS_SEPARATOR","\\",432],["T_STRING","Oauth",432],["T_NS_SEPARATOR","\\",432],["T_STRING","Exception",432],["T_DOUBLE_COLON","::",432],["T_CLASS","class",432],",",["T_WHITESPACE"," ",432],["T_VARIABLE","$exceptionMessage",432],")",";",["T_WHITESPACE","\n\n        ",432],["T_VARIABLE","$this",434],["T_OBJECT_OPERATOR","->",434],["T_STRING","tokenModel",434],["T_OBJECT_OPERATOR","->",434],["T_STRING","validate",434],"(",")",";",["T_WHITESPACE","\n    ",434],"}",["T_WHITESPACE","\n\n    ",435],["T_PUBLIC","public",437],["T_WHITESPACE"," ",437],["T_FUNCTION","function",437],["T_WHITESPACE"," ",437],["T_STRING","testValidateIfVerifierNotValid",437],"(",")",["T_WHITESPACE","\n    ",437],"{",["T_WHITESPACE","\n        ",438],["T_VARIABLE","$exceptionMessage",439],["T_WHITESPACE"," ",439],"=",["T_WHITESPACE"," ",439],["T_CONSTANT_ENCAPSED_STRING","'exceptionMessage'",439],";",["T_WHITESPACE","\n        ",439],["T_VARIABLE","$secret",440],["T_WHITESPACE"," ",440],"=",["T_WHITESPACE"," ",440],["T_CONSTANT_ENCAPSED_STRING","'secret'",440],";",["T_WHITESPACE","\n        ",440],["T_VARIABLE","$token",441],["T_WHITESPACE"," ",441],"=",["T_WHITESPACE"," ",441],["T_CONSTANT_ENCAPSED_STRING","'token'",441],";",["T_WHITESPACE","\n        ",441],["T_VARIABLE","$verifier",442],["T_WHITESPACE"," ",442],"=",["T_WHITESPACE"," ",442],["T_CONSTANT_ENCAPSED_STRING","'isSetAndNotValid'",442],";",["T_WHITESPACE","\n\n        ",442],["T_VARIABLE","$this",444],["T_OBJECT_OPERATOR","->",444],["T_STRING","tokenModel",444],["T_OBJECT_OPERATOR","->",444],["T_STRING","setCallbackUrl",444],"(",["T_CONSTANT_ENCAPSED_STRING","'notCallbackEstablished'",444],")",";",["T_WHITESPACE","\n        ",444],["T_VARIABLE","$this",445],["T_OBJECT_OPERATOR","->",445],["T_STRING","validatorMock",445],["T_OBJECT_OPERATOR","->",445],["T_STRING","expects",445],"(",["T_VARIABLE","$this",445],["T_OBJECT_OPERATOR","->",445],["T_STRING","once",445],"(",")",")",["T_OBJECT_OPERATOR","->",445],["T_STRING","method",445],"(",["T_CONSTANT_ENCAPSED_STRING","'isValid'",445],")",["T_OBJECT_OPERATOR","->",445],["T_STRING","willReturn",445],"(",["T_STRING","true",445],")",";",["T_WHITESPACE","\n\n        ",445],["T_VARIABLE","$this",447],["T_OBJECT_OPERATOR","->",447],["T_STRING","keyLengthFactoryMock",447],["T_OBJECT_OPERATOR","->",447],["T_STRING","expects",447],"(",["T_VARIABLE","$this",447],["T_OBJECT_OPERATOR","->",447],["T_STRING","once",447],"(",")",")",["T_WHITESPACE","\n            ",447],["T_OBJECT_OPERATOR","->",448],["T_STRING","method",448],"(",["T_CONSTANT_ENCAPSED_STRING","'create'",448],")",["T_WHITESPACE","\n            ",448],["T_OBJECT_OPERATOR","->",449],["T_STRING","willReturn",449],"(",["T_VARIABLE","$this",449],["T_OBJECT_OPERATOR","->",449],["T_STRING","validatorKeyLengthMock",449],")",";",["T_WHITESPACE","\n\n        ",449],["T_VARIABLE","$this",451],["T_OBJECT_OPERATOR","->",451],["T_STRING","tokenModel",451],["T_OBJECT_OPERATOR","->",451],["T_STRING","setSecret",451],"(",["T_VARIABLE","$secret",451],")",";",["T_WHITESPACE","\n        ",451],["T_VARIABLE","$this",452],["T_OBJECT_OPERATOR","->",452],["T_STRING","tokenModel",452],["T_OBJECT_OPERATOR","->",452],["T_STRING","setToken",452],"(",["T_VARIABLE","$token",452],")",";",["T_WHITESPACE","\n        ",452],["T_VARIABLE","$this",453],["T_OBJECT_OPERATOR","->",453],["T_STRING","tokenModel",453],["T_OBJECT_OPERATOR","->",453],["T_STRING","setData",453],"(",["T_CONSTANT_ENCAPSED_STRING","'verifier'",453],",",["T_WHITESPACE"," ",453],["T_VARIABLE","$verifier",453],")",";",["T_WHITESPACE","\n        ",453],["T_VARIABLE","$this",454],["T_OBJECT_OPERATOR","->",454],["T_STRING","validatorKeyLengthMock",454],["T_OBJECT_OPERATOR","->",454],["T_STRING","expects",454],"(",["T_VARIABLE","$this",454],["T_OBJECT_OPERATOR","->",454],["T_STRING","exactly",454],"(",["T_LNUMBER","3",454],")",")",["T_OBJECT_OPERATOR","->",454],["T_STRING","method",454],"(",["T_CONSTANT_ENCAPSED_STRING","'isValid'",454],")",["T_OBJECT_OPERATOR","->",454],["T_STRING","willReturnMap",454],"(",["T_WHITESPACE","\n            ",454],"[",["T_WHITESPACE","\n                ",455],"[",["T_VARIABLE","$secret",456],",",["T_WHITESPACE"," ",456],["T_STRING","true",456],"]",",",["T_WHITESPACE","\n                ",456],"[",["T_VARIABLE","$token",457],",",["T_WHITESPACE"," ",457],["T_STRING","true",457],"]",",",["T_WHITESPACE","\n                ",457],"[",["T_VARIABLE","$verifier",458],",",["T_WHITESPACE"," ",458],["T_STRING","false",458],"]",",",["T_WHITESPACE","\n            ",458],"]",["T_WHITESPACE","\n        ",459],")",";",["T_WHITESPACE","\n        ",460],["T_VARIABLE","$this",461],["T_OBJECT_OPERATOR","->",461],["T_STRING","validatorKeyLengthMock",461],["T_OBJECT_OPERATOR","->",461],["T_STRING","expects",461],"(",["T_VARIABLE","$this",461],["T_OBJECT_OPERATOR","->",461],["T_STRING","once",461],"(",")",")",["T_OBJECT_OPERATOR","->",461],["T_STRING","method",461],"(",["T_CONSTANT_ENCAPSED_STRING","'getMessages'",461],")",["T_OBJECT_OPERATOR","->",461],["T_STRING","willReturn",461],"(","[",["T_VARIABLE","$exceptionMessage",461],"]",")",";",["T_WHITESPACE","\n        ",461],["T_VARIABLE","$this",462],["T_OBJECT_OPERATOR","->",462],["T_STRING","setExpectedException",462],"(",["T_NS_SEPARATOR","\\",462],["T_STRING","Magento",462],["T_NS_SEPARATOR","\\",462],["T_STRING","Framework",462],["T_NS_SEPARATOR","\\",462],["T_STRING","Oauth",462],["T_NS_SEPARATOR","\\",462],["T_STRING","Exception",462],["T_DOUBLE_COLON","::",462],["T_CLASS","class",462],",",["T_WHITESPACE"," ",462],["T_VARIABLE","$exceptionMessage",462],")",";",["T_WHITESPACE","\n\n        ",462],["T_VARIABLE","$this",464],["T_OBJECT_OPERATOR","->",464],["T_STRING","tokenModel",464],["T_OBJECT_OPERATOR","->",464],["T_STRING","validate",464],"(",")",";",["T_WHITESPACE","\n    ",464],"}",["T_WHITESPACE","\n\n    ",465],["T_PUBLIC","public",467],["T_WHITESPACE"," ",467],["T_FUNCTION","function",467],["T_WHITESPACE"," ",467],["T_STRING","testValidateIfVerifierIsNotSet",467],"(",")",["T_WHITESPACE","\n    ",467],"{",["T_WHITESPACE","\n        ",468],["T_VARIABLE","$token",469],["T_WHITESPACE"," ",469],"=",["T_WHITESPACE"," ",469],["T_CONSTANT_ENCAPSED_STRING","'token'",469],";",["T_WHITESPACE","\n        ",469],["T_VARIABLE","$secret",470],["T_WHITESPACE"," ",470],"=",["T_WHITESPACE"," ",470],["T_CONSTANT_ENCAPSED_STRING","'secret'",470],";",["T_WHITESPACE","\n        ",470],["T_VARIABLE","$verifier",471],["T_WHITESPACE"," ",471],"=",["T_WHITESPACE"," ",471],["T_STRING","null",471],";",["T_WHITESPACE","\n\n        ",471],["T_VARIABLE","$this",473],["T_OBJECT_OPERATOR","->",473],["T_STRING","tokenModel",473],["T_OBJECT_OPERATOR","->",473],["T_STRING","setCallbackUrl",473],"(",["T_CONSTANT_ENCAPSED_STRING","'notCallbackEstablished'",473],")",";",["T_WHITESPACE","\n        ",473],["T_VARIABLE","$this",474],["T_OBJECT_OPERATOR","->",474],["T_STRING","validatorMock",474],["T_OBJECT_OPERATOR","->",474],["T_STRING","expects",474],"(",["T_VARIABLE","$this",474],["T_OBJECT_OPERATOR","->",474],["T_STRING","once",474],"(",")",")",["T_OBJECT_OPERATOR","->",474],["T_STRING","method",474],"(",["T_CONSTANT_ENCAPSED_STRING","'isValid'",474],")",["T_OBJECT_OPERATOR","->",474],["T_STRING","willReturn",474],"(",["T_STRING","true",474],")",";",["T_WHITESPACE","\n\n        ",474],["T_VARIABLE","$this",476],["T_OBJECT_OPERATOR","->",476],["T_STRING","keyLengthFactoryMock",476],["T_OBJECT_OPERATOR","->",476],["T_STRING","expects",476],"(",["T_VARIABLE","$this",476],["T_OBJECT_OPERATOR","->",476],["T_STRING","once",476],"(",")",")",["T_OBJECT_OPERATOR","->",476],["T_STRING","method",476],"(",["T_CONSTANT_ENCAPSED_STRING","'create'",476],")",["T_OBJECT_OPERATOR","->",476],["T_STRING","willReturn",476],"(",["T_WHITESPACE","\n            ",476],["T_VARIABLE","$this",477],["T_OBJECT_OPERATOR","->",477],["T_STRING","validatorKeyLengthMock",477],["T_WHITESPACE","\n        ",477],")",";",["T_WHITESPACE","\n\n        ",478],["T_VARIABLE","$this",480],["T_OBJECT_OPERATOR","->",480],["T_STRING","tokenModel",480],["T_OBJECT_OPERATOR","->",480],["T_STRING","setSecret",480],"(",["T_VARIABLE","$secret",480],")",";",["T_WHITESPACE","\n        ",480],["T_VARIABLE","$this",481],["T_OBJECT_OPERATOR","->",481],["T_STRING","tokenModel",481],["T_OBJECT_OPERATOR","->",481],["T_STRING","setToken",481],"(",["T_VARIABLE","$token",481],")",";",["T_WHITESPACE","\n        ",481],["T_VARIABLE","$this",482],["T_OBJECT_OPERATOR","->",482],["T_STRING","tokenModel",482],["T_OBJECT_OPERATOR","->",482],["T_STRING","setData",482],"(",["T_CONSTANT_ENCAPSED_STRING","'verifier'",482],",",["T_WHITESPACE"," ",482],["T_VARIABLE","$verifier",482],")",";",["T_WHITESPACE","\n        ",482],["T_VARIABLE","$this",483],["T_OBJECT_OPERATOR","->",483],["T_STRING","validatorKeyLengthMock",483],["T_OBJECT_OPERATOR","->",483],["T_STRING","expects",483],"(",["T_VARIABLE","$this",483],["T_OBJECT_OPERATOR","->",483],["T_STRING","exactly",483],"(",["T_LNUMBER","2",483],")",")",["T_OBJECT_OPERATOR","->",483],["T_STRING","method",483],"(",["T_CONSTANT_ENCAPSED_STRING","'isValid'",483],")",["T_OBJECT_OPERATOR","->",483],["T_STRING","willReturnMap",483],"(",["T_WHITESPACE","\n            ",483],"[",["T_WHITESPACE","\n                ",484],"[",["T_VARIABLE","$secret",485],",",["T_WHITESPACE"," ",485],["T_STRING","true",485],"]",",",["T_WHITESPACE","\n                ",485],"[",["T_VARIABLE","$token",486],",",["T_WHITESPACE"," ",486],["T_STRING","true",486],"]",",",["T_WHITESPACE","\n            ",486],"]",["T_WHITESPACE","\n        ",487],")",";",["T_WHITESPACE","\n        ",488],["T_VARIABLE","$this",489],["T_OBJECT_OPERATOR","->",489],["T_STRING","assertTrue",489],"(",["T_VARIABLE","$this",489],["T_OBJECT_OPERATOR","->",489],["T_STRING","tokenModel",489],["T_OBJECT_OPERATOR","->",489],["T_STRING","validate",489],"(",")",")",";",["T_WHITESPACE","\n    ",489],"}",["T_WHITESPACE","\n\n    ",490],["T_PUBLIC","public",492],["T_WHITESPACE"," ",492],["T_FUNCTION","function",492],["T_WHITESPACE"," ",492],["T_STRING","testValidate",492],"(",")",["T_WHITESPACE","\n    ",492],"{",["T_WHITESPACE","\n        ",493],["T_VARIABLE","$token",494],["T_WHITESPACE"," ",494],"=",["T_WHITESPACE"," ",494],["T_CONSTANT_ENCAPSED_STRING","'token'",494],";",["T_WHITESPACE","\n        ",494],["T_VARIABLE","$secret",495],["T_WHITESPACE"," ",495],"=",["T_WHITESPACE"," ",495],["T_CONSTANT_ENCAPSED_STRING","'secret'",495],";",["T_WHITESPACE","\n        ",495],["T_VARIABLE","$verifier",496],["T_WHITESPACE"," ",496],"=",["T_WHITESPACE"," ",496],["T_CONSTANT_ENCAPSED_STRING","'verifier'",496],";",["T_WHITESPACE","\n\n        ",496],["T_VARIABLE","$this",498],["T_OBJECT_OPERATOR","->",498],["T_STRING","tokenModel",498],["T_OBJECT_OPERATOR","->",498],["T_STRING","setCallbackUrl",498],"(",["T_CONSTANT_ENCAPSED_STRING","'notCallbackEstablished'",498],")",";",["T_WHITESPACE","\n        ",498],["T_VARIABLE","$this",499],["T_OBJECT_OPERATOR","->",499],["T_STRING","validatorMock",499],["T_OBJECT_OPERATOR","->",499],["T_STRING","expects",499],"(",["T_VARIABLE","$this",499],["T_OBJECT_OPERATOR","->",499],["T_STRING","once",499],"(",")",")",["T_OBJECT_OPERATOR","->",499],["T_STRING","method",499],"(",["T_CONSTANT_ENCAPSED_STRING","'isValid'",499],")",["T_OBJECT_OPERATOR","->",499],["T_STRING","willReturn",499],"(",["T_STRING","true",499],")",";",["T_WHITESPACE","\n\n        ",499],["T_VARIABLE","$this",501],["T_OBJECT_OPERATOR","->",501],["T_STRING","keyLengthFactoryMock",501],["T_OBJECT_OPERATOR","->",501],["T_STRING","expects",501],"(",["T_VARIABLE","$this",501],["T_OBJECT_OPERATOR","->",501],["T_STRING","once",501],"(",")",")",["T_OBJECT_OPERATOR","->",501],["T_STRING","method",501],"(",["T_CONSTANT_ENCAPSED_STRING","'create'",501],")",["T_OBJECT_OPERATOR","->",501],["T_STRING","willReturn",501],"(",["T_WHITESPACE","\n            ",501],["T_VARIABLE","$this",502],["T_OBJECT_OPERATOR","->",502],["T_STRING","validatorKeyLengthMock",502],["T_WHITESPACE","\n        ",502],")",";",["T_WHITESPACE","\n\n        ",503],["T_VARIABLE","$this",505],["T_OBJECT_OPERATOR","->",505],["T_STRING","tokenModel",505],["T_OBJECT_OPERATOR","->",505],["T_STRING","setSecret",505],"(",["T_VARIABLE","$secret",505],")",";",["T_WHITESPACE","\n        ",505],["T_VARIABLE","$this",506],["T_OBJECT_OPERATOR","->",506],["T_STRING","tokenModel",506],["T_OBJECT_OPERATOR","->",506],["T_STRING","setToken",506],"(",["T_VARIABLE","$token",506],")",";",["T_WHITESPACE","\n        ",506],["T_VARIABLE","$this",507],["T_OBJECT_OPERATOR","->",507],["T_STRING","tokenModel",507],["T_OBJECT_OPERATOR","->",507],["T_STRING","setData",507],"(",["T_CONSTANT_ENCAPSED_STRING","'verifier'",507],",",["T_WHITESPACE"," ",507],["T_VARIABLE","$verifier",507],")",";",["T_WHITESPACE","\n        ",507],["T_VARIABLE","$this",508],["T_OBJECT_OPERATOR","->",508],["T_STRING","validatorKeyLengthMock",508],["T_OBJECT_OPERATOR","->",508],["T_STRING","expects",508],"(",["T_VARIABLE","$this",508],["T_OBJECT_OPERATOR","->",508],["T_STRING","exactly",508],"(",["T_LNUMBER","3",508],")",")",["T_OBJECT_OPERATOR","->",508],["T_STRING","method",508],"(",["T_CONSTANT_ENCAPSED_STRING","'isValid'",508],")",["T_OBJECT_OPERATOR","->",508],["T_STRING","willReturnMap",508],"(",["T_WHITESPACE","\n            ",508],"[",["T_WHITESPACE","\n                ",509],"[",["T_VARIABLE","$secret",510],",",["T_WHITESPACE"," ",510],["T_STRING","true",510],"]",",",["T_WHITESPACE","\n                ",510],"[",["T_VARIABLE","$token",511],",",["T_WHITESPACE"," ",511],["T_STRING","true",511],"]",",",["T_WHITESPACE","\n                ",511],"[",["T_VARIABLE","$verifier",512],",",["T_WHITESPACE"," ",512],["T_STRING","true",512],"]",",",["T_WHITESPACE","\n            ",512],"]",["T_WHITESPACE","\n        ",513],")",";",["T_WHITESPACE","\n        ",514],["T_VARIABLE","$this",515],["T_OBJECT_OPERATOR","->",515],["T_STRING","assertTrue",515],"(",["T_VARIABLE","$this",515],["T_OBJECT_OPERATOR","->",515],["T_STRING","tokenModel",515],["T_OBJECT_OPERATOR","->",515],["T_STRING","validate",515],"(",")",")",";",["T_WHITESPACE","\n    ",515],"}",["T_WHITESPACE","\n",516],"}",["T_WHITESPACE","\n",517]]
[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Copyright \u00c2\u00a9 2013-2017 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n *\/",2],["T_WHITESPACE","\n",5],["T_NAMESPACE","namespace",6],["T_WHITESPACE"," ",6],["T_STRING","Magento",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Indexer",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Model",6],";",["T_WHITESPACE","\n\n",6],["T_USE","use",8],["T_WHITESPACE"," ",8],["T_STRING","Magento",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Framework",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Indexer",8],["T_NS_SEPARATOR","\\",8],["T_STRING","ConfigInterface",8],";",["T_WHITESPACE","\n",8],["T_USE","use",9],["T_WHITESPACE"," ",9],["T_STRING","Magento",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Framework",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Indexer",9],["T_NS_SEPARATOR","\\",9],["T_STRING","IndexerInterface",9],";",["T_WHITESPACE","\n",9],["T_USE","use",10],["T_WHITESPACE"," ",10],["T_STRING","Magento",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Framework",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Indexer",10],["T_NS_SEPARATOR","\\",10],["T_STRING","StateInterface",10],";",["T_WHITESPACE","\n\n",10],["T_CLASS","class",12],["T_WHITESPACE"," ",12],["T_STRING","Processor",12],["T_WHITESPACE","\n",12],"{",["T_WHITESPACE","\n    ",13],["T_DOC_COMMENT","\/**\n     * @var ConfigInterface\n     *\/",14],["T_WHITESPACE","\n    ",16],["T_PROTECTED","protected",17],["T_WHITESPACE"," ",17],["T_VARIABLE","$config",17],";",["T_WHITESPACE","\n\n    ",17],["T_DOC_COMMENT","\/**\n     * @var IndexerFactory\n     *\/",19],["T_WHITESPACE","\n    ",21],["T_PROTECTED","protected",22],["T_WHITESPACE"," ",22],["T_VARIABLE","$indexerFactory",22],";",["T_WHITESPACE","\n\n    ",22],["T_DOC_COMMENT","\/**\n     * @var Indexer\\CollectionFactory\n     *\/",24],["T_WHITESPACE","\n    ",26],["T_PROTECTED","protected",27],["T_WHITESPACE"," ",27],["T_VARIABLE","$indexersFactory",27],";",["T_WHITESPACE","\n\n    ",27],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Framework\\Mview\\ProcessorInterface\n     *\/",29],["T_WHITESPACE","\n    ",31],["T_PROTECTED","protected",32],["T_WHITESPACE"," ",32],["T_VARIABLE","$mviewProcessor",32],";",["T_WHITESPACE","\n\n    ",32],["T_DOC_COMMENT","\/**\n     * @param ConfigInterface $config\n     * @param IndexerFactory $indexerFactory\n     * @param Indexer\\CollectionFactory $indexersFactory\n     * @param \\Magento\\Framework\\Mview\\ProcessorInterface $mviewProcessor\n     *\/",34],["T_WHITESPACE","\n    ",39],["T_PUBLIC","public",40],["T_WHITESPACE"," ",40],["T_FUNCTION","function",40],["T_WHITESPACE"," ",40],["T_STRING","__construct",40],"(",["T_WHITESPACE","\n        ",40],["T_STRING","ConfigInterface",41],["T_WHITESPACE"," ",41],["T_VARIABLE","$config",41],",",["T_WHITESPACE","\n        ",41],["T_STRING","IndexerFactory",42],["T_WHITESPACE"," ",42],["T_VARIABLE","$indexerFactory",42],",",["T_WHITESPACE","\n        ",42],["T_STRING","Indexer",43],["T_NS_SEPARATOR","\\",43],["T_STRING","CollectionFactory",43],["T_WHITESPACE"," ",43],["T_VARIABLE","$indexersFactory",43],",",["T_WHITESPACE","\n        ",43],["T_NS_SEPARATOR","\\",44],["T_STRING","Magento",44],["T_NS_SEPARATOR","\\",44],["T_STRING","Framework",44],["T_NS_SEPARATOR","\\",44],["T_STRING","Mview",44],["T_NS_SEPARATOR","\\",44],["T_STRING","ProcessorInterface",44],["T_WHITESPACE"," ",44],["T_VARIABLE","$mviewProcessor",44],["T_WHITESPACE","\n    ",44],")",["T_WHITESPACE"," ",45],"{",["T_WHITESPACE","\n        ",45],["T_VARIABLE","$this",46],["T_OBJECT_OPERATOR","->",46],["T_STRING","config",46],["T_WHITESPACE"," ",46],"=",["T_WHITESPACE"," ",46],["T_VARIABLE","$config",46],";",["T_WHITESPACE","\n        ",46],["T_VARIABLE","$this",47],["T_OBJECT_OPERATOR","->",47],["T_STRING","indexerFactory",47],["T_WHITESPACE"," ",47],"=",["T_WHITESPACE"," ",47],["T_VARIABLE","$indexerFactory",47],";",["T_WHITESPACE","\n        ",47],["T_VARIABLE","$this",48],["T_OBJECT_OPERATOR","->",48],["T_STRING","indexersFactory",48],["T_WHITESPACE"," ",48],"=",["T_WHITESPACE"," ",48],["T_VARIABLE","$indexersFactory",48],";",["T_WHITESPACE","\n        ",48],["T_VARIABLE","$this",49],["T_OBJECT_OPERATOR","->",49],["T_STRING","mviewProcessor",49],["T_WHITESPACE"," ",49],"=",["T_WHITESPACE"," ",49],["T_VARIABLE","$mviewProcessor",49],";",["T_WHITESPACE","\n    ",49],"}",["T_WHITESPACE","\n\n    ",50],["T_DOC_COMMENT","\/**\n     * Regenerate indexes for all invalid indexers\n     *\n     * @return void\n     *\/",52],["T_WHITESPACE","\n    ",56],["T_PUBLIC","public",57],["T_WHITESPACE"," ",57],["T_FUNCTION","function",57],["T_WHITESPACE"," ",57],["T_STRING","reindexAllInvalid",57],"(",")",["T_WHITESPACE","\n    ",57],"{",["T_WHITESPACE","\n        ",58],["T_VARIABLE","$sharedIndexesComplete",59],["T_WHITESPACE"," ",59],"=",["T_WHITESPACE"," ",59],"[","]",";",["T_WHITESPACE","\n        ",59],["T_FOREACH","foreach",60],["T_WHITESPACE"," ",60],"(",["T_STRING","array_keys",60],"(",["T_VARIABLE","$this",60],["T_OBJECT_OPERATOR","->",60],["T_STRING","config",60],["T_OBJECT_OPERATOR","->",60],["T_STRING","getIndexers",60],"(",")",")",["T_WHITESPACE"," ",60],["T_AS","as",60],["T_WHITESPACE"," ",60],["T_VARIABLE","$indexerId",60],")",["T_WHITESPACE"," ",60],"{",["T_WHITESPACE","\n            ",60],["T_DOC_COMMENT","\/** @var Indexer $indexer *\/",61],["T_WHITESPACE","\n            ",61],["T_VARIABLE","$indexer",62],["T_WHITESPACE"," ",62],"=",["T_WHITESPACE"," ",62],["T_VARIABLE","$this",62],["T_OBJECT_OPERATOR","->",62],["T_STRING","indexerFactory",62],["T_OBJECT_OPERATOR","->",62],["T_STRING","create",62],"(",")",";",["T_WHITESPACE","\n            ",62],["T_VARIABLE","$indexer",63],["T_OBJECT_OPERATOR","->",63],["T_STRING","load",63],"(",["T_VARIABLE","$indexerId",63],")",";",["T_WHITESPACE","\n            ",63],["T_VARIABLE","$indexerConfig",64],["T_WHITESPACE"," ",64],"=",["T_WHITESPACE"," ",64],["T_VARIABLE","$this",64],["T_OBJECT_OPERATOR","->",64],["T_STRING","config",64],["T_OBJECT_OPERATOR","->",64],["T_STRING","getIndexer",64],"(",["T_VARIABLE","$indexerId",64],")",";",["T_WHITESPACE","\n            ",64],["T_IF","if",65],["T_WHITESPACE"," ",65],"(",["T_VARIABLE","$indexer",65],["T_OBJECT_OPERATOR","->",65],["T_STRING","isInvalid",65],"(",")",")",["T_WHITESPACE"," ",65],"{",["T_WHITESPACE","\n                ",65],["T_COMMENT","\/\/ Skip indexers having shared index that was already complete\n",66],["T_WHITESPACE","                ",67],["T_IF","if",67],["T_WHITESPACE"," ",67],"(","!",["T_STRING","in_array",67],"(",["T_VARIABLE","$indexerConfig",67],"[",["T_CONSTANT_ENCAPSED_STRING","'shared_index'",67],"]",",",["T_WHITESPACE"," ",67],["T_VARIABLE","$sharedIndexesComplete",67],")",")",["T_WHITESPACE"," ",67],"{",["T_WHITESPACE","\n                    ",67],["T_VARIABLE","$indexer",68],["T_OBJECT_OPERATOR","->",68],["T_STRING","reindexAll",68],"(",")",";",["T_WHITESPACE","\n                ",68],"}",["T_WHITESPACE"," ",69],["T_ELSE","else",69],["T_WHITESPACE"," ",69],"{",["T_WHITESPACE","\n                    ",69],["T_DOC_COMMENT","\/** @var \\Magento\\Indexer\\Model\\Indexer\\State $state *\/",70],["T_WHITESPACE","\n                    ",70],["T_VARIABLE","$state",71],["T_WHITESPACE"," ",71],"=",["T_WHITESPACE"," ",71],["T_VARIABLE","$indexer",71],["T_OBJECT_OPERATOR","->",71],["T_STRING","getState",71],"(",")",";",["T_WHITESPACE","\n                    ",71],["T_VARIABLE","$state",72],["T_OBJECT_OPERATOR","->",72],["T_STRING","setStatus",72],"(",["T_STRING","StateInterface",72],["T_DOUBLE_COLON","::",72],["T_STRING","STATUS_VALID",72],")",";",["T_WHITESPACE","\n                    ",72],["T_VARIABLE","$state",73],["T_OBJECT_OPERATOR","->",73],["T_STRING","save",73],"(",")",";",["T_WHITESPACE","\n                ",73],"}",["T_WHITESPACE","\n                ",74],["T_IF","if",75],["T_WHITESPACE"," ",75],"(",["T_VARIABLE","$indexerConfig",75],"[",["T_CONSTANT_ENCAPSED_STRING","'shared_index'",75],"]",")",["T_WHITESPACE"," ",75],"{",["T_WHITESPACE","\n                    ",75],["T_VARIABLE","$sharedIndexesComplete",76],"[","]",["T_WHITESPACE"," ",76],"=",["T_WHITESPACE"," ",76],["T_VARIABLE","$indexerConfig",76],"[",["T_CONSTANT_ENCAPSED_STRING","'shared_index'",76],"]",";",["T_WHITESPACE","\n                ",76],"}",["T_WHITESPACE","\n            ",77],"}",["T_WHITESPACE","\n        ",78],"}",["T_WHITESPACE","\n    ",79],"}",["T_WHITESPACE","\n\n    ",80],["T_DOC_COMMENT","\/**\n     * Regenerate indexes for all indexers\n     *\n     * @return void\n     *\/",82],["T_WHITESPACE","\n    ",86],["T_PUBLIC","public",87],["T_WHITESPACE"," ",87],["T_FUNCTION","function",87],["T_WHITESPACE"," ",87],["T_STRING","reindexAll",87],"(",")",["T_WHITESPACE","\n    ",87],"{",["T_WHITESPACE","\n        ",88],["T_DOC_COMMENT","\/** @var IndexerInterface[] $indexers *\/",89],["T_WHITESPACE","\n        ",89],["T_VARIABLE","$indexers",90],["T_WHITESPACE"," ",90],"=",["T_WHITESPACE"," ",90],["T_VARIABLE","$this",90],["T_OBJECT_OPERATOR","->",90],["T_STRING","indexersFactory",90],["T_OBJECT_OPERATOR","->",90],["T_STRING","create",90],"(",")",["T_OBJECT_OPERATOR","->",90],["T_STRING","getItems",90],"(",")",";",["T_WHITESPACE","\n        ",90],["T_FOREACH","foreach",91],["T_WHITESPACE"," ",91],"(",["T_VARIABLE","$indexers",91],["T_WHITESPACE"," ",91],["T_AS","as",91],["T_WHITESPACE"," ",91],["T_VARIABLE","$indexer",91],")",["T_WHITESPACE"," ",91],"{",["T_WHITESPACE","\n            ",91],["T_VARIABLE","$indexer",92],["T_OBJECT_OPERATOR","->",92],["T_STRING","reindexAll",92],"(",")",";",["T_WHITESPACE","\n        ",92],"}",["T_WHITESPACE","\n    ",93],"}",["T_WHITESPACE","\n\n    ",94],["T_DOC_COMMENT","\/**\n     * Update indexer views\n     *\n     * @return void\n     *\/",96],["T_WHITESPACE","\n    ",100],["T_PUBLIC","public",101],["T_WHITESPACE"," ",101],["T_FUNCTION","function",101],["T_WHITESPACE"," ",101],["T_STRING","updateMview",101],"(",")",["T_WHITESPACE","\n    ",101],"{",["T_WHITESPACE","\n        ",102],["T_VARIABLE","$this",103],["T_OBJECT_OPERATOR","->",103],["T_STRING","mviewProcessor",103],["T_OBJECT_OPERATOR","->",103],["T_STRING","update",103],"(",["T_CONSTANT_ENCAPSED_STRING","'indexer'",103],")",";",["T_WHITESPACE","\n    ",103],"}",["T_WHITESPACE","\n\n    ",104],["T_DOC_COMMENT","\/**\n     * Clean indexer view changelogs\n     *\n     * @return void\n     *\/",106],["T_WHITESPACE","\n    ",110],["T_PUBLIC","public",111],["T_WHITESPACE"," ",111],["T_FUNCTION","function",111],["T_WHITESPACE"," ",111],["T_STRING","clearChangelog",111],"(",")",["T_WHITESPACE","\n    ",111],"{",["T_WHITESPACE","\n        ",112],["T_VARIABLE","$this",113],["T_OBJECT_OPERATOR","->",113],["T_STRING","mviewProcessor",113],["T_OBJECT_OPERATOR","->",113],["T_STRING","clearChangelog",113],"(",["T_CONSTANT_ENCAPSED_STRING","'indexer'",113],")",";",["T_WHITESPACE","\n    ",113],"}",["T_WHITESPACE","\n",114],"}",["T_WHITESPACE","\n",115]]
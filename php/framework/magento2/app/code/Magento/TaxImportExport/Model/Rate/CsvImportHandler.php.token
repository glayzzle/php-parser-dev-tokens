[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Copyright \u00c2\u00a9 2013-2017 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n *\/",2],["T_WHITESPACE","\n",5],["T_NAMESPACE","namespace",6],["T_WHITESPACE"," ",6],["T_STRING","Magento",6],["T_NS_SEPARATOR","\\",6],["T_STRING","TaxImportExport",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Model",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Rate",6],";",["T_WHITESPACE","\n\n",6],["T_DOC_COMMENT","\/**\n * Tax Rate CSV Import Handler\n *\/",8],["T_WHITESPACE","\n",10],["T_CLASS","class",11],["T_WHITESPACE"," ",11],["T_STRING","CsvImportHandler",11],["T_WHITESPACE","\n",11],"{",["T_WHITESPACE","\n    ",12],["T_DOC_COMMENT","\/**\n     * Collection of publicly available stores\n     *\n     * @var \\Magento\\Store\\Model\\ResourceModel\\Store\\Collection\n     *\/",13],["T_WHITESPACE","\n    ",17],["T_PROTECTED","protected",18],["T_WHITESPACE"," ",18],["T_VARIABLE","$_publicStores",18],";",["T_WHITESPACE","\n\n    ",18],["T_DOC_COMMENT","\/**\n     * Region collection prototype\n     *\n     * The instance is used to retrieve regions based on country code\n     *\n     * @var \\Magento\\Directory\\Model\\ResourceModel\\Region\\Collection\n     *\/",20],["T_WHITESPACE","\n    ",26],["T_PROTECTED","protected",27],["T_WHITESPACE"," ",27],["T_VARIABLE","$_regionCollection",27],";",["T_WHITESPACE","\n\n    ",27],["T_DOC_COMMENT","\/**\n     * Country factory\n     *\n     * @var \\Magento\\Directory\\Model\\CountryFactory\n     *\/",29],["T_WHITESPACE","\n    ",33],["T_PROTECTED","protected",34],["T_WHITESPACE"," ",34],["T_VARIABLE","$_countryFactory",34],";",["T_WHITESPACE","\n\n    ",34],["T_DOC_COMMENT","\/**\n     * Tax rate factory\n     *\n     * @var \\Magento\\Tax\\Model\\Calculation\\RateFactory\n     *\/",36],["T_WHITESPACE","\n    ",40],["T_PROTECTED","protected",41],["T_WHITESPACE"," ",41],["T_VARIABLE","$_taxRateFactory",41],";",["T_WHITESPACE","\n\n    ",41],["T_DOC_COMMENT","\/**\n     * CSV Processor\n     *\n     * @var \\Magento\\Framework\\File\\Csv\n     *\/",43],["T_WHITESPACE","\n    ",47],["T_PROTECTED","protected",48],["T_WHITESPACE"," ",48],["T_VARIABLE","$csvProcessor",48],";",["T_WHITESPACE","\n\n    ",48],["T_DOC_COMMENT","\/**\n     * @param \\Magento\\Store\\Model\\ResourceModel\\Store\\Collection $storeCollection\n     * @param \\Magento\\Directory\\Model\\ResourceModel\\Region\\Collection $regionCollection\n     * @param \\Magento\\Directory\\Model\\CountryFactory $countryFactory\n     * @param \\Magento\\Tax\\Model\\Calculation\\RateFactory $taxRateFactory\n     * @param \\Magento\\Framework\\File\\Csv $csvProcessor\n     *\/",50],["T_WHITESPACE","\n    ",56],["T_PUBLIC","public",57],["T_WHITESPACE"," ",57],["T_FUNCTION","function",57],["T_WHITESPACE"," ",57],["T_STRING","__construct",57],"(",["T_WHITESPACE","\n        ",57],["T_NS_SEPARATOR","\\",58],["T_STRING","Magento",58],["T_NS_SEPARATOR","\\",58],["T_STRING","Store",58],["T_NS_SEPARATOR","\\",58],["T_STRING","Model",58],["T_NS_SEPARATOR","\\",58],["T_STRING","ResourceModel",58],["T_NS_SEPARATOR","\\",58],["T_STRING","Store",58],["T_NS_SEPARATOR","\\",58],["T_STRING","Collection",58],["T_WHITESPACE"," ",58],["T_VARIABLE","$storeCollection",58],",",["T_WHITESPACE","\n        ",58],["T_NS_SEPARATOR","\\",59],["T_STRING","Magento",59],["T_NS_SEPARATOR","\\",59],["T_STRING","Directory",59],["T_NS_SEPARATOR","\\",59],["T_STRING","Model",59],["T_NS_SEPARATOR","\\",59],["T_STRING","ResourceModel",59],["T_NS_SEPARATOR","\\",59],["T_STRING","Region",59],["T_NS_SEPARATOR","\\",59],["T_STRING","Collection",59],["T_WHITESPACE"," ",59],["T_VARIABLE","$regionCollection",59],",",["T_WHITESPACE","\n        ",59],["T_NS_SEPARATOR","\\",60],["T_STRING","Magento",60],["T_NS_SEPARATOR","\\",60],["T_STRING","Directory",60],["T_NS_SEPARATOR","\\",60],["T_STRING","Model",60],["T_NS_SEPARATOR","\\",60],["T_STRING","CountryFactory",60],["T_WHITESPACE"," ",60],["T_VARIABLE","$countryFactory",60],",",["T_WHITESPACE","\n        ",60],["T_NS_SEPARATOR","\\",61],["T_STRING","Magento",61],["T_NS_SEPARATOR","\\",61],["T_STRING","Tax",61],["T_NS_SEPARATOR","\\",61],["T_STRING","Model",61],["T_NS_SEPARATOR","\\",61],["T_STRING","Calculation",61],["T_NS_SEPARATOR","\\",61],["T_STRING","RateFactory",61],["T_WHITESPACE"," ",61],["T_VARIABLE","$taxRateFactory",61],",",["T_WHITESPACE","\n        ",61],["T_NS_SEPARATOR","\\",62],["T_STRING","Magento",62],["T_NS_SEPARATOR","\\",62],["T_STRING","Framework",62],["T_NS_SEPARATOR","\\",62],["T_STRING","File",62],["T_NS_SEPARATOR","\\",62],["T_STRING","Csv",62],["T_WHITESPACE"," ",62],["T_VARIABLE","$csvProcessor",62],["T_WHITESPACE","\n    ",62],")",["T_WHITESPACE"," ",63],"{",["T_WHITESPACE","\n        ",63],["T_COMMENT","\/\/ prevent admin store from loading\n",64],["T_WHITESPACE","        ",65],["T_VARIABLE","$this",65],["T_OBJECT_OPERATOR","->",65],["T_STRING","_publicStores",65],["T_WHITESPACE"," ",65],"=",["T_WHITESPACE"," ",65],["T_VARIABLE","$storeCollection",65],["T_OBJECT_OPERATOR","->",65],["T_STRING","setLoadDefault",65],"(",["T_STRING","false",65],")",";",["T_WHITESPACE","\n        ",65],["T_VARIABLE","$this",66],["T_OBJECT_OPERATOR","->",66],["T_STRING","_regionCollection",66],["T_WHITESPACE"," ",66],"=",["T_WHITESPACE"," ",66],["T_VARIABLE","$regionCollection",66],";",["T_WHITESPACE","\n        ",66],["T_VARIABLE","$this",67],["T_OBJECT_OPERATOR","->",67],["T_STRING","_countryFactory",67],["T_WHITESPACE"," ",67],"=",["T_WHITESPACE"," ",67],["T_VARIABLE","$countryFactory",67],";",["T_WHITESPACE","\n        ",67],["T_VARIABLE","$this",68],["T_OBJECT_OPERATOR","->",68],["T_STRING","_taxRateFactory",68],["T_WHITESPACE"," ",68],"=",["T_WHITESPACE"," ",68],["T_VARIABLE","$taxRateFactory",68],";",["T_WHITESPACE","\n        ",68],["T_VARIABLE","$this",69],["T_OBJECT_OPERATOR","->",69],["T_STRING","csvProcessor",69],["T_WHITESPACE"," ",69],"=",["T_WHITESPACE"," ",69],["T_VARIABLE","$csvProcessor",69],";",["T_WHITESPACE","\n    ",69],"}",["T_WHITESPACE","\n\n    ",70],["T_DOC_COMMENT","\/**\n     * Retrieve a list of fields required for CSV file (order is important!)\n     *\n     * @return array\n     *\/",72],["T_WHITESPACE","\n    ",76],["T_PUBLIC","public",77],["T_WHITESPACE"," ",77],["T_FUNCTION","function",77],["T_WHITESPACE"," ",77],["T_STRING","getRequiredCsvFields",77],"(",")",["T_WHITESPACE","\n    ",77],"{",["T_WHITESPACE","\n        ",78],["T_COMMENT","\/\/ indexes are specified for clarity, they are used during import\n",79],["T_WHITESPACE","        ",80],["T_RETURN","return",80],["T_WHITESPACE"," ",80],"[",["T_WHITESPACE","\n            ",80],["T_LNUMBER","0",81],["T_WHITESPACE"," ",81],["T_DOUBLE_ARROW","=>",81],["T_WHITESPACE"," ",81],["T_STRING","__",81],"(",["T_CONSTANT_ENCAPSED_STRING","'Code'",81],")",",",["T_WHITESPACE","\n            ",81],["T_LNUMBER","1",82],["T_WHITESPACE"," ",82],["T_DOUBLE_ARROW","=>",82],["T_WHITESPACE"," ",82],["T_STRING","__",82],"(",["T_CONSTANT_ENCAPSED_STRING","'Country'",82],")",",",["T_WHITESPACE","\n            ",82],["T_LNUMBER","2",83],["T_WHITESPACE"," ",83],["T_DOUBLE_ARROW","=>",83],["T_WHITESPACE"," ",83],["T_STRING","__",83],"(",["T_CONSTANT_ENCAPSED_STRING","'State'",83],")",",",["T_WHITESPACE","\n            ",83],["T_LNUMBER","3",84],["T_WHITESPACE"," ",84],["T_DOUBLE_ARROW","=>",84],["T_WHITESPACE"," ",84],["T_STRING","__",84],"(",["T_CONSTANT_ENCAPSED_STRING","'Zip\/Post Code'",84],")",",",["T_WHITESPACE","\n            ",84],["T_LNUMBER","4",85],["T_WHITESPACE"," ",85],["T_DOUBLE_ARROW","=>",85],["T_WHITESPACE"," ",85],["T_STRING","__",85],"(",["T_CONSTANT_ENCAPSED_STRING","'Rate'",85],")",",",["T_WHITESPACE","\n            ",85],["T_LNUMBER","5",86],["T_WHITESPACE"," ",86],["T_DOUBLE_ARROW","=>",86],["T_WHITESPACE"," ",86],["T_STRING","__",86],"(",["T_CONSTANT_ENCAPSED_STRING","'Zip\/Post is Range'",86],")",",",["T_WHITESPACE","\n            ",86],["T_LNUMBER","6",87],["T_WHITESPACE"," ",87],["T_DOUBLE_ARROW","=>",87],["T_WHITESPACE"," ",87],["T_STRING","__",87],"(",["T_CONSTANT_ENCAPSED_STRING","'Range From'",87],")",",",["T_WHITESPACE","\n            ",87],["T_LNUMBER","7",88],["T_WHITESPACE"," ",88],["T_DOUBLE_ARROW","=>",88],["T_WHITESPACE"," ",88],["T_STRING","__",88],"(",["T_CONSTANT_ENCAPSED_STRING","'Range To'",88],")",["T_WHITESPACE","\n        ",88],"]",";",["T_WHITESPACE","\n    ",89],"}",["T_WHITESPACE","\n\n    ",90],["T_DOC_COMMENT","\/**\n     * Import Tax Rates from CSV file\n     *\n     * @param array $file file info retrieved from $_FILES array\n     * @return void\n     * @throws \\Magento\\Framework\\Exception\\LocalizedException\n     *\/",92],["T_WHITESPACE","\n    ",98],["T_PUBLIC","public",99],["T_WHITESPACE"," ",99],["T_FUNCTION","function",99],["T_WHITESPACE"," ",99],["T_STRING","importFromCsvFile",99],"(",["T_VARIABLE","$file",99],")",["T_WHITESPACE","\n    ",99],"{",["T_WHITESPACE","\n        ",100],["T_IF","if",101],["T_WHITESPACE"," ",101],"(","!",["T_ISSET","isset",101],"(",["T_VARIABLE","$file",101],"[",["T_CONSTANT_ENCAPSED_STRING","'tmp_name'",101],"]",")",")",["T_WHITESPACE"," ",101],"{",["T_WHITESPACE","\n            ",101],["T_THROW","throw",102],["T_WHITESPACE"," ",102],["T_NEW","new",102],["T_WHITESPACE"," ",102],["T_NS_SEPARATOR","\\",102],["T_STRING","Magento",102],["T_NS_SEPARATOR","\\",102],["T_STRING","Framework",102],["T_NS_SEPARATOR","\\",102],["T_STRING","Exception",102],["T_NS_SEPARATOR","\\",102],["T_STRING","LocalizedException",102],"(",["T_STRING","__",102],"(",["T_CONSTANT_ENCAPSED_STRING","'Invalid file upload attempt.'",102],")",")",";",["T_WHITESPACE","\n        ",102],"}",["T_WHITESPACE","\n        ",103],["T_VARIABLE","$ratesRawData",104],["T_WHITESPACE"," ",104],"=",["T_WHITESPACE"," ",104],["T_VARIABLE","$this",104],["T_OBJECT_OPERATOR","->",104],["T_STRING","csvProcessor",104],["T_OBJECT_OPERATOR","->",104],["T_STRING","getData",104],"(",["T_VARIABLE","$file",104],"[",["T_CONSTANT_ENCAPSED_STRING","'tmp_name'",104],"]",")",";",["T_WHITESPACE","\n        ",104],["T_COMMENT","\/\/ first row of file represents headers\n",105],["T_WHITESPACE","        ",106],["T_VARIABLE","$fileFields",106],["T_WHITESPACE"," ",106],"=",["T_WHITESPACE"," ",106],["T_VARIABLE","$ratesRawData",106],"[",["T_LNUMBER","0",106],"]",";",["T_WHITESPACE","\n        ",106],["T_VARIABLE","$validFields",107],["T_WHITESPACE"," ",107],"=",["T_WHITESPACE"," ",107],["T_VARIABLE","$this",107],["T_OBJECT_OPERATOR","->",107],["T_STRING","_filterFileFields",107],"(",["T_VARIABLE","$fileFields",107],")",";",["T_WHITESPACE","\n        ",107],["T_VARIABLE","$invalidFields",108],["T_WHITESPACE"," ",108],"=",["T_WHITESPACE"," ",108],["T_STRING","array_diff_key",108],"(",["T_VARIABLE","$fileFields",108],",",["T_WHITESPACE"," ",108],["T_VARIABLE","$validFields",108],")",";",["T_WHITESPACE","\n        ",108],["T_VARIABLE","$ratesData",109],["T_WHITESPACE"," ",109],"=",["T_WHITESPACE"," ",109],["T_VARIABLE","$this",109],["T_OBJECT_OPERATOR","->",109],["T_STRING","_filterRateData",109],"(",["T_VARIABLE","$ratesRawData",109],",",["T_WHITESPACE"," ",109],["T_VARIABLE","$invalidFields",109],",",["T_WHITESPACE"," ",109],["T_VARIABLE","$validFields",109],")",";",["T_WHITESPACE","\n        ",109],["T_COMMENT","\/\/ store cache array is used to quickly retrieve store ID when handling locale-specific tax rate titles\n",110],["T_WHITESPACE","        ",111],["T_VARIABLE","$storesCache",111],["T_WHITESPACE"," ",111],"=",["T_WHITESPACE"," ",111],["T_VARIABLE","$this",111],["T_OBJECT_OPERATOR","->",111],["T_STRING","_composeStoreCache",111],"(",["T_VARIABLE","$validFields",111],")",";",["T_WHITESPACE","\n        ",111],["T_VARIABLE","$regionsCache",112],["T_WHITESPACE"," ",112],"=",["T_WHITESPACE"," ",112],"[","]",";",["T_WHITESPACE","\n        ",112],["T_FOREACH","foreach",113],["T_WHITESPACE"," ",113],"(",["T_VARIABLE","$ratesData",113],["T_WHITESPACE"," ",113],["T_AS","as",113],["T_WHITESPACE"," ",113],["T_VARIABLE","$rowIndex",113],["T_WHITESPACE"," ",113],["T_DOUBLE_ARROW","=>",113],["T_WHITESPACE"," ",113],["T_VARIABLE","$dataRow",113],")",["T_WHITESPACE"," ",113],"{",["T_WHITESPACE","\n            ",113],["T_COMMENT","\/\/ skip headers\n",114],["T_WHITESPACE","            ",115],["T_IF","if",115],["T_WHITESPACE"," ",115],"(",["T_VARIABLE","$rowIndex",115],["T_WHITESPACE"," ",115],["T_IS_EQUAL","==",115],["T_WHITESPACE"," ",115],["T_LNUMBER","0",115],")",["T_WHITESPACE"," ",115],"{",["T_WHITESPACE","\n                ",115],["T_CONTINUE","continue",116],";",["T_WHITESPACE","\n            ",116],"}",["T_WHITESPACE","\n            ",117],["T_VARIABLE","$regionsCache",118],["T_WHITESPACE"," ",118],"=",["T_WHITESPACE"," ",118],["T_VARIABLE","$this",118],["T_OBJECT_OPERATOR","->",118],["T_STRING","_importRate",118],"(",["T_VARIABLE","$dataRow",118],",",["T_WHITESPACE"," ",118],["T_VARIABLE","$regionsCache",118],",",["T_WHITESPACE"," ",118],["T_VARIABLE","$storesCache",118],")",";",["T_WHITESPACE","\n        ",118],"}",["T_WHITESPACE","\n    ",119],"}",["T_WHITESPACE","\n\n    ",120],["T_DOC_COMMENT","\/**\n     * Filter file fields (i.e. unset invalid fields)\n     *\n     * @param array $fileFields\n     * @return string[] filtered fields\n     *\/",122],["T_WHITESPACE","\n    ",127],["T_PROTECTED","protected",128],["T_WHITESPACE"," ",128],["T_FUNCTION","function",128],["T_WHITESPACE"," ",128],["T_STRING","_filterFileFields",128],"(",["T_ARRAY","array",128],["T_WHITESPACE"," ",128],["T_VARIABLE","$fileFields",128],")",["T_WHITESPACE","\n    ",128],"{",["T_WHITESPACE","\n        ",129],["T_VARIABLE","$filteredFields",130],["T_WHITESPACE"," ",130],"=",["T_WHITESPACE"," ",130],["T_VARIABLE","$this",130],["T_OBJECT_OPERATOR","->",130],["T_STRING","getRequiredCsvFields",130],"(",")",";",["T_WHITESPACE","\n        ",130],["T_VARIABLE","$requiredFieldsNum",131],["T_WHITESPACE"," ",131],"=",["T_WHITESPACE"," ",131],["T_STRING","count",131],"(",["T_VARIABLE","$this",131],["T_OBJECT_OPERATOR","->",131],["T_STRING","getRequiredCsvFields",131],"(",")",")",";",["T_WHITESPACE","\n        ",131],["T_VARIABLE","$fileFieldsNum",132],["T_WHITESPACE"," ",132],"=",["T_WHITESPACE"," ",132],["T_STRING","count",132],"(",["T_VARIABLE","$fileFields",132],")",";",["T_WHITESPACE","\n\n        ",132],["T_COMMENT","\/\/ process title-related fields that are located right after required fields with store code as field name)\n",134],["T_WHITESPACE","        ",135],["T_FOR","for",135],["T_WHITESPACE"," ",135],"(",["T_VARIABLE","$index",135],["T_WHITESPACE"," ",135],"=",["T_WHITESPACE"," ",135],["T_VARIABLE","$requiredFieldsNum",135],";",["T_WHITESPACE"," ",135],["T_VARIABLE","$index",135],["T_WHITESPACE"," ",135],"<",["T_WHITESPACE"," ",135],["T_VARIABLE","$fileFieldsNum",135],";",["T_WHITESPACE"," ",135],["T_VARIABLE","$index",135],["T_INC","++",135],")",["T_WHITESPACE"," ",135],"{",["T_WHITESPACE","\n            ",135],["T_VARIABLE","$titleFieldName",136],["T_WHITESPACE"," ",136],"=",["T_WHITESPACE"," ",136],["T_VARIABLE","$fileFields",136],"[",["T_VARIABLE","$index",136],"]",";",["T_WHITESPACE","\n            ",136],["T_IF","if",137],["T_WHITESPACE"," ",137],"(",["T_VARIABLE","$this",137],["T_OBJECT_OPERATOR","->",137],["T_STRING","_isStoreCodeValid",137],"(",["T_VARIABLE","$titleFieldName",137],")",")",["T_WHITESPACE"," ",137],"{",["T_WHITESPACE","\n                ",137],["T_COMMENT","\/\/ if store is still valid, append this field to valid file fields\n",138],["T_WHITESPACE","                ",139],["T_VARIABLE","$filteredFields",139],"[",["T_VARIABLE","$index",139],"]",["T_WHITESPACE"," ",139],"=",["T_WHITESPACE"," ",139],["T_VARIABLE","$titleFieldName",139],";",["T_WHITESPACE","\n            ",139],"}",["T_WHITESPACE","\n        ",140],"}",["T_WHITESPACE","\n\n        ",141],["T_RETURN","return",143],["T_WHITESPACE"," ",143],["T_VARIABLE","$filteredFields",143],";",["T_WHITESPACE","\n    ",143],"}",["T_WHITESPACE","\n\n    ",144],["T_DOC_COMMENT","\/**\n     * Filter rates data (i.e. unset all invalid fields and check consistency)\n     *\n     * @param array $rateRawData\n     * @param array $invalidFields assoc array of invalid file fields\n     * @param array $validFields assoc array of valid file fields\n     * @return array\n     * @throws \\Magento\\Framework\\Exception\\LocalizedException\n     * @SuppressWarnings(PHPMD.UnusedLocalVariable)\n     *\/",146],["T_WHITESPACE","\n    ",155],["T_PROTECTED","protected",156],["T_WHITESPACE"," ",156],["T_FUNCTION","function",156],["T_WHITESPACE"," ",156],["T_STRING","_filterRateData",156],"(",["T_ARRAY","array",156],["T_WHITESPACE"," ",156],["T_VARIABLE","$rateRawData",156],",",["T_WHITESPACE"," ",156],["T_ARRAY","array",156],["T_WHITESPACE"," ",156],["T_VARIABLE","$invalidFields",156],",",["T_WHITESPACE"," ",156],["T_ARRAY","array",156],["T_WHITESPACE"," ",156],["T_VARIABLE","$validFields",156],")",["T_WHITESPACE","\n    ",156],"{",["T_WHITESPACE","\n        ",157],["T_VARIABLE","$validFieldsNum",158],["T_WHITESPACE"," ",158],"=",["T_WHITESPACE"," ",158],["T_STRING","count",158],"(",["T_VARIABLE","$validFields",158],")",";",["T_WHITESPACE","\n        ",158],["T_FOREACH","foreach",159],["T_WHITESPACE"," ",159],"(",["T_VARIABLE","$rateRawData",159],["T_WHITESPACE"," ",159],["T_AS","as",159],["T_WHITESPACE"," ",159],["T_VARIABLE","$rowIndex",159],["T_WHITESPACE"," ",159],["T_DOUBLE_ARROW","=>",159],["T_WHITESPACE"," ",159],["T_VARIABLE","$dataRow",159],")",["T_WHITESPACE"," ",159],"{",["T_WHITESPACE","\n            ",159],["T_COMMENT","\/\/ skip empty rows\n",160],["T_WHITESPACE","            ",161],["T_IF","if",161],["T_WHITESPACE"," ",161],"(",["T_STRING","count",161],"(",["T_VARIABLE","$dataRow",161],")",["T_WHITESPACE"," ",161],["T_IS_SMALLER_OR_EQUAL","<=",161],["T_WHITESPACE"," ",161],["T_LNUMBER","1",161],")",["T_WHITESPACE"," ",161],"{",["T_WHITESPACE","\n                ",161],["T_UNSET","unset",162],"(",["T_VARIABLE","$rateRawData",162],"[",["T_VARIABLE","$rowIndex",162],"]",")",";",["T_WHITESPACE","\n                ",162],["T_CONTINUE","continue",163],";",["T_WHITESPACE","\n            ",163],"}",["T_WHITESPACE","\n            ",164],["T_COMMENT","\/\/ unset invalid fields from data row\n",165],["T_WHITESPACE","            ",166],["T_FOREACH","foreach",166],["T_WHITESPACE"," ",166],"(",["T_VARIABLE","$dataRow",166],["T_WHITESPACE"," ",166],["T_AS","as",166],["T_WHITESPACE"," ",166],["T_VARIABLE","$fieldIndex",166],["T_WHITESPACE"," ",166],["T_DOUBLE_ARROW","=>",166],["T_WHITESPACE"," ",166],["T_VARIABLE","$fieldValue",166],")",["T_WHITESPACE"," ",166],"{",["T_WHITESPACE","\n                ",166],["T_IF","if",167],["T_WHITESPACE"," ",167],"(",["T_ISSET","isset",167],"(",["T_VARIABLE","$invalidFields",167],"[",["T_VARIABLE","$fieldIndex",167],"]",")",")",["T_WHITESPACE"," ",167],"{",["T_WHITESPACE","\n                    ",167],["T_UNSET","unset",168],"(",["T_VARIABLE","$rateRawData",168],"[",["T_VARIABLE","$rowIndex",168],"]","[",["T_VARIABLE","$fieldIndex",168],"]",")",";",["T_WHITESPACE","\n                ",168],"}",["T_WHITESPACE","\n            ",169],"}",["T_WHITESPACE","\n            ",170],["T_COMMENT","\/\/ check if number of fields in row match with number of valid fields\n",171],["T_WHITESPACE","            ",172],["T_IF","if",172],["T_WHITESPACE"," ",172],"(",["T_STRING","count",172],"(",["T_VARIABLE","$rateRawData",172],"[",["T_VARIABLE","$rowIndex",172],"]",")",["T_WHITESPACE"," ",172],["T_IS_NOT_EQUAL","!=",172],["T_WHITESPACE"," ",172],["T_VARIABLE","$validFieldsNum",172],")",["T_WHITESPACE"," ",172],"{",["T_WHITESPACE","\n                ",172],["T_THROW","throw",173],["T_WHITESPACE"," ",173],["T_NEW","new",173],["T_WHITESPACE"," ",173],["T_NS_SEPARATOR","\\",173],["T_STRING","Magento",173],["T_NS_SEPARATOR","\\",173],["T_STRING","Framework",173],["T_NS_SEPARATOR","\\",173],["T_STRING","Exception",173],["T_NS_SEPARATOR","\\",173],["T_STRING","LocalizedException",173],"(",["T_STRING","__",173],"(",["T_CONSTANT_ENCAPSED_STRING","'Invalid file format.'",173],")",")",";",["T_WHITESPACE","\n            ",173],"}",["T_WHITESPACE","\n        ",174],"}",["T_WHITESPACE","\n        ",175],["T_RETURN","return",176],["T_WHITESPACE"," ",176],["T_VARIABLE","$rateRawData",176],";",["T_WHITESPACE","\n    ",176],"}",["T_WHITESPACE","\n\n    ",177],["T_DOC_COMMENT","\/**\n     * Compose stores cache\n     *\n     * This cache is used to quickly retrieve store ID when handling locale-specific tax rate titles\n     *\n     * @param string[] $validFields list of valid CSV file fields\n     * @return array\n     *\/",179],["T_WHITESPACE","\n    ",186],["T_PROTECTED","protected",187],["T_WHITESPACE"," ",187],["T_FUNCTION","function",187],["T_WHITESPACE"," ",187],["T_STRING","_composeStoreCache",187],"(",["T_VARIABLE","$validFields",187],")",["T_WHITESPACE","\n    ",187],"{",["T_WHITESPACE","\n        ",188],["T_VARIABLE","$storesCache",189],["T_WHITESPACE"," ",189],"=",["T_WHITESPACE"," ",189],"[","]",";",["T_WHITESPACE","\n        ",189],["T_VARIABLE","$requiredFieldsNum",190],["T_WHITESPACE"," ",190],"=",["T_WHITESPACE"," ",190],["T_STRING","count",190],"(",["T_VARIABLE","$this",190],["T_OBJECT_OPERATOR","->",190],["T_STRING","getRequiredCsvFields",190],"(",")",")",";",["T_WHITESPACE","\n        ",190],["T_VARIABLE","$validFieldsNum",191],["T_WHITESPACE"," ",191],"=",["T_WHITESPACE"," ",191],["T_STRING","count",191],"(",["T_VARIABLE","$validFields",191],")",";",["T_WHITESPACE","\n        ",191],["T_COMMENT","\/\/ title related fields located right after required fields\n",192],["T_WHITESPACE","        ",193],["T_FOR","for",193],["T_WHITESPACE"," ",193],"(",["T_VARIABLE","$index",193],["T_WHITESPACE"," ",193],"=",["T_WHITESPACE"," ",193],["T_VARIABLE","$requiredFieldsNum",193],";",["T_WHITESPACE"," ",193],["T_VARIABLE","$index",193],["T_WHITESPACE"," ",193],"<",["T_WHITESPACE"," ",193],["T_VARIABLE","$validFieldsNum",193],";",["T_WHITESPACE"," ",193],["T_VARIABLE","$index",193],["T_INC","++",193],")",["T_WHITESPACE"," ",193],"{",["T_WHITESPACE","\n            ",193],["T_FOREACH","foreach",194],["T_WHITESPACE"," ",194],"(",["T_VARIABLE","$this",194],["T_OBJECT_OPERATOR","->",194],["T_STRING","_publicStores",194],["T_WHITESPACE"," ",194],["T_AS","as",194],["T_WHITESPACE"," ",194],["T_VARIABLE","$store",194],")",["T_WHITESPACE"," ",194],"{",["T_WHITESPACE","\n                ",194],["T_VARIABLE","$storeCode",195],["T_WHITESPACE"," ",195],"=",["T_WHITESPACE"," ",195],["T_VARIABLE","$validFields",195],"[",["T_VARIABLE","$index",195],"]",";",["T_WHITESPACE","\n                ",195],["T_IF","if",196],["T_WHITESPACE"," ",196],"(",["T_VARIABLE","$storeCode",196],["T_WHITESPACE"," ",196],["T_IS_IDENTICAL","===",196],["T_WHITESPACE"," ",196],["T_VARIABLE","$store",196],["T_OBJECT_OPERATOR","->",196],["T_STRING","getCode",196],"(",")",")",["T_WHITESPACE"," ",196],"{",["T_WHITESPACE","\n                    ",196],["T_VARIABLE","$storesCache",197],"[",["T_VARIABLE","$index",197],"]",["T_WHITESPACE"," ",197],"=",["T_WHITESPACE"," ",197],["T_VARIABLE","$store",197],["T_OBJECT_OPERATOR","->",197],["T_STRING","getId",197],"(",")",";",["T_WHITESPACE","\n                ",197],"}",["T_WHITESPACE","\n            ",198],"}",["T_WHITESPACE","\n        ",199],"}",["T_WHITESPACE","\n        ",200],["T_RETURN","return",201],["T_WHITESPACE"," ",201],["T_VARIABLE","$storesCache",201],";",["T_WHITESPACE","\n    ",201],"}",["T_WHITESPACE","\n\n    ",202],["T_DOC_COMMENT","\/**\n     * Check if public store with specified code still exists\n     *\n     * @param string $storeCode\n     * @return boolean\n     *\/",204],["T_WHITESPACE","\n    ",209],["T_PROTECTED","protected",210],["T_WHITESPACE"," ",210],["T_FUNCTION","function",210],["T_WHITESPACE"," ",210],["T_STRING","_isStoreCodeValid",210],"(",["T_VARIABLE","$storeCode",210],")",["T_WHITESPACE","\n    ",210],"{",["T_WHITESPACE","\n        ",211],["T_VARIABLE","$isStoreCodeValid",212],["T_WHITESPACE"," ",212],"=",["T_WHITESPACE"," ",212],["T_STRING","false",212],";",["T_WHITESPACE","\n        ",212],["T_FOREACH","foreach",213],["T_WHITESPACE"," ",213],"(",["T_VARIABLE","$this",213],["T_OBJECT_OPERATOR","->",213],["T_STRING","_publicStores",213],["T_WHITESPACE"," ",213],["T_AS","as",213],["T_WHITESPACE"," ",213],["T_VARIABLE","$store",213],")",["T_WHITESPACE"," ",213],"{",["T_WHITESPACE","\n            ",213],["T_IF","if",214],["T_WHITESPACE"," ",214],"(",["T_VARIABLE","$storeCode",214],["T_WHITESPACE"," ",214],["T_IS_IDENTICAL","===",214],["T_WHITESPACE"," ",214],["T_VARIABLE","$store",214],["T_OBJECT_OPERATOR","->",214],["T_STRING","getCode",214],"(",")",")",["T_WHITESPACE"," ",214],"{",["T_WHITESPACE","\n                ",214],["T_VARIABLE","$isStoreCodeValid",215],["T_WHITESPACE"," ",215],"=",["T_WHITESPACE"," ",215],["T_STRING","true",215],";",["T_WHITESPACE","\n                ",215],["T_BREAK","break",216],";",["T_WHITESPACE","\n            ",216],"}",["T_WHITESPACE","\n        ",217],"}",["T_WHITESPACE","\n        ",218],["T_RETURN","return",219],["T_WHITESPACE"," ",219],["T_VARIABLE","$isStoreCodeValid",219],";",["T_WHITESPACE","\n    ",219],"}",["T_WHITESPACE","\n\n    ",220],["T_DOC_COMMENT","\/**\n     * Import single rate\n     *\n     * @param array $rateData\n     * @param array $regionsCache cache of regions of already used countries (is used to optimize performance)\n     * @param array $storesCache cache of stores related to tax rate titles\n     * @return array regions cache populated with regions related to country of imported tax rate\n     * @throws \\Magento\\Framework\\Exception\\LocalizedException\n     *\/",222],["T_WHITESPACE","\n    ",230],["T_PROTECTED","protected",231],["T_WHITESPACE"," ",231],["T_FUNCTION","function",231],["T_WHITESPACE"," ",231],["T_STRING","_importRate",231],"(",["T_ARRAY","array",231],["T_WHITESPACE"," ",231],["T_VARIABLE","$rateData",231],",",["T_WHITESPACE"," ",231],["T_ARRAY","array",231],["T_WHITESPACE"," ",231],["T_VARIABLE","$regionsCache",231],",",["T_WHITESPACE"," ",231],["T_ARRAY","array",231],["T_WHITESPACE"," ",231],["T_VARIABLE","$storesCache",231],")",["T_WHITESPACE","\n    ",231],"{",["T_WHITESPACE","\n        ",232],["T_COMMENT","\/\/ data with index 1 must represent country code\n",233],["T_WHITESPACE","        ",234],["T_VARIABLE","$countryCode",234],["T_WHITESPACE"," ",234],"=",["T_WHITESPACE"," ",234],["T_VARIABLE","$rateData",234],"[",["T_LNUMBER","1",234],"]",";",["T_WHITESPACE","\n        ",234],["T_VARIABLE","$country",235],["T_WHITESPACE"," ",235],"=",["T_WHITESPACE"," ",235],["T_VARIABLE","$this",235],["T_OBJECT_OPERATOR","->",235],["T_STRING","_countryFactory",235],["T_OBJECT_OPERATOR","->",235],["T_STRING","create",235],"(",")",["T_OBJECT_OPERATOR","->",235],["T_STRING","loadByCode",235],"(",["T_VARIABLE","$countryCode",235],",",["T_WHITESPACE"," ",235],["T_CONSTANT_ENCAPSED_STRING","'iso2_code'",235],")",";",["T_WHITESPACE","\n        ",235],["T_IF","if",236],["T_WHITESPACE"," ",236],"(","!",["T_VARIABLE","$country",236],["T_OBJECT_OPERATOR","->",236],["T_STRING","getId",236],"(",")",")",["T_WHITESPACE"," ",236],"{",["T_WHITESPACE","\n            ",236],["T_THROW","throw",237],["T_WHITESPACE"," ",237],["T_NEW","new",237],["T_WHITESPACE"," ",237],["T_NS_SEPARATOR","\\",237],["T_STRING","Magento",237],["T_NS_SEPARATOR","\\",237],["T_STRING","Framework",237],["T_NS_SEPARATOR","\\",237],["T_STRING","Exception",237],["T_NS_SEPARATOR","\\",237],["T_STRING","LocalizedException",237],"(",["T_STRING","__",237],"(",["T_CONSTANT_ENCAPSED_STRING","'One of the countries has invalid code.'",237],")",")",";",["T_WHITESPACE","\n        ",237],"}",["T_WHITESPACE","\n        ",238],["T_VARIABLE","$regionsCache",239],["T_WHITESPACE"," ",239],"=",["T_WHITESPACE"," ",239],["T_VARIABLE","$this",239],["T_OBJECT_OPERATOR","->",239],["T_STRING","_addCountryRegionsToCache",239],"(",["T_VARIABLE","$countryCode",239],",",["T_WHITESPACE"," ",239],["T_VARIABLE","$regionsCache",239],")",";",["T_WHITESPACE","\n\n        ",239],["T_COMMENT","\/\/ data with index 2 must represent region code\n",241],["T_WHITESPACE","        ",242],["T_VARIABLE","$regionCode",242],["T_WHITESPACE"," ",242],"=",["T_WHITESPACE"," ",242],["T_VARIABLE","$rateData",242],"[",["T_LNUMBER","2",242],"]",";",["T_WHITESPACE","\n        ",242],["T_IF","if",243],["T_WHITESPACE"," ",243],"(","!",["T_EMPTY","empty",243],"(",["T_VARIABLE","$regionsCache",243],"[",["T_VARIABLE","$countryCode",243],"]","[",["T_VARIABLE","$regionCode",243],"]",")",")",["T_WHITESPACE"," ",243],"{",["T_WHITESPACE","\n            ",243],["T_VARIABLE","$regionId",244],["T_WHITESPACE"," ",244],"=",["T_WHITESPACE"," ",244],["T_VARIABLE","$regionsCache",244],"[",["T_VARIABLE","$countryCode",244],"]","[",["T_VARIABLE","$regionCode",244],"]",["T_WHITESPACE"," ",244],["T_IS_EQUAL","==",244],["T_WHITESPACE"," ",244],["T_CONSTANT_ENCAPSED_STRING","'*'",244],["T_WHITESPACE"," ",244],"?",["T_WHITESPACE"," ",244],["T_LNUMBER","0",244],["T_WHITESPACE"," ",244],":",["T_WHITESPACE"," ",244],["T_VARIABLE","$regionsCache",244],"[",["T_VARIABLE","$countryCode",244],"]","[",["T_VARIABLE","$regionCode",244],"]",";",["T_WHITESPACE","\n            ",244],["T_COMMENT","\/\/ data with index 3 must represent postcode\n",245],["T_WHITESPACE","            ",246],["T_VARIABLE","$postCode",246],["T_WHITESPACE"," ",246],"=",["T_WHITESPACE"," ",246],["T_EMPTY","empty",246],"(",["T_VARIABLE","$rateData",246],"[",["T_LNUMBER","3",246],"]",")",["T_WHITESPACE"," ",246],"?",["T_WHITESPACE"," ",246],["T_STRING","null",246],["T_WHITESPACE"," ",246],":",["T_WHITESPACE"," ",246],["T_VARIABLE","$rateData",246],"[",["T_LNUMBER","3",246],"]",";",["T_WHITESPACE","\n            ",246],["T_VARIABLE","$modelData",247],["T_WHITESPACE"," ",247],"=",["T_WHITESPACE"," ",247],"[",["T_WHITESPACE","\n                ",247],["T_CONSTANT_ENCAPSED_STRING","'code'",248],["T_WHITESPACE"," ",248],["T_DOUBLE_ARROW","=>",248],["T_WHITESPACE"," ",248],["T_VARIABLE","$rateData",248],"[",["T_LNUMBER","0",248],"]",",",["T_WHITESPACE","\n                ",248],["T_CONSTANT_ENCAPSED_STRING","'tax_country_id'",249],["T_WHITESPACE"," ",249],["T_DOUBLE_ARROW","=>",249],["T_WHITESPACE"," ",249],["T_VARIABLE","$rateData",249],"[",["T_LNUMBER","1",249],"]",",",["T_WHITESPACE","\n                ",249],["T_CONSTANT_ENCAPSED_STRING","'tax_region_id'",250],["T_WHITESPACE"," ",250],["T_DOUBLE_ARROW","=>",250],["T_WHITESPACE"," ",250],["T_VARIABLE","$regionId",250],",",["T_WHITESPACE","\n                ",250],["T_CONSTANT_ENCAPSED_STRING","'tax_postcode'",251],["T_WHITESPACE"," ",251],["T_DOUBLE_ARROW","=>",251],["T_WHITESPACE"," ",251],["T_VARIABLE","$postCode",251],",",["T_WHITESPACE","\n                ",251],["T_CONSTANT_ENCAPSED_STRING","'rate'",252],["T_WHITESPACE"," ",252],["T_DOUBLE_ARROW","=>",252],["T_WHITESPACE"," ",252],["T_VARIABLE","$rateData",252],"[",["T_LNUMBER","4",252],"]",",",["T_WHITESPACE","\n                ",252],["T_CONSTANT_ENCAPSED_STRING","'zip_is_range'",253],["T_WHITESPACE"," ",253],["T_DOUBLE_ARROW","=>",253],["T_WHITESPACE"," ",253],["T_VARIABLE","$rateData",253],"[",["T_LNUMBER","5",253],"]",",",["T_WHITESPACE","\n                ",253],["T_CONSTANT_ENCAPSED_STRING","'zip_from'",254],["T_WHITESPACE"," ",254],["T_DOUBLE_ARROW","=>",254],["T_WHITESPACE"," ",254],["T_VARIABLE","$rateData",254],"[",["T_LNUMBER","6",254],"]",",",["T_WHITESPACE","\n                ",254],["T_CONSTANT_ENCAPSED_STRING","'zip_to'",255],["T_WHITESPACE"," ",255],["T_DOUBLE_ARROW","=>",255],["T_WHITESPACE"," ",255],["T_VARIABLE","$rateData",255],"[",["T_LNUMBER","7",255],"]",",",["T_WHITESPACE","\n            ",255],"]",";",["T_WHITESPACE","\n\n            ",256],["T_COMMENT","\/\/ try to load existing rate\n",258],["T_WHITESPACE","            ",259],["T_DOC_COMMENT","\/** @var $rateModel \\Magento\\Tax\\Model\\Calculation\\Rate *\/",259],["T_WHITESPACE","\n            ",259],["T_VARIABLE","$rateModel",260],["T_WHITESPACE"," ",260],"=",["T_WHITESPACE"," ",260],["T_VARIABLE","$this",260],["T_OBJECT_OPERATOR","->",260],["T_STRING","_taxRateFactory",260],["T_OBJECT_OPERATOR","->",260],["T_STRING","create",260],"(",")",["T_OBJECT_OPERATOR","->",260],["T_STRING","loadByCode",260],"(",["T_VARIABLE","$modelData",260],"[",["T_CONSTANT_ENCAPSED_STRING","'code'",260],"]",")",";",["T_WHITESPACE","\n            ",260],["T_VARIABLE","$rateModel",261],["T_OBJECT_OPERATOR","->",261],["T_STRING","addData",261],"(",["T_VARIABLE","$modelData",261],")",";",["T_WHITESPACE","\n\n            ",261],["T_COMMENT","\/\/ compose titles list\n",263],["T_WHITESPACE","            ",264],["T_VARIABLE","$rateTitles",264],["T_WHITESPACE"," ",264],"=",["T_WHITESPACE"," ",264],"[","]",";",["T_WHITESPACE","\n            ",264],["T_FOREACH","foreach",265],["T_WHITESPACE"," ",265],"(",["T_VARIABLE","$storesCache",265],["T_WHITESPACE"," ",265],["T_AS","as",265],["T_WHITESPACE"," ",265],["T_VARIABLE","$fileFieldIndex",265],["T_WHITESPACE"," ",265],["T_DOUBLE_ARROW","=>",265],["T_WHITESPACE"," ",265],["T_VARIABLE","$storeId",265],")",["T_WHITESPACE"," ",265],"{",["T_WHITESPACE","\n                ",265],["T_VARIABLE","$rateTitles",266],"[",["T_VARIABLE","$storeId",266],"]",["T_WHITESPACE"," ",266],"=",["T_WHITESPACE"," ",266],["T_VARIABLE","$rateData",266],"[",["T_VARIABLE","$fileFieldIndex",266],"]",";",["T_WHITESPACE","\n            ",266],"}",["T_WHITESPACE","\n\n            ",267],["T_VARIABLE","$rateModel",269],["T_OBJECT_OPERATOR","->",269],["T_STRING","setTitle",269],"(",["T_VARIABLE","$rateTitles",269],")",";",["T_WHITESPACE","\n            ",269],["T_VARIABLE","$rateModel",270],["T_OBJECT_OPERATOR","->",270],["T_STRING","save",270],"(",")",";",["T_WHITESPACE","\n        ",270],"}",["T_WHITESPACE","\n\n        ",271],["T_RETURN","return",273],["T_WHITESPACE"," ",273],["T_VARIABLE","$regionsCache",273],";",["T_WHITESPACE","\n    ",273],"}",["T_WHITESPACE","\n\n    ",274],["T_DOC_COMMENT","\/**\n     * Add regions of the given country to regions cache\n     *\n     * @param string $countryCode\n     * @param array $regionsCache\n     * @return array\n     *\/",276],["T_WHITESPACE","\n    ",282],["T_PROTECTED","protected",283],["T_WHITESPACE"," ",283],["T_FUNCTION","function",283],["T_WHITESPACE"," ",283],["T_STRING","_addCountryRegionsToCache",283],"(",["T_VARIABLE","$countryCode",283],",",["T_WHITESPACE"," ",283],["T_ARRAY","array",283],["T_WHITESPACE"," ",283],["T_VARIABLE","$regionsCache",283],")",["T_WHITESPACE","\n    ",283],"{",["T_WHITESPACE","\n        ",284],["T_IF","if",285],["T_WHITESPACE"," ",285],"(","!",["T_ISSET","isset",285],"(",["T_VARIABLE","$regionsCache",285],"[",["T_VARIABLE","$countryCode",285],"]",")",")",["T_WHITESPACE"," ",285],"{",["T_WHITESPACE","\n            ",285],["T_VARIABLE","$regionsCache",286],"[",["T_VARIABLE","$countryCode",286],"]",["T_WHITESPACE"," ",286],"=",["T_WHITESPACE"," ",286],"[","]",";",["T_WHITESPACE","\n            ",286],["T_COMMENT","\/\/ add 'All Regions' to the list\n",287],["T_WHITESPACE","            ",288],["T_VARIABLE","$regionsCache",288],"[",["T_VARIABLE","$countryCode",288],"]","[",["T_CONSTANT_ENCAPSED_STRING","'*'",288],"]",["T_WHITESPACE"," ",288],"=",["T_WHITESPACE"," ",288],["T_CONSTANT_ENCAPSED_STRING","'*'",288],";",["T_WHITESPACE","\n            ",288],["T_VARIABLE","$regionCollection",289],["T_WHITESPACE"," ",289],"=",["T_WHITESPACE"," ",289],["T_CLONE","clone",289],["T_WHITESPACE"," ",289],["T_VARIABLE","$this",289],["T_OBJECT_OPERATOR","->",289],["T_STRING","_regionCollection",289],";",["T_WHITESPACE","\n            ",289],["T_VARIABLE","$regionCollection",290],["T_OBJECT_OPERATOR","->",290],["T_STRING","addCountryFilter",290],"(",["T_VARIABLE","$countryCode",290],")",";",["T_WHITESPACE","\n            ",290],["T_IF","if",291],["T_WHITESPACE"," ",291],"(",["T_VARIABLE","$regionCollection",291],["T_OBJECT_OPERATOR","->",291],["T_STRING","getSize",291],"(",")",")",["T_WHITESPACE"," ",291],"{",["T_WHITESPACE","\n                ",291],["T_FOREACH","foreach",292],["T_WHITESPACE"," ",292],"(",["T_VARIABLE","$regionCollection",292],["T_WHITESPACE"," ",292],["T_AS","as",292],["T_WHITESPACE"," ",292],["T_VARIABLE","$region",292],")",["T_WHITESPACE"," ",292],"{",["T_WHITESPACE","\n                    ",292],["T_VARIABLE","$regionsCache",293],"[",["T_VARIABLE","$countryCode",293],"]","[",["T_VARIABLE","$region",293],["T_OBJECT_OPERATOR","->",293],["T_STRING","getCode",293],"(",")","]",["T_WHITESPACE"," ",293],"=",["T_WHITESPACE"," ",293],["T_VARIABLE","$region",293],["T_OBJECT_OPERATOR","->",293],["T_STRING","getRegionId",293],"(",")",";",["T_WHITESPACE","\n                ",293],"}",["T_WHITESPACE","\n            ",294],"}",["T_WHITESPACE","\n        ",295],"}",["T_WHITESPACE","\n        ",296],["T_RETURN","return",297],["T_WHITESPACE"," ",297],["T_VARIABLE","$regionsCache",297],";",["T_WHITESPACE","\n    ",297],"}",["T_WHITESPACE","\n",298],"}",["T_WHITESPACE","\n",299]]
[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Copyright \u00c2\u00a9 2013-2017 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n *\/",2],["T_WHITESPACE","\n",5],["T_NAMESPACE","namespace",6],["T_WHITESPACE"," ",6],["T_STRING","Magento",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Downloadable",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Observer",6],";",["T_WHITESPACE","\n\n",6],["T_USE","use",8],["T_WHITESPACE"," ",8],["T_STRING","Magento",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Framework",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Event",8],["T_NS_SEPARATOR","\\",8],["T_STRING","ObserverInterface",8],";",["T_WHITESPACE","\n",8],["T_USE","use",9],["T_WHITESPACE"," ",9],["T_STRING","Magento",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Store",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Model",9],["T_NS_SEPARATOR","\\",9],["T_STRING","ScopeInterface",9],";",["T_WHITESPACE","\n\n",9],["T_CLASS","class",11],["T_WHITESPACE"," ",11],["T_STRING","SetLinkStatusObserver",11],["T_WHITESPACE"," ",11],["T_IMPLEMENTS","implements",11],["T_WHITESPACE"," ",11],["T_STRING","ObserverInterface",11],["T_WHITESPACE","\n",11],"{",["T_WHITESPACE","\n    ",12],["T_DOC_COMMENT","\/**\n     * Core store config\n     *\n     * @var \\Magento\\Framework\\App\\Config\\ScopeConfigInterface\n     *\/",13],["T_WHITESPACE","\n    ",17],["T_PROTECTED","protected",18],["T_WHITESPACE"," ",18],["T_VARIABLE","$_scopeConfig",18],";",["T_WHITESPACE","\n\n    ",18],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Downloadable\\Model\\ResourceModel\\Link\\Purchased\\Item\\CollectionFactory\n     *\/",20],["T_WHITESPACE","\n    ",22],["T_PROTECTED","protected",23],["T_WHITESPACE"," ",23],["T_VARIABLE","$_itemsFactory",23],";",["T_WHITESPACE","\n\n    ",23],["T_DOC_COMMENT","\/**\n     * @param \\Magento\\Framework\\App\\Config\\ScopeConfigInterface $scopeConfig\n     * @param \\Magento\\Downloadable\\Model\\ResourceModel\\Link\\Purchased\\Item\\CollectionFactory $itemsFactory\n     *\/",25],["T_WHITESPACE","\n    ",28],["T_PUBLIC","public",29],["T_WHITESPACE"," ",29],["T_FUNCTION","function",29],["T_WHITESPACE"," ",29],["T_STRING","__construct",29],"(",["T_WHITESPACE","\n        ",29],["T_NS_SEPARATOR","\\",30],["T_STRING","Magento",30],["T_NS_SEPARATOR","\\",30],["T_STRING","Framework",30],["T_NS_SEPARATOR","\\",30],["T_STRING","App",30],["T_NS_SEPARATOR","\\",30],["T_STRING","Config",30],["T_NS_SEPARATOR","\\",30],["T_STRING","ScopeConfigInterface",30],["T_WHITESPACE"," ",30],["T_VARIABLE","$scopeConfig",30],",",["T_WHITESPACE","\n        ",30],["T_NS_SEPARATOR","\\",31],["T_STRING","Magento",31],["T_NS_SEPARATOR","\\",31],["T_STRING","Downloadable",31],["T_NS_SEPARATOR","\\",31],["T_STRING","Model",31],["T_NS_SEPARATOR","\\",31],["T_STRING","ResourceModel",31],["T_NS_SEPARATOR","\\",31],["T_STRING","Link",31],["T_NS_SEPARATOR","\\",31],["T_STRING","Purchased",31],["T_NS_SEPARATOR","\\",31],["T_STRING","Item",31],["T_NS_SEPARATOR","\\",31],["T_STRING","CollectionFactory",31],["T_WHITESPACE"," ",31],["T_VARIABLE","$itemsFactory",31],["T_WHITESPACE","\n    ",31],")",["T_WHITESPACE"," ",32],"{",["T_WHITESPACE","\n        ",32],["T_VARIABLE","$this",33],["T_OBJECT_OPERATOR","->",33],["T_STRING","_scopeConfig",33],["T_WHITESPACE"," ",33],"=",["T_WHITESPACE"," ",33],["T_VARIABLE","$scopeConfig",33],";",["T_WHITESPACE","\n        ",33],["T_VARIABLE","$this",34],["T_OBJECT_OPERATOR","->",34],["T_STRING","_itemsFactory",34],["T_WHITESPACE"," ",34],"=",["T_WHITESPACE"," ",34],["T_VARIABLE","$itemsFactory",34],";",["T_WHITESPACE","\n    ",34],"}",["T_WHITESPACE","\n\n\n    ",35],["T_DOC_COMMENT","\/**\n     * Set status of link\n     *\n     * @param \\Magento\\Framework\\Event\\Observer $observer\n     * @return $this\n     * @SuppressWarnings(PHPMD.CyclomaticComplexity)\n     * @SuppressWarnings(PHPMD.NPathComplexity)\n     * @SuppressWarnings(PHPMD.ExcessiveMethodLength)\n     *\/",38],["T_WHITESPACE","\n    ",46],["T_PUBLIC","public",47],["T_WHITESPACE"," ",47],["T_FUNCTION","function",47],["T_WHITESPACE"," ",47],["T_STRING","execute",47],"(",["T_NS_SEPARATOR","\\",47],["T_STRING","Magento",47],["T_NS_SEPARATOR","\\",47],["T_STRING","Framework",47],["T_NS_SEPARATOR","\\",47],["T_STRING","Event",47],["T_NS_SEPARATOR","\\",47],["T_STRING","Observer",47],["T_WHITESPACE"," ",47],["T_VARIABLE","$observer",47],")",["T_WHITESPACE","\n    ",47],"{",["T_WHITESPACE","\n        ",48],["T_VARIABLE","$order",49],["T_WHITESPACE"," ",49],"=",["T_WHITESPACE"," ",49],["T_VARIABLE","$observer",49],["T_OBJECT_OPERATOR","->",49],["T_STRING","getEvent",49],"(",")",["T_OBJECT_OPERATOR","->",49],["T_STRING","getOrder",49],"(",")",";",["T_WHITESPACE","\n\n        ",49],["T_IF","if",51],["T_WHITESPACE"," ",51],"(","!",["T_VARIABLE","$order",51],["T_OBJECT_OPERATOR","->",51],["T_STRING","getId",51],"(",")",")",["T_WHITESPACE"," ",51],"{",["T_WHITESPACE","\n            ",51],["T_COMMENT","\/\/order not saved in the database\n",52],["T_WHITESPACE","            ",53],["T_RETURN","return",53],["T_WHITESPACE"," ",53],["T_VARIABLE","$this",53],";",["T_WHITESPACE","\n        ",53],"}",["T_WHITESPACE","\n\n        ",54],["T_COMMENT","\/* @var $order \\Magento\\Sales\\Model\\Order *\/",56],["T_WHITESPACE","\n        ",56],["T_VARIABLE","$status",57],["T_WHITESPACE"," ",57],"=",["T_WHITESPACE"," ",57],["T_CONSTANT_ENCAPSED_STRING","''",57],";",["T_WHITESPACE","\n        ",57],["T_VARIABLE","$linkStatuses",58],["T_WHITESPACE"," ",58],"=",["T_WHITESPACE"," ",58],"[",["T_WHITESPACE","\n            ",58],["T_CONSTANT_ENCAPSED_STRING","'pending'",59],["T_WHITESPACE"," ",59],["T_DOUBLE_ARROW","=>",59],["T_WHITESPACE"," ",59],["T_NS_SEPARATOR","\\",59],["T_STRING","Magento",59],["T_NS_SEPARATOR","\\",59],["T_STRING","Downloadable",59],["T_NS_SEPARATOR","\\",59],["T_STRING","Model",59],["T_NS_SEPARATOR","\\",59],["T_STRING","Link",59],["T_NS_SEPARATOR","\\",59],["T_STRING","Purchased",59],["T_NS_SEPARATOR","\\",59],["T_STRING","Item",59],["T_DOUBLE_COLON","::",59],["T_STRING","LINK_STATUS_PENDING",59],",",["T_WHITESPACE","\n            ",59],["T_CONSTANT_ENCAPSED_STRING","'expired'",60],["T_WHITESPACE"," ",60],["T_DOUBLE_ARROW","=>",60],["T_WHITESPACE"," ",60],["T_NS_SEPARATOR","\\",60],["T_STRING","Magento",60],["T_NS_SEPARATOR","\\",60],["T_STRING","Downloadable",60],["T_NS_SEPARATOR","\\",60],["T_STRING","Model",60],["T_NS_SEPARATOR","\\",60],["T_STRING","Link",60],["T_NS_SEPARATOR","\\",60],["T_STRING","Purchased",60],["T_NS_SEPARATOR","\\",60],["T_STRING","Item",60],["T_DOUBLE_COLON","::",60],["T_STRING","LINK_STATUS_EXPIRED",60],",",["T_WHITESPACE","\n            ",60],["T_CONSTANT_ENCAPSED_STRING","'avail'",61],["T_WHITESPACE"," ",61],["T_DOUBLE_ARROW","=>",61],["T_WHITESPACE"," ",61],["T_NS_SEPARATOR","\\",61],["T_STRING","Magento",61],["T_NS_SEPARATOR","\\",61],["T_STRING","Downloadable",61],["T_NS_SEPARATOR","\\",61],["T_STRING","Model",61],["T_NS_SEPARATOR","\\",61],["T_STRING","Link",61],["T_NS_SEPARATOR","\\",61],["T_STRING","Purchased",61],["T_NS_SEPARATOR","\\",61],["T_STRING","Item",61],["T_DOUBLE_COLON","::",61],["T_STRING","LINK_STATUS_AVAILABLE",61],",",["T_WHITESPACE","\n            ",61],["T_CONSTANT_ENCAPSED_STRING","'payment_pending'",62],["T_WHITESPACE"," ",62],["T_DOUBLE_ARROW","=>",62],["T_WHITESPACE"," ",62],["T_NS_SEPARATOR","\\",62],["T_STRING","Magento",62],["T_NS_SEPARATOR","\\",62],["T_STRING","Downloadable",62],["T_NS_SEPARATOR","\\",62],["T_STRING","Model",62],["T_NS_SEPARATOR","\\",62],["T_STRING","Link",62],["T_NS_SEPARATOR","\\",62],["T_STRING","Purchased",62],["T_NS_SEPARATOR","\\",62],["T_STRING","Item",62],["T_DOUBLE_COLON","::",62],["T_STRING","LINK_STATUS_PENDING_PAYMENT",62],",",["T_WHITESPACE","\n            ",62],["T_CONSTANT_ENCAPSED_STRING","'payment_review'",63],["T_WHITESPACE"," ",63],["T_DOUBLE_ARROW","=>",63],["T_WHITESPACE"," ",63],["T_NS_SEPARATOR","\\",63],["T_STRING","Magento",63],["T_NS_SEPARATOR","\\",63],["T_STRING","Downloadable",63],["T_NS_SEPARATOR","\\",63],["T_STRING","Model",63],["T_NS_SEPARATOR","\\",63],["T_STRING","Link",63],["T_NS_SEPARATOR","\\",63],["T_STRING","Purchased",63],["T_NS_SEPARATOR","\\",63],["T_STRING","Item",63],["T_DOUBLE_COLON","::",63],["T_STRING","LINK_STATUS_PAYMENT_REVIEW",63],",",["T_WHITESPACE","\n        ",63],"]",";",["T_WHITESPACE","\n\n        ",64],["T_VARIABLE","$downloadableItemsStatuses",66],["T_WHITESPACE"," ",66],"=",["T_WHITESPACE"," ",66],"[","]",";",["T_WHITESPACE","\n        ",66],["T_VARIABLE","$orderItemStatusToEnable",67],["T_WHITESPACE"," ",67],"=",["T_WHITESPACE"," ",67],["T_VARIABLE","$this",67],["T_OBJECT_OPERATOR","->",67],["T_STRING","_scopeConfig",67],["T_OBJECT_OPERATOR","->",67],["T_STRING","getValue",67],"(",["T_WHITESPACE","\n            ",67],["T_NS_SEPARATOR","\\",68],["T_STRING","Magento",68],["T_NS_SEPARATOR","\\",68],["T_STRING","Downloadable",68],["T_NS_SEPARATOR","\\",68],["T_STRING","Model",68],["T_NS_SEPARATOR","\\",68],["T_STRING","Link",68],["T_NS_SEPARATOR","\\",68],["T_STRING","Purchased",68],["T_NS_SEPARATOR","\\",68],["T_STRING","Item",68],["T_DOUBLE_COLON","::",68],["T_STRING","XML_PATH_ORDER_ITEM_STATUS",68],",",["T_WHITESPACE","\n            ",68],["T_STRING","ScopeInterface",69],["T_DOUBLE_COLON","::",69],["T_STRING","SCOPE_STORE",69],",",["T_WHITESPACE","\n            ",69],["T_VARIABLE","$order",70],["T_OBJECT_OPERATOR","->",70],["T_STRING","getStoreId",70],"(",")",["T_WHITESPACE","\n        ",70],")",";",["T_WHITESPACE","\n\n        ",71],["T_IF","if",73],["T_WHITESPACE"," ",73],"(",["T_VARIABLE","$order",73],["T_OBJECT_OPERATOR","->",73],["T_STRING","getState",73],"(",")",["T_WHITESPACE"," ",73],["T_IS_EQUAL","==",73],["T_WHITESPACE"," ",73],["T_NS_SEPARATOR","\\",73],["T_STRING","Magento",73],["T_NS_SEPARATOR","\\",73],["T_STRING","Sales",73],["T_NS_SEPARATOR","\\",73],["T_STRING","Model",73],["T_NS_SEPARATOR","\\",73],["T_STRING","Order",73],["T_DOUBLE_COLON","::",73],["T_STRING","STATE_HOLDED",73],")",["T_WHITESPACE"," ",73],"{",["T_WHITESPACE","\n            ",73],["T_VARIABLE","$status",74],["T_WHITESPACE"," ",74],"=",["T_WHITESPACE"," ",74],["T_VARIABLE","$linkStatuses",74],"[",["T_CONSTANT_ENCAPSED_STRING","'pending'",74],"]",";",["T_WHITESPACE","\n        ",74],"}",["T_WHITESPACE"," ",75],["T_ELSEIF","elseif",75],["T_WHITESPACE"," ",75],"(",["T_VARIABLE","$order",75],["T_OBJECT_OPERATOR","->",75],["T_STRING","isCanceled",75],"(",")",["T_WHITESPACE","\n            ",75],["T_BOOLEAN_OR","||",76],["T_WHITESPACE"," ",76],["T_VARIABLE","$order",76],["T_OBJECT_OPERATOR","->",76],["T_STRING","getState",76],"(",")",["T_WHITESPACE"," ",76],["T_IS_EQUAL","==",76],["T_WHITESPACE"," ",76],["T_NS_SEPARATOR","\\",76],["T_STRING","Magento",76],["T_NS_SEPARATOR","\\",76],["T_STRING","Sales",76],["T_NS_SEPARATOR","\\",76],["T_STRING","Model",76],["T_NS_SEPARATOR","\\",76],["T_STRING","Order",76],["T_DOUBLE_COLON","::",76],["T_STRING","STATE_CLOSED",76],["T_WHITESPACE","\n            ",76],["T_BOOLEAN_OR","||",77],["T_WHITESPACE"," ",77],["T_VARIABLE","$order",77],["T_OBJECT_OPERATOR","->",77],["T_STRING","getState",77],"(",")",["T_WHITESPACE"," ",77],["T_IS_EQUAL","==",77],["T_WHITESPACE"," ",77],["T_NS_SEPARATOR","\\",77],["T_STRING","Magento",77],["T_NS_SEPARATOR","\\",77],["T_STRING","Sales",77],["T_NS_SEPARATOR","\\",77],["T_STRING","Model",77],["T_NS_SEPARATOR","\\",77],["T_STRING","Order",77],["T_DOUBLE_COLON","::",77],["T_STRING","STATE_COMPLETE",77],["T_WHITESPACE","\n        ",77],")",["T_WHITESPACE"," ",78],"{",["T_WHITESPACE","\n            ",78],["T_VARIABLE","$expiredStatuses",79],["T_WHITESPACE"," ",79],"=",["T_WHITESPACE"," ",79],"[",["T_WHITESPACE","\n                ",79],["T_NS_SEPARATOR","\\",80],["T_STRING","Magento",80],["T_NS_SEPARATOR","\\",80],["T_STRING","Sales",80],["T_NS_SEPARATOR","\\",80],["T_STRING","Model",80],["T_NS_SEPARATOR","\\",80],["T_STRING","Order",80],["T_NS_SEPARATOR","\\",80],["T_STRING","Item",80],["T_DOUBLE_COLON","::",80],["T_STRING","STATUS_CANCELED",80],",",["T_WHITESPACE","\n                ",80],["T_NS_SEPARATOR","\\",81],["T_STRING","Magento",81],["T_NS_SEPARATOR","\\",81],["T_STRING","Sales",81],["T_NS_SEPARATOR","\\",81],["T_STRING","Model",81],["T_NS_SEPARATOR","\\",81],["T_STRING","Order",81],["T_NS_SEPARATOR","\\",81],["T_STRING","Item",81],["T_DOUBLE_COLON","::",81],["T_STRING","STATUS_REFUNDED",81],",",["T_WHITESPACE","\n            ",81],"]",";",["T_WHITESPACE","\n            ",82],["T_FOREACH","foreach",83],["T_WHITESPACE"," ",83],"(",["T_VARIABLE","$order",83],["T_OBJECT_OPERATOR","->",83],["T_STRING","getAllItems",83],"(",")",["T_WHITESPACE"," ",83],["T_AS","as",83],["T_WHITESPACE"," ",83],["T_VARIABLE","$item",83],")",["T_WHITESPACE"," ",83],"{",["T_WHITESPACE","\n                ",83],["T_IF","if",84],["T_WHITESPACE"," ",84],"(",["T_VARIABLE","$item",84],["T_OBJECT_OPERATOR","->",84],["T_STRING","getProductType",84],"(",")",["T_WHITESPACE"," ",84],["T_IS_EQUAL","==",84],["T_WHITESPACE"," ",84],["T_NS_SEPARATOR","\\",84],["T_STRING","Magento",84],["T_NS_SEPARATOR","\\",84],["T_STRING","Downloadable",84],["T_NS_SEPARATOR","\\",84],["T_STRING","Model",84],["T_NS_SEPARATOR","\\",84],["T_STRING","Product",84],["T_NS_SEPARATOR","\\",84],["T_STRING","Type",84],["T_DOUBLE_COLON","::",84],["T_STRING","TYPE_DOWNLOADABLE",84],["T_WHITESPACE","\n                    ",84],["T_BOOLEAN_OR","||",85],["T_WHITESPACE"," ",85],["T_VARIABLE","$item",85],["T_OBJECT_OPERATOR","->",85],["T_STRING","getRealProductType",85],"(",")",["T_WHITESPACE"," ",85],["T_IS_EQUAL","==",85],["T_WHITESPACE"," ",85],["T_NS_SEPARATOR","\\",85],["T_STRING","Magento",85],["T_NS_SEPARATOR","\\",85],["T_STRING","Downloadable",85],["T_NS_SEPARATOR","\\",85],["T_STRING","Model",85],["T_NS_SEPARATOR","\\",85],["T_STRING","Product",85],["T_NS_SEPARATOR","\\",85],["T_STRING","Type",85],["T_DOUBLE_COLON","::",85],["T_STRING","TYPE_DOWNLOADABLE",85],["T_WHITESPACE","\n                ",85],")",["T_WHITESPACE"," ",86],"{",["T_WHITESPACE","\n                    ",86],["T_IF","if",87],["T_WHITESPACE"," ",87],"(",["T_STRING","in_array",87],"(",["T_VARIABLE","$item",87],["T_OBJECT_OPERATOR","->",87],["T_STRING","getStatusId",87],"(",")",",",["T_WHITESPACE"," ",87],["T_VARIABLE","$expiredStatuses",87],")",")",["T_WHITESPACE"," ",87],"{",["T_WHITESPACE","\n                        ",87],["T_VARIABLE","$downloadableItemsStatuses",88],"[",["T_VARIABLE","$item",88],["T_OBJECT_OPERATOR","->",88],["T_STRING","getId",88],"(",")","]",["T_WHITESPACE"," ",88],"=",["T_WHITESPACE"," ",88],["T_VARIABLE","$linkStatuses",88],"[",["T_CONSTANT_ENCAPSED_STRING","'expired'",88],"]",";",["T_WHITESPACE","\n                    ",88],"}",["T_WHITESPACE"," ",89],["T_ELSE","else",89],["T_WHITESPACE"," ",89],"{",["T_WHITESPACE","\n                        ",89],["T_VARIABLE","$downloadableItemsStatuses",90],"[",["T_VARIABLE","$item",90],["T_OBJECT_OPERATOR","->",90],["T_STRING","getId",90],"(",")","]",["T_WHITESPACE"," ",90],"=",["T_WHITESPACE"," ",90],["T_VARIABLE","$linkStatuses",90],"[",["T_CONSTANT_ENCAPSED_STRING","'avail'",90],"]",";",["T_WHITESPACE","\n                    ",90],"}",["T_WHITESPACE","\n                ",91],"}",["T_WHITESPACE","\n            ",92],"}",["T_WHITESPACE","\n        ",93],"}",["T_WHITESPACE"," ",94],["T_ELSEIF","elseif",94],["T_WHITESPACE"," ",94],"(",["T_VARIABLE","$order",94],["T_OBJECT_OPERATOR","->",94],["T_STRING","getState",94],"(",")",["T_WHITESPACE"," ",94],["T_IS_EQUAL","==",94],["T_WHITESPACE"," ",94],["T_NS_SEPARATOR","\\",94],["T_STRING","Magento",94],["T_NS_SEPARATOR","\\",94],["T_STRING","Sales",94],["T_NS_SEPARATOR","\\",94],["T_STRING","Model",94],["T_NS_SEPARATOR","\\",94],["T_STRING","Order",94],["T_DOUBLE_COLON","::",94],["T_STRING","STATE_PENDING_PAYMENT",94],")",["T_WHITESPACE"," ",94],"{",["T_WHITESPACE","\n            ",94],["T_VARIABLE","$status",95],["T_WHITESPACE"," ",95],"=",["T_WHITESPACE"," ",95],["T_VARIABLE","$linkStatuses",95],"[",["T_CONSTANT_ENCAPSED_STRING","'payment_pending'",95],"]",";",["T_WHITESPACE","\n        ",95],"}",["T_WHITESPACE"," ",96],["T_ELSEIF","elseif",96],["T_WHITESPACE"," ",96],"(",["T_VARIABLE","$order",96],["T_OBJECT_OPERATOR","->",96],["T_STRING","getState",96],"(",")",["T_WHITESPACE"," ",96],["T_IS_EQUAL","==",96],["T_WHITESPACE"," ",96],["T_NS_SEPARATOR","\\",96],["T_STRING","Magento",96],["T_NS_SEPARATOR","\\",96],["T_STRING","Sales",96],["T_NS_SEPARATOR","\\",96],["T_STRING","Model",96],["T_NS_SEPARATOR","\\",96],["T_STRING","Order",96],["T_DOUBLE_COLON","::",96],["T_STRING","STATE_PAYMENT_REVIEW",96],")",["T_WHITESPACE"," ",96],"{",["T_WHITESPACE","\n            ",96],["T_VARIABLE","$status",97],["T_WHITESPACE"," ",97],"=",["T_WHITESPACE"," ",97],["T_VARIABLE","$linkStatuses",97],"[",["T_CONSTANT_ENCAPSED_STRING","'payment_review'",97],"]",";",["T_WHITESPACE","\n        ",97],"}",["T_WHITESPACE"," ",98],["T_ELSE","else",98],["T_WHITESPACE"," ",98],"{",["T_WHITESPACE","\n            ",98],["T_VARIABLE","$availableStatuses",99],["T_WHITESPACE"," ",99],"=",["T_WHITESPACE"," ",99],"[",["T_VARIABLE","$orderItemStatusToEnable",99],",",["T_WHITESPACE"," ",99],["T_NS_SEPARATOR","\\",99],["T_STRING","Magento",99],["T_NS_SEPARATOR","\\",99],["T_STRING","Sales",99],["T_NS_SEPARATOR","\\",99],["T_STRING","Model",99],["T_NS_SEPARATOR","\\",99],["T_STRING","Order",99],["T_NS_SEPARATOR","\\",99],["T_STRING","Item",99],["T_DOUBLE_COLON","::",99],["T_STRING","STATUS_INVOICED",99],"]",";",["T_WHITESPACE","\n            ",99],["T_FOREACH","foreach",100],["T_WHITESPACE"," ",100],"(",["T_VARIABLE","$order",100],["T_OBJECT_OPERATOR","->",100],["T_STRING","getAllItems",100],"(",")",["T_WHITESPACE"," ",100],["T_AS","as",100],["T_WHITESPACE"," ",100],["T_VARIABLE","$item",100],")",["T_WHITESPACE"," ",100],"{",["T_WHITESPACE","\n                ",100],["T_IF","if",101],["T_WHITESPACE"," ",101],"(",["T_VARIABLE","$item",101],["T_OBJECT_OPERATOR","->",101],["T_STRING","getProductType",101],"(",")",["T_WHITESPACE"," ",101],["T_IS_EQUAL","==",101],["T_WHITESPACE"," ",101],["T_NS_SEPARATOR","\\",101],["T_STRING","Magento",101],["T_NS_SEPARATOR","\\",101],["T_STRING","Downloadable",101],["T_NS_SEPARATOR","\\",101],["T_STRING","Model",101],["T_NS_SEPARATOR","\\",101],["T_STRING","Product",101],["T_NS_SEPARATOR","\\",101],["T_STRING","Type",101],["T_DOUBLE_COLON","::",101],["T_STRING","TYPE_DOWNLOADABLE",101],["T_WHITESPACE","\n                    ",101],["T_BOOLEAN_OR","||",102],["T_WHITESPACE"," ",102],["T_VARIABLE","$item",102],["T_OBJECT_OPERATOR","->",102],["T_STRING","getRealProductType",102],"(",")",["T_WHITESPACE"," ",102],["T_IS_EQUAL","==",102],["T_WHITESPACE"," ",102],["T_NS_SEPARATOR","\\",102],["T_STRING","Magento",102],["T_NS_SEPARATOR","\\",102],["T_STRING","Downloadable",102],["T_NS_SEPARATOR","\\",102],["T_STRING","Model",102],["T_NS_SEPARATOR","\\",102],["T_STRING","Product",102],["T_NS_SEPARATOR","\\",102],["T_STRING","Type",102],["T_DOUBLE_COLON","::",102],["T_STRING","TYPE_DOWNLOADABLE",102],["T_WHITESPACE","\n                ",102],")",["T_WHITESPACE"," ",103],"{",["T_WHITESPACE","\n                    ",103],["T_IF","if",104],["T_WHITESPACE"," ",104],"(",["T_VARIABLE","$item",104],["T_OBJECT_OPERATOR","->",104],["T_STRING","getStatusId",104],"(",")",["T_WHITESPACE"," ",104],["T_IS_EQUAL","==",104],["T_WHITESPACE"," ",104],["T_NS_SEPARATOR","\\",104],["T_STRING","Magento",104],["T_NS_SEPARATOR","\\",104],["T_STRING","Sales",104],["T_NS_SEPARATOR","\\",104],["T_STRING","Model",104],["T_NS_SEPARATOR","\\",104],["T_STRING","Order",104],["T_NS_SEPARATOR","\\",104],["T_STRING","Item",104],["T_DOUBLE_COLON","::",104],["T_STRING","STATUS_BACKORDERED",104],["T_WHITESPACE","\n                        ",104],["T_BOOLEAN_AND","&&",105],["T_WHITESPACE"," ",105],["T_VARIABLE","$orderItemStatusToEnable",105],["T_WHITESPACE"," ",105],["T_IS_EQUAL","==",105],["T_WHITESPACE"," ",105],["T_NS_SEPARATOR","\\",105],["T_STRING","Magento",105],["T_NS_SEPARATOR","\\",105],["T_STRING","Sales",105],["T_NS_SEPARATOR","\\",105],["T_STRING","Model",105],["T_NS_SEPARATOR","\\",105],["T_STRING","Order",105],["T_NS_SEPARATOR","\\",105],["T_STRING","Item",105],["T_DOUBLE_COLON","::",105],["T_STRING","STATUS_PENDING",105],["T_WHITESPACE","\n                        ",105],["T_BOOLEAN_AND","&&",106],["T_WHITESPACE"," ",106],"!",["T_STRING","in_array",106],"(",["T_WHITESPACE","\n                            ",106],["T_NS_SEPARATOR","\\",107],["T_STRING","Magento",107],["T_NS_SEPARATOR","\\",107],["T_STRING","Sales",107],["T_NS_SEPARATOR","\\",107],["T_STRING","Model",107],["T_NS_SEPARATOR","\\",107],["T_STRING","Order",107],["T_NS_SEPARATOR","\\",107],["T_STRING","Item",107],["T_DOUBLE_COLON","::",107],["T_STRING","STATUS_BACKORDERED",107],",",["T_WHITESPACE","\n                            ",107],["T_VARIABLE","$availableStatuses",108],",",["T_WHITESPACE","\n                            ",108],["T_STRING","true",109],["T_WHITESPACE","\n                        ",109],")",["T_WHITESPACE","\n                    ",110],")",["T_WHITESPACE"," ",111],"{",["T_WHITESPACE","\n                        ",111],["T_VARIABLE","$availableStatuses",112],"[","]",["T_WHITESPACE"," ",112],"=",["T_WHITESPACE"," ",112],["T_NS_SEPARATOR","\\",112],["T_STRING","Magento",112],["T_NS_SEPARATOR","\\",112],["T_STRING","Sales",112],["T_NS_SEPARATOR","\\",112],["T_STRING","Model",112],["T_NS_SEPARATOR","\\",112],["T_STRING","Order",112],["T_NS_SEPARATOR","\\",112],["T_STRING","Item",112],["T_DOUBLE_COLON","::",112],["T_STRING","STATUS_BACKORDERED",112],";",["T_WHITESPACE","\n                    ",112],"}",["T_WHITESPACE","\n\n                    ",113],["T_IF","if",115],["T_WHITESPACE"," ",115],"(",["T_STRING","in_array",115],"(",["T_VARIABLE","$item",115],["T_OBJECT_OPERATOR","->",115],["T_STRING","getStatusId",115],"(",")",",",["T_WHITESPACE"," ",115],["T_VARIABLE","$availableStatuses",115],")",")",["T_WHITESPACE"," ",115],"{",["T_WHITESPACE","\n                        ",115],["T_VARIABLE","$downloadableItemsStatuses",116],"[",["T_VARIABLE","$item",116],["T_OBJECT_OPERATOR","->",116],["T_STRING","getId",116],"(",")","]",["T_WHITESPACE"," ",116],"=",["T_WHITESPACE"," ",116],["T_VARIABLE","$linkStatuses",116],"[",["T_CONSTANT_ENCAPSED_STRING","'avail'",116],"]",";",["T_WHITESPACE","\n                    ",116],"}",["T_WHITESPACE","\n                ",117],"}",["T_WHITESPACE","\n            ",118],"}",["T_WHITESPACE","\n        ",119],"}",["T_WHITESPACE","\n        ",120],["T_IF","if",121],["T_WHITESPACE"," ",121],"(","!",["T_VARIABLE","$downloadableItemsStatuses",121],["T_WHITESPACE"," ",121],["T_BOOLEAN_AND","&&",121],["T_WHITESPACE"," ",121],["T_VARIABLE","$status",121],")",["T_WHITESPACE"," ",121],"{",["T_WHITESPACE","\n            ",121],["T_FOREACH","foreach",122],["T_WHITESPACE"," ",122],"(",["T_VARIABLE","$order",122],["T_OBJECT_OPERATOR","->",122],["T_STRING","getAllItems",122],"(",")",["T_WHITESPACE"," ",122],["T_AS","as",122],["T_WHITESPACE"," ",122],["T_VARIABLE","$item",122],")",["T_WHITESPACE"," ",122],"{",["T_WHITESPACE","\n                ",122],["T_IF","if",123],["T_WHITESPACE"," ",123],"(",["T_VARIABLE","$item",123],["T_OBJECT_OPERATOR","->",123],["T_STRING","getProductType",123],"(",")",["T_WHITESPACE"," ",123],["T_IS_EQUAL","==",123],["T_WHITESPACE"," ",123],["T_NS_SEPARATOR","\\",123],["T_STRING","Magento",123],["T_NS_SEPARATOR","\\",123],["T_STRING","Downloadable",123],["T_NS_SEPARATOR","\\",123],["T_STRING","Model",123],["T_NS_SEPARATOR","\\",123],["T_STRING","Product",123],["T_NS_SEPARATOR","\\",123],["T_STRING","Type",123],["T_DOUBLE_COLON","::",123],["T_STRING","TYPE_DOWNLOADABLE",123],["T_WHITESPACE","\n                    ",123],["T_BOOLEAN_OR","||",124],["T_WHITESPACE"," ",124],["T_VARIABLE","$item",124],["T_OBJECT_OPERATOR","->",124],["T_STRING","getRealProductType",124],"(",")",["T_WHITESPACE"," ",124],["T_IS_EQUAL","==",124],["T_WHITESPACE"," ",124],["T_NS_SEPARATOR","\\",124],["T_STRING","Magento",124],["T_NS_SEPARATOR","\\",124],["T_STRING","Downloadable",124],["T_NS_SEPARATOR","\\",124],["T_STRING","Model",124],["T_NS_SEPARATOR","\\",124],["T_STRING","Product",124],["T_NS_SEPARATOR","\\",124],["T_STRING","Type",124],["T_DOUBLE_COLON","::",124],["T_STRING","TYPE_DOWNLOADABLE",124],["T_WHITESPACE","\n                ",124],")",["T_WHITESPACE"," ",125],"{",["T_WHITESPACE","\n                    ",125],["T_VARIABLE","$downloadableItemsStatuses",126],"[",["T_VARIABLE","$item",126],["T_OBJECT_OPERATOR","->",126],["T_STRING","getId",126],"(",")","]",["T_WHITESPACE"," ",126],"=",["T_WHITESPACE"," ",126],["T_VARIABLE","$status",126],";",["T_WHITESPACE","\n                ",126],"}",["T_WHITESPACE","\n            ",127],"}",["T_WHITESPACE","\n        ",128],"}",["T_WHITESPACE","\n\n        ",129],["T_IF","if",131],["T_WHITESPACE"," ",131],"(",["T_VARIABLE","$downloadableItemsStatuses",131],")",["T_WHITESPACE"," ",131],"{",["T_WHITESPACE","\n            ",131],["T_VARIABLE","$linkPurchased",132],["T_WHITESPACE"," ",132],"=",["T_WHITESPACE"," ",132],["T_VARIABLE","$this",132],["T_OBJECT_OPERATOR","->",132],["T_STRING","_createItemsCollection",132],"(",")",["T_OBJECT_OPERATOR","->",132],["T_STRING","addFieldToFilter",132],"(",["T_WHITESPACE","\n                ",132],["T_CONSTANT_ENCAPSED_STRING","'order_item_id'",133],",",["T_WHITESPACE","\n                ",133],"[",["T_CONSTANT_ENCAPSED_STRING","'in'",134],["T_WHITESPACE"," ",134],["T_DOUBLE_ARROW","=>",134],["T_WHITESPACE"," ",134],["T_STRING","array_keys",134],"(",["T_VARIABLE","$downloadableItemsStatuses",134],")","]",["T_WHITESPACE","\n            ",134],")",";",["T_WHITESPACE","\n            ",135],["T_FOREACH","foreach",136],["T_WHITESPACE"," ",136],"(",["T_VARIABLE","$linkPurchased",136],["T_WHITESPACE"," ",136],["T_AS","as",136],["T_WHITESPACE"," ",136],["T_VARIABLE","$link",136],")",["T_WHITESPACE"," ",136],"{",["T_WHITESPACE","\n                ",136],["T_IF","if",137],["T_WHITESPACE"," ",137],"(",["T_VARIABLE","$link",137],["T_OBJECT_OPERATOR","->",137],["T_STRING","getStatus",137],"(",")",["T_WHITESPACE"," ",137],["T_IS_NOT_EQUAL","!=",137],["T_WHITESPACE"," ",137],["T_VARIABLE","$linkStatuses",137],"[",["T_CONSTANT_ENCAPSED_STRING","'expired'",137],"]",["T_WHITESPACE","\n                    ",137],["T_BOOLEAN_AND","&&",138],["T_WHITESPACE"," ",138],"!",["T_EMPTY","empty",138],"(",["T_VARIABLE","$downloadableItemsStatuses",138],"[",["T_VARIABLE","$link",138],["T_OBJECT_OPERATOR","->",138],["T_STRING","getOrderItemId",138],"(",")","]",")",["T_WHITESPACE","\n                ",138],")",["T_WHITESPACE"," ",139],"{",["T_WHITESPACE","\n                    ",139],["T_VARIABLE","$link",140],["T_OBJECT_OPERATOR","->",140],["T_STRING","setStatus",140],"(",["T_VARIABLE","$downloadableItemsStatuses",140],"[",["T_VARIABLE","$link",140],["T_OBJECT_OPERATOR","->",140],["T_STRING","getOrderItemId",140],"(",")","]",")",["T_OBJECT_OPERATOR","->",140],["T_STRING","save",140],"(",")",";",["T_WHITESPACE","\n                ",140],"}",["T_WHITESPACE","\n            ",141],"}",["T_WHITESPACE","\n        ",142],"}",["T_WHITESPACE","\n\n        ",143],["T_RETURN","return",145],["T_WHITESPACE"," ",145],["T_VARIABLE","$this",145],";",["T_WHITESPACE","\n    ",145],"}",["T_WHITESPACE","\n\n    ",146],["T_DOC_COMMENT","\/**\n     * @return \\Magento\\Downloadable\\Model\\ResourceModel\\Link\\Purchased\\Item\\Collection\n     *\/",148],["T_WHITESPACE","\n    ",150],["T_PROTECTED","protected",151],["T_WHITESPACE"," ",151],["T_FUNCTION","function",151],["T_WHITESPACE"," ",151],["T_STRING","_createItemsCollection",151],"(",")",["T_WHITESPACE","\n    ",151],"{",["T_WHITESPACE","\n        ",152],["T_RETURN","return",153],["T_WHITESPACE"," ",153],["T_VARIABLE","$this",153],["T_OBJECT_OPERATOR","->",153],["T_STRING","_itemsFactory",153],["T_OBJECT_OPERATOR","->",153],["T_STRING","create",153],"(",")",";",["T_WHITESPACE","\n    ",153],"}",["T_WHITESPACE","\n",154],"}",["T_WHITESPACE","\n",155]]
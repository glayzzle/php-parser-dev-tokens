[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Copyright \u00c2\u00a9 2013-2017 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n *\/",2],["T_WHITESPACE","\n",5],["T_NAMESPACE","namespace",6],["T_WHITESPACE"," ",6],["T_STRING","Magento",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Downloadable",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Model",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Product",6],";",["T_WHITESPACE","\n\n",6],["T_USE","use",8],["T_WHITESPACE"," ",8],["T_STRING","Magento",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Catalog",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Api",8],["T_NS_SEPARATOR","\\",8],["T_STRING","ProductRepositoryInterface",8],";",["T_WHITESPACE","\n",8],["T_USE","use",9],["T_WHITESPACE"," ",9],["T_STRING","Magento",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Framework",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Api",9],["T_NS_SEPARATOR","\\",9],["T_STRING","ExtensionAttribute",9],["T_NS_SEPARATOR","\\",9],["T_STRING","JoinProcessorInterface",9],";",["T_WHITESPACE","\n\n",9],["T_DOC_COMMENT","\/**\n * Downloadable product type model\n *\n * @author      Magento Core Team <core@magentocommerce.com>\n * @SuppressWarnings(PHPMD.CouplingBetweenObjects)\n *\/",11],["T_WHITESPACE","\n",16],["T_CLASS","class",17],["T_WHITESPACE"," ",17],["T_STRING","Type",17],["T_WHITESPACE"," ",17],["T_EXTENDS","extends",17],["T_WHITESPACE"," ",17],["T_NS_SEPARATOR","\\",17],["T_STRING","Magento",17],["T_NS_SEPARATOR","\\",17],["T_STRING","Catalog",17],["T_NS_SEPARATOR","\\",17],["T_STRING","Model",17],["T_NS_SEPARATOR","\\",17],["T_STRING","Product",17],["T_NS_SEPARATOR","\\",17],["T_STRING","Type",17],["T_NS_SEPARATOR","\\",17],["T_STRING","Virtual",17],["T_WHITESPACE","\n",17],"{",["T_WHITESPACE","\n    ",18],["T_CONST","const",19],["T_WHITESPACE"," ",19],["T_STRING","TYPE_DOWNLOADABLE",19],["T_WHITESPACE"," ",19],"=",["T_WHITESPACE"," ",19],["T_CONSTANT_ENCAPSED_STRING","'downloadable'",19],";",["T_WHITESPACE","\n\n    ",19],["T_DOC_COMMENT","\/**\n     * Downloadable file\n     *\n     * @var \\Magento\\Downloadable\\Helper\\File\n     *\/",21],["T_WHITESPACE","\n    ",25],["T_PROTECTED","protected",26],["T_WHITESPACE"," ",26],["T_VARIABLE","$_downloadableFile",26],["T_WHITESPACE"," ",26],"=",["T_WHITESPACE"," ",26],["T_STRING","null",26],";",["T_WHITESPACE","\n\n    ",26],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Downloadable\\Model\\ResourceModel\\SampleFactory\n     *\/",28],["T_WHITESPACE","\n    ",30],["T_PROTECTED","protected",31],["T_WHITESPACE"," ",31],["T_VARIABLE","$_sampleResFactory",31],";",["T_WHITESPACE","\n\n    ",31],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Downloadable\\Model\\ResourceModel\\Link\n     *\/",33],["T_WHITESPACE","\n    ",35],["T_PROTECTED","protected",36],["T_WHITESPACE"," ",36],["T_VARIABLE","$_linkResource",36],";",["T_WHITESPACE","\n\n    ",36],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Downloadable\\Model\\ResourceModel\\Link\\CollectionFactory\n     *\/",38],["T_WHITESPACE","\n    ",40],["T_PROTECTED","protected",41],["T_WHITESPACE"," ",41],["T_VARIABLE","$_linksFactory",41],";",["T_WHITESPACE","\n\n    ",41],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Downloadable\\Model\\ResourceModel\\Sample\\CollectionFactory\n     *\/",43],["T_WHITESPACE","\n    ",45],["T_PROTECTED","protected",46],["T_WHITESPACE"," ",46],["T_VARIABLE","$_samplesFactory",46],";",["T_WHITESPACE","\n\n    ",46],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Downloadable\\Model\\SampleFactory\n     *\/",48],["T_WHITESPACE","\n    ",50],["T_PROTECTED","protected",51],["T_WHITESPACE"," ",51],["T_VARIABLE","$_sampleFactory",51],";",["T_WHITESPACE","\n\n    ",51],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Downloadable\\Model\\LinkFactory\n     *\/",53],["T_WHITESPACE","\n    ",55],["T_PROTECTED","protected",56],["T_WHITESPACE"," ",56],["T_VARIABLE","$_linkFactory",56],";",["T_WHITESPACE","\n\n    ",56],["T_DOC_COMMENT","\/**\n     * @var TypeHandler\\TypeHandlerInterface\n     *\/",58],["T_WHITESPACE","\n    ",60],["T_PRIVATE","private",61],["T_WHITESPACE"," ",61],["T_VARIABLE","$typeHandler",61],";",["T_WHITESPACE","\n\n    ",61],["T_DOC_COMMENT","\/**\n     * @var JoinProcessorInterface\n     *\/",63],["T_WHITESPACE","\n    ",65],["T_PRIVATE","private",66],["T_WHITESPACE"," ",66],["T_VARIABLE","$extensionAttributesJoinProcessor",66],";",["T_WHITESPACE","\n\n    ",66],["T_DOC_COMMENT","\/**\n     * Construct\n     *\n     * @param \\Magento\\Catalog\\Model\\Product\\Option $catalogProductOption\n     * @param \\Magento\\Eav\\Model\\Config $eavConfig\n     * @param \\Magento\\Catalog\\Model\\Product\\Type $catalogProductType\n     * @param \\Magento\\Framework\\Event\\ManagerInterface $eventManager\n     * @param \\Magento\\MediaStorage\\Helper\\File\\Storage\\Database $fileStorageDb\n     * @param \\Magento\\Framework\\Filesystem $filesystem\n     * @param \\Magento\\Framework\\Registry $coreRegistry\n     * @param \\Psr\\Log\\LoggerInterface $logger\n     * @param ProductRepositoryInterface $productRepository\n     * @param \\Magento\\Downloadable\\Model\\ResourceModel\\SampleFactory $sampleResFactory\n     * @param \\Magento\\Downloadable\\Model\\ResourceModel\\Link $linkResource\n     * @param \\Magento\\Downloadable\\Model\\ResourceModel\\Link\\CollectionFactory $linksFactory\n     * @param \\Magento\\Downloadable\\Model\\ResourceModel\\Sample\\CollectionFactory $samplesFactory\n     * @param \\Magento\\Downloadable\\Model\\SampleFactory $sampleFactory\n     * @param \\Magento\\Downloadable\\Model\\LinkFactory $linkFactory\n     * @param TypeHandler\\TypeHandlerInterface $typeHandler\n     * @param JoinProcessorInterface $extensionAttributesJoinProcessor\n     * @param \\Magento\\Framework\\Serialize\\Serializer\\Json|null $serializer\n     * @SuppressWarnings(PHPMD.ExcessiveParameterList)\n     *\/",68],["T_WHITESPACE","\n    ",90],["T_PUBLIC","public",91],["T_WHITESPACE"," ",91],["T_FUNCTION","function",91],["T_WHITESPACE"," ",91],["T_STRING","__construct",91],"(",["T_WHITESPACE","\n        ",91],["T_NS_SEPARATOR","\\",92],["T_STRING","Magento",92],["T_NS_SEPARATOR","\\",92],["T_STRING","Catalog",92],["T_NS_SEPARATOR","\\",92],["T_STRING","Model",92],["T_NS_SEPARATOR","\\",92],["T_STRING","Product",92],["T_NS_SEPARATOR","\\",92],["T_STRING","Option",92],["T_WHITESPACE"," ",92],["T_VARIABLE","$catalogProductOption",92],",",["T_WHITESPACE","\n        ",92],["T_NS_SEPARATOR","\\",93],["T_STRING","Magento",93],["T_NS_SEPARATOR","\\",93],["T_STRING","Eav",93],["T_NS_SEPARATOR","\\",93],["T_STRING","Model",93],["T_NS_SEPARATOR","\\",93],["T_STRING","Config",93],["T_WHITESPACE"," ",93],["T_VARIABLE","$eavConfig",93],",",["T_WHITESPACE","\n        ",93],["T_NS_SEPARATOR","\\",94],["T_STRING","Magento",94],["T_NS_SEPARATOR","\\",94],["T_STRING","Catalog",94],["T_NS_SEPARATOR","\\",94],["T_STRING","Model",94],["T_NS_SEPARATOR","\\",94],["T_STRING","Product",94],["T_NS_SEPARATOR","\\",94],["T_STRING","Type",94],["T_WHITESPACE"," ",94],["T_VARIABLE","$catalogProductType",94],",",["T_WHITESPACE","\n        ",94],["T_NS_SEPARATOR","\\",95],["T_STRING","Magento",95],["T_NS_SEPARATOR","\\",95],["T_STRING","Framework",95],["T_NS_SEPARATOR","\\",95],["T_STRING","Event",95],["T_NS_SEPARATOR","\\",95],["T_STRING","ManagerInterface",95],["T_WHITESPACE"," ",95],["T_VARIABLE","$eventManager",95],",",["T_WHITESPACE","\n        ",95],["T_NS_SEPARATOR","\\",96],["T_STRING","Magento",96],["T_NS_SEPARATOR","\\",96],["T_STRING","MediaStorage",96],["T_NS_SEPARATOR","\\",96],["T_STRING","Helper",96],["T_NS_SEPARATOR","\\",96],["T_STRING","File",96],["T_NS_SEPARATOR","\\",96],["T_STRING","Storage",96],["T_NS_SEPARATOR","\\",96],["T_STRING","Database",96],["T_WHITESPACE"," ",96],["T_VARIABLE","$fileStorageDb",96],",",["T_WHITESPACE","\n        ",96],["T_NS_SEPARATOR","\\",97],["T_STRING","Magento",97],["T_NS_SEPARATOR","\\",97],["T_STRING","Framework",97],["T_NS_SEPARATOR","\\",97],["T_STRING","Filesystem",97],["T_WHITESPACE"," ",97],["T_VARIABLE","$filesystem",97],",",["T_WHITESPACE","\n        ",97],["T_NS_SEPARATOR","\\",98],["T_STRING","Magento",98],["T_NS_SEPARATOR","\\",98],["T_STRING","Framework",98],["T_NS_SEPARATOR","\\",98],["T_STRING","Registry",98],["T_WHITESPACE"," ",98],["T_VARIABLE","$coreRegistry",98],",",["T_WHITESPACE","\n        ",98],["T_NS_SEPARATOR","\\",99],["T_STRING","Psr",99],["T_NS_SEPARATOR","\\",99],["T_STRING","Log",99],["T_NS_SEPARATOR","\\",99],["T_STRING","LoggerInterface",99],["T_WHITESPACE"," ",99],["T_VARIABLE","$logger",99],",",["T_WHITESPACE","\n        ",99],["T_STRING","ProductRepositoryInterface",100],["T_WHITESPACE"," ",100],["T_VARIABLE","$productRepository",100],",",["T_WHITESPACE","\n        ",100],["T_NS_SEPARATOR","\\",101],["T_STRING","Magento",101],["T_NS_SEPARATOR","\\",101],["T_STRING","Downloadable",101],["T_NS_SEPARATOR","\\",101],["T_STRING","Model",101],["T_NS_SEPARATOR","\\",101],["T_STRING","ResourceModel",101],["T_NS_SEPARATOR","\\",101],["T_STRING","SampleFactory",101],["T_WHITESPACE"," ",101],["T_VARIABLE","$sampleResFactory",101],",",["T_WHITESPACE","\n        ",101],["T_NS_SEPARATOR","\\",102],["T_STRING","Magento",102],["T_NS_SEPARATOR","\\",102],["T_STRING","Downloadable",102],["T_NS_SEPARATOR","\\",102],["T_STRING","Model",102],["T_NS_SEPARATOR","\\",102],["T_STRING","ResourceModel",102],["T_NS_SEPARATOR","\\",102],["T_STRING","Link",102],["T_WHITESPACE"," ",102],["T_VARIABLE","$linkResource",102],",",["T_WHITESPACE","\n        ",102],["T_NS_SEPARATOR","\\",103],["T_STRING","Magento",103],["T_NS_SEPARATOR","\\",103],["T_STRING","Downloadable",103],["T_NS_SEPARATOR","\\",103],["T_STRING","Model",103],["T_NS_SEPARATOR","\\",103],["T_STRING","ResourceModel",103],["T_NS_SEPARATOR","\\",103],["T_STRING","Link",103],["T_NS_SEPARATOR","\\",103],["T_STRING","CollectionFactory",103],["T_WHITESPACE"," ",103],["T_VARIABLE","$linksFactory",103],",",["T_WHITESPACE","\n        ",103],["T_NS_SEPARATOR","\\",104],["T_STRING","Magento",104],["T_NS_SEPARATOR","\\",104],["T_STRING","Downloadable",104],["T_NS_SEPARATOR","\\",104],["T_STRING","Model",104],["T_NS_SEPARATOR","\\",104],["T_STRING","ResourceModel",104],["T_NS_SEPARATOR","\\",104],["T_STRING","Sample",104],["T_NS_SEPARATOR","\\",104],["T_STRING","CollectionFactory",104],["T_WHITESPACE"," ",104],["T_VARIABLE","$samplesFactory",104],",",["T_WHITESPACE","\n        ",104],["T_NS_SEPARATOR","\\",105],["T_STRING","Magento",105],["T_NS_SEPARATOR","\\",105],["T_STRING","Downloadable",105],["T_NS_SEPARATOR","\\",105],["T_STRING","Model",105],["T_NS_SEPARATOR","\\",105],["T_STRING","SampleFactory",105],["T_WHITESPACE"," ",105],["T_VARIABLE","$sampleFactory",105],",",["T_WHITESPACE","\n        ",105],["T_NS_SEPARATOR","\\",106],["T_STRING","Magento",106],["T_NS_SEPARATOR","\\",106],["T_STRING","Downloadable",106],["T_NS_SEPARATOR","\\",106],["T_STRING","Model",106],["T_NS_SEPARATOR","\\",106],["T_STRING","LinkFactory",106],["T_WHITESPACE"," ",106],["T_VARIABLE","$linkFactory",106],",",["T_WHITESPACE","\n        ",106],["T_NS_SEPARATOR","\\",107],["T_STRING","Magento",107],["T_NS_SEPARATOR","\\",107],["T_STRING","Downloadable",107],["T_NS_SEPARATOR","\\",107],["T_STRING","Model",107],["T_NS_SEPARATOR","\\",107],["T_STRING","Product",107],["T_NS_SEPARATOR","\\",107],["T_STRING","TypeHandler",107],["T_NS_SEPARATOR","\\",107],["T_STRING","TypeHandlerInterface",107],["T_WHITESPACE"," ",107],["T_VARIABLE","$typeHandler",107],",",["T_WHITESPACE","\n        ",107],["T_STRING","JoinProcessorInterface",108],["T_WHITESPACE"," ",108],["T_VARIABLE","$extensionAttributesJoinProcessor",108],",",["T_WHITESPACE","\n        ",108],["T_NS_SEPARATOR","\\",109],["T_STRING","Magento",109],["T_NS_SEPARATOR","\\",109],["T_STRING","Framework",109],["T_NS_SEPARATOR","\\",109],["T_STRING","Serialize",109],["T_NS_SEPARATOR","\\",109],["T_STRING","Serializer",109],["T_NS_SEPARATOR","\\",109],["T_STRING","Json",109],["T_WHITESPACE"," ",109],["T_VARIABLE","$serializer",109],["T_WHITESPACE"," ",109],"=",["T_WHITESPACE"," ",109],["T_STRING","null",109],["T_WHITESPACE","\n    ",109],")",["T_WHITESPACE"," ",110],"{",["T_WHITESPACE","\n        ",110],["T_VARIABLE","$this",111],["T_OBJECT_OPERATOR","->",111],["T_STRING","_sampleResFactory",111],["T_WHITESPACE"," ",111],"=",["T_WHITESPACE"," ",111],["T_VARIABLE","$sampleResFactory",111],";",["T_WHITESPACE","\n        ",111],["T_VARIABLE","$this",112],["T_OBJECT_OPERATOR","->",112],["T_STRING","_linkResource",112],["T_WHITESPACE"," ",112],"=",["T_WHITESPACE"," ",112],["T_VARIABLE","$linkResource",112],";",["T_WHITESPACE","\n        ",112],["T_VARIABLE","$this",113],["T_OBJECT_OPERATOR","->",113],["T_STRING","_linksFactory",113],["T_WHITESPACE"," ",113],"=",["T_WHITESPACE"," ",113],["T_VARIABLE","$linksFactory",113],";",["T_WHITESPACE","\n        ",113],["T_VARIABLE","$this",114],["T_OBJECT_OPERATOR","->",114],["T_STRING","_samplesFactory",114],["T_WHITESPACE"," ",114],"=",["T_WHITESPACE"," ",114],["T_VARIABLE","$samplesFactory",114],";",["T_WHITESPACE","\n        ",114],["T_VARIABLE","$this",115],["T_OBJECT_OPERATOR","->",115],["T_STRING","_sampleFactory",115],["T_WHITESPACE"," ",115],"=",["T_WHITESPACE"," ",115],["T_VARIABLE","$sampleFactory",115],";",["T_WHITESPACE","\n        ",115],["T_VARIABLE","$this",116],["T_OBJECT_OPERATOR","->",116],["T_STRING","_linkFactory",116],["T_WHITESPACE"," ",116],"=",["T_WHITESPACE"," ",116],["T_VARIABLE","$linkFactory",116],";",["T_WHITESPACE","\n        ",116],["T_VARIABLE","$this",117],["T_OBJECT_OPERATOR","->",117],["T_STRING","typeHandler",117],["T_WHITESPACE"," ",117],"=",["T_WHITESPACE"," ",117],["T_VARIABLE","$typeHandler",117],";",["T_WHITESPACE","\n        ",117],["T_VARIABLE","$this",118],["T_OBJECT_OPERATOR","->",118],["T_STRING","extensionAttributesJoinProcessor",118],["T_WHITESPACE"," ",118],"=",["T_WHITESPACE"," ",118],["T_VARIABLE","$extensionAttributesJoinProcessor",118],";",["T_WHITESPACE","\n        ",118],["T_STRING","parent",119],["T_DOUBLE_COLON","::",119],["T_STRING","__construct",119],"(",["T_WHITESPACE","\n            ",119],["T_VARIABLE","$catalogProductOption",120],",",["T_WHITESPACE","\n            ",120],["T_VARIABLE","$eavConfig",121],",",["T_WHITESPACE","\n            ",121],["T_VARIABLE","$catalogProductType",122],",",["T_WHITESPACE","\n            ",122],["T_VARIABLE","$eventManager",123],",",["T_WHITESPACE","\n            ",123],["T_VARIABLE","$fileStorageDb",124],",",["T_WHITESPACE","\n            ",124],["T_VARIABLE","$filesystem",125],",",["T_WHITESPACE","\n            ",125],["T_VARIABLE","$coreRegistry",126],",",["T_WHITESPACE","\n            ",126],["T_VARIABLE","$logger",127],",",["T_WHITESPACE","\n            ",127],["T_VARIABLE","$productRepository",128],",",["T_WHITESPACE","\n            ",128],["T_VARIABLE","$serializer",129],["T_WHITESPACE","\n        ",129],")",";",["T_WHITESPACE","\n    ",130],"}",["T_WHITESPACE","\n\n    ",131],["T_DOC_COMMENT","\/**\n     * Get downloadable product links\n     *\n     * @param \\Magento\\Catalog\\Model\\Product $product\n     * @return \\Magento\\Downloadable\\Model\\Link[]\n     *\/",133],["T_WHITESPACE","\n    ",138],["T_PUBLIC","public",139],["T_WHITESPACE"," ",139],["T_FUNCTION","function",139],["T_WHITESPACE"," ",139],["T_STRING","getLinks",139],"(",["T_VARIABLE","$product",139],")",["T_WHITESPACE","\n    ",139],"{",["T_WHITESPACE","\n        ",140],["T_IF","if",141],["T_WHITESPACE"," ",141],"(",["T_VARIABLE","$product",141],["T_OBJECT_OPERATOR","->",141],["T_STRING","getDownloadableLinks",141],"(",")",["T_WHITESPACE"," ",141],["T_IS_IDENTICAL","===",141],["T_WHITESPACE"," ",141],["T_STRING","null",141],")",["T_WHITESPACE"," ",141],"{",["T_WHITESPACE","\n            ",141],["T_DOC_COMMENT","\/** @var \\Magento\\Downloadable\\Model\\ResourceModel\\Link\\Collection $linkCollection *\/",142],["T_WHITESPACE","\n            ",142],["T_VARIABLE","$linkCollection",143],["T_WHITESPACE"," ",143],"=",["T_WHITESPACE"," ",143],["T_VARIABLE","$this",143],["T_OBJECT_OPERATOR","->",143],["T_STRING","_linksFactory",143],["T_OBJECT_OPERATOR","->",143],["T_STRING","create",143],"(",")",["T_OBJECT_OPERATOR","->",143],["T_STRING","addProductToFilter",143],"(",["T_WHITESPACE","\n                ",143],["T_VARIABLE","$product",144],["T_OBJECT_OPERATOR","->",144],["T_STRING","getEntityId",144],"(",")",["T_WHITESPACE","\n            ",144],")",["T_OBJECT_OPERATOR","->",145],["T_STRING","addTitleToResult",145],"(",["T_WHITESPACE","\n                ",145],["T_VARIABLE","$product",146],["T_OBJECT_OPERATOR","->",146],["T_STRING","getStoreId",146],"(",")",["T_WHITESPACE","\n            ",146],")",["T_OBJECT_OPERATOR","->",147],["T_STRING","addPriceToResult",147],"(",["T_WHITESPACE","\n                ",147],["T_VARIABLE","$product",148],["T_OBJECT_OPERATOR","->",148],["T_STRING","getStore",148],"(",")",["T_OBJECT_OPERATOR","->",148],["T_STRING","getWebsiteId",148],"(",")",["T_WHITESPACE","\n            ",148],")",";",["T_WHITESPACE","\n            ",149],["T_VARIABLE","$this",150],["T_OBJECT_OPERATOR","->",150],["T_STRING","extensionAttributesJoinProcessor",150],["T_OBJECT_OPERATOR","->",150],["T_STRING","process",150],"(",["T_VARIABLE","$linkCollection",150],")",";",["T_WHITESPACE","\n            ",150],["T_VARIABLE","$linksCollectionById",151],["T_WHITESPACE"," ",151],"=",["T_WHITESPACE"," ",151],"[","]",";",["T_WHITESPACE","\n            ",151],["T_FOREACH","foreach",152],["T_WHITESPACE"," ",152],"(",["T_VARIABLE","$linkCollection",152],["T_WHITESPACE"," ",152],["T_AS","as",152],["T_WHITESPACE"," ",152],["T_VARIABLE","$link",152],")",["T_WHITESPACE"," ",152],"{",["T_WHITESPACE","\n                ",152],["T_COMMENT","\/* @var \\Magento\\Downloadable\\Model\\Link $link *\/",153],["T_WHITESPACE","\n                ",153],["T_VARIABLE","$link",154],["T_OBJECT_OPERATOR","->",154],["T_STRING","setProduct",154],"(",["T_VARIABLE","$product",154],")",";",["T_WHITESPACE","\n                ",154],["T_VARIABLE","$linksCollectionById",155],"[",["T_VARIABLE","$link",155],["T_OBJECT_OPERATOR","->",155],["T_STRING","getId",155],"(",")","]",["T_WHITESPACE"," ",155],"=",["T_WHITESPACE"," ",155],["T_VARIABLE","$link",155],";",["T_WHITESPACE","\n            ",155],"}",["T_WHITESPACE","\n            ",156],["T_VARIABLE","$product",157],["T_OBJECT_OPERATOR","->",157],["T_STRING","setDownloadableLinks",157],"(",["T_VARIABLE","$linksCollectionById",157],")",";",["T_WHITESPACE","\n        ",157],"}",["T_WHITESPACE","\n        ",158],["T_RETURN","return",159],["T_WHITESPACE"," ",159],["T_VARIABLE","$product",159],["T_OBJECT_OPERATOR","->",159],["T_STRING","getDownloadableLinks",159],"(",")",";",["T_WHITESPACE","\n    ",159],"}",["T_WHITESPACE","\n\n    ",160],["T_DOC_COMMENT","\/**\n     * Check if product has links\n     *\n     * @param \\Magento\\Catalog\\Model\\Product $product\n     * @return boolean\n     *\/",162],["T_WHITESPACE","\n    ",167],["T_PUBLIC","public",168],["T_WHITESPACE"," ",168],["T_FUNCTION","function",168],["T_WHITESPACE"," ",168],["T_STRING","hasLinks",168],"(",["T_VARIABLE","$product",168],")",["T_WHITESPACE","\n    ",168],"{",["T_WHITESPACE","\n        ",169],["T_VARIABLE","$hasLinks",170],["T_WHITESPACE"," ",170],"=",["T_WHITESPACE"," ",170],["T_VARIABLE","$product",170],["T_OBJECT_OPERATOR","->",170],["T_STRING","getData",170],"(",["T_CONSTANT_ENCAPSED_STRING","'links_exist'",170],")",";",["T_WHITESPACE","\n        ",170],["T_IF","if",171],["T_WHITESPACE"," ",171],"(",["T_STRING","null",171],["T_WHITESPACE"," ",171],["T_IS_IDENTICAL","===",171],["T_WHITESPACE"," ",171],["T_VARIABLE","$hasLinks",171],")",["T_WHITESPACE"," ",171],"{",["T_WHITESPACE","\n            ",171],["T_VARIABLE","$hasLinks",172],["T_WHITESPACE"," ",172],"=",["T_WHITESPACE"," ",172],"(",["T_STRING","count",172],"(",["T_VARIABLE","$this",172],["T_OBJECT_OPERATOR","->",172],["T_STRING","getLinks",172],"(",["T_VARIABLE","$product",172],")",")",["T_WHITESPACE"," ",172],">",["T_WHITESPACE"," ",172],["T_LNUMBER","0",172],")",";",["T_WHITESPACE","\n        ",172],"}",["T_WHITESPACE","\n        ",173],["T_RETURN","return",174],["T_WHITESPACE"," ",174],["T_VARIABLE","$hasLinks",174],";",["T_WHITESPACE","\n    ",174],"}",["T_WHITESPACE","\n\n    ",175],["T_DOC_COMMENT","\/**\n     * Check if product has options\n     *\n     * @param \\Magento\\Catalog\\Model\\Product $product\n     * @return boolean\n     *\/",177],["T_WHITESPACE","\n    ",182],["T_PUBLIC","public",183],["T_WHITESPACE"," ",183],["T_FUNCTION","function",183],["T_WHITESPACE"," ",183],["T_STRING","hasOptions",183],"(",["T_VARIABLE","$product",183],")",["T_WHITESPACE","\n    ",183],"{",["T_WHITESPACE","\n        ",184],["T_RETURN","return",185],["T_WHITESPACE"," ",185],["T_STRING","parent",185],["T_DOUBLE_COLON","::",185],["T_STRING","hasOptions",185],"(",["T_VARIABLE","$product",185],")",["T_WHITESPACE"," ",185],["T_BOOLEAN_OR","||",185],["T_WHITESPACE"," ",185],["T_VARIABLE","$this",185],["T_OBJECT_OPERATOR","->",185],["T_STRING","hasLinks",185],"(",["T_VARIABLE","$product",185],")",";",["T_WHITESPACE","\n    ",185],"}",["T_WHITESPACE","\n\n    ",186],["T_DOC_COMMENT","\/**\n     * Check if product has required options\n     *\n     * @param \\Magento\\Catalog\\Model\\Product $product\n     * @return bool\n     *\/",188],["T_WHITESPACE","\n    ",193],["T_PUBLIC","public",194],["T_WHITESPACE"," ",194],["T_FUNCTION","function",194],["T_WHITESPACE"," ",194],["T_STRING","hasRequiredOptions",194],"(",["T_VARIABLE","$product",194],")",["T_WHITESPACE","\n    ",194],"{",["T_WHITESPACE","\n        ",195],["T_RETURN","return",196],["T_WHITESPACE"," ",196],"(",["T_STRING","parent",196],["T_DOUBLE_COLON","::",196],["T_STRING","hasRequiredOptions",196],"(",["T_VARIABLE","$product",196],")",["T_WHITESPACE"," ",196],["T_BOOLEAN_OR","||",196],["T_WHITESPACE"," ",196],["T_VARIABLE","$product",196],["T_OBJECT_OPERATOR","->",196],["T_STRING","getLinksPurchasedSeparately",196],"(",")",")",";",["T_WHITESPACE","\n    ",196],"}",["T_WHITESPACE","\n\n    ",197],["T_DOC_COMMENT","\/**\n     * Check if product cannot be purchased with no links selected\n     *\n     * @param \\Magento\\Catalog\\Model\\Product $product\n     * @return boolean\n     * @SuppressWarnings(PHPMD.BooleanGetMethodName)\n     *\/",199],["T_WHITESPACE","\n    ",205],["T_PUBLIC","public",206],["T_WHITESPACE"," ",206],["T_FUNCTION","function",206],["T_WHITESPACE"," ",206],["T_STRING","getLinkSelectionRequired",206],"(",["T_VARIABLE","$product",206],")",["T_WHITESPACE","\n    ",206],"{",["T_WHITESPACE","\n        ",207],["T_RETURN","return",208],["T_WHITESPACE"," ",208],["T_VARIABLE","$product",208],["T_OBJECT_OPERATOR","->",208],["T_STRING","getLinksPurchasedSeparately",208],"(",")",";",["T_WHITESPACE","\n    ",208],"}",["T_WHITESPACE","\n\n    ",209],["T_DOC_COMMENT","\/**\n     * Get downloadable product samples\n     *\n     * @param \\Magento\\Catalog\\Model\\Product $product\n     * @return \\Magento\\Downloadable\\Model\\ResourceModel\\Sample\\Collection\n     *\/",211],["T_WHITESPACE","\n    ",216],["T_PUBLIC","public",217],["T_WHITESPACE"," ",217],["T_FUNCTION","function",217],["T_WHITESPACE"," ",217],["T_STRING","getSamples",217],"(",["T_VARIABLE","$product",217],")",["T_WHITESPACE","\n    ",217],"{",["T_WHITESPACE","\n        ",218],["T_IF","if",219],["T_WHITESPACE"," ",219],"(",["T_VARIABLE","$product",219],["T_OBJECT_OPERATOR","->",219],["T_STRING","getDownloadableSamples",219],"(",")",["T_WHITESPACE"," ",219],["T_IS_IDENTICAL","===",219],["T_WHITESPACE"," ",219],["T_STRING","null",219],")",["T_WHITESPACE"," ",219],"{",["T_WHITESPACE","\n            ",219],["T_VARIABLE","$sampleCollection",220],["T_WHITESPACE"," ",220],"=",["T_WHITESPACE"," ",220],["T_VARIABLE","$this",220],["T_OBJECT_OPERATOR","->",220],["T_STRING","_samplesFactory",220],["T_OBJECT_OPERATOR","->",220],["T_STRING","create",220],"(",")",["T_OBJECT_OPERATOR","->",220],["T_STRING","addProductToFilter",220],"(",["T_WHITESPACE","\n                ",220],["T_VARIABLE","$product",221],["T_OBJECT_OPERATOR","->",221],["T_STRING","getEntityId",221],"(",")",["T_WHITESPACE","\n            ",221],")",["T_OBJECT_OPERATOR","->",222],["T_STRING","addTitleToResult",222],"(",["T_WHITESPACE","\n                ",222],["T_VARIABLE","$product",223],["T_OBJECT_OPERATOR","->",223],["T_STRING","getStoreId",223],"(",")",["T_WHITESPACE","\n            ",223],")",";",["T_WHITESPACE","\n            ",224],["T_VARIABLE","$this",225],["T_OBJECT_OPERATOR","->",225],["T_STRING","extensionAttributesJoinProcessor",225],["T_OBJECT_OPERATOR","->",225],["T_STRING","process",225],"(",["T_VARIABLE","$sampleCollection",225],")",";",["T_WHITESPACE","\n            ",225],["T_VARIABLE","$product",226],["T_OBJECT_OPERATOR","->",226],["T_STRING","setDownloadableSamples",226],"(",["T_VARIABLE","$sampleCollection",226],")",";",["T_WHITESPACE","\n        ",226],"}",["T_WHITESPACE","\n\n        ",227],["T_RETURN","return",229],["T_WHITESPACE"," ",229],["T_VARIABLE","$product",229],["T_OBJECT_OPERATOR","->",229],["T_STRING","getDownloadableSamples",229],"(",")",";",["T_WHITESPACE","\n    ",229],"}",["T_WHITESPACE","\n\n    ",230],["T_DOC_COMMENT","\/**\n     * Check if product has samples\n     *\n     * @param \\Magento\\Catalog\\Model\\Product $product\n     * @return boolean\n     *\/",232],["T_WHITESPACE","\n    ",237],["T_PUBLIC","public",238],["T_WHITESPACE"," ",238],["T_FUNCTION","function",238],["T_WHITESPACE"," ",238],["T_STRING","hasSamples",238],"(",["T_VARIABLE","$product",238],")",["T_WHITESPACE","\n    ",238],"{",["T_WHITESPACE","\n        ",239],["T_RETURN","return",240],["T_WHITESPACE"," ",240],["T_STRING","count",240],"(",["T_VARIABLE","$this",240],["T_OBJECT_OPERATOR","->",240],["T_STRING","getSamples",240],"(",["T_VARIABLE","$product",240],")",")",["T_WHITESPACE"," ",240],">",["T_WHITESPACE"," ",240],["T_LNUMBER","0",240],";",["T_WHITESPACE","\n    ",240],"}",["T_WHITESPACE","\n\n    ",241],["T_DOC_COMMENT","\/**\n     * Check if product can be bought\n     *\n     * @param \\Magento\\Catalog\\Model\\Product $product\n     * @return $this\n     * @throws \\Magento\\Framework\\Exception\\LocalizedException\n     *\/",243],["T_WHITESPACE","\n    ",249],["T_PUBLIC","public",250],["T_WHITESPACE"," ",250],["T_FUNCTION","function",250],["T_WHITESPACE"," ",250],["T_STRING","checkProductBuyState",250],"(",["T_VARIABLE","$product",250],")",["T_WHITESPACE","\n    ",250],"{",["T_WHITESPACE","\n        ",251],["T_STRING","parent",252],["T_DOUBLE_COLON","::",252],["T_STRING","checkProductBuyState",252],"(",["T_VARIABLE","$product",252],")",";",["T_WHITESPACE","\n        ",252],["T_VARIABLE","$option",253],["T_WHITESPACE"," ",253],"=",["T_WHITESPACE"," ",253],["T_VARIABLE","$product",253],["T_OBJECT_OPERATOR","->",253],["T_STRING","getCustomOption",253],"(",["T_CONSTANT_ENCAPSED_STRING","'info_buyRequest'",253],")",";",["T_WHITESPACE","\n        ",253],["T_IF","if",254],["T_WHITESPACE"," ",254],"(",["T_VARIABLE","$option",254],["T_WHITESPACE"," ",254],["T_INSTANCEOF","instanceof",254],["T_WHITESPACE"," ",254],["T_NS_SEPARATOR","\\",254],["T_STRING","Magento",254],["T_NS_SEPARATOR","\\",254],["T_STRING","Quote",254],["T_NS_SEPARATOR","\\",254],["T_STRING","Model",254],["T_NS_SEPARATOR","\\",254],["T_STRING","Quote",254],["T_NS_SEPARATOR","\\",254],["T_STRING","Item",254],["T_NS_SEPARATOR","\\",254],["T_STRING","Option",254],")",["T_WHITESPACE"," ",254],"{",["T_WHITESPACE","\n            ",254],["T_VARIABLE","$buyRequest",255],["T_WHITESPACE"," ",255],"=",["T_WHITESPACE"," ",255],["T_NEW","new",255],["T_WHITESPACE"," ",255],["T_NS_SEPARATOR","\\",255],["T_STRING","Magento",255],["T_NS_SEPARATOR","\\",255],["T_STRING","Framework",255],["T_NS_SEPARATOR","\\",255],["T_STRING","DataObject",255],"(",["T_VARIABLE","$this",255],["T_OBJECT_OPERATOR","->",255],["T_STRING","serializer",255],["T_OBJECT_OPERATOR","->",255],["T_STRING","unserialize",255],"(",["T_VARIABLE","$option",255],["T_OBJECT_OPERATOR","->",255],["T_STRING","getValue",255],"(",")",")",")",";",["T_WHITESPACE","\n            ",255],["T_IF","if",256],["T_WHITESPACE"," ",256],"(","!",["T_VARIABLE","$buyRequest",256],["T_OBJECT_OPERATOR","->",256],["T_STRING","hasLinks",256],"(",")",")",["T_WHITESPACE"," ",256],"{",["T_WHITESPACE","\n                ",256],["T_IF","if",257],["T_WHITESPACE"," ",257],"(","!",["T_VARIABLE","$product",257],["T_OBJECT_OPERATOR","->",257],["T_STRING","getLinksPurchasedSeparately",257],"(",")",")",["T_WHITESPACE"," ",257],"{",["T_WHITESPACE","\n                    ",257],["T_VARIABLE","$allLinksIds",258],["T_WHITESPACE"," ",258],"=",["T_WHITESPACE"," ",258],["T_VARIABLE","$this",258],["T_OBJECT_OPERATOR","->",258],["T_STRING","_linksFactory",258],["T_OBJECT_OPERATOR","->",258],["T_STRING","create",258],"(",")",["T_OBJECT_OPERATOR","->",258],["T_STRING","addProductToFilter",258],"(",["T_WHITESPACE","\n                        ",258],["T_VARIABLE","$product",259],["T_OBJECT_OPERATOR","->",259],["T_STRING","getEntityId",259],"(",")",["T_WHITESPACE","\n                    ",259],")",["T_OBJECT_OPERATOR","->",260],["T_STRING","getAllIds",260],"(",")",";",["T_WHITESPACE","\n                    ",260],["T_VARIABLE","$buyRequest",261],["T_OBJECT_OPERATOR","->",261],["T_STRING","setLinks",261],"(",["T_VARIABLE","$allLinksIds",261],")",";",["T_WHITESPACE","\n                    ",261],["T_VARIABLE","$product",262],["T_OBJECT_OPERATOR","->",262],["T_STRING","addCustomOption",262],"(",["T_WHITESPACE","\n                        ",262],["T_CONSTANT_ENCAPSED_STRING","'info_buyRequest'",263],",",["T_WHITESPACE","\n                        ",263],["T_VARIABLE","$this",264],["T_OBJECT_OPERATOR","->",264],["T_STRING","serializer",264],["T_OBJECT_OPERATOR","->",264],["T_STRING","serialize",264],"(",["T_VARIABLE","$buyRequest",264],["T_OBJECT_OPERATOR","->",264],["T_STRING","getData",264],"(",")",")",["T_WHITESPACE","\n                    ",264],")",";",["T_WHITESPACE","\n                ",265],"}",["T_WHITESPACE"," ",266],["T_ELSE","else",266],["T_WHITESPACE"," ",266],"{",["T_WHITESPACE","\n                    ",266],["T_THROW","throw",267],["T_WHITESPACE"," ",267],["T_NEW","new",267],["T_WHITESPACE"," ",267],["T_NS_SEPARATOR","\\",267],["T_STRING","Magento",267],["T_NS_SEPARATOR","\\",267],["T_STRING","Framework",267],["T_NS_SEPARATOR","\\",267],["T_STRING","Exception",267],["T_NS_SEPARATOR","\\",267],["T_STRING","LocalizedException",267],"(",["T_STRING","__",267],"(",["T_CONSTANT_ENCAPSED_STRING","'Please specify product link(s).'",267],")",")",";",["T_WHITESPACE","\n                ",267],"}",["T_WHITESPACE","\n            ",268],"}",["T_WHITESPACE","\n        ",269],"}",["T_WHITESPACE","\n        ",270],["T_RETURN","return",271],["T_WHITESPACE"," ",271],["T_VARIABLE","$this",271],";",["T_WHITESPACE","\n    ",271],"}",["T_WHITESPACE","\n\n    ",272],["T_DOC_COMMENT","\/**\n     * Prepare additional options\/information for order item which will be\n     * created from this product\n     *\n     * @param \\Magento\\Catalog\\Model\\Product $product\n     * @return array\n     *\/",274],["T_WHITESPACE","\n    ",280],["T_PUBLIC","public",281],["T_WHITESPACE"," ",281],["T_FUNCTION","function",281],["T_WHITESPACE"," ",281],["T_STRING","getOrderOptions",281],"(",["T_VARIABLE","$product",281],")",["T_WHITESPACE","\n    ",281],"{",["T_WHITESPACE","\n        ",282],["T_VARIABLE","$options",283],["T_WHITESPACE"," ",283],"=",["T_WHITESPACE"," ",283],["T_STRING","parent",283],["T_DOUBLE_COLON","::",283],["T_STRING","getOrderOptions",283],"(",["T_VARIABLE","$product",283],")",";",["T_WHITESPACE","\n        ",283],["T_IF","if",284],["T_WHITESPACE"," ",284],"(",["T_VARIABLE","$linkIds",284],["T_WHITESPACE"," ",284],"=",["T_WHITESPACE"," ",284],["T_VARIABLE","$product",284],["T_OBJECT_OPERATOR","->",284],["T_STRING","getCustomOption",284],"(",["T_CONSTANT_ENCAPSED_STRING","'downloadable_link_ids'",284],")",")",["T_WHITESPACE"," ",284],"{",["T_WHITESPACE","\n            ",284],["T_VARIABLE","$linkOptions",285],["T_WHITESPACE"," ",285],"=",["T_WHITESPACE"," ",285],"[","]",";",["T_WHITESPACE","\n            ",285],["T_VARIABLE","$links",286],["T_WHITESPACE"," ",286],"=",["T_WHITESPACE"," ",286],["T_VARIABLE","$this",286],["T_OBJECT_OPERATOR","->",286],["T_STRING","getLinks",286],"(",["T_VARIABLE","$product",286],")",";",["T_WHITESPACE","\n            ",286],["T_FOREACH","foreach",287],["T_WHITESPACE"," ",287],"(",["T_STRING","explode",287],"(",["T_CONSTANT_ENCAPSED_STRING","','",287],",",["T_WHITESPACE"," ",287],["T_VARIABLE","$linkIds",287],["T_OBJECT_OPERATOR","->",287],["T_STRING","getValue",287],"(",")",")",["T_WHITESPACE"," ",287],["T_AS","as",287],["T_WHITESPACE"," ",287],["T_VARIABLE","$linkId",287],")",["T_WHITESPACE"," ",287],"{",["T_WHITESPACE","\n                ",287],["T_IF","if",288],["T_WHITESPACE"," ",288],"(",["T_ISSET","isset",288],"(",["T_VARIABLE","$links",288],"[",["T_VARIABLE","$linkId",288],"]",")",")",["T_WHITESPACE"," ",288],"{",["T_WHITESPACE","\n                    ",288],["T_VARIABLE","$linkOptions",289],"[","]",["T_WHITESPACE"," ",289],"=",["T_WHITESPACE"," ",289],["T_VARIABLE","$linkId",289],";",["T_WHITESPACE","\n                ",289],"}",["T_WHITESPACE","\n            ",290],"}",["T_WHITESPACE","\n            ",291],["T_VARIABLE","$options",292],["T_WHITESPACE"," ",292],"=",["T_WHITESPACE"," ",292],["T_STRING","array_merge",292],"(",["T_VARIABLE","$options",292],",",["T_WHITESPACE"," ",292],"[",["T_CONSTANT_ENCAPSED_STRING","'links'",292],["T_WHITESPACE"," ",292],["T_DOUBLE_ARROW","=>",292],["T_WHITESPACE"," ",292],["T_VARIABLE","$linkOptions",292],"]",")",";",["T_WHITESPACE","\n        ",292],"}",["T_WHITESPACE","\n        ",293],["T_VARIABLE","$options",294],["T_WHITESPACE"," ",294],"=",["T_WHITESPACE"," ",294],["T_STRING","array_merge",294],"(",["T_WHITESPACE","\n            ",294],["T_VARIABLE","$options",295],",",["T_WHITESPACE","\n            ",295],"[",["T_CONSTANT_ENCAPSED_STRING","'is_downloadable'",296],["T_WHITESPACE"," ",296],["T_DOUBLE_ARROW","=>",296],["T_WHITESPACE"," ",296],["T_STRING","true",296],",",["T_WHITESPACE"," ",296],["T_CONSTANT_ENCAPSED_STRING","'real_product_type'",296],["T_WHITESPACE"," ",296],["T_DOUBLE_ARROW","=>",296],["T_WHITESPACE"," ",296],["T_STRING","self",296],["T_DOUBLE_COLON","::",296],["T_STRING","TYPE_DOWNLOADABLE",296],"]",["T_WHITESPACE","\n        ",296],")",";",["T_WHITESPACE","\n        ",297],["T_RETURN","return",298],["T_WHITESPACE"," ",298],["T_VARIABLE","$options",298],";",["T_WHITESPACE","\n    ",298],"}",["T_WHITESPACE","\n\n    ",299],["T_DOC_COMMENT","\/**\n     * Retrieve additional searchable data from type instance\n     * Using based on product id and store_id data\n     *\n     * @param \\Magento\\Catalog\\Model\\Product $product\n     * @return array\n     *\/",301],["T_WHITESPACE","\n    ",307],["T_PUBLIC","public",308],["T_WHITESPACE"," ",308],["T_FUNCTION","function",308],["T_WHITESPACE"," ",308],["T_STRING","getSearchableData",308],"(",["T_VARIABLE","$product",308],")",["T_WHITESPACE","\n    ",308],"{",["T_WHITESPACE","\n        ",309],["T_VARIABLE","$searchData",310],["T_WHITESPACE"," ",310],"=",["T_WHITESPACE"," ",310],["T_STRING","parent",310],["T_DOUBLE_COLON","::",310],["T_STRING","getSearchableData",310],"(",["T_VARIABLE","$product",310],")",";",["T_WHITESPACE","\n\n        ",310],["T_VARIABLE","$linkSearchData",312],["T_WHITESPACE"," ",312],"=",["T_WHITESPACE"," ",312],["T_VARIABLE","$this",312],["T_OBJECT_OPERATOR","->",312],["T_STRING","_createLink",312],"(",")",["T_OBJECT_OPERATOR","->",312],["T_STRING","getSearchableData",312],"(",["T_VARIABLE","$product",312],["T_OBJECT_OPERATOR","->",312],["T_STRING","getEntityId",312],"(",")",",",["T_WHITESPACE"," ",312],["T_VARIABLE","$product",312],["T_OBJECT_OPERATOR","->",312],["T_STRING","getStoreId",312],"(",")",")",";",["T_WHITESPACE","\n        ",312],["T_IF","if",313],["T_WHITESPACE"," ",313],"(",["T_VARIABLE","$linkSearchData",313],")",["T_WHITESPACE"," ",313],"{",["T_WHITESPACE","\n            ",313],["T_VARIABLE","$searchData",314],["T_WHITESPACE"," ",314],"=",["T_WHITESPACE"," ",314],["T_STRING","array_merge",314],"(",["T_VARIABLE","$searchData",314],",",["T_WHITESPACE"," ",314],["T_VARIABLE","$linkSearchData",314],")",";",["T_WHITESPACE","\n        ",314],"}",["T_WHITESPACE","\n\n        ",315],["T_VARIABLE","$sampleSearchData",317],["T_WHITESPACE"," ",317],"=",["T_WHITESPACE"," ",317],["T_VARIABLE","$this",317],["T_OBJECT_OPERATOR","->",317],["T_STRING","_createSample",317],"(",")",["T_OBJECT_OPERATOR","->",317],["T_STRING","getSearchableData",317],"(",["T_VARIABLE","$product",317],["T_OBJECT_OPERATOR","->",317],["T_STRING","getEntityId",317],"(",")",",",["T_WHITESPACE"," ",317],["T_VARIABLE","$product",317],["T_OBJECT_OPERATOR","->",317],["T_STRING","getStoreId",317],"(",")",")",";",["T_WHITESPACE","\n        ",317],["T_IF","if",318],["T_WHITESPACE"," ",318],"(",["T_VARIABLE","$sampleSearchData",318],")",["T_WHITESPACE"," ",318],"{",["T_WHITESPACE","\n            ",318],["T_VARIABLE","$searchData",319],["T_WHITESPACE"," ",319],"=",["T_WHITESPACE"," ",319],["T_STRING","array_merge",319],"(",["T_VARIABLE","$searchData",319],",",["T_WHITESPACE"," ",319],["T_VARIABLE","$sampleSearchData",319],")",";",["T_WHITESPACE","\n        ",319],"}",["T_WHITESPACE","\n\n        ",320],["T_RETURN","return",322],["T_WHITESPACE"," ",322],["T_VARIABLE","$searchData",322],";",["T_WHITESPACE","\n    ",322],"}",["T_WHITESPACE","\n\n    ",323],["T_DOC_COMMENT","\/**\n     * Check is product available for sale\n     *\n     * @param \\Magento\\Catalog\\Model\\Product $product\n     * @return bool\n     *\/",325],["T_WHITESPACE","\n    ",330],["T_PUBLIC","public",331],["T_WHITESPACE"," ",331],["T_FUNCTION","function",331],["T_WHITESPACE"," ",331],["T_STRING","isSalable",331],"(",["T_VARIABLE","$product",331],")",["T_WHITESPACE","\n    ",331],"{",["T_WHITESPACE","\n        ",332],["T_RETURN","return",333],["T_WHITESPACE"," ",333],["T_VARIABLE","$this",333],["T_OBJECT_OPERATOR","->",333],["T_STRING","hasLinks",333],"(",["T_VARIABLE","$product",333],")",["T_WHITESPACE"," ",333],["T_BOOLEAN_AND","&&",333],["T_WHITESPACE"," ",333],["T_STRING","parent",333],["T_DOUBLE_COLON","::",333],["T_STRING","isSalable",333],"(",["T_VARIABLE","$product",333],")",";",["T_WHITESPACE","\n    ",333],"}",["T_WHITESPACE","\n\n    ",334],["T_DOC_COMMENT","\/**\n     * Prepare selected options for downloadable product\n     *\n     * @param  \\Magento\\Catalog\\Model\\Product $product\n     * @param  \\Magento\\Framework\\DataObject $buyRequest\n     * @return array\n     * @SuppressWarnings(PHPMD.UnusedFormalParameter)\n     *\/",336],["T_WHITESPACE","\n    ",343],["T_PUBLIC","public",344],["T_WHITESPACE"," ",344],["T_FUNCTION","function",344],["T_WHITESPACE"," ",344],["T_STRING","processBuyRequest",344],"(",["T_VARIABLE","$product",344],",",["T_WHITESPACE"," ",344],["T_VARIABLE","$buyRequest",344],")",["T_WHITESPACE","\n    ",344],"{",["T_WHITESPACE","\n        ",345],["T_VARIABLE","$links",346],["T_WHITESPACE"," ",346],"=",["T_WHITESPACE"," ",346],["T_VARIABLE","$buyRequest",346],["T_OBJECT_OPERATOR","->",346],["T_STRING","getLinks",346],"(",")",";",["T_WHITESPACE","\n        ",346],["T_VARIABLE","$links",347],["T_WHITESPACE"," ",347],"=",["T_WHITESPACE"," ",347],["T_STRING","is_array",347],"(",["T_VARIABLE","$links",347],")",["T_WHITESPACE"," ",347],"?",["T_WHITESPACE"," ",347],["T_STRING","array_filter",347],"(",["T_VARIABLE","$links",347],",",["T_WHITESPACE"," ",347],["T_CONSTANT_ENCAPSED_STRING","'intval'",347],")",["T_WHITESPACE"," ",347],":",["T_WHITESPACE"," ",347],"[","]",";",["T_WHITESPACE","\n\n        ",347],["T_VARIABLE","$options",349],["T_WHITESPACE"," ",349],"=",["T_WHITESPACE"," ",349],"[",["T_CONSTANT_ENCAPSED_STRING","'links'",349],["T_WHITESPACE"," ",349],["T_DOUBLE_ARROW","=>",349],["T_WHITESPACE"," ",349],["T_VARIABLE","$links",349],"]",";",["T_WHITESPACE","\n\n        ",349],["T_RETURN","return",351],["T_WHITESPACE"," ",351],["T_VARIABLE","$options",351],";",["T_WHITESPACE","\n    ",351],"}",["T_WHITESPACE","\n\n    ",352],["T_DOC_COMMENT","\/**\n     * Check if downloadable product has links and they can be purchased separately\n     *\n     * @param \\Magento\\Catalog\\Model\\Product $product\n     * @return bool\n     *\/",354],["T_WHITESPACE","\n    ",359],["T_PUBLIC","public",360],["T_WHITESPACE"," ",360],["T_FUNCTION","function",360],["T_WHITESPACE"," ",360],["T_STRING","canConfigure",360],"(",["T_VARIABLE","$product",360],")",["T_WHITESPACE","\n    ",360],"{",["T_WHITESPACE","\n        ",361],["T_RETURN","return",362],["T_WHITESPACE"," ",362],["T_VARIABLE","$this",362],["T_OBJECT_OPERATOR","->",362],["T_STRING","hasLinks",362],"(",["T_VARIABLE","$product",362],")",["T_WHITESPACE"," ",362],["T_BOOLEAN_AND","&&",362],["T_WHITESPACE"," ",362],["T_VARIABLE","$product",362],["T_OBJECT_OPERATOR","->",362],["T_STRING","getLinksPurchasedSeparately",362],"(",")",";",["T_WHITESPACE","\n    ",362],"}",["T_WHITESPACE","\n\n    ",363],["T_DOC_COMMENT","\/**\n     * Check that product of this type has weight\n     *\n     * @return bool\n     *\/",365],["T_WHITESPACE","\n    ",369],["T_PUBLIC","public",370],["T_WHITESPACE"," ",370],["T_FUNCTION","function",370],["T_WHITESPACE"," ",370],["T_STRING","hasWeight",370],"(",")",["T_WHITESPACE","\n    ",370],"{",["T_WHITESPACE","\n        ",371],["T_RETURN","return",372],["T_WHITESPACE"," ",372],["T_STRING","false",372],";",["T_WHITESPACE","\n    ",372],"}",["T_WHITESPACE","\n\n    ",373],["T_DOC_COMMENT","\/**\n     * Delete data specific for Downloadable product type\n     *\n     * @param \\Magento\\Catalog\\Model\\Product $product\n     * @return void\n     *\/",375],["T_WHITESPACE","\n    ",380],["T_PUBLIC","public",381],["T_WHITESPACE"," ",381],["T_FUNCTION","function",381],["T_WHITESPACE"," ",381],["T_STRING","deleteTypeSpecificData",381],"(",["T_NS_SEPARATOR","\\",381],["T_STRING","Magento",381],["T_NS_SEPARATOR","\\",381],["T_STRING","Catalog",381],["T_NS_SEPARATOR","\\",381],["T_STRING","Model",381],["T_NS_SEPARATOR","\\",381],["T_STRING","Product",381],["T_WHITESPACE"," ",381],["T_VARIABLE","$product",381],")",["T_WHITESPACE","\n    ",381],"{",["T_WHITESPACE","\n        ",382],["T_IF","if",383],["T_WHITESPACE"," ",383],"(",["T_VARIABLE","$product",383],["T_OBJECT_OPERATOR","->",383],["T_STRING","getOrigData",383],"(",["T_CONSTANT_ENCAPSED_STRING","'type_id'",383],")",["T_WHITESPACE"," ",383],["T_IS_IDENTICAL","===",383],["T_WHITESPACE"," ",383],["T_NS_SEPARATOR","\\",383],["T_STRING","Magento",383],["T_NS_SEPARATOR","\\",383],["T_STRING","Downloadable",383],["T_NS_SEPARATOR","\\",383],["T_STRING","Model",383],["T_NS_SEPARATOR","\\",383],["T_STRING","Product",383],["T_NS_SEPARATOR","\\",383],["T_STRING","Type",383],["T_DOUBLE_COLON","::",383],["T_STRING","TYPE_DOWNLOADABLE",383],")",["T_WHITESPACE"," ",383],"{",["T_WHITESPACE","\n            ",383],["T_VARIABLE","$downloadableData",384],["T_WHITESPACE"," ",384],"=",["T_WHITESPACE"," ",384],["T_VARIABLE","$product",384],["T_OBJECT_OPERATOR","->",384],["T_STRING","getDownloadableData",384],"(",")",";",["T_WHITESPACE","\n            ",384],["T_VARIABLE","$sampleItems",385],["T_WHITESPACE"," ",385],"=",["T_WHITESPACE"," ",385],"[","]",";",["T_WHITESPACE","\n            ",385],["T_IF","if",386],["T_WHITESPACE"," ",386],"(",["T_ISSET","isset",386],"(",["T_VARIABLE","$downloadableData",386],"[",["T_CONSTANT_ENCAPSED_STRING","'sample'",386],"]",")",")",["T_WHITESPACE"," ",386],"{",["T_WHITESPACE","\n                ",386],["T_FOREACH","foreach",387],["T_WHITESPACE"," ",387],"(",["T_VARIABLE","$downloadableData",387],"[",["T_CONSTANT_ENCAPSED_STRING","'sample'",387],"]",["T_WHITESPACE"," ",387],["T_AS","as",387],["T_WHITESPACE"," ",387],["T_VARIABLE","$sample",387],")",["T_WHITESPACE"," ",387],"{",["T_WHITESPACE","\n                    ",387],["T_VARIABLE","$sampleItems",388],"[","]",["T_WHITESPACE"," ",388],"=",["T_WHITESPACE"," ",388],["T_VARIABLE","$sample",388],"[",["T_CONSTANT_ENCAPSED_STRING","'sample_id'",388],"]",";",["T_WHITESPACE","\n                ",388],"}",["T_WHITESPACE","\n            ",389],"}",["T_WHITESPACE","\n            ",390],["T_IF","if",391],["T_WHITESPACE"," ",391],"(",["T_VARIABLE","$sampleItems",391],")",["T_WHITESPACE"," ",391],"{",["T_WHITESPACE","\n                ",391],["T_VARIABLE","$this",392],["T_OBJECT_OPERATOR","->",392],["T_STRING","_sampleResFactory",392],["T_OBJECT_OPERATOR","->",392],["T_STRING","create",392],"(",")",["T_OBJECT_OPERATOR","->",392],["T_STRING","deleteItems",392],"(",["T_VARIABLE","$sampleItems",392],")",";",["T_WHITESPACE","\n            ",392],"}",["T_WHITESPACE","\n            ",393],["T_VARIABLE","$linkItems",394],["T_WHITESPACE"," ",394],"=",["T_WHITESPACE"," ",394],"[","]",";",["T_WHITESPACE","\n            ",394],["T_IF","if",395],["T_WHITESPACE"," ",395],"(",["T_ISSET","isset",395],"(",["T_VARIABLE","$downloadableData",395],"[",["T_CONSTANT_ENCAPSED_STRING","'link'",395],"]",")",")",["T_WHITESPACE"," ",395],"{",["T_WHITESPACE","\n                ",395],["T_FOREACH","foreach",396],["T_WHITESPACE"," ",396],"(",["T_VARIABLE","$downloadableData",396],"[",["T_CONSTANT_ENCAPSED_STRING","'link'",396],"]",["T_WHITESPACE"," ",396],["T_AS","as",396],["T_WHITESPACE"," ",396],["T_VARIABLE","$link",396],")",["T_WHITESPACE"," ",396],"{",["T_WHITESPACE","\n                    ",396],["T_VARIABLE","$linkItems",397],"[","]",["T_WHITESPACE"," ",397],"=",["T_WHITESPACE"," ",397],["T_VARIABLE","$link",397],"[",["T_CONSTANT_ENCAPSED_STRING","'link_id'",397],"]",";",["T_WHITESPACE","\n                ",397],"}",["T_WHITESPACE","\n            ",398],"}",["T_WHITESPACE","\n            ",399],["T_IF","if",400],["T_WHITESPACE"," ",400],"(",["T_VARIABLE","$linkItems",400],")",["T_WHITESPACE"," ",400],"{",["T_WHITESPACE","\n                ",400],["T_VARIABLE","$this",401],["T_OBJECT_OPERATOR","->",401],["T_STRING","_linkResource",401],["T_OBJECT_OPERATOR","->",401],["T_STRING","deleteItems",401],"(",["T_VARIABLE","$linkItems",401],")",";",["T_WHITESPACE","\n            ",401],"}",["T_WHITESPACE","\n        ",402],"}",["T_WHITESPACE","\n    ",403],"}",["T_WHITESPACE","\n\n    ",404],["T_DOC_COMMENT","\/**\n     * Prepare product and its configuration to be added to some products list.\n     * Perform standard preparation process and then prepare options for downloadable links.\n     *\n     * @param \\Magento\\Framework\\DataObject $buyRequest\n     * @param \\Magento\\Catalog\\Model\\Product $product\n     * @param string $processMode\n     * @return \\Magento\\Framework\\Phrase|array|string\n     * @SuppressWarnings(PHPMD.CyclomaticComplexity)\n     * @SuppressWarnings(PHPMD.NPathComplexity)\n     *\/",406],["T_WHITESPACE","\n    ",416],["T_PROTECTED","protected",417],["T_WHITESPACE"," ",417],["T_FUNCTION","function",417],["T_WHITESPACE"," ",417],["T_STRING","_prepareProduct",417],"(",["T_NS_SEPARATOR","\\",417],["T_STRING","Magento",417],["T_NS_SEPARATOR","\\",417],["T_STRING","Framework",417],["T_NS_SEPARATOR","\\",417],["T_STRING","DataObject",417],["T_WHITESPACE"," ",417],["T_VARIABLE","$buyRequest",417],",",["T_WHITESPACE"," ",417],["T_VARIABLE","$product",417],",",["T_WHITESPACE"," ",417],["T_VARIABLE","$processMode",417],")",["T_WHITESPACE","\n    ",417],"{",["T_WHITESPACE","\n        ",418],["T_VARIABLE","$result",419],["T_WHITESPACE"," ",419],"=",["T_WHITESPACE"," ",419],["T_STRING","parent",419],["T_DOUBLE_COLON","::",419],["T_STRING","_prepareProduct",419],"(",["T_VARIABLE","$buyRequest",419],",",["T_WHITESPACE"," ",419],["T_VARIABLE","$product",419],",",["T_WHITESPACE"," ",419],["T_VARIABLE","$processMode",419],")",";",["T_WHITESPACE","\n\n        ",419],["T_IF","if",421],["T_WHITESPACE"," ",421],"(",["T_STRING","is_string",421],"(",["T_VARIABLE","$result",421],")",")",["T_WHITESPACE"," ",421],"{",["T_WHITESPACE","\n            ",421],["T_RETURN","return",422],["T_WHITESPACE"," ",422],["T_VARIABLE","$result",422],";",["T_WHITESPACE","\n        ",422],"}",["T_WHITESPACE","\n        ",423],["T_COMMENT","\/\/ if adding product from admin area we add all links to product\n",424],["T_WHITESPACE","        ",425],["T_VARIABLE","$originalLinksPurchasedSeparately",425],["T_WHITESPACE"," ",425],"=",["T_WHITESPACE"," ",425],["T_STRING","null",425],";",["T_WHITESPACE","\n        ",425],["T_IF","if",426],["T_WHITESPACE"," ",426],"(",["T_VARIABLE","$product",426],["T_OBJECT_OPERATOR","->",426],["T_STRING","getSkipCheckRequiredOption",426],"(",")",")",["T_WHITESPACE"," ",426],"{",["T_WHITESPACE","\n            ",426],["T_VARIABLE","$originalLinksPurchasedSeparately",427],["T_WHITESPACE"," ",427],"=",["T_WHITESPACE"," ",427],["T_VARIABLE","$product",427],["T_OBJECT_OPERATOR","->",427],["T_STRING","getLinksPurchasedSeparately",427],"(",")",";",["T_WHITESPACE","\n            ",427],["T_VARIABLE","$product",428],["T_OBJECT_OPERATOR","->",428],["T_STRING","setLinksPurchasedSeparately",428],"(",["T_STRING","false",428],")",";",["T_WHITESPACE","\n        ",428],"}",["T_WHITESPACE","\n        ",429],["T_VARIABLE","$preparedLinks",430],["T_WHITESPACE"," ",430],"=",["T_WHITESPACE"," ",430],"[","]",";",["T_WHITESPACE","\n        ",430],["T_IF","if",431],["T_WHITESPACE"," ",431],"(",["T_VARIABLE","$product",431],["T_OBJECT_OPERATOR","->",431],["T_STRING","getLinksPurchasedSeparately",431],"(",")",")",["T_WHITESPACE"," ",431],"{",["T_WHITESPACE","\n            ",431],["T_IF","if",432],["T_WHITESPACE"," ",432],"(",["T_VARIABLE","$links",432],["T_WHITESPACE"," ",432],"=",["T_WHITESPACE"," ",432],["T_VARIABLE","$buyRequest",432],["T_OBJECT_OPERATOR","->",432],["T_STRING","getLinks",432],"(",")",")",["T_WHITESPACE"," ",432],"{",["T_WHITESPACE","\n                ",432],["T_FOREACH","foreach",433],["T_WHITESPACE"," ",433],"(",["T_VARIABLE","$this",433],["T_OBJECT_OPERATOR","->",433],["T_STRING","getLinks",433],"(",["T_VARIABLE","$product",433],")",["T_WHITESPACE"," ",433],["T_AS","as",433],["T_WHITESPACE"," ",433],["T_VARIABLE","$link",433],")",["T_WHITESPACE"," ",433],"{",["T_WHITESPACE","\n                    ",433],["T_IF","if",434],["T_WHITESPACE"," ",434],"(",["T_STRING","in_array",434],"(",["T_VARIABLE","$link",434],["T_OBJECT_OPERATOR","->",434],["T_STRING","getId",434],"(",")",",",["T_WHITESPACE"," ",434],["T_VARIABLE","$links",434],")",")",["T_WHITESPACE"," ",434],"{",["T_WHITESPACE","\n                        ",434],["T_VARIABLE","$preparedLinks",435],"[","]",["T_WHITESPACE"," ",435],"=",["T_WHITESPACE"," ",435],["T_VARIABLE","$link",435],["T_OBJECT_OPERATOR","->",435],["T_STRING","getId",435],"(",")",";",["T_WHITESPACE","\n                    ",435],"}",["T_WHITESPACE","\n                ",436],"}",["T_WHITESPACE","\n            ",437],"}",["T_WHITESPACE","\n        ",438],"}",["T_WHITESPACE"," ",439],["T_ELSE","else",439],["T_WHITESPACE"," ",439],"{",["T_WHITESPACE","\n            ",439],["T_FOREACH","foreach",440],["T_WHITESPACE"," ",440],"(",["T_VARIABLE","$this",440],["T_OBJECT_OPERATOR","->",440],["T_STRING","getLinks",440],"(",["T_VARIABLE","$product",440],")",["T_WHITESPACE"," ",440],["T_AS","as",440],["T_WHITESPACE"," ",440],["T_VARIABLE","$link",440],")",["T_WHITESPACE"," ",440],"{",["T_WHITESPACE","\n                ",440],["T_VARIABLE","$preparedLinks",441],"[","]",["T_WHITESPACE"," ",441],"=",["T_WHITESPACE"," ",441],["T_VARIABLE","$link",441],["T_OBJECT_OPERATOR","->",441],["T_STRING","getId",441],"(",")",";",["T_WHITESPACE","\n            ",441],"}",["T_WHITESPACE","\n        ",442],"}",["T_WHITESPACE","\n        ",443],["T_IF","if",444],["T_WHITESPACE"," ",444],"(",["T_STRING","null",444],["T_WHITESPACE"," ",444],["T_IS_NOT_IDENTICAL","!==",444],["T_WHITESPACE"," ",444],["T_VARIABLE","$originalLinksPurchasedSeparately",444],")",["T_WHITESPACE"," ",444],"{",["T_WHITESPACE","\n            ",444],["T_VARIABLE","$product",445],["T_OBJECT_OPERATOR","->",445],["T_STRING","setLinksPurchasedSeparately",445],"(",["T_VARIABLE","$originalLinksPurchasedSeparately",445],")",";",["T_WHITESPACE","\n        ",445],"}",["T_WHITESPACE","\n        ",446],["T_IF","if",447],["T_WHITESPACE"," ",447],"(",["T_VARIABLE","$preparedLinks",447],")",["T_WHITESPACE"," ",447],"{",["T_WHITESPACE","\n            ",447],["T_VARIABLE","$product",448],["T_OBJECT_OPERATOR","->",448],["T_STRING","addCustomOption",448],"(",["T_CONSTANT_ENCAPSED_STRING","'downloadable_link_ids'",448],",",["T_WHITESPACE"," ",448],["T_STRING","implode",448],"(",["T_CONSTANT_ENCAPSED_STRING","','",448],",",["T_WHITESPACE"," ",448],["T_VARIABLE","$preparedLinks",448],")",")",";",["T_WHITESPACE","\n            ",448],["T_RETURN","return",449],["T_WHITESPACE"," ",449],["T_VARIABLE","$result",449],";",["T_WHITESPACE","\n        ",449],"}",["T_WHITESPACE","\n        ",450],["T_IF","if",451],["T_WHITESPACE"," ",451],"(",["T_VARIABLE","$this",451],["T_OBJECT_OPERATOR","->",451],["T_STRING","getLinkSelectionRequired",451],"(",["T_VARIABLE","$product",451],")",["T_WHITESPACE"," ",451],["T_BOOLEAN_AND","&&",451],["T_WHITESPACE"," ",451],["T_VARIABLE","$this",451],["T_OBJECT_OPERATOR","->",451],["T_STRING","_isStrictProcessMode",451],"(",["T_VARIABLE","$processMode",451],")",")",["T_WHITESPACE"," ",451],"{",["T_WHITESPACE","\n            ",451],["T_RETURN","return",452],["T_WHITESPACE"," ",452],["T_STRING","__",452],"(",["T_CONSTANT_ENCAPSED_STRING","'Please specify product link(s).'",452],")",["T_OBJECT_OPERATOR","->",452],["T_STRING","render",452],"(",")",";",["T_WHITESPACE","\n        ",452],"}",["T_WHITESPACE","\n        ",453],["T_RETURN","return",454],["T_WHITESPACE"," ",454],["T_VARIABLE","$result",454],";",["T_WHITESPACE","\n    ",454],"}",["T_WHITESPACE","\n\n    ",455],["T_DOC_COMMENT","\/**\n     * @return \\Magento\\Downloadable\\Model\\Link\n     *\/",457],["T_WHITESPACE","\n    ",459],["T_PROTECTED","protected",460],["T_WHITESPACE"," ",460],["T_FUNCTION","function",460],["T_WHITESPACE"," ",460],["T_STRING","_createLink",460],"(",")",["T_WHITESPACE","\n    ",460],"{",["T_WHITESPACE","\n        ",461],["T_RETURN","return",462],["T_WHITESPACE"," ",462],["T_VARIABLE","$this",462],["T_OBJECT_OPERATOR","->",462],["T_STRING","_linkFactory",462],["T_OBJECT_OPERATOR","->",462],["T_STRING","create",462],"(",")",";",["T_WHITESPACE","\n    ",462],"}",["T_WHITESPACE","\n\n    ",463],["T_DOC_COMMENT","\/**\n     * @return \\Magento\\Downloadable\\Model\\Sample\n     *\/",465],["T_WHITESPACE","\n    ",467],["T_PROTECTED","protected",468],["T_WHITESPACE"," ",468],["T_FUNCTION","function",468],["T_WHITESPACE"," ",468],["T_STRING","_createSample",468],"(",")",["T_WHITESPACE","\n    ",468],"{",["T_WHITESPACE","\n        ",469],["T_RETURN","return",470],["T_WHITESPACE"," ",470],["T_VARIABLE","$this",470],["T_OBJECT_OPERATOR","->",470],["T_STRING","_sampleFactory",470],["T_OBJECT_OPERATOR","->",470],["T_STRING","create",470],"(",")",";",["T_WHITESPACE","\n    ",470],"}",["T_WHITESPACE","\n",471],"}",["T_WHITESPACE","\n",472]]
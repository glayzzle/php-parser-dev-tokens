[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Copyright \u00c2\u00a9 2013-2017 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n *\/",2],["T_WHITESPACE","\n",5],["T_NAMESPACE","namespace",6],["T_WHITESPACE"," ",6],["T_STRING","Magento",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Downloadable",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Model",6],";",["T_WHITESPACE","\n\n",6],["T_USE","use",8],["T_WHITESPACE"," ",8],["T_STRING","Magento",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Catalog",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Api",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Data",8],["T_NS_SEPARATOR","\\",8],["T_STRING","ProductInterface",8],";",["T_WHITESPACE","\n",8],["T_USE","use",9],["T_WHITESPACE"," ",9],["T_STRING","Magento",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Downloadable",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Api",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Data",9],["T_NS_SEPARATOR","\\",9],["T_STRING","LinkInterface",9],";",["T_WHITESPACE","\n",9],["T_USE","use",10],["T_WHITESPACE"," ",10],["T_STRING","Magento",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Downloadable",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Model",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Product",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Type",10],";",["T_WHITESPACE","\n",10],["T_USE","use",11],["T_WHITESPACE"," ",11],["T_STRING","Magento",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Downloadable",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Api",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Data",11],["T_NS_SEPARATOR","\\",11],["T_STRING","File",11],["T_NS_SEPARATOR","\\",11],["T_STRING","ContentUploaderInterface",11],";",["T_WHITESPACE","\n",11],["T_USE","use",12],["T_WHITESPACE"," ",12],["T_STRING","Magento",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Downloadable",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Model",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Product",12],["T_NS_SEPARATOR","\\",12],["T_STRING","TypeHandler",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Link",12],["T_WHITESPACE"," ",12],["T_AS","as",12],["T_WHITESPACE"," ",12],["T_STRING","LinkHandler",12],";",["T_WHITESPACE","\n",12],["T_USE","use",13],["T_WHITESPACE"," ",13],["T_STRING","Magento",13],["T_NS_SEPARATOR","\\",13],["T_STRING","Framework",13],["T_NS_SEPARATOR","\\",13],["T_STRING","EntityManager",13],["T_NS_SEPARATOR","\\",13],["T_STRING","MetadataPool",13],";",["T_WHITESPACE","\n",13],["T_USE","use",14],["T_WHITESPACE"," ",14],["T_STRING","Magento",14],["T_NS_SEPARATOR","\\",14],["T_STRING","Framework",14],["T_NS_SEPARATOR","\\",14],["T_STRING","Exception",14],["T_NS_SEPARATOR","\\",14],["T_STRING","InputException",14],";",["T_WHITESPACE","\n",14],["T_USE","use",15],["T_WHITESPACE"," ",15],["T_STRING","Magento",15],["T_NS_SEPARATOR","\\",15],["T_STRING","Framework",15],["T_NS_SEPARATOR","\\",15],["T_STRING","Exception",15],["T_NS_SEPARATOR","\\",15],["T_STRING","NoSuchEntityException",15],";",["T_WHITESPACE","\n",15],["T_USE","use",16],["T_WHITESPACE"," ",16],["T_STRING","Magento",16],["T_NS_SEPARATOR","\\",16],["T_STRING","Framework",16],["T_NS_SEPARATOR","\\",16],["T_STRING","Exception",16],["T_NS_SEPARATOR","\\",16],["T_STRING","StateException",16],";",["T_WHITESPACE","\n",16],["T_USE","use",17],["T_WHITESPACE"," ",17],["T_STRING","Magento",17],["T_NS_SEPARATOR","\\",17],["T_STRING","Framework",17],["T_NS_SEPARATOR","\\",17],["T_STRING","Json",17],["T_NS_SEPARATOR","\\",17],["T_STRING","EncoderInterface",17],";",["T_WHITESPACE","\n",17],["T_USE","use",18],["T_WHITESPACE"," ",18],["T_STRING","Magento",18],["T_NS_SEPARATOR","\\",18],["T_STRING","Framework",18],["T_NS_SEPARATOR","\\",18],["T_STRING","App",18],["T_NS_SEPARATOR","\\",18],["T_STRING","ObjectManager",18],";",["T_WHITESPACE","\n\n",18],["T_DOC_COMMENT","\/**\n * Class LinkRepository\n * @SuppressWarnings(PHPMD.CouplingBetweenObjects)\n *\/",20],["T_WHITESPACE","\n",23],["T_CLASS","class",24],["T_WHITESPACE"," ",24],["T_STRING","LinkRepository",24],["T_WHITESPACE"," ",24],["T_IMPLEMENTS","implements",24],["T_WHITESPACE"," ",24],["T_NS_SEPARATOR","\\",24],["T_STRING","Magento",24],["T_NS_SEPARATOR","\\",24],["T_STRING","Downloadable",24],["T_NS_SEPARATOR","\\",24],["T_STRING","Api",24],["T_NS_SEPARATOR","\\",24],["T_STRING","LinkRepositoryInterface",24],["T_WHITESPACE","\n",24],"{",["T_WHITESPACE","\n    ",25],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Catalog\\Api\\ProductRepositoryInterface\n     *\/",26],["T_WHITESPACE","\n    ",28],["T_PROTECTED","protected",29],["T_WHITESPACE"," ",29],["T_VARIABLE","$productRepository",29],";",["T_WHITESPACE","\n\n    ",29],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Downloadable\\Api\\Data\\LinkInterfaceFactory\n     *\/",31],["T_WHITESPACE","\n    ",33],["T_PROTECTED","protected",34],["T_WHITESPACE"," ",34],["T_VARIABLE","$linkDataObjectFactory",34],";",["T_WHITESPACE","\n\n    ",34],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Downloadable\\Model\\LinkFactory\n     *\/",36],["T_WHITESPACE","\n    ",38],["T_PROTECTED","protected",39],["T_WHITESPACE"," ",39],["T_VARIABLE","$linkFactory",39],";",["T_WHITESPACE","\n\n    ",39],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Downloadable\\Model\\Link\\ContentValidator\n     *\/",41],["T_WHITESPACE","\n    ",43],["T_PROTECTED","protected",44],["T_WHITESPACE"," ",44],["T_VARIABLE","$contentValidator",44],";",["T_WHITESPACE","\n\n    ",44],["T_DOC_COMMENT","\/**\n     * @var Type\n     *\/",46],["T_WHITESPACE","\n    ",48],["T_PROTECTED","protected",49],["T_WHITESPACE"," ",49],["T_VARIABLE","$downloadableType",49],";",["T_WHITESPACE","\n\n    ",49],["T_DOC_COMMENT","\/**\n     * @var ContentUploaderInterface\n     *\/",51],["T_WHITESPACE","\n    ",53],["T_PROTECTED","protected",54],["T_WHITESPACE"," ",54],["T_VARIABLE","$fileContentUploader",54],";",["T_WHITESPACE","\n\n    ",54],["T_DOC_COMMENT","\/**\n     * @var EncoderInterface\n     *\/",56],["T_WHITESPACE","\n    ",58],["T_PROTECTED","protected",59],["T_WHITESPACE"," ",59],["T_VARIABLE","$jsonEncoder",59],";",["T_WHITESPACE","\n\n    ",59],["T_DOC_COMMENT","\/**\n     * @var LinkHandler\n     *\/",61],["T_WHITESPACE","\n    ",63],["T_PRIVATE","private",64],["T_WHITESPACE"," ",64],["T_VARIABLE","$linkTypeHandler",64],";",["T_WHITESPACE","\n\n    ",64],["T_DOC_COMMENT","\/**\n     * @var MetadataPool\n     *\/",66],["T_WHITESPACE","\n    ",68],["T_PRIVATE","private",69],["T_WHITESPACE"," ",69],["T_VARIABLE","$metadataPool",69],";",["T_WHITESPACE","\n\n    ",69],["T_DOC_COMMENT","\/**\n     * @param \\Magento\\Catalog\\Api\\ProductRepositoryInterface $productRepository\n     * @param \\Magento\\Downloadable\\Model\\Product\\Type $downloadableType\n     * @param \\Magento\\Downloadable\\Api\\Data\\LinkInterfaceFactory $linkDataObjectFactory\n     * @param LinkFactory $linkFactory\n     * @param Link\\ContentValidator $contentValidator\n     * @param EncoderInterface $jsonEncoder\n     * @param ContentUploaderInterface $fileContentUploader\n     *\/",71],["T_WHITESPACE","\n    ",79],["T_PUBLIC","public",80],["T_WHITESPACE"," ",80],["T_FUNCTION","function",80],["T_WHITESPACE"," ",80],["T_STRING","__construct",80],"(",["T_WHITESPACE","\n        ",80],["T_NS_SEPARATOR","\\",81],["T_STRING","Magento",81],["T_NS_SEPARATOR","\\",81],["T_STRING","Catalog",81],["T_NS_SEPARATOR","\\",81],["T_STRING","Api",81],["T_NS_SEPARATOR","\\",81],["T_STRING","ProductRepositoryInterface",81],["T_WHITESPACE"," ",81],["T_VARIABLE","$productRepository",81],",",["T_WHITESPACE","\n        ",81],["T_NS_SEPARATOR","\\",82],["T_STRING","Magento",82],["T_NS_SEPARATOR","\\",82],["T_STRING","Downloadable",82],["T_NS_SEPARATOR","\\",82],["T_STRING","Model",82],["T_NS_SEPARATOR","\\",82],["T_STRING","Product",82],["T_NS_SEPARATOR","\\",82],["T_STRING","Type",82],["T_WHITESPACE"," ",82],["T_VARIABLE","$downloadableType",82],",",["T_WHITESPACE","\n        ",82],["T_NS_SEPARATOR","\\",83],["T_STRING","Magento",83],["T_NS_SEPARATOR","\\",83],["T_STRING","Downloadable",83],["T_NS_SEPARATOR","\\",83],["T_STRING","Api",83],["T_NS_SEPARATOR","\\",83],["T_STRING","Data",83],["T_NS_SEPARATOR","\\",83],["T_STRING","LinkInterfaceFactory",83],["T_WHITESPACE"," ",83],["T_VARIABLE","$linkDataObjectFactory",83],",",["T_WHITESPACE","\n        ",83],["T_STRING","LinkFactory",84],["T_WHITESPACE"," ",84],["T_VARIABLE","$linkFactory",84],",",["T_WHITESPACE","\n        ",84],["T_STRING","Link",85],["T_NS_SEPARATOR","\\",85],["T_STRING","ContentValidator",85],["T_WHITESPACE"," ",85],["T_VARIABLE","$contentValidator",85],",",["T_WHITESPACE","\n        ",85],["T_STRING","EncoderInterface",86],["T_WHITESPACE"," ",86],["T_VARIABLE","$jsonEncoder",86],",",["T_WHITESPACE","\n        ",86],["T_STRING","ContentUploaderInterface",87],["T_WHITESPACE"," ",87],["T_VARIABLE","$fileContentUploader",87],["T_WHITESPACE","\n    ",87],")",["T_WHITESPACE"," ",88],"{",["T_WHITESPACE","\n        ",88],["T_VARIABLE","$this",89],["T_OBJECT_OPERATOR","->",89],["T_STRING","productRepository",89],["T_WHITESPACE"," ",89],"=",["T_WHITESPACE"," ",89],["T_VARIABLE","$productRepository",89],";",["T_WHITESPACE","\n        ",89],["T_VARIABLE","$this",90],["T_OBJECT_OPERATOR","->",90],["T_STRING","downloadableType",90],["T_WHITESPACE"," ",90],"=",["T_WHITESPACE"," ",90],["T_VARIABLE","$downloadableType",90],";",["T_WHITESPACE","\n        ",90],["T_VARIABLE","$this",91],["T_OBJECT_OPERATOR","->",91],["T_STRING","linkDataObjectFactory",91],["T_WHITESPACE"," ",91],"=",["T_WHITESPACE"," ",91],["T_VARIABLE","$linkDataObjectFactory",91],";",["T_WHITESPACE","\n        ",91],["T_VARIABLE","$this",92],["T_OBJECT_OPERATOR","->",92],["T_STRING","linkFactory",92],["T_WHITESPACE"," ",92],"=",["T_WHITESPACE"," ",92],["T_VARIABLE","$linkFactory",92],";",["T_WHITESPACE","\n        ",92],["T_VARIABLE","$this",93],["T_OBJECT_OPERATOR","->",93],["T_STRING","contentValidator",93],["T_WHITESPACE"," ",93],"=",["T_WHITESPACE"," ",93],["T_VARIABLE","$contentValidator",93],";",["T_WHITESPACE","\n        ",93],["T_VARIABLE","$this",94],["T_OBJECT_OPERATOR","->",94],["T_STRING","jsonEncoder",94],["T_WHITESPACE"," ",94],"=",["T_WHITESPACE"," ",94],["T_VARIABLE","$jsonEncoder",94],";",["T_WHITESPACE","\n        ",94],["T_VARIABLE","$this",95],["T_OBJECT_OPERATOR","->",95],["T_STRING","fileContentUploader",95],["T_WHITESPACE"," ",95],"=",["T_WHITESPACE"," ",95],["T_VARIABLE","$fileContentUploader",95],";",["T_WHITESPACE","\n    ",95],"}",["T_WHITESPACE","\n\n    ",96],["T_DOC_COMMENT","\/**\n     * {@inheritdoc}\n     *\/",98],["T_WHITESPACE","\n    ",100],["T_PUBLIC","public",101],["T_WHITESPACE"," ",101],["T_FUNCTION","function",101],["T_WHITESPACE"," ",101],["T_STRING","getList",101],"(",["T_VARIABLE","$sku",101],")",["T_WHITESPACE","\n    ",101],"{",["T_WHITESPACE","\n        ",102],["T_DOC_COMMENT","\/** @var \\Magento\\Catalog\\Model\\Product $product *\/",103],["T_WHITESPACE","\n        ",103],["T_VARIABLE","$product",104],["T_WHITESPACE"," ",104],"=",["T_WHITESPACE"," ",104],["T_VARIABLE","$this",104],["T_OBJECT_OPERATOR","->",104],["T_STRING","productRepository",104],["T_OBJECT_OPERATOR","->",104],["T_STRING","get",104],"(",["T_VARIABLE","$sku",104],")",";",["T_WHITESPACE","\n        ",104],["T_RETURN","return",105],["T_WHITESPACE"," ",105],["T_VARIABLE","$this",105],["T_OBJECT_OPERATOR","->",105],["T_STRING","getLinksByProduct",105],"(",["T_VARIABLE","$product",105],")",";",["T_WHITESPACE","\n    ",105],"}",["T_WHITESPACE","\n\n    ",106],["T_DOC_COMMENT","\/**\n     * @param \\Magento\\Catalog\\Api\\Data\\ProductInterface $product\n     * @return array\n     *\/",108],["T_WHITESPACE","\n    ",111],["T_PUBLIC","public",112],["T_WHITESPACE"," ",112],["T_FUNCTION","function",112],["T_WHITESPACE"," ",112],["T_STRING","getLinksByProduct",112],"(",["T_NS_SEPARATOR","\\",112],["T_STRING","Magento",112],["T_NS_SEPARATOR","\\",112],["T_STRING","Catalog",112],["T_NS_SEPARATOR","\\",112],["T_STRING","Api",112],["T_NS_SEPARATOR","\\",112],["T_STRING","Data",112],["T_NS_SEPARATOR","\\",112],["T_STRING","ProductInterface",112],["T_WHITESPACE"," ",112],["T_VARIABLE","$product",112],")",["T_WHITESPACE","\n    ",112],"{",["T_WHITESPACE","\n        ",113],["T_VARIABLE","$linkList",114],["T_WHITESPACE"," ",114],"=",["T_WHITESPACE"," ",114],"[","]",";",["T_WHITESPACE","\n        ",114],["T_VARIABLE","$links",115],["T_WHITESPACE"," ",115],"=",["T_WHITESPACE"," ",115],["T_VARIABLE","$this",115],["T_OBJECT_OPERATOR","->",115],["T_STRING","downloadableType",115],["T_OBJECT_OPERATOR","->",115],["T_STRING","getLinks",115],"(",["T_VARIABLE","$product",115],")",";",["T_WHITESPACE","\n        ",115],["T_DOC_COMMENT","\/** @var \\Magento\\Downloadable\\Model\\Link $link *\/",116],["T_WHITESPACE","\n        ",116],["T_FOREACH","foreach",117],["T_WHITESPACE"," ",117],"(",["T_VARIABLE","$links",117],["T_WHITESPACE"," ",117],["T_AS","as",117],["T_WHITESPACE"," ",117],["T_VARIABLE","$link",117],")",["T_WHITESPACE"," ",117],"{",["T_WHITESPACE","\n            ",117],["T_VARIABLE","$linkList",118],"[","]",["T_WHITESPACE"," ",118],"=",["T_WHITESPACE"," ",118],["T_VARIABLE","$this",118],["T_OBJECT_OPERATOR","->",118],["T_STRING","buildLink",118],"(",["T_VARIABLE","$link",118],")",";",["T_WHITESPACE","\n        ",118],"}",["T_WHITESPACE","\n        ",119],["T_RETURN","return",120],["T_WHITESPACE"," ",120],["T_VARIABLE","$linkList",120],";",["T_WHITESPACE","\n    ",120],"}",["T_WHITESPACE","\n\n    ",121],["T_DOC_COMMENT","\/**\n     * Build a link data object\n     *\n     * @param \\Magento\\Downloadable\\Model\\Link $resourceData\n     * @return \\Magento\\Downloadable\\Model\\Link\n     *\/",123],["T_WHITESPACE","\n    ",128],["T_PROTECTED","protected",129],["T_WHITESPACE"," ",129],["T_FUNCTION","function",129],["T_WHITESPACE"," ",129],["T_STRING","buildLink",129],"(",["T_VARIABLE","$resourceData",129],")",["T_WHITESPACE","\n    ",129],"{",["T_WHITESPACE","\n        ",130],["T_DOC_COMMENT","\/** @var \\Magento\\Downloadable\\Model\\Link $link *\/",131],["T_WHITESPACE","\n        ",131],["T_VARIABLE","$link",132],["T_WHITESPACE"," ",132],"=",["T_WHITESPACE"," ",132],["T_VARIABLE","$this",132],["T_OBJECT_OPERATOR","->",132],["T_STRING","linkDataObjectFactory",132],["T_OBJECT_OPERATOR","->",132],["T_STRING","create",132],"(",")",";",["T_WHITESPACE","\n        ",132],["T_VARIABLE","$this",133],["T_OBJECT_OPERATOR","->",133],["T_STRING","setBasicFields",133],"(",["T_VARIABLE","$resourceData",133],",",["T_WHITESPACE"," ",133],["T_VARIABLE","$link",133],")",";",["T_WHITESPACE","\n        ",133],["T_VARIABLE","$link",134],["T_OBJECT_OPERATOR","->",134],["T_STRING","setPrice",134],"(",["T_VARIABLE","$resourceData",134],["T_OBJECT_OPERATOR","->",134],["T_STRING","getPrice",134],"(",")",")",";",["T_WHITESPACE","\n        ",134],["T_VARIABLE","$link",135],["T_OBJECT_OPERATOR","->",135],["T_STRING","setNumberOfDownloads",135],"(",["T_VARIABLE","$resourceData",135],["T_OBJECT_OPERATOR","->",135],["T_STRING","getNumberOfDownloads",135],"(",")",")",";",["T_WHITESPACE","\n        ",135],["T_VARIABLE","$link",136],["T_OBJECT_OPERATOR","->",136],["T_STRING","setIsShareable",136],"(",["T_VARIABLE","$resourceData",136],["T_OBJECT_OPERATOR","->",136],["T_STRING","getIsShareable",136],"(",")",")",";",["T_WHITESPACE","\n        ",136],["T_VARIABLE","$link",137],["T_OBJECT_OPERATOR","->",137],["T_STRING","setLinkType",137],"(",["T_VARIABLE","$resourceData",137],["T_OBJECT_OPERATOR","->",137],["T_STRING","getLinkType",137],"(",")",")",";",["T_WHITESPACE","\n        ",137],["T_VARIABLE","$link",138],["T_OBJECT_OPERATOR","->",138],["T_STRING","setLinkFile",138],"(",["T_VARIABLE","$resourceData",138],["T_OBJECT_OPERATOR","->",138],["T_STRING","getLinkFile",138],"(",")",")",";",["T_WHITESPACE","\n        ",138],["T_VARIABLE","$link",139],["T_OBJECT_OPERATOR","->",139],["T_STRING","setLinkUrl",139],"(",["T_VARIABLE","$resourceData",139],["T_OBJECT_OPERATOR","->",139],["T_STRING","getLinkUrl",139],"(",")",")",";",["T_WHITESPACE","\n\n        ",139],["T_RETURN","return",141],["T_WHITESPACE"," ",141],["T_VARIABLE","$link",141],";",["T_WHITESPACE","\n    ",141],"}",["T_WHITESPACE","\n\n    ",142],["T_DOC_COMMENT","\/**\n     * Subroutine for build link\n     *\n     * @param \\Magento\\Downloadable\\Model\\Link $resourceData\n     * @param \\Magento\\Downloadable\\Api\\Data\\LinkInterface $dataObject\n     * @return null\n     *\/",144],["T_WHITESPACE","\n    ",150],["T_PROTECTED","protected",151],["T_WHITESPACE"," ",151],["T_FUNCTION","function",151],["T_WHITESPACE"," ",151],["T_STRING","setBasicFields",151],"(",["T_VARIABLE","$resourceData",151],",",["T_WHITESPACE"," ",151],["T_VARIABLE","$dataObject",151],")",["T_WHITESPACE","\n    ",151],"{",["T_WHITESPACE","\n        ",152],["T_VARIABLE","$dataObject",153],["T_OBJECT_OPERATOR","->",153],["T_STRING","setId",153],"(",["T_VARIABLE","$resourceData",153],["T_OBJECT_OPERATOR","->",153],["T_STRING","getId",153],"(",")",")",";",["T_WHITESPACE","\n        ",153],["T_VARIABLE","$storeTitle",154],["T_WHITESPACE"," ",154],"=",["T_WHITESPACE"," ",154],["T_VARIABLE","$resourceData",154],["T_OBJECT_OPERATOR","->",154],["T_STRING","getStoreTitle",154],"(",")",";",["T_WHITESPACE","\n        ",154],["T_VARIABLE","$title",155],["T_WHITESPACE"," ",155],"=",["T_WHITESPACE"," ",155],["T_VARIABLE","$resourceData",155],["T_OBJECT_OPERATOR","->",155],["T_STRING","getTitle",155],"(",")",";",["T_WHITESPACE","\n        ",155],["T_IF","if",156],["T_WHITESPACE"," ",156],"(","!",["T_EMPTY","empty",156],"(",["T_VARIABLE","$storeTitle",156],")",")",["T_WHITESPACE"," ",156],"{",["T_WHITESPACE","\n            ",156],["T_VARIABLE","$dataObject",157],["T_OBJECT_OPERATOR","->",157],["T_STRING","setTitle",157],"(",["T_VARIABLE","$storeTitle",157],")",";",["T_WHITESPACE","\n        ",157],"}",["T_WHITESPACE"," ",158],["T_ELSE","else",158],["T_WHITESPACE"," ",158],"{",["T_WHITESPACE","\n            ",158],["T_VARIABLE","$dataObject",159],["T_OBJECT_OPERATOR","->",159],["T_STRING","setTitle",159],"(",["T_VARIABLE","$title",159],")",";",["T_WHITESPACE","\n        ",159],"}",["T_WHITESPACE","\n        ",160],["T_VARIABLE","$dataObject",161],["T_OBJECT_OPERATOR","->",161],["T_STRING","setSortOrder",161],"(",["T_VARIABLE","$resourceData",161],["T_OBJECT_OPERATOR","->",161],["T_STRING","getSortOrder",161],"(",")",")",";",["T_WHITESPACE","\n        ",161],["T_VARIABLE","$dataObject",162],["T_OBJECT_OPERATOR","->",162],["T_STRING","setSampleType",162],"(",["T_VARIABLE","$resourceData",162],["T_OBJECT_OPERATOR","->",162],["T_STRING","getSampleType",162],"(",")",")",";",["T_WHITESPACE","\n        ",162],["T_VARIABLE","$dataObject",163],["T_OBJECT_OPERATOR","->",163],["T_STRING","setSampleFile",163],"(",["T_VARIABLE","$resourceData",163],["T_OBJECT_OPERATOR","->",163],["T_STRING","getSampleFile",163],"(",")",")",";",["T_WHITESPACE","\n        ",163],["T_VARIABLE","$dataObject",164],["T_OBJECT_OPERATOR","->",164],["T_STRING","setSampleUrl",164],"(",["T_VARIABLE","$resourceData",164],["T_OBJECT_OPERATOR","->",164],["T_STRING","getSampleUrl",164],"(",")",")",";",["T_WHITESPACE","\n    ",164],"}",["T_WHITESPACE","\n\n    ",165],["T_DOC_COMMENT","\/**\n     * {@inheritdoc}\n     * @SuppressWarnings(PHPMD.CyclomaticComplexity)\n     * @SuppressWarnings(PHPMD.NPathComplexity)\n     *\/",167],["T_WHITESPACE","\n    ",171],["T_PUBLIC","public",172],["T_WHITESPACE"," ",172],["T_FUNCTION","function",172],["T_WHITESPACE"," ",172],["T_STRING","save",172],"(",["T_VARIABLE","$sku",172],",",["T_WHITESPACE"," ",172],["T_STRING","LinkInterface",172],["T_WHITESPACE"," ",172],["T_VARIABLE","$link",172],",",["T_WHITESPACE"," ",172],["T_VARIABLE","$isGlobalScopeContent",172],["T_WHITESPACE"," ",172],"=",["T_WHITESPACE"," ",172],["T_STRING","true",172],")",["T_WHITESPACE","\n    ",172],"{",["T_WHITESPACE","\n        ",173],["T_VARIABLE","$product",174],["T_WHITESPACE"," ",174],"=",["T_WHITESPACE"," ",174],["T_VARIABLE","$this",174],["T_OBJECT_OPERATOR","->",174],["T_STRING","productRepository",174],["T_OBJECT_OPERATOR","->",174],["T_STRING","get",174],"(",["T_VARIABLE","$sku",174],",",["T_WHITESPACE"," ",174],["T_STRING","true",174],")",";",["T_WHITESPACE","\n        ",174],["T_IF","if",175],["T_WHITESPACE"," ",175],"(",["T_VARIABLE","$link",175],["T_OBJECT_OPERATOR","->",175],["T_STRING","getId",175],"(",")",["T_WHITESPACE"," ",175],["T_IS_NOT_IDENTICAL","!==",175],["T_WHITESPACE"," ",175],["T_STRING","null",175],")",["T_WHITESPACE"," ",175],"{",["T_WHITESPACE","\n            ",175],["T_RETURN","return",176],["T_WHITESPACE"," ",176],["T_VARIABLE","$this",176],["T_OBJECT_OPERATOR","->",176],["T_STRING","updateLink",176],"(",["T_VARIABLE","$product",176],",",["T_WHITESPACE"," ",176],["T_VARIABLE","$link",176],",",["T_WHITESPACE"," ",176],["T_VARIABLE","$isGlobalScopeContent",176],")",";",["T_WHITESPACE","\n        ",176],"}",["T_WHITESPACE"," ",177],["T_ELSE","else",177],["T_WHITESPACE"," ",177],"{",["T_WHITESPACE","\n            ",177],["T_IF","if",178],["T_WHITESPACE"," ",178],"(",["T_VARIABLE","$product",178],["T_OBJECT_OPERATOR","->",178],["T_STRING","getTypeId",178],"(",")",["T_WHITESPACE"," ",178],["T_IS_NOT_IDENTICAL","!==",178],["T_WHITESPACE"," ",178],["T_NS_SEPARATOR","\\",178],["T_STRING","Magento",178],["T_NS_SEPARATOR","\\",178],["T_STRING","Downloadable",178],["T_NS_SEPARATOR","\\",178],["T_STRING","Model",178],["T_NS_SEPARATOR","\\",178],["T_STRING","Product",178],["T_NS_SEPARATOR","\\",178],["T_STRING","Type",178],["T_DOUBLE_COLON","::",178],["T_STRING","TYPE_DOWNLOADABLE",178],")",["T_WHITESPACE"," ",178],"{",["T_WHITESPACE","\n                ",178],["T_THROW","throw",179],["T_WHITESPACE"," ",179],["T_NEW","new",179],["T_WHITESPACE"," ",179],["T_STRING","InputException",179],"(",["T_STRING","__",179],"(",["T_CONSTANT_ENCAPSED_STRING","'Provided product must be type \\'downloadable\\'.'",179],")",")",";",["T_WHITESPACE","\n            ",179],"}",["T_WHITESPACE","\n            ",180],["T_VARIABLE","$validateLinkContent",181],["T_WHITESPACE"," ",181],"=",["T_WHITESPACE"," ",181],"!","(",["T_VARIABLE","$link",181],["T_OBJECT_OPERATOR","->",181],["T_STRING","getLinkType",181],"(",")",["T_WHITESPACE"," ",181],["T_IS_IDENTICAL","===",181],["T_WHITESPACE"," ",181],["T_CONSTANT_ENCAPSED_STRING","'file'",181],["T_WHITESPACE"," ",181],["T_BOOLEAN_AND","&&",181],["T_WHITESPACE"," ",181],["T_VARIABLE","$link",181],["T_OBJECT_OPERATOR","->",181],["T_STRING","getLinkFile",181],"(",")",")",";",["T_WHITESPACE","\n            ",181],["T_VARIABLE","$validateSampleContent",182],["T_WHITESPACE"," ",182],"=",["T_WHITESPACE"," ",182],"!","(",["T_VARIABLE","$link",182],["T_OBJECT_OPERATOR","->",182],["T_STRING","getSampleType",182],"(",")",["T_WHITESPACE"," ",182],["T_IS_IDENTICAL","===",182],["T_WHITESPACE"," ",182],["T_CONSTANT_ENCAPSED_STRING","'file'",182],["T_WHITESPACE"," ",182],["T_BOOLEAN_AND","&&",182],["T_WHITESPACE"," ",182],["T_VARIABLE","$link",182],["T_OBJECT_OPERATOR","->",182],["T_STRING","getSampleFile",182],"(",")",")",";",["T_WHITESPACE","\n            ",182],["T_IF","if",183],["T_WHITESPACE"," ",183],"(","!",["T_VARIABLE","$this",183],["T_OBJECT_OPERATOR","->",183],["T_STRING","contentValidator",183],["T_OBJECT_OPERATOR","->",183],["T_STRING","isValid",183],"(",["T_VARIABLE","$link",183],",",["T_WHITESPACE"," ",183],["T_VARIABLE","$validateLinkContent",183],",",["T_WHITESPACE"," ",183],["T_VARIABLE","$validateSampleContent",183],")",")",["T_WHITESPACE"," ",183],"{",["T_WHITESPACE","\n                ",183],["T_THROW","throw",184],["T_WHITESPACE"," ",184],["T_NEW","new",184],["T_WHITESPACE"," ",184],["T_STRING","InputException",184],"(",["T_STRING","__",184],"(",["T_CONSTANT_ENCAPSED_STRING","'Provided link information is invalid.'",184],")",")",";",["T_WHITESPACE","\n            ",184],"}",["T_WHITESPACE","\n\n            ",185],["T_IF","if",187],["T_WHITESPACE"," ",187],"(","!",["T_STRING","in_array",187],"(",["T_VARIABLE","$link",187],["T_OBJECT_OPERATOR","->",187],["T_STRING","getLinkType",187],"(",")",",",["T_WHITESPACE"," ",187],"[",["T_CONSTANT_ENCAPSED_STRING","'url'",187],",",["T_WHITESPACE"," ",187],["T_CONSTANT_ENCAPSED_STRING","'file'",187],"]",",",["T_WHITESPACE"," ",187],["T_STRING","true",187],")",")",["T_WHITESPACE"," ",187],"{",["T_WHITESPACE","\n                ",187],["T_THROW","throw",188],["T_WHITESPACE"," ",188],["T_NEW","new",188],["T_WHITESPACE"," ",188],["T_STRING","InputException",188],"(",["T_STRING","__",188],"(",["T_CONSTANT_ENCAPSED_STRING","'Invalid link type.'",188],")",")",";",["T_WHITESPACE","\n            ",188],"}",["T_WHITESPACE","\n            ",189],["T_VARIABLE","$title",190],["T_WHITESPACE"," ",190],"=",["T_WHITESPACE"," ",190],["T_VARIABLE","$link",190],["T_OBJECT_OPERATOR","->",190],["T_STRING","getTitle",190],"(",")",";",["T_WHITESPACE","\n            ",190],["T_IF","if",191],["T_WHITESPACE"," ",191],"(",["T_EMPTY","empty",191],"(",["T_VARIABLE","$title",191],")",")",["T_WHITESPACE"," ",191],"{",["T_WHITESPACE","\n                ",191],["T_THROW","throw",192],["T_WHITESPACE"," ",192],["T_NEW","new",192],["T_WHITESPACE"," ",192],["T_STRING","InputException",192],"(",["T_STRING","__",192],"(",["T_CONSTANT_ENCAPSED_STRING","'Link title cannot be empty.'",192],")",")",";",["T_WHITESPACE","\n            ",192],"}",["T_WHITESPACE","\n            ",193],["T_RETURN","return",194],["T_WHITESPACE"," ",194],["T_VARIABLE","$this",194],["T_OBJECT_OPERATOR","->",194],["T_STRING","saveLink",194],"(",["T_VARIABLE","$product",194],",",["T_WHITESPACE"," ",194],["T_VARIABLE","$link",194],",",["T_WHITESPACE"," ",194],["T_VARIABLE","$isGlobalScopeContent",194],")",";",["T_WHITESPACE","\n        ",194],"}",["T_WHITESPACE","\n    ",195],"}",["T_WHITESPACE","\n\n    ",196],["T_DOC_COMMENT","\/**\n     * @param \\Magento\\Catalog\\Api\\Data\\ProductInterface $product\n     * @param LinkInterface $link\n     * @param bool $isGlobalScopeContent\n     * @return int\n     *\/",198],["T_WHITESPACE","\n    ",203],["T_PROTECTED","protected",204],["T_WHITESPACE"," ",204],["T_FUNCTION","function",204],["T_WHITESPACE"," ",204],["T_STRING","saveLink",204],"(",["T_WHITESPACE","\n        ",204],["T_NS_SEPARATOR","\\",205],["T_STRING","Magento",205],["T_NS_SEPARATOR","\\",205],["T_STRING","Catalog",205],["T_NS_SEPARATOR","\\",205],["T_STRING","Api",205],["T_NS_SEPARATOR","\\",205],["T_STRING","Data",205],["T_NS_SEPARATOR","\\",205],["T_STRING","ProductInterface",205],["T_WHITESPACE"," ",205],["T_VARIABLE","$product",205],",",["T_WHITESPACE","\n        ",205],["T_STRING","LinkInterface",206],["T_WHITESPACE"," ",206],["T_VARIABLE","$link",206],",",["T_WHITESPACE","\n        ",206],["T_VARIABLE","$isGlobalScopeContent",207],["T_WHITESPACE","\n    ",207],")",["T_WHITESPACE"," ",208],"{",["T_WHITESPACE","\n        ",208],["T_VARIABLE","$linkData",209],["T_WHITESPACE"," ",209],"=",["T_WHITESPACE"," ",209],"[",["T_WHITESPACE","\n            ",209],["T_CONSTANT_ENCAPSED_STRING","'link_id'",210],["T_WHITESPACE"," ",210],["T_DOUBLE_ARROW","=>",210],["T_WHITESPACE"," ",210],["T_INT_CAST","(int)",210],["T_VARIABLE","$link",210],["T_OBJECT_OPERATOR","->",210],["T_STRING","getid",210],"(",")",",",["T_WHITESPACE","\n            ",210],["T_CONSTANT_ENCAPSED_STRING","'is_delete'",211],["T_WHITESPACE"," ",211],["T_DOUBLE_ARROW","=>",211],["T_WHITESPACE"," ",211],["T_LNUMBER","0",211],",",["T_WHITESPACE","\n            ",211],["T_CONSTANT_ENCAPSED_STRING","'type'",212],["T_WHITESPACE"," ",212],["T_DOUBLE_ARROW","=>",212],["T_WHITESPACE"," ",212],["T_VARIABLE","$link",212],["T_OBJECT_OPERATOR","->",212],["T_STRING","getLinkType",212],"(",")",",",["T_WHITESPACE","\n            ",212],["T_CONSTANT_ENCAPSED_STRING","'sort_order'",213],["T_WHITESPACE"," ",213],["T_DOUBLE_ARROW","=>",213],["T_WHITESPACE"," ",213],["T_VARIABLE","$link",213],["T_OBJECT_OPERATOR","->",213],["T_STRING","getSortOrder",213],"(",")",",",["T_WHITESPACE","\n            ",213],["T_CONSTANT_ENCAPSED_STRING","'title'",214],["T_WHITESPACE"," ",214],["T_DOUBLE_ARROW","=>",214],["T_WHITESPACE"," ",214],["T_VARIABLE","$link",214],["T_OBJECT_OPERATOR","->",214],["T_STRING","getTitle",214],"(",")",",",["T_WHITESPACE","\n            ",214],["T_CONSTANT_ENCAPSED_STRING","'price'",215],["T_WHITESPACE"," ",215],["T_DOUBLE_ARROW","=>",215],["T_WHITESPACE"," ",215],["T_VARIABLE","$link",215],["T_OBJECT_OPERATOR","->",215],["T_STRING","getPrice",215],"(",")",",",["T_WHITESPACE","\n            ",215],["T_CONSTANT_ENCAPSED_STRING","'number_of_downloads'",216],["T_WHITESPACE"," ",216],["T_DOUBLE_ARROW","=>",216],["T_WHITESPACE"," ",216],["T_VARIABLE","$link",216],["T_OBJECT_OPERATOR","->",216],["T_STRING","getNumberOfDownloads",216],"(",")",",",["T_WHITESPACE","\n            ",216],["T_CONSTANT_ENCAPSED_STRING","'is_shareable'",217],["T_WHITESPACE"," ",217],["T_DOUBLE_ARROW","=>",217],["T_WHITESPACE"," ",217],["T_VARIABLE","$link",217],["T_OBJECT_OPERATOR","->",217],["T_STRING","getIsShareable",217],"(",")",",",["T_WHITESPACE","\n        ",217],"]",";",["T_WHITESPACE","\n\n        ",218],["T_IF","if",220],["T_WHITESPACE"," ",220],"(",["T_VARIABLE","$link",220],["T_OBJECT_OPERATOR","->",220],["T_STRING","getLinkType",220],"(",")",["T_WHITESPACE"," ",220],["T_IS_EQUAL","==",220],["T_WHITESPACE"," ",220],["T_CONSTANT_ENCAPSED_STRING","'file'",220],["T_WHITESPACE"," ",220],["T_BOOLEAN_AND","&&",220],["T_WHITESPACE"," ",220],["T_VARIABLE","$link",220],["T_OBJECT_OPERATOR","->",220],["T_STRING","getLinkFile",220],"(",")",["T_WHITESPACE"," ",220],["T_IS_IDENTICAL","===",220],["T_WHITESPACE"," ",220],["T_STRING","null",220],")",["T_WHITESPACE"," ",220],"{",["T_WHITESPACE","\n            ",220],["T_VARIABLE","$linkData",221],"[",["T_CONSTANT_ENCAPSED_STRING","'file'",221],"]",["T_WHITESPACE"," ",221],"=",["T_WHITESPACE"," ",221],["T_VARIABLE","$this",221],["T_OBJECT_OPERATOR","->",221],["T_STRING","jsonEncoder",221],["T_OBJECT_OPERATOR","->",221],["T_STRING","encode",221],"(",["T_WHITESPACE","\n                ",221],"[",["T_WHITESPACE","\n                    ",222],["T_VARIABLE","$this",223],["T_OBJECT_OPERATOR","->",223],["T_STRING","fileContentUploader",223],["T_OBJECT_OPERATOR","->",223],["T_STRING","upload",223],"(",["T_VARIABLE","$link",223],["T_OBJECT_OPERATOR","->",223],["T_STRING","getLinkFileContent",223],"(",")",",",["T_WHITESPACE"," ",223],["T_CONSTANT_ENCAPSED_STRING","'link_file'",223],")",",",["T_WHITESPACE","\n                ",223],"]",["T_WHITESPACE","\n            ",224],")",";",["T_WHITESPACE","\n        ",225],"}",["T_WHITESPACE"," ",226],["T_ELSEIF","elseif",226],["T_WHITESPACE"," ",226],"(",["T_VARIABLE","$link",226],["T_OBJECT_OPERATOR","->",226],["T_STRING","getLinkType",226],"(",")",["T_WHITESPACE"," ",226],["T_IS_IDENTICAL","===",226],["T_WHITESPACE"," ",226],["T_CONSTANT_ENCAPSED_STRING","'url'",226],")",["T_WHITESPACE"," ",226],"{",["T_WHITESPACE","\n            ",226],["T_VARIABLE","$linkData",227],"[",["T_CONSTANT_ENCAPSED_STRING","'link_url'",227],"]",["T_WHITESPACE"," ",227],"=",["T_WHITESPACE"," ",227],["T_VARIABLE","$link",227],["T_OBJECT_OPERATOR","->",227],["T_STRING","getLinkUrl",227],"(",")",";",["T_WHITESPACE","\n        ",227],"}",["T_WHITESPACE"," ",228],["T_ELSE","else",228],["T_WHITESPACE"," ",228],"{",["T_WHITESPACE","\n            ",228],["T_COMMENT","\/\/existing link file\n",229],["T_WHITESPACE","            ",230],["T_VARIABLE","$linkData",230],"[",["T_CONSTANT_ENCAPSED_STRING","'file'",230],"]",["T_WHITESPACE"," ",230],"=",["T_WHITESPACE"," ",230],["T_VARIABLE","$this",230],["T_OBJECT_OPERATOR","->",230],["T_STRING","jsonEncoder",230],["T_OBJECT_OPERATOR","->",230],["T_STRING","encode",230],"(",["T_WHITESPACE","\n                ",230],"[",["T_WHITESPACE","\n                    ",231],"[",["T_WHITESPACE","\n                        ",232],["T_CONSTANT_ENCAPSED_STRING","'file'",233],["T_WHITESPACE"," ",233],["T_DOUBLE_ARROW","=>",233],["T_WHITESPACE"," ",233],["T_VARIABLE","$link",233],["T_OBJECT_OPERATOR","->",233],["T_STRING","getLinkFile",233],"(",")",",",["T_WHITESPACE","\n                        ",233],["T_CONSTANT_ENCAPSED_STRING","'status'",234],["T_WHITESPACE"," ",234],["T_DOUBLE_ARROW","=>",234],["T_WHITESPACE"," ",234],["T_CONSTANT_ENCAPSED_STRING","'old'",234],",",["T_WHITESPACE","\n                    ",234],"]",["T_WHITESPACE","\n                ",235],"]",["T_WHITESPACE","\n            ",236],")",";",["T_WHITESPACE","\n        ",237],"}",["T_WHITESPACE","\n\n        ",238],["T_IF","if",240],["T_WHITESPACE"," ",240],"(",["T_VARIABLE","$link",240],["T_OBJECT_OPERATOR","->",240],["T_STRING","getSampleType",240],"(",")",["T_WHITESPACE"," ",240],["T_IS_EQUAL","==",240],["T_WHITESPACE"," ",240],["T_CONSTANT_ENCAPSED_STRING","'file'",240],")",["T_WHITESPACE"," ",240],"{",["T_WHITESPACE","\n            ",240],["T_VARIABLE","$linkData",241],"[",["T_CONSTANT_ENCAPSED_STRING","'sample'",241],"]","[",["T_CONSTANT_ENCAPSED_STRING","'type'",241],"]",["T_WHITESPACE"," ",241],"=",["T_WHITESPACE"," ",241],["T_CONSTANT_ENCAPSED_STRING","'file'",241],";",["T_WHITESPACE","\n            ",241],["T_IF","if",242],["T_WHITESPACE"," ",242],"(",["T_VARIABLE","$link",242],["T_OBJECT_OPERATOR","->",242],["T_STRING","getSampleFile",242],"(",")",["T_WHITESPACE"," ",242],["T_IS_IDENTICAL","===",242],["T_WHITESPACE"," ",242],["T_STRING","null",242],")",["T_WHITESPACE"," ",242],"{",["T_WHITESPACE","\n                ",242],["T_VARIABLE","$fileData",243],["T_WHITESPACE"," ",243],"=",["T_WHITESPACE"," ",243],"[",["T_WHITESPACE","\n                    ",243],["T_VARIABLE","$this",244],["T_OBJECT_OPERATOR","->",244],["T_STRING","fileContentUploader",244],["T_OBJECT_OPERATOR","->",244],["T_STRING","upload",244],"(",["T_VARIABLE","$link",244],["T_OBJECT_OPERATOR","->",244],["T_STRING","getSampleFileContent",244],"(",")",",",["T_WHITESPACE"," ",244],["T_CONSTANT_ENCAPSED_STRING","'link_sample_file'",244],")",",",["T_WHITESPACE","\n                ",244],"]",";",["T_WHITESPACE","\n            ",245],"}",["T_WHITESPACE"," ",246],["T_ELSE","else",246],["T_WHITESPACE"," ",246],"{",["T_WHITESPACE","\n                ",246],["T_VARIABLE","$fileData",247],["T_WHITESPACE"," ",247],"=",["T_WHITESPACE"," ",247],"[",["T_WHITESPACE","\n                    ",247],"[",["T_WHITESPACE","\n                        ",248],["T_CONSTANT_ENCAPSED_STRING","'file'",249],["T_WHITESPACE"," ",249],["T_DOUBLE_ARROW","=>",249],["T_WHITESPACE"," ",249],["T_VARIABLE","$link",249],["T_OBJECT_OPERATOR","->",249],["T_STRING","getSampleFile",249],"(",")",",",["T_WHITESPACE","\n                        ",249],["T_CONSTANT_ENCAPSED_STRING","'status'",250],["T_WHITESPACE"," ",250],["T_DOUBLE_ARROW","=>",250],["T_WHITESPACE"," ",250],["T_CONSTANT_ENCAPSED_STRING","'old'",250],",",["T_WHITESPACE","\n                    ",250],"]",["T_WHITESPACE","\n                ",251],"]",";",["T_WHITESPACE","\n            ",252],"}",["T_WHITESPACE","\n            ",253],["T_VARIABLE","$linkData",254],"[",["T_CONSTANT_ENCAPSED_STRING","'sample'",254],"]","[",["T_CONSTANT_ENCAPSED_STRING","'file'",254],"]",["T_WHITESPACE"," ",254],"=",["T_WHITESPACE"," ",254],["T_VARIABLE","$this",254],["T_OBJECT_OPERATOR","->",254],["T_STRING","jsonEncoder",254],["T_OBJECT_OPERATOR","->",254],["T_STRING","encode",254],"(",["T_VARIABLE","$fileData",254],")",";",["T_WHITESPACE","\n        ",254],"}",["T_WHITESPACE"," ",255],["T_ELSEIF","elseif",255],["T_WHITESPACE"," ",255],"(",["T_VARIABLE","$link",255],["T_OBJECT_OPERATOR","->",255],["T_STRING","getSampleType",255],"(",")",["T_WHITESPACE"," ",255],["T_IS_EQUAL","==",255],["T_WHITESPACE"," ",255],["T_CONSTANT_ENCAPSED_STRING","'url'",255],")",["T_WHITESPACE"," ",255],"{",["T_WHITESPACE","\n            ",255],["T_VARIABLE","$linkData",256],"[",["T_CONSTANT_ENCAPSED_STRING","'sample'",256],"]","[",["T_CONSTANT_ENCAPSED_STRING","'type'",256],"]",["T_WHITESPACE"," ",256],"=",["T_WHITESPACE"," ",256],["T_CONSTANT_ENCAPSED_STRING","'url'",256],";",["T_WHITESPACE","\n            ",256],["T_VARIABLE","$linkData",257],"[",["T_CONSTANT_ENCAPSED_STRING","'sample'",257],"]","[",["T_CONSTANT_ENCAPSED_STRING","'url'",257],"]",["T_WHITESPACE"," ",257],"=",["T_WHITESPACE"," ",257],["T_VARIABLE","$link",257],["T_OBJECT_OPERATOR","->",257],["T_STRING","getSampleUrl",257],"(",")",";",["T_WHITESPACE","\n        ",257],"}",["T_WHITESPACE","\n\n        ",258],["T_VARIABLE","$downloadableData",260],["T_WHITESPACE"," ",260],"=",["T_WHITESPACE"," ",260],"[",["T_CONSTANT_ENCAPSED_STRING","'link'",260],["T_WHITESPACE"," ",260],["T_DOUBLE_ARROW","=>",260],["T_WHITESPACE"," ",260],"[",["T_VARIABLE","$linkData",260],"]","]",";",["T_WHITESPACE","\n        ",260],["T_IF","if",261],["T_WHITESPACE"," ",261],"(",["T_VARIABLE","$isGlobalScopeContent",261],")",["T_WHITESPACE"," ",261],"{",["T_WHITESPACE","\n            ",261],["T_VARIABLE","$product",262],["T_OBJECT_OPERATOR","->",262],["T_STRING","setStoreId",262],"(",["T_LNUMBER","0",262],")",";",["T_WHITESPACE","\n        ",262],"}",["T_WHITESPACE","\n        ",263],["T_VARIABLE","$this",264],["T_OBJECT_OPERATOR","->",264],["T_STRING","getLinkTypeHandler",264],"(",")",["T_OBJECT_OPERATOR","->",264],["T_STRING","save",264],"(",["T_VARIABLE","$product",264],",",["T_WHITESPACE"," ",264],["T_VARIABLE","$downloadableData",264],")",";",["T_WHITESPACE","\n        ",264],["T_RETURN","return",265],["T_WHITESPACE"," ",265],["T_VARIABLE","$product",265],["T_OBJECT_OPERATOR","->",265],["T_STRING","getLastAddedLinkId",265],"(",")",";",["T_WHITESPACE","\n    ",265],"}",["T_WHITESPACE","\n\n    ",266],["T_DOC_COMMENT","\/**\n     * @param \\Magento\\Catalog\\Api\\Data\\ProductInterface $product\n     * @param LinkInterface $link\n     * @param bool $isGlobalScopeContent\n     * @return mixed\n     * @throws InputException\n     * @throws NoSuchEntityException\n     * @SuppressWarnings(PHPMD.CyclomaticComplexity)\n     * @SuppressWarnings(PHPMD.NPathComplexity)\n     *\/",268],["T_WHITESPACE","\n    ",277],["T_PROTECTED","protected",278],["T_WHITESPACE"," ",278],["T_FUNCTION","function",278],["T_WHITESPACE"," ",278],["T_STRING","updateLink",278],"(",["T_WHITESPACE","\n        ",278],["T_NS_SEPARATOR","\\",279],["T_STRING","Magento",279],["T_NS_SEPARATOR","\\",279],["T_STRING","Catalog",279],["T_NS_SEPARATOR","\\",279],["T_STRING","Api",279],["T_NS_SEPARATOR","\\",279],["T_STRING","Data",279],["T_NS_SEPARATOR","\\",279],["T_STRING","ProductInterface",279],["T_WHITESPACE"," ",279],["T_VARIABLE","$product",279],",",["T_WHITESPACE","\n        ",279],["T_STRING","LinkInterface",280],["T_WHITESPACE"," ",280],["T_VARIABLE","$link",280],",",["T_WHITESPACE","\n        ",280],["T_VARIABLE","$isGlobalScopeContent",281],["T_WHITESPACE","\n    ",281],")",["T_WHITESPACE"," ",282],"{",["T_WHITESPACE","\n        ",282],["T_DOC_COMMENT","\/** @var $existingLink \\Magento\\Downloadable\\Model\\Link *\/",283],["T_WHITESPACE","\n        ",283],["T_VARIABLE","$existingLink",284],["T_WHITESPACE"," ",284],"=",["T_WHITESPACE"," ",284],["T_VARIABLE","$this",284],["T_OBJECT_OPERATOR","->",284],["T_STRING","linkFactory",284],["T_OBJECT_OPERATOR","->",284],["T_STRING","create",284],"(",")",["T_OBJECT_OPERATOR","->",284],["T_STRING","load",284],"(",["T_VARIABLE","$link",284],["T_OBJECT_OPERATOR","->",284],["T_STRING","getId",284],"(",")",")",";",["T_WHITESPACE","\n        ",284],["T_IF","if",285],["T_WHITESPACE"," ",285],"(","!",["T_VARIABLE","$existingLink",285],["T_OBJECT_OPERATOR","->",285],["T_STRING","getId",285],"(",")",")",["T_WHITESPACE"," ",285],"{",["T_WHITESPACE","\n            ",285],["T_THROW","throw",286],["T_WHITESPACE"," ",286],["T_NEW","new",286],["T_WHITESPACE"," ",286],["T_STRING","NoSuchEntityException",286],"(",["T_STRING","__",286],"(",["T_CONSTANT_ENCAPSED_STRING","'There is no downloadable link with provided ID.'",286],")",")",";",["T_WHITESPACE","\n        ",286],"}",["T_WHITESPACE","\n        ",287],["T_VARIABLE","$linkFieldValue",288],["T_WHITESPACE"," ",288],"=",["T_WHITESPACE"," ",288],["T_VARIABLE","$product",288],["T_OBJECT_OPERATOR","->",288],["T_STRING","getData",288],"(",["T_WHITESPACE","\n            ",288],["T_VARIABLE","$this",289],["T_OBJECT_OPERATOR","->",289],["T_STRING","getMetadataPool",289],"(",")",["T_OBJECT_OPERATOR","->",289],["T_STRING","getMetadata",289],"(",["T_STRING","ProductInterface",289],["T_DOUBLE_COLON","::",289],["T_CLASS","class",289],")",["T_OBJECT_OPERATOR","->",289],["T_STRING","getLinkField",289],"(",")",["T_WHITESPACE","\n        ",289],")",";",["T_WHITESPACE","\n        ",290],["T_IF","if",291],["T_WHITESPACE"," ",291],"(",["T_VARIABLE","$existingLink",291],["T_OBJECT_OPERATOR","->",291],["T_STRING","getProductId",291],"(",")",["T_WHITESPACE"," ",291],["T_IS_NOT_EQUAL","!=",291],["T_WHITESPACE"," ",291],["T_VARIABLE","$linkFieldValue",291],")",["T_WHITESPACE"," ",291],"{",["T_WHITESPACE","\n            ",291],["T_THROW","throw",292],["T_WHITESPACE"," ",292],["T_NEW","new",292],["T_WHITESPACE"," ",292],["T_STRING","InputException",292],"(",["T_STRING","__",292],"(",["T_CONSTANT_ENCAPSED_STRING","'Provided downloadable link is not related to given product.'",292],")",")",";",["T_WHITESPACE","\n        ",292],"}",["T_WHITESPACE","\n        ",293],["T_VARIABLE","$validateLinkContent",294],["T_WHITESPACE"," ",294],"=",["T_WHITESPACE"," ",294],"!","(",["T_VARIABLE","$link",294],["T_OBJECT_OPERATOR","->",294],["T_STRING","getLinkFileContent",294],"(",")",["T_WHITESPACE"," ",294],["T_IS_IDENTICAL","===",294],["T_WHITESPACE"," ",294],["T_STRING","null",294],")",";",["T_WHITESPACE","\n        ",294],["T_VARIABLE","$validateSampleContent",295],["T_WHITESPACE"," ",295],"=",["T_WHITESPACE"," ",295],"!","(",["T_VARIABLE","$link",295],["T_OBJECT_OPERATOR","->",295],["T_STRING","getSampleFileContent",295],"(",")",["T_WHITESPACE"," ",295],["T_IS_IDENTICAL","===",295],["T_WHITESPACE"," ",295],["T_STRING","null",295],")",";",["T_WHITESPACE","\n        ",295],["T_IF","if",296],["T_WHITESPACE"," ",296],"(","!",["T_VARIABLE","$this",296],["T_OBJECT_OPERATOR","->",296],["T_STRING","contentValidator",296],["T_OBJECT_OPERATOR","->",296],["T_STRING","isValid",296],"(",["T_VARIABLE","$link",296],",",["T_WHITESPACE"," ",296],["T_VARIABLE","$validateLinkContent",296],",",["T_WHITESPACE"," ",296],["T_VARIABLE","$validateSampleContent",296],")",")",["T_WHITESPACE"," ",296],"{",["T_WHITESPACE","\n            ",296],["T_THROW","throw",297],["T_WHITESPACE"," ",297],["T_NEW","new",297],["T_WHITESPACE"," ",297],["T_STRING","InputException",297],"(",["T_STRING","__",297],"(",["T_CONSTANT_ENCAPSED_STRING","'Provided link information is invalid.'",297],")",")",";",["T_WHITESPACE","\n        ",297],"}",["T_WHITESPACE","\n        ",298],["T_IF","if",299],["T_WHITESPACE"," ",299],"(",["T_VARIABLE","$isGlobalScopeContent",299],")",["T_WHITESPACE"," ",299],"{",["T_WHITESPACE","\n            ",299],["T_VARIABLE","$product",300],["T_OBJECT_OPERATOR","->",300],["T_STRING","setStoreId",300],"(",["T_LNUMBER","0",300],")",";",["T_WHITESPACE","\n        ",300],"}",["T_WHITESPACE","\n        ",301],["T_VARIABLE","$title",302],["T_WHITESPACE"," ",302],"=",["T_WHITESPACE"," ",302],["T_VARIABLE","$link",302],["T_OBJECT_OPERATOR","->",302],["T_STRING","getTitle",302],"(",")",";",["T_WHITESPACE","\n        ",302],["T_IF","if",303],["T_WHITESPACE"," ",303],"(",["T_EMPTY","empty",303],"(",["T_VARIABLE","$title",303],")",")",["T_WHITESPACE"," ",303],"{",["T_WHITESPACE","\n            ",303],["T_IF","if",304],["T_WHITESPACE"," ",304],"(",["T_VARIABLE","$isGlobalScopeContent",304],")",["T_WHITESPACE"," ",304],"{",["T_WHITESPACE","\n                ",304],["T_THROW","throw",305],["T_WHITESPACE"," ",305],["T_NEW","new",305],["T_WHITESPACE"," ",305],["T_STRING","InputException",305],"(",["T_STRING","__",305],"(",["T_CONSTANT_ENCAPSED_STRING","'Link title cannot be empty.'",305],")",")",";",["T_WHITESPACE","\n            ",305],"}",["T_WHITESPACE","\n        ",306],"}",["T_WHITESPACE","\n\n        ",307],["T_IF","if",309],["T_WHITESPACE"," ",309],"(",["T_VARIABLE","$link",309],["T_OBJECT_OPERATOR","->",309],["T_STRING","getLinkType",309],"(",")",["T_WHITESPACE"," ",309],["T_IS_EQUAL","==",309],["T_WHITESPACE"," ",309],["T_CONSTANT_ENCAPSED_STRING","'file'",309],["T_WHITESPACE"," ",309],["T_BOOLEAN_AND","&&",309],["T_WHITESPACE"," ",309],["T_VARIABLE","$link",309],["T_OBJECT_OPERATOR","->",309],["T_STRING","getLinkFileContent",309],"(",")",["T_WHITESPACE"," ",309],["T_IS_IDENTICAL","===",309],["T_WHITESPACE"," ",309],["T_STRING","null",309],["T_WHITESPACE"," ",309],["T_BOOLEAN_AND","&&",309],["T_WHITESPACE"," ",309],"!",["T_VARIABLE","$link",309],["T_OBJECT_OPERATOR","->",309],["T_STRING","getLinkFile",309],"(",")",")",["T_WHITESPACE"," ",309],"{",["T_WHITESPACE","\n            ",309],["T_VARIABLE","$link",310],["T_OBJECT_OPERATOR","->",310],["T_STRING","setLinkFile",310],"(",["T_VARIABLE","$existingLink",310],["T_OBJECT_OPERATOR","->",310],["T_STRING","getLinkFile",310],"(",")",")",";",["T_WHITESPACE","\n        ",310],"}",["T_WHITESPACE","\n        ",311],["T_IF","if",312],["T_WHITESPACE"," ",312],"(",["T_VARIABLE","$link",312],["T_OBJECT_OPERATOR","->",312],["T_STRING","getSampleType",312],"(",")",["T_WHITESPACE"," ",312],["T_IS_EQUAL","==",312],["T_WHITESPACE"," ",312],["T_CONSTANT_ENCAPSED_STRING","'file'",312],["T_WHITESPACE"," ",312],["T_BOOLEAN_AND","&&",312],["T_WHITESPACE"," ",312],["T_VARIABLE","$link",312],["T_OBJECT_OPERATOR","->",312],["T_STRING","getSampleFileContent",312],"(",")",["T_WHITESPACE"," ",312],["T_IS_IDENTICAL","===",312],["T_WHITESPACE"," ",312],["T_STRING","null",312],["T_WHITESPACE"," ",312],["T_BOOLEAN_AND","&&",312],["T_WHITESPACE"," ",312],"!",["T_VARIABLE","$link",312],["T_OBJECT_OPERATOR","->",312],["T_STRING","getSampleFile",312],"(",")",")",["T_WHITESPACE"," ",312],"{",["T_WHITESPACE","\n            ",312],["T_VARIABLE","$link",313],["T_OBJECT_OPERATOR","->",313],["T_STRING","setSampleFile",313],"(",["T_VARIABLE","$existingLink",313],["T_OBJECT_OPERATOR","->",313],["T_STRING","getSampleFile",313],"(",")",")",";",["T_WHITESPACE","\n        ",313],"}",["T_WHITESPACE","\n\n        ",314],["T_VARIABLE","$this",316],["T_OBJECT_OPERATOR","->",316],["T_STRING","saveLink",316],"(",["T_VARIABLE","$product",316],",",["T_WHITESPACE"," ",316],["T_VARIABLE","$link",316],",",["T_WHITESPACE"," ",316],["T_VARIABLE","$isGlobalScopeContent",316],")",";",["T_WHITESPACE","\n        ",316],["T_RETURN","return",317],["T_WHITESPACE"," ",317],["T_VARIABLE","$existingLink",317],["T_OBJECT_OPERATOR","->",317],["T_STRING","getId",317],"(",")",";",["T_WHITESPACE","\n    ",317],"}",["T_WHITESPACE","\n\n    ",318],["T_DOC_COMMENT","\/**\n     * {@inheritdoc}\n     *\/",320],["T_WHITESPACE","\n    ",322],["T_PUBLIC","public",323],["T_WHITESPACE"," ",323],["T_FUNCTION","function",323],["T_WHITESPACE"," ",323],["T_STRING","delete",323],"(",["T_VARIABLE","$id",323],")",["T_WHITESPACE","\n    ",323],"{",["T_WHITESPACE","\n        ",324],["T_DOC_COMMENT","\/** @var $link \\Magento\\Downloadable\\Model\\Link *\/",325],["T_WHITESPACE","\n        ",325],["T_VARIABLE","$link",326],["T_WHITESPACE"," ",326],"=",["T_WHITESPACE"," ",326],["T_VARIABLE","$this",326],["T_OBJECT_OPERATOR","->",326],["T_STRING","linkFactory",326],["T_OBJECT_OPERATOR","->",326],["T_STRING","create",326],"(",")",["T_OBJECT_OPERATOR","->",326],["T_STRING","load",326],"(",["T_VARIABLE","$id",326],")",";",["T_WHITESPACE","\n        ",326],["T_IF","if",327],["T_WHITESPACE"," ",327],"(","!",["T_VARIABLE","$link",327],["T_OBJECT_OPERATOR","->",327],["T_STRING","getId",327],"(",")",")",["T_WHITESPACE"," ",327],"{",["T_WHITESPACE","\n            ",327],["T_THROW","throw",328],["T_WHITESPACE"," ",328],["T_NEW","new",328],["T_WHITESPACE"," ",328],["T_STRING","NoSuchEntityException",328],"(",["T_STRING","__",328],"(",["T_CONSTANT_ENCAPSED_STRING","'There is no downloadable link with provided ID.'",328],")",")",";",["T_WHITESPACE","\n        ",328],"}",["T_WHITESPACE","\n        ",329],["T_TRY","try",330],["T_WHITESPACE"," ",330],"{",["T_WHITESPACE","\n            ",330],["T_VARIABLE","$link",331],["T_OBJECT_OPERATOR","->",331],["T_STRING","delete",331],"(",")",";",["T_WHITESPACE","\n        ",331],"}",["T_WHITESPACE"," ",332],["T_CATCH","catch",332],["T_WHITESPACE"," ",332],"(",["T_NS_SEPARATOR","\\",332],["T_STRING","Exception",332],["T_WHITESPACE"," ",332],["T_VARIABLE","$exception",332],")",["T_WHITESPACE"," ",332],"{",["T_WHITESPACE","\n            ",332],["T_THROW","throw",333],["T_WHITESPACE"," ",333],["T_NEW","new",333],["T_WHITESPACE"," ",333],["T_STRING","StateException",333],"(",["T_STRING","__",333],"(",["T_CONSTANT_ENCAPSED_STRING","'Cannot delete link with id %1'",333],",",["T_WHITESPACE"," ",333],["T_VARIABLE","$link",333],["T_OBJECT_OPERATOR","->",333],["T_STRING","getId",333],"(",")",")",",",["T_WHITESPACE"," ",333],["T_VARIABLE","$exception",333],")",";",["T_WHITESPACE","\n        ",333],"}",["T_WHITESPACE","\n        ",334],["T_RETURN","return",335],["T_WHITESPACE"," ",335],["T_STRING","true",335],";",["T_WHITESPACE","\n    ",335],"}",["T_WHITESPACE","\n\n    ",336],["T_DOC_COMMENT","\/**\n     * Get MetadataPool instance\n     *\n     * @deprecated MAGETWO-52273\n     * @return MetadataPool\n     *\/",338],["T_WHITESPACE","\n    ",343],["T_PRIVATE","private",344],["T_WHITESPACE"," ",344],["T_FUNCTION","function",344],["T_WHITESPACE"," ",344],["T_STRING","getMetadataPool",344],"(",")",["T_WHITESPACE","\n    ",344],"{",["T_WHITESPACE","\n        ",345],["T_IF","if",346],["T_WHITESPACE"," ",346],"(","!",["T_VARIABLE","$this",346],["T_OBJECT_OPERATOR","->",346],["T_STRING","metadataPool",346],")",["T_WHITESPACE"," ",346],"{",["T_WHITESPACE","\n            ",346],["T_VARIABLE","$this",347],["T_OBJECT_OPERATOR","->",347],["T_STRING","metadataPool",347],["T_WHITESPACE"," ",347],"=",["T_WHITESPACE"," ",347],["T_STRING","ObjectManager",347],["T_DOUBLE_COLON","::",347],["T_STRING","getInstance",347],"(",")",["T_OBJECT_OPERATOR","->",347],["T_STRING","get",347],"(",["T_STRING","MetadataPool",347],["T_DOUBLE_COLON","::",347],["T_CLASS","class",347],")",";",["T_WHITESPACE","\n        ",347],"}",["T_WHITESPACE","\n\n        ",348],["T_RETURN","return",350],["T_WHITESPACE"," ",350],["T_VARIABLE","$this",350],["T_OBJECT_OPERATOR","->",350],["T_STRING","metadataPool",350],";",["T_WHITESPACE","\n    ",350],"}",["T_WHITESPACE","\n\n    ",351],["T_DOC_COMMENT","\/**\n     * Get LinkTypeHandler  instance\n     *\n     * @deprecated MAGETWO-52273\n     * @return LinkHandler\n     *\/",353],["T_WHITESPACE","\n    ",358],["T_PRIVATE","private",359],["T_WHITESPACE"," ",359],["T_FUNCTION","function",359],["T_WHITESPACE"," ",359],["T_STRING","getLinkTypeHandler",359],"(",")",["T_WHITESPACE","\n    ",359],"{",["T_WHITESPACE","\n        ",360],["T_IF","if",361],["T_WHITESPACE"," ",361],"(","!",["T_VARIABLE","$this",361],["T_OBJECT_OPERATOR","->",361],["T_STRING","linkTypeHandler",361],")",["T_WHITESPACE"," ",361],"{",["T_WHITESPACE","\n            ",361],["T_VARIABLE","$this",362],["T_OBJECT_OPERATOR","->",362],["T_STRING","linkTypeHandler",362],["T_WHITESPACE"," ",362],"=",["T_WHITESPACE"," ",362],["T_STRING","ObjectManager",362],["T_DOUBLE_COLON","::",362],["T_STRING","getInstance",362],"(",")",["T_OBJECT_OPERATOR","->",362],["T_STRING","get",362],"(",["T_STRING","LinkHandler",362],["T_DOUBLE_COLON","::",362],["T_CLASS","class",362],")",";",["T_WHITESPACE","\n        ",362],"}",["T_WHITESPACE","\n\n        ",363],["T_RETURN","return",365],["T_WHITESPACE"," ",365],["T_VARIABLE","$this",365],["T_OBJECT_OPERATOR","->",365],["T_STRING","linkTypeHandler",365],";",["T_WHITESPACE","\n    ",365],"}",["T_WHITESPACE","\n",366],"}",["T_WHITESPACE","\n",367]]
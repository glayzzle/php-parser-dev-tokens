[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Copyright \u00c2\u00a9 2013-2017 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n *\/",2],["T_WHITESPACE","\n",5],["T_NAMESPACE","namespace",6],["T_WHITESPACE"," ",6],["T_STRING","Magento",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Downloadable",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Model",6],["T_NS_SEPARATOR","\\",6],["T_STRING","ResourceModel",6],";",["T_WHITESPACE","\n\n",6],["T_USE","use",8],["T_WHITESPACE"," ",8],["T_STRING","Magento",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Catalog",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Api",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Data",8],["T_NS_SEPARATOR","\\",8],["T_STRING","ProductInterface",8],";",["T_WHITESPACE","\n",8],["T_USE","use",9],["T_WHITESPACE"," ",9],["T_STRING","Magento",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Framework",9],["T_NS_SEPARATOR","\\",9],["T_STRING","App",9],["T_NS_SEPARATOR","\\",9],["T_STRING","ObjectManager",9],";",["T_WHITESPACE","\n",9],["T_USE","use",10],["T_WHITESPACE"," ",10],["T_STRING","Magento",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Framework",10],["T_NS_SEPARATOR","\\",10],["T_STRING","EntityManager",10],["T_NS_SEPARATOR","\\",10],["T_STRING","MetadataPool",10],";",["T_WHITESPACE","\n\n",10],["T_DOC_COMMENT","\/**\n * Downloadable Product  Samples resource model\n *\n * @author      Magento Core Team <core@magentocommerce.com>\n *\/",12],["T_WHITESPACE","\n",16],["T_CLASS","class",17],["T_WHITESPACE"," ",17],["T_STRING","Link",17],["T_WHITESPACE"," ",17],["T_EXTENDS","extends",17],["T_WHITESPACE"," ",17],["T_NS_SEPARATOR","\\",17],["T_STRING","Magento",17],["T_NS_SEPARATOR","\\",17],["T_STRING","Framework",17],["T_NS_SEPARATOR","\\",17],["T_STRING","Model",17],["T_NS_SEPARATOR","\\",17],["T_STRING","ResourceModel",17],["T_NS_SEPARATOR","\\",17],["T_STRING","Db",17],["T_NS_SEPARATOR","\\",17],["T_STRING","AbstractDb",17],["T_WHITESPACE","\n",17],"{",["T_WHITESPACE","\n    ",18],["T_DOC_COMMENT","\/**\n     * @var MetadataPool\n     *\/",19],["T_WHITESPACE","\n    ",21],["T_PRIVATE","private",22],["T_WHITESPACE"," ",22],["T_VARIABLE","$metadataPool",22],";",["T_WHITESPACE","\n\n    ",22],["T_DOC_COMMENT","\/**\n     * Catalog data\n     *\n     * @var \\Magento\\Catalog\\Helper\\Data\n     *\/",24],["T_WHITESPACE","\n    ",28],["T_PROTECTED","protected",29],["T_WHITESPACE"," ",29],["T_VARIABLE","$_catalogData",29],";",["T_WHITESPACE","\n\n    ",29],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Framework\\App\\Config\\ScopeConfigInterface\n     *\/",31],["T_WHITESPACE","\n    ",33],["T_PROTECTED","protected",34],["T_WHITESPACE"," ",34],["T_VARIABLE","$_configuration",34],";",["T_WHITESPACE","\n\n    ",34],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Directory\\Model\\CurrencyFactory\n     *\/",36],["T_WHITESPACE","\n    ",38],["T_PROTECTED","protected",39],["T_WHITESPACE"," ",39],["T_VARIABLE","$_currencyFactory",39],";",["T_WHITESPACE","\n\n    ",39],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Store\\Model\\StoreManagerInterface\n     *\/",41],["T_WHITESPACE","\n    ",43],["T_PROTECTED","protected",44],["T_WHITESPACE"," ",44],["T_VARIABLE","$_storeManager",44],";",["T_WHITESPACE","\n\n    ",44],["T_DOC_COMMENT","\/**\n     * @param \\Magento\\Framework\\Model\\ResourceModel\\Db\\Context $context\n     * @param \\Magento\\Catalog\\Helper\\Data $catalogData\n     * @param \\Magento\\Framework\\App\\Config\\ScopeConfigInterface $configuration\n     * @param \\Magento\\Directory\\Model\\CurrencyFactory $currencyFactory\n     * @param \\Magento\\Store\\Model\\StoreManagerInterface $storeManager\n     * @param string $connectionName\n     *\/",46],["T_WHITESPACE","\n    ",53],["T_PUBLIC","public",54],["T_WHITESPACE"," ",54],["T_FUNCTION","function",54],["T_WHITESPACE"," ",54],["T_STRING","__construct",54],"(",["T_WHITESPACE","\n        ",54],["T_NS_SEPARATOR","\\",55],["T_STRING","Magento",55],["T_NS_SEPARATOR","\\",55],["T_STRING","Framework",55],["T_NS_SEPARATOR","\\",55],["T_STRING","Model",55],["T_NS_SEPARATOR","\\",55],["T_STRING","ResourceModel",55],["T_NS_SEPARATOR","\\",55],["T_STRING","Db",55],["T_NS_SEPARATOR","\\",55],["T_STRING","Context",55],["T_WHITESPACE"," ",55],["T_VARIABLE","$context",55],",",["T_WHITESPACE","\n        ",55],["T_NS_SEPARATOR","\\",56],["T_STRING","Magento",56],["T_NS_SEPARATOR","\\",56],["T_STRING","Catalog",56],["T_NS_SEPARATOR","\\",56],["T_STRING","Helper",56],["T_NS_SEPARATOR","\\",56],["T_STRING","Data",56],["T_WHITESPACE"," ",56],["T_VARIABLE","$catalogData",56],",",["T_WHITESPACE","\n        ",56],["T_NS_SEPARATOR","\\",57],["T_STRING","Magento",57],["T_NS_SEPARATOR","\\",57],["T_STRING","Framework",57],["T_NS_SEPARATOR","\\",57],["T_STRING","App",57],["T_NS_SEPARATOR","\\",57],["T_STRING","Config",57],["T_NS_SEPARATOR","\\",57],["T_STRING","ScopeConfigInterface",57],["T_WHITESPACE"," ",57],["T_VARIABLE","$configuration",57],",",["T_WHITESPACE","\n        ",57],["T_NS_SEPARATOR","\\",58],["T_STRING","Magento",58],["T_NS_SEPARATOR","\\",58],["T_STRING","Directory",58],["T_NS_SEPARATOR","\\",58],["T_STRING","Model",58],["T_NS_SEPARATOR","\\",58],["T_STRING","CurrencyFactory",58],["T_WHITESPACE"," ",58],["T_VARIABLE","$currencyFactory",58],",",["T_WHITESPACE","\n        ",58],["T_NS_SEPARATOR","\\",59],["T_STRING","Magento",59],["T_NS_SEPARATOR","\\",59],["T_STRING","Store",59],["T_NS_SEPARATOR","\\",59],["T_STRING","Model",59],["T_NS_SEPARATOR","\\",59],["T_STRING","StoreManagerInterface",59],["T_WHITESPACE"," ",59],["T_VARIABLE","$storeManager",59],",",["T_WHITESPACE","\n        ",59],["T_VARIABLE","$connectionName",60],["T_WHITESPACE"," ",60],"=",["T_WHITESPACE"," ",60],["T_STRING","null",60],["T_WHITESPACE","\n    ",60],")",["T_WHITESPACE"," ",61],"{",["T_WHITESPACE","\n        ",61],["T_VARIABLE","$this",62],["T_OBJECT_OPERATOR","->",62],["T_STRING","_catalogData",62],["T_WHITESPACE"," ",62],"=",["T_WHITESPACE"," ",62],["T_VARIABLE","$catalogData",62],";",["T_WHITESPACE","\n        ",62],["T_VARIABLE","$this",63],["T_OBJECT_OPERATOR","->",63],["T_STRING","_configuration",63],["T_WHITESPACE"," ",63],"=",["T_WHITESPACE"," ",63],["T_VARIABLE","$configuration",63],";",["T_WHITESPACE","\n        ",63],["T_VARIABLE","$this",64],["T_OBJECT_OPERATOR","->",64],["T_STRING","_currencyFactory",64],["T_WHITESPACE"," ",64],"=",["T_WHITESPACE"," ",64],["T_VARIABLE","$currencyFactory",64],";",["T_WHITESPACE","\n        ",64],["T_VARIABLE","$this",65],["T_OBJECT_OPERATOR","->",65],["T_STRING","_storeManager",65],["T_WHITESPACE"," ",65],"=",["T_WHITESPACE"," ",65],["T_VARIABLE","$storeManager",65],";",["T_WHITESPACE","\n        ",65],["T_STRING","parent",66],["T_DOUBLE_COLON","::",66],["T_STRING","__construct",66],"(",["T_VARIABLE","$context",66],",",["T_WHITESPACE"," ",66],["T_VARIABLE","$connectionName",66],")",";",["T_WHITESPACE","\n    ",66],"}",["T_WHITESPACE","\n\n    ",67],["T_DOC_COMMENT","\/**\n     * Initialize connection and define resource\n     *\n     * @return void\n     *\/",69],["T_WHITESPACE","\n    ",73],["T_PROTECTED","protected",74],["T_WHITESPACE"," ",74],["T_FUNCTION","function",74],["T_WHITESPACE"," ",74],["T_STRING","_construct",74],"(",")",["T_WHITESPACE","\n    ",74],"{",["T_WHITESPACE","\n        ",75],["T_VARIABLE","$this",76],["T_OBJECT_OPERATOR","->",76],["T_STRING","_init",76],"(",["T_CONSTANT_ENCAPSED_STRING","'downloadable_link'",76],",",["T_WHITESPACE"," ",76],["T_CONSTANT_ENCAPSED_STRING","'link_id'",76],")",";",["T_WHITESPACE","\n    ",76],"}",["T_WHITESPACE","\n\n    ",77],["T_DOC_COMMENT","\/**\n     * Save title and price of link item\n     *\n     * @param \\Magento\\Downloadable\\Model\\Link $linkObject\n     * @return $this\n     * @SuppressWarnings(PHPMD.CyclomaticComplexity)\n     *\/",79],["T_WHITESPACE","\n    ",85],["T_PUBLIC","public",86],["T_WHITESPACE"," ",86],["T_FUNCTION","function",86],["T_WHITESPACE"," ",86],["T_STRING","saveItemTitleAndPrice",86],"(",["T_VARIABLE","$linkObject",86],")",["T_WHITESPACE","\n    ",86],"{",["T_WHITESPACE","\n        ",87],["T_VARIABLE","$connection",88],["T_WHITESPACE"," ",88],"=",["T_WHITESPACE"," ",88],["T_VARIABLE","$this",88],["T_OBJECT_OPERATOR","->",88],["T_STRING","getConnection",88],"(",")",";",["T_WHITESPACE","\n        ",88],["T_VARIABLE","$linkTitleTable",89],["T_WHITESPACE"," ",89],"=",["T_WHITESPACE"," ",89],["T_VARIABLE","$this",89],["T_OBJECT_OPERATOR","->",89],["T_STRING","getTable",89],"(",["T_CONSTANT_ENCAPSED_STRING","'downloadable_link_title'",89],")",";",["T_WHITESPACE","\n        ",89],["T_VARIABLE","$linkPriceTable",90],["T_WHITESPACE"," ",90],"=",["T_WHITESPACE"," ",90],["T_VARIABLE","$this",90],["T_OBJECT_OPERATOR","->",90],["T_STRING","getTable",90],"(",["T_CONSTANT_ENCAPSED_STRING","'downloadable_link_price'",90],")",";",["T_WHITESPACE","\n\n        ",90],["T_VARIABLE","$select",92],["T_WHITESPACE"," ",92],"=",["T_WHITESPACE"," ",92],["T_VARIABLE","$connection",92],["T_OBJECT_OPERATOR","->",92],["T_STRING","select",92],"(",")",["T_OBJECT_OPERATOR","->",92],["T_STRING","from",92],"(",["T_WHITESPACE","\n            ",92],["T_VARIABLE","$this",93],["T_OBJECT_OPERATOR","->",93],["T_STRING","getTable",93],"(",["T_CONSTANT_ENCAPSED_STRING","'downloadable_link_title'",93],")",["T_WHITESPACE","\n        ",93],")",["T_OBJECT_OPERATOR","->",94],["T_STRING","where",94],"(",["T_WHITESPACE","\n            ",94],["T_CONSTANT_ENCAPSED_STRING","'link_id=:link_id AND store_id=:store_id'",95],["T_WHITESPACE","\n        ",95],")",";",["T_WHITESPACE","\n        ",96],["T_VARIABLE","$bind",97],["T_WHITESPACE"," ",97],"=",["T_WHITESPACE"," ",97],"[",["T_CONSTANT_ENCAPSED_STRING","':link_id'",97],["T_WHITESPACE"," ",97],["T_DOUBLE_ARROW","=>",97],["T_WHITESPACE"," ",97],["T_VARIABLE","$linkObject",97],["T_OBJECT_OPERATOR","->",97],["T_STRING","getId",97],"(",")",",",["T_WHITESPACE"," ",97],["T_CONSTANT_ENCAPSED_STRING","':store_id'",97],["T_WHITESPACE"," ",97],["T_DOUBLE_ARROW","=>",97],["T_WHITESPACE"," ",97],["T_INT_CAST","(int)",97],["T_VARIABLE","$linkObject",97],["T_OBJECT_OPERATOR","->",97],["T_STRING","getStoreId",97],"(",")","]",";",["T_WHITESPACE","\n\n        ",97],["T_IF","if",99],["T_WHITESPACE"," ",99],"(",["T_VARIABLE","$connection",99],["T_OBJECT_OPERATOR","->",99],["T_STRING","fetchOne",99],"(",["T_VARIABLE","$select",99],",",["T_WHITESPACE"," ",99],["T_VARIABLE","$bind",99],")",")",["T_WHITESPACE"," ",99],"{",["T_WHITESPACE","\n            ",99],["T_VARIABLE","$where",100],["T_WHITESPACE"," ",100],"=",["T_WHITESPACE"," ",100],"[",["T_CONSTANT_ENCAPSED_STRING","'link_id = ?'",100],["T_WHITESPACE"," ",100],["T_DOUBLE_ARROW","=>",100],["T_WHITESPACE"," ",100],["T_VARIABLE","$linkObject",100],["T_OBJECT_OPERATOR","->",100],["T_STRING","getId",100],"(",")",",",["T_WHITESPACE"," ",100],["T_CONSTANT_ENCAPSED_STRING","'store_id = ?'",100],["T_WHITESPACE"," ",100],["T_DOUBLE_ARROW","=>",100],["T_WHITESPACE"," ",100],["T_INT_CAST","(int)",100],["T_VARIABLE","$linkObject",100],["T_OBJECT_OPERATOR","->",100],["T_STRING","getStoreId",100],"(",")","]",";",["T_WHITESPACE","\n            ",100],["T_IF","if",101],["T_WHITESPACE"," ",101],"(",["T_VARIABLE","$linkObject",101],["T_OBJECT_OPERATOR","->",101],["T_STRING","getUseDefaultTitle",101],"(",")",")",["T_WHITESPACE"," ",101],"{",["T_WHITESPACE","\n                ",101],["T_VARIABLE","$connection",102],["T_OBJECT_OPERATOR","->",102],["T_STRING","delete",102],"(",["T_VARIABLE","$linkTitleTable",102],",",["T_WHITESPACE"," ",102],["T_VARIABLE","$where",102],")",";",["T_WHITESPACE","\n            ",102],"}",["T_WHITESPACE"," ",103],["T_ELSE","else",103],["T_WHITESPACE"," ",103],"{",["T_WHITESPACE","\n                ",103],["T_VARIABLE","$insertData",104],["T_WHITESPACE"," ",104],"=",["T_WHITESPACE"," ",104],"[",["T_CONSTANT_ENCAPSED_STRING","'title'",104],["T_WHITESPACE"," ",104],["T_DOUBLE_ARROW","=>",104],["T_WHITESPACE"," ",104],["T_VARIABLE","$linkObject",104],["T_OBJECT_OPERATOR","->",104],["T_STRING","getTitle",104],"(",")","]",";",["T_WHITESPACE","\n                ",104],["T_VARIABLE","$connection",105],["T_OBJECT_OPERATOR","->",105],["T_STRING","update",105],"(",["T_VARIABLE","$linkTitleTable",105],",",["T_WHITESPACE"," ",105],["T_VARIABLE","$insertData",105],",",["T_WHITESPACE"," ",105],["T_VARIABLE","$where",105],")",";",["T_WHITESPACE","\n            ",105],"}",["T_WHITESPACE","\n        ",106],"}",["T_WHITESPACE"," ",107],["T_ELSE","else",107],["T_WHITESPACE"," ",107],"{",["T_WHITESPACE","\n            ",107],["T_IF","if",108],["T_WHITESPACE"," ",108],"(","!",["T_VARIABLE","$linkObject",108],["T_OBJECT_OPERATOR","->",108],["T_STRING","getUseDefaultTitle",108],"(",")",")",["T_WHITESPACE"," ",108],"{",["T_WHITESPACE","\n                ",108],["T_VARIABLE","$connection",109],["T_OBJECT_OPERATOR","->",109],["T_STRING","insert",109],"(",["T_WHITESPACE","\n                    ",109],["T_VARIABLE","$linkTitleTable",110],",",["T_WHITESPACE","\n                    ",110],"[",["T_WHITESPACE","\n                        ",111],["T_CONSTANT_ENCAPSED_STRING","'link_id'",112],["T_WHITESPACE"," ",112],["T_DOUBLE_ARROW","=>",112],["T_WHITESPACE"," ",112],["T_VARIABLE","$linkObject",112],["T_OBJECT_OPERATOR","->",112],["T_STRING","getId",112],"(",")",",",["T_WHITESPACE","\n                        ",112],["T_CONSTANT_ENCAPSED_STRING","'store_id'",113],["T_WHITESPACE"," ",113],["T_DOUBLE_ARROW","=>",113],["T_WHITESPACE"," ",113],["T_INT_CAST","(int)",113],["T_VARIABLE","$linkObject",113],["T_OBJECT_OPERATOR","->",113],["T_STRING","getStoreId",113],"(",")",",",["T_WHITESPACE","\n                        ",113],["T_CONSTANT_ENCAPSED_STRING","'title'",114],["T_WHITESPACE"," ",114],["T_DOUBLE_ARROW","=>",114],["T_WHITESPACE"," ",114],["T_VARIABLE","$linkObject",114],["T_OBJECT_OPERATOR","->",114],["T_STRING","getTitle",114],"(",")",["T_WHITESPACE","\n                    ",114],"]",["T_WHITESPACE","\n                ",115],")",";",["T_WHITESPACE","\n            ",116],"}",["T_WHITESPACE","\n        ",117],"}",["T_WHITESPACE","\n\n        ",118],["T_VARIABLE","$select",120],["T_WHITESPACE"," ",120],"=",["T_WHITESPACE"," ",120],["T_VARIABLE","$connection",120],["T_OBJECT_OPERATOR","->",120],["T_STRING","select",120],"(",")",["T_OBJECT_OPERATOR","->",120],["T_STRING","from",120],"(",["T_VARIABLE","$linkPriceTable",120],")",["T_OBJECT_OPERATOR","->",120],["T_STRING","where",120],"(",["T_CONSTANT_ENCAPSED_STRING","'link_id=:link_id AND website_id=:website_id'",120],")",";",["T_WHITESPACE","\n        ",120],["T_VARIABLE","$bind",121],["T_WHITESPACE"," ",121],"=",["T_WHITESPACE"," ",121],"[",["T_CONSTANT_ENCAPSED_STRING","':link_id'",121],["T_WHITESPACE"," ",121],["T_DOUBLE_ARROW","=>",121],["T_WHITESPACE"," ",121],["T_VARIABLE","$linkObject",121],["T_OBJECT_OPERATOR","->",121],["T_STRING","getId",121],"(",")",",",["T_WHITESPACE"," ",121],["T_CONSTANT_ENCAPSED_STRING","':website_id'",121],["T_WHITESPACE"," ",121],["T_DOUBLE_ARROW","=>",121],["T_WHITESPACE"," ",121],["T_INT_CAST","(int)",121],["T_VARIABLE","$linkObject",121],["T_OBJECT_OPERATOR","->",121],["T_STRING","getWebsiteId",121],"(",")","]",";",["T_WHITESPACE","\n        ",121],["T_IF","if",122],["T_WHITESPACE"," ",122],"(",["T_VARIABLE","$connection",122],["T_OBJECT_OPERATOR","->",122],["T_STRING","fetchOne",122],"(",["T_VARIABLE","$select",122],",",["T_WHITESPACE"," ",122],["T_VARIABLE","$bind",122],")",")",["T_WHITESPACE"," ",122],"{",["T_WHITESPACE","\n            ",122],["T_VARIABLE","$where",123],["T_WHITESPACE"," ",123],"=",["T_WHITESPACE"," ",123],"[",["T_CONSTANT_ENCAPSED_STRING","'link_id = ?'",123],["T_WHITESPACE"," ",123],["T_DOUBLE_ARROW","=>",123],["T_WHITESPACE"," ",123],["T_VARIABLE","$linkObject",123],["T_OBJECT_OPERATOR","->",123],["T_STRING","getId",123],"(",")",",",["T_WHITESPACE"," ",123],["T_CONSTANT_ENCAPSED_STRING","'website_id = ?'",123],["T_WHITESPACE"," ",123],["T_DOUBLE_ARROW","=>",123],["T_WHITESPACE"," ",123],["T_VARIABLE","$linkObject",123],["T_OBJECT_OPERATOR","->",123],["T_STRING","getWebsiteId",123],"(",")","]",";",["T_WHITESPACE","\n            ",123],["T_IF","if",124],["T_WHITESPACE"," ",124],"(",["T_VARIABLE","$linkObject",124],["T_OBJECT_OPERATOR","->",124],["T_STRING","getUseDefaultPrice",124],"(",")",")",["T_WHITESPACE"," ",124],"{",["T_WHITESPACE","\n                ",124],["T_VARIABLE","$connection",125],["T_OBJECT_OPERATOR","->",125],["T_STRING","delete",125],"(",["T_VARIABLE","$linkPriceTable",125],",",["T_WHITESPACE"," ",125],["T_VARIABLE","$where",125],")",";",["T_WHITESPACE","\n            ",125],"}",["T_WHITESPACE"," ",126],["T_ELSE","else",126],["T_WHITESPACE"," ",126],"{",["T_WHITESPACE","\n                ",126],["T_VARIABLE","$connection",127],["T_OBJECT_OPERATOR","->",127],["T_STRING","update",127],"(",["T_VARIABLE","$linkPriceTable",127],",",["T_WHITESPACE"," ",127],"[",["T_CONSTANT_ENCAPSED_STRING","'price'",127],["T_WHITESPACE"," ",127],["T_DOUBLE_ARROW","=>",127],["T_WHITESPACE"," ",127],["T_VARIABLE","$linkObject",127],["T_OBJECT_OPERATOR","->",127],["T_STRING","getPrice",127],"(",")","]",",",["T_WHITESPACE"," ",127],["T_VARIABLE","$where",127],")",";",["T_WHITESPACE","\n            ",127],"}",["T_WHITESPACE","\n        ",128],"}",["T_WHITESPACE"," ",129],["T_ELSE","else",129],["T_WHITESPACE"," ",129],"{",["T_WHITESPACE","\n            ",129],["T_IF","if",130],["T_WHITESPACE"," ",130],"(","!",["T_VARIABLE","$linkObject",130],["T_OBJECT_OPERATOR","->",130],["T_STRING","getUseDefaultPrice",130],"(",")",")",["T_WHITESPACE"," ",130],"{",["T_WHITESPACE","\n                ",130],["T_VARIABLE","$dataToInsert",131],"[","]",["T_WHITESPACE"," ",131],"=",["T_WHITESPACE"," ",131],"[",["T_WHITESPACE","\n                    ",131],["T_CONSTANT_ENCAPSED_STRING","'link_id'",132],["T_WHITESPACE"," ",132],["T_DOUBLE_ARROW","=>",132],["T_WHITESPACE"," ",132],["T_VARIABLE","$linkObject",132],["T_OBJECT_OPERATOR","->",132],["T_STRING","getId",132],"(",")",",",["T_WHITESPACE","\n                    ",132],["T_CONSTANT_ENCAPSED_STRING","'website_id'",133],["T_WHITESPACE"," ",133],["T_DOUBLE_ARROW","=>",133],["T_WHITESPACE"," ",133],["T_INT_CAST","(int)",133],["T_VARIABLE","$linkObject",133],["T_OBJECT_OPERATOR","->",133],["T_STRING","getWebsiteId",133],"(",")",",",["T_WHITESPACE","\n                    ",133],["T_CONSTANT_ENCAPSED_STRING","'price'",134],["T_WHITESPACE"," ",134],["T_DOUBLE_ARROW","=>",134],["T_WHITESPACE"," ",134],["T_DOUBLE_CAST","(double)",134],["T_VARIABLE","$linkObject",134],["T_OBJECT_OPERATOR","->",134],["T_STRING","getPrice",134],"(",")",",",["T_WHITESPACE","\n                ",134],"]",";",["T_WHITESPACE","\n                ",135],["T_IF","if",136],["T_WHITESPACE"," ",136],"(",["T_VARIABLE","$linkObject",136],["T_OBJECT_OPERATOR","->",136],["T_STRING","getOrigData",136],"(",["T_CONSTANT_ENCAPSED_STRING","'link_id'",136],")",["T_WHITESPACE"," ",136],["T_IS_NOT_EQUAL","!=",136],["T_WHITESPACE"," ",136],["T_VARIABLE","$linkObject",136],["T_OBJECT_OPERATOR","->",136],["T_STRING","getLinkId",136],"(",")",")",["T_WHITESPACE"," ",136],"{",["T_WHITESPACE","\n                    ",136],["T_VARIABLE","$_isNew",137],["T_WHITESPACE"," ",137],"=",["T_WHITESPACE"," ",137],["T_STRING","true",137],";",["T_WHITESPACE","\n                ",137],"}",["T_WHITESPACE"," ",138],["T_ELSE","else",138],["T_WHITESPACE"," ",138],"{",["T_WHITESPACE","\n                    ",138],["T_VARIABLE","$_isNew",139],["T_WHITESPACE"," ",139],"=",["T_WHITESPACE"," ",139],["T_STRING","false",139],";",["T_WHITESPACE","\n                ",139],"}",["T_WHITESPACE","\n                ",140],["T_IF","if",141],["T_WHITESPACE"," ",141],"(",["T_VARIABLE","$linkObject",141],["T_OBJECT_OPERATOR","->",141],["T_STRING","getWebsiteId",141],"(",")",["T_WHITESPACE"," ",141],["T_IS_EQUAL","==",141],["T_WHITESPACE"," ",141],["T_LNUMBER","0",141],["T_WHITESPACE"," ",141],["T_BOOLEAN_AND","&&",141],["T_WHITESPACE"," ",141],["T_VARIABLE","$_isNew",141],["T_WHITESPACE"," ",141],["T_BOOLEAN_AND","&&",141],["T_WHITESPACE"," ",141],"!",["T_VARIABLE","$this",141],["T_OBJECT_OPERATOR","->",141],["T_STRING","_catalogData",141],["T_OBJECT_OPERATOR","->",141],["T_STRING","isPriceGlobal",141],"(",")",")",["T_WHITESPACE"," ",141],"{",["T_WHITESPACE","\n                    ",141],["T_VARIABLE","$websiteIds",142],["T_WHITESPACE"," ",142],"=",["T_WHITESPACE"," ",142],["T_VARIABLE","$linkObject",142],["T_OBJECT_OPERATOR","->",142],["T_STRING","getProductWebsiteIds",142],"(",")",";",["T_WHITESPACE","\n                    ",142],["T_FOREACH","foreach",143],["T_WHITESPACE"," ",143],"(",["T_VARIABLE","$websiteIds",143],["T_WHITESPACE"," ",143],["T_AS","as",143],["T_WHITESPACE"," ",143],["T_VARIABLE","$websiteId",143],")",["T_WHITESPACE"," ",143],"{",["T_WHITESPACE","\n                        ",143],["T_VARIABLE","$baseCurrency",144],["T_WHITESPACE"," ",144],"=",["T_WHITESPACE"," ",144],["T_VARIABLE","$this",144],["T_OBJECT_OPERATOR","->",144],["T_STRING","_configuration",144],["T_OBJECT_OPERATOR","->",144],["T_STRING","getValue",144],"(",["T_WHITESPACE","\n                            ",144],["T_NS_SEPARATOR","\\",145],["T_STRING","Magento",145],["T_NS_SEPARATOR","\\",145],["T_STRING","Directory",145],["T_NS_SEPARATOR","\\",145],["T_STRING","Model",145],["T_NS_SEPARATOR","\\",145],["T_STRING","Currency",145],["T_DOUBLE_COLON","::",145],["T_STRING","XML_PATH_CURRENCY_BASE",145],",",["T_WHITESPACE","\n                            ",145],["T_CONSTANT_ENCAPSED_STRING","'default'",146],["T_WHITESPACE","\n                        ",146],")",";",["T_WHITESPACE","\n                        ",147],["T_VARIABLE","$websiteCurrency",148],["T_WHITESPACE"," ",148],"=",["T_WHITESPACE"," ",148],["T_VARIABLE","$this",148],["T_OBJECT_OPERATOR","->",148],["T_STRING","_storeManager",148],["T_OBJECT_OPERATOR","->",148],["T_STRING","getWebsite",148],"(",["T_VARIABLE","$websiteId",148],")",["T_OBJECT_OPERATOR","->",148],["T_STRING","getBaseCurrencyCode",148],"(",")",";",["T_WHITESPACE","\n                        ",148],["T_IF","if",149],["T_WHITESPACE"," ",149],"(",["T_VARIABLE","$websiteCurrency",149],["T_WHITESPACE"," ",149],["T_IS_EQUAL","==",149],["T_WHITESPACE"," ",149],["T_VARIABLE","$baseCurrency",149],")",["T_WHITESPACE"," ",149],"{",["T_WHITESPACE","\n                            ",149],["T_CONTINUE","continue",150],";",["T_WHITESPACE","\n                        ",150],"}",["T_WHITESPACE","\n                        ",151],["T_VARIABLE","$rate",152],["T_WHITESPACE"," ",152],"=",["T_WHITESPACE"," ",152],["T_VARIABLE","$this",152],["T_OBJECT_OPERATOR","->",152],["T_STRING","_createCurrency",152],"(",")",["T_OBJECT_OPERATOR","->",152],["T_STRING","load",152],"(",["T_VARIABLE","$baseCurrency",152],")",["T_OBJECT_OPERATOR","->",152],["T_STRING","getRate",152],"(",["T_VARIABLE","$websiteCurrency",152],")",";",["T_WHITESPACE","\n                        ",152],["T_IF","if",153],["T_WHITESPACE"," ",153],"(","!",["T_VARIABLE","$rate",153],")",["T_WHITESPACE"," ",153],"{",["T_WHITESPACE","\n                            ",153],["T_VARIABLE","$rate",154],["T_WHITESPACE"," ",154],"=",["T_WHITESPACE"," ",154],["T_LNUMBER","1",154],";",["T_WHITESPACE","\n                        ",154],"}",["T_WHITESPACE","\n                        ",155],["T_VARIABLE","$newPrice",156],["T_WHITESPACE"," ",156],"=",["T_WHITESPACE"," ",156],["T_VARIABLE","$linkObject",156],["T_OBJECT_OPERATOR","->",156],["T_STRING","getPrice",156],"(",")",["T_WHITESPACE"," ",156],"*",["T_WHITESPACE"," ",156],["T_VARIABLE","$rate",156],";",["T_WHITESPACE","\n                        ",156],["T_VARIABLE","$dataToInsert",157],"[","]",["T_WHITESPACE"," ",157],"=",["T_WHITESPACE"," ",157],"[",["T_WHITESPACE","\n                            ",157],["T_CONSTANT_ENCAPSED_STRING","'link_id'",158],["T_WHITESPACE"," ",158],["T_DOUBLE_ARROW","=>",158],["T_WHITESPACE"," ",158],["T_VARIABLE","$linkObject",158],["T_OBJECT_OPERATOR","->",158],["T_STRING","getId",158],"(",")",",",["T_WHITESPACE","\n                            ",158],["T_CONSTANT_ENCAPSED_STRING","'website_id'",159],["T_WHITESPACE"," ",159],["T_DOUBLE_ARROW","=>",159],["T_WHITESPACE"," ",159],["T_INT_CAST","(int)",159],["T_VARIABLE","$websiteId",159],",",["T_WHITESPACE","\n                            ",159],["T_CONSTANT_ENCAPSED_STRING","'price'",160],["T_WHITESPACE"," ",160],["T_DOUBLE_ARROW","=>",160],["T_WHITESPACE"," ",160],["T_VARIABLE","$newPrice",160],",",["T_WHITESPACE","\n                        ",160],"]",";",["T_WHITESPACE","\n                    ",161],"}",["T_WHITESPACE","\n                ",162],"}",["T_WHITESPACE","\n                ",163],["T_VARIABLE","$connection",164],["T_OBJECT_OPERATOR","->",164],["T_STRING","insertMultiple",164],"(",["T_VARIABLE","$linkPriceTable",164],",",["T_WHITESPACE"," ",164],["T_VARIABLE","$dataToInsert",164],")",";",["T_WHITESPACE","\n            ",164],"}",["T_WHITESPACE","\n        ",165],"}",["T_WHITESPACE","\n        ",166],["T_RETURN","return",167],["T_WHITESPACE"," ",167],["T_VARIABLE","$this",167],";",["T_WHITESPACE","\n    ",167],"}",["T_WHITESPACE","\n\n    ",168],["T_DOC_COMMENT","\/**\n     * Delete data by item(s)\n     *\n     * @param \\Magento\\Downloadable\\Model\\Link|array|int $items\n     * @return $this\n     *\/",170],["T_WHITESPACE","\n    ",175],["T_PUBLIC","public",176],["T_WHITESPACE"," ",176],["T_FUNCTION","function",176],["T_WHITESPACE"," ",176],["T_STRING","deleteItems",176],"(",["T_VARIABLE","$items",176],")",["T_WHITESPACE","\n    ",176],"{",["T_WHITESPACE","\n        ",177],["T_VARIABLE","$connection",178],["T_WHITESPACE"," ",178],"=",["T_WHITESPACE"," ",178],["T_VARIABLE","$this",178],["T_OBJECT_OPERATOR","->",178],["T_STRING","getConnection",178],"(",")",";",["T_WHITESPACE","\n        ",178],["T_IF","if",179],["T_WHITESPACE"," ",179],"(",["T_VARIABLE","$items",179],["T_WHITESPACE"," ",179],["T_INSTANCEOF","instanceof",179],["T_WHITESPACE"," ",179],["T_NS_SEPARATOR","\\",179],["T_STRING","Magento",179],["T_NS_SEPARATOR","\\",179],["T_STRING","Downloadable",179],["T_NS_SEPARATOR","\\",179],["T_STRING","Model",179],["T_NS_SEPARATOR","\\",179],["T_STRING","Link",179],")",["T_WHITESPACE"," ",179],"{",["T_WHITESPACE","\n            ",179],["T_VARIABLE","$where",180],["T_WHITESPACE"," ",180],"=",["T_WHITESPACE"," ",180],"[",["T_CONSTANT_ENCAPSED_STRING","'link_id = ?'",180],["T_WHITESPACE"," ",180],["T_DOUBLE_ARROW","=>",180],["T_WHITESPACE"," ",180],["T_VARIABLE","$items",180],["T_OBJECT_OPERATOR","->",180],["T_STRING","getId",180],"(",")","]",";",["T_WHITESPACE","\n        ",180],"}",["T_WHITESPACE"," ",181],["T_ELSEIF","elseif",181],["T_WHITESPACE"," ",181],"(",["T_STRING","is_array",181],"(",["T_VARIABLE","$items",181],")",")",["T_WHITESPACE"," ",181],"{",["T_WHITESPACE","\n            ",181],["T_VARIABLE","$where",182],["T_WHITESPACE"," ",182],"=",["T_WHITESPACE"," ",182],"[",["T_CONSTANT_ENCAPSED_STRING","'link_id in (?)'",182],["T_WHITESPACE"," ",182],["T_DOUBLE_ARROW","=>",182],["T_WHITESPACE"," ",182],["T_VARIABLE","$items",182],"]",";",["T_WHITESPACE","\n        ",182],"}",["T_WHITESPACE"," ",183],["T_ELSE","else",183],["T_WHITESPACE"," ",183],"{",["T_WHITESPACE","\n            ",183],["T_VARIABLE","$where",184],["T_WHITESPACE"," ",184],"=",["T_WHITESPACE"," ",184],"[",["T_CONSTANT_ENCAPSED_STRING","'sample_id = ?'",184],["T_WHITESPACE"," ",184],["T_DOUBLE_ARROW","=>",184],["T_WHITESPACE"," ",184],["T_VARIABLE","$items",184],"]",";",["T_WHITESPACE","\n        ",184],"}",["T_WHITESPACE","\n        ",185],["T_VARIABLE","$connection",186],["T_OBJECT_OPERATOR","->",186],["T_STRING","delete",186],"(",["T_VARIABLE","$this",186],["T_OBJECT_OPERATOR","->",186],["T_STRING","getMainTable",186],"(",")",",",["T_WHITESPACE"," ",186],["T_VARIABLE","$where",186],")",";",["T_WHITESPACE","\n        ",186],["T_VARIABLE","$connection",187],["T_OBJECT_OPERATOR","->",187],["T_STRING","delete",187],"(",["T_VARIABLE","$this",187],["T_OBJECT_OPERATOR","->",187],["T_STRING","getTable",187],"(",["T_CONSTANT_ENCAPSED_STRING","'downloadable_link_title'",187],")",",",["T_WHITESPACE"," ",187],["T_VARIABLE","$where",187],")",";",["T_WHITESPACE","\n        ",187],["T_VARIABLE","$connection",188],["T_OBJECT_OPERATOR","->",188],["T_STRING","delete",188],"(",["T_VARIABLE","$this",188],["T_OBJECT_OPERATOR","->",188],["T_STRING","getTable",188],"(",["T_CONSTANT_ENCAPSED_STRING","'downloadable_link_price'",188],")",",",["T_WHITESPACE"," ",188],["T_VARIABLE","$where",188],")",";",["T_WHITESPACE","\n        ",188],["T_RETURN","return",189],["T_WHITESPACE"," ",189],["T_VARIABLE","$this",189],";",["T_WHITESPACE","\n    ",189],"}",["T_WHITESPACE","\n\n    ",190],["T_DOC_COMMENT","\/**\n     * Retrieve links searchable data\n     *\n     * @param int $productId\n     * @param int $storeId\n     * @return array\n     *\/",192],["T_WHITESPACE","\n    ",198],["T_PUBLIC","public",199],["T_WHITESPACE"," ",199],["T_FUNCTION","function",199],["T_WHITESPACE"," ",199],["T_STRING","getSearchableData",199],"(",["T_VARIABLE","$productId",199],",",["T_WHITESPACE"," ",199],["T_VARIABLE","$storeId",199],")",["T_WHITESPACE","\n    ",199],"{",["T_WHITESPACE","\n        ",200],["T_VARIABLE","$connection",201],["T_WHITESPACE"," ",201],"=",["T_WHITESPACE"," ",201],["T_VARIABLE","$this",201],["T_OBJECT_OPERATOR","->",201],["T_STRING","getConnection",201],"(",")",";",["T_WHITESPACE","\n        ",201],["T_VARIABLE","$ifNullDefaultTitle",202],["T_WHITESPACE"," ",202],"=",["T_WHITESPACE"," ",202],["T_VARIABLE","$connection",202],["T_OBJECT_OPERATOR","->",202],["T_STRING","getIfNullSql",202],"(",["T_CONSTANT_ENCAPSED_STRING","'st.title'",202],",",["T_WHITESPACE"," ",202],["T_CONSTANT_ENCAPSED_STRING","'s.title'",202],")",";",["T_WHITESPACE","\n        ",202],["T_VARIABLE","$select",203],["T_WHITESPACE"," ",203],"=",["T_WHITESPACE"," ",203],["T_VARIABLE","$connection",203],["T_OBJECT_OPERATOR","->",203],["T_STRING","select",203],"(",")",["T_OBJECT_OPERATOR","->",203],["T_STRING","from",203],"(",["T_WHITESPACE","\n            ",203],"[",["T_CONSTANT_ENCAPSED_STRING","'m'",204],["T_WHITESPACE"," ",204],["T_DOUBLE_ARROW","=>",204],["T_WHITESPACE"," ",204],["T_VARIABLE","$this",204],["T_OBJECT_OPERATOR","->",204],["T_STRING","getMainTable",204],"(",")","]",",",["T_WHITESPACE","\n            ",204],["T_STRING","null",205],["T_WHITESPACE","\n        ",205],")",["T_OBJECT_OPERATOR","->",206],["T_STRING","join",206],"(",["T_WHITESPACE","\n            ",206],"[",["T_CONSTANT_ENCAPSED_STRING","'s'",207],["T_WHITESPACE"," ",207],["T_DOUBLE_ARROW","=>",207],["T_WHITESPACE"," ",207],["T_VARIABLE","$this",207],["T_OBJECT_OPERATOR","->",207],["T_STRING","getTable",207],"(",["T_CONSTANT_ENCAPSED_STRING","'downloadable_link_title'",207],")","]",",",["T_WHITESPACE","\n            ",207],["T_CONSTANT_ENCAPSED_STRING","'s.link_id=m.link_id AND s.store_id=0'",208],",",["T_WHITESPACE","\n            ",208],"[","]",["T_WHITESPACE","\n        ",209],")",["T_OBJECT_OPERATOR","->",210],["T_STRING","join",210],"(",["T_WHITESPACE","\n            ",210],"[",["T_CONSTANT_ENCAPSED_STRING","'cpe'",211],["T_WHITESPACE"," ",211],["T_DOUBLE_ARROW","=>",211],["T_WHITESPACE"," ",211],["T_VARIABLE","$this",211],["T_OBJECT_OPERATOR","->",211],["T_STRING","getTable",211],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog_product_entity'",211],")","]",",",["T_WHITESPACE","\n            ",211],["T_STRING","sprintf",212],"(",["T_WHITESPACE","\n                ",212],["T_CONSTANT_ENCAPSED_STRING","'cpe.entity_id = m.product_id'",213],",",["T_WHITESPACE","\n                ",213],["T_VARIABLE","$this",214],["T_OBJECT_OPERATOR","->",214],["T_STRING","getMetadataPool",214],"(",")",["T_OBJECT_OPERATOR","->",214],["T_STRING","getMetadata",214],"(",["T_STRING","ProductInterface",214],["T_DOUBLE_COLON","::",214],["T_CLASS","class",214],")",["T_OBJECT_OPERATOR","->",214],["T_STRING","getLinkField",214],"(",")",["T_WHITESPACE","\n            ",214],")",",",["T_WHITESPACE","\n            ",215],"[","]",["T_WHITESPACE","\n        ",216],")",["T_OBJECT_OPERATOR","->",217],["T_STRING","joinLeft",217],"(",["T_WHITESPACE","\n            ",217],"[",["T_CONSTANT_ENCAPSED_STRING","'st'",218],["T_WHITESPACE"," ",218],["T_DOUBLE_ARROW","=>",218],["T_WHITESPACE"," ",218],["T_VARIABLE","$this",218],["T_OBJECT_OPERATOR","->",218],["T_STRING","getTable",218],"(",["T_CONSTANT_ENCAPSED_STRING","'downloadable_link_title'",218],")","]",",",["T_WHITESPACE","\n            ",218],["T_CONSTANT_ENCAPSED_STRING","'st.link_id=m.link_id AND st.store_id=:store_id'",219],",",["T_WHITESPACE","\n            ",219],"[",["T_CONSTANT_ENCAPSED_STRING","'title'",220],["T_WHITESPACE"," ",220],["T_DOUBLE_ARROW","=>",220],["T_WHITESPACE"," ",220],["T_VARIABLE","$ifNullDefaultTitle",220],"]",["T_WHITESPACE","\n        ",220],")",["T_OBJECT_OPERATOR","->",221],["T_STRING","where",221],"(",["T_WHITESPACE","\n            ",221],["T_CONSTANT_ENCAPSED_STRING","'cpe.entity_id=:product_id'",222],["T_WHITESPACE","\n        ",222],")",";",["T_WHITESPACE","\n        ",223],["T_VARIABLE","$bind",224],["T_WHITESPACE"," ",224],"=",["T_WHITESPACE"," ",224],"[",["T_CONSTANT_ENCAPSED_STRING","':store_id'",224],["T_WHITESPACE"," ",224],["T_DOUBLE_ARROW","=>",224],["T_WHITESPACE"," ",224],["T_INT_CAST","(int)",224],["T_VARIABLE","$storeId",224],",",["T_WHITESPACE"," ",224],["T_CONSTANT_ENCAPSED_STRING","':product_id'",224],["T_WHITESPACE"," ",224],["T_DOUBLE_ARROW","=>",224],["T_WHITESPACE"," ",224],["T_VARIABLE","$productId",224],"]",";",["T_WHITESPACE","\n\n        ",224],["T_RETURN","return",226],["T_WHITESPACE"," ",226],["T_VARIABLE","$connection",226],["T_OBJECT_OPERATOR","->",226],["T_STRING","fetchCol",226],"(",["T_VARIABLE","$select",226],",",["T_WHITESPACE"," ",226],["T_VARIABLE","$bind",226],")",";",["T_WHITESPACE","\n    ",226],"}",["T_WHITESPACE","\n\n    ",227],["T_DOC_COMMENT","\/**\n     * @return \\Magento\\Directory\\Model\\Currency\n     *\/",229],["T_WHITESPACE","\n    ",231],["T_PROTECTED","protected",232],["T_WHITESPACE"," ",232],["T_FUNCTION","function",232],["T_WHITESPACE"," ",232],["T_STRING","_createCurrency",232],"(",")",["T_WHITESPACE","\n    ",232],"{",["T_WHITESPACE","\n        ",233],["T_RETURN","return",234],["T_WHITESPACE"," ",234],["T_VARIABLE","$this",234],["T_OBJECT_OPERATOR","->",234],["T_STRING","_currencyFactory",234],["T_OBJECT_OPERATOR","->",234],["T_STRING","create",234],"(",")",";",["T_WHITESPACE","\n    ",234],"}",["T_WHITESPACE","\n\n    ",235],["T_DOC_COMMENT","\/**\n     * Get MetadataPool instance\n     * @return MetadataPool\n     *\/",237],["T_WHITESPACE","\n    ",240],["T_PRIVATE","private",241],["T_WHITESPACE"," ",241],["T_FUNCTION","function",241],["T_WHITESPACE"," ",241],["T_STRING","getMetadataPool",241],"(",")",["T_WHITESPACE","\n    ",241],"{",["T_WHITESPACE","\n        ",242],["T_IF","if",243],["T_WHITESPACE"," ",243],"(","!",["T_VARIABLE","$this",243],["T_OBJECT_OPERATOR","->",243],["T_STRING","metadataPool",243],")",["T_WHITESPACE"," ",243],"{",["T_WHITESPACE","\n            ",243],["T_VARIABLE","$this",244],["T_OBJECT_OPERATOR","->",244],["T_STRING","metadataPool",244],["T_WHITESPACE"," ",244],"=",["T_WHITESPACE"," ",244],["T_STRING","ObjectManager",244],["T_DOUBLE_COLON","::",244],["T_STRING","getInstance",244],"(",")",["T_OBJECT_OPERATOR","->",244],["T_STRING","get",244],"(",["T_STRING","MetadataPool",244],["T_DOUBLE_COLON","::",244],["T_CLASS","class",244],")",";",["T_WHITESPACE","\n        ",244],"}",["T_WHITESPACE","\n        ",245],["T_RETURN","return",246],["T_WHITESPACE"," ",246],["T_VARIABLE","$this",246],["T_OBJECT_OPERATOR","->",246],["T_STRING","metadataPool",246],";",["T_WHITESPACE","\n    ",246],"}",["T_WHITESPACE","\n",247],"}",["T_WHITESPACE","\n",248]]
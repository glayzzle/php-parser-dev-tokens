[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Copyright \u00c2\u00a9 2013-2017 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n *\/",2],["T_WHITESPACE","\n",5],["T_NAMESPACE","namespace",6],["T_WHITESPACE"," ",6],["T_STRING","Magento",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Downloadable",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Test",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Unit",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Controller",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Download",6],";",["T_WHITESPACE","\n\n",6],["T_USE","use",8],["T_WHITESPACE"," ",8],["T_STRING","Magento",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Framework",8],["T_NS_SEPARATOR","\\",8],["T_STRING","TestFramework",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Unit",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Helper",8],["T_NS_SEPARATOR","\\",8],["T_STRING","ObjectManager",8],["T_WHITESPACE"," ",8],["T_AS","as",8],["T_WHITESPACE"," ",8],["T_STRING","ObjectManagerHelper",8],";",["T_WHITESPACE","\n\n",8],["T_DOC_COMMENT","\/**\n * @SuppressWarnings(PHPMD.CouplingBetweenObjects)\n *\/",10],["T_WHITESPACE","\n",12],["T_CLASS","class",13],["T_WHITESPACE"," ",13],["T_STRING","LinkTest",13],["T_WHITESPACE"," ",13],["T_EXTENDS","extends",13],["T_WHITESPACE"," ",13],["T_NS_SEPARATOR","\\",13],["T_STRING","PHPUnit_Framework_TestCase",13],["T_WHITESPACE","\n",13],"{",["T_WHITESPACE","\n    ",14],["T_DOC_COMMENT","\/** @var \\Magento\\Downloadable\\Controller\\Download\\Link *\/",15],["T_WHITESPACE","\n    ",15],["T_PROTECTED","protected",16],["T_WHITESPACE"," ",16],["T_VARIABLE","$link",16],";",["T_WHITESPACE","\n\n    ",16],["T_DOC_COMMENT","\/** @var ObjectManagerHelper *\/",18],["T_WHITESPACE","\n    ",18],["T_PROTECTED","protected",19],["T_WHITESPACE"," ",19],["T_VARIABLE","$objectManagerHelper",19],";",["T_WHITESPACE","\n\n    ",19],["T_DOC_COMMENT","\/**\n     * @var \\PHPUnit_Framework_MockObject_MockObject|\\Magento\\Framework\\App\\Request\\Http\n     *\/",21],["T_WHITESPACE","\n    ",23],["T_PROTECTED","protected",24],["T_WHITESPACE"," ",24],["T_VARIABLE","$request",24],";",["T_WHITESPACE","\n\n    ",24],["T_DOC_COMMENT","\/**\n     * @var \\PHPUnit_Framework_MockObject_MockObject|\\Magento\\Framework\\App\\ResponseInterface\n     *\/",26],["T_WHITESPACE","\n    ",28],["T_PROTECTED","protected",29],["T_WHITESPACE"," ",29],["T_VARIABLE","$response",29],";",["T_WHITESPACE","\n\n    ",29],["T_DOC_COMMENT","\/**\n     * @var \\PHPUnit_Framework_MockObject_MockObject|\\Magento\\Downloadable\\Model\\Link\\Purchased\\Item\n     *\/",31],["T_WHITESPACE","\n    ",33],["T_PROTECTED","protected",34],["T_WHITESPACE"," ",34],["T_VARIABLE","$linkPurchasedItem",34],";",["T_WHITESPACE","\n\n    ",34],["T_DOC_COMMENT","\/**\n     * @var \\PHPUnit_Framework_MockObject_MockObject|\\Magento\\Downloadable\\Model\\Link\\Purchased\n     *\/",36],["T_WHITESPACE","\n    ",38],["T_PROTECTED","protected",39],["T_WHITESPACE"," ",39],["T_VARIABLE","$linkPurchased",39],";",["T_WHITESPACE","\n\n    ",39],["T_DOC_COMMENT","\/**\n     * @var \\PHPUnit_Framework_MockObject_MockObject|\\Magento\\Framework\\ObjectManager\\ObjectManager\n     *\/",41],["T_WHITESPACE","\n    ",43],["T_PROTECTED","protected",44],["T_WHITESPACE"," ",44],["T_VARIABLE","$objectManager",44],";",["T_WHITESPACE","\n\n    ",44],["T_DOC_COMMENT","\/**\n     * @var \\PHPUnit_Framework_MockObject_MockObject|\\Magento\\Framework\\Message\\ManagerInterface\n     *\/",46],["T_WHITESPACE","\n    ",48],["T_PROTECTED","protected",49],["T_WHITESPACE"," ",49],["T_VARIABLE","$messageManager",49],";",["T_WHITESPACE","\n\n    ",49],["T_DOC_COMMENT","\/**\n     * @var \\PHPUnit_Framework_MockObject_MockObject|\\Magento\\Framework\\App\\Response\\RedirectInterface\n     *\/",51],["T_WHITESPACE","\n    ",53],["T_PROTECTED","protected",54],["T_WHITESPACE"," ",54],["T_VARIABLE","$redirect",54],";",["T_WHITESPACE","\n\n    ",54],["T_DOC_COMMENT","\/**\n     * @var \\PHPUnit_Framework_MockObject_MockObject|\\Magento\\Customer\\Model\\Session\n     *\/",56],["T_WHITESPACE","\n    ",58],["T_PROTECTED","protected",59],["T_WHITESPACE"," ",59],["T_VARIABLE","$session",59],";",["T_WHITESPACE","\n\n    ",59],["T_DOC_COMMENT","\/**\n     * @var \\PHPUnit_Framework_MockObject_MockObject|\\Magento\\Downloadable\\Helper\\Data\n     *\/",61],["T_WHITESPACE","\n    ",63],["T_PROTECTED","protected",64],["T_WHITESPACE"," ",64],["T_VARIABLE","$helperData",64],";",["T_WHITESPACE","\n\n    ",64],["T_DOC_COMMENT","\/**\n     * @var \\PHPUnit_Framework_MockObject_MockObject|\\Magento\\Downloadable\\Helper\\Download\n     *\/",66],["T_WHITESPACE","\n    ",68],["T_PROTECTED","protected",69],["T_WHITESPACE"," ",69],["T_VARIABLE","$downloadHelper",69],";",["T_WHITESPACE","\n\n    ",69],["T_DOC_COMMENT","\/**\n     * @var \\PHPUnit_Framework_MockObject_MockObject|\\Magento\\Catalog\\Model\\Product\n     *\/",71],["T_WHITESPACE","\n    ",73],["T_PROTECTED","protected",74],["T_WHITESPACE"," ",74],["T_VARIABLE","$product",74],";",["T_WHITESPACE","\n\n    ",74],["T_DOC_COMMENT","\/**\n     * @var \\PHPUnit_Framework_MockObject_MockObject|\\Magento\\Framework\\UrlInterface\n     *\/",76],["T_WHITESPACE","\n    ",78],["T_PROTECTED","protected",79],["T_WHITESPACE"," ",79],["T_VARIABLE","$urlInterface",79],";",["T_WHITESPACE","\n\n    ",79],["T_DOC_COMMENT","\/**\n     * @SuppressWarnings(PHPMD.ExcessiveMethodLength)\n     *\/",81],["T_WHITESPACE","\n    ",83],["T_PROTECTED","protected",84],["T_WHITESPACE"," ",84],["T_FUNCTION","function",84],["T_WHITESPACE"," ",84],["T_STRING","setUp",84],"(",")",["T_WHITESPACE","\n    ",84],"{",["T_WHITESPACE","\n        ",85],["T_VARIABLE","$this",86],["T_OBJECT_OPERATOR","->",86],["T_STRING","objectManagerHelper",86],["T_WHITESPACE"," ",86],"=",["T_WHITESPACE"," ",86],["T_NEW","new",86],["T_WHITESPACE"," ",86],["T_STRING","ObjectManagerHelper",86],"(",["T_VARIABLE","$this",86],")",";",["T_WHITESPACE","\n\n        ",86],["T_VARIABLE","$this",88],["T_OBJECT_OPERATOR","->",88],["T_STRING","request",88],["T_WHITESPACE"," ",88],"=",["T_WHITESPACE"," ",88],["T_VARIABLE","$this",88],["T_OBJECT_OPERATOR","->",88],["T_STRING","getMockBuilder",88],"(",["T_NS_SEPARATOR","\\",88],["T_STRING","Magento",88],["T_NS_SEPARATOR","\\",88],["T_STRING","Framework",88],["T_NS_SEPARATOR","\\",88],["T_STRING","App",88],["T_NS_SEPARATOR","\\",88],["T_STRING","Request",88],["T_NS_SEPARATOR","\\",88],["T_STRING","Http",88],["T_DOUBLE_COLON","::",88],["T_CLASS","class",88],")",["T_WHITESPACE","\n            ",88],["T_OBJECT_OPERATOR","->",89],["T_STRING","disableOriginalConstructor",89],"(",")",["T_OBJECT_OPERATOR","->",89],["T_STRING","getMock",89],"(",")",";",["T_WHITESPACE","\n        ",89],["T_VARIABLE","$this",90],["T_OBJECT_OPERATOR","->",90],["T_STRING","response",90],["T_WHITESPACE"," ",90],"=",["T_WHITESPACE"," ",90],["T_VARIABLE","$this",90],["T_OBJECT_OPERATOR","->",90],["T_STRING","getMock",90],"(",["T_WHITESPACE","\n            ",90],["T_NS_SEPARATOR","\\",91],["T_STRING","Magento",91],["T_NS_SEPARATOR","\\",91],["T_STRING","Framework",91],["T_NS_SEPARATOR","\\",91],["T_STRING","App",91],["T_NS_SEPARATOR","\\",91],["T_STRING","ResponseInterface",91],["T_DOUBLE_COLON","::",91],["T_CLASS","class",91],",",["T_WHITESPACE","\n            ",91],"[",["T_WHITESPACE","\n                ",92],["T_CONSTANT_ENCAPSED_STRING","'setHttpResponseCode'",93],",",["T_WHITESPACE","\n                ",93],["T_CONSTANT_ENCAPSED_STRING","'clearBody'",94],",",["T_WHITESPACE","\n                ",94],["T_CONSTANT_ENCAPSED_STRING","'sendHeaders'",95],",",["T_WHITESPACE","\n                ",95],["T_CONSTANT_ENCAPSED_STRING","'sendResponse'",96],",",["T_WHITESPACE","\n                ",96],["T_CONSTANT_ENCAPSED_STRING","'setHeader'",97],["T_WHITESPACE","\n            ",97],"]",["T_WHITESPACE","\n        ",98],")",";",["T_WHITESPACE","\n        ",99],["T_VARIABLE","$this",100],["T_OBJECT_OPERATOR","->",100],["T_STRING","session",100],["T_WHITESPACE"," ",100],"=",["T_WHITESPACE"," ",100],["T_VARIABLE","$this",100],["T_OBJECT_OPERATOR","->",100],["T_STRING","getMock",100],"(",["T_WHITESPACE","\n            ",100],["T_NS_SEPARATOR","\\",101],["T_STRING","Magento",101],["T_NS_SEPARATOR","\\",101],["T_STRING","Customer",101],["T_NS_SEPARATOR","\\",101],["T_STRING","Model",101],["T_NS_SEPARATOR","\\",101],["T_STRING","Session",101],["T_DOUBLE_COLON","::",101],["T_CLASS","class",101],",",["T_WHITESPACE","\n            ",101],"[",["T_WHITESPACE","\n                ",102],["T_CONSTANT_ENCAPSED_STRING","'getCustomerId'",103],",",["T_WHITESPACE","\n                ",103],["T_CONSTANT_ENCAPSED_STRING","'authenticate'",104],",",["T_WHITESPACE","\n                ",104],["T_CONSTANT_ENCAPSED_STRING","'setBeforeAuthUrl'",105],["T_WHITESPACE","\n            ",105],"]",",",["T_WHITESPACE","\n            ",106],"[","]",",",["T_WHITESPACE","\n            ",107],["T_CONSTANT_ENCAPSED_STRING","''",108],",",["T_WHITESPACE","\n            ",108],["T_STRING","false",109],["T_WHITESPACE","\n        ",109],")",";",["T_WHITESPACE","\n        ",110],["T_VARIABLE","$this",111],["T_OBJECT_OPERATOR","->",111],["T_STRING","helperData",111],["T_WHITESPACE"," ",111],"=",["T_WHITESPACE"," ",111],["T_VARIABLE","$this",111],["T_OBJECT_OPERATOR","->",111],["T_STRING","getMock",111],"(",["T_WHITESPACE","\n            ",111],["T_NS_SEPARATOR","\\",112],["T_STRING","Magento",112],["T_NS_SEPARATOR","\\",112],["T_STRING","Downloadable",112],["T_NS_SEPARATOR","\\",112],["T_STRING","Helper",112],["T_NS_SEPARATOR","\\",112],["T_STRING","Data",112],["T_DOUBLE_COLON","::",112],["T_CLASS","class",112],",",["T_WHITESPACE","\n            ",112],"[",["T_WHITESPACE","\n                ",113],["T_CONSTANT_ENCAPSED_STRING","'getIsShareable'",114],["T_WHITESPACE","\n            ",114],"]",",",["T_WHITESPACE","\n            ",115],"[","]",",",["T_WHITESPACE","\n            ",116],["T_CONSTANT_ENCAPSED_STRING","''",117],",",["T_WHITESPACE","\n            ",117],["T_STRING","false",118],["T_WHITESPACE","\n        ",118],")",";",["T_WHITESPACE","\n        ",119],["T_VARIABLE","$this",120],["T_OBJECT_OPERATOR","->",120],["T_STRING","downloadHelper",120],["T_WHITESPACE"," ",120],"=",["T_WHITESPACE"," ",120],["T_VARIABLE","$this",120],["T_OBJECT_OPERATOR","->",120],["T_STRING","getMock",120],"(",["T_WHITESPACE","\n            ",120],["T_NS_SEPARATOR","\\",121],["T_STRING","Magento",121],["T_NS_SEPARATOR","\\",121],["T_STRING","Downloadable",121],["T_NS_SEPARATOR","\\",121],["T_STRING","Helper",121],["T_NS_SEPARATOR","\\",121],["T_STRING","Download",121],["T_DOUBLE_COLON","::",121],["T_CLASS","class",121],",",["T_WHITESPACE","\n            ",121],"[",["T_WHITESPACE","\n                ",122],["T_CONSTANT_ENCAPSED_STRING","'setResource'",123],",",["T_WHITESPACE","\n                ",123],["T_CONSTANT_ENCAPSED_STRING","'getFilename'",124],",",["T_WHITESPACE","\n                ",124],["T_CONSTANT_ENCAPSED_STRING","'getContentType'",125],",",["T_WHITESPACE","\n                ",125],["T_CONSTANT_ENCAPSED_STRING","'getFileSize'",126],",",["T_WHITESPACE","\n                ",126],["T_CONSTANT_ENCAPSED_STRING","'getContentDisposition'",127],",",["T_WHITESPACE","\n                ",127],["T_CONSTANT_ENCAPSED_STRING","'output'",128],["T_WHITESPACE","\n            ",128],"]",",",["T_WHITESPACE","\n            ",129],"[","]",",",["T_WHITESPACE","\n            ",130],["T_CONSTANT_ENCAPSED_STRING","''",131],",",["T_WHITESPACE","\n            ",131],["T_STRING","false",132],["T_WHITESPACE","\n        ",132],")",";",["T_WHITESPACE","\n        ",133],["T_VARIABLE","$this",134],["T_OBJECT_OPERATOR","->",134],["T_STRING","product",134],["T_WHITESPACE"," ",134],"=",["T_WHITESPACE"," ",134],["T_VARIABLE","$this",134],["T_OBJECT_OPERATOR","->",134],["T_STRING","getMock",134],"(",["T_WHITESPACE","\n            ",134],["T_NS_SEPARATOR","\\",135],["T_STRING","Magento",135],["T_NS_SEPARATOR","\\",135],["T_STRING","Catalog",135],["T_NS_SEPARATOR","\\",135],["T_STRING","Model",135],["T_NS_SEPARATOR","\\",135],["T_STRING","Product",135],["T_DOUBLE_COLON","::",135],["T_CLASS","class",135],",",["T_WHITESPACE","\n            ",135],"[",["T_WHITESPACE","\n                ",136],["T_CONSTANT_ENCAPSED_STRING","'_wakeup'",137],",",["T_WHITESPACE","\n                ",137],["T_CONSTANT_ENCAPSED_STRING","'load'",138],",",["T_WHITESPACE","\n                ",138],["T_CONSTANT_ENCAPSED_STRING","'getId'",139],",",["T_WHITESPACE","\n                ",139],["T_CONSTANT_ENCAPSED_STRING","'getProductUrl'",140],",",["T_WHITESPACE","\n                ",140],["T_CONSTANT_ENCAPSED_STRING","'getName'",141],["T_WHITESPACE","\n            ",141],"]",",",["T_WHITESPACE","\n            ",142],"[","]",",",["T_WHITESPACE","\n            ",143],["T_CONSTANT_ENCAPSED_STRING","''",144],",",["T_WHITESPACE","\n            ",144],["T_STRING","false",145],["T_WHITESPACE","\n        ",145],")",";",["T_WHITESPACE","\n        ",146],["T_VARIABLE","$this",147],["T_OBJECT_OPERATOR","->",147],["T_STRING","linkPurchasedItem",147],["T_WHITESPACE"," ",147],"=",["T_WHITESPACE"," ",147],["T_VARIABLE","$this",147],["T_OBJECT_OPERATOR","->",147],["T_STRING","getMock",147],"(",["T_WHITESPACE","\n            ",147],["T_NS_SEPARATOR","\\",148],["T_STRING","Magento",148],["T_NS_SEPARATOR","\\",148],["T_STRING","Downloadable",148],["T_NS_SEPARATOR","\\",148],["T_STRING","Model",148],["T_NS_SEPARATOR","\\",148],["T_STRING","Link",148],["T_NS_SEPARATOR","\\",148],["T_STRING","Purchased",148],["T_NS_SEPARATOR","\\",148],["T_STRING","Item",148],["T_DOUBLE_COLON","::",148],["T_CLASS","class",148],",",["T_WHITESPACE","\n            ",148],"[",["T_WHITESPACE","\n                ",149],["T_CONSTANT_ENCAPSED_STRING","'load'",150],",",["T_WHITESPACE","\n                ",150],["T_CONSTANT_ENCAPSED_STRING","'getId'",151],",",["T_WHITESPACE","\n                ",151],["T_CONSTANT_ENCAPSED_STRING","'getProductId'",152],",",["T_WHITESPACE","\n                ",152],["T_CONSTANT_ENCAPSED_STRING","'getPurchasedId'",153],",",["T_WHITESPACE","\n                ",153],["T_CONSTANT_ENCAPSED_STRING","'getNumberOfDownloadsBought'",154],",",["T_WHITESPACE","\n                ",154],["T_CONSTANT_ENCAPSED_STRING","'getNumberOfDownloadsUsed'",155],",",["T_WHITESPACE","\n                ",155],["T_CONSTANT_ENCAPSED_STRING","'getStatus'",156],",",["T_WHITESPACE","\n                ",156],["T_CONSTANT_ENCAPSED_STRING","'getLinkType'",157],",",["T_WHITESPACE","\n                ",157],["T_CONSTANT_ENCAPSED_STRING","'getLinkUrl'",158],",",["T_WHITESPACE","\n                ",158],["T_CONSTANT_ENCAPSED_STRING","'getLinkFile'",159],",",["T_WHITESPACE","\n                ",159],["T_CONSTANT_ENCAPSED_STRING","'setNumberOfDownloadsUsed'",160],",",["T_WHITESPACE","\n                ",160],["T_CONSTANT_ENCAPSED_STRING","'setStatus'",161],",",["T_WHITESPACE","\n                ",161],["T_CONSTANT_ENCAPSED_STRING","'save'",162],",",["T_WHITESPACE","\n            ",162],"]",",",["T_WHITESPACE","\n            ",163],"[","]",",",["T_WHITESPACE","\n            ",164],["T_CONSTANT_ENCAPSED_STRING","''",165],",",["T_WHITESPACE","\n            ",165],["T_STRING","false",166],["T_WHITESPACE","\n        ",166],")",";",["T_WHITESPACE","\n        ",167],["T_VARIABLE","$this",168],["T_OBJECT_OPERATOR","->",168],["T_STRING","linkPurchased",168],["T_WHITESPACE"," ",168],"=",["T_WHITESPACE"," ",168],["T_VARIABLE","$this",168],["T_OBJECT_OPERATOR","->",168],["T_STRING","getMock",168],"(",["T_WHITESPACE","\n            ",168],["T_NS_SEPARATOR","\\",169],["T_STRING","Magento",169],["T_NS_SEPARATOR","\\",169],["T_STRING","Downloadable",169],["T_NS_SEPARATOR","\\",169],["T_STRING","Model",169],["T_NS_SEPARATOR","\\",169],["T_STRING","Link",169],["T_NS_SEPARATOR","\\",169],["T_STRING","Purchased",169],["T_DOUBLE_COLON","::",169],["T_CLASS","class",169],",",["T_WHITESPACE","\n            ",169],"[",["T_WHITESPACE","\n                ",170],["T_CONSTANT_ENCAPSED_STRING","'load'",171],",",["T_WHITESPACE","\n                ",171],["T_CONSTANT_ENCAPSED_STRING","'getCustomerId'",172],["T_WHITESPACE","\n            ",172],"]",",",["T_WHITESPACE","\n            ",173],"[","]",",",["T_WHITESPACE","\n            ",174],["T_CONSTANT_ENCAPSED_STRING","''",175],",",["T_WHITESPACE","\n            ",175],["T_STRING","false",176],["T_WHITESPACE","\n        ",176],")",";",["T_WHITESPACE","\n        ",177],["T_VARIABLE","$this",178],["T_OBJECT_OPERATOR","->",178],["T_STRING","messageManager",178],["T_WHITESPACE"," ",178],"=",["T_WHITESPACE"," ",178],["T_VARIABLE","$this",178],["T_OBJECT_OPERATOR","->",178],["T_STRING","getMock",178],"(",["T_WHITESPACE","\n            ",178],["T_NS_SEPARATOR","\\",179],["T_STRING","Magento",179],["T_NS_SEPARATOR","\\",179],["T_STRING","Framework",179],["T_NS_SEPARATOR","\\",179],["T_STRING","Message",179],["T_NS_SEPARATOR","\\",179],["T_STRING","ManagerInterface",179],["T_DOUBLE_COLON","::",179],["T_CLASS","class",179],",",["T_WHITESPACE","\n            ",179],"[","]",",",["T_WHITESPACE","\n            ",180],"[","]",",",["T_WHITESPACE","\n            ",181],["T_CONSTANT_ENCAPSED_STRING","''",182],",",["T_WHITESPACE","\n            ",182],["T_STRING","false",183],["T_WHITESPACE","\n        ",183],")",";",["T_WHITESPACE","\n        ",184],["T_VARIABLE","$this",185],["T_OBJECT_OPERATOR","->",185],["T_STRING","redirect",185],["T_WHITESPACE"," ",185],"=",["T_WHITESPACE"," ",185],["T_VARIABLE","$this",185],["T_OBJECT_OPERATOR","->",185],["T_STRING","getMock",185],"(",["T_WHITESPACE","\n            ",185],["T_NS_SEPARATOR","\\",186],["T_STRING","Magento",186],["T_NS_SEPARATOR","\\",186],["T_STRING","Framework",186],["T_NS_SEPARATOR","\\",186],["T_STRING","App",186],["T_NS_SEPARATOR","\\",186],["T_STRING","Response",186],["T_NS_SEPARATOR","\\",186],["T_STRING","RedirectInterface",186],["T_DOUBLE_COLON","::",186],["T_CLASS","class",186],",",["T_WHITESPACE","\n            ",186],"[","]",",",["T_WHITESPACE","\n            ",187],"[","]",",",["T_WHITESPACE","\n            ",188],["T_CONSTANT_ENCAPSED_STRING","''",189],",",["T_WHITESPACE","\n            ",189],["T_STRING","false",190],["T_WHITESPACE","\n        ",190],")",";",["T_WHITESPACE","\n        ",191],["T_VARIABLE","$this",192],["T_OBJECT_OPERATOR","->",192],["T_STRING","urlInterface",192],["T_WHITESPACE"," ",192],"=",["T_WHITESPACE"," ",192],["T_VARIABLE","$this",192],["T_OBJECT_OPERATOR","->",192],["T_STRING","getMock",192],"(",["T_WHITESPACE","\n            ",192],["T_NS_SEPARATOR","\\",193],["T_STRING","Magento",193],["T_NS_SEPARATOR","\\",193],["T_STRING","Framework",193],["T_NS_SEPARATOR","\\",193],["T_STRING","UrlInterface",193],["T_DOUBLE_COLON","::",193],["T_CLASS","class",193],",",["T_WHITESPACE","\n            ",193],"[","]",",",["T_WHITESPACE","\n            ",194],"[","]",",",["T_WHITESPACE","\n            ",195],["T_CONSTANT_ENCAPSED_STRING","''",196],",",["T_WHITESPACE","\n            ",196],["T_STRING","false",197],["T_WHITESPACE","\n        ",197],")",";",["T_WHITESPACE","\n        ",198],["T_VARIABLE","$this",199],["T_OBJECT_OPERATOR","->",199],["T_STRING","objectManager",199],["T_WHITESPACE"," ",199],"=",["T_WHITESPACE"," ",199],["T_VARIABLE","$this",199],["T_OBJECT_OPERATOR","->",199],["T_STRING","getMock",199],"(",["T_WHITESPACE","\n            ",199],["T_NS_SEPARATOR","\\",200],["T_STRING","Magento",200],["T_NS_SEPARATOR","\\",200],["T_STRING","Framework",200],["T_NS_SEPARATOR","\\",200],["T_STRING","ObjectManager",200],["T_NS_SEPARATOR","\\",200],["T_STRING","ObjectManager",200],["T_DOUBLE_COLON","::",200],["T_CLASS","class",200],",",["T_WHITESPACE","\n            ",200],"[",["T_WHITESPACE","\n                ",201],["T_CONSTANT_ENCAPSED_STRING","'create'",202],",",["T_WHITESPACE","\n                ",202],["T_CONSTANT_ENCAPSED_STRING","'get'",203],["T_WHITESPACE","\n            ",203],"]",",",["T_WHITESPACE","\n            ",204],"[","]",",",["T_WHITESPACE","\n            ",205],["T_CONSTANT_ENCAPSED_STRING","''",206],",",["T_WHITESPACE","\n            ",206],["T_STRING","false",207],["T_WHITESPACE","\n        ",207],")",";",["T_WHITESPACE","\n        ",208],["T_VARIABLE","$this",209],["T_OBJECT_OPERATOR","->",209],["T_STRING","link",209],["T_WHITESPACE"," ",209],"=",["T_WHITESPACE"," ",209],["T_VARIABLE","$this",209],["T_OBJECT_OPERATOR","->",209],["T_STRING","objectManagerHelper",209],["T_OBJECT_OPERATOR","->",209],["T_STRING","getObject",209],"(",["T_WHITESPACE","\n            ",209],["T_NS_SEPARATOR","\\",210],["T_STRING","Magento",210],["T_NS_SEPARATOR","\\",210],["T_STRING","Downloadable",210],["T_NS_SEPARATOR","\\",210],["T_STRING","Controller",210],["T_NS_SEPARATOR","\\",210],["T_STRING","Download",210],["T_NS_SEPARATOR","\\",210],["T_STRING","Link",210],["T_DOUBLE_COLON","::",210],["T_CLASS","class",210],",",["T_WHITESPACE","\n            ",210],"[",["T_WHITESPACE","\n                ",211],["T_CONSTANT_ENCAPSED_STRING","'objectManager'",212],["T_WHITESPACE"," ",212],["T_DOUBLE_ARROW","=>",212],["T_WHITESPACE"," ",212],["T_VARIABLE","$this",212],["T_OBJECT_OPERATOR","->",212],["T_STRING","objectManager",212],",",["T_WHITESPACE","\n                ",212],["T_CONSTANT_ENCAPSED_STRING","'request'",213],["T_WHITESPACE"," ",213],["T_DOUBLE_ARROW","=>",213],["T_WHITESPACE"," ",213],["T_VARIABLE","$this",213],["T_OBJECT_OPERATOR","->",213],["T_STRING","request",213],",",["T_WHITESPACE","\n                ",213],["T_CONSTANT_ENCAPSED_STRING","'response'",214],["T_WHITESPACE"," ",214],["T_DOUBLE_ARROW","=>",214],["T_WHITESPACE"," ",214],["T_VARIABLE","$this",214],["T_OBJECT_OPERATOR","->",214],["T_STRING","response",214],",",["T_WHITESPACE","\n                ",214],["T_CONSTANT_ENCAPSED_STRING","'messageManager'",215],["T_WHITESPACE"," ",215],["T_DOUBLE_ARROW","=>",215],["T_WHITESPACE"," ",215],["T_VARIABLE","$this",215],["T_OBJECT_OPERATOR","->",215],["T_STRING","messageManager",215],",",["T_WHITESPACE","\n                ",215],["T_CONSTANT_ENCAPSED_STRING","'redirect'",216],["T_WHITESPACE"," ",216],["T_DOUBLE_ARROW","=>",216],["T_WHITESPACE"," ",216],["T_VARIABLE","$this",216],["T_OBJECT_OPERATOR","->",216],["T_STRING","redirect",216],["T_WHITESPACE","\n            ",216],"]",["T_WHITESPACE","\n        ",217],")",";",["T_WHITESPACE","\n    ",218],"}",["T_WHITESPACE","\n\n    ",219],["T_PUBLIC","public",221],["T_WHITESPACE"," ",221],["T_FUNCTION","function",221],["T_WHITESPACE"," ",221],["T_STRING","testAbsentLinkId",221],"(",")",["T_WHITESPACE","\n    ",221],"{",["T_WHITESPACE","\n        ",222],["T_VARIABLE","$this",223],["T_OBJECT_OPERATOR","->",223],["T_STRING","objectManager",223],["T_OBJECT_OPERATOR","->",223],["T_STRING","expects",223],"(",["T_VARIABLE","$this",223],["T_OBJECT_OPERATOR","->",223],["T_STRING","once",223],"(",")",")",["T_WHITESPACE","\n            ",223],["T_OBJECT_OPERATOR","->",224],["T_STRING","method",224],"(",["T_CONSTANT_ENCAPSED_STRING","'get'",224],")",["T_WHITESPACE","\n            ",224],["T_OBJECT_OPERATOR","->",225],["T_STRING","with",225],"(",["T_NS_SEPARATOR","\\",225],["T_STRING","Magento",225],["T_NS_SEPARATOR","\\",225],["T_STRING","Customer",225],["T_NS_SEPARATOR","\\",225],["T_STRING","Model",225],["T_NS_SEPARATOR","\\",225],["T_STRING","Session",225],["T_DOUBLE_COLON","::",225],["T_CLASS","class",225],")",["T_WHITESPACE","\n            ",225],["T_OBJECT_OPERATOR","->",226],["T_STRING","willReturn",226],"(",["T_VARIABLE","$this",226],["T_OBJECT_OPERATOR","->",226],["T_STRING","session",226],")",";",["T_WHITESPACE","\n        ",226],["T_VARIABLE","$this",227],["T_OBJECT_OPERATOR","->",227],["T_STRING","request",227],["T_OBJECT_OPERATOR","->",227],["T_STRING","expects",227],"(",["T_VARIABLE","$this",227],["T_OBJECT_OPERATOR","->",227],["T_STRING","once",227],"(",")",")",["T_OBJECT_OPERATOR","->",227],["T_STRING","method",227],"(",["T_CONSTANT_ENCAPSED_STRING","'getParam'",227],")",["T_OBJECT_OPERATOR","->",227],["T_STRING","with",227],"(",["T_CONSTANT_ENCAPSED_STRING","'id'",227],",",["T_WHITESPACE"," ",227],["T_LNUMBER","0",227],")",["T_OBJECT_OPERATOR","->",227],["T_STRING","willReturn",227],"(",["T_CONSTANT_ENCAPSED_STRING","'some_id'",227],")",";",["T_WHITESPACE","\n        ",227],["T_VARIABLE","$this",228],["T_OBJECT_OPERATOR","->",228],["T_STRING","objectManager",228],["T_OBJECT_OPERATOR","->",228],["T_STRING","expects",228],"(",["T_VARIABLE","$this",228],["T_OBJECT_OPERATOR","->",228],["T_STRING","once",228],"(",")",")",["T_WHITESPACE","\n            ",228],["T_OBJECT_OPERATOR","->",229],["T_STRING","method",229],"(",["T_CONSTANT_ENCAPSED_STRING","'create'",229],")",["T_WHITESPACE","\n            ",229],["T_OBJECT_OPERATOR","->",230],["T_STRING","with",230],"(",["T_NS_SEPARATOR","\\",230],["T_STRING","Magento",230],["T_NS_SEPARATOR","\\",230],["T_STRING","Downloadable",230],["T_NS_SEPARATOR","\\",230],["T_STRING","Model",230],["T_NS_SEPARATOR","\\",230],["T_STRING","Link",230],["T_NS_SEPARATOR","\\",230],["T_STRING","Purchased",230],["T_NS_SEPARATOR","\\",230],["T_STRING","Item",230],["T_DOUBLE_COLON","::",230],["T_CLASS","class",230],")",["T_WHITESPACE","\n            ",230],["T_OBJECT_OPERATOR","->",231],["T_STRING","willReturn",231],"(",["T_VARIABLE","$this",231],["T_OBJECT_OPERATOR","->",231],["T_STRING","linkPurchasedItem",231],")",";",["T_WHITESPACE","\n        ",231],["T_VARIABLE","$this",232],["T_OBJECT_OPERATOR","->",232],["T_STRING","linkPurchasedItem",232],["T_OBJECT_OPERATOR","->",232],["T_STRING","expects",232],"(",["T_VARIABLE","$this",232],["T_OBJECT_OPERATOR","->",232],["T_STRING","once",232],"(",")",")",["T_WHITESPACE","\n            ",232],["T_OBJECT_OPERATOR","->",233],["T_STRING","method",233],"(",["T_CONSTANT_ENCAPSED_STRING","'load'",233],")",["T_WHITESPACE","\n            ",233],["T_OBJECT_OPERATOR","->",234],["T_STRING","with",234],"(",["T_CONSTANT_ENCAPSED_STRING","'some_id'",234],",",["T_WHITESPACE"," ",234],["T_CONSTANT_ENCAPSED_STRING","'link_hash'",234],")",["T_WHITESPACE","\n            ",234],["T_OBJECT_OPERATOR","->",235],["T_STRING","willReturnSelf",235],"(",")",";",["T_WHITESPACE","\n        ",235],["T_VARIABLE","$this",236],["T_OBJECT_OPERATOR","->",236],["T_STRING","linkPurchasedItem",236],["T_OBJECT_OPERATOR","->",236],["T_STRING","expects",236],"(",["T_VARIABLE","$this",236],["T_OBJECT_OPERATOR","->",236],["T_STRING","once",236],"(",")",")",["T_OBJECT_OPERATOR","->",236],["T_STRING","method",236],"(",["T_CONSTANT_ENCAPSED_STRING","'getId'",236],")",["T_OBJECT_OPERATOR","->",236],["T_STRING","willReturn",236],"(",["T_STRING","null",236],")",";",["T_WHITESPACE","\n        ",236],["T_VARIABLE","$this",237],["T_OBJECT_OPERATOR","->",237],["T_STRING","messageManager",237],["T_OBJECT_OPERATOR","->",237],["T_STRING","expects",237],"(",["T_VARIABLE","$this",237],["T_OBJECT_OPERATOR","->",237],["T_STRING","once",237],"(",")",")",["T_WHITESPACE","\n            ",237],["T_OBJECT_OPERATOR","->",238],["T_STRING","method",238],"(",["T_CONSTANT_ENCAPSED_STRING","'addNotice'",238],")",["T_WHITESPACE","\n            ",238],["T_OBJECT_OPERATOR","->",239],["T_STRING","with",239],"(",["T_CONSTANT_ENCAPSED_STRING","\"We can't find the link you requested.\"",239],")",";",["T_WHITESPACE","\n        ",239],["T_VARIABLE","$this",240],["T_OBJECT_OPERATOR","->",240],["T_STRING","redirect",240],["T_OBJECT_OPERATOR","->",240],["T_STRING","expects",240],"(",["T_VARIABLE","$this",240],["T_OBJECT_OPERATOR","->",240],["T_STRING","once",240],"(",")",")",["T_OBJECT_OPERATOR","->",240],["T_STRING","method",240],"(",["T_CONSTANT_ENCAPSED_STRING","'redirect'",240],")",["T_OBJECT_OPERATOR","->",240],["T_STRING","with",240],"(",["T_VARIABLE","$this",240],["T_OBJECT_OPERATOR","->",240],["T_STRING","response",240],",",["T_WHITESPACE"," ",240],["T_CONSTANT_ENCAPSED_STRING","'*\/customer\/products'",240],",",["T_WHITESPACE"," ",240],"[","]",")",";",["T_WHITESPACE","\n\n        ",240],["T_VARIABLE","$this",242],["T_OBJECT_OPERATOR","->",242],["T_STRING","assertEquals",242],"(",["T_VARIABLE","$this",242],["T_OBJECT_OPERATOR","->",242],["T_STRING","response",242],",",["T_WHITESPACE"," ",242],["T_VARIABLE","$this",242],["T_OBJECT_OPERATOR","->",242],["T_STRING","link",242],["T_OBJECT_OPERATOR","->",242],["T_STRING","execute",242],"(",")",")",";",["T_WHITESPACE","\n    ",242],"}",["T_WHITESPACE","\n\n    ",243],["T_PUBLIC","public",245],["T_WHITESPACE"," ",245],["T_FUNCTION","function",245],["T_WHITESPACE"," ",245],["T_STRING","testGetLinkForGuestCustomer",245],"(",")",["T_WHITESPACE","\n    ",245],"{",["T_WHITESPACE","\n        ",246],["T_VARIABLE","$this",247],["T_OBJECT_OPERATOR","->",247],["T_STRING","objectManager",247],["T_OBJECT_OPERATOR","->",247],["T_STRING","expects",247],"(",["T_VARIABLE","$this",247],["T_OBJECT_OPERATOR","->",247],["T_STRING","at",247],"(",["T_LNUMBER","0",247],")",")",["T_WHITESPACE","\n            ",247],["T_OBJECT_OPERATOR","->",248],["T_STRING","method",248],"(",["T_CONSTANT_ENCAPSED_STRING","'get'",248],")",["T_WHITESPACE","\n            ",248],["T_OBJECT_OPERATOR","->",249],["T_STRING","with",249],"(",["T_NS_SEPARATOR","\\",249],["T_STRING","Magento",249],["T_NS_SEPARATOR","\\",249],["T_STRING","Customer",249],["T_NS_SEPARATOR","\\",249],["T_STRING","Model",249],["T_NS_SEPARATOR","\\",249],["T_STRING","Session",249],["T_DOUBLE_COLON","::",249],["T_CLASS","class",249],")",["T_WHITESPACE","\n            ",249],["T_OBJECT_OPERATOR","->",250],["T_STRING","willReturn",250],"(",["T_VARIABLE","$this",250],["T_OBJECT_OPERATOR","->",250],["T_STRING","session",250],")",";",["T_WHITESPACE","\n        ",250],["T_VARIABLE","$this",251],["T_OBJECT_OPERATOR","->",251],["T_STRING","request",251],["T_OBJECT_OPERATOR","->",251],["T_STRING","expects",251],"(",["T_VARIABLE","$this",251],["T_OBJECT_OPERATOR","->",251],["T_STRING","once",251],"(",")",")",["T_OBJECT_OPERATOR","->",251],["T_STRING","method",251],"(",["T_CONSTANT_ENCAPSED_STRING","'getParam'",251],")",["T_OBJECT_OPERATOR","->",251],["T_STRING","with",251],"(",["T_CONSTANT_ENCAPSED_STRING","'id'",251],",",["T_WHITESPACE"," ",251],["T_LNUMBER","0",251],")",["T_OBJECT_OPERATOR","->",251],["T_STRING","willReturn",251],"(",["T_CONSTANT_ENCAPSED_STRING","'some_id'",251],")",";",["T_WHITESPACE","\n        ",251],["T_VARIABLE","$this",252],["T_OBJECT_OPERATOR","->",252],["T_STRING","objectManager",252],["T_OBJECT_OPERATOR","->",252],["T_STRING","expects",252],"(",["T_VARIABLE","$this",252],["T_OBJECT_OPERATOR","->",252],["T_STRING","at",252],"(",["T_LNUMBER","1",252],")",")",["T_WHITESPACE","\n            ",252],["T_OBJECT_OPERATOR","->",253],["T_STRING","method",253],"(",["T_CONSTANT_ENCAPSED_STRING","'create'",253],")",["T_WHITESPACE","\n            ",253],["T_OBJECT_OPERATOR","->",254],["T_STRING","with",254],"(",["T_NS_SEPARATOR","\\",254],["T_STRING","Magento",254],["T_NS_SEPARATOR","\\",254],["T_STRING","Downloadable",254],["T_NS_SEPARATOR","\\",254],["T_STRING","Model",254],["T_NS_SEPARATOR","\\",254],["T_STRING","Link",254],["T_NS_SEPARATOR","\\",254],["T_STRING","Purchased",254],["T_NS_SEPARATOR","\\",254],["T_STRING","Item",254],["T_DOUBLE_COLON","::",254],["T_CLASS","class",254],")",["T_WHITESPACE","\n            ",254],["T_OBJECT_OPERATOR","->",255],["T_STRING","willReturn",255],"(",["T_VARIABLE","$this",255],["T_OBJECT_OPERATOR","->",255],["T_STRING","linkPurchasedItem",255],")",";",["T_WHITESPACE","\n        ",255],["T_VARIABLE","$this",256],["T_OBJECT_OPERATOR","->",256],["T_STRING","linkPurchasedItem",256],["T_OBJECT_OPERATOR","->",256],["T_STRING","expects",256],"(",["T_VARIABLE","$this",256],["T_OBJECT_OPERATOR","->",256],["T_STRING","once",256],"(",")",")",["T_WHITESPACE","\n            ",256],["T_OBJECT_OPERATOR","->",257],["T_STRING","method",257],"(",["T_CONSTANT_ENCAPSED_STRING","'load'",257],")",["T_WHITESPACE","\n            ",257],["T_OBJECT_OPERATOR","->",258],["T_STRING","with",258],"(",["T_CONSTANT_ENCAPSED_STRING","'some_id'",258],",",["T_WHITESPACE"," ",258],["T_CONSTANT_ENCAPSED_STRING","'link_hash'",258],")",["T_WHITESPACE","\n            ",258],["T_OBJECT_OPERATOR","->",259],["T_STRING","willReturnSelf",259],"(",")",";",["T_WHITESPACE","\n        ",259],["T_VARIABLE","$this",260],["T_OBJECT_OPERATOR","->",260],["T_STRING","linkPurchasedItem",260],["T_OBJECT_OPERATOR","->",260],["T_STRING","expects",260],"(",["T_VARIABLE","$this",260],["T_OBJECT_OPERATOR","->",260],["T_STRING","once",260],"(",")",")",["T_OBJECT_OPERATOR","->",260],["T_STRING","method",260],"(",["T_CONSTANT_ENCAPSED_STRING","'getId'",260],")",["T_OBJECT_OPERATOR","->",260],["T_STRING","willReturn",260],"(",["T_LNUMBER","5",260],")",";",["T_WHITESPACE","\n        ",260],["T_VARIABLE","$this",261],["T_OBJECT_OPERATOR","->",261],["T_STRING","objectManager",261],["T_OBJECT_OPERATOR","->",261],["T_STRING","expects",261],"(",["T_VARIABLE","$this",261],["T_OBJECT_OPERATOR","->",261],["T_STRING","at",261],"(",["T_LNUMBER","2",261],")",")",["T_WHITESPACE","\n            ",261],["T_OBJECT_OPERATOR","->",262],["T_STRING","method",262],"(",["T_CONSTANT_ENCAPSED_STRING","'get'",262],")",["T_WHITESPACE","\n            ",262],["T_OBJECT_OPERATOR","->",263],["T_STRING","with",263],"(",["T_NS_SEPARATOR","\\",263],["T_STRING","Magento",263],["T_NS_SEPARATOR","\\",263],["T_STRING","Downloadable",263],["T_NS_SEPARATOR","\\",263],["T_STRING","Helper",263],["T_NS_SEPARATOR","\\",263],["T_STRING","Data",263],["T_DOUBLE_COLON","::",263],["T_CLASS","class",263],")",["T_WHITESPACE","\n            ",263],["T_OBJECT_OPERATOR","->",264],["T_STRING","willReturn",264],"(",["T_VARIABLE","$this",264],["T_OBJECT_OPERATOR","->",264],["T_STRING","helperData",264],")",";",["T_WHITESPACE","\n        ",264],["T_VARIABLE","$this",265],["T_OBJECT_OPERATOR","->",265],["T_STRING","helperData",265],["T_OBJECT_OPERATOR","->",265],["T_STRING","expects",265],"(",["T_VARIABLE","$this",265],["T_OBJECT_OPERATOR","->",265],["T_STRING","once",265],"(",")",")",["T_WHITESPACE","\n            ",265],["T_OBJECT_OPERATOR","->",266],["T_STRING","method",266],"(",["T_CONSTANT_ENCAPSED_STRING","'getIsShareable'",266],")",["T_WHITESPACE","\n            ",266],["T_OBJECT_OPERATOR","->",267],["T_STRING","with",267],"(",["T_VARIABLE","$this",267],["T_OBJECT_OPERATOR","->",267],["T_STRING","linkPurchasedItem",267],")",["T_WHITESPACE","\n            ",267],["T_OBJECT_OPERATOR","->",268],["T_STRING","willReturn",268],"(",["T_STRING","false",268],")",";",["T_WHITESPACE","\n        ",268],["T_VARIABLE","$this",269],["T_OBJECT_OPERATOR","->",269],["T_STRING","session",269],["T_OBJECT_OPERATOR","->",269],["T_STRING","expects",269],"(",["T_VARIABLE","$this",269],["T_OBJECT_OPERATOR","->",269],["T_STRING","once",269],"(",")",")",["T_OBJECT_OPERATOR","->",269],["T_STRING","method",269],"(",["T_CONSTANT_ENCAPSED_STRING","'getCustomerId'",269],")",["T_OBJECT_OPERATOR","->",269],["T_STRING","willReturn",269],"(",["T_STRING","null",269],")",";",["T_WHITESPACE","\n        ",269],["T_VARIABLE","$this",270],["T_OBJECT_OPERATOR","->",270],["T_STRING","objectManager",270],["T_OBJECT_OPERATOR","->",270],["T_STRING","expects",270],"(",["T_VARIABLE","$this",270],["T_OBJECT_OPERATOR","->",270],["T_STRING","at",270],"(",["T_LNUMBER","3",270],")",")",["T_WHITESPACE","\n            ",270],["T_OBJECT_OPERATOR","->",271],["T_STRING","method",271],"(",["T_CONSTANT_ENCAPSED_STRING","'create'",271],")",["T_WHITESPACE","\n            ",271],["T_OBJECT_OPERATOR","->",272],["T_STRING","with",272],"(",["T_NS_SEPARATOR","\\",272],["T_STRING","Magento",272],["T_NS_SEPARATOR","\\",272],["T_STRING","Catalog",272],["T_NS_SEPARATOR","\\",272],["T_STRING","Model",272],["T_NS_SEPARATOR","\\",272],["T_STRING","Product",272],["T_DOUBLE_COLON","::",272],["T_CLASS","class",272],")",["T_WHITESPACE","\n            ",272],["T_OBJECT_OPERATOR","->",273],["T_STRING","willReturn",273],"(",["T_VARIABLE","$this",273],["T_OBJECT_OPERATOR","->",273],["T_STRING","product",273],")",";",["T_WHITESPACE","\n        ",273],["T_VARIABLE","$this",274],["T_OBJECT_OPERATOR","->",274],["T_STRING","linkPurchasedItem",274],["T_OBJECT_OPERATOR","->",274],["T_STRING","expects",274],"(",["T_VARIABLE","$this",274],["T_OBJECT_OPERATOR","->",274],["T_STRING","once",274],"(",")",")",["T_OBJECT_OPERATOR","->",274],["T_STRING","method",274],"(",["T_CONSTANT_ENCAPSED_STRING","'getProductId'",274],")",["T_OBJECT_OPERATOR","->",274],["T_STRING","willReturn",274],"(",["T_CONSTANT_ENCAPSED_STRING","'product_id'",274],")",";",["T_WHITESPACE","\n        ",274],["T_VARIABLE","$this",275],["T_OBJECT_OPERATOR","->",275],["T_STRING","product",275],["T_OBJECT_OPERATOR","->",275],["T_STRING","expects",275],"(",["T_VARIABLE","$this",275],["T_OBJECT_OPERATOR","->",275],["T_STRING","once",275],"(",")",")",["T_OBJECT_OPERATOR","->",275],["T_STRING","method",275],"(",["T_CONSTANT_ENCAPSED_STRING","'load'",275],")",["T_OBJECT_OPERATOR","->",275],["T_STRING","with",275],"(",["T_CONSTANT_ENCAPSED_STRING","'product_id'",275],")",["T_OBJECT_OPERATOR","->",275],["T_STRING","willReturnSelf",275],"(",")",";",["T_WHITESPACE","\n        ",275],["T_VARIABLE","$this",276],["T_OBJECT_OPERATOR","->",276],["T_STRING","product",276],["T_OBJECT_OPERATOR","->",276],["T_STRING","expects",276],"(",["T_VARIABLE","$this",276],["T_OBJECT_OPERATOR","->",276],["T_STRING","once",276],"(",")",")",["T_OBJECT_OPERATOR","->",276],["T_STRING","method",276],"(",["T_CONSTANT_ENCAPSED_STRING","'getId'",276],")",["T_OBJECT_OPERATOR","->",276],["T_STRING","willReturn",276],"(",["T_CONSTANT_ENCAPSED_STRING","'product_id'",276],")",";",["T_WHITESPACE","\n        ",276],["T_VARIABLE","$this",277],["T_OBJECT_OPERATOR","->",277],["T_STRING","product",277],["T_OBJECT_OPERATOR","->",277],["T_STRING","expects",277],"(",["T_VARIABLE","$this",277],["T_OBJECT_OPERATOR","->",277],["T_STRING","once",277],"(",")",")",["T_OBJECT_OPERATOR","->",277],["T_STRING","method",277],"(",["T_CONSTANT_ENCAPSED_STRING","'getProductUrl'",277],")",["T_OBJECT_OPERATOR","->",277],["T_STRING","willReturn",277],"(",["T_CONSTANT_ENCAPSED_STRING","'product_url'",277],")",";",["T_WHITESPACE","\n        ",277],["T_VARIABLE","$this",278],["T_OBJECT_OPERATOR","->",278],["T_STRING","product",278],["T_OBJECT_OPERATOR","->",278],["T_STRING","expects",278],"(",["T_VARIABLE","$this",278],["T_OBJECT_OPERATOR","->",278],["T_STRING","once",278],"(",")",")",["T_OBJECT_OPERATOR","->",278],["T_STRING","method",278],"(",["T_CONSTANT_ENCAPSED_STRING","'getName'",278],")",["T_OBJECT_OPERATOR","->",278],["T_STRING","willReturn",278],"(",["T_CONSTANT_ENCAPSED_STRING","'product_name'",278],")",";",["T_WHITESPACE","\n        ",278],["T_VARIABLE","$this",279],["T_OBJECT_OPERATOR","->",279],["T_STRING","messageManager",279],["T_OBJECT_OPERATOR","->",279],["T_STRING","expects",279],"(",["T_VARIABLE","$this",279],["T_OBJECT_OPERATOR","->",279],["T_STRING","once",279],"(",")",")",["T_WHITESPACE","\n            ",279],["T_OBJECT_OPERATOR","->",280],["T_STRING","method",280],"(",["T_CONSTANT_ENCAPSED_STRING","'addNotice'",280],")",["T_WHITESPACE","\n            ",280],["T_OBJECT_OPERATOR","->",281],["T_STRING","with",281],"(",["T_CONSTANT_ENCAPSED_STRING","'Please sign in to download your product or purchase <a href=\"product_url\">product_name<\/a>.'",281],")",";",["T_WHITESPACE","\n        ",281],["T_VARIABLE","$this",282],["T_OBJECT_OPERATOR","->",282],["T_STRING","session",282],["T_OBJECT_OPERATOR","->",282],["T_STRING","expects",282],"(",["T_VARIABLE","$this",282],["T_OBJECT_OPERATOR","->",282],["T_STRING","once",282],"(",")",")",["T_OBJECT_OPERATOR","->",282],["T_STRING","method",282],"(",["T_CONSTANT_ENCAPSED_STRING","'authenticate'",282],")",["T_OBJECT_OPERATOR","->",282],["T_STRING","willReturn",282],"(",["T_STRING","true",282],")",";",["T_WHITESPACE","\n        ",282],["T_VARIABLE","$this",283],["T_OBJECT_OPERATOR","->",283],["T_STRING","objectManager",283],["T_OBJECT_OPERATOR","->",283],["T_STRING","expects",283],"(",["T_VARIABLE","$this",283],["T_OBJECT_OPERATOR","->",283],["T_STRING","at",283],"(",["T_LNUMBER","4",283],")",")",["T_WHITESPACE","\n            ",283],["T_OBJECT_OPERATOR","->",284],["T_STRING","method",284],"(",["T_CONSTANT_ENCAPSED_STRING","'create'",284],")",["T_WHITESPACE","\n            ",284],["T_OBJECT_OPERATOR","->",285],["T_STRING","with",285],"(",["T_NS_SEPARATOR","\\",285],["T_STRING","Magento",285],["T_NS_SEPARATOR","\\",285],["T_STRING","Framework",285],["T_NS_SEPARATOR","\\",285],["T_STRING","UrlInterface",285],["T_DOUBLE_COLON","::",285],["T_CLASS","class",285],")",["T_WHITESPACE","\n            ",285],["T_OBJECT_OPERATOR","->",286],["T_STRING","willReturn",286],"(",["T_VARIABLE","$this",286],["T_OBJECT_OPERATOR","->",286],["T_STRING","urlInterface",286],")",";",["T_WHITESPACE","\n        ",286],["T_VARIABLE","$this",287],["T_OBJECT_OPERATOR","->",287],["T_STRING","urlInterface",287],["T_OBJECT_OPERATOR","->",287],["T_STRING","expects",287],"(",["T_VARIABLE","$this",287],["T_OBJECT_OPERATOR","->",287],["T_STRING","once",287],"(",")",")",["T_WHITESPACE","\n            ",287],["T_OBJECT_OPERATOR","->",288],["T_STRING","method",288],"(",["T_CONSTANT_ENCAPSED_STRING","'getUrl'",288],")",["T_WHITESPACE","\n            ",288],["T_OBJECT_OPERATOR","->",289],["T_STRING","with",289],"(",["T_CONSTANT_ENCAPSED_STRING","'downloadable\/customer\/products\/'",289],",",["T_WHITESPACE"," ",289],"[",["T_CONSTANT_ENCAPSED_STRING","'_secure'",289],["T_WHITESPACE"," ",289],["T_DOUBLE_ARROW","=>",289],["T_WHITESPACE"," ",289],["T_STRING","true",289],"]",")",["T_WHITESPACE","\n            ",289],["T_OBJECT_OPERATOR","->",290],["T_STRING","willReturn",290],"(",["T_CONSTANT_ENCAPSED_STRING","'before_auth_url'",290],")",";",["T_WHITESPACE","\n        ",290],["T_VARIABLE","$this",291],["T_OBJECT_OPERATOR","->",291],["T_STRING","session",291],["T_OBJECT_OPERATOR","->",291],["T_STRING","expects",291],"(",["T_VARIABLE","$this",291],["T_OBJECT_OPERATOR","->",291],["T_STRING","once",291],"(",")",")",["T_OBJECT_OPERATOR","->",291],["T_STRING","method",291],"(",["T_CONSTANT_ENCAPSED_STRING","'setBeforeAuthUrl'",291],")",["T_OBJECT_OPERATOR","->",291],["T_STRING","with",291],"(",["T_CONSTANT_ENCAPSED_STRING","'before_auth_url'",291],")",["T_OBJECT_OPERATOR","->",291],["T_STRING","willReturnSelf",291],"(",")",";",["T_WHITESPACE","\n\n        ",291],["T_VARIABLE","$this",293],["T_OBJECT_OPERATOR","->",293],["T_STRING","assertNull",293],"(",["T_VARIABLE","$this",293],["T_OBJECT_OPERATOR","->",293],["T_STRING","link",293],["T_OBJECT_OPERATOR","->",293],["T_STRING","execute",293],"(",")",")",";",["T_WHITESPACE","\n    ",293],"}",["T_WHITESPACE","\n\n    ",294],["T_PUBLIC","public",296],["T_WHITESPACE"," ",296],["T_FUNCTION","function",296],["T_WHITESPACE"," ",296],["T_STRING","testGetLinkForWrongCustomer",296],"(",")",["T_WHITESPACE","\n    ",296],"{",["T_WHITESPACE","\n        ",297],["T_VARIABLE","$this",298],["T_OBJECT_OPERATOR","->",298],["T_STRING","objectManager",298],["T_OBJECT_OPERATOR","->",298],["T_STRING","expects",298],"(",["T_VARIABLE","$this",298],["T_OBJECT_OPERATOR","->",298],["T_STRING","at",298],"(",["T_LNUMBER","0",298],")",")",["T_WHITESPACE","\n            ",298],["T_OBJECT_OPERATOR","->",299],["T_STRING","method",299],"(",["T_CONSTANT_ENCAPSED_STRING","'get'",299],")",["T_WHITESPACE","\n            ",299],["T_OBJECT_OPERATOR","->",300],["T_STRING","with",300],"(",["T_NS_SEPARATOR","\\",300],["T_STRING","Magento",300],["T_NS_SEPARATOR","\\",300],["T_STRING","Customer",300],["T_NS_SEPARATOR","\\",300],["T_STRING","Model",300],["T_NS_SEPARATOR","\\",300],["T_STRING","Session",300],["T_DOUBLE_COLON","::",300],["T_CLASS","class",300],")",["T_WHITESPACE","\n            ",300],["T_OBJECT_OPERATOR","->",301],["T_STRING","willReturn",301],"(",["T_VARIABLE","$this",301],["T_OBJECT_OPERATOR","->",301],["T_STRING","session",301],")",";",["T_WHITESPACE","\n        ",301],["T_VARIABLE","$this",302],["T_OBJECT_OPERATOR","->",302],["T_STRING","request",302],["T_OBJECT_OPERATOR","->",302],["T_STRING","expects",302],"(",["T_VARIABLE","$this",302],["T_OBJECT_OPERATOR","->",302],["T_STRING","once",302],"(",")",")",["T_OBJECT_OPERATOR","->",302],["T_STRING","method",302],"(",["T_CONSTANT_ENCAPSED_STRING","'getParam'",302],")",["T_OBJECT_OPERATOR","->",302],["T_STRING","with",302],"(",["T_CONSTANT_ENCAPSED_STRING","'id'",302],",",["T_WHITESPACE"," ",302],["T_LNUMBER","0",302],")",["T_OBJECT_OPERATOR","->",302],["T_STRING","willReturn",302],"(",["T_CONSTANT_ENCAPSED_STRING","'some_id'",302],")",";",["T_WHITESPACE","\n        ",302],["T_VARIABLE","$this",303],["T_OBJECT_OPERATOR","->",303],["T_STRING","objectManager",303],["T_OBJECT_OPERATOR","->",303],["T_STRING","expects",303],"(",["T_VARIABLE","$this",303],["T_OBJECT_OPERATOR","->",303],["T_STRING","at",303],"(",["T_LNUMBER","1",303],")",")",["T_WHITESPACE","\n            ",303],["T_OBJECT_OPERATOR","->",304],["T_STRING","method",304],"(",["T_CONSTANT_ENCAPSED_STRING","'create'",304],")",["T_WHITESPACE","\n            ",304],["T_OBJECT_OPERATOR","->",305],["T_STRING","with",305],"(",["T_NS_SEPARATOR","\\",305],["T_STRING","Magento",305],["T_NS_SEPARATOR","\\",305],["T_STRING","Downloadable",305],["T_NS_SEPARATOR","\\",305],["T_STRING","Model",305],["T_NS_SEPARATOR","\\",305],["T_STRING","Link",305],["T_NS_SEPARATOR","\\",305],["T_STRING","Purchased",305],["T_NS_SEPARATOR","\\",305],["T_STRING","Item",305],["T_DOUBLE_COLON","::",305],["T_CLASS","class",305],")",["T_WHITESPACE","\n            ",305],["T_OBJECT_OPERATOR","->",306],["T_STRING","willReturn",306],"(",["T_VARIABLE","$this",306],["T_OBJECT_OPERATOR","->",306],["T_STRING","linkPurchasedItem",306],")",";",["T_WHITESPACE","\n        ",306],["T_VARIABLE","$this",307],["T_OBJECT_OPERATOR","->",307],["T_STRING","linkPurchasedItem",307],["T_OBJECT_OPERATOR","->",307],["T_STRING","expects",307],"(",["T_VARIABLE","$this",307],["T_OBJECT_OPERATOR","->",307],["T_STRING","once",307],"(",")",")",["T_WHITESPACE","\n            ",307],["T_OBJECT_OPERATOR","->",308],["T_STRING","method",308],"(",["T_CONSTANT_ENCAPSED_STRING","'load'",308],")",["T_WHITESPACE","\n            ",308],["T_OBJECT_OPERATOR","->",309],["T_STRING","with",309],"(",["T_CONSTANT_ENCAPSED_STRING","'some_id'",309],",",["T_WHITESPACE"," ",309],["T_CONSTANT_ENCAPSED_STRING","'link_hash'",309],")",["T_WHITESPACE","\n            ",309],["T_OBJECT_OPERATOR","->",310],["T_STRING","willReturnSelf",310],"(",")",";",["T_WHITESPACE","\n        ",310],["T_VARIABLE","$this",311],["T_OBJECT_OPERATOR","->",311],["T_STRING","linkPurchasedItem",311],["T_OBJECT_OPERATOR","->",311],["T_STRING","expects",311],"(",["T_VARIABLE","$this",311],["T_OBJECT_OPERATOR","->",311],["T_STRING","once",311],"(",")",")",["T_OBJECT_OPERATOR","->",311],["T_STRING","method",311],"(",["T_CONSTANT_ENCAPSED_STRING","'getId'",311],")",["T_OBJECT_OPERATOR","->",311],["T_STRING","willReturn",311],"(",["T_LNUMBER","5",311],")",";",["T_WHITESPACE","\n        ",311],["T_VARIABLE","$this",312],["T_OBJECT_OPERATOR","->",312],["T_STRING","objectManager",312],["T_OBJECT_OPERATOR","->",312],["T_STRING","expects",312],"(",["T_VARIABLE","$this",312],["T_OBJECT_OPERATOR","->",312],["T_STRING","at",312],"(",["T_LNUMBER","2",312],")",")",["T_WHITESPACE","\n            ",312],["T_OBJECT_OPERATOR","->",313],["T_STRING","method",313],"(",["T_CONSTANT_ENCAPSED_STRING","'get'",313],")",["T_WHITESPACE","\n            ",313],["T_OBJECT_OPERATOR","->",314],["T_STRING","with",314],"(",["T_NS_SEPARATOR","\\",314],["T_STRING","Magento",314],["T_NS_SEPARATOR","\\",314],["T_STRING","Downloadable",314],["T_NS_SEPARATOR","\\",314],["T_STRING","Helper",314],["T_NS_SEPARATOR","\\",314],["T_STRING","Data",314],["T_DOUBLE_COLON","::",314],["T_CLASS","class",314],")",["T_WHITESPACE","\n            ",314],["T_OBJECT_OPERATOR","->",315],["T_STRING","willReturn",315],"(",["T_VARIABLE","$this",315],["T_OBJECT_OPERATOR","->",315],["T_STRING","helperData",315],")",";",["T_WHITESPACE","\n        ",315],["T_VARIABLE","$this",316],["T_OBJECT_OPERATOR","->",316],["T_STRING","helperData",316],["T_OBJECT_OPERATOR","->",316],["T_STRING","expects",316],"(",["T_VARIABLE","$this",316],["T_OBJECT_OPERATOR","->",316],["T_STRING","once",316],"(",")",")",["T_WHITESPACE","\n            ",316],["T_OBJECT_OPERATOR","->",317],["T_STRING","method",317],"(",["T_CONSTANT_ENCAPSED_STRING","'getIsShareable'",317],")",["T_WHITESPACE","\n            ",317],["T_OBJECT_OPERATOR","->",318],["T_STRING","with",318],"(",["T_VARIABLE","$this",318],["T_OBJECT_OPERATOR","->",318],["T_STRING","linkPurchasedItem",318],")",["T_WHITESPACE","\n            ",318],["T_OBJECT_OPERATOR","->",319],["T_STRING","willReturn",319],"(",["T_STRING","false",319],")",";",["T_WHITESPACE","\n        ",319],["T_VARIABLE","$this",320],["T_OBJECT_OPERATOR","->",320],["T_STRING","session",320],["T_OBJECT_OPERATOR","->",320],["T_STRING","expects",320],"(",["T_VARIABLE","$this",320],["T_OBJECT_OPERATOR","->",320],["T_STRING","once",320],"(",")",")",["T_OBJECT_OPERATOR","->",320],["T_STRING","method",320],"(",["T_CONSTANT_ENCAPSED_STRING","'getCustomerId'",320],")",["T_OBJECT_OPERATOR","->",320],["T_STRING","willReturn",320],"(",["T_CONSTANT_ENCAPSED_STRING","'customer_id'",320],")",";",["T_WHITESPACE","\n        ",320],["T_VARIABLE","$this",321],["T_OBJECT_OPERATOR","->",321],["T_STRING","objectManager",321],["T_OBJECT_OPERATOR","->",321],["T_STRING","expects",321],"(",["T_VARIABLE","$this",321],["T_OBJECT_OPERATOR","->",321],["T_STRING","at",321],"(",["T_LNUMBER","3",321],")",")",["T_WHITESPACE","\n            ",321],["T_OBJECT_OPERATOR","->",322],["T_STRING","method",322],"(",["T_CONSTANT_ENCAPSED_STRING","'create'",322],")",["T_WHITESPACE","\n            ",322],["T_OBJECT_OPERATOR","->",323],["T_STRING","with",323],"(",["T_NS_SEPARATOR","\\",323],["T_STRING","Magento",323],["T_NS_SEPARATOR","\\",323],["T_STRING","Downloadable",323],["T_NS_SEPARATOR","\\",323],["T_STRING","Model",323],["T_NS_SEPARATOR","\\",323],["T_STRING","Link",323],["T_NS_SEPARATOR","\\",323],["T_STRING","Purchased",323],["T_DOUBLE_COLON","::",323],["T_CLASS","class",323],")",["T_WHITESPACE","\n            ",323],["T_OBJECT_OPERATOR","->",324],["T_STRING","willReturn",324],"(",["T_VARIABLE","$this",324],["T_OBJECT_OPERATOR","->",324],["T_STRING","linkPurchased",324],")",";",["T_WHITESPACE","\n        ",324],["T_VARIABLE","$this",325],["T_OBJECT_OPERATOR","->",325],["T_STRING","linkPurchasedItem",325],["T_OBJECT_OPERATOR","->",325],["T_STRING","expects",325],"(",["T_VARIABLE","$this",325],["T_OBJECT_OPERATOR","->",325],["T_STRING","once",325],"(",")",")",["T_OBJECT_OPERATOR","->",325],["T_STRING","method",325],"(",["T_CONSTANT_ENCAPSED_STRING","'getPurchasedId'",325],")",["T_OBJECT_OPERATOR","->",325],["T_STRING","willReturn",325],"(",["T_CONSTANT_ENCAPSED_STRING","'purchased_id'",325],")",";",["T_WHITESPACE","\n        ",325],["T_VARIABLE","$this",326],["T_OBJECT_OPERATOR","->",326],["T_STRING","linkPurchased",326],["T_OBJECT_OPERATOR","->",326],["T_STRING","expects",326],"(",["T_VARIABLE","$this",326],["T_OBJECT_OPERATOR","->",326],["T_STRING","once",326],"(",")",")",["T_OBJECT_OPERATOR","->",326],["T_STRING","method",326],"(",["T_CONSTANT_ENCAPSED_STRING","'load'",326],")",["T_OBJECT_OPERATOR","->",326],["T_STRING","with",326],"(",["T_CONSTANT_ENCAPSED_STRING","'purchased_id'",326],")",["T_OBJECT_OPERATOR","->",326],["T_STRING","willReturnSelf",326],"(",")",";",["T_WHITESPACE","\n        ",326],["T_VARIABLE","$this",327],["T_OBJECT_OPERATOR","->",327],["T_STRING","linkPurchased",327],["T_OBJECT_OPERATOR","->",327],["T_STRING","expects",327],"(",["T_VARIABLE","$this",327],["T_OBJECT_OPERATOR","->",327],["T_STRING","once",327],"(",")",")",["T_OBJECT_OPERATOR","->",327],["T_STRING","method",327],"(",["T_CONSTANT_ENCAPSED_STRING","'getCustomerId'",327],")",["T_OBJECT_OPERATOR","->",327],["T_STRING","willReturn",327],"(",["T_CONSTANT_ENCAPSED_STRING","'other_customer_id'",327],")",";",["T_WHITESPACE","\n        ",327],["T_VARIABLE","$this",328],["T_OBJECT_OPERATOR","->",328],["T_STRING","messageManager",328],["T_OBJECT_OPERATOR","->",328],["T_STRING","expects",328],"(",["T_VARIABLE","$this",328],["T_OBJECT_OPERATOR","->",328],["T_STRING","once",328],"(",")",")",["T_WHITESPACE","\n            ",328],["T_OBJECT_OPERATOR","->",329],["T_STRING","method",329],"(",["T_CONSTANT_ENCAPSED_STRING","'addNotice'",329],")",["T_WHITESPACE","\n            ",329],["T_OBJECT_OPERATOR","->",330],["T_STRING","with",330],"(",["T_CONSTANT_ENCAPSED_STRING","\"We can't find the link you requested.\"",330],")",";",["T_WHITESPACE","\n        ",330],["T_VARIABLE","$this",331],["T_OBJECT_OPERATOR","->",331],["T_STRING","redirect",331],["T_OBJECT_OPERATOR","->",331],["T_STRING","expects",331],"(",["T_VARIABLE","$this",331],["T_OBJECT_OPERATOR","->",331],["T_STRING","once",331],"(",")",")",["T_OBJECT_OPERATOR","->",331],["T_STRING","method",331],"(",["T_CONSTANT_ENCAPSED_STRING","'redirect'",331],")",["T_OBJECT_OPERATOR","->",331],["T_STRING","with",331],"(",["T_VARIABLE","$this",331],["T_OBJECT_OPERATOR","->",331],["T_STRING","response",331],",",["T_WHITESPACE"," ",331],["T_CONSTANT_ENCAPSED_STRING","'*\/customer\/products'",331],",",["T_WHITESPACE"," ",331],"[","]",")",";",["T_WHITESPACE","\n\n        ",331],["T_VARIABLE","$this",333],["T_OBJECT_OPERATOR","->",333],["T_STRING","assertEquals",333],"(",["T_VARIABLE","$this",333],["T_OBJECT_OPERATOR","->",333],["T_STRING","response",333],",",["T_WHITESPACE"," ",333],["T_VARIABLE","$this",333],["T_OBJECT_OPERATOR","->",333],["T_STRING","link",333],["T_OBJECT_OPERATOR","->",333],["T_STRING","execute",333],"(",")",")",";",["T_WHITESPACE","\n    ",333],"}",["T_WHITESPACE","\n\n    ",334],["T_PUBLIC","public",336],["T_WHITESPACE"," ",336],["T_FUNCTION","function",336],["T_WHITESPACE"," ",336],["T_STRING","testExceptionInUpdateLinkStatus",336],"(",")",["T_WHITESPACE","\n    ",336],"{",["T_WHITESPACE","\n        ",337],["T_VARIABLE","$this",338],["T_OBJECT_OPERATOR","->",338],["T_STRING","objectManager",338],["T_OBJECT_OPERATOR","->",338],["T_STRING","expects",338],"(",["T_VARIABLE","$this",338],["T_OBJECT_OPERATOR","->",338],["T_STRING","at",338],"(",["T_LNUMBER","0",338],")",")",["T_WHITESPACE","\n            ",338],["T_OBJECT_OPERATOR","->",339],["T_STRING","method",339],"(",["T_CONSTANT_ENCAPSED_STRING","'get'",339],")",["T_WHITESPACE","\n            ",339],["T_OBJECT_OPERATOR","->",340],["T_STRING","with",340],"(",["T_NS_SEPARATOR","\\",340],["T_STRING","Magento",340],["T_NS_SEPARATOR","\\",340],["T_STRING","Customer",340],["T_NS_SEPARATOR","\\",340],["T_STRING","Model",340],["T_NS_SEPARATOR","\\",340],["T_STRING","Session",340],["T_DOUBLE_COLON","::",340],["T_CLASS","class",340],")",["T_WHITESPACE","\n            ",340],["T_OBJECT_OPERATOR","->",341],["T_STRING","willReturn",341],"(",["T_VARIABLE","$this",341],["T_OBJECT_OPERATOR","->",341],["T_STRING","session",341],")",";",["T_WHITESPACE","\n        ",341],["T_VARIABLE","$this",342],["T_OBJECT_OPERATOR","->",342],["T_STRING","request",342],["T_OBJECT_OPERATOR","->",342],["T_STRING","expects",342],"(",["T_VARIABLE","$this",342],["T_OBJECT_OPERATOR","->",342],["T_STRING","once",342],"(",")",")",["T_OBJECT_OPERATOR","->",342],["T_STRING","method",342],"(",["T_CONSTANT_ENCAPSED_STRING","'getParam'",342],")",["T_OBJECT_OPERATOR","->",342],["T_STRING","with",342],"(",["T_CONSTANT_ENCAPSED_STRING","'id'",342],",",["T_WHITESPACE"," ",342],["T_LNUMBER","0",342],")",["T_OBJECT_OPERATOR","->",342],["T_STRING","willReturn",342],"(",["T_CONSTANT_ENCAPSED_STRING","'some_id'",342],")",";",["T_WHITESPACE","\n        ",342],["T_VARIABLE","$this",343],["T_OBJECT_OPERATOR","->",343],["T_STRING","objectManager",343],["T_OBJECT_OPERATOR","->",343],["T_STRING","expects",343],"(",["T_VARIABLE","$this",343],["T_OBJECT_OPERATOR","->",343],["T_STRING","at",343],"(",["T_LNUMBER","1",343],")",")",["T_WHITESPACE","\n            ",343],["T_OBJECT_OPERATOR","->",344],["T_STRING","method",344],"(",["T_CONSTANT_ENCAPSED_STRING","'create'",344],")",["T_WHITESPACE","\n            ",344],["T_OBJECT_OPERATOR","->",345],["T_STRING","with",345],"(",["T_NS_SEPARATOR","\\",345],["T_STRING","Magento",345],["T_NS_SEPARATOR","\\",345],["T_STRING","Downloadable",345],["T_NS_SEPARATOR","\\",345],["T_STRING","Model",345],["T_NS_SEPARATOR","\\",345],["T_STRING","Link",345],["T_NS_SEPARATOR","\\",345],["T_STRING","Purchased",345],["T_NS_SEPARATOR","\\",345],["T_STRING","Item",345],["T_DOUBLE_COLON","::",345],["T_CLASS","class",345],")",["T_WHITESPACE","\n            ",345],["T_OBJECT_OPERATOR","->",346],["T_STRING","willReturn",346],"(",["T_VARIABLE","$this",346],["T_OBJECT_OPERATOR","->",346],["T_STRING","linkPurchasedItem",346],")",";",["T_WHITESPACE","\n        ",346],["T_VARIABLE","$this",347],["T_OBJECT_OPERATOR","->",347],["T_STRING","linkPurchasedItem",347],["T_OBJECT_OPERATOR","->",347],["T_STRING","expects",347],"(",["T_VARIABLE","$this",347],["T_OBJECT_OPERATOR","->",347],["T_STRING","once",347],"(",")",")",["T_WHITESPACE","\n            ",347],["T_OBJECT_OPERATOR","->",348],["T_STRING","method",348],"(",["T_CONSTANT_ENCAPSED_STRING","'load'",348],")",["T_WHITESPACE","\n            ",348],["T_OBJECT_OPERATOR","->",349],["T_STRING","with",349],"(",["T_CONSTANT_ENCAPSED_STRING","'some_id'",349],",",["T_WHITESPACE"," ",349],["T_CONSTANT_ENCAPSED_STRING","'link_hash'",349],")",["T_WHITESPACE","\n            ",349],["T_OBJECT_OPERATOR","->",350],["T_STRING","willReturnSelf",350],"(",")",";",["T_WHITESPACE","\n        ",350],["T_VARIABLE","$this",351],["T_OBJECT_OPERATOR","->",351],["T_STRING","linkPurchasedItem",351],["T_OBJECT_OPERATOR","->",351],["T_STRING","expects",351],"(",["T_VARIABLE","$this",351],["T_OBJECT_OPERATOR","->",351],["T_STRING","once",351],"(",")",")",["T_OBJECT_OPERATOR","->",351],["T_STRING","method",351],"(",["T_CONSTANT_ENCAPSED_STRING","'getId'",351],")",["T_OBJECT_OPERATOR","->",351],["T_STRING","willReturn",351],"(",["T_LNUMBER","5",351],")",";",["T_WHITESPACE","\n        ",351],["T_VARIABLE","$this",352],["T_OBJECT_OPERATOR","->",352],["T_STRING","objectManager",352],["T_OBJECT_OPERATOR","->",352],["T_STRING","expects",352],"(",["T_VARIABLE","$this",352],["T_OBJECT_OPERATOR","->",352],["T_STRING","at",352],"(",["T_LNUMBER","2",352],")",")",["T_WHITESPACE","\n            ",352],["T_OBJECT_OPERATOR","->",353],["T_STRING","method",353],"(",["T_CONSTANT_ENCAPSED_STRING","'get'",353],")",["T_WHITESPACE","\n            ",353],["T_OBJECT_OPERATOR","->",354],["T_STRING","with",354],"(",["T_NS_SEPARATOR","\\",354],["T_STRING","Magento",354],["T_NS_SEPARATOR","\\",354],["T_STRING","Downloadable",354],["T_NS_SEPARATOR","\\",354],["T_STRING","Helper",354],["T_NS_SEPARATOR","\\",354],["T_STRING","Data",354],["T_DOUBLE_COLON","::",354],["T_CLASS","class",354],")",["T_WHITESPACE","\n            ",354],["T_OBJECT_OPERATOR","->",355],["T_STRING","willReturn",355],"(",["T_VARIABLE","$this",355],["T_OBJECT_OPERATOR","->",355],["T_STRING","helperData",355],")",";",["T_WHITESPACE","\n        ",355],["T_VARIABLE","$this",356],["T_OBJECT_OPERATOR","->",356],["T_STRING","helperData",356],["T_OBJECT_OPERATOR","->",356],["T_STRING","expects",356],"(",["T_VARIABLE","$this",356],["T_OBJECT_OPERATOR","->",356],["T_STRING","once",356],"(",")",")",["T_WHITESPACE","\n            ",356],["T_OBJECT_OPERATOR","->",357],["T_STRING","method",357],"(",["T_CONSTANT_ENCAPSED_STRING","'getIsShareable'",357],")",["T_WHITESPACE","\n            ",357],["T_OBJECT_OPERATOR","->",358],["T_STRING","with",358],"(",["T_VARIABLE","$this",358],["T_OBJECT_OPERATOR","->",358],["T_STRING","linkPurchasedItem",358],")",["T_WHITESPACE","\n            ",358],["T_OBJECT_OPERATOR","->",359],["T_STRING","willReturn",359],"(",["T_STRING","true",359],")",";",["T_WHITESPACE","\n        ",359],["T_VARIABLE","$this",360],["T_OBJECT_OPERATOR","->",360],["T_STRING","linkPurchasedItem",360],["T_OBJECT_OPERATOR","->",360],["T_STRING","expects",360],"(",["T_VARIABLE","$this",360],["T_OBJECT_OPERATOR","->",360],["T_STRING","any",360],"(",")",")",["T_OBJECT_OPERATOR","->",360],["T_STRING","method",360],"(",["T_CONSTANT_ENCAPSED_STRING","'getNumberOfDownloadsBought'",360],")",["T_OBJECT_OPERATOR","->",360],["T_STRING","willReturn",360],"(",["T_LNUMBER","10",360],")",";",["T_WHITESPACE","\n        ",360],["T_VARIABLE","$this",361],["T_OBJECT_OPERATOR","->",361],["T_STRING","linkPurchasedItem",361],["T_OBJECT_OPERATOR","->",361],["T_STRING","expects",361],"(",["T_VARIABLE","$this",361],["T_OBJECT_OPERATOR","->",361],["T_STRING","any",361],"(",")",")",["T_OBJECT_OPERATOR","->",361],["T_STRING","method",361],"(",["T_CONSTANT_ENCAPSED_STRING","'getNumberOfDownloadsUsed'",361],")",["T_OBJECT_OPERATOR","->",361],["T_STRING","willReturn",361],"(",["T_LNUMBER","9",361],")",";",["T_WHITESPACE","\n        ",361],["T_VARIABLE","$this",362],["T_OBJECT_OPERATOR","->",362],["T_STRING","linkPurchasedItem",362],["T_OBJECT_OPERATOR","->",362],["T_STRING","expects",362],"(",["T_VARIABLE","$this",362],["T_OBJECT_OPERATOR","->",362],["T_STRING","once",362],"(",")",")",["T_OBJECT_OPERATOR","->",362],["T_STRING","method",362],"(",["T_CONSTANT_ENCAPSED_STRING","'getStatus'",362],")",["T_OBJECT_OPERATOR","->",362],["T_STRING","willReturn",362],"(",["T_CONSTANT_ENCAPSED_STRING","'available'",362],")",";",["T_WHITESPACE","\n        ",362],["T_VARIABLE","$this",363],["T_OBJECT_OPERATOR","->",363],["T_STRING","linkPurchasedItem",363],["T_OBJECT_OPERATOR","->",363],["T_STRING","expects",363],"(",["T_VARIABLE","$this",363],["T_OBJECT_OPERATOR","->",363],["T_STRING","once",363],"(",")",")",["T_OBJECT_OPERATOR","->",363],["T_STRING","method",363],"(",["T_CONSTANT_ENCAPSED_STRING","'getLinkType'",363],")",["T_OBJECT_OPERATOR","->",363],["T_STRING","willReturn",363],"(",["T_CONSTANT_ENCAPSED_STRING","'url'",363],")",";",["T_WHITESPACE","\n        ",363],["T_VARIABLE","$this",364],["T_OBJECT_OPERATOR","->",364],["T_STRING","linkPurchasedItem",364],["T_OBJECT_OPERATOR","->",364],["T_STRING","expects",364],"(",["T_VARIABLE","$this",364],["T_OBJECT_OPERATOR","->",364],["T_STRING","once",364],"(",")",")",["T_OBJECT_OPERATOR","->",364],["T_STRING","method",364],"(",["T_CONSTANT_ENCAPSED_STRING","'getLinkUrl'",364],")",["T_OBJECT_OPERATOR","->",364],["T_STRING","willReturn",364],"(",["T_CONSTANT_ENCAPSED_STRING","'link_url'",364],")",";",["T_WHITESPACE","\n\n        ",364],["T_VARIABLE","$this",366],["T_OBJECT_OPERATOR","->",366],["T_STRING","processDownload",366],"(",["T_CONSTANT_ENCAPSED_STRING","'link_url'",366],",",["T_WHITESPACE"," ",366],["T_CONSTANT_ENCAPSED_STRING","'url'",366],")",";",["T_WHITESPACE","\n\n        ",366],["T_VARIABLE","$this",368],["T_OBJECT_OPERATOR","->",368],["T_STRING","linkPurchasedItem",368],["T_OBJECT_OPERATOR","->",368],["T_STRING","expects",368],"(",["T_VARIABLE","$this",368],["T_OBJECT_OPERATOR","->",368],["T_STRING","any",368],"(",")",")",["T_OBJECT_OPERATOR","->",368],["T_STRING","method",368],"(",["T_CONSTANT_ENCAPSED_STRING","'setNumberOfDownloadsUsed'",368],")",["T_OBJECT_OPERATOR","->",368],["T_STRING","willReturnSelf",368],"(",")",";",["T_WHITESPACE","\n        ",368],["T_VARIABLE","$this",369],["T_OBJECT_OPERATOR","->",369],["T_STRING","linkPurchasedItem",369],["T_OBJECT_OPERATOR","->",369],["T_STRING","expects",369],"(",["T_VARIABLE","$this",369],["T_OBJECT_OPERATOR","->",369],["T_STRING","any",369],"(",")",")",["T_OBJECT_OPERATOR","->",369],["T_STRING","method",369],"(",["T_CONSTANT_ENCAPSED_STRING","'setStatus'",369],")",["T_OBJECT_OPERATOR","->",369],["T_STRING","with",369],"(",["T_CONSTANT_ENCAPSED_STRING","'expired'",369],")",["T_OBJECT_OPERATOR","->",369],["T_STRING","willReturnSelf",369],"(",")",";",["T_WHITESPACE","\n        ",369],["T_VARIABLE","$this",370],["T_OBJECT_OPERATOR","->",370],["T_STRING","linkPurchasedItem",370],["T_OBJECT_OPERATOR","->",370],["T_STRING","expects",370],"(",["T_VARIABLE","$this",370],["T_OBJECT_OPERATOR","->",370],["T_STRING","any",370],"(",")",")",["T_OBJECT_OPERATOR","->",370],["T_STRING","method",370],"(",["T_CONSTANT_ENCAPSED_STRING","'save'",370],")",["T_OBJECT_OPERATOR","->",370],["T_STRING","willThrowException",370],"(",["T_NEW","new",370],["T_WHITESPACE"," ",370],["T_NS_SEPARATOR","\\",370],["T_STRING","Exception",370],"(",")",")",";",["T_WHITESPACE","\n        ",370],["T_VARIABLE","$this",371],["T_OBJECT_OPERATOR","->",371],["T_STRING","messageManager",371],["T_OBJECT_OPERATOR","->",371],["T_STRING","expects",371],"(",["T_VARIABLE","$this",371],["T_OBJECT_OPERATOR","->",371],["T_STRING","once",371],"(",")",")",["T_WHITESPACE","\n            ",371],["T_OBJECT_OPERATOR","->",372],["T_STRING","method",372],"(",["T_CONSTANT_ENCAPSED_STRING","'addError'",372],")",["T_WHITESPACE","\n            ",372],["T_OBJECT_OPERATOR","->",373],["T_STRING","with",373],"(",["T_CONSTANT_ENCAPSED_STRING","'Something went wrong while getting the requested content.'",373],")",["T_WHITESPACE","\n            ",373],["T_OBJECT_OPERATOR","->",374],["T_STRING","willReturnSelf",374],"(",")",";",["T_WHITESPACE","\n        ",374],["T_VARIABLE","$this",375],["T_OBJECT_OPERATOR","->",375],["T_STRING","redirect",375],["T_OBJECT_OPERATOR","->",375],["T_STRING","expects",375],"(",["T_VARIABLE","$this",375],["T_OBJECT_OPERATOR","->",375],["T_STRING","once",375],"(",")",")",["T_OBJECT_OPERATOR","->",375],["T_STRING","method",375],"(",["T_CONSTANT_ENCAPSED_STRING","'redirect'",375],")",["T_OBJECT_OPERATOR","->",375],["T_STRING","with",375],"(",["T_VARIABLE","$this",375],["T_OBJECT_OPERATOR","->",375],["T_STRING","response",375],",",["T_WHITESPACE"," ",375],["T_CONSTANT_ENCAPSED_STRING","'*\/customer\/products'",375],",",["T_WHITESPACE"," ",375],"[","]",")",";",["T_WHITESPACE","\n\n        ",375],["T_VARIABLE","$this",377],["T_OBJECT_OPERATOR","->",377],["T_STRING","assertEquals",377],"(",["T_VARIABLE","$this",377],["T_OBJECT_OPERATOR","->",377],["T_STRING","response",377],",",["T_WHITESPACE"," ",377],["T_VARIABLE","$this",377],["T_OBJECT_OPERATOR","->",377],["T_STRING","link",377],["T_OBJECT_OPERATOR","->",377],["T_STRING","execute",377],"(",")",")",";",["T_WHITESPACE","\n    ",377],"}",["T_WHITESPACE","\n\n    ",378],["T_PRIVATE","private",380],["T_WHITESPACE"," ",380],["T_FUNCTION","function",380],["T_WHITESPACE"," ",380],["T_STRING","processDownload",380],"(",["T_VARIABLE","$resource",380],",",["T_WHITESPACE"," ",380],["T_VARIABLE","$resourceType",380],")",["T_WHITESPACE","\n    ",380],"{",["T_WHITESPACE","\n        ",381],["T_VARIABLE","$this",382],["T_OBJECT_OPERATOR","->",382],["T_STRING","objectManager",382],["T_OBJECT_OPERATOR","->",382],["T_STRING","expects",382],"(",["T_VARIABLE","$this",382],["T_OBJECT_OPERATOR","->",382],["T_STRING","at",382],"(",["T_LNUMBER","3",382],")",")",["T_WHITESPACE","\n            ",382],["T_OBJECT_OPERATOR","->",383],["T_STRING","method",383],"(",["T_CONSTANT_ENCAPSED_STRING","'get'",383],")",["T_WHITESPACE","\n            ",383],["T_OBJECT_OPERATOR","->",384],["T_STRING","with",384],"(",["T_NS_SEPARATOR","\\",384],["T_STRING","Magento",384],["T_NS_SEPARATOR","\\",384],["T_STRING","Downloadable",384],["T_NS_SEPARATOR","\\",384],["T_STRING","Helper",384],["T_NS_SEPARATOR","\\",384],["T_STRING","Download",384],["T_DOUBLE_COLON","::",384],["T_CLASS","class",384],")",["T_WHITESPACE","\n            ",384],["T_OBJECT_OPERATOR","->",385],["T_STRING","willReturn",385],"(",["T_VARIABLE","$this",385],["T_OBJECT_OPERATOR","->",385],["T_STRING","downloadHelper",385],")",";",["T_WHITESPACE","\n        ",385],["T_VARIABLE","$this",386],["T_OBJECT_OPERATOR","->",386],["T_STRING","downloadHelper",386],["T_OBJECT_OPERATOR","->",386],["T_STRING","expects",386],"(",["T_VARIABLE","$this",386],["T_OBJECT_OPERATOR","->",386],["T_STRING","once",386],"(",")",")",["T_WHITESPACE","\n            ",386],["T_OBJECT_OPERATOR","->",387],["T_STRING","method",387],"(",["T_CONSTANT_ENCAPSED_STRING","'setResource'",387],")",["T_WHITESPACE","\n            ",387],["T_OBJECT_OPERATOR","->",388],["T_STRING","with",388],"(",["T_VARIABLE","$resource",388],",",["T_WHITESPACE"," ",388],["T_VARIABLE","$resourceType",388],")",["T_WHITESPACE","\n            ",388],["T_OBJECT_OPERATOR","->",389],["T_STRING","willReturnSelf",389],"(",")",";",["T_WHITESPACE","\n        ",389],["T_VARIABLE","$this",390],["T_OBJECT_OPERATOR","->",390],["T_STRING","downloadHelper",390],["T_OBJECT_OPERATOR","->",390],["T_STRING","expects",390],"(",["T_VARIABLE","$this",390],["T_OBJECT_OPERATOR","->",390],["T_STRING","once",390],"(",")",")",["T_OBJECT_OPERATOR","->",390],["T_STRING","method",390],"(",["T_CONSTANT_ENCAPSED_STRING","'getFilename'",390],")",["T_OBJECT_OPERATOR","->",390],["T_STRING","willReturn",390],"(",["T_CONSTANT_ENCAPSED_STRING","'file_name'",390],")",";",["T_WHITESPACE","\n        ",390],["T_VARIABLE","$this",391],["T_OBJECT_OPERATOR","->",391],["T_STRING","downloadHelper",391],["T_OBJECT_OPERATOR","->",391],["T_STRING","expects",391],"(",["T_VARIABLE","$this",391],["T_OBJECT_OPERATOR","->",391],["T_STRING","once",391],"(",")",")",["T_OBJECT_OPERATOR","->",391],["T_STRING","method",391],"(",["T_CONSTANT_ENCAPSED_STRING","'getContentType'",391],")",["T_OBJECT_OPERATOR","->",391],["T_STRING","willReturn",391],"(",["T_CONSTANT_ENCAPSED_STRING","'content_type'",391],")",";",["T_WHITESPACE","\n        ",391],["T_VARIABLE","$this",392],["T_OBJECT_OPERATOR","->",392],["T_STRING","response",392],["T_OBJECT_OPERATOR","->",392],["T_STRING","expects",392],"(",["T_VARIABLE","$this",392],["T_OBJECT_OPERATOR","->",392],["T_STRING","once",392],"(",")",")",["T_OBJECT_OPERATOR","->",392],["T_STRING","method",392],"(",["T_CONSTANT_ENCAPSED_STRING","'setHttpResponseCode'",392],")",["T_OBJECT_OPERATOR","->",392],["T_STRING","with",392],"(",["T_LNUMBER","200",392],")",["T_OBJECT_OPERATOR","->",392],["T_STRING","willReturnSelf",392],"(",")",";",["T_WHITESPACE","\n        ",392],["T_VARIABLE","$this",393],["T_OBJECT_OPERATOR","->",393],["T_STRING","response",393],["T_OBJECT_OPERATOR","->",393],["T_STRING","expects",393],"(",["T_VARIABLE","$this",393],["T_OBJECT_OPERATOR","->",393],["T_STRING","at",393],"(",["T_LNUMBER","1",393],")",")",["T_OBJECT_OPERATOR","->",393],["T_STRING","method",393],"(",["T_CONSTANT_ENCAPSED_STRING","'setHeader'",393],")",["T_OBJECT_OPERATOR","->",393],["T_STRING","with",393],"(",["T_CONSTANT_ENCAPSED_STRING","'Pragma'",393],",",["T_WHITESPACE"," ",393],["T_CONSTANT_ENCAPSED_STRING","'public'",393],",",["T_WHITESPACE"," ",393],["T_STRING","true",393],")",["T_OBJECT_OPERATOR","->",393],["T_STRING","willReturnSelf",393],"(",")",";",["T_WHITESPACE","\n        ",393],["T_VARIABLE","$this",394],["T_OBJECT_OPERATOR","->",394],["T_STRING","response",394],["T_OBJECT_OPERATOR","->",394],["T_STRING","expects",394],"(",["T_VARIABLE","$this",394],["T_OBJECT_OPERATOR","->",394],["T_STRING","at",394],"(",["T_LNUMBER","2",394],")",")",["T_WHITESPACE","\n            ",394],["T_OBJECT_OPERATOR","->",395],["T_STRING","method",395],"(",["T_CONSTANT_ENCAPSED_STRING","'setHeader'",395],")",["T_WHITESPACE","\n            ",395],["T_OBJECT_OPERATOR","->",396],["T_STRING","with",396],"(",["T_CONSTANT_ENCAPSED_STRING","'Cache-Control'",396],",",["T_WHITESPACE"," ",396],["T_CONSTANT_ENCAPSED_STRING","'must-revalidate, post-check=0, pre-check=0'",396],",",["T_WHITESPACE"," ",396],["T_STRING","true",396],")",["T_WHITESPACE","\n            ",396],["T_OBJECT_OPERATOR","->",397],["T_STRING","willReturnSelf",397],"(",")",";",["T_WHITESPACE","\n        ",397],["T_VARIABLE","$this",398],["T_OBJECT_OPERATOR","->",398],["T_STRING","response",398],["T_OBJECT_OPERATOR","->",398],["T_STRING","expects",398],"(",["T_VARIABLE","$this",398],["T_OBJECT_OPERATOR","->",398],["T_STRING","at",398],"(",["T_LNUMBER","3",398],")",")",["T_WHITESPACE","\n            ",398],["T_OBJECT_OPERATOR","->",399],["T_STRING","method",399],"(",["T_CONSTANT_ENCAPSED_STRING","'setHeader'",399],")",["T_WHITESPACE","\n            ",399],["T_OBJECT_OPERATOR","->",400],["T_STRING","with",400],"(",["T_CONSTANT_ENCAPSED_STRING","'Content-type'",400],",",["T_WHITESPACE"," ",400],["T_CONSTANT_ENCAPSED_STRING","'content_type'",400],",",["T_WHITESPACE"," ",400],["T_STRING","true",400],")",["T_WHITESPACE","\n            ",400],["T_OBJECT_OPERATOR","->",401],["T_STRING","willReturnSelf",401],"(",")",";",["T_WHITESPACE","\n        ",401],["T_VARIABLE","$this",402],["T_OBJECT_OPERATOR","->",402],["T_STRING","downloadHelper",402],["T_OBJECT_OPERATOR","->",402],["T_STRING","expects",402],"(",["T_VARIABLE","$this",402],["T_OBJECT_OPERATOR","->",402],["T_STRING","once",402],"(",")",")",["T_OBJECT_OPERATOR","->",402],["T_STRING","method",402],"(",["T_CONSTANT_ENCAPSED_STRING","'getFileSize'",402],")",["T_OBJECT_OPERATOR","->",402],["T_STRING","willReturn",402],"(",["T_CONSTANT_ENCAPSED_STRING","'file_size'",402],")",";",["T_WHITESPACE","\n        ",402],["T_VARIABLE","$this",403],["T_OBJECT_OPERATOR","->",403],["T_STRING","response",403],["T_OBJECT_OPERATOR","->",403],["T_STRING","expects",403],"(",["T_VARIABLE","$this",403],["T_OBJECT_OPERATOR","->",403],["T_STRING","at",403],"(",["T_LNUMBER","4",403],")",")",["T_WHITESPACE","\n            ",403],["T_OBJECT_OPERATOR","->",404],["T_STRING","method",404],"(",["T_CONSTANT_ENCAPSED_STRING","'setHeader'",404],")",["T_WHITESPACE","\n            ",404],["T_OBJECT_OPERATOR","->",405],["T_STRING","with",405],"(",["T_CONSTANT_ENCAPSED_STRING","'Content-Length'",405],",",["T_WHITESPACE"," ",405],["T_CONSTANT_ENCAPSED_STRING","'file_size'",405],")",["T_WHITESPACE","\n            ",405],["T_OBJECT_OPERATOR","->",406],["T_STRING","willReturnSelf",406],"(",")",";",["T_WHITESPACE","\n        ",406],["T_VARIABLE","$this",407],["T_OBJECT_OPERATOR","->",407],["T_STRING","downloadHelper",407],["T_OBJECT_OPERATOR","->",407],["T_STRING","expects",407],"(",["T_VARIABLE","$this",407],["T_OBJECT_OPERATOR","->",407],["T_STRING","once",407],"(",")",")",["T_WHITESPACE","\n            ",407],["T_OBJECT_OPERATOR","->",408],["T_STRING","method",408],"(",["T_CONSTANT_ENCAPSED_STRING","'getContentDisposition'",408],")",["T_WHITESPACE","\n            ",408],["T_OBJECT_OPERATOR","->",409],["T_STRING","willReturn",409],"(",["T_CONSTANT_ENCAPSED_STRING","'content_disposition'",409],")",";",["T_WHITESPACE","\n        ",409],["T_VARIABLE","$this",410],["T_OBJECT_OPERATOR","->",410],["T_STRING","response",410],["T_OBJECT_OPERATOR","->",410],["T_STRING","expects",410],"(",["T_VARIABLE","$this",410],["T_OBJECT_OPERATOR","->",410],["T_STRING","at",410],"(",["T_LNUMBER","5",410],")",")",["T_WHITESPACE","\n            ",410],["T_OBJECT_OPERATOR","->",411],["T_STRING","method",411],"(",["T_CONSTANT_ENCAPSED_STRING","'setHeader'",411],")",["T_WHITESPACE","\n            ",411],["T_OBJECT_OPERATOR","->",412],["T_STRING","with",412],"(",["T_CONSTANT_ENCAPSED_STRING","'Content-Disposition'",412],",",["T_WHITESPACE"," ",412],["T_CONSTANT_ENCAPSED_STRING","'content_disposition; filename=file_name'",412],")",["T_WHITESPACE","\n            ",412],["T_OBJECT_OPERATOR","->",413],["T_STRING","willReturnSelf",413],"(",")",";",["T_WHITESPACE","\n        ",413],["T_VARIABLE","$this",414],["T_OBJECT_OPERATOR","->",414],["T_STRING","response",414],["T_OBJECT_OPERATOR","->",414],["T_STRING","expects",414],"(",["T_VARIABLE","$this",414],["T_OBJECT_OPERATOR","->",414],["T_STRING","once",414],"(",")",")",["T_OBJECT_OPERATOR","->",414],["T_STRING","method",414],"(",["T_CONSTANT_ENCAPSED_STRING","'clearBody'",414],")",["T_OBJECT_OPERATOR","->",414],["T_STRING","willReturnSelf",414],"(",")",";",["T_WHITESPACE","\n        ",414],["T_VARIABLE","$this",415],["T_OBJECT_OPERATOR","->",415],["T_STRING","response",415],["T_OBJECT_OPERATOR","->",415],["T_STRING","expects",415],"(",["T_VARIABLE","$this",415],["T_OBJECT_OPERATOR","->",415],["T_STRING","once",415],"(",")",")",["T_OBJECT_OPERATOR","->",415],["T_STRING","method",415],"(",["T_CONSTANT_ENCAPSED_STRING","'sendHeaders'",415],")",["T_OBJECT_OPERATOR","->",415],["T_STRING","willReturnSelf",415],"(",")",";",["T_WHITESPACE","\n        ",415],["T_VARIABLE","$this",416],["T_OBJECT_OPERATOR","->",416],["T_STRING","downloadHelper",416],["T_OBJECT_OPERATOR","->",416],["T_STRING","expects",416],"(",["T_VARIABLE","$this",416],["T_OBJECT_OPERATOR","->",416],["T_STRING","once",416],"(",")",")",["T_OBJECT_OPERATOR","->",416],["T_STRING","method",416],"(",["T_CONSTANT_ENCAPSED_STRING","'output'",416],")",";",["T_WHITESPACE","\n    ",416],"}",["T_WHITESPACE","\n\n    ",417],["T_DOC_COMMENT","\/**\n     * @param string $messageType\n     * @param string $status\n     * @param string $notice\n     * @dataProvider linkNotAvailableDataProvider\n     *\/",419],["T_WHITESPACE","\n    ",424],["T_PUBLIC","public",425],["T_WHITESPACE"," ",425],["T_FUNCTION","function",425],["T_WHITESPACE"," ",425],["T_STRING","testLinkNotAvailable",425],"(",["T_VARIABLE","$messageType",425],",",["T_WHITESPACE"," ",425],["T_VARIABLE","$status",425],",",["T_WHITESPACE"," ",425],["T_VARIABLE","$notice",425],")",["T_WHITESPACE","\n    ",425],"{",["T_WHITESPACE","\n        ",426],["T_VARIABLE","$this",427],["T_OBJECT_OPERATOR","->",427],["T_STRING","objectManager",427],["T_OBJECT_OPERATOR","->",427],["T_STRING","expects",427],"(",["T_VARIABLE","$this",427],["T_OBJECT_OPERATOR","->",427],["T_STRING","at",427],"(",["T_LNUMBER","0",427],")",")",["T_WHITESPACE","\n            ",427],["T_OBJECT_OPERATOR","->",428],["T_STRING","method",428],"(",["T_CONSTANT_ENCAPSED_STRING","'get'",428],")",["T_WHITESPACE","\n            ",428],["T_OBJECT_OPERATOR","->",429],["T_STRING","with",429],"(",["T_NS_SEPARATOR","\\",429],["T_STRING","Magento",429],["T_NS_SEPARATOR","\\",429],["T_STRING","Customer",429],["T_NS_SEPARATOR","\\",429],["T_STRING","Model",429],["T_NS_SEPARATOR","\\",429],["T_STRING","Session",429],["T_DOUBLE_COLON","::",429],["T_CLASS","class",429],")",["T_WHITESPACE","\n            ",429],["T_OBJECT_OPERATOR","->",430],["T_STRING","willReturn",430],"(",["T_VARIABLE","$this",430],["T_OBJECT_OPERATOR","->",430],["T_STRING","session",430],")",";",["T_WHITESPACE","\n        ",430],["T_VARIABLE","$this",431],["T_OBJECT_OPERATOR","->",431],["T_STRING","request",431],["T_OBJECT_OPERATOR","->",431],["T_STRING","expects",431],"(",["T_VARIABLE","$this",431],["T_OBJECT_OPERATOR","->",431],["T_STRING","once",431],"(",")",")",["T_OBJECT_OPERATOR","->",431],["T_STRING","method",431],"(",["T_CONSTANT_ENCAPSED_STRING","'getParam'",431],")",["T_OBJECT_OPERATOR","->",431],["T_STRING","with",431],"(",["T_CONSTANT_ENCAPSED_STRING","'id'",431],",",["T_WHITESPACE"," ",431],["T_LNUMBER","0",431],")",["T_OBJECT_OPERATOR","->",431],["T_STRING","willReturn",431],"(",["T_CONSTANT_ENCAPSED_STRING","'some_id'",431],")",";",["T_WHITESPACE","\n        ",431],["T_VARIABLE","$this",432],["T_OBJECT_OPERATOR","->",432],["T_STRING","objectManager",432],["T_OBJECT_OPERATOR","->",432],["T_STRING","expects",432],"(",["T_VARIABLE","$this",432],["T_OBJECT_OPERATOR","->",432],["T_STRING","at",432],"(",["T_LNUMBER","1",432],")",")",["T_WHITESPACE","\n            ",432],["T_OBJECT_OPERATOR","->",433],["T_STRING","method",433],"(",["T_CONSTANT_ENCAPSED_STRING","'create'",433],")",["T_WHITESPACE","\n            ",433],["T_OBJECT_OPERATOR","->",434],["T_STRING","with",434],"(",["T_NS_SEPARATOR","\\",434],["T_STRING","Magento",434],["T_NS_SEPARATOR","\\",434],["T_STRING","Downloadable",434],["T_NS_SEPARATOR","\\",434],["T_STRING","Model",434],["T_NS_SEPARATOR","\\",434],["T_STRING","Link",434],["T_NS_SEPARATOR","\\",434],["T_STRING","Purchased",434],["T_NS_SEPARATOR","\\",434],["T_STRING","Item",434],["T_DOUBLE_COLON","::",434],["T_CLASS","class",434],")",["T_WHITESPACE","\n            ",434],["T_OBJECT_OPERATOR","->",435],["T_STRING","willReturn",435],"(",["T_VARIABLE","$this",435],["T_OBJECT_OPERATOR","->",435],["T_STRING","linkPurchasedItem",435],")",";",["T_WHITESPACE","\n        ",435],["T_VARIABLE","$this",436],["T_OBJECT_OPERATOR","->",436],["T_STRING","linkPurchasedItem",436],["T_OBJECT_OPERATOR","->",436],["T_STRING","expects",436],"(",["T_VARIABLE","$this",436],["T_OBJECT_OPERATOR","->",436],["T_STRING","once",436],"(",")",")",["T_WHITESPACE","\n            ",436],["T_OBJECT_OPERATOR","->",437],["T_STRING","method",437],"(",["T_CONSTANT_ENCAPSED_STRING","'load'",437],")",["T_WHITESPACE","\n            ",437],["T_OBJECT_OPERATOR","->",438],["T_STRING","with",438],"(",["T_CONSTANT_ENCAPSED_STRING","'some_id'",438],",",["T_WHITESPACE"," ",438],["T_CONSTANT_ENCAPSED_STRING","'link_hash'",438],")",["T_WHITESPACE","\n            ",438],["T_OBJECT_OPERATOR","->",439],["T_STRING","willReturnSelf",439],"(",")",";",["T_WHITESPACE","\n        ",439],["T_VARIABLE","$this",440],["T_OBJECT_OPERATOR","->",440],["T_STRING","linkPurchasedItem",440],["T_OBJECT_OPERATOR","->",440],["T_STRING","expects",440],"(",["T_VARIABLE","$this",440],["T_OBJECT_OPERATOR","->",440],["T_STRING","once",440],"(",")",")",["T_OBJECT_OPERATOR","->",440],["T_STRING","method",440],"(",["T_CONSTANT_ENCAPSED_STRING","'getId'",440],")",["T_OBJECT_OPERATOR","->",440],["T_STRING","willReturn",440],"(",["T_LNUMBER","5",440],")",";",["T_WHITESPACE","\n        ",440],["T_VARIABLE","$this",441],["T_OBJECT_OPERATOR","->",441],["T_STRING","objectManager",441],["T_OBJECT_OPERATOR","->",441],["T_STRING","expects",441],"(",["T_VARIABLE","$this",441],["T_OBJECT_OPERATOR","->",441],["T_STRING","at",441],"(",["T_LNUMBER","2",441],")",")",["T_WHITESPACE","\n            ",441],["T_OBJECT_OPERATOR","->",442],["T_STRING","method",442],"(",["T_CONSTANT_ENCAPSED_STRING","'get'",442],")",["T_WHITESPACE","\n            ",442],["T_OBJECT_OPERATOR","->",443],["T_STRING","with",443],"(",["T_NS_SEPARATOR","\\",443],["T_STRING","Magento",443],["T_NS_SEPARATOR","\\",443],["T_STRING","Downloadable",443],["T_NS_SEPARATOR","\\",443],["T_STRING","Helper",443],["T_NS_SEPARATOR","\\",443],["T_STRING","Data",443],["T_DOUBLE_COLON","::",443],["T_CLASS","class",443],")",["T_WHITESPACE","\n            ",443],["T_OBJECT_OPERATOR","->",444],["T_STRING","willReturn",444],"(",["T_VARIABLE","$this",444],["T_OBJECT_OPERATOR","->",444],["T_STRING","helperData",444],")",";",["T_WHITESPACE","\n        ",444],["T_VARIABLE","$this",445],["T_OBJECT_OPERATOR","->",445],["T_STRING","helperData",445],["T_OBJECT_OPERATOR","->",445],["T_STRING","expects",445],"(",["T_VARIABLE","$this",445],["T_OBJECT_OPERATOR","->",445],["T_STRING","once",445],"(",")",")",["T_WHITESPACE","\n            ",445],["T_OBJECT_OPERATOR","->",446],["T_STRING","method",446],"(",["T_CONSTANT_ENCAPSED_STRING","'getIsShareable'",446],")",["T_WHITESPACE","\n            ",446],["T_OBJECT_OPERATOR","->",447],["T_STRING","with",447],"(",["T_VARIABLE","$this",447],["T_OBJECT_OPERATOR","->",447],["T_STRING","linkPurchasedItem",447],")",["T_WHITESPACE","\n            ",447],["T_OBJECT_OPERATOR","->",448],["T_STRING","willReturn",448],"(",["T_STRING","true",448],")",";",["T_WHITESPACE","\n        ",448],["T_VARIABLE","$this",449],["T_OBJECT_OPERATOR","->",449],["T_STRING","linkPurchasedItem",449],["T_OBJECT_OPERATOR","->",449],["T_STRING","expects",449],"(",["T_VARIABLE","$this",449],["T_OBJECT_OPERATOR","->",449],["T_STRING","any",449],"(",")",")",["T_OBJECT_OPERATOR","->",449],["T_STRING","method",449],"(",["T_CONSTANT_ENCAPSED_STRING","'getNumberOfDownloadsBought'",449],")",["T_OBJECT_OPERATOR","->",449],["T_STRING","willReturn",449],"(",["T_LNUMBER","10",449],")",";",["T_WHITESPACE","\n        ",449],["T_VARIABLE","$this",450],["T_OBJECT_OPERATOR","->",450],["T_STRING","linkPurchasedItem",450],["T_OBJECT_OPERATOR","->",450],["T_STRING","expects",450],"(",["T_VARIABLE","$this",450],["T_OBJECT_OPERATOR","->",450],["T_STRING","any",450],"(",")",")",["T_OBJECT_OPERATOR","->",450],["T_STRING","method",450],"(",["T_CONSTANT_ENCAPSED_STRING","'getNumberOfDownloadsUsed'",450],")",["T_OBJECT_OPERATOR","->",450],["T_STRING","willReturn",450],"(",["T_LNUMBER","9",450],")",";",["T_WHITESPACE","\n        ",450],["T_VARIABLE","$this",451],["T_OBJECT_OPERATOR","->",451],["T_STRING","linkPurchasedItem",451],["T_OBJECT_OPERATOR","->",451],["T_STRING","expects",451],"(",["T_VARIABLE","$this",451],["T_OBJECT_OPERATOR","->",451],["T_STRING","once",451],"(",")",")",["T_OBJECT_OPERATOR","->",451],["T_STRING","method",451],"(",["T_CONSTANT_ENCAPSED_STRING","'getStatus'",451],")",["T_OBJECT_OPERATOR","->",451],["T_STRING","willReturn",451],"(",["T_VARIABLE","$status",451],")",";",["T_WHITESPACE","\n        ",451],["T_VARIABLE","$this",452],["T_OBJECT_OPERATOR","->",452],["T_STRING","messageManager",452],["T_OBJECT_OPERATOR","->",452],["T_STRING","expects",452],"(",["T_VARIABLE","$this",452],["T_OBJECT_OPERATOR","->",452],["T_STRING","once",452],"(",")",")",["T_OBJECT_OPERATOR","->",452],["T_STRING","method",452],"(",["T_VARIABLE","$messageType",452],")",["T_OBJECT_OPERATOR","->",452],["T_STRING","with",452],"(",["T_VARIABLE","$notice",452],")",["T_OBJECT_OPERATOR","->",452],["T_STRING","willReturnSelf",452],"(",")",";",["T_WHITESPACE","\n\n        ",452],["T_VARIABLE","$this",454],["T_OBJECT_OPERATOR","->",454],["T_STRING","assertEquals",454],"(",["T_VARIABLE","$this",454],["T_OBJECT_OPERATOR","->",454],["T_STRING","response",454],",",["T_WHITESPACE"," ",454],["T_VARIABLE","$this",454],["T_OBJECT_OPERATOR","->",454],["T_STRING","link",454],["T_OBJECT_OPERATOR","->",454],["T_STRING","execute",454],"(",")",")",";",["T_WHITESPACE","\n    ",454],"}",["T_WHITESPACE","\n\n    ",455],["T_DOC_COMMENT","\/**\n     * @return array\n     *\/",457],["T_WHITESPACE","\n    ",459],["T_PUBLIC","public",460],["T_WHITESPACE"," ",460],["T_FUNCTION","function",460],["T_WHITESPACE"," ",460],["T_STRING","linkNotAvailableDataProvider",460],"(",")",["T_WHITESPACE","\n    ",460],"{",["T_WHITESPACE","\n        ",461],["T_RETURN","return",462],["T_WHITESPACE"," ",462],"[",["T_WHITESPACE","\n            ",462],"[",["T_CONSTANT_ENCAPSED_STRING","'addNotice'",463],",",["T_WHITESPACE"," ",463],["T_CONSTANT_ENCAPSED_STRING","'expired'",463],",",["T_WHITESPACE"," ",463],["T_CONSTANT_ENCAPSED_STRING","'The link has expired.'",463],"]",",",["T_WHITESPACE","\n            ",463],"[",["T_CONSTANT_ENCAPSED_STRING","'addNotice'",464],",",["T_WHITESPACE"," ",464],["T_CONSTANT_ENCAPSED_STRING","'pending'",464],",",["T_WHITESPACE"," ",464],["T_CONSTANT_ENCAPSED_STRING","'The link is not available.'",464],"]",",",["T_WHITESPACE","\n            ",464],"[",["T_CONSTANT_ENCAPSED_STRING","'addNotice'",465],",",["T_WHITESPACE"," ",465],["T_CONSTANT_ENCAPSED_STRING","'payment_review'",465],",",["T_WHITESPACE"," ",465],["T_CONSTANT_ENCAPSED_STRING","'The link is not available.'",465],"]",",",["T_WHITESPACE","\n            ",465],"[",["T_CONSTANT_ENCAPSED_STRING","'addError'",466],",",["T_WHITESPACE"," ",466],["T_CONSTANT_ENCAPSED_STRING","'wrong_status'",466],",",["T_WHITESPACE"," ",466],["T_CONSTANT_ENCAPSED_STRING","'Something went wrong while getting the requested content.'",466],"]",["T_WHITESPACE","\n        ",466],"]",";",["T_WHITESPACE","\n    ",467],"}",["T_WHITESPACE","\n",468],"}",["T_WHITESPACE","\n",469]]
[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n *\n * Copyright \u00c2\u00a9 2013-2017 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n *\/",2],["T_WHITESPACE","\n",6],["T_NAMESPACE","namespace",7],["T_WHITESPACE"," ",7],["T_STRING","Magento",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Downloadable",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Controller",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Adminhtml",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Downloadable",7],["T_NS_SEPARATOR","\\",7],["T_STRING","File",7],";",["T_WHITESPACE","\n\n",7],["T_USE","use",9],["T_WHITESPACE"," ",9],["T_STRING","Magento",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Framework",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Controller",9],["T_NS_SEPARATOR","\\",9],["T_STRING","ResultFactory",9],";",["T_WHITESPACE","\n\n",9],["T_CLASS","class",11],["T_WHITESPACE"," ",11],["T_STRING","Upload",11],["T_WHITESPACE"," ",11],["T_EXTENDS","extends",11],["T_WHITESPACE"," ",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Magento",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Downloadable",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Controller",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Adminhtml",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Downloadable",11],["T_NS_SEPARATOR","\\",11],["T_STRING","File",11],["T_WHITESPACE","\n",11],"{",["T_WHITESPACE","\n    ",12],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Downloadable\\Model\\Link\n     *\/",13],["T_WHITESPACE","\n    ",15],["T_PROTECTED","protected",16],["T_WHITESPACE"," ",16],["T_VARIABLE","$_link",16],";",["T_WHITESPACE","\n\n    ",16],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Downloadable\\Model\\Sample\n     *\/",18],["T_WHITESPACE","\n    ",20],["T_PROTECTED","protected",21],["T_WHITESPACE"," ",21],["T_VARIABLE","$_sample",21],";",["T_WHITESPACE","\n\n    ",21],["T_DOC_COMMENT","\/**\n     * Downloadable file helper.\n     *\n     * @var \\Magento\\Downloadable\\Helper\\File\n     *\/",23],["T_WHITESPACE","\n    ",27],["T_PROTECTED","protected",28],["T_WHITESPACE"," ",28],["T_VARIABLE","$_fileHelper",28],";",["T_WHITESPACE","\n\n    ",28],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\MediaStorage\\Model\\File\\UploaderFactory\n     *\/",30],["T_WHITESPACE","\n    ",32],["T_PRIVATE","private",33],["T_WHITESPACE"," ",33],["T_VARIABLE","$uploaderFactory",33],";",["T_WHITESPACE","\n\n    ",33],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\MediaStorage\\Helper\\File\\Storage\\Database\n     *\/",35],["T_WHITESPACE","\n    ",37],["T_PRIVATE","private",38],["T_WHITESPACE"," ",38],["T_VARIABLE","$storageDatabase",38],";",["T_WHITESPACE","\n\n    ",38],["T_DOC_COMMENT","\/**\n     *\n     * Copyright \u00c2\u00a9 2013-2017 Magento, Inc. All rights reserved.\n     * See COPYING.txt for license details.\n     * @param \\Magento\\Backend\\App\\Action\\Context $context\n     * @param \\Magento\\Downloadable\\Model\\Link $link\n     * @param \\Magento\\Downloadable\\Model\\Sample $sample\n     * @param \\Magento\\Downloadable\\Helper\\File $fileHelper\n     * @param \\Magento\\MediaStorage\\Model\\File\\UploaderFactory $uploaderFactory\n     * @param \\Magento\\MediaStorage\\Helper\\File\\Storage\\Database $storageDatabase\n     *\/",40],["T_WHITESPACE","\n    ",50],["T_PUBLIC","public",51],["T_WHITESPACE"," ",51],["T_FUNCTION","function",51],["T_WHITESPACE"," ",51],["T_STRING","__construct",51],"(",["T_WHITESPACE","\n        ",51],["T_NS_SEPARATOR","\\",52],["T_STRING","Magento",52],["T_NS_SEPARATOR","\\",52],["T_STRING","Backend",52],["T_NS_SEPARATOR","\\",52],["T_STRING","App",52],["T_NS_SEPARATOR","\\",52],["T_STRING","Action",52],["T_NS_SEPARATOR","\\",52],["T_STRING","Context",52],["T_WHITESPACE"," ",52],["T_VARIABLE","$context",52],",",["T_WHITESPACE","\n        ",52],["T_NS_SEPARATOR","\\",53],["T_STRING","Magento",53],["T_NS_SEPARATOR","\\",53],["T_STRING","Downloadable",53],["T_NS_SEPARATOR","\\",53],["T_STRING","Model",53],["T_NS_SEPARATOR","\\",53],["T_STRING","Link",53],["T_WHITESPACE"," ",53],["T_VARIABLE","$link",53],",",["T_WHITESPACE","\n        ",53],["T_NS_SEPARATOR","\\",54],["T_STRING","Magento",54],["T_NS_SEPARATOR","\\",54],["T_STRING","Downloadable",54],["T_NS_SEPARATOR","\\",54],["T_STRING","Model",54],["T_NS_SEPARATOR","\\",54],["T_STRING","Sample",54],["T_WHITESPACE"," ",54],["T_VARIABLE","$sample",54],",",["T_WHITESPACE","\n        ",54],["T_NS_SEPARATOR","\\",55],["T_STRING","Magento",55],["T_NS_SEPARATOR","\\",55],["T_STRING","Downloadable",55],["T_NS_SEPARATOR","\\",55],["T_STRING","Helper",55],["T_NS_SEPARATOR","\\",55],["T_STRING","File",55],["T_WHITESPACE"," ",55],["T_VARIABLE","$fileHelper",55],",",["T_WHITESPACE","\n        ",55],["T_NS_SEPARATOR","\\",56],["T_STRING","Magento",56],["T_NS_SEPARATOR","\\",56],["T_STRING","MediaStorage",56],["T_NS_SEPARATOR","\\",56],["T_STRING","Model",56],["T_NS_SEPARATOR","\\",56],["T_STRING","File",56],["T_NS_SEPARATOR","\\",56],["T_STRING","UploaderFactory",56],["T_WHITESPACE"," ",56],["T_VARIABLE","$uploaderFactory",56],",",["T_WHITESPACE","\n        ",56],["T_NS_SEPARATOR","\\",57],["T_STRING","Magento",57],["T_NS_SEPARATOR","\\",57],["T_STRING","MediaStorage",57],["T_NS_SEPARATOR","\\",57],["T_STRING","Helper",57],["T_NS_SEPARATOR","\\",57],["T_STRING","File",57],["T_NS_SEPARATOR","\\",57],["T_STRING","Storage",57],["T_NS_SEPARATOR","\\",57],["T_STRING","Database",57],["T_WHITESPACE"," ",57],["T_VARIABLE","$storageDatabase",57],["T_WHITESPACE","\n    ",57],")",["T_WHITESPACE"," ",58],"{",["T_WHITESPACE","\n        ",58],["T_STRING","parent",59],["T_DOUBLE_COLON","::",59],["T_STRING","__construct",59],"(",["T_VARIABLE","$context",59],")",";",["T_WHITESPACE","\n        ",59],["T_VARIABLE","$this",60],["T_OBJECT_OPERATOR","->",60],["T_STRING","_link",60],["T_WHITESPACE"," ",60],"=",["T_WHITESPACE"," ",60],["T_VARIABLE","$link",60],";",["T_WHITESPACE","\n        ",60],["T_VARIABLE","$this",61],["T_OBJECT_OPERATOR","->",61],["T_STRING","_sample",61],["T_WHITESPACE"," ",61],"=",["T_WHITESPACE"," ",61],["T_VARIABLE","$sample",61],";",["T_WHITESPACE","\n        ",61],["T_VARIABLE","$this",62],["T_OBJECT_OPERATOR","->",62],["T_STRING","_fileHelper",62],["T_WHITESPACE"," ",62],"=",["T_WHITESPACE"," ",62],["T_VARIABLE","$fileHelper",62],";",["T_WHITESPACE","\n        ",62],["T_VARIABLE","$this",63],["T_OBJECT_OPERATOR","->",63],["T_STRING","uploaderFactory",63],["T_WHITESPACE"," ",63],"=",["T_WHITESPACE"," ",63],["T_VARIABLE","$uploaderFactory",63],";",["T_WHITESPACE","\n        ",63],["T_VARIABLE","$this",64],["T_OBJECT_OPERATOR","->",64],["T_STRING","storageDatabase",64],["T_WHITESPACE"," ",64],"=",["T_WHITESPACE"," ",64],["T_VARIABLE","$storageDatabase",64],";",["T_WHITESPACE","\n    ",64],"}",["T_WHITESPACE","\n\n    ",65],["T_DOC_COMMENT","\/**\n     * Upload file controller action\n     *\n     * @return \\Magento\\Framework\\Controller\\ResultInterface\n     *\/",67],["T_WHITESPACE","\n    ",71],["T_PUBLIC","public",72],["T_WHITESPACE"," ",72],["T_FUNCTION","function",72],["T_WHITESPACE"," ",72],["T_STRING","execute",72],"(",")",["T_WHITESPACE","\n    ",72],"{",["T_WHITESPACE","\n        ",73],["T_VARIABLE","$type",74],["T_WHITESPACE"," ",74],"=",["T_WHITESPACE"," ",74],["T_VARIABLE","$this",74],["T_OBJECT_OPERATOR","->",74],["T_STRING","getRequest",74],"(",")",["T_OBJECT_OPERATOR","->",74],["T_STRING","getParam",74],"(",["T_CONSTANT_ENCAPSED_STRING","'type'",74],")",";",["T_WHITESPACE","\n        ",74],["T_VARIABLE","$tmpPath",75],["T_WHITESPACE"," ",75],"=",["T_WHITESPACE"," ",75],["T_CONSTANT_ENCAPSED_STRING","''",75],";",["T_WHITESPACE","\n        ",75],["T_IF","if",76],["T_WHITESPACE"," ",76],"(",["T_VARIABLE","$type",76],["T_WHITESPACE"," ",76],["T_IS_EQUAL","==",76],["T_WHITESPACE"," ",76],["T_CONSTANT_ENCAPSED_STRING","'samples'",76],")",["T_WHITESPACE"," ",76],"{",["T_WHITESPACE","\n            ",76],["T_VARIABLE","$tmpPath",77],["T_WHITESPACE"," ",77],"=",["T_WHITESPACE"," ",77],["T_VARIABLE","$this",77],["T_OBJECT_OPERATOR","->",77],["T_STRING","_sample",77],["T_OBJECT_OPERATOR","->",77],["T_STRING","getBaseTmpPath",77],"(",")",";",["T_WHITESPACE","\n        ",77],"}",["T_WHITESPACE"," ",78],["T_ELSEIF","elseif",78],["T_WHITESPACE"," ",78],"(",["T_VARIABLE","$type",78],["T_WHITESPACE"," ",78],["T_IS_EQUAL","==",78],["T_WHITESPACE"," ",78],["T_CONSTANT_ENCAPSED_STRING","'links'",78],")",["T_WHITESPACE"," ",78],"{",["T_WHITESPACE","\n            ",78],["T_VARIABLE","$tmpPath",79],["T_WHITESPACE"," ",79],"=",["T_WHITESPACE"," ",79],["T_VARIABLE","$this",79],["T_OBJECT_OPERATOR","->",79],["T_STRING","_link",79],["T_OBJECT_OPERATOR","->",79],["T_STRING","getBaseTmpPath",79],"(",")",";",["T_WHITESPACE","\n        ",79],"}",["T_WHITESPACE"," ",80],["T_ELSEIF","elseif",80],["T_WHITESPACE"," ",80],"(",["T_VARIABLE","$type",80],["T_WHITESPACE"," ",80],["T_IS_EQUAL","==",80],["T_WHITESPACE"," ",80],["T_CONSTANT_ENCAPSED_STRING","'link_samples'",80],")",["T_WHITESPACE"," ",80],"{",["T_WHITESPACE","\n            ",80],["T_VARIABLE","$tmpPath",81],["T_WHITESPACE"," ",81],"=",["T_WHITESPACE"," ",81],["T_VARIABLE","$this",81],["T_OBJECT_OPERATOR","->",81],["T_STRING","_link",81],["T_OBJECT_OPERATOR","->",81],["T_STRING","getBaseSampleTmpPath",81],"(",")",";",["T_WHITESPACE","\n        ",81],"}",["T_WHITESPACE","\n\n        ",82],["T_TRY","try",84],["T_WHITESPACE"," ",84],"{",["T_WHITESPACE","\n            ",84],["T_VARIABLE","$uploader",85],["T_WHITESPACE"," ",85],"=",["T_WHITESPACE"," ",85],["T_VARIABLE","$this",85],["T_OBJECT_OPERATOR","->",85],["T_STRING","uploaderFactory",85],["T_OBJECT_OPERATOR","->",85],["T_STRING","create",85],"(","[",["T_CONSTANT_ENCAPSED_STRING","'fileId'",85],["T_WHITESPACE"," ",85],["T_DOUBLE_ARROW","=>",85],["T_WHITESPACE"," ",85],["T_VARIABLE","$type",85],"]",")",";",["T_WHITESPACE","\n\n            ",85],["T_VARIABLE","$result",87],["T_WHITESPACE"," ",87],"=",["T_WHITESPACE"," ",87],["T_VARIABLE","$this",87],["T_OBJECT_OPERATOR","->",87],["T_STRING","_fileHelper",87],["T_OBJECT_OPERATOR","->",87],["T_STRING","uploadFromTmp",87],"(",["T_VARIABLE","$tmpPath",87],",",["T_WHITESPACE"," ",87],["T_VARIABLE","$uploader",87],")",";",["T_WHITESPACE","\n\n            ",87],["T_IF","if",89],["T_WHITESPACE"," ",89],"(","!",["T_VARIABLE","$result",89],")",["T_WHITESPACE"," ",89],"{",["T_WHITESPACE","\n                ",89],["T_THROW","throw",90],["T_WHITESPACE"," ",90],["T_NEW","new",90],["T_WHITESPACE"," ",90],["T_NS_SEPARATOR","\\",90],["T_STRING","Exception",90],"(",["T_CONSTANT_ENCAPSED_STRING","'File can not be moved from temporary folder to the destination folder.'",90],")",";",["T_WHITESPACE","\n            ",90],"}",["T_WHITESPACE","\n\n            ",91],["T_UNSET","unset",93],"(",["T_VARIABLE","$result",93],"[",["T_CONSTANT_ENCAPSED_STRING","'tmp_name'",93],"]",",",["T_WHITESPACE"," ",93],["T_VARIABLE","$result",93],"[",["T_CONSTANT_ENCAPSED_STRING","'path'",93],"]",")",";",["T_WHITESPACE","\n\n            ",93],["T_IF","if",95],["T_WHITESPACE"," ",95],"(",["T_ISSET","isset",95],"(",["T_VARIABLE","$result",95],"[",["T_CONSTANT_ENCAPSED_STRING","'file'",95],"]",")",")",["T_WHITESPACE"," ",95],"{",["T_WHITESPACE","\n                ",95],["T_VARIABLE","$relativePath",96],["T_WHITESPACE"," ",96],"=",["T_WHITESPACE"," ",96],["T_STRING","rtrim",96],"(",["T_VARIABLE","$tmpPath",96],",",["T_WHITESPACE"," ",96],["T_CONSTANT_ENCAPSED_STRING","'\/'",96],")",["T_WHITESPACE"," ",96],".",["T_WHITESPACE"," ",96],["T_CONSTANT_ENCAPSED_STRING","'\/'",96],["T_WHITESPACE"," ",96],".",["T_WHITESPACE"," ",96],["T_STRING","ltrim",96],"(",["T_VARIABLE","$result",96],"[",["T_CONSTANT_ENCAPSED_STRING","'file'",96],"]",",",["T_WHITESPACE"," ",96],["T_CONSTANT_ENCAPSED_STRING","'\/'",96],")",";",["T_WHITESPACE","\n                ",96],["T_VARIABLE","$this",97],["T_OBJECT_OPERATOR","->",97],["T_STRING","storageDatabase",97],["T_OBJECT_OPERATOR","->",97],["T_STRING","saveFile",97],"(",["T_VARIABLE","$relativePath",97],")",";",["T_WHITESPACE","\n            ",97],"}",["T_WHITESPACE","\n\n            ",98],["T_VARIABLE","$result",100],"[",["T_CONSTANT_ENCAPSED_STRING","'cookie'",100],"]",["T_WHITESPACE"," ",100],"=",["T_WHITESPACE"," ",100],"[",["T_WHITESPACE","\n                ",100],["T_CONSTANT_ENCAPSED_STRING","'name'",101],["T_WHITESPACE"," ",101],["T_DOUBLE_ARROW","=>",101],["T_WHITESPACE"," ",101],["T_VARIABLE","$this",101],["T_OBJECT_OPERATOR","->",101],["T_STRING","_getSession",101],"(",")",["T_OBJECT_OPERATOR","->",101],["T_STRING","getName",101],"(",")",",",["T_WHITESPACE","\n                ",101],["T_CONSTANT_ENCAPSED_STRING","'value'",102],["T_WHITESPACE"," ",102],["T_DOUBLE_ARROW","=>",102],["T_WHITESPACE"," ",102],["T_VARIABLE","$this",102],["T_OBJECT_OPERATOR","->",102],["T_STRING","_getSession",102],"(",")",["T_OBJECT_OPERATOR","->",102],["T_STRING","getSessionId",102],"(",")",",",["T_WHITESPACE","\n                ",102],["T_CONSTANT_ENCAPSED_STRING","'lifetime'",103],["T_WHITESPACE"," ",103],["T_DOUBLE_ARROW","=>",103],["T_WHITESPACE"," ",103],["T_VARIABLE","$this",103],["T_OBJECT_OPERATOR","->",103],["T_STRING","_getSession",103],"(",")",["T_OBJECT_OPERATOR","->",103],["T_STRING","getCookieLifetime",103],"(",")",",",["T_WHITESPACE","\n                ",103],["T_CONSTANT_ENCAPSED_STRING","'path'",104],["T_WHITESPACE"," ",104],["T_DOUBLE_ARROW","=>",104],["T_WHITESPACE"," ",104],["T_VARIABLE","$this",104],["T_OBJECT_OPERATOR","->",104],["T_STRING","_getSession",104],"(",")",["T_OBJECT_OPERATOR","->",104],["T_STRING","getCookiePath",104],"(",")",",",["T_WHITESPACE","\n                ",104],["T_CONSTANT_ENCAPSED_STRING","'domain'",105],["T_WHITESPACE"," ",105],["T_DOUBLE_ARROW","=>",105],["T_WHITESPACE"," ",105],["T_VARIABLE","$this",105],["T_OBJECT_OPERATOR","->",105],["T_STRING","_getSession",105],"(",")",["T_OBJECT_OPERATOR","->",105],["T_STRING","getCookieDomain",105],"(",")",",",["T_WHITESPACE","\n            ",105],"]",";",["T_WHITESPACE","\n        ",106],"}",["T_WHITESPACE"," ",107],["T_CATCH","catch",107],["T_WHITESPACE"," ",107],"(",["T_NS_SEPARATOR","\\",107],["T_STRING","Exception",107],["T_WHITESPACE"," ",107],["T_VARIABLE","$e",107],")",["T_WHITESPACE"," ",107],"{",["T_WHITESPACE","\n            ",107],["T_VARIABLE","$result",108],["T_WHITESPACE"," ",108],"=",["T_WHITESPACE"," ",108],"[",["T_CONSTANT_ENCAPSED_STRING","'error'",108],["T_WHITESPACE"," ",108],["T_DOUBLE_ARROW","=>",108],["T_WHITESPACE"," ",108],["T_VARIABLE","$e",108],["T_OBJECT_OPERATOR","->",108],["T_STRING","getMessage",108],"(",")",",",["T_WHITESPACE"," ",108],["T_CONSTANT_ENCAPSED_STRING","'errorcode'",108],["T_WHITESPACE"," ",108],["T_DOUBLE_ARROW","=>",108],["T_WHITESPACE"," ",108],["T_VARIABLE","$e",108],["T_OBJECT_OPERATOR","->",108],["T_STRING","getCode",108],"(",")","]",";",["T_WHITESPACE","\n        ",108],"}",["T_WHITESPACE","\n        ",109],["T_RETURN","return",110],["T_WHITESPACE"," ",110],["T_VARIABLE","$this",110],["T_OBJECT_OPERATOR","->",110],["T_STRING","resultFactory",110],["T_OBJECT_OPERATOR","->",110],["T_STRING","create",110],"(",["T_STRING","ResultFactory",110],["T_DOUBLE_COLON","::",110],["T_STRING","TYPE_JSON",110],")",["T_OBJECT_OPERATOR","->",110],["T_STRING","setData",110],"(",["T_VARIABLE","$result",110],")",";",["T_WHITESPACE","\n    ",110],"}",["T_WHITESPACE","\n",111],"}",["T_WHITESPACE","\n",112]]
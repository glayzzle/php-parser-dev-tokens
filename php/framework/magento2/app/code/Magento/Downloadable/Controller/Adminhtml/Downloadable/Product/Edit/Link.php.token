[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n *\n * Copyright \u00c2\u00a9 2013-2017 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n *\/",2],["T_WHITESPACE","\n",6],["T_NAMESPACE","namespace",7],["T_WHITESPACE"," ",7],["T_STRING","Magento",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Downloadable",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Controller",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Adminhtml",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Downloadable",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Product",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Edit",7],";",["T_WHITESPACE","\n\n",7],["T_USE","use",9],["T_WHITESPACE"," ",9],["T_STRING","Magento",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Downloadable",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Helper",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Download",9],["T_WHITESPACE"," ",9],["T_AS","as",9],["T_WHITESPACE"," ",9],["T_STRING","DownloadHelper",9],";",["T_WHITESPACE","\n\n",9],["T_CLASS","class",11],["T_WHITESPACE"," ",11],["T_STRING","Link",11],["T_WHITESPACE"," ",11],["T_EXTENDS","extends",11],["T_WHITESPACE"," ",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Magento",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Catalog",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Controller",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Adminhtml",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Product",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Edit",11],["T_WHITESPACE","\n",11],"{",["T_WHITESPACE","\n    ",12],["T_DOC_COMMENT","\/**\n     * @return \\Magento\\Downloadable\\Model\\Link\n     *\/",13],["T_WHITESPACE","\n    ",15],["T_PROTECTED","protected",16],["T_WHITESPACE"," ",16],["T_FUNCTION","function",16],["T_WHITESPACE"," ",16],["T_STRING","_createLink",16],"(",")",["T_WHITESPACE","\n    ",16],"{",["T_WHITESPACE","\n        ",17],["T_RETURN","return",18],["T_WHITESPACE"," ",18],["T_VARIABLE","$this",18],["T_OBJECT_OPERATOR","->",18],["T_STRING","_objectManager",18],["T_OBJECT_OPERATOR","->",18],["T_STRING","create",18],"(",["T_NS_SEPARATOR","\\",18],["T_STRING","Magento",18],["T_NS_SEPARATOR","\\",18],["T_STRING","Downloadable",18],["T_NS_SEPARATOR","\\",18],["T_STRING","Model",18],["T_NS_SEPARATOR","\\",18],["T_STRING","Link",18],["T_DOUBLE_COLON","::",18],["T_CLASS","class",18],")",";",["T_WHITESPACE","\n    ",18],"}",["T_WHITESPACE","\n\n    ",19],["T_DOC_COMMENT","\/**\n     * @return \\Magento\\Downloadable\\Model\\Link\n     *\/",21],["T_WHITESPACE","\n    ",23],["T_PROTECTED","protected",24],["T_WHITESPACE"," ",24],["T_FUNCTION","function",24],["T_WHITESPACE"," ",24],["T_STRING","_getLink",24],"(",")",["T_WHITESPACE","\n    ",24],"{",["T_WHITESPACE","\n        ",25],["T_RETURN","return",26],["T_WHITESPACE"," ",26],["T_VARIABLE","$this",26],["T_OBJECT_OPERATOR","->",26],["T_STRING","_objectManager",26],["T_OBJECT_OPERATOR","->",26],["T_STRING","get",26],"(",["T_NS_SEPARATOR","\\",26],["T_STRING","Magento",26],["T_NS_SEPARATOR","\\",26],["T_STRING","Downloadable",26],["T_NS_SEPARATOR","\\",26],["T_STRING","Model",26],["T_NS_SEPARATOR","\\",26],["T_STRING","Link",26],["T_DOUBLE_COLON","::",26],["T_CLASS","class",26],")",";",["T_WHITESPACE","\n    ",26],"}",["T_WHITESPACE","\n\n    ",27],["T_DOC_COMMENT","\/**\n     * Download process\n     *\n     * @param string $resource\n     * @param string $resourceType\n     * @return void\n     *\/",29],["T_WHITESPACE","\n    ",35],["T_PROTECTED","protected",36],["T_WHITESPACE"," ",36],["T_FUNCTION","function",36],["T_WHITESPACE"," ",36],["T_STRING","_processDownload",36],"(",["T_VARIABLE","$resource",36],",",["T_WHITESPACE"," ",36],["T_VARIABLE","$resourceType",36],")",["T_WHITESPACE","\n    ",36],"{",["T_WHITESPACE","\n        ",37],["T_COMMENT","\/* @var $helper \\Magento\\Downloadable\\Helper\\Download *\/",38],["T_WHITESPACE","\n        ",38],["T_VARIABLE","$helper",39],["T_WHITESPACE"," ",39],"=",["T_WHITESPACE"," ",39],["T_VARIABLE","$this",39],["T_OBJECT_OPERATOR","->",39],["T_STRING","_objectManager",39],["T_OBJECT_OPERATOR","->",39],["T_STRING","get",39],"(",["T_NS_SEPARATOR","\\",39],["T_STRING","Magento",39],["T_NS_SEPARATOR","\\",39],["T_STRING","Downloadable",39],["T_NS_SEPARATOR","\\",39],["T_STRING","Helper",39],["T_NS_SEPARATOR","\\",39],["T_STRING","Download",39],["T_DOUBLE_COLON","::",39],["T_CLASS","class",39],")",";",["T_WHITESPACE","\n        ",39],["T_VARIABLE","$helper",40],["T_OBJECT_OPERATOR","->",40],["T_STRING","setResource",40],"(",["T_VARIABLE","$resource",40],",",["T_WHITESPACE"," ",40],["T_VARIABLE","$resourceType",40],")",";",["T_WHITESPACE","\n\n        ",40],["T_VARIABLE","$fileName",42],["T_WHITESPACE"," ",42],"=",["T_WHITESPACE"," ",42],["T_VARIABLE","$helper",42],["T_OBJECT_OPERATOR","->",42],["T_STRING","getFilename",42],"(",")",";",["T_WHITESPACE","\n        ",42],["T_VARIABLE","$contentType",43],["T_WHITESPACE"," ",43],"=",["T_WHITESPACE"," ",43],["T_VARIABLE","$helper",43],["T_OBJECT_OPERATOR","->",43],["T_STRING","getContentType",43],"(",")",";",["T_WHITESPACE","\n\n        ",43],["T_VARIABLE","$this",45],["T_OBJECT_OPERATOR","->",45],["T_STRING","getResponse",45],"(",")",["T_OBJECT_OPERATOR","->",45],["T_STRING","setHttpResponseCode",45],"(",["T_WHITESPACE","\n            ",45],["T_LNUMBER","200",46],["T_WHITESPACE","\n        ",46],")",["T_OBJECT_OPERATOR","->",47],["T_STRING","setHeader",47],"(",["T_WHITESPACE","\n            ",47],["T_CONSTANT_ENCAPSED_STRING","'Pragma'",48],",",["T_WHITESPACE","\n            ",48],["T_CONSTANT_ENCAPSED_STRING","'public'",49],",",["T_WHITESPACE","\n            ",49],["T_STRING","true",50],["T_WHITESPACE","\n        ",50],")",["T_OBJECT_OPERATOR","->",51],["T_STRING","setHeader",51],"(",["T_WHITESPACE","\n            ",51],["T_CONSTANT_ENCAPSED_STRING","'Cache-Control'",52],",",["T_WHITESPACE","\n            ",52],["T_CONSTANT_ENCAPSED_STRING","'must-revalidate, post-check=0, pre-check=0'",53],",",["T_WHITESPACE","\n            ",53],["T_STRING","true",54],["T_WHITESPACE","\n        ",54],")",["T_OBJECT_OPERATOR","->",55],["T_STRING","setHeader",55],"(",["T_WHITESPACE","\n            ",55],["T_CONSTANT_ENCAPSED_STRING","'Content-type'",56],",",["T_WHITESPACE","\n            ",56],["T_VARIABLE","$contentType",57],",",["T_WHITESPACE","\n            ",57],["T_STRING","true",58],["T_WHITESPACE","\n        ",58],")",";",["T_WHITESPACE","\n\n        ",59],["T_IF","if",61],["T_WHITESPACE"," ",61],"(",["T_VARIABLE","$fileSize",61],["T_WHITESPACE"," ",61],"=",["T_WHITESPACE"," ",61],["T_VARIABLE","$helper",61],["T_OBJECT_OPERATOR","->",61],["T_STRING","getFileSize",61],"(",")",")",["T_WHITESPACE"," ",61],"{",["T_WHITESPACE","\n            ",61],["T_VARIABLE","$this",62],["T_OBJECT_OPERATOR","->",62],["T_STRING","getResponse",62],"(",")",["T_OBJECT_OPERATOR","->",62],["T_STRING","setHeader",62],"(",["T_CONSTANT_ENCAPSED_STRING","'Content-Length'",62],",",["T_WHITESPACE"," ",62],["T_VARIABLE","$fileSize",62],")",";",["T_WHITESPACE","\n        ",62],"}",["T_WHITESPACE","\n\n        ",63],["T_IF","if",65],["T_WHITESPACE"," ",65],"(",["T_VARIABLE","$contentDisposition",65],["T_WHITESPACE"," ",65],"=",["T_WHITESPACE"," ",65],["T_VARIABLE","$helper",65],["T_OBJECT_OPERATOR","->",65],["T_STRING","getContentDisposition",65],"(",")",")",["T_WHITESPACE"," ",65],"{",["T_WHITESPACE","\n            ",65],["T_VARIABLE","$this",66],["T_OBJECT_OPERATOR","->",66],["T_STRING","getResponse",66],"(",")",["T_WHITESPACE","\n                ",66],["T_OBJECT_OPERATOR","->",67],["T_STRING","setHeader",67],"(",["T_CONSTANT_ENCAPSED_STRING","'Content-Disposition'",67],",",["T_WHITESPACE"," ",67],["T_VARIABLE","$contentDisposition",67],["T_WHITESPACE"," ",67],".",["T_WHITESPACE"," ",67],["T_CONSTANT_ENCAPSED_STRING","'; filename='",67],["T_WHITESPACE"," ",67],".",["T_WHITESPACE"," ",67],["T_VARIABLE","$fileName",67],")",";",["T_WHITESPACE","\n        ",67],"}",["T_WHITESPACE","\n\n        ",68],["T_VARIABLE","$this",70],["T_OBJECT_OPERATOR","->",70],["T_STRING","getResponse",70],"(",")",["T_OBJECT_OPERATOR","->",70],["T_STRING","clearBody",70],"(",")",";",["T_WHITESPACE","\n        ",70],["T_VARIABLE","$this",71],["T_OBJECT_OPERATOR","->",71],["T_STRING","getResponse",71],"(",")",["T_OBJECT_OPERATOR","->",71],["T_STRING","sendHeaders",71],"(",")",";",["T_WHITESPACE","\n        ",71],["T_VARIABLE","$helper",72],["T_OBJECT_OPERATOR","->",72],["T_STRING","output",72],"(",")",";",["T_WHITESPACE","\n    ",72],"}",["T_WHITESPACE","\n\n    ",73],["T_DOC_COMMENT","\/**\n     * Download link action\n     *\n     * @return void\n     *\/",75],["T_WHITESPACE","\n    ",79],["T_PUBLIC","public",80],["T_WHITESPACE"," ",80],["T_FUNCTION","function",80],["T_WHITESPACE"," ",80],["T_STRING","execute",80],"(",")",["T_WHITESPACE","\n    ",80],"{",["T_WHITESPACE","\n        ",81],["T_VARIABLE","$linkId",82],["T_WHITESPACE"," ",82],"=",["T_WHITESPACE"," ",82],["T_VARIABLE","$this",82],["T_OBJECT_OPERATOR","->",82],["T_STRING","getRequest",82],"(",")",["T_OBJECT_OPERATOR","->",82],["T_STRING","getParam",82],"(",["T_CONSTANT_ENCAPSED_STRING","'id'",82],",",["T_WHITESPACE"," ",82],["T_LNUMBER","0",82],")",";",["T_WHITESPACE","\n        ",82],["T_VARIABLE","$type",83],["T_WHITESPACE"," ",83],"=",["T_WHITESPACE"," ",83],["T_VARIABLE","$this",83],["T_OBJECT_OPERATOR","->",83],["T_STRING","getRequest",83],"(",")",["T_OBJECT_OPERATOR","->",83],["T_STRING","getParam",83],"(",["T_CONSTANT_ENCAPSED_STRING","'type'",83],",",["T_WHITESPACE"," ",83],["T_LNUMBER","0",83],")",";",["T_WHITESPACE","\n        ",83],["T_DOC_COMMENT","\/** @var \\Magento\\Downloadable\\Model\\Link $link *\/",84],["T_WHITESPACE","\n        ",84],["T_VARIABLE","$link",85],["T_WHITESPACE"," ",85],"=",["T_WHITESPACE"," ",85],["T_VARIABLE","$this",85],["T_OBJECT_OPERATOR","->",85],["T_STRING","_createLink",85],"(",")",["T_OBJECT_OPERATOR","->",85],["T_STRING","load",85],"(",["T_VARIABLE","$linkId",85],")",";",["T_WHITESPACE","\n        ",85],["T_IF","if",86],["T_WHITESPACE"," ",86],"(",["T_VARIABLE","$link",86],["T_OBJECT_OPERATOR","->",86],["T_STRING","getId",86],"(",")",")",["T_WHITESPACE"," ",86],"{",["T_WHITESPACE","\n            ",86],["T_VARIABLE","$resource",87],["T_WHITESPACE"," ",87],"=",["T_WHITESPACE"," ",87],["T_CONSTANT_ENCAPSED_STRING","''",87],";",["T_WHITESPACE","\n            ",87],["T_VARIABLE","$resourceType",88],["T_WHITESPACE"," ",88],"=",["T_WHITESPACE"," ",88],["T_CONSTANT_ENCAPSED_STRING","''",88],";",["T_WHITESPACE","\n            ",88],["T_IF","if",89],["T_WHITESPACE"," ",89],"(",["T_VARIABLE","$type",89],["T_WHITESPACE"," ",89],["T_IS_EQUAL","==",89],["T_WHITESPACE"," ",89],["T_CONSTANT_ENCAPSED_STRING","'link'",89],")",["T_WHITESPACE"," ",89],"{",["T_WHITESPACE","\n                ",89],["T_IF","if",90],["T_WHITESPACE"," ",90],"(",["T_VARIABLE","$link",90],["T_OBJECT_OPERATOR","->",90],["T_STRING","getLinkType",90],"(",")",["T_WHITESPACE"," ",90],["T_IS_EQUAL","==",90],["T_WHITESPACE"," ",90],["T_STRING","DownloadHelper",90],["T_DOUBLE_COLON","::",90],["T_STRING","LINK_TYPE_URL",90],")",["T_WHITESPACE"," ",90],"{",["T_WHITESPACE","\n                    ",90],["T_VARIABLE","$resource",91],["T_WHITESPACE"," ",91],"=",["T_WHITESPACE"," ",91],["T_VARIABLE","$link",91],["T_OBJECT_OPERATOR","->",91],["T_STRING","getLinkUrl",91],"(",")",";",["T_WHITESPACE","\n                    ",91],["T_VARIABLE","$resourceType",92],["T_WHITESPACE"," ",92],"=",["T_WHITESPACE"," ",92],["T_STRING","DownloadHelper",92],["T_DOUBLE_COLON","::",92],["T_STRING","LINK_TYPE_URL",92],";",["T_WHITESPACE","\n                ",92],"}",["T_WHITESPACE"," ",93],["T_ELSEIF","elseif",93],["T_WHITESPACE"," ",93],"(",["T_VARIABLE","$link",93],["T_OBJECT_OPERATOR","->",93],["T_STRING","getLinkType",93],"(",")",["T_WHITESPACE"," ",93],["T_IS_EQUAL","==",93],["T_WHITESPACE"," ",93],["T_STRING","DownloadHelper",93],["T_DOUBLE_COLON","::",93],["T_STRING","LINK_TYPE_FILE",93],")",["T_WHITESPACE"," ",93],"{",["T_WHITESPACE","\n                    ",93],["T_VARIABLE","$resource",94],["T_WHITESPACE"," ",94],"=",["T_WHITESPACE"," ",94],["T_VARIABLE","$this",94],["T_OBJECT_OPERATOR","->",94],["T_STRING","_objectManager",94],["T_OBJECT_OPERATOR","->",94],["T_STRING","get",94],"(",["T_WHITESPACE","\n                        ",94],["T_NS_SEPARATOR","\\",95],["T_STRING","Magento",95],["T_NS_SEPARATOR","\\",95],["T_STRING","Downloadable",95],["T_NS_SEPARATOR","\\",95],["T_STRING","Helper",95],["T_NS_SEPARATOR","\\",95],["T_STRING","File",95],["T_DOUBLE_COLON","::",95],["T_CLASS","class",95],["T_WHITESPACE","\n                    ",95],")",["T_OBJECT_OPERATOR","->",96],["T_STRING","getFilePath",96],"(",["T_WHITESPACE","\n                        ",96],["T_VARIABLE","$this",97],["T_OBJECT_OPERATOR","->",97],["T_STRING","_getLink",97],"(",")",["T_OBJECT_OPERATOR","->",97],["T_STRING","getBasePath",97],"(",")",",",["T_WHITESPACE","\n                        ",97],["T_VARIABLE","$link",98],["T_OBJECT_OPERATOR","->",98],["T_STRING","getLinkFile",98],"(",")",["T_WHITESPACE","\n                    ",98],")",";",["T_WHITESPACE","\n                    ",99],["T_VARIABLE","$resourceType",100],["T_WHITESPACE"," ",100],"=",["T_WHITESPACE"," ",100],["T_STRING","DownloadHelper",100],["T_DOUBLE_COLON","::",100],["T_STRING","LINK_TYPE_FILE",100],";",["T_WHITESPACE","\n                ",100],"}",["T_WHITESPACE","\n            ",101],"}",["T_WHITESPACE"," ",102],["T_ELSE","else",102],["T_WHITESPACE"," ",102],"{",["T_WHITESPACE","\n                ",102],["T_IF","if",103],["T_WHITESPACE"," ",103],"(",["T_VARIABLE","$link",103],["T_OBJECT_OPERATOR","->",103],["T_STRING","getSampleType",103],"(",")",["T_WHITESPACE"," ",103],["T_IS_EQUAL","==",103],["T_WHITESPACE"," ",103],["T_STRING","DownloadHelper",103],["T_DOUBLE_COLON","::",103],["T_STRING","LINK_TYPE_URL",103],")",["T_WHITESPACE"," ",103],"{",["T_WHITESPACE","\n                    ",103],["T_VARIABLE","$resource",104],["T_WHITESPACE"," ",104],"=",["T_WHITESPACE"," ",104],["T_VARIABLE","$link",104],["T_OBJECT_OPERATOR","->",104],["T_STRING","getSampleUrl",104],"(",")",";",["T_WHITESPACE","\n                    ",104],["T_VARIABLE","$resourceType",105],["T_WHITESPACE"," ",105],"=",["T_WHITESPACE"," ",105],["T_STRING","DownloadHelper",105],["T_DOUBLE_COLON","::",105],["T_STRING","LINK_TYPE_URL",105],";",["T_WHITESPACE","\n                ",105],"}",["T_WHITESPACE"," ",106],["T_ELSEIF","elseif",106],["T_WHITESPACE"," ",106],"(",["T_VARIABLE","$link",106],["T_OBJECT_OPERATOR","->",106],["T_STRING","getSampleType",106],"(",")",["T_WHITESPACE"," ",106],["T_IS_EQUAL","==",106],["T_WHITESPACE"," ",106],["T_STRING","DownloadHelper",106],["T_DOUBLE_COLON","::",106],["T_STRING","LINK_TYPE_FILE",106],")",["T_WHITESPACE"," ",106],"{",["T_WHITESPACE","\n                    ",106],["T_VARIABLE","$resource",107],["T_WHITESPACE"," ",107],"=",["T_WHITESPACE"," ",107],["T_VARIABLE","$this",107],["T_OBJECT_OPERATOR","->",107],["T_STRING","_objectManager",107],["T_OBJECT_OPERATOR","->",107],["T_STRING","get",107],"(",["T_WHITESPACE","\n                        ",107],["T_NS_SEPARATOR","\\",108],["T_STRING","Magento",108],["T_NS_SEPARATOR","\\",108],["T_STRING","Downloadable",108],["T_NS_SEPARATOR","\\",108],["T_STRING","Helper",108],["T_NS_SEPARATOR","\\",108],["T_STRING","File",108],["T_DOUBLE_COLON","::",108],["T_CLASS","class",108],["T_WHITESPACE","\n                    ",108],")",["T_OBJECT_OPERATOR","->",109],["T_STRING","getFilePath",109],"(",["T_WHITESPACE","\n                        ",109],["T_VARIABLE","$this",110],["T_OBJECT_OPERATOR","->",110],["T_STRING","_getLink",110],"(",")",["T_OBJECT_OPERATOR","->",110],["T_STRING","getBaseSamplePath",110],"(",")",",",["T_WHITESPACE","\n                        ",110],["T_VARIABLE","$link",111],["T_OBJECT_OPERATOR","->",111],["T_STRING","getSampleFile",111],"(",")",["T_WHITESPACE","\n                    ",111],")",";",["T_WHITESPACE","\n                    ",112],["T_VARIABLE","$resourceType",113],["T_WHITESPACE"," ",113],"=",["T_WHITESPACE"," ",113],["T_STRING","DownloadHelper",113],["T_DOUBLE_COLON","::",113],["T_STRING","LINK_TYPE_FILE",113],";",["T_WHITESPACE","\n                ",113],"}",["T_WHITESPACE","\n            ",114],"}",["T_WHITESPACE","\n            ",115],["T_TRY","try",116],["T_WHITESPACE"," ",116],"{",["T_WHITESPACE","\n                ",116],["T_VARIABLE","$this",117],["T_OBJECT_OPERATOR","->",117],["T_STRING","_processDownload",117],"(",["T_VARIABLE","$resource",117],",",["T_WHITESPACE"," ",117],["T_VARIABLE","$resourceType",117],")",";",["T_WHITESPACE","\n            ",117],"}",["T_WHITESPACE"," ",118],["T_CATCH","catch",118],["T_WHITESPACE"," ",118],"(",["T_NS_SEPARATOR","\\",118],["T_STRING","Magento",118],["T_NS_SEPARATOR","\\",118],["T_STRING","Framework",118],["T_NS_SEPARATOR","\\",118],["T_STRING","Exception",118],["T_NS_SEPARATOR","\\",118],["T_STRING","LocalizedException",118],["T_WHITESPACE"," ",118],["T_VARIABLE","$e",118],")",["T_WHITESPACE"," ",118],"{",["T_WHITESPACE","\n                ",118],["T_VARIABLE","$this",119],["T_OBJECT_OPERATOR","->",119],["T_STRING","messageManager",119],["T_OBJECT_OPERATOR","->",119],["T_STRING","addError",119],"(",["T_STRING","__",119],"(",["T_CONSTANT_ENCAPSED_STRING","'Something went wrong while getting the requested content.'",119],")",")",";",["T_WHITESPACE","\n            ",119],"}",["T_WHITESPACE","\n        ",120],"}",["T_WHITESPACE","\n    ",121],"}",["T_WHITESPACE","\n",122],"}",["T_WHITESPACE","\n",123]]
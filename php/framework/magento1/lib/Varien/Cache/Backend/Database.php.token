[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Magento\n *\n * NOTICE OF LICENSE\n *\n * This source file is subject to the Open Software License (OSL 3.0)\n * that is bundled with this package in the file LICENSE.txt.\n * It is also available through the world-wide-web at this URL:\n * http:\/\/opensource.org\/licenses\/osl-3.0.php\n * If you did not receive a copy of the license and are unable to\n * obtain it through the world-wide-web, please send an email\n * to license@magento.com so we can send you a copy immediately.\n *\n * DISCLAIMER\n *\n * Do not edit or add to this file if you wish to upgrade Magento to newer\n * versions in the future. If you wish to customize Magento for your\n * needs please refer to http:\/\/www.magento.com for more information.\n *\n * @category    Varien\n * @package     Varien_Cache\n * @copyright  Copyright (c) 2006-2016 X.commerce, Inc. and affiliates (http:\/\/www.magento.com)\n * @license    http:\/\/opensource.org\/licenses\/osl-3.0.php  Open Software License (OSL 3.0)\n *\/",2],["T_WHITESPACE","\n\n",25],["T_DOC_COMMENT","\/**\nTables declaration:\n\nCREATE TABLE IF NOT EXISTS `core_cache` (\n        `id` VARCHAR(255) NOT NULL,\n        `data` mediumblob,\n        `create_time` int(11),\n        `update_time` int(11),\n        `expire_time` int(11),\n        PRIMARY KEY  (`id`),\n        KEY `IDX_EXPIRE_TIME` (`expire_time`)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8;\n\nCREATE TABLE IF NOT EXISTS `core_cache_tag` (\n    `tag` VARCHAR(255) NOT NULL,\n    `cache_id` VARCHAR(255) NOT NULL,\n    KEY `IDX_TAG` (`tag`),\n    KEY `IDX_CACHE_ID` (`cache_id`),\n    CONSTRAINT `FK_CORE_CACHE_TAG` FOREIGN KEY (`cache_id`)\n    REFERENCES `core_cache` (`id`) ON DELETE CASCADE ON UPDATE CASCADE\n) ENGINE=InnoDB DEFAULT CHARSET=utf8;\n*\/",27],["T_WHITESPACE","\n\n",48],["T_DOC_COMMENT","\/**\n * Database cache backend\n *\/",50],["T_WHITESPACE","\n",52],["T_CLASS","class",53],["T_WHITESPACE"," ",53],["T_STRING","Varien_Cache_Backend_Database",53],["T_WHITESPACE","\n    ",53],["T_EXTENDS","extends",54],["T_WHITESPACE"," ",54],["T_STRING","Zend_Cache_Backend",54],["T_WHITESPACE"," ",54],["T_IMPLEMENTS","implements",54],["T_WHITESPACE"," ",54],["T_STRING","Zend_Cache_Backend_ExtendedInterface",54],["T_WHITESPACE","\n",54],"{",["T_WHITESPACE","\n    ",55],["T_DOC_COMMENT","\/**\n     * Available options\n     *\n     * @var array available options\n     *\/",56],["T_WHITESPACE","\n    ",60],["T_PROTECTED","protected",61],["T_WHITESPACE"," ",61],["T_VARIABLE","$_options",61],["T_WHITESPACE"," ",61],"=",["T_WHITESPACE"," ",61],["T_ARRAY","array",61],"(",["T_WHITESPACE","\n        ",61],["T_CONSTANT_ENCAPSED_STRING","'adapter'",62],["T_WHITESPACE","           ",62],["T_DOUBLE_ARROW","=>",62],["T_WHITESPACE"," ",62],["T_CONSTANT_ENCAPSED_STRING","''",62],",",["T_WHITESPACE","\n        ",62],["T_CONSTANT_ENCAPSED_STRING","'adapter_callback'",63],["T_WHITESPACE","  ",63],["T_DOUBLE_ARROW","=>",63],["T_WHITESPACE"," ",63],["T_CONSTANT_ENCAPSED_STRING","''",63],",",["T_WHITESPACE","\n        ",63],["T_CONSTANT_ENCAPSED_STRING","'data_table'",64],["T_WHITESPACE","        ",64],["T_DOUBLE_ARROW","=>",64],["T_WHITESPACE"," ",64],["T_CONSTANT_ENCAPSED_STRING","''",64],",",["T_WHITESPACE","\n        ",64],["T_CONSTANT_ENCAPSED_STRING","'tags_table'",65],["T_WHITESPACE","        ",65],["T_DOUBLE_ARROW","=>",65],["T_WHITESPACE"," ",65],["T_CONSTANT_ENCAPSED_STRING","''",65],",",["T_WHITESPACE","\n        ",65],["T_CONSTANT_ENCAPSED_STRING","'store_data'",66],["T_WHITESPACE","        ",66],["T_DOUBLE_ARROW","=>",66],["T_WHITESPACE"," ",66],["T_STRING","true",66],",",["T_WHITESPACE","\n    ",66],")",";",["T_WHITESPACE","\n\n    ",67],["T_PROTECTED","protected",69],["T_WHITESPACE"," ",69],["T_VARIABLE","$_adapter",69],["T_WHITESPACE"," ",69],"=",["T_WHITESPACE"," ",69],["T_STRING","null",69],";",["T_WHITESPACE","\n\n    ",69],["T_DOC_COMMENT","\/**\n     * Constructor\n     *\n     * @param array $options associative array of options\n     *\/",71],["T_WHITESPACE","\n    ",75],["T_PUBLIC","public",76],["T_WHITESPACE"," ",76],["T_FUNCTION","function",76],["T_WHITESPACE"," ",76],["T_STRING","__construct",76],"(",["T_VARIABLE","$options",76],["T_WHITESPACE"," ",76],"=",["T_WHITESPACE"," ",76],["T_ARRAY","array",76],"(",")",")",["T_WHITESPACE","\n    ",76],"{",["T_WHITESPACE","\n        ",77],["T_STRING","parent",78],["T_DOUBLE_COLON","::",78],["T_STRING","__construct",78],"(",["T_VARIABLE","$options",78],")",";",["T_WHITESPACE","\n        ",78],["T_IF","if",79],["T_WHITESPACE"," ",79],"(",["T_EMPTY","empty",79],"(",["T_VARIABLE","$this",79],["T_OBJECT_OPERATOR","->",79],["T_STRING","_options",79],"[",["T_CONSTANT_ENCAPSED_STRING","'adapter_callback'",79],"]",")",")",["T_WHITESPACE"," ",79],"{",["T_WHITESPACE","\n            ",79],["T_IF","if",80],["T_WHITESPACE"," ",80],"(","!","(",["T_VARIABLE","$this",80],["T_OBJECT_OPERATOR","->",80],["T_STRING","_options",80],"[",["T_CONSTANT_ENCAPSED_STRING","'adapter'",80],"]",["T_WHITESPACE"," ",80],["T_INSTANCEOF","instanceof",80],["T_WHITESPACE"," ",80],["T_STRING","Zend_Db_Adapter_Abstract",80],")",")",["T_WHITESPACE"," ",80],"{",["T_WHITESPACE","\n                ",80],["T_STRING","Zend_Cache",81],["T_DOUBLE_COLON","::",81],["T_STRING","throwException",81],"(",["T_CONSTANT_ENCAPSED_STRING","'Option \"adapter\" should be declared and extend Zend_Db_Adapter_Abstract!'",81],")",";",["T_WHITESPACE","\n            ",81],"}",["T_WHITESPACE","\n        ",82],"}",["T_WHITESPACE","\n        ",83],["T_IF","if",84],["T_WHITESPACE"," ",84],"(",["T_EMPTY","empty",84],"(",["T_VARIABLE","$this",84],["T_OBJECT_OPERATOR","->",84],["T_STRING","_options",84],"[",["T_CONSTANT_ENCAPSED_STRING","'data_table'",84],"]",")",["T_WHITESPACE"," ",84],["T_BOOLEAN_OR","||",84],["T_WHITESPACE"," ",84],["T_EMPTY","empty",84],["T_WHITESPACE"," ",84],"(",["T_VARIABLE","$this",84],["T_OBJECT_OPERATOR","->",84],["T_STRING","_options",84],"[",["T_CONSTANT_ENCAPSED_STRING","'tags_table'",84],"]",")",")",["T_WHITESPACE"," ",84],"{",["T_WHITESPACE","\n            ",84],["T_STRING","Zend_Cache",85],["T_DOUBLE_COLON","::",85],["T_STRING","throwException",85],"(",["T_CONSTANT_ENCAPSED_STRING","'Options \"data_table\" and \"tags_table\" should be declared!'",85],")",";",["T_WHITESPACE","\n        ",85],"}",["T_WHITESPACE","\n    ",86],"}",["T_WHITESPACE","\n\n    ",87],["T_DOC_COMMENT","\/**\n     * Get DB adapter\n     *\n     * @return Zend_Db_Adapter_Abstract\n     *\/",89],["T_WHITESPACE","\n    ",93],["T_PROTECTED","protected",94],["T_WHITESPACE"," ",94],["T_FUNCTION","function",94],["T_WHITESPACE"," ",94],["T_STRING","_getAdapter",94],"(",")",["T_WHITESPACE","\n    ",94],"{",["T_WHITESPACE","\n        ",95],["T_IF","if",96],["T_WHITESPACE"," ",96],"(","!",["T_VARIABLE","$this",96],["T_OBJECT_OPERATOR","->",96],["T_STRING","_adapter",96],")",["T_WHITESPACE"," ",96],"{",["T_WHITESPACE","\n            ",96],["T_IF","if",97],["T_WHITESPACE"," ",97],"(","!",["T_EMPTY","empty",97],"(",["T_VARIABLE","$this",97],["T_OBJECT_OPERATOR","->",97],["T_STRING","_options",97],"[",["T_CONSTANT_ENCAPSED_STRING","'adapter_callback'",97],"]",")",")",["T_WHITESPACE"," ",97],"{",["T_WHITESPACE","\n                ",97],["T_VARIABLE","$adapter",98],["T_WHITESPACE"," ",98],"=",["T_WHITESPACE"," ",98],["T_STRING","call_user_func",98],"(",["T_VARIABLE","$this",98],["T_OBJECT_OPERATOR","->",98],["T_STRING","_options",98],"[",["T_CONSTANT_ENCAPSED_STRING","'adapter_callback'",98],"]",")",";",["T_WHITESPACE","\n            ",98],"}",["T_WHITESPACE"," ",99],["T_ELSE","else",99],["T_WHITESPACE"," ",99],"{",["T_WHITESPACE","\n                ",99],["T_VARIABLE","$adapter",100],["T_WHITESPACE"," ",100],"=",["T_WHITESPACE"," ",100],["T_VARIABLE","$this",100],["T_OBJECT_OPERATOR","->",100],["T_STRING","_options",100],"[",["T_CONSTANT_ENCAPSED_STRING","'adapter'",100],"]",";",["T_WHITESPACE","\n            ",100],"}",["T_WHITESPACE","\n            ",101],["T_IF","if",102],["T_WHITESPACE"," ",102],"(","!","(",["T_VARIABLE","$adapter",102],["T_WHITESPACE"," ",102],["T_INSTANCEOF","instanceof",102],["T_WHITESPACE"," ",102],["T_STRING","Zend_Db_Adapter_Abstract",102],")",")",["T_WHITESPACE"," ",102],"{",["T_WHITESPACE","\n                ",102],["T_STRING","Zend_Cache",103],["T_DOUBLE_COLON","::",103],["T_STRING","throwException",103],"(",["T_CONSTANT_ENCAPSED_STRING","'DB Adapter should be declared and extend Zend_Db_Adapter_Abstract'",103],")",";",["T_WHITESPACE","\n            ",103],"}",["T_WHITESPACE"," ",104],["T_ELSE","else",104],["T_WHITESPACE"," ",104],"{",["T_WHITESPACE","\n                ",104],["T_VARIABLE","$this",105],["T_OBJECT_OPERATOR","->",105],["T_STRING","_adapter",105],["T_WHITESPACE"," ",105],"=",["T_WHITESPACE"," ",105],["T_VARIABLE","$adapter",105],";",["T_WHITESPACE","\n            ",105],"}",["T_WHITESPACE","\n        ",106],"}",["T_WHITESPACE","\n        ",107],["T_RETURN","return",108],["T_WHITESPACE"," ",108],["T_VARIABLE","$this",108],["T_OBJECT_OPERATOR","->",108],["T_STRING","_adapter",108],";",["T_WHITESPACE","\n    ",108],"}",["T_WHITESPACE","\n\n    ",109],["T_DOC_COMMENT","\/**\n     * Get table name where data is stored\n     *\n     * @return string\n     *\/",111],["T_WHITESPACE","\n    ",115],["T_PROTECTED","protected",116],["T_WHITESPACE"," ",116],["T_FUNCTION","function",116],["T_WHITESPACE"," ",116],["T_STRING","_getDataTable",116],"(",")",["T_WHITESPACE","\n    ",116],"{",["T_WHITESPACE","\n        ",117],["T_RETURN","return",118],["T_WHITESPACE"," ",118],["T_VARIABLE","$this",118],["T_OBJECT_OPERATOR","->",118],["T_STRING","_options",118],"[",["T_CONSTANT_ENCAPSED_STRING","'data_table'",118],"]",";",["T_WHITESPACE","\n    ",118],"}",["T_WHITESPACE","\n\n    ",119],["T_DOC_COMMENT","\/**\n     * Get table name where tags are stored\n     *\n     * @return string\n     *\/",121],["T_WHITESPACE","\n    ",125],["T_PROTECTED","protected",126],["T_WHITESPACE"," ",126],["T_FUNCTION","function",126],["T_WHITESPACE"," ",126],["T_STRING","_getTagsTable",126],"(",")",["T_WHITESPACE","\n    ",126],"{",["T_WHITESPACE","\n        ",127],["T_RETURN","return",128],["T_WHITESPACE"," ",128],["T_VARIABLE","$this",128],["T_OBJECT_OPERATOR","->",128],["T_STRING","_options",128],"[",["T_CONSTANT_ENCAPSED_STRING","'tags_table'",128],"]",";",["T_WHITESPACE","\n    ",128],"}",["T_WHITESPACE","\n\n    ",129],["T_DOC_COMMENT","\/**\n     * Test if a cache is available for the given id and (if yes) return it (false else)\n     *\n     * Note : return value is always \"string\" (unserialization is done by the core not by the backend)\n     *\n     * @param  string  $id                     Cache id\n     * @param  boolean $doNotTestCacheValidity If set to true, the cache validity won't be tested\n     * @return string|false cached datas\n     *\/",131],["T_WHITESPACE","\n    ",139],["T_PUBLIC","public",140],["T_WHITESPACE"," ",140],["T_FUNCTION","function",140],["T_WHITESPACE"," ",140],["T_STRING","load",140],"(",["T_VARIABLE","$id",140],",",["T_WHITESPACE"," ",140],["T_VARIABLE","$doNotTestCacheValidity",140],["T_WHITESPACE"," ",140],"=",["T_WHITESPACE"," ",140],["T_STRING","false",140],")",["T_WHITESPACE","\n    ",140],"{",["T_WHITESPACE","\n        ",141],["T_IF","if",142],["T_WHITESPACE"," ",142],"(",["T_VARIABLE","$this",142],["T_OBJECT_OPERATOR","->",142],["T_STRING","_options",142],"[",["T_CONSTANT_ENCAPSED_STRING","'store_data'",142],"]",")",["T_WHITESPACE"," ",142],"{",["T_WHITESPACE","\n            ",142],["T_VARIABLE","$select",143],["T_WHITESPACE"," ",143],"=",["T_WHITESPACE"," ",143],["T_VARIABLE","$this",143],["T_OBJECT_OPERATOR","->",143],["T_STRING","_getAdapter",143],"(",")",["T_OBJECT_OPERATOR","->",143],["T_STRING","select",143],"(",")",["T_WHITESPACE","\n                ",143],["T_OBJECT_OPERATOR","->",144],["T_STRING","from",144],"(",["T_VARIABLE","$this",144],["T_OBJECT_OPERATOR","->",144],["T_STRING","_getDataTable",144],"(",")",",",["T_WHITESPACE"," ",144],["T_CONSTANT_ENCAPSED_STRING","'data'",144],")",["T_WHITESPACE","\n                ",144],["T_OBJECT_OPERATOR","->",145],["T_STRING","where",145],"(",["T_CONSTANT_ENCAPSED_STRING","'id=:cache_id'",145],")",";",["T_WHITESPACE","\n\n            ",145],["T_IF","if",147],["T_WHITESPACE"," ",147],"(","!",["T_VARIABLE","$doNotTestCacheValidity",147],")",["T_WHITESPACE"," ",147],"{",["T_WHITESPACE","\n                ",147],["T_VARIABLE","$select",148],["T_OBJECT_OPERATOR","->",148],["T_STRING","where",148],"(",["T_CONSTANT_ENCAPSED_STRING","'expire_time=0 OR expire_time>?'",148],",",["T_WHITESPACE"," ",148],["T_STRING","time",148],"(",")",")",";",["T_WHITESPACE","\n            ",148],"}",["T_WHITESPACE","\n            ",149],["T_RETURN","return",150],["T_WHITESPACE"," ",150],["T_VARIABLE","$this",150],["T_OBJECT_OPERATOR","->",150],["T_STRING","_getAdapter",150],"(",")",["T_OBJECT_OPERATOR","->",150],["T_STRING","fetchOne",150],"(",["T_VARIABLE","$select",150],",",["T_WHITESPACE"," ",150],["T_ARRAY","array",150],"(",["T_CONSTANT_ENCAPSED_STRING","'cache_id'",150],["T_DOUBLE_ARROW","=>",150],["T_VARIABLE","$id",150],")",")",";",["T_WHITESPACE","\n        ",150],"}",["T_WHITESPACE"," ",151],["T_ELSE","else",151],["T_WHITESPACE"," ",151],"{",["T_WHITESPACE","\n            ",151],["T_RETURN","return",152],["T_WHITESPACE"," ",152],["T_STRING","false",152],";",["T_WHITESPACE","\n        ",152],"}",["T_WHITESPACE","\n    ",153],"}",["T_WHITESPACE","\n\n    ",154],["T_DOC_COMMENT","\/**\n     * Test if a cache is available or not (for the given id)\n     *\n     * @param  string $id cache id\n     * @return mixed|false (a cache is not available) or \"last modified\" timestamp (int) of the available cache record\n     *\/",156],["T_WHITESPACE","\n    ",161],["T_PUBLIC","public",162],["T_WHITESPACE"," ",162],["T_FUNCTION","function",162],["T_WHITESPACE"," ",162],["T_STRING","test",162],"(",["T_VARIABLE","$id",162],")",["T_WHITESPACE","\n    ",162],"{",["T_WHITESPACE","\n        ",163],["T_IF","if",164],["T_WHITESPACE"," ",164],"(",["T_VARIABLE","$this",164],["T_OBJECT_OPERATOR","->",164],["T_STRING","_options",164],"[",["T_CONSTANT_ENCAPSED_STRING","'store_data'",164],"]",")",["T_WHITESPACE"," ",164],"{",["T_WHITESPACE","\n            ",164],["T_VARIABLE","$select",165],["T_WHITESPACE"," ",165],"=",["T_WHITESPACE"," ",165],["T_VARIABLE","$this",165],["T_OBJECT_OPERATOR","->",165],["T_STRING","_getAdapter",165],"(",")",["T_OBJECT_OPERATOR","->",165],["T_STRING","select",165],"(",")",["T_WHITESPACE","\n                ",165],["T_OBJECT_OPERATOR","->",166],["T_STRING","from",166],"(",["T_VARIABLE","$this",166],["T_OBJECT_OPERATOR","->",166],["T_STRING","_getDataTable",166],"(",")",",",["T_WHITESPACE"," ",166],["T_CONSTANT_ENCAPSED_STRING","'update_time'",166],")",["T_WHITESPACE","\n                ",166],["T_OBJECT_OPERATOR","->",167],["T_STRING","where",167],"(",["T_CONSTANT_ENCAPSED_STRING","'id=:cache_id'",167],")",["T_WHITESPACE","\n                ",167],["T_OBJECT_OPERATOR","->",168],["T_STRING","where",168],"(",["T_CONSTANT_ENCAPSED_STRING","'expire_time=0 OR expire_time>?'",168],",",["T_WHITESPACE"," ",168],["T_STRING","time",168],"(",")",")",";",["T_WHITESPACE","\n            ",168],["T_RETURN","return",169],["T_WHITESPACE"," ",169],["T_VARIABLE","$this",169],["T_OBJECT_OPERATOR","->",169],["T_STRING","_getAdapter",169],"(",")",["T_OBJECT_OPERATOR","->",169],["T_STRING","fetchOne",169],"(",["T_VARIABLE","$select",169],",",["T_WHITESPACE"," ",169],["T_ARRAY","array",169],"(",["T_CONSTANT_ENCAPSED_STRING","'cache_id'",169],["T_DOUBLE_ARROW","=>",169],["T_VARIABLE","$id",169],")",")",";",["T_WHITESPACE","\n        ",169],"}",["T_WHITESPACE"," ",170],["T_ELSE","else",170],["T_WHITESPACE"," ",170],"{",["T_WHITESPACE","\n            ",170],["T_RETURN","return",171],["T_WHITESPACE"," ",171],["T_STRING","false",171],";",["T_WHITESPACE","\n        ",171],"}",["T_WHITESPACE","\n    ",172],"}",["T_WHITESPACE","\n\n    ",173],["T_DOC_COMMENT","\/**\n     * Save data into a cache storage\n     *\n     * Note : $data is always \"string\" (serialization is done by the\n     * core not by the backend)\n     *\n     * @param  string $data Data to cache\n     * @param  string $id Cache id\n     * @param  array $tags Array of strings, the cache record will be tagged by each string entry\n     * @param  int|bool|null $specificLifetime If != false, set a specific lifetime for this cache record\n     *                                    (null => infinite lifetime)\n     *\n     * @return bool true if no problem\n     *\/",175],["T_WHITESPACE","\n    ",188],["T_PUBLIC","public",189],["T_WHITESPACE"," ",189],["T_FUNCTION","function",189],["T_WHITESPACE"," ",189],["T_STRING","save",189],"(",["T_VARIABLE","$data",189],",",["T_WHITESPACE"," ",189],["T_VARIABLE","$id",189],",",["T_WHITESPACE"," ",189],["T_VARIABLE","$tags",189],["T_WHITESPACE"," ",189],"=",["T_WHITESPACE"," ",189],["T_ARRAY","array",189],"(",")",",",["T_WHITESPACE"," ",189],["T_VARIABLE","$specificLifetime",189],["T_WHITESPACE"," ",189],"=",["T_WHITESPACE"," ",189],["T_STRING","false",189],")",["T_WHITESPACE","\n    ",189],"{",["T_WHITESPACE","\n        ",190],["T_IF","if",191],["T_WHITESPACE"," ",191],"(",["T_VARIABLE","$this",191],["T_OBJECT_OPERATOR","->",191],["T_STRING","_options",191],"[",["T_CONSTANT_ENCAPSED_STRING","'store_data'",191],"]",")",["T_WHITESPACE"," ",191],"{",["T_WHITESPACE","\n            ",191],["T_VARIABLE","$adapter",192],["T_WHITESPACE","    ",192],"=",["T_WHITESPACE"," ",192],["T_VARIABLE","$this",192],["T_OBJECT_OPERATOR","->",192],["T_STRING","_getAdapter",192],"(",")",";",["T_WHITESPACE","\n            ",192],["T_VARIABLE","$dataTable",193],["T_WHITESPACE","  ",193],"=",["T_WHITESPACE"," ",193],["T_VARIABLE","$this",193],["T_OBJECT_OPERATOR","->",193],["T_STRING","_getDataTable",193],"(",")",";",["T_WHITESPACE","\n\n            ",193],["T_VARIABLE","$lifetime",195],["T_WHITESPACE"," ",195],"=",["T_WHITESPACE"," ",195],["T_VARIABLE","$this",195],["T_OBJECT_OPERATOR","->",195],["T_STRING","getLifetime",195],"(",["T_VARIABLE","$specificLifetime",195],")",";",["T_WHITESPACE","\n            ",195],["T_VARIABLE","$time",196],["T_WHITESPACE","     ",196],"=",["T_WHITESPACE"," ",196],["T_STRING","time",196],"(",")",";",["T_WHITESPACE","\n            ",196],["T_VARIABLE","$expire",197],["T_WHITESPACE","   ",197],"=",["T_WHITESPACE"," ",197],"(",["T_VARIABLE","$lifetime",197],["T_WHITESPACE"," ",197],["T_IS_IDENTICAL","===",197],["T_WHITESPACE"," ",197],["T_LNUMBER","0",197],["T_WHITESPACE"," ",197],["T_BOOLEAN_OR","||",197],["T_WHITESPACE"," ",197],["T_VARIABLE","$lifetime",197],["T_WHITESPACE"," ",197],["T_IS_IDENTICAL","===",197],["T_WHITESPACE"," ",197],["T_STRING","null",197],")",["T_WHITESPACE"," ",197],"?",["T_WHITESPACE"," ",197],["T_LNUMBER","0",197],["T_WHITESPACE"," ",197],":",["T_WHITESPACE"," ",197],["T_VARIABLE","$time",197],"+",["T_VARIABLE","$lifetime",197],";",["T_WHITESPACE","\n\n            ",197],["T_VARIABLE","$dataCol",199],["T_WHITESPACE","    ",199],"=",["T_WHITESPACE"," ",199],["T_VARIABLE","$adapter",199],["T_OBJECT_OPERATOR","->",199],["T_STRING","quoteIdentifier",199],"(",["T_CONSTANT_ENCAPSED_STRING","'data'",199],")",";",["T_WHITESPACE","\n            ",199],["T_VARIABLE","$expireCol",200],["T_WHITESPACE","  ",200],"=",["T_WHITESPACE"," ",200],["T_VARIABLE","$adapter",200],["T_OBJECT_OPERATOR","->",200],["T_STRING","quoteIdentifier",200],"(",["T_CONSTANT_ENCAPSED_STRING","'expire_time'",200],")",";",["T_WHITESPACE","\n            ",200],["T_VARIABLE","$query",201],["T_WHITESPACE"," ",201],"=",["T_WHITESPACE"," ",201],"\"",["T_ENCAPSED_AND_WHITESPACE","INSERT INTO ",201],["T_CURLY_OPEN","{",201],["T_VARIABLE","$dataTable",201],"}",["T_ENCAPSED_AND_WHITESPACE"," (\n                    ",201],["T_CURLY_OPEN","{",202],["T_VARIABLE","$adapter",202],["T_OBJECT_OPERATOR","->",202],["T_STRING","quoteIdentifier",202],"(",["T_CONSTANT_ENCAPSED_STRING","'id'",202],")","}",["T_ENCAPSED_AND_WHITESPACE",",\n                    ",202],["T_CURLY_OPEN","{",203],["T_VARIABLE","$dataCol",203],"}",["T_ENCAPSED_AND_WHITESPACE",",\n                    ",203],["T_CURLY_OPEN","{",204],["T_VARIABLE","$adapter",204],["T_OBJECT_OPERATOR","->",204],["T_STRING","quoteIdentifier",204],"(",["T_CONSTANT_ENCAPSED_STRING","'create_time'",204],")","}",["T_ENCAPSED_AND_WHITESPACE",",\n                    ",204],["T_CURLY_OPEN","{",205],["T_VARIABLE","$adapter",205],["T_OBJECT_OPERATOR","->",205],["T_STRING","quoteIdentifier",205],"(",["T_CONSTANT_ENCAPSED_STRING","'update_time'",205],")","}",["T_ENCAPSED_AND_WHITESPACE",",\n                    ",205],["T_CURLY_OPEN","{",206],["T_VARIABLE","$expireCol",206],"}",["T_ENCAPSED_AND_WHITESPACE",")\n                VALUES (?, ?, ?, ?, ?) ON DUPLICATE KEY UPDATE\n                    ",206],["T_CURLY_OPEN","{",208],["T_VARIABLE","$dataCol",208],"}",["T_ENCAPSED_AND_WHITESPACE","=VALUES(",208],["T_CURLY_OPEN","{",208],["T_VARIABLE","$dataCol",208],"}",["T_ENCAPSED_AND_WHITESPACE","),\n                    ",208],["T_CURLY_OPEN","{",209],["T_VARIABLE","$expireCol",209],"}",["T_ENCAPSED_AND_WHITESPACE","=VALUES(",209],["T_CURLY_OPEN","{",209],["T_VARIABLE","$expireCol",209],"}",["T_ENCAPSED_AND_WHITESPACE",")",209],"\"",";",["T_WHITESPACE","\n\n            ",209],["T_VARIABLE","$result",211],["T_WHITESPACE"," ",211],"=",["T_WHITESPACE"," ",211],["T_VARIABLE","$adapter",211],["T_OBJECT_OPERATOR","->",211],["T_STRING","query",211],"(",["T_VARIABLE","$query",211],",",["T_WHITESPACE"," ",211],["T_ARRAY","array",211],"(",["T_VARIABLE","$id",211],",",["T_WHITESPACE"," ",211],["T_VARIABLE","$data",211],",",["T_WHITESPACE"," ",211],["T_VARIABLE","$time",211],",",["T_WHITESPACE"," ",211],["T_VARIABLE","$time",211],",",["T_WHITESPACE"," ",211],["T_VARIABLE","$expire",211],")",")",["T_OBJECT_OPERATOR","->",211],["T_STRING","rowCount",211],"(",")",";",["T_WHITESPACE","\n            ",211],["T_IF","if",212],["T_WHITESPACE"," ",212],"(","!",["T_VARIABLE","$result",212],")",["T_WHITESPACE"," ",212],"{",["T_WHITESPACE","\n                ",212],["T_RETURN","return",213],["T_WHITESPACE"," ",213],["T_STRING","false",213],";",["T_WHITESPACE","\n            ",213],"}",["T_WHITESPACE","\n        ",214],"}",["T_WHITESPACE","\n        ",215],["T_VARIABLE","$tagRes",216],["T_WHITESPACE"," ",216],"=",["T_WHITESPACE"," ",216],["T_VARIABLE","$this",216],["T_OBJECT_OPERATOR","->",216],["T_STRING","_saveTags",216],"(",["T_VARIABLE","$id",216],",",["T_WHITESPACE"," ",216],["T_VARIABLE","$tags",216],")",";",["T_WHITESPACE","\n        ",216],["T_RETURN","return",217],["T_WHITESPACE"," ",217],["T_VARIABLE","$tagRes",217],";",["T_WHITESPACE","\n    ",217],"}",["T_WHITESPACE","\n\n    ",218],["T_DOC_COMMENT","\/**\n     * Remove a cache record\n     *\n     * @param  string $id Cache id\n     * @return boolean True if no problem\n     *\/",220],["T_WHITESPACE","\n    ",225],["T_PUBLIC","public",226],["T_WHITESPACE"," ",226],["T_FUNCTION","function",226],["T_WHITESPACE"," ",226],["T_STRING","remove",226],"(",["T_VARIABLE","$id",226],")",["T_WHITESPACE","\n    ",226],"{",["T_WHITESPACE","\n        ",227],["T_VARIABLE","$adapter",228],["T_WHITESPACE"," ",228],"=",["T_WHITESPACE"," ",228],["T_VARIABLE","$this",228],["T_OBJECT_OPERATOR","->",228],["T_STRING","_getAdapter",228],"(",")",";",["T_WHITESPACE","\n        ",228],["T_VARIABLE","$result",229],["T_WHITESPACE"," ",229],"=",["T_WHITESPACE"," ",229],["T_STRING","true",229],";",["T_WHITESPACE","\n        ",229],["T_IF","if",230],["T_WHITESPACE"," ",230],"(",["T_VARIABLE","$this",230],["T_OBJECT_OPERATOR","->",230],["T_STRING","_options",230],"[",["T_CONSTANT_ENCAPSED_STRING","'store_data'",230],"]",")",["T_WHITESPACE"," ",230],"{",["T_WHITESPACE","\n            ",230],["T_VARIABLE","$result",231],["T_WHITESPACE"," ",231],"=",["T_WHITESPACE"," ",231],["T_VARIABLE","$adapter",231],["T_OBJECT_OPERATOR","->",231],["T_STRING","delete",231],"(",["T_VARIABLE","$this",231],["T_OBJECT_OPERATOR","->",231],["T_STRING","_getDataTable",231],"(",")",",",["T_WHITESPACE"," ",231],["T_ARRAY","array",231],"(",["T_CONSTANT_ENCAPSED_STRING","'id = ?'",231],["T_WHITESPACE"," ",231],["T_DOUBLE_ARROW","=>",231],["T_WHITESPACE"," ",231],["T_VARIABLE","$id",231],")",")",";",["T_WHITESPACE","\n        ",231],"}",["T_WHITESPACE","\n\n        ",232],["T_RETURN","return",234],["T_WHITESPACE"," ",234],["T_VARIABLE","$result",234],["T_WHITESPACE"," ",234],["T_BOOLEAN_AND","&&",234],["T_WHITESPACE"," ",234],["T_VARIABLE","$adapter",234],["T_OBJECT_OPERATOR","->",234],["T_STRING","delete",234],"(",["T_VARIABLE","$this",234],["T_OBJECT_OPERATOR","->",234],["T_STRING","_getTagsTable",234],"(",")",",",["T_WHITESPACE"," ",234],["T_ARRAY","array",234],"(",["T_CONSTANT_ENCAPSED_STRING","'cache_id = ?'",234],["T_WHITESPACE"," ",234],["T_DOUBLE_ARROW","=>",234],["T_WHITESPACE"," ",234],["T_VARIABLE","$id",234],")",")",";",["T_WHITESPACE","\n    ",234],"}",["T_WHITESPACE","\n\n    ",235],["T_DOC_COMMENT","\/**\n     * Delete cache rows from Data table\n     *\n     * @param $cacheIdsToRemove\n     * @return int\n     *\/",237],["T_WHITESPACE","\n    ",242],["T_PROTECTED","protected",243],["T_WHITESPACE"," ",243],["T_FUNCTION","function",243],["T_WHITESPACE"," ",243],["T_STRING","_deleteCachesFromDataTable",243],"(",["T_VARIABLE","$cacheIdsToRemove",243],")",["T_WHITESPACE","\n    ",243],"{",["T_WHITESPACE","\n        ",244],["T_RETURN","return",245],["T_WHITESPACE"," ",245],["T_VARIABLE","$this",245],["T_OBJECT_OPERATOR","->",245],["T_STRING","_getAdapter",245],"(",")",["T_OBJECT_OPERATOR","->",245],["T_STRING","delete",245],"(",["T_VARIABLE","$this",245],["T_OBJECT_OPERATOR","->",245],["T_STRING","_getDataTable",245],"(",")",",",["T_WHITESPACE"," ",245],["T_ARRAY","array",245],"(",["T_CONSTANT_ENCAPSED_STRING","'id IN (?)'",245],["T_WHITESPACE"," ",245],["T_DOUBLE_ARROW","=>",245],["T_WHITESPACE"," ",245],["T_VARIABLE","$cacheIdsToRemove",245],")",")",";",["T_WHITESPACE","\n    ",245],"}",["T_WHITESPACE","\n\n    ",246],["T_DOC_COMMENT","\/**\n     * Delete cache rows from Tags table\n     *\n     * @param $cacheIdsToRemove\n     * @return int\n     *\/",248],["T_WHITESPACE","\n    ",253],["T_PROTECTED","protected",254],["T_WHITESPACE"," ",254],["T_FUNCTION","function",254],["T_WHITESPACE"," ",254],["T_STRING","_deleteCachesFromTagsTable",254],"(",["T_VARIABLE","$cacheIdsToRemove",254],")",["T_WHITESPACE","\n    ",254],"{",["T_WHITESPACE","\n        ",255],["T_RETURN","return",256],["T_WHITESPACE"," ",256],["T_VARIABLE","$this",256],["T_OBJECT_OPERATOR","->",256],["T_STRING","_getAdapter",256],"(",")",["T_OBJECT_OPERATOR","->",256],["T_STRING","delete",256],"(",["T_VARIABLE","$this",256],["T_OBJECT_OPERATOR","->",256],["T_STRING","_getTagsTable",256],"(",")",",",["T_WHITESPACE"," ",256],["T_ARRAY","array",256],"(",["T_CONSTANT_ENCAPSED_STRING","'cache_id IN (?)'",256],["T_WHITESPACE"," ",256],["T_DOUBLE_ARROW","=>",256],["T_WHITESPACE"," ",256],["T_VARIABLE","$cacheIdsToRemove",256],")",")",";",["T_WHITESPACE","\n    ",256],"}",["T_WHITESPACE","\n\n    ",257],["T_DOC_COMMENT","\/**\n     * Clean some cache records\n     *\n     * Available modes are :\n     * Zend_Cache::CLEANING_MODE_ALL (default)    => remove all cache entries ($tags is not used)\n     * Zend_Cache::CLEANING_MODE_OLD              => remove too old cache entries ($tags is not used)\n     * Zend_Cache::CLEANING_MODE_MATCHING_TAG     => remove cache entries matching all given tags\n     *                                               ($tags can be an array of strings or a single string)\n     * Zend_Cache::CLEANING_MODE_NOT_MATCHING_TAG => remove cache entries not {matching one of the given tags}\n     *                                               ($tags can be an array of strings or a single string)\n     * Zend_Cache::CLEANING_MODE_MATCHING_ANY_TAG => remove cache entries matching any given tags\n     *                                               ($tags can be an array of strings or a single string)\n     *\n     * @param  string $mode Clean mode\n     * @param  array  $tags Array of tags\n     * @return boolean true if no problem\n     *\/",259],["T_WHITESPACE","\n    ",275],["T_PUBLIC","public",276],["T_WHITESPACE"," ",276],["T_FUNCTION","function",276],["T_WHITESPACE"," ",276],["T_STRING","clean",276],"(",["T_VARIABLE","$mode",276],["T_WHITESPACE"," ",276],"=",["T_WHITESPACE"," ",276],["T_STRING","Zend_Cache",276],["T_DOUBLE_COLON","::",276],["T_STRING","CLEANING_MODE_ALL",276],",",["T_WHITESPACE"," ",276],["T_VARIABLE","$tags",276],["T_WHITESPACE"," ",276],"=",["T_WHITESPACE"," ",276],["T_ARRAY","array",276],"(",")",")",["T_WHITESPACE","\n    ",276],"{",["T_WHITESPACE","\n        ",277],["T_VARIABLE","$adapter",278],["T_WHITESPACE"," ",278],"=",["T_WHITESPACE"," ",278],["T_VARIABLE","$this",278],["T_OBJECT_OPERATOR","->",278],["T_STRING","_getAdapter",278],"(",")",";",["T_WHITESPACE","\n        ",278],["T_VARIABLE","$result",279],["T_WHITESPACE"," ",279],"=",["T_WHITESPACE"," ",279],["T_STRING","true",279],";",["T_WHITESPACE","\n\n        ",279],["T_SWITCH","switch",281],"(",["T_VARIABLE","$mode",281],")",["T_WHITESPACE"," ",281],"{",["T_WHITESPACE","\n            ",281],["T_CASE","case",282],["T_WHITESPACE"," ",282],["T_STRING","Zend_Cache",282],["T_DOUBLE_COLON","::",282],["T_STRING","CLEANING_MODE_ALL",282],":",["T_WHITESPACE","\n                ",282],["T_IF","if",283],["T_WHITESPACE"," ",283],"(",["T_VARIABLE","$this",283],["T_OBJECT_OPERATOR","->",283],["T_STRING","_options",283],"[",["T_CONSTANT_ENCAPSED_STRING","'store_data'",283],"]",")",["T_WHITESPACE"," ",283],"{",["T_WHITESPACE","\n                    ",283],["T_VARIABLE","$result",284],["T_WHITESPACE"," ",284],"=",["T_WHITESPACE"," ",284],["T_VARIABLE","$adapter",284],["T_OBJECT_OPERATOR","->",284],["T_STRING","query",284],"(",["T_CONSTANT_ENCAPSED_STRING","'TRUNCATE TABLE '",284],["T_WHITESPACE"," ",284],".",["T_WHITESPACE"," ",284],["T_VARIABLE","$this",284],["T_OBJECT_OPERATOR","->",284],["T_STRING","_getDataTable",284],"(",")",")",";",["T_WHITESPACE","\n                ",284],"}",["T_WHITESPACE","\n                ",285],["T_VARIABLE","$result",286],["T_WHITESPACE"," ",286],"=",["T_WHITESPACE"," ",286],["T_VARIABLE","$result",286],["T_WHITESPACE"," ",286],["T_BOOLEAN_AND","&&",286],["T_WHITESPACE"," ",286],["T_VARIABLE","$adapter",286],["T_OBJECT_OPERATOR","->",286],["T_STRING","query",286],"(",["T_CONSTANT_ENCAPSED_STRING","'TRUNCATE TABLE '",286],["T_WHITESPACE"," ",286],".",["T_WHITESPACE"," ",286],["T_VARIABLE","$this",286],["T_OBJECT_OPERATOR","->",286],["T_STRING","_getTagsTable",286],"(",")",")",";",["T_WHITESPACE","\n                ",286],["T_BREAK","break",287],";",["T_WHITESPACE","\n            ",287],["T_CASE","case",288],["T_WHITESPACE"," ",288],["T_STRING","Zend_Cache",288],["T_DOUBLE_COLON","::",288],["T_STRING","CLEANING_MODE_OLD",288],":",["T_WHITESPACE","\n                ",288],["T_IF","if",289],["T_WHITESPACE"," ",289],"(",["T_VARIABLE","$this",289],["T_OBJECT_OPERATOR","->",289],["T_STRING","_options",289],"[",["T_CONSTANT_ENCAPSED_STRING","'store_data'",289],"]",")",["T_WHITESPACE"," ",289],"{",["T_WHITESPACE","\n                    ",289],["T_VARIABLE","$result",290],["T_WHITESPACE"," ",290],"=",["T_WHITESPACE"," ",290],["T_VARIABLE","$this",290],["T_OBJECT_OPERATOR","->",290],["T_STRING","_cleanOldCache",290],"(",")",";",["T_WHITESPACE","\n                ",290],"}",["T_WHITESPACE","\n                ",291],["T_BREAK","break",292],";",["T_WHITESPACE","\n            ",292],["T_CASE","case",293],["T_WHITESPACE"," ",293],["T_STRING","Zend_Cache",293],["T_DOUBLE_COLON","::",293],["T_STRING","CLEANING_MODE_MATCHING_TAG",293],":",["T_WHITESPACE","\n            ",293],["T_CASE","case",294],["T_WHITESPACE"," ",294],["T_STRING","Zend_Cache",294],["T_DOUBLE_COLON","::",294],["T_STRING","CLEANING_MODE_NOT_MATCHING_TAG",294],":",["T_WHITESPACE","\n            ",294],["T_CASE","case",295],["T_WHITESPACE"," ",295],["T_STRING","Zend_Cache",295],["T_DOUBLE_COLON","::",295],["T_STRING","CLEANING_MODE_MATCHING_ANY_TAG",295],":",["T_WHITESPACE","\n                ",295],["T_VARIABLE","$result",296],["T_WHITESPACE"," ",296],"=",["T_WHITESPACE"," ",296],["T_VARIABLE","$this",296],["T_OBJECT_OPERATOR","->",296],["T_STRING","_cleanByTags",296],"(",["T_VARIABLE","$mode",296],",",["T_WHITESPACE"," ",296],["T_VARIABLE","$tags",296],")",";",["T_WHITESPACE","\n                ",296],["T_BREAK","break",297],";",["T_WHITESPACE","\n            ",297],["T_DEFAULT","default",298],":",["T_WHITESPACE","\n                ",298],["T_STRING","Zend_Cache",299],["T_DOUBLE_COLON","::",299],["T_STRING","throwException",299],"(",["T_CONSTANT_ENCAPSED_STRING","'Invalid mode for clean() method'",299],")",";",["T_WHITESPACE","\n                ",299],["T_BREAK","break",300],";",["T_WHITESPACE","\n        ",300],"}",["T_WHITESPACE","\n\n        ",301],["T_RETURN","return",303],["T_WHITESPACE"," ",303],["T_VARIABLE","$result",303],";",["T_WHITESPACE","\n    ",303],"}",["T_WHITESPACE","\n\n    ",304],["T_DOC_COMMENT","\/**\n     * Clean old cache data and related cache tag data\n     *\n     * @return bool\n     *\/",306],["T_WHITESPACE","\n    ",310],["T_PROTECTED","protected",311],["T_WHITESPACE"," ",311],["T_FUNCTION","function",311],["T_WHITESPACE"," ",311],["T_STRING","_cleanOldCache",311],"(",")",["T_WHITESPACE","\n    ",311],"{",["T_WHITESPACE","\n        ",312],["T_VARIABLE","$time",313],["T_WHITESPACE","    ",313],"=",["T_WHITESPACE"," ",313],["T_STRING","time",313],"(",")",";",["T_WHITESPACE","\n        ",313],["T_VARIABLE","$counter",314],["T_WHITESPACE"," ",314],"=",["T_WHITESPACE"," ",314],["T_LNUMBER","0",314],";",["T_WHITESPACE","\n        ",314],["T_VARIABLE","$result",315],["T_WHITESPACE","  ",315],"=",["T_WHITESPACE"," ",315],["T_STRING","true",315],";",["T_WHITESPACE","\n        ",315],["T_VARIABLE","$adapter",316],["T_WHITESPACE"," ",316],"=",["T_WHITESPACE"," ",316],["T_VARIABLE","$this",316],["T_OBJECT_OPERATOR","->",316],["T_STRING","_getAdapter",316],"(",")",";",["T_WHITESPACE","\n        ",316],["T_VARIABLE","$cacheIdsToRemove",317],["T_WHITESPACE"," ",317],"=",["T_WHITESPACE"," ",317],["T_ARRAY","array",317],"(",")",";",["T_WHITESPACE","\n\n        ",317],["T_VARIABLE","$select",319],["T_WHITESPACE"," ",319],"=",["T_WHITESPACE"," ",319],["T_VARIABLE","$adapter",319],["T_OBJECT_OPERATOR","->",319],["T_STRING","select",319],"(",")",["T_WHITESPACE","\n            ",319],["T_OBJECT_OPERATOR","->",320],["T_STRING","from",320],"(",["T_VARIABLE","$this",320],["T_OBJECT_OPERATOR","->",320],["T_STRING","_getDataTable",320],"(",")",",",["T_WHITESPACE"," ",320],["T_CONSTANT_ENCAPSED_STRING","'id'",320],")",["T_WHITESPACE","\n            ",320],["T_OBJECT_OPERATOR","->",321],["T_STRING","where",321],"(",["T_CONSTANT_ENCAPSED_STRING","'expire_time > ?'",321],",",["T_WHITESPACE"," ",321],["T_LNUMBER","0",321],")",["T_WHITESPACE","\n            ",321],["T_OBJECT_OPERATOR","->",322],["T_STRING","where",322],"(",["T_CONSTANT_ENCAPSED_STRING","'expire_time <= ?'",322],",",["T_WHITESPACE"," ",322],["T_VARIABLE","$time",322],")",["T_WHITESPACE","\n        ",322],";",["T_WHITESPACE","\n\n        ",323],["T_VARIABLE","$statement",325],["T_WHITESPACE"," ",325],"=",["T_WHITESPACE"," ",325],["T_VARIABLE","$adapter",325],["T_OBJECT_OPERATOR","->",325],["T_STRING","query",325],"(",["T_VARIABLE","$select",325],")",";",["T_WHITESPACE","\n        ",325],["T_WHILE","while",326],["T_WHITESPACE"," ",326],"(",["T_VARIABLE","$row",326],["T_WHITESPACE"," ",326],"=",["T_WHITESPACE"," ",326],["T_VARIABLE","$statement",326],["T_OBJECT_OPERATOR","->",326],["T_STRING","fetch",326],"(",")",")",["T_WHITESPACE"," ",326],"{",["T_WHITESPACE","\n            ",326],["T_IF","if",327],["T_WHITESPACE"," ",327],"(","!",["T_VARIABLE","$result",327],")",["T_WHITESPACE"," ",327],"{",["T_WHITESPACE","\n                ",327],["T_BREAK","break",328],";",["T_WHITESPACE","\n            ",328],"}",["T_WHITESPACE","\n            ",329],["T_VARIABLE","$cacheIdsToRemove",330],"[","]",["T_WHITESPACE"," ",330],"=",["T_WHITESPACE"," ",330],["T_VARIABLE","$row",330],"[",["T_CONSTANT_ENCAPSED_STRING","'id'",330],"]",";",["T_WHITESPACE","\n            ",330],["T_VARIABLE","$counter",331],["T_INC","++",331],";",["T_WHITESPACE","\n            ",331],["T_IF","if",332],["T_WHITESPACE"," ",332],"(",["T_VARIABLE","$counter",332],["T_WHITESPACE"," ",332],">",["T_WHITESPACE"," ",332],["T_LNUMBER","100",332],")",["T_WHITESPACE"," ",332],"{",["T_WHITESPACE","\n                ",332],["T_VARIABLE","$result",333],["T_WHITESPACE"," ",333],"=",["T_WHITESPACE"," ",333],["T_VARIABLE","$result",333],["T_WHITESPACE"," ",333],["T_BOOLEAN_AND","&&",333],["T_WHITESPACE"," ",333],["T_VARIABLE","$this",333],["T_OBJECT_OPERATOR","->",333],["T_STRING","_deleteCachesFromDataTable",333],"(",["T_VARIABLE","$cacheIdsToRemove",333],")",";",["T_WHITESPACE","\n                ",333],["T_VARIABLE","$result",334],["T_WHITESPACE"," ",334],"=",["T_WHITESPACE"," ",334],["T_VARIABLE","$result",334],["T_WHITESPACE"," ",334],["T_BOOLEAN_AND","&&",334],["T_WHITESPACE"," ",334],["T_VARIABLE","$this",334],["T_OBJECT_OPERATOR","->",334],["T_STRING","_deleteCachesFromTagsTable",334],"(",["T_VARIABLE","$cacheIdsToRemove",334],")",";",["T_WHITESPACE","\n                ",334],["T_VARIABLE","$cacheIdsToRemove",335],["T_WHITESPACE"," ",335],"=",["T_WHITESPACE"," ",335],["T_ARRAY","array",335],"(",")",";",["T_WHITESPACE","\n                ",335],["T_VARIABLE","$counter",336],["T_WHITESPACE"," ",336],"=",["T_WHITESPACE"," ",336],["T_LNUMBER","0",336],";",["T_WHITESPACE","\n            ",336],"}",["T_WHITESPACE","\n        ",337],"}",["T_WHITESPACE","\n        ",338],["T_IF","if",339],["T_WHITESPACE"," ",339],"(","!",["T_EMPTY","empty",339],"(",["T_VARIABLE","$cacheIdsToRemove",339],")",")",["T_WHITESPACE"," ",339],"{",["T_WHITESPACE","\n            ",339],["T_VARIABLE","$result",340],["T_WHITESPACE"," ",340],"=",["T_WHITESPACE"," ",340],["T_VARIABLE","$result",340],["T_WHITESPACE"," ",340],["T_BOOLEAN_AND","&&",340],["T_WHITESPACE"," ",340],["T_VARIABLE","$this",340],["T_OBJECT_OPERATOR","->",340],["T_STRING","_deleteCachesFromDataTable",340],"(",["T_VARIABLE","$cacheIdsToRemove",340],")",";",["T_WHITESPACE","\n            ",340],["T_VARIABLE","$result",341],["T_WHITESPACE"," ",341],"=",["T_WHITESPACE"," ",341],["T_VARIABLE","$result",341],["T_WHITESPACE"," ",341],["T_BOOLEAN_AND","&&",341],["T_WHITESPACE"," ",341],["T_VARIABLE","$this",341],["T_OBJECT_OPERATOR","->",341],["T_STRING","_deleteCachesFromTagsTable",341],"(",["T_VARIABLE","$cacheIdsToRemove",341],")",";",["T_WHITESPACE","\n        ",341],"}",["T_WHITESPACE","\n\n        ",342],["T_RETURN","return",344],["T_WHITESPACE"," ",344],["T_VARIABLE","$result",344],";",["T_WHITESPACE","\n    ",344],"}",["T_WHITESPACE","\n\n    ",345],["T_DOC_COMMENT","\/**\n     * Return an array of stored cache ids\n     *\n     * @return array array of stored cache ids (string)\n     *\/",347],["T_WHITESPACE","\n    ",351],["T_PUBLIC","public",352],["T_WHITESPACE"," ",352],["T_FUNCTION","function",352],["T_WHITESPACE"," ",352],["T_STRING","getIds",352],"(",")",["T_WHITESPACE","\n    ",352],"{",["T_WHITESPACE","\n        ",353],["T_IF","if",354],["T_WHITESPACE"," ",354],"(",["T_VARIABLE","$this",354],["T_OBJECT_OPERATOR","->",354],["T_STRING","_options",354],"[",["T_CONSTANT_ENCAPSED_STRING","'store_data'",354],"]",")",["T_WHITESPACE"," ",354],"{",["T_WHITESPACE","\n            ",354],["T_VARIABLE","$select",355],["T_WHITESPACE"," ",355],"=",["T_WHITESPACE"," ",355],["T_VARIABLE","$this",355],["T_OBJECT_OPERATOR","->",355],["T_STRING","_getAdapter",355],"(",")",["T_OBJECT_OPERATOR","->",355],["T_STRING","select",355],"(",")",["T_WHITESPACE","\n                ",355],["T_OBJECT_OPERATOR","->",356],["T_STRING","from",356],"(",["T_VARIABLE","$this",356],["T_OBJECT_OPERATOR","->",356],["T_STRING","_getDataTable",356],"(",")",",",["T_WHITESPACE"," ",356],["T_CONSTANT_ENCAPSED_STRING","'id'",356],")",";",["T_WHITESPACE","\n            ",356],["T_RETURN","return",357],["T_WHITESPACE"," ",357],["T_VARIABLE","$this",357],["T_OBJECT_OPERATOR","->",357],["T_STRING","_getAdapter",357],"(",")",["T_OBJECT_OPERATOR","->",357],["T_STRING","fetchCol",357],"(",["T_VARIABLE","$select",357],")",";",["T_WHITESPACE","\n        ",357],"}",["T_WHITESPACE"," ",358],["T_ELSE","else",358],["T_WHITESPACE"," ",358],"{",["T_WHITESPACE","\n            ",358],["T_RETURN","return",359],["T_WHITESPACE"," ",359],["T_ARRAY","array",359],"(",")",";",["T_WHITESPACE","\n        ",359],"}",["T_WHITESPACE","\n    ",360],"}",["T_WHITESPACE","\n\n    ",361],["T_DOC_COMMENT","\/**\n     * Return an array of stored tags\n     *\n     * @return array array of stored tags (string)\n     *\/",363],["T_WHITESPACE","\n    ",367],["T_PUBLIC","public",368],["T_WHITESPACE"," ",368],["T_FUNCTION","function",368],["T_WHITESPACE"," ",368],["T_STRING","getTags",368],"(",")",["T_WHITESPACE","\n    ",368],"{",["T_WHITESPACE","\n        ",369],["T_VARIABLE","$select",370],["T_WHITESPACE"," ",370],"=",["T_WHITESPACE"," ",370],["T_VARIABLE","$this",370],["T_OBJECT_OPERATOR","->",370],["T_STRING","_getAdapter",370],"(",")",["T_OBJECT_OPERATOR","->",370],["T_STRING","select",370],"(",")",["T_WHITESPACE","\n            ",370],["T_OBJECT_OPERATOR","->",371],["T_STRING","from",371],"(",["T_VARIABLE","$this",371],["T_OBJECT_OPERATOR","->",371],["T_STRING","_getTagsTable",371],"(",")",",",["T_WHITESPACE"," ",371],["T_CONSTANT_ENCAPSED_STRING","'tag'",371],")",["T_WHITESPACE","\n            ",371],["T_OBJECT_OPERATOR","->",372],["T_STRING","distinct",372],"(",["T_STRING","true",372],")",";",["T_WHITESPACE","\n        ",372],["T_RETURN","return",373],["T_WHITESPACE"," ",373],["T_VARIABLE","$this",373],["T_OBJECT_OPERATOR","->",373],["T_STRING","_getAdapter",373],"(",")",["T_OBJECT_OPERATOR","->",373],["T_STRING","fetchCol",373],"(",["T_VARIABLE","$select",373],")",";",["T_WHITESPACE","\n    ",373],"}",["T_WHITESPACE","\n\n    ",374],["T_DOC_COMMENT","\/**\n     * Return an array of stored cache ids which match given tags\n     *\n     * In case of multiple tags, a logical AND is made between tags\n     *\n     * @param array $tags array of tags\n     * @return array array of matching cache ids (string)\n     *\/",376],["T_WHITESPACE","\n    ",383],["T_PUBLIC","public",384],["T_WHITESPACE"," ",384],["T_FUNCTION","function",384],["T_WHITESPACE"," ",384],["T_STRING","getIdsMatchingTags",384],"(",["T_VARIABLE","$tags",384],["T_WHITESPACE"," ",384],"=",["T_WHITESPACE"," ",384],["T_ARRAY","array",384],"(",")",")",["T_WHITESPACE","\n    ",384],"{",["T_WHITESPACE","\n        ",385],["T_VARIABLE","$select",386],["T_WHITESPACE"," ",386],"=",["T_WHITESPACE"," ",386],["T_VARIABLE","$this",386],["T_OBJECT_OPERATOR","->",386],["T_STRING","_getAdapter",386],"(",")",["T_OBJECT_OPERATOR","->",386],["T_STRING","select",386],"(",")",["T_WHITESPACE","\n            ",386],["T_OBJECT_OPERATOR","->",387],["T_STRING","from",387],"(",["T_VARIABLE","$this",387],["T_OBJECT_OPERATOR","->",387],["T_STRING","_getTagsTable",387],"(",")",",",["T_WHITESPACE"," ",387],["T_CONSTANT_ENCAPSED_STRING","'cache_id'",387],")",["T_WHITESPACE","\n            ",387],["T_OBJECT_OPERATOR","->",388],["T_STRING","distinct",388],"(",["T_STRING","true",388],")",["T_WHITESPACE","\n            ",388],["T_OBJECT_OPERATOR","->",389],["T_STRING","where",389],"(",["T_CONSTANT_ENCAPSED_STRING","'tag IN(?)'",389],",",["T_WHITESPACE"," ",389],["T_VARIABLE","$tags",389],")",["T_WHITESPACE","\n            ",389],["T_OBJECT_OPERATOR","->",390],["T_STRING","group",390],"(",["T_CONSTANT_ENCAPSED_STRING","'cache_id'",390],")",["T_WHITESPACE","\n            ",390],["T_OBJECT_OPERATOR","->",391],["T_STRING","having",391],"(",["T_CONSTANT_ENCAPSED_STRING","'COUNT(cache_id)='",391],".",["T_STRING","count",391],"(",["T_VARIABLE","$tags",391],")",")",";",["T_WHITESPACE","\n        ",391],["T_RETURN","return",392],["T_WHITESPACE"," ",392],["T_VARIABLE","$this",392],["T_OBJECT_OPERATOR","->",392],["T_STRING","_getAdapter",392],"(",")",["T_OBJECT_OPERATOR","->",392],["T_STRING","fetchCol",392],"(",["T_VARIABLE","$select",392],")",";",["T_WHITESPACE","\n    ",392],"}",["T_WHITESPACE","\n\n    ",393],["T_DOC_COMMENT","\/**\n     * Return an array of stored cache ids which don't match given tags\n     *\n     * In case of multiple tags, a logical OR is made between tags\n     *\n     * @param array $tags array of tags\n     * @return array array of not matching cache ids (string)\n     *\/",395],["T_WHITESPACE","\n    ",402],["T_PUBLIC","public",403],["T_WHITESPACE"," ",403],["T_FUNCTION","function",403],["T_WHITESPACE"," ",403],["T_STRING","getIdsNotMatchingTags",403],"(",["T_VARIABLE","$tags",403],["T_WHITESPACE"," ",403],"=",["T_WHITESPACE"," ",403],["T_ARRAY","array",403],"(",")",")",["T_WHITESPACE","\n    ",403],"{",["T_WHITESPACE","\n        ",404],["T_RETURN","return",405],["T_WHITESPACE"," ",405],["T_STRING","array_diff",405],"(",["T_VARIABLE","$this",405],["T_OBJECT_OPERATOR","->",405],["T_STRING","getIds",405],"(",")",",",["T_WHITESPACE"," ",405],["T_VARIABLE","$this",405],["T_OBJECT_OPERATOR","->",405],["T_STRING","getIdsMatchingAnyTags",405],"(",["T_VARIABLE","$tags",405],")",")",";",["T_WHITESPACE","\n    ",405],"}",["T_WHITESPACE","\n\n    ",406],["T_DOC_COMMENT","\/**\n     * Return an array of stored cache ids which match any given tags\n     *\n     * In case of multiple tags, a logical AND is made between tags\n     *\n     * @param array $tags array of tags\n     * @return array array of any matching cache ids (string)\n     *\/",408],["T_WHITESPACE","\n    ",415],["T_PUBLIC","public",416],["T_WHITESPACE"," ",416],["T_FUNCTION","function",416],["T_WHITESPACE"," ",416],["T_STRING","getIdsMatchingAnyTags",416],"(",["T_VARIABLE","$tags",416],["T_WHITESPACE"," ",416],"=",["T_WHITESPACE"," ",416],["T_ARRAY","array",416],"(",")",")",["T_WHITESPACE","\n    ",416],"{",["T_WHITESPACE","\n        ",417],["T_VARIABLE","$select",418],["T_WHITESPACE"," ",418],"=",["T_WHITESPACE"," ",418],["T_VARIABLE","$this",418],["T_OBJECT_OPERATOR","->",418],["T_STRING","_getAdapter",418],"(",")",["T_OBJECT_OPERATOR","->",418],["T_STRING","select",418],"(",")",["T_WHITESPACE","\n            ",418],["T_OBJECT_OPERATOR","->",419],["T_STRING","from",419],"(",["T_VARIABLE","$this",419],["T_OBJECT_OPERATOR","->",419],["T_STRING","_getTagsTable",419],"(",")",",",["T_WHITESPACE"," ",419],["T_CONSTANT_ENCAPSED_STRING","'cache_id'",419],")",["T_WHITESPACE","\n            ",419],["T_OBJECT_OPERATOR","->",420],["T_STRING","distinct",420],"(",["T_STRING","true",420],")",["T_WHITESPACE","\n            ",420],["T_OBJECT_OPERATOR","->",421],["T_STRING","where",421],"(",["T_CONSTANT_ENCAPSED_STRING","'tag IN(?)'",421],",",["T_WHITESPACE"," ",421],["T_VARIABLE","$tags",421],")",";",["T_WHITESPACE","\n        ",421],["T_RETURN","return",422],["T_WHITESPACE"," ",422],["T_VARIABLE","$this",422],["T_OBJECT_OPERATOR","->",422],["T_STRING","_getAdapter",422],"(",")",["T_OBJECT_OPERATOR","->",422],["T_STRING","fetchCol",422],"(",["T_VARIABLE","$select",422],")",";",["T_WHITESPACE","\n    ",422],"}",["T_WHITESPACE","\n\n    ",423],["T_DOC_COMMENT","\/**\n     * Return the filling percentage of the backend storage\n     *\n     * @return int integer between 0 and 100\n     *\/",425],["T_WHITESPACE","\n    ",429],["T_PUBLIC","public",430],["T_WHITESPACE"," ",430],["T_FUNCTION","function",430],["T_WHITESPACE"," ",430],["T_STRING","getFillingPercentage",430],"(",")",["T_WHITESPACE","\n    ",430],"{",["T_WHITESPACE","\n        ",431],["T_RETURN","return",432],["T_WHITESPACE"," ",432],["T_LNUMBER","1",432],";",["T_WHITESPACE","\n    ",432],"}",["T_WHITESPACE","\n\n    ",433],["T_DOC_COMMENT","\/**\n     * Return an array of metadatas for the given cache id\n     *\n     * The array must include these keys :\n     * - expire : the expire timestamp\n     * - tags : a string array of tags\n     * - mtime : timestamp of last modification time\n     *\n     * @param string $id cache id\n     * @return array array of metadatas (false if the cache id is not found)\n     *\/",435],["T_WHITESPACE","\n    ",445],["T_PUBLIC","public",446],["T_WHITESPACE"," ",446],["T_FUNCTION","function",446],["T_WHITESPACE"," ",446],["T_STRING","getMetadatas",446],"(",["T_VARIABLE","$id",446],")",["T_WHITESPACE","\n    ",446],"{",["T_WHITESPACE","\n        ",447],["T_VARIABLE","$select",448],["T_WHITESPACE"," ",448],"=",["T_WHITESPACE"," ",448],["T_VARIABLE","$this",448],["T_OBJECT_OPERATOR","->",448],["T_STRING","_getAdapter",448],"(",")",["T_OBJECT_OPERATOR","->",448],["T_STRING","select",448],"(",")",["T_WHITESPACE","\n            ",448],["T_OBJECT_OPERATOR","->",449],["T_STRING","from",449],"(",["T_VARIABLE","$this",449],["T_OBJECT_OPERATOR","->",449],["T_STRING","_getTagsTable",449],"(",")",",",["T_WHITESPACE"," ",449],["T_CONSTANT_ENCAPSED_STRING","'tag'",449],")",["T_WHITESPACE","\n            ",449],["T_OBJECT_OPERATOR","->",450],["T_STRING","where",450],"(",["T_CONSTANT_ENCAPSED_STRING","'cache_id=?'",450],",",["T_WHITESPACE"," ",450],["T_VARIABLE","$id",450],")",";",["T_WHITESPACE","\n        ",450],["T_VARIABLE","$tags",451],["T_WHITESPACE"," ",451],"=",["T_WHITESPACE"," ",451],["T_VARIABLE","$this",451],["T_OBJECT_OPERATOR","->",451],["T_STRING","_getAdapter",451],"(",")",["T_OBJECT_OPERATOR","->",451],["T_STRING","fetchCol",451],"(",["T_VARIABLE","$select",451],")",";",["T_WHITESPACE","\n\n        ",451],["T_VARIABLE","$select",453],["T_WHITESPACE"," ",453],"=",["T_WHITESPACE"," ",453],["T_VARIABLE","$this",453],["T_OBJECT_OPERATOR","->",453],["T_STRING","_getAdapter",453],"(",")",["T_OBJECT_OPERATOR","->",453],["T_STRING","select",453],"(",")",["T_WHITESPACE","\n            ",453],["T_OBJECT_OPERATOR","->",454],["T_STRING","from",454],"(",["T_VARIABLE","$this",454],["T_OBJECT_OPERATOR","->",454],["T_STRING","_getDataTable",454],"(",")",")",["T_WHITESPACE","\n            ",454],["T_OBJECT_OPERATOR","->",455],["T_STRING","where",455],"(",["T_CONSTANT_ENCAPSED_STRING","'id=?'",455],",",["T_WHITESPACE"," ",455],["T_VARIABLE","$id",455],")",";",["T_WHITESPACE","\n        ",455],["T_VARIABLE","$data",456],["T_WHITESPACE"," ",456],"=",["T_WHITESPACE"," ",456],["T_VARIABLE","$this",456],["T_OBJECT_OPERATOR","->",456],["T_STRING","_getAdapter",456],"(",")",["T_OBJECT_OPERATOR","->",456],["T_STRING","fetchRow",456],"(",["T_VARIABLE","$select",456],")",";",["T_WHITESPACE","\n        ",456],["T_VARIABLE","$res",457],["T_WHITESPACE"," ",457],"=",["T_WHITESPACE"," ",457],["T_STRING","false",457],";",["T_WHITESPACE","\n        ",457],["T_IF","if",458],["T_WHITESPACE"," ",458],"(",["T_VARIABLE","$data",458],")",["T_WHITESPACE"," ",458],"{",["T_WHITESPACE","\n            ",458],["T_VARIABLE","$res",459],["T_WHITESPACE"," ",459],"=",["T_WHITESPACE"," ",459],["T_ARRAY","array",459],["T_WHITESPACE"," ",459],"(",["T_WHITESPACE","\n                ",459],["T_CONSTANT_ENCAPSED_STRING","'expire'",460],["T_DOUBLE_ARROW","=>",460],["T_WHITESPACE"," ",460],["T_VARIABLE","$data",460],"[",["T_CONSTANT_ENCAPSED_STRING","'expire_time'",460],"]",",",["T_WHITESPACE","\n                ",460],["T_CONSTANT_ENCAPSED_STRING","'mtime'",461],["T_WHITESPACE"," ",461],["T_DOUBLE_ARROW","=>",461],["T_WHITESPACE"," ",461],["T_VARIABLE","$data",461],"[",["T_CONSTANT_ENCAPSED_STRING","'update_time'",461],"]",",",["T_WHITESPACE","\n                ",461],["T_CONSTANT_ENCAPSED_STRING","'tags'",462],["T_WHITESPACE","  ",462],["T_DOUBLE_ARROW","=>",462],["T_WHITESPACE"," ",462],["T_VARIABLE","$tags",462],["T_WHITESPACE","\n            ",462],")",";",["T_WHITESPACE","\n        ",463],"}",["T_WHITESPACE","\n        ",464],["T_RETURN","return",465],["T_WHITESPACE"," ",465],["T_VARIABLE","$res",465],";",["T_WHITESPACE","\n    ",465],"}",["T_WHITESPACE","\n\n    ",466],["T_DOC_COMMENT","\/**\n     * Give (if possible) an extra lifetime to the given cache id\n     *\n     * @param string $id cache id\n     * @param int $extraLifetime\n     * @return boolean true if ok\n     *\/",468],["T_WHITESPACE","\n    ",474],["T_PUBLIC","public",475],["T_WHITESPACE"," ",475],["T_FUNCTION","function",475],["T_WHITESPACE"," ",475],["T_STRING","touch",475],"(",["T_VARIABLE","$id",475],",",["T_WHITESPACE"," ",475],["T_VARIABLE","$extraLifetime",475],")",["T_WHITESPACE","\n    ",475],"{",["T_WHITESPACE","\n        ",476],["T_IF","if",477],["T_WHITESPACE"," ",477],"(",["T_VARIABLE","$this",477],["T_OBJECT_OPERATOR","->",477],["T_STRING","_options",477],"[",["T_CONSTANT_ENCAPSED_STRING","'store_data'",477],"]",")",["T_WHITESPACE"," ",477],"{",["T_WHITESPACE","\n            ",477],["T_RETURN","return",478],["T_WHITESPACE"," ",478],["T_VARIABLE","$this",478],["T_OBJECT_OPERATOR","->",478],["T_STRING","_getAdapter",478],"(",")",["T_OBJECT_OPERATOR","->",478],["T_STRING","update",478],"(",["T_WHITESPACE","\n                ",478],["T_VARIABLE","$this",479],["T_OBJECT_OPERATOR","->",479],["T_STRING","_getDataTable",479],"(",")",",",["T_WHITESPACE","\n                ",479],["T_ARRAY","array",480],"(",["T_CONSTANT_ENCAPSED_STRING","'expire_time'",480],["T_DOUBLE_ARROW","=>",480],["T_NEW","new",480],["T_WHITESPACE"," ",480],["T_STRING","Zend_Db_Expr",480],"(",["T_CONSTANT_ENCAPSED_STRING","'expire_time+'",480],".",["T_VARIABLE","$extraLifetime",480],")",")",",",["T_WHITESPACE","\n                ",480],["T_ARRAY","array",481],"(",["T_CONSTANT_ENCAPSED_STRING","'id=?'",481],["T_WHITESPACE"," ",481],["T_DOUBLE_ARROW","=>",481],["T_WHITESPACE"," ",481],["T_VARIABLE","$id",481],",",["T_WHITESPACE"," ",481],["T_CONSTANT_ENCAPSED_STRING","'expire_time = 0 OR expire_time>?'",481],["T_WHITESPACE"," ",481],["T_DOUBLE_ARROW","=>",481],["T_WHITESPACE"," ",481],["T_STRING","time",481],"(",")",")",["T_WHITESPACE","\n            ",481],")",";",["T_WHITESPACE","\n        ",482],"}",["T_WHITESPACE"," ",483],["T_ELSE","else",483],["T_WHITESPACE"," ",483],"{",["T_WHITESPACE","\n            ",483],["T_RETURN","return",484],["T_WHITESPACE"," ",484],["T_STRING","true",484],";",["T_WHITESPACE","\n        ",484],"}",["T_WHITESPACE","\n    ",485],"}",["T_WHITESPACE","\n\n    ",486],["T_DOC_COMMENT","\/**\n     * Return an associative array of capabilities (booleans) of the backend\n     *\n     * The array must include these keys :\n     * - automatic_cleaning (is automating cleaning necessary)\n     * - tags (are tags supported)\n     * - expired_read (is it possible to read expired cache records\n     *                 (for doNotTestCacheValidity option for example))\n     * - priority does the backend deal with priority when saving\n     * - infinite_lifetime (is infinite lifetime can work with this backend)\n     * - get_list (is it possible to get the list of cache ids and the complete list of tags)\n     *\n     * @return array associative of with capabilities\n     *\/",488],["T_WHITESPACE","\n    ",501],["T_PUBLIC","public",502],["T_WHITESPACE"," ",502],["T_FUNCTION","function",502],["T_WHITESPACE"," ",502],["T_STRING","getCapabilities",502],"(",")",["T_WHITESPACE","\n    ",502],"{",["T_WHITESPACE","\n        ",503],["T_RETURN","return",504],["T_WHITESPACE"," ",504],["T_ARRAY","array",504],"(",["T_WHITESPACE","\n            ",504],["T_CONSTANT_ENCAPSED_STRING","'automatic_cleaning'",505],["T_WHITESPACE"," ",505],["T_DOUBLE_ARROW","=>",505],["T_WHITESPACE"," ",505],["T_STRING","true",505],",",["T_WHITESPACE","\n            ",505],["T_CONSTANT_ENCAPSED_STRING","'tags'",506],["T_WHITESPACE"," ",506],["T_DOUBLE_ARROW","=>",506],["T_WHITESPACE"," ",506],["T_STRING","true",506],",",["T_WHITESPACE","\n            ",506],["T_CONSTANT_ENCAPSED_STRING","'expired_read'",507],["T_WHITESPACE"," ",507],["T_DOUBLE_ARROW","=>",507],["T_WHITESPACE"," ",507],["T_STRING","true",507],",",["T_WHITESPACE","\n            ",507],["T_CONSTANT_ENCAPSED_STRING","'priority'",508],["T_WHITESPACE"," ",508],["T_DOUBLE_ARROW","=>",508],["T_WHITESPACE"," ",508],["T_STRING","false",508],",",["T_WHITESPACE","\n            ",508],["T_CONSTANT_ENCAPSED_STRING","'infinite_lifetime'",509],["T_WHITESPACE"," ",509],["T_DOUBLE_ARROW","=>",509],["T_WHITESPACE"," ",509],["T_STRING","true",509],",",["T_WHITESPACE","\n            ",509],["T_CONSTANT_ENCAPSED_STRING","'get_list'",510],["T_WHITESPACE"," ",510],["T_DOUBLE_ARROW","=>",510],["T_WHITESPACE"," ",510],["T_STRING","true",510],["T_WHITESPACE","\n        ",510],")",";",["T_WHITESPACE","\n    ",511],"}",["T_WHITESPACE","\n\n    ",512],["T_DOC_COMMENT","\/**\n     * Save tags related to specific id\n     *\n     * @param string $id\n     * @param array $tags\n     * @return bool\n     *\/",514],["T_WHITESPACE","\n    ",520],["T_PROTECTED","protected",521],["T_WHITESPACE"," ",521],["T_FUNCTION","function",521],["T_WHITESPACE"," ",521],["T_STRING","_saveTags",521],"(",["T_VARIABLE","$id",521],",",["T_WHITESPACE"," ",521],["T_VARIABLE","$tags",521],")",["T_WHITESPACE","\n    ",521],"{",["T_WHITESPACE","\n        ",522],["T_IF","if",523],["T_WHITESPACE"," ",523],"(","!",["T_STRING","is_array",523],"(",["T_VARIABLE","$tags",523],")",")",["T_WHITESPACE"," ",523],"{",["T_WHITESPACE","\n            ",523],["T_VARIABLE","$tags",524],["T_WHITESPACE"," ",524],"=",["T_WHITESPACE"," ",524],["T_ARRAY","array",524],"(",["T_VARIABLE","$tags",524],")",";",["T_WHITESPACE","\n        ",524],"}",["T_WHITESPACE","\n        ",525],["T_IF","if",526],["T_WHITESPACE"," ",526],"(",["T_EMPTY","empty",526],"(",["T_VARIABLE","$tags",526],")",")",["T_WHITESPACE"," ",526],"{",["T_WHITESPACE","\n            ",526],["T_RETURN","return",527],["T_WHITESPACE"," ",527],["T_STRING","true",527],";",["T_WHITESPACE","\n        ",527],"}",["T_WHITESPACE","\n\n        ",528],["T_VARIABLE","$adapter",530],["T_WHITESPACE"," ",530],"=",["T_WHITESPACE"," ",530],["T_VARIABLE","$this",530],["T_OBJECT_OPERATOR","->",530],["T_STRING","_getAdapter",530],"(",")",";",["T_WHITESPACE","\n        ",530],["T_VARIABLE","$tagsTable",531],["T_WHITESPACE"," ",531],"=",["T_WHITESPACE"," ",531],["T_VARIABLE","$this",531],["T_OBJECT_OPERATOR","->",531],["T_STRING","_getTagsTable",531],"(",")",";",["T_WHITESPACE","\n        ",531],["T_VARIABLE","$select",532],["T_WHITESPACE"," ",532],"=",["T_WHITESPACE"," ",532],["T_VARIABLE","$adapter",532],["T_OBJECT_OPERATOR","->",532],["T_STRING","select",532],"(",")",["T_WHITESPACE","\n            ",532],["T_OBJECT_OPERATOR","->",533],["T_STRING","from",533],"(",["T_VARIABLE","$tagsTable",533],",",["T_WHITESPACE"," ",533],["T_CONSTANT_ENCAPSED_STRING","'tag'",533],")",["T_WHITESPACE","\n            ",533],["T_OBJECT_OPERATOR","->",534],["T_STRING","where",534],"(",["T_CONSTANT_ENCAPSED_STRING","'cache_id=?'",534],",",["T_WHITESPACE"," ",534],["T_VARIABLE","$id",534],")",["T_WHITESPACE","\n            ",534],["T_OBJECT_OPERATOR","->",535],["T_STRING","where",535],"(",["T_CONSTANT_ENCAPSED_STRING","'tag IN(?)'",535],",",["T_WHITESPACE"," ",535],["T_VARIABLE","$tags",535],")",";",["T_WHITESPACE","\n\n        ",535],["T_VARIABLE","$result",537],["T_WHITESPACE"," ",537],"=",["T_WHITESPACE"," ",537],["T_STRING","true",537],";",["T_WHITESPACE","\n        ",537],["T_VARIABLE","$existingTags",538],["T_WHITESPACE"," ",538],"=",["T_WHITESPACE"," ",538],["T_VARIABLE","$adapter",538],["T_OBJECT_OPERATOR","->",538],["T_STRING","fetchCol",538],"(",["T_VARIABLE","$select",538],")",";",["T_WHITESPACE","\n        ",538],["T_VARIABLE","$insertTags",539],["T_WHITESPACE"," ",539],"=",["T_WHITESPACE"," ",539],["T_STRING","array_diff",539],"(",["T_VARIABLE","$tags",539],",",["T_WHITESPACE"," ",539],["T_VARIABLE","$existingTags",539],")",";",["T_WHITESPACE","\n        ",539],["T_IF","if",540],["T_WHITESPACE"," ",540],"(","!",["T_EMPTY","empty",540],"(",["T_VARIABLE","$insertTags",540],")",")",["T_WHITESPACE"," ",540],"{",["T_WHITESPACE","\n            ",540],["T_VARIABLE","$query",541],["T_WHITESPACE"," ",541],"=",["T_WHITESPACE"," ",541],["T_CONSTANT_ENCAPSED_STRING","'INSERT IGNORE INTO '",541],["T_WHITESPACE"," ",541],".",["T_WHITESPACE"," ",541],["T_VARIABLE","$tagsTable",541],["T_WHITESPACE"," ",541],".",["T_WHITESPACE"," ",541],["T_CONSTANT_ENCAPSED_STRING","' (tag, cache_id) VALUES '",541],";",["T_WHITESPACE","\n            ",541],["T_VARIABLE","$bind",542],["T_WHITESPACE"," ",542],"=",["T_WHITESPACE"," ",542],["T_ARRAY","array",542],"(",")",";",["T_WHITESPACE","\n            ",542],["T_VARIABLE","$lines",543],["T_WHITESPACE"," ",543],"=",["T_WHITESPACE"," ",543],["T_ARRAY","array",543],"(",")",";",["T_WHITESPACE","\n            ",543],["T_FOREACH","foreach",544],["T_WHITESPACE"," ",544],"(",["T_VARIABLE","$insertTags",544],["T_WHITESPACE"," ",544],["T_AS","as",544],["T_WHITESPACE"," ",544],["T_VARIABLE","$tag",544],")",["T_WHITESPACE"," ",544],"{",["T_WHITESPACE","\n                ",544],["T_VARIABLE","$lines",545],"[","]",["T_WHITESPACE"," ",545],"=",["T_WHITESPACE"," ",545],["T_CONSTANT_ENCAPSED_STRING","'(?, ?)'",545],";",["T_WHITESPACE","\n                ",545],["T_VARIABLE","$bind",546],"[","]",["T_WHITESPACE"," ",546],"=",["T_WHITESPACE"," ",546],["T_VARIABLE","$tag",546],";",["T_WHITESPACE","\n                ",546],["T_VARIABLE","$bind",547],"[","]",["T_WHITESPACE"," ",547],"=",["T_WHITESPACE"," ",547],["T_VARIABLE","$id",547],";",["T_WHITESPACE","\n            ",547],"}",["T_WHITESPACE","\n            ",548],["T_VARIABLE","$query",549],["T_WHITESPACE"," ",549],["T_CONCAT_EQUAL",".=",549],["T_WHITESPACE"," ",549],["T_STRING","implode",549],"(",["T_CONSTANT_ENCAPSED_STRING","','",549],",",["T_WHITESPACE"," ",549],["T_VARIABLE","$lines",549],")",";",["T_WHITESPACE","\n            ",549],["T_VARIABLE","$result",550],["T_WHITESPACE"," ",550],"=",["T_WHITESPACE"," ",550],["T_VARIABLE","$adapter",550],["T_OBJECT_OPERATOR","->",550],["T_STRING","query",550],"(",["T_VARIABLE","$query",550],",",["T_WHITESPACE"," ",550],["T_VARIABLE","$bind",550],")",";",["T_WHITESPACE","\n        ",550],"}",["T_WHITESPACE","\n\n        ",551],["T_RETURN","return",553],["T_WHITESPACE"," ",553],["T_VARIABLE","$result",553],";",["T_WHITESPACE","\n    ",553],"}",["T_WHITESPACE","\n\n    ",554],["T_DOC_COMMENT","\/**\n     * Remove cache data by tags with specified mode\n     *\n     * @param string $mode\n     * @param array $tags\n     * @return bool\n     *\/",556],["T_WHITESPACE","\n    ",562],["T_PROTECTED","protected",563],["T_WHITESPACE"," ",563],["T_FUNCTION","function",563],["T_WHITESPACE"," ",563],["T_STRING","_cleanByTags",563],"(",["T_VARIABLE","$mode",563],",",["T_WHITESPACE"," ",563],["T_VARIABLE","$tags",563],")",["T_WHITESPACE","\n    ",563],"{",["T_WHITESPACE","\n        ",564],["T_VARIABLE","$adapter",565],["T_WHITESPACE"," ",565],"=",["T_WHITESPACE"," ",565],["T_VARIABLE","$this",565],["T_OBJECT_OPERATOR","->",565],["T_STRING","_getAdapter",565],"(",")",";",["T_WHITESPACE","\n        ",565],["T_VARIABLE","$result",566],["T_WHITESPACE"," ",566],"=",["T_WHITESPACE"," ",566],["T_STRING","true",566],";",["T_WHITESPACE","\n        ",566],["T_VARIABLE","$select",567],["T_WHITESPACE"," ",567],"=",["T_WHITESPACE"," ",567],["T_VARIABLE","$adapter",567],["T_OBJECT_OPERATOR","->",567],["T_STRING","select",567],"(",")",["T_WHITESPACE","\n            ",567],["T_OBJECT_OPERATOR","->",568],["T_STRING","from",568],"(",["T_VARIABLE","$this",568],["T_OBJECT_OPERATOR","->",568],["T_STRING","_getTagsTable",568],"(",")",",",["T_WHITESPACE"," ",568],["T_CONSTANT_ENCAPSED_STRING","'cache_id'",568],")",";",["T_WHITESPACE","\n        ",568],["T_SWITCH","switch",569],["T_WHITESPACE"," ",569],"(",["T_VARIABLE","$mode",569],")",["T_WHITESPACE"," ",569],"{",["T_WHITESPACE","\n            ",569],["T_CASE","case",570],["T_WHITESPACE"," ",570],["T_STRING","Zend_Cache",570],["T_DOUBLE_COLON","::",570],["T_STRING","CLEANING_MODE_MATCHING_TAG",570],":",["T_WHITESPACE","\n                ",570],["T_VARIABLE","$select",571],["T_OBJECT_OPERATOR","->",571],["T_STRING","where",571],"(",["T_CONSTANT_ENCAPSED_STRING","'tag IN (?)'",571],",",["T_WHITESPACE"," ",571],["T_VARIABLE","$tags",571],")",["T_WHITESPACE","\n                    ",571],["T_OBJECT_OPERATOR","->",572],["T_STRING","group",572],"(",["T_CONSTANT_ENCAPSED_STRING","'cache_id'",572],")",["T_WHITESPACE","\n                    ",572],["T_OBJECT_OPERATOR","->",573],["T_STRING","having",573],"(",["T_CONSTANT_ENCAPSED_STRING","'COUNT(cache_id) = '",573],["T_WHITESPACE"," ",573],".",["T_WHITESPACE"," ",573],["T_STRING","count",573],"(",["T_VARIABLE","$tags",573],")",")",";",["T_WHITESPACE","\n                ",573],["T_BREAK","break",574],";",["T_WHITESPACE","\n            ",574],["T_CASE","case",575],["T_WHITESPACE"," ",575],["T_STRING","Zend_Cache",575],["T_DOUBLE_COLON","::",575],["T_STRING","CLEANING_MODE_NOT_MATCHING_TAG",575],":",["T_WHITESPACE","\n                ",575],["T_VARIABLE","$select",576],["T_OBJECT_OPERATOR","->",576],["T_STRING","where",576],"(",["T_CONSTANT_ENCAPSED_STRING","'tag NOT IN (?)'",576],",",["T_WHITESPACE"," ",576],["T_VARIABLE","$tags",576],")",";",["T_WHITESPACE","\n                ",576],["T_BREAK","break",577],";",["T_WHITESPACE","\n            ",577],["T_CASE","case",578],["T_WHITESPACE"," ",578],["T_STRING","Zend_Cache",578],["T_DOUBLE_COLON","::",578],["T_STRING","CLEANING_MODE_MATCHING_ANY_TAG",578],":",["T_WHITESPACE","\n                ",578],["T_VARIABLE","$select",579],["T_OBJECT_OPERATOR","->",579],["T_STRING","where",579],"(",["T_CONSTANT_ENCAPSED_STRING","'tag IN (?)'",579],",",["T_WHITESPACE"," ",579],["T_VARIABLE","$tags",579],")",";",["T_WHITESPACE","\n                ",579],["T_BREAK","break",580],";",["T_WHITESPACE","\n            ",580],["T_DEFAULT","default",581],":",["T_WHITESPACE","\n                ",581],["T_STRING","Zend_Cache",582],["T_DOUBLE_COLON","::",582],["T_STRING","throwException",582],"(",["T_CONSTANT_ENCAPSED_STRING","'Invalid mode for _cleanByTags() method'",582],")",";",["T_WHITESPACE","\n                ",582],["T_BREAK","break",583],";",["T_WHITESPACE","\n        ",583],"}",["T_WHITESPACE","\n\n        ",584],["T_VARIABLE","$cacheIdsToRemove",586],["T_WHITESPACE"," ",586],"=",["T_WHITESPACE"," ",586],["T_ARRAY","array",586],"(",")",";",["T_WHITESPACE","\n        ",586],["T_VARIABLE","$counter",587],["T_WHITESPACE"," ",587],"=",["T_WHITESPACE"," ",587],["T_LNUMBER","0",587],";",["T_WHITESPACE","\n        ",587],["T_VARIABLE","$statement",588],["T_WHITESPACE"," ",588],"=",["T_WHITESPACE"," ",588],["T_VARIABLE","$adapter",588],["T_OBJECT_OPERATOR","->",588],["T_STRING","query",588],"(",["T_VARIABLE","$select",588],")",";",["T_WHITESPACE","\n        ",588],["T_WHILE","while",589],["T_WHITESPACE"," ",589],"(",["T_VARIABLE","$row",589],["T_WHITESPACE"," ",589],"=",["T_WHITESPACE"," ",589],["T_VARIABLE","$statement",589],["T_OBJECT_OPERATOR","->",589],["T_STRING","fetch",589],"(",")",")",["T_WHITESPACE"," ",589],"{",["T_WHITESPACE","\n            ",589],["T_IF","if",590],["T_WHITESPACE"," ",590],"(","!",["T_VARIABLE","$result",590],")",["T_WHITESPACE"," ",590],"{",["T_WHITESPACE","\n                ",590],["T_BREAK","break",591],";",["T_WHITESPACE","\n            ",591],"}",["T_WHITESPACE","\n            ",592],["T_VARIABLE","$cacheIdsToRemove",593],"[","]",["T_WHITESPACE"," ",593],"=",["T_WHITESPACE"," ",593],["T_VARIABLE","$row",593],"[",["T_CONSTANT_ENCAPSED_STRING","'cache_id'",593],"]",";",["T_WHITESPACE","\n            ",593],["T_VARIABLE","$counter",594],["T_INC","++",594],";",["T_WHITESPACE","\n            ",594],["T_IF","if",595],["T_WHITESPACE"," ",595],"(",["T_VARIABLE","$counter",595],["T_WHITESPACE"," ",595],">",["T_WHITESPACE"," ",595],["T_LNUMBER","100",595],")",["T_WHITESPACE"," ",595],"{",["T_WHITESPACE","\n                ",595],["T_IF","if",596],["T_WHITESPACE"," ",596],"(",["T_VARIABLE","$this",596],["T_OBJECT_OPERATOR","->",596],["T_STRING","_options",596],"[",["T_CONSTANT_ENCAPSED_STRING","'store_data'",596],"]",")",["T_WHITESPACE"," ",596],"{",["T_WHITESPACE","\n                    ",596],["T_VARIABLE","$result",597],["T_WHITESPACE"," ",597],"=",["T_WHITESPACE"," ",597],["T_VARIABLE","$result",597],["T_WHITESPACE"," ",597],["T_BOOLEAN_AND","&&",597],["T_WHITESPACE"," ",597],["T_VARIABLE","$this",597],["T_OBJECT_OPERATOR","->",597],["T_STRING","_deleteCachesFromDataTable",597],"(",["T_VARIABLE","$cacheIdsToRemove",597],")",";",["T_WHITESPACE","\n                ",597],"}",["T_WHITESPACE","\n                ",598],["T_VARIABLE","$result",599],["T_WHITESPACE"," ",599],"=",["T_WHITESPACE"," ",599],["T_VARIABLE","$result",599],["T_WHITESPACE"," ",599],["T_BOOLEAN_AND","&&",599],["T_WHITESPACE"," ",599],["T_VARIABLE","$this",599],["T_OBJECT_OPERATOR","->",599],["T_STRING","_deleteCachesFromTagsTable",599],"(",["T_VARIABLE","$cacheIdsToRemove",599],")",";",["T_WHITESPACE","\n                ",599],["T_VARIABLE","$cacheIdsToRemove",600],["T_WHITESPACE"," ",600],"=",["T_WHITESPACE"," ",600],["T_ARRAY","array",600],"(",")",";",["T_WHITESPACE","\n                ",600],["T_VARIABLE","$counter",601],["T_WHITESPACE"," ",601],"=",["T_WHITESPACE"," ",601],["T_LNUMBER","0",601],";",["T_WHITESPACE","\n            ",601],"}",["T_WHITESPACE","\n        ",602],"}",["T_WHITESPACE","\n        ",603],["T_IF","if",604],["T_WHITESPACE"," ",604],"(","!",["T_EMPTY","empty",604],"(",["T_VARIABLE","$cacheIdsToRemove",604],")",")",["T_WHITESPACE"," ",604],"{",["T_WHITESPACE","\n            ",604],["T_IF","if",605],["T_WHITESPACE"," ",605],"(",["T_VARIABLE","$this",605],["T_OBJECT_OPERATOR","->",605],["T_STRING","_options",605],"[",["T_CONSTANT_ENCAPSED_STRING","'store_data'",605],"]",")",["T_WHITESPACE"," ",605],"{",["T_WHITESPACE","\n                ",605],["T_VARIABLE","$result",606],["T_WHITESPACE"," ",606],"=",["T_WHITESPACE"," ",606],["T_VARIABLE","$result",606],["T_WHITESPACE"," ",606],["T_BOOLEAN_AND","&&",606],["T_WHITESPACE"," ",606],["T_VARIABLE","$this",606],["T_OBJECT_OPERATOR","->",606],["T_STRING","_deleteCachesFromDataTable",606],"(",["T_VARIABLE","$cacheIdsToRemove",606],")",";",["T_WHITESPACE","\n            ",606],"}",["T_WHITESPACE","\n            ",607],["T_VARIABLE","$result",608],["T_WHITESPACE"," ",608],"=",["T_WHITESPACE"," ",608],["T_VARIABLE","$result",608],["T_WHITESPACE"," ",608],["T_BOOLEAN_AND","&&",608],["T_WHITESPACE"," ",608],["T_VARIABLE","$this",608],["T_OBJECT_OPERATOR","->",608],["T_STRING","_deleteCachesFromTagsTable",608],"(",["T_VARIABLE","$cacheIdsToRemove",608],")",";",["T_WHITESPACE","\n        ",608],"}",["T_WHITESPACE","\n        ",609],["T_RETURN","return",610],["T_WHITESPACE"," ",610],["T_VARIABLE","$result",610],";",["T_WHITESPACE","\n    ",610],"}",["T_WHITESPACE","\n",611],"}",["T_WHITESPACE","\n",612]]
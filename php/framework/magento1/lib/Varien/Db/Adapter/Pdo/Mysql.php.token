[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Magento\n *\n * NOTICE OF LICENSE\n *\n * This source file is subject to the Open Software License (OSL 3.0)\n * that is bundled with this package in the file LICENSE.txt.\n * It is also available through the world-wide-web at this URL:\n * http:\/\/opensource.org\/licenses\/osl-3.0.php\n * If you did not receive a copy of the license and are unable to\n * obtain it through the world-wide-web, please send an email\n * to license@magento.com so we can send you a copy immediately.\n *\n * DISCLAIMER\n *\n * Do not edit or add to this file if you wish to upgrade Magento to newer\n * versions in the future. If you wish to customize Magento for your\n * needs please refer to http:\/\/www.magento.com for more information.\n *\n * @category    Varien\n * @package     Varien_Db\n * @copyright  Copyright (c) 2006-2016 X.commerce, Inc. and affiliates (http:\/\/www.magento.com)\n * @license    http:\/\/opensource.org\/licenses\/osl-3.0.php  Open Software License (OSL 3.0)\n *\/",2],["T_WHITESPACE","\n\n",25],["T_DOC_COMMENT","\/**\n * Mysql PDO DB adapter\n *\/",27],["T_WHITESPACE","\n",29],["T_CLASS","class",30],["T_WHITESPACE"," ",30],["T_STRING","Varien_Db_Adapter_Pdo_Mysql",30],["T_WHITESPACE"," ",30],["T_EXTENDS","extends",30],["T_WHITESPACE"," ",30],["T_STRING","Zend_Db_Adapter_Pdo_Mysql",30],["T_WHITESPACE"," ",30],["T_IMPLEMENTS","implements",30],["T_WHITESPACE"," ",30],["T_STRING","Varien_Db_Adapter_Interface",30],["T_WHITESPACE","\n",30],"{",["T_WHITESPACE","\n    ",31],["T_CONST","const",32],["T_WHITESPACE"," ",32],["T_STRING","DEBUG_CONNECT",32],["T_WHITESPACE","         ",32],"=",["T_WHITESPACE"," ",32],["T_LNUMBER","0",32],";",["T_WHITESPACE","\n    ",32],["T_CONST","const",33],["T_WHITESPACE"," ",33],["T_STRING","DEBUG_TRANSACTION",33],["T_WHITESPACE","     ",33],"=",["T_WHITESPACE"," ",33],["T_LNUMBER","1",33],";",["T_WHITESPACE","\n    ",33],["T_CONST","const",34],["T_WHITESPACE"," ",34],["T_STRING","DEBUG_QUERY",34],["T_WHITESPACE","           ",34],"=",["T_WHITESPACE"," ",34],["T_LNUMBER","2",34],";",["T_WHITESPACE","\n\n    ",34],["T_CONST","const",36],["T_WHITESPACE"," ",36],["T_STRING","TIMESTAMP_FORMAT",36],["T_WHITESPACE","      ",36],"=",["T_WHITESPACE"," ",36],["T_CONSTANT_ENCAPSED_STRING","'Y-m-d H:i:s'",36],";",["T_WHITESPACE","\n    ",36],["T_CONST","const",37],["T_WHITESPACE"," ",37],["T_STRING","DATETIME_FORMAT",37],["T_WHITESPACE","       ",37],"=",["T_WHITESPACE"," ",37],["T_CONSTANT_ENCAPSED_STRING","'Y-m-d H:i:s'",37],";",["T_WHITESPACE","\n    ",37],["T_CONST","const",38],["T_WHITESPACE"," ",38],["T_STRING","DATE_FORMAT",38],["T_WHITESPACE","           ",38],"=",["T_WHITESPACE"," ",38],["T_CONSTANT_ENCAPSED_STRING","'Y-m-d'",38],";",["T_WHITESPACE","\n\n    ",38],["T_CONST","const",40],["T_WHITESPACE"," ",40],["T_STRING","DDL_DESCRIBE",40],["T_WHITESPACE","          ",40],"=",["T_WHITESPACE"," ",40],["T_LNUMBER","1",40],";",["T_WHITESPACE","\n    ",40],["T_CONST","const",41],["T_WHITESPACE"," ",41],["T_STRING","DDL_CREATE",41],["T_WHITESPACE","            ",41],"=",["T_WHITESPACE"," ",41],["T_LNUMBER","2",41],";",["T_WHITESPACE","\n    ",41],["T_CONST","const",42],["T_WHITESPACE"," ",42],["T_STRING","DDL_INDEX",42],["T_WHITESPACE","             ",42],"=",["T_WHITESPACE"," ",42],["T_LNUMBER","3",42],";",["T_WHITESPACE","\n    ",42],["T_CONST","const",43],["T_WHITESPACE"," ",43],["T_STRING","DDL_FOREIGN_KEY",43],["T_WHITESPACE","       ",43],"=",["T_WHITESPACE"," ",43],["T_LNUMBER","4",43],";",["T_WHITESPACE","\n    ",43],["T_CONST","const",44],["T_WHITESPACE"," ",44],["T_STRING","DDL_CACHE_PREFIX",44],["T_WHITESPACE","      ",44],"=",["T_WHITESPACE"," ",44],["T_CONSTANT_ENCAPSED_STRING","'DB_PDO_MYSQL_DDL'",44],";",["T_WHITESPACE","\n    ",44],["T_CONST","const",45],["T_WHITESPACE"," ",45],["T_STRING","DDL_CACHE_TAG",45],["T_WHITESPACE","         ",45],"=",["T_WHITESPACE"," ",45],["T_CONSTANT_ENCAPSED_STRING","'DB_PDO_MYSQL_DDL'",45],";",["T_WHITESPACE","\n\n    ",45],["T_CONST","const",47],["T_WHITESPACE"," ",47],["T_STRING","LENGTH_TABLE_NAME",47],["T_WHITESPACE","     ",47],"=",["T_WHITESPACE"," ",47],["T_LNUMBER","64",47],";",["T_WHITESPACE","\n    ",47],["T_CONST","const",48],["T_WHITESPACE"," ",48],["T_STRING","LENGTH_INDEX_NAME",48],["T_WHITESPACE","     ",48],"=",["T_WHITESPACE"," ",48],["T_LNUMBER","64",48],";",["T_WHITESPACE","\n    ",48],["T_CONST","const",49],["T_WHITESPACE"," ",49],["T_STRING","LENGTH_FOREIGN_NAME",49],["T_WHITESPACE","   ",49],"=",["T_WHITESPACE"," ",49],["T_LNUMBER","64",49],";",["T_WHITESPACE","\n\n    ",49],["T_DOC_COMMENT","\/**\n     * Those constants are defining the possible address types\n     *\/",51],["T_WHITESPACE","\n    ",53],["T_CONST","const",54],["T_WHITESPACE"," ",54],["T_STRING","ADDRESS_TYPE_HOSTNAME",54],["T_WHITESPACE","     ",54],"=",["T_WHITESPACE"," ",54],["T_CONSTANT_ENCAPSED_STRING","'hostname'",54],";",["T_WHITESPACE","\n    ",54],["T_CONST","const",55],["T_WHITESPACE"," ",55],["T_STRING","ADDRESS_TYPE_UNIX_SOCKET",55],["T_WHITESPACE","  ",55],"=",["T_WHITESPACE"," ",55],["T_CONSTANT_ENCAPSED_STRING","'unix_socket'",55],";",["T_WHITESPACE","\n    ",55],["T_CONST","const",56],["T_WHITESPACE"," ",56],["T_STRING","ADDRESS_TYPE_IPV4_ADDRESS",56],["T_WHITESPACE"," ",56],"=",["T_WHITESPACE"," ",56],["T_CONSTANT_ENCAPSED_STRING","'ipv4'",56],";",["T_WHITESPACE","\n    ",56],["T_CONST","const",57],["T_WHITESPACE"," ",57],["T_STRING","ADDRESS_TYPE_IPV6_ADDRESS",57],["T_WHITESPACE"," ",57],"=",["T_WHITESPACE"," ",57],["T_CONSTANT_ENCAPSED_STRING","'ipv6'",57],";",["T_WHITESPACE","\n\n    ",57],["T_DOC_COMMENT","\/**\n     * MEMORY engine type for MySQL tables\n     *\/",59],["T_WHITESPACE","\n    ",61],["T_CONST","const",62],["T_WHITESPACE"," ",62],["T_STRING","ENGINE_MEMORY",62],["T_WHITESPACE"," ",62],"=",["T_WHITESPACE"," ",62],["T_CONSTANT_ENCAPSED_STRING","'MEMORY'",62],";",["T_WHITESPACE","\n\n    ",62],["T_DOC_COMMENT","\/**\n     * Default class name for a DB statement.\n     *\n     * @var string\n     *\/",64],["T_WHITESPACE","\n    ",68],["T_PROTECTED","protected",69],["T_WHITESPACE"," ",69],["T_VARIABLE","$_defaultStmtClass",69],["T_WHITESPACE"," ",69],"=",["T_WHITESPACE"," ",69],["T_CONSTANT_ENCAPSED_STRING","'Varien_Db_Statement_Pdo_Mysql'",69],";",["T_WHITESPACE","\n\n    ",69],["T_DOC_COMMENT","\/**\n     * Current Transaction Level\n     *\n     * @var int\n     *\/",71],["T_WHITESPACE","\n    ",75],["T_PROTECTED","protected",76],["T_WHITESPACE"," ",76],["T_VARIABLE","$_transactionLevel",76],["T_WHITESPACE","    ",76],"=",["T_WHITESPACE"," ",76],["T_LNUMBER","0",76],";",["T_WHITESPACE","\n\n    ",76],["T_DOC_COMMENT","\/**\n     * Set attribute to connection flag\n     *\n     * @var bool\n     *\/",78],["T_WHITESPACE","\n    ",82],["T_PROTECTED","protected",83],["T_WHITESPACE"," ",83],["T_VARIABLE","$_connectionFlagsSet",83],["T_WHITESPACE","  ",83],"=",["T_WHITESPACE"," ",83],["T_STRING","false",83],";",["T_WHITESPACE","\n\n    ",83],["T_DOC_COMMENT","\/**\n     * Tables DDL cache\n     *\n     * @var array\n     *\/",85],["T_WHITESPACE","\n    ",89],["T_PROTECTED","protected",90],["T_WHITESPACE"," ",90],["T_VARIABLE","$_ddlCache",90],["T_WHITESPACE","            ",90],"=",["T_WHITESPACE"," ",90],["T_ARRAY","array",90],"(",")",";",["T_WHITESPACE","\n\n    ",90],["T_DOC_COMMENT","\/**\n     * SQL bind params. Used temporarily by regexp callback.\n     *\n     * @var array\n     *\/",92],["T_WHITESPACE","\n    ",96],["T_PROTECTED","protected",97],["T_WHITESPACE"," ",97],["T_VARIABLE","$_bindParams",97],["T_WHITESPACE","          ",97],"=",["T_WHITESPACE"," ",97],["T_ARRAY","array",97],"(",")",";",["T_WHITESPACE","\n\n    ",97],["T_DOC_COMMENT","\/**\n     * Autoincrement for bind value. Used by regexp callback.\n     *\n     * @var int\n     *\/",99],["T_WHITESPACE","\n    ",103],["T_PROTECTED","protected",104],["T_WHITESPACE"," ",104],["T_VARIABLE","$_bindIncrement",104],["T_WHITESPACE","       ",104],"=",["T_WHITESPACE"," ",104],["T_LNUMBER","0",104],";",["T_WHITESPACE","\n\n    ",104],["T_DOC_COMMENT","\/**\n     * Write SQL debug data to file\n     *\n     * @var bool\n     *\/",106],["T_WHITESPACE","\n    ",110],["T_PROTECTED","protected",111],["T_WHITESPACE"," ",111],["T_VARIABLE","$_debug",111],["T_WHITESPACE","               ",111],"=",["T_WHITESPACE"," ",111],["T_STRING","false",111],";",["T_WHITESPACE","\n\n    ",111],["T_DOC_COMMENT","\/**\n     * Minimum query duration time to be logged\n     *\n     * @var float\n     *\/",113],["T_WHITESPACE","\n    ",117],["T_PROTECTED","protected",118],["T_WHITESPACE"," ",118],["T_VARIABLE","$_logQueryTime",118],["T_WHITESPACE","        ",118],"=",["T_WHITESPACE"," ",118],["T_DNUMBER","0.05",118],";",["T_WHITESPACE","\n\n    ",118],["T_DOC_COMMENT","\/**\n     * Log all queries (ignored minimum query duration time)\n     *\n     * @var bool\n     *\/",120],["T_WHITESPACE","\n    ",124],["T_PROTECTED","protected",125],["T_WHITESPACE"," ",125],["T_VARIABLE","$_logAllQueries",125],["T_WHITESPACE","       ",125],"=",["T_WHITESPACE"," ",125],["T_STRING","false",125],";",["T_WHITESPACE","\n\n    ",125],["T_DOC_COMMENT","\/**\n     * Add to log call stack data (backtrace)\n     *\n     * @var bool\n     *\/",127],["T_WHITESPACE","\n    ",131],["T_PROTECTED","protected",132],["T_WHITESPACE"," ",132],["T_VARIABLE","$_logCallStack",132],["T_WHITESPACE","        ",132],"=",["T_WHITESPACE"," ",132],["T_STRING","false",132],";",["T_WHITESPACE","\n\n    ",132],["T_DOC_COMMENT","\/**\n     * Path to SQL debug data log\n     *\n     * @var string\n     *\/",134],["T_WHITESPACE","\n    ",138],["T_PROTECTED","protected",139],["T_WHITESPACE"," ",139],["T_VARIABLE","$_debugFile",139],["T_WHITESPACE","           ",139],"=",["T_WHITESPACE"," ",139],["T_CONSTANT_ENCAPSED_STRING","'var\/debug\/pdo_mysql.log'",139],";",["T_WHITESPACE","\n\n    ",139],["T_DOC_COMMENT","\/**\n     * Io File Adapter\n     *\n     * @var Varien_Io_File\n     *\/",141],["T_WHITESPACE","\n    ",145],["T_PROTECTED","protected",146],["T_WHITESPACE"," ",146],["T_VARIABLE","$_debugIoAdapter",146],";",["T_WHITESPACE","\n\n    ",146],["T_DOC_COMMENT","\/**\n     * Debug timer start value\n     *\n     * @var float\n     *\/",148],["T_WHITESPACE","\n    ",152],["T_PROTECTED","protected",153],["T_WHITESPACE"," ",153],["T_VARIABLE","$_debugTimer",153],["T_WHITESPACE","          ",153],"=",["T_WHITESPACE"," ",153],["T_LNUMBER","0",153],";",["T_WHITESPACE","\n\n    ",153],["T_DOC_COMMENT","\/**\n     * Cache frontend adapter instance\n     *\n     * @var Zend_Cache_Core\n     *\/",155],["T_WHITESPACE","\n    ",159],["T_PROTECTED","protected",160],["T_WHITESPACE"," ",160],["T_VARIABLE","$_cacheAdapter",160],";",["T_WHITESPACE","\n\n    ",160],["T_DOC_COMMENT","\/**\n     * DDL cache allowing flag\n     * @var bool\n     *\/",162],["T_WHITESPACE","\n    ",165],["T_PROTECTED","protected",166],["T_WHITESPACE"," ",166],["T_VARIABLE","$_isDdlCacheAllowed",166],["T_WHITESPACE"," ",166],"=",["T_WHITESPACE"," ",166],["T_STRING","true",166],";",["T_WHITESPACE","\n\n    ",166],["T_DOC_COMMENT","\/**\n     * MySQL column - Table DDL type pairs\n     *\n     * @var array\n     *\/",168],["T_WHITESPACE","\n    ",172],["T_PROTECTED","protected",173],["T_WHITESPACE"," ",173],["T_VARIABLE","$_ddlColumnTypes",173],["T_WHITESPACE","      ",173],"=",["T_WHITESPACE"," ",173],["T_ARRAY","array",173],"(",["T_WHITESPACE","\n        ",173],["T_STRING","Varien_Db_Ddl_Table",174],["T_DOUBLE_COLON","::",174],["T_STRING","TYPE_BOOLEAN",174],["T_WHITESPACE","       ",174],["T_DOUBLE_ARROW","=>",174],["T_WHITESPACE"," ",174],["T_CONSTANT_ENCAPSED_STRING","'bool'",174],",",["T_WHITESPACE","\n        ",174],["T_STRING","Varien_Db_Ddl_Table",175],["T_DOUBLE_COLON","::",175],["T_STRING","TYPE_SMALLINT",175],["T_WHITESPACE","      ",175],["T_DOUBLE_ARROW","=>",175],["T_WHITESPACE"," ",175],["T_CONSTANT_ENCAPSED_STRING","'smallint'",175],",",["T_WHITESPACE","\n        ",175],["T_STRING","Varien_Db_Ddl_Table",176],["T_DOUBLE_COLON","::",176],["T_STRING","TYPE_INTEGER",176],["T_WHITESPACE","       ",176],["T_DOUBLE_ARROW","=>",176],["T_WHITESPACE"," ",176],["T_CONSTANT_ENCAPSED_STRING","'int'",176],",",["T_WHITESPACE","\n        ",176],["T_STRING","Varien_Db_Ddl_Table",177],["T_DOUBLE_COLON","::",177],["T_STRING","TYPE_BIGINT",177],["T_WHITESPACE","        ",177],["T_DOUBLE_ARROW","=>",177],["T_WHITESPACE"," ",177],["T_CONSTANT_ENCAPSED_STRING","'bigint'",177],",",["T_WHITESPACE","\n        ",177],["T_STRING","Varien_Db_Ddl_Table",178],["T_DOUBLE_COLON","::",178],["T_STRING","TYPE_FLOAT",178],["T_WHITESPACE","         ",178],["T_DOUBLE_ARROW","=>",178],["T_WHITESPACE"," ",178],["T_CONSTANT_ENCAPSED_STRING","'float'",178],",",["T_WHITESPACE","\n        ",178],["T_STRING","Varien_Db_Ddl_Table",179],["T_DOUBLE_COLON","::",179],["T_STRING","TYPE_DECIMAL",179],["T_WHITESPACE","       ",179],["T_DOUBLE_ARROW","=>",179],["T_WHITESPACE"," ",179],["T_CONSTANT_ENCAPSED_STRING","'decimal'",179],",",["T_WHITESPACE","\n        ",179],["T_STRING","Varien_Db_Ddl_Table",180],["T_DOUBLE_COLON","::",180],["T_STRING","TYPE_NUMERIC",180],["T_WHITESPACE","       ",180],["T_DOUBLE_ARROW","=>",180],["T_WHITESPACE"," ",180],["T_CONSTANT_ENCAPSED_STRING","'decimal'",180],",",["T_WHITESPACE","\n        ",180],["T_STRING","Varien_Db_Ddl_Table",181],["T_DOUBLE_COLON","::",181],["T_STRING","TYPE_DATE",181],["T_WHITESPACE","          ",181],["T_DOUBLE_ARROW","=>",181],["T_WHITESPACE"," ",181],["T_CONSTANT_ENCAPSED_STRING","'date'",181],",",["T_WHITESPACE","\n        ",181],["T_STRING","Varien_Db_Ddl_Table",182],["T_DOUBLE_COLON","::",182],["T_STRING","TYPE_TIMESTAMP",182],["T_WHITESPACE","     ",182],["T_DOUBLE_ARROW","=>",182],["T_WHITESPACE"," ",182],["T_CONSTANT_ENCAPSED_STRING","'timestamp'",182],",",["T_WHITESPACE","\n        ",182],["T_STRING","Varien_Db_Ddl_Table",183],["T_DOUBLE_COLON","::",183],["T_STRING","TYPE_DATETIME",183],["T_WHITESPACE","      ",183],["T_DOUBLE_ARROW","=>",183],["T_WHITESPACE"," ",183],["T_CONSTANT_ENCAPSED_STRING","'datetime'",183],",",["T_WHITESPACE","\n        ",183],["T_STRING","Varien_Db_Ddl_Table",184],["T_DOUBLE_COLON","::",184],["T_STRING","TYPE_TEXT",184],["T_WHITESPACE","          ",184],["T_DOUBLE_ARROW","=>",184],["T_WHITESPACE"," ",184],["T_CONSTANT_ENCAPSED_STRING","'text'",184],",",["T_WHITESPACE","\n        ",184],["T_STRING","Varien_Db_Ddl_Table",185],["T_DOUBLE_COLON","::",185],["T_STRING","TYPE_BLOB",185],["T_WHITESPACE","          ",185],["T_DOUBLE_ARROW","=>",185],["T_WHITESPACE"," ",185],["T_CONSTANT_ENCAPSED_STRING","'blob'",185],",",["T_WHITESPACE","\n        ",185],["T_STRING","Varien_Db_Ddl_Table",186],["T_DOUBLE_COLON","::",186],["T_STRING","TYPE_VARBINARY",186],["T_WHITESPACE","     ",186],["T_DOUBLE_ARROW","=>",186],["T_WHITESPACE"," ",186],["T_CONSTANT_ENCAPSED_STRING","'blob'",186],["T_WHITESPACE","\n    ",186],")",";",["T_WHITESPACE","\n\n    ",187],["T_DOC_COMMENT","\/**\n     * All possible DDL statements\n     * First 3 symbols for each statement\n     *\n     * @var array\n     *\/",189],["T_WHITESPACE","\n    ",194],["T_PROTECTED","protected",195],["T_WHITESPACE"," ",195],["T_VARIABLE","$_ddlRoutines",195],["T_WHITESPACE"," ",195],"=",["T_WHITESPACE"," ",195],["T_ARRAY","array",195],"(",["T_CONSTANT_ENCAPSED_STRING","'alt'",195],",",["T_WHITESPACE"," ",195],["T_CONSTANT_ENCAPSED_STRING","'cre'",195],",",["T_WHITESPACE"," ",195],["T_CONSTANT_ENCAPSED_STRING","'ren'",195],",",["T_WHITESPACE"," ",195],["T_CONSTANT_ENCAPSED_STRING","'dro'",195],",",["T_WHITESPACE"," ",195],["T_CONSTANT_ENCAPSED_STRING","'tru'",195],")",";",["T_WHITESPACE","\n\n    ",195],["T_DOC_COMMENT","\/**\n     * DDL statements for temporary tables\n     *\n     * @var string\n     *\/",197],["T_WHITESPACE","\n    ",201],["T_PROTECTED","protected",202],["T_WHITESPACE"," ",202],["T_VARIABLE","$_tempRoutines",202],["T_WHITESPACE"," ",202],"=",["T_WHITESPACE","  ",202],["T_CONSTANT_ENCAPSED_STRING","'#^\\w+\\s+temporary\\s#im'",202],";",["T_WHITESPACE","\n\n    ",202],["T_DOC_COMMENT","\/**\n     * Allowed interval units array\n     *\n     * @var array\n     *\/",204],["T_WHITESPACE","\n    ",208],["T_PROTECTED","protected",209],["T_WHITESPACE"," ",209],["T_VARIABLE","$_intervalUnits",209],["T_WHITESPACE"," ",209],"=",["T_WHITESPACE"," ",209],["T_ARRAY","array",209],"(",["T_WHITESPACE","\n        ",209],["T_STRING","self",210],["T_DOUBLE_COLON","::",210],["T_STRING","INTERVAL_YEAR",210],["T_WHITESPACE","     ",210],["T_DOUBLE_ARROW","=>",210],["T_WHITESPACE"," ",210],["T_CONSTANT_ENCAPSED_STRING","'YEAR'",210],",",["T_WHITESPACE","\n        ",210],["T_STRING","self",211],["T_DOUBLE_COLON","::",211],["T_STRING","INTERVAL_MONTH",211],["T_WHITESPACE","    ",211],["T_DOUBLE_ARROW","=>",211],["T_WHITESPACE"," ",211],["T_CONSTANT_ENCAPSED_STRING","'MONTH'",211],",",["T_WHITESPACE","\n        ",211],["T_STRING","self",212],["T_DOUBLE_COLON","::",212],["T_STRING","INTERVAL_DAY",212],["T_WHITESPACE","      ",212],["T_DOUBLE_ARROW","=>",212],["T_WHITESPACE"," ",212],["T_CONSTANT_ENCAPSED_STRING","'DAY'",212],",",["T_WHITESPACE","\n        ",212],["T_STRING","self",213],["T_DOUBLE_COLON","::",213],["T_STRING","INTERVAL_HOUR",213],["T_WHITESPACE","     ",213],["T_DOUBLE_ARROW","=>",213],["T_WHITESPACE"," ",213],["T_CONSTANT_ENCAPSED_STRING","'HOUR'",213],",",["T_WHITESPACE","\n        ",213],["T_STRING","self",214],["T_DOUBLE_COLON","::",214],["T_STRING","INTERVAL_MINUTE",214],["T_WHITESPACE","   ",214],["T_DOUBLE_ARROW","=>",214],["T_WHITESPACE"," ",214],["T_CONSTANT_ENCAPSED_STRING","'MINUTE'",214],",",["T_WHITESPACE","\n        ",214],["T_STRING","self",215],["T_DOUBLE_COLON","::",215],["T_STRING","INTERVAL_SECOND",215],["T_WHITESPACE","   ",215],["T_DOUBLE_ARROW","=>",215],["T_WHITESPACE"," ",215],["T_CONSTANT_ENCAPSED_STRING","'SECOND'",215],",",["T_WHITESPACE","\n    ",215],")",";",["T_WHITESPACE","\n\n    ",216],["T_DOC_COMMENT","\/**\n     * Hook callback to modify queries. Mysql specific property, designed only for backwards compatibility.\n     *\n     * @var array|null\n     *\/",218],["T_WHITESPACE","\n    ",222],["T_PROTECTED","protected",223],["T_WHITESPACE"," ",223],["T_VARIABLE","$_queryHook",223],["T_WHITESPACE"," ",223],"=",["T_WHITESPACE"," ",223],["T_STRING","null",223],";",["T_WHITESPACE","\n\n    ",223],["T_DOC_COMMENT","\/**\n     * Begin new DB transaction for connection\n     *\n     * @return Varien_Db_Adapter_Pdo_Mysql\n     *\/",225],["T_WHITESPACE","\n    ",229],["T_PUBLIC","public",230],["T_WHITESPACE"," ",230],["T_FUNCTION","function",230],["T_WHITESPACE"," ",230],["T_STRING","beginTransaction",230],"(",")",["T_WHITESPACE","\n    ",230],"{",["T_WHITESPACE","\n        ",231],["T_IF","if",232],["T_WHITESPACE"," ",232],"(",["T_VARIABLE","$this",232],["T_OBJECT_OPERATOR","->",232],["T_STRING","_transactionLevel",232],["T_WHITESPACE"," ",232],["T_IS_IDENTICAL","===",232],["T_WHITESPACE"," ",232],["T_LNUMBER","0",232],")",["T_WHITESPACE"," ",232],"{",["T_WHITESPACE","\n            ",232],["T_VARIABLE","$this",233],["T_OBJECT_OPERATOR","->",233],["T_STRING","_debugTimer",233],"(",")",";",["T_WHITESPACE","\n            ",233],["T_STRING","parent",234],["T_DOUBLE_COLON","::",234],["T_STRING","beginTransaction",234],"(",")",";",["T_WHITESPACE","\n            ",234],["T_VARIABLE","$this",235],["T_OBJECT_OPERATOR","->",235],["T_STRING","_debugStat",235],"(",["T_STRING","self",235],["T_DOUBLE_COLON","::",235],["T_STRING","DEBUG_TRANSACTION",235],",",["T_WHITESPACE"," ",235],["T_CONSTANT_ENCAPSED_STRING","'BEGIN'",235],")",";",["T_WHITESPACE","\n        ",235],"}",["T_WHITESPACE","\n        ",236],["T_INC","++",237],["T_VARIABLE","$this",237],["T_OBJECT_OPERATOR","->",237],["T_STRING","_transactionLevel",237],";",["T_WHITESPACE","\n        ",237],["T_RETURN","return",238],["T_WHITESPACE"," ",238],["T_VARIABLE","$this",238],";",["T_WHITESPACE","\n    ",238],"}",["T_WHITESPACE","\n\n    ",239],["T_DOC_COMMENT","\/**\n     * Commit DB transaction\n     *\n     * @return Varien_Db_Adapter_Pdo_Mysql\n     *\/",241],["T_WHITESPACE","\n    ",245],["T_PUBLIC","public",246],["T_WHITESPACE"," ",246],["T_FUNCTION","function",246],["T_WHITESPACE"," ",246],["T_STRING","commit",246],"(",")",["T_WHITESPACE","\n    ",246],"{",["T_WHITESPACE","\n        ",247],["T_IF","if",248],["T_WHITESPACE"," ",248],"(",["T_VARIABLE","$this",248],["T_OBJECT_OPERATOR","->",248],["T_STRING","_transactionLevel",248],["T_WHITESPACE"," ",248],["T_IS_IDENTICAL","===",248],["T_WHITESPACE"," ",248],["T_LNUMBER","1",248],")",["T_WHITESPACE"," ",248],"{",["T_WHITESPACE","\n            ",248],["T_VARIABLE","$this",249],["T_OBJECT_OPERATOR","->",249],["T_STRING","_debugTimer",249],"(",")",";",["T_WHITESPACE","\n            ",249],["T_STRING","parent",250],["T_DOUBLE_COLON","::",250],["T_STRING","commit",250],"(",")",";",["T_WHITESPACE","\n            ",250],["T_VARIABLE","$this",251],["T_OBJECT_OPERATOR","->",251],["T_STRING","_debugStat",251],"(",["T_STRING","self",251],["T_DOUBLE_COLON","::",251],["T_STRING","DEBUG_TRANSACTION",251],",",["T_WHITESPACE"," ",251],["T_CONSTANT_ENCAPSED_STRING","'COMMIT'",251],")",";",["T_WHITESPACE","\n        ",251],"}",["T_WHITESPACE","\n        ",252],["T_DEC","--",253],["T_VARIABLE","$this",253],["T_OBJECT_OPERATOR","->",253],["T_STRING","_transactionLevel",253],";",["T_WHITESPACE","\n        ",253],["T_RETURN","return",254],["T_WHITESPACE"," ",254],["T_VARIABLE","$this",254],";",["T_WHITESPACE","\n    ",254],"}",["T_WHITESPACE","\n\n    ",255],["T_DOC_COMMENT","\/**\n     * Rollback DB transaction\n     *\n     * @return Varien_Db_Adapter_Pdo_Mysql\n     *\/",257],["T_WHITESPACE","\n    ",261],["T_PUBLIC","public",262],["T_WHITESPACE"," ",262],["T_FUNCTION","function",262],["T_WHITESPACE"," ",262],["T_STRING","rollback",262],"(",")",["T_WHITESPACE","\n    ",262],"{",["T_WHITESPACE","\n        ",263],["T_IF","if",264],["T_WHITESPACE"," ",264],"(",["T_VARIABLE","$this",264],["T_OBJECT_OPERATOR","->",264],["T_STRING","_transactionLevel",264],["T_WHITESPACE"," ",264],["T_IS_IDENTICAL","===",264],["T_WHITESPACE"," ",264],["T_LNUMBER","1",264],")",["T_WHITESPACE"," ",264],"{",["T_WHITESPACE","\n            ",264],["T_VARIABLE","$this",265],["T_OBJECT_OPERATOR","->",265],["T_STRING","_debugTimer",265],"(",")",";",["T_WHITESPACE","\n            ",265],["T_STRING","parent",266],["T_DOUBLE_COLON","::",266],["T_STRING","rollback",266],"(",")",";",["T_WHITESPACE","\n            ",266],["T_VARIABLE","$this",267],["T_OBJECT_OPERATOR","->",267],["T_STRING","_debugStat",267],"(",["T_STRING","self",267],["T_DOUBLE_COLON","::",267],["T_STRING","DEBUG_TRANSACTION",267],",",["T_WHITESPACE"," ",267],["T_CONSTANT_ENCAPSED_STRING","'ROLLBACK'",267],")",";",["T_WHITESPACE","\n        ",267],"}",["T_WHITESPACE","\n        ",268],["T_DEC","--",269],["T_VARIABLE","$this",269],["T_OBJECT_OPERATOR","->",269],["T_STRING","_transactionLevel",269],";",["T_WHITESPACE","\n        ",269],["T_RETURN","return",270],["T_WHITESPACE"," ",270],["T_VARIABLE","$this",270],";",["T_WHITESPACE","\n    ",270],"}",["T_WHITESPACE","\n\n    ",271],["T_DOC_COMMENT","\/**\n     * Get adapter transaction level state. Return 0 if all transactions are complete\n     *\n     * @return int\n     *\/",273],["T_WHITESPACE","\n    ",277],["T_PUBLIC","public",278],["T_WHITESPACE"," ",278],["T_FUNCTION","function",278],["T_WHITESPACE"," ",278],["T_STRING","getTransactionLevel",278],"(",")",["T_WHITESPACE","\n    ",278],"{",["T_WHITESPACE","\n        ",279],["T_RETURN","return",280],["T_WHITESPACE"," ",280],["T_VARIABLE","$this",280],["T_OBJECT_OPERATOR","->",280],["T_STRING","_transactionLevel",280],";",["T_WHITESPACE","\n    ",280],"}",["T_WHITESPACE","\n\n    ",281],["T_DOC_COMMENT","\/**\n     * Convert date to DB format\n     *\n     * @param   mixed $date\n     * @return  string\n     *\/",283],["T_WHITESPACE","\n    ",288],["T_PUBLIC","public",289],["T_WHITESPACE"," ",289],["T_FUNCTION","function",289],["T_WHITESPACE"," ",289],["T_STRING","convertDate",289],"(",["T_VARIABLE","$date",289],")",["T_WHITESPACE","\n    ",289],"{",["T_WHITESPACE","\n        ",290],["T_RETURN","return",291],["T_WHITESPACE"," ",291],["T_VARIABLE","$this",291],["T_OBJECT_OPERATOR","->",291],["T_STRING","formatDate",291],"(",["T_VARIABLE","$date",291],",",["T_WHITESPACE"," ",291],["T_STRING","false",291],")",";",["T_WHITESPACE","\n    ",291],"}",["T_WHITESPACE","\n\n    ",292],["T_DOC_COMMENT","\/**\n     * Convert date and time to DB format\n     *\n     * @param   mixed $date\n     * @return  string\n     *\/",294],["T_WHITESPACE","\n    ",299],["T_PUBLIC","public",300],["T_WHITESPACE"," ",300],["T_FUNCTION","function",300],["T_WHITESPACE"," ",300],["T_STRING","convertDateTime",300],"(",["T_VARIABLE","$datetime",300],")",["T_WHITESPACE","\n    ",300],"{",["T_WHITESPACE","\n        ",301],["T_RETURN","return",302],["T_WHITESPACE"," ",302],["T_VARIABLE","$this",302],["T_OBJECT_OPERATOR","->",302],["T_STRING","formatDate",302],"(",["T_VARIABLE","$datetime",302],",",["T_WHITESPACE"," ",302],["T_STRING","true",302],")",";",["T_WHITESPACE","\n    ",302],"}",["T_WHITESPACE","\n\n    ",303],["T_DOC_COMMENT","\/**\n     * Parse a source hostname and generate a host info\n     * @param $hostName\n     *\n     * @return Varien_Object\n     *\/",305],["T_WHITESPACE","\n    ",310],["T_PROTECTED","protected",311],["T_WHITESPACE"," ",311],["T_FUNCTION","function",311],["T_WHITESPACE"," ",311],["T_STRING","_getHostInfo",311],"(",["T_VARIABLE","$hostName",311],")",["T_WHITESPACE","\n    ",311],"{",["T_WHITESPACE","\n        ",312],["T_VARIABLE","$hostInfo",313],["T_WHITESPACE"," ",313],"=",["T_WHITESPACE"," ",313],["T_NEW","new",313],["T_WHITESPACE"," ",313],["T_STRING","Varien_Object",313],"(",")",";",["T_WHITESPACE","\n        ",313],["T_VARIABLE","$matches",314],["T_WHITESPACE"," ",314],"=",["T_WHITESPACE"," ",314],["T_ARRAY","array",314],"(",")",";",["T_WHITESPACE","\n        ",314],["T_IF","if",315],["T_WHITESPACE"," ",315],"(",["T_STRING","strpos",315],"(",["T_VARIABLE","$hostName",315],",",["T_WHITESPACE"," ",315],["T_CONSTANT_ENCAPSED_STRING","'\/'",315],")",["T_WHITESPACE"," ",315],["T_IS_NOT_IDENTICAL","!==",315],["T_WHITESPACE"," ",315],["T_STRING","false",315],")",["T_WHITESPACE"," ",315],"{",["T_WHITESPACE","\n            ",315],["T_VARIABLE","$hostInfo",316],["T_OBJECT_OPERATOR","->",316],["T_STRING","setAddressType",316],"(",["T_STRING","self",316],["T_DOUBLE_COLON","::",316],["T_STRING","ADDRESS_TYPE_UNIX_SOCKET",316],")",["T_WHITESPACE","\n                ",316],["T_OBJECT_OPERATOR","->",317],["T_STRING","setUnixSocket",317],"(",["T_VARIABLE","$hostName",317],")",";",["T_WHITESPACE","\n        ",317],"}",["T_WHITESPACE"," ",318],["T_ELSEIF","elseif",318],["T_WHITESPACE"," ",318],"(",["T_WHITESPACE","\n            ",318],["T_STRING","preg_match",319],"(",["T_WHITESPACE","\n                ",319],["T_CONSTANT_ENCAPSED_STRING","'\/^\\[(([0-9a-f]{1,4})?(:([0-9a-f]{1,4})?){1,}:([0-9a-f]{1,4}))(%[0-9a-z]+)?\\](:([0-9]+))?$\/i'",320],",",["T_WHITESPACE","\n                ",320],["T_VARIABLE","$hostName",321],",",["T_WHITESPACE","\n                ",321],["T_VARIABLE","$matches",322],["T_WHITESPACE","\n            ",322],")",["T_WHITESPACE","\n        ",323],")",["T_WHITESPACE"," ",324],"{",["T_WHITESPACE","\n            ",324],["T_VARIABLE","$hostName",325],["T_WHITESPACE"," ",325],"=",["T_WHITESPACE"," ",325],["T_ISSET","isset",325],"(",["T_VARIABLE","$matches",325],"[",["T_LNUMBER","1",325],"]",")",["T_WHITESPACE"," ",325],"?",["T_WHITESPACE"," ",325],["T_VARIABLE","$matches",325],"[",["T_LNUMBER","1",325],"]",["T_WHITESPACE"," ",325],":",["T_WHITESPACE"," ",325],["T_STRING","null",325],";",["T_WHITESPACE","\n            ",325],"!",["T_STRING","is_null",326],"(",["T_VARIABLE","$hostName",326],")",["T_WHITESPACE"," ",326],["T_BOOLEAN_AND","&&",326],["T_WHITESPACE"," ",326],["T_ISSET","isset",326],"(",["T_VARIABLE","$matches",326],"[",["T_LNUMBER","6",326],"]",")",["T_WHITESPACE"," ",326],["T_BOOLEAN_AND","&&",326],["T_WHITESPACE"," ",326],"(",["T_VARIABLE","$hostName",326],["T_WHITESPACE"," ",326],["T_CONCAT_EQUAL",".=",326],["T_WHITESPACE"," ",326],["T_VARIABLE","$matches",326],"[",["T_LNUMBER","6",326],"]",")",";",["T_WHITESPACE","\n            ",326],["T_VARIABLE","$hostInfo",327],["T_OBJECT_OPERATOR","->",327],["T_STRING","setAddressType",327],"(",["T_STRING","self",327],["T_DOUBLE_COLON","::",327],["T_STRING","ADDRESS_TYPE_IPV6_ADDRESS",327],")",["T_WHITESPACE","\n                ",327],["T_OBJECT_OPERATOR","->",328],["T_STRING","setHostName",328],"(",["T_VARIABLE","$hostName",328],")",["T_WHITESPACE","\n                ",328],["T_OBJECT_OPERATOR","->",329],["T_STRING","setPort",329],"(",["T_ISSET","isset",329],"(",["T_VARIABLE","$matches",329],"[",["T_LNUMBER","8",329],"]",")",["T_WHITESPACE"," ",329],"?",["T_WHITESPACE"," ",329],["T_VARIABLE","$matches",329],"[",["T_LNUMBER","8",329],"]",["T_WHITESPACE"," ",329],":",["T_WHITESPACE"," ",329],["T_STRING","null",329],")",";",["T_WHITESPACE","\n        ",329],"}",["T_WHITESPACE"," ",330],["T_ELSEIF","elseif",330],["T_WHITESPACE"," ",330],"(",["T_WHITESPACE","\n            ",330],["T_STRING","preg_match",331],"(",["T_WHITESPACE","\n                ",331],["T_CONSTANT_ENCAPSED_STRING","'\/^(([0-9a-f]{1,4})?(:([0-9a-f]{1,4})?){1,}:([0-9a-f]{1,4}))(%[0-9a-z]+)?$\/i'",332],",",["T_WHITESPACE","\n                ",332],["T_VARIABLE","$hostName",333],",",["T_WHITESPACE","\n                ",333],["T_VARIABLE","$matches",334],["T_WHITESPACE","\n            ",334],")",["T_WHITESPACE","\n        ",335],")",["T_WHITESPACE"," ",336],"{",["T_WHITESPACE","\n            ",336],["T_VARIABLE","$hostName",337],["T_WHITESPACE"," ",337],"=",["T_WHITESPACE"," ",337],["T_ISSET","isset",337],"(",["T_VARIABLE","$matches",337],"[",["T_LNUMBER","1",337],"]",")",["T_WHITESPACE"," ",337],"?",["T_WHITESPACE"," ",337],["T_VARIABLE","$matches",337],"[",["T_LNUMBER","1",337],"]",["T_WHITESPACE"," ",337],":",["T_WHITESPACE"," ",337],["T_STRING","null",337],";",["T_WHITESPACE","\n            ",337],"!",["T_STRING","is_null",338],"(",["T_VARIABLE","$hostName",338],")",["T_WHITESPACE"," ",338],["T_BOOLEAN_AND","&&",338],["T_WHITESPACE"," ",338],["T_ISSET","isset",338],"(",["T_VARIABLE","$matches",338],"[",["T_LNUMBER","6",338],"]",")",["T_WHITESPACE"," ",338],["T_BOOLEAN_AND","&&",338],["T_WHITESPACE"," ",338],"(",["T_VARIABLE","$hostName",338],["T_WHITESPACE"," ",338],["T_CONCAT_EQUAL",".=",338],["T_WHITESPACE"," ",338],["T_VARIABLE","$matches",338],"[",["T_LNUMBER","6",338],"]",")",";",["T_WHITESPACE","\n            ",338],["T_VARIABLE","$hostInfo",339],["T_OBJECT_OPERATOR","->",339],["T_STRING","setAddressType",339],"(",["T_STRING","self",339],["T_DOUBLE_COLON","::",339],["T_STRING","ADDRESS_TYPE_IPV6_ADDRESS",339],")",["T_WHITESPACE","\n                ",339],["T_OBJECT_OPERATOR","->",340],["T_STRING","setHostName",340],"(",["T_VARIABLE","$hostName",340],")",";",["T_WHITESPACE","\n        ",340],"}",["T_WHITESPACE"," ",341],["T_ELSEIF","elseif",341],["T_WHITESPACE"," ",341],"(",["T_STRING","strpos",341],"(",["T_VARIABLE","$hostName",341],",",["T_WHITESPACE"," ",341],["T_CONSTANT_ENCAPSED_STRING","':'",341],")",["T_WHITESPACE"," ",341],["T_IS_NOT_IDENTICAL","!==",341],["T_WHITESPACE"," ",341],["T_STRING","false",341],")",["T_WHITESPACE"," ",341],"{",["T_WHITESPACE","\n            ",341],["T_LIST","list",342],"(",["T_VARIABLE","$hostAddress",342],",",["T_WHITESPACE"," ",342],["T_VARIABLE","$hostPort",342],")",["T_WHITESPACE"," ",342],"=",["T_WHITESPACE"," ",342],["T_STRING","explode",342],"(",["T_CONSTANT_ENCAPSED_STRING","':'",342],",",["T_WHITESPACE"," ",342],["T_VARIABLE","$hostName",342],")",";",["T_WHITESPACE","\n            ",342],["T_VARIABLE","$hostInfo",343],["T_OBJECT_OPERATOR","->",343],["T_STRING","setAddressType",343],"(",["T_WHITESPACE","\n                ",343],["T_STRING","filter_var",344],"(",["T_VARIABLE","$hostAddress",344],",",["T_WHITESPACE"," ",344],["T_STRING","FILTER_VALIDATE_IP",344],",",["T_WHITESPACE"," ",344],["T_STRING","FILTER_FLAG_IPV4",344],")",["T_WHITESPACE","\n                    ",344],"?",["T_WHITESPACE"," ",345],["T_STRING","self",345],["T_DOUBLE_COLON","::",345],["T_STRING","ADDRESS_TYPE_IPV4_ADDRESS",345],["T_WHITESPACE","\n                    ",345],":",["T_WHITESPACE"," ",346],["T_STRING","self",346],["T_DOUBLE_COLON","::",346],["T_STRING","ADDRESS_TYPE_HOSTNAME",346],["T_WHITESPACE","\n            ",346],")",["T_OBJECT_OPERATOR","->",347],["T_STRING","setHostName",347],"(",["T_VARIABLE","$hostAddress",347],")",["T_WHITESPACE","\n                ",347],["T_OBJECT_OPERATOR","->",348],["T_STRING","setPort",348],"(",["T_VARIABLE","$hostPort",348],")",";",["T_WHITESPACE","\n        ",348],"}",["T_WHITESPACE"," ",349],["T_ELSE","else",349],["T_WHITESPACE"," ",349],"{",["T_WHITESPACE","\n            ",349],["T_VARIABLE","$hostInfo",350],["T_OBJECT_OPERATOR","->",350],["T_STRING","setAddressType",350],"(",["T_WHITESPACE","\n                ",350],["T_STRING","filter_var",351],"(",["T_VARIABLE","$hostName",351],",",["T_WHITESPACE"," ",351],["T_STRING","FILTER_VALIDATE_IP",351],",",["T_WHITESPACE"," ",351],["T_STRING","FILTER_FLAG_IPV4",351],")",["T_WHITESPACE","\n                    ",351],"?",["T_WHITESPACE"," ",352],["T_STRING","self",352],["T_DOUBLE_COLON","::",352],["T_STRING","ADDRESS_TYPE_IPV4_ADDRESS",352],["T_WHITESPACE","\n                    ",352],":",["T_WHITESPACE"," ",353],["T_STRING","self",353],["T_DOUBLE_COLON","::",353],["T_STRING","ADDRESS_TYPE_HOSTNAME",353],["T_WHITESPACE","\n            ",353],")",["T_OBJECT_OPERATOR","->",354],["T_STRING","setHostName",354],"(",["T_VARIABLE","$hostName",354],")",";",["T_WHITESPACE","\n        ",354],"}",["T_WHITESPACE","\n\n        ",355],["T_RETURN","return",357],["T_WHITESPACE"," ",357],["T_VARIABLE","$hostInfo",357],";",["T_WHITESPACE","\n    ",357],"}",["T_WHITESPACE","\n\n    ",358],["T_DOC_COMMENT","\/**\n     * Creates a PDO object and connects to the database.\n     *\n     * @throws Zend_Db_Adapter_Exception\n     *\/",360],["T_WHITESPACE","\n    ",364],["T_PROTECTED","protected",365],["T_WHITESPACE"," ",365],["T_FUNCTION","function",365],["T_WHITESPACE"," ",365],["T_STRING","_connect",365],"(",")",["T_WHITESPACE","\n    ",365],"{",["T_WHITESPACE","\n        ",366],["T_IF","if",367],["T_WHITESPACE"," ",367],"(",["T_VARIABLE","$this",367],["T_OBJECT_OPERATOR","->",367],["T_STRING","_connection",367],")",["T_WHITESPACE"," ",367],"{",["T_WHITESPACE","\n            ",367],["T_RETURN","return",368],";",["T_WHITESPACE","\n        ",368],"}",["T_WHITESPACE","\n\n        ",369],["T_IF","if",371],["T_WHITESPACE"," ",371],"(","!",["T_STRING","extension_loaded",371],"(",["T_CONSTANT_ENCAPSED_STRING","'pdo_mysql'",371],")",")",["T_WHITESPACE"," ",371],"{",["T_WHITESPACE","\n            ",371],["T_THROW","throw",372],["T_WHITESPACE"," ",372],["T_NEW","new",372],["T_WHITESPACE"," ",372],["T_STRING","Zend_Db_Adapter_Exception",372],"(",["T_CONSTANT_ENCAPSED_STRING","'pdo_mysql extension is not installed'",372],")",";",["T_WHITESPACE","\n        ",372],"}",["T_WHITESPACE","\n\n\n        ",373],["T_VARIABLE","$hostInfo",376],["T_WHITESPACE"," ",376],"=",["T_WHITESPACE"," ",376],["T_VARIABLE","$this",376],["T_OBJECT_OPERATOR","->",376],["T_STRING","_getHostInfo",376],"(",["T_VARIABLE","$this",376],["T_OBJECT_OPERATOR","->",376],["T_STRING","_config",376],"[",["T_CONSTANT_ENCAPSED_STRING","'host'",376],"]",")",";",["T_WHITESPACE","\n\n        ",376],["T_SWITCH","switch",378],["T_WHITESPACE"," ",378],"(",["T_VARIABLE","$hostInfo",378],["T_OBJECT_OPERATOR","->",378],["T_STRING","getAddressType",378],"(",")",")",["T_WHITESPACE"," ",378],"{",["T_WHITESPACE","\n            ",378],["T_CASE","case",379],["T_WHITESPACE"," ",379],["T_STRING","self",379],["T_DOUBLE_COLON","::",379],["T_STRING","ADDRESS_TYPE_UNIX_SOCKET",379],":",["T_WHITESPACE","\n                ",379],["T_VARIABLE","$this",380],["T_OBJECT_OPERATOR","->",380],["T_STRING","_config",380],"[",["T_CONSTANT_ENCAPSED_STRING","'unix_socket'",380],"]",["T_WHITESPACE"," ",380],"=",["T_WHITESPACE"," ",380],["T_VARIABLE","$hostInfo",380],["T_OBJECT_OPERATOR","->",380],["T_STRING","getUnixSocket",380],"(",")",";",["T_WHITESPACE","\n                ",380],["T_UNSET","unset",381],"(",["T_VARIABLE","$this",381],["T_OBJECT_OPERATOR","->",381],["T_STRING","_config",381],"[",["T_CONSTANT_ENCAPSED_STRING","'host'",381],"]",")",";",["T_WHITESPACE","\n                ",381],["T_BREAK","break",382],";",["T_WHITESPACE","\n            ",382],["T_CASE","case",383],["T_WHITESPACE"," ",383],["T_STRING","self",383],["T_DOUBLE_COLON","::",383],["T_STRING","ADDRESS_TYPE_IPV6_ADDRESS",383],":",["T_WHITESPACE"," ",383],["T_COMMENT","\/\/ break intentionally omitted\n",383],["T_WHITESPACE","            ",384],["T_CASE","case",384],["T_WHITESPACE"," ",384],["T_STRING","self",384],["T_DOUBLE_COLON","::",384],["T_STRING","ADDRESS_TYPE_IPV4_ADDRESS",384],":",["T_WHITESPACE"," ",384],["T_COMMENT","\/\/ break intentionally omitted\n",384],["T_WHITESPACE","            ",385],["T_CASE","case",385],["T_WHITESPACE"," ",385],["T_STRING","self",385],["T_DOUBLE_COLON","::",385],["T_STRING","ADDRESS_TYPE_HOSTNAME",385],":",["T_WHITESPACE","\n                ",385],["T_VARIABLE","$this",386],["T_OBJECT_OPERATOR","->",386],["T_STRING","_config",386],"[",["T_CONSTANT_ENCAPSED_STRING","'host'",386],"]",["T_WHITESPACE"," ",386],"=",["T_WHITESPACE"," ",386],["T_VARIABLE","$hostInfo",386],["T_OBJECT_OPERATOR","->",386],["T_STRING","getHostName",386],"(",")",";",["T_WHITESPACE","\n                ",386],["T_IF","if",387],["T_WHITESPACE"," ",387],"(",["T_VARIABLE","$hostInfo",387],["T_OBJECT_OPERATOR","->",387],["T_STRING","getPort",387],"(",")",")",["T_WHITESPACE"," ",387],"{",["T_WHITESPACE","\n                    ",387],["T_VARIABLE","$this",388],["T_OBJECT_OPERATOR","->",388],["T_STRING","_config",388],"[",["T_CONSTANT_ENCAPSED_STRING","'port'",388],"]",["T_WHITESPACE"," ",388],"=",["T_WHITESPACE"," ",388],["T_VARIABLE","$hostInfo",388],["T_OBJECT_OPERATOR","->",388],["T_STRING","getPort",388],"(",")",";",["T_WHITESPACE","\n                ",388],"}",["T_WHITESPACE","\n                ",389],["T_BREAK","break",390],";",["T_WHITESPACE","\n            ",390],["T_DEFAULT","default",391],":",["T_WHITESPACE","\n                ",391],["T_BREAK","break",392],";",["T_WHITESPACE","\n        ",392],"}",["T_WHITESPACE","\n\n        ",393],["T_VARIABLE","$this",395],["T_OBJECT_OPERATOR","->",395],["T_STRING","_debugTimer",395],"(",")",";",["T_WHITESPACE","\n        ",395],["T_STRING","parent",396],["T_DOUBLE_COLON","::",396],["T_STRING","_connect",396],"(",")",";",["T_WHITESPACE","\n        ",396],["T_VARIABLE","$this",397],["T_OBJECT_OPERATOR","->",397],["T_STRING","_debugStat",397],"(",["T_STRING","self",397],["T_DOUBLE_COLON","::",397],["T_STRING","DEBUG_CONNECT",397],",",["T_WHITESPACE"," ",397],["T_CONSTANT_ENCAPSED_STRING","''",397],")",";",["T_WHITESPACE","\n\n        ",397],["T_DOC_COMMENT","\/** @link http:\/\/bugs.mysql.com\/bug.php?id=18551 *\/",399],["T_WHITESPACE","\n        ",399],["T_VARIABLE","$this",400],["T_OBJECT_OPERATOR","->",400],["T_STRING","_connection",400],["T_OBJECT_OPERATOR","->",400],["T_STRING","query",400],"(",["T_CONSTANT_ENCAPSED_STRING","\"SET SQL_MODE=''\"",400],")",";",["T_WHITESPACE","\n\n        ",400],["T_IF","if",402],["T_WHITESPACE"," ",402],"(","!",["T_VARIABLE","$this",402],["T_OBJECT_OPERATOR","->",402],["T_STRING","_connectionFlagsSet",402],")",["T_WHITESPACE"," ",402],"{",["T_WHITESPACE","\n            ",402],["T_VARIABLE","$this",403],["T_OBJECT_OPERATOR","->",403],["T_STRING","_connection",403],["T_OBJECT_OPERATOR","->",403],["T_STRING","setAttribute",403],"(",["T_STRING","PDO",403],["T_DOUBLE_COLON","::",403],["T_STRING","ATTR_EMULATE_PREPARES",403],",",["T_WHITESPACE"," ",403],["T_STRING","true",403],")",";",["T_WHITESPACE","\n            ",403],["T_VARIABLE","$this",404],["T_OBJECT_OPERATOR","->",404],["T_STRING","_connection",404],["T_OBJECT_OPERATOR","->",404],["T_STRING","setAttribute",404],"(",["T_STRING","PDO",404],["T_DOUBLE_COLON","::",404],["T_STRING","MYSQL_ATTR_USE_BUFFERED_QUERY",404],",",["T_WHITESPACE"," ",404],["T_STRING","true",404],")",";",["T_WHITESPACE","\n            ",404],["T_VARIABLE","$this",405],["T_OBJECT_OPERATOR","->",405],["T_STRING","_connectionFlagsSet",405],["T_WHITESPACE"," ",405],"=",["T_WHITESPACE"," ",405],["T_STRING","true",405],";",["T_WHITESPACE","\n        ",405],"}",["T_WHITESPACE","\n    ",406],"}",["T_WHITESPACE","\n\n    ",407],["T_DOC_COMMENT","\/**\n     * Run RAW Query\n     *\n     * @param string $sql\n     * @return Zend_Db_Statement_Interface\n     * @throws PDOException\n     *\/",409],["T_WHITESPACE","\n    ",415],["T_PUBLIC","public",416],["T_WHITESPACE"," ",416],["T_FUNCTION","function",416],["T_WHITESPACE"," ",416],["T_STRING","raw_query",416],"(",["T_VARIABLE","$sql",416],")",["T_WHITESPACE","\n    ",416],"{",["T_WHITESPACE","\n        ",417],["T_VARIABLE","$lostConnectionMessage",418],["T_WHITESPACE"," ",418],"=",["T_WHITESPACE"," ",418],["T_CONSTANT_ENCAPSED_STRING","'SQLSTATE[HY000]: General error: 2013 Lost connection to MySQL server during query'",418],";",["T_WHITESPACE","\n        ",418],["T_VARIABLE","$tries",419],["T_WHITESPACE"," ",419],"=",["T_WHITESPACE"," ",419],["T_LNUMBER","0",419],";",["T_WHITESPACE","\n        ",419],["T_DO","do",420],["T_WHITESPACE"," ",420],"{",["T_WHITESPACE","\n            ",420],["T_VARIABLE","$retry",421],["T_WHITESPACE"," ",421],"=",["T_WHITESPACE"," ",421],["T_STRING","false",421],";",["T_WHITESPACE","\n            ",421],["T_TRY","try",422],["T_WHITESPACE"," ",422],"{",["T_WHITESPACE","\n                ",422],["T_VARIABLE","$result",423],["T_WHITESPACE"," ",423],"=",["T_WHITESPACE"," ",423],["T_VARIABLE","$this",423],["T_OBJECT_OPERATOR","->",423],["T_STRING","query",423],"(",["T_VARIABLE","$sql",423],")",";",["T_WHITESPACE","\n            ",423],"}",["T_WHITESPACE"," ",424],["T_CATCH","catch",424],["T_WHITESPACE"," ",424],"(",["T_STRING","Exception",424],["T_WHITESPACE"," ",424],["T_VARIABLE","$e",424],")",["T_WHITESPACE"," ",424],"{",["T_WHITESPACE","\n                ",424],["T_COMMENT","\/\/ Convert to PDOException to maintain backwards compatibility with usage of MySQL adapter\n",425],["T_WHITESPACE","                ",426],["T_IF","if",426],["T_WHITESPACE"," ",426],"(",["T_VARIABLE","$e",426],["T_WHITESPACE"," ",426],["T_INSTANCEOF","instanceof",426],["T_WHITESPACE"," ",426],["T_STRING","Zend_Db_Statement_Exception",426],")",["T_WHITESPACE"," ",426],"{",["T_WHITESPACE","\n                    ",426],["T_VARIABLE","$e",427],["T_WHITESPACE"," ",427],"=",["T_WHITESPACE"," ",427],["T_VARIABLE","$e",427],["T_OBJECT_OPERATOR","->",427],["T_STRING","getPrevious",427],"(",")",";",["T_WHITESPACE","\n                    ",427],["T_IF","if",428],["T_WHITESPACE"," ",428],"(","!","(",["T_VARIABLE","$e",428],["T_WHITESPACE"," ",428],["T_INSTANCEOF","instanceof",428],["T_WHITESPACE"," ",428],["T_STRING","PDOException",428],")",")",["T_WHITESPACE"," ",428],"{",["T_WHITESPACE","\n                        ",428],["T_VARIABLE","$e",429],["T_WHITESPACE"," ",429],"=",["T_WHITESPACE"," ",429],["T_NEW","new",429],["T_WHITESPACE"," ",429],["T_STRING","PDOException",429],"(",["T_VARIABLE","$e",429],["T_OBJECT_OPERATOR","->",429],["T_STRING","getMessage",429],"(",")",",",["T_WHITESPACE"," ",429],["T_VARIABLE","$e",429],["T_OBJECT_OPERATOR","->",429],["T_STRING","getCode",429],"(",")",")",";",["T_WHITESPACE","\n                    ",429],"}",["T_WHITESPACE","\n                ",430],"}",["T_WHITESPACE","\n                ",431],["T_COMMENT","\/\/ Check to reconnect\n",432],["T_WHITESPACE","                ",433],["T_IF","if",433],["T_WHITESPACE"," ",433],"(",["T_VARIABLE","$tries",433],["T_WHITESPACE"," ",433],"<",["T_WHITESPACE"," ",433],["T_LNUMBER","10",433],["T_WHITESPACE"," ",433],["T_BOOLEAN_AND","&&",433],["T_WHITESPACE"," ",433],["T_VARIABLE","$e",433],["T_OBJECT_OPERATOR","->",433],["T_STRING","getMessage",433],"(",")",["T_WHITESPACE"," ",433],["T_IS_EQUAL","==",433],["T_WHITESPACE"," ",433],["T_VARIABLE","$lostConnectionMessage",433],")",["T_WHITESPACE"," ",433],"{",["T_WHITESPACE","\n                    ",433],["T_VARIABLE","$retry",434],["T_WHITESPACE"," ",434],"=",["T_WHITESPACE"," ",434],["T_STRING","true",434],";",["T_WHITESPACE","\n                    ",434],["T_VARIABLE","$tries",435],["T_INC","++",435],";",["T_WHITESPACE","\n                ",435],"}",["T_WHITESPACE"," ",436],["T_ELSE","else",436],["T_WHITESPACE"," ",436],"{",["T_WHITESPACE","\n                    ",436],["T_THROW","throw",437],["T_WHITESPACE"," ",437],["T_VARIABLE","$e",437],";",["T_WHITESPACE","\n                ",437],"}",["T_WHITESPACE","\n            ",438],"}",["T_WHITESPACE","\n        ",439],"}",["T_WHITESPACE"," ",440],["T_WHILE","while",440],["T_WHITESPACE"," ",440],"(",["T_VARIABLE","$retry",440],")",";",["T_WHITESPACE","\n\n        ",440],["T_RETURN","return",442],["T_WHITESPACE"," ",442],["T_VARIABLE","$result",442],";",["T_WHITESPACE","\n    ",442],"}",["T_WHITESPACE","\n\n    ",443],["T_DOC_COMMENT","\/**\n     * Run RAW query and Fetch First row\n     *\n     * @param string $sql\n     * @param string|int $field\n     * @return boolean\n     *\/",445],["T_WHITESPACE","\n    ",451],["T_PUBLIC","public",452],["T_WHITESPACE"," ",452],["T_FUNCTION","function",452],["T_WHITESPACE"," ",452],["T_STRING","raw_fetchRow",452],"(",["T_VARIABLE","$sql",452],",",["T_WHITESPACE"," ",452],["T_VARIABLE","$field",452],["T_WHITESPACE"," ",452],"=",["T_WHITESPACE"," ",452],["T_STRING","null",452],")",["T_WHITESPACE","\n    ",452],"{",["T_WHITESPACE","\n        ",453],["T_VARIABLE","$result",454],["T_WHITESPACE"," ",454],"=",["T_WHITESPACE"," ",454],["T_VARIABLE","$this",454],["T_OBJECT_OPERATOR","->",454],["T_STRING","raw_query",454],"(",["T_VARIABLE","$sql",454],")",";",["T_WHITESPACE","\n        ",454],["T_IF","if",455],["T_WHITESPACE"," ",455],"(","!",["T_VARIABLE","$result",455],")",["T_WHITESPACE"," ",455],"{",["T_WHITESPACE","\n            ",455],["T_RETURN","return",456],["T_WHITESPACE"," ",456],["T_STRING","false",456],";",["T_WHITESPACE","\n        ",456],"}",["T_WHITESPACE","\n\n        ",457],["T_VARIABLE","$row",459],["T_WHITESPACE"," ",459],"=",["T_WHITESPACE"," ",459],["T_VARIABLE","$result",459],["T_OBJECT_OPERATOR","->",459],["T_STRING","fetch",459],"(",["T_STRING","PDO",459],["T_DOUBLE_COLON","::",459],["T_STRING","FETCH_ASSOC",459],")",";",["T_WHITESPACE","\n        ",459],["T_IF","if",460],["T_WHITESPACE"," ",460],"(","!",["T_VARIABLE","$row",460],")",["T_WHITESPACE"," ",460],"{",["T_WHITESPACE","\n            ",460],["T_RETURN","return",461],["T_WHITESPACE"," ",461],["T_STRING","false",461],";",["T_WHITESPACE","\n        ",461],"}",["T_WHITESPACE","\n\n        ",462],["T_IF","if",464],["T_WHITESPACE"," ",464],"(",["T_EMPTY","empty",464],"(",["T_VARIABLE","$field",464],")",")",["T_WHITESPACE"," ",464],"{",["T_WHITESPACE","\n            ",464],["T_RETURN","return",465],["T_WHITESPACE"," ",465],["T_VARIABLE","$row",465],";",["T_WHITESPACE","\n        ",465],"}",["T_WHITESPACE"," ",466],["T_ELSE","else",466],["T_WHITESPACE"," ",466],"{",["T_WHITESPACE","\n            ",466],["T_RETURN","return",467],["T_WHITESPACE"," ",467],["T_ISSET","isset",467],"(",["T_VARIABLE","$row",467],"[",["T_VARIABLE","$field",467],"]",")",["T_WHITESPACE"," ",467],"?",["T_WHITESPACE"," ",467],["T_VARIABLE","$row",467],"[",["T_VARIABLE","$field",467],"]",["T_WHITESPACE"," ",467],":",["T_WHITESPACE"," ",467],["T_STRING","false",467],";",["T_WHITESPACE","\n        ",467],"}",["T_WHITESPACE","\n    ",468],"}",["T_WHITESPACE","\n\n    ",469],["T_DOC_COMMENT","\/**\n     * Check transaction level in case of DDL query\n     *\n     * @param string|Zend_Db_Select $sql\n     * @throws Zend_Db_Adapter_Exception\n     *\/",471],["T_WHITESPACE","\n    ",476],["T_PROTECTED","protected",477],["T_WHITESPACE"," ",477],["T_FUNCTION","function",477],["T_WHITESPACE"," ",477],["T_STRING","_checkDdlTransaction",477],"(",["T_VARIABLE","$sql",477],")",["T_WHITESPACE","\n    ",477],"{",["T_WHITESPACE","\n        ",478],["T_IF","if",479],["T_WHITESPACE"," ",479],"(",["T_STRING","is_string",479],"(",["T_VARIABLE","$sql",479],")",["T_WHITESPACE"," ",479],["T_BOOLEAN_AND","&&",479],["T_WHITESPACE"," ",479],["T_VARIABLE","$this",479],["T_OBJECT_OPERATOR","->",479],["T_STRING","getTransactionLevel",479],"(",")",["T_WHITESPACE"," ",479],">",["T_WHITESPACE"," ",479],["T_LNUMBER","0",479],")",["T_WHITESPACE"," ",479],"{",["T_WHITESPACE","\n            ",479],["T_VARIABLE","$startSql",480],["T_WHITESPACE"," ",480],"=",["T_WHITESPACE"," ",480],["T_STRING","strtolower",480],"(",["T_STRING","substr",480],"(",["T_STRING","ltrim",480],"(",["T_VARIABLE","$sql",480],")",",",["T_WHITESPACE"," ",480],["T_LNUMBER","0",480],",",["T_WHITESPACE"," ",480],["T_LNUMBER","3",480],")",")",";",["T_WHITESPACE","\n            ",480],["T_IF","if",481],["T_WHITESPACE"," ",481],"(",["T_STRING","in_array",481],"(",["T_VARIABLE","$startSql",481],",",["T_WHITESPACE"," ",481],["T_VARIABLE","$this",481],["T_OBJECT_OPERATOR","->",481],["T_STRING","_ddlRoutines",481],")",["T_WHITESPACE","\n                ",481],["T_BOOLEAN_AND","&&",482],["T_WHITESPACE"," ",482],"(",["T_STRING","preg_match",482],"(",["T_VARIABLE","$this",482],["T_OBJECT_OPERATOR","->",482],["T_STRING","_tempRoutines",482],",",["T_WHITESPACE"," ",482],["T_VARIABLE","$sql",482],")",["T_WHITESPACE"," ",482],["T_IS_NOT_IDENTICAL","!==",482],["T_WHITESPACE"," ",482],["T_LNUMBER","1",482],")",["T_WHITESPACE","\n            ",482],")",["T_WHITESPACE"," ",483],"{",["T_WHITESPACE","\n                ",483],["T_STRING","trigger_error",484],"(",["T_STRING","Varien_Db_Adapter_Interface",484],["T_DOUBLE_COLON","::",484],["T_STRING","ERROR_DDL_MESSAGE",484],",",["T_WHITESPACE"," ",484],["T_STRING","E_USER_ERROR",484],")",";",["T_WHITESPACE","\n            ",484],"}",["T_WHITESPACE","\n        ",485],"}",["T_WHITESPACE","\n    ",486],"}",["T_WHITESPACE","\n\n    ",487],["T_DOC_COMMENT","\/**\n     * Special handling for PDO query().\n     * All bind parameter names must begin with ':'.\n     *\n     * @param string|Zend_Db_Select $sql The SQL statement with placeholders.\n     * @param mixed $bind An array of data or data itself to bind to the placeholders.\n     * @return Zend_Db_Statement_Pdo\n     * @throws Zend_Db_Adapter_Exception To re-throw PDOException.\n     *\/",489],["T_WHITESPACE","\n    ",497],["T_PUBLIC","public",498],["T_WHITESPACE"," ",498],["T_FUNCTION","function",498],["T_WHITESPACE"," ",498],["T_STRING","query",498],"(",["T_VARIABLE","$sql",498],",",["T_WHITESPACE"," ",498],["T_VARIABLE","$bind",498],["T_WHITESPACE"," ",498],"=",["T_WHITESPACE"," ",498],["T_ARRAY","array",498],"(",")",")",["T_WHITESPACE","\n    ",498],"{",["T_WHITESPACE","\n        ",499],["T_VARIABLE","$this",500],["T_OBJECT_OPERATOR","->",500],["T_STRING","_debugTimer",500],"(",")",";",["T_WHITESPACE","\n        ",500],["T_TRY","try",501],["T_WHITESPACE"," ",501],"{",["T_WHITESPACE","\n            ",501],["T_VARIABLE","$this",502],["T_OBJECT_OPERATOR","->",502],["T_STRING","_checkDdlTransaction",502],"(",["T_VARIABLE","$sql",502],")",";",["T_WHITESPACE","\n            ",502],["T_VARIABLE","$this",503],["T_OBJECT_OPERATOR","->",503],["T_STRING","_prepareQuery",503],"(",["T_VARIABLE","$sql",503],",",["T_WHITESPACE"," ",503],["T_VARIABLE","$bind",503],")",";",["T_WHITESPACE","\n            ",503],["T_VARIABLE","$result",504],["T_WHITESPACE"," ",504],"=",["T_WHITESPACE"," ",504],["T_STRING","parent",504],["T_DOUBLE_COLON","::",504],["T_STRING","query",504],"(",["T_VARIABLE","$sql",504],",",["T_WHITESPACE"," ",504],["T_VARIABLE","$bind",504],")",";",["T_WHITESPACE","\n        ",504],"}",["T_WHITESPACE"," ",505],["T_CATCH","catch",505],["T_WHITESPACE"," ",505],"(",["T_STRING","Exception",505],["T_WHITESPACE"," ",505],["T_VARIABLE","$e",505],")",["T_WHITESPACE"," ",505],"{",["T_WHITESPACE","\n            ",505],["T_VARIABLE","$this",506],["T_OBJECT_OPERATOR","->",506],["T_STRING","_debugStat",506],"(",["T_STRING","self",506],["T_DOUBLE_COLON","::",506],["T_STRING","DEBUG_QUERY",506],",",["T_WHITESPACE"," ",506],["T_VARIABLE","$sql",506],",",["T_WHITESPACE"," ",506],["T_VARIABLE","$bind",506],")",";",["T_WHITESPACE","\n            ",506],["T_VARIABLE","$this",507],["T_OBJECT_OPERATOR","->",507],["T_STRING","_debugException",507],"(",["T_VARIABLE","$e",507],")",";",["T_WHITESPACE","\n        ",507],"}",["T_WHITESPACE","\n        ",508],["T_VARIABLE","$this",509],["T_OBJECT_OPERATOR","->",509],["T_STRING","_debugStat",509],"(",["T_STRING","self",509],["T_DOUBLE_COLON","::",509],["T_STRING","DEBUG_QUERY",509],",",["T_WHITESPACE"," ",509],["T_VARIABLE","$sql",509],",",["T_WHITESPACE"," ",509],["T_VARIABLE","$bind",509],",",["T_WHITESPACE"," ",509],["T_VARIABLE","$result",509],")",";",["T_WHITESPACE","\n        ",509],["T_RETURN","return",510],["T_WHITESPACE"," ",510],["T_VARIABLE","$result",510],";",["T_WHITESPACE","\n    ",510],"}",["T_WHITESPACE","\n\n    ",511],["T_DOC_COMMENT","\/**\n     * Prepares SQL query by moving to bind all special parameters that can be confused with bind placeholders\n     * (e.g. \"foo:bar\"). And also changes named bind to positional one, because underlying library has problems\n     * with named binds.\n     *\n     * @param Zend_Db_Select|string $sql\n     * @param mixed $bind\n     * @return Varien_Db_Adapter_Pdo_Mysql\n     *\/",513],["T_WHITESPACE","\n    ",521],["T_PROTECTED","protected",522],["T_WHITESPACE"," ",522],["T_FUNCTION","function",522],["T_WHITESPACE"," ",522],["T_STRING","_prepareQuery",522],"(","&",["T_VARIABLE","$sql",522],",",["T_WHITESPACE"," ",522],"&",["T_VARIABLE","$bind",522],["T_WHITESPACE"," ",522],"=",["T_WHITESPACE"," ",522],["T_ARRAY","array",522],"(",")",")",["T_WHITESPACE","\n    ",522],"{",["T_WHITESPACE","\n        ",523],["T_VARIABLE","$sql",524],["T_WHITESPACE"," ",524],"=",["T_WHITESPACE"," ",524],["T_STRING_CAST","(string)",524],["T_WHITESPACE"," ",524],["T_VARIABLE","$sql",524],";",["T_WHITESPACE","\n        ",524],["T_IF","if",525],["T_WHITESPACE"," ",525],"(","!",["T_STRING","is_array",525],"(",["T_VARIABLE","$bind",525],")",")",["T_WHITESPACE"," ",525],"{",["T_WHITESPACE","\n            ",525],["T_VARIABLE","$bind",526],["T_WHITESPACE"," ",526],"=",["T_WHITESPACE"," ",526],["T_ARRAY","array",526],"(",["T_VARIABLE","$bind",526],")",";",["T_WHITESPACE","\n        ",526],"}",["T_WHITESPACE","\n\n        ",527],["T_COMMENT","\/\/ Mixed bind is not supported - so remember whether it is named bind, to normalize later if required\n",529],["T_WHITESPACE","        ",530],["T_VARIABLE","$isNamedBind",530],["T_WHITESPACE"," ",530],"=",["T_WHITESPACE"," ",530],["T_STRING","false",530],";",["T_WHITESPACE","\n        ",530],["T_IF","if",531],["T_WHITESPACE"," ",531],"(",["T_VARIABLE","$bind",531],")",["T_WHITESPACE"," ",531],"{",["T_WHITESPACE","\n            ",531],["T_FOREACH","foreach",532],["T_WHITESPACE"," ",532],"(",["T_VARIABLE","$bind",532],["T_WHITESPACE"," ",532],["T_AS","as",532],["T_WHITESPACE"," ",532],["T_VARIABLE","$k",532],["T_WHITESPACE"," ",532],["T_DOUBLE_ARROW","=>",532],["T_WHITESPACE"," ",532],["T_VARIABLE","$v",532],")",["T_WHITESPACE"," ",532],"{",["T_WHITESPACE","\n                ",532],["T_IF","if",533],["T_WHITESPACE"," ",533],"(","!",["T_STRING","is_int",533],"(",["T_VARIABLE","$k",533],")",")",["T_WHITESPACE"," ",533],"{",["T_WHITESPACE","\n                    ",533],["T_VARIABLE","$isNamedBind",534],["T_WHITESPACE"," ",534],"=",["T_WHITESPACE"," ",534],["T_STRING","true",534],";",["T_WHITESPACE","\n                    ",534],["T_IF","if",535],["T_WHITESPACE"," ",535],"(",["T_VARIABLE","$k",535],"[",["T_LNUMBER","0",535],"]",["T_WHITESPACE"," ",535],["T_IS_NOT_EQUAL","!=",535],["T_WHITESPACE"," ",535],["T_CONSTANT_ENCAPSED_STRING","':'",535],")",["T_WHITESPACE"," ",535],"{",["T_WHITESPACE","\n                        ",535],["T_VARIABLE","$bind",536],"[","\"",["T_ENCAPSED_AND_WHITESPACE",":",536],["T_CURLY_OPEN","{",536],["T_VARIABLE","$k",536],"}","\"","]",["T_WHITESPACE"," ",536],"=",["T_WHITESPACE"," ",536],["T_VARIABLE","$v",536],";",["T_WHITESPACE","\n                        ",536],["T_UNSET","unset",537],"(",["T_VARIABLE","$bind",537],"[",["T_VARIABLE","$k",537],"]",")",";",["T_WHITESPACE","\n                    ",537],"}",["T_WHITESPACE","\n                ",538],"}",["T_WHITESPACE","\n            ",539],"}",["T_WHITESPACE","\n        ",540],"}",["T_WHITESPACE","\n\n        ",541],["T_COMMENT","\/\/ Special query hook\n",543],["T_WHITESPACE","        ",544],["T_IF","if",544],["T_WHITESPACE"," ",544],"(",["T_VARIABLE","$this",544],["T_OBJECT_OPERATOR","->",544],["T_STRING","_queryHook",544],")",["T_WHITESPACE"," ",544],"{",["T_WHITESPACE","\n            ",544],["T_VARIABLE","$object",545],["T_WHITESPACE"," ",545],"=",["T_WHITESPACE"," ",545],["T_VARIABLE","$this",545],["T_OBJECT_OPERATOR","->",545],["T_STRING","_queryHook",545],"[",["T_CONSTANT_ENCAPSED_STRING","'object'",545],"]",";",["T_WHITESPACE","\n            ",545],["T_VARIABLE","$method",546],["T_WHITESPACE"," ",546],"=",["T_WHITESPACE"," ",546],["T_VARIABLE","$this",546],["T_OBJECT_OPERATOR","->",546],["T_STRING","_queryHook",546],"[",["T_CONSTANT_ENCAPSED_STRING","'method'",546],"]",";",["T_WHITESPACE","\n            ",546],["T_VARIABLE","$object",547],["T_OBJECT_OPERATOR","->",547],["T_VARIABLE","$method",547],"(",["T_VARIABLE","$sql",547],",",["T_WHITESPACE"," ",547],["T_VARIABLE","$bind",547],")",";",["T_WHITESPACE","\n        ",547],"}",["T_WHITESPACE","\n\n        ",548],["T_RETURN","return",550],["T_WHITESPACE"," ",550],["T_VARIABLE","$this",550],";",["T_WHITESPACE","\n    ",550],"}",["T_WHITESPACE","\n\n    ",551],["T_DOC_COMMENT","\/**\n     * Callback function for preparation of query and bind by regexp.\n     * Checks query parameters for special symbols and moves such parameters to bind array as named ones.\n     * This method writes to $_bindParams, where query bind parameters are kept.\n     * This method requires further normalizing, if bind array is positional.\n     *\n     * @param array $matches\n     * @return string\n     *\/",553],["T_WHITESPACE","\n    ",561],["T_PUBLIC","public",562],["T_WHITESPACE"," ",562],["T_FUNCTION","function",562],["T_WHITESPACE"," ",562],["T_STRING","proccessBindCallback",562],"(",["T_VARIABLE","$matches",562],")",["T_WHITESPACE","\n    ",562],"{",["T_WHITESPACE","\n        ",563],["T_IF","if",564],["T_WHITESPACE"," ",564],"(",["T_ISSET","isset",564],"(",["T_VARIABLE","$matches",564],"[",["T_LNUMBER","6",564],"]",")",["T_WHITESPACE"," ",564],["T_BOOLEAN_AND","&&",564],["T_WHITESPACE"," ",564],"(",["T_WHITESPACE","\n            ",564],["T_STRING","strpos",565],"(",["T_VARIABLE","$matches",565],"[",["T_LNUMBER","6",565],"]",",",["T_WHITESPACE"," ",565],["T_CONSTANT_ENCAPSED_STRING","\"'\"",565],")",["T_WHITESPACE"," ",565],["T_IS_NOT_IDENTICAL","!==",565],["T_WHITESPACE"," ",565],["T_STRING","false",565],["T_WHITESPACE"," ",565],["T_BOOLEAN_OR","||",565],["T_WHITESPACE","\n            ",565],["T_STRING","strpos",566],"(",["T_VARIABLE","$matches",566],"[",["T_LNUMBER","6",566],"]",",",["T_WHITESPACE"," ",566],["T_CONSTANT_ENCAPSED_STRING","':'",566],")",["T_WHITESPACE"," ",566],["T_IS_NOT_IDENTICAL","!==",566],["T_WHITESPACE"," ",566],["T_STRING","false",566],["T_WHITESPACE"," ",566],["T_BOOLEAN_OR","||",566],["T_WHITESPACE","\n            ",566],["T_STRING","strpos",567],"(",["T_VARIABLE","$matches",567],"[",["T_LNUMBER","6",567],"]",",",["T_WHITESPACE"," ",567],["T_CONSTANT_ENCAPSED_STRING","'?'",567],")",["T_WHITESPACE"," ",567],["T_IS_NOT_IDENTICAL","!==",567],["T_WHITESPACE"," ",567],["T_STRING","false",567],")",["T_WHITESPACE","\n        ",567],")",["T_WHITESPACE"," ",568],"{",["T_WHITESPACE","\n            ",568],["T_VARIABLE","$bindName",569],["T_WHITESPACE"," ",569],"=",["T_WHITESPACE"," ",569],["T_CONSTANT_ENCAPSED_STRING","':_mage_bind_var_'",569],["T_WHITESPACE"," ",569],".",["T_WHITESPACE"," ",569],"(",["T_INC","++",569],["T_VARIABLE","$this",569],["T_OBJECT_OPERATOR","->",569],["T_STRING","_bindIncrement",569],")",";",["T_WHITESPACE","\n            ",569],["T_VARIABLE","$this",570],["T_OBJECT_OPERATOR","->",570],["T_STRING","_bindParams",570],"[",["T_VARIABLE","$bindName",570],"]",["T_WHITESPACE"," ",570],"=",["T_WHITESPACE"," ",570],["T_VARIABLE","$this",570],["T_OBJECT_OPERATOR","->",570],["T_STRING","_unQuote",570],"(",["T_VARIABLE","$matches",570],"[",["T_LNUMBER","6",570],"]",")",";",["T_WHITESPACE","\n            ",570],["T_RETURN","return",571],["T_WHITESPACE"," ",571],["T_CONSTANT_ENCAPSED_STRING","' '",571],["T_WHITESPACE"," ",571],".",["T_WHITESPACE"," ",571],["T_VARIABLE","$bindName",571],";",["T_WHITESPACE","\n        ",571],"}",["T_WHITESPACE","\n        ",572],["T_RETURN","return",573],["T_WHITESPACE"," ",573],["T_VARIABLE","$matches",573],"[",["T_LNUMBER","0",573],"]",";",["T_WHITESPACE","\n    ",573],"}",["T_WHITESPACE","\n\n    ",574],["T_DOC_COMMENT","\/**\n     * Unquote raw string (use for auto-bind)\n     *\n     * @param string $string\n     * @return string\n     *\/",576],["T_WHITESPACE","\n    ",581],["T_PROTECTED","protected",582],["T_WHITESPACE"," ",582],["T_FUNCTION","function",582],["T_WHITESPACE"," ",582],["T_STRING","_unQuote",582],"(",["T_VARIABLE","$string",582],")",["T_WHITESPACE","\n    ",582],"{",["T_WHITESPACE","\n        ",583],["T_VARIABLE","$translate",584],["T_WHITESPACE"," ",584],"=",["T_WHITESPACE"," ",584],["T_ARRAY","array",584],"(",["T_WHITESPACE","\n            ",584],["T_CONSTANT_ENCAPSED_STRING","\"\\\\000\"",585],["T_WHITESPACE"," ",585],["T_DOUBLE_ARROW","=>",585],["T_WHITESPACE"," ",585],["T_CONSTANT_ENCAPSED_STRING","\"\\000\"",585],",",["T_WHITESPACE","\n            ",585],["T_CONSTANT_ENCAPSED_STRING","\"\\\\n\"",586],["T_WHITESPACE","   ",586],["T_DOUBLE_ARROW","=>",586],["T_WHITESPACE"," ",586],["T_CONSTANT_ENCAPSED_STRING","\"\\n\"",586],",",["T_WHITESPACE","\n            ",586],["T_CONSTANT_ENCAPSED_STRING","\"\\\\r\"",587],["T_WHITESPACE","   ",587],["T_DOUBLE_ARROW","=>",587],["T_WHITESPACE"," ",587],["T_CONSTANT_ENCAPSED_STRING","\"\\r\"",587],",",["T_WHITESPACE","\n            ",587],["T_CONSTANT_ENCAPSED_STRING","\"\\\\\\\\\"",588],["T_WHITESPACE","  ",588],["T_DOUBLE_ARROW","=>",588],["T_WHITESPACE"," ",588],["T_CONSTANT_ENCAPSED_STRING","\"\\\\\"",588],",",["T_WHITESPACE","\n            ",588],["T_CONSTANT_ENCAPSED_STRING","\"\\'\"",589],["T_WHITESPACE","    ",589],["T_DOUBLE_ARROW","=>",589],["T_WHITESPACE"," ",589],["T_CONSTANT_ENCAPSED_STRING","\"'\"",589],",",["T_WHITESPACE","\n            ",589],["T_CONSTANT_ENCAPSED_STRING","\"\\\\\\\"\"",590],["T_WHITESPACE","  ",590],["T_DOUBLE_ARROW","=>",590],["T_WHITESPACE"," ",590],["T_CONSTANT_ENCAPSED_STRING","\"\\\"\"",590],",",["T_WHITESPACE","\n            ",590],["T_CONSTANT_ENCAPSED_STRING","\"\\\\032\"",591],["T_WHITESPACE"," ",591],["T_DOUBLE_ARROW","=>",591],["T_WHITESPACE"," ",591],["T_CONSTANT_ENCAPSED_STRING","\"\\032\"",591],["T_WHITESPACE","\n        ",591],")",";",["T_WHITESPACE","\n        ",592],["T_RETURN","return",593],["T_WHITESPACE"," ",593],["T_STRING","strtr",593],"(",["T_VARIABLE","$string",593],",",["T_WHITESPACE"," ",593],["T_VARIABLE","$translate",593],")",";",["T_WHITESPACE","\n    ",593],"}",["T_WHITESPACE","\n\n    ",594],["T_DOC_COMMENT","\/**\n     * Normalizes mixed positional-named bind to positional bind, and replaces named placeholders in query to\n     * '?' placeholders.\n     *\n     * @param string $sql\n     * @param array $bind\n     * @return Varien_Db_Adapter_Pdo_Mysql\n     *\/",596],["T_WHITESPACE","\n    ",603],["T_PROTECTED","protected",604],["T_WHITESPACE"," ",604],["T_FUNCTION","function",604],["T_WHITESPACE"," ",604],["T_STRING","_convertMixedBind",604],"(","&",["T_VARIABLE","$sql",604],",",["T_WHITESPACE"," ",604],"&",["T_VARIABLE","$bind",604],")",["T_WHITESPACE","\n    ",604],"{",["T_WHITESPACE","\n        ",605],["T_VARIABLE","$positions",606],["T_WHITESPACE","  ",606],"=",["T_WHITESPACE"," ",606],["T_ARRAY","array",606],"(",")",";",["T_WHITESPACE","\n        ",606],["T_VARIABLE","$offset",607],["T_WHITESPACE","     ",607],"=",["T_WHITESPACE"," ",607],["T_LNUMBER","0",607],";",["T_WHITESPACE","\n        ",607],["T_COMMENT","\/\/ get positions\n",608],["T_WHITESPACE","        ",609],["T_WHILE","while",609],["T_WHITESPACE"," ",609],"(",["T_STRING","true",609],")",["T_WHITESPACE"," ",609],"{",["T_WHITESPACE","\n            ",609],["T_VARIABLE","$pos",610],["T_WHITESPACE"," ",610],"=",["T_WHITESPACE"," ",610],["T_STRING","strpos",610],"(",["T_VARIABLE","$sql",610],",",["T_WHITESPACE"," ",610],["T_CONSTANT_ENCAPSED_STRING","'?'",610],",",["T_WHITESPACE"," ",610],["T_VARIABLE","$offset",610],")",";",["T_WHITESPACE","\n            ",610],["T_IF","if",611],["T_WHITESPACE"," ",611],"(",["T_VARIABLE","$pos",611],["T_WHITESPACE"," ",611],["T_IS_NOT_IDENTICAL","!==",611],["T_WHITESPACE"," ",611],["T_STRING","false",611],")",["T_WHITESPACE"," ",611],"{",["T_WHITESPACE","\n                ",611],["T_VARIABLE","$positions",612],"[","]",["T_WHITESPACE"," ",612],"=",["T_WHITESPACE"," ",612],["T_VARIABLE","$pos",612],";",["T_WHITESPACE","\n                ",612],["T_VARIABLE","$offset",613],["T_WHITESPACE","      ",613],"=",["T_WHITESPACE"," ",613],["T_INC","++",613],["T_VARIABLE","$pos",613],";",["T_WHITESPACE","\n            ",613],"}",["T_WHITESPACE"," ",614],["T_ELSE","else",614],["T_WHITESPACE"," ",614],"{",["T_WHITESPACE","\n                ",614],["T_BREAK","break",615],";",["T_WHITESPACE","\n            ",615],"}",["T_WHITESPACE","\n        ",616],"}",["T_WHITESPACE","\n\n        ",617],["T_VARIABLE","$bindResult",619],["T_WHITESPACE"," ",619],"=",["T_WHITESPACE"," ",619],["T_ARRAY","array",619],"(",")",";",["T_WHITESPACE","\n        ",619],["T_VARIABLE","$map",620],["T_WHITESPACE"," ",620],"=",["T_WHITESPACE"," ",620],["T_ARRAY","array",620],"(",")",";",["T_WHITESPACE","\n        ",620],["T_FOREACH","foreach",621],["T_WHITESPACE"," ",621],"(",["T_VARIABLE","$bind",621],["T_WHITESPACE"," ",621],["T_AS","as",621],["T_WHITESPACE"," ",621],["T_VARIABLE","$k",621],["T_WHITESPACE"," ",621],["T_DOUBLE_ARROW","=>",621],["T_WHITESPACE"," ",621],["T_VARIABLE","$v",621],")",["T_WHITESPACE"," ",621],"{",["T_WHITESPACE","\n            ",621],["T_COMMENT","\/\/ positional\n",622],["T_WHITESPACE","            ",623],["T_IF","if",623],["T_WHITESPACE"," ",623],"(",["T_STRING","is_int",623],"(",["T_VARIABLE","$k",623],")",")",["T_WHITESPACE"," ",623],"{",["T_WHITESPACE","\n                ",623],["T_IF","if",624],["T_WHITESPACE"," ",624],"(","!",["T_ISSET","isset",624],"(",["T_VARIABLE","$positions",624],"[",["T_VARIABLE","$k",624],"]",")",")",["T_WHITESPACE"," ",624],"{",["T_WHITESPACE","\n                    ",624],["T_CONTINUE","continue",625],";",["T_WHITESPACE","\n                ",625],"}",["T_WHITESPACE","\n                ",626],["T_VARIABLE","$bindResult",627],"[",["T_VARIABLE","$positions",627],"[",["T_VARIABLE","$k",627],"]","]",["T_WHITESPACE"," ",627],"=",["T_WHITESPACE"," ",627],["T_VARIABLE","$v",627],";",["T_WHITESPACE","\n            ",627],"}",["T_WHITESPACE"," ",628],["T_ELSE","else",628],["T_WHITESPACE"," ",628],"{",["T_WHITESPACE","\n                ",628],["T_VARIABLE","$offset",629],["T_WHITESPACE"," ",629],"=",["T_WHITESPACE"," ",629],["T_LNUMBER","0",629],";",["T_WHITESPACE","\n                ",629],["T_WHILE","while",630],["T_WHITESPACE"," ",630],"(",["T_STRING","true",630],")",["T_WHITESPACE"," ",630],"{",["T_WHITESPACE","\n                    ",630],["T_VARIABLE","$pos",631],["T_WHITESPACE"," ",631],"=",["T_WHITESPACE"," ",631],["T_STRING","strpos",631],"(",["T_VARIABLE","$sql",631],",",["T_WHITESPACE"," ",631],["T_VARIABLE","$k",631],",",["T_WHITESPACE"," ",631],["T_VARIABLE","$offset",631],")",";",["T_WHITESPACE","\n                    ",631],["T_IF","if",632],["T_WHITESPACE"," ",632],"(",["T_VARIABLE","$pos",632],["T_WHITESPACE"," ",632],["T_IS_IDENTICAL","===",632],["T_WHITESPACE"," ",632],["T_STRING","false",632],")",["T_WHITESPACE"," ",632],"{",["T_WHITESPACE","\n                        ",632],["T_BREAK","break",633],";",["T_WHITESPACE","\n                    ",633],"}",["T_WHITESPACE"," ",634],["T_ELSE","else",634],["T_WHITESPACE"," ",634],"{",["T_WHITESPACE","\n                        ",634],["T_VARIABLE","$offset",635],["T_WHITESPACE"," ",635],"=",["T_WHITESPACE"," ",635],["T_VARIABLE","$pos",635],["T_WHITESPACE"," ",635],"+",["T_WHITESPACE"," ",635],["T_STRING","strlen",635],"(",["T_VARIABLE","$k",635],")",";",["T_WHITESPACE","\n                        ",635],["T_VARIABLE","$bindResult",636],"[",["T_VARIABLE","$pos",636],"]",["T_WHITESPACE"," ",636],"=",["T_WHITESPACE"," ",636],["T_VARIABLE","$v",636],";",["T_WHITESPACE","\n                    ",636],"}",["T_WHITESPACE","\n                ",637],"}",["T_WHITESPACE","\n                ",638],["T_VARIABLE","$map",639],"[",["T_VARIABLE","$k",639],"]",["T_WHITESPACE"," ",639],"=",["T_WHITESPACE"," ",639],["T_CONSTANT_ENCAPSED_STRING","'?'",639],";",["T_WHITESPACE","\n            ",639],"}",["T_WHITESPACE","\n        ",640],"}",["T_WHITESPACE","\n\n        ",641],["T_STRING","ksort",643],"(",["T_VARIABLE","$bindResult",643],")",";",["T_WHITESPACE","\n        ",643],["T_VARIABLE","$bind",644],["T_WHITESPACE"," ",644],"=",["T_WHITESPACE"," ",644],["T_STRING","array_values",644],"(",["T_VARIABLE","$bindResult",644],")",";",["T_WHITESPACE","\n        ",644],["T_VARIABLE","$sql",645],["T_WHITESPACE"," ",645],"=",["T_WHITESPACE"," ",645],["T_STRING","strtr",645],"(",["T_VARIABLE","$sql",645],",",["T_WHITESPACE"," ",645],["T_VARIABLE","$map",645],")",";",["T_WHITESPACE","\n\n        ",645],["T_RETURN","return",647],["T_WHITESPACE"," ",647],["T_VARIABLE","$this",647],";",["T_WHITESPACE","\n    ",647],"}",["T_WHITESPACE","\n\n    ",648],["T_DOC_COMMENT","\/**\n     * Sets (removes) query hook.\n     *\n     * $hook must be either array with 'object' and 'method' entries, or null to remove hook.\n     * Previous hook is returned.\n     *\n     * @param array $hook\n     * @return mixed\n     *\/",650],["T_WHITESPACE","\n    ",658],["T_PUBLIC","public",659],["T_WHITESPACE"," ",659],["T_FUNCTION","function",659],["T_WHITESPACE"," ",659],["T_STRING","setQueryHook",659],"(",["T_VARIABLE","$hook",659],")",["T_WHITESPACE","\n    ",659],"{",["T_WHITESPACE","\n        ",660],["T_VARIABLE","$prev",661],["T_WHITESPACE"," ",661],"=",["T_WHITESPACE"," ",661],["T_VARIABLE","$this",661],["T_OBJECT_OPERATOR","->",661],["T_STRING","_queryHook",661],";",["T_WHITESPACE","\n        ",661],["T_VARIABLE","$this",662],["T_OBJECT_OPERATOR","->",662],["T_STRING","_queryHook",662],["T_WHITESPACE"," ",662],"=",["T_WHITESPACE"," ",662],["T_VARIABLE","$hook",662],";",["T_WHITESPACE","\n        ",662],["T_RETURN","return",663],["T_WHITESPACE"," ",663],["T_VARIABLE","$prev",663],";",["T_WHITESPACE","\n    ",663],"}",["T_WHITESPACE","\n\n    ",664],["T_DOC_COMMENT","\/**\n     * Executes a SQL statement(s)\n     *\n     * @param string $sql\n     * @throws Zend_Db_Exception\n     * @return Varien_Db_Adapter_Pdo_Mysql\n     *\/",666],["T_WHITESPACE","\n    ",672],["T_PUBLIC","public",673],["T_WHITESPACE"," ",673],["T_FUNCTION","function",673],["T_WHITESPACE"," ",673],["T_STRING","multiQuery",673],"(",["T_VARIABLE","$sql",673],")",["T_WHITESPACE","\n    ",673],"{",["T_WHITESPACE","\n        ",674],["T_RETURN","return",675],["T_WHITESPACE"," ",675],["T_VARIABLE","$this",675],["T_OBJECT_OPERATOR","->",675],["T_STRING","multi_query",675],"(",["T_VARIABLE","$sql",675],")",";",["T_WHITESPACE","\n    ",675],"}",["T_WHITESPACE","\n\n    ",676],["T_DOC_COMMENT","\/**\n     * Run Multi Query\n     *\n     * @param string $sql\n     * @return array\n     *\/",678],["T_WHITESPACE","\n    ",683],["T_PUBLIC","public",684],["T_WHITESPACE"," ",684],["T_FUNCTION","function",684],["T_WHITESPACE"," ",684],["T_STRING","multi_query",684],"(",["T_VARIABLE","$sql",684],")",["T_WHITESPACE","\n    ",684],"{",["T_WHITESPACE","\n        ",685],["T_COMMENT","##$result = $this->raw_query($sql);\n",686],["T_WHITESPACE","\n        ",687],["T_COMMENT","#$this->beginTransaction();\n",688],["T_WHITESPACE","        ",689],["T_TRY","try",689],["T_WHITESPACE"," ",689],"{",["T_WHITESPACE","\n            ",689],["T_VARIABLE","$stmts",690],["T_WHITESPACE"," ",690],"=",["T_WHITESPACE"," ",690],["T_VARIABLE","$this",690],["T_OBJECT_OPERATOR","->",690],["T_STRING","_splitMultiQuery",690],"(",["T_VARIABLE","$sql",690],")",";",["T_WHITESPACE","\n            ",690],["T_VARIABLE","$result",691],["T_WHITESPACE"," ",691],"=",["T_WHITESPACE"," ",691],["T_ARRAY","array",691],"(",")",";",["T_WHITESPACE","\n            ",691],["T_FOREACH","foreach",692],["T_WHITESPACE"," ",692],"(",["T_VARIABLE","$stmts",692],["T_WHITESPACE"," ",692],["T_AS","as",692],["T_WHITESPACE"," ",692],["T_VARIABLE","$stmt",692],")",["T_WHITESPACE"," ",692],"{",["T_WHITESPACE","\n                ",692],["T_VARIABLE","$result",693],"[","]",["T_WHITESPACE"," ",693],"=",["T_WHITESPACE"," ",693],["T_VARIABLE","$this",693],["T_OBJECT_OPERATOR","->",693],["T_STRING","raw_query",693],"(",["T_VARIABLE","$stmt",693],")",";",["T_WHITESPACE","\n            ",693],"}",["T_WHITESPACE","\n            ",694],["T_COMMENT","#$this->commit();\n",695],["T_WHITESPACE","        ",696],"}",["T_WHITESPACE"," ",696],["T_CATCH","catch",696],["T_WHITESPACE"," ",696],"(",["T_STRING","Exception",696],["T_WHITESPACE"," ",696],["T_VARIABLE","$e",696],")",["T_WHITESPACE"," ",696],"{",["T_WHITESPACE","\n            ",696],["T_COMMENT","#$this->rollback();\n",697],["T_WHITESPACE","            ",698],["T_THROW","throw",698],["T_WHITESPACE"," ",698],["T_VARIABLE","$e",698],";",["T_WHITESPACE","\n        ",698],"}",["T_WHITESPACE","\n\n        ",699],["T_VARIABLE","$this",701],["T_OBJECT_OPERATOR","->",701],["T_STRING","resetDdlCache",701],"(",")",";",["T_WHITESPACE","\n\n        ",701],["T_RETURN","return",703],["T_WHITESPACE"," ",703],["T_VARIABLE","$result",703],";",["T_WHITESPACE","\n    ",703],"}",["T_WHITESPACE","\n\n    ",704],["T_DOC_COMMENT","\/**\n     * Split multi statement query\n     *\n     * @param $sql string\n     * @return array\n     *\/",706],["T_WHITESPACE","\n    ",711],["T_PROTECTED","protected",712],["T_WHITESPACE"," ",712],["T_FUNCTION","function",712],["T_WHITESPACE"," ",712],["T_STRING","_splitMultiQuery",712],"(",["T_VARIABLE","$sql",712],")",["T_WHITESPACE","\n    ",712],"{",["T_WHITESPACE","\n        ",713],["T_VARIABLE","$parts",714],["T_WHITESPACE"," ",714],"=",["T_WHITESPACE"," ",714],["T_STRING","preg_split",714],"(",["T_CONSTANT_ENCAPSED_STRING","'#(;|\\'|\"|\\\\\\\\|\/\/|--|\\n|\/\\*|\\*\/)#'",714],",",["T_WHITESPACE"," ",714],["T_VARIABLE","$sql",714],",",["T_WHITESPACE"," ",714],["T_STRING","null",714],",",["T_WHITESPACE","\n            ",714],["T_STRING","PREG_SPLIT_NO_EMPTY",715],["T_WHITESPACE"," ",715],"|",["T_WHITESPACE"," ",715],["T_STRING","PREG_SPLIT_DELIM_CAPTURE",715],["T_WHITESPACE","\n        ",715],")",";",["T_WHITESPACE","\n\n        ",716],["T_VARIABLE","$q",718],["T_WHITESPACE","      ",718],"=",["T_WHITESPACE"," ",718],["T_STRING","false",718],";",["T_WHITESPACE","\n        ",718],["T_VARIABLE","$c",719],["T_WHITESPACE","      ",719],"=",["T_WHITESPACE"," ",719],["T_STRING","false",719],";",["T_WHITESPACE","\n        ",719],["T_VARIABLE","$stmts",720],["T_WHITESPACE","  ",720],"=",["T_WHITESPACE"," ",720],["T_ARRAY","array",720],"(",")",";",["T_WHITESPACE","\n        ",720],["T_VARIABLE","$s",721],["T_WHITESPACE","      ",721],"=",["T_WHITESPACE"," ",721],["T_CONSTANT_ENCAPSED_STRING","''",721],";",["T_WHITESPACE","\n\n        ",721],["T_FOREACH","foreach",723],["T_WHITESPACE"," ",723],"(",["T_VARIABLE","$parts",723],["T_WHITESPACE"," ",723],["T_AS","as",723],["T_WHITESPACE"," ",723],["T_VARIABLE","$i",723],["T_WHITESPACE"," ",723],["T_DOUBLE_ARROW","=>",723],["T_WHITESPACE"," ",723],["T_VARIABLE","$part",723],")",["T_WHITESPACE"," ",723],"{",["T_WHITESPACE","\n            ",723],["T_COMMENT","\/\/ strings\n",724],["T_WHITESPACE","            ",725],["T_IF","if",725],["T_WHITESPACE"," ",725],"(","(",["T_VARIABLE","$part",725],["T_WHITESPACE"," ",725],["T_IS_IDENTICAL","===",725],["T_WHITESPACE"," ",725],["T_CONSTANT_ENCAPSED_STRING","\"'\"",725],["T_WHITESPACE"," ",725],["T_BOOLEAN_OR","||",725],["T_WHITESPACE"," ",725],["T_VARIABLE","$part",725],["T_WHITESPACE"," ",725],["T_IS_IDENTICAL","===",725],["T_WHITESPACE"," ",725],["T_CONSTANT_ENCAPSED_STRING","'\"'",725],")",["T_WHITESPACE"," ",725],["T_BOOLEAN_AND","&&",725],["T_WHITESPACE"," ",725],"(",["T_VARIABLE","$i",725],["T_WHITESPACE"," ",725],["T_IS_IDENTICAL","===",725],["T_WHITESPACE"," ",725],["T_LNUMBER","0",725],["T_WHITESPACE"," ",725],["T_BOOLEAN_OR","||",725],["T_WHITESPACE"," ",725],["T_VARIABLE","$parts",725],"[",["T_VARIABLE","$i",725],"-",["T_LNUMBER","1",725],"]",["T_WHITESPACE"," ",725],["T_IS_NOT_IDENTICAL","!==",725],["T_WHITESPACE"," ",725],["T_CONSTANT_ENCAPSED_STRING","'\\\\'",725],")",")",["T_WHITESPACE"," ",725],"{",["T_WHITESPACE","\n                ",725],["T_IF","if",726],["T_WHITESPACE"," ",726],"(",["T_VARIABLE","$q",726],["T_WHITESPACE"," ",726],["T_IS_IDENTICAL","===",726],["T_WHITESPACE"," ",726],["T_STRING","false",726],")",["T_WHITESPACE"," ",726],"{",["T_WHITESPACE","\n                    ",726],["T_VARIABLE","$q",727],["T_WHITESPACE"," ",727],"=",["T_WHITESPACE"," ",727],["T_VARIABLE","$part",727],";",["T_WHITESPACE","\n                ",727],"}",["T_WHITESPACE"," ",728],["T_ELSEIF","elseif",728],["T_WHITESPACE"," ",728],"(",["T_VARIABLE","$q",728],["T_WHITESPACE"," ",728],["T_IS_IDENTICAL","===",728],["T_WHITESPACE"," ",728],["T_VARIABLE","$part",728],")",["T_WHITESPACE"," ",728],"{",["T_WHITESPACE","\n                    ",728],["T_VARIABLE","$q",729],["T_WHITESPACE"," ",729],"=",["T_WHITESPACE"," ",729],["T_STRING","false",729],";",["T_WHITESPACE","\n                ",729],"}",["T_WHITESPACE","\n            ",730],"}",["T_WHITESPACE","\n\n            ",731],["T_COMMENT","\/\/ single line comments\n",733],["T_WHITESPACE","            ",734],["T_IF","if",734],["T_WHITESPACE"," ",734],"(","(",["T_VARIABLE","$part",734],["T_WHITESPACE"," ",734],["T_IS_IDENTICAL","===",734],["T_WHITESPACE"," ",734],["T_CONSTANT_ENCAPSED_STRING","'\/\/'",734],["T_WHITESPACE"," ",734],["T_BOOLEAN_OR","||",734],["T_WHITESPACE"," ",734],["T_VARIABLE","$part",734],["T_WHITESPACE"," ",734],["T_IS_IDENTICAL","===",734],["T_WHITESPACE"," ",734],["T_CONSTANT_ENCAPSED_STRING","'--'",734],")",["T_WHITESPACE"," ",734],["T_BOOLEAN_AND","&&",734],["T_WHITESPACE"," ",734],"(",["T_VARIABLE","$i",734],["T_WHITESPACE"," ",734],["T_IS_IDENTICAL","===",734],["T_WHITESPACE"," ",734],["T_LNUMBER","0",734],["T_WHITESPACE"," ",734],["T_BOOLEAN_OR","||",734],["T_WHITESPACE"," ",734],["T_VARIABLE","$parts",734],"[",["T_VARIABLE","$i",734],"-",["T_LNUMBER","1",734],"]",["T_WHITESPACE"," ",734],["T_IS_IDENTICAL","===",734],["T_WHITESPACE"," ",734],["T_CONSTANT_ENCAPSED_STRING","\"\\n\"",734],")",")",["T_WHITESPACE"," ",734],"{",["T_WHITESPACE","\n                ",734],["T_VARIABLE","$c",735],["T_WHITESPACE"," ",735],"=",["T_WHITESPACE"," ",735],["T_VARIABLE","$part",735],";",["T_WHITESPACE","\n            ",735],"}",["T_WHITESPACE"," ",736],["T_ELSEIF","elseif",736],["T_WHITESPACE"," ",736],"(",["T_VARIABLE","$part",736],["T_WHITESPACE"," ",736],["T_IS_IDENTICAL","===",736],["T_WHITESPACE"," ",736],["T_CONSTANT_ENCAPSED_STRING","\"\\n\"",736],["T_WHITESPACE"," ",736],["T_BOOLEAN_AND","&&",736],["T_WHITESPACE"," ",736],"(",["T_VARIABLE","$c",736],["T_WHITESPACE"," ",736],["T_IS_IDENTICAL","===",736],["T_WHITESPACE"," ",736],["T_CONSTANT_ENCAPSED_STRING","'\/\/'",736],["T_WHITESPACE"," ",736],["T_BOOLEAN_OR","||",736],["T_WHITESPACE"," ",736],["T_VARIABLE","$c",736],["T_WHITESPACE"," ",736],["T_IS_IDENTICAL","===",736],["T_WHITESPACE"," ",736],["T_CONSTANT_ENCAPSED_STRING","'--'",736],")",")",["T_WHITESPACE"," ",736],"{",["T_WHITESPACE","\n                ",736],["T_VARIABLE","$c",737],["T_WHITESPACE"," ",737],"=",["T_WHITESPACE"," ",737],["T_STRING","false",737],";",["T_WHITESPACE","\n            ",737],"}",["T_WHITESPACE","\n\n            ",738],["T_COMMENT","\/\/ multi line comments\n",740],["T_WHITESPACE","            ",741],["T_IF","if",741],["T_WHITESPACE"," ",741],"(",["T_VARIABLE","$part",741],["T_WHITESPACE"," ",741],["T_IS_IDENTICAL","===",741],["T_WHITESPACE"," ",741],["T_CONSTANT_ENCAPSED_STRING","'\/*'",741],["T_WHITESPACE"," ",741],["T_BOOLEAN_AND","&&",741],["T_WHITESPACE"," ",741],["T_VARIABLE","$c",741],["T_WHITESPACE"," ",741],["T_IS_IDENTICAL","===",741],["T_WHITESPACE"," ",741],["T_STRING","false",741],")",["T_WHITESPACE"," ",741],"{",["T_WHITESPACE","\n                ",741],["T_VARIABLE","$c",742],["T_WHITESPACE"," ",742],"=",["T_WHITESPACE"," ",742],["T_CONSTANT_ENCAPSED_STRING","'\/*'",742],";",["T_WHITESPACE","\n            ",742],"}",["T_WHITESPACE"," ",743],["T_ELSEIF","elseif",743],["T_WHITESPACE"," ",743],"(",["T_VARIABLE","$part",743],["T_WHITESPACE"," ",743],["T_IS_IDENTICAL","===",743],["T_WHITESPACE"," ",743],["T_CONSTANT_ENCAPSED_STRING","'*\/'",743],["T_WHITESPACE"," ",743],["T_BOOLEAN_AND","&&",743],["T_WHITESPACE"," ",743],["T_VARIABLE","$c",743],["T_WHITESPACE"," ",743],["T_IS_IDENTICAL","===",743],["T_WHITESPACE"," ",743],["T_CONSTANT_ENCAPSED_STRING","'\/*'",743],")",["T_WHITESPACE"," ",743],"{",["T_WHITESPACE","\n                ",743],["T_VARIABLE","$c",744],["T_WHITESPACE"," ",744],"=",["T_WHITESPACE"," ",744],["T_STRING","false",744],";",["T_WHITESPACE","\n            ",744],"}",["T_WHITESPACE","\n\n            ",745],["T_COMMENT","\/\/ statements\n",747],["T_WHITESPACE","            ",748],["T_IF","if",748],["T_WHITESPACE"," ",748],"(",["T_VARIABLE","$part",748],["T_WHITESPACE"," ",748],["T_IS_IDENTICAL","===",748],["T_WHITESPACE"," ",748],["T_CONSTANT_ENCAPSED_STRING","';'",748],["T_WHITESPACE"," ",748],["T_BOOLEAN_AND","&&",748],["T_WHITESPACE"," ",748],["T_VARIABLE","$q",748],["T_WHITESPACE"," ",748],["T_IS_IDENTICAL","===",748],["T_WHITESPACE"," ",748],["T_STRING","false",748],["T_WHITESPACE"," ",748],["T_BOOLEAN_AND","&&",748],["T_WHITESPACE"," ",748],["T_VARIABLE","$c",748],["T_WHITESPACE"," ",748],["T_IS_IDENTICAL","===",748],["T_WHITESPACE"," ",748],["T_STRING","false",748],")",["T_WHITESPACE"," ",748],"{",["T_WHITESPACE","\n                ",748],["T_IF","if",749],["T_WHITESPACE"," ",749],"(",["T_STRING","trim",749],"(",["T_VARIABLE","$s",749],")",["T_IS_NOT_IDENTICAL","!==",749],["T_CONSTANT_ENCAPSED_STRING","''",749],")",["T_WHITESPACE"," ",749],"{",["T_WHITESPACE","\n                    ",749],["T_VARIABLE","$stmts",750],"[","]",["T_WHITESPACE"," ",750],"=",["T_WHITESPACE"," ",750],["T_STRING","trim",750],"(",["T_VARIABLE","$s",750],")",";",["T_WHITESPACE","\n                    ",750],["T_VARIABLE","$s",751],["T_WHITESPACE"," ",751],"=",["T_WHITESPACE"," ",751],["T_CONSTANT_ENCAPSED_STRING","''",751],";",["T_WHITESPACE","\n                ",751],"}",["T_WHITESPACE","\n            ",752],"}",["T_WHITESPACE"," ",753],["T_ELSE","else",753],["T_WHITESPACE"," ",753],"{",["T_WHITESPACE","\n                ",753],["T_VARIABLE","$s",754],["T_WHITESPACE"," ",754],["T_CONCAT_EQUAL",".=",754],["T_WHITESPACE"," ",754],["T_VARIABLE","$part",754],";",["T_WHITESPACE","\n            ",754],"}",["T_WHITESPACE","\n        ",755],"}",["T_WHITESPACE","\n        ",756],["T_IF","if",757],["T_WHITESPACE"," ",757],"(",["T_STRING","trim",757],"(",["T_VARIABLE","$s",757],")",["T_WHITESPACE"," ",757],["T_IS_NOT_IDENTICAL","!==",757],["T_WHITESPACE"," ",757],["T_CONSTANT_ENCAPSED_STRING","''",757],")",["T_WHITESPACE"," ",757],"{",["T_WHITESPACE","\n            ",757],["T_VARIABLE","$stmts",758],"[","]",["T_WHITESPACE"," ",758],"=",["T_WHITESPACE"," ",758],["T_STRING","trim",758],"(",["T_VARIABLE","$s",758],")",";",["T_WHITESPACE","\n        ",758],"}",["T_WHITESPACE","\n\n        ",759],["T_RETURN","return",761],["T_WHITESPACE"," ",761],["T_VARIABLE","$stmts",761],";",["T_WHITESPACE","\n    ",761],"}",["T_WHITESPACE","\n\n    ",762],["T_DOC_COMMENT","\/**\n     * Drop the Foreign Key from table\n     *\n     * @param string $tableName\n     * @param string $fkName\n     * @param string $schemaName\n     * @return Varien_Db_Adapter_Pdo_Mysql\n     *\/",764],["T_WHITESPACE","\n    ",771],["T_PUBLIC","public",772],["T_WHITESPACE"," ",772],["T_FUNCTION","function",772],["T_WHITESPACE"," ",772],["T_STRING","dropForeignKey",772],"(",["T_VARIABLE","$tableName",772],",",["T_WHITESPACE"," ",772],["T_VARIABLE","$fkName",772],",",["T_WHITESPACE"," ",772],["T_VARIABLE","$schemaName",772],["T_WHITESPACE"," ",772],"=",["T_WHITESPACE"," ",772],["T_STRING","null",772],")",["T_WHITESPACE","\n    ",772],"{",["T_WHITESPACE","\n        ",773],["T_VARIABLE","$foreignKeys",774],["T_WHITESPACE"," ",774],"=",["T_WHITESPACE"," ",774],["T_VARIABLE","$this",774],["T_OBJECT_OPERATOR","->",774],["T_STRING","getForeignKeys",774],"(",["T_VARIABLE","$tableName",774],",",["T_WHITESPACE"," ",774],["T_VARIABLE","$schemaName",774],")",";",["T_WHITESPACE","\n        ",774],["T_VARIABLE","$fkName",775],["T_WHITESPACE"," ",775],"=",["T_WHITESPACE"," ",775],["T_STRING","strtoupper",775],"(",["T_VARIABLE","$fkName",775],")",";",["T_WHITESPACE","\n        ",775],["T_IF","if",776],["T_WHITESPACE"," ",776],"(",["T_STRING","substr",776],"(",["T_VARIABLE","$fkName",776],",",["T_WHITESPACE"," ",776],["T_LNUMBER","0",776],",",["T_WHITESPACE"," ",776],["T_LNUMBER","3",776],")",["T_WHITESPACE"," ",776],["T_IS_EQUAL","==",776],["T_WHITESPACE"," ",776],["T_CONSTANT_ENCAPSED_STRING","'FK_'",776],")",["T_WHITESPACE"," ",776],"{",["T_WHITESPACE","\n            ",776],["T_VARIABLE","$fkName",777],["T_WHITESPACE"," ",777],"=",["T_WHITESPACE"," ",777],["T_STRING","substr",777],"(",["T_VARIABLE","$fkName",777],",",["T_WHITESPACE"," ",777],["T_LNUMBER","3",777],")",";",["T_WHITESPACE","\n        ",777],"}",["T_WHITESPACE","\n        ",778],["T_FOREACH","foreach",779],["T_WHITESPACE"," ",779],"(",["T_ARRAY","array",779],"(",["T_VARIABLE","$fkName",779],",",["T_WHITESPACE"," ",779],["T_CONSTANT_ENCAPSED_STRING","'FK_'",779],["T_WHITESPACE"," ",779],".",["T_WHITESPACE"," ",779],["T_VARIABLE","$fkName",779],")",["T_WHITESPACE"," ",779],["T_AS","as",779],["T_WHITESPACE"," ",779],["T_VARIABLE","$key",779],")",["T_WHITESPACE"," ",779],"{",["T_WHITESPACE","\n            ",779],["T_IF","if",780],["T_WHITESPACE"," ",780],"(",["T_ISSET","isset",780],"(",["T_VARIABLE","$foreignKeys",780],"[",["T_VARIABLE","$key",780],"]",")",")",["T_WHITESPACE"," ",780],"{",["T_WHITESPACE","\n                ",780],["T_VARIABLE","$sql",781],["T_WHITESPACE"," ",781],"=",["T_WHITESPACE"," ",781],["T_STRING","sprintf",781],"(",["T_CONSTANT_ENCAPSED_STRING","'ALTER TABLE %s DROP FOREIGN KEY %s'",781],",",["T_WHITESPACE","\n                    ",781],["T_VARIABLE","$this",782],["T_OBJECT_OPERATOR","->",782],["T_STRING","quoteIdentifier",782],"(",["T_VARIABLE","$this",782],["T_OBJECT_OPERATOR","->",782],["T_STRING","_getTableName",782],"(",["T_VARIABLE","$tableName",782],",",["T_WHITESPACE"," ",782],["T_VARIABLE","$schemaName",782],")",")",",",["T_WHITESPACE","\n                    ",782],["T_VARIABLE","$this",783],["T_OBJECT_OPERATOR","->",783],["T_STRING","quoteIdentifier",783],"(",["T_VARIABLE","$foreignKeys",783],"[",["T_VARIABLE","$key",783],"]","[",["T_CONSTANT_ENCAPSED_STRING","'FK_NAME'",783],"]",")",["T_WHITESPACE","\n                ",783],")",";",["T_WHITESPACE","\n                ",784],["T_VARIABLE","$this",785],["T_OBJECT_OPERATOR","->",785],["T_STRING","resetDdlCache",785],"(",["T_VARIABLE","$tableName",785],",",["T_WHITESPACE"," ",785],["T_VARIABLE","$schemaName",785],")",";",["T_WHITESPACE","\n                ",785],["T_VARIABLE","$this",786],["T_OBJECT_OPERATOR","->",786],["T_STRING","raw_query",786],"(",["T_VARIABLE","$sql",786],")",";",["T_WHITESPACE","\n            ",786],"}",["T_WHITESPACE","\n        ",787],"}",["T_WHITESPACE","\n        ",788],["T_RETURN","return",789],["T_WHITESPACE"," ",789],["T_VARIABLE","$this",789],";",["T_WHITESPACE","\n    ",789],"}",["T_WHITESPACE","\n\n    ",790],["T_DOC_COMMENT","\/**\n     * Delete index from a table if it exists\n     *\n     * @deprecated since 1.4.0.1\n     * @param string $tableName\n     * @param string $keyName\n     * @param string $schemaName\n     * @return bool|Zend_Db_Statement_Interface\n     *\/",792],["T_WHITESPACE","\n    ",800],["T_PUBLIC","public",801],["T_WHITESPACE"," ",801],["T_FUNCTION","function",801],["T_WHITESPACE"," ",801],["T_STRING","dropKey",801],"(",["T_VARIABLE","$tableName",801],",",["T_WHITESPACE"," ",801],["T_VARIABLE","$keyName",801],",",["T_WHITESPACE"," ",801],["T_VARIABLE","$schemaName",801],["T_WHITESPACE"," ",801],"=",["T_WHITESPACE"," ",801],["T_STRING","null",801],")",["T_WHITESPACE","\n    ",801],"{",["T_WHITESPACE","\n        ",802],["T_RETURN","return",803],["T_WHITESPACE"," ",803],["T_VARIABLE","$this",803],["T_OBJECT_OPERATOR","->",803],["T_STRING","dropIndex",803],"(",["T_VARIABLE","$tableName",803],",",["T_WHITESPACE"," ",803],["T_VARIABLE","$keyName",803],",",["T_WHITESPACE"," ",803],["T_VARIABLE","$schemaName",803],")",";",["T_WHITESPACE","\n    ",803],"}",["T_WHITESPACE","\n\n    ",804],["T_DOC_COMMENT","\/**\n     * Prepare table before add constraint foreign key\n     *\n     * @param string $tableName\n     * @param string $columnName\n     * @param string $refTableName\n     * @param string $refColumnName\n     * @param string $onDelete\n     * @return Varien_Db_Adapter_Pdo_Mysql\n     *\/",806],["T_WHITESPACE","\n    ",815],["T_PUBLIC","public",816],["T_WHITESPACE"," ",816],["T_FUNCTION","function",816],["T_WHITESPACE"," ",816],["T_STRING","purgeOrphanRecords",816],"(",["T_VARIABLE","$tableName",816],",",["T_WHITESPACE"," ",816],["T_VARIABLE","$columnName",816],",",["T_WHITESPACE"," ",816],["T_VARIABLE","$refTableName",816],",",["T_WHITESPACE"," ",816],["T_VARIABLE","$refColumnName",816],",",["T_WHITESPACE","\n                                       ",816],["T_VARIABLE","$onDelete",817],["T_WHITESPACE"," ",817],"=",["T_WHITESPACE"," ",817],["T_STRING","Varien_Db_Adapter_Interface",817],["T_DOUBLE_COLON","::",817],["T_STRING","FK_ACTION_CASCADE",817],")",["T_WHITESPACE","\n    ",817],"{",["T_WHITESPACE","\n        ",818],["T_VARIABLE","$onDelete",819],["T_WHITESPACE"," ",819],"=",["T_WHITESPACE"," ",819],["T_STRING","strtoupper",819],"(",["T_VARIABLE","$onDelete",819],")",";",["T_WHITESPACE","\n        ",819],["T_IF","if",820],["T_WHITESPACE"," ",820],"(",["T_VARIABLE","$onDelete",820],["T_WHITESPACE"," ",820],["T_IS_EQUAL","==",820],["T_WHITESPACE"," ",820],["T_STRING","Varien_Db_Adapter_Interface",820],["T_DOUBLE_COLON","::",820],["T_STRING","FK_ACTION_CASCADE",820],["T_WHITESPACE","\n            ",820],["T_BOOLEAN_OR","||",821],["T_WHITESPACE"," ",821],["T_VARIABLE","$onDelete",821],["T_WHITESPACE"," ",821],["T_IS_EQUAL","==",821],["T_WHITESPACE"," ",821],["T_STRING","Varien_Db_Adapter_Interface",821],["T_DOUBLE_COLON","::",821],["T_STRING","FK_ACTION_RESTRICT",821],["T_WHITESPACE","\n        ",821],")",["T_WHITESPACE"," ",822],"{",["T_WHITESPACE","\n            ",822],["T_VARIABLE","$sql",823],["T_WHITESPACE"," ",823],"=",["T_WHITESPACE"," ",823],["T_STRING","sprintf",823],"(",["T_CONSTANT_ENCAPSED_STRING","\"DELETE p.* FROM %s AS p LEFT JOIN %s AS r ON p.%s = r.%s WHERE r.%s IS NULL\"",823],",",["T_WHITESPACE","\n                ",823],["T_VARIABLE","$this",824],["T_OBJECT_OPERATOR","->",824],["T_STRING","quoteIdentifier",824],"(",["T_VARIABLE","$tableName",824],")",",",["T_WHITESPACE","\n                ",824],["T_VARIABLE","$this",825],["T_OBJECT_OPERATOR","->",825],["T_STRING","quoteIdentifier",825],"(",["T_VARIABLE","$refTableName",825],")",",",["T_WHITESPACE","\n                ",825],["T_VARIABLE","$this",826],["T_OBJECT_OPERATOR","->",826],["T_STRING","quoteIdentifier",826],"(",["T_VARIABLE","$columnName",826],")",",",["T_WHITESPACE","\n                ",826],["T_VARIABLE","$this",827],["T_OBJECT_OPERATOR","->",827],["T_STRING","quoteIdentifier",827],"(",["T_VARIABLE","$refColumnName",827],")",",",["T_WHITESPACE","\n                ",827],["T_VARIABLE","$this",828],["T_OBJECT_OPERATOR","->",828],["T_STRING","quoteIdentifier",828],"(",["T_VARIABLE","$refColumnName",828],")",")",";",["T_WHITESPACE","\n            ",828],["T_VARIABLE","$this",829],["T_OBJECT_OPERATOR","->",829],["T_STRING","raw_query",829],"(",["T_VARIABLE","$sql",829],")",";",["T_WHITESPACE","\n        ",829],"}",["T_WHITESPACE"," ",830],["T_ELSEIF","elseif",830],["T_WHITESPACE"," ",830],"(",["T_VARIABLE","$onDelete",830],["T_WHITESPACE"," ",830],["T_IS_EQUAL","==",830],["T_WHITESPACE"," ",830],["T_STRING","Varien_Db_Adapter_Interface",830],["T_DOUBLE_COLON","::",830],["T_STRING","FK_ACTION_SET_NULL",830],")",["T_WHITESPACE"," ",830],"{",["T_WHITESPACE","\n            ",830],["T_VARIABLE","$sql",831],["T_WHITESPACE"," ",831],"=",["T_WHITESPACE"," ",831],["T_STRING","sprintf",831],"(",["T_CONSTANT_ENCAPSED_STRING","\"UPDATE %s AS p LEFT JOIN %s AS r ON p.%s = r.%s SET p.%s = NULL WHERE r.%s IS NULL\"",831],",",["T_WHITESPACE","\n                ",831],["T_VARIABLE","$this",832],["T_OBJECT_OPERATOR","->",832],["T_STRING","quoteIdentifier",832],"(",["T_VARIABLE","$tableName",832],")",",",["T_WHITESPACE","\n                ",832],["T_VARIABLE","$this",833],["T_OBJECT_OPERATOR","->",833],["T_STRING","quoteIdentifier",833],"(",["T_VARIABLE","$refTableName",833],")",",",["T_WHITESPACE","\n                ",833],["T_VARIABLE","$this",834],["T_OBJECT_OPERATOR","->",834],["T_STRING","quoteIdentifier",834],"(",["T_VARIABLE","$columnName",834],")",",",["T_WHITESPACE","\n                ",834],["T_VARIABLE","$this",835],["T_OBJECT_OPERATOR","->",835],["T_STRING","quoteIdentifier",835],"(",["T_VARIABLE","$refColumnName",835],")",",",["T_WHITESPACE","\n                ",835],["T_VARIABLE","$this",836],["T_OBJECT_OPERATOR","->",836],["T_STRING","quoteIdentifier",836],"(",["T_VARIABLE","$columnName",836],")",",",["T_WHITESPACE","\n                ",836],["T_VARIABLE","$this",837],["T_OBJECT_OPERATOR","->",837],["T_STRING","quoteIdentifier",837],"(",["T_VARIABLE","$refColumnName",837],")",")",";",["T_WHITESPACE","\n            ",837],["T_VARIABLE","$this",838],["T_OBJECT_OPERATOR","->",838],["T_STRING","raw_query",838],"(",["T_VARIABLE","$sql",838],")",";",["T_WHITESPACE","\n        ",838],"}",["T_WHITESPACE","\n\n        ",839],["T_RETURN","return",841],["T_WHITESPACE"," ",841],["T_VARIABLE","$this",841],";",["T_WHITESPACE","\n    ",841],"}",["T_WHITESPACE","\n\n    ",842],["T_DOC_COMMENT","\/**\n     * Add foreign key to table. If FK with same name exist - it will be deleted\n     *\n     * @deprecated since 1.4.0.1\n     * @param string $fkName foreign key name\n     * @param string $tableName main table name\n     * @param string $keyName main table field name\n     * @param string $refTableName refered table name\n     * @param string $refKeyName refered table field name\n     * @param string $onUpdate on update statement\n     * @param string $onDelete on delete statement\n     * @param bool $purge\n     * @return mixed\n     *\/",844],["T_WHITESPACE","\n    ",857],["T_PUBLIC","public",858],["T_WHITESPACE"," ",858],["T_FUNCTION","function",858],["T_WHITESPACE"," ",858],["T_STRING","addConstraint",858],"(",["T_VARIABLE","$fkName",858],",",["T_WHITESPACE"," ",858],["T_VARIABLE","$tableName",858],",",["T_WHITESPACE"," ",858],["T_VARIABLE","$columnName",858],",",["T_WHITESPACE","\n        ",858],["T_VARIABLE","$refTableName",859],",",["T_WHITESPACE"," ",859],["T_VARIABLE","$refColumnName",859],",",["T_WHITESPACE"," ",859],["T_VARIABLE","$onDelete",859],["T_WHITESPACE"," ",859],"=",["T_WHITESPACE"," ",859],["T_STRING","Varien_Db_Adapter_Interface",859],["T_DOUBLE_COLON","::",859],["T_STRING","FK_ACTION_CASCADE",859],",",["T_WHITESPACE","\n        ",859],["T_VARIABLE","$onUpdate",860],["T_WHITESPACE"," ",860],"=",["T_WHITESPACE"," ",860],["T_STRING","Varien_Db_Adapter_Interface",860],["T_DOUBLE_COLON","::",860],["T_STRING","FK_ACTION_CASCADE",860],",",["T_WHITESPACE"," ",860],["T_VARIABLE","$purge",860],["T_WHITESPACE"," ",860],"=",["T_WHITESPACE"," ",860],["T_STRING","false",860],")",["T_WHITESPACE","\n    ",860],"{",["T_WHITESPACE","\n        ",861],["T_RETURN","return",862],["T_WHITESPACE"," ",862],["T_VARIABLE","$this",862],["T_OBJECT_OPERATOR","->",862],["T_STRING","addForeignKey",862],"(",["T_VARIABLE","$fkName",862],",",["T_WHITESPACE"," ",862],["T_VARIABLE","$tableName",862],",",["T_WHITESPACE"," ",862],["T_VARIABLE","$columnName",862],",",["T_WHITESPACE"," ",862],["T_VARIABLE","$refTableName",862],",",["T_WHITESPACE"," ",862],["T_VARIABLE","$refColumnName",862],",",["T_WHITESPACE","\n            ",862],["T_VARIABLE","$onDelete",863],",",["T_WHITESPACE"," ",863],["T_VARIABLE","$onUpdate",863],",",["T_WHITESPACE"," ",863],["T_VARIABLE","$purge",863],")",";",["T_WHITESPACE","\n    ",863],"}",["T_WHITESPACE","\n\n    ",864],["T_DOC_COMMENT","\/**\n     * Check does table column exist\n     *\n     * @param string $tableName\n     * @param string $columnName\n     * @param string $schemaName\n     * @return boolean\n     *\/",866],["T_WHITESPACE","\n    ",873],["T_PUBLIC","public",874],["T_WHITESPACE"," ",874],["T_FUNCTION","function",874],["T_WHITESPACE"," ",874],["T_STRING","tableColumnExists",874],"(",["T_VARIABLE","$tableName",874],",",["T_WHITESPACE"," ",874],["T_VARIABLE","$columnName",874],",",["T_WHITESPACE"," ",874],["T_VARIABLE","$schemaName",874],["T_WHITESPACE"," ",874],"=",["T_WHITESPACE"," ",874],["T_STRING","null",874],")",["T_WHITESPACE","\n    ",874],"{",["T_WHITESPACE","\n        ",875],["T_VARIABLE","$describe",876],["T_WHITESPACE"," ",876],"=",["T_WHITESPACE"," ",876],["T_VARIABLE","$this",876],["T_OBJECT_OPERATOR","->",876],["T_STRING","describeTable",876],"(",["T_VARIABLE","$tableName",876],",",["T_WHITESPACE"," ",876],["T_VARIABLE","$schemaName",876],")",";",["T_WHITESPACE","\n        ",876],["T_FOREACH","foreach",877],["T_WHITESPACE"," ",877],"(",["T_VARIABLE","$describe",877],["T_WHITESPACE"," ",877],["T_AS","as",877],["T_WHITESPACE"," ",877],["T_VARIABLE","$column",877],")",["T_WHITESPACE"," ",877],"{",["T_WHITESPACE","\n            ",877],["T_IF","if",878],["T_WHITESPACE"," ",878],"(",["T_VARIABLE","$column",878],"[",["T_CONSTANT_ENCAPSED_STRING","'COLUMN_NAME'",878],"]",["T_WHITESPACE"," ",878],["T_IS_EQUAL","==",878],["T_WHITESPACE"," ",878],["T_VARIABLE","$columnName",878],")",["T_WHITESPACE"," ",878],"{",["T_WHITESPACE","\n                ",878],["T_RETURN","return",879],["T_WHITESPACE"," ",879],["T_STRING","true",879],";",["T_WHITESPACE","\n            ",879],"}",["T_WHITESPACE","\n        ",880],"}",["T_WHITESPACE","\n        ",881],["T_RETURN","return",882],["T_WHITESPACE"," ",882],["T_STRING","false",882],";",["T_WHITESPACE","\n    ",882],"}",["T_WHITESPACE","\n\n    ",883],["T_DOC_COMMENT","\/**\n     * Adds new column to table.\n     *\n     * Generally $defintion must be array with column data to keep this call cross-DB compatible.\n     * Using string as $definition is allowed only for concrete DB adapter.\n     * Adds primary key if needed\n     *\n     * @param   string $tableName\n     * @param   string $columnName\n     * @param   array|string $definition  string specific or universal array DB Server definition\n     * @param   string $schemaName\n     * @return  int|boolean\n     * @throws  Zend_Db_Exception\n     *\/",885],["T_WHITESPACE","\n    ",898],["T_PUBLIC","public",899],["T_WHITESPACE"," ",899],["T_FUNCTION","function",899],["T_WHITESPACE"," ",899],["T_STRING","addColumn",899],"(",["T_VARIABLE","$tableName",899],",",["T_WHITESPACE"," ",899],["T_VARIABLE","$columnName",899],",",["T_WHITESPACE"," ",899],["T_VARIABLE","$definition",899],",",["T_WHITESPACE"," ",899],["T_VARIABLE","$schemaName",899],["T_WHITESPACE"," ",899],"=",["T_WHITESPACE"," ",899],["T_STRING","null",899],")",["T_WHITESPACE","\n    ",899],"{",["T_WHITESPACE","\n        ",900],["T_IF","if",901],["T_WHITESPACE"," ",901],"(",["T_VARIABLE","$this",901],["T_OBJECT_OPERATOR","->",901],["T_STRING","tableColumnExists",901],"(",["T_VARIABLE","$tableName",901],",",["T_WHITESPACE"," ",901],["T_VARIABLE","$columnName",901],",",["T_WHITESPACE"," ",901],["T_VARIABLE","$schemaName",901],")",")",["T_WHITESPACE"," ",901],"{",["T_WHITESPACE","\n            ",901],["T_RETURN","return",902],["T_WHITESPACE"," ",902],["T_STRING","true",902],";",["T_WHITESPACE","\n        ",902],"}",["T_WHITESPACE","\n\n        ",903],["T_VARIABLE","$primaryKey",905],["T_WHITESPACE"," ",905],"=",["T_WHITESPACE"," ",905],["T_CONSTANT_ENCAPSED_STRING","''",905],";",["T_WHITESPACE","\n        ",905],["T_IF","if",906],["T_WHITESPACE"," ",906],"(",["T_STRING","is_array",906],"(",["T_VARIABLE","$definition",906],")",")",["T_WHITESPACE"," ",906],"{",["T_WHITESPACE","\n            ",906],["T_VARIABLE","$definition",907],["T_WHITESPACE"," ",907],"=",["T_WHITESPACE"," ",907],["T_STRING","array_change_key_case",907],"(",["T_VARIABLE","$definition",907],",",["T_WHITESPACE"," ",907],["T_STRING","CASE_UPPER",907],")",";",["T_WHITESPACE","\n            ",907],["T_IF","if",908],["T_WHITESPACE"," ",908],"(",["T_EMPTY","empty",908],"(",["T_VARIABLE","$definition",908],"[",["T_CONSTANT_ENCAPSED_STRING","'COMMENT'",908],"]",")",")",["T_WHITESPACE"," ",908],"{",["T_WHITESPACE","\n                ",908],["T_THROW","throw",909],["T_WHITESPACE"," ",909],["T_NEW","new",909],["T_WHITESPACE"," ",909],["T_STRING","Zend_Db_Exception",909],"(",["T_CONSTANT_ENCAPSED_STRING","\"Impossible to create a column without comment.\"",909],")",";",["T_WHITESPACE","\n            ",909],"}",["T_WHITESPACE","\n            ",910],["T_IF","if",911],["T_WHITESPACE"," ",911],"(","!",["T_EMPTY","empty",911],"(",["T_VARIABLE","$definition",911],"[",["T_CONSTANT_ENCAPSED_STRING","'PRIMARY'",911],"]",")",")",["T_WHITESPACE"," ",911],"{",["T_WHITESPACE","\n                ",911],["T_VARIABLE","$primaryKey",912],["T_WHITESPACE"," ",912],"=",["T_WHITESPACE"," ",912],["T_STRING","sprintf",912],"(",["T_CONSTANT_ENCAPSED_STRING","', ADD PRIMARY KEY (%s)'",912],",",["T_WHITESPACE"," ",912],["T_VARIABLE","$this",912],["T_OBJECT_OPERATOR","->",912],["T_STRING","quoteIdentifier",912],"(",["T_VARIABLE","$columnName",912],")",")",";",["T_WHITESPACE","\n            ",912],"}",["T_WHITESPACE","\n            ",913],["T_VARIABLE","$definition",914],["T_WHITESPACE"," ",914],"=",["T_WHITESPACE"," ",914],["T_VARIABLE","$this",914],["T_OBJECT_OPERATOR","->",914],["T_STRING","_getColumnDefinition",914],"(",["T_VARIABLE","$definition",914],")",";",["T_WHITESPACE","\n        ",914],"}",["T_WHITESPACE","\n\n        ",915],["T_VARIABLE","$sql",917],["T_WHITESPACE"," ",917],"=",["T_WHITESPACE"," ",917],["T_STRING","sprintf",917],"(",["T_CONSTANT_ENCAPSED_STRING","'ALTER TABLE %s ADD COLUMN %s %s %s'",917],",",["T_WHITESPACE","\n            ",917],["T_VARIABLE","$this",918],["T_OBJECT_OPERATOR","->",918],["T_STRING","quoteIdentifier",918],"(",["T_VARIABLE","$this",918],["T_OBJECT_OPERATOR","->",918],["T_STRING","_getTableName",918],"(",["T_VARIABLE","$tableName",918],",",["T_WHITESPACE"," ",918],["T_VARIABLE","$schemaName",918],")",")",",",["T_WHITESPACE","\n            ",918],["T_VARIABLE","$this",919],["T_OBJECT_OPERATOR","->",919],["T_STRING","quoteIdentifier",919],"(",["T_VARIABLE","$columnName",919],")",",",["T_WHITESPACE","\n            ",919],["T_VARIABLE","$definition",920],",",["T_WHITESPACE","\n            ",920],["T_VARIABLE","$primaryKey",921],["T_WHITESPACE","\n        ",921],")",";",["T_WHITESPACE","\n\n        ",922],["T_VARIABLE","$result",924],["T_WHITESPACE"," ",924],"=",["T_WHITESPACE"," ",924],["T_VARIABLE","$this",924],["T_OBJECT_OPERATOR","->",924],["T_STRING","raw_query",924],"(",["T_VARIABLE","$sql",924],")",";",["T_WHITESPACE","\n\n        ",924],["T_VARIABLE","$this",926],["T_OBJECT_OPERATOR","->",926],["T_STRING","resetDdlCache",926],"(",["T_VARIABLE","$tableName",926],",",["T_WHITESPACE"," ",926],["T_VARIABLE","$schemaName",926],")",";",["T_WHITESPACE","\n\n        ",926],["T_RETURN","return",928],["T_WHITESPACE"," ",928],["T_VARIABLE","$result",928],";",["T_WHITESPACE","\n    ",928],"}",["T_WHITESPACE","\n\n    ",929],["T_DOC_COMMENT","\/**\n     * Delete table column\n     *\n     * @param string $tableName\n     * @param string $columnName\n     * @param string $schemaName\n     * @return bool\n     *\/",931],["T_WHITESPACE","\n    ",938],["T_PUBLIC","public",939],["T_WHITESPACE"," ",939],["T_FUNCTION","function",939],["T_WHITESPACE"," ",939],["T_STRING","dropColumn",939],"(",["T_VARIABLE","$tableName",939],",",["T_WHITESPACE"," ",939],["T_VARIABLE","$columnName",939],",",["T_WHITESPACE"," ",939],["T_VARIABLE","$schemaName",939],["T_WHITESPACE"," ",939],"=",["T_WHITESPACE"," ",939],["T_STRING","null",939],")",["T_WHITESPACE","\n    ",939],"{",["T_WHITESPACE","\n        ",940],["T_IF","if",941],["T_WHITESPACE"," ",941],"(","!",["T_VARIABLE","$this",941],["T_OBJECT_OPERATOR","->",941],["T_STRING","tableColumnExists",941],"(",["T_VARIABLE","$tableName",941],",",["T_WHITESPACE"," ",941],["T_VARIABLE","$columnName",941],",",["T_WHITESPACE"," ",941],["T_VARIABLE","$schemaName",941],")",")",["T_WHITESPACE"," ",941],"{",["T_WHITESPACE","\n            ",941],["T_RETURN","return",942],["T_WHITESPACE"," ",942],["T_STRING","true",942],";",["T_WHITESPACE","\n        ",942],"}",["T_WHITESPACE","\n\n        ",943],["T_VARIABLE","$alterDrop",945],["T_WHITESPACE"," ",945],"=",["T_WHITESPACE"," ",945],["T_ARRAY","array",945],"(",")",";",["T_WHITESPACE","\n\n        ",945],["T_VARIABLE","$foreignKeys",947],["T_WHITESPACE"," ",947],"=",["T_WHITESPACE"," ",947],["T_VARIABLE","$this",947],["T_OBJECT_OPERATOR","->",947],["T_STRING","getForeignKeys",947],"(",["T_VARIABLE","$tableName",947],",",["T_WHITESPACE"," ",947],["T_VARIABLE","$schemaName",947],")",";",["T_WHITESPACE","\n        ",947],["T_FOREACH","foreach",948],["T_WHITESPACE"," ",948],"(",["T_VARIABLE","$foreignKeys",948],["T_WHITESPACE"," ",948],["T_AS","as",948],["T_WHITESPACE"," ",948],["T_VARIABLE","$fkProp",948],")",["T_WHITESPACE"," ",948],"{",["T_WHITESPACE","\n            ",948],["T_IF","if",949],["T_WHITESPACE"," ",949],"(",["T_VARIABLE","$fkProp",949],"[",["T_CONSTANT_ENCAPSED_STRING","'COLUMN_NAME'",949],"]",["T_WHITESPACE"," ",949],["T_IS_EQUAL","==",949],["T_WHITESPACE"," ",949],["T_VARIABLE","$columnName",949],")",["T_WHITESPACE"," ",949],"{",["T_WHITESPACE","\n                ",949],["T_VARIABLE","$alterDrop",950],"[","]",["T_WHITESPACE"," ",950],"=",["T_WHITESPACE"," ",950],["T_CONSTANT_ENCAPSED_STRING","'DROP FOREIGN KEY '",950],["T_WHITESPACE"," ",950],".",["T_WHITESPACE"," ",950],["T_VARIABLE","$this",950],["T_OBJECT_OPERATOR","->",950],["T_STRING","quoteIdentifier",950],"(",["T_VARIABLE","$fkProp",950],"[",["T_CONSTANT_ENCAPSED_STRING","'FK_NAME'",950],"]",")",";",["T_WHITESPACE","\n            ",950],"}",["T_WHITESPACE","\n        ",951],"}",["T_WHITESPACE","\n\n        ",952],["T_VARIABLE","$alterDrop",954],"[","]",["T_WHITESPACE"," ",954],"=",["T_WHITESPACE"," ",954],["T_CONSTANT_ENCAPSED_STRING","'DROP COLUMN '",954],["T_WHITESPACE"," ",954],".",["T_WHITESPACE"," ",954],["T_VARIABLE","$this",954],["T_OBJECT_OPERATOR","->",954],["T_STRING","quoteIdentifier",954],"(",["T_VARIABLE","$columnName",954],")",";",["T_WHITESPACE","\n        ",954],["T_VARIABLE","$sql",955],["T_WHITESPACE"," ",955],"=",["T_WHITESPACE"," ",955],["T_STRING","sprintf",955],"(",["T_CONSTANT_ENCAPSED_STRING","'ALTER TABLE %s %s'",955],",",["T_WHITESPACE","\n            ",955],["T_VARIABLE","$this",956],["T_OBJECT_OPERATOR","->",956],["T_STRING","quoteIdentifier",956],"(",["T_VARIABLE","$this",956],["T_OBJECT_OPERATOR","->",956],["T_STRING","_getTableName",956],"(",["T_VARIABLE","$tableName",956],",",["T_WHITESPACE"," ",956],["T_VARIABLE","$schemaName",956],")",")",",",["T_WHITESPACE","\n            ",956],["T_STRING","implode",957],"(",["T_CONSTANT_ENCAPSED_STRING","', '",957],",",["T_WHITESPACE"," ",957],["T_VARIABLE","$alterDrop",957],")",")",";",["T_WHITESPACE","\n\n        ",957],["T_VARIABLE","$result",959],["T_WHITESPACE"," ",959],"=",["T_WHITESPACE"," ",959],["T_VARIABLE","$this",959],["T_OBJECT_OPERATOR","->",959],["T_STRING","raw_query",959],"(",["T_VARIABLE","$sql",959],")",";",["T_WHITESPACE","\n        ",959],["T_VARIABLE","$this",960],["T_OBJECT_OPERATOR","->",960],["T_STRING","resetDdlCache",960],"(",["T_VARIABLE","$tableName",960],",",["T_WHITESPACE"," ",960],["T_VARIABLE","$schemaName",960],")",";",["T_WHITESPACE","\n\n        ",960],["T_RETURN","return",962],["T_WHITESPACE"," ",962],["T_VARIABLE","$result",962],";",["T_WHITESPACE","\n    ",962],"}",["T_WHITESPACE","\n\n    ",963],["T_DOC_COMMENT","\/**\n     * Change the column name and definition\n     *\n     * For change definition of column - use modifyColumn\n     *\n     * @param string $tableName\n     * @param string $oldColumnName\n     * @param string $newColumnName\n     * @param array $definition\n     * @param boolean $flushData        flush table statistic\n     * @param string $schemaName\n     * @return Varien_Db_Adapter_Pdo_Mysql\n     * @throws Zend_Db_Exception\n     *\/",965],["T_WHITESPACE","\n    ",978],["T_PUBLIC","public",979],["T_WHITESPACE"," ",979],["T_FUNCTION","function",979],["T_WHITESPACE"," ",979],["T_STRING","changeColumn",979],"(",["T_VARIABLE","$tableName",979],",",["T_WHITESPACE"," ",979],["T_VARIABLE","$oldColumnName",979],",",["T_WHITESPACE"," ",979],["T_VARIABLE","$newColumnName",979],",",["T_WHITESPACE"," ",979],["T_VARIABLE","$definition",979],",",["T_WHITESPACE"," ",979],["T_VARIABLE","$flushData",979],["T_WHITESPACE"," ",979],"=",["T_WHITESPACE"," ",979],["T_STRING","false",979],",",["T_WHITESPACE","\n        ",979],["T_VARIABLE","$schemaName",980],["T_WHITESPACE"," ",980],"=",["T_WHITESPACE"," ",980],["T_STRING","null",980],")",["T_WHITESPACE","\n    ",980],"{",["T_WHITESPACE","\n        ",981],["T_IF","if",982],["T_WHITESPACE"," ",982],"(","!",["T_VARIABLE","$this",982],["T_OBJECT_OPERATOR","->",982],["T_STRING","tableColumnExists",982],"(",["T_VARIABLE","$tableName",982],",",["T_WHITESPACE"," ",982],["T_VARIABLE","$oldColumnName",982],",",["T_WHITESPACE"," ",982],["T_VARIABLE","$schemaName",982],")",")",["T_WHITESPACE"," ",982],"{",["T_WHITESPACE","\n            ",982],["T_THROW","throw",983],["T_WHITESPACE"," ",983],["T_NEW","new",983],["T_WHITESPACE"," ",983],["T_STRING","Zend_Db_Exception",983],"(",["T_STRING","sprintf",983],"(",["T_WHITESPACE","\n                ",983],["T_CONSTANT_ENCAPSED_STRING","'Column \"%s\" does not exist in table \"%s\".'",984],",",["T_WHITESPACE","\n                ",984],["T_VARIABLE","$oldColumnName",985],",",["T_WHITESPACE","\n                ",985],["T_VARIABLE","$tableName",986],["T_WHITESPACE","\n            ",986],")",")",";",["T_WHITESPACE","\n        ",987],"}",["T_WHITESPACE","\n\n        ",988],["T_IF","if",990],["T_WHITESPACE"," ",990],"(",["T_STRING","is_array",990],"(",["T_VARIABLE","$definition",990],")",")",["T_WHITESPACE"," ",990],"{",["T_WHITESPACE","\n            ",990],["T_VARIABLE","$definition",991],["T_WHITESPACE"," ",991],"=",["T_WHITESPACE"," ",991],["T_VARIABLE","$this",991],["T_OBJECT_OPERATOR","->",991],["T_STRING","_getColumnDefinition",991],"(",["T_VARIABLE","$definition",991],")",";",["T_WHITESPACE","\n        ",991],"}",["T_WHITESPACE","\n\n        ",992],["T_VARIABLE","$sql",994],["T_WHITESPACE"," ",994],"=",["T_WHITESPACE"," ",994],["T_STRING","sprintf",994],"(",["T_CONSTANT_ENCAPSED_STRING","'ALTER TABLE %s CHANGE COLUMN %s %s %s'",994],",",["T_WHITESPACE","\n            ",994],["T_VARIABLE","$this",995],["T_OBJECT_OPERATOR","->",995],["T_STRING","quoteIdentifier",995],"(",["T_VARIABLE","$tableName",995],")",",",["T_WHITESPACE","\n            ",995],["T_VARIABLE","$this",996],["T_OBJECT_OPERATOR","->",996],["T_STRING","quoteIdentifier",996],"(",["T_VARIABLE","$oldColumnName",996],")",",",["T_WHITESPACE","\n            ",996],["T_VARIABLE","$this",997],["T_OBJECT_OPERATOR","->",997],["T_STRING","quoteIdentifier",997],"(",["T_VARIABLE","$newColumnName",997],")",",",["T_WHITESPACE","\n            ",997],["T_VARIABLE","$definition",998],")",";",["T_WHITESPACE","\n\n        ",998],["T_VARIABLE","$result",1000],["T_WHITESPACE"," ",1000],"=",["T_WHITESPACE"," ",1000],["T_VARIABLE","$this",1000],["T_OBJECT_OPERATOR","->",1000],["T_STRING","raw_query",1000],"(",["T_VARIABLE","$sql",1000],")",";",["T_WHITESPACE","\n\n        ",1000],["T_IF","if",1002],["T_WHITESPACE"," ",1002],"(",["T_VARIABLE","$flushData",1002],")",["T_WHITESPACE"," ",1002],"{",["T_WHITESPACE","\n            ",1002],["T_VARIABLE","$this",1003],["T_OBJECT_OPERATOR","->",1003],["T_STRING","showTableStatus",1003],"(",["T_VARIABLE","$tableName",1003],",",["T_WHITESPACE"," ",1003],["T_VARIABLE","$schemaName",1003],")",";",["T_WHITESPACE","\n        ",1003],"}",["T_WHITESPACE","\n        ",1004],["T_VARIABLE","$this",1005],["T_OBJECT_OPERATOR","->",1005],["T_STRING","resetDdlCache",1005],"(",["T_VARIABLE","$tableName",1005],",",["T_WHITESPACE"," ",1005],["T_VARIABLE","$schemaName",1005],")",";",["T_WHITESPACE","\n\n        ",1005],["T_RETURN","return",1007],["T_WHITESPACE"," ",1007],["T_VARIABLE","$result",1007],";",["T_WHITESPACE","\n    ",1007],"}",["T_WHITESPACE","\n\n    ",1008],["T_DOC_COMMENT","\/**\n     * Modify the column definition\n     *\n     * @param string $tableName\n     * @param string $columnName\n     * @param array|string $definition\n     * @param boolean $flushData\n     * @param string $schemaName\n     * @return Varien_Db_Adapter_Pdo_Mysql\n     * @throws Zend_Db_Exception\n     *\/",1010],["T_WHITESPACE","\n    ",1020],["T_PUBLIC","public",1021],["T_WHITESPACE"," ",1021],["T_FUNCTION","function",1021],["T_WHITESPACE"," ",1021],["T_STRING","modifyColumn",1021],"(",["T_VARIABLE","$tableName",1021],",",["T_WHITESPACE"," ",1021],["T_VARIABLE","$columnName",1021],",",["T_WHITESPACE"," ",1021],["T_VARIABLE","$definition",1021],",",["T_WHITESPACE"," ",1021],["T_VARIABLE","$flushData",1021],["T_WHITESPACE"," ",1021],"=",["T_WHITESPACE"," ",1021],["T_STRING","false",1021],",",["T_WHITESPACE"," ",1021],["T_VARIABLE","$schemaName",1021],["T_WHITESPACE"," ",1021],"=",["T_WHITESPACE"," ",1021],["T_STRING","null",1021],")",["T_WHITESPACE","\n    ",1021],"{",["T_WHITESPACE","\n        ",1022],["T_IF","if",1023],["T_WHITESPACE"," ",1023],"(","!",["T_VARIABLE","$this",1023],["T_OBJECT_OPERATOR","->",1023],["T_STRING","tableColumnExists",1023],"(",["T_VARIABLE","$tableName",1023],",",["T_WHITESPACE"," ",1023],["T_VARIABLE","$columnName",1023],",",["T_WHITESPACE"," ",1023],["T_VARIABLE","$schemaName",1023],")",")",["T_WHITESPACE"," ",1023],"{",["T_WHITESPACE","\n            ",1023],["T_THROW","throw",1024],["T_WHITESPACE"," ",1024],["T_NEW","new",1024],["T_WHITESPACE"," ",1024],["T_STRING","Zend_Db_Exception",1024],"(",["T_STRING","sprintf",1024],"(",["T_CONSTANT_ENCAPSED_STRING","'Column \"%s\" does not exist in table \"%s\".'",1024],",",["T_WHITESPACE"," ",1024],["T_VARIABLE","$columnName",1024],",",["T_WHITESPACE"," ",1024],["T_VARIABLE","$tableName",1024],")",")",";",["T_WHITESPACE","\n        ",1024],"}",["T_WHITESPACE","\n        ",1025],["T_IF","if",1026],["T_WHITESPACE"," ",1026],"(",["T_STRING","is_array",1026],"(",["T_VARIABLE","$definition",1026],")",")",["T_WHITESPACE"," ",1026],"{",["T_WHITESPACE","\n            ",1026],["T_VARIABLE","$definition",1027],["T_WHITESPACE"," ",1027],"=",["T_WHITESPACE"," ",1027],["T_VARIABLE","$this",1027],["T_OBJECT_OPERATOR","->",1027],["T_STRING","_getColumnDefinition",1027],"(",["T_VARIABLE","$definition",1027],")",";",["T_WHITESPACE","\n        ",1027],"}",["T_WHITESPACE","\n\n        ",1028],["T_VARIABLE","$sql",1030],["T_WHITESPACE"," ",1030],"=",["T_WHITESPACE"," ",1030],["T_STRING","sprintf",1030],"(",["T_CONSTANT_ENCAPSED_STRING","'ALTER TABLE %s MODIFY COLUMN %s %s'",1030],",",["T_WHITESPACE","\n            ",1030],["T_VARIABLE","$this",1031],["T_OBJECT_OPERATOR","->",1031],["T_STRING","quoteIdentifier",1031],"(",["T_VARIABLE","$tableName",1031],")",",",["T_WHITESPACE","\n            ",1031],["T_VARIABLE","$this",1032],["T_OBJECT_OPERATOR","->",1032],["T_STRING","quoteIdentifier",1032],"(",["T_VARIABLE","$columnName",1032],")",",",["T_WHITESPACE","\n            ",1032],["T_VARIABLE","$definition",1033],")",";",["T_WHITESPACE","\n\n        ",1033],["T_VARIABLE","$this",1035],["T_OBJECT_OPERATOR","->",1035],["T_STRING","raw_query",1035],"(",["T_VARIABLE","$sql",1035],")",";",["T_WHITESPACE","\n        ",1035],["T_IF","if",1036],["T_WHITESPACE"," ",1036],"(",["T_VARIABLE","$flushData",1036],")",["T_WHITESPACE"," ",1036],"{",["T_WHITESPACE","\n            ",1036],["T_VARIABLE","$this",1037],["T_OBJECT_OPERATOR","->",1037],["T_STRING","showTableStatus",1037],"(",["T_VARIABLE","$tableName",1037],",",["T_WHITESPACE"," ",1037],["T_VARIABLE","$schemaName",1037],")",";",["T_WHITESPACE","\n        ",1037],"}",["T_WHITESPACE","\n        ",1038],["T_VARIABLE","$this",1039],["T_OBJECT_OPERATOR","->",1039],["T_STRING","resetDdlCache",1039],"(",["T_VARIABLE","$tableName",1039],",",["T_WHITESPACE"," ",1039],["T_VARIABLE","$schemaName",1039],")",";",["T_WHITESPACE","\n\n        ",1039],["T_RETURN","return",1041],["T_WHITESPACE"," ",1041],["T_VARIABLE","$this",1041],";",["T_WHITESPACE","\n    ",1041],"}",["T_WHITESPACE","\n\n    ",1042],["T_DOC_COMMENT","\/**\n     * Show table status\n     *\n     * @param string $tableName\n     * @param string $schemaName\n     * @return array|false\n     *\/",1044],["T_WHITESPACE","\n    ",1050],["T_PUBLIC","public",1051],["T_WHITESPACE"," ",1051],["T_FUNCTION","function",1051],["T_WHITESPACE"," ",1051],["T_STRING","showTableStatus",1051],"(",["T_VARIABLE","$tableName",1051],",",["T_WHITESPACE"," ",1051],["T_VARIABLE","$schemaName",1051],["T_WHITESPACE"," ",1051],"=",["T_WHITESPACE"," ",1051],["T_STRING","null",1051],")",["T_WHITESPACE","\n    ",1051],"{",["T_WHITESPACE","\n        ",1052],["T_VARIABLE","$fromDbName",1053],["T_WHITESPACE"," ",1053],"=",["T_WHITESPACE"," ",1053],["T_STRING","null",1053],";",["T_WHITESPACE","\n        ",1053],["T_IF","if",1054],["T_WHITESPACE"," ",1054],"(",["T_VARIABLE","$schemaName",1054],["T_WHITESPACE"," ",1054],["T_IS_NOT_IDENTICAL","!==",1054],["T_WHITESPACE"," ",1054],["T_STRING","null",1054],")",["T_WHITESPACE"," ",1054],"{",["T_WHITESPACE","\n            ",1054],["T_VARIABLE","$fromDbName",1055],["T_WHITESPACE"," ",1055],"=",["T_WHITESPACE"," ",1055],["T_CONSTANT_ENCAPSED_STRING","' FROM '",1055],["T_WHITESPACE"," ",1055],".",["T_WHITESPACE"," ",1055],["T_VARIABLE","$this",1055],["T_OBJECT_OPERATOR","->",1055],["T_STRING","quoteIdentifier",1055],"(",["T_VARIABLE","$schemaName",1055],")",";",["T_WHITESPACE","\n        ",1055],"}",["T_WHITESPACE","\n        ",1056],["T_VARIABLE","$query",1057],["T_WHITESPACE"," ",1057],"=",["T_WHITESPACE"," ",1057],["T_STRING","sprintf",1057],"(",["T_CONSTANT_ENCAPSED_STRING","'SHOW TABLE STATUS%s LIKE %s'",1057],",",["T_WHITESPACE"," ",1057],["T_VARIABLE","$fromDbName",1057],",",["T_WHITESPACE","  ",1057],["T_VARIABLE","$this",1057],["T_OBJECT_OPERATOR","->",1057],["T_STRING","quote",1057],"(",["T_VARIABLE","$tableName",1057],")",")",";",["T_WHITESPACE","\n\n        ",1057],["T_RETURN","return",1059],["T_WHITESPACE"," ",1059],["T_VARIABLE","$this",1059],["T_OBJECT_OPERATOR","->",1059],["T_STRING","raw_fetchRow",1059],"(",["T_VARIABLE","$query",1059],")",";",["T_WHITESPACE","\n    ",1059],"}",["T_WHITESPACE","\n\n    ",1060],["T_DOC_COMMENT","\/**\n     * Retrieve table index key list\n     *\n     * @deprecated use getIndexList(\n     * @param string $tableName\n     * @param string $schemaName\n     * @return array\n     *\/",1062],["T_WHITESPACE","\n    ",1069],["T_PUBLIC","public",1070],["T_WHITESPACE"," ",1070],["T_FUNCTION","function",1070],["T_WHITESPACE"," ",1070],["T_STRING","getKeyList",1070],"(",["T_VARIABLE","$tableName",1070],",",["T_WHITESPACE"," ",1070],["T_VARIABLE","$schemaName",1070],["T_WHITESPACE"," ",1070],"=",["T_WHITESPACE"," ",1070],["T_STRING","null",1070],")",["T_WHITESPACE","\n    ",1070],"{",["T_WHITESPACE","\n        ",1071],["T_VARIABLE","$keyList",1072],["T_WHITESPACE","   ",1072],"=",["T_WHITESPACE"," ",1072],["T_ARRAY","array",1072],"(",")",";",["T_WHITESPACE","\n        ",1072],["T_VARIABLE","$indexList",1073],["T_WHITESPACE"," ",1073],"=",["T_WHITESPACE"," ",1073],["T_VARIABLE","$this",1073],["T_OBJECT_OPERATOR","->",1073],["T_STRING","getIndexList",1073],"(",["T_VARIABLE","$tableName",1073],",",["T_WHITESPACE"," ",1073],["T_VARIABLE","$schemaName",1073],")",";",["T_WHITESPACE","\n\n        ",1073],["T_FOREACH","foreach",1075],["T_WHITESPACE"," ",1075],"(",["T_VARIABLE","$indexList",1075],["T_WHITESPACE"," ",1075],["T_AS","as",1075],["T_WHITESPACE"," ",1075],["T_VARIABLE","$indexProp",1075],")",["T_WHITESPACE"," ",1075],"{",["T_WHITESPACE","\n            ",1075],["T_VARIABLE","$keyList",1076],"[",["T_VARIABLE","$indexProp",1076],"[",["T_CONSTANT_ENCAPSED_STRING","'KEY_NAME'",1076],"]","]",["T_WHITESPACE"," ",1076],"=",["T_WHITESPACE"," ",1076],["T_VARIABLE","$indexProp",1076],"[",["T_CONSTANT_ENCAPSED_STRING","'COLUMNS_LIST'",1076],"]",";",["T_WHITESPACE","\n        ",1076],"}",["T_WHITESPACE","\n\n        ",1077],["T_RETURN","return",1079],["T_WHITESPACE"," ",1079],["T_VARIABLE","$keyList",1079],";",["T_WHITESPACE","\n    ",1079],"}",["T_WHITESPACE","\n\n    ",1080],["T_DOC_COMMENT","\/**\n     * Retrieve Create Table SQL\n     *\n     * @param string $tableName\n     * @param string $schemaName\n     * @return string\n     *\/",1082],["T_WHITESPACE","\n    ",1088],["T_PUBLIC","public",1089],["T_WHITESPACE"," ",1089],["T_FUNCTION","function",1089],["T_WHITESPACE"," ",1089],["T_STRING","getCreateTable",1089],"(",["T_VARIABLE","$tableName",1089],",",["T_WHITESPACE"," ",1089],["T_VARIABLE","$schemaName",1089],["T_WHITESPACE"," ",1089],"=",["T_WHITESPACE"," ",1089],["T_STRING","null",1089],")",["T_WHITESPACE","\n    ",1089],"{",["T_WHITESPACE","\n        ",1090],["T_VARIABLE","$cacheKey",1091],["T_WHITESPACE"," ",1091],"=",["T_WHITESPACE"," ",1091],["T_VARIABLE","$this",1091],["T_OBJECT_OPERATOR","->",1091],["T_STRING","_getTableName",1091],"(",["T_VARIABLE","$tableName",1091],",",["T_WHITESPACE"," ",1091],["T_VARIABLE","$schemaName",1091],")",";",["T_WHITESPACE","\n        ",1091],["T_VARIABLE","$ddl",1092],["T_WHITESPACE"," ",1092],"=",["T_WHITESPACE"," ",1092],["T_VARIABLE","$this",1092],["T_OBJECT_OPERATOR","->",1092],["T_STRING","loadDdlCache",1092],"(",["T_VARIABLE","$cacheKey",1092],",",["T_WHITESPACE"," ",1092],["T_STRING","self",1092],["T_DOUBLE_COLON","::",1092],["T_STRING","DDL_CREATE",1092],")",";",["T_WHITESPACE","\n        ",1092],["T_IF","if",1093],["T_WHITESPACE"," ",1093],"(",["T_VARIABLE","$ddl",1093],["T_WHITESPACE"," ",1093],["T_IS_IDENTICAL","===",1093],["T_WHITESPACE"," ",1093],["T_STRING","false",1093],")",["T_WHITESPACE"," ",1093],"{",["T_WHITESPACE","\n            ",1093],["T_VARIABLE","$sql",1094],["T_WHITESPACE"," ",1094],"=",["T_WHITESPACE"," ",1094],["T_CONSTANT_ENCAPSED_STRING","'SHOW CREATE TABLE '",1094],["T_WHITESPACE"," ",1094],".",["T_WHITESPACE"," ",1094],["T_VARIABLE","$this",1094],["T_OBJECT_OPERATOR","->",1094],["T_STRING","quoteIdentifier",1094],"(",["T_VARIABLE","$tableName",1094],")",";",["T_WHITESPACE","\n            ",1094],["T_VARIABLE","$ddl",1095],["T_WHITESPACE"," ",1095],"=",["T_WHITESPACE"," ",1095],["T_VARIABLE","$this",1095],["T_OBJECT_OPERATOR","->",1095],["T_STRING","raw_fetchRow",1095],"(",["T_VARIABLE","$sql",1095],",",["T_WHITESPACE"," ",1095],["T_CONSTANT_ENCAPSED_STRING","'Create Table'",1095],")",";",["T_WHITESPACE","\n            ",1095],["T_VARIABLE","$this",1096],["T_OBJECT_OPERATOR","->",1096],["T_STRING","saveDdlCache",1096],"(",["T_VARIABLE","$cacheKey",1096],",",["T_WHITESPACE"," ",1096],["T_STRING","self",1096],["T_DOUBLE_COLON","::",1096],["T_STRING","DDL_CREATE",1096],",",["T_WHITESPACE"," ",1096],["T_VARIABLE","$ddl",1096],")",";",["T_WHITESPACE","\n        ",1096],"}",["T_WHITESPACE","\n\n        ",1097],["T_RETURN","return",1099],["T_WHITESPACE"," ",1099],["T_VARIABLE","$ddl",1099],";",["T_WHITESPACE","\n    ",1099],"}",["T_WHITESPACE","\n\n    ",1100],["T_DOC_COMMENT","\/**\n     * Retrieve the foreign keys descriptions for a table.\n     *\n     * The return value is an associative array keyed by the UPPERCASE foreign key,\n     * as returned by the RDBMS.\n     *\n     * The value of each array element is an associative array\n     * with the following keys:\n     *\n     * FK_NAME          => string; original foreign key name\n     * SCHEMA_NAME      => string; name of database or schema\n     * TABLE_NAME       => string;\n     * COLUMN_NAME      => string; column name\n     * REF_SCHEMA_NAME  => string; name of reference database or schema\n     * REF_TABLE_NAME   => string; reference table name\n     * REF_COLUMN_NAME  => string; reference column name\n     * ON_DELETE        => string; action type on delete row\n     * ON_UPDATE        => string; action type on update row\n     *\n     * @param string $tableName\n     * @param string $schemaName\n     * @return array\n     *\/",1102],["T_WHITESPACE","\n    ",1124],["T_PUBLIC","public",1125],["T_WHITESPACE"," ",1125],["T_FUNCTION","function",1125],["T_WHITESPACE"," ",1125],["T_STRING","getForeignKeys",1125],"(",["T_VARIABLE","$tableName",1125],",",["T_WHITESPACE"," ",1125],["T_VARIABLE","$schemaName",1125],["T_WHITESPACE"," ",1125],"=",["T_WHITESPACE"," ",1125],["T_STRING","null",1125],")",["T_WHITESPACE","\n    ",1125],"{",["T_WHITESPACE","\n        ",1126],["T_VARIABLE","$cacheKey",1127],["T_WHITESPACE"," ",1127],"=",["T_WHITESPACE"," ",1127],["T_VARIABLE","$this",1127],["T_OBJECT_OPERATOR","->",1127],["T_STRING","_getTableName",1127],"(",["T_VARIABLE","$tableName",1127],",",["T_WHITESPACE"," ",1127],["T_VARIABLE","$schemaName",1127],")",";",["T_WHITESPACE","\n        ",1127],["T_VARIABLE","$ddl",1128],["T_WHITESPACE"," ",1128],"=",["T_WHITESPACE"," ",1128],["T_VARIABLE","$this",1128],["T_OBJECT_OPERATOR","->",1128],["T_STRING","loadDdlCache",1128],"(",["T_VARIABLE","$cacheKey",1128],",",["T_WHITESPACE"," ",1128],["T_STRING","self",1128],["T_DOUBLE_COLON","::",1128],["T_STRING","DDL_FOREIGN_KEY",1128],")",";",["T_WHITESPACE","\n        ",1128],["T_IF","if",1129],["T_WHITESPACE"," ",1129],"(",["T_VARIABLE","$ddl",1129],["T_WHITESPACE"," ",1129],["T_IS_IDENTICAL","===",1129],["T_WHITESPACE"," ",1129],["T_STRING","false",1129],")",["T_WHITESPACE"," ",1129],"{",["T_WHITESPACE","\n            ",1129],["T_VARIABLE","$ddl",1130],["T_WHITESPACE"," ",1130],"=",["T_WHITESPACE"," ",1130],["T_ARRAY","array",1130],"(",")",";",["T_WHITESPACE","\n            ",1130],["T_VARIABLE","$createSql",1131],["T_WHITESPACE"," ",1131],"=",["T_WHITESPACE"," ",1131],["T_VARIABLE","$this",1131],["T_OBJECT_OPERATOR","->",1131],["T_STRING","getCreateTable",1131],"(",["T_VARIABLE","$tableName",1131],",",["T_WHITESPACE"," ",1131],["T_VARIABLE","$schemaName",1131],")",";",["T_WHITESPACE","\n\n            ",1131],["T_COMMENT","\/\/ collect CONSTRAINT\n",1133],["T_WHITESPACE","            ",1134],["T_VARIABLE","$regExp",1134],["T_WHITESPACE","  ",1134],"=",["T_WHITESPACE"," ",1134],["T_CONSTANT_ENCAPSED_STRING","'#,\\s+CONSTRAINT `([^`]*)` FOREIGN KEY \\(`([^`]*)`\\) '",1134],["T_WHITESPACE","\n                ",1134],".",["T_WHITESPACE"," ",1135],["T_CONSTANT_ENCAPSED_STRING","'REFERENCES (`[^`]*\\.)?`([^`]*)` \\(`([^`]*)`\\)'",1135],["T_WHITESPACE","\n                ",1135],".",["T_WHITESPACE"," ",1136],["T_CONSTANT_ENCAPSED_STRING","'( ON DELETE (RESTRICT|CASCADE|SET NULL|NO ACTION))?'",1136],["T_WHITESPACE","\n                ",1136],".",["T_WHITESPACE"," ",1137],["T_CONSTANT_ENCAPSED_STRING","'( ON UPDATE (RESTRICT|CASCADE|SET NULL|NO ACTION))?#'",1137],";",["T_WHITESPACE","\n            ",1137],["T_VARIABLE","$matches",1138],["T_WHITESPACE"," ",1138],"=",["T_WHITESPACE"," ",1138],["T_ARRAY","array",1138],"(",")",";",["T_WHITESPACE","\n            ",1138],["T_STRING","preg_match_all",1139],"(",["T_VARIABLE","$regExp",1139],",",["T_WHITESPACE"," ",1139],["T_VARIABLE","$createSql",1139],",",["T_WHITESPACE"," ",1139],["T_VARIABLE","$matches",1139],",",["T_WHITESPACE"," ",1139],["T_STRING","PREG_SET_ORDER",1139],")",";",["T_WHITESPACE","\n            ",1139],["T_FOREACH","foreach",1140],["T_WHITESPACE"," ",1140],"(",["T_VARIABLE","$matches",1140],["T_WHITESPACE"," ",1140],["T_AS","as",1140],["T_WHITESPACE"," ",1140],["T_VARIABLE","$match",1140],")",["T_WHITESPACE"," ",1140],"{",["T_WHITESPACE","\n                ",1140],["T_VARIABLE","$ddl",1141],"[",["T_STRING","strtoupper",1141],"(",["T_VARIABLE","$match",1141],"[",["T_LNUMBER","1",1141],"]",")","]",["T_WHITESPACE"," ",1141],"=",["T_WHITESPACE"," ",1141],["T_ARRAY","array",1141],"(",["T_WHITESPACE","\n                    ",1141],["T_CONSTANT_ENCAPSED_STRING","'FK_NAME'",1142],["T_WHITESPACE","           ",1142],["T_DOUBLE_ARROW","=>",1142],["T_WHITESPACE"," ",1142],["T_VARIABLE","$match",1142],"[",["T_LNUMBER","1",1142],"]",",",["T_WHITESPACE","\n                    ",1142],["T_CONSTANT_ENCAPSED_STRING","'SCHEMA_NAME'",1143],["T_WHITESPACE","       ",1143],["T_DOUBLE_ARROW","=>",1143],["T_WHITESPACE"," ",1143],["T_VARIABLE","$schemaName",1143],",",["T_WHITESPACE","\n                    ",1143],["T_CONSTANT_ENCAPSED_STRING","'TABLE_NAME'",1144],["T_WHITESPACE","        ",1144],["T_DOUBLE_ARROW","=>",1144],["T_WHITESPACE"," ",1144],["T_VARIABLE","$tableName",1144],",",["T_WHITESPACE","\n                    ",1144],["T_CONSTANT_ENCAPSED_STRING","'COLUMN_NAME'",1145],["T_WHITESPACE","       ",1145],["T_DOUBLE_ARROW","=>",1145],["T_WHITESPACE"," ",1145],["T_VARIABLE","$match",1145],"[",["T_LNUMBER","2",1145],"]",",",["T_WHITESPACE","\n                    ",1145],["T_CONSTANT_ENCAPSED_STRING","'REF_SHEMA_NAME'",1146],["T_WHITESPACE","    ",1146],["T_DOUBLE_ARROW","=>",1146],["T_WHITESPACE"," ",1146],["T_ISSET","isset",1146],"(",["T_VARIABLE","$match",1146],"[",["T_LNUMBER","3",1146],"]",")",["T_WHITESPACE"," ",1146],"?",["T_WHITESPACE"," ",1146],["T_VARIABLE","$match",1146],"[",["T_LNUMBER","3",1146],"]",["T_WHITESPACE"," ",1146],":",["T_WHITESPACE"," ",1146],["T_VARIABLE","$schemaName",1146],",",["T_WHITESPACE","\n                    ",1146],["T_CONSTANT_ENCAPSED_STRING","'REF_TABLE_NAME'",1147],["T_WHITESPACE","    ",1147],["T_DOUBLE_ARROW","=>",1147],["T_WHITESPACE"," ",1147],["T_VARIABLE","$match",1147],"[",["T_LNUMBER","4",1147],"]",",",["T_WHITESPACE","\n                    ",1147],["T_CONSTANT_ENCAPSED_STRING","'REF_COLUMN_NAME'",1148],["T_WHITESPACE","   ",1148],["T_DOUBLE_ARROW","=>",1148],["T_WHITESPACE"," ",1148],["T_VARIABLE","$match",1148],"[",["T_LNUMBER","5",1148],"]",",",["T_WHITESPACE","\n                    ",1148],["T_CONSTANT_ENCAPSED_STRING","'ON_DELETE'",1149],["T_WHITESPACE","         ",1149],["T_DOUBLE_ARROW","=>",1149],["T_WHITESPACE"," ",1149],["T_ISSET","isset",1149],"(",["T_VARIABLE","$match",1149],"[",["T_LNUMBER","6",1149],"]",")",["T_WHITESPACE"," ",1149],"?",["T_WHITESPACE"," ",1149],["T_VARIABLE","$match",1149],"[",["T_LNUMBER","7",1149],"]",["T_WHITESPACE"," ",1149],":",["T_WHITESPACE"," ",1149],["T_CONSTANT_ENCAPSED_STRING","''",1149],",",["T_WHITESPACE","\n                    ",1149],["T_CONSTANT_ENCAPSED_STRING","'ON_UPDATE'",1150],["T_WHITESPACE","         ",1150],["T_DOUBLE_ARROW","=>",1150],["T_WHITESPACE"," ",1150],["T_ISSET","isset",1150],"(",["T_VARIABLE","$match",1150],"[",["T_LNUMBER","8",1150],"]",")",["T_WHITESPACE"," ",1150],"?",["T_WHITESPACE"," ",1150],["T_VARIABLE","$match",1150],"[",["T_LNUMBER","9",1150],"]",["T_WHITESPACE"," ",1150],":",["T_WHITESPACE"," ",1150],["T_CONSTANT_ENCAPSED_STRING","''",1150],["T_WHITESPACE","\n                ",1150],")",";",["T_WHITESPACE","\n            ",1151],"}",["T_WHITESPACE","\n\n            ",1152],["T_VARIABLE","$this",1154],["T_OBJECT_OPERATOR","->",1154],["T_STRING","saveDdlCache",1154],"(",["T_VARIABLE","$cacheKey",1154],",",["T_WHITESPACE"," ",1154],["T_STRING","self",1154],["T_DOUBLE_COLON","::",1154],["T_STRING","DDL_FOREIGN_KEY",1154],",",["T_WHITESPACE"," ",1154],["T_VARIABLE","$ddl",1154],")",";",["T_WHITESPACE","\n        ",1154],"}",["T_WHITESPACE","\n\n        ",1155],["T_RETURN","return",1157],["T_WHITESPACE"," ",1157],["T_VARIABLE","$ddl",1157],";",["T_WHITESPACE","\n    ",1157],"}",["T_WHITESPACE","\n\n    ",1158],["T_DOC_COMMENT","\/**\n     * Retrieve the foreign keys tree for all tables\n     *\n     * @return array\n     *\/",1160],["T_WHITESPACE","\n    ",1164],["T_PUBLIC","public",1165],["T_WHITESPACE"," ",1165],["T_FUNCTION","function",1165],["T_WHITESPACE"," ",1165],["T_STRING","getForeignKeysTree",1165],"(",")",["T_WHITESPACE","\n    ",1165],"{",["T_WHITESPACE","\n        ",1166],["T_VARIABLE","$tree",1167],["T_WHITESPACE"," ",1167],"=",["T_WHITESPACE"," ",1167],["T_ARRAY","array",1167],"(",")",";",["T_WHITESPACE","\n        ",1167],["T_FOREACH","foreach",1168],["T_WHITESPACE"," ",1168],"(",["T_VARIABLE","$this",1168],["T_OBJECT_OPERATOR","->",1168],["T_STRING","listTables",1168],"(",")",["T_WHITESPACE"," ",1168],["T_AS","as",1168],["T_WHITESPACE"," ",1168],["T_VARIABLE","$table",1168],")",["T_WHITESPACE"," ",1168],"{",["T_WHITESPACE","\n            ",1168],["T_FOREACH","foreach",1169],"(",["T_VARIABLE","$this",1169],["T_OBJECT_OPERATOR","->",1169],["T_STRING","getForeignKeys",1169],"(",["T_VARIABLE","$table",1169],")",["T_WHITESPACE"," ",1169],["T_AS","as",1169],["T_WHITESPACE"," ",1169],["T_VARIABLE","$key",1169],")",["T_WHITESPACE"," ",1169],"{",["T_WHITESPACE","\n                ",1169],["T_VARIABLE","$tree",1170],"[",["T_VARIABLE","$table",1170],"]","[",["T_VARIABLE","$key",1170],"[",["T_CONSTANT_ENCAPSED_STRING","'COLUMN_NAME'",1170],"]","]",["T_WHITESPACE"," ",1170],"=",["T_WHITESPACE"," ",1170],["T_VARIABLE","$key",1170],";",["T_WHITESPACE","\n            ",1170],"}",["T_WHITESPACE","\n        ",1171],"}",["T_WHITESPACE","\n\n        ",1172],["T_RETURN","return",1174],["T_WHITESPACE"," ",1174],["T_VARIABLE","$tree",1174],";",["T_WHITESPACE","\n    ",1174],"}",["T_WHITESPACE","\n\n    ",1175],["T_DOC_COMMENT","\/**\n     * Modify tables, used for upgrade process\n     * Change columns definitions, reset foreign keys, change tables comments and engines.\n     *\n     * The value of each array element is an associative array\n     * with the following keys:\n     *\n     * columns => array; list of columns definitions\n     * comment => string; table comment\n     * engine  => string; table engine\n     *\n     * @return Varien_Db_Adapter_Pdo_Mysql\n     *\/",1177],["T_WHITESPACE","\n    ",1189],["T_PUBLIC","public",1190],["T_WHITESPACE"," ",1190],["T_FUNCTION","function",1190],["T_WHITESPACE"," ",1190],["T_STRING","modifyTables",1190],"(",["T_VARIABLE","$tables",1190],")",["T_WHITESPACE","\n    ",1190],"{",["T_WHITESPACE","\n        ",1191],["T_VARIABLE","$foreignKeys",1192],["T_WHITESPACE"," ",1192],"=",["T_WHITESPACE"," ",1192],["T_VARIABLE","$this",1192],["T_OBJECT_OPERATOR","->",1192],["T_STRING","getForeignKeysTree",1192],"(",")",";",["T_WHITESPACE","\n        ",1192],["T_FOREACH","foreach",1193],["T_WHITESPACE"," ",1193],"(",["T_VARIABLE","$tables",1193],["T_WHITESPACE"," ",1193],["T_AS","as",1193],["T_WHITESPACE"," ",1193],["T_VARIABLE","$table",1193],["T_WHITESPACE"," ",1193],["T_DOUBLE_ARROW","=>",1193],["T_WHITESPACE"," ",1193],["T_VARIABLE","$tableData",1193],")",["T_WHITESPACE"," ",1193],"{",["T_WHITESPACE","\n            ",1193],["T_IF","if",1194],["T_WHITESPACE"," ",1194],"(","!",["T_VARIABLE","$this",1194],["T_OBJECT_OPERATOR","->",1194],["T_STRING","isTableExists",1194],"(",["T_VARIABLE","$table",1194],")",")",["T_WHITESPACE"," ",1194],"{",["T_WHITESPACE","\n                ",1194],["T_CONTINUE","continue",1195],";",["T_WHITESPACE","\n            ",1195],"}",["T_WHITESPACE","\n            ",1196],["T_FOREACH","foreach",1197],["T_WHITESPACE"," ",1197],"(",["T_VARIABLE","$tableData",1197],"[",["T_CONSTANT_ENCAPSED_STRING","'columns'",1197],"]",["T_WHITESPACE"," ",1197],["T_AS","as",1197],["T_WHITESPACE"," ",1197],["T_VARIABLE","$column",1197],["T_WHITESPACE"," ",1197],["T_DOUBLE_ARROW","=>",1197],["T_VARIABLE","$columnDefinition",1197],")",["T_WHITESPACE"," ",1197],"{",["T_WHITESPACE","\n                ",1197],["T_IF","if",1198],["T_WHITESPACE"," ",1198],"(","!",["T_VARIABLE","$this",1198],["T_OBJECT_OPERATOR","->",1198],["T_STRING","tableColumnExists",1198],"(",["T_VARIABLE","$table",1198],",",["T_WHITESPACE"," ",1198],["T_VARIABLE","$column",1198],")",")",["T_WHITESPACE"," ",1198],"{",["T_WHITESPACE","\n                    ",1198],["T_CONTINUE","continue",1199],";",["T_WHITESPACE","\n                ",1199],"}",["T_WHITESPACE","\n                ",1200],["T_VARIABLE","$droppedKeys",1201],["T_WHITESPACE"," ",1201],"=",["T_WHITESPACE"," ",1201],["T_ARRAY","array",1201],"(",")",";",["T_WHITESPACE","\n                ",1201],["T_FOREACH","foreach",1202],"(",["T_VARIABLE","$foreignKeys",1202],["T_WHITESPACE"," ",1202],["T_AS","as",1202],["T_WHITESPACE"," ",1202],["T_VARIABLE","$keyTable",1202],["T_WHITESPACE"," ",1202],["T_DOUBLE_ARROW","=>",1202],["T_WHITESPACE"," ",1202],["T_VARIABLE","$columns",1202],")",["T_WHITESPACE"," ",1202],"{",["T_WHITESPACE","\n                    ",1202],["T_FOREACH","foreach",1203],"(",["T_VARIABLE","$columns",1203],["T_WHITESPACE"," ",1203],["T_AS","as",1203],["T_WHITESPACE"," ",1203],["T_VARIABLE","$columnName",1203],["T_WHITESPACE"," ",1203],["T_DOUBLE_ARROW","=>",1203],["T_WHITESPACE"," ",1203],["T_VARIABLE","$keyOptions",1203],")",["T_WHITESPACE"," ",1203],"{",["T_WHITESPACE","\n                        ",1203],["T_IF","if",1204],["T_WHITESPACE"," ",1204],"(",["T_VARIABLE","$table",1204],["T_WHITESPACE"," ",1204],["T_IS_EQUAL","==",1204],["T_WHITESPACE"," ",1204],["T_VARIABLE","$keyOptions",1204],"[",["T_CONSTANT_ENCAPSED_STRING","'REF_TABLE_NAME'",1204],"]",["T_WHITESPACE"," ",1204],["T_BOOLEAN_AND","&&",1204],["T_WHITESPACE"," ",1204],["T_VARIABLE","$column",1204],["T_WHITESPACE"," ",1204],["T_IS_EQUAL","==",1204],["T_WHITESPACE"," ",1204],["T_VARIABLE","$keyOptions",1204],"[",["T_CONSTANT_ENCAPSED_STRING","'REF_COLUMN_NAME'",1204],"]",")",["T_WHITESPACE"," ",1204],"{",["T_WHITESPACE","\n                            ",1204],["T_VARIABLE","$this",1205],["T_OBJECT_OPERATOR","->",1205],["T_STRING","dropForeignKey",1205],"(",["T_VARIABLE","$keyTable",1205],",",["T_WHITESPACE"," ",1205],["T_VARIABLE","$keyOptions",1205],"[",["T_CONSTANT_ENCAPSED_STRING","'FK_NAME'",1205],"]",")",";",["T_WHITESPACE","\n                            ",1205],["T_VARIABLE","$droppedKeys",1206],"[","]",["T_WHITESPACE"," ",1206],"=",["T_WHITESPACE"," ",1206],["T_VARIABLE","$keyOptions",1206],";",["T_WHITESPACE","\n                        ",1206],"}",["T_WHITESPACE","\n                    ",1207],"}",["T_WHITESPACE","\n                ",1208],"}",["T_WHITESPACE","\n\n                ",1209],["T_VARIABLE","$this",1211],["T_OBJECT_OPERATOR","->",1211],["T_STRING","modifyColumn",1211],"(",["T_VARIABLE","$table",1211],",",["T_WHITESPACE"," ",1211],["T_VARIABLE","$column",1211],",",["T_WHITESPACE"," ",1211],["T_VARIABLE","$columnDefinition",1211],")",";",["T_WHITESPACE","\n\n                ",1211],["T_FOREACH","foreach",1213],["T_WHITESPACE"," ",1213],"(",["T_VARIABLE","$droppedKeys",1213],["T_WHITESPACE"," ",1213],["T_AS","as",1213],["T_WHITESPACE"," ",1213],["T_VARIABLE","$options",1213],")",["T_WHITESPACE"," ",1213],"{",["T_WHITESPACE","\n                    ",1213],["T_UNSET","unset",1214],"(",["T_VARIABLE","$columnDefinition",1214],"[",["T_CONSTANT_ENCAPSED_STRING","'identity'",1214],"]",",",["T_WHITESPACE"," ",1214],["T_VARIABLE","$columnDefinition",1214],"[",["T_CONSTANT_ENCAPSED_STRING","'primary'",1214],"]",",",["T_WHITESPACE"," ",1214],["T_VARIABLE","$columnDefinition",1214],"[",["T_CONSTANT_ENCAPSED_STRING","'comment'",1214],"]",")",";",["T_WHITESPACE","\n\n                    ",1214],["T_VARIABLE","$onDelete",1216],["T_WHITESPACE"," ",1216],"=",["T_WHITESPACE"," ",1216],["T_VARIABLE","$options",1216],"[",["T_CONSTANT_ENCAPSED_STRING","'ON_DELETE'",1216],"]",";",["T_WHITESPACE","\n                    ",1216],["T_VARIABLE","$onUpdate",1217],["T_WHITESPACE"," ",1217],"=",["T_WHITESPACE"," ",1217],["T_VARIABLE","$options",1217],"[",["T_CONSTANT_ENCAPSED_STRING","'ON_UPDATE'",1217],"]",";",["T_WHITESPACE","\n\n                    ",1217],["T_IF","if",1219],["T_WHITESPACE"," ",1219],"(",["T_VARIABLE","$onDelete",1219],["T_WHITESPACE"," ",1219],["T_IS_EQUAL","==",1219],["T_WHITESPACE"," ",1219],["T_STRING","Varien_Db_Adapter_Interface",1219],["T_DOUBLE_COLON","::",1219],["T_STRING","FK_ACTION_SET_NULL",1219],["T_WHITESPACE","\n                        ",1219],["T_BOOLEAN_OR","||",1220],["T_WHITESPACE"," ",1220],["T_VARIABLE","$onUpdate",1220],["T_WHITESPACE"," ",1220],["T_IS_EQUAL","==",1220],["T_WHITESPACE"," ",1220],["T_STRING","Varien_Db_Adapter_Interface",1220],["T_DOUBLE_COLON","::",1220],["T_STRING","FK_ACTION_SET_NULL",1220],")",["T_WHITESPACE"," ",1220],"{",["T_WHITESPACE","\n                           ",1220],["T_VARIABLE","$columnDefinition",1221],"[",["T_CONSTANT_ENCAPSED_STRING","'nullable'",1221],"]",["T_WHITESPACE"," ",1221],"=",["T_WHITESPACE"," ",1221],["T_STRING","true",1221],";",["T_WHITESPACE","\n                    ",1221],"}",["T_WHITESPACE","\n                    ",1222],["T_VARIABLE","$this",1223],["T_OBJECT_OPERATOR","->",1223],["T_STRING","modifyColumn",1223],"(",["T_VARIABLE","$options",1223],"[",["T_CONSTANT_ENCAPSED_STRING","'TABLE_NAME'",1223],"]",",",["T_WHITESPACE"," ",1223],["T_VARIABLE","$options",1223],"[",["T_CONSTANT_ENCAPSED_STRING","'COLUMN_NAME'",1223],"]",",",["T_WHITESPACE"," ",1223],["T_VARIABLE","$columnDefinition",1223],")",";",["T_WHITESPACE","\n                    ",1223],["T_VARIABLE","$this",1224],["T_OBJECT_OPERATOR","->",1224],["T_STRING","addForeignKey",1224],"(",["T_WHITESPACE","\n                        ",1224],["T_VARIABLE","$options",1225],"[",["T_CONSTANT_ENCAPSED_STRING","'FK_NAME'",1225],"]",",",["T_WHITESPACE","\n                        ",1225],["T_VARIABLE","$options",1226],"[",["T_CONSTANT_ENCAPSED_STRING","'TABLE_NAME'",1226],"]",",",["T_WHITESPACE","\n                        ",1226],["T_VARIABLE","$options",1227],"[",["T_CONSTANT_ENCAPSED_STRING","'COLUMN_NAME'",1227],"]",",",["T_WHITESPACE","\n                        ",1227],["T_VARIABLE","$options",1228],"[",["T_CONSTANT_ENCAPSED_STRING","'REF_TABLE_NAME'",1228],"]",",",["T_WHITESPACE","\n                        ",1228],["T_VARIABLE","$options",1229],"[",["T_CONSTANT_ENCAPSED_STRING","'REF_COLUMN_NAME'",1229],"]",",",["T_WHITESPACE","\n                        ",1229],"(",["T_VARIABLE","$onDelete",1230],")",["T_WHITESPACE"," ",1230],"?",["T_WHITESPACE"," ",1230],["T_VARIABLE","$onDelete",1230],["T_WHITESPACE"," ",1230],":",["T_WHITESPACE"," ",1230],["T_STRING","Varien_Db_Adapter_Interface",1230],["T_DOUBLE_COLON","::",1230],["T_STRING","FK_ACTION_NO_ACTION",1230],",",["T_WHITESPACE","\n                        ",1230],"(",["T_VARIABLE","$onUpdate",1231],")",["T_WHITESPACE"," ",1231],"?",["T_WHITESPACE"," ",1231],["T_VARIABLE","$onUpdate",1231],["T_WHITESPACE"," ",1231],":",["T_WHITESPACE"," ",1231],["T_STRING","Varien_Db_Adapter_Interface",1231],["T_DOUBLE_COLON","::",1231],["T_STRING","FK_ACTION_NO_ACTION",1231],["T_WHITESPACE","\n                    ",1231],")",";",["T_WHITESPACE","\n                ",1232],"}",["T_WHITESPACE","\n            ",1233],"}",["T_WHITESPACE","\n            ",1234],["T_IF","if",1235],["T_WHITESPACE"," ",1235],"(","!",["T_EMPTY","empty",1235],"(",["T_VARIABLE","$tableData",1235],"[",["T_CONSTANT_ENCAPSED_STRING","'comment'",1235],"]",")",")",["T_WHITESPACE"," ",1235],"{",["T_WHITESPACE","\n                ",1235],["T_VARIABLE","$this",1236],["T_OBJECT_OPERATOR","->",1236],["T_STRING","changeTableComment",1236],"(",["T_VARIABLE","$table",1236],",",["T_WHITESPACE"," ",1236],["T_VARIABLE","$tableData",1236],"[",["T_CONSTANT_ENCAPSED_STRING","'comment'",1236],"]",")",";",["T_WHITESPACE","\n            ",1236],"}",["T_WHITESPACE","\n            ",1237],["T_IF","if",1238],["T_WHITESPACE"," ",1238],"(","!",["T_EMPTY","empty",1238],"(",["T_VARIABLE","$tableData",1238],"[",["T_CONSTANT_ENCAPSED_STRING","'engine'",1238],"]",")",")",["T_WHITESPACE"," ",1238],"{",["T_WHITESPACE","\n                ",1238],["T_VARIABLE","$this",1239],["T_OBJECT_OPERATOR","->",1239],["T_STRING","changeTableEngine",1239],"(",["T_VARIABLE","$table",1239],",",["T_WHITESPACE"," ",1239],["T_VARIABLE","$tableData",1239],"[",["T_CONSTANT_ENCAPSED_STRING","'engine'",1239],"]",")",";",["T_WHITESPACE","\n            ",1239],"}",["T_WHITESPACE","\n        ",1240],"}",["T_WHITESPACE","\n\n        ",1241],["T_RETURN","return",1243],["T_WHITESPACE"," ",1243],["T_VARIABLE","$this",1243],";",["T_WHITESPACE","\n    ",1243],"}",["T_WHITESPACE","\n\n    ",1244],["T_DOC_COMMENT","\/**\n     * Retrieve table index information\n     *\n     * The return value is an associative array keyed by the UPPERCASE index key (except for primary key,\n     * that is always stored under 'PRIMARY' key) as returned by the RDBMS.\n     *\n     * The value of each array element is an associative array\n     * with the following keys:\n     *\n     * SCHEMA_NAME      => string; name of database or schema\n     * TABLE_NAME       => string; name of the table\n     * KEY_NAME         => string; the original index name\n     * COLUMNS_LIST     => array; array of index column names\n     * INDEX_TYPE       => string; lowercase, create index type\n     * INDEX_METHOD     => string; index method using\n     * type             => string; see INDEX_TYPE\n     * fields           => array; see COLUMNS_LIST\n     *\n     * @param string $tableName\n     * @param string $schemaName\n     * @return array\n     *\/",1246],["T_WHITESPACE","\n    ",1267],["T_PUBLIC","public",1268],["T_WHITESPACE"," ",1268],["T_FUNCTION","function",1268],["T_WHITESPACE"," ",1268],["T_STRING","getIndexList",1268],"(",["T_VARIABLE","$tableName",1268],",",["T_WHITESPACE"," ",1268],["T_VARIABLE","$schemaName",1268],["T_WHITESPACE"," ",1268],"=",["T_WHITESPACE"," ",1268],["T_STRING","null",1268],")",["T_WHITESPACE","\n    ",1268],"{",["T_WHITESPACE","\n        ",1269],["T_VARIABLE","$cacheKey",1270],["T_WHITESPACE"," ",1270],"=",["T_WHITESPACE"," ",1270],["T_VARIABLE","$this",1270],["T_OBJECT_OPERATOR","->",1270],["T_STRING","_getTableName",1270],"(",["T_VARIABLE","$tableName",1270],",",["T_WHITESPACE"," ",1270],["T_VARIABLE","$schemaName",1270],")",";",["T_WHITESPACE","\n        ",1270],["T_VARIABLE","$ddl",1271],["T_WHITESPACE"," ",1271],"=",["T_WHITESPACE"," ",1271],["T_VARIABLE","$this",1271],["T_OBJECT_OPERATOR","->",1271],["T_STRING","loadDdlCache",1271],"(",["T_VARIABLE","$cacheKey",1271],",",["T_WHITESPACE"," ",1271],["T_STRING","self",1271],["T_DOUBLE_COLON","::",1271],["T_STRING","DDL_INDEX",1271],")",";",["T_WHITESPACE","\n        ",1271],["T_IF","if",1272],["T_WHITESPACE"," ",1272],"(",["T_VARIABLE","$ddl",1272],["T_WHITESPACE"," ",1272],["T_IS_IDENTICAL","===",1272],["T_WHITESPACE"," ",1272],["T_STRING","false",1272],")",["T_WHITESPACE"," ",1272],"{",["T_WHITESPACE","\n            ",1272],["T_VARIABLE","$ddl",1273],["T_WHITESPACE"," ",1273],"=",["T_WHITESPACE"," ",1273],["T_ARRAY","array",1273],"(",")",";",["T_WHITESPACE","\n\n            ",1273],["T_VARIABLE","$sql",1275],["T_WHITESPACE"," ",1275],"=",["T_WHITESPACE"," ",1275],["T_STRING","sprintf",1275],"(",["T_CONSTANT_ENCAPSED_STRING","'SHOW INDEX FROM %s'",1275],",",["T_WHITESPACE","\n                ",1275],["T_VARIABLE","$this",1276],["T_OBJECT_OPERATOR","->",1276],["T_STRING","quoteIdentifier",1276],"(",["T_VARIABLE","$this",1276],["T_OBJECT_OPERATOR","->",1276],["T_STRING","_getTableName",1276],"(",["T_VARIABLE","$tableName",1276],",",["T_WHITESPACE"," ",1276],["T_VARIABLE","$schemaName",1276],")",")",")",";",["T_WHITESPACE","\n            ",1276],["T_FOREACH","foreach",1277],["T_WHITESPACE"," ",1277],"(",["T_VARIABLE","$this",1277],["T_OBJECT_OPERATOR","->",1277],["T_STRING","fetchAll",1277],"(",["T_VARIABLE","$sql",1277],")",["T_WHITESPACE"," ",1277],["T_AS","as",1277],["T_WHITESPACE"," ",1277],["T_VARIABLE","$row",1277],")",["T_WHITESPACE"," ",1277],"{",["T_WHITESPACE","\n                ",1277],["T_VARIABLE","$fieldKeyName",1278],["T_WHITESPACE","   ",1278],"=",["T_WHITESPACE"," ",1278],["T_CONSTANT_ENCAPSED_STRING","'Key_name'",1278],";",["T_WHITESPACE","\n                ",1278],["T_VARIABLE","$fieldNonUnique",1279],["T_WHITESPACE"," ",1279],"=",["T_WHITESPACE"," ",1279],["T_CONSTANT_ENCAPSED_STRING","'Non_unique'",1279],";",["T_WHITESPACE","\n                ",1279],["T_VARIABLE","$fieldColumn",1280],["T_WHITESPACE","    ",1280],"=",["T_WHITESPACE"," ",1280],["T_CONSTANT_ENCAPSED_STRING","'Column_name'",1280],";",["T_WHITESPACE","\n                ",1280],["T_VARIABLE","$fieldIndexType",1281],["T_WHITESPACE"," ",1281],"=",["T_WHITESPACE"," ",1281],["T_CONSTANT_ENCAPSED_STRING","'Index_type'",1281],";",["T_WHITESPACE","\n\n                ",1281],["T_IF","if",1283],["T_WHITESPACE"," ",1283],"(",["T_STRING","strtolower",1283],"(",["T_VARIABLE","$row",1283],"[",["T_VARIABLE","$fieldKeyName",1283],"]",")",["T_WHITESPACE"," ",1283],["T_IS_EQUAL","==",1283],["T_WHITESPACE"," ",1283],["T_STRING","Varien_Db_Adapter_Interface",1283],["T_DOUBLE_COLON","::",1283],["T_STRING","INDEX_TYPE_PRIMARY",1283],")",["T_WHITESPACE"," ",1283],"{",["T_WHITESPACE","\n                    ",1283],["T_VARIABLE","$indexType",1284],["T_WHITESPACE","  ",1284],"=",["T_WHITESPACE"," ",1284],["T_STRING","Varien_Db_Adapter_Interface",1284],["T_DOUBLE_COLON","::",1284],["T_STRING","INDEX_TYPE_PRIMARY",1284],";",["T_WHITESPACE","\n                ",1284],"}",["T_WHITESPACE"," ",1285],["T_ELSEIF","elseif",1285],["T_WHITESPACE"," ",1285],"(",["T_VARIABLE","$row",1285],"[",["T_VARIABLE","$fieldNonUnique",1285],"]",["T_WHITESPACE"," ",1285],["T_IS_EQUAL","==",1285],["T_WHITESPACE"," ",1285],["T_LNUMBER","0",1285],")",["T_WHITESPACE"," ",1285],"{",["T_WHITESPACE","\n                    ",1285],["T_VARIABLE","$indexType",1286],["T_WHITESPACE","  ",1286],"=",["T_WHITESPACE"," ",1286],["T_STRING","Varien_Db_Adapter_Interface",1286],["T_DOUBLE_COLON","::",1286],["T_STRING","INDEX_TYPE_UNIQUE",1286],";",["T_WHITESPACE","\n                ",1286],"}",["T_WHITESPACE"," ",1287],["T_ELSEIF","elseif",1287],["T_WHITESPACE"," ",1287],"(",["T_STRING","strtolower",1287],"(",["T_VARIABLE","$row",1287],"[",["T_VARIABLE","$fieldIndexType",1287],"]",")",["T_WHITESPACE"," ",1287],["T_IS_EQUAL","==",1287],["T_WHITESPACE"," ",1287],["T_STRING","Varien_Db_Adapter_Interface",1287],["T_DOUBLE_COLON","::",1287],["T_STRING","INDEX_TYPE_FULLTEXT",1287],")",["T_WHITESPACE"," ",1287],"{",["T_WHITESPACE","\n                    ",1287],["T_VARIABLE","$indexType",1288],["T_WHITESPACE","  ",1288],"=",["T_WHITESPACE"," ",1288],["T_STRING","Varien_Db_Adapter_Interface",1288],["T_DOUBLE_COLON","::",1288],["T_STRING","INDEX_TYPE_FULLTEXT",1288],";",["T_WHITESPACE","\n                ",1288],"}",["T_WHITESPACE"," ",1289],["T_ELSE","else",1289],["T_WHITESPACE"," ",1289],"{",["T_WHITESPACE","\n                    ",1289],["T_VARIABLE","$indexType",1290],["T_WHITESPACE","  ",1290],"=",["T_WHITESPACE"," ",1290],["T_STRING","Varien_Db_Adapter_Interface",1290],["T_DOUBLE_COLON","::",1290],["T_STRING","INDEX_TYPE_INDEX",1290],";",["T_WHITESPACE","\n                ",1290],"}",["T_WHITESPACE","\n\n                ",1291],["T_VARIABLE","$upperKeyName",1293],["T_WHITESPACE"," ",1293],"=",["T_WHITESPACE"," ",1293],["T_STRING","strtoupper",1293],"(",["T_VARIABLE","$row",1293],"[",["T_VARIABLE","$fieldKeyName",1293],"]",")",";",["T_WHITESPACE","\n                ",1293],["T_IF","if",1294],["T_WHITESPACE"," ",1294],"(",["T_ISSET","isset",1294],"(",["T_VARIABLE","$ddl",1294],"[",["T_VARIABLE","$upperKeyName",1294],"]",")",")",["T_WHITESPACE"," ",1294],"{",["T_WHITESPACE","\n                    ",1294],["T_VARIABLE","$ddl",1295],"[",["T_VARIABLE","$upperKeyName",1295],"]","[",["T_CONSTANT_ENCAPSED_STRING","'fields'",1295],"]","[","]",["T_WHITESPACE"," ",1295],"=",["T_WHITESPACE"," ",1295],["T_VARIABLE","$row",1295],"[",["T_VARIABLE","$fieldColumn",1295],"]",";",["T_WHITESPACE"," ",1295],["T_COMMENT","\/\/ for compatible\n",1295],["T_WHITESPACE","                    ",1296],["T_VARIABLE","$ddl",1296],"[",["T_VARIABLE","$upperKeyName",1296],"]","[",["T_CONSTANT_ENCAPSED_STRING","'COLUMNS_LIST'",1296],"]","[","]",["T_WHITESPACE"," ",1296],"=",["T_WHITESPACE"," ",1296],["T_VARIABLE","$row",1296],"[",["T_VARIABLE","$fieldColumn",1296],"]",";",["T_WHITESPACE","\n                ",1296],"}",["T_WHITESPACE"," ",1297],["T_ELSE","else",1297],["T_WHITESPACE"," ",1297],"{",["T_WHITESPACE","\n                    ",1297],["T_VARIABLE","$ddl",1298],"[",["T_VARIABLE","$upperKeyName",1298],"]",["T_WHITESPACE"," ",1298],"=",["T_WHITESPACE"," ",1298],["T_ARRAY","array",1298],"(",["T_WHITESPACE","\n                        ",1298],["T_CONSTANT_ENCAPSED_STRING","'SCHEMA_NAME'",1299],["T_WHITESPACE","   ",1299],["T_DOUBLE_ARROW","=>",1299],["T_WHITESPACE"," ",1299],["T_VARIABLE","$schemaName",1299],",",["T_WHITESPACE","\n                        ",1299],["T_CONSTANT_ENCAPSED_STRING","'TABLE_NAME'",1300],["T_WHITESPACE","    ",1300],["T_DOUBLE_ARROW","=>",1300],["T_WHITESPACE"," ",1300],["T_VARIABLE","$tableName",1300],",",["T_WHITESPACE","\n                        ",1300],["T_CONSTANT_ENCAPSED_STRING","'KEY_NAME'",1301],["T_WHITESPACE","      ",1301],["T_DOUBLE_ARROW","=>",1301],["T_WHITESPACE"," ",1301],["T_VARIABLE","$row",1301],"[",["T_VARIABLE","$fieldKeyName",1301],"]",",",["T_WHITESPACE","\n                        ",1301],["T_CONSTANT_ENCAPSED_STRING","'COLUMNS_LIST'",1302],["T_WHITESPACE","  ",1302],["T_DOUBLE_ARROW","=>",1302],["T_WHITESPACE"," ",1302],["T_ARRAY","array",1302],"(",["T_VARIABLE","$row",1302],"[",["T_VARIABLE","$fieldColumn",1302],"]",")",",",["T_WHITESPACE","\n                        ",1302],["T_CONSTANT_ENCAPSED_STRING","'INDEX_TYPE'",1303],["T_WHITESPACE","    ",1303],["T_DOUBLE_ARROW","=>",1303],["T_WHITESPACE"," ",1303],["T_VARIABLE","$indexType",1303],",",["T_WHITESPACE","\n                        ",1303],["T_CONSTANT_ENCAPSED_STRING","'INDEX_METHOD'",1304],["T_WHITESPACE","  ",1304],["T_DOUBLE_ARROW","=>",1304],["T_WHITESPACE"," ",1304],["T_VARIABLE","$row",1304],"[",["T_VARIABLE","$fieldIndexType",1304],"]",",",["T_WHITESPACE","\n                        ",1304],["T_CONSTANT_ENCAPSED_STRING","'type'",1305],["T_WHITESPACE","          ",1305],["T_DOUBLE_ARROW","=>",1305],["T_WHITESPACE"," ",1305],["T_STRING","strtolower",1305],"(",["T_VARIABLE","$indexType",1305],")",",",["T_WHITESPACE"," ",1305],["T_COMMENT","\/\/ for compatibility\n",1305],["T_WHITESPACE","                        ",1306],["T_CONSTANT_ENCAPSED_STRING","'fields'",1306],["T_WHITESPACE","        ",1306],["T_DOUBLE_ARROW","=>",1306],["T_WHITESPACE"," ",1306],["T_ARRAY","array",1306],"(",["T_VARIABLE","$row",1306],"[",["T_VARIABLE","$fieldColumn",1306],"]",")",["T_WHITESPACE"," ",1306],["T_COMMENT","\/\/ for compatibility\n",1306],["T_WHITESPACE","                    ",1307],")",";",["T_WHITESPACE","\n                ",1307],"}",["T_WHITESPACE","\n            ",1308],"}",["T_WHITESPACE","\n            ",1309],["T_VARIABLE","$this",1310],["T_OBJECT_OPERATOR","->",1310],["T_STRING","saveDdlCache",1310],"(",["T_VARIABLE","$cacheKey",1310],",",["T_WHITESPACE"," ",1310],["T_STRING","self",1310],["T_DOUBLE_COLON","::",1310],["T_STRING","DDL_INDEX",1310],",",["T_WHITESPACE"," ",1310],["T_VARIABLE","$ddl",1310],")",";",["T_WHITESPACE","\n        ",1310],"}",["T_WHITESPACE","\n\n        ",1311],["T_RETURN","return",1313],["T_WHITESPACE"," ",1313],["T_VARIABLE","$ddl",1313],";",["T_WHITESPACE","\n    ",1313],"}",["T_WHITESPACE","\n\n    ",1314],["T_DOC_COMMENT","\/**\n     * Add Index Key\n     *\n     * @deprecated since 1.5.0.0\n     * @param string $tableName\n     * @param string $indexName\n     * @param string|array $fields\n     * @param string $indexType\n     * @param string $schemaName\n     * @return Zend_Db_Statement_Interface\n     *\/",1316],["T_WHITESPACE","\n    ",1326],["T_PUBLIC","public",1327],["T_WHITESPACE"," ",1327],["T_FUNCTION","function",1327],["T_WHITESPACE"," ",1327],["T_STRING","addKey",1327],"(",["T_VARIABLE","$tableName",1327],",",["T_WHITESPACE"," ",1327],["T_VARIABLE","$indexName",1327],",",["T_WHITESPACE"," ",1327],["T_VARIABLE","$fields",1327],",",["T_WHITESPACE"," ",1327],["T_VARIABLE","$indexType",1327],["T_WHITESPACE"," ",1327],"=",["T_WHITESPACE"," ",1327],["T_CONSTANT_ENCAPSED_STRING","'index'",1327],",",["T_WHITESPACE"," ",1327],["T_VARIABLE","$schemaName",1327],["T_WHITESPACE"," ",1327],"=",["T_WHITESPACE"," ",1327],["T_STRING","null",1327],")",["T_WHITESPACE","\n    ",1327],"{",["T_WHITESPACE","\n        ",1328],["T_RETURN","return",1329],["T_WHITESPACE"," ",1329],["T_VARIABLE","$this",1329],["T_OBJECT_OPERATOR","->",1329],["T_STRING","addIndex",1329],"(",["T_VARIABLE","$tableName",1329],",",["T_WHITESPACE"," ",1329],["T_VARIABLE","$indexName",1329],",",["T_WHITESPACE"," ",1329],["T_VARIABLE","$fields",1329],",",["T_WHITESPACE"," ",1329],["T_VARIABLE","$indexType",1329],",",["T_WHITESPACE"," ",1329],["T_VARIABLE","$schemaName",1329],")",";",["T_WHITESPACE","\n    ",1329],"}",["T_WHITESPACE","\n\n    ",1330],["T_DOC_COMMENT","\/**\n     * Remove duplicate entry for create key\n     *\n     * @param string $table\n     * @param array $fields\n     * @param array $ids\n     * @return Varien_Db_Adapter_Pdo_Mysql\n     *\/",1332],["T_WHITESPACE","\n    ",1339],["T_PROTECTED","protected",1340],["T_WHITESPACE"," ",1340],["T_FUNCTION","function",1340],["T_WHITESPACE"," ",1340],["T_STRING","_removeDuplicateEntry",1340],"(",["T_VARIABLE","$table",1340],",",["T_WHITESPACE"," ",1340],["T_VARIABLE","$fields",1340],",",["T_WHITESPACE"," ",1340],["T_VARIABLE","$ids",1340],")",["T_WHITESPACE","\n    ",1340],"{",["T_WHITESPACE","\n        ",1341],["T_VARIABLE","$where",1342],["T_WHITESPACE"," ",1342],"=",["T_WHITESPACE"," ",1342],["T_ARRAY","array",1342],"(",")",";",["T_WHITESPACE","\n        ",1342],["T_VARIABLE","$i",1343],["T_WHITESPACE"," ",1343],"=",["T_WHITESPACE"," ",1343],["T_LNUMBER","0",1343],";",["T_WHITESPACE","\n        ",1343],["T_FOREACH","foreach",1344],["T_WHITESPACE"," ",1344],"(",["T_VARIABLE","$fields",1344],["T_WHITESPACE"," ",1344],["T_AS","as",1344],["T_WHITESPACE"," ",1344],["T_VARIABLE","$field",1344],")",["T_WHITESPACE"," ",1344],"{",["T_WHITESPACE","\n            ",1344],["T_VARIABLE","$where",1345],"[","]",["T_WHITESPACE"," ",1345],"=",["T_WHITESPACE"," ",1345],["T_VARIABLE","$this",1345],["T_OBJECT_OPERATOR","->",1345],["T_STRING","quoteInto",1345],"(",["T_VARIABLE","$field",1345],["T_WHITESPACE"," ",1345],".",["T_WHITESPACE"," ",1345],["T_CONSTANT_ENCAPSED_STRING","'=?'",1345],",",["T_WHITESPACE"," ",1345],["T_VARIABLE","$ids",1345],"[",["T_VARIABLE","$i",1345],["T_INC","++",1345],"]",")",";",["T_WHITESPACE","\n        ",1345],"}",["T_WHITESPACE","\n\n        ",1346],["T_IF","if",1348],["T_WHITESPACE"," ",1348],"(","!",["T_VARIABLE","$where",1348],")",["T_WHITESPACE"," ",1348],"{",["T_WHITESPACE","\n            ",1348],["T_RETURN","return",1349],["T_WHITESPACE"," ",1349],["T_VARIABLE","$this",1349],";",["T_WHITESPACE","\n        ",1349],"}",["T_WHITESPACE","\n        ",1350],["T_VARIABLE","$whereCond",1351],["T_WHITESPACE"," ",1351],"=",["T_WHITESPACE"," ",1351],["T_STRING","implode",1351],"(",["T_CONSTANT_ENCAPSED_STRING","' AND '",1351],",",["T_WHITESPACE"," ",1351],["T_VARIABLE","$where",1351],")",";",["T_WHITESPACE","\n        ",1351],["T_VARIABLE","$sql",1352],["T_WHITESPACE"," ",1352],"=",["T_WHITESPACE"," ",1352],["T_STRING","sprintf",1352],"(",["T_CONSTANT_ENCAPSED_STRING","'SELECT COUNT(*) as `cnt` FROM `%s` WHERE %s'",1352],",",["T_WHITESPACE"," ",1352],["T_VARIABLE","$table",1352],",",["T_WHITESPACE"," ",1352],["T_VARIABLE","$whereCond",1352],")",";",["T_WHITESPACE","\n\n        ",1352],["T_VARIABLE","$cnt",1354],["T_WHITESPACE"," ",1354],"=",["T_WHITESPACE"," ",1354],["T_VARIABLE","$this",1354],["T_OBJECT_OPERATOR","->",1354],["T_STRING","raw_fetchRow",1354],"(",["T_VARIABLE","$sql",1354],",",["T_WHITESPACE"," ",1354],["T_CONSTANT_ENCAPSED_STRING","'cnt'",1354],")",";",["T_WHITESPACE","\n        ",1354],["T_IF","if",1355],["T_WHITESPACE"," ",1355],"(",["T_VARIABLE","$cnt",1355],["T_WHITESPACE"," ",1355],">",["T_WHITESPACE"," ",1355],["T_LNUMBER","1",1355],")",["T_WHITESPACE"," ",1355],"{",["T_WHITESPACE","\n            ",1355],["T_VARIABLE","$sql",1356],["T_WHITESPACE"," ",1356],"=",["T_WHITESPACE"," ",1356],["T_STRING","sprintf",1356],"(",["T_CONSTANT_ENCAPSED_STRING","'DELETE FROM `%s` WHERE %s LIMIT %d'",1356],",",["T_WHITESPACE","\n                ",1356],["T_VARIABLE","$table",1357],",",["T_WHITESPACE","\n                ",1357],["T_VARIABLE","$whereCond",1358],",",["T_WHITESPACE","\n                ",1358],["T_VARIABLE","$cnt",1359],["T_WHITESPACE"," ",1359],"-",["T_WHITESPACE"," ",1359],["T_LNUMBER","1",1359],["T_WHITESPACE","\n            ",1359],")",";",["T_WHITESPACE","\n            ",1360],["T_VARIABLE","$this",1361],["T_OBJECT_OPERATOR","->",1361],["T_STRING","raw_query",1361],"(",["T_VARIABLE","$sql",1361],")",";",["T_WHITESPACE","\n        ",1361],"}",["T_WHITESPACE","\n\n        ",1362],["T_RETURN","return",1364],["T_WHITESPACE"," ",1364],["T_VARIABLE","$this",1364],";",["T_WHITESPACE","\n    ",1364],"}",["T_WHITESPACE","\n\n    ",1365],["T_DOC_COMMENT","\/**\n     * Creates and returns a new Zend_Db_Select object for this adapter.\n     *\n     * @return Varien_Db_Select\n     *\/",1367],["T_WHITESPACE","\n    ",1371],["T_PUBLIC","public",1372],["T_WHITESPACE"," ",1372],["T_FUNCTION","function",1372],["T_WHITESPACE"," ",1372],["T_STRING","select",1372],"(",")",["T_WHITESPACE","\n    ",1372],"{",["T_WHITESPACE","\n        ",1373],["T_RETURN","return",1374],["T_WHITESPACE"," ",1374],["T_NEW","new",1374],["T_WHITESPACE"," ",1374],["T_STRING","Varien_Db_Select",1374],"(",["T_VARIABLE","$this",1374],")",";",["T_WHITESPACE","\n    ",1374],"}",["T_WHITESPACE","\n\n    ",1375],["T_DOC_COMMENT","\/**\n     * Start debug timer\n     *\n     * @return Varien_Db_Adapter_Pdo_Mysql\n     *\/",1377],["T_WHITESPACE","\n    ",1381],["T_PROTECTED","protected",1382],["T_WHITESPACE"," ",1382],["T_FUNCTION","function",1382],["T_WHITESPACE"," ",1382],["T_STRING","_debugTimer",1382],"(",")",["T_WHITESPACE","\n    ",1382],"{",["T_WHITESPACE","\n        ",1383],["T_IF","if",1384],["T_WHITESPACE"," ",1384],"(",["T_VARIABLE","$this",1384],["T_OBJECT_OPERATOR","->",1384],["T_STRING","_debug",1384],")",["T_WHITESPACE"," ",1384],"{",["T_WHITESPACE","\n            ",1384],["T_VARIABLE","$this",1385],["T_OBJECT_OPERATOR","->",1385],["T_STRING","_debugTimer",1385],["T_WHITESPACE"," ",1385],"=",["T_WHITESPACE"," ",1385],["T_STRING","microtime",1385],"(",["T_STRING","true",1385],")",";",["T_WHITESPACE","\n        ",1385],"}",["T_WHITESPACE","\n\n        ",1386],["T_RETURN","return",1388],["T_WHITESPACE"," ",1388],["T_VARIABLE","$this",1388],";",["T_WHITESPACE","\n    ",1388],"}",["T_WHITESPACE","\n\n    ",1389],["T_DOC_COMMENT","\/**\n     * Logging debug information\n     *\n     * @param int $type\n     * @param string $sql\n     * @param array $bind\n     * @param Zend_Db_Statement_Pdo $result\n     * @return Varien_Db_Adapter_Pdo_Mysql\n     *\/",1391],["T_WHITESPACE","\n    ",1399],["T_PROTECTED","protected",1400],["T_WHITESPACE"," ",1400],["T_FUNCTION","function",1400],["T_WHITESPACE"," ",1400],["T_STRING","_debugStat",1400],"(",["T_VARIABLE","$type",1400],",",["T_WHITESPACE"," ",1400],["T_VARIABLE","$sql",1400],",",["T_WHITESPACE"," ",1400],["T_VARIABLE","$bind",1400],["T_WHITESPACE"," ",1400],"=",["T_WHITESPACE"," ",1400],["T_ARRAY","array",1400],"(",")",",",["T_WHITESPACE"," ",1400],["T_VARIABLE","$result",1400],["T_WHITESPACE"," ",1400],"=",["T_WHITESPACE"," ",1400],["T_STRING","null",1400],")",["T_WHITESPACE","\n    ",1400],"{",["T_WHITESPACE","\n        ",1401],["T_IF","if",1402],["T_WHITESPACE"," ",1402],"(","!",["T_VARIABLE","$this",1402],["T_OBJECT_OPERATOR","->",1402],["T_STRING","_debug",1402],")",["T_WHITESPACE"," ",1402],"{",["T_WHITESPACE","\n            ",1402],["T_RETURN","return",1403],["T_WHITESPACE"," ",1403],["T_VARIABLE","$this",1403],";",["T_WHITESPACE","\n        ",1403],"}",["T_WHITESPACE","\n\n        ",1404],["T_VARIABLE","$code",1406],["T_WHITESPACE"," ",1406],"=",["T_WHITESPACE"," ",1406],["T_CONSTANT_ENCAPSED_STRING","'## '",1406],["T_WHITESPACE"," ",1406],".",["T_WHITESPACE"," ",1406],["T_STRING","getmypid",1406],"(",")",["T_WHITESPACE"," ",1406],".",["T_WHITESPACE"," ",1406],["T_CONSTANT_ENCAPSED_STRING","' ## '",1406],";",["T_WHITESPACE","\n        ",1406],["T_VARIABLE","$nl",1407],["T_WHITESPACE","   ",1407],"=",["T_WHITESPACE"," ",1407],["T_CONSTANT_ENCAPSED_STRING","\"\\n\"",1407],";",["T_WHITESPACE","\n        ",1407],["T_VARIABLE","$time",1408],["T_WHITESPACE"," ",1408],"=",["T_WHITESPACE"," ",1408],["T_STRING","sprintf",1408],"(",["T_CONSTANT_ENCAPSED_STRING","'%.4f'",1408],",",["T_WHITESPACE"," ",1408],["T_STRING","microtime",1408],"(",["T_STRING","true",1408],")",["T_WHITESPACE"," ",1408],"-",["T_WHITESPACE"," ",1408],["T_VARIABLE","$this",1408],["T_OBJECT_OPERATOR","->",1408],["T_STRING","_debugTimer",1408],")",";",["T_WHITESPACE","\n\n        ",1408],["T_IF","if",1410],["T_WHITESPACE"," ",1410],"(","!",["T_VARIABLE","$this",1410],["T_OBJECT_OPERATOR","->",1410],["T_STRING","_logAllQueries",1410],["T_WHITESPACE"," ",1410],["T_BOOLEAN_AND","&&",1410],["T_WHITESPACE"," ",1410],["T_VARIABLE","$time",1410],["T_WHITESPACE"," ",1410],"<",["T_WHITESPACE"," ",1410],["T_VARIABLE","$this",1410],["T_OBJECT_OPERATOR","->",1410],["T_STRING","_logQueryTime",1410],")",["T_WHITESPACE"," ",1410],"{",["T_WHITESPACE","\n            ",1410],["T_RETURN","return",1411],["T_WHITESPACE"," ",1411],["T_VARIABLE","$this",1411],";",["T_WHITESPACE","\n        ",1411],"}",["T_WHITESPACE","\n        ",1412],["T_SWITCH","switch",1413],["T_WHITESPACE"," ",1413],"(",["T_VARIABLE","$type",1413],")",["T_WHITESPACE"," ",1413],"{",["T_WHITESPACE","\n            ",1413],["T_CASE","case",1414],["T_WHITESPACE"," ",1414],["T_STRING","self",1414],["T_DOUBLE_COLON","::",1414],["T_STRING","DEBUG_CONNECT",1414],":",["T_WHITESPACE","\n                ",1414],["T_VARIABLE","$code",1415],["T_WHITESPACE"," ",1415],["T_CONCAT_EQUAL",".=",1415],["T_WHITESPACE"," ",1415],["T_CONSTANT_ENCAPSED_STRING","'CONNECT'",1415],["T_WHITESPACE"," ",1415],".",["T_WHITESPACE"," ",1415],["T_VARIABLE","$nl",1415],";",["T_WHITESPACE","\n                ",1415],["T_BREAK","break",1416],";",["T_WHITESPACE","\n            ",1416],["T_CASE","case",1417],["T_WHITESPACE"," ",1417],["T_STRING","self",1417],["T_DOUBLE_COLON","::",1417],["T_STRING","DEBUG_TRANSACTION",1417],":",["T_WHITESPACE","\n                ",1417],["T_VARIABLE","$code",1418],["T_WHITESPACE"," ",1418],["T_CONCAT_EQUAL",".=",1418],["T_WHITESPACE"," ",1418],["T_CONSTANT_ENCAPSED_STRING","'TRANSACTION '",1418],["T_WHITESPACE"," ",1418],".",["T_WHITESPACE"," ",1418],["T_VARIABLE","$sql",1418],["T_WHITESPACE"," ",1418],".",["T_WHITESPACE"," ",1418],["T_VARIABLE","$nl",1418],";",["T_WHITESPACE","\n                ",1418],["T_BREAK","break",1419],";",["T_WHITESPACE","\n            ",1419],["T_CASE","case",1420],["T_WHITESPACE"," ",1420],["T_STRING","self",1420],["T_DOUBLE_COLON","::",1420],["T_STRING","DEBUG_QUERY",1420],":",["T_WHITESPACE","\n                ",1420],["T_VARIABLE","$code",1421],["T_WHITESPACE"," ",1421],["T_CONCAT_EQUAL",".=",1421],["T_WHITESPACE"," ",1421],["T_CONSTANT_ENCAPSED_STRING","'QUERY'",1421],["T_WHITESPACE"," ",1421],".",["T_WHITESPACE"," ",1421],["T_VARIABLE","$nl",1421],";",["T_WHITESPACE","\n                ",1421],["T_VARIABLE","$code",1422],["T_WHITESPACE"," ",1422],["T_CONCAT_EQUAL",".=",1422],["T_WHITESPACE"," ",1422],["T_CONSTANT_ENCAPSED_STRING","'SQL: '",1422],["T_WHITESPACE"," ",1422],".",["T_WHITESPACE"," ",1422],["T_VARIABLE","$sql",1422],["T_WHITESPACE"," ",1422],".",["T_WHITESPACE"," ",1422],["T_VARIABLE","$nl",1422],";",["T_WHITESPACE","\n                ",1422],["T_IF","if",1423],["T_WHITESPACE"," ",1423],"(",["T_VARIABLE","$bind",1423],")",["T_WHITESPACE"," ",1423],"{",["T_WHITESPACE","\n                    ",1423],["T_VARIABLE","$code",1424],["T_WHITESPACE"," ",1424],["T_CONCAT_EQUAL",".=",1424],["T_WHITESPACE"," ",1424],["T_CONSTANT_ENCAPSED_STRING","'BIND: '",1424],["T_WHITESPACE"," ",1424],".",["T_WHITESPACE"," ",1424],["T_STRING","var_export",1424],"(",["T_VARIABLE","$bind",1424],",",["T_WHITESPACE"," ",1424],["T_STRING","true",1424],")",["T_WHITESPACE"," ",1424],".",["T_WHITESPACE"," ",1424],["T_VARIABLE","$nl",1424],";",["T_WHITESPACE","\n                ",1424],"}",["T_WHITESPACE","\n                ",1425],["T_IF","if",1426],["T_WHITESPACE"," ",1426],"(",["T_VARIABLE","$result",1426],["T_WHITESPACE"," ",1426],["T_INSTANCEOF","instanceof",1426],["T_WHITESPACE"," ",1426],["T_STRING","Zend_Db_Statement_Pdo",1426],")",["T_WHITESPACE"," ",1426],"{",["T_WHITESPACE","\n                    ",1426],["T_VARIABLE","$code",1427],["T_WHITESPACE"," ",1427],["T_CONCAT_EQUAL",".=",1427],["T_WHITESPACE"," ",1427],["T_CONSTANT_ENCAPSED_STRING","'AFF: '",1427],["T_WHITESPACE"," ",1427],".",["T_WHITESPACE"," ",1427],["T_VARIABLE","$result",1427],["T_OBJECT_OPERATOR","->",1427],["T_STRING","rowCount",1427],"(",")",["T_WHITESPACE"," ",1427],".",["T_WHITESPACE"," ",1427],["T_VARIABLE","$nl",1427],";",["T_WHITESPACE","\n                ",1427],"}",["T_WHITESPACE","\n                ",1428],["T_BREAK","break",1429],";",["T_WHITESPACE","\n        ",1429],"}",["T_WHITESPACE","\n        ",1430],["T_VARIABLE","$code",1431],["T_WHITESPACE"," ",1431],["T_CONCAT_EQUAL",".=",1431],["T_WHITESPACE"," ",1431],["T_CONSTANT_ENCAPSED_STRING","'TIME: '",1431],["T_WHITESPACE"," ",1431],".",["T_WHITESPACE"," ",1431],["T_VARIABLE","$time",1431],["T_WHITESPACE"," ",1431],".",["T_WHITESPACE"," ",1431],["T_VARIABLE","$nl",1431],";",["T_WHITESPACE","\n\n        ",1431],["T_IF","if",1433],["T_WHITESPACE"," ",1433],"(",["T_VARIABLE","$this",1433],["T_OBJECT_OPERATOR","->",1433],["T_STRING","_logCallStack",1433],")",["T_WHITESPACE"," ",1433],"{",["T_WHITESPACE","\n            ",1433],["T_VARIABLE","$code",1434],["T_WHITESPACE"," ",1434],["T_CONCAT_EQUAL",".=",1434],["T_WHITESPACE"," ",1434],["T_CONSTANT_ENCAPSED_STRING","'TRACE: '",1434],["T_WHITESPACE"," ",1434],".",["T_WHITESPACE"," ",1434],["T_STRING","Varien_Debug",1434],["T_DOUBLE_COLON","::",1434],["T_STRING","backtrace",1434],"(",["T_STRING","true",1434],",",["T_WHITESPACE"," ",1434],["T_STRING","false",1434],")",["T_WHITESPACE"," ",1434],".",["T_WHITESPACE"," ",1434],["T_VARIABLE","$nl",1434],";",["T_WHITESPACE","\n        ",1434],"}",["T_WHITESPACE","\n\n        ",1435],["T_VARIABLE","$code",1437],["T_WHITESPACE"," ",1437],["T_CONCAT_EQUAL",".=",1437],["T_WHITESPACE"," ",1437],["T_VARIABLE","$nl",1437],";",["T_WHITESPACE","\n\n        ",1437],["T_VARIABLE","$this",1439],["T_OBJECT_OPERATOR","->",1439],["T_STRING","_debugWriteToFile",1439],"(",["T_VARIABLE","$code",1439],")",";",["T_WHITESPACE","\n\n        ",1439],["T_RETURN","return",1441],["T_WHITESPACE"," ",1441],["T_VARIABLE","$this",1441],";",["T_WHITESPACE","\n    ",1441],"}",["T_WHITESPACE","\n\n    ",1442],["T_DOC_COMMENT","\/**\n     * Write exception and thow\n     *\n     * @param Exception $e\n     * @throws Exception\n     *\/",1444],["T_WHITESPACE","\n    ",1449],["T_PROTECTED","protected",1450],["T_WHITESPACE"," ",1450],["T_FUNCTION","function",1450],["T_WHITESPACE"," ",1450],["T_STRING","_debugException",1450],"(",["T_STRING","Exception",1450],["T_WHITESPACE"," ",1450],["T_VARIABLE","$e",1450],")",["T_WHITESPACE","\n    ",1450],"{",["T_WHITESPACE","\n        ",1451],["T_IF","if",1452],["T_WHITESPACE"," ",1452],"(","!",["T_VARIABLE","$this",1452],["T_OBJECT_OPERATOR","->",1452],["T_STRING","_debug",1452],")",["T_WHITESPACE"," ",1452],"{",["T_WHITESPACE","\n            ",1452],["T_THROW","throw",1453],["T_WHITESPACE"," ",1453],["T_VARIABLE","$e",1453],";",["T_WHITESPACE","\n        ",1453],"}",["T_WHITESPACE","\n\n        ",1454],["T_VARIABLE","$nl",1456],["T_WHITESPACE","   ",1456],"=",["T_WHITESPACE"," ",1456],["T_CONSTANT_ENCAPSED_STRING","\"\\n\"",1456],";",["T_WHITESPACE","\n        ",1456],["T_VARIABLE","$code",1457],["T_WHITESPACE"," ",1457],"=",["T_WHITESPACE"," ",1457],["T_CONSTANT_ENCAPSED_STRING","'EXCEPTION '",1457],["T_WHITESPACE"," ",1457],".",["T_WHITESPACE"," ",1457],["T_VARIABLE","$nl",1457],["T_WHITESPACE"," ",1457],".",["T_WHITESPACE"," ",1457],["T_VARIABLE","$e",1457],["T_WHITESPACE"," ",1457],".",["T_WHITESPACE"," ",1457],["T_VARIABLE","$nl",1457],["T_WHITESPACE"," ",1457],".",["T_WHITESPACE"," ",1457],["T_VARIABLE","$nl",1457],";",["T_WHITESPACE","\n        ",1457],["T_VARIABLE","$this",1458],["T_OBJECT_OPERATOR","->",1458],["T_STRING","_debugWriteToFile",1458],"(",["T_VARIABLE","$code",1458],")",";",["T_WHITESPACE","\n\n        ",1458],["T_THROW","throw",1460],["T_WHITESPACE"," ",1460],["T_VARIABLE","$e",1460],";",["T_WHITESPACE","\n    ",1460],"}",["T_WHITESPACE","\n\n    ",1461],["T_DOC_COMMENT","\/**\n     * Debug write to file process\n     *\n     * @param string $str\n     *\/",1463],["T_WHITESPACE","\n    ",1467],["T_PROTECTED","protected",1468],["T_WHITESPACE"," ",1468],["T_FUNCTION","function",1468],["T_WHITESPACE"," ",1468],["T_STRING","_debugWriteToFile",1468],"(",["T_VARIABLE","$str",1468],")",["T_WHITESPACE","\n    ",1468],"{",["T_WHITESPACE","\n        ",1469],["T_VARIABLE","$str",1470],["T_WHITESPACE"," ",1470],"=",["T_WHITESPACE"," ",1470],["T_CONSTANT_ENCAPSED_STRING","'## '",1470],["T_WHITESPACE"," ",1470],".",["T_WHITESPACE"," ",1470],["T_STRING","date",1470],"(",["T_CONSTANT_ENCAPSED_STRING","'Y-m-d H:i:s'",1470],")",["T_WHITESPACE"," ",1470],".",["T_WHITESPACE"," ",1470],["T_CONSTANT_ENCAPSED_STRING","\"\\r\\n\"",1470],["T_WHITESPACE"," ",1470],".",["T_WHITESPACE"," ",1470],["T_VARIABLE","$str",1470],";",["T_WHITESPACE","\n        ",1470],["T_IF","if",1471],["T_WHITESPACE"," ",1471],"(","!",["T_VARIABLE","$this",1471],["T_OBJECT_OPERATOR","->",1471],["T_STRING","_debugIoAdapter",1471],")",["T_WHITESPACE"," ",1471],"{",["T_WHITESPACE","\n            ",1471],["T_VARIABLE","$this",1472],["T_OBJECT_OPERATOR","->",1472],["T_STRING","_debugIoAdapter",1472],["T_WHITESPACE"," ",1472],"=",["T_WHITESPACE"," ",1472],["T_NEW","new",1472],["T_WHITESPACE"," ",1472],["T_STRING","Varien_Io_File",1472],"(",")",";",["T_WHITESPACE","\n            ",1472],["T_VARIABLE","$dir",1473],["T_WHITESPACE"," ",1473],"=",["T_WHITESPACE"," ",1473],["T_STRING","Mage",1473],["T_DOUBLE_COLON","::",1473],["T_STRING","getBaseDir",1473],"(",")",["T_WHITESPACE"," ",1473],".",["T_WHITESPACE"," ",1473],["T_STRING","DS",1473],["T_WHITESPACE"," ",1473],".",["T_WHITESPACE"," ",1473],["T_VARIABLE","$this",1473],["T_OBJECT_OPERATOR","->",1473],["T_STRING","_debugIoAdapter",1473],["T_OBJECT_OPERATOR","->",1473],["T_STRING","dirname",1473],"(",["T_VARIABLE","$this",1473],["T_OBJECT_OPERATOR","->",1473],["T_STRING","_debugFile",1473],")",";",["T_WHITESPACE","\n            ",1473],["T_VARIABLE","$this",1474],["T_OBJECT_OPERATOR","->",1474],["T_STRING","_debugIoAdapter",1474],["T_OBJECT_OPERATOR","->",1474],["T_STRING","checkAndCreateFolder",1474],"(",["T_VARIABLE","$dir",1474],")",";",["T_WHITESPACE","\n            ",1474],["T_VARIABLE","$this",1475],["T_OBJECT_OPERATOR","->",1475],["T_STRING","_debugIoAdapter",1475],["T_OBJECT_OPERATOR","->",1475],["T_STRING","open",1475],"(",["T_ARRAY","array",1475],"(",["T_CONSTANT_ENCAPSED_STRING","'path'",1475],["T_WHITESPACE"," ",1475],["T_DOUBLE_ARROW","=>",1475],["T_WHITESPACE"," ",1475],["T_VARIABLE","$dir",1475],")",")",";",["T_WHITESPACE","\n            ",1475],["T_VARIABLE","$this",1476],["T_OBJECT_OPERATOR","->",1476],["T_STRING","_debugFile",1476],["T_WHITESPACE"," ",1476],"=",["T_WHITESPACE"," ",1476],["T_STRING","basename",1476],"(",["T_VARIABLE","$this",1476],["T_OBJECT_OPERATOR","->",1476],["T_STRING","_debugFile",1476],")",";",["T_WHITESPACE","\n        ",1476],"}",["T_WHITESPACE","\n\n        ",1477],["T_VARIABLE","$this",1479],["T_OBJECT_OPERATOR","->",1479],["T_STRING","_debugIoAdapter",1479],["T_OBJECT_OPERATOR","->",1479],["T_STRING","streamOpen",1479],"(",["T_VARIABLE","$this",1479],["T_OBJECT_OPERATOR","->",1479],["T_STRING","_debugFile",1479],",",["T_WHITESPACE"," ",1479],["T_CONSTANT_ENCAPSED_STRING","'a'",1479],")",";",["T_WHITESPACE","\n        ",1479],["T_VARIABLE","$this",1480],["T_OBJECT_OPERATOR","->",1480],["T_STRING","_debugIoAdapter",1480],["T_OBJECT_OPERATOR","->",1480],["T_STRING","streamLock",1480],"(",")",";",["T_WHITESPACE","\n        ",1480],["T_VARIABLE","$this",1481],["T_OBJECT_OPERATOR","->",1481],["T_STRING","_debugIoAdapter",1481],["T_OBJECT_OPERATOR","->",1481],["T_STRING","streamWrite",1481],"(",["T_VARIABLE","$str",1481],")",";",["T_WHITESPACE","\n        ",1481],["T_VARIABLE","$this",1482],["T_OBJECT_OPERATOR","->",1482],["T_STRING","_debugIoAdapter",1482],["T_OBJECT_OPERATOR","->",1482],["T_STRING","streamUnlock",1482],"(",")",";",["T_WHITESPACE","\n        ",1482],["T_VARIABLE","$this",1483],["T_OBJECT_OPERATOR","->",1483],["T_STRING","_debugIoAdapter",1483],["T_OBJECT_OPERATOR","->",1483],["T_STRING","streamClose",1483],"(",")",";",["T_WHITESPACE","\n    ",1483],"}",["T_WHITESPACE","\n\n    ",1484],["T_DOC_COMMENT","\/**\n     * Quotes a value and places into a piece of text at a placeholder.\n     *\n     * Method revrited for handle empty arrays in value param\n     *\n     * @param string  $text  The text with a placeholder.\n     * @param mixed   $value The value to quote.\n     * @param string  $type  OPTIONAL SQL datatype\n     * @param integer $count OPTIONAL count of placeholders to replace\n     * @return string An SQL-safe quoted value placed into the orignal text.\n     *\/",1486],["T_WHITESPACE","\n    ",1496],["T_PUBLIC","public",1497],["T_WHITESPACE"," ",1497],["T_FUNCTION","function",1497],["T_WHITESPACE"," ",1497],["T_STRING","quoteInto",1497],"(",["T_VARIABLE","$text",1497],",",["T_WHITESPACE"," ",1497],["T_VARIABLE","$value",1497],",",["T_WHITESPACE"," ",1497],["T_VARIABLE","$type",1497],["T_WHITESPACE"," ",1497],"=",["T_WHITESPACE"," ",1497],["T_STRING","null",1497],",",["T_WHITESPACE"," ",1497],["T_VARIABLE","$count",1497],["T_WHITESPACE"," ",1497],"=",["T_WHITESPACE"," ",1497],["T_STRING","null",1497],")",["T_WHITESPACE","\n    ",1497],"{",["T_WHITESPACE","\n        ",1498],["T_IF","if",1499],["T_WHITESPACE"," ",1499],"(",["T_STRING","is_array",1499],"(",["T_VARIABLE","$value",1499],")",["T_WHITESPACE"," ",1499],["T_BOOLEAN_AND","&&",1499],["T_WHITESPACE"," ",1499],["T_EMPTY","empty",1499],"(",["T_VARIABLE","$value",1499],")",")",["T_WHITESPACE"," ",1499],"{",["T_WHITESPACE","\n            ",1499],["T_VARIABLE","$value",1500],["T_WHITESPACE"," ",1500],"=",["T_WHITESPACE"," ",1500],["T_NEW","new",1500],["T_WHITESPACE"," ",1500],["T_STRING","Zend_Db_Expr",1500],"(",["T_CONSTANT_ENCAPSED_STRING","'NULL'",1500],")",";",["T_WHITESPACE","\n        ",1500],"}",["T_WHITESPACE","\n\n        ",1501],["T_RETURN","return",1503],["T_WHITESPACE"," ",1503],["T_STRING","parent",1503],["T_DOUBLE_COLON","::",1503],["T_STRING","quoteInto",1503],"(",["T_VARIABLE","$text",1503],",",["T_WHITESPACE"," ",1503],["T_VARIABLE","$value",1503],",",["T_WHITESPACE"," ",1503],["T_VARIABLE","$type",1503],",",["T_WHITESPACE"," ",1503],["T_VARIABLE","$count",1503],")",";",["T_WHITESPACE","\n    ",1503],"}",["T_WHITESPACE","\n\n    ",1504],["T_DOC_COMMENT","\/**\n     * Retrieve ddl cache name\n     *\n     * @param string $tableName\n     * @param string $schemaName\n     *\/",1506],["T_WHITESPACE","\n    ",1511],["T_PROTECTED","protected",1512],["T_WHITESPACE"," ",1512],["T_FUNCTION","function",1512],["T_WHITESPACE"," ",1512],["T_STRING","_getTableName",1512],"(",["T_VARIABLE","$tableName",1512],",",["T_WHITESPACE"," ",1512],["T_VARIABLE","$schemaName",1512],["T_WHITESPACE"," ",1512],"=",["T_WHITESPACE"," ",1512],["T_STRING","null",1512],")",["T_WHITESPACE","\n    ",1512],"{",["T_WHITESPACE","\n        ",1513],["T_RETURN","return",1514],["T_WHITESPACE"," ",1514],"(",["T_VARIABLE","$schemaName",1514],["T_WHITESPACE"," ",1514],"?",["T_WHITESPACE"," ",1514],["T_VARIABLE","$schemaName",1514],["T_WHITESPACE"," ",1514],".",["T_WHITESPACE"," ",1514],["T_CONSTANT_ENCAPSED_STRING","'.'",1514],["T_WHITESPACE"," ",1514],":",["T_WHITESPACE"," ",1514],["T_CONSTANT_ENCAPSED_STRING","''",1514],")",["T_WHITESPACE"," ",1514],".",["T_WHITESPACE"," ",1514],["T_VARIABLE","$tableName",1514],";",["T_WHITESPACE","\n    ",1514],"}",["T_WHITESPACE","\n\n    ",1515],["T_DOC_COMMENT","\/**\n     * Retrieve Id for cache\n     *\n     * @param string $tableKey\n     * @param int $ddlType\n     * @return string\n     *\/",1517],["T_WHITESPACE","\n    ",1523],["T_PROTECTED","protected",1524],["T_WHITESPACE"," ",1524],["T_FUNCTION","function",1524],["T_WHITESPACE"," ",1524],["T_STRING","_getCacheId",1524],"(",["T_VARIABLE","$tableKey",1524],",",["T_WHITESPACE"," ",1524],["T_VARIABLE","$ddlType",1524],")",["T_WHITESPACE","\n    ",1524],"{",["T_WHITESPACE","\n        ",1525],["T_RETURN","return",1526],["T_WHITESPACE"," ",1526],["T_STRING","sprintf",1526],"(",["T_CONSTANT_ENCAPSED_STRING","'%s_%s_%s'",1526],",",["T_WHITESPACE"," ",1526],["T_STRING","self",1526],["T_DOUBLE_COLON","::",1526],["T_STRING","DDL_CACHE_PREFIX",1526],",",["T_WHITESPACE"," ",1526],["T_VARIABLE","$tableKey",1526],",",["T_WHITESPACE"," ",1526],["T_VARIABLE","$ddlType",1526],")",";",["T_WHITESPACE","\n    ",1526],"}",["T_WHITESPACE","\n\n    ",1527],["T_DOC_COMMENT","\/**\n     * Load DDL data from cache\n     * Return false if cache does not exists\n     *\n     * @param string $tableCacheKey the table cache key\n     * @param int $ddlType          the DDL constant\n     * @return string|array|int|false\n     *\/",1529],["T_WHITESPACE","\n    ",1536],["T_PUBLIC","public",1537],["T_WHITESPACE"," ",1537],["T_FUNCTION","function",1537],["T_WHITESPACE"," ",1537],["T_STRING","loadDdlCache",1537],"(",["T_VARIABLE","$tableCacheKey",1537],",",["T_WHITESPACE"," ",1537],["T_VARIABLE","$ddlType",1537],")",["T_WHITESPACE","\n    ",1537],"{",["T_WHITESPACE","\n        ",1538],["T_IF","if",1539],["T_WHITESPACE"," ",1539],"(","!",["T_VARIABLE","$this",1539],["T_OBJECT_OPERATOR","->",1539],["T_STRING","_isDdlCacheAllowed",1539],")",["T_WHITESPACE"," ",1539],"{",["T_WHITESPACE","\n            ",1539],["T_RETURN","return",1540],["T_WHITESPACE"," ",1540],["T_STRING","false",1540],";",["T_WHITESPACE","\n        ",1540],"}",["T_WHITESPACE","\n        ",1541],["T_IF","if",1542],["T_WHITESPACE"," ",1542],"(",["T_ISSET","isset",1542],"(",["T_VARIABLE","$this",1542],["T_OBJECT_OPERATOR","->",1542],["T_STRING","_ddlCache",1542],"[",["T_VARIABLE","$ddlType",1542],"]","[",["T_VARIABLE","$tableCacheKey",1542],"]",")",")",["T_WHITESPACE"," ",1542],"{",["T_WHITESPACE","\n            ",1542],["T_RETURN","return",1543],["T_WHITESPACE"," ",1543],["T_VARIABLE","$this",1543],["T_OBJECT_OPERATOR","->",1543],["T_STRING","_ddlCache",1543],"[",["T_VARIABLE","$ddlType",1543],"]","[",["T_VARIABLE","$tableCacheKey",1543],"]",";",["T_WHITESPACE","\n        ",1543],"}",["T_WHITESPACE","\n\n        ",1544],["T_IF","if",1546],["T_WHITESPACE"," ",1546],"(",["T_VARIABLE","$this",1546],["T_OBJECT_OPERATOR","->",1546],["T_STRING","_cacheAdapter",1546],["T_WHITESPACE"," ",1546],["T_INSTANCEOF","instanceof",1546],["T_WHITESPACE"," ",1546],["T_STRING","Zend_Cache_Core",1546],")",["T_WHITESPACE"," ",1546],"{",["T_WHITESPACE","\n            ",1546],["T_VARIABLE","$cacheId",1547],["T_WHITESPACE"," ",1547],"=",["T_WHITESPACE"," ",1547],["T_VARIABLE","$this",1547],["T_OBJECT_OPERATOR","->",1547],["T_STRING","_getCacheId",1547],"(",["T_VARIABLE","$tableCacheKey",1547],",",["T_WHITESPACE"," ",1547],["T_VARIABLE","$ddlType",1547],")",";",["T_WHITESPACE","\n            ",1547],["T_VARIABLE","$data",1548],["T_WHITESPACE"," ",1548],"=",["T_WHITESPACE"," ",1548],["T_VARIABLE","$this",1548],["T_OBJECT_OPERATOR","->",1548],["T_STRING","_cacheAdapter",1548],["T_OBJECT_OPERATOR","->",1548],["T_STRING","load",1548],"(",["T_VARIABLE","$cacheId",1548],")",";",["T_WHITESPACE","\n            ",1548],["T_IF","if",1549],["T_WHITESPACE"," ",1549],"(",["T_VARIABLE","$data",1549],["T_WHITESPACE"," ",1549],["T_IS_NOT_IDENTICAL","!==",1549],["T_WHITESPACE"," ",1549],["T_STRING","false",1549],")",["T_WHITESPACE"," ",1549],"{",["T_WHITESPACE","\n                ",1549],["T_VARIABLE","$data",1550],["T_WHITESPACE"," ",1550],"=",["T_WHITESPACE"," ",1550],["T_STRING","unserialize",1550],"(",["T_VARIABLE","$data",1550],")",";",["T_WHITESPACE","\n                ",1550],["T_VARIABLE","$this",1551],["T_OBJECT_OPERATOR","->",1551],["T_STRING","_ddlCache",1551],"[",["T_VARIABLE","$ddlType",1551],"]","[",["T_VARIABLE","$tableCacheKey",1551],"]",["T_WHITESPACE"," ",1551],"=",["T_WHITESPACE"," ",1551],["T_VARIABLE","$data",1551],";",["T_WHITESPACE","\n            ",1551],"}",["T_WHITESPACE","\n            ",1552],["T_RETURN","return",1553],["T_WHITESPACE"," ",1553],["T_VARIABLE","$data",1553],";",["T_WHITESPACE","\n        ",1553],"}",["T_WHITESPACE","\n\n        ",1554],["T_RETURN","return",1556],["T_WHITESPACE"," ",1556],["T_STRING","false",1556],";",["T_WHITESPACE","\n    ",1556],"}",["T_WHITESPACE","\n\n    ",1557],["T_DOC_COMMENT","\/**\n     * Save DDL data into cache\n     *\n     * @param string $tableCacheKey\n     * @param int $ddlType\n     * @return Varien_Db_Adapter_Pdo_Mysql\n     *\/",1559],["T_WHITESPACE","\n    ",1565],["T_PUBLIC","public",1566],["T_WHITESPACE"," ",1566],["T_FUNCTION","function",1566],["T_WHITESPACE"," ",1566],["T_STRING","saveDdlCache",1566],"(",["T_VARIABLE","$tableCacheKey",1566],",",["T_WHITESPACE"," ",1566],["T_VARIABLE","$ddlType",1566],",",["T_WHITESPACE"," ",1566],["T_VARIABLE","$data",1566],")",["T_WHITESPACE","\n    ",1566],"{",["T_WHITESPACE","\n        ",1567],["T_IF","if",1568],["T_WHITESPACE"," ",1568],"(","!",["T_VARIABLE","$this",1568],["T_OBJECT_OPERATOR","->",1568],["T_STRING","_isDdlCacheAllowed",1568],")",["T_WHITESPACE"," ",1568],"{",["T_WHITESPACE","\n            ",1568],["T_RETURN","return",1569],["T_WHITESPACE"," ",1569],["T_VARIABLE","$this",1569],";",["T_WHITESPACE","\n        ",1569],"}",["T_WHITESPACE","\n        ",1570],["T_VARIABLE","$this",1571],["T_OBJECT_OPERATOR","->",1571],["T_STRING","_ddlCache",1571],"[",["T_VARIABLE","$ddlType",1571],"]","[",["T_VARIABLE","$tableCacheKey",1571],"]",["T_WHITESPACE"," ",1571],"=",["T_WHITESPACE"," ",1571],["T_VARIABLE","$data",1571],";",["T_WHITESPACE","\n\n        ",1571],["T_IF","if",1573],["T_WHITESPACE"," ",1573],"(",["T_VARIABLE","$this",1573],["T_OBJECT_OPERATOR","->",1573],["T_STRING","_cacheAdapter",1573],["T_WHITESPACE"," ",1573],["T_INSTANCEOF","instanceof",1573],["T_WHITESPACE"," ",1573],["T_STRING","Zend_Cache_Core",1573],")",["T_WHITESPACE"," ",1573],"{",["T_WHITESPACE","\n            ",1573],["T_VARIABLE","$cacheId",1574],["T_WHITESPACE"," ",1574],"=",["T_WHITESPACE"," ",1574],["T_VARIABLE","$this",1574],["T_OBJECT_OPERATOR","->",1574],["T_STRING","_getCacheId",1574],"(",["T_VARIABLE","$tableCacheKey",1574],",",["T_WHITESPACE"," ",1574],["T_VARIABLE","$ddlType",1574],")",";",["T_WHITESPACE","\n            ",1574],["T_VARIABLE","$data",1575],["T_WHITESPACE"," ",1575],"=",["T_WHITESPACE"," ",1575],["T_STRING","serialize",1575],"(",["T_VARIABLE","$data",1575],")",";",["T_WHITESPACE","\n            ",1575],["T_VARIABLE","$this",1576],["T_OBJECT_OPERATOR","->",1576],["T_STRING","_cacheAdapter",1576],["T_OBJECT_OPERATOR","->",1576],["T_STRING","save",1576],"(",["T_VARIABLE","$data",1576],",",["T_WHITESPACE"," ",1576],["T_VARIABLE","$cacheId",1576],",",["T_WHITESPACE"," ",1576],["T_ARRAY","array",1576],"(",["T_STRING","self",1576],["T_DOUBLE_COLON","::",1576],["T_STRING","DDL_CACHE_TAG",1576],")",")",";",["T_WHITESPACE","\n        ",1576],"}",["T_WHITESPACE","\n\n        ",1577],["T_RETURN","return",1579],["T_WHITESPACE"," ",1579],["T_VARIABLE","$this",1579],";",["T_WHITESPACE","\n    ",1579],"}",["T_WHITESPACE","\n\n    ",1580],["T_DOC_COMMENT","\/**\n     * Reset cached DDL data from cache\n     * if table name is null - reset all cached DDL data\n     *\n     * @param string $tableName\n     * @param string $schemaName OPTIONAL\n     * @return Varien_Db_Adapter_Pdo_Mysql\n     *\/",1582],["T_WHITESPACE","\n    ",1589],["T_PUBLIC","public",1590],["T_WHITESPACE"," ",1590],["T_FUNCTION","function",1590],["T_WHITESPACE"," ",1590],["T_STRING","resetDdlCache",1590],"(",["T_VARIABLE","$tableName",1590],["T_WHITESPACE"," ",1590],"=",["T_WHITESPACE"," ",1590],["T_STRING","null",1590],",",["T_WHITESPACE"," ",1590],["T_VARIABLE","$schemaName",1590],["T_WHITESPACE"," ",1590],"=",["T_WHITESPACE"," ",1590],["T_STRING","null",1590],")",["T_WHITESPACE","\n    ",1590],"{",["T_WHITESPACE","\n        ",1591],["T_IF","if",1592],["T_WHITESPACE"," ",1592],"(","!",["T_VARIABLE","$this",1592],["T_OBJECT_OPERATOR","->",1592],["T_STRING","_isDdlCacheAllowed",1592],")",["T_WHITESPACE"," ",1592],"{",["T_WHITESPACE","\n            ",1592],["T_RETURN","return",1593],["T_WHITESPACE"," ",1593],["T_VARIABLE","$this",1593],";",["T_WHITESPACE","\n        ",1593],"}",["T_WHITESPACE","\n        ",1594],["T_IF","if",1595],["T_WHITESPACE"," ",1595],"(",["T_VARIABLE","$tableName",1595],["T_WHITESPACE"," ",1595],["T_IS_IDENTICAL","===",1595],["T_WHITESPACE"," ",1595],["T_STRING","null",1595],")",["T_WHITESPACE"," ",1595],"{",["T_WHITESPACE","\n            ",1595],["T_VARIABLE","$this",1596],["T_OBJECT_OPERATOR","->",1596],["T_STRING","_ddlCache",1596],["T_WHITESPACE"," ",1596],"=",["T_WHITESPACE"," ",1596],["T_ARRAY","array",1596],"(",")",";",["T_WHITESPACE","\n            ",1596],["T_IF","if",1597],["T_WHITESPACE"," ",1597],"(",["T_VARIABLE","$this",1597],["T_OBJECT_OPERATOR","->",1597],["T_STRING","_cacheAdapter",1597],["T_WHITESPACE"," ",1597],["T_INSTANCEOF","instanceof",1597],["T_WHITESPACE"," ",1597],["T_STRING","Zend_Cache_Core",1597],")",["T_WHITESPACE"," ",1597],"{",["T_WHITESPACE","\n                ",1597],["T_VARIABLE","$this",1598],["T_OBJECT_OPERATOR","->",1598],["T_STRING","_cacheAdapter",1598],["T_OBJECT_OPERATOR","->",1598],["T_STRING","clean",1598],"(",["T_STRING","Zend_Cache",1598],["T_DOUBLE_COLON","::",1598],["T_STRING","CLEANING_MODE_MATCHING_TAG",1598],",",["T_WHITESPACE"," ",1598],["T_ARRAY","array",1598],"(",["T_STRING","self",1598],["T_DOUBLE_COLON","::",1598],["T_STRING","DDL_CACHE_TAG",1598],")",")",";",["T_WHITESPACE","\n            ",1598],"}",["T_WHITESPACE","\n        ",1599],"}",["T_WHITESPACE"," ",1600],["T_ELSE","else",1600],["T_WHITESPACE"," ",1600],"{",["T_WHITESPACE","\n            ",1600],["T_VARIABLE","$cacheKey",1601],["T_WHITESPACE"," ",1601],"=",["T_WHITESPACE"," ",1601],["T_VARIABLE","$this",1601],["T_OBJECT_OPERATOR","->",1601],["T_STRING","_getTableName",1601],"(",["T_VARIABLE","$tableName",1601],",",["T_WHITESPACE"," ",1601],["T_VARIABLE","$schemaName",1601],")",";",["T_WHITESPACE","\n\n            ",1601],["T_VARIABLE","$ddlTypes",1603],["T_WHITESPACE"," ",1603],"=",["T_WHITESPACE"," ",1603],["T_ARRAY","array",1603],"(",["T_STRING","self",1603],["T_DOUBLE_COLON","::",1603],["T_STRING","DDL_DESCRIBE",1603],",",["T_WHITESPACE"," ",1603],["T_STRING","self",1603],["T_DOUBLE_COLON","::",1603],["T_STRING","DDL_CREATE",1603],",",["T_WHITESPACE"," ",1603],["T_STRING","self",1603],["T_DOUBLE_COLON","::",1603],["T_STRING","DDL_INDEX",1603],",",["T_WHITESPACE"," ",1603],["T_STRING","self",1603],["T_DOUBLE_COLON","::",1603],["T_STRING","DDL_FOREIGN_KEY",1603],")",";",["T_WHITESPACE","\n            ",1603],["T_FOREACH","foreach",1604],["T_WHITESPACE"," ",1604],"(",["T_VARIABLE","$ddlTypes",1604],["T_WHITESPACE"," ",1604],["T_AS","as",1604],["T_WHITESPACE"," ",1604],["T_VARIABLE","$ddlType",1604],")",["T_WHITESPACE"," ",1604],"{",["T_WHITESPACE","\n                ",1604],["T_UNSET","unset",1605],"(",["T_VARIABLE","$this",1605],["T_OBJECT_OPERATOR","->",1605],["T_STRING","_ddlCache",1605],"[",["T_VARIABLE","$ddlType",1605],"]","[",["T_VARIABLE","$cacheKey",1605],"]",")",";",["T_WHITESPACE","\n            ",1605],"}",["T_WHITESPACE","\n\n            ",1606],["T_IF","if",1608],["T_WHITESPACE"," ",1608],"(",["T_VARIABLE","$this",1608],["T_OBJECT_OPERATOR","->",1608],["T_STRING","_cacheAdapter",1608],["T_WHITESPACE"," ",1608],["T_INSTANCEOF","instanceof",1608],["T_WHITESPACE"," ",1608],["T_STRING","Zend_Cache_Core",1608],")",["T_WHITESPACE"," ",1608],"{",["T_WHITESPACE","\n                ",1608],["T_FOREACH","foreach",1609],["T_WHITESPACE"," ",1609],"(",["T_VARIABLE","$ddlTypes",1609],["T_WHITESPACE"," ",1609],["T_AS","as",1609],["T_WHITESPACE"," ",1609],["T_VARIABLE","$ddlType",1609],")",["T_WHITESPACE"," ",1609],"{",["T_WHITESPACE","\n                    ",1609],["T_VARIABLE","$cacheId",1610],["T_WHITESPACE"," ",1610],"=",["T_WHITESPACE"," ",1610],["T_VARIABLE","$this",1610],["T_OBJECT_OPERATOR","->",1610],["T_STRING","_getCacheId",1610],"(",["T_VARIABLE","$cacheKey",1610],",",["T_WHITESPACE"," ",1610],["T_VARIABLE","$ddlType",1610],")",";",["T_WHITESPACE","\n                    ",1610],["T_VARIABLE","$this",1611],["T_OBJECT_OPERATOR","->",1611],["T_STRING","_cacheAdapter",1611],["T_OBJECT_OPERATOR","->",1611],["T_STRING","remove",1611],"(",["T_VARIABLE","$cacheId",1611],")",";",["T_WHITESPACE","\n                ",1611],"}",["T_WHITESPACE","\n            ",1612],"}",["T_WHITESPACE","\n        ",1613],"}",["T_WHITESPACE","\n\n        ",1614],["T_RETURN","return",1616],["T_WHITESPACE"," ",1616],["T_VARIABLE","$this",1616],";",["T_WHITESPACE","\n    ",1616],"}",["T_WHITESPACE","\n\n    ",1617],["T_DOC_COMMENT","\/**\n     * Disallow DDL caching\n     * @return Varien_Db_Adapter_Pdo_Mysql\n     *\/",1619],["T_WHITESPACE","\n    ",1622],["T_PUBLIC","public",1623],["T_WHITESPACE"," ",1623],["T_FUNCTION","function",1623],["T_WHITESPACE"," ",1623],["T_STRING","disallowDdlCache",1623],"(",")",["T_WHITESPACE","\n    ",1623],"{",["T_WHITESPACE","\n        ",1624],["T_VARIABLE","$this",1625],["T_OBJECT_OPERATOR","->",1625],["T_STRING","_isDdlCacheAllowed",1625],["T_WHITESPACE"," ",1625],"=",["T_WHITESPACE"," ",1625],["T_STRING","false",1625],";",["T_WHITESPACE","\n        ",1625],["T_RETURN","return",1626],["T_WHITESPACE"," ",1626],["T_VARIABLE","$this",1626],";",["T_WHITESPACE","\n    ",1626],"}",["T_WHITESPACE","\n\n    ",1627],["T_DOC_COMMENT","\/**\n     * Allow DDL caching\n     * @return Varien_Db_Adapter_Pdo_Mysql\n     *\/",1629],["T_WHITESPACE","\n    ",1632],["T_PUBLIC","public",1633],["T_WHITESPACE"," ",1633],["T_FUNCTION","function",1633],["T_WHITESPACE"," ",1633],["T_STRING","allowDdlCache",1633],"(",")",["T_WHITESPACE","\n    ",1633],"{",["T_WHITESPACE","\n        ",1634],["T_VARIABLE","$this",1635],["T_OBJECT_OPERATOR","->",1635],["T_STRING","_isDdlCacheAllowed",1635],["T_WHITESPACE"," ",1635],"=",["T_WHITESPACE"," ",1635],["T_STRING","true",1635],";",["T_WHITESPACE","\n        ",1635],["T_RETURN","return",1636],["T_WHITESPACE"," ",1636],["T_VARIABLE","$this",1636],";",["T_WHITESPACE","\n    ",1636],"}",["T_WHITESPACE","\n\n    ",1637],["T_DOC_COMMENT","\/**\n     * Decorate a table info by detecting and parsing the binary\/varbinary fields\n     * @param $tableColumnInfo\n     *\n     * @return mixed\n     *\/",1639],["T_WHITESPACE","\n    ",1644],["T_PUBLIC","public",1645],["T_WHITESPACE"," ",1645],["T_FUNCTION","function",1645],["T_WHITESPACE"," ",1645],["T_STRING","decorateTableInfo",1645],"(",["T_VARIABLE","$tableColumnInfo",1645],")",["T_WHITESPACE","\n    ",1645],"{",["T_WHITESPACE","\n        ",1646],["T_VARIABLE","$matches",1647],["T_WHITESPACE"," ",1647],"=",["T_WHITESPACE"," ",1647],["T_ARRAY","array",1647],"(",")",";",["T_WHITESPACE","\n        ",1647],["T_IF","if",1648],["T_WHITESPACE"," ",1648],"(",["T_STRING","preg_match",1648],"(",["T_CONSTANT_ENCAPSED_STRING","'\/^((?:var)?binary)\\((\\d+)\\)\/'",1648],",",["T_WHITESPACE"," ",1648],["T_VARIABLE","$tableColumnInfo",1648],"[",["T_CONSTANT_ENCAPSED_STRING","'DATA_TYPE'",1648],"]",",",["T_WHITESPACE"," ",1648],["T_VARIABLE","$matches",1648],")",")",["T_WHITESPACE"," ",1648],"{",["T_WHITESPACE","\n            ",1648],["T_LIST","list",1649],["T_WHITESPACE"," ",1649],"(",["T_VARIABLE","$fieldFullDescription",1649],",",["T_WHITESPACE"," ",1649],["T_VARIABLE","$fieldType",1649],",",["T_WHITESPACE"," ",1649],["T_VARIABLE","$fieldLength",1649],")",["T_WHITESPACE"," ",1649],"=",["T_WHITESPACE"," ",1649],["T_VARIABLE","$matches",1649],";",["T_WHITESPACE","\n            ",1649],["T_VARIABLE","$tableColumnInfo",1650],"[",["T_CONSTANT_ENCAPSED_STRING","'DATA_TYPE'",1650],"]",["T_WHITESPACE"," ",1650],"=",["T_WHITESPACE"," ",1650],["T_VARIABLE","$fieldType",1650],";",["T_WHITESPACE","\n            ",1650],["T_VARIABLE","$tableColumnInfo",1651],"[",["T_CONSTANT_ENCAPSED_STRING","'LENGTH'",1651],"]",["T_WHITESPACE"," ",1651],"=",["T_WHITESPACE"," ",1651],["T_VARIABLE","$fieldLength",1651],";",["T_WHITESPACE","\n        ",1651],"}",["T_WHITESPACE","\n        ",1652],["T_RETURN","return",1653],["T_WHITESPACE"," ",1653],["T_VARIABLE","$tableColumnInfo",1653],";",["T_WHITESPACE","\n    ",1653],"}",["T_WHITESPACE","\n\n    ",1654],["T_DOC_COMMENT","\/**\n     * Returns the column descriptions for a table.\n     *\n     * The return value is an associative array keyed by the column name,\n     * as returned by the RDBMS.\n     *\n     * The value of each array element is an associative array\n     * with the following keys:\n     *\n     * SCHEMA_NAME      => string; name of database or schema\n     * TABLE_NAME       => string;\n     * COLUMN_NAME      => string; column name\n     * COLUMN_POSITION  => number; ordinal position of column in table\n     * DATA_TYPE        => string; SQL datatype name of column\n     * DEFAULT          => string; default expression of column, null if none\n     * NULLABLE         => boolean; true if column can have nulls\n     * LENGTH           => number; length of CHAR\/VARCHAR\n     * SCALE            => number; scale of NUMERIC\/DECIMAL\n     * PRECISION        => number; precision of NUMERIC\/DECIMAL\n     * UNSIGNED         => boolean; unsigned property of an integer type\n     * PRIMARY          => boolean; true if column is part of the primary key\n     * PRIMARY_POSITION => integer; position of column in primary key\n     * IDENTITY         => integer; true if column is auto-generated with unique values\n     *\n     * @param string $tableName\n     * @param string $schemaName OPTIONAL\n     * @return array\n     *\/",1656],["T_WHITESPACE","\n    ",1683],["T_PUBLIC","public",1684],["T_WHITESPACE"," ",1684],["T_FUNCTION","function",1684],["T_WHITESPACE"," ",1684],["T_STRING","describeTable",1684],"(",["T_VARIABLE","$tableName",1684],",",["T_WHITESPACE"," ",1684],["T_VARIABLE","$schemaName",1684],["T_WHITESPACE"," ",1684],"=",["T_WHITESPACE"," ",1684],["T_STRING","null",1684],")",["T_WHITESPACE","\n    ",1684],"{",["T_WHITESPACE","\n        ",1685],["T_VARIABLE","$cacheKey",1686],["T_WHITESPACE"," ",1686],"=",["T_WHITESPACE"," ",1686],["T_VARIABLE","$this",1686],["T_OBJECT_OPERATOR","->",1686],["T_STRING","_getTableName",1686],"(",["T_VARIABLE","$tableName",1686],",",["T_WHITESPACE"," ",1686],["T_VARIABLE","$schemaName",1686],")",";",["T_WHITESPACE","\n        ",1686],["T_VARIABLE","$ddl",1687],["T_WHITESPACE"," ",1687],"=",["T_WHITESPACE"," ",1687],["T_VARIABLE","$this",1687],["T_OBJECT_OPERATOR","->",1687],["T_STRING","loadDdlCache",1687],"(",["T_VARIABLE","$cacheKey",1687],",",["T_WHITESPACE"," ",1687],["T_STRING","self",1687],["T_DOUBLE_COLON","::",1687],["T_STRING","DDL_DESCRIBE",1687],")",";",["T_WHITESPACE","\n        ",1687],["T_IF","if",1688],["T_WHITESPACE"," ",1688],"(",["T_VARIABLE","$ddl",1688],["T_WHITESPACE"," ",1688],["T_IS_IDENTICAL","===",1688],["T_WHITESPACE"," ",1688],["T_STRING","false",1688],")",["T_WHITESPACE"," ",1688],"{",["T_WHITESPACE","\n            ",1688],["T_VARIABLE","$ddl",1689],["T_WHITESPACE"," ",1689],"=",["T_WHITESPACE"," ",1689],["T_STRING","array_map",1689],"(",["T_WHITESPACE","\n                ",1689],["T_ARRAY","array",1690],"(",["T_WHITESPACE","\n                     ",1690],["T_VARIABLE","$this",1691],",",["T_WHITESPACE","\n                     ",1691],["T_CONSTANT_ENCAPSED_STRING","'decorateTableInfo'",1692],["T_WHITESPACE","\n                ",1692],")",",",["T_WHITESPACE","\n                ",1693],["T_STRING","parent",1694],["T_DOUBLE_COLON","::",1694],["T_STRING","describeTable",1694],"(",["T_VARIABLE","$tableName",1694],",",["T_WHITESPACE"," ",1694],["T_VARIABLE","$schemaName",1694],")",["T_WHITESPACE","\n            ",1694],")",";",["T_WHITESPACE","\n            ",1695],["T_DOC_COMMENT","\/**\n             * Remove bug in some MySQL versions, when int-column without default value is described as:\n             * having default empty string value\n             *\/",1696],["T_WHITESPACE","\n            ",1699],["T_VARIABLE","$affected",1700],["T_WHITESPACE"," ",1700],"=",["T_WHITESPACE"," ",1700],["T_ARRAY","array",1700],"(",["T_CONSTANT_ENCAPSED_STRING","'tinyint'",1700],",",["T_WHITESPACE"," ",1700],["T_CONSTANT_ENCAPSED_STRING","'smallint'",1700],",",["T_WHITESPACE"," ",1700],["T_CONSTANT_ENCAPSED_STRING","'mediumint'",1700],",",["T_WHITESPACE"," ",1700],["T_CONSTANT_ENCAPSED_STRING","'int'",1700],",",["T_WHITESPACE"," ",1700],["T_CONSTANT_ENCAPSED_STRING","'bigint'",1700],")",";",["T_WHITESPACE","\n            ",1700],["T_FOREACH","foreach",1701],["T_WHITESPACE"," ",1701],"(",["T_VARIABLE","$ddl",1701],["T_WHITESPACE"," ",1701],["T_AS","as",1701],["T_WHITESPACE"," ",1701],["T_VARIABLE","$key",1701],["T_WHITESPACE"," ",1701],["T_DOUBLE_ARROW","=>",1701],["T_WHITESPACE"," ",1701],["T_VARIABLE","$columnData",1701],")",["T_WHITESPACE"," ",1701],"{",["T_WHITESPACE","\n                ",1701],["T_IF","if",1702],["T_WHITESPACE"," ",1702],"(","(",["T_VARIABLE","$columnData",1702],"[",["T_CONSTANT_ENCAPSED_STRING","'DEFAULT'",1702],"]",["T_WHITESPACE"," ",1702],["T_IS_IDENTICAL","===",1702],["T_WHITESPACE"," ",1702],["T_CONSTANT_ENCAPSED_STRING","''",1702],")",["T_WHITESPACE"," ",1702],["T_BOOLEAN_AND","&&",1702],["T_WHITESPACE"," ",1702],"(",["T_STRING","array_search",1702],"(",["T_VARIABLE","$columnData",1702],"[",["T_CONSTANT_ENCAPSED_STRING","'DATA_TYPE'",1702],"]",",",["T_WHITESPACE"," ",1702],["T_VARIABLE","$affected",1702],")",["T_WHITESPACE"," ",1702],["T_IS_NOT_IDENTICAL","!==",1702],["T_WHITESPACE"," ",1702],["T_STRING","FALSE",1702],")",")",["T_WHITESPACE"," ",1702],"{",["T_WHITESPACE","\n                    ",1702],["T_VARIABLE","$ddl",1703],"[",["T_VARIABLE","$key",1703],"]","[",["T_CONSTANT_ENCAPSED_STRING","'DEFAULT'",1703],"]",["T_WHITESPACE"," ",1703],"=",["T_WHITESPACE"," ",1703],["T_STRING","null",1703],";",["T_WHITESPACE","\n                ",1703],"}",["T_WHITESPACE","\n            ",1704],"}",["T_WHITESPACE","\n            ",1705],["T_VARIABLE","$this",1706],["T_OBJECT_OPERATOR","->",1706],["T_STRING","saveDdlCache",1706],"(",["T_VARIABLE","$cacheKey",1706],",",["T_WHITESPACE"," ",1706],["T_STRING","self",1706],["T_DOUBLE_COLON","::",1706],["T_STRING","DDL_DESCRIBE",1706],",",["T_WHITESPACE"," ",1706],["T_VARIABLE","$ddl",1706],")",";",["T_WHITESPACE","\n        ",1706],"}",["T_WHITESPACE","\n\n        ",1707],["T_RETURN","return",1709],["T_WHITESPACE"," ",1709],["T_VARIABLE","$ddl",1709],";",["T_WHITESPACE","\n    ",1709],"}",["T_WHITESPACE","\n\n    ",1710],["T_DOC_COMMENT","\/**\n     * Format described column to definition, ready to be added to ddl table.\n     * Return array with keys: name, type, length, options, comment\n     *\n     * @param  array $columnData\n     * @return array\n     *\/",1712],["T_WHITESPACE","\n    ",1718],["T_PUBLIC","public",1719],["T_WHITESPACE"," ",1719],["T_FUNCTION","function",1719],["T_WHITESPACE"," ",1719],["T_STRING","getColumnCreateByDescribe",1719],"(",["T_VARIABLE","$columnData",1719],")",["T_WHITESPACE","\n    ",1719],"{",["T_WHITESPACE","\n        ",1720],["T_VARIABLE","$type",1721],["T_WHITESPACE"," ",1721],"=",["T_WHITESPACE"," ",1721],["T_VARIABLE","$this",1721],["T_OBJECT_OPERATOR","->",1721],["T_STRING","_getColumnTypeByDdl",1721],"(",["T_VARIABLE","$columnData",1721],")",";",["T_WHITESPACE","\n        ",1721],["T_VARIABLE","$options",1722],["T_WHITESPACE"," ",1722],"=",["T_WHITESPACE"," ",1722],["T_ARRAY","array",1722],"(",")",";",["T_WHITESPACE","\n\n        ",1722],["T_IF","if",1724],["T_WHITESPACE"," ",1724],"(",["T_VARIABLE","$columnData",1724],"[",["T_CONSTANT_ENCAPSED_STRING","'IDENTITY'",1724],"]",["T_WHITESPACE"," ",1724],["T_IS_IDENTICAL","===",1724],["T_WHITESPACE"," ",1724],["T_STRING","true",1724],")",["T_WHITESPACE"," ",1724],"{",["T_WHITESPACE","\n            ",1724],["T_VARIABLE","$options",1725],"[",["T_CONSTANT_ENCAPSED_STRING","'identity'",1725],"]",["T_WHITESPACE"," ",1725],"=",["T_WHITESPACE"," ",1725],["T_STRING","true",1725],";",["T_WHITESPACE","\n        ",1725],"}",["T_WHITESPACE","\n        ",1726],["T_IF","if",1727],["T_WHITESPACE"," ",1727],"(",["T_VARIABLE","$columnData",1727],"[",["T_CONSTANT_ENCAPSED_STRING","'UNSIGNED'",1727],"]",["T_WHITESPACE"," ",1727],["T_IS_IDENTICAL","===",1727],["T_WHITESPACE"," ",1727],["T_STRING","true",1727],")",["T_WHITESPACE"," ",1727],"{",["T_WHITESPACE","\n            ",1727],["T_VARIABLE","$options",1728],"[",["T_CONSTANT_ENCAPSED_STRING","'unsigned'",1728],"]",["T_WHITESPACE"," ",1728],"=",["T_WHITESPACE"," ",1728],["T_STRING","true",1728],";",["T_WHITESPACE","\n        ",1728],"}",["T_WHITESPACE","\n        ",1729],["T_IF","if",1730],["T_WHITESPACE"," ",1730],"(",["T_VARIABLE","$columnData",1730],"[",["T_CONSTANT_ENCAPSED_STRING","'NULLABLE'",1730],"]",["T_WHITESPACE"," ",1730],["T_IS_IDENTICAL","===",1730],["T_WHITESPACE"," ",1730],["T_STRING","false",1730],["T_WHITESPACE","\n            ",1730],["T_BOOLEAN_AND","&&",1731],["T_WHITESPACE"," ",1731],"!","(",["T_VARIABLE","$type",1731],["T_WHITESPACE"," ",1731],["T_IS_EQUAL","==",1731],["T_WHITESPACE"," ",1731],["T_STRING","Varien_Db_Ddl_Table",1731],["T_DOUBLE_COLON","::",1731],["T_STRING","TYPE_TEXT",1731],["T_WHITESPACE"," ",1731],["T_BOOLEAN_AND","&&",1731],["T_WHITESPACE"," ",1731],["T_STRING","strlen",1731],"(",["T_VARIABLE","$columnData",1731],"[",["T_CONSTANT_ENCAPSED_STRING","'DEFAULT'",1731],"]",")",["T_WHITESPACE"," ",1731],["T_IS_NOT_EQUAL","!=",1731],["T_WHITESPACE"," ",1731],["T_LNUMBER","0",1731],")",["T_WHITESPACE","\n        ",1731],")",["T_WHITESPACE"," ",1732],"{",["T_WHITESPACE","\n            ",1732],["T_VARIABLE","$options",1733],"[",["T_CONSTANT_ENCAPSED_STRING","'nullable'",1733],"]",["T_WHITESPACE"," ",1733],"=",["T_WHITESPACE"," ",1733],["T_STRING","false",1733],";",["T_WHITESPACE","\n        ",1733],"}",["T_WHITESPACE","\n        ",1734],["T_IF","if",1735],["T_WHITESPACE"," ",1735],"(",["T_VARIABLE","$columnData",1735],"[",["T_CONSTANT_ENCAPSED_STRING","'PRIMARY'",1735],"]",["T_WHITESPACE"," ",1735],["T_IS_IDENTICAL","===",1735],["T_WHITESPACE"," ",1735],["T_STRING","true",1735],")",["T_WHITESPACE"," ",1735],"{",["T_WHITESPACE","\n            ",1735],["T_VARIABLE","$options",1736],"[",["T_CONSTANT_ENCAPSED_STRING","'primary'",1736],"]",["T_WHITESPACE"," ",1736],"=",["T_WHITESPACE"," ",1736],["T_STRING","true",1736],";",["T_WHITESPACE","\n        ",1736],"}",["T_WHITESPACE","\n        ",1737],["T_IF","if",1738],["T_WHITESPACE"," ",1738],"(","!",["T_STRING","is_null",1738],"(",["T_VARIABLE","$columnData",1738],"[",["T_CONSTANT_ENCAPSED_STRING","'DEFAULT'",1738],"]",")",["T_WHITESPACE","\n            ",1738],["T_BOOLEAN_AND","&&",1739],["T_WHITESPACE"," ",1739],["T_VARIABLE","$type",1739],["T_WHITESPACE"," ",1739],["T_IS_NOT_EQUAL","!=",1739],["T_WHITESPACE"," ",1739],["T_STRING","Varien_Db_Ddl_Table",1739],["T_DOUBLE_COLON","::",1739],["T_STRING","TYPE_TEXT",1739],["T_WHITESPACE","\n        ",1739],")",["T_WHITESPACE"," ",1740],"{",["T_WHITESPACE","\n            ",1740],["T_VARIABLE","$options",1741],"[",["T_CONSTANT_ENCAPSED_STRING","'default'",1741],"]",["T_WHITESPACE"," ",1741],"=",["T_WHITESPACE"," ",1741],["T_VARIABLE","$this",1741],["T_OBJECT_OPERATOR","->",1741],["T_STRING","quote",1741],"(",["T_VARIABLE","$columnData",1741],"[",["T_CONSTANT_ENCAPSED_STRING","'DEFAULT'",1741],"]",")",";",["T_WHITESPACE","\n        ",1741],"}",["T_WHITESPACE","\n        ",1742],["T_IF","if",1743],["T_WHITESPACE"," ",1743],"(",["T_STRING","strlen",1743],"(",["T_VARIABLE","$columnData",1743],"[",["T_CONSTANT_ENCAPSED_STRING","'SCALE'",1743],"]",")",["T_WHITESPACE"," ",1743],">",["T_WHITESPACE"," ",1743],["T_LNUMBER","0",1743],")",["T_WHITESPACE"," ",1743],"{",["T_WHITESPACE","\n            ",1743],["T_VARIABLE","$options",1744],"[",["T_CONSTANT_ENCAPSED_STRING","'scale'",1744],"]",["T_WHITESPACE"," ",1744],"=",["T_WHITESPACE"," ",1744],["T_VARIABLE","$columnData",1744],"[",["T_CONSTANT_ENCAPSED_STRING","'SCALE'",1744],"]",";",["T_WHITESPACE","\n        ",1744],"}",["T_WHITESPACE","\n        ",1745],["T_IF","if",1746],["T_WHITESPACE"," ",1746],"(",["T_STRING","strlen",1746],"(",["T_VARIABLE","$columnData",1746],"[",["T_CONSTANT_ENCAPSED_STRING","'PRECISION'",1746],"]",")",["T_WHITESPACE"," ",1746],">",["T_WHITESPACE"," ",1746],["T_LNUMBER","0",1746],")",["T_WHITESPACE"," ",1746],"{",["T_WHITESPACE","\n            ",1746],["T_VARIABLE","$options",1747],"[",["T_CONSTANT_ENCAPSED_STRING","'precision'",1747],"]",["T_WHITESPACE"," ",1747],"=",["T_WHITESPACE"," ",1747],["T_VARIABLE","$columnData",1747],"[",["T_CONSTANT_ENCAPSED_STRING","'PRECISION'",1747],"]",";",["T_WHITESPACE","\n        ",1747],"}",["T_WHITESPACE","\n\n        ",1748],["T_VARIABLE","$comment",1750],["T_WHITESPACE"," ",1750],"=",["T_WHITESPACE"," ",1750],["T_STRING","uc_words",1750],"(",["T_VARIABLE","$columnData",1750],"[",["T_CONSTANT_ENCAPSED_STRING","'COLUMN_NAME'",1750],"]",",",["T_WHITESPACE"," ",1750],["T_CONSTANT_ENCAPSED_STRING","' '",1750],")",";",["T_WHITESPACE","\n\n        ",1750],["T_VARIABLE","$result",1752],["T_WHITESPACE"," ",1752],"=",["T_WHITESPACE"," ",1752],["T_ARRAY","array",1752],"(",["T_WHITESPACE","\n            ",1752],["T_CONSTANT_ENCAPSED_STRING","'name'",1753],["T_WHITESPACE","      ",1753],["T_DOUBLE_ARROW","=>",1753],["T_WHITESPACE"," ",1753],["T_VARIABLE","$columnData",1753],"[",["T_CONSTANT_ENCAPSED_STRING","'COLUMN_NAME'",1753],"]",",",["T_WHITESPACE","\n            ",1753],["T_CONSTANT_ENCAPSED_STRING","'type'",1754],["T_WHITESPACE","      ",1754],["T_DOUBLE_ARROW","=>",1754],["T_WHITESPACE"," ",1754],["T_VARIABLE","$type",1754],",",["T_WHITESPACE","\n            ",1754],["T_CONSTANT_ENCAPSED_STRING","'length'",1755],["T_WHITESPACE","    ",1755],["T_DOUBLE_ARROW","=>",1755],["T_WHITESPACE"," ",1755],["T_VARIABLE","$columnData",1755],"[",["T_CONSTANT_ENCAPSED_STRING","'LENGTH'",1755],"]",",",["T_WHITESPACE","\n            ",1755],["T_CONSTANT_ENCAPSED_STRING","'options'",1756],["T_WHITESPACE","   ",1756],["T_DOUBLE_ARROW","=>",1756],["T_WHITESPACE"," ",1756],["T_VARIABLE","$options",1756],",",["T_WHITESPACE","\n            ",1756],["T_CONSTANT_ENCAPSED_STRING","'comment'",1757],["T_WHITESPACE","   ",1757],["T_DOUBLE_ARROW","=>",1757],["T_WHITESPACE"," ",1757],["T_VARIABLE","$comment",1757],["T_WHITESPACE","\n        ",1757],")",";",["T_WHITESPACE","\n\n        ",1758],["T_RETURN","return",1760],["T_WHITESPACE"," ",1760],["T_VARIABLE","$result",1760],";",["T_WHITESPACE","\n    ",1760],"}",["T_WHITESPACE","\n\n    ",1761],["T_DOC_COMMENT","\/**\n     * Create Varien_Db_Ddl_Table object by data from describe table\n     *\n     * @param $tableName\n     * @param $newTableName\n     * @return Varien_Db_Ddl_Table\n     *\/",1763],["T_WHITESPACE","\n    ",1769],["T_PUBLIC","public",1770],["T_WHITESPACE"," ",1770],["T_FUNCTION","function",1770],["T_WHITESPACE"," ",1770],["T_STRING","createTableByDdl",1770],"(",["T_VARIABLE","$tableName",1770],",",["T_WHITESPACE"," ",1770],["T_VARIABLE","$newTableName",1770],")",["T_WHITESPACE","\n    ",1770],"{",["T_WHITESPACE","\n        ",1771],["T_VARIABLE","$describe",1772],["T_WHITESPACE"," ",1772],"=",["T_WHITESPACE"," ",1772],["T_VARIABLE","$this",1772],["T_OBJECT_OPERATOR","->",1772],["T_STRING","describeTable",1772],"(",["T_VARIABLE","$tableName",1772],")",";",["T_WHITESPACE","\n        ",1772],["T_VARIABLE","$table",1773],["T_WHITESPACE"," ",1773],"=",["T_WHITESPACE"," ",1773],["T_VARIABLE","$this",1773],["T_OBJECT_OPERATOR","->",1773],["T_STRING","newTable",1773],"(",["T_VARIABLE","$newTableName",1773],")",["T_WHITESPACE","\n            ",1773],["T_OBJECT_OPERATOR","->",1774],["T_STRING","setComment",1774],"(",["T_STRING","uc_words",1774],"(",["T_VARIABLE","$newTableName",1774],",",["T_WHITESPACE"," ",1774],["T_CONSTANT_ENCAPSED_STRING","' '",1774],")",")",";",["T_WHITESPACE","\n\n        ",1774],["T_FOREACH","foreach",1776],["T_WHITESPACE"," ",1776],"(",["T_VARIABLE","$describe",1776],["T_WHITESPACE"," ",1776],["T_AS","as",1776],["T_WHITESPACE"," ",1776],["T_VARIABLE","$columnData",1776],")",["T_WHITESPACE"," ",1776],"{",["T_WHITESPACE","\n            ",1776],["T_VARIABLE","$columnInfo",1777],["T_WHITESPACE"," ",1777],"=",["T_WHITESPACE"," ",1777],["T_VARIABLE","$this",1777],["T_OBJECT_OPERATOR","->",1777],["T_STRING","getColumnCreateByDescribe",1777],"(",["T_VARIABLE","$columnData",1777],")",";",["T_WHITESPACE","\n\n            ",1777],["T_VARIABLE","$table",1779],["T_OBJECT_OPERATOR","->",1779],["T_STRING","addColumn",1779],"(",["T_WHITESPACE","\n                ",1779],["T_VARIABLE","$columnInfo",1780],"[",["T_CONSTANT_ENCAPSED_STRING","'name'",1780],"]",",",["T_WHITESPACE","\n                ",1780],["T_VARIABLE","$columnInfo",1781],"[",["T_CONSTANT_ENCAPSED_STRING","'type'",1781],"]",",",["T_WHITESPACE","\n                ",1781],["T_VARIABLE","$columnInfo",1782],"[",["T_CONSTANT_ENCAPSED_STRING","'length'",1782],"]",",",["T_WHITESPACE","\n                ",1782],["T_VARIABLE","$columnInfo",1783],"[",["T_CONSTANT_ENCAPSED_STRING","'options'",1783],"]",",",["T_WHITESPACE","\n                ",1783],["T_VARIABLE","$columnInfo",1784],"[",["T_CONSTANT_ENCAPSED_STRING","'comment'",1784],"]",["T_WHITESPACE","\n            ",1784],")",";",["T_WHITESPACE","\n        ",1785],"}",["T_WHITESPACE","\n\n        ",1786],["T_VARIABLE","$indexes",1788],["T_WHITESPACE"," ",1788],"=",["T_WHITESPACE"," ",1788],["T_VARIABLE","$this",1788],["T_OBJECT_OPERATOR","->",1788],["T_STRING","getIndexList",1788],"(",["T_VARIABLE","$tableName",1788],")",";",["T_WHITESPACE","\n        ",1788],["T_FOREACH","foreach",1789],["T_WHITESPACE"," ",1789],"(",["T_VARIABLE","$indexes",1789],["T_WHITESPACE"," ",1789],["T_AS","as",1789],["T_WHITESPACE"," ",1789],["T_VARIABLE","$indexData",1789],")",["T_WHITESPACE"," ",1789],"{",["T_WHITESPACE","\n            ",1789],["T_DOC_COMMENT","\/**\n             * Do not create primary index - it is created with identity column.\n             * For reliability check both name and type, because these values can start to differ in future.\n             *\/",1790],["T_WHITESPACE","\n            ",1793],["T_IF","if",1794],["T_WHITESPACE"," ",1794],"(","(",["T_VARIABLE","$indexData",1794],"[",["T_CONSTANT_ENCAPSED_STRING","'KEY_NAME'",1794],"]",["T_WHITESPACE"," ",1794],["T_IS_EQUAL","==",1794],["T_WHITESPACE"," ",1794],["T_CONSTANT_ENCAPSED_STRING","'PRIMARY'",1794],")",["T_WHITESPACE","\n                ",1794],["T_BOOLEAN_OR","||",1795],["T_WHITESPACE"," ",1795],"(",["T_VARIABLE","$indexData",1795],"[",["T_CONSTANT_ENCAPSED_STRING","'INDEX_TYPE'",1795],"]",["T_WHITESPACE"," ",1795],["T_IS_EQUAL","==",1795],["T_WHITESPACE"," ",1795],["T_STRING","Varien_Db_Adapter_Interface",1795],["T_DOUBLE_COLON","::",1795],["T_STRING","INDEX_TYPE_PRIMARY",1795],")",["T_WHITESPACE","\n            ",1795],")",["T_WHITESPACE"," ",1796],"{",["T_WHITESPACE","\n                ",1796],["T_CONTINUE","continue",1797],";",["T_WHITESPACE","\n            ",1797],"}",["T_WHITESPACE","\n\n            ",1798],["T_VARIABLE","$fields",1800],["T_WHITESPACE"," ",1800],"=",["T_WHITESPACE"," ",1800],["T_VARIABLE","$indexData",1800],"[",["T_CONSTANT_ENCAPSED_STRING","'COLUMNS_LIST'",1800],"]",";",["T_WHITESPACE","\n            ",1800],["T_VARIABLE","$options",1801],["T_WHITESPACE"," ",1801],"=",["T_WHITESPACE"," ",1801],["T_ARRAY","array",1801],"(",["T_CONSTANT_ENCAPSED_STRING","'type'",1801],["T_WHITESPACE"," ",1801],["T_DOUBLE_ARROW","=>",1801],["T_WHITESPACE"," ",1801],["T_VARIABLE","$indexData",1801],"[",["T_CONSTANT_ENCAPSED_STRING","'INDEX_TYPE'",1801],"]",")",";",["T_WHITESPACE","\n            ",1801],["T_VARIABLE","$table",1802],["T_OBJECT_OPERATOR","->",1802],["T_STRING","addIndex",1802],"(",["T_VARIABLE","$this",1802],["T_OBJECT_OPERATOR","->",1802],["T_STRING","getIndexName",1802],"(",["T_VARIABLE","$newTableName",1802],",",["T_WHITESPACE"," ",1802],["T_VARIABLE","$fields",1802],",",["T_WHITESPACE"," ",1802],["T_VARIABLE","$indexData",1802],"[",["T_CONSTANT_ENCAPSED_STRING","'INDEX_TYPE'",1802],"]",")",",",["T_WHITESPACE"," ",1802],["T_VARIABLE","$fields",1802],",",["T_WHITESPACE"," ",1802],["T_VARIABLE","$options",1802],")",";",["T_WHITESPACE","\n        ",1802],"}",["T_WHITESPACE","\n\n        ",1803],["T_VARIABLE","$foreignKeys",1805],["T_WHITESPACE"," ",1805],"=",["T_WHITESPACE"," ",1805],["T_VARIABLE","$this",1805],["T_OBJECT_OPERATOR","->",1805],["T_STRING","getForeignKeys",1805],"(",["T_VARIABLE","$tableName",1805],")",";",["T_WHITESPACE","\n        ",1805],["T_FOREACH","foreach",1806],["T_WHITESPACE"," ",1806],"(",["T_VARIABLE","$foreignKeys",1806],["T_WHITESPACE"," ",1806],["T_AS","as",1806],["T_WHITESPACE"," ",1806],["T_VARIABLE","$keyData",1806],")",["T_WHITESPACE"," ",1806],"{",["T_WHITESPACE","\n            ",1806],["T_VARIABLE","$fkName",1807],["T_WHITESPACE"," ",1807],"=",["T_WHITESPACE"," ",1807],["T_VARIABLE","$this",1807],["T_OBJECT_OPERATOR","->",1807],["T_STRING","getForeignKeyName",1807],"(",["T_WHITESPACE","\n                ",1807],["T_VARIABLE","$newTableName",1808],",",["T_WHITESPACE"," ",1808],["T_VARIABLE","$keyData",1808],"[",["T_CONSTANT_ENCAPSED_STRING","'COLUMN_NAME'",1808],"]",",",["T_WHITESPACE"," ",1808],["T_VARIABLE","$keyData",1808],"[",["T_CONSTANT_ENCAPSED_STRING","'REF_TABLE_NAME'",1808],"]",",",["T_WHITESPACE"," ",1808],["T_VARIABLE","$keyData",1808],"[",["T_CONSTANT_ENCAPSED_STRING","'REF_COLUMN_NAME'",1808],"]",["T_WHITESPACE","\n            ",1808],")",";",["T_WHITESPACE","\n            ",1809],["T_VARIABLE","$onDelete",1810],["T_WHITESPACE"," ",1810],"=",["T_WHITESPACE"," ",1810],["T_VARIABLE","$this",1810],["T_OBJECT_OPERATOR","->",1810],["T_STRING","_getDdlAction",1810],"(",["T_VARIABLE","$keyData",1810],"[",["T_CONSTANT_ENCAPSED_STRING","'ON_DELETE'",1810],"]",")",";",["T_WHITESPACE","\n            ",1810],["T_VARIABLE","$onUpdate",1811],["T_WHITESPACE"," ",1811],"=",["T_WHITESPACE"," ",1811],["T_VARIABLE","$this",1811],["T_OBJECT_OPERATOR","->",1811],["T_STRING","_getDdlAction",1811],"(",["T_VARIABLE","$keyData",1811],"[",["T_CONSTANT_ENCAPSED_STRING","'ON_UPDATE'",1811],"]",")",";",["T_WHITESPACE","\n\n            ",1811],["T_VARIABLE","$table",1813],["T_OBJECT_OPERATOR","->",1813],["T_STRING","addForeignKey",1813],"(",["T_WHITESPACE","\n                ",1813],["T_VARIABLE","$fkName",1814],",",["T_WHITESPACE"," ",1814],["T_VARIABLE","$keyData",1814],"[",["T_CONSTANT_ENCAPSED_STRING","'COLUMN_NAME'",1814],"]",",",["T_WHITESPACE"," ",1814],["T_VARIABLE","$keyData",1814],"[",["T_CONSTANT_ENCAPSED_STRING","'REF_TABLE_NAME'",1814],"]",",",["T_WHITESPACE","\n                ",1814],["T_VARIABLE","$keyData",1815],"[",["T_CONSTANT_ENCAPSED_STRING","'REF_COLUMN_NAME'",1815],"]",",",["T_WHITESPACE"," ",1815],["T_VARIABLE","$onDelete",1815],",",["T_WHITESPACE"," ",1815],["T_VARIABLE","$onUpdate",1815],["T_WHITESPACE","\n            ",1815],")",";",["T_WHITESPACE","\n        ",1816],"}",["T_WHITESPACE","\n\n        ",1817],["T_COMMENT","\/\/ Set additional options\n",1819],["T_WHITESPACE","        ",1820],["T_VARIABLE","$tableData",1820],["T_WHITESPACE"," ",1820],"=",["T_WHITESPACE"," ",1820],["T_VARIABLE","$this",1820],["T_OBJECT_OPERATOR","->",1820],["T_STRING","showTableStatus",1820],"(",["T_VARIABLE","$tableName",1820],")",";",["T_WHITESPACE","\n        ",1820],["T_VARIABLE","$table",1821],["T_OBJECT_OPERATOR","->",1821],["T_STRING","setOption",1821],"(",["T_CONSTANT_ENCAPSED_STRING","'type'",1821],",",["T_WHITESPACE"," ",1821],["T_VARIABLE","$tableData",1821],"[",["T_CONSTANT_ENCAPSED_STRING","'Engine'",1821],"]",")",";",["T_WHITESPACE","\n\n        ",1821],["T_RETURN","return",1823],["T_WHITESPACE"," ",1823],["T_VARIABLE","$table",1823],";",["T_WHITESPACE","\n    ",1823],"}",["T_WHITESPACE","\n\n    ",1824],["T_DOC_COMMENT","\/**\n     * Modify the column definition by data from describe table\n     *\n     * @param string $tableName\n     * @param string $columnName\n     * @param array $definition\n     * @param boolean $flushData\n     * @param string $schemaName\n     * @return Varien_Db_Adapter_Pdo_Mysql\n     *\/",1826],["T_WHITESPACE","\n    ",1835],["T_PUBLIC","public",1836],["T_WHITESPACE"," ",1836],["T_FUNCTION","function",1836],["T_WHITESPACE"," ",1836],["T_STRING","modifyColumnByDdl",1836],"(",["T_VARIABLE","$tableName",1836],",",["T_WHITESPACE"," ",1836],["T_VARIABLE","$columnName",1836],",",["T_WHITESPACE"," ",1836],["T_VARIABLE","$definition",1836],",",["T_WHITESPACE"," ",1836],["T_VARIABLE","$flushData",1836],["T_WHITESPACE"," ",1836],"=",["T_WHITESPACE"," ",1836],["T_STRING","false",1836],",",["T_WHITESPACE"," ",1836],["T_VARIABLE","$schemaName",1836],["T_WHITESPACE"," ",1836],"=",["T_WHITESPACE"," ",1836],["T_STRING","null",1836],")",["T_WHITESPACE","\n    ",1836],"{",["T_WHITESPACE","\n        ",1837],["T_VARIABLE","$definition",1838],["T_WHITESPACE"," ",1838],"=",["T_WHITESPACE"," ",1838],["T_STRING","array_change_key_case",1838],"(",["T_VARIABLE","$definition",1838],",",["T_WHITESPACE"," ",1838],["T_STRING","CASE_UPPER",1838],")",";",["T_WHITESPACE","\n        ",1838],["T_VARIABLE","$definition",1839],"[",["T_CONSTANT_ENCAPSED_STRING","'COLUMN_TYPE'",1839],"]",["T_WHITESPACE"," ",1839],"=",["T_WHITESPACE"," ",1839],["T_VARIABLE","$this",1839],["T_OBJECT_OPERATOR","->",1839],["T_STRING","_getColumnTypeByDdl",1839],"(",["T_VARIABLE","$definition",1839],")",";",["T_WHITESPACE","\n        ",1839],["T_IF","if",1840],["T_WHITESPACE"," ",1840],"(",["T_STRING","array_key_exists",1840],"(",["T_CONSTANT_ENCAPSED_STRING","'DEFAULT'",1840],",",["T_WHITESPACE"," ",1840],["T_VARIABLE","$definition",1840],")",["T_WHITESPACE"," ",1840],["T_BOOLEAN_AND","&&",1840],["T_WHITESPACE"," ",1840],["T_STRING","is_null",1840],"(",["T_VARIABLE","$definition",1840],"[",["T_CONSTANT_ENCAPSED_STRING","'DEFAULT'",1840],"]",")",")",["T_WHITESPACE"," ",1840],"{",["T_WHITESPACE","\n            ",1840],["T_UNSET","unset",1841],"(",["T_VARIABLE","$definition",1841],"[",["T_CONSTANT_ENCAPSED_STRING","'DEFAULT'",1841],"]",")",";",["T_WHITESPACE","\n        ",1841],"}",["T_WHITESPACE","\n\n        ",1842],["T_RETURN","return",1844],["T_WHITESPACE"," ",1844],["T_VARIABLE","$this",1844],["T_OBJECT_OPERATOR","->",1844],["T_STRING","modifyColumn",1844],"(",["T_VARIABLE","$tableName",1844],",",["T_WHITESPACE"," ",1844],["T_VARIABLE","$columnName",1844],",",["T_WHITESPACE"," ",1844],["T_VARIABLE","$definition",1844],",",["T_WHITESPACE"," ",1844],["T_VARIABLE","$flushData",1844],",",["T_WHITESPACE"," ",1844],["T_VARIABLE","$schemaName",1844],")",";",["T_WHITESPACE","\n    ",1844],"}",["T_WHITESPACE","\n\n    ",1845],["T_DOC_COMMENT","\/**\n     * Retrieve column data type by data from describe table\n     *\n     * @param array $column\n     * @return string\n     *\/",1847],["T_WHITESPACE","\n    ",1852],["T_PROTECTED","protected",1853],["T_WHITESPACE"," ",1853],["T_FUNCTION","function",1853],["T_WHITESPACE"," ",1853],["T_STRING","_getColumnTypeByDdl",1853],"(",["T_VARIABLE","$column",1853],")",["T_WHITESPACE","\n    ",1853],"{",["T_WHITESPACE","\n        ",1854],["T_SWITCH","switch",1855],["T_WHITESPACE"," ",1855],"(",["T_VARIABLE","$column",1855],"[",["T_CONSTANT_ENCAPSED_STRING","'DATA_TYPE'",1855],"]",")",["T_WHITESPACE"," ",1855],"{",["T_WHITESPACE","\n            ",1855],["T_CASE","case",1856],["T_WHITESPACE"," ",1856],["T_CONSTANT_ENCAPSED_STRING","'bool'",1856],":",["T_WHITESPACE","\n                ",1856],["T_RETURN","return",1857],["T_WHITESPACE"," ",1857],["T_STRING","Varien_Db_Ddl_Table",1857],["T_DOUBLE_COLON","::",1857],["T_STRING","TYPE_BOOLEAN",1857],";",["T_WHITESPACE","\n            ",1857],["T_CASE","case",1858],["T_WHITESPACE"," ",1858],["T_CONSTANT_ENCAPSED_STRING","'tinytext'",1858],":",["T_WHITESPACE","\n            ",1858],["T_CASE","case",1859],["T_WHITESPACE"," ",1859],["T_CONSTANT_ENCAPSED_STRING","'char'",1859],":",["T_WHITESPACE","\n            ",1859],["T_CASE","case",1860],["T_WHITESPACE"," ",1860],["T_CONSTANT_ENCAPSED_STRING","'varchar'",1860],":",["T_WHITESPACE","\n            ",1860],["T_CASE","case",1861],["T_WHITESPACE"," ",1861],["T_CONSTANT_ENCAPSED_STRING","'text'",1861],":",["T_WHITESPACE","\n            ",1861],["T_CASE","case",1862],["T_WHITESPACE"," ",1862],["T_CONSTANT_ENCAPSED_STRING","'mediumtext'",1862],":",["T_WHITESPACE","\n            ",1862],["T_CASE","case",1863],["T_WHITESPACE"," ",1863],["T_CONSTANT_ENCAPSED_STRING","'longtext'",1863],":",["T_WHITESPACE","\n                ",1863],["T_RETURN","return",1864],["T_WHITESPACE"," ",1864],["T_STRING","Varien_Db_Ddl_Table",1864],["T_DOUBLE_COLON","::",1864],["T_STRING","TYPE_TEXT",1864],";",["T_WHITESPACE","\n            ",1864],["T_CASE","case",1865],["T_WHITESPACE"," ",1865],["T_CONSTANT_ENCAPSED_STRING","'blob'",1865],":",["T_WHITESPACE","\n            ",1865],["T_CASE","case",1866],["T_WHITESPACE"," ",1866],["T_CONSTANT_ENCAPSED_STRING","'mediumblob'",1866],":",["T_WHITESPACE","\n            ",1866],["T_CASE","case",1867],["T_WHITESPACE"," ",1867],["T_CONSTANT_ENCAPSED_STRING","'longblob'",1867],":",["T_WHITESPACE","\n                ",1867],["T_RETURN","return",1868],["T_WHITESPACE"," ",1868],["T_STRING","Varien_Db_Ddl_Table",1868],["T_DOUBLE_COLON","::",1868],["T_STRING","TYPE_BLOB",1868],";",["T_WHITESPACE","\n            ",1868],["T_CASE","case",1869],["T_WHITESPACE"," ",1869],["T_CONSTANT_ENCAPSED_STRING","'tinyint'",1869],":",["T_WHITESPACE","\n            ",1869],["T_CASE","case",1870],["T_WHITESPACE"," ",1870],["T_CONSTANT_ENCAPSED_STRING","'smallint'",1870],":",["T_WHITESPACE","\n                ",1870],["T_RETURN","return",1871],["T_WHITESPACE"," ",1871],["T_STRING","Varien_Db_Ddl_Table",1871],["T_DOUBLE_COLON","::",1871],["T_STRING","TYPE_SMALLINT",1871],";",["T_WHITESPACE","\n            ",1871],["T_CASE","case",1872],["T_WHITESPACE"," ",1872],["T_CONSTANT_ENCAPSED_STRING","'mediumint'",1872],":",["T_WHITESPACE","\n            ",1872],["T_CASE","case",1873],["T_WHITESPACE"," ",1873],["T_CONSTANT_ENCAPSED_STRING","'int'",1873],":",["T_WHITESPACE","\n                ",1873],["T_RETURN","return",1874],["T_WHITESPACE"," ",1874],["T_STRING","Varien_Db_Ddl_Table",1874],["T_DOUBLE_COLON","::",1874],["T_STRING","TYPE_INTEGER",1874],";",["T_WHITESPACE","\n            ",1874],["T_CASE","case",1875],["T_WHITESPACE"," ",1875],["T_CONSTANT_ENCAPSED_STRING","'bigint'",1875],":",["T_WHITESPACE","\n                ",1875],["T_RETURN","return",1876],["T_WHITESPACE"," ",1876],["T_STRING","Varien_Db_Ddl_Table",1876],["T_DOUBLE_COLON","::",1876],["T_STRING","TYPE_BIGINT",1876],";",["T_WHITESPACE","\n            ",1876],["T_CASE","case",1877],["T_WHITESPACE"," ",1877],["T_CONSTANT_ENCAPSED_STRING","'datetime'",1877],":",["T_WHITESPACE","\n                ",1877],["T_RETURN","return",1878],["T_WHITESPACE"," ",1878],["T_STRING","Varien_Db_Ddl_Table",1878],["T_DOUBLE_COLON","::",1878],["T_STRING","TYPE_DATETIME",1878],";",["T_WHITESPACE","\n            ",1878],["T_CASE","case",1879],["T_WHITESPACE"," ",1879],["T_CONSTANT_ENCAPSED_STRING","'timestamp'",1879],":",["T_WHITESPACE","\n                ",1879],["T_RETURN","return",1880],["T_WHITESPACE"," ",1880],["T_STRING","Varien_Db_Ddl_Table",1880],["T_DOUBLE_COLON","::",1880],["T_STRING","TYPE_TIMESTAMP",1880],";",["T_WHITESPACE","\n            ",1880],["T_CASE","case",1881],["T_WHITESPACE"," ",1881],["T_CONSTANT_ENCAPSED_STRING","'date'",1881],":",["T_WHITESPACE","\n                ",1881],["T_RETURN","return",1882],["T_WHITESPACE"," ",1882],["T_STRING","Varien_Db_Ddl_Table",1882],["T_DOUBLE_COLON","::",1882],["T_STRING","TYPE_DATE",1882],";",["T_WHITESPACE","\n            ",1882],["T_CASE","case",1883],["T_WHITESPACE"," ",1883],["T_CONSTANT_ENCAPSED_STRING","'float'",1883],":",["T_WHITESPACE","\n                ",1883],["T_RETURN","return",1884],["T_WHITESPACE"," ",1884],["T_STRING","Varien_Db_Ddl_Table",1884],["T_DOUBLE_COLON","::",1884],["T_STRING","TYPE_FLOAT",1884],";",["T_WHITESPACE","\n            ",1884],["T_CASE","case",1885],["T_WHITESPACE"," ",1885],["T_CONSTANT_ENCAPSED_STRING","'decimal'",1885],":",["T_WHITESPACE","\n            ",1885],["T_CASE","case",1886],["T_WHITESPACE"," ",1886],["T_CONSTANT_ENCAPSED_STRING","'numeric'",1886],":",["T_WHITESPACE","\n                ",1886],["T_RETURN","return",1887],["T_WHITESPACE"," ",1887],["T_STRING","Varien_Db_Ddl_Table",1887],["T_DOUBLE_COLON","::",1887],["T_STRING","TYPE_DECIMAL",1887],";",["T_WHITESPACE","\n            ",1887],["T_CASE","case",1888],["T_WHITESPACE"," ",1888],["T_CONSTANT_ENCAPSED_STRING","'varbinary'",1888],":",["T_WHITESPACE","\n                ",1888],["T_RETURN","return",1889],["T_WHITESPACE"," ",1889],["T_STRING","Varien_Db_Ddl_Table",1889],["T_DOUBLE_COLON","::",1889],["T_STRING","TYPE_VARBINARY",1889],";",["T_WHITESPACE","\n                ",1889],["T_BREAK","break",1890],";",["T_WHITESPACE","\n        ",1890],"}",["T_WHITESPACE","\n    ",1891],"}",["T_WHITESPACE","\n\n    ",1892],["T_DOC_COMMENT","\/**\n     * Truncate table\n     *\n     * @deprecated since 1.4.0.1\n     * @param string $tableName\n     * @param string $schemaName\n     * @return Varien_Db_Adapter_Pdo_Mysql\n     *\/",1894],["T_WHITESPACE","\n    ",1901],["T_PUBLIC","public",1902],["T_WHITESPACE"," ",1902],["T_FUNCTION","function",1902],["T_WHITESPACE"," ",1902],["T_STRING","truncate",1902],"(",["T_VARIABLE","$tableName",1902],",",["T_WHITESPACE"," ",1902],["T_VARIABLE","$schemaName",1902],["T_WHITESPACE"," ",1902],"=",["T_WHITESPACE"," ",1902],["T_STRING","null",1902],")",["T_WHITESPACE","\n    ",1902],"{",["T_WHITESPACE","\n        ",1903],["T_RETURN","return",1904],["T_WHITESPACE"," ",1904],["T_VARIABLE","$this",1904],["T_OBJECT_OPERATOR","->",1904],["T_STRING","truncateTable",1904],"(",["T_VARIABLE","$tableName",1904],",",["T_WHITESPACE"," ",1904],["T_VARIABLE","$schemaName",1904],")",";",["T_WHITESPACE","\n    ",1904],"}",["T_WHITESPACE","\n\n    ",1905],["T_DOC_COMMENT","\/**\n     * Change table storage engine\n     *\n     * @param string $tableName\n     * @param string $engine\n     * @param string $schemaName\n     * @return mixed\n     *\/",1907],["T_WHITESPACE","\n    ",1914],["T_PUBLIC","public",1915],["T_WHITESPACE"," ",1915],["T_FUNCTION","function",1915],["T_WHITESPACE"," ",1915],["T_STRING","changeTableEngine",1915],"(",["T_VARIABLE","$tableName",1915],",",["T_WHITESPACE"," ",1915],["T_VARIABLE","$engine",1915],",",["T_WHITESPACE"," ",1915],["T_VARIABLE","$schemaName",1915],["T_WHITESPACE"," ",1915],"=",["T_WHITESPACE"," ",1915],["T_STRING","null",1915],")",["T_WHITESPACE","\n    ",1915],"{",["T_WHITESPACE","\n        ",1916],["T_VARIABLE","$table",1917],["T_WHITESPACE"," ",1917],"=",["T_WHITESPACE"," ",1917],["T_VARIABLE","$this",1917],["T_OBJECT_OPERATOR","->",1917],["T_STRING","quoteIdentifier",1917],"(",["T_VARIABLE","$this",1917],["T_OBJECT_OPERATOR","->",1917],["T_STRING","_getTableName",1917],"(",["T_VARIABLE","$tableName",1917],",",["T_WHITESPACE"," ",1917],["T_VARIABLE","$schemaName",1917],")",")",";",["T_WHITESPACE","\n        ",1917],["T_VARIABLE","$sql",1918],["T_WHITESPACE","   ",1918],"=",["T_WHITESPACE"," ",1918],["T_STRING","sprintf",1918],"(",["T_CONSTANT_ENCAPSED_STRING","'ALTER TABLE %s ENGINE=%s'",1918],",",["T_WHITESPACE"," ",1918],["T_VARIABLE","$table",1918],",",["T_WHITESPACE"," ",1918],["T_VARIABLE","$engine",1918],")",";",["T_WHITESPACE","\n\n        ",1918],["T_RETURN","return",1920],["T_WHITESPACE"," ",1920],["T_VARIABLE","$this",1920],["T_OBJECT_OPERATOR","->",1920],["T_STRING","raw_query",1920],"(",["T_VARIABLE","$sql",1920],")",";",["T_WHITESPACE","\n    ",1920],"}",["T_WHITESPACE","\n\n    ",1921],["T_DOC_COMMENT","\/**\n     * Change table comment\n     *\n     * @param string $tableName\n     * @param string $comment\n     * @param string $schemaName\n     * @return mixed\n     *\/",1923],["T_WHITESPACE","\n    ",1930],["T_PUBLIC","public",1931],["T_WHITESPACE"," ",1931],["T_FUNCTION","function",1931],["T_WHITESPACE"," ",1931],["T_STRING","changeTableComment",1931],"(",["T_VARIABLE","$tableName",1931],",",["T_WHITESPACE"," ",1931],["T_VARIABLE","$comment",1931],",",["T_WHITESPACE"," ",1931],["T_VARIABLE","$schemaName",1931],["T_WHITESPACE"," ",1931],"=",["T_WHITESPACE"," ",1931],["T_STRING","null",1931],")",["T_WHITESPACE","\n    ",1931],"{",["T_WHITESPACE","\n        ",1932],["T_VARIABLE","$table",1933],["T_WHITESPACE"," ",1933],"=",["T_WHITESPACE"," ",1933],["T_VARIABLE","$this",1933],["T_OBJECT_OPERATOR","->",1933],["T_STRING","quoteIdentifier",1933],"(",["T_VARIABLE","$this",1933],["T_OBJECT_OPERATOR","->",1933],["T_STRING","_getTableName",1933],"(",["T_VARIABLE","$tableName",1933],",",["T_WHITESPACE"," ",1933],["T_VARIABLE","$schemaName",1933],")",")",";",["T_WHITESPACE","\n        ",1933],["T_VARIABLE","$sql",1934],["T_WHITESPACE","   ",1934],"=",["T_WHITESPACE"," ",1934],["T_STRING","sprintf",1934],"(",["T_CONSTANT_ENCAPSED_STRING","\"ALTER TABLE %s COMMENT='%s'\"",1934],",",["T_WHITESPACE"," ",1934],["T_VARIABLE","$table",1934],",",["T_WHITESPACE"," ",1934],["T_VARIABLE","$comment",1934],")",";",["T_WHITESPACE","\n\n        ",1934],["T_RETURN","return",1936],["T_WHITESPACE"," ",1936],["T_VARIABLE","$this",1936],["T_OBJECT_OPERATOR","->",1936],["T_STRING","raw_query",1936],"(",["T_VARIABLE","$sql",1936],")",";",["T_WHITESPACE","\n    ",1936],"}",["T_WHITESPACE","\n\n    ",1937],["T_DOC_COMMENT","\/**\n     * Change table auto increment value\n     *\n     * @param string $tableName\n     * @param string $increment\n     * @param null|string $schemaName\n     * @return Zend_Db_Statement_Interface\n     *\/",1939],["T_WHITESPACE","\n    ",1946],["T_PUBLIC","public",1947],["T_WHITESPACE"," ",1947],["T_FUNCTION","function",1947],["T_WHITESPACE"," ",1947],["T_STRING","changeTableAutoIncrement",1947],"(",["T_VARIABLE","$tableName",1947],",",["T_WHITESPACE"," ",1947],["T_VARIABLE","$increment",1947],",",["T_WHITESPACE"," ",1947],["T_VARIABLE","$schemaName",1947],["T_WHITESPACE"," ",1947],"=",["T_WHITESPACE"," ",1947],["T_STRING","null",1947],")",["T_WHITESPACE","\n    ",1947],"{",["T_WHITESPACE","\n        ",1948],["T_VARIABLE","$table",1949],["T_WHITESPACE"," ",1949],"=",["T_WHITESPACE"," ",1949],["T_VARIABLE","$this",1949],["T_OBJECT_OPERATOR","->",1949],["T_STRING","quoteIdentifier",1949],"(",["T_VARIABLE","$this",1949],["T_OBJECT_OPERATOR","->",1949],["T_STRING","_getTableName",1949],"(",["T_VARIABLE","$tableName",1949],",",["T_WHITESPACE"," ",1949],["T_VARIABLE","$schemaName",1949],")",")",";",["T_WHITESPACE","\n        ",1949],["T_VARIABLE","$sql",1950],["T_WHITESPACE"," ",1950],"=",["T_WHITESPACE"," ",1950],["T_STRING","sprintf",1950],"(",["T_CONSTANT_ENCAPSED_STRING","'ALTER TABLE %s AUTO_INCREMENT=%d'",1950],",",["T_WHITESPACE"," ",1950],["T_VARIABLE","$table",1950],",",["T_WHITESPACE"," ",1950],["T_VARIABLE","$increment",1950],")",";",["T_WHITESPACE","\n        ",1950],["T_RETURN","return",1951],["T_WHITESPACE"," ",1951],["T_VARIABLE","$this",1951],["T_OBJECT_OPERATOR","->",1951],["T_STRING","raw_query",1951],"(",["T_VARIABLE","$sql",1951],")",";",["T_WHITESPACE","\n    ",1951],"}",["T_WHITESPACE","\n\n    ",1952],["T_DOC_COMMENT","\/**\n     * Inserts a table row with specified data\n     * Special for Zero values to identity column\n     *\n     * @param string $table\n     * @param array $bind\n     * @return int The number of affected rows.\n     *\/",1954],["T_WHITESPACE","\n    ",1961],["T_PUBLIC","public",1962],["T_WHITESPACE"," ",1962],["T_FUNCTION","function",1962],["T_WHITESPACE"," ",1962],["T_STRING","insertForce",1962],"(",["T_VARIABLE","$table",1962],",",["T_WHITESPACE"," ",1962],["T_ARRAY","array",1962],["T_WHITESPACE"," ",1962],["T_VARIABLE","$bind",1962],")",["T_WHITESPACE","\n    ",1962],"{",["T_WHITESPACE","\n        ",1963],["T_VARIABLE","$this",1964],["T_OBJECT_OPERATOR","->",1964],["T_STRING","raw_query",1964],"(",["T_CONSTANT_ENCAPSED_STRING","\"SET @OLD_INSERT_SQL_MODE=@@SQL_MODE, SQL_MODE='NO_AUTO_VALUE_ON_ZERO'\"",1964],")",";",["T_WHITESPACE","\n        ",1964],["T_VARIABLE","$result",1965],["T_WHITESPACE"," ",1965],"=",["T_WHITESPACE"," ",1965],["T_VARIABLE","$this",1965],["T_OBJECT_OPERATOR","->",1965],["T_STRING","insert",1965],"(",["T_VARIABLE","$table",1965],",",["T_WHITESPACE"," ",1965],["T_VARIABLE","$bind",1965],")",";",["T_WHITESPACE","\n        ",1965],["T_VARIABLE","$this",1966],["T_OBJECT_OPERATOR","->",1966],["T_STRING","raw_query",1966],"(",["T_CONSTANT_ENCAPSED_STRING","\"SET SQL_MODE=IFNULL(@OLD_INSERT_SQL_MODE,'')\"",1966],")",";",["T_WHITESPACE","\n\n        ",1966],["T_RETURN","return",1968],["T_WHITESPACE"," ",1968],["T_VARIABLE","$result",1968],";",["T_WHITESPACE","\n    ",1968],"}",["T_WHITESPACE","\n\n    ",1969],["T_DOC_COMMENT","\/**\n     * Inserts a table row with specified data.\n     *\n     * @param mixed $table The table to insert data into.\n     * @param array $data Column-value pairs or array of column-value pairs.\n     * @param array $fields update fields pairs or values\n     * @return int The number of affected rows.\n     * @throws Zend_Db_Exception\n     *\/",1971],["T_WHITESPACE","\n    ",1979],["T_PUBLIC","public",1980],["T_WHITESPACE"," ",1980],["T_FUNCTION","function",1980],["T_WHITESPACE"," ",1980],["T_STRING","insertOnDuplicate",1980],"(",["T_VARIABLE","$table",1980],",",["T_WHITESPACE"," ",1980],["T_ARRAY","array",1980],["T_WHITESPACE"," ",1980],["T_VARIABLE","$data",1980],",",["T_WHITESPACE"," ",1980],["T_ARRAY","array",1980],["T_WHITESPACE"," ",1980],["T_VARIABLE","$fields",1980],["T_WHITESPACE"," ",1980],"=",["T_WHITESPACE"," ",1980],["T_ARRAY","array",1980],"(",")",")",["T_WHITESPACE","\n    ",1980],"{",["T_WHITESPACE","\n        ",1981],["T_COMMENT","\/\/ extract and quote col names from the array keys\n",1982],["T_WHITESPACE","        ",1983],["T_VARIABLE","$row",1983],["T_WHITESPACE","    ",1983],"=",["T_WHITESPACE"," ",1983],["T_STRING","reset",1983],"(",["T_VARIABLE","$data",1983],")",";",["T_WHITESPACE"," ",1983],["T_COMMENT","\/\/ get first element from data array\n",1983],["T_WHITESPACE","        ",1984],["T_VARIABLE","$bind",1984],["T_WHITESPACE","   ",1984],"=",["T_WHITESPACE"," ",1984],["T_ARRAY","array",1984],"(",")",";",["T_WHITESPACE"," ",1984],["T_COMMENT","\/\/ SQL bind array\n",1984],["T_WHITESPACE","        ",1985],["T_VARIABLE","$values",1985],["T_WHITESPACE"," ",1985],"=",["T_WHITESPACE"," ",1985],["T_ARRAY","array",1985],"(",")",";",["T_WHITESPACE","\n\n        ",1985],["T_IF","if",1987],["T_WHITESPACE"," ",1987],"(",["T_STRING","is_array",1987],"(",["T_VARIABLE","$row",1987],")",")",["T_WHITESPACE"," ",1987],"{",["T_WHITESPACE"," ",1987],["T_COMMENT","\/\/ Array of column-value pairs\n",1987],["T_WHITESPACE","            ",1988],["T_VARIABLE","$cols",1988],["T_WHITESPACE"," ",1988],"=",["T_WHITESPACE"," ",1988],["T_STRING","array_keys",1988],"(",["T_VARIABLE","$row",1988],")",";",["T_WHITESPACE","\n            ",1988],["T_FOREACH","foreach",1989],["T_WHITESPACE"," ",1989],"(",["T_VARIABLE","$data",1989],["T_WHITESPACE"," ",1989],["T_AS","as",1989],["T_WHITESPACE"," ",1989],["T_VARIABLE","$row",1989],")",["T_WHITESPACE"," ",1989],"{",["T_WHITESPACE","\n                ",1989],["T_IF","if",1990],["T_WHITESPACE"," ",1990],"(",["T_STRING","array_diff",1990],"(",["T_VARIABLE","$cols",1990],",",["T_WHITESPACE"," ",1990],["T_STRING","array_keys",1990],"(",["T_VARIABLE","$row",1990],")",")",")",["T_WHITESPACE"," ",1990],"{",["T_WHITESPACE","\n                    ",1990],["T_THROW","throw",1991],["T_WHITESPACE"," ",1991],["T_NEW","new",1991],["T_WHITESPACE"," ",1991],["T_STRING","Zend_Db_Exception",1991],"(",["T_CONSTANT_ENCAPSED_STRING","'Invalid data for insert'",1991],")",";",["T_WHITESPACE","\n                ",1991],"}",["T_WHITESPACE","\n                ",1992],["T_VARIABLE","$values",1993],"[","]",["T_WHITESPACE"," ",1993],"=",["T_WHITESPACE"," ",1993],["T_VARIABLE","$this",1993],["T_OBJECT_OPERATOR","->",1993],["T_STRING","_prepareInsertData",1993],"(",["T_VARIABLE","$row",1993],",",["T_WHITESPACE"," ",1993],["T_VARIABLE","$bind",1993],")",";",["T_WHITESPACE","\n            ",1993],"}",["T_WHITESPACE","\n            ",1994],["T_UNSET","unset",1995],"(",["T_VARIABLE","$row",1995],")",";",["T_WHITESPACE","\n        ",1995],"}",["T_WHITESPACE"," ",1996],["T_ELSE","else",1996],["T_WHITESPACE"," ",1996],"{",["T_WHITESPACE"," ",1996],["T_COMMENT","\/\/ Column-value pairs\n",1996],["T_WHITESPACE","            ",1997],["T_VARIABLE","$cols",1997],["T_WHITESPACE","     ",1997],"=",["T_WHITESPACE"," ",1997],["T_STRING","array_keys",1997],"(",["T_VARIABLE","$data",1997],")",";",["T_WHITESPACE","\n            ",1997],["T_VARIABLE","$values",1998],"[","]",["T_WHITESPACE"," ",1998],"=",["T_WHITESPACE"," ",1998],["T_VARIABLE","$this",1998],["T_OBJECT_OPERATOR","->",1998],["T_STRING","_prepareInsertData",1998],"(",["T_VARIABLE","$data",1998],",",["T_WHITESPACE"," ",1998],["T_VARIABLE","$bind",1998],")",";",["T_WHITESPACE","\n        ",1998],"}",["T_WHITESPACE","\n\n        ",1999],["T_VARIABLE","$updateFields",2001],["T_WHITESPACE"," ",2001],"=",["T_WHITESPACE"," ",2001],["T_ARRAY","array",2001],"(",")",";",["T_WHITESPACE","\n        ",2001],["T_IF","if",2002],["T_WHITESPACE"," ",2002],"(",["T_EMPTY","empty",2002],"(",["T_VARIABLE","$fields",2002],")",")",["T_WHITESPACE"," ",2002],"{",["T_WHITESPACE","\n            ",2002],["T_VARIABLE","$fields",2003],["T_WHITESPACE"," ",2003],"=",["T_WHITESPACE"," ",2003],["T_VARIABLE","$cols",2003],";",["T_WHITESPACE","\n        ",2003],"}",["T_WHITESPACE","\n\n        ",2004],["T_COMMENT","\/\/ quote column names\n",2006],["T_COMMENT","\/\/        $cols = array_map(array($this, 'quoteIdentifier'), $cols);\n",2007],["T_WHITESPACE","\n        ",2008],["T_COMMENT","\/\/ prepare ON DUPLICATE KEY conditions\n",2009],["T_WHITESPACE","        ",2010],["T_FOREACH","foreach",2010],["T_WHITESPACE"," ",2010],"(",["T_VARIABLE","$fields",2010],["T_WHITESPACE"," ",2010],["T_AS","as",2010],["T_WHITESPACE"," ",2010],["T_VARIABLE","$k",2010],["T_WHITESPACE"," ",2010],["T_DOUBLE_ARROW","=>",2010],["T_WHITESPACE"," ",2010],["T_VARIABLE","$v",2010],")",["T_WHITESPACE"," ",2010],"{",["T_WHITESPACE","\n            ",2010],["T_VARIABLE","$field",2011],["T_WHITESPACE"," ",2011],"=",["T_WHITESPACE"," ",2011],["T_VARIABLE","$value",2011],["T_WHITESPACE"," ",2011],"=",["T_WHITESPACE"," ",2011],["T_STRING","null",2011],";",["T_WHITESPACE","\n            ",2011],["T_IF","if",2012],["T_WHITESPACE"," ",2012],"(","!",["T_STRING","is_numeric",2012],"(",["T_VARIABLE","$k",2012],")",")",["T_WHITESPACE"," ",2012],"{",["T_WHITESPACE","\n                ",2012],["T_VARIABLE","$field",2013],["T_WHITESPACE"," ",2013],"=",["T_WHITESPACE"," ",2013],["T_VARIABLE","$this",2013],["T_OBJECT_OPERATOR","->",2013],["T_STRING","quoteIdentifier",2013],"(",["T_VARIABLE","$k",2013],")",";",["T_WHITESPACE","\n                ",2013],["T_IF","if",2014],["T_WHITESPACE"," ",2014],"(",["T_VARIABLE","$v",2014],["T_WHITESPACE"," ",2014],["T_INSTANCEOF","instanceof",2014],["T_WHITESPACE"," ",2014],["T_STRING","Zend_Db_Expr",2014],")",["T_WHITESPACE"," ",2014],"{",["T_WHITESPACE","\n                    ",2014],["T_VARIABLE","$value",2015],["T_WHITESPACE"," ",2015],"=",["T_WHITESPACE"," ",2015],["T_VARIABLE","$v",2015],["T_OBJECT_OPERATOR","->",2015],["T_STRING","__toString",2015],"(",")",";",["T_WHITESPACE","\n                ",2015],"}",["T_WHITESPACE"," ",2016],["T_ELSEIF","elseif",2016],["T_WHITESPACE"," ",2016],"(",["T_STRING","is_string",2016],"(",["T_VARIABLE","$v",2016],")",")",["T_WHITESPACE"," ",2016],"{",["T_WHITESPACE","\n                    ",2016],["T_VARIABLE","$value",2017],["T_WHITESPACE"," ",2017],"=",["T_WHITESPACE"," ",2017],["T_STRING","sprintf",2017],"(",["T_CONSTANT_ENCAPSED_STRING","'VALUES(%s)'",2017],",",["T_WHITESPACE"," ",2017],["T_VARIABLE","$this",2017],["T_OBJECT_OPERATOR","->",2017],["T_STRING","quoteIdentifier",2017],"(",["T_VARIABLE","$v",2017],")",")",";",["T_WHITESPACE","\n                ",2017],"}",["T_WHITESPACE"," ",2018],["T_ELSEIF","elseif",2018],["T_WHITESPACE"," ",2018],"(",["T_STRING","is_numeric",2018],"(",["T_VARIABLE","$v",2018],")",")",["T_WHITESPACE"," ",2018],"{",["T_WHITESPACE","\n                    ",2018],["T_VARIABLE","$value",2019],["T_WHITESPACE"," ",2019],"=",["T_WHITESPACE"," ",2019],["T_VARIABLE","$this",2019],["T_OBJECT_OPERATOR","->",2019],["T_STRING","quoteInto",2019],"(",["T_CONSTANT_ENCAPSED_STRING","'?'",2019],",",["T_WHITESPACE"," ",2019],["T_VARIABLE","$v",2019],")",";",["T_WHITESPACE","\n                ",2019],"}",["T_WHITESPACE","\n            ",2020],"}",["T_WHITESPACE"," ",2021],["T_ELSEIF","elseif",2021],["T_WHITESPACE"," ",2021],"(",["T_STRING","is_string",2021],"(",["T_VARIABLE","$v",2021],")",")",["T_WHITESPACE"," ",2021],"{",["T_WHITESPACE","\n                ",2021],["T_VARIABLE","$value",2022],["T_WHITESPACE"," ",2022],"=",["T_WHITESPACE"," ",2022],["T_STRING","sprintf",2022],"(",["T_CONSTANT_ENCAPSED_STRING","'VALUES(%s)'",2022],",",["T_WHITESPACE"," ",2022],["T_VARIABLE","$this",2022],["T_OBJECT_OPERATOR","->",2022],["T_STRING","quoteIdentifier",2022],"(",["T_VARIABLE","$v",2022],")",")",";",["T_WHITESPACE","\n                ",2022],["T_VARIABLE","$field",2023],["T_WHITESPACE"," ",2023],"=",["T_WHITESPACE"," ",2023],["T_VARIABLE","$this",2023],["T_OBJECT_OPERATOR","->",2023],["T_STRING","quoteIdentifier",2023],"(",["T_VARIABLE","$v",2023],")",";",["T_WHITESPACE","\n            ",2023],"}",["T_WHITESPACE","\n\n            ",2024],["T_IF","if",2026],["T_WHITESPACE"," ",2026],"(",["T_VARIABLE","$field",2026],["T_WHITESPACE"," ",2026],["T_BOOLEAN_AND","&&",2026],["T_WHITESPACE"," ",2026],["T_VARIABLE","$value",2026],")",["T_WHITESPACE"," ",2026],"{",["T_WHITESPACE","\n                ",2026],["T_VARIABLE","$updateFields",2027],"[","]",["T_WHITESPACE"," ",2027],"=",["T_WHITESPACE"," ",2027],["T_STRING","sprintf",2027],"(",["T_CONSTANT_ENCAPSED_STRING","'%s = %s'",2027],",",["T_WHITESPACE"," ",2027],["T_VARIABLE","$field",2027],",",["T_WHITESPACE"," ",2027],["T_VARIABLE","$value",2027],")",";",["T_WHITESPACE","\n            ",2027],"}",["T_WHITESPACE","\n        ",2028],"}",["T_WHITESPACE","\n\n        ",2029],["T_VARIABLE","$insertSql",2031],["T_WHITESPACE"," ",2031],"=",["T_WHITESPACE"," ",2031],["T_VARIABLE","$this",2031],["T_OBJECT_OPERATOR","->",2031],["T_STRING","_getInsertSqlQuery",2031],"(",["T_VARIABLE","$table",2031],",",["T_WHITESPACE"," ",2031],["T_VARIABLE","$cols",2031],",",["T_WHITESPACE"," ",2031],["T_VARIABLE","$values",2031],")",";",["T_WHITESPACE","\n        ",2031],["T_IF","if",2032],["T_WHITESPACE"," ",2032],"(",["T_VARIABLE","$updateFields",2032],")",["T_WHITESPACE"," ",2032],"{",["T_WHITESPACE","\n            ",2032],["T_VARIABLE","$insertSql",2033],["T_WHITESPACE"," ",2033],["T_CONCAT_EQUAL",".=",2033],["T_WHITESPACE"," ",2033],["T_CONSTANT_ENCAPSED_STRING","' ON DUPLICATE KEY UPDATE '",2033],["T_WHITESPACE"," ",2033],".",["T_WHITESPACE"," ",2033],["T_STRING","implode",2033],"(",["T_CONSTANT_ENCAPSED_STRING","', '",2033],",",["T_WHITESPACE"," ",2033],["T_VARIABLE","$updateFields",2033],")",";",["T_WHITESPACE","\n        ",2033],"}",["T_WHITESPACE","\n        ",2034],["T_COMMENT","\/\/ execute the statement and return the number of affected rows\n",2035],["T_WHITESPACE","        ",2036],["T_VARIABLE","$stmt",2036],["T_WHITESPACE","   ",2036],"=",["T_WHITESPACE"," ",2036],["T_VARIABLE","$this",2036],["T_OBJECT_OPERATOR","->",2036],["T_STRING","query",2036],"(",["T_VARIABLE","$insertSql",2036],",",["T_WHITESPACE"," ",2036],["T_STRING","array_values",2036],"(",["T_VARIABLE","$bind",2036],")",")",";",["T_WHITESPACE","\n        ",2036],["T_VARIABLE","$result",2037],["T_WHITESPACE"," ",2037],"=",["T_WHITESPACE"," ",2037],["T_VARIABLE","$stmt",2037],["T_OBJECT_OPERATOR","->",2037],["T_STRING","rowCount",2037],"(",")",";",["T_WHITESPACE","\n\n        ",2037],["T_RETURN","return",2039],["T_WHITESPACE"," ",2039],["T_VARIABLE","$result",2039],";",["T_WHITESPACE","\n    ",2039],"}",["T_WHITESPACE","\n\n    ",2040],["T_DOC_COMMENT","\/**\n     * Inserts a table multiply rows with specified data.\n     *\n     * @param mixed $table The table to insert data into.\n     * @param array $data Column-value pairs or array of Column-value pairs.\n     * @return int The number of affected rows.\n     * @throws Zend_Db_Exception\n     *\/",2042],["T_WHITESPACE","\n    ",2049],["T_PUBLIC","public",2050],["T_WHITESPACE"," ",2050],["T_FUNCTION","function",2050],["T_WHITESPACE"," ",2050],["T_STRING","insertMultiple",2050],"(",["T_VARIABLE","$table",2050],",",["T_WHITESPACE"," ",2050],["T_ARRAY","array",2050],["T_WHITESPACE"," ",2050],["T_VARIABLE","$data",2050],")",["T_WHITESPACE","\n    ",2050],"{",["T_WHITESPACE","\n        ",2051],["T_VARIABLE","$row",2052],["T_WHITESPACE"," ",2052],"=",["T_WHITESPACE"," ",2052],["T_STRING","reset",2052],"(",["T_VARIABLE","$data",2052],")",";",["T_WHITESPACE","\n        ",2052],["T_COMMENT","\/\/ support insert syntaxes\n",2053],["T_WHITESPACE","        ",2054],["T_IF","if",2054],["T_WHITESPACE"," ",2054],"(","!",["T_STRING","is_array",2054],"(",["T_VARIABLE","$row",2054],")",")",["T_WHITESPACE"," ",2054],"{",["T_WHITESPACE","\n            ",2054],["T_RETURN","return",2055],["T_WHITESPACE"," ",2055],["T_VARIABLE","$this",2055],["T_OBJECT_OPERATOR","->",2055],["T_STRING","insert",2055],"(",["T_VARIABLE","$table",2055],",",["T_WHITESPACE"," ",2055],["T_VARIABLE","$data",2055],")",";",["T_WHITESPACE","\n        ",2055],"}",["T_WHITESPACE","\n\n        ",2056],["T_COMMENT","\/\/ validate data array\n",2058],["T_WHITESPACE","        ",2059],["T_VARIABLE","$cols",2059],["T_WHITESPACE"," ",2059],"=",["T_WHITESPACE"," ",2059],["T_STRING","array_keys",2059],"(",["T_VARIABLE","$row",2059],")",";",["T_WHITESPACE","\n        ",2059],["T_VARIABLE","$insertArray",2060],["T_WHITESPACE"," ",2060],"=",["T_WHITESPACE"," ",2060],["T_ARRAY","array",2060],"(",")",";",["T_WHITESPACE","\n        ",2060],["T_FOREACH","foreach",2061],["T_WHITESPACE"," ",2061],"(",["T_VARIABLE","$data",2061],["T_WHITESPACE"," ",2061],["T_AS","as",2061],["T_WHITESPACE"," ",2061],["T_VARIABLE","$row",2061],")",["T_WHITESPACE"," ",2061],"{",["T_WHITESPACE","\n            ",2061],["T_VARIABLE","$line",2062],["T_WHITESPACE"," ",2062],"=",["T_WHITESPACE"," ",2062],["T_ARRAY","array",2062],"(",")",";",["T_WHITESPACE","\n            ",2062],["T_IF","if",2063],["T_WHITESPACE"," ",2063],"(",["T_STRING","array_diff",2063],"(",["T_VARIABLE","$cols",2063],",",["T_WHITESPACE"," ",2063],["T_STRING","array_keys",2063],"(",["T_VARIABLE","$row",2063],")",")",")",["T_WHITESPACE"," ",2063],"{",["T_WHITESPACE","\n                ",2063],["T_THROW","throw",2064],["T_WHITESPACE"," ",2064],["T_NEW","new",2064],["T_WHITESPACE"," ",2064],["T_STRING","Zend_Db_Exception",2064],"(",["T_CONSTANT_ENCAPSED_STRING","'Invalid data for insert'",2064],")",";",["T_WHITESPACE","\n            ",2064],"}",["T_WHITESPACE","\n            ",2065],["T_FOREACH","foreach",2066],["T_WHITESPACE"," ",2066],"(",["T_VARIABLE","$cols",2066],["T_WHITESPACE"," ",2066],["T_AS","as",2066],["T_WHITESPACE"," ",2066],["T_VARIABLE","$field",2066],")",["T_WHITESPACE"," ",2066],"{",["T_WHITESPACE","\n                ",2066],["T_VARIABLE","$line",2067],"[","]",["T_WHITESPACE"," ",2067],"=",["T_WHITESPACE"," ",2067],["T_VARIABLE","$row",2067],"[",["T_VARIABLE","$field",2067],"]",";",["T_WHITESPACE","\n            ",2067],"}",["T_WHITESPACE","\n            ",2068],["T_VARIABLE","$insertArray",2069],"[","]",["T_WHITESPACE"," ",2069],"=",["T_WHITESPACE"," ",2069],["T_VARIABLE","$line",2069],";",["T_WHITESPACE","\n        ",2069],"}",["T_WHITESPACE","\n        ",2070],["T_UNSET","unset",2071],"(",["T_VARIABLE","$row",2071],")",";",["T_WHITESPACE","\n\n        ",2071],["T_RETURN","return",2073],["T_WHITESPACE"," ",2073],["T_VARIABLE","$this",2073],["T_OBJECT_OPERATOR","->",2073],["T_STRING","insertArray",2073],"(",["T_VARIABLE","$table",2073],",",["T_WHITESPACE"," ",2073],["T_VARIABLE","$cols",2073],",",["T_WHITESPACE"," ",2073],["T_VARIABLE","$insertArray",2073],")",";",["T_WHITESPACE","\n    ",2073],"}",["T_WHITESPACE","\n\n    ",2074],["T_DOC_COMMENT","\/**\n     * Insert array to table based on columns definition\n     *\n     * @param   string $table\n     * @param   array $columns\n     * @param   array $data\n     * @return  int\n     * @throws  Zend_Db_Exception\n     *\/",2076],["T_WHITESPACE","\n    ",2084],["T_PUBLIC","public",2085],["T_WHITESPACE"," ",2085],["T_FUNCTION","function",2085],["T_WHITESPACE"," ",2085],["T_STRING","insertArray",2085],"(",["T_VARIABLE","$table",2085],",",["T_WHITESPACE"," ",2085],["T_ARRAY","array",2085],["T_WHITESPACE"," ",2085],["T_VARIABLE","$columns",2085],",",["T_WHITESPACE"," ",2085],["T_ARRAY","array",2085],["T_WHITESPACE"," ",2085],["T_VARIABLE","$data",2085],")",["T_WHITESPACE","\n    ",2085],"{",["T_WHITESPACE","\n        ",2086],["T_VARIABLE","$values",2087],["T_WHITESPACE","       ",2087],"=",["T_WHITESPACE"," ",2087],["T_ARRAY","array",2087],"(",")",";",["T_WHITESPACE","\n        ",2087],["T_VARIABLE","$bind",2088],["T_WHITESPACE","         ",2088],"=",["T_WHITESPACE"," ",2088],["T_ARRAY","array",2088],"(",")",";",["T_WHITESPACE","\n        ",2088],["T_VARIABLE","$columnsCount",2089],["T_WHITESPACE"," ",2089],"=",["T_WHITESPACE"," ",2089],["T_STRING","count",2089],"(",["T_VARIABLE","$columns",2089],")",";",["T_WHITESPACE","\n        ",2089],["T_FOREACH","foreach",2090],["T_WHITESPACE"," ",2090],"(",["T_VARIABLE","$data",2090],["T_WHITESPACE"," ",2090],["T_AS","as",2090],["T_WHITESPACE"," ",2090],["T_VARIABLE","$row",2090],")",["T_WHITESPACE"," ",2090],"{",["T_WHITESPACE","\n            ",2090],["T_IF","if",2091],["T_WHITESPACE"," ",2091],"(",["T_VARIABLE","$columnsCount",2091],["T_WHITESPACE"," ",2091],["T_IS_NOT_EQUAL","!=",2091],["T_WHITESPACE"," ",2091],["T_STRING","count",2091],"(",["T_VARIABLE","$row",2091],")",")",["T_WHITESPACE"," ",2091],"{",["T_WHITESPACE","\n                ",2091],["T_THROW","throw",2092],["T_WHITESPACE"," ",2092],["T_NEW","new",2092],["T_WHITESPACE"," ",2092],["T_STRING","Zend_Db_Exception",2092],"(",["T_CONSTANT_ENCAPSED_STRING","'Invalid data for insert'",2092],")",";",["T_WHITESPACE","\n            ",2092],"}",["T_WHITESPACE","\n            ",2093],["T_VARIABLE","$values",2094],"[","]",["T_WHITESPACE"," ",2094],"=",["T_WHITESPACE"," ",2094],["T_VARIABLE","$this",2094],["T_OBJECT_OPERATOR","->",2094],["T_STRING","_prepareInsertData",2094],"(",["T_VARIABLE","$row",2094],",",["T_WHITESPACE"," ",2094],["T_VARIABLE","$bind",2094],")",";",["T_WHITESPACE","\n        ",2094],"}",["T_WHITESPACE","\n\n        ",2095],["T_VARIABLE","$insertQuery",2097],["T_WHITESPACE"," ",2097],"=",["T_WHITESPACE"," ",2097],["T_VARIABLE","$this",2097],["T_OBJECT_OPERATOR","->",2097],["T_STRING","_getInsertSqlQuery",2097],"(",["T_VARIABLE","$table",2097],",",["T_WHITESPACE"," ",2097],["T_VARIABLE","$columns",2097],",",["T_WHITESPACE"," ",2097],["T_VARIABLE","$values",2097],")",";",["T_WHITESPACE","\n\n        ",2097],["T_COMMENT","\/\/ execute the statement and return the number of affected rows\n",2099],["T_WHITESPACE","        ",2100],["T_VARIABLE","$stmt",2100],["T_WHITESPACE","   ",2100],"=",["T_WHITESPACE"," ",2100],["T_VARIABLE","$this",2100],["T_OBJECT_OPERATOR","->",2100],["T_STRING","query",2100],"(",["T_VARIABLE","$insertQuery",2100],",",["T_WHITESPACE"," ",2100],["T_VARIABLE","$bind",2100],")",";",["T_WHITESPACE","\n        ",2100],["T_VARIABLE","$result",2101],["T_WHITESPACE"," ",2101],"=",["T_WHITESPACE"," ",2101],["T_VARIABLE","$stmt",2101],["T_OBJECT_OPERATOR","->",2101],["T_STRING","rowCount",2101],"(",")",";",["T_WHITESPACE","\n\n        ",2101],["T_RETURN","return",2103],["T_WHITESPACE"," ",2103],["T_VARIABLE","$result",2103],";",["T_WHITESPACE","\n    ",2103],"}",["T_WHITESPACE","\n\n    ",2104],["T_DOC_COMMENT","\/**\n     * Inserts a table row with specified data.\n     *\n     * @param mixed $table The table to insert data into.\n     * @param array $bind Column-value pairs.\n     * @return int The number of affected rows.\n     * @throws Zend_Db_Adapter_Exception\n     *\/",2106],["T_WHITESPACE","\n    ",2113],["T_PUBLIC","public",2114],["T_WHITESPACE"," ",2114],["T_FUNCTION","function",2114],["T_WHITESPACE"," ",2114],["T_STRING","insertIgnore",2114],"(",["T_VARIABLE","$table",2114],",",["T_WHITESPACE"," ",2114],["T_ARRAY","array",2114],["T_WHITESPACE"," ",2114],["T_VARIABLE","$bind",2114],")",["T_WHITESPACE","\n    ",2114],"{",["T_WHITESPACE","\n        ",2115],["T_COMMENT","\/\/ extract and quote col names from the array keys\n",2116],["T_WHITESPACE","        ",2117],["T_VARIABLE","$cols",2117],["T_WHITESPACE"," ",2117],"=",["T_WHITESPACE"," ",2117],["T_ARRAY","array",2117],"(",")",";",["T_WHITESPACE","\n        ",2117],["T_VARIABLE","$vals",2118],["T_WHITESPACE"," ",2118],"=",["T_WHITESPACE"," ",2118],["T_ARRAY","array",2118],"(",")",";",["T_WHITESPACE","\n        ",2118],["T_VARIABLE","$i",2119],["T_WHITESPACE"," ",2119],"=",["T_WHITESPACE"," ",2119],["T_LNUMBER","0",2119],";",["T_WHITESPACE","\n        ",2119],["T_FOREACH","foreach",2120],["T_WHITESPACE"," ",2120],"(",["T_VARIABLE","$bind",2120],["T_WHITESPACE"," ",2120],["T_AS","as",2120],["T_WHITESPACE"," ",2120],["T_VARIABLE","$col",2120],["T_WHITESPACE"," ",2120],["T_DOUBLE_ARROW","=>",2120],["T_WHITESPACE"," ",2120],["T_VARIABLE","$val",2120],")",["T_WHITESPACE"," ",2120],"{",["T_WHITESPACE","\n            ",2120],["T_VARIABLE","$cols",2121],"[","]",["T_WHITESPACE"," ",2121],"=",["T_WHITESPACE"," ",2121],["T_VARIABLE","$this",2121],["T_OBJECT_OPERATOR","->",2121],["T_STRING","quoteIdentifier",2121],"(",["T_VARIABLE","$col",2121],",",["T_WHITESPACE"," ",2121],["T_STRING","true",2121],")",";",["T_WHITESPACE","\n            ",2121],["T_IF","if",2122],["T_WHITESPACE"," ",2122],"(",["T_VARIABLE","$val",2122],["T_WHITESPACE"," ",2122],["T_INSTANCEOF","instanceof",2122],["T_WHITESPACE"," ",2122],["T_STRING","Zend_Db_Expr",2122],")",["T_WHITESPACE"," ",2122],"{",["T_WHITESPACE","\n                ",2122],["T_VARIABLE","$vals",2123],"[","]",["T_WHITESPACE"," ",2123],"=",["T_WHITESPACE"," ",2123],["T_VARIABLE","$val",2123],["T_OBJECT_OPERATOR","->",2123],["T_STRING","__toString",2123],"(",")",";",["T_WHITESPACE","\n                ",2123],["T_UNSET","unset",2124],"(",["T_VARIABLE","$bind",2124],"[",["T_VARIABLE","$col",2124],"]",")",";",["T_WHITESPACE","\n            ",2124],"}",["T_WHITESPACE"," ",2125],["T_ELSE","else",2125],["T_WHITESPACE"," ",2125],"{",["T_WHITESPACE","\n                ",2125],["T_IF","if",2126],["T_WHITESPACE"," ",2126],"(",["T_VARIABLE","$this",2126],["T_OBJECT_OPERATOR","->",2126],["T_STRING","supportsParameters",2126],"(",["T_CONSTANT_ENCAPSED_STRING","'positional'",2126],")",")",["T_WHITESPACE"," ",2126],"{",["T_WHITESPACE","\n                    ",2126],["T_VARIABLE","$vals",2127],"[","]",["T_WHITESPACE"," ",2127],"=",["T_WHITESPACE"," ",2127],["T_CONSTANT_ENCAPSED_STRING","'?'",2127],";",["T_WHITESPACE","\n                ",2127],"}",["T_WHITESPACE"," ",2128],["T_ELSE","else",2128],["T_WHITESPACE"," ",2128],"{",["T_WHITESPACE","\n                    ",2128],["T_IF","if",2129],["T_WHITESPACE"," ",2129],"(",["T_VARIABLE","$this",2129],["T_OBJECT_OPERATOR","->",2129],["T_STRING","supportsParameters",2129],"(",["T_CONSTANT_ENCAPSED_STRING","'named'",2129],")",")",["T_WHITESPACE"," ",2129],"{",["T_WHITESPACE","\n                        ",2129],["T_UNSET","unset",2130],"(",["T_VARIABLE","$bind",2130],"[",["T_VARIABLE","$col",2130],"]",")",";",["T_WHITESPACE","\n                        ",2130],["T_VARIABLE","$bind",2131],"[",["T_CONSTANT_ENCAPSED_STRING","':col'",2131],".",["T_VARIABLE","$i",2131],"]",["T_WHITESPACE"," ",2131],"=",["T_WHITESPACE"," ",2131],["T_VARIABLE","$val",2131],";",["T_WHITESPACE","\n                        ",2131],["T_VARIABLE","$vals",2132],"[","]",["T_WHITESPACE"," ",2132],"=",["T_WHITESPACE"," ",2132],["T_CONSTANT_ENCAPSED_STRING","':col'",2132],".",["T_VARIABLE","$i",2132],";",["T_WHITESPACE","\n                        ",2132],["T_VARIABLE","$i",2133],["T_INC","++",2133],";",["T_WHITESPACE","\n                    ",2133],"}",["T_WHITESPACE"," ",2134],["T_ELSE","else",2134],["T_WHITESPACE"," ",2134],"{",["T_WHITESPACE","\n                        ",2134],["T_DOC_COMMENT","\/** @see Zend_Db_Adapter_Exception *\/",2135],["T_WHITESPACE","\n                        ",2135],["T_COMMENT","#require_once 'Zend\/Db\/Adapter\/Exception.php';\n",2136],["T_WHITESPACE","                        ",2137],["T_THROW","throw",2137],["T_WHITESPACE"," ",2137],["T_NEW","new",2137],["T_WHITESPACE"," ",2137],["T_STRING","Zend_Db_Adapter_Exception",2137],"(",["T_WHITESPACE","\n                            ",2137],["T_STRING","get_class",2138],"(",["T_VARIABLE","$this",2138],")",["T_WHITESPACE"," ",2138],".",["T_CONSTANT_ENCAPSED_STRING","\" doesn't support positional or named binding\"",2138],["T_WHITESPACE","\n                        ",2138],")",";",["T_WHITESPACE","\n                    ",2139],"}",["T_WHITESPACE","\n                ",2140],"}",["T_WHITESPACE","\n            ",2141],"}",["T_WHITESPACE","\n        ",2142],"}",["T_WHITESPACE","\n\n        ",2143],["T_COMMENT","\/\/ build the statement\n",2145],["T_WHITESPACE","        ",2146],["T_VARIABLE","$sql",2146],["T_WHITESPACE"," ",2146],"=",["T_WHITESPACE"," ",2146],["T_CONSTANT_ENCAPSED_STRING","\"INSERT IGNORE INTO \"",2146],["T_WHITESPACE","\n            ",2146],".",["T_WHITESPACE"," ",2147],["T_VARIABLE","$this",2147],["T_OBJECT_OPERATOR","->",2147],["T_STRING","quoteIdentifier",2147],"(",["T_VARIABLE","$table",2147],",",["T_WHITESPACE"," ",2147],["T_STRING","true",2147],")",["T_WHITESPACE","\n            ",2147],".",["T_WHITESPACE"," ",2148],["T_CONSTANT_ENCAPSED_STRING","' ('",2148],["T_WHITESPACE"," ",2148],".",["T_WHITESPACE"," ",2148],["T_STRING","implode",2148],"(",["T_CONSTANT_ENCAPSED_STRING","', '",2148],",",["T_WHITESPACE"," ",2148],["T_VARIABLE","$cols",2148],")",["T_WHITESPACE"," ",2148],".",["T_WHITESPACE"," ",2148],["T_CONSTANT_ENCAPSED_STRING","') '",2148],["T_WHITESPACE","\n            ",2148],".",["T_WHITESPACE"," ",2149],["T_CONSTANT_ENCAPSED_STRING","'VALUES ('",2149],["T_WHITESPACE"," ",2149],".",["T_WHITESPACE"," ",2149],["T_STRING","implode",2149],"(",["T_CONSTANT_ENCAPSED_STRING","', '",2149],",",["T_WHITESPACE"," ",2149],["T_VARIABLE","$vals",2149],")",["T_WHITESPACE"," ",2149],".",["T_WHITESPACE"," ",2149],["T_CONSTANT_ENCAPSED_STRING","')'",2149],";",["T_WHITESPACE","\n\n        ",2149],["T_COMMENT","\/\/ execute the statement and return the number of affected rows\n",2151],["T_WHITESPACE","        ",2152],["T_IF","if",2152],["T_WHITESPACE"," ",2152],"(",["T_VARIABLE","$this",2152],["T_OBJECT_OPERATOR","->",2152],["T_STRING","supportsParameters",2152],"(",["T_CONSTANT_ENCAPSED_STRING","'positional'",2152],")",")",["T_WHITESPACE"," ",2152],"{",["T_WHITESPACE","\n            ",2152],["T_VARIABLE","$bind",2153],["T_WHITESPACE"," ",2153],"=",["T_WHITESPACE"," ",2153],["T_STRING","array_values",2153],"(",["T_VARIABLE","$bind",2153],")",";",["T_WHITESPACE","\n        ",2153],"}",["T_WHITESPACE","\n        ",2154],["T_VARIABLE","$stmt",2155],["T_WHITESPACE"," ",2155],"=",["T_WHITESPACE"," ",2155],["T_VARIABLE","$this",2155],["T_OBJECT_OPERATOR","->",2155],["T_STRING","query",2155],"(",["T_VARIABLE","$sql",2155],",",["T_WHITESPACE"," ",2155],["T_VARIABLE","$bind",2155],")",";",["T_WHITESPACE","\n        ",2155],["T_VARIABLE","$result",2156],["T_WHITESPACE"," ",2156],"=",["T_WHITESPACE"," ",2156],["T_VARIABLE","$stmt",2156],["T_OBJECT_OPERATOR","->",2156],["T_STRING","rowCount",2156],"(",")",";",["T_WHITESPACE","\n        ",2156],["T_RETURN","return",2157],["T_WHITESPACE"," ",2157],["T_VARIABLE","$result",2157],";",["T_WHITESPACE","\n    ",2157],"}",["T_WHITESPACE","\n\n    ",2158],["T_DOC_COMMENT","\/**\n     * Set cache adapter\n     *\n     * @param Zend_Cache_Backend_Interface $adapter\n     * @return Varien_Db_Adapter_Pdo_Mysql\n     *\/",2160],["T_WHITESPACE","\n    ",2165],["T_PUBLIC","public",2166],["T_WHITESPACE"," ",2166],["T_FUNCTION","function",2166],["T_WHITESPACE"," ",2166],["T_STRING","setCacheAdapter",2166],"(",["T_VARIABLE","$adapter",2166],")",["T_WHITESPACE","\n    ",2166],"{",["T_WHITESPACE","\n        ",2167],["T_VARIABLE","$this",2168],["T_OBJECT_OPERATOR","->",2168],["T_STRING","_cacheAdapter",2168],["T_WHITESPACE"," ",2168],"=",["T_WHITESPACE"," ",2168],["T_VARIABLE","$adapter",2168],";",["T_WHITESPACE","\n        ",2168],["T_RETURN","return",2169],["T_WHITESPACE"," ",2169],["T_VARIABLE","$this",2169],";",["T_WHITESPACE","\n    ",2169],"}",["T_WHITESPACE","\n\n    ",2170],["T_DOC_COMMENT","\/**\n     * Return new DDL Table object\n     *\n     * @param string $tableName the table name\n     * @param string $schemaName the database\/schema name\n     * @return Varien_Db_Ddl_Table\n     *\/",2172],["T_WHITESPACE","\n    ",2178],["T_PUBLIC","public",2179],["T_WHITESPACE"," ",2179],["T_FUNCTION","function",2179],["T_WHITESPACE"," ",2179],["T_STRING","newTable",2179],"(",["T_VARIABLE","$tableName",2179],["T_WHITESPACE"," ",2179],"=",["T_WHITESPACE"," ",2179],["T_STRING","null",2179],",",["T_WHITESPACE"," ",2179],["T_VARIABLE","$schemaName",2179],["T_WHITESPACE"," ",2179],"=",["T_WHITESPACE"," ",2179],["T_STRING","null",2179],")",["T_WHITESPACE","\n    ",2179],"{",["T_WHITESPACE","\n        ",2180],["T_VARIABLE","$table",2181],["T_WHITESPACE"," ",2181],"=",["T_WHITESPACE"," ",2181],["T_NEW","new",2181],["T_WHITESPACE"," ",2181],["T_STRING","Varien_Db_Ddl_Table",2181],"(",")",";",["T_WHITESPACE","\n        ",2181],["T_IF","if",2182],["T_WHITESPACE"," ",2182],"(",["T_VARIABLE","$tableName",2182],["T_WHITESPACE"," ",2182],["T_IS_NOT_IDENTICAL","!==",2182],["T_WHITESPACE"," ",2182],["T_STRING","null",2182],")",["T_WHITESPACE"," ",2182],"{",["T_WHITESPACE","\n            ",2182],["T_VARIABLE","$table",2183],["T_OBJECT_OPERATOR","->",2183],["T_STRING","setName",2183],"(",["T_VARIABLE","$tableName",2183],")",";",["T_WHITESPACE","\n        ",2183],"}",["T_WHITESPACE","\n        ",2184],["T_IF","if",2185],["T_WHITESPACE"," ",2185],"(",["T_VARIABLE","$schemaName",2185],["T_WHITESPACE"," ",2185],["T_IS_NOT_IDENTICAL","!==",2185],["T_WHITESPACE"," ",2185],["T_STRING","null",2185],")",["T_WHITESPACE"," ",2185],"{",["T_WHITESPACE","\n            ",2185],["T_VARIABLE","$table",2186],["T_OBJECT_OPERATOR","->",2186],["T_STRING","setSchema",2186],"(",["T_VARIABLE","$schemaName",2186],")",";",["T_WHITESPACE","\n        ",2186],"}",["T_WHITESPACE","\n\n        ",2187],["T_RETURN","return",2189],["T_WHITESPACE"," ",2189],["T_VARIABLE","$table",2189],";",["T_WHITESPACE","\n    ",2189],"}",["T_WHITESPACE","\n\n    ",2190],["T_DOC_COMMENT","\/**\n     * Create table\n     *\n     * @param Varien_Db_Ddl_Table $table\n     * @throws Zend_Db_Exception\n     * @return Zend_Db_Pdo_Statement\n     *\/",2192],["T_WHITESPACE","\n    ",2198],["T_PUBLIC","public",2199],["T_WHITESPACE"," ",2199],["T_FUNCTION","function",2199],["T_WHITESPACE"," ",2199],["T_STRING","createTable",2199],"(",["T_STRING","Varien_Db_Ddl_Table",2199],["T_WHITESPACE"," ",2199],["T_VARIABLE","$table",2199],")",["T_WHITESPACE","\n    ",2199],"{",["T_WHITESPACE","\n        ",2200],["T_VARIABLE","$columns",2201],["T_WHITESPACE"," ",2201],"=",["T_WHITESPACE"," ",2201],["T_VARIABLE","$table",2201],["T_OBJECT_OPERATOR","->",2201],["T_STRING","getColumns",2201],"(",")",";",["T_WHITESPACE","\n        ",2201],["T_FOREACH","foreach",2202],["T_WHITESPACE"," ",2202],"(",["T_VARIABLE","$columns",2202],["T_WHITESPACE"," ",2202],["T_AS","as",2202],["T_WHITESPACE"," ",2202],["T_VARIABLE","$columnEntry",2202],")",["T_WHITESPACE"," ",2202],"{",["T_WHITESPACE","\n            ",2202],["T_IF","if",2203],["T_WHITESPACE"," ",2203],"(",["T_EMPTY","empty",2203],"(",["T_VARIABLE","$columnEntry",2203],"[",["T_CONSTANT_ENCAPSED_STRING","'COMMENT'",2203],"]",")",")",["T_WHITESPACE"," ",2203],"{",["T_WHITESPACE","\n                ",2203],["T_THROW","throw",2204],["T_WHITESPACE"," ",2204],["T_NEW","new",2204],["T_WHITESPACE"," ",2204],["T_STRING","Zend_Db_Exception",2204],"(",["T_CONSTANT_ENCAPSED_STRING","\"Cannot create table without columns comments\"",2204],")",";",["T_WHITESPACE","\n            ",2204],"}",["T_WHITESPACE","\n        ",2205],"}",["T_WHITESPACE","\n\n        ",2206],["T_VARIABLE","$sqlFragment",2208],["T_WHITESPACE","    ",2208],"=",["T_WHITESPACE"," ",2208],["T_STRING","array_merge",2208],"(",["T_WHITESPACE","\n            ",2208],["T_VARIABLE","$this",2209],["T_OBJECT_OPERATOR","->",2209],["T_STRING","_getColumnsDefinition",2209],"(",["T_VARIABLE","$table",2209],")",",",["T_WHITESPACE","\n            ",2209],["T_VARIABLE","$this",2210],["T_OBJECT_OPERATOR","->",2210],["T_STRING","_getIndexesDefinition",2210],"(",["T_VARIABLE","$table",2210],")",",",["T_WHITESPACE","\n            ",2210],["T_VARIABLE","$this",2211],["T_OBJECT_OPERATOR","->",2211],["T_STRING","_getForeignKeysDefinition",2211],"(",["T_VARIABLE","$table",2211],")",["T_WHITESPACE","\n        ",2211],")",";",["T_WHITESPACE","\n        ",2212],["T_VARIABLE","$tableOptions",2213],["T_WHITESPACE","   ",2213],"=",["T_WHITESPACE"," ",2213],["T_VARIABLE","$this",2213],["T_OBJECT_OPERATOR","->",2213],["T_STRING","_getOptionsDefinition",2213],"(",["T_VARIABLE","$table",2213],")",";",["T_WHITESPACE","\n        ",2213],["T_VARIABLE","$sql",2214],["T_WHITESPACE"," ",2214],"=",["T_WHITESPACE"," ",2214],["T_STRING","sprintf",2214],"(",["T_CONSTANT_ENCAPSED_STRING","\"CREATE TABLE %s (\\n%s\\n) %s\"",2214],",",["T_WHITESPACE","\n            ",2214],["T_VARIABLE","$this",2215],["T_OBJECT_OPERATOR","->",2215],["T_STRING","quoteIdentifier",2215],"(",["T_VARIABLE","$table",2215],["T_OBJECT_OPERATOR","->",2215],["T_STRING","getName",2215],"(",")",")",",",["T_WHITESPACE","\n            ",2215],["T_STRING","implode",2216],"(",["T_CONSTANT_ENCAPSED_STRING","\",\\n\"",2216],",",["T_WHITESPACE"," ",2216],["T_VARIABLE","$sqlFragment",2216],")",",",["T_WHITESPACE","\n            ",2216],["T_STRING","implode",2217],"(",["T_CONSTANT_ENCAPSED_STRING","\" \"",2217],",",["T_WHITESPACE"," ",2217],["T_VARIABLE","$tableOptions",2217],")",")",";",["T_WHITESPACE","\n\n        ",2217],["T_RETURN","return",2219],["T_WHITESPACE"," ",2219],["T_VARIABLE","$this",2219],["T_OBJECT_OPERATOR","->",2219],["T_STRING","query",2219],"(",["T_VARIABLE","$sql",2219],")",";",["T_WHITESPACE","\n    ",2219],"}",["T_WHITESPACE","\n\n    ",2220],["T_DOC_COMMENT","\/**\n     * Create temporary table\n     *\n     * @param Varien_Db_Ddl_Table $table\n     * @throws Zend_Db_Exception\n     * @return Zend_Db_Pdo_Statement\n     *\/",2222],["T_WHITESPACE","\n    ",2228],["T_PUBLIC","public",2229],["T_WHITESPACE"," ",2229],["T_FUNCTION","function",2229],["T_WHITESPACE"," ",2229],["T_STRING","createTemporaryTable",2229],"(",["T_STRING","Varien_Db_Ddl_Table",2229],["T_WHITESPACE"," ",2229],["T_VARIABLE","$table",2229],")",["T_WHITESPACE","\n    ",2229],"{",["T_WHITESPACE","\n        ",2230],["T_VARIABLE","$sqlFragment",2231],["T_WHITESPACE","    ",2231],"=",["T_WHITESPACE"," ",2231],["T_STRING","array_merge",2231],"(",["T_WHITESPACE","\n            ",2231],["T_VARIABLE","$this",2232],["T_OBJECT_OPERATOR","->",2232],["T_STRING","_getColumnsDefinition",2232],"(",["T_VARIABLE","$table",2232],")",",",["T_WHITESPACE","\n            ",2232],["T_VARIABLE","$this",2233],["T_OBJECT_OPERATOR","->",2233],["T_STRING","_getIndexesDefinition",2233],"(",["T_VARIABLE","$table",2233],")",",",["T_WHITESPACE","\n            ",2233],["T_VARIABLE","$this",2234],["T_OBJECT_OPERATOR","->",2234],["T_STRING","_getForeignKeysDefinition",2234],"(",["T_VARIABLE","$table",2234],")",["T_WHITESPACE","\n        ",2234],")",";",["T_WHITESPACE","\n        ",2235],["T_VARIABLE","$tableOptions",2236],["T_WHITESPACE","   ",2236],"=",["T_WHITESPACE"," ",2236],["T_VARIABLE","$this",2236],["T_OBJECT_OPERATOR","->",2236],["T_STRING","_getOptionsDefinition",2236],"(",["T_VARIABLE","$table",2236],")",";",["T_WHITESPACE","\n        ",2236],["T_VARIABLE","$sql",2237],["T_WHITESPACE"," ",2237],"=",["T_WHITESPACE"," ",2237],["T_STRING","sprintf",2237],"(",["T_CONSTANT_ENCAPSED_STRING","\"CREATE TEMPORARY TABLE %s (\\n%s\\n) %s\"",2237],",",["T_WHITESPACE","\n            ",2237],["T_VARIABLE","$this",2238],["T_OBJECT_OPERATOR","->",2238],["T_STRING","quoteIdentifier",2238],"(",["T_VARIABLE","$table",2238],["T_OBJECT_OPERATOR","->",2238],["T_STRING","getName",2238],"(",")",")",",",["T_WHITESPACE","\n            ",2238],["T_STRING","implode",2239],"(",["T_CONSTANT_ENCAPSED_STRING","\",\\n\"",2239],",",["T_WHITESPACE"," ",2239],["T_VARIABLE","$sqlFragment",2239],")",",",["T_WHITESPACE","\n            ",2239],["T_STRING","implode",2240],"(",["T_CONSTANT_ENCAPSED_STRING","\" \"",2240],",",["T_WHITESPACE"," ",2240],["T_VARIABLE","$tableOptions",2240],")",")",";",["T_WHITESPACE","\n\n        ",2240],["T_RETURN","return",2242],["T_WHITESPACE"," ",2242],["T_VARIABLE","$this",2242],["T_OBJECT_OPERATOR","->",2242],["T_STRING","query",2242],"(",["T_VARIABLE","$sql",2242],")",";",["T_WHITESPACE","\n    ",2242],"}",["T_WHITESPACE","\n\n    ",2243],["T_DOC_COMMENT","\/**\n     * Retrieve columns and primary keys definition array for create table\n     *\n     * @param Varien_Db_Ddl_Table $table\n     * @return array\n     * @throws Zend_Db_Exception\n     *\/",2245],["T_WHITESPACE","\n    ",2251],["T_PROTECTED","protected",2252],["T_WHITESPACE"," ",2252],["T_FUNCTION","function",2252],["T_WHITESPACE"," ",2252],["T_STRING","_getColumnsDefinition",2252],"(",["T_STRING","Varien_Db_Ddl_Table",2252],["T_WHITESPACE"," ",2252],["T_VARIABLE","$table",2252],")",["T_WHITESPACE","\n    ",2252],"{",["T_WHITESPACE","\n        ",2253],["T_VARIABLE","$definition",2254],["T_WHITESPACE"," ",2254],"=",["T_WHITESPACE"," ",2254],["T_ARRAY","array",2254],"(",")",";",["T_WHITESPACE","\n        ",2254],["T_VARIABLE","$primary",2255],["T_WHITESPACE","    ",2255],"=",["T_WHITESPACE"," ",2255],["T_ARRAY","array",2255],"(",")",";",["T_WHITESPACE","\n        ",2255],["T_VARIABLE","$columns",2256],["T_WHITESPACE","    ",2256],"=",["T_WHITESPACE"," ",2256],["T_VARIABLE","$table",2256],["T_OBJECT_OPERATOR","->",2256],["T_STRING","getColumns",2256],"(",")",";",["T_WHITESPACE","\n        ",2256],["T_IF","if",2257],["T_WHITESPACE"," ",2257],"(",["T_EMPTY","empty",2257],"(",["T_VARIABLE","$columns",2257],")",")",["T_WHITESPACE"," ",2257],"{",["T_WHITESPACE","\n            ",2257],["T_THROW","throw",2258],["T_WHITESPACE"," ",2258],["T_NEW","new",2258],["T_WHITESPACE"," ",2258],["T_STRING","Zend_Db_Exception",2258],"(",["T_CONSTANT_ENCAPSED_STRING","'Table columns are not defined'",2258],")",";",["T_WHITESPACE","\n        ",2258],"}",["T_WHITESPACE","\n\n        ",2259],["T_FOREACH","foreach",2261],["T_WHITESPACE"," ",2261],"(",["T_VARIABLE","$columns",2261],["T_WHITESPACE"," ",2261],["T_AS","as",2261],["T_WHITESPACE"," ",2261],["T_VARIABLE","$columnData",2261],")",["T_WHITESPACE"," ",2261],"{",["T_WHITESPACE","\n            ",2261],["T_VARIABLE","$columnDefinition",2262],["T_WHITESPACE"," ",2262],"=",["T_WHITESPACE"," ",2262],["T_VARIABLE","$this",2262],["T_OBJECT_OPERATOR","->",2262],["T_STRING","_getColumnDefinition",2262],"(",["T_VARIABLE","$columnData",2262],")",";",["T_WHITESPACE","\n            ",2262],["T_IF","if",2263],["T_WHITESPACE"," ",2263],"(",["T_VARIABLE","$columnData",2263],"[",["T_CONSTANT_ENCAPSED_STRING","'PRIMARY'",2263],"]",")",["T_WHITESPACE"," ",2263],"{",["T_WHITESPACE","\n                ",2263],["T_VARIABLE","$primary",2264],"[",["T_VARIABLE","$columnData",2264],"[",["T_CONSTANT_ENCAPSED_STRING","'COLUMN_NAME'",2264],"]","]",["T_WHITESPACE"," ",2264],"=",["T_WHITESPACE"," ",2264],["T_VARIABLE","$columnData",2264],"[",["T_CONSTANT_ENCAPSED_STRING","'PRIMARY_POSITION'",2264],"]",";",["T_WHITESPACE","\n            ",2264],"}",["T_WHITESPACE","\n\n            ",2265],["T_VARIABLE","$definition",2267],"[","]",["T_WHITESPACE"," ",2267],"=",["T_WHITESPACE"," ",2267],["T_STRING","sprintf",2267],"(",["T_CONSTANT_ENCAPSED_STRING","'  %s %s'",2267],",",["T_WHITESPACE","\n                ",2267],["T_VARIABLE","$this",2268],["T_OBJECT_OPERATOR","->",2268],["T_STRING","quoteIdentifier",2268],"(",["T_VARIABLE","$columnData",2268],"[",["T_CONSTANT_ENCAPSED_STRING","'COLUMN_NAME'",2268],"]",")",",",["T_WHITESPACE","\n                ",2268],["T_VARIABLE","$columnDefinition",2269],["T_WHITESPACE","\n            ",2269],")",";",["T_WHITESPACE","\n        ",2270],"}",["T_WHITESPACE","\n\n        ",2271],["T_COMMENT","\/\/ PRIMARY KEY\n",2273],["T_WHITESPACE","        ",2274],["T_IF","if",2274],["T_WHITESPACE"," ",2274],"(","!",["T_EMPTY","empty",2274],"(",["T_VARIABLE","$primary",2274],")",")",["T_WHITESPACE"," ",2274],"{",["T_WHITESPACE","\n            ",2274],["T_STRING","asort",2275],"(",["T_VARIABLE","$primary",2275],",",["T_WHITESPACE"," ",2275],["T_STRING","SORT_NUMERIC",2275],")",";",["T_WHITESPACE","\n            ",2275],["T_VARIABLE","$primary",2276],["T_WHITESPACE","      ",2276],"=",["T_WHITESPACE"," ",2276],["T_STRING","array_map",2276],"(",["T_ARRAY","array",2276],"(",["T_VARIABLE","$this",2276],",",["T_WHITESPACE"," ",2276],["T_CONSTANT_ENCAPSED_STRING","'quoteIdentifier'",2276],")",",",["T_WHITESPACE"," ",2276],["T_STRING","array_keys",2276],"(",["T_VARIABLE","$primary",2276],")",")",";",["T_WHITESPACE","\n            ",2276],["T_VARIABLE","$definition",2277],"[","]",["T_WHITESPACE"," ",2277],"=",["T_WHITESPACE"," ",2277],["T_STRING","sprintf",2277],"(",["T_CONSTANT_ENCAPSED_STRING","'  PRIMARY KEY (%s)'",2277],",",["T_WHITESPACE"," ",2277],["T_STRING","implode",2277],"(",["T_CONSTANT_ENCAPSED_STRING","', '",2277],",",["T_WHITESPACE"," ",2277],["T_VARIABLE","$primary",2277],")",")",";",["T_WHITESPACE","\n        ",2277],"}",["T_WHITESPACE","\n\n        ",2278],["T_RETURN","return",2280],["T_WHITESPACE"," ",2280],["T_VARIABLE","$definition",2280],";",["T_WHITESPACE","\n    ",2280],"}",["T_WHITESPACE","\n\n    ",2281],["T_DOC_COMMENT","\/**\n     * Retrieve table indexes definition array for create table\n     *\n     * @param Varien_Db_Ddl_Table $table\n     * @return array\n     *\/",2283],["T_WHITESPACE","\n    ",2288],["T_PROTECTED","protected",2289],["T_WHITESPACE"," ",2289],["T_FUNCTION","function",2289],["T_WHITESPACE"," ",2289],["T_STRING","_getIndexesDefinition",2289],"(",["T_STRING","Varien_Db_Ddl_Table",2289],["T_WHITESPACE"," ",2289],["T_VARIABLE","$table",2289],")",["T_WHITESPACE","\n    ",2289],"{",["T_WHITESPACE","\n        ",2290],["T_VARIABLE","$definition",2291],["T_WHITESPACE"," ",2291],"=",["T_WHITESPACE"," ",2291],["T_ARRAY","array",2291],"(",")",";",["T_WHITESPACE","\n        ",2291],["T_VARIABLE","$indexes",2292],["T_WHITESPACE","    ",2292],"=",["T_WHITESPACE"," ",2292],["T_VARIABLE","$table",2292],["T_OBJECT_OPERATOR","->",2292],["T_STRING","getIndexes",2292],"(",")",";",["T_WHITESPACE","\n        ",2292],["T_IF","if",2293],["T_WHITESPACE"," ",2293],"(","!",["T_EMPTY","empty",2293],"(",["T_VARIABLE","$indexes",2293],")",")",["T_WHITESPACE"," ",2293],"{",["T_WHITESPACE","\n            ",2293],["T_FOREACH","foreach",2294],["T_WHITESPACE"," ",2294],"(",["T_VARIABLE","$indexes",2294],["T_WHITESPACE"," ",2294],["T_AS","as",2294],["T_WHITESPACE"," ",2294],["T_VARIABLE","$indexData",2294],")",["T_WHITESPACE"," ",2294],"{",["T_WHITESPACE","\n                ",2294],["T_IF","if",2295],["T_WHITESPACE"," ",2295],"(","!",["T_EMPTY","empty",2295],"(",["T_VARIABLE","$indexData",2295],"[",["T_CONSTANT_ENCAPSED_STRING","'TYPE'",2295],"]",")",")",["T_WHITESPACE"," ",2295],"{",["T_WHITESPACE","\n                    ",2295],["T_SWITCH","switch",2296],["T_WHITESPACE"," ",2296],"(",["T_VARIABLE","$indexData",2296],"[",["T_CONSTANT_ENCAPSED_STRING","'TYPE'",2296],"]",")",["T_WHITESPACE"," ",2296],"{",["T_WHITESPACE","\n                        ",2296],["T_CASE","case",2297],["T_WHITESPACE"," ",2297],["T_CONSTANT_ENCAPSED_STRING","'primary'",2297],":",["T_WHITESPACE","\n                            ",2297],["T_VARIABLE","$indexType",2298],["T_WHITESPACE"," ",2298],"=",["T_WHITESPACE"," ",2298],["T_CONSTANT_ENCAPSED_STRING","'PRIMARY KEY'",2298],";",["T_WHITESPACE","\n                            ",2298],["T_UNSET","unset",2299],"(",["T_VARIABLE","$indexData",2299],"[",["T_CONSTANT_ENCAPSED_STRING","'INDEX_NAME'",2299],"]",")",";",["T_WHITESPACE","\n                            ",2299],["T_BREAK","break",2300],";",["T_WHITESPACE","\n                        ",2300],["T_DEFAULT","default",2301],":",["T_WHITESPACE","\n                            ",2301],["T_VARIABLE","$indexType",2302],["T_WHITESPACE"," ",2302],"=",["T_WHITESPACE"," ",2302],["T_STRING","strtoupper",2302],"(",["T_VARIABLE","$indexData",2302],"[",["T_CONSTANT_ENCAPSED_STRING","'TYPE'",2302],"]",")",";",["T_WHITESPACE","\n                            ",2302],["T_BREAK","break",2303],";",["T_WHITESPACE","\n                    ",2303],"}",["T_WHITESPACE","\n                ",2304],"}",["T_WHITESPACE"," ",2305],["T_ELSE","else",2305],["T_WHITESPACE"," ",2305],"{",["T_WHITESPACE","\n                    ",2305],["T_VARIABLE","$indexType",2306],["T_WHITESPACE"," ",2306],"=",["T_WHITESPACE"," ",2306],["T_CONSTANT_ENCAPSED_STRING","'KEY'",2306],";",["T_WHITESPACE","\n                ",2306],"}",["T_WHITESPACE","\n\n                ",2307],["T_VARIABLE","$columns",2309],["T_WHITESPACE"," ",2309],"=",["T_WHITESPACE"," ",2309],["T_ARRAY","array",2309],"(",")",";",["T_WHITESPACE","\n                ",2309],["T_FOREACH","foreach",2310],["T_WHITESPACE"," ",2310],"(",["T_VARIABLE","$indexData",2310],"[",["T_CONSTANT_ENCAPSED_STRING","'COLUMNS'",2310],"]",["T_WHITESPACE"," ",2310],["T_AS","as",2310],["T_WHITESPACE"," ",2310],["T_VARIABLE","$columnData",2310],")",["T_WHITESPACE"," ",2310],"{",["T_WHITESPACE","\n                    ",2310],["T_VARIABLE","$column",2311],["T_WHITESPACE"," ",2311],"=",["T_WHITESPACE"," ",2311],["T_VARIABLE","$this",2311],["T_OBJECT_OPERATOR","->",2311],["T_STRING","quoteIdentifier",2311],"(",["T_VARIABLE","$columnData",2311],"[",["T_CONSTANT_ENCAPSED_STRING","'NAME'",2311],"]",")",";",["T_WHITESPACE","\n                    ",2311],["T_IF","if",2312],["T_WHITESPACE"," ",2312],"(","!",["T_EMPTY","empty",2312],"(",["T_VARIABLE","$columnData",2312],"[",["T_CONSTANT_ENCAPSED_STRING","'SIZE'",2312],"]",")",")",["T_WHITESPACE"," ",2312],"{",["T_WHITESPACE","\n                        ",2312],["T_VARIABLE","$column",2313],["T_WHITESPACE"," ",2313],["T_CONCAT_EQUAL",".=",2313],["T_WHITESPACE"," ",2313],["T_STRING","sprintf",2313],"(",["T_CONSTANT_ENCAPSED_STRING","'(%d)'",2313],",",["T_WHITESPACE"," ",2313],["T_VARIABLE","$columnData",2313],"[",["T_CONSTANT_ENCAPSED_STRING","'SIZE'",2313],"]",")",";",["T_WHITESPACE","\n                    ",2313],"}",["T_WHITESPACE","\n                    ",2314],["T_VARIABLE","$columns",2315],"[","]",["T_WHITESPACE"," ",2315],"=",["T_WHITESPACE"," ",2315],["T_VARIABLE","$column",2315],";",["T_WHITESPACE","\n                ",2315],"}",["T_WHITESPACE","\n                ",2316],["T_VARIABLE","$indexName",2317],["T_WHITESPACE"," ",2317],"=",["T_WHITESPACE"," ",2317],["T_ISSET","isset",2317],"(",["T_VARIABLE","$indexData",2317],"[",["T_CONSTANT_ENCAPSED_STRING","'INDEX_NAME'",2317],"]",")",["T_WHITESPACE"," ",2317],"?",["T_WHITESPACE"," ",2317],["T_VARIABLE","$this",2317],["T_OBJECT_OPERATOR","->",2317],["T_STRING","quoteIdentifier",2317],"(",["T_VARIABLE","$indexData",2317],"[",["T_CONSTANT_ENCAPSED_STRING","'INDEX_NAME'",2317],"]",")",["T_WHITESPACE"," ",2317],":",["T_WHITESPACE"," ",2317],["T_CONSTANT_ENCAPSED_STRING","''",2317],";",["T_WHITESPACE","\n                ",2317],["T_VARIABLE","$definition",2318],"[","]",["T_WHITESPACE"," ",2318],"=",["T_WHITESPACE"," ",2318],["T_STRING","sprintf",2318],"(",["T_CONSTANT_ENCAPSED_STRING","'  %s %s (%s)'",2318],",",["T_WHITESPACE","\n                    ",2318],["T_VARIABLE","$indexType",2319],",",["T_WHITESPACE","\n                    ",2319],["T_VARIABLE","$indexName",2320],",",["T_WHITESPACE","\n                    ",2320],["T_STRING","implode",2321],"(",["T_CONSTANT_ENCAPSED_STRING","', '",2321],",",["T_WHITESPACE"," ",2321],["T_VARIABLE","$columns",2321],")",["T_WHITESPACE","\n                ",2321],")",";",["T_WHITESPACE","\n            ",2322],"}",["T_WHITESPACE","\n        ",2323],"}",["T_WHITESPACE","\n\n        ",2324],["T_RETURN","return",2326],["T_WHITESPACE"," ",2326],["T_VARIABLE","$definition",2326],";",["T_WHITESPACE","\n    ",2326],"}",["T_WHITESPACE","\n\n    ",2327],["T_DOC_COMMENT","\/**\n     * Retrieve table foreign keys definition array for create table\n     *\n     * @param Varien_Db_Ddl_Table $table\n     * @return array\n     *\/",2329],["T_WHITESPACE","\n    ",2334],["T_PROTECTED","protected",2335],["T_WHITESPACE"," ",2335],["T_FUNCTION","function",2335],["T_WHITESPACE"," ",2335],["T_STRING","_getForeignKeysDefinition",2335],"(",["T_STRING","Varien_Db_Ddl_Table",2335],["T_WHITESPACE"," ",2335],["T_VARIABLE","$table",2335],")",["T_WHITESPACE","\n    ",2335],"{",["T_WHITESPACE","\n        ",2336],["T_VARIABLE","$definition",2337],["T_WHITESPACE"," ",2337],"=",["T_WHITESPACE"," ",2337],["T_ARRAY","array",2337],"(",")",";",["T_WHITESPACE","\n        ",2337],["T_VARIABLE","$relations",2338],["T_WHITESPACE","  ",2338],"=",["T_WHITESPACE"," ",2338],["T_VARIABLE","$table",2338],["T_OBJECT_OPERATOR","->",2338],["T_STRING","getForeignKeys",2338],"(",")",";",["T_WHITESPACE","\n\n        ",2338],["T_IF","if",2340],["T_WHITESPACE"," ",2340],"(","!",["T_EMPTY","empty",2340],"(",["T_VARIABLE","$relations",2340],")",")",["T_WHITESPACE"," ",2340],"{",["T_WHITESPACE","\n            ",2340],["T_FOREACH","foreach",2341],["T_WHITESPACE"," ",2341],"(",["T_VARIABLE","$relations",2341],["T_WHITESPACE"," ",2341],["T_AS","as",2341],["T_WHITESPACE"," ",2341],["T_VARIABLE","$fkData",2341],")",["T_WHITESPACE"," ",2341],"{",["T_WHITESPACE","\n                ",2341],["T_VARIABLE","$onDelete",2342],["T_WHITESPACE"," ",2342],"=",["T_WHITESPACE"," ",2342],["T_VARIABLE","$this",2342],["T_OBJECT_OPERATOR","->",2342],["T_STRING","_getDdlAction",2342],"(",["T_VARIABLE","$fkData",2342],"[",["T_CONSTANT_ENCAPSED_STRING","'ON_DELETE'",2342],"]",")",";",["T_WHITESPACE","\n                ",2342],["T_VARIABLE","$onUpdate",2343],["T_WHITESPACE"," ",2343],"=",["T_WHITESPACE"," ",2343],["T_VARIABLE","$this",2343],["T_OBJECT_OPERATOR","->",2343],["T_STRING","_getDdlAction",2343],"(",["T_VARIABLE","$fkData",2343],"[",["T_CONSTANT_ENCAPSED_STRING","'ON_UPDATE'",2343],"]",")",";",["T_WHITESPACE","\n\n                ",2343],["T_VARIABLE","$definition",2345],"[","]",["T_WHITESPACE"," ",2345],"=",["T_WHITESPACE"," ",2345],["T_STRING","sprintf",2345],"(",["T_CONSTANT_ENCAPSED_STRING","'  CONSTRAINT %s FOREIGN KEY (%s) REFERENCES %s (%s) ON DELETE %s ON UPDATE %s'",2345],",",["T_WHITESPACE","\n                    ",2345],["T_VARIABLE","$this",2346],["T_OBJECT_OPERATOR","->",2346],["T_STRING","quoteIdentifier",2346],"(",["T_VARIABLE","$fkData",2346],"[",["T_CONSTANT_ENCAPSED_STRING","'FK_NAME'",2346],"]",")",",",["T_WHITESPACE","\n                    ",2346],["T_VARIABLE","$this",2347],["T_OBJECT_OPERATOR","->",2347],["T_STRING","quoteIdentifier",2347],"(",["T_VARIABLE","$fkData",2347],"[",["T_CONSTANT_ENCAPSED_STRING","'COLUMN_NAME'",2347],"]",")",",",["T_WHITESPACE","\n                    ",2347],["T_VARIABLE","$this",2348],["T_OBJECT_OPERATOR","->",2348],["T_STRING","quoteIdentifier",2348],"(",["T_VARIABLE","$fkData",2348],"[",["T_CONSTANT_ENCAPSED_STRING","'REF_TABLE_NAME'",2348],"]",")",",",["T_WHITESPACE","\n                    ",2348],["T_VARIABLE","$this",2349],["T_OBJECT_OPERATOR","->",2349],["T_STRING","quoteIdentifier",2349],"(",["T_VARIABLE","$fkData",2349],"[",["T_CONSTANT_ENCAPSED_STRING","'REF_COLUMN_NAME'",2349],"]",")",",",["T_WHITESPACE","\n                    ",2349],["T_VARIABLE","$onDelete",2350],",",["T_WHITESPACE","\n                    ",2350],["T_VARIABLE","$onUpdate",2351],["T_WHITESPACE","\n                ",2351],")",";",["T_WHITESPACE","\n            ",2352],"}",["T_WHITESPACE","\n        ",2353],"}",["T_WHITESPACE","\n\n        ",2354],["T_RETURN","return",2356],["T_WHITESPACE"," ",2356],["T_VARIABLE","$definition",2356],";",["T_WHITESPACE","\n    ",2356],"}",["T_WHITESPACE","\n\n    ",2357],["T_DOC_COMMENT","\/**\n     * Retrieve table options definition array for create table\n     *\n     * @param Varien_Db_Ddl_Table $table\n     * @return array\n     * @throws Zend_Db_Exception\n     *\/",2359],["T_WHITESPACE","\n    ",2365],["T_PROTECTED","protected",2366],["T_WHITESPACE"," ",2366],["T_FUNCTION","function",2366],["T_WHITESPACE"," ",2366],["T_STRING","_getOptionsDefinition",2366],"(",["T_STRING","Varien_Db_Ddl_Table",2366],["T_WHITESPACE"," ",2366],["T_VARIABLE","$table",2366],")",["T_WHITESPACE","\n    ",2366],"{",["T_WHITESPACE","\n        ",2367],["T_VARIABLE","$definition",2368],["T_WHITESPACE"," ",2368],"=",["T_WHITESPACE"," ",2368],["T_ARRAY","array",2368],"(",")",";",["T_WHITESPACE","\n        ",2368],["T_VARIABLE","$comment",2369],["T_WHITESPACE","    ",2369],"=",["T_WHITESPACE"," ",2369],["T_VARIABLE","$table",2369],["T_OBJECT_OPERATOR","->",2369],["T_STRING","getComment",2369],"(",")",";",["T_WHITESPACE","\n        ",2369],["T_IF","if",2370],["T_WHITESPACE"," ",2370],"(",["T_EMPTY","empty",2370],"(",["T_VARIABLE","$comment",2370],")",")",["T_WHITESPACE"," ",2370],"{",["T_WHITESPACE","\n            ",2370],["T_THROW","throw",2371],["T_WHITESPACE"," ",2371],["T_NEW","new",2371],["T_WHITESPACE"," ",2371],["T_STRING","Zend_Db_Exception",2371],"(",["T_CONSTANT_ENCAPSED_STRING","'Comment for table is required and must be defined'",2371],")",";",["T_WHITESPACE","\n        ",2371],"}",["T_WHITESPACE","\n        ",2372],["T_VARIABLE","$definition",2373],"[","]",["T_WHITESPACE"," ",2373],"=",["T_WHITESPACE"," ",2373],["T_VARIABLE","$this",2373],["T_OBJECT_OPERATOR","->",2373],["T_STRING","quoteInto",2373],"(",["T_CONSTANT_ENCAPSED_STRING","'COMMENT=?'",2373],",",["T_WHITESPACE"," ",2373],["T_VARIABLE","$comment",2373],")",";",["T_WHITESPACE","\n\n        ",2373],["T_VARIABLE","$tableProps",2375],["T_WHITESPACE"," ",2375],"=",["T_WHITESPACE"," ",2375],["T_ARRAY","array",2375],"(",["T_WHITESPACE","\n            ",2375],["T_CONSTANT_ENCAPSED_STRING","'type'",2376],["T_WHITESPACE","              ",2376],["T_DOUBLE_ARROW","=>",2376],["T_WHITESPACE"," ",2376],["T_CONSTANT_ENCAPSED_STRING","'ENGINE=%s'",2376],",",["T_WHITESPACE","\n            ",2376],["T_CONSTANT_ENCAPSED_STRING","'checksum'",2377],["T_WHITESPACE","          ",2377],["T_DOUBLE_ARROW","=>",2377],["T_WHITESPACE"," ",2377],["T_CONSTANT_ENCAPSED_STRING","'CHECKSUM=%d'",2377],",",["T_WHITESPACE","\n            ",2377],["T_CONSTANT_ENCAPSED_STRING","'auto_increment'",2378],["T_WHITESPACE","    ",2378],["T_DOUBLE_ARROW","=>",2378],["T_WHITESPACE"," ",2378],["T_CONSTANT_ENCAPSED_STRING","'AUTO_INCREMENT=%d'",2378],",",["T_WHITESPACE","\n            ",2378],["T_CONSTANT_ENCAPSED_STRING","'avg_row_length'",2379],["T_WHITESPACE","    ",2379],["T_DOUBLE_ARROW","=>",2379],["T_WHITESPACE"," ",2379],["T_CONSTANT_ENCAPSED_STRING","'AVG_ROW_LENGTH=%d'",2379],",",["T_WHITESPACE","\n            ",2379],["T_CONSTANT_ENCAPSED_STRING","'max_rows'",2380],["T_WHITESPACE","          ",2380],["T_DOUBLE_ARROW","=>",2380],["T_WHITESPACE"," ",2380],["T_CONSTANT_ENCAPSED_STRING","'MAX_ROWS=%d'",2380],",",["T_WHITESPACE","\n            ",2380],["T_CONSTANT_ENCAPSED_STRING","'min_rows'",2381],["T_WHITESPACE","          ",2381],["T_DOUBLE_ARROW","=>",2381],["T_WHITESPACE"," ",2381],["T_CONSTANT_ENCAPSED_STRING","'MIN_ROWS=%d'",2381],",",["T_WHITESPACE","\n            ",2381],["T_CONSTANT_ENCAPSED_STRING","'delay_key_write'",2382],["T_WHITESPACE","   ",2382],["T_DOUBLE_ARROW","=>",2382],["T_WHITESPACE"," ",2382],["T_CONSTANT_ENCAPSED_STRING","'DELAY_KEY_WRITE=%d'",2382],",",["T_WHITESPACE","\n            ",2382],["T_CONSTANT_ENCAPSED_STRING","'row_format'",2383],["T_WHITESPACE","        ",2383],["T_DOUBLE_ARROW","=>",2383],["T_WHITESPACE"," ",2383],["T_CONSTANT_ENCAPSED_STRING","'row_format=%s'",2383],",",["T_WHITESPACE","\n            ",2383],["T_CONSTANT_ENCAPSED_STRING","'charset'",2384],["T_WHITESPACE","           ",2384],["T_DOUBLE_ARROW","=>",2384],["T_WHITESPACE"," ",2384],["T_CONSTANT_ENCAPSED_STRING","'charset=%s'",2384],",",["T_WHITESPACE","\n            ",2384],["T_CONSTANT_ENCAPSED_STRING","'collate'",2385],["T_WHITESPACE","           ",2385],["T_DOUBLE_ARROW","=>",2385],["T_WHITESPACE"," ",2385],["T_CONSTANT_ENCAPSED_STRING","'COLLATE=%s'",2385],["T_WHITESPACE","\n        ",2385],")",";",["T_WHITESPACE","\n        ",2386],["T_FOREACH","foreach",2387],["T_WHITESPACE"," ",2387],"(",["T_VARIABLE","$tableProps",2387],["T_WHITESPACE"," ",2387],["T_AS","as",2387],["T_WHITESPACE"," ",2387],["T_VARIABLE","$key",2387],["T_WHITESPACE"," ",2387],["T_DOUBLE_ARROW","=>",2387],["T_WHITESPACE"," ",2387],["T_VARIABLE","$mask",2387],")",["T_WHITESPACE"," ",2387],"{",["T_WHITESPACE","\n            ",2387],["T_VARIABLE","$v",2388],["T_WHITESPACE"," ",2388],"=",["T_WHITESPACE"," ",2388],["T_VARIABLE","$table",2388],["T_OBJECT_OPERATOR","->",2388],["T_STRING","getOption",2388],"(",["T_VARIABLE","$key",2388],")",";",["T_WHITESPACE","\n            ",2388],["T_IF","if",2389],["T_WHITESPACE"," ",2389],"(",["T_VARIABLE","$v",2389],["T_WHITESPACE"," ",2389],["T_IS_NOT_IDENTICAL","!==",2389],["T_WHITESPACE"," ",2389],["T_STRING","null",2389],")",["T_WHITESPACE"," ",2389],"{",["T_WHITESPACE","\n                ",2389],["T_VARIABLE","$definition",2390],"[","]",["T_WHITESPACE"," ",2390],"=",["T_WHITESPACE"," ",2390],["T_STRING","sprintf",2390],"(",["T_VARIABLE","$mask",2390],",",["T_WHITESPACE"," ",2390],["T_VARIABLE","$v",2390],")",";",["T_WHITESPACE","\n            ",2390],"}",["T_WHITESPACE","\n        ",2391],"}",["T_WHITESPACE","\n\n        ",2392],["T_RETURN","return",2394],["T_WHITESPACE"," ",2394],["T_VARIABLE","$definition",2394],";",["T_WHITESPACE","\n    ",2394],"}",["T_WHITESPACE","\n\n    ",2395],["T_DOC_COMMENT","\/**\n     * Get column definition from description\n     *\n     * @param  array $options\n     * @param  null|string $ddlType\n     * @return string\n     *\/",2397],["T_WHITESPACE","\n    ",2403],["T_PUBLIC","public",2404],["T_WHITESPACE"," ",2404],["T_FUNCTION","function",2404],["T_WHITESPACE"," ",2404],["T_STRING","getColumnDefinitionFromDescribe",2404],"(",["T_VARIABLE","$options",2404],",",["T_WHITESPACE"," ",2404],["T_VARIABLE","$ddlType",2404],["T_WHITESPACE"," ",2404],"=",["T_WHITESPACE"," ",2404],["T_STRING","null",2404],")",["T_WHITESPACE","\n    ",2404],"{",["T_WHITESPACE","\n        ",2405],["T_VARIABLE","$columnInfo",2406],["T_WHITESPACE"," ",2406],"=",["T_WHITESPACE"," ",2406],["T_VARIABLE","$this",2406],["T_OBJECT_OPERATOR","->",2406],["T_STRING","getColumnCreateByDescribe",2406],"(",["T_VARIABLE","$options",2406],")",";",["T_WHITESPACE","\n        ",2406],["T_FOREACH","foreach",2407],["T_WHITESPACE"," ",2407],"(",["T_VARIABLE","$columnInfo",2407],"[",["T_CONSTANT_ENCAPSED_STRING","'options'",2407],"]",["T_WHITESPACE"," ",2407],["T_AS","as",2407],["T_WHITESPACE"," ",2407],["T_VARIABLE","$key",2407],["T_WHITESPACE"," ",2407],["T_DOUBLE_ARROW","=>",2407],["T_WHITESPACE"," ",2407],["T_VARIABLE","$value",2407],")",["T_WHITESPACE"," ",2407],"{",["T_WHITESPACE","\n            ",2407],["T_VARIABLE","$columnInfo",2408],"[",["T_VARIABLE","$key",2408],"]",["T_WHITESPACE"," ",2408],"=",["T_WHITESPACE"," ",2408],["T_VARIABLE","$value",2408],";",["T_WHITESPACE","\n        ",2408],"}",["T_WHITESPACE","\n        ",2409],["T_RETURN","return",2410],["T_WHITESPACE"," ",2410],["T_VARIABLE","$this",2410],["T_OBJECT_OPERATOR","->",2410],["T_STRING","_getColumnDefinition",2410],"(",["T_VARIABLE","$columnInfo",2410],",",["T_WHITESPACE"," ",2410],["T_VARIABLE","$ddlType",2410],")",";",["T_WHITESPACE","\n    ",2410],"}",["T_WHITESPACE","\n\n    ",2411],["T_DOC_COMMENT","\/**\n     * Retrieve column definition fragment\n     *\n     * @param array $options\n     * @param string $ddlType Table DDL Column type constant\n     * @throws Varien_Exception\n     * @return string\n     * @throws Zend_Db_Exception\n     *\/",2413],["T_WHITESPACE","\n    ",2421],["T_PROTECTED","protected",2422],["T_WHITESPACE"," ",2422],["T_FUNCTION","function",2422],["T_WHITESPACE"," ",2422],["T_STRING","_getColumnDefinition",2422],"(",["T_VARIABLE","$options",2422],",",["T_WHITESPACE"," ",2422],["T_VARIABLE","$ddlType",2422],["T_WHITESPACE"," ",2422],"=",["T_WHITESPACE"," ",2422],["T_STRING","null",2422],")",["T_WHITESPACE","\n    ",2422],"{",["T_WHITESPACE","\n        ",2423],["T_COMMENT","\/\/ convert keys to uppercase\n",2424],["T_WHITESPACE","        ",2425],["T_VARIABLE","$options",2425],["T_WHITESPACE","    ",2425],"=",["T_WHITESPACE"," ",2425],["T_STRING","array_change_key_case",2425],"(",["T_VARIABLE","$options",2425],",",["T_WHITESPACE"," ",2425],["T_STRING","CASE_UPPER",2425],")",";",["T_WHITESPACE","\n        ",2425],["T_VARIABLE","$cType",2426],["T_WHITESPACE","      ",2426],"=",["T_WHITESPACE"," ",2426],["T_STRING","null",2426],";",["T_WHITESPACE","\n        ",2426],["T_VARIABLE","$cUnsigned",2427],["T_WHITESPACE","  ",2427],"=",["T_WHITESPACE"," ",2427],["T_STRING","false",2427],";",["T_WHITESPACE","\n        ",2427],["T_VARIABLE","$cNullable",2428],["T_WHITESPACE","  ",2428],"=",["T_WHITESPACE"," ",2428],["T_STRING","true",2428],";",["T_WHITESPACE","\n        ",2428],["T_VARIABLE","$cDefault",2429],["T_WHITESPACE","   ",2429],"=",["T_WHITESPACE"," ",2429],["T_STRING","false",2429],";",["T_WHITESPACE","\n        ",2429],["T_VARIABLE","$cIdentity",2430],["T_WHITESPACE","  ",2430],"=",["T_WHITESPACE"," ",2430],["T_STRING","false",2430],";",["T_WHITESPACE","\n\n        ",2430],["T_COMMENT","\/\/ detect and validate column type\n",2432],["T_WHITESPACE","        ",2433],["T_IF","if",2433],["T_WHITESPACE"," ",2433],"(",["T_VARIABLE","$ddlType",2433],["T_WHITESPACE"," ",2433],["T_IS_IDENTICAL","===",2433],["T_WHITESPACE"," ",2433],["T_STRING","null",2433],")",["T_WHITESPACE"," ",2433],"{",["T_WHITESPACE","\n            ",2433],["T_VARIABLE","$ddlType",2434],["T_WHITESPACE"," ",2434],"=",["T_WHITESPACE"," ",2434],["T_VARIABLE","$this",2434],["T_OBJECT_OPERATOR","->",2434],["T_STRING","_getDdlType",2434],"(",["T_VARIABLE","$options",2434],")",";",["T_WHITESPACE","\n        ",2434],"}",["T_WHITESPACE","\n\n        ",2435],["T_IF","if",2437],["T_WHITESPACE"," ",2437],"(",["T_EMPTY","empty",2437],"(",["T_VARIABLE","$ddlType",2437],")",["T_WHITESPACE"," ",2437],["T_BOOLEAN_OR","||",2437],["T_WHITESPACE"," ",2437],"!",["T_ISSET","isset",2437],"(",["T_VARIABLE","$this",2437],["T_OBJECT_OPERATOR","->",2437],["T_STRING","_ddlColumnTypes",2437],"[",["T_VARIABLE","$ddlType",2437],"]",")",")",["T_WHITESPACE"," ",2437],"{",["T_WHITESPACE","\n            ",2437],["T_THROW","throw",2438],["T_WHITESPACE"," ",2438],["T_NEW","new",2438],["T_WHITESPACE"," ",2438],["T_STRING","Zend_Db_Exception",2438],"(",["T_CONSTANT_ENCAPSED_STRING","'Invalid column definition data'",2438],")",";",["T_WHITESPACE","\n        ",2438],"}",["T_WHITESPACE","\n\n        ",2439],["T_COMMENT","\/\/ column size\n",2441],["T_WHITESPACE","        ",2442],["T_VARIABLE","$cType",2442],["T_WHITESPACE"," ",2442],"=",["T_WHITESPACE"," ",2442],["T_VARIABLE","$this",2442],["T_OBJECT_OPERATOR","->",2442],["T_STRING","_ddlColumnTypes",2442],"[",["T_VARIABLE","$ddlType",2442],"]",";",["T_WHITESPACE","\n        ",2442],["T_SWITCH","switch",2443],["T_WHITESPACE"," ",2443],"(",["T_VARIABLE","$ddlType",2443],")",["T_WHITESPACE"," ",2443],"{",["T_WHITESPACE","\n            ",2443],["T_CASE","case",2444],["T_WHITESPACE"," ",2444],["T_STRING","Varien_Db_Ddl_Table",2444],["T_DOUBLE_COLON","::",2444],["T_STRING","TYPE_SMALLINT",2444],":",["T_WHITESPACE","\n            ",2444],["T_CASE","case",2445],["T_WHITESPACE"," ",2445],["T_STRING","Varien_Db_Ddl_Table",2445],["T_DOUBLE_COLON","::",2445],["T_STRING","TYPE_INTEGER",2445],":",["T_WHITESPACE","\n            ",2445],["T_CASE","case",2446],["T_WHITESPACE"," ",2446],["T_STRING","Varien_Db_Ddl_Table",2446],["T_DOUBLE_COLON","::",2446],["T_STRING","TYPE_BIGINT",2446],":",["T_WHITESPACE","\n                ",2446],["T_IF","if",2447],["T_WHITESPACE"," ",2447],"(","!",["T_EMPTY","empty",2447],"(",["T_VARIABLE","$options",2447],"[",["T_CONSTANT_ENCAPSED_STRING","'UNSIGNED'",2447],"]",")",")",["T_WHITESPACE"," ",2447],"{",["T_WHITESPACE","\n                    ",2447],["T_VARIABLE","$cUnsigned",2448],["T_WHITESPACE"," ",2448],"=",["T_WHITESPACE"," ",2448],["T_STRING","true",2448],";",["T_WHITESPACE","\n                ",2448],"}",["T_WHITESPACE","\n                ",2449],["T_BREAK","break",2450],";",["T_WHITESPACE","\n            ",2450],["T_CASE","case",2451],["T_WHITESPACE"," ",2451],["T_STRING","Varien_Db_Ddl_Table",2451],["T_DOUBLE_COLON","::",2451],["T_STRING","TYPE_DECIMAL",2451],":",["T_WHITESPACE","\n            ",2451],["T_CASE","case",2452],["T_WHITESPACE"," ",2452],["T_STRING","Varien_Db_Ddl_Table",2452],["T_DOUBLE_COLON","::",2452],["T_STRING","TYPE_NUMERIC",2452],":",["T_WHITESPACE","\n                ",2452],["T_VARIABLE","$precision",2453],["T_WHITESPACE","  ",2453],"=",["T_WHITESPACE"," ",2453],["T_LNUMBER","10",2453],";",["T_WHITESPACE","\n                ",2453],["T_VARIABLE","$scale",2454],["T_WHITESPACE","      ",2454],"=",["T_WHITESPACE"," ",2454],["T_LNUMBER","0",2454],";",["T_WHITESPACE","\n                ",2454],["T_VARIABLE","$match",2455],["T_WHITESPACE","      ",2455],"=",["T_WHITESPACE"," ",2455],["T_ARRAY","array",2455],"(",")",";",["T_WHITESPACE","\n                ",2455],["T_IF","if",2456],["T_WHITESPACE"," ",2456],"(","!",["T_EMPTY","empty",2456],"(",["T_VARIABLE","$options",2456],"[",["T_CONSTANT_ENCAPSED_STRING","'LENGTH'",2456],"]",")",["T_WHITESPACE"," ",2456],["T_BOOLEAN_AND","&&",2456],["T_WHITESPACE"," ",2456],["T_STRING","preg_match",2456],"(",["T_CONSTANT_ENCAPSED_STRING","'#^\\(?(\\d+),(\\d+)\\)?$#'",2456],",",["T_WHITESPACE"," ",2456],["T_VARIABLE","$options",2456],"[",["T_CONSTANT_ENCAPSED_STRING","'LENGTH'",2456],"]",",",["T_WHITESPACE"," ",2456],["T_VARIABLE","$match",2456],")",")",["T_WHITESPACE"," ",2456],"{",["T_WHITESPACE","\n                    ",2456],["T_VARIABLE","$precision",2457],["T_WHITESPACE","  ",2457],"=",["T_WHITESPACE"," ",2457],["T_VARIABLE","$match",2457],"[",["T_LNUMBER","1",2457],"]",";",["T_WHITESPACE","\n                    ",2457],["T_VARIABLE","$scale",2458],["T_WHITESPACE","      ",2458],"=",["T_WHITESPACE"," ",2458],["T_VARIABLE","$match",2458],"[",["T_LNUMBER","2",2458],"]",";",["T_WHITESPACE","\n                ",2458],"}",["T_WHITESPACE"," ",2459],["T_ELSE","else",2459],["T_WHITESPACE"," ",2459],"{",["T_WHITESPACE","\n                    ",2459],["T_IF","if",2460],["T_WHITESPACE"," ",2460],"(",["T_ISSET","isset",2460],"(",["T_VARIABLE","$options",2460],"[",["T_CONSTANT_ENCAPSED_STRING","'SCALE'",2460],"]",")",["T_WHITESPACE"," ",2460],["T_BOOLEAN_AND","&&",2460],["T_WHITESPACE"," ",2460],["T_STRING","is_numeric",2460],"(",["T_VARIABLE","$options",2460],"[",["T_CONSTANT_ENCAPSED_STRING","'SCALE'",2460],"]",")",")",["T_WHITESPACE"," ",2460],"{",["T_WHITESPACE","\n                        ",2460],["T_VARIABLE","$scale",2461],["T_WHITESPACE"," ",2461],"=",["T_WHITESPACE"," ",2461],["T_VARIABLE","$options",2461],"[",["T_CONSTANT_ENCAPSED_STRING","'SCALE'",2461],"]",";",["T_WHITESPACE","\n                    ",2461],"}",["T_WHITESPACE","\n                    ",2462],["T_IF","if",2463],["T_WHITESPACE"," ",2463],"(",["T_ISSET","isset",2463],"(",["T_VARIABLE","$options",2463],"[",["T_CONSTANT_ENCAPSED_STRING","'PRECISION'",2463],"]",")",["T_WHITESPACE"," ",2463],["T_BOOLEAN_AND","&&",2463],["T_WHITESPACE"," ",2463],["T_STRING","is_numeric",2463],"(",["T_VARIABLE","$options",2463],"[",["T_CONSTANT_ENCAPSED_STRING","'PRECISION'",2463],"]",")",")",["T_WHITESPACE"," ",2463],"{",["T_WHITESPACE","\n                        ",2463],["T_VARIABLE","$precision",2464],["T_WHITESPACE"," ",2464],"=",["T_WHITESPACE"," ",2464],["T_VARIABLE","$options",2464],"[",["T_CONSTANT_ENCAPSED_STRING","'PRECISION'",2464],"]",";",["T_WHITESPACE","\n                    ",2464],"}",["T_WHITESPACE","\n                ",2465],"}",["T_WHITESPACE","\n                ",2466],["T_VARIABLE","$cType",2467],["T_WHITESPACE"," ",2467],["T_CONCAT_EQUAL",".=",2467],["T_WHITESPACE"," ",2467],["T_STRING","sprintf",2467],"(",["T_CONSTANT_ENCAPSED_STRING","'(%d,%d)'",2467],",",["T_WHITESPACE"," ",2467],["T_VARIABLE","$precision",2467],",",["T_WHITESPACE"," ",2467],["T_VARIABLE","$scale",2467],")",";",["T_WHITESPACE","\n                ",2467],["T_BREAK","break",2468],";",["T_WHITESPACE","\n            ",2468],["T_CASE","case",2469],["T_WHITESPACE"," ",2469],["T_STRING","Varien_Db_Ddl_Table",2469],["T_DOUBLE_COLON","::",2469],["T_STRING","TYPE_TEXT",2469],":",["T_WHITESPACE","\n            ",2469],["T_CASE","case",2470],["T_WHITESPACE"," ",2470],["T_STRING","Varien_Db_Ddl_Table",2470],["T_DOUBLE_COLON","::",2470],["T_STRING","TYPE_BLOB",2470],":",["T_WHITESPACE","\n            ",2470],["T_CASE","case",2471],["T_WHITESPACE"," ",2471],["T_STRING","Varien_Db_Ddl_Table",2471],["T_DOUBLE_COLON","::",2471],["T_STRING","TYPE_VARBINARY",2471],":",["T_WHITESPACE","\n                ",2471],["T_IF","if",2472],["T_WHITESPACE"," ",2472],"(",["T_EMPTY","empty",2472],"(",["T_VARIABLE","$options",2472],"[",["T_CONSTANT_ENCAPSED_STRING","'LENGTH'",2472],"]",")",")",["T_WHITESPACE"," ",2472],"{",["T_WHITESPACE","\n                    ",2472],["T_VARIABLE","$length",2473],["T_WHITESPACE"," ",2473],"=",["T_WHITESPACE"," ",2473],["T_STRING","Varien_Db_Ddl_Table",2473],["T_DOUBLE_COLON","::",2473],["T_STRING","DEFAULT_TEXT_SIZE",2473],";",["T_WHITESPACE","\n                ",2473],"}",["T_WHITESPACE"," ",2474],["T_ELSE","else",2474],["T_WHITESPACE"," ",2474],"{",["T_WHITESPACE","\n                    ",2474],["T_VARIABLE","$length",2475],["T_WHITESPACE"," ",2475],"=",["T_WHITESPACE"," ",2475],["T_VARIABLE","$this",2475],["T_OBJECT_OPERATOR","->",2475],["T_STRING","_parseTextSize",2475],"(",["T_VARIABLE","$options",2475],"[",["T_CONSTANT_ENCAPSED_STRING","'LENGTH'",2475],"]",")",";",["T_WHITESPACE","\n                ",2475],"}",["T_WHITESPACE","\n                ",2476],["T_IF","if",2477],["T_WHITESPACE"," ",2477],"(",["T_VARIABLE","$length",2477],["T_WHITESPACE"," ",2477],["T_IS_SMALLER_OR_EQUAL","<=",2477],["T_WHITESPACE"," ",2477],["T_LNUMBER","255",2477],")",["T_WHITESPACE"," ",2477],"{",["T_WHITESPACE","\n                    ",2477],["T_VARIABLE","$cType",2478],["T_WHITESPACE"," ",2478],"=",["T_WHITESPACE"," ",2478],["T_VARIABLE","$ddlType",2478],["T_WHITESPACE"," ",2478],["T_IS_EQUAL","==",2478],["T_WHITESPACE"," ",2478],["T_STRING","Varien_Db_Ddl_Table",2478],["T_DOUBLE_COLON","::",2478],["T_STRING","TYPE_TEXT",2478],["T_WHITESPACE"," ",2478],"?",["T_WHITESPACE"," ",2478],["T_CONSTANT_ENCAPSED_STRING","'varchar'",2478],["T_WHITESPACE"," ",2478],":",["T_WHITESPACE"," ",2478],["T_CONSTANT_ENCAPSED_STRING","'varbinary'",2478],";",["T_WHITESPACE","\n                    ",2478],["T_VARIABLE","$cType",2479],["T_WHITESPACE"," ",2479],"=",["T_WHITESPACE"," ",2479],["T_STRING","sprintf",2479],"(",["T_CONSTANT_ENCAPSED_STRING","'%s(%d)'",2479],",",["T_WHITESPACE"," ",2479],["T_VARIABLE","$cType",2479],",",["T_WHITESPACE"," ",2479],["T_VARIABLE","$length",2479],")",";",["T_WHITESPACE","\n                ",2479],"}",["T_WHITESPACE"," ",2480],["T_ELSE","else",2480],["T_WHITESPACE"," ",2480],["T_IF","if",2480],["T_WHITESPACE"," ",2480],"(",["T_VARIABLE","$length",2480],["T_WHITESPACE"," ",2480],">",["T_WHITESPACE"," ",2480],["T_LNUMBER","255",2480],["T_WHITESPACE"," ",2480],["T_BOOLEAN_AND","&&",2480],["T_WHITESPACE"," ",2480],["T_VARIABLE","$length",2480],["T_WHITESPACE"," ",2480],["T_IS_SMALLER_OR_EQUAL","<=",2480],["T_WHITESPACE"," ",2480],["T_LNUMBER","65536",2480],")",["T_WHITESPACE"," ",2480],"{",["T_WHITESPACE","\n                    ",2480],["T_VARIABLE","$cType",2481],["T_WHITESPACE"," ",2481],"=",["T_WHITESPACE"," ",2481],["T_VARIABLE","$ddlType",2481],["T_WHITESPACE"," ",2481],["T_IS_EQUAL","==",2481],["T_WHITESPACE"," ",2481],["T_STRING","Varien_Db_Ddl_Table",2481],["T_DOUBLE_COLON","::",2481],["T_STRING","TYPE_TEXT",2481],["T_WHITESPACE"," ",2481],"?",["T_WHITESPACE"," ",2481],["T_CONSTANT_ENCAPSED_STRING","'text'",2481],["T_WHITESPACE"," ",2481],":",["T_WHITESPACE"," ",2481],["T_CONSTANT_ENCAPSED_STRING","'blob'",2481],";",["T_WHITESPACE","\n                ",2481],"}",["T_WHITESPACE"," ",2482],["T_ELSE","else",2482],["T_WHITESPACE"," ",2482],["T_IF","if",2482],["T_WHITESPACE"," ",2482],"(",["T_VARIABLE","$length",2482],["T_WHITESPACE"," ",2482],">",["T_WHITESPACE"," ",2482],["T_LNUMBER","65536",2482],["T_WHITESPACE"," ",2482],["T_BOOLEAN_AND","&&",2482],["T_WHITESPACE"," ",2482],["T_VARIABLE","$length",2482],["T_WHITESPACE"," ",2482],["T_IS_SMALLER_OR_EQUAL","<=",2482],["T_WHITESPACE"," ",2482],["T_LNUMBER","16777216",2482],")",["T_WHITESPACE"," ",2482],"{",["T_WHITESPACE","\n                    ",2482],["T_VARIABLE","$cType",2483],["T_WHITESPACE"," ",2483],"=",["T_WHITESPACE"," ",2483],["T_VARIABLE","$ddlType",2483],["T_WHITESPACE"," ",2483],["T_IS_EQUAL","==",2483],["T_WHITESPACE"," ",2483],["T_STRING","Varien_Db_Ddl_Table",2483],["T_DOUBLE_COLON","::",2483],["T_STRING","TYPE_TEXT",2483],["T_WHITESPACE"," ",2483],"?",["T_WHITESPACE"," ",2483],["T_CONSTANT_ENCAPSED_STRING","'mediumtext'",2483],["T_WHITESPACE"," ",2483],":",["T_WHITESPACE"," ",2483],["T_CONSTANT_ENCAPSED_STRING","'mediumblob'",2483],";",["T_WHITESPACE","\n                ",2483],"}",["T_WHITESPACE"," ",2484],["T_ELSE","else",2484],["T_WHITESPACE"," ",2484],"{",["T_WHITESPACE","\n                    ",2484],["T_VARIABLE","$cType",2485],["T_WHITESPACE"," ",2485],"=",["T_WHITESPACE"," ",2485],["T_VARIABLE","$ddlType",2485],["T_WHITESPACE"," ",2485],["T_IS_EQUAL","==",2485],["T_WHITESPACE"," ",2485],["T_STRING","Varien_Db_Ddl_Table",2485],["T_DOUBLE_COLON","::",2485],["T_STRING","TYPE_TEXT",2485],["T_WHITESPACE"," ",2485],"?",["T_WHITESPACE"," ",2485],["T_CONSTANT_ENCAPSED_STRING","'longtext'",2485],["T_WHITESPACE"," ",2485],":",["T_WHITESPACE"," ",2485],["T_CONSTANT_ENCAPSED_STRING","'longblob'",2485],";",["T_WHITESPACE","\n                ",2485],"}",["T_WHITESPACE","\n                ",2486],["T_BREAK","break",2487],";",["T_WHITESPACE","\n        ",2487],"}",["T_WHITESPACE","\n\n        ",2488],["T_IF","if",2490],["T_WHITESPACE"," ",2490],"(",["T_STRING","array_key_exists",2490],"(",["T_CONSTANT_ENCAPSED_STRING","'DEFAULT'",2490],",",["T_WHITESPACE"," ",2490],["T_VARIABLE","$options",2490],")",")",["T_WHITESPACE"," ",2490],"{",["T_WHITESPACE","\n            ",2490],["T_VARIABLE","$cDefault",2491],["T_WHITESPACE"," ",2491],"=",["T_WHITESPACE"," ",2491],["T_VARIABLE","$options",2491],"[",["T_CONSTANT_ENCAPSED_STRING","'DEFAULT'",2491],"]",";",["T_WHITESPACE","\n        ",2491],"}",["T_WHITESPACE","\n        ",2492],["T_IF","if",2493],["T_WHITESPACE"," ",2493],"(",["T_STRING","array_key_exists",2493],"(",["T_CONSTANT_ENCAPSED_STRING","'NULLABLE'",2493],",",["T_WHITESPACE"," ",2493],["T_VARIABLE","$options",2493],")",")",["T_WHITESPACE"," ",2493],"{",["T_WHITESPACE","\n            ",2493],["T_VARIABLE","$cNullable",2494],["T_WHITESPACE"," ",2494],"=",["T_WHITESPACE"," ",2494],["T_BOOL_CAST","(bool)",2494],["T_VARIABLE","$options",2494],"[",["T_CONSTANT_ENCAPSED_STRING","'NULLABLE'",2494],"]",";",["T_WHITESPACE","\n        ",2494],"}",["T_WHITESPACE","\n        ",2495],["T_IF","if",2496],["T_WHITESPACE"," ",2496],"(","!",["T_EMPTY","empty",2496],"(",["T_VARIABLE","$options",2496],"[",["T_CONSTANT_ENCAPSED_STRING","'IDENTITY'",2496],"]",")",["T_WHITESPACE"," ",2496],["T_BOOLEAN_OR","||",2496],["T_WHITESPACE"," ",2496],"!",["T_EMPTY","empty",2496],"(",["T_VARIABLE","$options",2496],"[",["T_CONSTANT_ENCAPSED_STRING","'AUTO_INCREMENT'",2496],"]",")",")",["T_WHITESPACE"," ",2496],"{",["T_WHITESPACE","\n            ",2496],["T_VARIABLE","$cIdentity",2497],["T_WHITESPACE"," ",2497],"=",["T_WHITESPACE"," ",2497],["T_STRING","true",2497],";",["T_WHITESPACE","\n        ",2497],"}",["T_WHITESPACE","\n\n        ",2498],["T_COMMENT","\/*  For cases when tables created from createTableByDdl()\n         *  where default value can be quoted already.\n         *  We need to avoid \"double-quoting\" here\n         *\/",2500],["T_WHITESPACE","\n        ",2503],["T_IF","if",2504],["T_WHITESPACE"," ",2504],"(",["T_WHITESPACE"," ",2504],["T_VARIABLE","$cDefault",2504],["T_WHITESPACE"," ",2504],["T_IS_NOT_IDENTICAL","!==",2504],["T_WHITESPACE"," ",2504],["T_STRING","null",2504],["T_WHITESPACE"," ",2504],["T_BOOLEAN_AND","&&",2504],["T_WHITESPACE"," ",2504],["T_STRING","strlen",2504],"(",["T_VARIABLE","$cDefault",2504],")",")",["T_WHITESPACE"," ",2504],"{",["T_WHITESPACE","\n            ",2504],["T_VARIABLE","$cDefault",2505],["T_WHITESPACE"," ",2505],"=",["T_WHITESPACE"," ",2505],["T_STRING","str_replace",2505],"(",["T_CONSTANT_ENCAPSED_STRING","\"'\"",2505],",",["T_WHITESPACE"," ",2505],["T_CONSTANT_ENCAPSED_STRING","''",2505],",",["T_WHITESPACE"," ",2505],["T_VARIABLE","$cDefault",2505],")",";",["T_WHITESPACE","\n        ",2505],"}",["T_WHITESPACE","\n\n        ",2506],["T_COMMENT","\/\/ prepare default value string\n",2508],["T_WHITESPACE","        ",2509],["T_IF","if",2509],["T_WHITESPACE"," ",2509],"(",["T_VARIABLE","$ddlType",2509],["T_WHITESPACE"," ",2509],["T_IS_EQUAL","==",2509],["T_WHITESPACE"," ",2509],["T_STRING","Varien_Db_Ddl_Table",2509],["T_DOUBLE_COLON","::",2509],["T_STRING","TYPE_TIMESTAMP",2509],")",["T_WHITESPACE"," ",2509],"{",["T_WHITESPACE","\n            ",2509],["T_IF","if",2510],["T_WHITESPACE"," ",2510],"(",["T_VARIABLE","$cDefault",2510],["T_WHITESPACE"," ",2510],["T_IS_IDENTICAL","===",2510],["T_WHITESPACE"," ",2510],["T_STRING","null",2510],")",["T_WHITESPACE"," ",2510],"{",["T_WHITESPACE","\n                ",2510],["T_VARIABLE","$cDefault",2511],["T_WHITESPACE"," ",2511],"=",["T_WHITESPACE"," ",2511],["T_NEW","new",2511],["T_WHITESPACE"," ",2511],["T_STRING","Zend_Db_Expr",2511],"(",["T_CONSTANT_ENCAPSED_STRING","'NULL'",2511],")",";",["T_WHITESPACE","\n            ",2511],"}",["T_WHITESPACE"," ",2512],["T_ELSEIF","elseif",2512],["T_WHITESPACE"," ",2512],"(",["T_VARIABLE","$cDefault",2512],["T_WHITESPACE"," ",2512],["T_IS_EQUAL","==",2512],["T_WHITESPACE"," ",2512],["T_STRING","Varien_Db_Ddl_Table",2512],["T_DOUBLE_COLON","::",2512],["T_STRING","TIMESTAMP_INIT",2512],")",["T_WHITESPACE"," ",2512],"{",["T_WHITESPACE","\n                ",2512],["T_VARIABLE","$cDefault",2513],["T_WHITESPACE"," ",2513],"=",["T_WHITESPACE"," ",2513],["T_NEW","new",2513],["T_WHITESPACE"," ",2513],["T_STRING","Zend_Db_Expr",2513],"(",["T_CONSTANT_ENCAPSED_STRING","'CURRENT_TIMESTAMP'",2513],")",";",["T_WHITESPACE","\n            ",2513],"}",["T_WHITESPACE"," ",2514],["T_ELSE","else",2514],["T_WHITESPACE"," ",2514],["T_IF","if",2514],["T_WHITESPACE"," ",2514],"(",["T_VARIABLE","$cDefault",2514],["T_WHITESPACE"," ",2514],["T_IS_EQUAL","==",2514],["T_WHITESPACE"," ",2514],["T_STRING","Varien_Db_Ddl_Table",2514],["T_DOUBLE_COLON","::",2514],["T_STRING","TIMESTAMP_UPDATE",2514],")",["T_WHITESPACE"," ",2514],"{",["T_WHITESPACE","\n                ",2514],["T_VARIABLE","$cDefault",2515],["T_WHITESPACE"," ",2515],"=",["T_WHITESPACE"," ",2515],["T_NEW","new",2515],["T_WHITESPACE"," ",2515],["T_STRING","Zend_Db_Expr",2515],"(",["T_CONSTANT_ENCAPSED_STRING","'0 ON UPDATE CURRENT_TIMESTAMP'",2515],")",";",["T_WHITESPACE","\n            ",2515],"}",["T_WHITESPACE"," ",2516],["T_ELSE","else",2516],["T_WHITESPACE"," ",2516],["T_IF","if",2516],["T_WHITESPACE"," ",2516],"(",["T_VARIABLE","$cDefault",2516],["T_WHITESPACE"," ",2516],["T_IS_EQUAL","==",2516],["T_WHITESPACE"," ",2516],["T_STRING","Varien_Db_Ddl_Table",2516],["T_DOUBLE_COLON","::",2516],["T_STRING","TIMESTAMP_INIT_UPDATE",2516],")",["T_WHITESPACE"," ",2516],"{",["T_WHITESPACE","\n                ",2516],["T_VARIABLE","$cDefault",2517],["T_WHITESPACE"," ",2517],"=",["T_WHITESPACE"," ",2517],["T_NEW","new",2517],["T_WHITESPACE"," ",2517],["T_STRING","Zend_Db_Expr",2517],"(",["T_CONSTANT_ENCAPSED_STRING","'CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP'",2517],")",";",["T_WHITESPACE","\n            ",2517],"}",["T_WHITESPACE"," ",2518],["T_ELSE","else",2518],["T_WHITESPACE"," ",2518],["T_IF","if",2518],["T_WHITESPACE"," ",2518],"(",["T_VARIABLE","$cNullable",2518],["T_WHITESPACE"," ",2518],["T_BOOLEAN_AND","&&",2518],["T_WHITESPACE"," ",2518],"!",["T_VARIABLE","$cDefault",2518],")",["T_WHITESPACE"," ",2518],"{",["T_WHITESPACE","\n                ",2518],["T_VARIABLE","$cDefault",2519],["T_WHITESPACE"," ",2519],"=",["T_WHITESPACE"," ",2519],["T_NEW","new",2519],["T_WHITESPACE"," ",2519],["T_STRING","Zend_Db_Expr",2519],"(",["T_CONSTANT_ENCAPSED_STRING","'NULL'",2519],")",";",["T_WHITESPACE","\n            ",2519],"}",["T_WHITESPACE"," ",2520],["T_ELSE","else",2520],["T_WHITESPACE"," ",2520],"{",["T_WHITESPACE","\n                ",2520],["T_VARIABLE","$cDefault",2521],["T_WHITESPACE"," ",2521],"=",["T_WHITESPACE"," ",2521],["T_NEW","new",2521],["T_WHITESPACE"," ",2521],["T_STRING","Zend_Db_Expr",2521],"(",["T_CONSTANT_ENCAPSED_STRING","'0'",2521],")",";",["T_WHITESPACE","\n            ",2521],"}",["T_WHITESPACE","\n        ",2522],"}",["T_WHITESPACE"," ",2523],["T_ELSE","else",2523],["T_WHITESPACE"," ",2523],["T_IF","if",2523],["T_WHITESPACE"," ",2523],"(",["T_STRING","is_null",2523],"(",["T_VARIABLE","$cDefault",2523],")",["T_WHITESPACE"," ",2523],["T_BOOLEAN_AND","&&",2523],["T_WHITESPACE"," ",2523],["T_VARIABLE","$cNullable",2523],")",["T_WHITESPACE"," ",2523],"{",["T_WHITESPACE","\n            ",2523],["T_VARIABLE","$cDefault",2524],["T_WHITESPACE"," ",2524],"=",["T_WHITESPACE"," ",2524],["T_NEW","new",2524],["T_WHITESPACE"," ",2524],["T_STRING","Zend_Db_Expr",2524],"(",["T_CONSTANT_ENCAPSED_STRING","'NULL'",2524],")",";",["T_WHITESPACE","\n        ",2524],"}",["T_WHITESPACE","\n\n        ",2525],["T_IF","if",2527],["T_WHITESPACE"," ",2527],"(",["T_EMPTY","empty",2527],"(",["T_VARIABLE","$options",2527],"[",["T_CONSTANT_ENCAPSED_STRING","'COMMENT'",2527],"]",")",")",["T_WHITESPACE"," ",2527],"{",["T_WHITESPACE","\n            ",2527],["T_VARIABLE","$comment",2528],["T_WHITESPACE"," ",2528],"=",["T_WHITESPACE"," ",2528],["T_CONSTANT_ENCAPSED_STRING","''",2528],";",["T_WHITESPACE","\n        ",2528],"}",["T_WHITESPACE"," ",2529],["T_ELSE","else",2529],["T_WHITESPACE"," ",2529],"{",["T_WHITESPACE","\n            ",2529],["T_VARIABLE","$comment",2530],["T_WHITESPACE"," ",2530],"=",["T_WHITESPACE"," ",2530],["T_VARIABLE","$options",2530],"[",["T_CONSTANT_ENCAPSED_STRING","'COMMENT'",2530],"]",";",["T_WHITESPACE","\n        ",2530],"}",["T_WHITESPACE","\n\n        ",2531],["T_COMMENT","\/\/set column position\n",2533],["T_WHITESPACE","        ",2534],["T_VARIABLE","$after",2534],["T_WHITESPACE"," ",2534],"=",["T_WHITESPACE"," ",2534],["T_STRING","null",2534],";",["T_WHITESPACE","\n        ",2534],["T_IF","if",2535],["T_WHITESPACE"," ",2535],"(","!",["T_EMPTY","empty",2535],"(",["T_VARIABLE","$options",2535],"[",["T_CONSTANT_ENCAPSED_STRING","'AFTER'",2535],"]",")",")",["T_WHITESPACE"," ",2535],"{",["T_WHITESPACE","\n            ",2535],["T_VARIABLE","$after",2536],["T_WHITESPACE"," ",2536],"=",["T_WHITESPACE"," ",2536],["T_VARIABLE","$options",2536],"[",["T_CONSTANT_ENCAPSED_STRING","'AFTER'",2536],"]",";",["T_WHITESPACE","\n        ",2536],"}",["T_WHITESPACE","\n\n        ",2537],["T_RETURN","return",2539],["T_WHITESPACE"," ",2539],["T_STRING","sprintf",2539],"(",["T_CONSTANT_ENCAPSED_STRING","'%s%s%s%s%s COMMENT %s %s'",2539],",",["T_WHITESPACE","\n            ",2539],["T_VARIABLE","$cType",2540],",",["T_WHITESPACE","\n            ",2540],["T_VARIABLE","$cUnsigned",2541],["T_WHITESPACE"," ",2541],"?",["T_WHITESPACE"," ",2541],["T_CONSTANT_ENCAPSED_STRING","' UNSIGNED'",2541],["T_WHITESPACE"," ",2541],":",["T_WHITESPACE"," ",2541],["T_CONSTANT_ENCAPSED_STRING","''",2541],",",["T_WHITESPACE","\n            ",2541],["T_VARIABLE","$cNullable",2542],["T_WHITESPACE"," ",2542],"?",["T_WHITESPACE"," ",2542],["T_CONSTANT_ENCAPSED_STRING","' NULL'",2542],["T_WHITESPACE"," ",2542],":",["T_WHITESPACE"," ",2542],["T_CONSTANT_ENCAPSED_STRING","' NOT NULL'",2542],",",["T_WHITESPACE","\n            ",2542],["T_VARIABLE","$cDefault",2543],["T_WHITESPACE"," ",2543],["T_IS_NOT_IDENTICAL","!==",2543],["T_WHITESPACE"," ",2543],["T_STRING","false",2543],["T_WHITESPACE"," ",2543],"?",["T_WHITESPACE"," ",2543],["T_VARIABLE","$this",2543],["T_OBJECT_OPERATOR","->",2543],["T_STRING","quoteInto",2543],"(",["T_CONSTANT_ENCAPSED_STRING","' default ?'",2543],",",["T_WHITESPACE"," ",2543],["T_VARIABLE","$cDefault",2543],")",["T_WHITESPACE"," ",2543],":",["T_WHITESPACE"," ",2543],["T_CONSTANT_ENCAPSED_STRING","''",2543],",",["T_WHITESPACE","\n            ",2543],["T_VARIABLE","$cIdentity",2544],["T_WHITESPACE"," ",2544],"?",["T_WHITESPACE"," ",2544],["T_CONSTANT_ENCAPSED_STRING","' auto_increment'",2544],["T_WHITESPACE"," ",2544],":",["T_WHITESPACE"," ",2544],["T_CONSTANT_ENCAPSED_STRING","''",2544],",",["T_WHITESPACE","\n            ",2544],["T_VARIABLE","$this",2545],["T_OBJECT_OPERATOR","->",2545],["T_STRING","quote",2545],"(",["T_VARIABLE","$comment",2545],")",",",["T_WHITESPACE","\n            ",2545],["T_VARIABLE","$after",2546],["T_WHITESPACE"," ",2546],"?",["T_WHITESPACE"," ",2546],["T_CONSTANT_ENCAPSED_STRING","'AFTER '",2546],["T_WHITESPACE"," ",2546],".",["T_WHITESPACE"," ",2546],["T_VARIABLE","$this",2546],["T_OBJECT_OPERATOR","->",2546],["T_STRING","quoteIdentifier",2546],"(",["T_VARIABLE","$after",2546],")",["T_WHITESPACE"," ",2546],":",["T_WHITESPACE"," ",2546],["T_CONSTANT_ENCAPSED_STRING","''",2546],["T_WHITESPACE","\n        ",2546],")",";",["T_WHITESPACE","\n    ",2547],"}",["T_WHITESPACE","\n\n    ",2548],["T_DOC_COMMENT","\/**\n     * Drop table from database\n     *\n     * @param string $tableName\n     * @param string $schemaName\n     * @return boolean\n     *\/",2550],["T_WHITESPACE","\n    ",2556],["T_PUBLIC","public",2557],["T_WHITESPACE"," ",2557],["T_FUNCTION","function",2557],["T_WHITESPACE"," ",2557],["T_STRING","dropTable",2557],"(",["T_VARIABLE","$tableName",2557],",",["T_WHITESPACE"," ",2557],["T_VARIABLE","$schemaName",2557],["T_WHITESPACE"," ",2557],"=",["T_WHITESPACE"," ",2557],["T_STRING","null",2557],")",["T_WHITESPACE","\n    ",2557],"{",["T_WHITESPACE","\n        ",2558],["T_VARIABLE","$table",2559],["T_WHITESPACE"," ",2559],"=",["T_WHITESPACE"," ",2559],["T_VARIABLE","$this",2559],["T_OBJECT_OPERATOR","->",2559],["T_STRING","quoteIdentifier",2559],"(",["T_VARIABLE","$this",2559],["T_OBJECT_OPERATOR","->",2559],["T_STRING","_getTableName",2559],"(",["T_VARIABLE","$tableName",2559],",",["T_WHITESPACE"," ",2559],["T_VARIABLE","$schemaName",2559],")",")",";",["T_WHITESPACE","\n        ",2559],["T_VARIABLE","$query",2560],["T_WHITESPACE"," ",2560],"=",["T_WHITESPACE"," ",2560],["T_CONSTANT_ENCAPSED_STRING","'DROP TABLE IF EXISTS '",2560],["T_WHITESPACE"," ",2560],".",["T_WHITESPACE"," ",2560],["T_VARIABLE","$table",2560],";",["T_WHITESPACE","\n        ",2560],["T_VARIABLE","$this",2561],["T_OBJECT_OPERATOR","->",2561],["T_STRING","query",2561],"(",["T_VARIABLE","$query",2561],")",";",["T_WHITESPACE","\n\n        ",2561],["T_RETURN","return",2563],["T_WHITESPACE"," ",2563],["T_STRING","true",2563],";",["T_WHITESPACE","\n    ",2563],"}",["T_WHITESPACE","\n\n    ",2564],["T_DOC_COMMENT","\/**\n     * Drop temporary table from database\n     *\n     * @param string $tableName\n     * @param string $schemaName\n     * @return boolean\n     *\/",2566],["T_WHITESPACE","\n    ",2572],["T_PUBLIC","public",2573],["T_WHITESPACE"," ",2573],["T_FUNCTION","function",2573],["T_WHITESPACE"," ",2573],["T_STRING","dropTemporaryTable",2573],"(",["T_VARIABLE","$tableName",2573],",",["T_WHITESPACE"," ",2573],["T_VARIABLE","$schemaName",2573],["T_WHITESPACE"," ",2573],"=",["T_WHITESPACE"," ",2573],["T_STRING","null",2573],")",["T_WHITESPACE","\n    ",2573],"{",["T_WHITESPACE","\n        ",2574],["T_VARIABLE","$table",2575],["T_WHITESPACE"," ",2575],"=",["T_WHITESPACE"," ",2575],["T_VARIABLE","$this",2575],["T_OBJECT_OPERATOR","->",2575],["T_STRING","quoteIdentifier",2575],"(",["T_VARIABLE","$this",2575],["T_OBJECT_OPERATOR","->",2575],["T_STRING","_getTableName",2575],"(",["T_VARIABLE","$tableName",2575],",",["T_WHITESPACE"," ",2575],["T_VARIABLE","$schemaName",2575],")",")",";",["T_WHITESPACE","\n        ",2575],["T_VARIABLE","$query",2576],["T_WHITESPACE"," ",2576],"=",["T_WHITESPACE"," ",2576],["T_CONSTANT_ENCAPSED_STRING","'DROP TEMPORARY TABLE IF EXISTS '",2576],["T_WHITESPACE"," ",2576],".",["T_WHITESPACE"," ",2576],["T_VARIABLE","$table",2576],";",["T_WHITESPACE","\n        ",2576],["T_VARIABLE","$this",2577],["T_OBJECT_OPERATOR","->",2577],["T_STRING","query",2577],"(",["T_VARIABLE","$query",2577],")",";",["T_WHITESPACE","\n\n        ",2577],["T_RETURN","return",2579],["T_WHITESPACE"," ",2579],["T_VARIABLE","$this",2579],";",["T_WHITESPACE","\n    ",2579],"}",["T_WHITESPACE","\n\n    ",2580],["T_DOC_COMMENT","\/**\n     * Truncate a table\n     *\n     * @param string $tableName\n     * @param string $schemaName\n     * @return Varien_Db_Adapter_Pdo_Mysql\n     * @throws Zend_Db_Exception\n     *\/",2582],["T_WHITESPACE","\n    ",2589],["T_PUBLIC","public",2590],["T_WHITESPACE"," ",2590],["T_FUNCTION","function",2590],["T_WHITESPACE"," ",2590],["T_STRING","truncateTable",2590],"(",["T_VARIABLE","$tableName",2590],",",["T_WHITESPACE"," ",2590],["T_VARIABLE","$schemaName",2590],["T_WHITESPACE"," ",2590],"=",["T_WHITESPACE"," ",2590],["T_STRING","null",2590],")",["T_WHITESPACE","\n    ",2590],"{",["T_WHITESPACE","\n        ",2591],["T_IF","if",2592],["T_WHITESPACE"," ",2592],"(","!",["T_VARIABLE","$this",2592],["T_OBJECT_OPERATOR","->",2592],["T_STRING","isTableExists",2592],"(",["T_VARIABLE","$tableName",2592],",",["T_WHITESPACE"," ",2592],["T_VARIABLE","$schemaName",2592],")",")",["T_WHITESPACE"," ",2592],"{",["T_WHITESPACE","\n            ",2592],["T_THROW","throw",2593],["T_WHITESPACE"," ",2593],["T_NEW","new",2593],["T_WHITESPACE"," ",2593],["T_STRING","Zend_Db_Exception",2593],"(",["T_STRING","sprintf",2593],"(",["T_CONSTANT_ENCAPSED_STRING","'Table \"%s\" is not exists'",2593],",",["T_WHITESPACE"," ",2593],["T_VARIABLE","$tableName",2593],")",")",";",["T_WHITESPACE","\n        ",2593],"}",["T_WHITESPACE","\n\n        ",2594],["T_VARIABLE","$table",2596],["T_WHITESPACE"," ",2596],"=",["T_WHITESPACE"," ",2596],["T_VARIABLE","$this",2596],["T_OBJECT_OPERATOR","->",2596],["T_STRING","quoteIdentifier",2596],"(",["T_VARIABLE","$this",2596],["T_OBJECT_OPERATOR","->",2596],["T_STRING","_getTableName",2596],"(",["T_VARIABLE","$tableName",2596],",",["T_WHITESPACE"," ",2596],["T_VARIABLE","$schemaName",2596],")",")",";",["T_WHITESPACE","\n        ",2596],["T_VARIABLE","$query",2597],["T_WHITESPACE"," ",2597],"=",["T_WHITESPACE"," ",2597],["T_CONSTANT_ENCAPSED_STRING","'TRUNCATE TABLE '",2597],["T_WHITESPACE"," ",2597],".",["T_WHITESPACE"," ",2597],["T_VARIABLE","$table",2597],";",["T_WHITESPACE","\n        ",2597],["T_VARIABLE","$this",2598],["T_OBJECT_OPERATOR","->",2598],["T_STRING","query",2598],"(",["T_VARIABLE","$query",2598],")",";",["T_WHITESPACE","\n\n        ",2598],["T_RETURN","return",2600],["T_WHITESPACE"," ",2600],["T_VARIABLE","$this",2600],";",["T_WHITESPACE","\n    ",2600],"}",["T_WHITESPACE","\n\n    ",2601],["T_DOC_COMMENT","\/**\n     * Check is a table exists\n     *\n     * @param string $tableName\n     * @param string $schemaName\n     * @return boolean\n     *\/",2603],["T_WHITESPACE","\n    ",2609],["T_PUBLIC","public",2610],["T_WHITESPACE"," ",2610],["T_FUNCTION","function",2610],["T_WHITESPACE"," ",2610],["T_STRING","isTableExists",2610],"(",["T_VARIABLE","$tableName",2610],",",["T_WHITESPACE"," ",2610],["T_VARIABLE","$schemaName",2610],["T_WHITESPACE"," ",2610],"=",["T_WHITESPACE"," ",2610],["T_STRING","null",2610],")",["T_WHITESPACE","\n    ",2610],"{",["T_WHITESPACE","\n        ",2611],["T_RETURN","return",2612],["T_WHITESPACE"," ",2612],["T_VARIABLE","$this",2612],["T_OBJECT_OPERATOR","->",2612],["T_STRING","showTableStatus",2612],"(",["T_VARIABLE","$tableName",2612],",",["T_WHITESPACE"," ",2612],["T_VARIABLE","$schemaName",2612],")",["T_WHITESPACE"," ",2612],["T_IS_NOT_IDENTICAL","!==",2612],["T_WHITESPACE"," ",2612],["T_STRING","false",2612],";",["T_WHITESPACE","\n    ",2612],"}",["T_WHITESPACE","\n\n    ",2613],["T_DOC_COMMENT","\/**\n     * Rename table\n     *\n     * @param string $oldTableName\n     * @param string $newTableName\n     * @param string $schemaName\n     * @return boolean\n     * @throws Zend_Db_Exception\n     *\/",2615],["T_WHITESPACE","\n    ",2623],["T_PUBLIC","public",2624],["T_WHITESPACE"," ",2624],["T_FUNCTION","function",2624],["T_WHITESPACE"," ",2624],["T_STRING","renameTable",2624],"(",["T_VARIABLE","$oldTableName",2624],",",["T_WHITESPACE"," ",2624],["T_VARIABLE","$newTableName",2624],",",["T_WHITESPACE"," ",2624],["T_VARIABLE","$schemaName",2624],["T_WHITESPACE"," ",2624],"=",["T_WHITESPACE"," ",2624],["T_STRING","null",2624],")",["T_WHITESPACE","\n    ",2624],"{",["T_WHITESPACE","\n        ",2625],["T_IF","if",2626],["T_WHITESPACE"," ",2626],"(","!",["T_VARIABLE","$this",2626],["T_OBJECT_OPERATOR","->",2626],["T_STRING","isTableExists",2626],"(",["T_VARIABLE","$oldTableName",2626],",",["T_WHITESPACE"," ",2626],["T_VARIABLE","$schemaName",2626],")",")",["T_WHITESPACE"," ",2626],"{",["T_WHITESPACE","\n            ",2626],["T_THROW","throw",2627],["T_WHITESPACE"," ",2627],["T_NEW","new",2627],["T_WHITESPACE"," ",2627],["T_STRING","Zend_Db_Exception",2627],"(",["T_STRING","sprintf",2627],"(",["T_CONSTANT_ENCAPSED_STRING","'Table \"%s\" is not exists'",2627],",",["T_WHITESPACE"," ",2627],["T_VARIABLE","$oldTableName",2627],")",")",";",["T_WHITESPACE","\n        ",2627],"}",["T_WHITESPACE","\n        ",2628],["T_IF","if",2629],["T_WHITESPACE"," ",2629],"(",["T_VARIABLE","$this",2629],["T_OBJECT_OPERATOR","->",2629],["T_STRING","isTableExists",2629],"(",["T_VARIABLE","$newTableName",2629],",",["T_WHITESPACE"," ",2629],["T_VARIABLE","$schemaName",2629],")",")",["T_WHITESPACE"," ",2629],"{",["T_WHITESPACE","\n            ",2629],["T_THROW","throw",2630],["T_WHITESPACE"," ",2630],["T_NEW","new",2630],["T_WHITESPACE"," ",2630],["T_STRING","Zend_Db_Exception",2630],"(",["T_STRING","sprintf",2630],"(",["T_CONSTANT_ENCAPSED_STRING","'Table \"%s\" already exists'",2630],",",["T_WHITESPACE"," ",2630],["T_VARIABLE","$newTableName",2630],")",")",";",["T_WHITESPACE","\n        ",2630],"}",["T_WHITESPACE","\n\n        ",2631],["T_VARIABLE","$oldTable",2633],["T_WHITESPACE"," ",2633],"=",["T_WHITESPACE"," ",2633],["T_VARIABLE","$this",2633],["T_OBJECT_OPERATOR","->",2633],["T_STRING","_getTableName",2633],"(",["T_VARIABLE","$oldTableName",2633],",",["T_WHITESPACE"," ",2633],["T_VARIABLE","$schemaName",2633],")",";",["T_WHITESPACE","\n        ",2633],["T_VARIABLE","$newTable",2634],["T_WHITESPACE"," ",2634],"=",["T_WHITESPACE"," ",2634],["T_VARIABLE","$this",2634],["T_OBJECT_OPERATOR","->",2634],["T_STRING","_getTableName",2634],"(",["T_VARIABLE","$newTableName",2634],",",["T_WHITESPACE"," ",2634],["T_VARIABLE","$schemaName",2634],")",";",["T_WHITESPACE","\n\n        ",2634],["T_VARIABLE","$query",2636],["T_WHITESPACE"," ",2636],"=",["T_WHITESPACE"," ",2636],["T_STRING","sprintf",2636],"(",["T_CONSTANT_ENCAPSED_STRING","'ALTER TABLE %s RENAME TO %s'",2636],",",["T_WHITESPACE"," ",2636],["T_VARIABLE","$oldTable",2636],",",["T_WHITESPACE"," ",2636],["T_VARIABLE","$newTable",2636],")",";",["T_WHITESPACE","\n        ",2636],["T_VARIABLE","$this",2637],["T_OBJECT_OPERATOR","->",2637],["T_STRING","query",2637],"(",["T_VARIABLE","$query",2637],")",";",["T_WHITESPACE","\n\n        ",2637],["T_VARIABLE","$this",2639],["T_OBJECT_OPERATOR","->",2639],["T_STRING","resetDdlCache",2639],"(",["T_VARIABLE","$oldTableName",2639],",",["T_WHITESPACE"," ",2639],["T_VARIABLE","$schemaName",2639],")",";",["T_WHITESPACE","\n\n        ",2639],["T_RETURN","return",2641],["T_WHITESPACE"," ",2641],["T_STRING","true",2641],";",["T_WHITESPACE","\n    ",2641],"}",["T_WHITESPACE","\n\n    ",2642],["T_DOC_COMMENT","\/**\n     * Rename several tables\n     *\n     * @param array $tablePairs array('oldName' => 'Name1', 'newName' => 'Name2')\n     *\n     * @return boolean\n     * @throws Zend_Db_Exception\n     *\/",2644],["T_WHITESPACE","\n    ",2651],["T_PUBLIC","public",2652],["T_WHITESPACE"," ",2652],["T_FUNCTION","function",2652],["T_WHITESPACE"," ",2652],["T_STRING","renameTablesBatch",2652],"(",["T_ARRAY","array",2652],["T_WHITESPACE"," ",2652],["T_VARIABLE","$tablePairs",2652],")",["T_WHITESPACE","\n    ",2652],"{",["T_WHITESPACE","\n        ",2653],["T_IF","if",2654],["T_WHITESPACE"," ",2654],"(",["T_STRING","count",2654],"(",["T_VARIABLE","$tablePairs",2654],")",["T_WHITESPACE"," ",2654],["T_IS_EQUAL","==",2654],["T_WHITESPACE"," ",2654],["T_LNUMBER","0",2654],")",["T_WHITESPACE"," ",2654],"{",["T_WHITESPACE","\n            ",2654],["T_THROW","throw",2655],["T_WHITESPACE"," ",2655],["T_NEW","new",2655],["T_WHITESPACE"," ",2655],["T_STRING","Zend_Db_Exception",2655],"(",["T_CONSTANT_ENCAPSED_STRING","'Please provide tables for rename'",2655],")",";",["T_WHITESPACE","\n        ",2655],"}",["T_WHITESPACE","\n\n        ",2656],["T_VARIABLE","$renamesList",2658],["T_WHITESPACE"," ",2658],"=",["T_WHITESPACE"," ",2658],["T_ARRAY","array",2658],"(",")",";",["T_WHITESPACE","\n        ",2658],["T_VARIABLE","$tablesList",2659],["T_WHITESPACE","  ",2659],"=",["T_WHITESPACE"," ",2659],["T_ARRAY","array",2659],"(",")",";",["T_WHITESPACE","\n        ",2659],["T_FOREACH","foreach",2660],["T_WHITESPACE"," ",2660],"(",["T_VARIABLE","$tablePairs",2660],["T_WHITESPACE"," ",2660],["T_AS","as",2660],["T_WHITESPACE"," ",2660],["T_VARIABLE","$pair",2660],")",["T_WHITESPACE"," ",2660],"{",["T_WHITESPACE","\n            ",2660],["T_VARIABLE","$oldTableName",2661],["T_WHITESPACE","  ",2661],"=",["T_WHITESPACE"," ",2661],["T_VARIABLE","$pair",2661],"[",["T_CONSTANT_ENCAPSED_STRING","'oldName'",2661],"]",";",["T_WHITESPACE","\n            ",2661],["T_VARIABLE","$newTableName",2662],["T_WHITESPACE","  ",2662],"=",["T_WHITESPACE"," ",2662],["T_VARIABLE","$pair",2662],"[",["T_CONSTANT_ENCAPSED_STRING","'newName'",2662],"]",";",["T_WHITESPACE","\n            ",2662],["T_VARIABLE","$renamesList",2663],"[","]",["T_WHITESPACE"," ",2663],"=",["T_WHITESPACE"," ",2663],["T_STRING","sprintf",2663],"(",["T_CONSTANT_ENCAPSED_STRING","'%s TO %s'",2663],",",["T_WHITESPACE"," ",2663],["T_VARIABLE","$oldTableName",2663],",",["T_WHITESPACE"," ",2663],["T_VARIABLE","$newTableName",2663],")",";",["T_WHITESPACE","\n\n            ",2663],["T_VARIABLE","$tablesList",2665],"[",["T_VARIABLE","$oldTableName",2665],"]",["T_WHITESPACE"," ",2665],"=",["T_WHITESPACE"," ",2665],["T_VARIABLE","$oldTableName",2665],";",["T_WHITESPACE","\n            ",2665],["T_VARIABLE","$tablesList",2666],"[",["T_VARIABLE","$newTableName",2666],"]",["T_WHITESPACE"," ",2666],"=",["T_WHITESPACE"," ",2666],["T_VARIABLE","$newTableName",2666],";",["T_WHITESPACE","\n        ",2666],"}",["T_WHITESPACE","\n\n        ",2667],["T_VARIABLE","$query",2669],["T_WHITESPACE"," ",2669],"=",["T_WHITESPACE"," ",2669],["T_STRING","sprintf",2669],"(",["T_CONSTANT_ENCAPSED_STRING","'RENAME TABLE %s'",2669],",",["T_WHITESPACE"," ",2669],["T_STRING","implode",2669],"(",["T_CONSTANT_ENCAPSED_STRING","','",2669],",",["T_WHITESPACE"," ",2669],["T_VARIABLE","$renamesList",2669],")",")",";",["T_WHITESPACE","\n        ",2669],["T_VARIABLE","$this",2670],["T_OBJECT_OPERATOR","->",2670],["T_STRING","query",2670],"(",["T_VARIABLE","$query",2670],")",";",["T_WHITESPACE","\n\n        ",2670],["T_FOREACH","foreach",2672],["T_WHITESPACE"," ",2672],"(",["T_VARIABLE","$tablesList",2672],["T_WHITESPACE"," ",2672],["T_AS","as",2672],["T_WHITESPACE"," ",2672],["T_VARIABLE","$table",2672],")",["T_WHITESPACE"," ",2672],"{",["T_WHITESPACE","\n            ",2672],["T_VARIABLE","$this",2673],["T_OBJECT_OPERATOR","->",2673],["T_STRING","resetDdlCache",2673],"(",["T_VARIABLE","$table",2673],")",";",["T_WHITESPACE","\n        ",2673],"}",["T_WHITESPACE","\n\n        ",2674],["T_RETURN","return",2676],["T_WHITESPACE"," ",2676],["T_STRING","true",2676],";",["T_WHITESPACE","\n    ",2676],"}",["T_WHITESPACE","\n\n\n    ",2677],["T_DOC_COMMENT","\/**\n     * Add new index to table name\n     *\n     * @param string $tableName\n     * @param string $indexName\n     * @param string|array $fields  the table column name or array of ones\n     * @param string $indexType     the index type\n     * @param string $schemaName\n     * @return Zend_Db_Statement_Interface\n     * @throws Zend_Db_Exception|Exception\n     *\/",2680],["T_WHITESPACE","\n    ",2690],["T_PUBLIC","public",2691],["T_WHITESPACE"," ",2691],["T_FUNCTION","function",2691],["T_WHITESPACE"," ",2691],["T_STRING","addIndex",2691],"(",["T_VARIABLE","$tableName",2691],",",["T_WHITESPACE"," ",2691],["T_VARIABLE","$indexName",2691],",",["T_WHITESPACE"," ",2691],["T_VARIABLE","$fields",2691],",",["T_WHITESPACE","\n        ",2691],["T_VARIABLE","$indexType",2692],["T_WHITESPACE"," ",2692],"=",["T_WHITESPACE"," ",2692],["T_STRING","Varien_Db_Adapter_Interface",2692],["T_DOUBLE_COLON","::",2692],["T_STRING","INDEX_TYPE_INDEX",2692],",",["T_WHITESPACE"," ",2692],["T_VARIABLE","$schemaName",2692],["T_WHITESPACE"," ",2692],"=",["T_WHITESPACE"," ",2692],["T_STRING","null",2692],")",["T_WHITESPACE","\n    ",2692],"{",["T_WHITESPACE","\n        ",2693],["T_VARIABLE","$columns",2694],["T_WHITESPACE"," ",2694],"=",["T_WHITESPACE"," ",2694],["T_VARIABLE","$this",2694],["T_OBJECT_OPERATOR","->",2694],["T_STRING","describeTable",2694],"(",["T_VARIABLE","$tableName",2694],",",["T_WHITESPACE"," ",2694],["T_VARIABLE","$schemaName",2694],")",";",["T_WHITESPACE","\n        ",2694],["T_VARIABLE","$keyList",2695],["T_WHITESPACE"," ",2695],"=",["T_WHITESPACE"," ",2695],["T_VARIABLE","$this",2695],["T_OBJECT_OPERATOR","->",2695],["T_STRING","getIndexList",2695],"(",["T_VARIABLE","$tableName",2695],",",["T_WHITESPACE"," ",2695],["T_VARIABLE","$schemaName",2695],")",";",["T_WHITESPACE","\n\n        ",2695],["T_VARIABLE","$query",2697],["T_WHITESPACE"," ",2697],"=",["T_WHITESPACE"," ",2697],["T_STRING","sprintf",2697],"(",["T_CONSTANT_ENCAPSED_STRING","'ALTER TABLE %s'",2697],",",["T_WHITESPACE"," ",2697],["T_VARIABLE","$this",2697],["T_OBJECT_OPERATOR","->",2697],["T_STRING","quoteIdentifier",2697],"(",["T_VARIABLE","$this",2697],["T_OBJECT_OPERATOR","->",2697],["T_STRING","_getTableName",2697],"(",["T_VARIABLE","$tableName",2697],",",["T_WHITESPACE"," ",2697],["T_VARIABLE","$schemaName",2697],")",")",")",";",["T_WHITESPACE","\n        ",2697],["T_IF","if",2698],["T_WHITESPACE"," ",2698],"(",["T_ISSET","isset",2698],"(",["T_VARIABLE","$keyList",2698],"[",["T_STRING","strtoupper",2698],"(",["T_VARIABLE","$indexName",2698],")","]",")",")",["T_WHITESPACE"," ",2698],"{",["T_WHITESPACE","\n            ",2698],["T_IF","if",2699],["T_WHITESPACE"," ",2699],"(",["T_VARIABLE","$keyList",2699],"[",["T_STRING","strtoupper",2699],"(",["T_VARIABLE","$indexName",2699],")","]","[",["T_CONSTANT_ENCAPSED_STRING","'INDEX_TYPE'",2699],"]",["T_WHITESPACE"," ",2699],["T_IS_EQUAL","==",2699],["T_WHITESPACE"," ",2699],["T_STRING","Varien_Db_Adapter_Interface",2699],["T_DOUBLE_COLON","::",2699],["T_STRING","INDEX_TYPE_PRIMARY",2699],")",["T_WHITESPACE"," ",2699],"{",["T_WHITESPACE","\n                ",2699],["T_VARIABLE","$query",2700],["T_WHITESPACE"," ",2700],["T_CONCAT_EQUAL",".=",2700],["T_WHITESPACE"," ",2700],["T_CONSTANT_ENCAPSED_STRING","' DROP PRIMARY KEY,'",2700],";",["T_WHITESPACE","\n            ",2700],"}",["T_WHITESPACE"," ",2701],["T_ELSE","else",2701],["T_WHITESPACE"," ",2701],"{",["T_WHITESPACE","\n                ",2701],["T_VARIABLE","$query",2702],["T_WHITESPACE"," ",2702],["T_CONCAT_EQUAL",".=",2702],["T_WHITESPACE"," ",2702],["T_STRING","sprintf",2702],"(",["T_CONSTANT_ENCAPSED_STRING","' DROP INDEX %s,'",2702],",",["T_WHITESPACE"," ",2702],["T_VARIABLE","$this",2702],["T_OBJECT_OPERATOR","->",2702],["T_STRING","quoteIdentifier",2702],"(",["T_VARIABLE","$indexName",2702],")",")",";",["T_WHITESPACE","\n            ",2702],"}",["T_WHITESPACE","\n        ",2703],"}",["T_WHITESPACE","\n\n        ",2704],["T_IF","if",2706],["T_WHITESPACE"," ",2706],"(","!",["T_STRING","is_array",2706],"(",["T_VARIABLE","$fields",2706],")",")",["T_WHITESPACE"," ",2706],"{",["T_WHITESPACE","\n            ",2706],["T_VARIABLE","$fields",2707],["T_WHITESPACE"," ",2707],"=",["T_WHITESPACE"," ",2707],["T_ARRAY","array",2707],"(",["T_VARIABLE","$fields",2707],")",";",["T_WHITESPACE","\n        ",2707],"}",["T_WHITESPACE","\n\n        ",2708],["T_VARIABLE","$fieldSql",2710],["T_WHITESPACE"," ",2710],"=",["T_WHITESPACE"," ",2710],["T_ARRAY","array",2710],"(",")",";",["T_WHITESPACE","\n        ",2710],["T_FOREACH","foreach",2711],["T_WHITESPACE"," ",2711],"(",["T_VARIABLE","$fields",2711],["T_WHITESPACE"," ",2711],["T_AS","as",2711],["T_WHITESPACE"," ",2711],["T_VARIABLE","$field",2711],")",["T_WHITESPACE"," ",2711],"{",["T_WHITESPACE","\n            ",2711],["T_IF","if",2712],["T_WHITESPACE"," ",2712],"(","!",["T_ISSET","isset",2712],"(",["T_VARIABLE","$columns",2712],"[",["T_VARIABLE","$field",2712],"]",")",")",["T_WHITESPACE"," ",2712],"{",["T_WHITESPACE","\n                ",2712],["T_VARIABLE","$msg",2713],["T_WHITESPACE"," ",2713],"=",["T_WHITESPACE"," ",2713],["T_STRING","sprintf",2713],"(",["T_CONSTANT_ENCAPSED_STRING","'There is no field \"%s\" that you are trying to create an index on \"%s\"'",2713],",",["T_WHITESPACE","\n                    ",2713],["T_VARIABLE","$field",2714],",",["T_WHITESPACE"," ",2714],["T_VARIABLE","$tableName",2714],")",";",["T_WHITESPACE","\n                ",2714],["T_THROW","throw",2715],["T_WHITESPACE"," ",2715],["T_NEW","new",2715],["T_WHITESPACE"," ",2715],["T_STRING","Zend_Db_Exception",2715],"(",["T_VARIABLE","$msg",2715],")",";",["T_WHITESPACE","\n            ",2715],"}",["T_WHITESPACE","\n            ",2716],["T_VARIABLE","$fieldSql",2717],"[","]",["T_WHITESPACE"," ",2717],"=",["T_WHITESPACE"," ",2717],["T_VARIABLE","$this",2717],["T_OBJECT_OPERATOR","->",2717],["T_STRING","quoteIdentifier",2717],"(",["T_VARIABLE","$field",2717],")",";",["T_WHITESPACE","\n        ",2717],"}",["T_WHITESPACE","\n        ",2718],["T_VARIABLE","$fieldSql",2719],["T_WHITESPACE"," ",2719],"=",["T_WHITESPACE"," ",2719],["T_STRING","implode",2719],"(",["T_CONSTANT_ENCAPSED_STRING","','",2719],",",["T_WHITESPACE"," ",2719],["T_VARIABLE","$fieldSql",2719],")",";",["T_WHITESPACE","\n\n        ",2719],["T_SWITCH","switch",2721],["T_WHITESPACE"," ",2721],"(",["T_STRING","strtolower",2721],"(",["T_VARIABLE","$indexType",2721],")",")",["T_WHITESPACE"," ",2721],"{",["T_WHITESPACE","\n            ",2721],["T_CASE","case",2722],["T_WHITESPACE"," ",2722],["T_STRING","Varien_Db_Adapter_Interface",2722],["T_DOUBLE_COLON","::",2722],["T_STRING","INDEX_TYPE_PRIMARY",2722],":",["T_WHITESPACE","\n                ",2722],["T_VARIABLE","$condition",2723],["T_WHITESPACE"," ",2723],"=",["T_WHITESPACE"," ",2723],["T_CONSTANT_ENCAPSED_STRING","'PRIMARY KEY'",2723],";",["T_WHITESPACE","\n                ",2723],["T_BREAK","break",2724],";",["T_WHITESPACE","\n            ",2724],["T_CASE","case",2725],["T_WHITESPACE"," ",2725],["T_STRING","Varien_Db_Adapter_Interface",2725],["T_DOUBLE_COLON","::",2725],["T_STRING","INDEX_TYPE_UNIQUE",2725],":",["T_WHITESPACE","\n                ",2725],["T_VARIABLE","$condition",2726],["T_WHITESPACE"," ",2726],"=",["T_WHITESPACE"," ",2726],["T_CONSTANT_ENCAPSED_STRING","'UNIQUE '",2726],["T_WHITESPACE"," ",2726],".",["T_WHITESPACE"," ",2726],["T_VARIABLE","$this",2726],["T_OBJECT_OPERATOR","->",2726],["T_STRING","quoteIdentifier",2726],"(",["T_VARIABLE","$indexName",2726],")",";",["T_WHITESPACE","\n                ",2726],["T_BREAK","break",2727],";",["T_WHITESPACE","\n            ",2727],["T_CASE","case",2728],["T_WHITESPACE"," ",2728],["T_STRING","Varien_Db_Adapter_Interface",2728],["T_DOUBLE_COLON","::",2728],["T_STRING","INDEX_TYPE_FULLTEXT",2728],":",["T_WHITESPACE","\n                ",2728],["T_VARIABLE","$condition",2729],["T_WHITESPACE"," ",2729],"=",["T_WHITESPACE"," ",2729],["T_CONSTANT_ENCAPSED_STRING","'FULLTEXT '",2729],["T_WHITESPACE"," ",2729],".",["T_WHITESPACE"," ",2729],["T_VARIABLE","$this",2729],["T_OBJECT_OPERATOR","->",2729],["T_STRING","quoteIdentifier",2729],"(",["T_VARIABLE","$indexName",2729],")",";",["T_WHITESPACE","\n                ",2729],["T_BREAK","break",2730],";",["T_WHITESPACE","\n            ",2730],["T_DEFAULT","default",2731],":",["T_WHITESPACE","\n                ",2731],["T_VARIABLE","$condition",2732],["T_WHITESPACE"," ",2732],"=",["T_WHITESPACE"," ",2732],["T_CONSTANT_ENCAPSED_STRING","'INDEX '",2732],["T_WHITESPACE"," ",2732],".",["T_WHITESPACE"," ",2732],["T_VARIABLE","$this",2732],["T_OBJECT_OPERATOR","->",2732],["T_STRING","quoteIdentifier",2732],"(",["T_VARIABLE","$indexName",2732],")",";",["T_WHITESPACE","\n                ",2732],["T_BREAK","break",2733],";",["T_WHITESPACE","\n        ",2733],"}",["T_WHITESPACE","\n\n        ",2734],["T_VARIABLE","$query",2736],["T_WHITESPACE"," ",2736],["T_CONCAT_EQUAL",".=",2736],["T_WHITESPACE"," ",2736],["T_STRING","sprintf",2736],"(",["T_CONSTANT_ENCAPSED_STRING","' ADD %s (%s)'",2736],",",["T_WHITESPACE"," ",2736],["T_VARIABLE","$condition",2736],",",["T_WHITESPACE"," ",2736],["T_VARIABLE","$fieldSql",2736],")",";",["T_WHITESPACE","\n\n        ",2736],["T_VARIABLE","$cycle",2738],["T_WHITESPACE"," ",2738],"=",["T_WHITESPACE"," ",2738],["T_STRING","true",2738],";",["T_WHITESPACE","\n        ",2738],["T_WHILE","while",2739],["T_WHITESPACE"," ",2739],"(",["T_VARIABLE","$cycle",2739],["T_WHITESPACE"," ",2739],["T_IS_IDENTICAL","===",2739],["T_WHITESPACE"," ",2739],["T_STRING","true",2739],")",["T_WHITESPACE"," ",2739],"{",["T_WHITESPACE","\n            ",2739],["T_TRY","try",2740],["T_WHITESPACE"," ",2740],"{",["T_WHITESPACE","\n                ",2740],["T_VARIABLE","$result",2741],["T_WHITESPACE"," ",2741],"=",["T_WHITESPACE"," ",2741],["T_VARIABLE","$this",2741],["T_OBJECT_OPERATOR","->",2741],["T_STRING","raw_query",2741],"(",["T_VARIABLE","$query",2741],")",";",["T_WHITESPACE","\n                ",2741],["T_VARIABLE","$cycle",2742],["T_WHITESPACE","  ",2742],"=",["T_WHITESPACE"," ",2742],["T_STRING","false",2742],";",["T_WHITESPACE","\n            ",2742],"}",["T_WHITESPACE"," ",2743],["T_CATCH","catch",2743],["T_WHITESPACE"," ",2743],"(",["T_STRING","Exception",2743],["T_WHITESPACE"," ",2743],["T_VARIABLE","$e",2743],")",["T_WHITESPACE"," ",2743],"{",["T_WHITESPACE","\n                ",2743],["T_IF","if",2744],["T_WHITESPACE"," ",2744],"(",["T_STRING","in_array",2744],"(",["T_STRING","strtolower",2744],"(",["T_VARIABLE","$indexType",2744],")",",",["T_WHITESPACE"," ",2744],["T_ARRAY","array",2744],"(",["T_CONSTANT_ENCAPSED_STRING","'primary'",2744],",",["T_WHITESPACE"," ",2744],["T_CONSTANT_ENCAPSED_STRING","'unique'",2744],")",")",")",["T_WHITESPACE"," ",2744],"{",["T_WHITESPACE","\n                    ",2744],["T_VARIABLE","$match",2745],["T_WHITESPACE"," ",2745],"=",["T_WHITESPACE"," ",2745],["T_ARRAY","array",2745],"(",")",";",["T_WHITESPACE","\n                    ",2745],["T_IF","if",2746],["T_WHITESPACE"," ",2746],"(",["T_STRING","preg_match",2746],"(",["T_CONSTANT_ENCAPSED_STRING","'#SQLSTATE\\[23000\\]: [^:]+: 1062[^\\']+\\'([\\d-\\.]+)\\'#'",2746],",",["T_WHITESPACE"," ",2746],["T_VARIABLE","$e",2746],["T_OBJECT_OPERATOR","->",2746],["T_STRING","getMessage",2746],"(",")",",",["T_WHITESPACE"," ",2746],["T_VARIABLE","$match",2746],")",")",["T_WHITESPACE"," ",2746],"{",["T_WHITESPACE","\n                        ",2746],["T_VARIABLE","$ids",2747],["T_WHITESPACE"," ",2747],"=",["T_WHITESPACE"," ",2747],["T_STRING","explode",2747],"(",["T_CONSTANT_ENCAPSED_STRING","'-'",2747],",",["T_WHITESPACE"," ",2747],["T_VARIABLE","$match",2747],"[",["T_LNUMBER","1",2747],"]",")",";",["T_WHITESPACE","\n                        ",2747],["T_VARIABLE","$this",2748],["T_OBJECT_OPERATOR","->",2748],["T_STRING","_removeDuplicateEntry",2748],"(",["T_VARIABLE","$tableName",2748],",",["T_WHITESPACE"," ",2748],["T_VARIABLE","$fields",2748],",",["T_WHITESPACE"," ",2748],["T_VARIABLE","$ids",2748],")",";",["T_WHITESPACE","\n                        ",2748],["T_CONTINUE","continue",2749],";",["T_WHITESPACE","\n                    ",2749],"}",["T_WHITESPACE","\n                ",2750],"}",["T_WHITESPACE","\n                ",2751],["T_THROW","throw",2752],["T_WHITESPACE"," ",2752],["T_VARIABLE","$e",2752],";",["T_WHITESPACE","\n            ",2752],"}",["T_WHITESPACE","\n        ",2753],"}",["T_WHITESPACE","\n\n        ",2754],["T_VARIABLE","$this",2756],["T_OBJECT_OPERATOR","->",2756],["T_STRING","resetDdlCache",2756],"(",["T_VARIABLE","$tableName",2756],",",["T_WHITESPACE"," ",2756],["T_VARIABLE","$schemaName",2756],")",";",["T_WHITESPACE","\n\n        ",2756],["T_RETURN","return",2758],["T_WHITESPACE"," ",2758],["T_VARIABLE","$result",2758],";",["T_WHITESPACE","\n    ",2758],"}",["T_WHITESPACE","\n\n    ",2759],["T_DOC_COMMENT","\/**\n     * Drop the index from table\n     *\n     * @param string $tableName\n     * @param string $keyName\n     * @param string $schemaName\n     * @return bool|Zend_Db_Statement_Interface\n     *\/",2761],["T_WHITESPACE","\n    ",2768],["T_PUBLIC","public",2769],["T_WHITESPACE"," ",2769],["T_FUNCTION","function",2769],["T_WHITESPACE"," ",2769],["T_STRING","dropIndex",2769],"(",["T_VARIABLE","$tableName",2769],",",["T_WHITESPACE"," ",2769],["T_VARIABLE","$keyName",2769],",",["T_WHITESPACE"," ",2769],["T_VARIABLE","$schemaName",2769],["T_WHITESPACE"," ",2769],"=",["T_WHITESPACE"," ",2769],["T_STRING","null",2769],")",["T_WHITESPACE","\n    ",2769],"{",["T_WHITESPACE","\n        ",2770],["T_VARIABLE","$indexList",2771],["T_WHITESPACE"," ",2771],"=",["T_WHITESPACE"," ",2771],["T_VARIABLE","$this",2771],["T_OBJECT_OPERATOR","->",2771],["T_STRING","getIndexList",2771],"(",["T_VARIABLE","$tableName",2771],",",["T_WHITESPACE"," ",2771],["T_VARIABLE","$schemaName",2771],")",";",["T_WHITESPACE","\n        ",2771],["T_VARIABLE","$keyName",2772],["T_WHITESPACE"," ",2772],"=",["T_WHITESPACE"," ",2772],["T_STRING","strtoupper",2772],"(",["T_VARIABLE","$keyName",2772],")",";",["T_WHITESPACE","\n        ",2772],["T_IF","if",2773],["T_WHITESPACE"," ",2773],"(","!",["T_ISSET","isset",2773],"(",["T_VARIABLE","$indexList",2773],"[",["T_VARIABLE","$keyName",2773],"]",")",")",["T_WHITESPACE"," ",2773],"{",["T_WHITESPACE","\n            ",2773],["T_RETURN","return",2774],["T_WHITESPACE"," ",2774],["T_STRING","true",2774],";",["T_WHITESPACE","\n        ",2774],"}",["T_WHITESPACE","\n\n        ",2775],["T_IF","if",2777],["T_WHITESPACE"," ",2777],"(",["T_VARIABLE","$keyName",2777],["T_WHITESPACE"," ",2777],["T_IS_EQUAL","==",2777],["T_WHITESPACE"," ",2777],["T_CONSTANT_ENCAPSED_STRING","'PRIMARY'",2777],")",["T_WHITESPACE"," ",2777],"{",["T_WHITESPACE","\n            ",2777],["T_VARIABLE","$cond",2778],["T_WHITESPACE"," ",2778],"=",["T_WHITESPACE"," ",2778],["T_CONSTANT_ENCAPSED_STRING","'DROP PRIMARY KEY'",2778],";",["T_WHITESPACE","\n        ",2778],"}",["T_WHITESPACE"," ",2779],["T_ELSE","else",2779],["T_WHITESPACE"," ",2779],"{",["T_WHITESPACE","\n            ",2779],["T_VARIABLE","$cond",2780],["T_WHITESPACE"," ",2780],"=",["T_WHITESPACE"," ",2780],["T_CONSTANT_ENCAPSED_STRING","'DROP KEY '",2780],["T_WHITESPACE"," ",2780],".",["T_WHITESPACE"," ",2780],["T_VARIABLE","$this",2780],["T_OBJECT_OPERATOR","->",2780],["T_STRING","quoteIdentifier",2780],"(",["T_VARIABLE","$indexList",2780],"[",["T_VARIABLE","$keyName",2780],"]","[",["T_CONSTANT_ENCAPSED_STRING","'KEY_NAME'",2780],"]",")",";",["T_WHITESPACE","\n        ",2780],"}",["T_WHITESPACE","\n        ",2781],["T_VARIABLE","$sql",2782],["T_WHITESPACE"," ",2782],"=",["T_WHITESPACE"," ",2782],["T_STRING","sprintf",2782],"(",["T_CONSTANT_ENCAPSED_STRING","'ALTER TABLE %s %s'",2782],",",["T_WHITESPACE","\n            ",2782],["T_VARIABLE","$this",2783],["T_OBJECT_OPERATOR","->",2783],["T_STRING","quoteIdentifier",2783],"(",["T_VARIABLE","$this",2783],["T_OBJECT_OPERATOR","->",2783],["T_STRING","_getTableName",2783],"(",["T_VARIABLE","$tableName",2783],",",["T_WHITESPACE"," ",2783],["T_VARIABLE","$schemaName",2783],")",")",",",["T_WHITESPACE","\n            ",2783],["T_VARIABLE","$cond",2784],")",";",["T_WHITESPACE","\n\n        ",2784],["T_VARIABLE","$this",2786],["T_OBJECT_OPERATOR","->",2786],["T_STRING","resetDdlCache",2786],"(",["T_VARIABLE","$tableName",2786],",",["T_WHITESPACE"," ",2786],["T_VARIABLE","$schemaName",2786],")",";",["T_WHITESPACE","\n\n        ",2786],["T_RETURN","return",2788],["T_WHITESPACE"," ",2788],["T_VARIABLE","$this",2788],["T_OBJECT_OPERATOR","->",2788],["T_STRING","raw_query",2788],"(",["T_VARIABLE","$sql",2788],")",";",["T_WHITESPACE","\n    ",2788],"}",["T_WHITESPACE","\n\n    ",2789],["T_DOC_COMMENT","\/**\n     * Add new Foreign Key to table\n     * If Foreign Key with same name is exist - it will be deleted\n     *\n     * @param string $fkName\n     * @param string $tableName\n     * @param string $columnName\n     * @param string $refTableName\n     * @param string $refColumnName\n     * @param string $onDelete\n     * @param string $onUpdate\n     * @param boolean $purge            trying remove invalid data\n     * @param string $schemaName\n     * @param string $refSchemaName\n     * @return Varien_Db_Adapter_Pdo_Mysql\n     *\/",2791],["T_WHITESPACE","\n    ",2806],["T_PUBLIC","public",2807],["T_WHITESPACE"," ",2807],["T_FUNCTION","function",2807],["T_WHITESPACE"," ",2807],["T_STRING","addForeignKey",2807],"(",["T_VARIABLE","$fkName",2807],",",["T_WHITESPACE"," ",2807],["T_VARIABLE","$tableName",2807],",",["T_WHITESPACE"," ",2807],["T_VARIABLE","$columnName",2807],",",["T_WHITESPACE"," ",2807],["T_VARIABLE","$refTableName",2807],",",["T_WHITESPACE"," ",2807],["T_VARIABLE","$refColumnName",2807],",",["T_WHITESPACE","\n        ",2807],["T_VARIABLE","$onDelete",2808],["T_WHITESPACE"," ",2808],"=",["T_WHITESPACE"," ",2808],["T_STRING","Varien_Db_Adapter_Interface",2808],["T_DOUBLE_COLON","::",2808],["T_STRING","FK_ACTION_CASCADE",2808],",",["T_WHITESPACE","\n        ",2808],["T_VARIABLE","$onUpdate",2809],["T_WHITESPACE"," ",2809],"=",["T_WHITESPACE"," ",2809],["T_STRING","Varien_Db_Adapter_Interface",2809],["T_DOUBLE_COLON","::",2809],["T_STRING","FK_ACTION_CASCADE",2809],",",["T_WHITESPACE","\n        ",2809],["T_VARIABLE","$purge",2810],["T_WHITESPACE"," ",2810],"=",["T_WHITESPACE"," ",2810],["T_STRING","false",2810],",",["T_WHITESPACE"," ",2810],["T_VARIABLE","$schemaName",2810],["T_WHITESPACE"," ",2810],"=",["T_WHITESPACE"," ",2810],["T_STRING","null",2810],",",["T_WHITESPACE"," ",2810],["T_VARIABLE","$refSchemaName",2810],["T_WHITESPACE"," ",2810],"=",["T_WHITESPACE"," ",2810],["T_STRING","null",2810],")",["T_WHITESPACE","\n    ",2810],"{",["T_WHITESPACE","\n        ",2811],["T_VARIABLE","$this",2812],["T_OBJECT_OPERATOR","->",2812],["T_STRING","dropForeignKey",2812],"(",["T_VARIABLE","$tableName",2812],",",["T_WHITESPACE"," ",2812],["T_VARIABLE","$fkName",2812],",",["T_WHITESPACE"," ",2812],["T_VARIABLE","$schemaName",2812],")",";",["T_WHITESPACE","\n\n        ",2812],["T_IF","if",2814],["T_WHITESPACE"," ",2814],"(",["T_VARIABLE","$purge",2814],")",["T_WHITESPACE"," ",2814],"{",["T_WHITESPACE","\n            ",2814],["T_VARIABLE","$this",2815],["T_OBJECT_OPERATOR","->",2815],["T_STRING","purgeOrphanRecords",2815],"(",["T_VARIABLE","$tableName",2815],",",["T_WHITESPACE"," ",2815],["T_VARIABLE","$columnName",2815],",",["T_WHITESPACE"," ",2815],["T_VARIABLE","$refTableName",2815],",",["T_WHITESPACE"," ",2815],["T_VARIABLE","$refColumnName",2815],",",["T_WHITESPACE"," ",2815],["T_VARIABLE","$onDelete",2815],")",";",["T_WHITESPACE","\n        ",2815],"}",["T_WHITESPACE","\n\n        ",2816],["T_VARIABLE","$query",2818],["T_WHITESPACE"," ",2818],"=",["T_WHITESPACE"," ",2818],["T_STRING","sprintf",2818],"(",["T_CONSTANT_ENCAPSED_STRING","'ALTER TABLE %s ADD CONSTRAINT %s FOREIGN KEY (%s) REFERENCES %s (%s)'",2818],",",["T_WHITESPACE","\n            ",2818],["T_VARIABLE","$this",2819],["T_OBJECT_OPERATOR","->",2819],["T_STRING","quoteIdentifier",2819],"(",["T_VARIABLE","$this",2819],["T_OBJECT_OPERATOR","->",2819],["T_STRING","_getTableName",2819],"(",["T_VARIABLE","$tableName",2819],",",["T_WHITESPACE"," ",2819],["T_VARIABLE","$schemaName",2819],")",")",",",["T_WHITESPACE","\n            ",2819],["T_VARIABLE","$this",2820],["T_OBJECT_OPERATOR","->",2820],["T_STRING","quoteIdentifier",2820],"(",["T_VARIABLE","$fkName",2820],")",",",["T_WHITESPACE","\n            ",2820],["T_VARIABLE","$this",2821],["T_OBJECT_OPERATOR","->",2821],["T_STRING","quoteIdentifier",2821],"(",["T_VARIABLE","$columnName",2821],")",",",["T_WHITESPACE","\n            ",2821],["T_VARIABLE","$this",2822],["T_OBJECT_OPERATOR","->",2822],["T_STRING","quoteIdentifier",2822],"(",["T_VARIABLE","$this",2822],["T_OBJECT_OPERATOR","->",2822],["T_STRING","_getTableName",2822],"(",["T_VARIABLE","$refTableName",2822],",",["T_WHITESPACE"," ",2822],["T_VARIABLE","$refSchemaName",2822],")",")",",",["T_WHITESPACE","\n            ",2822],["T_VARIABLE","$this",2823],["T_OBJECT_OPERATOR","->",2823],["T_STRING","quoteIdentifier",2823],"(",["T_VARIABLE","$refColumnName",2823],")",["T_WHITESPACE","\n        ",2823],")",";",["T_WHITESPACE","\n\n        ",2824],["T_IF","if",2826],["T_WHITESPACE"," ",2826],"(",["T_VARIABLE","$onDelete",2826],["T_WHITESPACE"," ",2826],["T_IS_NOT_IDENTICAL","!==",2826],["T_WHITESPACE"," ",2826],["T_STRING","null",2826],")",["T_WHITESPACE"," ",2826],"{",["T_WHITESPACE","\n            ",2826],["T_VARIABLE","$query",2827],["T_WHITESPACE"," ",2827],["T_CONCAT_EQUAL",".=",2827],["T_WHITESPACE"," ",2827],["T_CONSTANT_ENCAPSED_STRING","' ON DELETE '",2827],["T_WHITESPACE"," ",2827],".",["T_WHITESPACE"," ",2827],["T_STRING","strtoupper",2827],"(",["T_VARIABLE","$onDelete",2827],")",";",["T_WHITESPACE","\n        ",2827],"}",["T_WHITESPACE","\n        ",2828],["T_IF","if",2829],["T_WHITESPACE"," ",2829],"(",["T_VARIABLE","$onUpdate",2829],["T_WHITESPACE","  ",2829],["T_IS_NOT_IDENTICAL","!==",2829],["T_WHITESPACE"," ",2829],["T_STRING","null",2829],")",["T_WHITESPACE"," ",2829],"{",["T_WHITESPACE","\n            ",2829],["T_VARIABLE","$query",2830],["T_WHITESPACE"," ",2830],["T_CONCAT_EQUAL",".=",2830],["T_WHITESPACE"," ",2830],["T_CONSTANT_ENCAPSED_STRING","' ON UPDATE '",2830],["T_WHITESPACE"," ",2830],".",["T_WHITESPACE"," ",2830],["T_STRING","strtoupper",2830],"(",["T_VARIABLE","$onUpdate",2830],")",";",["T_WHITESPACE","\n        ",2830],"}",["T_WHITESPACE","\n\n        ",2831],["T_VARIABLE","$result",2833],["T_WHITESPACE"," ",2833],"=",["T_WHITESPACE"," ",2833],["T_VARIABLE","$this",2833],["T_OBJECT_OPERATOR","->",2833],["T_STRING","raw_query",2833],"(",["T_VARIABLE","$query",2833],")",";",["T_WHITESPACE","\n        ",2833],["T_VARIABLE","$this",2834],["T_OBJECT_OPERATOR","->",2834],["T_STRING","resetDdlCache",2834],"(",["T_VARIABLE","$tableName",2834],")",";",["T_WHITESPACE","\n        ",2834],["T_RETURN","return",2835],["T_WHITESPACE"," ",2835],["T_VARIABLE","$result",2835],";",["T_WHITESPACE","\n    ",2835],"}",["T_WHITESPACE","\n\n    ",2836],["T_DOC_COMMENT","\/**\n     * Format Date to internal database date format\n     *\n     * @param int|string|Zend_Date $date\n     * @param boolean $includeTime\n     * @return Zend_Db_Expr\n     *\/",2838],["T_WHITESPACE","\n    ",2844],["T_PUBLIC","public",2845],["T_WHITESPACE"," ",2845],["T_FUNCTION","function",2845],["T_WHITESPACE"," ",2845],["T_STRING","formatDate",2845],"(",["T_VARIABLE","$date",2845],",",["T_WHITESPACE"," ",2845],["T_VARIABLE","$includeTime",2845],["T_WHITESPACE"," ",2845],"=",["T_WHITESPACE"," ",2845],["T_STRING","true",2845],")",["T_WHITESPACE","\n    ",2845],"{",["T_WHITESPACE","\n        ",2846],["T_VARIABLE","$date",2847],["T_WHITESPACE"," ",2847],"=",["T_WHITESPACE"," ",2847],["T_STRING","Varien_Date",2847],["T_DOUBLE_COLON","::",2847],["T_STRING","formatDate",2847],"(",["T_VARIABLE","$date",2847],",",["T_WHITESPACE"," ",2847],["T_VARIABLE","$includeTime",2847],")",";",["T_WHITESPACE","\n\n        ",2847],["T_IF","if",2849],["T_WHITESPACE"," ",2849],"(",["T_VARIABLE","$date",2849],["T_WHITESPACE"," ",2849],["T_IS_IDENTICAL","===",2849],["T_WHITESPACE"," ",2849],["T_STRING","null",2849],")",["T_WHITESPACE"," ",2849],"{",["T_WHITESPACE","\n            ",2849],["T_RETURN","return",2850],["T_WHITESPACE"," ",2850],["T_NEW","new",2850],["T_WHITESPACE"," ",2850],["T_STRING","Zend_Db_Expr",2850],"(",["T_CONSTANT_ENCAPSED_STRING","'NULL'",2850],")",";",["T_WHITESPACE","\n        ",2850],"}",["T_WHITESPACE","\n\n        ",2851],["T_RETURN","return",2853],["T_WHITESPACE"," ",2853],["T_NEW","new",2853],["T_WHITESPACE"," ",2853],["T_STRING","Zend_Db_Expr",2853],"(",["T_VARIABLE","$this",2853],["T_OBJECT_OPERATOR","->",2853],["T_STRING","quote",2853],"(",["T_VARIABLE","$date",2853],")",")",";",["T_WHITESPACE","\n    ",2853],"}",["T_WHITESPACE","\n\n    ",2854],["T_DOC_COMMENT","\/**\n     * Run additional environment before setup\n     *\n     * @return Varien_Db_Adapter_Pdo_Mysql\n     *\/",2856],["T_WHITESPACE","\n    ",2860],["T_PUBLIC","public",2861],["T_WHITESPACE"," ",2861],["T_FUNCTION","function",2861],["T_WHITESPACE"," ",2861],["T_STRING","startSetup",2861],"(",")",["T_WHITESPACE","\n    ",2861],"{",["T_WHITESPACE","\n        ",2862],["T_VARIABLE","$this",2863],["T_OBJECT_OPERATOR","->",2863],["T_STRING","raw_query",2863],"(",["T_CONSTANT_ENCAPSED_STRING","\"SET SQL_MODE=''\"",2863],")",";",["T_WHITESPACE","\n        ",2863],["T_VARIABLE","$this",2864],["T_OBJECT_OPERATOR","->",2864],["T_STRING","raw_query",2864],"(",["T_CONSTANT_ENCAPSED_STRING","\"SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0\"",2864],")",";",["T_WHITESPACE","\n        ",2864],["T_VARIABLE","$this",2865],["T_OBJECT_OPERATOR","->",2865],["T_STRING","raw_query",2865],"(",["T_CONSTANT_ENCAPSED_STRING","\"SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='NO_AUTO_VALUE_ON_ZERO'\"",2865],")",";",["T_WHITESPACE","\n\n        ",2865],["T_RETURN","return",2867],["T_WHITESPACE"," ",2867],["T_VARIABLE","$this",2867],";",["T_WHITESPACE","\n    ",2867],"}",["T_WHITESPACE","\n\n    ",2868],["T_DOC_COMMENT","\/**\n     * Run additional environment after setup\n     *\n     * @return Varien_Db_Adapter_Pdo_Mysql\n     *\/",2870],["T_WHITESPACE","\n    ",2874],["T_PUBLIC","public",2875],["T_WHITESPACE"," ",2875],["T_FUNCTION","function",2875],["T_WHITESPACE"," ",2875],["T_STRING","endSetup",2875],"(",")",["T_WHITESPACE","\n    ",2875],"{",["T_WHITESPACE","\n        ",2876],["T_VARIABLE","$this",2877],["T_OBJECT_OPERATOR","->",2877],["T_STRING","raw_query",2877],"(",["T_CONSTANT_ENCAPSED_STRING","\"SET SQL_MODE=IFNULL(@OLD_SQL_MODE,'')\"",2877],")",";",["T_WHITESPACE","\n        ",2877],["T_VARIABLE","$this",2878],["T_OBJECT_OPERATOR","->",2878],["T_STRING","raw_query",2878],"(",["T_CONSTANT_ENCAPSED_STRING","\"SET FOREIGN_KEY_CHECKS=IF(@OLD_FOREIGN_KEY_CHECKS=0, 0, 1)\"",2878],")",";",["T_WHITESPACE","\n\n        ",2878],["T_RETURN","return",2880],["T_WHITESPACE"," ",2880],["T_VARIABLE","$this",2880],";",["T_WHITESPACE","\n    ",2880],"}",["T_WHITESPACE","\n\n    ",2881],["T_DOC_COMMENT","\/**\n     * Build SQL statement for condition\n     *\n     * If $condition integer or string - exact value will be filtered ('eq' condition)\n     *\n     * If $condition is array is - one of the following structures is expected:\n     * - array(\"from\" => $fromValue, \"to\" => $toValue)\n     * - array(\"eq\" => $equalValue)\n     * - array(\"neq\" => $notEqualValue)\n     * - array(\"like\" => $likeValue)\n     * - array(\"in\" => array($inValues))\n     * - array(\"nin\" => array($notInValues))\n     * - array(\"notnull\" => $valueIsNotNull)\n     * - array(\"null\" => $valueIsNull)\n     * - array(\"gt\" => $greaterValue)\n     * - array(\"lt\" => $lessValue)\n     * - array(\"gteq\" => $greaterOrEqualValue)\n     * - array(\"lteq\" => $lessOrEqualValue)\n     * - array(\"finset\" => $valueInSet)\n     * - array(\"regexp\" => $regularExpression)\n     * - array(\"seq\" => $stringValue)\n     * - array(\"sneq\" => $stringValue)\n     *\n     * If non matched - sequential array is expected and OR conditions\n     * will be built using above mentioned structure\n     *\n     * @param string|array $fieldName\n     * @param integer|string|array $condition\n     * @return string\n     *\/",2883],["T_WHITESPACE","\n    ",2912],["T_PUBLIC","public",2913],["T_WHITESPACE"," ",2913],["T_FUNCTION","function",2913],["T_WHITESPACE"," ",2913],["T_STRING","prepareSqlCondition",2913],"(",["T_VARIABLE","$fieldName",2913],",",["T_WHITESPACE"," ",2913],["T_VARIABLE","$condition",2913],")",["T_WHITESPACE","\n    ",2913],"{",["T_WHITESPACE","\n        ",2914],["T_VARIABLE","$conditionKeyMap",2915],["T_WHITESPACE"," ",2915],"=",["T_WHITESPACE"," ",2915],["T_ARRAY","array",2915],"(",["T_WHITESPACE","\n            ",2915],["T_CONSTANT_ENCAPSED_STRING","'eq'",2916],["T_WHITESPACE","            ",2916],["T_DOUBLE_ARROW","=>",2916],["T_WHITESPACE"," ",2916],["T_CONSTANT_ENCAPSED_STRING","\"{{fieldName}} = ?\"",2916],",",["T_WHITESPACE","\n            ",2916],["T_CONSTANT_ENCAPSED_STRING","'neq'",2917],["T_WHITESPACE","           ",2917],["T_DOUBLE_ARROW","=>",2917],["T_WHITESPACE"," ",2917],["T_CONSTANT_ENCAPSED_STRING","\"{{fieldName}} != ?\"",2917],",",["T_WHITESPACE","\n            ",2917],["T_CONSTANT_ENCAPSED_STRING","'like'",2918],["T_WHITESPACE","          ",2918],["T_DOUBLE_ARROW","=>",2918],["T_WHITESPACE"," ",2918],["T_CONSTANT_ENCAPSED_STRING","\"{{fieldName}} LIKE ?\"",2918],",",["T_WHITESPACE","\n            ",2918],["T_CONSTANT_ENCAPSED_STRING","'nlike'",2919],["T_WHITESPACE","         ",2919],["T_DOUBLE_ARROW","=>",2919],["T_WHITESPACE"," ",2919],["T_CONSTANT_ENCAPSED_STRING","\"{{fieldName}} NOT LIKE ?\"",2919],",",["T_WHITESPACE","\n            ",2919],["T_CONSTANT_ENCAPSED_STRING","'in'",2920],["T_WHITESPACE","            ",2920],["T_DOUBLE_ARROW","=>",2920],["T_WHITESPACE"," ",2920],["T_CONSTANT_ENCAPSED_STRING","\"{{fieldName}} IN(?)\"",2920],",",["T_WHITESPACE","\n            ",2920],["T_CONSTANT_ENCAPSED_STRING","'nin'",2921],["T_WHITESPACE","           ",2921],["T_DOUBLE_ARROW","=>",2921],["T_WHITESPACE"," ",2921],["T_CONSTANT_ENCAPSED_STRING","\"{{fieldName}} NOT IN(?)\"",2921],",",["T_WHITESPACE","\n            ",2921],["T_CONSTANT_ENCAPSED_STRING","'is'",2922],["T_WHITESPACE","            ",2922],["T_DOUBLE_ARROW","=>",2922],["T_WHITESPACE"," ",2922],["T_CONSTANT_ENCAPSED_STRING","\"{{fieldName}} IS ?\"",2922],",",["T_WHITESPACE","\n            ",2922],["T_CONSTANT_ENCAPSED_STRING","'notnull'",2923],["T_WHITESPACE","       ",2923],["T_DOUBLE_ARROW","=>",2923],["T_WHITESPACE"," ",2923],["T_CONSTANT_ENCAPSED_STRING","\"{{fieldName}} IS NOT NULL\"",2923],",",["T_WHITESPACE","\n            ",2923],["T_CONSTANT_ENCAPSED_STRING","'null'",2924],["T_WHITESPACE","          ",2924],["T_DOUBLE_ARROW","=>",2924],["T_WHITESPACE"," ",2924],["T_CONSTANT_ENCAPSED_STRING","\"{{fieldName}} IS NULL\"",2924],",",["T_WHITESPACE","\n            ",2924],["T_CONSTANT_ENCAPSED_STRING","'gt'",2925],["T_WHITESPACE","            ",2925],["T_DOUBLE_ARROW","=>",2925],["T_WHITESPACE"," ",2925],["T_CONSTANT_ENCAPSED_STRING","\"{{fieldName}} > ?\"",2925],",",["T_WHITESPACE","\n            ",2925],["T_CONSTANT_ENCAPSED_STRING","'lt'",2926],["T_WHITESPACE","            ",2926],["T_DOUBLE_ARROW","=>",2926],["T_WHITESPACE"," ",2926],["T_CONSTANT_ENCAPSED_STRING","\"{{fieldName}} < ?\"",2926],",",["T_WHITESPACE","\n            ",2926],["T_CONSTANT_ENCAPSED_STRING","'gteq'",2927],["T_WHITESPACE","          ",2927],["T_DOUBLE_ARROW","=>",2927],["T_WHITESPACE"," ",2927],["T_CONSTANT_ENCAPSED_STRING","\"{{fieldName}} >= ?\"",2927],",",["T_WHITESPACE","\n            ",2927],["T_CONSTANT_ENCAPSED_STRING","'lteq'",2928],["T_WHITESPACE","          ",2928],["T_DOUBLE_ARROW","=>",2928],["T_WHITESPACE"," ",2928],["T_CONSTANT_ENCAPSED_STRING","\"{{fieldName}} <= ?\"",2928],",",["T_WHITESPACE","\n            ",2928],["T_CONSTANT_ENCAPSED_STRING","'finset'",2929],["T_WHITESPACE","        ",2929],["T_DOUBLE_ARROW","=>",2929],["T_WHITESPACE"," ",2929],["T_CONSTANT_ENCAPSED_STRING","\"FIND_IN_SET(?, {{fieldName}})\"",2929],",",["T_WHITESPACE","\n            ",2929],["T_CONSTANT_ENCAPSED_STRING","'regexp'",2930],["T_WHITESPACE","        ",2930],["T_DOUBLE_ARROW","=>",2930],["T_WHITESPACE"," ",2930],["T_CONSTANT_ENCAPSED_STRING","\"{{fieldName}} REGEXP ?\"",2930],",",["T_WHITESPACE","\n            ",2930],["T_CONSTANT_ENCAPSED_STRING","'from'",2931],["T_WHITESPACE","          ",2931],["T_DOUBLE_ARROW","=>",2931],["T_WHITESPACE"," ",2931],["T_CONSTANT_ENCAPSED_STRING","\"{{fieldName}} >= ?\"",2931],",",["T_WHITESPACE","\n            ",2931],["T_CONSTANT_ENCAPSED_STRING","'to'",2932],["T_WHITESPACE","            ",2932],["T_DOUBLE_ARROW","=>",2932],["T_WHITESPACE"," ",2932],["T_CONSTANT_ENCAPSED_STRING","\"{{fieldName}} <= ?\"",2932],",",["T_WHITESPACE","\n            ",2932],["T_CONSTANT_ENCAPSED_STRING","'seq'",2933],["T_WHITESPACE","           ",2933],["T_DOUBLE_ARROW","=>",2933],["T_WHITESPACE"," ",2933],["T_STRING","null",2933],",",["T_WHITESPACE","\n            ",2933],["T_CONSTANT_ENCAPSED_STRING","'sneq'",2934],["T_WHITESPACE","          ",2934],["T_DOUBLE_ARROW","=>",2934],["T_WHITESPACE"," ",2934],["T_STRING","null",2934],["T_WHITESPACE","\n        ",2934],")",";",["T_WHITESPACE","\n\n        ",2935],["T_VARIABLE","$query",2937],["T_WHITESPACE"," ",2937],"=",["T_WHITESPACE"," ",2937],["T_CONSTANT_ENCAPSED_STRING","''",2937],";",["T_WHITESPACE","\n        ",2937],["T_IF","if",2938],["T_WHITESPACE"," ",2938],"(",["T_STRING","is_array",2938],"(",["T_VARIABLE","$condition",2938],")",")",["T_WHITESPACE"," ",2938],"{",["T_WHITESPACE","\n            ",2938],["T_VARIABLE","$key",2939],["T_WHITESPACE"," ",2939],"=",["T_WHITESPACE"," ",2939],["T_STRING","key",2939],"(",["T_STRING","array_intersect_key",2939],"(",["T_VARIABLE","$condition",2939],",",["T_WHITESPACE"," ",2939],["T_VARIABLE","$conditionKeyMap",2939],")",")",";",["T_WHITESPACE","\n\n            ",2939],["T_IF","if",2941],["T_WHITESPACE"," ",2941],"(",["T_ISSET","isset",2941],"(",["T_VARIABLE","$condition",2941],"[",["T_CONSTANT_ENCAPSED_STRING","'from'",2941],"]",")",["T_WHITESPACE"," ",2941],["T_BOOLEAN_OR","||",2941],["T_WHITESPACE"," ",2941],["T_ISSET","isset",2941],"(",["T_VARIABLE","$condition",2941],"[",["T_CONSTANT_ENCAPSED_STRING","'to'",2941],"]",")",")",["T_WHITESPACE"," ",2941],"{",["T_WHITESPACE","\n                ",2941],["T_IF","if",2942],["T_WHITESPACE"," ",2942],"(",["T_ISSET","isset",2942],"(",["T_VARIABLE","$condition",2942],"[",["T_CONSTANT_ENCAPSED_STRING","'from'",2942],"]",")",")",["T_WHITESPACE"," ",2942],"{",["T_WHITESPACE","\n                    ",2942],["T_VARIABLE","$from",2943],["T_WHITESPACE","  ",2943],"=",["T_WHITESPACE"," ",2943],["T_VARIABLE","$this",2943],["T_OBJECT_OPERATOR","->",2943],["T_STRING","_prepareSqlDateCondition",2943],"(",["T_VARIABLE","$condition",2943],",",["T_WHITESPACE"," ",2943],["T_CONSTANT_ENCAPSED_STRING","'from'",2943],")",";",["T_WHITESPACE","\n                    ",2943],["T_VARIABLE","$query",2944],["T_WHITESPACE"," ",2944],"=",["T_WHITESPACE"," ",2944],["T_VARIABLE","$this",2944],["T_OBJECT_OPERATOR","->",2944],["T_STRING","_prepareQuotedSqlCondition",2944],"(",["T_VARIABLE","$conditionKeyMap",2944],"[",["T_CONSTANT_ENCAPSED_STRING","'from'",2944],"]",",",["T_WHITESPACE"," ",2944],["T_VARIABLE","$from",2944],",",["T_WHITESPACE"," ",2944],["T_VARIABLE","$fieldName",2944],")",";",["T_WHITESPACE","\n                ",2944],"}",["T_WHITESPACE","\n\n                ",2945],["T_IF","if",2947],["T_WHITESPACE"," ",2947],"(",["T_ISSET","isset",2947],"(",["T_VARIABLE","$condition",2947],"[",["T_CONSTANT_ENCAPSED_STRING","'to'",2947],"]",")",")",["T_WHITESPACE"," ",2947],"{",["T_WHITESPACE","\n                    ",2947],["T_VARIABLE","$query",2948],["T_WHITESPACE"," ",2948],["T_CONCAT_EQUAL",".=",2948],["T_WHITESPACE"," ",2948],["T_EMPTY","empty",2948],"(",["T_VARIABLE","$query",2948],")",["T_WHITESPACE"," ",2948],"?",["T_WHITESPACE"," ",2948],["T_CONSTANT_ENCAPSED_STRING","''",2948],["T_WHITESPACE"," ",2948],":",["T_WHITESPACE"," ",2948],["T_CONSTANT_ENCAPSED_STRING","' AND '",2948],";",["T_WHITESPACE","\n                    ",2948],["T_VARIABLE","$to",2949],["T_WHITESPACE","     ",2949],"=",["T_WHITESPACE"," ",2949],["T_VARIABLE","$this",2949],["T_OBJECT_OPERATOR","->",2949],["T_STRING","_prepareSqlDateCondition",2949],"(",["T_VARIABLE","$condition",2949],",",["T_WHITESPACE"," ",2949],["T_CONSTANT_ENCAPSED_STRING","'to'",2949],")",";",["T_WHITESPACE","\n                    ",2949],["T_VARIABLE","$query",2950],["T_WHITESPACE"," ",2950],"=",["T_WHITESPACE"," ",2950],["T_VARIABLE","$this",2950],["T_OBJECT_OPERATOR","->",2950],["T_STRING","_prepareQuotedSqlCondition",2950],"(",["T_VARIABLE","$query",2950],["T_WHITESPACE"," ",2950],".",["T_WHITESPACE"," ",2950],["T_VARIABLE","$conditionKeyMap",2950],"[",["T_CONSTANT_ENCAPSED_STRING","'to'",2950],"]",",",["T_WHITESPACE"," ",2950],["T_VARIABLE","$to",2950],",",["T_WHITESPACE"," ",2950],["T_VARIABLE","$fieldName",2950],")",";",["T_WHITESPACE","\n                ",2950],"}",["T_WHITESPACE","\n            ",2951],"}",["T_WHITESPACE"," ",2952],["T_ELSEIF","elseif",2952],["T_WHITESPACE"," ",2952],"(",["T_STRING","array_key_exists",2952],"(",["T_VARIABLE","$key",2952],",",["T_WHITESPACE"," ",2952],["T_VARIABLE","$conditionKeyMap",2952],")",")",["T_WHITESPACE"," ",2952],"{",["T_WHITESPACE","\n                ",2952],["T_VARIABLE","$value",2953],["T_WHITESPACE"," ",2953],"=",["T_WHITESPACE"," ",2953],["T_VARIABLE","$condition",2953],"[",["T_VARIABLE","$key",2953],"]",";",["T_WHITESPACE","\n                ",2953],["T_IF","if",2954],["T_WHITESPACE"," ",2954],"(","(",["T_VARIABLE","$key",2954],["T_WHITESPACE"," ",2954],["T_IS_EQUAL","==",2954],["T_WHITESPACE"," ",2954],["T_CONSTANT_ENCAPSED_STRING","'seq'",2954],")",["T_WHITESPACE"," ",2954],["T_BOOLEAN_OR","||",2954],["T_WHITESPACE"," ",2954],"(",["T_VARIABLE","$key",2954],["T_WHITESPACE"," ",2954],["T_IS_EQUAL","==",2954],["T_WHITESPACE"," ",2954],["T_CONSTANT_ENCAPSED_STRING","'sneq'",2954],")",")",["T_WHITESPACE"," ",2954],"{",["T_WHITESPACE","\n                    ",2954],["T_VARIABLE","$key",2955],["T_WHITESPACE"," ",2955],"=",["T_WHITESPACE"," ",2955],["T_VARIABLE","$this",2955],["T_OBJECT_OPERATOR","->",2955],["T_STRING","_transformStringSqlCondition",2955],"(",["T_VARIABLE","$key",2955],",",["T_WHITESPACE"," ",2955],["T_VARIABLE","$value",2955],")",";",["T_WHITESPACE","\n                ",2955],"}",["T_WHITESPACE","\n                ",2956],["T_VARIABLE","$query",2957],["T_WHITESPACE"," ",2957],"=",["T_WHITESPACE"," ",2957],["T_VARIABLE","$this",2957],["T_OBJECT_OPERATOR","->",2957],["T_STRING","_prepareQuotedSqlCondition",2957],"(",["T_VARIABLE","$conditionKeyMap",2957],"[",["T_VARIABLE","$key",2957],"]",",",["T_WHITESPACE"," ",2957],["T_VARIABLE","$value",2957],",",["T_WHITESPACE"," ",2957],["T_VARIABLE","$fieldName",2957],")",";",["T_WHITESPACE","\n            ",2957],"}",["T_WHITESPACE"," ",2958],["T_ELSE","else",2958],["T_WHITESPACE"," ",2958],"{",["T_WHITESPACE","\n                ",2958],["T_VARIABLE","$queries",2959],["T_WHITESPACE"," ",2959],"=",["T_WHITESPACE"," ",2959],["T_ARRAY","array",2959],"(",")",";",["T_WHITESPACE","\n                ",2959],["T_FOREACH","foreach",2960],["T_WHITESPACE"," ",2960],"(",["T_VARIABLE","$condition",2960],["T_WHITESPACE"," ",2960],["T_AS","as",2960],["T_WHITESPACE"," ",2960],["T_VARIABLE","$orCondition",2960],")",["T_WHITESPACE"," ",2960],"{",["T_WHITESPACE","\n                    ",2960],["T_VARIABLE","$queries",2961],"[","]",["T_WHITESPACE"," ",2961],"=",["T_WHITESPACE"," ",2961],["T_STRING","sprintf",2961],"(",["T_CONSTANT_ENCAPSED_STRING","'(%s)'",2961],",",["T_WHITESPACE"," ",2961],["T_VARIABLE","$this",2961],["T_OBJECT_OPERATOR","->",2961],["T_STRING","prepareSqlCondition",2961],"(",["T_VARIABLE","$fieldName",2961],",",["T_WHITESPACE"," ",2961],["T_VARIABLE","$orCondition",2961],")",")",";",["T_WHITESPACE","\n                ",2961],"}",["T_WHITESPACE","\n\n                ",2962],["T_VARIABLE","$query",2964],["T_WHITESPACE"," ",2964],"=",["T_WHITESPACE"," ",2964],["T_STRING","sprintf",2964],"(",["T_CONSTANT_ENCAPSED_STRING","'(%s)'",2964],",",["T_WHITESPACE"," ",2964],["T_STRING","implode",2964],"(",["T_CONSTANT_ENCAPSED_STRING","' OR '",2964],",",["T_WHITESPACE"," ",2964],["T_VARIABLE","$queries",2964],")",")",";",["T_WHITESPACE","\n            ",2964],"}",["T_WHITESPACE","\n        ",2965],"}",["T_WHITESPACE"," ",2966],["T_ELSE","else",2966],["T_WHITESPACE"," ",2966],"{",["T_WHITESPACE","\n            ",2966],["T_VARIABLE","$query",2967],["T_WHITESPACE"," ",2967],"=",["T_WHITESPACE"," ",2967],["T_VARIABLE","$this",2967],["T_OBJECT_OPERATOR","->",2967],["T_STRING","_prepareQuotedSqlCondition",2967],"(",["T_VARIABLE","$conditionKeyMap",2967],"[",["T_CONSTANT_ENCAPSED_STRING","'eq'",2967],"]",",",["T_WHITESPACE"," ",2967],["T_STRING_CAST","(string)",2967],["T_VARIABLE","$condition",2967],",",["T_WHITESPACE"," ",2967],["T_VARIABLE","$fieldName",2967],")",";",["T_WHITESPACE","\n        ",2967],"}",["T_WHITESPACE","\n\n        ",2968],["T_RETURN","return",2970],["T_WHITESPACE"," ",2970],["T_VARIABLE","$query",2970],";",["T_WHITESPACE","\n    ",2970],"}",["T_WHITESPACE","\n\n    ",2971],["T_DOC_COMMENT","\/**\n     * Prepare Sql condition\n     *\n     * @param  $text Condition value\n     * @param  mixed $value\n     * @param  string $fieldName\n     * @return string\n     *\/",2973],["T_WHITESPACE","\n    ",2980],["T_PROTECTED","protected",2981],["T_WHITESPACE"," ",2981],["T_FUNCTION","function",2981],["T_WHITESPACE"," ",2981],["T_STRING","_prepareQuotedSqlCondition",2981],"(",["T_VARIABLE","$text",2981],",",["T_WHITESPACE"," ",2981],["T_VARIABLE","$value",2981],",",["T_WHITESPACE"," ",2981],["T_VARIABLE","$fieldName",2981],")",["T_WHITESPACE","\n    ",2981],"{",["T_WHITESPACE","\n        ",2982],["T_VARIABLE","$sql",2983],["T_WHITESPACE"," ",2983],"=",["T_WHITESPACE"," ",2983],["T_VARIABLE","$this",2983],["T_OBJECT_OPERATOR","->",2983],["T_STRING","quoteInto",2983],"(",["T_VARIABLE","$text",2983],",",["T_WHITESPACE"," ",2983],["T_VARIABLE","$value",2983],")",";",["T_WHITESPACE","\n        ",2983],["T_VARIABLE","$sql",2984],["T_WHITESPACE"," ",2984],"=",["T_WHITESPACE"," ",2984],["T_STRING","str_replace",2984],"(",["T_CONSTANT_ENCAPSED_STRING","'{{fieldName}}'",2984],",",["T_WHITESPACE"," ",2984],["T_VARIABLE","$fieldName",2984],",",["T_WHITESPACE"," ",2984],["T_VARIABLE","$sql",2984],")",";",["T_WHITESPACE","\n        ",2984],["T_RETURN","return",2985],["T_WHITESPACE"," ",2985],["T_VARIABLE","$sql",2985],";",["T_WHITESPACE","\n    ",2985],"}",["T_WHITESPACE","\n\n    ",2986],["T_DOC_COMMENT","\/**\n     * Transforms sql condition key 'seq' \/ 'sneq' that is used for comparing string values to its analog:\n     * - 'null' \/ 'notnull' for empty strings\n     * - 'eq' \/ 'neq' for non-empty strings\n     *\n     * @param string $conditionKey\n     * @param mixed $value\n     * @return string\n     *\/",2988],["T_WHITESPACE","\n    ",2996],["T_PROTECTED","protected",2997],["T_WHITESPACE"," ",2997],["T_FUNCTION","function",2997],["T_WHITESPACE"," ",2997],["T_STRING","_transformStringSqlCondition",2997],"(",["T_VARIABLE","$conditionKey",2997],",",["T_WHITESPACE"," ",2997],["T_VARIABLE","$value",2997],")",["T_WHITESPACE","\n    ",2997],"{",["T_WHITESPACE","\n        ",2998],["T_VARIABLE","$value",2999],["T_WHITESPACE"," ",2999],"=",["T_WHITESPACE"," ",2999],["T_STRING_CAST","(string)",2999],["T_WHITESPACE"," ",2999],["T_VARIABLE","$value",2999],";",["T_WHITESPACE","\n        ",2999],["T_IF","if",3000],["T_WHITESPACE"," ",3000],"(",["T_VARIABLE","$value",3000],["T_WHITESPACE"," ",3000],["T_IS_EQUAL","==",3000],["T_WHITESPACE"," ",3000],["T_CONSTANT_ENCAPSED_STRING","''",3000],")",["T_WHITESPACE"," ",3000],"{",["T_WHITESPACE","\n            ",3000],["T_RETURN","return",3001],["T_WHITESPACE"," ",3001],"(",["T_VARIABLE","$conditionKey",3001],["T_WHITESPACE"," ",3001],["T_IS_EQUAL","==",3001],["T_WHITESPACE"," ",3001],["T_CONSTANT_ENCAPSED_STRING","'seq'",3001],")",["T_WHITESPACE"," ",3001],"?",["T_WHITESPACE"," ",3001],["T_CONSTANT_ENCAPSED_STRING","'null'",3001],["T_WHITESPACE"," ",3001],":",["T_WHITESPACE"," ",3001],["T_CONSTANT_ENCAPSED_STRING","'notnull'",3001],";",["T_WHITESPACE","\n        ",3001],"}",["T_WHITESPACE"," ",3002],["T_ELSE","else",3002],["T_WHITESPACE"," ",3002],"{",["T_WHITESPACE","\n            ",3002],["T_RETURN","return",3003],["T_WHITESPACE"," ",3003],"(",["T_VARIABLE","$conditionKey",3003],["T_WHITESPACE"," ",3003],["T_IS_EQUAL","==",3003],["T_WHITESPACE"," ",3003],["T_CONSTANT_ENCAPSED_STRING","'seq'",3003],")",["T_WHITESPACE"," ",3003],"?",["T_WHITESPACE"," ",3003],["T_CONSTANT_ENCAPSED_STRING","'eq'",3003],["T_WHITESPACE"," ",3003],":",["T_WHITESPACE"," ",3003],["T_CONSTANT_ENCAPSED_STRING","'neq'",3003],";",["T_WHITESPACE","\n        ",3003],"}",["T_WHITESPACE","\n    ",3004],"}",["T_WHITESPACE","\n\n    ",3005],["T_DOC_COMMENT","\/**\n     * Prepare value for save in column\n     * Return converted to column data type value\n     *\n     * @param array $column     the column describe array\n     * @param mixed $value\n     * @return mixed\n     *\/",3007],["T_WHITESPACE","\n    ",3014],["T_PUBLIC","public",3015],["T_WHITESPACE"," ",3015],["T_FUNCTION","function",3015],["T_WHITESPACE"," ",3015],["T_STRING","prepareColumnValue",3015],"(",["T_ARRAY","array",3015],["T_WHITESPACE"," ",3015],["T_VARIABLE","$column",3015],",",["T_WHITESPACE"," ",3015],["T_VARIABLE","$value",3015],")",["T_WHITESPACE","\n    ",3015],"{",["T_WHITESPACE","\n        ",3016],["T_IF","if",3017],["T_WHITESPACE"," ",3017],"(",["T_VARIABLE","$value",3017],["T_WHITESPACE"," ",3017],["T_INSTANCEOF","instanceof",3017],["T_WHITESPACE"," ",3017],["T_STRING","Zend_Db_Expr",3017],")",["T_WHITESPACE"," ",3017],"{",["T_WHITESPACE","\n            ",3017],["T_RETURN","return",3018],["T_WHITESPACE"," ",3018],["T_VARIABLE","$value",3018],";",["T_WHITESPACE","\n        ",3018],"}",["T_WHITESPACE","\n        ",3019],["T_IF","if",3020],["T_WHITESPACE"," ",3020],"(",["T_VARIABLE","$value",3020],["T_WHITESPACE"," ",3020],["T_INSTANCEOF","instanceof",3020],["T_WHITESPACE"," ",3020],["T_STRING","Varien_Db_Statement_Parameter",3020],")",["T_WHITESPACE"," ",3020],"{",["T_WHITESPACE","\n            ",3020],["T_RETURN","return",3021],["T_WHITESPACE"," ",3021],["T_VARIABLE","$value",3021],";",["T_WHITESPACE","\n        ",3021],"}",["T_WHITESPACE","\n\n        ",3022],["T_COMMENT","\/\/ return original value if invalid column describe data\n",3024],["T_WHITESPACE","        ",3025],["T_IF","if",3025],["T_WHITESPACE"," ",3025],"(","!",["T_ISSET","isset",3025],"(",["T_VARIABLE","$column",3025],"[",["T_CONSTANT_ENCAPSED_STRING","'DATA_TYPE'",3025],"]",")",")",["T_WHITESPACE"," ",3025],"{",["T_WHITESPACE","\n            ",3025],["T_RETURN","return",3026],["T_WHITESPACE"," ",3026],["T_VARIABLE","$value",3026],";",["T_WHITESPACE","\n        ",3026],"}",["T_WHITESPACE","\n\n        ",3027],["T_COMMENT","\/\/ return null\n",3029],["T_WHITESPACE","        ",3030],["T_IF","if",3030],["T_WHITESPACE"," ",3030],"(",["T_STRING","is_null",3030],"(",["T_VARIABLE","$value",3030],")",["T_WHITESPACE"," ",3030],["T_BOOLEAN_AND","&&",3030],["T_WHITESPACE"," ",3030],["T_VARIABLE","$column",3030],"[",["T_CONSTANT_ENCAPSED_STRING","'NULLABLE'",3030],"]",")",["T_WHITESPACE"," ",3030],"{",["T_WHITESPACE","\n            ",3030],["T_RETURN","return",3031],["T_WHITESPACE"," ",3031],["T_STRING","null",3031],";",["T_WHITESPACE","\n        ",3031],"}",["T_WHITESPACE","\n\n        ",3032],["T_SWITCH","switch",3034],["T_WHITESPACE"," ",3034],"(",["T_VARIABLE","$column",3034],"[",["T_CONSTANT_ENCAPSED_STRING","'DATA_TYPE'",3034],"]",")",["T_WHITESPACE"," ",3034],"{",["T_WHITESPACE","\n            ",3034],["T_CASE","case",3035],["T_WHITESPACE"," ",3035],["T_CONSTANT_ENCAPSED_STRING","'smallint'",3035],":",["T_WHITESPACE","\n            ",3035],["T_CASE","case",3036],["T_WHITESPACE"," ",3036],["T_CONSTANT_ENCAPSED_STRING","'int'",3036],":",["T_WHITESPACE","\n                ",3036],["T_VARIABLE","$value",3037],["T_WHITESPACE"," ",3037],"=",["T_WHITESPACE"," ",3037],["T_INT_CAST","(int)",3037],["T_VARIABLE","$value",3037],";",["T_WHITESPACE","\n                ",3037],["T_BREAK","break",3038],";",["T_WHITESPACE","\n            ",3038],["T_CASE","case",3039],["T_WHITESPACE"," ",3039],["T_CONSTANT_ENCAPSED_STRING","'bigint'",3039],":",["T_WHITESPACE","\n                ",3039],["T_IF","if",3040],["T_WHITESPACE"," ",3040],"(","!",["T_STRING","is_integer",3040],"(",["T_VARIABLE","$value",3040],")",")",["T_WHITESPACE"," ",3040],"{",["T_WHITESPACE","\n                    ",3040],["T_VARIABLE","$value",3041],["T_WHITESPACE"," ",3041],"=",["T_WHITESPACE"," ",3041],["T_STRING","sprintf",3041],"(",["T_CONSTANT_ENCAPSED_STRING","'%.0f'",3041],",",["T_WHITESPACE"," ",3041],["T_DOUBLE_CAST","(float)",3041],["T_VARIABLE","$value",3041],")",";",["T_WHITESPACE","\n                ",3041],"}",["T_WHITESPACE","\n                ",3042],["T_BREAK","break",3043],";",["T_WHITESPACE","\n\n            ",3043],["T_CASE","case",3045],["T_WHITESPACE"," ",3045],["T_CONSTANT_ENCAPSED_STRING","'decimal'",3045],":",["T_WHITESPACE","\n                ",3045],["T_VARIABLE","$precision",3046],["T_WHITESPACE","  ",3046],"=",["T_WHITESPACE"," ",3046],["T_LNUMBER","10",3046],";",["T_WHITESPACE","\n                ",3046],["T_VARIABLE","$scale",3047],["T_WHITESPACE","      ",3047],"=",["T_WHITESPACE"," ",3047],["T_LNUMBER","0",3047],";",["T_WHITESPACE","\n                ",3047],["T_IF","if",3048],["T_WHITESPACE"," ",3048],"(",["T_ISSET","isset",3048],"(",["T_VARIABLE","$column",3048],"[",["T_CONSTANT_ENCAPSED_STRING","'SCALE'",3048],"]",")",")",["T_WHITESPACE"," ",3048],"{",["T_WHITESPACE","\n                    ",3048],["T_VARIABLE","$scale",3049],["T_WHITESPACE"," ",3049],"=",["T_WHITESPACE"," ",3049],["T_VARIABLE","$column",3049],"[",["T_CONSTANT_ENCAPSED_STRING","'SCALE'",3049],"]",";",["T_WHITESPACE","\n                ",3049],"}",["T_WHITESPACE","\n                ",3050],["T_IF","if",3051],["T_WHITESPACE"," ",3051],"(",["T_ISSET","isset",3051],"(",["T_VARIABLE","$column",3051],"[",["T_CONSTANT_ENCAPSED_STRING","'PRECISION'",3051],"]",")",")",["T_WHITESPACE"," ",3051],"{",["T_WHITESPACE","\n                    ",3051],["T_VARIABLE","$precision",3052],["T_WHITESPACE"," ",3052],"=",["T_WHITESPACE"," ",3052],["T_VARIABLE","$column",3052],"[",["T_CONSTANT_ENCAPSED_STRING","'PRECISION'",3052],"]",";",["T_WHITESPACE","\n                ",3052],"}",["T_WHITESPACE","\n                ",3053],["T_VARIABLE","$format",3054],["T_WHITESPACE"," ",3054],"=",["T_WHITESPACE"," ",3054],["T_STRING","sprintf",3054],"(",["T_CONSTANT_ENCAPSED_STRING","'%%%d.%dF'",3054],",",["T_WHITESPACE"," ",3054],["T_VARIABLE","$precision",3054],["T_WHITESPACE"," ",3054],"-",["T_WHITESPACE"," ",3054],["T_VARIABLE","$scale",3054],",",["T_WHITESPACE"," ",3054],["T_VARIABLE","$scale",3054],")",";",["T_WHITESPACE","\n                ",3054],["T_VARIABLE","$value",3055],["T_WHITESPACE","  ",3055],"=",["T_WHITESPACE"," ",3055],["T_DOUBLE_CAST","(float)",3055],["T_STRING","sprintf",3055],"(",["T_VARIABLE","$format",3055],",",["T_WHITESPACE"," ",3055],["T_VARIABLE","$value",3055],")",";",["T_WHITESPACE","\n                ",3055],["T_BREAK","break",3056],";",["T_WHITESPACE","\n\n            ",3056],["T_CASE","case",3058],["T_WHITESPACE"," ",3058],["T_CONSTANT_ENCAPSED_STRING","'float'",3058],":",["T_WHITESPACE","\n                ",3058],["T_VARIABLE","$value",3059],["T_WHITESPACE","  ",3059],"=",["T_WHITESPACE"," ",3059],["T_DOUBLE_CAST","(float)",3059],["T_STRING","sprintf",3059],"(",["T_CONSTANT_ENCAPSED_STRING","'%F'",3059],",",["T_WHITESPACE"," ",3059],["T_VARIABLE","$value",3059],")",";",["T_WHITESPACE","\n                ",3059],["T_BREAK","break",3060],";",["T_WHITESPACE","\n\n            ",3060],["T_CASE","case",3062],["T_WHITESPACE"," ",3062],["T_CONSTANT_ENCAPSED_STRING","'date'",3062],":",["T_WHITESPACE","\n                ",3062],["T_VARIABLE","$value",3063],["T_WHITESPACE","  ",3063],"=",["T_WHITESPACE"," ",3063],["T_VARIABLE","$this",3063],["T_OBJECT_OPERATOR","->",3063],["T_STRING","formatDate",3063],"(",["T_VARIABLE","$value",3063],",",["T_WHITESPACE"," ",3063],["T_STRING","false",3063],")",";",["T_WHITESPACE","\n                ",3063],["T_BREAK","break",3064],";",["T_WHITESPACE","\n            ",3064],["T_CASE","case",3065],["T_WHITESPACE"," ",3065],["T_CONSTANT_ENCAPSED_STRING","'datetime'",3065],":",["T_WHITESPACE","\n            ",3065],["T_CASE","case",3066],["T_WHITESPACE"," ",3066],["T_CONSTANT_ENCAPSED_STRING","'timestamp'",3066],":",["T_WHITESPACE","\n                ",3066],["T_VARIABLE","$value",3067],["T_WHITESPACE","  ",3067],"=",["T_WHITESPACE"," ",3067],["T_VARIABLE","$this",3067],["T_OBJECT_OPERATOR","->",3067],["T_STRING","formatDate",3067],"(",["T_VARIABLE","$value",3067],")",";",["T_WHITESPACE","\n                ",3067],["T_BREAK","break",3068],";",["T_WHITESPACE","\n\n            ",3068],["T_CASE","case",3070],["T_WHITESPACE"," ",3070],["T_CONSTANT_ENCAPSED_STRING","'varchar'",3070],":",["T_WHITESPACE","\n            ",3070],["T_CASE","case",3071],["T_WHITESPACE"," ",3071],["T_CONSTANT_ENCAPSED_STRING","'mediumtext'",3071],":",["T_WHITESPACE","\n            ",3071],["T_CASE","case",3072],["T_WHITESPACE"," ",3072],["T_CONSTANT_ENCAPSED_STRING","'text'",3072],":",["T_WHITESPACE","\n            ",3072],["T_CASE","case",3073],["T_WHITESPACE"," ",3073],["T_CONSTANT_ENCAPSED_STRING","'longtext'",3073],":",["T_WHITESPACE","\n                ",3073],["T_VARIABLE","$value",3074],["T_WHITESPACE","  ",3074],"=",["T_WHITESPACE"," ",3074],["T_STRING_CAST","(string)",3074],["T_VARIABLE","$value",3074],";",["T_WHITESPACE","\n                ",3074],["T_IF","if",3075],["T_WHITESPACE"," ",3075],"(",["T_VARIABLE","$column",3075],"[",["T_CONSTANT_ENCAPSED_STRING","'NULLABLE'",3075],"]",["T_WHITESPACE"," ",3075],["T_BOOLEAN_AND","&&",3075],["T_WHITESPACE"," ",3075],["T_VARIABLE","$value",3075],["T_WHITESPACE"," ",3075],["T_IS_EQUAL","==",3075],["T_WHITESPACE"," ",3075],["T_CONSTANT_ENCAPSED_STRING","''",3075],")",["T_WHITESPACE"," ",3075],"{",["T_WHITESPACE","\n                    ",3075],["T_VARIABLE","$value",3076],["T_WHITESPACE"," ",3076],"=",["T_WHITESPACE"," ",3076],["T_STRING","null",3076],";",["T_WHITESPACE","\n                ",3076],"}",["T_WHITESPACE","\n                ",3077],["T_BREAK","break",3078],";",["T_WHITESPACE","\n\n            ",3078],["T_CASE","case",3080],["T_WHITESPACE"," ",3080],["T_CONSTANT_ENCAPSED_STRING","'varbinary'",3080],":",["T_WHITESPACE","\n            ",3080],["T_CASE","case",3081],["T_WHITESPACE"," ",3081],["T_CONSTANT_ENCAPSED_STRING","'mediumblob'",3081],":",["T_WHITESPACE","\n            ",3081],["T_CASE","case",3082],["T_WHITESPACE"," ",3082],["T_CONSTANT_ENCAPSED_STRING","'blob'",3082],":",["T_WHITESPACE","\n            ",3082],["T_CASE","case",3083],["T_WHITESPACE"," ",3083],["T_CONSTANT_ENCAPSED_STRING","'longblob'",3083],":",["T_WHITESPACE","\n                ",3083],["T_COMMENT","\/\/ No special processing for MySQL is needed\n",3084],["T_WHITESPACE","                ",3085],["T_BREAK","break",3085],";",["T_WHITESPACE","\n        ",3085],"}",["T_WHITESPACE","\n\n        ",3086],["T_RETURN","return",3088],["T_WHITESPACE"," ",3088],["T_VARIABLE","$value",3088],";",["T_WHITESPACE","\n    ",3088],"}",["T_WHITESPACE","\n\n    ",3089],["T_DOC_COMMENT","\/**\n     * Generate fragment of SQL, that check condition and return true or false value\n     *\n     * @param Zend_Db_Expr|Zend_Db_Select|string $expression\n     * @param string $true  true value\n     * @param string $false false value\n     *\/",3091],["T_WHITESPACE","\n    ",3097],["T_PUBLIC","public",3098],["T_WHITESPACE"," ",3098],["T_FUNCTION","function",3098],["T_WHITESPACE"," ",3098],["T_STRING","getCheckSql",3098],"(",["T_VARIABLE","$expression",3098],",",["T_WHITESPACE"," ",3098],["T_VARIABLE","$true",3098],",",["T_WHITESPACE"," ",3098],["T_VARIABLE","$false",3098],")",["T_WHITESPACE","\n    ",3098],"{",["T_WHITESPACE","\n        ",3099],["T_IF","if",3100],["T_WHITESPACE"," ",3100],"(",["T_VARIABLE","$expression",3100],["T_WHITESPACE"," ",3100],["T_INSTANCEOF","instanceof",3100],["T_WHITESPACE"," ",3100],["T_STRING","Zend_Db_Expr",3100],["T_WHITESPACE"," ",3100],["T_BOOLEAN_OR","||",3100],["T_WHITESPACE"," ",3100],["T_VARIABLE","$expression",3100],["T_WHITESPACE"," ",3100],["T_INSTANCEOF","instanceof",3100],["T_WHITESPACE"," ",3100],["T_STRING","Zend_Db_Select",3100],")",["T_WHITESPACE"," ",3100],"{",["T_WHITESPACE","\n            ",3100],["T_VARIABLE","$expression",3101],["T_WHITESPACE"," ",3101],"=",["T_WHITESPACE"," ",3101],["T_STRING","sprintf",3101],"(",["T_CONSTANT_ENCAPSED_STRING","\"IF((%s), %s, %s)\"",3101],",",["T_WHITESPACE"," ",3101],["T_VARIABLE","$expression",3101],",",["T_WHITESPACE"," ",3101],["T_VARIABLE","$true",3101],",",["T_WHITESPACE"," ",3101],["T_VARIABLE","$false",3101],")",";",["T_WHITESPACE","\n        ",3101],"}",["T_WHITESPACE"," ",3102],["T_ELSE","else",3102],["T_WHITESPACE"," ",3102],"{",["T_WHITESPACE","\n            ",3102],["T_VARIABLE","$expression",3103],["T_WHITESPACE"," ",3103],"=",["T_WHITESPACE"," ",3103],["T_STRING","sprintf",3103],"(",["T_CONSTANT_ENCAPSED_STRING","\"IF(%s, %s, %s)\"",3103],",",["T_WHITESPACE"," ",3103],["T_VARIABLE","$expression",3103],",",["T_WHITESPACE"," ",3103],["T_VARIABLE","$true",3103],",",["T_WHITESPACE"," ",3103],["T_VARIABLE","$false",3103],")",";",["T_WHITESPACE","\n        ",3103],"}",["T_WHITESPACE","\n\n        ",3104],["T_RETURN","return",3106],["T_WHITESPACE"," ",3106],["T_NEW","new",3106],["T_WHITESPACE"," ",3106],["T_STRING","Zend_Db_Expr",3106],"(",["T_VARIABLE","$expression",3106],")",";",["T_WHITESPACE","\n    ",3106],"}",["T_WHITESPACE","\n\n    ",3107],["T_DOC_COMMENT","\/**\n     * Returns valid IFNULL expression\n     *\n     * @param Zend_Db_Expr|Zend_Db_Select|string $expression\n     * @param string $value OPTIONAL. Applies when $expression is NULL\n     * @return Zend_Db_Expr\n     *\/",3109],["T_WHITESPACE","\n    ",3115],["T_PUBLIC","public",3116],["T_WHITESPACE"," ",3116],["T_FUNCTION","function",3116],["T_WHITESPACE"," ",3116],["T_STRING","getIfNullSql",3116],"(",["T_VARIABLE","$expression",3116],",",["T_WHITESPACE"," ",3116],["T_VARIABLE","$value",3116],["T_WHITESPACE"," ",3116],"=",["T_WHITESPACE"," ",3116],["T_LNUMBER","0",3116],")",["T_WHITESPACE","\n    ",3116],"{",["T_WHITESPACE","\n        ",3117],["T_IF","if",3118],["T_WHITESPACE"," ",3118],"(",["T_VARIABLE","$expression",3118],["T_WHITESPACE"," ",3118],["T_INSTANCEOF","instanceof",3118],["T_WHITESPACE"," ",3118],["T_STRING","Zend_Db_Expr",3118],["T_WHITESPACE"," ",3118],["T_BOOLEAN_OR","||",3118],["T_WHITESPACE"," ",3118],["T_VARIABLE","$expression",3118],["T_WHITESPACE"," ",3118],["T_INSTANCEOF","instanceof",3118],["T_WHITESPACE"," ",3118],["T_STRING","Zend_Db_Select",3118],")",["T_WHITESPACE"," ",3118],"{",["T_WHITESPACE","\n            ",3118],["T_VARIABLE","$expression",3119],["T_WHITESPACE"," ",3119],"=",["T_WHITESPACE"," ",3119],["T_STRING","sprintf",3119],"(",["T_CONSTANT_ENCAPSED_STRING","\"IFNULL((%s), %s)\"",3119],",",["T_WHITESPACE"," ",3119],["T_VARIABLE","$expression",3119],",",["T_WHITESPACE"," ",3119],["T_VARIABLE","$value",3119],")",";",["T_WHITESPACE","\n        ",3119],"}",["T_WHITESPACE"," ",3120],["T_ELSE","else",3120],["T_WHITESPACE"," ",3120],"{",["T_WHITESPACE","\n            ",3120],["T_VARIABLE","$expression",3121],["T_WHITESPACE"," ",3121],"=",["T_WHITESPACE"," ",3121],["T_STRING","sprintf",3121],"(",["T_CONSTANT_ENCAPSED_STRING","\"IFNULL(%s, %s)\"",3121],",",["T_WHITESPACE"," ",3121],["T_VARIABLE","$expression",3121],",",["T_WHITESPACE"," ",3121],["T_VARIABLE","$value",3121],")",";",["T_WHITESPACE","\n        ",3121],"}",["T_WHITESPACE","\n\n        ",3122],["T_RETURN","return",3124],["T_WHITESPACE"," ",3124],["T_NEW","new",3124],["T_WHITESPACE"," ",3124],["T_STRING","Zend_Db_Expr",3124],"(",["T_VARIABLE","$expression",3124],")",";",["T_WHITESPACE","\n    ",3124],"}",["T_WHITESPACE","\n\n    ",3125],["T_DOC_COMMENT","\/**\n     * Generate fragment of SQL, that check value against multiple condition cases\n     * and return different result depends on them\n     *\n     * @param string $valueName Name of value to check\n     * @param array $casesResults Cases and results\n     * @param string $defaultValue value to use if value doesn't conform to any cases\n     *\n     * @return Zend_Db_Expr\n     *\/",3127],["T_WHITESPACE","\n    ",3136],["T_PUBLIC","public",3137],["T_WHITESPACE"," ",3137],["T_FUNCTION","function",3137],["T_WHITESPACE"," ",3137],["T_STRING","getCaseSql",3137],"(",["T_VARIABLE","$valueName",3137],",",["T_WHITESPACE"," ",3137],["T_VARIABLE","$casesResults",3137],",",["T_WHITESPACE"," ",3137],["T_VARIABLE","$defaultValue",3137],["T_WHITESPACE"," ",3137],"=",["T_WHITESPACE"," ",3137],["T_STRING","null",3137],")",["T_WHITESPACE","\n    ",3137],"{",["T_WHITESPACE","\n        ",3138],["T_VARIABLE","$expression",3139],["T_WHITESPACE"," ",3139],"=",["T_WHITESPACE"," ",3139],["T_CONSTANT_ENCAPSED_STRING","'CASE '",3139],["T_WHITESPACE"," ",3139],".",["T_WHITESPACE"," ",3139],["T_VARIABLE","$valueName",3139],";",["T_WHITESPACE","\n        ",3139],["T_FOREACH","foreach",3140],["T_WHITESPACE"," ",3140],"(",["T_VARIABLE","$casesResults",3140],["T_WHITESPACE"," ",3140],["T_AS","as",3140],["T_WHITESPACE"," ",3140],["T_VARIABLE","$case",3140],["T_WHITESPACE"," ",3140],["T_DOUBLE_ARROW","=>",3140],["T_WHITESPACE"," ",3140],["T_VARIABLE","$result",3140],")",["T_WHITESPACE"," ",3140],"{",["T_WHITESPACE","\n            ",3140],["T_VARIABLE","$expression",3141],["T_WHITESPACE"," ",3141],["T_CONCAT_EQUAL",".=",3141],["T_WHITESPACE"," ",3141],["T_CONSTANT_ENCAPSED_STRING","' WHEN '",3141],["T_WHITESPACE"," ",3141],".",["T_WHITESPACE"," ",3141],["T_VARIABLE","$case",3141],["T_WHITESPACE"," ",3141],".",["T_WHITESPACE"," ",3141],["T_CONSTANT_ENCAPSED_STRING","' THEN '",3141],["T_WHITESPACE"," ",3141],".",["T_WHITESPACE"," ",3141],["T_VARIABLE","$result",3141],";",["T_WHITESPACE","\n        ",3141],"}",["T_WHITESPACE","\n        ",3142],["T_IF","if",3143],["T_WHITESPACE"," ",3143],"(",["T_VARIABLE","$defaultValue",3143],["T_WHITESPACE"," ",3143],["T_IS_NOT_IDENTICAL","!==",3143],["T_WHITESPACE"," ",3143],["T_STRING","null",3143],")",["T_WHITESPACE"," ",3143],"{",["T_WHITESPACE","\n            ",3143],["T_VARIABLE","$expression",3144],["T_WHITESPACE"," ",3144],["T_CONCAT_EQUAL",".=",3144],["T_WHITESPACE"," ",3144],["T_CONSTANT_ENCAPSED_STRING","' ELSE '",3144],["T_WHITESPACE"," ",3144],".",["T_WHITESPACE"," ",3144],["T_VARIABLE","$defaultValue",3144],";",["T_WHITESPACE","\n        ",3144],"}",["T_WHITESPACE","\n        ",3145],["T_VARIABLE","$expression",3146],["T_WHITESPACE"," ",3146],["T_CONCAT_EQUAL",".=",3146],["T_WHITESPACE"," ",3146],["T_CONSTANT_ENCAPSED_STRING","' END'",3146],";",["T_WHITESPACE","\n\n        ",3146],["T_RETURN","return",3148],["T_WHITESPACE"," ",3148],["T_NEW","new",3148],["T_WHITESPACE"," ",3148],["T_STRING","Zend_Db_Expr",3148],"(",["T_VARIABLE","$expression",3148],")",";",["T_WHITESPACE","\n    ",3148],"}",["T_WHITESPACE","\n\n    ",3149],["T_DOC_COMMENT","\/**\n     * Generate fragment of SQL, that combine together (concatenate) the results from data array\n     * All arguments in data must be quoted\n     *\n     * @param array $data\n     * @param string $separator concatenate with separator\n     * @return Zend_Db_Expr\n     *\/",3151],["T_WHITESPACE","\n    ",3158],["T_PUBLIC","public",3159],["T_WHITESPACE"," ",3159],["T_FUNCTION","function",3159],["T_WHITESPACE"," ",3159],["T_STRING","getConcatSql",3159],"(",["T_ARRAY","array",3159],["T_WHITESPACE"," ",3159],["T_VARIABLE","$data",3159],",",["T_WHITESPACE"," ",3159],["T_VARIABLE","$separator",3159],["T_WHITESPACE"," ",3159],"=",["T_WHITESPACE"," ",3159],["T_STRING","null",3159],")",["T_WHITESPACE","\n    ",3159],"{",["T_WHITESPACE","\n        ",3160],["T_VARIABLE","$format",3161],["T_WHITESPACE"," ",3161],"=",["T_WHITESPACE"," ",3161],["T_EMPTY","empty",3161],"(",["T_VARIABLE","$separator",3161],")",["T_WHITESPACE"," ",3161],"?",["T_WHITESPACE"," ",3161],["T_CONSTANT_ENCAPSED_STRING","'CONCAT(%s)'",3161],["T_WHITESPACE"," ",3161],":",["T_WHITESPACE"," ",3161],"\"",["T_ENCAPSED_AND_WHITESPACE","CONCAT_WS('",3161],["T_CURLY_OPEN","{",3161],["T_VARIABLE","$separator",3161],"}",["T_ENCAPSED_AND_WHITESPACE","', %s)",3161],"\"",";",["T_WHITESPACE","\n        ",3161],["T_RETURN","return",3162],["T_WHITESPACE"," ",3162],["T_NEW","new",3162],["T_WHITESPACE"," ",3162],["T_STRING","Zend_Db_Expr",3162],"(",["T_STRING","sprintf",3162],"(",["T_VARIABLE","$format",3162],",",["T_WHITESPACE"," ",3162],["T_STRING","implode",3162],"(",["T_CONSTANT_ENCAPSED_STRING","', '",3162],",",["T_WHITESPACE"," ",3162],["T_VARIABLE","$data",3162],")",")",")",";",["T_WHITESPACE","\n    ",3162],"}",["T_WHITESPACE","\n\n    ",3163],["T_DOC_COMMENT","\/**\n     * Generate fragment of SQL that returns length of character string\n     * The string argument must be quoted\n     *\n     * @param string $string\n     * @return Zend_Db_Expr\n     *\/",3165],["T_WHITESPACE","\n    ",3171],["T_PUBLIC","public",3172],["T_WHITESPACE"," ",3172],["T_FUNCTION","function",3172],["T_WHITESPACE"," ",3172],["T_STRING","getLengthSql",3172],"(",["T_VARIABLE","$string",3172],")",["T_WHITESPACE","\n    ",3172],"{",["T_WHITESPACE","\n        ",3173],["T_RETURN","return",3174],["T_WHITESPACE"," ",3174],["T_NEW","new",3174],["T_WHITESPACE"," ",3174],["T_STRING","Zend_Db_Expr",3174],"(",["T_STRING","sprintf",3174],"(",["T_CONSTANT_ENCAPSED_STRING","'LENGTH(%s)'",3174],",",["T_WHITESPACE"," ",3174],["T_VARIABLE","$string",3174],")",")",";",["T_WHITESPACE","\n    ",3174],"}",["T_WHITESPACE","\n\n    ",3175],["T_DOC_COMMENT","\/**\n     * Generate fragment of SQL, that compare with two or more arguments, and returns the smallest\n     * (minimum-valued) argument\n     * All arguments in data must be quoted\n     *\n     * @param array $data\n     * @return Zend_Db_Expr\n     *\/",3177],["T_WHITESPACE","\n    ",3184],["T_PUBLIC","public",3185],["T_WHITESPACE"," ",3185],["T_FUNCTION","function",3185],["T_WHITESPACE"," ",3185],["T_STRING","getLeastSql",3185],"(",["T_ARRAY","array",3185],["T_WHITESPACE"," ",3185],["T_VARIABLE","$data",3185],")",["T_WHITESPACE","\n    ",3185],"{",["T_WHITESPACE","\n        ",3186],["T_RETURN","return",3187],["T_WHITESPACE"," ",3187],["T_NEW","new",3187],["T_WHITESPACE"," ",3187],["T_STRING","Zend_Db_Expr",3187],"(",["T_STRING","sprintf",3187],"(",["T_CONSTANT_ENCAPSED_STRING","'LEAST(%s)'",3187],",",["T_WHITESPACE"," ",3187],["T_STRING","implode",3187],"(",["T_CONSTANT_ENCAPSED_STRING","', '",3187],",",["T_WHITESPACE"," ",3187],["T_VARIABLE","$data",3187],")",")",")",";",["T_WHITESPACE","\n    ",3187],"}",["T_WHITESPACE","\n\n    ",3188],["T_DOC_COMMENT","\/**\n     * Generate fragment of SQL, that compare with two or more arguments, and returns the largest\n     * (maximum-valued) argument\n     * All arguments in data must be quoted\n     *\n     * @param array $data\n     * @return Zend_Db_Expr\n     *\/",3190],["T_WHITESPACE","\n    ",3197],["T_PUBLIC","public",3198],["T_WHITESPACE"," ",3198],["T_FUNCTION","function",3198],["T_WHITESPACE"," ",3198],["T_STRING","getGreatestSql",3198],"(",["T_ARRAY","array",3198],["T_WHITESPACE"," ",3198],["T_VARIABLE","$data",3198],")",["T_WHITESPACE","\n    ",3198],"{",["T_WHITESPACE","\n        ",3199],["T_RETURN","return",3200],["T_WHITESPACE"," ",3200],["T_NEW","new",3200],["T_WHITESPACE"," ",3200],["T_STRING","Zend_Db_Expr",3200],"(",["T_STRING","sprintf",3200],"(",["T_CONSTANT_ENCAPSED_STRING","'GREATEST(%s)'",3200],",",["T_WHITESPACE"," ",3200],["T_STRING","implode",3200],"(",["T_CONSTANT_ENCAPSED_STRING","', '",3200],",",["T_WHITESPACE"," ",3200],["T_VARIABLE","$data",3200],")",")",")",";",["T_WHITESPACE","\n    ",3200],"}",["T_WHITESPACE","\n\n    ",3201],["T_DOC_COMMENT","\/**\n     * Get Interval Unit SQL fragment\n     *\n     * @param int $interval\n     * @param string $unit\n     * @return string\n     * @throws Zend_Db_Exception\n     *\/",3203],["T_WHITESPACE","\n    ",3210],["T_PROTECTED","protected",3211],["T_WHITESPACE"," ",3211],["T_FUNCTION","function",3211],["T_WHITESPACE"," ",3211],["T_STRING","_getIntervalUnitSql",3211],"(",["T_VARIABLE","$interval",3211],",",["T_WHITESPACE"," ",3211],["T_VARIABLE","$unit",3211],")",["T_WHITESPACE","\n    ",3211],"{",["T_WHITESPACE","\n        ",3212],["T_IF","if",3213],["T_WHITESPACE"," ",3213],"(","!",["T_ISSET","isset",3213],"(",["T_VARIABLE","$this",3213],["T_OBJECT_OPERATOR","->",3213],["T_STRING","_intervalUnits",3213],"[",["T_VARIABLE","$unit",3213],"]",")",")",["T_WHITESPACE"," ",3213],"{",["T_WHITESPACE","\n            ",3213],["T_THROW","throw",3214],["T_WHITESPACE"," ",3214],["T_NEW","new",3214],["T_WHITESPACE"," ",3214],["T_STRING","Zend_Db_Exception",3214],"(",["T_STRING","sprintf",3214],"(",["T_CONSTANT_ENCAPSED_STRING","'Undefined interval unit \"%s\" specified'",3214],",",["T_WHITESPACE"," ",3214],["T_VARIABLE","$unit",3214],")",")",";",["T_WHITESPACE","\n        ",3214],"}",["T_WHITESPACE","\n\n        ",3215],["T_RETURN","return",3217],["T_WHITESPACE"," ",3217],["T_STRING","sprintf",3217],"(",["T_CONSTANT_ENCAPSED_STRING","'INTERVAL %d %s'",3217],",",["T_WHITESPACE"," ",3217],["T_VARIABLE","$interval",3217],",",["T_WHITESPACE"," ",3217],["T_VARIABLE","$this",3217],["T_OBJECT_OPERATOR","->",3217],["T_STRING","_intervalUnits",3217],"[",["T_VARIABLE","$unit",3217],"]",")",";",["T_WHITESPACE","\n    ",3217],"}",["T_WHITESPACE","\n\n    ",3218],["T_DOC_COMMENT","\/**\n     * Add time values (intervals) to a date value\n     *\n     * @see INTERVAL_* constants for $unit\n     *\n     * @param Zend_Db_Expr|string $date   quoted field name or SQL statement\n     * @param int $interval\n     * @param string $unit\n     * @return Zend_Db_Expr\n     *\/",3220],["T_WHITESPACE","\n    ",3229],["T_PUBLIC","public",3230],["T_WHITESPACE"," ",3230],["T_FUNCTION","function",3230],["T_WHITESPACE"," ",3230],["T_STRING","getDateAddSql",3230],"(",["T_VARIABLE","$date",3230],",",["T_WHITESPACE"," ",3230],["T_VARIABLE","$interval",3230],",",["T_WHITESPACE"," ",3230],["T_VARIABLE","$unit",3230],")",["T_WHITESPACE","\n    ",3230],"{",["T_WHITESPACE","\n        ",3231],["T_VARIABLE","$expr",3232],["T_WHITESPACE"," ",3232],"=",["T_WHITESPACE"," ",3232],["T_STRING","sprintf",3232],"(",["T_CONSTANT_ENCAPSED_STRING","'DATE_ADD(%s, %s)'",3232],",",["T_WHITESPACE"," ",3232],["T_VARIABLE","$date",3232],",",["T_WHITESPACE"," ",3232],["T_VARIABLE","$this",3232],["T_OBJECT_OPERATOR","->",3232],["T_STRING","_getIntervalUnitSql",3232],"(",["T_VARIABLE","$interval",3232],",",["T_WHITESPACE"," ",3232],["T_VARIABLE","$unit",3232],")",")",";",["T_WHITESPACE","\n        ",3232],["T_RETURN","return",3233],["T_WHITESPACE"," ",3233],["T_NEW","new",3233],["T_WHITESPACE"," ",3233],["T_STRING","Zend_Db_Expr",3233],"(",["T_VARIABLE","$expr",3233],")",";",["T_WHITESPACE","\n    ",3233],"}",["T_WHITESPACE","\n\n    ",3234],["T_DOC_COMMENT","\/**\n     * Subtract time values (intervals) to a date value\n     *\n     * @see INTERVAL_* constants for $expr\n     *\n     * @param Zend_Db_Expr|string $date   quoted field name or SQL statement\n     * @param int|string $interval\n     * @param string $unit\n     * @return Zend_Db_Expr\n     *\/",3236],["T_WHITESPACE","\n    ",3245],["T_PUBLIC","public",3246],["T_WHITESPACE"," ",3246],["T_FUNCTION","function",3246],["T_WHITESPACE"," ",3246],["T_STRING","getDateSubSql",3246],"(",["T_VARIABLE","$date",3246],",",["T_WHITESPACE"," ",3246],["T_VARIABLE","$interval",3246],",",["T_WHITESPACE"," ",3246],["T_VARIABLE","$unit",3246],")",["T_WHITESPACE","\n    ",3246],"{",["T_WHITESPACE","\n        ",3247],["T_VARIABLE","$expr",3248],["T_WHITESPACE"," ",3248],"=",["T_WHITESPACE"," ",3248],["T_STRING","sprintf",3248],"(",["T_CONSTANT_ENCAPSED_STRING","'DATE_SUB(%s, %s)'",3248],",",["T_WHITESPACE"," ",3248],["T_VARIABLE","$date",3248],",",["T_WHITESPACE"," ",3248],["T_VARIABLE","$this",3248],["T_OBJECT_OPERATOR","->",3248],["T_STRING","_getIntervalUnitSql",3248],"(",["T_VARIABLE","$interval",3248],",",["T_WHITESPACE"," ",3248],["T_VARIABLE","$unit",3248],")",")",";",["T_WHITESPACE","\n        ",3248],["T_RETURN","return",3249],["T_WHITESPACE"," ",3249],["T_NEW","new",3249],["T_WHITESPACE"," ",3249],["T_STRING","Zend_Db_Expr",3249],"(",["T_VARIABLE","$expr",3249],")",";",["T_WHITESPACE","\n    ",3249],"}",["T_WHITESPACE","\n\n    ",3250],["T_DOC_COMMENT","\/**\n     * Format date as specified\n     *\n     * Supported format Specifier\n     *\n     * %H   Hour (00..23)\n     * %i   Minutes, numeric (00..59)\n     * %s   Seconds (00..59)\n     * %d   Day of the month, numeric (00..31)\n     * %m   Month, numeric (00..12)\n     * %Y   Year, numeric, four digits\n     *\n     * @param string $date  quoted date value or non quoted SQL statement(field)\n     * @param string $format\n     * @return Zend_Db_Expr\n     *\/",3252],["T_WHITESPACE","\n    ",3267],["T_PUBLIC","public",3268],["T_WHITESPACE"," ",3268],["T_FUNCTION","function",3268],["T_WHITESPACE"," ",3268],["T_STRING","getDateFormatSql",3268],"(",["T_VARIABLE","$date",3268],",",["T_WHITESPACE"," ",3268],["T_VARIABLE","$format",3268],")",["T_WHITESPACE","\n    ",3268],"{",["T_WHITESPACE","\n        ",3269],["T_VARIABLE","$expr",3270],["T_WHITESPACE"," ",3270],"=",["T_WHITESPACE"," ",3270],["T_STRING","sprintf",3270],"(",["T_CONSTANT_ENCAPSED_STRING","\"DATE_FORMAT(%s, '%s')\"",3270],",",["T_WHITESPACE"," ",3270],["T_VARIABLE","$date",3270],",",["T_WHITESPACE"," ",3270],["T_VARIABLE","$format",3270],")",";",["T_WHITESPACE","\n        ",3270],["T_RETURN","return",3271],["T_WHITESPACE"," ",3271],["T_NEW","new",3271],["T_WHITESPACE"," ",3271],["T_STRING","Zend_Db_Expr",3271],"(",["T_VARIABLE","$expr",3271],")",";",["T_WHITESPACE","\n    ",3271],"}",["T_WHITESPACE","\n\n    ",3272],["T_DOC_COMMENT","\/**\n     * Extract the date part of a date or datetime expression\n     *\n     * @param Zend_Db_Expr|string $date   quoted field name or SQL statement\n     * @return Zend_Db_Expr\n     *\/",3274],["T_WHITESPACE","\n    ",3279],["T_PUBLIC","public",3280],["T_WHITESPACE"," ",3280],["T_FUNCTION","function",3280],["T_WHITESPACE"," ",3280],["T_STRING","getDatePartSql",3280],"(",["T_VARIABLE","$date",3280],")",["T_WHITESPACE","\n    ",3280],"{",["T_WHITESPACE","\n        ",3281],["T_RETURN","return",3282],["T_WHITESPACE"," ",3282],["T_NEW","new",3282],["T_WHITESPACE"," ",3282],["T_STRING","Zend_Db_Expr",3282],"(",["T_STRING","sprintf",3282],"(",["T_CONSTANT_ENCAPSED_STRING","'DATE(%s)'",3282],",",["T_WHITESPACE"," ",3282],["T_VARIABLE","$date",3282],")",")",";",["T_WHITESPACE","\n    ",3282],"}",["T_WHITESPACE","\n\n    ",3283],["T_DOC_COMMENT","\/**\n     * Prepare substring sql function\n     *\n     * @param Zend_Db_Expr|string $stringExpression quoted field name or SQL statement\n     * @param int|string|Zend_Db_Expr $pos\n     * @param int|string|Zend_Db_Expr|null $len\n     * @return Zend_Db_Expr\n     *\/",3285],["T_WHITESPACE","\n    ",3292],["T_PUBLIC","public",3293],["T_WHITESPACE"," ",3293],["T_FUNCTION","function",3293],["T_WHITESPACE"," ",3293],["T_STRING","getSubstringSql",3293],"(",["T_VARIABLE","$stringExpression",3293],",",["T_WHITESPACE"," ",3293],["T_VARIABLE","$pos",3293],",",["T_WHITESPACE"," ",3293],["T_VARIABLE","$len",3293],["T_WHITESPACE"," ",3293],"=",["T_WHITESPACE"," ",3293],["T_STRING","null",3293],")",["T_WHITESPACE","\n    ",3293],"{",["T_WHITESPACE","\n        ",3294],["T_IF","if",3295],["T_WHITESPACE"," ",3295],"(",["T_STRING","is_null",3295],"(",["T_VARIABLE","$len",3295],")",")",["T_WHITESPACE"," ",3295],"{",["T_WHITESPACE","\n            ",3295],["T_RETURN","return",3296],["T_WHITESPACE"," ",3296],["T_NEW","new",3296],["T_WHITESPACE"," ",3296],["T_STRING","Zend_Db_Expr",3296],"(",["T_STRING","sprintf",3296],"(",["T_CONSTANT_ENCAPSED_STRING","'SUBSTRING(%s, %s)'",3296],",",["T_WHITESPACE"," ",3296],["T_VARIABLE","$stringExpression",3296],",",["T_WHITESPACE"," ",3296],["T_VARIABLE","$pos",3296],")",")",";",["T_WHITESPACE","\n        ",3296],"}",["T_WHITESPACE","\n        ",3297],["T_RETURN","return",3298],["T_WHITESPACE"," ",3298],["T_NEW","new",3298],["T_WHITESPACE"," ",3298],["T_STRING","Zend_Db_Expr",3298],"(",["T_STRING","sprintf",3298],"(",["T_CONSTANT_ENCAPSED_STRING","'SUBSTRING(%s, %s, %s)'",3298],",",["T_WHITESPACE"," ",3298],["T_VARIABLE","$stringExpression",3298],",",["T_WHITESPACE"," ",3298],["T_VARIABLE","$pos",3298],",",["T_WHITESPACE"," ",3298],["T_VARIABLE","$len",3298],")",")",";",["T_WHITESPACE","\n    ",3298],"}",["T_WHITESPACE","\n\n    ",3299],["T_DOC_COMMENT","\/**\n     * Prepare standard deviation sql function\n     *\n     * @param Zend_Db_Expr|string $expressionField   quoted field name or SQL statement\n     * @return Zend_Db_Expr\n     *\/",3301],["T_WHITESPACE","\n    ",3306],["T_PUBLIC","public",3307],["T_WHITESPACE"," ",3307],["T_FUNCTION","function",3307],["T_WHITESPACE"," ",3307],["T_STRING","getStandardDeviationSql",3307],"(",["T_VARIABLE","$expressionField",3307],")",["T_WHITESPACE","\n    ",3307],"{",["T_WHITESPACE","\n        ",3308],["T_RETURN","return",3309],["T_WHITESPACE"," ",3309],["T_NEW","new",3309],["T_WHITESPACE"," ",3309],["T_STRING","Zend_Db_Expr",3309],"(",["T_STRING","sprintf",3309],"(",["T_CONSTANT_ENCAPSED_STRING","'STDDEV_SAMP(%s)'",3309],",",["T_WHITESPACE"," ",3309],["T_VARIABLE","$expressionField",3309],")",")",";",["T_WHITESPACE","\n    ",3309],"}",["T_WHITESPACE","\n\n    ",3310],["T_DOC_COMMENT","\/**\n     * Extract part of a date\n     *\n     * @see INTERVAL_* constants for $unit\n     *\n     * @param Zend_Db_Expr|string $date   quoted field name or SQL statement\n     * @param string $unit\n     * @return Zend_Db_Expr\n     * @throws Zend_Db_Exception\n     *\/",3312],["T_WHITESPACE","\n    ",3321],["T_PUBLIC","public",3322],["T_WHITESPACE"," ",3322],["T_FUNCTION","function",3322],["T_WHITESPACE"," ",3322],["T_STRING","getDateExtractSql",3322],"(",["T_VARIABLE","$date",3322],",",["T_WHITESPACE"," ",3322],["T_VARIABLE","$unit",3322],")",["T_WHITESPACE","\n    ",3322],"{",["T_WHITESPACE","\n        ",3323],["T_IF","if",3324],["T_WHITESPACE"," ",3324],"(","!",["T_ISSET","isset",3324],"(",["T_VARIABLE","$this",3324],["T_OBJECT_OPERATOR","->",3324],["T_STRING","_intervalUnits",3324],"[",["T_VARIABLE","$unit",3324],"]",")",")",["T_WHITESPACE"," ",3324],"{",["T_WHITESPACE","\n            ",3324],["T_THROW","throw",3325],["T_WHITESPACE"," ",3325],["T_NEW","new",3325],["T_WHITESPACE"," ",3325],["T_STRING","Zend_Db_Exception",3325],"(",["T_STRING","sprintf",3325],"(",["T_CONSTANT_ENCAPSED_STRING","'Undefined interval unit \"%s\" specified'",3325],",",["T_WHITESPACE"," ",3325],["T_VARIABLE","$unit",3325],")",")",";",["T_WHITESPACE","\n        ",3325],"}",["T_WHITESPACE","\n\n        ",3326],["T_VARIABLE","$expr",3328],["T_WHITESPACE"," ",3328],"=",["T_WHITESPACE"," ",3328],["T_STRING","sprintf",3328],"(",["T_CONSTANT_ENCAPSED_STRING","'EXTRACT(%s FROM %s)'",3328],",",["T_WHITESPACE"," ",3328],["T_VARIABLE","$this",3328],["T_OBJECT_OPERATOR","->",3328],["T_STRING","_intervalUnits",3328],"[",["T_VARIABLE","$unit",3328],"]",",",["T_WHITESPACE"," ",3328],["T_VARIABLE","$date",3328],")",";",["T_WHITESPACE","\n        ",3328],["T_RETURN","return",3329],["T_WHITESPACE"," ",3329],["T_NEW","new",3329],["T_WHITESPACE"," ",3329],["T_STRING","Zend_Db_Expr",3329],"(",["T_VARIABLE","$expr",3329],")",";",["T_WHITESPACE","\n    ",3329],"}",["T_WHITESPACE","\n\n    ",3330],["T_DOC_COMMENT","\/**\n     * Minus superfluous characters from hash.\n     *\n     * @param  $hash\n     * @param  $prefix\n     * @param  $maxCharacters\n     * @return string\n     *\/",3332],["T_WHITESPACE","\n     ",3339],["T_PROTECTED","protected",3340],["T_WHITESPACE"," ",3340],["T_FUNCTION","function",3340],["T_WHITESPACE"," ",3340],["T_STRING","_minusSuperfluous",3340],"(",["T_VARIABLE","$hash",3340],",",["T_WHITESPACE"," ",3340],["T_VARIABLE","$prefix",3340],",",["T_WHITESPACE"," ",3340],["T_VARIABLE","$maxCharacters",3340],")",["T_WHITESPACE","\n     ",3340],"{",["T_WHITESPACE","\n         ",3341],["T_VARIABLE","$diff",3342],["T_WHITESPACE","        ",3342],"=",["T_WHITESPACE"," ",3342],["T_STRING","strlen",3342],"(",["T_VARIABLE","$hash",3342],")",["T_WHITESPACE"," ",3342],"+",["T_WHITESPACE"," ",3342],["T_STRING","strlen",3342],"(",["T_VARIABLE","$prefix",3342],")",["T_WHITESPACE"," ",3342],"-",["T_WHITESPACE","  ",3342],["T_VARIABLE","$maxCharacters",3342],";",["T_WHITESPACE","\n         ",3342],["T_VARIABLE","$superfluous",3343],["T_WHITESPACE"," ",3343],"=",["T_WHITESPACE"," ",3343],["T_VARIABLE","$diff",3343],["T_WHITESPACE"," ",3343],"\/",["T_WHITESPACE"," ",3343],["T_LNUMBER","2",3343],";",["T_WHITESPACE","\n         ",3343],["T_VARIABLE","$odd",3344],["T_WHITESPACE","         ",3344],"=",["T_WHITESPACE"," ",3344],["T_VARIABLE","$diff",3344],["T_WHITESPACE"," ",3344],"%",["T_WHITESPACE"," ",3344],["T_LNUMBER","2",3344],";",["T_WHITESPACE","\n         ",3344],["T_VARIABLE","$hash",3345],["T_WHITESPACE","        ",3345],"=",["T_WHITESPACE"," ",3345],["T_STRING","substr",3345],"(",["T_VARIABLE","$hash",3345],",",["T_WHITESPACE"," ",3345],["T_VARIABLE","$superfluous",3345],",",["T_WHITESPACE"," ",3345],"-",["T_WHITESPACE"," ",3345],"(",["T_VARIABLE","$superfluous",3345],["T_WHITESPACE"," ",3345],"+",["T_WHITESPACE"," ",3345],["T_VARIABLE","$odd",3345],")",")",";",["T_WHITESPACE","\n         ",3345],["T_RETURN","return",3346],["T_WHITESPACE"," ",3346],["T_VARIABLE","$hash",3346],";",["T_WHITESPACE","\n     ",3346],"}",["T_WHITESPACE","\n\n    ",3347],["T_DOC_COMMENT","\/**\n     * Retrieve valid table name\n     * Check table name length and allowed symbols\n     *\n     * @param string $tableName\n     * @return string\n     *\/",3349],["T_WHITESPACE","\n    ",3355],["T_PUBLIC","public",3356],["T_WHITESPACE"," ",3356],["T_FUNCTION","function",3356],["T_WHITESPACE"," ",3356],["T_STRING","getTableName",3356],"(",["T_VARIABLE","$tableName",3356],")",["T_WHITESPACE","\n    ",3356],"{",["T_WHITESPACE","\n        ",3357],["T_VARIABLE","$prefix",3358],["T_WHITESPACE"," ",3358],"=",["T_WHITESPACE"," ",3358],["T_CONSTANT_ENCAPSED_STRING","'t_'",3358],";",["T_WHITESPACE","\n        ",3358],["T_IF","if",3359],["T_WHITESPACE"," ",3359],"(",["T_STRING","strlen",3359],"(",["T_VARIABLE","$tableName",3359],")",["T_WHITESPACE"," ",3359],">",["T_WHITESPACE"," ",3359],["T_STRING","self",3359],["T_DOUBLE_COLON","::",3359],["T_STRING","LENGTH_TABLE_NAME",3359],")",["T_WHITESPACE"," ",3359],"{",["T_WHITESPACE","\n            ",3359],["T_VARIABLE","$shortName",3360],["T_WHITESPACE"," ",3360],"=",["T_WHITESPACE"," ",3360],["T_STRING","Varien_Db_Helper",3360],["T_DOUBLE_COLON","::",3360],["T_STRING","shortName",3360],"(",["T_VARIABLE","$tableName",3360],")",";",["T_WHITESPACE","\n            ",3360],["T_IF","if",3361],["T_WHITESPACE"," ",3361],"(",["T_STRING","strlen",3361],"(",["T_VARIABLE","$shortName",3361],")",["T_WHITESPACE"," ",3361],">",["T_WHITESPACE"," ",3361],["T_STRING","self",3361],["T_DOUBLE_COLON","::",3361],["T_STRING","LENGTH_TABLE_NAME",3361],")",["T_WHITESPACE"," ",3361],"{",["T_WHITESPACE","\n                ",3361],["T_VARIABLE","$hash",3362],["T_WHITESPACE"," ",3362],"=",["T_WHITESPACE"," ",3362],["T_STRING","md5",3362],"(",["T_VARIABLE","$tableName",3362],")",";",["T_WHITESPACE","\n                ",3362],["T_IF","if",3363],["T_WHITESPACE"," ",3363],"(",["T_STRING","strlen",3363],"(",["T_VARIABLE","$prefix",3363],".",["T_VARIABLE","$hash",3363],")",["T_WHITESPACE"," ",3363],">",["T_WHITESPACE"," ",3363],["T_STRING","self",3363],["T_DOUBLE_COLON","::",3363],["T_STRING","LENGTH_TABLE_NAME",3363],")",["T_WHITESPACE"," ",3363],"{",["T_WHITESPACE","\n                    ",3363],["T_VARIABLE","$tableName",3364],["T_WHITESPACE"," ",3364],"=",["T_WHITESPACE"," ",3364],["T_VARIABLE","$this",3364],["T_OBJECT_OPERATOR","->",3364],["T_STRING","_minusSuperfluous",3364],"(",["T_VARIABLE","$hash",3364],",",["T_WHITESPACE"," ",3364],["T_VARIABLE","$prefix",3364],",",["T_WHITESPACE"," ",3364],["T_STRING","self",3364],["T_DOUBLE_COLON","::",3364],["T_STRING","LENGTH_TABLE_NAME",3364],")",";",["T_WHITESPACE","\n                ",3364],"}",["T_WHITESPACE"," ",3365],["T_ELSE","else",3365],["T_WHITESPACE"," ",3365],"{",["T_WHITESPACE","\n                    ",3365],["T_VARIABLE","$tableName",3366],["T_WHITESPACE"," ",3366],"=",["T_WHITESPACE"," ",3366],["T_VARIABLE","$prefix",3366],["T_WHITESPACE"," ",3366],".",["T_WHITESPACE"," ",3366],["T_VARIABLE","$hash",3366],";",["T_WHITESPACE","\n                ",3366],"}",["T_WHITESPACE","\n            ",3367],"}",["T_WHITESPACE"," ",3368],["T_ELSE","else",3368],["T_WHITESPACE"," ",3368],"{",["T_WHITESPACE","\n                ",3368],["T_VARIABLE","$tableName",3369],["T_WHITESPACE"," ",3369],"=",["T_WHITESPACE"," ",3369],["T_VARIABLE","$shortName",3369],";",["T_WHITESPACE","\n            ",3369],"}",["T_WHITESPACE","\n        ",3370],"}",["T_WHITESPACE","\n\n        ",3371],["T_RETURN","return",3373],["T_WHITESPACE"," ",3373],["T_VARIABLE","$tableName",3373],";",["T_WHITESPACE","\n    ",3373],"}",["T_WHITESPACE","\n\n    ",3374],["T_DOC_COMMENT","\/**\n     * Retrieve valid index name\n     * Check index name length and allowed symbols\n     *\n     * @param string $tableName\n     * @param string|array $fields  the columns list\n     * @param string $indexType\n     * @return string\n     *\/",3376],["T_WHITESPACE","\n    ",3384],["T_PUBLIC","public",3385],["T_WHITESPACE"," ",3385],["T_FUNCTION","function",3385],["T_WHITESPACE"," ",3385],["T_STRING","getIndexName",3385],"(",["T_VARIABLE","$tableName",3385],",",["T_WHITESPACE"," ",3385],["T_VARIABLE","$fields",3385],",",["T_WHITESPACE"," ",3385],["T_VARIABLE","$indexType",3385],["T_WHITESPACE"," ",3385],"=",["T_WHITESPACE"," ",3385],["T_CONSTANT_ENCAPSED_STRING","''",3385],")",["T_WHITESPACE","\n    ",3385],"{",["T_WHITESPACE","\n        ",3386],["T_IF","if",3387],["T_WHITESPACE"," ",3387],"(",["T_STRING","is_array",3387],"(",["T_VARIABLE","$fields",3387],")",")",["T_WHITESPACE"," ",3387],"{",["T_WHITESPACE","\n            ",3387],["T_VARIABLE","$fields",3388],["T_WHITESPACE"," ",3388],"=",["T_WHITESPACE"," ",3388],["T_STRING","implode",3388],"(",["T_CONSTANT_ENCAPSED_STRING","'_'",3388],",",["T_WHITESPACE"," ",3388],["T_VARIABLE","$fields",3388],")",";",["T_WHITESPACE","\n        ",3388],"}",["T_WHITESPACE","\n\n        ",3389],["T_SWITCH","switch",3391],["T_WHITESPACE"," ",3391],"(",["T_STRING","strtolower",3391],"(",["T_VARIABLE","$indexType",3391],")",")",["T_WHITESPACE"," ",3391],"{",["T_WHITESPACE","\n            ",3391],["T_CASE","case",3392],["T_WHITESPACE"," ",3392],["T_STRING","Varien_Db_Adapter_Interface",3392],["T_DOUBLE_COLON","::",3392],["T_STRING","INDEX_TYPE_UNIQUE",3392],":",["T_WHITESPACE","\n                ",3392],["T_VARIABLE","$prefix",3393],["T_WHITESPACE"," ",3393],"=",["T_WHITESPACE"," ",3393],["T_CONSTANT_ENCAPSED_STRING","'unq_'",3393],";",["T_WHITESPACE","\n                ",3393],["T_VARIABLE","$shortPrefix",3394],["T_WHITESPACE"," ",3394],"=",["T_WHITESPACE"," ",3394],["T_CONSTANT_ENCAPSED_STRING","'u_'",3394],";",["T_WHITESPACE","\n                ",3394],["T_BREAK","break",3395],";",["T_WHITESPACE","\n            ",3395],["T_CASE","case",3396],["T_WHITESPACE"," ",3396],["T_STRING","Varien_Db_Adapter_Interface",3396],["T_DOUBLE_COLON","::",3396],["T_STRING","INDEX_TYPE_FULLTEXT",3396],":",["T_WHITESPACE","\n                ",3396],["T_VARIABLE","$prefix",3397],["T_WHITESPACE"," ",3397],"=",["T_WHITESPACE"," ",3397],["T_CONSTANT_ENCAPSED_STRING","'fti_'",3397],";",["T_WHITESPACE","\n                ",3397],["T_VARIABLE","$shortPrefix",3398],["T_WHITESPACE"," ",3398],"=",["T_WHITESPACE"," ",3398],["T_CONSTANT_ENCAPSED_STRING","'f_'",3398],";",["T_WHITESPACE","\n                ",3398],["T_BREAK","break",3399],";",["T_WHITESPACE","\n            ",3399],["T_CASE","case",3400],["T_WHITESPACE"," ",3400],["T_STRING","Varien_Db_Adapter_Interface",3400],["T_DOUBLE_COLON","::",3400],["T_STRING","INDEX_TYPE_INDEX",3400],":",["T_WHITESPACE","\n            ",3400],["T_DEFAULT","default",3401],":",["T_WHITESPACE","\n                ",3401],["T_VARIABLE","$prefix",3402],["T_WHITESPACE"," ",3402],"=",["T_WHITESPACE"," ",3402],["T_CONSTANT_ENCAPSED_STRING","'idx_'",3402],";",["T_WHITESPACE","\n                ",3402],["T_VARIABLE","$shortPrefix",3403],["T_WHITESPACE"," ",3403],"=",["T_WHITESPACE"," ",3403],["T_CONSTANT_ENCAPSED_STRING","'i_'",3403],";",["T_WHITESPACE","\n        ",3403],"}",["T_WHITESPACE","\n\n        ",3404],["T_VARIABLE","$hash",3406],["T_WHITESPACE"," ",3406],"=",["T_WHITESPACE"," ",3406],["T_VARIABLE","$tableName",3406],["T_WHITESPACE"," ",3406],".",["T_WHITESPACE"," ",3406],["T_CONSTANT_ENCAPSED_STRING","'_'",3406],["T_WHITESPACE"," ",3406],".",["T_WHITESPACE"," ",3406],["T_VARIABLE","$fields",3406],";",["T_WHITESPACE","\n\n        ",3406],["T_IF","if",3408],["T_WHITESPACE"," ",3408],"(",["T_STRING","strlen",3408],"(",["T_VARIABLE","$hash",3408],")",["T_WHITESPACE"," ",3408],"+",["T_WHITESPACE"," ",3408],["T_STRING","strlen",3408],"(",["T_VARIABLE","$prefix",3408],")",["T_WHITESPACE"," ",3408],">",["T_WHITESPACE"," ",3408],["T_STRING","self",3408],["T_DOUBLE_COLON","::",3408],["T_STRING","LENGTH_INDEX_NAME",3408],")",["T_WHITESPACE"," ",3408],"{",["T_WHITESPACE","\n            ",3408],["T_VARIABLE","$short",3409],["T_WHITESPACE"," ",3409],"=",["T_WHITESPACE"," ",3409],["T_STRING","Varien_Db_Helper",3409],["T_DOUBLE_COLON","::",3409],["T_STRING","shortName",3409],"(",["T_VARIABLE","$prefix",3409],["T_WHITESPACE"," ",3409],".",["T_WHITESPACE"," ",3409],["T_VARIABLE","$hash",3409],")",";",["T_WHITESPACE","\n            ",3409],["T_IF","if",3410],["T_WHITESPACE"," ",3410],"(",["T_STRING","strlen",3410],"(",["T_VARIABLE","$short",3410],")",["T_WHITESPACE"," ",3410],">",["T_WHITESPACE"," ",3410],["T_STRING","self",3410],["T_DOUBLE_COLON","::",3410],["T_STRING","LENGTH_INDEX_NAME",3410],")",["T_WHITESPACE"," ",3410],"{",["T_WHITESPACE","\n                ",3410],["T_VARIABLE","$hash",3411],["T_WHITESPACE"," ",3411],"=",["T_WHITESPACE"," ",3411],["T_STRING","md5",3411],"(",["T_VARIABLE","$hash",3411],")",";",["T_WHITESPACE","\n                ",3411],["T_IF","if",3412],["T_WHITESPACE"," ",3412],"(",["T_STRING","strlen",3412],"(",["T_VARIABLE","$hash",3412],")",["T_WHITESPACE"," ",3412],"+",["T_WHITESPACE"," ",3412],["T_STRING","strlen",3412],"(",["T_VARIABLE","$shortPrefix",3412],")",["T_WHITESPACE"," ",3412],">",["T_WHITESPACE"," ",3412],["T_STRING","self",3412],["T_DOUBLE_COLON","::",3412],["T_STRING","LENGTH_INDEX_NAME",3412],")",["T_WHITESPACE"," ",3412],"{",["T_WHITESPACE","\n                    ",3412],["T_VARIABLE","$hash",3413],["T_WHITESPACE"," ",3413],"=",["T_WHITESPACE"," ",3413],["T_VARIABLE","$this",3413],["T_OBJECT_OPERATOR","->",3413],["T_STRING","_minusSuperfluous",3413],"(",["T_VARIABLE","$hash",3413],",",["T_WHITESPACE"," ",3413],["T_VARIABLE","$shortPrefix",3413],",",["T_WHITESPACE"," ",3413],["T_STRING","self",3413],["T_DOUBLE_COLON","::",3413],["T_STRING","LENGTH_INDEX_NAME",3413],")",";",["T_WHITESPACE","\n                ",3413],"}",["T_WHITESPACE","\n            ",3414],"}",["T_WHITESPACE"," ",3415],["T_ELSE","else",3415],["T_WHITESPACE"," ",3415],"{",["T_WHITESPACE","\n                ",3415],["T_VARIABLE","$hash",3416],["T_WHITESPACE"," ",3416],"=",["T_WHITESPACE"," ",3416],["T_VARIABLE","$short",3416],";",["T_WHITESPACE","\n            ",3416],"}",["T_WHITESPACE","\n        ",3417],"}",["T_WHITESPACE"," ",3418],["T_ELSE","else",3418],["T_WHITESPACE"," ",3418],"{",["T_WHITESPACE","\n            ",3418],["T_VARIABLE","$hash",3419],["T_WHITESPACE"," ",3419],"=",["T_WHITESPACE"," ",3419],["T_VARIABLE","$prefix",3419],["T_WHITESPACE"," ",3419],".",["T_WHITESPACE"," ",3419],["T_VARIABLE","$hash",3419],";",["T_WHITESPACE","\n        ",3419],"}",["T_WHITESPACE","\n\n        ",3420],["T_RETURN","return",3422],["T_WHITESPACE"," ",3422],["T_STRING","strtoupper",3422],"(",["T_VARIABLE","$hash",3422],")",";",["T_WHITESPACE","\n    ",3422],"}",["T_WHITESPACE","\n\n    ",3423],["T_DOC_COMMENT","\/**\n     * Retrieve valid foreign key name\n     * Check foreign key name length and allowed symbols\n     *\n     * @param string $priTableName\n     * @param string $priColumnName\n     * @param string $refTableName\n     * @param string $refColumnName\n     * @return string\n     *\/",3425],["T_WHITESPACE","\n    ",3434],["T_PUBLIC","public",3435],["T_WHITESPACE"," ",3435],["T_FUNCTION","function",3435],["T_WHITESPACE"," ",3435],["T_STRING","getForeignKeyName",3435],"(",["T_VARIABLE","$priTableName",3435],",",["T_WHITESPACE"," ",3435],["T_VARIABLE","$priColumnName",3435],",",["T_WHITESPACE"," ",3435],["T_VARIABLE","$refTableName",3435],",",["T_WHITESPACE"," ",3435],["T_VARIABLE","$refColumnName",3435],")",["T_WHITESPACE","\n    ",3435],"{",["T_WHITESPACE","\n        ",3436],["T_VARIABLE","$prefix",3437],["T_WHITESPACE"," ",3437],"=",["T_WHITESPACE"," ",3437],["T_CONSTANT_ENCAPSED_STRING","'fk_'",3437],";",["T_WHITESPACE","\n        ",3437],["T_VARIABLE","$hash",3438],["T_WHITESPACE"," ",3438],"=",["T_WHITESPACE"," ",3438],["T_STRING","sprintf",3438],"(",["T_CONSTANT_ENCAPSED_STRING","'%s_%s_%s_%s'",3438],",",["T_WHITESPACE"," ",3438],["T_VARIABLE","$priTableName",3438],",",["T_WHITESPACE"," ",3438],["T_VARIABLE","$priColumnName",3438],",",["T_WHITESPACE"," ",3438],["T_VARIABLE","$refTableName",3438],",",["T_WHITESPACE"," ",3438],["T_VARIABLE","$refColumnName",3438],")",";",["T_WHITESPACE","\n        ",3438],["T_IF","if",3439],["T_WHITESPACE"," ",3439],"(",["T_STRING","strlen",3439],"(",["T_VARIABLE","$prefix",3439],".",["T_VARIABLE","$hash",3439],")",["T_WHITESPACE"," ",3439],">",["T_WHITESPACE"," ",3439],["T_STRING","self",3439],["T_DOUBLE_COLON","::",3439],["T_STRING","LENGTH_FOREIGN_NAME",3439],")",["T_WHITESPACE"," ",3439],"{",["T_WHITESPACE","\n            ",3439],["T_VARIABLE","$short",3440],["T_WHITESPACE"," ",3440],"=",["T_WHITESPACE"," ",3440],["T_STRING","Varien_Db_Helper",3440],["T_DOUBLE_COLON","::",3440],["T_STRING","shortName",3440],"(",["T_VARIABLE","$prefix",3440],".",["T_VARIABLE","$hash",3440],")",";",["T_WHITESPACE","\n            ",3440],["T_IF","if",3441],["T_WHITESPACE"," ",3441],"(",["T_STRING","strlen",3441],"(",["T_VARIABLE","$short",3441],")",["T_WHITESPACE"," ",3441],">",["T_WHITESPACE"," ",3441],["T_STRING","self",3441],["T_DOUBLE_COLON","::",3441],["T_STRING","LENGTH_FOREIGN_NAME",3441],")",["T_WHITESPACE"," ",3441],"{",["T_WHITESPACE","\n                ",3441],["T_VARIABLE","$hash",3442],["T_WHITESPACE"," ",3442],"=",["T_WHITESPACE"," ",3442],["T_STRING","md5",3442],"(",["T_VARIABLE","$hash",3442],")",";",["T_WHITESPACE","\n                ",3442],["T_IF","if",3443],["T_WHITESPACE"," ",3443],"(",["T_STRING","strlen",3443],"(",["T_VARIABLE","$prefix",3443],".",["T_VARIABLE","$hash",3443],")",["T_WHITESPACE"," ",3443],">",["T_WHITESPACE"," ",3443],["T_STRING","self",3443],["T_DOUBLE_COLON","::",3443],["T_STRING","LENGTH_FOREIGN_NAME",3443],")",["T_WHITESPACE"," ",3443],"{",["T_WHITESPACE","\n                    ",3443],["T_VARIABLE","$hash",3444],["T_WHITESPACE"," ",3444],"=",["T_WHITESPACE"," ",3444],["T_VARIABLE","$this",3444],["T_OBJECT_OPERATOR","->",3444],["T_STRING","_minusSuperfluous",3444],"(",["T_VARIABLE","$hash",3444],",",["T_WHITESPACE"," ",3444],["T_VARIABLE","$prefix",3444],",",["T_WHITESPACE"," ",3444],["T_STRING","self",3444],["T_DOUBLE_COLON","::",3444],["T_STRING","LENGTH_FOREIGN_NAME",3444],")",";",["T_WHITESPACE","\n                ",3444],"}",["T_WHITESPACE"," ",3445],["T_ELSE","else",3445],["T_WHITESPACE"," ",3445],"{",["T_WHITESPACE","\n                    ",3445],["T_VARIABLE","$hash",3446],["T_WHITESPACE"," ",3446],"=",["T_WHITESPACE"," ",3446],["T_VARIABLE","$prefix",3446],["T_WHITESPACE"," ",3446],".",["T_WHITESPACE"," ",3446],["T_VARIABLE","$hash",3446],";",["T_WHITESPACE","\n                ",3446],"}",["T_WHITESPACE","\n            ",3447],"}",["T_WHITESPACE"," ",3448],["T_ELSE","else",3448],["T_WHITESPACE"," ",3448],"{",["T_WHITESPACE","\n                ",3448],["T_VARIABLE","$hash",3449],["T_WHITESPACE"," ",3449],"=",["T_WHITESPACE"," ",3449],["T_VARIABLE","$short",3449],";",["T_WHITESPACE","\n            ",3449],"}",["T_WHITESPACE","\n        ",3450],"}",["T_WHITESPACE"," ",3451],["T_ELSE","else",3451],["T_WHITESPACE"," ",3451],"{",["T_WHITESPACE","\n            ",3451],["T_VARIABLE","$hash",3452],["T_WHITESPACE"," ",3452],"=",["T_WHITESPACE"," ",3452],["T_VARIABLE","$prefix",3452],["T_WHITESPACE"," ",3452],".",["T_WHITESPACE"," ",3452],["T_VARIABLE","$hash",3452],";",["T_WHITESPACE","\n        ",3452],"}",["T_WHITESPACE","\n\n        ",3453],["T_RETURN","return",3455],["T_WHITESPACE"," ",3455],["T_STRING","strtoupper",3455],"(",["T_VARIABLE","$hash",3455],")",";",["T_WHITESPACE","\n    ",3455],"}",["T_WHITESPACE","\n\n    ",3456],["T_DOC_COMMENT","\/**\n     * Stop updating indexes\n     *\n     * @param string $tableName\n     * @param string $schemaName\n     * @return Varien_Db_Adapter_Pdo_Mysql\n     *\/",3458],["T_WHITESPACE","\n    ",3464],["T_PUBLIC","public",3465],["T_WHITESPACE"," ",3465],["T_FUNCTION","function",3465],["T_WHITESPACE"," ",3465],["T_STRING","disableTableKeys",3465],"(",["T_VARIABLE","$tableName",3465],",",["T_WHITESPACE"," ",3465],["T_VARIABLE","$schemaName",3465],["T_WHITESPACE"," ",3465],"=",["T_WHITESPACE"," ",3465],["T_STRING","null",3465],")",["T_WHITESPACE","\n    ",3465],"{",["T_WHITESPACE","\n        ",3466],["T_VARIABLE","$tableName",3467],["T_WHITESPACE"," ",3467],"=",["T_WHITESPACE"," ",3467],["T_VARIABLE","$this",3467],["T_OBJECT_OPERATOR","->",3467],["T_STRING","_getTableName",3467],"(",["T_VARIABLE","$tableName",3467],",",["T_WHITESPACE"," ",3467],["T_VARIABLE","$schemaName",3467],")",";",["T_WHITESPACE","\n        ",3467],["T_VARIABLE","$query",3468],["T_WHITESPACE","     ",3468],"=",["T_WHITESPACE"," ",3468],["T_STRING","sprintf",3468],"(",["T_CONSTANT_ENCAPSED_STRING","'ALTER TABLE %s DISABLE KEYS'",3468],",",["T_WHITESPACE"," ",3468],["T_VARIABLE","$this",3468],["T_OBJECT_OPERATOR","->",3468],["T_STRING","quoteIdentifier",3468],"(",["T_VARIABLE","$tableName",3468],")",")",";",["T_WHITESPACE","\n        ",3468],["T_VARIABLE","$this",3469],["T_OBJECT_OPERATOR","->",3469],["T_STRING","query",3469],"(",["T_VARIABLE","$query",3469],")",";",["T_WHITESPACE","\n\n        ",3469],["T_RETURN","return",3471],["T_WHITESPACE"," ",3471],["T_VARIABLE","$this",3471],";",["T_WHITESPACE","\n    ",3471],"}",["T_WHITESPACE","\n\n    ",3472],["T_DOC_COMMENT","\/**\n     * Re-create missing indexes\n     *\n     * @param string $tableName\n     * @param string $schemaName\n     * @return Varien_Db_Adapter_Pdo_Mysql\n     *\/",3474],["T_WHITESPACE","\n    ",3480],["T_PUBLIC","public",3481],["T_WHITESPACE"," ",3481],["T_FUNCTION","function",3481],["T_WHITESPACE"," ",3481],["T_STRING","enableTableKeys",3481],"(",["T_VARIABLE","$tableName",3481],",",["T_WHITESPACE"," ",3481],["T_VARIABLE","$schemaName",3481],["T_WHITESPACE"," ",3481],"=",["T_WHITESPACE"," ",3481],["T_STRING","null",3481],")",["T_WHITESPACE","\n    ",3481],"{",["T_WHITESPACE","\n        ",3482],["T_VARIABLE","$tableName",3483],["T_WHITESPACE"," ",3483],"=",["T_WHITESPACE"," ",3483],["T_VARIABLE","$this",3483],["T_OBJECT_OPERATOR","->",3483],["T_STRING","_getTableName",3483],"(",["T_VARIABLE","$tableName",3483],",",["T_WHITESPACE"," ",3483],["T_VARIABLE","$schemaName",3483],")",";",["T_WHITESPACE","\n        ",3483],["T_VARIABLE","$query",3484],["T_WHITESPACE","     ",3484],"=",["T_WHITESPACE"," ",3484],["T_STRING","sprintf",3484],"(",["T_CONSTANT_ENCAPSED_STRING","'ALTER TABLE %s ENABLE KEYS'",3484],",",["T_WHITESPACE"," ",3484],["T_VARIABLE","$this",3484],["T_OBJECT_OPERATOR","->",3484],["T_STRING","quoteIdentifier",3484],"(",["T_VARIABLE","$tableName",3484],")",")",";",["T_WHITESPACE","\n        ",3484],["T_VARIABLE","$this",3485],["T_OBJECT_OPERATOR","->",3485],["T_STRING","query",3485],"(",["T_VARIABLE","$query",3485],")",";",["T_WHITESPACE","\n\n        ",3485],["T_RETURN","return",3487],["T_WHITESPACE"," ",3487],["T_VARIABLE","$this",3487],";",["T_WHITESPACE","\n    ",3487],"}",["T_WHITESPACE","\n\n    ",3488],["T_DOC_COMMENT","\/**\n     * Get insert from Select object query\n     *\n     * @param Varien_Db_Select $select\n     * @param string $table     insert into table\n     * @param array $fields\n     * @param bool|int $mode\n     * @return string\n     *\/",3490],["T_WHITESPACE","\n    ",3498],["T_PUBLIC","public",3499],["T_WHITESPACE"," ",3499],["T_FUNCTION","function",3499],["T_WHITESPACE"," ",3499],["T_STRING","insertFromSelect",3499],"(",["T_STRING","Varien_Db_Select",3499],["T_WHITESPACE"," ",3499],["T_VARIABLE","$select",3499],",",["T_WHITESPACE"," ",3499],["T_VARIABLE","$table",3499],",",["T_WHITESPACE"," ",3499],["T_ARRAY","array",3499],["T_WHITESPACE"," ",3499],["T_VARIABLE","$fields",3499],["T_WHITESPACE"," ",3499],"=",["T_WHITESPACE"," ",3499],["T_ARRAY","array",3499],"(",")",",",["T_WHITESPACE"," ",3499],["T_VARIABLE","$mode",3499],["T_WHITESPACE"," ",3499],"=",["T_WHITESPACE"," ",3499],["T_STRING","false",3499],")",["T_WHITESPACE","\n    ",3499],"{",["T_WHITESPACE","\n        ",3500],["T_VARIABLE","$query",3501],["T_WHITESPACE"," ",3501],"=",["T_WHITESPACE"," ",3501],["T_CONSTANT_ENCAPSED_STRING","'INSERT'",3501],";",["T_WHITESPACE","\n        ",3501],["T_IF","if",3502],["T_WHITESPACE"," ",3502],"(",["T_VARIABLE","$mode",3502],["T_WHITESPACE"," ",3502],["T_IS_EQUAL","==",3502],["T_WHITESPACE"," ",3502],["T_STRING","self",3502],["T_DOUBLE_COLON","::",3502],["T_STRING","INSERT_IGNORE",3502],")",["T_WHITESPACE"," ",3502],"{",["T_WHITESPACE","\n            ",3502],["T_VARIABLE","$query",3503],["T_WHITESPACE"," ",3503],["T_CONCAT_EQUAL",".=",3503],["T_WHITESPACE"," ",3503],["T_CONSTANT_ENCAPSED_STRING","' IGNORE'",3503],";",["T_WHITESPACE","\n        ",3503],"}",["T_WHITESPACE","\n        ",3504],["T_VARIABLE","$query",3505],["T_WHITESPACE"," ",3505],"=",["T_WHITESPACE"," ",3505],["T_STRING","sprintf",3505],"(",["T_CONSTANT_ENCAPSED_STRING","'%s INTO %s'",3505],",",["T_WHITESPACE"," ",3505],["T_VARIABLE","$query",3505],",",["T_WHITESPACE"," ",3505],["T_VARIABLE","$this",3505],["T_OBJECT_OPERATOR","->",3505],["T_STRING","quoteIdentifier",3505],"(",["T_VARIABLE","$table",3505],")",")",";",["T_WHITESPACE","\n        ",3505],["T_IF","if",3506],["T_WHITESPACE"," ",3506],"(",["T_VARIABLE","$fields",3506],")",["T_WHITESPACE"," ",3506],"{",["T_WHITESPACE","\n            ",3506],["T_VARIABLE","$columns",3507],["T_WHITESPACE"," ",3507],"=",["T_WHITESPACE"," ",3507],["T_STRING","array_map",3507],"(",["T_ARRAY","array",3507],"(",["T_VARIABLE","$this",3507],",",["T_WHITESPACE"," ",3507],["T_CONSTANT_ENCAPSED_STRING","'quoteIdentifier'",3507],")",",",["T_WHITESPACE"," ",3507],["T_VARIABLE","$fields",3507],")",";",["T_WHITESPACE","\n            ",3507],["T_VARIABLE","$query",3508],["T_WHITESPACE"," ",3508],"=",["T_WHITESPACE"," ",3508],["T_STRING","sprintf",3508],"(",["T_CONSTANT_ENCAPSED_STRING","'%s (%s)'",3508],",",["T_WHITESPACE"," ",3508],["T_VARIABLE","$query",3508],",",["T_WHITESPACE"," ",3508],["T_STRING","join",3508],"(",["T_CONSTANT_ENCAPSED_STRING","', '",3508],",",["T_WHITESPACE"," ",3508],["T_VARIABLE","$columns",3508],")",")",";",["T_WHITESPACE","\n        ",3508],"}",["T_WHITESPACE","\n\n        ",3509],["T_VARIABLE","$query",3511],["T_WHITESPACE"," ",3511],"=",["T_WHITESPACE"," ",3511],["T_STRING","sprintf",3511],"(",["T_CONSTANT_ENCAPSED_STRING","'%s %s'",3511],",",["T_WHITESPACE"," ",3511],["T_VARIABLE","$query",3511],",",["T_WHITESPACE"," ",3511],["T_VARIABLE","$select",3511],["T_OBJECT_OPERATOR","->",3511],["T_STRING","assemble",3511],"(",")",")",";",["T_WHITESPACE","\n\n        ",3511],["T_IF","if",3513],["T_WHITESPACE"," ",3513],"(",["T_VARIABLE","$mode",3513],["T_WHITESPACE"," ",3513],["T_IS_EQUAL","==",3513],["T_WHITESPACE"," ",3513],["T_STRING","self",3513],["T_DOUBLE_COLON","::",3513],["T_STRING","INSERT_ON_DUPLICATE",3513],")",["T_WHITESPACE"," ",3513],"{",["T_WHITESPACE","\n            ",3513],["T_IF","if",3514],["T_WHITESPACE"," ",3514],"(","!",["T_VARIABLE","$fields",3514],")",["T_WHITESPACE"," ",3514],"{",["T_WHITESPACE","\n                ",3514],["T_VARIABLE","$describe",3515],["T_WHITESPACE"," ",3515],"=",["T_WHITESPACE"," ",3515],["T_VARIABLE","$this",3515],["T_OBJECT_OPERATOR","->",3515],["T_STRING","describeTable",3515],"(",["T_VARIABLE","$table",3515],")",";",["T_WHITESPACE","\n                ",3515],["T_FOREACH","foreach",3516],["T_WHITESPACE"," ",3516],"(",["T_VARIABLE","$describe",3516],["T_WHITESPACE"," ",3516],["T_AS","as",3516],["T_WHITESPACE"," ",3516],["T_VARIABLE","$column",3516],")",["T_WHITESPACE"," ",3516],"{",["T_WHITESPACE","\n                    ",3516],["T_IF","if",3517],["T_WHITESPACE"," ",3517],"(",["T_VARIABLE","$column",3517],"[",["T_CONSTANT_ENCAPSED_STRING","'PRIMARY'",3517],"]",["T_WHITESPACE"," ",3517],["T_IS_IDENTICAL","===",3517],["T_WHITESPACE"," ",3517],["T_STRING","false",3517],")",["T_WHITESPACE"," ",3517],"{",["T_WHITESPACE","\n                        ",3517],["T_VARIABLE","$fields",3518],"[","]",["T_WHITESPACE"," ",3518],"=",["T_WHITESPACE"," ",3518],["T_VARIABLE","$column",3518],"[",["T_CONSTANT_ENCAPSED_STRING","'COLUMN_NAME'",3518],"]",";",["T_WHITESPACE","\n                    ",3518],"}",["T_WHITESPACE","\n                ",3519],"}",["T_WHITESPACE","\n            ",3520],"}",["T_WHITESPACE","\n\n            ",3521],["T_VARIABLE","$update",3523],["T_WHITESPACE"," ",3523],"=",["T_WHITESPACE"," ",3523],["T_ARRAY","array",3523],"(",")",";",["T_WHITESPACE","\n            ",3523],["T_FOREACH","foreach",3524],["T_WHITESPACE"," ",3524],"(",["T_VARIABLE","$fields",3524],["T_WHITESPACE"," ",3524],["T_AS","as",3524],["T_WHITESPACE"," ",3524],["T_VARIABLE","$k",3524],["T_WHITESPACE"," ",3524],["T_DOUBLE_ARROW","=>",3524],["T_WHITESPACE"," ",3524],["T_VARIABLE","$v",3524],")",["T_WHITESPACE"," ",3524],"{",["T_WHITESPACE","\n                ",3524],["T_VARIABLE","$field",3525],["T_WHITESPACE"," ",3525],"=",["T_WHITESPACE"," ",3525],["T_VARIABLE","$value",3525],["T_WHITESPACE"," ",3525],"=",["T_WHITESPACE"," ",3525],["T_STRING","null",3525],";",["T_WHITESPACE","\n                ",3525],["T_IF","if",3526],["T_WHITESPACE"," ",3526],"(","!",["T_STRING","is_numeric",3526],"(",["T_VARIABLE","$k",3526],")",")",["T_WHITESPACE"," ",3526],"{",["T_WHITESPACE","\n                    ",3526],["T_VARIABLE","$field",3527],["T_WHITESPACE"," ",3527],"=",["T_WHITESPACE"," ",3527],["T_VARIABLE","$this",3527],["T_OBJECT_OPERATOR","->",3527],["T_STRING","quoteIdentifier",3527],"(",["T_VARIABLE","$k",3527],")",";",["T_WHITESPACE","\n                    ",3527],["T_IF","if",3528],["T_WHITESPACE"," ",3528],"(",["T_VARIABLE","$v",3528],["T_WHITESPACE"," ",3528],["T_INSTANCEOF","instanceof",3528],["T_WHITESPACE"," ",3528],["T_STRING","Zend_Db_Expr",3528],")",["T_WHITESPACE"," ",3528],"{",["T_WHITESPACE","\n                        ",3528],["T_VARIABLE","$value",3529],["T_WHITESPACE"," ",3529],"=",["T_WHITESPACE"," ",3529],["T_VARIABLE","$v",3529],["T_OBJECT_OPERATOR","->",3529],["T_STRING","__toString",3529],"(",")",";",["T_WHITESPACE","\n                    ",3529],"}",["T_WHITESPACE"," ",3530],["T_ELSEIF","elseif",3530],["T_WHITESPACE"," ",3530],"(",["T_STRING","is_string",3530],"(",["T_VARIABLE","$v",3530],")",")",["T_WHITESPACE"," ",3530],"{",["T_WHITESPACE","\n                        ",3530],["T_VARIABLE","$value",3531],["T_WHITESPACE"," ",3531],"=",["T_WHITESPACE"," ",3531],["T_STRING","sprintf",3531],"(",["T_CONSTANT_ENCAPSED_STRING","'VALUES(%s)'",3531],",",["T_WHITESPACE"," ",3531],["T_VARIABLE","$this",3531],["T_OBJECT_OPERATOR","->",3531],["T_STRING","quoteIdentifier",3531],"(",["T_VARIABLE","$v",3531],")",")",";",["T_WHITESPACE","\n                    ",3531],"}",["T_WHITESPACE"," ",3532],["T_ELSEIF","elseif",3532],["T_WHITESPACE"," ",3532],"(",["T_STRING","is_numeric",3532],"(",["T_VARIABLE","$v",3532],")",")",["T_WHITESPACE"," ",3532],"{",["T_WHITESPACE","\n                        ",3532],["T_VARIABLE","$value",3533],["T_WHITESPACE"," ",3533],"=",["T_WHITESPACE"," ",3533],["T_VARIABLE","$this",3533],["T_OBJECT_OPERATOR","->",3533],["T_STRING","quoteInto",3533],"(",["T_CONSTANT_ENCAPSED_STRING","'?'",3533],",",["T_WHITESPACE"," ",3533],["T_VARIABLE","$v",3533],")",";",["T_WHITESPACE","\n                    ",3533],"}",["T_WHITESPACE","\n                ",3534],"}",["T_WHITESPACE"," ",3535],["T_ELSEIF","elseif",3535],["T_WHITESPACE"," ",3535],"(",["T_STRING","is_string",3535],"(",["T_VARIABLE","$v",3535],")",")",["T_WHITESPACE"," ",3535],"{",["T_WHITESPACE","\n                    ",3535],["T_VARIABLE","$value",3536],["T_WHITESPACE"," ",3536],"=",["T_WHITESPACE"," ",3536],["T_STRING","sprintf",3536],"(",["T_CONSTANT_ENCAPSED_STRING","'VALUES(%s)'",3536],",",["T_WHITESPACE"," ",3536],["T_VARIABLE","$this",3536],["T_OBJECT_OPERATOR","->",3536],["T_STRING","quoteIdentifier",3536],"(",["T_VARIABLE","$v",3536],")",")",";",["T_WHITESPACE","\n                    ",3536],["T_VARIABLE","$field",3537],["T_WHITESPACE"," ",3537],"=",["T_WHITESPACE"," ",3537],["T_VARIABLE","$this",3537],["T_OBJECT_OPERATOR","->",3537],["T_STRING","quoteIdentifier",3537],"(",["T_VARIABLE","$v",3537],")",";",["T_WHITESPACE","\n                ",3537],"}",["T_WHITESPACE","\n\n                ",3538],["T_IF","if",3540],["T_WHITESPACE"," ",3540],"(",["T_VARIABLE","$field",3540],["T_WHITESPACE"," ",3540],["T_BOOLEAN_AND","&&",3540],["T_WHITESPACE"," ",3540],["T_VARIABLE","$value",3540],")",["T_WHITESPACE"," ",3540],"{",["T_WHITESPACE","\n                    ",3540],["T_VARIABLE","$update",3541],"[","]",["T_WHITESPACE"," ",3541],"=",["T_WHITESPACE"," ",3541],["T_STRING","sprintf",3541],"(",["T_CONSTANT_ENCAPSED_STRING","'%s = %s'",3541],",",["T_WHITESPACE"," ",3541],["T_VARIABLE","$field",3541],",",["T_WHITESPACE"," ",3541],["T_VARIABLE","$value",3541],")",";",["T_WHITESPACE","\n                ",3541],"}",["T_WHITESPACE","\n            ",3542],"}",["T_WHITESPACE","\n            ",3543],["T_IF","if",3544],["T_WHITESPACE"," ",3544],"(",["T_VARIABLE","$update",3544],")",["T_WHITESPACE"," ",3544],"{",["T_WHITESPACE","\n                ",3544],["T_VARIABLE","$query",3545],["T_WHITESPACE"," ",3545],"=",["T_WHITESPACE"," ",3545],["T_STRING","sprintf",3545],"(",["T_CONSTANT_ENCAPSED_STRING","'%s ON DUPLICATE KEY UPDATE %s'",3545],",",["T_WHITESPACE"," ",3545],["T_VARIABLE","$query",3545],",",["T_WHITESPACE"," ",3545],["T_STRING","join",3545],"(",["T_CONSTANT_ENCAPSED_STRING","', '",3545],",",["T_WHITESPACE"," ",3545],["T_VARIABLE","$update",3545],")",")",";",["T_WHITESPACE","\n            ",3545],"}",["T_WHITESPACE","\n        ",3546],"}",["T_WHITESPACE","\n\n        ",3547],["T_RETURN","return",3549],["T_WHITESPACE"," ",3549],["T_VARIABLE","$query",3549],";",["T_WHITESPACE","\n    ",3549],"}",["T_WHITESPACE","\n\n    ",3550],["T_DOC_COMMENT","\/**\n     * Get insert queries in array for insert by range with step parameter\n     *\n     * @param string $rangeField\n     * @param Varien_Db_Select $select\n     * @param int $stepCount\n     * @return array\n     * @throws Varien_Db_Exception\n     *\/",3552],["T_WHITESPACE","\n    ",3560],["T_PUBLIC","public",3561],["T_WHITESPACE"," ",3561],["T_FUNCTION","function",3561],["T_WHITESPACE"," ",3561],["T_STRING","selectsByRange",3561],"(",["T_VARIABLE","$rangeField",3561],",",["T_WHITESPACE"," ",3561],["T_STRING","Varien_Db_Select",3561],["T_WHITESPACE"," ",3561],["T_VARIABLE","$select",3561],",",["T_WHITESPACE"," ",3561],["T_VARIABLE","$stepCount",3561],["T_WHITESPACE"," ",3561],"=",["T_WHITESPACE"," ",3561],["T_LNUMBER","100",3561],")",["T_WHITESPACE","\n    ",3561],"{",["T_WHITESPACE","\n        ",3562],["T_VARIABLE","$queries",3563],["T_WHITESPACE"," ",3563],"=",["T_WHITESPACE"," ",3563],["T_ARRAY","array",3563],"(",")",";",["T_WHITESPACE","\n        ",3563],["T_VARIABLE","$fromSelect",3564],["T_WHITESPACE"," ",3564],"=",["T_WHITESPACE"," ",3564],["T_VARIABLE","$select",3564],["T_OBJECT_OPERATOR","->",3564],["T_STRING","getPart",3564],"(",["T_STRING","Varien_Db_Select",3564],["T_DOUBLE_COLON","::",3564],["T_STRING","FROM",3564],")",";",["T_WHITESPACE","\n        ",3564],["T_IF","if",3565],["T_WHITESPACE"," ",3565],"(",["T_EMPTY","empty",3565],"(",["T_VARIABLE","$fromSelect",3565],")",")",["T_WHITESPACE"," ",3565],"{",["T_WHITESPACE","\n            ",3565],["T_THROW","throw",3566],["T_WHITESPACE"," ",3566],["T_NEW","new",3566],["T_WHITESPACE"," ",3566],["T_STRING","Varien_Db_Exception",3566],"(",["T_CONSTANT_ENCAPSED_STRING","'Select must have correct FROM part'",3566],")",";",["T_WHITESPACE","\n        ",3566],"}",["T_WHITESPACE","\n\n        ",3567],["T_VARIABLE","$tableName",3569],["T_WHITESPACE"," ",3569],"=",["T_WHITESPACE"," ",3569],["T_ARRAY","array",3569],"(",")",";",["T_WHITESPACE","\n        ",3569],["T_VARIABLE","$correlationName",3570],["T_WHITESPACE"," ",3570],"=",["T_WHITESPACE"," ",3570],["T_CONSTANT_ENCAPSED_STRING","''",3570],";",["T_WHITESPACE","\n        ",3570],["T_FOREACH","foreach",3571],["T_WHITESPACE"," ",3571],"(",["T_VARIABLE","$fromSelect",3571],["T_WHITESPACE"," ",3571],["T_AS","as",3571],["T_WHITESPACE"," ",3571],["T_VARIABLE","$correlationName",3571],["T_WHITESPACE"," ",3571],["T_DOUBLE_ARROW","=>",3571],["T_WHITESPACE"," ",3571],["T_VARIABLE","$formPart",3571],")",["T_WHITESPACE"," ",3571],"{",["T_WHITESPACE","\n            ",3571],["T_IF","if",3572],["T_WHITESPACE"," ",3572],"(",["T_VARIABLE","$formPart",3572],"[",["T_CONSTANT_ENCAPSED_STRING","'joinType'",3572],"]",["T_WHITESPACE"," ",3572],["T_IS_EQUAL","==",3572],["T_WHITESPACE"," ",3572],["T_STRING","Varien_Db_Select",3572],["T_DOUBLE_COLON","::",3572],["T_STRING","FROM",3572],")",["T_WHITESPACE"," ",3572],"{",["T_WHITESPACE","\n                ",3572],["T_VARIABLE","$tableName",3573],["T_WHITESPACE"," ",3573],"=",["T_WHITESPACE"," ",3573],["T_VARIABLE","$formPart",3573],"[",["T_CONSTANT_ENCAPSED_STRING","'tableName'",3573],"]",";",["T_WHITESPACE","\n                ",3573],["T_BREAK","break",3574],";",["T_WHITESPACE","\n            ",3574],"}",["T_WHITESPACE","\n        ",3575],"}",["T_WHITESPACE","\n\n        ",3576],["T_VARIABLE","$selectRange",3578],["T_WHITESPACE"," ",3578],"=",["T_WHITESPACE"," ",3578],["T_VARIABLE","$this",3578],["T_OBJECT_OPERATOR","->",3578],["T_STRING","select",3578],"(",")",["T_WHITESPACE","\n            ",3578],["T_OBJECT_OPERATOR","->",3579],["T_STRING","from",3579],"(",["T_WHITESPACE","\n                ",3579],["T_VARIABLE","$tableName",3580],",",["T_WHITESPACE","\n                ",3580],["T_ARRAY","array",3581],"(",["T_WHITESPACE","\n                    ",3581],["T_NEW","new",3582],["T_WHITESPACE"," ",3582],["T_STRING","Zend_Db_Expr",3582],"(",["T_CONSTANT_ENCAPSED_STRING","'MIN('",3582],["T_WHITESPACE"," ",3582],".",["T_WHITESPACE"," ",3582],["T_VARIABLE","$this",3582],["T_OBJECT_OPERATOR","->",3582],["T_STRING","quoteIdentifier",3582],"(",["T_VARIABLE","$rangeField",3582],")",["T_WHITESPACE"," ",3582],".",["T_WHITESPACE"," ",3582],["T_CONSTANT_ENCAPSED_STRING","') AS min'",3582],")",",",["T_WHITESPACE","\n                    ",3582],["T_NEW","new",3583],["T_WHITESPACE"," ",3583],["T_STRING","Zend_Db_Expr",3583],"(",["T_CONSTANT_ENCAPSED_STRING","'MAX('",3583],["T_WHITESPACE"," ",3583],".",["T_WHITESPACE"," ",3583],["T_VARIABLE","$this",3583],["T_OBJECT_OPERATOR","->",3583],["T_STRING","quoteIdentifier",3583],"(",["T_VARIABLE","$rangeField",3583],")",["T_WHITESPACE"," ",3583],".",["T_WHITESPACE"," ",3583],["T_CONSTANT_ENCAPSED_STRING","') AS max'",3583],")",",",["T_WHITESPACE","\n                ",3583],")",["T_WHITESPACE","\n            ",3584],")",";",["T_WHITESPACE","\n\n        ",3585],["T_VARIABLE","$rangeResult",3587],["T_WHITESPACE"," ",3587],"=",["T_WHITESPACE"," ",3587],["T_VARIABLE","$this",3587],["T_OBJECT_OPERATOR","->",3587],["T_STRING","fetchRow",3587],"(",["T_VARIABLE","$selectRange",3587],")",";",["T_WHITESPACE","\n        ",3587],["T_VARIABLE","$min",3588],["T_WHITESPACE"," ",3588],"=",["T_WHITESPACE"," ",3588],["T_VARIABLE","$rangeResult",3588],"[",["T_CONSTANT_ENCAPSED_STRING","'min'",3588],"]",";",["T_WHITESPACE","\n        ",3588],["T_VARIABLE","$max",3589],["T_WHITESPACE"," ",3589],"=",["T_WHITESPACE"," ",3589],["T_VARIABLE","$rangeResult",3589],"[",["T_CONSTANT_ENCAPSED_STRING","'max'",3589],"]",";",["T_WHITESPACE","\n\n        ",3589],["T_WHILE","while",3591],["T_WHITESPACE"," ",3591],"(",["T_VARIABLE","$min",3591],["T_WHITESPACE"," ",3591],["T_IS_SMALLER_OR_EQUAL","<=",3591],["T_WHITESPACE"," ",3591],["T_VARIABLE","$max",3591],")",["T_WHITESPACE"," ",3591],"{",["T_WHITESPACE","\n            ",3591],["T_VARIABLE","$partialSelect",3592],["T_WHITESPACE"," ",3592],"=",["T_WHITESPACE"," ",3592],["T_CLONE","clone",3592],["T_WHITESPACE"," ",3592],["T_VARIABLE","$select",3592],";",["T_WHITESPACE","\n            ",3592],["T_VARIABLE","$partialSelect",3593],["T_OBJECT_OPERATOR","->",3593],["T_STRING","where",3593],"(",["T_WHITESPACE","\n                ",3593],["T_VARIABLE","$this",3594],["T_OBJECT_OPERATOR","->",3594],["T_STRING","quoteIdentifier",3594],"(",["T_VARIABLE","$correlationName",3594],")",["T_WHITESPACE"," ",3594],".",["T_WHITESPACE"," ",3594],["T_CONSTANT_ENCAPSED_STRING","'.'",3594],["T_WHITESPACE","\n                    ",3594],".",["T_WHITESPACE"," ",3595],["T_VARIABLE","$this",3595],["T_OBJECT_OPERATOR","->",3595],["T_STRING","quoteIdentifier",3595],"(",["T_VARIABLE","$rangeField",3595],")",["T_WHITESPACE"," ",3595],".",["T_WHITESPACE"," ",3595],["T_CONSTANT_ENCAPSED_STRING","' >= ?'",3595],",",["T_WHITESPACE"," ",3595],["T_VARIABLE","$min",3595],["T_WHITESPACE","\n            ",3595],")",["T_WHITESPACE","\n            ",3596],["T_OBJECT_OPERATOR","->",3597],["T_STRING","where",3597],"(",["T_WHITESPACE","\n                ",3597],["T_VARIABLE","$this",3598],["T_OBJECT_OPERATOR","->",3598],["T_STRING","quoteIdentifier",3598],"(",["T_VARIABLE","$correlationName",3598],")",["T_WHITESPACE"," ",3598],".",["T_WHITESPACE"," ",3598],["T_CONSTANT_ENCAPSED_STRING","'.'",3598],["T_WHITESPACE","\n                    ",3598],".",["T_WHITESPACE"," ",3599],["T_VARIABLE","$this",3599],["T_OBJECT_OPERATOR","->",3599],["T_STRING","quoteIdentifier",3599],"(",["T_VARIABLE","$rangeField",3599],")",["T_WHITESPACE"," ",3599],".",["T_WHITESPACE"," ",3599],["T_CONSTANT_ENCAPSED_STRING","' < ?'",3599],",",["T_WHITESPACE"," ",3599],["T_VARIABLE","$min",3599],"+",["T_VARIABLE","$stepCount",3599],["T_WHITESPACE","\n            ",3599],")",";",["T_WHITESPACE","\n            ",3600],["T_VARIABLE","$queries",3601],"[","]",["T_WHITESPACE"," ",3601],"=",["T_WHITESPACE"," ",3601],["T_VARIABLE","$partialSelect",3601],";",["T_WHITESPACE","\n            ",3601],["T_VARIABLE","$min",3602],["T_WHITESPACE"," ",3602],["T_PLUS_EQUAL","+=",3602],["T_WHITESPACE"," ",3602],["T_VARIABLE","$stepCount",3602],";",["T_WHITESPACE","\n        ",3602],"}",["T_WHITESPACE","\n        ",3603],["T_RETURN","return",3604],["T_WHITESPACE"," ",3604],["T_VARIABLE","$queries",3604],";",["T_WHITESPACE","\n    ",3604],"}",["T_WHITESPACE","\n\n    ",3605],["T_DOC_COMMENT","\/**\n     * Convert date format to unix time\n     *\n     * @param string|Zend_Db_Expr $date\n     * @throws Varien_Db_Exception\n     * @return Zend_Db_Expr\n     *\/",3607],["T_WHITESPACE","\n    ",3613],["T_PUBLIC","public",3614],["T_WHITESPACE"," ",3614],["T_FUNCTION","function",3614],["T_WHITESPACE"," ",3614],["T_STRING","getUnixTimestamp",3614],"(",["T_VARIABLE","$date",3614],")",["T_WHITESPACE","\n    ",3614],"{",["T_WHITESPACE","\n        ",3615],["T_VARIABLE","$expr",3616],["T_WHITESPACE"," ",3616],"=",["T_WHITESPACE"," ",3616],["T_STRING","sprintf",3616],"(",["T_CONSTANT_ENCAPSED_STRING","'UNIX_TIMESTAMP(%s)'",3616],",",["T_WHITESPACE"," ",3616],["T_VARIABLE","$date",3616],")",";",["T_WHITESPACE","\n        ",3616],["T_RETURN","return",3617],["T_WHITESPACE"," ",3617],["T_NEW","new",3617],["T_WHITESPACE"," ",3617],["T_STRING","Zend_Db_Expr",3617],"(",["T_VARIABLE","$expr",3617],")",";",["T_WHITESPACE","\n    ",3617],"}",["T_WHITESPACE","\n\n    ",3618],["T_DOC_COMMENT","\/**\n     * Convert unix time to date format\n     *\n     * @param int|Zend_Db_Expr $timestamp\n     * @return mixed\n     *\/",3620],["T_WHITESPACE","\n    ",3625],["T_PUBLIC","public",3626],["T_WHITESPACE"," ",3626],["T_FUNCTION","function",3626],["T_WHITESPACE"," ",3626],["T_STRING","fromUnixtime",3626],"(",["T_VARIABLE","$timestamp",3626],")",["T_WHITESPACE","\n    ",3626],"{",["T_WHITESPACE","\n        ",3627],["T_VARIABLE","$expr",3628],["T_WHITESPACE"," ",3628],"=",["T_WHITESPACE"," ",3628],["T_STRING","sprintf",3628],"(",["T_CONSTANT_ENCAPSED_STRING","'FROM_UNIXTIME(%s)'",3628],",",["T_WHITESPACE"," ",3628],["T_VARIABLE","$timestamp",3628],")",";",["T_WHITESPACE","\n        ",3628],["T_RETURN","return",3629],["T_WHITESPACE"," ",3629],["T_NEW","new",3629],["T_WHITESPACE"," ",3629],["T_STRING","Zend_Db_Expr",3629],"(",["T_VARIABLE","$expr",3629],")",";",["T_WHITESPACE","\n    ",3629],"}",["T_WHITESPACE","\n\n    ",3630],["T_DOC_COMMENT","\/**\n     * Get update table query using select object for join and update\n     *\n     * @param Varien_Db_Select $select\n     * @param string|array $table\n     * @throws Varien_Db_Exception\n     * @return string\n     *\/",3632],["T_WHITESPACE","\n    ",3639],["T_PUBLIC","public",3640],["T_WHITESPACE"," ",3640],["T_FUNCTION","function",3640],["T_WHITESPACE"," ",3640],["T_STRING","updateFromSelect",3640],"(",["T_STRING","Varien_Db_Select",3640],["T_WHITESPACE"," ",3640],["T_VARIABLE","$select",3640],",",["T_WHITESPACE"," ",3640],["T_VARIABLE","$table",3640],")",["T_WHITESPACE","\n    ",3640],"{",["T_WHITESPACE","\n        ",3641],["T_IF","if",3642],["T_WHITESPACE"," ",3642],"(","!",["T_STRING","is_array",3642],"(",["T_VARIABLE","$table",3642],")",")",["T_WHITESPACE"," ",3642],"{",["T_WHITESPACE","\n            ",3642],["T_VARIABLE","$table",3643],["T_WHITESPACE"," ",3643],"=",["T_WHITESPACE"," ",3643],["T_ARRAY","array",3643],"(",["T_VARIABLE","$table",3643],["T_WHITESPACE"," ",3643],["T_DOUBLE_ARROW","=>",3643],["T_WHITESPACE"," ",3643],["T_VARIABLE","$table",3643],")",";",["T_WHITESPACE","\n        ",3643],"}",["T_WHITESPACE","\n\n        ",3644],["T_COMMENT","\/\/ get table name and alias\n",3646],["T_WHITESPACE","        ",3647],["T_VARIABLE","$keys",3647],["T_WHITESPACE","       ",3647],"=",["T_WHITESPACE"," ",3647],["T_STRING","array_keys",3647],"(",["T_VARIABLE","$table",3647],")",";",["T_WHITESPACE","\n        ",3647],["T_VARIABLE","$tableAlias",3648],["T_WHITESPACE"," ",3648],"=",["T_WHITESPACE"," ",3648],["T_VARIABLE","$keys",3648],"[",["T_LNUMBER","0",3648],"]",";",["T_WHITESPACE","\n        ",3648],["T_VARIABLE","$tableName",3649],["T_WHITESPACE","  ",3649],"=",["T_WHITESPACE"," ",3649],["T_VARIABLE","$table",3649],"[",["T_VARIABLE","$keys",3649],"[",["T_LNUMBER","0",3649],"]","]",";",["T_WHITESPACE","\n\n        ",3649],["T_VARIABLE","$query",3651],["T_WHITESPACE"," ",3651],"=",["T_WHITESPACE"," ",3651],["T_STRING","sprintf",3651],"(",["T_CONSTANT_ENCAPSED_STRING","'UPDATE %s'",3651],",",["T_WHITESPACE"," ",3651],["T_VARIABLE","$this",3651],["T_OBJECT_OPERATOR","->",3651],["T_STRING","quoteTableAs",3651],"(",["T_VARIABLE","$tableName",3651],",",["T_WHITESPACE"," ",3651],["T_VARIABLE","$tableAlias",3651],")",")",";",["T_WHITESPACE","\n\n        ",3651],["T_COMMENT","\/\/ render JOIN conditions (FROM Part)\n",3653],["T_WHITESPACE","        ",3654],["T_VARIABLE","$joinConds",3654],["T_WHITESPACE","  ",3654],"=",["T_WHITESPACE"," ",3654],["T_ARRAY","array",3654],"(",")",";",["T_WHITESPACE","\n        ",3654],["T_FOREACH","foreach",3655],["T_WHITESPACE"," ",3655],"(",["T_VARIABLE","$select",3655],["T_OBJECT_OPERATOR","->",3655],["T_STRING","getPart",3655],"(",["T_STRING","Zend_Db_Select",3655],["T_DOUBLE_COLON","::",3655],["T_STRING","FROM",3655],")",["T_WHITESPACE"," ",3655],["T_AS","as",3655],["T_WHITESPACE"," ",3655],["T_VARIABLE","$correlationName",3655],["T_WHITESPACE"," ",3655],["T_DOUBLE_ARROW","=>",3655],["T_WHITESPACE"," ",3655],["T_VARIABLE","$joinProp",3655],")",["T_WHITESPACE"," ",3655],"{",["T_WHITESPACE","\n            ",3655],["T_IF","if",3656],["T_WHITESPACE"," ",3656],"(",["T_VARIABLE","$joinProp",3656],"[",["T_CONSTANT_ENCAPSED_STRING","'joinType'",3656],"]",["T_WHITESPACE"," ",3656],["T_IS_EQUAL","==",3656],["T_WHITESPACE"," ",3656],["T_STRING","Zend_Db_Select",3656],["T_DOUBLE_COLON","::",3656],["T_STRING","FROM",3656],")",["T_WHITESPACE"," ",3656],"{",["T_WHITESPACE","\n                ",3656],["T_VARIABLE","$joinType",3657],["T_WHITESPACE"," ",3657],"=",["T_WHITESPACE"," ",3657],["T_STRING","strtoupper",3657],"(",["T_STRING","Zend_Db_Select",3657],["T_DOUBLE_COLON","::",3657],["T_STRING","INNER_JOIN",3657],")",";",["T_WHITESPACE","\n            ",3657],"}",["T_WHITESPACE"," ",3658],["T_ELSE","else",3658],["T_WHITESPACE"," ",3658],"{",["T_WHITESPACE","\n                ",3658],["T_VARIABLE","$joinType",3659],["T_WHITESPACE"," ",3659],"=",["T_WHITESPACE"," ",3659],["T_STRING","strtoupper",3659],"(",["T_VARIABLE","$joinProp",3659],"[",["T_CONSTANT_ENCAPSED_STRING","'joinType'",3659],"]",")",";",["T_WHITESPACE","\n            ",3659],"}",["T_WHITESPACE","\n            ",3660],["T_VARIABLE","$joinTable",3661],["T_WHITESPACE"," ",3661],"=",["T_WHITESPACE"," ",3661],["T_CONSTANT_ENCAPSED_STRING","''",3661],";",["T_WHITESPACE","\n            ",3661],["T_IF","if",3662],["T_WHITESPACE"," ",3662],"(",["T_VARIABLE","$joinProp",3662],"[",["T_CONSTANT_ENCAPSED_STRING","'schema'",3662],"]",["T_WHITESPACE"," ",3662],["T_IS_NOT_IDENTICAL","!==",3662],["T_WHITESPACE"," ",3662],["T_STRING","null",3662],")",["T_WHITESPACE"," ",3662],"{",["T_WHITESPACE","\n                ",3662],["T_VARIABLE","$joinTable",3663],["T_WHITESPACE"," ",3663],"=",["T_WHITESPACE"," ",3663],["T_STRING","sprintf",3663],"(",["T_CONSTANT_ENCAPSED_STRING","'%s.'",3663],",",["T_WHITESPACE"," ",3663],["T_VARIABLE","$this",3663],["T_OBJECT_OPERATOR","->",3663],["T_STRING","quoteIdentifier",3663],"(",["T_VARIABLE","$joinProp",3663],"[",["T_CONSTANT_ENCAPSED_STRING","'schema'",3663],"]",")",")",";",["T_WHITESPACE","\n            ",3663],"}",["T_WHITESPACE","\n            ",3664],["T_VARIABLE","$joinTable",3665],["T_WHITESPACE"," ",3665],["T_CONCAT_EQUAL",".=",3665],["T_WHITESPACE"," ",3665],["T_VARIABLE","$this",3665],["T_OBJECT_OPERATOR","->",3665],["T_STRING","quoteTableAs",3665],"(",["T_VARIABLE","$joinProp",3665],"[",["T_CONSTANT_ENCAPSED_STRING","'tableName'",3665],"]",",",["T_WHITESPACE"," ",3665],["T_VARIABLE","$correlationName",3665],")",";",["T_WHITESPACE","\n\n            ",3665],["T_VARIABLE","$join",3667],["T_WHITESPACE"," ",3667],"=",["T_WHITESPACE"," ",3667],["T_STRING","sprintf",3667],"(",["T_CONSTANT_ENCAPSED_STRING","' %s %s'",3667],",",["T_WHITESPACE"," ",3667],["T_VARIABLE","$joinType",3667],",",["T_WHITESPACE"," ",3667],["T_VARIABLE","$joinTable",3667],")",";",["T_WHITESPACE","\n\n            ",3667],["T_IF","if",3669],["T_WHITESPACE"," ",3669],"(","!",["T_EMPTY","empty",3669],"(",["T_VARIABLE","$joinProp",3669],"[",["T_CONSTANT_ENCAPSED_STRING","'joinCondition'",3669],"]",")",")",["T_WHITESPACE"," ",3669],"{",["T_WHITESPACE","\n                ",3669],["T_VARIABLE","$join",3670],["T_WHITESPACE"," ",3670],"=",["T_WHITESPACE"," ",3670],["T_STRING","sprintf",3670],"(",["T_CONSTANT_ENCAPSED_STRING","'%s ON %s'",3670],",",["T_WHITESPACE"," ",3670],["T_VARIABLE","$join",3670],",",["T_WHITESPACE"," ",3670],["T_VARIABLE","$joinProp",3670],"[",["T_CONSTANT_ENCAPSED_STRING","'joinCondition'",3670],"]",")",";",["T_WHITESPACE","\n            ",3670],"}",["T_WHITESPACE","\n\n            ",3671],["T_VARIABLE","$joinConds",3673],"[","]",["T_WHITESPACE"," ",3673],"=",["T_WHITESPACE"," ",3673],["T_VARIABLE","$join",3673],";",["T_WHITESPACE","\n        ",3673],"}",["T_WHITESPACE","\n\n        ",3674],["T_IF","if",3676],["T_WHITESPACE"," ",3676],"(",["T_VARIABLE","$joinConds",3676],")",["T_WHITESPACE"," ",3676],"{",["T_WHITESPACE","\n            ",3676],["T_VARIABLE","$query",3677],["T_WHITESPACE"," ",3677],"=",["T_WHITESPACE"," ",3677],["T_STRING","sprintf",3677],"(",["T_CONSTANT_ENCAPSED_STRING","\"%s\\n%s\"",3677],",",["T_WHITESPACE"," ",3677],["T_VARIABLE","$query",3677],",",["T_WHITESPACE"," ",3677],["T_STRING","implode",3677],"(",["T_CONSTANT_ENCAPSED_STRING","\"\\n\"",3677],",",["T_WHITESPACE"," ",3677],["T_VARIABLE","$joinConds",3677],")",")",";",["T_WHITESPACE","\n        ",3677],"}",["T_WHITESPACE","\n\n        ",3678],["T_COMMENT","\/\/ render UPDATE SET\n",3680],["T_WHITESPACE","        ",3681],["T_VARIABLE","$columns",3681],["T_WHITESPACE"," ",3681],"=",["T_WHITESPACE"," ",3681],["T_ARRAY","array",3681],"(",")",";",["T_WHITESPACE","\n        ",3681],["T_FOREACH","foreach",3682],["T_WHITESPACE"," ",3682],"(",["T_VARIABLE","$select",3682],["T_OBJECT_OPERATOR","->",3682],["T_STRING","getPart",3682],"(",["T_STRING","Zend_Db_Select",3682],["T_DOUBLE_COLON","::",3682],["T_STRING","COLUMNS",3682],")",["T_WHITESPACE"," ",3682],["T_AS","as",3682],["T_WHITESPACE"," ",3682],["T_VARIABLE","$columnEntry",3682],")",["T_WHITESPACE"," ",3682],"{",["T_WHITESPACE","\n            ",3682],["T_LIST","list",3683],"(",["T_VARIABLE","$correlationName",3683],",",["T_WHITESPACE"," ",3683],["T_VARIABLE","$column",3683],",",["T_WHITESPACE"," ",3683],["T_VARIABLE","$alias",3683],")",["T_WHITESPACE"," ",3683],"=",["T_WHITESPACE"," ",3683],["T_VARIABLE","$columnEntry",3683],";",["T_WHITESPACE","\n            ",3683],["T_IF","if",3684],["T_WHITESPACE"," ",3684],"(",["T_EMPTY","empty",3684],"(",["T_VARIABLE","$alias",3684],")",")",["T_WHITESPACE"," ",3684],"{",["T_WHITESPACE","\n                ",3684],["T_VARIABLE","$alias",3685],["T_WHITESPACE"," ",3685],"=",["T_WHITESPACE"," ",3685],["T_VARIABLE","$column",3685],";",["T_WHITESPACE","\n            ",3685],"}",["T_WHITESPACE","\n            ",3686],["T_IF","if",3687],["T_WHITESPACE"," ",3687],"(","!",["T_VARIABLE","$column",3687],["T_WHITESPACE"," ",3687],["T_INSTANCEOF","instanceof",3687],["T_WHITESPACE"," ",3687],["T_STRING","Zend_Db_Expr",3687],["T_WHITESPACE"," ",3687],["T_BOOLEAN_AND","&&",3687],["T_WHITESPACE"," ",3687],"!",["T_EMPTY","empty",3687],"(",["T_VARIABLE","$correlationName",3687],")",")",["T_WHITESPACE"," ",3687],"{",["T_WHITESPACE","\n                ",3687],["T_VARIABLE","$column",3688],["T_WHITESPACE"," ",3688],"=",["T_WHITESPACE"," ",3688],["T_VARIABLE","$this",3688],["T_OBJECT_OPERATOR","->",3688],["T_STRING","quoteIdentifier",3688],"(",["T_ARRAY","array",3688],"(",["T_VARIABLE","$correlationName",3688],",",["T_WHITESPACE"," ",3688],["T_VARIABLE","$column",3688],")",")",";",["T_WHITESPACE","\n            ",3688],"}",["T_WHITESPACE","\n            ",3689],["T_VARIABLE","$columns",3690],"[","]",["T_WHITESPACE"," ",3690],"=",["T_WHITESPACE"," ",3690],["T_STRING","sprintf",3690],"(",["T_CONSTANT_ENCAPSED_STRING","'%s = %s'",3690],",",["T_WHITESPACE"," ",3690],["T_VARIABLE","$this",3690],["T_OBJECT_OPERATOR","->",3690],["T_STRING","quoteIdentifier",3690],"(",["T_ARRAY","array",3690],"(",["T_VARIABLE","$tableAlias",3690],",",["T_WHITESPACE"," ",3690],["T_VARIABLE","$alias",3690],")",")",",",["T_WHITESPACE"," ",3690],["T_VARIABLE","$column",3690],")",";",["T_WHITESPACE","\n        ",3690],"}",["T_WHITESPACE","\n\n        ",3691],["T_IF","if",3693],["T_WHITESPACE"," ",3693],"(","!",["T_VARIABLE","$columns",3693],")",["T_WHITESPACE"," ",3693],"{",["T_WHITESPACE","\n            ",3693],["T_THROW","throw",3694],["T_WHITESPACE"," ",3694],["T_NEW","new",3694],["T_WHITESPACE"," ",3694],["T_STRING","Varien_Db_Exception",3694],"(",["T_CONSTANT_ENCAPSED_STRING","'The columns for UPDATE statement are not defined'",3694],")",";",["T_WHITESPACE","\n        ",3694],"}",["T_WHITESPACE","\n\n        ",3695],["T_VARIABLE","$query",3697],["T_WHITESPACE"," ",3697],"=",["T_WHITESPACE"," ",3697],["T_STRING","sprintf",3697],"(",["T_CONSTANT_ENCAPSED_STRING","\"%s\\nSET %s\"",3697],",",["T_WHITESPACE"," ",3697],["T_VARIABLE","$query",3697],",",["T_WHITESPACE"," ",3697],["T_STRING","implode",3697],"(",["T_CONSTANT_ENCAPSED_STRING","', '",3697],",",["T_WHITESPACE"," ",3697],["T_VARIABLE","$columns",3697],")",")",";",["T_WHITESPACE","\n\n        ",3697],["T_COMMENT","\/\/ render WHERE\n",3699],["T_WHITESPACE","        ",3700],["T_VARIABLE","$wherePart",3700],["T_WHITESPACE"," ",3700],"=",["T_WHITESPACE"," ",3700],["T_VARIABLE","$select",3700],["T_OBJECT_OPERATOR","->",3700],["T_STRING","getPart",3700],"(",["T_STRING","Zend_Db_Select",3700],["T_DOUBLE_COLON","::",3700],["T_STRING","WHERE",3700],")",";",["T_WHITESPACE","\n        ",3700],["T_IF","if",3701],["T_WHITESPACE"," ",3701],"(",["T_VARIABLE","$wherePart",3701],")",["T_WHITESPACE"," ",3701],"{",["T_WHITESPACE","\n            ",3701],["T_VARIABLE","$query",3702],["T_WHITESPACE"," ",3702],"=",["T_WHITESPACE"," ",3702],["T_STRING","sprintf",3702],"(",["T_CONSTANT_ENCAPSED_STRING","\"%s\\nWHERE %s\"",3702],",",["T_WHITESPACE"," ",3702],["T_VARIABLE","$query",3702],",",["T_WHITESPACE"," ",3702],["T_STRING","implode",3702],"(",["T_CONSTANT_ENCAPSED_STRING","' '",3702],",",["T_WHITESPACE"," ",3702],["T_VARIABLE","$wherePart",3702],")",")",";",["T_WHITESPACE","\n        ",3702],"}",["T_WHITESPACE","\n\n        ",3703],["T_RETURN","return",3705],["T_WHITESPACE"," ",3705],["T_VARIABLE","$query",3705],";",["T_WHITESPACE","\n    ",3705],"}",["T_WHITESPACE","\n\n    ",3706],["T_DOC_COMMENT","\/**\n     * Get delete from select object query\n     *\n     * @param Varien_Db_Select $select\n     * @param string $table the table name or alias used in select\n     * @return string|int\n     *\/",3708],["T_WHITESPACE","\n    ",3714],["T_PUBLIC","public",3715],["T_WHITESPACE"," ",3715],["T_FUNCTION","function",3715],["T_WHITESPACE"," ",3715],["T_STRING","deleteFromSelect",3715],"(",["T_STRING","Varien_Db_Select",3715],["T_WHITESPACE"," ",3715],["T_VARIABLE","$select",3715],",",["T_WHITESPACE"," ",3715],["T_VARIABLE","$table",3715],")",["T_WHITESPACE","\n    ",3715],"{",["T_WHITESPACE","\n        ",3716],["T_VARIABLE","$select",3717],["T_WHITESPACE"," ",3717],"=",["T_WHITESPACE"," ",3717],["T_CLONE","clone",3717],["T_WHITESPACE"," ",3717],["T_VARIABLE","$select",3717],";",["T_WHITESPACE","\n        ",3717],["T_VARIABLE","$select",3718],["T_OBJECT_OPERATOR","->",3718],["T_STRING","reset",3718],"(",["T_STRING","Zend_Db_Select",3718],["T_DOUBLE_COLON","::",3718],["T_STRING","DISTINCT",3718],")",";",["T_WHITESPACE","\n        ",3718],["T_VARIABLE","$select",3719],["T_OBJECT_OPERATOR","->",3719],["T_STRING","reset",3719],"(",["T_STRING","Zend_Db_Select",3719],["T_DOUBLE_COLON","::",3719],["T_STRING","COLUMNS",3719],")",";",["T_WHITESPACE","\n\n        ",3719],["T_VARIABLE","$query",3721],["T_WHITESPACE"," ",3721],"=",["T_WHITESPACE"," ",3721],["T_STRING","sprintf",3721],"(",["T_CONSTANT_ENCAPSED_STRING","'DELETE %s %s'",3721],",",["T_WHITESPACE"," ",3721],["T_VARIABLE","$this",3721],["T_OBJECT_OPERATOR","->",3721],["T_STRING","quoteIdentifier",3721],"(",["T_VARIABLE","$table",3721],")",",",["T_WHITESPACE"," ",3721],["T_VARIABLE","$select",3721],["T_OBJECT_OPERATOR","->",3721],["T_STRING","assemble",3721],"(",")",")",";",["T_WHITESPACE","\n\n        ",3721],["T_RETURN","return",3723],["T_WHITESPACE"," ",3723],["T_VARIABLE","$query",3723],";",["T_WHITESPACE","\n    ",3723],"}",["T_WHITESPACE","\n\n    ",3724],["T_DOC_COMMENT","\/**\n     * Calculate checksum for table or for group of tables\n     *\n     * @param array|string $tableNames array of tables names | table name\n     * @param string $schemaName schema name\n     * @return arrray\n     *\/",3726],["T_WHITESPACE","\n    ",3732],["T_PUBLIC","public",3733],["T_WHITESPACE"," ",3733],["T_FUNCTION","function",3733],["T_WHITESPACE"," ",3733],["T_STRING","getTablesChecksum",3733],"(",["T_VARIABLE","$tableNames",3733],",",["T_WHITESPACE"," ",3733],["T_VARIABLE","$schemaName",3733],["T_WHITESPACE"," ",3733],"=",["T_WHITESPACE"," ",3733],["T_STRING","null",3733],")",["T_WHITESPACE","\n    ",3733],"{",["T_WHITESPACE","\n        ",3734],["T_VARIABLE","$result",3735],["T_WHITESPACE","     ",3735],"=",["T_WHITESPACE"," ",3735],["T_ARRAY","array",3735],"(",")",";",["T_WHITESPACE","\n        ",3735],["T_VARIABLE","$tableNames",3736],["T_WHITESPACE"," ",3736],"=",["T_WHITESPACE"," ",3736],["T_STRING","is_array",3736],"(",["T_VARIABLE","$tableNames",3736],")",["T_WHITESPACE"," ",3736],"?",["T_WHITESPACE"," ",3736],["T_VARIABLE","$tableNames",3736],["T_WHITESPACE"," ",3736],":",["T_WHITESPACE"," ",3736],["T_ARRAY","array",3736],"(",["T_VARIABLE","$tableNames",3736],")",";",["T_WHITESPACE","\n\n        ",3736],["T_FOREACH","foreach",3738],["T_WHITESPACE"," ",3738],"(",["T_VARIABLE","$tableNames",3738],["T_WHITESPACE"," ",3738],["T_AS","as",3738],["T_WHITESPACE"," ",3738],["T_VARIABLE","$tableName",3738],")",["T_WHITESPACE"," ",3738],"{",["T_WHITESPACE","\n            ",3738],["T_VARIABLE","$query",3739],["T_WHITESPACE"," ",3739],"=",["T_WHITESPACE"," ",3739],["T_CONSTANT_ENCAPSED_STRING","'CHECKSUM TABLE '",3739],["T_WHITESPACE"," ",3739],".",["T_WHITESPACE"," ",3739],["T_VARIABLE","$this",3739],["T_OBJECT_OPERATOR","->",3739],["T_STRING","_getTableName",3739],"(",["T_VARIABLE","$tableName",3739],",",["T_WHITESPACE"," ",3739],["T_VARIABLE","$schemaName",3739],")",";",["T_WHITESPACE","\n            ",3739],["T_VARIABLE","$checkSumArray",3740],["T_WHITESPACE","      ",3740],"=",["T_WHITESPACE"," ",3740],["T_VARIABLE","$this",3740],["T_OBJECT_OPERATOR","->",3740],["T_STRING","fetchRow",3740],"(",["T_VARIABLE","$query",3740],")",";",["T_WHITESPACE","\n            ",3740],["T_VARIABLE","$result",3741],"[",["T_VARIABLE","$tableName",3741],"]",["T_WHITESPACE"," ",3741],"=",["T_WHITESPACE"," ",3741],["T_VARIABLE","$checkSumArray",3741],"[",["T_CONSTANT_ENCAPSED_STRING","'Checksum'",3741],"]",";",["T_WHITESPACE","\n        ",3741],"}",["T_WHITESPACE","\n\n        ",3742],["T_RETURN","return",3744],["T_WHITESPACE"," ",3744],["T_VARIABLE","$result",3744],";",["T_WHITESPACE","\n    ",3744],"}",["T_WHITESPACE","\n\n    ",3745],["T_DOC_COMMENT","\/**\n     * Check if the database support STRAIGHT JOIN\n     *\n     * @return boolean\n     *\/",3747],["T_WHITESPACE","\n    ",3751],["T_PUBLIC","public",3752],["T_WHITESPACE"," ",3752],["T_FUNCTION","function",3752],["T_WHITESPACE"," ",3752],["T_STRING","supportStraightJoin",3752],"(",")",["T_WHITESPACE","\n    ",3752],"{",["T_WHITESPACE","\n        ",3753],["T_RETURN","return",3754],["T_WHITESPACE"," ",3754],["T_STRING","true",3754],";",["T_WHITESPACE","\n    ",3754],"}",["T_WHITESPACE","\n\n    ",3755],["T_DOC_COMMENT","\/**\n     * Adds order by random to select object\n     * Possible using integer field for optimization\n     *\n     * @param Varien_Db_Select $select\n     * @param string $field\n     * @return Varien_Db_Adapter_Pdo_Mysql\n     *\/",3757],["T_WHITESPACE","\n    ",3764],["T_PUBLIC","public",3765],["T_WHITESPACE"," ",3765],["T_FUNCTION","function",3765],["T_WHITESPACE"," ",3765],["T_STRING","orderRand",3765],"(",["T_STRING","Varien_Db_Select",3765],["T_WHITESPACE"," ",3765],["T_VARIABLE","$select",3765],",",["T_WHITESPACE"," ",3765],["T_VARIABLE","$field",3765],["T_WHITESPACE"," ",3765],"=",["T_WHITESPACE"," ",3765],["T_STRING","null",3765],")",["T_WHITESPACE","\n    ",3765],"{",["T_WHITESPACE","\n        ",3766],["T_IF","if",3767],["T_WHITESPACE"," ",3767],"(",["T_VARIABLE","$field",3767],["T_WHITESPACE"," ",3767],["T_IS_NOT_IDENTICAL","!==",3767],["T_WHITESPACE"," ",3767],["T_STRING","null",3767],")",["T_WHITESPACE"," ",3767],"{",["T_WHITESPACE","\n            ",3767],["T_VARIABLE","$expression",3768],["T_WHITESPACE"," ",3768],"=",["T_WHITESPACE"," ",3768],["T_NEW","new",3768],["T_WHITESPACE"," ",3768],["T_STRING","Zend_Db_Expr",3768],"(",["T_STRING","sprintf",3768],"(",["T_CONSTANT_ENCAPSED_STRING","'RAND() * %s'",3768],",",["T_WHITESPACE"," ",3768],["T_VARIABLE","$this",3768],["T_OBJECT_OPERATOR","->",3768],["T_STRING","quoteIdentifier",3768],"(",["T_VARIABLE","$field",3768],")",")",")",";",["T_WHITESPACE","\n            ",3768],["T_VARIABLE","$select",3769],["T_OBJECT_OPERATOR","->",3769],["T_STRING","columns",3769],"(",["T_ARRAY","array",3769],"(",["T_CONSTANT_ENCAPSED_STRING","'mage_rand'",3769],["T_WHITESPACE"," ",3769],["T_DOUBLE_ARROW","=>",3769],["T_WHITESPACE"," ",3769],["T_VARIABLE","$expression",3769],")",")",";",["T_WHITESPACE","\n            ",3769],["T_VARIABLE","$spec",3770],["T_WHITESPACE"," ",3770],"=",["T_WHITESPACE"," ",3770],["T_NEW","new",3770],["T_WHITESPACE"," ",3770],["T_STRING","Zend_Db_Expr",3770],"(",["T_CONSTANT_ENCAPSED_STRING","'mage_rand'",3770],")",";",["T_WHITESPACE","\n        ",3770],"}",["T_WHITESPACE"," ",3771],["T_ELSE","else",3771],["T_WHITESPACE"," ",3771],"{",["T_WHITESPACE","\n            ",3771],["T_VARIABLE","$spec",3772],["T_WHITESPACE"," ",3772],"=",["T_WHITESPACE"," ",3772],["T_NEW","new",3772],["T_WHITESPACE"," ",3772],["T_STRING","Zend_Db_Expr",3772],"(",["T_CONSTANT_ENCAPSED_STRING","'RAND()'",3772],")",";",["T_WHITESPACE","\n        ",3772],"}",["T_WHITESPACE","\n        ",3773],["T_VARIABLE","$select",3774],["T_OBJECT_OPERATOR","->",3774],["T_STRING","order",3774],"(",["T_VARIABLE","$spec",3774],")",";",["T_WHITESPACE","\n\n        ",3774],["T_RETURN","return",3776],["T_WHITESPACE"," ",3776],["T_VARIABLE","$this",3776],";",["T_WHITESPACE","\n    ",3776],"}",["T_WHITESPACE","\n\n    ",3777],["T_DOC_COMMENT","\/**\n     * Render SQL FOR UPDATE clause\n     *\n     * @param string $sql\n     * @return string\n     *\/",3779],["T_WHITESPACE","\n    ",3784],["T_PUBLIC","public",3785],["T_WHITESPACE"," ",3785],["T_FUNCTION","function",3785],["T_WHITESPACE"," ",3785],["T_STRING","forUpdate",3785],"(",["T_VARIABLE","$sql",3785],")",["T_WHITESPACE","\n    ",3785],"{",["T_WHITESPACE","\n        ",3786],["T_RETURN","return",3787],["T_WHITESPACE"," ",3787],["T_STRING","sprintf",3787],"(",["T_CONSTANT_ENCAPSED_STRING","'%s FOR UPDATE'",3787],",",["T_WHITESPACE"," ",3787],["T_VARIABLE","$sql",3787],")",";",["T_WHITESPACE","\n    ",3787],"}",["T_WHITESPACE","\n\n    ",3788],["T_DOC_COMMENT","\/**\n     * Prepare insert data\n     *\n     * @param mixed $row\n     * @param array $bind\n     * @return string\n     *\/",3790],["T_WHITESPACE","\n    ",3796],["T_PROTECTED","protected",3797],["T_WHITESPACE"," ",3797],["T_FUNCTION","function",3797],["T_WHITESPACE"," ",3797],["T_STRING","_prepareInsertData",3797],"(",["T_VARIABLE","$row",3797],",",["T_WHITESPACE"," ",3797],"&",["T_VARIABLE","$bind",3797],")",["T_WHITESPACE","\n    ",3797],"{",["T_WHITESPACE","\n        ",3798],["T_IF","if",3799],["T_WHITESPACE"," ",3799],"(",["T_STRING","is_array",3799],"(",["T_VARIABLE","$row",3799],")",")",["T_WHITESPACE"," ",3799],"{",["T_WHITESPACE","\n            ",3799],["T_VARIABLE","$line",3800],["T_WHITESPACE"," ",3800],"=",["T_WHITESPACE"," ",3800],["T_ARRAY","array",3800],"(",")",";",["T_WHITESPACE","\n            ",3800],["T_FOREACH","foreach",3801],["T_WHITESPACE"," ",3801],"(",["T_VARIABLE","$row",3801],["T_WHITESPACE"," ",3801],["T_AS","as",3801],["T_WHITESPACE"," ",3801],["T_VARIABLE","$value",3801],")",["T_WHITESPACE"," ",3801],"{",["T_WHITESPACE","\n                ",3801],["T_IF","if",3802],["T_WHITESPACE"," ",3802],"(",["T_VARIABLE","$value",3802],["T_WHITESPACE"," ",3802],["T_INSTANCEOF","instanceof",3802],["T_WHITESPACE"," ",3802],["T_STRING","Zend_Db_Expr",3802],")",["T_WHITESPACE"," ",3802],"{",["T_WHITESPACE","\n                    ",3802],["T_VARIABLE","$line",3803],"[","]",["T_WHITESPACE"," ",3803],"=",["T_WHITESPACE"," ",3803],["T_VARIABLE","$value",3803],["T_OBJECT_OPERATOR","->",3803],["T_STRING","__toString",3803],"(",")",";",["T_WHITESPACE","\n                ",3803],"}",["T_WHITESPACE"," ",3804],["T_ELSE","else",3804],["T_WHITESPACE"," ",3804],"{",["T_WHITESPACE","\n                    ",3804],["T_VARIABLE","$line",3805],"[","]",["T_WHITESPACE"," ",3805],"=",["T_WHITESPACE"," ",3805],["T_CONSTANT_ENCAPSED_STRING","'?'",3805],";",["T_WHITESPACE","\n                    ",3805],["T_VARIABLE","$bind",3806],"[","]",["T_WHITESPACE"," ",3806],"=",["T_WHITESPACE"," ",3806],["T_VARIABLE","$value",3806],";",["T_WHITESPACE","\n                ",3806],"}",["T_WHITESPACE","\n            ",3807],"}",["T_WHITESPACE","\n            ",3808],["T_VARIABLE","$line",3809],["T_WHITESPACE"," ",3809],"=",["T_WHITESPACE"," ",3809],["T_STRING","implode",3809],"(",["T_CONSTANT_ENCAPSED_STRING","', '",3809],",",["T_WHITESPACE"," ",3809],["T_VARIABLE","$line",3809],")",";",["T_WHITESPACE","\n        ",3809],"}",["T_WHITESPACE"," ",3810],["T_ELSEIF","elseif",3810],["T_WHITESPACE"," ",3810],"(",["T_VARIABLE","$row",3810],["T_WHITESPACE"," ",3810],["T_INSTANCEOF","instanceof",3810],["T_WHITESPACE"," ",3810],["T_STRING","Zend_Db_Expr",3810],")",["T_WHITESPACE"," ",3810],"{",["T_WHITESPACE","\n            ",3810],["T_VARIABLE","$line",3811],["T_WHITESPACE"," ",3811],"=",["T_WHITESPACE"," ",3811],["T_VARIABLE","$row",3811],["T_OBJECT_OPERATOR","->",3811],["T_STRING","__toString",3811],"(",")",";",["T_WHITESPACE","\n        ",3811],"}",["T_WHITESPACE"," ",3812],["T_ELSE","else",3812],["T_WHITESPACE"," ",3812],"{",["T_WHITESPACE","\n            ",3812],["T_VARIABLE","$line",3813],["T_WHITESPACE"," ",3813],"=",["T_WHITESPACE"," ",3813],["T_CONSTANT_ENCAPSED_STRING","'?'",3813],";",["T_WHITESPACE","\n            ",3813],["T_VARIABLE","$bind",3814],"[","]",["T_WHITESPACE"," ",3814],"=",["T_WHITESPACE"," ",3814],["T_VARIABLE","$row",3814],";",["T_WHITESPACE","\n        ",3814],"}",["T_WHITESPACE","\n\n        ",3815],["T_RETURN","return",3817],["T_WHITESPACE"," ",3817],["T_STRING","sprintf",3817],"(",["T_CONSTANT_ENCAPSED_STRING","'(%s)'",3817],",",["T_WHITESPACE"," ",3817],["T_VARIABLE","$line",3817],")",";",["T_WHITESPACE","\n    ",3817],"}",["T_WHITESPACE","\n\n    ",3818],["T_DOC_COMMENT","\/**\n     * Return insert sql query\n     *\n     * @param string $tableName\n     * @param array $columns\n     * @param array $values\n     * @return string\n     *\/",3820],["T_WHITESPACE","\n    ",3827],["T_PROTECTED","protected",3828],["T_WHITESPACE"," ",3828],["T_FUNCTION","function",3828],["T_WHITESPACE"," ",3828],["T_STRING","_getInsertSqlQuery",3828],"(",["T_VARIABLE","$tableName",3828],",",["T_WHITESPACE"," ",3828],["T_ARRAY","array",3828],["T_WHITESPACE"," ",3828],["T_VARIABLE","$columns",3828],",",["T_WHITESPACE"," ",3828],["T_ARRAY","array",3828],["T_WHITESPACE"," ",3828],["T_VARIABLE","$values",3828],")",["T_WHITESPACE","\n    ",3828],"{",["T_WHITESPACE","\n        ",3829],["T_VARIABLE","$tableName",3830],["T_WHITESPACE"," ",3830],"=",["T_WHITESPACE"," ",3830],["T_VARIABLE","$this",3830],["T_OBJECT_OPERATOR","->",3830],["T_STRING","quoteIdentifier",3830],"(",["T_VARIABLE","$tableName",3830],",",["T_WHITESPACE"," ",3830],["T_STRING","true",3830],")",";",["T_WHITESPACE","\n        ",3830],["T_VARIABLE","$columns",3831],["T_WHITESPACE","   ",3831],"=",["T_WHITESPACE"," ",3831],["T_STRING","array_map",3831],"(",["T_ARRAY","array",3831],"(",["T_VARIABLE","$this",3831],",",["T_WHITESPACE"," ",3831],["T_CONSTANT_ENCAPSED_STRING","'quoteIdentifier'",3831],")",",",["T_WHITESPACE"," ",3831],["T_VARIABLE","$columns",3831],")",";",["T_WHITESPACE","\n        ",3831],["T_VARIABLE","$columns",3832],["T_WHITESPACE","   ",3832],"=",["T_WHITESPACE"," ",3832],["T_STRING","implode",3832],"(",["T_CONSTANT_ENCAPSED_STRING","','",3832],",",["T_WHITESPACE"," ",3832],["T_VARIABLE","$columns",3832],")",";",["T_WHITESPACE","\n        ",3832],["T_VARIABLE","$values",3833],["T_WHITESPACE","    ",3833],"=",["T_WHITESPACE"," ",3833],["T_STRING","implode",3833],"(",["T_CONSTANT_ENCAPSED_STRING","', '",3833],",",["T_WHITESPACE"," ",3833],["T_VARIABLE","$values",3833],")",";",["T_WHITESPACE","\n\n        ",3833],["T_VARIABLE","$insertSql",3835],["T_WHITESPACE"," ",3835],"=",["T_WHITESPACE"," ",3835],["T_STRING","sprintf",3835],"(",["T_CONSTANT_ENCAPSED_STRING","'INSERT INTO %s (%s) VALUES %s'",3835],",",["T_WHITESPACE"," ",3835],["T_VARIABLE","$tableName",3835],",",["T_WHITESPACE"," ",3835],["T_VARIABLE","$columns",3835],",",["T_WHITESPACE"," ",3835],["T_VARIABLE","$values",3835],")",";",["T_WHITESPACE","\n\n        ",3835],["T_RETURN","return",3837],["T_WHITESPACE"," ",3837],["T_VARIABLE","$insertSql",3837],";",["T_WHITESPACE","\n    ",3837],"}",["T_WHITESPACE","\n\n    ",3838],["T_DOC_COMMENT","\/**\n     * Return ddl type\n     *\n     * @param array $options\n     * @return string\n     *\/",3840],["T_WHITESPACE","\n    ",3845],["T_PROTECTED","protected",3846],["T_WHITESPACE"," ",3846],["T_FUNCTION","function",3846],["T_WHITESPACE"," ",3846],["T_STRING","_getDdlType",3846],"(",["T_VARIABLE","$options",3846],")",["T_WHITESPACE","\n    ",3846],"{",["T_WHITESPACE","\n        ",3847],["T_VARIABLE","$ddlType",3848],["T_WHITESPACE"," ",3848],"=",["T_WHITESPACE"," ",3848],["T_STRING","null",3848],";",["T_WHITESPACE","\n        ",3848],["T_IF","if",3849],["T_WHITESPACE"," ",3849],"(",["T_ISSET","isset",3849],"(",["T_VARIABLE","$options",3849],"[",["T_CONSTANT_ENCAPSED_STRING","'TYPE'",3849],"]",")",")",["T_WHITESPACE"," ",3849],"{",["T_WHITESPACE","\n            ",3849],["T_VARIABLE","$ddlType",3850],["T_WHITESPACE"," ",3850],"=",["T_WHITESPACE"," ",3850],["T_VARIABLE","$options",3850],"[",["T_CONSTANT_ENCAPSED_STRING","'TYPE'",3850],"]",";",["T_WHITESPACE","\n        ",3850],"}",["T_WHITESPACE"," ",3851],["T_ELSEIF","elseif",3851],["T_WHITESPACE"," ",3851],"(",["T_ISSET","isset",3851],"(",["T_VARIABLE","$options",3851],"[",["T_CONSTANT_ENCAPSED_STRING","'COLUMN_TYPE'",3851],"]",")",")",["T_WHITESPACE"," ",3851],"{",["T_WHITESPACE","\n            ",3851],["T_VARIABLE","$ddlType",3852],["T_WHITESPACE"," ",3852],"=",["T_WHITESPACE"," ",3852],["T_VARIABLE","$options",3852],"[",["T_CONSTANT_ENCAPSED_STRING","'COLUMN_TYPE'",3852],"]",";",["T_WHITESPACE","\n        ",3852],"}",["T_WHITESPACE","\n\n        ",3853],["T_RETURN","return",3855],["T_WHITESPACE"," ",3855],["T_VARIABLE","$ddlType",3855],";",["T_WHITESPACE","\n    ",3855],"}",["T_WHITESPACE","\n\n    ",3856],["T_DOC_COMMENT","\/**\n     * Return DDL action\n     *\n     * @param string $action\n     * @return string\n     *\/",3858],["T_WHITESPACE","\n    ",3863],["T_PROTECTED","protected",3864],["T_WHITESPACE"," ",3864],["T_FUNCTION","function",3864],["T_WHITESPACE"," ",3864],["T_STRING","_getDdlAction",3864],"(",["T_VARIABLE","$action",3864],")",["T_WHITESPACE","\n    ",3864],"{",["T_WHITESPACE","\n        ",3865],["T_SWITCH","switch",3866],["T_WHITESPACE"," ",3866],"(",["T_VARIABLE","$action",3866],")",["T_WHITESPACE"," ",3866],"{",["T_WHITESPACE","\n            ",3866],["T_CASE","case",3867],["T_WHITESPACE"," ",3867],["T_STRING","Varien_Db_Adapter_Interface",3867],["T_DOUBLE_COLON","::",3867],["T_STRING","FK_ACTION_CASCADE",3867],":",["T_WHITESPACE","\n                ",3867],["T_RETURN","return",3868],["T_WHITESPACE"," ",3868],["T_STRING","Varien_Db_Ddl_Table",3868],["T_DOUBLE_COLON","::",3868],["T_STRING","ACTION_CASCADE",3868],";",["T_WHITESPACE","\n            ",3868],["T_CASE","case",3869],["T_WHITESPACE"," ",3869],["T_STRING","Varien_Db_Adapter_Interface",3869],["T_DOUBLE_COLON","::",3869],["T_STRING","FK_ACTION_SET_NULL",3869],":",["T_WHITESPACE","\n                ",3869],["T_RETURN","return",3870],["T_WHITESPACE"," ",3870],["T_STRING","Varien_Db_Ddl_Table",3870],["T_DOUBLE_COLON","::",3870],["T_STRING","ACTION_SET_NULL",3870],";",["T_WHITESPACE","\n            ",3870],["T_CASE","case",3871],["T_WHITESPACE"," ",3871],["T_STRING","Varien_Db_Adapter_Interface",3871],["T_DOUBLE_COLON","::",3871],["T_STRING","FK_ACTION_RESTRICT",3871],":",["T_WHITESPACE","\n                ",3871],["T_RETURN","return",3872],["T_WHITESPACE"," ",3872],["T_STRING","Varien_Db_Ddl_Table",3872],["T_DOUBLE_COLON","::",3872],["T_STRING","ACTION_RESTRICT",3872],";",["T_WHITESPACE","\n            ",3872],["T_DEFAULT","default",3873],":",["T_WHITESPACE","\n                ",3873],["T_RETURN","return",3874],["T_WHITESPACE"," ",3874],["T_STRING","Varien_Db_Ddl_Table",3874],["T_DOUBLE_COLON","::",3874],["T_STRING","ACTION_NO_ACTION",3874],";",["T_WHITESPACE","\n        ",3874],"}",["T_WHITESPACE","\n    ",3875],"}",["T_WHITESPACE","\n\n    ",3876],["T_DOC_COMMENT","\/**\n     * Prepare sql date condition\n     *\n     * @param array $condition\n     * @param string $key\n     * @return string\n     *\/",3878],["T_WHITESPACE","\n    ",3884],["T_PROTECTED","protected",3885],["T_WHITESPACE"," ",3885],["T_FUNCTION","function",3885],["T_WHITESPACE"," ",3885],["T_STRING","_prepareSqlDateCondition",3885],"(",["T_VARIABLE","$condition",3885],",",["T_WHITESPACE"," ",3885],["T_VARIABLE","$key",3885],")",["T_WHITESPACE","\n    ",3885],"{",["T_WHITESPACE","\n        ",3886],["T_IF","if",3887],["T_WHITESPACE"," ",3887],"(",["T_EMPTY","empty",3887],"(",["T_VARIABLE","$condition",3887],"[",["T_CONSTANT_ENCAPSED_STRING","'date'",3887],"]",")",")",["T_WHITESPACE"," ",3887],"{",["T_WHITESPACE","\n            ",3887],["T_IF","if",3888],["T_WHITESPACE"," ",3888],"(",["T_EMPTY","empty",3888],"(",["T_VARIABLE","$condition",3888],"[",["T_CONSTANT_ENCAPSED_STRING","'datetime'",3888],"]",")",")",["T_WHITESPACE"," ",3888],"{",["T_WHITESPACE","\n                ",3888],["T_VARIABLE","$result",3889],["T_WHITESPACE"," ",3889],"=",["T_WHITESPACE"," ",3889],["T_VARIABLE","$condition",3889],"[",["T_VARIABLE","$key",3889],"]",";",["T_WHITESPACE","\n            ",3889],"}",["T_WHITESPACE"," ",3890],["T_ELSE","else",3890],["T_WHITESPACE"," ",3890],"{",["T_WHITESPACE","\n                ",3890],["T_VARIABLE","$result",3891],["T_WHITESPACE"," ",3891],"=",["T_WHITESPACE"," ",3891],["T_VARIABLE","$this",3891],["T_OBJECT_OPERATOR","->",3891],["T_STRING","formatDate",3891],"(",["T_VARIABLE","$condition",3891],"[",["T_VARIABLE","$key",3891],"]",")",";",["T_WHITESPACE","\n            ",3891],"}",["T_WHITESPACE","\n        ",3892],"}",["T_WHITESPACE"," ",3893],["T_ELSE","else",3893],["T_WHITESPACE"," ",3893],"{",["T_WHITESPACE","\n            ",3893],["T_VARIABLE","$result",3894],["T_WHITESPACE"," ",3894],"=",["T_WHITESPACE"," ",3894],["T_VARIABLE","$this",3894],["T_OBJECT_OPERATOR","->",3894],["T_STRING","formatDate",3894],"(",["T_VARIABLE","$condition",3894],"[",["T_VARIABLE","$key",3894],"]",")",";",["T_WHITESPACE","\n        ",3894],"}",["T_WHITESPACE","\n\n        ",3895],["T_RETURN","return",3897],["T_WHITESPACE"," ",3897],["T_VARIABLE","$result",3897],";",["T_WHITESPACE","\n    ",3897],"}",["T_WHITESPACE","\n\n    ",3898],["T_DOC_COMMENT","\/**\n     * Try to find installed primary key name, if not - formate new one.\n     *\n     * @param string $tableName Table name\n     * @param string $schemaName OPTIONAL\n     * @return string Primary Key name\n     *\/",3900],["T_WHITESPACE","\n    ",3906],["T_PUBLIC","public",3907],["T_WHITESPACE"," ",3907],["T_FUNCTION","function",3907],["T_WHITESPACE"," ",3907],["T_STRING","getPrimaryKeyName",3907],"(",["T_VARIABLE","$tableName",3907],",",["T_WHITESPACE"," ",3907],["T_VARIABLE","$schemaName",3907],["T_WHITESPACE"," ",3907],"=",["T_WHITESPACE"," ",3907],["T_STRING","null",3907],")",["T_WHITESPACE","\n    ",3907],"{",["T_WHITESPACE","\n        ",3908],["T_VARIABLE","$indexes",3909],["T_WHITESPACE"," ",3909],"=",["T_WHITESPACE"," ",3909],["T_VARIABLE","$this",3909],["T_OBJECT_OPERATOR","->",3909],["T_STRING","getIndexList",3909],"(",["T_VARIABLE","$tableName",3909],",",["T_WHITESPACE"," ",3909],["T_VARIABLE","$schemaName",3909],")",";",["T_WHITESPACE","\n        ",3909],["T_IF","if",3910],["T_WHITESPACE"," ",3910],"(",["T_ISSET","isset",3910],"(",["T_VARIABLE","$indexes",3910],"[",["T_CONSTANT_ENCAPSED_STRING","'PRIMARY'",3910],"]",")",")",["T_WHITESPACE"," ",3910],"{",["T_WHITESPACE","\n            ",3910],["T_RETURN","return",3911],["T_WHITESPACE"," ",3911],["T_VARIABLE","$indexes",3911],"[",["T_CONSTANT_ENCAPSED_STRING","'PRIMARY'",3911],"]","[",["T_CONSTANT_ENCAPSED_STRING","'KEY_NAME'",3911],"]",";",["T_WHITESPACE","\n        ",3911],"}",["T_WHITESPACE"," ",3912],["T_ELSE","else",3912],["T_WHITESPACE"," ",3912],"{",["T_WHITESPACE","\n            ",3912],["T_RETURN","return",3913],["T_WHITESPACE"," ",3913],["T_CONSTANT_ENCAPSED_STRING","'PK_'",3913],["T_WHITESPACE"," ",3913],".",["T_WHITESPACE"," ",3913],["T_STRING","strtoupper",3913],"(",["T_VARIABLE","$tableName",3913],")",";",["T_WHITESPACE","\n        ",3913],"}",["T_WHITESPACE","\n    ",3914],"}",["T_WHITESPACE","\n\n    ",3915],["T_DOC_COMMENT","\/**\n     * Parse text size\n     * Returns max allowed size if value great it\n     *\n     * @param string|int $size\n     * @return int\n     *\/",3917],["T_WHITESPACE","\n    ",3923],["T_PROTECTED","protected",3924],["T_WHITESPACE"," ",3924],["T_FUNCTION","function",3924],["T_WHITESPACE"," ",3924],["T_STRING","_parseTextSize",3924],"(",["T_VARIABLE","$size",3924],")",["T_WHITESPACE","\n    ",3924],"{",["T_WHITESPACE","\n        ",3925],["T_VARIABLE","$size",3926],["T_WHITESPACE"," ",3926],"=",["T_WHITESPACE"," ",3926],["T_STRING","trim",3926],"(",["T_VARIABLE","$size",3926],")",";",["T_WHITESPACE","\n        ",3926],["T_VARIABLE","$last",3927],["T_WHITESPACE"," ",3927],"=",["T_WHITESPACE"," ",3927],["T_STRING","strtolower",3927],"(",["T_STRING","substr",3927],"(",["T_VARIABLE","$size",3927],",",["T_WHITESPACE"," ",3927],"-",["T_LNUMBER","1",3927],")",")",";",["T_WHITESPACE","\n\n        ",3927],["T_SWITCH","switch",3929],["T_WHITESPACE"," ",3929],"(",["T_VARIABLE","$last",3929],")",["T_WHITESPACE"," ",3929],"{",["T_WHITESPACE","\n            ",3929],["T_CASE","case",3930],["T_WHITESPACE"," ",3930],["T_CONSTANT_ENCAPSED_STRING","'k'",3930],":",["T_WHITESPACE","\n                ",3930],["T_VARIABLE","$size",3931],["T_WHITESPACE"," ",3931],"=",["T_WHITESPACE"," ",3931],["T_STRING","intval",3931],"(",["T_VARIABLE","$size",3931],")",["T_WHITESPACE"," ",3931],"*",["T_WHITESPACE"," ",3931],["T_LNUMBER","1024",3931],";",["T_WHITESPACE","\n                ",3931],["T_BREAK","break",3932],";",["T_WHITESPACE","\n            ",3932],["T_CASE","case",3933],["T_WHITESPACE"," ",3933],["T_CONSTANT_ENCAPSED_STRING","'m'",3933],":",["T_WHITESPACE","\n                ",3933],["T_VARIABLE","$size",3934],["T_WHITESPACE"," ",3934],"=",["T_WHITESPACE"," ",3934],["T_STRING","intval",3934],"(",["T_VARIABLE","$size",3934],")",["T_WHITESPACE"," ",3934],"*",["T_WHITESPACE"," ",3934],["T_LNUMBER","1024",3934],["T_WHITESPACE"," ",3934],"*",["T_WHITESPACE"," ",3934],["T_LNUMBER","1024",3934],";",["T_WHITESPACE","\n                ",3934],["T_BREAK","break",3935],";",["T_WHITESPACE","\n            ",3935],["T_CASE","case",3936],["T_WHITESPACE"," ",3936],["T_CONSTANT_ENCAPSED_STRING","'g'",3936],":",["T_WHITESPACE","\n                ",3936],["T_VARIABLE","$size",3937],["T_WHITESPACE"," ",3937],"=",["T_WHITESPACE"," ",3937],["T_STRING","intval",3937],"(",["T_VARIABLE","$size",3937],")",["T_WHITESPACE"," ",3937],"*",["T_WHITESPACE"," ",3937],["T_LNUMBER","1024",3937],["T_WHITESPACE"," ",3937],"*",["T_WHITESPACE"," ",3937],["T_LNUMBER","1024",3937],["T_WHITESPACE"," ",3937],"*",["T_WHITESPACE"," ",3937],["T_LNUMBER","1024",3937],";",["T_WHITESPACE","\n                ",3937],["T_BREAK","break",3938],";",["T_WHITESPACE","\n        ",3938],"}",["T_WHITESPACE","\n\n        ",3939],["T_IF","if",3941],["T_WHITESPACE"," ",3941],"(",["T_EMPTY","empty",3941],"(",["T_VARIABLE","$size",3941],")",")",["T_WHITESPACE"," ",3941],"{",["T_WHITESPACE","\n            ",3941],["T_RETURN","return",3942],["T_WHITESPACE"," ",3942],["T_STRING","Varien_Db_Ddl_Table",3942],["T_DOUBLE_COLON","::",3942],["T_STRING","DEFAULT_TEXT_SIZE",3942],";",["T_WHITESPACE","\n        ",3942],"}",["T_WHITESPACE","\n        ",3943],["T_IF","if",3944],["T_WHITESPACE"," ",3944],"(",["T_VARIABLE","$size",3944],["T_WHITESPACE"," ",3944],["T_IS_GREATER_OR_EQUAL",">=",3944],["T_WHITESPACE"," ",3944],["T_STRING","Varien_Db_Ddl_Table",3944],["T_DOUBLE_COLON","::",3944],["T_STRING","MAX_TEXT_SIZE",3944],")",["T_WHITESPACE"," ",3944],"{",["T_WHITESPACE","\n            ",3944],["T_RETURN","return",3945],["T_WHITESPACE"," ",3945],["T_STRING","Varien_Db_Ddl_Table",3945],["T_DOUBLE_COLON","::",3945],["T_STRING","MAX_TEXT_SIZE",3945],";",["T_WHITESPACE","\n        ",3945],"}",["T_WHITESPACE","\n\n        ",3946],["T_RETURN","return",3948],["T_WHITESPACE"," ",3948],["T_STRING","intval",3948],"(",["T_VARIABLE","$size",3948],")",";",["T_WHITESPACE","\n    ",3948],"}",["T_WHITESPACE","\n\n    ",3949],["T_DOC_COMMENT","\/**\n     * Converts fetched blob into raw binary PHP data.\n     * The MySQL drivers do it nice, no processing required.\n     *\n     * @mixed $value\n     * @return mixed\n     *\/",3951],["T_WHITESPACE","\n    ",3957],["T_PUBLIC","public",3958],["T_WHITESPACE"," ",3958],["T_FUNCTION","function",3958],["T_WHITESPACE"," ",3958],["T_STRING","decodeVarbinary",3958],"(",["T_VARIABLE","$value",3958],")",["T_WHITESPACE","\n    ",3958],"{",["T_WHITESPACE","\n        ",3959],["T_RETURN","return",3960],["T_WHITESPACE"," ",3960],["T_VARIABLE","$value",3960],";",["T_WHITESPACE","\n    ",3960],"}",["T_WHITESPACE","\n\n\n\n\n\n    ",3961],["T_DOC_COMMENT","\/**\n     * Returns date that fits into TYPE_DATETIME range and is suggested to act as default 'zero' value\n     * for a column for current RDBMS. Deprecated and left for compatibility only.\n     * In Magento at MySQL there was zero date used for datetime columns. However, zero date it is not supported across\n     * different RDBMS. Thus now it is recommended to use same default value equal for all RDBMS - either NULL\n     * or specific date supported by all RDBMS.\n     *\n     * @deprecated after 1.5.1.0\n     * @return string\n     *\/",3967],["T_WHITESPACE","\n    ",3976],["T_PUBLIC","public",3977],["T_WHITESPACE"," ",3977],["T_FUNCTION","function",3977],["T_WHITESPACE"," ",3977],["T_STRING","getSuggestedZeroDate",3977],"(",")",["T_WHITESPACE","\n    ",3977],"{",["T_WHITESPACE","\n        ",3978],["T_RETURN","return",3979],["T_WHITESPACE"," ",3979],["T_CONSTANT_ENCAPSED_STRING","'0000-00-00 00:00:00'",3979],";",["T_WHITESPACE","\n    ",3979],"}",["T_WHITESPACE","\n\n    ",3980],["T_DOC_COMMENT","\/**\n     * Retrieve Foreign Key name\n     *\n     * @deprecated after 1.6.0.0\n     *\n     * @param  string $fkName\n     * @return string\n     *\/",3982],["T_WHITESPACE","\n    ",3989],["T_PROTECTED","protected",3990],["T_WHITESPACE"," ",3990],["T_FUNCTION","function",3990],["T_WHITESPACE"," ",3990],["T_STRING","_getForeignKeyName",3990],"(",["T_VARIABLE","$fkName",3990],")",["T_WHITESPACE","\n    ",3990],"{",["T_WHITESPACE","\n        ",3991],["T_IF","if",3992],["T_WHITESPACE"," ",3992],"(",["T_STRING","substr",3992],"(",["T_VARIABLE","$fkName",3992],",",["T_WHITESPACE"," ",3992],["T_LNUMBER","0",3992],",",["T_WHITESPACE"," ",3992],["T_LNUMBER","3",3992],")",["T_WHITESPACE"," ",3992],["T_IS_NOT_EQUAL","!=",3992],["T_WHITESPACE"," ",3992],["T_CONSTANT_ENCAPSED_STRING","'FK_'",3992],")",["T_WHITESPACE"," ",3992],"{",["T_WHITESPACE","\n            ",3992],["T_VARIABLE","$fkName",3993],["T_WHITESPACE"," ",3993],"=",["T_WHITESPACE"," ",3993],["T_CONSTANT_ENCAPSED_STRING","'FK_'",3993],["T_WHITESPACE"," ",3993],".",["T_WHITESPACE"," ",3993],["T_VARIABLE","$fkName",3993],";",["T_WHITESPACE","\n        ",3993],"}",["T_WHITESPACE","\n\n        ",3994],["T_RETURN","return",3996],["T_WHITESPACE"," ",3996],["T_VARIABLE","$fkName",3996],";",["T_WHITESPACE","\n    ",3996],"}",["T_WHITESPACE","\n\n    ",3997],["T_DOC_COMMENT","\/**\n     * Drop trigger\n     *\n     * @param string $triggerName\n     * @return Varien_Db_Adapter_Interface\n     *\/",3999],["T_WHITESPACE","\n    ",4004],["T_PUBLIC","public",4005],["T_WHITESPACE"," ",4005],["T_FUNCTION","function",4005],["T_WHITESPACE"," ",4005],["T_STRING","dropTrigger",4005],"(",["T_VARIABLE","$triggerName",4005],")",["T_WHITESPACE","\n    ",4005],"{",["T_WHITESPACE","\n        ",4006],["T_VARIABLE","$query",4007],["T_WHITESPACE"," ",4007],"=",["T_WHITESPACE"," ",4007],["T_STRING","sprintf",4007],"(",["T_WHITESPACE","\n            ",4007],["T_CONSTANT_ENCAPSED_STRING","'DROP TRIGGER IF EXISTS %s'",4008],",",["T_WHITESPACE","\n            ",4008],["T_VARIABLE","$this",4009],["T_OBJECT_OPERATOR","->",4009],["T_STRING","_getTableName",4009],"(",["T_VARIABLE","$triggerName",4009],")",["T_WHITESPACE","\n        ",4009],")",";",["T_WHITESPACE","\n        ",4010],["T_VARIABLE","$this",4011],["T_OBJECT_OPERATOR","->",4011],["T_STRING","query",4011],"(",["T_VARIABLE","$query",4011],")",";",["T_WHITESPACE","\n        ",4011],["T_RETURN","return",4012],["T_WHITESPACE"," ",4012],["T_VARIABLE","$this",4012],";",["T_WHITESPACE","\n    ",4012],"}",["T_WHITESPACE","\n\n    ",4013],["T_DOC_COMMENT","\/**\n     * Create new table from provided select statement\n     *\n     * @param string $tableName\n     * @param Zend_Db_Select $select\n     * @param bool $temporary\n     * @return mixed\n     *\/",4015],["T_WHITESPACE","\n    ",4022],["T_PUBLIC","public",4023],["T_WHITESPACE"," ",4023],["T_FUNCTION","function",4023],["T_WHITESPACE"," ",4023],["T_STRING","createTableFromSelect",4023],"(",["T_VARIABLE","$tableName",4023],",",["T_WHITESPACE"," ",4023],["T_STRING","Zend_Db_Select",4023],["T_WHITESPACE"," ",4023],["T_VARIABLE","$select",4023],",",["T_WHITESPACE"," ",4023],["T_VARIABLE","$temporary",4023],["T_WHITESPACE"," ",4023],"=",["T_WHITESPACE"," ",4023],["T_STRING","false",4023],")",["T_WHITESPACE","\n    ",4023],"{",["T_WHITESPACE","\n        ",4024],["T_VARIABLE","$query",4025],["T_WHITESPACE"," ",4025],"=",["T_WHITESPACE"," ",4025],["T_STRING","sprintf",4025],"(",["T_WHITESPACE","\n            ",4025],["T_CONSTANT_ENCAPSED_STRING","'CREATE'",4026],["T_WHITESPACE"," ",4026],".",["T_WHITESPACE"," ",4026],"(",["T_VARIABLE","$temporary",4026],["T_WHITESPACE"," ",4026],"?",["T_WHITESPACE"," ",4026],["T_CONSTANT_ENCAPSED_STRING","' TEMPORARY'",4026],["T_WHITESPACE"," ",4026],":",["T_WHITESPACE"," ",4026],["T_CONSTANT_ENCAPSED_STRING","''",4026],")",["T_WHITESPACE"," ",4026],".",["T_WHITESPACE"," ",4026],["T_CONSTANT_ENCAPSED_STRING","' TABLE `%s` AS (%s)'",4026],",",["T_WHITESPACE","\n            ",4026],["T_VARIABLE","$this",4027],["T_OBJECT_OPERATOR","->",4027],["T_STRING","_getTableName",4027],"(",["T_VARIABLE","$tableName",4027],")",",",["T_WHITESPACE","\n            ",4027],["T_STRING_CAST","(string)",4028],["T_VARIABLE","$select",4028],["T_WHITESPACE","\n        ",4028],")",";",["T_WHITESPACE","\n        ",4029],["T_VARIABLE","$this",4030],["T_OBJECT_OPERATOR","->",4030],["T_STRING","query",4030],"(",["T_VARIABLE","$query",4030],")",";",["T_WHITESPACE","\n    ",4030],"}",["T_WHITESPACE","\n\n    ",4031],["T_DOC_COMMENT","\/**\n     * Check if all transactions have been committed\n     *\/",4033],["T_WHITESPACE","\n    ",4035],["T_PUBLIC","public",4036],["T_WHITESPACE"," ",4036],["T_FUNCTION","function",4036],["T_WHITESPACE"," ",4036],["T_STRING","__destruct",4036],"(",")",["T_WHITESPACE","\n    ",4036],"{",["T_WHITESPACE","\n        ",4037],["T_IF","if",4038],["T_WHITESPACE"," ",4038],"(",["T_VARIABLE","$this",4038],["T_OBJECT_OPERATOR","->",4038],["T_STRING","_transactionLevel",4038],["T_WHITESPACE"," ",4038],">",["T_WHITESPACE"," ",4038],["T_LNUMBER","0",4038],")",["T_WHITESPACE"," ",4038],"{",["T_WHITESPACE","\n            ",4038],["T_STRING","trigger_error",4039],"(",["T_CONSTANT_ENCAPSED_STRING","'Some transactions have not been committed or rolled back'",4039],",",["T_WHITESPACE"," ",4039],["T_STRING","E_USER_ERROR",4039],")",";",["T_WHITESPACE","\n        ",4039],"}",["T_WHITESPACE","\n    ",4040],"}",["T_WHITESPACE","\n",4041],"}",["T_WHITESPACE","\n",4042]]
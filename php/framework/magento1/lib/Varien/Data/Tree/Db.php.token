[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Magento\n *\n * NOTICE OF LICENSE\n *\n * This source file is subject to the Open Software License (OSL 3.0)\n * that is bundled with this package in the file LICENSE.txt.\n * It is also available through the world-wide-web at this URL:\n * http:\/\/opensource.org\/licenses\/osl-3.0.php\n * If you did not receive a copy of the license and are unable to\n * obtain it through the world-wide-web, please send an email\n * to license@magento.com so we can send you a copy immediately.\n *\n * DISCLAIMER\n *\n * Do not edit or add to this file if you wish to upgrade Magento to newer\n * versions in the future. If you wish to customize Magento for your\n * needs please refer to http:\/\/www.magento.com for more information.\n *\n * @category    Varien\n * @package     Varien_Data\n * @copyright  Copyright (c) 2006-2016 X.commerce, Inc. and affiliates (http:\/\/www.magento.com)\n * @license    http:\/\/opensource.org\/licenses\/osl-3.0.php  Open Software License (OSL 3.0)\n *\/",2],["T_WHITESPACE","\n\n",25],["T_DOC_COMMENT","\/**\n * Data DB tree\n *\n * Data model:\n * id  |  pid  |  level | order\n *\n * @category   Varien\n * @package    Varien_Data\n * @author      Magento Core Team <core@magentocommerce.com>\n *\/",27],["T_WHITESPACE","\n",36],["T_CLASS","class",37],["T_WHITESPACE"," ",37],["T_STRING","Varien_Data_Tree_Db",37],["T_WHITESPACE"," ",37],["T_EXTENDS","extends",37],["T_WHITESPACE"," ",37],["T_STRING","Varien_Data_Tree",37],["T_WHITESPACE","\n",37],"{",["T_WHITESPACE","\n    ",38],["T_CONST","const",39],["T_WHITESPACE"," ",39],["T_STRING","ID_FIELD",39],["T_WHITESPACE","      ",39],"=",["T_WHITESPACE"," ",39],["T_CONSTANT_ENCAPSED_STRING","'id'",39],";",["T_WHITESPACE","\n    ",39],["T_CONST","const",40],["T_WHITESPACE"," ",40],["T_STRING","PARENT_FIELD",40],["T_WHITESPACE","  ",40],"=",["T_WHITESPACE"," ",40],["T_CONSTANT_ENCAPSED_STRING","'parent'",40],";",["T_WHITESPACE","\n    ",40],["T_CONST","const",41],["T_WHITESPACE"," ",41],["T_STRING","LEVEL_FIELD",41],["T_WHITESPACE","   ",41],"=",["T_WHITESPACE"," ",41],["T_CONSTANT_ENCAPSED_STRING","'level'",41],";",["T_WHITESPACE","\n    ",41],["T_CONST","const",42],["T_WHITESPACE"," ",42],["T_STRING","ORDER_FIELD",42],["T_WHITESPACE","   ",42],"=",["T_WHITESPACE"," ",42],["T_CONSTANT_ENCAPSED_STRING","'order'",42],";",["T_WHITESPACE","\n\n    ",42],["T_DOC_COMMENT","\/**\n     * DB connection\n     *\n     * @var Zend_Db_Adapter_Abstract\n     *\/",44],["T_WHITESPACE","\n    ",48],["T_PROTECTED","protected",49],["T_WHITESPACE"," ",49],["T_VARIABLE","$_conn",49],";",["T_WHITESPACE","\n\n    ",49],["T_DOC_COMMENT","\/**\n     * Data table name\n     *\n     * @var string\n     *\/",51],["T_WHITESPACE","\n    ",55],["T_PROTECTED","protected",56],["T_WHITESPACE"," ",56],["T_VARIABLE","$_table",56],";",["T_WHITESPACE","\n\n    ",56],["T_DOC_COMMENT","\/**\n     * SQL select object\n     *\n     * @var Zend_Db_Select\n     *\/",58],["T_WHITESPACE","\n    ",62],["T_PROTECTED","protected",63],["T_WHITESPACE"," ",63],["T_VARIABLE","$_select",63],";",["T_WHITESPACE","\n\n    ",63],["T_DOC_COMMENT","\/**\n     * Tree ctructure field names\n     *\n     * @var string\n     *\/",65],["T_WHITESPACE","\n    ",69],["T_PROTECTED","protected",70],["T_WHITESPACE"," ",70],["T_VARIABLE","$_idField",70],";",["T_WHITESPACE","\n    ",70],["T_PROTECTED","protected",71],["T_WHITESPACE"," ",71],["T_VARIABLE","$_parentField",71],";",["T_WHITESPACE","\n    ",71],["T_PROTECTED","protected",72],["T_WHITESPACE"," ",72],["T_VARIABLE","$_levelField",72],";",["T_WHITESPACE","\n    ",72],["T_PROTECTED","protected",73],["T_WHITESPACE"," ",73],["T_VARIABLE","$_orderField",73],";",["T_WHITESPACE","\n\n    ",73],["T_DOC_COMMENT","\/**\n     * Db tree constructor\n     *\n     * $fields = array(\n     *      Varien_Data_Tree_Db::ID_FIELD       => string,\n     *      Varien_Data_Tree_Db::PARENT_FIELD   => string,\n     *      Varien_Data_Tree_Db::LEVEL_FIELD    => string\n     *      Varien_Data_Tree_Db::ORDER_FIELD    => string\n     * )\n     *\n     * @param Zend_Db_Adapter_Abstract $connection\n     * @param string $table\n     * @param array $fields\n     *\/",75],["T_WHITESPACE","\n    ",88],["T_PUBLIC","public",89],["T_WHITESPACE"," ",89],["T_FUNCTION","function",89],["T_WHITESPACE"," ",89],["T_STRING","__construct",89],"(",["T_VARIABLE","$connection",89],",",["T_WHITESPACE"," ",89],["T_VARIABLE","$table",89],",",["T_WHITESPACE"," ",89],["T_VARIABLE","$fields",89],")",["T_WHITESPACE","\n    ",89],"{",["T_WHITESPACE","\n        ",90],["T_STRING","parent",91],["T_DOUBLE_COLON","::",91],["T_STRING","__construct",91],"(",")",";",["T_WHITESPACE","\n\n        ",91],["T_IF","if",93],["T_WHITESPACE"," ",93],"(","!",["T_VARIABLE","$connection",93],")",["T_WHITESPACE"," ",93],"{",["T_WHITESPACE","\n            ",93],["T_THROW","throw",94],["T_WHITESPACE"," ",94],["T_NEW","new",94],["T_WHITESPACE"," ",94],["T_STRING","Exception",94],"(",["T_CONSTANT_ENCAPSED_STRING","'Wrong \"$connection\" parametr'",94],")",";",["T_WHITESPACE","\n        ",94],"}",["T_WHITESPACE","\n\n        ",95],["T_VARIABLE","$this",97],["T_OBJECT_OPERATOR","->",97],["T_STRING","_conn",97],["T_WHITESPACE","    ",97],"=",["T_WHITESPACE"," ",97],["T_VARIABLE","$connection",97],";",["T_WHITESPACE","\n        ",97],["T_VARIABLE","$this",98],["T_OBJECT_OPERATOR","->",98],["T_STRING","_table",98],["T_WHITESPACE","   ",98],"=",["T_WHITESPACE"," ",98],["T_VARIABLE","$table",98],";",["T_WHITESPACE","\n\n        ",98],["T_IF","if",100],["T_WHITESPACE"," ",100],"(","!",["T_ISSET","isset",100],"(",["T_VARIABLE","$fields",100],"[",["T_STRING","self",100],["T_DOUBLE_COLON","::",100],["T_STRING","ID_FIELD",100],"]",")",["T_WHITESPACE"," ",100],["T_BOOLEAN_OR","||",100],["T_WHITESPACE","\n            ",100],"!",["T_ISSET","isset",101],"(",["T_VARIABLE","$fields",101],"[",["T_STRING","self",101],["T_DOUBLE_COLON","::",101],["T_STRING","PARENT_FIELD",101],"]",")",["T_WHITESPACE"," ",101],["T_BOOLEAN_OR","||",101],["T_WHITESPACE","\n            ",101],"!",["T_ISSET","isset",102],"(",["T_VARIABLE","$fields",102],"[",["T_STRING","self",102],["T_DOUBLE_COLON","::",102],["T_STRING","LEVEL_FIELD",102],"]",")",["T_WHITESPACE"," ",102],["T_BOOLEAN_OR","||",102],["T_WHITESPACE","\n            ",102],"!",["T_ISSET","isset",103],"(",["T_VARIABLE","$fields",103],"[",["T_STRING","self",103],["T_DOUBLE_COLON","::",103],["T_STRING","ORDER_FIELD",103],"]",")",")",["T_WHITESPACE"," ",103],"{",["T_WHITESPACE","\n\n            ",103],["T_THROW","throw",105],["T_WHITESPACE"," ",105],["T_NEW","new",105],["T_WHITESPACE"," ",105],["T_STRING","Exception",105],"(",["T_CONSTANT_ENCAPSED_STRING","'\"$fields\" tree configuratin array'",105],")",";",["T_WHITESPACE","\n        ",105],"}",["T_WHITESPACE","\n\n        ",106],["T_VARIABLE","$this",108],["T_OBJECT_OPERATOR","->",108],["T_STRING","_idField",108],["T_WHITESPACE","     ",108],"=",["T_WHITESPACE"," ",108],["T_VARIABLE","$fields",108],"[",["T_STRING","self",108],["T_DOUBLE_COLON","::",108],["T_STRING","ID_FIELD",108],"]",";",["T_WHITESPACE","\n        ",108],["T_VARIABLE","$this",109],["T_OBJECT_OPERATOR","->",109],["T_STRING","_parentField",109],["T_WHITESPACE"," ",109],"=",["T_WHITESPACE"," ",109],["T_VARIABLE","$fields",109],"[",["T_STRING","self",109],["T_DOUBLE_COLON","::",109],["T_STRING","PARENT_FIELD",109],"]",";",["T_WHITESPACE","\n        ",109],["T_VARIABLE","$this",110],["T_OBJECT_OPERATOR","->",110],["T_STRING","_levelField",110],["T_WHITESPACE","  ",110],"=",["T_WHITESPACE"," ",110],["T_VARIABLE","$fields",110],"[",["T_STRING","self",110],["T_DOUBLE_COLON","::",110],["T_STRING","LEVEL_FIELD",110],"]",";",["T_WHITESPACE","\n        ",110],["T_VARIABLE","$this",111],["T_OBJECT_OPERATOR","->",111],["T_STRING","_orderField",111],["T_WHITESPACE","  ",111],"=",["T_WHITESPACE"," ",111],["T_VARIABLE","$fields",111],"[",["T_STRING","self",111],["T_DOUBLE_COLON","::",111],["T_STRING","ORDER_FIELD",111],"]",";",["T_WHITESPACE","\n\n        ",111],["T_VARIABLE","$this",113],["T_OBJECT_OPERATOR","->",113],["T_STRING","_select",113],["T_WHITESPACE","  ",113],"=",["T_WHITESPACE"," ",113],["T_VARIABLE","$this",113],["T_OBJECT_OPERATOR","->",113],["T_STRING","_conn",113],["T_OBJECT_OPERATOR","->",113],["T_STRING","select",113],"(",")",";",["T_WHITESPACE","\n        ",113],["T_VARIABLE","$this",114],["T_OBJECT_OPERATOR","->",114],["T_STRING","_select",114],["T_OBJECT_OPERATOR","->",114],["T_STRING","from",114],"(",["T_VARIABLE","$this",114],["T_OBJECT_OPERATOR","->",114],["T_STRING","_table",114],",",["T_WHITESPACE"," ",114],["T_STRING","array_values",114],"(",["T_VARIABLE","$fields",114],")",")",";",["T_WHITESPACE","\n    ",114],"}",["T_WHITESPACE","\n\n    ",115],["T_PUBLIC","public",117],["T_WHITESPACE"," ",117],["T_FUNCTION","function",117],["T_WHITESPACE"," ",117],["T_STRING","getDbSelect",117],"(",")",["T_WHITESPACE","\n    ",117],"{",["T_WHITESPACE","\n        ",118],["T_RETURN","return",119],["T_WHITESPACE"," ",119],["T_VARIABLE","$this",119],["T_OBJECT_OPERATOR","->",119],["T_STRING","_select",119],";",["T_WHITESPACE","\n    ",119],"}",["T_WHITESPACE","\n\n    ",120],["T_PUBLIC","public",122],["T_WHITESPACE"," ",122],["T_FUNCTION","function",122],["T_WHITESPACE"," ",122],["T_STRING","setDbSelect",122],"(",["T_VARIABLE","$select",122],")",["T_WHITESPACE","\n    ",122],"{",["T_WHITESPACE","\n        ",123],["T_VARIABLE","$this",124],["T_OBJECT_OPERATOR","->",124],["T_STRING","_select",124],["T_WHITESPACE"," ",124],"=",["T_WHITESPACE"," ",124],["T_VARIABLE","$select",124],";",["T_WHITESPACE","\n    ",124],"}",["T_WHITESPACE","\n\n    ",125],["T_DOC_COMMENT","\/**\n     * Load tree\n     *\n     * @param   int || Varien_Data_Tree_Node $parentNode\n     * @param   int $recursionLevel recursion level\n     * @return  this\n     *\/",127],["T_WHITESPACE","\n    ",133],["T_PUBLIC","public",134],["T_WHITESPACE"," ",134],["T_FUNCTION","function",134],["T_WHITESPACE"," ",134],["T_STRING","load",134],"(",["T_VARIABLE","$parentNode",134],"=",["T_STRING","null",134],",",["T_WHITESPACE"," ",134],["T_VARIABLE","$recursionLevel",134],"=",["T_LNUMBER","100",134],")",["T_WHITESPACE","\n    ",134],"{",["T_WHITESPACE","\n        ",135],["T_IF","if",136],["T_WHITESPACE"," ",136],"(",["T_STRING","is_null",136],"(",["T_VARIABLE","$parentNode",136],")",")",["T_WHITESPACE"," ",136],"{",["T_WHITESPACE","\n            ",136],["T_VARIABLE","$this",137],["T_OBJECT_OPERATOR","->",137],["T_STRING","_loadFullTree",137],"(",")",";",["T_WHITESPACE","\n            ",137],["T_RETURN","return",138],["T_WHITESPACE"," ",138],["T_VARIABLE","$this",138],";",["T_WHITESPACE","\n        ",138],"}",["T_WHITESPACE","\n        ",139],["T_ELSEIF","elseif",140],["T_WHITESPACE"," ",140],"(",["T_VARIABLE","$parentNode",140],["T_WHITESPACE"," ",140],["T_INSTANCEOF","instanceof",140],["T_WHITESPACE"," ",140],["T_STRING","Varien_Data_Tree_Node",140],")",["T_WHITESPACE"," ",140],"{",["T_WHITESPACE","\n            ",140],["T_VARIABLE","$parentId",141],["T_WHITESPACE"," ",141],"=",["T_WHITESPACE"," ",141],["T_VARIABLE","$parentNode",141],["T_OBJECT_OPERATOR","->",141],["T_STRING","getId",141],"(",")",";",["T_WHITESPACE","\n        ",141],"}",["T_WHITESPACE","\n        ",142],["T_ELSEIF","elseif",143],["T_WHITESPACE"," ",143],"(",["T_STRING","is_numeric",143],"(",["T_VARIABLE","$parentNode",143],")",")",["T_WHITESPACE"," ",143],"{",["T_WHITESPACE","\n            ",143],["T_VARIABLE","$parentId",144],["T_WHITESPACE"," ",144],"=",["T_WHITESPACE"," ",144],["T_VARIABLE","$parentNode",144],";",["T_WHITESPACE","\n            ",144],["T_VARIABLE","$parentNode",145],["T_WHITESPACE"," ",145],"=",["T_WHITESPACE"," ",145],["T_STRING","null",145],";",["T_WHITESPACE","\n        ",145],"}",["T_WHITESPACE","\n        ",146],["T_ELSE","else",147],["T_WHITESPACE"," ",147],"{",["T_WHITESPACE","\n            ",147],["T_THROW","throw",148],["T_WHITESPACE"," ",148],["T_NEW","new",148],["T_WHITESPACE"," ",148],["T_STRING","Exception",148],"(",["T_CONSTANT_ENCAPSED_STRING","'root node id is not defined'",148],")",";",["T_WHITESPACE","\n        ",148],"}",["T_WHITESPACE","\n\n        ",149],["T_VARIABLE","$select",151],["T_WHITESPACE"," ",151],"=",["T_WHITESPACE"," ",151],["T_CLONE","clone",151],["T_WHITESPACE"," ",151],["T_VARIABLE","$this",151],["T_OBJECT_OPERATOR","->",151],["T_STRING","_select",151],";",["T_WHITESPACE","\n        ",151],["T_VARIABLE","$select",152],["T_OBJECT_OPERATOR","->",152],["T_STRING","order",152],"(",["T_VARIABLE","$this",152],["T_OBJECT_OPERATOR","->",152],["T_STRING","_table",152],".",["T_CONSTANT_ENCAPSED_STRING","'.'",152],".",["T_VARIABLE","$this",152],["T_OBJECT_OPERATOR","->",152],["T_STRING","_orderField",152],["T_WHITESPACE"," ",152],".",["T_WHITESPACE"," ",152],["T_CONSTANT_ENCAPSED_STRING","' ASC'",152],")",";",["T_WHITESPACE","\n        ",152],["T_VARIABLE","$condition",153],["T_WHITESPACE"," ",153],"=",["T_WHITESPACE"," ",153],["T_VARIABLE","$this",153],["T_OBJECT_OPERATOR","->",153],["T_STRING","_conn",153],["T_OBJECT_OPERATOR","->",153],["T_STRING","quoteInto",153],"(","\"",["T_VARIABLE","$this",153],["T_OBJECT_OPERATOR","->",153],["T_STRING","_table",153],["T_ENCAPSED_AND_WHITESPACE",".",153],["T_VARIABLE","$this",153],["T_OBJECT_OPERATOR","->",153],["T_STRING","_parentField",153],["T_ENCAPSED_AND_WHITESPACE","=?",153],"\"",",",["T_WHITESPACE"," ",153],["T_VARIABLE","$parentId",153],")",";",["T_WHITESPACE","\n        ",153],["T_VARIABLE","$select",154],["T_OBJECT_OPERATOR","->",154],["T_STRING","where",154],"(",["T_VARIABLE","$condition",154],")",";",["T_WHITESPACE","\n        ",154],["T_VARIABLE","$arrNodes",155],["T_WHITESPACE"," ",155],"=",["T_WHITESPACE"," ",155],["T_VARIABLE","$this",155],["T_OBJECT_OPERATOR","->",155],["T_STRING","_conn",155],["T_OBJECT_OPERATOR","->",155],["T_STRING","fetchAll",155],"(",["T_VARIABLE","$select",155],")",";",["T_WHITESPACE","\n        ",155],["T_FOREACH","foreach",156],["T_WHITESPACE"," ",156],"(",["T_VARIABLE","$arrNodes",156],["T_WHITESPACE"," ",156],["T_AS","as",156],["T_WHITESPACE"," ",156],["T_VARIABLE","$nodeInfo",156],")",["T_WHITESPACE"," ",156],"{",["T_WHITESPACE","\n            ",156],["T_VARIABLE","$node",157],["T_WHITESPACE"," ",157],"=",["T_WHITESPACE"," ",157],["T_NEW","new",157],["T_WHITESPACE"," ",157],["T_STRING","Varien_Data_Tree_Node",157],"(",["T_VARIABLE","$nodeInfo",157],",",["T_WHITESPACE"," ",157],["T_VARIABLE","$this",157],["T_OBJECT_OPERATOR","->",157],["T_STRING","_idField",157],",",["T_WHITESPACE"," ",157],["T_VARIABLE","$this",157],",",["T_WHITESPACE"," ",157],["T_VARIABLE","$parentNode",157],")",";",["T_WHITESPACE","\n            ",157],["T_VARIABLE","$this",158],["T_OBJECT_OPERATOR","->",158],["T_STRING","addNode",158],"(",["T_VARIABLE","$node",158],",",["T_WHITESPACE"," ",158],["T_VARIABLE","$parentNode",158],")",";",["T_WHITESPACE","\n\n            ",158],["T_IF","if",160],["T_WHITESPACE"," ",160],"(",["T_VARIABLE","$recursionLevel",160],")",["T_WHITESPACE"," ",160],"{",["T_WHITESPACE","\n                ",160],["T_VARIABLE","$node",161],["T_OBJECT_OPERATOR","->",161],["T_STRING","loadChildren",161],"(",["T_VARIABLE","$recursionLevel",161],"-",["T_LNUMBER","1",161],")",";",["T_WHITESPACE","\n            ",161],"}",["T_WHITESPACE","\n        ",162],"}",["T_WHITESPACE","\n        ",163],["T_RETURN","return",164],["T_WHITESPACE"," ",164],["T_VARIABLE","$this",164],";",["T_WHITESPACE","\n    ",164],"}",["T_WHITESPACE","\n\n    ",165],["T_PUBLIC","public",167],["T_WHITESPACE"," ",167],["T_FUNCTION","function",167],["T_WHITESPACE"," ",167],["T_STRING","loadNode",167],"(",["T_VARIABLE","$nodeId",167],")",["T_WHITESPACE","\n    ",167],"{",["T_WHITESPACE","\n        ",168],["T_VARIABLE","$select",169],["T_WHITESPACE"," ",169],"=",["T_WHITESPACE"," ",169],["T_CLONE","clone",169],["T_WHITESPACE"," ",169],["T_VARIABLE","$this",169],["T_OBJECT_OPERATOR","->",169],["T_STRING","_select",169],";",["T_WHITESPACE","\n        ",169],["T_VARIABLE","$condition",170],["T_WHITESPACE"," ",170],"=",["T_WHITESPACE"," ",170],["T_VARIABLE","$this",170],["T_OBJECT_OPERATOR","->",170],["T_STRING","_conn",170],["T_OBJECT_OPERATOR","->",170],["T_STRING","quoteInto",170],"(","\"",["T_VARIABLE","$this",170],["T_OBJECT_OPERATOR","->",170],["T_STRING","_table",170],["T_ENCAPSED_AND_WHITESPACE",".",170],["T_VARIABLE","$this",170],["T_OBJECT_OPERATOR","->",170],["T_STRING","_idField",170],["T_ENCAPSED_AND_WHITESPACE","=?",170],"\"",",",["T_WHITESPACE"," ",170],["T_VARIABLE","$nodeId",170],")",";",["T_WHITESPACE","\n        ",170],["T_VARIABLE","$select",171],["T_OBJECT_OPERATOR","->",171],["T_STRING","where",171],"(",["T_VARIABLE","$condition",171],")",";",["T_WHITESPACE","\n        ",171],["T_VARIABLE","$node",172],["T_WHITESPACE"," ",172],"=",["T_WHITESPACE"," ",172],["T_NEW","new",172],["T_WHITESPACE"," ",172],["T_STRING","Varien_Data_Tree_Node",172],"(",["T_VARIABLE","$this",172],["T_OBJECT_OPERATOR","->",172],["T_STRING","_conn",172],["T_OBJECT_OPERATOR","->",172],["T_STRING","fetchRow",172],"(",["T_VARIABLE","$select",172],")",",",["T_WHITESPACE"," ",172],["T_VARIABLE","$this",172],["T_OBJECT_OPERATOR","->",172],["T_STRING","_idField",172],",",["T_WHITESPACE"," ",172],["T_VARIABLE","$this",172],")",";",["T_WHITESPACE","\n        ",172],["T_VARIABLE","$this",173],["T_OBJECT_OPERATOR","->",173],["T_STRING","addNode",173],"(",["T_VARIABLE","$node",173],")",";",["T_WHITESPACE","\n        ",173],["T_RETURN","return",174],["T_WHITESPACE"," ",174],["T_VARIABLE","$node",174],";",["T_WHITESPACE","\n    ",174],"}",["T_WHITESPACE","\n\n    ",175],["T_PUBLIC","public",177],["T_WHITESPACE"," ",177],["T_FUNCTION","function",177],["T_WHITESPACE"," ",177],["T_STRING","appendChild",177],"(",["T_VARIABLE","$data",177],"=",["T_ARRAY","array",177],"(",")",",",["T_WHITESPACE"," ",177],["T_VARIABLE","$parentNode",177],",",["T_WHITESPACE"," ",177],["T_VARIABLE","$prevNode",177],"=",["T_STRING","null",177],")",["T_WHITESPACE","\n    ",177],"{",["T_WHITESPACE","\n        ",178],["T_VARIABLE","$orderSelect",179],["T_WHITESPACE"," ",179],"=",["T_WHITESPACE"," ",179],["T_VARIABLE","$this",179],["T_OBJECT_OPERATOR","->",179],["T_STRING","_conn",179],["T_OBJECT_OPERATOR","->",179],["T_STRING","select",179],"(",")",";",["T_WHITESPACE","\n        ",179],["T_VARIABLE","$orderSelect",180],["T_OBJECT_OPERATOR","->",180],["T_STRING","from",180],"(",["T_VARIABLE","$this",180],["T_OBJECT_OPERATOR","->",180],["T_STRING","_table",180],",",["T_WHITESPACE"," ",180],["T_NEW","new",180],["T_WHITESPACE"," ",180],["T_STRING","Zend_Db_Expr",180],"(",["T_CONSTANT_ENCAPSED_STRING","'MAX('",180],".",["T_VARIABLE","$this",180],["T_OBJECT_OPERATOR","->",180],["T_STRING","_conn",180],["T_OBJECT_OPERATOR","->",180],["T_STRING","quoteIdentifier",180],"(",["T_VARIABLE","$this",180],["T_OBJECT_OPERATOR","->",180],["T_STRING","_orderField",180],")",".",["T_CONSTANT_ENCAPSED_STRING","')'",180],")",")",["T_WHITESPACE","\n            ",180],["T_OBJECT_OPERATOR","->",181],["T_STRING","where",181],"(",["T_VARIABLE","$this",181],["T_OBJECT_OPERATOR","->",181],["T_STRING","_conn",181],["T_OBJECT_OPERATOR","->",181],["T_STRING","quoteIdentifier",181],"(",["T_VARIABLE","$this",181],["T_OBJECT_OPERATOR","->",181],["T_STRING","_parentField",181],")",".",["T_CONSTANT_ENCAPSED_STRING","'='",181],".",["T_VARIABLE","$parentNode",181],["T_OBJECT_OPERATOR","->",181],["T_STRING","getId",181],"(",")",")",";",["T_WHITESPACE","\n\n        ",181],["T_VARIABLE","$order",183],["T_WHITESPACE"," ",183],"=",["T_WHITESPACE"," ",183],["T_VARIABLE","$this",183],["T_OBJECT_OPERATOR","->",183],["T_STRING","_conn",183],["T_OBJECT_OPERATOR","->",183],["T_STRING","fetchOne",183],"(",["T_VARIABLE","$orderSelect",183],")",";",["T_WHITESPACE","\n        ",183],["T_VARIABLE","$data",184],"[",["T_VARIABLE","$this",184],["T_OBJECT_OPERATOR","->",184],["T_STRING","_parentField",184],"]",["T_WHITESPACE"," ",184],"=",["T_WHITESPACE"," ",184],["T_VARIABLE","$parentNode",184],["T_OBJECT_OPERATOR","->",184],["T_STRING","getId",184],"(",")",";",["T_WHITESPACE","\n        ",184],["T_VARIABLE","$data",185],"[",["T_VARIABLE","$this",185],["T_OBJECT_OPERATOR","->",185],["T_STRING","_levelField",185],"]",["T_WHITESPACE","  ",185],"=",["T_WHITESPACE"," ",185],["T_VARIABLE","$parentNode",185],["T_OBJECT_OPERATOR","->",185],["T_STRING","getData",185],"(",["T_VARIABLE","$this",185],["T_OBJECT_OPERATOR","->",185],["T_STRING","_levelField",185],")","+",["T_LNUMBER","1",185],";",["T_WHITESPACE","\n        ",185],["T_VARIABLE","$data",186],"[",["T_VARIABLE","$this",186],["T_OBJECT_OPERATOR","->",186],["T_STRING","_orderField",186],"]",["T_WHITESPACE","  ",186],"=",["T_WHITESPACE"," ",186],["T_VARIABLE","$order",186],"+",["T_LNUMBER","1",186],";",["T_WHITESPACE","\n\n        ",186],["T_VARIABLE","$this",188],["T_OBJECT_OPERATOR","->",188],["T_STRING","_conn",188],["T_OBJECT_OPERATOR","->",188],["T_STRING","insert",188],"(",["T_VARIABLE","$this",188],["T_OBJECT_OPERATOR","->",188],["T_STRING","_table",188],",",["T_WHITESPACE"," ",188],["T_VARIABLE","$data",188],")",";",["T_WHITESPACE","\n        ",188],["T_VARIABLE","$data",189],"[",["T_VARIABLE","$this",189],["T_OBJECT_OPERATOR","->",189],["T_STRING","_idField",189],"]",["T_WHITESPACE"," ",189],"=",["T_WHITESPACE"," ",189],["T_VARIABLE","$this",189],["T_OBJECT_OPERATOR","->",189],["T_STRING","_conn",189],["T_OBJECT_OPERATOR","->",189],["T_STRING","lastInsertId",189],"(",")",";",["T_WHITESPACE","\n\n        ",189],["T_RETURN","return",191],["T_WHITESPACE"," ",191],["T_STRING","parent",191],["T_DOUBLE_COLON","::",191],["T_STRING","appendChild",191],"(",["T_VARIABLE","$data",191],",",["T_WHITESPACE"," ",191],["T_VARIABLE","$parentNode",191],",",["T_WHITESPACE"," ",191],["T_VARIABLE","$prevNode",191],")",";",["T_WHITESPACE","\n    ",191],"}",["T_WHITESPACE","\n\n    ",192],["T_DOC_COMMENT","\/**\n     * Move tree node\n     *\n     * @param Varien_Data_Tree_Node $node\n     * @param Varien_Data_Tree_Node $parentNode\n     * @param Varien_Data_Tree_Node $prevNode\n     *\/",194],["T_WHITESPACE","\n    ",200],["T_PUBLIC","public",201],["T_WHITESPACE"," ",201],["T_FUNCTION","function",201],["T_WHITESPACE"," ",201],["T_STRING","moveNodeTo",201],"(",["T_VARIABLE","$node",201],",",["T_WHITESPACE"," ",201],["T_VARIABLE","$parentNode",201],",",["T_WHITESPACE"," ",201],["T_VARIABLE","$prevNode",201],"=",["T_STRING","null",201],")",["T_WHITESPACE","\n    ",201],"{",["T_WHITESPACE","\n        ",202],["T_VARIABLE","$data",203],["T_WHITESPACE"," ",203],"=",["T_WHITESPACE"," ",203],["T_ARRAY","array",203],"(",")",";",["T_WHITESPACE","\n        ",203],["T_VARIABLE","$data",204],"[",["T_VARIABLE","$this",204],["T_OBJECT_OPERATOR","->",204],["T_STRING","_parentField",204],"]",["T_WHITESPACE","  ",204],"=",["T_WHITESPACE"," ",204],["T_VARIABLE","$parentNode",204],["T_OBJECT_OPERATOR","->",204],["T_STRING","getId",204],"(",")",";",["T_WHITESPACE","\n        ",204],["T_VARIABLE","$data",205],"[",["T_VARIABLE","$this",205],["T_OBJECT_OPERATOR","->",205],["T_STRING","_levelField",205],"]",["T_WHITESPACE","   ",205],"=",["T_WHITESPACE"," ",205],["T_VARIABLE","$parentNode",205],["T_OBJECT_OPERATOR","->",205],["T_STRING","getData",205],"(",["T_VARIABLE","$this",205],["T_OBJECT_OPERATOR","->",205],["T_STRING","_levelField",205],")","+",["T_LNUMBER","1",205],";",["T_WHITESPACE","\n        ",205],["T_COMMENT","\/\/ New node order\n",206],["T_WHITESPACE","        ",207],["T_IF","if",207],["T_WHITESPACE"," ",207],"(",["T_STRING","is_null",207],"(",["T_VARIABLE","$prevNode",207],")",["T_WHITESPACE"," ",207],["T_BOOLEAN_OR","||",207],["T_WHITESPACE"," ",207],["T_STRING","is_null",207],"(",["T_VARIABLE","$prevNode",207],["T_OBJECT_OPERATOR","->",207],["T_STRING","getData",207],"(",["T_VARIABLE","$this",207],["T_OBJECT_OPERATOR","->",207],["T_STRING","_orderField",207],")",")",")",["T_WHITESPACE"," ",207],"{",["T_WHITESPACE","\n            ",207],["T_VARIABLE","$data",208],"[",["T_VARIABLE","$this",208],["T_OBJECT_OPERATOR","->",208],["T_STRING","_orderField",208],"]",["T_WHITESPACE"," ",208],"=",["T_WHITESPACE"," ",208],["T_LNUMBER","1",208],";",["T_WHITESPACE","\n        ",208],"}",["T_WHITESPACE","\n        ",209],["T_ELSE","else",210],["T_WHITESPACE"," ",210],"{",["T_WHITESPACE","\n            ",210],["T_VARIABLE","$data",211],"[",["T_VARIABLE","$this",211],["T_OBJECT_OPERATOR","->",211],["T_STRING","_orderField",211],"]",["T_WHITESPACE"," ",211],"=",["T_WHITESPACE"," ",211],["T_VARIABLE","$prevNode",211],["T_OBJECT_OPERATOR","->",211],["T_STRING","getData",211],"(",["T_VARIABLE","$this",211],["T_OBJECT_OPERATOR","->",211],["T_STRING","_orderField",211],")","+",["T_LNUMBER","1",211],";",["T_WHITESPACE","\n        ",211],"}",["T_WHITESPACE","\n        ",212],["T_VARIABLE","$condition",213],["T_WHITESPACE"," ",213],"=",["T_WHITESPACE"," ",213],["T_VARIABLE","$this",213],["T_OBJECT_OPERATOR","->",213],["T_STRING","_conn",213],["T_OBJECT_OPERATOR","->",213],["T_STRING","quoteInto",213],"(","\"",["T_VARIABLE","$this",213],["T_OBJECT_OPERATOR","->",213],["T_STRING","_idField",213],["T_ENCAPSED_AND_WHITESPACE","=?",213],"\"",",",["T_WHITESPACE"," ",213],["T_VARIABLE","$node",213],["T_OBJECT_OPERATOR","->",213],["T_STRING","getId",213],"(",")",")",";",["T_WHITESPACE","\n\n        ",213],["T_COMMENT","\/\/ For reorder new node branch\n",215],["T_WHITESPACE","        ",216],["T_VARIABLE","$dataReorderNew",216],["T_WHITESPACE"," ",216],"=",["T_WHITESPACE"," ",216],["T_ARRAY","array",216],"(",["T_WHITESPACE","\n            ",216],["T_VARIABLE","$this",217],["T_OBJECT_OPERATOR","->",217],["T_STRING","_orderField",217],["T_WHITESPACE"," ",217],["T_DOUBLE_ARROW","=>",217],["T_WHITESPACE"," ",217],["T_NEW","new",217],["T_WHITESPACE"," ",217],["T_STRING","Zend_Db_Expr",217],"(",["T_VARIABLE","$this",217],["T_OBJECT_OPERATOR","->",217],["T_STRING","_conn",217],["T_OBJECT_OPERATOR","->",217],["T_STRING","quoteIdentifier",217],"(",["T_VARIABLE","$this",217],["T_OBJECT_OPERATOR","->",217],["T_STRING","_orderField",217],")",".",["T_CONSTANT_ENCAPSED_STRING","'+1'",217],")",["T_WHITESPACE","\n        ",217],")",";",["T_WHITESPACE","\n        ",218],["T_VARIABLE","$conditionReorderNew",219],["T_WHITESPACE"," ",219],"=",["T_WHITESPACE"," ",219],["T_VARIABLE","$this",219],["T_OBJECT_OPERATOR","->",219],["T_STRING","_conn",219],["T_OBJECT_OPERATOR","->",219],["T_STRING","quoteIdentifier",219],"(",["T_VARIABLE","$this",219],["T_OBJECT_OPERATOR","->",219],["T_STRING","_parentField",219],")",".",["T_CONSTANT_ENCAPSED_STRING","'='",219],".",["T_VARIABLE","$parentNode",219],["T_OBJECT_OPERATOR","->",219],["T_STRING","getId",219],"(",")",".",["T_WHITESPACE","\n                            ",219],["T_CONSTANT_ENCAPSED_STRING","' AND '",220],".",["T_VARIABLE","$this",220],["T_OBJECT_OPERATOR","->",220],["T_STRING","_conn",220],["T_OBJECT_OPERATOR","->",220],["T_STRING","quoteIdentifier",220],"(",["T_VARIABLE","$this",220],["T_OBJECT_OPERATOR","->",220],["T_STRING","_orderField",220],")",".",["T_CONSTANT_ENCAPSED_STRING","'>='",220],".",["T_WHITESPACE"," ",220],["T_VARIABLE","$data",220],"[",["T_VARIABLE","$this",220],["T_OBJECT_OPERATOR","->",220],["T_STRING","_orderField",220],"]",";",["T_WHITESPACE","\n\n        ",220],["T_COMMENT","\/\/ For reorder old node branch\n",222],["T_WHITESPACE","        ",223],["T_VARIABLE","$dataReorderOld",223],["T_WHITESPACE"," ",223],"=",["T_WHITESPACE"," ",223],["T_ARRAY","array",223],"(",["T_WHITESPACE","\n            ",223],["T_VARIABLE","$this",224],["T_OBJECT_OPERATOR","->",224],["T_STRING","_orderField",224],["T_WHITESPACE"," ",224],["T_DOUBLE_ARROW","=>",224],["T_WHITESPACE"," ",224],["T_NEW","new",224],["T_WHITESPACE"," ",224],["T_STRING","Zend_Db_Expr",224],"(",["T_VARIABLE","$this",224],["T_OBJECT_OPERATOR","->",224],["T_STRING","_conn",224],["T_OBJECT_OPERATOR","->",224],["T_STRING","quoteIdentifier",224],"(",["T_VARIABLE","$this",224],["T_OBJECT_OPERATOR","->",224],["T_STRING","_orderField",224],")",".",["T_CONSTANT_ENCAPSED_STRING","'-1'",224],")",["T_WHITESPACE","\n        ",224],")",";",["T_WHITESPACE","\n        ",225],["T_VARIABLE","$conditionReorderOld",226],["T_WHITESPACE"," ",226],"=",["T_WHITESPACE"," ",226],["T_VARIABLE","$this",226],["T_OBJECT_OPERATOR","->",226],["T_STRING","_conn",226],["T_OBJECT_OPERATOR","->",226],["T_STRING","quoteIdentifier",226],"(",["T_VARIABLE","$this",226],["T_OBJECT_OPERATOR","->",226],["T_STRING","_parentField",226],")",".",["T_CONSTANT_ENCAPSED_STRING","'='",226],".",["T_VARIABLE","$node",226],["T_OBJECT_OPERATOR","->",226],["T_STRING","getData",226],"(",["T_VARIABLE","$this",226],["T_OBJECT_OPERATOR","->",226],["T_STRING","_parentField",226],")",".",["T_WHITESPACE","\n                            ",226],["T_CONSTANT_ENCAPSED_STRING","' AND '",227],".",["T_VARIABLE","$this",227],["T_OBJECT_OPERATOR","->",227],["T_STRING","_conn",227],["T_OBJECT_OPERATOR","->",227],["T_STRING","quoteIdentifier",227],"(",["T_VARIABLE","$this",227],["T_OBJECT_OPERATOR","->",227],["T_STRING","_orderField",227],")",".",["T_CONSTANT_ENCAPSED_STRING","'>'",227],".",["T_VARIABLE","$node",227],["T_OBJECT_OPERATOR","->",227],["T_STRING","getData",227],"(",["T_VARIABLE","$this",227],["T_OBJECT_OPERATOR","->",227],["T_STRING","_orderField",227],")",";",["T_WHITESPACE","\n\n        ",227],["T_VARIABLE","$this",229],["T_OBJECT_OPERATOR","->",229],["T_STRING","_conn",229],["T_OBJECT_OPERATOR","->",229],["T_STRING","beginTransaction",229],"(",")",";",["T_WHITESPACE","\n        ",229],["T_TRY","try",230],["T_WHITESPACE"," ",230],"{",["T_WHITESPACE","\n            ",230],["T_COMMENT","\/\/ Prepare new node branch\n",231],["T_WHITESPACE","            ",232],["T_VARIABLE","$this",232],["T_OBJECT_OPERATOR","->",232],["T_STRING","_conn",232],["T_OBJECT_OPERATOR","->",232],["T_STRING","update",232],"(",["T_VARIABLE","$this",232],["T_OBJECT_OPERATOR","->",232],["T_STRING","_table",232],",",["T_WHITESPACE"," ",232],["T_VARIABLE","$dataReorderNew",232],",",["T_WHITESPACE"," ",232],["T_VARIABLE","$conditionReorderNew",232],")",";",["T_WHITESPACE","\n            ",232],["T_COMMENT","\/\/ Move node\n",233],["T_WHITESPACE","            ",234],["T_VARIABLE","$this",234],["T_OBJECT_OPERATOR","->",234],["T_STRING","_conn",234],["T_OBJECT_OPERATOR","->",234],["T_STRING","update",234],"(",["T_VARIABLE","$this",234],["T_OBJECT_OPERATOR","->",234],["T_STRING","_table",234],",",["T_WHITESPACE"," ",234],["T_VARIABLE","$data",234],",",["T_WHITESPACE"," ",234],["T_VARIABLE","$condition",234],")",";",["T_WHITESPACE","\n            ",234],["T_COMMENT","\/\/ Update old node branch\n",235],["T_WHITESPACE","            ",236],["T_VARIABLE","$this",236],["T_OBJECT_OPERATOR","->",236],["T_STRING","_conn",236],["T_OBJECT_OPERATOR","->",236],["T_STRING","update",236],"(",["T_VARIABLE","$this",236],["T_OBJECT_OPERATOR","->",236],["T_STRING","_table",236],",",["T_WHITESPACE"," ",236],["T_VARIABLE","$dataReorderOld",236],",",["T_WHITESPACE"," ",236],["T_VARIABLE","$conditionReorderOld",236],")",";",["T_WHITESPACE","\n            ",236],["T_VARIABLE","$this",237],["T_OBJECT_OPERATOR","->",237],["T_STRING","_updateChildLevels",237],"(",["T_VARIABLE","$node",237],["T_OBJECT_OPERATOR","->",237],["T_STRING","getId",237],"(",")",",",["T_WHITESPACE"," ",237],["T_VARIABLE","$data",237],"[",["T_VARIABLE","$this",237],["T_OBJECT_OPERATOR","->",237],["T_STRING","_levelField",237],"]",")",";",["T_WHITESPACE","\n            ",237],["T_VARIABLE","$this",238],["T_OBJECT_OPERATOR","->",238],["T_STRING","_conn",238],["T_OBJECT_OPERATOR","->",238],["T_STRING","commit",238],"(",")",";",["T_WHITESPACE","\n        ",238],"}",["T_WHITESPACE","\n        ",239],["T_CATCH","catch",240],["T_WHITESPACE"," ",240],"(",["T_STRING","Exception",240],["T_WHITESPACE"," ",240],["T_VARIABLE","$e",240],")","{",["T_WHITESPACE","\n            ",240],["T_VARIABLE","$this",241],["T_OBJECT_OPERATOR","->",241],["T_STRING","_conn",241],["T_OBJECT_OPERATOR","->",241],["T_STRING","rollBack",241],"(",")",";",["T_WHITESPACE","\n            ",241],["T_THROW","throw",242],["T_WHITESPACE"," ",242],["T_NEW","new",242],["T_WHITESPACE"," ",242],["T_STRING","Exception",242],"(",["T_CONSTANT_ENCAPSED_STRING","'Can\\'t move tree node'",242],")",";",["T_WHITESPACE","\n        ",242],"}",["T_WHITESPACE","\n    ",243],"}",["T_WHITESPACE","\n\n    ",244],["T_PROTECTED","protected",246],["T_WHITESPACE"," ",246],["T_FUNCTION","function",246],["T_WHITESPACE"," ",246],["T_STRING","_updateChildLevels",246],"(",["T_VARIABLE","$parentId",246],",",["T_WHITESPACE"," ",246],["T_VARIABLE","$parentLevel",246],")",["T_WHITESPACE","\n    ",246],"{",["T_WHITESPACE","\n        ",247],["T_VARIABLE","$select",248],["T_WHITESPACE"," ",248],"=",["T_WHITESPACE"," ",248],["T_VARIABLE","$this",248],["T_OBJECT_OPERATOR","->",248],["T_STRING","_conn",248],["T_OBJECT_OPERATOR","->",248],["T_STRING","select",248],"(",")",["T_WHITESPACE","\n            ",248],["T_OBJECT_OPERATOR","->",249],["T_STRING","from",249],"(",["T_VARIABLE","$this",249],["T_OBJECT_OPERATOR","->",249],["T_STRING","_table",249],",",["T_WHITESPACE"," ",249],["T_VARIABLE","$this",249],["T_OBJECT_OPERATOR","->",249],["T_STRING","_idField",249],")",["T_WHITESPACE","\n            ",249],["T_OBJECT_OPERATOR","->",250],["T_STRING","where",250],"(",["T_VARIABLE","$this",250],["T_OBJECT_OPERATOR","->",250],["T_STRING","_parentField",250],".",["T_CONSTANT_ENCAPSED_STRING","'=?'",250],",",["T_WHITESPACE"," ",250],["T_VARIABLE","$parentId",250],")",";",["T_WHITESPACE","\n        ",250],["T_VARIABLE","$ids",251],["T_WHITESPACE"," ",251],"=",["T_WHITESPACE"," ",251],["T_VARIABLE","$this",251],["T_OBJECT_OPERATOR","->",251],["T_STRING","_conn",251],["T_OBJECT_OPERATOR","->",251],["T_STRING","fetchCol",251],"(",["T_VARIABLE","$select",251],")",";",["T_WHITESPACE","\n\n        ",251],["T_IF","if",253],["T_WHITESPACE"," ",253],"(","!",["T_EMPTY","empty",253],"(",["T_VARIABLE","$ids",253],")",")",["T_WHITESPACE"," ",253],"{",["T_WHITESPACE","\n            ",253],["T_VARIABLE","$this",254],["T_OBJECT_OPERATOR","->",254],["T_STRING","_conn",254],["T_OBJECT_OPERATOR","->",254],["T_STRING","update",254],"(",["T_VARIABLE","$this",254],["T_OBJECT_OPERATOR","->",254],["T_STRING","_table",254],",",["T_WHITESPACE","\n                ",254],["T_ARRAY","array",255],"(",["T_VARIABLE","$this",255],["T_OBJECT_OPERATOR","->",255],["T_STRING","_levelField",255],["T_DOUBLE_ARROW","=>",255],["T_VARIABLE","$parentLevel",255],"+",["T_LNUMBER","1",255],")",",",["T_WHITESPACE","\n                ",255],["T_VARIABLE","$this",256],["T_OBJECT_OPERATOR","->",256],["T_STRING","_conn",256],["T_OBJECT_OPERATOR","->",256],["T_STRING","quoteInto",256],"(",["T_VARIABLE","$this",256],["T_OBJECT_OPERATOR","->",256],["T_STRING","_idField",256],".",["T_CONSTANT_ENCAPSED_STRING","' IN (?)'",256],",",["T_WHITESPACE"," ",256],["T_VARIABLE","$ids",256],")",")",";",["T_WHITESPACE","\n            ",256],["T_FOREACH","foreach",257],["T_WHITESPACE"," ",257],"(",["T_VARIABLE","$ids",257],["T_WHITESPACE"," ",257],["T_AS","as",257],["T_WHITESPACE"," ",257],["T_VARIABLE","$id",257],")",["T_WHITESPACE"," ",257],"{",["T_WHITESPACE","\n                ",257],["T_VARIABLE","$this",258],["T_OBJECT_OPERATOR","->",258],["T_STRING","_updateChildLevels",258],"(",["T_VARIABLE","$id",258],",",["T_WHITESPACE"," ",258],["T_VARIABLE","$parentLevel",258],"+",["T_LNUMBER","1",258],")",";",["T_WHITESPACE","\n            ",258],"}",["T_WHITESPACE","\n        ",259],"}",["T_WHITESPACE","\n        ",260],["T_RETURN","return",261],["T_WHITESPACE"," ",261],["T_VARIABLE","$this",261],";",["T_WHITESPACE","\n    ",261],"}",["T_WHITESPACE","\n\n    ",262],["T_PROTECTED","protected",264],["T_WHITESPACE"," ",264],["T_FUNCTION","function",264],["T_WHITESPACE"," ",264],["T_STRING","_loadFullTree",264],"(",")",["T_WHITESPACE","\n    ",264],"{",["T_WHITESPACE","\n        ",265],["T_VARIABLE","$select",266],["T_WHITESPACE"," ",266],"=",["T_WHITESPACE"," ",266],["T_CLONE","clone",266],["T_WHITESPACE"," ",266],["T_VARIABLE","$this",266],["T_OBJECT_OPERATOR","->",266],["T_STRING","_select",266],";",["T_WHITESPACE","\n        ",266],["T_VARIABLE","$select",267],["T_OBJECT_OPERATOR","->",267],["T_STRING","order",267],"(",["T_VARIABLE","$this",267],["T_OBJECT_OPERATOR","->",267],["T_STRING","_table",267],["T_WHITESPACE"," ",267],".",["T_WHITESPACE"," ",267],["T_CONSTANT_ENCAPSED_STRING","'.'",267],["T_WHITESPACE"," ",267],".",["T_WHITESPACE"," ",267],["T_VARIABLE","$this",267],["T_OBJECT_OPERATOR","->",267],["T_STRING","_levelField",267],")",["T_WHITESPACE","\n            ",267],["T_OBJECT_OPERATOR","->",268],["T_STRING","order",268],"(",["T_VARIABLE","$this",268],["T_OBJECT_OPERATOR","->",268],["T_STRING","_table",268],".",["T_CONSTANT_ENCAPSED_STRING","'.'",268],".",["T_VARIABLE","$this",268],["T_OBJECT_OPERATOR","->",268],["T_STRING","_orderField",268],")",";",["T_WHITESPACE","\n\n        ",268],["T_VARIABLE","$arrNodes",270],["T_WHITESPACE"," ",270],"=",["T_WHITESPACE"," ",270],["T_VARIABLE","$this",270],["T_OBJECT_OPERATOR","->",270],["T_STRING","_conn",270],["T_OBJECT_OPERATOR","->",270],["T_STRING","fetchAll",270],"(",["T_VARIABLE","$select",270],")",";",["T_WHITESPACE","\n\n        ",270],["T_FOREACH","foreach",272],["T_WHITESPACE"," ",272],"(",["T_VARIABLE","$arrNodes",272],["T_WHITESPACE"," ",272],["T_AS","as",272],["T_WHITESPACE"," ",272],["T_VARIABLE","$nodeInfo",272],")",["T_WHITESPACE"," ",272],"{",["T_WHITESPACE","\n            ",272],["T_VARIABLE","$node",273],["T_WHITESPACE"," ",273],"=",["T_WHITESPACE"," ",273],["T_NEW","new",273],["T_WHITESPACE"," ",273],["T_STRING","Varien_Data_Tree_Node",273],"(",["T_VARIABLE","$nodeInfo",273],",",["T_WHITESPACE"," ",273],["T_VARIABLE","$this",273],["T_OBJECT_OPERATOR","->",273],["T_STRING","_idField",273],",",["T_WHITESPACE"," ",273],["T_VARIABLE","$this",273],")",";",["T_WHITESPACE","\n            ",273],["T_VARIABLE","$parentNode",274],["T_WHITESPACE"," ",274],"=",["T_WHITESPACE"," ",274],["T_VARIABLE","$this",274],["T_OBJECT_OPERATOR","->",274],["T_STRING","getNodeById",274],"(",["T_VARIABLE","$nodeInfo",274],"[",["T_VARIABLE","$this",274],["T_OBJECT_OPERATOR","->",274],["T_STRING","_parentField",274],"]",")",";",["T_WHITESPACE","\n            ",274],["T_VARIABLE","$this",275],["T_OBJECT_OPERATOR","->",275],["T_STRING","addNode",275],"(",["T_VARIABLE","$node",275],",",["T_WHITESPACE"," ",275],["T_VARIABLE","$parentNode",275],")",";",["T_WHITESPACE","\n        ",275],"}",["T_WHITESPACE","\n\n        ",276],["T_RETURN","return",278],["T_WHITESPACE"," ",278],["T_VARIABLE","$this",278],";",["T_WHITESPACE","\n    ",278],"}",["T_WHITESPACE","\n\n    ",279],["T_PUBLIC","public",281],["T_WHITESPACE"," ",281],["T_FUNCTION","function",281],["T_WHITESPACE"," ",281],["T_STRING","removeNode",281],"(",["T_VARIABLE","$node",281],")",["T_WHITESPACE","\n    ",281],"{",["T_WHITESPACE","\n        ",282],["T_COMMENT","\/\/ For reorder old node branch\n",283],["T_WHITESPACE","        ",284],["T_VARIABLE","$dataReorderOld",284],["T_WHITESPACE"," ",284],"=",["T_WHITESPACE"," ",284],["T_ARRAY","array",284],"(",["T_WHITESPACE","\n            ",284],["T_VARIABLE","$this",285],["T_OBJECT_OPERATOR","->",285],["T_STRING","_orderField",285],["T_WHITESPACE"," ",285],["T_DOUBLE_ARROW","=>",285],["T_WHITESPACE"," ",285],["T_NEW","new",285],["T_WHITESPACE"," ",285],["T_STRING","Zend_Db_Expr",285],"(",["T_VARIABLE","$this",285],["T_OBJECT_OPERATOR","->",285],["T_STRING","_conn",285],["T_OBJECT_OPERATOR","->",285],["T_STRING","quoteIdentifier",285],"(",["T_VARIABLE","$this",285],["T_OBJECT_OPERATOR","->",285],["T_STRING","_orderField",285],")",".",["T_CONSTANT_ENCAPSED_STRING","'-1'",285],")",["T_WHITESPACE","\n        ",285],")",";",["T_WHITESPACE","\n        ",286],["T_VARIABLE","$conditionReorderOld",287],["T_WHITESPACE"," ",287],"=",["T_WHITESPACE"," ",287],["T_VARIABLE","$this",287],["T_OBJECT_OPERATOR","->",287],["T_STRING","_conn",287],["T_OBJECT_OPERATOR","->",287],["T_STRING","quoteIdentifier",287],"(",["T_VARIABLE","$this",287],["T_OBJECT_OPERATOR","->",287],["T_STRING","_parentField",287],")",".",["T_CONSTANT_ENCAPSED_STRING","'='",287],".",["T_VARIABLE","$node",287],["T_OBJECT_OPERATOR","->",287],["T_STRING","getData",287],"(",["T_VARIABLE","$this",287],["T_OBJECT_OPERATOR","->",287],["T_STRING","_parentField",287],")",".",["T_WHITESPACE","\n                            ",287],["T_CONSTANT_ENCAPSED_STRING","' AND '",288],".",["T_VARIABLE","$this",288],["T_OBJECT_OPERATOR","->",288],["T_STRING","_conn",288],["T_OBJECT_OPERATOR","->",288],["T_STRING","quoteIdentifier",288],"(",["T_VARIABLE","$this",288],["T_OBJECT_OPERATOR","->",288],["T_STRING","_orderField",288],")",".",["T_CONSTANT_ENCAPSED_STRING","'>'",288],".",["T_VARIABLE","$node",288],["T_OBJECT_OPERATOR","->",288],["T_STRING","getData",288],"(",["T_VARIABLE","$this",288],["T_OBJECT_OPERATOR","->",288],["T_STRING","_orderField",288],")",";",["T_WHITESPACE","\n\n        ",288],["T_VARIABLE","$this",290],["T_OBJECT_OPERATOR","->",290],["T_STRING","_conn",290],["T_OBJECT_OPERATOR","->",290],["T_STRING","beginTransaction",290],"(",")",";",["T_WHITESPACE","\n        ",290],["T_TRY","try",291],["T_WHITESPACE"," ",291],"{",["T_WHITESPACE","\n            ",291],["T_VARIABLE","$condition",292],["T_WHITESPACE"," ",292],"=",["T_WHITESPACE"," ",292],["T_VARIABLE","$this",292],["T_OBJECT_OPERATOR","->",292],["T_STRING","_conn",292],["T_OBJECT_OPERATOR","->",292],["T_STRING","quoteInto",292],"(","\"",["T_VARIABLE","$this",292],["T_OBJECT_OPERATOR","->",292],["T_STRING","_idField",292],["T_ENCAPSED_AND_WHITESPACE","=?",292],"\"",",",["T_WHITESPACE"," ",292],["T_VARIABLE","$node",292],["T_OBJECT_OPERATOR","->",292],["T_STRING","getId",292],"(",")",")",";",["T_WHITESPACE","\n            ",292],["T_VARIABLE","$this",293],["T_OBJECT_OPERATOR","->",293],["T_STRING","_conn",293],["T_OBJECT_OPERATOR","->",293],["T_STRING","delete",293],"(",["T_VARIABLE","$this",293],["T_OBJECT_OPERATOR","->",293],["T_STRING","_table",293],",",["T_WHITESPACE"," ",293],["T_VARIABLE","$condition",293],")",";",["T_WHITESPACE","\n            ",293],["T_COMMENT","\/\/ Update old node branch\n",294],["T_WHITESPACE","            ",295],["T_VARIABLE","$this",295],["T_OBJECT_OPERATOR","->",295],["T_STRING","_conn",295],["T_OBJECT_OPERATOR","->",295],["T_STRING","update",295],"(",["T_VARIABLE","$this",295],["T_OBJECT_OPERATOR","->",295],["T_STRING","_table",295],",",["T_WHITESPACE"," ",295],["T_VARIABLE","$dataReorderOld",295],",",["T_WHITESPACE"," ",295],["T_VARIABLE","$conditionReorderOld",295],")",";",["T_WHITESPACE","\n            ",295],["T_VARIABLE","$this",296],["T_OBJECT_OPERATOR","->",296],["T_STRING","_conn",296],["T_OBJECT_OPERATOR","->",296],["T_STRING","commit",296],"(",")",";",["T_WHITESPACE","\n        ",296],"}",["T_WHITESPACE","\n        ",297],["T_CATCH","catch",298],["T_WHITESPACE"," ",298],"(",["T_STRING","Exception",298],["T_WHITESPACE"," ",298],["T_VARIABLE","$e",298],")","{",["T_WHITESPACE","\n            ",298],["T_VARIABLE","$this",299],["T_OBJECT_OPERATOR","->",299],["T_STRING","_conn",299],["T_OBJECT_OPERATOR","->",299],["T_STRING","rollBack",299],"(",")",";",["T_WHITESPACE","\n            ",299],["T_THROW","throw",300],["T_WHITESPACE"," ",300],["T_NEW","new",300],["T_WHITESPACE"," ",300],["T_STRING","Exception",300],"(",["T_CONSTANT_ENCAPSED_STRING","'Can\\'t remove tree node'",300],")",";",["T_WHITESPACE","\n        ",300],"}",["T_WHITESPACE","\n        ",301],["T_STRING","parent",302],["T_DOUBLE_COLON","::",302],["T_STRING","removeNode",302],"(",["T_VARIABLE","$node",302],")",";",["T_WHITESPACE","\n        ",302],["T_RETURN","return",303],["T_WHITESPACE"," ",303],["T_VARIABLE","$this",303],";",["T_WHITESPACE","\n    ",303],"}",["T_WHITESPACE","\n",304],"}",["T_WHITESPACE","\n",305]]
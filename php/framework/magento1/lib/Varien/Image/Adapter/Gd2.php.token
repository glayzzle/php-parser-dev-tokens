[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Magento\n *\n * NOTICE OF LICENSE\n *\n * This source file is subject to the Open Software License (OSL 3.0)\n * that is bundled with this package in the file LICENSE.txt.\n * It is also available through the world-wide-web at this URL:\n * http:\/\/opensource.org\/licenses\/osl-3.0.php\n * If you did not receive a copy of the license and are unable to\n * obtain it through the world-wide-web, please send an email\n * to license@magento.com so we can send you a copy immediately.\n *\n * DISCLAIMER\n *\n * Do not edit or add to this file if you wish to upgrade Magento to newer\n * versions in the future. If you wish to customize Magento for your\n * needs please refer to http:\/\/www.magento.com for more information.\n *\n * @category    Varien\n * @package     Varien_Image\n * @copyright  Copyright (c) 2006-2016 X.commerce, Inc. and affiliates (http:\/\/www.magento.com)\n * @license    http:\/\/opensource.org\/licenses\/osl-3.0.php  Open Software License (OSL 3.0)\n *\/",2],["T_WHITESPACE","\n\n\n",25],["T_CLASS","class",28],["T_WHITESPACE"," ",28],["T_STRING","Varien_Image_Adapter_Gd2",28],["T_WHITESPACE"," ",28],["T_EXTENDS","extends",28],["T_WHITESPACE"," ",28],["T_STRING","Varien_Image_Adapter_Abstract",28],["T_WHITESPACE","\n",28],"{",["T_WHITESPACE","\n    ",29],["T_PROTECTED","protected",30],["T_WHITESPACE"," ",30],["T_VARIABLE","$_requiredExtensions",30],["T_WHITESPACE"," ",30],"=",["T_WHITESPACE"," ",30],["T_ARRAY","Array",30],"(",["T_CONSTANT_ENCAPSED_STRING","\"gd\"",30],")",";",["T_WHITESPACE","\n    ",30],["T_PRIVATE","private",31],["T_WHITESPACE"," ",31],["T_STATIC","static",31],["T_WHITESPACE"," ",31],["T_VARIABLE","$_callbacks",31],["T_WHITESPACE"," ",31],"=",["T_WHITESPACE"," ",31],["T_ARRAY","array",31],"(",["T_WHITESPACE","\n        ",31],["T_STRING","IMAGETYPE_GIF",32],["T_WHITESPACE","  ",32],["T_DOUBLE_ARROW","=>",32],["T_WHITESPACE"," ",32],["T_ARRAY","array",32],"(",["T_CONSTANT_ENCAPSED_STRING","'output'",32],["T_WHITESPACE"," ",32],["T_DOUBLE_ARROW","=>",32],["T_WHITESPACE"," ",32],["T_CONSTANT_ENCAPSED_STRING","'imagegif'",32],",",["T_WHITESPACE","  ",32],["T_CONSTANT_ENCAPSED_STRING","'create'",32],["T_WHITESPACE"," ",32],["T_DOUBLE_ARROW","=>",32],["T_WHITESPACE"," ",32],["T_CONSTANT_ENCAPSED_STRING","'imagecreatefromgif'",32],")",",",["T_WHITESPACE","\n        ",32],["T_STRING","IMAGETYPE_JPEG",33],["T_WHITESPACE"," ",33],["T_DOUBLE_ARROW","=>",33],["T_WHITESPACE"," ",33],["T_ARRAY","array",33],"(",["T_CONSTANT_ENCAPSED_STRING","'output'",33],["T_WHITESPACE"," ",33],["T_DOUBLE_ARROW","=>",33],["T_WHITESPACE"," ",33],["T_CONSTANT_ENCAPSED_STRING","'imagejpeg'",33],",",["T_WHITESPACE"," ",33],["T_CONSTANT_ENCAPSED_STRING","'create'",33],["T_WHITESPACE"," ",33],["T_DOUBLE_ARROW","=>",33],["T_WHITESPACE"," ",33],["T_CONSTANT_ENCAPSED_STRING","'imagecreatefromjpeg'",33],")",",",["T_WHITESPACE","\n        ",33],["T_STRING","IMAGETYPE_PNG",34],["T_WHITESPACE","  ",34],["T_DOUBLE_ARROW","=>",34],["T_WHITESPACE"," ",34],["T_ARRAY","array",34],"(",["T_CONSTANT_ENCAPSED_STRING","'output'",34],["T_WHITESPACE"," ",34],["T_DOUBLE_ARROW","=>",34],["T_WHITESPACE"," ",34],["T_CONSTANT_ENCAPSED_STRING","'imagepng'",34],",",["T_WHITESPACE","  ",34],["T_CONSTANT_ENCAPSED_STRING","'create'",34],["T_WHITESPACE"," ",34],["T_DOUBLE_ARROW","=>",34],["T_WHITESPACE"," ",34],["T_CONSTANT_ENCAPSED_STRING","'imagecreatefrompng'",34],")",",",["T_WHITESPACE","\n        ",34],["T_STRING","IMAGETYPE_XBM",35],["T_WHITESPACE","  ",35],["T_DOUBLE_ARROW","=>",35],["T_WHITESPACE"," ",35],["T_ARRAY","array",35],"(",["T_CONSTANT_ENCAPSED_STRING","'output'",35],["T_WHITESPACE"," ",35],["T_DOUBLE_ARROW","=>",35],["T_WHITESPACE"," ",35],["T_CONSTANT_ENCAPSED_STRING","'imagexbm'",35],",",["T_WHITESPACE","  ",35],["T_CONSTANT_ENCAPSED_STRING","'create'",35],["T_WHITESPACE"," ",35],["T_DOUBLE_ARROW","=>",35],["T_WHITESPACE"," ",35],["T_CONSTANT_ENCAPSED_STRING","'imagecreatefromxbm'",35],")",",",["T_WHITESPACE","\n        ",35],["T_STRING","IMAGETYPE_WBMP",36],["T_WHITESPACE"," ",36],["T_DOUBLE_ARROW","=>",36],["T_WHITESPACE"," ",36],["T_ARRAY","array",36],"(",["T_CONSTANT_ENCAPSED_STRING","'output'",36],["T_WHITESPACE"," ",36],["T_DOUBLE_ARROW","=>",36],["T_WHITESPACE"," ",36],["T_CONSTANT_ENCAPSED_STRING","'imagewbmp'",36],",",["T_WHITESPACE"," ",36],["T_CONSTANT_ENCAPSED_STRING","'create'",36],["T_WHITESPACE"," ",36],["T_DOUBLE_ARROW","=>",36],["T_WHITESPACE"," ",36],["T_CONSTANT_ENCAPSED_STRING","'imagecreatefromxbm'",36],")",",",["T_WHITESPACE","\n    ",36],")",";",["T_WHITESPACE","\n\n    ",37],["T_DOC_COMMENT","\/**\n     * Whether image was resized or not\n     *\n     * @var bool\n     *\/",39],["T_WHITESPACE","\n    ",43],["T_PROTECTED","protected",44],["T_WHITESPACE"," ",44],["T_VARIABLE","$_resized",44],["T_WHITESPACE"," ",44],"=",["T_WHITESPACE"," ",44],["T_STRING","false",44],";",["T_WHITESPACE","\n\n    ",44],["T_PUBLIC","public",46],["T_WHITESPACE"," ",46],["T_FUNCTION","function",46],["T_WHITESPACE"," ",46],["T_STRING","__construct",46],"(",")",["T_WHITESPACE","\n    ",46],"{",["T_WHITESPACE","\n        ",47],["T_COMMENT","\/\/ Initialize shutdown function\n",48],["T_WHITESPACE","        ",49],["T_STRING","register_shutdown_function",49],"(",["T_ARRAY","array",49],"(",["T_VARIABLE","$this",49],",",["T_WHITESPACE"," ",49],["T_CONSTANT_ENCAPSED_STRING","'destruct'",49],")",")",";",["T_WHITESPACE","\n    ",49],"}",["T_WHITESPACE","\n\n    ",50],["T_DOC_COMMENT","\/**\n     * Destroy object image on shutdown\n     *\/",52],["T_WHITESPACE","\n    ",54],["T_PUBLIC","public",55],["T_WHITESPACE"," ",55],["T_FUNCTION","function",55],["T_WHITESPACE"," ",55],["T_STRING","destruct",55],"(",")",["T_WHITESPACE","\n    ",55],"{",["T_WHITESPACE","\n        ",56],"@",["T_STRING","imagedestroy",57],"(",["T_VARIABLE","$this",57],["T_OBJECT_OPERATOR","->",57],["T_STRING","_imageHandler",57],")",";",["T_WHITESPACE","\n    ",57],"}",["T_WHITESPACE","\n\n    ",58],["T_DOC_COMMENT","\/**\n     * Opens image file.\n     *\n     * @param string $filename\n     * @throws Varien_Exception\n     *\/",60],["T_WHITESPACE","\n    ",65],["T_PUBLIC","public",66],["T_WHITESPACE"," ",66],["T_FUNCTION","function",66],["T_WHITESPACE"," ",66],["T_STRING","open",66],"(",["T_VARIABLE","$filename",66],")",["T_WHITESPACE","\n    ",66],"{",["T_WHITESPACE","\n        ",67],["T_VARIABLE","$this",68],["T_OBJECT_OPERATOR","->",68],["T_STRING","_fileName",68],["T_WHITESPACE"," ",68],"=",["T_WHITESPACE"," ",68],["T_VARIABLE","$filename",68],";",["T_WHITESPACE","\n        ",68],["T_VARIABLE","$this",69],["T_OBJECT_OPERATOR","->",69],["T_STRING","getMimeType",69],"(",")",";",["T_WHITESPACE","\n        ",69],["T_VARIABLE","$this",70],["T_OBJECT_OPERATOR","->",70],["T_STRING","_getFileAttributes",70],"(",")",";",["T_WHITESPACE","\n        ",70],["T_IF","if",71],["T_WHITESPACE"," ",71],"(",["T_VARIABLE","$this",71],["T_OBJECT_OPERATOR","->",71],["T_STRING","_isMemoryLimitReached",71],"(",")",")",["T_WHITESPACE"," ",71],"{",["T_WHITESPACE","\n            ",71],["T_THROW","throw",72],["T_WHITESPACE"," ",72],["T_NEW","new",72],["T_WHITESPACE"," ",72],["T_STRING","Varien_Exception",72],"(",["T_CONSTANT_ENCAPSED_STRING","'Memory limit has been reached.'",72],")",";",["T_WHITESPACE","\n        ",72],"}",["T_WHITESPACE","\n        ",73],["T_VARIABLE","$this",74],["T_OBJECT_OPERATOR","->",74],["T_STRING","_imageHandler",74],["T_WHITESPACE"," ",74],"=",["T_WHITESPACE"," ",74],["T_STRING","call_user_func",74],"(",["T_VARIABLE","$this",74],["T_OBJECT_OPERATOR","->",74],["T_STRING","_getCallback",74],"(",["T_CONSTANT_ENCAPSED_STRING","'create'",74],")",",",["T_WHITESPACE"," ",74],["T_VARIABLE","$this",74],["T_OBJECT_OPERATOR","->",74],["T_STRING","_fileName",74],")",";",["T_WHITESPACE","\n    ",74],"}",["T_WHITESPACE","\n\n    ",75],["T_DOC_COMMENT","\/**\n     * Checks whether memory limit is reached.\n     *\n     * @return bool\n     *\/",77],["T_WHITESPACE","\n    ",81],["T_PROTECTED","protected",82],["T_WHITESPACE"," ",82],["T_FUNCTION","function",82],["T_WHITESPACE"," ",82],["T_STRING","_isMemoryLimitReached",82],"(",")",["T_WHITESPACE","\n    ",82],"{",["T_WHITESPACE","\n        ",83],["T_VARIABLE","$limit",84],["T_WHITESPACE"," ",84],"=",["T_WHITESPACE"," ",84],["T_VARIABLE","$this",84],["T_OBJECT_OPERATOR","->",84],["T_STRING","_convertToByte",84],"(",["T_STRING","ini_get",84],"(",["T_CONSTANT_ENCAPSED_STRING","'memory_limit'",84],")",")",";",["T_WHITESPACE","\n        ",84],["T_DOC_COMMENT","\/**\n         * In case if memory limit was converted to 0, treat it as unlimited\n         *\/",85],["T_WHITESPACE","\n        ",87],["T_IF","if",88],["T_WHITESPACE"," ",88],"(",["T_VARIABLE","$limit",88],["T_WHITESPACE"," ",88],["T_IS_IDENTICAL","===",88],["T_WHITESPACE"," ",88],["T_LNUMBER","0",88],")",["T_WHITESPACE"," ",88],"{",["T_WHITESPACE","\n            ",88],["T_RETURN","return",89],["T_WHITESPACE"," ",89],["T_STRING","false",89],";",["T_WHITESPACE","\n        ",89],"}",["T_WHITESPACE","\n        ",90],["T_VARIABLE","$size",91],["T_WHITESPACE"," ",91],"=",["T_WHITESPACE"," ",91],["T_STRING","getimagesize",91],"(",["T_VARIABLE","$this",91],["T_OBJECT_OPERATOR","->",91],["T_STRING","_fileName",91],")",";",["T_WHITESPACE","\n        ",91],["T_VARIABLE","$requiredMemory",92],["T_WHITESPACE"," ",92],"=",["T_WHITESPACE"," ",92],["T_VARIABLE","$size",92],"[",["T_LNUMBER","0",92],"]",["T_WHITESPACE"," ",92],"*",["T_WHITESPACE"," ",92],["T_VARIABLE","$size",92],"[",["T_LNUMBER","1",92],"]",["T_WHITESPACE"," ",92],"*",["T_WHITESPACE"," ",92],["T_LNUMBER","3",92],";",["T_WHITESPACE","\n\n        ",92],["T_RETURN","return",94],["T_WHITESPACE"," ",94],"(",["T_STRING","memory_get_usage",94],"(",["T_STRING","true",94],")",["T_WHITESPACE"," ",94],"+",["T_WHITESPACE"," ",94],["T_VARIABLE","$requiredMemory",94],")",["T_WHITESPACE"," ",94],">",["T_WHITESPACE"," ",94],["T_VARIABLE","$limit",94],";",["T_WHITESPACE","\n    ",94],"}",["T_WHITESPACE","\n\n    ",95],["T_DOC_COMMENT","\/**\n     * Convert PHP memory limit value into bytes\n     * Notation in value is supported only for PHP\n     * Shorthand byte options are case insensitive\n     *\n     * @param string $memoryValue\n     *\n     * @throws Varien_Exception\n     * @see http:\/\/php.net\/manual\/en\/faq.using.php#faq.using.shorthandbytes\n     *\n     * @return int\n     *\/",97],["T_WHITESPACE","\n    ",108],["T_PROTECTED","protected",109],["T_WHITESPACE"," ",109],["T_FUNCTION","function",109],["T_WHITESPACE"," ",109],["T_STRING","_convertToByte",109],"(",["T_VARIABLE","$memoryValue",109],")",["T_WHITESPACE","\n    ",109],"{",["T_WHITESPACE","\n        ",110],["T_VARIABLE","$memoryValue",111],["T_WHITESPACE"," ",111],"=",["T_WHITESPACE"," ",111],["T_STRING","trim",111],"(",["T_VARIABLE","$memoryValue",111],")",";",["T_WHITESPACE","\n        ",111],["T_IF","if",112],["T_WHITESPACE"," ",112],"(",["T_EMPTY","empty",112],"(",["T_VARIABLE","$memoryValue",112],")",")",["T_WHITESPACE"," ",112],"{",["T_WHITESPACE","\n            ",112],["T_RETURN","return",113],["T_WHITESPACE"," ",113],["T_LNUMBER","0",113],";",["T_WHITESPACE","\n        ",113],"}",["T_WHITESPACE","\n        ",114],["T_IF","if",115],["T_WHITESPACE"," ",115],"(",["T_STRING","preg_match",115],"(",["T_CONSTANT_ENCAPSED_STRING","'~^([1-9][0-9]*)[\\s]*(k|m|g)b?$~i'",115],",",["T_WHITESPACE"," ",115],["T_VARIABLE","$memoryValue",115],",",["T_WHITESPACE"," ",115],["T_VARIABLE","$matches",115],")",")",["T_WHITESPACE"," ",115],"{",["T_WHITESPACE","\n            ",115],["T_VARIABLE","$option",116],["T_WHITESPACE"," ",116],"=",["T_WHITESPACE"," ",116],["T_STRING","strtolower",116],"(",["T_VARIABLE","$matches",116],"[",["T_LNUMBER","2",116],"]",")",";",["T_WHITESPACE","\n            ",116],["T_VARIABLE","$memoryValue",117],["T_WHITESPACE"," ",117],"=",["T_WHITESPACE"," ",117],["T_VARIABLE","$matches",117],"[",["T_LNUMBER","1",117],"]",";",["T_WHITESPACE","\n            ",117],["T_SWITCH","switch",118],["T_WHITESPACE"," ",118],"(",["T_VARIABLE","$option",118],")",["T_WHITESPACE"," ",118],"{",["T_WHITESPACE","\n                ",118],["T_CASE","case",119],["T_WHITESPACE"," ",119],["T_CONSTANT_ENCAPSED_STRING","'g'",119],":",["T_WHITESPACE","\n                    ",119],["T_VARIABLE","$memoryValue",120],["T_WHITESPACE"," ",120],["T_MUL_EQUAL","*=",120],["T_WHITESPACE"," ",120],["T_LNUMBER","1024",120],";",["T_WHITESPACE","\n                    ",120],["T_COMMENT","\/\/ no break\n",121],["T_WHITESPACE","                ",122],["T_CASE","case",122],["T_WHITESPACE"," ",122],["T_CONSTANT_ENCAPSED_STRING","'m'",122],":",["T_WHITESPACE","\n                    ",122],["T_VARIABLE","$memoryValue",123],["T_WHITESPACE"," ",123],["T_MUL_EQUAL","*=",123],["T_WHITESPACE"," ",123],["T_LNUMBER","1024",123],";",["T_WHITESPACE","\n                    ",123],["T_COMMENT","\/\/ no break\n",124],["T_WHITESPACE","                ",125],["T_CASE","case",125],["T_WHITESPACE"," ",125],["T_CONSTANT_ENCAPSED_STRING","'k'",125],":",["T_WHITESPACE","\n                    ",125],["T_VARIABLE","$memoryValue",126],["T_WHITESPACE"," ",126],["T_MUL_EQUAL","*=",126],["T_WHITESPACE"," ",126],["T_LNUMBER","1024",126],";",["T_WHITESPACE","\n                    ",126],["T_BREAK","break",127],";",["T_WHITESPACE","\n                ",127],["T_DEFAULT","default",128],":",["T_WHITESPACE","\n                    ",128],["T_BREAK","break",129],";",["T_WHITESPACE","\n            ",129],"}",["T_WHITESPACE","\n        ",130],"}",["T_WHITESPACE","\n        ",131],["T_VARIABLE","$memoryValue",132],["T_WHITESPACE"," ",132],"=",["T_WHITESPACE"," ",132],["T_INT_CAST","(int)",132],["T_VARIABLE","$memoryValue",132],";",["T_WHITESPACE","\n\n        ",132],["T_RETURN","return",134],["T_WHITESPACE"," ",134],["T_VARIABLE","$memoryValue",134],["T_WHITESPACE"," ",134],">",["T_WHITESPACE"," ",134],["T_LNUMBER","0",134],["T_WHITESPACE"," ",134],"?",["T_WHITESPACE"," ",134],["T_VARIABLE","$memoryValue",134],["T_WHITESPACE"," ",134],":",["T_WHITESPACE"," ",134],["T_LNUMBER","0",134],";",["T_WHITESPACE","\n    ",134],"}",["T_WHITESPACE","\n\n    ",135],["T_PUBLIC","public",137],["T_WHITESPACE"," ",137],["T_FUNCTION","function",137],["T_WHITESPACE"," ",137],["T_STRING","save",137],"(",["T_VARIABLE","$destination",137],"=",["T_STRING","null",137],",",["T_WHITESPACE"," ",137],["T_VARIABLE","$newName",137],"=",["T_STRING","null",137],")",["T_WHITESPACE","\n    ",137],"{",["T_WHITESPACE","\n        ",138],["T_VARIABLE","$fileName",139],["T_WHITESPACE"," ",139],"=",["T_WHITESPACE"," ",139],"(",["T_WHITESPACE"," ",139],"!",["T_ISSET","isset",139],"(",["T_VARIABLE","$destination",139],")",["T_WHITESPACE"," ",139],")",["T_WHITESPACE"," ",139],"?",["T_WHITESPACE"," ",139],["T_VARIABLE","$this",139],["T_OBJECT_OPERATOR","->",139],["T_STRING","_fileName",139],["T_WHITESPACE"," ",139],":",["T_WHITESPACE"," ",139],["T_VARIABLE","$destination",139],";",["T_WHITESPACE","\n\n        ",139],["T_IF","if",141],"(",["T_WHITESPACE"," ",141],["T_ISSET","isset",141],"(",["T_VARIABLE","$destination",141],")",["T_WHITESPACE"," ",141],["T_BOOLEAN_AND","&&",141],["T_WHITESPACE"," ",141],["T_ISSET","isset",141],"(",["T_VARIABLE","$newName",141],")",["T_WHITESPACE"," ",141],")",["T_WHITESPACE"," ",141],"{",["T_WHITESPACE","\n            ",141],["T_VARIABLE","$fileName",142],["T_WHITESPACE"," ",142],"=",["T_WHITESPACE"," ",142],["T_VARIABLE","$destination",142],["T_WHITESPACE"," ",142],".",["T_WHITESPACE"," ",142],["T_CONSTANT_ENCAPSED_STRING","\"\/\"",142],["T_WHITESPACE"," ",142],".",["T_WHITESPACE"," ",142],["T_VARIABLE","$newName",142],";",["T_WHITESPACE","\n        ",142],"}",["T_WHITESPACE"," ",143],["T_ELSEIF","elseif",143],"(",["T_WHITESPACE"," ",143],["T_ISSET","isset",143],"(",["T_VARIABLE","$destination",143],")",["T_WHITESPACE"," ",143],["T_BOOLEAN_AND","&&",143],["T_WHITESPACE"," ",143],"!",["T_ISSET","isset",143],"(",["T_VARIABLE","$newName",143],")",["T_WHITESPACE"," ",143],")",["T_WHITESPACE"," ",143],"{",["T_WHITESPACE","\n            ",143],["T_VARIABLE","$info",144],["T_WHITESPACE"," ",144],"=",["T_WHITESPACE"," ",144],["T_STRING","pathinfo",144],"(",["T_VARIABLE","$destination",144],")",";",["T_WHITESPACE","\n            ",144],["T_VARIABLE","$fileName",145],["T_WHITESPACE"," ",145],"=",["T_WHITESPACE"," ",145],["T_VARIABLE","$destination",145],";",["T_WHITESPACE","\n            ",145],["T_VARIABLE","$destination",146],["T_WHITESPACE"," ",146],"=",["T_WHITESPACE"," ",146],["T_VARIABLE","$info",146],"[",["T_CONSTANT_ENCAPSED_STRING","'dirname'",146],"]",";",["T_WHITESPACE","\n        ",146],"}",["T_WHITESPACE"," ",147],["T_ELSEIF","elseif",147],"(",["T_WHITESPACE"," ",147],"!",["T_ISSET","isset",147],"(",["T_VARIABLE","$destination",147],")",["T_WHITESPACE"," ",147],["T_BOOLEAN_AND","&&",147],["T_WHITESPACE"," ",147],["T_ISSET","isset",147],"(",["T_VARIABLE","$newName",147],")",["T_WHITESPACE"," ",147],")",["T_WHITESPACE"," ",147],"{",["T_WHITESPACE","\n            ",147],["T_VARIABLE","$fileName",148],["T_WHITESPACE"," ",148],"=",["T_WHITESPACE"," ",148],["T_VARIABLE","$this",148],["T_OBJECT_OPERATOR","->",148],["T_STRING","_fileSrcPath",148],["T_WHITESPACE"," ",148],".",["T_WHITESPACE"," ",148],["T_CONSTANT_ENCAPSED_STRING","\"\/\"",148],["T_WHITESPACE"," ",148],".",["T_WHITESPACE"," ",148],["T_VARIABLE","$newName",148],";",["T_WHITESPACE","\n        ",148],"}",["T_WHITESPACE"," ",149],["T_ELSE","else",149],["T_WHITESPACE"," ",149],"{",["T_WHITESPACE","\n            ",149],["T_VARIABLE","$fileName",150],["T_WHITESPACE"," ",150],"=",["T_WHITESPACE"," ",150],["T_VARIABLE","$this",150],["T_OBJECT_OPERATOR","->",150],["T_STRING","_fileSrcPath",150],["T_WHITESPACE"," ",150],".",["T_WHITESPACE"," ",150],["T_VARIABLE","$this",150],["T_OBJECT_OPERATOR","->",150],["T_STRING","_fileSrcName",150],";",["T_WHITESPACE","\n        ",150],"}",["T_WHITESPACE","\n\n        ",151],["T_VARIABLE","$destinationDir",153],["T_WHITESPACE"," ",153],"=",["T_WHITESPACE"," ",153],"(",["T_WHITESPACE"," ",153],["T_ISSET","isset",153],"(",["T_VARIABLE","$destination",153],")",["T_WHITESPACE"," ",153],")",["T_WHITESPACE"," ",153],"?",["T_WHITESPACE"," ",153],["T_VARIABLE","$destination",153],["T_WHITESPACE"," ",153],":",["T_WHITESPACE"," ",153],["T_VARIABLE","$this",153],["T_OBJECT_OPERATOR","->",153],["T_STRING","_fileSrcPath",153],";",["T_WHITESPACE","\n\n        ",153],["T_IF","if",155],"(",["T_WHITESPACE"," ",155],"!",["T_STRING","is_writable",155],"(",["T_VARIABLE","$destinationDir",155],")",["T_WHITESPACE"," ",155],")",["T_WHITESPACE"," ",155],"{",["T_WHITESPACE","\n            ",155],["T_TRY","try",156],["T_WHITESPACE"," ",156],"{",["T_WHITESPACE","\n                ",156],["T_VARIABLE","$io",157],["T_WHITESPACE"," ",157],"=",["T_WHITESPACE"," ",157],["T_NEW","new",157],["T_WHITESPACE"," ",157],["T_STRING","Varien_Io_File",157],"(",")",";",["T_WHITESPACE","\n                ",157],["T_VARIABLE","$io",158],["T_OBJECT_OPERATOR","->",158],["T_STRING","mkdir",158],"(",["T_VARIABLE","$destination",158],")",";",["T_WHITESPACE","\n            ",158],"}",["T_WHITESPACE"," ",159],["T_CATCH","catch",159],["T_WHITESPACE"," ",159],"(",["T_STRING","Exception",159],["T_WHITESPACE"," ",159],["T_VARIABLE","$e",159],")",["T_WHITESPACE"," ",159],"{",["T_WHITESPACE","\n                ",159],["T_THROW","throw",160],["T_WHITESPACE"," ",160],["T_NEW","new",160],["T_WHITESPACE"," ",160],["T_STRING","Exception",160],"(","\"",["T_ENCAPSED_AND_WHITESPACE","Unable to write file into directory '",160],["T_CURLY_OPEN","{",160],["T_VARIABLE","$destinationDir",160],"}",["T_ENCAPSED_AND_WHITESPACE","'. Access forbidden.",160],"\"",")",";",["T_WHITESPACE","\n            ",160],"}",["T_WHITESPACE","\n        ",161],"}",["T_WHITESPACE","\n\n        ",162],["T_IF","if",164],["T_WHITESPACE"," ",164],"(","!",["T_VARIABLE","$this",164],["T_OBJECT_OPERATOR","->",164],["T_STRING","_resized",164],")",["T_WHITESPACE"," ",164],"{",["T_WHITESPACE","\n            ",164],["T_COMMENT","\/\/ keep alpha transparency\n",165],["T_WHITESPACE","            ",166],["T_VARIABLE","$isAlpha",166],["T_WHITESPACE","     ",166],"=",["T_WHITESPACE"," ",166],["T_STRING","false",166],";",["T_WHITESPACE","\n            ",166],["T_VARIABLE","$isTrueColor",167],["T_WHITESPACE"," ",167],"=",["T_WHITESPACE"," ",167],["T_STRING","false",167],";",["T_WHITESPACE","\n            ",167],["T_VARIABLE","$this",168],["T_OBJECT_OPERATOR","->",168],["T_STRING","_getTransparency",168],"(",["T_VARIABLE","$this",168],["T_OBJECT_OPERATOR","->",168],["T_STRING","_imageHandler",168],",",["T_WHITESPACE"," ",168],["T_VARIABLE","$this",168],["T_OBJECT_OPERATOR","->",168],["T_STRING","_fileType",168],",",["T_WHITESPACE"," ",168],["T_VARIABLE","$isAlpha",168],",",["T_WHITESPACE"," ",168],["T_VARIABLE","$isTrueColor",168],")",";",["T_WHITESPACE","\n            ",168],["T_IF","if",169],["T_WHITESPACE"," ",169],"(",["T_VARIABLE","$isAlpha",169],")",["T_WHITESPACE"," ",169],"{",["T_WHITESPACE","\n                ",169],["T_IF","if",170],["T_WHITESPACE"," ",170],"(",["T_VARIABLE","$isTrueColor",170],")",["T_WHITESPACE"," ",170],"{",["T_WHITESPACE","\n                    ",170],["T_VARIABLE","$newImage",171],["T_WHITESPACE"," ",171],"=",["T_WHITESPACE"," ",171],["T_STRING","imagecreatetruecolor",171],"(",["T_VARIABLE","$this",171],["T_OBJECT_OPERATOR","->",171],["T_STRING","_imageSrcWidth",171],",",["T_WHITESPACE"," ",171],["T_VARIABLE","$this",171],["T_OBJECT_OPERATOR","->",171],["T_STRING","_imageSrcHeight",171],")",";",["T_WHITESPACE","\n                ",171],"}",["T_WHITESPACE"," ",172],["T_ELSE","else",172],["T_WHITESPACE"," ",172],"{",["T_WHITESPACE","\n                    ",172],["T_VARIABLE","$newImage",173],["T_WHITESPACE"," ",173],"=",["T_WHITESPACE"," ",173],["T_STRING","imagecreate",173],"(",["T_VARIABLE","$this",173],["T_OBJECT_OPERATOR","->",173],["T_STRING","_imageSrcWidth",173],",",["T_WHITESPACE"," ",173],["T_VARIABLE","$this",173],["T_OBJECT_OPERATOR","->",173],["T_STRING","_imageSrcHeight",173],")",";",["T_WHITESPACE","\n                ",173],"}",["T_WHITESPACE","\n                ",174],["T_VARIABLE","$this",175],["T_OBJECT_OPERATOR","->",175],["T_STRING","_fillBackgroundColor",175],"(",["T_VARIABLE","$newImage",175],")",";",["T_WHITESPACE","\n                ",175],["T_STRING","imagecopy",176],"(",["T_WHITESPACE","\n                    ",176],["T_VARIABLE","$newImage",177],",",["T_WHITESPACE","\n                    ",177],["T_VARIABLE","$this",178],["T_OBJECT_OPERATOR","->",178],["T_STRING","_imageHandler",178],",",["T_WHITESPACE","\n                    ",178],["T_LNUMBER","0",179],",",["T_WHITESPACE"," ",179],["T_LNUMBER","0",179],",",["T_WHITESPACE","\n                    ",179],["T_LNUMBER","0",180],",",["T_WHITESPACE"," ",180],["T_LNUMBER","0",180],",",["T_WHITESPACE","\n                    ",180],["T_VARIABLE","$this",181],["T_OBJECT_OPERATOR","->",181],["T_STRING","_imageSrcWidth",181],",",["T_WHITESPACE"," ",181],["T_VARIABLE","$this",181],["T_OBJECT_OPERATOR","->",181],["T_STRING","_imageSrcHeight",181],["T_WHITESPACE","\n                ",181],")",";",["T_WHITESPACE","\n                ",182],["T_VARIABLE","$this",183],["T_OBJECT_OPERATOR","->",183],["T_STRING","_imageHandler",183],["T_WHITESPACE"," ",183],"=",["T_WHITESPACE"," ",183],["T_VARIABLE","$newImage",183],";",["T_WHITESPACE","\n            ",183],"}",["T_WHITESPACE","\n        ",184],"}",["T_WHITESPACE","\n\n        ",185],["T_VARIABLE","$functionParameters",187],["T_WHITESPACE"," ",187],"=",["T_WHITESPACE"," ",187],["T_ARRAY","array",187],"(",")",";",["T_WHITESPACE","\n        ",187],["T_VARIABLE","$functionParameters",188],"[","]",["T_WHITESPACE"," ",188],"=",["T_WHITESPACE"," ",188],["T_VARIABLE","$this",188],["T_OBJECT_OPERATOR","->",188],["T_STRING","_imageHandler",188],";",["T_WHITESPACE","\n        ",188],["T_VARIABLE","$functionParameters",189],"[","]",["T_WHITESPACE"," ",189],"=",["T_WHITESPACE"," ",189],["T_VARIABLE","$fileName",189],";",["T_WHITESPACE","\n\n        ",189],["T_COMMENT","\/\/ set quality param for JPG file type\n",191],["T_WHITESPACE","        ",192],["T_IF","if",192],["T_WHITESPACE"," ",192],"(","!",["T_STRING","is_null",192],"(",["T_VARIABLE","$this",192],["T_OBJECT_OPERATOR","->",192],["T_STRING","quality",192],"(",")",")",["T_WHITESPACE"," ",192],["T_BOOLEAN_AND","&&",192],["T_WHITESPACE"," ",192],["T_VARIABLE","$this",192],["T_OBJECT_OPERATOR","->",192],["T_STRING","_fileType",192],["T_WHITESPACE"," ",192],["T_IS_EQUAL","==",192],["T_WHITESPACE"," ",192],["T_STRING","IMAGETYPE_JPEG",192],")",["T_WHITESPACE","\n        ",192],"{",["T_WHITESPACE","\n            ",193],["T_VARIABLE","$functionParameters",194],"[","]",["T_WHITESPACE"," ",194],"=",["T_WHITESPACE"," ",194],["T_VARIABLE","$this",194],["T_OBJECT_OPERATOR","->",194],["T_STRING","quality",194],"(",")",";",["T_WHITESPACE","\n        ",194],"}",["T_WHITESPACE","\n\n        ",195],["T_COMMENT","\/\/ set quality param for PNG file type\n",197],["T_WHITESPACE","        ",198],["T_IF","if",198],["T_WHITESPACE"," ",198],"(","!",["T_STRING","is_null",198],"(",["T_VARIABLE","$this",198],["T_OBJECT_OPERATOR","->",198],["T_STRING","quality",198],"(",")",")",["T_WHITESPACE"," ",198],["T_BOOLEAN_AND","&&",198],["T_WHITESPACE"," ",198],["T_VARIABLE","$this",198],["T_OBJECT_OPERATOR","->",198],["T_STRING","_fileType",198],["T_WHITESPACE"," ",198],["T_IS_EQUAL","==",198],["T_WHITESPACE"," ",198],["T_STRING","IMAGETYPE_PNG",198],")",["T_WHITESPACE","\n        ",198],"{",["T_WHITESPACE","\n            ",199],["T_VARIABLE","$quality",200],["T_WHITESPACE"," ",200],"=",["T_WHITESPACE"," ",200],["T_STRING","round",200],"(","(",["T_VARIABLE","$this",200],["T_OBJECT_OPERATOR","->",200],["T_STRING","quality",200],"(",")",["T_WHITESPACE"," ",200],"\/",["T_WHITESPACE"," ",200],["T_LNUMBER","100",200],")",["T_WHITESPACE"," ",200],"*",["T_WHITESPACE"," ",200],["T_LNUMBER","10",200],")",";",["T_WHITESPACE","\n            ",200],["T_IF","if",201],["T_WHITESPACE"," ",201],"(",["T_VARIABLE","$quality",201],["T_WHITESPACE"," ",201],"<",["T_WHITESPACE"," ",201],["T_LNUMBER","1",201],")",["T_WHITESPACE"," ",201],"{",["T_WHITESPACE","\n                ",201],["T_VARIABLE","$quality",202],["T_WHITESPACE"," ",202],"=",["T_WHITESPACE"," ",202],["T_LNUMBER","1",202],";",["T_WHITESPACE","\n            ",202],"}",["T_WHITESPACE"," ",203],["T_ELSEIF","elseif",203],["T_WHITESPACE"," ",203],"(",["T_VARIABLE","$quality",203],["T_WHITESPACE"," ",203],">",["T_WHITESPACE"," ",203],["T_LNUMBER","10",203],")",["T_WHITESPACE"," ",203],"{",["T_WHITESPACE","\n                ",203],["T_VARIABLE","$quality",204],["T_WHITESPACE"," ",204],"=",["T_WHITESPACE"," ",204],["T_LNUMBER","10",204],";",["T_WHITESPACE","\n            ",204],"}",["T_WHITESPACE","\n            ",205],["T_VARIABLE","$quality",206],["T_WHITESPACE"," ",206],"=",["T_WHITESPACE"," ",206],["T_LNUMBER","10",206],["T_WHITESPACE"," ",206],"-",["T_WHITESPACE"," ",206],["T_VARIABLE","$quality",206],";",["T_WHITESPACE","\n            ",206],["T_VARIABLE","$functionParameters",207],"[","]",["T_WHITESPACE"," ",207],"=",["T_WHITESPACE"," ",207],["T_VARIABLE","$quality",207],";",["T_WHITESPACE","\n        ",207],"}",["T_WHITESPACE","\n\n        ",208],["T_STRING","call_user_func_array",210],"(",["T_VARIABLE","$this",210],["T_OBJECT_OPERATOR","->",210],["T_STRING","_getCallback",210],"(",["T_CONSTANT_ENCAPSED_STRING","'output'",210],")",",",["T_WHITESPACE"," ",210],["T_VARIABLE","$functionParameters",210],")",";",["T_WHITESPACE","\n    ",210],"}",["T_WHITESPACE","\n\n    ",211],["T_PUBLIC","public",213],["T_WHITESPACE"," ",213],["T_FUNCTION","function",213],["T_WHITESPACE"," ",213],["T_STRING","display",213],"(",")",["T_WHITESPACE","\n    ",213],"{",["T_WHITESPACE","\n        ",214],["T_STRING","header",215],"(",["T_CONSTANT_ENCAPSED_STRING","\"Content-type: \"",215],".",["T_VARIABLE","$this",215],["T_OBJECT_OPERATOR","->",215],["T_STRING","getMimeType",215],"(",")",")",";",["T_WHITESPACE","\n        ",215],["T_STRING","call_user_func",216],"(",["T_VARIABLE","$this",216],["T_OBJECT_OPERATOR","->",216],["T_STRING","_getCallback",216],"(",["T_CONSTANT_ENCAPSED_STRING","'output'",216],")",",",["T_WHITESPACE"," ",216],["T_VARIABLE","$this",216],["T_OBJECT_OPERATOR","->",216],["T_STRING","_imageHandler",216],")",";",["T_WHITESPACE","\n    ",216],"}",["T_WHITESPACE","\n\n    ",217],["T_DOC_COMMENT","\/**\n     * Obtain function name, basing on image type and callback type\n     *\n     * @param string $callbackType\n     * @param int $fileType\n     * @return string\n     * @throws Exception\n     *\/",219],["T_WHITESPACE","\n    ",226],["T_PRIVATE","private",227],["T_WHITESPACE"," ",227],["T_FUNCTION","function",227],["T_WHITESPACE"," ",227],["T_STRING","_getCallback",227],"(",["T_VARIABLE","$callbackType",227],",",["T_WHITESPACE"," ",227],["T_VARIABLE","$fileType",227],["T_WHITESPACE"," ",227],"=",["T_WHITESPACE"," ",227],["T_STRING","null",227],",",["T_WHITESPACE"," ",227],["T_VARIABLE","$unsupportedText",227],["T_WHITESPACE"," ",227],"=",["T_WHITESPACE"," ",227],["T_CONSTANT_ENCAPSED_STRING","'Unsupported image format.'",227],")",["T_WHITESPACE","\n    ",227],"{",["T_WHITESPACE","\n        ",228],["T_IF","if",229],["T_WHITESPACE"," ",229],"(",["T_STRING","null",229],["T_WHITESPACE"," ",229],["T_IS_IDENTICAL","===",229],["T_WHITESPACE"," ",229],["T_VARIABLE","$fileType",229],")",["T_WHITESPACE"," ",229],"{",["T_WHITESPACE","\n            ",229],["T_VARIABLE","$fileType",230],["T_WHITESPACE"," ",230],"=",["T_WHITESPACE"," ",230],["T_VARIABLE","$this",230],["T_OBJECT_OPERATOR","->",230],["T_STRING","_fileType",230],";",["T_WHITESPACE","\n        ",230],"}",["T_WHITESPACE","\n        ",231],["T_IF","if",232],["T_WHITESPACE"," ",232],"(",["T_EMPTY","empty",232],"(",["T_STRING","self",232],["T_DOUBLE_COLON","::",232],["T_VARIABLE","$_callbacks",232],"[",["T_VARIABLE","$fileType",232],"]",")",")",["T_WHITESPACE"," ",232],"{",["T_WHITESPACE","\n            ",232],["T_THROW","throw",233],["T_WHITESPACE"," ",233],["T_NEW","new",233],["T_WHITESPACE"," ",233],["T_STRING","Exception",233],"(",["T_VARIABLE","$unsupportedText",233],")",";",["T_WHITESPACE","\n        ",233],"}",["T_WHITESPACE","\n        ",234],["T_IF","if",235],["T_WHITESPACE"," ",235],"(",["T_EMPTY","empty",235],"(",["T_STRING","self",235],["T_DOUBLE_COLON","::",235],["T_VARIABLE","$_callbacks",235],"[",["T_VARIABLE","$fileType",235],"]","[",["T_VARIABLE","$callbackType",235],"]",")",")",["T_WHITESPACE"," ",235],"{",["T_WHITESPACE","\n            ",235],["T_THROW","throw",236],["T_WHITESPACE"," ",236],["T_NEW","new",236],["T_WHITESPACE"," ",236],["T_STRING","Exception",236],"(",["T_CONSTANT_ENCAPSED_STRING","'Callback not found.'",236],")",";",["T_WHITESPACE","\n        ",236],"}",["T_WHITESPACE","\n        ",237],["T_RETURN","return",238],["T_WHITESPACE"," ",238],["T_STRING","self",238],["T_DOUBLE_COLON","::",238],["T_VARIABLE","$_callbacks",238],"[",["T_VARIABLE","$fileType",238],"]","[",["T_VARIABLE","$callbackType",238],"]",";",["T_WHITESPACE","\n    ",238],"}",["T_WHITESPACE","\n\n    ",239],["T_PRIVATE","private",241],["T_WHITESPACE"," ",241],["T_FUNCTION","function",241],["T_WHITESPACE"," ",241],["T_STRING","_fillBackgroundColor",241],"(","&",["T_VARIABLE","$imageResourceTo",241],")",["T_WHITESPACE","\n    ",241],"{",["T_WHITESPACE","\n        ",242],["T_COMMENT","\/\/ try to keep transparency, if any\n",243],["T_WHITESPACE","        ",244],["T_IF","if",244],["T_WHITESPACE"," ",244],"(",["T_VARIABLE","$this",244],["T_OBJECT_OPERATOR","->",244],["T_STRING","_keepTransparency",244],")",["T_WHITESPACE"," ",244],"{",["T_WHITESPACE","\n            ",244],["T_VARIABLE","$isAlpha",245],["T_WHITESPACE"," ",245],"=",["T_WHITESPACE"," ",245],["T_STRING","false",245],";",["T_WHITESPACE","\n            ",245],["T_VARIABLE","$transparentIndex",246],["T_WHITESPACE"," ",246],"=",["T_WHITESPACE"," ",246],["T_VARIABLE","$this",246],["T_OBJECT_OPERATOR","->",246],["T_STRING","_getTransparency",246],"(",["T_VARIABLE","$this",246],["T_OBJECT_OPERATOR","->",246],["T_STRING","_imageHandler",246],",",["T_WHITESPACE"," ",246],["T_VARIABLE","$this",246],["T_OBJECT_OPERATOR","->",246],["T_STRING","_fileType",246],",",["T_WHITESPACE"," ",246],["T_VARIABLE","$isAlpha",246],")",";",["T_WHITESPACE","\n            ",246],["T_TRY","try",247],["T_WHITESPACE"," ",247],"{",["T_WHITESPACE","\n                ",247],["T_COMMENT","\/\/ fill truecolor png with alpha transparency\n",248],["T_WHITESPACE","                ",249],["T_IF","if",249],["T_WHITESPACE"," ",249],"(",["T_VARIABLE","$isAlpha",249],")",["T_WHITESPACE"," ",249],"{",["T_WHITESPACE","\n\n                    ",249],["T_IF","if",251],["T_WHITESPACE"," ",251],"(","!",["T_STRING","imagealphablending",251],"(",["T_VARIABLE","$imageResourceTo",251],",",["T_WHITESPACE"," ",251],["T_STRING","false",251],")",")",["T_WHITESPACE"," ",251],"{",["T_WHITESPACE","\n                        ",251],["T_THROW","throw",252],["T_WHITESPACE"," ",252],["T_NEW","new",252],["T_WHITESPACE"," ",252],["T_STRING","Exception",252],"(",["T_CONSTANT_ENCAPSED_STRING","'Failed to set alpha blending for PNG image.'",252],")",";",["T_WHITESPACE","\n                    ",252],"}",["T_WHITESPACE","\n                    ",253],["T_VARIABLE","$transparentAlphaColor",254],["T_WHITESPACE"," ",254],"=",["T_WHITESPACE"," ",254],["T_STRING","imagecolorallocatealpha",254],"(",["T_VARIABLE","$imageResourceTo",254],",",["T_WHITESPACE"," ",254],["T_LNUMBER","0",254],",",["T_WHITESPACE"," ",254],["T_LNUMBER","0",254],",",["T_WHITESPACE"," ",254],["T_LNUMBER","0",254],",",["T_WHITESPACE"," ",254],["T_LNUMBER","127",254],")",";",["T_WHITESPACE","\n                    ",254],["T_IF","if",255],["T_WHITESPACE"," ",255],"(",["T_STRING","false",255],["T_WHITESPACE"," ",255],["T_IS_IDENTICAL","===",255],["T_WHITESPACE"," ",255],["T_VARIABLE","$transparentAlphaColor",255],")",["T_WHITESPACE"," ",255],"{",["T_WHITESPACE","\n                        ",255],["T_THROW","throw",256],["T_WHITESPACE"," ",256],["T_NEW","new",256],["T_WHITESPACE"," ",256],["T_STRING","Exception",256],"(",["T_CONSTANT_ENCAPSED_STRING","'Failed to allocate alpha transparency for PNG image.'",256],")",";",["T_WHITESPACE","\n                    ",256],"}",["T_WHITESPACE","\n                    ",257],["T_IF","if",258],["T_WHITESPACE"," ",258],"(","!",["T_STRING","imagefill",258],"(",["T_VARIABLE","$imageResourceTo",258],",",["T_WHITESPACE"," ",258],["T_LNUMBER","0",258],",",["T_WHITESPACE"," ",258],["T_LNUMBER","0",258],",",["T_WHITESPACE"," ",258],["T_VARIABLE","$transparentAlphaColor",258],")",")",["T_WHITESPACE"," ",258],"{",["T_WHITESPACE","\n                        ",258],["T_THROW","throw",259],["T_WHITESPACE"," ",259],["T_NEW","new",259],["T_WHITESPACE"," ",259],["T_STRING","Exception",259],"(",["T_CONSTANT_ENCAPSED_STRING","'Failed to fill PNG image with alpha transparency.'",259],")",";",["T_WHITESPACE","\n                    ",259],"}",["T_WHITESPACE","\n                    ",260],["T_IF","if",261],["T_WHITESPACE"," ",261],"(","!",["T_STRING","imagesavealpha",261],"(",["T_VARIABLE","$imageResourceTo",261],",",["T_WHITESPACE"," ",261],["T_STRING","true",261],")",")",["T_WHITESPACE"," ",261],"{",["T_WHITESPACE","\n                        ",261],["T_THROW","throw",262],["T_WHITESPACE"," ",262],["T_NEW","new",262],["T_WHITESPACE"," ",262],["T_STRING","Exception",262],"(",["T_CONSTANT_ENCAPSED_STRING","'Failed to save alpha transparency into PNG image.'",262],")",";",["T_WHITESPACE","\n                    ",262],"}",["T_WHITESPACE","\n\n                    ",263],["T_RETURN","return",265],["T_WHITESPACE"," ",265],["T_VARIABLE","$transparentAlphaColor",265],";",["T_WHITESPACE","\n                ",265],"}",["T_WHITESPACE","\n                ",266],["T_COMMENT","\/\/ fill image with indexed non-alpha transparency\n",267],["T_WHITESPACE","                ",268],["T_ELSEIF","elseif",268],["T_WHITESPACE"," ",268],"(",["T_STRING","false",268],["T_WHITESPACE"," ",268],["T_IS_NOT_IDENTICAL","!==",268],["T_WHITESPACE"," ",268],["T_VARIABLE","$transparentIndex",268],")",["T_WHITESPACE"," ",268],"{",["T_WHITESPACE","\n                    ",268],["T_VARIABLE","$transparentColor",269],["T_WHITESPACE"," ",269],"=",["T_WHITESPACE"," ",269],["T_STRING","false",269],";",["T_WHITESPACE","\n                    ",269],["T_IF","if",270],["T_WHITESPACE"," ",270],"(",["T_VARIABLE","$transparentIndex",270],["T_WHITESPACE"," ",270],["T_IS_GREATER_OR_EQUAL",">=",270],["T_LNUMBER","0",270],["T_WHITESPACE"," ",270],["T_BOOLEAN_AND","&&",270],["T_WHITESPACE"," ",270],["T_VARIABLE","$transparentIndex",270],["T_WHITESPACE"," ",270],["T_IS_SMALLER_OR_EQUAL","<=",270],["T_WHITESPACE"," ",270],["T_STRING","imagecolorstotal",270],"(",["T_VARIABLE","$this",270],["T_OBJECT_OPERATOR","->",270],["T_STRING","_imageHandler",270],")",")",["T_WHITESPACE"," ",270],"{",["T_WHITESPACE","\n                        ",270],["T_LIST","list",271],"(",["T_VARIABLE","$r",271],",",["T_WHITESPACE"," ",271],["T_VARIABLE","$g",271],",",["T_WHITESPACE"," ",271],["T_VARIABLE","$b",271],")",["T_WHITESPACE","  ",271],"=",["T_WHITESPACE"," ",271],["T_STRING","array_values",271],"(",["T_STRING","imagecolorsforindex",271],"(",["T_VARIABLE","$this",271],["T_OBJECT_OPERATOR","->",271],["T_STRING","_imageHandler",271],",",["T_WHITESPACE"," ",271],["T_VARIABLE","$transparentIndex",271],")",")",";",["T_WHITESPACE","\n                        ",271],["T_VARIABLE","$transparentColor",272],["T_WHITESPACE"," ",272],"=",["T_WHITESPACE"," ",272],["T_STRING","imagecolorallocate",272],"(",["T_VARIABLE","$imageResourceTo",272],",",["T_WHITESPACE"," ",272],["T_VARIABLE","$r",272],",",["T_WHITESPACE"," ",272],["T_VARIABLE","$g",272],",",["T_WHITESPACE"," ",272],["T_VARIABLE","$b",272],")",";",["T_WHITESPACE","\n                    ",272],"}",["T_WHITESPACE","\n                    ",273],["T_IF","if",274],["T_WHITESPACE"," ",274],"(",["T_STRING","false",274],["T_WHITESPACE"," ",274],["T_IS_IDENTICAL","===",274],["T_WHITESPACE"," ",274],["T_VARIABLE","$transparentColor",274],")",["T_WHITESPACE"," ",274],"{",["T_WHITESPACE","\n                        ",274],["T_THROW","throw",275],["T_WHITESPACE"," ",275],["T_NEW","new",275],["T_WHITESPACE"," ",275],["T_STRING","Exception",275],"(",["T_CONSTANT_ENCAPSED_STRING","'Failed to allocate transparent color for image.'",275],")",";",["T_WHITESPACE","\n                    ",275],"}",["T_WHITESPACE","\n                    ",276],["T_IF","if",277],["T_WHITESPACE"," ",277],"(","!",["T_STRING","imagefill",277],"(",["T_VARIABLE","$imageResourceTo",277],",",["T_WHITESPACE"," ",277],["T_LNUMBER","0",277],",",["T_WHITESPACE"," ",277],["T_LNUMBER","0",277],",",["T_WHITESPACE"," ",277],["T_VARIABLE","$transparentColor",277],")",")",["T_WHITESPACE"," ",277],"{",["T_WHITESPACE","\n                        ",277],["T_THROW","throw",278],["T_WHITESPACE"," ",278],["T_NEW","new",278],["T_WHITESPACE"," ",278],["T_STRING","Exception",278],"(",["T_CONSTANT_ENCAPSED_STRING","'Failed to fill image with transparency.'",278],")",";",["T_WHITESPACE","\n                    ",278],"}",["T_WHITESPACE","\n                    ",279],["T_STRING","imagecolortransparent",280],"(",["T_VARIABLE","$imageResourceTo",280],",",["T_WHITESPACE"," ",280],["T_VARIABLE","$transparentColor",280],")",";",["T_WHITESPACE","\n                    ",280],["T_RETURN","return",281],["T_WHITESPACE"," ",281],["T_VARIABLE","$transparentColor",281],";",["T_WHITESPACE","\n                ",281],"}",["T_WHITESPACE","\n            ",282],"}",["T_WHITESPACE","\n            ",283],["T_CATCH","catch",284],["T_WHITESPACE"," ",284],"(",["T_STRING","Exception",284],["T_WHITESPACE"," ",284],["T_VARIABLE","$e",284],")",["T_WHITESPACE"," ",284],"{",["T_WHITESPACE","\n                ",284],["T_COMMENT","\/\/ fallback to default background color\n",285],["T_WHITESPACE","            ",286],"}",["T_WHITESPACE","\n        ",286],"}",["T_WHITESPACE","\n        ",287],["T_LIST","list",288],"(",["T_VARIABLE","$r",288],",",["T_WHITESPACE"," ",288],["T_VARIABLE","$g",288],",",["T_WHITESPACE"," ",288],["T_VARIABLE","$b",288],")",["T_WHITESPACE"," ",288],"=",["T_WHITESPACE"," ",288],["T_VARIABLE","$this",288],["T_OBJECT_OPERATOR","->",288],["T_STRING","_backgroundColor",288],";",["T_WHITESPACE","\n        ",288],["T_VARIABLE","$color",289],["T_WHITESPACE"," ",289],"=",["T_WHITESPACE"," ",289],["T_STRING","imagecolorallocate",289],"(",["T_VARIABLE","$imageResourceTo",289],",",["T_WHITESPACE"," ",289],["T_VARIABLE","$r",289],",",["T_WHITESPACE"," ",289],["T_VARIABLE","$g",289],",",["T_WHITESPACE"," ",289],["T_VARIABLE","$b",289],")",";",["T_WHITESPACE","\n        ",289],["T_IF","if",290],["T_WHITESPACE"," ",290],"(","!",["T_STRING","imagefill",290],"(",["T_VARIABLE","$imageResourceTo",290],",",["T_WHITESPACE"," ",290],["T_LNUMBER","0",290],",",["T_WHITESPACE"," ",290],["T_LNUMBER","0",290],",",["T_WHITESPACE"," ",290],["T_VARIABLE","$color",290],")",")",["T_WHITESPACE"," ",290],"{",["T_WHITESPACE","\n            ",290],["T_THROW","throw",291],["T_WHITESPACE"," ",291],["T_NEW","new",291],["T_WHITESPACE"," ",291],["T_STRING","Exception",291],"(","\"",["T_ENCAPSED_AND_WHITESPACE","Failed to fill image background with color ",291],["T_CURLY_OPEN","{",291],["T_VARIABLE","$r",291],"}",["T_ENCAPSED_AND_WHITESPACE"," ",291],["T_CURLY_OPEN","{",291],["T_VARIABLE","$g",291],"}",["T_ENCAPSED_AND_WHITESPACE"," ",291],["T_CURLY_OPEN","{",291],["T_VARIABLE","$b",291],"}",["T_ENCAPSED_AND_WHITESPACE",".",291],"\"",")",";",["T_WHITESPACE","\n        ",291],"}",["T_WHITESPACE","\n\n        ",292],["T_RETURN","return",294],["T_WHITESPACE"," ",294],["T_VARIABLE","$color",294],";",["T_WHITESPACE","\n    ",294],"}",["T_WHITESPACE","\n\n    ",295],["T_DOC_COMMENT","\/**\n     * Gives true for a PNG with alpha, false otherwise\n     *\n     * @param string $fileName\n     * @return boolean\n     *\/",297],["T_WHITESPACE","\n\n    ",302],["T_PUBLIC","public",304],["T_WHITESPACE"," ",304],["T_FUNCTION","function",304],["T_WHITESPACE"," ",304],["T_STRING","checkAlpha",304],"(",["T_VARIABLE","$fileName",304],")",["T_WHITESPACE","\n    ",304],"{",["T_WHITESPACE","\n        ",305],["T_RETURN","return",306],["T_WHITESPACE"," ",306],"(","(",["T_STRING","ord",306],"(",["T_STRING","file_get_contents",306],"(",["T_VARIABLE","$fileName",306],",",["T_WHITESPACE"," ",306],["T_STRING","false",306],",",["T_WHITESPACE"," ",306],["T_STRING","null",306],",",["T_WHITESPACE"," ",306],["T_LNUMBER","25",306],",",["T_WHITESPACE"," ",306],["T_LNUMBER","1",306],")",")",["T_WHITESPACE"," ",306],"&",["T_WHITESPACE"," ",306],["T_LNUMBER","6",306],")",["T_WHITESPACE"," ",306],"&",["T_WHITESPACE"," ",306],["T_LNUMBER","4",306],")",["T_WHITESPACE"," ",306],["T_IS_EQUAL","==",306],["T_WHITESPACE"," ",306],["T_LNUMBER","4",306],";",["T_WHITESPACE","\n    ",306],"}",["T_WHITESPACE","\n\n    ",307],["T_PRIVATE","private",309],["T_WHITESPACE"," ",309],["T_FUNCTION","function",309],["T_WHITESPACE"," ",309],["T_STRING","_getTransparency",309],"(",["T_VARIABLE","$imageResource",309],",",["T_WHITESPACE"," ",309],["T_VARIABLE","$fileType",309],",",["T_WHITESPACE"," ",309],"&",["T_VARIABLE","$isAlpha",309],["T_WHITESPACE"," ",309],"=",["T_WHITESPACE"," ",309],["T_STRING","false",309],",",["T_WHITESPACE"," ",309],"&",["T_VARIABLE","$isTrueColor",309],["T_WHITESPACE"," ",309],"=",["T_WHITESPACE"," ",309],["T_STRING","false",309],")",["T_WHITESPACE","\n    ",309],"{",["T_WHITESPACE","\n        ",310],["T_VARIABLE","$isAlpha",311],["T_WHITESPACE","     ",311],"=",["T_WHITESPACE"," ",311],["T_STRING","false",311],";",["T_WHITESPACE","\n        ",311],["T_VARIABLE","$isTrueColor",312],["T_WHITESPACE"," ",312],"=",["T_WHITESPACE"," ",312],["T_STRING","false",312],";",["T_WHITESPACE","\n        ",312],["T_COMMENT","\/\/ assume that transparency is supported by gif\/png only\n",313],["T_WHITESPACE","        ",314],["T_IF","if",314],["T_WHITESPACE"," ",314],"(","(",["T_STRING","IMAGETYPE_GIF",314],["T_WHITESPACE"," ",314],["T_IS_IDENTICAL","===",314],["T_WHITESPACE"," ",314],["T_VARIABLE","$fileType",314],")",["T_WHITESPACE"," ",314],["T_BOOLEAN_OR","||",314],["T_WHITESPACE"," ",314],"(",["T_STRING","IMAGETYPE_PNG",314],["T_WHITESPACE"," ",314],["T_IS_IDENTICAL","===",314],["T_WHITESPACE"," ",314],["T_VARIABLE","$fileType",314],")",")",["T_WHITESPACE"," ",314],"{",["T_WHITESPACE","\n            ",314],["T_COMMENT","\/\/ check for specific transparent color\n",315],["T_WHITESPACE","            ",316],["T_VARIABLE","$transparentIndex",316],["T_WHITESPACE"," ",316],"=",["T_WHITESPACE"," ",316],["T_STRING","imagecolortransparent",316],"(",["T_VARIABLE","$imageResource",316],")",";",["T_WHITESPACE","\n            ",316],["T_IF","if",317],["T_WHITESPACE"," ",317],"(",["T_VARIABLE","$transparentIndex",317],["T_WHITESPACE"," ",317],["T_IS_GREATER_OR_EQUAL",">=",317],["T_WHITESPACE"," ",317],["T_LNUMBER","0",317],")",["T_WHITESPACE"," ",317],"{",["T_WHITESPACE","\n                ",317],["T_RETURN","return",318],["T_WHITESPACE"," ",318],["T_VARIABLE","$transparentIndex",318],";",["T_WHITESPACE","\n            ",318],"}",["T_WHITESPACE","\n            ",319],["T_COMMENT","\/\/ assume that truecolor PNG has transparency\n",320],["T_WHITESPACE","            ",321],["T_ELSEIF","elseif",321],["T_WHITESPACE"," ",321],"(",["T_STRING","IMAGETYPE_PNG",321],["T_WHITESPACE"," ",321],["T_IS_IDENTICAL","===",321],["T_WHITESPACE"," ",321],["T_VARIABLE","$fileType",321],")",["T_WHITESPACE"," ",321],"{",["T_WHITESPACE","\n                ",321],["T_VARIABLE","$isAlpha",322],["T_WHITESPACE","     ",322],"=",["T_WHITESPACE"," ",322],["T_VARIABLE","$this",322],["T_OBJECT_OPERATOR","->",322],["T_STRING","checkAlpha",322],"(",["T_VARIABLE","$this",322],["T_OBJECT_OPERATOR","->",322],["T_STRING","_fileName",322],")",";",["T_WHITESPACE","\n                ",322],["T_VARIABLE","$isTrueColor",323],["T_WHITESPACE"," ",323],"=",["T_WHITESPACE"," ",323],["T_STRING","true",323],";",["T_WHITESPACE","\n                ",323],["T_RETURN","return",324],["T_WHITESPACE"," ",324],["T_VARIABLE","$transparentIndex",324],";",["T_WHITESPACE"," ",324],["T_COMMENT","\/\/ -1\n",324],["T_WHITESPACE","            ",325],"}",["T_WHITESPACE","\n        ",325],"}",["T_WHITESPACE","\n        ",326],["T_IF","if",327],["T_WHITESPACE"," ",327],"(",["T_STRING","IMAGETYPE_JPEG",327],["T_WHITESPACE"," ",327],["T_IS_IDENTICAL","===",327],["T_WHITESPACE"," ",327],["T_VARIABLE","$fileType",327],")",["T_WHITESPACE"," ",327],"{",["T_WHITESPACE","\n            ",327],["T_VARIABLE","$isTrueColor",328],["T_WHITESPACE"," ",328],"=",["T_WHITESPACE"," ",328],["T_STRING","true",328],";",["T_WHITESPACE","\n        ",328],"}",["T_WHITESPACE","\n        ",329],["T_RETURN","return",330],["T_WHITESPACE"," ",330],["T_STRING","false",330],";",["T_WHITESPACE","\n    ",330],"}",["T_WHITESPACE","\n\n    ",331],["T_DOC_COMMENT","\/**\n     * Change the image size\n     *\n     * @param int $frameWidth\n     * @param int $frameHeight\n     *\/",333],["T_WHITESPACE","\n    ",338],["T_PUBLIC","public",339],["T_WHITESPACE"," ",339],["T_FUNCTION","function",339],["T_WHITESPACE"," ",339],["T_STRING","resize",339],"(",["T_VARIABLE","$frameWidth",339],["T_WHITESPACE"," ",339],"=",["T_WHITESPACE"," ",339],["T_STRING","null",339],",",["T_WHITESPACE"," ",339],["T_VARIABLE","$frameHeight",339],["T_WHITESPACE"," ",339],"=",["T_WHITESPACE"," ",339],["T_STRING","null",339],")",["T_WHITESPACE","\n    ",339],"{",["T_WHITESPACE","\n        ",340],["T_IF","if",341],["T_WHITESPACE"," ",341],"(",["T_EMPTY","empty",341],"(",["T_VARIABLE","$frameWidth",341],")",["T_WHITESPACE"," ",341],["T_BOOLEAN_AND","&&",341],["T_WHITESPACE"," ",341],["T_EMPTY","empty",341],"(",["T_VARIABLE","$frameHeight",341],")",")",["T_WHITESPACE"," ",341],"{",["T_WHITESPACE","\n            ",341],["T_THROW","throw",342],["T_WHITESPACE"," ",342],["T_NEW","new",342],["T_WHITESPACE"," ",342],["T_STRING","Exception",342],"(",["T_CONSTANT_ENCAPSED_STRING","'Invalid image dimensions.'",342],")",";",["T_WHITESPACE","\n        ",342],"}",["T_WHITESPACE","\n\n        ",343],["T_COMMENT","\/\/ calculate lacking dimension\n",345],["T_WHITESPACE","        ",346],["T_IF","if",346],["T_WHITESPACE"," ",346],"(","!",["T_VARIABLE","$this",346],["T_OBJECT_OPERATOR","->",346],["T_STRING","_keepFrame",346],")",["T_WHITESPACE"," ",346],"{",["T_WHITESPACE","\n            ",346],["T_IF","if",347],["T_WHITESPACE"," ",347],"(",["T_STRING","null",347],["T_WHITESPACE"," ",347],["T_IS_IDENTICAL","===",347],["T_WHITESPACE"," ",347],["T_VARIABLE","$frameWidth",347],")",["T_WHITESPACE"," ",347],"{",["T_WHITESPACE","\n                ",347],["T_VARIABLE","$frameWidth",348],["T_WHITESPACE"," ",348],"=",["T_WHITESPACE"," ",348],["T_STRING","round",348],"(",["T_VARIABLE","$frameHeight",348],["T_WHITESPACE"," ",348],"*",["T_WHITESPACE"," ",348],"(",["T_VARIABLE","$this",348],["T_OBJECT_OPERATOR","->",348],["T_STRING","_imageSrcWidth",348],["T_WHITESPACE"," ",348],"\/",["T_WHITESPACE"," ",348],["T_VARIABLE","$this",348],["T_OBJECT_OPERATOR","->",348],["T_STRING","_imageSrcHeight",348],")",")",";",["T_WHITESPACE","\n            ",348],"}",["T_WHITESPACE","\n            ",349],["T_ELSEIF","elseif",350],["T_WHITESPACE"," ",350],"(",["T_STRING","null",350],["T_WHITESPACE"," ",350],["T_IS_IDENTICAL","===",350],["T_WHITESPACE"," ",350],["T_VARIABLE","$frameHeight",350],")",["T_WHITESPACE"," ",350],"{",["T_WHITESPACE","\n                ",350],["T_VARIABLE","$frameHeight",351],["T_WHITESPACE"," ",351],"=",["T_WHITESPACE"," ",351],["T_STRING","round",351],"(",["T_VARIABLE","$frameWidth",351],["T_WHITESPACE"," ",351],"*",["T_WHITESPACE"," ",351],"(",["T_VARIABLE","$this",351],["T_OBJECT_OPERATOR","->",351],["T_STRING","_imageSrcHeight",351],["T_WHITESPACE"," ",351],"\/",["T_WHITESPACE"," ",351],["T_VARIABLE","$this",351],["T_OBJECT_OPERATOR","->",351],["T_STRING","_imageSrcWidth",351],")",")",";",["T_WHITESPACE","\n            ",351],"}",["T_WHITESPACE","\n        ",352],"}",["T_WHITESPACE","\n        ",353],["T_ELSE","else",354],["T_WHITESPACE"," ",354],"{",["T_WHITESPACE","\n            ",354],["T_IF","if",355],["T_WHITESPACE"," ",355],"(",["T_STRING","null",355],["T_WHITESPACE"," ",355],["T_IS_IDENTICAL","===",355],["T_WHITESPACE"," ",355],["T_VARIABLE","$frameWidth",355],")",["T_WHITESPACE"," ",355],"{",["T_WHITESPACE","\n                ",355],["T_VARIABLE","$frameWidth",356],["T_WHITESPACE"," ",356],"=",["T_WHITESPACE"," ",356],["T_VARIABLE","$frameHeight",356],";",["T_WHITESPACE","\n            ",356],"}",["T_WHITESPACE","\n            ",357],["T_ELSEIF","elseif",358],["T_WHITESPACE"," ",358],"(",["T_STRING","null",358],["T_WHITESPACE"," ",358],["T_IS_IDENTICAL","===",358],["T_WHITESPACE"," ",358],["T_VARIABLE","$frameHeight",358],")",["T_WHITESPACE"," ",358],"{",["T_WHITESPACE","\n                ",358],["T_VARIABLE","$frameHeight",359],["T_WHITESPACE"," ",359],"=",["T_WHITESPACE"," ",359],["T_VARIABLE","$frameWidth",359],";",["T_WHITESPACE","\n            ",359],"}",["T_WHITESPACE","\n        ",360],"}",["T_WHITESPACE","\n\n        ",361],["T_COMMENT","\/\/ define coordinates of image inside new frame\n",363],["T_WHITESPACE","        ",364],["T_VARIABLE","$srcX",364],["T_WHITESPACE"," ",364],"=",["T_WHITESPACE"," ",364],["T_LNUMBER","0",364],";",["T_WHITESPACE","\n        ",364],["T_VARIABLE","$srcY",365],["T_WHITESPACE"," ",365],"=",["T_WHITESPACE"," ",365],["T_LNUMBER","0",365],";",["T_WHITESPACE","\n        ",365],["T_VARIABLE","$dstX",366],["T_WHITESPACE"," ",366],"=",["T_WHITESPACE"," ",366],["T_LNUMBER","0",366],";",["T_WHITESPACE","\n        ",366],["T_VARIABLE","$dstY",367],["T_WHITESPACE"," ",367],"=",["T_WHITESPACE"," ",367],["T_LNUMBER","0",367],";",["T_WHITESPACE","\n        ",367],["T_VARIABLE","$dstWidth",368],["T_WHITESPACE","  ",368],"=",["T_WHITESPACE"," ",368],["T_VARIABLE","$frameWidth",368],";",["T_WHITESPACE","\n        ",368],["T_VARIABLE","$dstHeight",369],["T_WHITESPACE"," ",369],"=",["T_WHITESPACE"," ",369],["T_VARIABLE","$frameHeight",369],";",["T_WHITESPACE","\n        ",369],["T_IF","if",370],["T_WHITESPACE"," ",370],"(",["T_VARIABLE","$this",370],["T_OBJECT_OPERATOR","->",370],["T_STRING","_keepAspectRatio",370],")",["T_WHITESPACE"," ",370],"{",["T_WHITESPACE","\n            ",370],["T_COMMENT","\/\/ do not make picture bigger, than it is, if required\n",371],["T_WHITESPACE","            ",372],["T_IF","if",372],["T_WHITESPACE"," ",372],"(",["T_VARIABLE","$this",372],["T_OBJECT_OPERATOR","->",372],["T_STRING","_constrainOnly",372],")",["T_WHITESPACE"," ",372],"{",["T_WHITESPACE","\n                ",372],["T_IF","if",373],["T_WHITESPACE"," ",373],"(","(",["T_VARIABLE","$frameWidth",373],["T_WHITESPACE"," ",373],["T_IS_GREATER_OR_EQUAL",">=",373],["T_WHITESPACE"," ",373],["T_VARIABLE","$this",373],["T_OBJECT_OPERATOR","->",373],["T_STRING","_imageSrcWidth",373],")",["T_WHITESPACE"," ",373],["T_BOOLEAN_AND","&&",373],["T_WHITESPACE"," ",373],"(",["T_VARIABLE","$frameHeight",373],["T_WHITESPACE"," ",373],["T_IS_GREATER_OR_EQUAL",">=",373],["T_WHITESPACE"," ",373],["T_VARIABLE","$this",373],["T_OBJECT_OPERATOR","->",373],["T_STRING","_imageSrcHeight",373],")",")",["T_WHITESPACE"," ",373],"{",["T_WHITESPACE","\n                    ",373],["T_VARIABLE","$dstWidth",374],["T_WHITESPACE","  ",374],"=",["T_WHITESPACE"," ",374],["T_VARIABLE","$this",374],["T_OBJECT_OPERATOR","->",374],["T_STRING","_imageSrcWidth",374],";",["T_WHITESPACE","\n                    ",374],["T_VARIABLE","$dstHeight",375],["T_WHITESPACE"," ",375],"=",["T_WHITESPACE"," ",375],["T_VARIABLE","$this",375],["T_OBJECT_OPERATOR","->",375],["T_STRING","_imageSrcHeight",375],";",["T_WHITESPACE","\n                ",375],"}",["T_WHITESPACE","\n            ",376],"}",["T_WHITESPACE","\n            ",377],["T_COMMENT","\/\/ keep aspect ratio\n",378],["T_WHITESPACE","            ",379],["T_IF","if",379],["T_WHITESPACE"," ",379],"(",["T_VARIABLE","$this",379],["T_OBJECT_OPERATOR","->",379],["T_STRING","_imageSrcWidth",379],["T_WHITESPACE"," ",379],"\/",["T_WHITESPACE"," ",379],["T_VARIABLE","$this",379],["T_OBJECT_OPERATOR","->",379],["T_STRING","_imageSrcHeight",379],["T_WHITESPACE"," ",379],["T_IS_GREATER_OR_EQUAL",">=",379],["T_WHITESPACE"," ",379],["T_VARIABLE","$frameWidth",379],["T_WHITESPACE"," ",379],"\/",["T_WHITESPACE"," ",379],["T_VARIABLE","$frameHeight",379],")",["T_WHITESPACE"," ",379],"{",["T_WHITESPACE","\n                ",379],["T_VARIABLE","$dstHeight",380],["T_WHITESPACE"," ",380],"=",["T_WHITESPACE"," ",380],["T_STRING","round",380],"(","(",["T_VARIABLE","$dstWidth",380],["T_WHITESPACE"," ",380],"\/",["T_WHITESPACE"," ",380],["T_VARIABLE","$this",380],["T_OBJECT_OPERATOR","->",380],["T_STRING","_imageSrcWidth",380],")",["T_WHITESPACE"," ",380],"*",["T_WHITESPACE"," ",380],["T_VARIABLE","$this",380],["T_OBJECT_OPERATOR","->",380],["T_STRING","_imageSrcHeight",380],")",";",["T_WHITESPACE","\n            ",380],"}",["T_WHITESPACE"," ",381],["T_ELSE","else",381],["T_WHITESPACE"," ",381],"{",["T_WHITESPACE","\n                ",381],["T_VARIABLE","$dstWidth",382],["T_WHITESPACE"," ",382],"=",["T_WHITESPACE"," ",382],["T_STRING","round",382],"(","(",["T_VARIABLE","$dstHeight",382],["T_WHITESPACE"," ",382],"\/",["T_WHITESPACE"," ",382],["T_VARIABLE","$this",382],["T_OBJECT_OPERATOR","->",382],["T_STRING","_imageSrcHeight",382],")",["T_WHITESPACE"," ",382],"*",["T_WHITESPACE"," ",382],["T_VARIABLE","$this",382],["T_OBJECT_OPERATOR","->",382],["T_STRING","_imageSrcWidth",382],")",";",["T_WHITESPACE","\n            ",382],"}",["T_WHITESPACE","\n        ",383],"}",["T_WHITESPACE","\n        ",384],["T_COMMENT","\/\/ define position in center (TODO: add positions option)\n",385],["T_WHITESPACE","        ",386],["T_VARIABLE","$dstY",386],["T_WHITESPACE"," ",386],"=",["T_WHITESPACE"," ",386],["T_STRING","round",386],"(","(",["T_VARIABLE","$frameHeight",386],["T_WHITESPACE"," ",386],"-",["T_WHITESPACE"," ",386],["T_VARIABLE","$dstHeight",386],")",["T_WHITESPACE"," ",386],"\/",["T_WHITESPACE"," ",386],["T_LNUMBER","2",386],")",";",["T_WHITESPACE","\n        ",386],["T_VARIABLE","$dstX",387],["T_WHITESPACE"," ",387],"=",["T_WHITESPACE"," ",387],["T_STRING","round",387],"(","(",["T_VARIABLE","$frameWidth",387],["T_WHITESPACE"," ",387],"-",["T_WHITESPACE"," ",387],["T_VARIABLE","$dstWidth",387],")",["T_WHITESPACE"," ",387],"\/",["T_WHITESPACE"," ",387],["T_LNUMBER","2",387],")",";",["T_WHITESPACE","\n\n        ",387],["T_COMMENT","\/\/ get rid of frame (fallback to zero position coordinates)\n",389],["T_WHITESPACE","        ",390],["T_IF","if",390],["T_WHITESPACE"," ",390],"(","!",["T_VARIABLE","$this",390],["T_OBJECT_OPERATOR","->",390],["T_STRING","_keepFrame",390],")",["T_WHITESPACE"," ",390],"{",["T_WHITESPACE","\n            ",390],["T_VARIABLE","$frameWidth",391],["T_WHITESPACE","  ",391],"=",["T_WHITESPACE"," ",391],["T_VARIABLE","$dstWidth",391],";",["T_WHITESPACE","\n            ",391],["T_VARIABLE","$frameHeight",392],["T_WHITESPACE"," ",392],"=",["T_WHITESPACE"," ",392],["T_VARIABLE","$dstHeight",392],";",["T_WHITESPACE","\n            ",392],["T_VARIABLE","$dstY",393],["T_WHITESPACE"," ",393],"=",["T_WHITESPACE"," ",393],["T_LNUMBER","0",393],";",["T_WHITESPACE","\n            ",393],["T_VARIABLE","$dstX",394],["T_WHITESPACE"," ",394],"=",["T_WHITESPACE"," ",394],["T_LNUMBER","0",394],";",["T_WHITESPACE","\n        ",394],"}",["T_WHITESPACE","\n\n        ",395],["T_COMMENT","\/\/ create new image\n",397],["T_WHITESPACE","        ",398],["T_VARIABLE","$isAlpha",398],["T_WHITESPACE","     ",398],"=",["T_WHITESPACE"," ",398],["T_STRING","false",398],";",["T_WHITESPACE","\n        ",398],["T_VARIABLE","$isTrueColor",399],["T_WHITESPACE"," ",399],"=",["T_WHITESPACE"," ",399],["T_STRING","false",399],";",["T_WHITESPACE","\n        ",399],["T_VARIABLE","$this",400],["T_OBJECT_OPERATOR","->",400],["T_STRING","_getTransparency",400],"(",["T_VARIABLE","$this",400],["T_OBJECT_OPERATOR","->",400],["T_STRING","_imageHandler",400],",",["T_WHITESPACE"," ",400],["T_VARIABLE","$this",400],["T_OBJECT_OPERATOR","->",400],["T_STRING","_fileType",400],",",["T_WHITESPACE"," ",400],["T_VARIABLE","$isAlpha",400],",",["T_WHITESPACE"," ",400],["T_VARIABLE","$isTrueColor",400],")",";",["T_WHITESPACE","\n        ",400],["T_IF","if",401],["T_WHITESPACE"," ",401],"(",["T_VARIABLE","$isTrueColor",401],")",["T_WHITESPACE"," ",401],"{",["T_WHITESPACE","\n            ",401],["T_VARIABLE","$newImage",402],["T_WHITESPACE"," ",402],"=",["T_WHITESPACE"," ",402],["T_STRING","imagecreatetruecolor",402],"(",["T_VARIABLE","$frameWidth",402],",",["T_WHITESPACE"," ",402],["T_VARIABLE","$frameHeight",402],")",";",["T_WHITESPACE","\n        ",402],"}",["T_WHITESPACE","\n        ",403],["T_ELSE","else",404],["T_WHITESPACE"," ",404],"{",["T_WHITESPACE","\n            ",404],["T_VARIABLE","$newImage",405],["T_WHITESPACE"," ",405],"=",["T_WHITESPACE"," ",405],["T_STRING","imagecreate",405],"(",["T_VARIABLE","$frameWidth",405],",",["T_WHITESPACE"," ",405],["T_VARIABLE","$frameHeight",405],")",";",["T_WHITESPACE","\n        ",405],"}",["T_WHITESPACE","\n\n        ",406],["T_COMMENT","\/\/ fill new image with required color\n",408],["T_WHITESPACE","        ",409],["T_VARIABLE","$this",409],["T_OBJECT_OPERATOR","->",409],["T_STRING","_fillBackgroundColor",409],"(",["T_VARIABLE","$newImage",409],")",";",["T_WHITESPACE","\n\n        ",409],["T_COMMENT","\/\/ resample source image and copy it into new frame\n",411],["T_WHITESPACE","        ",412],["T_STRING","imagecopyresampled",412],"(",["T_WHITESPACE","\n            ",412],["T_VARIABLE","$newImage",413],",",["T_WHITESPACE","\n            ",413],["T_VARIABLE","$this",414],["T_OBJECT_OPERATOR","->",414],["T_STRING","_imageHandler",414],",",["T_WHITESPACE","\n            ",414],["T_VARIABLE","$dstX",415],",",["T_WHITESPACE"," ",415],["T_VARIABLE","$dstY",415],",",["T_WHITESPACE","\n            ",415],["T_VARIABLE","$srcX",416],",",["T_WHITESPACE"," ",416],["T_VARIABLE","$srcY",416],",",["T_WHITESPACE","\n            ",416],["T_VARIABLE","$dstWidth",417],",",["T_WHITESPACE"," ",417],["T_VARIABLE","$dstHeight",417],",",["T_WHITESPACE","\n            ",417],["T_VARIABLE","$this",418],["T_OBJECT_OPERATOR","->",418],["T_STRING","_imageSrcWidth",418],",",["T_WHITESPACE"," ",418],["T_VARIABLE","$this",418],["T_OBJECT_OPERATOR","->",418],["T_STRING","_imageSrcHeight",418],["T_WHITESPACE","\n        ",418],")",";",["T_WHITESPACE","\n        ",419],["T_VARIABLE","$this",420],["T_OBJECT_OPERATOR","->",420],["T_STRING","_imageHandler",420],["T_WHITESPACE"," ",420],"=",["T_WHITESPACE"," ",420],["T_VARIABLE","$newImage",420],";",["T_WHITESPACE","\n        ",420],["T_VARIABLE","$this",421],["T_OBJECT_OPERATOR","->",421],["T_STRING","refreshImageDimensions",421],"(",")",";",["T_WHITESPACE","\n        ",421],["T_VARIABLE","$this",422],["T_OBJECT_OPERATOR","->",422],["T_STRING","_resized",422],["T_WHITESPACE"," ",422],"=",["T_WHITESPACE"," ",422],["T_STRING","true",422],";",["T_WHITESPACE","\n    ",422],"}",["T_WHITESPACE","\n\n    ",423],["T_PUBLIC","public",425],["T_WHITESPACE"," ",425],["T_FUNCTION","function",425],["T_WHITESPACE"," ",425],["T_STRING","rotate",425],"(",["T_VARIABLE","$angle",425],")",["T_WHITESPACE","\n    ",425],"{",["T_WHITESPACE","\n",426],["T_COMMENT","\/*\n        $isAlpha = false;\n        $backgroundColor = $this->_getTransparency($this->_imageHandler, $this->_fileType, $isAlpha);\n        list($r, $g, $b) = $this->_backgroundColor;\n        if ($isAlpha) {\n            $backgroundColor = imagecolorallocatealpha($this->_imageHandler, 0, 0, 0, 127);\n        }\n        elseif (false === $backgroundColor) {\n            $backgroundColor = imagecolorallocate($this->_imageHandler, $r, $g, $b);\n        }\n        $this->_imageHandler = imagerotate($this->_imageHandler, $angle, $backgroundColor);\n\/\/*\/",427],["T_WHITESPACE","\n        ",438],["T_VARIABLE","$this",439],["T_OBJECT_OPERATOR","->",439],["T_STRING","_imageHandler",439],["T_WHITESPACE"," ",439],"=",["T_WHITESPACE"," ",439],["T_STRING","imagerotate",439],"(",["T_VARIABLE","$this",439],["T_OBJECT_OPERATOR","->",439],["T_STRING","_imageHandler",439],",",["T_WHITESPACE"," ",439],["T_VARIABLE","$angle",439],",",["T_WHITESPACE"," ",439],["T_VARIABLE","$this",439],["T_OBJECT_OPERATOR","->",439],["T_STRING","imageBackgroundColor",439],")",";",["T_WHITESPACE","\n        ",439],["T_VARIABLE","$this",440],["T_OBJECT_OPERATOR","->",440],["T_STRING","refreshImageDimensions",440],"(",")",";",["T_WHITESPACE","\n    ",440],"}",["T_WHITESPACE","\n\n    ",441],["T_PUBLIC","public",443],["T_WHITESPACE"," ",443],["T_FUNCTION","function",443],["T_WHITESPACE"," ",443],["T_STRING","watermark",443],"(",["T_VARIABLE","$watermarkImage",443],",",["T_WHITESPACE"," ",443],["T_VARIABLE","$positionX",443],"=",["T_LNUMBER","0",443],",",["T_WHITESPACE"," ",443],["T_VARIABLE","$positionY",443],"=",["T_LNUMBER","0",443],",",["T_WHITESPACE"," ",443],["T_VARIABLE","$watermarkImageOpacity",443],"=",["T_LNUMBER","30",443],",",["T_WHITESPACE"," ",443],["T_VARIABLE","$repeat",443],"=",["T_STRING","false",443],")",["T_WHITESPACE","\n    ",443],"{",["T_WHITESPACE","\n        ",444],["T_LIST","list",445],"(",["T_VARIABLE","$watermarkSrcWidth",445],",",["T_WHITESPACE"," ",445],["T_VARIABLE","$watermarkSrcHeight",445],",",["T_WHITESPACE"," ",445],["T_VARIABLE","$watermarkFileType",445],",",["T_WHITESPACE"," ",445],")",["T_WHITESPACE"," ",445],"=",["T_WHITESPACE"," ",445],["T_STRING","getimagesize",445],"(",["T_VARIABLE","$watermarkImage",445],")",";",["T_WHITESPACE","\n        ",445],["T_VARIABLE","$this",446],["T_OBJECT_OPERATOR","->",446],["T_STRING","_getFileAttributes",446],"(",")",";",["T_WHITESPACE","\n        ",446],["T_VARIABLE","$watermark",447],["T_WHITESPACE"," ",447],"=",["T_WHITESPACE"," ",447],["T_STRING","call_user_func",447],"(",["T_VARIABLE","$this",447],["T_OBJECT_OPERATOR","->",447],["T_STRING","_getCallback",447],"(",["T_WHITESPACE","\n            ",447],["T_CONSTANT_ENCAPSED_STRING","'create'",448],",",["T_WHITESPACE","\n            ",448],["T_VARIABLE","$watermarkFileType",449],",",["T_WHITESPACE","\n            ",449],["T_CONSTANT_ENCAPSED_STRING","'Unsupported watermark image format.'",450],["T_WHITESPACE","\n        ",450],")",",",["T_WHITESPACE"," ",451],["T_VARIABLE","$watermarkImage",451],")",";",["T_WHITESPACE","\n\n        ",451],["T_VARIABLE","$merged",453],["T_WHITESPACE"," ",453],"=",["T_WHITESPACE"," ",453],["T_STRING","false",453],";",["T_WHITESPACE","\n\n        ",453],["T_IF","if",455],["T_WHITESPACE"," ",455],"(",["T_VARIABLE","$this",455],["T_OBJECT_OPERATOR","->",455],["T_STRING","getWatermarkWidth",455],"(",")",["T_WHITESPACE"," ",455],["T_BOOLEAN_AND","&&",455],["T_WHITESPACE","\n            ",455],["T_VARIABLE","$this",456],["T_OBJECT_OPERATOR","->",456],["T_STRING","getWatermarkHeigth",456],"(",")",["T_WHITESPACE"," ",456],["T_BOOLEAN_AND","&&",456],["T_WHITESPACE","\n            ",456],"(",["T_VARIABLE","$this",457],["T_OBJECT_OPERATOR","->",457],["T_STRING","getWatermarkPosition",457],"(",")",["T_WHITESPACE"," ",457],["T_IS_NOT_EQUAL","!=",457],["T_WHITESPACE"," ",457],["T_STRING","self",457],["T_DOUBLE_COLON","::",457],["T_STRING","POSITION_STRETCH",457],")",["T_WHITESPACE","\n        ",457],")",["T_WHITESPACE"," ",458],"{",["T_WHITESPACE","\n            ",458],["T_VARIABLE","$newWatermark",459],["T_WHITESPACE"," ",459],"=",["T_WHITESPACE"," ",459],["T_STRING","imagecreatetruecolor",459],"(",["T_VARIABLE","$this",459],["T_OBJECT_OPERATOR","->",459],["T_STRING","getWatermarkWidth",459],"(",")",",",["T_WHITESPACE"," ",459],["T_VARIABLE","$this",459],["T_OBJECT_OPERATOR","->",459],["T_STRING","getWatermarkHeigth",459],"(",")",")",";",["T_WHITESPACE","\n            ",459],["T_STRING","imagealphablending",460],"(",["T_VARIABLE","$newWatermark",460],",",["T_WHITESPACE"," ",460],["T_STRING","false",460],")",";",["T_WHITESPACE","\n            ",460],["T_VARIABLE","$col",461],["T_WHITESPACE"," ",461],"=",["T_WHITESPACE"," ",461],["T_STRING","imagecolorallocate",461],"(",["T_VARIABLE","$newWatermark",461],",",["T_WHITESPACE"," ",461],["T_LNUMBER","255",461],",",["T_WHITESPACE"," ",461],["T_LNUMBER","255",461],",",["T_WHITESPACE"," ",461],["T_LNUMBER","255",461],")",";",["T_WHITESPACE","\n            ",461],["T_STRING","imagecolortransparent",462],"(",["T_VARIABLE","$newWatermark",462],",",["T_WHITESPACE"," ",462],["T_VARIABLE","$col",462],")",";",["T_WHITESPACE","\n            ",462],["T_STRING","imagefilledrectangle",463],"(",["T_VARIABLE","$newWatermark",463],",",["T_WHITESPACE"," ",463],["T_LNUMBER","0",463],",",["T_WHITESPACE"," ",463],["T_LNUMBER","0",463],",",["T_WHITESPACE"," ",463],["T_VARIABLE","$this",463],["T_OBJECT_OPERATOR","->",463],["T_STRING","getWatermarkWidth",463],"(",")",",",["T_WHITESPACE"," ",463],["T_VARIABLE","$this",463],["T_OBJECT_OPERATOR","->",463],["T_STRING","getWatermarkHeigth",463],"(",")",",",["T_WHITESPACE"," ",463],["T_VARIABLE","$col",463],")",";",["T_WHITESPACE","\n            ",463],["T_STRING","imagealphablending",464],"(",["T_VARIABLE","$newWatermark",464],",",["T_WHITESPACE"," ",464],["T_STRING","true",464],")",";",["T_WHITESPACE","\n            ",464],["T_STRING","imageSaveAlpha",465],"(",["T_VARIABLE","$newWatermark",465],",",["T_WHITESPACE"," ",465],["T_STRING","true",465],")",";",["T_WHITESPACE","\n            ",465],["T_STRING","imagecopyresampled",466],"(",["T_WHITESPACE","\n                ",466],["T_VARIABLE","$newWatermark",467],",",["T_WHITESPACE","\n                ",467],["T_VARIABLE","$watermark",468],",",["T_WHITESPACE","\n                ",468],["T_LNUMBER","0",469],",",["T_WHITESPACE"," ",469],["T_LNUMBER","0",469],",",["T_WHITESPACE"," ",469],["T_LNUMBER","0",469],",",["T_WHITESPACE"," ",469],["T_LNUMBER","0",469],",",["T_WHITESPACE","\n                ",469],["T_VARIABLE","$this",470],["T_OBJECT_OPERATOR","->",470],["T_STRING","getWatermarkWidth",470],"(",")",",",["T_WHITESPACE"," ",470],["T_VARIABLE","$this",470],["T_OBJECT_OPERATOR","->",470],["T_STRING","getWatermarkHeigth",470],"(",")",",",["T_WHITESPACE","\n                ",470],["T_STRING","imagesx",471],"(",["T_VARIABLE","$watermark",471],")",",",["T_WHITESPACE"," ",471],["T_STRING","imagesy",471],"(",["T_VARIABLE","$watermark",471],")",["T_WHITESPACE","\n            ",471],")",";",["T_WHITESPACE","\n            ",472],["T_VARIABLE","$watermark",473],["T_WHITESPACE"," ",473],"=",["T_WHITESPACE"," ",473],["T_VARIABLE","$newWatermark",473],";",["T_WHITESPACE","\n        ",473],"}",["T_WHITESPACE","\n\n        ",474],["T_IF","if",476],"(",["T_WHITESPACE"," ",476],["T_VARIABLE","$this",476],["T_OBJECT_OPERATOR","->",476],["T_STRING","getWatermarkPosition",476],"(",")",["T_WHITESPACE"," ",476],["T_IS_EQUAL","==",476],["T_WHITESPACE"," ",476],["T_STRING","self",476],["T_DOUBLE_COLON","::",476],["T_STRING","POSITION_TILE",476],["T_WHITESPACE"," ",476],")",["T_WHITESPACE"," ",476],"{",["T_WHITESPACE","\n            ",476],["T_VARIABLE","$repeat",477],["T_WHITESPACE"," ",477],"=",["T_WHITESPACE"," ",477],["T_STRING","true",477],";",["T_WHITESPACE","\n        ",477],"}",["T_WHITESPACE"," ",478],["T_ELSEIF","elseif",478],"(",["T_WHITESPACE"," ",478],["T_VARIABLE","$this",478],["T_OBJECT_OPERATOR","->",478],["T_STRING","getWatermarkPosition",478],"(",")",["T_WHITESPACE"," ",478],["T_IS_EQUAL","==",478],["T_WHITESPACE"," ",478],["T_STRING","self",478],["T_DOUBLE_COLON","::",478],["T_STRING","POSITION_STRETCH",478],["T_WHITESPACE"," ",478],")",["T_WHITESPACE"," ",478],"{",["T_WHITESPACE","\n\n            ",478],["T_VARIABLE","$newWatermark",480],["T_WHITESPACE"," ",480],"=",["T_WHITESPACE"," ",480],["T_STRING","imagecreatetruecolor",480],"(",["T_VARIABLE","$this",480],["T_OBJECT_OPERATOR","->",480],["T_STRING","_imageSrcWidth",480],",",["T_WHITESPACE"," ",480],["T_VARIABLE","$this",480],["T_OBJECT_OPERATOR","->",480],["T_STRING","_imageSrcHeight",480],")",";",["T_WHITESPACE","\n            ",480],["T_STRING","imagealphablending",481],"(",["T_VARIABLE","$newWatermark",481],",",["T_WHITESPACE"," ",481],["T_STRING","false",481],")",";",["T_WHITESPACE","\n            ",481],["T_VARIABLE","$col",482],["T_WHITESPACE"," ",482],"=",["T_WHITESPACE"," ",482],["T_STRING","imagecolorallocate",482],"(",["T_VARIABLE","$newWatermark",482],",",["T_WHITESPACE"," ",482],["T_LNUMBER","255",482],",",["T_WHITESPACE"," ",482],["T_LNUMBER","255",482],",",["T_WHITESPACE"," ",482],["T_LNUMBER","255",482],")",";",["T_WHITESPACE","\n            ",482],["T_STRING","imagecolortransparent",483],"(",["T_VARIABLE","$newWatermark",483],",",["T_WHITESPACE"," ",483],["T_VARIABLE","$col",483],")",";",["T_WHITESPACE","\n            ",483],["T_STRING","imagefilledrectangle",484],"(",["T_VARIABLE","$newWatermark",484],",",["T_WHITESPACE"," ",484],["T_LNUMBER","0",484],",",["T_WHITESPACE"," ",484],["T_LNUMBER","0",484],",",["T_WHITESPACE"," ",484],["T_VARIABLE","$this",484],["T_OBJECT_OPERATOR","->",484],["T_STRING","_imageSrcWidth",484],",",["T_WHITESPACE"," ",484],["T_VARIABLE","$this",484],["T_OBJECT_OPERATOR","->",484],["T_STRING","_imageSrcHeight",484],",",["T_WHITESPACE"," ",484],["T_VARIABLE","$col",484],")",";",["T_WHITESPACE","\n            ",484],["T_STRING","imagealphablending",485],"(",["T_VARIABLE","$newWatermark",485],",",["T_WHITESPACE"," ",485],["T_STRING","true",485],")",";",["T_WHITESPACE","\n            ",485],["T_STRING","imageSaveAlpha",486],"(",["T_VARIABLE","$newWatermark",486],",",["T_WHITESPACE"," ",486],["T_STRING","true",486],")",";",["T_WHITESPACE","\n            ",486],["T_STRING","imagecopyresampled",487],"(",["T_WHITESPACE","\n                ",487],["T_VARIABLE","$newWatermark",488],",",["T_WHITESPACE","\n                ",488],["T_VARIABLE","$watermark",489],",",["T_WHITESPACE","\n                ",489],["T_LNUMBER","0",490],",",["T_WHITESPACE"," ",490],["T_LNUMBER","0",490],",",["T_WHITESPACE"," ",490],["T_LNUMBER","0",490],",",["T_WHITESPACE"," ",490],["T_LNUMBER","0",490],",",["T_WHITESPACE","\n                ",490],["T_VARIABLE","$this",491],["T_OBJECT_OPERATOR","->",491],["T_STRING","_imageSrcWidth",491],",",["T_WHITESPACE"," ",491],["T_VARIABLE","$this",491],["T_OBJECT_OPERATOR","->",491],["T_STRING","_imageSrcHeight",491],",",["T_WHITESPACE","\n                ",491],["T_STRING","imagesx",492],"(",["T_VARIABLE","$watermark",492],")",",",["T_WHITESPACE"," ",492],["T_STRING","imagesy",492],"(",["T_VARIABLE","$watermark",492],")",["T_WHITESPACE","\n            ",492],")",";",["T_WHITESPACE","\n            ",493],["T_VARIABLE","$watermark",494],["T_WHITESPACE"," ",494],"=",["T_WHITESPACE"," ",494],["T_VARIABLE","$newWatermark",494],";",["T_WHITESPACE","\n\n        ",494],"}",["T_WHITESPACE"," ",496],["T_ELSEIF","elseif",496],"(",["T_WHITESPACE"," ",496],["T_VARIABLE","$this",496],["T_OBJECT_OPERATOR","->",496],["T_STRING","getWatermarkPosition",496],"(",")",["T_WHITESPACE"," ",496],["T_IS_EQUAL","==",496],["T_WHITESPACE"," ",496],["T_STRING","self",496],["T_DOUBLE_COLON","::",496],["T_STRING","POSITION_CENTER",496],["T_WHITESPACE"," ",496],")",["T_WHITESPACE"," ",496],"{",["T_WHITESPACE","\n            ",496],["T_VARIABLE","$positionX",497],["T_WHITESPACE"," ",497],"=",["T_WHITESPACE"," ",497],"(",["T_VARIABLE","$this",497],["T_OBJECT_OPERATOR","->",497],["T_STRING","_imageSrcWidth",497],"\/",["T_LNUMBER","2",497],["T_WHITESPACE"," ",497],"-",["T_WHITESPACE"," ",497],["T_STRING","imagesx",497],"(",["T_VARIABLE","$watermark",497],")","\/",["T_LNUMBER","2",497],")",";",["T_WHITESPACE","\n            ",497],["T_VARIABLE","$positionY",498],["T_WHITESPACE"," ",498],"=",["T_WHITESPACE"," ",498],"(",["T_VARIABLE","$this",498],["T_OBJECT_OPERATOR","->",498],["T_STRING","_imageSrcHeight",498],"\/",["T_LNUMBER","2",498],["T_WHITESPACE"," ",498],"-",["T_WHITESPACE"," ",498],["T_STRING","imagesy",498],"(",["T_VARIABLE","$watermark",498],")","\/",["T_LNUMBER","2",498],")",";",["T_WHITESPACE","\n            ",498],["T_STRING","imagecopymerge",499],"(",["T_WHITESPACE","\n                ",499],["T_VARIABLE","$this",500],["T_OBJECT_OPERATOR","->",500],["T_STRING","_imageHandler",500],",",["T_WHITESPACE","\n                ",500],["T_VARIABLE","$watermark",501],",",["T_WHITESPACE","\n                ",501],["T_VARIABLE","$positionX",502],",",["T_WHITESPACE"," ",502],["T_VARIABLE","$positionY",502],",",["T_WHITESPACE","\n                ",502],["T_LNUMBER","0",503],",",["T_WHITESPACE"," ",503],["T_LNUMBER","0",503],",",["T_WHITESPACE","\n                ",503],["T_STRING","imagesx",504],"(",["T_VARIABLE","$watermark",504],")",",",["T_WHITESPACE"," ",504],["T_STRING","imagesy",504],"(",["T_VARIABLE","$watermark",504],")",",",["T_WHITESPACE","\n                ",504],["T_VARIABLE","$this",505],["T_OBJECT_OPERATOR","->",505],["T_STRING","getWatermarkImageOpacity",505],"(",")",["T_WHITESPACE","\n            ",505],")",";",["T_WHITESPACE","\n        ",506],"}",["T_WHITESPACE"," ",507],["T_ELSEIF","elseif",507],"(",["T_WHITESPACE"," ",507],["T_VARIABLE","$this",507],["T_OBJECT_OPERATOR","->",507],["T_STRING","getWatermarkPosition",507],"(",")",["T_WHITESPACE"," ",507],["T_IS_EQUAL","==",507],["T_WHITESPACE"," ",507],["T_STRING","self",507],["T_DOUBLE_COLON","::",507],["T_STRING","POSITION_TOP_RIGHT",507],["T_WHITESPACE"," ",507],")",["T_WHITESPACE"," ",507],"{",["T_WHITESPACE","\n            ",507],["T_VARIABLE","$positionX",508],["T_WHITESPACE"," ",508],"=",["T_WHITESPACE"," ",508],"(",["T_VARIABLE","$this",508],["T_OBJECT_OPERATOR","->",508],["T_STRING","_imageSrcWidth",508],["T_WHITESPACE"," ",508],"-",["T_WHITESPACE"," ",508],["T_STRING","imagesx",508],"(",["T_VARIABLE","$watermark",508],")",")",";",["T_WHITESPACE","\n            ",508],["T_STRING","imagecopymerge",509],"(",["T_WHITESPACE","\n                ",509],["T_VARIABLE","$this",510],["T_OBJECT_OPERATOR","->",510],["T_STRING","_imageHandler",510],",",["T_WHITESPACE","\n                ",510],["T_VARIABLE","$watermark",511],",",["T_WHITESPACE","\n                ",511],["T_VARIABLE","$positionX",512],",",["T_WHITESPACE"," ",512],["T_VARIABLE","$positionY",512],",",["T_WHITESPACE","\n                ",512],["T_LNUMBER","0",513],",",["T_WHITESPACE"," ",513],["T_LNUMBER","0",513],",",["T_WHITESPACE","\n                ",513],["T_STRING","imagesx",514],"(",["T_VARIABLE","$watermark",514],")",",",["T_WHITESPACE"," ",514],["T_STRING","imagesy",514],"(",["T_VARIABLE","$watermark",514],")",",",["T_WHITESPACE","\n                ",514],["T_VARIABLE","$this",515],["T_OBJECT_OPERATOR","->",515],["T_STRING","getWatermarkImageOpacity",515],"(",")",["T_WHITESPACE","\n            ",515],")",";",["T_WHITESPACE","\n        ",516],"}",["T_WHITESPACE"," ",517],["T_ELSEIF","elseif",517],"(",["T_WHITESPACE"," ",517],["T_VARIABLE","$this",517],["T_OBJECT_OPERATOR","->",517],["T_STRING","getWatermarkPosition",517],"(",")",["T_WHITESPACE"," ",517],["T_IS_EQUAL","==",517],["T_WHITESPACE"," ",517],["T_STRING","self",517],["T_DOUBLE_COLON","::",517],["T_STRING","POSITION_TOP_LEFT",517],["T_WHITESPACE","  ",517],")",["T_WHITESPACE"," ",517],"{",["T_WHITESPACE","\n            ",517],["T_STRING","imagecopymerge",518],"(",["T_WHITESPACE","\n                ",518],["T_VARIABLE","$this",519],["T_OBJECT_OPERATOR","->",519],["T_STRING","_imageHandler",519],",",["T_WHITESPACE","\n                ",519],["T_VARIABLE","$watermark",520],",",["T_WHITESPACE","\n                ",520],["T_VARIABLE","$positionX",521],",",["T_WHITESPACE"," ",521],["T_VARIABLE","$positionY",521],",",["T_WHITESPACE","\n                ",521],["T_LNUMBER","0",522],",",["T_WHITESPACE"," ",522],["T_LNUMBER","0",522],",",["T_WHITESPACE","\n                ",522],["T_STRING","imagesx",523],"(",["T_VARIABLE","$watermark",523],")",",",["T_WHITESPACE"," ",523],["T_STRING","imagesy",523],"(",["T_VARIABLE","$watermark",523],")",",",["T_WHITESPACE","\n                ",523],["T_VARIABLE","$this",524],["T_OBJECT_OPERATOR","->",524],["T_STRING","getWatermarkImageOpacity",524],"(",")",["T_WHITESPACE","\n            ",524],")",";",["T_WHITESPACE","\n        ",525],"}",["T_WHITESPACE"," ",526],["T_ELSEIF","elseif",526],"(",["T_WHITESPACE"," ",526],["T_VARIABLE","$this",526],["T_OBJECT_OPERATOR","->",526],["T_STRING","getWatermarkPosition",526],"(",")",["T_WHITESPACE"," ",526],["T_IS_EQUAL","==",526],["T_WHITESPACE"," ",526],["T_STRING","self",526],["T_DOUBLE_COLON","::",526],["T_STRING","POSITION_BOTTOM_RIGHT",526],["T_WHITESPACE"," ",526],")",["T_WHITESPACE"," ",526],"{",["T_WHITESPACE","\n            ",526],["T_VARIABLE","$positionX",527],["T_WHITESPACE"," ",527],"=",["T_WHITESPACE"," ",527],"(",["T_VARIABLE","$this",527],["T_OBJECT_OPERATOR","->",527],["T_STRING","_imageSrcWidth",527],["T_WHITESPACE"," ",527],"-",["T_WHITESPACE"," ",527],["T_STRING","imagesx",527],"(",["T_VARIABLE","$watermark",527],")",")",";",["T_WHITESPACE","\n            ",527],["T_VARIABLE","$positionY",528],["T_WHITESPACE"," ",528],"=",["T_WHITESPACE"," ",528],"(",["T_VARIABLE","$this",528],["T_OBJECT_OPERATOR","->",528],["T_STRING","_imageSrcHeight",528],["T_WHITESPACE"," ",528],"-",["T_WHITESPACE"," ",528],["T_STRING","imagesy",528],"(",["T_VARIABLE","$watermark",528],")",")",";",["T_WHITESPACE","\n            ",528],["T_STRING","imagecopymerge",529],"(",["T_WHITESPACE","\n                ",529],["T_VARIABLE","$this",530],["T_OBJECT_OPERATOR","->",530],["T_STRING","_imageHandler",530],",",["T_WHITESPACE","\n                ",530],["T_VARIABLE","$watermark",531],",",["T_WHITESPACE","\n                ",531],["T_VARIABLE","$positionX",532],",",["T_WHITESPACE"," ",532],["T_VARIABLE","$positionY",532],",",["T_WHITESPACE","\n                ",532],["T_LNUMBER","0",533],",",["T_WHITESPACE"," ",533],["T_LNUMBER","0",533],",",["T_WHITESPACE","\n                ",533],["T_STRING","imagesx",534],"(",["T_VARIABLE","$watermark",534],")",",",["T_WHITESPACE"," ",534],["T_STRING","imagesy",534],"(",["T_VARIABLE","$watermark",534],")",",",["T_WHITESPACE","\n                ",534],["T_VARIABLE","$this",535],["T_OBJECT_OPERATOR","->",535],["T_STRING","getWatermarkImageOpacity",535],"(",")",["T_WHITESPACE","\n            ",535],")",";",["T_WHITESPACE","\n        ",536],"}",["T_WHITESPACE"," ",537],["T_ELSEIF","elseif",537],"(",["T_WHITESPACE"," ",537],["T_VARIABLE","$this",537],["T_OBJECT_OPERATOR","->",537],["T_STRING","getWatermarkPosition",537],"(",")",["T_WHITESPACE"," ",537],["T_IS_EQUAL","==",537],["T_WHITESPACE"," ",537],["T_STRING","self",537],["T_DOUBLE_COLON","::",537],["T_STRING","POSITION_BOTTOM_LEFT",537],["T_WHITESPACE"," ",537],")",["T_WHITESPACE"," ",537],"{",["T_WHITESPACE","\n            ",537],["T_VARIABLE","$positionY",538],["T_WHITESPACE"," ",538],"=",["T_WHITESPACE"," ",538],"(",["T_VARIABLE","$this",538],["T_OBJECT_OPERATOR","->",538],["T_STRING","_imageSrcHeight",538],["T_WHITESPACE"," ",538],"-",["T_WHITESPACE"," ",538],["T_STRING","imagesy",538],"(",["T_VARIABLE","$watermark",538],")",")",";",["T_WHITESPACE","\n            ",538],["T_STRING","imagecopymerge",539],"(",["T_WHITESPACE","\n                ",539],["T_VARIABLE","$this",540],["T_OBJECT_OPERATOR","->",540],["T_STRING","_imageHandler",540],",",["T_WHITESPACE","\n                ",540],["T_VARIABLE","$watermark",541],",",["T_WHITESPACE","\n                ",541],["T_VARIABLE","$positionX",542],",",["T_WHITESPACE"," ",542],["T_VARIABLE","$positionY",542],",",["T_WHITESPACE","\n                ",542],["T_LNUMBER","0",543],",",["T_WHITESPACE"," ",543],["T_LNUMBER","0",543],",",["T_WHITESPACE","\n                ",543],["T_STRING","imagesx",544],"(",["T_VARIABLE","$watermark",544],")",",",["T_WHITESPACE"," ",544],["T_STRING","imagesy",544],"(",["T_VARIABLE","$watermark",544],")",",",["T_WHITESPACE","\n                ",544],["T_VARIABLE","$this",545],["T_OBJECT_OPERATOR","->",545],["T_STRING","getWatermarkImageOpacity",545],"(",")",["T_WHITESPACE","\n            ",545],")",";",["T_WHITESPACE","\n        ",546],"}",["T_WHITESPACE","\n\n        ",547],["T_IF","if",549],"(",["T_WHITESPACE"," ",549],["T_VARIABLE","$repeat",549],["T_WHITESPACE"," ",549],["T_IS_IDENTICAL","===",549],["T_WHITESPACE"," ",549],["T_STRING","false",549],["T_WHITESPACE"," ",549],["T_BOOLEAN_AND","&&",549],["T_WHITESPACE"," ",549],["T_VARIABLE","$merged",549],["T_WHITESPACE"," ",549],["T_IS_IDENTICAL","===",549],["T_WHITESPACE"," ",549],["T_STRING","false",549],["T_WHITESPACE"," ",549],")",["T_WHITESPACE"," ",549],"{",["T_WHITESPACE","\n            ",549],["T_STRING","imagecopymerge",550],"(",["T_WHITESPACE","\n                ",550],["T_VARIABLE","$this",551],["T_OBJECT_OPERATOR","->",551],["T_STRING","_imageHandler",551],",",["T_WHITESPACE","\n                ",551],["T_VARIABLE","$watermark",552],",",["T_WHITESPACE","\n                ",552],["T_VARIABLE","$positionX",553],",",["T_WHITESPACE"," ",553],["T_VARIABLE","$positionY",553],",",["T_WHITESPACE","\n                ",553],["T_LNUMBER","0",554],",",["T_WHITESPACE"," ",554],["T_LNUMBER","0",554],",",["T_WHITESPACE","\n                ",554],["T_STRING","imagesx",555],"(",["T_VARIABLE","$watermark",555],")",",",["T_WHITESPACE"," ",555],["T_STRING","imagesy",555],"(",["T_VARIABLE","$watermark",555],")",",",["T_WHITESPACE","\n                ",555],["T_VARIABLE","$this",556],["T_OBJECT_OPERATOR","->",556],["T_STRING","getWatermarkImageOpacity",556],"(",")",["T_WHITESPACE","\n            ",556],")",";",["T_WHITESPACE","\n        ",557],"}",["T_WHITESPACE"," ",558],["T_ELSE","else",558],["T_WHITESPACE"," ",558],"{",["T_WHITESPACE","\n            ",558],["T_VARIABLE","$offsetX",559],["T_WHITESPACE"," ",559],"=",["T_WHITESPACE"," ",559],["T_VARIABLE","$positionX",559],";",["T_WHITESPACE","\n            ",559],["T_VARIABLE","$offsetY",560],["T_WHITESPACE"," ",560],"=",["T_WHITESPACE"," ",560],["T_VARIABLE","$positionY",560],";",["T_WHITESPACE","\n            ",560],["T_WHILE","while",561],"(",["T_WHITESPACE"," ",561],["T_VARIABLE","$offsetY",561],["T_WHITESPACE"," ",561],["T_IS_SMALLER_OR_EQUAL","<=",561],["T_WHITESPACE"," ",561],"(",["T_VARIABLE","$this",561],["T_OBJECT_OPERATOR","->",561],["T_STRING","_imageSrcHeight",561],"+",["T_STRING","imagesy",561],"(",["T_VARIABLE","$watermark",561],")",")",["T_WHITESPACE"," ",561],")",["T_WHITESPACE"," ",561],"{",["T_WHITESPACE","\n                ",561],["T_WHILE","while",562],"(",["T_WHITESPACE"," ",562],["T_VARIABLE","$offsetX",562],["T_WHITESPACE"," ",562],["T_IS_SMALLER_OR_EQUAL","<=",562],["T_WHITESPACE"," ",562],"(",["T_VARIABLE","$this",562],["T_OBJECT_OPERATOR","->",562],["T_STRING","_imageSrcWidth",562],"+",["T_STRING","imagesx",562],"(",["T_VARIABLE","$watermark",562],")",")",["T_WHITESPACE"," ",562],")",["T_WHITESPACE"," ",562],"{",["T_WHITESPACE","\n                    ",562],["T_STRING","imagecopymerge",563],"(",["T_WHITESPACE","\n                        ",563],["T_VARIABLE","$this",564],["T_OBJECT_OPERATOR","->",564],["T_STRING","_imageHandler",564],",",["T_WHITESPACE","\n                        ",564],["T_VARIABLE","$watermark",565],",",["T_WHITESPACE","\n                        ",565],["T_VARIABLE","$offsetX",566],",",["T_WHITESPACE"," ",566],["T_VARIABLE","$offsetY",566],",",["T_WHITESPACE","\n                        ",566],["T_LNUMBER","0",567],",",["T_WHITESPACE"," ",567],["T_LNUMBER","0",567],",",["T_WHITESPACE","\n                        ",567],["T_STRING","imagesx",568],"(",["T_VARIABLE","$watermark",568],")",",",["T_WHITESPACE"," ",568],["T_STRING","imagesy",568],"(",["T_VARIABLE","$watermark",568],")",",",["T_WHITESPACE","\n                        ",568],["T_VARIABLE","$this",569],["T_OBJECT_OPERATOR","->",569],["T_STRING","getWatermarkImageOpacity",569],"(",")",["T_WHITESPACE","\n                    ",569],")",";",["T_WHITESPACE","\n                    ",570],["T_VARIABLE","$offsetX",571],["T_WHITESPACE"," ",571],["T_PLUS_EQUAL","+=",571],["T_WHITESPACE"," ",571],["T_STRING","imagesx",571],"(",["T_VARIABLE","$watermark",571],")",";",["T_WHITESPACE","\n                ",571],"}",["T_WHITESPACE","\n                ",572],["T_VARIABLE","$offsetX",573],["T_WHITESPACE"," ",573],"=",["T_WHITESPACE"," ",573],["T_VARIABLE","$positionX",573],";",["T_WHITESPACE","\n                ",573],["T_VARIABLE","$offsetY",574],["T_WHITESPACE"," ",574],["T_PLUS_EQUAL","+=",574],["T_WHITESPACE"," ",574],["T_STRING","imagesy",574],"(",["T_VARIABLE","$watermark",574],")",";",["T_WHITESPACE","\n            ",574],"}",["T_WHITESPACE","\n        ",575],"}",["T_WHITESPACE","\n\n        ",576],["T_STRING","imagedestroy",578],"(",["T_VARIABLE","$watermark",578],")",";",["T_WHITESPACE","\n        ",578],["T_VARIABLE","$this",579],["T_OBJECT_OPERATOR","->",579],["T_STRING","refreshImageDimensions",579],"(",")",";",["T_WHITESPACE","\n    ",579],"}",["T_WHITESPACE","\n\n    ",580],["T_PUBLIC","public",582],["T_WHITESPACE"," ",582],["T_FUNCTION","function",582],["T_WHITESPACE"," ",582],["T_STRING","crop",582],"(",["T_VARIABLE","$top",582],"=",["T_LNUMBER","0",582],",",["T_WHITESPACE"," ",582],["T_VARIABLE","$left",582],"=",["T_LNUMBER","0",582],",",["T_WHITESPACE"," ",582],["T_VARIABLE","$right",582],"=",["T_LNUMBER","0",582],",",["T_WHITESPACE"," ",582],["T_VARIABLE","$bottom",582],"=",["T_LNUMBER","0",582],")",["T_WHITESPACE","\n    ",582],"{",["T_WHITESPACE","\n        ",583],["T_IF","if",584],"(",["T_WHITESPACE"," ",584],["T_VARIABLE","$left",584],["T_WHITESPACE"," ",584],["T_IS_EQUAL","==",584],["T_WHITESPACE"," ",584],["T_LNUMBER","0",584],["T_WHITESPACE"," ",584],["T_BOOLEAN_AND","&&",584],["T_WHITESPACE"," ",584],["T_VARIABLE","$top",584],["T_WHITESPACE"," ",584],["T_IS_EQUAL","==",584],["T_WHITESPACE"," ",584],["T_LNUMBER","0",584],["T_WHITESPACE"," ",584],["T_BOOLEAN_AND","&&",584],["T_WHITESPACE"," ",584],["T_VARIABLE","$right",584],["T_WHITESPACE"," ",584],["T_IS_EQUAL","==",584],["T_WHITESPACE"," ",584],["T_LNUMBER","0",584],["T_WHITESPACE"," ",584],["T_BOOLEAN_AND","&&",584],["T_WHITESPACE"," ",584],["T_VARIABLE","$bottom",584],["T_WHITESPACE"," ",584],["T_IS_EQUAL","==",584],["T_WHITESPACE"," ",584],["T_LNUMBER","0",584],["T_WHITESPACE"," ",584],")",["T_WHITESPACE"," ",584],"{",["T_WHITESPACE","\n            ",584],["T_RETURN","return",585],";",["T_WHITESPACE","\n        ",585],"}",["T_WHITESPACE","\n\n        ",586],["T_VARIABLE","$newWidth",588],["T_WHITESPACE"," ",588],"=",["T_WHITESPACE"," ",588],["T_VARIABLE","$this",588],["T_OBJECT_OPERATOR","->",588],["T_STRING","_imageSrcWidth",588],["T_WHITESPACE"," ",588],"-",["T_WHITESPACE"," ",588],["T_VARIABLE","$left",588],["T_WHITESPACE"," ",588],"-",["T_WHITESPACE"," ",588],["T_VARIABLE","$right",588],";",["T_WHITESPACE","\n        ",588],["T_VARIABLE","$newHeight",589],["T_WHITESPACE"," ",589],"=",["T_WHITESPACE"," ",589],["T_VARIABLE","$this",589],["T_OBJECT_OPERATOR","->",589],["T_STRING","_imageSrcHeight",589],["T_WHITESPACE"," ",589],"-",["T_WHITESPACE"," ",589],["T_VARIABLE","$top",589],["T_WHITESPACE"," ",589],"-",["T_WHITESPACE"," ",589],["T_VARIABLE","$bottom",589],";",["T_WHITESPACE","\n\n        ",589],["T_VARIABLE","$canvas",591],["T_WHITESPACE"," ",591],"=",["T_WHITESPACE"," ",591],["T_STRING","imagecreatetruecolor",591],"(",["T_VARIABLE","$newWidth",591],",",["T_WHITESPACE"," ",591],["T_VARIABLE","$newHeight",591],")",";",["T_WHITESPACE","\n\n        ",591],["T_IF","if",593],["T_WHITESPACE"," ",593],"(",["T_VARIABLE","$this",593],["T_OBJECT_OPERATOR","->",593],["T_STRING","_fileType",593],["T_WHITESPACE"," ",593],["T_IS_EQUAL","==",593],["T_WHITESPACE"," ",593],["T_STRING","IMAGETYPE_PNG",593],")",["T_WHITESPACE"," ",593],"{",["T_WHITESPACE","\n            ",593],["T_VARIABLE","$this",594],["T_OBJECT_OPERATOR","->",594],["T_STRING","_saveAlpha",594],"(",["T_VARIABLE","$canvas",594],")",";",["T_WHITESPACE","\n        ",594],"}",["T_WHITESPACE","\n\n        ",595],["T_STRING","imagecopyresampled",597],"(",["T_WHITESPACE","\n            ",597],["T_VARIABLE","$canvas",598],",",["T_WHITESPACE","\n            ",598],["T_VARIABLE","$this",599],["T_OBJECT_OPERATOR","->",599],["T_STRING","_imageHandler",599],",",["T_WHITESPACE","\n            ",599],["T_LNUMBER","0",600],",",["T_WHITESPACE"," ",600],["T_LNUMBER","0",600],",",["T_WHITESPACE"," ",600],["T_VARIABLE","$left",600],",",["T_WHITESPACE"," ",600],["T_VARIABLE","$top",600],",",["T_WHITESPACE","\n            ",600],["T_VARIABLE","$newWidth",601],",",["T_WHITESPACE"," ",601],["T_VARIABLE","$newHeight",601],",",["T_WHITESPACE","\n            ",601],["T_VARIABLE","$newWidth",602],",",["T_WHITESPACE"," ",602],["T_VARIABLE","$newHeight",602],["T_WHITESPACE","\n        ",602],")",";",["T_WHITESPACE","\n\n        ",603],["T_VARIABLE","$this",605],["T_OBJECT_OPERATOR","->",605],["T_STRING","_imageHandler",605],["T_WHITESPACE"," ",605],"=",["T_WHITESPACE"," ",605],["T_VARIABLE","$canvas",605],";",["T_WHITESPACE","\n        ",605],["T_VARIABLE","$this",606],["T_OBJECT_OPERATOR","->",606],["T_STRING","refreshImageDimensions",606],"(",")",";",["T_WHITESPACE","\n    ",606],"}",["T_WHITESPACE","\n\n    ",607],["T_PUBLIC","public",609],["T_WHITESPACE"," ",609],["T_FUNCTION","function",609],["T_WHITESPACE"," ",609],["T_STRING","checkDependencies",609],"(",")",["T_WHITESPACE","\n    ",609],"{",["T_WHITESPACE","\n        ",610],["T_FOREACH","foreach",611],"(",["T_WHITESPACE"," ",611],["T_VARIABLE","$this",611],["T_OBJECT_OPERATOR","->",611],["T_STRING","_requiredExtensions",611],["T_WHITESPACE"," ",611],["T_AS","as",611],["T_WHITESPACE"," ",611],["T_VARIABLE","$value",611],["T_WHITESPACE"," ",611],")",["T_WHITESPACE"," ",611],"{",["T_WHITESPACE","\n            ",611],["T_IF","if",612],"(",["T_WHITESPACE"," ",612],"!",["T_STRING","extension_loaded",612],"(",["T_VARIABLE","$value",612],")",["T_WHITESPACE"," ",612],")",["T_WHITESPACE"," ",612],"{",["T_WHITESPACE","\n                ",612],["T_THROW","throw",613],["T_WHITESPACE"," ",613],["T_NEW","new",613],["T_WHITESPACE"," ",613],["T_STRING","Exception",613],"(","\"",["T_ENCAPSED_AND_WHITESPACE","Required PHP extension '",613],["T_CURLY_OPEN","{",613],["T_VARIABLE","$value",613],"}",["T_ENCAPSED_AND_WHITESPACE","' was not loaded.",613],"\"",")",";",["T_WHITESPACE","\n            ",613],"}",["T_WHITESPACE","\n        ",614],"}",["T_WHITESPACE","\n    ",615],"}",["T_WHITESPACE","\n\n    ",616],["T_PRIVATE","private",618],["T_WHITESPACE"," ",618],["T_FUNCTION","function",618],["T_WHITESPACE"," ",618],["T_STRING","refreshImageDimensions",618],"(",")",["T_WHITESPACE","\n    ",618],"{",["T_WHITESPACE","\n        ",619],["T_VARIABLE","$this",620],["T_OBJECT_OPERATOR","->",620],["T_STRING","_imageSrcWidth",620],["T_WHITESPACE"," ",620],"=",["T_WHITESPACE"," ",620],["T_STRING","imagesx",620],"(",["T_VARIABLE","$this",620],["T_OBJECT_OPERATOR","->",620],["T_STRING","_imageHandler",620],")",";",["T_WHITESPACE","\n        ",620],["T_VARIABLE","$this",621],["T_OBJECT_OPERATOR","->",621],["T_STRING","_imageSrcHeight",621],["T_WHITESPACE"," ",621],"=",["T_WHITESPACE"," ",621],["T_STRING","imagesy",621],"(",["T_VARIABLE","$this",621],["T_OBJECT_OPERATOR","->",621],["T_STRING","_imageHandler",621],")",";",["T_WHITESPACE","\n    ",621],"}",["T_WHITESPACE","\n\n\n    ",622],["T_COMMENT","\/*\n     * Fixes saving PNG alpha channel\n     *\/",625],["T_WHITESPACE","\n    ",627],["T_PRIVATE","private",628],["T_WHITESPACE"," ",628],["T_FUNCTION","function",628],["T_WHITESPACE"," ",628],["T_STRING","_saveAlpha",628],"(",["T_VARIABLE","$imageHandler",628],")",["T_WHITESPACE","\n    ",628],"{",["T_WHITESPACE","\n        ",629],["T_VARIABLE","$background",630],["T_WHITESPACE"," ",630],"=",["T_WHITESPACE"," ",630],["T_STRING","imagecolorallocate",630],"(",["T_VARIABLE","$imageHandler",630],",",["T_WHITESPACE"," ",630],["T_LNUMBER","0",630],",",["T_WHITESPACE"," ",630],["T_LNUMBER","0",630],",",["T_WHITESPACE"," ",630],["T_LNUMBER","0",630],")",";",["T_WHITESPACE","\n        ",630],["T_STRING","ImageColorTransparent",631],"(",["T_VARIABLE","$imageHandler",631],",",["T_WHITESPACE"," ",631],["T_VARIABLE","$background",631],")",";",["T_WHITESPACE","\n        ",631],["T_STRING","imagealphablending",632],"(",["T_VARIABLE","$imageHandler",632],",",["T_WHITESPACE"," ",632],["T_STRING","false",632],")",";",["T_WHITESPACE","\n        ",632],["T_STRING","imagesavealpha",633],"(",["T_VARIABLE","$imageHandler",633],",",["T_WHITESPACE"," ",633],["T_STRING","true",633],")",";",["T_WHITESPACE","\n    ",633],"}",["T_WHITESPACE","\n",634],"}",["T_WHITESPACE","\n",635]]
[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Magento\n *\n * NOTICE OF LICENSE\n *\n * This source file is subject to the Open Software License (OSL 3.0)\n * that is bundled with this package in the file LICENSE.txt.\n * It is also available through the world-wide-web at this URL:\n * http:\/\/opensource.org\/licenses\/osl-3.0.php\n * If you did not receive a copy of the license and are unable to\n * obtain it through the world-wide-web, please send an email\n * to license@magento.com so we can send you a copy immediately.\n *\n * DISCLAIMER\n *\n * Do not edit or add to this file if you wish to upgrade Magento to newer\n * versions in the future. If you wish to customize Magento for your\n * needs please refer to http:\/\/www.magento.com for more information.\n *\n * @category    Varien\n * @package     Varien_Simplexml\n * @copyright  Copyright (c) 2006-2016 X.commerce, Inc. and affiliates (http:\/\/www.magento.com)\n * @license    http:\/\/opensource.org\/licenses\/osl-3.0.php  Open Software License (OSL 3.0)\n *\/",2],["T_WHITESPACE","\n\n\n",25],["T_DOC_COMMENT","\/**\n * Extends SimpleXML to add valuable functionality to SimpleXMLElement class\n *\n * @category   Varien\n * @package    Varien_Simplexml\n * @author      Magento Core Team <core@magentocommerce.com>\n *\/",28],["T_WHITESPACE","\n",34],["T_CLASS","class",35],["T_WHITESPACE"," ",35],["T_STRING","Varien_Simplexml_Element",35],["T_WHITESPACE"," ",35],["T_EXTENDS","extends",35],["T_WHITESPACE"," ",35],["T_STRING","SimpleXMLElement",35],["T_WHITESPACE","\n",35],"{",["T_WHITESPACE","\n\n    ",36],["T_DOC_COMMENT","\/**\n     * Would keep reference to parent node\n     *\n     * If SimpleXMLElement would support complicated attributes\n     *\n     * @todo make use of spl_object_hash to keep global array of simplexml elements\n     *       to emulate complicated attributes\n     * @var Varien_Simplexml_Element\n     *\/",38],["T_WHITESPACE","\n    ",46],["T_PROTECTED","protected",47],["T_WHITESPACE"," ",47],["T_VARIABLE","$_parent",47],["T_WHITESPACE"," ",47],"=",["T_WHITESPACE"," ",47],["T_STRING","null",47],";",["T_WHITESPACE","\n\n    ",47],["T_DOC_COMMENT","\/**\n     * For future use\n     *\n     * @param Varien_Simplexml_Element $element\n     *\/",49],["T_WHITESPACE","\n    ",53],["T_PUBLIC","public",54],["T_WHITESPACE"," ",54],["T_FUNCTION","function",54],["T_WHITESPACE"," ",54],["T_STRING","setParent",54],"(",["T_VARIABLE","$element",54],")",["T_WHITESPACE","\n    ",54],"{",["T_WHITESPACE","\n        ",55],["T_COMMENT","#$this->_parent = $element;\n",56],["T_WHITESPACE","    ",57],"}",["T_WHITESPACE","\n\n    ",57],["T_DOC_COMMENT","\/**\n     * Returns parent node for the element\n     *\n     * Currently using xpath\n     *\n     * @return Varien_Simplexml_Element\n     *\/",59],["T_WHITESPACE","\n    ",65],["T_PUBLIC","public",66],["T_WHITESPACE"," ",66],["T_FUNCTION","function",66],["T_WHITESPACE"," ",66],["T_STRING","getParent",66],"(",")",["T_WHITESPACE","\n    ",66],"{",["T_WHITESPACE","\n        ",67],["T_IF","if",68],["T_WHITESPACE"," ",68],"(","!",["T_EMPTY","empty",68],"(",["T_VARIABLE","$this",68],["T_OBJECT_OPERATOR","->",68],["T_STRING","_parent",68],")",")",["T_WHITESPACE"," ",68],"{",["T_WHITESPACE","\n            ",68],["T_VARIABLE","$parent",69],["T_WHITESPACE"," ",69],"=",["T_WHITESPACE"," ",69],["T_VARIABLE","$this",69],["T_OBJECT_OPERATOR","->",69],["T_STRING","_parent",69],";",["T_WHITESPACE","\n        ",69],"}",["T_WHITESPACE"," ",70],["T_ELSE","else",70],["T_WHITESPACE"," ",70],"{",["T_WHITESPACE","\n            ",70],["T_VARIABLE","$arr",71],["T_WHITESPACE"," ",71],"=",["T_WHITESPACE"," ",71],["T_VARIABLE","$this",71],["T_OBJECT_OPERATOR","->",71],["T_STRING","xpath",71],"(",["T_CONSTANT_ENCAPSED_STRING","'..'",71],")",";",["T_WHITESPACE","\n            ",71],["T_VARIABLE","$parent",72],["T_WHITESPACE"," ",72],"=",["T_WHITESPACE"," ",72],["T_VARIABLE","$arr",72],"[",["T_LNUMBER","0",72],"]",";",["T_WHITESPACE","\n        ",72],"}",["T_WHITESPACE","\n        ",73],["T_RETURN","return",74],["T_WHITESPACE"," ",74],["T_VARIABLE","$parent",74],";",["T_WHITESPACE","\n    ",74],"}",["T_WHITESPACE","\n\n    ",75],["T_DOC_COMMENT","\/**\n     * Enter description here...\n     *\n     * @return boolean\n     *\/",77],["T_WHITESPACE","\n    ",81],["T_PUBLIC","public",82],["T_WHITESPACE"," ",82],["T_FUNCTION","function",82],["T_WHITESPACE"," ",82],["T_STRING","hasChildren",82],"(",")",["T_WHITESPACE","\n    ",82],"{",["T_WHITESPACE","\n        ",83],["T_IF","if",84],["T_WHITESPACE"," ",84],"(","!",["T_VARIABLE","$this",84],["T_OBJECT_OPERATOR","->",84],["T_STRING","children",84],"(",")",")",["T_WHITESPACE"," ",84],"{",["T_WHITESPACE","\n            ",84],["T_RETURN","return",85],["T_WHITESPACE"," ",85],["T_STRING","false",85],";",["T_WHITESPACE","\n        ",85],"}",["T_WHITESPACE","\n\n        ",86],["T_COMMENT","\/\/ simplexml bug: @attributes is in children() but invisible in foreach\n",88],["T_WHITESPACE","        ",89],["T_FOREACH","foreach",89],["T_WHITESPACE"," ",89],"(",["T_VARIABLE","$this",89],["T_OBJECT_OPERATOR","->",89],["T_STRING","children",89],"(",")",["T_WHITESPACE"," ",89],["T_AS","as",89],["T_WHITESPACE"," ",89],["T_VARIABLE","$k",89],["T_DOUBLE_ARROW","=>",89],["T_VARIABLE","$child",89],")",["T_WHITESPACE"," ",89],"{",["T_WHITESPACE","\n            ",89],["T_RETURN","return",90],["T_WHITESPACE"," ",90],["T_STRING","true",90],";",["T_WHITESPACE","\n        ",90],"}",["T_WHITESPACE","\n        ",91],["T_RETURN","return",92],["T_WHITESPACE"," ",92],["T_STRING","false",92],";",["T_WHITESPACE","\n    ",92],"}",["T_WHITESPACE","\n\n    ",93],["T_DOC_COMMENT","\/**\n     * Returns attribute value by attribute name\n     *\n     * @return string\n     *\/",95],["T_WHITESPACE","\n    ",99],["T_PUBLIC","public",100],["T_WHITESPACE"," ",100],["T_FUNCTION","function",100],["T_WHITESPACE"," ",100],["T_STRING","getAttribute",100],"(",["T_VARIABLE","$name",100],")","{",["T_WHITESPACE","\n        ",100],["T_VARIABLE","$attrs",101],["T_WHITESPACE"," ",101],"=",["T_WHITESPACE"," ",101],["T_VARIABLE","$this",101],["T_OBJECT_OPERATOR","->",101],["T_STRING","attributes",101],"(",")",";",["T_WHITESPACE","\n        ",101],["T_RETURN","return",102],["T_WHITESPACE"," ",102],["T_ISSET","isset",102],"(",["T_VARIABLE","$attrs",102],"[",["T_VARIABLE","$name",102],"]",")",["T_WHITESPACE"," ",102],"?",["T_WHITESPACE"," ",102],["T_STRING_CAST","(string)",102],["T_VARIABLE","$attrs",102],"[",["T_VARIABLE","$name",102],"]",["T_WHITESPACE"," ",102],":",["T_WHITESPACE"," ",102],["T_STRING","null",102],";",["T_WHITESPACE","\n    ",102],"}",["T_WHITESPACE","\n\n",103],["T_COMMENT","\/*\n    public function addAttribute($name, $value=null, $namespace=null)\n    {\n        if (is_null($value)) {\n            return parent::addAttribute($name);\n        } else {\n            if (!is_null($value)) {\n                $value = $this->xmlentities($value);\n            }\n            if (!is_null($namespace)) {\n                return parent::addAttribute($name, $value, $namespace);\n            } else {\n                return parent::addAttribute($name, $value);\n            }\n        }\n    }\n\n    public function addChild($name, $value=null, $namespace=null)\n    {\n        if (is_null($value)) {\n            return parent::addChild($name);\n        } else {\n            if (!is_null($value)) {\n                $value = $this->xmlentities($value);\n            }\n            if (!is_null($namespace)) {\n                return parent::addChild($name, $value, $namespace);\n            } else {\n                return parent::addChild($name, $value);\n            }\n        }\n    }\n*\/",105],["T_WHITESPACE","\n\n    ",137],["T_DOC_COMMENT","\/**\n     * Find a descendant of a node by path\n     *\n     * @todo    Do we need to make it xpath look-a-like?\n     * @todo    Check if we still need all this and revert to plain XPath if this makes any sense\n     * @todo    param string $path Subset of xpath. Example: \"child\/grand[@attrName='attrValue']\/subGrand\"\n     * @param   string $path Example: \"child\/grand@attrName=attrValue\/subGrand\" (to make it faster without regex)\n     * @return  Varien_Simplexml_Element\n     *\/",139],["T_WHITESPACE","\n    ",147],["T_PUBLIC","public",148],["T_WHITESPACE"," ",148],["T_FUNCTION","function",148],["T_WHITESPACE"," ",148],["T_STRING","descend",148],"(",["T_VARIABLE","$path",148],")",["T_WHITESPACE","\n    ",148],"{",["T_WHITESPACE","\n        ",149],["T_COMMENT","# $node = $this->xpath($path);\n",150],["T_WHITESPACE","        ",151],["T_COMMENT","# return $node[0];\n",151],["T_WHITESPACE","        ",152],["T_IF","if",152],["T_WHITESPACE"," ",152],"(",["T_STRING","is_array",152],"(",["T_VARIABLE","$path",152],")",")",["T_WHITESPACE"," ",152],"{",["T_WHITESPACE","\n            ",152],["T_VARIABLE","$pathArr",153],["T_WHITESPACE"," ",153],"=",["T_WHITESPACE"," ",153],["T_VARIABLE","$path",153],";",["T_WHITESPACE","\n        ",153],"}",["T_WHITESPACE"," ",154],["T_ELSE","else",154],["T_WHITESPACE"," ",154],"{",["T_WHITESPACE","\n            ",154],["T_COMMENT","\/\/ Simple exploding by \/ does not suffice,\n",155],["T_WHITESPACE","            ",156],["T_COMMENT","\/\/ as an attribute value may contain a \/ inside\n",156],["T_WHITESPACE","            ",157],["T_COMMENT","\/\/ Note that there are three matches for different kinds of attribute values specification\n",157],["T_WHITESPACE","            ",158],["T_IF","if",158],"(",["T_STRING","strpos",158],"(",["T_VARIABLE","$path",158],",",["T_WHITESPACE"," ",158],["T_CONSTANT_ENCAPSED_STRING","\"@\"",158],")",["T_WHITESPACE"," ",158],["T_IS_IDENTICAL","===",158],["T_WHITESPACE"," ",158],["T_STRING","false",158],")",["T_WHITESPACE"," ",158],"{",["T_WHITESPACE","\n                ",158],["T_VARIABLE","$pathArr",159],["T_WHITESPACE"," ",159],"=",["T_WHITESPACE"," ",159],["T_STRING","explode",159],"(",["T_CONSTANT_ENCAPSED_STRING","'\/'",159],",",["T_WHITESPACE"," ",159],["T_VARIABLE","$path",159],")",";",["T_WHITESPACE","\n            ",159],"}",["T_WHITESPACE","\n            ",160],["T_ELSE","else",161],["T_WHITESPACE"," ",161],"{",["T_WHITESPACE","\n                ",161],["T_VARIABLE","$regex",162],["T_WHITESPACE"," ",162],"=",["T_WHITESPACE"," ",162],["T_CONSTANT_ENCAPSED_STRING","\"#([^@\/\\\\\\\"]+(?:@[^=\/]+=(?:\\\\\\\"[^\\\\\\\"]*\\\\\\\"|[^\/]*))?)\/?#\"",162],";",["T_WHITESPACE","\n                ",162],["T_VARIABLE","$pathArr",163],["T_WHITESPACE"," ",163],"=",["T_WHITESPACE"," ",163],["T_VARIABLE","$pathMatches",163],["T_WHITESPACE"," ",163],"=",["T_WHITESPACE"," ",163],["T_ARRAY","array",163],"(",")",";",["T_WHITESPACE","\n                ",163],["T_IF","if",164],"(",["T_STRING","preg_match_all",164],"(",["T_VARIABLE","$regex",164],",",["T_WHITESPACE"," ",164],["T_VARIABLE","$path",164],",",["T_WHITESPACE"," ",164],["T_VARIABLE","$pathMatches",164],")",")",["T_WHITESPACE"," ",164],"{",["T_WHITESPACE","\n                    ",164],["T_VARIABLE","$pathArr",165],["T_WHITESPACE"," ",165],"=",["T_WHITESPACE"," ",165],["T_VARIABLE","$pathMatches",165],"[",["T_LNUMBER","1",165],"]",";",["T_WHITESPACE","\n                ",165],"}",["T_WHITESPACE","\n            ",166],"}",["T_WHITESPACE","\n        ",167],"}",["T_WHITESPACE","\n        ",168],["T_VARIABLE","$desc",169],["T_WHITESPACE"," ",169],"=",["T_WHITESPACE"," ",169],["T_VARIABLE","$this",169],";",["T_WHITESPACE","\n        ",169],["T_FOREACH","foreach",170],["T_WHITESPACE"," ",170],"(",["T_VARIABLE","$pathArr",170],["T_WHITESPACE"," ",170],["T_AS","as",170],["T_WHITESPACE"," ",170],["T_VARIABLE","$nodeName",170],")",["T_WHITESPACE"," ",170],"{",["T_WHITESPACE","\n            ",170],["T_IF","if",171],["T_WHITESPACE"," ",171],"(",["T_STRING","strpos",171],"(",["T_VARIABLE","$nodeName",171],",",["T_WHITESPACE"," ",171],["T_CONSTANT_ENCAPSED_STRING","'@'",171],")",["T_IS_NOT_IDENTICAL","!==",171],["T_STRING","false",171],")",["T_WHITESPACE"," ",171],"{",["T_WHITESPACE","\n                ",171],["T_VARIABLE","$a",172],["T_WHITESPACE"," ",172],"=",["T_WHITESPACE"," ",172],["T_STRING","explode",172],"(",["T_CONSTANT_ENCAPSED_STRING","'@'",172],",",["T_WHITESPACE"," ",172],["T_VARIABLE","$nodeName",172],")",";",["T_WHITESPACE","\n                ",172],["T_VARIABLE","$b",173],["T_WHITESPACE"," ",173],"=",["T_WHITESPACE"," ",173],["T_STRING","explode",173],"(",["T_CONSTANT_ENCAPSED_STRING","'='",173],",",["T_WHITESPACE"," ",173],["T_VARIABLE","$a",173],"[",["T_LNUMBER","1",173],"]",")",";",["T_WHITESPACE","\n                ",173],["T_VARIABLE","$nodeName",174],["T_WHITESPACE"," ",174],"=",["T_WHITESPACE"," ",174],["T_VARIABLE","$a",174],"[",["T_LNUMBER","0",174],"]",";",["T_WHITESPACE","\n                ",174],["T_VARIABLE","$attributeName",175],["T_WHITESPACE"," ",175],"=",["T_WHITESPACE"," ",175],["T_VARIABLE","$b",175],"[",["T_LNUMBER","0",175],"]",";",["T_WHITESPACE","\n                ",175],["T_VARIABLE","$attributeValue",176],["T_WHITESPACE"," ",176],"=",["T_WHITESPACE"," ",176],["T_VARIABLE","$b",176],"[",["T_LNUMBER","1",176],"]",";",["T_WHITESPACE","\n                ",176],["T_COMMENT","\/\/\n",177],["T_WHITESPACE","                ",178],["T_COMMENT","\/\/ Does a very simplistic trimming of attribute value.\n",178],["T_WHITESPACE","                ",179],["T_COMMENT","\/\/\n",179],["T_WHITESPACE","                ",180],["T_VARIABLE","$attributeValue",180],["T_WHITESPACE"," ",180],"=",["T_WHITESPACE"," ",180],["T_STRING","trim",180],"(",["T_VARIABLE","$attributeValue",180],",",["T_WHITESPACE"," ",180],["T_CONSTANT_ENCAPSED_STRING","'\"'",180],")",";",["T_WHITESPACE","\n                ",180],["T_VARIABLE","$found",181],["T_WHITESPACE"," ",181],"=",["T_WHITESPACE"," ",181],["T_STRING","false",181],";",["T_WHITESPACE","\n                ",181],["T_FOREACH","foreach",182],["T_WHITESPACE"," ",182],"(",["T_VARIABLE","$desc",182],["T_OBJECT_OPERATOR","->",182],["T_VARIABLE","$nodeName",182],["T_WHITESPACE"," ",182],["T_AS","as",182],["T_WHITESPACE"," ",182],["T_VARIABLE","$subdesc",182],")",["T_WHITESPACE"," ",182],"{",["T_WHITESPACE","\n                    ",182],["T_IF","if",183],["T_WHITESPACE"," ",183],"(",["T_STRING_CAST","(string)",183],["T_VARIABLE","$subdesc",183],"[",["T_VARIABLE","$attributeName",183],"]",["T_IS_IDENTICAL","===",183],["T_VARIABLE","$attributeValue",183],")",["T_WHITESPACE"," ",183],"{",["T_WHITESPACE","\n                        ",183],["T_VARIABLE","$found",184],["T_WHITESPACE"," ",184],"=",["T_WHITESPACE"," ",184],["T_STRING","true",184],";",["T_WHITESPACE","\n                        ",184],["T_VARIABLE","$desc",185],["T_WHITESPACE"," ",185],"=",["T_WHITESPACE"," ",185],["T_VARIABLE","$subdesc",185],";",["T_WHITESPACE","\n                        ",185],["T_BREAK","break",186],";",["T_WHITESPACE","\n                    ",186],"}",["T_WHITESPACE","\n                ",187],"}",["T_WHITESPACE","\n                ",188],["T_IF","if",189],["T_WHITESPACE"," ",189],"(","!",["T_VARIABLE","$found",189],")",["T_WHITESPACE"," ",189],"{",["T_WHITESPACE","\n                    ",189],["T_VARIABLE","$desc",190],["T_WHITESPACE"," ",190],"=",["T_WHITESPACE"," ",190],["T_STRING","false",190],";",["T_WHITESPACE","\n                ",190],"}",["T_WHITESPACE","\n            ",191],"}",["T_WHITESPACE"," ",192],["T_ELSE","else",192],["T_WHITESPACE"," ",192],"{",["T_WHITESPACE","\n                ",192],["T_VARIABLE","$desc",193],["T_WHITESPACE"," ",193],"=",["T_WHITESPACE"," ",193],["T_VARIABLE","$desc",193],["T_OBJECT_OPERATOR","->",193],["T_VARIABLE","$nodeName",193],";",["T_WHITESPACE","\n            ",193],"}",["T_WHITESPACE","\n            ",194],["T_IF","if",195],["T_WHITESPACE"," ",195],"(","!",["T_VARIABLE","$desc",195],")",["T_WHITESPACE"," ",195],"{",["T_WHITESPACE","\n                ",195],["T_RETURN","return",196],["T_WHITESPACE"," ",196],["T_STRING","false",196],";",["T_WHITESPACE","\n            ",196],"}",["T_WHITESPACE","\n        ",197],"}",["T_WHITESPACE","\n        ",198],["T_RETURN","return",199],["T_WHITESPACE"," ",199],["T_VARIABLE","$desc",199],";",["T_WHITESPACE","\n    ",199],"}",["T_WHITESPACE","\n\n    ",200],["T_DOC_COMMENT","\/**\n     * Returns the node and children as an array\n     *\n     * @return array|string\n     *\/",202],["T_WHITESPACE","\n    ",206],["T_PUBLIC","public",207],["T_WHITESPACE"," ",207],["T_FUNCTION","function",207],["T_WHITESPACE"," ",207],["T_STRING","asArray",207],"(",")",["T_WHITESPACE","\n    ",207],"{",["T_WHITESPACE","\n        ",208],["T_RETURN","return",209],["T_WHITESPACE"," ",209],["T_VARIABLE","$this",209],["T_OBJECT_OPERATOR","->",209],["T_STRING","_asArray",209],"(",")",";",["T_WHITESPACE","\n    ",209],"}",["T_WHITESPACE","\n\n    ",210],["T_DOC_COMMENT","\/**\n     * asArray() analog, but without attributes\n     * @return array|string\n     *\/",212],["T_WHITESPACE","\n    ",215],["T_PUBLIC","public",216],["T_WHITESPACE"," ",216],["T_FUNCTION","function",216],["T_WHITESPACE"," ",216],["T_STRING","asCanonicalArray",216],"(",")",["T_WHITESPACE","\n    ",216],"{",["T_WHITESPACE","\n        ",217],["T_RETURN","return",218],["T_WHITESPACE"," ",218],["T_VARIABLE","$this",218],["T_OBJECT_OPERATOR","->",218],["T_STRING","_asArray",218],"(",["T_STRING","true",218],")",";",["T_WHITESPACE","\n    ",218],"}",["T_WHITESPACE","\n\n    ",219],["T_DOC_COMMENT","\/**\n     * Returns the node and children as an array\n     *\n     * @param bool $isCanonical - whether to ignore attributes\n     * @return array|string\n     *\/",221],["T_WHITESPACE","\n    ",226],["T_PROTECTED","protected",227],["T_WHITESPACE"," ",227],["T_FUNCTION","function",227],["T_WHITESPACE"," ",227],["T_STRING","_asArray",227],"(",["T_VARIABLE","$isCanonical",227],["T_WHITESPACE"," ",227],"=",["T_WHITESPACE"," ",227],["T_STRING","false",227],")",["T_WHITESPACE","\n    ",227],"{",["T_WHITESPACE","\n        ",228],["T_VARIABLE","$result",229],["T_WHITESPACE"," ",229],"=",["T_WHITESPACE"," ",229],["T_ARRAY","array",229],"(",")",";",["T_WHITESPACE","\n        ",229],["T_IF","if",230],["T_WHITESPACE"," ",230],"(","!",["T_VARIABLE","$isCanonical",230],")",["T_WHITESPACE"," ",230],"{",["T_WHITESPACE","\n            ",230],["T_COMMENT","\/\/ add attributes\n",231],["T_WHITESPACE","            ",232],["T_FOREACH","foreach",232],["T_WHITESPACE"," ",232],"(",["T_VARIABLE","$this",232],["T_OBJECT_OPERATOR","->",232],["T_STRING","attributes",232],"(",")",["T_WHITESPACE"," ",232],["T_AS","as",232],["T_WHITESPACE"," ",232],["T_VARIABLE","$attributeName",232],["T_WHITESPACE"," ",232],["T_DOUBLE_ARROW","=>",232],["T_WHITESPACE"," ",232],["T_VARIABLE","$attribute",232],")",["T_WHITESPACE"," ",232],"{",["T_WHITESPACE","\n                ",232],["T_IF","if",233],["T_WHITESPACE"," ",233],"(",["T_VARIABLE","$attribute",233],")",["T_WHITESPACE"," ",233],"{",["T_WHITESPACE","\n                    ",233],["T_VARIABLE","$result",234],"[",["T_CONSTANT_ENCAPSED_STRING","'@'",234],"]","[",["T_VARIABLE","$attributeName",234],"]",["T_WHITESPACE"," ",234],"=",["T_WHITESPACE"," ",234],["T_STRING_CAST","(string)",234],["T_VARIABLE","$attribute",234],";",["T_WHITESPACE","\n                ",234],"}",["T_WHITESPACE","\n            ",235],"}",["T_WHITESPACE","\n        ",236],"}",["T_WHITESPACE","\n        ",237],["T_COMMENT","\/\/ add children values\n",238],["T_WHITESPACE","        ",239],["T_IF","if",239],["T_WHITESPACE"," ",239],"(",["T_VARIABLE","$this",239],["T_OBJECT_OPERATOR","->",239],["T_STRING","hasChildren",239],"(",")",")",["T_WHITESPACE"," ",239],"{",["T_WHITESPACE","\n            ",239],["T_FOREACH","foreach",240],["T_WHITESPACE"," ",240],"(",["T_VARIABLE","$this",240],["T_OBJECT_OPERATOR","->",240],["T_STRING","children",240],"(",")",["T_WHITESPACE"," ",240],["T_AS","as",240],["T_WHITESPACE"," ",240],["T_VARIABLE","$childName",240],["T_WHITESPACE"," ",240],["T_DOUBLE_ARROW","=>",240],["T_WHITESPACE"," ",240],["T_VARIABLE","$child",240],")",["T_WHITESPACE"," ",240],"{",["T_WHITESPACE","\n                ",240],["T_VARIABLE","$result",241],"[",["T_VARIABLE","$childName",241],"]",["T_WHITESPACE"," ",241],"=",["T_WHITESPACE"," ",241],["T_VARIABLE","$child",241],["T_OBJECT_OPERATOR","->",241],["T_STRING","_asArray",241],"(",["T_VARIABLE","$isCanonical",241],")",";",["T_WHITESPACE","\n            ",241],"}",["T_WHITESPACE","\n        ",242],"}",["T_WHITESPACE"," ",243],["T_ELSE","else",243],["T_WHITESPACE"," ",243],"{",["T_WHITESPACE","\n            ",243],["T_IF","if",244],["T_WHITESPACE"," ",244],"(",["T_EMPTY","empty",244],"(",["T_VARIABLE","$result",244],")",")",["T_WHITESPACE"," ",244],"{",["T_WHITESPACE","\n                ",244],["T_COMMENT","\/\/ return as string, if nothing was found\n",245],["T_WHITESPACE","                ",246],["T_VARIABLE","$result",246],["T_WHITESPACE"," ",246],"=",["T_WHITESPACE"," ",246],["T_STRING_CAST","(string)",246],["T_WHITESPACE"," ",246],["T_VARIABLE","$this",246],";",["T_WHITESPACE","\n            ",246],"}",["T_WHITESPACE"," ",247],["T_ELSE","else",247],["T_WHITESPACE"," ",247],"{",["T_WHITESPACE","\n                ",247],["T_COMMENT","\/\/ value has zero key element\n",248],["T_WHITESPACE","                ",249],["T_VARIABLE","$result",249],"[",["T_LNUMBER","0",249],"]",["T_WHITESPACE"," ",249],"=",["T_WHITESPACE"," ",249],["T_STRING_CAST","(string)",249],["T_WHITESPACE"," ",249],["T_VARIABLE","$this",249],";",["T_WHITESPACE","\n            ",249],"}",["T_WHITESPACE","\n        ",250],"}",["T_WHITESPACE","\n        ",251],["T_RETURN","return",252],["T_WHITESPACE"," ",252],["T_VARIABLE","$result",252],";",["T_WHITESPACE","\n    ",252],"}",["T_WHITESPACE","\n\n    ",253],["T_DOC_COMMENT","\/**\n     * Makes nicely formatted XML from the node\n     *\n     * @param string $filename\n     * @param int|boolean $level if false\n     * @return string\n     *\/",255],["T_WHITESPACE","\n    ",261],["T_PUBLIC","public",262],["T_WHITESPACE"," ",262],["T_FUNCTION","function",262],["T_WHITESPACE"," ",262],["T_STRING","asNiceXml",262],"(",["T_VARIABLE","$filename",262],"=",["T_CONSTANT_ENCAPSED_STRING","''",262],",",["T_WHITESPACE"," ",262],["T_VARIABLE","$level",262],"=",["T_LNUMBER","0",262],")",["T_WHITESPACE","\n    ",262],"{",["T_WHITESPACE","\n        ",263],["T_IF","if",264],["T_WHITESPACE"," ",264],"(",["T_STRING","is_numeric",264],"(",["T_VARIABLE","$level",264],")",")",["T_WHITESPACE"," ",264],"{",["T_WHITESPACE","\n            ",264],["T_VARIABLE","$pad",265],["T_WHITESPACE"," ",265],"=",["T_WHITESPACE"," ",265],["T_STRING","str_pad",265],"(",["T_CONSTANT_ENCAPSED_STRING","''",265],",",["T_WHITESPACE"," ",265],["T_VARIABLE","$level",265],"*",["T_LNUMBER","3",265],",",["T_WHITESPACE"," ",265],["T_CONSTANT_ENCAPSED_STRING","' '",265],",",["T_WHITESPACE"," ",265],["T_STRING","STR_PAD_LEFT",265],")",";",["T_WHITESPACE","\n            ",265],["T_VARIABLE","$nl",266],["T_WHITESPACE"," ",266],"=",["T_WHITESPACE"," ",266],["T_CONSTANT_ENCAPSED_STRING","\"\\n\"",266],";",["T_WHITESPACE","\n        ",266],"}",["T_WHITESPACE"," ",267],["T_ELSE","else",267],["T_WHITESPACE"," ",267],"{",["T_WHITESPACE","\n            ",267],["T_VARIABLE","$pad",268],["T_WHITESPACE"," ",268],"=",["T_WHITESPACE"," ",268],["T_CONSTANT_ENCAPSED_STRING","''",268],";",["T_WHITESPACE","\n            ",268],["T_VARIABLE","$nl",269],["T_WHITESPACE"," ",269],"=",["T_WHITESPACE"," ",269],["T_CONSTANT_ENCAPSED_STRING","''",269],";",["T_WHITESPACE","\n        ",269],"}",["T_WHITESPACE","\n\n        ",270],["T_VARIABLE","$out",272],["T_WHITESPACE"," ",272],"=",["T_WHITESPACE"," ",272],["T_VARIABLE","$pad",272],".",["T_CONSTANT_ENCAPSED_STRING","'<'",272],".",["T_VARIABLE","$this",272],["T_OBJECT_OPERATOR","->",272],["T_STRING","getName",272],"(",")",";",["T_WHITESPACE","\n\n        ",272],["T_IF","if",274],["T_WHITESPACE"," ",274],"(",["T_VARIABLE","$attributes",274],["T_WHITESPACE"," ",274],"=",["T_WHITESPACE"," ",274],["T_VARIABLE","$this",274],["T_OBJECT_OPERATOR","->",274],["T_STRING","attributes",274],"(",")",")",["T_WHITESPACE"," ",274],"{",["T_WHITESPACE","\n            ",274],["T_FOREACH","foreach",275],["T_WHITESPACE"," ",275],"(",["T_VARIABLE","$attributes",275],["T_WHITESPACE"," ",275],["T_AS","as",275],["T_WHITESPACE"," ",275],["T_VARIABLE","$key",275],["T_DOUBLE_ARROW","=>",275],["T_VARIABLE","$value",275],")",["T_WHITESPACE"," ",275],"{",["T_WHITESPACE","\n                ",275],["T_VARIABLE","$out",276],["T_WHITESPACE"," ",276],["T_CONCAT_EQUAL",".=",276],["T_WHITESPACE"," ",276],["T_CONSTANT_ENCAPSED_STRING","' '",276],".",["T_VARIABLE","$key",276],".",["T_CONSTANT_ENCAPSED_STRING","'=\"'",276],".",["T_STRING","str_replace",276],"(",["T_CONSTANT_ENCAPSED_STRING","'\"'",276],",",["T_WHITESPACE"," ",276],["T_CONSTANT_ENCAPSED_STRING","'\\\"'",276],",",["T_WHITESPACE"," ",276],["T_STRING_CAST","(string)",276],["T_VARIABLE","$value",276],")",".",["T_CONSTANT_ENCAPSED_STRING","'\"'",276],";",["T_WHITESPACE","\n            ",276],"}",["T_WHITESPACE","\n        ",277],"}",["T_WHITESPACE","\n\n        ",278],["T_IF","if",280],["T_WHITESPACE"," ",280],"(",["T_VARIABLE","$this",280],["T_OBJECT_OPERATOR","->",280],["T_STRING","hasChildren",280],"(",")",")",["T_WHITESPACE"," ",280],"{",["T_WHITESPACE","\n            ",280],["T_VARIABLE","$out",281],["T_WHITESPACE"," ",281],["T_CONCAT_EQUAL",".=",281],["T_WHITESPACE"," ",281],["T_CONSTANT_ENCAPSED_STRING","'>'",281],".",["T_VARIABLE","$nl",281],";",["T_WHITESPACE","\n            ",281],["T_FOREACH","foreach",282],["T_WHITESPACE"," ",282],"(",["T_VARIABLE","$this",282],["T_OBJECT_OPERATOR","->",282],["T_STRING","children",282],"(",")",["T_WHITESPACE"," ",282],["T_AS","as",282],["T_WHITESPACE"," ",282],["T_VARIABLE","$child",282],")",["T_WHITESPACE"," ",282],"{",["T_WHITESPACE","\n                ",282],["T_VARIABLE","$out",283],["T_WHITESPACE"," ",283],["T_CONCAT_EQUAL",".=",283],["T_WHITESPACE"," ",283],["T_VARIABLE","$child",283],["T_OBJECT_OPERATOR","->",283],["T_STRING","asNiceXml",283],"(",["T_CONSTANT_ENCAPSED_STRING","''",283],",",["T_WHITESPACE"," ",283],["T_STRING","is_numeric",283],"(",["T_VARIABLE","$level",283],")",["T_WHITESPACE"," ",283],"?",["T_WHITESPACE"," ",283],["T_VARIABLE","$level",283],"+",["T_LNUMBER","1",283],["T_WHITESPACE"," ",283],":",["T_WHITESPACE"," ",283],["T_STRING","true",283],")",";",["T_WHITESPACE","\n            ",283],"}",["T_WHITESPACE","\n            ",284],["T_VARIABLE","$out",285],["T_WHITESPACE"," ",285],["T_CONCAT_EQUAL",".=",285],["T_WHITESPACE"," ",285],["T_VARIABLE","$pad",285],".",["T_CONSTANT_ENCAPSED_STRING","'<\/'",285],".",["T_VARIABLE","$this",285],["T_OBJECT_OPERATOR","->",285],["T_STRING","getName",285],"(",")",".",["T_CONSTANT_ENCAPSED_STRING","'>'",285],".",["T_VARIABLE","$nl",285],";",["T_WHITESPACE","\n        ",285],"}",["T_WHITESPACE"," ",286],["T_ELSE","else",286],["T_WHITESPACE"," ",286],"{",["T_WHITESPACE","\n            ",286],["T_VARIABLE","$value",287],["T_WHITESPACE"," ",287],"=",["T_WHITESPACE"," ",287],["T_STRING_CAST","(string)",287],["T_VARIABLE","$this",287],";",["T_WHITESPACE","\n            ",287],["T_IF","if",288],["T_WHITESPACE"," ",288],"(",["T_STRING","strlen",288],"(",["T_VARIABLE","$value",288],")",")",["T_WHITESPACE"," ",288],"{",["T_WHITESPACE","\n                ",288],["T_VARIABLE","$out",289],["T_WHITESPACE"," ",289],["T_CONCAT_EQUAL",".=",289],["T_WHITESPACE"," ",289],["T_CONSTANT_ENCAPSED_STRING","'>'",289],".",["T_VARIABLE","$this",289],["T_OBJECT_OPERATOR","->",289],["T_STRING","xmlentities",289],"(",["T_VARIABLE","$value",289],")",".",["T_CONSTANT_ENCAPSED_STRING","'<\/'",289],".",["T_VARIABLE","$this",289],["T_OBJECT_OPERATOR","->",289],["T_STRING","getName",289],"(",")",".",["T_CONSTANT_ENCAPSED_STRING","'>'",289],".",["T_VARIABLE","$nl",289],";",["T_WHITESPACE","\n            ",289],"}",["T_WHITESPACE"," ",290],["T_ELSE","else",290],["T_WHITESPACE"," ",290],"{",["T_WHITESPACE","\n                ",290],["T_VARIABLE","$out",291],["T_WHITESPACE"," ",291],["T_CONCAT_EQUAL",".=",291],["T_WHITESPACE"," ",291],["T_CONSTANT_ENCAPSED_STRING","'\/>'",291],".",["T_VARIABLE","$nl",291],";",["T_WHITESPACE","\n            ",291],"}",["T_WHITESPACE","\n        ",292],"}",["T_WHITESPACE","\n\n        ",293],["T_IF","if",295],["T_WHITESPACE"," ",295],"(","(",["T_LNUMBER","0",295],["T_IS_IDENTICAL","===",295],["T_VARIABLE","$level",295],["T_WHITESPACE"," ",295],["T_BOOLEAN_OR","||",295],["T_WHITESPACE"," ",295],["T_STRING","false",295],["T_IS_IDENTICAL","===",295],["T_VARIABLE","$level",295],")",["T_WHITESPACE"," ",295],["T_BOOLEAN_AND","&&",295],["T_WHITESPACE"," ",295],"!",["T_EMPTY","empty",295],"(",["T_VARIABLE","$filename",295],")",")",["T_WHITESPACE"," ",295],"{",["T_WHITESPACE","\n            ",295],["T_STRING","file_put_contents",296],"(",["T_VARIABLE","$filename",296],",",["T_WHITESPACE"," ",296],["T_VARIABLE","$out",296],")",";",["T_WHITESPACE","\n        ",296],"}",["T_WHITESPACE","\n\n        ",297],["T_RETURN","return",299],["T_WHITESPACE"," ",299],["T_VARIABLE","$out",299],";",["T_WHITESPACE","\n    ",299],"}",["T_WHITESPACE","\n\n    ",300],["T_DOC_COMMENT","\/**\n     * Enter description here...\n     *\n     * @param int $level\n     * @return string\n     *\/",302],["T_WHITESPACE","\n    ",307],["T_PUBLIC","public",308],["T_WHITESPACE"," ",308],["T_FUNCTION","function",308],["T_WHITESPACE"," ",308],["T_STRING","innerXml",308],"(",["T_VARIABLE","$level",308],"=",["T_LNUMBER","0",308],")",["T_WHITESPACE","\n    ",308],"{",["T_WHITESPACE","\n        ",309],["T_VARIABLE","$out",310],["T_WHITESPACE"," ",310],"=",["T_WHITESPACE"," ",310],["T_CONSTANT_ENCAPSED_STRING","''",310],";",["T_WHITESPACE","\n        ",310],["T_FOREACH","foreach",311],["T_WHITESPACE"," ",311],"(",["T_VARIABLE","$this",311],["T_OBJECT_OPERATOR","->",311],["T_STRING","children",311],"(",")",["T_WHITESPACE"," ",311],["T_AS","as",311],["T_WHITESPACE"," ",311],["T_VARIABLE","$child",311],")",["T_WHITESPACE"," ",311],"{",["T_WHITESPACE","\n            ",311],["T_VARIABLE","$out",312],["T_WHITESPACE"," ",312],["T_CONCAT_EQUAL",".=",312],["T_WHITESPACE"," ",312],["T_VARIABLE","$child",312],["T_OBJECT_OPERATOR","->",312],["T_STRING","asNiceXml",312],"(",["T_VARIABLE","$level",312],")",";",["T_WHITESPACE","\n        ",312],"}",["T_WHITESPACE","\n        ",313],["T_RETURN","return",314],["T_WHITESPACE"," ",314],["T_VARIABLE","$out",314],";",["T_WHITESPACE","\n    ",314],"}",["T_WHITESPACE","\n\n    ",315],["T_DOC_COMMENT","\/**\n     * Converts meaningful xml characters to xml entities\n     *\n     * @param  string\n     * @return string\n     *\/",317],["T_WHITESPACE","\n    ",322],["T_PUBLIC","public",323],["T_WHITESPACE"," ",323],["T_FUNCTION","function",323],["T_WHITESPACE"," ",323],["T_STRING","xmlentities",323],"(",["T_VARIABLE","$value",323],["T_WHITESPACE"," ",323],"=",["T_WHITESPACE"," ",323],["T_STRING","null",323],")",["T_WHITESPACE","\n    ",323],"{",["T_WHITESPACE","\n        ",324],["T_IF","if",325],["T_WHITESPACE"," ",325],"(",["T_STRING","is_null",325],"(",["T_VARIABLE","$value",325],")",")",["T_WHITESPACE"," ",325],"{",["T_WHITESPACE","\n            ",325],["T_VARIABLE","$value",326],["T_WHITESPACE"," ",326],"=",["T_WHITESPACE"," ",326],["T_VARIABLE","$this",326],";",["T_WHITESPACE","\n        ",326],"}",["T_WHITESPACE","\n        ",327],["T_VARIABLE","$value",328],["T_WHITESPACE"," ",328],"=",["T_WHITESPACE"," ",328],["T_STRING_CAST","(string)",328],["T_VARIABLE","$value",328],";",["T_WHITESPACE","\n\n        ",328],["T_VARIABLE","$value",330],["T_WHITESPACE"," ",330],"=",["T_WHITESPACE"," ",330],["T_STRING","str_replace",330],"(",["T_WHITESPACE","\n            ",330],["T_ARRAY","array",331],"(",["T_CONSTANT_ENCAPSED_STRING","'&'",331],",",["T_WHITESPACE"," ",331],["T_CONSTANT_ENCAPSED_STRING","'\"'",331],",",["T_WHITESPACE"," ",331],["T_CONSTANT_ENCAPSED_STRING","\"'\"",331],",",["T_WHITESPACE"," ",331],["T_CONSTANT_ENCAPSED_STRING","'<'",331],",",["T_WHITESPACE"," ",331],["T_CONSTANT_ENCAPSED_STRING","'>'",331],")",",",["T_WHITESPACE","\n            ",331],["T_ARRAY","array",332],"(",["T_CONSTANT_ENCAPSED_STRING","'&amp;'",332],",",["T_WHITESPACE"," ",332],["T_CONSTANT_ENCAPSED_STRING","'&quot;'",332],",",["T_WHITESPACE"," ",332],["T_CONSTANT_ENCAPSED_STRING","'&apos;'",332],",",["T_WHITESPACE"," ",332],["T_CONSTANT_ENCAPSED_STRING","'&lt;'",332],",",["T_WHITESPACE"," ",332],["T_CONSTANT_ENCAPSED_STRING","'&gt;'",332],")",",",["T_WHITESPACE","\n            ",332],["T_VARIABLE","$value",333],["T_WHITESPACE","\n        ",333],")",";",["T_WHITESPACE","\n\n        ",334],["T_RETURN","return",336],["T_WHITESPACE"," ",336],["T_VARIABLE","$value",336],";",["T_WHITESPACE","\n    ",336],"}",["T_WHITESPACE","\n\n    ",337],["T_DOC_COMMENT","\/**\n     * Appends $source to current node\n     *\n     * @param Varien_Simplexml_Element $source\n     * @return Varien_Simplexml_Element\n     *\/",339],["T_WHITESPACE","\n    ",344],["T_PUBLIC","public",345],["T_WHITESPACE"," ",345],["T_FUNCTION","function",345],["T_WHITESPACE"," ",345],["T_STRING","appendChild",345],"(",["T_VARIABLE","$source",345],")",["T_WHITESPACE","\n    ",345],"{",["T_WHITESPACE","\n        ",346],["T_IF","if",347],["T_WHITESPACE"," ",347],"(",["T_VARIABLE","$source",347],["T_OBJECT_OPERATOR","->",347],["T_STRING","children",347],"(",")",")",["T_WHITESPACE"," ",347],"{",["T_WHITESPACE","\n            ",347],["T_DOC_COMMENT","\/**\n             * @see http:\/\/bugs.php.net\/bug.php?id=41867 , fixed in 5.2.4\n             *\/",348],["T_WHITESPACE","\n            ",350],["T_IF","if",351],["T_WHITESPACE"," ",351],"(",["T_STRING","version_compare",351],"(",["T_STRING","phpversion",351],"(",")",",",["T_WHITESPACE"," ",351],["T_CONSTANT_ENCAPSED_STRING","'5.2.4'",351],",",["T_WHITESPACE"," ",351],["T_CONSTANT_ENCAPSED_STRING","'<'",351],")",["T_IS_IDENTICAL","===",351],["T_STRING","true",351],")",["T_WHITESPACE"," ",351],"{",["T_WHITESPACE","\n                ",351],["T_VARIABLE","$name",352],["T_WHITESPACE"," ",352],"=",["T_WHITESPACE"," ",352],["T_VARIABLE","$source",352],["T_OBJECT_OPERATOR","->",352],["T_STRING","children",352],"(",")",["T_OBJECT_OPERATOR","->",352],["T_STRING","getName",352],"(",")",";",["T_WHITESPACE","\n            ",352],"}",["T_WHITESPACE","\n            ",353],["T_ELSE","else",354],["T_WHITESPACE"," ",354],"{",["T_WHITESPACE","\n                ",354],["T_VARIABLE","$name",355],["T_WHITESPACE"," ",355],"=",["T_WHITESPACE"," ",355],["T_VARIABLE","$source",355],["T_OBJECT_OPERATOR","->",355],["T_STRING","getName",355],"(",")",";",["T_WHITESPACE","\n            ",355],"}",["T_WHITESPACE","\n            ",356],["T_VARIABLE","$child",357],["T_WHITESPACE"," ",357],"=",["T_WHITESPACE"," ",357],["T_VARIABLE","$this",357],["T_OBJECT_OPERATOR","->",357],["T_STRING","addChild",357],"(",["T_VARIABLE","$name",357],")",";",["T_WHITESPACE","\n        ",357],"}",["T_WHITESPACE"," ",358],["T_ELSE","else",358],["T_WHITESPACE"," ",358],"{",["T_WHITESPACE","\n            ",358],["T_VARIABLE","$child",359],["T_WHITESPACE"," ",359],"=",["T_WHITESPACE"," ",359],["T_VARIABLE","$this",359],["T_OBJECT_OPERATOR","->",359],["T_STRING","addChild",359],"(",["T_VARIABLE","$source",359],["T_OBJECT_OPERATOR","->",359],["T_STRING","getName",359],"(",")",",",["T_WHITESPACE"," ",359],["T_VARIABLE","$this",359],["T_OBJECT_OPERATOR","->",359],["T_STRING","xmlentities",359],"(",["T_VARIABLE","$source",359],")",")",";",["T_WHITESPACE","\n        ",359],"}",["T_WHITESPACE","\n        ",360],["T_VARIABLE","$child",361],["T_OBJECT_OPERATOR","->",361],["T_STRING","setParent",361],"(",["T_VARIABLE","$this",361],")",";",["T_WHITESPACE","\n\n        ",361],["T_VARIABLE","$attributes",363],["T_WHITESPACE"," ",363],"=",["T_WHITESPACE"," ",363],["T_VARIABLE","$source",363],["T_OBJECT_OPERATOR","->",363],["T_STRING","attributes",363],"(",")",";",["T_WHITESPACE","\n        ",363],["T_FOREACH","foreach",364],["T_WHITESPACE"," ",364],"(",["T_VARIABLE","$attributes",364],["T_WHITESPACE"," ",364],["T_AS","as",364],["T_WHITESPACE"," ",364],["T_VARIABLE","$key",364],["T_DOUBLE_ARROW","=>",364],["T_VARIABLE","$value",364],")",["T_WHITESPACE"," ",364],"{",["T_WHITESPACE","\n            ",364],["T_VARIABLE","$child",365],["T_OBJECT_OPERATOR","->",365],["T_STRING","addAttribute",365],"(",["T_VARIABLE","$key",365],",",["T_WHITESPACE"," ",365],["T_VARIABLE","$this",365],["T_OBJECT_OPERATOR","->",365],["T_STRING","xmlentities",365],"(",["T_VARIABLE","$value",365],")",")",";",["T_WHITESPACE","\n        ",365],"}",["T_WHITESPACE","\n\n        ",366],["T_FOREACH","foreach",368],["T_WHITESPACE"," ",368],"(",["T_VARIABLE","$source",368],["T_OBJECT_OPERATOR","->",368],["T_STRING","children",368],"(",")",["T_WHITESPACE"," ",368],["T_AS","as",368],["T_WHITESPACE"," ",368],["T_VARIABLE","$sourceChild",368],")",["T_WHITESPACE"," ",368],"{",["T_WHITESPACE","\n            ",368],["T_VARIABLE","$child",369],["T_OBJECT_OPERATOR","->",369],["T_STRING","appendChild",369],"(",["T_VARIABLE","$sourceChild",369],")",";",["T_WHITESPACE","\n        ",369],"}",["T_WHITESPACE","\n        ",370],["T_RETURN","return",371],["T_WHITESPACE"," ",371],["T_VARIABLE","$this",371],";",["T_WHITESPACE","\n    ",371],"}",["T_WHITESPACE","\n\n    ",372],["T_DOC_COMMENT","\/**\n     * Extends current node with xml from $source\n     *\n     * If $overwrite is false will merge only missing nodes\n     * Otherwise will overwrite existing nodes\n     *\n     * @param Varien_Simplexml_Element $source\n     * @param boolean $overwrite\n     * @return Varien_Simplexml_Element\n     *\/",374],["T_WHITESPACE","\n    ",383],["T_PUBLIC","public",384],["T_WHITESPACE"," ",384],["T_FUNCTION","function",384],["T_WHITESPACE"," ",384],["T_STRING","extend",384],"(",["T_VARIABLE","$source",384],",",["T_WHITESPACE"," ",384],["T_VARIABLE","$overwrite",384],"=",["T_STRING","false",384],")",["T_WHITESPACE","\n    ",384],"{",["T_WHITESPACE","\n        ",385],["T_IF","if",386],["T_WHITESPACE"," ",386],"(","!",["T_VARIABLE","$source",386],["T_WHITESPACE"," ",386],["T_INSTANCEOF","instanceof",386],["T_WHITESPACE"," ",386],["T_STRING","Varien_Simplexml_Element",386],")",["T_WHITESPACE"," ",386],"{",["T_WHITESPACE","\n            ",386],["T_RETURN","return",387],["T_WHITESPACE"," ",387],["T_VARIABLE","$this",387],";",["T_WHITESPACE","\n        ",387],"}",["T_WHITESPACE","\n\n        ",388],["T_FOREACH","foreach",390],["T_WHITESPACE"," ",390],"(",["T_VARIABLE","$source",390],["T_OBJECT_OPERATOR","->",390],["T_STRING","children",390],"(",")",["T_WHITESPACE"," ",390],["T_AS","as",390],["T_WHITESPACE"," ",390],["T_VARIABLE","$child",390],")",["T_WHITESPACE"," ",390],"{",["T_WHITESPACE","\n            ",390],["T_VARIABLE","$this",391],["T_OBJECT_OPERATOR","->",391],["T_STRING","extendChild",391],"(",["T_VARIABLE","$child",391],",",["T_WHITESPACE"," ",391],["T_VARIABLE","$overwrite",391],")",";",["T_WHITESPACE","\n        ",391],"}",["T_WHITESPACE","\n\n        ",392],["T_RETURN","return",394],["T_WHITESPACE"," ",394],["T_VARIABLE","$this",394],";",["T_WHITESPACE","\n    ",394],"}",["T_WHITESPACE","\n\n    ",395],["T_DOC_COMMENT","\/**\n     * Extends one node\n     *\n     * @param Varien_Simplexml_Element $source\n     * @param boolean $overwrite\n     * @return Varien_Simplexml_Element\n     *\/",397],["T_WHITESPACE","\n    ",403],["T_PUBLIC","public",404],["T_WHITESPACE"," ",404],["T_FUNCTION","function",404],["T_WHITESPACE"," ",404],["T_STRING","extendChild",404],"(",["T_VARIABLE","$source",404],",",["T_WHITESPACE"," ",404],["T_VARIABLE","$overwrite",404],"=",["T_STRING","false",404],")",["T_WHITESPACE","\n    ",404],"{",["T_WHITESPACE","\n        ",405],["T_COMMENT","\/\/ this will be our new target node\n",406],["T_WHITESPACE","        ",407],["T_VARIABLE","$targetChild",407],["T_WHITESPACE"," ",407],"=",["T_WHITESPACE"," ",407],["T_STRING","null",407],";",["T_WHITESPACE","\n\n        ",407],["T_COMMENT","\/\/ name of the source node\n",409],["T_WHITESPACE","        ",410],["T_VARIABLE","$sourceName",410],["T_WHITESPACE"," ",410],"=",["T_WHITESPACE"," ",410],["T_VARIABLE","$source",410],["T_OBJECT_OPERATOR","->",410],["T_STRING","getName",410],"(",")",";",["T_WHITESPACE","\n\n        ",410],["T_COMMENT","\/\/ here we have children of our source node\n",412],["T_WHITESPACE","        ",413],["T_VARIABLE","$sourceChildren",413],["T_WHITESPACE"," ",413],"=",["T_WHITESPACE"," ",413],["T_VARIABLE","$source",413],["T_OBJECT_OPERATOR","->",413],["T_STRING","children",413],"(",")",";",["T_WHITESPACE","\n\n        ",413],["T_IF","if",415],["T_WHITESPACE"," ",415],"(","!",["T_VARIABLE","$source",415],["T_OBJECT_OPERATOR","->",415],["T_STRING","hasChildren",415],"(",")",")",["T_WHITESPACE"," ",415],"{",["T_WHITESPACE","\n            ",415],["T_COMMENT","\/\/ handle string node\n",416],["T_WHITESPACE","            ",417],["T_IF","if",417],["T_WHITESPACE"," ",417],"(",["T_ISSET","isset",417],"(",["T_VARIABLE","$this",417],["T_OBJECT_OPERATOR","->",417],["T_VARIABLE","$sourceName",417],")",")",["T_WHITESPACE"," ",417],"{",["T_WHITESPACE","\n                ",417],["T_COMMENT","\/\/ if target already has children return without regard\n",418],["T_WHITESPACE","                ",419],["T_IF","if",419],["T_WHITESPACE"," ",419],"(",["T_VARIABLE","$this",419],["T_OBJECT_OPERATOR","->",419],["T_VARIABLE","$sourceName",419],["T_OBJECT_OPERATOR","->",419],["T_STRING","hasChildren",419],"(",")",")",["T_WHITESPACE"," ",419],"{",["T_WHITESPACE","\n                    ",419],["T_RETURN","return",420],["T_WHITESPACE"," ",420],["T_VARIABLE","$this",420],";",["T_WHITESPACE","\n                ",420],"}",["T_WHITESPACE","\n                ",421],["T_IF","if",422],["T_WHITESPACE"," ",422],"(",["T_VARIABLE","$overwrite",422],")",["T_WHITESPACE"," ",422],"{",["T_WHITESPACE","\n                    ",422],["T_UNSET","unset",423],"(",["T_VARIABLE","$this",423],["T_OBJECT_OPERATOR","->",423],["T_VARIABLE","$sourceName",423],")",";",["T_WHITESPACE","\n                ",423],"}",["T_WHITESPACE"," ",424],["T_ELSE","else",424],["T_WHITESPACE"," ",424],"{",["T_WHITESPACE","\n                    ",424],["T_RETURN","return",425],["T_WHITESPACE"," ",425],["T_VARIABLE","$this",425],";",["T_WHITESPACE","\n                ",425],"}",["T_WHITESPACE","\n            ",426],"}",["T_WHITESPACE","\n\n            ",427],["T_VARIABLE","$targetChild",429],["T_WHITESPACE"," ",429],"=",["T_WHITESPACE"," ",429],["T_VARIABLE","$this",429],["T_OBJECT_OPERATOR","->",429],["T_STRING","addChild",429],"(",["T_VARIABLE","$sourceName",429],",",["T_WHITESPACE"," ",429],["T_VARIABLE","$source",429],["T_OBJECT_OPERATOR","->",429],["T_STRING","xmlentities",429],"(",")",")",";",["T_WHITESPACE","\n            ",429],["T_VARIABLE","$targetChild",430],["T_OBJECT_OPERATOR","->",430],["T_STRING","setParent",430],"(",["T_VARIABLE","$this",430],")",";",["T_WHITESPACE","\n            ",430],["T_FOREACH","foreach",431],["T_WHITESPACE"," ",431],"(",["T_VARIABLE","$source",431],["T_OBJECT_OPERATOR","->",431],["T_STRING","attributes",431],"(",")",["T_WHITESPACE"," ",431],["T_AS","as",431],["T_WHITESPACE"," ",431],["T_VARIABLE","$key",431],["T_DOUBLE_ARROW","=>",431],["T_VARIABLE","$value",431],")",["T_WHITESPACE"," ",431],"{",["T_WHITESPACE","\n                ",431],["T_VARIABLE","$targetChild",432],["T_OBJECT_OPERATOR","->",432],["T_STRING","addAttribute",432],"(",["T_VARIABLE","$key",432],",",["T_WHITESPACE"," ",432],["T_VARIABLE","$this",432],["T_OBJECT_OPERATOR","->",432],["T_STRING","xmlentities",432],"(",["T_VARIABLE","$value",432],")",")",";",["T_WHITESPACE","\n            ",432],"}",["T_WHITESPACE","\n            ",433],["T_RETURN","return",434],["T_WHITESPACE"," ",434],["T_VARIABLE","$this",434],";",["T_WHITESPACE","\n        ",434],"}",["T_WHITESPACE","\n\n        ",435],["T_IF","if",437],["T_WHITESPACE"," ",437],"(",["T_ISSET","isset",437],"(",["T_VARIABLE","$this",437],["T_OBJECT_OPERATOR","->",437],["T_VARIABLE","$sourceName",437],")",")",["T_WHITESPACE"," ",437],"{",["T_WHITESPACE","\n            ",437],["T_VARIABLE","$targetChild",438],["T_WHITESPACE"," ",438],"=",["T_WHITESPACE"," ",438],["T_VARIABLE","$this",438],["T_OBJECT_OPERATOR","->",438],["T_VARIABLE","$sourceName",438],";",["T_WHITESPACE","\n        ",438],"}",["T_WHITESPACE","\n\n        ",439],["T_IF","if",441],["T_WHITESPACE"," ",441],"(",["T_STRING","is_null",441],"(",["T_VARIABLE","$targetChild",441],")",")",["T_WHITESPACE"," ",441],"{",["T_WHITESPACE","\n            ",441],["T_COMMENT","\/\/ if child target is not found create new and descend\n",442],["T_WHITESPACE","            ",443],["T_VARIABLE","$targetChild",443],["T_WHITESPACE"," ",443],"=",["T_WHITESPACE"," ",443],["T_VARIABLE","$this",443],["T_OBJECT_OPERATOR","->",443],["T_STRING","addChild",443],"(",["T_VARIABLE","$sourceName",443],")",";",["T_WHITESPACE","\n            ",443],["T_VARIABLE","$targetChild",444],["T_OBJECT_OPERATOR","->",444],["T_STRING","setParent",444],"(",["T_VARIABLE","$this",444],")",";",["T_WHITESPACE","\n            ",444],["T_FOREACH","foreach",445],["T_WHITESPACE"," ",445],"(",["T_VARIABLE","$source",445],["T_OBJECT_OPERATOR","->",445],["T_STRING","attributes",445],"(",")",["T_WHITESPACE"," ",445],["T_AS","as",445],["T_WHITESPACE"," ",445],["T_VARIABLE","$key",445],["T_DOUBLE_ARROW","=>",445],["T_VARIABLE","$value",445],")",["T_WHITESPACE"," ",445],"{",["T_WHITESPACE","\n                ",445],["T_VARIABLE","$targetChild",446],["T_OBJECT_OPERATOR","->",446],["T_STRING","addAttribute",446],"(",["T_VARIABLE","$key",446],",",["T_WHITESPACE"," ",446],["T_VARIABLE","$this",446],["T_OBJECT_OPERATOR","->",446],["T_STRING","xmlentities",446],"(",["T_VARIABLE","$value",446],")",")",";",["T_WHITESPACE","\n            ",446],"}",["T_WHITESPACE","\n        ",447],"}",["T_WHITESPACE","\n\n        ",448],["T_COMMENT","\/\/ finally add our source node children to resulting new target node\n",450],["T_WHITESPACE","        ",451],["T_FOREACH","foreach",451],["T_WHITESPACE"," ",451],"(",["T_VARIABLE","$sourceChildren",451],["T_WHITESPACE"," ",451],["T_AS","as",451],["T_WHITESPACE"," ",451],["T_VARIABLE","$childKey",451],["T_DOUBLE_ARROW","=>",451],["T_VARIABLE","$childNode",451],")",["T_WHITESPACE"," ",451],"{",["T_WHITESPACE","\n            ",451],["T_VARIABLE","$targetChild",452],["T_OBJECT_OPERATOR","->",452],["T_STRING","extendChild",452],"(",["T_VARIABLE","$childNode",452],",",["T_WHITESPACE"," ",452],["T_VARIABLE","$overwrite",452],")",";",["T_WHITESPACE","\n        ",452],"}",["T_WHITESPACE","\n\n        ",453],["T_RETURN","return",455],["T_WHITESPACE"," ",455],["T_VARIABLE","$this",455],";",["T_WHITESPACE","\n    ",455],"}",["T_WHITESPACE","\n\n    ",456],["T_PUBLIC","public",458],["T_WHITESPACE"," ",458],["T_FUNCTION","function",458],["T_WHITESPACE"," ",458],["T_STRING","setNode",458],"(",["T_VARIABLE","$path",458],",",["T_WHITESPACE"," ",458],["T_VARIABLE","$value",458],",",["T_WHITESPACE"," ",458],["T_VARIABLE","$overwrite",458],"=",["T_STRING","true",458],")",["T_WHITESPACE","\n    ",458],"{",["T_WHITESPACE","\n        ",459],["T_VARIABLE","$arr1",460],["T_WHITESPACE"," ",460],"=",["T_WHITESPACE"," ",460],["T_STRING","explode",460],"(",["T_CONSTANT_ENCAPSED_STRING","'\/'",460],",",["T_WHITESPACE"," ",460],["T_VARIABLE","$path",460],")",";",["T_WHITESPACE","\n        ",460],["T_VARIABLE","$arr",461],["T_WHITESPACE"," ",461],"=",["T_WHITESPACE"," ",461],["T_ARRAY","array",461],"(",")",";",["T_WHITESPACE","\n        ",461],["T_FOREACH","foreach",462],["T_WHITESPACE"," ",462],"(",["T_VARIABLE","$arr1",462],["T_WHITESPACE"," ",462],["T_AS","as",462],["T_WHITESPACE"," ",462],["T_VARIABLE","$v",462],")",["T_WHITESPACE"," ",462],"{",["T_WHITESPACE","\n            ",462],["T_IF","if",463],["T_WHITESPACE"," ",463],"(","!",["T_EMPTY","empty",463],"(",["T_VARIABLE","$v",463],")",")",["T_WHITESPACE"," ",463],["T_VARIABLE","$arr",463],"[","]",["T_WHITESPACE"," ",463],"=",["T_WHITESPACE"," ",463],["T_VARIABLE","$v",463],";",["T_WHITESPACE","\n        ",463],"}",["T_WHITESPACE","\n        ",464],["T_VARIABLE","$last",465],["T_WHITESPACE"," ",465],"=",["T_WHITESPACE"," ",465],["T_STRING","sizeof",465],"(",["T_VARIABLE","$arr",465],")","-",["T_LNUMBER","1",465],";",["T_WHITESPACE","\n        ",465],["T_VARIABLE","$node",466],["T_WHITESPACE"," ",466],"=",["T_WHITESPACE"," ",466],["T_VARIABLE","$this",466],";",["T_WHITESPACE","\n        ",466],["T_FOREACH","foreach",467],["T_WHITESPACE"," ",467],"(",["T_VARIABLE","$arr",467],["T_WHITESPACE"," ",467],["T_AS","as",467],["T_WHITESPACE"," ",467],["T_VARIABLE","$i",467],["T_DOUBLE_ARROW","=>",467],["T_VARIABLE","$nodeName",467],")",["T_WHITESPACE"," ",467],"{",["T_WHITESPACE","\n            ",467],["T_IF","if",468],["T_WHITESPACE"," ",468],"(",["T_VARIABLE","$last",468],["T_IS_IDENTICAL","===",468],["T_VARIABLE","$i",468],")",["T_WHITESPACE"," ",468],"{",["T_WHITESPACE","\n                ",468],["T_COMMENT","\/*\n                if (isset($xml->$nodeName)) {\n                    if ($overwrite) {\n                        unset($xml->$nodeName);\n                    } else {\n                        continue;\n                    }\n                }\n                $xml->addChild($nodeName, $xml->xmlentities($value));\n                *\/",469],["T_WHITESPACE","\n                ",478],["T_IF","if",479],["T_WHITESPACE"," ",479],"(","!",["T_ISSET","isset",479],"(",["T_VARIABLE","$node",479],["T_OBJECT_OPERATOR","->",479],["T_VARIABLE","$nodeName",479],")",["T_WHITESPACE"," ",479],["T_BOOLEAN_OR","||",479],["T_WHITESPACE"," ",479],["T_VARIABLE","$overwrite",479],")",["T_WHITESPACE"," ",479],"{",["T_WHITESPACE","\n                    ",479],["T_COMMENT","\/\/ http:\/\/bugs.php.net\/bug.php?id=36795\n",480],["T_WHITESPACE","                    ",481],["T_COMMENT","\/\/ comment on [8 Feb 8:09pm UTC]\n",481],["T_WHITESPACE","                    ",482],["T_IF","if",482],["T_WHITESPACE"," ",482],"(",["T_ISSET","isset",482],"(",["T_VARIABLE","$node",482],["T_OBJECT_OPERATOR","->",482],["T_VARIABLE","$nodeName",482],")",["T_WHITESPACE"," ",482],["T_BOOLEAN_AND","&&",482],["T_WHITESPACE"," ",482],"(",["T_STRING","version_compare",482],"(",["T_STRING","phpversion",482],"(",")",",",["T_WHITESPACE"," ",482],["T_CONSTANT_ENCAPSED_STRING","'5.2.6'",482],",",["T_WHITESPACE"," ",482],["T_CONSTANT_ENCAPSED_STRING","'<'",482],")",["T_IS_IDENTICAL","===",482],["T_STRING","true",482],")",")",["T_WHITESPACE"," ",482],"{",["T_WHITESPACE","\n                        ",482],["T_VARIABLE","$node",483],["T_OBJECT_OPERATOR","->",483],["T_VARIABLE","$nodeName",483],["T_WHITESPACE"," ",483],"=",["T_WHITESPACE"," ",483],["T_VARIABLE","$node",483],["T_OBJECT_OPERATOR","->",483],["T_STRING","xmlentities",483],"(",["T_VARIABLE","$value",483],")",";",["T_WHITESPACE","\n                    ",483],"}",["T_WHITESPACE"," ",484],["T_ELSE","else",484],["T_WHITESPACE"," ",484],"{",["T_WHITESPACE","\n                        ",484],["T_VARIABLE","$node",485],["T_OBJECT_OPERATOR","->",485],["T_VARIABLE","$nodeName",485],["T_WHITESPACE"," ",485],"=",["T_WHITESPACE"," ",485],["T_VARIABLE","$value",485],";",["T_WHITESPACE","\n                    ",485],"}",["T_WHITESPACE","\n                ",486],"}",["T_WHITESPACE","\n            ",487],"}",["T_WHITESPACE"," ",488],["T_ELSE","else",488],["T_WHITESPACE"," ",488],"{",["T_WHITESPACE","\n                ",488],["T_IF","if",489],["T_WHITESPACE"," ",489],"(","!",["T_ISSET","isset",489],"(",["T_VARIABLE","$node",489],["T_OBJECT_OPERATOR","->",489],["T_VARIABLE","$nodeName",489],")",")",["T_WHITESPACE"," ",489],"{",["T_WHITESPACE","\n                    ",489],["T_VARIABLE","$node",490],["T_WHITESPACE"," ",490],"=",["T_WHITESPACE"," ",490],["T_VARIABLE","$node",490],["T_OBJECT_OPERATOR","->",490],["T_STRING","addChild",490],"(",["T_VARIABLE","$nodeName",490],")",";",["T_WHITESPACE","\n                ",490],"}",["T_WHITESPACE"," ",491],["T_ELSE","else",491],["T_WHITESPACE"," ",491],"{",["T_WHITESPACE","\n                    ",491],["T_VARIABLE","$node",492],["T_WHITESPACE"," ",492],"=",["T_WHITESPACE"," ",492],["T_VARIABLE","$node",492],["T_OBJECT_OPERATOR","->",492],["T_VARIABLE","$nodeName",492],";",["T_WHITESPACE","\n                ",492],"}",["T_WHITESPACE","\n            ",493],"}",["T_WHITESPACE","\n\n        ",494],"}",["T_WHITESPACE","\n        ",496],["T_RETURN","return",497],["T_WHITESPACE"," ",497],["T_VARIABLE","$this",497],";",["T_WHITESPACE","\n    ",497],"}",["T_WHITESPACE","\n\n",498],["T_COMMENT","\/*\n    public function extendChildByNode($source, $overwrite=false, $mergeBy='name')\n    {\n        \/\/ this will be our new target node\n        $targetChild = null;\n\n        \/\/ name of the source node\n        $sourceName = $source->getName();\n\n        \/\/ here we have children of our source node\n        $sourceChildren = $source->children();\n\n        if (!$sourceChildren) {\n            \/\/ handle string node\n            if (isset($this->$sourceName)) {\n                if ($overwrite) {\n                    unset($this->$sourceName);\n                } else {\n                    return $this;\n                }\n            }\n            $targetChild = $this->addChild($sourceName, (string)$source);\n            foreach ($source->attributes() as $key=>$value) {\n                $targetChild->addAttribute($key, $value);\n            }\n            return $this;\n        }\n\n        if (isset($this->$sourceName)) {\n            \/\/ search for target child with same name subnode as node's name\n            if (isset($source->$mergeBy)) {\n                foreach ($this->$sourceName as $targetNode) {\n                    if (!isset($targetNode->$mergeBy)) {\n                        Zend::exception(\"Can't merge identified node with non identified\");\n                    }\n                    if ((string)$source->$mergeBy==(string)$targetNode->$mergeBy) {\n                        $targetChild = $targetNode;\n                        break;\n                    }\n                }\n            } else {\n                $existsWithId = false;\n                foreach ($this->$sourceName as $targetNode) {\n                    if (isset($targetNode->$mergeBy)) {\n                        Zend::exception(\"Can't merge identified node with non identified\");\n                    }\n                }\n                $targetChild = $this->$sourceName;\n            }\n        }\n\n        if (is_null($targetChild)) {\n            \/\/ if child target is not found create new and descend\n            $targetChild = $this->addChild($sourceName);\n            foreach ($source->attributes() as $key=>$value) {\n                $targetChild->addAttribute($key, $value);\n            }\n        }\n\n        \/\/ finally add our source node children to resulting new target node\n        foreach ($sourceChildren as $childKey=>$childNode) {\n            $targetChild->extendChildByNode($childNode, $overwrite, $mergeBy);\n        }\n\n        return $this;\n    }\n\n    public function extendChildByAttribute($source, $overwrite=false, $mergeBy='name')\n    {\n        \/\/ this will be our new target node\n        $targetChild = null;\n\n        \/\/ name of the source node\n        $sourceName = $source->getName();\n\n        \/\/ here we have children of our source node\n        $sourceChildren = $source->children();\n\n        if (!$sourceChildren) {\n            \/\/ handle string node\n            if (isset($this->$sourceName)) {\n                if ($overwrite) {\n                    unset($this->$sourceName);\n                } else {\n                    return $this;\n                }\n            }\n            $targetChild = $this->addChild($sourceName, (string)$source);\n            foreach ($source->attributes() as $key=>$value) {\n                $targetChild->addAttribute($key, $value);\n            }\n            return $this;\n        }\n\n        if (isset($this->$sourceName)) {\n            \/\/ search for target child with same name subnode as node's name\n            if (isset($source[$mergeBy])) {\n                foreach ($this->$sourceName as $targetNode) {\n                    if (!isset($targetNode[$mergeBy])) {\n                        Zend::exception(\"Can't merge identified node with non identified\");\n                    }\n                    if ((string)$source[$mergeBy]==(string)$targetNode[$mergeBy]) {\n                        $targetChild = $targetNode;\n                        break;\n                    }\n                }\n            } else {\n                $existsWithId = false;\n                foreach ($this->$sourceName as $targetNode) {\n                    if (isset($targetNode[$mergeBy])) {\n                        Zend::exception(\"Can't merge identified node with non identified\");\n                    }\n                }\n                $targetChild = $this->$sourceName;\n            }\n        }\n\n        if (is_null($targetChild)) {\n            \/\/ if child target is not found create new and descend\n            $targetChild = $this->addChild($sourceName);\n            foreach ($source->attributes() as $key=>$value) {\n                $targetChild->addAttribute($key, $value);\n            }\n        }\n\n        \/\/ finally add our source node children to resulting new target node\n        foreach ($sourceChildren as $childKey=>$childNode) {\n            $targetChild->extendChildByAttribute($childNode, $overwrite, $mergeBy);\n        }\n\n        return $this;\n    }\n*\/",500],["T_WHITESPACE","\n\n\n",632],"}",["T_WHITESPACE","\n",635]]
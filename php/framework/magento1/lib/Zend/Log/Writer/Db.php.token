[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Zend Framework\n *\n * LICENSE\n *\n * This source file is subject to the new BSD license that is bundled\n * with this package in the file LICENSE.txt.\n * It is also available through the world-wide-web at this URL:\n * http:\/\/framework.zend.com\/license\/new-bsd\n * If you did not receive a copy of the license and are unable to\n * obtain it through the world-wide-web, please send an email\n * to license@zend.com so we can send you a copy immediately.\n *\n * @category   Zend\n * @package    Zend_Log\n * @subpackage Writer\n * @copyright  Copyright (c) 2005-2015 Zend Technologies USA Inc. (http:\/\/www.zend.com)\n * @license    http:\/\/framework.zend.com\/license\/new-bsd     New BSD License\n * @version    $Id$\n *\/",2],["T_WHITESPACE","\n\n",21],["T_DOC_COMMENT","\/** Zend_Log_Writer_Abstract *\/",23],["T_WHITESPACE","\n",23],["T_COMMENT","#require_once 'Zend\/Log\/Writer\/Abstract.php';\n",24],["T_WHITESPACE","\n",25],["T_DOC_COMMENT","\/**\n * @category   Zend\n * @package    Zend_Log\n * @subpackage Writer\n * @copyright  Copyright (c) 2005-2015 Zend Technologies USA Inc. (http:\/\/www.zend.com)\n * @license    http:\/\/framework.zend.com\/license\/new-bsd     New BSD License\n * @version    $Id$\n *\/",26],["T_WHITESPACE","\n",33],["T_CLASS","class",34],["T_WHITESPACE"," ",34],["T_STRING","Zend_Log_Writer_Db",34],["T_WHITESPACE"," ",34],["T_EXTENDS","extends",34],["T_WHITESPACE"," ",34],["T_STRING","Zend_Log_Writer_Abstract",34],["T_WHITESPACE","\n",34],"{",["T_WHITESPACE","\n    ",35],["T_DOC_COMMENT","\/**\n     * Database adapter instance\n     *\n     * @var Zend_Db_Adapter\n     *\/",36],["T_WHITESPACE","\n    ",40],["T_PROTECTED","protected",41],["T_WHITESPACE"," ",41],["T_VARIABLE","$_db",41],";",["T_WHITESPACE","\n\n    ",41],["T_DOC_COMMENT","\/**\n     * Name of the log table in the database\n     *\n     * @var string\n     *\/",43],["T_WHITESPACE","\n    ",47],["T_PROTECTED","protected",48],["T_WHITESPACE"," ",48],["T_VARIABLE","$_table",48],";",["T_WHITESPACE","\n\n    ",48],["T_DOC_COMMENT","\/**\n     * Relates database columns names to log data field keys.\n     *\n     * @var null|array\n     *\/",50],["T_WHITESPACE","\n    ",54],["T_PROTECTED","protected",55],["T_WHITESPACE"," ",55],["T_VARIABLE","$_columnMap",55],";",["T_WHITESPACE","\n\n    ",55],["T_DOC_COMMENT","\/**\n     * Class constructor\n     *\n     * @param Zend_Db_Adapter $db   Database adapter instance\n     * @param string $table         Log table in database\n     * @param array $columnMap\n     * @return void\n     *\/",57],["T_WHITESPACE","\n    ",64],["T_PUBLIC","public",65],["T_WHITESPACE"," ",65],["T_FUNCTION","function",65],["T_WHITESPACE"," ",65],["T_STRING","__construct",65],"(",["T_VARIABLE","$db",65],",",["T_WHITESPACE"," ",65],["T_VARIABLE","$table",65],",",["T_WHITESPACE"," ",65],["T_VARIABLE","$columnMap",65],["T_WHITESPACE"," ",65],"=",["T_WHITESPACE"," ",65],["T_STRING","null",65],")",["T_WHITESPACE","\n    ",65],"{",["T_WHITESPACE","\n        ",66],["T_VARIABLE","$this",67],["T_OBJECT_OPERATOR","->",67],["T_STRING","_db",67],["T_WHITESPACE","    ",67],"=",["T_WHITESPACE"," ",67],["T_VARIABLE","$db",67],";",["T_WHITESPACE","\n        ",67],["T_VARIABLE","$this",68],["T_OBJECT_OPERATOR","->",68],["T_STRING","_table",68],["T_WHITESPACE"," ",68],"=",["T_WHITESPACE"," ",68],["T_VARIABLE","$table",68],";",["T_WHITESPACE","\n        ",68],["T_VARIABLE","$this",69],["T_OBJECT_OPERATOR","->",69],["T_STRING","_columnMap",69],["T_WHITESPACE"," ",69],"=",["T_WHITESPACE"," ",69],["T_VARIABLE","$columnMap",69],";",["T_WHITESPACE","\n    ",69],"}",["T_WHITESPACE","\n\n    ",70],["T_DOC_COMMENT","\/**\n     * Create a new instance of Zend_Log_Writer_Db\n     *\n     * @param  array|Zend_Config $config\n     * @return Zend_Log_Writer_Db\n     *\/",72],["T_WHITESPACE","\n    ",77],["T_STATIC","static",78],["T_WHITESPACE"," ",78],["T_PUBLIC","public",78],["T_WHITESPACE"," ",78],["T_FUNCTION","function",78],["T_WHITESPACE"," ",78],["T_STRING","factory",78],"(",["T_VARIABLE","$config",78],")",["T_WHITESPACE","\n    ",78],"{",["T_WHITESPACE","\n        ",79],["T_VARIABLE","$config",80],["T_WHITESPACE"," ",80],"=",["T_WHITESPACE"," ",80],["T_STRING","self",80],["T_DOUBLE_COLON","::",80],["T_STRING","_parseConfig",80],"(",["T_VARIABLE","$config",80],")",";",["T_WHITESPACE","\n        ",80],["T_VARIABLE","$config",81],["T_WHITESPACE"," ",81],"=",["T_WHITESPACE"," ",81],["T_STRING","array_merge",81],"(",["T_ARRAY","array",81],"(",["T_WHITESPACE","\n            ",81],["T_CONSTANT_ENCAPSED_STRING","'db'",82],["T_WHITESPACE","        ",82],["T_DOUBLE_ARROW","=>",82],["T_WHITESPACE"," ",82],["T_STRING","null",82],",",["T_WHITESPACE","\n            ",82],["T_CONSTANT_ENCAPSED_STRING","'table'",83],["T_WHITESPACE","     ",83],["T_DOUBLE_ARROW","=>",83],["T_WHITESPACE"," ",83],["T_STRING","null",83],",",["T_WHITESPACE","\n            ",83],["T_CONSTANT_ENCAPSED_STRING","'columnMap'",84],["T_WHITESPACE"," ",84],["T_DOUBLE_ARROW","=>",84],["T_WHITESPACE"," ",84],["T_STRING","null",84],",",["T_WHITESPACE","\n        ",84],")",",",["T_WHITESPACE"," ",85],["T_VARIABLE","$config",85],")",";",["T_WHITESPACE","\n\n        ",85],["T_IF","if",87],["T_WHITESPACE"," ",87],"(",["T_ISSET","isset",87],"(",["T_VARIABLE","$config",87],"[",["T_CONSTANT_ENCAPSED_STRING","'columnmap'",87],"]",")",")",["T_WHITESPACE"," ",87],"{",["T_WHITESPACE","\n            ",87],["T_VARIABLE","$config",88],"[",["T_CONSTANT_ENCAPSED_STRING","'columnMap'",88],"]",["T_WHITESPACE"," ",88],"=",["T_WHITESPACE"," ",88],["T_VARIABLE","$config",88],"[",["T_CONSTANT_ENCAPSED_STRING","'columnmap'",88],"]",";",["T_WHITESPACE","\n        ",88],"}",["T_WHITESPACE","\n\n        ",89],["T_RETURN","return",91],["T_WHITESPACE"," ",91],["T_NEW","new",91],["T_WHITESPACE"," ",91],["T_STRING","self",91],"(",["T_WHITESPACE","\n            ",91],["T_VARIABLE","$config",92],"[",["T_CONSTANT_ENCAPSED_STRING","'db'",92],"]",",",["T_WHITESPACE","\n            ",92],["T_VARIABLE","$config",93],"[",["T_CONSTANT_ENCAPSED_STRING","'table'",93],"]",",",["T_WHITESPACE","\n            ",93],["T_VARIABLE","$config",94],"[",["T_CONSTANT_ENCAPSED_STRING","'columnMap'",94],"]",["T_WHITESPACE","\n        ",94],")",";",["T_WHITESPACE","\n    ",95],"}",["T_WHITESPACE","\n\n    ",96],["T_DOC_COMMENT","\/**\n     * Formatting is not possible on this writer\n     *\n     * @return void\n     * @throws Zend_Log_Exception\n     *\/",98],["T_WHITESPACE","\n    ",103],["T_PUBLIC","public",104],["T_WHITESPACE"," ",104],["T_FUNCTION","function",104],["T_WHITESPACE"," ",104],["T_STRING","setFormatter",104],"(",["T_STRING","Zend_Log_Formatter_Interface",104],["T_WHITESPACE"," ",104],["T_VARIABLE","$formatter",104],")",["T_WHITESPACE","\n    ",104],"{",["T_WHITESPACE","\n        ",105],["T_COMMENT","#require_once 'Zend\/Log\/Exception.php';\n",106],["T_WHITESPACE","        ",107],["T_THROW","throw",107],["T_WHITESPACE"," ",107],["T_NEW","new",107],["T_WHITESPACE"," ",107],["T_STRING","Zend_Log_Exception",107],"(",["T_STRING","get_class",107],"(",["T_VARIABLE","$this",107],")",["T_WHITESPACE"," ",107],".",["T_WHITESPACE"," ",107],["T_CONSTANT_ENCAPSED_STRING","' does not support formatting'",107],")",";",["T_WHITESPACE","\n    ",107],"}",["T_WHITESPACE","\n\n    ",108],["T_DOC_COMMENT","\/**\n     * Remove reference to database adapter\n     *\n     * @return void\n     *\/",110],["T_WHITESPACE","\n    ",114],["T_PUBLIC","public",115],["T_WHITESPACE"," ",115],["T_FUNCTION","function",115],["T_WHITESPACE"," ",115],["T_STRING","shutdown",115],"(",")",["T_WHITESPACE","\n    ",115],"{",["T_WHITESPACE","\n        ",116],["T_VARIABLE","$this",117],["T_OBJECT_OPERATOR","->",117],["T_STRING","_db",117],["T_WHITESPACE"," ",117],"=",["T_WHITESPACE"," ",117],["T_STRING","null",117],";",["T_WHITESPACE","\n    ",117],"}",["T_WHITESPACE","\n\n    ",118],["T_DOC_COMMENT","\/**\n     * Write a message to the log.\n     *\n     * @param  array  $event  event data\n     * @return void\n     * @throws Zend_Log_Exception\n     *\/",120],["T_WHITESPACE","\n    ",126],["T_PROTECTED","protected",127],["T_WHITESPACE"," ",127],["T_FUNCTION","function",127],["T_WHITESPACE"," ",127],["T_STRING","_write",127],"(",["T_VARIABLE","$event",127],")",["T_WHITESPACE","\n    ",127],"{",["T_WHITESPACE","\n        ",128],["T_IF","if",129],["T_WHITESPACE"," ",129],"(",["T_VARIABLE","$this",129],["T_OBJECT_OPERATOR","->",129],["T_STRING","_db",129],["T_WHITESPACE"," ",129],["T_IS_IDENTICAL","===",129],["T_WHITESPACE"," ",129],["T_STRING","null",129],")",["T_WHITESPACE"," ",129],"{",["T_WHITESPACE","\n            ",129],["T_COMMENT","#require_once 'Zend\/Log\/Exception.php';\n",130],["T_WHITESPACE","            ",131],["T_THROW","throw",131],["T_WHITESPACE"," ",131],["T_NEW","new",131],["T_WHITESPACE"," ",131],["T_STRING","Zend_Log_Exception",131],"(",["T_CONSTANT_ENCAPSED_STRING","'Database adapter is null'",131],")",";",["T_WHITESPACE","\n        ",131],"}",["T_WHITESPACE","\n\n        ",132],["T_IF","if",134],["T_WHITESPACE"," ",134],"(",["T_VARIABLE","$this",134],["T_OBJECT_OPERATOR","->",134],["T_STRING","_columnMap",134],["T_WHITESPACE"," ",134],["T_IS_IDENTICAL","===",134],["T_WHITESPACE"," ",134],["T_STRING","null",134],")",["T_WHITESPACE"," ",134],"{",["T_WHITESPACE","\n            ",134],["T_VARIABLE","$dataToInsert",135],["T_WHITESPACE"," ",135],"=",["T_WHITESPACE"," ",135],["T_VARIABLE","$event",135],";",["T_WHITESPACE","\n        ",135],"}",["T_WHITESPACE"," ",136],["T_ELSE","else",136],["T_WHITESPACE"," ",136],"{",["T_WHITESPACE","\n            ",136],["T_VARIABLE","$dataToInsert",137],["T_WHITESPACE"," ",137],"=",["T_WHITESPACE"," ",137],["T_ARRAY","array",137],"(",")",";",["T_WHITESPACE","\n            ",137],["T_FOREACH","foreach",138],["T_WHITESPACE"," ",138],"(",["T_VARIABLE","$this",138],["T_OBJECT_OPERATOR","->",138],["T_STRING","_columnMap",138],["T_WHITESPACE"," ",138],["T_AS","as",138],["T_WHITESPACE"," ",138],["T_VARIABLE","$columnName",138],["T_WHITESPACE"," ",138],["T_DOUBLE_ARROW","=>",138],["T_WHITESPACE"," ",138],["T_VARIABLE","$fieldKey",138],")",["T_WHITESPACE"," ",138],"{",["T_WHITESPACE","\n                ",138],["T_IF","if",139],["T_WHITESPACE"," ",139],"(",["T_ISSET","isset",139],"(",["T_VARIABLE","$event",139],"[",["T_VARIABLE","$fieldKey",139],"]",")",")",["T_WHITESPACE"," ",139],"{",["T_WHITESPACE","\n                    ",139],["T_VARIABLE","$dataToInsert",140],"[",["T_VARIABLE","$columnName",140],"]",["T_WHITESPACE"," ",140],"=",["T_WHITESPACE"," ",140],["T_VARIABLE","$event",140],"[",["T_VARIABLE","$fieldKey",140],"]",";",["T_WHITESPACE","\n                ",140],"}",["T_WHITESPACE","\n            ",141],"}",["T_WHITESPACE","\n        ",142],"}",["T_WHITESPACE","\n\n        ",143],["T_VARIABLE","$this",145],["T_OBJECT_OPERATOR","->",145],["T_STRING","_db",145],["T_OBJECT_OPERATOR","->",145],["T_STRING","insert",145],"(",["T_VARIABLE","$this",145],["T_OBJECT_OPERATOR","->",145],["T_STRING","_table",145],",",["T_WHITESPACE"," ",145],["T_VARIABLE","$dataToInsert",145],")",";",["T_WHITESPACE","\n    ",145],"}",["T_WHITESPACE","\n",146],"}",["T_WHITESPACE","\n",147]]
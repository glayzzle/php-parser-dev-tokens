[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Zend Framework\n *\n * LICENSE\n *\n * This source file is subject to the new BSD license that is bundled\n * with this package in the file LICENSE.txt.\n * It is also available through the world-wide-web at this URL:\n * http:\/\/framework.zend.com\/license\/new-bsd\n * If you did not receive a copy of the license and are unable to\n * obtain it through the world-wide-web, please send an email\n * to license@zend.com so we can send you a copy immediately.\n *\n * @category   Zend\n * @package    Zend_Test\n * @subpackage PHPUnit\n * @copyright  Copyright (c) 2005-2015 Zend Technologies USA Inc. (http:\/\/www.zend.com)\n * @license    http:\/\/framework.zend.com\/license\/new-bsd     New BSD License\n * @version    $Id$\n *\/",2],["T_WHITESPACE","\n\n",21],["T_DOC_COMMENT","\/**\n * @see Zend_Test_PHPUnit_Db_Connection\n *\/",23],["T_WHITESPACE","\n",25],["T_COMMENT","#require_once \"Zend\/Test\/PHPUnit\/Db\/Connection.php\";\n",26],["T_WHITESPACE","\n",27],["T_DOC_COMMENT","\/**\n * Operation for Truncating on setup or teardown of a database tester.\n *\n * @uses       PHPUnit_Extensions_Database_Operation_IDatabaseOperation\n * @category   Zend\n * @package    Zend_Test\n * @subpackage PHPUnit\n * @copyright  Copyright (c) 2005-2015 Zend Technologies USA Inc. (http:\/\/www.zend.com)\n * @license    http:\/\/framework.zend.com\/license\/new-bsd     New BSD License\n *\/",28],["T_WHITESPACE","\n",37],["T_CLASS","class",38],["T_WHITESPACE"," ",38],["T_STRING","Zend_Test_PHPUnit_Db_Operation_Truncate",38],["T_WHITESPACE"," ",38],["T_IMPLEMENTS","implements",38],["T_WHITESPACE"," ",38],["T_STRING","PHPUnit_Extensions_Database_Operation_IDatabaseOperation",38],["T_WHITESPACE","\n",38],"{",["T_WHITESPACE","\n    ",39],["T_DOC_COMMENT","\/**\n     *\n     * @param PHPUnit_Extensions_Database_DB_IDatabaseConnection $connection\n     * @param PHPUnit_Extensions_Database_DataSet_IDataSet $dataSet\n     * @return void\n     *\/",40],["T_WHITESPACE","\n    ",45],["T_PUBLIC","public",46],["T_WHITESPACE"," ",46],["T_FUNCTION","function",46],["T_WHITESPACE"," ",46],["T_STRING","execute",46],"(",["T_STRING","PHPUnit_Extensions_Database_DB_IDatabaseConnection",46],["T_WHITESPACE"," ",46],["T_VARIABLE","$connection",46],",",["T_WHITESPACE"," ",46],["T_STRING","PHPUnit_Extensions_Database_DataSet_IDataSet",46],["T_WHITESPACE"," ",46],["T_VARIABLE","$dataSet",46],")",["T_WHITESPACE","\n    ",46],"{",["T_WHITESPACE","\n        ",47],["T_IF","if",48],"(","!","(",["T_VARIABLE","$connection",48],["T_WHITESPACE"," ",48],["T_INSTANCEOF","instanceof",48],["T_WHITESPACE"," ",48],["T_STRING","Zend_Test_PHPUnit_Db_Connection",48],")",")",["T_WHITESPACE"," ",48],"{",["T_WHITESPACE","\n            ",48],["T_COMMENT","#require_once \"Zend\/Test\/PHPUnit\/Db\/Exception.php\";\n",49],["T_WHITESPACE","            ",50],["T_THROW","throw",50],["T_WHITESPACE"," ",50],["T_NEW","new",50],["T_WHITESPACE"," ",50],["T_STRING","Zend_Test_PHPUnit_Db_Exception",50],"(",["T_CONSTANT_ENCAPSED_STRING","\"Not a valid Zend_Test_PHPUnit_Db_Connection instance, \"",50],".",["T_STRING","get_class",50],"(",["T_VARIABLE","$connection",50],")",".",["T_CONSTANT_ENCAPSED_STRING","\" given!\"",50],")",";",["T_WHITESPACE","\n        ",50],"}",["T_WHITESPACE","\n\n        ",51],["T_FOREACH","foreach",53],["T_WHITESPACE"," ",53],"(",["T_VARIABLE","$dataSet",53],["T_OBJECT_OPERATOR","->",53],["T_STRING","getReverseIterator",53],"(",")",["T_WHITESPACE"," ",53],["T_AS","AS",53],["T_WHITESPACE"," ",53],["T_VARIABLE","$table",53],")",["T_WHITESPACE"," ",53],"{",["T_WHITESPACE","\n            ",53],["T_TRY","try",54],["T_WHITESPACE"," ",54],"{",["T_WHITESPACE","\n                ",54],["T_VARIABLE","$tableName",55],["T_WHITESPACE"," ",55],"=",["T_WHITESPACE"," ",55],["T_VARIABLE","$table",55],["T_OBJECT_OPERATOR","->",55],["T_STRING","getTableMetaData",55],"(",")",["T_OBJECT_OPERATOR","->",55],["T_STRING","getTableName",55],"(",")",";",["T_WHITESPACE","\n                ",55],["T_VARIABLE","$this",56],["T_OBJECT_OPERATOR","->",56],["T_STRING","_truncate",56],"(",["T_VARIABLE","$connection",56],["T_OBJECT_OPERATOR","->",56],["T_STRING","getConnection",56],"(",")",",",["T_WHITESPACE"," ",56],["T_VARIABLE","$tableName",56],")",";",["T_WHITESPACE","\n            ",56],"}",["T_WHITESPACE"," ",57],["T_CATCH","catch",57],["T_WHITESPACE"," ",57],"(",["T_STRING","Exception",57],["T_WHITESPACE"," ",57],["T_VARIABLE","$e",57],")",["T_WHITESPACE"," ",57],"{",["T_WHITESPACE","\n                ",57],["T_THROW","throw",58],["T_WHITESPACE"," ",58],["T_NEW","new",58],["T_WHITESPACE"," ",58],["T_STRING","PHPUnit_Extensions_Database_Operation_Exception",58],"(",["T_CONSTANT_ENCAPSED_STRING","'TRUNCATE'",58],",",["T_WHITESPACE"," ",58],["T_CONSTANT_ENCAPSED_STRING","'TRUNCATE '",58],".",["T_VARIABLE","$tableName",58],".",["T_CONSTANT_ENCAPSED_STRING","''",58],",",["T_WHITESPACE"," ",58],["T_ARRAY","array",58],"(",")",",",["T_WHITESPACE"," ",58],["T_VARIABLE","$table",58],",",["T_WHITESPACE"," ",58],["T_VARIABLE","$e",58],["T_OBJECT_OPERATOR","->",58],["T_STRING","getMessage",58],"(",")",")",";",["T_WHITESPACE","\n            ",58],"}",["T_WHITESPACE","\n        ",59],"}",["T_WHITESPACE","\n    ",60],"}",["T_WHITESPACE","\n\n    ",61],["T_DOC_COMMENT","\/**\n     * Truncate a given table.\n     *\n     * @param Zend_Db_Adapter_Abstract $db\n     * @param string $tableName\n     * @return void\n     *\/",63],["T_WHITESPACE","\n    ",69],["T_PROTECTED","protected",70],["T_WHITESPACE"," ",70],["T_FUNCTION","function",70],["T_WHITESPACE"," ",70],["T_STRING","_truncate",70],"(",["T_STRING","Zend_Db_Adapter_Abstract",70],["T_WHITESPACE"," ",70],["T_VARIABLE","$db",70],",",["T_WHITESPACE"," ",70],["T_VARIABLE","$tableName",70],")",["T_WHITESPACE","\n    ",70],"{",["T_WHITESPACE","\n        ",71],["T_VARIABLE","$tableName",72],["T_WHITESPACE"," ",72],"=",["T_WHITESPACE"," ",72],["T_VARIABLE","$db",72],["T_OBJECT_OPERATOR","->",72],["T_STRING","quoteIdentifier",72],"(",["T_VARIABLE","$tableName",72],",",["T_WHITESPACE"," ",72],["T_STRING","true",72],")",";",["T_WHITESPACE","\n        ",72],["T_IF","if",73],"(",["T_VARIABLE","$db",73],["T_WHITESPACE"," ",73],["T_INSTANCEOF","instanceof",73],["T_WHITESPACE"," ",73],["T_STRING","Zend_Db_Adapter_Pdo_Sqlite",73],")",["T_WHITESPACE"," ",73],"{",["T_WHITESPACE","\n            ",73],["T_VARIABLE","$db",74],["T_OBJECT_OPERATOR","->",74],["T_STRING","query",74],"(",["T_CONSTANT_ENCAPSED_STRING","'DELETE FROM '",74],".",["T_VARIABLE","$tableName",74],")",";",["T_WHITESPACE","\n        ",74],"}",["T_WHITESPACE"," ",75],["T_ELSE","else",75],["T_WHITESPACE"," ",75],["T_IF","if",75],"(",["T_VARIABLE","$db",75],["T_WHITESPACE"," ",75],["T_INSTANCEOF","instanceof",75],["T_WHITESPACE"," ",75],["T_STRING","Zend_Db_Adapter_Db2",75],")",["T_WHITESPACE"," ",75],"{",["T_WHITESPACE","\n            ",75],["T_COMMENT","\/*if(strstr(PHP_OS, \"WIN\")) {\n                $file = tempnam(sys_get_temp_dir(), \"zendtestdbibm_\");\n                file_put_contents($file, \"\");\n                $db->query('IMPORT FROM '.$file.' OF DEL REPLACE INTO '.$tableName);\n                unlink($file);\n            } else {\n                $db->query('IMPORT FROM \/dev\/null OF DEL REPLACE INTO '.$tableName);\n            }*\/",76],["T_WHITESPACE","\n            ",83],["T_COMMENT","#require_once \"Zend\/Exception.php\";\n",84],["T_WHITESPACE","            ",85],["T_THROW","throw",85],["T_WHITESPACE"," ",85],["T_STRING","Zend_Exception",85],"(",["T_CONSTANT_ENCAPSED_STRING","\"IBM Db2 TRUNCATE not supported.\"",85],")",";",["T_WHITESPACE","\n        ",85],"}",["T_WHITESPACE"," ",86],["T_ELSE","else",86],["T_WHITESPACE"," ",86],["T_IF","if",86],"(",["T_VARIABLE","$this",86],["T_OBJECT_OPERATOR","->",86],["T_STRING","_isMssqlOrOracle",86],"(",["T_VARIABLE","$db",86],")",")",["T_WHITESPACE"," ",86],"{",["T_WHITESPACE","\n            ",86],["T_VARIABLE","$db",87],["T_OBJECT_OPERATOR","->",87],["T_STRING","query",87],"(",["T_CONSTANT_ENCAPSED_STRING","'TRUNCATE TABLE '",87],".",["T_VARIABLE","$tableName",87],")",";",["T_WHITESPACE","\n        ",87],"}",["T_WHITESPACE"," ",88],["T_ELSE","else",88],["T_WHITESPACE"," ",88],["T_IF","if",88],"(",["T_VARIABLE","$db",88],["T_WHITESPACE"," ",88],["T_INSTANCEOF","instanceof",88],["T_WHITESPACE"," ",88],["T_STRING","Zend_Db_Adapter_Pdo_Pgsql",88],")",["T_WHITESPACE"," ",88],"{",["T_WHITESPACE","\n            ",88],["T_VARIABLE","$db",89],["T_OBJECT_OPERATOR","->",89],["T_STRING","query",89],"(",["T_CONSTANT_ENCAPSED_STRING","'TRUNCATE '",89],".",["T_VARIABLE","$tableName",89],".",["T_CONSTANT_ENCAPSED_STRING","' CASCADE'",89],")",";",["T_WHITESPACE","\n        ",89],"}",["T_WHITESPACE"," ",90],["T_ELSE","else",90],["T_WHITESPACE"," ",90],"{",["T_WHITESPACE","\n            ",90],["T_VARIABLE","$db",91],["T_OBJECT_OPERATOR","->",91],["T_STRING","query",91],"(",["T_CONSTANT_ENCAPSED_STRING","'TRUNCATE '",91],".",["T_VARIABLE","$tableName",91],")",";",["T_WHITESPACE","\n        ",91],"}",["T_WHITESPACE","\n    ",92],"}",["T_WHITESPACE","\n\n    ",93],["T_DOC_COMMENT","\/**\n     * Detect if an adapter is for Mssql or Oracle Databases.\n     *\n     * @param  Zend_Db_Adapter_Abstract $db\n     * @return bool\n     *\/",95],["T_WHITESPACE","\n    ",100],["T_PRIVATE","private",101],["T_WHITESPACE"," ",101],["T_FUNCTION","function",101],["T_WHITESPACE"," ",101],["T_STRING","_isMssqlOrOracle",101],"(",["T_VARIABLE","$db",101],")",["T_WHITESPACE","\n    ",101],"{",["T_WHITESPACE","\n        ",102],["T_RETURN","return",103],["T_WHITESPACE"," ",103],"(",["T_WHITESPACE","\n            ",103],["T_VARIABLE","$db",104],["T_WHITESPACE"," ",104],["T_INSTANCEOF","instanceof",104],["T_WHITESPACE"," ",104],["T_STRING","Zend_Db_Adapter_Pdo_Mssql",104],["T_WHITESPACE"," ",104],["T_BOOLEAN_OR","||",104],["T_WHITESPACE","\n            ",104],["T_VARIABLE","$db",105],["T_WHITESPACE"," ",105],["T_INSTANCEOF","instanceof",105],["T_WHITESPACE"," ",105],["T_STRING","Zend_Db_Adapter_Sqlsrv",105],["T_WHITESPACE"," ",105],["T_BOOLEAN_OR","||",105],["T_WHITESPACE","\n            ",105],["T_VARIABLE","$db",106],["T_WHITESPACE"," ",106],["T_INSTANCEOF","instanceof",106],["T_WHITESPACE"," ",106],["T_STRING","Zend_Db_Adapter_Pdo_Oci",106],["T_WHITESPACE"," ",106],["T_BOOLEAN_OR","||",106],["T_WHITESPACE","\n            ",106],["T_VARIABLE","$db",107],["T_WHITESPACE"," ",107],["T_INSTANCEOF","instanceof",107],["T_WHITESPACE"," ",107],["T_STRING","Zend_Db_Adapter_Oracle",107],["T_WHITESPACE","\n        ",107],")",";",["T_WHITESPACE","\n    ",108],"}",["T_WHITESPACE","\n",109],"}",["T_WHITESPACE","\n",110]]
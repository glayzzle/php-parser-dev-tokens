[["T_OPEN_TAG","<?php\n",1],["T_WHITESPACE","\n",2],["T_DOC_COMMENT","\/**\n * Zend Framework\n *\n * LICENSE\n *\n * This source file is subject to the new BSD license that is bundled\n * with this package in the file LICENSE.txt.\n * It is also available through the world-wide-web at this URL:\n * http:\/\/framework.zend.com\/license\/new-bsd\n * If you did not receive a copy of the license and are unable to\n * obtain it through the world-wide-web, please send an email\n * to license@zend.com so we can send you a copy immediately.\n *\n * @category   Zend\n * @package    Zend_Gdata\n * @subpackage Gdata\n * @copyright  Copyright (c) 2005-2015 Zend Technologies USA Inc. (http:\/\/www.zend.com)\n * @license    http:\/\/framework.zend.com\/license\/new-bsd     New BSD License\n * @version    $Id$\n *\/",3],["T_WHITESPACE","\n\n",22],["T_DOC_COMMENT","\/**\n * @see Zend_Http_Client_Adapter_Socket\n *\/",24],["T_WHITESPACE","\n",26],["T_COMMENT","#require_once 'Zend\/Http\/Client\/Adapter\/Socket.php';\n",27],["T_WHITESPACE","\n",28],["T_DOC_COMMENT","\/**\n * Extends the default HTTP adapter to handle streams instead of discrete body\n * strings.\n *\n * @category   Zend\n * @package    Zend_Gdata\n * @subpackage Gdata\n * @copyright  Copyright (c) 2005-2015 Zend Technologies USA Inc. (http:\/\/www.zend.com)\n * @license    http:\/\/framework.zend.com\/license\/new-bsd     New BSD License\n *\/",29],["T_WHITESPACE","\n",38],["T_CLASS","class",39],["T_WHITESPACE"," ",39],["T_STRING","Zend_Gdata_HttpAdapterStreamingSocket",39],["T_WHITESPACE"," ",39],["T_EXTENDS","extends",39],["T_WHITESPACE"," ",39],["T_STRING","Zend_Http_Client_Adapter_Socket",39],["T_WHITESPACE","\n",39],"{",["T_WHITESPACE","\n\n    ",40],["T_DOC_COMMENT","\/**\n     * The amount read from a stream source at a time.\n     *\n     * @var integer\n     *\/",42],["T_WHITESPACE","\n    ",46],["T_CONST","const",47],["T_WHITESPACE"," ",47],["T_STRING","CHUNK_SIZE",47],["T_WHITESPACE"," ",47],"=",["T_WHITESPACE"," ",47],["T_LNUMBER","1024",47],";",["T_WHITESPACE","\n\n    ",47],["T_DOC_COMMENT","\/**\n     * Send request to the remote server with streaming support.\n     *\n     * @param string        $method\n     * @param Zend_Uri_Http $uri\n     * @param string        $http_ver\n     * @param array         $headers\n     * @param string        $body\n     * @return string Request as string\n     *\/",49],["T_WHITESPACE","\n    ",58],["T_PUBLIC","public",59],["T_WHITESPACE"," ",59],["T_FUNCTION","function",59],["T_WHITESPACE"," ",59],["T_STRING","write",59],"(",["T_VARIABLE","$method",59],",",["T_WHITESPACE"," ",59],["T_VARIABLE","$uri",59],",",["T_WHITESPACE"," ",59],["T_VARIABLE","$http_ver",59],["T_WHITESPACE"," ",59],"=",["T_WHITESPACE"," ",59],["T_CONSTANT_ENCAPSED_STRING","'1.1'",59],",",["T_WHITESPACE"," ",59],["T_VARIABLE","$headers",59],["T_WHITESPACE"," ",59],"=",["T_WHITESPACE"," ",59],["T_ARRAY","array",59],"(",")",",",["T_WHITESPACE","\n        ",59],["T_VARIABLE","$body",60],["T_WHITESPACE"," ",60],"=",["T_WHITESPACE"," ",60],["T_CONSTANT_ENCAPSED_STRING","''",60],")",["T_WHITESPACE","\n    ",60],"{",["T_WHITESPACE","\n        ",61],["T_COMMENT","\/\/ Make sure we're properly connected\n",62],["T_WHITESPACE","        ",63],["T_IF","if",63],["T_WHITESPACE"," ",63],"(","!",["T_WHITESPACE"," ",63],["T_VARIABLE","$this",63],["T_OBJECT_OPERATOR","->",63],["T_STRING","socket",63],")",["T_WHITESPACE"," ",63],"{",["T_WHITESPACE","\n            ",63],["T_COMMENT","#require_once 'Zend\/Http\/Client\/Adapter\/Exception.php';\n",64],["T_WHITESPACE","            ",65],["T_THROW","throw",65],["T_WHITESPACE"," ",65],["T_NEW","new",65],["T_WHITESPACE"," ",65],["T_STRING","Zend_Http_Client_Adapter_Exception",65],"(",["T_WHITESPACE","\n                ",65],["T_CONSTANT_ENCAPSED_STRING","'Trying to write but we are not connected'",66],")",";",["T_WHITESPACE","\n        ",66],"}",["T_WHITESPACE","\n\n        ",67],["T_VARIABLE","$host",69],["T_WHITESPACE"," ",69],"=",["T_WHITESPACE"," ",69],["T_VARIABLE","$uri",69],["T_OBJECT_OPERATOR","->",69],["T_STRING","getHost",69],"(",")",";",["T_WHITESPACE","\n        ",69],["T_VARIABLE","$host",70],["T_WHITESPACE"," ",70],"=",["T_WHITESPACE"," ",70],"(",["T_STRING","strtolower",70],"(",["T_VARIABLE","$uri",70],["T_OBJECT_OPERATOR","->",70],["T_STRING","getScheme",70],"(",")",")",["T_WHITESPACE"," ",70],["T_IS_EQUAL","==",70],["T_WHITESPACE"," ",70],["T_CONSTANT_ENCAPSED_STRING","'https'",70],["T_WHITESPACE"," ",70],"?",["T_WHITESPACE"," ",70],["T_VARIABLE","$this",70],["T_OBJECT_OPERATOR","->",70],["T_STRING","config",70],"[",["T_CONSTANT_ENCAPSED_STRING","'ssltransport'",70],"]",["T_WHITESPACE"," ",70],":",["T_WHITESPACE"," ",70],["T_CONSTANT_ENCAPSED_STRING","'tcp'",70],")",["T_WHITESPACE"," ",70],".",["T_WHITESPACE"," ",70],["T_CONSTANT_ENCAPSED_STRING","':\/\/'",70],["T_WHITESPACE"," ",70],".",["T_WHITESPACE"," ",70],["T_VARIABLE","$host",70],";",["T_WHITESPACE","\n        ",70],["T_IF","if",71],["T_WHITESPACE"," ",71],"(",["T_VARIABLE","$this",71],["T_OBJECT_OPERATOR","->",71],["T_STRING","connected_to",71],"[",["T_LNUMBER","0",71],"]",["T_WHITESPACE"," ",71],["T_IS_NOT_EQUAL","!=",71],["T_WHITESPACE"," ",71],["T_VARIABLE","$host",71],["T_WHITESPACE"," ",71],["T_BOOLEAN_OR","||",71],["T_WHITESPACE"," ",71],["T_VARIABLE","$this",71],["T_OBJECT_OPERATOR","->",71],["T_STRING","connected_to",71],"[",["T_LNUMBER","1",71],"]",["T_WHITESPACE"," ",71],["T_IS_NOT_EQUAL","!=",71],["T_WHITESPACE"," ",71],["T_VARIABLE","$uri",71],["T_OBJECT_OPERATOR","->",71],["T_STRING","getPort",71],"(",")",")",["T_WHITESPACE"," ",71],"{",["T_WHITESPACE","\n            ",71],["T_COMMENT","#require_once 'Zend\/Http\/Client\/Adapter\/Exception.php';\n",72],["T_WHITESPACE","            ",73],["T_THROW","throw",73],["T_WHITESPACE"," ",73],["T_NEW","new",73],["T_WHITESPACE"," ",73],["T_STRING","Zend_Http_Client_Adapter_Exception",73],"(",["T_WHITESPACE","\n                ",73],["T_CONSTANT_ENCAPSED_STRING","'Trying to write but we are connected to the wrong host'",74],")",";",["T_WHITESPACE","\n        ",74],"}",["T_WHITESPACE","\n\n        ",75],["T_COMMENT","\/\/ Save request method for later\n",77],["T_WHITESPACE","        ",78],["T_VARIABLE","$this",78],["T_OBJECT_OPERATOR","->",78],["T_STRING","method",78],["T_WHITESPACE"," ",78],"=",["T_WHITESPACE"," ",78],["T_VARIABLE","$method",78],";",["T_WHITESPACE","\n\n        ",78],["T_COMMENT","\/\/ Build request headers\n",80],["T_WHITESPACE","        ",81],["T_VARIABLE","$path",81],["T_WHITESPACE"," ",81],"=",["T_WHITESPACE"," ",81],["T_VARIABLE","$uri",81],["T_OBJECT_OPERATOR","->",81],["T_STRING","getPath",81],"(",")",";",["T_WHITESPACE","\n        ",81],["T_IF","if",82],["T_WHITESPACE"," ",82],"(",["T_VARIABLE","$uri",82],["T_OBJECT_OPERATOR","->",82],["T_STRING","getQuery",82],"(",")",")",["T_WHITESPACE"," ",82],["T_VARIABLE","$path",82],["T_WHITESPACE"," ",82],["T_CONCAT_EQUAL",".=",82],["T_WHITESPACE"," ",82],["T_CONSTANT_ENCAPSED_STRING","'?'",82],["T_WHITESPACE"," ",82],".",["T_WHITESPACE"," ",82],["T_VARIABLE","$uri",82],["T_OBJECT_OPERATOR","->",82],["T_STRING","getQuery",82],"(",")",";",["T_WHITESPACE","\n        ",82],["T_VARIABLE","$request",83],["T_WHITESPACE"," ",83],"=",["T_WHITESPACE"," ",83],"\"",["T_CURLY_OPEN","{",83],["T_VARIABLE","$method",83],"}",["T_ENCAPSED_AND_WHITESPACE"," ",83],["T_CURLY_OPEN","{",83],["T_VARIABLE","$path",83],"}",["T_ENCAPSED_AND_WHITESPACE"," HTTP\/",83],["T_CURLY_OPEN","{",83],["T_VARIABLE","$http_ver",83],"}",["T_ENCAPSED_AND_WHITESPACE","\\r\\n",83],"\"",";",["T_WHITESPACE","\n        ",83],["T_FOREACH","foreach",84],["T_WHITESPACE"," ",84],"(",["T_VARIABLE","$headers",84],["T_WHITESPACE"," ",84],["T_AS","as",84],["T_WHITESPACE"," ",84],["T_VARIABLE","$k",84],["T_WHITESPACE"," ",84],["T_DOUBLE_ARROW","=>",84],["T_WHITESPACE"," ",84],["T_VARIABLE","$v",84],")",["T_WHITESPACE"," ",84],"{",["T_WHITESPACE","\n            ",84],["T_IF","if",85],["T_WHITESPACE"," ",85],"(",["T_STRING","is_string",85],"(",["T_VARIABLE","$k",85],")",")",["T_WHITESPACE"," ",85],["T_VARIABLE","$v",85],["T_WHITESPACE"," ",85],"=",["T_WHITESPACE"," ",85],["T_STRING","ucfirst",85],"(",["T_VARIABLE","$k",85],")",["T_WHITESPACE"," ",85],".",["T_WHITESPACE"," ",85],"\"",["T_ENCAPSED_AND_WHITESPACE",": ",85],["T_VARIABLE","$v",85],"\"",";",["T_WHITESPACE","\n            ",85],["T_VARIABLE","$request",86],["T_WHITESPACE"," ",86],["T_CONCAT_EQUAL",".=",86],["T_WHITESPACE"," ",86],"\"",["T_VARIABLE","$v",86],["T_ENCAPSED_AND_WHITESPACE","\\r\\n",86],"\"",";",["T_WHITESPACE","\n        ",86],"}",["T_WHITESPACE","\n\n        ",87],["T_COMMENT","\/\/ Send the headers over\n",89],["T_WHITESPACE","        ",90],["T_VARIABLE","$request",90],["T_WHITESPACE"," ",90],["T_CONCAT_EQUAL",".=",90],["T_WHITESPACE"," ",90],["T_CONSTANT_ENCAPSED_STRING","\"\\r\\n\"",90],";",["T_WHITESPACE","\n        ",90],["T_IF","if",91],["T_WHITESPACE"," ",91],"(","!",["T_WHITESPACE"," ",91],"@",["T_STRING","fwrite",91],"(",["T_VARIABLE","$this",91],["T_OBJECT_OPERATOR","->",91],["T_STRING","socket",91],",",["T_WHITESPACE"," ",91],["T_VARIABLE","$request",91],")",")",["T_WHITESPACE"," ",91],"{",["T_WHITESPACE","\n            ",91],["T_COMMENT","#require_once 'Zend\/Http\/Client\/Adapter\/Exception.php';\n",92],["T_WHITESPACE","            ",93],["T_THROW","throw",93],["T_WHITESPACE"," ",93],["T_NEW","new",93],["T_WHITESPACE"," ",93],["T_STRING","Zend_Http_Client_Adapter_Exception",93],"(",["T_WHITESPACE","\n                ",93],["T_CONSTANT_ENCAPSED_STRING","'Error writing request to server'",94],")",";",["T_WHITESPACE","\n        ",94],"}",["T_WHITESPACE","\n\n\n        ",95],["T_COMMENT","\/\/read from $body, write to socket\n",98],["T_WHITESPACE","        ",99],["T_VARIABLE","$chunk",99],["T_WHITESPACE"," ",99],"=",["T_WHITESPACE"," ",99],["T_VARIABLE","$body",99],["T_OBJECT_OPERATOR","->",99],["T_STRING","read",99],"(",["T_STRING","self",99],["T_DOUBLE_COLON","::",99],["T_STRING","CHUNK_SIZE",99],")",";",["T_WHITESPACE","\n        ",99],["T_WHILE","while",100],["T_WHITESPACE"," ",100],"(",["T_VARIABLE","$chunk",100],["T_WHITESPACE"," ",100],["T_IS_NOT_IDENTICAL","!==",100],["T_WHITESPACE"," ",100],["T_STRING","FALSE",100],")",["T_WHITESPACE"," ",100],"{",["T_WHITESPACE","\n            ",100],["T_IF","if",101],["T_WHITESPACE"," ",101],"(","!",["T_WHITESPACE"," ",101],"@",["T_STRING","fwrite",101],"(",["T_VARIABLE","$this",101],["T_OBJECT_OPERATOR","->",101],["T_STRING","socket",101],",",["T_WHITESPACE"," ",101],["T_VARIABLE","$chunk",101],")",")",["T_WHITESPACE"," ",101],"{",["T_WHITESPACE","\n                ",101],["T_COMMENT","#require_once 'Zend\/Http\/Client\/Adapter\/Exception.php';\n",102],["T_WHITESPACE","                ",103],["T_THROW","throw",103],["T_WHITESPACE"," ",103],["T_NEW","new",103],["T_WHITESPACE"," ",103],["T_STRING","Zend_Http_Client_Adapter_Exception",103],"(",["T_WHITESPACE","\n                    ",103],["T_CONSTANT_ENCAPSED_STRING","'Error writing request to server'",104],")",";",["T_WHITESPACE","\n            ",104],"}",["T_WHITESPACE","\n            ",105],["T_VARIABLE","$chunk",106],["T_WHITESPACE"," ",106],"=",["T_WHITESPACE"," ",106],["T_VARIABLE","$body",106],["T_OBJECT_OPERATOR","->",106],["T_STRING","read",106],"(",["T_STRING","self",106],["T_DOUBLE_COLON","::",106],["T_STRING","CHUNK_SIZE",106],")",";",["T_WHITESPACE","\n        ",106],"}",["T_WHITESPACE","\n        ",107],["T_VARIABLE","$body",108],["T_OBJECT_OPERATOR","->",108],["T_STRING","closeFileHandle",108],"(",")",";",["T_WHITESPACE","\n        ",108],["T_RETURN","return",109],["T_WHITESPACE"," ",109],["T_CONSTANT_ENCAPSED_STRING","'Large upload, request is not cached.'",109],";",["T_WHITESPACE","\n    ",109],"}",["T_WHITESPACE","\n",110],"}",["T_WHITESPACE","\n",111]]
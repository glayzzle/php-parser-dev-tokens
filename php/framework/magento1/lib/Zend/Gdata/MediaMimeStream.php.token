[["T_OPEN_TAG","<?php\n",1],["T_WHITESPACE","\n",2],["T_DOC_COMMENT","\/**\n * Zend Framework\n *\n * LICENSE\n *\n * This source file is subject to the new BSD license that is bundled\n * with this package in the file LICENSE.txt.\n * It is also available through the world-wide-web at this URL:\n * http:\/\/framework.zend.com\/license\/new-bsd\n * If you did not receive a copy of the license and are unable to\n * obtain it through the world-wide-web, please send an email\n * to license@zend.com so we can send you a copy immediately.\n *\n * @category   Zend\n * @package    Zend_Gdata\n * @subpackage Gdata\n * @copyright  Copyright (c) 2005-2015 Zend Technologies USA Inc. (http:\/\/www.zend.com)\n * @license    http:\/\/framework.zend.com\/license\/new-bsd     New BSD License\n * @version    $Id$\n *\/",3],["T_WHITESPACE","\n\n",22],["T_DOC_COMMENT","\/**\n*  @see Zend_Gdata_MimeFile\n*\/",24],["T_WHITESPACE","\n",26],["T_COMMENT","#require_once 'Zend\/Gdata\/MimeFile.php';\n",27],["T_WHITESPACE","\n",28],["T_DOC_COMMENT","\/**\n* @see Zend_Gdata_MimeBodyString\n*\/",29],["T_WHITESPACE","\n",31],["T_COMMENT","#require_once 'Zend\/Gdata\/MimeBodyString.php';\n",32],["T_WHITESPACE","\n\n",33],["T_DOC_COMMENT","\/**\n * A streaming Media MIME class that allows for buffered read operations.\n *\n * @category   Zend\n * @package    Zend_Gdata\n * @subpackage Gdata\n * @copyright  Copyright (c) 2005-2015 Zend Technologies USA Inc. (http:\/\/www.zend.com)\n * @license    http:\/\/framework.zend.com\/license\/new-bsd     New BSD License\n *\/",35],["T_WHITESPACE","\n",43],["T_CLASS","class",44],["T_WHITESPACE"," ",44],["T_STRING","Zend_Gdata_MediaMimeStream",44],["T_WHITESPACE","\n",44],"{",["T_WHITESPACE","\n\n    ",45],["T_DOC_COMMENT","\/**\n     * A valid MIME boundary.\n     *\n     * @var string\n     *\/",47],["T_WHITESPACE","\n    ",51],["T_PROTECTED","protected",52],["T_WHITESPACE"," ",52],["T_VARIABLE","$_boundaryString",52],["T_WHITESPACE"," ",52],"=",["T_WHITESPACE"," ",52],["T_STRING","null",52],";",["T_WHITESPACE","\n\n    ",52],["T_DOC_COMMENT","\/**\n     * A handle to the file that is part of the message.\n     *\n     * @var resource\n     *\/",54],["T_WHITESPACE","\n    ",58],["T_PROTECTED","protected",59],["T_WHITESPACE"," ",59],["T_VARIABLE","$_fileHandle",59],["T_WHITESPACE"," ",59],"=",["T_WHITESPACE"," ",59],["T_STRING","null",59],";",["T_WHITESPACE","\n\n    ",59],["T_DOC_COMMENT","\/**\n     * The current part being read from.\n     * @var integer\n     *\/",61],["T_WHITESPACE","\n    ",64],["T_PROTECTED","protected",65],["T_WHITESPACE"," ",65],["T_VARIABLE","$_currentPart",65],["T_WHITESPACE"," ",65],"=",["T_WHITESPACE"," ",65],["T_LNUMBER","0",65],";",["T_WHITESPACE","\n\n    ",65],["T_DOC_COMMENT","\/**\n     * The size of the MIME message.\n     * @var integer\n     *\/",67],["T_WHITESPACE","\n    ",70],["T_PROTECTED","protected",71],["T_WHITESPACE"," ",71],["T_VARIABLE","$_totalSize",71],["T_WHITESPACE"," ",71],"=",["T_WHITESPACE"," ",71],["T_LNUMBER","0",71],";",["T_WHITESPACE","\n\n    ",71],["T_DOC_COMMENT","\/**\n     * An array of all the parts to be sent. Array members are either a\n     * MimeFile or a MimeBodyString object.\n     * @var array\n     *\/",73],["T_WHITESPACE","\n    ",77],["T_PROTECTED","protected",78],["T_WHITESPACE"," ",78],["T_VARIABLE","$_parts",78],["T_WHITESPACE"," ",78],"=",["T_WHITESPACE"," ",78],["T_STRING","null",78],";",["T_WHITESPACE","\n\n    ",78],["T_DOC_COMMENT","\/**\n     * Create a new MimeMediaStream object.\n     *\n     * @param string $xmlString The string corresponding to the XML section\n     *               of the message, typically an atom entry or feed.\n     * @param string $filePath The path to the file that constitutes the binary\n     *               part of the message.\n     * @param string $fileContentType The valid internet media type of the file.\n     * @throws Zend_Gdata_App_IOException If the file cannot be read or does\n     *         not exist. Also if mbstring.func_overload has been set > 1.\n     *\/",80],["T_WHITESPACE","\n    ",90],["T_PUBLIC","public",91],["T_WHITESPACE"," ",91],["T_FUNCTION","function",91],["T_WHITESPACE"," ",91],["T_STRING","__construct",91],"(",["T_VARIABLE","$xmlString",91],["T_WHITESPACE"," ",91],"=",["T_WHITESPACE"," ",91],["T_STRING","null",91],",",["T_WHITESPACE"," ",91],["T_VARIABLE","$filePath",91],["T_WHITESPACE"," ",91],"=",["T_WHITESPACE"," ",91],["T_STRING","null",91],",",["T_WHITESPACE","\n        ",91],["T_VARIABLE","$fileContentType",92],["T_WHITESPACE"," ",92],"=",["T_WHITESPACE"," ",92],["T_STRING","null",92],")",["T_WHITESPACE","\n    ",92],"{",["T_WHITESPACE","\n        ",93],["T_IF","if",94],["T_WHITESPACE"," ",94],"(","!",["T_STRING","file_exists",94],"(",["T_VARIABLE","$filePath",94],")",["T_WHITESPACE"," ",94],["T_BOOLEAN_OR","||",94],["T_WHITESPACE"," ",94],"!",["T_STRING","is_readable",94],"(",["T_VARIABLE","$filePath",94],")",")",["T_WHITESPACE"," ",94],"{",["T_WHITESPACE","\n            ",94],["T_COMMENT","#require_once 'Zend\/Gdata\/App\/IOException.php';\n",95],["T_WHITESPACE","            ",96],["T_THROW","throw",96],["T_WHITESPACE"," ",96],["T_NEW","new",96],["T_WHITESPACE"," ",96],["T_STRING","Zend_Gdata_App_IOException",96],"(",["T_CONSTANT_ENCAPSED_STRING","'File to be uploaded at '",96],["T_WHITESPACE"," ",96],".",["T_WHITESPACE","\n                ",96],["T_VARIABLE","$filePath",97],["T_WHITESPACE"," ",97],".",["T_WHITESPACE"," ",97],["T_CONSTANT_ENCAPSED_STRING","' does not exist or is not readable.'",97],")",";",["T_WHITESPACE","\n        ",97],"}",["T_WHITESPACE","\n\n        ",98],["T_VARIABLE","$this",100],["T_OBJECT_OPERATOR","->",100],["T_STRING","_fileHandle",100],["T_WHITESPACE"," ",100],"=",["T_WHITESPACE"," ",100],["T_STRING","fopen",100],"(",["T_VARIABLE","$filePath",100],",",["T_WHITESPACE"," ",100],["T_CONSTANT_ENCAPSED_STRING","'rb'",100],",",["T_WHITESPACE"," ",100],["T_STRING","TRUE",100],")",";",["T_WHITESPACE","\n        ",100],["T_VARIABLE","$this",101],["T_OBJECT_OPERATOR","->",101],["T_STRING","_boundaryString",101],["T_WHITESPACE"," ",101],"=",["T_WHITESPACE"," ",101],["T_CONSTANT_ENCAPSED_STRING","'=_'",101],["T_WHITESPACE"," ",101],".",["T_WHITESPACE"," ",101],["T_STRING","md5",101],"(",["T_STRING","microtime",101],"(",["T_LNUMBER","1",101],")",["T_WHITESPACE"," ",101],".",["T_WHITESPACE"," ",101],["T_STRING","rand",101],"(",["T_LNUMBER","1",101],",",["T_LNUMBER","20",101],")",")",";",["T_WHITESPACE","\n        ",101],["T_VARIABLE","$entry",102],["T_WHITESPACE"," ",102],"=",["T_WHITESPACE"," ",102],["T_VARIABLE","$this",102],["T_OBJECT_OPERATOR","->",102],["T_STRING","wrapEntry",102],"(",["T_VARIABLE","$xmlString",102],",",["T_WHITESPACE"," ",102],["T_VARIABLE","$fileContentType",102],")",";",["T_WHITESPACE","\n        ",102],["T_VARIABLE","$closingBoundary",103],["T_WHITESPACE"," ",103],"=",["T_WHITESPACE"," ",103],["T_NEW","new",103],["T_WHITESPACE"," ",103],["T_STRING","Zend_Gdata_MimeBodyString",103],"(","\"",["T_ENCAPSED_AND_WHITESPACE","\\r\\n--",103],["T_CURLY_OPEN","{",103],["T_VARIABLE","$this",103],["T_OBJECT_OPERATOR","->",103],["T_STRING","_boundaryString",103],"}",["T_ENCAPSED_AND_WHITESPACE","--\\r\\n",103],"\"",")",";",["T_WHITESPACE","\n        ",103],["T_VARIABLE","$file",104],["T_WHITESPACE"," ",104],"=",["T_WHITESPACE"," ",104],["T_NEW","new",104],["T_WHITESPACE"," ",104],["T_STRING","Zend_Gdata_MimeFile",104],"(",["T_VARIABLE","$this",104],["T_OBJECT_OPERATOR","->",104],["T_STRING","_fileHandle",104],")",";",["T_WHITESPACE","\n        ",104],["T_VARIABLE","$this",105],["T_OBJECT_OPERATOR","->",105],["T_STRING","_parts",105],["T_WHITESPACE"," ",105],"=",["T_WHITESPACE"," ",105],["T_ARRAY","array",105],"(",["T_VARIABLE","$entry",105],",",["T_WHITESPACE"," ",105],["T_VARIABLE","$file",105],",",["T_WHITESPACE"," ",105],["T_VARIABLE","$closingBoundary",105],")",";",["T_WHITESPACE","\n\n        ",105],["T_VARIABLE","$fileSize",107],["T_WHITESPACE"," ",107],"=",["T_WHITESPACE"," ",107],["T_STRING","filesize",107],"(",["T_VARIABLE","$filePath",107],")",";",["T_WHITESPACE","\n        ",107],["T_VARIABLE","$this",108],["T_OBJECT_OPERATOR","->",108],["T_STRING","_totalSize",108],["T_WHITESPACE"," ",108],"=",["T_WHITESPACE"," ",108],["T_VARIABLE","$entry",108],["T_OBJECT_OPERATOR","->",108],["T_STRING","getSize",108],"(",")",["T_WHITESPACE"," ",108],"+",["T_WHITESPACE"," ",108],["T_VARIABLE","$fileSize",108],["T_WHITESPACE","\n          ",108],"+",["T_WHITESPACE"," ",109],["T_VARIABLE","$closingBoundary",109],["T_OBJECT_OPERATOR","->",109],["T_STRING","getSize",109],"(",")",";",["T_WHITESPACE","\n\n    ",109],"}",["T_WHITESPACE","\n\n    ",111],["T_DOC_COMMENT","\/**\n     * Sandwiches the entry body into a MIME message\n     *\n     * @return void\n     *\/",113],["T_WHITESPACE","\n    ",117],["T_PRIVATE","private",118],["T_WHITESPACE"," ",118],["T_FUNCTION","function",118],["T_WHITESPACE"," ",118],["T_STRING","wrapEntry",118],"(",["T_VARIABLE","$entry",118],",",["T_WHITESPACE"," ",118],["T_VARIABLE","$fileMimeType",118],")",["T_WHITESPACE","\n    ",118],"{",["T_WHITESPACE","\n        ",119],["T_VARIABLE","$wrappedEntry",120],["T_WHITESPACE"," ",120],"=",["T_WHITESPACE"," ",120],"\"",["T_ENCAPSED_AND_WHITESPACE","--",120],["T_CURLY_OPEN","{",120],["T_VARIABLE","$this",120],["T_OBJECT_OPERATOR","->",120],["T_STRING","_boundaryString",120],"}",["T_ENCAPSED_AND_WHITESPACE","\\r\\n",120],"\"",";",["T_WHITESPACE","\n        ",120],["T_VARIABLE","$wrappedEntry",121],["T_WHITESPACE"," ",121],["T_CONCAT_EQUAL",".=",121],["T_WHITESPACE"," ",121],["T_CONSTANT_ENCAPSED_STRING","\"Content-Type: application\/atom+xml\\r\\n\\r\\n\"",121],";",["T_WHITESPACE","\n        ",121],["T_VARIABLE","$wrappedEntry",122],["T_WHITESPACE"," ",122],["T_CONCAT_EQUAL",".=",122],["T_WHITESPACE"," ",122],["T_VARIABLE","$entry",122],";",["T_WHITESPACE","\n        ",122],["T_VARIABLE","$wrappedEntry",123],["T_WHITESPACE"," ",123],["T_CONCAT_EQUAL",".=",123],["T_WHITESPACE"," ",123],"\"",["T_ENCAPSED_AND_WHITESPACE","\\r\\n--",123],["T_CURLY_OPEN","{",123],["T_VARIABLE","$this",123],["T_OBJECT_OPERATOR","->",123],["T_STRING","_boundaryString",123],"}",["T_ENCAPSED_AND_WHITESPACE","\\r\\n",123],"\"",";",["T_WHITESPACE","\n        ",123],["T_VARIABLE","$wrappedEntry",124],["T_WHITESPACE"," ",124],["T_CONCAT_EQUAL",".=",124],["T_WHITESPACE"," ",124],"\"",["T_ENCAPSED_AND_WHITESPACE","Content-Type: ",124],["T_VARIABLE","$fileMimeType",124],["T_ENCAPSED_AND_WHITESPACE","\\r\\n\\r\\n",124],"\"",";",["T_WHITESPACE","\n        ",124],["T_RETURN","return",125],["T_WHITESPACE"," ",125],["T_NEW","new",125],["T_WHITESPACE"," ",125],["T_STRING","Zend_Gdata_MimeBodyString",125],"(",["T_VARIABLE","$wrappedEntry",125],")",";",["T_WHITESPACE","\n    ",125],"}",["T_WHITESPACE","\n\n    ",126],["T_DOC_COMMENT","\/**\n     * Read a specific chunk of the the MIME multipart message.\n     *\n     * @param integer $bufferSize The size of the chunk that is to be read,\n     *                            must be lower than MAX_BUFFER_SIZE.\n     * @return string A corresponding piece of the message. This could be\n     *                binary or regular text.\n     *\/",128],["T_WHITESPACE","\n    ",135],["T_PUBLIC","public",136],["T_WHITESPACE"," ",136],["T_FUNCTION","function",136],["T_WHITESPACE"," ",136],["T_STRING","read",136],"(",["T_VARIABLE","$bytesRequested",136],")",["T_WHITESPACE","\n    ",136],"{",["T_WHITESPACE","\n        ",137],["T_IF","if",138],"(",["T_VARIABLE","$this",138],["T_OBJECT_OPERATOR","->",138],["T_STRING","_currentPart",138],["T_WHITESPACE"," ",138],["T_IS_GREATER_OR_EQUAL",">=",138],["T_WHITESPACE"," ",138],["T_STRING","count",138],"(",["T_VARIABLE","$this",138],["T_OBJECT_OPERATOR","->",138],["T_STRING","_parts",138],")",")",["T_WHITESPACE"," ",138],"{",["T_WHITESPACE","\n          ",138],["T_RETURN","return",139],["T_WHITESPACE"," ",139],["T_STRING","FALSE",139],";",["T_WHITESPACE","\n        ",139],"}",["T_WHITESPACE","\n\n        ",140],["T_VARIABLE","$activePart",142],["T_WHITESPACE"," ",142],"=",["T_WHITESPACE"," ",142],["T_VARIABLE","$this",142],["T_OBJECT_OPERATOR","->",142],["T_STRING","_parts",142],"[",["T_VARIABLE","$this",142],["T_OBJECT_OPERATOR","->",142],["T_STRING","_currentPart",142],"]",";",["T_WHITESPACE","\n        ",142],["T_VARIABLE","$buffer",143],["T_WHITESPACE"," ",143],"=",["T_WHITESPACE"," ",143],["T_VARIABLE","$activePart",143],["T_OBJECT_OPERATOR","->",143],["T_STRING","read",143],"(",["T_VARIABLE","$bytesRequested",143],")",";",["T_WHITESPACE","\n\n        ",143],["T_WHILE","while",145],"(",["T_STRING","strlen",145],"(",["T_VARIABLE","$buffer",145],")",["T_WHITESPACE"," ",145],"<",["T_WHITESPACE"," ",145],["T_VARIABLE","$bytesRequested",145],")",["T_WHITESPACE"," ",145],"{",["T_WHITESPACE","\n          ",145],["T_VARIABLE","$this",146],["T_OBJECT_OPERATOR","->",146],["T_STRING","_currentPart",146],["T_WHITESPACE"," ",146],["T_PLUS_EQUAL","+=",146],["T_WHITESPACE"," ",146],["T_LNUMBER","1",146],";",["T_WHITESPACE","\n          ",146],["T_VARIABLE","$nextBuffer",147],["T_WHITESPACE"," ",147],"=",["T_WHITESPACE"," ",147],["T_VARIABLE","$this",147],["T_OBJECT_OPERATOR","->",147],["T_STRING","read",147],"(",["T_VARIABLE","$bytesRequested",147],["T_WHITESPACE"," ",147],"-",["T_WHITESPACE"," ",147],["T_STRING","strlen",147],"(",["T_VARIABLE","$buffer",147],")",")",";",["T_WHITESPACE","\n          ",147],["T_IF","if",148],"(",["T_VARIABLE","$nextBuffer",148],["T_WHITESPACE"," ",148],["T_IS_IDENTICAL","===",148],["T_WHITESPACE"," ",148],["T_STRING","FALSE",148],")",["T_WHITESPACE"," ",148],"{",["T_WHITESPACE","\n            ",148],["T_BREAK","break",149],";",["T_WHITESPACE","\n          ",149],"}",["T_WHITESPACE","\n          ",150],["T_VARIABLE","$buffer",151],["T_WHITESPACE"," ",151],["T_CONCAT_EQUAL",".=",151],["T_WHITESPACE"," ",151],["T_VARIABLE","$nextBuffer",151],";",["T_WHITESPACE","\n        ",151],"}",["T_WHITESPACE","\n\n        ",152],["T_RETURN","return",154],["T_WHITESPACE"," ",154],["T_VARIABLE","$buffer",154],";",["T_WHITESPACE","\n    ",154],"}",["T_WHITESPACE","\n\n    ",155],["T_DOC_COMMENT","\/**\n     * Return the total size of the mime message.\n     *\n     * @return integer Total size of the message to be sent.\n     *\/",157],["T_WHITESPACE","\n    ",161],["T_PUBLIC","public",162],["T_WHITESPACE"," ",162],["T_FUNCTION","function",162],["T_WHITESPACE"," ",162],["T_STRING","getTotalSize",162],"(",")",["T_WHITESPACE","\n    ",162],"{",["T_WHITESPACE","\n        ",163],["T_RETURN","return",164],["T_WHITESPACE"," ",164],["T_VARIABLE","$this",164],["T_OBJECT_OPERATOR","->",164],["T_STRING","_totalSize",164],";",["T_WHITESPACE","\n    ",164],"}",["T_WHITESPACE","\n\n    ",165],["T_DOC_COMMENT","\/**\n     * Close the internal file that we are streaming to the socket.\n     *\n     * @return void\n     *\/",167],["T_WHITESPACE","\n    ",171],["T_PUBLIC","public",172],["T_WHITESPACE"," ",172],["T_FUNCTION","function",172],["T_WHITESPACE"," ",172],["T_STRING","closeFileHandle",172],"(",")",["T_WHITESPACE","\n    ",172],"{",["T_WHITESPACE","\n        ",173],["T_IF","if",174],["T_WHITESPACE"," ",174],"(",["T_VARIABLE","$this",174],["T_OBJECT_OPERATOR","->",174],["T_STRING","_fileHandle",174],["T_WHITESPACE"," ",174],["T_IS_NOT_IDENTICAL","!==",174],["T_WHITESPACE"," ",174],["T_STRING","null",174],")",["T_WHITESPACE"," ",174],"{",["T_WHITESPACE","\n            ",174],["T_STRING","fclose",175],"(",["T_VARIABLE","$this",175],["T_OBJECT_OPERATOR","->",175],["T_STRING","_fileHandle",175],")",";",["T_WHITESPACE","\n        ",175],"}",["T_WHITESPACE","\n    ",176],"}",["T_WHITESPACE","\n\n    ",177],["T_DOC_COMMENT","\/**\n     * Return a Content-type header that includes the current boundary string.\n     *\n     * @return string A valid HTTP Content-Type header.\n     *\/",179],["T_WHITESPACE","\n    ",183],["T_PUBLIC","public",184],["T_WHITESPACE"," ",184],["T_FUNCTION","function",184],["T_WHITESPACE"," ",184],["T_STRING","getContentType",184],"(",")",["T_WHITESPACE","\n    ",184],"{",["T_WHITESPACE","\n        ",185],["T_RETURN","return",186],["T_WHITESPACE"," ",186],["T_CONSTANT_ENCAPSED_STRING","'multipart\/related;boundary=\"'",186],["T_WHITESPACE"," ",186],".",["T_WHITESPACE","\n            ",186],["T_VARIABLE","$this",187],["T_OBJECT_OPERATOR","->",187],["T_STRING","_boundaryString",187],["T_WHITESPACE"," ",187],".",["T_WHITESPACE"," ",187],["T_CONSTANT_ENCAPSED_STRING","'\"'",187],["T_WHITESPACE"," ",187],".",["T_WHITESPACE"," ",187],["T_CONSTANT_ENCAPSED_STRING","\"\\r\\n\"",187],";",["T_WHITESPACE","\n    ",187],"}",["T_WHITESPACE","\n\n",188],"}",["T_WHITESPACE","\n",190]]
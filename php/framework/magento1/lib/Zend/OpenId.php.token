[["T_OPEN_TAG","<?php\n",1],["T_WHITESPACE","\n",2],["T_DOC_COMMENT","\/**\n * Zend Framework\n *\n * LICENSE\n *\n * This source file is subject to the new BSD license that is bundled\n * with this package in the file LICENSE.txt.\n * It is also available through the world-wide-web at this URL:\n * http:\/\/framework.zend.com\/license\/new-bsd\n * If you did not receive a copy of the license and are unable to\n * obtain it through the world-wide-web, please send an email\n * to license@zend.com so we can send you a copy immediately.\n *\n * @category   Zend\n * @package    Zend_OpenId\n * @copyright  Copyright (c) 2005-2015 Zend Technologies USA Inc. (http:\/\/www.zend.com)\n * @license    http:\/\/framework.zend.com\/license\/new-bsd     New BSD License\n * @version    $Id$\n *\/",3],["T_WHITESPACE","\n\n",21],["T_DOC_COMMENT","\/**\n * @see Zend_Controller_Response_Abstract\n *\/",23],["T_WHITESPACE","\n",25],["T_COMMENT","#require_once \"Zend\/Controller\/Response\/Abstract.php\";\n",26],["T_WHITESPACE","\n",27],["T_DOC_COMMENT","\/**\n * Static class that contains common utility functions for\n * {@link Zend_OpenId_Consumer} and {@link Zend_OpenId_Provider}.\n *\n * This class implements common utility functions that are used by both\n * Consumer and Provider. They include functions for Diffie-Hellman keys\n * generation and exchange, URL normalization, HTTP redirection and some others.\n *\n * @category   Zend\n * @package    Zend_OpenId\n * @copyright  Copyright (c) 2005-2015 Zend Technologies USA Inc. (http:\/\/www.zend.com)\n * @license    http:\/\/framework.zend.com\/license\/new-bsd     New BSD License\n *\/",28],["T_WHITESPACE","\n",40],["T_CLASS","class",41],["T_WHITESPACE"," ",41],["T_STRING","Zend_OpenId",41],["T_WHITESPACE","\n",41],"{",["T_WHITESPACE","\n    ",42],["T_DOC_COMMENT","\/**\n     * Default Diffie-Hellman key generator (1024 bit)\n     *\/",43],["T_WHITESPACE","\n    ",45],["T_CONST","const",46],["T_WHITESPACE"," ",46],["T_STRING","DH_P",46],["T_WHITESPACE","   ",46],"=",["T_WHITESPACE"," ",46],["T_CONSTANT_ENCAPSED_STRING","'dcf93a0b883972ec0e19989ac5a2ce310e1d37717e8d9571bb7623731866e61ef75a2e27898b057f9891c2e27a639c3f29b60814581cd3b2ca3986d2683705577d45c2e7e52dc81c7a171876e5cea74b1448bfdfaf18828efd2519f14e45e3826634af1949e5b535cc829a483b8a76223e5d490a257f05bdff16f2fb22c583ab'",46],";",["T_WHITESPACE","\n\n    ",46],["T_DOC_COMMENT","\/**\n     * Default Diffie-Hellman prime number (should be 2 or 5)\n     *\/",48],["T_WHITESPACE","\n    ",50],["T_CONST","const",51],["T_WHITESPACE"," ",51],["T_STRING","DH_G",51],["T_WHITESPACE","   ",51],"=",["T_WHITESPACE"," ",51],["T_CONSTANT_ENCAPSED_STRING","'02'",51],";",["T_WHITESPACE","\n\n    ",51],["T_DOC_COMMENT","\/**\n     * OpenID 2.0 namespace. All OpenID 2.0 messages MUST contain variable\n     * openid.ns with its value.\n     *\/",53],["T_WHITESPACE","\n    ",56],["T_CONST","const",57],["T_WHITESPACE"," ",57],["T_STRING","NS_2_0",57],["T_WHITESPACE"," ",57],"=",["T_WHITESPACE"," ",57],["T_CONSTANT_ENCAPSED_STRING","'http:\/\/specs.openid.net\/auth\/2.0'",57],";",["T_WHITESPACE","\n\n    ",57],["T_DOC_COMMENT","\/**\n     * Allows enable\/disable stoping execution of PHP script after redirect()\n     *\/",59],["T_WHITESPACE","\n    ",61],["T_STATIC","static",62],["T_WHITESPACE"," ",62],["T_PUBLIC","public",62],["T_WHITESPACE"," ",62],["T_VARIABLE","$exitOnRedirect",62],["T_WHITESPACE"," ",62],"=",["T_WHITESPACE"," ",62],["T_STRING","true",62],";",["T_WHITESPACE","\n\n    ",62],["T_DOC_COMMENT","\/**\n     * Alternative request URL that can be used to override the default\n     * selfUrl() response\n     *\/",64],["T_WHITESPACE","\n    ",67],["T_STATIC","static",68],["T_WHITESPACE"," ",68],["T_PUBLIC","public",68],["T_WHITESPACE"," ",68],["T_VARIABLE","$selfUrl",68],["T_WHITESPACE"," ",68],"=",["T_WHITESPACE"," ",68],["T_STRING","null",68],";",["T_WHITESPACE","\n\n    ",68],["T_DOC_COMMENT","\/**\n     * Sets alternative request URL that can be used to override the default\n     * selfUrl() response\n     *\n     * @param string $selfUrl the URL to be set\n     * @return string the old value of overriding URL\n     *\/",70],["T_WHITESPACE","\n    ",76],["T_STATIC","static",77],["T_WHITESPACE"," ",77],["T_PUBLIC","public",77],["T_WHITESPACE"," ",77],["T_FUNCTION","function",77],["T_WHITESPACE"," ",77],["T_STRING","setSelfUrl",77],"(",["T_VARIABLE","$selfUrl",77],["T_WHITESPACE"," ",77],"=",["T_WHITESPACE"," ",77],["T_STRING","null",77],")",["T_WHITESPACE","\n    ",77],"{",["T_WHITESPACE","\n        ",78],["T_VARIABLE","$ret",79],["T_WHITESPACE"," ",79],"=",["T_WHITESPACE"," ",79],["T_STRING","self",79],["T_DOUBLE_COLON","::",79],["T_VARIABLE","$selfUrl",79],";",["T_WHITESPACE","\n        ",79],["T_STRING","self",80],["T_DOUBLE_COLON","::",80],["T_VARIABLE","$selfUrl",80],["T_WHITESPACE"," ",80],"=",["T_WHITESPACE"," ",80],["T_VARIABLE","$selfUrl",80],";",["T_WHITESPACE","\n        ",80],["T_RETURN","return",81],["T_WHITESPACE"," ",81],["T_VARIABLE","$ret",81],";",["T_WHITESPACE","\n    ",81],"}",["T_WHITESPACE","\n\n    ",82],["T_DOC_COMMENT","\/**\n     * Returns a full URL that was requested on current HTTP request.\n     *\n     * @return string\n     *\/",84],["T_WHITESPACE","\n    ",88],["T_STATIC","static",89],["T_WHITESPACE"," ",89],["T_PUBLIC","public",89],["T_WHITESPACE"," ",89],["T_FUNCTION","function",89],["T_WHITESPACE"," ",89],["T_STRING","selfUrl",89],"(",")",["T_WHITESPACE","\n    ",89],"{",["T_WHITESPACE","\n        ",90],["T_IF","if",91],["T_WHITESPACE"," ",91],"(",["T_STRING","self",91],["T_DOUBLE_COLON","::",91],["T_VARIABLE","$selfUrl",91],["T_WHITESPACE"," ",91],["T_IS_NOT_IDENTICAL","!==",91],["T_WHITESPACE"," ",91],["T_STRING","null",91],")",["T_WHITESPACE"," ",91],"{",["T_WHITESPACE","\n            ",91],["T_RETURN","return",92],["T_WHITESPACE"," ",92],["T_STRING","self",92],["T_DOUBLE_COLON","::",92],["T_VARIABLE","$selfUrl",92],";",["T_WHITESPACE","\n        ",92],"}",["T_WHITESPACE"," ",93],["T_IF","if",93],["T_WHITESPACE"," ",93],"(",["T_ISSET","isset",93],"(",["T_VARIABLE","$_SERVER",93],"[",["T_CONSTANT_ENCAPSED_STRING","'SCRIPT_URI'",93],"]",")",")",["T_WHITESPACE"," ",93],"{",["T_WHITESPACE","\n            ",93],["T_RETURN","return",94],["T_WHITESPACE"," ",94],["T_VARIABLE","$_SERVER",94],"[",["T_CONSTANT_ENCAPSED_STRING","'SCRIPT_URI'",94],"]",";",["T_WHITESPACE","\n        ",94],"}",["T_WHITESPACE","\n        ",95],["T_VARIABLE","$url",96],["T_WHITESPACE"," ",96],"=",["T_WHITESPACE"," ",96],["T_CONSTANT_ENCAPSED_STRING","''",96],";",["T_WHITESPACE","\n        ",96],["T_VARIABLE","$port",97],["T_WHITESPACE"," ",97],"=",["T_WHITESPACE"," ",97],["T_CONSTANT_ENCAPSED_STRING","''",97],";",["T_WHITESPACE","\n        ",97],["T_IF","if",98],["T_WHITESPACE"," ",98],"(",["T_ISSET","isset",98],"(",["T_VARIABLE","$_SERVER",98],"[",["T_CONSTANT_ENCAPSED_STRING","'HTTP_HOST'",98],"]",")",")",["T_WHITESPACE"," ",98],"{",["T_WHITESPACE","\n            ",98],["T_IF","if",99],["T_WHITESPACE"," ",99],"(","(",["T_VARIABLE","$pos",99],["T_WHITESPACE"," ",99],"=",["T_WHITESPACE"," ",99],["T_STRING","strpos",99],"(",["T_VARIABLE","$_SERVER",99],"[",["T_CONSTANT_ENCAPSED_STRING","'HTTP_HOST'",99],"]",",",["T_WHITESPACE"," ",99],["T_CONSTANT_ENCAPSED_STRING","':'",99],")",")",["T_WHITESPACE"," ",99],["T_IS_IDENTICAL","===",99],["T_WHITESPACE"," ",99],["T_STRING","false",99],")",["T_WHITESPACE"," ",99],"{",["T_WHITESPACE","\n                ",99],["T_IF","if",100],["T_WHITESPACE"," ",100],"(",["T_ISSET","isset",100],"(",["T_VARIABLE","$_SERVER",100],"[",["T_CONSTANT_ENCAPSED_STRING","'SERVER_PORT'",100],"]",")",")",["T_WHITESPACE"," ",100],"{",["T_WHITESPACE","\n                    ",100],["T_VARIABLE","$port",101],["T_WHITESPACE"," ",101],"=",["T_WHITESPACE"," ",101],["T_CONSTANT_ENCAPSED_STRING","':'",101],["T_WHITESPACE"," ",101],".",["T_WHITESPACE"," ",101],["T_VARIABLE","$_SERVER",101],"[",["T_CONSTANT_ENCAPSED_STRING","'SERVER_PORT'",101],"]",";",["T_WHITESPACE","\n                ",101],"}",["T_WHITESPACE","\n                ",102],["T_VARIABLE","$url",103],["T_WHITESPACE"," ",103],"=",["T_WHITESPACE"," ",103],["T_VARIABLE","$_SERVER",103],"[",["T_CONSTANT_ENCAPSED_STRING","'HTTP_HOST'",103],"]",";",["T_WHITESPACE","\n            ",103],"}",["T_WHITESPACE"," ",104],["T_ELSE","else",104],["T_WHITESPACE"," ",104],"{",["T_WHITESPACE","\n                ",104],["T_VARIABLE","$url",105],["T_WHITESPACE"," ",105],"=",["T_WHITESPACE"," ",105],["T_STRING","substr",105],"(",["T_VARIABLE","$_SERVER",105],"[",["T_CONSTANT_ENCAPSED_STRING","'HTTP_HOST'",105],"]",",",["T_WHITESPACE"," ",105],["T_LNUMBER","0",105],",",["T_WHITESPACE"," ",105],["T_VARIABLE","$pos",105],")",";",["T_WHITESPACE","\n                ",105],["T_VARIABLE","$port",106],["T_WHITESPACE"," ",106],"=",["T_WHITESPACE"," ",106],["T_STRING","substr",106],"(",["T_VARIABLE","$_SERVER",106],"[",["T_CONSTANT_ENCAPSED_STRING","'HTTP_HOST'",106],"]",",",["T_WHITESPACE"," ",106],["T_VARIABLE","$pos",106],")",";",["T_WHITESPACE","\n            ",106],"}",["T_WHITESPACE","\n        ",107],"}",["T_WHITESPACE"," ",108],["T_ELSE","else",108],["T_WHITESPACE"," ",108],["T_IF","if",108],["T_WHITESPACE"," ",108],"(",["T_ISSET","isset",108],"(",["T_VARIABLE","$_SERVER",108],"[",["T_CONSTANT_ENCAPSED_STRING","'SERVER_NAME'",108],"]",")",")",["T_WHITESPACE"," ",108],"{",["T_WHITESPACE","\n            ",108],["T_VARIABLE","$url",109],["T_WHITESPACE"," ",109],"=",["T_WHITESPACE"," ",109],["T_VARIABLE","$_SERVER",109],"[",["T_CONSTANT_ENCAPSED_STRING","'SERVER_NAME'",109],"]",";",["T_WHITESPACE","\n            ",109],["T_IF","if",110],["T_WHITESPACE"," ",110],"(",["T_ISSET","isset",110],"(",["T_VARIABLE","$_SERVER",110],"[",["T_CONSTANT_ENCAPSED_STRING","'SERVER_PORT'",110],"]",")",")",["T_WHITESPACE"," ",110],"{",["T_WHITESPACE","\n                ",110],["T_VARIABLE","$port",111],["T_WHITESPACE"," ",111],"=",["T_WHITESPACE"," ",111],["T_CONSTANT_ENCAPSED_STRING","':'",111],["T_WHITESPACE"," ",111],".",["T_WHITESPACE"," ",111],["T_VARIABLE","$_SERVER",111],"[",["T_CONSTANT_ENCAPSED_STRING","'SERVER_PORT'",111],"]",";",["T_WHITESPACE","\n            ",111],"}",["T_WHITESPACE","\n        ",112],"}",["T_WHITESPACE","\n        ",113],["T_IF","if",114],["T_WHITESPACE"," ",114],"(",["T_ISSET","isset",114],"(",["T_VARIABLE","$_SERVER",114],"[",["T_CONSTANT_ENCAPSED_STRING","'HTTPS'",114],"]",")",["T_WHITESPACE"," ",114],["T_BOOLEAN_AND","&&",114],["T_WHITESPACE"," ",114],["T_VARIABLE","$_SERVER",114],"[",["T_CONSTANT_ENCAPSED_STRING","'HTTPS'",114],"]",["T_WHITESPACE"," ",114],["T_IS_EQUAL","==",114],["T_WHITESPACE"," ",114],["T_CONSTANT_ENCAPSED_STRING","'on'",114],")",["T_WHITESPACE"," ",114],"{",["T_WHITESPACE","\n            ",114],["T_VARIABLE","$url",115],["T_WHITESPACE"," ",115],"=",["T_WHITESPACE"," ",115],["T_CONSTANT_ENCAPSED_STRING","'https:\/\/'",115],["T_WHITESPACE"," ",115],".",["T_WHITESPACE"," ",115],["T_VARIABLE","$url",115],";",["T_WHITESPACE","\n            ",115],["T_IF","if",116],["T_WHITESPACE"," ",116],"(",["T_VARIABLE","$port",116],["T_WHITESPACE"," ",116],["T_IS_EQUAL","==",116],["T_WHITESPACE"," ",116],["T_CONSTANT_ENCAPSED_STRING","':443'",116],")",["T_WHITESPACE"," ",116],"{",["T_WHITESPACE","\n                ",116],["T_VARIABLE","$port",117],["T_WHITESPACE"," ",117],"=",["T_WHITESPACE"," ",117],["T_CONSTANT_ENCAPSED_STRING","''",117],";",["T_WHITESPACE","\n            ",117],"}",["T_WHITESPACE","\n        ",118],"}",["T_WHITESPACE"," ",119],["T_ELSE","else",119],["T_WHITESPACE"," ",119],"{",["T_WHITESPACE","\n            ",119],["T_VARIABLE","$url",120],["T_WHITESPACE"," ",120],"=",["T_WHITESPACE"," ",120],["T_CONSTANT_ENCAPSED_STRING","'http:\/\/'",120],["T_WHITESPACE"," ",120],".",["T_WHITESPACE"," ",120],["T_VARIABLE","$url",120],";",["T_WHITESPACE","\n            ",120],["T_IF","if",121],["T_WHITESPACE"," ",121],"(",["T_VARIABLE","$port",121],["T_WHITESPACE"," ",121],["T_IS_EQUAL","==",121],["T_WHITESPACE"," ",121],["T_CONSTANT_ENCAPSED_STRING","':80'",121],")",["T_WHITESPACE"," ",121],"{",["T_WHITESPACE","\n                ",121],["T_VARIABLE","$port",122],["T_WHITESPACE"," ",122],"=",["T_WHITESPACE"," ",122],["T_CONSTANT_ENCAPSED_STRING","''",122],";",["T_WHITESPACE","\n            ",122],"}",["T_WHITESPACE","\n        ",123],"}",["T_WHITESPACE","\n\n        ",124],["T_VARIABLE","$url",126],["T_WHITESPACE"," ",126],["T_CONCAT_EQUAL",".=",126],["T_WHITESPACE"," ",126],["T_VARIABLE","$port",126],";",["T_WHITESPACE","\n        ",126],["T_IF","if",127],["T_WHITESPACE"," ",127],"(",["T_ISSET","isset",127],"(",["T_VARIABLE","$_SERVER",127],"[",["T_CONSTANT_ENCAPSED_STRING","'HTTP_X_ORIGINAL_URL'",127],"]",")",")",["T_WHITESPACE"," ",127],"{",["T_WHITESPACE"," \n            ",127],["T_COMMENT","\/\/ IIS with Microsoft Rewrite Module\n",128],["T_WHITESPACE","            ",129],["T_VARIABLE","$url",129],["T_WHITESPACE"," ",129],["T_CONCAT_EQUAL",".=",129],["T_WHITESPACE"," ",129],["T_VARIABLE","$_SERVER",129],"[",["T_CONSTANT_ENCAPSED_STRING","'HTTP_X_ORIGINAL_URL'",129],"]",";",["T_WHITESPACE","\n        ",129],"}",["T_WHITESPACE"," ",130],["T_ELSEIF","elseif",130],["T_WHITESPACE"," ",130],"(",["T_ISSET","isset",130],"(",["T_VARIABLE","$_SERVER",130],"[",["T_CONSTANT_ENCAPSED_STRING","'HTTP_X_REWRITE_URL'",130],"]",")",")",["T_WHITESPACE"," ",130],"{",["T_WHITESPACE","\n            ",130],["T_COMMENT","\/\/ IIS with ISAPI_Rewrite \n",131],["T_WHITESPACE","            ",132],["T_VARIABLE","$url",132],["T_WHITESPACE"," ",132],["T_CONCAT_EQUAL",".=",132],["T_WHITESPACE"," ",132],["T_VARIABLE","$_SERVER",132],"[",["T_CONSTANT_ENCAPSED_STRING","'HTTP_X_REWRITE_URL'",132],"]",";",["T_WHITESPACE","\n        ",132],"}",["T_WHITESPACE"," ",133],["T_ELSEIF","elseif",133],["T_WHITESPACE"," ",133],"(",["T_ISSET","isset",133],"(",["T_VARIABLE","$_SERVER",133],"[",["T_CONSTANT_ENCAPSED_STRING","'REQUEST_URI'",133],"]",")",")",["T_WHITESPACE"," ",133],"{",["T_WHITESPACE","\n            ",133],["T_VARIABLE","$query",134],["T_WHITESPACE"," ",134],"=",["T_WHITESPACE"," ",134],["T_STRING","strpos",134],"(",["T_VARIABLE","$_SERVER",134],"[",["T_CONSTANT_ENCAPSED_STRING","'REQUEST_URI'",134],"]",",",["T_WHITESPACE"," ",134],["T_CONSTANT_ENCAPSED_STRING","'?'",134],")",";",["T_WHITESPACE","\n            ",134],["T_IF","if",135],["T_WHITESPACE"," ",135],"(",["T_VARIABLE","$query",135],["T_WHITESPACE"," ",135],["T_IS_IDENTICAL","===",135],["T_WHITESPACE"," ",135],["T_STRING","false",135],")",["T_WHITESPACE"," ",135],"{",["T_WHITESPACE","\n                ",135],["T_VARIABLE","$url",136],["T_WHITESPACE"," ",136],["T_CONCAT_EQUAL",".=",136],["T_WHITESPACE"," ",136],["T_VARIABLE","$_SERVER",136],"[",["T_CONSTANT_ENCAPSED_STRING","'REQUEST_URI'",136],"]",";",["T_WHITESPACE","\n            ",136],"}",["T_WHITESPACE"," ",137],["T_ELSE","else",137],["T_WHITESPACE"," ",137],"{",["T_WHITESPACE","\n                ",137],["T_VARIABLE","$url",138],["T_WHITESPACE"," ",138],["T_CONCAT_EQUAL",".=",138],["T_WHITESPACE"," ",138],["T_STRING","substr",138],"(",["T_VARIABLE","$_SERVER",138],"[",["T_CONSTANT_ENCAPSED_STRING","'REQUEST_URI'",138],"]",",",["T_WHITESPACE"," ",138],["T_LNUMBER","0",138],",",["T_WHITESPACE"," ",138],["T_VARIABLE","$query",138],")",";",["T_WHITESPACE","\n            ",138],"}",["T_WHITESPACE","\n        ",139],"}",["T_WHITESPACE"," ",140],["T_ELSE","else",140],["T_WHITESPACE"," ",140],["T_IF","if",140],["T_WHITESPACE"," ",140],"(",["T_ISSET","isset",140],"(",["T_VARIABLE","$_SERVER",140],"[",["T_CONSTANT_ENCAPSED_STRING","'SCRIPT_URL'",140],"]",")",")",["T_WHITESPACE"," ",140],"{",["T_WHITESPACE","\n            ",140],["T_VARIABLE","$url",141],["T_WHITESPACE"," ",141],["T_CONCAT_EQUAL",".=",141],["T_WHITESPACE"," ",141],["T_VARIABLE","$_SERVER",141],"[",["T_CONSTANT_ENCAPSED_STRING","'SCRIPT_URL'",141],"]",";",["T_WHITESPACE","\n        ",141],"}",["T_WHITESPACE"," ",142],["T_ELSE","else",142],["T_WHITESPACE"," ",142],["T_IF","if",142],["T_WHITESPACE"," ",142],"(",["T_ISSET","isset",142],"(",["T_VARIABLE","$_SERVER",142],"[",["T_CONSTANT_ENCAPSED_STRING","'REDIRECT_URL'",142],"]",")",")",["T_WHITESPACE"," ",142],"{",["T_WHITESPACE","\n            ",142],["T_VARIABLE","$url",143],["T_WHITESPACE"," ",143],["T_CONCAT_EQUAL",".=",143],["T_WHITESPACE"," ",143],["T_VARIABLE","$_SERVER",143],"[",["T_CONSTANT_ENCAPSED_STRING","'REDIRECT_URL'",143],"]",";",["T_WHITESPACE","\n        ",143],"}",["T_WHITESPACE"," ",144],["T_ELSE","else",144],["T_WHITESPACE"," ",144],["T_IF","if",144],["T_WHITESPACE"," ",144],"(",["T_ISSET","isset",144],"(",["T_VARIABLE","$_SERVER",144],"[",["T_CONSTANT_ENCAPSED_STRING","'PHP_SELF'",144],"]",")",")",["T_WHITESPACE"," ",144],"{",["T_WHITESPACE","\n            ",144],["T_VARIABLE","$url",145],["T_WHITESPACE"," ",145],["T_CONCAT_EQUAL",".=",145],["T_WHITESPACE"," ",145],["T_VARIABLE","$_SERVER",145],"[",["T_CONSTANT_ENCAPSED_STRING","'PHP_SELF'",145],"]",";",["T_WHITESPACE","\n        ",145],"}",["T_WHITESPACE"," ",146],["T_ELSE","else",146],["T_WHITESPACE"," ",146],["T_IF","if",146],["T_WHITESPACE"," ",146],"(",["T_ISSET","isset",146],"(",["T_VARIABLE","$_SERVER",146],"[",["T_CONSTANT_ENCAPSED_STRING","'SCRIPT_NAME'",146],"]",")",")",["T_WHITESPACE"," ",146],"{",["T_WHITESPACE","\n            ",146],["T_VARIABLE","$url",147],["T_WHITESPACE"," ",147],["T_CONCAT_EQUAL",".=",147],["T_WHITESPACE"," ",147],["T_VARIABLE","$_SERVER",147],"[",["T_CONSTANT_ENCAPSED_STRING","'SCRIPT_NAME'",147],"]",";",["T_WHITESPACE","\n            ",147],["T_IF","if",148],["T_WHITESPACE"," ",148],"(",["T_ISSET","isset",148],"(",["T_VARIABLE","$_SERVER",148],"[",["T_CONSTANT_ENCAPSED_STRING","'PATH_INFO'",148],"]",")",")",["T_WHITESPACE"," ",148],"{",["T_WHITESPACE","\n                ",148],["T_VARIABLE","$url",149],["T_WHITESPACE"," ",149],["T_CONCAT_EQUAL",".=",149],["T_WHITESPACE"," ",149],["T_VARIABLE","$_SERVER",149],"[",["T_CONSTANT_ENCAPSED_STRING","'PATH_INFO'",149],"]",";",["T_WHITESPACE","\n            ",149],"}",["T_WHITESPACE","\n        ",150],"}",["T_WHITESPACE","\n        ",151],["T_RETURN","return",152],["T_WHITESPACE"," ",152],["T_VARIABLE","$url",152],";",["T_WHITESPACE","\n    ",152],"}",["T_WHITESPACE","\n\n    ",153],["T_DOC_COMMENT","\/**\n     * Returns an absolute URL for the given one\n     *\n     * @param string $url absilute or relative URL\n     * @return string\n     *\/",155],["T_WHITESPACE","\n    ",160],["T_STATIC","static",161],["T_WHITESPACE"," ",161],["T_PUBLIC","public",161],["T_WHITESPACE"," ",161],["T_FUNCTION","function",161],["T_WHITESPACE"," ",161],["T_STRING","absoluteUrl",161],"(",["T_VARIABLE","$url",161],")",["T_WHITESPACE","\n    ",161],"{",["T_WHITESPACE","\n        ",162],["T_IF","if",163],["T_WHITESPACE"," ",163],"(",["T_EMPTY","empty",163],"(",["T_VARIABLE","$url",163],")",")",["T_WHITESPACE"," ",163],"{",["T_WHITESPACE","\n            ",163],["T_RETURN","return",164],["T_WHITESPACE"," ",164],["T_STRING","Zend_OpenId",164],["T_DOUBLE_COLON","::",164],["T_STRING","selfUrl",164],"(",")",";",["T_WHITESPACE","\n        ",164],"}",["T_WHITESPACE"," ",165],["T_ELSE","else",165],["T_WHITESPACE"," ",165],["T_IF","if",165],["T_WHITESPACE"," ",165],"(","!",["T_STRING","preg_match",165],"(",["T_CONSTANT_ENCAPSED_STRING","'|^([^:]+):\/\/|'",165],",",["T_WHITESPACE"," ",165],["T_VARIABLE","$url",165],")",")",["T_WHITESPACE"," ",165],"{",["T_WHITESPACE","\n            ",165],["T_IF","if",166],["T_WHITESPACE"," ",166],"(",["T_STRING","preg_match",166],"(",["T_CONSTANT_ENCAPSED_STRING","'|^([^:]+):\/\/([^:@]*(?:[:][^@]*)?@)?([^\/:@?#]*)(?:[:]([^\/?#]*))?(\/[^?]*)?((?:[?](?:[^#]*))?(?:#.*)?)$|'",166],",",["T_WHITESPACE"," ",166],["T_STRING","Zend_OpenId",166],["T_DOUBLE_COLON","::",166],["T_STRING","selfUrl",166],"(",")",",",["T_WHITESPACE"," ",166],["T_VARIABLE","$reg",166],")",")",["T_WHITESPACE"," ",166],"{",["T_WHITESPACE","\n                ",166],["T_VARIABLE","$scheme",167],["T_WHITESPACE"," ",167],"=",["T_WHITESPACE"," ",167],["T_VARIABLE","$reg",167],"[",["T_LNUMBER","1",167],"]",";",["T_WHITESPACE","\n                ",167],["T_VARIABLE","$auth",168],["T_WHITESPACE"," ",168],"=",["T_WHITESPACE"," ",168],["T_VARIABLE","$reg",168],"[",["T_LNUMBER","2",168],"]",";",["T_WHITESPACE","\n                ",168],["T_VARIABLE","$host",169],["T_WHITESPACE"," ",169],"=",["T_WHITESPACE"," ",169],["T_VARIABLE","$reg",169],"[",["T_LNUMBER","3",169],"]",";",["T_WHITESPACE","\n                ",169],["T_VARIABLE","$port",170],["T_WHITESPACE"," ",170],"=",["T_WHITESPACE"," ",170],["T_VARIABLE","$reg",170],"[",["T_LNUMBER","4",170],"]",";",["T_WHITESPACE","\n                ",170],["T_VARIABLE","$path",171],["T_WHITESPACE"," ",171],"=",["T_WHITESPACE"," ",171],["T_VARIABLE","$reg",171],"[",["T_LNUMBER","5",171],"]",";",["T_WHITESPACE","\n                ",171],["T_VARIABLE","$query",172],["T_WHITESPACE"," ",172],"=",["T_WHITESPACE"," ",172],["T_VARIABLE","$reg",172],"[",["T_LNUMBER","6",172],"]",";",["T_WHITESPACE","\n                ",172],["T_IF","if",173],["T_WHITESPACE"," ",173],"(",["T_VARIABLE","$url",173],"[",["T_LNUMBER","0",173],"]",["T_WHITESPACE"," ",173],["T_IS_EQUAL","==",173],["T_WHITESPACE"," ",173],["T_CONSTANT_ENCAPSED_STRING","'\/'",173],")",["T_WHITESPACE"," ",173],"{",["T_WHITESPACE","\n                    ",173],["T_RETURN","return",174],["T_WHITESPACE"," ",174],["T_VARIABLE","$scheme",174],["T_WHITESPACE","\n                        ",174],".",["T_WHITESPACE"," ",175],["T_CONSTANT_ENCAPSED_STRING","':\/\/'",175],["T_WHITESPACE","\n                        ",175],".",["T_WHITESPACE"," ",176],["T_VARIABLE","$auth",176],["T_WHITESPACE","\n                        ",176],".",["T_WHITESPACE"," ",177],["T_VARIABLE","$host",177],["T_WHITESPACE","\n                        ",177],".",["T_WHITESPACE"," ",178],"(",["T_EMPTY","empty",178],"(",["T_VARIABLE","$port",178],")",["T_WHITESPACE"," ",178],"?",["T_WHITESPACE"," ",178],["T_CONSTANT_ENCAPSED_STRING","''",178],["T_WHITESPACE"," ",178],":",["T_WHITESPACE"," ",178],"(",["T_CONSTANT_ENCAPSED_STRING","':'",178],["T_WHITESPACE"," ",178],".",["T_WHITESPACE"," ",178],["T_VARIABLE","$port",178],")",")",["T_WHITESPACE","\n                        ",178],".",["T_WHITESPACE"," ",179],["T_VARIABLE","$url",179],";",["T_WHITESPACE","\n                ",179],"}",["T_WHITESPACE"," ",180],["T_ELSE","else",180],["T_WHITESPACE"," ",180],"{",["T_WHITESPACE","\n                    ",180],["T_VARIABLE","$dir",181],["T_WHITESPACE"," ",181],"=",["T_WHITESPACE"," ",181],["T_STRING","dirname",181],"(",["T_VARIABLE","$path",181],")",";",["T_WHITESPACE","\n                    ",181],["T_RETURN","return",182],["T_WHITESPACE"," ",182],["T_VARIABLE","$scheme",182],["T_WHITESPACE","\n                        ",182],".",["T_WHITESPACE"," ",183],["T_CONSTANT_ENCAPSED_STRING","':\/\/'",183],["T_WHITESPACE","\n                        ",183],".",["T_WHITESPACE"," ",184],["T_VARIABLE","$auth",184],["T_WHITESPACE","\n                        ",184],".",["T_WHITESPACE"," ",185],["T_VARIABLE","$host",185],["T_WHITESPACE","\n                        ",185],".",["T_WHITESPACE"," ",186],"(",["T_EMPTY","empty",186],"(",["T_VARIABLE","$port",186],")",["T_WHITESPACE"," ",186],"?",["T_WHITESPACE"," ",186],["T_CONSTANT_ENCAPSED_STRING","''",186],["T_WHITESPACE"," ",186],":",["T_WHITESPACE"," ",186],"(",["T_CONSTANT_ENCAPSED_STRING","':'",186],["T_WHITESPACE"," ",186],".",["T_WHITESPACE"," ",186],["T_VARIABLE","$port",186],")",")",["T_WHITESPACE","\n                        ",186],".",["T_WHITESPACE"," ",187],"(",["T_STRING","strlen",187],"(",["T_VARIABLE","$dir",187],")",["T_WHITESPACE"," ",187],">",["T_WHITESPACE"," ",187],["T_LNUMBER","1",187],["T_WHITESPACE"," ",187],"?",["T_WHITESPACE"," ",187],["T_VARIABLE","$dir",187],["T_WHITESPACE"," ",187],":",["T_WHITESPACE"," ",187],["T_CONSTANT_ENCAPSED_STRING","''",187],")",["T_WHITESPACE","\n                        ",187],".",["T_WHITESPACE"," ",188],["T_CONSTANT_ENCAPSED_STRING","'\/'",188],["T_WHITESPACE","\n                        ",188],".",["T_WHITESPACE"," ",189],["T_VARIABLE","$url",189],";",["T_WHITESPACE","\n                ",189],"}",["T_WHITESPACE","\n            ",190],"}",["T_WHITESPACE","\n        ",191],"}",["T_WHITESPACE","\n        ",192],["T_RETURN","return",193],["T_WHITESPACE"," ",193],["T_VARIABLE","$url",193],";",["T_WHITESPACE","\n    ",193],"}",["T_WHITESPACE","\n\n    ",194],["T_DOC_COMMENT","\/**\n     * Converts variable\/value pairs into URL encoded query string\n     *\n     * @param array $params variable\/value pairs\n     * @return string URL encoded query string\n     *\/",196],["T_WHITESPACE","\n    ",201],["T_STATIC","static",202],["T_WHITESPACE"," ",202],["T_PUBLIC","public",202],["T_WHITESPACE"," ",202],["T_FUNCTION","function",202],["T_WHITESPACE"," ",202],["T_STRING","paramsToQuery",202],"(",["T_VARIABLE","$params",202],")",["T_WHITESPACE","\n    ",202],"{",["T_WHITESPACE","\n        ",203],["T_FOREACH","foreach",204],"(",["T_VARIABLE","$params",204],["T_WHITESPACE"," ",204],["T_AS","as",204],["T_WHITESPACE"," ",204],["T_VARIABLE","$key",204],["T_WHITESPACE"," ",204],["T_DOUBLE_ARROW","=>",204],["T_WHITESPACE"," ",204],["T_VARIABLE","$value",204],")",["T_WHITESPACE"," ",204],"{",["T_WHITESPACE","\n            ",204],["T_IF","if",205],["T_WHITESPACE"," ",205],"(",["T_ISSET","isset",205],"(",["T_VARIABLE","$query",205],")",")",["T_WHITESPACE"," ",205],"{",["T_WHITESPACE","\n                ",205],["T_VARIABLE","$query",206],["T_WHITESPACE"," ",206],["T_CONCAT_EQUAL",".=",206],["T_WHITESPACE"," ",206],["T_CONSTANT_ENCAPSED_STRING","'&'",206],["T_WHITESPACE"," ",206],".",["T_WHITESPACE"," ",206],["T_VARIABLE","$key",206],["T_WHITESPACE"," ",206],".",["T_WHITESPACE"," ",206],["T_CONSTANT_ENCAPSED_STRING","'='",206],["T_WHITESPACE"," ",206],".",["T_WHITESPACE"," ",206],["T_STRING","urlencode",206],"(",["T_VARIABLE","$value",206],")",";",["T_WHITESPACE","\n            ",206],"}",["T_WHITESPACE"," ",207],["T_ELSE","else",207],["T_WHITESPACE"," ",207],"{",["T_WHITESPACE","\n                ",207],["T_VARIABLE","$query",208],["T_WHITESPACE"," ",208],"=",["T_WHITESPACE"," ",208],["T_VARIABLE","$key",208],["T_WHITESPACE"," ",208],".",["T_WHITESPACE"," ",208],["T_CONSTANT_ENCAPSED_STRING","'='",208],["T_WHITESPACE"," ",208],".",["T_WHITESPACE"," ",208],["T_STRING","urlencode",208],"(",["T_VARIABLE","$value",208],")",";",["T_WHITESPACE","\n            ",208],"}",["T_WHITESPACE","\n        ",209],"}",["T_WHITESPACE","\n        ",210],["T_RETURN","return",211],["T_WHITESPACE"," ",211],["T_ISSET","isset",211],"(",["T_VARIABLE","$query",211],")",["T_WHITESPACE"," ",211],"?",["T_WHITESPACE"," ",211],["T_VARIABLE","$query",211],["T_WHITESPACE"," ",211],":",["T_WHITESPACE"," ",211],["T_CONSTANT_ENCAPSED_STRING","''",211],";",["T_WHITESPACE","\n    ",211],"}",["T_WHITESPACE","\n\n    ",212],["T_DOC_COMMENT","\/**\n     * Normalizes URL according to RFC 3986 to use it in comparison operations.\n     * The function gets URL argument by reference and modifies it.\n     * It returns true on success and false of failure.\n     *\n     * @param string &$id url to be normalized\n     * @return bool\n     *\/",214],["T_WHITESPACE","\n    ",221],["T_STATIC","static",222],["T_WHITESPACE"," ",222],["T_PUBLIC","public",222],["T_WHITESPACE"," ",222],["T_FUNCTION","function",222],["T_WHITESPACE"," ",222],["T_STRING","normalizeUrl",222],"(","&",["T_VARIABLE","$id",222],")",["T_WHITESPACE","\n    ",222],"{",["T_WHITESPACE","\n        ",223],["T_COMMENT","\/\/ RFC 3986, 6.2.2.  Syntax-Based Normalization\n",224],["T_WHITESPACE","\n        ",225],["T_COMMENT","\/\/ RFC 3986, 6.2.2.2 Percent-Encoding Normalization\n",226],["T_WHITESPACE","        ",227],["T_VARIABLE","$i",227],["T_WHITESPACE"," ",227],"=",["T_WHITESPACE"," ",227],["T_LNUMBER","0",227],";",["T_WHITESPACE","\n        ",227],["T_VARIABLE","$n",228],["T_WHITESPACE"," ",228],"=",["T_WHITESPACE"," ",228],["T_STRING","strlen",228],"(",["T_VARIABLE","$id",228],")",";",["T_WHITESPACE","\n        ",228],["T_VARIABLE","$res",229],["T_WHITESPACE"," ",229],"=",["T_WHITESPACE"," ",229],["T_CONSTANT_ENCAPSED_STRING","''",229],";",["T_WHITESPACE","\n        ",229],["T_WHILE","while",230],["T_WHITESPACE"," ",230],"(",["T_VARIABLE","$i",230],["T_WHITESPACE"," ",230],"<",["T_WHITESPACE"," ",230],["T_VARIABLE","$n",230],")",["T_WHITESPACE"," ",230],"{",["T_WHITESPACE","\n            ",230],["T_IF","if",231],["T_WHITESPACE"," ",231],"(",["T_VARIABLE","$id",231],"[",["T_VARIABLE","$i",231],"]",["T_WHITESPACE"," ",231],["T_IS_EQUAL","==",231],["T_WHITESPACE"," ",231],["T_CONSTANT_ENCAPSED_STRING","'%'",231],")",["T_WHITESPACE"," ",231],"{",["T_WHITESPACE","\n                ",231],["T_IF","if",232],["T_WHITESPACE"," ",232],"(",["T_VARIABLE","$i",232],["T_WHITESPACE"," ",232],"+",["T_WHITESPACE"," ",232],["T_LNUMBER","2",232],["T_WHITESPACE"," ",232],["T_IS_GREATER_OR_EQUAL",">=",232],["T_WHITESPACE"," ",232],["T_VARIABLE","$n",232],")",["T_WHITESPACE"," ",232],"{",["T_WHITESPACE","\n                    ",232],["T_RETURN","return",233],["T_WHITESPACE"," ",233],["T_STRING","false",233],";",["T_WHITESPACE","\n                ",233],"}",["T_WHITESPACE","\n                ",234],["T_INC","++",235],["T_VARIABLE","$i",235],";",["T_WHITESPACE","\n                ",235],["T_IF","if",236],["T_WHITESPACE"," ",236],"(",["T_VARIABLE","$id",236],"[",["T_VARIABLE","$i",236],"]",["T_WHITESPACE"," ",236],["T_IS_GREATER_OR_EQUAL",">=",236],["T_WHITESPACE"," ",236],["T_CONSTANT_ENCAPSED_STRING","'0'",236],["T_WHITESPACE"," ",236],["T_BOOLEAN_AND","&&",236],["T_WHITESPACE"," ",236],["T_VARIABLE","$id",236],"[",["T_VARIABLE","$i",236],"]",["T_WHITESPACE"," ",236],["T_IS_SMALLER_OR_EQUAL","<=",236],["T_WHITESPACE"," ",236],["T_CONSTANT_ENCAPSED_STRING","'9'",236],")",["T_WHITESPACE"," ",236],"{",["T_WHITESPACE","\n                    ",236],["T_VARIABLE","$c",237],["T_WHITESPACE"," ",237],"=",["T_WHITESPACE"," ",237],["T_STRING","ord",237],"(",["T_VARIABLE","$id",237],"[",["T_VARIABLE","$i",237],"]",")",["T_WHITESPACE"," ",237],"-",["T_WHITESPACE"," ",237],["T_STRING","ord",237],"(",["T_CONSTANT_ENCAPSED_STRING","'0'",237],")",";",["T_WHITESPACE","\n                ",237],"}",["T_WHITESPACE"," ",238],["T_ELSE","else",238],["T_WHITESPACE"," ",238],["T_IF","if",238],["T_WHITESPACE"," ",238],"(",["T_VARIABLE","$id",238],"[",["T_VARIABLE","$i",238],"]",["T_WHITESPACE"," ",238],["T_IS_GREATER_OR_EQUAL",">=",238],["T_WHITESPACE"," ",238],["T_CONSTANT_ENCAPSED_STRING","'A'",238],["T_WHITESPACE"," ",238],["T_BOOLEAN_AND","&&",238],["T_WHITESPACE"," ",238],["T_VARIABLE","$id",238],"[",["T_VARIABLE","$i",238],"]",["T_WHITESPACE"," ",238],["T_IS_SMALLER_OR_EQUAL","<=",238],["T_WHITESPACE"," ",238],["T_CONSTANT_ENCAPSED_STRING","'F'",238],")",["T_WHITESPACE"," ",238],"{",["T_WHITESPACE","\n                    ",238],["T_VARIABLE","$c",239],["T_WHITESPACE"," ",239],"=",["T_WHITESPACE"," ",239],["T_STRING","ord",239],"(",["T_VARIABLE","$id",239],"[",["T_VARIABLE","$i",239],"]",")",["T_WHITESPACE"," ",239],"-",["T_WHITESPACE"," ",239],["T_STRING","ord",239],"(",["T_CONSTANT_ENCAPSED_STRING","'A'",239],")",["T_WHITESPACE"," ",239],"+",["T_WHITESPACE"," ",239],["T_LNUMBER","10",239],";",["T_WHITESPACE","\n                ",239],"}",["T_WHITESPACE"," ",240],["T_ELSE","else",240],["T_WHITESPACE"," ",240],["T_IF","if",240],["T_WHITESPACE"," ",240],"(",["T_VARIABLE","$id",240],"[",["T_VARIABLE","$i",240],"]",["T_WHITESPACE"," ",240],["T_IS_GREATER_OR_EQUAL",">=",240],["T_WHITESPACE"," ",240],["T_CONSTANT_ENCAPSED_STRING","'a'",240],["T_WHITESPACE"," ",240],["T_BOOLEAN_AND","&&",240],["T_WHITESPACE"," ",240],["T_VARIABLE","$id",240],"[",["T_VARIABLE","$i",240],"]",["T_WHITESPACE"," ",240],["T_IS_SMALLER_OR_EQUAL","<=",240],["T_WHITESPACE"," ",240],["T_CONSTANT_ENCAPSED_STRING","'f'",240],")",["T_WHITESPACE"," ",240],"{",["T_WHITESPACE","\n                    ",240],["T_VARIABLE","$c",241],["T_WHITESPACE"," ",241],"=",["T_WHITESPACE"," ",241],["T_STRING","ord",241],"(",["T_VARIABLE","$id",241],"[",["T_VARIABLE","$i",241],"]",")",["T_WHITESPACE"," ",241],"-",["T_WHITESPACE"," ",241],["T_STRING","ord",241],"(",["T_CONSTANT_ENCAPSED_STRING","'a'",241],")",["T_WHITESPACE"," ",241],"+",["T_WHITESPACE"," ",241],["T_LNUMBER","10",241],";",["T_WHITESPACE","\n                ",241],"}",["T_WHITESPACE"," ",242],["T_ELSE","else",242],["T_WHITESPACE"," ",242],"{",["T_WHITESPACE","\n                    ",242],["T_RETURN","return",243],["T_WHITESPACE"," ",243],["T_STRING","false",243],";",["T_WHITESPACE","\n                ",243],"}",["T_WHITESPACE","\n                ",244],["T_INC","++",245],["T_VARIABLE","$i",245],";",["T_WHITESPACE","\n                ",245],["T_IF","if",246],["T_WHITESPACE"," ",246],"(",["T_VARIABLE","$id",246],"[",["T_VARIABLE","$i",246],"]",["T_WHITESPACE"," ",246],["T_IS_GREATER_OR_EQUAL",">=",246],["T_WHITESPACE"," ",246],["T_CONSTANT_ENCAPSED_STRING","'0'",246],["T_WHITESPACE"," ",246],["T_BOOLEAN_AND","&&",246],["T_WHITESPACE"," ",246],["T_VARIABLE","$id",246],"[",["T_VARIABLE","$i",246],"]",["T_WHITESPACE"," ",246],["T_IS_SMALLER_OR_EQUAL","<=",246],["T_WHITESPACE"," ",246],["T_CONSTANT_ENCAPSED_STRING","'9'",246],")",["T_WHITESPACE"," ",246],"{",["T_WHITESPACE","\n                    ",246],["T_VARIABLE","$c",247],["T_WHITESPACE"," ",247],"=",["T_WHITESPACE"," ",247],"(",["T_VARIABLE","$c",247],["T_WHITESPACE"," ",247],["T_SL","<<",247],["T_WHITESPACE"," ",247],["T_LNUMBER","4",247],")",["T_WHITESPACE"," ",247],"|",["T_WHITESPACE"," ",247],"(",["T_STRING","ord",247],"(",["T_VARIABLE","$id",247],"[",["T_VARIABLE","$i",247],"]",")",["T_WHITESPACE"," ",247],"-",["T_WHITESPACE"," ",247],["T_STRING","ord",247],"(",["T_CONSTANT_ENCAPSED_STRING","'0'",247],")",")",";",["T_WHITESPACE","\n                ",247],"}",["T_WHITESPACE"," ",248],["T_ELSE","else",248],["T_WHITESPACE"," ",248],["T_IF","if",248],["T_WHITESPACE"," ",248],"(",["T_VARIABLE","$id",248],"[",["T_VARIABLE","$i",248],"]",["T_WHITESPACE"," ",248],["T_IS_GREATER_OR_EQUAL",">=",248],["T_WHITESPACE"," ",248],["T_CONSTANT_ENCAPSED_STRING","'A'",248],["T_WHITESPACE"," ",248],["T_BOOLEAN_AND","&&",248],["T_WHITESPACE"," ",248],["T_VARIABLE","$id",248],"[",["T_VARIABLE","$i",248],"]",["T_WHITESPACE"," ",248],["T_IS_SMALLER_OR_EQUAL","<=",248],["T_WHITESPACE"," ",248],["T_CONSTANT_ENCAPSED_STRING","'F'",248],")",["T_WHITESPACE"," ",248],"{",["T_WHITESPACE","\n                    ",248],["T_VARIABLE","$c",249],["T_WHITESPACE"," ",249],"=",["T_WHITESPACE"," ",249],"(",["T_VARIABLE","$c",249],["T_WHITESPACE"," ",249],["T_SL","<<",249],["T_WHITESPACE"," ",249],["T_LNUMBER","4",249],")",["T_WHITESPACE"," ",249],"|",["T_WHITESPACE"," ",249],"(",["T_STRING","ord",249],"(",["T_VARIABLE","$id",249],"[",["T_VARIABLE","$i",249],"]",")",["T_WHITESPACE"," ",249],"-",["T_WHITESPACE"," ",249],["T_STRING","ord",249],"(",["T_CONSTANT_ENCAPSED_STRING","'A'",249],")",["T_WHITESPACE"," ",249],"+",["T_WHITESPACE"," ",249],["T_LNUMBER","10",249],")",";",["T_WHITESPACE","\n                ",249],"}",["T_WHITESPACE"," ",250],["T_ELSE","else",250],["T_WHITESPACE"," ",250],["T_IF","if",250],["T_WHITESPACE"," ",250],"(",["T_VARIABLE","$id",250],"[",["T_VARIABLE","$i",250],"]",["T_WHITESPACE"," ",250],["T_IS_GREATER_OR_EQUAL",">=",250],["T_WHITESPACE"," ",250],["T_CONSTANT_ENCAPSED_STRING","'a'",250],["T_WHITESPACE"," ",250],["T_BOOLEAN_AND","&&",250],["T_WHITESPACE"," ",250],["T_VARIABLE","$id",250],"[",["T_VARIABLE","$i",250],"]",["T_WHITESPACE"," ",250],["T_IS_SMALLER_OR_EQUAL","<=",250],["T_WHITESPACE"," ",250],["T_CONSTANT_ENCAPSED_STRING","'f'",250],")",["T_WHITESPACE"," ",250],"{",["T_WHITESPACE","\n                    ",250],["T_VARIABLE","$c",251],["T_WHITESPACE"," ",251],"=",["T_WHITESPACE"," ",251],"(",["T_VARIABLE","$c",251],["T_WHITESPACE"," ",251],["T_SL","<<",251],["T_WHITESPACE"," ",251],["T_LNUMBER","4",251],")",["T_WHITESPACE"," ",251],"|",["T_WHITESPACE"," ",251],"(",["T_STRING","ord",251],"(",["T_VARIABLE","$id",251],"[",["T_VARIABLE","$i",251],"]",")",["T_WHITESPACE"," ",251],"-",["T_WHITESPACE"," ",251],["T_STRING","ord",251],"(",["T_CONSTANT_ENCAPSED_STRING","'a'",251],")",["T_WHITESPACE"," ",251],"+",["T_WHITESPACE"," ",251],["T_LNUMBER","10",251],")",";",["T_WHITESPACE","\n                ",251],"}",["T_WHITESPACE"," ",252],["T_ELSE","else",252],["T_WHITESPACE"," ",252],"{",["T_WHITESPACE","\n                    ",252],["T_RETURN","return",253],["T_WHITESPACE"," ",253],["T_STRING","false",253],";",["T_WHITESPACE","\n                ",253],"}",["T_WHITESPACE","\n                ",254],["T_INC","++",255],["T_VARIABLE","$i",255],";",["T_WHITESPACE","\n                ",255],["T_VARIABLE","$ch",256],["T_WHITESPACE"," ",256],"=",["T_WHITESPACE"," ",256],["T_STRING","chr",256],"(",["T_VARIABLE","$c",256],")",";",["T_WHITESPACE","\n                ",256],["T_IF","if",257],["T_WHITESPACE"," ",257],"(","(",["T_VARIABLE","$ch",257],["T_WHITESPACE"," ",257],["T_IS_GREATER_OR_EQUAL",">=",257],["T_WHITESPACE"," ",257],["T_CONSTANT_ENCAPSED_STRING","'A'",257],["T_WHITESPACE"," ",257],["T_BOOLEAN_AND","&&",257],["T_WHITESPACE"," ",257],["T_VARIABLE","$ch",257],["T_WHITESPACE"," ",257],["T_IS_SMALLER_OR_EQUAL","<=",257],["T_WHITESPACE"," ",257],["T_CONSTANT_ENCAPSED_STRING","'Z'",257],")",["T_WHITESPACE"," ",257],["T_BOOLEAN_OR","||",257],["T_WHITESPACE","\n                    ",257],"(",["T_VARIABLE","$ch",258],["T_WHITESPACE"," ",258],["T_IS_GREATER_OR_EQUAL",">=",258],["T_WHITESPACE"," ",258],["T_CONSTANT_ENCAPSED_STRING","'a'",258],["T_WHITESPACE"," ",258],["T_BOOLEAN_AND","&&",258],["T_WHITESPACE"," ",258],["T_VARIABLE","$ch",258],["T_WHITESPACE"," ",258],["T_IS_SMALLER_OR_EQUAL","<=",258],["T_WHITESPACE"," ",258],["T_CONSTANT_ENCAPSED_STRING","'z'",258],")",["T_WHITESPACE"," ",258],["T_BOOLEAN_OR","||",258],["T_WHITESPACE","\n                    ",258],["T_VARIABLE","$ch",259],["T_WHITESPACE"," ",259],["T_IS_EQUAL","==",259],["T_WHITESPACE"," ",259],["T_CONSTANT_ENCAPSED_STRING","'-'",259],["T_WHITESPACE"," ",259],["T_BOOLEAN_OR","||",259],["T_WHITESPACE","\n                    ",259],["T_VARIABLE","$ch",260],["T_WHITESPACE"," ",260],["T_IS_EQUAL","==",260],["T_WHITESPACE"," ",260],["T_CONSTANT_ENCAPSED_STRING","'.'",260],["T_WHITESPACE"," ",260],["T_BOOLEAN_OR","||",260],["T_WHITESPACE","\n                    ",260],["T_VARIABLE","$ch",261],["T_WHITESPACE"," ",261],["T_IS_EQUAL","==",261],["T_WHITESPACE"," ",261],["T_CONSTANT_ENCAPSED_STRING","'_'",261],["T_WHITESPACE"," ",261],["T_BOOLEAN_OR","||",261],["T_WHITESPACE","\n                    ",261],["T_VARIABLE","$ch",262],["T_WHITESPACE"," ",262],["T_IS_EQUAL","==",262],["T_WHITESPACE"," ",262],["T_CONSTANT_ENCAPSED_STRING","'~'",262],")",["T_WHITESPACE"," ",262],"{",["T_WHITESPACE","\n                    ",262],["T_VARIABLE","$res",263],["T_WHITESPACE"," ",263],["T_CONCAT_EQUAL",".=",263],["T_WHITESPACE"," ",263],["T_VARIABLE","$ch",263],";",["T_WHITESPACE","\n                ",263],"}",["T_WHITESPACE"," ",264],["T_ELSE","else",264],["T_WHITESPACE"," ",264],"{",["T_WHITESPACE","\n                    ",264],["T_VARIABLE","$res",265],["T_WHITESPACE"," ",265],["T_CONCAT_EQUAL",".=",265],["T_WHITESPACE"," ",265],["T_CONSTANT_ENCAPSED_STRING","'%'",265],";",["T_WHITESPACE","\n                    ",265],["T_IF","if",266],["T_WHITESPACE"," ",266],"(","(",["T_VARIABLE","$c",266],["T_WHITESPACE"," ",266],["T_SR",">>",266],["T_WHITESPACE"," ",266],["T_LNUMBER","4",266],")",["T_WHITESPACE"," ",266],"<",["T_WHITESPACE"," ",266],["T_LNUMBER","10",266],")",["T_WHITESPACE"," ",266],"{",["T_WHITESPACE","\n                        ",266],["T_VARIABLE","$res",267],["T_WHITESPACE"," ",267],["T_CONCAT_EQUAL",".=",267],["T_WHITESPACE"," ",267],["T_STRING","chr",267],"(","(",["T_VARIABLE","$c",267],["T_WHITESPACE"," ",267],["T_SR",">>",267],["T_WHITESPACE"," ",267],["T_LNUMBER","4",267],")",["T_WHITESPACE"," ",267],"+",["T_WHITESPACE"," ",267],["T_STRING","ord",267],"(",["T_CONSTANT_ENCAPSED_STRING","'0'",267],")",")",";",["T_WHITESPACE","\n                    ",267],"}",["T_WHITESPACE"," ",268],["T_ELSE","else",268],["T_WHITESPACE"," ",268],"{",["T_WHITESPACE","\n                        ",268],["T_VARIABLE","$res",269],["T_WHITESPACE"," ",269],["T_CONCAT_EQUAL",".=",269],["T_WHITESPACE"," ",269],["T_STRING","chr",269],"(","(",["T_VARIABLE","$c",269],["T_WHITESPACE"," ",269],["T_SR",">>",269],["T_WHITESPACE"," ",269],["T_LNUMBER","4",269],")",["T_WHITESPACE"," ",269],"-",["T_WHITESPACE"," ",269],["T_LNUMBER","10",269],["T_WHITESPACE"," ",269],"+",["T_WHITESPACE"," ",269],["T_STRING","ord",269],"(",["T_CONSTANT_ENCAPSED_STRING","'A'",269],")",")",";",["T_WHITESPACE","\n                    ",269],"}",["T_WHITESPACE","\n                    ",270],["T_VARIABLE","$c",271],["T_WHITESPACE"," ",271],"=",["T_WHITESPACE"," ",271],["T_VARIABLE","$c",271],["T_WHITESPACE"," ",271],"&",["T_WHITESPACE"," ",271],["T_LNUMBER","0xf",271],";",["T_WHITESPACE","\n                    ",271],["T_IF","if",272],["T_WHITESPACE"," ",272],"(",["T_VARIABLE","$c",272],["T_WHITESPACE"," ",272],"<",["T_WHITESPACE"," ",272],["T_LNUMBER","10",272],")",["T_WHITESPACE"," ",272],"{",["T_WHITESPACE","\n                        ",272],["T_VARIABLE","$res",273],["T_WHITESPACE"," ",273],["T_CONCAT_EQUAL",".=",273],["T_WHITESPACE"," ",273],["T_STRING","chr",273],"(",["T_VARIABLE","$c",273],["T_WHITESPACE"," ",273],"+",["T_WHITESPACE"," ",273],["T_STRING","ord",273],"(",["T_CONSTANT_ENCAPSED_STRING","'0'",273],")",")",";",["T_WHITESPACE","\n                    ",273],"}",["T_WHITESPACE"," ",274],["T_ELSE","else",274],["T_WHITESPACE"," ",274],"{",["T_WHITESPACE","\n                        ",274],["T_VARIABLE","$res",275],["T_WHITESPACE"," ",275],["T_CONCAT_EQUAL",".=",275],["T_WHITESPACE"," ",275],["T_STRING","chr",275],"(",["T_VARIABLE","$c",275],["T_WHITESPACE"," ",275],"-",["T_WHITESPACE"," ",275],["T_LNUMBER","10",275],["T_WHITESPACE"," ",275],"+",["T_WHITESPACE"," ",275],["T_STRING","ord",275],"(",["T_CONSTANT_ENCAPSED_STRING","'A'",275],")",")",";",["T_WHITESPACE","\n                    ",275],"}",["T_WHITESPACE","\n                ",276],"}",["T_WHITESPACE","\n            ",277],"}",["T_WHITESPACE"," ",278],["T_ELSE","else",278],["T_WHITESPACE"," ",278],"{",["T_WHITESPACE","\n                ",278],["T_VARIABLE","$res",279],["T_WHITESPACE"," ",279],["T_CONCAT_EQUAL",".=",279],["T_WHITESPACE"," ",279],["T_VARIABLE","$id",279],"[",["T_VARIABLE","$i",279],["T_INC","++",279],"]",";",["T_WHITESPACE","\n            ",279],"}",["T_WHITESPACE","\n        ",280],"}",["T_WHITESPACE","\n\n        ",281],["T_IF","if",283],["T_WHITESPACE"," ",283],"(","!",["T_STRING","preg_match",283],"(",["T_CONSTANT_ENCAPSED_STRING","'|^([^:]+):\/\/([^:@]*(?:[:][^@]*)?@)?([^\/:@?#]*)(?:[:]([^\/?#]*))?(\/[^?#]*)?((?:[?](?:[^#]*))?)((?:#.*)?)$|'",283],",",["T_WHITESPACE"," ",283],["T_VARIABLE","$res",283],",",["T_WHITESPACE"," ",283],["T_VARIABLE","$reg",283],")",")",["T_WHITESPACE"," ",283],"{",["T_WHITESPACE","\n            ",283],["T_RETURN","return",284],["T_WHITESPACE"," ",284],["T_STRING","false",284],";",["T_WHITESPACE","\n        ",284],"}",["T_WHITESPACE","\n        ",285],["T_VARIABLE","$scheme",286],["T_WHITESPACE"," ",286],"=",["T_WHITESPACE"," ",286],["T_VARIABLE","$reg",286],"[",["T_LNUMBER","1",286],"]",";",["T_WHITESPACE","\n        ",286],["T_VARIABLE","$auth",287],["T_WHITESPACE"," ",287],"=",["T_WHITESPACE"," ",287],["T_VARIABLE","$reg",287],"[",["T_LNUMBER","2",287],"]",";",["T_WHITESPACE","\n        ",287],["T_VARIABLE","$host",288],["T_WHITESPACE"," ",288],"=",["T_WHITESPACE"," ",288],["T_VARIABLE","$reg",288],"[",["T_LNUMBER","3",288],"]",";",["T_WHITESPACE","\n        ",288],["T_VARIABLE","$port",289],["T_WHITESPACE"," ",289],"=",["T_WHITESPACE"," ",289],["T_VARIABLE","$reg",289],"[",["T_LNUMBER","4",289],"]",";",["T_WHITESPACE","\n        ",289],["T_VARIABLE","$path",290],["T_WHITESPACE"," ",290],"=",["T_WHITESPACE"," ",290],["T_VARIABLE","$reg",290],"[",["T_LNUMBER","5",290],"]",";",["T_WHITESPACE","\n        ",290],["T_VARIABLE","$query",291],["T_WHITESPACE"," ",291],"=",["T_WHITESPACE"," ",291],["T_VARIABLE","$reg",291],"[",["T_LNUMBER","6",291],"]",";",["T_WHITESPACE","\n        ",291],["T_VARIABLE","$fragment",292],["T_WHITESPACE"," ",292],"=",["T_WHITESPACE"," ",292],["T_VARIABLE","$reg",292],"[",["T_LNUMBER","7",292],"]",";",["T_WHITESPACE"," ",292],["T_COMMENT","\/* strip it *\/",292],["T_WHITESPACE"," ",292],["T_COMMENT","\/* ZF-4358 Fragment retained under OpenID 2.0 *\/",292],["T_WHITESPACE","\n\n        ",292],["T_IF","if",294],["T_WHITESPACE"," ",294],"(",["T_EMPTY","empty",294],"(",["T_VARIABLE","$scheme",294],")",["T_WHITESPACE"," ",294],["T_BOOLEAN_OR","||",294],["T_WHITESPACE"," ",294],["T_EMPTY","empty",294],"(",["T_VARIABLE","$host",294],")",")",["T_WHITESPACE"," ",294],"{",["T_WHITESPACE","\n            ",294],["T_RETURN","return",295],["T_WHITESPACE"," ",295],["T_STRING","false",295],";",["T_WHITESPACE","\n        ",295],"}",["T_WHITESPACE","\n\n        ",296],["T_COMMENT","\/\/ RFC 3986, 6.2.2.1.  Case Normalization\n",298],["T_WHITESPACE","        ",299],["T_VARIABLE","$scheme",299],["T_WHITESPACE"," ",299],"=",["T_WHITESPACE"," ",299],["T_STRING","strtolower",299],"(",["T_VARIABLE","$scheme",299],")",";",["T_WHITESPACE","\n        ",299],["T_VARIABLE","$host",300],["T_WHITESPACE"," ",300],"=",["T_WHITESPACE"," ",300],["T_STRING","strtolower",300],"(",["T_VARIABLE","$host",300],")",";",["T_WHITESPACE","\n\n        ",300],["T_COMMENT","\/\/ RFC 3986, 6.2.2.3.  Path Segment Normalization\n",302],["T_WHITESPACE","        ",303],["T_IF","if",303],["T_WHITESPACE"," ",303],"(","!",["T_EMPTY","empty",303],"(",["T_VARIABLE","$path",303],")",")",["T_WHITESPACE"," ",303],"{",["T_WHITESPACE","\n            ",303],["T_VARIABLE","$i",304],["T_WHITESPACE"," ",304],"=",["T_WHITESPACE"," ",304],["T_LNUMBER","0",304],";",["T_WHITESPACE","\n            ",304],["T_VARIABLE","$n",305],["T_WHITESPACE"," ",305],"=",["T_WHITESPACE"," ",305],["T_STRING","strlen",305],"(",["T_VARIABLE","$path",305],")",";",["T_WHITESPACE","\n            ",305],["T_VARIABLE","$res",306],["T_WHITESPACE"," ",306],"=",["T_WHITESPACE"," ",306],["T_CONSTANT_ENCAPSED_STRING","\"\"",306],";",["T_WHITESPACE","\n            ",306],["T_WHILE","while",307],["T_WHITESPACE"," ",307],"(",["T_VARIABLE","$i",307],["T_WHITESPACE"," ",307],"<",["T_WHITESPACE"," ",307],["T_VARIABLE","$n",307],")",["T_WHITESPACE"," ",307],"{",["T_WHITESPACE","\n                ",307],["T_IF","if",308],["T_WHITESPACE"," ",308],"(",["T_VARIABLE","$path",308],"[",["T_VARIABLE","$i",308],"]",["T_WHITESPACE"," ",308],["T_IS_EQUAL","==",308],["T_WHITESPACE"," ",308],["T_CONSTANT_ENCAPSED_STRING","'\/'",308],")",["T_WHITESPACE"," ",308],"{",["T_WHITESPACE","\n                    ",308],["T_INC","++",309],["T_VARIABLE","$i",309],";",["T_WHITESPACE","\n                    ",309],["T_WHILE","while",310],["T_WHITESPACE"," ",310],"(",["T_VARIABLE","$i",310],["T_WHITESPACE"," ",310],"<",["T_WHITESPACE"," ",310],["T_VARIABLE","$n",310],["T_WHITESPACE"," ",310],["T_BOOLEAN_AND","&&",310],["T_WHITESPACE"," ",310],["T_VARIABLE","$path",310],"[",["T_VARIABLE","$i",310],"]",["T_WHITESPACE"," ",310],["T_IS_EQUAL","==",310],["T_WHITESPACE"," ",310],["T_CONSTANT_ENCAPSED_STRING","'\/'",310],")",["T_WHITESPACE"," ",310],"{",["T_WHITESPACE","\n                        ",310],["T_INC","++",311],["T_VARIABLE","$i",311],";",["T_WHITESPACE","\n                    ",311],"}",["T_WHITESPACE","\n                    ",312],["T_IF","if",313],["T_WHITESPACE"," ",313],"(",["T_VARIABLE","$i",313],["T_WHITESPACE"," ",313],"<",["T_WHITESPACE"," ",313],["T_VARIABLE","$n",313],["T_WHITESPACE"," ",313],["T_BOOLEAN_AND","&&",313],["T_WHITESPACE"," ",313],["T_VARIABLE","$path",313],"[",["T_VARIABLE","$i",313],"]",["T_WHITESPACE"," ",313],["T_IS_EQUAL","==",313],["T_WHITESPACE"," ",313],["T_CONSTANT_ENCAPSED_STRING","'.'",313],")",["T_WHITESPACE"," ",313],"{",["T_WHITESPACE","\n                        ",313],["T_INC","++",314],["T_VARIABLE","$i",314],";",["T_WHITESPACE","\n                        ",314],["T_IF","if",315],["T_WHITESPACE"," ",315],"(",["T_VARIABLE","$i",315],["T_WHITESPACE"," ",315],"<",["T_WHITESPACE"," ",315],["T_VARIABLE","$n",315],["T_WHITESPACE"," ",315],["T_BOOLEAN_AND","&&",315],["T_WHITESPACE"," ",315],["T_VARIABLE","$path",315],"[",["T_VARIABLE","$i",315],"]",["T_WHITESPACE"," ",315],["T_IS_EQUAL","==",315],["T_WHITESPACE"," ",315],["T_CONSTANT_ENCAPSED_STRING","'.'",315],")",["T_WHITESPACE"," ",315],"{",["T_WHITESPACE","\n                            ",315],["T_INC","++",316],["T_VARIABLE","$i",316],";",["T_WHITESPACE","\n                            ",316],["T_IF","if",317],["T_WHITESPACE"," ",317],"(",["T_VARIABLE","$i",317],["T_WHITESPACE"," ",317],["T_IS_EQUAL","==",317],["T_WHITESPACE"," ",317],["T_VARIABLE","$n",317],["T_WHITESPACE"," ",317],["T_BOOLEAN_OR","||",317],["T_WHITESPACE"," ",317],["T_VARIABLE","$path",317],"[",["T_VARIABLE","$i",317],"]",["T_WHITESPACE"," ",317],["T_IS_EQUAL","==",317],["T_WHITESPACE"," ",317],["T_CONSTANT_ENCAPSED_STRING","'\/'",317],")",["T_WHITESPACE"," ",317],"{",["T_WHITESPACE","\n                                ",317],["T_IF","if",318],["T_WHITESPACE"," ",318],"(","(",["T_VARIABLE","$pos",318],["T_WHITESPACE"," ",318],"=",["T_WHITESPACE"," ",318],["T_STRING","strrpos",318],"(",["T_VARIABLE","$res",318],",",["T_WHITESPACE"," ",318],["T_CONSTANT_ENCAPSED_STRING","'\/'",318],")",")",["T_WHITESPACE"," ",318],["T_IS_NOT_IDENTICAL","!==",318],["T_WHITESPACE"," ",318],["T_STRING","false",318],")",["T_WHITESPACE"," ",318],"{",["T_WHITESPACE","\n                                    ",318],["T_VARIABLE","$res",319],["T_WHITESPACE"," ",319],"=",["T_WHITESPACE"," ",319],["T_STRING","substr",319],"(",["T_VARIABLE","$res",319],",",["T_WHITESPACE"," ",319],["T_LNUMBER","0",319],",",["T_WHITESPACE"," ",319],["T_VARIABLE","$pos",319],")",";",["T_WHITESPACE","\n                                ",319],"}",["T_WHITESPACE","\n                            ",320],"}",["T_WHITESPACE"," ",321],["T_ELSE","else",321],["T_WHITESPACE"," ",321],"{",["T_WHITESPACE","\n                                    ",321],["T_VARIABLE","$res",322],["T_WHITESPACE"," ",322],["T_CONCAT_EQUAL",".=",322],["T_WHITESPACE"," ",322],["T_CONSTANT_ENCAPSED_STRING","'\/..'",322],";",["T_WHITESPACE","\n                            ",322],"}",["T_WHITESPACE","\n                        ",323],"}",["T_WHITESPACE"," ",324],["T_ELSE","else",324],["T_WHITESPACE"," ",324],["T_IF","if",324],["T_WHITESPACE"," ",324],"(",["T_VARIABLE","$i",324],["T_WHITESPACE"," ",324],["T_IS_NOT_EQUAL","!=",324],["T_WHITESPACE"," ",324],["T_VARIABLE","$n",324],["T_WHITESPACE"," ",324],["T_BOOLEAN_AND","&&",324],["T_WHITESPACE"," ",324],["T_VARIABLE","$path",324],"[",["T_VARIABLE","$i",324],"]",["T_WHITESPACE"," ",324],["T_IS_NOT_EQUAL","!=",324],["T_WHITESPACE"," ",324],["T_CONSTANT_ENCAPSED_STRING","'\/'",324],")",["T_WHITESPACE"," ",324],"{",["T_WHITESPACE","\n                            ",324],["T_VARIABLE","$res",325],["T_WHITESPACE"," ",325],["T_CONCAT_EQUAL",".=",325],["T_WHITESPACE"," ",325],["T_CONSTANT_ENCAPSED_STRING","'\/.'",325],";",["T_WHITESPACE","\n                        ",325],"}",["T_WHITESPACE","\n                    ",326],"}",["T_WHITESPACE"," ",327],["T_ELSE","else",327],["T_WHITESPACE"," ",327],"{",["T_WHITESPACE","\n                        ",327],["T_VARIABLE","$res",328],["T_WHITESPACE"," ",328],["T_CONCAT_EQUAL",".=",328],["T_WHITESPACE"," ",328],["T_CONSTANT_ENCAPSED_STRING","'\/'",328],";",["T_WHITESPACE","\n                    ",328],"}",["T_WHITESPACE","\n                ",329],"}",["T_WHITESPACE"," ",330],["T_ELSE","else",330],["T_WHITESPACE"," ",330],"{",["T_WHITESPACE","\n                    ",330],["T_VARIABLE","$res",331],["T_WHITESPACE"," ",331],["T_CONCAT_EQUAL",".=",331],["T_WHITESPACE"," ",331],["T_VARIABLE","$path",331],"[",["T_VARIABLE","$i",331],["T_INC","++",331],"]",";",["T_WHITESPACE","\n                ",331],"}",["T_WHITESPACE","\n            ",332],"}",["T_WHITESPACE","\n            ",333],["T_VARIABLE","$path",334],["T_WHITESPACE"," ",334],"=",["T_WHITESPACE"," ",334],["T_VARIABLE","$res",334],";",["T_WHITESPACE","\n        ",334],"}",["T_WHITESPACE","\n\n        ",335],["T_COMMENT","\/\/ RFC 3986,6.2.3.  Scheme-Based Normalization\n",337],["T_WHITESPACE","        ",338],["T_IF","if",338],["T_WHITESPACE"," ",338],"(",["T_VARIABLE","$scheme",338],["T_WHITESPACE"," ",338],["T_IS_EQUAL","==",338],["T_WHITESPACE"," ",338],["T_CONSTANT_ENCAPSED_STRING","'http'",338],")",["T_WHITESPACE"," ",338],"{",["T_WHITESPACE","\n            ",338],["T_IF","if",339],["T_WHITESPACE"," ",339],"(",["T_VARIABLE","$port",339],["T_WHITESPACE"," ",339],["T_IS_EQUAL","==",339],["T_WHITESPACE"," ",339],["T_LNUMBER","80",339],")",["T_WHITESPACE"," ",339],"{",["T_WHITESPACE","\n                ",339],["T_VARIABLE","$port",340],["T_WHITESPACE"," ",340],"=",["T_WHITESPACE"," ",340],["T_CONSTANT_ENCAPSED_STRING","''",340],";",["T_WHITESPACE","\n            ",340],"}",["T_WHITESPACE","\n        ",341],"}",["T_WHITESPACE"," ",342],["T_ELSE","else",342],["T_WHITESPACE"," ",342],["T_IF","if",342],["T_WHITESPACE"," ",342],"(",["T_VARIABLE","$scheme",342],["T_WHITESPACE"," ",342],["T_IS_EQUAL","==",342],["T_WHITESPACE"," ",342],["T_CONSTANT_ENCAPSED_STRING","'https'",342],")",["T_WHITESPACE"," ",342],"{",["T_WHITESPACE","\n            ",342],["T_IF","if",343],["T_WHITESPACE"," ",343],"(",["T_VARIABLE","$port",343],["T_WHITESPACE"," ",343],["T_IS_EQUAL","==",343],["T_WHITESPACE"," ",343],["T_LNUMBER","443",343],")",["T_WHITESPACE"," ",343],"{",["T_WHITESPACE","\n                ",343],["T_VARIABLE","$port",344],["T_WHITESPACE"," ",344],"=",["T_WHITESPACE"," ",344],["T_CONSTANT_ENCAPSED_STRING","''",344],";",["T_WHITESPACE","\n            ",344],"}",["T_WHITESPACE","\n        ",345],"}",["T_WHITESPACE","\n        ",346],["T_IF","if",347],["T_WHITESPACE"," ",347],"(",["T_EMPTY","empty",347],"(",["T_VARIABLE","$path",347],")",")",["T_WHITESPACE"," ",347],"{",["T_WHITESPACE","\n            ",347],["T_VARIABLE","$path",348],["T_WHITESPACE"," ",348],"=",["T_WHITESPACE"," ",348],["T_CONSTANT_ENCAPSED_STRING","'\/'",348],";",["T_WHITESPACE","\n        ",348],"}",["T_WHITESPACE","\n\n        ",349],["T_VARIABLE","$id",351],["T_WHITESPACE"," ",351],"=",["T_WHITESPACE"," ",351],["T_VARIABLE","$scheme",351],["T_WHITESPACE","\n            ",351],".",["T_WHITESPACE"," ",352],["T_CONSTANT_ENCAPSED_STRING","':\/\/'",352],["T_WHITESPACE","\n            ",352],".",["T_WHITESPACE"," ",353],["T_VARIABLE","$auth",353],["T_WHITESPACE","\n            ",353],".",["T_WHITESPACE"," ",354],["T_VARIABLE","$host",354],["T_WHITESPACE","\n            ",354],".",["T_WHITESPACE"," ",355],"(",["T_EMPTY","empty",355],"(",["T_VARIABLE","$port",355],")",["T_WHITESPACE"," ",355],"?",["T_WHITESPACE"," ",355],["T_CONSTANT_ENCAPSED_STRING","''",355],["T_WHITESPACE"," ",355],":",["T_WHITESPACE"," ",355],"(",["T_CONSTANT_ENCAPSED_STRING","':'",355],["T_WHITESPACE"," ",355],".",["T_WHITESPACE"," ",355],["T_VARIABLE","$port",355],")",")",["T_WHITESPACE","\n            ",355],".",["T_WHITESPACE"," ",356],["T_VARIABLE","$path",356],["T_WHITESPACE","\n            ",356],".",["T_WHITESPACE"," ",357],["T_VARIABLE","$query",357],["T_WHITESPACE","\n            ",357],".",["T_WHITESPACE"," ",358],["T_VARIABLE","$fragment",358],";",["T_WHITESPACE","\n        ",358],["T_RETURN","return",359],["T_WHITESPACE"," ",359],["T_STRING","true",359],";",["T_WHITESPACE","\n    ",359],"}",["T_WHITESPACE","\n\n    ",360],["T_DOC_COMMENT","\/**\n     * Normalizes OpenID identifier that can be URL or XRI name.\n     * Returns true on success and false of failure.\n     *\n     * Normalization is performed according to the following rules:\n     * 1. If the user's input starts with one of the \"xri:\/\/\", \"xri:\/\/$ip*\",\n     *    or \"xri:\/\/$dns*\" prefixes, they MUST be stripped off, so that XRIs\n     *    are used in the canonical form, and URI-authority XRIs are further\n     *    considered URL identifiers.\n     * 2. If the first character of the resulting string is an XRI Global\n     *    Context Symbol (\"=\", \"@\", \"+\", \"$\", \"!\"), then the input SHOULD be\n     *    treated as an XRI.\n     * 3. Otherwise, the input SHOULD be treated as an http URL; if it does\n     *    not include a \"http\" or \"https\" scheme, the Identifier MUST be\n     *    prefixed with the string \"http:\/\/\".\n     * 4. URL identifiers MUST then be further normalized by both following\n     *    redirects when retrieving their content and finally applying the\n     *    rules in Section 6 of [RFC3986] to the final destination URL.\n     * @param string &$id identifier to be normalized\n     * @return bool\n     *\/",362],["T_WHITESPACE","\n    ",382],["T_STATIC","static",383],["T_WHITESPACE"," ",383],["T_PUBLIC","public",383],["T_WHITESPACE"," ",383],["T_FUNCTION","function",383],["T_WHITESPACE"," ",383],["T_STRING","normalize",383],"(","&",["T_VARIABLE","$id",383],")",["T_WHITESPACE","\n    ",383],"{",["T_WHITESPACE","\n        ",384],["T_VARIABLE","$id",385],["T_WHITESPACE"," ",385],"=",["T_WHITESPACE"," ",385],["T_STRING","trim",385],"(",["T_VARIABLE","$id",385],")",";",["T_WHITESPACE","\n        ",385],["T_IF","if",386],["T_WHITESPACE"," ",386],"(",["T_STRING","strlen",386],"(",["T_VARIABLE","$id",386],")",["T_WHITESPACE"," ",386],["T_IS_IDENTICAL","===",386],["T_WHITESPACE"," ",386],["T_LNUMBER","0",386],")",["T_WHITESPACE"," ",386],"{",["T_WHITESPACE","\n            ",386],["T_RETURN","return",387],["T_WHITESPACE"," ",387],["T_STRING","true",387],";",["T_WHITESPACE","\n        ",387],"}",["T_WHITESPACE","\n\n        ",388],["T_COMMENT","\/\/ 7.2.1\n",390],["T_WHITESPACE","        ",391],["T_IF","if",391],["T_WHITESPACE"," ",391],"(",["T_STRING","strpos",391],"(",["T_VARIABLE","$id",391],",",["T_WHITESPACE"," ",391],["T_CONSTANT_ENCAPSED_STRING","'xri:\/\/$ip*'",391],")",["T_WHITESPACE"," ",391],["T_IS_IDENTICAL","===",391],["T_WHITESPACE"," ",391],["T_LNUMBER","0",391],")",["T_WHITESPACE"," ",391],"{",["T_WHITESPACE","\n            ",391],["T_VARIABLE","$id",392],["T_WHITESPACE"," ",392],"=",["T_WHITESPACE"," ",392],["T_STRING","substr",392],"(",["T_VARIABLE","$id",392],",",["T_WHITESPACE"," ",392],["T_STRING","strlen",392],"(",["T_CONSTANT_ENCAPSED_STRING","'xri:\/\/$ip*'",392],")",")",";",["T_WHITESPACE","\n        ",392],"}",["T_WHITESPACE"," ",393],["T_ELSE","else",393],["T_WHITESPACE"," ",393],["T_IF","if",393],["T_WHITESPACE"," ",393],"(",["T_STRING","strpos",393],"(",["T_VARIABLE","$id",393],",",["T_WHITESPACE"," ",393],["T_CONSTANT_ENCAPSED_STRING","'xri:\/\/$dns*'",393],")",["T_WHITESPACE"," ",393],["T_IS_IDENTICAL","===",393],["T_WHITESPACE"," ",393],["T_LNUMBER","0",393],")",["T_WHITESPACE"," ",393],"{",["T_WHITESPACE","\n            ",393],["T_VARIABLE","$id",394],["T_WHITESPACE"," ",394],"=",["T_WHITESPACE"," ",394],["T_STRING","substr",394],"(",["T_VARIABLE","$id",394],",",["T_WHITESPACE"," ",394],["T_STRING","strlen",394],"(",["T_CONSTANT_ENCAPSED_STRING","'xri:\/\/$dns*'",394],")",")",";",["T_WHITESPACE","\n        ",394],"}",["T_WHITESPACE"," ",395],["T_ELSE","else",395],["T_WHITESPACE"," ",395],["T_IF","if",395],["T_WHITESPACE"," ",395],"(",["T_STRING","strpos",395],"(",["T_VARIABLE","$id",395],",",["T_WHITESPACE"," ",395],["T_CONSTANT_ENCAPSED_STRING","'xri:\/\/'",395],")",["T_WHITESPACE"," ",395],["T_IS_IDENTICAL","===",395],["T_WHITESPACE"," ",395],["T_LNUMBER","0",395],")",["T_WHITESPACE"," ",395],"{",["T_WHITESPACE","\n            ",395],["T_VARIABLE","$id",396],["T_WHITESPACE"," ",396],"=",["T_WHITESPACE"," ",396],["T_STRING","substr",396],"(",["T_VARIABLE","$id",396],",",["T_WHITESPACE"," ",396],["T_STRING","strlen",396],"(",["T_CONSTANT_ENCAPSED_STRING","'xri:\/\/'",396],")",")",";",["T_WHITESPACE","\n        ",396],"}",["T_WHITESPACE","\n\n        ",397],["T_COMMENT","\/\/ 7.2.2\n",399],["T_WHITESPACE","        ",400],["T_IF","if",400],["T_WHITESPACE"," ",400],"(",["T_VARIABLE","$id",400],"[",["T_LNUMBER","0",400],"]",["T_WHITESPACE"," ",400],["T_IS_EQUAL","==",400],["T_WHITESPACE"," ",400],["T_CONSTANT_ENCAPSED_STRING","'='",400],["T_WHITESPACE"," ",400],["T_BOOLEAN_OR","||",400],["T_WHITESPACE","\n            ",400],["T_VARIABLE","$id",401],"[",["T_LNUMBER","0",401],"]",["T_WHITESPACE"," ",401],["T_IS_EQUAL","==",401],["T_WHITESPACE"," ",401],["T_CONSTANT_ENCAPSED_STRING","'@'",401],["T_WHITESPACE"," ",401],["T_BOOLEAN_OR","||",401],["T_WHITESPACE","\n            ",401],["T_VARIABLE","$id",402],"[",["T_LNUMBER","0",402],"]",["T_WHITESPACE"," ",402],["T_IS_EQUAL","==",402],["T_WHITESPACE"," ",402],["T_CONSTANT_ENCAPSED_STRING","'+'",402],["T_WHITESPACE"," ",402],["T_BOOLEAN_OR","||",402],["T_WHITESPACE","\n            ",402],["T_VARIABLE","$id",403],"[",["T_LNUMBER","0",403],"]",["T_WHITESPACE"," ",403],["T_IS_EQUAL","==",403],["T_WHITESPACE"," ",403],["T_CONSTANT_ENCAPSED_STRING","'$'",403],["T_WHITESPACE"," ",403],["T_BOOLEAN_OR","||",403],["T_WHITESPACE","\n            ",403],["T_VARIABLE","$id",404],"[",["T_LNUMBER","0",404],"]",["T_WHITESPACE"," ",404],["T_IS_EQUAL","==",404],["T_WHITESPACE"," ",404],["T_CONSTANT_ENCAPSED_STRING","'!'",404],")",["T_WHITESPACE"," ",404],"{",["T_WHITESPACE","\n            ",404],["T_RETURN","return",405],["T_WHITESPACE"," ",405],["T_STRING","true",405],";",["T_WHITESPACE","\n        ",405],"}",["T_WHITESPACE","\n\n        ",406],["T_COMMENT","\/\/ 7.2.3\n",408],["T_WHITESPACE","        ",409],["T_IF","if",409],["T_WHITESPACE"," ",409],"(",["T_STRING","strpos",409],"(",["T_VARIABLE","$id",409],",",["T_WHITESPACE"," ",409],["T_CONSTANT_ENCAPSED_STRING","\":\/\/\"",409],")",["T_WHITESPACE"," ",409],["T_IS_IDENTICAL","===",409],["T_WHITESPACE"," ",409],["T_STRING","false",409],")",["T_WHITESPACE"," ",409],"{",["T_WHITESPACE","\n            ",409],["T_VARIABLE","$id",410],["T_WHITESPACE"," ",410],"=",["T_WHITESPACE"," ",410],["T_CONSTANT_ENCAPSED_STRING","'http:\/\/'",410],["T_WHITESPACE"," ",410],".",["T_WHITESPACE"," ",410],["T_VARIABLE","$id",410],";",["T_WHITESPACE","\n        ",410],"}",["T_WHITESPACE","\n\n        ",411],["T_COMMENT","\/\/ 7.2.4\n",413],["T_WHITESPACE","        ",414],["T_RETURN","return",414],["T_WHITESPACE"," ",414],["T_STRING","self",414],["T_DOUBLE_COLON","::",414],["T_STRING","normalizeURL",414],"(",["T_VARIABLE","$id",414],")",";",["T_WHITESPACE","\n    ",414],"}",["T_WHITESPACE","\n\n    ",415],["T_DOC_COMMENT","\/**\n     * Performs a HTTP redirection to specified URL with additional data.\n     * It may generate redirected request using GET or POST HTTP method.\n     * The function never returns.\n     *\n     * @param string $url URL to redirect to\n     * @param array $params additional variable\/value pairs to send\n     * @param Zend_Controller_Response_Abstract $response\n     * @param string $method redirection method ('GET' or 'POST')\n     *\/",417],["T_WHITESPACE","\n    ",426],["T_STATIC","static",427],["T_WHITESPACE"," ",427],["T_PUBLIC","public",427],["T_WHITESPACE"," ",427],["T_FUNCTION","function",427],["T_WHITESPACE"," ",427],["T_STRING","redirect",427],"(",["T_VARIABLE","$url",427],",",["T_WHITESPACE"," ",427],["T_VARIABLE","$params",427],["T_WHITESPACE"," ",427],"=",["T_WHITESPACE"," ",427],["T_STRING","null",427],",",["T_WHITESPACE","\n        ",427],["T_STRING","Zend_Controller_Response_Abstract",428],["T_WHITESPACE"," ",428],["T_VARIABLE","$response",428],["T_WHITESPACE"," ",428],"=",["T_WHITESPACE"," ",428],["T_STRING","null",428],",",["T_WHITESPACE"," ",428],["T_VARIABLE","$method",428],["T_WHITESPACE"," ",428],"=",["T_WHITESPACE"," ",428],["T_CONSTANT_ENCAPSED_STRING","'GET'",428],")",["T_WHITESPACE","\n    ",428],"{",["T_WHITESPACE","\n        ",429],["T_VARIABLE","$url",430],["T_WHITESPACE"," ",430],"=",["T_WHITESPACE"," ",430],["T_STRING","Zend_OpenId",430],["T_DOUBLE_COLON","::",430],["T_STRING","absoluteUrl",430],"(",["T_VARIABLE","$url",430],")",";",["T_WHITESPACE","\n        ",430],["T_VARIABLE","$body",431],["T_WHITESPACE"," ",431],"=",["T_WHITESPACE"," ",431],["T_CONSTANT_ENCAPSED_STRING","\"\"",431],";",["T_WHITESPACE","\n        ",431],["T_IF","if",432],["T_WHITESPACE"," ",432],"(",["T_STRING","null",432],["T_WHITESPACE"," ",432],["T_IS_IDENTICAL","===",432],["T_WHITESPACE"," ",432],["T_VARIABLE","$response",432],")",["T_WHITESPACE"," ",432],"{",["T_WHITESPACE","\n            ",432],["T_COMMENT","#require_once \"Zend\/Controller\/Response\/Http.php\";\n",433],["T_WHITESPACE","            ",434],["T_VARIABLE","$response",434],["T_WHITESPACE"," ",434],"=",["T_WHITESPACE"," ",434],["T_NEW","new",434],["T_WHITESPACE"," ",434],["T_STRING","Zend_Controller_Response_Http",434],"(",")",";",["T_WHITESPACE","\n        ",434],"}",["T_WHITESPACE","\n\n        ",435],["T_IF","if",437],["T_WHITESPACE"," ",437],"(",["T_VARIABLE","$method",437],["T_WHITESPACE"," ",437],["T_IS_EQUAL","==",437],["T_WHITESPACE"," ",437],["T_CONSTANT_ENCAPSED_STRING","'POST'",437],")",["T_WHITESPACE"," ",437],"{",["T_WHITESPACE","\n            ",437],["T_VARIABLE","$body",438],["T_WHITESPACE"," ",438],"=",["T_WHITESPACE"," ",438],["T_CONSTANT_ENCAPSED_STRING","\"<html><body onLoad=\\\"document.forms[0].submit();\\\">\\n\"",438],";",["T_WHITESPACE","\n            ",438],["T_VARIABLE","$body",439],["T_WHITESPACE"," ",439],["T_CONCAT_EQUAL",".=",439],["T_WHITESPACE"," ",439],"\"",["T_ENCAPSED_AND_WHITESPACE","<form method=\\\"POST\\\" action=\\\"",439],["T_VARIABLE","$url",439],["T_ENCAPSED_AND_WHITESPACE","\\\">\\n",439],"\"",";",["T_WHITESPACE","\n            ",439],["T_IF","if",440],["T_WHITESPACE"," ",440],"(",["T_STRING","is_array",440],"(",["T_VARIABLE","$params",440],")",["T_WHITESPACE"," ",440],["T_BOOLEAN_AND","&&",440],["T_WHITESPACE"," ",440],["T_STRING","count",440],"(",["T_VARIABLE","$params",440],")",["T_WHITESPACE"," ",440],">",["T_WHITESPACE"," ",440],["T_LNUMBER","0",440],")",["T_WHITESPACE"," ",440],"{",["T_WHITESPACE","\n                ",440],["T_FOREACH","foreach",441],"(",["T_VARIABLE","$params",441],["T_WHITESPACE"," ",441],["T_AS","as",441],["T_WHITESPACE"," ",441],["T_VARIABLE","$key",441],["T_WHITESPACE"," ",441],["T_DOUBLE_ARROW","=>",441],["T_WHITESPACE"," ",441],["T_VARIABLE","$value",441],")",["T_WHITESPACE"," ",441],"{",["T_WHITESPACE","\n                    ",441],["T_VARIABLE","$body",442],["T_WHITESPACE"," ",442],["T_CONCAT_EQUAL",".=",442],["T_WHITESPACE"," ",442],["T_CONSTANT_ENCAPSED_STRING","'<input type=\"hidden\" name=\"'",442],["T_WHITESPACE"," ",442],".",["T_WHITESPACE"," ",442],["T_VARIABLE","$key",442],["T_WHITESPACE"," ",442],".",["T_WHITESPACE"," ",442],["T_CONSTANT_ENCAPSED_STRING","'\" value=\"'",442],["T_WHITESPACE"," ",442],".",["T_WHITESPACE"," ",442],["T_VARIABLE","$value",442],["T_WHITESPACE"," ",442],".",["T_WHITESPACE"," ",442],["T_CONSTANT_ENCAPSED_STRING","\"\\\">\\n\"",442],";",["T_WHITESPACE","\n                ",442],"}",["T_WHITESPACE","\n            ",443],"}",["T_WHITESPACE","\n            ",444],["T_VARIABLE","$body",445],["T_WHITESPACE"," ",445],["T_CONCAT_EQUAL",".=",445],["T_WHITESPACE"," ",445],["T_CONSTANT_ENCAPSED_STRING","\"<input type=\\\"submit\\\" value=\\\"Continue OpenID transaction\\\">\\n\"",445],";",["T_WHITESPACE","\n            ",445],["T_VARIABLE","$body",446],["T_WHITESPACE"," ",446],["T_CONCAT_EQUAL",".=",446],["T_WHITESPACE"," ",446],["T_CONSTANT_ENCAPSED_STRING","\"<\/form><\/body><\/html>\\n\"",446],";",["T_WHITESPACE","\n        ",446],"}",["T_WHITESPACE"," ",447],["T_ELSE","else",447],["T_WHITESPACE"," ",447],["T_IF","if",447],["T_WHITESPACE"," ",447],"(",["T_STRING","is_array",447],"(",["T_VARIABLE","$params",447],")",["T_WHITESPACE"," ",447],["T_BOOLEAN_AND","&&",447],["T_WHITESPACE"," ",447],["T_STRING","count",447],"(",["T_VARIABLE","$params",447],")",["T_WHITESPACE"," ",447],">",["T_WHITESPACE"," ",447],["T_LNUMBER","0",447],")",["T_WHITESPACE"," ",447],"{",["T_WHITESPACE","\n            ",447],["T_IF","if",448],["T_WHITESPACE"," ",448],"(",["T_STRING","strpos",448],"(",["T_VARIABLE","$url",448],",",["T_WHITESPACE"," ",448],["T_CONSTANT_ENCAPSED_STRING","'?'",448],")",["T_WHITESPACE"," ",448],["T_IS_IDENTICAL","===",448],["T_WHITESPACE"," ",448],["T_STRING","false",448],")",["T_WHITESPACE"," ",448],"{",["T_WHITESPACE","\n                ",448],["T_VARIABLE","$url",449],["T_WHITESPACE"," ",449],["T_CONCAT_EQUAL",".=",449],["T_WHITESPACE"," ",449],["T_CONSTANT_ENCAPSED_STRING","'?'",449],["T_WHITESPACE"," ",449],".",["T_WHITESPACE"," ",449],["T_STRING","self",449],["T_DOUBLE_COLON","::",449],["T_STRING","paramsToQuery",449],"(",["T_VARIABLE","$params",449],")",";",["T_WHITESPACE","\n            ",449],"}",["T_WHITESPACE"," ",450],["T_ELSE","else",450],["T_WHITESPACE"," ",450],"{",["T_WHITESPACE","\n                ",450],["T_VARIABLE","$url",451],["T_WHITESPACE"," ",451],["T_CONCAT_EQUAL",".=",451],["T_WHITESPACE"," ",451],["T_CONSTANT_ENCAPSED_STRING","'&'",451],["T_WHITESPACE"," ",451],".",["T_WHITESPACE"," ",451],["T_STRING","self",451],["T_DOUBLE_COLON","::",451],["T_STRING","paramsToQuery",451],"(",["T_VARIABLE","$params",451],")",";",["T_WHITESPACE","\n            ",451],"}",["T_WHITESPACE","\n        ",452],"}",["T_WHITESPACE","\n        ",453],["T_IF","if",454],["T_WHITESPACE"," ",454],"(","!",["T_EMPTY","empty",454],"(",["T_VARIABLE","$body",454],")",")",["T_WHITESPACE"," ",454],"{",["T_WHITESPACE","\n            ",454],["T_VARIABLE","$response",455],["T_OBJECT_OPERATOR","->",455],["T_STRING","setBody",455],"(",["T_VARIABLE","$body",455],")",";",["T_WHITESPACE","\n        ",455],"}",["T_WHITESPACE"," ",456],["T_ELSE","else",456],["T_WHITESPACE"," ",456],["T_IF","if",456],["T_WHITESPACE"," ",456],"(","!",["T_VARIABLE","$response",456],["T_OBJECT_OPERATOR","->",456],["T_STRING","canSendHeaders",456],"(",")",")",["T_WHITESPACE"," ",456],"{",["T_WHITESPACE","\n            ",456],["T_VARIABLE","$response",457],["T_OBJECT_OPERATOR","->",457],["T_STRING","setBody",457],"(",["T_CONSTANT_ENCAPSED_STRING","\"<script language=\\\"JavaScript\\\"\"",457],["T_WHITESPACE"," ",457],".",["T_WHITESPACE","\n                 ",457],"\"",["T_ENCAPSED_AND_WHITESPACE"," type=\\\"text\/javascript\\\">window.location='",458],["T_VARIABLE","$url",458],["T_ENCAPSED_AND_WHITESPACE","';",458],"\"",["T_WHITESPACE"," ",458],".",["T_WHITESPACE","\n                 ",458],["T_CONSTANT_ENCAPSED_STRING","\"<\/script>\"",459],")",";",["T_WHITESPACE","\n        ",459],"}",["T_WHITESPACE"," ",460],["T_ELSE","else",460],["T_WHITESPACE"," ",460],"{",["T_WHITESPACE","\n            ",460],["T_VARIABLE","$response",461],["T_OBJECT_OPERATOR","->",461],["T_STRING","setRedirect",461],"(",["T_VARIABLE","$url",461],")",";",["T_WHITESPACE","\n        ",461],"}",["T_WHITESPACE","\n        ",462],["T_VARIABLE","$response",463],["T_OBJECT_OPERATOR","->",463],["T_STRING","sendResponse",463],"(",")",";",["T_WHITESPACE","\n        ",463],["T_IF","if",464],["T_WHITESPACE"," ",464],"(",["T_STRING","self",464],["T_DOUBLE_COLON","::",464],["T_VARIABLE","$exitOnRedirect",464],")",["T_WHITESPACE"," ",464],"{",["T_WHITESPACE","\n            ",464],["T_EXIT","exit",465],"(",")",";",["T_WHITESPACE","\n        ",465],"}",["T_WHITESPACE","\n    ",466],"}",["T_WHITESPACE","\n\n    ",467],["T_DOC_COMMENT","\/**\n     * Produces string of random byte of given length.\n     *\n     * @param integer $len length of requested string\n     * @return string RAW random binary string\n     *\/",469],["T_WHITESPACE","\n    ",474],["T_STATIC","static",475],["T_WHITESPACE"," ",475],["T_PUBLIC","public",475],["T_WHITESPACE"," ",475],["T_FUNCTION","function",475],["T_WHITESPACE"," ",475],["T_STRING","randomBytes",475],"(",["T_VARIABLE","$len",475],")",["T_WHITESPACE","\n    ",475],"{",["T_WHITESPACE","\n        ",476],["T_VARIABLE","$key",477],["T_WHITESPACE"," ",477],"=",["T_WHITESPACE"," ",477],["T_CONSTANT_ENCAPSED_STRING","''",477],";",["T_WHITESPACE","\n        ",477],["T_FOR","for",478],"(",["T_VARIABLE","$i",478],"=",["T_LNUMBER","0",478],";",["T_WHITESPACE"," ",478],["T_VARIABLE","$i",478],["T_WHITESPACE"," ",478],"<",["T_WHITESPACE"," ",478],["T_VARIABLE","$len",478],";",["T_WHITESPACE"," ",478],["T_VARIABLE","$i",478],["T_INC","++",478],")",["T_WHITESPACE"," ",478],"{",["T_WHITESPACE","\n            ",478],["T_VARIABLE","$key",479],["T_WHITESPACE"," ",479],["T_CONCAT_EQUAL",".=",479],["T_WHITESPACE"," ",479],["T_STRING","chr",479],"(",["T_STRING","mt_rand",479],"(",["T_LNUMBER","0",479],",",["T_WHITESPACE"," ",479],["T_LNUMBER","255",479],")",")",";",["T_WHITESPACE","\n        ",479],"}",["T_WHITESPACE","\n        ",480],["T_RETURN","return",481],["T_WHITESPACE"," ",481],["T_VARIABLE","$key",481],";",["T_WHITESPACE","\n    ",481],"}",["T_WHITESPACE","\n\n    ",482],["T_DOC_COMMENT","\/**\n     * Generates a hash value (message digest) according to given algorithm.\n     * It returns RAW binary string.\n     *\n     * This is a wrapper function that uses one of available internal function\n     * dependent on given PHP configuration. It may use various functions from\n     *  ext\/openssl, ext\/hash, ext\/mhash or ext\/standard.\n     *\n     * @param string $func digest algorithm\n     * @param string $data data to sign\n     * @return string RAW digital signature\n     * @throws Zend_OpenId_Exception\n     *\/",484],["T_WHITESPACE","\n    ",496],["T_STATIC","static",497],["T_WHITESPACE"," ",497],["T_PUBLIC","public",497],["T_WHITESPACE"," ",497],["T_FUNCTION","function",497],["T_WHITESPACE"," ",497],["T_STRING","digest",497],"(",["T_VARIABLE","$func",497],",",["T_WHITESPACE"," ",497],["T_VARIABLE","$data",497],")",["T_WHITESPACE","\n    ",497],"{",["T_WHITESPACE","\n        ",498],["T_IF","if",499],["T_WHITESPACE"," ",499],"(",["T_STRING","function_exists",499],"(",["T_CONSTANT_ENCAPSED_STRING","'openssl_digest'",499],")",")",["T_WHITESPACE"," ",499],"{",["T_WHITESPACE","\n            ",499],["T_RETURN","return",500],["T_WHITESPACE"," ",500],["T_STRING","openssl_digest",500],"(",["T_VARIABLE","$data",500],",",["T_WHITESPACE"," ",500],["T_VARIABLE","$func",500],",",["T_WHITESPACE"," ",500],["T_STRING","true",500],")",";",["T_WHITESPACE","\n        ",500],"}",["T_WHITESPACE"," ",501],["T_ELSE","else",501],["T_WHITESPACE"," ",501],["T_IF","if",501],["T_WHITESPACE"," ",501],"(",["T_STRING","function_exists",501],"(",["T_CONSTANT_ENCAPSED_STRING","'hash'",501],")",")",["T_WHITESPACE"," ",501],"{",["T_WHITESPACE","\n            ",501],["T_RETURN","return",502],["T_WHITESPACE"," ",502],["T_STRING","hash",502],"(",["T_VARIABLE","$func",502],",",["T_WHITESPACE"," ",502],["T_VARIABLE","$data",502],",",["T_WHITESPACE"," ",502],["T_STRING","true",502],")",";",["T_WHITESPACE","\n        ",502],"}",["T_WHITESPACE"," ",503],["T_ELSE","else",503],["T_WHITESPACE"," ",503],["T_IF","if",503],["T_WHITESPACE"," ",503],"(",["T_VARIABLE","$func",503],["T_WHITESPACE"," ",503],["T_IS_IDENTICAL","===",503],["T_WHITESPACE"," ",503],["T_CONSTANT_ENCAPSED_STRING","'sha1'",503],")",["T_WHITESPACE"," ",503],"{",["T_WHITESPACE","\n            ",503],["T_RETURN","return",504],["T_WHITESPACE"," ",504],["T_STRING","sha1",504],"(",["T_VARIABLE","$data",504],",",["T_WHITESPACE"," ",504],["T_STRING","true",504],")",";",["T_WHITESPACE","\n        ",504],"}",["T_WHITESPACE"," ",505],["T_ELSE","else",505],["T_WHITESPACE"," ",505],["T_IF","if",505],["T_WHITESPACE"," ",505],"(",["T_VARIABLE","$func",505],["T_WHITESPACE"," ",505],["T_IS_IDENTICAL","===",505],["T_WHITESPACE"," ",505],["T_CONSTANT_ENCAPSED_STRING","'sha256'",505],")",["T_WHITESPACE"," ",505],"{",["T_WHITESPACE","\n            ",505],["T_IF","if",506],["T_WHITESPACE"," ",506],"(",["T_STRING","function_exists",506],"(",["T_CONSTANT_ENCAPSED_STRING","'mhash'",506],")",")",["T_WHITESPACE"," ",506],"{",["T_WHITESPACE","\n                ",506],["T_RETURN","return",507],["T_WHITESPACE"," ",507],["T_STRING","mhash",507],"(",["T_STRING","MHASH_SHA256",507],["T_WHITESPACE"," ",507],",",["T_WHITESPACE"," ",507],["T_VARIABLE","$data",507],")",";",["T_WHITESPACE","\n            ",507],"}",["T_WHITESPACE","\n        ",508],"}",["T_WHITESPACE","\n        ",509],["T_COMMENT","#require_once \"Zend\/OpenId\/Exception.php\";\n",510],["T_WHITESPACE","        ",511],["T_THROW","throw",511],["T_WHITESPACE"," ",511],["T_NEW","new",511],["T_WHITESPACE"," ",511],["T_STRING","Zend_OpenId_Exception",511],"(",["T_WHITESPACE","\n            ",511],["T_CONSTANT_ENCAPSED_STRING","'Unsupported digest algorithm \"'",512],["T_WHITESPACE"," ",512],".",["T_WHITESPACE"," ",512],["T_VARIABLE","$func",512],["T_WHITESPACE"," ",512],".",["T_WHITESPACE"," ",512],["T_CONSTANT_ENCAPSED_STRING","'\".'",512],",",["T_WHITESPACE","\n            ",512],["T_STRING","Zend_OpenId_Exception",513],["T_DOUBLE_COLON","::",513],["T_STRING","UNSUPPORTED_DIGEST",513],")",";",["T_WHITESPACE","\n    ",513],"}",["T_WHITESPACE","\n\n    ",514],["T_DOC_COMMENT","\/**\n     * Generates a keyed hash value using the HMAC method. It uses ext\/hash\n     * if available or user-level PHP implementation, that is not significantly\n     * slower.\n     *\n     * @param string $macFunc name of selected hashing algorithm (sha1, sha256)\n     * @param string $data data to sign\n     * @param string $secret shared secret key used for generating the HMAC\n     *  variant of the message digest\n     * @return string RAW HMAC value\n     *\/",516],["T_WHITESPACE","\n    ",526],["T_STATIC","static",527],["T_WHITESPACE"," ",527],["T_PUBLIC","public",527],["T_WHITESPACE"," ",527],["T_FUNCTION","function",527],["T_WHITESPACE"," ",527],["T_STRING","hashHmac",527],"(",["T_VARIABLE","$macFunc",527],",",["T_WHITESPACE"," ",527],["T_VARIABLE","$data",527],",",["T_WHITESPACE"," ",527],["T_VARIABLE","$secret",527],")",["T_WHITESPACE","\n    ",527],"{",["T_WHITESPACE","\n",528],["T_COMMENT","\/\/        #require_once \"Zend\/Crypt\/Hmac.php\";\n",529],["T_COMMENT","\/\/        return Zend_Crypt_Hmac::compute($secret, $macFunc, $data, Zend_Crypt_Hmac::BINARY);\n",530],["T_WHITESPACE","        ",531],["T_IF","if",531],["T_WHITESPACE"," ",531],"(",["T_STRING","function_exists",531],"(",["T_CONSTANT_ENCAPSED_STRING","'hash_hmac'",531],")",")",["T_WHITESPACE"," ",531],"{",["T_WHITESPACE","\n            ",531],["T_RETURN","return",532],["T_WHITESPACE"," ",532],["T_STRING","hash_hmac",532],"(",["T_VARIABLE","$macFunc",532],",",["T_WHITESPACE"," ",532],["T_VARIABLE","$data",532],",",["T_WHITESPACE"," ",532],["T_VARIABLE","$secret",532],",",["T_WHITESPACE"," ",532],["T_STRING","true",532],")",";",["T_WHITESPACE","\n        ",532],"}",["T_WHITESPACE"," ",533],["T_ELSE","else",533],["T_WHITESPACE"," ",533],"{",["T_WHITESPACE","\n            ",533],["T_IF","if",534],["T_WHITESPACE"," ",534],"(",["T_STRING","Zend_OpenId",534],["T_DOUBLE_COLON","::",534],["T_STRING","strlen",534],"(",["T_VARIABLE","$secret",534],")",["T_WHITESPACE"," ",534],">",["T_WHITESPACE"," ",534],["T_LNUMBER","64",534],")",["T_WHITESPACE"," ",534],"{",["T_WHITESPACE","\n                ",534],["T_VARIABLE","$secret",535],["T_WHITESPACE"," ",535],"=",["T_WHITESPACE"," ",535],["T_STRING","self",535],["T_DOUBLE_COLON","::",535],["T_STRING","digest",535],"(",["T_VARIABLE","$macFunc",535],",",["T_WHITESPACE"," ",535],["T_VARIABLE","$secret",535],")",";",["T_WHITESPACE","\n            ",535],"}",["T_WHITESPACE","\n            ",536],["T_VARIABLE","$secret",537],["T_WHITESPACE"," ",537],"=",["T_WHITESPACE"," ",537],["T_STRING","str_pad",537],"(",["T_VARIABLE","$secret",537],",",["T_WHITESPACE"," ",537],["T_LNUMBER","64",537],",",["T_WHITESPACE"," ",537],["T_STRING","chr",537],"(",["T_LNUMBER","0x00",537],")",")",";",["T_WHITESPACE","\n            ",537],["T_VARIABLE","$ipad",538],["T_WHITESPACE"," ",538],"=",["T_WHITESPACE"," ",538],["T_STRING","str_repeat",538],"(",["T_STRING","chr",538],"(",["T_LNUMBER","0x36",538],")",",",["T_WHITESPACE"," ",538],["T_LNUMBER","64",538],")",";",["T_WHITESPACE","\n            ",538],["T_VARIABLE","$opad",539],["T_WHITESPACE"," ",539],"=",["T_WHITESPACE"," ",539],["T_STRING","str_repeat",539],"(",["T_STRING","chr",539],"(",["T_LNUMBER","0x5c",539],")",",",["T_WHITESPACE"," ",539],["T_LNUMBER","64",539],")",";",["T_WHITESPACE","\n            ",539],["T_VARIABLE","$hash1",540],["T_WHITESPACE"," ",540],"=",["T_WHITESPACE"," ",540],["T_STRING","self",540],["T_DOUBLE_COLON","::",540],["T_STRING","digest",540],"(",["T_VARIABLE","$macFunc",540],",",["T_WHITESPACE"," ",540],"(",["T_VARIABLE","$secret",540],["T_WHITESPACE"," ",540],"^",["T_WHITESPACE"," ",540],["T_VARIABLE","$ipad",540],")",["T_WHITESPACE"," ",540],".",["T_WHITESPACE"," ",540],["T_VARIABLE","$data",540],")",";",["T_WHITESPACE","\n            ",540],["T_RETURN","return",541],["T_WHITESPACE"," ",541],["T_STRING","self",541],["T_DOUBLE_COLON","::",541],["T_STRING","digest",541],"(",["T_VARIABLE","$macFunc",541],",",["T_WHITESPACE"," ",541],"(",["T_VARIABLE","$secret",541],["T_WHITESPACE"," ",541],"^",["T_WHITESPACE"," ",541],["T_VARIABLE","$opad",541],")",["T_WHITESPACE"," ",541],".",["T_WHITESPACE"," ",541],["T_VARIABLE","$hash1",541],")",";",["T_WHITESPACE","\n        ",541],"}",["T_WHITESPACE","\n    ",542],"}",["T_WHITESPACE","\n\n    ",543],["T_DOC_COMMENT","\/**\n     * Converts binary representation into ext\/gmp or ext\/bcmath big integer\n     * representation.\n     *\n     * @param string $bin binary representation of big number\n     * @return mixed\n     * @throws Zend_OpenId_Exception\n     *\/",545],["T_WHITESPACE","\n    ",552],["T_STATIC","static",553],["T_WHITESPACE"," ",553],["T_PROTECTED","protected",553],["T_WHITESPACE"," ",553],["T_FUNCTION","function",553],["T_WHITESPACE"," ",553],["T_STRING","binToBigNum",553],"(",["T_VARIABLE","$bin",553],")",["T_WHITESPACE","\n    ",553],"{",["T_WHITESPACE","\n        ",554],["T_IF","if",555],["T_WHITESPACE"," ",555],"(",["T_STRING","extension_loaded",555],"(",["T_CONSTANT_ENCAPSED_STRING","'gmp'",555],")",")",["T_WHITESPACE"," ",555],"{",["T_WHITESPACE","\n            ",555],["T_RETURN","return",556],["T_WHITESPACE"," ",556],["T_STRING","gmp_init",556],"(",["T_STRING","bin2hex",556],"(",["T_VARIABLE","$bin",556],")",",",["T_WHITESPACE"," ",556],["T_LNUMBER","16",556],")",";",["T_WHITESPACE","\n        ",556],"}",["T_WHITESPACE"," ",557],["T_ELSE","else",557],["T_WHITESPACE"," ",557],["T_IF","if",557],["T_WHITESPACE"," ",557],"(",["T_STRING","extension_loaded",557],"(",["T_CONSTANT_ENCAPSED_STRING","'bcmath'",557],")",")",["T_WHITESPACE"," ",557],"{",["T_WHITESPACE","\n            ",557],["T_VARIABLE","$bn",558],["T_WHITESPACE"," ",558],"=",["T_WHITESPACE"," ",558],["T_LNUMBER","0",558],";",["T_WHITESPACE","\n            ",558],["T_VARIABLE","$len",559],["T_WHITESPACE"," ",559],"=",["T_WHITESPACE"," ",559],["T_STRING","Zend_OpenId",559],["T_DOUBLE_COLON","::",559],["T_STRING","strlen",559],"(",["T_VARIABLE","$bin",559],")",";",["T_WHITESPACE","\n            ",559],["T_FOR","for",560],["T_WHITESPACE"," ",560],"(",["T_VARIABLE","$i",560],["T_WHITESPACE"," ",560],"=",["T_WHITESPACE"," ",560],["T_LNUMBER","0",560],";",["T_WHITESPACE"," ",560],["T_VARIABLE","$i",560],["T_WHITESPACE"," ",560],"<",["T_WHITESPACE"," ",560],["T_VARIABLE","$len",560],";",["T_WHITESPACE"," ",560],["T_VARIABLE","$i",560],["T_INC","++",560],")",["T_WHITESPACE"," ",560],"{",["T_WHITESPACE","\n                ",560],["T_VARIABLE","$bn",561],["T_WHITESPACE"," ",561],"=",["T_WHITESPACE"," ",561],["T_STRING","bcmul",561],"(",["T_VARIABLE","$bn",561],",",["T_WHITESPACE"," ",561],["T_LNUMBER","256",561],")",";",["T_WHITESPACE","\n                ",561],["T_VARIABLE","$bn",562],["T_WHITESPACE"," ",562],"=",["T_WHITESPACE"," ",562],["T_STRING","bcadd",562],"(",["T_VARIABLE","$bn",562],",",["T_WHITESPACE"," ",562],["T_STRING","ord",562],"(",["T_VARIABLE","$bin",562],"[",["T_VARIABLE","$i",562],"]",")",")",";",["T_WHITESPACE","\n            ",562],"}",["T_WHITESPACE","\n            ",563],["T_RETURN","return",564],["T_WHITESPACE"," ",564],["T_VARIABLE","$bn",564],";",["T_WHITESPACE","\n        ",564],"}",["T_WHITESPACE","\n        ",565],["T_COMMENT","#require_once \"Zend\/OpenId\/Exception.php\";\n",566],["T_WHITESPACE","        ",567],["T_THROW","throw",567],["T_WHITESPACE"," ",567],["T_NEW","new",567],["T_WHITESPACE"," ",567],["T_STRING","Zend_OpenId_Exception",567],"(",["T_WHITESPACE","\n            ",567],["T_CONSTANT_ENCAPSED_STRING","'The system doesn\\'t have proper big integer extension'",568],",",["T_WHITESPACE","\n            ",568],["T_STRING","Zend_OpenId_Exception",569],["T_DOUBLE_COLON","::",569],["T_STRING","UNSUPPORTED_LONG_MATH",569],")",";",["T_WHITESPACE","\n    ",569],"}",["T_WHITESPACE","\n\n    ",570],["T_DOC_COMMENT","\/**\n     * Converts internal ext\/gmp or ext\/bcmath big integer representation into\n     * binary string.\n     *\n     * @param mixed $bn big number\n     * @return string\n     * @throws Zend_OpenId_Exception\n     *\/",572],["T_WHITESPACE","\n    ",579],["T_STATIC","static",580],["T_WHITESPACE"," ",580],["T_PROTECTED","protected",580],["T_WHITESPACE"," ",580],["T_FUNCTION","function",580],["T_WHITESPACE"," ",580],["T_STRING","bigNumToBin",580],"(",["T_VARIABLE","$bn",580],")",["T_WHITESPACE","\n    ",580],"{",["T_WHITESPACE","\n        ",581],["T_IF","if",582],["T_WHITESPACE"," ",582],"(",["T_STRING","extension_loaded",582],"(",["T_CONSTANT_ENCAPSED_STRING","'gmp'",582],")",")",["T_WHITESPACE"," ",582],"{",["T_WHITESPACE","\n            ",582],["T_VARIABLE","$s",583],["T_WHITESPACE"," ",583],"=",["T_WHITESPACE"," ",583],["T_STRING","gmp_strval",583],"(",["T_VARIABLE","$bn",583],",",["T_WHITESPACE"," ",583],["T_LNUMBER","16",583],")",";",["T_WHITESPACE","\n            ",583],["T_IF","if",584],["T_WHITESPACE"," ",584],"(",["T_STRING","strlen",584],"(",["T_VARIABLE","$s",584],")",["T_WHITESPACE"," ",584],"%",["T_WHITESPACE"," ",584],["T_LNUMBER","2",584],["T_WHITESPACE"," ",584],["T_IS_NOT_EQUAL","!=",584],["T_WHITESPACE"," ",584],["T_LNUMBER","0",584],")",["T_WHITESPACE"," ",584],"{",["T_WHITESPACE","\n                ",584],["T_VARIABLE","$s",585],["T_WHITESPACE"," ",585],"=",["T_WHITESPACE"," ",585],["T_CONSTANT_ENCAPSED_STRING","'0'",585],["T_WHITESPACE"," ",585],".",["T_WHITESPACE"," ",585],["T_VARIABLE","$s",585],";",["T_WHITESPACE","\n            ",585],"}",["T_WHITESPACE"," ",586],["T_ELSE","else",586],["T_WHITESPACE"," ",586],["T_IF","if",586],["T_WHITESPACE"," ",586],"(",["T_VARIABLE","$s",586],"[",["T_LNUMBER","0",586],"]",["T_WHITESPACE"," ",586],">",["T_WHITESPACE"," ",586],["T_CONSTANT_ENCAPSED_STRING","'7'",586],")",["T_WHITESPACE"," ",586],"{",["T_WHITESPACE","\n                ",586],["T_VARIABLE","$s",587],["T_WHITESPACE"," ",587],"=",["T_WHITESPACE"," ",587],["T_CONSTANT_ENCAPSED_STRING","'00'",587],["T_WHITESPACE"," ",587],".",["T_WHITESPACE"," ",587],["T_VARIABLE","$s",587],";",["T_WHITESPACE","\n            ",587],"}",["T_WHITESPACE","\n            ",588],["T_RETURN","return",589],["T_WHITESPACE"," ",589],["T_STRING","pack",589],"(",["T_CONSTANT_ENCAPSED_STRING","\"H*\"",589],",",["T_WHITESPACE"," ",589],["T_VARIABLE","$s",589],")",";",["T_WHITESPACE","\n        ",589],"}",["T_WHITESPACE"," ",590],["T_ELSE","else",590],["T_WHITESPACE"," ",590],["T_IF","if",590],["T_WHITESPACE"," ",590],"(",["T_STRING","extension_loaded",590],"(",["T_CONSTANT_ENCAPSED_STRING","'bcmath'",590],")",")",["T_WHITESPACE"," ",590],"{",["T_WHITESPACE","\n            ",590],["T_VARIABLE","$cmp",591],["T_WHITESPACE"," ",591],"=",["T_WHITESPACE"," ",591],["T_STRING","bccomp",591],"(",["T_VARIABLE","$bn",591],",",["T_WHITESPACE"," ",591],["T_LNUMBER","0",591],")",";",["T_WHITESPACE","\n            ",591],["T_IF","if",592],["T_WHITESPACE"," ",592],"(",["T_VARIABLE","$cmp",592],["T_WHITESPACE"," ",592],["T_IS_EQUAL","==",592],["T_WHITESPACE"," ",592],["T_LNUMBER","0",592],")",["T_WHITESPACE"," ",592],"{",["T_WHITESPACE","\n                ",592],["T_RETURN","return",593],["T_WHITESPACE"," ",593],["T_CONSTANT_ENCAPSED_STRING","\"\\0\"",593],";",["T_WHITESPACE","\n            ",593],"}",["T_WHITESPACE"," ",594],["T_ELSE","else",594],["T_WHITESPACE"," ",594],["T_IF","if",594],["T_WHITESPACE"," ",594],"(",["T_VARIABLE","$cmp",594],["T_WHITESPACE"," ",594],"<",["T_WHITESPACE"," ",594],["T_LNUMBER","0",594],")",["T_WHITESPACE"," ",594],"{",["T_WHITESPACE","\n                ",594],["T_COMMENT","#require_once \"Zend\/OpenId\/Exception.php\";\n",595],["T_WHITESPACE","                ",596],["T_THROW","throw",596],["T_WHITESPACE"," ",596],["T_NEW","new",596],["T_WHITESPACE"," ",596],["T_STRING","Zend_OpenId_Exception",596],"(",["T_WHITESPACE","\n                    ",596],["T_CONSTANT_ENCAPSED_STRING","'Big integer arithmetic error'",597],",",["T_WHITESPACE","\n                    ",597],["T_STRING","Zend_OpenId_Exception",598],["T_DOUBLE_COLON","::",598],["T_STRING","ERROR_LONG_MATH",598],")",";",["T_WHITESPACE","\n            ",598],"}",["T_WHITESPACE","\n            ",599],["T_VARIABLE","$bin",600],["T_WHITESPACE"," ",600],"=",["T_WHITESPACE"," ",600],["T_CONSTANT_ENCAPSED_STRING","\"\"",600],";",["T_WHITESPACE","\n            ",600],["T_WHILE","while",601],["T_WHITESPACE"," ",601],"(",["T_STRING","bccomp",601],"(",["T_VARIABLE","$bn",601],",",["T_WHITESPACE"," ",601],["T_LNUMBER","0",601],")",["T_WHITESPACE"," ",601],">",["T_WHITESPACE"," ",601],["T_LNUMBER","0",601],")",["T_WHITESPACE"," ",601],"{",["T_WHITESPACE","\n                ",601],["T_VARIABLE","$bin",602],["T_WHITESPACE"," ",602],"=",["T_WHITESPACE"," ",602],["T_STRING","chr",602],"(",["T_STRING","bcmod",602],"(",["T_VARIABLE","$bn",602],",",["T_WHITESPACE"," ",602],["T_LNUMBER","256",602],")",")",["T_WHITESPACE"," ",602],".",["T_WHITESPACE"," ",602],["T_VARIABLE","$bin",602],";",["T_WHITESPACE","\n                ",602],["T_VARIABLE","$bn",603],["T_WHITESPACE"," ",603],"=",["T_WHITESPACE"," ",603],["T_STRING","bcdiv",603],"(",["T_VARIABLE","$bn",603],",",["T_WHITESPACE"," ",603],["T_LNUMBER","256",603],")",";",["T_WHITESPACE","\n            ",603],"}",["T_WHITESPACE","\n            ",604],["T_IF","if",605],["T_WHITESPACE"," ",605],"(",["T_STRING","ord",605],"(",["T_VARIABLE","$bin",605],"[",["T_LNUMBER","0",605],"]",")",["T_WHITESPACE"," ",605],">",["T_WHITESPACE"," ",605],["T_LNUMBER","127",605],")",["T_WHITESPACE"," ",605],"{",["T_WHITESPACE","\n                ",605],["T_VARIABLE","$bin",606],["T_WHITESPACE"," ",606],"=",["T_WHITESPACE"," ",606],["T_CONSTANT_ENCAPSED_STRING","\"\\0\"",606],["T_WHITESPACE"," ",606],".",["T_WHITESPACE"," ",606],["T_VARIABLE","$bin",606],";",["T_WHITESPACE","\n            ",606],"}",["T_WHITESPACE","\n            ",607],["T_RETURN","return",608],["T_WHITESPACE"," ",608],["T_VARIABLE","$bin",608],";",["T_WHITESPACE","\n        ",608],"}",["T_WHITESPACE","\n        ",609],["T_COMMENT","#require_once \"Zend\/OpenId\/Exception.php\";\n",610],["T_WHITESPACE","        ",611],["T_THROW","throw",611],["T_WHITESPACE"," ",611],["T_NEW","new",611],["T_WHITESPACE"," ",611],["T_STRING","Zend_OpenId_Exception",611],"(",["T_WHITESPACE","\n            ",611],["T_CONSTANT_ENCAPSED_STRING","'The system doesn\\'t have proper big integer extension'",612],",",["T_WHITESPACE","\n            ",612],["T_STRING","Zend_OpenId_Exception",613],["T_DOUBLE_COLON","::",613],["T_STRING","UNSUPPORTED_LONG_MATH",613],")",";",["T_WHITESPACE","\n    ",613],"}",["T_WHITESPACE","\n\n    ",614],["T_DOC_COMMENT","\/**\n     * Performs the first step of a Diffie-Hellman key exchange by generating\n     * private and public DH values based on given prime number $p and\n     * generator $g. Both sides of key exchange MUST have the same prime number\n     * and generator. In this case they will able to create a random shared\n     * secret that is never send from one to the other.\n     *\n     * @param string $p prime number in binary representation\n     * @param string $g generator in binary representation\n     * @param string $priv_key private key in binary representation\n     * @return mixed\n     *\/",616],["T_WHITESPACE","\n    ",627],["T_STATIC","static",628],["T_WHITESPACE"," ",628],["T_PUBLIC","public",628],["T_WHITESPACE"," ",628],["T_FUNCTION","function",628],["T_WHITESPACE"," ",628],["T_STRING","createDhKey",628],"(",["T_VARIABLE","$p",628],",",["T_WHITESPACE"," ",628],["T_VARIABLE","$g",628],",",["T_WHITESPACE"," ",628],["T_VARIABLE","$priv_key",628],["T_WHITESPACE"," ",628],"=",["T_WHITESPACE"," ",628],["T_STRING","null",628],")",["T_WHITESPACE","\n    ",628],"{",["T_WHITESPACE","\n        ",629],["T_IF","if",630],["T_WHITESPACE"," ",630],"(",["T_STRING","function_exists",630],"(",["T_CONSTANT_ENCAPSED_STRING","'openssl_dh_compute_key'",630],")",")",["T_WHITESPACE"," ",630],"{",["T_WHITESPACE","\n            ",630],["T_VARIABLE","$dh_details",631],["T_WHITESPACE"," ",631],"=",["T_WHITESPACE"," ",631],["T_ARRAY","array",631],"(",["T_WHITESPACE","\n                    ",631],["T_CONSTANT_ENCAPSED_STRING","'p'",632],["T_WHITESPACE"," ",632],["T_DOUBLE_ARROW","=>",632],["T_WHITESPACE"," ",632],["T_VARIABLE","$p",632],",",["T_WHITESPACE","\n                    ",632],["T_CONSTANT_ENCAPSED_STRING","'g'",633],["T_WHITESPACE"," ",633],["T_DOUBLE_ARROW","=>",633],["T_WHITESPACE"," ",633],["T_VARIABLE","$g",633],["T_WHITESPACE","\n                ",633],")",";",["T_WHITESPACE","\n            ",634],["T_IF","if",635],["T_WHITESPACE"," ",635],"(",["T_VARIABLE","$priv_key",635],["T_WHITESPACE"," ",635],["T_IS_NOT_IDENTICAL","!==",635],["T_WHITESPACE"," ",635],["T_STRING","null",635],")",["T_WHITESPACE"," ",635],"{",["T_WHITESPACE","\n                ",635],["T_VARIABLE","$dh_details",636],"[",["T_CONSTANT_ENCAPSED_STRING","'priv_key'",636],"]",["T_WHITESPACE"," ",636],"=",["T_WHITESPACE"," ",636],["T_VARIABLE","$priv_key",636],";",["T_WHITESPACE","\n            ",636],"}",["T_WHITESPACE","\n            ",637],["T_RETURN","return",638],["T_WHITESPACE"," ",638],["T_STRING","openssl_pkey_new",638],"(",["T_ARRAY","array",638],"(",["T_CONSTANT_ENCAPSED_STRING","'dh'",638],["T_DOUBLE_ARROW","=>",638],["T_VARIABLE","$dh_details",638],")",")",";",["T_WHITESPACE","\n        ",638],"}",["T_WHITESPACE"," ",639],["T_ELSE","else",639],["T_WHITESPACE"," ",639],"{",["T_WHITESPACE","\n            ",639],["T_VARIABLE","$bn_p",640],["T_WHITESPACE","        ",640],"=",["T_WHITESPACE"," ",640],["T_STRING","self",640],["T_DOUBLE_COLON","::",640],["T_STRING","binToBigNum",640],"(",["T_VARIABLE","$p",640],")",";",["T_WHITESPACE","\n            ",640],["T_VARIABLE","$bn_g",641],["T_WHITESPACE","        ",641],"=",["T_WHITESPACE"," ",641],["T_STRING","self",641],["T_DOUBLE_COLON","::",641],["T_STRING","binToBigNum",641],"(",["T_VARIABLE","$g",641],")",";",["T_WHITESPACE","\n            ",641],["T_IF","if",642],["T_WHITESPACE"," ",642],"(",["T_VARIABLE","$priv_key",642],["T_WHITESPACE"," ",642],["T_IS_IDENTICAL","===",642],["T_WHITESPACE"," ",642],["T_STRING","null",642],")",["T_WHITESPACE"," ",642],"{",["T_WHITESPACE","\n                ",642],["T_VARIABLE","$priv_key",643],["T_WHITESPACE","    ",643],"=",["T_WHITESPACE"," ",643],["T_STRING","self",643],["T_DOUBLE_COLON","::",643],["T_STRING","randomBytes",643],"(",["T_STRING","Zend_OpenId",643],["T_DOUBLE_COLON","::",643],["T_STRING","strlen",643],"(",["T_VARIABLE","$p",643],")",")",";",["T_WHITESPACE","\n            ",643],"}",["T_WHITESPACE","\n            ",644],["T_VARIABLE","$bn_priv_key",645],["T_WHITESPACE"," ",645],"=",["T_WHITESPACE"," ",645],["T_STRING","self",645],["T_DOUBLE_COLON","::",645],["T_STRING","binToBigNum",645],"(",["T_VARIABLE","$priv_key",645],")",";",["T_WHITESPACE","\n            ",645],["T_IF","if",646],["T_WHITESPACE"," ",646],"(",["T_STRING","extension_loaded",646],"(",["T_CONSTANT_ENCAPSED_STRING","'gmp'",646],")",")",["T_WHITESPACE"," ",646],"{",["T_WHITESPACE","\n                ",646],["T_VARIABLE","$bn_pub_key",647],["T_WHITESPACE","  ",647],"=",["T_WHITESPACE"," ",647],["T_STRING","gmp_powm",647],"(",["T_VARIABLE","$bn_g",647],",",["T_WHITESPACE"," ",647],["T_VARIABLE","$bn_priv_key",647],",",["T_WHITESPACE"," ",647],["T_VARIABLE","$bn_p",647],")",";",["T_WHITESPACE","\n            ",647],"}",["T_WHITESPACE"," ",648],["T_ELSE","else",648],["T_WHITESPACE"," ",648],["T_IF","if",648],["T_WHITESPACE"," ",648],"(",["T_STRING","extension_loaded",648],"(",["T_CONSTANT_ENCAPSED_STRING","'bcmath'",648],")",")",["T_WHITESPACE"," ",648],"{",["T_WHITESPACE","\n                ",648],["T_VARIABLE","$bn_pub_key",649],["T_WHITESPACE","  ",649],"=",["T_WHITESPACE"," ",649],["T_STRING","bcpowmod",649],"(",["T_VARIABLE","$bn_g",649],",",["T_WHITESPACE"," ",649],["T_VARIABLE","$bn_priv_key",649],",",["T_WHITESPACE"," ",649],["T_VARIABLE","$bn_p",649],")",";",["T_WHITESPACE","\n            ",649],"}",["T_WHITESPACE","\n            ",650],["T_VARIABLE","$pub_key",651],["T_WHITESPACE","     ",651],"=",["T_WHITESPACE"," ",651],["T_STRING","self",651],["T_DOUBLE_COLON","::",651],["T_STRING","bigNumToBin",651],"(",["T_VARIABLE","$bn_pub_key",651],")",";",["T_WHITESPACE","\n\n            ",651],["T_RETURN","return",653],["T_WHITESPACE"," ",653],["T_ARRAY","array",653],"(",["T_WHITESPACE","\n                ",653],["T_CONSTANT_ENCAPSED_STRING","'p'",654],["T_WHITESPACE","        ",654],["T_DOUBLE_ARROW","=>",654],["T_WHITESPACE"," ",654],["T_VARIABLE","$bn_p",654],",",["T_WHITESPACE","\n                ",654],["T_CONSTANT_ENCAPSED_STRING","'g'",655],["T_WHITESPACE","        ",655],["T_DOUBLE_ARROW","=>",655],["T_WHITESPACE"," ",655],["T_VARIABLE","$bn_g",655],",",["T_WHITESPACE","\n                ",655],["T_CONSTANT_ENCAPSED_STRING","'priv_key'",656],["T_WHITESPACE"," ",656],["T_DOUBLE_ARROW","=>",656],["T_WHITESPACE"," ",656],["T_VARIABLE","$bn_priv_key",656],",",["T_WHITESPACE","\n                ",656],["T_CONSTANT_ENCAPSED_STRING","'pub_key'",657],["T_WHITESPACE","  ",657],["T_DOUBLE_ARROW","=>",657],["T_WHITESPACE"," ",657],["T_VARIABLE","$bn_pub_key",657],",",["T_WHITESPACE","\n                ",657],["T_CONSTANT_ENCAPSED_STRING","'details'",658],["T_WHITESPACE","  ",658],["T_DOUBLE_ARROW","=>",658],["T_WHITESPACE"," ",658],["T_ARRAY","array",658],"(",["T_WHITESPACE","\n                    ",658],["T_CONSTANT_ENCAPSED_STRING","'p'",659],["T_WHITESPACE","        ",659],["T_DOUBLE_ARROW","=>",659],["T_WHITESPACE"," ",659],["T_VARIABLE","$p",659],",",["T_WHITESPACE","\n                    ",659],["T_CONSTANT_ENCAPSED_STRING","'g'",660],["T_WHITESPACE","        ",660],["T_DOUBLE_ARROW","=>",660],["T_WHITESPACE"," ",660],["T_VARIABLE","$g",660],",",["T_WHITESPACE","\n                    ",660],["T_CONSTANT_ENCAPSED_STRING","'priv_key'",661],["T_WHITESPACE"," ",661],["T_DOUBLE_ARROW","=>",661],["T_WHITESPACE"," ",661],["T_VARIABLE","$priv_key",661],",",["T_WHITESPACE","\n                    ",661],["T_CONSTANT_ENCAPSED_STRING","'pub_key'",662],["T_WHITESPACE","  ",662],["T_DOUBLE_ARROW","=>",662],["T_WHITESPACE"," ",662],["T_VARIABLE","$pub_key",662],")",")",";",["T_WHITESPACE","\n        ",662],"}",["T_WHITESPACE","\n    ",663],"}",["T_WHITESPACE","\n\n    ",664],["T_DOC_COMMENT","\/**\n     * Returns an associative array with Diffie-Hellman key components in\n     * binary representation. The array includes original prime number 'p' and\n     * generator 'g', random private key 'priv_key' and corresponding public\n     * key 'pub_key'.\n     *\n     * @param mixed $dh Diffie-Hellman key\n     * @return array\n     *\/",666],["T_WHITESPACE","\n    ",674],["T_STATIC","static",675],["T_WHITESPACE"," ",675],["T_PUBLIC","public",675],["T_WHITESPACE"," ",675],["T_FUNCTION","function",675],["T_WHITESPACE"," ",675],["T_STRING","getDhKeyDetails",675],"(",["T_VARIABLE","$dh",675],")",["T_WHITESPACE","\n    ",675],"{",["T_WHITESPACE","\n        ",676],["T_IF","if",677],["T_WHITESPACE"," ",677],"(",["T_STRING","function_exists",677],"(",["T_CONSTANT_ENCAPSED_STRING","'openssl_dh_compute_key'",677],")",")",["T_WHITESPACE"," ",677],"{",["T_WHITESPACE","\n            ",677],["T_VARIABLE","$details",678],["T_WHITESPACE"," ",678],"=",["T_WHITESPACE"," ",678],["T_STRING","openssl_pkey_get_details",678],"(",["T_VARIABLE","$dh",678],")",";",["T_WHITESPACE","\n            ",678],["T_IF","if",679],["T_WHITESPACE"," ",679],"(",["T_ISSET","isset",679],"(",["T_VARIABLE","$details",679],"[",["T_CONSTANT_ENCAPSED_STRING","'dh'",679],"]",")",")",["T_WHITESPACE"," ",679],"{",["T_WHITESPACE","\n                ",679],["T_RETURN","return",680],["T_WHITESPACE"," ",680],["T_VARIABLE","$details",680],"[",["T_CONSTANT_ENCAPSED_STRING","'dh'",680],"]",";",["T_WHITESPACE","\n            ",680],"}",["T_WHITESPACE","\n        ",681],"}",["T_WHITESPACE"," ",682],["T_ELSE","else",682],["T_WHITESPACE"," ",682],"{",["T_WHITESPACE","\n            ",682],["T_RETURN","return",683],["T_WHITESPACE"," ",683],["T_VARIABLE","$dh",683],"[",["T_CONSTANT_ENCAPSED_STRING","'details'",683],"]",";",["T_WHITESPACE","\n        ",683],"}",["T_WHITESPACE","\n    ",684],"}",["T_WHITESPACE","\n\n    ",685],["T_DOC_COMMENT","\/**\n     * Computes the shared secret from the private DH value $dh and the other\n     * party's public value in $pub_key\n     *\n     * @param string $pub_key other party's public value\n     * @param mixed $dh Diffie-Hellman key\n     * @return string\n     * @throws Zend_OpenId_Exception\n     *\/",687],["T_WHITESPACE","\n    ",695],["T_STATIC","static",696],["T_WHITESPACE"," ",696],["T_PUBLIC","public",696],["T_WHITESPACE"," ",696],["T_FUNCTION","function",696],["T_WHITESPACE"," ",696],["T_STRING","computeDhSecret",696],"(",["T_VARIABLE","$pub_key",696],",",["T_WHITESPACE"," ",696],["T_VARIABLE","$dh",696],")",["T_WHITESPACE","\n    ",696],"{",["T_WHITESPACE","\n        ",697],["T_IF","if",698],["T_WHITESPACE"," ",698],"(",["T_STRING","function_exists",698],"(",["T_CONSTANT_ENCAPSED_STRING","'openssl_dh_compute_key'",698],")",")",["T_WHITESPACE"," ",698],"{",["T_WHITESPACE","\n            ",698],["T_VARIABLE","$ret",699],["T_WHITESPACE"," ",699],"=",["T_WHITESPACE"," ",699],["T_STRING","openssl_dh_compute_key",699],"(",["T_VARIABLE","$pub_key",699],",",["T_WHITESPACE"," ",699],["T_VARIABLE","$dh",699],")",";",["T_WHITESPACE","\n            ",699],["T_IF","if",700],["T_WHITESPACE"," ",700],"(",["T_STRING","ord",700],"(",["T_VARIABLE","$ret",700],"[",["T_LNUMBER","0",700],"]",")",["T_WHITESPACE"," ",700],">",["T_WHITESPACE"," ",700],["T_LNUMBER","127",700],")",["T_WHITESPACE"," ",700],"{",["T_WHITESPACE","\n                ",700],["T_VARIABLE","$ret",701],["T_WHITESPACE"," ",701],"=",["T_WHITESPACE"," ",701],["T_CONSTANT_ENCAPSED_STRING","\"\\0\"",701],["T_WHITESPACE"," ",701],".",["T_WHITESPACE"," ",701],["T_VARIABLE","$ret",701],";",["T_WHITESPACE","\n            ",701],"}",["T_WHITESPACE","\n            ",702],["T_RETURN","return",703],["T_WHITESPACE"," ",703],["T_VARIABLE","$ret",703],";",["T_WHITESPACE","\n        ",703],"}",["T_WHITESPACE"," ",704],["T_ELSE","else",704],["T_WHITESPACE"," ",704],["T_IF","if",704],["T_WHITESPACE"," ",704],"(",["T_STRING","extension_loaded",704],"(",["T_CONSTANT_ENCAPSED_STRING","'gmp'",704],")",")",["T_WHITESPACE"," ",704],"{",["T_WHITESPACE","\n            ",704],["T_VARIABLE","$bn_pub_key",705],["T_WHITESPACE"," ",705],"=",["T_WHITESPACE"," ",705],["T_STRING","self",705],["T_DOUBLE_COLON","::",705],["T_STRING","binToBigNum",705],"(",["T_VARIABLE","$pub_key",705],")",";",["T_WHITESPACE","\n            ",705],["T_VARIABLE","$bn_secret",706],["T_WHITESPACE","  ",706],"=",["T_WHITESPACE"," ",706],["T_STRING","gmp_powm",706],"(",["T_VARIABLE","$bn_pub_key",706],",",["T_WHITESPACE"," ",706],["T_VARIABLE","$dh",706],"[",["T_CONSTANT_ENCAPSED_STRING","'priv_key'",706],"]",",",["T_WHITESPACE"," ",706],["T_VARIABLE","$dh",706],"[",["T_CONSTANT_ENCAPSED_STRING","'p'",706],"]",")",";",["T_WHITESPACE","\n            ",706],["T_RETURN","return",707],["T_WHITESPACE"," ",707],["T_STRING","self",707],["T_DOUBLE_COLON","::",707],["T_STRING","bigNumToBin",707],"(",["T_VARIABLE","$bn_secret",707],")",";",["T_WHITESPACE","\n        ",707],"}",["T_WHITESPACE"," ",708],["T_ELSE","else",708],["T_WHITESPACE"," ",708],["T_IF","if",708],["T_WHITESPACE"," ",708],"(",["T_STRING","extension_loaded",708],"(",["T_CONSTANT_ENCAPSED_STRING","'bcmath'",708],")",")",["T_WHITESPACE"," ",708],"{",["T_WHITESPACE","\n            ",708],["T_VARIABLE","$bn_pub_key",709],["T_WHITESPACE"," ",709],"=",["T_WHITESPACE"," ",709],["T_STRING","self",709],["T_DOUBLE_COLON","::",709],["T_STRING","binToBigNum",709],"(",["T_VARIABLE","$pub_key",709],")",";",["T_WHITESPACE","\n            ",709],["T_VARIABLE","$bn_secret",710],["T_WHITESPACE","  ",710],"=",["T_WHITESPACE"," ",710],["T_STRING","bcpowmod",710],"(",["T_VARIABLE","$bn_pub_key",710],",",["T_WHITESPACE"," ",710],["T_VARIABLE","$dh",710],"[",["T_CONSTANT_ENCAPSED_STRING","'priv_key'",710],"]",",",["T_WHITESPACE"," ",710],["T_VARIABLE","$dh",710],"[",["T_CONSTANT_ENCAPSED_STRING","'p'",710],"]",")",";",["T_WHITESPACE","\n            ",710],["T_RETURN","return",711],["T_WHITESPACE"," ",711],["T_STRING","self",711],["T_DOUBLE_COLON","::",711],["T_STRING","bigNumToBin",711],"(",["T_VARIABLE","$bn_secret",711],")",";",["T_WHITESPACE","\n        ",711],"}",["T_WHITESPACE","\n        ",712],["T_COMMENT","#require_once \"Zend\/OpenId\/Exception.php\";\n",713],["T_WHITESPACE","        ",714],["T_THROW","throw",714],["T_WHITESPACE"," ",714],["T_NEW","new",714],["T_WHITESPACE"," ",714],["T_STRING","Zend_OpenId_Exception",714],"(",["T_WHITESPACE","\n            ",714],["T_CONSTANT_ENCAPSED_STRING","'The system doesn\\'t have proper big integer extension'",715],",",["T_WHITESPACE","\n            ",715],["T_STRING","Zend_OpenId_Exception",716],["T_DOUBLE_COLON","::",716],["T_STRING","UNSUPPORTED_LONG_MATH",716],")",";",["T_WHITESPACE","\n    ",716],"}",["T_WHITESPACE","\n\n    ",717],["T_DOC_COMMENT","\/**\n     * Takes an arbitrary precision integer and returns its shortest big-endian\n     * two's complement representation.\n     *\n     * Arbitrary precision integers MUST be encoded as big-endian signed two's\n     * complement binary strings. Henceforth, \"btwoc\" is a function that takes\n     * an arbitrary precision integer and returns its shortest big-endian two's\n     * complement representation. All integers that are used with\n     * Diffie-Hellman Key Exchange are positive. This means that the left-most\n     * bit of the two's complement representation MUST be zero. If it is not,\n     * implementations MUST add a zero byte at the front of the string.\n     *\n     * @param string $str binary representation of arbitrary precision integer\n     * @return string big-endian signed representation\n     *\/",719],["T_WHITESPACE","\n    ",733],["T_STATIC","static",734],["T_WHITESPACE"," ",734],["T_PUBLIC","public",734],["T_WHITESPACE"," ",734],["T_FUNCTION","function",734],["T_WHITESPACE"," ",734],["T_STRING","btwoc",734],"(",["T_VARIABLE","$str",734],")",["T_WHITESPACE","\n    ",734],"{",["T_WHITESPACE","\n        ",735],["T_IF","if",736],["T_WHITESPACE"," ",736],"(",["T_STRING","ord",736],"(",["T_VARIABLE","$str",736],"[",["T_LNUMBER","0",736],"]",")",["T_WHITESPACE"," ",736],">",["T_WHITESPACE"," ",736],["T_LNUMBER","127",736],")",["T_WHITESPACE"," ",736],"{",["T_WHITESPACE","\n            ",736],["T_RETURN","return",737],["T_WHITESPACE"," ",737],["T_CONSTANT_ENCAPSED_STRING","\"\\0\"",737],["T_WHITESPACE"," ",737],".",["T_WHITESPACE"," ",737],["T_VARIABLE","$str",737],";",["T_WHITESPACE","\n        ",737],"}",["T_WHITESPACE","\n        ",738],["T_RETURN","return",739],["T_WHITESPACE"," ",739],["T_VARIABLE","$str",739],";",["T_WHITESPACE","\n    ",739],"}",["T_WHITESPACE","\n\n    ",740],["T_DOC_COMMENT","\/**\n     * Returns lenght of binary string in bytes\n     *\n     * @param string $str\n     * @return int the string lenght\n     *\/",742],["T_WHITESPACE","\n    ",747],["T_STATIC","static",748],["T_WHITESPACE"," ",748],["T_PUBLIC","public",748],["T_WHITESPACE"," ",748],["T_FUNCTION","function",748],["T_WHITESPACE"," ",748],["T_STRING","strlen",748],"(",["T_VARIABLE","$str",748],")",["T_WHITESPACE","\n    ",748],"{",["T_WHITESPACE","\n        ",749],["T_IF","if",750],["T_WHITESPACE"," ",750],"(",["T_STRING","extension_loaded",750],"(",["T_CONSTANT_ENCAPSED_STRING","'mbstring'",750],")",["T_WHITESPACE"," ",750],["T_BOOLEAN_AND","&&",750],["T_WHITESPACE","\n            ",750],"(","(",["T_INT_CAST","(int)",751],["T_STRING","ini_get",751],"(",["T_CONSTANT_ENCAPSED_STRING","'mbstring.func_overload'",751],")",")",["T_WHITESPACE"," ",751],"&",["T_WHITESPACE"," ",751],["T_LNUMBER","2",751],")",")",["T_WHITESPACE"," ",751],"{",["T_WHITESPACE","\n            ",751],["T_RETURN","return",752],["T_WHITESPACE"," ",752],["T_STRING","mb_strlen",752],"(",["T_VARIABLE","$str",752],",",["T_WHITESPACE"," ",752],["T_CONSTANT_ENCAPSED_STRING","'latin1'",752],")",";",["T_WHITESPACE","\n        ",752],"}",["T_WHITESPACE"," ",753],["T_ELSE","else",753],["T_WHITESPACE"," ",753],"{",["T_WHITESPACE","\n            ",753],["T_RETURN","return",754],["T_WHITESPACE"," ",754],["T_STRING","strlen",754],"(",["T_VARIABLE","$str",754],")",";",["T_WHITESPACE","\n        ",754],"}",["T_WHITESPACE","\n    ",755],"}",["T_WHITESPACE","\n\n",756],"}",["T_WHITESPACE","\n",758]]
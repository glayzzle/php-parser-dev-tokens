[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * LICENSE\n *\n * This source file is subject to the new BSD license that is bundled\n * with this package in the file LICENSE.txt.\n * It is also available through the world-wide-web at this URL:\n * http:\/\/framework.zend.com\/license\/new-bsd\n * If you did not receive a copy of the license and are unable to\n * obtain it through the world-wide-web, please send an email\n * to license@zend.com so we can send you a copy immediately.\n *\n * @category   Zend\n * @package    Zend_Cloud\n * @subpackage QueueService\n * @copyright  Copyright (c) 2005-2015 Zend Technologies USA Inc. (http:\/\/www.zend.com)\n * @license    http:\/\/framework.zend.com\/license\/new-bsd     New BSD License\n *\/",2],["T_WHITESPACE","\n\n",18],["T_COMMENT","#require_once 'Zend\/Service\/Amazon\/Sqs.php';\n",20],["T_COMMENT","#require_once 'Zend\/Cloud\/QueueService\/Adapter\/AbstractAdapter.php';\n",21],["T_COMMENT","#require_once 'Zend\/Cloud\/QueueService\/Exception.php';\n",22],["T_COMMENT","#require_once 'Zend\/Cloud\/QueueService\/Message.php';\n",23],["T_WHITESPACE","\n",24],["T_DOC_COMMENT","\/**\n * SQS adapter for simple queue service.\n *\n * @category   Zend\n * @package    Zend_Cloud\n * @subpackage QueueService\n * @copyright  Copyright (c) 2005-2015 Zend Technologies USA Inc. (http:\/\/www.zend.com)\n * @license    http:\/\/framework.zend.com\/license\/new-bsd     New BSD License\n *\/",25],["T_WHITESPACE","\n",33],["T_CLASS","class",34],["T_WHITESPACE"," ",34],["T_STRING","Zend_Cloud_QueueService_Adapter_Sqs",34],["T_WHITESPACE","\n    ",34],["T_EXTENDS","extends",35],["T_WHITESPACE"," ",35],["T_STRING","Zend_Cloud_QueueService_Adapter_AbstractAdapter",35],["T_WHITESPACE","\n",35],"{",["T_WHITESPACE","\n    ",36],["T_COMMENT","\/*\n     * Options array keys for the SQS adapter.\n     *\/",37],["T_WHITESPACE","\n    ",39],["T_CONST","const",40],["T_WHITESPACE"," ",40],["T_STRING","AWS_ACCESS_KEY",40],["T_WHITESPACE"," ",40],"=",["T_WHITESPACE"," ",40],["T_CONSTANT_ENCAPSED_STRING","'aws_accesskey'",40],";",["T_WHITESPACE","\n    ",40],["T_CONST","const",41],["T_WHITESPACE"," ",41],["T_STRING","AWS_SECRET_KEY",41],["T_WHITESPACE"," ",41],"=",["T_WHITESPACE"," ",41],["T_CONSTANT_ENCAPSED_STRING","'aws_secretkey'",41],";",["T_WHITESPACE","\n\n    ",41],["T_DOC_COMMENT","\/**\n     * Defaults\n     *\/",43],["T_WHITESPACE","\n    ",45],["T_CONST","const",46],["T_WHITESPACE"," ",46],["T_STRING","CREATE_TIMEOUT",46],["T_WHITESPACE"," ",46],"=",["T_WHITESPACE"," ",46],["T_LNUMBER","30",46],";",["T_WHITESPACE","\n\n    ",46],["T_DOC_COMMENT","\/**\n     * SQS service instance.\n     * @var Zend_Service_Amazon_Sqs\n     *\/",48],["T_WHITESPACE","\n    ",51],["T_PROTECTED","protected",52],["T_WHITESPACE"," ",52],["T_VARIABLE","$_sqs",52],";",["T_WHITESPACE","\n\n    ",52],["T_DOC_COMMENT","\/**\n     * Constructor\n     *\n     * @param  array|Zend_Config $options\n     * @return void\n     *\/",54],["T_WHITESPACE","\n    ",59],["T_PUBLIC","public",60],["T_WHITESPACE"," ",60],["T_FUNCTION","function",60],["T_WHITESPACE"," ",60],["T_STRING","__construct",60],"(",["T_VARIABLE","$options",60],["T_WHITESPACE"," ",60],"=",["T_WHITESPACE"," ",60],["T_ARRAY","array",60],"(",")",")",["T_WHITESPACE","\n    ",60],"{",["T_WHITESPACE","\n        ",61],["T_IF","if",62],["T_WHITESPACE"," ",62],"(",["T_VARIABLE","$options",62],["T_WHITESPACE"," ",62],["T_INSTANCEOF","instanceof",62],["T_WHITESPACE"," ",62],["T_STRING","Zend_Config",62],")",["T_WHITESPACE"," ",62],"{",["T_WHITESPACE","\n            ",62],["T_VARIABLE","$options",63],["T_WHITESPACE"," ",63],"=",["T_WHITESPACE"," ",63],["T_VARIABLE","$options",63],["T_OBJECT_OPERATOR","->",63],["T_STRING","toArray",63],"(",")",";",["T_WHITESPACE","\n        ",63],"}",["T_WHITESPACE","\n\n        ",64],["T_IF","if",66],["T_WHITESPACE"," ",66],"(","!",["T_STRING","is_array",66],"(",["T_VARIABLE","$options",66],")",")",["T_WHITESPACE"," ",66],"{",["T_WHITESPACE","\n            ",66],["T_THROW","throw",67],["T_WHITESPACE"," ",67],["T_NEW","new",67],["T_WHITESPACE"," ",67],["T_STRING","Zend_Cloud_QueueService_Exception",67],"(",["T_CONSTANT_ENCAPSED_STRING","'Invalid options provided'",67],")",";",["T_WHITESPACE","\n        ",67],"}",["T_WHITESPACE","\n\n        ",68],["T_IF","if",70],["T_WHITESPACE"," ",70],"(",["T_ISSET","isset",70],"(",["T_VARIABLE","$options",70],"[",["T_STRING","self",70],["T_DOUBLE_COLON","::",70],["T_STRING","MESSAGE_CLASS",70],"]",")",")",["T_WHITESPACE"," ",70],"{",["T_WHITESPACE","\n            ",70],["T_VARIABLE","$this",71],["T_OBJECT_OPERATOR","->",71],["T_STRING","setMessageClass",71],"(",["T_VARIABLE","$options",71],"[",["T_STRING","self",71],["T_DOUBLE_COLON","::",71],["T_STRING","MESSAGE_CLASS",71],"]",")",";",["T_WHITESPACE","\n        ",71],"}",["T_WHITESPACE","\n\n        ",72],["T_IF","if",74],["T_WHITESPACE"," ",74],"(",["T_ISSET","isset",74],"(",["T_VARIABLE","$options",74],"[",["T_STRING","self",74],["T_DOUBLE_COLON","::",74],["T_STRING","MESSAGESET_CLASS",74],"]",")",")",["T_WHITESPACE"," ",74],"{",["T_WHITESPACE","\n            ",74],["T_VARIABLE","$this",75],["T_OBJECT_OPERATOR","->",75],["T_STRING","setMessageSetClass",75],"(",["T_VARIABLE","$options",75],"[",["T_STRING","self",75],["T_DOUBLE_COLON","::",75],["T_STRING","MESSAGESET_CLASS",75],"]",")",";",["T_WHITESPACE","\n        ",75],"}",["T_WHITESPACE","\n\n        ",76],["T_TRY","try",78],["T_WHITESPACE"," ",78],"{",["T_WHITESPACE","\n            ",78],["T_VARIABLE","$this",79],["T_OBJECT_OPERATOR","->",79],["T_STRING","_sqs",79],["T_WHITESPACE"," ",79],"=",["T_WHITESPACE"," ",79],["T_NEW","new",79],["T_WHITESPACE"," ",79],["T_STRING","Zend_Service_Amazon_Sqs",79],"(",["T_WHITESPACE","\n                ",79],["T_VARIABLE","$options",80],"[",["T_STRING","self",80],["T_DOUBLE_COLON","::",80],["T_STRING","AWS_ACCESS_KEY",80],"]",",",["T_WHITESPACE"," ",80],["T_VARIABLE","$options",80],"[",["T_STRING","self",80],["T_DOUBLE_COLON","::",80],["T_STRING","AWS_SECRET_KEY",80],"]",["T_WHITESPACE","\n            ",80],")",";",["T_WHITESPACE","\n        ",81],"}",["T_WHITESPACE"," ",82],["T_CATCH","catch",82],"(",["T_STRING","Zend_Service_Amazon_Exception",82],["T_WHITESPACE"," ",82],["T_VARIABLE","$e",82],")",["T_WHITESPACE"," ",82],"{",["T_WHITESPACE","\n            ",82],["T_THROW","throw",83],["T_WHITESPACE"," ",83],["T_NEW","new",83],["T_WHITESPACE"," ",83],["T_STRING","Zend_Cloud_QueueService_Exception",83],"(",["T_CONSTANT_ENCAPSED_STRING","'Error on create: '",83],".",["T_VARIABLE","$e",83],["T_OBJECT_OPERATOR","->",83],["T_STRING","getMessage",83],"(",")",",",["T_WHITESPACE"," ",83],["T_VARIABLE","$e",83],["T_OBJECT_OPERATOR","->",83],["T_STRING","getCode",83],"(",")",",",["T_WHITESPACE"," ",83],["T_VARIABLE","$e",83],")",";",["T_WHITESPACE","\n        ",83],"}",["T_WHITESPACE","\n\n        ",84],["T_IF","if",86],"(",["T_ISSET","isset",86],"(",["T_VARIABLE","$options",86],"[",["T_STRING","self",86],["T_DOUBLE_COLON","::",86],["T_STRING","HTTP_ADAPTER",86],"]",")",")",["T_WHITESPACE"," ",86],"{",["T_WHITESPACE","\n            ",86],["T_VARIABLE","$this",87],["T_OBJECT_OPERATOR","->",87],["T_STRING","_sqs",87],["T_OBJECT_OPERATOR","->",87],["T_STRING","getHttpClient",87],"(",")",["T_OBJECT_OPERATOR","->",87],["T_STRING","setAdapter",87],"(",["T_VARIABLE","$options",87],"[",["T_STRING","self",87],["T_DOUBLE_COLON","::",87],["T_STRING","HTTP_ADAPTER",87],"]",")",";",["T_WHITESPACE","\n        ",87],"}",["T_WHITESPACE","\n    ",88],"}",["T_WHITESPACE","\n\n     ",89],["T_DOC_COMMENT","\/**\n     * Create a queue. Returns the ID of the created queue (typically the URL).\n     * It may take some time to create the queue. Check your vendor's\n     * documentation for details.\n     *\n     * @param  string $name\n     * @param  array  $options\n     * @return string Queue ID (typically URL)\n     *\/",91],["T_WHITESPACE","\n    ",99],["T_PUBLIC","public",100],["T_WHITESPACE"," ",100],["T_FUNCTION","function",100],["T_WHITESPACE"," ",100],["T_STRING","createQueue",100],"(",["T_VARIABLE","$name",100],",",["T_WHITESPACE"," ",100],["T_VARIABLE","$options",100],["T_WHITESPACE"," ",100],"=",["T_WHITESPACE"," ",100],["T_STRING","null",100],")",["T_WHITESPACE","\n    ",100],"{",["T_WHITESPACE","\n        ",101],["T_TRY","try",102],["T_WHITESPACE"," ",102],"{",["T_WHITESPACE","\n            ",102],["T_RETURN","return",103],["T_WHITESPACE"," ",103],["T_VARIABLE","$this",103],["T_OBJECT_OPERATOR","->",103],["T_STRING","_sqs",103],["T_OBJECT_OPERATOR","->",103],["T_STRING","create",103],"(",["T_VARIABLE","$name",103],",",["T_WHITESPACE"," ",103],["T_VARIABLE","$options",103],"[",["T_STRING","self",103],["T_DOUBLE_COLON","::",103],["T_STRING","CREATE_TIMEOUT",103],"]",")",";",["T_WHITESPACE","\n        ",103],"}",["T_WHITESPACE"," ",104],["T_CATCH","catch",104],"(",["T_STRING","Zend_Service_Amazon_Exception",104],["T_WHITESPACE"," ",104],["T_VARIABLE","$e",104],")",["T_WHITESPACE"," ",104],"{",["T_WHITESPACE","\n            ",104],["T_THROW","throw",105],["T_WHITESPACE"," ",105],["T_NEW","new",105],["T_WHITESPACE"," ",105],["T_STRING","Zend_Cloud_QueueService_Exception",105],"(",["T_CONSTANT_ENCAPSED_STRING","'Error on queue creation: '",105],".",["T_VARIABLE","$e",105],["T_OBJECT_OPERATOR","->",105],["T_STRING","getMessage",105],"(",")",",",["T_WHITESPACE"," ",105],["T_VARIABLE","$e",105],["T_OBJECT_OPERATOR","->",105],["T_STRING","getCode",105],"(",")",",",["T_WHITESPACE"," ",105],["T_VARIABLE","$e",105],")",";",["T_WHITESPACE","\n        ",105],"}",["T_WHITESPACE","\n    ",106],"}",["T_WHITESPACE","\n\n    ",107],["T_DOC_COMMENT","\/**\n     * Delete a queue. All messages in the queue will also be deleted.\n     *\n     * @param  string $queueId\n     * @param  array  $options\n     * @return boolean true if successful, false otherwise\n     *\/",109],["T_WHITESPACE","\n    ",115],["T_PUBLIC","public",116],["T_WHITESPACE"," ",116],["T_FUNCTION","function",116],["T_WHITESPACE"," ",116],["T_STRING","deleteQueue",116],"(",["T_VARIABLE","$queueId",116],",",["T_WHITESPACE"," ",116],["T_VARIABLE","$options",116],["T_WHITESPACE"," ",116],"=",["T_WHITESPACE"," ",116],["T_STRING","null",116],")",["T_WHITESPACE","\n",116],"{",["T_WHITESPACE","\n        ",117],["T_TRY","try",118],["T_WHITESPACE"," ",118],"{",["T_WHITESPACE","\n            ",118],["T_RETURN","return",119],["T_WHITESPACE"," ",119],["T_VARIABLE","$this",119],["T_OBJECT_OPERATOR","->",119],["T_STRING","_sqs",119],["T_OBJECT_OPERATOR","->",119],["T_STRING","delete",119],"(",["T_VARIABLE","$queueId",119],")",";",["T_WHITESPACE","\n        ",119],"}",["T_WHITESPACE"," ",120],["T_CATCH","catch",120],"(",["T_STRING","Zend_Service_Amazon_Exception",120],["T_WHITESPACE"," ",120],["T_VARIABLE","$e",120],")",["T_WHITESPACE"," ",120],"{",["T_WHITESPACE","\n            ",120],["T_THROW","throw",121],["T_WHITESPACE"," ",121],["T_NEW","new",121],["T_WHITESPACE"," ",121],["T_STRING","Zend_Cloud_QueueService_Exception",121],"(",["T_CONSTANT_ENCAPSED_STRING","'Error on queue deletion: '",121],".",["T_VARIABLE","$e",121],["T_OBJECT_OPERATOR","->",121],["T_STRING","getMessage",121],"(",")",",",["T_WHITESPACE"," ",121],["T_VARIABLE","$e",121],["T_OBJECT_OPERATOR","->",121],["T_STRING","getCode",121],"(",")",",",["T_WHITESPACE"," ",121],["T_VARIABLE","$e",121],")",";",["T_WHITESPACE","\n        ",121],"}",["T_WHITESPACE","\n    ",122],"}",["T_WHITESPACE","\n\n    ",123],["T_DOC_COMMENT","\/**\n     * List all queues.\n     *\n     * @param  array $options\n     * @return array Queue IDs\n     *\/",125],["T_WHITESPACE","\n    ",130],["T_PUBLIC","public",131],["T_WHITESPACE"," ",131],["T_FUNCTION","function",131],["T_WHITESPACE"," ",131],["T_STRING","listQueues",131],"(",["T_VARIABLE","$options",131],["T_WHITESPACE"," ",131],"=",["T_WHITESPACE"," ",131],["T_STRING","null",131],")",["T_WHITESPACE","\n    ",131],"{",["T_WHITESPACE","\n        ",132],["T_TRY","try",133],["T_WHITESPACE"," ",133],"{",["T_WHITESPACE","\n            ",133],["T_RETURN","return",134],["T_WHITESPACE"," ",134],["T_VARIABLE","$this",134],["T_OBJECT_OPERATOR","->",134],["T_STRING","_sqs",134],["T_OBJECT_OPERATOR","->",134],["T_STRING","getQueues",134],"(",")",";",["T_WHITESPACE","\n        ",134],"}",["T_WHITESPACE"," ",135],["T_CATCH","catch",135],"(",["T_STRING","Zend_Service_Amazon_Exception",135],["T_WHITESPACE"," ",135],["T_VARIABLE","$e",135],")",["T_WHITESPACE"," ",135],"{",["T_WHITESPACE","\n            ",135],["T_THROW","throw",136],["T_WHITESPACE"," ",136],["T_NEW","new",136],["T_WHITESPACE"," ",136],["T_STRING","Zend_Cloud_QueueService_Exception",136],"(",["T_CONSTANT_ENCAPSED_STRING","'Error on listing queues: '",136],".",["T_VARIABLE","$e",136],["T_OBJECT_OPERATOR","->",136],["T_STRING","getMessage",136],"(",")",",",["T_WHITESPACE"," ",136],["T_VARIABLE","$e",136],["T_OBJECT_OPERATOR","->",136],["T_STRING","getCode",136],"(",")",",",["T_WHITESPACE"," ",136],["T_VARIABLE","$e",136],")",";",["T_WHITESPACE","\n        ",136],"}",["T_WHITESPACE","\n    ",137],"}",["T_WHITESPACE","\n\n    ",138],["T_DOC_COMMENT","\/**\n     * Get a key\/value array of metadata for the given queue.\n     *\n     * @param  string $queueId\n     * @param  array  $options\n     * @return array\n     *\/",140],["T_WHITESPACE","\n    ",146],["T_PUBLIC","public",147],["T_WHITESPACE"," ",147],["T_FUNCTION","function",147],["T_WHITESPACE"," ",147],["T_STRING","fetchQueueMetadata",147],"(",["T_VARIABLE","$queueId",147],",",["T_WHITESPACE"," ",147],["T_VARIABLE","$options",147],["T_WHITESPACE"," ",147],"=",["T_WHITESPACE"," ",147],["T_STRING","null",147],")",["T_WHITESPACE","\n    ",147],"{",["T_WHITESPACE","\n        ",148],["T_TRY","try",149],["T_WHITESPACE"," ",149],"{",["T_WHITESPACE","\n            ",149],["T_COMMENT","\/\/ TODO: ZF-9050 Fix the SQS client library in trunk to return all attribute values\n",150],["T_WHITESPACE","            ",151],["T_VARIABLE","$attributes",151],["T_WHITESPACE"," ",151],"=",["T_WHITESPACE"," ",151],["T_VARIABLE","$this",151],["T_OBJECT_OPERATOR","->",151],["T_STRING","_sqs",151],["T_OBJECT_OPERATOR","->",151],["T_STRING","getAttribute",151],"(",["T_VARIABLE","$queueId",151],",",["T_WHITESPACE"," ",151],["T_CONSTANT_ENCAPSED_STRING","'All'",151],")",";",["T_WHITESPACE","\n            ",151],["T_IF","if",152],"(",["T_STRING","is_array",152],"(",["T_VARIABLE","$attributes",152],")",")",["T_WHITESPACE"," ",152],"{",["T_WHITESPACE","\n                ",152],["T_RETURN","return",153],["T_WHITESPACE"," ",153],["T_VARIABLE","$attributes",153],";",["T_WHITESPACE","\n            ",153],"}",["T_WHITESPACE"," ",154],["T_ELSE","else",154],["T_WHITESPACE"," ",154],"{",["T_WHITESPACE","\n                ",154],["T_RETURN","return",155],["T_WHITESPACE"," ",155],["T_ARRAY","array",155],"(",["T_CONSTANT_ENCAPSED_STRING","'All'",155],["T_WHITESPACE"," ",155],["T_DOUBLE_ARROW","=>",155],["T_WHITESPACE"," ",155],["T_VARIABLE","$this",155],["T_OBJECT_OPERATOR","->",155],["T_STRING","_sqs",155],["T_OBJECT_OPERATOR","->",155],["T_STRING","getAttribute",155],"(",["T_VARIABLE","$queueId",155],",",["T_WHITESPACE"," ",155],["T_CONSTANT_ENCAPSED_STRING","'All'",155],")",")",";",["T_WHITESPACE","\n            ",155],"}",["T_WHITESPACE","\n        ",156],"}",["T_WHITESPACE"," ",157],["T_CATCH","catch",157],"(",["T_STRING","Zend_Service_Amazon_Exception",157],["T_WHITESPACE"," ",157],["T_VARIABLE","$e",157],")",["T_WHITESPACE"," ",157],"{",["T_WHITESPACE","\n            ",157],["T_THROW","throw",158],["T_WHITESPACE"," ",158],["T_NEW","new",158],["T_WHITESPACE"," ",158],["T_STRING","Zend_Cloud_QueueService_Exception",158],"(",["T_CONSTANT_ENCAPSED_STRING","'Error on fetching queue metadata: '",158],".",["T_VARIABLE","$e",158],["T_OBJECT_OPERATOR","->",158],["T_STRING","getMessage",158],"(",")",",",["T_WHITESPACE"," ",158],["T_VARIABLE","$e",158],["T_OBJECT_OPERATOR","->",158],["T_STRING","getCode",158],"(",")",",",["T_WHITESPACE"," ",158],["T_VARIABLE","$e",158],")",";",["T_WHITESPACE","\n        ",158],"}",["T_WHITESPACE","\n    ",159],"}",["T_WHITESPACE","\n\n    ",160],["T_DOC_COMMENT","\/**\n     * Store a key\/value array of metadata for the specified queue.\n     * WARNING: This operation overwrites any metadata that is located at\n     * $destinationPath. Some adapters may not support this method.\n     *\n     * @param  array  $metadata\n     * @param  string $queueId\n     * @param  array  $options\n     * @return void\n     *\/",162],["T_WHITESPACE","\n    ",171],["T_PUBLIC","public",172],["T_WHITESPACE"," ",172],["T_FUNCTION","function",172],["T_WHITESPACE"," ",172],["T_STRING","storeQueueMetadata",172],"(",["T_VARIABLE","$queueId",172],",",["T_WHITESPACE"," ",172],["T_VARIABLE","$metadata",172],",",["T_WHITESPACE"," ",172],["T_VARIABLE","$options",172],["T_WHITESPACE"," ",172],"=",["T_WHITESPACE"," ",172],["T_STRING","null",172],")",["T_WHITESPACE","\n    ",172],"{",["T_WHITESPACE","\n        ",173],["T_COMMENT","\/\/ TODO Add support for SetQueueAttributes to client library\n",174],["T_WHITESPACE","        ",175],["T_COMMENT","#require_once 'Zend\/Cloud\/OperationNotAvailableException.php';\n",175],["T_WHITESPACE","        ",176],["T_THROW","throw",176],["T_WHITESPACE"," ",176],["T_NEW","new",176],["T_WHITESPACE"," ",176],["T_STRING","Zend_Cloud_OperationNotAvailableException",176],"(",["T_CONSTANT_ENCAPSED_STRING","'Amazon SQS doesn\\'t currently support storing metadata'",176],")",";",["T_WHITESPACE","\n    ",176],"}",["T_WHITESPACE","\n\n    ",177],["T_DOC_COMMENT","\/**\n     * Send a message to the specified queue.\n     *\n     * @param  string $message\n     * @param  string $queueId\n     * @param  array  $options\n     * @return string Message ID\n     *\/",179],["T_WHITESPACE","\n    ",186],["T_PUBLIC","public",187],["T_WHITESPACE"," ",187],["T_FUNCTION","function",187],["T_WHITESPACE"," ",187],["T_STRING","sendMessage",187],"(",["T_VARIABLE","$queueId",187],",",["T_WHITESPACE"," ",187],["T_VARIABLE","$message",187],",",["T_WHITESPACE"," ",187],["T_VARIABLE","$options",187],["T_WHITESPACE"," ",187],"=",["T_WHITESPACE"," ",187],["T_STRING","null",187],")",["T_WHITESPACE","\n    ",187],"{",["T_WHITESPACE","\n        ",188],["T_TRY","try",189],["T_WHITESPACE"," ",189],"{",["T_WHITESPACE","\n            ",189],["T_RETURN","return",190],["T_WHITESPACE"," ",190],["T_VARIABLE","$this",190],["T_OBJECT_OPERATOR","->",190],["T_STRING","_sqs",190],["T_OBJECT_OPERATOR","->",190],["T_STRING","send",190],"(",["T_VARIABLE","$queueId",190],",",["T_WHITESPACE"," ",190],["T_VARIABLE","$message",190],")",";",["T_WHITESPACE","\n        ",190],"}",["T_WHITESPACE"," ",191],["T_CATCH","catch",191],"(",["T_STRING","Zend_Service_Amazon_Exception",191],["T_WHITESPACE"," ",191],["T_VARIABLE","$e",191],")",["T_WHITESPACE"," ",191],"{",["T_WHITESPACE","\n            ",191],["T_THROW","throw",192],["T_WHITESPACE"," ",192],["T_NEW","new",192],["T_WHITESPACE"," ",192],["T_STRING","Zend_Cloud_QueueService_Exception",192],"(",["T_CONSTANT_ENCAPSED_STRING","'Error on sending message: '",192],".",["T_VARIABLE","$e",192],["T_OBJECT_OPERATOR","->",192],["T_STRING","getMessage",192],"(",")",",",["T_WHITESPACE"," ",192],["T_VARIABLE","$e",192],["T_OBJECT_OPERATOR","->",192],["T_STRING","getCode",192],"(",")",",",["T_WHITESPACE"," ",192],["T_VARIABLE","$e",192],")",";",["T_WHITESPACE","\n        ",192],"}",["T_WHITESPACE","\n    ",193],"}",["T_WHITESPACE","\n\n    ",194],["T_DOC_COMMENT","\/**\n     * Recieve at most $max messages from the specified queue and return the\n     * message IDs for messages recieved.\n     *\n     * @param  string $queueId\n     * @param  int    $max\n     * @param  array  $options\n     * @return array\n     *\/",196],["T_WHITESPACE","\n    ",204],["T_PUBLIC","public",205],["T_WHITESPACE"," ",205],["T_FUNCTION","function",205],["T_WHITESPACE"," ",205],["T_STRING","receiveMessages",205],"(",["T_VARIABLE","$queueId",205],",",["T_WHITESPACE"," ",205],["T_VARIABLE","$max",205],["T_WHITESPACE"," ",205],"=",["T_WHITESPACE"," ",205],["T_LNUMBER","1",205],",",["T_WHITESPACE"," ",205],["T_VARIABLE","$options",205],["T_WHITESPACE"," ",205],"=",["T_WHITESPACE"," ",205],["T_STRING","null",205],")",["T_WHITESPACE","\n    ",205],"{",["T_WHITESPACE","\n        ",206],["T_TRY","try",207],["T_WHITESPACE"," ",207],"{",["T_WHITESPACE","\n            ",207],["T_RETURN","return",208],["T_WHITESPACE"," ",208],["T_VARIABLE","$this",208],["T_OBJECT_OPERATOR","->",208],["T_STRING","_makeMessages",208],"(",["T_VARIABLE","$this",208],["T_OBJECT_OPERATOR","->",208],["T_STRING","_sqs",208],["T_OBJECT_OPERATOR","->",208],["T_STRING","receive",208],"(",["T_VARIABLE","$queueId",208],",",["T_WHITESPACE"," ",208],["T_VARIABLE","$max",208],",",["T_WHITESPACE"," ",208],["T_VARIABLE","$options",208],"[",["T_STRING","self",208],["T_DOUBLE_COLON","::",208],["T_STRING","VISIBILITY_TIMEOUT",208],"]",")",")",";",["T_WHITESPACE","\n        ",208],"}",["T_WHITESPACE"," ",209],["T_CATCH","catch",209],"(",["T_STRING","Zend_Service_Amazon_Exception",209],["T_WHITESPACE"," ",209],["T_VARIABLE","$e",209],")",["T_WHITESPACE"," ",209],"{",["T_WHITESPACE","\n            ",209],["T_THROW","throw",210],["T_WHITESPACE"," ",210],["T_NEW","new",210],["T_WHITESPACE"," ",210],["T_STRING","Zend_Cloud_QueueService_Exception",210],"(",["T_CONSTANT_ENCAPSED_STRING","'Error on recieving messages: '",210],".",["T_VARIABLE","$e",210],["T_OBJECT_OPERATOR","->",210],["T_STRING","getMessage",210],"(",")",",",["T_WHITESPACE"," ",210],["T_VARIABLE","$e",210],["T_OBJECT_OPERATOR","->",210],["T_STRING","getCode",210],"(",")",",",["T_WHITESPACE"," ",210],["T_VARIABLE","$e",210],")",";",["T_WHITESPACE","\n        ",210],"}",["T_WHITESPACE","\n    ",211],"}",["T_WHITESPACE","\n\n    ",212],["T_DOC_COMMENT","\/**\n     * Create Zend_Cloud_QueueService_Message array for\n     * Sqs messages.\n     *\n     * @param array $messages\n     * @return Zend_Cloud_QueueService_Message[]\n     *\/",214],["T_WHITESPACE","\n    ",220],["T_PROTECTED","protected",221],["T_WHITESPACE"," ",221],["T_FUNCTION","function",221],["T_WHITESPACE"," ",221],["T_STRING","_makeMessages",221],"(",["T_VARIABLE","$messages",221],")",["T_WHITESPACE","\n    ",221],"{",["T_WHITESPACE","\n        ",222],["T_VARIABLE","$messageClass",223],["T_WHITESPACE"," ",223],"=",["T_WHITESPACE"," ",223],["T_VARIABLE","$this",223],["T_OBJECT_OPERATOR","->",223],["T_STRING","getMessageClass",223],"(",")",";",["T_WHITESPACE","\n        ",223],["T_VARIABLE","$setClass",224],["T_WHITESPACE","     ",224],"=",["T_WHITESPACE"," ",224],["T_VARIABLE","$this",224],["T_OBJECT_OPERATOR","->",224],["T_STRING","getMessageSetClass",224],"(",")",";",["T_WHITESPACE","\n        ",224],["T_VARIABLE","$result",225],["T_WHITESPACE"," ",225],"=",["T_WHITESPACE"," ",225],["T_ARRAY","array",225],"(",")",";",["T_WHITESPACE","\n        ",225],["T_FOREACH","foreach",226],"(",["T_VARIABLE","$messages",226],["T_WHITESPACE"," ",226],["T_AS","as",226],["T_WHITESPACE"," ",226],["T_VARIABLE","$message",226],")",["T_WHITESPACE"," ",226],"{",["T_WHITESPACE","\n            ",226],["T_VARIABLE","$result",227],"[","]",["T_WHITESPACE"," ",227],"=",["T_WHITESPACE"," ",227],["T_NEW","new",227],["T_WHITESPACE"," ",227],["T_VARIABLE","$messageClass",227],"(",["T_VARIABLE","$message",227],"[",["T_CONSTANT_ENCAPSED_STRING","'body'",227],"]",",",["T_WHITESPACE"," ",227],["T_VARIABLE","$message",227],")",";",["T_WHITESPACE","\n        ",227],"}",["T_WHITESPACE","\n        ",228],["T_RETURN","return",229],["T_WHITESPACE"," ",229],["T_NEW","new",229],["T_WHITESPACE"," ",229],["T_VARIABLE","$setClass",229],"(",["T_VARIABLE","$result",229],")",";",["T_WHITESPACE","\n    ",229],"}",["T_WHITESPACE","\n\n    ",230],["T_DOC_COMMENT","\/**\n     * Delete the specified message from the specified queue.\n     *\n     * @param  string $queueId\n     * @param  Zend_Cloud_QueueService_Message $message\n     * @param  array  $options\n     * @return void\n     *\/",232],["T_WHITESPACE","\n    ",239],["T_PUBLIC","public",240],["T_WHITESPACE"," ",240],["T_FUNCTION","function",240],["T_WHITESPACE"," ",240],["T_STRING","deleteMessage",240],"(",["T_VARIABLE","$queueId",240],",",["T_WHITESPACE"," ",240],["T_VARIABLE","$message",240],",",["T_WHITESPACE"," ",240],["T_VARIABLE","$options",240],["T_WHITESPACE"," ",240],"=",["T_WHITESPACE"," ",240],["T_STRING","null",240],")",["T_WHITESPACE","\n    ",240],"{",["T_WHITESPACE","\n        ",241],["T_TRY","try",242],["T_WHITESPACE"," ",242],"{",["T_WHITESPACE","\n            ",242],["T_IF","if",243],"(",["T_VARIABLE","$message",243],["T_WHITESPACE"," ",243],["T_INSTANCEOF","instanceof",243],["T_WHITESPACE"," ",243],["T_STRING","Zend_Cloud_QueueService_Message",243],")",["T_WHITESPACE"," ",243],"{",["T_WHITESPACE","\n                ",243],["T_VARIABLE","$message",244],["T_WHITESPACE"," ",244],"=",["T_WHITESPACE"," ",244],["T_VARIABLE","$message",244],["T_OBJECT_OPERATOR","->",244],["T_STRING","getMessage",244],"(",")",";",["T_WHITESPACE","\n            ",244],"}",["T_WHITESPACE","\n            ",245],["T_VARIABLE","$messageId",246],["T_WHITESPACE"," ",246],"=",["T_WHITESPACE"," ",246],["T_VARIABLE","$message",246],"[",["T_CONSTANT_ENCAPSED_STRING","'handle'",246],"]",";",["T_WHITESPACE","\n            ",246],["T_RETURN","return",247],["T_WHITESPACE"," ",247],["T_VARIABLE","$this",247],["T_OBJECT_OPERATOR","->",247],["T_STRING","_sqs",247],["T_OBJECT_OPERATOR","->",247],["T_STRING","deleteMessage",247],"(",["T_VARIABLE","$queueId",247],",",["T_WHITESPACE"," ",247],["T_VARIABLE","$messageId",247],")",";",["T_WHITESPACE","\n        ",247],"}",["T_WHITESPACE"," ",248],["T_CATCH","catch",248],"(",["T_STRING","Zend_Service_Amazon_Exception",248],["T_WHITESPACE"," ",248],["T_VARIABLE","$e",248],")",["T_WHITESPACE"," ",248],"{",["T_WHITESPACE","\n            ",248],["T_THROW","throw",249],["T_WHITESPACE"," ",249],["T_NEW","new",249],["T_WHITESPACE"," ",249],["T_STRING","Zend_Cloud_QueueService_Exception",249],"(",["T_CONSTANT_ENCAPSED_STRING","'Error on deleting a message: '",249],".",["T_VARIABLE","$e",249],["T_OBJECT_OPERATOR","->",249],["T_STRING","getMessage",249],"(",")",",",["T_WHITESPACE"," ",249],["T_VARIABLE","$e",249],["T_OBJECT_OPERATOR","->",249],["T_STRING","getCode",249],"(",")",",",["T_WHITESPACE"," ",249],["T_VARIABLE","$e",249],")",";",["T_WHITESPACE","\n        ",249],"}",["T_WHITESPACE","\n    ",250],"}",["T_WHITESPACE","\n\n    ",251],["T_DOC_COMMENT","\/**\n     * Peek at the messages from the specified queue without removing them.\n     *\n     * @param  string $queueId\n     * @param  int $num How many messages\n     * @param  array  $options\n     * @return Zend_Cloud_QueueService_Message[]\n     *\/",253],["T_WHITESPACE","\n    ",260],["T_PUBLIC","public",261],["T_WHITESPACE"," ",261],["T_FUNCTION","function",261],["T_WHITESPACE"," ",261],["T_STRING","peekMessages",261],"(",["T_VARIABLE","$queueId",261],",",["T_WHITESPACE"," ",261],["T_VARIABLE","$num",261],["T_WHITESPACE"," ",261],"=",["T_WHITESPACE"," ",261],["T_LNUMBER","1",261],",",["T_WHITESPACE"," ",261],["T_VARIABLE","$options",261],["T_WHITESPACE"," ",261],"=",["T_WHITESPACE"," ",261],["T_STRING","null",261],")",["T_WHITESPACE","\n    ",261],"{",["T_WHITESPACE","\n        ",262],["T_TRY","try",263],["T_WHITESPACE"," ",263],"{",["T_WHITESPACE","\n            ",263],["T_RETURN","return",264],["T_WHITESPACE"," ",264],["T_VARIABLE","$this",264],["T_OBJECT_OPERATOR","->",264],["T_STRING","_makeMessages",264],"(",["T_VARIABLE","$this",264],["T_OBJECT_OPERATOR","->",264],["T_STRING","_sqs",264],["T_OBJECT_OPERATOR","->",264],["T_STRING","receive",264],"(",["T_VARIABLE","$queueId",264],",",["T_WHITESPACE"," ",264],["T_VARIABLE","$num",264],",",["T_WHITESPACE"," ",264],["T_LNUMBER","0",264],")",")",";",["T_WHITESPACE","\n        ",264],"}",["T_WHITESPACE"," ",265],["T_CATCH","catch",265],"(",["T_STRING","Zend_Service_Amazon_Exception",265],["T_WHITESPACE"," ",265],["T_VARIABLE","$e",265],")",["T_WHITESPACE"," ",265],"{",["T_WHITESPACE","\n            ",265],["T_THROW","throw",266],["T_WHITESPACE"," ",266],["T_NEW","new",266],["T_WHITESPACE"," ",266],["T_STRING","Zend_Cloud_QueueService_Exception",266],"(",["T_CONSTANT_ENCAPSED_STRING","'Error on peeking messages: '",266],".",["T_VARIABLE","$e",266],["T_OBJECT_OPERATOR","->",266],["T_STRING","getMessage",266],"(",")",",",["T_WHITESPACE"," ",266],["T_VARIABLE","$e",266],["T_OBJECT_OPERATOR","->",266],["T_STRING","getCode",266],"(",")",",",["T_WHITESPACE"," ",266],["T_VARIABLE","$e",266],")",";",["T_WHITESPACE","\n        ",266],"}",["T_WHITESPACE","\n    ",267],"}",["T_WHITESPACE","\n\n    ",268],["T_DOC_COMMENT","\/**\n     * Get SQS implementation\n     * @return Zend_Service_Amazon_Sqs\n     *\/",270],["T_WHITESPACE","\n    ",273],["T_PUBLIC","public",274],["T_WHITESPACE"," ",274],["T_FUNCTION","function",274],["T_WHITESPACE"," ",274],["T_STRING","getClient",274],"(",")",["T_WHITESPACE","\n    ",274],"{",["T_WHITESPACE","\n        ",275],["T_RETURN","return",276],["T_WHITESPACE"," ",276],["T_VARIABLE","$this",276],["T_OBJECT_OPERATOR","->",276],["T_STRING","_sqs",276],";",["T_WHITESPACE","\n    ",276],"}",["T_WHITESPACE","\n",277],"}",["T_WHITESPACE","\n",278]]
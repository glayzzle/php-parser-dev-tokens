[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * LICENSE\n *\n * This source file is subject to the new BSD license that is bundled\n * with this package in the file LICENSE.txt.\n * It is also available through the world-wide-web at this URL:\n * http:\/\/framework.zend.com\/license\/new-bsd\n * If you did not receive a copy of the license and are unable to\n * obtain it through the world-wide-web, please send an email\n * to license@zend.com so we can send you a copy immediately.\n *\n * @category   Zend\n * @package    Zend_Cloud\n * @subpackage QueueService\n * @copyright  Copyright (c) 2005-2015 Zend Technologies USA Inc. (http:\/\/www.zend.com)\n * @license    http:\/\/framework.zend.com\/license\/new-bsd     New BSD License\n *\/",2],["T_WHITESPACE","\n\n",18],["T_COMMENT","#require_once 'Zend\/Cloud\/QueueService\/Adapter\/AbstractAdapter.php';\n",20],["T_COMMENT","#require_once 'Zend\/Cloud\/QueueService\/Exception.php';\n",21],["T_COMMENT","#require_once 'Zend\/Queue.php';\n",22],["T_WHITESPACE","\n",23],["T_DOC_COMMENT","\/**\n * WindowsAzure adapter for simple queue service.\n *\n * @category   Zend\n * @package    Zend_Cloud\n * @subpackage QueueService\n * @copyright  Copyright (c) 2005-2015 Zend Technologies USA Inc. (http:\/\/www.zend.com)\n * @license    http:\/\/framework.zend.com\/license\/new-bsd     New BSD License\n *\/",24],["T_WHITESPACE","\n",32],["T_CLASS","class",33],["T_WHITESPACE"," ",33],["T_STRING","Zend_Cloud_QueueService_Adapter_ZendQueue",33],["T_WHITESPACE","\n    ",33],["T_EXTENDS","extends",34],["T_WHITESPACE"," ",34],["T_STRING","Zend_Cloud_QueueService_Adapter_AbstractAdapter",34],["T_WHITESPACE","\n",34],"{",["T_WHITESPACE","\n    ",35],["T_DOC_COMMENT","\/**\n     * Options array keys for the Zend_Queue adapter.\n     *\/",36],["T_WHITESPACE","\n    ",38],["T_CONST","const",39],["T_WHITESPACE"," ",39],["T_STRING","ADAPTER",39],["T_WHITESPACE"," ",39],"=",["T_WHITESPACE"," ",39],["T_CONSTANT_ENCAPSED_STRING","'adapter'",39],";",["T_WHITESPACE","\n\n    ",39],["T_DOC_COMMENT","\/**\n     * Storage client\n     *\n     * @var Zend_Queue\n     *\/",41],["T_WHITESPACE","\n    ",45],["T_PROTECTED","protected",46],["T_WHITESPACE"," ",46],["T_VARIABLE","$_queue",46],["T_WHITESPACE"," ",46],"=",["T_WHITESPACE"," ",46],["T_STRING","null",46],";",["T_WHITESPACE","\n\n    ",46],["T_DOC_COMMENT","\/**\n     * @var array All queues\n     *\/",48],["T_WHITESPACE","\n    ",50],["T_PROTECTED","protected",51],["T_WHITESPACE"," ",51],["T_VARIABLE","$_queues",51],["T_WHITESPACE"," ",51],"=",["T_WHITESPACE"," ",51],["T_ARRAY","array",51],"(",")",";",["T_WHITESPACE","\n\n    ",51],["T_DOC_COMMENT","\/**\n     * Constructor\n     *\n     * @param  array|Zend_Config $options\n     * @return void\n     *\/",53],["T_WHITESPACE","\n    ",58],["T_PUBLIC","public",59],["T_WHITESPACE"," ",59],["T_FUNCTION","function",59],["T_WHITESPACE"," ",59],["T_STRING","__construct",59],["T_WHITESPACE"," ",59],"(",["T_VARIABLE","$options",59],["T_WHITESPACE"," ",59],"=",["T_WHITESPACE"," ",59],["T_ARRAY","array",59],"(",")",")",["T_WHITESPACE","\n    ",59],"{",["T_WHITESPACE","\n        ",60],["T_IF","if",61],["T_WHITESPACE"," ",61],"(",["T_VARIABLE","$options",61],["T_WHITESPACE"," ",61],["T_INSTANCEOF","instanceof",61],["T_WHITESPACE"," ",61],["T_STRING","Zend_Config",61],")",["T_WHITESPACE"," ",61],"{",["T_WHITESPACE","\n            ",61],["T_VARIABLE","$options",62],["T_WHITESPACE"," ",62],"=",["T_WHITESPACE"," ",62],["T_VARIABLE","$options",62],["T_OBJECT_OPERATOR","->",62],["T_STRING","toArray",62],"(",")",";",["T_WHITESPACE","\n        ",62],"}",["T_WHITESPACE","\n\n        ",63],["T_IF","if",65],["T_WHITESPACE"," ",65],"(","!",["T_STRING","is_array",65],"(",["T_VARIABLE","$options",65],")",")",["T_WHITESPACE"," ",65],"{",["T_WHITESPACE","\n            ",65],["T_THROW","throw",66],["T_WHITESPACE"," ",66],["T_NEW","new",66],["T_WHITESPACE"," ",66],["T_STRING","Zend_Cloud_QueueService_Exception",66],"(",["T_CONSTANT_ENCAPSED_STRING","'Invalid options provided'",66],")",";",["T_WHITESPACE","\n        ",66],"}",["T_WHITESPACE","\n\n        ",67],["T_IF","if",69],["T_WHITESPACE"," ",69],"(",["T_ISSET","isset",69],"(",["T_VARIABLE","$options",69],"[",["T_STRING","self",69],["T_DOUBLE_COLON","::",69],["T_STRING","MESSAGE_CLASS",69],"]",")",")",["T_WHITESPACE"," ",69],"{",["T_WHITESPACE","\n            ",69],["T_VARIABLE","$this",70],["T_OBJECT_OPERATOR","->",70],["T_STRING","setMessageClass",70],"(",["T_VARIABLE","$options",70],"[",["T_STRING","self",70],["T_DOUBLE_COLON","::",70],["T_STRING","MESSAGE_CLASS",70],"]",")",";",["T_WHITESPACE","\n        ",70],"}",["T_WHITESPACE","\n\n        ",71],["T_IF","if",73],["T_WHITESPACE"," ",73],"(",["T_ISSET","isset",73],"(",["T_VARIABLE","$options",73],"[",["T_STRING","self",73],["T_DOUBLE_COLON","::",73],["T_STRING","MESSAGESET_CLASS",73],"]",")",")",["T_WHITESPACE"," ",73],"{",["T_WHITESPACE","\n            ",73],["T_VARIABLE","$this",74],["T_OBJECT_OPERATOR","->",74],["T_STRING","setMessageSetClass",74],"(",["T_VARIABLE","$options",74],"[",["T_STRING","self",74],["T_DOUBLE_COLON","::",74],["T_STRING","MESSAGESET_CLASS",74],"]",")",";",["T_WHITESPACE","\n        ",74],"}",["T_WHITESPACE","\n\n        ",75],["T_COMMENT","\/\/ Build Zend_Service_WindowsAzure_Storage_Blob instance\n",77],["T_WHITESPACE","        ",78],["T_IF","if",78],["T_WHITESPACE"," ",78],"(","!",["T_ISSET","isset",78],"(",["T_VARIABLE","$options",78],"[",["T_STRING","self",78],["T_DOUBLE_COLON","::",78],["T_STRING","ADAPTER",78],"]",")",")",["T_WHITESPACE"," ",78],"{",["T_WHITESPACE","\n            ",78],["T_THROW","throw",79],["T_WHITESPACE"," ",79],["T_NEW","new",79],["T_WHITESPACE"," ",79],["T_STRING","Zend_Cloud_QueueService_Exception",79],"(",["T_CONSTANT_ENCAPSED_STRING","'No Zend_Queue adapter provided'",79],")",";",["T_WHITESPACE","\n        ",79],"}",["T_WHITESPACE"," ",80],["T_ELSE","else",80],["T_WHITESPACE"," ",80],"{",["T_WHITESPACE","\n            ",80],["T_VARIABLE","$adapter",81],["T_WHITESPACE"," ",81],"=",["T_WHITESPACE"," ",81],["T_VARIABLE","$options",81],"[",["T_STRING","self",81],["T_DOUBLE_COLON","::",81],["T_STRING","ADAPTER",81],"]",";",["T_WHITESPACE","\n            ",81],["T_UNSET","unset",82],"(",["T_VARIABLE","$options",82],"[",["T_STRING","self",82],["T_DOUBLE_COLON","::",82],["T_STRING","ADAPTER",82],"]",")",";",["T_WHITESPACE","\n        ",82],"}",["T_WHITESPACE","\n        ",83],["T_TRY","try",84],["T_WHITESPACE"," ",84],"{",["T_WHITESPACE","\n            ",84],["T_VARIABLE","$this",85],["T_OBJECT_OPERATOR","->",85],["T_STRING","_queue",85],["T_WHITESPACE"," ",85],"=",["T_WHITESPACE"," ",85],["T_NEW","new",85],["T_WHITESPACE"," ",85],["T_STRING","Zend_Queue",85],"(",["T_VARIABLE","$adapter",85],",",["T_WHITESPACE"," ",85],["T_VARIABLE","$options",85],")",";",["T_WHITESPACE","\n        ",85],"}",["T_WHITESPACE"," ",86],["T_CATCH","catch",86],["T_WHITESPACE"," ",86],"(",["T_STRING","Zend_Queue_Exception",86],["T_WHITESPACE"," ",86],["T_VARIABLE","$e",86],")",["T_WHITESPACE"," ",86],"{",["T_WHITESPACE","\n            ",86],["T_THROW","throw",87],["T_WHITESPACE"," ",87],["T_NEW","new",87],["T_WHITESPACE"," ",87],["T_STRING","Zend_Cloud_QueueService_Exception",87],"(",["T_CONSTANT_ENCAPSED_STRING","'Error on create: '",87],".",["T_VARIABLE","$e",87],["T_OBJECT_OPERATOR","->",87],["T_STRING","getMessage",87],"(",")",",",["T_WHITESPACE"," ",87],["T_VARIABLE","$e",87],["T_OBJECT_OPERATOR","->",87],["T_STRING","getCode",87],"(",")",",",["T_WHITESPACE"," ",87],["T_VARIABLE","$e",87],")",";",["T_WHITESPACE","\n        ",87],"}",["T_WHITESPACE","\n    ",88],"}",["T_WHITESPACE","\n\n    ",89],["T_DOC_COMMENT","\/**\n     * Create a queue. Returns the ID of the created queue (typically the URL).\n     * It may take some time to create the queue. Check your vendor's\n     * documentation for details.\n     *\n     * @param  string $name\n     * @param  array  $options\n     * @return string Queue ID (typically URL)\n     *\/",91],["T_WHITESPACE","\n    ",99],["T_PUBLIC","public",100],["T_WHITESPACE"," ",100],["T_FUNCTION","function",100],["T_WHITESPACE"," ",100],["T_STRING","createQueue",100],"(",["T_VARIABLE","$name",100],",",["T_WHITESPACE"," ",100],["T_VARIABLE","$options",100],["T_WHITESPACE"," ",100],"=",["T_WHITESPACE"," ",100],["T_STRING","null",100],")",["T_WHITESPACE","\n    ",100],"{",["T_WHITESPACE","\n        ",101],["T_TRY","try",102],["T_WHITESPACE"," ",102],"{",["T_WHITESPACE","\n            ",102],["T_VARIABLE","$this",103],["T_OBJECT_OPERATOR","->",103],["T_STRING","_queues",103],"[",["T_VARIABLE","$name",103],"]",["T_WHITESPACE"," ",103],"=",["T_WHITESPACE"," ",103],["T_VARIABLE","$this",103],["T_OBJECT_OPERATOR","->",103],["T_STRING","_queue",103],["T_OBJECT_OPERATOR","->",103],["T_STRING","createQueue",103],"(",["T_VARIABLE","$name",103],",",["T_WHITESPACE"," ",103],["T_ISSET","isset",103],"(",["T_VARIABLE","$options",103],"[",["T_STRING","Zend_Queue",103],["T_DOUBLE_COLON","::",103],["T_STRING","TIMEOUT",103],"]",")","?",["T_VARIABLE","$options",103],"[",["T_STRING","Zend_Queue",103],["T_DOUBLE_COLON","::",103],["T_STRING","TIMEOUT",103],"]",":",["T_STRING","null",103],")",";",["T_WHITESPACE","\n            ",103],["T_RETURN","return",104],["T_WHITESPACE"," ",104],["T_VARIABLE","$name",104],";",["T_WHITESPACE","\n        ",104],"}",["T_WHITESPACE"," ",105],["T_CATCH","catch",105],["T_WHITESPACE"," ",105],"(",["T_STRING","Zend_Queue_Exception",105],["T_WHITESPACE"," ",105],["T_VARIABLE","$e",105],")",["T_WHITESPACE"," ",105],"{",["T_WHITESPACE","\n            ",105],["T_THROW","throw",106],["T_WHITESPACE"," ",106],["T_NEW","new",106],["T_WHITESPACE"," ",106],["T_STRING","Zend_Cloud_QueueService_Exception",106],"(",["T_CONSTANT_ENCAPSED_STRING","'Error on queue creation: '",106],".",["T_VARIABLE","$e",106],["T_OBJECT_OPERATOR","->",106],["T_STRING","getMessage",106],"(",")",",",["T_WHITESPACE"," ",106],["T_VARIABLE","$e",106],["T_OBJECT_OPERATOR","->",106],["T_STRING","getCode",106],"(",")",",",["T_WHITESPACE"," ",106],["T_VARIABLE","$e",106],")",";",["T_WHITESPACE","\n        ",106],"}",["T_WHITESPACE","\n    ",107],"}",["T_WHITESPACE","\n\n    ",108],["T_DOC_COMMENT","\/**\n     * Delete a queue. All messages in the queue will also be deleted.\n     *\n     * @param  string $queueId\n     * @param  array  $options\n     * @return boolean true if successful, false otherwise\n     *\/",110],["T_WHITESPACE","\n    ",116],["T_PUBLIC","public",117],["T_WHITESPACE"," ",117],["T_FUNCTION","function",117],["T_WHITESPACE"," ",117],["T_STRING","deleteQueue",117],"(",["T_VARIABLE","$queueId",117],",",["T_WHITESPACE"," ",117],["T_VARIABLE","$options",117],["T_WHITESPACE"," ",117],"=",["T_WHITESPACE"," ",117],["T_STRING","null",117],")",["T_WHITESPACE","\n    ",117],"{",["T_WHITESPACE","\n        ",118],["T_IF","if",119],["T_WHITESPACE"," ",119],"(","!",["T_ISSET","isset",119],"(",["T_VARIABLE","$this",119],["T_OBJECT_OPERATOR","->",119],["T_STRING","_queues",119],"[",["T_VARIABLE","$queueId",119],"]",")",")",["T_WHITESPACE"," ",119],"{",["T_WHITESPACE","\n            ",119],["T_RETURN","return",120],["T_WHITESPACE"," ",120],["T_STRING","false",120],";",["T_WHITESPACE","\n        ",120],"}",["T_WHITESPACE","\n        ",121],["T_TRY","try",122],["T_WHITESPACE"," ",122],"{",["T_WHITESPACE","\n            ",122],["T_IF","if",123],["T_WHITESPACE"," ",123],"(",["T_VARIABLE","$this",123],["T_OBJECT_OPERATOR","->",123],["T_STRING","_queues",123],"[",["T_VARIABLE","$queueId",123],"]",["T_OBJECT_OPERATOR","->",123],["T_STRING","deleteQueue",123],"(",")",")",["T_WHITESPACE"," ",123],"{",["T_WHITESPACE","\n                ",123],["T_UNSET","unset",124],"(",["T_VARIABLE","$this",124],["T_OBJECT_OPERATOR","->",124],["T_STRING","_queues",124],"[",["T_VARIABLE","$queueId",124],"]",")",";",["T_WHITESPACE","\n                ",124],["T_RETURN","return",125],["T_WHITESPACE"," ",125],["T_STRING","true",125],";",["T_WHITESPACE","\n            ",125],"}",["T_WHITESPACE","\n        ",126],"}",["T_WHITESPACE"," ",127],["T_CATCH","catch",127],["T_WHITESPACE"," ",127],"(",["T_STRING","Zend_Queue_Exception",127],["T_WHITESPACE"," ",127],["T_VARIABLE","$e",127],")",["T_WHITESPACE"," ",127],"{",["T_WHITESPACE","\n            ",127],["T_THROW","throw",128],["T_WHITESPACE"," ",128],["T_NEW","new",128],["T_WHITESPACE"," ",128],["T_STRING","Zend_Cloud_QueueService_Exception",128],"(",["T_CONSTANT_ENCAPSED_STRING","'Error on queue deletion: '",128],".",["T_VARIABLE","$e",128],["T_OBJECT_OPERATOR","->",128],["T_STRING","getMessage",128],"(",")",",",["T_WHITESPACE"," ",128],["T_VARIABLE","$e",128],["T_OBJECT_OPERATOR","->",128],["T_STRING","getCode",128],"(",")",",",["T_WHITESPACE"," ",128],["T_VARIABLE","$e",128],")",";",["T_WHITESPACE","\n        ",128],"}",["T_WHITESPACE","\n    ",129],"}",["T_WHITESPACE","\n\n    ",130],["T_DOC_COMMENT","\/**\n     * List all queues.\n     *\n     * @param  array $options\n     * @return array Queue IDs\n     *\/",132],["T_WHITESPACE","\n    ",137],["T_PUBLIC","public",138],["T_WHITESPACE"," ",138],["T_FUNCTION","function",138],["T_WHITESPACE"," ",138],["T_STRING","listQueues",138],"(",["T_VARIABLE","$options",138],["T_WHITESPACE"," ",138],"=",["T_WHITESPACE"," ",138],["T_STRING","null",138],")",["T_WHITESPACE","\n    ",138],"{",["T_WHITESPACE","\n        ",139],["T_TRY","try",140],["T_WHITESPACE"," ",140],"{",["T_WHITESPACE","\n            ",140],["T_RETURN","return",141],["T_WHITESPACE"," ",141],["T_VARIABLE","$this",141],["T_OBJECT_OPERATOR","->",141],["T_STRING","_queue",141],["T_OBJECT_OPERATOR","->",141],["T_STRING","getQueues",141],"(",")",";",["T_WHITESPACE","\n        ",141],"}",["T_WHITESPACE"," ",142],["T_CATCH","catch",142],["T_WHITESPACE"," ",142],"(",["T_STRING","Zend_Queue_Exception",142],["T_WHITESPACE"," ",142],["T_VARIABLE","$e",142],")",["T_WHITESPACE"," ",142],"{",["T_WHITESPACE","\n            ",142],["T_THROW","throw",143],["T_WHITESPACE"," ",143],["T_NEW","new",143],["T_WHITESPACE"," ",143],["T_STRING","Zend_Cloud_QueueService_Exception",143],"(",["T_CONSTANT_ENCAPSED_STRING","'Error on listing queues: '",143],".",["T_VARIABLE","$e",143],["T_OBJECT_OPERATOR","->",143],["T_STRING","getMessage",143],"(",")",",",["T_WHITESPACE"," ",143],["T_VARIABLE","$e",143],["T_OBJECT_OPERATOR","->",143],["T_STRING","getCode",143],"(",")",",",["T_WHITESPACE"," ",143],["T_VARIABLE","$e",143],")",";",["T_WHITESPACE","\n        ",143],"}",["T_WHITESPACE","\n    ",144],"}",["T_WHITESPACE","\n\n    ",145],["T_DOC_COMMENT","\/**\n     * Get a key\/value array of metadata for the given queue.\n     *\n     * @param  string $queueId\n     * @param  array  $options\n     * @return array\n     *\/",147],["T_WHITESPACE","\n    ",153],["T_PUBLIC","public",154],["T_WHITESPACE"," ",154],["T_FUNCTION","function",154],["T_WHITESPACE"," ",154],["T_STRING","fetchQueueMetadata",154],"(",["T_VARIABLE","$queueId",154],",",["T_WHITESPACE"," ",154],["T_VARIABLE","$options",154],["T_WHITESPACE"," ",154],"=",["T_WHITESPACE"," ",154],["T_STRING","null",154],")",["T_WHITESPACE","\n    ",154],"{",["T_WHITESPACE","\n        ",155],["T_IF","if",156],["T_WHITESPACE"," ",156],"(","!",["T_ISSET","isset",156],"(",["T_VARIABLE","$this",156],["T_OBJECT_OPERATOR","->",156],["T_STRING","_queues",156],"[",["T_VARIABLE","$queueId",156],"]",")",")",["T_WHITESPACE"," ",156],"{",["T_WHITESPACE","\n            ",156],["T_RETURN","return",157],["T_WHITESPACE"," ",157],["T_STRING","false",157],";",["T_WHITESPACE","\n        ",157],"}",["T_WHITESPACE","\n        ",158],["T_TRY","try",159],["T_WHITESPACE"," ",159],"{",["T_WHITESPACE","\n            ",159],["T_RETURN","return",160],["T_WHITESPACE"," ",160],["T_VARIABLE","$this",160],["T_OBJECT_OPERATOR","->",160],["T_STRING","_queues",160],"[",["T_VARIABLE","$queueId",160],"]",["T_OBJECT_OPERATOR","->",160],["T_STRING","getOptions",160],"(",")",";",["T_WHITESPACE","\n        ",160],"}",["T_WHITESPACE"," ",161],["T_CATCH","catch",161],["T_WHITESPACE"," ",161],"(",["T_STRING","Zend_Queue_Exception",161],["T_WHITESPACE"," ",161],["T_VARIABLE","$e",161],")",["T_WHITESPACE"," ",161],"{",["T_WHITESPACE","\n            ",161],["T_THROW","throw",162],["T_WHITESPACE"," ",162],["T_NEW","new",162],["T_WHITESPACE"," ",162],["T_STRING","Zend_Cloud_QueueService_Exception",162],"(",["T_CONSTANT_ENCAPSED_STRING","'Error on fetching queue metadata: '",162],".",["T_VARIABLE","$e",162],["T_OBJECT_OPERATOR","->",162],["T_STRING","getMessage",162],"(",")",",",["T_WHITESPACE"," ",162],["T_VARIABLE","$e",162],["T_OBJECT_OPERATOR","->",162],["T_STRING","getCode",162],"(",")",",",["T_WHITESPACE"," ",162],["T_VARIABLE","$e",162],")",";",["T_WHITESPACE","\n        ",162],"}",["T_WHITESPACE","\n    ",163],"}",["T_WHITESPACE","\n\n    ",164],["T_DOC_COMMENT","\/**\n     * Store a key\/value array of metadata for the specified queue.\n     * WARNING: This operation overwrites any metadata that is located at\n     * $destinationPath. Some adapters may not support this method.\n     *\n     * @param  string $queueId\n     * @param  array  $metadata\n     * @param  array  $options\n     * @return void\n     *\/",166],["T_WHITESPACE","\n    ",175],["T_PUBLIC","public",176],["T_WHITESPACE"," ",176],["T_FUNCTION","function",176],["T_WHITESPACE"," ",176],["T_STRING","storeQueueMetadata",176],"(",["T_VARIABLE","$queueId",176],",",["T_WHITESPACE"," ",176],["T_VARIABLE","$metadata",176],",",["T_WHITESPACE"," ",176],["T_VARIABLE","$options",176],["T_WHITESPACE"," ",176],"=",["T_WHITESPACE"," ",176],["T_STRING","null",176],")",["T_WHITESPACE","\n    ",176],"{",["T_WHITESPACE","\n        ",177],["T_IF","if",178],["T_WHITESPACE"," ",178],"(","!",["T_ISSET","isset",178],"(",["T_VARIABLE","$this",178],["T_OBJECT_OPERATOR","->",178],["T_STRING","_queues",178],"[",["T_VARIABLE","$queueId",178],"]",")",")",["T_WHITESPACE"," ",178],"{",["T_WHITESPACE","\n            ",178],["T_THROW","throw",179],["T_WHITESPACE"," ",179],["T_NEW","new",179],["T_WHITESPACE"," ",179],["T_STRING","Zend_Cloud_QueueService_Exception",179],"(","\"",["T_ENCAPSED_AND_WHITESPACE","No such queue: ",179],["T_VARIABLE","$queueId",179],"\"",")",";",["T_WHITESPACE","\n        ",179],"}",["T_WHITESPACE","\n        ",180],["T_TRY","try",181],["T_WHITESPACE"," ",181],"{",["T_WHITESPACE","\n            ",181],["T_RETURN","return",182],["T_WHITESPACE"," ",182],["T_VARIABLE","$this",182],["T_OBJECT_OPERATOR","->",182],["T_STRING","_queues",182],"[",["T_VARIABLE","$queueId",182],"]",["T_OBJECT_OPERATOR","->",182],["T_STRING","setOptions",182],"(",["T_VARIABLE","$metadata",182],")",";",["T_WHITESPACE","\n        ",182],"}",["T_WHITESPACE"," ",183],["T_CATCH","catch",183],["T_WHITESPACE"," ",183],"(",["T_STRING","Zend_Queue_Exception",183],["T_WHITESPACE"," ",183],["T_VARIABLE","$e",183],")",["T_WHITESPACE"," ",183],"{",["T_WHITESPACE","\n            ",183],["T_THROW","throw",184],["T_WHITESPACE"," ",184],["T_NEW","new",184],["T_WHITESPACE"," ",184],["T_STRING","Zend_Cloud_QueueService_Exception",184],"(",["T_CONSTANT_ENCAPSED_STRING","'Error on setting queue metadata: '",184],".",["T_VARIABLE","$e",184],["T_OBJECT_OPERATOR","->",184],["T_STRING","getMessage",184],"(",")",",",["T_WHITESPACE"," ",184],["T_VARIABLE","$e",184],["T_OBJECT_OPERATOR","->",184],["T_STRING","getCode",184],"(",")",",",["T_WHITESPACE"," ",184],["T_VARIABLE","$e",184],")",";",["T_WHITESPACE","\n        ",184],"}",["T_WHITESPACE","\n    ",185],"}",["T_WHITESPACE","\n\n    ",186],["T_DOC_COMMENT","\/**\n     * Send a message to the specified queue.\n     *\n     * @param  string $queueId\n     * @param  string $message\n     * @param  array  $options\n     * @return string Message ID\n     *\/",188],["T_WHITESPACE","\n    ",195],["T_PUBLIC","public",196],["T_WHITESPACE"," ",196],["T_FUNCTION","function",196],["T_WHITESPACE"," ",196],["T_STRING","sendMessage",196],"(",["T_VARIABLE","$queueId",196],",",["T_WHITESPACE"," ",196],["T_VARIABLE","$message",196],",",["T_WHITESPACE"," ",196],["T_VARIABLE","$options",196],["T_WHITESPACE"," ",196],"=",["T_WHITESPACE"," ",196],["T_STRING","null",196],")",["T_WHITESPACE","\n    ",196],"{",["T_WHITESPACE","\n        ",197],["T_IF","if",198],["T_WHITESPACE"," ",198],"(","!",["T_ISSET","isset",198],"(",["T_VARIABLE","$this",198],["T_OBJECT_OPERATOR","->",198],["T_STRING","_queues",198],"[",["T_VARIABLE","$queueId",198],"]",")",")",["T_WHITESPACE"," ",198],"{",["T_WHITESPACE","\n            ",198],["T_THROW","throw",199],["T_WHITESPACE"," ",199],["T_NEW","new",199],["T_WHITESPACE"," ",199],["T_STRING","Zend_Cloud_QueueService_Exception",199],"(","\"",["T_ENCAPSED_AND_WHITESPACE","No such queue: ",199],["T_VARIABLE","$queueId",199],"\"",")",";",["T_WHITESPACE","\n        ",199],"}",["T_WHITESPACE","\n        ",200],["T_TRY","try",201],["T_WHITESPACE"," ",201],"{",["T_WHITESPACE","\n            ",201],["T_RETURN","return",202],["T_WHITESPACE"," ",202],["T_VARIABLE","$this",202],["T_OBJECT_OPERATOR","->",202],["T_STRING","_queues",202],"[",["T_VARIABLE","$queueId",202],"]",["T_OBJECT_OPERATOR","->",202],["T_STRING","send",202],"(",["T_VARIABLE","$message",202],")",";",["T_WHITESPACE","\n        ",202],"}",["T_WHITESPACE"," ",203],["T_CATCH","catch",203],["T_WHITESPACE"," ",203],"(",["T_STRING","Zend_Queue_Exception",203],["T_WHITESPACE"," ",203],["T_VARIABLE","$e",203],")",["T_WHITESPACE"," ",203],"{",["T_WHITESPACE","\n            ",203],["T_THROW","throw",204],["T_WHITESPACE"," ",204],["T_NEW","new",204],["T_WHITESPACE"," ",204],["T_STRING","Zend_Cloud_QueueService_Exception",204],"(",["T_CONSTANT_ENCAPSED_STRING","'Error on sending message: '",204],".",["T_VARIABLE","$e",204],["T_OBJECT_OPERATOR","->",204],["T_STRING","getMessage",204],"(",")",",",["T_WHITESPACE"," ",204],["T_VARIABLE","$e",204],["T_OBJECT_OPERATOR","->",204],["T_STRING","getCode",204],"(",")",",",["T_WHITESPACE"," ",204],["T_VARIABLE","$e",204],")",";",["T_WHITESPACE","\n        ",204],"}",["T_WHITESPACE","\n    ",205],"}",["T_WHITESPACE","\n\n    ",206],["T_DOC_COMMENT","\/**\n     * Recieve at most $max messages from the specified queue and return the\n     * message IDs for messages recieved.\n     *\n     * @param  string $queueId\n     * @param  int    $max\n     * @param  array  $options\n     * @return array\n     *\/",208],["T_WHITESPACE","\n    ",216],["T_PUBLIC","public",217],["T_WHITESPACE"," ",217],["T_FUNCTION","function",217],["T_WHITESPACE"," ",217],["T_STRING","receiveMessages",217],"(",["T_VARIABLE","$queueId",217],",",["T_WHITESPACE"," ",217],["T_VARIABLE","$max",217],["T_WHITESPACE"," ",217],"=",["T_WHITESPACE"," ",217],["T_LNUMBER","1",217],",",["T_WHITESPACE"," ",217],["T_VARIABLE","$options",217],["T_WHITESPACE"," ",217],"=",["T_WHITESPACE"," ",217],["T_STRING","null",217],")",["T_WHITESPACE","\n    ",217],"{",["T_WHITESPACE","\n        ",218],["T_IF","if",219],["T_WHITESPACE"," ",219],"(","!",["T_ISSET","isset",219],"(",["T_VARIABLE","$this",219],["T_OBJECT_OPERATOR","->",219],["T_STRING","_queues",219],"[",["T_VARIABLE","$queueId",219],"]",")",")",["T_WHITESPACE"," ",219],"{",["T_WHITESPACE","\n            ",219],["T_THROW","throw",220],["T_WHITESPACE"," ",220],["T_NEW","new",220],["T_WHITESPACE"," ",220],["T_STRING","Zend_Cloud_QueueService_Exception",220],"(","\"",["T_ENCAPSED_AND_WHITESPACE","No such queue: ",220],["T_VARIABLE","$queueId",220],"\"",")",";",["T_WHITESPACE","\n        ",220],"}",["T_WHITESPACE","\n        ",221],["T_TRY","try",222],["T_WHITESPACE"," ",222],"{",["T_WHITESPACE","\n            ",222],["T_VARIABLE","$res",223],["T_WHITESPACE"," ",223],"=",["T_WHITESPACE"," ",223],["T_VARIABLE","$this",223],["T_OBJECT_OPERATOR","->",223],["T_STRING","_queues",223],"[",["T_VARIABLE","$queueId",223],"]",["T_OBJECT_OPERATOR","->",223],["T_STRING","receive",223],"(",["T_VARIABLE","$max",223],",",["T_WHITESPACE"," ",223],["T_ISSET","isset",223],"(",["T_VARIABLE","$options",223],"[",["T_STRING","Zend_Queue",223],["T_DOUBLE_COLON","::",223],["T_STRING","TIMEOUT",223],"]",")","?",["T_VARIABLE","$options",223],"[",["T_STRING","Zend_Queue",223],["T_DOUBLE_COLON","::",223],["T_STRING","TIMEOUT",223],"]",":",["T_STRING","null",223],")",";",["T_WHITESPACE","\n            ",223],["T_IF","if",224],["T_WHITESPACE"," ",224],"(",["T_VARIABLE","$res",224],["T_WHITESPACE"," ",224],["T_INSTANCEOF","instanceof",224],["T_WHITESPACE"," ",224],["T_STRING","Iterator",224],")",["T_WHITESPACE"," ",224],"{",["T_WHITESPACE","\n                ",224],["T_RETURN","return",225],["T_WHITESPACE"," ",225],["T_VARIABLE","$this",225],["T_OBJECT_OPERATOR","->",225],["T_STRING","_makeMessages",225],"(",["T_VARIABLE","$res",225],")",";",["T_WHITESPACE","\n            ",225],"}",["T_WHITESPACE"," ",226],["T_ELSE","else",226],["T_WHITESPACE"," ",226],"{",["T_WHITESPACE","\n                ",226],["T_RETURN","return",227],["T_WHITESPACE"," ",227],["T_VARIABLE","$this",227],["T_OBJECT_OPERATOR","->",227],["T_STRING","_makeMessages",227],"(",["T_ARRAY","array",227],"(",["T_VARIABLE","$res",227],")",")",";",["T_WHITESPACE","\n            ",227],"}",["T_WHITESPACE","\n        ",228],"}",["T_WHITESPACE"," ",229],["T_CATCH","catch",229],["T_WHITESPACE"," ",229],"(",["T_STRING","Zend_Queue_Exception",229],["T_WHITESPACE"," ",229],["T_VARIABLE","$e",229],")",["T_WHITESPACE"," ",229],"{",["T_WHITESPACE","\n            ",229],["T_THROW","throw",230],["T_WHITESPACE"," ",230],["T_NEW","new",230],["T_WHITESPACE"," ",230],["T_STRING","Zend_Cloud_QueueService_Exception",230],"(",["T_CONSTANT_ENCAPSED_STRING","'Error on recieving messages: '",230],".",["T_VARIABLE","$e",230],["T_OBJECT_OPERATOR","->",230],["T_STRING","getMessage",230],"(",")",",",["T_WHITESPACE"," ",230],["T_VARIABLE","$e",230],["T_OBJECT_OPERATOR","->",230],["T_STRING","getCode",230],"(",")",",",["T_WHITESPACE"," ",230],["T_VARIABLE","$e",230],")",";",["T_WHITESPACE","\n        ",230],"}",["T_WHITESPACE","\n    ",231],"}",["T_WHITESPACE","\n\n    ",232],["T_DOC_COMMENT","\/**\n     * Create Zend_Cloud_QueueService_Message array for\n     * Azure messages.\n     *\n     * @param array $messages\n     * @return Zend_Cloud_QueueService_Message[]\n     *\/",234],["T_WHITESPACE","\n    ",240],["T_PROTECTED","protected",241],["T_WHITESPACE"," ",241],["T_FUNCTION","function",241],["T_WHITESPACE"," ",241],["T_STRING","_makeMessages",241],"(",["T_VARIABLE","$messages",241],")",["T_WHITESPACE","\n    ",241],"{",["T_WHITESPACE","\n        ",242],["T_VARIABLE","$messageClass",243],["T_WHITESPACE"," ",243],"=",["T_WHITESPACE"," ",243],["T_VARIABLE","$this",243],["T_OBJECT_OPERATOR","->",243],["T_STRING","getMessageClass",243],"(",")",";",["T_WHITESPACE","\n        ",243],["T_VARIABLE","$setClass",244],["T_WHITESPACE","     ",244],"=",["T_WHITESPACE"," ",244],["T_VARIABLE","$this",244],["T_OBJECT_OPERATOR","->",244],["T_STRING","getMessageSetClass",244],"(",")",";",["T_WHITESPACE","\n        ",244],["T_VARIABLE","$result",245],["T_WHITESPACE"," ",245],"=",["T_WHITESPACE"," ",245],["T_ARRAY","array",245],"(",")",";",["T_WHITESPACE","\n        ",245],["T_FOREACH","foreach",246],["T_WHITESPACE"," ",246],"(",["T_VARIABLE","$messages",246],["T_WHITESPACE"," ",246],["T_AS","as",246],["T_WHITESPACE"," ",246],["T_VARIABLE","$message",246],")",["T_WHITESPACE"," ",246],"{",["T_WHITESPACE","\n            ",246],["T_VARIABLE","$result",247],"[","]",["T_WHITESPACE"," ",247],"=",["T_WHITESPACE"," ",247],["T_NEW","new",247],["T_WHITESPACE"," ",247],["T_VARIABLE","$messageClass",247],"(",["T_VARIABLE","$message",247],["T_OBJECT_OPERATOR","->",247],["T_STRING","body",247],",",["T_WHITESPACE"," ",247],["T_VARIABLE","$message",247],")",";",["T_WHITESPACE","\n        ",247],"}",["T_WHITESPACE","\n        ",248],["T_RETURN","return",249],["T_WHITESPACE"," ",249],["T_NEW","new",249],["T_WHITESPACE"," ",249],["T_VARIABLE","$setClass",249],"(",["T_VARIABLE","$result",249],")",";",["T_WHITESPACE","\n    ",249],"}",["T_WHITESPACE","\n\n    ",250],["T_DOC_COMMENT","\/**\n     * Delete the specified message from the specified queue.\n     *\n     * @param  string $queueId\n     * @param  Zend_Cloud_QueueService_Message $message Message ID or message\n     * @param  array  $options\n     * @return void\n     *\/",252],["T_WHITESPACE","\n    ",259],["T_PUBLIC","public",260],["T_WHITESPACE"," ",260],["T_FUNCTION","function",260],["T_WHITESPACE"," ",260],["T_STRING","deleteMessage",260],"(",["T_VARIABLE","$queueId",260],",",["T_WHITESPACE"," ",260],["T_VARIABLE","$message",260],",",["T_WHITESPACE"," ",260],["T_VARIABLE","$options",260],["T_WHITESPACE"," ",260],"=",["T_WHITESPACE"," ",260],["T_STRING","null",260],")",["T_WHITESPACE","\n    ",260],"{",["T_WHITESPACE","\n        ",261],["T_IF","if",262],["T_WHITESPACE"," ",262],"(","!",["T_ISSET","isset",262],"(",["T_VARIABLE","$this",262],["T_OBJECT_OPERATOR","->",262],["T_STRING","_queues",262],"[",["T_VARIABLE","$queueId",262],"]",")",")",["T_WHITESPACE"," ",262],"{",["T_WHITESPACE","\n            ",262],["T_THROW","throw",263],["T_WHITESPACE"," ",263],["T_NEW","new",263],["T_WHITESPACE"," ",263],["T_STRING","Zend_Cloud_QueueService_Exception",263],"(","\"",["T_ENCAPSED_AND_WHITESPACE","No such queue: ",263],["T_VARIABLE","$queueId",263],"\"",")",";",["T_WHITESPACE","\n        ",263],"}",["T_WHITESPACE","\n        ",264],["T_TRY","try",265],["T_WHITESPACE"," ",265],"{",["T_WHITESPACE","\n            ",265],["T_IF","if",266],["T_WHITESPACE"," ",266],"(",["T_VARIABLE","$message",266],["T_WHITESPACE"," ",266],["T_INSTANCEOF","instanceof",266],["T_WHITESPACE"," ",266],["T_STRING","Zend_Cloud_QueueService_Message",266],")",["T_WHITESPACE"," ",266],"{",["T_WHITESPACE","\n                ",266],["T_VARIABLE","$message",267],["T_WHITESPACE"," ",267],"=",["T_WHITESPACE"," ",267],["T_VARIABLE","$message",267],["T_OBJECT_OPERATOR","->",267],["T_STRING","getMessage",267],"(",")",";",["T_WHITESPACE","\n            ",267],"}",["T_WHITESPACE","\n            ",268],["T_IF","if",269],["T_WHITESPACE"," ",269],"(","!","(",["T_VARIABLE","$message",269],["T_WHITESPACE"," ",269],["T_INSTANCEOF","instanceof",269],["T_WHITESPACE"," ",269],["T_STRING","Zend_Queue_Message",269],")",")",["T_WHITESPACE"," ",269],"{",["T_WHITESPACE","\n                ",269],["T_THROW","throw",270],["T_WHITESPACE"," ",270],["T_NEW","new",270],["T_WHITESPACE"," ",270],["T_STRING","Zend_Cloud_QueueService_Exception",270],"(",["T_CONSTANT_ENCAPSED_STRING","'Cannot delete the message: Zend_Queue_Message object required'",270],")",";",["T_WHITESPACE","\n            ",270],"}",["T_WHITESPACE","\n\n            ",271],["T_RETURN","return",273],["T_WHITESPACE"," ",273],["T_VARIABLE","$this",273],["T_OBJECT_OPERATOR","->",273],["T_STRING","_queues",273],"[",["T_VARIABLE","$queueId",273],"]",["T_OBJECT_OPERATOR","->",273],["T_STRING","deleteMessage",273],"(",["T_VARIABLE","$message",273],")",";",["T_WHITESPACE","\n        ",273],"}",["T_WHITESPACE"," ",274],["T_CATCH","catch",274],["T_WHITESPACE"," ",274],"(",["T_STRING","Zend_Queue_Exception",274],["T_WHITESPACE"," ",274],["T_VARIABLE","$e",274],")",["T_WHITESPACE"," ",274],"{",["T_WHITESPACE","\n            ",274],["T_THROW","throw",275],["T_WHITESPACE"," ",275],["T_NEW","new",275],["T_WHITESPACE"," ",275],["T_STRING","Zend_Cloud_QueueService_Exception",275],"(",["T_CONSTANT_ENCAPSED_STRING","'Error on deleting a message: '",275],".",["T_VARIABLE","$e",275],["T_OBJECT_OPERATOR","->",275],["T_STRING","getMessage",275],"(",")",",",["T_WHITESPACE"," ",275],["T_VARIABLE","$e",275],["T_OBJECT_OPERATOR","->",275],["T_STRING","getCode",275],"(",")",",",["T_WHITESPACE"," ",275],["T_VARIABLE","$e",275],")",";",["T_WHITESPACE","\n        ",275],"}",["T_WHITESPACE","\n    ",276],"}",["T_WHITESPACE","\n\n    ",277],["T_DOC_COMMENT","\/**\n     * Peek at the messages from the specified queue without removing them.\n     *\n     * @param  string $queueId\n     * @param  int $num How many messages\n     * @param  array  $options\n     * @return Zend_Cloud_QueueService_Message[]\n     *\/",279],["T_WHITESPACE","\n    ",286],["T_PUBLIC","public",287],["T_WHITESPACE"," ",287],["T_FUNCTION","function",287],["T_WHITESPACE"," ",287],["T_STRING","peekMessages",287],"(",["T_VARIABLE","$queueId",287],",",["T_WHITESPACE"," ",287],["T_VARIABLE","$num",287],["T_WHITESPACE"," ",287],"=",["T_WHITESPACE"," ",287],["T_LNUMBER","1",287],",",["T_WHITESPACE"," ",287],["T_VARIABLE","$options",287],["T_WHITESPACE"," ",287],"=",["T_WHITESPACE"," ",287],["T_STRING","null",287],")",["T_WHITESPACE","\n    ",287],"{",["T_WHITESPACE","\n        ",288],["T_COMMENT","#require_once 'Zend\/Cloud\/OperationNotAvailableException.php';\n",289],["T_WHITESPACE","        ",290],["T_THROW","throw",290],["T_WHITESPACE"," ",290],["T_NEW","new",290],["T_WHITESPACE"," ",290],["T_STRING","Zend_Cloud_OperationNotAvailableException",290],"(",["T_CONSTANT_ENCAPSED_STRING","'ZendQueue doesn\\'t currently support message peeking'",290],")",";",["T_WHITESPACE","\n    ",290],"}",["T_WHITESPACE","\n\n    ",291],["T_DOC_COMMENT","\/**\n     * Get Azure implementation\n     * @return Zend_Queue\n     *\/",293],["T_WHITESPACE","\n    ",296],["T_PUBLIC","public",297],["T_WHITESPACE"," ",297],["T_FUNCTION","function",297],["T_WHITESPACE"," ",297],["T_STRING","getClient",297],"(",")",["T_WHITESPACE","\n    ",297],"{",["T_WHITESPACE","\n        ",298],["T_RETURN","return",299],["T_WHITESPACE"," ",299],["T_VARIABLE","$this",299],["T_OBJECT_OPERATOR","->",299],["T_STRING","_queue",299],";",["T_WHITESPACE","\n    ",299],"}",["T_WHITESPACE","\n",300],"}",["T_WHITESPACE","\n",301]]
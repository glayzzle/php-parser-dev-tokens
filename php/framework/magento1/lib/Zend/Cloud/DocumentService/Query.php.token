[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * LICENSE\n *\n * This source file is subject to the new BSD license that is bundled\n * with this package in the file LICENSE.txt.\n * It is also available through the world-wide-web at this URL:\n * http:\/\/framework.zend.com\/license\/new-bsd\n * If you did not receive a copy of the license and are unable to\n * obtain it through the world-wide-web, please send an email\n * to license@zend.com so we can send you a copy immediately.\n *\n * @category   Zend\n * @package    Zend_Cloud\n * @subpackage DocumentService\n * @copyright  Copyright (c) 2005-2015 Zend Technologies USA Inc. (http:\/\/www.zend.com)\n * @license    http:\/\/framework.zend.com\/license\/new-bsd     New BSD License\n *\/",2],["T_WHITESPACE","\n\n",18],["T_COMMENT","#require_once 'Zend\/Cloud\/DocumentService\/QueryAdapter.php';\n",20],["T_WHITESPACE","\n",21],["T_DOC_COMMENT","\/**\n * Generic query object\n *\n * Aggregates operations in an array of clauses, where the first element\n * describes the clause type, and the next element describes the criteria.\n *\n * @category   Zend\n * @package    Zend_Cloud\n * @subpackage DocumentService\n * @copyright  Copyright (c) 2005-2015 Zend Technologies USA Inc. (http:\/\/www.zend.com)\n * @license    http:\/\/framework.zend.com\/license\/new-bsd     New BSD License\n *\/",22],["T_WHITESPACE","\n",33],["T_CLASS","class",34],["T_WHITESPACE"," ",34],["T_STRING","Zend_Cloud_DocumentService_Query",34],["T_WHITESPACE","\n    ",34],["T_IMPLEMENTS","implements",35],["T_WHITESPACE"," ",35],["T_STRING","Zend_Cloud_DocumentService_QueryAdapter",35],["T_WHITESPACE","\n",35],"{",["T_WHITESPACE","\n    ",36],["T_DOC_COMMENT","\/**\n     * Known query types\n     *\/",37],["T_WHITESPACE","\n    ",39],["T_CONST","const",40],["T_WHITESPACE"," ",40],["T_STRING","QUERY_SELECT",40],["T_WHITESPACE","  ",40],"=",["T_WHITESPACE"," ",40],["T_CONSTANT_ENCAPSED_STRING","'select'",40],";",["T_WHITESPACE","\n    ",40],["T_CONST","const",41],["T_WHITESPACE"," ",41],["T_STRING","QUERY_FROM",41],["T_WHITESPACE","    ",41],"=",["T_WHITESPACE"," ",41],["T_CONSTANT_ENCAPSED_STRING","'from'",41],";",["T_WHITESPACE","\n    ",41],["T_CONST","const",42],["T_WHITESPACE"," ",42],["T_STRING","QUERY_WHERE",42],["T_WHITESPACE","   ",42],"=",["T_WHITESPACE"," ",42],["T_CONSTANT_ENCAPSED_STRING","'where'",42],";",["T_WHITESPACE","\n    ",42],["T_CONST","const",43],["T_WHITESPACE"," ",43],["T_STRING","QUERY_WHEREID",43],["T_WHITESPACE"," ",43],"=",["T_WHITESPACE"," ",43],["T_CONSTANT_ENCAPSED_STRING","'whereid'",43],";",["T_WHITESPACE"," ",43],["T_COMMENT","\/\/ request element by ID\n",43],["T_WHITESPACE","    ",44],["T_CONST","const",44],["T_WHITESPACE"," ",44],["T_STRING","QUERY_LIMIT",44],["T_WHITESPACE","   ",44],"=",["T_WHITESPACE"," ",44],["T_CONSTANT_ENCAPSED_STRING","'limit'",44],";",["T_WHITESPACE","\n    ",44],["T_CONST","const",45],["T_WHITESPACE"," ",45],["T_STRING","QUERY_ORDER",45],["T_WHITESPACE","   ",45],"=",["T_WHITESPACE"," ",45],["T_CONSTANT_ENCAPSED_STRING","'order'",45],";",["T_WHITESPACE","\n\n    ",45],["T_DOC_COMMENT","\/**\n     * Clause list\n     *\n     * @var array\n     *\/",47],["T_WHITESPACE","\n    ",51],["T_PROTECTED","protected",52],["T_WHITESPACE"," ",52],["T_VARIABLE","$_clauses",52],["T_WHITESPACE"," ",52],"=",["T_WHITESPACE"," ",52],["T_ARRAY","array",52],"(",")",";",["T_WHITESPACE","\n\n    ",52],["T_DOC_COMMENT","\/**\n     * Generic clause\n     *\n     * You can use any clause by doing $query->foo('bar')\n     * but concrete adapters should be able to recognise it\n     *\n     * The call will be iterpreted as clause 'foo' with argument 'bar'\n     *\n     * @param  string $name Clause\/method name\n     * @param  mixed $args\n     * @return Zend_Cloud_DocumentService_Query\n     *\/",54],["T_WHITESPACE","\n    ",65],["T_PUBLIC","public",66],["T_WHITESPACE"," ",66],["T_FUNCTION","function",66],["T_WHITESPACE"," ",66],["T_STRING","__call",66],"(",["T_VARIABLE","$name",66],",",["T_WHITESPACE"," ",66],["T_VARIABLE","$args",66],")",["T_WHITESPACE","\n    ",66],"{",["T_WHITESPACE","\n        ",67],["T_VARIABLE","$this",68],["T_OBJECT_OPERATOR","->",68],["T_STRING","_clauses",68],"[","]",["T_WHITESPACE"," ",68],"=",["T_WHITESPACE"," ",68],["T_ARRAY","array",68],"(",["T_STRING","strtolower",68],"(",["T_VARIABLE","$name",68],")",",",["T_WHITESPACE"," ",68],["T_VARIABLE","$args",68],")",";",["T_WHITESPACE","\n        ",68],["T_RETURN","return",69],["T_WHITESPACE"," ",69],["T_VARIABLE","$this",69],";",["T_WHITESPACE","\n    ",69],"}",["T_WHITESPACE","\n\n    ",70],["T_DOC_COMMENT","\/**\n     * SELECT clause (fields to be selected)\n     *\n     * @param  null|string|array $select\n     * @return Zend_Cloud_DocumentService_Query\n     *\/",72],["T_WHITESPACE","\n    ",77],["T_PUBLIC","public",78],["T_WHITESPACE"," ",78],["T_FUNCTION","function",78],["T_WHITESPACE"," ",78],["T_STRING","select",78],"(",["T_VARIABLE","$select",78],")",["T_WHITESPACE","\n    ",78],"{",["T_WHITESPACE","\n        ",79],["T_IF","if",80],["T_WHITESPACE"," ",80],"(",["T_EMPTY","empty",80],"(",["T_VARIABLE","$select",80],")",")",["T_WHITESPACE"," ",80],"{",["T_WHITESPACE","\n            ",80],["T_RETURN","return",81],["T_WHITESPACE"," ",81],["T_VARIABLE","$this",81],";",["T_WHITESPACE","\n        ",81],"}",["T_WHITESPACE","\n        ",82],["T_IF","if",83],["T_WHITESPACE"," ",83],"(","!",["T_STRING","is_string",83],"(",["T_VARIABLE","$select",83],")",["T_WHITESPACE"," ",83],["T_BOOLEAN_AND","&&",83],["T_WHITESPACE"," ",83],"!",["T_STRING","is_array",83],"(",["T_VARIABLE","$select",83],")",")",["T_WHITESPACE"," ",83],"{",["T_WHITESPACE","\n            ",83],["T_COMMENT","#require_once 'Zend\/Cloud\/DocumentService\/Exception.php';\n",84],["T_WHITESPACE","            ",85],["T_THROW","throw",85],["T_WHITESPACE"," ",85],["T_NEW","new",85],["T_WHITESPACE"," ",85],["T_STRING","Zend_Cloud_DocumentService_Exception",85],"(",["T_CONSTANT_ENCAPSED_STRING","\"SELECT argument must be a string or an array of strings\"",85],")",";",["T_WHITESPACE","\n        ",85],"}",["T_WHITESPACE","\n        ",86],["T_VARIABLE","$this",87],["T_OBJECT_OPERATOR","->",87],["T_STRING","_clauses",87],"[","]",["T_WHITESPACE"," ",87],"=",["T_WHITESPACE"," ",87],["T_ARRAY","array",87],"(",["T_STRING","self",87],["T_DOUBLE_COLON","::",87],["T_STRING","QUERY_SELECT",87],",",["T_WHITESPACE"," ",87],["T_VARIABLE","$select",87],")",";",["T_WHITESPACE","\n        ",87],["T_RETURN","return",88],["T_WHITESPACE"," ",88],["T_VARIABLE","$this",88],";",["T_WHITESPACE","\n    ",88],"}",["T_WHITESPACE","\n\n    ",89],["T_DOC_COMMENT","\/**\n     * FROM clause\n     *\n     * @param string $name Field names\n     * @return Zend_Cloud_DocumentService_Query\n     *\/",91],["T_WHITESPACE","\n    ",96],["T_PUBLIC","public",97],["T_WHITESPACE"," ",97],["T_FUNCTION","function",97],["T_WHITESPACE"," ",97],["T_STRING","from",97],"(",["T_VARIABLE","$name",97],")",["T_WHITESPACE","\n    ",97],"{",["T_WHITESPACE","\n        ",98],["T_IF","if",99],"(","!",["T_STRING","is_string",99],"(",["T_VARIABLE","$name",99],")",")",["T_WHITESPACE"," ",99],"{",["T_WHITESPACE","\n            ",99],["T_COMMENT","#require_once 'Zend\/Cloud\/DocumentService\/Exception.php';\n",100],["T_WHITESPACE","            ",101],["T_THROW","throw",101],["T_WHITESPACE"," ",101],["T_NEW","new",101],["T_WHITESPACE"," ",101],["T_STRING","Zend_Cloud_DocumentService_Exception",101],"(",["T_CONSTANT_ENCAPSED_STRING","\"FROM argument must be a string\"",101],")",";",["T_WHITESPACE","\n        ",101],"}",["T_WHITESPACE","\n        ",102],["T_VARIABLE","$this",103],["T_OBJECT_OPERATOR","->",103],["T_STRING","_clauses",103],"[","]",["T_WHITESPACE"," ",103],"=",["T_WHITESPACE"," ",103],["T_ARRAY","array",103],"(",["T_STRING","self",103],["T_DOUBLE_COLON","::",103],["T_STRING","QUERY_FROM",103],",",["T_WHITESPACE"," ",103],["T_VARIABLE","$name",103],")",";",["T_WHITESPACE","\n        ",103],["T_RETURN","return",104],["T_WHITESPACE"," ",104],["T_VARIABLE","$this",104],";",["T_WHITESPACE","\n    ",104],"}",["T_WHITESPACE","\n\n    ",105],["T_DOC_COMMENT","\/**\n     * WHERE query\n     *\n     * @param string $cond Condition\n     * @param array $args Arguments to substitute instead of ?'s in condition\n     * @param string $op relation to other clauses - and\/or\n     * @return Zend_Cloud_DocumentService_Query\n     *\/",107],["T_WHITESPACE","\n    ",114],["T_PUBLIC","public",115],["T_WHITESPACE"," ",115],["T_FUNCTION","function",115],["T_WHITESPACE"," ",115],["T_STRING","where",115],"(",["T_VARIABLE","$cond",115],",",["T_WHITESPACE"," ",115],["T_VARIABLE","$value",115],["T_WHITESPACE"," ",115],"=",["T_WHITESPACE"," ",115],["T_STRING","null",115],",",["T_WHITESPACE"," ",115],["T_VARIABLE","$op",115],["T_WHITESPACE"," ",115],"=",["T_WHITESPACE"," ",115],["T_CONSTANT_ENCAPSED_STRING","'and'",115],")",["T_WHITESPACE","\n    ",115],"{",["T_WHITESPACE","\n        ",116],["T_IF","if",117],["T_WHITESPACE"," ",117],"(","!",["T_STRING","is_string",117],"(",["T_VARIABLE","$cond",117],")",")",["T_WHITESPACE"," ",117],"{",["T_WHITESPACE","\n            ",117],["T_COMMENT","#require_once 'Zend\/Cloud\/DocumentService\/Exception.php';\n",118],["T_WHITESPACE","            ",119],["T_THROW","throw",119],["T_WHITESPACE"," ",119],["T_NEW","new",119],["T_WHITESPACE"," ",119],["T_STRING","Zend_Cloud_DocumentService_Exception",119],"(",["T_CONSTANT_ENCAPSED_STRING","\"WHERE argument must be a string\"",119],")",";",["T_WHITESPACE","\n        ",119],"}",["T_WHITESPACE","\n        ",120],["T_VARIABLE","$this",121],["T_OBJECT_OPERATOR","->",121],["T_STRING","_clauses",121],"[","]",["T_WHITESPACE"," ",121],"=",["T_WHITESPACE"," ",121],["T_ARRAY","array",121],"(",["T_STRING","self",121],["T_DOUBLE_COLON","::",121],["T_STRING","QUERY_WHERE",121],",",["T_WHITESPACE"," ",121],["T_ARRAY","array",121],"(",["T_VARIABLE","$cond",121],",",["T_WHITESPACE"," ",121],["T_VARIABLE","$value",121],",",["T_WHITESPACE"," ",121],["T_VARIABLE","$op",121],")",")",";",["T_WHITESPACE","\n        ",121],["T_RETURN","return",122],["T_WHITESPACE"," ",122],["T_VARIABLE","$this",122],";",["T_WHITESPACE","\n    ",122],"}",["T_WHITESPACE","\n\n    ",123],["T_DOC_COMMENT","\/**\n     * Select record or fields by ID\n     *\n     * @param  string|int $value Identifier to select by\n     * @return Zend_Cloud_DocumentService_Query\n     *\/",125],["T_WHITESPACE","\n    ",130],["T_PUBLIC","public",131],["T_WHITESPACE"," ",131],["T_FUNCTION","function",131],["T_WHITESPACE"," ",131],["T_STRING","whereId",131],"(",["T_VARIABLE","$value",131],")",["T_WHITESPACE","\n    ",131],"{",["T_WHITESPACE","\n        ",132],["T_IF","if",133],["T_WHITESPACE"," ",133],"(","!",["T_STRING","is_scalar",133],"(",["T_VARIABLE","$value",133],")",")",["T_WHITESPACE"," ",133],"{",["T_WHITESPACE","\n            ",133],["T_COMMENT","#require_once 'Zend\/Cloud\/DocumentService\/Exception.php';\n",134],["T_WHITESPACE","            ",135],["T_THROW","throw",135],["T_WHITESPACE"," ",135],["T_NEW","new",135],["T_WHITESPACE"," ",135],["T_STRING","Zend_Cloud_DocumentService_Exception",135],"(",["T_CONSTANT_ENCAPSED_STRING","\"WHEREID argument must be a scalar\"",135],")",";",["T_WHITESPACE","\n        ",135],"}",["T_WHITESPACE","\n        ",136],["T_VARIABLE","$this",137],["T_OBJECT_OPERATOR","->",137],["T_STRING","_clauses",137],"[","]",["T_WHITESPACE"," ",137],"=",["T_WHITESPACE"," ",137],["T_ARRAY","array",137],"(",["T_STRING","self",137],["T_DOUBLE_COLON","::",137],["T_STRING","QUERY_WHEREID",137],",",["T_WHITESPACE"," ",137],["T_VARIABLE","$value",137],")",";",["T_WHITESPACE","\n        ",137],["T_RETURN","return",138],["T_WHITESPACE"," ",138],["T_VARIABLE","$this",138],";",["T_WHITESPACE","\n    ",138],"}",["T_WHITESPACE","\n\n    ",139],["T_DOC_COMMENT","\/**\n     * LIMIT clause (how many items to return)\n     *\n     * @param  int $limit\n     * @return Zend_Cloud_DocumentService_Query\n     *\/",141],["T_WHITESPACE","\n    ",146],["T_PUBLIC","public",147],["T_WHITESPACE"," ",147],["T_FUNCTION","function",147],["T_WHITESPACE"," ",147],["T_STRING","limit",147],"(",["T_VARIABLE","$limit",147],")",["T_WHITESPACE","\n    ",147],"{",["T_WHITESPACE","\n        ",148],["T_IF","if",149],["T_WHITESPACE"," ",149],"(",["T_VARIABLE","$limit",149],["T_WHITESPACE"," ",149],["T_IS_NOT_EQUAL","!=",149],["T_WHITESPACE"," ",149],["T_INT_CAST","(int)",149],["T_WHITESPACE"," ",149],["T_VARIABLE","$limit",149],")",["T_WHITESPACE"," ",149],"{",["T_WHITESPACE","\n            ",149],["T_COMMENT","#require_once 'Zend\/Cloud\/DocumentService\/Exception.php';\n",150],["T_WHITESPACE","            ",151],["T_THROW","throw",151],["T_WHITESPACE"," ",151],["T_NEW","new",151],["T_WHITESPACE"," ",151],["T_STRING","Zend_Cloud_DocumentService_Exception",151],"(",["T_CONSTANT_ENCAPSED_STRING","\"LIMIT argument must be an integer\"",151],")",";",["T_WHITESPACE","\n        ",151],"}",["T_WHITESPACE","\n        ",152],["T_VARIABLE","$this",153],["T_OBJECT_OPERATOR","->",153],["T_STRING","_clauses",153],"[","]",["T_WHITESPACE"," ",153],"=",["T_WHITESPACE"," ",153],["T_ARRAY","array",153],"(",["T_STRING","self",153],["T_DOUBLE_COLON","::",153],["T_STRING","QUERY_LIMIT",153],",",["T_WHITESPACE"," ",153],["T_VARIABLE","$limit",153],")",";",["T_WHITESPACE","\n        ",153],["T_RETURN","return",154],["T_WHITESPACE"," ",154],["T_VARIABLE","$this",154],";",["T_WHITESPACE","\n    ",154],"}",["T_WHITESPACE","\n\n    ",155],["T_DOC_COMMENT","\/**\n     * ORDER clause; field or fields to sort by, and direction to sort\n     *\n     * @param  string|int|array $sort\n     * @param  string $direction\n     * @return Zend_Cloud_DocumentService_Query\n     *\/",157],["T_WHITESPACE","\n    ",163],["T_PUBLIC","public",164],["T_WHITESPACE"," ",164],["T_FUNCTION","function",164],["T_WHITESPACE"," ",164],["T_STRING","order",164],"(",["T_VARIABLE","$sort",164],",",["T_WHITESPACE"," ",164],["T_VARIABLE","$direction",164],["T_WHITESPACE"," ",164],"=",["T_WHITESPACE"," ",164],["T_CONSTANT_ENCAPSED_STRING","'asc'",164],")",["T_WHITESPACE","\n    ",164],"{",["T_WHITESPACE","\n        ",165],["T_VARIABLE","$this",166],["T_OBJECT_OPERATOR","->",166],["T_STRING","_clauses",166],"[","]",["T_WHITESPACE"," ",166],"=",["T_WHITESPACE"," ",166],["T_ARRAY","array",166],"(",["T_STRING","self",166],["T_DOUBLE_COLON","::",166],["T_STRING","QUERY_ORDER",166],",",["T_WHITESPACE"," ",166],["T_ARRAY","array",166],"(",["T_VARIABLE","$sort",166],",",["T_WHITESPACE"," ",166],["T_VARIABLE","$direction",166],")",")",";",["T_WHITESPACE","\n        ",166],["T_RETURN","return",167],["T_WHITESPACE"," ",167],["T_VARIABLE","$this",167],";",["T_WHITESPACE","\n    ",167],"}",["T_WHITESPACE","\n\n    ",168],["T_DOC_COMMENT","\/**\n     * \"Assemble\" the query\n     *\n     * Simply returns the clauses present.\n     *\n     * @return array\n     *\/",170],["T_WHITESPACE","\n    ",176],["T_PUBLIC","public",177],["T_WHITESPACE"," ",177],["T_FUNCTION","function",177],["T_WHITESPACE"," ",177],["T_STRING","assemble",177],"(",")",["T_WHITESPACE","\n    ",177],"{",["T_WHITESPACE","\n        ",178],["T_RETURN","return",179],["T_WHITESPACE"," ",179],["T_VARIABLE","$this",179],["T_OBJECT_OPERATOR","->",179],["T_STRING","getClauses",179],"(",")",";",["T_WHITESPACE","\n    ",179],"}",["T_WHITESPACE","\n\n    ",180],["T_DOC_COMMENT","\/**\n     * Return query clauses as an array\n     *\n     * @return array Clauses in the query\n     *\/",182],["T_WHITESPACE","\n    ",186],["T_PUBLIC","public",187],["T_WHITESPACE"," ",187],["T_FUNCTION","function",187],["T_WHITESPACE"," ",187],["T_STRING","getClauses",187],"(",")",["T_WHITESPACE","\n    ",187],"{",["T_WHITESPACE","\n         ",188],["T_RETURN","return",189],["T_WHITESPACE"," ",189],["T_VARIABLE","$this",189],["T_OBJECT_OPERATOR","->",189],["T_STRING","_clauses",189],";",["T_WHITESPACE","\n    ",189],"}",["T_WHITESPACE","\n",190],"}",["T_WHITESPACE","\n",191]]
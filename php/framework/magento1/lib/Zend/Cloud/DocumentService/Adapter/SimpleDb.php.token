[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * LICENSE\n *\n * This source file is subject to the new BSD license that is bundled\n * with this package in the file LICENSE.txt.\n * It is also available through the world-wide-web at this URL:\n * http:\/\/framework.zend.com\/license\/new-bsd\n * If you did not receive a copy of the license and are unable to\n * obtain it through the world-wide-web, please send an email\n * to license@zend.com so we can send you a copy immediately.\n *\n * @category   Zend\n * @package    Zend_Cloud\n * @subpackage DocumentService\n * @copyright  Copyright (c) 2005-2015 Zend Technologies USA Inc. (http:\/\/www.zend.com)\n * @license    http:\/\/framework.zend.com\/license\/new-bsd     New BSD License\n *\/",2],["T_WHITESPACE","\n\n",18],["T_COMMENT","#require_once 'Zend\/Cloud\/DocumentService\/Adapter\/AbstractAdapter.php';\n",20],["T_COMMENT","#require_once 'Zend\/Cloud\/DocumentService\/Adapter\/SimpleDb\/Query.php';\n",21],["T_COMMENT","#require_once 'Zend\/Cloud\/DocumentService\/Exception.php';\n",22],["T_COMMENT","#require_once 'Zend\/Service\/Amazon\/SimpleDb.php';\n",23],["T_COMMENT","#require_once 'Zend\/Service\/Amazon\/SimpleDb\/Attribute.php';\n",24],["T_WHITESPACE","\n",25],["T_DOC_COMMENT","\/**\n * SimpleDB adapter for document service.\n *\n * @category   Zend\n * @package    Zend_Cloud\n * @subpackage DocumentService\n * @copyright  Copyright (c) 2005-2015 Zend Technologies USA Inc. (http:\/\/www.zend.com)\n * @license    http:\/\/framework.zend.com\/license\/new-bsd     New BSD License\n *\/",26],["T_WHITESPACE","\n",34],["T_CLASS","class",35],["T_WHITESPACE"," ",35],["T_STRING","Zend_Cloud_DocumentService_Adapter_SimpleDb",35],["T_WHITESPACE","\n    ",35],["T_EXTENDS","extends",36],["T_WHITESPACE"," ",36],["T_STRING","Zend_Cloud_DocumentService_Adapter_AbstractAdapter",36],["T_WHITESPACE","\n",36],"{",["T_WHITESPACE","\n    ",37],["T_COMMENT","\/*\n     * Options array keys for the SimpleDB adapter.\n     *\/",38],["T_WHITESPACE","\n    ",40],["T_CONST","const",41],["T_WHITESPACE"," ",41],["T_STRING","AWS_ACCESS_KEY",41],["T_WHITESPACE","   ",41],"=",["T_WHITESPACE"," ",41],["T_CONSTANT_ENCAPSED_STRING","'aws_accesskey'",41],";",["T_WHITESPACE","\n    ",41],["T_CONST","const",42],["T_WHITESPACE"," ",42],["T_STRING","AWS_SECRET_KEY",42],["T_WHITESPACE","   ",42],"=",["T_WHITESPACE"," ",42],["T_CONSTANT_ENCAPSED_STRING","'aws_secretkey'",42],";",["T_WHITESPACE","\n\n    ",42],["T_CONST","const",44],["T_WHITESPACE"," ",44],["T_STRING","ITEM_NAME",44],["T_WHITESPACE","        ",44],"=",["T_WHITESPACE"," ",44],["T_CONSTANT_ENCAPSED_STRING","'ItemName'",44],";",["T_WHITESPACE","\n\n    ",44],["T_CONST","const",46],["T_WHITESPACE"," ",46],["T_STRING","MERGE_OPTION",46],["T_WHITESPACE","     ",46],"=",["T_WHITESPACE"," ",46],["T_CONSTANT_ENCAPSED_STRING","\"merge\"",46],";",["T_WHITESPACE","\n    ",46],["T_CONST","const",47],["T_WHITESPACE"," ",47],["T_STRING","RETURN_DOCUMENTS",47],["T_WHITESPACE"," ",47],"=",["T_WHITESPACE"," ",47],["T_CONSTANT_ENCAPSED_STRING","\"return_documents\"",47],";",["T_WHITESPACE","\n\n    ",47],["T_CONST","const",49],["T_WHITESPACE"," ",49],["T_STRING","DEFAULT_QUERY_CLASS",49],["T_WHITESPACE"," ",49],"=",["T_WHITESPACE"," ",49],["T_CONSTANT_ENCAPSED_STRING","'Zend_Cloud_DocumentService_Adapter_SimpleDb_Query'",49],";",["T_WHITESPACE","\n\n\n    ",49],["T_DOC_COMMENT","\/**\n     * SQS service instance.\n     * @var Zend_Service_Amazon_SimpleDb\n     *\/",52],["T_WHITESPACE","\n    ",55],["T_PROTECTED","protected",56],["T_WHITESPACE"," ",56],["T_VARIABLE","$_simpleDb",56],";",["T_WHITESPACE","\n\n    ",56],["T_DOC_COMMENT","\/**\n     * Class to utilize for new query objects\n     * @var string\n     *\/",58],["T_WHITESPACE","\n    ",61],["T_PROTECTED","protected",62],["T_WHITESPACE"," ",62],["T_VARIABLE","$_queryClass",62],["T_WHITESPACE"," ",62],"=",["T_WHITESPACE"," ",62],["T_CONSTANT_ENCAPSED_STRING","'Zend_Cloud_DocumentService_Adapter_SimpleDb_Query'",62],";",["T_WHITESPACE","\n\n    ",62],["T_DOC_COMMENT","\/**\n     * Constructor\n     *\n     * @param  array|Zend_Config $options\n     * @return void\n     *\/",64],["T_WHITESPACE","\n    ",69],["T_PUBLIC","public",70],["T_WHITESPACE"," ",70],["T_FUNCTION","function",70],["T_WHITESPACE"," ",70],["T_STRING","__construct",70],"(",["T_VARIABLE","$options",70],["T_WHITESPACE"," ",70],"=",["T_WHITESPACE"," ",70],["T_ARRAY","array",70],"(",")",")",["T_WHITESPACE","\n    ",70],"{",["T_WHITESPACE","\n        ",71],["T_IF","if",72],["T_WHITESPACE"," ",72],"(",["T_VARIABLE","$options",72],["T_WHITESPACE"," ",72],["T_INSTANCEOF","instanceof",72],["T_WHITESPACE"," ",72],["T_STRING","Zend_Config",72],")",["T_WHITESPACE"," ",72],"{",["T_WHITESPACE","\n            ",72],["T_VARIABLE","$options",73],["T_WHITESPACE"," ",73],"=",["T_WHITESPACE"," ",73],["T_VARIABLE","$options",73],["T_OBJECT_OPERATOR","->",73],["T_STRING","toArray",73],"(",")",";",["T_WHITESPACE","\n        ",73],"}",["T_WHITESPACE","\n\n        ",74],["T_IF","if",76],["T_WHITESPACE"," ",76],"(","!",["T_STRING","is_array",76],"(",["T_VARIABLE","$options",76],")",")",["T_WHITESPACE"," ",76],"{",["T_WHITESPACE","\n            ",76],["T_THROW","throw",77],["T_WHITESPACE"," ",77],["T_NEW","new",77],["T_WHITESPACE"," ",77],["T_STRING","Zend_Cloud_DocumentService_Exception",77],"(",["T_CONSTANT_ENCAPSED_STRING","'Invalid options provided to constructor'",77],")",";",["T_WHITESPACE","\n        ",77],"}",["T_WHITESPACE","\n\n        ",78],["T_VARIABLE","$this",80],["T_OBJECT_OPERATOR","->",80],["T_STRING","_simpleDb",80],["T_WHITESPACE"," ",80],"=",["T_WHITESPACE"," ",80],["T_NEW","new",80],["T_WHITESPACE"," ",80],["T_STRING","Zend_Service_Amazon_SimpleDb",80],"(",["T_WHITESPACE","\n            ",80],["T_VARIABLE","$options",81],"[",["T_STRING","self",81],["T_DOUBLE_COLON","::",81],["T_STRING","AWS_ACCESS_KEY",81],"]",",",["T_WHITESPACE"," ",81],["T_VARIABLE","$options",81],"[",["T_STRING","self",81],["T_DOUBLE_COLON","::",81],["T_STRING","AWS_SECRET_KEY",81],"]",["T_WHITESPACE","\n        ",81],")",";",["T_WHITESPACE","\n\n        ",82],["T_IF","if",84],["T_WHITESPACE"," ",84],"(",["T_ISSET","isset",84],"(",["T_VARIABLE","$options",84],"[",["T_STRING","self",84],["T_DOUBLE_COLON","::",84],["T_STRING","HTTP_ADAPTER",84],"]",")",")",["T_WHITESPACE"," ",84],"{",["T_WHITESPACE","\n            ",84],["T_VARIABLE","$this",85],["T_OBJECT_OPERATOR","->",85],["T_STRING","_simpleDb",85],["T_OBJECT_OPERATOR","->",85],["T_STRING","getHttpClient",85],"(",")",["T_OBJECT_OPERATOR","->",85],["T_STRING","setAdapter",85],"(",["T_VARIABLE","$options",85],"[",["T_STRING","self",85],["T_DOUBLE_COLON","::",85],["T_STRING","HTTP_ADAPTER",85],"]",")",";",["T_WHITESPACE","\n        ",85],"}",["T_WHITESPACE","\n\n        ",86],["T_IF","if",88],["T_WHITESPACE"," ",88],"(",["T_ISSET","isset",88],"(",["T_VARIABLE","$options",88],"[",["T_STRING","self",88],["T_DOUBLE_COLON","::",88],["T_STRING","DOCUMENT_CLASS",88],"]",")",")",["T_WHITESPACE"," ",88],"{",["T_WHITESPACE","\n            ",88],["T_VARIABLE","$this",89],["T_OBJECT_OPERATOR","->",89],["T_STRING","setDocumentClass",89],"(",["T_VARIABLE","$options",89],"[",["T_STRING","self",89],["T_DOUBLE_COLON","::",89],["T_STRING","DOCUMENT_CLASS",89],"]",")",";",["T_WHITESPACE","\n        ",89],"}",["T_WHITESPACE","\n\n        ",90],["T_IF","if",92],["T_WHITESPACE"," ",92],"(",["T_ISSET","isset",92],"(",["T_VARIABLE","$options",92],"[",["T_STRING","self",92],["T_DOUBLE_COLON","::",92],["T_STRING","DOCUMENTSET_CLASS",92],"]",")",")",["T_WHITESPACE"," ",92],"{",["T_WHITESPACE","\n            ",92],["T_VARIABLE","$this",93],["T_OBJECT_OPERATOR","->",93],["T_STRING","setDocumentSetClass",93],"(",["T_VARIABLE","$options",93],"[",["T_STRING","self",93],["T_DOUBLE_COLON","::",93],["T_STRING","DOCUMENTSET_CLASS",93],"]",")",";",["T_WHITESPACE","\n        ",93],"}",["T_WHITESPACE","\n\n        ",94],["T_IF","if",96],["T_WHITESPACE"," ",96],"(",["T_ISSET","isset",96],"(",["T_VARIABLE","$options",96],"[",["T_STRING","self",96],["T_DOUBLE_COLON","::",96],["T_STRING","QUERY_CLASS",96],"]",")",")",["T_WHITESPACE"," ",96],"{",["T_WHITESPACE","\n            ",96],["T_VARIABLE","$this",97],["T_OBJECT_OPERATOR","->",97],["T_STRING","setQueryClass",97],"(",["T_VARIABLE","$options",97],"[",["T_STRING","self",97],["T_DOUBLE_COLON","::",97],["T_STRING","QUERY_CLASS",97],"]",")",";",["T_WHITESPACE","\n        ",97],"}",["T_WHITESPACE","\n    ",98],"}",["T_WHITESPACE","\n\n    ",99],["T_DOC_COMMENT","\/**\n     * Create collection.\n     *\n     * @param  string $name\n     * @param  array  $options\n     * @return void\n     *\/",101],["T_WHITESPACE","\n    ",107],["T_PUBLIC","public",108],["T_WHITESPACE"," ",108],["T_FUNCTION","function",108],["T_WHITESPACE"," ",108],["T_STRING","createCollection",108],"(",["T_VARIABLE","$name",108],",",["T_WHITESPACE"," ",108],["T_VARIABLE","$options",108],["T_WHITESPACE"," ",108],"=",["T_WHITESPACE"," ",108],["T_STRING","null",108],")",["T_WHITESPACE","\n    ",108],"{",["T_WHITESPACE","\n        ",109],["T_TRY","try",110],["T_WHITESPACE"," ",110],"{",["T_WHITESPACE","\n            ",110],["T_VARIABLE","$this",111],["T_OBJECT_OPERATOR","->",111],["T_STRING","_simpleDb",111],["T_OBJECT_OPERATOR","->",111],["T_STRING","createDomain",111],"(",["T_VARIABLE","$name",111],")",";",["T_WHITESPACE","\n        ",111],"}",["T_WHITESPACE"," ",112],["T_CATCH","catch",112],"(",["T_STRING","Zend_Service_Amazon_Exception",112],["T_WHITESPACE"," ",112],["T_VARIABLE","$e",112],")",["T_WHITESPACE"," ",112],"{",["T_WHITESPACE","\n            ",112],["T_THROW","throw",113],["T_WHITESPACE"," ",113],["T_NEW","new",113],["T_WHITESPACE"," ",113],["T_STRING","Zend_Cloud_DocumentService_Exception",113],"(",["T_CONSTANT_ENCAPSED_STRING","'Error on domain creation: '",113],".",["T_VARIABLE","$e",113],["T_OBJECT_OPERATOR","->",113],["T_STRING","getMessage",113],"(",")",",",["T_WHITESPACE"," ",113],["T_VARIABLE","$e",113],["T_OBJECT_OPERATOR","->",113],["T_STRING","getCode",113],"(",")",",",["T_WHITESPACE"," ",113],["T_VARIABLE","$e",113],")",";",["T_WHITESPACE","\n        ",113],"}",["T_WHITESPACE","\n    ",114],"}",["T_WHITESPACE","\n\n    ",115],["T_DOC_COMMENT","\/**\n     * Delete collection.\n     *\n     * @param  string $name\n     * @param  array  $options\n     * @return void\n     *\/",117],["T_WHITESPACE","\n    ",123],["T_PUBLIC","public",124],["T_WHITESPACE"," ",124],["T_FUNCTION","function",124],["T_WHITESPACE"," ",124],["T_STRING","deleteCollection",124],"(",["T_VARIABLE","$name",124],",",["T_WHITESPACE"," ",124],["T_VARIABLE","$options",124],["T_WHITESPACE"," ",124],"=",["T_WHITESPACE"," ",124],["T_STRING","null",124],")",["T_WHITESPACE","\n    ",124],"{",["T_WHITESPACE","\n        ",125],["T_TRY","try",126],["T_WHITESPACE"," ",126],"{",["T_WHITESPACE","\n            ",126],["T_VARIABLE","$this",127],["T_OBJECT_OPERATOR","->",127],["T_STRING","_simpleDb",127],["T_OBJECT_OPERATOR","->",127],["T_STRING","deleteDomain",127],"(",["T_VARIABLE","$name",127],")",";",["T_WHITESPACE","\n        ",127],"}",["T_WHITESPACE"," ",128],["T_CATCH","catch",128],"(",["T_STRING","Zend_Service_Amazon_Exception",128],["T_WHITESPACE"," ",128],["T_VARIABLE","$e",128],")",["T_WHITESPACE"," ",128],"{",["T_WHITESPACE","\n            ",128],["T_THROW","throw",129],["T_WHITESPACE"," ",129],["T_NEW","new",129],["T_WHITESPACE"," ",129],["T_STRING","Zend_Cloud_DocumentService_Exception",129],"(",["T_CONSTANT_ENCAPSED_STRING","'Error on collection deletion: '",129],".",["T_VARIABLE","$e",129],["T_OBJECT_OPERATOR","->",129],["T_STRING","getMessage",129],"(",")",",",["T_WHITESPACE"," ",129],["T_VARIABLE","$e",129],["T_OBJECT_OPERATOR","->",129],["T_STRING","getCode",129],"(",")",",",["T_WHITESPACE"," ",129],["T_VARIABLE","$e",129],")",";",["T_WHITESPACE","\n        ",129],"}",["T_WHITESPACE","\n    ",130],"}",["T_WHITESPACE","\n\n    ",131],["T_DOC_COMMENT","\/**\n     * List collections.\n     *\n     * @param  array  $options\n     * @return array\n     *\/",133],["T_WHITESPACE","\n    ",138],["T_PUBLIC","public",139],["T_WHITESPACE"," ",139],["T_FUNCTION","function",139],["T_WHITESPACE"," ",139],["T_STRING","listCollections",139],"(",["T_VARIABLE","$options",139],["T_WHITESPACE"," ",139],"=",["T_WHITESPACE"," ",139],["T_STRING","null",139],")",["T_WHITESPACE","\n    ",139],"{",["T_WHITESPACE","\n        ",140],["T_TRY","try",141],["T_WHITESPACE"," ",141],"{",["T_WHITESPACE","\n            ",141],["T_COMMENT","\/\/ TODO package this in Pages\n",142],["T_WHITESPACE","            ",143],["T_VARIABLE","$domains",143],["T_WHITESPACE"," ",143],"=",["T_WHITESPACE"," ",143],["T_VARIABLE","$this",143],["T_OBJECT_OPERATOR","->",143],["T_STRING","_simpleDb",143],["T_OBJECT_OPERATOR","->",143],["T_STRING","listDomains",143],"(",")",["T_OBJECT_OPERATOR","->",143],["T_STRING","getData",143],"(",")",";",["T_WHITESPACE","\n        ",143],"}",["T_WHITESPACE"," ",144],["T_CATCH","catch",144],"(",["T_STRING","Zend_Service_Amazon_Exception",144],["T_WHITESPACE"," ",144],["T_VARIABLE","$e",144],")",["T_WHITESPACE"," ",144],"{",["T_WHITESPACE","\n            ",144],["T_THROW","throw",145],["T_WHITESPACE"," ",145],["T_NEW","new",145],["T_WHITESPACE"," ",145],["T_STRING","Zend_Cloud_DocumentService_Exception",145],"(",["T_CONSTANT_ENCAPSED_STRING","'Error on collection deletion: '",145],".",["T_VARIABLE","$e",145],["T_OBJECT_OPERATOR","->",145],["T_STRING","getMessage",145],"(",")",",",["T_WHITESPACE"," ",145],["T_VARIABLE","$e",145],["T_OBJECT_OPERATOR","->",145],["T_STRING","getCode",145],"(",")",",",["T_WHITESPACE"," ",145],["T_VARIABLE","$e",145],")",";",["T_WHITESPACE","\n        ",145],"}",["T_WHITESPACE","\n\n        ",146],["T_RETURN","return",148],["T_WHITESPACE"," ",148],["T_VARIABLE","$domains",148],";",["T_WHITESPACE","\n    ",148],"}",["T_WHITESPACE","\n\n    ",149],["T_DOC_COMMENT","\/**\n     * List documents\n     *\n     * Returns a key\/value array of document names to document objects.\n     *\n     * @param  string $collectionName Name of collection for which to list documents\n     * @param  array|null $options\n     * @return Zend_Cloud_DocumentService_DocumentSet\n     *\/",151],["T_WHITESPACE","\n    ",159],["T_PUBLIC","public",160],["T_WHITESPACE"," ",160],["T_FUNCTION","function",160],["T_WHITESPACE"," ",160],["T_STRING","listDocuments",160],"(",["T_VARIABLE","$collectionName",160],",",["T_WHITESPACE"," ",160],["T_ARRAY","array",160],["T_WHITESPACE"," ",160],["T_VARIABLE","$options",160],["T_WHITESPACE"," ",160],"=",["T_WHITESPACE"," ",160],["T_STRING","null",160],")",["T_WHITESPACE","\n    ",160],"{",["T_WHITESPACE","\n        ",161],["T_VARIABLE","$query",162],["T_WHITESPACE"," ",162],"=",["T_WHITESPACE"," ",162],["T_VARIABLE","$this",162],["T_OBJECT_OPERATOR","->",162],["T_STRING","select",162],"(",["T_CONSTANT_ENCAPSED_STRING","'*'",162],")",["T_OBJECT_OPERATOR","->",162],["T_STRING","from",162],"(",["T_VARIABLE","$collectionName",162],")",";",["T_WHITESPACE","\n        ",162],["T_VARIABLE","$items",163],["T_WHITESPACE"," ",163],"=",["T_WHITESPACE"," ",163],["T_VARIABLE","$this",163],["T_OBJECT_OPERATOR","->",163],["T_STRING","query",163],"(",["T_VARIABLE","$collectionName",163],",",["T_WHITESPACE"," ",163],["T_VARIABLE","$query",163],",",["T_WHITESPACE"," ",163],["T_VARIABLE","$options",163],")",";",["T_WHITESPACE","\n        ",163],["T_RETURN","return",164],["T_WHITESPACE"," ",164],["T_VARIABLE","$items",164],";",["T_WHITESPACE","\n    ",164],"}",["T_WHITESPACE","\n\n    ",165],["T_DOC_COMMENT","\/**\n     * Insert document\n     *\n     * @param  string $collectionName Collection into which to insert document\n     * @param  array|Zend_Cloud_DocumentService_Document $document\n     * @param  array $options\n     * @return void\n     *\/",167],["T_WHITESPACE","\n    ",174],["T_PUBLIC","public",175],["T_WHITESPACE"," ",175],["T_FUNCTION","function",175],["T_WHITESPACE"," ",175],["T_STRING","insertDocument",175],"(",["T_VARIABLE","$collectionName",175],",",["T_WHITESPACE"," ",175],["T_VARIABLE","$document",175],",",["T_WHITESPACE"," ",175],["T_VARIABLE","$options",175],["T_WHITESPACE"," ",175],"=",["T_WHITESPACE"," ",175],["T_STRING","null",175],")",["T_WHITESPACE","\n    ",175],"{",["T_WHITESPACE","\n        ",176],["T_IF","if",177],["T_WHITESPACE"," ",177],"(",["T_STRING","is_array",177],"(",["T_VARIABLE","$document",177],")",")",["T_WHITESPACE"," ",177],"{",["T_WHITESPACE","\n            ",177],["T_VARIABLE","$document",178],["T_WHITESPACE"," ",178],"=",["T_WHITESPACE","  ",178],["T_VARIABLE","$this",178],["T_OBJECT_OPERATOR","->",178],["T_STRING","_getDocumentFromArray",178],"(",["T_VARIABLE","$document",178],")",";",["T_WHITESPACE","\n        ",178],"}",["T_WHITESPACE","\n\n        ",179],["T_IF","if",181],["T_WHITESPACE"," ",181],"(","!",["T_VARIABLE","$document",181],["T_WHITESPACE"," ",181],["T_INSTANCEOF","instanceof",181],["T_WHITESPACE"," ",181],["T_STRING","Zend_Cloud_DocumentService_Document",181],")",["T_WHITESPACE"," ",181],"{",["T_WHITESPACE","\n            ",181],["T_THROW","throw",182],["T_WHITESPACE"," ",182],["T_NEW","new",182],["T_WHITESPACE"," ",182],["T_STRING","Zend_Cloud_DocumentService_Exception",182],"(",["T_CONSTANT_ENCAPSED_STRING","'Invalid document supplied'",182],")",";",["T_WHITESPACE","\n        ",182],"}",["T_WHITESPACE","\n\n        ",183],["T_TRY","try",185],["T_WHITESPACE"," ",185],"{",["T_WHITESPACE","\n            ",185],["T_VARIABLE","$this",186],["T_OBJECT_OPERATOR","->",186],["T_STRING","_simpleDb",186],["T_OBJECT_OPERATOR","->",186],["T_STRING","putAttributes",186],"(",["T_WHITESPACE","\n                ",186],["T_VARIABLE","$collectionName",187],",",["T_WHITESPACE","\n                ",187],["T_VARIABLE","$document",188],["T_OBJECT_OPERATOR","->",188],["T_STRING","getID",188],"(",")",",",["T_WHITESPACE","\n                ",188],["T_VARIABLE","$this",189],["T_OBJECT_OPERATOR","->",189],["T_STRING","_makeAttributes",189],"(",["T_VARIABLE","$document",189],["T_OBJECT_OPERATOR","->",189],["T_STRING","getID",189],"(",")",",",["T_WHITESPACE"," ",189],["T_VARIABLE","$document",189],["T_OBJECT_OPERATOR","->",189],["T_STRING","getFields",189],"(",")",")",["T_WHITESPACE","\n            ",189],")",";",["T_WHITESPACE","\n        ",190],"}",["T_WHITESPACE"," ",191],["T_CATCH","catch",191],"(",["T_STRING","Zend_Service_Amazon_Exception",191],["T_WHITESPACE"," ",191],["T_VARIABLE","$e",191],")",["T_WHITESPACE"," ",191],"{",["T_WHITESPACE","\n            ",191],["T_THROW","throw",192],["T_WHITESPACE"," ",192],["T_NEW","new",192],["T_WHITESPACE"," ",192],["T_STRING","Zend_Cloud_DocumentService_Exception",192],"(",["T_CONSTANT_ENCAPSED_STRING","'Error on document insertion: '",192],".",["T_VARIABLE","$e",192],["T_OBJECT_OPERATOR","->",192],["T_STRING","getMessage",192],"(",")",",",["T_WHITESPACE"," ",192],["T_VARIABLE","$e",192],["T_OBJECT_OPERATOR","->",192],["T_STRING","getCode",192],"(",")",",",["T_WHITESPACE"," ",192],["T_VARIABLE","$e",192],")",";",["T_WHITESPACE","\n        ",192],"}",["T_WHITESPACE","\n    ",193],"}",["T_WHITESPACE","\n\n    ",194],["T_DOC_COMMENT","\/**\n     * Replace an existing document with a new version\n     *\n     * @param  string $collectionName\n     * @param  array|Zend_Cloud_DocumentService_Document $document\n     * @param  array $options\n     * @return void\n     *\/",196],["T_WHITESPACE","\n    ",203],["T_PUBLIC","public",204],["T_WHITESPACE"," ",204],["T_FUNCTION","function",204],["T_WHITESPACE"," ",204],["T_STRING","replaceDocument",204],"(",["T_VARIABLE","$collectionName",204],",",["T_WHITESPACE"," ",204],["T_VARIABLE","$document",204],",",["T_WHITESPACE"," ",204],["T_VARIABLE","$options",204],["T_WHITESPACE"," ",204],"=",["T_WHITESPACE"," ",204],["T_STRING","null",204],")",["T_WHITESPACE","\n    ",204],"{",["T_WHITESPACE","\n        ",205],["T_IF","if",206],["T_WHITESPACE"," ",206],"(",["T_STRING","is_array",206],"(",["T_VARIABLE","$document",206],")",")",["T_WHITESPACE"," ",206],"{",["T_WHITESPACE","\n            ",206],["T_VARIABLE","$document",207],["T_WHITESPACE"," ",207],"=",["T_WHITESPACE","  ",207],["T_VARIABLE","$this",207],["T_OBJECT_OPERATOR","->",207],["T_STRING","_getDocumentFromArray",207],"(",["T_VARIABLE","$document",207],")",";",["T_WHITESPACE","\n        ",207],"}",["T_WHITESPACE","\n\n        ",208],["T_IF","if",210],["T_WHITESPACE"," ",210],"(","!",["T_VARIABLE","$document",210],["T_WHITESPACE"," ",210],["T_INSTANCEOF","instanceof",210],["T_WHITESPACE"," ",210],["T_STRING","Zend_Cloud_DocumentService_Document",210],")",["T_WHITESPACE"," ",210],"{",["T_WHITESPACE","\n            ",210],["T_THROW","throw",211],["T_WHITESPACE"," ",211],["T_NEW","new",211],["T_WHITESPACE"," ",211],["T_STRING","Zend_Cloud_DocumentService_Exception",211],"(",["T_CONSTANT_ENCAPSED_STRING","'Invalid document supplied'",211],")",";",["T_WHITESPACE","\n        ",211],"}",["T_WHITESPACE","\n\n        ",212],["T_COMMENT","\/\/ Delete document first, then insert. PutAttributes always keeps any\n",214],["T_WHITESPACE","        ",215],["T_COMMENT","\/\/ fields not referenced in the payload, but present in the document\n",215],["T_WHITESPACE","        ",216],["T_VARIABLE","$documentId",216],["T_WHITESPACE"," ",216],"=",["T_WHITESPACE"," ",216],["T_VARIABLE","$document",216],["T_OBJECT_OPERATOR","->",216],["T_STRING","getId",216],"(",")",";",["T_WHITESPACE","\n        ",216],["T_VARIABLE","$fields",217],["T_WHITESPACE","     ",217],"=",["T_WHITESPACE"," ",217],["T_VARIABLE","$document",217],["T_OBJECT_OPERATOR","->",217],["T_STRING","getFields",217],"(",")",";",["T_WHITESPACE","\n        ",217],["T_VARIABLE","$docClass",218],["T_WHITESPACE","   ",218],"=",["T_WHITESPACE"," ",218],["T_STRING","get_class",218],"(",["T_VARIABLE","$document",218],")",";",["T_WHITESPACE","\n        ",218],["T_VARIABLE","$this",219],["T_OBJECT_OPERATOR","->",219],["T_STRING","deleteDocument",219],"(",["T_VARIABLE","$collectionName",219],",",["T_WHITESPACE"," ",219],["T_VARIABLE","$document",219],",",["T_WHITESPACE"," ",219],["T_VARIABLE","$options",219],")",";",["T_WHITESPACE","\n\n        ",219],["T_VARIABLE","$document",221],["T_WHITESPACE","   ",221],"=",["T_WHITESPACE"," ",221],["T_NEW","new",221],["T_WHITESPACE"," ",221],["T_VARIABLE","$docClass",221],"(",["T_VARIABLE","$fields",221],",",["T_WHITESPACE"," ",221],["T_VARIABLE","$documentId",221],")",";",["T_WHITESPACE","\n        ",221],["T_VARIABLE","$this",222],["T_OBJECT_OPERATOR","->",222],["T_STRING","insertDocument",222],"(",["T_VARIABLE","$collectionName",222],",",["T_WHITESPACE"," ",222],["T_VARIABLE","$document",222],")",";",["T_WHITESPACE","\n    ",222],"}",["T_WHITESPACE","\n\n    ",223],["T_DOC_COMMENT","\/**\n     * Update document. The new document replaces the existing document.\n     *\n     * Option 'merge' specifies to add all attributes (if true) or\n     * specific attributes (\"attr\" => true) instead of replacing them.\n     * By default, attributes are replaced.\n     *\n     * @param  string $collectionName\n     * @param  mixed|Zend_Cloud_DocumentService_Document $documentId Document ID, adapter-dependent\n     * @param  array|Zend_Cloud_DocumentService_Document $fieldset Set of fields to update\n     * @param  array                   $options\n     * @return boolean\n     *\/",225],["T_WHITESPACE","\n    ",237],["T_PUBLIC","public",238],["T_WHITESPACE"," ",238],["T_FUNCTION","function",238],["T_WHITESPACE"," ",238],["T_STRING","updateDocument",238],"(",["T_VARIABLE","$collectionName",238],",",["T_WHITESPACE"," ",238],["T_VARIABLE","$documentId",238],",",["T_WHITESPACE"," ",238],["T_VARIABLE","$fieldset",238],["T_WHITESPACE"," ",238],"=",["T_WHITESPACE"," ",238],["T_STRING","null",238],",",["T_WHITESPACE"," ",238],["T_VARIABLE","$options",238],["T_WHITESPACE"," ",238],"=",["T_WHITESPACE"," ",238],["T_STRING","null",238],")",["T_WHITESPACE","\n    ",238],"{",["T_WHITESPACE","\n        ",239],["T_IF","if",240],["T_WHITESPACE"," ",240],"(",["T_STRING","null",240],["T_WHITESPACE"," ",240],["T_IS_IDENTICAL","===",240],["T_WHITESPACE"," ",240],["T_VARIABLE","$fieldset",240],["T_WHITESPACE"," ",240],["T_BOOLEAN_AND","&&",240],["T_WHITESPACE"," ",240],["T_VARIABLE","$documentId",240],["T_WHITESPACE"," ",240],["T_INSTANCEOF","instanceof",240],["T_WHITESPACE"," ",240],["T_STRING","Zend_Cloud_DocumentService_Document",240],")",["T_WHITESPACE"," ",240],"{",["T_WHITESPACE","\n            ",240],["T_VARIABLE","$fieldset",241],["T_WHITESPACE","   ",241],"=",["T_WHITESPACE"," ",241],["T_VARIABLE","$documentId",241],["T_OBJECT_OPERATOR","->",241],["T_STRING","getFields",241],"(",")",";",["T_WHITESPACE","\n            ",241],["T_IF","if",242],["T_WHITESPACE"," ",242],"(",["T_EMPTY","empty",242],"(",["T_VARIABLE","$documentId",242],")",")",["T_WHITESPACE"," ",242],"{",["T_WHITESPACE","\n                ",242],["T_VARIABLE","$documentId",243],["T_WHITESPACE"," ",243],"=",["T_WHITESPACE"," ",243],["T_VARIABLE","$documentId",243],["T_OBJECT_OPERATOR","->",243],["T_STRING","getId",243],"(",")",";",["T_WHITESPACE","\n            ",243],"}",["T_WHITESPACE","\n        ",244],"}",["T_WHITESPACE"," ",245],["T_ELSEIF","elseif",245],["T_WHITESPACE"," ",245],"(",["T_VARIABLE","$fieldset",245],["T_WHITESPACE"," ",245],["T_INSTANCEOF","instanceof",245],["T_WHITESPACE"," ",245],["T_STRING","Zend_Cloud_DocumentService_Document",245],")",["T_WHITESPACE"," ",245],"{",["T_WHITESPACE","\n            ",245],["T_IF","if",246],["T_WHITESPACE"," ",246],"(",["T_EMPTY","empty",246],"(",["T_VARIABLE","$documentId",246],")",")",["T_WHITESPACE"," ",246],"{",["T_WHITESPACE","\n                ",246],["T_VARIABLE","$documentId",247],["T_WHITESPACE"," ",247],"=",["T_WHITESPACE"," ",247],["T_VARIABLE","$fieldset",247],["T_OBJECT_OPERATOR","->",247],["T_STRING","getId",247],"(",")",";",["T_WHITESPACE","\n            ",247],"}",["T_WHITESPACE","\n            ",248],["T_VARIABLE","$fieldset",249],["T_WHITESPACE"," ",249],"=",["T_WHITESPACE"," ",249],["T_VARIABLE","$fieldset",249],["T_OBJECT_OPERATOR","->",249],["T_STRING","getFields",249],"(",")",";",["T_WHITESPACE","\n        ",249],"}",["T_WHITESPACE","\n\n        ",250],["T_VARIABLE","$replace",252],["T_WHITESPACE"," ",252],"=",["T_WHITESPACE"," ",252],["T_ARRAY","array",252],"(",")",";",["T_WHITESPACE","\n        ",252],["T_IF","if",253],["T_WHITESPACE"," ",253],"(",["T_EMPTY","empty",253],"(",["T_VARIABLE","$options",253],"[",["T_STRING","self",253],["T_DOUBLE_COLON","::",253],["T_STRING","MERGE_OPTION",253],"]",")",")",["T_WHITESPACE"," ",253],"{",["T_WHITESPACE","\n            ",253],["T_COMMENT","\/\/ no merge option - we replace all\n",254],["T_WHITESPACE","            ",255],["T_FOREACH","foreach",255],["T_WHITESPACE"," ",255],"(",["T_VARIABLE","$fieldset",255],["T_WHITESPACE"," ",255],["T_AS","as",255],["T_WHITESPACE"," ",255],["T_VARIABLE","$key",255],["T_WHITESPACE"," ",255],["T_DOUBLE_ARROW","=>",255],["T_WHITESPACE"," ",255],["T_VARIABLE","$value",255],")",["T_WHITESPACE"," ",255],"{",["T_WHITESPACE","\n                ",255],["T_VARIABLE","$replace",256],"[",["T_VARIABLE","$key",256],"]",["T_WHITESPACE"," ",256],"=",["T_WHITESPACE"," ",256],["T_STRING","true",256],";",["T_WHITESPACE","\n            ",256],"}",["T_WHITESPACE","\n        ",257],"}",["T_WHITESPACE"," ",258],["T_ELSEIF","elseif",258],["T_WHITESPACE"," ",258],"(",["T_STRING","is_array",258],"(",["T_VARIABLE","$options",258],"[",["T_STRING","self",258],["T_DOUBLE_COLON","::",258],["T_STRING","MERGE_OPTION",258],"]",")",")",["T_WHITESPACE"," ",258],"{",["T_WHITESPACE","\n            ",258],["T_FOREACH","foreach",259],["T_WHITESPACE"," ",259],"(",["T_VARIABLE","$fieldset",259],["T_WHITESPACE"," ",259],["T_AS","as",259],["T_WHITESPACE"," ",259],["T_VARIABLE","$key",259],["T_WHITESPACE"," ",259],["T_DOUBLE_ARROW","=>",259],["T_WHITESPACE"," ",259],["T_VARIABLE","$value",259],")",["T_WHITESPACE"," ",259],"{",["T_WHITESPACE","\n                ",259],["T_IF","if",260],["T_WHITESPACE"," ",260],"(",["T_EMPTY","empty",260],"(",["T_VARIABLE","$options",260],"[",["T_STRING","self",260],["T_DOUBLE_COLON","::",260],["T_STRING","MERGE_OPTION",260],"]","[",["T_VARIABLE","$key",260],"]",")",")",["T_WHITESPACE"," ",260],"{",["T_WHITESPACE","\n                    ",260],["T_COMMENT","\/\/ if there's merge key, we add it, otherwise we replace it\n",261],["T_WHITESPACE","                    ",262],["T_VARIABLE","$replace",262],"[",["T_VARIABLE","$key",262],"]",["T_WHITESPACE"," ",262],"=",["T_WHITESPACE"," ",262],["T_STRING","true",262],";",["T_WHITESPACE","\n                ",262],"}",["T_WHITESPACE","\n            ",263],"}",["T_WHITESPACE","\n        ",264],"}",["T_WHITESPACE"," ",265],["T_COMMENT","\/\/ otherwise $replace is empty - all is merged\n",265],["T_WHITESPACE","\n        ",266],["T_TRY","try",267],["T_WHITESPACE"," ",267],"{",["T_WHITESPACE","\n            ",267],["T_VARIABLE","$this",268],["T_OBJECT_OPERATOR","->",268],["T_STRING","_simpleDb",268],["T_OBJECT_OPERATOR","->",268],["T_STRING","putAttributes",268],"(",["T_WHITESPACE","\n                ",268],["T_VARIABLE","$collectionName",269],",",["T_WHITESPACE","\n                ",269],["T_VARIABLE","$documentId",270],",",["T_WHITESPACE","\n                ",270],["T_VARIABLE","$this",271],["T_OBJECT_OPERATOR","->",271],["T_STRING","_makeAttributes",271],"(",["T_VARIABLE","$documentId",271],",",["T_WHITESPACE"," ",271],["T_VARIABLE","$fieldset",271],")",",",["T_WHITESPACE","\n                ",271],["T_VARIABLE","$replace",272],["T_WHITESPACE","\n            ",272],")",";",["T_WHITESPACE","\n        ",273],"}",["T_WHITESPACE"," ",274],["T_CATCH","catch",274],"(",["T_STRING","Zend_Service_Amazon_Exception",274],["T_WHITESPACE"," ",274],["T_VARIABLE","$e",274],")",["T_WHITESPACE"," ",274],"{",["T_WHITESPACE","\n            ",274],["T_THROW","throw",275],["T_WHITESPACE"," ",275],["T_NEW","new",275],["T_WHITESPACE"," ",275],["T_STRING","Zend_Cloud_DocumentService_Exception",275],"(",["T_CONSTANT_ENCAPSED_STRING","'Error on document update: '",275],".",["T_VARIABLE","$e",275],["T_OBJECT_OPERATOR","->",275],["T_STRING","getMessage",275],"(",")",",",["T_WHITESPACE"," ",275],["T_VARIABLE","$e",275],["T_OBJECT_OPERATOR","->",275],["T_STRING","getCode",275],"(",")",",",["T_WHITESPACE"," ",275],["T_VARIABLE","$e",275],")",";",["T_WHITESPACE","\n        ",275],"}",["T_WHITESPACE","\n        ",276],["T_RETURN","return",277],["T_WHITESPACE"," ",277],["T_STRING","true",277],";",["T_WHITESPACE","\n    ",277],"}",["T_WHITESPACE","\n\n    ",278],["T_DOC_COMMENT","\/**\n     * Delete document.\n     *\n     * @param  string $collectionName Collection from which to delete document\n     * @param  mixed  $document Document ID or Document object.\n     * @param  array  $options\n     * @return boolean\n     *\/",280],["T_WHITESPACE","\n    ",287],["T_PUBLIC","public",288],["T_WHITESPACE"," ",288],["T_FUNCTION","function",288],["T_WHITESPACE"," ",288],["T_STRING","deleteDocument",288],"(",["T_VARIABLE","$collectionName",288],",",["T_WHITESPACE"," ",288],["T_VARIABLE","$document",288],",",["T_WHITESPACE"," ",288],["T_VARIABLE","$options",288],["T_WHITESPACE"," ",288],"=",["T_WHITESPACE"," ",288],["T_STRING","null",288],")",["T_WHITESPACE","\n    ",288],"{",["T_WHITESPACE","\n        ",289],["T_IF","if",290],["T_WHITESPACE"," ",290],"(",["T_VARIABLE","$document",290],["T_WHITESPACE"," ",290],["T_INSTANCEOF","instanceof",290],["T_WHITESPACE"," ",290],["T_STRING","Zend_Cloud_DocumentService_Document",290],")",["T_WHITESPACE"," ",290],"{",["T_WHITESPACE","\n            ",290],["T_VARIABLE","$document",291],["T_WHITESPACE"," ",291],"=",["T_WHITESPACE"," ",291],["T_VARIABLE","$document",291],["T_OBJECT_OPERATOR","->",291],["T_STRING","getId",291],"(",")",";",["T_WHITESPACE","\n        ",291],"}",["T_WHITESPACE","\n        ",292],["T_TRY","try",293],["T_WHITESPACE"," ",293],"{",["T_WHITESPACE","\n            ",293],["T_VARIABLE","$this",294],["T_OBJECT_OPERATOR","->",294],["T_STRING","_simpleDb",294],["T_OBJECT_OPERATOR","->",294],["T_STRING","deleteAttributes",294],"(",["T_VARIABLE","$collectionName",294],",",["T_WHITESPACE"," ",294],["T_VARIABLE","$document",294],")",";",["T_WHITESPACE","\n        ",294],"}",["T_WHITESPACE"," ",295],["T_CATCH","catch",295],"(",["T_STRING","Zend_Service_Amazon_Exception",295],["T_WHITESPACE"," ",295],["T_VARIABLE","$e",295],")",["T_WHITESPACE"," ",295],"{",["T_WHITESPACE","\n            ",295],["T_THROW","throw",296],["T_WHITESPACE"," ",296],["T_NEW","new",296],["T_WHITESPACE"," ",296],["T_STRING","Zend_Cloud_DocumentService_Exception",296],"(",["T_CONSTANT_ENCAPSED_STRING","'Error on document deletion: '",296],".",["T_VARIABLE","$e",296],["T_OBJECT_OPERATOR","->",296],["T_STRING","getMessage",296],"(",")",",",["T_WHITESPACE"," ",296],["T_VARIABLE","$e",296],["T_OBJECT_OPERATOR","->",296],["T_STRING","getCode",296],"(",")",",",["T_WHITESPACE"," ",296],["T_VARIABLE","$e",296],")",";",["T_WHITESPACE","\n        ",296],"}",["T_WHITESPACE","\n        ",297],["T_RETURN","return",298],["T_WHITESPACE"," ",298],["T_STRING","true",298],";",["T_WHITESPACE","\n    ",298],"}",["T_WHITESPACE","\n\n    ",299],["T_DOC_COMMENT","\/**\n     * Fetch single document by ID\n     *\n     * @param  string $collectionName Collection name\n     * @param  mixed $documentId Document ID, adapter-dependent\n     * @param  array $options\n     * @return Zend_Cloud_DocumentService_Document\n     *\/",301],["T_WHITESPACE","\n    ",308],["T_PUBLIC","public",309],["T_WHITESPACE"," ",309],["T_FUNCTION","function",309],["T_WHITESPACE"," ",309],["T_STRING","fetchDocument",309],"(",["T_VARIABLE","$collectionName",309],",",["T_WHITESPACE"," ",309],["T_VARIABLE","$documentId",309],",",["T_WHITESPACE"," ",309],["T_VARIABLE","$options",309],["T_WHITESPACE"," ",309],"=",["T_WHITESPACE"," ",309],["T_STRING","null",309],")",["T_WHITESPACE","\n    ",309],"{",["T_WHITESPACE","\n        ",310],["T_TRY","try",311],["T_WHITESPACE"," ",311],"{",["T_WHITESPACE","\n            ",311],["T_VARIABLE","$attributes",312],["T_WHITESPACE"," ",312],"=",["T_WHITESPACE"," ",312],["T_VARIABLE","$this",312],["T_OBJECT_OPERATOR","->",312],["T_STRING","_simpleDb",312],["T_OBJECT_OPERATOR","->",312],["T_STRING","getAttributes",312],"(",["T_VARIABLE","$collectionName",312],",",["T_WHITESPACE"," ",312],["T_VARIABLE","$documentId",312],")",";",["T_WHITESPACE","\n            ",312],["T_IF","if",313],["T_WHITESPACE"," ",313],"(",["T_VARIABLE","$attributes",313],["T_WHITESPACE"," ",313],["T_IS_EQUAL","==",313],["T_WHITESPACE"," ",313],["T_STRING","false",313],["T_WHITESPACE"," ",313],["T_BOOLEAN_OR","||",313],["T_WHITESPACE"," ",313],["T_STRING","count",313],"(",["T_VARIABLE","$attributes",313],")",["T_WHITESPACE"," ",313],["T_IS_EQUAL","==",313],["T_WHITESPACE"," ",313],["T_LNUMBER","0",313],")",["T_WHITESPACE"," ",313],"{",["T_WHITESPACE","\n                ",313],["T_RETURN","return",314],["T_WHITESPACE"," ",314],["T_STRING","false",314],";",["T_WHITESPACE","\n            ",314],"}",["T_WHITESPACE","\n            ",315],["T_RETURN","return",316],["T_WHITESPACE"," ",316],["T_VARIABLE","$this",316],["T_OBJECT_OPERATOR","->",316],["T_STRING","_resolveAttributes",316],"(",["T_VARIABLE","$attributes",316],",",["T_WHITESPACE"," ",316],["T_STRING","true",316],")",";",["T_WHITESPACE","\n        ",316],"}",["T_WHITESPACE"," ",317],["T_CATCH","catch",317],"(",["T_STRING","Zend_Service_Amazon_Exception",317],["T_WHITESPACE"," ",317],["T_VARIABLE","$e",317],")",["T_WHITESPACE"," ",317],"{",["T_WHITESPACE","\n            ",317],["T_THROW","throw",318],["T_WHITESPACE"," ",318],["T_NEW","new",318],["T_WHITESPACE"," ",318],["T_STRING","Zend_Cloud_DocumentService_Exception",318],"(",["T_CONSTANT_ENCAPSED_STRING","'Error on fetching document: '",318],".",["T_VARIABLE","$e",318],["T_OBJECT_OPERATOR","->",318],["T_STRING","getMessage",318],"(",")",",",["T_WHITESPACE"," ",318],["T_VARIABLE","$e",318],["T_OBJECT_OPERATOR","->",318],["T_STRING","getCode",318],"(",")",",",["T_WHITESPACE"," ",318],["T_VARIABLE","$e",318],")",";",["T_WHITESPACE","\n        ",318],"}",["T_WHITESPACE","\n    ",319],"}",["T_WHITESPACE","\n\n    ",320],["T_DOC_COMMENT","\/**\n     * Query for documents stored in the document service. If a string is passed in\n     * $query, the query string will be passed directly to the service.\n     *\n     * @param  string $collectionName Collection name\n     * @param  string $query\n     * @param  array $options\n     * @return array Zend_Cloud_DocumentService_DocumentSet\n     *\/",322],["T_WHITESPACE","\n    ",330],["T_PUBLIC","public",331],["T_WHITESPACE"," ",331],["T_FUNCTION","function",331],["T_WHITESPACE"," ",331],["T_STRING","query",331],"(",["T_VARIABLE","$collectionName",331],",",["T_WHITESPACE"," ",331],["T_VARIABLE","$query",331],",",["T_WHITESPACE"," ",331],["T_VARIABLE","$options",331],["T_WHITESPACE"," ",331],"=",["T_WHITESPACE"," ",331],["T_STRING","null",331],")",["T_WHITESPACE","\n    ",331],"{",["T_WHITESPACE","\n        ",332],["T_VARIABLE","$returnDocs",333],["T_WHITESPACE"," ",333],"=",["T_WHITESPACE"," ",333],["T_ISSET","isset",333],"(",["T_VARIABLE","$options",333],"[",["T_STRING","self",333],["T_DOUBLE_COLON","::",333],["T_STRING","RETURN_DOCUMENTS",333],"]",")",["T_WHITESPACE","\n                    ",333],"?",["T_WHITESPACE"," ",334],["T_BOOL_CAST","(bool)",334],["T_WHITESPACE"," ",334],["T_VARIABLE","$options",334],"[",["T_STRING","self",334],["T_DOUBLE_COLON","::",334],["T_STRING","RETURN_DOCUMENTS",334],"]",["T_WHITESPACE","\n                    ",334],":",["T_WHITESPACE"," ",335],["T_STRING","true",335],";",["T_WHITESPACE","\n\n        ",335],["T_TRY","try",337],["T_WHITESPACE"," ",337],"{",["T_WHITESPACE","\n            ",337],["T_IF","if",338],["T_WHITESPACE"," ",338],"(",["T_VARIABLE","$query",338],["T_WHITESPACE"," ",338],["T_INSTANCEOF","instanceof",338],["T_WHITESPACE"," ",338],["T_STRING","Zend_Cloud_DocumentService_Adapter_SimpleDb_Query",338],")",["T_WHITESPACE"," ",338],"{",["T_WHITESPACE","\n                ",338],["T_VARIABLE","$query",339],["T_WHITESPACE"," ",339],"=",["T_WHITESPACE"," ",339],["T_VARIABLE","$query",339],["T_OBJECT_OPERATOR","->",339],["T_STRING","assemble",339],"(",["T_VARIABLE","$collectionName",339],")",";",["T_WHITESPACE","\n            ",339],"}",["T_WHITESPACE","\n            ",340],["T_VARIABLE","$result",341],["T_WHITESPACE"," ",341],"=",["T_WHITESPACE"," ",341],["T_VARIABLE","$this",341],["T_OBJECT_OPERATOR","->",341],["T_STRING","_simpleDb",341],["T_OBJECT_OPERATOR","->",341],["T_STRING","select",341],"(",["T_VARIABLE","$query",341],")",";",["T_WHITESPACE","\n        ",341],"}",["T_WHITESPACE"," ",342],["T_CATCH","catch",342],"(",["T_STRING","Zend_Service_Amazon_Exception",342],["T_WHITESPACE"," ",342],["T_VARIABLE","$e",342],")",["T_WHITESPACE"," ",342],"{",["T_WHITESPACE","\n            ",342],["T_THROW","throw",343],["T_WHITESPACE"," ",343],["T_NEW","new",343],["T_WHITESPACE"," ",343],["T_STRING","Zend_Cloud_DocumentService_Exception",343],"(",["T_CONSTANT_ENCAPSED_STRING","'Error on document query: '",343],".",["T_VARIABLE","$e",343],["T_OBJECT_OPERATOR","->",343],["T_STRING","getMessage",343],"(",")",",",["T_WHITESPACE"," ",343],["T_VARIABLE","$e",343],["T_OBJECT_OPERATOR","->",343],["T_STRING","getCode",343],"(",")",",",["T_WHITESPACE"," ",343],["T_VARIABLE","$e",343],")",";",["T_WHITESPACE","\n        ",343],"}",["T_WHITESPACE","\n\n        ",344],["T_RETURN","return",346],["T_WHITESPACE"," ",346],["T_VARIABLE","$this",346],["T_OBJECT_OPERATOR","->",346],["T_STRING","_getDocumentSetFromResultSet",346],"(",["T_VARIABLE","$result",346],",",["T_WHITESPACE"," ",346],["T_VARIABLE","$returnDocs",346],")",";",["T_WHITESPACE","\n    ",346],"}",["T_WHITESPACE","\n\n    ",347],["T_DOC_COMMENT","\/**\n     * Create query statement\n     *\n     * @param  string $fields\n     * @return Zend_Cloud_DocumentService_Adapter_SimpleDb_Query\n     *\/",349],["T_WHITESPACE","\n    ",354],["T_PUBLIC","public",355],["T_WHITESPACE"," ",355],["T_FUNCTION","function",355],["T_WHITESPACE"," ",355],["T_STRING","select",355],"(",["T_VARIABLE","$fields",355],["T_WHITESPACE"," ",355],"=",["T_WHITESPACE"," ",355],["T_STRING","null",355],")",["T_WHITESPACE","\n    ",355],"{",["T_WHITESPACE","\n        ",356],["T_VARIABLE","$queryClass",357],["T_WHITESPACE"," ",357],"=",["T_WHITESPACE"," ",357],["T_VARIABLE","$this",357],["T_OBJECT_OPERATOR","->",357],["T_STRING","getQueryClass",357],"(",")",";",["T_WHITESPACE","\n        ",357],["T_IF","if",358],["T_WHITESPACE"," ",358],"(","!",["T_STRING","class_exists",358],"(",["T_VARIABLE","$queryClass",358],")",")",["T_WHITESPACE"," ",358],"{",["T_WHITESPACE","\n            ",358],["T_COMMENT","#require_once 'Zend\/Loader.php';\n",359],["T_WHITESPACE","            ",360],["T_STRING","Zend_Loader",360],["T_DOUBLE_COLON","::",360],["T_STRING","loadClass",360],"(",["T_VARIABLE","$queryClass",360],")",";",["T_WHITESPACE","\n        ",360],"}",["T_WHITESPACE","\n\n        ",361],["T_VARIABLE","$query",363],["T_WHITESPACE"," ",363],"=",["T_WHITESPACE"," ",363],["T_NEW","new",363],["T_WHITESPACE"," ",363],["T_VARIABLE","$queryClass",363],"(",["T_VARIABLE","$this",363],")",";",["T_WHITESPACE","\n        ",363],["T_VARIABLE","$defaultClass",364],["T_WHITESPACE"," ",364],"=",["T_WHITESPACE"," ",364],["T_STRING","self",364],["T_DOUBLE_COLON","::",364],["T_STRING","DEFAULT_QUERY_CLASS",364],";",["T_WHITESPACE","\n        ",364],["T_IF","if",365],["T_WHITESPACE"," ",365],"(","!",["T_VARIABLE","$query",365],["T_WHITESPACE"," ",365],["T_INSTANCEOF","instanceof",365],["T_WHITESPACE"," ",365],["T_VARIABLE","$defaultClass",365],")",["T_WHITESPACE"," ",365],"{",["T_WHITESPACE","\n            ",365],["T_THROW","throw",366],["T_WHITESPACE"," ",366],["T_NEW","new",366],["T_WHITESPACE"," ",366],["T_STRING","Zend_Cloud_DocumentService_Exception",366],"(",["T_CONSTANT_ENCAPSED_STRING","'Query class must extend '",366],["T_WHITESPACE"," ",366],".",["T_WHITESPACE"," ",366],["T_STRING","self",366],["T_DOUBLE_COLON","::",366],["T_STRING","DEFAULT_QUERY_CLASS",366],")",";",["T_WHITESPACE","\n        ",366],"}",["T_WHITESPACE","\n\n        ",367],["T_VARIABLE","$query",369],["T_OBJECT_OPERATOR","->",369],["T_STRING","select",369],"(",["T_VARIABLE","$fields",369],")",";",["T_WHITESPACE","\n        ",369],["T_RETURN","return",370],["T_WHITESPACE"," ",370],["T_VARIABLE","$query",370],";",["T_WHITESPACE","\n    ",370],"}",["T_WHITESPACE","\n\n    ",371],["T_DOC_COMMENT","\/**\n     * Get the concrete service client\n     *\n     * @return Zend_Service_Amazon_SimpleDb\n     *\/",373],["T_WHITESPACE","\n    ",377],["T_PUBLIC","public",378],["T_WHITESPACE"," ",378],["T_FUNCTION","function",378],["T_WHITESPACE"," ",378],["T_STRING","getClient",378],"(",")",["T_WHITESPACE","\n    ",378],"{",["T_WHITESPACE","\n        ",379],["T_RETURN","return",380],["T_WHITESPACE"," ",380],["T_VARIABLE","$this",380],["T_OBJECT_OPERATOR","->",380],["T_STRING","_simpleDb",380],";",["T_WHITESPACE","\n    ",380],"}",["T_WHITESPACE","\n\n    ",381],["T_DOC_COMMENT","\/**\n     * Convert array of key-value pairs to array of Amazon attributes\n     *\n     * @param string $name\n     * @param array $attributes\n     * @return array\n     *\/",383],["T_WHITESPACE","\n    ",389],["T_PROTECTED","protected",390],["T_WHITESPACE"," ",390],["T_FUNCTION","function",390],["T_WHITESPACE"," ",390],["T_STRING","_makeAttributes",390],"(",["T_VARIABLE","$name",390],",",["T_WHITESPACE"," ",390],["T_VARIABLE","$attributes",390],")",["T_WHITESPACE","\n    ",390],"{",["T_WHITESPACE","\n        ",391],["T_VARIABLE","$result",392],["T_WHITESPACE"," ",392],"=",["T_WHITESPACE"," ",392],["T_ARRAY","array",392],"(",")",";",["T_WHITESPACE","\n        ",392],["T_FOREACH","foreach",393],["T_WHITESPACE"," ",393],"(",["T_VARIABLE","$attributes",393],["T_WHITESPACE"," ",393],["T_AS","as",393],["T_WHITESPACE"," ",393],["T_VARIABLE","$key",393],["T_WHITESPACE"," ",393],["T_DOUBLE_ARROW","=>",393],["T_WHITESPACE"," ",393],["T_VARIABLE","$attr",393],")",["T_WHITESPACE"," ",393],"{",["T_WHITESPACE","\n            ",393],["T_VARIABLE","$result",394],"[","]",["T_WHITESPACE"," ",394],"=",["T_WHITESPACE"," ",394],["T_NEW","new",394],["T_WHITESPACE"," ",394],["T_STRING","Zend_Service_Amazon_SimpleDb_Attribute",394],"(",["T_VARIABLE","$name",394],",",["T_WHITESPACE"," ",394],["T_VARIABLE","$key",394],",",["T_WHITESPACE"," ",394],["T_VARIABLE","$attr",394],")",";",["T_WHITESPACE","\n        ",394],"}",["T_WHITESPACE","\n        ",395],["T_RETURN","return",396],["T_WHITESPACE"," ",396],["T_VARIABLE","$result",396],";",["T_WHITESPACE","\n    ",396],"}",["T_WHITESPACE","\n\n    ",397],["T_DOC_COMMENT","\/**\n     * Convert array of Amazon attributes to array of key-value pairs\n     *\n     * @param array $attributes\n     * @return array\n     *\/",399],["T_WHITESPACE","\n    ",404],["T_PROTECTED","protected",405],["T_WHITESPACE"," ",405],["T_FUNCTION","function",405],["T_WHITESPACE"," ",405],["T_STRING","_resolveAttributes",405],"(",["T_VARIABLE","$attributes",405],",",["T_WHITESPACE"," ",405],["T_VARIABLE","$returnDocument",405],["T_WHITESPACE"," ",405],"=",["T_WHITESPACE"," ",405],["T_STRING","false",405],")",["T_WHITESPACE","\n    ",405],"{",["T_WHITESPACE","\n        ",406],["T_VARIABLE","$result",407],["T_WHITESPACE"," ",407],"=",["T_WHITESPACE"," ",407],["T_ARRAY","array",407],"(",")",";",["T_WHITESPACE","\n        ",407],["T_FOREACH","foreach",408],["T_WHITESPACE"," ",408],"(",["T_VARIABLE","$attributes",408],["T_WHITESPACE"," ",408],["T_AS","as",408],["T_WHITESPACE"," ",408],["T_VARIABLE","$attr",408],")",["T_WHITESPACE"," ",408],"{",["T_WHITESPACE","\n            ",408],["T_VARIABLE","$value",409],["T_WHITESPACE"," ",409],"=",["T_WHITESPACE"," ",409],["T_VARIABLE","$attr",409],["T_OBJECT_OPERATOR","->",409],["T_STRING","getValues",409],"(",")",";",["T_WHITESPACE","\n            ",409],["T_IF","if",410],["T_WHITESPACE"," ",410],"(",["T_STRING","count",410],"(",["T_VARIABLE","$value",410],")",["T_WHITESPACE"," ",410],["T_IS_EQUAL","==",410],["T_WHITESPACE"," ",410],["T_LNUMBER","0",410],")",["T_WHITESPACE"," ",410],"{",["T_WHITESPACE","\n                ",410],["T_VARIABLE","$value",411],["T_WHITESPACE"," ",411],"=",["T_WHITESPACE"," ",411],["T_STRING","null",411],";",["T_WHITESPACE","\n            ",411],"}",["T_WHITESPACE"," ",412],["T_ELSEIF","elseif",412],["T_WHITESPACE"," ",412],"(",["T_STRING","count",412],"(",["T_VARIABLE","$value",412],")",["T_WHITESPACE"," ",412],["T_IS_EQUAL","==",412],["T_WHITESPACE"," ",412],["T_LNUMBER","1",412],")",["T_WHITESPACE"," ",412],"{",["T_WHITESPACE","\n                ",412],["T_VARIABLE","$value",413],["T_WHITESPACE"," ",413],"=",["T_WHITESPACE"," ",413],["T_VARIABLE","$value",413],"[",["T_LNUMBER","0",413],"]",";",["T_WHITESPACE","\n            ",413],"}",["T_WHITESPACE","\n            ",414],["T_VARIABLE","$result",415],"[",["T_VARIABLE","$attr",415],["T_OBJECT_OPERATOR","->",415],["T_STRING","getName",415],"(",")","]",["T_WHITESPACE"," ",415],"=",["T_WHITESPACE"," ",415],["T_VARIABLE","$value",415],";",["T_WHITESPACE","\n        ",415],"}",["T_WHITESPACE","\n\n        ",416],["T_COMMENT","\/\/ Return as document object?\n",418],["T_WHITESPACE","        ",419],["T_IF","if",419],["T_WHITESPACE"," ",419],"(",["T_VARIABLE","$returnDocument",419],")",["T_WHITESPACE"," ",419],"{",["T_WHITESPACE","\n            ",419],["T_VARIABLE","$documentClass",420],["T_WHITESPACE"," ",420],"=",["T_WHITESPACE"," ",420],["T_VARIABLE","$this",420],["T_OBJECT_OPERATOR","->",420],["T_STRING","getDocumentClass",420],"(",")",";",["T_WHITESPACE","\n            ",420],["T_RETURN","return",421],["T_WHITESPACE"," ",421],["T_NEW","new",421],["T_WHITESPACE"," ",421],["T_VARIABLE","$documentClass",421],"(",["T_VARIABLE","$result",421],",",["T_WHITESPACE"," ",421],["T_VARIABLE","$attr",421],["T_OBJECT_OPERATOR","->",421],["T_STRING","getItemName",421],"(",")",")",";",["T_WHITESPACE","\n        ",421],"}",["T_WHITESPACE","\n\n        ",422],["T_RETURN","return",424],["T_WHITESPACE"," ",424],["T_VARIABLE","$result",424],";",["T_WHITESPACE","\n    ",424],"}",["T_WHITESPACE","\n\n    ",425],["T_DOC_COMMENT","\/**\n     * Create suitable document from array of fields\n     *\n     * @param array $document\n     * @return Zend_Cloud_DocumentService_Document\n     *\/",427],["T_WHITESPACE","\n    ",432],["T_PROTECTED","protected",433],["T_WHITESPACE"," ",433],["T_FUNCTION","function",433],["T_WHITESPACE"," ",433],["T_STRING","_getDocumentFromArray",433],"(",["T_VARIABLE","$document",433],")",["T_WHITESPACE","\n    ",433],"{",["T_WHITESPACE","\n        ",434],["T_IF","if",435],["T_WHITESPACE"," ",435],"(","!",["T_ISSET","isset",435],"(",["T_VARIABLE","$document",435],"[",["T_STRING","Zend_Cloud_DocumentService_Document",435],["T_DOUBLE_COLON","::",435],["T_STRING","KEY_FIELD",435],"]",")",")",["T_WHITESPACE"," ",435],"{",["T_WHITESPACE","\n            ",435],["T_IF","if",436],["T_WHITESPACE"," ",436],"(",["T_ISSET","isset",436],"(",["T_VARIABLE","$document",436],"[",["T_STRING","self",436],["T_DOUBLE_COLON","::",436],["T_STRING","ITEM_NAME",436],"]",")",")",["T_WHITESPACE"," ",436],"{",["T_WHITESPACE","\n                ",436],["T_VARIABLE","$key",437],["T_WHITESPACE"," ",437],"=",["T_WHITESPACE"," ",437],["T_VARIABLE","$document",437],"[",["T_STRING","self",437],["T_DOUBLE_COLON","::",437],["T_STRING","ITEM_NAME",437],"]",";",["T_WHITESPACE","\n                ",437],["T_UNSET","unset",438],"(",["T_VARIABLE","$document",438],"[",["T_STRING","self",438],["T_DOUBLE_COLON","::",438],["T_STRING","ITEM_NAME",438],"]",")",";",["T_WHITESPACE","\n            ",438],"}",["T_WHITESPACE"," ",439],["T_ELSE","else",439],["T_WHITESPACE"," ",439],"{",["T_WHITESPACE","\n                ",439],["T_THROW","throw",440],["T_WHITESPACE"," ",440],["T_NEW","new",440],["T_WHITESPACE"," ",440],["T_STRING","Zend_Cloud_DocumentService_Exception",440],"(",["T_CONSTANT_ENCAPSED_STRING","'Fields array should contain the key field '",440],".",["T_STRING","Zend_Cloud_DocumentService_Document",440],["T_DOUBLE_COLON","::",440],["T_STRING","KEY_FIELD",440],")",";",["T_WHITESPACE","\n            ",440],"}",["T_WHITESPACE","\n        ",441],"}",["T_WHITESPACE"," ",442],["T_ELSE","else",442],["T_WHITESPACE"," ",442],"{",["T_WHITESPACE","\n            ",442],["T_VARIABLE","$key",443],["T_WHITESPACE"," ",443],"=",["T_WHITESPACE"," ",443],["T_VARIABLE","$document",443],"[",["T_STRING","Zend_Cloud_DocumentService_Document",443],["T_DOUBLE_COLON","::",443],["T_STRING","KEY_FIELD",443],"]",";",["T_WHITESPACE","\n            ",443],["T_UNSET","unset",444],"(",["T_VARIABLE","$document",444],"[",["T_STRING","Zend_Cloud_DocumentService_Document",444],["T_DOUBLE_COLON","::",444],["T_STRING","KEY_FIELD",444],"]",")",";",["T_WHITESPACE","\n        ",444],"}",["T_WHITESPACE","\n\n        ",445],["T_VARIABLE","$documentClass",447],["T_WHITESPACE"," ",447],"=",["T_WHITESPACE"," ",447],["T_VARIABLE","$this",447],["T_OBJECT_OPERATOR","->",447],["T_STRING","getDocumentClass",447],"(",")",";",["T_WHITESPACE","\n        ",447],["T_RETURN","return",448],["T_WHITESPACE"," ",448],["T_NEW","new",448],["T_WHITESPACE"," ",448],["T_VARIABLE","$documentClass",448],"(",["T_VARIABLE","$document",448],",",["T_WHITESPACE"," ",448],["T_VARIABLE","$key",448],")",";",["T_WHITESPACE","\n    ",448],"}",["T_WHITESPACE","\n\n    ",449],["T_DOC_COMMENT","\/**\n     * Create a DocumentSet from a SimpleDb resultset\n     *\n     * @param  Zend_Service_Amazon_SimpleDb_Page $resultSet\n     * @param  bool $returnDocs\n     * @return Zend_Cloud_DocumentService_DocumentSet\n     *\/",451],["T_WHITESPACE","\n    ",457],["T_PROTECTED","protected",458],["T_WHITESPACE"," ",458],["T_FUNCTION","function",458],["T_WHITESPACE"," ",458],["T_STRING","_getDocumentSetFromResultSet",458],"(",["T_STRING","Zend_Service_Amazon_SimpleDb_Page",458],["T_WHITESPACE"," ",458],["T_VARIABLE","$resultSet",458],",",["T_WHITESPACE"," ",458],["T_VARIABLE","$returnDocs",458],["T_WHITESPACE"," ",458],"=",["T_WHITESPACE"," ",458],["T_STRING","true",458],")",["T_WHITESPACE","\n    ",458],"{",["T_WHITESPACE","\n        ",459],["T_VARIABLE","$docs",460],["T_WHITESPACE"," ",460],"=",["T_WHITESPACE"," ",460],["T_ARRAY","array",460],"(",")",";",["T_WHITESPACE","\n        ",460],["T_FOREACH","foreach",461],["T_WHITESPACE"," ",461],"(",["T_VARIABLE","$resultSet",461],["T_OBJECT_OPERATOR","->",461],["T_STRING","getData",461],"(",")",["T_WHITESPACE"," ",461],["T_AS","as",461],["T_WHITESPACE"," ",461],["T_VARIABLE","$item",461],")",["T_WHITESPACE"," ",461],"{",["T_WHITESPACE","\n            ",461],["T_VARIABLE","$docs",462],"[","]",["T_WHITESPACE"," ",462],"=",["T_WHITESPACE"," ",462],["T_VARIABLE","$this",462],["T_OBJECT_OPERATOR","->",462],["T_STRING","_resolveAttributes",462],"(",["T_VARIABLE","$item",462],",",["T_WHITESPACE"," ",462],["T_VARIABLE","$returnDocs",462],")",";",["T_WHITESPACE","\n        ",462],"}",["T_WHITESPACE","\n\n        ",463],["T_VARIABLE","$setClass",465],["T_WHITESPACE"," ",465],"=",["T_WHITESPACE"," ",465],["T_VARIABLE","$this",465],["T_OBJECT_OPERATOR","->",465],["T_STRING","getDocumentSetClass",465],"(",")",";",["T_WHITESPACE","\n        ",465],["T_RETURN","return",466],["T_WHITESPACE"," ",466],["T_NEW","new",466],["T_WHITESPACE"," ",466],["T_VARIABLE","$setClass",466],"(",["T_VARIABLE","$docs",466],")",";",["T_WHITESPACE","\n    ",466],"}",["T_WHITESPACE","\n",467],"}",["T_WHITESPACE","\n",468]]
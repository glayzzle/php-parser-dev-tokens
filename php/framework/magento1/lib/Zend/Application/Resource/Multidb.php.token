[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Zend Framework\n *\n * LICENSE\n *\n * This source file is subject to the new BSD license that is bundled\n * with this package in the file LICENSE.txt.\n * It is also available through the world-wide-web at this URL:\n * http:\/\/framework.zend.com\/license\/new-bsd\n * If you did not receive a copy of the license and are unable to\n * obtain it through the world-wide-web, please send an email\n * to license@zend.com so we can send you a copy immediately.\n *\n * @category   Zend\n * @package    Zend_Application\n * @subpackage Resource\n * @copyright  Copyright (c) 2005-2015 Zend Technologies USA Inc. (http:\/\/www.zend.com)\n * @license    http:\/\/framework.zend.com\/license\/new-bsd     New BSD License\n * @version    $Id$\n *\/",2],["T_WHITESPACE","\n\n",21],["T_COMMENT","#require_once 'Zend\/Application\/Resource\/ResourceAbstract.php';\n",23],["T_WHITESPACE","\n",24],["T_COMMENT","#require_once 'Zend\/Db\/Table.php';\n",25],["T_WHITESPACE","\n",26],["T_DOC_COMMENT","\/**\n *\/",27],["T_WHITESPACE","\n\n",28],["T_DOC_COMMENT","\/**\n * Cache Manager resource\n *\n * Example configuration:\n * <pre>\n *   resources.multidb.defaultMetadataCache = \"database\"\n *\n *   resources.multidb.db1.adapter = \"pdo_mysql\"\n *   resources.multidb.db1.host = \"localhost\"\n *   resources.multidb.db1.username = \"webuser\"\n *   resources.multidb.db1.password = \"XXXX\"\n *   resources.multidb.db1.dbname = \"db1\"\n *   resources.multidb.db1.default = true\n *\n *   resources.multidb.db2.adapter = \"pdo_pgsql\"\n *   resources.multidb.db2.host = \"example.com\"\n *   resources.multidb.db2.username = \"dba\"\n *   resources.multidb.db2.password = \"notthatpublic\"\n *   resources.multidb.db2.dbname = \"db2\"\n * <\/pre>\n *\n * @category   Zend\n * @package    Zend_Application\n * @subpackage Resource\n * @copyright  Copyright (c) 2005-2015 Zend Technologies USA Inc. (http:\/\/www.zend.com)\n * @license    http:\/\/framework.zend.com\/license\/new-bsd     New BSD License\n *\/",30],["T_WHITESPACE","\n",56],["T_CLASS","class",57],["T_WHITESPACE"," ",57],["T_STRING","Zend_Application_Resource_Multidb",57],["T_WHITESPACE"," ",57],["T_EXTENDS","extends",57],["T_WHITESPACE"," ",57],["T_STRING","Zend_Application_Resource_ResourceAbstract",57],["T_WHITESPACE","\n",57],"{",["T_WHITESPACE","\n    ",58],["T_DOC_COMMENT","\/**\n     * Associative array containing all configured db's\n     *\n     * @var array\n     *\/",59],["T_WHITESPACE","\n    ",63],["T_PROTECTED","protected",64],["T_WHITESPACE"," ",64],["T_VARIABLE","$_dbs",64],["T_WHITESPACE"," ",64],"=",["T_WHITESPACE"," ",64],["T_ARRAY","array",64],"(",")",";",["T_WHITESPACE","\n\n    ",64],["T_DOC_COMMENT","\/**\n     * An instance of the default db, if set\n     *\n     * @var null|Zend_Db_Adapter_Abstract\n     *\/",66],["T_WHITESPACE","\n    ",70],["T_PROTECTED","protected",71],["T_WHITESPACE"," ",71],["T_VARIABLE","$_defaultDb",71],";",["T_WHITESPACE","\n\n    ",71],["T_DOC_COMMENT","\/**\n     * Initialize the Database Connections (instances of Zend_Db_Table_Abstract)\n     *\n     * @return Zend_Application_Resource_Multidb\n     *\/",73],["T_WHITESPACE","\n    ",77],["T_PUBLIC","public",78],["T_WHITESPACE"," ",78],["T_FUNCTION","function",78],["T_WHITESPACE"," ",78],["T_STRING","init",78],"(",")",["T_WHITESPACE","\n    ",78],"{",["T_WHITESPACE","\n        ",79],["T_VARIABLE","$options",80],["T_WHITESPACE"," ",80],"=",["T_WHITESPACE"," ",80],["T_VARIABLE","$this",80],["T_OBJECT_OPERATOR","->",80],["T_STRING","getOptions",80],"(",")",";",["T_WHITESPACE","\n\n        ",80],["T_IF","if",82],["T_WHITESPACE"," ",82],"(",["T_ISSET","isset",82],"(",["T_VARIABLE","$options",82],"[",["T_CONSTANT_ENCAPSED_STRING","'defaultMetadataCache'",82],"]",")",")",["T_WHITESPACE"," ",82],"{",["T_WHITESPACE","\n            ",82],["T_VARIABLE","$this",83],["T_OBJECT_OPERATOR","->",83],["T_STRING","_setDefaultMetadataCache",83],"(",["T_VARIABLE","$options",83],"[",["T_CONSTANT_ENCAPSED_STRING","'defaultMetadataCache'",83],"]",")",";",["T_WHITESPACE","\n            ",83],["T_UNSET","unset",84],"(",["T_VARIABLE","$options",84],"[",["T_CONSTANT_ENCAPSED_STRING","'defaultMetadataCache'",84],"]",")",";",["T_WHITESPACE","\n        ",84],"}",["T_WHITESPACE","\n\n        ",85],["T_FOREACH","foreach",87],["T_WHITESPACE"," ",87],"(",["T_VARIABLE","$options",87],["T_WHITESPACE"," ",87],["T_AS","as",87],["T_WHITESPACE"," ",87],["T_VARIABLE","$id",87],["T_WHITESPACE"," ",87],["T_DOUBLE_ARROW","=>",87],["T_WHITESPACE"," ",87],["T_VARIABLE","$params",87],")",["T_WHITESPACE"," ",87],"{",["T_WHITESPACE","\n            ",87],["T_VARIABLE","$adapter",88],["T_WHITESPACE"," ",88],"=",["T_WHITESPACE"," ",88],["T_VARIABLE","$params",88],"[",["T_CONSTANT_ENCAPSED_STRING","'adapter'",88],"]",";",["T_WHITESPACE","\n            ",88],["T_VARIABLE","$default",89],["T_WHITESPACE"," ",89],"=",["T_WHITESPACE"," ",89],["T_INT_CAST","(int)",89],["T_WHITESPACE"," ",89],"(",["T_WHITESPACE","\n                ",89],["T_ISSET","isset",90],"(",["T_VARIABLE","$params",90],"[",["T_CONSTANT_ENCAPSED_STRING","'isDefaultTableAdapter'",90],"]",")",["T_WHITESPACE"," ",90],["T_BOOLEAN_AND","&&",90],["T_WHITESPACE"," ",90],["T_VARIABLE","$params",90],"[",["T_CONSTANT_ENCAPSED_STRING","'isDefaultTableAdapter'",90],"]",["T_WHITESPACE","\n                ",90],["T_BOOLEAN_OR","||",91],["T_WHITESPACE"," ",91],["T_ISSET","isset",91],"(",["T_VARIABLE","$params",91],"[",["T_CONSTANT_ENCAPSED_STRING","'default'",91],"]",")",["T_WHITESPACE"," ",91],["T_BOOLEAN_AND","&&",91],["T_WHITESPACE"," ",91],["T_VARIABLE","$params",91],"[",["T_CONSTANT_ENCAPSED_STRING","'default'",91],"]",["T_WHITESPACE","\n            ",91],")",";",["T_WHITESPACE","\n            ",92],["T_UNSET","unset",93],"(",["T_WHITESPACE","\n                ",93],["T_VARIABLE","$params",94],"[",["T_CONSTANT_ENCAPSED_STRING","'adapter'",94],"]",",",["T_WHITESPACE","\n                ",94],["T_VARIABLE","$params",95],"[",["T_CONSTANT_ENCAPSED_STRING","'default'",95],"]",",",["T_WHITESPACE","\n                ",95],["T_VARIABLE","$params",96],"[",["T_CONSTANT_ENCAPSED_STRING","'isDefaultTableAdapter'",96],"]",["T_WHITESPACE","\n            ",96],")",";",["T_WHITESPACE","\n\n            ",97],["T_VARIABLE","$this",99],["T_OBJECT_OPERATOR","->",99],["T_STRING","_dbs",99],"[",["T_VARIABLE","$id",99],"]",["T_WHITESPACE"," ",99],"=",["T_WHITESPACE"," ",99],["T_STRING","Zend_Db",99],["T_DOUBLE_COLON","::",99],["T_STRING","factory",99],"(",["T_VARIABLE","$adapter",99],",",["T_WHITESPACE"," ",99],["T_VARIABLE","$params",99],")",";",["T_WHITESPACE","\n\n            ",99],["T_IF","if",101],["T_WHITESPACE"," ",101],"(",["T_VARIABLE","$default",101],")",["T_WHITESPACE"," ",101],"{",["T_WHITESPACE","\n                ",101],["T_VARIABLE","$this",102],["T_OBJECT_OPERATOR","->",102],["T_STRING","_setDefault",102],"(",["T_VARIABLE","$this",102],["T_OBJECT_OPERATOR","->",102],["T_STRING","_dbs",102],"[",["T_VARIABLE","$id",102],"]",")",";",["T_WHITESPACE","\n            ",102],"}",["T_WHITESPACE","\n        ",103],"}",["T_WHITESPACE","\n\n        ",104],["T_RETURN","return",106],["T_WHITESPACE"," ",106],["T_VARIABLE","$this",106],";",["T_WHITESPACE","\n    ",106],"}",["T_WHITESPACE","\n\n    ",107],["T_DOC_COMMENT","\/**\n     * Determine if the given db(identifier) is the default db.\n     *\n     * @param  string|Zend_Db_Adapter_Abstract $db The db to determine whether it's set as default\n     * @return boolean True if the given parameter is configured as default. False otherwise\n     *\/",109],["T_WHITESPACE","\n    ",114],["T_PUBLIC","public",115],["T_WHITESPACE"," ",115],["T_FUNCTION","function",115],["T_WHITESPACE"," ",115],["T_STRING","isDefault",115],"(",["T_VARIABLE","$db",115],")",["T_WHITESPACE","\n    ",115],"{",["T_WHITESPACE","\n        ",116],["T_IF","if",117],["T_WHITESPACE"," ",117],"(","!",["T_VARIABLE","$db",117],["T_WHITESPACE"," ",117],["T_INSTANCEOF","instanceof",117],["T_WHITESPACE"," ",117],["T_STRING","Zend_Db_Adapter_Abstract",117],")",["T_WHITESPACE"," ",117],"{",["T_WHITESPACE","\n            ",117],["T_VARIABLE","$db",118],["T_WHITESPACE"," ",118],"=",["T_WHITESPACE"," ",118],["T_VARIABLE","$this",118],["T_OBJECT_OPERATOR","->",118],["T_STRING","getDb",118],"(",["T_VARIABLE","$db",118],")",";",["T_WHITESPACE","\n        ",118],"}",["T_WHITESPACE","\n\n        ",119],["T_RETURN","return",121],["T_WHITESPACE"," ",121],["T_VARIABLE","$db",121],["T_WHITESPACE"," ",121],["T_IS_IDENTICAL","===",121],["T_WHITESPACE"," ",121],["T_VARIABLE","$this",121],["T_OBJECT_OPERATOR","->",121],["T_STRING","_defaultDb",121],";",["T_WHITESPACE","\n    ",121],"}",["T_WHITESPACE","\n\n    ",122],["T_DOC_COMMENT","\/**\n     * Retrieve the specified database connection\n     *\n     * @param  null|string|Zend_Db_Adapter_Abstract $db The adapter to retrieve.\n     *                                               Null to retrieve the default connection\n     * @return Zend_Db_Adapter_Abstract\n     * @throws Zend_Application_Resource_Exception if the given parameter could not be found\n     *\/",124],["T_WHITESPACE","\n    ",131],["T_PUBLIC","public",132],["T_WHITESPACE"," ",132],["T_FUNCTION","function",132],["T_WHITESPACE"," ",132],["T_STRING","getDb",132],"(",["T_VARIABLE","$db",132],["T_WHITESPACE"," ",132],"=",["T_WHITESPACE"," ",132],["T_STRING","null",132],")",["T_WHITESPACE","\n    ",132],"{",["T_WHITESPACE","\n        ",133],["T_IF","if",134],["T_WHITESPACE"," ",134],"(",["T_VARIABLE","$db",134],["T_WHITESPACE"," ",134],["T_IS_IDENTICAL","===",134],["T_WHITESPACE"," ",134],["T_STRING","null",134],")",["T_WHITESPACE"," ",134],"{",["T_WHITESPACE","\n            ",134],["T_RETURN","return",135],["T_WHITESPACE"," ",135],["T_VARIABLE","$this",135],["T_OBJECT_OPERATOR","->",135],["T_STRING","getDefaultDb",135],"(",")",";",["T_WHITESPACE","\n        ",135],"}",["T_WHITESPACE","\n\n        ",136],["T_IF","if",138],["T_WHITESPACE"," ",138],"(",["T_ISSET","isset",138],"(",["T_VARIABLE","$this",138],["T_OBJECT_OPERATOR","->",138],["T_STRING","_dbs",138],"[",["T_VARIABLE","$db",138],"]",")",")",["T_WHITESPACE"," ",138],"{",["T_WHITESPACE","\n            ",138],["T_RETURN","return",139],["T_WHITESPACE"," ",139],["T_VARIABLE","$this",139],["T_OBJECT_OPERATOR","->",139],["T_STRING","_dbs",139],"[",["T_VARIABLE","$db",139],"]",";",["T_WHITESPACE","\n        ",139],"}",["T_WHITESPACE","\n\n        ",140],["T_THROW","throw",142],["T_WHITESPACE"," ",142],["T_NEW","new",142],["T_WHITESPACE"," ",142],["T_STRING","Zend_Application_Resource_Exception",142],"(",["T_WHITESPACE","\n            ",142],["T_CONSTANT_ENCAPSED_STRING","'A DB adapter was tried to retrieve, but was not configured'",143],["T_WHITESPACE","\n        ",143],")",";",["T_WHITESPACE","\n    ",144],"}",["T_WHITESPACE","\n\n    ",145],["T_DOC_COMMENT","\/**\n     * Get the default db connection\n     *\n     * @param  boolean $justPickOne If true, a random (the first one in the stack)\n     *                           connection is returned if no default was set.\n     *                           If false, null is returned if no default was set.\n     * @return null|Zend_Db_Adapter_Abstract\n     *\/",147],["T_WHITESPACE","\n    ",154],["T_PUBLIC","public",155],["T_WHITESPACE"," ",155],["T_FUNCTION","function",155],["T_WHITESPACE"," ",155],["T_STRING","getDefaultDb",155],"(",["T_VARIABLE","$justPickOne",155],["T_WHITESPACE"," ",155],"=",["T_WHITESPACE"," ",155],["T_STRING","true",155],")",["T_WHITESPACE","\n    ",155],"{",["T_WHITESPACE","\n        ",156],["T_IF","if",157],["T_WHITESPACE"," ",157],"(",["T_VARIABLE","$this",157],["T_OBJECT_OPERATOR","->",157],["T_STRING","_defaultDb",157],["T_WHITESPACE"," ",157],["T_IS_NOT_IDENTICAL","!==",157],["T_WHITESPACE"," ",157],["T_STRING","null",157],")",["T_WHITESPACE"," ",157],"{",["T_WHITESPACE","\n            ",157],["T_RETURN","return",158],["T_WHITESPACE"," ",158],["T_VARIABLE","$this",158],["T_OBJECT_OPERATOR","->",158],["T_STRING","_defaultDb",158],";",["T_WHITESPACE","\n        ",158],"}",["T_WHITESPACE","\n\n        ",159],["T_IF","if",161],["T_WHITESPACE"," ",161],"(",["T_VARIABLE","$justPickOne",161],")",["T_WHITESPACE"," ",161],"{",["T_WHITESPACE","\n            ",161],["T_RETURN","return",162],["T_WHITESPACE"," ",162],["T_STRING","reset",162],"(",["T_VARIABLE","$this",162],["T_OBJECT_OPERATOR","->",162],["T_STRING","_dbs",162],")",";",["T_WHITESPACE"," ",162],["T_COMMENT","\/\/ Return first db in db pool\n",162],["T_WHITESPACE","        ",163],"}",["T_WHITESPACE","\n\n        ",163],["T_RETURN","return",165],["T_WHITESPACE"," ",165],["T_STRING","null",165],";",["T_WHITESPACE","\n    ",165],"}",["T_WHITESPACE","\n\n    ",166],["T_DOC_COMMENT","\/**\n     * Set the default db adapter\n     *\n     * @var Zend_Db_Adapter_Abstract $adapter Adapter to set as default\n     *\/",168],["T_WHITESPACE","\n    ",172],["T_PROTECTED","protected",173],["T_WHITESPACE"," ",173],["T_FUNCTION","function",173],["T_WHITESPACE"," ",173],["T_STRING","_setDefault",173],"(",["T_STRING","Zend_Db_Adapter_Abstract",173],["T_WHITESPACE"," ",173],["T_VARIABLE","$adapter",173],")",["T_WHITESPACE","\n    ",173],"{",["T_WHITESPACE","\n        ",174],["T_STRING","Zend_Db_Table",175],["T_DOUBLE_COLON","::",175],["T_STRING","setDefaultAdapter",175],"(",["T_VARIABLE","$adapter",175],")",";",["T_WHITESPACE","\n        ",175],["T_VARIABLE","$this",176],["T_OBJECT_OPERATOR","->",176],["T_STRING","_defaultDb",176],["T_WHITESPACE"," ",176],"=",["T_WHITESPACE"," ",176],["T_VARIABLE","$adapter",176],";",["T_WHITESPACE","\n    ",176],"}",["T_WHITESPACE","\n\n   ",177],["T_DOC_COMMENT","\/**\n     * Set the default metadata cache\n     *\n     * @param string|Zend_Cache_Core $cache\n     * @return Zend_Application_Resource_Multidb\n     *\/",179],["T_WHITESPACE","\n    ",184],["T_PROTECTED","protected",185],["T_WHITESPACE"," ",185],["T_FUNCTION","function",185],["T_WHITESPACE"," ",185],["T_STRING","_setDefaultMetadataCache",185],"(",["T_VARIABLE","$cache",185],")",["T_WHITESPACE","\n    ",185],"{",["T_WHITESPACE","\n        ",186],["T_VARIABLE","$metadataCache",187],["T_WHITESPACE"," ",187],"=",["T_WHITESPACE"," ",187],["T_STRING","null",187],";",["T_WHITESPACE","\n\n        ",187],["T_IF","if",189],["T_WHITESPACE"," ",189],"(",["T_STRING","is_string",189],"(",["T_VARIABLE","$cache",189],")",")",["T_WHITESPACE"," ",189],"{",["T_WHITESPACE","\n            ",189],["T_VARIABLE","$bootstrap",190],["T_WHITESPACE"," ",190],"=",["T_WHITESPACE"," ",190],["T_VARIABLE","$this",190],["T_OBJECT_OPERATOR","->",190],["T_STRING","getBootstrap",190],"(",")",";",["T_WHITESPACE","\n            ",190],["T_IF","if",191],["T_WHITESPACE"," ",191],"(",["T_VARIABLE","$bootstrap",191],["T_WHITESPACE"," ",191],["T_INSTANCEOF","instanceof",191],["T_WHITESPACE"," ",191],["T_STRING","Zend_Application_Bootstrap_ResourceBootstrapper",191],["T_WHITESPACE"," ",191],["T_BOOLEAN_AND","&&",191],["T_WHITESPACE","\n                ",191],["T_VARIABLE","$bootstrap",192],["T_OBJECT_OPERATOR","->",192],["T_STRING","hasPluginResource",192],"(",["T_CONSTANT_ENCAPSED_STRING","'CacheManager'",192],")",["T_WHITESPACE","\n            ",192],")",["T_WHITESPACE"," ",193],"{",["T_WHITESPACE","\n                ",193],["T_VARIABLE","$cacheManager",194],["T_WHITESPACE"," ",194],"=",["T_WHITESPACE"," ",194],["T_VARIABLE","$bootstrap",194],["T_OBJECT_OPERATOR","->",194],["T_STRING","bootstrap",194],"(",["T_CONSTANT_ENCAPSED_STRING","'CacheManager'",194],")",["T_WHITESPACE","\n                    ",194],["T_OBJECT_OPERATOR","->",195],["T_STRING","getResource",195],"(",["T_CONSTANT_ENCAPSED_STRING","'CacheManager'",195],")",";",["T_WHITESPACE","\n                ",195],["T_IF","if",196],["T_WHITESPACE"," ",196],"(",["T_STRING","null",196],["T_WHITESPACE"," ",196],["T_IS_NOT_IDENTICAL","!==",196],["T_WHITESPACE"," ",196],["T_VARIABLE","$cacheManager",196],["T_WHITESPACE"," ",196],["T_BOOLEAN_AND","&&",196],["T_WHITESPACE"," ",196],["T_VARIABLE","$cacheManager",196],["T_OBJECT_OPERATOR","->",196],["T_STRING","hasCache",196],"(",["T_VARIABLE","$cache",196],")",")",["T_WHITESPACE"," ",196],"{",["T_WHITESPACE","\n                    ",196],["T_VARIABLE","$metadataCache",197],["T_WHITESPACE"," ",197],"=",["T_WHITESPACE"," ",197],["T_VARIABLE","$cacheManager",197],["T_OBJECT_OPERATOR","->",197],["T_STRING","getCache",197],"(",["T_VARIABLE","$cache",197],")",";",["T_WHITESPACE","\n                ",197],"}",["T_WHITESPACE","\n            ",198],"}",["T_WHITESPACE","\n        ",199],"}",["T_WHITESPACE"," ",200],["T_ELSE","else",200],["T_WHITESPACE"," ",200],["T_IF","if",200],["T_WHITESPACE"," ",200],"(",["T_VARIABLE","$cache",200],["T_WHITESPACE"," ",200],["T_INSTANCEOF","instanceof",200],["T_WHITESPACE"," ",200],["T_STRING","Zend_Cache_Core",200],")",["T_WHITESPACE"," ",200],"{",["T_WHITESPACE","\n            ",200],["T_VARIABLE","$metadataCache",201],["T_WHITESPACE"," ",201],"=",["T_WHITESPACE"," ",201],["T_VARIABLE","$cache",201],";",["T_WHITESPACE","\n        ",201],"}",["T_WHITESPACE","\n\n        ",202],["T_IF","if",204],["T_WHITESPACE"," ",204],"(",["T_VARIABLE","$metadataCache",204],["T_WHITESPACE"," ",204],["T_INSTANCEOF","instanceof",204],["T_WHITESPACE"," ",204],["T_STRING","Zend_Cache_Core",204],")",["T_WHITESPACE"," ",204],"{",["T_WHITESPACE","\n            ",204],["T_STRING","Zend_Db_Table",205],["T_DOUBLE_COLON","::",205],["T_STRING","setDefaultMetadataCache",205],"(",["T_VARIABLE","$metadataCache",205],")",";",["T_WHITESPACE","\n        ",205],"}",["T_WHITESPACE","\n\n        ",206],["T_RETURN","return",208],["T_WHITESPACE"," ",208],["T_VARIABLE","$this",208],";",["T_WHITESPACE","\n    ",208],"}",["T_WHITESPACE","\n",209],"}",["T_WHITESPACE","\n",210]]
[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Zend Framework\n *\n * LICENSE\n *\n * This source file is subject to the new BSD license that is bundled\n * with this package in the file LICENSE.txt.\n * It is also available through the world-wide-web at this URL:\n * http:\/\/framework.zend.com\/license\/new-bsd\n * If you did not receive a copy of the license and are unable to\n * obtain it through the world-wide-web, please send an email\n * to license@zend.com so we can send you a copy immediately.\n *\n * @category   Zend\n * @package    Zend_Amf\n * @copyright  Copyright (c) 2005-2015 Zend Technologies USA Inc. (http:\/\/www.zend.com)\n * @license    http:\/\/framework.zend.com\/license\/new-bsd     New BSD License\n * @version    $Id$\n *\/",2],["T_WHITESPACE","\n\n",20],["T_DOC_COMMENT","\/** @see Zend_Amf_Constants *\/",22],["T_WHITESPACE","\n",22],["T_COMMENT","#require_once 'Zend\/Amf\/Constants.php';\n",23],["T_WHITESPACE","\n",24],["T_DOC_COMMENT","\/** @see Zend_Amf_Parse_OutputStream *\/",25],["T_WHITESPACE","\n",25],["T_COMMENT","#require_once 'Zend\/Amf\/Parse\/OutputStream.php';\n",26],["T_WHITESPACE","\n",27],["T_DOC_COMMENT","\/** @see Zend_Amf_Parse_Amf0_Serializer *\/",28],["T_WHITESPACE","\n",28],["T_COMMENT","#require_once 'Zend\/Amf\/Parse\/Amf0\/Serializer.php';\n",29],["T_WHITESPACE","\n",30],["T_DOC_COMMENT","\/**\n * Handles converting the PHP object ready for response back into AMF\n *\n * @package    Zend_Amf\n * @copyright  Copyright (c) 2005-2015 Zend Technologies USA Inc. (http:\/\/www.zend.com)\n * @license    http:\/\/framework.zend.com\/license\/new-bsd     New BSD License\n *\/",31],["T_WHITESPACE","\n",37],["T_CLASS","class",38],["T_WHITESPACE"," ",38],["T_STRING","Zend_Amf_Response",38],["T_WHITESPACE","\n",38],"{",["T_WHITESPACE","\n    ",39],["T_DOC_COMMENT","\/**\n     * @var int Object encoding for response\n     *\/",40],["T_WHITESPACE","\n    ",42],["T_PROTECTED","protected",43],["T_WHITESPACE"," ",43],["T_VARIABLE","$_objectEncoding",43],["T_WHITESPACE"," ",43],"=",["T_WHITESPACE"," ",43],["T_LNUMBER","0",43],";",["T_WHITESPACE","\n\n    ",43],["T_DOC_COMMENT","\/**\n     * Array of Zend_Amf_Value_MessageBody objects\n     * @var array\n     *\/",45],["T_WHITESPACE","\n    ",48],["T_PROTECTED","protected",49],["T_WHITESPACE"," ",49],["T_VARIABLE","$_bodies",49],["T_WHITESPACE"," ",49],"=",["T_WHITESPACE"," ",49],["T_ARRAY","array",49],"(",")",";",["T_WHITESPACE","\n\n    ",49],["T_DOC_COMMENT","\/**\n     * Array of Zend_Amf_Value_MessageHeader objects\n     * @var array\n     *\/",51],["T_WHITESPACE","\n    ",54],["T_PROTECTED","protected",55],["T_WHITESPACE"," ",55],["T_VARIABLE","$_headers",55],["T_WHITESPACE"," ",55],"=",["T_WHITESPACE"," ",55],["T_ARRAY","array",55],"(",")",";",["T_WHITESPACE","\n\n    ",55],["T_DOC_COMMENT","\/**\n     * @var Zend_Amf_Parse_OutputStream\n     *\/",57],["T_WHITESPACE","\n    ",59],["T_PROTECTED","protected",60],["T_WHITESPACE"," ",60],["T_VARIABLE","$_outputStream",60],";",["T_WHITESPACE","\n\n    ",60],["T_DOC_COMMENT","\/**\n     * Instantiate new output stream and start serialization\n     *\n     * @return Zend_Amf_Response\n     *\/",62],["T_WHITESPACE","\n    ",66],["T_PUBLIC","public",67],["T_WHITESPACE"," ",67],["T_FUNCTION","function",67],["T_WHITESPACE"," ",67],["T_STRING","finalize",67],"(",")",["T_WHITESPACE","\n    ",67],"{",["T_WHITESPACE","\n        ",68],["T_VARIABLE","$this",69],["T_OBJECT_OPERATOR","->",69],["T_STRING","_outputStream",69],["T_WHITESPACE"," ",69],"=",["T_WHITESPACE"," ",69],["T_NEW","new",69],["T_WHITESPACE"," ",69],["T_STRING","Zend_Amf_Parse_OutputStream",69],"(",")",";",["T_WHITESPACE","\n        ",69],["T_VARIABLE","$this",70],["T_OBJECT_OPERATOR","->",70],["T_STRING","writeMessage",70],"(",["T_VARIABLE","$this",70],["T_OBJECT_OPERATOR","->",70],["T_STRING","_outputStream",70],")",";",["T_WHITESPACE","\n        ",70],["T_RETURN","return",71],["T_WHITESPACE"," ",71],["T_VARIABLE","$this",71],";",["T_WHITESPACE","\n    ",71],"}",["T_WHITESPACE","\n\n    ",72],["T_DOC_COMMENT","\/**\n     * Serialize the PHP data types back into Actionscript and\n     * create and AMF stream.\n     *\n     * @param  Zend_Amf_Parse_OutputStream $stream\n     * @return Zend_Amf_Response\n     *\/",74],["T_WHITESPACE","\n    ",80],["T_PUBLIC","public",81],["T_WHITESPACE"," ",81],["T_FUNCTION","function",81],["T_WHITESPACE"," ",81],["T_STRING","writeMessage",81],"(",["T_STRING","Zend_Amf_Parse_OutputStream",81],["T_WHITESPACE"," ",81],["T_VARIABLE","$stream",81],")",["T_WHITESPACE","\n    ",81],"{",["T_WHITESPACE","\n        ",82],["T_VARIABLE","$objectEncoding",83],["T_WHITESPACE"," ",83],"=",["T_WHITESPACE"," ",83],["T_VARIABLE","$this",83],["T_OBJECT_OPERATOR","->",83],["T_STRING","_objectEncoding",83],";",["T_WHITESPACE","\n\n        ",83],["T_COMMENT","\/\/Write encoding to start of stream. Preamble byte is written of two byte Unsigned Short\n",85],["T_WHITESPACE","        ",86],["T_VARIABLE","$stream",86],["T_OBJECT_OPERATOR","->",86],["T_STRING","writeByte",86],"(",["T_LNUMBER","0x00",86],")",";",["T_WHITESPACE","\n        ",86],["T_VARIABLE","$stream",87],["T_OBJECT_OPERATOR","->",87],["T_STRING","writeByte",87],"(",["T_VARIABLE","$objectEncoding",87],")",";",["T_WHITESPACE","\n\n        ",87],["T_COMMENT","\/\/ Loop through the AMF Headers that need to be returned.\n",89],["T_WHITESPACE","        ",90],["T_VARIABLE","$headerCount",90],["T_WHITESPACE"," ",90],"=",["T_WHITESPACE"," ",90],["T_STRING","count",90],"(",["T_VARIABLE","$this",90],["T_OBJECT_OPERATOR","->",90],["T_STRING","_headers",90],")",";",["T_WHITESPACE","\n        ",90],["T_VARIABLE","$stream",91],["T_OBJECT_OPERATOR","->",91],["T_STRING","writeInt",91],"(",["T_VARIABLE","$headerCount",91],")",";",["T_WHITESPACE","\n        ",91],["T_FOREACH","foreach",92],["T_WHITESPACE"," ",92],"(",["T_VARIABLE","$this",92],["T_OBJECT_OPERATOR","->",92],["T_STRING","getAmfHeaders",92],"(",")",["T_WHITESPACE"," ",92],["T_AS","as",92],["T_WHITESPACE"," ",92],["T_VARIABLE","$header",92],")",["T_WHITESPACE"," ",92],"{",["T_WHITESPACE","\n            ",92],["T_VARIABLE","$serializer",93],["T_WHITESPACE"," ",93],"=",["T_WHITESPACE"," ",93],["T_NEW","new",93],["T_WHITESPACE"," ",93],["T_STRING","Zend_Amf_Parse_Amf0_Serializer",93],"(",["T_VARIABLE","$stream",93],")",";",["T_WHITESPACE","\n            ",93],["T_VARIABLE","$stream",94],["T_OBJECT_OPERATOR","->",94],["T_STRING","writeUTF",94],"(",["T_VARIABLE","$header",94],["T_OBJECT_OPERATOR","->",94],["T_STRING","name",94],")",";",["T_WHITESPACE","\n            ",94],["T_VARIABLE","$stream",95],["T_OBJECT_OPERATOR","->",95],["T_STRING","writeByte",95],"(",["T_VARIABLE","$header",95],["T_OBJECT_OPERATOR","->",95],["T_STRING","mustRead",95],")",";",["T_WHITESPACE","\n            ",95],["T_VARIABLE","$stream",96],["T_OBJECT_OPERATOR","->",96],["T_STRING","writeLong",96],"(",["T_STRING","Zend_Amf_Constants",96],["T_DOUBLE_COLON","::",96],["T_STRING","UNKNOWN_CONTENT_LENGTH",96],")",";",["T_WHITESPACE","\n            ",96],["T_IF","if",97],["T_WHITESPACE"," ",97],"(",["T_STRING","is_object",97],"(",["T_VARIABLE","$header",97],["T_OBJECT_OPERATOR","->",97],["T_STRING","data",97],")",")",["T_WHITESPACE"," ",97],"{",["T_WHITESPACE","\n                ",97],["T_COMMENT","\/\/ Workaround for PHP5 with E_STRICT enabled complaining about\n",98],["T_WHITESPACE","                ",99],["T_COMMENT","\/\/ \"Only variables should be passed by reference\"\n",99],["T_WHITESPACE","                ",100],["T_VARIABLE","$placeholder",100],["T_WHITESPACE"," ",100],"=",["T_WHITESPACE"," ",100],["T_STRING","null",100],";",["T_WHITESPACE","\n                ",100],["T_VARIABLE","$serializer",101],["T_OBJECT_OPERATOR","->",101],["T_STRING","writeTypeMarker",101],"(",["T_VARIABLE","$placeholder",101],",",["T_WHITESPACE"," ",101],["T_STRING","null",101],",",["T_WHITESPACE"," ",101],["T_VARIABLE","$header",101],["T_OBJECT_OPERATOR","->",101],["T_STRING","data",101],")",";",["T_WHITESPACE","\n            ",101],"}",["T_WHITESPACE"," ",102],["T_ELSE","else",102],["T_WHITESPACE"," ",102],"{",["T_WHITESPACE","\n                ",102],["T_VARIABLE","$serializer",103],["T_OBJECT_OPERATOR","->",103],["T_STRING","writeTypeMarker",103],"(",["T_VARIABLE","$header",103],["T_OBJECT_OPERATOR","->",103],["T_STRING","data",103],")",";",["T_WHITESPACE","\n            ",103],"}",["T_WHITESPACE","\n        ",104],"}",["T_WHITESPACE","\n\n        ",105],["T_COMMENT","\/\/ loop through the AMF bodies that need to be returned.\n",107],["T_WHITESPACE","        ",108],["T_VARIABLE","$bodyCount",108],["T_WHITESPACE"," ",108],"=",["T_WHITESPACE"," ",108],["T_STRING","count",108],"(",["T_VARIABLE","$this",108],["T_OBJECT_OPERATOR","->",108],["T_STRING","_bodies",108],")",";",["T_WHITESPACE","\n        ",108],["T_VARIABLE","$stream",109],["T_OBJECT_OPERATOR","->",109],["T_STRING","writeInt",109],"(",["T_VARIABLE","$bodyCount",109],")",";",["T_WHITESPACE","\n        ",109],["T_FOREACH","foreach",110],["T_WHITESPACE"," ",110],"(",["T_VARIABLE","$this",110],["T_OBJECT_OPERATOR","->",110],["T_STRING","_bodies",110],["T_WHITESPACE"," ",110],["T_AS","as",110],["T_WHITESPACE"," ",110],["T_VARIABLE","$body",110],")",["T_WHITESPACE"," ",110],"{",["T_WHITESPACE","\n            ",110],["T_VARIABLE","$serializer",111],["T_WHITESPACE"," ",111],"=",["T_WHITESPACE"," ",111],["T_NEW","new",111],["T_WHITESPACE"," ",111],["T_STRING","Zend_Amf_Parse_Amf0_Serializer",111],"(",["T_VARIABLE","$stream",111],")",";",["T_WHITESPACE","\n            ",111],["T_VARIABLE","$stream",112],["T_OBJECT_OPERATOR","->",112],["T_STRING","writeUTF",112],"(",["T_VARIABLE","$body",112],["T_OBJECT_OPERATOR","->",112],["T_STRING","getTargetURI",112],"(",")",")",";",["T_WHITESPACE","\n            ",112],["T_VARIABLE","$stream",113],["T_OBJECT_OPERATOR","->",113],["T_STRING","writeUTF",113],"(",["T_VARIABLE","$body",113],["T_OBJECT_OPERATOR","->",113],["T_STRING","getResponseURI",113],"(",")",")",";",["T_WHITESPACE","\n            ",113],["T_VARIABLE","$stream",114],["T_OBJECT_OPERATOR","->",114],["T_STRING","writeLong",114],"(",["T_STRING","Zend_Amf_Constants",114],["T_DOUBLE_COLON","::",114],["T_STRING","UNKNOWN_CONTENT_LENGTH",114],")",";",["T_WHITESPACE","\n            ",114],["T_VARIABLE","$bodyData",115],["T_WHITESPACE"," ",115],"=",["T_WHITESPACE"," ",115],["T_VARIABLE","$body",115],["T_OBJECT_OPERATOR","->",115],["T_STRING","getData",115],"(",")",";",["T_WHITESPACE","\n            ",115],["T_VARIABLE","$markerType",116],["T_WHITESPACE"," ",116],"=",["T_WHITESPACE"," ",116],"(",["T_VARIABLE","$this",116],["T_OBJECT_OPERATOR","->",116],["T_STRING","_objectEncoding",116],["T_WHITESPACE"," ",116],["T_IS_EQUAL","==",116],["T_WHITESPACE"," ",116],["T_STRING","Zend_Amf_Constants",116],["T_DOUBLE_COLON","::",116],["T_STRING","AMF0_OBJECT_ENCODING",116],")",["T_WHITESPACE"," ",116],"?",["T_WHITESPACE"," ",116],["T_STRING","null",116],["T_WHITESPACE"," ",116],":",["T_WHITESPACE"," ",116],["T_STRING","Zend_Amf_Constants",116],["T_DOUBLE_COLON","::",116],["T_STRING","AMF0_AMF3",116],";",["T_WHITESPACE","\n            ",116],["T_IF","if",117],["T_WHITESPACE"," ",117],"(",["T_STRING","is_object",117],"(",["T_VARIABLE","$bodyData",117],")",")",["T_WHITESPACE"," ",117],"{",["T_WHITESPACE","\n                ",117],["T_COMMENT","\/\/ Workaround for PHP5 with E_STRICT enabled complaining about\n",118],["T_WHITESPACE","                ",119],["T_COMMENT","\/\/ \"Only variables should be passed by reference\"\n",119],["T_WHITESPACE","                ",120],["T_VARIABLE","$placeholder",120],["T_WHITESPACE"," ",120],"=",["T_WHITESPACE"," ",120],["T_STRING","null",120],";",["T_WHITESPACE","\n                ",120],["T_VARIABLE","$serializer",121],["T_OBJECT_OPERATOR","->",121],["T_STRING","writeTypeMarker",121],"(",["T_VARIABLE","$placeholder",121],",",["T_WHITESPACE"," ",121],["T_VARIABLE","$markerType",121],",",["T_WHITESPACE"," ",121],["T_VARIABLE","$bodyData",121],")",";",["T_WHITESPACE","\n            ",121],"}",["T_WHITESPACE"," ",122],["T_ELSE","else",122],["T_WHITESPACE"," ",122],"{",["T_WHITESPACE","\n                ",122],["T_VARIABLE","$serializer",123],["T_OBJECT_OPERATOR","->",123],["T_STRING","writeTypeMarker",123],"(",["T_VARIABLE","$bodyData",123],",",["T_WHITESPACE"," ",123],["T_VARIABLE","$markerType",123],")",";",["T_WHITESPACE","\n            ",123],"}",["T_WHITESPACE","\n        ",124],"}",["T_WHITESPACE","\n\n        ",125],["T_RETURN","return",127],["T_WHITESPACE"," ",127],["T_VARIABLE","$this",127],";",["T_WHITESPACE","\n    ",127],"}",["T_WHITESPACE","\n\n    ",128],["T_DOC_COMMENT","\/**\n     * Return the output stream content\n     *\n     * @return string The contents of the output stream\n     *\/",130],["T_WHITESPACE","\n    ",134],["T_PUBLIC","public",135],["T_WHITESPACE"," ",135],["T_FUNCTION","function",135],["T_WHITESPACE"," ",135],["T_STRING","getResponse",135],"(",")",["T_WHITESPACE","\n    ",135],"{",["T_WHITESPACE","\n        ",136],["T_RETURN","return",137],["T_WHITESPACE"," ",137],["T_VARIABLE","$this",137],["T_OBJECT_OPERATOR","->",137],["T_STRING","_outputStream",137],["T_OBJECT_OPERATOR","->",137],["T_STRING","getStream",137],"(",")",";",["T_WHITESPACE","\n    ",137],"}",["T_WHITESPACE","\n\n    ",138],["T_DOC_COMMENT","\/**\n     * Return the output stream content\n     *\n     * @return string\n     *\/",140],["T_WHITESPACE","\n    ",144],["T_PUBLIC","public",145],["T_WHITESPACE"," ",145],["T_FUNCTION","function",145],["T_WHITESPACE"," ",145],["T_STRING","__toString",145],"(",")",["T_WHITESPACE","\n    ",145],"{",["T_WHITESPACE","\n        ",146],["T_RETURN","return",147],["T_WHITESPACE"," ",147],["T_VARIABLE","$this",147],["T_OBJECT_OPERATOR","->",147],["T_STRING","getResponse",147],"(",")",";",["T_WHITESPACE","\n    ",147],"}",["T_WHITESPACE","\n\n    ",148],["T_DOC_COMMENT","\/**\n     * Add an AMF body to be sent to the Flash Player\n     *\n     * @param  Zend_Amf_Value_MessageBody $body\n     * @return Zend_Amf_Response\n     *\/",150],["T_WHITESPACE","\n    ",155],["T_PUBLIC","public",156],["T_WHITESPACE"," ",156],["T_FUNCTION","function",156],["T_WHITESPACE"," ",156],["T_STRING","addAmfBody",156],"(",["T_STRING","Zend_Amf_Value_MessageBody",156],["T_WHITESPACE"," ",156],["T_VARIABLE","$body",156],")",["T_WHITESPACE","\n    ",156],"{",["T_WHITESPACE","\n        ",157],["T_VARIABLE","$this",158],["T_OBJECT_OPERATOR","->",158],["T_STRING","_bodies",158],"[","]",["T_WHITESPACE"," ",158],"=",["T_WHITESPACE"," ",158],["T_VARIABLE","$body",158],";",["T_WHITESPACE","\n        ",158],["T_RETURN","return",159],["T_WHITESPACE"," ",159],["T_VARIABLE","$this",159],";",["T_WHITESPACE","\n    ",159],"}",["T_WHITESPACE","\n\n    ",160],["T_DOC_COMMENT","\/**\n     * Return an array of AMF bodies to be serialized\n     *\n     * @return array\n     *\/",162],["T_WHITESPACE","\n    ",166],["T_PUBLIC","public",167],["T_WHITESPACE"," ",167],["T_FUNCTION","function",167],["T_WHITESPACE"," ",167],["T_STRING","getAmfBodies",167],"(",")",["T_WHITESPACE","\n    ",167],"{",["T_WHITESPACE","\n        ",168],["T_RETURN","return",169],["T_WHITESPACE"," ",169],["T_VARIABLE","$this",169],["T_OBJECT_OPERATOR","->",169],["T_STRING","_bodies",169],";",["T_WHITESPACE","\n    ",169],"}",["T_WHITESPACE","\n\n    ",170],["T_DOC_COMMENT","\/**\n     * Add an AMF Header to be sent back to the flash player\n     *\n     * @param  Zend_Amf_Value_MessageHeader $header\n     * @return Zend_Amf_Response\n     *\/",172],["T_WHITESPACE","\n    ",177],["T_PUBLIC","public",178],["T_WHITESPACE"," ",178],["T_FUNCTION","function",178],["T_WHITESPACE"," ",178],["T_STRING","addAmfHeader",178],"(",["T_STRING","Zend_Amf_Value_MessageHeader",178],["T_WHITESPACE"," ",178],["T_VARIABLE","$header",178],")",["T_WHITESPACE","\n    ",178],"{",["T_WHITESPACE","\n        ",179],["T_VARIABLE","$this",180],["T_OBJECT_OPERATOR","->",180],["T_STRING","_headers",180],"[","]",["T_WHITESPACE"," ",180],"=",["T_WHITESPACE"," ",180],["T_VARIABLE","$header",180],";",["T_WHITESPACE","\n        ",180],["T_RETURN","return",181],["T_WHITESPACE"," ",181],["T_VARIABLE","$this",181],";",["T_WHITESPACE","\n    ",181],"}",["T_WHITESPACE","\n\n    ",182],["T_DOC_COMMENT","\/**\n     * Retrieve attached AMF message headers\n     *\n     * @return array Array of Zend_Amf_Value_MessageHeader objects\n     *\/",184],["T_WHITESPACE","\n    ",188],["T_PUBLIC","public",189],["T_WHITESPACE"," ",189],["T_FUNCTION","function",189],["T_WHITESPACE"," ",189],["T_STRING","getAmfHeaders",189],"(",")",["T_WHITESPACE","\n    ",189],"{",["T_WHITESPACE","\n        ",190],["T_RETURN","return",191],["T_WHITESPACE"," ",191],["T_VARIABLE","$this",191],["T_OBJECT_OPERATOR","->",191],["T_STRING","_headers",191],";",["T_WHITESPACE","\n    ",191],"}",["T_WHITESPACE","\n\n    ",192],["T_DOC_COMMENT","\/**\n     * Set the AMF encoding that will be used for serialization\n     *\n     * @param  int $encoding\n     * @return Zend_Amf_Response\n     *\/",194],["T_WHITESPACE","\n    ",199],["T_PUBLIC","public",200],["T_WHITESPACE"," ",200],["T_FUNCTION","function",200],["T_WHITESPACE"," ",200],["T_STRING","setObjectEncoding",200],"(",["T_VARIABLE","$encoding",200],")",["T_WHITESPACE","\n    ",200],"{",["T_WHITESPACE","\n        ",201],["T_VARIABLE","$this",202],["T_OBJECT_OPERATOR","->",202],["T_STRING","_objectEncoding",202],["T_WHITESPACE"," ",202],"=",["T_WHITESPACE"," ",202],["T_VARIABLE","$encoding",202],";",["T_WHITESPACE","\n        ",202],["T_RETURN","return",203],["T_WHITESPACE"," ",203],["T_VARIABLE","$this",203],";",["T_WHITESPACE","\n    ",203],"}",["T_WHITESPACE","\n",204],"}",["T_WHITESPACE","\n",205]]
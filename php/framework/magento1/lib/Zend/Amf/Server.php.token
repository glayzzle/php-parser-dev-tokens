[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Zend Framework\n *\n * LICENSE\n *\n * This source file is subject to the new BSD license that is bundled\n * with this package in the file LICENSE.txt.\n * It is also available through the world-wide-web at this URL:\n * http:\/\/framework.zend.com\/license\/new-bsd\n * If you did not receive a copy of the license and are unable to\n * obtain it through the world-wide-web, please send an email\n * to license@zend.com so we can send you a copy immediately.\n *\n * @category   Zend\n * @package    Zend_Amf\n * @copyright  Copyright (c) 2005-2015 Zend Technologies USA Inc. (http:\/\/www.zend.com)\n * @license    http:\/\/framework.zend.com\/license\/new-bsd     New BSD License\n * @version    $Id$\n *\/",2],["T_WHITESPACE","\n\n",20],["T_DOC_COMMENT","\/** @see Zend_Server_Interface *\/",22],["T_WHITESPACE","\n",22],["T_COMMENT","#require_once 'Zend\/Server\/Interface.php';\n",23],["T_WHITESPACE","\n",24],["T_DOC_COMMENT","\/** @see Zend_Server_Reflection *\/",25],["T_WHITESPACE","\n",25],["T_COMMENT","#require_once 'Zend\/Server\/Reflection.php';\n",26],["T_WHITESPACE","\n",27],["T_DOC_COMMENT","\/** @see Zend_Amf_Constants *\/",28],["T_WHITESPACE","\n",28],["T_COMMENT","#require_once 'Zend\/Amf\/Constants.php';\n",29],["T_WHITESPACE","\n",30],["T_DOC_COMMENT","\/** @see Zend_Amf_Value_MessageBody *\/",31],["T_WHITESPACE","\n",31],["T_COMMENT","#require_once 'Zend\/Amf\/Value\/MessageBody.php';\n",32],["T_WHITESPACE","\n",33],["T_DOC_COMMENT","\/** @see Zend_Amf_Value_MessageHeader *\/",34],["T_WHITESPACE","\n",34],["T_COMMENT","#require_once 'Zend\/Amf\/Value\/MessageHeader.php';\n",35],["T_WHITESPACE","\n",36],["T_DOC_COMMENT","\/** @see Zend_Amf_Value_Messaging_CommandMessage *\/",37],["T_WHITESPACE","\n",37],["T_COMMENT","#require_once 'Zend\/Amf\/Value\/Messaging\/CommandMessage.php';\n",38],["T_WHITESPACE","\n",39],["T_DOC_COMMENT","\/** @see Zend_Loader_PluginLoader *\/",40],["T_WHITESPACE","\n",40],["T_COMMENT","#require_once 'Zend\/Loader\/PluginLoader.php';\n",41],["T_WHITESPACE","\n",42],["T_DOC_COMMENT","\/** @see Zend_Amf_Parse_TypeLoader *\/",43],["T_WHITESPACE","\n",43],["T_COMMENT","#require_once 'Zend\/Amf\/Parse\/TypeLoader.php';\n",44],["T_WHITESPACE","\n",45],["T_DOC_COMMENT","\/** @see Zend_Auth *\/",46],["T_WHITESPACE","\n",46],["T_COMMENT","#require_once 'Zend\/Auth.php';\n",47],["T_DOC_COMMENT","\/**\n * An AMF gateway server implementation to allow the connection of the Adobe Flash Player to\n * Zend Framework\n *\n * @todo       Make the reflection methods cache and autoload.\n * @package    Zend_Amf\n * @subpackage Server\n * @copyright  Copyright (c) 2005-2015 Zend Technologies USA Inc. (http:\/\/www.zend.com)\n * @license    http:\/\/framework.zend.com\/license\/new-bsd     New BSD License\n *\/",48],["T_WHITESPACE","\n",57],["T_CLASS","class",58],["T_WHITESPACE"," ",58],["T_STRING","Zend_Amf_Server",58],["T_WHITESPACE"," ",58],["T_IMPLEMENTS","implements",58],["T_WHITESPACE"," ",58],["T_STRING","Zend_Server_Interface",58],["T_WHITESPACE","\n",58],"{",["T_WHITESPACE","\n    ",59],["T_DOC_COMMENT","\/**\n     * Array of dispatchables\n     * @var array\n     *\/",60],["T_WHITESPACE","\n    ",63],["T_PROTECTED","protected",64],["T_WHITESPACE"," ",64],["T_VARIABLE","$_methods",64],["T_WHITESPACE"," ",64],"=",["T_WHITESPACE"," ",64],["T_ARRAY","array",64],"(",")",";",["T_WHITESPACE","\n\n    ",64],["T_DOC_COMMENT","\/**\n     * Array of classes that can be called without being explicitly loaded\n     *\n     * Keys are class names.\n     *\n     * @var array\n     *\/",66],["T_WHITESPACE","\n    ",72],["T_PROTECTED","protected",73],["T_WHITESPACE"," ",73],["T_VARIABLE","$_classAllowed",73],["T_WHITESPACE"," ",73],"=",["T_WHITESPACE"," ",73],["T_ARRAY","array",73],"(",")",";",["T_WHITESPACE","\n\n    ",73],["T_DOC_COMMENT","\/**\n     * Loader for classes in added directories\n     * @var Zend_Loader_PluginLoader\n     *\/",75],["T_WHITESPACE","\n    ",78],["T_PROTECTED","protected",79],["T_WHITESPACE"," ",79],["T_VARIABLE","$_loader",79],";",["T_WHITESPACE","\n\n    ",79],["T_DOC_COMMENT","\/**\n     * @var bool Production flag; whether or not to return exception messages\n     *\/",81],["T_WHITESPACE","\n    ",83],["T_PROTECTED","protected",84],["T_WHITESPACE"," ",84],["T_VARIABLE","$_production",84],["T_WHITESPACE"," ",84],"=",["T_WHITESPACE"," ",84],["T_STRING","true",84],";",["T_WHITESPACE","\n\n    ",84],["T_DOC_COMMENT","\/**\n     * Request processed\n     * @var null|Zend_Amf_Request\n     *\/",86],["T_WHITESPACE","\n    ",89],["T_PROTECTED","protected",90],["T_WHITESPACE"," ",90],["T_VARIABLE","$_request",90],["T_WHITESPACE"," ",90],"=",["T_WHITESPACE"," ",90],["T_STRING","null",90],";",["T_WHITESPACE","\n\n    ",90],["T_DOC_COMMENT","\/**\n     * Class to use for responses\n     * @var null|Zend_Amf_Response\n     *\/",92],["T_WHITESPACE","\n    ",95],["T_PROTECTED","protected",96],["T_WHITESPACE"," ",96],["T_VARIABLE","$_response",96],";",["T_WHITESPACE","\n\n    ",96],["T_DOC_COMMENT","\/**\n     * Dispatch table of name => method pairs\n     * @var array\n     *\/",98],["T_WHITESPACE","\n    ",101],["T_PROTECTED","protected",102],["T_WHITESPACE"," ",102],["T_VARIABLE","$_table",102],["T_WHITESPACE"," ",102],"=",["T_WHITESPACE"," ",102],["T_ARRAY","array",102],"(",")",";",["T_WHITESPACE","\n\n    ",102],["T_DOC_COMMENT","\/**\n     *\n     * @var bool session flag; whether or not to add a session to each response.\n     *\/",104],["T_WHITESPACE","\n    ",107],["T_PROTECTED","protected",108],["T_WHITESPACE"," ",108],["T_VARIABLE","$_session",108],["T_WHITESPACE"," ",108],"=",["T_WHITESPACE"," ",108],["T_STRING","false",108],";",["T_WHITESPACE","\n\n    ",108],["T_DOC_COMMENT","\/**\n     * Namespace allows all AMF calls to not clobber other PHP session variables\n     * @var Zend_Session_NameSpace default session namespace zend_amf\n     *\/",110],["T_WHITESPACE","\n    ",113],["T_PROTECTED","protected",114],["T_WHITESPACE"," ",114],["T_VARIABLE","$_sesionNamespace",114],["T_WHITESPACE"," ",114],"=",["T_WHITESPACE"," ",114],["T_CONSTANT_ENCAPSED_STRING","'zend_amf'",114],";",["T_WHITESPACE","\n\n    ",114],["T_DOC_COMMENT","\/**\n     * Set the default session.name if php_\n     * @var string\n     *\/",116],["T_WHITESPACE","\n    ",119],["T_PROTECTED","protected",120],["T_WHITESPACE"," ",120],["T_VARIABLE","$_sessionName",120],["T_WHITESPACE"," ",120],"=",["T_WHITESPACE"," ",120],["T_CONSTANT_ENCAPSED_STRING","'PHPSESSID'",120],";",["T_WHITESPACE","\n\n    ",120],["T_DOC_COMMENT","\/**\n     * Authentication handler object\n     *\n     * @var Zend_Amf_Auth_Abstract\n     *\/",122],["T_WHITESPACE","\n    ",126],["T_PROTECTED","protected",127],["T_WHITESPACE"," ",127],["T_VARIABLE","$_auth",127],";",["T_WHITESPACE","\n    ",127],["T_DOC_COMMENT","\/**\n     * ACL handler object\n     *\n     * @var Zend_Acl\n     *\/",128],["T_WHITESPACE","\n    ",132],["T_PROTECTED","protected",133],["T_WHITESPACE"," ",133],["T_VARIABLE","$_acl",133],";",["T_WHITESPACE","\n    ",133],["T_DOC_COMMENT","\/**\n     * The server constructor\n     *\/",134],["T_WHITESPACE","\n    ",136],["T_PUBLIC","public",137],["T_WHITESPACE"," ",137],["T_FUNCTION","function",137],["T_WHITESPACE"," ",137],["T_STRING","__construct",137],"(",")",["T_WHITESPACE","\n    ",137],"{",["T_WHITESPACE","\n        ",138],["T_STRING","Zend_Amf_Parse_TypeLoader",139],["T_DOUBLE_COLON","::",139],["T_STRING","setResourceLoader",139],"(",["T_NEW","new",139],["T_WHITESPACE"," ",139],["T_STRING","Zend_Loader_PluginLoader",139],"(",["T_ARRAY","array",139],"(",["T_CONSTANT_ENCAPSED_STRING","\"Zend_Amf_Parse_Resource\"",139],["T_WHITESPACE"," ",139],["T_DOUBLE_ARROW","=>",139],["T_WHITESPACE"," ",139],["T_CONSTANT_ENCAPSED_STRING","\"Zend\/Amf\/Parse\/Resource\"",139],")",")",")",";",["T_WHITESPACE","\n    ",139],"}",["T_WHITESPACE","\n\n    ",140],["T_DOC_COMMENT","\/**\n     * Set authentication adapter\n     *\n     * If the authentication adapter implements a \"getAcl()\" method, populate \n     * the ACL of this instance with it (if none exists already).\n     *\n     * @param  Zend_Amf_Auth_Abstract $auth\n     * @return Zend_Amf_Server\n     *\/",142],["T_WHITESPACE","\n    ",150],["T_PUBLIC","public",151],["T_WHITESPACE"," ",151],["T_FUNCTION","function",151],["T_WHITESPACE"," ",151],["T_STRING","setAuth",151],"(",["T_STRING","Zend_Amf_Auth_Abstract",151],["T_WHITESPACE"," ",151],["T_VARIABLE","$auth",151],")",["T_WHITESPACE","\n    ",151],"{",["T_WHITESPACE","\n        ",152],["T_VARIABLE","$this",153],["T_OBJECT_OPERATOR","->",153],["T_STRING","_auth",153],["T_WHITESPACE"," ",153],"=",["T_WHITESPACE"," ",153],["T_VARIABLE","$auth",153],";",["T_WHITESPACE","\n        ",153],["T_IF","if",154],["T_WHITESPACE"," ",154],"(","(",["T_STRING","null",154],["T_WHITESPACE"," ",154],["T_IS_IDENTICAL","===",154],["T_WHITESPACE"," ",154],["T_VARIABLE","$this",154],["T_OBJECT_OPERATOR","->",154],["T_STRING","getAcl",154],"(",")",")",["T_WHITESPACE"," ",154],["T_BOOLEAN_AND","&&",154],["T_WHITESPACE"," ",154],["T_STRING","method_exists",154],"(",["T_VARIABLE","$auth",154],",",["T_WHITESPACE"," ",154],["T_CONSTANT_ENCAPSED_STRING","'getAcl'",154],")",")",["T_WHITESPACE"," ",154],"{",["T_WHITESPACE","\n            ",154],["T_VARIABLE","$this",155],["T_OBJECT_OPERATOR","->",155],["T_STRING","setAcl",155],"(",["T_VARIABLE","$auth",155],["T_OBJECT_OPERATOR","->",155],["T_STRING","getAcl",155],"(",")",")",";",["T_WHITESPACE","\n        ",155],"}",["T_WHITESPACE","\n        ",156],["T_RETURN","return",157],["T_WHITESPACE"," ",157],["T_VARIABLE","$this",157],";",["T_WHITESPACE","\n    ",157],"}",["T_WHITESPACE","\n   ",158],["T_DOC_COMMENT","\/**\n     * Get authentication adapter\n     *\n     * @return Zend_Amf_Auth_Abstract\n     *\/",159],["T_WHITESPACE","\n    ",163],["T_PUBLIC","public",164],["T_WHITESPACE"," ",164],["T_FUNCTION","function",164],["T_WHITESPACE"," ",164],["T_STRING","getAuth",164],"(",")",["T_WHITESPACE","\n    ",164],"{",["T_WHITESPACE","\n        ",165],["T_RETURN","return",166],["T_WHITESPACE"," ",166],["T_VARIABLE","$this",166],["T_OBJECT_OPERATOR","->",166],["T_STRING","_auth",166],";",["T_WHITESPACE","\n    ",166],"}",["T_WHITESPACE","\n\n    ",167],["T_DOC_COMMENT","\/**\n     * Set ACL adapter\n     *\n     * @param  Zend_Acl $acl\n     * @return Zend_Amf_Server\n     *\/",169],["T_WHITESPACE","\n    ",174],["T_PUBLIC","public",175],["T_WHITESPACE"," ",175],["T_FUNCTION","function",175],["T_WHITESPACE"," ",175],["T_STRING","setAcl",175],"(",["T_STRING","Zend_Acl",175],["T_WHITESPACE"," ",175],["T_VARIABLE","$acl",175],")",["T_WHITESPACE","\n    ",175],"{",["T_WHITESPACE","\n        ",176],["T_VARIABLE","$this",177],["T_OBJECT_OPERATOR","->",177],["T_STRING","_acl",177],["T_WHITESPACE"," ",177],"=",["T_WHITESPACE"," ",177],["T_VARIABLE","$acl",177],";",["T_WHITESPACE","\n        ",177],["T_RETURN","return",178],["T_WHITESPACE"," ",178],["T_VARIABLE","$this",178],";",["T_WHITESPACE","\n    ",178],"}",["T_WHITESPACE","\n   ",179],["T_DOC_COMMENT","\/**\n     * Get ACL adapter\n     *\n     * @return Zend_Acl\n     *\/",180],["T_WHITESPACE","\n    ",184],["T_PUBLIC","public",185],["T_WHITESPACE"," ",185],["T_FUNCTION","function",185],["T_WHITESPACE"," ",185],["T_STRING","getAcl",185],"(",")",["T_WHITESPACE","\n    ",185],"{",["T_WHITESPACE","\n        ",186],["T_RETURN","return",187],["T_WHITESPACE"," ",187],["T_VARIABLE","$this",187],["T_OBJECT_OPERATOR","->",187],["T_STRING","_acl",187],";",["T_WHITESPACE","\n    ",187],"}",["T_WHITESPACE","\n\n    ",188],["T_DOC_COMMENT","\/**\n     * Set production flag\n     *\n     * @param  bool $flag\n     * @return Zend_Amf_Server\n     *\/",190],["T_WHITESPACE","\n    ",195],["T_PUBLIC","public",196],["T_WHITESPACE"," ",196],["T_FUNCTION","function",196],["T_WHITESPACE"," ",196],["T_STRING","setProduction",196],"(",["T_VARIABLE","$flag",196],")",["T_WHITESPACE","\n    ",196],"{",["T_WHITESPACE","\n        ",197],["T_VARIABLE","$this",198],["T_OBJECT_OPERATOR","->",198],["T_STRING","_production",198],["T_WHITESPACE"," ",198],"=",["T_WHITESPACE"," ",198],["T_BOOL_CAST","(bool)",198],["T_WHITESPACE"," ",198],["T_VARIABLE","$flag",198],";",["T_WHITESPACE","\n        ",198],["T_RETURN","return",199],["T_WHITESPACE"," ",199],["T_VARIABLE","$this",199],";",["T_WHITESPACE","\n    ",199],"}",["T_WHITESPACE","\n\n    ",200],["T_DOC_COMMENT","\/**\n     * Whether or not the server is in production\n     *\n     * @return bool\n     *\/",202],["T_WHITESPACE","\n    ",206],["T_PUBLIC","public",207],["T_WHITESPACE"," ",207],["T_FUNCTION","function",207],["T_WHITESPACE"," ",207],["T_STRING","isProduction",207],"(",")",["T_WHITESPACE","\n    ",207],"{",["T_WHITESPACE","\n        ",208],["T_RETURN","return",209],["T_WHITESPACE"," ",209],["T_VARIABLE","$this",209],["T_OBJECT_OPERATOR","->",209],["T_STRING","_production",209],";",["T_WHITESPACE","\n    ",209],"}",["T_WHITESPACE","\n\n    ",210],["T_DOC_COMMENT","\/**\n     * @param namespace of all incoming sessions defaults to Zend_Amf\n     * @return Zend_Amf_Server\n     *\/",212],["T_WHITESPACE","\n    ",215],["T_PUBLIC","public",216],["T_WHITESPACE"," ",216],["T_FUNCTION","function",216],["T_WHITESPACE"," ",216],["T_STRING","setSession",216],"(",["T_VARIABLE","$namespace",216],["T_WHITESPACE"," ",216],"=",["T_WHITESPACE"," ",216],["T_CONSTANT_ENCAPSED_STRING","'Zend_Amf'",216],")",["T_WHITESPACE","\n    ",216],"{",["T_WHITESPACE","\n        ",217],["T_COMMENT","#require_once 'Zend\/Session.php';\n",218],["T_WHITESPACE","        ",219],["T_VARIABLE","$this",219],["T_OBJECT_OPERATOR","->",219],["T_STRING","_session",219],["T_WHITESPACE"," ",219],"=",["T_WHITESPACE"," ",219],["T_STRING","true",219],";",["T_WHITESPACE","\n        ",219],["T_VARIABLE","$this",220],["T_OBJECT_OPERATOR","->",220],["T_STRING","_sesionNamespace",220],["T_WHITESPACE"," ",220],"=",["T_WHITESPACE"," ",220],["T_NEW","new",220],["T_WHITESPACE"," ",220],["T_STRING","Zend_Session_Namespace",220],"(",["T_VARIABLE","$namespace",220],")",";",["T_WHITESPACE","\n        ",220],["T_RETURN","return",221],["T_WHITESPACE"," ",221],["T_VARIABLE","$this",221],";",["T_WHITESPACE","\n    ",221],"}",["T_WHITESPACE","\n\n    ",222],["T_DOC_COMMENT","\/**\n     * Whether of not the server is using sessions\n     * @return bool\n     *\/",224],["T_WHITESPACE","\n    ",227],["T_PUBLIC","public",228],["T_WHITESPACE"," ",228],["T_FUNCTION","function",228],["T_WHITESPACE"," ",228],["T_STRING","isSession",228],"(",")",["T_WHITESPACE","\n    ",228],"{",["T_WHITESPACE","\n        ",229],["T_RETURN","return",230],["T_WHITESPACE"," ",230],["T_VARIABLE","$this",230],["T_OBJECT_OPERATOR","->",230],["T_STRING","_session",230],";",["T_WHITESPACE","\n    ",230],"}",["T_WHITESPACE","\n\n    ",231],["T_DOC_COMMENT","\/**\n     * Check if the ACL allows accessing the function or method\n     *\n     * @param string|object $object Object or class being accessed\n     * @param string $function Function or method being accessed\n     * @return unknown_type\n     *\/",233],["T_WHITESPACE","\n    ",239],["T_PROTECTED","protected",240],["T_WHITESPACE"," ",240],["T_FUNCTION","function",240],["T_WHITESPACE"," ",240],["T_STRING","_checkAcl",240],"(",["T_VARIABLE","$object",240],",",["T_WHITESPACE"," ",240],["T_VARIABLE","$function",240],")",["T_WHITESPACE","\n    ",240],"{",["T_WHITESPACE","\n        ",241],["T_IF","if",242],"(","!",["T_VARIABLE","$this",242],["T_OBJECT_OPERATOR","->",242],["T_STRING","_acl",242],")",["T_WHITESPACE"," ",242],"{",["T_WHITESPACE","\n            ",242],["T_RETURN","return",243],["T_WHITESPACE"," ",243],["T_STRING","true",243],";",["T_WHITESPACE","\n        ",243],"}",["T_WHITESPACE","\n        ",244],["T_IF","if",245],"(",["T_VARIABLE","$object",245],")",["T_WHITESPACE"," ",245],"{",["T_WHITESPACE","\n            ",245],["T_VARIABLE","$class",246],["T_WHITESPACE"," ",246],"=",["T_WHITESPACE"," ",246],["T_STRING","is_object",246],"(",["T_VARIABLE","$object",246],")","?",["T_STRING","get_class",246],"(",["T_VARIABLE","$object",246],")",":",["T_VARIABLE","$object",246],";",["T_WHITESPACE","\n            ",246],["T_IF","if",247],"(","!",["T_VARIABLE","$this",247],["T_OBJECT_OPERATOR","->",247],["T_STRING","_acl",247],["T_OBJECT_OPERATOR","->",247],["T_STRING","has",247],"(",["T_VARIABLE","$class",247],")",")",["T_WHITESPACE"," ",247],"{",["T_WHITESPACE","\n                ",247],["T_COMMENT","#require_once 'Zend\/Acl\/Resource.php';\n",248],["T_WHITESPACE","                ",249],["T_VARIABLE","$this",249],["T_OBJECT_OPERATOR","->",249],["T_STRING","_acl",249],["T_OBJECT_OPERATOR","->",249],["T_STRING","add",249],"(",["T_NEW","new",249],["T_WHITESPACE"," ",249],["T_STRING","Zend_Acl_Resource",249],"(",["T_VARIABLE","$class",249],")",")",";",["T_WHITESPACE","\n            ",249],"}",["T_WHITESPACE","\n            ",250],["T_VARIABLE","$call",251],["T_WHITESPACE"," ",251],"=",["T_WHITESPACE"," ",251],["T_ARRAY","array",251],"(",["T_VARIABLE","$object",251],",",["T_WHITESPACE"," ",251],["T_CONSTANT_ENCAPSED_STRING","\"initAcl\"",251],")",";",["T_WHITESPACE","\n            ",251],["T_IF","if",252],"(",["T_STRING","is_callable",252],"(",["T_VARIABLE","$call",252],")",["T_WHITESPACE"," ",252],["T_BOOLEAN_AND","&&",252],["T_WHITESPACE"," ",252],"!",["T_STRING","call_user_func",252],"(",["T_VARIABLE","$call",252],",",["T_WHITESPACE"," ",252],["T_VARIABLE","$this",252],["T_OBJECT_OPERATOR","->",252],["T_STRING","_acl",252],")",")",["T_WHITESPACE"," ",252],"{",["T_WHITESPACE","\n                ",252],["T_COMMENT","\/\/ if initAcl returns false, no ACL check\n",253],["T_WHITESPACE","                ",254],["T_RETURN","return",254],["T_WHITESPACE"," ",254],["T_STRING","true",254],";",["T_WHITESPACE","\n            ",254],"}",["T_WHITESPACE","\n        ",255],"}",["T_WHITESPACE"," ",256],["T_ELSE","else",256],["T_WHITESPACE"," ",256],"{",["T_WHITESPACE","\n            ",256],["T_VARIABLE","$class",257],["T_WHITESPACE"," ",257],"=",["T_WHITESPACE"," ",257],["T_STRING","null",257],";",["T_WHITESPACE","\n        ",257],"}",["T_WHITESPACE","\n\n        ",258],["T_VARIABLE","$auth",260],["T_WHITESPACE"," ",260],"=",["T_WHITESPACE"," ",260],["T_STRING","Zend_Auth",260],["T_DOUBLE_COLON","::",260],["T_STRING","getInstance",260],"(",")",";",["T_WHITESPACE","\n        ",260],["T_IF","if",261],"(",["T_VARIABLE","$auth",261],["T_OBJECT_OPERATOR","->",261],["T_STRING","hasIdentity",261],"(",")",")",["T_WHITESPACE"," ",261],"{",["T_WHITESPACE","\n            ",261],["T_VARIABLE","$role",262],["T_WHITESPACE"," ",262],"=",["T_WHITESPACE"," ",262],["T_VARIABLE","$auth",262],["T_OBJECT_OPERATOR","->",262],["T_STRING","getIdentity",262],"(",")",["T_OBJECT_OPERATOR","->",262],["T_STRING","role",262],";",["T_WHITESPACE","\n        ",262],"}",["T_WHITESPACE"," ",263],["T_ELSE","else",263],["T_WHITESPACE"," ",263],"{",["T_WHITESPACE","\n            ",263],["T_IF","if",264],"(",["T_VARIABLE","$this",264],["T_OBJECT_OPERATOR","->",264],["T_STRING","_acl",264],["T_OBJECT_OPERATOR","->",264],["T_STRING","hasRole",264],"(",["T_STRING","Zend_Amf_Constants",264],["T_DOUBLE_COLON","::",264],["T_STRING","GUEST_ROLE",264],")",")",["T_WHITESPACE"," ",264],"{",["T_WHITESPACE","\n                ",264],["T_VARIABLE","$role",265],["T_WHITESPACE"," ",265],"=",["T_WHITESPACE"," ",265],["T_STRING","Zend_Amf_Constants",265],["T_DOUBLE_COLON","::",265],["T_STRING","GUEST_ROLE",265],";",["T_WHITESPACE","\n            ",265],"}",["T_WHITESPACE"," ",266],["T_ELSE","else",266],["T_WHITESPACE"," ",266],"{",["T_WHITESPACE","\n                ",266],["T_COMMENT","#require_once 'Zend\/Amf\/Server\/Exception.php';\n",267],["T_WHITESPACE","                ",268],["T_THROW","throw",268],["T_WHITESPACE"," ",268],["T_NEW","new",268],["T_WHITESPACE"," ",268],["T_STRING","Zend_Amf_Server_Exception",268],"(",["T_CONSTANT_ENCAPSED_STRING","\"Unauthenticated access not allowed\"",268],")",";",["T_WHITESPACE","\n            ",268],"}",["T_WHITESPACE","\n        ",269],"}",["T_WHITESPACE","\n        ",270],["T_IF","if",271],"(",["T_VARIABLE","$this",271],["T_OBJECT_OPERATOR","->",271],["T_STRING","_acl",271],["T_OBJECT_OPERATOR","->",271],["T_STRING","isAllowed",271],"(",["T_VARIABLE","$role",271],",",["T_WHITESPACE"," ",271],["T_VARIABLE","$class",271],",",["T_WHITESPACE"," ",271],["T_VARIABLE","$function",271],")",")",["T_WHITESPACE"," ",271],"{",["T_WHITESPACE","\n            ",271],["T_RETURN","return",272],["T_WHITESPACE"," ",272],["T_STRING","true",272],";",["T_WHITESPACE","\n        ",272],"}",["T_WHITESPACE"," ",273],["T_ELSE","else",273],["T_WHITESPACE"," ",273],"{",["T_WHITESPACE","\n            ",273],["T_COMMENT","#require_once 'Zend\/Amf\/Server\/Exception.php';\n",274],["T_WHITESPACE","            ",275],["T_THROW","throw",275],["T_WHITESPACE"," ",275],["T_NEW","new",275],["T_WHITESPACE"," ",275],["T_STRING","Zend_Amf_Server_Exception",275],"(",["T_CONSTANT_ENCAPSED_STRING","\"Access not allowed\"",275],")",";",["T_WHITESPACE","\n        ",275],"}",["T_WHITESPACE","\n    ",276],"}",["T_WHITESPACE","\n\n    ",277],["T_DOC_COMMENT","\/**\n     * Get PluginLoader for the Server\n     *\n     * @return Zend_Loader_PluginLoader\n     *\/",279],["T_WHITESPACE","\n    ",283],["T_PROTECTED","protected",284],["T_WHITESPACE"," ",284],["T_FUNCTION","function",284],["T_WHITESPACE"," ",284],["T_STRING","getLoader",284],"(",")",["T_WHITESPACE","\n    ",284],"{",["T_WHITESPACE","\n        ",285],["T_IF","if",286],"(",["T_EMPTY","empty",286],"(",["T_VARIABLE","$this",286],["T_OBJECT_OPERATOR","->",286],["T_STRING","_loader",286],")",")",["T_WHITESPACE"," ",286],"{",["T_WHITESPACE","\n            ",286],["T_COMMENT","#require_once 'Zend\/Loader\/PluginLoader.php';\n",287],["T_WHITESPACE","            ",288],["T_VARIABLE","$this",288],["T_OBJECT_OPERATOR","->",288],["T_STRING","_loader",288],["T_WHITESPACE"," ",288],"=",["T_WHITESPACE"," ",288],["T_NEW","new",288],["T_WHITESPACE"," ",288],["T_STRING","Zend_Loader_PluginLoader",288],"(",")",";",["T_WHITESPACE","\n        ",288],"}",["T_WHITESPACE","\n        ",289],["T_RETURN","return",290],["T_WHITESPACE"," ",290],["T_VARIABLE","$this",290],["T_OBJECT_OPERATOR","->",290],["T_STRING","_loader",290],";",["T_WHITESPACE","\n    ",290],"}",["T_WHITESPACE","\n\n    ",291],["T_DOC_COMMENT","\/**\n     * Loads a remote class or method and executes the function and returns\n     * the result\n     *\n     * @param  string $method Is the method to execute\n     * @param  mixed $param values for the method\n     * @return mixed $response the result of executing the method\n     * @throws Zend_Amf_Server_Exception\n     *\/",293],["T_WHITESPACE","\n    ",301],["T_PROTECTED","protected",302],["T_WHITESPACE"," ",302],["T_FUNCTION","function",302],["T_WHITESPACE"," ",302],["T_STRING","_dispatch",302],"(",["T_VARIABLE","$method",302],",",["T_WHITESPACE"," ",302],["T_VARIABLE","$params",302],["T_WHITESPACE"," ",302],"=",["T_WHITESPACE"," ",302],["T_STRING","null",302],",",["T_WHITESPACE"," ",302],["T_VARIABLE","$source",302],["T_WHITESPACE"," ",302],"=",["T_WHITESPACE"," ",302],["T_STRING","null",302],")",["T_WHITESPACE","\n    ",302],"{",["T_WHITESPACE","\n        ",303],["T_IF","if",304],"(",["T_VARIABLE","$source",304],")",["T_WHITESPACE"," ",304],"{",["T_WHITESPACE","\n            ",304],["T_IF","if",305],"(","(",["T_VARIABLE","$mapped",305],["T_WHITESPACE"," ",305],"=",["T_WHITESPACE"," ",305],["T_STRING","Zend_Amf_Parse_TypeLoader",305],["T_DOUBLE_COLON","::",305],["T_STRING","getMappedClassName",305],"(",["T_VARIABLE","$source",305],")",")",["T_WHITESPACE"," ",305],["T_IS_NOT_IDENTICAL","!==",305],["T_WHITESPACE"," ",305],["T_STRING","false",305],")",["T_WHITESPACE"," ",305],"{",["T_WHITESPACE","\n                ",305],["T_VARIABLE","$source",306],["T_WHITESPACE"," ",306],"=",["T_WHITESPACE"," ",306],["T_VARIABLE","$mapped",306],";",["T_WHITESPACE","\n            ",306],"}",["T_WHITESPACE","\n        ",307],"}",["T_WHITESPACE","\n        ",308],["T_VARIABLE","$qualifiedName",309],["T_WHITESPACE"," ",309],"=",["T_WHITESPACE"," ",309],["T_EMPTY","empty",309],"(",["T_VARIABLE","$source",309],")",["T_WHITESPACE"," ",309],"?",["T_WHITESPACE"," ",309],["T_VARIABLE","$method",309],["T_WHITESPACE"," ",309],":",["T_WHITESPACE"," ",309],["T_VARIABLE","$source",309],["T_WHITESPACE"," ",309],".",["T_WHITESPACE"," ",309],["T_CONSTANT_ENCAPSED_STRING","'.'",309],["T_WHITESPACE"," ",309],".",["T_WHITESPACE"," ",309],["T_VARIABLE","$method",309],";",["T_WHITESPACE","\n\n        ",309],["T_IF","if",311],["T_WHITESPACE"," ",311],"(","!",["T_ISSET","isset",311],"(",["T_VARIABLE","$this",311],["T_OBJECT_OPERATOR","->",311],["T_STRING","_table",311],"[",["T_VARIABLE","$qualifiedName",311],"]",")",")",["T_WHITESPACE"," ",311],"{",["T_WHITESPACE","\n            ",311],["T_COMMENT","\/\/ if source is null a method that was not defined was called.\n",312],["T_WHITESPACE","            ",313],["T_IF","if",313],["T_WHITESPACE"," ",313],"(",["T_VARIABLE","$source",313],")",["T_WHITESPACE"," ",313],"{",["T_WHITESPACE","\n                ",313],["T_VARIABLE","$className",314],["T_WHITESPACE"," ",314],"=",["T_WHITESPACE"," ",314],["T_STRING","str_replace",314],"(",["T_CONSTANT_ENCAPSED_STRING","'.'",314],",",["T_WHITESPACE"," ",314],["T_CONSTANT_ENCAPSED_STRING","'_'",314],",",["T_WHITESPACE"," ",314],["T_VARIABLE","$source",314],")",";",["T_WHITESPACE","\n                ",314],["T_IF","if",315],"(",["T_STRING","class_exists",315],"(",["T_VARIABLE","$className",315],",",["T_WHITESPACE"," ",315],["T_STRING","false",315],")",["T_WHITESPACE"," ",315],["T_BOOLEAN_AND","&&",315],["T_WHITESPACE"," ",315],"!",["T_ISSET","isset",315],"(",["T_VARIABLE","$this",315],["T_OBJECT_OPERATOR","->",315],["T_STRING","_classAllowed",315],"[",["T_VARIABLE","$className",315],"]",")",")",["T_WHITESPACE"," ",315],"{",["T_WHITESPACE","\n                    ",315],["T_COMMENT","#require_once 'Zend\/Amf\/Server\/Exception.php';\n",316],["T_WHITESPACE","                    ",317],["T_THROW","throw",317],["T_WHITESPACE"," ",317],["T_NEW","new",317],["T_WHITESPACE"," ",317],["T_STRING","Zend_Amf_Server_Exception",317],"(",["T_CONSTANT_ENCAPSED_STRING","'Can not call \"'",317],["T_WHITESPACE"," ",317],".",["T_WHITESPACE"," ",317],["T_VARIABLE","$className",317],["T_WHITESPACE"," ",317],".",["T_WHITESPACE"," ",317],["T_CONSTANT_ENCAPSED_STRING","'\" - use setClass()'",317],")",";",["T_WHITESPACE","\n                ",317],"}",["T_WHITESPACE","\n                ",318],["T_TRY","try",319],["T_WHITESPACE"," ",319],"{",["T_WHITESPACE","\n                    ",319],["T_VARIABLE","$this",320],["T_OBJECT_OPERATOR","->",320],["T_STRING","getLoader",320],"(",")",["T_OBJECT_OPERATOR","->",320],["T_STRING","load",320],"(",["T_VARIABLE","$className",320],")",";",["T_WHITESPACE","\n                ",320],"}",["T_WHITESPACE"," ",321],["T_CATCH","catch",321],["T_WHITESPACE"," ",321],"(",["T_STRING","Exception",321],["T_WHITESPACE"," ",321],["T_VARIABLE","$e",321],")",["T_WHITESPACE"," ",321],"{",["T_WHITESPACE","\n                    ",321],["T_COMMENT","#require_once 'Zend\/Amf\/Server\/Exception.php';\n",322],["T_WHITESPACE","                    ",323],["T_THROW","throw",323],["T_WHITESPACE"," ",323],["T_NEW","new",323],["T_WHITESPACE"," ",323],["T_STRING","Zend_Amf_Server_Exception",323],"(",["T_CONSTANT_ENCAPSED_STRING","'Class \"'",323],["T_WHITESPACE"," ",323],".",["T_WHITESPACE"," ",323],["T_VARIABLE","$className",323],["T_WHITESPACE"," ",323],".",["T_WHITESPACE"," ",323],["T_CONSTANT_ENCAPSED_STRING","'\" does not exist: '",323],".",["T_VARIABLE","$e",323],["T_OBJECT_OPERATOR","->",323],["T_STRING","getMessage",323],"(",")",",",["T_WHITESPACE"," ",323],["T_LNUMBER","0",323],",",["T_WHITESPACE"," ",323],["T_VARIABLE","$e",323],")",";",["T_WHITESPACE","\n                ",323],"}",["T_WHITESPACE","\n                ",324],["T_COMMENT","\/\/ Add the new loaded class to the server.\n",325],["T_WHITESPACE","                    ",326],["T_COMMENT","#require_once 'Zend\/Amf\/Server\/Exception.php';\n",326],["T_WHITESPACE","                ",327],["T_VARIABLE","$this",327],["T_OBJECT_OPERATOR","->",327],["T_STRING","setClass",327],"(",["T_VARIABLE","$className",327],",",["T_WHITESPACE"," ",327],["T_VARIABLE","$source",327],")",";",["T_WHITESPACE","\n            ",327],"}",["T_WHITESPACE","\n\n            ",328],["T_IF","if",330],["T_WHITESPACE"," ",330],"(","!",["T_ISSET","isset",330],"(",["T_VARIABLE","$this",330],["T_OBJECT_OPERATOR","->",330],["T_STRING","_table",330],"[",["T_VARIABLE","$qualifiedName",330],"]",")",")",["T_WHITESPACE"," ",330],"{",["T_WHITESPACE","\n                ",330],["T_COMMENT","\/\/ Source is null or doesn't contain specified method\n",331],["T_WHITESPACE","                ",332],["T_COMMENT","#require_once 'Zend\/Amf\/Server\/Exception.php';\n",332],["T_WHITESPACE","                ",333],["T_THROW","throw",333],["T_WHITESPACE"," ",333],["T_NEW","new",333],["T_WHITESPACE"," ",333],["T_STRING","Zend_Amf_Server_Exception",333],"(",["T_CONSTANT_ENCAPSED_STRING","'Method \"'",333],["T_WHITESPACE"," ",333],".",["T_WHITESPACE"," ",333],["T_VARIABLE","$method",333],["T_WHITESPACE"," ",333],".",["T_WHITESPACE"," ",333],["T_CONSTANT_ENCAPSED_STRING","'\" does not exist'",333],")",";",["T_WHITESPACE","\n            ",333],"}",["T_WHITESPACE","\n        ",334],"}",["T_WHITESPACE","\n\n        ",335],["T_VARIABLE","$info",337],["T_WHITESPACE"," ",337],"=",["T_WHITESPACE"," ",337],["T_VARIABLE","$this",337],["T_OBJECT_OPERATOR","->",337],["T_STRING","_table",337],"[",["T_VARIABLE","$qualifiedName",337],"]",";",["T_WHITESPACE","\n        ",337],["T_VARIABLE","$argv",338],["T_WHITESPACE"," ",338],"=",["T_WHITESPACE"," ",338],["T_VARIABLE","$info",338],["T_OBJECT_OPERATOR","->",338],["T_STRING","getInvokeArguments",338],"(",")",";",["T_WHITESPACE","\n\n        ",338],["T_IF","if",340],["T_WHITESPACE"," ",340],"(",["T_LNUMBER","0",340],["T_WHITESPACE"," ",340],"<",["T_WHITESPACE"," ",340],["T_STRING","count",340],"(",["T_VARIABLE","$argv",340],")",")",["T_WHITESPACE"," ",340],"{",["T_WHITESPACE","\n            ",340],["T_VARIABLE","$params",341],["T_WHITESPACE"," ",341],"=",["T_WHITESPACE"," ",341],["T_STRING","array_merge",341],"(",["T_VARIABLE","$params",341],",",["T_WHITESPACE"," ",341],["T_VARIABLE","$argv",341],")",";",["T_WHITESPACE","\n        ",341],"}",["T_WHITESPACE","\n\n        ",342],["T_VARIABLE","$params",344],["T_WHITESPACE"," ",344],"=",["T_WHITESPACE"," ",344],["T_VARIABLE","$this",344],["T_OBJECT_OPERATOR","->",344],["T_STRING","_castParameters",344],"(",["T_VARIABLE","$info",344],",",["T_WHITESPACE"," ",344],["T_VARIABLE","$params",344],")",";",["T_WHITESPACE","\n\n        ",344],["T_IF","if",346],["T_WHITESPACE"," ",346],"(",["T_VARIABLE","$info",346],["T_WHITESPACE"," ",346],["T_INSTANCEOF","instanceof",346],["T_WHITESPACE"," ",346],["T_STRING","Zend_Server_Reflection_Function",346],")",["T_WHITESPACE"," ",346],"{",["T_WHITESPACE","\n            ",346],["T_VARIABLE","$func",347],["T_WHITESPACE"," ",347],"=",["T_WHITESPACE"," ",347],["T_VARIABLE","$info",347],["T_OBJECT_OPERATOR","->",347],["T_STRING","getName",347],"(",")",";",["T_WHITESPACE","\n            ",347],["T_VARIABLE","$this",348],["T_OBJECT_OPERATOR","->",348],["T_STRING","_checkAcl",348],"(",["T_STRING","null",348],",",["T_WHITESPACE"," ",348],["T_VARIABLE","$func",348],")",";",["T_WHITESPACE","\n            ",348],["T_VARIABLE","$return",349],["T_WHITESPACE"," ",349],"=",["T_WHITESPACE"," ",349],["T_STRING","call_user_func_array",349],"(",["T_VARIABLE","$func",349],",",["T_WHITESPACE"," ",349],["T_VARIABLE","$params",349],")",";",["T_WHITESPACE","\n        ",349],"}",["T_WHITESPACE"," ",350],["T_ELSEIF","elseif",350],["T_WHITESPACE"," ",350],"(",["T_VARIABLE","$info",350],["T_WHITESPACE"," ",350],["T_INSTANCEOF","instanceof",350],["T_WHITESPACE"," ",350],["T_STRING","Zend_Server_Reflection_Method",350],")",["T_WHITESPACE"," ",350],"{",["T_WHITESPACE","\n            ",350],["T_COMMENT","\/\/ Get class\n",351],["T_WHITESPACE","            ",352],["T_VARIABLE","$class",352],["T_WHITESPACE"," ",352],"=",["T_WHITESPACE"," ",352],["T_VARIABLE","$info",352],["T_OBJECT_OPERATOR","->",352],["T_STRING","getDeclaringClass",352],"(",")",["T_OBJECT_OPERATOR","->",352],["T_STRING","getName",352],"(",")",";",["T_WHITESPACE","\n            ",352],["T_IF","if",353],["T_WHITESPACE"," ",353],"(",["T_CONSTANT_ENCAPSED_STRING","'static'",353],["T_WHITESPACE"," ",353],["T_IS_EQUAL","==",353],["T_WHITESPACE"," ",353],["T_VARIABLE","$info",353],["T_OBJECT_OPERATOR","->",353],["T_STRING","isStatic",353],"(",")",")",["T_WHITESPACE"," ",353],"{",["T_WHITESPACE","\n                ",353],["T_COMMENT","\/\/ for some reason, invokeArgs() does not work the same as\n",354],["T_WHITESPACE","                ",355],["T_COMMENT","\/\/ invoke(), and expects the first argument to be an object.\n",355],["T_WHITESPACE","                ",356],["T_COMMENT","\/\/ So, using a callback if the method is static.\n",356],["T_WHITESPACE","                ",357],["T_VARIABLE","$this",357],["T_OBJECT_OPERATOR","->",357],["T_STRING","_checkAcl",357],"(",["T_VARIABLE","$class",357],",",["T_WHITESPACE"," ",357],["T_VARIABLE","$info",357],["T_OBJECT_OPERATOR","->",357],["T_STRING","getName",357],"(",")",")",";",["T_WHITESPACE","\n                ",357],["T_VARIABLE","$return",358],["T_WHITESPACE"," ",358],"=",["T_WHITESPACE"," ",358],["T_STRING","call_user_func_array",358],"(",["T_ARRAY","array",358],"(",["T_VARIABLE","$class",358],",",["T_WHITESPACE"," ",358],["T_VARIABLE","$info",358],["T_OBJECT_OPERATOR","->",358],["T_STRING","getName",358],"(",")",")",",",["T_WHITESPACE"," ",358],["T_VARIABLE","$params",358],")",";",["T_WHITESPACE","\n            ",358],"}",["T_WHITESPACE"," ",359],["T_ELSE","else",359],["T_WHITESPACE"," ",359],"{",["T_WHITESPACE","\n                ",359],["T_COMMENT","\/\/ Object methods\n",360],["T_WHITESPACE","                ",361],["T_TRY","try",361],["T_WHITESPACE"," ",361],"{",["T_WHITESPACE","\n                    ",361],["T_VARIABLE","$object",362],["T_WHITESPACE"," ",362],"=",["T_WHITESPACE"," ",362],["T_VARIABLE","$info",362],["T_OBJECT_OPERATOR","->",362],["T_STRING","getDeclaringClass",362],"(",")",["T_OBJECT_OPERATOR","->",362],["T_STRING","newInstance",362],"(",")",";",["T_WHITESPACE","\n                ",362],"}",["T_WHITESPACE"," ",363],["T_CATCH","catch",363],["T_WHITESPACE"," ",363],"(",["T_STRING","Exception",363],["T_WHITESPACE"," ",363],["T_VARIABLE","$e",363],")",["T_WHITESPACE"," ",363],"{",["T_WHITESPACE","\n                    ",363],["T_COMMENT","#require_once 'Zend\/Amf\/Server\/Exception.php';\n",364],["T_WHITESPACE","                    ",365],["T_THROW","throw",365],["T_WHITESPACE"," ",365],["T_NEW","new",365],["T_WHITESPACE"," ",365],["T_STRING","Zend_Amf_Server_Exception",365],"(",["T_CONSTANT_ENCAPSED_STRING","'Error instantiating class '",365],["T_WHITESPACE"," ",365],".",["T_WHITESPACE"," ",365],["T_VARIABLE","$class",365],["T_WHITESPACE"," ",365],".",["T_WHITESPACE"," ",365],["T_CONSTANT_ENCAPSED_STRING","' to invoke method '",365],["T_WHITESPACE"," ",365],".",["T_WHITESPACE"," ",365],["T_VARIABLE","$info",365],["T_OBJECT_OPERATOR","->",365],["T_STRING","getName",365],"(",")",["T_WHITESPACE"," ",365],".",["T_WHITESPACE"," ",365],["T_CONSTANT_ENCAPSED_STRING","': '",365],".",["T_VARIABLE","$e",365],["T_OBJECT_OPERATOR","->",365],["T_STRING","getMessage",365],"(",")",",",["T_WHITESPACE"," ",365],["T_LNUMBER","621",365],",",["T_WHITESPACE"," ",365],["T_VARIABLE","$e",365],")",";",["T_WHITESPACE","\n                ",365],"}",["T_WHITESPACE","\n                ",366],["T_VARIABLE","$this",367],["T_OBJECT_OPERATOR","->",367],["T_STRING","_checkAcl",367],"(",["T_VARIABLE","$object",367],",",["T_WHITESPACE"," ",367],["T_VARIABLE","$info",367],["T_OBJECT_OPERATOR","->",367],["T_STRING","getName",367],"(",")",")",";",["T_WHITESPACE","\n                ",367],["T_VARIABLE","$return",368],["T_WHITESPACE"," ",368],"=",["T_WHITESPACE"," ",368],["T_VARIABLE","$info",368],["T_OBJECT_OPERATOR","->",368],["T_STRING","invokeArgs",368],"(",["T_VARIABLE","$object",368],",",["T_WHITESPACE"," ",368],["T_VARIABLE","$params",368],")",";",["T_WHITESPACE","\n            ",368],"}",["T_WHITESPACE","\n        ",369],"}",["T_WHITESPACE"," ",370],["T_ELSE","else",370],["T_WHITESPACE"," ",370],"{",["T_WHITESPACE","\n            ",370],["T_COMMENT","#require_once 'Zend\/Amf\/Server\/Exception.php';\n",371],["T_WHITESPACE","            ",372],["T_THROW","throw",372],["T_WHITESPACE"," ",372],["T_NEW","new",372],["T_WHITESPACE"," ",372],["T_STRING","Zend_Amf_Server_Exception",372],"(",["T_CONSTANT_ENCAPSED_STRING","'Method missing implementation '",372],["T_WHITESPACE"," ",372],".",["T_WHITESPACE"," ",372],["T_STRING","get_class",372],"(",["T_VARIABLE","$info",372],")",")",";",["T_WHITESPACE","\n        ",372],"}",["T_WHITESPACE","\n\n        ",373],["T_RETURN","return",375],["T_WHITESPACE"," ",375],["T_VARIABLE","$return",375],";",["T_WHITESPACE","\n    ",375],"}",["T_WHITESPACE","\n\n    ",376],["T_DOC_COMMENT","\/**\n     * Handles each of the 11 different command message types.\n     *\n     * A command message is a flex.messaging.messages.CommandMessage\n     *\n     * @see    Zend_Amf_Value_Messaging_CommandMessage\n     * @param  Zend_Amf_Value_Messaging_CommandMessage $message\n     * @return Zend_Amf_Value_Messaging_AcknowledgeMessage\n     *\/",378],["T_WHITESPACE","\n    ",386],["T_PROTECTED","protected",387],["T_WHITESPACE"," ",387],["T_FUNCTION","function",387],["T_WHITESPACE"," ",387],["T_STRING","_loadCommandMessage",387],"(",["T_STRING","Zend_Amf_Value_Messaging_CommandMessage",387],["T_WHITESPACE"," ",387],["T_VARIABLE","$message",387],")",["T_WHITESPACE","\n    ",387],"{",["T_WHITESPACE","\n        ",388],["T_COMMENT","#require_once 'Zend\/Amf\/Value\/Messaging\/AcknowledgeMessage.php';\n",389],["T_WHITESPACE","        ",390],["T_SWITCH","switch",390],"(",["T_VARIABLE","$message",390],["T_OBJECT_OPERATOR","->",390],["T_STRING","operation",390],")",["T_WHITESPACE"," ",390],"{",["T_WHITESPACE","\n            ",390],["T_CASE","case",391],["T_WHITESPACE"," ",391],["T_STRING","Zend_Amf_Value_Messaging_CommandMessage",391],["T_DOUBLE_COLON","::",391],["T_STRING","DISCONNECT_OPERATION",391],["T_WHITESPACE"," ",391],":",["T_WHITESPACE","\n            ",391],["T_CASE","case",392],["T_WHITESPACE"," ",392],["T_STRING","Zend_Amf_Value_Messaging_CommandMessage",392],["T_DOUBLE_COLON","::",392],["T_STRING","CLIENT_PING_OPERATION",392],["T_WHITESPACE"," ",392],":",["T_WHITESPACE","\n                ",392],["T_VARIABLE","$return",393],["T_WHITESPACE"," ",393],"=",["T_WHITESPACE"," ",393],["T_NEW","new",393],["T_WHITESPACE"," ",393],["T_STRING","Zend_Amf_Value_Messaging_AcknowledgeMessage",393],"(",["T_VARIABLE","$message",393],")",";",["T_WHITESPACE","\n                ",393],["T_BREAK","break",394],";",["T_WHITESPACE","\n            ",394],["T_CASE","case",395],["T_WHITESPACE"," ",395],["T_STRING","Zend_Amf_Value_Messaging_CommandMessage",395],["T_DOUBLE_COLON","::",395],["T_STRING","LOGIN_OPERATION",395],["T_WHITESPACE"," ",395],":",["T_WHITESPACE","\n                ",395],["T_VARIABLE","$data",396],["T_WHITESPACE"," ",396],"=",["T_WHITESPACE"," ",396],["T_STRING","explode",396],"(",["T_CONSTANT_ENCAPSED_STRING","':'",396],",",["T_WHITESPACE"," ",396],["T_STRING","base64_decode",396],"(",["T_VARIABLE","$message",396],["T_OBJECT_OPERATOR","->",396],["T_STRING","body",396],")",")",";",["T_WHITESPACE","\n                ",396],["T_VARIABLE","$userid",397],["T_WHITESPACE"," ",397],"=",["T_WHITESPACE"," ",397],["T_VARIABLE","$data",397],"[",["T_LNUMBER","0",397],"]",";",["T_WHITESPACE","\n                ",397],["T_VARIABLE","$password",398],["T_WHITESPACE"," ",398],"=",["T_WHITESPACE"," ",398],["T_ISSET","isset",398],"(",["T_VARIABLE","$data",398],"[",["T_LNUMBER","1",398],"]",")","?",["T_VARIABLE","$data",398],"[",["T_LNUMBER","1",398],"]",":",["T_CONSTANT_ENCAPSED_STRING","\"\"",398],";",["T_WHITESPACE","\n                ",398],["T_IF","if",399],"(",["T_EMPTY","empty",399],"(",["T_VARIABLE","$userid",399],")",")",["T_WHITESPACE"," ",399],"{",["T_WHITESPACE","\n                    ",399],["T_COMMENT","#require_once 'Zend\/Amf\/Server\/Exception.php';\n",400],["T_WHITESPACE","                    ",401],["T_THROW","throw",401],["T_WHITESPACE"," ",401],["T_NEW","new",401],["T_WHITESPACE"," ",401],["T_STRING","Zend_Amf_Server_Exception",401],"(",["T_CONSTANT_ENCAPSED_STRING","'Login failed: username not supplied'",401],")",";",["T_WHITESPACE","\n                ",401],"}",["T_WHITESPACE","\n                ",402],["T_IF","if",403],"(","!",["T_VARIABLE","$this",403],["T_OBJECT_OPERATOR","->",403],["T_STRING","_handleAuth",403],"(",["T_VARIABLE","$userid",403],",",["T_WHITESPACE"," ",403],["T_VARIABLE","$password",403],")",")",["T_WHITESPACE"," ",403],"{",["T_WHITESPACE","\n                    ",403],["T_COMMENT","#require_once 'Zend\/Amf\/Server\/Exception.php';\n",404],["T_WHITESPACE","                    ",405],["T_THROW","throw",405],["T_WHITESPACE"," ",405],["T_NEW","new",405],["T_WHITESPACE"," ",405],["T_STRING","Zend_Amf_Server_Exception",405],"(",["T_CONSTANT_ENCAPSED_STRING","'Authentication failed'",405],")",";",["T_WHITESPACE","\n                ",405],"}",["T_WHITESPACE","\n                ",406],["T_VARIABLE","$return",407],["T_WHITESPACE"," ",407],"=",["T_WHITESPACE"," ",407],["T_NEW","new",407],["T_WHITESPACE"," ",407],["T_STRING","Zend_Amf_Value_Messaging_AcknowledgeMessage",407],"(",["T_VARIABLE","$message",407],")",";",["T_WHITESPACE","\n                ",407],["T_BREAK","break",408],";",["T_WHITESPACE","\n           ",408],["T_CASE","case",409],["T_WHITESPACE"," ",409],["T_STRING","Zend_Amf_Value_Messaging_CommandMessage",409],["T_DOUBLE_COLON","::",409],["T_STRING","LOGOUT_OPERATION",409],["T_WHITESPACE"," ",409],":",["T_WHITESPACE","\n                ",409],["T_IF","if",410],"(",["T_VARIABLE","$this",410],["T_OBJECT_OPERATOR","->",410],["T_STRING","_auth",410],")",["T_WHITESPACE"," ",410],"{",["T_WHITESPACE","\n                    ",410],["T_STRING","Zend_Auth",411],["T_DOUBLE_COLON","::",411],["T_STRING","getInstance",411],"(",")",["T_OBJECT_OPERATOR","->",411],["T_STRING","clearIdentity",411],"(",")",";",["T_WHITESPACE","\n                ",411],"}",["T_WHITESPACE","\n                ",412],["T_VARIABLE","$return",413],["T_WHITESPACE"," ",413],"=",["T_WHITESPACE"," ",413],["T_NEW","new",413],["T_WHITESPACE"," ",413],["T_STRING","Zend_Amf_Value_Messaging_AcknowledgeMessage",413],"(",["T_VARIABLE","$message",413],")",";",["T_WHITESPACE","\n                ",413],["T_BREAK","break",414],";",["T_WHITESPACE","\n            ",414],["T_DEFAULT","default",415],["T_WHITESPACE"," ",415],":",["T_WHITESPACE","\n                ",415],["T_COMMENT","#require_once 'Zend\/Amf\/Server\/Exception.php';\n",416],["T_WHITESPACE","                ",417],["T_THROW","throw",417],["T_WHITESPACE"," ",417],["T_NEW","new",417],["T_WHITESPACE"," ",417],["T_STRING","Zend_Amf_Server_Exception",417],"(",["T_CONSTANT_ENCAPSED_STRING","'CommandMessage::'",417],["T_WHITESPACE"," ",417],".",["T_WHITESPACE"," ",417],["T_VARIABLE","$message",417],["T_OBJECT_OPERATOR","->",417],["T_STRING","operation",417],["T_WHITESPACE"," ",417],".",["T_WHITESPACE"," ",417],["T_CONSTANT_ENCAPSED_STRING","' not implemented'",417],")",";",["T_WHITESPACE","\n                ",417],["T_BREAK","break",418],";",["T_WHITESPACE","\n        ",418],"}",["T_WHITESPACE","\n        ",419],["T_RETURN","return",420],["T_WHITESPACE"," ",420],["T_VARIABLE","$return",420],";",["T_WHITESPACE","\n    ",420],"}",["T_WHITESPACE","\n\n    ",421],["T_DOC_COMMENT","\/**\n     * Create appropriate error message\n     *\n     * @param int $objectEncoding Current AMF encoding\n     * @param string $message Message that was being processed when error happened\n     * @param string $description Error description\n     * @param mixed $detail Detailed data about the error\n     * @param int $code Error code\n     * @param int $line Error line\n     * @return Zend_Amf_Value_Messaging_ErrorMessage|array\n     *\/",423],["T_WHITESPACE","\n    ",433],["T_PROTECTED","protected",434],["T_WHITESPACE"," ",434],["T_FUNCTION","function",434],["T_WHITESPACE"," ",434],["T_STRING","_errorMessage",434],"(",["T_VARIABLE","$objectEncoding",434],",",["T_WHITESPACE"," ",434],["T_VARIABLE","$message",434],",",["T_WHITESPACE"," ",434],["T_VARIABLE","$description",434],",",["T_WHITESPACE"," ",434],["T_VARIABLE","$detail",434],",",["T_WHITESPACE"," ",434],["T_VARIABLE","$code",434],",",["T_WHITESPACE"," ",434],["T_VARIABLE","$line",434],")",["T_WHITESPACE","\n    ",434],"{",["T_WHITESPACE","\n        ",435],["T_VARIABLE","$return",436],["T_WHITESPACE"," ",436],"=",["T_WHITESPACE"," ",436],["T_STRING","null",436],";",["T_WHITESPACE","\n        ",436],["T_SWITCH","switch",437],["T_WHITESPACE"," ",437],"(",["T_VARIABLE","$objectEncoding",437],")",["T_WHITESPACE"," ",437],"{",["T_WHITESPACE","\n            ",437],["T_CASE","case",438],["T_WHITESPACE"," ",438],["T_STRING","Zend_Amf_Constants",438],["T_DOUBLE_COLON","::",438],["T_STRING","AMF0_OBJECT_ENCODING",438],["T_WHITESPACE"," ",438],":",["T_WHITESPACE","\n                ",438],["T_RETURN","return",439],["T_WHITESPACE"," ",439],["T_ARRAY","array",439],["T_WHITESPACE"," ",439],"(",["T_WHITESPACE","\n                        ",439],["T_CONSTANT_ENCAPSED_STRING","'description'",440],["T_WHITESPACE"," ",440],["T_DOUBLE_ARROW","=>",440],["T_WHITESPACE"," ",440],"(",["T_VARIABLE","$this",440],["T_OBJECT_OPERATOR","->",440],["T_STRING","isProduction",440],["T_WHITESPACE"," ",440],"(",")",")",["T_WHITESPACE"," ",440],"?",["T_WHITESPACE"," ",440],["T_CONSTANT_ENCAPSED_STRING","''",440],["T_WHITESPACE"," ",440],":",["T_WHITESPACE"," ",440],["T_VARIABLE","$description",440],",",["T_WHITESPACE","\n                        ",440],["T_CONSTANT_ENCAPSED_STRING","'detail'",441],["T_WHITESPACE"," ",441],["T_DOUBLE_ARROW","=>",441],["T_WHITESPACE"," ",441],"(",["T_VARIABLE","$this",441],["T_OBJECT_OPERATOR","->",441],["T_STRING","isProduction",441],["T_WHITESPACE"," ",441],"(",")",")",["T_WHITESPACE"," ",441],"?",["T_WHITESPACE"," ",441],["T_CONSTANT_ENCAPSED_STRING","''",441],["T_WHITESPACE"," ",441],":",["T_WHITESPACE"," ",441],["T_VARIABLE","$detail",441],",",["T_WHITESPACE","\n                        ",441],["T_CONSTANT_ENCAPSED_STRING","'line'",442],["T_WHITESPACE"," ",442],["T_DOUBLE_ARROW","=>",442],["T_WHITESPACE"," ",442],"(",["T_VARIABLE","$this",442],["T_OBJECT_OPERATOR","->",442],["T_STRING","isProduction",442],["T_WHITESPACE"," ",442],"(",")",")",["T_WHITESPACE"," ",442],"?",["T_WHITESPACE"," ",442],["T_LNUMBER","0",442],["T_WHITESPACE"," ",442],":",["T_WHITESPACE"," ",442],["T_VARIABLE","$line",442],",",["T_WHITESPACE","\n                        ",442],["T_CONSTANT_ENCAPSED_STRING","'code'",443],["T_WHITESPACE"," ",443],["T_DOUBLE_ARROW","=>",443],["T_WHITESPACE"," ",443],["T_VARIABLE","$code",443],["T_WHITESPACE","\n                ",443],")",";",["T_WHITESPACE","\n            ",444],["T_CASE","case",445],["T_WHITESPACE"," ",445],["T_STRING","Zend_Amf_Constants",445],["T_DOUBLE_COLON","::",445],["T_STRING","AMF3_OBJECT_ENCODING",445],["T_WHITESPACE"," ",445],":",["T_WHITESPACE","\n                ",445],["T_COMMENT","#require_once 'Zend\/Amf\/Value\/Messaging\/ErrorMessage.php';\n",446],["T_WHITESPACE","                ",447],["T_VARIABLE","$return",447],["T_WHITESPACE"," ",447],"=",["T_WHITESPACE"," ",447],["T_NEW","new",447],["T_WHITESPACE"," ",447],["T_STRING","Zend_Amf_Value_Messaging_ErrorMessage",447],["T_WHITESPACE"," ",447],"(",["T_WHITESPACE"," ",447],["T_VARIABLE","$message",447],["T_WHITESPACE"," ",447],")",";",["T_WHITESPACE","\n                ",447],["T_VARIABLE","$return",448],["T_OBJECT_OPERATOR","->",448],["T_STRING","faultString",448],["T_WHITESPACE"," ",448],"=",["T_WHITESPACE"," ",448],["T_VARIABLE","$this",448],["T_OBJECT_OPERATOR","->",448],["T_STRING","isProduction",448],["T_WHITESPACE"," ",448],"(",")",["T_WHITESPACE"," ",448],"?",["T_WHITESPACE"," ",448],["T_CONSTANT_ENCAPSED_STRING","''",448],["T_WHITESPACE"," ",448],":",["T_WHITESPACE"," ",448],["T_VARIABLE","$description",448],";",["T_WHITESPACE","\n                ",448],["T_VARIABLE","$return",449],["T_OBJECT_OPERATOR","->",449],["T_STRING","faultCode",449],["T_WHITESPACE"," ",449],"=",["T_WHITESPACE"," ",449],["T_VARIABLE","$code",449],";",["T_WHITESPACE","\n                ",449],["T_VARIABLE","$return",450],["T_OBJECT_OPERATOR","->",450],["T_STRING","faultDetail",450],["T_WHITESPACE"," ",450],"=",["T_WHITESPACE"," ",450],["T_VARIABLE","$this",450],["T_OBJECT_OPERATOR","->",450],["T_STRING","isProduction",450],["T_WHITESPACE"," ",450],"(",")",["T_WHITESPACE"," ",450],"?",["T_WHITESPACE"," ",450],["T_CONSTANT_ENCAPSED_STRING","''",450],["T_WHITESPACE"," ",450],":",["T_WHITESPACE"," ",450],["T_VARIABLE","$detail",450],";",["T_WHITESPACE","\n                ",450],["T_BREAK","break",451],";",["T_WHITESPACE","\n        ",451],"}",["T_WHITESPACE","\n        ",452],["T_RETURN","return",453],["T_WHITESPACE"," ",453],["T_VARIABLE","$return",453],";",["T_WHITESPACE","\n    ",453],"}",["T_WHITESPACE","\n\n    ",454],["T_DOC_COMMENT","\/**\n     * Handle AMF authentication\n     *\n     * @param string $userid\n     * @param string $password\n     * @return boolean\n     *\/",456],["T_WHITESPACE","\n    ",462],["T_PROTECTED","protected",463],["T_WHITESPACE"," ",463],["T_FUNCTION","function",463],["T_WHITESPACE"," ",463],["T_STRING","_handleAuth",463],"(",["T_WHITESPACE"," ",463],["T_VARIABLE","$userid",463],",",["T_WHITESPACE","  ",463],["T_VARIABLE","$password",463],")",["T_WHITESPACE","\n    ",463],"{",["T_WHITESPACE","\n        ",464],["T_IF","if",465],["T_WHITESPACE"," ",465],"(","!",["T_VARIABLE","$this",465],["T_OBJECT_OPERATOR","->",465],["T_STRING","_auth",465],")",["T_WHITESPACE"," ",465],"{",["T_WHITESPACE","\n            ",465],["T_RETURN","return",466],["T_WHITESPACE"," ",466],["T_STRING","true",466],";",["T_WHITESPACE","\n        ",466],"}",["T_WHITESPACE","\n        ",467],["T_VARIABLE","$this",468],["T_OBJECT_OPERATOR","->",468],["T_STRING","_auth",468],["T_OBJECT_OPERATOR","->",468],["T_STRING","setCredentials",468],"(",["T_VARIABLE","$userid",468],",",["T_WHITESPACE"," ",468],["T_VARIABLE","$password",468],")",";",["T_WHITESPACE","\n        ",468],["T_VARIABLE","$auth",469],["T_WHITESPACE"," ",469],"=",["T_WHITESPACE"," ",469],["T_STRING","Zend_Auth",469],["T_DOUBLE_COLON","::",469],["T_STRING","getInstance",469],"(",")",";",["T_WHITESPACE","\n        ",469],["T_VARIABLE","$result",470],["T_WHITESPACE"," ",470],"=",["T_WHITESPACE"," ",470],["T_VARIABLE","$auth",470],["T_OBJECT_OPERATOR","->",470],["T_STRING","authenticate",470],"(",["T_VARIABLE","$this",470],["T_OBJECT_OPERATOR","->",470],["T_STRING","_auth",470],")",";",["T_WHITESPACE","\n        ",470],["T_IF","if",471],["T_WHITESPACE"," ",471],"(",["T_VARIABLE","$result",471],["T_OBJECT_OPERATOR","->",471],["T_STRING","isValid",471],"(",")",")",["T_WHITESPACE"," ",471],"{",["T_WHITESPACE","\n            ",471],["T_IF","if",472],["T_WHITESPACE"," ",472],"(","!",["T_VARIABLE","$this",472],["T_OBJECT_OPERATOR","->",472],["T_STRING","isSession",472],"(",")",")",["T_WHITESPACE"," ",472],"{",["T_WHITESPACE","\n                ",472],["T_VARIABLE","$this",473],["T_OBJECT_OPERATOR","->",473],["T_STRING","setSession",473],"(",")",";",["T_WHITESPACE","\n            ",473],"}",["T_WHITESPACE","\n            ",474],["T_RETURN","return",475],["T_WHITESPACE"," ",475],["T_STRING","true",475],";",["T_WHITESPACE","\n        ",475],"}",["T_WHITESPACE"," ",476],["T_ELSE","else",476],["T_WHITESPACE"," ",476],"{",["T_WHITESPACE","\n            ",476],["T_COMMENT","\/\/ authentication failed, good bye\n",477],["T_WHITESPACE","            ",478],["T_COMMENT","#require_once 'Zend\/Amf\/Server\/Exception.php';\n",478],["T_WHITESPACE","            ",479],["T_THROW","throw",479],["T_WHITESPACE"," ",479],["T_NEW","new",479],["T_WHITESPACE"," ",479],["T_STRING","Zend_Amf_Server_Exception",479],"(",["T_WHITESPACE","\n                ",479],["T_CONSTANT_ENCAPSED_STRING","\"Authentication failed: \"",480],["T_WHITESPACE"," ",480],".",["T_WHITESPACE"," ",480],["T_STRING","join",480],"(",["T_CONSTANT_ENCAPSED_STRING","\"\\n\"",480],",",["T_WHITESPACE","\n                    ",480],["T_VARIABLE","$result",481],["T_OBJECT_OPERATOR","->",481],["T_STRING","getMessages",481],"(",")",")",",",["T_WHITESPACE"," ",481],["T_VARIABLE","$result",481],["T_OBJECT_OPERATOR","->",481],["T_STRING","getCode",481],"(",")",")",";",["T_WHITESPACE","\n        ",481],"}",["T_WHITESPACE","\n\n    ",482],"}",["T_WHITESPACE","\n\n    ",484],["T_DOC_COMMENT","\/**\n     * Takes the deserialized AMF request and performs any operations.\n     *\n     * @todo   should implement and SPL observer pattern for custom AMF headers\n     * @todo   DescribeService support\n     * @param  Zend_Amf_Request $request\n     * @return Zend_Amf_Response\n     * @throws Zend_Amf_server_Exception|Exception\n     *\/",486],["T_WHITESPACE","\n    ",494],["T_PROTECTED","protected",495],["T_WHITESPACE"," ",495],["T_FUNCTION","function",495],["T_WHITESPACE"," ",495],["T_STRING","_handle",495],"(",["T_STRING","Zend_Amf_Request",495],["T_WHITESPACE"," ",495],["T_VARIABLE","$request",495],")",["T_WHITESPACE","\n    ",495],"{",["T_WHITESPACE","\n        ",496],["T_COMMENT","\/\/ Get the object encoding of the request.\n",497],["T_WHITESPACE","        ",498],["T_VARIABLE","$objectEncoding",498],["T_WHITESPACE"," ",498],"=",["T_WHITESPACE"," ",498],["T_VARIABLE","$request",498],["T_OBJECT_OPERATOR","->",498],["T_STRING","getObjectEncoding",498],"(",")",";",["T_WHITESPACE","\n\n        ",498],["T_COMMENT","\/\/ create a response object to place the output from the services.\n",500],["T_WHITESPACE","        ",501],["T_VARIABLE","$response",501],["T_WHITESPACE"," ",501],"=",["T_WHITESPACE"," ",501],["T_VARIABLE","$this",501],["T_OBJECT_OPERATOR","->",501],["T_STRING","getResponse",501],"(",")",";",["T_WHITESPACE","\n\n        ",501],["T_COMMENT","\/\/ set response encoding\n",503],["T_WHITESPACE","        ",504],["T_VARIABLE","$response",504],["T_OBJECT_OPERATOR","->",504],["T_STRING","setObjectEncoding",504],"(",["T_VARIABLE","$objectEncoding",504],")",";",["T_WHITESPACE","\n\n        ",504],["T_COMMENT","\/\/ Authenticate, if we have credential headers\n",506],["T_WHITESPACE","        ",507],["T_VARIABLE","$error",507],["T_WHITESPACE","   ",507],"=",["T_WHITESPACE"," ",507],["T_STRING","false",507],";",["T_WHITESPACE","\n        ",507],["T_VARIABLE","$headers",508],["T_WHITESPACE"," ",508],"=",["T_WHITESPACE"," ",508],["T_VARIABLE","$request",508],["T_OBJECT_OPERATOR","->",508],["T_STRING","getAmfHeaders",508],"(",")",";",["T_WHITESPACE","\n        ",508],["T_IF","if",509],["T_WHITESPACE"," ",509],"(",["T_ISSET","isset",509],"(",["T_VARIABLE","$headers",509],"[",["T_STRING","Zend_Amf_Constants",509],["T_DOUBLE_COLON","::",509],["T_STRING","CREDENTIALS_HEADER",509],"]",")",["T_WHITESPACE"," \n            ",509],["T_BOOLEAN_AND","&&",510],["T_WHITESPACE"," ",510],["T_ISSET","isset",510],"(",["T_VARIABLE","$headers",510],"[",["T_STRING","Zend_Amf_Constants",510],["T_DOUBLE_COLON","::",510],["T_STRING","CREDENTIALS_HEADER",510],"]",["T_OBJECT_OPERATOR","->",510],["T_STRING","userid",510],")",["T_WHITESPACE","\n            ",510],["T_BOOLEAN_AND","&&",511],["T_WHITESPACE"," ",511],["T_ISSET","isset",511],"(",["T_VARIABLE","$headers",511],"[",["T_STRING","Zend_Amf_Constants",511],["T_DOUBLE_COLON","::",511],["T_STRING","CREDENTIALS_HEADER",511],"]",["T_OBJECT_OPERATOR","->",511],["T_STRING","password",511],")",["T_WHITESPACE","\n        ",511],")",["T_WHITESPACE"," ",512],"{",["T_WHITESPACE","\n            ",512],["T_TRY","try",513],["T_WHITESPACE"," ",513],"{",["T_WHITESPACE","\n                ",513],["T_IF","if",514],["T_WHITESPACE"," ",514],"(",["T_VARIABLE","$this",514],["T_OBJECT_OPERATOR","->",514],["T_STRING","_handleAuth",514],"(",["T_WHITESPACE","\n                        ",514],["T_VARIABLE","$headers",515],"[",["T_STRING","Zend_Amf_Constants",515],["T_DOUBLE_COLON","::",515],["T_STRING","CREDENTIALS_HEADER",515],"]",["T_OBJECT_OPERATOR","->",515],["T_STRING","userid",515],",",["T_WHITESPACE","\n                        ",515],["T_VARIABLE","$headers",516],"[",["T_STRING","Zend_Amf_Constants",516],["T_DOUBLE_COLON","::",516],["T_STRING","CREDENTIALS_HEADER",516],"]",["T_OBJECT_OPERATOR","->",516],["T_STRING","password",516],["T_WHITESPACE","\n                ",516],")",")",["T_WHITESPACE"," ",517],"{",["T_WHITESPACE","\n                    ",517],["T_COMMENT","\/\/ use RequestPersistentHeader to clear credentials\n",518],["T_WHITESPACE","                    ",519],["T_VARIABLE","$response",519],["T_OBJECT_OPERATOR","->",519],["T_STRING","addAmfHeader",519],"(",["T_WHITESPACE","\n                        ",519],["T_NEW","new",520],["T_WHITESPACE"," ",520],["T_STRING","Zend_Amf_Value_MessageHeader",520],"(",["T_WHITESPACE","\n                            ",520],["T_STRING","Zend_Amf_Constants",521],["T_DOUBLE_COLON","::",521],["T_STRING","PERSISTENT_HEADER",521],",",["T_WHITESPACE","\n                            ",521],["T_STRING","false",522],",",["T_WHITESPACE","\n                            ",522],["T_NEW","new",523],["T_WHITESPACE"," ",523],["T_STRING","Zend_Amf_Value_MessageHeader",523],"(",["T_WHITESPACE","\n                                ",523],["T_STRING","Zend_Amf_Constants",524],["T_DOUBLE_COLON","::",524],["T_STRING","CREDENTIALS_HEADER",524],",",["T_WHITESPACE","\n                                ",524],["T_STRING","false",525],",",["T_WHITESPACE"," ",525],["T_STRING","null",525],["T_WHITESPACE","\n                            ",525],")",["T_WHITESPACE","\n                        ",526],")",["T_WHITESPACE","\n                    ",527],")",";",["T_WHITESPACE","\n                ",528],"}",["T_WHITESPACE","\n            ",529],"}",["T_WHITESPACE"," ",530],["T_CATCH","catch",530],["T_WHITESPACE"," ",530],"(",["T_STRING","Exception",530],["T_WHITESPACE"," ",530],["T_VARIABLE","$e",530],")",["T_WHITESPACE"," ",530],"{",["T_WHITESPACE","\n                ",530],["T_COMMENT","\/\/ Error during authentication; report it\n",531],["T_WHITESPACE","                ",532],["T_VARIABLE","$error",532],["T_WHITESPACE"," ",532],"=",["T_WHITESPACE"," ",532],["T_VARIABLE","$this",532],["T_OBJECT_OPERATOR","->",532],["T_STRING","_errorMessage",532],"(",["T_WHITESPACE","\n                    ",532],["T_VARIABLE","$objectEncoding",533],",",["T_WHITESPACE"," \n                    ",533],["T_CONSTANT_ENCAPSED_STRING","''",534],",",["T_WHITESPACE"," \n                    ",534],["T_VARIABLE","$e",535],["T_OBJECT_OPERATOR","->",535],["T_STRING","getMessage",535],"(",")",",",["T_WHITESPACE","\n                    ",535],["T_VARIABLE","$e",536],["T_OBJECT_OPERATOR","->",536],["T_STRING","getTraceAsString",536],"(",")",",",["T_WHITESPACE","\n                    ",536],["T_VARIABLE","$e",537],["T_OBJECT_OPERATOR","->",537],["T_STRING","getCode",537],"(",")",",",["T_WHITESPACE","\n                    ",537],["T_VARIABLE","$e",538],["T_OBJECT_OPERATOR","->",538],["T_STRING","getLine",538],"(",")",["T_WHITESPACE","\n                ",538],")",";",["T_WHITESPACE","\n                ",539],["T_VARIABLE","$responseType",540],["T_WHITESPACE"," ",540],"=",["T_WHITESPACE"," ",540],["T_STRING","Zend_AMF_Constants",540],["T_DOUBLE_COLON","::",540],["T_STRING","STATUS_METHOD",540],";",["T_WHITESPACE","\n            ",540],"}",["T_WHITESPACE","\n        ",541],"}",["T_WHITESPACE","\n\n        ",542],["T_COMMENT","\/\/ Iterate through each of the service calls in the AMF request\n",544],["T_WHITESPACE","        ",545],["T_FOREACH","foreach",545],"(",["T_VARIABLE","$request",545],["T_OBJECT_OPERATOR","->",545],["T_STRING","getAmfBodies",545],"(",")",["T_WHITESPACE"," ",545],["T_AS","as",545],["T_WHITESPACE"," ",545],["T_VARIABLE","$body",545],")",["T_WHITESPACE","\n        ",545],"{",["T_WHITESPACE","\n            ",546],["T_IF","if",547],["T_WHITESPACE"," ",547],"(",["T_VARIABLE","$error",547],")",["T_WHITESPACE"," ",547],"{",["T_WHITESPACE","\n                ",547],["T_COMMENT","\/\/ Error during authentication; just report it and be done\n",548],["T_WHITESPACE","                ",549],["T_VARIABLE","$responseURI",549],["T_WHITESPACE"," ",549],"=",["T_WHITESPACE"," ",549],["T_VARIABLE","$body",549],["T_OBJECT_OPERATOR","->",549],["T_STRING","getResponseURI",549],"(",")",["T_WHITESPACE"," ",549],".",["T_WHITESPACE"," ",549],["T_VARIABLE","$responseType",549],";",["T_WHITESPACE","\n                ",549],["T_VARIABLE","$newBody",550],["T_WHITESPACE","     ",550],"=",["T_WHITESPACE"," ",550],["T_NEW","new",550],["T_WHITESPACE"," ",550],["T_STRING","Zend_Amf_Value_MessageBody",550],"(",["T_VARIABLE","$responseURI",550],",",["T_WHITESPACE"," ",550],["T_STRING","null",550],",",["T_WHITESPACE"," ",550],["T_VARIABLE","$error",550],")",";",["T_WHITESPACE","\n                ",550],["T_VARIABLE","$response",551],["T_OBJECT_OPERATOR","->",551],["T_STRING","addAmfBody",551],"(",["T_VARIABLE","$newBody",551],")",";",["T_WHITESPACE","\n                ",551],["T_CONTINUE","continue",552],";",["T_WHITESPACE","\n            ",552],"}",["T_WHITESPACE","\n            ",553],["T_TRY","try",554],["T_WHITESPACE"," ",554],"{",["T_WHITESPACE","\n                ",554],["T_SWITCH","switch",555],["T_WHITESPACE"," ",555],"(",["T_VARIABLE","$objectEncoding",555],")",["T_WHITESPACE"," ",555],"{",["T_WHITESPACE","\n                    ",555],["T_CASE","case",556],["T_WHITESPACE"," ",556],["T_STRING","Zend_Amf_Constants",556],["T_DOUBLE_COLON","::",556],["T_STRING","AMF0_OBJECT_ENCODING",556],":",["T_WHITESPACE","\n                        ",556],["T_COMMENT","\/\/ AMF0 Object Encoding\n",557],["T_WHITESPACE","                        ",558],["T_VARIABLE","$targetURI",558],["T_WHITESPACE"," ",558],"=",["T_WHITESPACE"," ",558],["T_VARIABLE","$body",558],["T_OBJECT_OPERATOR","->",558],["T_STRING","getTargetURI",558],"(",")",";",["T_WHITESPACE","\n                        ",558],["T_VARIABLE","$message",559],["T_WHITESPACE"," ",559],"=",["T_WHITESPACE"," ",559],["T_CONSTANT_ENCAPSED_STRING","''",559],";",["T_WHITESPACE","\n\n                        ",559],["T_COMMENT","\/\/ Split the target string into its values.\n",561],["T_WHITESPACE","                        ",562],["T_VARIABLE","$source",562],["T_WHITESPACE"," ",562],"=",["T_WHITESPACE"," ",562],["T_STRING","substr",562],"(",["T_VARIABLE","$targetURI",562],",",["T_WHITESPACE"," ",562],["T_LNUMBER","0",562],",",["T_WHITESPACE"," ",562],["T_STRING","strrpos",562],"(",["T_VARIABLE","$targetURI",562],",",["T_WHITESPACE"," ",562],["T_CONSTANT_ENCAPSED_STRING","'.'",562],")",")",";",["T_WHITESPACE","\n\n                        ",562],["T_IF","if",564],["T_WHITESPACE"," ",564],"(",["T_VARIABLE","$source",564],")",["T_WHITESPACE"," ",564],"{",["T_WHITESPACE","\n                            ",564],["T_COMMENT","\/\/ Break off method name from namespace into source\n",565],["T_WHITESPACE","                            ",566],["T_VARIABLE","$method",566],["T_WHITESPACE"," ",566],"=",["T_WHITESPACE"," ",566],["T_STRING","substr",566],"(",["T_STRING","strrchr",566],"(",["T_VARIABLE","$targetURI",566],",",["T_WHITESPACE"," ",566],["T_CONSTANT_ENCAPSED_STRING","'.'",566],")",",",["T_WHITESPACE"," ",566],["T_LNUMBER","1",566],")",";",["T_WHITESPACE","\n                            ",566],["T_VARIABLE","$return",567],["T_WHITESPACE"," ",567],"=",["T_WHITESPACE"," ",567],["T_VARIABLE","$this",567],["T_OBJECT_OPERATOR","->",567],["T_STRING","_dispatch",567],"(",["T_VARIABLE","$method",567],",",["T_WHITESPACE"," ",567],["T_VARIABLE","$body",567],["T_OBJECT_OPERATOR","->",567],["T_STRING","getData",567],"(",")",",",["T_WHITESPACE"," ",567],["T_VARIABLE","$source",567],")",";",["T_WHITESPACE","\n                        ",567],"}",["T_WHITESPACE"," ",568],["T_ELSE","else",568],["T_WHITESPACE"," ",568],"{",["T_WHITESPACE","\n                            ",568],["T_COMMENT","\/\/ Just have a method name.\n",569],["T_WHITESPACE","                            ",570],["T_VARIABLE","$return",570],["T_WHITESPACE"," ",570],"=",["T_WHITESPACE"," ",570],["T_VARIABLE","$this",570],["T_OBJECT_OPERATOR","->",570],["T_STRING","_dispatch",570],"(",["T_VARIABLE","$targetURI",570],",",["T_WHITESPACE"," ",570],["T_VARIABLE","$body",570],["T_OBJECT_OPERATOR","->",570],["T_STRING","getData",570],"(",")",")",";",["T_WHITESPACE","\n                        ",570],"}",["T_WHITESPACE","\n                        ",571],["T_BREAK","break",572],";",["T_WHITESPACE","\n                    ",572],["T_CASE","case",573],["T_WHITESPACE"," ",573],["T_STRING","Zend_Amf_Constants",573],["T_DOUBLE_COLON","::",573],["T_STRING","AMF3_OBJECT_ENCODING",573],":",["T_WHITESPACE","\n                    ",573],["T_DEFAULT","default",574],":",["T_WHITESPACE","\n                        ",574],["T_COMMENT","\/\/ AMF3 read message type\n",575],["T_WHITESPACE","                        ",576],["T_VARIABLE","$message",576],["T_WHITESPACE"," ",576],"=",["T_WHITESPACE"," ",576],["T_VARIABLE","$body",576],["T_OBJECT_OPERATOR","->",576],["T_STRING","getData",576],"(",")",";",["T_WHITESPACE","\n                        ",576],["T_IF","if",577],["T_WHITESPACE"," ",577],"(",["T_VARIABLE","$message",577],["T_WHITESPACE"," ",577],["T_INSTANCEOF","instanceof",577],["T_WHITESPACE"," ",577],["T_STRING","Zend_Amf_Value_Messaging_CommandMessage",577],")",["T_WHITESPACE"," ",577],"{",["T_WHITESPACE","\n                            ",577],["T_COMMENT","\/\/ async call with command message\n",578],["T_WHITESPACE","                            ",579],["T_VARIABLE","$return",579],["T_WHITESPACE"," ",579],"=",["T_WHITESPACE"," ",579],["T_VARIABLE","$this",579],["T_OBJECT_OPERATOR","->",579],["T_STRING","_loadCommandMessage",579],"(",["T_VARIABLE","$message",579],")",";",["T_WHITESPACE","\n                        ",579],"}",["T_WHITESPACE"," ",580],["T_ELSEIF","elseif",580],["T_WHITESPACE"," ",580],"(",["T_VARIABLE","$message",580],["T_WHITESPACE"," ",580],["T_INSTANCEOF","instanceof",580],["T_WHITESPACE"," ",580],["T_STRING","Zend_Amf_Value_Messaging_RemotingMessage",580],")",["T_WHITESPACE"," ",580],"{",["T_WHITESPACE","\n                            ",580],["T_COMMENT","#require_once 'Zend\/Amf\/Value\/Messaging\/AcknowledgeMessage.php';\n",581],["T_WHITESPACE","                            ",582],["T_VARIABLE","$return",582],["T_WHITESPACE"," ",582],"=",["T_WHITESPACE"," ",582],["T_NEW","new",582],["T_WHITESPACE"," ",582],["T_STRING","Zend_Amf_Value_Messaging_AcknowledgeMessage",582],"(",["T_VARIABLE","$message",582],")",";",["T_WHITESPACE","\n                            ",582],["T_VARIABLE","$return",583],["T_OBJECT_OPERATOR","->",583],["T_STRING","body",583],["T_WHITESPACE"," ",583],"=",["T_WHITESPACE"," ",583],["T_VARIABLE","$this",583],["T_OBJECT_OPERATOR","->",583],["T_STRING","_dispatch",583],"(",["T_VARIABLE","$message",583],["T_OBJECT_OPERATOR","->",583],["T_STRING","operation",583],",",["T_WHITESPACE"," ",583],["T_VARIABLE","$message",583],["T_OBJECT_OPERATOR","->",583],["T_STRING","body",583],",",["T_WHITESPACE"," ",583],["T_VARIABLE","$message",583],["T_OBJECT_OPERATOR","->",583],["T_STRING","source",583],")",";",["T_WHITESPACE","\n                        ",583],"}",["T_WHITESPACE"," ",584],["T_ELSE","else",584],["T_WHITESPACE"," ",584],"{",["T_WHITESPACE","\n                            ",584],["T_COMMENT","\/\/ Amf3 message sent with netConnection\n",585],["T_WHITESPACE","                            ",586],["T_VARIABLE","$targetURI",586],["T_WHITESPACE"," ",586],"=",["T_WHITESPACE"," ",586],["T_VARIABLE","$body",586],["T_OBJECT_OPERATOR","->",586],["T_STRING","getTargetURI",586],"(",")",";",["T_WHITESPACE","\n\n                            ",586],["T_COMMENT","\/\/ Split the target string into its values.\n",588],["T_WHITESPACE","                            ",589],["T_VARIABLE","$source",589],["T_WHITESPACE"," ",589],"=",["T_WHITESPACE"," ",589],["T_STRING","substr",589],"(",["T_VARIABLE","$targetURI",589],",",["T_WHITESPACE"," ",589],["T_LNUMBER","0",589],",",["T_WHITESPACE"," ",589],["T_STRING","strrpos",589],"(",["T_VARIABLE","$targetURI",589],",",["T_WHITESPACE"," ",589],["T_CONSTANT_ENCAPSED_STRING","'.'",589],")",")",";",["T_WHITESPACE","\n\n                            ",589],["T_IF","if",591],["T_WHITESPACE"," ",591],"(",["T_VARIABLE","$source",591],")",["T_WHITESPACE"," ",591],"{",["T_WHITESPACE","\n                                ",591],["T_COMMENT","\/\/ Break off method name from namespace into source\n",592],["T_WHITESPACE","                                ",593],["T_VARIABLE","$method",593],["T_WHITESPACE"," ",593],"=",["T_WHITESPACE"," ",593],["T_STRING","substr",593],"(",["T_STRING","strrchr",593],"(",["T_VARIABLE","$targetURI",593],",",["T_WHITESPACE"," ",593],["T_CONSTANT_ENCAPSED_STRING","'.'",593],")",",",["T_WHITESPACE"," ",593],["T_LNUMBER","1",593],")",";",["T_WHITESPACE","\n                                ",593],["T_VARIABLE","$return",594],["T_WHITESPACE"," ",594],"=",["T_WHITESPACE"," ",594],["T_VARIABLE","$this",594],["T_OBJECT_OPERATOR","->",594],["T_STRING","_dispatch",594],"(",["T_VARIABLE","$method",594],",",["T_WHITESPACE"," ",594],["T_VARIABLE","$body",594],["T_OBJECT_OPERATOR","->",594],["T_STRING","getData",594],"(",")",",",["T_WHITESPACE"," ",594],["T_VARIABLE","$source",594],")",";",["T_WHITESPACE","\n                            ",594],"}",["T_WHITESPACE"," ",595],["T_ELSE","else",595],["T_WHITESPACE"," ",595],"{",["T_WHITESPACE","\n                                ",595],["T_COMMENT","\/\/ Just have a method name.\n",596],["T_WHITESPACE","                                ",597],["T_VARIABLE","$return",597],["T_WHITESPACE"," ",597],"=",["T_WHITESPACE"," ",597],["T_VARIABLE","$this",597],["T_OBJECT_OPERATOR","->",597],["T_STRING","_dispatch",597],"(",["T_VARIABLE","$targetURI",597],",",["T_WHITESPACE"," ",597],["T_VARIABLE","$body",597],["T_OBJECT_OPERATOR","->",597],["T_STRING","getData",597],"(",")",")",";",["T_WHITESPACE","\n                            ",597],"}",["T_WHITESPACE","\n                        ",598],"}",["T_WHITESPACE","\n                        ",599],["T_BREAK","break",600],";",["T_WHITESPACE","\n                ",600],"}",["T_WHITESPACE","\n                ",601],["T_VARIABLE","$responseType",602],["T_WHITESPACE"," ",602],"=",["T_WHITESPACE"," ",602],["T_STRING","Zend_AMF_Constants",602],["T_DOUBLE_COLON","::",602],["T_STRING","RESULT_METHOD",602],";",["T_WHITESPACE","\n            ",602],"}",["T_WHITESPACE"," ",603],["T_CATCH","catch",603],["T_WHITESPACE"," ",603],"(",["T_STRING","Exception",603],["T_WHITESPACE"," ",603],["T_VARIABLE","$e",603],")",["T_WHITESPACE"," ",603],"{",["T_WHITESPACE","\n                ",603],["T_VARIABLE","$return",604],["T_WHITESPACE"," ",604],"=",["T_WHITESPACE"," ",604],["T_VARIABLE","$this",604],["T_OBJECT_OPERATOR","->",604],["T_STRING","_errorMessage",604],"(",["T_VARIABLE","$objectEncoding",604],",",["T_WHITESPACE"," ",604],["T_VARIABLE","$message",604],",",["T_WHITESPACE","\n                    ",604],["T_VARIABLE","$e",605],["T_OBJECT_OPERATOR","->",605],["T_STRING","getMessage",605],"(",")",",",["T_WHITESPACE"," ",605],["T_VARIABLE","$e",605],["T_OBJECT_OPERATOR","->",605],["T_STRING","getTraceAsString",605],"(",")",",",["T_VARIABLE","$e",605],["T_OBJECT_OPERATOR","->",605],["T_STRING","getCode",605],"(",")",",",["T_WHITESPACE","  ",605],["T_VARIABLE","$e",605],["T_OBJECT_OPERATOR","->",605],["T_STRING","getLine",605],"(",")",")",";",["T_WHITESPACE","\n                ",605],["T_VARIABLE","$responseType",606],["T_WHITESPACE"," ",606],"=",["T_WHITESPACE"," ",606],["T_STRING","Zend_AMF_Constants",606],["T_DOUBLE_COLON","::",606],["T_STRING","STATUS_METHOD",606],";",["T_WHITESPACE","\n            ",606],"}",["T_WHITESPACE","\n\n            ",607],["T_VARIABLE","$responseURI",609],["T_WHITESPACE"," ",609],"=",["T_WHITESPACE"," ",609],["T_VARIABLE","$body",609],["T_OBJECT_OPERATOR","->",609],["T_STRING","getResponseURI",609],"(",")",["T_WHITESPACE"," ",609],".",["T_WHITESPACE"," ",609],["T_VARIABLE","$responseType",609],";",["T_WHITESPACE","\n            ",609],["T_VARIABLE","$newBody",610],["T_WHITESPACE","     ",610],"=",["T_WHITESPACE"," ",610],["T_NEW","new",610],["T_WHITESPACE"," ",610],["T_STRING","Zend_Amf_Value_MessageBody",610],"(",["T_VARIABLE","$responseURI",610],",",["T_WHITESPACE"," ",610],["T_STRING","null",610],",",["T_WHITESPACE"," ",610],["T_VARIABLE","$return",610],")",";",["T_WHITESPACE","\n            ",610],["T_VARIABLE","$response",611],["T_OBJECT_OPERATOR","->",611],["T_STRING","addAmfBody",611],"(",["T_VARIABLE","$newBody",611],")",";",["T_WHITESPACE","\n        ",611],"}",["T_WHITESPACE","\n        ",612],["T_COMMENT","\/\/ Add a session header to the body if session is requested.\n",613],["T_WHITESPACE","        ",614],["T_IF","if",614],"(",["T_VARIABLE","$this",614],["T_OBJECT_OPERATOR","->",614],["T_STRING","isSession",614],"(",")",")",["T_WHITESPACE"," ",614],"{",["T_WHITESPACE","\n           ",614],["T_VARIABLE","$currentID",615],["T_WHITESPACE"," ",615],"=",["T_WHITESPACE"," ",615],["T_STRING","session_id",615],"(",")",";",["T_WHITESPACE","\n           ",615],["T_VARIABLE","$joint",616],["T_WHITESPACE"," ",616],"=",["T_WHITESPACE"," ",616],["T_CONSTANT_ENCAPSED_STRING","\"?\"",616],";",["T_WHITESPACE","\n           ",616],["T_IF","if",617],"(",["T_ISSET","isset",617],"(",["T_VARIABLE","$_SERVER",617],"[",["T_CONSTANT_ENCAPSED_STRING","'QUERY_STRING'",617],"]",")",")",["T_WHITESPACE"," ",617],"{",["T_WHITESPACE","\n               ",617],["T_IF","if",618],"(","!",["T_STRING","strpos",618],"(",["T_VARIABLE","$_SERVER",618],"[",["T_CONSTANT_ENCAPSED_STRING","'QUERY_STRING'",618],"]",",",["T_WHITESPACE"," ",618],["T_VARIABLE","$currentID",618],")",["T_WHITESPACE"," ",618],["T_IS_NOT_IDENTICAL","!==",618],["T_WHITESPACE"," ",618],["T_STRING","FALSE",618],")",["T_WHITESPACE"," ",618],"{",["T_WHITESPACE","\n                   ",618],["T_IF","if",619],"(",["T_STRING","strrpos",619],"(",["T_VARIABLE","$_SERVER",619],"[",["T_CONSTANT_ENCAPSED_STRING","'QUERY_STRING'",619],"]",",",["T_WHITESPACE"," ",619],["T_CONSTANT_ENCAPSED_STRING","\"?\"",619],")",["T_WHITESPACE"," ",619],["T_IS_NOT_IDENTICAL","!==",619],["T_WHITESPACE"," ",619],["T_STRING","FALSE",619],")",["T_WHITESPACE"," ",619],"{",["T_WHITESPACE","\n                       ",619],["T_VARIABLE","$joint",620],["T_WHITESPACE"," ",620],"=",["T_WHITESPACE"," ",620],["T_CONSTANT_ENCAPSED_STRING","\"&\"",620],";",["T_WHITESPACE","\n                   ",620],"}",["T_WHITESPACE","\n               ",621],"}",["T_WHITESPACE","\n           ",622],"}",["T_WHITESPACE","\n\n            ",623],["T_COMMENT","\/\/ create a new AMF message header with the session id as a variable.\n",625],["T_WHITESPACE","            ",626],["T_VARIABLE","$sessionValue",626],["T_WHITESPACE"," ",626],"=",["T_WHITESPACE"," ",626],["T_VARIABLE","$joint",626],["T_WHITESPACE"," ",626],".",["T_WHITESPACE"," ",626],["T_VARIABLE","$this",626],["T_OBJECT_OPERATOR","->",626],["T_STRING","_sessionName",626],["T_WHITESPACE"," ",626],".",["T_WHITESPACE"," ",626],["T_CONSTANT_ENCAPSED_STRING","\"=\"",626],["T_WHITESPACE"," ",626],".",["T_WHITESPACE"," ",626],["T_VARIABLE","$currentID",626],";",["T_WHITESPACE","\n            ",626],["T_VARIABLE","$sessionHeader",627],["T_WHITESPACE"," ",627],"=",["T_WHITESPACE"," ",627],["T_NEW","new",627],["T_WHITESPACE"," ",627],["T_STRING","Zend_Amf_Value_MessageHeader",627],"(",["T_STRING","Zend_Amf_Constants",627],["T_DOUBLE_COLON","::",627],["T_STRING","URL_APPEND_HEADER",627],",",["T_WHITESPACE"," ",627],["T_STRING","false",627],",",["T_WHITESPACE"," ",627],["T_VARIABLE","$sessionValue",627],")",";",["T_WHITESPACE","\n            ",627],["T_VARIABLE","$response",628],["T_OBJECT_OPERATOR","->",628],["T_STRING","addAmfHeader",628],"(",["T_VARIABLE","$sessionHeader",628],")",";",["T_WHITESPACE","\n        ",628],"}",["T_WHITESPACE","\n\n        ",629],["T_COMMENT","\/\/ serialize the response and return serialized body.\n",631],["T_WHITESPACE","        ",632],["T_VARIABLE","$response",632],["T_OBJECT_OPERATOR","->",632],["T_STRING","finalize",632],"(",")",";",["T_WHITESPACE","\n    ",632],"}",["T_WHITESPACE","\n\n    ",633],["T_DOC_COMMENT","\/**\n     * Handle an AMF call from the gateway.\n     *\n     * @param  null|Zend_Amf_Request $request Optional\n     * @return Zend_Amf_Response\n     *\/",635],["T_WHITESPACE","\n    ",640],["T_PUBLIC","public",641],["T_WHITESPACE"," ",641],["T_FUNCTION","function",641],["T_WHITESPACE"," ",641],["T_STRING","handle",641],"(",["T_VARIABLE","$request",641],["T_WHITESPACE"," ",641],"=",["T_WHITESPACE"," ",641],["T_STRING","null",641],")",["T_WHITESPACE","\n    ",641],"{",["T_WHITESPACE","\n        ",642],["T_COMMENT","\/\/ Check if request was passed otherwise get it from the server\n",643],["T_WHITESPACE","        ",644],["T_IF","if",644],["T_WHITESPACE"," ",644],"(",["T_VARIABLE","$request",644],["T_WHITESPACE"," ",644],["T_IS_IDENTICAL","===",644],["T_WHITESPACE"," ",644],["T_STRING","null",644],["T_WHITESPACE"," ",644],["T_BOOLEAN_OR","||",644],["T_WHITESPACE"," ",644],"!",["T_VARIABLE","$request",644],["T_WHITESPACE"," ",644],["T_INSTANCEOF","instanceof",644],["T_WHITESPACE"," ",644],["T_STRING","Zend_Amf_Request",644],")",["T_WHITESPACE"," ",644],"{",["T_WHITESPACE","\n            ",644],["T_VARIABLE","$request",645],["T_WHITESPACE"," ",645],"=",["T_WHITESPACE"," ",645],["T_VARIABLE","$this",645],["T_OBJECT_OPERATOR","->",645],["T_STRING","getRequest",645],"(",")",";",["T_WHITESPACE","\n        ",645],"}",["T_WHITESPACE"," ",646],["T_ELSE","else",646],["T_WHITESPACE"," ",646],"{",["T_WHITESPACE","\n            ",646],["T_VARIABLE","$this",647],["T_OBJECT_OPERATOR","->",647],["T_STRING","setRequest",647],"(",["T_VARIABLE","$request",647],")",";",["T_WHITESPACE","\n        ",647],"}",["T_WHITESPACE","\n        ",648],["T_IF","if",649],["T_WHITESPACE"," ",649],"(",["T_VARIABLE","$this",649],["T_OBJECT_OPERATOR","->",649],["T_STRING","isSession",649],"(",")",")",["T_WHITESPACE"," ",649],"{",["T_WHITESPACE","\n             ",649],["T_COMMENT","\/\/ Check if a session is being sent from the amf call\n",650],["T_WHITESPACE","             ",651],["T_IF","if",651],["T_WHITESPACE"," ",651],"(",["T_ISSET","isset",651],"(",["T_VARIABLE","$_COOKIE",651],"[",["T_VARIABLE","$this",651],["T_OBJECT_OPERATOR","->",651],["T_STRING","_sessionName",651],"]",")",")",["T_WHITESPACE"," ",651],"{",["T_WHITESPACE","\n                 ",651],["T_STRING","session_id",652],"(",["T_VARIABLE","$_COOKIE",652],"[",["T_VARIABLE","$this",652],["T_OBJECT_OPERATOR","->",652],["T_STRING","_sessionName",652],"]",")",";",["T_WHITESPACE","\n             ",652],"}",["T_WHITESPACE","\n        ",653],"}",["T_WHITESPACE","\n\n        ",654],["T_COMMENT","\/\/ Check for errors that may have happend in deserialization of Request.\n",656],["T_WHITESPACE","        ",657],["T_TRY","try",657],["T_WHITESPACE"," ",657],"{",["T_WHITESPACE","\n            ",657],["T_COMMENT","\/\/ Take converted PHP objects and handle service call.\n",658],["T_WHITESPACE","            ",659],["T_COMMENT","\/\/ Serialize to Zend_Amf_response for output stream\n",659],["T_WHITESPACE","            ",660],["T_VARIABLE","$this",660],["T_OBJECT_OPERATOR","->",660],["T_STRING","_handle",660],"(",["T_VARIABLE","$request",660],")",";",["T_WHITESPACE","\n            ",660],["T_VARIABLE","$response",661],["T_WHITESPACE"," ",661],"=",["T_WHITESPACE"," ",661],["T_VARIABLE","$this",661],["T_OBJECT_OPERATOR","->",661],["T_STRING","getResponse",661],"(",")",";",["T_WHITESPACE","\n        ",661],"}",["T_WHITESPACE"," ",662],["T_CATCH","catch",662],["T_WHITESPACE"," ",662],"(",["T_STRING","Exception",662],["T_WHITESPACE"," ",662],["T_VARIABLE","$e",662],")",["T_WHITESPACE"," ",662],"{",["T_WHITESPACE","\n            ",662],["T_COMMENT","\/\/ Handle any errors in the serialization and service  calls.\n",663],["T_WHITESPACE","            ",664],["T_COMMENT","#require_once 'Zend\/Amf\/Server\/Exception.php';\n",664],["T_WHITESPACE","            ",665],["T_THROW","throw",665],["T_WHITESPACE"," ",665],["T_NEW","new",665],["T_WHITESPACE"," ",665],["T_STRING","Zend_Amf_Server_Exception",665],"(",["T_CONSTANT_ENCAPSED_STRING","'Handle error: '",665],["T_WHITESPACE"," ",665],".",["T_WHITESPACE"," ",665],["T_VARIABLE","$e",665],["T_OBJECT_OPERATOR","->",665],["T_STRING","getMessage",665],"(",")",["T_WHITESPACE"," ",665],".",["T_WHITESPACE"," ",665],["T_CONSTANT_ENCAPSED_STRING","' '",665],["T_WHITESPACE"," ",665],".",["T_WHITESPACE"," ",665],["T_VARIABLE","$e",665],["T_OBJECT_OPERATOR","->",665],["T_STRING","getLine",665],"(",")",",",["T_WHITESPACE"," ",665],["T_LNUMBER","0",665],",",["T_WHITESPACE"," ",665],["T_VARIABLE","$e",665],")",";",["T_WHITESPACE","\n        ",665],"}",["T_WHITESPACE","\n\n        ",666],["T_COMMENT","\/\/ Return the Amf serialized output string\n",668],["T_WHITESPACE","        ",669],["T_RETURN","return",669],["T_WHITESPACE"," ",669],["T_VARIABLE","$response",669],";",["T_WHITESPACE","\n    ",669],"}",["T_WHITESPACE","\n\n    ",670],["T_DOC_COMMENT","\/**\n     * Set request object\n     *\n     * @param  string|Zend_Amf_Request $request\n     * @return Zend_Amf_Server\n     *\/",672],["T_WHITESPACE","\n    ",677],["T_PUBLIC","public",678],["T_WHITESPACE"," ",678],["T_FUNCTION","function",678],["T_WHITESPACE"," ",678],["T_STRING","setRequest",678],"(",["T_VARIABLE","$request",678],")",["T_WHITESPACE","\n    ",678],"{",["T_WHITESPACE","\n        ",679],["T_IF","if",680],["T_WHITESPACE"," ",680],"(",["T_STRING","is_string",680],"(",["T_VARIABLE","$request",680],")",["T_WHITESPACE"," ",680],["T_BOOLEAN_AND","&&",680],["T_WHITESPACE"," ",680],["T_STRING","class_exists",680],"(",["T_VARIABLE","$request",680],")",")",["T_WHITESPACE"," ",680],"{",["T_WHITESPACE","\n            ",680],["T_VARIABLE","$request",681],["T_WHITESPACE"," ",681],"=",["T_WHITESPACE"," ",681],["T_NEW","new",681],["T_WHITESPACE"," ",681],["T_VARIABLE","$request",681],"(",")",";",["T_WHITESPACE","\n            ",681],["T_IF","if",682],["T_WHITESPACE"," ",682],"(","!",["T_VARIABLE","$request",682],["T_WHITESPACE"," ",682],["T_INSTANCEOF","instanceof",682],["T_WHITESPACE"," ",682],["T_STRING","Zend_Amf_Request",682],")",["T_WHITESPACE"," ",682],"{",["T_WHITESPACE","\n                ",682],["T_COMMENT","#require_once 'Zend\/Amf\/Server\/Exception.php';\n",683],["T_WHITESPACE","                ",684],["T_THROW","throw",684],["T_WHITESPACE"," ",684],["T_NEW","new",684],["T_WHITESPACE"," ",684],["T_STRING","Zend_Amf_Server_Exception",684],"(",["T_CONSTANT_ENCAPSED_STRING","'Invalid request class'",684],")",";",["T_WHITESPACE","\n            ",684],"}",["T_WHITESPACE","\n        ",685],"}",["T_WHITESPACE"," ",686],["T_ELSEIF","elseif",686],["T_WHITESPACE"," ",686],"(","!",["T_VARIABLE","$request",686],["T_WHITESPACE"," ",686],["T_INSTANCEOF","instanceof",686],["T_WHITESPACE"," ",686],["T_STRING","Zend_Amf_Request",686],")",["T_WHITESPACE"," ",686],"{",["T_WHITESPACE","\n            ",686],["T_COMMENT","#require_once 'Zend\/Amf\/Server\/Exception.php';\n",687],["T_WHITESPACE","            ",688],["T_THROW","throw",688],["T_WHITESPACE"," ",688],["T_NEW","new",688],["T_WHITESPACE"," ",688],["T_STRING","Zend_Amf_Server_Exception",688],"(",["T_CONSTANT_ENCAPSED_STRING","'Invalid request object'",688],")",";",["T_WHITESPACE","\n        ",688],"}",["T_WHITESPACE","\n        ",689],["T_VARIABLE","$this",690],["T_OBJECT_OPERATOR","->",690],["T_STRING","_request",690],["T_WHITESPACE"," ",690],"=",["T_WHITESPACE"," ",690],["T_VARIABLE","$request",690],";",["T_WHITESPACE","\n        ",690],["T_RETURN","return",691],["T_WHITESPACE"," ",691],["T_VARIABLE","$this",691],";",["T_WHITESPACE","\n    ",691],"}",["T_WHITESPACE","\n\n    ",692],["T_DOC_COMMENT","\/**\n     * Return currently registered request object\n     *\n     * @return null|Zend_Amf_Request\n     *\/",694],["T_WHITESPACE","\n    ",698],["T_PUBLIC","public",699],["T_WHITESPACE"," ",699],["T_FUNCTION","function",699],["T_WHITESPACE"," ",699],["T_STRING","getRequest",699],"(",")",["T_WHITESPACE","\n    ",699],"{",["T_WHITESPACE","\n        ",700],["T_IF","if",701],["T_WHITESPACE"," ",701],"(",["T_STRING","null",701],["T_WHITESPACE"," ",701],["T_IS_IDENTICAL","===",701],["T_WHITESPACE"," ",701],["T_VARIABLE","$this",701],["T_OBJECT_OPERATOR","->",701],["T_STRING","_request",701],")",["T_WHITESPACE"," ",701],"{",["T_WHITESPACE","\n            ",701],["T_COMMENT","#require_once 'Zend\/Amf\/Request\/Http.php';\n",702],["T_WHITESPACE","            ",703],["T_VARIABLE","$this",703],["T_OBJECT_OPERATOR","->",703],["T_STRING","setRequest",703],"(",["T_NEW","new",703],["T_WHITESPACE"," ",703],["T_STRING","Zend_Amf_Request_Http",703],"(",")",")",";",["T_WHITESPACE","\n        ",703],"}",["T_WHITESPACE","\n\n        ",704],["T_RETURN","return",706],["T_WHITESPACE"," ",706],["T_VARIABLE","$this",706],["T_OBJECT_OPERATOR","->",706],["T_STRING","_request",706],";",["T_WHITESPACE","\n    ",706],"}",["T_WHITESPACE","\n\n    ",707],["T_DOC_COMMENT","\/**\n     * Public access method to private Zend_Amf_Server_Response reference\n     *\n     * @param  string|Zend_Amf_Server_Response $response\n     * @return Zend_Amf_Server\n     *\/",709],["T_WHITESPACE","\n    ",714],["T_PUBLIC","public",715],["T_WHITESPACE"," ",715],["T_FUNCTION","function",715],["T_WHITESPACE"," ",715],["T_STRING","setResponse",715],"(",["T_VARIABLE","$response",715],")",["T_WHITESPACE","\n    ",715],"{",["T_WHITESPACE","\n        ",716],["T_IF","if",717],["T_WHITESPACE"," ",717],"(",["T_STRING","is_string",717],"(",["T_VARIABLE","$response",717],")",["T_WHITESPACE"," ",717],["T_BOOLEAN_AND","&&",717],["T_WHITESPACE"," ",717],["T_STRING","class_exists",717],"(",["T_VARIABLE","$response",717],")",")",["T_WHITESPACE"," ",717],"{",["T_WHITESPACE","\n            ",717],["T_VARIABLE","$response",718],["T_WHITESPACE"," ",718],"=",["T_WHITESPACE"," ",718],["T_NEW","new",718],["T_WHITESPACE"," ",718],["T_VARIABLE","$response",718],"(",")",";",["T_WHITESPACE","\n            ",718],["T_IF","if",719],["T_WHITESPACE"," ",719],"(","!",["T_VARIABLE","$response",719],["T_WHITESPACE"," ",719],["T_INSTANCEOF","instanceof",719],["T_WHITESPACE"," ",719],["T_STRING","Zend_Amf_Response",719],")",["T_WHITESPACE"," ",719],"{",["T_WHITESPACE","\n                ",719],["T_COMMENT","#require_once 'Zend\/Amf\/Server\/Exception.php';\n",720],["T_WHITESPACE","                ",721],["T_THROW","throw",721],["T_WHITESPACE"," ",721],["T_NEW","new",721],["T_WHITESPACE"," ",721],["T_STRING","Zend_Amf_Server_Exception",721],"(",["T_CONSTANT_ENCAPSED_STRING","'Invalid response class'",721],")",";",["T_WHITESPACE","\n            ",721],"}",["T_WHITESPACE","\n        ",722],"}",["T_WHITESPACE"," ",723],["T_ELSEIF","elseif",723],["T_WHITESPACE"," ",723],"(","!",["T_VARIABLE","$response",723],["T_WHITESPACE"," ",723],["T_INSTANCEOF","instanceof",723],["T_WHITESPACE"," ",723],["T_STRING","Zend_Amf_Response",723],")",["T_WHITESPACE"," ",723],"{",["T_WHITESPACE","\n            ",723],["T_COMMENT","#require_once 'Zend\/Amf\/Server\/Exception.php';\n",724],["T_WHITESPACE","            ",725],["T_THROW","throw",725],["T_WHITESPACE"," ",725],["T_NEW","new",725],["T_WHITESPACE"," ",725],["T_STRING","Zend_Amf_Server_Exception",725],"(",["T_CONSTANT_ENCAPSED_STRING","'Invalid response object'",725],")",";",["T_WHITESPACE","\n        ",725],"}",["T_WHITESPACE","\n        ",726],["T_VARIABLE","$this",727],["T_OBJECT_OPERATOR","->",727],["T_STRING","_response",727],["T_WHITESPACE"," ",727],"=",["T_WHITESPACE"," ",727],["T_VARIABLE","$response",727],";",["T_WHITESPACE","\n        ",727],["T_RETURN","return",728],["T_WHITESPACE"," ",728],["T_VARIABLE","$this",728],";",["T_WHITESPACE","\n    ",728],"}",["T_WHITESPACE","\n\n    ",729],["T_DOC_COMMENT","\/**\n     * get a reference to the Zend_Amf_response instance\n     *\n     * @return Zend_Amf_Server_Response\n     *\/",731],["T_WHITESPACE","\n    ",735],["T_PUBLIC","public",736],["T_WHITESPACE"," ",736],["T_FUNCTION","function",736],["T_WHITESPACE"," ",736],["T_STRING","getResponse",736],"(",")",["T_WHITESPACE","\n    ",736],"{",["T_WHITESPACE","\n        ",737],["T_IF","if",738],["T_WHITESPACE"," ",738],"(",["T_STRING","null",738],["T_WHITESPACE"," ",738],["T_IS_IDENTICAL","===",738],["T_WHITESPACE"," ",738],"(",["T_VARIABLE","$response",738],["T_WHITESPACE"," ",738],"=",["T_WHITESPACE"," ",738],["T_VARIABLE","$this",738],["T_OBJECT_OPERATOR","->",738],["T_STRING","_response",738],")",")",["T_WHITESPACE"," ",738],"{",["T_WHITESPACE","\n            ",738],["T_COMMENT","#require_once 'Zend\/Amf\/Response\/Http.php';\n",739],["T_WHITESPACE","            ",740],["T_VARIABLE","$this",740],["T_OBJECT_OPERATOR","->",740],["T_STRING","setResponse",740],"(",["T_NEW","new",740],["T_WHITESPACE"," ",740],["T_STRING","Zend_Amf_Response_Http",740],"(",")",")",";",["T_WHITESPACE","\n        ",740],"}",["T_WHITESPACE","\n        ",741],["T_RETURN","return",742],["T_WHITESPACE"," ",742],["T_VARIABLE","$this",742],["T_OBJECT_OPERATOR","->",742],["T_STRING","_response",742],";",["T_WHITESPACE","\n    ",742],"}",["T_WHITESPACE","\n\n    ",743],["T_DOC_COMMENT","\/**\n     * Attach a class or object to the server\n     *\n     * Class may be either a class name or an instantiated object. Reflection\n     * is done on the class or object to determine the available public\n     * methods, and each is attached to the server as and available method. If\n     * a $namespace has been provided, that namespace is used to prefix\n     * AMF service call.\n     *\n     * @param  string|object $class\n     * @param  string $namespace Optional\n     * @param  mixed $arg Optional arguments to pass to a method\n     * @return Zend_Amf_Server\n     * @throws Zend_Amf_Server_Exception on invalid input\n     *\/",745],["T_WHITESPACE","\n    ",759],["T_PUBLIC","public",760],["T_WHITESPACE"," ",760],["T_FUNCTION","function",760],["T_WHITESPACE"," ",760],["T_STRING","setClass",760],"(",["T_VARIABLE","$class",760],",",["T_WHITESPACE"," ",760],["T_VARIABLE","$namespace",760],["T_WHITESPACE"," ",760],"=",["T_WHITESPACE"," ",760],["T_CONSTANT_ENCAPSED_STRING","''",760],",",["T_WHITESPACE"," ",760],["T_VARIABLE","$argv",760],["T_WHITESPACE"," ",760],"=",["T_WHITESPACE"," ",760],["T_STRING","null",760],")",["T_WHITESPACE","\n    ",760],"{",["T_WHITESPACE","\n        ",761],["T_IF","if",762],["T_WHITESPACE"," ",762],"(",["T_STRING","is_string",762],"(",["T_VARIABLE","$class",762],")",["T_WHITESPACE"," ",762],["T_BOOLEAN_AND","&&",762],["T_WHITESPACE"," ",762],"!",["T_STRING","class_exists",762],"(",["T_VARIABLE","$class",762],")",")","{",["T_WHITESPACE","\n            ",762],["T_COMMENT","#require_once 'Zend\/Amf\/Server\/Exception.php';\n",763],["T_WHITESPACE","            ",764],["T_THROW","throw",764],["T_WHITESPACE"," ",764],["T_NEW","new",764],["T_WHITESPACE"," ",764],["T_STRING","Zend_Amf_Server_Exception",764],"(",["T_CONSTANT_ENCAPSED_STRING","'Invalid method or class'",764],")",";",["T_WHITESPACE","\n        ",764],"}",["T_WHITESPACE"," ",765],["T_ELSEIF","elseif",765],["T_WHITESPACE"," ",765],"(","!",["T_STRING","is_string",765],"(",["T_VARIABLE","$class",765],")",["T_WHITESPACE"," ",765],["T_BOOLEAN_AND","&&",765],["T_WHITESPACE"," ",765],"!",["T_STRING","is_object",765],"(",["T_VARIABLE","$class",765],")",")",["T_WHITESPACE"," ",765],"{",["T_WHITESPACE","\n            ",765],["T_COMMENT","#require_once 'Zend\/Amf\/Server\/Exception.php';\n",766],["T_WHITESPACE","            ",767],["T_THROW","throw",767],["T_WHITESPACE"," ",767],["T_NEW","new",767],["T_WHITESPACE"," ",767],["T_STRING","Zend_Amf_Server_Exception",767],"(",["T_CONSTANT_ENCAPSED_STRING","'Invalid method or class; must be a classname or object'",767],")",";",["T_WHITESPACE","\n        ",767],"}",["T_WHITESPACE","\n\n        ",768],["T_VARIABLE","$args",770],["T_WHITESPACE"," ",770],"=",["T_WHITESPACE"," ",770],["T_STRING","null",770],";",["T_WHITESPACE","\n        ",770],["T_IF","if",771],["T_WHITESPACE"," ",771],"(",["T_LNUMBER","2",771],["T_WHITESPACE"," ",771],"<",["T_WHITESPACE"," ",771],["T_STRING","func_num_args",771],"(",")",")",["T_WHITESPACE"," ",771],"{",["T_WHITESPACE","\n            ",771],["T_VARIABLE","$args",772],["T_WHITESPACE"," ",772],"=",["T_WHITESPACE"," ",772],["T_STRING","array_slice",772],"(",["T_STRING","func_get_args",772],"(",")",",",["T_WHITESPACE"," ",772],["T_LNUMBER","2",772],")",";",["T_WHITESPACE","\n        ",772],"}",["T_WHITESPACE","\n\n        ",773],["T_COMMENT","\/\/ Use the class name as the name space by default.\n",775],["T_WHITESPACE","\n        ",776],["T_IF","if",777],["T_WHITESPACE"," ",777],"(",["T_VARIABLE","$namespace",777],["T_WHITESPACE"," ",777],["T_IS_EQUAL","==",777],["T_WHITESPACE"," ",777],["T_CONSTANT_ENCAPSED_STRING","''",777],")",["T_WHITESPACE"," ",777],"{",["T_WHITESPACE","\n            ",777],["T_VARIABLE","$namespace",778],["T_WHITESPACE"," ",778],"=",["T_WHITESPACE"," ",778],["T_STRING","is_object",778],"(",["T_VARIABLE","$class",778],")",["T_WHITESPACE"," ",778],"?",["T_WHITESPACE"," ",778],["T_STRING","get_class",778],"(",["T_VARIABLE","$class",778],")",["T_WHITESPACE"," ",778],":",["T_WHITESPACE"," ",778],["T_VARIABLE","$class",778],";",["T_WHITESPACE","\n        ",778],"}",["T_WHITESPACE","\n\n        ",779],["T_VARIABLE","$this",781],["T_OBJECT_OPERATOR","->",781],["T_STRING","_classAllowed",781],"[",["T_STRING","is_object",781],"(",["T_VARIABLE","$class",781],")",["T_WHITESPACE"," ",781],"?",["T_WHITESPACE"," ",781],["T_STRING","get_class",781],"(",["T_VARIABLE","$class",781],")",["T_WHITESPACE"," ",781],":",["T_WHITESPACE"," ",781],["T_VARIABLE","$class",781],"]",["T_WHITESPACE"," ",781],"=",["T_WHITESPACE"," ",781],["T_STRING","true",781],";",["T_WHITESPACE","\n\n        ",781],["T_VARIABLE","$this",783],["T_OBJECT_OPERATOR","->",783],["T_STRING","_methods",783],"[","]",["T_WHITESPACE"," ",783],"=",["T_WHITESPACE"," ",783],["T_STRING","Zend_Server_Reflection",783],["T_DOUBLE_COLON","::",783],["T_STRING","reflectClass",783],"(",["T_VARIABLE","$class",783],",",["T_WHITESPACE"," ",783],["T_VARIABLE","$args",783],",",["T_WHITESPACE"," ",783],["T_VARIABLE","$namespace",783],")",";",["T_WHITESPACE","\n        ",783],["T_VARIABLE","$this",784],["T_OBJECT_OPERATOR","->",784],["T_STRING","_buildDispatchTable",784],"(",")",";",["T_WHITESPACE","\n\n        ",784],["T_RETURN","return",786],["T_WHITESPACE"," ",786],["T_VARIABLE","$this",786],";",["T_WHITESPACE","\n    ",786],"}",["T_WHITESPACE","\n\n    ",787],["T_DOC_COMMENT","\/**\n     * Attach a function to the server\n     *\n     * Additional arguments to pass to the function at dispatch may be passed;\n     * any arguments following the namespace will be aggregated and passed at\n     * dispatch time.\n     *\n     * @param  string|array $function Valid callback\n     * @param  string $namespace Optional namespace prefix\n     * @return Zend_Amf_Server\n     * @throws Zend_Amf_Server_Exception\n     *\/",789],["T_WHITESPACE","\n    ",800],["T_PUBLIC","public",801],["T_WHITESPACE"," ",801],["T_FUNCTION","function",801],["T_WHITESPACE"," ",801],["T_STRING","addFunction",801],"(",["T_VARIABLE","$function",801],",",["T_WHITESPACE"," ",801],["T_VARIABLE","$namespace",801],["T_WHITESPACE"," ",801],"=",["T_WHITESPACE"," ",801],["T_CONSTANT_ENCAPSED_STRING","''",801],")",["T_WHITESPACE","\n    ",801],"{",["T_WHITESPACE","\n        ",802],["T_IF","if",803],["T_WHITESPACE"," ",803],"(","!",["T_STRING","is_string",803],"(",["T_VARIABLE","$function",803],")",["T_WHITESPACE"," ",803],["T_BOOLEAN_AND","&&",803],["T_WHITESPACE"," ",803],"!",["T_STRING","is_array",803],"(",["T_VARIABLE","$function",803],")",")",["T_WHITESPACE"," ",803],"{",["T_WHITESPACE","\n            ",803],["T_COMMENT","#require_once 'Zend\/Amf\/Server\/Exception.php';\n",804],["T_WHITESPACE","            ",805],["T_THROW","throw",805],["T_WHITESPACE"," ",805],["T_NEW","new",805],["T_WHITESPACE"," ",805],["T_STRING","Zend_Amf_Server_Exception",805],"(",["T_CONSTANT_ENCAPSED_STRING","'Unable to attach function'",805],")",";",["T_WHITESPACE","\n        ",805],"}",["T_WHITESPACE","\n\n        ",806],["T_VARIABLE","$argv",808],["T_WHITESPACE"," ",808],"=",["T_WHITESPACE"," ",808],["T_STRING","null",808],";",["T_WHITESPACE","\n        ",808],["T_IF","if",809],["T_WHITESPACE"," ",809],"(",["T_LNUMBER","2",809],["T_WHITESPACE"," ",809],"<",["T_WHITESPACE"," ",809],["T_STRING","func_num_args",809],"(",")",")",["T_WHITESPACE"," ",809],"{",["T_WHITESPACE","\n            ",809],["T_VARIABLE","$argv",810],["T_WHITESPACE"," ",810],"=",["T_WHITESPACE"," ",810],["T_STRING","array_slice",810],"(",["T_STRING","func_get_args",810],"(",")",",",["T_WHITESPACE"," ",810],["T_LNUMBER","2",810],")",";",["T_WHITESPACE","\n        ",810],"}",["T_WHITESPACE","\n\n        ",811],["T_VARIABLE","$function",813],["T_WHITESPACE"," ",813],"=",["T_WHITESPACE"," ",813],["T_ARRAY_CAST","(array)",813],["T_WHITESPACE"," ",813],["T_VARIABLE","$function",813],";",["T_WHITESPACE","\n        ",813],["T_FOREACH","foreach",814],["T_WHITESPACE"," ",814],"(",["T_VARIABLE","$function",814],["T_WHITESPACE"," ",814],["T_AS","as",814],["T_WHITESPACE"," ",814],["T_VARIABLE","$func",814],")",["T_WHITESPACE"," ",814],"{",["T_WHITESPACE","\n            ",814],["T_IF","if",815],["T_WHITESPACE"," ",815],"(","!",["T_STRING","is_string",815],"(",["T_VARIABLE","$func",815],")",["T_WHITESPACE"," ",815],["T_BOOLEAN_OR","||",815],["T_WHITESPACE"," ",815],"!",["T_STRING","function_exists",815],"(",["T_VARIABLE","$func",815],")",")",["T_WHITESPACE"," ",815],"{",["T_WHITESPACE","\n                ",815],["T_COMMENT","#require_once 'Zend\/Amf\/Server\/Exception.php';\n",816],["T_WHITESPACE","                ",817],["T_THROW","throw",817],["T_WHITESPACE"," ",817],["T_NEW","new",817],["T_WHITESPACE"," ",817],["T_STRING","Zend_Amf_Server_Exception",817],"(",["T_CONSTANT_ENCAPSED_STRING","'Unable to attach function'",817],")",";",["T_WHITESPACE","\n            ",817],"}",["T_WHITESPACE","\n            ",818],["T_VARIABLE","$this",819],["T_OBJECT_OPERATOR","->",819],["T_STRING","_methods",819],"[","]",["T_WHITESPACE"," ",819],"=",["T_WHITESPACE"," ",819],["T_STRING","Zend_Server_Reflection",819],["T_DOUBLE_COLON","::",819],["T_STRING","reflectFunction",819],"(",["T_VARIABLE","$func",819],",",["T_WHITESPACE"," ",819],["T_VARIABLE","$argv",819],",",["T_WHITESPACE"," ",819],["T_VARIABLE","$namespace",819],")",";",["T_WHITESPACE","\n        ",819],"}",["T_WHITESPACE","\n\n        ",820],["T_VARIABLE","$this",822],["T_OBJECT_OPERATOR","->",822],["T_STRING","_buildDispatchTable",822],"(",")",";",["T_WHITESPACE","\n        ",822],["T_RETURN","return",823],["T_WHITESPACE"," ",823],["T_VARIABLE","$this",823],";",["T_WHITESPACE","\n    ",823],"}",["T_WHITESPACE","\n\n\n    ",824],["T_DOC_COMMENT","\/**\n     * Creates an array of directories in which services can reside.\n     * TODO: add support for prefixes?\n     *\n     * @param string $dir\n     *\/",827],["T_WHITESPACE","\n    ",832],["T_PUBLIC","public",833],["T_WHITESPACE"," ",833],["T_FUNCTION","function",833],["T_WHITESPACE"," ",833],["T_STRING","addDirectory",833],"(",["T_VARIABLE","$dir",833],")",["T_WHITESPACE","\n    ",833],"{",["T_WHITESPACE","\n        ",834],["T_VARIABLE","$this",835],["T_OBJECT_OPERATOR","->",835],["T_STRING","getLoader",835],"(",")",["T_OBJECT_OPERATOR","->",835],["T_STRING","addPrefixPath",835],"(",["T_CONSTANT_ENCAPSED_STRING","\"\"",835],",",["T_WHITESPACE"," ",835],["T_VARIABLE","$dir",835],")",";",["T_WHITESPACE","\n    ",835],"}",["T_WHITESPACE","\n\n    ",836],["T_DOC_COMMENT","\/**\n     * Returns an array of directories that can hold services.\n     *\n     * @return array\n     *\/",838],["T_WHITESPACE","\n    ",842],["T_PUBLIC","public",843],["T_WHITESPACE"," ",843],["T_FUNCTION","function",843],["T_WHITESPACE"," ",843],["T_STRING","getDirectory",843],"(",")",["T_WHITESPACE","\n    ",843],"{",["T_WHITESPACE","\n        ",844],["T_RETURN","return",845],["T_WHITESPACE"," ",845],["T_VARIABLE","$this",845],["T_OBJECT_OPERATOR","->",845],["T_STRING","getLoader",845],"(",")",["T_OBJECT_OPERATOR","->",845],["T_STRING","getPaths",845],"(",["T_CONSTANT_ENCAPSED_STRING","\"\"",845],")",";",["T_WHITESPACE","\n    ",845],"}",["T_WHITESPACE","\n\n    ",846],["T_DOC_COMMENT","\/**\n     * (Re)Build the dispatch table\n     *\n     * The dispatch table consists of a an array of method name =>\n     * Zend_Server_Reflection_Function_Abstract pairs\n     *\n     * @return void\n     *\/",848],["T_WHITESPACE","\n    ",855],["T_PROTECTED","protected",856],["T_WHITESPACE"," ",856],["T_FUNCTION","function",856],["T_WHITESPACE"," ",856],["T_STRING","_buildDispatchTable",856],"(",")",["T_WHITESPACE","\n    ",856],"{",["T_WHITESPACE","\n        ",857],["T_VARIABLE","$table",858],["T_WHITESPACE"," ",858],"=",["T_WHITESPACE"," ",858],["T_ARRAY","array",858],"(",")",";",["T_WHITESPACE","\n        ",858],["T_FOREACH","foreach",859],["T_WHITESPACE"," ",859],"(",["T_VARIABLE","$this",859],["T_OBJECT_OPERATOR","->",859],["T_STRING","_methods",859],["T_WHITESPACE"," ",859],["T_AS","as",859],["T_WHITESPACE"," ",859],["T_VARIABLE","$key",859],["T_WHITESPACE"," ",859],["T_DOUBLE_ARROW","=>",859],["T_WHITESPACE"," ",859],["T_VARIABLE","$dispatchable",859],")",["T_WHITESPACE"," ",859],"{",["T_WHITESPACE","\n            ",859],["T_IF","if",860],["T_WHITESPACE"," ",860],"(",["T_VARIABLE","$dispatchable",860],["T_WHITESPACE"," ",860],["T_INSTANCEOF","instanceof",860],["T_WHITESPACE"," ",860],["T_STRING","Zend_Server_Reflection_Function_Abstract",860],")",["T_WHITESPACE"," ",860],"{",["T_WHITESPACE","\n                ",860],["T_VARIABLE","$ns",861],["T_WHITESPACE","   ",861],"=",["T_WHITESPACE"," ",861],["T_VARIABLE","$dispatchable",861],["T_OBJECT_OPERATOR","->",861],["T_STRING","getNamespace",861],"(",")",";",["T_WHITESPACE","\n                ",861],["T_VARIABLE","$name",862],["T_WHITESPACE"," ",862],"=",["T_WHITESPACE"," ",862],["T_VARIABLE","$dispatchable",862],["T_OBJECT_OPERATOR","->",862],["T_STRING","getName",862],"(",")",";",["T_WHITESPACE","\n                ",862],["T_VARIABLE","$name",863],["T_WHITESPACE"," ",863],"=",["T_WHITESPACE"," ",863],["T_EMPTY","empty",863],"(",["T_VARIABLE","$ns",863],")",["T_WHITESPACE"," ",863],"?",["T_WHITESPACE"," ",863],["T_VARIABLE","$name",863],["T_WHITESPACE"," ",863],":",["T_WHITESPACE"," ",863],["T_VARIABLE","$ns",863],["T_WHITESPACE"," ",863],".",["T_WHITESPACE"," ",863],["T_CONSTANT_ENCAPSED_STRING","'.'",863],["T_WHITESPACE"," ",863],".",["T_WHITESPACE"," ",863],["T_VARIABLE","$name",863],";",["T_WHITESPACE","\n\n                ",863],["T_IF","if",865],["T_WHITESPACE"," ",865],"(",["T_ISSET","isset",865],"(",["T_VARIABLE","$table",865],"[",["T_VARIABLE","$name",865],"]",")",")",["T_WHITESPACE"," ",865],"{",["T_WHITESPACE","\n                    ",865],["T_COMMENT","#require_once 'Zend\/Amf\/Server\/Exception.php';\n",866],["T_WHITESPACE","                    ",867],["T_THROW","throw",867],["T_WHITESPACE"," ",867],["T_NEW","new",867],["T_WHITESPACE"," ",867],["T_STRING","Zend_Amf_Server_Exception",867],"(",["T_CONSTANT_ENCAPSED_STRING","'Duplicate method registered: '",867],["T_WHITESPACE"," ",867],".",["T_WHITESPACE"," ",867],["T_VARIABLE","$name",867],")",";",["T_WHITESPACE","\n                ",867],"}",["T_WHITESPACE","\n                ",868],["T_VARIABLE","$table",869],"[",["T_VARIABLE","$name",869],"]",["T_WHITESPACE"," ",869],"=",["T_WHITESPACE"," ",869],["T_VARIABLE","$dispatchable",869],";",["T_WHITESPACE","\n                ",869],["T_CONTINUE","continue",870],";",["T_WHITESPACE","\n            ",870],"}",["T_WHITESPACE","\n\n            ",871],["T_IF","if",873],["T_WHITESPACE"," ",873],"(",["T_VARIABLE","$dispatchable",873],["T_WHITESPACE"," ",873],["T_INSTANCEOF","instanceof",873],["T_WHITESPACE"," ",873],["T_STRING","Zend_Server_Reflection_Class",873],")",["T_WHITESPACE"," ",873],"{",["T_WHITESPACE","\n                ",873],["T_FOREACH","foreach",874],["T_WHITESPACE"," ",874],"(",["T_VARIABLE","$dispatchable",874],["T_OBJECT_OPERATOR","->",874],["T_STRING","getMethods",874],"(",")",["T_WHITESPACE"," ",874],["T_AS","as",874],["T_WHITESPACE"," ",874],["T_VARIABLE","$method",874],")",["T_WHITESPACE"," ",874],"{",["T_WHITESPACE","\n                    ",874],["T_VARIABLE","$ns",875],["T_WHITESPACE","   ",875],"=",["T_WHITESPACE"," ",875],["T_VARIABLE","$method",875],["T_OBJECT_OPERATOR","->",875],["T_STRING","getNamespace",875],"(",")",";",["T_WHITESPACE","\n                    ",875],["T_VARIABLE","$name",876],["T_WHITESPACE"," ",876],"=",["T_WHITESPACE"," ",876],["T_VARIABLE","$method",876],["T_OBJECT_OPERATOR","->",876],["T_STRING","getName",876],"(",")",";",["T_WHITESPACE","\n                    ",876],["T_VARIABLE","$name",877],["T_WHITESPACE"," ",877],"=",["T_WHITESPACE"," ",877],["T_EMPTY","empty",877],"(",["T_VARIABLE","$ns",877],")",["T_WHITESPACE"," ",877],"?",["T_WHITESPACE"," ",877],["T_VARIABLE","$name",877],["T_WHITESPACE"," ",877],":",["T_WHITESPACE"," ",877],["T_VARIABLE","$ns",877],["T_WHITESPACE"," ",877],".",["T_WHITESPACE"," ",877],["T_CONSTANT_ENCAPSED_STRING","'.'",877],["T_WHITESPACE"," ",877],".",["T_WHITESPACE"," ",877],["T_VARIABLE","$name",877],";",["T_WHITESPACE","\n\n                    ",877],["T_IF","if",879],["T_WHITESPACE"," ",879],"(",["T_ISSET","isset",879],"(",["T_VARIABLE","$table",879],"[",["T_VARIABLE","$name",879],"]",")",")",["T_WHITESPACE"," ",879],"{",["T_WHITESPACE","\n                        ",879],["T_COMMENT","#require_once 'Zend\/Amf\/Server\/Exception.php';\n",880],["T_WHITESPACE","                        ",881],["T_THROW","throw",881],["T_WHITESPACE"," ",881],["T_NEW","new",881],["T_WHITESPACE"," ",881],["T_STRING","Zend_Amf_Server_Exception",881],"(",["T_CONSTANT_ENCAPSED_STRING","'Duplicate method registered: '",881],["T_WHITESPACE"," ",881],".",["T_WHITESPACE"," ",881],["T_VARIABLE","$name",881],")",";",["T_WHITESPACE","\n                    ",881],"}",["T_WHITESPACE","\n                    ",882],["T_VARIABLE","$table",883],"[",["T_VARIABLE","$name",883],"]",["T_WHITESPACE"," ",883],"=",["T_WHITESPACE"," ",883],["T_VARIABLE","$method",883],";",["T_WHITESPACE","\n                    ",883],["T_CONTINUE","continue",884],";",["T_WHITESPACE","\n                ",884],"}",["T_WHITESPACE","\n            ",885],"}",["T_WHITESPACE","\n        ",886],"}",["T_WHITESPACE","\n        ",887],["T_VARIABLE","$this",888],["T_OBJECT_OPERATOR","->",888],["T_STRING","_table",888],["T_WHITESPACE"," ",888],"=",["T_WHITESPACE"," ",888],["T_VARIABLE","$table",888],";",["T_WHITESPACE","\n    ",888],"}",["T_WHITESPACE","\n\n\n\n    ",889],["T_DOC_COMMENT","\/**\n     * Raise a server fault\n     *\n     * Unimplemented\n     *\n     * @param  string|Exception $fault\n     * @return void\n     *\/",893],["T_WHITESPACE","\n    ",900],["T_PUBLIC","public",901],["T_WHITESPACE"," ",901],["T_FUNCTION","function",901],["T_WHITESPACE"," ",901],["T_STRING","fault",901],"(",["T_VARIABLE","$fault",901],["T_WHITESPACE"," ",901],"=",["T_WHITESPACE"," ",901],["T_STRING","null",901],",",["T_WHITESPACE"," ",901],["T_VARIABLE","$code",901],["T_WHITESPACE"," ",901],"=",["T_WHITESPACE"," ",901],["T_LNUMBER","404",901],")",["T_WHITESPACE","\n    ",901],"{",["T_WHITESPACE","\n    ",902],"}",["T_WHITESPACE","\n\n    ",903],["T_DOC_COMMENT","\/**\n     * Returns a list of registered methods\n     *\n     * Returns an array of dispatchables (Zend_Server_Reflection_Function,\n     * _Method, and _Class items).\n     *\n     * @return array\n     *\/",905],["T_WHITESPACE","\n    ",912],["T_PUBLIC","public",913],["T_WHITESPACE"," ",913],["T_FUNCTION","function",913],["T_WHITESPACE"," ",913],["T_STRING","getFunctions",913],"(",")",["T_WHITESPACE","\n    ",913],"{",["T_WHITESPACE","\n        ",914],["T_RETURN","return",915],["T_WHITESPACE"," ",915],["T_VARIABLE","$this",915],["T_OBJECT_OPERATOR","->",915],["T_STRING","_table",915],";",["T_WHITESPACE","\n    ",915],"}",["T_WHITESPACE","\n\n    ",916],["T_DOC_COMMENT","\/**\n     * Set server persistence\n     *\n     * Unimplemented\n     *\n     * @param  mixed $mode\n     * @return void\n     *\/",918],["T_WHITESPACE","\n    ",925],["T_PUBLIC","public",926],["T_WHITESPACE"," ",926],["T_FUNCTION","function",926],["T_WHITESPACE"," ",926],["T_STRING","setPersistence",926],"(",["T_VARIABLE","$mode",926],")",["T_WHITESPACE","\n    ",926],"{",["T_WHITESPACE","\n    ",927],"}",["T_WHITESPACE","\n\n    ",928],["T_DOC_COMMENT","\/**\n     * Load server definition\n     *\n     * Unimplemented\n     *\n     * @param  array $definition\n     * @return void\n     *\/",930],["T_WHITESPACE","\n    ",937],["T_PUBLIC","public",938],["T_WHITESPACE"," ",938],["T_FUNCTION","function",938],["T_WHITESPACE"," ",938],["T_STRING","loadFunctions",938],"(",["T_VARIABLE","$definition",938],")",["T_WHITESPACE","\n    ",938],"{",["T_WHITESPACE","\n    ",939],"}",["T_WHITESPACE","\n\n    ",940],["T_DOC_COMMENT","\/**\n     * Map ActionScript classes to PHP classes\n     *\n     * @param  string $asClass\n     * @param  string $phpClass\n     * @return Zend_Amf_Server\n     *\/",942],["T_WHITESPACE","\n    ",948],["T_PUBLIC","public",949],["T_WHITESPACE"," ",949],["T_FUNCTION","function",949],["T_WHITESPACE"," ",949],["T_STRING","setClassMap",949],"(",["T_VARIABLE","$asClass",949],",",["T_WHITESPACE"," ",949],["T_VARIABLE","$phpClass",949],")",["T_WHITESPACE","\n    ",949],"{",["T_WHITESPACE","\n        ",950],["T_COMMENT","#require_once 'Zend\/Amf\/Parse\/TypeLoader.php';\n",951],["T_WHITESPACE","        ",952],["T_STRING","Zend_Amf_Parse_TypeLoader",952],["T_DOUBLE_COLON","::",952],["T_STRING","setMapping",952],"(",["T_VARIABLE","$asClass",952],",",["T_WHITESPACE"," ",952],["T_VARIABLE","$phpClass",952],")",";",["T_WHITESPACE","\n        ",952],["T_RETURN","return",953],["T_WHITESPACE"," ",953],["T_VARIABLE","$this",953],";",["T_WHITESPACE","\n    ",953],"}",["T_WHITESPACE","\n\n    ",954],["T_DOC_COMMENT","\/**\n     * List all available methods\n     *\n     * Returns an array of method names.\n     *\n     * @return array\n     *\/",956],["T_WHITESPACE","\n    ",962],["T_PUBLIC","public",963],["T_WHITESPACE"," ",963],["T_FUNCTION","function",963],["T_WHITESPACE"," ",963],["T_STRING","listMethods",963],"(",")",["T_WHITESPACE","\n    ",963],"{",["T_WHITESPACE","\n        ",964],["T_RETURN","return",965],["T_WHITESPACE"," ",965],["T_STRING","array_keys",965],"(",["T_VARIABLE","$this",965],["T_OBJECT_OPERATOR","->",965],["T_STRING","_table",965],")",";",["T_WHITESPACE","\n    ",965],"}",["T_WHITESPACE","\n\n    ",966],["T_DOC_COMMENT","\/**\n     * Cast parameters\n     *\n     * Takes the provided parameters from the request, and attempts to cast them\n     * to objects, if the prototype defines any as explicit object types\n     * \n     * @param  Reflection $reflectionMethod \n     * @param  array $params \n     * @return array\n     *\/",968],["T_WHITESPACE","\n    ",977],["T_PROTECTED","protected",978],["T_WHITESPACE"," ",978],["T_FUNCTION","function",978],["T_WHITESPACE"," ",978],["T_STRING","_castParameters",978],"(",["T_VARIABLE","$reflectionMethod",978],",",["T_WHITESPACE"," ",978],["T_ARRAY","array",978],["T_WHITESPACE"," ",978],["T_VARIABLE","$params",978],")",["T_WHITESPACE","\n    ",978],"{",["T_WHITESPACE","\n        ",979],["T_VARIABLE","$prototypes",980],["T_WHITESPACE"," ",980],"=",["T_WHITESPACE"," ",980],["T_VARIABLE","$reflectionMethod",980],["T_OBJECT_OPERATOR","->",980],["T_STRING","getPrototypes",980],"(",")",";",["T_WHITESPACE","\n        ",980],["T_VARIABLE","$nonObjectTypes",981],["T_WHITESPACE"," ",981],"=",["T_WHITESPACE"," ",981],["T_ARRAY","array",981],"(",["T_WHITESPACE","\n            ",981],["T_CONSTANT_ENCAPSED_STRING","'null'",982],",",["T_WHITESPACE","\n            ",982],["T_CONSTANT_ENCAPSED_STRING","'mixed'",983],",",["T_WHITESPACE","\n            ",983],["T_CONSTANT_ENCAPSED_STRING","'void'",984],",",["T_WHITESPACE","\n            ",984],["T_CONSTANT_ENCAPSED_STRING","'unknown'",985],",",["T_WHITESPACE","\n            ",985],["T_CONSTANT_ENCAPSED_STRING","'bool'",986],",",["T_WHITESPACE","\n            ",986],["T_CONSTANT_ENCAPSED_STRING","'boolean'",987],",",["T_WHITESPACE","\n            ",987],["T_CONSTANT_ENCAPSED_STRING","'number'",988],",",["T_WHITESPACE","\n            ",988],["T_CONSTANT_ENCAPSED_STRING","'int'",989],",",["T_WHITESPACE","\n            ",989],["T_CONSTANT_ENCAPSED_STRING","'integer'",990],",",["T_WHITESPACE","\n            ",990],["T_CONSTANT_ENCAPSED_STRING","'double'",991],",",["T_WHITESPACE","\n            ",991],["T_CONSTANT_ENCAPSED_STRING","'float'",992],",",["T_WHITESPACE","\n            ",992],["T_CONSTANT_ENCAPSED_STRING","'string'",993],",",["T_WHITESPACE","\n            ",993],["T_CONSTANT_ENCAPSED_STRING","'array'",994],",",["T_WHITESPACE","\n            ",994],["T_CONSTANT_ENCAPSED_STRING","'object'",995],",",["T_WHITESPACE","\n            ",995],["T_CONSTANT_ENCAPSED_STRING","'stdclass'",996],",",["T_WHITESPACE","\n        ",996],")",";",["T_WHITESPACE","\n        ",997],["T_VARIABLE","$types",998],["T_WHITESPACE","      ",998],"=",["T_WHITESPACE"," ",998],["T_ARRAY","array",998],"(",")",";",["T_WHITESPACE","\n        ",998],["T_FOREACH","foreach",999],["T_WHITESPACE"," ",999],"(",["T_VARIABLE","$prototypes",999],["T_WHITESPACE"," ",999],["T_AS","as",999],["T_WHITESPACE"," ",999],["T_VARIABLE","$prototype",999],")",["T_WHITESPACE"," ",999],"{",["T_WHITESPACE","\n            ",999],["T_FOREACH","foreach",1000],["T_WHITESPACE"," ",1000],"(",["T_VARIABLE","$prototype",1000],["T_OBJECT_OPERATOR","->",1000],["T_STRING","getParameters",1000],"(",")",["T_WHITESPACE"," ",1000],["T_AS","as",1000],["T_WHITESPACE"," ",1000],["T_VARIABLE","$parameter",1000],")",["T_WHITESPACE"," ",1000],"{",["T_WHITESPACE","\n                ",1000],["T_VARIABLE","$type",1001],["T_WHITESPACE"," ",1001],"=",["T_WHITESPACE"," ",1001],["T_VARIABLE","$parameter",1001],["T_OBJECT_OPERATOR","->",1001],["T_STRING","getType",1001],"(",")",";",["T_WHITESPACE","\n                ",1001],["T_IF","if",1002],["T_WHITESPACE"," ",1002],"(",["T_STRING","in_array",1002],"(",["T_STRING","strtolower",1002],"(",["T_VARIABLE","$type",1002],")",",",["T_WHITESPACE"," ",1002],["T_VARIABLE","$nonObjectTypes",1002],")",")",["T_WHITESPACE"," ",1002],"{",["T_WHITESPACE","\n                    ",1002],["T_CONTINUE","continue",1003],";",["T_WHITESPACE","\n                ",1003],"}",["T_WHITESPACE","\n                ",1004],["T_VARIABLE","$position",1005],["T_WHITESPACE"," ",1005],"=",["T_WHITESPACE"," ",1005],["T_VARIABLE","$parameter",1005],["T_OBJECT_OPERATOR","->",1005],["T_STRING","getPosition",1005],"(",")",";",["T_WHITESPACE","\n                ",1005],["T_VARIABLE","$types",1006],"[",["T_VARIABLE","$position",1006],"]",["T_WHITESPACE"," ",1006],"=",["T_WHITESPACE"," ",1006],["T_VARIABLE","$type",1006],";",["T_WHITESPACE","\n            ",1006],"}",["T_WHITESPACE","\n        ",1007],"}",["T_WHITESPACE","\n\n        ",1008],["T_IF","if",1010],["T_WHITESPACE"," ",1010],"(",["T_EMPTY","empty",1010],"(",["T_VARIABLE","$types",1010],")",")",["T_WHITESPACE"," ",1010],"{",["T_WHITESPACE","\n            ",1010],["T_RETURN","return",1011],["T_WHITESPACE"," ",1011],["T_VARIABLE","$params",1011],";",["T_WHITESPACE","\n        ",1011],"}",["T_WHITESPACE","\n\n        ",1012],["T_FOREACH","foreach",1014],["T_WHITESPACE"," ",1014],"(",["T_VARIABLE","$params",1014],["T_WHITESPACE"," ",1014],["T_AS","as",1014],["T_WHITESPACE"," ",1014],["T_VARIABLE","$position",1014],["T_WHITESPACE"," ",1014],["T_DOUBLE_ARROW","=>",1014],["T_WHITESPACE"," ",1014],["T_VARIABLE","$value",1014],")",["T_WHITESPACE"," ",1014],"{",["T_WHITESPACE","\n            ",1014],["T_IF","if",1015],["T_WHITESPACE"," ",1015],"(","!",["T_ISSET","isset",1015],"(",["T_VARIABLE","$types",1015],"[",["T_VARIABLE","$position",1015],"]",")",")",["T_WHITESPACE"," ",1015],"{",["T_WHITESPACE","\n                ",1015],["T_COMMENT","\/\/ No specific type to cast to? done\n",1016],["T_WHITESPACE","                ",1017],["T_CONTINUE","continue",1017],";",["T_WHITESPACE","\n            ",1017],"}",["T_WHITESPACE","\n\n            ",1018],["T_VARIABLE","$type",1020],["T_WHITESPACE"," ",1020],"=",["T_WHITESPACE"," ",1020],["T_VARIABLE","$types",1020],"[",["T_VARIABLE","$position",1020],"]",";",["T_WHITESPACE","\n\n            ",1020],["T_IF","if",1022],["T_WHITESPACE"," ",1022],"(","!",["T_STRING","class_exists",1022],"(",["T_VARIABLE","$type",1022],")",")",["T_WHITESPACE"," ",1022],"{",["T_WHITESPACE","\n                ",1022],["T_COMMENT","\/\/ Not a class, apparently. done\n",1023],["T_WHITESPACE","                ",1024],["T_CONTINUE","continue",1024],";",["T_WHITESPACE","\n            ",1024],"}",["T_WHITESPACE","\n\n            ",1025],["T_IF","if",1027],["T_WHITESPACE"," ",1027],"(",["T_VARIABLE","$value",1027],["T_WHITESPACE"," ",1027],["T_INSTANCEOF","instanceof",1027],["T_WHITESPACE"," ",1027],["T_VARIABLE","$type",1027],")",["T_WHITESPACE"," ",1027],"{",["T_WHITESPACE","\n                ",1027],["T_COMMENT","\/\/ Already of the right type? done\n",1028],["T_WHITESPACE","                ",1029],["T_CONTINUE","continue",1029],";",["T_WHITESPACE","\n            ",1029],"}",["T_WHITESPACE","\n\n            ",1030],["T_IF","if",1032],["T_WHITESPACE"," ",1032],"(","!",["T_STRING","is_array",1032],"(",["T_VARIABLE","$value",1032],")",["T_WHITESPACE"," ",1032],["T_BOOLEAN_AND","&&",1032],["T_WHITESPACE"," ",1032],"!",["T_STRING","is_object",1032],"(",["T_VARIABLE","$value",1032],")",")",["T_WHITESPACE"," ",1032],"{",["T_WHITESPACE","\n                ",1032],["T_COMMENT","\/\/ Can't cast scalars to objects easily; done\n",1033],["T_WHITESPACE","                ",1034],["T_CONTINUE","continue",1034],";",["T_WHITESPACE","\n            ",1034],"}",["T_WHITESPACE","\n\n            ",1035],["T_COMMENT","\/\/ Create instance, and loop through value to set\n",1037],["T_WHITESPACE","            ",1038],["T_VARIABLE","$object",1038],["T_WHITESPACE"," ",1038],"=",["T_WHITESPACE"," ",1038],["T_NEW","new",1038],["T_WHITESPACE"," ",1038],["T_VARIABLE","$type",1038],";",["T_WHITESPACE","\n            ",1038],["T_FOREACH","foreach",1039],["T_WHITESPACE"," ",1039],"(",["T_VARIABLE","$value",1039],["T_WHITESPACE"," ",1039],["T_AS","as",1039],["T_WHITESPACE"," ",1039],["T_VARIABLE","$property",1039],["T_WHITESPACE"," ",1039],["T_DOUBLE_ARROW","=>",1039],["T_WHITESPACE"," ",1039],["T_VARIABLE","$defined",1039],")",["T_WHITESPACE"," ",1039],"{",["T_WHITESPACE","\n                ",1039],["T_VARIABLE","$object",1040],["T_OBJECT_OPERATOR","->",1040],"{",["T_VARIABLE","$property",1040],"}",["T_WHITESPACE"," ",1040],"=",["T_WHITESPACE"," ",1040],["T_VARIABLE","$defined",1040],";",["T_WHITESPACE","\n            ",1040],"}",["T_WHITESPACE","\n\n            ",1041],["T_VARIABLE","$params",1043],"[",["T_VARIABLE","$position",1043],"]",["T_WHITESPACE"," ",1043],"=",["T_WHITESPACE"," ",1043],["T_VARIABLE","$object",1043],";",["T_WHITESPACE","\n        ",1043],"}",["T_WHITESPACE","\n\n        ",1044],["T_RETURN","return",1046],["T_WHITESPACE"," ",1046],["T_VARIABLE","$params",1046],";",["T_WHITESPACE","\n    ",1046],"}",["T_WHITESPACE","\n",1047],"}",["T_WHITESPACE","\n",1048]]
[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Zend Framework\n *\n * LICENSE\n *\n * This source file is subject to the new BSD license that is bundled\n * with this package in the file LICENSE.txt.\n * It is also available through the world-wide-web at this URL:\n * http:\/\/framework.zend.com\/license\/new-bsd\n * If you did not receive a copy of the license and are unable to\n * obtain it through the world-wide-web, please send an email\n * to license@zend.com so we can send you a copy immediately.\n *\n * @category   Zend\n * @package    Zend_Amf\n * @copyright  Copyright (c) 2005-2015 Zend Technologies USA Inc. (http:\/\/www.zend.com)\n * @license    http:\/\/framework.zend.com\/license\/new-bsd     New BSD License\n * @version    $Id$\n *\/",2],["T_WHITESPACE","\n\n",20],["T_DOC_COMMENT","\/** @see Zend_Amf_Auth_Abstract *\/",22],["T_WHITESPACE","\n",22],["T_COMMENT","#require_once 'Zend\/Amf\/Auth\/Abstract.php';\n",23],["T_WHITESPACE","\n",24],["T_DOC_COMMENT","\/** @see Zend_Acl *\/",25],["T_WHITESPACE","\n",25],["T_COMMENT","#require_once 'Zend\/Acl.php';\n",26],["T_WHITESPACE","\n",27],["T_DOC_COMMENT","\/** @see Zend_Auth_Result *\/",28],["T_WHITESPACE","\n",28],["T_COMMENT","#require_once 'Zend\/Auth\/Result.php';\n",29],["T_WHITESPACE","\n",30],["T_DOC_COMMENT","\/** @see Zend_Xml_Security *\/",31],["T_WHITESPACE","\n",31],["T_COMMENT","#require_once 'Zend\/Xml\/Security.php';\n",32],["T_WHITESPACE","\n",33],["T_DOC_COMMENT","\/**\n * This class implements authentication against XML file with roles for Flex Builder.\n *\n * @package    Zend_Amf\n * @subpackage Adobe\n * @copyright  Copyright (c) 2005-2015 Zend Technologies USA Inc. (http:\/\/www.zend.com)\n * @license    http:\/\/framework.zend.com\/license\/new-bsd     New BSD License\n *\/",34],["T_WHITESPACE","\n",41],["T_CLASS","class",42],["T_WHITESPACE"," ",42],["T_STRING","Zend_Amf_Adobe_Auth",42],["T_WHITESPACE"," ",42],["T_EXTENDS","extends",42],["T_WHITESPACE"," ",42],["T_STRING","Zend_Amf_Auth_Abstract",42],["T_WHITESPACE","\n",42],"{",["T_WHITESPACE","\n\n    ",43],["T_DOC_COMMENT","\/**\n     * ACL for authorization\n     *\n     * @var Zend_Acl\n     *\/",45],["T_WHITESPACE","\n    ",49],["T_PROTECTED","protected",50],["T_WHITESPACE"," ",50],["T_VARIABLE","$_acl",50],";",["T_WHITESPACE","\n\n    ",50],["T_DOC_COMMENT","\/**\n     * Username\/password array\n     *\n     * @var array\n     *\/",52],["T_WHITESPACE","\n    ",56],["T_PROTECTED","protected",57],["T_WHITESPACE"," ",57],["T_VARIABLE","$_users",57],["T_WHITESPACE"," ",57],"=",["T_WHITESPACE"," ",57],["T_ARRAY","array",57],"(",")",";",["T_WHITESPACE","\n\n    ",57],["T_DOC_COMMENT","\/**\n     * Create auth adapter\n     *\n     * @param string $rolefile File containing XML with users and roles\n     *\/",59],["T_WHITESPACE","\n    ",63],["T_PUBLIC","public",64],["T_WHITESPACE"," ",64],["T_FUNCTION","function",64],["T_WHITESPACE"," ",64],["T_STRING","__construct",64],"(",["T_VARIABLE","$rolefile",64],")",["T_WHITESPACE","\n    ",64],"{",["T_WHITESPACE","\n        ",65],["T_VARIABLE","$this",66],["T_OBJECT_OPERATOR","->",66],["T_STRING","_acl",66],["T_WHITESPACE"," ",66],"=",["T_WHITESPACE"," ",66],["T_NEW","new",66],["T_WHITESPACE"," ",66],["T_STRING","Zend_Acl",66],"(",")",";",["T_WHITESPACE","\n        ",66],["T_VARIABLE","$xml",67],["T_WHITESPACE"," ",67],"=",["T_WHITESPACE"," ",67],["T_STRING","Zend_Xml_Security",67],["T_DOUBLE_COLON","::",67],["T_STRING","scanFile",67],"(",["T_VARIABLE","$rolefile",67],")",";",["T_WHITESPACE","\n",67],["T_COMMENT","\/*\nRoles file format:\n <roles>\n   <role id=\u00e2\u0080\u009dadmin\u00e2\u0080\u009d>\n        <user name=\u00e2\u0080\u009duser1\u00e2\u0080\u009d password=\u00e2\u0080\u009dpwd\u00e2\u0080\u009d\/>\n    <\/role>\n   <role id=\u00e2\u0080\u009dhr\u00e2\u0080\u009d>\n        <user name=\u00e2\u0080\u009duser2\u00e2\u0080\u009d password=\u00e2\u0080\u009dpwd2\u00e2\u0080\u009d\/>\n    <\/role>\n<\/roles>\n*\/",68],["T_WHITESPACE","\n        ",78],["T_FOREACH","foreach",79],"(",["T_VARIABLE","$xml",79],["T_OBJECT_OPERATOR","->",79],["T_STRING","role",79],["T_WHITESPACE"," ",79],["T_AS","as",79],["T_WHITESPACE"," ",79],["T_VARIABLE","$role",79],")",["T_WHITESPACE"," ",79],"{",["T_WHITESPACE","\n            ",79],["T_VARIABLE","$this",80],["T_OBJECT_OPERATOR","->",80],["T_STRING","_acl",80],["T_OBJECT_OPERATOR","->",80],["T_STRING","addRole",80],"(",["T_NEW","new",80],["T_WHITESPACE"," ",80],["T_STRING","Zend_Acl_Role",80],"(",["T_STRING_CAST","(string)",80],["T_VARIABLE","$role",80],"[",["T_CONSTANT_ENCAPSED_STRING","\"id\"",80],"]",")",")",";",["T_WHITESPACE","\n            ",80],["T_FOREACH","foreach",81],"(",["T_VARIABLE","$role",81],["T_OBJECT_OPERATOR","->",81],["T_STRING","user",81],["T_WHITESPACE"," ",81],["T_AS","as",81],["T_WHITESPACE"," ",81],["T_VARIABLE","$user",81],")",["T_WHITESPACE"," ",81],"{",["T_WHITESPACE","\n                ",81],["T_VARIABLE","$this",82],["T_OBJECT_OPERATOR","->",82],["T_STRING","_users",82],"[",["T_STRING_CAST","(string)",82],["T_VARIABLE","$user",82],"[",["T_CONSTANT_ENCAPSED_STRING","\"name\"",82],"]","]",["T_WHITESPACE"," ",82],"=",["T_WHITESPACE"," ",82],["T_ARRAY","array",82],"(",["T_CONSTANT_ENCAPSED_STRING","\"password\"",82],["T_WHITESPACE"," ",82],["T_DOUBLE_ARROW","=>",82],["T_WHITESPACE"," ",82],["T_STRING_CAST","(string)",82],["T_VARIABLE","$user",82],"[",["T_CONSTANT_ENCAPSED_STRING","\"password\"",82],"]",",",["T_WHITESPACE","\n                                                             ",82],["T_CONSTANT_ENCAPSED_STRING","\"role\"",83],["T_WHITESPACE"," ",83],["T_DOUBLE_ARROW","=>",83],["T_WHITESPACE"," ",83],["T_STRING_CAST","(string)",83],["T_VARIABLE","$role",83],"[",["T_CONSTANT_ENCAPSED_STRING","\"id\"",83],"]",")",";",["T_WHITESPACE","\n            ",83],"}",["T_WHITESPACE","\n        ",84],"}",["T_WHITESPACE","\n    ",85],"}",["T_WHITESPACE","\n\n    ",86],["T_DOC_COMMENT","\/**\n     * Get ACL with roles from XML file\n     *\n     * @return Zend_Acl\n     *\/",88],["T_WHITESPACE","\n    ",92],["T_PUBLIC","public",93],["T_WHITESPACE"," ",93],["T_FUNCTION","function",93],["T_WHITESPACE"," ",93],["T_STRING","getAcl",93],"(",")",["T_WHITESPACE","\n    ",93],"{",["T_WHITESPACE","\n        ",94],["T_RETURN","return",95],["T_WHITESPACE"," ",95],["T_VARIABLE","$this",95],["T_OBJECT_OPERATOR","->",95],["T_STRING","_acl",95],";",["T_WHITESPACE","\n    ",95],"}",["T_WHITESPACE","\n\n    ",96],["T_DOC_COMMENT","\/**\n     * Perform authentication\n     *\n     * @throws Zend_Auth_Adapter_Exception\n     * @return Zend_Auth_Result\n     * @see Zend_Auth_Adapter_Interface#authenticate()\n     *\/",98],["T_WHITESPACE","\n    ",104],["T_PUBLIC","public",105],["T_WHITESPACE"," ",105],["T_FUNCTION","function",105],["T_WHITESPACE"," ",105],["T_STRING","authenticate",105],"(",")",["T_WHITESPACE","\n    ",105],"{",["T_WHITESPACE","\n        ",106],["T_IF","if",107],["T_WHITESPACE"," ",107],"(",["T_EMPTY","empty",107],"(",["T_VARIABLE","$this",107],["T_OBJECT_OPERATOR","->",107],["T_STRING","_username",107],")",["T_WHITESPACE"," ",107],["T_BOOLEAN_OR","||",107],["T_WHITESPACE","\n            ",107],["T_EMPTY","empty",108],"(",["T_VARIABLE","$this",108],["T_OBJECT_OPERATOR","->",108],["T_STRING","_password",108],")",")",["T_WHITESPACE"," ",108],"{",["T_WHITESPACE","\n            ",108],["T_DOC_COMMENT","\/**\n             * @see Zend_Auth_Adapter_Exception\n             *\/",109],["T_WHITESPACE","\n            ",111],["T_COMMENT","#require_once 'Zend\/Auth\/Adapter\/Exception.php';\n",112],["T_WHITESPACE","            ",113],["T_THROW","throw",113],["T_WHITESPACE"," ",113],["T_NEW","new",113],["T_WHITESPACE"," ",113],["T_STRING","Zend_Auth_Adapter_Exception",113],"(",["T_CONSTANT_ENCAPSED_STRING","'Username\/password should be set'",113],")",";",["T_WHITESPACE","\n        ",113],"}",["T_WHITESPACE","\n\n        ",114],["T_IF","if",116],"(","!",["T_ISSET","isset",116],"(",["T_VARIABLE","$this",116],["T_OBJECT_OPERATOR","->",116],["T_STRING","_users",116],"[",["T_VARIABLE","$this",116],["T_OBJECT_OPERATOR","->",116],["T_STRING","_username",116],"]",")",")",["T_WHITESPACE"," ",116],"{",["T_WHITESPACE","\n            ",116],["T_RETURN","return",117],["T_WHITESPACE"," ",117],["T_NEW","new",117],["T_WHITESPACE"," ",117],["T_STRING","Zend_Auth_Result",117],"(",["T_STRING","Zend_Auth_Result",117],["T_DOUBLE_COLON","::",117],["T_STRING","FAILURE_IDENTITY_NOT_FOUND",117],",",["T_WHITESPACE","\n                ",117],["T_STRING","null",118],",",["T_WHITESPACE","\n                ",118],["T_ARRAY","array",119],"(",["T_CONSTANT_ENCAPSED_STRING","'Username not found'",119],")",["T_WHITESPACE","\n                ",119],")",";",["T_WHITESPACE","\n        ",120],"}",["T_WHITESPACE","\n\n        ",121],["T_VARIABLE","$user",123],["T_WHITESPACE"," ",123],"=",["T_WHITESPACE"," ",123],["T_VARIABLE","$this",123],["T_OBJECT_OPERATOR","->",123],["T_STRING","_users",123],"[",["T_VARIABLE","$this",123],["T_OBJECT_OPERATOR","->",123],["T_STRING","_username",123],"]",";",["T_WHITESPACE","\n        ",123],["T_IF","if",124],"(",["T_VARIABLE","$user",124],"[",["T_CONSTANT_ENCAPSED_STRING","\"password\"",124],"]",["T_WHITESPACE"," ",124],["T_IS_NOT_EQUAL","!=",124],["T_WHITESPACE"," ",124],["T_VARIABLE","$this",124],["T_OBJECT_OPERATOR","->",124],["T_STRING","_password",124],")",["T_WHITESPACE"," ",124],"{",["T_WHITESPACE","\n            ",124],["T_RETURN","return",125],["T_WHITESPACE"," ",125],["T_NEW","new",125],["T_WHITESPACE"," ",125],["T_STRING","Zend_Auth_Result",125],"(",["T_STRING","Zend_Auth_Result",125],["T_DOUBLE_COLON","::",125],["T_STRING","FAILURE_CREDENTIAL_INVALID",125],",",["T_WHITESPACE","\n                ",125],["T_STRING","null",126],",",["T_WHITESPACE","\n                ",126],["T_ARRAY","array",127],"(",["T_CONSTANT_ENCAPSED_STRING","'Authentication failed'",127],")",["T_WHITESPACE","\n                ",127],")",";",["T_WHITESPACE","\n        ",128],"}",["T_WHITESPACE","\n\n        ",129],["T_VARIABLE","$id",131],["T_WHITESPACE"," ",131],"=",["T_WHITESPACE"," ",131],["T_NEW","new",131],["T_WHITESPACE"," ",131],["T_STRING","stdClass",131],"(",")",";",["T_WHITESPACE","\n        ",131],["T_VARIABLE","$id",132],["T_OBJECT_OPERATOR","->",132],["T_STRING","role",132],["T_WHITESPACE"," ",132],"=",["T_WHITESPACE"," ",132],["T_VARIABLE","$user",132],"[",["T_CONSTANT_ENCAPSED_STRING","\"role\"",132],"]",";",["T_WHITESPACE","\n        ",132],["T_VARIABLE","$id",133],["T_OBJECT_OPERATOR","->",133],["T_STRING","name",133],["T_WHITESPACE"," ",133],"=",["T_WHITESPACE"," ",133],["T_VARIABLE","$this",133],["T_OBJECT_OPERATOR","->",133],["T_STRING","_username",133],";",["T_WHITESPACE","\n        ",133],["T_RETURN","return",134],["T_WHITESPACE"," ",134],["T_NEW","new",134],["T_WHITESPACE"," ",134],["T_STRING","Zend_Auth_Result",134],"(",["T_STRING","Zend_Auth_Result",134],["T_DOUBLE_COLON","::",134],["T_STRING","SUCCESS",134],",",["T_WHITESPACE"," ",134],["T_VARIABLE","$id",134],")",";",["T_WHITESPACE","\n    ",134],"}",["T_WHITESPACE","\n",135],"}",["T_WHITESPACE","\n",136]]
[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Zend Framework\n *\n * LICENSE\n *\n * This source file is subject to the new BSD license that is bundled\n * with this package in the file LICENSE.txt.\n * It is also available through the world-wide-web at this URL:\n * http:\/\/framework.zend.com\/license\/new-bsd\n * If you did not receive a copy of the license and are unable to\n * obtain it through the world-wide-web, please send an email\n * to license@zend.com so we can send you a copy immediately.\n *\n * @category   Zend\n * @package    Zend_Mail\n * @subpackage Transport\n * @copyright  Copyright (c) 2005-2015 Zend Technologies USA Inc. (http:\/\/www.zend.com)\n * @license    http:\/\/framework.zend.com\/license\/new-bsd     New BSD License\n * @version    $Id$\n *\/",2],["T_WHITESPACE","\n\n\n",21],["T_DOC_COMMENT","\/**\n * @see Zend_Mime\n *\/",24],["T_WHITESPACE","\n",26],["T_COMMENT","#require_once 'Zend\/Mime.php';\n",27],["T_WHITESPACE","\n\n",28],["T_DOC_COMMENT","\/**\n * Abstract for sending eMails through different\n * ways of transport\n *\n * @category   Zend\n * @package    Zend_Mail\n * @subpackage Transport\n * @copyright  Copyright (c) 2005-2015 Zend Technologies USA Inc. (http:\/\/www.zend.com)\n * @license    http:\/\/framework.zend.com\/license\/new-bsd     New BSD License\n *\/",30],["T_WHITESPACE","\n",39],["T_ABSTRACT","abstract",40],["T_WHITESPACE"," ",40],["T_CLASS","class",40],["T_WHITESPACE"," ",40],["T_STRING","Zend_Mail_Transport_Abstract",40],["T_WHITESPACE","\n",40],"{",["T_WHITESPACE","\n    ",41],["T_DOC_COMMENT","\/**\n     * Mail body\n     * @var string\n     * @access public\n     *\/",42],["T_WHITESPACE","\n    ",46],["T_PUBLIC","public",47],["T_WHITESPACE"," ",47],["T_VARIABLE","$body",47],["T_WHITESPACE"," ",47],"=",["T_WHITESPACE"," ",47],["T_CONSTANT_ENCAPSED_STRING","''",47],";",["T_WHITESPACE","\n\n    ",47],["T_DOC_COMMENT","\/**\n     * MIME boundary\n     * @var string\n     * @access public\n     *\/",49],["T_WHITESPACE","\n    ",53],["T_PUBLIC","public",54],["T_WHITESPACE"," ",54],["T_VARIABLE","$boundary",54],["T_WHITESPACE"," ",54],"=",["T_WHITESPACE"," ",54],["T_CONSTANT_ENCAPSED_STRING","''",54],";",["T_WHITESPACE","\n\n    ",54],["T_DOC_COMMENT","\/**\n     * Mail header string\n     * @var string\n     * @access public\n     *\/",56],["T_WHITESPACE","\n    ",60],["T_PUBLIC","public",61],["T_WHITESPACE"," ",61],["T_VARIABLE","$header",61],["T_WHITESPACE"," ",61],"=",["T_WHITESPACE"," ",61],["T_CONSTANT_ENCAPSED_STRING","''",61],";",["T_WHITESPACE","\n\n    ",61],["T_DOC_COMMENT","\/**\n     * Array of message headers\n     * @var array\n     * @access protected\n     *\/",63],["T_WHITESPACE","\n    ",67],["T_PROTECTED","protected",68],["T_WHITESPACE"," ",68],["T_VARIABLE","$_headers",68],["T_WHITESPACE"," ",68],"=",["T_WHITESPACE"," ",68],["T_ARRAY","array",68],"(",")",";",["T_WHITESPACE","\n\n    ",68],["T_DOC_COMMENT","\/**\n     * Message is a multipart message\n     * @var boolean\n     * @access protected\n     *\/",70],["T_WHITESPACE","\n    ",74],["T_PROTECTED","protected",75],["T_WHITESPACE"," ",75],["T_VARIABLE","$_isMultipart",75],["T_WHITESPACE"," ",75],"=",["T_WHITESPACE"," ",75],["T_STRING","false",75],";",["T_WHITESPACE","\n\n    ",75],["T_DOC_COMMENT","\/**\n     * Zend_Mail object\n     * @var false|Zend_Mail\n     * @access protected\n     *\/",77],["T_WHITESPACE","\n    ",81],["T_PROTECTED","protected",82],["T_WHITESPACE"," ",82],["T_VARIABLE","$_mail",82],["T_WHITESPACE"," ",82],"=",["T_WHITESPACE"," ",82],["T_STRING","false",82],";",["T_WHITESPACE","\n\n    ",82],["T_DOC_COMMENT","\/**\n     * Array of message parts\n     * @var array\n     * @access protected\n     *\/",84],["T_WHITESPACE","\n    ",88],["T_PROTECTED","protected",89],["T_WHITESPACE"," ",89],["T_VARIABLE","$_parts",89],["T_WHITESPACE"," ",89],"=",["T_WHITESPACE"," ",89],["T_ARRAY","array",89],"(",")",";",["T_WHITESPACE","\n\n    ",89],["T_DOC_COMMENT","\/**\n     * Recipients string\n     * @var string\n     * @access public\n     *\/",91],["T_WHITESPACE","\n    ",95],["T_PUBLIC","public",96],["T_WHITESPACE"," ",96],["T_VARIABLE","$recipients",96],["T_WHITESPACE"," ",96],"=",["T_WHITESPACE"," ",96],["T_CONSTANT_ENCAPSED_STRING","''",96],";",["T_WHITESPACE","\n\n    ",96],["T_DOC_COMMENT","\/**\n     * EOL character string used by transport\n     * @var string\n     * @access public\n     *\/",98],["T_WHITESPACE","\n    ",102],["T_PUBLIC","public",103],["T_WHITESPACE"," ",103],["T_VARIABLE","$EOL",103],["T_WHITESPACE"," ",103],"=",["T_WHITESPACE"," ",103],["T_CONSTANT_ENCAPSED_STRING","\"\\r\\n\"",103],";",["T_WHITESPACE","\n\n    ",103],["T_DOC_COMMENT","\/**\n     * Send an email independent from the used transport\n     *\n     * The requisite information for the email will be found in the following\n     * properties:\n     *\n     * - {@link $recipients} - list of recipients (string)\n     * - {@link $header} - message header\n     * - {@link $body} - message body\n     *\/",105],["T_WHITESPACE","\n    ",114],["T_ABSTRACT","abstract",115],["T_WHITESPACE"," ",115],["T_PROTECTED","protected",115],["T_WHITESPACE"," ",115],["T_FUNCTION","function",115],["T_WHITESPACE"," ",115],["T_STRING","_sendMail",115],"(",")",";",["T_WHITESPACE","\n\n    ",115],["T_DOC_COMMENT","\/**\n     * Return all mail headers as an array\n     *\n     * If a boundary is given, a multipart header is generated with a\n     * Content-Type of either multipart\/alternative or multipart\/mixed depending\n     * on the mail parts present in the {@link $_mail Zend_Mail object} present.\n     *\n     * @param string $boundary\n     * @return array\n     *\/",117],["T_WHITESPACE","\n    ",126],["T_PROTECTED","protected",127],["T_WHITESPACE"," ",127],["T_FUNCTION","function",127],["T_WHITESPACE"," ",127],["T_STRING","_getHeaders",127],"(",["T_VARIABLE","$boundary",127],")",["T_WHITESPACE","\n    ",127],"{",["T_WHITESPACE","\n        ",128],["T_IF","if",129],["T_WHITESPACE"," ",129],"(",["T_STRING","null",129],["T_WHITESPACE"," ",129],["T_IS_NOT_IDENTICAL","!==",129],["T_WHITESPACE"," ",129],["T_VARIABLE","$boundary",129],")",["T_WHITESPACE"," ",129],"{",["T_WHITESPACE","\n            ",129],["T_COMMENT","\/\/ Build multipart mail\n",130],["T_WHITESPACE","            ",131],["T_VARIABLE","$type",131],["T_WHITESPACE"," ",131],"=",["T_WHITESPACE"," ",131],["T_VARIABLE","$this",131],["T_OBJECT_OPERATOR","->",131],["T_STRING","_mail",131],["T_OBJECT_OPERATOR","->",131],["T_STRING","getType",131],"(",")",";",["T_WHITESPACE","\n            ",131],["T_IF","if",132],["T_WHITESPACE"," ",132],"(","!",["T_VARIABLE","$type",132],")",["T_WHITESPACE"," ",132],"{",["T_WHITESPACE","\n                ",132],["T_IF","if",133],["T_WHITESPACE"," ",133],"(",["T_VARIABLE","$this",133],["T_OBJECT_OPERATOR","->",133],["T_STRING","_mail",133],["T_OBJECT_OPERATOR","->",133],["T_STRING","hasAttachments",133],")",["T_WHITESPACE"," ",133],"{",["T_WHITESPACE","\n                    ",133],["T_VARIABLE","$type",134],["T_WHITESPACE"," ",134],"=",["T_WHITESPACE"," ",134],["T_STRING","Zend_Mime",134],["T_DOUBLE_COLON","::",134],["T_STRING","MULTIPART_MIXED",134],";",["T_WHITESPACE","\n                ",134],"}",["T_WHITESPACE"," ",135],["T_ELSEIF","elseif",135],["T_WHITESPACE"," ",135],"(",["T_VARIABLE","$this",135],["T_OBJECT_OPERATOR","->",135],["T_STRING","_mail",135],["T_OBJECT_OPERATOR","->",135],["T_STRING","getBodyText",135],"(",")",["T_WHITESPACE"," ",135],["T_BOOLEAN_AND","&&",135],["T_WHITESPACE"," ",135],["T_VARIABLE","$this",135],["T_OBJECT_OPERATOR","->",135],["T_STRING","_mail",135],["T_OBJECT_OPERATOR","->",135],["T_STRING","getBodyHtml",135],"(",")",")",["T_WHITESPACE"," ",135],"{",["T_WHITESPACE","\n                    ",135],["T_VARIABLE","$type",136],["T_WHITESPACE"," ",136],"=",["T_WHITESPACE"," ",136],["T_STRING","Zend_Mime",136],["T_DOUBLE_COLON","::",136],["T_STRING","MULTIPART_ALTERNATIVE",136],";",["T_WHITESPACE","\n                ",136],"}",["T_WHITESPACE"," ",137],["T_ELSE","else",137],["T_WHITESPACE"," ",137],"{",["T_WHITESPACE","\n                    ",137],["T_VARIABLE","$type",138],["T_WHITESPACE"," ",138],"=",["T_WHITESPACE"," ",138],["T_STRING","Zend_Mime",138],["T_DOUBLE_COLON","::",138],["T_STRING","MULTIPART_MIXED",138],";",["T_WHITESPACE","\n                ",138],"}",["T_WHITESPACE","\n            ",139],"}",["T_WHITESPACE","\n\n            ",140],["T_VARIABLE","$this",142],["T_OBJECT_OPERATOR","->",142],["T_STRING","_headers",142],"[",["T_CONSTANT_ENCAPSED_STRING","'Content-Type'",142],"]",["T_WHITESPACE"," ",142],"=",["T_WHITESPACE"," ",142],["T_ARRAY","array",142],"(",["T_WHITESPACE","\n                ",142],["T_VARIABLE","$type",143],["T_WHITESPACE"," ",143],".",["T_WHITESPACE"," ",143],["T_CONSTANT_ENCAPSED_STRING","';'",143],["T_WHITESPACE","\n                ",143],".",["T_WHITESPACE"," ",144],["T_VARIABLE","$this",144],["T_OBJECT_OPERATOR","->",144],["T_STRING","EOL",144],["T_WHITESPACE","\n                ",144],".",["T_WHITESPACE"," ",145],["T_CONSTANT_ENCAPSED_STRING","\" \"",145],["T_WHITESPACE"," ",145],".",["T_WHITESPACE"," ",145],["T_CONSTANT_ENCAPSED_STRING","'boundary=\"'",145],["T_WHITESPACE"," ",145],".",["T_WHITESPACE"," ",145],["T_VARIABLE","$boundary",145],["T_WHITESPACE"," ",145],".",["T_WHITESPACE"," ",145],["T_CONSTANT_ENCAPSED_STRING","'\"'",145],["T_WHITESPACE","\n            ",145],")",";",["T_WHITESPACE","\n            ",146],["T_VARIABLE","$this",147],["T_OBJECT_OPERATOR","->",147],["T_STRING","boundary",147],["T_WHITESPACE"," ",147],"=",["T_WHITESPACE"," ",147],["T_VARIABLE","$boundary",147],";",["T_WHITESPACE","\n        ",147],"}",["T_WHITESPACE","\n\n        ",148],["T_VARIABLE","$this",150],["T_OBJECT_OPERATOR","->",150],["T_STRING","_headers",150],"[",["T_CONSTANT_ENCAPSED_STRING","'MIME-Version'",150],"]",["T_WHITESPACE"," ",150],"=",["T_WHITESPACE"," ",150],["T_ARRAY","array",150],"(",["T_CONSTANT_ENCAPSED_STRING","'1.0'",150],")",";",["T_WHITESPACE","\n\n        ",150],["T_RETURN","return",152],["T_WHITESPACE"," ",152],["T_VARIABLE","$this",152],["T_OBJECT_OPERATOR","->",152],["T_STRING","_headers",152],";",["T_WHITESPACE","\n    ",152],"}",["T_WHITESPACE","\n\n    ",153],["T_DOC_COMMENT","\/**\n     * Prepend header name to header value\n     *\n     * @param string $item\n     * @param string $key\n     * @param string $prefix\n     * @static\n     * @access protected\n     * @return void\n     *\/",155],["T_WHITESPACE","\n    ",164],["T_PROTECTED","protected",165],["T_WHITESPACE"," ",165],["T_STATIC","static",165],["T_WHITESPACE"," ",165],["T_FUNCTION","function",165],["T_WHITESPACE"," ",165],["T_STRING","_formatHeader",165],"(","&",["T_VARIABLE","$item",165],",",["T_WHITESPACE"," ",165],["T_VARIABLE","$key",165],",",["T_WHITESPACE"," ",165],["T_VARIABLE","$prefix",165],")",["T_WHITESPACE","\n    ",165],"{",["T_WHITESPACE","\n        ",166],["T_VARIABLE","$item",167],["T_WHITESPACE"," ",167],"=",["T_WHITESPACE"," ",167],["T_VARIABLE","$prefix",167],["T_WHITESPACE"," ",167],".",["T_WHITESPACE"," ",167],["T_CONSTANT_ENCAPSED_STRING","': '",167],["T_WHITESPACE"," ",167],".",["T_WHITESPACE"," ",167],["T_VARIABLE","$item",167],";",["T_WHITESPACE","\n    ",167],"}",["T_WHITESPACE","\n\n    ",168],["T_DOC_COMMENT","\/**\n     * Prepare header string for use in transport\n     *\n     * Prepares and generates {@link $header} based on the headers provided.\n     *\n     * @param mixed $headers\n     * @access protected\n     * @return void\n     * @throws Zend_Mail_Transport_Exception if any header lines exceed 998\n     * characters\n     *\/",170],["T_WHITESPACE","\n    ",180],["T_PROTECTED","protected",181],["T_WHITESPACE"," ",181],["T_FUNCTION","function",181],["T_WHITESPACE"," ",181],["T_STRING","_prepareHeaders",181],"(",["T_VARIABLE","$headers",181],")",["T_WHITESPACE","\n    ",181],"{",["T_WHITESPACE","\n        ",182],["T_IF","if",183],["T_WHITESPACE"," ",183],"(","!",["T_VARIABLE","$this",183],["T_OBJECT_OPERATOR","->",183],["T_STRING","_mail",183],")",["T_WHITESPACE"," ",183],"{",["T_WHITESPACE","\n            ",183],["T_DOC_COMMENT","\/**\n             * @see Zend_Mail_Transport_Exception\n             *\/",184],["T_WHITESPACE","\n            ",186],["T_COMMENT","#require_once 'Zend\/Mail\/Transport\/Exception.php';\n",187],["T_WHITESPACE","            ",188],["T_THROW","throw",188],["T_WHITESPACE"," ",188],["T_NEW","new",188],["T_WHITESPACE"," ",188],["T_STRING","Zend_Mail_Transport_Exception",188],"(",["T_CONSTANT_ENCAPSED_STRING","'Missing Zend_Mail object in _mail property'",188],")",";",["T_WHITESPACE","\n        ",188],"}",["T_WHITESPACE","\n\n        ",189],["T_VARIABLE","$this",191],["T_OBJECT_OPERATOR","->",191],["T_STRING","header",191],["T_WHITESPACE"," ",191],"=",["T_WHITESPACE"," ",191],["T_CONSTANT_ENCAPSED_STRING","''",191],";",["T_WHITESPACE","\n\n        ",191],["T_FOREACH","foreach",193],["T_WHITESPACE"," ",193],"(",["T_VARIABLE","$headers",193],["T_WHITESPACE"," ",193],["T_AS","as",193],["T_WHITESPACE"," ",193],["T_VARIABLE","$header",193],["T_WHITESPACE"," ",193],["T_DOUBLE_ARROW","=>",193],["T_WHITESPACE"," ",193],["T_VARIABLE","$content",193],")",["T_WHITESPACE"," ",193],"{",["T_WHITESPACE","\n            ",193],["T_IF","if",194],["T_WHITESPACE"," ",194],"(",["T_ISSET","isset",194],"(",["T_VARIABLE","$content",194],"[",["T_CONSTANT_ENCAPSED_STRING","'append'",194],"]",")",")",["T_WHITESPACE"," ",194],"{",["T_WHITESPACE","\n                ",194],["T_UNSET","unset",195],"(",["T_VARIABLE","$content",195],"[",["T_CONSTANT_ENCAPSED_STRING","'append'",195],"]",")",";",["T_WHITESPACE","\n                ",195],["T_VARIABLE","$value",196],["T_WHITESPACE"," ",196],"=",["T_WHITESPACE"," ",196],["T_STRING","implode",196],"(",["T_CONSTANT_ENCAPSED_STRING","','",196],["T_WHITESPACE"," ",196],".",["T_WHITESPACE"," ",196],["T_VARIABLE","$this",196],["T_OBJECT_OPERATOR","->",196],["T_STRING","EOL",196],["T_WHITESPACE"," ",196],".",["T_WHITESPACE"," ",196],["T_CONSTANT_ENCAPSED_STRING","' '",196],",",["T_WHITESPACE"," ",196],["T_VARIABLE","$content",196],")",";",["T_WHITESPACE","\n                ",196],["T_VARIABLE","$this",197],["T_OBJECT_OPERATOR","->",197],["T_STRING","header",197],["T_WHITESPACE"," ",197],["T_CONCAT_EQUAL",".=",197],["T_WHITESPACE"," ",197],["T_VARIABLE","$header",197],["T_WHITESPACE"," ",197],".",["T_WHITESPACE"," ",197],["T_CONSTANT_ENCAPSED_STRING","': '",197],["T_WHITESPACE"," ",197],".",["T_WHITESPACE"," ",197],["T_VARIABLE","$value",197],["T_WHITESPACE"," ",197],".",["T_WHITESPACE"," ",197],["T_VARIABLE","$this",197],["T_OBJECT_OPERATOR","->",197],["T_STRING","EOL",197],";",["T_WHITESPACE","\n            ",197],"}",["T_WHITESPACE"," ",198],["T_ELSE","else",198],["T_WHITESPACE"," ",198],"{",["T_WHITESPACE","\n                ",198],["T_STRING","array_walk",199],"(",["T_VARIABLE","$content",199],",",["T_WHITESPACE"," ",199],["T_ARRAY","array",199],"(",["T_STRING","get_class",199],"(",["T_VARIABLE","$this",199],")",",",["T_WHITESPACE"," ",199],["T_CONSTANT_ENCAPSED_STRING","'_formatHeader'",199],")",",",["T_WHITESPACE"," ",199],["T_VARIABLE","$header",199],")",";",["T_WHITESPACE","\n                ",199],["T_VARIABLE","$this",200],["T_OBJECT_OPERATOR","->",200],["T_STRING","header",200],["T_WHITESPACE"," ",200],["T_CONCAT_EQUAL",".=",200],["T_WHITESPACE"," ",200],["T_STRING","implode",200],"(",["T_VARIABLE","$this",200],["T_OBJECT_OPERATOR","->",200],["T_STRING","EOL",200],",",["T_WHITESPACE"," ",200],["T_VARIABLE","$content",200],")",["T_WHITESPACE"," ",200],".",["T_WHITESPACE"," ",200],["T_VARIABLE","$this",200],["T_OBJECT_OPERATOR","->",200],["T_STRING","EOL",200],";",["T_WHITESPACE","\n            ",200],"}",["T_WHITESPACE","\n        ",201],"}",["T_WHITESPACE","\n\n        ",202],["T_COMMENT","\/\/ Sanity check on headers -- should not be > 998 characters\n",204],["T_WHITESPACE","        ",205],["T_VARIABLE","$sane",205],["T_WHITESPACE"," ",205],"=",["T_WHITESPACE"," ",205],["T_STRING","true",205],";",["T_WHITESPACE","\n        ",205],["T_FOREACH","foreach",206],["T_WHITESPACE"," ",206],"(",["T_STRING","explode",206],"(",["T_VARIABLE","$this",206],["T_OBJECT_OPERATOR","->",206],["T_STRING","EOL",206],",",["T_WHITESPACE"," ",206],["T_VARIABLE","$this",206],["T_OBJECT_OPERATOR","->",206],["T_STRING","header",206],")",["T_WHITESPACE"," ",206],["T_AS","as",206],["T_WHITESPACE"," ",206],["T_VARIABLE","$line",206],")",["T_WHITESPACE"," ",206],"{",["T_WHITESPACE","\n            ",206],["T_IF","if",207],["T_WHITESPACE"," ",207],"(",["T_STRING","strlen",207],"(",["T_STRING","trim",207],"(",["T_VARIABLE","$line",207],")",")",["T_WHITESPACE"," ",207],">",["T_WHITESPACE"," ",207],["T_LNUMBER","998",207],")",["T_WHITESPACE"," ",207],"{",["T_WHITESPACE","\n                ",207],["T_VARIABLE","$sane",208],["T_WHITESPACE"," ",208],"=",["T_WHITESPACE"," ",208],["T_STRING","false",208],";",["T_WHITESPACE","\n                ",208],["T_BREAK","break",209],";",["T_WHITESPACE","\n            ",209],"}",["T_WHITESPACE","\n        ",210],"}",["T_WHITESPACE","\n        ",211],["T_IF","if",212],["T_WHITESPACE"," ",212],"(","!",["T_VARIABLE","$sane",212],")",["T_WHITESPACE"," ",212],"{",["T_WHITESPACE","\n            ",212],["T_DOC_COMMENT","\/**\n             * @see Zend_Mail_Transport_Exception\n             *\/",213],["T_WHITESPACE","\n            ",215],["T_COMMENT","#require_once 'Zend\/Mail\/Transport\/Exception.php';\n",216],["T_WHITESPACE","            ",217],["T_THROW","throw",217],["T_WHITESPACE"," ",217],["T_NEW","new",217],["T_WHITESPACE"," ",217],["T_STRING","Zend_Mail_Exception",217],"(",["T_CONSTANT_ENCAPSED_STRING","'At least one mail header line is too long'",217],")",";",["T_WHITESPACE","\n        ",217],"}",["T_WHITESPACE","\n    ",218],"}",["T_WHITESPACE","\n\n    ",219],["T_DOC_COMMENT","\/**\n     * Generate MIME compliant message from the current configuration\n     *\n     * If both a text and HTML body are present, generates a\n     * multipart\/alternative Zend_Mime_Part containing the headers and contents\n     * of each. Otherwise, uses whichever of the text or HTML parts present.\n     *\n     * The content part is then prepended to the list of Zend_Mime_Parts for\n     * this message.\n     *\n     * @return void\n     *\/",221],["T_WHITESPACE","\n    ",232],["T_PROTECTED","protected",233],["T_WHITESPACE"," ",233],["T_FUNCTION","function",233],["T_WHITESPACE"," ",233],["T_STRING","_buildBody",233],"(",")",["T_WHITESPACE","\n    ",233],"{",["T_WHITESPACE","\n        ",234],["T_IF","if",235],["T_WHITESPACE"," ",235],"(","(",["T_VARIABLE","$text",235],["T_WHITESPACE"," ",235],"=",["T_WHITESPACE"," ",235],["T_VARIABLE","$this",235],["T_OBJECT_OPERATOR","->",235],["T_STRING","_mail",235],["T_OBJECT_OPERATOR","->",235],["T_STRING","getBodyText",235],"(",")",")",["T_WHITESPACE","\n            ",235],["T_BOOLEAN_AND","&&",236],["T_WHITESPACE"," ",236],"(",["T_VARIABLE","$html",236],["T_WHITESPACE"," ",236],"=",["T_WHITESPACE"," ",236],["T_VARIABLE","$this",236],["T_OBJECT_OPERATOR","->",236],["T_STRING","_mail",236],["T_OBJECT_OPERATOR","->",236],["T_STRING","getBodyHtml",236],"(",")",")",")",["T_WHITESPACE","\n        ",236],"{",["T_WHITESPACE","\n            ",237],["T_COMMENT","\/\/ Generate unique boundary for multipart\/alternative\n",238],["T_WHITESPACE","            ",239],["T_VARIABLE","$mime",239],["T_WHITESPACE"," ",239],"=",["T_WHITESPACE"," ",239],["T_NEW","new",239],["T_WHITESPACE"," ",239],["T_STRING","Zend_Mime",239],"(",["T_STRING","null",239],")",";",["T_WHITESPACE","\n            ",239],["T_VARIABLE","$boundaryLine",240],["T_WHITESPACE"," ",240],"=",["T_WHITESPACE"," ",240],["T_VARIABLE","$mime",240],["T_OBJECT_OPERATOR","->",240],["T_STRING","boundaryLine",240],"(",["T_VARIABLE","$this",240],["T_OBJECT_OPERATOR","->",240],["T_STRING","EOL",240],")",";",["T_WHITESPACE","\n            ",240],["T_VARIABLE","$boundaryEnd",241],["T_WHITESPACE","  ",241],"=",["T_WHITESPACE"," ",241],["T_VARIABLE","$mime",241],["T_OBJECT_OPERATOR","->",241],["T_STRING","mimeEnd",241],"(",["T_VARIABLE","$this",241],["T_OBJECT_OPERATOR","->",241],["T_STRING","EOL",241],")",";",["T_WHITESPACE","\n\n            ",241],["T_VARIABLE","$text",243],["T_OBJECT_OPERATOR","->",243],["T_STRING","disposition",243],["T_WHITESPACE"," ",243],"=",["T_WHITESPACE"," ",243],["T_STRING","false",243],";",["T_WHITESPACE","\n            ",243],["T_VARIABLE","$html",244],["T_OBJECT_OPERATOR","->",244],["T_STRING","disposition",244],["T_WHITESPACE"," ",244],"=",["T_WHITESPACE"," ",244],["T_STRING","false",244],";",["T_WHITESPACE","\n\n            ",244],["T_VARIABLE","$body",246],["T_WHITESPACE"," ",246],"=",["T_WHITESPACE"," ",246],["T_VARIABLE","$boundaryLine",246],["T_WHITESPACE","\n                  ",246],".",["T_WHITESPACE"," ",247],["T_VARIABLE","$text",247],["T_OBJECT_OPERATOR","->",247],["T_STRING","getHeaders",247],"(",["T_VARIABLE","$this",247],["T_OBJECT_OPERATOR","->",247],["T_STRING","EOL",247],")",["T_WHITESPACE","\n                  ",247],".",["T_WHITESPACE"," ",248],["T_VARIABLE","$this",248],["T_OBJECT_OPERATOR","->",248],["T_STRING","EOL",248],["T_WHITESPACE","\n                  ",248],".",["T_WHITESPACE"," ",249],["T_VARIABLE","$text",249],["T_OBJECT_OPERATOR","->",249],["T_STRING","getContent",249],"(",["T_VARIABLE","$this",249],["T_OBJECT_OPERATOR","->",249],["T_STRING","EOL",249],")",["T_WHITESPACE","\n                  ",249],".",["T_WHITESPACE"," ",250],["T_VARIABLE","$this",250],["T_OBJECT_OPERATOR","->",250],["T_STRING","EOL",250],["T_WHITESPACE","\n                  ",250],".",["T_WHITESPACE"," ",251],["T_VARIABLE","$boundaryLine",251],["T_WHITESPACE","\n                  ",251],".",["T_WHITESPACE"," ",252],["T_VARIABLE","$html",252],["T_OBJECT_OPERATOR","->",252],["T_STRING","getHeaders",252],"(",["T_VARIABLE","$this",252],["T_OBJECT_OPERATOR","->",252],["T_STRING","EOL",252],")",["T_WHITESPACE","\n                  ",252],".",["T_WHITESPACE"," ",253],["T_VARIABLE","$this",253],["T_OBJECT_OPERATOR","->",253],["T_STRING","EOL",253],["T_WHITESPACE","\n                  ",253],".",["T_WHITESPACE"," ",254],["T_VARIABLE","$html",254],["T_OBJECT_OPERATOR","->",254],["T_STRING","getContent",254],"(",["T_VARIABLE","$this",254],["T_OBJECT_OPERATOR","->",254],["T_STRING","EOL",254],")",["T_WHITESPACE","\n                  ",254],".",["T_WHITESPACE"," ",255],["T_VARIABLE","$this",255],["T_OBJECT_OPERATOR","->",255],["T_STRING","EOL",255],["T_WHITESPACE","\n                  ",255],".",["T_WHITESPACE"," ",256],["T_VARIABLE","$boundaryEnd",256],";",["T_WHITESPACE","\n\n            ",256],["T_VARIABLE","$mp",258],["T_WHITESPACE","           ",258],"=",["T_WHITESPACE"," ",258],["T_NEW","new",258],["T_WHITESPACE"," ",258],["T_STRING","Zend_Mime_Part",258],"(",["T_VARIABLE","$body",258],")",";",["T_WHITESPACE","\n            ",258],["T_VARIABLE","$mp",259],["T_OBJECT_OPERATOR","->",259],["T_STRING","type",259],["T_WHITESPACE","     ",259],"=",["T_WHITESPACE"," ",259],["T_STRING","Zend_Mime",259],["T_DOUBLE_COLON","::",259],["T_STRING","MULTIPART_ALTERNATIVE",259],";",["T_WHITESPACE","\n            ",259],["T_VARIABLE","$mp",260],["T_OBJECT_OPERATOR","->",260],["T_STRING","boundary",260],["T_WHITESPACE"," ",260],"=",["T_WHITESPACE"," ",260],["T_VARIABLE","$mime",260],["T_OBJECT_OPERATOR","->",260],["T_STRING","boundary",260],"(",")",";",["T_WHITESPACE","\n\n            ",260],["T_VARIABLE","$this",262],["T_OBJECT_OPERATOR","->",262],["T_STRING","_isMultipart",262],["T_WHITESPACE"," ",262],"=",["T_WHITESPACE"," ",262],["T_STRING","true",262],";",["T_WHITESPACE","\n\n            ",262],["T_COMMENT","\/\/ Ensure first part contains text alternatives\n",264],["T_WHITESPACE","            ",265],["T_STRING","array_unshift",265],"(",["T_VARIABLE","$this",265],["T_OBJECT_OPERATOR","->",265],["T_STRING","_parts",265],",",["T_WHITESPACE"," ",265],["T_VARIABLE","$mp",265],")",";",["T_WHITESPACE","\n\n            ",265],["T_COMMENT","\/\/ Get headers\n",267],["T_WHITESPACE","            ",268],["T_VARIABLE","$this",268],["T_OBJECT_OPERATOR","->",268],["T_STRING","_headers",268],["T_WHITESPACE"," ",268],"=",["T_WHITESPACE"," ",268],["T_VARIABLE","$this",268],["T_OBJECT_OPERATOR","->",268],["T_STRING","_mail",268],["T_OBJECT_OPERATOR","->",268],["T_STRING","getHeaders",268],"(",")",";",["T_WHITESPACE","\n            ",268],["T_RETURN","return",269],";",["T_WHITESPACE","\n        ",269],"}",["T_WHITESPACE","\n\n        ",270],["T_COMMENT","\/\/ If not multipart, then get the body\n",272],["T_WHITESPACE","        ",273],["T_IF","if",273],["T_WHITESPACE"," ",273],"(",["T_STRING","false",273],["T_WHITESPACE"," ",273],["T_IS_NOT_IDENTICAL","!==",273],["T_WHITESPACE"," ",273],"(",["T_VARIABLE","$body",273],["T_WHITESPACE"," ",273],"=",["T_WHITESPACE"," ",273],["T_VARIABLE","$this",273],["T_OBJECT_OPERATOR","->",273],["T_STRING","_mail",273],["T_OBJECT_OPERATOR","->",273],["T_STRING","getBodyHtml",273],"(",")",")",")",["T_WHITESPACE"," ",273],"{",["T_WHITESPACE","\n            ",273],["T_STRING","array_unshift",274],"(",["T_VARIABLE","$this",274],["T_OBJECT_OPERATOR","->",274],["T_STRING","_parts",274],",",["T_WHITESPACE"," ",274],["T_VARIABLE","$body",274],")",";",["T_WHITESPACE","\n        ",274],"}",["T_WHITESPACE"," ",275],["T_ELSEIF","elseif",275],["T_WHITESPACE"," ",275],"(",["T_STRING","false",275],["T_WHITESPACE"," ",275],["T_IS_NOT_IDENTICAL","!==",275],["T_WHITESPACE"," ",275],"(",["T_VARIABLE","$body",275],["T_WHITESPACE"," ",275],"=",["T_WHITESPACE"," ",275],["T_VARIABLE","$this",275],["T_OBJECT_OPERATOR","->",275],["T_STRING","_mail",275],["T_OBJECT_OPERATOR","->",275],["T_STRING","getBodyText",275],"(",")",")",")",["T_WHITESPACE"," ",275],"{",["T_WHITESPACE","\n            ",275],["T_STRING","array_unshift",276],"(",["T_VARIABLE","$this",276],["T_OBJECT_OPERATOR","->",276],["T_STRING","_parts",276],",",["T_WHITESPACE"," ",276],["T_VARIABLE","$body",276],")",";",["T_WHITESPACE","\n        ",276],"}",["T_WHITESPACE","\n\n        ",277],["T_IF","if",279],["T_WHITESPACE"," ",279],"(","!",["T_VARIABLE","$body",279],")",["T_WHITESPACE"," ",279],"{",["T_WHITESPACE","\n            ",279],["T_DOC_COMMENT","\/**\n             * @see Zend_Mail_Transport_Exception\n             *\/",280],["T_WHITESPACE","\n            ",282],["T_COMMENT","#require_once 'Zend\/Mail\/Transport\/Exception.php';\n",283],["T_WHITESPACE","            ",284],["T_THROW","throw",284],["T_WHITESPACE"," ",284],["T_NEW","new",284],["T_WHITESPACE"," ",284],["T_STRING","Zend_Mail_Transport_Exception",284],"(",["T_CONSTANT_ENCAPSED_STRING","'No body specified'",284],")",";",["T_WHITESPACE","\n        ",284],"}",["T_WHITESPACE","\n\n        ",285],["T_COMMENT","\/\/ Get headers\n",287],["T_WHITESPACE","        ",288],["T_VARIABLE","$this",288],["T_OBJECT_OPERATOR","->",288],["T_STRING","_headers",288],["T_WHITESPACE"," ",288],"=",["T_WHITESPACE"," ",288],["T_VARIABLE","$this",288],["T_OBJECT_OPERATOR","->",288],["T_STRING","_mail",288],["T_OBJECT_OPERATOR","->",288],["T_STRING","getHeaders",288],"(",")",";",["T_WHITESPACE","\n        ",288],["T_VARIABLE","$headers",289],["T_WHITESPACE"," ",289],"=",["T_WHITESPACE"," ",289],["T_VARIABLE","$body",289],["T_OBJECT_OPERATOR","->",289],["T_STRING","getHeadersArray",289],"(",["T_VARIABLE","$this",289],["T_OBJECT_OPERATOR","->",289],["T_STRING","EOL",289],")",";",["T_WHITESPACE","\n        ",289],["T_FOREACH","foreach",290],["T_WHITESPACE"," ",290],"(",["T_VARIABLE","$headers",290],["T_WHITESPACE"," ",290],["T_AS","as",290],["T_WHITESPACE"," ",290],["T_VARIABLE","$header",290],")",["T_WHITESPACE"," ",290],"{",["T_WHITESPACE","\n            ",290],["T_COMMENT","\/\/ Headers in Zend_Mime_Part are kept as arrays with two elements, a\n",291],["T_WHITESPACE","            ",292],["T_COMMENT","\/\/ key and a value\n",292],["T_WHITESPACE","            ",293],["T_VARIABLE","$this",293],["T_OBJECT_OPERATOR","->",293],["T_STRING","_headers",293],"[",["T_VARIABLE","$header",293],"[",["T_LNUMBER","0",293],"]","]",["T_WHITESPACE"," ",293],"=",["T_WHITESPACE"," ",293],["T_ARRAY","array",293],"(",["T_VARIABLE","$header",293],"[",["T_LNUMBER","1",293],"]",")",";",["T_WHITESPACE","\n        ",293],"}",["T_WHITESPACE","\n    ",294],"}",["T_WHITESPACE","\n\n    ",295],["T_DOC_COMMENT","\/**\n     * Send a mail using this transport\n     *\n     * @param  Zend_Mail $mail\n     * @access public\n     * @return void\n     * @throws Zend_Mail_Transport_Exception if mail is empty\n     *\/",297],["T_WHITESPACE","\n    ",304],["T_PUBLIC","public",305],["T_WHITESPACE"," ",305],["T_FUNCTION","function",305],["T_WHITESPACE"," ",305],["T_STRING","send",305],"(",["T_STRING","Zend_Mail",305],["T_WHITESPACE"," ",305],["T_VARIABLE","$mail",305],")",["T_WHITESPACE","\n    ",305],"{",["T_WHITESPACE","\n        ",306],["T_VARIABLE","$this",307],["T_OBJECT_OPERATOR","->",307],["T_STRING","_isMultipart",307],["T_WHITESPACE"," ",307],"=",["T_WHITESPACE"," ",307],["T_STRING","false",307],";",["T_WHITESPACE","\n        ",307],["T_VARIABLE","$this",308],["T_OBJECT_OPERATOR","->",308],["T_STRING","_mail",308],["T_WHITESPACE","        ",308],"=",["T_WHITESPACE"," ",308],["T_VARIABLE","$mail",308],";",["T_WHITESPACE","\n        ",308],["T_VARIABLE","$this",309],["T_OBJECT_OPERATOR","->",309],["T_STRING","_parts",309],["T_WHITESPACE","       ",309],"=",["T_WHITESPACE"," ",309],["T_VARIABLE","$mail",309],["T_OBJECT_OPERATOR","->",309],["T_STRING","getParts",309],"(",")",";",["T_WHITESPACE","\n        ",309],["T_VARIABLE","$mime",310],["T_WHITESPACE","               ",310],"=",["T_WHITESPACE"," ",310],["T_VARIABLE","$mail",310],["T_OBJECT_OPERATOR","->",310],["T_STRING","getMime",310],"(",")",";",["T_WHITESPACE","\n\n        ",310],["T_COMMENT","\/\/ Build body content\n",312],["T_WHITESPACE","        ",313],["T_VARIABLE","$this",313],["T_OBJECT_OPERATOR","->",313],["T_STRING","_buildBody",313],"(",")",";",["T_WHITESPACE","\n\n        ",313],["T_COMMENT","\/\/ Determine number of parts and boundary\n",315],["T_WHITESPACE","        ",316],["T_VARIABLE","$count",316],["T_WHITESPACE","    ",316],"=",["T_WHITESPACE"," ",316],["T_STRING","count",316],"(",["T_VARIABLE","$this",316],["T_OBJECT_OPERATOR","->",316],["T_STRING","_parts",316],")",";",["T_WHITESPACE","\n        ",316],["T_VARIABLE","$boundary",317],["T_WHITESPACE"," ",317],"=",["T_WHITESPACE"," ",317],["T_STRING","null",317],";",["T_WHITESPACE","\n        ",317],["T_IF","if",318],["T_WHITESPACE"," ",318],"(",["T_VARIABLE","$count",318],["T_WHITESPACE"," ",318],"<",["T_WHITESPACE"," ",318],["T_LNUMBER","1",318],")",["T_WHITESPACE"," ",318],"{",["T_WHITESPACE","\n            ",318],["T_DOC_COMMENT","\/**\n             * @see Zend_Mail_Transport_Exception\n             *\/",319],["T_WHITESPACE","\n            ",321],["T_COMMENT","#require_once 'Zend\/Mail\/Transport\/Exception.php';\n",322],["T_WHITESPACE","            ",323],["T_THROW","throw",323],["T_WHITESPACE"," ",323],["T_NEW","new",323],["T_WHITESPACE"," ",323],["T_STRING","Zend_Mail_Transport_Exception",323],"(",["T_CONSTANT_ENCAPSED_STRING","'Empty mail cannot be sent'",323],")",";",["T_WHITESPACE","\n        ",323],"}",["T_WHITESPACE","\n\n        ",324],["T_IF","if",326],["T_WHITESPACE"," ",326],"(",["T_VARIABLE","$count",326],["T_WHITESPACE"," ",326],">",["T_WHITESPACE"," ",326],["T_LNUMBER","1",326],")",["T_WHITESPACE"," ",326],"{",["T_WHITESPACE","\n            ",326],["T_COMMENT","\/\/ Multipart message; create new MIME object and boundary\n",327],["T_WHITESPACE","            ",328],["T_VARIABLE","$mime",328],["T_WHITESPACE","     ",328],"=",["T_WHITESPACE"," ",328],["T_NEW","new",328],["T_WHITESPACE"," ",328],["T_STRING","Zend_Mime",328],"(",["T_VARIABLE","$this",328],["T_OBJECT_OPERATOR","->",328],["T_STRING","_mail",328],["T_OBJECT_OPERATOR","->",328],["T_STRING","getMimeBoundary",328],"(",")",")",";",["T_WHITESPACE","\n            ",328],["T_VARIABLE","$boundary",329],["T_WHITESPACE"," ",329],"=",["T_WHITESPACE"," ",329],["T_VARIABLE","$mime",329],["T_OBJECT_OPERATOR","->",329],["T_STRING","boundary",329],"(",")",";",["T_WHITESPACE","\n        ",329],"}",["T_WHITESPACE"," ",330],["T_ELSEIF","elseif",330],["T_WHITESPACE"," ",330],"(",["T_VARIABLE","$this",330],["T_OBJECT_OPERATOR","->",330],["T_STRING","_isMultipart",330],")",["T_WHITESPACE"," ",330],"{",["T_WHITESPACE","\n            ",330],["T_COMMENT","\/\/ multipart\/alternative -- grab boundary\n",331],["T_WHITESPACE","            ",332],["T_VARIABLE","$boundary",332],["T_WHITESPACE"," ",332],"=",["T_WHITESPACE"," ",332],["T_VARIABLE","$this",332],["T_OBJECT_OPERATOR","->",332],["T_STRING","_parts",332],"[",["T_LNUMBER","0",332],"]",["T_OBJECT_OPERATOR","->",332],["T_STRING","boundary",332],";",["T_WHITESPACE","\n        ",332],"}",["T_WHITESPACE","\n\n        ",333],["T_COMMENT","\/\/ Determine recipients, and prepare headers\n",335],["T_WHITESPACE","        ",336],["T_VARIABLE","$this",336],["T_OBJECT_OPERATOR","->",336],["T_STRING","recipients",336],["T_WHITESPACE"," ",336],"=",["T_WHITESPACE"," ",336],["T_STRING","implode",336],"(",["T_CONSTANT_ENCAPSED_STRING","','",336],",",["T_WHITESPACE"," ",336],["T_VARIABLE","$mail",336],["T_OBJECT_OPERATOR","->",336],["T_STRING","getRecipients",336],"(",")",")",";",["T_WHITESPACE","\n        ",336],["T_VARIABLE","$this",337],["T_OBJECT_OPERATOR","->",337],["T_STRING","_prepareHeaders",337],"(",["T_VARIABLE","$this",337],["T_OBJECT_OPERATOR","->",337],["T_STRING","_getHeaders",337],"(",["T_VARIABLE","$boundary",337],")",")",";",["T_WHITESPACE","\n\n        ",337],["T_COMMENT","\/\/ Create message body\n",339],["T_WHITESPACE","        ",340],["T_COMMENT","\/\/ This is done so that the same Zend_Mail object can be used in\n",340],["T_WHITESPACE","        ",341],["T_COMMENT","\/\/ multiple transports\n",341],["T_WHITESPACE","        ",342],["T_VARIABLE","$message",342],["T_WHITESPACE"," ",342],"=",["T_WHITESPACE"," ",342],["T_NEW","new",342],["T_WHITESPACE"," ",342],["T_STRING","Zend_Mime_Message",342],"(",")",";",["T_WHITESPACE","\n        ",342],["T_VARIABLE","$message",343],["T_OBJECT_OPERATOR","->",343],["T_STRING","setParts",343],"(",["T_VARIABLE","$this",343],["T_OBJECT_OPERATOR","->",343],["T_STRING","_parts",343],")",";",["T_WHITESPACE","\n        ",343],["T_VARIABLE","$message",344],["T_OBJECT_OPERATOR","->",344],["T_STRING","setMime",344],"(",["T_VARIABLE","$mime",344],")",";",["T_WHITESPACE","\n        ",344],["T_VARIABLE","$this",345],["T_OBJECT_OPERATOR","->",345],["T_STRING","body",345],["T_WHITESPACE"," ",345],"=",["T_WHITESPACE"," ",345],["T_VARIABLE","$message",345],["T_OBJECT_OPERATOR","->",345],["T_STRING","generateMessage",345],"(",["T_VARIABLE","$this",345],["T_OBJECT_OPERATOR","->",345],["T_STRING","EOL",345],")",";",["T_WHITESPACE","\n\n        ",345],["T_COMMENT","\/\/ Send to transport!\n",347],["T_WHITESPACE","        ",348],["T_VARIABLE","$this",348],["T_OBJECT_OPERATOR","->",348],["T_STRING","_sendMail",348],"(",")",";",["T_WHITESPACE","\n    ",348],"}",["T_WHITESPACE","\n",349],"}",["T_WHITESPACE","\n",350]]
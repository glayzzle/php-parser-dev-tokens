[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Zend Framework\n *\n * LICENSE\n *\n * This source file is subject to the new BSD license that is bundled\n * with this package in the file LICENSE.txt.\n * It is also available through the world-wide-web at this URL:\n * http:\/\/framework.zend.com\/license\/new-bsd\n * If you did not receive a copy of the license and are unable to\n * obtain it through the world-wide-web, please send an email\n * to license@zend.com so we can send you a copy immediately.\n *\n * @category   Zend\n * @package    Zend_Queue\n * @subpackage Adapter\n * @copyright  Copyright (c) 2005-2015 Zend Technologies USA Inc. (http:\/\/www.zend.com)\n * @license    http:\/\/framework.zend.com\/license\/new-bsd     New BSD License\n * @version    $Id$\n *\/",2],["T_WHITESPACE","\n\n",21],["T_DOC_COMMENT","\/**\n * @see Zend_Queue_Adapter_AdapterAbstract\n *\/",23],["T_WHITESPACE","\n",25],["T_COMMENT","#require_once 'Zend\/Queue\/Adapter\/AdapterAbstract.php';\n",26],["T_WHITESPACE","\n",27],["T_DOC_COMMENT","\/**\n * @see Zend_Db_Select\n *\/",28],["T_WHITESPACE","\n",30],["T_COMMENT","#require_once 'Zend\/Db\/Select.php';\n",31],["T_WHITESPACE","\n",32],["T_DOC_COMMENT","\/**\n * @see Zend_Db\n *\/",33],["T_WHITESPACE","\n",35],["T_COMMENT","#require_once 'Zend\/Db.php';\n",36],["T_WHITESPACE","\n",37],["T_DOC_COMMENT","\/**\n * @see Zend_Queue_Adapter_Db_Queue\n *\/",38],["T_WHITESPACE","\n",40],["T_COMMENT","#require_once 'Zend\/Queue\/Adapter\/Db\/Queue.php';\n",41],["T_WHITESPACE","\n",42],["T_DOC_COMMENT","\/**\n * @see Zend_Queue_Adapter_Db_Message\n *\/",43],["T_WHITESPACE","\n",45],["T_COMMENT","#require_once 'Zend\/Queue\/Adapter\/Db\/Message.php';\n",46],["T_WHITESPACE","\n",47],["T_DOC_COMMENT","\/**\n * Class for using connecting to a Zend_Db-based queuing system\n *\n * @category   Zend\n * @package    Zend_Queue\n * @subpackage Adapter\n * @copyright  Copyright (c) 2005-2015 Zend Technologies USA Inc. (http:\/\/www.zend.com)\n * @license    http:\/\/framework.zend.com\/license\/new-bsd     New BSD License\n *\/",48],["T_WHITESPACE","\n",56],["T_CLASS","class",57],["T_WHITESPACE"," ",57],["T_STRING","Zend_Queue_Adapter_Db",57],["T_WHITESPACE"," ",57],["T_EXTENDS","extends",57],["T_WHITESPACE"," ",57],["T_STRING","Zend_Queue_Adapter_AdapterAbstract",57],["T_WHITESPACE","\n",57],"{",["T_WHITESPACE","\n    ",58],["T_DOC_COMMENT","\/**\n     * @var Zend_Queue_Adapter_Db_Queue\n     *\/",59],["T_WHITESPACE","\n    ",61],["T_PROTECTED","protected",62],["T_WHITESPACE"," ",62],["T_VARIABLE","$_queueTable",62],["T_WHITESPACE"," ",62],"=",["T_WHITESPACE"," ",62],["T_STRING","null",62],";",["T_WHITESPACE","\n\n    ",62],["T_DOC_COMMENT","\/**\n     * @var Zend_Queue_Adapter_Db_Message\n     *\/",64],["T_WHITESPACE","\n    ",66],["T_PROTECTED","protected",67],["T_WHITESPACE"," ",67],["T_VARIABLE","$_messageTable",67],["T_WHITESPACE"," ",67],"=",["T_WHITESPACE"," ",67],["T_STRING","null",67],";",["T_WHITESPACE","\n\n    ",67],["T_DOC_COMMENT","\/**\n     * @var Zend_Db_Table_Row_Abstract\n     *\/",69],["T_WHITESPACE","\n    ",71],["T_PROTECTED","protected",72],["T_WHITESPACE"," ",72],["T_VARIABLE","$_messageRow",72],["T_WHITESPACE"," ",72],"=",["T_WHITESPACE"," ",72],["T_STRING","null",72],";",["T_WHITESPACE","\n\n    ",72],["T_DOC_COMMENT","\/**\n     * Constructor\n     *\n     * @param  array|Zend_Config $options\n     * @param  Zend_Queue|null $queue\n     * @return void\n     *\/",74],["T_WHITESPACE","\n    ",80],["T_PUBLIC","public",81],["T_WHITESPACE"," ",81],["T_FUNCTION","function",81],["T_WHITESPACE"," ",81],["T_STRING","__construct",81],"(",["T_VARIABLE","$options",81],",",["T_WHITESPACE"," ",81],["T_STRING","Zend_Queue",81],["T_WHITESPACE"," ",81],["T_VARIABLE","$queue",81],["T_WHITESPACE"," ",81],"=",["T_WHITESPACE"," ",81],["T_STRING","null",81],")",["T_WHITESPACE","\n    ",81],"{",["T_WHITESPACE","\n        ",82],["T_STRING","parent",83],["T_DOUBLE_COLON","::",83],["T_STRING","__construct",83],"(",["T_VARIABLE","$options",83],",",["T_WHITESPACE"," ",83],["T_VARIABLE","$queue",83],")",";",["T_WHITESPACE","\n\n        ",83],["T_IF","if",85],["T_WHITESPACE"," ",85],"(","!",["T_ISSET","isset",85],"(",["T_VARIABLE","$this",85],["T_OBJECT_OPERATOR","->",85],["T_STRING","_options",85],"[",["T_CONSTANT_ENCAPSED_STRING","'options'",85],"]","[",["T_STRING","Zend_Db_Select",85],["T_DOUBLE_COLON","::",85],["T_STRING","FOR_UPDATE",85],"]",")",")",["T_WHITESPACE"," ",85],"{",["T_WHITESPACE","\n            ",85],["T_COMMENT","\/\/ turn off auto update by default\n",86],["T_WHITESPACE","            ",87],["T_VARIABLE","$this",87],["T_OBJECT_OPERATOR","->",87],["T_STRING","_options",87],"[",["T_CONSTANT_ENCAPSED_STRING","'options'",87],"]","[",["T_STRING","Zend_Db_Select",87],["T_DOUBLE_COLON","::",87],["T_STRING","FOR_UPDATE",87],"]",["T_WHITESPACE"," ",87],"=",["T_WHITESPACE"," ",87],["T_STRING","false",87],";",["T_WHITESPACE","\n        ",87],"}",["T_WHITESPACE","\n\n        ",88],["T_IF","if",90],["T_WHITESPACE"," ",90],"(","!",["T_STRING","is_bool",90],"(",["T_VARIABLE","$this",90],["T_OBJECT_OPERATOR","->",90],["T_STRING","_options",90],"[",["T_CONSTANT_ENCAPSED_STRING","'options'",90],"]","[",["T_STRING","Zend_Db_Select",90],["T_DOUBLE_COLON","::",90],["T_STRING","FOR_UPDATE",90],"]",")",")",["T_WHITESPACE"," ",90],"{",["T_WHITESPACE","\n            ",90],["T_COMMENT","#require_once 'Zend\/Queue\/Exception.php';\n",91],["T_WHITESPACE","            ",92],["T_THROW","throw",92],["T_WHITESPACE"," ",92],["T_NEW","new",92],["T_WHITESPACE"," ",92],["T_STRING","Zend_Queue_Exception",92],"(",["T_CONSTANT_ENCAPSED_STRING","'Options array item: Zend_Db_Select::FOR_UPDATE must be boolean'",92],")",";",["T_WHITESPACE","\n        ",92],"}",["T_WHITESPACE","\n\n        ",93],["T_IF","if",95],["T_WHITESPACE"," ",95],"(",["T_ISSET","isset",95],"(",["T_VARIABLE","$this",95],["T_OBJECT_OPERATOR","->",95],["T_STRING","_options",95],"[",["T_CONSTANT_ENCAPSED_STRING","'dbAdapter'",95],"]",")",["T_WHITESPACE","\n            ",95],["T_BOOLEAN_AND","&&",96],["T_WHITESPACE"," ",96],["T_VARIABLE","$this",96],["T_OBJECT_OPERATOR","->",96],["T_STRING","_options",96],"[",["T_CONSTANT_ENCAPSED_STRING","'dbAdapter'",96],"]",["T_WHITESPACE"," ",96],["T_INSTANCEOF","instanceof",96],["T_WHITESPACE"," ",96],["T_STRING","Zend_Db_Adapter_Abstract",96],")",["T_WHITESPACE"," ",96],"{",["T_WHITESPACE","\n            ",96],["T_VARIABLE","$db",97],["T_WHITESPACE"," ",97],"=",["T_WHITESPACE"," ",97],["T_VARIABLE","$this",97],["T_OBJECT_OPERATOR","->",97],["T_STRING","_options",97],"[",["T_CONSTANT_ENCAPSED_STRING","'dbAdapter'",97],"]",";",["T_WHITESPACE","\n        ",97],"}",["T_WHITESPACE"," ",98],["T_ELSE","else",98],["T_WHITESPACE"," ",98],"{",["T_WHITESPACE","\n            ",98],["T_VARIABLE","$db",99],["T_WHITESPACE"," ",99],"=",["T_WHITESPACE"," ",99],["T_VARIABLE","$this",99],["T_OBJECT_OPERATOR","->",99],["T_STRING","_initDbAdapter",99],"(",")",";",["T_WHITESPACE","\n        ",99],"}",["T_WHITESPACE","\n\n        ",100],["T_VARIABLE","$this",102],["T_OBJECT_OPERATOR","->",102],["T_STRING","_queueTable",102],["T_WHITESPACE"," ",102],"=",["T_WHITESPACE"," ",102],["T_NEW","new",102],["T_WHITESPACE"," ",102],["T_STRING","Zend_Queue_Adapter_Db_Queue",102],"(",["T_ARRAY","array",102],"(",["T_WHITESPACE","\n            ",102],["T_CONSTANT_ENCAPSED_STRING","'db'",103],["T_WHITESPACE"," ",103],["T_DOUBLE_ARROW","=>",103],["T_WHITESPACE"," ",103],["T_VARIABLE","$db",103],",",["T_WHITESPACE","\n        ",103],")",")",";",["T_WHITESPACE","\n\n        ",104],["T_VARIABLE","$this",106],["T_OBJECT_OPERATOR","->",106],["T_STRING","_messageTable",106],["T_WHITESPACE"," ",106],"=",["T_WHITESPACE"," ",106],["T_NEW","new",106],["T_WHITESPACE"," ",106],["T_STRING","Zend_Queue_Adapter_Db_Message",106],"(",["T_ARRAY","array",106],"(",["T_WHITESPACE","\n            ",106],["T_CONSTANT_ENCAPSED_STRING","'db'",107],["T_WHITESPACE"," ",107],["T_DOUBLE_ARROW","=>",107],["T_WHITESPACE"," ",107],["T_VARIABLE","$db",107],",",["T_WHITESPACE","\n        ",107],")",")",";",["T_WHITESPACE","\n\n    ",108],"}",["T_WHITESPACE","\n\n    ",110],["T_DOC_COMMENT","\/**\n     * Initialize Db adapter using 'driverOptions' section of the _options array\n     *\n     * Throws an exception if the adapter cannot connect to DB.\n     *\n     * @return Zend_Db_Adapter_Abstract\n     * @throws Zend_Queue_Exception\n     *\/",112],["T_WHITESPACE","\n    ",119],["T_PROTECTED","protected",120],["T_WHITESPACE"," ",120],["T_FUNCTION","function",120],["T_WHITESPACE"," ",120],["T_STRING","_initDbAdapter",120],"(",")",["T_WHITESPACE","\n    ",120],"{",["T_WHITESPACE","\n        ",121],["T_VARIABLE","$options",122],["T_WHITESPACE"," ",122],"=",["T_WHITESPACE"," ",122],"&",["T_VARIABLE","$this",122],["T_OBJECT_OPERATOR","->",122],["T_STRING","_options",122],"[",["T_CONSTANT_ENCAPSED_STRING","'driverOptions'",122],"]",";",["T_WHITESPACE","\n        ",122],["T_IF","if",123],["T_WHITESPACE"," ",123],"(","!",["T_STRING","array_key_exists",123],"(",["T_CONSTANT_ENCAPSED_STRING","'type'",123],",",["T_WHITESPACE"," ",123],["T_VARIABLE","$options",123],")",")",["T_WHITESPACE"," ",123],"{",["T_WHITESPACE","\n            ",123],["T_COMMENT","#require_once 'Zend\/Queue\/Exception.php';\n",124],["T_WHITESPACE","            ",125],["T_THROW","throw",125],["T_WHITESPACE"," ",125],["T_NEW","new",125],["T_WHITESPACE"," ",125],["T_STRING","Zend_Queue_Exception",125],"(",["T_CONSTANT_ENCAPSED_STRING","\"Configuration array must have a key for 'type' for the database type to use\"",125],")",";",["T_WHITESPACE","\n        ",125],"}",["T_WHITESPACE","\n\n        ",126],["T_IF","if",128],["T_WHITESPACE"," ",128],"(","!",["T_STRING","array_key_exists",128],"(",["T_CONSTANT_ENCAPSED_STRING","'host'",128],",",["T_WHITESPACE"," ",128],["T_VARIABLE","$options",128],")",")",["T_WHITESPACE"," ",128],"{",["T_WHITESPACE","\n            ",128],["T_COMMENT","#require_once 'Zend\/Queue\/Exception.php';\n",129],["T_WHITESPACE","            ",130],["T_THROW","throw",130],["T_WHITESPACE"," ",130],["T_NEW","new",130],["T_WHITESPACE"," ",130],["T_STRING","Zend_Queue_Exception",130],"(",["T_CONSTANT_ENCAPSED_STRING","\"Configuration array must have a key for 'host' for the host to use\"",130],")",";",["T_WHITESPACE","\n        ",130],"}",["T_WHITESPACE","\n\n        ",131],["T_IF","if",133],["T_WHITESPACE"," ",133],"(","!",["T_STRING","array_key_exists",133],"(",["T_CONSTANT_ENCAPSED_STRING","'username'",133],",",["T_WHITESPACE"," ",133],["T_VARIABLE","$options",133],")",")",["T_WHITESPACE"," ",133],"{",["T_WHITESPACE","\n            ",133],["T_COMMENT","#require_once 'Zend\/Queue\/Exception.php';\n",134],["T_WHITESPACE","            ",135],["T_THROW","throw",135],["T_WHITESPACE"," ",135],["T_NEW","new",135],["T_WHITESPACE"," ",135],["T_STRING","Zend_Queue_Exception",135],"(",["T_CONSTANT_ENCAPSED_STRING","\"Configuration array must have a key for 'username' for the username to use\"",135],")",";",["T_WHITESPACE","\n        ",135],"}",["T_WHITESPACE","\n\n        ",136],["T_IF","if",138],["T_WHITESPACE"," ",138],"(","!",["T_STRING","array_key_exists",138],"(",["T_CONSTANT_ENCAPSED_STRING","'password'",138],",",["T_WHITESPACE"," ",138],["T_VARIABLE","$options",138],")",")",["T_WHITESPACE"," ",138],"{",["T_WHITESPACE","\n            ",138],["T_COMMENT","#require_once 'Zend\/Queue\/Exception.php';\n",139],["T_WHITESPACE","            ",140],["T_THROW","throw",140],["T_WHITESPACE"," ",140],["T_NEW","new",140],["T_WHITESPACE"," ",140],["T_STRING","Zend_Queue_Exception",140],"(",["T_CONSTANT_ENCAPSED_STRING","\"Configuration array must have a key for 'password' for the password to use\"",140],")",";",["T_WHITESPACE","\n        ",140],"}",["T_WHITESPACE","\n\n        ",141],["T_IF","if",143],["T_WHITESPACE"," ",143],"(","!",["T_STRING","array_key_exists",143],"(",["T_CONSTANT_ENCAPSED_STRING","'dbname'",143],",",["T_WHITESPACE"," ",143],["T_VARIABLE","$options",143],")",")",["T_WHITESPACE"," ",143],"{",["T_WHITESPACE","\n            ",143],["T_COMMENT","#require_once 'Zend\/Queue\/Exception.php';\n",144],["T_WHITESPACE","            ",145],["T_THROW","throw",145],["T_WHITESPACE"," ",145],["T_NEW","new",145],["T_WHITESPACE"," ",145],["T_STRING","Zend_Queue_Exception",145],"(",["T_CONSTANT_ENCAPSED_STRING","\"Configuration array must have a key for 'dbname' for the database to use\"",145],")",";",["T_WHITESPACE","\n        ",145],"}",["T_WHITESPACE","\n\n        ",146],["T_VARIABLE","$type",148],["T_WHITESPACE"," ",148],"=",["T_WHITESPACE"," ",148],["T_VARIABLE","$options",148],"[",["T_CONSTANT_ENCAPSED_STRING","'type'",148],"]",";",["T_WHITESPACE","\n        ",148],["T_UNSET","unset",149],"(",["T_VARIABLE","$options",149],"[",["T_CONSTANT_ENCAPSED_STRING","'type'",149],"]",")",";",["T_WHITESPACE","\n\n        ",149],["T_TRY","try",151],["T_WHITESPACE"," ",151],"{",["T_WHITESPACE","\n            ",151],["T_VARIABLE","$db",152],["T_WHITESPACE"," ",152],"=",["T_WHITESPACE"," ",152],["T_STRING","Zend_Db",152],["T_DOUBLE_COLON","::",152],["T_STRING","factory",152],"(",["T_VARIABLE","$type",152],",",["T_WHITESPACE"," ",152],["T_VARIABLE","$options",152],")",";",["T_WHITESPACE","\n        ",152],"}",["T_WHITESPACE"," ",153],["T_CATCH","catch",153],["T_WHITESPACE"," ",153],"(",["T_STRING","Zend_Db_Exception",153],["T_WHITESPACE"," ",153],["T_VARIABLE","$e",153],")",["T_WHITESPACE"," ",153],"{",["T_WHITESPACE","\n            ",153],["T_COMMENT","#require_once 'Zend\/Queue\/Exception.php';\n",154],["T_WHITESPACE","            ",155],["T_THROW","throw",155],["T_WHITESPACE"," ",155],["T_NEW","new",155],["T_WHITESPACE"," ",155],["T_STRING","Zend_Queue_Exception",155],"(",["T_CONSTANT_ENCAPSED_STRING","'Error connecting to database: '",155],["T_WHITESPACE"," ",155],".",["T_WHITESPACE"," ",155],["T_VARIABLE","$e",155],["T_OBJECT_OPERATOR","->",155],["T_STRING","getMessage",155],"(",")",",",["T_WHITESPACE"," ",155],["T_VARIABLE","$e",155],["T_OBJECT_OPERATOR","->",155],["T_STRING","getCode",155],"(",")",",",["T_WHITESPACE"," ",155],["T_VARIABLE","$e",155],")",";",["T_WHITESPACE","\n        ",155],"}",["T_WHITESPACE","\n\n        ",156],["T_RETURN","return",158],["T_WHITESPACE"," ",158],["T_VARIABLE","$db",158],";",["T_WHITESPACE","\n    ",158],"}",["T_WHITESPACE","\n\n    ",159],["T_COMMENT","\/********************************************************************\n     * Queue management functions\n     *********************************************************************\/",161],["T_WHITESPACE","\n\n    ",163],["T_DOC_COMMENT","\/**\n     * Does a queue already exist?\n     *\n     * Throws an exception if the adapter cannot determine if a queue exists.\n     * use isSupported('isExists') to determine if an adapter can test for\n     * queue existance.\n     *\n     * @param  string $name\n     * @return boolean\n     * @throws Zend_Queue_Exception\n     *\/",165],["T_WHITESPACE","\n    ",175],["T_PUBLIC","public",176],["T_WHITESPACE"," ",176],["T_FUNCTION","function",176],["T_WHITESPACE"," ",176],["T_STRING","isExists",176],"(",["T_VARIABLE","$name",176],")",["T_WHITESPACE","\n    ",176],"{",["T_WHITESPACE","\n        ",177],["T_VARIABLE","$id",178],["T_WHITESPACE"," ",178],"=",["T_WHITESPACE"," ",178],["T_LNUMBER","0",178],";",["T_WHITESPACE","\n\n        ",178],["T_TRY","try",180],["T_WHITESPACE"," ",180],"{",["T_WHITESPACE","\n            ",180],["T_VARIABLE","$id",181],["T_WHITESPACE"," ",181],"=",["T_WHITESPACE"," ",181],["T_VARIABLE","$this",181],["T_OBJECT_OPERATOR","->",181],["T_STRING","getQueueId",181],"(",["T_VARIABLE","$name",181],")",";",["T_WHITESPACE","\n        ",181],"}",["T_WHITESPACE"," ",182],["T_CATCH","catch",182],["T_WHITESPACE"," ",182],"(",["T_STRING","Zend_Queue_Exception",182],["T_WHITESPACE"," ",182],["T_VARIABLE","$e",182],")",["T_WHITESPACE"," ",182],"{",["T_WHITESPACE","\n            ",182],["T_RETURN","return",183],["T_WHITESPACE"," ",183],["T_STRING","false",183],";",["T_WHITESPACE","\n        ",183],"}",["T_WHITESPACE","\n\n        ",184],["T_RETURN","return",186],["T_WHITESPACE"," ",186],"(",["T_VARIABLE","$id",186],["T_WHITESPACE"," ",186],">",["T_WHITESPACE"," ",186],["T_LNUMBER","0",186],")",";",["T_WHITESPACE","\n    ",186],"}",["T_WHITESPACE","\n\n    ",187],["T_DOC_COMMENT","\/**\n     * Create a new queue\n     *\n     * Visibility timeout is how long a message is left in the queue \"invisible\"\n     * to other readers.  If the message is acknowleged (deleted) before the\n     * timeout, then the message is deleted.  However, if the timeout expires\n     * then the message will be made available to other queue readers.\n     *\n     * @param  string  $name    queue name\n     * @param  integer $timeout default visibility timeout\n     * @return boolean\n     * @throws Zend_Queue_Exception - database error\n     *\/",189],["T_WHITESPACE","\n    ",201],["T_PUBLIC","public",202],["T_WHITESPACE"," ",202],["T_FUNCTION","function",202],["T_WHITESPACE"," ",202],["T_STRING","create",202],"(",["T_VARIABLE","$name",202],",",["T_WHITESPACE"," ",202],["T_VARIABLE","$timeout",202],["T_WHITESPACE"," ",202],"=",["T_WHITESPACE"," ",202],["T_STRING","null",202],")",["T_WHITESPACE","\n    ",202],"{",["T_WHITESPACE","\n        ",203],["T_IF","if",204],["T_WHITESPACE"," ",204],"(",["T_VARIABLE","$this",204],["T_OBJECT_OPERATOR","->",204],["T_STRING","isExists",204],"(",["T_VARIABLE","$name",204],")",")",["T_WHITESPACE"," ",204],"{",["T_WHITESPACE","\n            ",204],["T_RETURN","return",205],["T_WHITESPACE"," ",205],["T_STRING","false",205],";",["T_WHITESPACE","\n        ",205],"}",["T_WHITESPACE","\n\n        ",206],["T_VARIABLE","$queue",208],["T_WHITESPACE"," ",208],"=",["T_WHITESPACE"," ",208],["T_VARIABLE","$this",208],["T_OBJECT_OPERATOR","->",208],["T_STRING","_queueTable",208],["T_OBJECT_OPERATOR","->",208],["T_STRING","createRow",208],"(",")",";",["T_WHITESPACE","\n        ",208],["T_VARIABLE","$queue",209],["T_OBJECT_OPERATOR","->",209],["T_STRING","queue_name",209],["T_WHITESPACE"," ",209],"=",["T_WHITESPACE"," ",209],["T_VARIABLE","$name",209],";",["T_WHITESPACE","\n        ",209],["T_VARIABLE","$queue",210],["T_OBJECT_OPERATOR","->",210],["T_STRING","timeout",210],["T_WHITESPACE","    ",210],"=",["T_WHITESPACE"," ",210],"(",["T_VARIABLE","$timeout",210],["T_WHITESPACE"," ",210],["T_IS_IDENTICAL","===",210],["T_WHITESPACE"," ",210],["T_STRING","null",210],")",["T_WHITESPACE"," ",210],"?",["T_WHITESPACE"," ",210],["T_STRING","self",210],["T_DOUBLE_COLON","::",210],["T_STRING","CREATE_TIMEOUT_DEFAULT",210],["T_WHITESPACE"," ",210],":",["T_WHITESPACE"," ",210],["T_INT_CAST","(int)",210],["T_VARIABLE","$timeout",210],";",["T_WHITESPACE","\n\n        ",210],["T_TRY","try",212],["T_WHITESPACE"," ",212],"{",["T_WHITESPACE","\n            ",212],["T_IF","if",213],["T_WHITESPACE"," ",213],"(",["T_VARIABLE","$queue",213],["T_OBJECT_OPERATOR","->",213],["T_STRING","save",213],"(",")",")",["T_WHITESPACE"," ",213],"{",["T_WHITESPACE","\n                ",213],["T_RETURN","return",214],["T_WHITESPACE"," ",214],["T_STRING","true",214],";",["T_WHITESPACE","\n            ",214],"}",["T_WHITESPACE","\n        ",215],"}",["T_WHITESPACE"," ",216],["T_CATCH","catch",216],["T_WHITESPACE"," ",216],"(",["T_STRING","Exception",216],["T_WHITESPACE"," ",216],["T_VARIABLE","$e",216],")",["T_WHITESPACE"," ",216],"{",["T_WHITESPACE","\n            ",216],["T_COMMENT","#require_once 'Zend\/Queue\/Exception.php';\n",217],["T_WHITESPACE","            ",218],["T_THROW","throw",218],["T_WHITESPACE"," ",218],["T_NEW","new",218],["T_WHITESPACE"," ",218],["T_STRING","Zend_Queue_Exception",218],"(",["T_VARIABLE","$e",218],["T_OBJECT_OPERATOR","->",218],["T_STRING","getMessage",218],"(",")",",",["T_WHITESPACE"," ",218],["T_VARIABLE","$e",218],["T_OBJECT_OPERATOR","->",218],["T_STRING","getCode",218],"(",")",",",["T_WHITESPACE"," ",218],["T_VARIABLE","$e",218],")",";",["T_WHITESPACE","\n        ",218],"}",["T_WHITESPACE","\n\n        ",219],["T_RETURN","return",221],["T_WHITESPACE"," ",221],["T_STRING","false",221],";",["T_WHITESPACE","\n    ",221],"}",["T_WHITESPACE","\n\n    ",222],["T_DOC_COMMENT","\/**\n     * Delete a queue and all of it's messages\n     *\n     * Returns false if the queue is not found, true if the queue exists\n     *\n     * @param  string  $name queue name\n     * @return boolean\n     * @throws Zend_Queue_Exception - database error\n     *\/",224],["T_WHITESPACE","\n    ",232],["T_PUBLIC","public",233],["T_WHITESPACE"," ",233],["T_FUNCTION","function",233],["T_WHITESPACE"," ",233],["T_STRING","delete",233],"(",["T_VARIABLE","$name",233],")",["T_WHITESPACE","\n    ",233],"{",["T_WHITESPACE","\n        ",234],["T_VARIABLE","$id",235],["T_WHITESPACE"," ",235],"=",["T_WHITESPACE"," ",235],["T_VARIABLE","$this",235],["T_OBJECT_OPERATOR","->",235],["T_STRING","getQueueId",235],"(",["T_VARIABLE","$name",235],")",";",["T_WHITESPACE"," ",235],["T_COMMENT","\/\/ get primary key\n",235],["T_WHITESPACE","\n        ",236],["T_COMMENT","\/\/ if the queue does not exist then it must already be deleted.\n",237],["T_WHITESPACE","        ",238],["T_VARIABLE","$list",238],["T_WHITESPACE"," ",238],"=",["T_WHITESPACE"," ",238],["T_VARIABLE","$this",238],["T_OBJECT_OPERATOR","->",238],["T_STRING","_queueTable",238],["T_OBJECT_OPERATOR","->",238],["T_STRING","find",238],"(",["T_VARIABLE","$id",238],")",";",["T_WHITESPACE","\n        ",238],["T_IF","if",239],["T_WHITESPACE"," ",239],"(",["T_STRING","count",239],"(",["T_VARIABLE","$list",239],")",["T_WHITESPACE"," ",239],["T_IS_IDENTICAL","===",239],["T_WHITESPACE"," ",239],["T_LNUMBER","0",239],")",["T_WHITESPACE"," ",239],"{",["T_WHITESPACE","\n            ",239],["T_RETURN","return",240],["T_WHITESPACE"," ",240],["T_STRING","false",240],";",["T_WHITESPACE","\n        ",240],"}",["T_WHITESPACE","\n        ",241],["T_VARIABLE","$queue",242],["T_WHITESPACE"," ",242],"=",["T_WHITESPACE"," ",242],["T_VARIABLE","$list",242],["T_OBJECT_OPERATOR","->",242],["T_STRING","current",242],"(",")",";",["T_WHITESPACE","\n\n        ",242],["T_IF","if",244],["T_WHITESPACE"," ",244],"(",["T_VARIABLE","$queue",244],["T_WHITESPACE"," ",244],["T_INSTANCEOF","instanceof",244],["T_WHITESPACE"," ",244],["T_STRING","Zend_Db_Table_Row_Abstract",244],")",["T_WHITESPACE"," ",244],"{",["T_WHITESPACE","\n            ",244],["T_TRY","try",245],["T_WHITESPACE"," ",245],"{",["T_WHITESPACE","\n                ",245],["T_VARIABLE","$queue",246],["T_OBJECT_OPERATOR","->",246],["T_STRING","delete",246],"(",")",";",["T_WHITESPACE","\n            ",246],"}",["T_WHITESPACE"," ",247],["T_CATCH","catch",247],["T_WHITESPACE"," ",247],"(",["T_STRING","Exception",247],["T_WHITESPACE"," ",247],["T_VARIABLE","$e",247],")",["T_WHITESPACE"," ",247],"{",["T_WHITESPACE","\n                ",247],["T_COMMENT","#require_once 'Zend\/Queue\/Exception.php';\n",248],["T_WHITESPACE","                ",249],["T_THROW","throw",249],["T_WHITESPACE"," ",249],["T_NEW","new",249],["T_WHITESPACE"," ",249],["T_STRING","Zend_Queue_Exception",249],"(",["T_VARIABLE","$e",249],["T_OBJECT_OPERATOR","->",249],["T_STRING","getMessage",249],"(",")",",",["T_WHITESPACE"," ",249],["T_VARIABLE","$e",249],["T_OBJECT_OPERATOR","->",249],["T_STRING","getCode",249],"(",")",",",["T_WHITESPACE"," ",249],["T_VARIABLE","$e",249],")",";",["T_WHITESPACE","\n            ",249],"}",["T_WHITESPACE","\n        ",250],"}",["T_WHITESPACE","\n\n        ",251],["T_IF","if",253],["T_WHITESPACE"," ",253],"(",["T_STRING","array_key_exists",253],"(",["T_VARIABLE","$name",253],",",["T_WHITESPACE"," ",253],["T_VARIABLE","$this",253],["T_OBJECT_OPERATOR","->",253],["T_STRING","_queues",253],")",")",["T_WHITESPACE"," ",253],"{",["T_WHITESPACE","\n            ",253],["T_UNSET","unset",254],"(",["T_VARIABLE","$this",254],["T_OBJECT_OPERATOR","->",254],["T_STRING","_queues",254],"[",["T_VARIABLE","$name",254],"]",")",";",["T_WHITESPACE","\n        ",254],"}",["T_WHITESPACE","\n\n        ",255],["T_RETURN","return",257],["T_WHITESPACE"," ",257],["T_STRING","true",257],";",["T_WHITESPACE","\n    ",257],"}",["T_WHITESPACE","\n\n    ",258],["T_COMMENT","\/*\n     * Get an array of all available queues\n     *\n     * Not all adapters support getQueues(), use isSupported('getQueues')\n     * to determine if the adapter supports this feature.\n     *\n     * @return array\n     * @throws Zend_Queue_Exception - database error\n     *\/",260],["T_WHITESPACE","\n    ",268],["T_PUBLIC","public",269],["T_WHITESPACE"," ",269],["T_FUNCTION","function",269],["T_WHITESPACE"," ",269],["T_STRING","getQueues",269],"(",")",["T_WHITESPACE","\n    ",269],"{",["T_WHITESPACE","\n        ",270],["T_VARIABLE","$query",271],["T_WHITESPACE"," ",271],"=",["T_WHITESPACE"," ",271],["T_VARIABLE","$this",271],["T_OBJECT_OPERATOR","->",271],["T_STRING","_queueTable",271],["T_OBJECT_OPERATOR","->",271],["T_STRING","select",271],"(",")",";",["T_WHITESPACE","\n        ",271],["T_VARIABLE","$query",272],["T_OBJECT_OPERATOR","->",272],["T_STRING","from",272],"(",["T_VARIABLE","$this",272],["T_OBJECT_OPERATOR","->",272],["T_STRING","_queueTable",272],",",["T_WHITESPACE"," ",272],["T_ARRAY","array",272],"(",["T_CONSTANT_ENCAPSED_STRING","'queue_id'",272],",",["T_WHITESPACE"," ",272],["T_CONSTANT_ENCAPSED_STRING","'queue_name'",272],")",")",";",["T_WHITESPACE","\n\n        ",272],["T_VARIABLE","$this",274],["T_OBJECT_OPERATOR","->",274],["T_STRING","_queues",274],["T_WHITESPACE"," ",274],"=",["T_WHITESPACE"," ",274],["T_ARRAY","array",274],"(",")",";",["T_WHITESPACE","\n        ",274],["T_FOREACH","foreach",275],["T_WHITESPACE"," ",275],"(",["T_VARIABLE","$this",275],["T_OBJECT_OPERATOR","->",275],["T_STRING","_queueTable",275],["T_OBJECT_OPERATOR","->",275],["T_STRING","fetchAll",275],"(",["T_VARIABLE","$query",275],")",["T_WHITESPACE"," ",275],["T_AS","as",275],["T_WHITESPACE"," ",275],["T_VARIABLE","$queue",275],")",["T_WHITESPACE"," ",275],"{",["T_WHITESPACE","\n            ",275],["T_VARIABLE","$this",276],["T_OBJECT_OPERATOR","->",276],["T_STRING","_queues",276],"[",["T_VARIABLE","$queue",276],["T_OBJECT_OPERATOR","->",276],["T_STRING","queue_name",276],"]",["T_WHITESPACE"," ",276],"=",["T_WHITESPACE"," ",276],["T_INT_CAST","(int)",276],["T_VARIABLE","$queue",276],["T_OBJECT_OPERATOR","->",276],["T_STRING","queue_id",276],";",["T_WHITESPACE","\n        ",276],"}",["T_WHITESPACE","\n\n        ",277],["T_VARIABLE","$list",279],["T_WHITESPACE"," ",279],"=",["T_WHITESPACE"," ",279],["T_STRING","array_keys",279],"(",["T_VARIABLE","$this",279],["T_OBJECT_OPERATOR","->",279],["T_STRING","_queues",279],")",";",["T_WHITESPACE","\n\n        ",279],["T_RETURN","return",281],["T_WHITESPACE"," ",281],["T_VARIABLE","$list",281],";",["T_WHITESPACE","\n    ",281],"}",["T_WHITESPACE","\n\n    ",282],["T_DOC_COMMENT","\/**\n     * Return the approximate number of messages in the queue\n     *\n     * @param  Zend_Queue $queue\n     * @return integer\n     * @throws Zend_Queue_Exception\n     *\/",284],["T_WHITESPACE","\n    ",290],["T_PUBLIC","public",291],["T_WHITESPACE"," ",291],["T_FUNCTION","function",291],["T_WHITESPACE"," ",291],["T_STRING","count",291],"(",["T_STRING","Zend_Queue",291],["T_WHITESPACE"," ",291],["T_VARIABLE","$queue",291],["T_WHITESPACE"," ",291],"=",["T_WHITESPACE"," ",291],["T_STRING","null",291],")",["T_WHITESPACE","\n    ",291],"{",["T_WHITESPACE","\n        ",292],["T_IF","if",293],["T_WHITESPACE"," ",293],"(",["T_VARIABLE","$queue",293],["T_WHITESPACE"," ",293],["T_IS_IDENTICAL","===",293],["T_WHITESPACE"," ",293],["T_STRING","null",293],")",["T_WHITESPACE"," ",293],"{",["T_WHITESPACE","\n            ",293],["T_VARIABLE","$queue",294],["T_WHITESPACE"," ",294],"=",["T_WHITESPACE"," ",294],["T_VARIABLE","$this",294],["T_OBJECT_OPERATOR","->",294],["T_STRING","_queue",294],";",["T_WHITESPACE","\n        ",294],"}",["T_WHITESPACE","\n\n        ",295],["T_VARIABLE","$info",297],["T_WHITESPACE","  ",297],"=",["T_WHITESPACE"," ",297],["T_VARIABLE","$this",297],["T_OBJECT_OPERATOR","->",297],["T_STRING","_messageTable",297],["T_OBJECT_OPERATOR","->",297],["T_STRING","info",297],"(",")",";",["T_WHITESPACE","\n        ",297],["T_VARIABLE","$db",298],["T_WHITESPACE","    ",298],"=",["T_WHITESPACE"," ",298],["T_VARIABLE","$this",298],["T_OBJECT_OPERATOR","->",298],["T_STRING","_messageTable",298],["T_OBJECT_OPERATOR","->",298],["T_STRING","getAdapter",298],"(",")",";",["T_WHITESPACE","\n        ",298],["T_VARIABLE","$query",299],["T_WHITESPACE"," ",299],"=",["T_WHITESPACE"," ",299],["T_VARIABLE","$db",299],["T_OBJECT_OPERATOR","->",299],["T_STRING","select",299],"(",")",";",["T_WHITESPACE","\n        ",299],["T_VARIABLE","$query",300],["T_OBJECT_OPERATOR","->",300],["T_STRING","from",300],"(",["T_VARIABLE","$info",300],"[",["T_CONSTANT_ENCAPSED_STRING","'name'",300],"]",",",["T_WHITESPACE"," ",300],["T_ARRAY","array",300],"(",["T_NEW","new",300],["T_WHITESPACE"," ",300],["T_STRING","Zend_Db_Expr",300],"(",["T_CONSTANT_ENCAPSED_STRING","'COUNT(1)'",300],")",")",")",["T_WHITESPACE","\n              ",300],["T_OBJECT_OPERATOR","->",301],["T_STRING","where",301],"(",["T_CONSTANT_ENCAPSED_STRING","'queue_id=?'",301],",",["T_WHITESPACE"," ",301],["T_VARIABLE","$this",301],["T_OBJECT_OPERATOR","->",301],["T_STRING","getQueueId",301],"(",["T_VARIABLE","$queue",301],["T_OBJECT_OPERATOR","->",301],["T_STRING","getName",301],"(",")",")",")",";",["T_WHITESPACE","\n\n        ",301],["T_COMMENT","\/\/ return count results\n",303],["T_WHITESPACE","        ",304],["T_RETURN","return",304],["T_WHITESPACE"," ",304],["T_INT_CAST","(int)",304],["T_WHITESPACE"," ",304],["T_VARIABLE","$db",304],["T_OBJECT_OPERATOR","->",304],["T_STRING","fetchOne",304],"(",["T_VARIABLE","$query",304],")",";",["T_WHITESPACE","\n    ",304],"}",["T_WHITESPACE","\n\n    ",305],["T_COMMENT","\/********************************************************************\n    * Messsage management functions\n     *********************************************************************\/",307],["T_WHITESPACE","\n\n    ",309],["T_DOC_COMMENT","\/**\n     * Send a message to the queue\n     *\n     * @param  string     $message Message to send to the active queue\n     * @param  Zend_Queue $queue\n     * @return Zend_Queue_Message\n     * @throws Zend_Queue_Exception - database error\n     *\/",311],["T_WHITESPACE","\n    ",318],["T_PUBLIC","public",319],["T_WHITESPACE"," ",319],["T_FUNCTION","function",319],["T_WHITESPACE"," ",319],["T_STRING","send",319],"(",["T_VARIABLE","$message",319],",",["T_WHITESPACE"," ",319],["T_STRING","Zend_Queue",319],["T_WHITESPACE"," ",319],["T_VARIABLE","$queue",319],["T_WHITESPACE"," ",319],"=",["T_WHITESPACE"," ",319],["T_STRING","null",319],")",["T_WHITESPACE","\n    ",319],"{",["T_WHITESPACE","\n        ",320],["T_IF","if",321],["T_WHITESPACE"," ",321],"(",["T_VARIABLE","$this",321],["T_OBJECT_OPERATOR","->",321],["T_STRING","_messageRow",321],["T_WHITESPACE"," ",321],["T_IS_IDENTICAL","===",321],["T_WHITESPACE"," ",321],["T_STRING","null",321],")",["T_WHITESPACE"," ",321],"{",["T_WHITESPACE","\n            ",321],["T_VARIABLE","$this",322],["T_OBJECT_OPERATOR","->",322],["T_STRING","_messageRow",322],["T_WHITESPACE"," ",322],"=",["T_WHITESPACE"," ",322],["T_VARIABLE","$this",322],["T_OBJECT_OPERATOR","->",322],["T_STRING","_messageTable",322],["T_OBJECT_OPERATOR","->",322],["T_STRING","createRow",322],"(",")",";",["T_WHITESPACE","\n        ",322],"}",["T_WHITESPACE","\n\n        ",323],["T_IF","if",325],["T_WHITESPACE"," ",325],"(",["T_VARIABLE","$queue",325],["T_WHITESPACE"," ",325],["T_IS_IDENTICAL","===",325],["T_WHITESPACE"," ",325],["T_STRING","null",325],")",["T_WHITESPACE"," ",325],"{",["T_WHITESPACE","\n            ",325],["T_VARIABLE","$queue",326],["T_WHITESPACE"," ",326],"=",["T_WHITESPACE"," ",326],["T_VARIABLE","$this",326],["T_OBJECT_OPERATOR","->",326],["T_STRING","_queue",326],";",["T_WHITESPACE","\n        ",326],"}",["T_WHITESPACE","\n\n        ",327],["T_IF","if",329],["T_WHITESPACE"," ",329],"(",["T_STRING","is_scalar",329],"(",["T_VARIABLE","$message",329],")",")",["T_WHITESPACE"," ",329],"{",["T_WHITESPACE","\n            ",329],["T_VARIABLE","$message",330],["T_WHITESPACE"," ",330],"=",["T_WHITESPACE"," ",330],["T_STRING_CAST","(string)",330],["T_WHITESPACE"," ",330],["T_VARIABLE","$message",330],";",["T_WHITESPACE","\n        ",330],"}",["T_WHITESPACE","\n        ",331],["T_IF","if",332],["T_WHITESPACE"," ",332],"(",["T_STRING","is_string",332],"(",["T_VARIABLE","$message",332],")",")",["T_WHITESPACE"," ",332],"{",["T_WHITESPACE","\n            ",332],["T_VARIABLE","$message",333],["T_WHITESPACE"," ",333],"=",["T_WHITESPACE"," ",333],["T_STRING","trim",333],"(",["T_VARIABLE","$message",333],")",";",["T_WHITESPACE","\n        ",333],"}",["T_WHITESPACE","\n\n        ",334],["T_IF","if",336],["T_WHITESPACE"," ",336],"(","!",["T_VARIABLE","$this",336],["T_OBJECT_OPERATOR","->",336],["T_STRING","isExists",336],"(",["T_VARIABLE","$queue",336],["T_OBJECT_OPERATOR","->",336],["T_STRING","getName",336],"(",")",")",")",["T_WHITESPACE"," ",336],"{",["T_WHITESPACE","\n            ",336],["T_COMMENT","#require_once 'Zend\/Queue\/Exception.php';\n",337],["T_WHITESPACE","            ",338],["T_THROW","throw",338],["T_WHITESPACE"," ",338],["T_NEW","new",338],["T_WHITESPACE"," ",338],["T_STRING","Zend_Queue_Exception",338],"(",["T_CONSTANT_ENCAPSED_STRING","'Queue does not exist:'",338],["T_WHITESPACE"," ",338],".",["T_WHITESPACE"," ",338],["T_VARIABLE","$queue",338],["T_OBJECT_OPERATOR","->",338],["T_STRING","getName",338],"(",")",")",";",["T_WHITESPACE","\n        ",338],"}",["T_WHITESPACE","\n\n        ",339],["T_VARIABLE","$msg",341],["T_WHITESPACE","           ",341],"=",["T_WHITESPACE"," ",341],["T_CLONE","clone",341],["T_WHITESPACE"," ",341],["T_VARIABLE","$this",341],["T_OBJECT_OPERATOR","->",341],["T_STRING","_messageRow",341],";",["T_WHITESPACE","\n        ",341],["T_VARIABLE","$msg",342],["T_OBJECT_OPERATOR","->",342],["T_STRING","queue_id",342],["T_WHITESPACE"," ",342],"=",["T_WHITESPACE"," ",342],["T_VARIABLE","$this",342],["T_OBJECT_OPERATOR","->",342],["T_STRING","getQueueId",342],"(",["T_VARIABLE","$queue",342],["T_OBJECT_OPERATOR","->",342],["T_STRING","getName",342],"(",")",")",";",["T_WHITESPACE","\n        ",342],["T_VARIABLE","$msg",343],["T_OBJECT_OPERATOR","->",343],["T_STRING","created",343],["T_WHITESPACE","  ",343],"=",["T_WHITESPACE"," ",343],["T_STRING","time",343],"(",")",";",["T_WHITESPACE","\n        ",343],["T_VARIABLE","$msg",344],["T_OBJECT_OPERATOR","->",344],["T_STRING","body",344],["T_WHITESPACE","     ",344],"=",["T_WHITESPACE"," ",344],["T_VARIABLE","$message",344],";",["T_WHITESPACE","\n        ",344],["T_VARIABLE","$msg",345],["T_OBJECT_OPERATOR","->",345],["T_STRING","md5",345],["T_WHITESPACE","      ",345],"=",["T_WHITESPACE"," ",345],["T_STRING","md5",345],"(",["T_VARIABLE","$message",345],")",";",["T_WHITESPACE","\n        ",345],["T_COMMENT","\/\/ $msg->timeout = ??? @TODO\n",346],["T_WHITESPACE","\n        ",347],["T_TRY","try",348],["T_WHITESPACE"," ",348],"{",["T_WHITESPACE","\n            ",348],["T_VARIABLE","$msg",349],["T_OBJECT_OPERATOR","->",349],["T_STRING","save",349],"(",")",";",["T_WHITESPACE","\n        ",349],"}",["T_WHITESPACE"," ",350],["T_CATCH","catch",350],["T_WHITESPACE"," ",350],"(",["T_STRING","Exception",350],["T_WHITESPACE"," ",350],["T_VARIABLE","$e",350],")",["T_WHITESPACE"," ",350],"{",["T_WHITESPACE","\n            ",350],["T_COMMENT","#require_once 'Zend\/Queue\/Exception.php';\n",351],["T_WHITESPACE","            ",352],["T_THROW","throw",352],["T_WHITESPACE"," ",352],["T_NEW","new",352],["T_WHITESPACE"," ",352],["T_STRING","Zend_Queue_Exception",352],"(",["T_VARIABLE","$e",352],["T_OBJECT_OPERATOR","->",352],["T_STRING","getMessage",352],"(",")",",",["T_WHITESPACE"," ",352],["T_VARIABLE","$e",352],["T_OBJECT_OPERATOR","->",352],["T_STRING","getCode",352],"(",")",",",["T_WHITESPACE"," ",352],["T_VARIABLE","$e",352],")",";",["T_WHITESPACE","\n        ",352],"}",["T_WHITESPACE","\n\n        ",353],["T_VARIABLE","$options",355],["T_WHITESPACE"," ",355],"=",["T_WHITESPACE"," ",355],["T_ARRAY","array",355],"(",["T_WHITESPACE","\n            ",355],["T_CONSTANT_ENCAPSED_STRING","'queue'",356],["T_WHITESPACE"," ",356],["T_DOUBLE_ARROW","=>",356],["T_WHITESPACE"," ",356],["T_VARIABLE","$queue",356],",",["T_WHITESPACE","\n            ",356],["T_CONSTANT_ENCAPSED_STRING","'data'",357],["T_WHITESPACE","  ",357],["T_DOUBLE_ARROW","=>",357],["T_WHITESPACE"," ",357],["T_VARIABLE","$msg",357],["T_OBJECT_OPERATOR","->",357],["T_STRING","toArray",357],"(",")",",",["T_WHITESPACE","\n        ",357],")",";",["T_WHITESPACE","\n\n        ",358],["T_VARIABLE","$classname",360],["T_WHITESPACE"," ",360],"=",["T_WHITESPACE"," ",360],["T_VARIABLE","$queue",360],["T_OBJECT_OPERATOR","->",360],["T_STRING","getMessageClass",360],"(",")",";",["T_WHITESPACE","\n        ",360],["T_IF","if",361],["T_WHITESPACE"," ",361],"(","!",["T_STRING","class_exists",361],"(",["T_VARIABLE","$classname",361],")",")",["T_WHITESPACE"," ",361],"{",["T_WHITESPACE","\n            ",361],["T_COMMENT","#require_once 'Zend\/Loader.php';\n",362],["T_WHITESPACE","            ",363],["T_STRING","Zend_Loader",363],["T_DOUBLE_COLON","::",363],["T_STRING","loadClass",363],"(",["T_VARIABLE","$classname",363],")",";",["T_WHITESPACE","\n        ",363],"}",["T_WHITESPACE","\n        ",364],["T_RETURN","return",365],["T_WHITESPACE"," ",365],["T_NEW","new",365],["T_WHITESPACE"," ",365],["T_VARIABLE","$classname",365],"(",["T_VARIABLE","$options",365],")",";",["T_WHITESPACE","\n    ",365],"}",["T_WHITESPACE","\n\n    ",366],["T_DOC_COMMENT","\/**\n     * Get messages in the queue\n     *\n     * @param  integer    $maxMessages  Maximum number of messages to return\n     * @param  integer    $timeout      Visibility timeout for these messages\n     * @param  Zend_Queue $queue\n     * @return Zend_Queue_Message_Iterator\n     * @throws Zend_Queue_Exception - database error\n     *\/",368],["T_WHITESPACE","\n    ",376],["T_PUBLIC","public",377],["T_WHITESPACE"," ",377],["T_FUNCTION","function",377],["T_WHITESPACE"," ",377],["T_STRING","receive",377],"(",["T_VARIABLE","$maxMessages",377],["T_WHITESPACE"," ",377],"=",["T_WHITESPACE"," ",377],["T_STRING","null",377],",",["T_WHITESPACE"," ",377],["T_VARIABLE","$timeout",377],["T_WHITESPACE"," ",377],"=",["T_WHITESPACE"," ",377],["T_STRING","null",377],",",["T_WHITESPACE"," ",377],["T_STRING","Zend_Queue",377],["T_WHITESPACE"," ",377],["T_VARIABLE","$queue",377],["T_WHITESPACE"," ",377],"=",["T_WHITESPACE"," ",377],["T_STRING","null",377],")",["T_WHITESPACE","\n    ",377],"{",["T_WHITESPACE","\n        ",378],["T_IF","if",379],["T_WHITESPACE"," ",379],"(",["T_VARIABLE","$maxMessages",379],["T_WHITESPACE"," ",379],["T_IS_IDENTICAL","===",379],["T_WHITESPACE"," ",379],["T_STRING","null",379],")",["T_WHITESPACE"," ",379],"{",["T_WHITESPACE","\n            ",379],["T_VARIABLE","$maxMessages",380],["T_WHITESPACE"," ",380],"=",["T_WHITESPACE"," ",380],["T_LNUMBER","1",380],";",["T_WHITESPACE","\n        ",380],"}",["T_WHITESPACE","\n        ",381],["T_IF","if",382],["T_WHITESPACE"," ",382],"(",["T_VARIABLE","$timeout",382],["T_WHITESPACE"," ",382],["T_IS_IDENTICAL","===",382],["T_WHITESPACE"," ",382],["T_STRING","null",382],")",["T_WHITESPACE"," ",382],"{",["T_WHITESPACE","\n            ",382],["T_VARIABLE","$timeout",383],["T_WHITESPACE"," ",383],"=",["T_WHITESPACE"," ",383],["T_STRING","self",383],["T_DOUBLE_COLON","::",383],["T_STRING","RECEIVE_TIMEOUT_DEFAULT",383],";",["T_WHITESPACE","\n        ",383],"}",["T_WHITESPACE","\n        ",384],["T_IF","if",385],["T_WHITESPACE"," ",385],"(",["T_VARIABLE","$queue",385],["T_WHITESPACE"," ",385],["T_IS_IDENTICAL","===",385],["T_WHITESPACE"," ",385],["T_STRING","null",385],")",["T_WHITESPACE"," ",385],"{",["T_WHITESPACE","\n            ",385],["T_VARIABLE","$queue",386],["T_WHITESPACE"," ",386],"=",["T_WHITESPACE"," ",386],["T_VARIABLE","$this",386],["T_OBJECT_OPERATOR","->",386],["T_STRING","_queue",386],";",["T_WHITESPACE","\n        ",386],"}",["T_WHITESPACE","\n\n        ",387],["T_VARIABLE","$msgs",389],["T_WHITESPACE","      ",389],"=",["T_WHITESPACE"," ",389],["T_ARRAY","array",389],"(",")",";",["T_WHITESPACE","\n        ",389],["T_VARIABLE","$info",390],["T_WHITESPACE","      ",390],"=",["T_WHITESPACE"," ",390],["T_VARIABLE","$this",390],["T_OBJECT_OPERATOR","->",390],["T_STRING","_messageTable",390],["T_OBJECT_OPERATOR","->",390],["T_STRING","info",390],"(",")",";",["T_WHITESPACE","\n        ",390],["T_VARIABLE","$microtime",391],["T_WHITESPACE"," ",391],"=",["T_WHITESPACE"," ",391],["T_STRING","microtime",391],"(",["T_STRING","true",391],")",";",["T_WHITESPACE"," ",391],["T_COMMENT","\/\/ cache microtime\n",391],["T_WHITESPACE","        ",392],["T_VARIABLE","$db",392],["T_WHITESPACE","        ",392],"=",["T_WHITESPACE"," ",392],["T_VARIABLE","$this",392],["T_OBJECT_OPERATOR","->",392],["T_STRING","_messageTable",392],["T_OBJECT_OPERATOR","->",392],["T_STRING","getAdapter",392],"(",")",";",["T_WHITESPACE","\n\n        ",392],["T_COMMENT","\/\/ start transaction handling\n",394],["T_WHITESPACE","        ",395],["T_TRY","try",395],["T_WHITESPACE"," ",395],"{",["T_WHITESPACE","\n            ",395],["T_IF","if",396],["T_WHITESPACE"," ",396],"(",["T_WHITESPACE"," ",396],["T_VARIABLE","$maxMessages",396],["T_WHITESPACE"," ",396],">",["T_WHITESPACE"," ",396],["T_LNUMBER","0",396],["T_WHITESPACE"," ",396],")",["T_WHITESPACE"," ",396],"{",["T_WHITESPACE"," ",396],["T_COMMENT","\/\/ ZF-7666 LIMIT 0 clause not included.\n",396],["T_WHITESPACE","                ",397],["T_VARIABLE","$db",397],["T_OBJECT_OPERATOR","->",397],["T_STRING","beginTransaction",397],"(",")",";",["T_WHITESPACE","\n\n                ",397],["T_VARIABLE","$query",399],["T_WHITESPACE"," ",399],"=",["T_WHITESPACE"," ",399],["T_VARIABLE","$db",399],["T_OBJECT_OPERATOR","->",399],["T_STRING","select",399],"(",")",";",["T_WHITESPACE","\n                ",399],["T_IF","if",400],["T_WHITESPACE"," ",400],"(",["T_VARIABLE","$this",400],["T_OBJECT_OPERATOR","->",400],["T_STRING","_options",400],"[",["T_CONSTANT_ENCAPSED_STRING","'options'",400],"]","[",["T_STRING","Zend_Db_Select",400],["T_DOUBLE_COLON","::",400],["T_STRING","FOR_UPDATE",400],"]",")",["T_WHITESPACE"," ",400],"{",["T_WHITESPACE","\n                    ",400],["T_COMMENT","\/\/ turn on forUpdate\n",401],["T_WHITESPACE","                    ",402],["T_VARIABLE","$query",402],["T_OBJECT_OPERATOR","->",402],["T_STRING","forUpdate",402],"(",")",";",["T_WHITESPACE","\n                ",402],"}",["T_WHITESPACE","\n                ",403],["T_VARIABLE","$query",404],["T_OBJECT_OPERATOR","->",404],["T_STRING","from",404],"(",["T_VARIABLE","$info",404],"[",["T_CONSTANT_ENCAPSED_STRING","'name'",404],"]",",",["T_WHITESPACE"," ",404],["T_ARRAY","array",404],"(",["T_CONSTANT_ENCAPSED_STRING","'*'",404],")",")",["T_WHITESPACE","\n                      ",404],["T_OBJECT_OPERATOR","->",405],["T_STRING","where",405],"(",["T_CONSTANT_ENCAPSED_STRING","'queue_id=?'",405],",",["T_WHITESPACE"," ",405],["T_VARIABLE","$this",405],["T_OBJECT_OPERATOR","->",405],["T_STRING","getQueueId",405],"(",["T_VARIABLE","$queue",405],["T_OBJECT_OPERATOR","->",405],["T_STRING","getName",405],"(",")",")",")",["T_WHITESPACE","\n                      ",405],["T_OBJECT_OPERATOR","->",406],["T_STRING","where",406],"(",["T_CONSTANT_ENCAPSED_STRING","'handle IS NULL OR timeout+'",406],["T_WHITESPACE"," ",406],".",["T_WHITESPACE"," ",406],["T_INT_CAST","(int)",406],["T_VARIABLE","$timeout",406],["T_WHITESPACE"," ",406],".",["T_WHITESPACE"," ",406],["T_CONSTANT_ENCAPSED_STRING","' < '",406],["T_WHITESPACE"," ",406],".",["T_WHITESPACE"," ",406],["T_INT_CAST","(int)",406],["T_VARIABLE","$microtime",406],")",["T_WHITESPACE","\n                      ",406],["T_OBJECT_OPERATOR","->",407],["T_STRING","limit",407],"(",["T_VARIABLE","$maxMessages",407],")",";",["T_WHITESPACE","\n\n                ",407],["T_FOREACH","foreach",409],["T_WHITESPACE"," ",409],"(",["T_VARIABLE","$db",409],["T_OBJECT_OPERATOR","->",409],["T_STRING","fetchAll",409],"(",["T_VARIABLE","$query",409],")",["T_WHITESPACE"," ",409],["T_AS","as",409],["T_WHITESPACE"," ",409],["T_VARIABLE","$data",409],")",["T_WHITESPACE"," ",409],"{",["T_WHITESPACE","\n                    ",409],["T_COMMENT","\/\/ setup our changes to the message\n",410],["T_WHITESPACE","                    ",411],["T_VARIABLE","$data",411],"[",["T_CONSTANT_ENCAPSED_STRING","'handle'",411],"]",["T_WHITESPACE"," ",411],"=",["T_WHITESPACE"," ",411],["T_STRING","md5",411],"(",["T_STRING","uniqid",411],"(",["T_STRING","rand",411],"(",")",",",["T_WHITESPACE"," ",411],["T_STRING","true",411],")",")",";",["T_WHITESPACE","\n\n                    ",411],["T_VARIABLE","$update",413],["T_WHITESPACE"," ",413],"=",["T_WHITESPACE"," ",413],["T_ARRAY","array",413],"(",["T_WHITESPACE","\n                        ",413],["T_CONSTANT_ENCAPSED_STRING","'handle'",414],["T_WHITESPACE","  ",414],["T_DOUBLE_ARROW","=>",414],["T_WHITESPACE"," ",414],["T_VARIABLE","$data",414],"[",["T_CONSTANT_ENCAPSED_STRING","'handle'",414],"]",",",["T_WHITESPACE","\n                        ",414],["T_CONSTANT_ENCAPSED_STRING","'timeout'",415],["T_WHITESPACE"," ",415],["T_DOUBLE_ARROW","=>",415],["T_WHITESPACE"," ",415],["T_VARIABLE","$microtime",415],",",["T_WHITESPACE","\n                    ",415],")",";",["T_WHITESPACE","\n\n                    ",416],["T_COMMENT","\/\/ update the database\n",418],["T_WHITESPACE","                    ",419],["T_VARIABLE","$where",419],["T_WHITESPACE","   ",419],"=",["T_WHITESPACE"," ",419],["T_ARRAY","array",419],"(",")",";",["T_WHITESPACE","\n                    ",419],["T_VARIABLE","$where",420],"[","]",["T_WHITESPACE"," ",420],"=",["T_WHITESPACE"," ",420],["T_VARIABLE","$db",420],["T_OBJECT_OPERATOR","->",420],["T_STRING","quoteInto",420],"(",["T_CONSTANT_ENCAPSED_STRING","'message_id=?'",420],",",["T_WHITESPACE"," ",420],["T_VARIABLE","$data",420],"[",["T_CONSTANT_ENCAPSED_STRING","'message_id'",420],"]",")",";",["T_WHITESPACE","\n                    ",420],["T_VARIABLE","$where",421],"[","]",["T_WHITESPACE"," ",421],"=",["T_WHITESPACE"," ",421],["T_CONSTANT_ENCAPSED_STRING","'handle IS NULL OR timeout+'",421],["T_WHITESPACE"," ",421],".",["T_WHITESPACE"," ",421],["T_INT_CAST","(int)",421],["T_VARIABLE","$timeout",421],["T_WHITESPACE"," ",421],".",["T_WHITESPACE"," ",421],["T_CONSTANT_ENCAPSED_STRING","' < '",421],["T_WHITESPACE"," ",421],".",["T_WHITESPACE"," ",421],["T_INT_CAST","(int)",421],["T_VARIABLE","$microtime",421],";",["T_WHITESPACE","\n\n                    ",421],["T_VARIABLE","$count",423],["T_WHITESPACE"," ",423],"=",["T_WHITESPACE"," ",423],["T_VARIABLE","$db",423],["T_OBJECT_OPERATOR","->",423],["T_STRING","update",423],"(",["T_VARIABLE","$info",423],"[",["T_CONSTANT_ENCAPSED_STRING","'name'",423],"]",",",["T_WHITESPACE"," ",423],["T_VARIABLE","$update",423],",",["T_WHITESPACE"," ",423],["T_VARIABLE","$where",423],")",";",["T_WHITESPACE","\n\n                    ",423],["T_COMMENT","\/\/ we check count to make sure no other thread has gotten\n",425],["T_WHITESPACE","                    ",426],["T_COMMENT","\/\/ the rows after our select, but before our update.\n",426],["T_WHITESPACE","                    ",427],["T_IF","if",427],["T_WHITESPACE"," ",427],"(",["T_VARIABLE","$count",427],["T_WHITESPACE"," ",427],">",["T_WHITESPACE"," ",427],["T_LNUMBER","0",427],")",["T_WHITESPACE"," ",427],"{",["T_WHITESPACE","\n                        ",427],["T_VARIABLE","$msgs",428],"[","]",["T_WHITESPACE"," ",428],"=",["T_WHITESPACE"," ",428],["T_VARIABLE","$data",428],";",["T_WHITESPACE","\n                    ",428],"}",["T_WHITESPACE","\n                ",429],"}",["T_WHITESPACE","\n                ",430],["T_VARIABLE","$db",431],["T_OBJECT_OPERATOR","->",431],["T_STRING","commit",431],"(",")",";",["T_WHITESPACE","\n            ",431],"}",["T_WHITESPACE","\n        ",432],"}",["T_WHITESPACE"," ",433],["T_CATCH","catch",433],["T_WHITESPACE"," ",433],"(",["T_STRING","Exception",433],["T_WHITESPACE"," ",433],["T_VARIABLE","$e",433],")",["T_WHITESPACE"," ",433],"{",["T_WHITESPACE","\n            ",433],["T_VARIABLE","$db",434],["T_OBJECT_OPERATOR","->",434],["T_STRING","rollBack",434],"(",")",";",["T_WHITESPACE","\n\n            ",434],["T_COMMENT","#require_once 'Zend\/Queue\/Exception.php';\n",436],["T_WHITESPACE","            ",437],["T_THROW","throw",437],["T_WHITESPACE"," ",437],["T_NEW","new",437],["T_WHITESPACE"," ",437],["T_STRING","Zend_Queue_Exception",437],"(",["T_VARIABLE","$e",437],["T_OBJECT_OPERATOR","->",437],["T_STRING","getMessage",437],"(",")",",",["T_WHITESPACE"," ",437],["T_VARIABLE","$e",437],["T_OBJECT_OPERATOR","->",437],["T_STRING","getCode",437],"(",")",",",["T_WHITESPACE"," ",437],["T_VARIABLE","$e",437],")",";",["T_WHITESPACE","\n        ",437],"}",["T_WHITESPACE","\n\n        ",438],["T_VARIABLE","$options",440],["T_WHITESPACE"," ",440],"=",["T_WHITESPACE"," ",440],["T_ARRAY","array",440],"(",["T_WHITESPACE","\n            ",440],["T_CONSTANT_ENCAPSED_STRING","'queue'",441],["T_WHITESPACE","        ",441],["T_DOUBLE_ARROW","=>",441],["T_WHITESPACE"," ",441],["T_VARIABLE","$queue",441],",",["T_WHITESPACE","\n            ",441],["T_CONSTANT_ENCAPSED_STRING","'data'",442],["T_WHITESPACE","         ",442],["T_DOUBLE_ARROW","=>",442],["T_WHITESPACE"," ",442],["T_VARIABLE","$msgs",442],",",["T_WHITESPACE","\n            ",442],["T_CONSTANT_ENCAPSED_STRING","'messageClass'",443],["T_WHITESPACE"," ",443],["T_DOUBLE_ARROW","=>",443],["T_WHITESPACE"," ",443],["T_VARIABLE","$queue",443],["T_OBJECT_OPERATOR","->",443],["T_STRING","getMessageClass",443],"(",")",",",["T_WHITESPACE","\n        ",443],")",";",["T_WHITESPACE","\n\n        ",444],["T_VARIABLE","$classname",446],["T_WHITESPACE"," ",446],"=",["T_WHITESPACE"," ",446],["T_VARIABLE","$queue",446],["T_OBJECT_OPERATOR","->",446],["T_STRING","getMessageSetClass",446],"(",")",";",["T_WHITESPACE","\n        ",446],["T_IF","if",447],["T_WHITESPACE"," ",447],"(","!",["T_STRING","class_exists",447],"(",["T_VARIABLE","$classname",447],")",")",["T_WHITESPACE"," ",447],"{",["T_WHITESPACE","\n            ",447],["T_COMMENT","#require_once 'Zend\/Loader.php';\n",448],["T_WHITESPACE","            ",449],["T_STRING","Zend_Loader",449],["T_DOUBLE_COLON","::",449],["T_STRING","loadClass",449],"(",["T_VARIABLE","$classname",449],")",";",["T_WHITESPACE","\n        ",449],"}",["T_WHITESPACE","\n        ",450],["T_RETURN","return",451],["T_WHITESPACE"," ",451],["T_NEW","new",451],["T_WHITESPACE"," ",451],["T_VARIABLE","$classname",451],"(",["T_VARIABLE","$options",451],")",";",["T_WHITESPACE","\n    ",451],"}",["T_WHITESPACE","\n\n    ",452],["T_DOC_COMMENT","\/**\n     * Delete a message from the queue\n     *\n     * Returns true if the message is deleted, false if the deletion is\n     * unsuccessful.\n     *\n     * @param  Zend_Queue_Message $message\n     * @return boolean\n     * @throws Zend_Queue_Exception - database error\n     *\/",454],["T_WHITESPACE","\n    ",463],["T_PUBLIC","public",464],["T_WHITESPACE"," ",464],["T_FUNCTION","function",464],["T_WHITESPACE"," ",464],["T_STRING","deleteMessage",464],"(",["T_STRING","Zend_Queue_Message",464],["T_WHITESPACE"," ",464],["T_VARIABLE","$message",464],")",["T_WHITESPACE","\n    ",464],"{",["T_WHITESPACE","\n        ",465],["T_VARIABLE","$db",466],["T_WHITESPACE","    ",466],"=",["T_WHITESPACE"," ",466],["T_VARIABLE","$this",466],["T_OBJECT_OPERATOR","->",466],["T_STRING","_messageTable",466],["T_OBJECT_OPERATOR","->",466],["T_STRING","getAdapter",466],"(",")",";",["T_WHITESPACE","\n        ",466],["T_VARIABLE","$where",467],["T_WHITESPACE"," ",467],"=",["T_WHITESPACE"," ",467],["T_VARIABLE","$db",467],["T_OBJECT_OPERATOR","->",467],["T_STRING","quoteInto",467],"(",["T_CONSTANT_ENCAPSED_STRING","'handle=?'",467],",",["T_WHITESPACE"," ",467],["T_VARIABLE","$message",467],["T_OBJECT_OPERATOR","->",467],["T_STRING","handle",467],")",";",["T_WHITESPACE","\n\n        ",467],["T_IF","if",469],["T_WHITESPACE"," ",469],"(",["T_VARIABLE","$this",469],["T_OBJECT_OPERATOR","->",469],["T_STRING","_messageTable",469],["T_OBJECT_OPERATOR","->",469],["T_STRING","delete",469],"(",["T_VARIABLE","$where",469],")",")",["T_WHITESPACE"," ",469],"{",["T_WHITESPACE","\n            ",469],["T_RETURN","return",470],["T_WHITESPACE"," ",470],["T_STRING","true",470],";",["T_WHITESPACE","\n        ",470],"}",["T_WHITESPACE","\n\n        ",471],["T_RETURN","return",473],["T_WHITESPACE"," ",473],["T_STRING","false",473],";",["T_WHITESPACE","\n    ",473],"}",["T_WHITESPACE","\n\n    ",474],["T_COMMENT","\/********************************************************************\n     * Supporting functions\n     *********************************************************************\/",476],["T_WHITESPACE","\n\n    ",478],["T_DOC_COMMENT","\/**\n     * Return a list of queue capabilities functions\n     *\n     * $array['function name'] = true or false\n     * true is supported, false is not supported.\n     *\n     * @param  string $name\n     * @return array\n     *\/",480],["T_WHITESPACE","\n    ",488],["T_PUBLIC","public",489],["T_WHITESPACE"," ",489],["T_FUNCTION","function",489],["T_WHITESPACE"," ",489],["T_STRING","getCapabilities",489],"(",")",["T_WHITESPACE","\n    ",489],"{",["T_WHITESPACE","\n        ",490],["T_RETURN","return",491],["T_WHITESPACE"," ",491],["T_ARRAY","array",491],"(",["T_WHITESPACE","\n            ",491],["T_CONSTANT_ENCAPSED_STRING","'create'",492],["T_WHITESPACE","        ",492],["T_DOUBLE_ARROW","=>",492],["T_WHITESPACE"," ",492],["T_STRING","true",492],",",["T_WHITESPACE","\n            ",492],["T_CONSTANT_ENCAPSED_STRING","'delete'",493],["T_WHITESPACE","        ",493],["T_DOUBLE_ARROW","=>",493],["T_WHITESPACE"," ",493],["T_STRING","true",493],",",["T_WHITESPACE","\n            ",493],["T_CONSTANT_ENCAPSED_STRING","'send'",494],["T_WHITESPACE","          ",494],["T_DOUBLE_ARROW","=>",494],["T_WHITESPACE"," ",494],["T_STRING","true",494],",",["T_WHITESPACE","\n            ",494],["T_CONSTANT_ENCAPSED_STRING","'receive'",495],["T_WHITESPACE","       ",495],["T_DOUBLE_ARROW","=>",495],["T_WHITESPACE"," ",495],["T_STRING","true",495],",",["T_WHITESPACE","\n            ",495],["T_CONSTANT_ENCAPSED_STRING","'deleteMessage'",496],["T_WHITESPACE"," ",496],["T_DOUBLE_ARROW","=>",496],["T_WHITESPACE"," ",496],["T_STRING","true",496],",",["T_WHITESPACE","\n            ",496],["T_CONSTANT_ENCAPSED_STRING","'getQueues'",497],["T_WHITESPACE","     ",497],["T_DOUBLE_ARROW","=>",497],["T_WHITESPACE"," ",497],["T_STRING","true",497],",",["T_WHITESPACE","\n            ",497],["T_CONSTANT_ENCAPSED_STRING","'count'",498],["T_WHITESPACE","         ",498],["T_DOUBLE_ARROW","=>",498],["T_WHITESPACE"," ",498],["T_STRING","true",498],",",["T_WHITESPACE","\n            ",498],["T_CONSTANT_ENCAPSED_STRING","'isExists'",499],["T_WHITESPACE","      ",499],["T_DOUBLE_ARROW","=>",499],["T_WHITESPACE"," ",499],["T_STRING","true",499],",",["T_WHITESPACE","\n        ",499],")",";",["T_WHITESPACE","\n    ",500],"}",["T_WHITESPACE","\n\n    ",501],["T_COMMENT","\/********************************************************************\n     * Functions that are not part of the Zend_Queue_Adapter_Abstract\n     *********************************************************************\/",503],["T_WHITESPACE","\n    ",505],["T_DOC_COMMENT","\/**\n     * Get the queue ID\n     *\n     * Returns the queue's row identifier.\n     *\n     * @param  string       $name\n     * @return integer|null\n     * @throws Zend_Queue_Exception\n     *\/",506],["T_WHITESPACE","\n    ",514],["T_PROTECTED","protected",515],["T_WHITESPACE"," ",515],["T_FUNCTION","function",515],["T_WHITESPACE"," ",515],["T_STRING","getQueueId",515],"(",["T_VARIABLE","$name",515],")",["T_WHITESPACE","\n    ",515],"{",["T_WHITESPACE","\n        ",516],["T_IF","if",517],["T_WHITESPACE"," ",517],"(",["T_STRING","array_key_exists",517],"(",["T_VARIABLE","$name",517],",",["T_WHITESPACE"," ",517],["T_VARIABLE","$this",517],["T_OBJECT_OPERATOR","->",517],["T_STRING","_queues",517],")",")",["T_WHITESPACE"," ",517],"{",["T_WHITESPACE","\n            ",517],["T_RETURN","return",518],["T_WHITESPACE"," ",518],["T_VARIABLE","$this",518],["T_OBJECT_OPERATOR","->",518],["T_STRING","_queues",518],"[",["T_VARIABLE","$name",518],"]",";",["T_WHITESPACE","\n        ",518],"}",["T_WHITESPACE","\n\n        ",519],["T_VARIABLE","$query",521],["T_WHITESPACE"," ",521],"=",["T_WHITESPACE"," ",521],["T_VARIABLE","$this",521],["T_OBJECT_OPERATOR","->",521],["T_STRING","_queueTable",521],["T_OBJECT_OPERATOR","->",521],["T_STRING","select",521],"(",")",";",["T_WHITESPACE","\n        ",521],["T_VARIABLE","$query",522],["T_OBJECT_OPERATOR","->",522],["T_STRING","from",522],"(",["T_VARIABLE","$this",522],["T_OBJECT_OPERATOR","->",522],["T_STRING","_queueTable",522],",",["T_WHITESPACE"," ",522],["T_ARRAY","array",522],"(",["T_CONSTANT_ENCAPSED_STRING","'queue_id'",522],")",")",["T_WHITESPACE","\n              ",522],["T_OBJECT_OPERATOR","->",523],["T_STRING","where",523],"(",["T_CONSTANT_ENCAPSED_STRING","'queue_name=?'",523],",",["T_WHITESPACE"," ",523],["T_VARIABLE","$name",523],")",";",["T_WHITESPACE","\n\n        ",523],["T_VARIABLE","$queue",525],["T_WHITESPACE"," ",525],"=",["T_WHITESPACE"," ",525],["T_VARIABLE","$this",525],["T_OBJECT_OPERATOR","->",525],["T_STRING","_queueTable",525],["T_OBJECT_OPERATOR","->",525],["T_STRING","fetchRow",525],"(",["T_VARIABLE","$query",525],")",";",["T_WHITESPACE","\n\n        ",525],["T_IF","if",527],["T_WHITESPACE"," ",527],"(",["T_VARIABLE","$queue",527],["T_WHITESPACE"," ",527],["T_IS_IDENTICAL","===",527],["T_WHITESPACE"," ",527],["T_STRING","null",527],")",["T_WHITESPACE"," ",527],"{",["T_WHITESPACE","\n            ",527],["T_COMMENT","#require_once 'Zend\/Queue\/Exception.php';\n",528],["T_WHITESPACE","            ",529],["T_THROW","throw",529],["T_WHITESPACE"," ",529],["T_NEW","new",529],["T_WHITESPACE"," ",529],["T_STRING","Zend_Queue_Exception",529],"(",["T_CONSTANT_ENCAPSED_STRING","'Queue does not exist: '",529],["T_WHITESPACE"," ",529],".",["T_WHITESPACE"," ",529],["T_VARIABLE","$name",529],")",";",["T_WHITESPACE","\n        ",529],"}",["T_WHITESPACE","\n\n        ",530],["T_VARIABLE","$this",532],["T_OBJECT_OPERATOR","->",532],["T_STRING","_queues",532],"[",["T_VARIABLE","$name",532],"]",["T_WHITESPACE"," ",532],"=",["T_WHITESPACE"," ",532],["T_INT_CAST","(int)",532],["T_VARIABLE","$queue",532],["T_OBJECT_OPERATOR","->",532],["T_STRING","queue_id",532],";",["T_WHITESPACE","\n\n        ",532],["T_RETURN","return",534],["T_WHITESPACE"," ",534],["T_VARIABLE","$this",534],["T_OBJECT_OPERATOR","->",534],["T_STRING","_queues",534],"[",["T_VARIABLE","$name",534],"]",";",["T_WHITESPACE","\n    ",534],"}",["T_WHITESPACE","\n",535],"}",["T_WHITESPACE","\n",536]]
[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Zend Framework\n *\n * LICENSE\n *\n * This source file is subject to the new BSD license that is bundled\n * with this package in the file LICENSE.txt.\n * It is also available through the world-wide-web at this URL:\n * http:\/\/framework.zend.com\/license\/new-bsd\n * If you did not receive a copy of the license and are unable to\n * obtain it through the world-wide-web, please send an email\n * to license@zend.com so we can send you a copy immediately.\n *\n * @category   Zend\n * @package    Zend_Queue\n * @subpackage Adapter\n * @copyright  Copyright (c) 2005-2015 Zend Technologies USA Inc. (http:\/\/www.zend.com)\n * @license    http:\/\/framework.zend.com\/license\/new-bsd     New BSD License\n * @version    $Id$\n *\/",2],["T_WHITESPACE","\n\n",21],["T_DOC_COMMENT","\/**\n * @see Zend_Queue_Adapter_AdapterAbstract\n *\/",23],["T_WHITESPACE","\n",25],["T_COMMENT","#require_once 'Zend\/Queue\/Adapter\/AdapterAbstract.php';\n",26],["T_WHITESPACE","\n",27],["T_DOC_COMMENT","\/**\n * Class for using a standard PHP array as a queue\n *\n * @category   Zend\n * @package    Zend_Queue\n * @subpackage Adapter\n * @copyright  Copyright (c) 2005-2015 Zend Technologies USA Inc. (http:\/\/www.zend.com)\n * @license    http:\/\/framework.zend.com\/license\/new-bsd     New BSD License\n *\/",28],["T_WHITESPACE","\n",36],["T_CLASS","class",37],["T_WHITESPACE"," ",37],["T_STRING","Zend_Queue_Adapter_Array",37],["T_WHITESPACE"," ",37],["T_EXTENDS","extends",37],["T_WHITESPACE"," ",37],["T_STRING","Zend_Queue_Adapter_AdapterAbstract",37],["T_WHITESPACE","\n",37],"{",["T_WHITESPACE","\n    ",38],["T_DOC_COMMENT","\/**\n     * @var array\n     *\/",39],["T_WHITESPACE","\n    ",41],["T_PROTECTED","protected",42],["T_WHITESPACE"," ",42],["T_VARIABLE","$_data",42],["T_WHITESPACE"," ",42],"=",["T_WHITESPACE"," ",42],["T_ARRAY","array",42],"(",")",";",["T_WHITESPACE","\n\n    ",42],["T_DOC_COMMENT","\/**\n     * Constructor\n     *\n     * @param  array|Zend_Config $options\n     * @param  Zend_Queue|null $queue\n     * @return void\n     *\/",44],["T_WHITESPACE","\n    ",50],["T_PUBLIC","public",51],["T_WHITESPACE"," ",51],["T_FUNCTION","function",51],["T_WHITESPACE"," ",51],["T_STRING","__construct",51],"(",["T_VARIABLE","$options",51],",",["T_WHITESPACE"," ",51],["T_STRING","Zend_Queue",51],["T_WHITESPACE"," ",51],["T_VARIABLE","$queue",51],["T_WHITESPACE"," ",51],"=",["T_WHITESPACE"," ",51],["T_STRING","null",51],")",["T_WHITESPACE","\n    ",51],"{",["T_WHITESPACE","\n        ",52],["T_STRING","parent",53],["T_DOUBLE_COLON","::",53],["T_STRING","__construct",53],"(",["T_VARIABLE","$options",53],",",["T_WHITESPACE"," ",53],["T_VARIABLE","$queue",53],")",";",["T_WHITESPACE","\n    ",53],"}",["T_WHITESPACE","\n\n    ",54],["T_COMMENT","\/********************************************************************\n    * Queue management functions\n     *********************************************************************\/",56],["T_WHITESPACE","\n\n    ",58],["T_DOC_COMMENT","\/**\n     * Does a queue already exist?\n     *\n     * Throws an exception if the adapter cannot determine if a queue exists.\n     * use isSupported('isExists') to determine if an adapter can test for\n     * queue existance.\n     *\n     * @param  string $name\n     * @return boolean\n     *\/",60],["T_WHITESPACE","\n    ",69],["T_PUBLIC","public",70],["T_WHITESPACE"," ",70],["T_FUNCTION","function",70],["T_WHITESPACE"," ",70],["T_STRING","isExists",70],"(",["T_VARIABLE","$name",70],")",["T_WHITESPACE","\n    ",70],"{",["T_WHITESPACE","\n        ",71],["T_RETURN","return",72],["T_WHITESPACE"," ",72],["T_STRING","array_key_exists",72],"(",["T_VARIABLE","$name",72],",",["T_WHITESPACE"," ",72],["T_VARIABLE","$this",72],["T_OBJECT_OPERATOR","->",72],["T_STRING","_data",72],")",";",["T_WHITESPACE","\n    ",72],"}",["T_WHITESPACE","\n\n    ",73],["T_DOC_COMMENT","\/**\n     * Create a new queue\n     *\n     * Visibility timeout is how long a message is left in the queue \"invisible\"\n     * to other readers.  If the message is acknowleged (deleted) before the\n     * timeout, then the message is deleted.  However, if the timeout expires\n     * then the message will be made available to other queue readers.\n     *\n     * @param  string  $name    queue name\n     * @param  integer $timeout default visibility timeout\n     * @return boolean\n     *\/",75],["T_WHITESPACE","\n    ",86],["T_PUBLIC","public",87],["T_WHITESPACE"," ",87],["T_FUNCTION","function",87],["T_WHITESPACE"," ",87],["T_STRING","create",87],"(",["T_VARIABLE","$name",87],",",["T_WHITESPACE"," ",87],["T_VARIABLE","$timeout",87],"=",["T_STRING","null",87],")",["T_WHITESPACE","\n    ",87],"{",["T_WHITESPACE","\n        ",88],["T_IF","if",89],["T_WHITESPACE"," ",89],"(",["T_VARIABLE","$this",89],["T_OBJECT_OPERATOR","->",89],["T_STRING","isExists",89],"(",["T_VARIABLE","$name",89],")",")",["T_WHITESPACE"," ",89],"{",["T_WHITESPACE","\n            ",89],["T_RETURN","return",90],["T_WHITESPACE"," ",90],["T_STRING","false",90],";",["T_WHITESPACE","\n        ",90],"}",["T_WHITESPACE","\n        ",91],["T_IF","if",92],["T_WHITESPACE"," ",92],"(",["T_VARIABLE","$timeout",92],["T_WHITESPACE"," ",92],["T_IS_IDENTICAL","===",92],["T_WHITESPACE"," ",92],["T_STRING","null",92],")",["T_WHITESPACE"," ",92],"{",["T_WHITESPACE","\n            ",92],["T_VARIABLE","$timeout",93],["T_WHITESPACE"," ",93],"=",["T_WHITESPACE"," ",93],["T_STRING","self",93],["T_DOUBLE_COLON","::",93],["T_STRING","CREATE_TIMEOUT_DEFAULT",93],";",["T_WHITESPACE","\n        ",93],"}",["T_WHITESPACE","\n        ",94],["T_VARIABLE","$this",95],["T_OBJECT_OPERATOR","->",95],["T_STRING","_data",95],"[",["T_VARIABLE","$name",95],"]",["T_WHITESPACE"," ",95],"=",["T_WHITESPACE"," ",95],["T_ARRAY","array",95],"(",")",";",["T_WHITESPACE","\n\n        ",95],["T_RETURN","return",97],["T_WHITESPACE"," ",97],["T_STRING","true",97],";",["T_WHITESPACE","\n    ",97],"}",["T_WHITESPACE","\n\n    ",98],["T_DOC_COMMENT","\/**\n     * Delete a queue and all of it's messages\n     *\n     * Returns false if the queue is not found, true if the queue exists\n     *\n     * @param  string  $name queue name\n     * @return boolean\n     *\/",100],["T_WHITESPACE","\n    ",107],["T_PUBLIC","public",108],["T_WHITESPACE"," ",108],["T_FUNCTION","function",108],["T_WHITESPACE"," ",108],["T_STRING","delete",108],"(",["T_VARIABLE","$name",108],")",["T_WHITESPACE","\n    ",108],"{",["T_WHITESPACE","\n        ",109],["T_VARIABLE","$found",110],["T_WHITESPACE"," ",110],"=",["T_WHITESPACE"," ",110],["T_ISSET","isset",110],"(",["T_VARIABLE","$this",110],["T_OBJECT_OPERATOR","->",110],["T_STRING","_data",110],"[",["T_VARIABLE","$name",110],"]",")",";",["T_WHITESPACE","\n\n        ",110],["T_IF","if",112],["T_WHITESPACE"," ",112],"(",["T_VARIABLE","$found",112],")",["T_WHITESPACE"," ",112],"{",["T_WHITESPACE","\n            ",112],["T_UNSET","unset",113],"(",["T_VARIABLE","$this",113],["T_OBJECT_OPERATOR","->",113],["T_STRING","_data",113],"[",["T_VARIABLE","$name",113],"]",")",";",["T_WHITESPACE","\n        ",113],"}",["T_WHITESPACE","\n\n        ",114],["T_RETURN","return",116],["T_WHITESPACE"," ",116],["T_VARIABLE","$found",116],";",["T_WHITESPACE","\n    ",116],"}",["T_WHITESPACE","\n\n    ",117],["T_DOC_COMMENT","\/**\n     * Get an array of all available queues\n     *\n     * Not all adapters support getQueues(), use isSupported('getQueues')\n     * to determine if the adapter supports this feature.\n     *\n     * @return array\n     *\/",119],["T_WHITESPACE","\n    ",126],["T_PUBLIC","public",127],["T_WHITESPACE"," ",127],["T_FUNCTION","function",127],["T_WHITESPACE"," ",127],["T_STRING","getQueues",127],"(",")",["T_WHITESPACE","\n    ",127],"{",["T_WHITESPACE","\n        ",128],["T_RETURN","return",129],["T_WHITESPACE"," ",129],["T_STRING","array_keys",129],"(",["T_VARIABLE","$this",129],["T_OBJECT_OPERATOR","->",129],["T_STRING","_data",129],")",";",["T_WHITESPACE","\n    ",129],"}",["T_WHITESPACE","\n\n    ",130],["T_DOC_COMMENT","\/**\n     * Return the approximate number of messages in the queue\n     *\n     * @param  Zend_Queue $queue\n     * @return integer\n     * @throws Zend_Queue_Exception\n     *\/",132],["T_WHITESPACE","\n    ",138],["T_PUBLIC","public",139],["T_WHITESPACE"," ",139],["T_FUNCTION","function",139],["T_WHITESPACE"," ",139],["T_STRING","count",139],"(",["T_STRING","Zend_Queue",139],["T_WHITESPACE"," ",139],["T_VARIABLE","$queue",139],"=",["T_STRING","null",139],")",["T_WHITESPACE","\n    ",139],"{",["T_WHITESPACE","\n        ",140],["T_IF","if",141],["T_WHITESPACE"," ",141],"(",["T_VARIABLE","$queue",141],["T_WHITESPACE"," ",141],["T_IS_IDENTICAL","===",141],["T_WHITESPACE"," ",141],["T_STRING","null",141],")",["T_WHITESPACE"," ",141],"{",["T_WHITESPACE","\n            ",141],["T_VARIABLE","$queue",142],["T_WHITESPACE"," ",142],"=",["T_WHITESPACE"," ",142],["T_VARIABLE","$this",142],["T_OBJECT_OPERATOR","->",142],["T_STRING","_queue",142],";",["T_WHITESPACE","\n        ",142],"}",["T_WHITESPACE","\n\n        ",143],["T_IF","if",145],["T_WHITESPACE"," ",145],"(","!",["T_ISSET","isset",145],"(",["T_VARIABLE","$this",145],["T_OBJECT_OPERATOR","->",145],["T_STRING","_data",145],"[",["T_VARIABLE","$queue",145],["T_OBJECT_OPERATOR","->",145],["T_STRING","getName",145],"(",")","]",")",")",["T_WHITESPACE"," ",145],"{",["T_WHITESPACE","\n            ",145],["T_DOC_COMMENT","\/**\n             * @see Zend_Queue_Exception\n             *\/",146],["T_WHITESPACE","\n            ",148],["T_COMMENT","#require_once 'Zend\/Queue\/Exception.php';\n",149],["T_WHITESPACE","            ",150],["T_THROW","throw",150],["T_WHITESPACE"," ",150],["T_NEW","new",150],["T_WHITESPACE"," ",150],["T_STRING","Zend_Queue_Exception",150],"(",["T_CONSTANT_ENCAPSED_STRING","'Queue does not exist'",150],")",";",["T_WHITESPACE","\n        ",150],"}",["T_WHITESPACE","\n\n        ",151],["T_RETURN","return",153],["T_WHITESPACE"," ",153],["T_STRING","count",153],"(",["T_VARIABLE","$this",153],["T_OBJECT_OPERATOR","->",153],["T_STRING","_data",153],"[",["T_VARIABLE","$queue",153],["T_OBJECT_OPERATOR","->",153],["T_STRING","getName",153],"(",")","]",")",";",["T_WHITESPACE","\n    ",153],"}",["T_WHITESPACE","\n\n    ",154],["T_COMMENT","\/********************************************************************\n    * Messsage management functions\n     *********************************************************************\/",156],["T_WHITESPACE","\n\n    ",158],["T_DOC_COMMENT","\/**\n     * Send a message to the queue\n     *\n     * @param  string     $message Message to send to the active queue\n     * @param  Zend_Queue $queue\n     * @return Zend_Queue_Message\n     * @throws Zend_Queue_Exception\n     *\/",160],["T_WHITESPACE","\n    ",167],["T_PUBLIC","public",168],["T_WHITESPACE"," ",168],["T_FUNCTION","function",168],["T_WHITESPACE"," ",168],["T_STRING","send",168],"(",["T_VARIABLE","$message",168],",",["T_WHITESPACE"," ",168],["T_STRING","Zend_Queue",168],["T_WHITESPACE"," ",168],["T_VARIABLE","$queue",168],"=",["T_STRING","null",168],")",["T_WHITESPACE","\n    ",168],"{",["T_WHITESPACE","\n        ",169],["T_IF","if",170],["T_WHITESPACE"," ",170],"(",["T_VARIABLE","$queue",170],["T_WHITESPACE"," ",170],["T_IS_IDENTICAL","===",170],["T_WHITESPACE"," ",170],["T_STRING","null",170],")",["T_WHITESPACE"," ",170],"{",["T_WHITESPACE","\n            ",170],["T_VARIABLE","$queue",171],["T_WHITESPACE"," ",171],"=",["T_WHITESPACE"," ",171],["T_VARIABLE","$this",171],["T_OBJECT_OPERATOR","->",171],["T_STRING","_queue",171],";",["T_WHITESPACE","\n        ",171],"}",["T_WHITESPACE","\n\n        ",172],["T_IF","if",174],["T_WHITESPACE"," ",174],"(","!",["T_VARIABLE","$this",174],["T_OBJECT_OPERATOR","->",174],["T_STRING","isExists",174],"(",["T_VARIABLE","$queue",174],["T_OBJECT_OPERATOR","->",174],["T_STRING","getName",174],"(",")",")",")",["T_WHITESPACE"," ",174],"{",["T_WHITESPACE","\n            ",174],["T_COMMENT","#require_once 'Zend\/Queue\/Exception.php';\n",175],["T_WHITESPACE","            ",176],["T_THROW","throw",176],["T_WHITESPACE"," ",176],["T_NEW","new",176],["T_WHITESPACE"," ",176],["T_STRING","Zend_Queue_Exception",176],"(",["T_CONSTANT_ENCAPSED_STRING","'Queue does not exist:'",176],["T_WHITESPACE"," ",176],".",["T_WHITESPACE"," ",176],["T_VARIABLE","$queue",176],["T_OBJECT_OPERATOR","->",176],["T_STRING","getName",176],"(",")",")",";",["T_WHITESPACE","\n        ",176],"}",["T_WHITESPACE","\n\n        ",177],["T_COMMENT","\/\/ create the message\n",179],["T_WHITESPACE","        ",180],["T_VARIABLE","$data",180],["T_WHITESPACE"," ",180],"=",["T_WHITESPACE"," ",180],["T_ARRAY","array",180],"(",["T_WHITESPACE","\n            ",180],["T_CONSTANT_ENCAPSED_STRING","'message_id'",181],["T_WHITESPACE"," ",181],["T_DOUBLE_ARROW","=>",181],["T_WHITESPACE"," ",181],["T_STRING","md5",181],"(",["T_STRING","uniqid",181],"(",["T_STRING","rand",181],"(",")",",",["T_WHITESPACE"," ",181],["T_STRING","true",181],")",")",",",["T_WHITESPACE","\n            ",181],["T_CONSTANT_ENCAPSED_STRING","'body'",182],["T_WHITESPACE","       ",182],["T_DOUBLE_ARROW","=>",182],["T_WHITESPACE"," ",182],["T_VARIABLE","$message",182],",",["T_WHITESPACE","\n            ",182],["T_CONSTANT_ENCAPSED_STRING","'md5'",183],["T_WHITESPACE","        ",183],["T_DOUBLE_ARROW","=>",183],["T_WHITESPACE"," ",183],["T_STRING","md5",183],"(",["T_VARIABLE","$message",183],")",",",["T_WHITESPACE","\n            ",183],["T_CONSTANT_ENCAPSED_STRING","'handle'",184],["T_WHITESPACE","     ",184],["T_DOUBLE_ARROW","=>",184],["T_WHITESPACE"," ",184],["T_STRING","null",184],",",["T_WHITESPACE","\n            ",184],["T_CONSTANT_ENCAPSED_STRING","'created'",185],["T_WHITESPACE","    ",185],["T_DOUBLE_ARROW","=>",185],["T_WHITESPACE"," ",185],["T_STRING","time",185],"(",")",",",["T_WHITESPACE","\n            ",185],["T_CONSTANT_ENCAPSED_STRING","'queue_name'",186],["T_WHITESPACE"," ",186],["T_DOUBLE_ARROW","=>",186],["T_WHITESPACE"," ",186],["T_VARIABLE","$queue",186],["T_OBJECT_OPERATOR","->",186],["T_STRING","getName",186],"(",")",",",["T_WHITESPACE","\n        ",186],")",";",["T_WHITESPACE","\n\n        ",187],["T_COMMENT","\/\/ add $data to the \"queue\"\n",189],["T_WHITESPACE","        ",190],["T_VARIABLE","$this",190],["T_OBJECT_OPERATOR","->",190],["T_STRING","_data",190],"[",["T_VARIABLE","$queue",190],["T_OBJECT_OPERATOR","->",190],["T_STRING","getName",190],"(",")","]","[","]",["T_WHITESPACE"," ",190],"=",["T_WHITESPACE"," ",190],["T_VARIABLE","$data",190],";",["T_WHITESPACE","\n\n        ",190],["T_VARIABLE","$options",192],["T_WHITESPACE"," ",192],"=",["T_WHITESPACE"," ",192],["T_ARRAY","array",192],"(",["T_WHITESPACE","\n            ",192],["T_CONSTANT_ENCAPSED_STRING","'queue'",193],["T_WHITESPACE"," ",193],["T_DOUBLE_ARROW","=>",193],["T_WHITESPACE"," ",193],["T_VARIABLE","$queue",193],",",["T_WHITESPACE","\n            ",193],["T_CONSTANT_ENCAPSED_STRING","'data'",194],["T_WHITESPACE","  ",194],["T_DOUBLE_ARROW","=>",194],["T_WHITESPACE"," ",194],["T_VARIABLE","$data",194],",",["T_WHITESPACE","\n        ",194],")",";",["T_WHITESPACE","\n\n        ",195],["T_VARIABLE","$classname",197],["T_WHITESPACE"," ",197],"=",["T_WHITESPACE"," ",197],["T_VARIABLE","$queue",197],["T_OBJECT_OPERATOR","->",197],["T_STRING","getMessageClass",197],"(",")",";",["T_WHITESPACE","\n        ",197],["T_IF","if",198],["T_WHITESPACE"," ",198],"(","!",["T_STRING","class_exists",198],"(",["T_VARIABLE","$classname",198],")",")",["T_WHITESPACE"," ",198],"{",["T_WHITESPACE","\n            ",198],["T_COMMENT","#require_once 'Zend\/Loader.php';\n",199],["T_WHITESPACE","            ",200],["T_STRING","Zend_Loader",200],["T_DOUBLE_COLON","::",200],["T_STRING","loadClass",200],"(",["T_VARIABLE","$classname",200],")",";",["T_WHITESPACE","\n        ",200],"}",["T_WHITESPACE","\n        ",201],["T_RETURN","return",202],["T_WHITESPACE"," ",202],["T_NEW","new",202],["T_WHITESPACE"," ",202],["T_VARIABLE","$classname",202],"(",["T_VARIABLE","$options",202],")",";",["T_WHITESPACE","\n    ",202],"}",["T_WHITESPACE","\n\n    ",203],["T_DOC_COMMENT","\/**\n     * Get messages in the queue\n     *\n     * @param  integer    $maxMessages  Maximum number of messages to return\n     * @param  integer    $timeout      Visibility timeout for these messages\n     * @param  Zend_Queue $queue\n     * @return Zend_Queue_Message_Iterator\n     *\/",205],["T_WHITESPACE","\n    ",212],["T_PUBLIC","public",213],["T_WHITESPACE"," ",213],["T_FUNCTION","function",213],["T_WHITESPACE"," ",213],["T_STRING","receive",213],"(",["T_VARIABLE","$maxMessages",213],["T_WHITESPACE"," ",213],"=",["T_WHITESPACE"," ",213],["T_STRING","null",213],",",["T_WHITESPACE"," ",213],["T_VARIABLE","$timeout",213],["T_WHITESPACE"," ",213],"=",["T_WHITESPACE"," ",213],["T_STRING","null",213],",",["T_WHITESPACE"," ",213],["T_STRING","Zend_Queue",213],["T_WHITESPACE"," ",213],["T_VARIABLE","$queue",213],["T_WHITESPACE"," ",213],"=",["T_WHITESPACE"," ",213],["T_STRING","null",213],")",["T_WHITESPACE","\n    ",213],"{",["T_WHITESPACE","\n        ",214],["T_IF","if",215],["T_WHITESPACE"," ",215],"(",["T_VARIABLE","$maxMessages",215],["T_WHITESPACE"," ",215],["T_IS_IDENTICAL","===",215],["T_WHITESPACE"," ",215],["T_STRING","null",215],")",["T_WHITESPACE"," ",215],"{",["T_WHITESPACE","\n            ",215],["T_VARIABLE","$maxMessages",216],["T_WHITESPACE"," ",216],"=",["T_WHITESPACE"," ",216],["T_LNUMBER","1",216],";",["T_WHITESPACE","\n        ",216],"}",["T_WHITESPACE","\n        ",217],["T_IF","if",218],["T_WHITESPACE"," ",218],"(",["T_VARIABLE","$timeout",218],["T_WHITESPACE"," ",218],["T_IS_IDENTICAL","===",218],["T_WHITESPACE"," ",218],["T_STRING","null",218],")",["T_WHITESPACE"," ",218],"{",["T_WHITESPACE","\n            ",218],["T_VARIABLE","$timeout",219],["T_WHITESPACE"," ",219],"=",["T_WHITESPACE"," ",219],["T_STRING","self",219],["T_DOUBLE_COLON","::",219],["T_STRING","RECEIVE_TIMEOUT_DEFAULT",219],";",["T_WHITESPACE","\n        ",219],"}",["T_WHITESPACE","\n        ",220],["T_IF","if",221],["T_WHITESPACE"," ",221],"(",["T_VARIABLE","$queue",221],["T_WHITESPACE"," ",221],["T_IS_IDENTICAL","===",221],["T_WHITESPACE"," ",221],["T_STRING","null",221],")",["T_WHITESPACE"," ",221],"{",["T_WHITESPACE","\n            ",221],["T_VARIABLE","$queue",222],["T_WHITESPACE"," ",222],"=",["T_WHITESPACE"," ",222],["T_VARIABLE","$this",222],["T_OBJECT_OPERATOR","->",222],["T_STRING","_queue",222],";",["T_WHITESPACE","\n        ",222],"}",["T_WHITESPACE","\n\n        ",223],["T_VARIABLE","$data",225],["T_WHITESPACE","       ",225],"=",["T_WHITESPACE"," ",225],["T_ARRAY","array",225],"(",")",";",["T_WHITESPACE","\n        ",225],["T_IF","if",226],["T_WHITESPACE"," ",226],"(",["T_VARIABLE","$maxMessages",226],["T_WHITESPACE"," ",226],">",["T_WHITESPACE"," ",226],["T_LNUMBER","0",226],")",["T_WHITESPACE"," ",226],"{",["T_WHITESPACE","\n            ",226],["T_VARIABLE","$start_time",227],["T_WHITESPACE"," ",227],"=",["T_WHITESPACE"," ",227],["T_STRING","microtime",227],"(",["T_STRING","true",227],")",";",["T_WHITESPACE","\n\n            ",227],["T_VARIABLE","$count",229],["T_WHITESPACE"," ",229],"=",["T_WHITESPACE"," ",229],["T_LNUMBER","0",229],";",["T_WHITESPACE","\n            ",229],["T_VARIABLE","$temp",230],["T_WHITESPACE"," ",230],"=",["T_WHITESPACE"," ",230],"&",["T_VARIABLE","$this",230],["T_OBJECT_OPERATOR","->",230],["T_STRING","_data",230],"[",["T_VARIABLE","$queue",230],["T_OBJECT_OPERATOR","->",230],["T_STRING","getName",230],"(",")","]",";",["T_WHITESPACE","\n            ",230],["T_FOREACH","foreach",231],["T_WHITESPACE"," ",231],"(",["T_VARIABLE","$temp",231],["T_WHITESPACE"," ",231],["T_AS","as",231],["T_WHITESPACE"," ",231],["T_VARIABLE","$key",231],["T_DOUBLE_ARROW","=>",231],"&",["T_VARIABLE","$msg",231],")",["T_WHITESPACE"," ",231],"{",["T_WHITESPACE","\n                ",231],["T_COMMENT","\/\/ count check has to be first, as someone can ask for 0 messages\n",232],["T_WHITESPACE","                ",233],["T_COMMENT","\/\/ ZF-7650\n",233],["T_WHITESPACE","                ",234],["T_IF","if",234],["T_WHITESPACE"," ",234],"(",["T_VARIABLE","$count",234],["T_WHITESPACE"," ",234],["T_IS_GREATER_OR_EQUAL",">=",234],["T_WHITESPACE"," ",234],["T_VARIABLE","$maxMessages",234],")",["T_WHITESPACE"," ",234],"{",["T_WHITESPACE","\n                    ",234],["T_BREAK","break",235],";",["T_WHITESPACE","\n                ",235],"}",["T_WHITESPACE","\n\n                ",236],["T_IF","if",238],["T_WHITESPACE"," ",238],"(","(",["T_VARIABLE","$msg",238],"[",["T_CONSTANT_ENCAPSED_STRING","'handle'",238],"]",["T_WHITESPACE"," ",238],["T_IS_IDENTICAL","===",238],["T_WHITESPACE"," ",238],["T_STRING","null",238],")",["T_WHITESPACE","\n                    ",238],["T_BOOLEAN_OR","||",239],["T_WHITESPACE"," ",239],"(",["T_VARIABLE","$msg",239],"[",["T_CONSTANT_ENCAPSED_STRING","'timeout'",239],"]",["T_WHITESPACE"," ",239],"+",["T_WHITESPACE"," ",239],["T_VARIABLE","$timeout",239],["T_WHITESPACE"," ",239],"<",["T_WHITESPACE"," ",239],["T_VARIABLE","$start_time",239],")",["T_WHITESPACE","\n                ",239],")",["T_WHITESPACE"," ",240],"{",["T_WHITESPACE","\n                    ",240],["T_VARIABLE","$msg",241],"[",["T_CONSTANT_ENCAPSED_STRING","'handle'",241],"]",["T_WHITESPACE","  ",241],"=",["T_WHITESPACE"," ",241],["T_STRING","md5",241],"(",["T_STRING","uniqid",241],"(",["T_STRING","rand",241],"(",")",",",["T_WHITESPACE"," ",241],["T_STRING","true",241],")",")",";",["T_WHITESPACE","\n                    ",241],["T_VARIABLE","$msg",242],"[",["T_CONSTANT_ENCAPSED_STRING","'timeout'",242],"]",["T_WHITESPACE"," ",242],"=",["T_WHITESPACE"," ",242],["T_STRING","microtime",242],"(",["T_STRING","true",242],")",";",["T_WHITESPACE","\n                    ",242],["T_VARIABLE","$data",243],"[","]",["T_WHITESPACE"," ",243],"=",["T_WHITESPACE"," ",243],["T_VARIABLE","$msg",243],";",["T_WHITESPACE","\n                    ",243],["T_VARIABLE","$count",244],["T_INC","++",244],";",["T_WHITESPACE","\n                ",244],"}",["T_WHITESPACE","\n\n            ",245],"}",["T_WHITESPACE","\n        ",247],"}",["T_WHITESPACE","\n\n        ",248],["T_VARIABLE","$options",250],["T_WHITESPACE"," ",250],"=",["T_WHITESPACE"," ",250],["T_ARRAY","array",250],"(",["T_WHITESPACE","\n            ",250],["T_CONSTANT_ENCAPSED_STRING","'queue'",251],["T_WHITESPACE","        ",251],["T_DOUBLE_ARROW","=>",251],["T_WHITESPACE"," ",251],["T_VARIABLE","$queue",251],",",["T_WHITESPACE","\n            ",251],["T_CONSTANT_ENCAPSED_STRING","'data'",252],["T_WHITESPACE","         ",252],["T_DOUBLE_ARROW","=>",252],["T_WHITESPACE"," ",252],["T_VARIABLE","$data",252],",",["T_WHITESPACE","\n            ",252],["T_CONSTANT_ENCAPSED_STRING","'messageClass'",253],["T_WHITESPACE"," ",253],["T_DOUBLE_ARROW","=>",253],["T_WHITESPACE"," ",253],["T_VARIABLE","$queue",253],["T_OBJECT_OPERATOR","->",253],["T_STRING","getMessageClass",253],"(",")",",",["T_WHITESPACE","\n        ",253],")",";",["T_WHITESPACE","\n\n        ",254],["T_VARIABLE","$classname",256],["T_WHITESPACE"," ",256],"=",["T_WHITESPACE"," ",256],["T_VARIABLE","$queue",256],["T_OBJECT_OPERATOR","->",256],["T_STRING","getMessageSetClass",256],"(",")",";",["T_WHITESPACE","\n        ",256],["T_IF","if",257],["T_WHITESPACE"," ",257],"(","!",["T_STRING","class_exists",257],"(",["T_VARIABLE","$classname",257],")",")",["T_WHITESPACE"," ",257],"{",["T_WHITESPACE","\n            ",257],["T_COMMENT","#require_once 'Zend\/Loader.php';\n",258],["T_WHITESPACE","            ",259],["T_STRING","Zend_Loader",259],["T_DOUBLE_COLON","::",259],["T_STRING","loadClass",259],"(",["T_VARIABLE","$classname",259],")",";",["T_WHITESPACE","\n        ",259],"}",["T_WHITESPACE","\n        ",260],["T_RETURN","return",261],["T_WHITESPACE"," ",261],["T_NEW","new",261],["T_WHITESPACE"," ",261],["T_VARIABLE","$classname",261],"(",["T_VARIABLE","$options",261],")",";",["T_WHITESPACE","\n    ",261],"}",["T_WHITESPACE","\n\n    ",262],["T_DOC_COMMENT","\/**\n     * Delete a message from the queue\n     *\n     * Returns true if the message is deleted, false if the deletion is\n     * unsuccessful.\n     *\n     * @param  Zend_Queue_Message $message\n     * @return boolean\n     * @throws Zend_Queue_Exception\n     *\/",264],["T_WHITESPACE","\n    ",273],["T_PUBLIC","public",274],["T_WHITESPACE"," ",274],["T_FUNCTION","function",274],["T_WHITESPACE"," ",274],["T_STRING","deleteMessage",274],"(",["T_STRING","Zend_Queue_Message",274],["T_WHITESPACE"," ",274],["T_VARIABLE","$message",274],")",["T_WHITESPACE","\n    ",274],"{",["T_WHITESPACE","\n        ",275],["T_COMMENT","\/\/ load the queue\n",276],["T_WHITESPACE","        ",277],["T_VARIABLE","$queue",277],["T_WHITESPACE"," ",277],"=",["T_WHITESPACE"," ",277],"&",["T_VARIABLE","$this",277],["T_OBJECT_OPERATOR","->",277],["T_STRING","_data",277],"[",["T_VARIABLE","$message",277],["T_OBJECT_OPERATOR","->",277],["T_STRING","queue_name",277],"]",";",["T_WHITESPACE","\n\n        ",277],["T_FOREACH","foreach",279],["T_WHITESPACE"," ",279],"(",["T_VARIABLE","$queue",279],["T_WHITESPACE"," ",279],["T_AS","as",279],["T_WHITESPACE"," ",279],["T_VARIABLE","$key",279],["T_WHITESPACE"," ",279],["T_DOUBLE_ARROW","=>",279],["T_WHITESPACE"," ",279],"&",["T_VARIABLE","$msg",279],")",["T_WHITESPACE"," ",279],"{",["T_WHITESPACE","\n            ",279],["T_IF","if",280],["T_WHITESPACE"," ",280],"(",["T_VARIABLE","$msg",280],"[",["T_CONSTANT_ENCAPSED_STRING","'handle'",280],"]",["T_WHITESPACE"," ",280],["T_IS_EQUAL","==",280],["T_WHITESPACE"," ",280],["T_VARIABLE","$message",280],["T_OBJECT_OPERATOR","->",280],["T_STRING","handle",280],")",["T_WHITESPACE"," ",280],"{",["T_WHITESPACE","\n                ",280],["T_UNSET","unset",281],"(",["T_VARIABLE","$queue",281],"[",["T_VARIABLE","$key",281],"]",")",";",["T_WHITESPACE","\n                ",281],["T_RETURN","return",282],["T_WHITESPACE"," ",282],["T_STRING","true",282],";",["T_WHITESPACE","\n            ",282],"}",["T_WHITESPACE","\n        ",283],"}",["T_WHITESPACE","\n\n        ",284],["T_RETURN","return",286],["T_WHITESPACE"," ",286],["T_STRING","false",286],";",["T_WHITESPACE","\n    ",286],"}",["T_WHITESPACE","\n\n    ",287],["T_COMMENT","\/********************************************************************\n     * Supporting functions\n     *********************************************************************\/",289],["T_WHITESPACE","\n\n    ",291],["T_DOC_COMMENT","\/**\n     * Return a list of queue capabilities functions\n     *\n     * $array['function name'] = true or false\n     * true is supported, false is not supported.\n     *\n     * @param  string $name\n     * @return array\n     *\/",293],["T_WHITESPACE","\n    ",301],["T_PUBLIC","public",302],["T_WHITESPACE"," ",302],["T_FUNCTION","function",302],["T_WHITESPACE"," ",302],["T_STRING","getCapabilities",302],"(",")",["T_WHITESPACE","\n    ",302],"{",["T_WHITESPACE","\n        ",303],["T_RETURN","return",304],["T_WHITESPACE"," ",304],["T_ARRAY","array",304],"(",["T_WHITESPACE","\n            ",304],["T_CONSTANT_ENCAPSED_STRING","'create'",305],["T_WHITESPACE","        ",305],["T_DOUBLE_ARROW","=>",305],["T_WHITESPACE"," ",305],["T_STRING","true",305],",",["T_WHITESPACE","\n            ",305],["T_CONSTANT_ENCAPSED_STRING","'delete'",306],["T_WHITESPACE","        ",306],["T_DOUBLE_ARROW","=>",306],["T_WHITESPACE"," ",306],["T_STRING","true",306],",",["T_WHITESPACE","\n            ",306],["T_CONSTANT_ENCAPSED_STRING","'send'",307],["T_WHITESPACE","          ",307],["T_DOUBLE_ARROW","=>",307],["T_WHITESPACE"," ",307],["T_STRING","true",307],",",["T_WHITESPACE","\n            ",307],["T_CONSTANT_ENCAPSED_STRING","'receive'",308],["T_WHITESPACE","       ",308],["T_DOUBLE_ARROW","=>",308],["T_WHITESPACE"," ",308],["T_STRING","true",308],",",["T_WHITESPACE","\n            ",308],["T_CONSTANT_ENCAPSED_STRING","'deleteMessage'",309],["T_WHITESPACE"," ",309],["T_DOUBLE_ARROW","=>",309],["T_WHITESPACE"," ",309],["T_STRING","true",309],",",["T_WHITESPACE","\n            ",309],["T_CONSTANT_ENCAPSED_STRING","'getQueues'",310],["T_WHITESPACE","     ",310],["T_DOUBLE_ARROW","=>",310],["T_WHITESPACE"," ",310],["T_STRING","true",310],",",["T_WHITESPACE","\n            ",310],["T_CONSTANT_ENCAPSED_STRING","'count'",311],["T_WHITESPACE","         ",311],["T_DOUBLE_ARROW","=>",311],["T_WHITESPACE"," ",311],["T_STRING","true",311],",",["T_WHITESPACE","\n            ",311],["T_CONSTANT_ENCAPSED_STRING","'isExists'",312],["T_WHITESPACE","      ",312],["T_DOUBLE_ARROW","=>",312],["T_WHITESPACE"," ",312],["T_STRING","true",312],",",["T_WHITESPACE","\n        ",312],")",";",["T_WHITESPACE","\n    ",313],"}",["T_WHITESPACE","\n\n    ",314],["T_COMMENT","\/********************************************************************\n    * Functions that are not part of the Zend_Queue_Adapter_Abstract\n     *********************************************************************\/",316],["T_WHITESPACE","\n\n    ",318],["T_DOC_COMMENT","\/**\n     * serialize\n     *\/",320],["T_WHITESPACE","\n    ",322],["T_PUBLIC","public",323],["T_WHITESPACE"," ",323],["T_FUNCTION","function",323],["T_WHITESPACE"," ",323],["T_STRING","__sleep",323],"(",")",["T_WHITESPACE","\n    ",323],"{",["T_WHITESPACE","\n        ",324],["T_RETURN","return",325],["T_WHITESPACE"," ",325],["T_ARRAY","array",325],"(",["T_CONSTANT_ENCAPSED_STRING","'_data'",325],")",";",["T_WHITESPACE","\n    ",325],"}",["T_WHITESPACE","\n\n    ",326],["T_COMMENT","\/*\n     * These functions are debug helpers.\n     *\/",328],["T_WHITESPACE","\n\n    ",330],["T_DOC_COMMENT","\/**\n     * returns underlying _data array\n     * $queue->getAdapter()->getData();\n     *\n     * @return $this;\n     *\/",332],["T_WHITESPACE","\n    ",337],["T_PUBLIC","public",338],["T_WHITESPACE"," ",338],["T_FUNCTION","function",338],["T_WHITESPACE"," ",338],["T_STRING","getData",338],"(",")",["T_WHITESPACE","\n    ",338],"{",["T_WHITESPACE","\n        ",339],["T_RETURN","return",340],["T_WHITESPACE"," ",340],["T_VARIABLE","$this",340],["T_OBJECT_OPERATOR","->",340],["T_STRING","_data",340],";",["T_WHITESPACE","\n    ",340],"}",["T_WHITESPACE","\n\n    ",341],["T_DOC_COMMENT","\/**\n     * sets the underlying _data array\n     * $queue->getAdapter()->setData($data);\n     *\n     * @param array $data\n     * @return $this;\n     *\/",343],["T_WHITESPACE","\n    ",349],["T_PUBLIC","public",350],["T_WHITESPACE"," ",350],["T_FUNCTION","function",350],["T_WHITESPACE"," ",350],["T_STRING","setData",350],"(",["T_VARIABLE","$data",350],")",["T_WHITESPACE","\n    ",350],"{",["T_WHITESPACE","\n        ",351],["T_VARIABLE","$this",352],["T_OBJECT_OPERATOR","->",352],["T_STRING","_data",352],["T_WHITESPACE"," ",352],"=",["T_WHITESPACE"," ",352],["T_VARIABLE","$data",352],";",["T_WHITESPACE","\n        ",352],["T_RETURN","return",353],["T_WHITESPACE"," ",353],["T_VARIABLE","$this",353],";",["T_WHITESPACE","\n    ",353],"}",["T_WHITESPACE","\n",354],"}",["T_WHITESPACE","\n",355]]
[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Zend Framework\n *\n * LICENSE\n *\n * This source file is subject to the new BSD license that is bundled\n * with this package in the file LICENSE.txt.\n * It is also available through the world-wide-web at this URL:\n * http:\/\/framework.zend.com\/license\/new-bsd\n * If you did not receive a copy of the license and are unable to\n * obtain it through the world-wide-web, please send an email\n * to license@zend.com so we can send you a copy immediately.\n *\n * @category   Zend\n * @package    Zend_Queue\n * @subpackage Adapter\n * @copyright  Copyright (c) 2005-2015 Zend Technologies USA Inc. (http:\/\/www.zend.com)\n * @license    http:\/\/framework.zend.com\/license\/new-bsd     New BSD License\n * @version    $Id$\n *\/",2],["T_WHITESPACE","\n\n",21],["T_DOC_COMMENT","\/**\n * @see Zend_Queue_Adapter_AdapterAbstract\n *\/",23],["T_WHITESPACE","\n",25],["T_COMMENT","#require_once 'Zend\/Queue\/Adapter\/AdapterAbstract.php';\n",26],["T_WHITESPACE","\n",27],["T_DOC_COMMENT","\/**\n * Zend Platform JobQueue adapter\n *\n * @category   Zend\n * @package    Zend_Queue\n * @subpackage Adapter\n * @copyright  Copyright (c) 2005-2015 Zend Technologies USA Inc. (http:\/\/www.zend.com)\n * @license    http:\/\/framework.zend.com\/license\/new-bsd     New BSD License\n *\/",28],["T_WHITESPACE","\n",36],["T_CLASS","class",37],["T_WHITESPACE"," ",37],["T_STRING","Zend_Queue_Adapter_PlatformJobQueue",37],["T_WHITESPACE"," ",37],["T_EXTENDS","extends",37],["T_WHITESPACE"," ",37],["T_STRING","Zend_Queue_Adapter_AdapterAbstract",37],["T_WHITESPACE","\n",37],"{",["T_WHITESPACE","\n    ",38],["T_DOC_COMMENT","\/**\n     * @var ZendApi_JobQueue\n     *\/",39],["T_WHITESPACE","\n    ",41],["T_PROTECTED","protected",42],["T_WHITESPACE"," ",42],["T_VARIABLE","$_zendQueue",42],";",["T_WHITESPACE","\n\n    ",42],["T_DOC_COMMENT","\/**\n     * Constructor\n     *\n     * @param  array|Zend_Config $options\n     * @param  Zend_Queue|null $queue\n     * @return void\n     *\/",44],["T_WHITESPACE","\n    ",50],["T_PUBLIC","public",51],["T_WHITESPACE"," ",51],["T_FUNCTION","function",51],["T_WHITESPACE"," ",51],["T_STRING","__construct",51],"(",["T_VARIABLE","$options",51],",",["T_WHITESPACE"," ",51],["T_STRING","Zend_Queue",51],["T_WHITESPACE"," ",51],["T_VARIABLE","$queue",51],["T_WHITESPACE"," ",51],"=",["T_WHITESPACE"," ",51],["T_STRING","null",51],")",["T_WHITESPACE","\n    ",51],"{",["T_WHITESPACE","\n        ",52],["T_STRING","parent",53],["T_DOUBLE_COLON","::",53],["T_STRING","__construct",53],"(",["T_VARIABLE","$options",53],",",["T_WHITESPACE"," ",53],["T_VARIABLE","$queue",53],")",";",["T_WHITESPACE","\n\n        ",53],["T_IF","if",55],["T_WHITESPACE"," ",55],"(","!",["T_STRING","extension_loaded",55],"(",["T_CONSTANT_ENCAPSED_STRING","\"jobqueue_client\"",55],")",")",["T_WHITESPACE"," ",55],"{",["T_WHITESPACE","\n            ",55],["T_COMMENT","#require_once 'Zend\/Queue\/Exception.php';\n",56],["T_WHITESPACE","            ",57],["T_THROW","throw",57],["T_WHITESPACE"," ",57],["T_NEW","new",57],["T_WHITESPACE"," ",57],["T_STRING","Zend_Queue_Exception",57],"(",["T_CONSTANT_ENCAPSED_STRING","'Platform Job Queue extension does not appear to be loaded'",57],")",";",["T_WHITESPACE","\n        ",57],"}",["T_WHITESPACE","\n\n        ",58],["T_IF","if",60],["T_WHITESPACE"," ",60],"(","!",["T_WHITESPACE"," ",60],["T_ISSET","isset",60],"(",["T_VARIABLE","$this",60],["T_OBJECT_OPERATOR","->",60],["T_STRING","_options",60],"[",["T_CONSTANT_ENCAPSED_STRING","'daemonOptions'",60],"]",")",")",["T_WHITESPACE"," ",60],"{",["T_WHITESPACE","\n            ",60],["T_COMMENT","#require_once 'Zend\/Queue\/Exception.php';\n",61],["T_WHITESPACE","            ",62],["T_THROW","throw",62],["T_WHITESPACE"," ",62],["T_NEW","new",62],["T_WHITESPACE"," ",62],["T_STRING","Zend_Queue_Exception",62],"(",["T_CONSTANT_ENCAPSED_STRING","'Job Queue host and password should be provided'",62],")",";",["T_WHITESPACE","\n        ",62],"}",["T_WHITESPACE","\n\n        ",63],["T_VARIABLE","$options",65],["T_WHITESPACE"," ",65],"=",["T_WHITESPACE"," ",65],["T_VARIABLE","$this",65],["T_OBJECT_OPERATOR","->",65],["T_STRING","_options",65],"[",["T_CONSTANT_ENCAPSED_STRING","'daemonOptions'",65],"]",";",["T_WHITESPACE","\n\n        ",65],["T_IF","if",67],["T_WHITESPACE"," ",67],"(","!",["T_STRING","array_key_exists",67],"(",["T_CONSTANT_ENCAPSED_STRING","'host'",67],",",["T_WHITESPACE"," ",67],["T_VARIABLE","$options",67],")",")",["T_WHITESPACE"," ",67],"{",["T_WHITESPACE","\n            ",67],["T_COMMENT","#require_once 'Zend\/Queue\/Exception.php';\n",68],["T_WHITESPACE","            ",69],["T_THROW","throw",69],["T_WHITESPACE"," ",69],["T_NEW","new",69],["T_WHITESPACE"," ",69],["T_STRING","Zend_Queue_Exception",69],"(",["T_CONSTANT_ENCAPSED_STRING","'Platform Job Queue host should be provided'",69],")",";",["T_WHITESPACE","\n        ",69],"}",["T_WHITESPACE","\n        ",70],["T_IF","if",71],["T_WHITESPACE"," ",71],"(","!",["T_STRING","array_key_exists",71],"(",["T_CONSTANT_ENCAPSED_STRING","'password'",71],",",["T_WHITESPACE"," ",71],["T_VARIABLE","$options",71],")",")",["T_WHITESPACE"," ",71],"{",["T_WHITESPACE","\n            ",71],["T_COMMENT","#require_once 'Zend\/Queue\/Exception.php';\n",72],["T_WHITESPACE","            ",73],["T_THROW","throw",73],["T_WHITESPACE"," ",73],["T_NEW","new",73],["T_WHITESPACE"," ",73],["T_STRING","Zend_Queue_Exception",73],"(",["T_CONSTANT_ENCAPSED_STRING","'Platform Job Queue password should be provided'",73],")",";",["T_WHITESPACE","\n        ",73],"}",["T_WHITESPACE","\n\n        ",74],["T_VARIABLE","$this",76],["T_OBJECT_OPERATOR","->",76],["T_STRING","_zendQueue",76],["T_WHITESPACE"," ",76],"=",["T_WHITESPACE"," ",76],["T_NEW","new",76],["T_WHITESPACE"," ",76],["T_STRING","ZendApi_Queue",76],"(",["T_VARIABLE","$options",76],"[",["T_CONSTANT_ENCAPSED_STRING","'host'",76],"]",")",";",["T_WHITESPACE","\n\n        ",76],["T_IF","if",78],["T_WHITESPACE"," ",78],"(","!",["T_VARIABLE","$this",78],["T_OBJECT_OPERATOR","->",78],["T_STRING","_zendQueue",78],")",["T_WHITESPACE"," ",78],"{",["T_WHITESPACE","\n            ",78],["T_COMMENT","#require_once 'Zend\/Queue\/Exception.php';\n",79],["T_WHITESPACE","            ",80],["T_THROW","throw",80],["T_WHITESPACE"," ",80],["T_NEW","new",80],["T_WHITESPACE"," ",80],["T_STRING","Zend_Queue_Exception",80],"(",["T_CONSTANT_ENCAPSED_STRING","'Platform Job Queue connection failed'",80],")",";",["T_WHITESPACE","\n        ",80],"}",["T_WHITESPACE","\n        ",81],["T_IF","if",82],["T_WHITESPACE"," ",82],"(","!",["T_VARIABLE","$this",82],["T_OBJECT_OPERATOR","->",82],["T_STRING","_zendQueue",82],["T_OBJECT_OPERATOR","->",82],["T_STRING","login",82],"(",["T_VARIABLE","$options",82],"[",["T_CONSTANT_ENCAPSED_STRING","'password'",82],"]",")",")",["T_WHITESPACE"," ",82],"{",["T_WHITESPACE","\n            ",82],["T_COMMENT","#require_once 'Zend\/Queue\/Exception.php';\n",83],["T_WHITESPACE","            ",84],["T_THROW","throw",84],["T_WHITESPACE"," ",84],["T_NEW","new",84],["T_WHITESPACE"," ",84],["T_STRING","Zend_Queue_Exception",84],"(",["T_CONSTANT_ENCAPSED_STRING","'Job Queue login failed'",84],")",";",["T_WHITESPACE","\n        ",84],"}",["T_WHITESPACE","\n\n        ",85],["T_IF","if",87],["T_WHITESPACE"," ",87],"(",["T_VARIABLE","$this",87],["T_OBJECT_OPERATOR","->",87],["T_STRING","_queue",87],")",["T_WHITESPACE"," ",87],"{",["T_WHITESPACE","\n            ",87],["T_VARIABLE","$this",88],["T_OBJECT_OPERATOR","->",88],["T_STRING","_queue",88],["T_OBJECT_OPERATOR","->",88],["T_STRING","setMessageClass",88],"(",["T_CONSTANT_ENCAPSED_STRING","'Zend_Queue_Message_PlatformJob'",88],")",";",["T_WHITESPACE","\n        ",88],"}",["T_WHITESPACE","\n    ",89],"}",["T_WHITESPACE","\n\n    ",90],["T_COMMENT","\/********************************************************************\n     * Queue management functions\n     ********************************************************************\/",92],["T_WHITESPACE","\n\n    ",94],["T_DOC_COMMENT","\/**\n     * Does a queue already exist?\n     *\n     * @param  string $name\n     * @return boolean\n     * @throws Zend_Queue_Exception (not supported)\n     *\/",96],["T_WHITESPACE","\n    ",102],["T_PUBLIC","public",103],["T_WHITESPACE"," ",103],["T_FUNCTION","function",103],["T_WHITESPACE"," ",103],["T_STRING","isExists",103],"(",["T_VARIABLE","$name",103],")",["T_WHITESPACE","\n    ",103],"{",["T_WHITESPACE","\n        ",104],["T_COMMENT","#require_once 'Zend\/Queue\/Exception.php';\n",105],["T_WHITESPACE","        ",106],["T_THROW","throw",106],["T_WHITESPACE"," ",106],["T_NEW","new",106],["T_WHITESPACE"," ",106],["T_STRING","Zend_Queue_Exception",106],"(",["T_CONSTANT_ENCAPSED_STRING","'isExists() is not supported in this adapter'",106],")",";",["T_WHITESPACE","\n    ",106],"}",["T_WHITESPACE","\n\n    ",107],["T_DOC_COMMENT","\/**\n     * Create a new queue\n     *\n     * @param  string  $name    queue name\n     * @param  integer $timeout default visibility timeout\n     * @return void\n     * @throws Zend_Queue_Exception\n     *\/",109],["T_WHITESPACE","\n    ",116],["T_PUBLIC","public",117],["T_WHITESPACE"," ",117],["T_FUNCTION","function",117],["T_WHITESPACE"," ",117],["T_STRING","create",117],"(",["T_VARIABLE","$name",117],",",["T_WHITESPACE"," ",117],["T_VARIABLE","$timeout",117],"=",["T_STRING","null",117],")",["T_WHITESPACE","\n    ",117],"{",["T_WHITESPACE","\n        ",118],["T_COMMENT","#require_once 'Zend\/Queue\/Exception.php';\n",119],["T_WHITESPACE","        ",120],["T_THROW","throw",120],["T_WHITESPACE"," ",120],["T_NEW","new",120],["T_WHITESPACE"," ",120],["T_STRING","Zend_Queue_Exception",120],"(",["T_CONSTANT_ENCAPSED_STRING","'create() is not supported in '",120],["T_WHITESPACE"," ",120],".",["T_WHITESPACE"," ",120],["T_STRING","get_class",120],"(",["T_VARIABLE","$this",120],")",")",";",["T_WHITESPACE","\n    ",120],"}",["T_WHITESPACE","\n\n    ",121],["T_DOC_COMMENT","\/**\n     * Delete a queue and all of its messages\n     *\n     * @param  string $name queue name\n     * @return void\n     * @throws Zend_Queue_Exception\n     *\/",123],["T_WHITESPACE","\n    ",129],["T_PUBLIC","public",130],["T_WHITESPACE"," ",130],["T_FUNCTION","function",130],["T_WHITESPACE"," ",130],["T_STRING","delete",130],"(",["T_VARIABLE","$name",130],")",["T_WHITESPACE","\n    ",130],"{",["T_WHITESPACE","\n        ",131],["T_COMMENT","#require_once 'Zend\/Queue\/Exception.php';\n",132],["T_WHITESPACE","        ",133],["T_THROW","throw",133],["T_WHITESPACE"," ",133],["T_NEW","new",133],["T_WHITESPACE"," ",133],["T_STRING","Zend_Queue_Exception",133],"(",["T_CONSTANT_ENCAPSED_STRING","'delete() is not supported in '",133],["T_WHITESPACE"," ",133],".",["T_WHITESPACE"," ",133],["T_STRING","get_class",133],"(",["T_VARIABLE","$this",133],")",")",";",["T_WHITESPACE","\n    ",133],"}",["T_WHITESPACE","\n\n    ",134],["T_DOC_COMMENT","\/**\n     * Get an array of all available queues\n     *\n     * @return void\n     * @throws Zend_Queue_Exception\n     *\/",136],["T_WHITESPACE","\n    ",141],["T_PUBLIC","public",142],["T_WHITESPACE"," ",142],["T_FUNCTION","function",142],["T_WHITESPACE"," ",142],["T_STRING","getQueues",142],"(",")",["T_WHITESPACE","\n    ",142],"{",["T_WHITESPACE","\n        ",143],["T_COMMENT","#require_once 'Zend\/Queue\/Exception.php';\n",144],["T_WHITESPACE","        ",145],["T_THROW","throw",145],["T_WHITESPACE"," ",145],["T_NEW","new",145],["T_WHITESPACE"," ",145],["T_STRING","Zend_Queue_Exception",145],"(",["T_CONSTANT_ENCAPSED_STRING","'getQueues() is not supported in this adapter'",145],")",";",["T_WHITESPACE","\n    ",145],"}",["T_WHITESPACE","\n\n    ",146],["T_DOC_COMMENT","\/**\n     * Return the approximate number of messages in the queue\n     *\n     * @param  Zend_Queue|null $queue\n     * @return integer\n     *\/",148],["T_WHITESPACE","\n    ",153],["T_PUBLIC","public",154],["T_WHITESPACE"," ",154],["T_FUNCTION","function",154],["T_WHITESPACE"," ",154],["T_STRING","count",154],"(",["T_STRING","Zend_Queue",154],["T_WHITESPACE"," ",154],["T_VARIABLE","$queue",154],["T_WHITESPACE"," ",154],"=",["T_WHITESPACE"," ",154],["T_STRING","null",154],")",["T_WHITESPACE","\n    ",154],"{",["T_WHITESPACE","\n        ",155],["T_IF","if",156],["T_WHITESPACE"," ",156],"(",["T_VARIABLE","$queue",156],["T_WHITESPACE"," ",156],["T_IS_NOT_IDENTICAL","!==",156],["T_WHITESPACE"," ",156],["T_STRING","null",156],")",["T_WHITESPACE"," ",156],"{",["T_WHITESPACE","\n            ",156],["T_COMMENT","#require_once 'Zend\/Queue\/Exception.php';\n",157],["T_WHITESPACE","            ",158],["T_THROW","throw",158],["T_WHITESPACE"," ",158],["T_NEW","new",158],["T_WHITESPACE"," ",158],["T_STRING","Zend_Queue_Exception",158],"(",["T_CONSTANT_ENCAPSED_STRING","'Queue parameter is not supported'",158],")",";",["T_WHITESPACE","\n        ",158],"}",["T_WHITESPACE","\n\n        ",159],["T_RETURN","return",161],["T_WHITESPACE"," ",161],["T_VARIABLE","$this",161],["T_OBJECT_OPERATOR","->",161],["T_STRING","_zendQueue",161],["T_OBJECT_OPERATOR","->",161],["T_STRING","getNumOfJobsInQueue",161],"(",")",";",["T_WHITESPACE","\n    ",161],"}",["T_WHITESPACE","\n\n    ",162],["T_COMMENT","\/********************************************************************\n     * Messsage management functions\n     ********************************************************************\/",164],["T_WHITESPACE","\n\n    ",166],["T_DOC_COMMENT","\/**\n     * Send a message to the queue\n     *\n     * @param  array | ZendAPI_job $message Message to send to the active queue\n     * @param  Zend_Queue $queue     Not supported\n     * @return Zend_Queue_Message\n     * @throws Zend_Queue_Exception\n     *\/",168],["T_WHITESPACE","\n    ",175],["T_PUBLIC","public",176],["T_WHITESPACE"," ",176],["T_FUNCTION","function",176],["T_WHITESPACE"," ",176],["T_STRING","send",176],"(",["T_VARIABLE","$message",176],",",["T_WHITESPACE"," ",176],["T_STRING","Zend_Queue",176],["T_WHITESPACE"," ",176],["T_VARIABLE","$queue",176],["T_WHITESPACE"," ",176],"=",["T_WHITESPACE"," ",176],["T_STRING","null",176],")",["T_WHITESPACE","\n    ",176],"{",["T_WHITESPACE","\n        ",177],["T_IF","if",178],["T_WHITESPACE"," ",178],"(",["T_VARIABLE","$queue",178],["T_WHITESPACE"," ",178],["T_IS_NOT_IDENTICAL","!==",178],["T_WHITESPACE"," ",178],["T_STRING","null",178],")",["T_WHITESPACE"," ",178],"{",["T_WHITESPACE","\n            ",178],["T_COMMENT","#require_once 'Zend\/Queue\/Exception.php';\n",179],["T_WHITESPACE","            ",180],["T_THROW","throw",180],["T_WHITESPACE"," ",180],["T_NEW","new",180],["T_WHITESPACE"," ",180],["T_STRING","Zend_Queue_Exception",180],"(",["T_CONSTANT_ENCAPSED_STRING","'Queue parameter is not supported'",180],")",";",["T_WHITESPACE","\n        ",180],"}",["T_WHITESPACE","\n\n        ",181],["T_COMMENT","\/\/ This adapter can work only for this message type\n",183],["T_WHITESPACE","        ",184],["T_VARIABLE","$classname",184],["T_WHITESPACE"," ",184],"=",["T_WHITESPACE"," ",184],["T_VARIABLE","$this",184],["T_OBJECT_OPERATOR","->",184],["T_STRING","_queue",184],["T_OBJECT_OPERATOR","->",184],["T_STRING","getMessageClass",184],"(",")",";",["T_WHITESPACE","\n        ",184],["T_IF","if",185],["T_WHITESPACE"," ",185],"(","!",["T_STRING","class_exists",185],"(",["T_VARIABLE","$classname",185],")",")",["T_WHITESPACE"," ",185],"{",["T_WHITESPACE","\n            ",185],["T_COMMENT","#require_once 'Zend\/Loader.php';\n",186],["T_WHITESPACE","            ",187],["T_STRING","Zend_Loader",187],["T_DOUBLE_COLON","::",187],["T_STRING","loadClass",187],"(",["T_VARIABLE","$classname",187],")",";",["T_WHITESPACE","\n        ",187],"}",["T_WHITESPACE","\n\n        ",188],["T_IF","if",190],["T_WHITESPACE"," ",190],"(",["T_VARIABLE","$message",190],["T_WHITESPACE"," ",190],["T_INSTANCEOF","instanceof",190],["T_WHITESPACE"," ",190],["T_STRING","ZendAPI_Job",190],")",["T_WHITESPACE"," ",190],"{",["T_WHITESPACE","\n            ",190],["T_VARIABLE","$message",191],["T_WHITESPACE"," ",191],"=",["T_WHITESPACE"," ",191],["T_ARRAY","array",191],"(",["T_CONSTANT_ENCAPSED_STRING","'data'",191],["T_WHITESPACE"," ",191],["T_DOUBLE_ARROW","=>",191],["T_WHITESPACE"," ",191],["T_VARIABLE","$message",191],")",";",["T_WHITESPACE","\n        ",191],"}",["T_WHITESPACE","\n\n        ",192],["T_VARIABLE","$zendApiJob",194],["T_WHITESPACE"," ",194],"=",["T_WHITESPACE"," ",194],["T_NEW","new",194],["T_WHITESPACE"," ",194],["T_VARIABLE","$classname",194],"(",["T_VARIABLE","$message",194],")",";",["T_WHITESPACE","\n\n        ",194],["T_COMMENT","\/\/ Unfortunately, the Platform JQ API is PHP4-style...\n",196],["T_WHITESPACE","        ",197],["T_VARIABLE","$platformJob",197],["T_WHITESPACE"," ",197],"=",["T_WHITESPACE"," ",197],["T_VARIABLE","$zendApiJob",197],["T_OBJECT_OPERATOR","->",197],["T_STRING","getJob",197],"(",")",";",["T_WHITESPACE","\n\n        ",197],["T_VARIABLE","$jobId",199],["T_WHITESPACE"," ",199],"=",["T_WHITESPACE"," ",199],["T_VARIABLE","$this",199],["T_OBJECT_OPERATOR","->",199],["T_STRING","_zendQueue",199],["T_OBJECT_OPERATOR","->",199],["T_STRING","addJob",199],"(",["T_VARIABLE","$platformJob",199],")",";",["T_WHITESPACE","\n\n        ",199],["T_IF","if",201],["T_WHITESPACE"," ",201],"(","!",["T_VARIABLE","$jobId",201],")",["T_WHITESPACE"," ",201],"{",["T_WHITESPACE","\n            ",201],["T_COMMENT","#require_once 'Zend\/Queue\/Exception.php';\n",202],["T_WHITESPACE","            ",203],["T_THROW","throw",203],["T_WHITESPACE"," ",203],["T_NEW","new",203],["T_WHITESPACE"," ",203],["T_STRING","Zend_Queue_Exception",203],"(",["T_CONSTANT_ENCAPSED_STRING","'Failed to add a job to queue: '",203],["T_WHITESPACE","\n                ",203],".",["T_WHITESPACE"," ",204],["T_VARIABLE","$this",204],["T_OBJECT_OPERATOR","->",204],["T_STRING","_zendQueue",204],["T_OBJECT_OPERATOR","->",204],["T_STRING","getLastError",204],"(",")",")",";",["T_WHITESPACE","\n        ",204],"}",["T_WHITESPACE","\n\n        ",205],["T_VARIABLE","$zendApiJob",207],["T_OBJECT_OPERATOR","->",207],["T_STRING","setJobId",207],"(",["T_VARIABLE","$jobId",207],")",";",["T_WHITESPACE","\n        ",207],["T_RETURN","return",208],["T_WHITESPACE"," ",208],["T_VARIABLE","$zendApiJob",208],";",["T_WHITESPACE","\n    ",208],"}",["T_WHITESPACE","\n\n    ",209],["T_DOC_COMMENT","\/**\n     * Get messages in the queue\n     *\n     * @param  integer    $maxMessages  Maximum number of messages to return\n     * @param  integer    $timeout      Ignored\n     * @param  Zend_Queue $queue        Not supported\n     * @throws Zend_Queue_Exception\n     * @return ArrayIterator\n     *\/",211],["T_WHITESPACE","\n    ",219],["T_PUBLIC","public",220],["T_WHITESPACE"," ",220],["T_FUNCTION","function",220],["T_WHITESPACE"," ",220],["T_STRING","receive",220],"(",["T_VARIABLE","$maxMessages",220],["T_WHITESPACE"," ",220],"=",["T_WHITESPACE"," ",220],["T_STRING","null",220],",",["T_WHITESPACE"," ",220],["T_VARIABLE","$timeout",220],["T_WHITESPACE"," ",220],"=",["T_WHITESPACE"," ",220],["T_STRING","null",220],",",["T_WHITESPACE"," ",220],["T_STRING","Zend_Queue",220],["T_WHITESPACE"," ",220],["T_VARIABLE","$queue",220],["T_WHITESPACE"," ",220],"=",["T_WHITESPACE"," ",220],["T_STRING","null",220],")",["T_WHITESPACE","\n    ",220],"{",["T_WHITESPACE","\n        ",221],["T_IF","if",222],["T_WHITESPACE"," ",222],"(",["T_VARIABLE","$maxMessages",222],["T_WHITESPACE"," ",222],["T_IS_IDENTICAL","===",222],["T_WHITESPACE"," ",222],["T_STRING","null",222],")",["T_WHITESPACE"," ",222],"{",["T_WHITESPACE","\n            ",222],["T_VARIABLE","$maxMessages",223],["T_WHITESPACE"," ",223],"=",["T_WHITESPACE"," ",223],["T_LNUMBER","1",223],";",["T_WHITESPACE","\n        ",223],"}",["T_WHITESPACE","\n\n        ",224],["T_IF","if",226],["T_WHITESPACE"," ",226],"(",["T_VARIABLE","$queue",226],["T_WHITESPACE"," ",226],["T_IS_NOT_IDENTICAL","!==",226],["T_WHITESPACE"," ",226],["T_STRING","null",226],")",["T_WHITESPACE"," ",226],"{",["T_WHITESPACE","\n            ",226],["T_COMMENT","#require_once 'Zend\/Queue\/Exception.php';\n",227],["T_WHITESPACE","            ",228],["T_THROW","throw",228],["T_WHITESPACE"," ",228],["T_NEW","new",228],["T_WHITESPACE"," ",228],["T_STRING","Zend_Queue_Exception",228],"(",["T_CONSTANT_ENCAPSED_STRING","'Queue shouldn\\'t be set'",228],")",";",["T_WHITESPACE","\n        ",228],"}",["T_WHITESPACE","\n\n        ",229],["T_VARIABLE","$jobs",231],["T_WHITESPACE"," ",231],"=",["T_WHITESPACE"," ",231],["T_VARIABLE","$this",231],["T_OBJECT_OPERATOR","->",231],["T_STRING","_zendQueue",231],["T_OBJECT_OPERATOR","->",231],["T_STRING","getJobsInQueue",231],"(",["T_STRING","null",231],",",["T_WHITESPACE"," ",231],["T_VARIABLE","$maxMessages",231],",",["T_WHITESPACE"," ",231],["T_STRING","true",231],")",";",["T_WHITESPACE","\n\n        ",231],["T_VARIABLE","$classname",233],["T_WHITESPACE"," ",233],"=",["T_WHITESPACE"," ",233],["T_VARIABLE","$this",233],["T_OBJECT_OPERATOR","->",233],["T_STRING","_queue",233],["T_OBJECT_OPERATOR","->",233],["T_STRING","getMessageClass",233],"(",")",";",["T_WHITESPACE","\n        ",233],["T_IF","if",234],["T_WHITESPACE"," ",234],"(","!",["T_STRING","class_exists",234],"(",["T_VARIABLE","$classname",234],")",")",["T_WHITESPACE"," ",234],"{",["T_WHITESPACE","\n            ",234],["T_COMMENT","#require_once 'Zend\/Loader.php';\n",235],["T_WHITESPACE","            ",236],["T_STRING","Zend_Loader",236],["T_DOUBLE_COLON","::",236],["T_STRING","loadClass",236],"(",["T_VARIABLE","$classname",236],")",";",["T_WHITESPACE","\n        ",236],"}",["T_WHITESPACE","\n\n        ",237],["T_VARIABLE","$options",239],["T_WHITESPACE"," ",239],"=",["T_WHITESPACE"," ",239],["T_ARRAY","array",239],"(",["T_WHITESPACE","\n            ",239],["T_CONSTANT_ENCAPSED_STRING","'queue'",240],["T_WHITESPACE","        ",240],["T_DOUBLE_ARROW","=>",240],["T_WHITESPACE"," ",240],["T_VARIABLE","$this",240],["T_OBJECT_OPERATOR","->",240],["T_STRING","_queue",240],",",["T_WHITESPACE","\n            ",240],["T_CONSTANT_ENCAPSED_STRING","'data'",241],["T_WHITESPACE","         ",241],["T_DOUBLE_ARROW","=>",241],["T_WHITESPACE"," ",241],["T_VARIABLE","$jobs",241],",",["T_WHITESPACE","\n            ",241],["T_CONSTANT_ENCAPSED_STRING","'messageClass'",242],["T_WHITESPACE"," ",242],["T_DOUBLE_ARROW","=>",242],["T_WHITESPACE"," ",242],["T_VARIABLE","$this",242],["T_OBJECT_OPERATOR","->",242],["T_STRING","_queue",242],["T_OBJECT_OPERATOR","->",242],["T_STRING","getMessageClass",242],"(",")",",",["T_WHITESPACE","\n        ",242],")",";",["T_WHITESPACE","\n\n        ",243],["T_VARIABLE","$classname",245],["T_WHITESPACE"," ",245],"=",["T_WHITESPACE"," ",245],["T_VARIABLE","$this",245],["T_OBJECT_OPERATOR","->",245],["T_STRING","_queue",245],["T_OBJECT_OPERATOR","->",245],["T_STRING","getMessageSetClass",245],"(",")",";",["T_WHITESPACE","\n\n        ",245],["T_IF","if",247],["T_WHITESPACE"," ",247],"(","!",["T_STRING","class_exists",247],"(",["T_VARIABLE","$classname",247],")",")",["T_WHITESPACE"," ",247],"{",["T_WHITESPACE","\n            ",247],["T_COMMENT","#require_once 'Zend\/Loader.php';\n",248],["T_WHITESPACE","            ",249],["T_STRING","Zend_Loader",249],["T_DOUBLE_COLON","::",249],["T_STRING","loadClass",249],"(",["T_VARIABLE","$classname",249],")",";",["T_WHITESPACE","\n        ",249],"}",["T_WHITESPACE","\n        ",250],["T_RETURN","return",251],["T_WHITESPACE"," ",251],["T_NEW","new",251],["T_WHITESPACE"," ",251],["T_VARIABLE","$classname",251],"(",["T_VARIABLE","$options",251],")",";",["T_WHITESPACE","\n    ",251],"}",["T_WHITESPACE","\n\n    ",252],["T_DOC_COMMENT","\/**\n     * Delete a message from the queue\n     *\n     * Returns true if the message is deleted, false if the deletion is\n     * unsuccessful.\n     *\n     * @param  Zend_Queue_Message $message\n     * @return boolean\n     * @throws Zend_Queue_Exception\n     *\/",254],["T_WHITESPACE","\n    ",263],["T_PUBLIC","public",264],["T_WHITESPACE"," ",264],["T_FUNCTION","function",264],["T_WHITESPACE"," ",264],["T_STRING","deleteMessage",264],"(",["T_STRING","Zend_Queue_Message",264],["T_WHITESPACE"," ",264],["T_VARIABLE","$message",264],")",["T_WHITESPACE","\n    ",264],"{",["T_WHITESPACE","\n        ",265],["T_IF","if",266],["T_WHITESPACE"," ",266],"(",["T_STRING","get_class",266],"(",["T_VARIABLE","$message",266],")",["T_WHITESPACE"," ",266],["T_IS_NOT_EQUAL","!=",266],["T_WHITESPACE"," ",266],["T_VARIABLE","$this",266],["T_OBJECT_OPERATOR","->",266],["T_STRING","_queue",266],["T_OBJECT_OPERATOR","->",266],["T_STRING","getMessageClass",266],"(",")",")",["T_WHITESPACE"," ",266],"{",["T_WHITESPACE","\n            ",266],["T_COMMENT","#require_once 'Zend\/Queue\/Exception.php';\n",267],["T_WHITESPACE","            ",268],["T_THROW","throw",268],["T_WHITESPACE"," ",268],["T_NEW","new",268],["T_WHITESPACE"," ",268],["T_STRING","Zend_Queue_Exception",268],"(",["T_WHITESPACE","\n                ",268],["T_CONSTANT_ENCAPSED_STRING","'Failed to remove job from the queue; only messages of type '",269],["T_WHITESPACE","\n                ",269],".",["T_WHITESPACE"," ",270],["T_CONSTANT_ENCAPSED_STRING","'Zend_Queue_Message_PlatformJob may be used'",270],["T_WHITESPACE","\n            ",270],")",";",["T_WHITESPACE","\n        ",271],"}",["T_WHITESPACE","\n\n        ",272],["T_RETURN","return",274],["T_WHITESPACE"," ",274],["T_VARIABLE","$this",274],["T_OBJECT_OPERATOR","->",274],["T_STRING","_zendQueue",274],["T_OBJECT_OPERATOR","->",274],["T_STRING","removeJob",274],"(",["T_VARIABLE","$message",274],["T_OBJECT_OPERATOR","->",274],["T_STRING","getJobId",274],"(",")",")",";",["T_WHITESPACE","\n    ",274],"}",["T_WHITESPACE","\n\n    ",275],["T_PUBLIC","public",277],["T_WHITESPACE"," ",277],["T_FUNCTION","function",277],["T_WHITESPACE"," ",277],["T_STRING","isJobIdExist",277],"(",["T_VARIABLE","$id",277],")",["T_WHITESPACE","\n    ",277],"{",["T_WHITESPACE","\n         ",278],["T_RETURN","return",279],["T_WHITESPACE"," ",279],"(","(",["T_VARIABLE","$this",279],["T_OBJECT_OPERATOR","->",279],["T_STRING","_zendQueue",279],["T_OBJECT_OPERATOR","->",279],["T_STRING","getJob",279],"(",["T_VARIABLE","$id",279],")",")","?",["T_WHITESPACE"," ",279],["T_STRING","true",279],["T_WHITESPACE"," ",279],":",["T_WHITESPACE"," ",279],["T_STRING","false",279],")",";",["T_WHITESPACE","\n    ",279],"}",["T_WHITESPACE","\n\n    ",280],["T_COMMENT","\/********************************************************************\n     * Supporting functions\n     ********************************************************************\/",282],["T_WHITESPACE","\n\n    ",284],["T_DOC_COMMENT","\/**\n     * Return a list of queue capabilities functions\n     *\n     * $array['function name'] = true or false\n     * true is supported, false is not supported.\n     *\n     * @param  string $name\n     * @return array\n     *\/",286],["T_WHITESPACE","\n    ",294],["T_PUBLIC","public",295],["T_WHITESPACE"," ",295],["T_FUNCTION","function",295],["T_WHITESPACE"," ",295],["T_STRING","getCapabilities",295],"(",")",["T_WHITESPACE","\n    ",295],"{",["T_WHITESPACE","\n         ",296],["T_RETURN","return",297],["T_WHITESPACE"," ",297],["T_ARRAY","array",297],"(",["T_WHITESPACE","\n            ",297],["T_CONSTANT_ENCAPSED_STRING","'create'",298],["T_WHITESPACE","                ",298],["T_DOUBLE_ARROW","=>",298],["T_WHITESPACE"," ",298],["T_STRING","false",298],",",["T_WHITESPACE","\n            ",298],["T_CONSTANT_ENCAPSED_STRING","'delete'",299],["T_WHITESPACE","                ",299],["T_DOUBLE_ARROW","=>",299],["T_WHITESPACE"," ",299],["T_STRING","false",299],",",["T_WHITESPACE","\n            ",299],["T_CONSTANT_ENCAPSED_STRING","'getQueues'",300],["T_WHITESPACE","             ",300],["T_DOUBLE_ARROW","=>",300],["T_WHITESPACE"," ",300],["T_STRING","false",300],",",["T_WHITESPACE","\n            ",300],["T_CONSTANT_ENCAPSED_STRING","'isExists'",301],["T_WHITESPACE","              ",301],["T_DOUBLE_ARROW","=>",301],["T_WHITESPACE"," ",301],["T_STRING","false",301],",",["T_WHITESPACE","\n            ",301],["T_CONSTANT_ENCAPSED_STRING","'count'",302],["T_WHITESPACE","                 ",302],["T_DOUBLE_ARROW","=>",302],["T_WHITESPACE"," ",302],["T_STRING","true",302],",",["T_WHITESPACE","\n            ",302],["T_CONSTANT_ENCAPSED_STRING","'send'",303],["T_WHITESPACE","                  ",303],["T_DOUBLE_ARROW","=>",303],["T_WHITESPACE"," ",303],["T_STRING","true",303],",",["T_WHITESPACE","\n            ",303],["T_CONSTANT_ENCAPSED_STRING","'receive'",304],["T_WHITESPACE","               ",304],["T_DOUBLE_ARROW","=>",304],["T_WHITESPACE"," ",304],["T_STRING","true",304],",",["T_WHITESPACE","\n            ",304],["T_CONSTANT_ENCAPSED_STRING","'deleteMessage'",305],["T_WHITESPACE","         ",305],["T_DOUBLE_ARROW","=>",305],["T_WHITESPACE"," ",305],["T_STRING","true",305],",",["T_WHITESPACE","\n        ",305],")",";",["T_WHITESPACE","\n    ",306],"}",["T_WHITESPACE","\n\n    ",307],["T_COMMENT","\/********************************************************************\n     * Functions that are not part of the Zend_Queue_Adapter_AdapterAbstract\n     ********************************************************************\/",309],["T_WHITESPACE","\n\n    ",311],["T_DOC_COMMENT","\/**\n     * Serialize\n     *\n     * @return array\n     *\/",313],["T_WHITESPACE","\n    ",317],["T_PUBLIC","public",318],["T_WHITESPACE"," ",318],["T_FUNCTION","function",318],["T_WHITESPACE"," ",318],["T_STRING","__sleep",318],"(",")",["T_WHITESPACE","\n    ",318],"{",["T_WHITESPACE","\n        ",319],["T_RETURN","return",320],["T_WHITESPACE"," ",320],["T_ARRAY","array",320],"(",["T_CONSTANT_ENCAPSED_STRING","'_options'",320],")",";",["T_WHITESPACE","\n    ",320],"}",["T_WHITESPACE","\n\n    ",321],["T_DOC_COMMENT","\/**\n     * Unserialize\n     *\n     * @return void\n     *\/",323],["T_WHITESPACE","\n    ",327],["T_PUBLIC","public",328],["T_WHITESPACE"," ",328],["T_FUNCTION","function",328],["T_WHITESPACE"," ",328],["T_STRING","__wakeup",328],"(",")",["T_WHITESPACE","\n    ",328],"{",["T_WHITESPACE","\n        ",329],["T_VARIABLE","$options",330],["T_WHITESPACE"," ",330],"=",["T_WHITESPACE"," ",330],["T_VARIABLE","$this",330],["T_OBJECT_OPERATOR","->",330],["T_STRING","_options",330],"[",["T_CONSTANT_ENCAPSED_STRING","'daemonOptions'",330],"]",";",["T_WHITESPACE","\n\n        ",330],["T_VARIABLE","$this",332],["T_OBJECT_OPERATOR","->",332],["T_STRING","_zendQueue",332],["T_WHITESPACE"," ",332],"=",["T_WHITESPACE"," ",332],["T_NEW","new",332],["T_WHITESPACE"," ",332],["T_STRING","ZendApi_Queue",332],"(",["T_VARIABLE","$options",332],"[",["T_CONSTANT_ENCAPSED_STRING","'host'",332],"]",")",";",["T_WHITESPACE","\n\n        ",332],["T_IF","if",334],["T_WHITESPACE"," ",334],"(","!",["T_VARIABLE","$this",334],["T_OBJECT_OPERATOR","->",334],["T_STRING","_zendQueue",334],")",["T_WHITESPACE"," ",334],"{",["T_WHITESPACE","\n            ",334],["T_COMMENT","#require_once 'Zend\/Queue\/Exception.php';\n",335],["T_WHITESPACE","            ",336],["T_THROW","throw",336],["T_WHITESPACE"," ",336],["T_NEW","new",336],["T_WHITESPACE"," ",336],["T_STRING","Zend_Queue_Exception",336],"(",["T_CONSTANT_ENCAPSED_STRING","'Platform Job Queue connection failed'",336],")",";",["T_WHITESPACE","\n        ",336],"}",["T_WHITESPACE","\n        ",337],["T_IF","if",338],["T_WHITESPACE"," ",338],"(","!",["T_VARIABLE","$this",338],["T_OBJECT_OPERATOR","->",338],["T_STRING","_zendQueue",338],["T_OBJECT_OPERATOR","->",338],["T_STRING","login",338],"(",["T_VARIABLE","$options",338],"[",["T_CONSTANT_ENCAPSED_STRING","'password'",338],"]",")",")",["T_WHITESPACE"," ",338],"{",["T_WHITESPACE","\n            ",338],["T_COMMENT","#require_once 'Zend\/Queue\/Exception.php';\n",339],["T_WHITESPACE","            ",340],["T_THROW","throw",340],["T_WHITESPACE"," ",340],["T_NEW","new",340],["T_WHITESPACE"," ",340],["T_STRING","Zend_Queue_Exception",340],"(",["T_CONSTANT_ENCAPSED_STRING","'Job Queue login failed'",340],")",";",["T_WHITESPACE","\n        ",340],"}",["T_WHITESPACE","\n    ",341],"}",["T_WHITESPACE","\n",342],"}",["T_WHITESPACE","\n",343]]
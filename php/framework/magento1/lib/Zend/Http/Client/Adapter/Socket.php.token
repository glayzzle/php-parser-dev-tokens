[["T_OPEN_TAG","<?php\n",1],["T_WHITESPACE","\n",2],["T_DOC_COMMENT","\/**\n * Zend Framework\n *\n * LICENSE\n *\n * This source file is subject to the new BSD license that is bundled\n * with this package in the file LICENSE.txt.\n * It is also available through the world-wide-web at this URL:\n * http:\/\/framework.zend.com\/license\/new-bsd\n * If you did not receive a copy of the license and are unable to\n * obtain it through the world-wide-web, please send an email\n * to license@zend.com so we can send you a copy immediately.\n *\n * @category   Zend\n * @package    Zend_Http\n * @subpackage Client_Adapter\n * @version    $Id$\n * @copyright  Copyright (c) 2005-2015 Zend Technologies USA Inc. (http:\/\/www.zend.com)\n * @license    http:\/\/framework.zend.com\/license\/new-bsd     New BSD License\n *\/",3],["T_WHITESPACE","\n\n",22],["T_DOC_COMMENT","\/**\n * @see Zend_Uri_Http\n *\/",24],["T_WHITESPACE","\n",26],["T_COMMENT","#require_once 'Zend\/Uri\/Http.php';\n",27],["T_DOC_COMMENT","\/**\n * @see Zend_Http_Client_Adapter_Interface\n *\/",28],["T_WHITESPACE","\n",30],["T_COMMENT","#require_once 'Zend\/Http\/Client\/Adapter\/Interface.php';\n",31],["T_DOC_COMMENT","\/**\n * @see Zend_Http_Client_Adapter_Stream\n *\/",32],["T_WHITESPACE","\n",34],["T_COMMENT","#require_once 'Zend\/Http\/Client\/Adapter\/Stream.php';\n",35],["T_WHITESPACE","\n",36],["T_DOC_COMMENT","\/**\n * A sockets based (stream_socket_client) adapter class for Zend_Http_Client. Can be used\n * on almost every PHP environment, and does not require any special extensions.\n *\n * @category   Zend\n * @package    Zend_Http\n * @subpackage Client_Adapter\n * @copyright  Copyright (c) 2005-2015 Zend Technologies USA Inc. (http:\/\/www.zend.com)\n * @license    http:\/\/framework.zend.com\/license\/new-bsd     New BSD License\n *\/",37],["T_WHITESPACE","\n",46],["T_CLASS","class",47],["T_WHITESPACE"," ",47],["T_STRING","Zend_Http_Client_Adapter_Socket",47],["T_WHITESPACE"," ",47],["T_IMPLEMENTS","implements",47],["T_WHITESPACE"," ",47],["T_STRING","Zend_Http_Client_Adapter_Interface",47],",",["T_WHITESPACE"," ",47],["T_STRING","Zend_Http_Client_Adapter_Stream",47],["T_WHITESPACE","\n",47],"{",["T_WHITESPACE","\n    ",48],["T_DOC_COMMENT","\/**\n     * The socket for server connection\n     *\n     * @var resource|null\n     *\/",49],["T_WHITESPACE","\n    ",53],["T_PROTECTED","protected",54],["T_WHITESPACE"," ",54],["T_VARIABLE","$socket",54],["T_WHITESPACE"," ",54],"=",["T_WHITESPACE"," ",54],["T_STRING","null",54],";",["T_WHITESPACE","\n\n    ",54],["T_DOC_COMMENT","\/**\n     * What host\/port are we connected to?\n     *\n     * @var array\n     *\/",56],["T_WHITESPACE","\n    ",60],["T_PROTECTED","protected",61],["T_WHITESPACE"," ",61],["T_VARIABLE","$connected_to",61],["T_WHITESPACE"," ",61],"=",["T_WHITESPACE"," ",61],["T_ARRAY","array",61],"(",["T_STRING","null",61],",",["T_WHITESPACE"," ",61],["T_STRING","null",61],")",";",["T_WHITESPACE","\n\n    ",61],["T_DOC_COMMENT","\/**\n     * Stream for storing output\n     *\n     * @var resource\n     *\/",63],["T_WHITESPACE","\n    ",67],["T_PROTECTED","protected",68],["T_WHITESPACE"," ",68],["T_VARIABLE","$out_stream",68],["T_WHITESPACE"," ",68],"=",["T_WHITESPACE"," ",68],["T_STRING","null",68],";",["T_WHITESPACE","\n\n    ",68],["T_DOC_COMMENT","\/**\n     * Parameters array\n     *\n     * @var array\n     *\/",70],["T_WHITESPACE","\n    ",74],["T_PROTECTED","protected",75],["T_WHITESPACE"," ",75],["T_VARIABLE","$config",75],["T_WHITESPACE"," ",75],"=",["T_WHITESPACE"," ",75],["T_ARRAY","array",75],"(",["T_WHITESPACE","\n        ",75],["T_CONSTANT_ENCAPSED_STRING","'persistent'",76],["T_WHITESPACE","    ",76],["T_DOUBLE_ARROW","=>",76],["T_WHITESPACE"," ",76],["T_STRING","false",76],",",["T_WHITESPACE","\n        ",76],["T_CONSTANT_ENCAPSED_STRING","'ssltransport'",77],["T_WHITESPACE","  ",77],["T_DOUBLE_ARROW","=>",77],["T_WHITESPACE"," ",77],["T_CONSTANT_ENCAPSED_STRING","'ssl'",77],",",["T_WHITESPACE","\n        ",77],["T_CONSTANT_ENCAPSED_STRING","'sslcert'",78],["T_WHITESPACE","       ",78],["T_DOUBLE_ARROW","=>",78],["T_WHITESPACE"," ",78],["T_STRING","null",78],",",["T_WHITESPACE","\n        ",78],["T_CONSTANT_ENCAPSED_STRING","'sslpassphrase'",79],["T_WHITESPACE"," ",79],["T_DOUBLE_ARROW","=>",79],["T_WHITESPACE"," ",79],["T_STRING","null",79],",",["T_WHITESPACE","\n        ",79],["T_CONSTANT_ENCAPSED_STRING","'sslusecontext'",80],["T_WHITESPACE"," ",80],["T_DOUBLE_ARROW","=>",80],["T_WHITESPACE"," ",80],["T_STRING","false",80],["T_WHITESPACE","\n    ",80],")",";",["T_WHITESPACE","\n\n    ",81],["T_DOC_COMMENT","\/**\n     * Request method - will be set by write() and might be used by read()\n     *\n     * @var string\n     *\/",83],["T_WHITESPACE","\n    ",87],["T_PROTECTED","protected",88],["T_WHITESPACE"," ",88],["T_VARIABLE","$method",88],["T_WHITESPACE"," ",88],"=",["T_WHITESPACE"," ",88],["T_STRING","null",88],";",["T_WHITESPACE","\n\n    ",88],["T_DOC_COMMENT","\/**\n     * Stream context\n     *\n     * @var resource\n     *\/",90],["T_WHITESPACE","\n    ",94],["T_PROTECTED","protected",95],["T_WHITESPACE"," ",95],["T_VARIABLE","$_context",95],["T_WHITESPACE"," ",95],"=",["T_WHITESPACE"," ",95],["T_STRING","null",95],";",["T_WHITESPACE","\n\n    ",95],["T_DOC_COMMENT","\/**\n     * Adapter constructor, currently empty. Config is set using setConfig()\n     *\n     *\/",97],["T_WHITESPACE","\n    ",100],["T_PUBLIC","public",101],["T_WHITESPACE"," ",101],["T_FUNCTION","function",101],["T_WHITESPACE"," ",101],["T_STRING","__construct",101],"(",")",["T_WHITESPACE","\n    ",101],"{",["T_WHITESPACE","\n    ",102],"}",["T_WHITESPACE","\n\n    ",103],["T_DOC_COMMENT","\/**\n     * Set the configuration array for the adapter\n     *\n     * @param Zend_Config | array $config\n     *\/",105],["T_WHITESPACE","\n    ",109],["T_PUBLIC","public",110],["T_WHITESPACE"," ",110],["T_FUNCTION","function",110],["T_WHITESPACE"," ",110],["T_STRING","setConfig",110],"(",["T_VARIABLE","$config",110],["T_WHITESPACE"," ",110],"=",["T_WHITESPACE"," ",110],["T_ARRAY","array",110],"(",")",")",["T_WHITESPACE","\n    ",110],"{",["T_WHITESPACE","\n        ",111],["T_IF","if",112],["T_WHITESPACE"," ",112],"(",["T_VARIABLE","$config",112],["T_WHITESPACE"," ",112],["T_INSTANCEOF","instanceof",112],["T_WHITESPACE"," ",112],["T_STRING","Zend_Config",112],")",["T_WHITESPACE"," ",112],"{",["T_WHITESPACE","\n            ",112],["T_VARIABLE","$config",113],["T_WHITESPACE"," ",113],"=",["T_WHITESPACE"," ",113],["T_VARIABLE","$config",113],["T_OBJECT_OPERATOR","->",113],["T_STRING","toArray",113],"(",")",";",["T_WHITESPACE","\n\n        ",113],"}",["T_WHITESPACE"," ",115],["T_ELSEIF","elseif",115],["T_WHITESPACE"," ",115],"(","!",["T_WHITESPACE"," ",115],["T_STRING","is_array",115],"(",["T_VARIABLE","$config",115],")",")",["T_WHITESPACE"," ",115],"{",["T_WHITESPACE","\n            ",115],["T_COMMENT","#require_once 'Zend\/Http\/Client\/Adapter\/Exception.php';\n",116],["T_WHITESPACE","            ",117],["T_THROW","throw",117],["T_WHITESPACE"," ",117],["T_NEW","new",117],["T_WHITESPACE"," ",117],["T_STRING","Zend_Http_Client_Adapter_Exception",117],"(",["T_WHITESPACE","\n                ",117],["T_CONSTANT_ENCAPSED_STRING","'Array or Zend_Config object expected, got '",118],["T_WHITESPACE"," ",118],".",["T_WHITESPACE"," ",118],["T_STRING","gettype",118],"(",["T_VARIABLE","$config",118],")",["T_WHITESPACE","\n            ",118],")",";",["T_WHITESPACE","\n        ",119],"}",["T_WHITESPACE","\n\n        ",120],["T_FOREACH","foreach",122],["T_WHITESPACE"," ",122],"(",["T_VARIABLE","$config",122],["T_WHITESPACE"," ",122],["T_AS","as",122],["T_WHITESPACE"," ",122],["T_VARIABLE","$k",122],["T_WHITESPACE"," ",122],["T_DOUBLE_ARROW","=>",122],["T_WHITESPACE"," ",122],["T_VARIABLE","$v",122],")",["T_WHITESPACE"," ",122],"{",["T_WHITESPACE","\n            ",122],["T_VARIABLE","$this",123],["T_OBJECT_OPERATOR","->",123],["T_STRING","config",123],"[",["T_STRING","strtolower",123],"(",["T_VARIABLE","$k",123],")","]",["T_WHITESPACE"," ",123],"=",["T_WHITESPACE"," ",123],["T_VARIABLE","$v",123],";",["T_WHITESPACE","\n        ",123],"}",["T_WHITESPACE","\n    ",124],"}",["T_WHITESPACE","\n\n    ",125],["T_DOC_COMMENT","\/**\n      * Retrieve the array of all configuration options\n      *\n      * @return array\n      *\/",127],["T_WHITESPACE","\n     ",131],["T_PUBLIC","public",132],["T_WHITESPACE"," ",132],["T_FUNCTION","function",132],["T_WHITESPACE"," ",132],["T_STRING","getConfig",132],"(",")",["T_WHITESPACE","\n     ",132],"{",["T_WHITESPACE","\n         ",133],["T_RETURN","return",134],["T_WHITESPACE"," ",134],["T_VARIABLE","$this",134],["T_OBJECT_OPERATOR","->",134],["T_STRING","config",134],";",["T_WHITESPACE","\n     ",134],"}",["T_WHITESPACE","\n\n     ",135],["T_DOC_COMMENT","\/**\n     * Set the stream context for the TCP connection to the server\n     *\n     * Can accept either a pre-existing stream context resource, or an array\n     * of stream options, similar to the options array passed to the\n     * stream_context_create() PHP function. In such case a new stream context\n     * will be created using the passed options.\n     *\n     * @since  Zend Framework 1.9\n     *\n     * @param  mixed $context Stream context or array of context options\n     * @return Zend_Http_Client_Adapter_Socket\n     *\/",137],["T_WHITESPACE","\n    ",149],["T_PUBLIC","public",150],["T_WHITESPACE"," ",150],["T_FUNCTION","function",150],["T_WHITESPACE"," ",150],["T_STRING","setStreamContext",150],"(",["T_VARIABLE","$context",150],")",["T_WHITESPACE","\n    ",150],"{",["T_WHITESPACE","\n        ",151],["T_IF","if",152],["T_WHITESPACE"," ",152],"(",["T_STRING","is_resource",152],"(",["T_VARIABLE","$context",152],")",["T_WHITESPACE"," ",152],["T_BOOLEAN_AND","&&",152],["T_WHITESPACE"," ",152],["T_STRING","get_resource_type",152],"(",["T_VARIABLE","$context",152],")",["T_WHITESPACE"," ",152],["T_IS_EQUAL","==",152],["T_WHITESPACE"," ",152],["T_CONSTANT_ENCAPSED_STRING","'stream-context'",152],")",["T_WHITESPACE"," ",152],"{",["T_WHITESPACE","\n            ",152],["T_VARIABLE","$this",153],["T_OBJECT_OPERATOR","->",153],["T_STRING","_context",153],["T_WHITESPACE"," ",153],"=",["T_WHITESPACE"," ",153],["T_VARIABLE","$context",153],";",["T_WHITESPACE","\n\n        ",153],"}",["T_WHITESPACE"," ",155],["T_ELSEIF","elseif",155],["T_WHITESPACE"," ",155],"(",["T_STRING","is_array",155],"(",["T_VARIABLE","$context",155],")",")",["T_WHITESPACE"," ",155],"{",["T_WHITESPACE","\n            ",155],["T_VARIABLE","$this",156],["T_OBJECT_OPERATOR","->",156],["T_STRING","_context",156],["T_WHITESPACE"," ",156],"=",["T_WHITESPACE"," ",156],["T_STRING","stream_context_create",156],"(",["T_VARIABLE","$context",156],")",";",["T_WHITESPACE","\n\n        ",156],"}",["T_WHITESPACE"," ",158],["T_ELSE","else",158],["T_WHITESPACE"," ",158],"{",["T_WHITESPACE","\n            ",158],["T_COMMENT","\/\/ Invalid parameter\n",159],["T_WHITESPACE","            ",160],["T_COMMENT","#require_once 'Zend\/Http\/Client\/Adapter\/Exception.php';\n",160],["T_WHITESPACE","            ",161],["T_THROW","throw",161],["T_WHITESPACE"," ",161],["T_NEW","new",161],["T_WHITESPACE"," ",161],["T_STRING","Zend_Http_Client_Adapter_Exception",161],"(",["T_WHITESPACE","\n                ",161],["T_CONSTANT_ENCAPSED_STRING","\"Expecting either a stream context resource or array, got \"",162],["T_WHITESPACE"," ",162],".",["T_WHITESPACE"," ",162],["T_STRING","gettype",162],"(",["T_VARIABLE","$context",162],")",["T_WHITESPACE","\n            ",162],")",";",["T_WHITESPACE","\n        ",163],"}",["T_WHITESPACE","\n\n        ",164],["T_RETURN","return",166],["T_WHITESPACE"," ",166],["T_VARIABLE","$this",166],";",["T_WHITESPACE","\n    ",166],"}",["T_WHITESPACE","\n\n    ",167],["T_DOC_COMMENT","\/**\n     * Get the stream context for the TCP connection to the server.\n     *\n     * If no stream context is set, will create a default one.\n     *\n     * @return resource\n     *\/",169],["T_WHITESPACE","\n    ",175],["T_PUBLIC","public",176],["T_WHITESPACE"," ",176],["T_FUNCTION","function",176],["T_WHITESPACE"," ",176],["T_STRING","getStreamContext",176],"(",")",["T_WHITESPACE","\n    ",176],"{",["T_WHITESPACE","\n        ",177],["T_IF","if",178],["T_WHITESPACE"," ",178],"(","!",["T_WHITESPACE"," ",178],["T_VARIABLE","$this",178],["T_OBJECT_OPERATOR","->",178],["T_STRING","_context",178],")",["T_WHITESPACE"," ",178],"{",["T_WHITESPACE","\n            ",178],["T_VARIABLE","$this",179],["T_OBJECT_OPERATOR","->",179],["T_STRING","_context",179],["T_WHITESPACE"," ",179],"=",["T_WHITESPACE"," ",179],["T_STRING","stream_context_create",179],"(",")",";",["T_WHITESPACE","\n        ",179],"}",["T_WHITESPACE","\n\n        ",180],["T_RETURN","return",182],["T_WHITESPACE"," ",182],["T_VARIABLE","$this",182],["T_OBJECT_OPERATOR","->",182],["T_STRING","_context",182],";",["T_WHITESPACE","\n    ",182],"}",["T_WHITESPACE","\n\n    ",183],["T_DOC_COMMENT","\/**\n     * Connect to the remote server\n     *\n     * @param string  $host\n     * @param int     $port\n     * @param boolean $secure\n     *\/",185],["T_WHITESPACE","\n    ",191],["T_PUBLIC","public",192],["T_WHITESPACE"," ",192],["T_FUNCTION","function",192],["T_WHITESPACE"," ",192],["T_STRING","connect",192],"(",["T_VARIABLE","$host",192],",",["T_WHITESPACE"," ",192],["T_VARIABLE","$port",192],["T_WHITESPACE"," ",192],"=",["T_WHITESPACE"," ",192],["T_LNUMBER","80",192],",",["T_WHITESPACE"," ",192],["T_VARIABLE","$secure",192],["T_WHITESPACE"," ",192],"=",["T_WHITESPACE"," ",192],["T_STRING","false",192],")",["T_WHITESPACE","\n    ",192],"{",["T_WHITESPACE","\n        ",193],["T_COMMENT","\/\/ If the URI should be accessed via SSL, prepend the Hostname with ssl:\/\/\n",194],["T_WHITESPACE","        ",195],["T_VARIABLE","$host",195],["T_WHITESPACE"," ",195],"=",["T_WHITESPACE"," ",195],"(",["T_VARIABLE","$secure",195],["T_WHITESPACE"," ",195],"?",["T_WHITESPACE"," ",195],["T_VARIABLE","$this",195],["T_OBJECT_OPERATOR","->",195],["T_STRING","config",195],"[",["T_CONSTANT_ENCAPSED_STRING","'ssltransport'",195],"]",["T_WHITESPACE"," ",195],":",["T_WHITESPACE"," ",195],["T_CONSTANT_ENCAPSED_STRING","'tcp'",195],")",["T_WHITESPACE"," ",195],".",["T_WHITESPACE"," ",195],["T_CONSTANT_ENCAPSED_STRING","':\/\/'",195],["T_WHITESPACE"," ",195],".",["T_WHITESPACE"," ",195],["T_VARIABLE","$host",195],";",["T_WHITESPACE","\n\n        ",195],["T_COMMENT","\/\/ If we are connected to the wrong host, disconnect first\n",197],["T_WHITESPACE","        ",198],["T_IF","if",198],["T_WHITESPACE"," ",198],"(","(",["T_VARIABLE","$this",198],["T_OBJECT_OPERATOR","->",198],["T_STRING","connected_to",198],"[",["T_LNUMBER","0",198],"]",["T_WHITESPACE"," ",198],["T_IS_NOT_EQUAL","!=",198],["T_WHITESPACE"," ",198],["T_VARIABLE","$host",198],["T_WHITESPACE"," ",198],["T_BOOLEAN_OR","||",198],["T_WHITESPACE"," ",198],["T_VARIABLE","$this",198],["T_OBJECT_OPERATOR","->",198],["T_STRING","connected_to",198],"[",["T_LNUMBER","1",198],"]",["T_WHITESPACE"," ",198],["T_IS_NOT_EQUAL","!=",198],["T_WHITESPACE"," ",198],["T_VARIABLE","$port",198],")",")",["T_WHITESPACE"," ",198],"{",["T_WHITESPACE","\n            ",198],["T_IF","if",199],["T_WHITESPACE"," ",199],"(",["T_STRING","is_resource",199],"(",["T_VARIABLE","$this",199],["T_OBJECT_OPERATOR","->",199],["T_STRING","socket",199],")",")",["T_WHITESPACE"," ",199],["T_VARIABLE","$this",199],["T_OBJECT_OPERATOR","->",199],["T_STRING","close",199],"(",")",";",["T_WHITESPACE","\n        ",199],"}",["T_WHITESPACE","\n\n        ",200],["T_COMMENT","\/\/ Now, if we are not connected, connect\n",202],["T_WHITESPACE","        ",203],["T_IF","if",203],["T_WHITESPACE"," ",203],"(","!",["T_WHITESPACE"," ",203],["T_STRING","is_resource",203],"(",["T_VARIABLE","$this",203],["T_OBJECT_OPERATOR","->",203],["T_STRING","socket",203],")",["T_WHITESPACE"," ",203],["T_BOOLEAN_OR","||",203],["T_WHITESPACE"," ",203],"!",["T_WHITESPACE"," ",203],["T_VARIABLE","$this",203],["T_OBJECT_OPERATOR","->",203],["T_STRING","config",203],"[",["T_CONSTANT_ENCAPSED_STRING","'keepalive'",203],"]",")",["T_WHITESPACE"," ",203],"{",["T_WHITESPACE","\n            ",203],["T_VARIABLE","$context",204],["T_WHITESPACE"," ",204],"=",["T_WHITESPACE"," ",204],["T_VARIABLE","$this",204],["T_OBJECT_OPERATOR","->",204],["T_STRING","getStreamContext",204],"(",")",";",["T_WHITESPACE","\n            ",204],["T_IF","if",205],["T_WHITESPACE"," ",205],"(",["T_VARIABLE","$secure",205],["T_WHITESPACE"," ",205],["T_BOOLEAN_OR","||",205],["T_WHITESPACE"," ",205],["T_VARIABLE","$this",205],["T_OBJECT_OPERATOR","->",205],["T_STRING","config",205],"[",["T_CONSTANT_ENCAPSED_STRING","'sslusecontext'",205],"]",")",["T_WHITESPACE"," ",205],"{",["T_WHITESPACE","\n                ",205],["T_IF","if",206],["T_WHITESPACE"," ",206],"(",["T_VARIABLE","$this",206],["T_OBJECT_OPERATOR","->",206],["T_STRING","config",206],"[",["T_CONSTANT_ENCAPSED_STRING","'sslcert'",206],"]",["T_WHITESPACE"," ",206],["T_IS_NOT_IDENTICAL","!==",206],["T_WHITESPACE"," ",206],["T_STRING","null",206],")",["T_WHITESPACE"," ",206],"{",["T_WHITESPACE","\n                    ",206],["T_IF","if",207],["T_WHITESPACE"," ",207],"(","!",["T_WHITESPACE"," ",207],["T_STRING","stream_context_set_option",207],"(",["T_VARIABLE","$context",207],",",["T_WHITESPACE"," ",207],["T_CONSTANT_ENCAPSED_STRING","'ssl'",207],",",["T_WHITESPACE"," ",207],["T_CONSTANT_ENCAPSED_STRING","'local_cert'",207],",",["T_WHITESPACE","\n                                                    ",207],["T_VARIABLE","$this",208],["T_OBJECT_OPERATOR","->",208],["T_STRING","config",208],"[",["T_CONSTANT_ENCAPSED_STRING","'sslcert'",208],"]",")",")",["T_WHITESPACE"," ",208],"{",["T_WHITESPACE","\n                        ",208],["T_COMMENT","#require_once 'Zend\/Http\/Client\/Adapter\/Exception.php';\n",209],["T_WHITESPACE","                        ",210],["T_THROW","throw",210],["T_WHITESPACE"," ",210],["T_NEW","new",210],["T_WHITESPACE"," ",210],["T_STRING","Zend_Http_Client_Adapter_Exception",210],"(",["T_CONSTANT_ENCAPSED_STRING","'Unable to set sslcert option'",210],")",";",["T_WHITESPACE","\n                    ",210],"}",["T_WHITESPACE","\n                ",211],"}",["T_WHITESPACE","\n                ",212],["T_IF","if",213],["T_WHITESPACE"," ",213],"(",["T_VARIABLE","$this",213],["T_OBJECT_OPERATOR","->",213],["T_STRING","config",213],"[",["T_CONSTANT_ENCAPSED_STRING","'sslpassphrase'",213],"]",["T_WHITESPACE"," ",213],["T_IS_NOT_IDENTICAL","!==",213],["T_WHITESPACE"," ",213],["T_STRING","null",213],")",["T_WHITESPACE"," ",213],"{",["T_WHITESPACE","\n                    ",213],["T_IF","if",214],["T_WHITESPACE"," ",214],"(","!",["T_WHITESPACE"," ",214],["T_STRING","stream_context_set_option",214],"(",["T_VARIABLE","$context",214],",",["T_WHITESPACE"," ",214],["T_CONSTANT_ENCAPSED_STRING","'ssl'",214],",",["T_WHITESPACE"," ",214],["T_CONSTANT_ENCAPSED_STRING","'passphrase'",214],",",["T_WHITESPACE","\n                                                    ",214],["T_VARIABLE","$this",215],["T_OBJECT_OPERATOR","->",215],["T_STRING","config",215],"[",["T_CONSTANT_ENCAPSED_STRING","'sslpassphrase'",215],"]",")",")",["T_WHITESPACE"," ",215],"{",["T_WHITESPACE","\n                        ",215],["T_COMMENT","#require_once 'Zend\/Http\/Client\/Adapter\/Exception.php';\n",216],["T_WHITESPACE","                        ",217],["T_THROW","throw",217],["T_WHITESPACE"," ",217],["T_NEW","new",217],["T_WHITESPACE"," ",217],["T_STRING","Zend_Http_Client_Adapter_Exception",217],"(",["T_CONSTANT_ENCAPSED_STRING","'Unable to set sslpassphrase option'",217],")",";",["T_WHITESPACE","\n                    ",217],"}",["T_WHITESPACE","\n                ",218],"}",["T_WHITESPACE","\n            ",219],"}",["T_WHITESPACE","\n\n            ",220],["T_VARIABLE","$flags",222],["T_WHITESPACE"," ",222],"=",["T_WHITESPACE"," ",222],["T_STRING","STREAM_CLIENT_CONNECT",222],";",["T_WHITESPACE","\n            ",222],["T_IF","if",223],["T_WHITESPACE"," ",223],"(",["T_VARIABLE","$this",223],["T_OBJECT_OPERATOR","->",223],["T_STRING","config",223],"[",["T_CONSTANT_ENCAPSED_STRING","'persistent'",223],"]",")",["T_WHITESPACE"," ",223],["T_VARIABLE","$flags",223],["T_WHITESPACE"," ",223],["T_OR_EQUAL","|=",223],["T_WHITESPACE"," ",223],["T_STRING","STREAM_CLIENT_PERSISTENT",223],";",["T_WHITESPACE","\n\n            ",223],["T_VARIABLE","$this",225],["T_OBJECT_OPERATOR","->",225],["T_STRING","socket",225],["T_WHITESPACE"," ",225],"=",["T_WHITESPACE"," ",225],"@",["T_STRING","stream_socket_client",225],"(",["T_VARIABLE","$host",225],["T_WHITESPACE"," ",225],".",["T_WHITESPACE"," ",225],["T_CONSTANT_ENCAPSED_STRING","':'",225],["T_WHITESPACE"," ",225],".",["T_WHITESPACE"," ",225],["T_VARIABLE","$port",225],",",["T_WHITESPACE","\n                                                  ",225],["T_VARIABLE","$errno",226],",",["T_WHITESPACE","\n                                                  ",226],["T_VARIABLE","$errstr",227],",",["T_WHITESPACE","\n                                                  ",227],["T_INT_CAST","(int)",228],["T_WHITESPACE"," ",228],["T_VARIABLE","$this",228],["T_OBJECT_OPERATOR","->",228],["T_STRING","config",228],"[",["T_CONSTANT_ENCAPSED_STRING","'timeout'",228],"]",",",["T_WHITESPACE","\n                                                  ",228],["T_VARIABLE","$flags",229],",",["T_WHITESPACE","\n                                                  ",229],["T_VARIABLE","$context",230],")",";",["T_WHITESPACE","\n\n            ",230],["T_IF","if",232],["T_WHITESPACE"," ",232],"(","!",["T_WHITESPACE"," ",232],["T_VARIABLE","$this",232],["T_OBJECT_OPERATOR","->",232],["T_STRING","socket",232],")",["T_WHITESPACE"," ",232],"{",["T_WHITESPACE","\n                ",232],["T_VARIABLE","$this",233],["T_OBJECT_OPERATOR","->",233],["T_STRING","close",233],"(",")",";",["T_WHITESPACE","\n                ",233],["T_COMMENT","#require_once 'Zend\/Http\/Client\/Adapter\/Exception.php';\n",234],["T_WHITESPACE","                ",235],["T_THROW","throw",235],["T_WHITESPACE"," ",235],["T_NEW","new",235],["T_WHITESPACE"," ",235],["T_STRING","Zend_Http_Client_Adapter_Exception",235],"(",["T_WHITESPACE","\n                    ",235],["T_CONSTANT_ENCAPSED_STRING","'Unable to Connect to '",236],["T_WHITESPACE"," ",236],".",["T_WHITESPACE"," ",236],["T_VARIABLE","$host",236],["T_WHITESPACE"," ",236],".",["T_WHITESPACE"," ",236],["T_CONSTANT_ENCAPSED_STRING","':'",236],["T_WHITESPACE"," ",236],".",["T_WHITESPACE"," ",236],["T_VARIABLE","$port",236],["T_WHITESPACE"," ",236],".",["T_WHITESPACE"," ",236],["T_CONSTANT_ENCAPSED_STRING","'. Error #'",236],["T_WHITESPACE"," ",236],".",["T_WHITESPACE"," ",236],["T_VARIABLE","$errno",236],["T_WHITESPACE"," ",236],".",["T_WHITESPACE"," ",236],["T_CONSTANT_ENCAPSED_STRING","': '",236],["T_WHITESPACE"," ",236],".",["T_WHITESPACE"," ",236],["T_VARIABLE","$errstr",236],")",";",["T_WHITESPACE","\n            ",236],"}",["T_WHITESPACE","\n\n            ",237],["T_COMMENT","\/\/ Set the stream timeout\n",239],["T_WHITESPACE","            ",240],["T_IF","if",240],["T_WHITESPACE"," ",240],"(","!",["T_WHITESPACE"," ",240],["T_STRING","stream_set_timeout",240],"(",["T_VARIABLE","$this",240],["T_OBJECT_OPERATOR","->",240],["T_STRING","socket",240],",",["T_WHITESPACE"," ",240],["T_INT_CAST","(int)",240],["T_WHITESPACE"," ",240],["T_VARIABLE","$this",240],["T_OBJECT_OPERATOR","->",240],["T_STRING","config",240],"[",["T_CONSTANT_ENCAPSED_STRING","'timeout'",240],"]",")",")",["T_WHITESPACE"," ",240],"{",["T_WHITESPACE","\n                ",240],["T_COMMENT","#require_once 'Zend\/Http\/Client\/Adapter\/Exception.php';\n",241],["T_WHITESPACE","                ",242],["T_THROW","throw",242],["T_WHITESPACE"," ",242],["T_NEW","new",242],["T_WHITESPACE"," ",242],["T_STRING","Zend_Http_Client_Adapter_Exception",242],"(",["T_CONSTANT_ENCAPSED_STRING","'Unable to set the connection timeout'",242],")",";",["T_WHITESPACE","\n            ",242],"}",["T_WHITESPACE","\n\n            ",243],["T_COMMENT","\/\/ Update connected_to\n",245],["T_WHITESPACE","            ",246],["T_VARIABLE","$this",246],["T_OBJECT_OPERATOR","->",246],["T_STRING","connected_to",246],["T_WHITESPACE"," ",246],"=",["T_WHITESPACE"," ",246],["T_ARRAY","array",246],"(",["T_VARIABLE","$host",246],",",["T_WHITESPACE"," ",246],["T_VARIABLE","$port",246],")",";",["T_WHITESPACE","\n        ",246],"}",["T_WHITESPACE","\n    ",247],"}",["T_WHITESPACE","\n\n    ",248],["T_DOC_COMMENT","\/**\n     * Send request to the remote server\n     *\n     * @param string        $method\n     * @param Zend_Uri_Http $uri\n     * @param string        $http_ver\n     * @param array         $headers\n     * @param string        $body\n     * @return string Request as string\n     *\/",250],["T_WHITESPACE","\n    ",259],["T_PUBLIC","public",260],["T_WHITESPACE"," ",260],["T_FUNCTION","function",260],["T_WHITESPACE"," ",260],["T_STRING","write",260],"(",["T_VARIABLE","$method",260],",",["T_WHITESPACE"," ",260],["T_VARIABLE","$uri",260],",",["T_WHITESPACE"," ",260],["T_VARIABLE","$http_ver",260],["T_WHITESPACE"," ",260],"=",["T_WHITESPACE"," ",260],["T_CONSTANT_ENCAPSED_STRING","'1.1'",260],",",["T_WHITESPACE"," ",260],["T_VARIABLE","$headers",260],["T_WHITESPACE"," ",260],"=",["T_WHITESPACE"," ",260],["T_ARRAY","array",260],"(",")",",",["T_WHITESPACE"," ",260],["T_VARIABLE","$body",260],["T_WHITESPACE"," ",260],"=",["T_WHITESPACE"," ",260],["T_CONSTANT_ENCAPSED_STRING","''",260],")",["T_WHITESPACE","\n    ",260],"{",["T_WHITESPACE","\n        ",261],["T_COMMENT","\/\/ Make sure we're properly connected\n",262],["T_WHITESPACE","        ",263],["T_IF","if",263],["T_WHITESPACE"," ",263],"(","!",["T_WHITESPACE"," ",263],["T_VARIABLE","$this",263],["T_OBJECT_OPERATOR","->",263],["T_STRING","socket",263],")",["T_WHITESPACE"," ",263],"{",["T_WHITESPACE","\n            ",263],["T_COMMENT","#require_once 'Zend\/Http\/Client\/Adapter\/Exception.php';\n",264],["T_WHITESPACE","            ",265],["T_THROW","throw",265],["T_WHITESPACE"," ",265],["T_NEW","new",265],["T_WHITESPACE"," ",265],["T_STRING","Zend_Http_Client_Adapter_Exception",265],"(",["T_CONSTANT_ENCAPSED_STRING","'Trying to write but we are not connected'",265],")",";",["T_WHITESPACE","\n        ",265],"}",["T_WHITESPACE","\n\n        ",266],["T_VARIABLE","$host",268],["T_WHITESPACE"," ",268],"=",["T_WHITESPACE"," ",268],["T_VARIABLE","$uri",268],["T_OBJECT_OPERATOR","->",268],["T_STRING","getHost",268],"(",")",";",["T_WHITESPACE","\n        ",268],["T_VARIABLE","$host",269],["T_WHITESPACE"," ",269],"=",["T_WHITESPACE"," ",269],"(",["T_STRING","strtolower",269],"(",["T_VARIABLE","$uri",269],["T_OBJECT_OPERATOR","->",269],["T_STRING","getScheme",269],"(",")",")",["T_WHITESPACE"," ",269],["T_IS_EQUAL","==",269],["T_WHITESPACE"," ",269],["T_CONSTANT_ENCAPSED_STRING","'https'",269],["T_WHITESPACE"," ",269],"?",["T_WHITESPACE"," ",269],["T_VARIABLE","$this",269],["T_OBJECT_OPERATOR","->",269],["T_STRING","config",269],"[",["T_CONSTANT_ENCAPSED_STRING","'ssltransport'",269],"]",["T_WHITESPACE"," ",269],":",["T_WHITESPACE"," ",269],["T_CONSTANT_ENCAPSED_STRING","'tcp'",269],")",["T_WHITESPACE"," ",269],".",["T_WHITESPACE"," ",269],["T_CONSTANT_ENCAPSED_STRING","':\/\/'",269],["T_WHITESPACE"," ",269],".",["T_WHITESPACE"," ",269],["T_VARIABLE","$host",269],";",["T_WHITESPACE","\n        ",269],["T_IF","if",270],["T_WHITESPACE"," ",270],"(",["T_VARIABLE","$this",270],["T_OBJECT_OPERATOR","->",270],["T_STRING","connected_to",270],"[",["T_LNUMBER","0",270],"]",["T_WHITESPACE"," ",270],["T_IS_NOT_EQUAL","!=",270],["T_WHITESPACE"," ",270],["T_VARIABLE","$host",270],["T_WHITESPACE"," ",270],["T_BOOLEAN_OR","||",270],["T_WHITESPACE"," ",270],["T_VARIABLE","$this",270],["T_OBJECT_OPERATOR","->",270],["T_STRING","connected_to",270],"[",["T_LNUMBER","1",270],"]",["T_WHITESPACE"," ",270],["T_IS_NOT_EQUAL","!=",270],["T_WHITESPACE"," ",270],["T_VARIABLE","$uri",270],["T_OBJECT_OPERATOR","->",270],["T_STRING","getPort",270],"(",")",")",["T_WHITESPACE"," ",270],"{",["T_WHITESPACE","\n            ",270],["T_COMMENT","#require_once 'Zend\/Http\/Client\/Adapter\/Exception.php';\n",271],["T_WHITESPACE","            ",272],["T_THROW","throw",272],["T_WHITESPACE"," ",272],["T_NEW","new",272],["T_WHITESPACE"," ",272],["T_STRING","Zend_Http_Client_Adapter_Exception",272],"(",["T_CONSTANT_ENCAPSED_STRING","'Trying to write but we are connected to the wrong host'",272],")",";",["T_WHITESPACE","\n        ",272],"}",["T_WHITESPACE","\n\n        ",273],["T_COMMENT","\/\/ Save request method for later\n",275],["T_WHITESPACE","        ",276],["T_VARIABLE","$this",276],["T_OBJECT_OPERATOR","->",276],["T_STRING","method",276],["T_WHITESPACE"," ",276],"=",["T_WHITESPACE"," ",276],["T_VARIABLE","$method",276],";",["T_WHITESPACE","\n\n        ",276],["T_COMMENT","\/\/ Build request headers\n",278],["T_WHITESPACE","        ",279],["T_VARIABLE","$path",279],["T_WHITESPACE"," ",279],"=",["T_WHITESPACE"," ",279],["T_VARIABLE","$uri",279],["T_OBJECT_OPERATOR","->",279],["T_STRING","getPath",279],"(",")",";",["T_WHITESPACE","\n        ",279],["T_IF","if",280],["T_WHITESPACE"," ",280],"(",["T_VARIABLE","$uri",280],["T_OBJECT_OPERATOR","->",280],["T_STRING","getQuery",280],"(",")",")",["T_WHITESPACE"," ",280],["T_VARIABLE","$path",280],["T_WHITESPACE"," ",280],["T_CONCAT_EQUAL",".=",280],["T_WHITESPACE"," ",280],["T_CONSTANT_ENCAPSED_STRING","'?'",280],["T_WHITESPACE"," ",280],".",["T_WHITESPACE"," ",280],["T_VARIABLE","$uri",280],["T_OBJECT_OPERATOR","->",280],["T_STRING","getQuery",280],"(",")",";",["T_WHITESPACE","\n        ",280],["T_VARIABLE","$request",281],["T_WHITESPACE"," ",281],"=",["T_WHITESPACE"," ",281],"\"",["T_CURLY_OPEN","{",281],["T_VARIABLE","$method",281],"}",["T_ENCAPSED_AND_WHITESPACE"," ",281],["T_CURLY_OPEN","{",281],["T_VARIABLE","$path",281],"}",["T_ENCAPSED_AND_WHITESPACE"," HTTP\/",281],["T_CURLY_OPEN","{",281],["T_VARIABLE","$http_ver",281],"}",["T_ENCAPSED_AND_WHITESPACE","\\r\\n",281],"\"",";",["T_WHITESPACE","\n        ",281],["T_FOREACH","foreach",282],["T_WHITESPACE"," ",282],"(",["T_VARIABLE","$headers",282],["T_WHITESPACE"," ",282],["T_AS","as",282],["T_WHITESPACE"," ",282],["T_VARIABLE","$k",282],["T_WHITESPACE"," ",282],["T_DOUBLE_ARROW","=>",282],["T_WHITESPACE"," ",282],["T_VARIABLE","$v",282],")",["T_WHITESPACE"," ",282],"{",["T_WHITESPACE","\n            ",282],["T_IF","if",283],["T_WHITESPACE"," ",283],"(",["T_STRING","is_string",283],"(",["T_VARIABLE","$k",283],")",")",["T_WHITESPACE"," ",283],["T_VARIABLE","$v",283],["T_WHITESPACE"," ",283],"=",["T_WHITESPACE"," ",283],["T_STRING","ucfirst",283],"(",["T_VARIABLE","$k",283],")",["T_WHITESPACE"," ",283],".",["T_WHITESPACE"," ",283],"\"",["T_ENCAPSED_AND_WHITESPACE",": ",283],["T_VARIABLE","$v",283],"\"",";",["T_WHITESPACE","\n            ",283],["T_VARIABLE","$request",284],["T_WHITESPACE"," ",284],["T_CONCAT_EQUAL",".=",284],["T_WHITESPACE"," ",284],"\"",["T_VARIABLE","$v",284],["T_ENCAPSED_AND_WHITESPACE","\\r\\n",284],"\"",";",["T_WHITESPACE","\n        ",284],"}",["T_WHITESPACE","\n\n        ",285],["T_IF","if",287],"(",["T_STRING","is_resource",287],"(",["T_VARIABLE","$body",287],")",")",["T_WHITESPACE"," ",287],"{",["T_WHITESPACE","\n            ",287],["T_VARIABLE","$request",288],["T_WHITESPACE"," ",288],["T_CONCAT_EQUAL",".=",288],["T_WHITESPACE"," ",288],["T_CONSTANT_ENCAPSED_STRING","\"\\r\\n\"",288],";",["T_WHITESPACE","\n        ",288],"}",["T_WHITESPACE"," ",289],["T_ELSE","else",289],["T_WHITESPACE"," ",289],"{",["T_WHITESPACE","\n            ",289],["T_COMMENT","\/\/ Add the request body\n",290],["T_WHITESPACE","            ",291],["T_VARIABLE","$request",291],["T_WHITESPACE"," ",291],["T_CONCAT_EQUAL",".=",291],["T_WHITESPACE"," ",291],["T_CONSTANT_ENCAPSED_STRING","\"\\r\\n\"",291],["T_WHITESPACE"," ",291],".",["T_WHITESPACE"," ",291],["T_VARIABLE","$body",291],";",["T_WHITESPACE","\n        ",291],"}",["T_WHITESPACE","\n\n        ",292],["T_COMMENT","\/\/ Send the request\n",294],["T_WHITESPACE","        ",295],["T_IF","if",295],["T_WHITESPACE"," ",295],"(","!",["T_WHITESPACE"," ",295],"@",["T_STRING","fwrite",295],"(",["T_VARIABLE","$this",295],["T_OBJECT_OPERATOR","->",295],["T_STRING","socket",295],",",["T_WHITESPACE"," ",295],["T_VARIABLE","$request",295],")",")",["T_WHITESPACE"," ",295],"{",["T_WHITESPACE","\n            ",295],["T_COMMENT","#require_once 'Zend\/Http\/Client\/Adapter\/Exception.php';\n",296],["T_WHITESPACE","            ",297],["T_THROW","throw",297],["T_WHITESPACE"," ",297],["T_NEW","new",297],["T_WHITESPACE"," ",297],["T_STRING","Zend_Http_Client_Adapter_Exception",297],"(",["T_CONSTANT_ENCAPSED_STRING","'Error writing request to server'",297],")",";",["T_WHITESPACE","\n        ",297],"}",["T_WHITESPACE","\n\n        ",298],["T_IF","if",300],"(",["T_STRING","is_resource",300],"(",["T_VARIABLE","$body",300],")",")",["T_WHITESPACE"," ",300],"{",["T_WHITESPACE","\n            ",300],["T_IF","if",301],"(",["T_STRING","stream_copy_to_stream",301],"(",["T_VARIABLE","$body",301],",",["T_WHITESPACE"," ",301],["T_VARIABLE","$this",301],["T_OBJECT_OPERATOR","->",301],["T_STRING","socket",301],")",["T_WHITESPACE"," ",301],["T_IS_EQUAL","==",301],["T_WHITESPACE"," ",301],["T_LNUMBER","0",301],")",["T_WHITESPACE"," ",301],"{",["T_WHITESPACE","\n                ",301],["T_COMMENT","#require_once 'Zend\/Http\/Client\/Adapter\/Exception.php';\n",302],["T_WHITESPACE","                ",303],["T_THROW","throw",303],["T_WHITESPACE"," ",303],["T_NEW","new",303],["T_WHITESPACE"," ",303],["T_STRING","Zend_Http_Client_Adapter_Exception",303],"(",["T_CONSTANT_ENCAPSED_STRING","'Error writing request to server'",303],")",";",["T_WHITESPACE","\n            ",303],"}",["T_WHITESPACE","\n        ",304],"}",["T_WHITESPACE","\n\n        ",305],["T_RETURN","return",307],["T_WHITESPACE"," ",307],["T_VARIABLE","$request",307],";",["T_WHITESPACE","\n    ",307],"}",["T_WHITESPACE","\n\n    ",308],["T_DOC_COMMENT","\/**\n     * Read response from server\n     *\n     * @return string\n     *\/",310],["T_WHITESPACE","\n    ",314],["T_PUBLIC","public",315],["T_WHITESPACE"," ",315],["T_FUNCTION","function",315],["T_WHITESPACE"," ",315],["T_STRING","read",315],"(",")",["T_WHITESPACE","\n    ",315],"{",["T_WHITESPACE","\n        ",316],["T_COMMENT","\/\/ First, read headers only\n",317],["T_WHITESPACE","        ",318],["T_VARIABLE","$response",318],["T_WHITESPACE"," ",318],"=",["T_WHITESPACE"," ",318],["T_CONSTANT_ENCAPSED_STRING","''",318],";",["T_WHITESPACE","\n        ",318],["T_VARIABLE","$gotStatus",319],["T_WHITESPACE"," ",319],"=",["T_WHITESPACE"," ",319],["T_STRING","false",319],";",["T_WHITESPACE","\n\n        ",319],["T_WHILE","while",321],["T_WHITESPACE"," ",321],"(","(",["T_VARIABLE","$line",321],["T_WHITESPACE"," ",321],"=",["T_WHITESPACE"," ",321],"@",["T_STRING","fgets",321],"(",["T_VARIABLE","$this",321],["T_OBJECT_OPERATOR","->",321],["T_STRING","socket",321],")",")",["T_WHITESPACE"," ",321],["T_IS_NOT_IDENTICAL","!==",321],["T_WHITESPACE"," ",321],["T_STRING","false",321],")",["T_WHITESPACE"," ",321],"{",["T_WHITESPACE","\n            ",321],["T_VARIABLE","$gotStatus",322],["T_WHITESPACE"," ",322],"=",["T_WHITESPACE"," ",322],["T_VARIABLE","$gotStatus",322],["T_WHITESPACE"," ",322],["T_BOOLEAN_OR","||",322],["T_WHITESPACE"," ",322],"(",["T_STRING","strpos",322],"(",["T_VARIABLE","$line",322],",",["T_WHITESPACE"," ",322],["T_CONSTANT_ENCAPSED_STRING","'HTTP'",322],")",["T_WHITESPACE"," ",322],["T_IS_NOT_IDENTICAL","!==",322],["T_WHITESPACE"," ",322],["T_STRING","false",322],")",";",["T_WHITESPACE","\n            ",322],["T_IF","if",323],["T_WHITESPACE"," ",323],"(",["T_VARIABLE","$gotStatus",323],")",["T_WHITESPACE"," ",323],"{",["T_WHITESPACE","\n                ",323],["T_VARIABLE","$response",324],["T_WHITESPACE"," ",324],["T_CONCAT_EQUAL",".=",324],["T_WHITESPACE"," ",324],["T_VARIABLE","$line",324],";",["T_WHITESPACE","\n                ",324],["T_IF","if",325],["T_WHITESPACE"," ",325],"(",["T_STRING","rtrim",325],"(",["T_VARIABLE","$line",325],")",["T_WHITESPACE"," ",325],["T_IS_IDENTICAL","===",325],["T_WHITESPACE"," ",325],["T_CONSTANT_ENCAPSED_STRING","''",325],")",["T_WHITESPACE"," ",325],["T_BREAK","break",325],";",["T_WHITESPACE","\n            ",325],"}",["T_WHITESPACE","\n        ",326],"}",["T_WHITESPACE","\n\n        ",327],["T_VARIABLE","$this",329],["T_OBJECT_OPERATOR","->",329],["T_STRING","_checkSocketReadTimeout",329],"(",")",";",["T_WHITESPACE","\n\n        ",329],["T_VARIABLE","$statusCode",331],["T_WHITESPACE"," ",331],"=",["T_WHITESPACE"," ",331],["T_STRING","Zend_Http_Response",331],["T_DOUBLE_COLON","::",331],["T_STRING","extractCode",331],"(",["T_VARIABLE","$response",331],")",";",["T_WHITESPACE","\n\n        ",331],["T_COMMENT","\/\/ Handle 100 and 101 responses internally by restarting the read again\n",333],["T_WHITESPACE","        ",334],["T_IF","if",334],["T_WHITESPACE"," ",334],"(",["T_VARIABLE","$statusCode",334],["T_WHITESPACE"," ",334],["T_IS_EQUAL","==",334],["T_WHITESPACE"," ",334],["T_LNUMBER","100",334],["T_WHITESPACE"," ",334],["T_BOOLEAN_OR","||",334],["T_WHITESPACE"," ",334],["T_VARIABLE","$statusCode",334],["T_WHITESPACE"," ",334],["T_IS_EQUAL","==",334],["T_WHITESPACE"," ",334],["T_LNUMBER","101",334],")",["T_WHITESPACE"," ",334],["T_RETURN","return",334],["T_WHITESPACE"," ",334],["T_VARIABLE","$this",334],["T_OBJECT_OPERATOR","->",334],["T_STRING","read",334],"(",")",";",["T_WHITESPACE","\n\n        ",334],["T_COMMENT","\/\/ Check headers to see what kind of connection \/ transfer encoding we have\n",336],["T_WHITESPACE","        ",337],["T_VARIABLE","$headers",337],["T_WHITESPACE"," ",337],"=",["T_WHITESPACE"," ",337],["T_STRING","Zend_Http_Response",337],["T_DOUBLE_COLON","::",337],["T_STRING","extractHeaders",337],"(",["T_VARIABLE","$response",337],")",";",["T_WHITESPACE","\n\n        ",337],["T_DOC_COMMENT","\/**\n         * Responses to HEAD requests and 204 or 304 responses are not expected\n         * to have a body - stop reading here\n         *\/",339],["T_WHITESPACE","\n        ",342],["T_IF","if",343],["T_WHITESPACE"," ",343],"(",["T_VARIABLE","$statusCode",343],["T_WHITESPACE"," ",343],["T_IS_EQUAL","==",343],["T_WHITESPACE"," ",343],["T_LNUMBER","304",343],["T_WHITESPACE"," ",343],["T_BOOLEAN_OR","||",343],["T_WHITESPACE"," ",343],["T_VARIABLE","$statusCode",343],["T_WHITESPACE"," ",343],["T_IS_EQUAL","==",343],["T_WHITESPACE"," ",343],["T_LNUMBER","204",343],["T_WHITESPACE"," ",343],["T_BOOLEAN_OR","||",343],["T_WHITESPACE","\n            ",343],["T_VARIABLE","$this",344],["T_OBJECT_OPERATOR","->",344],["T_STRING","method",344],["T_WHITESPACE"," ",344],["T_IS_EQUAL","==",344],["T_WHITESPACE"," ",344],["T_STRING","Zend_Http_Client",344],["T_DOUBLE_COLON","::",344],["T_STRING","HEAD",344],")",["T_WHITESPACE"," ",344],"{",["T_WHITESPACE","\n\n            ",344],["T_COMMENT","\/\/ Close the connection if requested to do so by the server\n",346],["T_WHITESPACE","            ",347],["T_IF","if",347],["T_WHITESPACE"," ",347],"(",["T_ISSET","isset",347],"(",["T_VARIABLE","$headers",347],"[",["T_CONSTANT_ENCAPSED_STRING","'connection'",347],"]",")",["T_WHITESPACE"," ",347],["T_BOOLEAN_AND","&&",347],["T_WHITESPACE"," ",347],["T_VARIABLE","$headers",347],"[",["T_CONSTANT_ENCAPSED_STRING","'connection'",347],"]",["T_WHITESPACE"," ",347],["T_IS_EQUAL","==",347],["T_WHITESPACE"," ",347],["T_CONSTANT_ENCAPSED_STRING","'close'",347],")",["T_WHITESPACE"," ",347],"{",["T_WHITESPACE","\n                ",347],["T_VARIABLE","$this",348],["T_OBJECT_OPERATOR","->",348],["T_STRING","close",348],"(",")",";",["T_WHITESPACE","\n            ",348],"}",["T_WHITESPACE","\n            ",349],["T_RETURN","return",350],["T_WHITESPACE"," ",350],["T_VARIABLE","$response",350],";",["T_WHITESPACE","\n        ",350],"}",["T_WHITESPACE","\n\n        ",351],["T_COMMENT","\/\/ If we got a 'transfer-encoding: chunked' header\n",353],["T_WHITESPACE","        ",354],["T_IF","if",354],["T_WHITESPACE"," ",354],"(",["T_ISSET","isset",354],"(",["T_VARIABLE","$headers",354],"[",["T_CONSTANT_ENCAPSED_STRING","'transfer-encoding'",354],"]",")",")",["T_WHITESPACE"," ",354],"{",["T_WHITESPACE","\n\n            ",354],["T_IF","if",356],["T_WHITESPACE"," ",356],"(",["T_STRING","strtolower",356],"(",["T_VARIABLE","$headers",356],"[",["T_CONSTANT_ENCAPSED_STRING","'transfer-encoding'",356],"]",")",["T_WHITESPACE"," ",356],["T_IS_EQUAL","==",356],["T_WHITESPACE"," ",356],["T_CONSTANT_ENCAPSED_STRING","'chunked'",356],")",["T_WHITESPACE"," ",356],"{",["T_WHITESPACE","\n\n                ",356],["T_DO","do",358],["T_WHITESPACE"," ",358],"{",["T_WHITESPACE","\n                    ",358],["T_VARIABLE","$line",359],["T_WHITESPACE","  ",359],"=",["T_WHITESPACE"," ",359],"@",["T_STRING","fgets",359],"(",["T_VARIABLE","$this",359],["T_OBJECT_OPERATOR","->",359],["T_STRING","socket",359],")",";",["T_WHITESPACE","\n                    ",359],["T_VARIABLE","$this",360],["T_OBJECT_OPERATOR","->",360],["T_STRING","_checkSocketReadTimeout",360],"(",")",";",["T_WHITESPACE","\n\n                    ",360],["T_VARIABLE","$chunk",362],["T_WHITESPACE"," ",362],"=",["T_WHITESPACE"," ",362],["T_VARIABLE","$line",362],";",["T_WHITESPACE","\n\n                    ",362],["T_COMMENT","\/\/ Figure out the next chunk size\n",364],["T_WHITESPACE","                    ",365],["T_VARIABLE","$chunksize",365],["T_WHITESPACE"," ",365],"=",["T_WHITESPACE"," ",365],["T_STRING","trim",365],"(",["T_VARIABLE","$line",365],")",";",["T_WHITESPACE","\n                    ",365],["T_IF","if",366],["T_WHITESPACE"," ",366],"(","!",["T_WHITESPACE"," ",366],["T_STRING","ctype_xdigit",366],"(",["T_VARIABLE","$chunksize",366],")",")",["T_WHITESPACE"," ",366],"{",["T_WHITESPACE","\n                        ",366],["T_VARIABLE","$this",367],["T_OBJECT_OPERATOR","->",367],["T_STRING","close",367],"(",")",";",["T_WHITESPACE","\n                        ",367],["T_COMMENT","#require_once 'Zend\/Http\/Client\/Adapter\/Exception.php';\n",368],["T_WHITESPACE","                        ",369],["T_THROW","throw",369],["T_WHITESPACE"," ",369],["T_NEW","new",369],["T_WHITESPACE"," ",369],["T_STRING","Zend_Http_Client_Adapter_Exception",369],"(",["T_CONSTANT_ENCAPSED_STRING","'Invalid chunk size \"'",369],["T_WHITESPACE"," ",369],".",["T_WHITESPACE","\n                            ",369],["T_VARIABLE","$chunksize",370],["T_WHITESPACE"," ",370],".",["T_WHITESPACE"," ",370],["T_CONSTANT_ENCAPSED_STRING","'\" unable to read chunked body'",370],")",";",["T_WHITESPACE","\n                    ",370],"}",["T_WHITESPACE","\n\n                    ",371],["T_COMMENT","\/\/ Convert the hexadecimal value to plain integer\n",373],["T_WHITESPACE","                    ",374],["T_VARIABLE","$chunksize",374],["T_WHITESPACE"," ",374],"=",["T_WHITESPACE"," ",374],["T_STRING","hexdec",374],"(",["T_VARIABLE","$chunksize",374],")",";",["T_WHITESPACE","\n\n                    ",374],["T_COMMENT","\/\/ Read next chunk\n",376],["T_WHITESPACE","                    ",377],["T_VARIABLE","$read_to",377],["T_WHITESPACE"," ",377],"=",["T_WHITESPACE"," ",377],["T_STRING","ftell",377],"(",["T_VARIABLE","$this",377],["T_OBJECT_OPERATOR","->",377],["T_STRING","socket",377],")",["T_WHITESPACE"," ",377],"+",["T_WHITESPACE"," ",377],["T_VARIABLE","$chunksize",377],";",["T_WHITESPACE","\n\n                    ",377],["T_DO","do",379],["T_WHITESPACE"," ",379],"{",["T_WHITESPACE","\n                        ",379],["T_VARIABLE","$current_pos",380],["T_WHITESPACE"," ",380],"=",["T_WHITESPACE"," ",380],["T_STRING","ftell",380],"(",["T_VARIABLE","$this",380],["T_OBJECT_OPERATOR","->",380],["T_STRING","socket",380],")",";",["T_WHITESPACE","\n                        ",380],["T_IF","if",381],["T_WHITESPACE"," ",381],"(",["T_VARIABLE","$current_pos",381],["T_WHITESPACE"," ",381],["T_IS_GREATER_OR_EQUAL",">=",381],["T_WHITESPACE"," ",381],["T_VARIABLE","$read_to",381],")",["T_WHITESPACE"," ",381],["T_BREAK","break",381],";",["T_WHITESPACE","\n\n                        ",381],["T_IF","if",383],"(",["T_VARIABLE","$this",383],["T_OBJECT_OPERATOR","->",383],["T_STRING","out_stream",383],")",["T_WHITESPACE"," ",383],"{",["T_WHITESPACE","\n                            ",383],["T_IF","if",384],"(",["T_STRING","stream_copy_to_stream",384],"(",["T_VARIABLE","$this",384],["T_OBJECT_OPERATOR","->",384],["T_STRING","socket",384],",",["T_WHITESPACE"," ",384],["T_VARIABLE","$this",384],["T_OBJECT_OPERATOR","->",384],["T_STRING","out_stream",384],",",["T_WHITESPACE"," ",384],["T_VARIABLE","$read_to",384],["T_WHITESPACE"," ",384],"-",["T_WHITESPACE"," ",384],["T_VARIABLE","$current_pos",384],")",["T_WHITESPACE"," ",384],["T_IS_EQUAL","==",384],["T_WHITESPACE"," ",384],["T_LNUMBER","0",384],")",["T_WHITESPACE"," ",384],"{",["T_WHITESPACE","\n                              ",384],["T_VARIABLE","$this",385],["T_OBJECT_OPERATOR","->",385],["T_STRING","_checkSocketReadTimeout",385],"(",")",";",["T_WHITESPACE","\n                              ",385],["T_BREAK","break",386],";",["T_WHITESPACE","\n                             ",386],"}",["T_WHITESPACE","\n                        ",387],"}",["T_WHITESPACE"," ",388],["T_ELSE","else",388],["T_WHITESPACE"," ",388],"{",["T_WHITESPACE","\n                            ",388],["T_VARIABLE","$line",389],["T_WHITESPACE"," ",389],"=",["T_WHITESPACE"," ",389],"@",["T_STRING","fread",389],"(",["T_VARIABLE","$this",389],["T_OBJECT_OPERATOR","->",389],["T_STRING","socket",389],",",["T_WHITESPACE"," ",389],["T_VARIABLE","$read_to",389],["T_WHITESPACE"," ",389],"-",["T_WHITESPACE"," ",389],["T_VARIABLE","$current_pos",389],")",";",["T_WHITESPACE","\n                            ",389],["T_IF","if",390],["T_WHITESPACE"," ",390],"(",["T_VARIABLE","$line",390],["T_WHITESPACE"," ",390],["T_IS_IDENTICAL","===",390],["T_WHITESPACE"," ",390],["T_STRING","false",390],["T_WHITESPACE"," ",390],["T_BOOLEAN_OR","||",390],["T_WHITESPACE"," ",390],["T_STRING","strlen",390],"(",["T_VARIABLE","$line",390],")",["T_WHITESPACE"," ",390],["T_IS_IDENTICAL","===",390],["T_WHITESPACE"," ",390],["T_LNUMBER","0",390],")",["T_WHITESPACE"," ",390],"{",["T_WHITESPACE","\n                                ",390],["T_VARIABLE","$this",391],["T_OBJECT_OPERATOR","->",391],["T_STRING","_checkSocketReadTimeout",391],"(",")",";",["T_WHITESPACE","\n                                ",391],["T_BREAK","break",392],";",["T_WHITESPACE","\n                            ",392],"}",["T_WHITESPACE","\n                                    ",393],["T_VARIABLE","$chunk",394],["T_WHITESPACE"," ",394],["T_CONCAT_EQUAL",".=",394],["T_WHITESPACE"," ",394],["T_VARIABLE","$line",394],";",["T_WHITESPACE","\n                        ",394],"}",["T_WHITESPACE","\n                    ",395],"}",["T_WHITESPACE"," ",396],["T_WHILE","while",396],["T_WHITESPACE"," ",396],"(","!",["T_WHITESPACE"," ",396],["T_STRING","feof",396],"(",["T_VARIABLE","$this",396],["T_OBJECT_OPERATOR","->",396],["T_STRING","socket",396],")",")",";",["T_WHITESPACE","\n\n                    ",396],["T_VARIABLE","$chunk",398],["T_WHITESPACE"," ",398],["T_CONCAT_EQUAL",".=",398],["T_WHITESPACE"," ",398],"@",["T_STRING","fgets",398],"(",["T_VARIABLE","$this",398],["T_OBJECT_OPERATOR","->",398],["T_STRING","socket",398],")",";",["T_WHITESPACE","\n                    ",398],["T_VARIABLE","$this",399],["T_OBJECT_OPERATOR","->",399],["T_STRING","_checkSocketReadTimeout",399],"(",")",";",["T_WHITESPACE","\n\n                    ",399],["T_IF","if",401],"(","!",["T_VARIABLE","$this",401],["T_OBJECT_OPERATOR","->",401],["T_STRING","out_stream",401],")",["T_WHITESPACE"," ",401],"{",["T_WHITESPACE","\n                        ",401],["T_VARIABLE","$response",402],["T_WHITESPACE"," ",402],["T_CONCAT_EQUAL",".=",402],["T_WHITESPACE"," ",402],["T_VARIABLE","$chunk",402],";",["T_WHITESPACE","\n                    ",402],"}",["T_WHITESPACE","\n                ",403],"}",["T_WHITESPACE"," ",404],["T_WHILE","while",404],["T_WHITESPACE"," ",404],"(",["T_VARIABLE","$chunksize",404],["T_WHITESPACE"," ",404],">",["T_WHITESPACE"," ",404],["T_LNUMBER","0",404],")",";",["T_WHITESPACE","\n            ",404],"}",["T_WHITESPACE"," ",405],["T_ELSE","else",405],["T_WHITESPACE"," ",405],"{",["T_WHITESPACE","\n                ",405],["T_VARIABLE","$this",406],["T_OBJECT_OPERATOR","->",406],["T_STRING","close",406],"(",")",";",["T_WHITESPACE","\n        ",406],["T_COMMENT","#require_once 'Zend\/Http\/Client\/Adapter\/Exception.php';\n",407],["T_WHITESPACE","                ",408],["T_THROW","throw",408],["T_WHITESPACE"," ",408],["T_NEW","new",408],["T_WHITESPACE"," ",408],["T_STRING","Zend_Http_Client_Adapter_Exception",408],"(",["T_CONSTANT_ENCAPSED_STRING","'Cannot handle \"'",408],["T_WHITESPACE"," ",408],".",["T_WHITESPACE","\n                    ",408],["T_VARIABLE","$headers",409],"[",["T_CONSTANT_ENCAPSED_STRING","'transfer-encoding'",409],"]",["T_WHITESPACE"," ",409],".",["T_WHITESPACE"," ",409],["T_CONSTANT_ENCAPSED_STRING","'\" transfer encoding'",409],")",";",["T_WHITESPACE","\n            ",409],"}",["T_WHITESPACE","\n\n            ",410],["T_COMMENT","\/\/ We automatically decode chunked-messages when writing to a stream\n",412],["T_WHITESPACE","            ",413],["T_COMMENT","\/\/ this means we have to disallow the Zend_Http_Response to do it again\n",413],["T_WHITESPACE","            ",414],["T_IF","if",414],["T_WHITESPACE"," ",414],"(",["T_VARIABLE","$this",414],["T_OBJECT_OPERATOR","->",414],["T_STRING","out_stream",414],")",["T_WHITESPACE"," ",414],"{",["T_WHITESPACE","\n                ",414],["T_VARIABLE","$response",415],["T_WHITESPACE"," ",415],"=",["T_WHITESPACE"," ",415],["T_STRING","str_ireplace",415],"(",["T_CONSTANT_ENCAPSED_STRING","\"Transfer-Encoding: chunked\\r\\n\"",415],",",["T_WHITESPACE"," ",415],["T_CONSTANT_ENCAPSED_STRING","''",415],",",["T_WHITESPACE"," ",415],["T_VARIABLE","$response",415],")",";",["T_WHITESPACE","\n            ",415],"}",["T_WHITESPACE","\n        ",416],["T_COMMENT","\/\/ Else, if we got the content-length header, read this number of bytes\n",417],["T_WHITESPACE","        ",418],"}",["T_WHITESPACE"," ",418],["T_ELSEIF","elseif",418],["T_WHITESPACE"," ",418],"(",["T_ISSET","isset",418],"(",["T_VARIABLE","$headers",418],"[",["T_CONSTANT_ENCAPSED_STRING","'content-length'",418],"]",")",")",["T_WHITESPACE"," ",418],"{",["T_WHITESPACE","\n\n            ",418],["T_COMMENT","\/\/ If we got more than one Content-Length header (see ZF-9404) use\n",420],["T_WHITESPACE","            ",421],["T_COMMENT","\/\/ the last value sent\n",421],["T_WHITESPACE","            ",422],["T_IF","if",422],["T_WHITESPACE"," ",422],"(",["T_STRING","is_array",422],"(",["T_VARIABLE","$headers",422],"[",["T_CONSTANT_ENCAPSED_STRING","'content-length'",422],"]",")",")",["T_WHITESPACE"," ",422],"{",["T_WHITESPACE","\n                ",422],["T_VARIABLE","$contentLength",423],["T_WHITESPACE"," ",423],"=",["T_WHITESPACE"," ",423],["T_VARIABLE","$headers",423],"[",["T_CONSTANT_ENCAPSED_STRING","'content-length'",423],"]","[",["T_STRING","count",423],"(",["T_VARIABLE","$headers",423],"[",["T_CONSTANT_ENCAPSED_STRING","'content-length'",423],"]",")",["T_WHITESPACE"," ",423],"-",["T_WHITESPACE"," ",423],["T_LNUMBER","1",423],"]",";",["T_WHITESPACE","\n            ",423],"}",["T_WHITESPACE"," ",424],["T_ELSE","else",424],["T_WHITESPACE"," ",424],"{",["T_WHITESPACE","\n                ",424],["T_VARIABLE","$contentLength",425],["T_WHITESPACE"," ",425],"=",["T_WHITESPACE"," ",425],["T_VARIABLE","$headers",425],"[",["T_CONSTANT_ENCAPSED_STRING","'content-length'",425],"]",";",["T_WHITESPACE","\n            ",425],"}",["T_WHITESPACE","\n\n            ",426],["T_VARIABLE","$current_pos",428],["T_WHITESPACE"," ",428],"=",["T_WHITESPACE"," ",428],["T_STRING","ftell",428],"(",["T_VARIABLE","$this",428],["T_OBJECT_OPERATOR","->",428],["T_STRING","socket",428],")",";",["T_WHITESPACE","\n            ",428],["T_VARIABLE","$chunk",429],["T_WHITESPACE"," ",429],"=",["T_WHITESPACE"," ",429],["T_CONSTANT_ENCAPSED_STRING","''",429],";",["T_WHITESPACE","\n\n            ",429],["T_FOR","for",431],["T_WHITESPACE"," ",431],"(",["T_VARIABLE","$read_to",431],["T_WHITESPACE"," ",431],"=",["T_WHITESPACE"," ",431],["T_VARIABLE","$current_pos",431],["T_WHITESPACE"," ",431],"+",["T_WHITESPACE"," ",431],["T_VARIABLE","$contentLength",431],";",["T_WHITESPACE","\n                 ",431],["T_VARIABLE","$read_to",432],["T_WHITESPACE"," ",432],">",["T_WHITESPACE"," ",432],["T_VARIABLE","$current_pos",432],";",["T_WHITESPACE","\n                 ",432],["T_VARIABLE","$current_pos",433],["T_WHITESPACE"," ",433],"=",["T_WHITESPACE"," ",433],["T_STRING","ftell",433],"(",["T_VARIABLE","$this",433],["T_OBJECT_OPERATOR","->",433],["T_STRING","socket",433],")",")",["T_WHITESPACE"," ",433],"{",["T_WHITESPACE","\n\n                 ",433],["T_IF","if",435],"(",["T_VARIABLE","$this",435],["T_OBJECT_OPERATOR","->",435],["T_STRING","out_stream",435],")",["T_WHITESPACE"," ",435],"{",["T_WHITESPACE","\n                     ",435],["T_IF","if",436],"(","@",["T_STRING","stream_copy_to_stream",436],"(",["T_VARIABLE","$this",436],["T_OBJECT_OPERATOR","->",436],["T_STRING","socket",436],",",["T_WHITESPACE"," ",436],["T_VARIABLE","$this",436],["T_OBJECT_OPERATOR","->",436],["T_STRING","out_stream",436],",",["T_WHITESPACE"," ",436],["T_VARIABLE","$read_to",436],["T_WHITESPACE"," ",436],"-",["T_WHITESPACE"," ",436],["T_VARIABLE","$current_pos",436],")",["T_WHITESPACE"," ",436],["T_IS_EQUAL","==",436],["T_WHITESPACE"," ",436],["T_LNUMBER","0",436],")",["T_WHITESPACE"," ",436],"{",["T_WHITESPACE","\n                          ",436],["T_VARIABLE","$this",437],["T_OBJECT_OPERATOR","->",437],["T_STRING","_checkSocketReadTimeout",437],"(",")",";",["T_WHITESPACE","\n                          ",437],["T_BREAK","break",438],";",["T_WHITESPACE","\n                     ",438],"}",["T_WHITESPACE","\n                 ",439],"}",["T_WHITESPACE"," ",440],["T_ELSE","else",440],["T_WHITESPACE"," ",440],"{",["T_WHITESPACE","\n                    ",440],["T_VARIABLE","$chunk",441],["T_WHITESPACE"," ",441],"=",["T_WHITESPACE"," ",441],"@",["T_STRING","fread",441],"(",["T_VARIABLE","$this",441],["T_OBJECT_OPERATOR","->",441],["T_STRING","socket",441],",",["T_WHITESPACE"," ",441],["T_VARIABLE","$read_to",441],["T_WHITESPACE"," ",441],"-",["T_WHITESPACE"," ",441],["T_VARIABLE","$current_pos",441],")",";",["T_WHITESPACE","\n                    ",441],["T_IF","if",442],["T_WHITESPACE"," ",442],"(",["T_VARIABLE","$chunk",442],["T_WHITESPACE"," ",442],["T_IS_IDENTICAL","===",442],["T_WHITESPACE"," ",442],["T_STRING","false",442],["T_WHITESPACE"," ",442],["T_BOOLEAN_OR","||",442],["T_WHITESPACE"," ",442],["T_STRING","strlen",442],"(",["T_VARIABLE","$chunk",442],")",["T_WHITESPACE"," ",442],["T_IS_IDENTICAL","===",442],["T_WHITESPACE"," ",442],["T_LNUMBER","0",442],")",["T_WHITESPACE"," ",442],"{",["T_WHITESPACE","\n                        ",442],["T_VARIABLE","$this",443],["T_OBJECT_OPERATOR","->",443],["T_STRING","_checkSocketReadTimeout",443],"(",")",";",["T_WHITESPACE","\n                        ",443],["T_BREAK","break",444],";",["T_WHITESPACE","\n                    ",444],"}",["T_WHITESPACE","\n\n                    ",445],["T_VARIABLE","$response",447],["T_WHITESPACE"," ",447],["T_CONCAT_EQUAL",".=",447],["T_WHITESPACE"," ",447],["T_VARIABLE","$chunk",447],";",["T_WHITESPACE","\n                ",447],"}",["T_WHITESPACE","\n\n                ",448],["T_COMMENT","\/\/ Break if the connection ended prematurely\n",450],["T_WHITESPACE","                ",451],["T_IF","if",451],["T_WHITESPACE"," ",451],"(",["T_STRING","feof",451],"(",["T_VARIABLE","$this",451],["T_OBJECT_OPERATOR","->",451],["T_STRING","socket",451],")",")",["T_WHITESPACE"," ",451],["T_BREAK","break",451],";",["T_WHITESPACE","\n            ",451],"}",["T_WHITESPACE","\n\n        ",452],["T_COMMENT","\/\/ Fallback: just read the response until EOF\n",454],["T_WHITESPACE","        ",455],"}",["T_WHITESPACE"," ",455],["T_ELSE","else",455],["T_WHITESPACE"," ",455],"{",["T_WHITESPACE","\n\n            ",455],["T_DO","do",457],["T_WHITESPACE"," ",457],"{",["T_WHITESPACE","\n                ",457],["T_IF","if",458],"(",["T_VARIABLE","$this",458],["T_OBJECT_OPERATOR","->",458],["T_STRING","out_stream",458],")",["T_WHITESPACE"," ",458],"{",["T_WHITESPACE","\n                    ",458],["T_IF","if",459],"(","@",["T_STRING","stream_copy_to_stream",459],"(",["T_VARIABLE","$this",459],["T_OBJECT_OPERATOR","->",459],["T_STRING","socket",459],",",["T_WHITESPACE"," ",459],["T_VARIABLE","$this",459],["T_OBJECT_OPERATOR","->",459],["T_STRING","out_stream",459],")",["T_WHITESPACE"," ",459],["T_IS_EQUAL","==",459],["T_WHITESPACE"," ",459],["T_LNUMBER","0",459],")",["T_WHITESPACE"," ",459],"{",["T_WHITESPACE","\n                          ",459],["T_VARIABLE","$this",460],["T_OBJECT_OPERATOR","->",460],["T_STRING","_checkSocketReadTimeout",460],"(",")",";",["T_WHITESPACE","\n                          ",460],["T_BREAK","break",461],";",["T_WHITESPACE","\n                     ",461],"}",["T_WHITESPACE","\n                ",462],"}",["T_WHITESPACE","  ",463],["T_ELSE","else",463],["T_WHITESPACE"," ",463],"{",["T_WHITESPACE","\n                    ",463],["T_VARIABLE","$buff",464],["T_WHITESPACE"," ",464],"=",["T_WHITESPACE"," ",464],"@",["T_STRING","fread",464],"(",["T_VARIABLE","$this",464],["T_OBJECT_OPERATOR","->",464],["T_STRING","socket",464],",",["T_WHITESPACE"," ",464],["T_LNUMBER","8192",464],")",";",["T_WHITESPACE","\n                    ",464],["T_IF","if",465],["T_WHITESPACE"," ",465],"(",["T_VARIABLE","$buff",465],["T_WHITESPACE"," ",465],["T_IS_IDENTICAL","===",465],["T_WHITESPACE"," ",465],["T_STRING","false",465],["T_WHITESPACE"," ",465],["T_BOOLEAN_OR","||",465],["T_WHITESPACE"," ",465],["T_STRING","strlen",465],"(",["T_VARIABLE","$buff",465],")",["T_WHITESPACE"," ",465],["T_IS_IDENTICAL","===",465],["T_WHITESPACE"," ",465],["T_LNUMBER","0",465],")",["T_WHITESPACE"," ",465],"{",["T_WHITESPACE","\n                        ",465],["T_VARIABLE","$this",466],["T_OBJECT_OPERATOR","->",466],["T_STRING","_checkSocketReadTimeout",466],"(",")",";",["T_WHITESPACE","\n                        ",466],["T_BREAK","break",467],";",["T_WHITESPACE","\n                    ",467],"}",["T_WHITESPACE"," ",468],["T_ELSE","else",468],["T_WHITESPACE"," ",468],"{",["T_WHITESPACE","\n                        ",468],["T_VARIABLE","$response",469],["T_WHITESPACE"," ",469],["T_CONCAT_EQUAL",".=",469],["T_WHITESPACE"," ",469],["T_VARIABLE","$buff",469],";",["T_WHITESPACE","\n                    ",469],"}",["T_WHITESPACE","\n                ",470],"}",["T_WHITESPACE","\n\n            ",471],"}",["T_WHITESPACE"," ",473],["T_WHILE","while",473],["T_WHITESPACE"," ",473],"(",["T_STRING","feof",473],"(",["T_VARIABLE","$this",473],["T_OBJECT_OPERATOR","->",473],["T_STRING","socket",473],")",["T_WHITESPACE"," ",473],["T_IS_IDENTICAL","===",473],["T_WHITESPACE"," ",473],["T_STRING","false",473],")",";",["T_WHITESPACE","\n\n            ",473],["T_VARIABLE","$this",475],["T_OBJECT_OPERATOR","->",475],["T_STRING","close",475],"(",")",";",["T_WHITESPACE","\n        ",475],"}",["T_WHITESPACE","\n\n        ",476],["T_COMMENT","\/\/ Close the connection if requested to do so by the server\n",478],["T_WHITESPACE","        ",479],["T_IF","if",479],["T_WHITESPACE"," ",479],"(",["T_ISSET","isset",479],"(",["T_VARIABLE","$headers",479],"[",["T_CONSTANT_ENCAPSED_STRING","'connection'",479],"]",")",["T_WHITESPACE"," ",479],["T_BOOLEAN_AND","&&",479],["T_WHITESPACE"," ",479],["T_VARIABLE","$headers",479],"[",["T_CONSTANT_ENCAPSED_STRING","'connection'",479],"]",["T_WHITESPACE"," ",479],["T_IS_EQUAL","==",479],["T_WHITESPACE"," ",479],["T_CONSTANT_ENCAPSED_STRING","'close'",479],")",["T_WHITESPACE"," ",479],"{",["T_WHITESPACE","\n            ",479],["T_VARIABLE","$this",480],["T_OBJECT_OPERATOR","->",480],["T_STRING","close",480],"(",")",";",["T_WHITESPACE","\n        ",480],"}",["T_WHITESPACE","\n\n        ",481],["T_RETURN","return",483],["T_WHITESPACE"," ",483],["T_VARIABLE","$response",483],";",["T_WHITESPACE","\n    ",483],"}",["T_WHITESPACE","\n\n    ",484],["T_DOC_COMMENT","\/**\n     * Close the connection to the server\n     *\n     *\/",486],["T_WHITESPACE","\n    ",489],["T_PUBLIC","public",490],["T_WHITESPACE"," ",490],["T_FUNCTION","function",490],["T_WHITESPACE"," ",490],["T_STRING","close",490],"(",")",["T_WHITESPACE","\n    ",490],"{",["T_WHITESPACE","\n        ",491],["T_IF","if",492],["T_WHITESPACE"," ",492],"(",["T_STRING","is_resource",492],"(",["T_VARIABLE","$this",492],["T_OBJECT_OPERATOR","->",492],["T_STRING","socket",492],")",")",["T_WHITESPACE"," ",492],"@",["T_STRING","fclose",492],"(",["T_VARIABLE","$this",492],["T_OBJECT_OPERATOR","->",492],["T_STRING","socket",492],")",";",["T_WHITESPACE","\n        ",492],["T_VARIABLE","$this",493],["T_OBJECT_OPERATOR","->",493],["T_STRING","socket",493],["T_WHITESPACE"," ",493],"=",["T_WHITESPACE"," ",493],["T_STRING","null",493],";",["T_WHITESPACE","\n        ",493],["T_VARIABLE","$this",494],["T_OBJECT_OPERATOR","->",494],["T_STRING","connected_to",494],["T_WHITESPACE"," ",494],"=",["T_WHITESPACE"," ",494],["T_ARRAY","array",494],"(",["T_STRING","null",494],",",["T_WHITESPACE"," ",494],["T_STRING","null",494],")",";",["T_WHITESPACE","\n    ",494],"}",["T_WHITESPACE","\n\n    ",495],["T_DOC_COMMENT","\/**\n     * Check if the socket has timed out - if so close connection and throw\n     * an exception\n     *\n     * @throws Zend_Http_Client_Adapter_Exception with READ_TIMEOUT code\n     *\/",497],["T_WHITESPACE","\n    ",502],["T_PROTECTED","protected",503],["T_WHITESPACE"," ",503],["T_FUNCTION","function",503],["T_WHITESPACE"," ",503],["T_STRING","_checkSocketReadTimeout",503],"(",")",["T_WHITESPACE","\n    ",503],"{",["T_WHITESPACE","\n        ",504],["T_IF","if",505],["T_WHITESPACE"," ",505],"(",["T_VARIABLE","$this",505],["T_OBJECT_OPERATOR","->",505],["T_STRING","socket",505],")",["T_WHITESPACE"," ",505],"{",["T_WHITESPACE","\n            ",505],["T_VARIABLE","$info",506],["T_WHITESPACE"," ",506],"=",["T_WHITESPACE"," ",506],["T_STRING","stream_get_meta_data",506],"(",["T_VARIABLE","$this",506],["T_OBJECT_OPERATOR","->",506],["T_STRING","socket",506],")",";",["T_WHITESPACE","\n            ",506],["T_VARIABLE","$timedout",507],["T_WHITESPACE"," ",507],"=",["T_WHITESPACE"," ",507],["T_VARIABLE","$info",507],"[",["T_CONSTANT_ENCAPSED_STRING","'timed_out'",507],"]",";",["T_WHITESPACE","\n            ",507],["T_IF","if",508],["T_WHITESPACE"," ",508],"(",["T_VARIABLE","$timedout",508],")",["T_WHITESPACE"," ",508],"{",["T_WHITESPACE","\n                ",508],["T_VARIABLE","$this",509],["T_OBJECT_OPERATOR","->",509],["T_STRING","close",509],"(",")",";",["T_WHITESPACE","\n                ",509],["T_COMMENT","#require_once 'Zend\/Http\/Client\/Adapter\/Exception.php';\n",510],["T_WHITESPACE","                ",511],["T_THROW","throw",511],["T_WHITESPACE"," ",511],["T_NEW","new",511],["T_WHITESPACE"," ",511],["T_STRING","Zend_Http_Client_Adapter_Exception",511],"(",["T_WHITESPACE","\n                    ",511],"\"",["T_ENCAPSED_AND_WHITESPACE","Read timed out after ",512],["T_CURLY_OPEN","{",512],["T_VARIABLE","$this",512],["T_OBJECT_OPERATOR","->",512],["T_STRING","config",512],"[",["T_CONSTANT_ENCAPSED_STRING","'timeout'",512],"]","}",["T_ENCAPSED_AND_WHITESPACE"," seconds",512],"\"",",",["T_WHITESPACE","\n                    ",512],["T_STRING","Zend_Http_Client_Adapter_Exception",513],["T_DOUBLE_COLON","::",513],["T_STRING","READ_TIMEOUT",513],["T_WHITESPACE","\n                ",513],")",";",["T_WHITESPACE","\n            ",514],"}",["T_WHITESPACE","\n        ",515],"}",["T_WHITESPACE","\n    ",516],"}",["T_WHITESPACE","\n\n    ",517],["T_DOC_COMMENT","\/**\n     * Set output stream for the response\n     *\n     * @param resource $stream\n     * @return Zend_Http_Client_Adapter_Socket\n     *\/",519],["T_WHITESPACE","\n    ",524],["T_PUBLIC","public",525],["T_WHITESPACE"," ",525],["T_FUNCTION","function",525],["T_WHITESPACE"," ",525],["T_STRING","setOutputStream",525],"(",["T_VARIABLE","$stream",525],")",["T_WHITESPACE","\n    ",525],"{",["T_WHITESPACE","\n        ",526],["T_VARIABLE","$this",527],["T_OBJECT_OPERATOR","->",527],["T_STRING","out_stream",527],["T_WHITESPACE"," ",527],"=",["T_WHITESPACE"," ",527],["T_VARIABLE","$stream",527],";",["T_WHITESPACE","\n        ",527],["T_RETURN","return",528],["T_WHITESPACE"," ",528],["T_VARIABLE","$this",528],";",["T_WHITESPACE","\n    ",528],"}",["T_WHITESPACE","\n\n    ",529],["T_DOC_COMMENT","\/**\n     * Destructor: make sure the socket is disconnected\n     *\n     * If we are in persistent TCP mode, will not close the connection\n     *\n     *\/",531],["T_WHITESPACE","\n    ",536],["T_PUBLIC","public",537],["T_WHITESPACE"," ",537],["T_FUNCTION","function",537],["T_WHITESPACE"," ",537],["T_STRING","__destruct",537],"(",")",["T_WHITESPACE","\n    ",537],"{",["T_WHITESPACE","\n        ",538],["T_IF","if",539],["T_WHITESPACE"," ",539],"(","!",["T_WHITESPACE"," ",539],["T_VARIABLE","$this",539],["T_OBJECT_OPERATOR","->",539],["T_STRING","config",539],"[",["T_CONSTANT_ENCAPSED_STRING","'persistent'",539],"]",")",["T_WHITESPACE"," ",539],"{",["T_WHITESPACE","\n            ",539],["T_IF","if",540],["T_WHITESPACE"," ",540],"(",["T_VARIABLE","$this",540],["T_OBJECT_OPERATOR","->",540],["T_STRING","socket",540],")",["T_WHITESPACE"," ",540],["T_VARIABLE","$this",540],["T_OBJECT_OPERATOR","->",540],["T_STRING","close",540],"(",")",";",["T_WHITESPACE","\n        ",540],"}",["T_WHITESPACE","\n    ",541],"}",["T_WHITESPACE","\n",542],"}",["T_WHITESPACE","\n",543]]
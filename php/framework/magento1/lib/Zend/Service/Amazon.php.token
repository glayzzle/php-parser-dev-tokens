[["T_OPEN_TAG","<?php\n",1],["T_WHITESPACE","\n",2],["T_DOC_COMMENT","\/**\n * Zend Framework\n *\n * LICENSE\n *\n * This source file is subject to the new BSD license that is bundled\n * with this package in the file LICENSE.txt.\n * It is also available through the world-wide-web at this URL:\n * http:\/\/framework.zend.com\/license\/new-bsd\n * If you did not receive a copy of the license and are unable to\n * obtain it through the world-wide-web, please send an email\n * to license@zend.com so we can send you a copy immediately.\n *\n * @category   Zend\n * @package    Zend_Service\n * @subpackage Amazon\n * @copyright  Copyright (c) 2005-2015 Zend Technologies USA Inc. (http:\/\/www.zend.com)\n * @license    http:\/\/framework.zend.com\/license\/new-bsd     New BSD License\n * @version    $Id$\n *\/",3],["T_WHITESPACE","\n\n",22],["T_DOC_COMMENT","\/**\n * @see Zend_Rest_Client\n *\/",24],["T_WHITESPACE","\n",26],["T_COMMENT","#require_once 'Zend\/Rest\/Client.php';\n",27],["T_WHITESPACE","\n",28],["T_DOC_COMMENT","\/** @see Zend_Xml_Security *\/",29],["T_WHITESPACE","\n",29],["T_COMMENT","#require_once 'Zend\/Xml\/Security.php';\n",30],["T_WHITESPACE","\n",31],["T_DOC_COMMENT","\/**\n * @category   Zend\n * @package    Zend_Service\n * @subpackage Amazon\n * @copyright  Copyright (c) 2005-2015 Zend Technologies USA Inc. (http:\/\/www.zend.com)\n * @license    http:\/\/framework.zend.com\/license\/new-bsd     New BSD License\n *\/",32],["T_WHITESPACE","\n",38],["T_CLASS","class",39],["T_WHITESPACE"," ",39],["T_STRING","Zend_Service_Amazon",39],["T_WHITESPACE","\n",39],"{",["T_WHITESPACE","\n    ",40],["T_DOC_COMMENT","\/**\n     * Amazon Web Services Access Key ID\n     *\n     * @var string\n     *\/",41],["T_WHITESPACE","\n    ",45],["T_PUBLIC","public",46],["T_WHITESPACE"," ",46],["T_VARIABLE","$appId",46],";",["T_WHITESPACE","\n\n    ",46],["T_DOC_COMMENT","\/**\n     * @var string\n     *\/",48],["T_WHITESPACE","\n    ",50],["T_PROTECTED","protected",51],["T_WHITESPACE"," ",51],["T_VARIABLE","$_secretKey",51],["T_WHITESPACE"," ",51],"=",["T_WHITESPACE"," ",51],["T_STRING","null",51],";",["T_WHITESPACE","\n\n    ",51],["T_DOC_COMMENT","\/**\n     * @var string\n     *\/",53],["T_WHITESPACE","\n    ",55],["T_PROTECTED","protected",56],["T_WHITESPACE"," ",56],["T_VARIABLE","$_baseUri",56],["T_WHITESPACE"," ",56],"=",["T_WHITESPACE"," ",56],["T_STRING","null",56],";",["T_WHITESPACE","\n\n    ",56],["T_DOC_COMMENT","\/**\n     * List of Amazon Web Service base URLs, indexed by country code\n     *\n     * @var array\n     *\/",58],["T_WHITESPACE","\n    ",62],["T_PROTECTED","protected",63],["T_WHITESPACE"," ",63],["T_VARIABLE","$_baseUriList",63],["T_WHITESPACE"," ",63],"=",["T_WHITESPACE"," ",63],["T_ARRAY","array",63],"(",["T_CONSTANT_ENCAPSED_STRING","'US'",63],["T_WHITESPACE"," ",63],["T_DOUBLE_ARROW","=>",63],["T_WHITESPACE"," ",63],["T_CONSTANT_ENCAPSED_STRING","'http:\/\/webservices.amazon.com'",63],",",["T_WHITESPACE","\n                                    ",63],["T_CONSTANT_ENCAPSED_STRING","'UK'",64],["T_WHITESPACE"," ",64],["T_DOUBLE_ARROW","=>",64],["T_WHITESPACE"," ",64],["T_CONSTANT_ENCAPSED_STRING","'http:\/\/webservices.amazon.co.uk'",64],",",["T_WHITESPACE","\n                                    ",64],["T_CONSTANT_ENCAPSED_STRING","'DE'",65],["T_WHITESPACE"," ",65],["T_DOUBLE_ARROW","=>",65],["T_WHITESPACE"," ",65],["T_CONSTANT_ENCAPSED_STRING","'http:\/\/webservices.amazon.de'",65],",",["T_WHITESPACE","\n                                    ",65],["T_CONSTANT_ENCAPSED_STRING","'JP'",66],["T_WHITESPACE"," ",66],["T_DOUBLE_ARROW","=>",66],["T_WHITESPACE"," ",66],["T_CONSTANT_ENCAPSED_STRING","'http:\/\/webservices.amazon.co.jp'",66],",",["T_WHITESPACE","\n                                    ",66],["T_CONSTANT_ENCAPSED_STRING","'FR'",67],["T_WHITESPACE"," ",67],["T_DOUBLE_ARROW","=>",67],["T_WHITESPACE"," ",67],["T_CONSTANT_ENCAPSED_STRING","'http:\/\/webservices.amazon.fr'",67],",",["T_WHITESPACE","\n                                    ",67],["T_CONSTANT_ENCAPSED_STRING","'CA'",68],["T_WHITESPACE"," ",68],["T_DOUBLE_ARROW","=>",68],["T_WHITESPACE"," ",68],["T_CONSTANT_ENCAPSED_STRING","'http:\/\/webservices.amazon.ca'",68],")",";",["T_WHITESPACE","\n\n    ",68],["T_DOC_COMMENT","\/**\n     * Reference to REST client object\n     *\n     * @var Zend_Rest_Client\n     *\/",70],["T_WHITESPACE","\n    ",74],["T_PROTECTED","protected",75],["T_WHITESPACE"," ",75],["T_VARIABLE","$_rest",75],["T_WHITESPACE"," ",75],"=",["T_WHITESPACE"," ",75],["T_STRING","null",75],";",["T_WHITESPACE","\n\n\n    ",75],["T_DOC_COMMENT","\/**\n     * Constructs a new Amazon Web Services Client\n     *\n     * @param  string $appId       Developer's Amazon appid\n     * @param  string $countryCode Country code for Amazon service; may be US, UK, DE, JP, FR, CA\n     * @throws Zend_Service_Exception\n     * @return Zend_Service_Amazon\n     *\/",78],["T_WHITESPACE","\n    ",85],["T_PUBLIC","public",86],["T_WHITESPACE"," ",86],["T_FUNCTION","function",86],["T_WHITESPACE"," ",86],["T_STRING","__construct",86],"(",["T_VARIABLE","$appId",86],",",["T_WHITESPACE"," ",86],["T_VARIABLE","$countryCode",86],["T_WHITESPACE"," ",86],"=",["T_WHITESPACE"," ",86],["T_CONSTANT_ENCAPSED_STRING","'US'",86],",",["T_WHITESPACE"," ",86],["T_VARIABLE","$secretKey",86],["T_WHITESPACE"," ",86],"=",["T_WHITESPACE"," ",86],["T_STRING","null",86],")",["T_WHITESPACE","\n    ",86],"{",["T_WHITESPACE","\n        ",87],["T_VARIABLE","$this",88],["T_OBJECT_OPERATOR","->",88],["T_STRING","appId",88],["T_WHITESPACE"," ",88],"=",["T_WHITESPACE"," ",88],["T_STRING_CAST","(string)",88],["T_WHITESPACE"," ",88],["T_VARIABLE","$appId",88],";",["T_WHITESPACE","\n        ",88],["T_VARIABLE","$this",89],["T_OBJECT_OPERATOR","->",89],["T_STRING","_secretKey",89],["T_WHITESPACE"," ",89],"=",["T_WHITESPACE"," ",89],["T_VARIABLE","$secretKey",89],";",["T_WHITESPACE","\n\n        ",89],["T_VARIABLE","$countryCode",91],["T_WHITESPACE"," ",91],"=",["T_WHITESPACE"," ",91],["T_STRING_CAST","(string)",91],["T_WHITESPACE"," ",91],["T_VARIABLE","$countryCode",91],";",["T_WHITESPACE","\n        ",91],["T_IF","if",92],["T_WHITESPACE"," ",92],"(","!",["T_ISSET","isset",92],"(",["T_VARIABLE","$this",92],["T_OBJECT_OPERATOR","->",92],["T_STRING","_baseUriList",92],"[",["T_VARIABLE","$countryCode",92],"]",")",")",["T_WHITESPACE"," ",92],"{",["T_WHITESPACE","\n            ",92],["T_DOC_COMMENT","\/**\n             * @see Zend_Service_Exception\n             *\/",93],["T_WHITESPACE","\n            ",95],["T_COMMENT","#require_once 'Zend\/Service\/Exception.php';\n",96],["T_WHITESPACE","            ",97],["T_THROW","throw",97],["T_WHITESPACE"," ",97],["T_NEW","new",97],["T_WHITESPACE"," ",97],["T_STRING","Zend_Service_Exception",97],"(","\"",["T_ENCAPSED_AND_WHITESPACE","Unknown country code: ",97],["T_VARIABLE","$countryCode",97],"\"",")",";",["T_WHITESPACE","\n        ",97],"}",["T_WHITESPACE","\n\n        ",98],["T_VARIABLE","$this",100],["T_OBJECT_OPERATOR","->",100],["T_STRING","_baseUri",100],["T_WHITESPACE"," ",100],"=",["T_WHITESPACE"," ",100],["T_VARIABLE","$this",100],["T_OBJECT_OPERATOR","->",100],["T_STRING","_baseUriList",100],"[",["T_VARIABLE","$countryCode",100],"]",";",["T_WHITESPACE","\n    ",100],"}",["T_WHITESPACE","\n\n\n    ",101],["T_DOC_COMMENT","\/**\n     * Search for Items\n     *\n     * @param  array $options Options to use for the Search Query\n     * @throws Zend_Service_Exception\n     * @return Zend_Service_Amazon_ResultSet\n     * @see http:\/\/www.amazon.com\/gp\/aws\/sdk\/main.html\/102-9041115-9057709?s=AWSEcommerceService&v=2011-08-01&p=ApiReference\/ItemSearchOperation\n     *\/",104],["T_WHITESPACE","\n    ",111],["T_PUBLIC","public",112],["T_WHITESPACE"," ",112],["T_FUNCTION","function",112],["T_WHITESPACE"," ",112],["T_STRING","itemSearch",112],"(",["T_ARRAY","array",112],["T_WHITESPACE"," ",112],["T_VARIABLE","$options",112],")",["T_WHITESPACE","\n    ",112],"{",["T_WHITESPACE","\n        ",113],["T_VARIABLE","$client",114],["T_WHITESPACE"," ",114],"=",["T_WHITESPACE"," ",114],["T_VARIABLE","$this",114],["T_OBJECT_OPERATOR","->",114],["T_STRING","getRestClient",114],"(",")",";",["T_WHITESPACE","\n        ",114],["T_VARIABLE","$client",115],["T_OBJECT_OPERATOR","->",115],["T_STRING","setUri",115],"(",["T_VARIABLE","$this",115],["T_OBJECT_OPERATOR","->",115],["T_STRING","_baseUri",115],")",";",["T_WHITESPACE","\n\n        ",115],["T_VARIABLE","$defaultOptions",117],["T_WHITESPACE"," ",117],"=",["T_WHITESPACE"," ",117],["T_ARRAY","array",117],"(",["T_CONSTANT_ENCAPSED_STRING","'ResponseGroup'",117],["T_WHITESPACE"," ",117],["T_DOUBLE_ARROW","=>",117],["T_WHITESPACE"," ",117],["T_CONSTANT_ENCAPSED_STRING","'Small'",117],")",";",["T_WHITESPACE","\n        ",117],["T_VARIABLE","$options",118],["T_WHITESPACE"," ",118],"=",["T_WHITESPACE"," ",118],["T_VARIABLE","$this",118],["T_OBJECT_OPERATOR","->",118],["T_STRING","_prepareOptions",118],"(",["T_CONSTANT_ENCAPSED_STRING","'ItemSearch'",118],",",["T_WHITESPACE"," ",118],["T_VARIABLE","$options",118],",",["T_WHITESPACE"," ",118],["T_VARIABLE","$defaultOptions",118],")",";",["T_WHITESPACE","\n        ",118],["T_VARIABLE","$client",119],["T_OBJECT_OPERATOR","->",119],["T_STRING","getHttpClient",119],"(",")",["T_OBJECT_OPERATOR","->",119],["T_STRING","resetParameters",119],"(",")",";",["T_WHITESPACE","\n        ",119],["T_VARIABLE","$response",120],["T_WHITESPACE"," ",120],"=",["T_WHITESPACE"," ",120],["T_VARIABLE","$client",120],["T_OBJECT_OPERATOR","->",120],["T_STRING","restGet",120],"(",["T_CONSTANT_ENCAPSED_STRING","'\/onca\/xml'",120],",",["T_WHITESPACE"," ",120],["T_VARIABLE","$options",120],")",";",["T_WHITESPACE","\n\n        ",120],["T_IF","if",122],["T_WHITESPACE"," ",122],"(",["T_VARIABLE","$response",122],["T_OBJECT_OPERATOR","->",122],["T_STRING","isError",122],"(",")",")",["T_WHITESPACE"," ",122],"{",["T_WHITESPACE","\n            ",122],["T_DOC_COMMENT","\/**\n             * @see Zend_Service_Exception\n             *\/",123],["T_WHITESPACE","\n            ",125],["T_COMMENT","#require_once 'Zend\/Service\/Exception.php';\n",126],["T_WHITESPACE","            ",127],["T_THROW","throw",127],["T_WHITESPACE"," ",127],["T_NEW","new",127],["T_WHITESPACE"," ",127],["T_STRING","Zend_Service_Exception",127],"(",["T_CONSTANT_ENCAPSED_STRING","'An error occurred sending request. Status code: '",127],["T_WHITESPACE","\n                                           ",127],".",["T_WHITESPACE"," ",128],["T_VARIABLE","$response",128],["T_OBJECT_OPERATOR","->",128],["T_STRING","getStatus",128],"(",")",")",";",["T_WHITESPACE","\n        ",128],"}",["T_WHITESPACE","\n\n        ",129],["T_VARIABLE","$dom",131],["T_WHITESPACE"," ",131],"=",["T_WHITESPACE"," ",131],["T_NEW","new",131],["T_WHITESPACE"," ",131],["T_STRING","DOMDocument",131],"(",")",";",["T_WHITESPACE","\n        ",131],["T_VARIABLE","$dom",132],["T_WHITESPACE"," ",132],"=",["T_WHITESPACE"," ",132],["T_STRING","Zend_Xml_Security",132],["T_DOUBLE_COLON","::",132],["T_STRING","scan",132],"(",["T_VARIABLE","$response",132],["T_OBJECT_OPERATOR","->",132],["T_STRING","getBody",132],"(",")",",",["T_WHITESPACE"," ",132],["T_VARIABLE","$dom",132],")",";",["T_WHITESPACE","\n        ",132],["T_STRING","self",133],["T_DOUBLE_COLON","::",133],["T_STRING","_checkErrors",133],"(",["T_VARIABLE","$dom",133],")",";",["T_WHITESPACE","\n\n        ",133],["T_DOC_COMMENT","\/**\n         * @see Zend_Service_Amazon_ResultSet\n         *\/",135],["T_WHITESPACE","\n        ",137],["T_COMMENT","#require_once 'Zend\/Service\/Amazon\/ResultSet.php';\n",138],["T_WHITESPACE","        ",139],["T_RETURN","return",139],["T_WHITESPACE"," ",139],["T_NEW","new",139],["T_WHITESPACE"," ",139],["T_STRING","Zend_Service_Amazon_ResultSet",139],"(",["T_VARIABLE","$dom",139],")",";",["T_WHITESPACE","\n    ",139],"}",["T_WHITESPACE","\n\n\n    ",140],["T_DOC_COMMENT","\/**\n     * Look up item(s) by ASIN\n     *\n     * @param  string $asin    Amazon ASIN ID\n     * @param  array  $options Query Options\n     * @see http:\/\/www.amazon.com\/gp\/aws\/sdk\/main.html\/102-9041115-9057709?s=AWSEcommerceService&v=2011-08-01&p=ApiReference\/ItemLookupOperation\n     * @throws Zend_Service_Exception\n     * @return Zend_Service_Amazon_Item|Zend_Service_Amazon_ResultSet\n     *\/",143],["T_WHITESPACE","\n    ",151],["T_PUBLIC","public",152],["T_WHITESPACE"," ",152],["T_FUNCTION","function",152],["T_WHITESPACE"," ",152],["T_STRING","itemLookup",152],"(",["T_VARIABLE","$asin",152],",",["T_WHITESPACE"," ",152],["T_ARRAY","array",152],["T_WHITESPACE"," ",152],["T_VARIABLE","$options",152],["T_WHITESPACE"," ",152],"=",["T_WHITESPACE"," ",152],["T_ARRAY","array",152],"(",")",")",["T_WHITESPACE","\n    ",152],"{",["T_WHITESPACE","\n        ",153],["T_VARIABLE","$client",154],["T_WHITESPACE"," ",154],"=",["T_WHITESPACE"," ",154],["T_VARIABLE","$this",154],["T_OBJECT_OPERATOR","->",154],["T_STRING","getRestClient",154],"(",")",";",["T_WHITESPACE","\n        ",154],["T_VARIABLE","$client",155],["T_OBJECT_OPERATOR","->",155],["T_STRING","setUri",155],"(",["T_VARIABLE","$this",155],["T_OBJECT_OPERATOR","->",155],["T_STRING","_baseUri",155],")",";",["T_WHITESPACE","\n        ",155],["T_VARIABLE","$client",156],["T_OBJECT_OPERATOR","->",156],["T_STRING","getHttpClient",156],"(",")",["T_OBJECT_OPERATOR","->",156],["T_STRING","resetParameters",156],"(",")",";",["T_WHITESPACE","\n\n        ",156],["T_VARIABLE","$defaultOptions",158],["T_WHITESPACE"," ",158],"=",["T_WHITESPACE"," ",158],["T_ARRAY","array",158],"(",["T_CONSTANT_ENCAPSED_STRING","'ResponseGroup'",158],["T_WHITESPACE"," ",158],["T_DOUBLE_ARROW","=>",158],["T_WHITESPACE"," ",158],["T_CONSTANT_ENCAPSED_STRING","'Small'",158],")",";",["T_WHITESPACE","\n        ",158],["T_VARIABLE","$options",159],"[",["T_CONSTANT_ENCAPSED_STRING","'ItemId'",159],"]",["T_WHITESPACE"," ",159],"=",["T_WHITESPACE"," ",159],["T_STRING_CAST","(string)",159],["T_WHITESPACE"," ",159],["T_VARIABLE","$asin",159],";",["T_WHITESPACE","\n        ",159],["T_VARIABLE","$options",160],["T_WHITESPACE"," ",160],"=",["T_WHITESPACE"," ",160],["T_VARIABLE","$this",160],["T_OBJECT_OPERATOR","->",160],["T_STRING","_prepareOptions",160],"(",["T_CONSTANT_ENCAPSED_STRING","'ItemLookup'",160],",",["T_WHITESPACE"," ",160],["T_VARIABLE","$options",160],",",["T_WHITESPACE"," ",160],["T_VARIABLE","$defaultOptions",160],")",";",["T_WHITESPACE","\n        ",160],["T_VARIABLE","$response",161],["T_WHITESPACE"," ",161],"=",["T_WHITESPACE"," ",161],["T_VARIABLE","$client",161],["T_OBJECT_OPERATOR","->",161],["T_STRING","restGet",161],"(",["T_CONSTANT_ENCAPSED_STRING","'\/onca\/xml'",161],",",["T_WHITESPACE"," ",161],["T_VARIABLE","$options",161],")",";",["T_WHITESPACE","\n\n        ",161],["T_IF","if",163],["T_WHITESPACE"," ",163],"(",["T_VARIABLE","$response",163],["T_OBJECT_OPERATOR","->",163],["T_STRING","isError",163],"(",")",")",["T_WHITESPACE"," ",163],"{",["T_WHITESPACE","\n            ",163],["T_DOC_COMMENT","\/**\n             * @see Zend_Service_Exception\n             *\/",164],["T_WHITESPACE","\n            ",166],["T_COMMENT","#require_once 'Zend\/Service\/Exception.php';\n",167],["T_WHITESPACE","            ",168],["T_THROW","throw",168],["T_WHITESPACE"," ",168],["T_NEW","new",168],["T_WHITESPACE"," ",168],["T_STRING","Zend_Service_Exception",168],"(",["T_WHITESPACE","\n                ",168],["T_CONSTANT_ENCAPSED_STRING","'An error occurred sending request. Status code: '",169],["T_WHITESPACE"," ",169],".",["T_WHITESPACE"," ",169],["T_VARIABLE","$response",169],["T_OBJECT_OPERATOR","->",169],["T_STRING","getStatus",169],"(",")",["T_WHITESPACE","\n            ",169],")",";",["T_WHITESPACE","\n        ",170],"}",["T_WHITESPACE","\n\n        ",171],["T_VARIABLE","$dom",173],["T_WHITESPACE"," ",173],"=",["T_WHITESPACE"," ",173],["T_NEW","new",173],["T_WHITESPACE"," ",173],["T_STRING","DOMDocument",173],"(",")",";",["T_WHITESPACE","\n        ",173],["T_VARIABLE","$dom",174],["T_WHITESPACE"," ",174],"=",["T_WHITESPACE"," ",174],["T_STRING","Zend_Xml_Security",174],["T_DOUBLE_COLON","::",174],["T_STRING","scan",174],"(",["T_VARIABLE","$response",174],["T_OBJECT_OPERATOR","->",174],["T_STRING","getBody",174],"(",")",",",["T_WHITESPACE"," ",174],["T_VARIABLE","$dom",174],")",";",["T_WHITESPACE","\n        ",174],["T_STRING","self",175],["T_DOUBLE_COLON","::",175],["T_STRING","_checkErrors",175],"(",["T_VARIABLE","$dom",175],")",";",["T_WHITESPACE","\n        ",175],["T_VARIABLE","$xpath",176],["T_WHITESPACE"," ",176],"=",["T_WHITESPACE"," ",176],["T_NEW","new",176],["T_WHITESPACE"," ",176],["T_STRING","DOMXPath",176],"(",["T_VARIABLE","$dom",176],")",";",["T_WHITESPACE","\n        ",176],["T_VARIABLE","$xpath",177],["T_OBJECT_OPERATOR","->",177],["T_STRING","registerNamespace",177],"(",["T_CONSTANT_ENCAPSED_STRING","'az'",177],",",["T_WHITESPACE"," ",177],["T_CONSTANT_ENCAPSED_STRING","'http:\/\/webservices.amazon.com\/AWSECommerceService\/2011-08-01'",177],")",";",["T_WHITESPACE","\n        ",177],["T_VARIABLE","$items",178],["T_WHITESPACE"," ",178],"=",["T_WHITESPACE"," ",178],["T_VARIABLE","$xpath",178],["T_OBJECT_OPERATOR","->",178],["T_STRING","query",178],"(",["T_CONSTANT_ENCAPSED_STRING","'\/\/az:Items\/az:Item'",178],")",";",["T_WHITESPACE","\n\n        ",178],["T_IF","if",180],["T_WHITESPACE"," ",180],"(",["T_VARIABLE","$items",180],["T_OBJECT_OPERATOR","->",180],["T_STRING","length",180],["T_WHITESPACE"," ",180],["T_IS_EQUAL","==",180],["T_WHITESPACE"," ",180],["T_LNUMBER","1",180],")",["T_WHITESPACE"," ",180],"{",["T_WHITESPACE","\n            ",180],["T_DOC_COMMENT","\/**\n             * @see Zend_Service_Amazon_Item\n             *\/",181],["T_WHITESPACE","\n            ",183],["T_COMMENT","#require_once 'Zend\/Service\/Amazon\/Item.php';\n",184],["T_WHITESPACE","            ",185],["T_RETURN","return",185],["T_WHITESPACE"," ",185],["T_NEW","new",185],["T_WHITESPACE"," ",185],["T_STRING","Zend_Service_Amazon_Item",185],"(",["T_VARIABLE","$items",185],["T_OBJECT_OPERATOR","->",185],["T_STRING","item",185],"(",["T_LNUMBER","0",185],")",")",";",["T_WHITESPACE","\n        ",185],"}",["T_WHITESPACE","\n\n        ",186],["T_DOC_COMMENT","\/**\n         * @see Zend_Service_Amazon_ResultSet\n         *\/",188],["T_WHITESPACE","\n        ",190],["T_COMMENT","#require_once 'Zend\/Service\/Amazon\/ResultSet.php';\n",191],["T_WHITESPACE","        ",192],["T_RETURN","return",192],["T_WHITESPACE"," ",192],["T_NEW","new",192],["T_WHITESPACE"," ",192],["T_STRING","Zend_Service_Amazon_ResultSet",192],"(",["T_VARIABLE","$dom",192],")",";",["T_WHITESPACE","\n    ",192],"}",["T_WHITESPACE","\n\n\n    ",193],["T_DOC_COMMENT","\/**\n     * Returns a reference to the REST client\n     *\n     * @return Zend_Rest_Client\n     *\/",196],["T_WHITESPACE","\n    ",200],["T_PUBLIC","public",201],["T_WHITESPACE"," ",201],["T_FUNCTION","function",201],["T_WHITESPACE"," ",201],["T_STRING","getRestClient",201],"(",")",["T_WHITESPACE","\n    ",201],"{",["T_WHITESPACE","\n        ",202],["T_IF","if",203],"(",["T_VARIABLE","$this",203],["T_OBJECT_OPERATOR","->",203],["T_STRING","_rest",203],["T_WHITESPACE"," ",203],["T_IS_IDENTICAL","===",203],["T_WHITESPACE"," ",203],["T_STRING","null",203],")",["T_WHITESPACE"," ",203],"{",["T_WHITESPACE","\n            ",203],["T_VARIABLE","$this",204],["T_OBJECT_OPERATOR","->",204],["T_STRING","_rest",204],["T_WHITESPACE"," ",204],"=",["T_WHITESPACE"," ",204],["T_NEW","new",204],["T_WHITESPACE"," ",204],["T_STRING","Zend_Rest_Client",204],"(",")",";",["T_WHITESPACE","\n        ",204],"}",["T_WHITESPACE","\n        ",205],["T_RETURN","return",206],["T_WHITESPACE"," ",206],["T_VARIABLE","$this",206],["T_OBJECT_OPERATOR","->",206],["T_STRING","_rest",206],";",["T_WHITESPACE","\n    ",206],"}",["T_WHITESPACE","\n\n    ",207],["T_DOC_COMMENT","\/**\n     * Set REST client\n     *\n     * @param Zend_Rest_Client\n     * @return Zend_Service_Amazon\n     *\/",209],["T_WHITESPACE","\n    ",214],["T_PUBLIC","public",215],["T_WHITESPACE"," ",215],["T_FUNCTION","function",215],["T_WHITESPACE"," ",215],["T_STRING","setRestClient",215],"(",["T_STRING","Zend_Rest_Client",215],["T_WHITESPACE"," ",215],["T_VARIABLE","$client",215],")",["T_WHITESPACE","\n    ",215],"{",["T_WHITESPACE","\n        ",216],["T_VARIABLE","$this",217],["T_OBJECT_OPERATOR","->",217],["T_STRING","_rest",217],["T_WHITESPACE"," ",217],"=",["T_WHITESPACE"," ",217],["T_VARIABLE","$client",217],";",["T_WHITESPACE","\n        ",217],["T_RETURN","return",218],["T_WHITESPACE"," ",218],["T_VARIABLE","$this",218],";",["T_WHITESPACE","\n    ",218],"}",["T_WHITESPACE","\n\n\n    ",219],["T_DOC_COMMENT","\/**\n     * Prepare options for request\n     *\n     * @param  string $query          Action to perform\n     * @param  array  $options        User supplied options\n     * @param  array  $defaultOptions Default options\n     * @return array\n     *\/",222],["T_WHITESPACE","\n    ",229],["T_PROTECTED","protected",230],["T_WHITESPACE"," ",230],["T_FUNCTION","function",230],["T_WHITESPACE"," ",230],["T_STRING","_prepareOptions",230],"(",["T_VARIABLE","$query",230],",",["T_WHITESPACE"," ",230],["T_ARRAY","array",230],["T_WHITESPACE"," ",230],["T_VARIABLE","$options",230],",",["T_WHITESPACE"," ",230],["T_ARRAY","array",230],["T_WHITESPACE"," ",230],["T_VARIABLE","$defaultOptions",230],")",["T_WHITESPACE","\n    ",230],"{",["T_WHITESPACE","\n        ",231],["T_VARIABLE","$options",232],"[",["T_CONSTANT_ENCAPSED_STRING","'AWSAccessKeyId'",232],"]",["T_WHITESPACE"," ",232],"=",["T_WHITESPACE"," ",232],["T_VARIABLE","$this",232],["T_OBJECT_OPERATOR","->",232],["T_STRING","appId",232],";",["T_WHITESPACE","\n        ",232],["T_VARIABLE","$options",233],"[",["T_CONSTANT_ENCAPSED_STRING","'Service'",233],"]",["T_WHITESPACE","        ",233],"=",["T_WHITESPACE"," ",233],["T_CONSTANT_ENCAPSED_STRING","'AWSECommerceService'",233],";",["T_WHITESPACE","\n        ",233],["T_VARIABLE","$options",234],"[",["T_CONSTANT_ENCAPSED_STRING","'Operation'",234],"]",["T_WHITESPACE","      ",234],"=",["T_WHITESPACE"," ",234],["T_STRING_CAST","(string)",234],["T_WHITESPACE"," ",234],["T_VARIABLE","$query",234],";",["T_WHITESPACE","\n        ",234],["T_VARIABLE","$options",235],"[",["T_CONSTANT_ENCAPSED_STRING","'Version'",235],"]",["T_WHITESPACE","        ",235],"=",["T_WHITESPACE"," ",235],["T_CONSTANT_ENCAPSED_STRING","'2011-08-01'",235],";",["T_WHITESPACE","\n\n        ",235],["T_COMMENT","\/\/ de-canonicalize out sort key\n",237],["T_WHITESPACE","        ",238],["T_IF","if",238],["T_WHITESPACE"," ",238],"(",["T_ISSET","isset",238],"(",["T_VARIABLE","$options",238],"[",["T_CONSTANT_ENCAPSED_STRING","'ResponseGroup'",238],"]",")",")",["T_WHITESPACE"," ",238],"{",["T_WHITESPACE","\n            ",238],["T_VARIABLE","$responseGroup",239],["T_WHITESPACE"," ",239],"=",["T_WHITESPACE"," ",239],["T_STRING","explode",239],"(",["T_CONSTANT_ENCAPSED_STRING","','",239],",",["T_WHITESPACE"," ",239],["T_VARIABLE","$options",239],"[",["T_CONSTANT_ENCAPSED_STRING","'ResponseGroup'",239],"]",")",";",["T_WHITESPACE","\n\n            ",239],["T_IF","if",241],["T_WHITESPACE"," ",241],"(","!",["T_STRING","in_array",241],"(",["T_CONSTANT_ENCAPSED_STRING","'Request'",241],",",["T_WHITESPACE"," ",241],["T_VARIABLE","$responseGroup",241],")",")",["T_WHITESPACE"," ",241],"{",["T_WHITESPACE","\n                ",241],["T_VARIABLE","$responseGroup",242],"[","]",["T_WHITESPACE"," ",242],"=",["T_WHITESPACE"," ",242],["T_CONSTANT_ENCAPSED_STRING","'Request'",242],";",["T_WHITESPACE","\n                ",242],["T_VARIABLE","$options",243],"[",["T_CONSTANT_ENCAPSED_STRING","'ResponseGroup'",243],"]",["T_WHITESPACE"," ",243],"=",["T_WHITESPACE"," ",243],["T_STRING","implode",243],"(",["T_CONSTANT_ENCAPSED_STRING","','",243],",",["T_WHITESPACE"," ",243],["T_VARIABLE","$responseGroup",243],")",";",["T_WHITESPACE","\n            ",243],"}",["T_WHITESPACE","\n        ",244],"}",["T_WHITESPACE","\n\n        ",245],["T_VARIABLE","$options",247],["T_WHITESPACE"," ",247],"=",["T_WHITESPACE"," ",247],["T_STRING","array_merge",247],"(",["T_VARIABLE","$defaultOptions",247],",",["T_WHITESPACE"," ",247],["T_VARIABLE","$options",247],")",";",["T_WHITESPACE","\n\n        ",247],["T_IF","if",249],"(",["T_VARIABLE","$this",249],["T_OBJECT_OPERATOR","->",249],["T_STRING","_secretKey",249],["T_WHITESPACE"," ",249],["T_IS_NOT_IDENTICAL","!==",249],["T_WHITESPACE"," ",249],["T_STRING","null",249],")",["T_WHITESPACE"," ",249],"{",["T_WHITESPACE","\n            ",249],["T_VARIABLE","$options",250],"[",["T_CONSTANT_ENCAPSED_STRING","'Timestamp'",250],"]",["T_WHITESPACE"," ",250],"=",["T_WHITESPACE"," ",250],["T_STRING","gmdate",250],"(",["T_CONSTANT_ENCAPSED_STRING","\"Y-m-d\\TH:i:s\\Z\"",250],")",";",";",["T_WHITESPACE","\n            ",250],["T_STRING","ksort",251],"(",["T_VARIABLE","$options",251],")",";",["T_WHITESPACE","\n            ",251],["T_VARIABLE","$options",252],"[",["T_CONSTANT_ENCAPSED_STRING","'Signature'",252],"]",["T_WHITESPACE"," ",252],"=",["T_WHITESPACE"," ",252],["T_STRING","self",252],["T_DOUBLE_COLON","::",252],["T_STRING","computeSignature",252],"(",["T_VARIABLE","$this",252],["T_OBJECT_OPERATOR","->",252],["T_STRING","_baseUri",252],",",["T_WHITESPACE"," ",252],["T_VARIABLE","$this",252],["T_OBJECT_OPERATOR","->",252],["T_STRING","_secretKey",252],",",["T_WHITESPACE"," ",252],["T_VARIABLE","$options",252],")",";",["T_WHITESPACE","\n        ",252],"}",["T_WHITESPACE","\n\n        ",253],["T_RETURN","return",255],["T_WHITESPACE"," ",255],["T_VARIABLE","$options",255],";",["T_WHITESPACE","\n    ",255],"}",["T_WHITESPACE","\n\n    ",256],["T_DOC_COMMENT","\/**\n     * Compute Signature for Authentication with Amazon Product Advertising Webservices\n     *\n     * @param  string $baseUri\n     * @param  string $secretKey\n     * @param  array $options\n     * @return string\n     *\/",258],["T_WHITESPACE","\n    ",265],["T_STATIC","static",266],["T_WHITESPACE"," ",266],["T_PUBLIC","public",266],["T_WHITESPACE"," ",266],["T_FUNCTION","function",266],["T_WHITESPACE"," ",266],["T_STRING","computeSignature",266],"(",["T_VARIABLE","$baseUri",266],",",["T_WHITESPACE"," ",266],["T_VARIABLE","$secretKey",266],",",["T_WHITESPACE"," ",266],["T_ARRAY","array",266],["T_WHITESPACE"," ",266],["T_VARIABLE","$options",266],")",["T_WHITESPACE","\n    ",266],"{",["T_WHITESPACE","\n        ",267],["T_COMMENT","#require_once \"Zend\/Crypt\/Hmac.php\";\n",268],["T_WHITESPACE","\n        ",269],["T_VARIABLE","$signature",270],["T_WHITESPACE"," ",270],"=",["T_WHITESPACE"," ",270],["T_STRING","self",270],["T_DOUBLE_COLON","::",270],["T_STRING","buildRawSignature",270],"(",["T_VARIABLE","$baseUri",270],",",["T_WHITESPACE"," ",270],["T_VARIABLE","$options",270],")",";",["T_WHITESPACE","\n        ",270],["T_RETURN","return",271],["T_WHITESPACE"," ",271],["T_STRING","base64_encode",271],"(",["T_WHITESPACE","\n            ",271],["T_STRING","Zend_Crypt_Hmac",272],["T_DOUBLE_COLON","::",272],["T_STRING","compute",272],"(",["T_VARIABLE","$secretKey",272],",",["T_WHITESPACE"," ",272],["T_CONSTANT_ENCAPSED_STRING","'sha256'",272],",",["T_WHITESPACE"," ",272],["T_VARIABLE","$signature",272],",",["T_WHITESPACE"," ",272],["T_STRING","Zend_Crypt_Hmac",272],["T_DOUBLE_COLON","::",272],["T_STRING","BINARY",272],")",["T_WHITESPACE","\n        ",272],")",";",["T_WHITESPACE","\n    ",273],"}",["T_WHITESPACE","\n\n    ",274],["T_DOC_COMMENT","\/**\n     * Build the Raw Signature Text\n     *\n     * @param  string $baseUri\n     * @param  array $options\n     * @return string\n     *\/",276],["T_WHITESPACE","\n    ",282],["T_STATIC","static",283],["T_WHITESPACE"," ",283],["T_PUBLIC","public",283],["T_WHITESPACE"," ",283],["T_FUNCTION","function",283],["T_WHITESPACE"," ",283],["T_STRING","buildRawSignature",283],"(",["T_VARIABLE","$baseUri",283],",",["T_WHITESPACE"," ",283],["T_VARIABLE","$options",283],")",["T_WHITESPACE","\n    ",283],"{",["T_WHITESPACE","\n        ",284],["T_STRING","ksort",285],"(",["T_VARIABLE","$options",285],")",";",["T_WHITESPACE","\n        ",285],["T_VARIABLE","$params",286],["T_WHITESPACE"," ",286],"=",["T_WHITESPACE"," ",286],["T_ARRAY","array",286],"(",")",";",["T_WHITESPACE","\n        ",286],["T_FOREACH","foreach",287],"(",["T_VARIABLE","$options",287],["T_WHITESPACE"," ",287],["T_AS","AS",287],["T_WHITESPACE"," ",287],["T_VARIABLE","$k",287],["T_WHITESPACE"," ",287],["T_DOUBLE_ARROW","=>",287],["T_WHITESPACE"," ",287],["T_VARIABLE","$v",287],")",["T_WHITESPACE"," ",287],"{",["T_WHITESPACE","\n            ",287],["T_VARIABLE","$params",288],"[","]",["T_WHITESPACE"," ",288],"=",["T_WHITESPACE"," ",288],["T_VARIABLE","$k",288],".",["T_CONSTANT_ENCAPSED_STRING","\"=\"",288],".",["T_STRING","rawurlencode",288],"(",["T_VARIABLE","$v",288],")",";",["T_WHITESPACE","\n        ",288],"}",["T_WHITESPACE","\n\n        ",289],["T_RETURN","return",291],["T_WHITESPACE"," ",291],["T_STRING","sprintf",291],"(",["T_CONSTANT_ENCAPSED_STRING","\"GET\\n%s\\n\/onca\/xml\\n%s\"",291],",",["T_WHITESPACE","\n            ",291],["T_STRING","str_replace",292],"(",["T_CONSTANT_ENCAPSED_STRING","'http:\/\/'",292],",",["T_WHITESPACE"," ",292],["T_CONSTANT_ENCAPSED_STRING","''",292],",",["T_WHITESPACE"," ",292],["T_VARIABLE","$baseUri",292],")",",",["T_WHITESPACE","\n            ",292],["T_STRING","implode",293],"(",["T_CONSTANT_ENCAPSED_STRING","\"&\"",293],",",["T_WHITESPACE"," ",293],["T_VARIABLE","$params",293],")",["T_WHITESPACE","\n        ",293],")",";",["T_WHITESPACE","\n    ",294],"}",["T_WHITESPACE","\n\n\n    ",295],["T_DOC_COMMENT","\/**\n     * Check result for errors\n     *\n     * @param  DOMDocument $dom\n     * @throws Zend_Service_Exception\n     * @return void\n     *\/",298],["T_WHITESPACE","\n    ",304],["T_PROTECTED","protected",305],["T_WHITESPACE"," ",305],["T_STATIC","static",305],["T_WHITESPACE"," ",305],["T_FUNCTION","function",305],["T_WHITESPACE"," ",305],["T_STRING","_checkErrors",305],"(",["T_STRING","DOMDocument",305],["T_WHITESPACE"," ",305],["T_VARIABLE","$dom",305],")",["T_WHITESPACE","\n    ",305],"{",["T_WHITESPACE","\n        ",306],["T_VARIABLE","$xpath",307],["T_WHITESPACE"," ",307],"=",["T_WHITESPACE"," ",307],["T_NEW","new",307],["T_WHITESPACE"," ",307],["T_STRING","DOMXPath",307],"(",["T_VARIABLE","$dom",307],")",";",["T_WHITESPACE","\n        ",307],["T_VARIABLE","$xpath",308],["T_OBJECT_OPERATOR","->",308],["T_STRING","registerNamespace",308],"(",["T_CONSTANT_ENCAPSED_STRING","'az'",308],",",["T_WHITESPACE"," ",308],["T_CONSTANT_ENCAPSED_STRING","'http:\/\/webservices.amazon.com\/AWSECommerceService\/2011-08-01'",308],")",";",["T_WHITESPACE","\n\n        ",308],["T_IF","if",310],["T_WHITESPACE"," ",310],"(",["T_VARIABLE","$xpath",310],["T_OBJECT_OPERATOR","->",310],["T_STRING","query",310],"(",["T_CONSTANT_ENCAPSED_STRING","'\/\/az:Error'",310],")",["T_OBJECT_OPERATOR","->",310],["T_STRING","length",310],["T_WHITESPACE"," ",310],["T_IS_GREATER_OR_EQUAL",">=",310],["T_WHITESPACE"," ",310],["T_LNUMBER","1",310],")",["T_WHITESPACE"," ",310],"{",["T_WHITESPACE","\n            ",310],["T_VARIABLE","$code",311],["T_WHITESPACE"," ",311],"=",["T_WHITESPACE"," ",311],["T_VARIABLE","$xpath",311],["T_OBJECT_OPERATOR","->",311],["T_STRING","query",311],"(",["T_CONSTANT_ENCAPSED_STRING","'\/\/az:Error\/az:Code\/text()'",311],")",["T_OBJECT_OPERATOR","->",311],["T_STRING","item",311],"(",["T_LNUMBER","0",311],")",["T_OBJECT_OPERATOR","->",311],["T_STRING","data",311],";",["T_WHITESPACE","\n            ",311],["T_VARIABLE","$message",312],["T_WHITESPACE"," ",312],"=",["T_WHITESPACE"," ",312],["T_VARIABLE","$xpath",312],["T_OBJECT_OPERATOR","->",312],["T_STRING","query",312],"(",["T_CONSTANT_ENCAPSED_STRING","'\/\/az:Error\/az:Message\/text()'",312],")",["T_OBJECT_OPERATOR","->",312],["T_STRING","item",312],"(",["T_LNUMBER","0",312],")",["T_OBJECT_OPERATOR","->",312],["T_STRING","data",312],";",["T_WHITESPACE","\n\n            ",312],["T_SWITCH","switch",314],"(",["T_VARIABLE","$code",314],")",["T_WHITESPACE"," ",314],"{",["T_WHITESPACE","\n                ",314],["T_CASE","case",315],["T_WHITESPACE"," ",315],["T_CONSTANT_ENCAPSED_STRING","'AWS.ECommerceService.NoExactMatches'",315],":",["T_WHITESPACE","\n                    ",315],["T_BREAK","break",316],";",["T_WHITESPACE","\n                ",316],["T_DEFAULT","default",317],":",["T_WHITESPACE","\n                    ",317],["T_DOC_COMMENT","\/**\n                     * @see Zend_Service_Exception\n                     *\/",318],["T_WHITESPACE","\n                    ",320],["T_COMMENT","#require_once 'Zend\/Service\/Exception.php';\n",321],["T_WHITESPACE","                    ",322],["T_THROW","throw",322],["T_WHITESPACE"," ",322],["T_NEW","new",322],["T_WHITESPACE"," ",322],["T_STRING","Zend_Service_Exception",322],"(","\"",["T_VARIABLE","$message",322],["T_ENCAPSED_AND_WHITESPACE"," (",322],["T_VARIABLE","$code",322],["T_ENCAPSED_AND_WHITESPACE",")",322],"\"",")",";",["T_WHITESPACE","\n            ",322],"}",["T_WHITESPACE","\n        ",323],"}",["T_WHITESPACE","\n    ",324],"}",["T_WHITESPACE","\n",325],"}",["T_WHITESPACE","\n",326]]
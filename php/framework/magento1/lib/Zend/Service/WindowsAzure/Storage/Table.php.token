[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Zend Framework\n *\n * LICENSE\n *\n * This source file is subject to the new BSD license that is bundled\n * with this package in the file LICENSE.txt.\n * It is also available through the world-wide-web at this URL:\n * http:\/\/framework.zend.com\/license\/new-bsd\n * If you did not receive a copy of the license and are unable to\n * obtain it through the world-wide-web, please send an email\n * to license@zend.com so we can send you a copy immediately.\n *\n * @category   Zend\n * @package    Zend_Service_WindowsAzure\n * @subpackage Storage\n * @copyright  Copyright (c) 2005-2015 Zend Technologies USA Inc. (http:\/\/www.zend.com)\n * @license    http:\/\/framework.zend.com\/license\/new-bsd     New BSD License\n * @version    $Id$\n *\/",2],["T_WHITESPACE","\n\n",21],["T_DOC_COMMENT","\/**\n * @see Zend_Service_WindowsAzure_Storage_BatchStorageAbstract\n *\/",23],["T_WHITESPACE","\n",25],["T_COMMENT","#require_once 'Zend\/Service\/WindowsAzure\/Storage\/BatchStorageAbstract.php';\n",26],["T_WHITESPACE","\n",27],["T_DOC_COMMENT","\/**\n * @see Zend_Service_WindowsAzure_Storage_TableInstance\n *\/",28],["T_WHITESPACE","\n",30],["T_COMMENT","#require_once 'Zend\/Service\/WindowsAzure\/Storage\/TableInstance.php';\n",31],["T_WHITESPACE","\n",32],["T_DOC_COMMENT","\/**\n * @see Zend_Service_WindowsAzure_Storage_TableEntityQuery\n *\/",33],["T_WHITESPACE","\n",35],["T_COMMENT","#require_once 'Zend\/Service\/WindowsAzure\/Storage\/TableEntityQuery.php';\n",36],["T_WHITESPACE","\n",37],["T_DOC_COMMENT","\/**\n * @see Zend_Service_WindowsAzure_Storage_DynamicTableEntity\n *\/",38],["T_WHITESPACE","\n",40],["T_COMMENT","#require_once 'Zend\/Service\/WindowsAzure\/Storage\/DynamicTableEntity.php';\n",41],["T_WHITESPACE","\n",42],["T_DOC_COMMENT","\/**\n * @see Zend_Service_WindowsAzure_Credentials_SharedKeyLite \n *\/",43],["T_WHITESPACE","\n",45],["T_COMMENT","#require_once 'Zend\/Service\/WindowsAzure\/Credentials\/SharedKeyLite.php';\n",46],["T_WHITESPACE","\n",47],["T_DOC_COMMENT","\/**\n * @category   Zend\n * @package    Zend_Service_WindowsAzure\n * @subpackage Storage\n * @copyright  Copyright (c) 2005-2015 Zend Technologies USA Inc. (http:\/\/www.zend.com)\n * @license    http:\/\/framework.zend.com\/license\/new-bsd     New BSD License\n *\/",48],["T_WHITESPACE","\n",54],["T_CLASS","class",55],["T_WHITESPACE"," ",55],["T_STRING","Zend_Service_WindowsAzure_Storage_Table",55],["T_WHITESPACE","\n    ",55],["T_EXTENDS","extends",56],["T_WHITESPACE"," ",56],["T_STRING","Zend_Service_WindowsAzure_Storage_BatchStorageAbstract",56],["T_WHITESPACE","\n",56],"{",["T_WHITESPACE","\n\t",57],["T_DOC_COMMENT","\/**\n\t * Throw Zend_Service_WindowsAzure_Exception when a property is not specified in Windows Azure?\n\t * Defaults to true, making behaviour similar to Windows Azure StorageClient in .NET.\n\t * \n\t * @var boolean\n\t *\/",58],["T_WHITESPACE","\n\t",63],["T_PROTECTED","protected",64],["T_WHITESPACE"," ",64],["T_VARIABLE","$_throwExceptionOnMissingData",64],["T_WHITESPACE"," ",64],"=",["T_WHITESPACE"," ",64],["T_STRING","true",64],";",["T_WHITESPACE","\n\t\n\t",64],["T_DOC_COMMENT","\/**\n\t * Throw Zend_Service_WindowsAzure_Exception when a property is not specified in Windows Azure?\n\t * Defaults to true, making behaviour similar to Windows Azure StorageClient in .NET.\n\t * \n\t * @param boolean $value\n\t *\/",66],["T_WHITESPACE","\n\t",71],["T_PUBLIC","public",72],["T_WHITESPACE"," ",72],["T_FUNCTION","function",72],["T_WHITESPACE"," ",72],["T_STRING","setThrowExceptionOnMissingData",72],"(",["T_VARIABLE","$value",72],["T_WHITESPACE"," ",72],"=",["T_WHITESPACE"," ",72],["T_STRING","true",72],")",["T_WHITESPACE","\n\t",72],"{",["T_WHITESPACE","\n\t\t",73],["T_VARIABLE","$this",74],["T_OBJECT_OPERATOR","->",74],["T_STRING","_throwExceptionOnMissingData",74],["T_WHITESPACE"," ",74],"=",["T_WHITESPACE"," ",74],["T_VARIABLE","$value",74],";",["T_WHITESPACE","\n\t",74],"}",["T_WHITESPACE","\n\t\n\t",75],["T_DOC_COMMENT","\/**\n\t * Throw Zend_Service_WindowsAzure_Exception when a property is not specified in Windows Azure?\n\t *\/",77],["T_WHITESPACE","\n\t",79],["T_PUBLIC","public",80],["T_WHITESPACE"," ",80],["T_FUNCTION","function",80],["T_WHITESPACE"," ",80],["T_STRING","getThrowExceptionOnMissingData",80],"(",")",["T_WHITESPACE","\n\t",80],"{",["T_WHITESPACE","\n\t\t",81],["T_RETURN","return",82],["T_WHITESPACE"," ",82],["T_VARIABLE","$this",82],["T_OBJECT_OPERATOR","->",82],["T_STRING","_throwExceptionOnMissingData",82],";",["T_WHITESPACE","\n\t",82],"}",["T_WHITESPACE","\n\t\n\t",83],["T_DOC_COMMENT","\/**\n\t * Creates a new Zend_Service_WindowsAzure_Storage_Table instance\n\t *\n\t * @param string $host Storage host name\n\t * @param string $accountName Account name for Windows Azure\n\t * @param string $accountKey Account key for Windows Azure\n\t * @param boolean $usePathStyleUri Use path-style URI's\n\t * @param Zend_Service_WindowsAzure_RetryPolicy_RetryPolicyAbstract $retryPolicy Retry policy to use when making requests\n\t *\/",85],["T_WHITESPACE","\n\t",93],["T_PUBLIC","public",94],["T_WHITESPACE"," ",94],["T_FUNCTION","function",94],["T_WHITESPACE"," ",94],["T_STRING","__construct",94],"(",["T_VARIABLE","$host",94],["T_WHITESPACE"," ",94],"=",["T_WHITESPACE"," ",94],["T_STRING","Zend_Service_WindowsAzure_Storage",94],["T_DOUBLE_COLON","::",94],["T_STRING","URL_DEV_TABLE",94],",",["T_WHITESPACE"," ",94],["T_VARIABLE","$accountName",94],["T_WHITESPACE"," ",94],"=",["T_WHITESPACE"," ",94],["T_STRING","Zend_Service_WindowsAzure_Credentials_CredentialsAbstract",94],["T_DOUBLE_COLON","::",94],["T_STRING","DEVSTORE_ACCOUNT",94],",",["T_WHITESPACE"," ",94],["T_VARIABLE","$accountKey",94],["T_WHITESPACE"," ",94],"=",["T_WHITESPACE"," ",94],["T_STRING","Zend_Service_WindowsAzure_Credentials_CredentialsAbstract",94],["T_DOUBLE_COLON","::",94],["T_STRING","DEVSTORE_KEY",94],",",["T_WHITESPACE"," ",94],["T_VARIABLE","$usePathStyleUri",94],["T_WHITESPACE"," ",94],"=",["T_WHITESPACE"," ",94],["T_STRING","false",94],",",["T_WHITESPACE"," ",94],["T_STRING","Zend_Service_WindowsAzure_RetryPolicy_RetryPolicyAbstract",94],["T_WHITESPACE"," ",94],["T_VARIABLE","$retryPolicy",94],["T_WHITESPACE"," ",94],"=",["T_WHITESPACE"," ",94],["T_STRING","null",94],")",["T_WHITESPACE","\n\t",94],"{",["T_WHITESPACE","\n\t\t",95],["T_STRING","parent",96],["T_DOUBLE_COLON","::",96],["T_STRING","__construct",96],"(",["T_VARIABLE","$host",96],",",["T_WHITESPACE"," ",96],["T_VARIABLE","$accountName",96],",",["T_WHITESPACE"," ",96],["T_VARIABLE","$accountKey",96],",",["T_WHITESPACE"," ",96],["T_VARIABLE","$usePathStyleUri",96],",",["T_WHITESPACE"," ",96],["T_VARIABLE","$retryPolicy",96],")",";",["T_WHITESPACE","\n\n\t    ",96],["T_COMMENT","\/\/ Always use SharedKeyLite authentication\n",98],["T_WHITESPACE","\t    ",99],["T_VARIABLE","$this",99],["T_OBJECT_OPERATOR","->",99],["T_STRING","_credentials",99],["T_WHITESPACE"," ",99],"=",["T_WHITESPACE"," ",99],["T_NEW","new",99],["T_WHITESPACE"," ",99],["T_STRING","Zend_Service_WindowsAzure_Credentials_SharedKeyLite",99],"(",["T_VARIABLE","$accountName",99],",",["T_WHITESPACE"," ",99],["T_VARIABLE","$accountKey",99],",",["T_WHITESPACE"," ",99],["T_VARIABLE","$this",99],["T_OBJECT_OPERATOR","->",99],["T_STRING","_usePathStyleUri",99],")",";",["T_WHITESPACE","\n\t    \n\t    ",99],["T_COMMENT","\/\/ API version\n",101],["T_WHITESPACE","\t\t",102],["T_VARIABLE","$this",102],["T_OBJECT_OPERATOR","->",102],["T_STRING","_apiVersion",102],["T_WHITESPACE"," ",102],"=",["T_WHITESPACE"," ",102],["T_CONSTANT_ENCAPSED_STRING","'2009-09-19'",102],";",["T_WHITESPACE","\n\t",102],"}",["T_WHITESPACE","\n\t\n\t",103],["T_DOC_COMMENT","\/**\n\t * Check if a table exists\n\t * \n\t * @param string $tableName Table name\n\t * @return boolean\n\t *\/",105],["T_WHITESPACE","\n\t",110],["T_PUBLIC","public",111],["T_WHITESPACE"," ",111],["T_FUNCTION","function",111],["T_WHITESPACE"," ",111],["T_STRING","tableExists",111],"(",["T_VARIABLE","$tableName",111],["T_WHITESPACE"," ",111],"=",["T_WHITESPACE"," ",111],["T_CONSTANT_ENCAPSED_STRING","''",111],")",["T_WHITESPACE","\n\t",111],"{",["T_WHITESPACE","\n\t\t",112],["T_IF","if",113],["T_WHITESPACE"," ",113],"(",["T_VARIABLE","$tableName",113],["T_WHITESPACE"," ",113],["T_IS_IDENTICAL","===",113],["T_WHITESPACE"," ",113],["T_CONSTANT_ENCAPSED_STRING","''",113],")",["T_WHITESPACE"," ",113],"{",["T_WHITESPACE","\n\t\t\t",113],["T_COMMENT","#require_once 'Zend\/Service\/WindowsAzure\/Exception.php';\n",114],["T_WHITESPACE","\t\t\t",115],["T_THROW","throw",115],["T_WHITESPACE"," ",115],["T_NEW","new",115],["T_WHITESPACE"," ",115],["T_STRING","Zend_Service_WindowsAzure_Exception",115],"(",["T_CONSTANT_ENCAPSED_STRING","'Table name is not specified.'",115],")",";",["T_WHITESPACE","\n\t\t",115],"}",["T_WHITESPACE","\n\t\t\t\n\t\t",116],["T_COMMENT","\/\/ List tables\n",118],["T_WHITESPACE","        ",119],["T_VARIABLE","$tables",119],["T_WHITESPACE"," ",119],"=",["T_WHITESPACE"," ",119],["T_VARIABLE","$this",119],["T_OBJECT_OPERATOR","->",119],["T_STRING","listTables",119],"(",")",";",["T_WHITESPACE"," ",119],["T_COMMENT","\/\/ 2009-09-19 does not support $this->listTables($tableName); all of a sudden...\n",119],["T_WHITESPACE","        ",120],["T_FOREACH","foreach",120],["T_WHITESPACE"," ",120],"(",["T_VARIABLE","$tables",120],["T_WHITESPACE"," ",120],["T_AS","as",120],["T_WHITESPACE"," ",120],["T_VARIABLE","$table",120],")",["T_WHITESPACE"," ",120],"{",["T_WHITESPACE","\n            ",120],["T_IF","if",121],["T_WHITESPACE"," ",121],"(",["T_VARIABLE","$table",121],["T_OBJECT_OPERATOR","->",121],["T_STRING","Name",121],["T_WHITESPACE"," ",121],["T_IS_EQUAL","==",121],["T_WHITESPACE"," ",121],["T_VARIABLE","$tableName",121],")",["T_WHITESPACE"," ",121],"{",["T_WHITESPACE","\n                ",121],["T_RETURN","return",122],["T_WHITESPACE"," ",122],["T_STRING","true",122],";",["T_WHITESPACE","\n            ",122],"}",["T_WHITESPACE","\n        ",123],"}",["T_WHITESPACE","\n        \n        ",124],["T_RETURN","return",126],["T_WHITESPACE"," ",126],["T_STRING","false",126],";",["T_WHITESPACE","\n\t",126],"}",["T_WHITESPACE","\n\t\n\t",127],["T_DOC_COMMENT","\/**\n\t * List tables\n\t *\n\t * @param  string $nextTableName Next table name, used for listing tables when total amount of tables is > 1000.\n\t * @return array\n\t * @throws Zend_Service_WindowsAzure_Exception\n\t *\/",129],["T_WHITESPACE","\n\t",135],["T_PUBLIC","public",136],["T_WHITESPACE"," ",136],["T_FUNCTION","function",136],["T_WHITESPACE"," ",136],["T_STRING","listTables",136],"(",["T_VARIABLE","$nextTableName",136],["T_WHITESPACE"," ",136],"=",["T_WHITESPACE"," ",136],["T_CONSTANT_ENCAPSED_STRING","''",136],")",["T_WHITESPACE","\n\t",136],"{",["T_WHITESPACE","\n\t    ",137],["T_COMMENT","\/\/ Build query string\n",138],["T_WHITESPACE","\t\t",139],["T_VARIABLE","$queryString",139],["T_WHITESPACE"," ",139],"=",["T_WHITESPACE"," ",139],["T_ARRAY","array",139],"(",")",";",["T_WHITESPACE","\n\t    ",139],["T_IF","if",140],["T_WHITESPACE"," ",140],"(",["T_VARIABLE","$nextTableName",140],["T_WHITESPACE"," ",140],["T_IS_NOT_EQUAL","!=",140],["T_WHITESPACE"," ",140],["T_CONSTANT_ENCAPSED_STRING","''",140],")",["T_WHITESPACE"," ",140],"{",["T_WHITESPACE","\n\t        ",140],["T_VARIABLE","$queryString",141],"[","]",["T_WHITESPACE"," ",141],"=",["T_WHITESPACE"," ",141],["T_CONSTANT_ENCAPSED_STRING","'NextTableName='",141],["T_WHITESPACE"," ",141],".",["T_WHITESPACE"," ",141],["T_VARIABLE","$nextTableName",141],";",["T_WHITESPACE","\n\t    ",141],"}",["T_WHITESPACE","\n\t    ",142],["T_VARIABLE","$queryString",143],["T_WHITESPACE"," ",143],"=",["T_WHITESPACE"," ",143],["T_STRING","self",143],["T_DOUBLE_COLON","::",143],["T_STRING","createQueryStringFromArray",143],"(",["T_VARIABLE","$queryString",143],")",";",["T_WHITESPACE","\n\t    \n\t\t",143],["T_COMMENT","\/\/ Perform request\n",145],["T_WHITESPACE","\t\t",146],["T_VARIABLE","$response",146],["T_WHITESPACE"," ",146],"=",["T_WHITESPACE"," ",146],["T_VARIABLE","$this",146],["T_OBJECT_OPERATOR","->",146],["T_STRING","_performRequest",146],"(",["T_CONSTANT_ENCAPSED_STRING","'Tables'",146],",",["T_WHITESPACE"," ",146],["T_VARIABLE","$queryString",146],",",["T_WHITESPACE"," ",146],["T_STRING","Zend_Http_Client",146],["T_DOUBLE_COLON","::",146],["T_STRING","GET",146],",",["T_WHITESPACE"," ",146],["T_STRING","null",146],",",["T_WHITESPACE"," ",146],["T_STRING","true",146],")",";",["T_WHITESPACE","\n\t\t",146],["T_IF","if",147],["T_WHITESPACE"," ",147],"(",["T_VARIABLE","$response",147],["T_OBJECT_OPERATOR","->",147],["T_STRING","isSuccessful",147],"(",")",")",["T_WHITESPACE"," ",147],"{",["T_WHITESPACE","\t    \n\t\t    ",147],["T_COMMENT","\/\/ Parse result\n",148],["T_WHITESPACE","\t\t    ",149],["T_VARIABLE","$result",149],["T_WHITESPACE"," ",149],"=",["T_WHITESPACE"," ",149],["T_VARIABLE","$this",149],["T_OBJECT_OPERATOR","->",149],["T_STRING","_parseResponse",149],"(",["T_VARIABLE","$response",149],")",";",["T_WHITESPACE","\t\n\t\t    \n\t\t    ",149],["T_IF","if",151],["T_WHITESPACE"," ",151],"(","!",["T_VARIABLE","$result",151],["T_WHITESPACE"," ",151],["T_BOOLEAN_OR","||",151],["T_WHITESPACE"," ",151],"!",["T_VARIABLE","$result",151],["T_OBJECT_OPERATOR","->",151],["T_STRING","entry",151],")",["T_WHITESPACE"," ",151],"{",["T_WHITESPACE","\n\t\t        ",151],["T_RETURN","return",152],["T_WHITESPACE"," ",152],["T_ARRAY","array",152],"(",")",";",["T_WHITESPACE","\n\t\t    ",152],"}",["T_WHITESPACE","\n\t        \n\t\t    ",153],["T_VARIABLE","$entries",155],["T_WHITESPACE"," ",155],"=",["T_WHITESPACE"," ",155],["T_STRING","null",155],";",["T_WHITESPACE","\n\t\t    ",155],["T_IF","if",156],["T_WHITESPACE"," ",156],"(",["T_STRING","count",156],"(",["T_VARIABLE","$result",156],["T_OBJECT_OPERATOR","->",156],["T_STRING","entry",156],")",["T_WHITESPACE"," ",156],">",["T_WHITESPACE"," ",156],["T_LNUMBER","1",156],")",["T_WHITESPACE"," ",156],"{",["T_WHITESPACE","\n\t\t        ",156],["T_VARIABLE","$entries",157],["T_WHITESPACE"," ",157],"=",["T_WHITESPACE"," ",157],["T_VARIABLE","$result",157],["T_OBJECT_OPERATOR","->",157],["T_STRING","entry",157],";",["T_WHITESPACE","\n\t\t    ",157],"}",["T_WHITESPACE"," ",158],["T_ELSE","else",158],["T_WHITESPACE"," ",158],"{",["T_WHITESPACE","\n\t\t        ",158],["T_VARIABLE","$entries",159],["T_WHITESPACE"," ",159],"=",["T_WHITESPACE"," ",159],["T_ARRAY","array",159],"(",["T_VARIABLE","$result",159],["T_OBJECT_OPERATOR","->",159],["T_STRING","entry",159],")",";",["T_WHITESPACE","\n\t\t    ",159],"}",["T_WHITESPACE","\n\n\t\t    ",160],["T_COMMENT","\/\/ Create return value\n",162],["T_WHITESPACE","\t\t    ",163],["T_VARIABLE","$returnValue",163],["T_WHITESPACE"," ",163],"=",["T_WHITESPACE"," ",163],["T_ARRAY","array",163],"(",")",";",["T_WHITESPACE","\t\t    \n\t\t    ",163],["T_FOREACH","foreach",164],["T_WHITESPACE"," ",164],"(",["T_VARIABLE","$entries",164],["T_WHITESPACE"," ",164],["T_AS","as",164],["T_WHITESPACE"," ",164],["T_VARIABLE","$entry",164],")",["T_WHITESPACE"," ",164],"{",["T_WHITESPACE","\n\t\t        ",164],["T_VARIABLE","$tableName",165],["T_WHITESPACE"," ",165],"=",["T_WHITESPACE"," ",165],["T_VARIABLE","$entry",165],["T_OBJECT_OPERATOR","->",165],["T_STRING","xpath",165],"(",["T_CONSTANT_ENCAPSED_STRING","'.\/\/m:properties\/d:TableName'",165],")",";",["T_WHITESPACE","\n\t\t        ",165],["T_VARIABLE","$tableName",166],["T_WHITESPACE"," ",166],"=",["T_WHITESPACE"," ",166],["T_STRING_CAST","(string)",166],["T_VARIABLE","$tableName",166],"[",["T_LNUMBER","0",166],"]",";",["T_WHITESPACE","\n\t\t        \n\t\t        ",166],["T_VARIABLE","$returnValue",168],"[","]",["T_WHITESPACE"," ",168],"=",["T_WHITESPACE"," ",168],["T_NEW","new",168],["T_WHITESPACE"," ",168],["T_STRING","Zend_Service_WindowsAzure_Storage_TableInstance",168],"(",["T_WHITESPACE","\n\t\t            ",168],["T_STRING_CAST","(string)",169],["T_VARIABLE","$entry",169],["T_OBJECT_OPERATOR","->",169],["T_STRING","id",169],",",["T_WHITESPACE","\n\t\t            ",169],["T_VARIABLE","$tableName",170],",",["T_WHITESPACE","\n\t\t            ",170],["T_STRING_CAST","(string)",171],["T_VARIABLE","$entry",171],["T_OBJECT_OPERATOR","->",171],["T_STRING","link",171],"[",["T_CONSTANT_ENCAPSED_STRING","'href'",171],"]",",",["T_WHITESPACE","\n\t\t            ",171],["T_STRING_CAST","(string)",172],["T_VARIABLE","$entry",172],["T_OBJECT_OPERATOR","->",172],["T_STRING","updated",172],["T_WHITESPACE","\n\t\t        ",172],")",";",["T_WHITESPACE","\n\t\t    ",173],"}",["T_WHITESPACE","\n\t\t    \n\t\t\t",174],["T_COMMENT","\/\/ More tables?\n",176],["T_WHITESPACE","\t\t    ",177],["T_IF","if",177],["T_WHITESPACE"," ",177],"(","!",["T_STRING","is_null",177],"(",["T_VARIABLE","$response",177],["T_OBJECT_OPERATOR","->",177],["T_STRING","getHeader",177],"(",["T_CONSTANT_ENCAPSED_STRING","'x-ms-continuation-NextTableName'",177],")",")",")",["T_WHITESPACE"," ",177],"{",["T_WHITESPACE","\n\t\t\t\t",177],["T_COMMENT","#require_once 'Zend\/Service\/WindowsAzure\/Exception.php';\n",178],["T_WHITESPACE","\t\t        ",179],["T_VARIABLE","$returnValue",179],["T_WHITESPACE"," ",179],"=",["T_WHITESPACE"," ",179],["T_STRING","array_merge",179],"(",["T_VARIABLE","$returnValue",179],",",["T_WHITESPACE"," ",179],["T_VARIABLE","$this",179],["T_OBJECT_OPERATOR","->",179],["T_STRING","listTables",179],"(",["T_VARIABLE","$response",179],["T_OBJECT_OPERATOR","->",179],["T_STRING","getHeader",179],"(",["T_CONSTANT_ENCAPSED_STRING","'x-ms-continuation-NextTableName'",179],")",")",")",";",["T_WHITESPACE","\n\t\t    ",179],"}",["T_WHITESPACE","\n\n\t\t    ",180],["T_RETURN","return",182],["T_WHITESPACE"," ",182],["T_VARIABLE","$returnValue",182],";",["T_WHITESPACE","\n\t\t",182],"}",["T_WHITESPACE"," ",183],["T_ELSE","else",183],["T_WHITESPACE"," ",183],"{",["T_WHITESPACE","\n\t\t\t",183],["T_THROW","throw",184],["T_WHITESPACE"," ",184],["T_NEW","new",184],["T_WHITESPACE"," ",184],["T_STRING","Zend_Service_WindowsAzure_Exception",184],"(",["T_VARIABLE","$this",184],["T_OBJECT_OPERATOR","->",184],["T_STRING","_getErrorMessage",184],"(",["T_VARIABLE","$response",184],",",["T_WHITESPACE"," ",184],["T_CONSTANT_ENCAPSED_STRING","'Resource could not be accessed.'",184],")",")",";",["T_WHITESPACE","\n\t\t",184],"}",["T_WHITESPACE","\n\t",185],"}",["T_WHITESPACE","\n\t\n\t",186],["T_DOC_COMMENT","\/**\n\t * Create table\n\t *\n\t * @param string $tableName Table name\n\t * @return Zend_Service_WindowsAzure_Storage_TableInstance\n\t * @throws Zend_Service_WindowsAzure_Exception\n\t *\/",188],["T_WHITESPACE","\n\t",194],["T_PUBLIC","public",195],["T_WHITESPACE"," ",195],["T_FUNCTION","function",195],["T_WHITESPACE"," ",195],["T_STRING","createTable",195],"(",["T_VARIABLE","$tableName",195],["T_WHITESPACE"," ",195],"=",["T_WHITESPACE"," ",195],["T_CONSTANT_ENCAPSED_STRING","''",195],")",["T_WHITESPACE","\n\t",195],"{",["T_WHITESPACE","\n\t\t",196],["T_IF","if",197],["T_WHITESPACE"," ",197],"(",["T_VARIABLE","$tableName",197],["T_WHITESPACE"," ",197],["T_IS_IDENTICAL","===",197],["T_WHITESPACE"," ",197],["T_CONSTANT_ENCAPSED_STRING","''",197],")",["T_WHITESPACE"," ",197],"{",["T_WHITESPACE","\n\t\t\t",197],["T_THROW","throw",198],["T_WHITESPACE"," ",198],["T_NEW","new",198],["T_WHITESPACE"," ",198],["T_STRING","Zend_Service_WindowsAzure_Exception",198],"(",["T_CONSTANT_ENCAPSED_STRING","'Table name is not specified.'",198],")",";",["T_WHITESPACE","\n\t\t",198],"}",["T_WHITESPACE","\n\t\t\t\n\t\t",199],["T_COMMENT","\/\/ Generate request body\n",201],["T_WHITESPACE","\t\t",202],["T_VARIABLE","$requestBody",202],["T_WHITESPACE"," ",202],"=",["T_WHITESPACE"," ",202],["T_CONSTANT_ENCAPSED_STRING","'<?xml version=\"1.0\" encoding=\"utf-8\" standalone=\"yes\"?>\n                        <entry\n                        \txmlns:d=\"http:\/\/schemas.microsoft.com\/ado\/2007\/08\/dataservices\"\n                        \txmlns:m=\"http:\/\/schemas.microsoft.com\/ado\/2007\/08\/dataservices\/metadata\"\n                        \txmlns=\"http:\/\/www.w3.org\/2005\/Atom\">\n                          <title \/>\n                          <updated>{tpl:Updated}<\/updated>\n                          <author>\n                            <name \/>\n                          <\/author>\n                          <id \/>\n                          <content type=\"application\/xml\">\n                            <m:properties>\n                              <d:TableName>{tpl:TableName}<\/d:TableName>\n                            <\/m:properties>\n                          <\/content>\n                        <\/entry>'",202],";",["T_WHITESPACE","\n\t\t\n        ",218],["T_VARIABLE","$requestBody",220],["T_WHITESPACE"," ",220],"=",["T_WHITESPACE"," ",220],["T_VARIABLE","$this",220],["T_OBJECT_OPERATOR","->",220],["T_STRING","_fillTemplate",220],"(",["T_VARIABLE","$requestBody",220],",",["T_WHITESPACE"," ",220],["T_ARRAY","array",220],"(",["T_WHITESPACE","\n            ",220],["T_CONSTANT_ENCAPSED_STRING","'BaseUrl'",221],["T_WHITESPACE"," ",221],["T_DOUBLE_ARROW","=>",221],["T_WHITESPACE"," ",221],["T_VARIABLE","$this",221],["T_OBJECT_OPERATOR","->",221],["T_STRING","getBaseUrl",221],"(",")",",",["T_WHITESPACE","\n            ",221],["T_CONSTANT_ENCAPSED_STRING","'TableName'",222],["T_WHITESPACE"," ",222],["T_DOUBLE_ARROW","=>",222],["T_WHITESPACE"," ",222],["T_STRING","htmlspecialchars",222],"(",["T_VARIABLE","$tableName",222],")",",",["T_WHITESPACE","\n        \t",222],["T_CONSTANT_ENCAPSED_STRING","'Updated'",223],["T_WHITESPACE"," ",223],["T_DOUBLE_ARROW","=>",223],["T_WHITESPACE"," ",223],["T_VARIABLE","$this",223],["T_OBJECT_OPERATOR","->",223],["T_STRING","isoDate",223],"(",")",",",["T_WHITESPACE","\n            ",223],["T_CONSTANT_ENCAPSED_STRING","'AccountName'",224],["T_WHITESPACE"," ",224],["T_DOUBLE_ARROW","=>",224],["T_WHITESPACE"," ",224],["T_VARIABLE","$this",224],["T_OBJECT_OPERATOR","->",224],["T_STRING","_accountName",224],["T_WHITESPACE","\n        ",224],")",")",";",["T_WHITESPACE","\n        \n        ",225],["T_COMMENT","\/\/ Add header information\n",227],["T_WHITESPACE","        ",228],["T_VARIABLE","$headers",228],["T_WHITESPACE"," ",228],"=",["T_WHITESPACE"," ",228],["T_ARRAY","array",228],"(",")",";",["T_WHITESPACE","\n        ",228],["T_VARIABLE","$headers",229],"[",["T_CONSTANT_ENCAPSED_STRING","'Content-Type'",229],"]",["T_WHITESPACE"," ",229],"=",["T_WHITESPACE"," ",229],["T_CONSTANT_ENCAPSED_STRING","'application\/atom+xml'",229],";",["T_WHITESPACE","\n        ",229],["T_VARIABLE","$headers",230],"[",["T_CONSTANT_ENCAPSED_STRING","'DataServiceVersion'",230],"]",["T_WHITESPACE"," ",230],"=",["T_WHITESPACE"," ",230],["T_CONSTANT_ENCAPSED_STRING","'1.0;NetFx'",230],";",["T_WHITESPACE","\n        ",230],["T_VARIABLE","$headers",231],"[",["T_CONSTANT_ENCAPSED_STRING","'MaxDataServiceVersion'",231],"]",["T_WHITESPACE"," ",231],"=",["T_WHITESPACE"," ",231],["T_CONSTANT_ENCAPSED_STRING","'1.0;NetFx'",231],";",["T_WHITESPACE","        \n\n\t\t",231],["T_COMMENT","\/\/ Perform request\n",233],["T_WHITESPACE","\t\t",234],["T_VARIABLE","$response",234],["T_WHITESPACE"," ",234],"=",["T_WHITESPACE"," ",234],["T_VARIABLE","$this",234],["T_OBJECT_OPERATOR","->",234],["T_STRING","_performRequest",234],"(",["T_CONSTANT_ENCAPSED_STRING","'Tables'",234],",",["T_WHITESPACE"," ",234],["T_CONSTANT_ENCAPSED_STRING","''",234],",",["T_WHITESPACE"," ",234],["T_STRING","Zend_Http_Client",234],["T_DOUBLE_COLON","::",234],["T_STRING","POST",234],",",["T_WHITESPACE"," ",234],["T_VARIABLE","$headers",234],",",["T_WHITESPACE"," ",234],["T_STRING","true",234],",",["T_WHITESPACE"," ",234],["T_VARIABLE","$requestBody",234],")",";",["T_WHITESPACE","\n\t\t",234],["T_IF","if",235],["T_WHITESPACE"," ",235],"(",["T_VARIABLE","$response",235],["T_OBJECT_OPERATOR","->",235],["T_STRING","isSuccessful",235],"(",")",")",["T_WHITESPACE"," ",235],"{",["T_WHITESPACE","\n\t\t    ",235],["T_COMMENT","\/\/ Parse response\n",236],["T_WHITESPACE","\t\t    ",237],["T_VARIABLE","$entry",237],["T_WHITESPACE"," ",237],"=",["T_WHITESPACE"," ",237],["T_VARIABLE","$this",237],["T_OBJECT_OPERATOR","->",237],["T_STRING","_parseResponse",237],"(",["T_VARIABLE","$response",237],")",";",["T_WHITESPACE","\n\t\t    \n\t\t    ",237],["T_VARIABLE","$tableName",239],["T_WHITESPACE"," ",239],"=",["T_WHITESPACE"," ",239],["T_VARIABLE","$entry",239],["T_OBJECT_OPERATOR","->",239],["T_STRING","xpath",239],"(",["T_CONSTANT_ENCAPSED_STRING","'.\/\/m:properties\/d:TableName'",239],")",";",["T_WHITESPACE","\n\t\t    ",239],["T_VARIABLE","$tableName",240],["T_WHITESPACE"," ",240],"=",["T_WHITESPACE"," ",240],["T_STRING_CAST","(string)",240],["T_VARIABLE","$tableName",240],"[",["T_LNUMBER","0",240],"]",";",["T_WHITESPACE","\n\t\t        \n\t\t\t\n\t\t    ",240],["T_RETURN","return",243],["T_WHITESPACE"," ",243],["T_NEW","new",243],["T_WHITESPACE"," ",243],["T_STRING","Zend_Service_WindowsAzure_Storage_TableInstance",243],"(",["T_WHITESPACE","\n\t\t        ",243],["T_STRING_CAST","(string)",244],["T_VARIABLE","$entry",244],["T_OBJECT_OPERATOR","->",244],["T_STRING","id",244],",",["T_WHITESPACE","\n\t\t        ",244],["T_VARIABLE","$tableName",245],",",["T_WHITESPACE","\n\t\t        ",245],["T_STRING_CAST","(string)",246],["T_VARIABLE","$entry",246],["T_OBJECT_OPERATOR","->",246],["T_STRING","link",246],"[",["T_CONSTANT_ENCAPSED_STRING","'href'",246],"]",",",["T_WHITESPACE","\n\t\t        ",246],["T_STRING_CAST","(string)",247],["T_VARIABLE","$entry",247],["T_OBJECT_OPERATOR","->",247],["T_STRING","updated",247],["T_WHITESPACE","\n\t\t    ",247],")",";",["T_WHITESPACE","\n\t\t",248],"}",["T_WHITESPACE"," ",249],["T_ELSE","else",249],["T_WHITESPACE"," ",249],"{",["T_WHITESPACE","\n                    ",249],["T_COMMENT","#require_once 'Zend\/Service\/WindowsAzure\/Exception.php';\n",250],["T_WHITESPACE","                    ",251],["T_THROW","throw",251],["T_WHITESPACE"," ",251],["T_NEW","new",251],["T_WHITESPACE"," ",251],["T_STRING","Zend_Service_WindowsAzure_Exception",251],"(",["T_VARIABLE","$this",251],["T_OBJECT_OPERATOR","->",251],["T_STRING","_getErrorMessage",251],"(",["T_VARIABLE","$response",251],",",["T_WHITESPACE"," ",251],["T_CONSTANT_ENCAPSED_STRING","'Resource could not be accessed.'",251],")",")",";",["T_WHITESPACE","\n\t\t",251],"}",["T_WHITESPACE","\n\t",252],"}",["T_WHITESPACE","\n\t\n\t",253],["T_DOC_COMMENT","\/**\n\t * Create table if it does not exist\n\t *\n\t * @param string $tableName Table name\n\t * @throws Zend_Service_WindowsAzure_Exception\n\t *\/",255],["T_WHITESPACE","\n\t",260],["T_PUBLIC","public",261],["T_WHITESPACE"," ",261],["T_FUNCTION","function",261],["T_WHITESPACE"," ",261],["T_STRING","createTableIfNotExists",261],"(",["T_VARIABLE","$tableName",261],["T_WHITESPACE"," ",261],"=",["T_WHITESPACE"," ",261],["T_CONSTANT_ENCAPSED_STRING","''",261],")",["T_WHITESPACE","\n\t",261],"{",["T_WHITESPACE","\n\t\t",262],["T_IF","if",263],["T_WHITESPACE"," ",263],"(","!",["T_VARIABLE","$this",263],["T_OBJECT_OPERATOR","->",263],["T_STRING","tableExists",263],"(",["T_VARIABLE","$tableName",263],")",")",["T_WHITESPACE"," ",263],"{",["T_WHITESPACE","\n\t\t\t",263],["T_VARIABLE","$this",264],["T_OBJECT_OPERATOR","->",264],["T_STRING","createTable",264],"(",["T_VARIABLE","$tableName",264],")",";",["T_WHITESPACE","\n\t\t",264],"}",["T_WHITESPACE","\n\t",265],"}",["T_WHITESPACE","\n\t\n\t",266],["T_DOC_COMMENT","\/**\n\t * Delete table\n\t *\n\t * @param string $tableName Table name\n\t * @throws Zend_Service_WindowsAzure_Exception\n\t *\/",268],["T_WHITESPACE","\n\t",273],["T_PUBLIC","public",274],["T_WHITESPACE"," ",274],["T_FUNCTION","function",274],["T_WHITESPACE"," ",274],["T_STRING","deleteTable",274],"(",["T_VARIABLE","$tableName",274],["T_WHITESPACE"," ",274],"=",["T_WHITESPACE"," ",274],["T_CONSTANT_ENCAPSED_STRING","''",274],")",["T_WHITESPACE","\n\t",274],"{",["T_WHITESPACE","\n\t\t",275],["T_IF","if",276],["T_WHITESPACE"," ",276],"(",["T_VARIABLE","$tableName",276],["T_WHITESPACE"," ",276],["T_IS_IDENTICAL","===",276],["T_WHITESPACE"," ",276],["T_CONSTANT_ENCAPSED_STRING","''",276],")",["T_WHITESPACE"," ",276],"{",["T_WHITESPACE","\n\t\t\t",276],["T_COMMENT","#require_once 'Zend\/Service\/WindowsAzure\/Exception.php';\n",277],["T_WHITESPACE","\t\t\t",278],["T_THROW","throw",278],["T_WHITESPACE"," ",278],["T_NEW","new",278],["T_WHITESPACE"," ",278],["T_STRING","Zend_Service_WindowsAzure_Exception",278],"(",["T_CONSTANT_ENCAPSED_STRING","'Table name is not specified.'",278],")",";",["T_WHITESPACE","\n\t\t",278],"}",["T_WHITESPACE","\n\n        ",279],["T_COMMENT","\/\/ Add header information\n",281],["T_WHITESPACE","        ",282],["T_VARIABLE","$headers",282],["T_WHITESPACE"," ",282],"=",["T_WHITESPACE"," ",282],["T_ARRAY","array",282],"(",")",";",["T_WHITESPACE","\n        ",282],["T_VARIABLE","$headers",283],"[",["T_CONSTANT_ENCAPSED_STRING","'Content-Type'",283],"]",["T_WHITESPACE"," ",283],"=",["T_WHITESPACE"," ",283],["T_CONSTANT_ENCAPSED_STRING","'application\/atom+xml'",283],";",["T_WHITESPACE","\n\n\t\t",283],["T_COMMENT","\/\/ Perform request\n",285],["T_WHITESPACE","\t\t",286],["T_VARIABLE","$response",286],["T_WHITESPACE"," ",286],"=",["T_WHITESPACE"," ",286],["T_VARIABLE","$this",286],["T_OBJECT_OPERATOR","->",286],["T_STRING","_performRequest",286],"(",["T_CONSTANT_ENCAPSED_STRING","'Tables(\\''",286],["T_WHITESPACE"," ",286],".",["T_WHITESPACE"," ",286],["T_VARIABLE","$tableName",286],["T_WHITESPACE"," ",286],".",["T_WHITESPACE"," ",286],["T_CONSTANT_ENCAPSED_STRING","'\\')'",286],",",["T_WHITESPACE"," ",286],["T_CONSTANT_ENCAPSED_STRING","''",286],",",["T_WHITESPACE"," ",286],["T_STRING","Zend_Http_Client",286],["T_DOUBLE_COLON","::",286],["T_STRING","DELETE",286],",",["T_WHITESPACE"," ",286],["T_VARIABLE","$headers",286],",",["T_WHITESPACE"," ",286],["T_STRING","true",286],",",["T_WHITESPACE"," ",286],["T_STRING","null",286],")",";",["T_WHITESPACE","\n\t\t",286],["T_IF","if",287],["T_WHITESPACE"," ",287],"(","!",["T_VARIABLE","$response",287],["T_OBJECT_OPERATOR","->",287],["T_STRING","isSuccessful",287],"(",")",")",["T_WHITESPACE"," ",287],"{",["T_WHITESPACE","\n\t\t\t",287],["T_COMMENT","#require_once 'Zend\/Service\/WindowsAzure\/Exception.php';\n",288],["T_WHITESPACE","\t\t\t",289],["T_THROW","throw",289],["T_WHITESPACE"," ",289],["T_NEW","new",289],["T_WHITESPACE"," ",289],["T_STRING","Zend_Service_WindowsAzure_Exception",289],"(",["T_VARIABLE","$this",289],["T_OBJECT_OPERATOR","->",289],["T_STRING","_getErrorMessage",289],"(",["T_VARIABLE","$response",289],",",["T_WHITESPACE"," ",289],["T_CONSTANT_ENCAPSED_STRING","'Resource could not be accessed.'",289],")",")",";",["T_WHITESPACE","\n\t\t",289],"}",["T_WHITESPACE","\n\t",290],"}",["T_WHITESPACE","\n\t\n\t",291],["T_DOC_COMMENT","\/**\n\t * Insert entity into table\n\t * \n\t * @param string                              $tableName   Table name\n\t * @param Zend_Service_WindowsAzure_Storage_TableEntity $entity      Entity to insert\n\t * @return Zend_Service_WindowsAzure_Storage_TableEntity\n\t * @throws Zend_Service_WindowsAzure_Exception\n\t *\/",293],["T_WHITESPACE","\n\t",300],["T_PUBLIC","public",301],["T_WHITESPACE"," ",301],["T_FUNCTION","function",301],["T_WHITESPACE"," ",301],["T_STRING","insertEntity",301],"(",["T_VARIABLE","$tableName",301],["T_WHITESPACE"," ",301],"=",["T_WHITESPACE"," ",301],["T_CONSTANT_ENCAPSED_STRING","''",301],",",["T_WHITESPACE"," ",301],["T_STRING","Zend_Service_WindowsAzure_Storage_TableEntity",301],["T_WHITESPACE"," ",301],["T_VARIABLE","$entity",301],["T_WHITESPACE"," ",301],"=",["T_WHITESPACE"," ",301],["T_STRING","null",301],")",["T_WHITESPACE","\n\t",301],"{",["T_WHITESPACE","\n\t\t",302],["T_IF","if",303],["T_WHITESPACE"," ",303],"(",["T_VARIABLE","$tableName",303],["T_WHITESPACE"," ",303],["T_IS_IDENTICAL","===",303],["T_WHITESPACE"," ",303],["T_CONSTANT_ENCAPSED_STRING","''",303],")",["T_WHITESPACE"," ",303],"{",["T_WHITESPACE","\n\t\t\t",303],["T_COMMENT","#require_once 'Zend\/Service\/WindowsAzure\/Exception.php';\n",304],["T_WHITESPACE","\t\t\t",305],["T_THROW","throw",305],["T_WHITESPACE"," ",305],["T_NEW","new",305],["T_WHITESPACE"," ",305],["T_STRING","Zend_Service_WindowsAzure_Exception",305],"(",["T_CONSTANT_ENCAPSED_STRING","'Table name is not specified.'",305],")",";",["T_WHITESPACE","\n\t\t",305],"}",["T_WHITESPACE","\n\t\t",306],["T_IF","if",307],["T_WHITESPACE"," ",307],"(",["T_STRING","is_null",307],"(",["T_VARIABLE","$entity",307],")",")",["T_WHITESPACE"," ",307],"{",["T_WHITESPACE","\n\t\t\t",307],["T_COMMENT","#require_once 'Zend\/Service\/WindowsAzure\/Exception.php';\n",308],["T_WHITESPACE","\t\t\t",309],["T_THROW","throw",309],["T_WHITESPACE"," ",309],["T_NEW","new",309],["T_WHITESPACE"," ",309],["T_STRING","Zend_Service_WindowsAzure_Exception",309],"(",["T_CONSTANT_ENCAPSED_STRING","'Entity is not specified.'",309],")",";",["T_WHITESPACE","\n\t\t",309],"}",["T_WHITESPACE","\n\t\t                     \n\t\t",310],["T_COMMENT","\/\/ Generate request body\n",312],["T_WHITESPACE","\t\t",313],["T_VARIABLE","$requestBody",313],["T_WHITESPACE"," ",313],"=",["T_WHITESPACE"," ",313],["T_CONSTANT_ENCAPSED_STRING","'<?xml version=\"1.0\" encoding=\"utf-8\" standalone=\"yes\"?>\n                        <entry xmlns:d=\"http:\/\/schemas.microsoft.com\/ado\/2007\/08\/dataservices\" xmlns:m=\"http:\/\/schemas.microsoft.com\/ado\/2007\/08\/dataservices\/metadata\" xmlns=\"http:\/\/www.w3.org\/2005\/Atom\">\n                          <title \/>\n                          <updated>{tpl:Updated}<\/updated>\n                          <author>\n                            <name \/>\n                          <\/author>\n                          <id \/>\n                          <content type=\"application\/xml\">\n                            <m:properties>\n                              {tpl:Properties}\n                            <\/m:properties>\n                          <\/content>\n                        <\/entry>'",313],";",["T_WHITESPACE","\n\t\t\n        ",326],["T_VARIABLE","$requestBody",328],["T_WHITESPACE"," ",328],"=",["T_WHITESPACE"," ",328],["T_VARIABLE","$this",328],["T_OBJECT_OPERATOR","->",328],["T_STRING","_fillTemplate",328],"(",["T_VARIABLE","$requestBody",328],",",["T_WHITESPACE"," ",328],["T_ARRAY","array",328],"(",["T_WHITESPACE","\n        \t",328],["T_CONSTANT_ENCAPSED_STRING","'Updated'",329],["T_WHITESPACE","    ",329],["T_DOUBLE_ARROW","=>",329],["T_WHITESPACE"," ",329],["T_VARIABLE","$this",329],["T_OBJECT_OPERATOR","->",329],["T_STRING","isoDate",329],"(",")",",",["T_WHITESPACE","\n            ",329],["T_CONSTANT_ENCAPSED_STRING","'Properties'",330],["T_WHITESPACE"," ",330],["T_DOUBLE_ARROW","=>",330],["T_WHITESPACE"," ",330],["T_VARIABLE","$this",330],["T_OBJECT_OPERATOR","->",330],["T_STRING","_generateAzureRepresentation",330],"(",["T_VARIABLE","$entity",330],")",["T_WHITESPACE","\n        ",330],")",")",";",["T_WHITESPACE","\n\n        ",331],["T_COMMENT","\/\/ Add header information\n",333],["T_WHITESPACE","        ",334],["T_VARIABLE","$headers",334],["T_WHITESPACE"," ",334],"=",["T_WHITESPACE"," ",334],["T_ARRAY","array",334],"(",")",";",["T_WHITESPACE","\n        ",334],["T_VARIABLE","$headers",335],"[",["T_CONSTANT_ENCAPSED_STRING","'Content-Type'",335],"]",["T_WHITESPACE"," ",335],"=",["T_WHITESPACE"," ",335],["T_CONSTANT_ENCAPSED_STRING","'application\/atom+xml'",335],";",["T_WHITESPACE","\n\n\t\t",335],["T_COMMENT","\/\/ Perform request\n",337],["T_WHITESPACE","\t    ",338],["T_VARIABLE","$response",338],["T_WHITESPACE"," ",338],"=",["T_WHITESPACE"," ",338],["T_STRING","null",338],";",["T_WHITESPACE","\n\t    ",338],["T_IF","if",339],["T_WHITESPACE"," ",339],"(",["T_VARIABLE","$this",339],["T_OBJECT_OPERATOR","->",339],["T_STRING","isInBatch",339],"(",")",")",["T_WHITESPACE"," ",339],"{",["T_WHITESPACE","\n\t\t    ",339],["T_VARIABLE","$this",340],["T_OBJECT_OPERATOR","->",340],["T_STRING","getCurrentBatch",340],"(",")",["T_OBJECT_OPERATOR","->",340],["T_STRING","enlistOperation",340],"(",["T_VARIABLE","$tableName",340],",",["T_WHITESPACE"," ",340],["T_CONSTANT_ENCAPSED_STRING","''",340],",",["T_WHITESPACE"," ",340],["T_STRING","Zend_Http_Client",340],["T_DOUBLE_COLON","::",340],["T_STRING","POST",340],",",["T_WHITESPACE"," ",340],["T_VARIABLE","$headers",340],",",["T_WHITESPACE"," ",340],["T_STRING","true",340],",",["T_WHITESPACE"," ",340],["T_VARIABLE","$requestBody",340],")",";",["T_WHITESPACE","\n\t\t    ",340],["T_RETURN","return",341],["T_WHITESPACE"," ",341],["T_STRING","null",341],";",["T_WHITESPACE","\n\t\t",341],"}",["T_WHITESPACE"," ",342],["T_ELSE","else",342],["T_WHITESPACE"," ",342],"{",["T_WHITESPACE","\n\t\t    ",342],["T_VARIABLE","$response",343],["T_WHITESPACE"," ",343],"=",["T_WHITESPACE"," ",343],["T_VARIABLE","$this",343],["T_OBJECT_OPERATOR","->",343],["T_STRING","_performRequest",343],"(",["T_VARIABLE","$tableName",343],",",["T_WHITESPACE"," ",343],["T_CONSTANT_ENCAPSED_STRING","''",343],",",["T_WHITESPACE"," ",343],["T_STRING","Zend_Http_Client",343],["T_DOUBLE_COLON","::",343],["T_STRING","POST",343],",",["T_WHITESPACE"," ",343],["T_VARIABLE","$headers",343],",",["T_WHITESPACE"," ",343],["T_STRING","true",343],",",["T_WHITESPACE"," ",343],["T_VARIABLE","$requestBody",343],")",";",["T_WHITESPACE","\n\t\t",343],"}",["T_WHITESPACE","\n\t\t",344],["T_IF","if",345],["T_WHITESPACE"," ",345],"(",["T_VARIABLE","$response",345],["T_OBJECT_OPERATOR","->",345],["T_STRING","isSuccessful",345],"(",")",")",["T_WHITESPACE"," ",345],"{",["T_WHITESPACE","\n\t\t    ",345],["T_COMMENT","\/\/ Parse result\n",346],["T_WHITESPACE","\t\t    ",347],["T_VARIABLE","$result",347],["T_WHITESPACE"," ",347],"=",["T_WHITESPACE"," ",347],["T_VARIABLE","$this",347],["T_OBJECT_OPERATOR","->",347],["T_STRING","_parseResponse",347],"(",["T_VARIABLE","$response",347],")",";",["T_WHITESPACE","\n\t\t    \n\t\t    ",347],["T_VARIABLE","$timestamp",349],["T_WHITESPACE"," ",349],"=",["T_WHITESPACE"," ",349],["T_VARIABLE","$result",349],["T_OBJECT_OPERATOR","->",349],["T_STRING","xpath",349],"(",["T_CONSTANT_ENCAPSED_STRING","'\/\/m:properties\/d:Timestamp'",349],")",";",["T_WHITESPACE","\n\t\t    ",349],["T_VARIABLE","$timestamp",350],["T_WHITESPACE"," ",350],"=",["T_WHITESPACE"," ",350],["T_VARIABLE","$this",350],["T_OBJECT_OPERATOR","->",350],["T_STRING","_convertToDateTime",350],"(",["T_WHITESPACE"," ",350],["T_STRING_CAST","(string)",350],["T_VARIABLE","$timestamp",350],"[",["T_LNUMBER","0",350],"]",["T_WHITESPACE"," ",350],")",";",["T_WHITESPACE","\n\n\t\t    ",350],["T_VARIABLE","$etag",352],["T_WHITESPACE","      ",352],"=",["T_WHITESPACE"," ",352],["T_VARIABLE","$result",352],["T_OBJECT_OPERATOR","->",352],["T_STRING","attributes",352],"(",["T_CONSTANT_ENCAPSED_STRING","'http:\/\/schemas.microsoft.com\/ado\/2007\/08\/dataservices\/metadata'",352],")",";",["T_WHITESPACE","\n\t\t    ",352],["T_VARIABLE","$etag",353],["T_WHITESPACE","      ",353],"=",["T_WHITESPACE"," ",353],["T_STRING_CAST","(string)",353],["T_VARIABLE","$etag",353],"[",["T_CONSTANT_ENCAPSED_STRING","'etag'",353],"]",";",["T_WHITESPACE","\n\t\t    \n\t\t    ",353],["T_COMMENT","\/\/ Update properties\n",355],["T_WHITESPACE","\t\t    ",356],["T_VARIABLE","$entity",356],["T_OBJECT_OPERATOR","->",356],["T_STRING","setTimestamp",356],"(",["T_VARIABLE","$timestamp",356],")",";",["T_WHITESPACE","\n\t\t    ",356],["T_VARIABLE","$entity",357],["T_OBJECT_OPERATOR","->",357],["T_STRING","setEtag",357],"(",["T_VARIABLE","$etag",357],")",";",["T_WHITESPACE","\n\n\t\t    ",357],["T_RETURN","return",359],["T_WHITESPACE"," ",359],["T_VARIABLE","$entity",359],";",["T_WHITESPACE","\n\t\t",359],"}",["T_WHITESPACE"," ",360],["T_ELSE","else",360],["T_WHITESPACE"," ",360],"{",["T_WHITESPACE","\n\t\t\t",360],["T_COMMENT","#require_once 'Zend\/Service\/WindowsAzure\/Exception.php';\n",361],["T_WHITESPACE","\t\t\t",362],["T_THROW","throw",362],["T_WHITESPACE"," ",362],["T_NEW","new",362],["T_WHITESPACE"," ",362],["T_STRING","Zend_Service_WindowsAzure_Exception",362],"(",["T_VARIABLE","$this",362],["T_OBJECT_OPERATOR","->",362],["T_STRING","_getErrorMessage",362],"(",["T_VARIABLE","$response",362],",",["T_WHITESPACE"," ",362],["T_CONSTANT_ENCAPSED_STRING","'Resource could not be accessed.'",362],")",")",";",["T_WHITESPACE","\n\t\t",362],"}",["T_WHITESPACE","\n\t",363],"}",["T_WHITESPACE","\n\t\n\t",364],["T_DOC_COMMENT","\/**\n\t * Delete entity from table\n\t * \n\t * @param string                              $tableName   Table name\n\t * @param Zend_Service_WindowsAzure_Storage_TableEntity $entity      Entity to delete\n\t * @param boolean                             $verifyEtag  Verify etag of the entity (used for concurrency)\n\t * @throws Zend_Service_WindowsAzure_Exception\n\t *\/",366],["T_WHITESPACE","\n\t",373],["T_PUBLIC","public",374],["T_WHITESPACE"," ",374],["T_FUNCTION","function",374],["T_WHITESPACE"," ",374],["T_STRING","deleteEntity",374],"(",["T_VARIABLE","$tableName",374],["T_WHITESPACE"," ",374],"=",["T_WHITESPACE"," ",374],["T_CONSTANT_ENCAPSED_STRING","''",374],",",["T_WHITESPACE"," ",374],["T_STRING","Zend_Service_WindowsAzure_Storage_TableEntity",374],["T_WHITESPACE"," ",374],["T_VARIABLE","$entity",374],["T_WHITESPACE"," ",374],"=",["T_WHITESPACE"," ",374],["T_STRING","null",374],",",["T_WHITESPACE"," ",374],["T_VARIABLE","$verifyEtag",374],["T_WHITESPACE"," ",374],"=",["T_WHITESPACE"," ",374],["T_STRING","false",374],")",["T_WHITESPACE","\n\t",374],"{",["T_WHITESPACE","\n\t\t",375],["T_IF","if",376],["T_WHITESPACE"," ",376],"(",["T_VARIABLE","$tableName",376],["T_WHITESPACE"," ",376],["T_IS_IDENTICAL","===",376],["T_WHITESPACE"," ",376],["T_CONSTANT_ENCAPSED_STRING","''",376],")",["T_WHITESPACE"," ",376],"{",["T_WHITESPACE","\n\t\t\t",376],["T_COMMENT","#require_once 'Zend\/Service\/WindowsAzure\/Exception.php';\n",377],["T_WHITESPACE","\t\t\t",378],["T_THROW","throw",378],["T_WHITESPACE"," ",378],["T_NEW","new",378],["T_WHITESPACE"," ",378],["T_STRING","Zend_Service_WindowsAzure_Exception",378],"(",["T_CONSTANT_ENCAPSED_STRING","'Table name is not specified.'",378],")",";",["T_WHITESPACE","\n\t\t",378],"}",["T_WHITESPACE","\n\t\t",379],["T_IF","if",380],["T_WHITESPACE"," ",380],"(",["T_STRING","is_null",380],"(",["T_VARIABLE","$entity",380],")",")",["T_WHITESPACE"," ",380],"{",["T_WHITESPACE","\n\t\t\t",380],["T_COMMENT","#require_once 'Zend\/Service\/WindowsAzure\/Exception.php';\n",381],["T_WHITESPACE","\t\t\t",382],["T_THROW","throw",382],["T_WHITESPACE"," ",382],["T_NEW","new",382],["T_WHITESPACE"," ",382],["T_STRING","Zend_Service_WindowsAzure_Exception",382],"(",["T_CONSTANT_ENCAPSED_STRING","'Entity is not specified.'",382],")",";",["T_WHITESPACE","\n\t\t",382],"}",["T_WHITESPACE","\n\t\t                     \n        ",383],["T_COMMENT","\/\/ Add header information\n",385],["T_WHITESPACE","        ",386],["T_VARIABLE","$headers",386],["T_WHITESPACE"," ",386],"=",["T_WHITESPACE"," ",386],["T_ARRAY","array",386],"(",")",";",["T_WHITESPACE","\n        ",386],["T_IF","if",387],["T_WHITESPACE"," ",387],"(","!",["T_VARIABLE","$this",387],["T_OBJECT_OPERATOR","->",387],["T_STRING","isInBatch",387],"(",")",")",["T_WHITESPACE"," ",387],"{",["T_WHITESPACE","\n        \t",387],["T_COMMENT","\/\/ http:\/\/social.msdn.microsoft.com\/Forums\/en-US\/windowsazure\/thread\/9e255447-4dc7-458a-99d3-bdc04bdc5474\/\n",388],["T_WHITESPACE","            ",389],["T_VARIABLE","$headers",389],"[",["T_CONSTANT_ENCAPSED_STRING","'Content-Type'",389],"]",["T_WHITESPACE","   ",389],"=",["T_WHITESPACE"," ",389],["T_CONSTANT_ENCAPSED_STRING","'application\/atom+xml'",389],";",["T_WHITESPACE","\n        ",389],"}",["T_WHITESPACE","\n        ",390],["T_VARIABLE","$headers",391],"[",["T_CONSTANT_ENCAPSED_STRING","'Content-Length'",391],"]",["T_WHITESPACE"," ",391],"=",["T_WHITESPACE"," ",391],["T_LNUMBER","0",391],";",["T_WHITESPACE","\n        ",391],["T_IF","if",392],["T_WHITESPACE"," ",392],"(","!",["T_VARIABLE","$verifyEtag",392],")",["T_WHITESPACE"," ",392],"{",["T_WHITESPACE","\n            ",392],["T_VARIABLE","$headers",393],"[",["T_CONSTANT_ENCAPSED_STRING","'If-Match'",393],"]",["T_WHITESPACE","       ",393],"=",["T_WHITESPACE"," ",393],["T_CONSTANT_ENCAPSED_STRING","'*'",393],";",["T_WHITESPACE","\n        ",393],"}",["T_WHITESPACE"," ",394],["T_ELSE","else",394],["T_WHITESPACE"," ",394],"{",["T_WHITESPACE","\n            ",394],["T_VARIABLE","$headers",395],"[",["T_CONSTANT_ENCAPSED_STRING","'If-Match'",395],"]",["T_WHITESPACE","       ",395],"=",["T_WHITESPACE"," ",395],["T_VARIABLE","$entity",395],["T_OBJECT_OPERATOR","->",395],["T_STRING","getEtag",395],"(",")",";",["T_WHITESPACE","\n        ",395],"}",["T_WHITESPACE","\n\n\t\t",396],["T_COMMENT","\/\/ Perform request\n",398],["T_WHITESPACE","\t    ",399],["T_VARIABLE","$response",399],["T_WHITESPACE"," ",399],"=",["T_WHITESPACE"," ",399],["T_STRING","null",399],";",["T_WHITESPACE","\n\t    ",399],["T_IF","if",400],["T_WHITESPACE"," ",400],"(",["T_VARIABLE","$this",400],["T_OBJECT_OPERATOR","->",400],["T_STRING","isInBatch",400],"(",")",")",["T_WHITESPACE"," ",400],"{",["T_WHITESPACE","\n\t\t    ",400],["T_VARIABLE","$this",401],["T_OBJECT_OPERATOR","->",401],["T_STRING","getCurrentBatch",401],"(",")",["T_OBJECT_OPERATOR","->",401],["T_STRING","enlistOperation",401],"(",["T_VARIABLE","$tableName",401],["T_WHITESPACE"," ",401],".",["T_WHITESPACE"," ",401],["T_CONSTANT_ENCAPSED_STRING","'(PartitionKey=\\''",401],["T_WHITESPACE"," ",401],".",["T_WHITESPACE"," ",401],["T_VARIABLE","$entity",401],["T_OBJECT_OPERATOR","->",401],["T_STRING","getPartitionKey",401],"(",")",["T_WHITESPACE"," ",401],".",["T_WHITESPACE"," ",401],["T_CONSTANT_ENCAPSED_STRING","'\\', RowKey=\\''",401],["T_WHITESPACE"," ",401],".",["T_WHITESPACE"," ",401],["T_VARIABLE","$entity",401],["T_OBJECT_OPERATOR","->",401],["T_STRING","getRowKey",401],"(",")",["T_WHITESPACE"," ",401],".",["T_WHITESPACE"," ",401],["T_CONSTANT_ENCAPSED_STRING","'\\')'",401],",",["T_WHITESPACE"," ",401],["T_CONSTANT_ENCAPSED_STRING","''",401],",",["T_WHITESPACE"," ",401],["T_STRING","Zend_Http_Client",401],["T_DOUBLE_COLON","::",401],["T_STRING","DELETE",401],",",["T_WHITESPACE"," ",401],["T_VARIABLE","$headers",401],",",["T_WHITESPACE"," ",401],["T_STRING","true",401],",",["T_WHITESPACE"," ",401],["T_STRING","null",401],")",";",["T_WHITESPACE","\n\t\t    ",401],["T_RETURN","return",402],["T_WHITESPACE"," ",402],["T_STRING","null",402],";",["T_WHITESPACE","\n\t\t",402],"}",["T_WHITESPACE"," ",403],["T_ELSE","else",403],["T_WHITESPACE"," ",403],"{",["T_WHITESPACE","\n\t\t    ",403],["T_VARIABLE","$response",404],["T_WHITESPACE"," ",404],"=",["T_WHITESPACE"," ",404],["T_VARIABLE","$this",404],["T_OBJECT_OPERATOR","->",404],["T_STRING","_performRequest",404],"(",["T_VARIABLE","$tableName",404],["T_WHITESPACE"," ",404],".",["T_WHITESPACE"," ",404],["T_CONSTANT_ENCAPSED_STRING","'(PartitionKey=\\''",404],["T_WHITESPACE"," ",404],".",["T_WHITESPACE"," ",404],["T_VARIABLE","$entity",404],["T_OBJECT_OPERATOR","->",404],["T_STRING","getPartitionKey",404],"(",")",["T_WHITESPACE"," ",404],".",["T_WHITESPACE"," ",404],["T_CONSTANT_ENCAPSED_STRING","'\\', RowKey=\\''",404],["T_WHITESPACE"," ",404],".",["T_WHITESPACE"," ",404],["T_VARIABLE","$entity",404],["T_OBJECT_OPERATOR","->",404],["T_STRING","getRowKey",404],"(",")",["T_WHITESPACE"," ",404],".",["T_WHITESPACE"," ",404],["T_CONSTANT_ENCAPSED_STRING","'\\')'",404],",",["T_WHITESPACE"," ",404],["T_CONSTANT_ENCAPSED_STRING","''",404],",",["T_WHITESPACE"," ",404],["T_STRING","Zend_Http_Client",404],["T_DOUBLE_COLON","::",404],["T_STRING","DELETE",404],",",["T_WHITESPACE"," ",404],["T_VARIABLE","$headers",404],",",["T_WHITESPACE"," ",404],["T_STRING","true",404],",",["T_WHITESPACE"," ",404],["T_STRING","null",404],")",";",["T_WHITESPACE","\n\t\t",404],"}",["T_WHITESPACE","\n\t\t",405],["T_IF","if",406],["T_WHITESPACE"," ",406],"(","!",["T_VARIABLE","$response",406],["T_OBJECT_OPERATOR","->",406],["T_STRING","isSuccessful",406],"(",")",")",["T_WHITESPACE"," ",406],"{",["T_WHITESPACE","\n\t\t\t",406],["T_COMMENT","#require_once 'Zend\/Service\/WindowsAzure\/Exception.php';\n",407],["T_WHITESPACE","\t\t    ",408],["T_THROW","throw",408],["T_WHITESPACE"," ",408],["T_NEW","new",408],["T_WHITESPACE"," ",408],["T_STRING","Zend_Service_WindowsAzure_Exception",408],"(",["T_VARIABLE","$this",408],["T_OBJECT_OPERATOR","->",408],["T_STRING","_getErrorMessage",408],"(",["T_VARIABLE","$response",408],",",["T_WHITESPACE"," ",408],["T_CONSTANT_ENCAPSED_STRING","'Resource could not be accessed.'",408],")",")",";",["T_WHITESPACE","\n\t\t",408],"}",["T_WHITESPACE","\n\t",409],"}",["T_WHITESPACE","\n\t\n\t",410],["T_DOC_COMMENT","\/**\n\t * Retrieve entity from table, by id\n\t * \n\t * @param string $tableName    Table name\n\t * @param string $partitionKey Partition key\n\t * @param string $rowKey       Row key\n\t * @param string $entityClass  Entity class name* \n\t * @return Zend_Service_WindowsAzure_Storage_TableEntity\n\t * @throws Zend_Service_WindowsAzure_Exception\n\t *\/",412],["T_WHITESPACE","\n\t",421],["T_PUBLIC","public",422],["T_WHITESPACE"," ",422],["T_FUNCTION","function",422],["T_WHITESPACE"," ",422],["T_STRING","retrieveEntityById",422],"(",["T_VARIABLE","$tableName",422],",",["T_WHITESPACE"," ",422],["T_VARIABLE","$partitionKey",422],",",["T_WHITESPACE"," ",422],["T_VARIABLE","$rowKey",422],",",["T_WHITESPACE"," ",422],["T_VARIABLE","$entityClass",422],["T_WHITESPACE"," ",422],"=",["T_WHITESPACE"," ",422],["T_CONSTANT_ENCAPSED_STRING","'Zend_Service_WindowsAzure_Storage_DynamicTableEntity'",422],")",["T_WHITESPACE","\n\t",422],"{",["T_WHITESPACE","\n\t\t",423],["T_IF","if",424],["T_WHITESPACE"," ",424],"(",["T_STRING","is_null",424],"(",["T_VARIABLE","$tableName",424],")",["T_WHITESPACE"," ",424],["T_BOOLEAN_OR","||",424],["T_WHITESPACE"," ",424],["T_VARIABLE","$tableName",424],["T_WHITESPACE"," ",424],["T_IS_IDENTICAL","===",424],["T_WHITESPACE"," ",424],["T_CONSTANT_ENCAPSED_STRING","''",424],")",["T_WHITESPACE"," ",424],"{",["T_WHITESPACE","\n\t\t\t",424],["T_COMMENT","#require_once 'Zend\/Service\/WindowsAzure\/Exception.php';\n",425],["T_WHITESPACE","\t\t\t",426],["T_THROW","throw",426],["T_WHITESPACE"," ",426],["T_NEW","new",426],["T_WHITESPACE"," ",426],["T_STRING","Zend_Service_WindowsAzure_Exception",426],"(",["T_CONSTANT_ENCAPSED_STRING","'Table name is not specified.'",426],")",";",["T_WHITESPACE","\n\t\t",426],"}",["T_WHITESPACE","\n\t\t",427],["T_IF","if",428],["T_WHITESPACE"," ",428],"(",["T_STRING","is_null",428],"(",["T_VARIABLE","$partitionKey",428],")",["T_WHITESPACE"," ",428],["T_BOOLEAN_OR","||",428],["T_WHITESPACE"," ",428],["T_VARIABLE","$partitionKey",428],["T_WHITESPACE"," ",428],["T_IS_IDENTICAL","===",428],["T_WHITESPACE"," ",428],["T_CONSTANT_ENCAPSED_STRING","''",428],")",["T_WHITESPACE"," ",428],"{",["T_WHITESPACE","\n\t\t\t",428],["T_COMMENT","#require_once 'Zend\/Service\/WindowsAzure\/Exception.php';\n",429],["T_WHITESPACE","\t\t\t",430],["T_THROW","throw",430],["T_WHITESPACE"," ",430],["T_NEW","new",430],["T_WHITESPACE"," ",430],["T_STRING","Zend_Service_WindowsAzure_Exception",430],"(",["T_CONSTANT_ENCAPSED_STRING","'Partition key is not specified.'",430],")",";",["T_WHITESPACE","\n\t\t",430],"}",["T_WHITESPACE","\n\t\t",431],["T_IF","if",432],["T_WHITESPACE"," ",432],"(",["T_STRING","is_null",432],"(",["T_VARIABLE","$rowKey",432],")",["T_WHITESPACE"," ",432],["T_BOOLEAN_OR","||",432],["T_WHITESPACE"," ",432],["T_VARIABLE","$rowKey",432],["T_WHITESPACE"," ",432],["T_IS_IDENTICAL","===",432],["T_WHITESPACE"," ",432],["T_CONSTANT_ENCAPSED_STRING","''",432],")",["T_WHITESPACE"," ",432],"{",["T_WHITESPACE","\n\t\t\t",432],["T_COMMENT","#require_once 'Zend\/Service\/WindowsAzure\/Exception.php';\n",433],["T_WHITESPACE","\t\t\t",434],["T_THROW","throw",434],["T_WHITESPACE"," ",434],["T_NEW","new",434],["T_WHITESPACE"," ",434],["T_STRING","Zend_Service_WindowsAzure_Exception",434],"(",["T_CONSTANT_ENCAPSED_STRING","'Row key is not specified.'",434],")",";",["T_WHITESPACE","\n\t\t",434],"}",["T_WHITESPACE","\n\t\t",435],["T_IF","if",436],["T_WHITESPACE"," ",436],"(",["T_STRING","is_null",436],"(",["T_VARIABLE","$entityClass",436],")",["T_WHITESPACE"," ",436],["T_BOOLEAN_OR","||",436],["T_WHITESPACE"," ",436],["T_VARIABLE","$entityClass",436],["T_WHITESPACE"," ",436],["T_IS_IDENTICAL","===",436],["T_WHITESPACE"," ",436],["T_CONSTANT_ENCAPSED_STRING","''",436],")",["T_WHITESPACE"," ",436],"{",["T_WHITESPACE","\n\t\t\t",436],["T_COMMENT","#require_once 'Zend\/Service\/WindowsAzure\/Exception.php';\n",437],["T_WHITESPACE","\t\t\t",438],["T_THROW","throw",438],["T_WHITESPACE"," ",438],["T_NEW","new",438],["T_WHITESPACE"," ",438],["T_STRING","Zend_Service_WindowsAzure_Exception",438],"(",["T_CONSTANT_ENCAPSED_STRING","'Entity class is not specified.'",438],")",";",["T_WHITESPACE","\n\t\t",438],"}",["T_WHITESPACE","\n\n\t\t\t\n\t\t",439],["T_COMMENT","\/\/ Check for combined size of partition key and row key\n",442],["T_WHITESPACE","\t\t",443],["T_COMMENT","\/\/ http:\/\/msdn.microsoft.com\/en-us\/library\/dd179421.aspx\n",443],["T_WHITESPACE","\t\t",444],["T_IF","if",444],["T_WHITESPACE"," ",444],"(",["T_STRING","strlen",444],"(",["T_VARIABLE","$partitionKey",444],["T_WHITESPACE"," ",444],".",["T_WHITESPACE"," ",444],["T_VARIABLE","$rowKey",444],")",["T_WHITESPACE"," ",444],["T_IS_GREATER_OR_EQUAL",">=",444],["T_WHITESPACE"," ",444],["T_LNUMBER","256",444],")",["T_WHITESPACE"," ",444],"{",["T_WHITESPACE","\n\t\t    ",444],["T_COMMENT","\/\/ Start a batch if possible\n",445],["T_WHITESPACE","\t\t    ",446],["T_IF","if",446],["T_WHITESPACE"," ",446],"(",["T_VARIABLE","$this",446],["T_OBJECT_OPERATOR","->",446],["T_STRING","isInBatch",446],"(",")",")",["T_WHITESPACE"," ",446],"{",["T_WHITESPACE","\n\t\t\t\t",446],["T_COMMENT","#require_once 'Zend\/Service\/WindowsAzure\/Exception.php';\n",447],["T_WHITESPACE","\t\t        ",448],["T_THROW","throw",448],["T_WHITESPACE"," ",448],["T_NEW","new",448],["T_WHITESPACE"," ",448],["T_STRING","Zend_Service_WindowsAzure_Exception",448],"(",["T_CONSTANT_ENCAPSED_STRING","'Entity cannot be retrieved. A transaction is required to retrieve the entity, but another transaction is already active.'",448],")",";",["T_WHITESPACE","\n\t\t    ",448],"}",["T_WHITESPACE","\n\t\t        \n\t\t    ",449],["T_VARIABLE","$this",451],["T_OBJECT_OPERATOR","->",451],["T_STRING","startBatch",451],"(",")",";",["T_WHITESPACE","\n\t\t",451],"}",["T_WHITESPACE","\n\t\t\n\t\t",452],["T_COMMENT","\/\/ Fetch entities from Azure\n",454],["T_WHITESPACE","        ",455],["T_VARIABLE","$result",455],["T_WHITESPACE"," ",455],"=",["T_WHITESPACE"," ",455],["T_VARIABLE","$this",455],["T_OBJECT_OPERATOR","->",455],["T_STRING","retrieveEntities",455],"(",["T_WHITESPACE","\n            ",455],["T_VARIABLE","$this",456],["T_OBJECT_OPERATOR","->",456],["T_STRING","select",456],"(",")",["T_WHITESPACE","\n                 ",456],["T_OBJECT_OPERATOR","->",457],["T_STRING","from",457],"(",["T_VARIABLE","$tableName",457],")",["T_WHITESPACE","\n                 ",457],["T_OBJECT_OPERATOR","->",458],["T_STRING","wherePartitionKey",458],"(",["T_VARIABLE","$partitionKey",458],")",["T_WHITESPACE","\n                 ",458],["T_OBJECT_OPERATOR","->",459],["T_STRING","whereRowKey",459],"(",["T_VARIABLE","$rowKey",459],")",",",["T_WHITESPACE","\n            ",459],["T_CONSTANT_ENCAPSED_STRING","''",460],",",["T_WHITESPACE","\n            ",460],["T_VARIABLE","$entityClass",461],["T_WHITESPACE","\n        ",461],")",";",["T_WHITESPACE","\n        \n        ",462],["T_COMMENT","\/\/ Return\n",464],["T_WHITESPACE","        ",465],["T_IF","if",465],["T_WHITESPACE"," ",465],"(",["T_STRING","count",465],"(",["T_VARIABLE","$result",465],")",["T_WHITESPACE"," ",465],["T_IS_EQUAL","==",465],["T_WHITESPACE"," ",465],["T_LNUMBER","1",465],")",["T_WHITESPACE"," ",465],"{",["T_WHITESPACE","\n            ",465],["T_RETURN","return",466],["T_WHITESPACE"," ",466],["T_VARIABLE","$result",466],"[",["T_LNUMBER","0",466],"]",";",["T_WHITESPACE","\n        ",466],"}",["T_WHITESPACE","\n        \n        ",467],["T_RETURN","return",469],["T_WHITESPACE"," ",469],["T_STRING","null",469],";",["T_WHITESPACE","\n\t",469],"}",["T_WHITESPACE","\n\t\n\t",470],["T_DOC_COMMENT","\/**\n\t * Create a new Zend_Service_WindowsAzure_Storage_TableEntityQuery\n\t * \n\t * @return Zend_Service_WindowsAzure_Storage_TableEntityQuery\n\t *\/",472],["T_WHITESPACE","\n\t",476],["T_PUBLIC","public",477],["T_WHITESPACE"," ",477],["T_FUNCTION","function",477],["T_WHITESPACE"," ",477],["T_STRING","select",477],"(",")",["T_WHITESPACE","\n\t",477],"{",["T_WHITESPACE","\n            \n\t    ",478],["T_RETURN","return",480],["T_WHITESPACE"," ",480],["T_NEW","new",480],["T_WHITESPACE"," ",480],["T_STRING","Zend_Service_WindowsAzure_Storage_TableEntityQuery",480],"(",")",";",["T_WHITESPACE","\n\t",480],"}",["T_WHITESPACE","\n\t\n\t",481],["T_DOC_COMMENT","\/**\n\t * Retrieve entities from table\n\t * \n\t * @param string $tableName|Zend_Service_WindowsAzure_Storage_TableEntityQuery    Table name -or- Zend_Service_WindowsAzure_Storage_TableEntityQuery instance\n\t * @param string $filter                                                Filter condition (not applied when $tableName is a Zend_Service_WindowsAzure_Storage_TableEntityQuery instance)\n\t * @param string $entityClass                                           Entity class name\n\t * @param string $nextPartitionKey                                      Next partition key, used for listing entities when total amount of entities is > 1000.\n\t * @param string $nextRowKey                                            Next row key, used for listing entities when total amount of entities is > 1000.\n\t * @return array Array of Zend_Service_WindowsAzure_Storage_TableEntity\n\t * @throws Zend_Service_WindowsAzure_Exception\n\t *\/",483],["T_WHITESPACE","\n\t",493],["T_PUBLIC","public",494],["T_WHITESPACE"," ",494],["T_FUNCTION","function",494],["T_WHITESPACE"," ",494],["T_STRING","retrieveEntities",494],"(",["T_VARIABLE","$tableName",494],["T_WHITESPACE"," ",494],"=",["T_WHITESPACE"," ",494],["T_CONSTANT_ENCAPSED_STRING","''",494],",",["T_WHITESPACE"," ",494],["T_VARIABLE","$filter",494],["T_WHITESPACE"," ",494],"=",["T_WHITESPACE"," ",494],["T_CONSTANT_ENCAPSED_STRING","''",494],",",["T_WHITESPACE"," ",494],["T_VARIABLE","$entityClass",494],["T_WHITESPACE"," ",494],"=",["T_WHITESPACE"," ",494],["T_CONSTANT_ENCAPSED_STRING","'Zend_Service_WindowsAzure_Storage_DynamicTableEntity'",494],",",["T_WHITESPACE"," ",494],["T_VARIABLE","$nextPartitionKey",494],["T_WHITESPACE"," ",494],"=",["T_WHITESPACE"," ",494],["T_STRING","null",494],",",["T_WHITESPACE"," ",494],["T_VARIABLE","$nextRowKey",494],["T_WHITESPACE"," ",494],"=",["T_WHITESPACE"," ",494],["T_STRING","null",494],")",["T_WHITESPACE","\n\t",494],"{",["T_WHITESPACE","\n\t\t",495],["T_IF","if",496],["T_WHITESPACE"," ",496],"(",["T_VARIABLE","$tableName",496],["T_WHITESPACE"," ",496],["T_IS_IDENTICAL","===",496],["T_WHITESPACE"," ",496],["T_CONSTANT_ENCAPSED_STRING","''",496],")",["T_WHITESPACE"," ",496],"{",["T_WHITESPACE","\n\t\t\t",496],["T_COMMENT","#require_once 'Zend\/Service\/WindowsAzure\/Exception.php';\n",497],["T_WHITESPACE","\t\t\t",498],["T_THROW","throw",498],["T_WHITESPACE"," ",498],["T_NEW","new",498],["T_WHITESPACE"," ",498],["T_STRING","Zend_Service_WindowsAzure_Exception",498],"(",["T_CONSTANT_ENCAPSED_STRING","'Table name is not specified.'",498],")",";",["T_WHITESPACE","\n\t\t",498],"}",["T_WHITESPACE","\n\t\t",499],["T_IF","if",500],["T_WHITESPACE"," ",500],"(",["T_VARIABLE","$entityClass",500],["T_WHITESPACE"," ",500],["T_IS_IDENTICAL","===",500],["T_WHITESPACE"," ",500],["T_CONSTANT_ENCAPSED_STRING","''",500],")",["T_WHITESPACE"," ",500],"{",["T_WHITESPACE","\n\t\t\t",500],["T_COMMENT","#require_once 'Zend\/Service\/WindowsAzure\/Exception.php';\n",501],["T_WHITESPACE","\t\t\t",502],["T_THROW","throw",502],["T_WHITESPACE"," ",502],["T_NEW","new",502],["T_WHITESPACE"," ",502],["T_STRING","Zend_Service_WindowsAzure_Exception",502],"(",["T_CONSTANT_ENCAPSED_STRING","'Entity class is not specified.'",502],")",";",["T_WHITESPACE","\n\t\t",502],"}",["T_WHITESPACE","\n\n\t\t",503],["T_COMMENT","\/\/ Convenience...\n",505],["T_WHITESPACE","\t\t",506],["T_IF","if",506],["T_WHITESPACE"," ",506],"(",["T_STRING","class_exists",506],"(",["T_VARIABLE","$filter",506],")",")",["T_WHITESPACE"," ",506],"{",["T_WHITESPACE","\n\t\t    ",506],["T_VARIABLE","$entityClass",507],["T_WHITESPACE"," ",507],"=",["T_WHITESPACE"," ",507],["T_VARIABLE","$filter",507],";",["T_WHITESPACE","\n\t\t    ",507],["T_VARIABLE","$filter",508],["T_WHITESPACE"," ",508],"=",["T_WHITESPACE"," ",508],["T_CONSTANT_ENCAPSED_STRING","''",508],";",["T_WHITESPACE","\n\t\t",508],"}",["T_WHITESPACE","\n\t\t\t\n\t\t",509],["T_COMMENT","\/\/ Query string\n",511],["T_WHITESPACE","\t\t",512],["T_VARIABLE","$queryString",512],["T_WHITESPACE"," ",512],"=",["T_WHITESPACE"," ",512],["T_CONSTANT_ENCAPSED_STRING","''",512],";",["T_WHITESPACE","\n\n\t\t",512],["T_COMMENT","\/\/ Determine query\n",514],["T_WHITESPACE","\t\t",515],["T_IF","if",515],["T_WHITESPACE"," ",515],"(",["T_STRING","is_string",515],"(",["T_VARIABLE","$tableName",515],")",")",["T_WHITESPACE"," ",515],"{",["T_WHITESPACE","\n\t\t    ",515],["T_COMMENT","\/\/ Option 1: $tableName is a string\n",516],["T_WHITESPACE","\t\t    \n\t\t    ",517],["T_COMMENT","\/\/ Append parentheses\n",518],["T_WHITESPACE","\t\t    ",519],["T_IF","if",519],["T_WHITESPACE"," ",519],"(",["T_STRING","strpos",519],"(",["T_VARIABLE","$tableName",519],",",["T_WHITESPACE"," ",519],["T_CONSTANT_ENCAPSED_STRING","'()'",519],")",["T_WHITESPACE"," ",519],["T_IS_IDENTICAL","===",519],["T_WHITESPACE"," ",519],["T_STRING","false",519],")",["T_WHITESPACE"," ",519],"{",["T_WHITESPACE","\n\t\t    \t",519],["T_VARIABLE","$tableName",520],["T_WHITESPACE"," ",520],["T_CONCAT_EQUAL",".=",520],["T_WHITESPACE"," ",520],["T_CONSTANT_ENCAPSED_STRING","'()'",520],";",["T_WHITESPACE","\n\t\t    ",520],"}",["T_WHITESPACE","\n\t\t    \n    \t    ",521],["T_COMMENT","\/\/ Build query\n",523],["T_WHITESPACE","    \t    ",524],["T_VARIABLE","$query",524],["T_WHITESPACE"," ",524],"=",["T_WHITESPACE"," ",524],["T_ARRAY","array",524],"(",")",";",["T_WHITESPACE","\n    \t    \n    \t\t",524],["T_COMMENT","\/\/ Filter?\n",526],["T_WHITESPACE","    \t\t",527],["T_IF","if",527],["T_WHITESPACE"," ",527],"(",["T_VARIABLE","$filter",527],["T_WHITESPACE"," ",527],["T_IS_NOT_IDENTICAL","!==",527],["T_WHITESPACE"," ",527],["T_CONSTANT_ENCAPSED_STRING","''",527],")",["T_WHITESPACE"," ",527],"{",["T_WHITESPACE","\n    \t\t    ",527],["T_VARIABLE","$query",528],"[","]",["T_WHITESPACE"," ",528],"=",["T_WHITESPACE"," ",528],["T_CONSTANT_ENCAPSED_STRING","'$filter='",528],["T_WHITESPACE"," ",528],".",["T_WHITESPACE"," ",528],["T_STRING","Zend_Service_WindowsAzure_Storage_TableEntityQuery",528],["T_DOUBLE_COLON","::",528],["T_STRING","encodeQuery",528],"(",["T_VARIABLE","$filter",528],")",";",["T_WHITESPACE","\n    \t\t",528],"}",["T_WHITESPACE","\n    \t\t    \n    \t    ",529],["T_COMMENT","\/\/ Build queryString\n",531],["T_WHITESPACE","    \t    ",532],["T_IF","if",532],["T_WHITESPACE"," ",532],"(",["T_STRING","count",532],"(",["T_VARIABLE","$query",532],")",["T_WHITESPACE"," ",532],">",["T_WHITESPACE"," ",532],["T_LNUMBER","0",532],")",["T_WHITESPACE","  ",532],"{",["T_WHITESPACE","\n    \t        ",532],["T_VARIABLE","$queryString",533],["T_WHITESPACE"," ",533],"=",["T_WHITESPACE"," ",533],["T_CONSTANT_ENCAPSED_STRING","'?'",533],["T_WHITESPACE"," ",533],".",["T_WHITESPACE"," ",533],["T_STRING","implode",533],"(",["T_CONSTANT_ENCAPSED_STRING","'&'",533],",",["T_WHITESPACE"," ",533],["T_VARIABLE","$query",533],")",";",["T_WHITESPACE","\n    \t    ",533],"}",["T_WHITESPACE","\n\t\t",534],"}",["T_WHITESPACE"," ",535],["T_ELSE","else",535],["T_WHITESPACE"," ",535],["T_IF","if",535],["T_WHITESPACE"," ",535],"(",["T_STRING","get_class",535],"(",["T_VARIABLE","$tableName",535],")",["T_WHITESPACE"," ",535],["T_IS_EQUAL","==",535],["T_WHITESPACE"," ",535],["T_CONSTANT_ENCAPSED_STRING","'Zend_Service_WindowsAzure_Storage_TableEntityQuery'",535],")",["T_WHITESPACE"," ",535],"{",["T_WHITESPACE","\n\t\t    ",535],["T_COMMENT","\/\/ Option 2: $tableName is a Zend_Service_WindowsAzure_Storage_TableEntityQuery instance\n",536],["T_WHITESPACE","\n\t\t    ",537],["T_COMMENT","\/\/ Build queryString\n",538],["T_WHITESPACE","\t\t    ",539],["T_VARIABLE","$queryString",539],["T_WHITESPACE"," ",539],"=",["T_WHITESPACE"," ",539],["T_VARIABLE","$tableName",539],["T_OBJECT_OPERATOR","->",539],["T_STRING","assembleQueryString",539],"(",["T_STRING","true",539],")",";",["T_WHITESPACE","\n\n\t\t    ",539],["T_COMMENT","\/\/ Change $tableName\n",541],["T_WHITESPACE","\t\t    ",542],["T_VARIABLE","$tableName",542],["T_WHITESPACE"," ",542],"=",["T_WHITESPACE"," ",542],["T_VARIABLE","$tableName",542],["T_OBJECT_OPERATOR","->",542],["T_STRING","assembleFrom",542],"(",["T_STRING","true",542],")",";",["T_WHITESPACE","\n\t\t",542],"}",["T_WHITESPACE"," ",543],["T_ELSE","else",543],["T_WHITESPACE"," ",543],"{",["T_WHITESPACE","\n\t\t\t",543],["T_COMMENT","#require_once 'Zend\/Service\/WindowsAzure\/Exception.php';\n",544],["T_WHITESPACE","\t\t    ",545],["T_THROW","throw",545],["T_WHITESPACE"," ",545],["T_NEW","new",545],["T_WHITESPACE"," ",545],["T_STRING","Zend_Service_WindowsAzure_Exception",545],"(",["T_CONSTANT_ENCAPSED_STRING","'Invalid argument: $tableName'",545],")",";",["T_WHITESPACE","\n\t\t",545],"}",["T_WHITESPACE","\n\t\t\n\t\t",546],["T_COMMENT","\/\/ Add continuation querystring parameters?\n",548],["T_WHITESPACE","\t\t",549],["T_IF","if",549],["T_WHITESPACE"," ",549],"(","!",["T_STRING","is_null",549],"(",["T_VARIABLE","$nextPartitionKey",549],")",["T_WHITESPACE"," ",549],["T_BOOLEAN_AND","&&",549],["T_WHITESPACE"," ",549],"!",["T_STRING","is_null",549],"(",["T_VARIABLE","$nextRowKey",549],")",")",["T_WHITESPACE"," ",549],"{",["T_WHITESPACE","\n\t\t    ",549],["T_IF","if",550],["T_WHITESPACE"," ",550],"(",["T_VARIABLE","$queryString",550],["T_WHITESPACE"," ",550],["T_IS_NOT_IDENTICAL","!==",550],["T_WHITESPACE"," ",550],["T_CONSTANT_ENCAPSED_STRING","''",550],")",["T_WHITESPACE"," ",550],"{",["T_WHITESPACE","\n\t\t        ",550],["T_VARIABLE","$queryString",551],["T_WHITESPACE"," ",551],["T_CONCAT_EQUAL",".=",551],["T_WHITESPACE"," ",551],["T_CONSTANT_ENCAPSED_STRING","'&'",551],";",["T_WHITESPACE","\n\t\t    ",551],"}",["T_WHITESPACE"," ",552],["T_ELSE","else",552],["T_WHITESPACE"," ",552],"{",["T_WHITESPACE","\n\t\t    \t",552],["T_VARIABLE","$queryString",553],["T_WHITESPACE"," ",553],["T_CONCAT_EQUAL",".=",553],["T_WHITESPACE"," ",553],["T_CONSTANT_ENCAPSED_STRING","'?'",553],";",["T_WHITESPACE","\n\t\t    ",553],"}",["T_WHITESPACE","\n\t\t        \n\t\t    ",554],["T_VARIABLE","$queryString",556],["T_WHITESPACE"," ",556],["T_CONCAT_EQUAL",".=",556],["T_WHITESPACE"," ",556],["T_CONSTANT_ENCAPSED_STRING","'NextPartitionKey='",556],["T_WHITESPACE"," ",556],".",["T_WHITESPACE"," ",556],["T_STRING","rawurlencode",556],"(",["T_VARIABLE","$nextPartitionKey",556],")",["T_WHITESPACE"," ",556],".",["T_WHITESPACE"," ",556],["T_CONSTANT_ENCAPSED_STRING","'&NextRowKey='",556],["T_WHITESPACE"," ",556],".",["T_WHITESPACE"," ",556],["T_STRING","rawurlencode",556],"(",["T_VARIABLE","$nextRowKey",556],")",";",["T_WHITESPACE","\n\t\t",556],"}",["T_WHITESPACE","\n\n\t\t",557],["T_COMMENT","\/\/ Perform request\n",559],["T_WHITESPACE","\t    ",560],["T_VARIABLE","$response",560],["T_WHITESPACE"," ",560],"=",["T_WHITESPACE"," ",560],["T_STRING","null",560],";",["T_WHITESPACE","\n\t    ",560],["T_IF","if",561],["T_WHITESPACE"," ",561],"(",["T_VARIABLE","$this",561],["T_OBJECT_OPERATOR","->",561],["T_STRING","isInBatch",561],"(",")",["T_WHITESPACE"," ",561],["T_BOOLEAN_AND","&&",561],["T_WHITESPACE"," ",561],["T_VARIABLE","$this",561],["T_OBJECT_OPERATOR","->",561],["T_STRING","getCurrentBatch",561],"(",")",["T_OBJECT_OPERATOR","->",561],["T_STRING","getOperationCount",561],"(",")",["T_WHITESPACE"," ",561],["T_IS_EQUAL","==",561],["T_WHITESPACE"," ",561],["T_LNUMBER","0",561],")",["T_WHITESPACE"," ",561],"{",["T_WHITESPACE","\n\t\t    ",561],["T_VARIABLE","$this",562],["T_OBJECT_OPERATOR","->",562],["T_STRING","getCurrentBatch",562],"(",")",["T_OBJECT_OPERATOR","->",562],["T_STRING","enlistOperation",562],"(",["T_VARIABLE","$tableName",562],",",["T_WHITESPACE"," ",562],["T_VARIABLE","$queryString",562],",",["T_WHITESPACE"," ",562],["T_STRING","Zend_Http_Client",562],["T_DOUBLE_COLON","::",562],["T_STRING","GET",562],",",["T_WHITESPACE"," ",562],["T_ARRAY","array",562],"(",")",",",["T_WHITESPACE"," ",562],["T_STRING","true",562],",",["T_WHITESPACE"," ",562],["T_STRING","null",562],")",";",["T_WHITESPACE","\n\t\t    ",562],["T_VARIABLE","$response",563],["T_WHITESPACE"," ",563],"=",["T_WHITESPACE"," ",563],["T_VARIABLE","$this",563],["T_OBJECT_OPERATOR","->",563],["T_STRING","getCurrentBatch",563],"(",")",["T_OBJECT_OPERATOR","->",563],["T_STRING","commit",563],"(",")",";",["T_WHITESPACE","\n\t\t    \n\t\t    ",563],["T_COMMENT","\/\/ Get inner response (multipart)\n",565],["T_WHITESPACE","\t\t    ",566],["T_VARIABLE","$innerResponse",566],["T_WHITESPACE"," ",566],"=",["T_WHITESPACE"," ",566],["T_VARIABLE","$response",566],["T_OBJECT_OPERATOR","->",566],["T_STRING","getBody",566],"(",")",";",["T_WHITESPACE","\n\t\t    ",566],["T_VARIABLE","$innerResponse",567],["T_WHITESPACE"," ",567],"=",["T_WHITESPACE"," ",567],["T_STRING","substr",567],"(",["T_VARIABLE","$innerResponse",567],",",["T_WHITESPACE"," ",567],["T_STRING","strpos",567],"(",["T_VARIABLE","$innerResponse",567],",",["T_WHITESPACE"," ",567],["T_CONSTANT_ENCAPSED_STRING","'HTTP\/1.1 200 OK'",567],")",")",";",["T_WHITESPACE","\n\t\t    ",567],["T_VARIABLE","$innerResponse",568],["T_WHITESPACE"," ",568],"=",["T_WHITESPACE"," ",568],["T_STRING","substr",568],"(",["T_VARIABLE","$innerResponse",568],",",["T_WHITESPACE"," ",568],["T_LNUMBER","0",568],",",["T_WHITESPACE"," ",568],["T_STRING","strpos",568],"(",["T_VARIABLE","$innerResponse",568],",",["T_WHITESPACE"," ",568],["T_CONSTANT_ENCAPSED_STRING","'--batchresponse'",568],")",")",";",["T_WHITESPACE","\n\t\t    ",568],["T_VARIABLE","$response",569],["T_WHITESPACE"," ",569],"=",["T_WHITESPACE"," ",569],["T_STRING","Zend_Http_Response",569],["T_DOUBLE_COLON","::",569],["T_STRING","fromString",569],"(",["T_VARIABLE","$innerResponse",569],")",";",["T_WHITESPACE","\n\t\t",569],"}",["T_WHITESPACE"," ",570],["T_ELSE","else",570],["T_WHITESPACE"," ",570],"{",["T_WHITESPACE","\n\t\t    ",570],["T_VARIABLE","$response",571],["T_WHITESPACE"," ",571],"=",["T_WHITESPACE"," ",571],["T_VARIABLE","$this",571],["T_OBJECT_OPERATOR","->",571],["T_STRING","_performRequest",571],"(",["T_VARIABLE","$tableName",571],",",["T_WHITESPACE"," ",571],["T_VARIABLE","$queryString",571],",",["T_WHITESPACE"," ",571],["T_STRING","Zend_Http_Client",571],["T_DOUBLE_COLON","::",571],["T_STRING","GET",571],",",["T_WHITESPACE"," ",571],["T_ARRAY","array",571],"(",")",",",["T_WHITESPACE"," ",571],["T_STRING","true",571],",",["T_WHITESPACE"," ",571],["T_STRING","null",571],")",";",["T_WHITESPACE","\n\t\t",571],"}",["T_WHITESPACE","\n\n\t\t",572],["T_IF","if",574],["T_WHITESPACE"," ",574],"(",["T_VARIABLE","$response",574],["T_OBJECT_OPERATOR","->",574],["T_STRING","isSuccessful",574],"(",")",")",["T_WHITESPACE"," ",574],"{",["T_WHITESPACE","\n\t\t    ",574],["T_COMMENT","\/\/ Parse result\n",575],["T_WHITESPACE","\t\t    ",576],["T_VARIABLE","$result",576],["T_WHITESPACE"," ",576],"=",["T_WHITESPACE"," ",576],["T_VARIABLE","$this",576],["T_OBJECT_OPERATOR","->",576],["T_STRING","_parseResponse",576],"(",["T_VARIABLE","$response",576],")",";",["T_WHITESPACE","\n\t\t    ",576],["T_IF","if",577],["T_WHITESPACE"," ",577],"(","!",["T_VARIABLE","$result",577],")",["T_WHITESPACE"," ",577],"{",["T_WHITESPACE","\n\t\t        ",577],["T_RETURN","return",578],["T_WHITESPACE"," ",578],["T_ARRAY","array",578],"(",")",";",["T_WHITESPACE","\n\t\t    ",578],"}",["T_WHITESPACE","\n\n\t\t    ",579],["T_VARIABLE","$entries",581],["T_WHITESPACE"," ",581],"=",["T_WHITESPACE"," ",581],["T_STRING","null",581],";",["T_WHITESPACE","\n\t\t    ",581],["T_IF","if",582],["T_WHITESPACE"," ",582],"(",["T_VARIABLE","$result",582],["T_OBJECT_OPERATOR","->",582],["T_STRING","entry",582],")",["T_WHITESPACE"," ",582],"{",["T_WHITESPACE","\n    \t\t    ",582],["T_IF","if",583],["T_WHITESPACE"," ",583],"(",["T_STRING","count",583],"(",["T_VARIABLE","$result",583],["T_OBJECT_OPERATOR","->",583],["T_STRING","entry",583],")",["T_WHITESPACE"," ",583],">",["T_WHITESPACE"," ",583],["T_LNUMBER","1",583],")",["T_WHITESPACE"," ",583],"{",["T_WHITESPACE","\n    \t\t        ",583],["T_VARIABLE","$entries",584],["T_WHITESPACE"," ",584],"=",["T_WHITESPACE"," ",584],["T_VARIABLE","$result",584],["T_OBJECT_OPERATOR","->",584],["T_STRING","entry",584],";",["T_WHITESPACE","\n    \t\t    ",584],"}",["T_WHITESPACE"," ",585],["T_ELSE","else",585],["T_WHITESPACE"," ",585],"{",["T_WHITESPACE","\n    \t\t        ",585],["T_VARIABLE","$entries",586],["T_WHITESPACE"," ",586],"=",["T_WHITESPACE"," ",586],["T_ARRAY","array",586],"(",["T_VARIABLE","$result",586],["T_OBJECT_OPERATOR","->",586],["T_STRING","entry",586],")",";",["T_WHITESPACE","\n    \t\t    ",586],"}",["T_WHITESPACE","\n\t\t    ",587],"}",["T_WHITESPACE"," ",588],["T_ELSE","else",588],["T_WHITESPACE"," ",588],"{",["T_WHITESPACE","\n\t\t        ",588],["T_COMMENT","\/\/ This one is tricky... If we have properties defined, we have an entity.\n",589],["T_WHITESPACE","\t\t        ",590],["T_VARIABLE","$properties",590],["T_WHITESPACE"," ",590],"=",["T_WHITESPACE"," ",590],["T_VARIABLE","$result",590],["T_OBJECT_OPERATOR","->",590],["T_STRING","xpath",590],"(",["T_CONSTANT_ENCAPSED_STRING","'\/\/m:properties'",590],")",";",["T_WHITESPACE","\n\t\t        ",590],["T_IF","if",591],["T_WHITESPACE"," ",591],"(",["T_VARIABLE","$properties",591],")",["T_WHITESPACE"," ",591],"{",["T_WHITESPACE","\n\t\t            ",591],["T_VARIABLE","$entries",592],["T_WHITESPACE"," ",592],"=",["T_WHITESPACE"," ",592],["T_ARRAY","array",592],"(",["T_VARIABLE","$result",592],")",";",["T_WHITESPACE","\n\t\t        ",592],"}",["T_WHITESPACE"," ",593],["T_ELSE","else",593],["T_WHITESPACE"," ",593],"{",["T_WHITESPACE","\n\t\t            ",593],["T_RETURN","return",594],["T_WHITESPACE"," ",594],["T_ARRAY","array",594],"(",")",";",["T_WHITESPACE","\n\t\t        ",594],"}",["T_WHITESPACE","\n\t\t    ",595],"}",["T_WHITESPACE","\n\n\t\t    ",596],["T_COMMENT","\/\/ Create return value\n",598],["T_WHITESPACE","\t\t    ",599],["T_VARIABLE","$returnValue",599],["T_WHITESPACE"," ",599],"=",["T_WHITESPACE"," ",599],["T_ARRAY","array",599],"(",")",";",["T_WHITESPACE","\t\t    \n\t\t    ",599],["T_FOREACH","foreach",600],["T_WHITESPACE"," ",600],"(",["T_VARIABLE","$entries",600],["T_WHITESPACE"," ",600],["T_AS","as",600],["T_WHITESPACE"," ",600],["T_VARIABLE","$entry",600],")",["T_WHITESPACE"," ",600],"{",["T_WHITESPACE","\n    \t\t    ",600],["T_COMMENT","\/\/ Parse properties\n",601],["T_WHITESPACE","    \t\t    ",602],["T_VARIABLE","$properties",602],["T_WHITESPACE"," ",602],"=",["T_WHITESPACE"," ",602],["T_VARIABLE","$entry",602],["T_OBJECT_OPERATOR","->",602],["T_STRING","xpath",602],"(",["T_CONSTANT_ENCAPSED_STRING","'.\/\/m:properties'",602],")",";",["T_WHITESPACE","\n    \t\t    ",602],["T_VARIABLE","$properties",603],["T_WHITESPACE"," ",603],"=",["T_WHITESPACE"," ",603],["T_VARIABLE","$properties",603],"[",["T_LNUMBER","0",603],"]",["T_OBJECT_OPERATOR","->",603],["T_STRING","children",603],"(",["T_CONSTANT_ENCAPSED_STRING","'http:\/\/schemas.microsoft.com\/ado\/2007\/08\/dataservices'",603],")",";",["T_WHITESPACE","\n    \t\t    \n    \t\t    ",603],["T_COMMENT","\/\/ Create entity\n",605],["T_WHITESPACE","    \t\t    ",606],["T_VARIABLE","$entity",606],["T_WHITESPACE"," ",606],"=",["T_WHITESPACE"," ",606],["T_NEW","new",606],["T_WHITESPACE"," ",606],["T_VARIABLE","$entityClass",606],"(",["T_CONSTANT_ENCAPSED_STRING","''",606],",",["T_WHITESPACE"," ",606],["T_CONSTANT_ENCAPSED_STRING","''",606],")",";",["T_WHITESPACE","\n    \t\t    ",606],["T_VARIABLE","$entity",607],["T_OBJECT_OPERATOR","->",607],["T_STRING","setAzureValues",607],"(",["T_ARRAY_CAST","(array)",607],["T_VARIABLE","$properties",607],",",["T_WHITESPACE"," ",607],["T_VARIABLE","$this",607],["T_OBJECT_OPERATOR","->",607],["T_STRING","_throwExceptionOnMissingData",607],")",";",["T_WHITESPACE","\n    \t\t    \n    \t\t    ",607],["T_COMMENT","\/\/ If we have a Zend_Service_WindowsAzure_Storage_DynamicTableEntity, make sure all property types are set\n",609],["T_WHITESPACE","    \t\t    ",610],["T_IF","if",610],["T_WHITESPACE"," ",610],"(",["T_VARIABLE","$entity",610],["T_WHITESPACE"," ",610],["T_INSTANCEOF","instanceof",610],["T_WHITESPACE"," ",610],["T_STRING","Zend_Service_WindowsAzure_Storage_DynamicTableEntity",610],")",["T_WHITESPACE"," ",610],"{",["T_WHITESPACE","\n    \t\t        ",610],["T_FOREACH","foreach",611],["T_WHITESPACE"," ",611],"(",["T_VARIABLE","$properties",611],["T_WHITESPACE"," ",611],["T_AS","as",611],["T_WHITESPACE"," ",611],["T_VARIABLE","$key",611],["T_WHITESPACE"," ",611],["T_DOUBLE_ARROW","=>",611],["T_WHITESPACE"," ",611],["T_VARIABLE","$value",611],")",["T_WHITESPACE"," ",611],"{",["T_WHITESPACE","  \n    \t\t            ",611],["T_VARIABLE","$attributes",612],["T_WHITESPACE"," ",612],"=",["T_WHITESPACE"," ",612],["T_VARIABLE","$value",612],["T_OBJECT_OPERATOR","->",612],["T_STRING","attributes",612],"(",["T_CONSTANT_ENCAPSED_STRING","'http:\/\/schemas.microsoft.com\/ado\/2007\/08\/dataservices\/metadata'",612],")",";",["T_WHITESPACE","\n    \t\t            ",612],["T_VARIABLE","$type",613],["T_WHITESPACE"," ",613],"=",["T_WHITESPACE"," ",613],["T_STRING_CAST","(string)",613],["T_VARIABLE","$attributes",613],"[",["T_CONSTANT_ENCAPSED_STRING","'type'",613],"]",";",["T_WHITESPACE","\n    \t\t            ",613],["T_IF","if",614],["T_WHITESPACE"," ",614],"(",["T_VARIABLE","$type",614],["T_WHITESPACE"," ",614],["T_IS_NOT_IDENTICAL","!==",614],["T_WHITESPACE"," ",614],["T_CONSTANT_ENCAPSED_STRING","''",614],")",["T_WHITESPACE"," ",614],"{",["T_WHITESPACE","\n    \t\t            \t",614],["T_VARIABLE","$entity",615],["T_OBJECT_OPERATOR","->",615],["T_STRING","setAzureProperty",615],"(",["T_VARIABLE","$key",615],",",["T_WHITESPACE"," ",615],["T_STRING_CAST","(string)",615],["T_VARIABLE","$value",615],",",["T_WHITESPACE"," ",615],["T_VARIABLE","$type",615],")",";",["T_WHITESPACE","\n    \t\t            ",615],"}",["T_WHITESPACE","\n    \t\t        ",616],"}",["T_WHITESPACE","\n    \t\t    ",617],"}",["T_WHITESPACE","\n    \n    \t\t    ",618],["T_COMMENT","\/\/ Update etag\n",620],["T_WHITESPACE","    \t\t    ",621],["T_VARIABLE","$etag",621],["T_WHITESPACE","      ",621],"=",["T_WHITESPACE"," ",621],["T_VARIABLE","$entry",621],["T_OBJECT_OPERATOR","->",621],["T_STRING","attributes",621],"(",["T_CONSTANT_ENCAPSED_STRING","'http:\/\/schemas.microsoft.com\/ado\/2007\/08\/dataservices\/metadata'",621],")",";",["T_WHITESPACE","\n    \t\t    ",621],["T_VARIABLE","$etag",622],["T_WHITESPACE","      ",622],"=",["T_WHITESPACE"," ",622],["T_STRING_CAST","(string)",622],["T_VARIABLE","$etag",622],"[",["T_CONSTANT_ENCAPSED_STRING","'etag'",622],"]",";",["T_WHITESPACE","\n    \t\t    ",622],["T_VARIABLE","$entity",623],["T_OBJECT_OPERATOR","->",623],["T_STRING","setEtag",623],"(",["T_VARIABLE","$etag",623],")",";",["T_WHITESPACE","\n    \t\t    \n    \t\t    ",623],["T_COMMENT","\/\/ Add to result\n",625],["T_WHITESPACE","    \t\t    ",626],["T_VARIABLE","$returnValue",626],"[","]",["T_WHITESPACE"," ",626],"=",["T_WHITESPACE"," ",626],["T_VARIABLE","$entity",626],";",["T_WHITESPACE","\n\t\t    ",626],"}",["T_WHITESPACE","\n\n\t\t\t",627],["T_COMMENT","\/\/ More entities?\n",629],["T_WHITESPACE","\t\t    ",630],["T_IF","if",630],["T_WHITESPACE"," ",630],"(","!",["T_STRING","is_null",630],"(",["T_VARIABLE","$response",630],["T_OBJECT_OPERATOR","->",630],["T_STRING","getHeader",630],"(",["T_CONSTANT_ENCAPSED_STRING","'x-ms-continuation-NextPartitionKey'",630],")",")",["T_WHITESPACE"," ",630],["T_BOOLEAN_AND","&&",630],["T_WHITESPACE"," ",630],"!",["T_STRING","is_null",630],"(",["T_VARIABLE","$response",630],["T_OBJECT_OPERATOR","->",630],["T_STRING","getHeader",630],"(",["T_CONSTANT_ENCAPSED_STRING","'x-ms-continuation-NextRowKey'",630],")",")",")",["T_WHITESPACE"," ",630],"{",["T_WHITESPACE","\n\t\t        ",630],["T_IF","if",631],["T_WHITESPACE"," ",631],"(",["T_STRING","strpos",631],"(",["T_VARIABLE","$queryString",631],",",["T_WHITESPACE"," ",631],["T_CONSTANT_ENCAPSED_STRING","'$top'",631],")",["T_WHITESPACE"," ",631],["T_IS_IDENTICAL","===",631],["T_WHITESPACE"," ",631],["T_STRING","false",631],")",["T_WHITESPACE"," ",631],"{",["T_WHITESPACE","\n\t\t            ",631],["T_VARIABLE","$returnValue",632],["T_WHITESPACE"," ",632],"=",["T_WHITESPACE"," ",632],["T_STRING","array_merge",632],"(",["T_VARIABLE","$returnValue",632],",",["T_WHITESPACE"," ",632],["T_VARIABLE","$this",632],["T_OBJECT_OPERATOR","->",632],["T_STRING","retrieveEntities",632],"(",["T_VARIABLE","$tableName",632],",",["T_WHITESPACE"," ",632],["T_VARIABLE","$filter",632],",",["T_WHITESPACE"," ",632],["T_VARIABLE","$entityClass",632],",",["T_WHITESPACE"," ",632],["T_VARIABLE","$response",632],["T_OBJECT_OPERATOR","->",632],["T_STRING","getHeader",632],"(",["T_CONSTANT_ENCAPSED_STRING","'x-ms-continuation-NextPartitionKey'",632],")",",",["T_WHITESPACE"," ",632],["T_VARIABLE","$response",632],["T_OBJECT_OPERATOR","->",632],["T_STRING","getHeader",632],"(",["T_CONSTANT_ENCAPSED_STRING","'x-ms-continuation-NextRowKey'",632],")",")",")",";",["T_WHITESPACE","\n\t\t        ",632],"}",["T_WHITESPACE","\n\t\t    ",633],"}",["T_WHITESPACE","\n\t\t    \n\t\t    ",634],["T_COMMENT","\/\/ Return\n",636],["T_WHITESPACE","\t\t    ",637],["T_RETURN","return",637],["T_WHITESPACE"," ",637],["T_VARIABLE","$returnValue",637],";",["T_WHITESPACE","\n\t\t",637],"}",["T_WHITESPACE"," ",638],["T_ELSE","else",638],["T_WHITESPACE"," ",638],"{",["T_WHITESPACE","\n\t\t\t",638],["T_COMMENT","#require_once 'Zend\/Service\/WindowsAzure\/Exception.php';\n",639],["T_WHITESPACE","\t\t    ",640],["T_THROW","throw",640],["T_WHITESPACE"," ",640],["T_NEW","new",640],["T_WHITESPACE"," ",640],["T_STRING","Zend_Service_WindowsAzure_Exception",640],"(",["T_VARIABLE","$this",640],["T_OBJECT_OPERATOR","->",640],["T_STRING","_getErrorMessage",640],"(",["T_VARIABLE","$response",640],",",["T_WHITESPACE"," ",640],["T_CONSTANT_ENCAPSED_STRING","'Resource could not be accessed.'",640],")",")",";",["T_WHITESPACE","\n\t\t",640],"}",["T_WHITESPACE","\n\t",641],"}",["T_WHITESPACE","\n\t\n\t",642],["T_DOC_COMMENT","\/**\n\t * Update entity by replacing it\n\t * \n\t * @param string                              $tableName   Table name\n\t * @param Zend_Service_WindowsAzure_Storage_TableEntity $entity      Entity to update\n\t * @param boolean                             $verifyEtag  Verify etag of the entity (used for concurrency)\n\t * @throws Zend_Service_WindowsAzure_Exception\n\t *\/",644],["T_WHITESPACE","\n\t",651],["T_PUBLIC","public",652],["T_WHITESPACE"," ",652],["T_FUNCTION","function",652],["T_WHITESPACE"," ",652],["T_STRING","updateEntity",652],"(",["T_VARIABLE","$tableName",652],["T_WHITESPACE"," ",652],"=",["T_WHITESPACE"," ",652],["T_CONSTANT_ENCAPSED_STRING","''",652],",",["T_WHITESPACE"," ",652],["T_STRING","Zend_Service_WindowsAzure_Storage_TableEntity",652],["T_WHITESPACE"," ",652],["T_VARIABLE","$entity",652],["T_WHITESPACE"," ",652],"=",["T_WHITESPACE"," ",652],["T_STRING","null",652],",",["T_WHITESPACE"," ",652],["T_VARIABLE","$verifyEtag",652],["T_WHITESPACE"," ",652],"=",["T_WHITESPACE"," ",652],["T_STRING","false",652],")",["T_WHITESPACE","\n\t",652],"{",["T_WHITESPACE","\n\t    ",653],["T_RETURN","return",654],["T_WHITESPACE"," ",654],["T_VARIABLE","$this",654],["T_OBJECT_OPERATOR","->",654],["T_STRING","_changeEntity",654],"(",["T_STRING","Zend_Http_Client",654],["T_DOUBLE_COLON","::",654],["T_STRING","PUT",654],",",["T_WHITESPACE"," ",654],["T_VARIABLE","$tableName",654],",",["T_WHITESPACE"," ",654],["T_VARIABLE","$entity",654],",",["T_WHITESPACE"," ",654],["T_VARIABLE","$verifyEtag",654],")",";",["T_WHITESPACE","\n\t",654],"}",["T_WHITESPACE","\n\t\n\t",655],["T_DOC_COMMENT","\/**\n\t * Update entity by adding or updating properties\n\t * \n\t * @param string                              $tableName   Table name\n\t * @param Zend_Service_WindowsAzure_Storage_TableEntity $entity      Entity to update\n\t * @param boolean                             $verifyEtag  Verify etag of the entity (used for concurrency)\n\t * @param array                               $properties  Properties to merge. All properties will be used when omitted.\n\t * @throws Zend_Service_WindowsAzure_Exception\n\t *\/",657],["T_WHITESPACE","\n\t",665],["T_PUBLIC","public",666],["T_WHITESPACE"," ",666],["T_FUNCTION","function",666],["T_WHITESPACE"," ",666],["T_STRING","mergeEntity",666],"(",["T_VARIABLE","$tableName",666],["T_WHITESPACE"," ",666],"=",["T_WHITESPACE"," ",666],["T_CONSTANT_ENCAPSED_STRING","''",666],",",["T_WHITESPACE"," ",666],["T_STRING","Zend_Service_WindowsAzure_Storage_TableEntity",666],["T_WHITESPACE"," ",666],["T_VARIABLE","$entity",666],["T_WHITESPACE"," ",666],"=",["T_WHITESPACE"," ",666],["T_STRING","null",666],",",["T_WHITESPACE"," ",666],["T_VARIABLE","$verifyEtag",666],["T_WHITESPACE"," ",666],"=",["T_WHITESPACE"," ",666],["T_STRING","false",666],",",["T_WHITESPACE"," ",666],["T_VARIABLE","$properties",666],["T_WHITESPACE"," ",666],"=",["T_WHITESPACE"," ",666],["T_ARRAY","array",666],"(",")",")",["T_WHITESPACE","\n\t",666],"{",["T_WHITESPACE","\n\t\t",667],["T_VARIABLE","$mergeEntity",668],["T_WHITESPACE"," ",668],"=",["T_WHITESPACE"," ",668],["T_STRING","null",668],";",["T_WHITESPACE","\n\t\t",668],["T_IF","if",669],["T_WHITESPACE"," ",669],"(",["T_STRING","is_array",669],"(",["T_VARIABLE","$properties",669],")",["T_WHITESPACE"," ",669],["T_BOOLEAN_AND","&&",669],["T_WHITESPACE"," ",669],["T_STRING","count",669],"(",["T_VARIABLE","$properties",669],")",["T_WHITESPACE"," ",669],">",["T_WHITESPACE"," ",669],["T_LNUMBER","0",669],")",["T_WHITESPACE"," ",669],"{",["T_WHITESPACE","\n\t\t\t\n\t\t\t",669],["T_COMMENT","\/\/ Build a new object\n",671],["T_WHITESPACE","\t\t\t",672],["T_VARIABLE","$mergeEntity",672],["T_WHITESPACE"," ",672],"=",["T_WHITESPACE"," ",672],["T_NEW","new",672],["T_WHITESPACE"," ",672],["T_STRING","Zend_Service_WindowsAzure_Storage_DynamicTableEntity",672],"(",["T_VARIABLE","$entity",672],["T_OBJECT_OPERATOR","->",672],["T_STRING","getPartitionKey",672],"(",")",",",["T_WHITESPACE"," ",672],["T_VARIABLE","$entity",672],["T_OBJECT_OPERATOR","->",672],["T_STRING","getRowKey",672],"(",")",")",";",["T_WHITESPACE","\n\t\t\t\n\t\t\t",672],["T_COMMENT","\/\/ Keep only values mentioned in $properties\n",674],["T_WHITESPACE","\t\t\t",675],["T_VARIABLE","$azureValues",675],["T_WHITESPACE"," ",675],"=",["T_WHITESPACE"," ",675],["T_VARIABLE","$entity",675],["T_OBJECT_OPERATOR","->",675],["T_STRING","getAzureValues",675],"(",")",";",["T_WHITESPACE","\n\t\t\t",675],["T_FOREACH","foreach",676],["T_WHITESPACE"," ",676],"(",["T_VARIABLE","$azureValues",676],["T_WHITESPACE"," ",676],["T_AS","as",676],["T_WHITESPACE"," ",676],["T_VARIABLE","$key",676],["T_WHITESPACE"," ",676],["T_DOUBLE_ARROW","=>",676],["T_WHITESPACE"," ",676],["T_VARIABLE","$value",676],")",["T_WHITESPACE"," ",676],"{",["T_WHITESPACE","\n\t\t\t\t",676],["T_IF","if",677],["T_WHITESPACE"," ",677],"(",["T_STRING","in_array",677],"(",["T_VARIABLE","$value",677],["T_OBJECT_OPERATOR","->",677],["T_STRING","Name",677],",",["T_WHITESPACE"," ",677],["T_VARIABLE","$properties",677],")",")",["T_WHITESPACE"," ",677],"{",["T_WHITESPACE","\n\t\t\t\t\t",677],["T_VARIABLE","$mergeEntity",678],["T_OBJECT_OPERATOR","->",678],["T_STRING","setAzureProperty",678],"(",["T_VARIABLE","$value",678],["T_OBJECT_OPERATOR","->",678],["T_STRING","Name",678],",",["T_WHITESPACE"," ",678],["T_VARIABLE","$value",678],["T_OBJECT_OPERATOR","->",678],["T_STRING","Value",678],",",["T_WHITESPACE"," ",678],["T_VARIABLE","$value",678],["T_OBJECT_OPERATOR","->",678],["T_STRING","Type",678],")",";",["T_WHITESPACE","\n\t\t\t\t",678],"}",["T_WHITESPACE","\n\t\t\t",679],"}",["T_WHITESPACE","\n\t\t",680],"}",["T_WHITESPACE"," ",681],["T_ELSE","else",681],["T_WHITESPACE"," ",681],"{",["T_WHITESPACE","\n\t\t\t",681],["T_VARIABLE","$mergeEntity",682],["T_WHITESPACE"," ",682],"=",["T_WHITESPACE"," ",682],["T_VARIABLE","$entity",682],";",["T_WHITESPACE","\n\t\t",682],"}",["T_WHITESPACE","\n\t\t\n\t\t",683],["T_COMMENT","\/\/ Ensure entity timestamp matches updated timestamp \n",685],["T_WHITESPACE","        ",686],["T_VARIABLE","$entity",686],["T_OBJECT_OPERATOR","->",686],["T_STRING","setTimestamp",686],"(",["T_NEW","new",686],["T_WHITESPACE"," ",686],["T_STRING","DateTime",686],"(",")",")",";",["T_WHITESPACE","\n        \n\t    ",686],["T_RETURN","return",688],["T_WHITESPACE"," ",688],["T_VARIABLE","$this",688],["T_OBJECT_OPERATOR","->",688],["T_STRING","_changeEntity",688],"(",["T_STRING","Zend_Http_Client",688],["T_DOUBLE_COLON","::",688],["T_STRING","MERGE",688],",",["T_WHITESPACE"," ",688],["T_VARIABLE","$tableName",688],",",["T_WHITESPACE"," ",688],["T_VARIABLE","$mergeEntity",688],",",["T_WHITESPACE"," ",688],["T_VARIABLE","$verifyEtag",688],")",";",["T_WHITESPACE","\n\t",688],"}",["T_WHITESPACE","\n\t\n\t",689],["T_DOC_COMMENT","\/**\n\t * Get error message from Zend_Http_Response\n\t * \n\t * @param Zend_Http_Response $response Repsonse\n\t * @param string $alternativeError Alternative error message\n\t * @return string\n\t *\/",691],["T_WHITESPACE","\n\t",697],["T_PROTECTED","protected",698],["T_WHITESPACE"," ",698],["T_FUNCTION","function",698],["T_WHITESPACE"," ",698],["T_STRING","_getErrorMessage",698],"(",["T_STRING","Zend_Http_Response",698],["T_WHITESPACE"," ",698],["T_VARIABLE","$response",698],",",["T_WHITESPACE"," ",698],["T_VARIABLE","$alternativeError",698],["T_WHITESPACE"," ",698],"=",["T_WHITESPACE"," ",698],["T_CONSTANT_ENCAPSED_STRING","'Unknown error.'",698],")",["T_WHITESPACE","\n\t",698],"{",["T_WHITESPACE","\n\t\t",699],["T_VARIABLE","$response",700],["T_WHITESPACE"," ",700],"=",["T_WHITESPACE"," ",700],["T_VARIABLE","$this",700],["T_OBJECT_OPERATOR","->",700],["T_STRING","_parseResponse",700],"(",["T_VARIABLE","$response",700],")",";",["T_WHITESPACE","\n\t\t",700],["T_IF","if",701],["T_WHITESPACE"," ",701],"(",["T_VARIABLE","$response",701],["T_WHITESPACE"," ",701],["T_BOOLEAN_AND","&&",701],["T_WHITESPACE"," ",701],["T_VARIABLE","$response",701],["T_OBJECT_OPERATOR","->",701],["T_STRING","message",701],")",["T_WHITESPACE"," ",701],"{",["T_WHITESPACE","\n\t\t    ",701],["T_RETURN","return",702],["T_WHITESPACE"," ",702],["T_STRING_CAST","(string)",702],["T_VARIABLE","$response",702],["T_OBJECT_OPERATOR","->",702],["T_STRING","message",702],";",["T_WHITESPACE","\n\t\t",702],"}",["T_WHITESPACE"," ",703],["T_ELSE","else",703],["T_WHITESPACE"," ",703],"{",["T_WHITESPACE","\n\t\t    ",703],["T_RETURN","return",704],["T_WHITESPACE"," ",704],["T_VARIABLE","$alternativeError",704],";",["T_WHITESPACE","\n\t\t",704],"}",["T_WHITESPACE","\n\t",705],"}",["T_WHITESPACE","\n\t\n\t",706],["T_DOC_COMMENT","\/**\n\t * Update entity \/ merge entity\n\t * \n\t * @param string                              $httpVerb    HTTP verb to use (PUT = update, MERGE = merge)\n\t * @param string                              $tableName   Table name\n\t * @param Zend_Service_WindowsAzure_Storage_TableEntity $entity      Entity to update\n\t * @param boolean                             $verifyEtag  Verify etag of the entity (used for concurrency)\n\t * @throws Zend_Service_WindowsAzure_Exception\n\t *\/",708],["T_WHITESPACE","\n\t",716],["T_PROTECTED","protected",717],["T_WHITESPACE"," ",717],["T_FUNCTION","function",717],["T_WHITESPACE"," ",717],["T_STRING","_changeEntity",717],"(",["T_VARIABLE","$httpVerb",717],["T_WHITESPACE"," ",717],"=",["T_WHITESPACE"," ",717],["T_STRING","Zend_Http_Client",717],["T_DOUBLE_COLON","::",717],["T_STRING","PUT",717],",",["T_WHITESPACE"," ",717],["T_VARIABLE","$tableName",717],["T_WHITESPACE"," ",717],"=",["T_WHITESPACE"," ",717],["T_CONSTANT_ENCAPSED_STRING","''",717],",",["T_WHITESPACE"," ",717],["T_STRING","Zend_Service_WindowsAzure_Storage_TableEntity",717],["T_WHITESPACE"," ",717],["T_VARIABLE","$entity",717],["T_WHITESPACE"," ",717],"=",["T_WHITESPACE"," ",717],["T_STRING","null",717],",",["T_WHITESPACE"," ",717],["T_VARIABLE","$verifyEtag",717],["T_WHITESPACE"," ",717],"=",["T_WHITESPACE"," ",717],["T_STRING","false",717],")",["T_WHITESPACE","\n\t",717],"{",["T_WHITESPACE","\n\t\t",718],["T_IF","if",719],["T_WHITESPACE"," ",719],"(",["T_VARIABLE","$tableName",719],["T_WHITESPACE"," ",719],["T_IS_IDENTICAL","===",719],["T_WHITESPACE"," ",719],["T_CONSTANT_ENCAPSED_STRING","''",719],")",["T_WHITESPACE"," ",719],"{",["T_WHITESPACE","\n\t\t\t",719],["T_COMMENT","#require_once 'Zend\/Service\/WindowsAzure\/Exception.php';\n",720],["T_WHITESPACE","\t\t\t",721],["T_THROW","throw",721],["T_WHITESPACE"," ",721],["T_NEW","new",721],["T_WHITESPACE"," ",721],["T_STRING","Zend_Service_WindowsAzure_Exception",721],"(",["T_CONSTANT_ENCAPSED_STRING","'Table name is not specified.'",721],")",";",["T_WHITESPACE","\n\t\t",721],"}",["T_WHITESPACE","\n\t\t",722],["T_IF","if",723],["T_WHITESPACE"," ",723],"(",["T_STRING","is_null",723],"(",["T_VARIABLE","$entity",723],")",")",["T_WHITESPACE"," ",723],"{",["T_WHITESPACE","\t\n\t\t\t",723],["T_COMMENT","#require_once 'Zend\/Service\/WindowsAzure\/Exception.php';\n",724],["T_WHITESPACE","\t\t\t",725],["T_THROW","throw",725],["T_WHITESPACE"," ",725],["T_NEW","new",725],["T_WHITESPACE"," ",725],["T_STRING","Zend_Service_WindowsAzure_Exception",725],"(",["T_CONSTANT_ENCAPSED_STRING","'Entity is not specified.'",725],")",";",["T_WHITESPACE","\n\t\t",725],"}",["T_WHITESPACE","\n\t\t                     \n        ",726],["T_COMMENT","\/\/ Add header information\n",728],["T_WHITESPACE","        ",729],["T_VARIABLE","$headers",729],["T_WHITESPACE"," ",729],"=",["T_WHITESPACE"," ",729],["T_ARRAY","array",729],"(",")",";",["T_WHITESPACE","\n        ",729],["T_VARIABLE","$headers",730],"[",["T_CONSTANT_ENCAPSED_STRING","'Content-Type'",730],"]",["T_WHITESPACE","   ",730],"=",["T_WHITESPACE"," ",730],["T_CONSTANT_ENCAPSED_STRING","'application\/atom+xml'",730],";",["T_WHITESPACE","\n        ",730],["T_VARIABLE","$headers",731],"[",["T_CONSTANT_ENCAPSED_STRING","'Content-Length'",731],"]",["T_WHITESPACE"," ",731],"=",["T_WHITESPACE"," ",731],["T_LNUMBER","0",731],";",["T_WHITESPACE","\n        ",731],["T_IF","if",732],["T_WHITESPACE"," ",732],"(","!",["T_VARIABLE","$verifyEtag",732],")",["T_WHITESPACE"," ",732],"{",["T_WHITESPACE","\n            ",732],["T_VARIABLE","$headers",733],"[",["T_CONSTANT_ENCAPSED_STRING","'If-Match'",733],"]",["T_WHITESPACE","       ",733],"=",["T_WHITESPACE"," ",733],["T_CONSTANT_ENCAPSED_STRING","'*'",733],";",["T_WHITESPACE","\n        ",733],"}",["T_WHITESPACE"," ",734],["T_ELSE","else",734],["T_WHITESPACE"," ",734],"{",["T_WHITESPACE","\n            ",734],["T_VARIABLE","$headers",735],"[",["T_CONSTANT_ENCAPSED_STRING","'If-Match'",735],"]",["T_WHITESPACE","       ",735],"=",["T_WHITESPACE"," ",735],["T_VARIABLE","$entity",735],["T_OBJECT_OPERATOR","->",735],["T_STRING","getEtag",735],"(",")",";",["T_WHITESPACE","\n        ",735],"}",["T_WHITESPACE","\n\n\t    ",736],["T_COMMENT","\/\/ Generate request body\n",738],["T_WHITESPACE","\t\t",739],["T_VARIABLE","$requestBody",739],["T_WHITESPACE"," ",739],"=",["T_WHITESPACE"," ",739],["T_CONSTANT_ENCAPSED_STRING","'<?xml version=\"1.0\" encoding=\"utf-8\" standalone=\"yes\"?>\n                        <entry xmlns:d=\"http:\/\/schemas.microsoft.com\/ado\/2007\/08\/dataservices\" xmlns:m=\"http:\/\/schemas.microsoft.com\/ado\/2007\/08\/dataservices\/metadata\" xmlns=\"http:\/\/www.w3.org\/2005\/Atom\">\n                          <title \/>\n                          <updated>{tpl:Updated}<\/updated>\n                          <author>\n                            <name \/>\n                          <\/author>\n                          <id \/>\n                          <content type=\"application\/xml\">\n                            <m:properties>\n                              {tpl:Properties}\n                            <\/m:properties>\n                          <\/content>\n                        <\/entry>'",739],";",["T_WHITESPACE","\n\t\t\n\t\t",752],["T_COMMENT","\/\/ Attempt to get timestamp from entity\n",754],["T_WHITESPACE","        ",755],["T_VARIABLE","$timestamp",755],["T_WHITESPACE"," ",755],"=",["T_WHITESPACE"," ",755],["T_VARIABLE","$entity",755],["T_OBJECT_OPERATOR","->",755],["T_STRING","getTimestamp",755],"(",")",";",["T_WHITESPACE","\n        \n        ",755],["T_VARIABLE","$requestBody",757],["T_WHITESPACE"," ",757],"=",["T_WHITESPACE"," ",757],["T_VARIABLE","$this",757],["T_OBJECT_OPERATOR","->",757],["T_STRING","_fillTemplate",757],"(",["T_VARIABLE","$requestBody",757],",",["T_WHITESPACE"," ",757],["T_ARRAY","array",757],"(",["T_WHITESPACE","\n        \t",757],["T_CONSTANT_ENCAPSED_STRING","'Updated'",758],["T_WHITESPACE","    ",758],["T_DOUBLE_ARROW","=>",758],["T_WHITESPACE"," ",758],["T_VARIABLE","$this",758],["T_OBJECT_OPERATOR","->",758],["T_STRING","_convertToEdmDateTime",758],"(",["T_VARIABLE","$timestamp",758],")",",",["T_WHITESPACE","\n            ",758],["T_CONSTANT_ENCAPSED_STRING","'Properties'",759],["T_WHITESPACE"," ",759],["T_DOUBLE_ARROW","=>",759],["T_WHITESPACE"," ",759],["T_VARIABLE","$this",759],["T_OBJECT_OPERATOR","->",759],["T_STRING","_generateAzureRepresentation",759],"(",["T_VARIABLE","$entity",759],")",["T_WHITESPACE","\n        ",759],")",")",";",["T_WHITESPACE","\n\n        ",760],["T_COMMENT","\/\/ Add header information\n",762],["T_WHITESPACE","        ",763],["T_VARIABLE","$headers",763],["T_WHITESPACE"," ",763],"=",["T_WHITESPACE"," ",763],["T_ARRAY","array",763],"(",")",";",["T_WHITESPACE","\n        ",763],["T_VARIABLE","$headers",764],"[",["T_CONSTANT_ENCAPSED_STRING","'Content-Type'",764],"]",["T_WHITESPACE"," ",764],"=",["T_WHITESPACE"," ",764],["T_CONSTANT_ENCAPSED_STRING","'application\/atom+xml'",764],";",["T_WHITESPACE","\n\t    ",764],["T_IF","if",765],["T_WHITESPACE"," ",765],"(","!",["T_VARIABLE","$verifyEtag",765],")",["T_WHITESPACE"," ",765],"{",["T_WHITESPACE","\n            ",765],["T_VARIABLE","$headers",766],"[",["T_CONSTANT_ENCAPSED_STRING","'If-Match'",766],"]",["T_WHITESPACE","       ",766],"=",["T_WHITESPACE"," ",766],["T_CONSTANT_ENCAPSED_STRING","'*'",766],";",["T_WHITESPACE","\n        ",766],"}",["T_WHITESPACE"," ",767],["T_ELSE","else",767],["T_WHITESPACE"," ",767],"{",["T_WHITESPACE","\n            ",767],["T_VARIABLE","$headers",768],"[",["T_CONSTANT_ENCAPSED_STRING","'If-Match'",768],"]",["T_WHITESPACE","       ",768],"=",["T_WHITESPACE"," ",768],["T_VARIABLE","$entity",768],["T_OBJECT_OPERATOR","->",768],["T_STRING","getEtag",768],"(",")",";",["T_WHITESPACE","\n        ",768],"}",["T_WHITESPACE","\n        \n\t\t",769],["T_COMMENT","\/\/ Perform request\n",771],["T_WHITESPACE","\t\t",772],["T_VARIABLE","$response",772],["T_WHITESPACE"," ",772],"=",["T_WHITESPACE"," ",772],["T_STRING","null",772],";",["T_WHITESPACE","\n\t    ",772],["T_IF","if",773],["T_WHITESPACE"," ",773],"(",["T_VARIABLE","$this",773],["T_OBJECT_OPERATOR","->",773],["T_STRING","isInBatch",773],"(",")",")",["T_WHITESPACE"," ",773],"{",["T_WHITESPACE","\n\t\t    ",773],["T_VARIABLE","$this",774],["T_OBJECT_OPERATOR","->",774],["T_STRING","getCurrentBatch",774],"(",")",["T_OBJECT_OPERATOR","->",774],["T_STRING","enlistOperation",774],"(",["T_VARIABLE","$tableName",774],["T_WHITESPACE"," ",774],".",["T_WHITESPACE"," ",774],["T_CONSTANT_ENCAPSED_STRING","'(PartitionKey=\\''",774],["T_WHITESPACE"," ",774],".",["T_WHITESPACE"," ",774],["T_VARIABLE","$entity",774],["T_OBJECT_OPERATOR","->",774],["T_STRING","getPartitionKey",774],"(",")",["T_WHITESPACE"," ",774],".",["T_WHITESPACE"," ",774],["T_CONSTANT_ENCAPSED_STRING","'\\', RowKey=\\''",774],["T_WHITESPACE"," ",774],".",["T_WHITESPACE"," ",774],["T_VARIABLE","$entity",774],["T_OBJECT_OPERATOR","->",774],["T_STRING","getRowKey",774],"(",")",["T_WHITESPACE"," ",774],".",["T_WHITESPACE"," ",774],["T_CONSTANT_ENCAPSED_STRING","'\\')'",774],",",["T_WHITESPACE"," ",774],["T_CONSTANT_ENCAPSED_STRING","''",774],",",["T_WHITESPACE"," ",774],["T_VARIABLE","$httpVerb",774],",",["T_WHITESPACE"," ",774],["T_VARIABLE","$headers",774],",",["T_WHITESPACE"," ",774],["T_STRING","true",774],",",["T_WHITESPACE"," ",774],["T_VARIABLE","$requestBody",774],")",";",["T_WHITESPACE","\n\t\t    ",774],["T_RETURN","return",775],["T_WHITESPACE"," ",775],["T_STRING","null",775],";",["T_WHITESPACE","\n\t\t",775],"}",["T_WHITESPACE"," ",776],["T_ELSE","else",776],["T_WHITESPACE"," ",776],"{",["T_WHITESPACE","\n\t\t    ",776],["T_VARIABLE","$response",777],["T_WHITESPACE"," ",777],"=",["T_WHITESPACE"," ",777],["T_VARIABLE","$this",777],["T_OBJECT_OPERATOR","->",777],["T_STRING","_performRequest",777],"(",["T_VARIABLE","$tableName",777],["T_WHITESPACE"," ",777],".",["T_WHITESPACE"," ",777],["T_CONSTANT_ENCAPSED_STRING","'(PartitionKey=\\''",777],["T_WHITESPACE"," ",777],".",["T_WHITESPACE"," ",777],["T_VARIABLE","$entity",777],["T_OBJECT_OPERATOR","->",777],["T_STRING","getPartitionKey",777],"(",")",["T_WHITESPACE"," ",777],".",["T_WHITESPACE"," ",777],["T_CONSTANT_ENCAPSED_STRING","'\\', RowKey=\\''",777],["T_WHITESPACE"," ",777],".",["T_WHITESPACE"," ",777],["T_VARIABLE","$entity",777],["T_OBJECT_OPERATOR","->",777],["T_STRING","getRowKey",777],"(",")",["T_WHITESPACE"," ",777],".",["T_WHITESPACE"," ",777],["T_CONSTANT_ENCAPSED_STRING","'\\')'",777],",",["T_WHITESPACE"," ",777],["T_CONSTANT_ENCAPSED_STRING","''",777],",",["T_WHITESPACE"," ",777],["T_VARIABLE","$httpVerb",777],",",["T_WHITESPACE"," ",777],["T_VARIABLE","$headers",777],",",["T_WHITESPACE"," ",777],["T_STRING","true",777],",",["T_WHITESPACE"," ",777],["T_VARIABLE","$requestBody",777],")",";",["T_WHITESPACE","\n\t\t",777],"}",["T_WHITESPACE","\n\t\t",778],["T_IF","if",779],["T_WHITESPACE"," ",779],"(",["T_VARIABLE","$response",779],["T_OBJECT_OPERATOR","->",779],["T_STRING","isSuccessful",779],"(",")",")",["T_WHITESPACE"," ",779],"{",["T_WHITESPACE","\n\t\t    ",779],["T_COMMENT","\/\/ Update properties\n",780],["T_WHITESPACE","\t\t\t",781],["T_VARIABLE","$entity",781],["T_OBJECT_OPERATOR","->",781],["T_STRING","setEtag",781],"(",["T_VARIABLE","$response",781],["T_OBJECT_OPERATOR","->",781],["T_STRING","getHeader",781],"(",["T_CONSTANT_ENCAPSED_STRING","'Etag'",781],")",")",";",["T_WHITESPACE","\n\t\t\t",781],["T_VARIABLE","$entity",782],["T_OBJECT_OPERATOR","->",782],["T_STRING","setTimestamp",782],"(",["T_WHITESPACE"," ",782],["T_VARIABLE","$this",782],["T_OBJECT_OPERATOR","->",782],["T_STRING","_convertToDateTime",782],"(",["T_VARIABLE","$response",782],["T_OBJECT_OPERATOR","->",782],["T_STRING","getHeader",782],"(",["T_CONSTANT_ENCAPSED_STRING","'Last-modified'",782],")",")",["T_WHITESPACE"," ",782],")",";",["T_WHITESPACE","\n\n\t\t    ",782],["T_RETURN","return",784],["T_WHITESPACE"," ",784],["T_VARIABLE","$entity",784],";",["T_WHITESPACE","\n\t\t",784],"}",["T_WHITESPACE"," ",785],["T_ELSE","else",785],["T_WHITESPACE"," ",785],"{",["T_WHITESPACE","\n\t\t\t",785],["T_COMMENT","#require_once 'Zend\/Service\/WindowsAzure\/Exception.php';\n",786],["T_WHITESPACE","\t\t\t",787],["T_THROW","throw",787],["T_WHITESPACE"," ",787],["T_NEW","new",787],["T_WHITESPACE"," ",787],["T_STRING","Zend_Service_WindowsAzure_Exception",787],"(",["T_VARIABLE","$this",787],["T_OBJECT_OPERATOR","->",787],["T_STRING","_getErrorMessage",787],"(",["T_VARIABLE","$response",787],",",["T_WHITESPACE"," ",787],["T_CONSTANT_ENCAPSED_STRING","'Resource could not be accessed.'",787],")",")",";",["T_WHITESPACE","\n\t\t",787],"}",["T_WHITESPACE","\n\t",788],"}",["T_WHITESPACE","\n\t\n\t",789],["T_DOC_COMMENT","\/**\n\t * Generate RFC 1123 compliant date string\n\t * \n\t * @return string\n\t *\/",791],["T_WHITESPACE","\n\t",795],["T_PROTECTED","protected",796],["T_WHITESPACE"," ",796],["T_FUNCTION","function",796],["T_WHITESPACE"," ",796],["T_STRING","_rfcDate",796],"(",")",["T_WHITESPACE","\n\t",796],"{",["T_WHITESPACE","\n\t    ",797],["T_RETURN","return",798],["T_WHITESPACE"," ",798],["T_STRING","gmdate",798],"(",["T_CONSTANT_ENCAPSED_STRING","'D, d M Y H:i:s'",798],",",["T_WHITESPACE"," ",798],["T_STRING","time",798],"(",")",")",["T_WHITESPACE"," ",798],".",["T_WHITESPACE"," ",798],["T_CONSTANT_ENCAPSED_STRING","' GMT'",798],";",["T_WHITESPACE"," ",798],["T_COMMENT","\/\/ RFC 1123\n",798],["T_WHITESPACE","\t",799],"}",["T_WHITESPACE","\n\t\n\t",799],["T_DOC_COMMENT","\/**\n\t * Fill text template with variables from key\/value array\n\t * \n\t * @param string $templateText Template text\n\t * @param array $variables Array containing key\/value pairs\n\t * @return string\n\t *\/",801],["T_WHITESPACE","\n\t",807],["T_PROTECTED","protected",808],["T_WHITESPACE"," ",808],["T_FUNCTION","function",808],["T_WHITESPACE"," ",808],["T_STRING","_fillTemplate",808],"(",["T_VARIABLE","$templateText",808],",",["T_WHITESPACE"," ",808],["T_VARIABLE","$variables",808],["T_WHITESPACE"," ",808],"=",["T_WHITESPACE"," ",808],["T_ARRAY","array",808],"(",")",")",["T_WHITESPACE","\n\t",808],"{",["T_WHITESPACE","\n\t    ",809],["T_FOREACH","foreach",810],["T_WHITESPACE"," ",810],"(",["T_VARIABLE","$variables",810],["T_WHITESPACE"," ",810],["T_AS","as",810],["T_WHITESPACE"," ",810],["T_VARIABLE","$key",810],["T_WHITESPACE"," ",810],["T_DOUBLE_ARROW","=>",810],["T_WHITESPACE"," ",810],["T_VARIABLE","$value",810],")",["T_WHITESPACE"," ",810],"{",["T_WHITESPACE","\n\t        ",810],["T_VARIABLE","$templateText",811],["T_WHITESPACE"," ",811],"=",["T_WHITESPACE"," ",811],["T_STRING","str_replace",811],"(",["T_CONSTANT_ENCAPSED_STRING","'{tpl:'",811],["T_WHITESPACE"," ",811],".",["T_WHITESPACE"," ",811],["T_VARIABLE","$key",811],["T_WHITESPACE"," ",811],".",["T_WHITESPACE"," ",811],["T_CONSTANT_ENCAPSED_STRING","'}'",811],",",["T_WHITESPACE"," ",811],["T_VARIABLE","$value",811],",",["T_WHITESPACE"," ",811],["T_VARIABLE","$templateText",811],")",";",["T_WHITESPACE","\n\t    ",811],"}",["T_WHITESPACE","\n\t    ",812],["T_RETURN","return",813],["T_WHITESPACE"," ",813],["T_VARIABLE","$templateText",813],";",["T_WHITESPACE","\n\t",813],"}",["T_WHITESPACE","\n\t\n\t",814],["T_DOC_COMMENT","\/**\n\t * Generate Azure representation from entity (creates atompub markup from properties)\n\t * \n\t * @param Zend_Service_WindowsAzure_Storage_TableEntity $entity\n\t * @return string\n\t *\/",816],["T_WHITESPACE","\n\t",821],["T_PROTECTED","protected",822],["T_WHITESPACE"," ",822],["T_FUNCTION","function",822],["T_WHITESPACE"," ",822],["T_STRING","_generateAzureRepresentation",822],"(",["T_STRING","Zend_Service_WindowsAzure_Storage_TableEntity",822],["T_WHITESPACE"," ",822],["T_VARIABLE","$entity",822],["T_WHITESPACE"," ",822],"=",["T_WHITESPACE"," ",822],["T_STRING","null",822],")",["T_WHITESPACE","\n\t",822],"{",["T_WHITESPACE","\n\t\t",823],["T_COMMENT","\/\/ Generate Azure representation from entity\n",824],["T_WHITESPACE","\t\t",825],["T_VARIABLE","$azureRepresentation",825],["T_WHITESPACE"," ",825],"=",["T_WHITESPACE"," ",825],["T_ARRAY","array",825],"(",")",";",["T_WHITESPACE","\n\t\t",825],["T_VARIABLE","$azureValues",826],["T_WHITESPACE","         ",826],"=",["T_WHITESPACE"," ",826],["T_VARIABLE","$entity",826],["T_OBJECT_OPERATOR","->",826],["T_STRING","getAzureValues",826],"(",")",";",["T_WHITESPACE","\n\t\t",826],["T_FOREACH","foreach",827],["T_WHITESPACE"," ",827],"(",["T_VARIABLE","$azureValues",827],["T_WHITESPACE"," ",827],["T_AS","as",827],["T_WHITESPACE"," ",827],["T_VARIABLE","$azureValue",827],")",["T_WHITESPACE"," ",827],"{",["T_WHITESPACE","\n\t\t    ",827],["T_VARIABLE","$value",828],["T_WHITESPACE"," ",828],"=",["T_WHITESPACE"," ",828],["T_ARRAY","array",828],"(",")",";",["T_WHITESPACE","\n\t\t    ",828],["T_VARIABLE","$value",829],"[","]",["T_WHITESPACE"," ",829],"=",["T_WHITESPACE"," ",829],["T_CONSTANT_ENCAPSED_STRING","'<d:'",829],["T_WHITESPACE"," ",829],".",["T_WHITESPACE"," ",829],["T_VARIABLE","$azureValue",829],["T_OBJECT_OPERATOR","->",829],["T_STRING","Name",829],";",["T_WHITESPACE","\n\t\t    ",829],["T_IF","if",830],["T_WHITESPACE"," ",830],"(",["T_VARIABLE","$azureValue",830],["T_OBJECT_OPERATOR","->",830],["T_STRING","Type",830],["T_WHITESPACE"," ",830],["T_IS_NOT_EQUAL","!=",830],["T_WHITESPACE"," ",830],["T_CONSTANT_ENCAPSED_STRING","''",830],")",["T_WHITESPACE"," ",830],"{",["T_WHITESPACE","\n\t\t        ",830],["T_VARIABLE","$value",831],"[","]",["T_WHITESPACE"," ",831],"=",["T_WHITESPACE"," ",831],["T_CONSTANT_ENCAPSED_STRING","' m:type=\"'",831],["T_WHITESPACE"," ",831],".",["T_WHITESPACE"," ",831],["T_VARIABLE","$azureValue",831],["T_OBJECT_OPERATOR","->",831],["T_STRING","Type",831],["T_WHITESPACE"," ",831],".",["T_WHITESPACE"," ",831],["T_CONSTANT_ENCAPSED_STRING","'\"'",831],";",["T_WHITESPACE","\n\t\t    ",831],"}",["T_WHITESPACE","\n\t\t    ",832],["T_IF","if",833],["T_WHITESPACE"," ",833],"(",["T_STRING","is_null",833],"(",["T_VARIABLE","$azureValue",833],["T_OBJECT_OPERATOR","->",833],["T_STRING","Value",833],")",")",["T_WHITESPACE"," ",833],"{",["T_WHITESPACE","\n\t\t        ",833],["T_VARIABLE","$value",834],"[","]",["T_WHITESPACE"," ",834],"=",["T_WHITESPACE"," ",834],["T_CONSTANT_ENCAPSED_STRING","' m:null=\"true\"'",834],";",["T_WHITESPACE"," \n\t\t    ",834],"}",["T_WHITESPACE","\n\t\t    ",835],["T_VARIABLE","$value",836],"[","]",["T_WHITESPACE"," ",836],"=",["T_WHITESPACE"," ",836],["T_CONSTANT_ENCAPSED_STRING","'>'",836],";",["T_WHITESPACE","\n\t\t    \n\t\t    ",836],["T_IF","if",838],["T_WHITESPACE"," ",838],"(","!",["T_STRING","is_null",838],"(",["T_VARIABLE","$azureValue",838],["T_OBJECT_OPERATOR","->",838],["T_STRING","Value",838],")",")",["T_WHITESPACE"," ",838],"{",["T_WHITESPACE","\n\t\t        ",838],["T_IF","if",839],["T_WHITESPACE"," ",839],"(",["T_STRING","strtolower",839],"(",["T_VARIABLE","$azureValue",839],["T_OBJECT_OPERATOR","->",839],["T_STRING","Type",839],")",["T_WHITESPACE"," ",839],["T_IS_EQUAL","==",839],["T_WHITESPACE"," ",839],["T_CONSTANT_ENCAPSED_STRING","'edm.boolean'",839],")",["T_WHITESPACE"," ",839],"{",["T_WHITESPACE","\n\t\t            ",839],["T_VARIABLE","$value",840],"[","]",["T_WHITESPACE"," ",840],"=",["T_WHITESPACE"," ",840],"(",["T_VARIABLE","$azureValue",840],["T_OBJECT_OPERATOR","->",840],["T_STRING","Value",840],["T_WHITESPACE"," ",840],["T_IS_EQUAL","==",840],["T_WHITESPACE"," ",840],["T_STRING","true",840],["T_WHITESPACE"," ",840],"?",["T_WHITESPACE"," ",840],["T_CONSTANT_ENCAPSED_STRING","'1'",840],["T_WHITESPACE"," ",840],":",["T_WHITESPACE"," ",840],["T_CONSTANT_ENCAPSED_STRING","'0'",840],")",";",["T_WHITESPACE","\n\t\t        ",840],"}",["T_WHITESPACE"," ",841],["T_ELSE","else",841],["T_WHITESPACE"," ",841],["T_IF","if",841],["T_WHITESPACE"," ",841],"(",["T_STRING","strtolower",841],"(",["T_VARIABLE","$azureValue",841],["T_OBJECT_OPERATOR","->",841],["T_STRING","Type",841],")",["T_WHITESPACE"," ",841],["T_IS_EQUAL","==",841],["T_WHITESPACE"," ",841],["T_CONSTANT_ENCAPSED_STRING","'edm.datetime'",841],")",["T_WHITESPACE"," ",841],"{",["T_WHITESPACE","\n\t\t        \t",841],["T_VARIABLE","$value",842],"[","]",["T_WHITESPACE"," ",842],"=",["T_WHITESPACE"," ",842],["T_VARIABLE","$this",842],["T_OBJECT_OPERATOR","->",842],["T_STRING","_convertToEdmDateTime",842],"(",["T_VARIABLE","$azureValue",842],["T_OBJECT_OPERATOR","->",842],["T_STRING","Value",842],")",";",["T_WHITESPACE","\n\t\t        ",842],"}",["T_WHITESPACE"," ",843],["T_ELSE","else",843],["T_WHITESPACE"," ",843],"{",["T_WHITESPACE","\n\t\t            ",843],["T_VARIABLE","$value",844],"[","]",["T_WHITESPACE"," ",844],"=",["T_WHITESPACE"," ",844],["T_STRING","htmlspecialchars",844],"(",["T_VARIABLE","$azureValue",844],["T_OBJECT_OPERATOR","->",844],["T_STRING","Value",844],")",";",["T_WHITESPACE","\n\t\t        ",844],"}",["T_WHITESPACE","\n\t\t    ",845],"}",["T_WHITESPACE","\n\t\t    \n\t\t    ",846],["T_VARIABLE","$value",848],"[","]",["T_WHITESPACE"," ",848],"=",["T_WHITESPACE"," ",848],["T_CONSTANT_ENCAPSED_STRING","'<\/d:'",848],["T_WHITESPACE"," ",848],".",["T_WHITESPACE"," ",848],["T_VARIABLE","$azureValue",848],["T_OBJECT_OPERATOR","->",848],["T_STRING","Name",848],["T_WHITESPACE"," ",848],".",["T_WHITESPACE"," ",848],["T_CONSTANT_ENCAPSED_STRING","'>'",848],";",["T_WHITESPACE","\n\t\t    ",848],["T_VARIABLE","$azureRepresentation",849],"[","]",["T_WHITESPACE"," ",849],"=",["T_WHITESPACE"," ",849],["T_STRING","implode",849],"(",["T_CONSTANT_ENCAPSED_STRING","''",849],",",["T_WHITESPACE"," ",849],["T_VARIABLE","$value",849],")",";",["T_WHITESPACE","\n\t\t",849],"}",["T_WHITESPACE","\n\n\t\t",850],["T_RETURN","return",852],["T_WHITESPACE"," ",852],["T_STRING","implode",852],"(",["T_CONSTANT_ENCAPSED_STRING","''",852],",",["T_WHITESPACE"," ",852],["T_VARIABLE","$azureRepresentation",852],")",";",["T_WHITESPACE","\n\t",852],"}",["T_WHITESPACE","\n\t\n\t\t",853],["T_DOC_COMMENT","\/**\n\t * Perform request using Zend_Http_Client channel\n\t *\n\t * @param string $path Path\n\t * @param string $queryString Query string\n\t * @param string $httpVerb HTTP verb the request will use\n\t * @param array $headers x-ms headers to add\n\t * @param boolean $forTableStorage Is the request for table storage?\n\t * @param mixed $rawData Optional RAW HTTP data to be sent over the wire\n\t * @param string $resourceType Resource type\n\t * @param string $requiredPermission Required permission\n\t * @return Zend_Http_Response\n\t *\/",855],["T_WHITESPACE","\n\t",867],["T_PROTECTED","protected",868],["T_WHITESPACE"," ",868],["T_FUNCTION","function",868],["T_WHITESPACE"," ",868],["T_STRING","_performRequest",868],"(",["T_WHITESPACE","\n\t\t",868],["T_VARIABLE","$path",869],["T_WHITESPACE"," ",869],"=",["T_WHITESPACE"," ",869],["T_CONSTANT_ENCAPSED_STRING","'\/'",869],",",["T_WHITESPACE","\n\t\t",869],["T_VARIABLE","$queryString",870],["T_WHITESPACE"," ",870],"=",["T_WHITESPACE"," ",870],["T_CONSTANT_ENCAPSED_STRING","''",870],",",["T_WHITESPACE","\n\t\t",870],["T_VARIABLE","$httpVerb",871],["T_WHITESPACE"," ",871],"=",["T_WHITESPACE"," ",871],["T_STRING","Zend_Http_Client",871],["T_DOUBLE_COLON","::",871],["T_STRING","GET",871],",",["T_WHITESPACE","\n\t\t",871],["T_VARIABLE","$headers",872],["T_WHITESPACE"," ",872],"=",["T_WHITESPACE"," ",872],["T_ARRAY","array",872],"(",")",",",["T_WHITESPACE","\n\t\t",872],["T_VARIABLE","$forTableStorage",873],["T_WHITESPACE"," ",873],"=",["T_WHITESPACE"," ",873],["T_STRING","false",873],",",["T_WHITESPACE","\n\t\t",873],["T_VARIABLE","$rawData",874],["T_WHITESPACE"," ",874],"=",["T_WHITESPACE"," ",874],["T_STRING","null",874],",",["T_WHITESPACE","\n\t\t",874],["T_VARIABLE","$resourceType",875],["T_WHITESPACE"," ",875],"=",["T_WHITESPACE"," ",875],["T_STRING","Zend_Service_WindowsAzure_Storage",875],["T_DOUBLE_COLON","::",875],["T_STRING","RESOURCE_UNKNOWN",875],",",["T_WHITESPACE","\n\t\t",875],["T_VARIABLE","$requiredPermission",876],["T_WHITESPACE"," ",876],"=",["T_WHITESPACE"," ",876],["T_STRING","Zend_Service_WindowsAzure_Credentials_CredentialsAbstract",876],["T_DOUBLE_COLON","::",876],["T_STRING","PERMISSION_READ",876],["T_WHITESPACE","\n\t",876],")",["T_WHITESPACE"," ",877],"{",["T_WHITESPACE","\n\t\t",877],["T_COMMENT","\/\/ Add headers\n",878],["T_WHITESPACE","\t\t",879],["T_VARIABLE","$headers",879],"[",["T_CONSTANT_ENCAPSED_STRING","'DataServiceVersion'",879],"]",["T_WHITESPACE"," ",879],"=",["T_WHITESPACE"," ",879],["T_CONSTANT_ENCAPSED_STRING","'1.0;NetFx'",879],";",["T_WHITESPACE","\n\t\t",879],["T_VARIABLE","$headers",880],"[",["T_CONSTANT_ENCAPSED_STRING","'MaxDataServiceVersion'",880],"]",["T_WHITESPACE"," ",880],"=",["T_WHITESPACE"," ",880],["T_CONSTANT_ENCAPSED_STRING","'1.0;NetFx'",880],";",["T_WHITESPACE","\n\n\t\t",880],["T_COMMENT","\/\/ Perform request\n",882],["T_WHITESPACE","\t\t",883],["T_RETURN","return",883],["T_WHITESPACE"," ",883],["T_STRING","parent",883],["T_DOUBLE_COLON","::",883],["T_STRING","_performRequest",883],"(",["T_WHITESPACE","\n\t\t\t",883],["T_VARIABLE","$path",884],",",["T_WHITESPACE","\n\t\t\t",884],["T_VARIABLE","$queryString",885],",",["T_WHITESPACE","\n\t\t\t",885],["T_VARIABLE","$httpVerb",886],",",["T_WHITESPACE","\n\t\t\t",886],["T_VARIABLE","$headers",887],",",["T_WHITESPACE","\n\t\t\t",887],["T_VARIABLE","$forTableStorage",888],",",["T_WHITESPACE","\n\t\t\t",888],["T_VARIABLE","$rawData",889],",",["T_WHITESPACE","\n\t\t\t",889],["T_VARIABLE","$resourceType",890],",",["T_WHITESPACE","\n\t\t\t",890],["T_VARIABLE","$requiredPermission",891],["T_WHITESPACE","\n\t\t",891],")",";",["T_WHITESPACE","\n\t",892],"}",["T_WHITESPACE","  \n\t  \n    ",893],["T_DOC_COMMENT","\/**\n     * Converts a string to a DateTime object. Returns false on failure.\n     * \n     * @param string $value The string value to parse\n     * @return DateTime|boolean\n     *\/",895],["T_WHITESPACE","\n    ",900],["T_PROTECTED","protected",901],["T_WHITESPACE"," ",901],["T_FUNCTION","function",901],["T_WHITESPACE"," ",901],["T_STRING","_convertToDateTime",901],"(",["T_VARIABLE","$value",901],["T_WHITESPACE"," ",901],"=",["T_WHITESPACE"," ",901],["T_CONSTANT_ENCAPSED_STRING","''",901],")",["T_WHITESPACE"," \n    ",901],"{",["T_WHITESPACE","\n    \t",902],["T_IF","if",903],["T_WHITESPACE"," ",903],"(",["T_VARIABLE","$value",903],["T_WHITESPACE"," ",903],["T_INSTANCEOF","instanceof",903],["T_WHITESPACE"," ",903],["T_STRING","DateTime",903],")",["T_WHITESPACE"," ",903],"{",["T_WHITESPACE","\n    \t\t",903],["T_RETURN","return",904],["T_WHITESPACE"," ",904],["T_VARIABLE","$value",904],";",["T_WHITESPACE","\n    \t",904],"}",["T_WHITESPACE","\n    \t\n    \t",905],["T_TRY","try",907],["T_WHITESPACE"," ",907],"{",["T_WHITESPACE","\n    \t\t",907],["T_IF","if",908],["T_WHITESPACE"," ",908],"(",["T_STRING","substr",908],"(",["T_VARIABLE","$value",908],",",["T_WHITESPACE"," ",908],"-",["T_LNUMBER","1",908],")",["T_WHITESPACE"," ",908],["T_IS_EQUAL","==",908],["T_WHITESPACE"," ",908],["T_CONSTANT_ENCAPSED_STRING","'Z'",908],")",["T_WHITESPACE"," ",908],"{",["T_WHITESPACE","\n    \t\t\t",908],["T_VARIABLE","$value",909],["T_WHITESPACE"," ",909],"=",["T_WHITESPACE"," ",909],["T_STRING","substr",909],"(",["T_VARIABLE","$value",909],",",["T_WHITESPACE"," ",909],["T_LNUMBER","0",909],",",["T_WHITESPACE"," ",909],["T_STRING","strlen",909],"(",["T_VARIABLE","$value",909],")",["T_WHITESPACE"," ",909],"-",["T_WHITESPACE"," ",909],["T_LNUMBER","1",909],")",";",["T_WHITESPACE","\n    \t\t",909],"}",["T_WHITESPACE","\n    \t\t",910],["T_RETURN","return",911],["T_WHITESPACE"," ",911],["T_NEW","new",911],["T_WHITESPACE"," ",911],["T_STRING","DateTime",911],"(",["T_VARIABLE","$value",911],",",["T_WHITESPACE"," ",911],["T_NEW","new",911],["T_WHITESPACE"," ",911],["T_STRING","DateTimeZone",911],"(",["T_CONSTANT_ENCAPSED_STRING","'UTC'",911],")",")",";",["T_WHITESPACE","\n    \t",911],"}",["T_WHITESPACE","\n    \t",912],["T_CATCH","catch",913],["T_WHITESPACE"," ",913],"(",["T_STRING","Exception",913],["T_WHITESPACE"," ",913],["T_VARIABLE","$ex",913],")",["T_WHITESPACE"," ",913],"{",["T_WHITESPACE","\n    \t\t",913],["T_RETURN","return",914],["T_WHITESPACE"," ",914],["T_STRING","false",914],";",["T_WHITESPACE","\n    \t",914],"}",["T_WHITESPACE","\n    ",915],"}",["T_WHITESPACE","\n    \n    ",916],["T_DOC_COMMENT","\/**\n     * Converts a DateTime object into an Edm.DaeTime value in UTC timezone,\n     * represented as a string.\n     * \n     * @param DateTime $value\n     * @return string\n     *\/",918],["T_WHITESPACE","\n    ",924],["T_PROTECTED","protected",925],["T_WHITESPACE"," ",925],["T_FUNCTION","function",925],["T_WHITESPACE"," ",925],["T_STRING","_convertToEdmDateTime",925],"(",["T_STRING","DateTime",925],["T_WHITESPACE"," ",925],["T_VARIABLE","$value",925],")",["T_WHITESPACE"," \n    ",925],"{",["T_WHITESPACE","\n    \t",926],["T_VARIABLE","$cloned",927],["T_WHITESPACE"," ",927],"=",["T_WHITESPACE"," ",927],["T_CLONE","clone",927],["T_WHITESPACE"," ",927],["T_VARIABLE","$value",927],";",["T_WHITESPACE","\n    \t",927],["T_VARIABLE","$cloned",928],["T_OBJECT_OPERATOR","->",928],["T_STRING","setTimezone",928],"(",["T_NEW","new",928],["T_WHITESPACE"," ",928],["T_STRING","DateTimeZone",928],"(",["T_CONSTANT_ENCAPSED_STRING","'UTC'",928],")",")",";",["T_WHITESPACE","\n    \t",928],["T_RETURN","return",929],["T_WHITESPACE"," ",929],["T_STRING","str_replace",929],"(",["T_CONSTANT_ENCAPSED_STRING","'+0000'",929],",",["T_WHITESPACE"," ",929],["T_CONSTANT_ENCAPSED_STRING","'Z'",929],",",["T_WHITESPACE"," ",929],["T_VARIABLE","$cloned",929],["T_OBJECT_OPERATOR","->",929],["T_STRING","format",929],"(",["T_STRING","DateTime",929],["T_DOUBLE_COLON","::",929],["T_STRING","ISO8601",929],")",")",";",["T_WHITESPACE","\n    ",929],"}",["T_WHITESPACE","\n",930],"}",["T_WHITESPACE","\n",931]]
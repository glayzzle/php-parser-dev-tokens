[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Zend Framework\n *\n * LICENSE\n *\n * This source file is subject to the new BSD license that is bundled\n * with this package in the file LICENSE.txt.\n * It is also available through the world-wide-web at this URL:\n * http:\/\/framework.zend.com\/license\/new-bsd\n * If you did not receive a copy of the license and are unable to\n * obtain it through the world-wide-web, please send an email\n * to license@zend.com so we can send you a copy immediately.\n *\n * @category   Zend\n * @package    Zend_Service\n * @subpackage Rackspace\n * @copyright  Copyright (c) 2005-2015 Zend Technologies USA Inc. (http:\/\/www.zend.com)\n * @license    http:\/\/framework.zend.com\/license\/new-bsd     New BSD License\n *\/",2],["T_WHITESPACE","\n\n",20],["T_COMMENT","#require_once 'Zend\/Http\/Client.php';\n",22],["T_WHITESPACE","\n",23],["T_ABSTRACT","abstract",24],["T_WHITESPACE"," ",24],["T_CLASS","class",24],["T_WHITESPACE"," ",24],["T_STRING","Zend_Service_Rackspace_Abstract",24],["T_WHITESPACE","\n",24],"{",["T_WHITESPACE","\n    ",25],["T_CONST","const",26],["T_WHITESPACE"," ",26],["T_STRING","VERSION",26],["T_WHITESPACE","                ",26],"=",["T_WHITESPACE"," ",26],["T_CONSTANT_ENCAPSED_STRING","'v1.0'",26],";",["T_WHITESPACE","\n    ",26],["T_CONST","const",27],["T_WHITESPACE"," ",27],["T_STRING","US_AUTH_URL",27],["T_WHITESPACE","            ",27],"=",["T_WHITESPACE"," ",27],["T_CONSTANT_ENCAPSED_STRING","'https:\/\/auth.api.rackspacecloud.com'",27],";",["T_WHITESPACE","\n    ",27],["T_CONST","const",28],["T_WHITESPACE"," ",28],["T_STRING","UK_AUTH_URL",28],["T_WHITESPACE","            ",28],"=",["T_WHITESPACE"," ",28],["T_CONSTANT_ENCAPSED_STRING","'https:\/\/lon.auth.api.rackspacecloud.com'",28],";",["T_WHITESPACE","\n    ",28],["T_CONST","const",29],["T_WHITESPACE"," ",29],["T_STRING","API_FORMAT",29],["T_WHITESPACE","             ",29],"=",["T_WHITESPACE"," ",29],["T_CONSTANT_ENCAPSED_STRING","'json'",29],";",["T_WHITESPACE","\n    ",29],["T_CONST","const",30],["T_WHITESPACE"," ",30],["T_STRING","USER_AGENT",30],["T_WHITESPACE","             ",30],"=",["T_WHITESPACE"," ",30],["T_CONSTANT_ENCAPSED_STRING","'Zend_Service_Rackspace'",30],";",["T_WHITESPACE","\n    ",30],["T_CONST","const",31],["T_WHITESPACE"," ",31],["T_STRING","STORAGE_URL",31],["T_WHITESPACE","            ",31],"=",["T_WHITESPACE"," ",31],["T_CONSTANT_ENCAPSED_STRING","\"X-Storage-Url\"",31],";",["T_WHITESPACE","\n    ",31],["T_CONST","const",32],["T_WHITESPACE"," ",32],["T_STRING","AUTHTOKEN",32],["T_WHITESPACE","              ",32],"=",["T_WHITESPACE"," ",32],["T_CONSTANT_ENCAPSED_STRING","\"X-Auth-Token\"",32],";",["T_WHITESPACE","\n    ",32],["T_CONST","const",33],["T_WHITESPACE"," ",33],["T_STRING","AUTHUSER_HEADER",33],["T_WHITESPACE","        ",33],"=",["T_WHITESPACE"," ",33],["T_CONSTANT_ENCAPSED_STRING","\"X-Auth-User\"",33],";",["T_WHITESPACE","\n    ",33],["T_CONST","const",34],["T_WHITESPACE"," ",34],["T_STRING","AUTHKEY_HEADER",34],["T_WHITESPACE","         ",34],"=",["T_WHITESPACE"," ",34],["T_CONSTANT_ENCAPSED_STRING","\"X-Auth-Key\"",34],";",["T_WHITESPACE","\n    ",34],["T_CONST","const",35],["T_WHITESPACE"," ",35],["T_STRING","AUTHUSER_HEADER_LEGACY",35],["T_WHITESPACE"," ",35],"=",["T_WHITESPACE"," ",35],["T_CONSTANT_ENCAPSED_STRING","\"X-Storage-User\"",35],";",["T_WHITESPACE","\n    ",35],["T_CONST","const",36],["T_WHITESPACE"," ",36],["T_STRING","AUTHKEY_HEADER_LEGACY",36],["T_WHITESPACE","  ",36],"=",["T_WHITESPACE"," ",36],["T_CONSTANT_ENCAPSED_STRING","\"X-Storage-Pass\"",36],";",["T_WHITESPACE","\n    ",36],["T_CONST","const",37],["T_WHITESPACE"," ",37],["T_STRING","AUTHTOKEN_LEGACY",37],["T_WHITESPACE","       ",37],"=",["T_WHITESPACE"," ",37],["T_CONSTANT_ENCAPSED_STRING","\"X-Storage-Token\"",37],";",["T_WHITESPACE","\n    ",37],["T_CONST","const",38],["T_WHITESPACE"," ",38],["T_STRING","CDNM_URL",38],["T_WHITESPACE","               ",38],"=",["T_WHITESPACE"," ",38],["T_CONSTANT_ENCAPSED_STRING","\"X-CDN-Management-Url\"",38],";",["T_WHITESPACE","\n    ",38],["T_CONST","const",39],["T_WHITESPACE"," ",39],["T_STRING","MANAGEMENT_URL",39],["T_WHITESPACE","         ",39],"=",["T_WHITESPACE"," ",39],["T_CONSTANT_ENCAPSED_STRING","\"X-Server-Management-Url\"",39],";",["T_WHITESPACE","\n    ",39],["T_DOC_COMMENT","\/**\n     * Rackspace Key\n     *\n     * @var string\n     *\/",40],["T_WHITESPACE","\n    ",44],["T_PROTECTED","protected",45],["T_WHITESPACE"," ",45],["T_VARIABLE","$key",45],";",["T_WHITESPACE","\n    ",45],["T_DOC_COMMENT","\/**\n     * Rackspace account name\n     *\n     * @var string\n     *\/",46],["T_WHITESPACE","\n    ",50],["T_PROTECTED","protected",51],["T_WHITESPACE"," ",51],["T_VARIABLE","$user",51],";",["T_WHITESPACE","\n    ",51],["T_DOC_COMMENT","\/**\n     * Token of authentication\n     *\n     * @var string\n     *\/",52],["T_WHITESPACE","\n    ",56],["T_PROTECTED","protected",57],["T_WHITESPACE"," ",57],["T_VARIABLE","$token",57],";",["T_WHITESPACE","\n    ",57],["T_DOC_COMMENT","\/**\n     * Authentication URL\n     *\n     * @var string\n     *\/",58],["T_WHITESPACE","\n    ",62],["T_PROTECTED","protected",63],["T_WHITESPACE"," ",63],["T_VARIABLE","$authUrl",63],";",["T_WHITESPACE","\n    ",63],["T_DOC_COMMENT","\/**\n     * @var Zend_Http_Client\n     *\/",64],["T_WHITESPACE","\n    ",66],["T_PROTECTED","protected",67],["T_WHITESPACE"," ",67],["T_VARIABLE","$httpClient",67],";",["T_WHITESPACE","\n    ",67],["T_DOC_COMMENT","\/**\n     * Error Msg\n     *\n     * @var string\n     *\/",68],["T_WHITESPACE","\n    ",72],["T_PROTECTED","protected",73],["T_WHITESPACE"," ",73],["T_VARIABLE","$errorMsg",73],";",["T_WHITESPACE","\n    ",73],["T_DOC_COMMENT","\/**\n     * HTTP error code\n     *\n     * @var string\n     *\/",74],["T_WHITESPACE","\n    ",78],["T_PROTECTED","protected",79],["T_WHITESPACE"," ",79],["T_VARIABLE","$errorCode",79],";",["T_WHITESPACE","\n    ",79],["T_DOC_COMMENT","\/**\n     * Storage URL\n     *\n     * @var string\n     *\/",80],["T_WHITESPACE","\n    ",84],["T_PROTECTED","protected",85],["T_WHITESPACE"," ",85],["T_VARIABLE","$storageUrl",85],";",["T_WHITESPACE","\n    ",85],["T_DOC_COMMENT","\/**\n     * CDN URL\n     *\n     * @var string\n     *\/",86],["T_WHITESPACE","\n    ",90],["T_PROTECTED","protected",91],["T_WHITESPACE"," ",91],["T_VARIABLE","$cdnUrl",91],";",["T_WHITESPACE","\n    ",91],["T_DOC_COMMENT","\/**\n     * Server management URL\n     * \n     * @var string \n     *\/",92],["T_WHITESPACE","\n    ",96],["T_PROTECTED","protected",97],["T_WHITESPACE"," ",97],["T_VARIABLE","$managementUrl",97],";",["T_WHITESPACE","\n    ",97],["T_DOC_COMMENT","\/**\n     * Do we use ServiceNet?\n     * \n     * @var boolean\n     *\/",98],["T_WHITESPACE","\n    ",102],["T_PROTECTED","protected",103],["T_WHITESPACE"," ",103],["T_VARIABLE","$useServiceNet",103],["T_WHITESPACE"," ",103],"=",["T_WHITESPACE"," ",103],["T_STRING","false",103],";",["T_WHITESPACE","\n    ",103],["T_DOC_COMMENT","\/**\n     * Constructor\n     *\n     * You must pass the account and the Rackspace authentication key.\n     * Optional: the authentication url (default is US)\n     *\n     * @param string $user\n     * @param string $key\n     * @param string $authUrl\n     *\/",104],["T_WHITESPACE","\n    ",113],["T_PUBLIC","public",114],["T_WHITESPACE"," ",114],["T_FUNCTION","function",114],["T_WHITESPACE"," ",114],["T_STRING","__construct",114],"(",["T_VARIABLE","$user",114],",",["T_WHITESPACE"," ",114],["T_VARIABLE","$key",114],",",["T_WHITESPACE"," ",114],["T_VARIABLE","$authUrl",114],"=",["T_STRING","self",114],["T_DOUBLE_COLON","::",114],["T_STRING","US_AUTH_URL",114],")",["T_WHITESPACE","\n    ",114],"{",["T_WHITESPACE","\n        ",115],["T_IF","if",116],["T_WHITESPACE"," ",116],"(","!",["T_ISSET","isset",116],"(",["T_VARIABLE","$user",116],")",")",["T_WHITESPACE"," ",116],"{",["T_WHITESPACE","\n            ",116],["T_COMMENT","#require_once 'Zend\/Service\/Rackspace\/Exception.php';\n",117],["T_WHITESPACE","            ",118],["T_THROW","throw",118],["T_WHITESPACE"," ",118],["T_NEW","new",118],["T_WHITESPACE"," ",118],["T_STRING","Zend_Service_Rackspace_Exception",118],"(",["T_CONSTANT_ENCAPSED_STRING","\"The user cannot be empty\"",118],")",";",["T_WHITESPACE","\n        ",118],"}",["T_WHITESPACE","\n        ",119],["T_IF","if",120],["T_WHITESPACE"," ",120],"(","!",["T_ISSET","isset",120],"(",["T_VARIABLE","$key",120],")",")",["T_WHITESPACE"," ",120],"{",["T_WHITESPACE","\n            ",120],["T_COMMENT","#require_once 'Zend\/Service\/Rackspace\/Exception.php';\n",121],["T_WHITESPACE","            ",122],["T_THROW","throw",122],["T_WHITESPACE"," ",122],["T_NEW","new",122],["T_WHITESPACE"," ",122],["T_STRING","Zend_Service_Rackspace_Exception",122],"(",["T_CONSTANT_ENCAPSED_STRING","\"The key cannot be empty\"",122],")",";",["T_WHITESPACE","\n        ",122],"}",["T_WHITESPACE","\n        ",123],["T_IF","if",124],["T_WHITESPACE"," ",124],"(","!",["T_STRING","in_array",124],"(",["T_VARIABLE","$authUrl",124],",",["T_WHITESPACE"," ",124],["T_ARRAY","array",124],"(",["T_STRING","self",124],["T_DOUBLE_COLON","::",124],["T_STRING","US_AUTH_URL",124],",",["T_WHITESPACE"," ",124],["T_STRING","self",124],["T_DOUBLE_COLON","::",124],["T_STRING","UK_AUTH_URL",124],")",")",")",["T_WHITESPACE"," ",124],"{",["T_WHITESPACE","\n            ",124],["T_COMMENT","#require_once 'Zend\/Service\/Rackspace\/Exception.php';\n",125],["T_WHITESPACE","            ",126],["T_THROW","throw",126],["T_WHITESPACE"," ",126],["T_NEW","new",126],["T_WHITESPACE"," ",126],["T_STRING","Zend_Service_Rackspace_Exception",126],"(",["T_CONSTANT_ENCAPSED_STRING","\"The authentication URL should be valid\"",126],")",";",["T_WHITESPACE","\n        ",126],"}",["T_WHITESPACE","\n        ",127],["T_VARIABLE","$this",128],["T_OBJECT_OPERATOR","->",128],["T_STRING","setUser",128],"(",["T_VARIABLE","$user",128],")",";",["T_WHITESPACE","\n        ",128],["T_VARIABLE","$this",129],["T_OBJECT_OPERATOR","->",129],["T_STRING","setKey",129],"(",["T_VARIABLE","$key",129],")",";",["T_WHITESPACE","\n        ",129],["T_VARIABLE","$this",130],["T_OBJECT_OPERATOR","->",130],["T_STRING","setAuthUrl",130],"(",["T_VARIABLE","$authUrl",130],")",";",["T_WHITESPACE","\n    ",130],"}",["T_WHITESPACE","\n    ",131],["T_DOC_COMMENT","\/**\n     * Get User account\n     *\n     * @return string\n     *\/",132],["T_WHITESPACE","\n    ",136],["T_PUBLIC","public",137],["T_WHITESPACE"," ",137],["T_FUNCTION","function",137],["T_WHITESPACE"," ",137],["T_STRING","getUser",137],"(",")",["T_WHITESPACE","\n    ",137],"{",["T_WHITESPACE","\n        ",138],["T_RETURN","return",139],["T_WHITESPACE"," ",139],["T_VARIABLE","$this",139],["T_OBJECT_OPERATOR","->",139],["T_STRING","user",139],";",["T_WHITESPACE","\n    ",139],"}",["T_WHITESPACE","\n    ",140],["T_DOC_COMMENT","\/**\n     * Get user key\n     *\n     * @return string\n     *\/",141],["T_WHITESPACE","\n    ",145],["T_PUBLIC","public",146],["T_WHITESPACE"," ",146],["T_FUNCTION","function",146],["T_WHITESPACE"," ",146],["T_STRING","getKey",146],"(",")",["T_WHITESPACE","\n    ",146],"{",["T_WHITESPACE","\n        ",147],["T_RETURN","return",148],["T_WHITESPACE"," ",148],["T_VARIABLE","$this",148],["T_OBJECT_OPERATOR","->",148],["T_STRING","key",148],";",["T_WHITESPACE","\n    ",148],"}",["T_WHITESPACE","\n    ",149],["T_DOC_COMMENT","\/**\n     * Get authentication URL\n     *\n     * @return string\n     *\/",150],["T_WHITESPACE","\n    ",154],["T_PUBLIC","public",155],["T_WHITESPACE"," ",155],["T_FUNCTION","function",155],["T_WHITESPACE"," ",155],["T_STRING","getAuthUrl",155],"(",")",["T_WHITESPACE","\n    ",155],"{",["T_WHITESPACE","\n        ",156],["T_RETURN","return",157],["T_WHITESPACE"," ",157],["T_VARIABLE","$this",157],["T_OBJECT_OPERATOR","->",157],["T_STRING","authUrl",157],";",["T_WHITESPACE","\n    ",157],"}",["T_WHITESPACE","\n    ",158],["T_DOC_COMMENT","\/**\n     * Get the storage URL\n     *\n     * @return string|boolean\n     *\/",159],["T_WHITESPACE","\n    ",163],["T_PUBLIC","public",164],["T_WHITESPACE"," ",164],["T_FUNCTION","function",164],["T_WHITESPACE"," ",164],["T_STRING","getStorageUrl",164],"(",")",["T_WHITESPACE"," \n    ",164],"{",["T_WHITESPACE","\n        ",165],["T_IF","if",166],["T_WHITESPACE"," ",166],"(",["T_EMPTY","empty",166],"(",["T_VARIABLE","$this",166],["T_OBJECT_OPERATOR","->",166],["T_STRING","storageUrl",166],")",")",["T_WHITESPACE"," ",166],"{",["T_WHITESPACE","\n            ",166],["T_IF","if",167],["T_WHITESPACE"," ",167],"(","!",["T_VARIABLE","$this",167],["T_OBJECT_OPERATOR","->",167],["T_STRING","authenticate",167],"(",")",")",["T_WHITESPACE"," ",167],"{",["T_WHITESPACE","\n                ",167],["T_RETURN","return",168],["T_WHITESPACE"," ",168],["T_STRING","false",168],";",["T_WHITESPACE","\n            ",168],"}",["T_WHITESPACE","\n        ",169],"}",["T_WHITESPACE","\n        ",170],["T_RETURN","return",171],["T_WHITESPACE"," ",171],["T_VARIABLE","$this",171],["T_OBJECT_OPERATOR","->",171],["T_STRING","storageUrl",171],";",["T_WHITESPACE","\n    ",171],"}",["T_WHITESPACE","\n    ",172],["T_DOC_COMMENT","\/**\n     * Get the CDN URL\n     *\n     * @return string|boolean\n     *\/",173],["T_WHITESPACE","\n    ",177],["T_PUBLIC","public",178],["T_WHITESPACE"," ",178],["T_FUNCTION","function",178],["T_WHITESPACE"," ",178],["T_STRING","getCdnUrl",178],"(",")",["T_WHITESPACE"," \n    ",178],"{",["T_WHITESPACE","\n        ",179],["T_IF","if",180],["T_WHITESPACE"," ",180],"(",["T_EMPTY","empty",180],"(",["T_VARIABLE","$this",180],["T_OBJECT_OPERATOR","->",180],["T_STRING","cdnUrl",180],")",")",["T_WHITESPACE"," ",180],"{",["T_WHITESPACE","\n            ",180],["T_IF","if",181],["T_WHITESPACE"," ",181],"(","!",["T_VARIABLE","$this",181],["T_OBJECT_OPERATOR","->",181],["T_STRING","authenticate",181],"(",")",")",["T_WHITESPACE"," ",181],"{",["T_WHITESPACE","\n                ",181],["T_RETURN","return",182],["T_WHITESPACE"," ",182],["T_STRING","false",182],";",["T_WHITESPACE","\n            ",182],"}",["T_WHITESPACE","\n        ",183],"}",["T_WHITESPACE","\n        ",184],["T_RETURN","return",185],["T_WHITESPACE"," ",185],["T_VARIABLE","$this",185],["T_OBJECT_OPERATOR","->",185],["T_STRING","cdnUrl",185],";",["T_WHITESPACE","\n    ",185],"}",["T_WHITESPACE","\n    ",186],["T_DOC_COMMENT","\/**\n     * Get the management server URL\n     * \n     * @return string|boolean\n     *\/",187],["T_WHITESPACE","     \n    ",191],["T_PUBLIC","public",192],["T_WHITESPACE"," ",192],["T_FUNCTION","function",192],["T_WHITESPACE"," ",192],["T_STRING","getManagementUrl",192],"(",")",["T_WHITESPACE","\n    ",192],"{",["T_WHITESPACE","\n        ",193],["T_IF","if",194],["T_WHITESPACE"," ",194],"(",["T_EMPTY","empty",194],"(",["T_VARIABLE","$this",194],["T_OBJECT_OPERATOR","->",194],["T_STRING","managementUrl",194],")",")",["T_WHITESPACE"," ",194],"{",["T_WHITESPACE","\n            ",194],["T_IF","if",195],["T_WHITESPACE"," ",195],"(","!",["T_VARIABLE","$this",195],["T_OBJECT_OPERATOR","->",195],["T_STRING","authenticate",195],"(",")",")",["T_WHITESPACE"," ",195],"{",["T_WHITESPACE","\n                ",195],["T_RETURN","return",196],["T_WHITESPACE"," ",196],["T_STRING","false",196],";",["T_WHITESPACE","\n            ",196],"}",["T_WHITESPACE","\n        ",197],"}",["T_WHITESPACE","\n        ",198],["T_RETURN","return",199],["T_WHITESPACE"," ",199],["T_VARIABLE","$this",199],["T_OBJECT_OPERATOR","->",199],["T_STRING","managementUrl",199],";",["T_WHITESPACE","\n    ",199],"}",["T_WHITESPACE","\n    ",200],["T_DOC_COMMENT","\/**\n     * Set the user account\n     *\n     * @param string $user\n     * @return void\n     *\/",201],["T_WHITESPACE","\n    ",206],["T_PUBLIC","public",207],["T_WHITESPACE"," ",207],["T_FUNCTION","function",207],["T_WHITESPACE"," ",207],["T_STRING","setUser",207],"(",["T_VARIABLE","$user",207],")",["T_WHITESPACE","\n    ",207],"{",["T_WHITESPACE","\n        ",208],["T_IF","if",209],["T_WHITESPACE"," ",209],"(","!",["T_EMPTY","empty",209],"(",["T_VARIABLE","$user",209],")",")",["T_WHITESPACE"," ",209],"{",["T_WHITESPACE","\n            ",209],["T_VARIABLE","$this",210],["T_OBJECT_OPERATOR","->",210],["T_STRING","user",210],["T_WHITESPACE"," ",210],"=",["T_WHITESPACE"," ",210],["T_VARIABLE","$user",210],";",["T_WHITESPACE","\n        ",210],"}",["T_WHITESPACE","\n    ",211],"}",["T_WHITESPACE","\n    ",212],["T_DOC_COMMENT","\/**\n     * Set the authentication key\n     *\n     * @param string $key\n     * @return void\n     *\/",213],["T_WHITESPACE","\n    ",218],["T_PUBLIC","public",219],["T_WHITESPACE"," ",219],["T_FUNCTION","function",219],["T_WHITESPACE"," ",219],["T_STRING","setKey",219],"(",["T_VARIABLE","$key",219],")",["T_WHITESPACE","\n    ",219],"{",["T_WHITESPACE","\n        ",220],["T_IF","if",221],["T_WHITESPACE"," ",221],"(","!",["T_EMPTY","empty",221],"(",["T_VARIABLE","$key",221],")",")",["T_WHITESPACE"," ",221],"{",["T_WHITESPACE","\n            ",221],["T_VARIABLE","$this",222],["T_OBJECT_OPERATOR","->",222],["T_STRING","key",222],["T_WHITESPACE"," ",222],"=",["T_WHITESPACE"," ",222],["T_VARIABLE","$key",222],";",["T_WHITESPACE","\n        ",222],"}",["T_WHITESPACE","\n    ",223],"}",["T_WHITESPACE","\n    ",224],["T_DOC_COMMENT","\/**\n     * Set the Authentication URL\n     *\n     * @param string $url\n     * @return void\n     *\/",225],["T_WHITESPACE","\n    ",230],["T_PUBLIC","public",231],["T_WHITESPACE"," ",231],["T_FUNCTION","function",231],["T_WHITESPACE"," ",231],["T_STRING","setAuthUrl",231],"(",["T_VARIABLE","$url",231],")",["T_WHITESPACE","\n    ",231],"{",["T_WHITESPACE","\n        ",232],["T_IF","if",233],["T_WHITESPACE"," ",233],"(","!",["T_EMPTY","empty",233],"(",["T_VARIABLE","$url",233],")",["T_WHITESPACE"," ",233],["T_BOOLEAN_AND","&&",233],["T_WHITESPACE"," ",233],["T_STRING","in_array",233],"(",["T_VARIABLE","$url",233],",",["T_WHITESPACE"," ",233],["T_ARRAY","array",233],"(",["T_STRING","self",233],["T_DOUBLE_COLON","::",233],["T_STRING","US_AUTH_URL",233],",",["T_WHITESPACE"," ",233],["T_STRING","self",233],["T_DOUBLE_COLON","::",233],["T_STRING","UK_AUTH_URL",233],")",")",")",["T_WHITESPACE"," ",233],"{",["T_WHITESPACE","\n            ",233],["T_VARIABLE","$this",234],["T_OBJECT_OPERATOR","->",234],["T_STRING","authUrl",234],["T_WHITESPACE"," ",234],"=",["T_WHITESPACE"," ",234],["T_VARIABLE","$url",234],";",["T_WHITESPACE","\n        ",234],"}",["T_WHITESPACE"," ",235],["T_ELSE","else",235],["T_WHITESPACE"," ",235],"{",["T_WHITESPACE","\n            ",235],["T_COMMENT","#require_once 'Zend\/Service\/Rackspace\/Exception.php';\n",236],["T_WHITESPACE","            ",237],["T_THROW","throw",237],["T_WHITESPACE"," ",237],["T_NEW","new",237],["T_WHITESPACE"," ",237],["T_STRING","Zend_Service_Rackspace_Exception",237],"(",["T_CONSTANT_ENCAPSED_STRING","\"The authentication URL is not valid\"",237],")",";",["T_WHITESPACE","\n        ",237],"}",["T_WHITESPACE","\n    ",238],"}",["T_WHITESPACE","\n    \n    ",239],["T_DOC_COMMENT","\/**\n     * Sets whether to use ServiceNet\n     * \n     * ServiceNet is Rackspace's internal network. Bandwidth on ServiceNet is\n     * not charged.\n     * \n     * @param boolean $useServiceNet\n     *\/",241],["T_WHITESPACE","\n    ",248],["T_PUBLIC","public",249],["T_WHITESPACE"," ",249],["T_FUNCTION","function",249],["T_WHITESPACE"," ",249],["T_STRING","setServiceNet",249],"(",["T_VARIABLE","$useServiceNet",249],["T_WHITESPACE"," ",249],"=",["T_WHITESPACE"," ",249],["T_STRING","true",249],")",["T_WHITESPACE","\n    ",249],"{",["T_WHITESPACE","\n        ",250],["T_VARIABLE","$this",251],["T_OBJECT_OPERATOR","->",251],["T_STRING","useServiceNet",251],["T_WHITESPACE"," ",251],"=",["T_WHITESPACE"," ",251],["T_VARIABLE","$useServiceNet",251],";",["T_WHITESPACE","\n        ",251],["T_RETURN","return",252],["T_WHITESPACE"," ",252],["T_VARIABLE","$this",252],";",["T_WHITESPACE","\n    ",252],"}",["T_WHITESPACE","\n\n    ",253],["T_DOC_COMMENT","\/**\n     * Get whether we're using ServiceNet\n     * \n     * @return boolean\n     *\/",255],["T_WHITESPACE","\n    ",259],["T_PUBLIC","public",260],["T_WHITESPACE"," ",260],["T_FUNCTION","function",260],["T_WHITESPACE"," ",260],["T_STRING","getServiceNet",260],"(",")",["T_WHITESPACE","\n    ",260],"{",["T_WHITESPACE","\n        ",261],["T_RETURN","return",262],["T_WHITESPACE"," ",262],["T_VARIABLE","$this",262],["T_OBJECT_OPERATOR","->",262],["T_STRING","useServiceNet",262],";",["T_WHITESPACE","\n    ",262],"}",["T_WHITESPACE","\n\n    ",263],["T_DOC_COMMENT","\/**\n     * Get the authentication token\n     *\n     * @return string\n     *\/",265],["T_WHITESPACE","\n    ",269],["T_PUBLIC","public",270],["T_WHITESPACE"," ",270],["T_FUNCTION","function",270],["T_WHITESPACE"," ",270],["T_STRING","getToken",270],"(",")",["T_WHITESPACE","\n    ",270],"{",["T_WHITESPACE","\n        ",271],["T_IF","if",272],["T_WHITESPACE"," ",272],"(",["T_EMPTY","empty",272],"(",["T_VARIABLE","$this",272],["T_OBJECT_OPERATOR","->",272],["T_STRING","token",272],")",")",["T_WHITESPACE"," ",272],"{",["T_WHITESPACE","\n            ",272],["T_IF","if",273],["T_WHITESPACE"," ",273],"(","!",["T_VARIABLE","$this",273],["T_OBJECT_OPERATOR","->",273],["T_STRING","authenticate",273],"(",")",")",["T_WHITESPACE"," ",273],"{",["T_WHITESPACE","\n                ",273],["T_RETURN","return",274],["T_WHITESPACE"," ",274],["T_STRING","false",274],";",["T_WHITESPACE","\n            ",274],"}",["T_WHITESPACE","\n        ",275],"}",["T_WHITESPACE","\n        ",276],["T_RETURN","return",277],["T_WHITESPACE"," ",277],["T_VARIABLE","$this",277],["T_OBJECT_OPERATOR","->",277],["T_STRING","token",277],";",["T_WHITESPACE","\n    ",277],"}",["T_WHITESPACE","\n    ",278],["T_DOC_COMMENT","\/**\n     * Get the error msg of the last HTTP call\n     *\n     * @return string\n     *\/",279],["T_WHITESPACE","\n    ",283],["T_PUBLIC","public",284],["T_WHITESPACE"," ",284],["T_FUNCTION","function",284],["T_WHITESPACE"," ",284],["T_STRING","getErrorMsg",284],"(",")",["T_WHITESPACE"," \n    ",284],"{",["T_WHITESPACE","\n        ",285],["T_RETURN","return",286],["T_WHITESPACE"," ",286],["T_VARIABLE","$this",286],["T_OBJECT_OPERATOR","->",286],["T_STRING","errorMsg",286],";",["T_WHITESPACE","\n    ",286],"}",["T_WHITESPACE","\n    ",287],["T_DOC_COMMENT","\/**\n     * Get the error code of the last HTTP call\n     * \n     * @return strig \n     *\/",288],["T_WHITESPACE","\n    ",292],["T_PUBLIC","public",293],["T_WHITESPACE"," ",293],["T_FUNCTION","function",293],["T_WHITESPACE"," ",293],["T_STRING","getErrorCode",293],"(",")",["T_WHITESPACE"," \n    ",293],"{",["T_WHITESPACE","\n        ",294],["T_RETURN","return",295],["T_WHITESPACE"," ",295],["T_VARIABLE","$this",295],["T_OBJECT_OPERATOR","->",295],["T_STRING","errorCode",295],";",["T_WHITESPACE","\n    ",295],"}",["T_WHITESPACE","\n    ",296],["T_DOC_COMMENT","\/**\n     * get the HttpClient instance\n     *\n     * @return Zend_Http_Client\n     *\/",297],["T_WHITESPACE","\n    ",301],["T_PUBLIC","public",302],["T_WHITESPACE"," ",302],["T_FUNCTION","function",302],["T_WHITESPACE"," ",302],["T_STRING","getHttpClient",302],"(",")",["T_WHITESPACE","\n    ",302],"{",["T_WHITESPACE","\n        ",303],["T_IF","if",304],["T_WHITESPACE"," ",304],"(",["T_EMPTY","empty",304],"(",["T_VARIABLE","$this",304],["T_OBJECT_OPERATOR","->",304],["T_STRING","httpClient",304],")",")",["T_WHITESPACE"," ",304],"{",["T_WHITESPACE","\n            ",304],["T_VARIABLE","$this",305],["T_OBJECT_OPERATOR","->",305],["T_STRING","httpClient",305],["T_WHITESPACE"," ",305],"=",["T_WHITESPACE"," ",305],["T_NEW","new",305],["T_WHITESPACE"," ",305],["T_STRING","Zend_Http_Client",305],"(",")",";",["T_WHITESPACE","\n        ",305],"}",["T_WHITESPACE","\n        ",306],["T_RETURN","return",307],["T_WHITESPACE"," ",307],["T_VARIABLE","$this",307],["T_OBJECT_OPERATOR","->",307],["T_STRING","httpClient",307],";",["T_WHITESPACE","\n    ",307],"}",["T_WHITESPACE","\n    ",308],["T_DOC_COMMENT","\/**\n     * Return true is the last call was successful\n     * \n     * @return boolean \n     *\/",309],["T_WHITESPACE","\n    ",313],["T_PUBLIC","public",314],["T_WHITESPACE"," ",314],["T_FUNCTION","function",314],["T_WHITESPACE"," ",314],["T_STRING","isSuccessful",314],"(",")",["T_WHITESPACE","\n    ",314],"{",["T_WHITESPACE","\n        ",315],["T_RETURN","return",316],["T_WHITESPACE"," ",316],"(",["T_VARIABLE","$this",316],["T_OBJECT_OPERATOR","->",316],["T_STRING","errorMsg",316],["T_IS_EQUAL","==",316],["T_CONSTANT_ENCAPSED_STRING","''",316],")",";",["T_WHITESPACE","\n    ",316],"}",["T_WHITESPACE","\n    ",317],["T_DOC_COMMENT","\/**\n     * HTTP call\n     *\n     * @param string $url\n     * @param string $method\n     * @param array $headers\n     * @param array $get\n     * @param string $body\n     * @return Zend_Http_Response\n     *\/",318],["T_WHITESPACE","\n    ",327],["T_PROTECTED","protected",328],["T_WHITESPACE"," ",328],["T_FUNCTION","function",328],["T_WHITESPACE"," ",328],["T_STRING","httpCall",328],"(",["T_VARIABLE","$url",328],",",["T_VARIABLE","$method",328],",",["T_VARIABLE","$headers",328],"=",["T_ARRAY","array",328],"(",")",",",["T_VARIABLE","$data",328],"=",["T_ARRAY","array",328],"(",")",",",["T_VARIABLE","$body",328],"=",["T_STRING","null",328],")",["T_WHITESPACE","\n    ",328],"{",["T_WHITESPACE","\n        ",329],["T_VARIABLE","$client",330],["T_WHITESPACE"," ",330],"=",["T_WHITESPACE"," ",330],["T_VARIABLE","$this",330],["T_OBJECT_OPERATOR","->",330],["T_STRING","getHttpClient",330],"(",")",";",["T_WHITESPACE","\n        ",330],["T_VARIABLE","$client",331],["T_OBJECT_OPERATOR","->",331],["T_STRING","resetParameters",331],"(",["T_STRING","true",331],")",";",["T_WHITESPACE","\n        ",331],["T_IF","if",332],["T_WHITESPACE"," ",332],"(",["T_VARIABLE","$method",332],["T_WHITESPACE"," ",332],["T_IS_EQUAL","==",332],["T_WHITESPACE"," ",332],["T_CONSTANT_ENCAPSED_STRING","'PUT'",332],["T_WHITESPACE"," ",332],["T_BOOLEAN_AND","&&",332],["T_WHITESPACE"," ",332],["T_EMPTY","empty",332],"(",["T_VARIABLE","$body",332],")",")",["T_WHITESPACE"," ",332],"{",["T_WHITESPACE","\n            ",332],["T_COMMENT","\/\/ if left at NULL a PUT request will always have \n",333],["T_WHITESPACE","            ",334],["T_COMMENT","\/\/ Content-Type: x-url-form-encoded, which breaks copyObject()\n",334],["T_WHITESPACE","            ",335],["T_VARIABLE","$client",335],["T_OBJECT_OPERATOR","->",335],["T_STRING","setEncType",335],"(",["T_CONSTANT_ENCAPSED_STRING","''",335],")",";",["T_WHITESPACE"," \n        ",335],"}",["T_WHITESPACE","\n        ",336],["T_IF","if",337],["T_WHITESPACE"," ",337],"(",["T_EMPTY","empty",337],"(",["T_VARIABLE","$headers",337],"[",["T_STRING","self",337],["T_DOUBLE_COLON","::",337],["T_STRING","AUTHUSER_HEADER",337],"]",")",")",["T_WHITESPACE"," ",337],"{",["T_WHITESPACE","\n            ",337],["T_VARIABLE","$headers",338],"[",["T_STRING","self",338],["T_DOUBLE_COLON","::",338],["T_STRING","AUTHTOKEN",338],"]","=",["T_WHITESPACE"," ",338],["T_VARIABLE","$this",338],["T_OBJECT_OPERATOR","->",338],["T_STRING","getToken",338],"(",")",";",["T_WHITESPACE","\n        ",338],"}",["T_WHITESPACE"," \n        ",339],["T_VARIABLE","$client",340],["T_OBJECT_OPERATOR","->",340],["T_STRING","setMethod",340],"(",["T_VARIABLE","$method",340],")",";",["T_WHITESPACE","\n        ",340],["T_IF","if",341],["T_WHITESPACE"," ",341],"(",["T_EMPTY","empty",341],"(",["T_VARIABLE","$data",341],"[",["T_CONSTANT_ENCAPSED_STRING","'format'",341],"]",")",")",["T_WHITESPACE"," ",341],"{",["T_WHITESPACE","\n            ",341],["T_VARIABLE","$data",342],"[",["T_CONSTANT_ENCAPSED_STRING","'format'",342],"]","=",["T_WHITESPACE"," ",342],["T_STRING","self",342],["T_DOUBLE_COLON","::",342],["T_STRING","API_FORMAT",342],";",["T_WHITESPACE","\n        ",342],"}",["T_WHITESPACE","\n        ",343],["T_VARIABLE","$client",344],["T_OBJECT_OPERATOR","->",344],["T_STRING","setParameterGet",344],"(",["T_VARIABLE","$data",344],")",";",["T_WHITESPACE","    \n        ",344],["T_IF","if",345],["T_WHITESPACE"," ",345],"(","!",["T_EMPTY","empty",345],"(",["T_VARIABLE","$body",345],")",")",["T_WHITESPACE"," ",345],"{",["T_WHITESPACE","\n            ",345],["T_VARIABLE","$client",346],["T_OBJECT_OPERATOR","->",346],["T_STRING","setRawData",346],"(",["T_VARIABLE","$body",346],")",";",["T_WHITESPACE","\n            ",346],["T_IF","if",347],["T_WHITESPACE"," ",347],"(","!",["T_ISSET","isset",347],"(",["T_VARIABLE","$headers",347],"[",["T_CONSTANT_ENCAPSED_STRING","'Content-Type'",347],"]",")",")",["T_WHITESPACE"," ",347],"{",["T_WHITESPACE","\n                ",347],["T_VARIABLE","$headers",348],"[",["T_CONSTANT_ENCAPSED_STRING","'Content-Type'",348],"]","=",["T_WHITESPACE"," ",348],["T_CONSTANT_ENCAPSED_STRING","'application\/json'",348],";",["T_WHITESPACE","\n            ",348],"}",["T_WHITESPACE","\n        ",349],"}",["T_WHITESPACE","\n        ",350],["T_VARIABLE","$client",351],["T_OBJECT_OPERATOR","->",351],["T_STRING","setHeaders",351],"(",["T_VARIABLE","$headers",351],")",";",["T_WHITESPACE","\n        ",351],["T_VARIABLE","$client",352],["T_OBJECT_OPERATOR","->",352],["T_STRING","setUri",352],"(",["T_VARIABLE","$url",352],")",";",["T_WHITESPACE","\n        ",352],["T_VARIABLE","$this",353],["T_OBJECT_OPERATOR","->",353],["T_STRING","errorMsg",353],"=",["T_CONSTANT_ENCAPSED_STRING","''",353],";",["T_WHITESPACE","\n        ",353],["T_VARIABLE","$this",354],["T_OBJECT_OPERATOR","->",354],["T_STRING","errorCode",354],"=",["T_CONSTANT_ENCAPSED_STRING","''",354],";",["T_WHITESPACE","\n        ",354],["T_RETURN","return",355],["T_WHITESPACE"," ",355],["T_VARIABLE","$client",355],["T_OBJECT_OPERATOR","->",355],["T_STRING","request",355],"(",")",";",["T_WHITESPACE","\n    ",355],"}",["T_WHITESPACE","\n    ",356],["T_DOC_COMMENT","\/**\n     * Authentication\n     *\n     * @return boolean\n     *\/",357],["T_WHITESPACE","\n    ",361],["T_PUBLIC","public",362],["T_WHITESPACE"," ",362],["T_FUNCTION","function",362],["T_WHITESPACE"," ",362],["T_STRING","authenticate",362],"(",")",["T_WHITESPACE","\n    ",362],"{",["T_WHITESPACE","\n        ",363],["T_IF","if",364],["T_WHITESPACE"," ",364],"(",["T_EMPTY","empty",364],"(",["T_VARIABLE","$this",364],["T_OBJECT_OPERATOR","->",364],["T_STRING","user",364],")",")",["T_WHITESPACE"," ",364],"{",["T_WHITESPACE","\n            ",364],["T_DOC_COMMENT","\/**\n             * @see Zend_Service_Rackspace_Exception\n             *\/",365],["T_WHITESPACE","\n            ",367],["T_COMMENT","#require_once 'Zend\/Service\/Rackspace\/Exception.php';\n",368],["T_WHITESPACE","            ",369],["T_THROW","throw",369],["T_WHITESPACE"," ",369],["T_NEW","new",369],["T_WHITESPACE"," ",369],["T_STRING","Zend_Service_Rackspace_Exception",369],"(",["T_CONSTANT_ENCAPSED_STRING","\"User has not been set\"",369],")",";",["T_WHITESPACE","\n        ",369],"}",["T_WHITESPACE","\n\n        ",370],["T_VARIABLE","$headers",372],["T_WHITESPACE"," ",372],"=",["T_WHITESPACE"," ",372],["T_ARRAY","array",372],["T_WHITESPACE"," ",372],"(",["T_WHITESPACE","\n            ",372],["T_STRING","self",373],["T_DOUBLE_COLON","::",373],["T_STRING","AUTHUSER_HEADER",373],["T_WHITESPACE"," ",373],["T_DOUBLE_ARROW","=>",373],["T_WHITESPACE"," ",373],["T_VARIABLE","$this",373],["T_OBJECT_OPERATOR","->",373],["T_STRING","user",373],",",["T_WHITESPACE","\n            ",373],["T_STRING","self",374],["T_DOUBLE_COLON","::",374],["T_STRING","AUTHKEY_HEADER",374],["T_WHITESPACE"," ",374],["T_DOUBLE_ARROW","=>",374],["T_WHITESPACE"," ",374],["T_VARIABLE","$this",374],["T_OBJECT_OPERATOR","->",374],["T_STRING","key",374],["T_WHITESPACE","\n        ",374],")",";",["T_WHITESPACE","\n        ",375],["T_VARIABLE","$result",376],["T_WHITESPACE"," ",376],"=",["T_WHITESPACE"," ",376],["T_VARIABLE","$this",376],["T_OBJECT_OPERATOR","->",376],["T_STRING","httpCall",376],"(",["T_VARIABLE","$this",376],["T_OBJECT_OPERATOR","->",376],["T_STRING","authUrl",376],".",["T_CONSTANT_ENCAPSED_STRING","'\/'",376],".",["T_STRING","self",376],["T_DOUBLE_COLON","::",376],["T_STRING","VERSION",376],",",["T_CONSTANT_ENCAPSED_STRING","'GET'",376],",",["T_WHITESPACE"," ",376],["T_VARIABLE","$headers",376],")",";",["T_WHITESPACE","\n        ",376],["T_IF","if",377],["T_WHITESPACE"," ",377],"(",["T_VARIABLE","$result",377],["T_OBJECT_OPERATOR","->",377],["T_STRING","getStatus",377],"(",")",["T_IS_EQUAL","==",377],["T_LNUMBER","204",377],")",["T_WHITESPACE"," ",377],"{",["T_WHITESPACE","\n            ",377],["T_VARIABLE","$this",378],["T_OBJECT_OPERATOR","->",378],["T_STRING","token",378],["T_WHITESPACE"," ",378],"=",["T_WHITESPACE"," ",378],["T_VARIABLE","$result",378],["T_OBJECT_OPERATOR","->",378],["T_STRING","getHeader",378],"(",["T_STRING","self",378],["T_DOUBLE_COLON","::",378],["T_STRING","AUTHTOKEN",378],")",";",["T_WHITESPACE","\n            ",378],["T_VARIABLE","$this",379],["T_OBJECT_OPERATOR","->",379],["T_STRING","cdnUrl",379],["T_WHITESPACE"," ",379],"=",["T_WHITESPACE"," ",379],["T_VARIABLE","$result",379],["T_OBJECT_OPERATOR","->",379],["T_STRING","getHeader",379],"(",["T_STRING","self",379],["T_DOUBLE_COLON","::",379],["T_STRING","CDNM_URL",379],")",";",["T_WHITESPACE","\n            ",379],["T_VARIABLE","$this",380],["T_OBJECT_OPERATOR","->",380],["T_STRING","managementUrl",380],["T_WHITESPACE"," ",380],"=",["T_WHITESPACE"," ",380],["T_VARIABLE","$result",380],["T_OBJECT_OPERATOR","->",380],["T_STRING","getHeader",380],"(",["T_STRING","self",380],["T_DOUBLE_COLON","::",380],["T_STRING","MANAGEMENT_URL",380],")",";",["T_WHITESPACE","\n            ",380],["T_VARIABLE","$storageUrl",381],["T_WHITESPACE"," ",381],"=",["T_WHITESPACE"," ",381],["T_VARIABLE","$result",381],["T_OBJECT_OPERATOR","->",381],["T_STRING","getHeader",381],"(",["T_STRING","self",381],["T_DOUBLE_COLON","::",381],["T_STRING","STORAGE_URL",381],")",";",["T_WHITESPACE","\n            ",381],["T_IF","if",382],["T_WHITESPACE"," ",382],"(",["T_VARIABLE","$this",382],["T_OBJECT_OPERATOR","->",382],["T_STRING","useServiceNet",382],")",["T_WHITESPACE"," ",382],"{",["T_WHITESPACE","\n                ",382],["T_VARIABLE","$storageUrl",383],["T_WHITESPACE"," ",383],"=",["T_WHITESPACE"," ",383],["T_STRING","preg_replace",383],"(",["T_CONSTANT_ENCAPSED_STRING","'|(.*):\/\/([^\/]*)(.*)|'",383],",",["T_WHITESPACE"," ",383],["T_CONSTANT_ENCAPSED_STRING","'$1:\/\/snet-$2$3'",383],",",["T_WHITESPACE"," ",383],["T_VARIABLE","$storageUrl",383],")",";",["T_WHITESPACE","\n            ",383],"}",["T_WHITESPACE","\n            ",384],["T_VARIABLE","$this",385],["T_OBJECT_OPERATOR","->",385],["T_STRING","storageUrl",385],["T_WHITESPACE"," ",385],"=",["T_WHITESPACE"," ",385],["T_VARIABLE","$storageUrl",385],";",["T_WHITESPACE","\n            ",385],["T_RETURN","return",386],["T_WHITESPACE"," ",386],["T_STRING","true",386],";",["T_WHITESPACE","\n        ",386],"}",["T_WHITESPACE","\n        ",387],["T_VARIABLE","$this",388],["T_OBJECT_OPERATOR","->",388],["T_STRING","errorMsg",388],["T_WHITESPACE"," ",388],"=",["T_WHITESPACE"," ",388],["T_VARIABLE","$result",388],["T_OBJECT_OPERATOR","->",388],["T_STRING","getBody",388],"(",")",";",["T_WHITESPACE","\n        ",388],["T_VARIABLE","$this",389],["T_OBJECT_OPERATOR","->",389],["T_STRING","errorCode",389],["T_WHITESPACE"," ",389],"=",["T_WHITESPACE"," ",389],["T_VARIABLE","$result",389],["T_OBJECT_OPERATOR","->",389],["T_STRING","getStatus",389],"(",")",";",["T_WHITESPACE","\n        ",389],["T_RETURN","return",390],["T_WHITESPACE"," ",390],["T_STRING","false",390],";",["T_WHITESPACE","\n    ",390],"}",["T_WHITESPACE"," \n",391],"}",["T_WHITESPACE","\n",392]]
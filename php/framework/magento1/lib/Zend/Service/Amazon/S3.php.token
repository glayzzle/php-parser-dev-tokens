[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Zend Framework\n *\n * LICENSE\n *\n * This source file is subject to the new BSD license that is bundled\n * with this package in the file LICENSE.txt.\n * It is also available through the world-wide-web at this URL:\n * http:\/\/framework.zend.com\/license\/new-bsd\n * If you did not receive a copy of the license and are unable to\n * obtain it through the world-wide-web, please send an email\n * to license@zend.com so we can send you a copy immediately.\n *\n * @category   Zend\n * @package    Zend_Service\n * @subpackage Amazon_S3\n * @copyright  Copyright (c) 2005-2015 Zend Technologies USA Inc. (http:\/\/www.zend.com)\n * @license    http:\/\/framework.zend.com\/license\/new-bsd     New BSD License\n * @version    $Id$\n *\/",2],["T_WHITESPACE","\n\n",21],["T_DOC_COMMENT","\/**\n * @see Zend_Service_Amazon_Abstract\n *\/",23],["T_WHITESPACE","\n",25],["T_COMMENT","#require_once 'Zend\/Service\/Amazon\/Abstract.php';\n",26],["T_WHITESPACE","\n",27],["T_DOC_COMMENT","\/**\n * @see Zend_Crypt_Hmac\n *\/",28],["T_WHITESPACE","\n",30],["T_COMMENT","#require_once 'Zend\/Crypt\/Hmac.php';\n",31],["T_WHITESPACE","\n",32],["T_DOC_COMMENT","\/**\n * Amazon S3 PHP connection class\n *\n * @category   Zend\n * @package    Zend_Service\n * @subpackage Amazon_S3\n * @copyright  Copyright (c) 2005-2015 Zend Technologies USA Inc. (http:\/\/www.zend.com)\n * @license    http:\/\/framework.zend.com\/license\/new-bsd     New BSD License\n * @see        http:\/\/docs.amazonwebservices.com\/AmazonS3\/2006-03-01\/\n *\/",33],["T_WHITESPACE","\n",42],["T_CLASS","class",43],["T_WHITESPACE"," ",43],["T_STRING","Zend_Service_Amazon_S3",43],["T_WHITESPACE"," ",43],["T_EXTENDS","extends",43],["T_WHITESPACE"," ",43],["T_STRING","Zend_Service_Amazon_Abstract",43],["T_WHITESPACE","\n",43],"{",["T_WHITESPACE","\n    ",44],["T_DOC_COMMENT","\/**\n     * Store for stream wrapper clients\n     *\n     * @var array\n     *\/",45],["T_WHITESPACE","\n    ",49],["T_PROTECTED","protected",50],["T_WHITESPACE"," ",50],["T_STATIC","static",50],["T_WHITESPACE"," ",50],["T_VARIABLE","$_wrapperClients",50],["T_WHITESPACE"," ",50],"=",["T_WHITESPACE"," ",50],["T_ARRAY","array",50],"(",")",";",["T_WHITESPACE","\n\n    ",50],["T_DOC_COMMENT","\/**\n     * Endpoint for the service\n     *\n     * @var Zend_Uri_Http\n     *\/",52],["T_WHITESPACE","\n    ",56],["T_PROTECTED","protected",57],["T_WHITESPACE"," ",57],["T_VARIABLE","$_endpoint",57],";",["T_WHITESPACE","\n\n    ",57],["T_CONST","const",59],["T_WHITESPACE"," ",59],["T_STRING","S3_ENDPOINT",59],["T_WHITESPACE"," ",59],"=",["T_WHITESPACE"," ",59],["T_CONSTANT_ENCAPSED_STRING","'s3.amazonaws.com'",59],";",["T_WHITESPACE","\n\n    ",59],["T_CONST","const",61],["T_WHITESPACE"," ",61],["T_STRING","S3_ACL_PRIVATE",61],["T_WHITESPACE"," ",61],"=",["T_WHITESPACE"," ",61],["T_CONSTANT_ENCAPSED_STRING","'private'",61],";",["T_WHITESPACE","\n    ",61],["T_CONST","const",62],["T_WHITESPACE"," ",62],["T_STRING","S3_ACL_PUBLIC_READ",62],["T_WHITESPACE"," ",62],"=",["T_WHITESPACE"," ",62],["T_CONSTANT_ENCAPSED_STRING","'public-read'",62],";",["T_WHITESPACE","\n    ",62],["T_CONST","const",63],["T_WHITESPACE"," ",63],["T_STRING","S3_ACL_PUBLIC_WRITE",63],["T_WHITESPACE"," ",63],"=",["T_WHITESPACE"," ",63],["T_CONSTANT_ENCAPSED_STRING","'public-read-write'",63],";",["T_WHITESPACE","\n    ",63],["T_CONST","const",64],["T_WHITESPACE"," ",64],["T_STRING","S3_ACL_AUTH_READ",64],["T_WHITESPACE"," ",64],"=",["T_WHITESPACE"," ",64],["T_CONSTANT_ENCAPSED_STRING","'authenticated-read'",64],";",["T_WHITESPACE","\n\n    ",64],["T_CONST","const",66],["T_WHITESPACE"," ",66],["T_STRING","S3_REQUESTPAY_HEADER",66],["T_WHITESPACE"," ",66],"=",["T_WHITESPACE"," ",66],["T_CONSTANT_ENCAPSED_STRING","'x-amz-request-payer'",66],";",["T_WHITESPACE","\n    ",66],["T_CONST","const",67],["T_WHITESPACE"," ",67],["T_STRING","S3_ACL_HEADER",67],["T_WHITESPACE"," ",67],"=",["T_WHITESPACE"," ",67],["T_CONSTANT_ENCAPSED_STRING","'x-amz-acl'",67],";",["T_WHITESPACE","\n    ",67],["T_CONST","const",68],["T_WHITESPACE"," ",68],["T_STRING","S3_CONTENT_TYPE_HEADER",68],["T_WHITESPACE"," ",68],"=",["T_WHITESPACE"," ",68],["T_CONSTANT_ENCAPSED_STRING","'Content-Type'",68],";",["T_WHITESPACE","\n\n    ",68],["T_DOC_COMMENT","\/**\n     * Set S3 endpoint to use\n     *\n     * @param string|Zend_Uri_Http $endpoint\n     * @return Zend_Service_Amazon_S3\n     *\/",70],["T_WHITESPACE","\n    ",75],["T_PUBLIC","public",76],["T_WHITESPACE"," ",76],["T_FUNCTION","function",76],["T_WHITESPACE"," ",76],["T_STRING","setEndpoint",76],"(",["T_VARIABLE","$endpoint",76],")",["T_WHITESPACE","\n    ",76],"{",["T_WHITESPACE","\n        ",77],["T_IF","if",78],["T_WHITESPACE"," ",78],"(","!","(",["T_VARIABLE","$endpoint",78],["T_WHITESPACE"," ",78],["T_INSTANCEOF","instanceof",78],["T_WHITESPACE"," ",78],["T_STRING","Zend_Uri_Http",78],")",")",["T_WHITESPACE"," ",78],"{",["T_WHITESPACE","\n            ",78],["T_VARIABLE","$endpoint",79],["T_WHITESPACE"," ",79],"=",["T_WHITESPACE"," ",79],["T_STRING","Zend_Uri",79],["T_DOUBLE_COLON","::",79],["T_STRING","factory",79],"(",["T_VARIABLE","$endpoint",79],")",";",["T_WHITESPACE","\n        ",79],"}",["T_WHITESPACE","\n        ",80],["T_IF","if",81],["T_WHITESPACE"," ",81],"(","!",["T_VARIABLE","$endpoint",81],["T_OBJECT_OPERATOR","->",81],["T_STRING","valid",81],"(",")",")",["T_WHITESPACE"," ",81],"{",["T_WHITESPACE","\n            ",81],["T_DOC_COMMENT","\/**\n             * @see Zend_Service_Amazon_S3_Exception\n             *\/",82],["T_WHITESPACE","\n            ",84],["T_COMMENT","#require_once 'Zend\/Service\/Amazon\/S3\/Exception.php';\n",85],["T_WHITESPACE","            ",86],["T_THROW","throw",86],["T_WHITESPACE"," ",86],["T_NEW","new",86],["T_WHITESPACE"," ",86],["T_STRING","Zend_Service_Amazon_S3_Exception",86],"(",["T_CONSTANT_ENCAPSED_STRING","'Invalid endpoint supplied'",86],")",";",["T_WHITESPACE","\n        ",86],"}",["T_WHITESPACE","\n        ",87],["T_VARIABLE","$this",88],["T_OBJECT_OPERATOR","->",88],["T_STRING","_endpoint",88],["T_WHITESPACE"," ",88],"=",["T_WHITESPACE"," ",88],["T_VARIABLE","$endpoint",88],";",["T_WHITESPACE","\n        ",88],["T_RETURN","return",89],["T_WHITESPACE"," ",89],["T_VARIABLE","$this",89],";",["T_WHITESPACE","\n    ",89],"}",["T_WHITESPACE","\n\n    ",90],["T_DOC_COMMENT","\/**\n     * Get current S3 endpoint\n     *\n     * @return Zend_Uri_Http\n     *\/",92],["T_WHITESPACE","\n    ",96],["T_PUBLIC","public",97],["T_WHITESPACE"," ",97],["T_FUNCTION","function",97],["T_WHITESPACE"," ",97],["T_STRING","getEndpoint",97],"(",")",["T_WHITESPACE","\n    ",97],"{",["T_WHITESPACE","\n        ",98],["T_RETURN","return",99],["T_WHITESPACE"," ",99],["T_VARIABLE","$this",99],["T_OBJECT_OPERATOR","->",99],["T_STRING","_endpoint",99],";",["T_WHITESPACE","\n    ",99],"}",["T_WHITESPACE","\n\n    ",100],["T_DOC_COMMENT","\/**\n     * Constructor\n     *\n     * @param string $accessKey\n     * @param string $secretKey\n     * @param string $region\n     *\/",102],["T_WHITESPACE","\n    ",108],["T_PUBLIC","public",109],["T_WHITESPACE"," ",109],["T_FUNCTION","function",109],["T_WHITESPACE"," ",109],["T_STRING","__construct",109],"(",["T_VARIABLE","$accessKey",109],"=",["T_STRING","null",109],",",["T_WHITESPACE"," ",109],["T_VARIABLE","$secretKey",109],"=",["T_STRING","null",109],",",["T_WHITESPACE"," ",109],["T_VARIABLE","$region",109],"=",["T_STRING","null",109],")",["T_WHITESPACE","\n    ",109],"{",["T_WHITESPACE","\n        ",110],["T_STRING","parent",111],["T_DOUBLE_COLON","::",111],["T_STRING","__construct",111],"(",["T_VARIABLE","$accessKey",111],",",["T_WHITESPACE"," ",111],["T_VARIABLE","$secretKey",111],",",["T_WHITESPACE"," ",111],["T_VARIABLE","$region",111],")",";",["T_WHITESPACE","\n\n        ",111],["T_VARIABLE","$this",113],["T_OBJECT_OPERATOR","->",113],["T_STRING","setEndpoint",113],"(",["T_CONSTANT_ENCAPSED_STRING","'http:\/\/'",113],".",["T_STRING","self",113],["T_DOUBLE_COLON","::",113],["T_STRING","S3_ENDPOINT",113],")",";",["T_WHITESPACE","\n    ",113],"}",["T_WHITESPACE","\n\n    ",114],["T_DOC_COMMENT","\/**\n     * Verify if the bucket name is valid\n     *\n     * @param string $bucket\n     * @return boolean\n     *\/",116],["T_WHITESPACE","\n    ",121],["T_PUBLIC","public",122],["T_WHITESPACE"," ",122],["T_FUNCTION","function",122],["T_WHITESPACE"," ",122],["T_STRING","_validBucketName",122],"(",["T_VARIABLE","$bucket",122],")",["T_WHITESPACE","\n    ",122],"{",["T_WHITESPACE","\n        ",123],["T_VARIABLE","$len",124],["T_WHITESPACE"," ",124],"=",["T_WHITESPACE"," ",124],["T_STRING","strlen",124],"(",["T_VARIABLE","$bucket",124],")",";",["T_WHITESPACE","\n        ",124],["T_IF","if",125],["T_WHITESPACE"," ",125],"(",["T_VARIABLE","$len",125],["T_WHITESPACE"," ",125],"<",["T_WHITESPACE"," ",125],["T_LNUMBER","3",125],["T_WHITESPACE"," ",125],["T_BOOLEAN_OR","||",125],["T_WHITESPACE"," ",125],["T_VARIABLE","$len",125],["T_WHITESPACE"," ",125],">",["T_WHITESPACE"," ",125],["T_LNUMBER","255",125],")",["T_WHITESPACE"," ",125],"{",["T_WHITESPACE","\n            ",125],["T_DOC_COMMENT","\/**\n             * @see Zend_Service_Amazon_S3_Exception\n             *\/",126],["T_WHITESPACE","\n            ",128],["T_COMMENT","#require_once 'Zend\/Service\/Amazon\/S3\/Exception.php';\n",129],["T_WHITESPACE","            ",130],["T_THROW","throw",130],["T_WHITESPACE"," ",130],["T_NEW","new",130],["T_WHITESPACE"," ",130],["T_STRING","Zend_Service_Amazon_S3_Exception",130],"(","\"",["T_ENCAPSED_AND_WHITESPACE","Bucket name \\\"",130],["T_VARIABLE","$bucket",130],["T_ENCAPSED_AND_WHITESPACE","\\\" must be between 3 and 255 characters long",130],"\"",")",";",["T_WHITESPACE","\n        ",130],"}",["T_WHITESPACE","\n\n        ",131],["T_IF","if",133],["T_WHITESPACE"," ",133],"(",["T_STRING","preg_match",133],"(",["T_CONSTANT_ENCAPSED_STRING","'\/[^a-z0-9\\._-]\/'",133],",",["T_WHITESPACE"," ",133],["T_VARIABLE","$bucket",133],")",")",["T_WHITESPACE"," ",133],"{",["T_WHITESPACE","\n            ",133],["T_DOC_COMMENT","\/**\n             * @see Zend_Service_Amazon_S3_Exception\n             *\/",134],["T_WHITESPACE","\n            ",136],["T_COMMENT","#require_once 'Zend\/Service\/Amazon\/S3\/Exception.php';\n",137],["T_WHITESPACE","            ",138],["T_THROW","throw",138],["T_WHITESPACE"," ",138],["T_NEW","new",138],["T_WHITESPACE"," ",138],["T_STRING","Zend_Service_Amazon_S3_Exception",138],"(","\"",["T_ENCAPSED_AND_WHITESPACE","Bucket name \\\"",138],["T_VARIABLE","$bucket",138],["T_ENCAPSED_AND_WHITESPACE","\\\" contains invalid characters",138],"\"",")",";",["T_WHITESPACE","\n        ",138],"}",["T_WHITESPACE","\n\n        ",139],["T_IF","if",141],["T_WHITESPACE"," ",141],"(",["T_STRING","preg_match",141],"(",["T_CONSTANT_ENCAPSED_STRING","'\/(\\d){1,3}\\.(\\d){1,3}\\.(\\d){1,3}\\.(\\d){1,3}\/'",141],",",["T_WHITESPACE"," ",141],["T_VARIABLE","$bucket",141],")",")",["T_WHITESPACE"," ",141],"{",["T_WHITESPACE","\n            ",141],["T_DOC_COMMENT","\/**\n             * @see Zend_Service_Amazon_S3_Exception\n             *\/",142],["T_WHITESPACE","\n            ",144],["T_COMMENT","#require_once 'Zend\/Service\/Amazon\/S3\/Exception.php';\n",145],["T_WHITESPACE","            ",146],["T_THROW","throw",146],["T_WHITESPACE"," ",146],["T_NEW","new",146],["T_WHITESPACE"," ",146],["T_STRING","Zend_Service_Amazon_S3_Exception",146],"(","\"",["T_ENCAPSED_AND_WHITESPACE","Bucket name \\\"",146],["T_VARIABLE","$bucket",146],["T_ENCAPSED_AND_WHITESPACE","\\\" cannot be an IP address",146],"\"",")",";",["T_WHITESPACE","\n        ",146],"}",["T_WHITESPACE","\n        ",147],["T_RETURN","return",148],["T_WHITESPACE"," ",148],["T_STRING","true",148],";",["T_WHITESPACE","\n    ",148],"}",["T_WHITESPACE","\n\n    ",149],["T_DOC_COMMENT","\/**\n     * Add a new bucket\n     *\n     * @param  string $bucket\n     * @return boolean\n     *\/",151],["T_WHITESPACE","\n    ",156],["T_PUBLIC","public",157],["T_WHITESPACE"," ",157],["T_FUNCTION","function",157],["T_WHITESPACE"," ",157],["T_STRING","createBucket",157],"(",["T_VARIABLE","$bucket",157],",",["T_WHITESPACE"," ",157],["T_VARIABLE","$location",157],["T_WHITESPACE"," ",157],"=",["T_WHITESPACE"," ",157],["T_STRING","null",157],")",["T_WHITESPACE","\n    ",157],"{",["T_WHITESPACE","\n        ",158],["T_VARIABLE","$this",159],["T_OBJECT_OPERATOR","->",159],["T_STRING","_validBucketName",159],"(",["T_VARIABLE","$bucket",159],")",";",["T_WHITESPACE","\n        ",159],["T_VARIABLE","$headers",160],"=",["T_ARRAY","array",160],"(",")",";",["T_WHITESPACE","\n        ",160],["T_IF","if",161],"(",["T_VARIABLE","$location",161],")",["T_WHITESPACE"," ",161],"{",["T_WHITESPACE","\n            ",161],["T_VARIABLE","$data",162],["T_WHITESPACE"," ",162],"=",["T_WHITESPACE"," ",162],["T_CONSTANT_ENCAPSED_STRING","'<CreateBucketConfiguration><LocationConstraint>'",162],".",["T_VARIABLE","$location",162],".",["T_CONSTANT_ENCAPSED_STRING","'<\/LocationConstraint><\/CreateBucketConfiguration>'",162],";",["T_WHITESPACE","\n            ",162],["T_VARIABLE","$headers",163],"[",["T_STRING","self",163],["T_DOUBLE_COLON","::",163],["T_STRING","S3_CONTENT_TYPE_HEADER",163],"]","=",["T_WHITESPACE"," ",163],["T_CONSTANT_ENCAPSED_STRING","'text\/plain'",163],";",["T_WHITESPACE","\n            ",163],["T_VARIABLE","$headers",164],"[",["T_CONSTANT_ENCAPSED_STRING","'Content-size'",164],"]","=",["T_WHITESPACE"," ",164],["T_STRING","strlen",164],"(",["T_VARIABLE","$data",164],")",";",["T_WHITESPACE","\n        ",164],"}",["T_WHITESPACE"," ",165],["T_ELSE","else",165],["T_WHITESPACE"," ",165],"{",["T_WHITESPACE","\n            ",165],["T_VARIABLE","$data",166],["T_WHITESPACE"," ",166],"=",["T_WHITESPACE"," ",166],["T_STRING","null",166],";",["T_WHITESPACE","\n        ",166],"}",["T_WHITESPACE","\n        ",167],["T_VARIABLE","$response",168],["T_WHITESPACE"," ",168],"=",["T_WHITESPACE"," ",168],["T_VARIABLE","$this",168],["T_OBJECT_OPERATOR","->",168],["T_STRING","_makeRequest",168],"(",["T_CONSTANT_ENCAPSED_STRING","'PUT'",168],",",["T_WHITESPACE"," ",168],["T_VARIABLE","$bucket",168],",",["T_WHITESPACE"," ",168],["T_STRING","null",168],",",["T_WHITESPACE"," ",168],["T_VARIABLE","$headers",168],",",["T_WHITESPACE"," ",168],["T_VARIABLE","$data",168],")",";",["T_WHITESPACE","\n\n        ",168],["T_RETURN","return",170],["T_WHITESPACE"," ",170],"(",["T_VARIABLE","$response",170],["T_OBJECT_OPERATOR","->",170],["T_STRING","getStatus",170],"(",")",["T_WHITESPACE"," ",170],["T_IS_EQUAL","==",170],["T_WHITESPACE"," ",170],["T_LNUMBER","200",170],")",";",["T_WHITESPACE","\n    ",170],"}",["T_WHITESPACE","\n\n    ",171],["T_DOC_COMMENT","\/**\n     * Checks if a given bucket name is available\n     *\n     * @param  string $bucket\n     * @return boolean\n     *\/",173],["T_WHITESPACE","\n    ",178],["T_PUBLIC","public",179],["T_WHITESPACE"," ",179],["T_FUNCTION","function",179],["T_WHITESPACE"," ",179],["T_STRING","isBucketAvailable",179],"(",["T_VARIABLE","$bucket",179],")",["T_WHITESPACE","\n    ",179],"{",["T_WHITESPACE","\n        ",180],["T_VARIABLE","$response",181],["T_WHITESPACE"," ",181],"=",["T_WHITESPACE"," ",181],["T_VARIABLE","$this",181],["T_OBJECT_OPERATOR","->",181],["T_STRING","_makeRequest",181],"(",["T_CONSTANT_ENCAPSED_STRING","'HEAD'",181],",",["T_WHITESPACE"," ",181],["T_VARIABLE","$bucket",181],",",["T_WHITESPACE"," ",181],["T_ARRAY","array",181],"(",["T_CONSTANT_ENCAPSED_STRING","'max-keys'",181],["T_DOUBLE_ARROW","=>",181],["T_LNUMBER","0",181],")",")",";",["T_WHITESPACE","\n\n        ",181],["T_RETURN","return",183],["T_WHITESPACE"," ",183],"(",["T_VARIABLE","$response",183],["T_OBJECT_OPERATOR","->",183],["T_STRING","getStatus",183],"(",")",["T_WHITESPACE"," ",183],["T_IS_NOT_EQUAL","!=",183],["T_WHITESPACE"," ",183],["T_LNUMBER","404",183],")",";",["T_WHITESPACE","\n    ",183],"}",["T_WHITESPACE","\n\n    ",184],["T_DOC_COMMENT","\/**\n     * Checks if a given object exists\n     *\n     * @param  string $object\n     * @return boolean\n     *\/",186],["T_WHITESPACE","\n    ",191],["T_PUBLIC","public",192],["T_WHITESPACE"," ",192],["T_FUNCTION","function",192],["T_WHITESPACE"," ",192],["T_STRING","isObjectAvailable",192],"(",["T_VARIABLE","$object",192],")",["T_WHITESPACE","\n    ",192],"{",["T_WHITESPACE","\n        ",193],["T_VARIABLE","$object",194],["T_WHITESPACE"," ",194],"=",["T_WHITESPACE"," ",194],["T_VARIABLE","$this",194],["T_OBJECT_OPERATOR","->",194],["T_STRING","_fixupObjectName",194],"(",["T_VARIABLE","$object",194],")",";",["T_WHITESPACE","\n        ",194],["T_VARIABLE","$response",195],["T_WHITESPACE"," ",195],"=",["T_WHITESPACE"," ",195],["T_VARIABLE","$this",195],["T_OBJECT_OPERATOR","->",195],["T_STRING","_makeRequest",195],"(",["T_CONSTANT_ENCAPSED_STRING","'HEAD'",195],",",["T_WHITESPACE"," ",195],["T_VARIABLE","$object",195],")",";",["T_WHITESPACE","\n\n        ",195],["T_RETURN","return",197],["T_WHITESPACE"," ",197],"(",["T_VARIABLE","$response",197],["T_OBJECT_OPERATOR","->",197],["T_STRING","getStatus",197],"(",")",["T_WHITESPACE"," ",197],["T_IS_EQUAL","==",197],["T_WHITESPACE"," ",197],["T_LNUMBER","200",197],")",";",["T_WHITESPACE","\n    ",197],"}",["T_WHITESPACE","\n\n    ",198],["T_DOC_COMMENT","\/**\n     * Remove a given bucket. All objects in the bucket must be removed prior\n     * to removing the bucket.\n     *\n     * @param  string $bucket\n     * @return boolean\n     *\/",200],["T_WHITESPACE","\n    ",206],["T_PUBLIC","public",207],["T_WHITESPACE"," ",207],["T_FUNCTION","function",207],["T_WHITESPACE"," ",207],["T_STRING","removeBucket",207],"(",["T_VARIABLE","$bucket",207],")",["T_WHITESPACE","\n    ",207],"{",["T_WHITESPACE","\n        ",208],["T_VARIABLE","$response",209],["T_WHITESPACE"," ",209],"=",["T_WHITESPACE"," ",209],["T_VARIABLE","$this",209],["T_OBJECT_OPERATOR","->",209],["T_STRING","_makeRequest",209],"(",["T_CONSTANT_ENCAPSED_STRING","'DELETE'",209],",",["T_WHITESPACE"," ",209],["T_VARIABLE","$bucket",209],")",";",["T_WHITESPACE","\n\n        ",209],["T_COMMENT","\/\/ Look for a 204 No Content response\n",211],["T_WHITESPACE","        ",212],["T_RETURN","return",212],["T_WHITESPACE"," ",212],"(",["T_VARIABLE","$response",212],["T_OBJECT_OPERATOR","->",212],["T_STRING","getStatus",212],"(",")",["T_WHITESPACE"," ",212],["T_IS_EQUAL","==",212],["T_WHITESPACE"," ",212],["T_LNUMBER","204",212],")",";",["T_WHITESPACE","\n    ",212],"}",["T_WHITESPACE","\n\n    ",213],["T_DOC_COMMENT","\/**\n     * Get metadata information for a given object\n     *\n     * @param  string $object\n     * @return array|false\n     *\/",215],["T_WHITESPACE","\n    ",220],["T_PUBLIC","public",221],["T_WHITESPACE"," ",221],["T_FUNCTION","function",221],["T_WHITESPACE"," ",221],["T_STRING","getInfo",221],"(",["T_VARIABLE","$object",221],")",["T_WHITESPACE","\n    ",221],"{",["T_WHITESPACE","\n        ",222],["T_VARIABLE","$info",223],["T_WHITESPACE"," ",223],"=",["T_WHITESPACE"," ",223],["T_ARRAY","array",223],"(",")",";",["T_WHITESPACE","\n\n        ",223],["T_VARIABLE","$object",225],["T_WHITESPACE"," ",225],"=",["T_WHITESPACE"," ",225],["T_VARIABLE","$this",225],["T_OBJECT_OPERATOR","->",225],["T_STRING","_fixupObjectName",225],"(",["T_VARIABLE","$object",225],")",";",["T_WHITESPACE","\n        ",225],["T_VARIABLE","$response",226],["T_WHITESPACE"," ",226],"=",["T_WHITESPACE"," ",226],["T_VARIABLE","$this",226],["T_OBJECT_OPERATOR","->",226],["T_STRING","_makeRequest",226],"(",["T_CONSTANT_ENCAPSED_STRING","'HEAD'",226],",",["T_WHITESPACE"," ",226],["T_VARIABLE","$object",226],")",";",["T_WHITESPACE","\n\n        ",226],["T_IF","if",228],["T_WHITESPACE"," ",228],"(",["T_VARIABLE","$response",228],["T_OBJECT_OPERATOR","->",228],["T_STRING","getStatus",228],"(",")",["T_WHITESPACE"," ",228],["T_IS_EQUAL","==",228],["T_WHITESPACE"," ",228],["T_LNUMBER","200",228],")",["T_WHITESPACE"," ",228],"{",["T_WHITESPACE","\n            ",228],["T_VARIABLE","$info",229],"[",["T_CONSTANT_ENCAPSED_STRING","'type'",229],"]",["T_WHITESPACE"," ",229],"=",["T_WHITESPACE"," ",229],["T_VARIABLE","$response",229],["T_OBJECT_OPERATOR","->",229],["T_STRING","getHeader",229],"(",["T_CONSTANT_ENCAPSED_STRING","'Content-type'",229],")",";",["T_WHITESPACE","\n            ",229],["T_VARIABLE","$info",230],"[",["T_CONSTANT_ENCAPSED_STRING","'size'",230],"]",["T_WHITESPACE"," ",230],"=",["T_WHITESPACE"," ",230],["T_VARIABLE","$response",230],["T_OBJECT_OPERATOR","->",230],["T_STRING","getHeader",230],"(",["T_CONSTANT_ENCAPSED_STRING","'Content-length'",230],")",";",["T_WHITESPACE","\n            ",230],["T_VARIABLE","$info",231],"[",["T_CONSTANT_ENCAPSED_STRING","'mtime'",231],"]",["T_WHITESPACE"," ",231],"=",["T_WHITESPACE"," ",231],["T_STRING","strtotime",231],"(",["T_VARIABLE","$response",231],["T_OBJECT_OPERATOR","->",231],["T_STRING","getHeader",231],"(",["T_CONSTANT_ENCAPSED_STRING","'Last-modified'",231],")",")",";",["T_WHITESPACE","\n            ",231],["T_VARIABLE","$info",232],"[",["T_CONSTANT_ENCAPSED_STRING","'etag'",232],"]",["T_WHITESPACE"," ",232],"=",["T_WHITESPACE"," ",232],["T_VARIABLE","$response",232],["T_OBJECT_OPERATOR","->",232],["T_STRING","getHeader",232],"(",["T_CONSTANT_ENCAPSED_STRING","'ETag'",232],")",";",["T_WHITESPACE","\n        ",232],"}",["T_WHITESPACE","\n        ",233],["T_ELSE","else",234],["T_WHITESPACE"," ",234],"{",["T_WHITESPACE","\n            ",234],["T_RETURN","return",235],["T_WHITESPACE"," ",235],["T_STRING","false",235],";",["T_WHITESPACE","\n        ",235],"}",["T_WHITESPACE","\n\n        ",236],["T_RETURN","return",238],["T_WHITESPACE"," ",238],["T_VARIABLE","$info",238],";",["T_WHITESPACE","\n    ",238],"}",["T_WHITESPACE","\n\n    ",239],["T_DOC_COMMENT","\/**\n     * List the S3 buckets\n     *\n     * @return array|false\n     *\/",241],["T_WHITESPACE","\n    ",245],["T_PUBLIC","public",246],["T_WHITESPACE"," ",246],["T_FUNCTION","function",246],["T_WHITESPACE"," ",246],["T_STRING","getBuckets",246],"(",")",["T_WHITESPACE","\n    ",246],"{",["T_WHITESPACE","\n        ",247],["T_VARIABLE","$response",248],["T_WHITESPACE"," ",248],"=",["T_WHITESPACE"," ",248],["T_VARIABLE","$this",248],["T_OBJECT_OPERATOR","->",248],["T_STRING","_makeRequest",248],"(",["T_CONSTANT_ENCAPSED_STRING","'GET'",248],")",";",["T_WHITESPACE","\n\n        ",248],["T_IF","if",250],["T_WHITESPACE"," ",250],"(",["T_VARIABLE","$response",250],["T_OBJECT_OPERATOR","->",250],["T_STRING","getStatus",250],"(",")",["T_WHITESPACE"," ",250],["T_IS_NOT_EQUAL","!=",250],["T_WHITESPACE"," ",250],["T_LNUMBER","200",250],")",["T_WHITESPACE"," ",250],"{",["T_WHITESPACE","\n            ",250],["T_RETURN","return",251],["T_WHITESPACE"," ",251],["T_STRING","false",251],";",["T_WHITESPACE","\n        ",251],"}",["T_WHITESPACE","\n\n        ",252],["T_VARIABLE","$xml",254],["T_WHITESPACE"," ",254],"=",["T_WHITESPACE"," ",254],["T_NEW","new",254],["T_WHITESPACE"," ",254],["T_STRING","SimpleXMLElement",254],"(",["T_VARIABLE","$response",254],["T_OBJECT_OPERATOR","->",254],["T_STRING","getBody",254],"(",")",")",";",["T_WHITESPACE","\n\n        ",254],["T_VARIABLE","$buckets",256],["T_WHITESPACE"," ",256],"=",["T_WHITESPACE"," ",256],["T_ARRAY","array",256],"(",")",";",["T_WHITESPACE","\n        ",256],["T_FOREACH","foreach",257],["T_WHITESPACE"," ",257],"(",["T_VARIABLE","$xml",257],["T_OBJECT_OPERATOR","->",257],["T_STRING","Buckets",257],["T_OBJECT_OPERATOR","->",257],["T_STRING","Bucket",257],["T_WHITESPACE"," ",257],["T_AS","as",257],["T_WHITESPACE"," ",257],["T_VARIABLE","$bucket",257],")",["T_WHITESPACE"," ",257],"{",["T_WHITESPACE","\n            ",257],["T_VARIABLE","$buckets",258],"[","]",["T_WHITESPACE"," ",258],"=",["T_WHITESPACE"," ",258],["T_STRING_CAST","(string)",258],["T_VARIABLE","$bucket",258],["T_OBJECT_OPERATOR","->",258],["T_STRING","Name",258],";",["T_WHITESPACE","\n        ",258],"}",["T_WHITESPACE","\n\n        ",259],["T_RETURN","return",261],["T_WHITESPACE"," ",261],["T_VARIABLE","$buckets",261],";",["T_WHITESPACE","\n    ",261],"}",["T_WHITESPACE","\n\n    ",262],["T_DOC_COMMENT","\/**\n     * Remove all objects in the bucket.\n     *\n     * @param string $bucket\n     * @return boolean\n     *\/",264],["T_WHITESPACE","\n    ",269],["T_PUBLIC","public",270],["T_WHITESPACE"," ",270],["T_FUNCTION","function",270],["T_WHITESPACE"," ",270],["T_STRING","cleanBucket",270],"(",["T_VARIABLE","$bucket",270],")",["T_WHITESPACE","\n    ",270],"{",["T_WHITESPACE","\n        ",271],["T_VARIABLE","$objects",272],["T_WHITESPACE"," ",272],"=",["T_WHITESPACE"," ",272],["T_VARIABLE","$this",272],["T_OBJECT_OPERATOR","->",272],["T_STRING","getObjectsByBucket",272],"(",["T_VARIABLE","$bucket",272],")",";",["T_WHITESPACE","\n        ",272],["T_IF","if",273],["T_WHITESPACE"," ",273],"(","!",["T_VARIABLE","$objects",273],")",["T_WHITESPACE"," ",273],"{",["T_WHITESPACE","\n            ",273],["T_RETURN","return",274],["T_WHITESPACE"," ",274],["T_STRING","false",274],";",["T_WHITESPACE","\n        ",274],"}",["T_WHITESPACE","\n\n        ",275],["T_WHILE","while",277],["T_WHITESPACE"," ",277],"(","!",["T_EMPTY","empty",277],"(",["T_VARIABLE","$objects",277],")",")",["T_WHITESPACE"," ",277],"{",["T_WHITESPACE","\n            ",277],["T_FOREACH","foreach",278],["T_WHITESPACE"," ",278],"(",["T_VARIABLE","$objects",278],["T_WHITESPACE"," ",278],["T_AS","as",278],["T_WHITESPACE"," ",278],["T_VARIABLE","$object",278],")",["T_WHITESPACE"," ",278],"{",["T_WHITESPACE","\n                ",278],["T_VARIABLE","$this",279],["T_OBJECT_OPERATOR","->",279],["T_STRING","removeObject",279],"(","\"",["T_VARIABLE","$bucket",279],["T_ENCAPSED_AND_WHITESPACE","\/",279],["T_VARIABLE","$object",279],"\"",")",";",["T_WHITESPACE","\n            ",279],"}",["T_WHITESPACE","\n            ",280],["T_VARIABLE","$params",281],"=",["T_WHITESPACE"," ",281],["T_ARRAY","array",281],["T_WHITESPACE"," ",281],"(",["T_WHITESPACE","\n                ",281],["T_CONSTANT_ENCAPSED_STRING","'marker'",282],["T_WHITESPACE"," ",282],["T_DOUBLE_ARROW","=>",282],["T_WHITESPACE"," ",282],["T_VARIABLE","$objects",282],"[",["T_STRING","count",282],"(",["T_VARIABLE","$objects",282],")","-",["T_LNUMBER","1",282],"]",["T_WHITESPACE","\n            ",282],")",";",["T_WHITESPACE","\n            ",283],["T_VARIABLE","$objects",284],["T_WHITESPACE"," ",284],"=",["T_WHITESPACE"," ",284],["T_VARIABLE","$this",284],["T_OBJECT_OPERATOR","->",284],["T_STRING","getObjectsByBucket",284],"(",["T_VARIABLE","$bucket",284],",",["T_VARIABLE","$params",284],")",";",["T_WHITESPACE","\n        ",284],"}",["T_WHITESPACE","\n        \n        ",285],["T_RETURN","return",287],["T_WHITESPACE"," ",287],["T_STRING","true",287],";",["T_WHITESPACE","\n    ",287],"}",["T_WHITESPACE","\n\n    ",288],["T_DOC_COMMENT","\/**\n     * List the objects in a bucket.\n     *\n     * Provides the list of object keys that are contained in the bucket.  Valid params include the following.\n     * prefix - Limits the response to keys which begin with the indicated prefix. You can use prefixes to separate a bucket into different sets of keys in a way similar to how a file system uses folders.\n     * marker - Indicates where in the bucket to begin listing. The list will only include keys that occur lexicographically after marker. This is convenient for pagination: To get the next page of results use the last key of the current page as the marker.\n     * max-keys - The maximum number of keys you'd like to see in the response body. The server might return fewer than this many keys, but will not return more.\n     * delimiter - Causes keys that contain the same string between the prefix and the first occurrence of the delimiter to be rolled up into a single result element in the CommonPrefixes collection. These rolled-up keys are not returned elsewhere in the response.\n     *\n     * @param  string $bucket\n     * @param array $params S3 GET Bucket Paramater\n     * @return array|false\n     *\/",290],["T_WHITESPACE","\n    ",302],["T_PUBLIC","public",303],["T_WHITESPACE"," ",303],["T_FUNCTION","function",303],["T_WHITESPACE"," ",303],["T_STRING","getObjectsByBucket",303],"(",["T_VARIABLE","$bucket",303],",",["T_WHITESPACE"," ",303],["T_VARIABLE","$params",303],["T_WHITESPACE"," ",303],"=",["T_WHITESPACE"," ",303],["T_ARRAY","array",303],"(",")",")",["T_WHITESPACE","\n    ",303],"{",["T_WHITESPACE","\n        ",304],["T_VARIABLE","$response",305],["T_WHITESPACE"," ",305],"=",["T_WHITESPACE"," ",305],["T_VARIABLE","$this",305],["T_OBJECT_OPERATOR","->",305],["T_STRING","_makeRequest",305],"(",["T_CONSTANT_ENCAPSED_STRING","'GET'",305],",",["T_WHITESPACE"," ",305],["T_VARIABLE","$bucket",305],",",["T_WHITESPACE"," ",305],["T_VARIABLE","$params",305],")",";",["T_WHITESPACE","\n\n        ",305],["T_IF","if",307],["T_WHITESPACE"," ",307],"(",["T_VARIABLE","$response",307],["T_OBJECT_OPERATOR","->",307],["T_STRING","getStatus",307],"(",")",["T_WHITESPACE"," ",307],["T_IS_NOT_EQUAL","!=",307],["T_WHITESPACE"," ",307],["T_LNUMBER","200",307],")",["T_WHITESPACE"," ",307],"{",["T_WHITESPACE","\n            ",307],["T_RETURN","return",308],["T_WHITESPACE"," ",308],["T_STRING","false",308],";",["T_WHITESPACE","\n        ",308],"}",["T_WHITESPACE","\n\n        ",309],["T_VARIABLE","$xml",311],["T_WHITESPACE"," ",311],"=",["T_WHITESPACE"," ",311],["T_NEW","new",311],["T_WHITESPACE"," ",311],["T_STRING","SimpleXMLElement",311],"(",["T_VARIABLE","$response",311],["T_OBJECT_OPERATOR","->",311],["T_STRING","getBody",311],"(",")",")",";",["T_WHITESPACE","\n\n        ",311],["T_VARIABLE","$objects",313],["T_WHITESPACE"," ",313],"=",["T_WHITESPACE"," ",313],["T_ARRAY","array",313],"(",")",";",["T_WHITESPACE","\n        ",313],["T_IF","if",314],["T_WHITESPACE"," ",314],"(",["T_ISSET","isset",314],"(",["T_VARIABLE","$xml",314],["T_OBJECT_OPERATOR","->",314],["T_STRING","Contents",314],")",")",["T_WHITESPACE"," ",314],"{",["T_WHITESPACE","\n            ",314],["T_FOREACH","foreach",315],["T_WHITESPACE"," ",315],"(",["T_VARIABLE","$xml",315],["T_OBJECT_OPERATOR","->",315],["T_STRING","Contents",315],["T_WHITESPACE"," ",315],["T_AS","as",315],["T_WHITESPACE"," ",315],["T_VARIABLE","$contents",315],")",["T_WHITESPACE"," ",315],"{",["T_WHITESPACE","\n                ",315],["T_FOREACH","foreach",316],["T_WHITESPACE"," ",316],"(",["T_VARIABLE","$contents",316],["T_OBJECT_OPERATOR","->",316],["T_STRING","Key",316],["T_WHITESPACE"," ",316],["T_AS","as",316],["T_WHITESPACE"," ",316],["T_VARIABLE","$object",316],")",["T_WHITESPACE"," ",316],"{",["T_WHITESPACE","\n                    ",316],["T_VARIABLE","$objects",317],"[","]",["T_WHITESPACE"," ",317],"=",["T_WHITESPACE"," ",317],["T_STRING_CAST","(string)",317],["T_VARIABLE","$object",317],";",["T_WHITESPACE","\n                ",317],"}",["T_WHITESPACE","\n            ",318],"}",["T_WHITESPACE","\n        ",319],"}",["T_WHITESPACE","\n\n        ",320],["T_RETURN","return",322],["T_WHITESPACE"," ",322],["T_VARIABLE","$objects",322],";",["T_WHITESPACE","\n    ",322],"}",["T_WHITESPACE","\n     ",323],["T_DOC_COMMENT","\/**\n     * List the objects and common prefixes in a bucket.\n     *\n     * Provides the list of object keys and common prefixes that are contained in the bucket.  Valid params include the following.\n     * prefix - Limits the response to keys which begin with the indicated prefix. You can use prefixes to separate a bucket into different sets of keys in a way similar to how a file system uses folders.\n     * marker - Indicates where in the bucket to begin listing. The list will only include keys that occur lexicographically after marker. This is convenient for pagination: To get the next page of results use the last key of the current page as the marker.\n     * max-keys - The maximum number of keys you'd like to see in the response body. The server might return fewer than this many keys, but will not return more.\n     * delimiter - Causes keys that contain the same string between the prefix and the first occurrence of the delimiter to be rolled up into a single result element in the CommonPrefixes collection. These rolled-up keys are not returned elsewhere in the response.\n     *\n     * @see ZF-11401\n     * @param  string $bucket\n     * @param array $params S3 GET Bucket Paramater\n     * @return array|false\n     *\/",324],["T_WHITESPACE","\n    ",337],["T_PUBLIC","public",338],["T_WHITESPACE"," ",338],["T_FUNCTION","function",338],["T_WHITESPACE"," ",338],["T_STRING","getObjectsAndPrefixesByBucket",338],"(",["T_VARIABLE","$bucket",338],",",["T_WHITESPACE"," ",338],["T_VARIABLE","$params",338],["T_WHITESPACE"," ",338],"=",["T_WHITESPACE"," ",338],["T_ARRAY","array",338],"(",")",")",["T_WHITESPACE","\n    ",338],"{",["T_WHITESPACE","\n        ",339],["T_VARIABLE","$response",340],["T_WHITESPACE"," ",340],"=",["T_WHITESPACE"," ",340],["T_VARIABLE","$this",340],["T_OBJECT_OPERATOR","->",340],["T_STRING","_makeRequest",340],"(",["T_CONSTANT_ENCAPSED_STRING","'GET'",340],",",["T_WHITESPACE"," ",340],["T_VARIABLE","$bucket",340],",",["T_WHITESPACE"," ",340],["T_VARIABLE","$params",340],")",";",["T_WHITESPACE","\n\n        ",340],["T_IF","if",342],["T_WHITESPACE"," ",342],"(",["T_VARIABLE","$response",342],["T_OBJECT_OPERATOR","->",342],["T_STRING","getStatus",342],"(",")",["T_WHITESPACE"," ",342],["T_IS_NOT_EQUAL","!=",342],["T_WHITESPACE"," ",342],["T_LNUMBER","200",342],")",["T_WHITESPACE"," ",342],"{",["T_WHITESPACE","\n            ",342],["T_RETURN","return",343],["T_WHITESPACE"," ",343],["T_STRING","false",343],";",["T_WHITESPACE","\n        ",343],"}",["T_WHITESPACE","\n\n        ",344],["T_VARIABLE","$xml",346],["T_WHITESPACE"," ",346],"=",["T_WHITESPACE"," ",346],["T_NEW","new",346],["T_WHITESPACE"," ",346],["T_STRING","SimpleXMLElement",346],"(",["T_VARIABLE","$response",346],["T_OBJECT_OPERATOR","->",346],["T_STRING","getBody",346],"(",")",")",";",["T_WHITESPACE","\n\n        ",346],["T_VARIABLE","$objects",348],["T_WHITESPACE"," ",348],"=",["T_WHITESPACE"," ",348],["T_ARRAY","array",348],"(",")",";",["T_WHITESPACE","\n        ",348],["T_IF","if",349],["T_WHITESPACE"," ",349],"(",["T_ISSET","isset",349],"(",["T_VARIABLE","$xml",349],["T_OBJECT_OPERATOR","->",349],["T_STRING","Contents",349],")",")",["T_WHITESPACE"," ",349],"{",["T_WHITESPACE","\n            ",349],["T_FOREACH","foreach",350],["T_WHITESPACE"," ",350],"(",["T_VARIABLE","$xml",350],["T_OBJECT_OPERATOR","->",350],["T_STRING","Contents",350],["T_WHITESPACE"," ",350],["T_AS","as",350],["T_WHITESPACE"," ",350],["T_VARIABLE","$contents",350],")",["T_WHITESPACE"," ",350],"{",["T_WHITESPACE","\n                ",350],["T_FOREACH","foreach",351],["T_WHITESPACE"," ",351],"(",["T_VARIABLE","$contents",351],["T_OBJECT_OPERATOR","->",351],["T_STRING","Key",351],["T_WHITESPACE"," ",351],["T_AS","as",351],["T_WHITESPACE"," ",351],["T_VARIABLE","$object",351],")",["T_WHITESPACE"," ",351],"{",["T_WHITESPACE","\n                    ",351],["T_VARIABLE","$objects",352],"[","]",["T_WHITESPACE"," ",352],"=",["T_WHITESPACE"," ",352],["T_STRING_CAST","(string)",352],["T_VARIABLE","$object",352],";",["T_WHITESPACE","\n                ",352],"}",["T_WHITESPACE","\n            ",353],"}",["T_WHITESPACE","\n        ",354],"}",["T_WHITESPACE","\n        ",355],["T_VARIABLE","$prefixes",356],["T_WHITESPACE"," ",356],"=",["T_WHITESPACE"," ",356],["T_ARRAY","array",356],"(",")",";",["T_WHITESPACE","\n        ",356],["T_IF","if",357],["T_WHITESPACE"," ",357],"(",["T_ISSET","isset",357],"(",["T_VARIABLE","$xml",357],["T_OBJECT_OPERATOR","->",357],["T_STRING","CommonPrefixes",357],")",")",["T_WHITESPACE"," ",357],"{",["T_WHITESPACE","\n            ",357],["T_FOREACH","foreach",358],["T_WHITESPACE"," ",358],"(",["T_VARIABLE","$xml",358],["T_OBJECT_OPERATOR","->",358],["T_STRING","CommonPrefixes",358],["T_WHITESPACE"," ",358],["T_AS","as",358],["T_WHITESPACE"," ",358],["T_VARIABLE","$prefix",358],")",["T_WHITESPACE"," ",358],"{",["T_WHITESPACE","\n                ",358],["T_FOREACH","foreach",359],["T_WHITESPACE"," ",359],"(",["T_VARIABLE","$prefix",359],["T_OBJECT_OPERATOR","->",359],["T_STRING","Prefix",359],["T_WHITESPACE"," ",359],["T_AS","as",359],["T_WHITESPACE"," ",359],["T_VARIABLE","$object",359],")",["T_WHITESPACE"," ",359],"{",["T_WHITESPACE","\n                    ",359],["T_VARIABLE","$prefixes",360],"[","]",["T_WHITESPACE"," ",360],"=",["T_WHITESPACE"," ",360],["T_STRING_CAST","(string)",360],["T_VARIABLE","$object",360],";",["T_WHITESPACE","\n                ",360],"}",["T_WHITESPACE","\n            ",361],"}",["T_WHITESPACE","\n        ",362],"}",["T_WHITESPACE","\n\n        ",363],["T_RETURN","return",365],["T_WHITESPACE"," ",365],["T_ARRAY","array",365],"(",["T_WHITESPACE","\n            ",365],["T_CONSTANT_ENCAPSED_STRING","'objects'",366],["T_WHITESPACE","  ",366],["T_DOUBLE_ARROW","=>",366],["T_WHITESPACE"," ",366],["T_VARIABLE","$objects",366],",",["T_WHITESPACE","\n            ",366],["T_CONSTANT_ENCAPSED_STRING","'prefixes'",367],["T_WHITESPACE"," ",367],["T_DOUBLE_ARROW","=>",367],["T_WHITESPACE"," ",367],["T_VARIABLE","$prefixes",367],["T_WHITESPACE","\n        ",367],")",";",["T_WHITESPACE","\n    ",368],"}",["T_WHITESPACE","\n    ",369],["T_DOC_COMMENT","\/**\n     * Make sure the object name is valid\n     *\n     * @param  string $object\n     * @return string\n     *\/",370],["T_WHITESPACE","\n    ",375],["T_PROTECTED","protected",376],["T_WHITESPACE"," ",376],["T_FUNCTION","function",376],["T_WHITESPACE"," ",376],["T_STRING","_fixupObjectName",376],"(",["T_VARIABLE","$object",376],")",["T_WHITESPACE","\n    ",376],"{",["T_WHITESPACE","\n        ",377],["T_VARIABLE","$nameparts",378],["T_WHITESPACE"," ",378],"=",["T_WHITESPACE"," ",378],["T_STRING","explode",378],"(",["T_CONSTANT_ENCAPSED_STRING","'\/'",378],",",["T_WHITESPACE"," ",378],["T_VARIABLE","$object",378],")",";",["T_WHITESPACE","\n\n        ",378],["T_VARIABLE","$this",380],["T_OBJECT_OPERATOR","->",380],["T_STRING","_validBucketName",380],"(",["T_VARIABLE","$nameparts",380],"[",["T_LNUMBER","0",380],"]",")",";",["T_WHITESPACE","\n\n        ",380],["T_VARIABLE","$firstpart",382],["T_WHITESPACE"," ",382],"=",["T_WHITESPACE"," ",382],["T_STRING","array_shift",382],"(",["T_VARIABLE","$nameparts",382],")",";",["T_WHITESPACE","\n        ",382],["T_IF","if",383],["T_WHITESPACE"," ",383],"(",["T_STRING","count",383],"(",["T_VARIABLE","$nameparts",383],")",["T_WHITESPACE"," ",383],["T_IS_EQUAL","==",383],["T_WHITESPACE"," ",383],["T_LNUMBER","0",383],")",["T_WHITESPACE"," ",383],"{",["T_WHITESPACE","\n            ",383],["T_RETURN","return",384],["T_WHITESPACE"," ",384],["T_VARIABLE","$firstpart",384],";",["T_WHITESPACE","\n        ",384],"}",["T_WHITESPACE","\n\n        ",385],["T_RETURN","return",387],["T_WHITESPACE"," ",387],["T_VARIABLE","$firstpart",387],".",["T_CONSTANT_ENCAPSED_STRING","'\/'",387],".",["T_STRING","join",387],"(",["T_CONSTANT_ENCAPSED_STRING","'\/'",387],",",["T_WHITESPACE"," ",387],["T_STRING","array_map",387],"(",["T_CONSTANT_ENCAPSED_STRING","'rawurlencode'",387],",",["T_WHITESPACE"," ",387],["T_VARIABLE","$nameparts",387],")",")",";",["T_WHITESPACE","\n    ",387],"}",["T_WHITESPACE","\n\n    ",388],["T_DOC_COMMENT","\/**\n     * Get an object\n     *\n     * @param  string $object\n     * @param  bool   $paidobject This is \"requestor pays\" object\n     * @return string|false\n     *\/",390],["T_WHITESPACE","\n    ",396],["T_PUBLIC","public",397],["T_WHITESPACE"," ",397],["T_FUNCTION","function",397],["T_WHITESPACE"," ",397],["T_STRING","getObject",397],"(",["T_VARIABLE","$object",397],",",["T_WHITESPACE"," ",397],["T_VARIABLE","$paidobject",397],"=",["T_STRING","false",397],")",["T_WHITESPACE","\n    ",397],"{",["T_WHITESPACE","\n        ",398],["T_VARIABLE","$object",399],["T_WHITESPACE"," ",399],"=",["T_WHITESPACE"," ",399],["T_VARIABLE","$this",399],["T_OBJECT_OPERATOR","->",399],["T_STRING","_fixupObjectName",399],"(",["T_VARIABLE","$object",399],")",";",["T_WHITESPACE","\n        ",399],["T_IF","if",400],["T_WHITESPACE"," ",400],"(",["T_VARIABLE","$paidobject",400],")",["T_WHITESPACE"," ",400],"{",["T_WHITESPACE","\n            ",400],["T_VARIABLE","$response",401],["T_WHITESPACE"," ",401],"=",["T_WHITESPACE"," ",401],["T_VARIABLE","$this",401],["T_OBJECT_OPERATOR","->",401],["T_STRING","_makeRequest",401],"(",["T_CONSTANT_ENCAPSED_STRING","'GET'",401],",",["T_WHITESPACE"," ",401],["T_VARIABLE","$object",401],",",["T_WHITESPACE"," ",401],["T_STRING","null",401],",",["T_WHITESPACE"," ",401],["T_ARRAY","array",401],"(",["T_STRING","self",401],["T_DOUBLE_COLON","::",401],["T_STRING","S3_REQUESTPAY_HEADER",401],["T_WHITESPACE"," ",401],["T_DOUBLE_ARROW","=>",401],["T_WHITESPACE"," ",401],["T_CONSTANT_ENCAPSED_STRING","'requester'",401],")",")",";",["T_WHITESPACE","\n        ",401],"}",["T_WHITESPACE","\n        ",402],["T_ELSE","else",403],["T_WHITESPACE"," ",403],"{",["T_WHITESPACE","\n            ",403],["T_VARIABLE","$response",404],["T_WHITESPACE"," ",404],"=",["T_WHITESPACE"," ",404],["T_VARIABLE","$this",404],["T_OBJECT_OPERATOR","->",404],["T_STRING","_makeRequest",404],"(",["T_CONSTANT_ENCAPSED_STRING","'GET'",404],",",["T_WHITESPACE"," ",404],["T_VARIABLE","$object",404],")",";",["T_WHITESPACE","\n        ",404],"}",["T_WHITESPACE","\n\n        ",405],["T_IF","if",407],["T_WHITESPACE"," ",407],"(",["T_VARIABLE","$response",407],["T_OBJECT_OPERATOR","->",407],["T_STRING","getStatus",407],"(",")",["T_WHITESPACE"," ",407],["T_IS_NOT_EQUAL","!=",407],["T_WHITESPACE"," ",407],["T_LNUMBER","200",407],")",["T_WHITESPACE"," ",407],"{",["T_WHITESPACE","\n            ",407],["T_RETURN","return",408],["T_WHITESPACE"," ",408],["T_STRING","false",408],";",["T_WHITESPACE","\n        ",408],"}",["T_WHITESPACE","\n\n        ",409],["T_RETURN","return",411],["T_WHITESPACE"," ",411],["T_VARIABLE","$response",411],["T_OBJECT_OPERATOR","->",411],["T_STRING","getBody",411],"(",")",";",["T_WHITESPACE","\n    ",411],"}",["T_WHITESPACE","\n\n    ",412],["T_DOC_COMMENT","\/**\n     * Get an object using streaming\n     *\n     * Can use either provided filename for storage or create a temp file if none provided.\n     *\n     * @param  string $object Object path\n     * @param  string $streamfile File to write the stream to\n     * @param  bool   $paidobject This is \"requestor pays\" object\n     * @return Zend_Http_Response_Stream|false\n     *\/",414],["T_WHITESPACE","\n    ",423],["T_PUBLIC","public",424],["T_WHITESPACE"," ",424],["T_FUNCTION","function",424],["T_WHITESPACE"," ",424],["T_STRING","getObjectStream",424],"(",["T_VARIABLE","$object",424],",",["T_WHITESPACE"," ",424],["T_VARIABLE","$streamfile",424],["T_WHITESPACE"," ",424],"=",["T_WHITESPACE"," ",424],["T_STRING","null",424],",",["T_WHITESPACE"," ",424],["T_VARIABLE","$paidobject",424],"=",["T_STRING","false",424],")",["T_WHITESPACE","\n    ",424],"{",["T_WHITESPACE","\n        ",425],["T_VARIABLE","$object",426],["T_WHITESPACE"," ",426],"=",["T_WHITESPACE"," ",426],["T_VARIABLE","$this",426],["T_OBJECT_OPERATOR","->",426],["T_STRING","_fixupObjectName",426],"(",["T_VARIABLE","$object",426],")",";",["T_WHITESPACE","\n        ",426],["T_STRING","self",427],["T_DOUBLE_COLON","::",427],["T_STRING","getHttpClient",427],"(",")",["T_OBJECT_OPERATOR","->",427],["T_STRING","setStream",427],"(",["T_VARIABLE","$streamfile",427],"?",["T_VARIABLE","$streamfile",427],":",["T_STRING","true",427],")",";",["T_WHITESPACE","\n        ",427],["T_IF","if",428],["T_WHITESPACE"," ",428],"(",["T_VARIABLE","$paidobject",428],")",["T_WHITESPACE"," ",428],"{",["T_WHITESPACE","\n            ",428],["T_VARIABLE","$response",429],["T_WHITESPACE"," ",429],"=",["T_WHITESPACE"," ",429],["T_VARIABLE","$this",429],["T_OBJECT_OPERATOR","->",429],["T_STRING","_makeRequest",429],"(",["T_CONSTANT_ENCAPSED_STRING","'GET'",429],",",["T_WHITESPACE"," ",429],["T_VARIABLE","$object",429],",",["T_WHITESPACE"," ",429],["T_STRING","null",429],",",["T_WHITESPACE"," ",429],["T_ARRAY","array",429],"(",["T_STRING","self",429],["T_DOUBLE_COLON","::",429],["T_STRING","S3_REQUESTPAY_HEADER",429],["T_WHITESPACE"," ",429],["T_DOUBLE_ARROW","=>",429],["T_WHITESPACE"," ",429],["T_CONSTANT_ENCAPSED_STRING","'requester'",429],")",")",";",["T_WHITESPACE","\n        ",429],"}",["T_WHITESPACE","\n        ",430],["T_ELSE","else",431],["T_WHITESPACE"," ",431],"{",["T_WHITESPACE","\n            ",431],["T_VARIABLE","$response",432],["T_WHITESPACE"," ",432],"=",["T_WHITESPACE"," ",432],["T_VARIABLE","$this",432],["T_OBJECT_OPERATOR","->",432],["T_STRING","_makeRequest",432],"(",["T_CONSTANT_ENCAPSED_STRING","'GET'",432],",",["T_WHITESPACE"," ",432],["T_VARIABLE","$object",432],")",";",["T_WHITESPACE","\n        ",432],"}",["T_WHITESPACE","\n        ",433],["T_STRING","self",434],["T_DOUBLE_COLON","::",434],["T_STRING","getHttpClient",434],"(",")",["T_OBJECT_OPERATOR","->",434],["T_STRING","setStream",434],"(",["T_STRING","null",434],")",";",["T_WHITESPACE","\n\n        ",434],["T_IF","if",436],["T_WHITESPACE"," ",436],"(",["T_VARIABLE","$response",436],["T_OBJECT_OPERATOR","->",436],["T_STRING","getStatus",436],"(",")",["T_WHITESPACE"," ",436],["T_IS_NOT_EQUAL","!=",436],["T_WHITESPACE"," ",436],["T_LNUMBER","200",436],["T_WHITESPACE"," ",436],["T_BOOLEAN_OR","||",436],["T_WHITESPACE"," ",436],"!","(",["T_VARIABLE","$response",436],["T_WHITESPACE"," ",436],["T_INSTANCEOF","instanceof",436],["T_WHITESPACE"," ",436],["T_STRING","Zend_Http_Response_Stream",436],")",")",["T_WHITESPACE"," ",436],"{",["T_WHITESPACE","\n            ",436],["T_RETURN","return",437],["T_WHITESPACE"," ",437],["T_STRING","false",437],";",["T_WHITESPACE","\n        ",437],"}",["T_WHITESPACE","\n\n        ",438],["T_RETURN","return",440],["T_WHITESPACE"," ",440],["T_VARIABLE","$response",440],";",["T_WHITESPACE","\n    ",440],"}",["T_WHITESPACE","\n\n    ",441],["T_DOC_COMMENT","\/**\n     * Upload an object by a PHP string\n     *\n     * @param  string $object Object name\n     * @param  string|resource $data   Object data (can be string or stream)\n     * @param  array  $meta   Metadata\n     * @return boolean\n     *\/",443],["T_WHITESPACE","\n    ",450],["T_PUBLIC","public",451],["T_WHITESPACE"," ",451],["T_FUNCTION","function",451],["T_WHITESPACE"," ",451],["T_STRING","putObject",451],"(",["T_VARIABLE","$object",451],",",["T_WHITESPACE"," ",451],["T_VARIABLE","$data",451],",",["T_WHITESPACE"," ",451],["T_VARIABLE","$meta",451],"=",["T_STRING","null",451],")",["T_WHITESPACE","\n    ",451],"{",["T_WHITESPACE","\n        ",452],["T_VARIABLE","$object",453],["T_WHITESPACE"," ",453],"=",["T_WHITESPACE"," ",453],["T_VARIABLE","$this",453],["T_OBJECT_OPERATOR","->",453],["T_STRING","_fixupObjectName",453],"(",["T_VARIABLE","$object",453],")",";",["T_WHITESPACE","\n        ",453],["T_VARIABLE","$headers",454],["T_WHITESPACE"," ",454],"=",["T_WHITESPACE"," ",454],"(",["T_STRING","is_array",454],"(",["T_VARIABLE","$meta",454],")",")",["T_WHITESPACE"," ",454],"?",["T_WHITESPACE"," ",454],["T_VARIABLE","$meta",454],["T_WHITESPACE"," ",454],":",["T_WHITESPACE"," ",454],["T_ARRAY","array",454],"(",")",";",["T_WHITESPACE","\n\n        ",454],["T_IF","if",456],"(","!",["T_STRING","is_resource",456],"(",["T_VARIABLE","$data",456],")",")",["T_WHITESPACE"," ",456],"{",["T_WHITESPACE","\n            ",456],["T_VARIABLE","$headers",457],"[",["T_CONSTANT_ENCAPSED_STRING","'Content-MD5'",457],"]",["T_WHITESPACE"," ",457],"=",["T_WHITESPACE"," ",457],["T_STRING","base64_encode",457],"(",["T_STRING","md5",457],"(",["T_VARIABLE","$data",457],",",["T_WHITESPACE"," ",457],["T_STRING","true",457],")",")",";",["T_WHITESPACE","\n        ",457],"}",["T_WHITESPACE","\n        ",458],["T_VARIABLE","$headers",459],"[",["T_CONSTANT_ENCAPSED_STRING","'Expect'",459],"]",["T_WHITESPACE"," ",459],"=",["T_WHITESPACE"," ",459],["T_CONSTANT_ENCAPSED_STRING","'100-continue'",459],";",["T_WHITESPACE","\n\n        ",459],["T_IF","if",461],["T_WHITESPACE"," ",461],"(","!",["T_ISSET","isset",461],"(",["T_VARIABLE","$headers",461],"[",["T_STRING","self",461],["T_DOUBLE_COLON","::",461],["T_STRING","S3_CONTENT_TYPE_HEADER",461],"]",")",")",["T_WHITESPACE"," ",461],"{",["T_WHITESPACE","\n            ",461],["T_VARIABLE","$headers",462],"[",["T_STRING","self",462],["T_DOUBLE_COLON","::",462],["T_STRING","S3_CONTENT_TYPE_HEADER",462],"]",["T_WHITESPACE"," ",462],"=",["T_WHITESPACE"," ",462],["T_STRING","self",462],["T_DOUBLE_COLON","::",462],["T_STRING","getMimeType",462],"(",["T_VARIABLE","$object",462],")",";",["T_WHITESPACE","\n        ",462],"}",["T_WHITESPACE","\n\n        ",463],["T_VARIABLE","$response",465],["T_WHITESPACE"," ",465],"=",["T_WHITESPACE"," ",465],["T_VARIABLE","$this",465],["T_OBJECT_OPERATOR","->",465],["T_STRING","_makeRequest",465],"(",["T_CONSTANT_ENCAPSED_STRING","'PUT'",465],",",["T_WHITESPACE"," ",465],["T_VARIABLE","$object",465],",",["T_WHITESPACE"," ",465],["T_STRING","null",465],",",["T_WHITESPACE"," ",465],["T_VARIABLE","$headers",465],",",["T_WHITESPACE"," ",465],["T_VARIABLE","$data",465],")",";",["T_WHITESPACE","\n\n        ",465],["T_COMMENT","\/\/ Check the MD5 Etag returned by S3 against and MD5 of the buffer\n",467],["T_WHITESPACE","        ",468],["T_IF","if",468],["T_WHITESPACE"," ",468],"(",["T_VARIABLE","$response",468],["T_OBJECT_OPERATOR","->",468],["T_STRING","getStatus",468],"(",")",["T_WHITESPACE"," ",468],["T_IS_EQUAL","==",468],["T_WHITESPACE"," ",468],["T_LNUMBER","200",468],")",["T_WHITESPACE"," ",468],"{",["T_WHITESPACE","\n            ",468],["T_COMMENT","\/\/ It is escaped by double quotes for some reason\n",469],["T_WHITESPACE","            ",470],["T_VARIABLE","$etag",470],["T_WHITESPACE"," ",470],"=",["T_WHITESPACE"," ",470],["T_STRING","str_replace",470],"(",["T_CONSTANT_ENCAPSED_STRING","'\"'",470],",",["T_WHITESPACE"," ",470],["T_CONSTANT_ENCAPSED_STRING","''",470],",",["T_WHITESPACE"," ",470],["T_VARIABLE","$response",470],["T_OBJECT_OPERATOR","->",470],["T_STRING","getHeader",470],"(",["T_CONSTANT_ENCAPSED_STRING","'Etag'",470],")",")",";",["T_WHITESPACE","\n\n            ",470],["T_IF","if",472],["T_WHITESPACE"," ",472],"(",["T_STRING","is_resource",472],"(",["T_VARIABLE","$data",472],")",["T_WHITESPACE"," ",472],["T_BOOLEAN_OR","||",472],["T_WHITESPACE"," ",472],["T_VARIABLE","$etag",472],["T_WHITESPACE"," ",472],["T_IS_EQUAL","==",472],["T_WHITESPACE"," ",472],["T_STRING","md5",472],"(",["T_VARIABLE","$data",472],")",")",["T_WHITESPACE"," ",472],"{",["T_WHITESPACE","\n                ",472],["T_RETURN","return",473],["T_WHITESPACE"," ",473],["T_STRING","true",473],";",["T_WHITESPACE","\n            ",473],"}",["T_WHITESPACE","\n        ",474],"}",["T_WHITESPACE","\n\n        ",475],["T_RETURN","return",477],["T_WHITESPACE"," ",477],["T_STRING","false",477],";",["T_WHITESPACE","\n    ",477],"}",["T_WHITESPACE","\n\n    ",478],["T_DOC_COMMENT","\/**\n     * Put file to S3 as object\n     *\n     * @param string $path   File name\n     * @param string $object Object name\n     * @param array  $meta   Metadata\n     * @return boolean\n     *\/",480],["T_WHITESPACE","\n    ",487],["T_PUBLIC","public",488],["T_WHITESPACE"," ",488],["T_FUNCTION","function",488],["T_WHITESPACE"," ",488],["T_STRING","putFile",488],"(",["T_VARIABLE","$path",488],",",["T_WHITESPACE"," ",488],["T_VARIABLE","$object",488],",",["T_WHITESPACE"," ",488],["T_VARIABLE","$meta",488],"=",["T_STRING","null",488],")",["T_WHITESPACE","\n    ",488],"{",["T_WHITESPACE","\n        ",489],["T_VARIABLE","$data",490],["T_WHITESPACE"," ",490],"=",["T_WHITESPACE"," ",490],"@",["T_STRING","file_get_contents",490],"(",["T_VARIABLE","$path",490],")",";",["T_WHITESPACE","\n        ",490],["T_IF","if",491],["T_WHITESPACE"," ",491],"(",["T_VARIABLE","$data",491],["T_WHITESPACE"," ",491],["T_IS_IDENTICAL","===",491],["T_WHITESPACE"," ",491],["T_STRING","false",491],")",["T_WHITESPACE"," ",491],"{",["T_WHITESPACE","\n            ",491],["T_DOC_COMMENT","\/**\n             * @see Zend_Service_Amazon_S3_Exception\n             *\/",492],["T_WHITESPACE","\n            ",494],["T_COMMENT","#require_once 'Zend\/Service\/Amazon\/S3\/Exception.php';\n",495],["T_WHITESPACE","            ",496],["T_THROW","throw",496],["T_WHITESPACE"," ",496],["T_NEW","new",496],["T_WHITESPACE"," ",496],["T_STRING","Zend_Service_Amazon_S3_Exception",496],"(","\"",["T_ENCAPSED_AND_WHITESPACE","Cannot read file ",496],["T_VARIABLE","$path",496],"\"",")",";",["T_WHITESPACE","\n        ",496],"}",["T_WHITESPACE","\n\n        ",497],["T_IF","if",499],["T_WHITESPACE"," ",499],"(","!",["T_STRING","is_array",499],"(",["T_VARIABLE","$meta",499],")",")",["T_WHITESPACE"," ",499],"{",["T_WHITESPACE","\n            ",499],["T_VARIABLE","$meta",500],["T_WHITESPACE"," ",500],"=",["T_WHITESPACE"," ",500],["T_ARRAY","array",500],"(",")",";",["T_WHITESPACE","\n        ",500],"}",["T_WHITESPACE","\n\n        ",501],["T_IF","if",503],["T_WHITESPACE"," ",503],"(","!",["T_ISSET","isset",503],"(",["T_VARIABLE","$meta",503],"[",["T_STRING","self",503],["T_DOUBLE_COLON","::",503],["T_STRING","S3_CONTENT_TYPE_HEADER",503],"]",")",")",["T_WHITESPACE"," ",503],"{",["T_WHITESPACE","\n           ",503],["T_VARIABLE","$meta",504],"[",["T_STRING","self",504],["T_DOUBLE_COLON","::",504],["T_STRING","S3_CONTENT_TYPE_HEADER",504],"]",["T_WHITESPACE"," ",504],"=",["T_WHITESPACE"," ",504],["T_STRING","self",504],["T_DOUBLE_COLON","::",504],["T_STRING","getMimeType",504],"(",["T_VARIABLE","$path",504],")",";",["T_WHITESPACE","\n        ",504],"}",["T_WHITESPACE","\n\n        ",505],["T_RETURN","return",507],["T_WHITESPACE"," ",507],["T_VARIABLE","$this",507],["T_OBJECT_OPERATOR","->",507],["T_STRING","putObject",507],"(",["T_VARIABLE","$object",507],",",["T_WHITESPACE"," ",507],["T_VARIABLE","$data",507],",",["T_WHITESPACE"," ",507],["T_VARIABLE","$meta",507],")",";",["T_WHITESPACE","\n    ",507],"}",["T_WHITESPACE","\n\n    ",508],["T_DOC_COMMENT","\/**\n     * Put file to S3 as object, using streaming\n     *\n     * @param string $path   File name\n     * @param string $object Object name\n     * @param array  $meta   Metadata\n     * @return boolean\n     *\/",510],["T_WHITESPACE","\n    ",517],["T_PUBLIC","public",518],["T_WHITESPACE"," ",518],["T_FUNCTION","function",518],["T_WHITESPACE"," ",518],["T_STRING","putFileStream",518],"(",["T_VARIABLE","$path",518],",",["T_WHITESPACE"," ",518],["T_VARIABLE","$object",518],",",["T_WHITESPACE"," ",518],["T_VARIABLE","$meta",518],"=",["T_STRING","null",518],")",["T_WHITESPACE","\n    ",518],"{",["T_WHITESPACE","\n        ",519],["T_VARIABLE","$data",520],["T_WHITESPACE"," ",520],"=",["T_WHITESPACE"," ",520],"@",["T_STRING","fopen",520],"(",["T_VARIABLE","$path",520],",",["T_WHITESPACE"," ",520],["T_CONSTANT_ENCAPSED_STRING","\"rb\"",520],")",";",["T_WHITESPACE","\n        ",520],["T_IF","if",521],["T_WHITESPACE"," ",521],"(",["T_VARIABLE","$data",521],["T_WHITESPACE"," ",521],["T_IS_IDENTICAL","===",521],["T_WHITESPACE"," ",521],["T_STRING","false",521],")",["T_WHITESPACE"," ",521],"{",["T_WHITESPACE","\n            ",521],["T_DOC_COMMENT","\/**\n             * @see Zend_Service_Amazon_S3_Exception\n             *\/",522],["T_WHITESPACE","\n            ",524],["T_COMMENT","#require_once 'Zend\/Service\/Amazon\/S3\/Exception.php';\n",525],["T_WHITESPACE","            ",526],["T_THROW","throw",526],["T_WHITESPACE"," ",526],["T_NEW","new",526],["T_WHITESPACE"," ",526],["T_STRING","Zend_Service_Amazon_S3_Exception",526],"(","\"",["T_ENCAPSED_AND_WHITESPACE","Cannot open file ",526],["T_VARIABLE","$path",526],"\"",")",";",["T_WHITESPACE","\n        ",526],"}",["T_WHITESPACE","\n\n        ",527],["T_IF","if",529],["T_WHITESPACE"," ",529],"(","!",["T_STRING","is_array",529],"(",["T_VARIABLE","$meta",529],")",")",["T_WHITESPACE"," ",529],"{",["T_WHITESPACE","\n            ",529],["T_VARIABLE","$meta",530],["T_WHITESPACE"," ",530],"=",["T_WHITESPACE"," ",530],["T_ARRAY","array",530],"(",")",";",["T_WHITESPACE","\n        ",530],"}",["T_WHITESPACE","\n\n        ",531],["T_IF","if",533],["T_WHITESPACE"," ",533],"(","!",["T_ISSET","isset",533],"(",["T_VARIABLE","$meta",533],"[",["T_STRING","self",533],["T_DOUBLE_COLON","::",533],["T_STRING","S3_CONTENT_TYPE_HEADER",533],"]",")",")",["T_WHITESPACE"," ",533],"{",["T_WHITESPACE","\n           ",533],["T_VARIABLE","$meta",534],"[",["T_STRING","self",534],["T_DOUBLE_COLON","::",534],["T_STRING","S3_CONTENT_TYPE_HEADER",534],"]",["T_WHITESPACE"," ",534],"=",["T_WHITESPACE"," ",534],["T_STRING","self",534],["T_DOUBLE_COLON","::",534],["T_STRING","getMimeType",534],"(",["T_VARIABLE","$path",534],")",";",["T_WHITESPACE","\n        ",534],"}",["T_WHITESPACE","\n\n        ",535],["T_IF","if",537],"(","!",["T_ISSET","isset",537],"(",["T_VARIABLE","$meta",537],"[",["T_CONSTANT_ENCAPSED_STRING","'Content-MD5'",537],"]",")",")",["T_WHITESPACE"," ",537],"{",["T_WHITESPACE","\n            ",537],["T_VARIABLE","$meta",538],"[",["T_CONSTANT_ENCAPSED_STRING","'Content-MD5'",538],"]",["T_WHITESPACE"," ",538],"=",["T_WHITESPACE"," ",538],["T_STRING","base64_encode",538],"(",["T_STRING","md5_file",538],"(",["T_VARIABLE","$path",538],",",["T_WHITESPACE"," ",538],["T_STRING","true",538],")",")",";",["T_WHITESPACE","\n        ",538],"}",["T_WHITESPACE","\n\n        ",539],["T_RETURN","return",541],["T_WHITESPACE"," ",541],["T_VARIABLE","$this",541],["T_OBJECT_OPERATOR","->",541],["T_STRING","putObject",541],"(",["T_VARIABLE","$object",541],",",["T_WHITESPACE"," ",541],["T_VARIABLE","$data",541],",",["T_WHITESPACE"," ",541],["T_VARIABLE","$meta",541],")",";",["T_WHITESPACE","\n    ",541],"}",["T_WHITESPACE","\n\n    ",542],["T_DOC_COMMENT","\/**\n     * Remove a given object\n     *\n     * @param  string $object\n     * @return boolean\n     *\/",544],["T_WHITESPACE","\n    ",549],["T_PUBLIC","public",550],["T_WHITESPACE"," ",550],["T_FUNCTION","function",550],["T_WHITESPACE"," ",550],["T_STRING","removeObject",550],"(",["T_VARIABLE","$object",550],")",["T_WHITESPACE","\n    ",550],"{",["T_WHITESPACE","\n        ",551],["T_VARIABLE","$object",552],["T_WHITESPACE"," ",552],"=",["T_WHITESPACE"," ",552],["T_VARIABLE","$this",552],["T_OBJECT_OPERATOR","->",552],["T_STRING","_fixupObjectName",552],"(",["T_VARIABLE","$object",552],")",";",["T_WHITESPACE","\n        ",552],["T_VARIABLE","$response",553],["T_WHITESPACE"," ",553],"=",["T_WHITESPACE"," ",553],["T_VARIABLE","$this",553],["T_OBJECT_OPERATOR","->",553],["T_STRING","_makeRequest",553],"(",["T_CONSTANT_ENCAPSED_STRING","'DELETE'",553],",",["T_WHITESPACE"," ",553],["T_VARIABLE","$object",553],")",";",["T_WHITESPACE","\n\n        ",553],["T_COMMENT","\/\/ Look for a 204 No Content response\n",555],["T_WHITESPACE","        ",556],["T_RETURN","return",556],["T_WHITESPACE"," ",556],"(",["T_VARIABLE","$response",556],["T_OBJECT_OPERATOR","->",556],["T_STRING","getStatus",556],"(",")",["T_WHITESPACE"," ",556],["T_IS_EQUAL","==",556],["T_WHITESPACE"," ",556],["T_LNUMBER","204",556],")",";",["T_WHITESPACE","\n    ",556],"}",["T_WHITESPACE","\n\n    ",557],["T_DOC_COMMENT","\/**\n     * Copy an object\n     *\n     * @param  string $sourceObject  Source object name\n     * @param  string $destObject    Destination object name\n     * @param  array  $meta          (OPTIONAL) Metadata to apply to desination object.\n     *                               Set to null to copy metadata from source object.\n     * @return boolean\n     *\/",559],["T_WHITESPACE","\n    ",567],["T_PUBLIC","public",568],["T_WHITESPACE"," ",568],["T_FUNCTION","function",568],["T_WHITESPACE"," ",568],["T_STRING","copyObject",568],"(",["T_VARIABLE","$sourceObject",568],",",["T_WHITESPACE"," ",568],["T_VARIABLE","$destObject",568],",",["T_WHITESPACE"," ",568],["T_VARIABLE","$meta",568],["T_WHITESPACE"," ",568],"=",["T_WHITESPACE"," ",568],["T_STRING","null",568],")",["T_WHITESPACE","\n    ",568],"{",["T_WHITESPACE","\n        ",569],["T_VARIABLE","$sourceObject",570],["T_WHITESPACE"," ",570],"=",["T_WHITESPACE"," ",570],["T_VARIABLE","$this",570],["T_OBJECT_OPERATOR","->",570],["T_STRING","_fixupObjectName",570],"(",["T_VARIABLE","$sourceObject",570],")",";",["T_WHITESPACE","\n        ",570],["T_VARIABLE","$destObject",571],["T_WHITESPACE","   ",571],"=",["T_WHITESPACE"," ",571],["T_VARIABLE","$this",571],["T_OBJECT_OPERATOR","->",571],["T_STRING","_fixupObjectName",571],"(",["T_VARIABLE","$destObject",571],")",";",["T_WHITESPACE","\n\n        ",571],["T_VARIABLE","$headers",573],["T_WHITESPACE"," ",573],"=",["T_WHITESPACE"," ",573],"(",["T_STRING","is_array",573],"(",["T_VARIABLE","$meta",573],")",")",["T_WHITESPACE"," ",573],"?",["T_WHITESPACE"," ",573],["T_VARIABLE","$meta",573],["T_WHITESPACE"," ",573],":",["T_WHITESPACE"," ",573],["T_ARRAY","array",573],"(",")",";",["T_WHITESPACE","\n        ",573],["T_VARIABLE","$headers",574],"[",["T_CONSTANT_ENCAPSED_STRING","'x-amz-copy-source'",574],"]",["T_WHITESPACE"," ",574],"=",["T_WHITESPACE"," ",574],["T_VARIABLE","$sourceObject",574],";",["T_WHITESPACE","\n        ",574],["T_VARIABLE","$headers",575],"[",["T_CONSTANT_ENCAPSED_STRING","'x-amz-metadata-directive'",575],"]",["T_WHITESPACE"," ",575],"=",["T_WHITESPACE"," ",575],["T_VARIABLE","$meta",575],["T_WHITESPACE"," ",575],["T_IS_IDENTICAL","===",575],["T_WHITESPACE"," ",575],["T_STRING","null",575],["T_WHITESPACE"," ",575],"?",["T_WHITESPACE"," ",575],["T_CONSTANT_ENCAPSED_STRING","'COPY'",575],["T_WHITESPACE"," ",575],":",["T_WHITESPACE"," ",575],["T_CONSTANT_ENCAPSED_STRING","'REPLACE'",575],";",["T_WHITESPACE","\n\n        ",575],["T_VARIABLE","$response",577],["T_WHITESPACE"," ",577],"=",["T_WHITESPACE"," ",577],["T_VARIABLE","$this",577],["T_OBJECT_OPERATOR","->",577],["T_STRING","_makeRequest",577],"(",["T_CONSTANT_ENCAPSED_STRING","'PUT'",577],",",["T_WHITESPACE"," ",577],["T_VARIABLE","$destObject",577],",",["T_WHITESPACE"," ",577],["T_STRING","null",577],",",["T_WHITESPACE"," ",577],["T_VARIABLE","$headers",577],")",";",["T_WHITESPACE","\n\n        ",577],["T_IF","if",579],["T_WHITESPACE"," ",579],"(",["T_VARIABLE","$response",579],["T_OBJECT_OPERATOR","->",579],["T_STRING","getStatus",579],"(",")",["T_WHITESPACE"," ",579],["T_IS_EQUAL","==",579],["T_WHITESPACE"," ",579],["T_LNUMBER","200",579],["T_WHITESPACE"," ",579],["T_BOOLEAN_AND","&&",579],["T_WHITESPACE"," ",579],"!",["T_STRING","stristr",579],"(",["T_VARIABLE","$response",579],["T_OBJECT_OPERATOR","->",579],["T_STRING","getBody",579],"(",")",",",["T_WHITESPACE"," ",579],["T_CONSTANT_ENCAPSED_STRING","'<Error>'",579],")",")",["T_WHITESPACE"," ",579],"{",["T_WHITESPACE","\n            ",579],["T_RETURN","return",580],["T_WHITESPACE"," ",580],["T_STRING","true",580],";",["T_WHITESPACE","\n        ",580],"}",["T_WHITESPACE","\n\n        ",581],["T_RETURN","return",583],["T_WHITESPACE"," ",583],["T_STRING","false",583],";",["T_WHITESPACE","\n    ",583],"}",["T_WHITESPACE","\n\n    ",584],["T_DOC_COMMENT","\/**\n     * Move an object\n     *\n     * Performs a copy to dest + verify + remove source\n     *\n     * @param string $sourceObject  Source object name\n     * @param string $destObject    Destination object name\n     * @param array  $meta          (OPTIONAL) Metadata to apply to destination object.\n     *                              Set to null to retain existing metadata.\n     *\/",586],["T_WHITESPACE","\n    ",595],["T_PUBLIC","public",596],["T_WHITESPACE"," ",596],["T_FUNCTION","function",596],["T_WHITESPACE"," ",596],["T_STRING","moveObject",596],"(",["T_VARIABLE","$sourceObject",596],",",["T_WHITESPACE"," ",596],["T_VARIABLE","$destObject",596],",",["T_WHITESPACE"," ",596],["T_VARIABLE","$meta",596],["T_WHITESPACE"," ",596],"=",["T_WHITESPACE"," ",596],["T_STRING","null",596],")",["T_WHITESPACE","\n    ",596],"{",["T_WHITESPACE","\n        ",597],["T_VARIABLE","$sourceInfo",598],["T_WHITESPACE"," ",598],"=",["T_WHITESPACE"," ",598],["T_VARIABLE","$this",598],["T_OBJECT_OPERATOR","->",598],["T_STRING","getInfo",598],"(",["T_VARIABLE","$sourceObject",598],")",";",["T_WHITESPACE","\n\n        ",598],["T_VARIABLE","$this",600],["T_OBJECT_OPERATOR","->",600],["T_STRING","copyObject",600],"(",["T_VARIABLE","$sourceObject",600],",",["T_WHITESPACE"," ",600],["T_VARIABLE","$destObject",600],",",["T_WHITESPACE"," ",600],["T_VARIABLE","$meta",600],")",";",["T_WHITESPACE","\n        ",600],["T_VARIABLE","$destInfo",601],["T_WHITESPACE"," ",601],"=",["T_WHITESPACE"," ",601],["T_VARIABLE","$this",601],["T_OBJECT_OPERATOR","->",601],["T_STRING","getInfo",601],"(",["T_VARIABLE","$destObject",601],")",";",["T_WHITESPACE","\n\n        ",601],["T_IF","if",603],["T_WHITESPACE"," ",603],"(",["T_VARIABLE","$sourceInfo",603],"[",["T_CONSTANT_ENCAPSED_STRING","'etag'",603],"]",["T_WHITESPACE"," ",603],["T_IS_IDENTICAL","===",603],["T_WHITESPACE"," ",603],["T_VARIABLE","$destInfo",603],"[",["T_CONSTANT_ENCAPSED_STRING","'etag'",603],"]",")",["T_WHITESPACE"," ",603],"{",["T_WHITESPACE","\n            ",603],["T_RETURN","return",604],["T_WHITESPACE"," ",604],["T_VARIABLE","$this",604],["T_OBJECT_OPERATOR","->",604],["T_STRING","removeObject",604],"(",["T_VARIABLE","$sourceObject",604],")",";",["T_WHITESPACE","\n        ",604],"}",["T_WHITESPACE"," ",605],["T_ELSE","else",605],["T_WHITESPACE"," ",605],"{",["T_WHITESPACE","\n            ",605],["T_RETURN","return",606],["T_WHITESPACE"," ",606],["T_STRING","false",606],";",["T_WHITESPACE","\n        ",606],"}",["T_WHITESPACE","\n    ",607],"}",["T_WHITESPACE","\n\n    ",608],["T_DOC_COMMENT","\/**\n     * Make a request to Amazon S3\n     *\n     * @param  string $method    Request method\n     * @param  string $path        Path to requested object\n     * @param  array  $params    Request parameters\n     * @param  array  $headers    HTTP headers\n     * @param  string|resource $data        Request data\n     * @return Zend_Http_Response\n     *\/",610],["T_WHITESPACE","\n    ",619],["T_PUBLIC","public",620],["T_WHITESPACE"," ",620],["T_FUNCTION","function",620],["T_WHITESPACE"," ",620],["T_STRING","_makeRequest",620],"(",["T_VARIABLE","$method",620],",",["T_WHITESPACE"," ",620],["T_VARIABLE","$path",620],"=",["T_CONSTANT_ENCAPSED_STRING","''",620],",",["T_WHITESPACE"," ",620],["T_VARIABLE","$params",620],"=",["T_STRING","null",620],",",["T_WHITESPACE"," ",620],["T_VARIABLE","$headers",620],"=",["T_ARRAY","array",620],"(",")",",",["T_WHITESPACE"," ",620],["T_VARIABLE","$data",620],"=",["T_STRING","null",620],")",["T_WHITESPACE","\n    ",620],"{",["T_WHITESPACE","\n        ",621],["T_VARIABLE","$retry_count",622],["T_WHITESPACE"," ",622],"=",["T_WHITESPACE"," ",622],["T_LNUMBER","0",622],";",["T_WHITESPACE","\n\n        ",622],["T_IF","if",624],["T_WHITESPACE"," ",624],"(","!",["T_STRING","is_array",624],"(",["T_VARIABLE","$headers",624],")",")",["T_WHITESPACE"," ",624],"{",["T_WHITESPACE","\n            ",624],["T_VARIABLE","$headers",625],["T_WHITESPACE"," ",625],"=",["T_WHITESPACE"," ",625],["T_ARRAY","array",625],"(",["T_VARIABLE","$headers",625],")",";",["T_WHITESPACE","\n        ",625],"}",["T_WHITESPACE","\n\n        ",626],["T_VARIABLE","$headers",628],"[",["T_CONSTANT_ENCAPSED_STRING","'Date'",628],"]",["T_WHITESPACE"," ",628],"=",["T_WHITESPACE"," ",628],["T_STRING","gmdate",628],"(",["T_STRING","DATE_RFC1123",628],",",["T_WHITESPACE"," ",628],["T_STRING","time",628],"(",")",")",";",["T_WHITESPACE","\n\n        ",628],["T_IF","if",630],"(",["T_STRING","is_resource",630],"(",["T_VARIABLE","$data",630],")",["T_WHITESPACE"," ",630],["T_BOOLEAN_AND","&&",630],["T_WHITESPACE"," ",630],["T_VARIABLE","$method",630],["T_WHITESPACE"," ",630],["T_IS_NOT_EQUAL","!=",630],["T_WHITESPACE"," ",630],["T_CONSTANT_ENCAPSED_STRING","'PUT'",630],")",["T_WHITESPACE"," ",630],"{",["T_WHITESPACE","\n            ",630],["T_DOC_COMMENT","\/**\n             * @see Zend_Service_Amazon_S3_Exception\n             *\/",631],["T_WHITESPACE","\n            ",633],["T_COMMENT","#require_once 'Zend\/Service\/Amazon\/S3\/Exception.php';\n",634],["T_WHITESPACE","            ",635],["T_THROW","throw",635],["T_WHITESPACE"," ",635],["T_NEW","new",635],["T_WHITESPACE"," ",635],["T_STRING","Zend_Service_Amazon_S3_Exception",635],"(",["T_CONSTANT_ENCAPSED_STRING","\"Only PUT request supports stream data\"",635],")",";",["T_WHITESPACE","\n        ",635],"}",["T_WHITESPACE","\n\n        ",636],["T_COMMENT","\/\/ build the end point out\n",638],["T_WHITESPACE","        ",639],["T_VARIABLE","$parts",639],["T_WHITESPACE"," ",639],"=",["T_WHITESPACE"," ",639],["T_STRING","explode",639],"(",["T_CONSTANT_ENCAPSED_STRING","'\/'",639],",",["T_WHITESPACE"," ",639],["T_VARIABLE","$path",639],",",["T_WHITESPACE"," ",639],["T_LNUMBER","2",639],")",";",["T_WHITESPACE","\n        ",639],["T_VARIABLE","$endpoint",640],["T_WHITESPACE"," ",640],"=",["T_WHITESPACE"," ",640],["T_CLONE","clone",640],"(",["T_VARIABLE","$this",640],["T_OBJECT_OPERATOR","->",640],["T_STRING","_endpoint",640],")",";",["T_WHITESPACE","\n        ",640],["T_IF","if",641],["T_WHITESPACE"," ",641],"(",["T_VARIABLE","$parts",641],"[",["T_LNUMBER","0",641],"]",")",["T_WHITESPACE"," ",641],"{",["T_WHITESPACE","\n            ",641],["T_COMMENT","\/\/ prepend bucket name to the hostname\n",642],["T_WHITESPACE","            ",643],["T_VARIABLE","$endpoint",643],["T_OBJECT_OPERATOR","->",643],["T_STRING","setHost",643],"(",["T_VARIABLE","$parts",643],"[",["T_LNUMBER","0",643],"]",".",["T_CONSTANT_ENCAPSED_STRING","'.'",643],".",["T_VARIABLE","$endpoint",643],["T_OBJECT_OPERATOR","->",643],["T_STRING","getHost",643],"(",")",")",";",["T_WHITESPACE","\n        ",643],"}",["T_WHITESPACE","\n        ",644],["T_IF","if",645],["T_WHITESPACE"," ",645],"(","!",["T_EMPTY","empty",645],"(",["T_VARIABLE","$parts",645],"[",["T_LNUMBER","1",645],"]",")",")",["T_WHITESPACE"," ",645],"{",["T_WHITESPACE","\n            ",645],["T_COMMENT","\/\/ ZF-10218, ZF-10122\n",646],["T_WHITESPACE","            ",647],["T_VARIABLE","$pathparts",647],["T_WHITESPACE"," ",647],"=",["T_WHITESPACE"," ",647],["T_STRING","explode",647],"(",["T_CONSTANT_ENCAPSED_STRING","'?'",647],",",["T_VARIABLE","$parts",647],"[",["T_LNUMBER","1",647],"]",")",";",["T_WHITESPACE","\n            ",647],["T_VARIABLE","$endpath",648],["T_WHITESPACE"," ",648],"=",["T_WHITESPACE"," ",648],["T_VARIABLE","$pathparts",648],"[",["T_LNUMBER","0",648],"]",";",["T_WHITESPACE","\n            ",648],["T_VARIABLE","$endpoint",649],["T_OBJECT_OPERATOR","->",649],["T_STRING","setPath",649],"(",["T_CONSTANT_ENCAPSED_STRING","'\/'",649],".",["T_VARIABLE","$endpath",649],")",";",["T_WHITESPACE","\n            \n        ",649],"}",["T_WHITESPACE","\n        ",651],["T_ELSE","else",652],["T_WHITESPACE"," ",652],"{",["T_WHITESPACE","\n            ",652],["T_VARIABLE","$endpoint",653],["T_OBJECT_OPERATOR","->",653],["T_STRING","setPath",653],"(",["T_CONSTANT_ENCAPSED_STRING","'\/'",653],")",";",["T_WHITESPACE","\n            ",653],["T_IF","if",654],["T_WHITESPACE"," ",654],"(",["T_VARIABLE","$parts",654],"[",["T_LNUMBER","0",654],"]",")",["T_WHITESPACE"," ",654],"{",["T_WHITESPACE","\n                ",654],["T_VARIABLE","$path",655],["T_WHITESPACE"," ",655],"=",["T_WHITESPACE"," ",655],["T_VARIABLE","$parts",655],"[",["T_LNUMBER","0",655],"]",".",["T_CONSTANT_ENCAPSED_STRING","'\/'",655],";",["T_WHITESPACE","\n            ",655],"}",["T_WHITESPACE","\n        ",656],"}",["T_WHITESPACE","\n        ",657],["T_STRING","self",658],["T_DOUBLE_COLON","::",658],["T_STRING","addSignature",658],"(",["T_VARIABLE","$method",658],",",["T_WHITESPACE"," ",658],["T_VARIABLE","$path",658],",",["T_WHITESPACE"," ",658],["T_VARIABLE","$headers",658],")",";",["T_WHITESPACE","\n\n        ",658],["T_VARIABLE","$client",660],["T_WHITESPACE"," ",660],"=",["T_WHITESPACE"," ",660],["T_STRING","self",660],["T_DOUBLE_COLON","::",660],["T_STRING","getHttpClient",660],"(",")",";",["T_WHITESPACE","\n\n        ",660],["T_VARIABLE","$client",662],["T_OBJECT_OPERATOR","->",662],["T_STRING","resetParameters",662],"(",["T_STRING","true",662],")",";",["T_WHITESPACE","\n        ",662],["T_VARIABLE","$client",663],["T_OBJECT_OPERATOR","->",663],["T_STRING","setUri",663],"(",["T_VARIABLE","$endpoint",663],")",";",["T_WHITESPACE","\n        ",663],["T_VARIABLE","$client",664],["T_OBJECT_OPERATOR","->",664],["T_STRING","setAuth",664],"(",["T_STRING","false",664],")",";",["T_WHITESPACE","\n        ",664],["T_COMMENT","\/\/ Work around buglet in HTTP client - it doesn't clean headers\n",665],["T_WHITESPACE","        ",666],["T_COMMENT","\/\/ Remove when ZHC is fixed\n",666],["T_WHITESPACE","        ",667],["T_COMMENT","\/*\n        $client->setHeaders(array('Content-MD5'              => null,\n                                  'Content-Encoding'         => null,\n                                  'Expect'                   => null,\n                                  'Range'                    => null,\n                                  'x-amz-acl'                => null,\n                                  'x-amz-copy-source'        => null,\n                                  'x-amz-metadata-directive' => null));\n        *\/",667],["T_WHITESPACE","\n        ",675],["T_VARIABLE","$client",676],["T_OBJECT_OPERATOR","->",676],["T_STRING","setHeaders",676],"(",["T_VARIABLE","$headers",676],")",";",["T_WHITESPACE","\n\n        ",676],["T_IF","if",678],["T_WHITESPACE"," ",678],"(",["T_STRING","is_array",678],"(",["T_VARIABLE","$params",678],")",")",["T_WHITESPACE"," ",678],"{",["T_WHITESPACE","\n            ",678],["T_FOREACH","foreach",679],["T_WHITESPACE"," ",679],"(",["T_VARIABLE","$params",679],["T_WHITESPACE"," ",679],["T_AS","as",679],["T_WHITESPACE"," ",679],["T_VARIABLE","$name",679],["T_DOUBLE_ARROW","=>",679],["T_VARIABLE","$value",679],")",["T_WHITESPACE"," ",679],"{",["T_WHITESPACE","\n                ",679],["T_VARIABLE","$client",680],["T_OBJECT_OPERATOR","->",680],["T_STRING","setParameterGet",680],"(",["T_VARIABLE","$name",680],",",["T_WHITESPACE"," ",680],["T_VARIABLE","$value",680],")",";",["T_WHITESPACE","\n            ",680],"}",["T_WHITESPACE","\n         ",681],"}",["T_WHITESPACE","\n\n         ",682],["T_IF","if",684],["T_WHITESPACE"," ",684],"(","(",["T_VARIABLE","$method",684],["T_WHITESPACE"," ",684],["T_IS_EQUAL","==",684],["T_WHITESPACE"," ",684],["T_CONSTANT_ENCAPSED_STRING","'PUT'",684],")",["T_WHITESPACE"," ",684],["T_BOOLEAN_AND","&&",684],["T_WHITESPACE"," ",684],"(",["T_VARIABLE","$data",684],["T_WHITESPACE"," ",684],["T_IS_NOT_IDENTICAL","!==",684],["T_WHITESPACE"," ",684],["T_STRING","null",684],")",")",["T_WHITESPACE"," ",684],"{",["T_WHITESPACE","\n             ",684],["T_IF","if",685],["T_WHITESPACE"," ",685],"(","!",["T_ISSET","isset",685],"(",["T_VARIABLE","$headers",685],"[",["T_CONSTANT_ENCAPSED_STRING","'Content-type'",685],"]",")",")",["T_WHITESPACE"," ",685],"{",["T_WHITESPACE","\n                 ",685],["T_VARIABLE","$headers",686],"[",["T_CONSTANT_ENCAPSED_STRING","'Content-type'",686],"]",["T_WHITESPACE"," ",686],"=",["T_WHITESPACE"," ",686],["T_STRING","self",686],["T_DOUBLE_COLON","::",686],["T_STRING","getMimeType",686],"(",["T_VARIABLE","$path",686],")",";",["T_WHITESPACE","\n             ",686],"}",["T_WHITESPACE","\n             ",687],["T_VARIABLE","$client",688],["T_OBJECT_OPERATOR","->",688],["T_STRING","setRawData",688],"(",["T_VARIABLE","$data",688],",",["T_WHITESPACE"," ",688],["T_VARIABLE","$headers",688],"[",["T_CONSTANT_ENCAPSED_STRING","'Content-type'",688],"]",")",";",["T_WHITESPACE","\n         ",688],"}",["T_WHITESPACE"," \n         ",689],["T_DO","do",690],["T_WHITESPACE"," ",690],"{",["T_WHITESPACE","\n            ",690],["T_VARIABLE","$retry",691],["T_WHITESPACE"," ",691],"=",["T_WHITESPACE"," ",691],["T_STRING","false",691],";",["T_WHITESPACE","\n\n            ",691],["T_VARIABLE","$response",693],["T_WHITESPACE"," ",693],"=",["T_WHITESPACE"," ",693],["T_VARIABLE","$client",693],["T_OBJECT_OPERATOR","->",693],["T_STRING","request",693],"(",["T_VARIABLE","$method",693],")",";",["T_WHITESPACE","\n            ",693],["T_VARIABLE","$response_code",694],["T_WHITESPACE"," ",694],"=",["T_WHITESPACE"," ",694],["T_VARIABLE","$response",694],["T_OBJECT_OPERATOR","->",694],["T_STRING","getStatus",694],"(",")",";",["T_WHITESPACE","\n\n            ",694],["T_COMMENT","\/\/ Some 5xx errors are expected, so retry automatically\n",696],["T_WHITESPACE","            ",697],["T_IF","if",697],["T_WHITESPACE"," ",697],"(",["T_VARIABLE","$response_code",697],["T_WHITESPACE"," ",697],["T_IS_GREATER_OR_EQUAL",">=",697],["T_WHITESPACE"," ",697],["T_LNUMBER","500",697],["T_WHITESPACE"," ",697],["T_BOOLEAN_AND","&&",697],["T_WHITESPACE"," ",697],["T_VARIABLE","$response_code",697],["T_WHITESPACE"," ",697],"<",["T_WHITESPACE"," ",697],["T_LNUMBER","600",697],["T_WHITESPACE"," ",697],["T_BOOLEAN_AND","&&",697],["T_WHITESPACE"," ",697],["T_VARIABLE","$retry_count",697],["T_WHITESPACE"," ",697],["T_IS_SMALLER_OR_EQUAL","<=",697],["T_WHITESPACE"," ",697],["T_LNUMBER","5",697],")",["T_WHITESPACE"," ",697],"{",["T_WHITESPACE","\n                ",697],["T_VARIABLE","$retry",698],["T_WHITESPACE"," ",698],"=",["T_WHITESPACE"," ",698],["T_STRING","true",698],";",["T_WHITESPACE","\n                ",698],["T_VARIABLE","$retry_count",699],["T_INC","++",699],";",["T_WHITESPACE","\n                ",699],["T_STRING","sleep",700],"(",["T_VARIABLE","$retry_count",700],["T_WHITESPACE"," ",700],"\/",["T_WHITESPACE"," ",700],["T_LNUMBER","4",700],["T_WHITESPACE"," ",700],"*",["T_WHITESPACE"," ",700],["T_VARIABLE","$retry_count",700],")",";",["T_WHITESPACE","\n            ",700],"}",["T_WHITESPACE","\n            ",701],["T_ELSE","else",702],["T_WHITESPACE"," ",702],["T_IF","if",702],["T_WHITESPACE"," ",702],"(",["T_VARIABLE","$response_code",702],["T_WHITESPACE"," ",702],["T_IS_EQUAL","==",702],["T_WHITESPACE"," ",702],["T_LNUMBER","307",702],")",["T_WHITESPACE"," ",702],"{",["T_WHITESPACE","\n                ",702],["T_COMMENT","\/\/ Need to redirect, new S3 endpoint given\n",703],["T_WHITESPACE","                ",704],["T_COMMENT","\/\/ This should never happen as Zend_Http_Client will redirect automatically\n",704],["T_WHITESPACE","            ",705],"}",["T_WHITESPACE","\n            ",705],["T_ELSE","else",706],["T_WHITESPACE"," ",706],["T_IF","if",706],["T_WHITESPACE"," ",706],"(",["T_VARIABLE","$response_code",706],["T_WHITESPACE"," ",706],["T_IS_EQUAL","==",706],["T_WHITESPACE"," ",706],["T_LNUMBER","100",706],")",["T_WHITESPACE"," ",706],"{",["T_WHITESPACE","\n                ",706],["T_COMMENT","\/\/ echo 'OK to Continue';\n",707],["T_WHITESPACE","            ",708],"}",["T_WHITESPACE","\n        ",708],"}",["T_WHITESPACE"," ",709],["T_WHILE","while",709],["T_WHITESPACE"," ",709],"(",["T_VARIABLE","$retry",709],")",";",["T_WHITESPACE","\n\n        ",709],["T_RETURN","return",711],["T_WHITESPACE"," ",711],["T_VARIABLE","$response",711],";",["T_WHITESPACE","\n    ",711],"}",["T_WHITESPACE","\n\n    ",712],["T_DOC_COMMENT","\/**\n     * Add the S3 Authorization signature to the request headers\n     *\n     * @param  string $method\n     * @param  string $path\n     * @param  array &$headers\n     * @return string\n     *\/",714],["T_WHITESPACE","\n    ",721],["T_PROTECTED","protected",722],["T_WHITESPACE"," ",722],["T_FUNCTION","function",722],["T_WHITESPACE"," ",722],["T_STRING","addSignature",722],"(",["T_VARIABLE","$method",722],",",["T_WHITESPACE"," ",722],["T_VARIABLE","$path",722],",",["T_WHITESPACE"," ",722],"&",["T_VARIABLE","$headers",722],")",["T_WHITESPACE","\n    ",722],"{",["T_WHITESPACE","\n        ",723],["T_IF","if",724],["T_WHITESPACE"," ",724],"(","!",["T_STRING","is_array",724],"(",["T_VARIABLE","$headers",724],")",")",["T_WHITESPACE"," ",724],"{",["T_WHITESPACE","\n            ",724],["T_VARIABLE","$headers",725],["T_WHITESPACE"," ",725],"=",["T_WHITESPACE"," ",725],["T_ARRAY","array",725],"(",["T_VARIABLE","$headers",725],")",";",["T_WHITESPACE","\n        ",725],"}",["T_WHITESPACE","\n\n        ",726],["T_VARIABLE","$type",728],["T_WHITESPACE"," ",728],"=",["T_WHITESPACE"," ",728],["T_VARIABLE","$md5",728],["T_WHITESPACE"," ",728],"=",["T_WHITESPACE"," ",728],["T_VARIABLE","$date",728],["T_WHITESPACE"," ",728],"=",["T_WHITESPACE"," ",728],["T_CONSTANT_ENCAPSED_STRING","''",728],";",["T_WHITESPACE","\n\n        ",728],["T_COMMENT","\/\/ Search for the Content-type, Content-MD5 and Date headers\n",730],["T_WHITESPACE","        ",731],["T_FOREACH","foreach",731],["T_WHITESPACE"," ",731],"(",["T_VARIABLE","$headers",731],["T_WHITESPACE"," ",731],["T_AS","as",731],["T_WHITESPACE"," ",731],["T_VARIABLE","$key",731],["T_DOUBLE_ARROW","=>",731],["T_VARIABLE","$val",731],")",["T_WHITESPACE"," ",731],"{",["T_WHITESPACE","\n            ",731],["T_IF","if",732],["T_WHITESPACE"," ",732],"(",["T_STRING","strcasecmp",732],"(",["T_VARIABLE","$key",732],",",["T_WHITESPACE"," ",732],["T_CONSTANT_ENCAPSED_STRING","'content-type'",732],")",["T_WHITESPACE"," ",732],["T_IS_EQUAL","==",732],["T_WHITESPACE"," ",732],["T_LNUMBER","0",732],")",["T_WHITESPACE"," ",732],"{",["T_WHITESPACE","\n                ",732],["T_VARIABLE","$type",733],["T_WHITESPACE"," ",733],"=",["T_WHITESPACE"," ",733],["T_VARIABLE","$val",733],";",["T_WHITESPACE","\n            ",733],"}",["T_WHITESPACE","\n            ",734],["T_ELSE","else",735],["T_WHITESPACE"," ",735],["T_IF","if",735],["T_WHITESPACE"," ",735],"(",["T_STRING","strcasecmp",735],"(",["T_VARIABLE","$key",735],",",["T_WHITESPACE"," ",735],["T_CONSTANT_ENCAPSED_STRING","'content-md5'",735],")",["T_WHITESPACE"," ",735],["T_IS_EQUAL","==",735],["T_WHITESPACE"," ",735],["T_LNUMBER","0",735],")",["T_WHITESPACE"," ",735],"{",["T_WHITESPACE","\n                ",735],["T_VARIABLE","$md5",736],["T_WHITESPACE"," ",736],"=",["T_WHITESPACE"," ",736],["T_VARIABLE","$val",736],";",["T_WHITESPACE","\n            ",736],"}",["T_WHITESPACE","\n            ",737],["T_ELSE","else",738],["T_WHITESPACE"," ",738],["T_IF","if",738],["T_WHITESPACE"," ",738],"(",["T_STRING","strcasecmp",738],"(",["T_VARIABLE","$key",738],",",["T_WHITESPACE"," ",738],["T_CONSTANT_ENCAPSED_STRING","'date'",738],")",["T_WHITESPACE"," ",738],["T_IS_EQUAL","==",738],["T_WHITESPACE"," ",738],["T_LNUMBER","0",738],")",["T_WHITESPACE"," ",738],"{",["T_WHITESPACE","\n                ",738],["T_VARIABLE","$date",739],["T_WHITESPACE"," ",739],"=",["T_WHITESPACE"," ",739],["T_VARIABLE","$val",739],";",["T_WHITESPACE","\n            ",739],"}",["T_WHITESPACE","\n        ",740],"}",["T_WHITESPACE","\n\n        ",741],["T_COMMENT","\/\/ If we have an x-amz-date header, use that instead of the normal Date\n",743],["T_WHITESPACE","        ",744],["T_IF","if",744],["T_WHITESPACE"," ",744],"(",["T_ISSET","isset",744],"(",["T_VARIABLE","$headers",744],"[",["T_CONSTANT_ENCAPSED_STRING","'x-amz-date'",744],"]",")",["T_WHITESPACE"," ",744],["T_BOOLEAN_AND","&&",744],["T_WHITESPACE"," ",744],["T_ISSET","isset",744],"(",["T_VARIABLE","$date",744],")",")",["T_WHITESPACE"," ",744],"{",["T_WHITESPACE","\n            ",744],["T_VARIABLE","$date",745],["T_WHITESPACE"," ",745],"=",["T_WHITESPACE"," ",745],["T_CONSTANT_ENCAPSED_STRING","''",745],";",["T_WHITESPACE","\n        ",745],"}",["T_WHITESPACE","\n\n        ",746],["T_VARIABLE","$sig_str",748],["T_WHITESPACE"," ",748],"=",["T_WHITESPACE"," ",748],"\"",["T_VARIABLE","$method",748],["T_ENCAPSED_AND_WHITESPACE","\\n",748],["T_VARIABLE","$md5",748],["T_ENCAPSED_AND_WHITESPACE","\\n",748],["T_VARIABLE","$type",748],["T_ENCAPSED_AND_WHITESPACE","\\n",748],["T_VARIABLE","$date",748],["T_ENCAPSED_AND_WHITESPACE","\\n",748],"\"",";",["T_WHITESPACE","\n        ",748],["T_COMMENT","\/\/ For x-amz- headers, combine like keys, lowercase them, sort them\n",749],["T_WHITESPACE","        ",750],["T_COMMENT","\/\/ alphabetically and remove excess spaces around values\n",750],["T_WHITESPACE","        ",751],["T_VARIABLE","$amz_headers",751],["T_WHITESPACE"," ",751],"=",["T_WHITESPACE"," ",751],["T_ARRAY","array",751],"(",")",";",["T_WHITESPACE","\n        ",751],["T_FOREACH","foreach",752],["T_WHITESPACE"," ",752],"(",["T_VARIABLE","$headers",752],["T_WHITESPACE"," ",752],["T_AS","as",752],["T_WHITESPACE"," ",752],["T_VARIABLE","$key",752],["T_DOUBLE_ARROW","=>",752],["T_VARIABLE","$val",752],")",["T_WHITESPACE"," ",752],"{",["T_WHITESPACE","\n            ",752],["T_VARIABLE","$key",753],["T_WHITESPACE"," ",753],"=",["T_WHITESPACE"," ",753],["T_STRING","strtolower",753],"(",["T_VARIABLE","$key",753],")",";",["T_WHITESPACE","\n            ",753],["T_IF","if",754],["T_WHITESPACE"," ",754],"(",["T_STRING","substr",754],"(",["T_VARIABLE","$key",754],",",["T_WHITESPACE"," ",754],["T_LNUMBER","0",754],",",["T_WHITESPACE"," ",754],["T_LNUMBER","6",754],")",["T_WHITESPACE"," ",754],["T_IS_EQUAL","==",754],["T_WHITESPACE"," ",754],["T_CONSTANT_ENCAPSED_STRING","'x-amz-'",754],")",["T_WHITESPACE"," ",754],"{",["T_WHITESPACE","\n                ",754],["T_IF","if",755],["T_WHITESPACE"," ",755],"(",["T_STRING","is_array",755],"(",["T_VARIABLE","$val",755],")",")",["T_WHITESPACE"," ",755],"{",["T_WHITESPACE","\n                    ",755],["T_VARIABLE","$amz_headers",756],"[",["T_VARIABLE","$key",756],"]",["T_WHITESPACE"," ",756],"=",["T_WHITESPACE"," ",756],["T_VARIABLE","$val",756],";",["T_WHITESPACE","\n                ",756],"}",["T_WHITESPACE","\n                ",757],["T_ELSE","else",758],["T_WHITESPACE"," ",758],"{",["T_WHITESPACE","\n                    ",758],["T_VARIABLE","$amz_headers",759],"[",["T_VARIABLE","$key",759],"]","[","]",["T_WHITESPACE"," ",759],"=",["T_WHITESPACE"," ",759],["T_STRING","preg_replace",759],"(",["T_CONSTANT_ENCAPSED_STRING","'\/\\s+\/'",759],",",["T_WHITESPACE"," ",759],["T_CONSTANT_ENCAPSED_STRING","' '",759],",",["T_WHITESPACE"," ",759],["T_VARIABLE","$val",759],")",";",["T_WHITESPACE","\n                ",759],"}",["T_WHITESPACE","\n            ",760],"}",["T_WHITESPACE","\n        ",761],"}",["T_WHITESPACE","\n        ",762],["T_IF","if",763],["T_WHITESPACE"," ",763],"(","!",["T_EMPTY","empty",763],"(",["T_VARIABLE","$amz_headers",763],")",")",["T_WHITESPACE"," ",763],"{",["T_WHITESPACE","\n            ",763],["T_STRING","ksort",764],"(",["T_VARIABLE","$amz_headers",764],")",";",["T_WHITESPACE","\n            ",764],["T_FOREACH","foreach",765],["T_WHITESPACE"," ",765],"(",["T_VARIABLE","$amz_headers",765],["T_WHITESPACE"," ",765],["T_AS","as",765],["T_WHITESPACE"," ",765],["T_VARIABLE","$key",765],["T_DOUBLE_ARROW","=>",765],["T_VARIABLE","$val",765],")",["T_WHITESPACE"," ",765],"{",["T_WHITESPACE","\n                ",765],["T_VARIABLE","$sig_str",766],["T_WHITESPACE"," ",766],["T_CONCAT_EQUAL",".=",766],["T_WHITESPACE"," ",766],["T_VARIABLE","$key",766],".",["T_CONSTANT_ENCAPSED_STRING","':'",766],".",["T_STRING","implode",766],"(",["T_CONSTANT_ENCAPSED_STRING","','",766],",",["T_WHITESPACE"," ",766],["T_VARIABLE","$val",766],")",".",["T_CONSTANT_ENCAPSED_STRING","\"\\n\"",766],";",["T_WHITESPACE","\n            ",766],"}",["T_WHITESPACE","\n        ",767],"}",["T_WHITESPACE","\n\n        ",768],["T_VARIABLE","$sig_str",770],["T_WHITESPACE"," ",770],["T_CONCAT_EQUAL",".=",770],["T_WHITESPACE"," ",770],["T_CONSTANT_ENCAPSED_STRING","'\/'",770],".",["T_STRING","parse_url",770],"(",["T_VARIABLE","$path",770],",",["T_WHITESPACE"," ",770],["T_STRING","PHP_URL_PATH",770],")",";",["T_WHITESPACE","\n        ",770],["T_IF","if",771],["T_WHITESPACE"," ",771],"(",["T_STRING","strpos",771],"(",["T_VARIABLE","$path",771],",",["T_WHITESPACE"," ",771],["T_CONSTANT_ENCAPSED_STRING","'?location'",771],")",["T_WHITESPACE"," ",771],["T_IS_NOT_IDENTICAL","!==",771],["T_WHITESPACE"," ",771],["T_STRING","false",771],")",["T_WHITESPACE"," ",771],"{",["T_WHITESPACE","\n            ",771],["T_VARIABLE","$sig_str",772],["T_WHITESPACE"," ",772],["T_CONCAT_EQUAL",".=",772],["T_WHITESPACE"," ",772],["T_CONSTANT_ENCAPSED_STRING","'?location'",772],";",["T_WHITESPACE","\n        ",772],"}",["T_WHITESPACE","\n        ",773],["T_ELSE","else",774],["T_WHITESPACE"," ",774],["T_IF","if",774],["T_WHITESPACE"," ",774],"(",["T_STRING","strpos",774],"(",["T_VARIABLE","$path",774],",",["T_WHITESPACE"," ",774],["T_CONSTANT_ENCAPSED_STRING","'?acl'",774],")",["T_WHITESPACE"," ",774],["T_IS_NOT_IDENTICAL","!==",774],["T_WHITESPACE"," ",774],["T_STRING","false",774],")",["T_WHITESPACE"," ",774],"{",["T_WHITESPACE","\n            ",774],["T_VARIABLE","$sig_str",775],["T_WHITESPACE"," ",775],["T_CONCAT_EQUAL",".=",775],["T_WHITESPACE"," ",775],["T_CONSTANT_ENCAPSED_STRING","'?acl'",775],";",["T_WHITESPACE","\n        ",775],"}",["T_WHITESPACE","\n        ",776],["T_ELSE","else",777],["T_WHITESPACE"," ",777],["T_IF","if",777],["T_WHITESPACE"," ",777],"(",["T_STRING","strpos",777],"(",["T_VARIABLE","$path",777],",",["T_WHITESPACE"," ",777],["T_CONSTANT_ENCAPSED_STRING","'?torrent'",777],")",["T_WHITESPACE"," ",777],["T_IS_NOT_IDENTICAL","!==",777],["T_WHITESPACE"," ",777],["T_STRING","false",777],")",["T_WHITESPACE"," ",777],"{",["T_WHITESPACE","\n            ",777],["T_VARIABLE","$sig_str",778],["T_WHITESPACE"," ",778],["T_CONCAT_EQUAL",".=",778],["T_WHITESPACE"," ",778],["T_CONSTANT_ENCAPSED_STRING","'?torrent'",778],";",["T_WHITESPACE","\n        ",778],"}",["T_WHITESPACE","\n        ",779],["T_ELSE","else",780],["T_WHITESPACE"," ",780],["T_IF","if",780],["T_WHITESPACE"," ",780],"(",["T_STRING","strpos",780],"(",["T_VARIABLE","$path",780],",",["T_WHITESPACE"," ",780],["T_CONSTANT_ENCAPSED_STRING","'?versions'",780],")",["T_WHITESPACE"," ",780],["T_IS_NOT_IDENTICAL","!==",780],["T_WHITESPACE"," ",780],["T_STRING","false",780],")",["T_WHITESPACE"," ",780],"{",["T_WHITESPACE","\n            ",780],["T_VARIABLE","$sig_str",781],["T_WHITESPACE"," ",781],["T_CONCAT_EQUAL",".=",781],["T_WHITESPACE"," ",781],["T_CONSTANT_ENCAPSED_STRING","'?versions'",781],";",["T_WHITESPACE","\n        ",781],"}",["T_WHITESPACE","\n\n        ",782],["T_VARIABLE","$signature",784],["T_WHITESPACE"," ",784],"=",["T_WHITESPACE"," ",784],["T_STRING","base64_encode",784],"(",["T_STRING","Zend_Crypt_Hmac",784],["T_DOUBLE_COLON","::",784],["T_STRING","compute",784],"(",["T_VARIABLE","$this",784],["T_OBJECT_OPERATOR","->",784],["T_STRING","_getSecretKey",784],"(",")",",",["T_WHITESPACE"," ",784],["T_CONSTANT_ENCAPSED_STRING","'sha1'",784],",",["T_WHITESPACE"," ",784],["T_STRING","utf8_encode",784],"(",["T_VARIABLE","$sig_str",784],")",",",["T_WHITESPACE"," ",784],["T_STRING","Zend_Crypt_Hmac",784],["T_DOUBLE_COLON","::",784],["T_STRING","BINARY",784],")",")",";",["T_WHITESPACE","\n        ",784],["T_VARIABLE","$headers",785],"[",["T_CONSTANT_ENCAPSED_STRING","'Authorization'",785],"]",["T_WHITESPACE"," ",785],"=",["T_WHITESPACE"," ",785],["T_CONSTANT_ENCAPSED_STRING","'AWS '",785],".",["T_VARIABLE","$this",785],["T_OBJECT_OPERATOR","->",785],["T_STRING","_getAccessKey",785],"(",")",".",["T_CONSTANT_ENCAPSED_STRING","':'",785],".",["T_VARIABLE","$signature",785],";",["T_WHITESPACE","\n\n        ",785],["T_RETURN","return",787],["T_WHITESPACE"," ",787],["T_VARIABLE","$sig_str",787],";",["T_WHITESPACE","\n    ",787],"}",["T_WHITESPACE","\n\n    ",788],["T_DOC_COMMENT","\/**\n     * Attempt to get the content-type of a file based on the extension\n     *\n     * @param  string $path\n     * @return string\n     *\/",790],["T_WHITESPACE","\n    ",795],["T_PUBLIC","public",796],["T_WHITESPACE"," ",796],["T_STATIC","static",796],["T_WHITESPACE"," ",796],["T_FUNCTION","function",796],["T_WHITESPACE"," ",796],["T_STRING","getMimeType",796],"(",["T_VARIABLE","$path",796],")",["T_WHITESPACE","\n    ",796],"{",["T_WHITESPACE","\n        ",797],["T_VARIABLE","$ext",798],["T_WHITESPACE"," ",798],"=",["T_WHITESPACE"," ",798],["T_STRING","substr",798],"(",["T_STRING","strrchr",798],"(",["T_VARIABLE","$path",798],",",["T_WHITESPACE"," ",798],["T_CONSTANT_ENCAPSED_STRING","'.'",798],")",",",["T_WHITESPACE"," ",798],["T_LNUMBER","1",798],")",";",["T_WHITESPACE","\n\n        ",798],["T_IF","if",800],"(","!",["T_VARIABLE","$ext",800],")",["T_WHITESPACE"," ",800],"{",["T_WHITESPACE","\n            ",800],["T_COMMENT","\/\/ shortcut\n",801],["T_WHITESPACE","            ",802],["T_RETURN","return",802],["T_WHITESPACE"," ",802],["T_CONSTANT_ENCAPSED_STRING","'binary\/octet-stream'",802],";",["T_WHITESPACE","\n        ",802],"}",["T_WHITESPACE","\n\n        ",803],["T_SWITCH","switch",805],["T_WHITESPACE"," ",805],"(",["T_STRING","strtolower",805],"(",["T_VARIABLE","$ext",805],")",")",["T_WHITESPACE"," ",805],"{",["T_WHITESPACE","\n            ",805],["T_CASE","case",806],["T_WHITESPACE"," ",806],["T_CONSTANT_ENCAPSED_STRING","'xls'",806],":",["T_WHITESPACE","\n                ",806],["T_VARIABLE","$content_type",807],["T_WHITESPACE"," ",807],"=",["T_WHITESPACE"," ",807],["T_CONSTANT_ENCAPSED_STRING","'application\/excel'",807],";",["T_WHITESPACE","\n                ",807],["T_BREAK","break",808],";",["T_WHITESPACE","\n            ",808],["T_CASE","case",809],["T_WHITESPACE"," ",809],["T_CONSTANT_ENCAPSED_STRING","'hqx'",809],":",["T_WHITESPACE","\n                ",809],["T_VARIABLE","$content_type",810],["T_WHITESPACE"," ",810],"=",["T_WHITESPACE"," ",810],["T_CONSTANT_ENCAPSED_STRING","'application\/macbinhex40'",810],";",["T_WHITESPACE","\n                ",810],["T_BREAK","break",811],";",["T_WHITESPACE","\n            ",811],["T_CASE","case",812],["T_WHITESPACE"," ",812],["T_CONSTANT_ENCAPSED_STRING","'doc'",812],":",["T_WHITESPACE","\n            ",812],["T_CASE","case",813],["T_WHITESPACE"," ",813],["T_CONSTANT_ENCAPSED_STRING","'dot'",813],":",["T_WHITESPACE","\n            ",813],["T_CASE","case",814],["T_WHITESPACE"," ",814],["T_CONSTANT_ENCAPSED_STRING","'wrd'",814],":",["T_WHITESPACE","\n                ",814],["T_VARIABLE","$content_type",815],["T_WHITESPACE"," ",815],"=",["T_WHITESPACE"," ",815],["T_CONSTANT_ENCAPSED_STRING","'application\/msword'",815],";",["T_WHITESPACE","\n                ",815],["T_BREAK","break",816],";",["T_WHITESPACE","\n            ",816],["T_CASE","case",817],["T_WHITESPACE"," ",817],["T_CONSTANT_ENCAPSED_STRING","'pdf'",817],":",["T_WHITESPACE","\n                ",817],["T_VARIABLE","$content_type",818],["T_WHITESPACE"," ",818],"=",["T_WHITESPACE"," ",818],["T_CONSTANT_ENCAPSED_STRING","'application\/pdf'",818],";",["T_WHITESPACE","\n                ",818],["T_BREAK","break",819],";",["T_WHITESPACE","\n            ",819],["T_CASE","case",820],["T_WHITESPACE"," ",820],["T_CONSTANT_ENCAPSED_STRING","'pgp'",820],":",["T_WHITESPACE","\n                ",820],["T_VARIABLE","$content_type",821],["T_WHITESPACE"," ",821],"=",["T_WHITESPACE"," ",821],["T_CONSTANT_ENCAPSED_STRING","'application\/pgp'",821],";",["T_WHITESPACE","\n                ",821],["T_BREAK","break",822],";",["T_WHITESPACE","\n            ",822],["T_CASE","case",823],["T_WHITESPACE"," ",823],["T_CONSTANT_ENCAPSED_STRING","'ps'",823],":",["T_WHITESPACE","\n            ",823],["T_CASE","case",824],["T_WHITESPACE"," ",824],["T_CONSTANT_ENCAPSED_STRING","'eps'",824],":",["T_WHITESPACE","\n            ",824],["T_CASE","case",825],["T_WHITESPACE"," ",825],["T_CONSTANT_ENCAPSED_STRING","'ai'",825],":",["T_WHITESPACE","\n                ",825],["T_VARIABLE","$content_type",826],["T_WHITESPACE"," ",826],"=",["T_WHITESPACE"," ",826],["T_CONSTANT_ENCAPSED_STRING","'application\/postscript'",826],";",["T_WHITESPACE","\n                ",826],["T_BREAK","break",827],";",["T_WHITESPACE","\n            ",827],["T_CASE","case",828],["T_WHITESPACE"," ",828],["T_CONSTANT_ENCAPSED_STRING","'ppt'",828],":",["T_WHITESPACE","\n                ",828],["T_VARIABLE","$content_type",829],["T_WHITESPACE"," ",829],"=",["T_WHITESPACE"," ",829],["T_CONSTANT_ENCAPSED_STRING","'application\/powerpoint'",829],";",["T_WHITESPACE","\n                ",829],["T_BREAK","break",830],";",["T_WHITESPACE","\n            ",830],["T_CASE","case",831],["T_WHITESPACE"," ",831],["T_CONSTANT_ENCAPSED_STRING","'rtf'",831],":",["T_WHITESPACE","\n                ",831],["T_VARIABLE","$content_type",832],["T_WHITESPACE"," ",832],"=",["T_WHITESPACE"," ",832],["T_CONSTANT_ENCAPSED_STRING","'application\/rtf'",832],";",["T_WHITESPACE","\n                ",832],["T_BREAK","break",833],";",["T_WHITESPACE","\n            ",833],["T_CASE","case",834],["T_WHITESPACE"," ",834],["T_CONSTANT_ENCAPSED_STRING","'tgz'",834],":",["T_WHITESPACE","\n            ",834],["T_CASE","case",835],["T_WHITESPACE"," ",835],["T_CONSTANT_ENCAPSED_STRING","'gtar'",835],":",["T_WHITESPACE","\n                ",835],["T_VARIABLE","$content_type",836],["T_WHITESPACE"," ",836],"=",["T_WHITESPACE"," ",836],["T_CONSTANT_ENCAPSED_STRING","'application\/x-gtar'",836],";",["T_WHITESPACE","\n                ",836],["T_BREAK","break",837],";",["T_WHITESPACE","\n            ",837],["T_CASE","case",838],["T_WHITESPACE"," ",838],["T_CONSTANT_ENCAPSED_STRING","'gz'",838],":",["T_WHITESPACE","\n                ",838],["T_VARIABLE","$content_type",839],["T_WHITESPACE"," ",839],"=",["T_WHITESPACE"," ",839],["T_CONSTANT_ENCAPSED_STRING","'application\/x-gzip'",839],";",["T_WHITESPACE","\n                ",839],["T_BREAK","break",840],";",["T_WHITESPACE","\n            ",840],["T_CASE","case",841],["T_WHITESPACE"," ",841],["T_CONSTANT_ENCAPSED_STRING","'php'",841],":",["T_WHITESPACE","\n            ",841],["T_CASE","case",842],["T_WHITESPACE"," ",842],["T_CONSTANT_ENCAPSED_STRING","'php3'",842],":",["T_WHITESPACE","\n            ",842],["T_CASE","case",843],["T_WHITESPACE"," ",843],["T_CONSTANT_ENCAPSED_STRING","'php4'",843],":",["T_WHITESPACE","\n                ",843],["T_VARIABLE","$content_type",844],["T_WHITESPACE"," ",844],"=",["T_WHITESPACE"," ",844],["T_CONSTANT_ENCAPSED_STRING","'application\/x-httpd-php'",844],";",["T_WHITESPACE","\n                ",844],["T_BREAK","break",845],";",["T_WHITESPACE","\n            ",845],["T_CASE","case",846],["T_WHITESPACE"," ",846],["T_CONSTANT_ENCAPSED_STRING","'js'",846],":",["T_WHITESPACE","\n                ",846],["T_VARIABLE","$content_type",847],["T_WHITESPACE"," ",847],"=",["T_WHITESPACE"," ",847],["T_CONSTANT_ENCAPSED_STRING","'application\/x-javascript'",847],";",["T_WHITESPACE","\n                ",847],["T_BREAK","break",848],";",["T_WHITESPACE","\n            ",848],["T_CASE","case",849],["T_WHITESPACE"," ",849],["T_CONSTANT_ENCAPSED_STRING","'ppd'",849],":",["T_WHITESPACE","\n            ",849],["T_CASE","case",850],["T_WHITESPACE"," ",850],["T_CONSTANT_ENCAPSED_STRING","'psd'",850],":",["T_WHITESPACE","\n                ",850],["T_VARIABLE","$content_type",851],["T_WHITESPACE"," ",851],"=",["T_WHITESPACE"," ",851],["T_CONSTANT_ENCAPSED_STRING","'application\/x-photoshop'",851],";",["T_WHITESPACE","\n                ",851],["T_BREAK","break",852],";",["T_WHITESPACE","\n            ",852],["T_CASE","case",853],["T_WHITESPACE"," ",853],["T_CONSTANT_ENCAPSED_STRING","'swf'",853],":",["T_WHITESPACE","\n            ",853],["T_CASE","case",854],["T_WHITESPACE"," ",854],["T_CONSTANT_ENCAPSED_STRING","'swc'",854],":",["T_WHITESPACE","\n            ",854],["T_CASE","case",855],["T_WHITESPACE"," ",855],["T_CONSTANT_ENCAPSED_STRING","'rf'",855],":",["T_WHITESPACE","\n                ",855],["T_VARIABLE","$content_type",856],["T_WHITESPACE"," ",856],"=",["T_WHITESPACE"," ",856],["T_CONSTANT_ENCAPSED_STRING","'application\/x-shockwave-flash'",856],";",["T_WHITESPACE","\n                ",856],["T_BREAK","break",857],";",["T_WHITESPACE","\n            ",857],["T_CASE","case",858],["T_WHITESPACE"," ",858],["T_CONSTANT_ENCAPSED_STRING","'tar'",858],":",["T_WHITESPACE","\n                ",858],["T_VARIABLE","$content_type",859],["T_WHITESPACE"," ",859],"=",["T_WHITESPACE"," ",859],["T_CONSTANT_ENCAPSED_STRING","'application\/x-tar'",859],";",["T_WHITESPACE","\n                ",859],["T_BREAK","break",860],";",["T_WHITESPACE","\n            ",860],["T_CASE","case",861],["T_WHITESPACE"," ",861],["T_CONSTANT_ENCAPSED_STRING","'zip'",861],":",["T_WHITESPACE","\n                ",861],["T_VARIABLE","$content_type",862],["T_WHITESPACE"," ",862],"=",["T_WHITESPACE"," ",862],["T_CONSTANT_ENCAPSED_STRING","'application\/zip'",862],";",["T_WHITESPACE","\n                ",862],["T_BREAK","break",863],";",["T_WHITESPACE","\n            ",863],["T_CASE","case",864],["T_WHITESPACE"," ",864],["T_CONSTANT_ENCAPSED_STRING","'mid'",864],":",["T_WHITESPACE","\n            ",864],["T_CASE","case",865],["T_WHITESPACE"," ",865],["T_CONSTANT_ENCAPSED_STRING","'midi'",865],":",["T_WHITESPACE","\n            ",865],["T_CASE","case",866],["T_WHITESPACE"," ",866],["T_CONSTANT_ENCAPSED_STRING","'kar'",866],":",["T_WHITESPACE","\n                ",866],["T_VARIABLE","$content_type",867],["T_WHITESPACE"," ",867],"=",["T_WHITESPACE"," ",867],["T_CONSTANT_ENCAPSED_STRING","'audio\/midi'",867],";",["T_WHITESPACE","\n                ",867],["T_BREAK","break",868],";",["T_WHITESPACE","\n            ",868],["T_CASE","case",869],["T_WHITESPACE"," ",869],["T_CONSTANT_ENCAPSED_STRING","'mp2'",869],":",["T_WHITESPACE","\n            ",869],["T_CASE","case",870],["T_WHITESPACE"," ",870],["T_CONSTANT_ENCAPSED_STRING","'mp3'",870],":",["T_WHITESPACE","\n            ",870],["T_CASE","case",871],["T_WHITESPACE"," ",871],["T_CONSTANT_ENCAPSED_STRING","'mpga'",871],":",["T_WHITESPACE","\n                ",871],["T_VARIABLE","$content_type",872],["T_WHITESPACE"," ",872],"=",["T_WHITESPACE"," ",872],["T_CONSTANT_ENCAPSED_STRING","'audio\/mpeg'",872],";",["T_WHITESPACE","\n                ",872],["T_BREAK","break",873],";",["T_WHITESPACE","\n            ",873],["T_CASE","case",874],["T_WHITESPACE"," ",874],["T_CONSTANT_ENCAPSED_STRING","'ra'",874],":",["T_WHITESPACE","\n                ",874],["T_VARIABLE","$content_type",875],["T_WHITESPACE"," ",875],"=",["T_WHITESPACE"," ",875],["T_CONSTANT_ENCAPSED_STRING","'audio\/x-realaudio'",875],";",["T_WHITESPACE","\n                ",875],["T_BREAK","break",876],";",["T_WHITESPACE","\n            ",876],["T_CASE","case",877],["T_WHITESPACE"," ",877],["T_CONSTANT_ENCAPSED_STRING","'wav'",877],":",["T_WHITESPACE","\n                ",877],["T_VARIABLE","$content_type",878],["T_WHITESPACE"," ",878],"=",["T_WHITESPACE"," ",878],["T_CONSTANT_ENCAPSED_STRING","'audio\/wav'",878],";",["T_WHITESPACE","\n                ",878],["T_BREAK","break",879],";",["T_WHITESPACE","\n            ",879],["T_CASE","case",880],["T_WHITESPACE"," ",880],["T_CONSTANT_ENCAPSED_STRING","'bmp'",880],":",["T_WHITESPACE","\n                ",880],["T_VARIABLE","$content_type",881],["T_WHITESPACE"," ",881],"=",["T_WHITESPACE"," ",881],["T_CONSTANT_ENCAPSED_STRING","'image\/bitmap'",881],";",["T_WHITESPACE","\n                ",881],["T_BREAK","break",882],";",["T_WHITESPACE","\n            ",882],["T_CASE","case",883],["T_WHITESPACE"," ",883],["T_CONSTANT_ENCAPSED_STRING","'gif'",883],":",["T_WHITESPACE","\n                ",883],["T_VARIABLE","$content_type",884],["T_WHITESPACE"," ",884],"=",["T_WHITESPACE"," ",884],["T_CONSTANT_ENCAPSED_STRING","'image\/gif'",884],";",["T_WHITESPACE","\n                ",884],["T_BREAK","break",885],";",["T_WHITESPACE","\n            ",885],["T_CASE","case",886],["T_WHITESPACE"," ",886],["T_CONSTANT_ENCAPSED_STRING","'iff'",886],":",["T_WHITESPACE","\n                ",886],["T_VARIABLE","$content_type",887],["T_WHITESPACE"," ",887],"=",["T_WHITESPACE"," ",887],["T_CONSTANT_ENCAPSED_STRING","'image\/iff'",887],";",["T_WHITESPACE","\n                ",887],["T_BREAK","break",888],";",["T_WHITESPACE","\n            ",888],["T_CASE","case",889],["T_WHITESPACE"," ",889],["T_CONSTANT_ENCAPSED_STRING","'jb2'",889],":",["T_WHITESPACE","\n                ",889],["T_VARIABLE","$content_type",890],["T_WHITESPACE"," ",890],"=",["T_WHITESPACE"," ",890],["T_CONSTANT_ENCAPSED_STRING","'image\/jb2'",890],";",["T_WHITESPACE","\n                ",890],["T_BREAK","break",891],";",["T_WHITESPACE","\n            ",891],["T_CASE","case",892],["T_WHITESPACE"," ",892],["T_CONSTANT_ENCAPSED_STRING","'jpg'",892],":",["T_WHITESPACE","\n            ",892],["T_CASE","case",893],["T_WHITESPACE"," ",893],["T_CONSTANT_ENCAPSED_STRING","'jpe'",893],":",["T_WHITESPACE","\n            ",893],["T_CASE","case",894],["T_WHITESPACE"," ",894],["T_CONSTANT_ENCAPSED_STRING","'jpeg'",894],":",["T_WHITESPACE","\n                ",894],["T_VARIABLE","$content_type",895],["T_WHITESPACE"," ",895],"=",["T_WHITESPACE"," ",895],["T_CONSTANT_ENCAPSED_STRING","'image\/jpeg'",895],";",["T_WHITESPACE","\n                ",895],["T_BREAK","break",896],";",["T_WHITESPACE","\n            ",896],["T_CASE","case",897],["T_WHITESPACE"," ",897],["T_CONSTANT_ENCAPSED_STRING","'jpx'",897],":",["T_WHITESPACE","\n                ",897],["T_VARIABLE","$content_type",898],["T_WHITESPACE"," ",898],"=",["T_WHITESPACE"," ",898],["T_CONSTANT_ENCAPSED_STRING","'image\/jpx'",898],";",["T_WHITESPACE","\n                ",898],["T_BREAK","break",899],";",["T_WHITESPACE","\n            ",899],["T_CASE","case",900],["T_WHITESPACE"," ",900],["T_CONSTANT_ENCAPSED_STRING","'png'",900],":",["T_WHITESPACE","\n                ",900],["T_VARIABLE","$content_type",901],["T_WHITESPACE"," ",901],"=",["T_WHITESPACE"," ",901],["T_CONSTANT_ENCAPSED_STRING","'image\/png'",901],";",["T_WHITESPACE","\n                ",901],["T_BREAK","break",902],";",["T_WHITESPACE","\n            ",902],["T_CASE","case",903],["T_WHITESPACE"," ",903],["T_CONSTANT_ENCAPSED_STRING","'tif'",903],":",["T_WHITESPACE","\n            ",903],["T_CASE","case",904],["T_WHITESPACE"," ",904],["T_CONSTANT_ENCAPSED_STRING","'tiff'",904],":",["T_WHITESPACE","\n                ",904],["T_VARIABLE","$content_type",905],["T_WHITESPACE"," ",905],"=",["T_WHITESPACE"," ",905],["T_CONSTANT_ENCAPSED_STRING","'image\/tiff'",905],";",["T_WHITESPACE","\n                ",905],["T_BREAK","break",906],";",["T_WHITESPACE","\n            ",906],["T_CASE","case",907],["T_WHITESPACE"," ",907],["T_CONSTANT_ENCAPSED_STRING","'wbmp'",907],":",["T_WHITESPACE","\n                ",907],["T_VARIABLE","$content_type",908],["T_WHITESPACE"," ",908],"=",["T_WHITESPACE"," ",908],["T_CONSTANT_ENCAPSED_STRING","'image\/vnd.wap.wbmp'",908],";",["T_WHITESPACE","\n                ",908],["T_BREAK","break",909],";",["T_WHITESPACE","\n            ",909],["T_CASE","case",910],["T_WHITESPACE"," ",910],["T_CONSTANT_ENCAPSED_STRING","'xbm'",910],":",["T_WHITESPACE","\n                ",910],["T_VARIABLE","$content_type",911],["T_WHITESPACE"," ",911],"=",["T_WHITESPACE"," ",911],["T_CONSTANT_ENCAPSED_STRING","'image\/xbm'",911],";",["T_WHITESPACE","\n                ",911],["T_BREAK","break",912],";",["T_WHITESPACE","\n            ",912],["T_CASE","case",913],["T_WHITESPACE"," ",913],["T_CONSTANT_ENCAPSED_STRING","'css'",913],":",["T_WHITESPACE","\n                ",913],["T_VARIABLE","$content_type",914],["T_WHITESPACE"," ",914],"=",["T_WHITESPACE"," ",914],["T_CONSTANT_ENCAPSED_STRING","'text\/css'",914],";",["T_WHITESPACE","\n                ",914],["T_BREAK","break",915],";",["T_WHITESPACE","\n            ",915],["T_CASE","case",916],["T_WHITESPACE"," ",916],["T_CONSTANT_ENCAPSED_STRING","'txt'",916],":",["T_WHITESPACE","\n                ",916],["T_VARIABLE","$content_type",917],["T_WHITESPACE"," ",917],"=",["T_WHITESPACE"," ",917],["T_CONSTANT_ENCAPSED_STRING","'text\/plain'",917],";",["T_WHITESPACE","\n                ",917],["T_BREAK","break",918],";",["T_WHITESPACE","\n            ",918],["T_CASE","case",919],["T_WHITESPACE"," ",919],["T_CONSTANT_ENCAPSED_STRING","'htm'",919],":",["T_WHITESPACE","\n            ",919],["T_CASE","case",920],["T_WHITESPACE"," ",920],["T_CONSTANT_ENCAPSED_STRING","'html'",920],":",["T_WHITESPACE","\n                ",920],["T_VARIABLE","$content_type",921],["T_WHITESPACE"," ",921],"=",["T_WHITESPACE"," ",921],["T_CONSTANT_ENCAPSED_STRING","'text\/html'",921],";",["T_WHITESPACE","\n                ",921],["T_BREAK","break",922],";",["T_WHITESPACE","\n            ",922],["T_CASE","case",923],["T_WHITESPACE"," ",923],["T_CONSTANT_ENCAPSED_STRING","'xml'",923],":",["T_WHITESPACE","\n                ",923],["T_VARIABLE","$content_type",924],["T_WHITESPACE"," ",924],"=",["T_WHITESPACE"," ",924],["T_CONSTANT_ENCAPSED_STRING","'text\/xml'",924],";",["T_WHITESPACE","\n                ",924],["T_BREAK","break",925],";",["T_WHITESPACE","\n            ",925],["T_CASE","case",926],["T_WHITESPACE"," ",926],["T_CONSTANT_ENCAPSED_STRING","'xsl'",926],":",["T_WHITESPACE","\n                ",926],["T_VARIABLE","$content_type",927],["T_WHITESPACE"," ",927],"=",["T_WHITESPACE"," ",927],["T_CONSTANT_ENCAPSED_STRING","'text\/xsl'",927],";",["T_WHITESPACE","\n                ",927],["T_BREAK","break",928],";",["T_WHITESPACE","\n            ",928],["T_CASE","case",929],["T_WHITESPACE"," ",929],["T_CONSTANT_ENCAPSED_STRING","'mpg'",929],":",["T_WHITESPACE","\n            ",929],["T_CASE","case",930],["T_WHITESPACE"," ",930],["T_CONSTANT_ENCAPSED_STRING","'mpe'",930],":",["T_WHITESPACE","\n            ",930],["T_CASE","case",931],["T_WHITESPACE"," ",931],["T_CONSTANT_ENCAPSED_STRING","'mpeg'",931],":",["T_WHITESPACE","\n                ",931],["T_VARIABLE","$content_type",932],["T_WHITESPACE"," ",932],"=",["T_WHITESPACE"," ",932],["T_CONSTANT_ENCAPSED_STRING","'video\/mpeg'",932],";",["T_WHITESPACE","\n                ",932],["T_BREAK","break",933],";",["T_WHITESPACE","\n            ",933],["T_CASE","case",934],["T_WHITESPACE"," ",934],["T_CONSTANT_ENCAPSED_STRING","'qt'",934],":",["T_WHITESPACE","\n            ",934],["T_CASE","case",935],["T_WHITESPACE"," ",935],["T_CONSTANT_ENCAPSED_STRING","'mov'",935],":",["T_WHITESPACE","\n                ",935],["T_VARIABLE","$content_type",936],["T_WHITESPACE"," ",936],"=",["T_WHITESPACE"," ",936],["T_CONSTANT_ENCAPSED_STRING","'video\/quicktime'",936],";",["T_WHITESPACE","\n                ",936],["T_BREAK","break",937],";",["T_WHITESPACE","\n            ",937],["T_CASE","case",938],["T_WHITESPACE"," ",938],["T_CONSTANT_ENCAPSED_STRING","'avi'",938],":",["T_WHITESPACE","\n                ",938],["T_VARIABLE","$content_type",939],["T_WHITESPACE"," ",939],"=",["T_WHITESPACE"," ",939],["T_CONSTANT_ENCAPSED_STRING","'video\/x-ms-video'",939],";",["T_WHITESPACE","\n                ",939],["T_BREAK","break",940],";",["T_WHITESPACE","\n            ",940],["T_CASE","case",941],["T_WHITESPACE"," ",941],["T_CONSTANT_ENCAPSED_STRING","'eml'",941],":",["T_WHITESPACE","\n                ",941],["T_VARIABLE","$content_type",942],["T_WHITESPACE"," ",942],"=",["T_WHITESPACE"," ",942],["T_CONSTANT_ENCAPSED_STRING","'message\/rfc822'",942],";",["T_WHITESPACE","\n                ",942],["T_BREAK","break",943],";",["T_WHITESPACE","\n            ",943],["T_DEFAULT","default",944],":",["T_WHITESPACE","\n                ",944],["T_VARIABLE","$content_type",945],["T_WHITESPACE"," ",945],"=",["T_WHITESPACE"," ",945],["T_CONSTANT_ENCAPSED_STRING","'binary\/octet-stream'",945],";",["T_WHITESPACE","\n                ",945],["T_BREAK","break",946],";",["T_WHITESPACE","\n        ",946],"}",["T_WHITESPACE","\n\n        ",947],["T_RETURN","return",949],["T_WHITESPACE"," ",949],["T_VARIABLE","$content_type",949],";",["T_WHITESPACE","\n    ",949],"}",["T_WHITESPACE","\n\n    ",950],["T_DOC_COMMENT","\/**\n     * Register this object as stream wrapper client\n     *\n     * @param  string $name\n     * @return Zend_Service_Amazon_S3\n     *\/",952],["T_WHITESPACE","\n    ",957],["T_PUBLIC","public",958],["T_WHITESPACE"," ",958],["T_FUNCTION","function",958],["T_WHITESPACE"," ",958],["T_STRING","registerAsClient",958],"(",["T_VARIABLE","$name",958],")",["T_WHITESPACE","\n    ",958],"{",["T_WHITESPACE","\n        ",959],["T_STRING","self",960],["T_DOUBLE_COLON","::",960],["T_VARIABLE","$_wrapperClients",960],"[",["T_VARIABLE","$name",960],"]",["T_WHITESPACE"," ",960],"=",["T_WHITESPACE"," ",960],["T_VARIABLE","$this",960],";",["T_WHITESPACE","\n        ",960],["T_RETURN","return",961],["T_WHITESPACE"," ",961],["T_VARIABLE","$this",961],";",["T_WHITESPACE","\n    ",961],"}",["T_WHITESPACE","\n\n    ",962],["T_DOC_COMMENT","\/**\n     * Unregister this object as stream wrapper client\n     *\n     * @param  string $name\n     * @return Zend_Service_Amazon_S3\n     *\/",964],["T_WHITESPACE","\n    ",969],["T_PUBLIC","public",970],["T_WHITESPACE"," ",970],["T_FUNCTION","function",970],["T_WHITESPACE"," ",970],["T_STRING","unregisterAsClient",970],"(",["T_VARIABLE","$name",970],")",["T_WHITESPACE","\n    ",970],"{",["T_WHITESPACE","\n        ",971],["T_UNSET","unset",972],"(",["T_STRING","self",972],["T_DOUBLE_COLON","::",972],["T_VARIABLE","$_wrapperClients",972],"[",["T_VARIABLE","$name",972],"]",")",";",["T_WHITESPACE","\n        ",972],["T_RETURN","return",973],["T_WHITESPACE"," ",973],["T_VARIABLE","$this",973],";",["T_WHITESPACE","\n    ",973],"}",["T_WHITESPACE","\n\n    ",974],["T_DOC_COMMENT","\/**\n     * Get wrapper client for stream type\n     *\n     * @param  string $name\n     * @return Zend_Service_Amazon_S3\n     *\/",976],["T_WHITESPACE","\n    ",981],["T_PUBLIC","public",982],["T_WHITESPACE"," ",982],["T_STATIC","static",982],["T_WHITESPACE"," ",982],["T_FUNCTION","function",982],["T_WHITESPACE"," ",982],["T_STRING","getWrapperClient",982],"(",["T_VARIABLE","$name",982],")",["T_WHITESPACE","\n    ",982],"{",["T_WHITESPACE","\n        ",983],["T_RETURN","return",984],["T_WHITESPACE"," ",984],["T_STRING","self",984],["T_DOUBLE_COLON","::",984],["T_VARIABLE","$_wrapperClients",984],"[",["T_VARIABLE","$name",984],"]",";",["T_WHITESPACE","\n    ",984],"}",["T_WHITESPACE","\n\n    ",985],["T_DOC_COMMENT","\/**\n     * Register this object as stream wrapper\n     *\n     * @param  string $name\n     * @return Zend_Service_Amazon_S3\n     *\/",987],["T_WHITESPACE","\n    ",992],["T_PUBLIC","public",993],["T_WHITESPACE"," ",993],["T_FUNCTION","function",993],["T_WHITESPACE"," ",993],["T_STRING","registerStreamWrapper",993],"(",["T_VARIABLE","$name",993],"=",["T_CONSTANT_ENCAPSED_STRING","'s3'",993],")",["T_WHITESPACE","\n    ",993],"{",["T_WHITESPACE","\n        ",994],["T_DOC_COMMENT","\/**\n         * @see Zend_Service_Amazon_S3_Stream\n         *\/",995],["T_WHITESPACE","\n        ",997],["T_COMMENT","#require_once 'Zend\/Service\/Amazon\/S3\/Stream.php';\n",998],["T_WHITESPACE","\n        ",999],["T_STRING","stream_register_wrapper",1000],"(",["T_VARIABLE","$name",1000],",",["T_WHITESPACE"," ",1000],["T_CONSTANT_ENCAPSED_STRING","'Zend_Service_Amazon_S3_Stream'",1000],")",";",["T_WHITESPACE","\n        ",1000],["T_VARIABLE","$this",1001],["T_OBJECT_OPERATOR","->",1001],["T_STRING","registerAsClient",1001],"(",["T_VARIABLE","$name",1001],")",";",["T_WHITESPACE","\n    ",1001],"}",["T_WHITESPACE","\n\n    ",1002],["T_DOC_COMMENT","\/**\n     * Unregister this object as stream wrapper\n     *\n     * @param  string $name\n     * @return Zend_Service_Amazon_S3\n     *\/",1004],["T_WHITESPACE","\n    ",1009],["T_PUBLIC","public",1010],["T_WHITESPACE"," ",1010],["T_FUNCTION","function",1010],["T_WHITESPACE"," ",1010],["T_STRING","unregisterStreamWrapper",1010],"(",["T_VARIABLE","$name",1010],"=",["T_CONSTANT_ENCAPSED_STRING","'s3'",1010],")",["T_WHITESPACE","\n    ",1010],"{",["T_WHITESPACE","\n        ",1011],["T_STRING","stream_wrapper_unregister",1012],"(",["T_VARIABLE","$name",1012],")",";",["T_WHITESPACE","\n        ",1012],["T_VARIABLE","$this",1013],["T_OBJECT_OPERATOR","->",1013],["T_STRING","unregisterAsClient",1013],"(",["T_VARIABLE","$name",1013],")",";",["T_WHITESPACE","\n    ",1013],"}",["T_WHITESPACE","\n",1014],"}",["T_WHITESPACE","\n",1015]]
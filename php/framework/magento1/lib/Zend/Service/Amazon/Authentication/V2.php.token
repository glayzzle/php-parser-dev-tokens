[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Zend Framework\n *\n * LICENSE\n *\n * This source file is subject to the new BSD license that is bundled\n * with this package in the file LICENSE.txt.\n * It is also available through the world-wide-web at this URL:\n * http:\/\/framework.zend.com\/license\/new-bsd\n * If you did not receive a copy of the license and are unable to\n * obtain it through the world-wide-web, please send an email\n * to license@zend.com so we can send you a copy immediately.\n *\n * @category   Zend\n * @package    Zend_Service_Amazon\n * @subpackage Authentication\n * @copyright  Copyright (c) 2005-2015 Zend Technologies USA Inc. (http:\/\/www.zend.com)\n * @license    http:\/\/framework.zend.com\/license\/new-bsd     New BSD License\n *\/",2],["T_WHITESPACE","\n\n",20],["T_DOC_COMMENT","\/**\n * @see Zend_Service_Amazon_Authentication\n *\/",22],["T_WHITESPACE","\n",24],["T_COMMENT","#require_once 'Zend\/Service\/Amazon\/Authentication.php';\n",25],["T_WHITESPACE","\n",26],["T_DOC_COMMENT","\/**\n * @see Zend_Crypt_Hmac\n *\/",27],["T_WHITESPACE","\n",29],["T_COMMENT","#require_once 'Zend\/Crypt\/Hmac.php';\n",30],["T_WHITESPACE","\n",31],["T_DOC_COMMENT","\/**\n * @category   Zend\n * @package    Zend_Service_Amazon\n * @subpackage Authentication\n * @copyright  Copyright (c) 2005-2015 Zend Technologies USA Inc. (http:\/\/www.zend.com)\n * @license    http:\/\/framework.zend.com\/license\/new-bsd     New BSD License\n *\/",32],["T_WHITESPACE","\n",38],["T_CLASS","class",39],["T_WHITESPACE"," ",39],["T_STRING","Zend_Service_Amazon_Authentication_V2",39],["T_WHITESPACE"," ",39],["T_EXTENDS","extends",39],["T_WHITESPACE"," ",39],["T_STRING","Zend_Service_Amazon_Authentication",39],["T_WHITESPACE","\n",39],"{",["T_WHITESPACE","\n    ",40],["T_DOC_COMMENT","\/**\n     * Signature Version\n     *\/",41],["T_WHITESPACE","\n    ",43],["T_PROTECTED","protected",44],["T_WHITESPACE"," ",44],["T_VARIABLE","$_signatureVersion",44],["T_WHITESPACE"," ",44],"=",["T_WHITESPACE"," ",44],["T_CONSTANT_ENCAPSED_STRING","'2'",44],";",["T_WHITESPACE","\n\n    ",44],["T_DOC_COMMENT","\/**\n     * Signature Encoding Method\n     *\/",46],["T_WHITESPACE","\n    ",48],["T_PROTECTED","protected",49],["T_WHITESPACE"," ",49],["T_VARIABLE","$_signatureMethod",49],["T_WHITESPACE"," ",49],"=",["T_WHITESPACE"," ",49],["T_CONSTANT_ENCAPSED_STRING","'HmacSHA256'",49],";",["T_WHITESPACE","\n\n    ",49],["T_DOC_COMMENT","\/**\n     * Type of http request\n     * @var string\n     *\/",51],["T_WHITESPACE","\n    ",54],["T_PROTECTED","protected",55],["T_WHITESPACE"," ",55],["T_VARIABLE","$_httpMethod",55],["T_WHITESPACE"," ",55],"=",["T_WHITESPACE"," ",55],["T_CONSTANT_ENCAPSED_STRING","\"POST\"",55],";",["T_WHITESPACE","\n\n    ",55],["T_DOC_COMMENT","\/**\n     * Generate the required attributes for the signature\n     * @param string $url\n     * @param array $parameters\n     * @return string\n     *\/",57],["T_WHITESPACE","\n    ",62],["T_PUBLIC","public",63],["T_WHITESPACE"," ",63],["T_FUNCTION","function",63],["T_WHITESPACE"," ",63],["T_STRING","generateSignature",63],"(",["T_VARIABLE","$url",63],",",["T_WHITESPACE"," ",63],["T_ARRAY","array",63],["T_WHITESPACE"," ",63],"&",["T_VARIABLE","$parameters",63],")",["T_WHITESPACE","\n    ",63],"{",["T_WHITESPACE","\n        ",64],["T_VARIABLE","$parameters",65],"[",["T_CONSTANT_ENCAPSED_STRING","'AWSAccessKeyId'",65],"]",["T_WHITESPACE","   ",65],"=",["T_WHITESPACE"," ",65],["T_VARIABLE","$this",65],["T_OBJECT_OPERATOR","->",65],["T_STRING","_accessKey",65],";",["T_WHITESPACE","\n        ",65],["T_VARIABLE","$parameters",66],"[",["T_CONSTANT_ENCAPSED_STRING","'SignatureVersion'",66],"]",["T_WHITESPACE"," ",66],"=",["T_WHITESPACE"," ",66],["T_VARIABLE","$this",66],["T_OBJECT_OPERATOR","->",66],["T_STRING","_signatureVersion",66],";",["T_WHITESPACE","\n        ",66],["T_VARIABLE","$parameters",67],"[",["T_CONSTANT_ENCAPSED_STRING","'Version'",67],"]",["T_WHITESPACE","          ",67],"=",["T_WHITESPACE"," ",67],["T_VARIABLE","$this",67],["T_OBJECT_OPERATOR","->",67],["T_STRING","_apiVersion",67],";",["T_WHITESPACE","\n        ",67],["T_VARIABLE","$parameters",68],"[",["T_CONSTANT_ENCAPSED_STRING","'SignatureMethod'",68],"]",["T_WHITESPACE","  ",68],"=",["T_WHITESPACE"," ",68],["T_VARIABLE","$this",68],["T_OBJECT_OPERATOR","->",68],["T_STRING","_signatureMethod",68],";",["T_WHITESPACE","\n        ",68],["T_IF","if",69],"(","!",["T_ISSET","isset",69],"(",["T_VARIABLE","$parameters",69],"[",["T_CONSTANT_ENCAPSED_STRING","'Timestamp'",69],"]",")",")",["T_WHITESPACE"," ",69],"{",["T_WHITESPACE","\n            ",69],["T_VARIABLE","$parameters",70],"[",["T_CONSTANT_ENCAPSED_STRING","'Timestamp'",70],"]",["T_WHITESPACE","    ",70],"=",["T_WHITESPACE"," ",70],["T_STRING","gmdate",70],"(",["T_CONSTANT_ENCAPSED_STRING","'Y-m-d\\TH:i:s\\Z'",70],",",["T_WHITESPACE"," ",70],["T_STRING","time",70],"(",")","+",["T_LNUMBER","10",70],")",";",["T_WHITESPACE","\n        ",70],"}",["T_WHITESPACE","\n\n        ",71],["T_VARIABLE","$data",73],["T_WHITESPACE"," ",73],"=",["T_WHITESPACE"," ",73],["T_VARIABLE","$this",73],["T_OBJECT_OPERATOR","->",73],["T_STRING","_signParameters",73],"(",["T_VARIABLE","$url",73],",",["T_WHITESPACE"," ",73],["T_VARIABLE","$parameters",73],")",";",["T_WHITESPACE","\n\n        ",73],["T_RETURN","return",75],["T_WHITESPACE"," ",75],["T_VARIABLE","$data",75],";",["T_WHITESPACE","\n    ",75],"}",["T_WHITESPACE","\n\n    ",76],["T_DOC_COMMENT","\/**\n     * Set http request type to POST or GET\n     * @param string $method\n     *\/",78],["T_WHITESPACE","\n    ",81],["T_PUBLIC","public",82],["T_WHITESPACE"," ",82],["T_FUNCTION","function",82],["T_WHITESPACE"," ",82],["T_STRING","setHttpMethod",82],"(",["T_VARIABLE","$method",82],["T_WHITESPACE"," ",82],"=",["T_WHITESPACE"," ",82],["T_CONSTANT_ENCAPSED_STRING","\"POST\"",82],")",["T_WHITESPACE"," ",82],"{",["T_WHITESPACE","\n        ",82],["T_VARIABLE","$this",83],["T_OBJECT_OPERATOR","->",83],["T_STRING","_httpMethod",83],["T_WHITESPACE"," ",83],"=",["T_WHITESPACE"," ",83],["T_STRING","strtoupper",83],"(",["T_VARIABLE","$method",83],")",";",["T_WHITESPACE","\n    ",83],"}",["T_WHITESPACE","\n\n    ",84],["T_DOC_COMMENT","\/**\n     * Get the current http request type\n     * @return string\n     *\/",86],["T_WHITESPACE","\n    ",89],["T_PUBLIC","public",90],["T_WHITESPACE"," ",90],["T_FUNCTION","function",90],["T_WHITESPACE"," ",90],["T_STRING","getHttpMethod",90],"(",")",["T_WHITESPACE","\n    ",90],"{",["T_WHITESPACE","\n        ",91],["T_RETURN","return",92],["T_WHITESPACE"," ",92],["T_VARIABLE","$this",92],["T_OBJECT_OPERATOR","->",92],["T_STRING","_httpMethod",92],";",["T_WHITESPACE","\n    ",92],"}",["T_WHITESPACE","\n\n    ",93],["T_DOC_COMMENT","\/**\n     * Computes the RFC 2104-compliant HMAC signature for request parameters\n     *\n     * This implements the Amazon Web Services signature, as per the following\n     * specification:\n     *\n     * 1. Sort all request parameters (including <tt>SignatureVersion<\/tt> and\n     *    excluding <tt>Signature<\/tt>, the value of which is being created),\n     *    ignoring case.\n     *\n     * 2. Iterate over the sorted list and append the parameter name (in its\n     *    original case) and then its value. Do not URL-encode the parameter\n     *    values before constructing this string. Do not use any separator\n     *    characters when appending strings.\n     *\n     * @param  string $queue_url  Queue URL\n     * @param  array  $parameters the parameters for which to get the signature.\n     *\n     * @return string the signed data.\n     *\/",95],["T_WHITESPACE","\n    ",114],["T_PROTECTED","protected",115],["T_WHITESPACE"," ",115],["T_FUNCTION","function",115],["T_WHITESPACE"," ",115],["T_STRING","_signParameters",115],"(",["T_VARIABLE","$url",115],",",["T_WHITESPACE"," ",115],["T_ARRAY","array",115],["T_WHITESPACE"," ",115],"&",["T_VARIABLE","$paramaters",115],")",["T_WHITESPACE","\n    ",115],"{",["T_WHITESPACE","\n        ",116],["T_VARIABLE","$data",117],["T_WHITESPACE"," ",117],"=",["T_WHITESPACE"," ",117],["T_VARIABLE","$this",117],["T_OBJECT_OPERATOR","->",117],["T_STRING","_httpMethod",117],["T_WHITESPACE"," ",117],".",["T_WHITESPACE"," ",117],["T_CONSTANT_ENCAPSED_STRING","\"\\n\"",117],";",["T_WHITESPACE","\n        ",117],["T_VARIABLE","$data",118],["T_WHITESPACE"," ",118],["T_CONCAT_EQUAL",".=",118],["T_WHITESPACE"," ",118],["T_STRING","parse_url",118],"(",["T_VARIABLE","$url",118],",",["T_WHITESPACE"," ",118],["T_STRING","PHP_URL_HOST",118],")",["T_WHITESPACE"," ",118],".",["T_WHITESPACE"," ",118],["T_CONSTANT_ENCAPSED_STRING","\"\\n\"",118],";",["T_WHITESPACE","\n        ",118],["T_VARIABLE","$data",119],["T_WHITESPACE"," ",119],["T_CONCAT_EQUAL",".=",119],["T_WHITESPACE"," ",119],"(",["T_CONSTANT_ENCAPSED_STRING","''",119],["T_WHITESPACE"," ",119],["T_IS_EQUAL","==",119],["T_WHITESPACE"," ",119],["T_VARIABLE","$path",119],["T_WHITESPACE"," ",119],"=",["T_WHITESPACE"," ",119],["T_STRING","parse_url",119],"(",["T_VARIABLE","$url",119],",",["T_WHITESPACE"," ",119],["T_STRING","PHP_URL_PATH",119],")",")",["T_WHITESPACE"," ",119],"?",["T_WHITESPACE"," ",119],["T_CONSTANT_ENCAPSED_STRING","'\/'",119],["T_WHITESPACE"," ",119],":",["T_WHITESPACE"," ",119],["T_VARIABLE","$path",119],";",["T_WHITESPACE","\n        ",119],["T_VARIABLE","$data",120],["T_WHITESPACE"," ",120],["T_CONCAT_EQUAL",".=",120],["T_WHITESPACE"," ",120],["T_CONSTANT_ENCAPSED_STRING","\"\\n\"",120],";",["T_WHITESPACE","\n\n        ",120],["T_STRING","uksort",122],"(",["T_VARIABLE","$paramaters",122],",",["T_WHITESPACE"," ",122],["T_CONSTANT_ENCAPSED_STRING","'strcmp'",122],")",";",["T_WHITESPACE","\n        ",122],["T_UNSET","unset",123],"(",["T_VARIABLE","$paramaters",123],"[",["T_CONSTANT_ENCAPSED_STRING","'Signature'",123],"]",")",";",["T_WHITESPACE","\n\n        ",123],["T_VARIABLE","$arrData",125],["T_WHITESPACE"," ",125],"=",["T_WHITESPACE"," ",125],["T_ARRAY","array",125],"(",")",";",["T_WHITESPACE","\n        ",125],["T_FOREACH","foreach",126],"(",["T_VARIABLE","$paramaters",126],["T_WHITESPACE"," ",126],["T_AS","as",126],["T_WHITESPACE"," ",126],["T_VARIABLE","$key",126],["T_WHITESPACE"," ",126],["T_DOUBLE_ARROW","=>",126],["T_WHITESPACE"," ",126],["T_VARIABLE","$value",126],")",["T_WHITESPACE"," ",126],"{",["T_WHITESPACE","\n            ",126],["T_VARIABLE","$arrData",127],"[","]",["T_WHITESPACE"," ",127],"=",["T_WHITESPACE"," ",127],["T_VARIABLE","$key",127],["T_WHITESPACE"," ",127],".",["T_WHITESPACE"," ",127],["T_CONSTANT_ENCAPSED_STRING","'='",127],["T_WHITESPACE"," ",127],".",["T_WHITESPACE"," ",127],["T_STRING","str_replace",127],"(",["T_CONSTANT_ENCAPSED_STRING","'%7E'",127],",",["T_WHITESPACE"," ",127],["T_CONSTANT_ENCAPSED_STRING","'~'",127],",",["T_WHITESPACE"," ",127],["T_STRING","rawurlencode",127],"(",["T_VARIABLE","$value",127],")",")",";",["T_WHITESPACE","\n        ",127],"}",["T_WHITESPACE","\n\n        ",128],["T_VARIABLE","$data",130],["T_WHITESPACE"," ",130],["T_CONCAT_EQUAL",".=",130],["T_WHITESPACE"," ",130],["T_STRING","implode",130],"(",["T_CONSTANT_ENCAPSED_STRING","'&'",130],",",["T_WHITESPACE"," ",130],["T_VARIABLE","$arrData",130],")",";",["T_WHITESPACE","\n\n        ",130],["T_VARIABLE","$hmac",132],["T_WHITESPACE"," ",132],"=",["T_WHITESPACE"," ",132],["T_STRING","Zend_Crypt_Hmac",132],["T_DOUBLE_COLON","::",132],["T_STRING","compute",132],"(",["T_VARIABLE","$this",132],["T_OBJECT_OPERATOR","->",132],["T_STRING","_secretKey",132],",",["T_WHITESPACE"," ",132],["T_CONSTANT_ENCAPSED_STRING","'SHA256'",132],",",["T_WHITESPACE"," ",132],["T_VARIABLE","$data",132],",",["T_WHITESPACE"," ",132],["T_STRING","Zend_Crypt_Hmac",132],["T_DOUBLE_COLON","::",132],["T_STRING","BINARY",132],")",";",["T_WHITESPACE","\n\n        ",132],["T_VARIABLE","$paramaters",134],"[",["T_CONSTANT_ENCAPSED_STRING","'Signature'",134],"]",["T_WHITESPACE"," ",134],"=",["T_WHITESPACE"," ",134],["T_STRING","base64_encode",134],"(",["T_VARIABLE","$hmac",134],")",";",["T_WHITESPACE","\n\n        ",134],["T_RETURN","return",136],["T_WHITESPACE"," ",136],["T_VARIABLE","$data",136],";",["T_WHITESPACE","\n    ",136],"}",["T_WHITESPACE","\n",137],"}",["T_WHITESPACE","\n",138]]
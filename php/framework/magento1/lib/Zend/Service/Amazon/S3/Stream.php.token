[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Zend Framework\n *\n * LICENSE\n *\n * This source file is subject to the new BSD license that is bundled\n * with this package in the file LICENSE.txt.\n * It is also available through the world-wide-web at this URL:\n * http:\/\/framework.zend.com\/license\/new-bsd\n * If you did not receive a copy of the license and are unable to\n * obtain it through the world-wide-web, please send an email\n * to license@zend.com so we can send you a copy immediately.\n *\n * @category   Zend\n * @package    Zend_Service\n * @subpackage Amazon_S3\n * @copyright  Copyright (c) 2005-2015 Zend Technologies USA Inc. (http:\/\/www.zend.com)\n * @license    http:\/\/framework.zend.com\/license\/new-bsd     New BSD License\n * @version    $Id$\n *\/",2],["T_WHITESPACE","\n\n",21],["T_DOC_COMMENT","\/**\n * @see Zend_Service_Amazon_S3\n *\/",23],["T_WHITESPACE","\n",25],["T_COMMENT","#require_once 'Zend\/Service\/Amazon\/S3.php';\n",26],["T_WHITESPACE","\n",27],["T_DOC_COMMENT","\/**\n * Amazon S3 PHP stream wrapper\n *\n * @category   Zend\n * @package    Zend_Service\n * @subpackage Amazon_S3\n * @copyright  Copyright (c) 2005-2015 Zend Technologies USA Inc. (http:\/\/www.zend.com)\n * @license    http:\/\/framework.zend.com\/license\/new-bsd     New BSD License\n *\/",28],["T_WHITESPACE","\n",36],["T_CLASS","class",37],["T_WHITESPACE"," ",37],["T_STRING","Zend_Service_Amazon_S3_Stream",37],["T_WHITESPACE","\n",37],"{",["T_WHITESPACE","\n    ",38],["T_DOC_COMMENT","\/**\n     * @var boolean Write the buffer on fflush()?\n     *\/",39],["T_WHITESPACE","\n    ",41],["T_PRIVATE","private",42],["T_WHITESPACE"," ",42],["T_VARIABLE","$_writeBuffer",42],["T_WHITESPACE"," ",42],"=",["T_WHITESPACE"," ",42],["T_STRING","false",42],";",["T_WHITESPACE","\n\n    ",42],["T_DOC_COMMENT","\/**\n     * @var integer Current read\/write position\n     *\/",44],["T_WHITESPACE","\n    ",46],["T_PRIVATE","private",47],["T_WHITESPACE"," ",47],["T_VARIABLE","$_position",47],["T_WHITESPACE"," ",47],"=",["T_WHITESPACE"," ",47],["T_LNUMBER","0",47],";",["T_WHITESPACE","\n\n    ",47],["T_DOC_COMMENT","\/**\n     * @var integer Total size of the object as returned by S3 (Content-length)\n     *\/",49],["T_WHITESPACE","\n    ",51],["T_PRIVATE","private",52],["T_WHITESPACE"," ",52],["T_VARIABLE","$_objectSize",52],["T_WHITESPACE"," ",52],"=",["T_WHITESPACE"," ",52],["T_LNUMBER","0",52],";",["T_WHITESPACE","\n\n    ",52],["T_DOC_COMMENT","\/**\n     * @var string File name to interact with\n     *\/",54],["T_WHITESPACE","\n    ",56],["T_PRIVATE","private",57],["T_WHITESPACE"," ",57],["T_VARIABLE","$_objectName",57],["T_WHITESPACE"," ",57],"=",["T_WHITESPACE"," ",57],["T_STRING","null",57],";",["T_WHITESPACE","\n\n    ",57],["T_DOC_COMMENT","\/**\n     * @var string Current read\/write buffer\n     *\/",59],["T_WHITESPACE","\n    ",61],["T_PRIVATE","private",62],["T_WHITESPACE"," ",62],["T_VARIABLE","$_objectBuffer",62],["T_WHITESPACE"," ",62],"=",["T_WHITESPACE"," ",62],["T_STRING","null",62],";",["T_WHITESPACE","\n\n    ",62],["T_DOC_COMMENT","\/**\n     * @var array Available buckets\n     *\/",64],["T_WHITESPACE","\n    ",66],["T_PRIVATE","private",67],["T_WHITESPACE"," ",67],["T_VARIABLE","$_bucketList",67],["T_WHITESPACE"," ",67],"=",["T_WHITESPACE"," ",67],["T_ARRAY","array",67],"(",")",";",["T_WHITESPACE","\n\n    ",67],["T_DOC_COMMENT","\/**\n     * @var Zend_Service_Amazon_S3\n     *\/",69],["T_WHITESPACE","\n    ",71],["T_PRIVATE","private",72],["T_WHITESPACE"," ",72],["T_VARIABLE","$_s3",72],["T_WHITESPACE"," ",72],"=",["T_WHITESPACE"," ",72],["T_STRING","null",72],";",["T_WHITESPACE","\n\n    ",72],["T_DOC_COMMENT","\/**\n     * Retrieve client for this stream type\n     *\n     * @param  string $path\n     * @return Zend_Service_Amazon_S3\n     *\/",74],["T_WHITESPACE","\n    ",79],["T_PROTECTED","protected",80],["T_WHITESPACE"," ",80],["T_FUNCTION","function",80],["T_WHITESPACE"," ",80],["T_STRING","_getS3Client",80],"(",["T_VARIABLE","$path",80],")",["T_WHITESPACE","\n    ",80],"{",["T_WHITESPACE","\n        ",81],["T_IF","if",82],["T_WHITESPACE"," ",82],"(",["T_VARIABLE","$this",82],["T_OBJECT_OPERATOR","->",82],["T_STRING","_s3",82],["T_WHITESPACE"," ",82],["T_IS_IDENTICAL","===",82],["T_WHITESPACE"," ",82],["T_STRING","null",82],")",["T_WHITESPACE"," ",82],"{",["T_WHITESPACE","\n            ",82],["T_VARIABLE","$url",83],["T_WHITESPACE"," ",83],"=",["T_WHITESPACE"," ",83],["T_STRING","explode",83],"(",["T_CONSTANT_ENCAPSED_STRING","':'",83],",",["T_WHITESPACE"," ",83],["T_VARIABLE","$path",83],")",";",["T_WHITESPACE","\n\n            ",83],["T_IF","if",85],["T_WHITESPACE"," ",85],"(","!",["T_VARIABLE","$url",85],")",["T_WHITESPACE"," ",85],"{",["T_WHITESPACE","\n                ",85],["T_DOC_COMMENT","\/**\n                 * @see Zend_Service_Amazon_S3_Exception\n                 *\/",86],["T_WHITESPACE","\n                ",88],["T_COMMENT","#require_once 'Zend\/Service\/Amazon\/S3\/Exception.php';\n",89],["T_WHITESPACE","                ",90],["T_THROW","throw",90],["T_WHITESPACE"," ",90],["T_NEW","new",90],["T_WHITESPACE"," ",90],["T_STRING","Zend_Service_Amazon_S3_Exception",90],"(","\"",["T_ENCAPSED_AND_WHITESPACE","Unable to parse URL ",90],["T_VARIABLE","$path",90],"\"",")",";",["T_WHITESPACE","\n            ",90],"}",["T_WHITESPACE","\n\n            ",91],["T_VARIABLE","$this",93],["T_OBJECT_OPERATOR","->",93],["T_STRING","_s3",93],["T_WHITESPACE"," ",93],"=",["T_WHITESPACE"," ",93],["T_STRING","Zend_Service_Amazon_S3",93],["T_DOUBLE_COLON","::",93],["T_STRING","getWrapperClient",93],"(",["T_VARIABLE","$url",93],"[",["T_LNUMBER","0",93],"]",")",";",["T_WHITESPACE","\n            ",93],["T_IF","if",94],["T_WHITESPACE"," ",94],"(","!",["T_VARIABLE","$this",94],["T_OBJECT_OPERATOR","->",94],["T_STRING","_s3",94],")",["T_WHITESPACE"," ",94],"{",["T_WHITESPACE","\n                ",94],["T_DOC_COMMENT","\/**\n                 * @see Zend_Service_Amazon_S3_Exception\n                 *\/",95],["T_WHITESPACE","\n                ",97],["T_COMMENT","#require_once 'Zend\/Service\/Amazon\/S3\/Exception.php';\n",98],["T_WHITESPACE","                ",99],["T_THROW","throw",99],["T_WHITESPACE"," ",99],["T_NEW","new",99],["T_WHITESPACE"," ",99],["T_STRING","Zend_Service_Amazon_S3_Exception",99],"(","\"",["T_ENCAPSED_AND_WHITESPACE","Unknown client for wrapper ",99],["T_CURLY_OPEN","{",99],["T_VARIABLE","$url",99],"[",["T_LNUMBER","0",99],"]","}","\"",")",";",["T_WHITESPACE","\n            ",99],"}",["T_WHITESPACE","\n        ",100],"}",["T_WHITESPACE","\n\n        ",101],["T_RETURN","return",103],["T_WHITESPACE"," ",103],["T_VARIABLE","$this",103],["T_OBJECT_OPERATOR","->",103],["T_STRING","_s3",103],";",["T_WHITESPACE","\n    ",103],"}",["T_WHITESPACE","\n\n    ",104],["T_DOC_COMMENT","\/**\n     * Extract object name from URL\n     *\n     * @param string $path\n     * @return string\n     *\/",106],["T_WHITESPACE","\n    ",111],["T_PROTECTED","protected",112],["T_WHITESPACE"," ",112],["T_FUNCTION","function",112],["T_WHITESPACE"," ",112],["T_STRING","_getNamePart",112],"(",["T_VARIABLE","$path",112],")",["T_WHITESPACE","\n    ",112],"{",["T_WHITESPACE","\n        ",113],["T_VARIABLE","$url",114],["T_WHITESPACE"," ",114],"=",["T_WHITESPACE"," ",114],["T_STRING","parse_url",114],"(",["T_VARIABLE","$path",114],")",";",["T_WHITESPACE","\n        ",114],["T_IF","if",115],["T_WHITESPACE"," ",115],"(",["T_VARIABLE","$url",115],"[",["T_CONSTANT_ENCAPSED_STRING","'host'",115],"]",")",["T_WHITESPACE"," ",115],"{",["T_WHITESPACE","\n            ",115],["T_RETURN","return",116],["T_WHITESPACE"," ",116],"!",["T_EMPTY","empty",116],"(",["T_VARIABLE","$url",116],"[",["T_CONSTANT_ENCAPSED_STRING","'path'",116],"]",")",["T_WHITESPACE"," ",116],"?",["T_WHITESPACE"," ",116],["T_VARIABLE","$url",116],"[",["T_CONSTANT_ENCAPSED_STRING","'host'",116],"]",".",["T_VARIABLE","$url",116],"[",["T_CONSTANT_ENCAPSED_STRING","'path'",116],"]",["T_WHITESPACE"," ",116],":",["T_WHITESPACE"," ",116],["T_VARIABLE","$url",116],"[",["T_CONSTANT_ENCAPSED_STRING","'host'",116],"]",";",["T_WHITESPACE","\n        ",116],"}",["T_WHITESPACE","\n\n        ",117],["T_RETURN","return",119],["T_WHITESPACE"," ",119],["T_CONSTANT_ENCAPSED_STRING","''",119],";",["T_WHITESPACE","\n    ",119],"}",["T_WHITESPACE","\n    ",120],["T_DOC_COMMENT","\/**\n     * Open the stream\n     *\n     * @param  string  $path\n     * @param  string  $mode\n     * @param  integer $options\n     * @param  string  $opened_path\n     * @return boolean\n     *\/",121],["T_WHITESPACE","\n    ",129],["T_PUBLIC","public",130],["T_WHITESPACE"," ",130],["T_FUNCTION","function",130],["T_WHITESPACE"," ",130],["T_STRING","stream_open",130],"(",["T_VARIABLE","$path",130],",",["T_WHITESPACE"," ",130],["T_VARIABLE","$mode",130],",",["T_WHITESPACE"," ",130],["T_VARIABLE","$options",130],",",["T_WHITESPACE"," ",130],["T_VARIABLE","$opened_path",130],")",["T_WHITESPACE","\n    ",130],"{",["T_WHITESPACE","\n        ",131],["T_VARIABLE","$name",132],["T_WHITESPACE"," ",132],"=",["T_WHITESPACE"," ",132],["T_VARIABLE","$this",132],["T_OBJECT_OPERATOR","->",132],["T_STRING","_getNamePart",132],"(",["T_VARIABLE","$path",132],")",";",["T_WHITESPACE","\n        ",132],["T_COMMENT","\/\/ If we open the file for writing, just return true. Create the object\n",133],["T_WHITESPACE","        ",134],["T_COMMENT","\/\/ on fflush call\n",134],["T_WHITESPACE","        ",135],["T_IF","if",135],["T_WHITESPACE"," ",135],"(",["T_STRING","strpbrk",135],"(",["T_VARIABLE","$mode",135],",",["T_WHITESPACE"," ",135],["T_CONSTANT_ENCAPSED_STRING","'wax'",135],")",")",["T_WHITESPACE"," ",135],"{",["T_WHITESPACE","\n            ",135],["T_VARIABLE","$this",136],["T_OBJECT_OPERATOR","->",136],["T_STRING","_objectName",136],["T_WHITESPACE"," ",136],"=",["T_WHITESPACE"," ",136],["T_VARIABLE","$name",136],";",["T_WHITESPACE","\n            ",136],["T_VARIABLE","$this",137],["T_OBJECT_OPERATOR","->",137],["T_STRING","_objectBuffer",137],["T_WHITESPACE"," ",137],"=",["T_WHITESPACE"," ",137],["T_STRING","null",137],";",["T_WHITESPACE","\n            ",137],["T_VARIABLE","$this",138],["T_OBJECT_OPERATOR","->",138],["T_STRING","_objectSize",138],["T_WHITESPACE"," ",138],"=",["T_WHITESPACE"," ",138],["T_LNUMBER","0",138],";",["T_WHITESPACE","\n            ",138],["T_VARIABLE","$this",139],["T_OBJECT_OPERATOR","->",139],["T_STRING","_position",139],["T_WHITESPACE"," ",139],"=",["T_WHITESPACE"," ",139],["T_LNUMBER","0",139],";",["T_WHITESPACE","\n            ",139],["T_VARIABLE","$this",140],["T_OBJECT_OPERATOR","->",140],["T_STRING","_writeBuffer",140],["T_WHITESPACE"," ",140],"=",["T_WHITESPACE"," ",140],["T_STRING","true",140],";",["T_WHITESPACE","\n            ",140],["T_VARIABLE","$this",141],["T_OBJECT_OPERATOR","->",141],["T_STRING","_getS3Client",141],"(",["T_VARIABLE","$path",141],")",";",["T_WHITESPACE","\n            ",141],["T_RETURN","return",142],["T_WHITESPACE"," ",142],["T_STRING","true",142],";",["T_WHITESPACE","\n        ",142],"}",["T_WHITESPACE"," ",143],["T_ELSE","else",143],["T_WHITESPACE"," ",143],"{",["T_WHITESPACE","\n            ",143],["T_COMMENT","\/\/ Otherwise, just see if the file exists or not\n",144],["T_WHITESPACE","            ",145],["T_VARIABLE","$info",145],["T_WHITESPACE"," ",145],"=",["T_WHITESPACE"," ",145],["T_VARIABLE","$this",145],["T_OBJECT_OPERATOR","->",145],["T_STRING","_getS3Client",145],"(",["T_VARIABLE","$path",145],")",["T_OBJECT_OPERATOR","->",145],["T_STRING","getInfo",145],"(",["T_VARIABLE","$name",145],")",";",["T_WHITESPACE","\n            ",145],["T_IF","if",146],["T_WHITESPACE"," ",146],"(",["T_VARIABLE","$info",146],")",["T_WHITESPACE"," ",146],"{",["T_WHITESPACE","\n                ",146],["T_VARIABLE","$this",147],["T_OBJECT_OPERATOR","->",147],["T_STRING","_objectName",147],["T_WHITESPACE"," ",147],"=",["T_WHITESPACE"," ",147],["T_VARIABLE","$name",147],";",["T_WHITESPACE","\n                ",147],["T_VARIABLE","$this",148],["T_OBJECT_OPERATOR","->",148],["T_STRING","_objectBuffer",148],["T_WHITESPACE"," ",148],"=",["T_WHITESPACE"," ",148],["T_STRING","null",148],";",["T_WHITESPACE","\n                ",148],["T_VARIABLE","$this",149],["T_OBJECT_OPERATOR","->",149],["T_STRING","_objectSize",149],["T_WHITESPACE"," ",149],"=",["T_WHITESPACE"," ",149],["T_VARIABLE","$info",149],"[",["T_CONSTANT_ENCAPSED_STRING","'size'",149],"]",";",["T_WHITESPACE","\n                ",149],["T_VARIABLE","$this",150],["T_OBJECT_OPERATOR","->",150],["T_STRING","_position",150],["T_WHITESPACE"," ",150],"=",["T_WHITESPACE"," ",150],["T_LNUMBER","0",150],";",["T_WHITESPACE","\n                ",150],["T_VARIABLE","$this",151],["T_OBJECT_OPERATOR","->",151],["T_STRING","_writeBuffer",151],["T_WHITESPACE"," ",151],"=",["T_WHITESPACE"," ",151],["T_STRING","false",151],";",["T_WHITESPACE","\n                ",151],["T_VARIABLE","$this",152],["T_OBJECT_OPERATOR","->",152],["T_STRING","_getS3Client",152],"(",["T_VARIABLE","$path",152],")",";",["T_WHITESPACE","\n                ",152],["T_RETURN","return",153],["T_WHITESPACE"," ",153],["T_STRING","true",153],";",["T_WHITESPACE","\n            ",153],"}",["T_WHITESPACE","\n        ",154],"}",["T_WHITESPACE","\n        ",155],["T_RETURN","return",156],["T_WHITESPACE"," ",156],["T_STRING","false",156],";",["T_WHITESPACE","\n    ",156],"}",["T_WHITESPACE","\n\n    ",157],["T_DOC_COMMENT","\/**\n     * Close the stream\n     *\n     * @return void\n     *\/",159],["T_WHITESPACE","\n    ",163],["T_PUBLIC","public",164],["T_WHITESPACE"," ",164],["T_FUNCTION","function",164],["T_WHITESPACE"," ",164],["T_STRING","stream_close",164],"(",")",["T_WHITESPACE","\n    ",164],"{",["T_WHITESPACE","\n        ",165],["T_VARIABLE","$this",166],["T_OBJECT_OPERATOR","->",166],["T_STRING","_objectName",166],["T_WHITESPACE"," ",166],"=",["T_WHITESPACE"," ",166],["T_STRING","null",166],";",["T_WHITESPACE","\n        ",166],["T_VARIABLE","$this",167],["T_OBJECT_OPERATOR","->",167],["T_STRING","_objectBuffer",167],["T_WHITESPACE"," ",167],"=",["T_WHITESPACE"," ",167],["T_STRING","null",167],";",["T_WHITESPACE","\n        ",167],["T_VARIABLE","$this",168],["T_OBJECT_OPERATOR","->",168],["T_STRING","_objectSize",168],["T_WHITESPACE"," ",168],"=",["T_WHITESPACE"," ",168],["T_LNUMBER","0",168],";",["T_WHITESPACE","\n        ",168],["T_VARIABLE","$this",169],["T_OBJECT_OPERATOR","->",169],["T_STRING","_position",169],["T_WHITESPACE"," ",169],"=",["T_WHITESPACE"," ",169],["T_LNUMBER","0",169],";",["T_WHITESPACE","\n        ",169],["T_VARIABLE","$this",170],["T_OBJECT_OPERATOR","->",170],["T_STRING","_writeBuffer",170],["T_WHITESPACE"," ",170],"=",["T_WHITESPACE"," ",170],["T_STRING","false",170],";",["T_WHITESPACE","\n        ",170],["T_UNSET","unset",171],"(",["T_VARIABLE","$this",171],["T_OBJECT_OPERATOR","->",171],["T_STRING","_s3",171],")",";",["T_WHITESPACE","\n    ",171],"}",["T_WHITESPACE","\n\n    ",172],["T_DOC_COMMENT","\/**\n     * Read from the stream\n     *\n     * http:\/\/bugs.php.net\/21641 - stream_read() is always passed PHP's\n     * internal read buffer size (8192) no matter what is passed as $count\n     * parameter to fread().\n     *\n     * @param  integer $count\n     * @return string\n     *\/",174],["T_WHITESPACE","\n    ",183],["T_PUBLIC","public",184],["T_WHITESPACE"," ",184],["T_FUNCTION","function",184],["T_WHITESPACE"," ",184],["T_STRING","stream_read",184],"(",["T_VARIABLE","$count",184],")",["T_WHITESPACE","\n    ",184],"{",["T_WHITESPACE","\n        ",185],["T_IF","if",186],["T_WHITESPACE"," ",186],"(","!",["T_VARIABLE","$this",186],["T_OBJECT_OPERATOR","->",186],["T_STRING","_objectName",186],")",["T_WHITESPACE"," ",186],"{",["T_WHITESPACE","\n            ",186],["T_RETURN","return",187],["T_WHITESPACE"," ",187],["T_STRING","false",187],";",["T_WHITESPACE","\n        ",187],"}",["T_WHITESPACE","\n\n        ",188],["T_COMMENT","\/\/ make sure that count doesn't exceed object size\n",190],["T_WHITESPACE","        ",191],["T_IF","if",191],["T_WHITESPACE"," ",191],"(",["T_VARIABLE","$count",191],["T_WHITESPACE"," ",191],"+",["T_WHITESPACE"," ",191],["T_VARIABLE","$this",191],["T_OBJECT_OPERATOR","->",191],["T_STRING","_position",191],["T_WHITESPACE"," ",191],">",["T_WHITESPACE"," ",191],["T_VARIABLE","$this",191],["T_OBJECT_OPERATOR","->",191],["T_STRING","_objectSize",191],")",["T_WHITESPACE"," ",191],"{",["T_WHITESPACE","\n            ",191],["T_VARIABLE","$count",192],["T_WHITESPACE"," ",192],"=",["T_WHITESPACE"," ",192],["T_VARIABLE","$this",192],["T_OBJECT_OPERATOR","->",192],["T_STRING","_objectSize",192],["T_WHITESPACE"," ",192],"-",["T_WHITESPACE"," ",192],["T_VARIABLE","$this",192],["T_OBJECT_OPERATOR","->",192],["T_STRING","_position",192],";",["T_WHITESPACE","\n        ",192],"}",["T_WHITESPACE","\n\n        ",193],["T_VARIABLE","$range_start",195],["T_WHITESPACE"," ",195],"=",["T_WHITESPACE"," ",195],["T_VARIABLE","$this",195],["T_OBJECT_OPERATOR","->",195],["T_STRING","_position",195],";",["T_WHITESPACE","\n        ",195],["T_VARIABLE","$range_end",196],["T_WHITESPACE","   ",196],"=",["T_WHITESPACE"," ",196],["T_VARIABLE","$this",196],["T_OBJECT_OPERATOR","->",196],["T_STRING","_position",196],["T_WHITESPACE"," ",196],"+",["T_WHITESPACE"," ",196],["T_VARIABLE","$count",196],["T_WHITESPACE"," ",196],"-",["T_WHITESPACE"," ",196],["T_LNUMBER","1",196],";",["T_WHITESPACE","\n\n        ",196],["T_COMMENT","\/\/ Only fetch more data from S3 if we haven't fetched any data yet (postion=0)\n",198],["T_WHITESPACE","        ",199],["T_COMMENT","\/\/ OR, the range end position plus 1 is greater than the size of the current\n",199],["T_WHITESPACE","        ",200],["T_COMMENT","\/\/ object buffer\n",200],["T_WHITESPACE","        ",201],["T_IF","if",201],["T_WHITESPACE"," ",201],"(",["T_VARIABLE","$this",201],["T_OBJECT_OPERATOR","->",201],["T_STRING","_objectBuffer",201],["T_WHITESPACE"," ",201],["T_IS_IDENTICAL","===",201],["T_WHITESPACE"," ",201],["T_STRING","null",201],["T_WHITESPACE","  ",201],["T_BOOLEAN_OR","||",201],["T_WHITESPACE","  ",201],["T_VARIABLE","$range_end",201],["T_WHITESPACE"," ",201],["T_IS_GREATER_OR_EQUAL",">=",201],["T_WHITESPACE"," ",201],["T_STRING","strlen",201],"(",["T_VARIABLE","$this",201],["T_OBJECT_OPERATOR","->",201],["T_STRING","_objectBuffer",201],")",")",["T_WHITESPACE"," ",201],"{",["T_WHITESPACE","\n            ",201],["T_VARIABLE","$headers",202],["T_WHITESPACE"," ",202],"=",["T_WHITESPACE"," ",202],["T_ARRAY","array",202],"(",["T_WHITESPACE","\n                ",202],["T_CONSTANT_ENCAPSED_STRING","'Range'",203],["T_WHITESPACE"," ",203],["T_DOUBLE_ARROW","=>",203],["T_WHITESPACE"," ",203],"\"",["T_ENCAPSED_AND_WHITESPACE","bytes=",203],["T_VARIABLE","$range_start",203],["T_ENCAPSED_AND_WHITESPACE","-",203],["T_VARIABLE","$range_end",203],"\"",["T_WHITESPACE","\n            ",203],")",";",["T_WHITESPACE","\n\n            ",204],["T_VARIABLE","$response",206],["T_WHITESPACE"," ",206],"=",["T_WHITESPACE"," ",206],["T_VARIABLE","$this",206],["T_OBJECT_OPERATOR","->",206],["T_STRING","_s3",206],["T_OBJECT_OPERATOR","->",206],["T_STRING","_makeRequest",206],"(",["T_CONSTANT_ENCAPSED_STRING","'GET'",206],",",["T_WHITESPACE"," ",206],["T_VARIABLE","$this",206],["T_OBJECT_OPERATOR","->",206],["T_STRING","_objectName",206],",",["T_WHITESPACE"," ",206],["T_STRING","null",206],",",["T_WHITESPACE"," ",206],["T_VARIABLE","$headers",206],")",";",["T_WHITESPACE","\n\n            ",206],["T_IF","if",208],["T_WHITESPACE"," ",208],"(",["T_VARIABLE","$response",208],["T_OBJECT_OPERATOR","->",208],["T_STRING","getStatus",208],"(",")",["T_WHITESPACE"," ",208],["T_IS_EQUAL","==",208],["T_WHITESPACE"," ",208],["T_LNUMBER","206",208],")",["T_WHITESPACE"," ",208],"{",["T_WHITESPACE"," ",208],["T_COMMENT","\/\/ 206 Partial Content\n",208],["T_WHITESPACE","                ",209],["T_VARIABLE","$this",209],["T_OBJECT_OPERATOR","->",209],["T_STRING","_objectBuffer",209],["T_WHITESPACE"," ",209],["T_CONCAT_EQUAL",".=",209],["T_WHITESPACE"," ",209],["T_VARIABLE","$response",209],["T_OBJECT_OPERATOR","->",209],["T_STRING","getBody",209],"(",")",";",["T_WHITESPACE","\n            ",209],"}",["T_WHITESPACE","\n        ",210],"}",["T_WHITESPACE","\n\n        ",211],["T_VARIABLE","$data",213],["T_WHITESPACE"," ",213],"=",["T_WHITESPACE"," ",213],["T_STRING","substr",213],"(",["T_VARIABLE","$this",213],["T_OBJECT_OPERATOR","->",213],["T_STRING","_objectBuffer",213],",",["T_WHITESPACE"," ",213],["T_VARIABLE","$this",213],["T_OBJECT_OPERATOR","->",213],["T_STRING","_position",213],",",["T_WHITESPACE"," ",213],["T_VARIABLE","$count",213],")",";",["T_WHITESPACE","\n        ",213],["T_VARIABLE","$this",214],["T_OBJECT_OPERATOR","->",214],["T_STRING","_position",214],["T_WHITESPACE"," ",214],["T_PLUS_EQUAL","+=",214],["T_WHITESPACE"," ",214],["T_STRING","strlen",214],"(",["T_VARIABLE","$data",214],")",";",["T_WHITESPACE","\n        ",214],["T_RETURN","return",215],["T_WHITESPACE"," ",215],["T_VARIABLE","$data",215],";",["T_WHITESPACE","\n    ",215],"}",["T_WHITESPACE","\n\n    ",216],["T_DOC_COMMENT","\/**\n     * Write to the stream\n     *\n     * @param  string $data\n     * @return integer\n     *\/",218],["T_WHITESPACE","\n    ",223],["T_PUBLIC","public",224],["T_WHITESPACE"," ",224],["T_FUNCTION","function",224],["T_WHITESPACE"," ",224],["T_STRING","stream_write",224],"(",["T_VARIABLE","$data",224],")",["T_WHITESPACE","\n    ",224],"{",["T_WHITESPACE","\n        ",225],["T_IF","if",226],["T_WHITESPACE"," ",226],"(","!",["T_VARIABLE","$this",226],["T_OBJECT_OPERATOR","->",226],["T_STRING","_objectName",226],")",["T_WHITESPACE"," ",226],"{",["T_WHITESPACE","\n            ",226],["T_RETURN","return",227],["T_WHITESPACE"," ",227],["T_LNUMBER","0",227],";",["T_WHITESPACE","\n        ",227],"}",["T_WHITESPACE","\n        ",228],["T_VARIABLE","$len",229],["T_WHITESPACE"," ",229],"=",["T_WHITESPACE"," ",229],["T_STRING","strlen",229],"(",["T_VARIABLE","$data",229],")",";",["T_WHITESPACE","\n        ",229],["T_VARIABLE","$this",230],["T_OBJECT_OPERATOR","->",230],["T_STRING","_objectBuffer",230],["T_WHITESPACE"," ",230],["T_CONCAT_EQUAL",".=",230],["T_WHITESPACE"," ",230],["T_VARIABLE","$data",230],";",["T_WHITESPACE","\n        ",230],["T_VARIABLE","$this",231],["T_OBJECT_OPERATOR","->",231],["T_STRING","_objectSize",231],["T_WHITESPACE"," ",231],["T_PLUS_EQUAL","+=",231],["T_WHITESPACE"," ",231],["T_VARIABLE","$len",231],";",["T_WHITESPACE","\n        ",231],["T_COMMENT","\/\/ TODO: handle current position for writing!\n",232],["T_WHITESPACE","        ",233],["T_RETURN","return",233],["T_WHITESPACE"," ",233],["T_VARIABLE","$len",233],";",["T_WHITESPACE","\n    ",233],"}",["T_WHITESPACE","\n\n    ",234],["T_DOC_COMMENT","\/**\n     * End of the stream?\n     *\n     * @return boolean\n     *\/",236],["T_WHITESPACE","\n    ",240],["T_PUBLIC","public",241],["T_WHITESPACE"," ",241],["T_FUNCTION","function",241],["T_WHITESPACE"," ",241],["T_STRING","stream_eof",241],"(",")",["T_WHITESPACE","\n    ",241],"{",["T_WHITESPACE","\n        ",242],["T_IF","if",243],["T_WHITESPACE"," ",243],"(","!",["T_VARIABLE","$this",243],["T_OBJECT_OPERATOR","->",243],["T_STRING","_objectName",243],")",["T_WHITESPACE"," ",243],"{",["T_WHITESPACE","\n            ",243],["T_RETURN","return",244],["T_WHITESPACE"," ",244],["T_STRING","true",244],";",["T_WHITESPACE","\n        ",244],"}",["T_WHITESPACE","\n\n        ",245],["T_RETURN","return",247],["T_WHITESPACE"," ",247],"(",["T_VARIABLE","$this",247],["T_OBJECT_OPERATOR","->",247],["T_STRING","_position",247],["T_WHITESPACE"," ",247],["T_IS_GREATER_OR_EQUAL",">=",247],["T_WHITESPACE"," ",247],["T_VARIABLE","$this",247],["T_OBJECT_OPERATOR","->",247],["T_STRING","_objectSize",247],")",";",["T_WHITESPACE","\n    ",247],"}",["T_WHITESPACE","\n\n    ",248],["T_DOC_COMMENT","\/**\n     * What is the current read\/write position of the stream\n     *\n     * @return integer\n     *\/",250],["T_WHITESPACE","\n    ",254],["T_PUBLIC","public",255],["T_WHITESPACE"," ",255],["T_FUNCTION","function",255],["T_WHITESPACE"," ",255],["T_STRING","stream_tell",255],"(",")",["T_WHITESPACE","\n    ",255],"{",["T_WHITESPACE","\n        ",256],["T_RETURN","return",257],["T_WHITESPACE"," ",257],["T_VARIABLE","$this",257],["T_OBJECT_OPERATOR","->",257],["T_STRING","_position",257],";",["T_WHITESPACE","\n    ",257],"}",["T_WHITESPACE","\n\n    ",258],["T_DOC_COMMENT","\/**\n     * Update the read\/write position of the stream\n     *\n     * @param  integer $offset\n     * @param  integer $whence\n     * @return boolean\n     *\/",260],["T_WHITESPACE","\n    ",266],["T_PUBLIC","public",267],["T_WHITESPACE"," ",267],["T_FUNCTION","function",267],["T_WHITESPACE"," ",267],["T_STRING","stream_seek",267],"(",["T_VARIABLE","$offset",267],",",["T_WHITESPACE"," ",267],["T_VARIABLE","$whence",267],")",["T_WHITESPACE","\n    ",267],"{",["T_WHITESPACE","\n        ",268],["T_IF","if",269],["T_WHITESPACE"," ",269],"(","!",["T_VARIABLE","$this",269],["T_OBJECT_OPERATOR","->",269],["T_STRING","_objectName",269],")",["T_WHITESPACE"," ",269],"{",["T_WHITESPACE","\n            ",269],["T_RETURN","return",270],["T_WHITESPACE"," ",270],["T_STRING","false",270],";",["T_WHITESPACE","\n        ",270],"}",["T_WHITESPACE","\n\n        ",271],["T_SWITCH","switch",273],["T_WHITESPACE"," ",273],"(",["T_VARIABLE","$whence",273],")",["T_WHITESPACE"," ",273],"{",["T_WHITESPACE","\n            ",273],["T_CASE","case",274],["T_WHITESPACE"," ",274],["T_STRING","SEEK_CUR",274],":",["T_WHITESPACE","\n                ",274],["T_COMMENT","\/\/ Set position to current location plus $offset\n",275],["T_WHITESPACE","                ",276],["T_VARIABLE","$new_pos",276],["T_WHITESPACE"," ",276],"=",["T_WHITESPACE"," ",276],["T_VARIABLE","$this",276],["T_OBJECT_OPERATOR","->",276],["T_STRING","_position",276],["T_WHITESPACE"," ",276],"+",["T_WHITESPACE"," ",276],["T_VARIABLE","$offset",276],";",["T_WHITESPACE","\n                ",276],["T_BREAK","break",277],";",["T_WHITESPACE","\n            ",277],["T_CASE","case",278],["T_WHITESPACE"," ",278],["T_STRING","SEEK_END",278],":",["T_WHITESPACE","\n                ",278],["T_COMMENT","\/\/ Set position to end-of-file plus $offset\n",279],["T_WHITESPACE","                ",280],["T_VARIABLE","$new_pos",280],["T_WHITESPACE"," ",280],"=",["T_WHITESPACE"," ",280],["T_VARIABLE","$this",280],["T_OBJECT_OPERATOR","->",280],["T_STRING","_objectSize",280],["T_WHITESPACE"," ",280],"+",["T_WHITESPACE"," ",280],["T_VARIABLE","$offset",280],";",["T_WHITESPACE","\n                ",280],["T_BREAK","break",281],";",["T_WHITESPACE","\n            ",281],["T_CASE","case",282],["T_WHITESPACE"," ",282],["T_STRING","SEEK_SET",282],":",["T_WHITESPACE","\n            ",282],["T_DEFAULT","default",283],":",["T_WHITESPACE","\n                ",283],["T_COMMENT","\/\/ Set position equal to $offset\n",284],["T_WHITESPACE","                ",285],["T_VARIABLE","$new_pos",285],["T_WHITESPACE"," ",285],"=",["T_WHITESPACE"," ",285],["T_VARIABLE","$offset",285],";",["T_WHITESPACE","\n                ",285],["T_BREAK","break",286],";",["T_WHITESPACE","\n        ",286],"}",["T_WHITESPACE","\n        ",287],["T_VARIABLE","$ret",288],["T_WHITESPACE"," ",288],"=",["T_WHITESPACE"," ",288],"(",["T_VARIABLE","$new_pos",288],["T_WHITESPACE"," ",288],["T_IS_GREATER_OR_EQUAL",">=",288],["T_WHITESPACE"," ",288],["T_LNUMBER","0",288],["T_WHITESPACE"," ",288],["T_BOOLEAN_AND","&&",288],["T_WHITESPACE"," ",288],["T_VARIABLE","$new_pos",288],["T_WHITESPACE"," ",288],["T_IS_SMALLER_OR_EQUAL","<=",288],["T_WHITESPACE"," ",288],["T_VARIABLE","$this",288],["T_OBJECT_OPERATOR","->",288],["T_STRING","_objectSize",288],")",";",["T_WHITESPACE","\n        ",288],["T_IF","if",289],["T_WHITESPACE"," ",289],"(",["T_VARIABLE","$ret",289],")",["T_WHITESPACE"," ",289],"{",["T_WHITESPACE","\n            ",289],["T_VARIABLE","$this",290],["T_OBJECT_OPERATOR","->",290],["T_STRING","_position",290],["T_WHITESPACE"," ",290],"=",["T_WHITESPACE"," ",290],["T_VARIABLE","$new_pos",290],";",["T_WHITESPACE","\n        ",290],"}",["T_WHITESPACE","\n        ",291],["T_RETURN","return",292],["T_WHITESPACE"," ",292],["T_VARIABLE","$ret",292],";",["T_WHITESPACE","\n    ",292],"}",["T_WHITESPACE","\n\n    ",293],["T_DOC_COMMENT","\/**\n     * Flush current cached stream data to storage\n     *\n     * @return boolean\n     *\/",295],["T_WHITESPACE","\n    ",299],["T_PUBLIC","public",300],["T_WHITESPACE"," ",300],["T_FUNCTION","function",300],["T_WHITESPACE"," ",300],["T_STRING","stream_flush",300],"(",")",["T_WHITESPACE","\n    ",300],"{",["T_WHITESPACE","\n        ",301],["T_COMMENT","\/\/ If the stream wasn't opened for writing, just return false\n",302],["T_WHITESPACE","        ",303],["T_IF","if",303],["T_WHITESPACE"," ",303],"(","!",["T_VARIABLE","$this",303],["T_OBJECT_OPERATOR","->",303],["T_STRING","_writeBuffer",303],")",["T_WHITESPACE"," ",303],"{",["T_WHITESPACE","\n            ",303],["T_RETURN","return",304],["T_WHITESPACE"," ",304],["T_STRING","false",304],";",["T_WHITESPACE","\n        ",304],"}",["T_WHITESPACE","\n\n        ",305],["T_VARIABLE","$ret",307],["T_WHITESPACE"," ",307],"=",["T_WHITESPACE"," ",307],["T_VARIABLE","$this",307],["T_OBJECT_OPERATOR","->",307],["T_STRING","_s3",307],["T_OBJECT_OPERATOR","->",307],["T_STRING","putObject",307],"(",["T_VARIABLE","$this",307],["T_OBJECT_OPERATOR","->",307],["T_STRING","_objectName",307],",",["T_WHITESPACE"," ",307],["T_VARIABLE","$this",307],["T_OBJECT_OPERATOR","->",307],["T_STRING","_objectBuffer",307],")",";",["T_WHITESPACE","\n\n        ",307],["T_VARIABLE","$this",309],["T_OBJECT_OPERATOR","->",309],["T_STRING","_objectBuffer",309],["T_WHITESPACE"," ",309],"=",["T_WHITESPACE"," ",309],["T_STRING","null",309],";",["T_WHITESPACE","\n\n        ",309],["T_RETURN","return",311],["T_WHITESPACE"," ",311],["T_VARIABLE","$ret",311],";",["T_WHITESPACE","\n    ",311],"}",["T_WHITESPACE","\n\n    ",312],["T_DOC_COMMENT","\/**\n     * Returns data array of stream variables\n     *\n     * @return array\n     *\/",314],["T_WHITESPACE","\n    ",318],["T_PUBLIC","public",319],["T_WHITESPACE"," ",319],["T_FUNCTION","function",319],["T_WHITESPACE"," ",319],["T_STRING","stream_stat",319],"(",")",["T_WHITESPACE","\n    ",319],"{",["T_WHITESPACE","\n        ",320],["T_IF","if",321],["T_WHITESPACE"," ",321],"(","!",["T_VARIABLE","$this",321],["T_OBJECT_OPERATOR","->",321],["T_STRING","_objectName",321],")",["T_WHITESPACE"," ",321],"{",["T_WHITESPACE","\n            ",321],["T_RETURN","return",322],["T_WHITESPACE"," ",322],["T_STRING","false",322],";",["T_WHITESPACE","\n        ",322],"}",["T_WHITESPACE","\n\n        ",323],["T_VARIABLE","$stat",325],["T_WHITESPACE"," ",325],"=",["T_WHITESPACE"," ",325],["T_ARRAY","array",325],"(",")",";",["T_WHITESPACE","\n        ",325],["T_VARIABLE","$stat",326],"[",["T_CONSTANT_ENCAPSED_STRING","'dev'",326],"]",["T_WHITESPACE"," ",326],"=",["T_WHITESPACE"," ",326],["T_LNUMBER","0",326],";",["T_WHITESPACE","\n        ",326],["T_VARIABLE","$stat",327],"[",["T_CONSTANT_ENCAPSED_STRING","'ino'",327],"]",["T_WHITESPACE"," ",327],"=",["T_WHITESPACE"," ",327],["T_LNUMBER","0",327],";",["T_WHITESPACE","\n        ",327],["T_VARIABLE","$stat",328],"[",["T_CONSTANT_ENCAPSED_STRING","'mode'",328],"]",["T_WHITESPACE"," ",328],"=",["T_WHITESPACE"," ",328],["T_LNUMBER","0777",328],";",["T_WHITESPACE","\n        ",328],["T_VARIABLE","$stat",329],"[",["T_CONSTANT_ENCAPSED_STRING","'nlink'",329],"]",["T_WHITESPACE"," ",329],"=",["T_WHITESPACE"," ",329],["T_LNUMBER","0",329],";",["T_WHITESPACE","\n        ",329],["T_VARIABLE","$stat",330],"[",["T_CONSTANT_ENCAPSED_STRING","'uid'",330],"]",["T_WHITESPACE"," ",330],"=",["T_WHITESPACE"," ",330],["T_LNUMBER","0",330],";",["T_WHITESPACE","\n        ",330],["T_VARIABLE","$stat",331],"[",["T_CONSTANT_ENCAPSED_STRING","'gid'",331],"]",["T_WHITESPACE"," ",331],"=",["T_WHITESPACE"," ",331],["T_LNUMBER","0",331],";",["T_WHITESPACE","\n        ",331],["T_VARIABLE","$stat",332],"[",["T_CONSTANT_ENCAPSED_STRING","'rdev'",332],"]",["T_WHITESPACE"," ",332],"=",["T_WHITESPACE"," ",332],["T_LNUMBER","0",332],";",["T_WHITESPACE","\n        ",332],["T_VARIABLE","$stat",333],"[",["T_CONSTANT_ENCAPSED_STRING","'size'",333],"]",["T_WHITESPACE"," ",333],"=",["T_WHITESPACE"," ",333],["T_LNUMBER","0",333],";",["T_WHITESPACE","\n        ",333],["T_VARIABLE","$stat",334],"[",["T_CONSTANT_ENCAPSED_STRING","'atime'",334],"]",["T_WHITESPACE"," ",334],"=",["T_WHITESPACE"," ",334],["T_LNUMBER","0",334],";",["T_WHITESPACE","\n        ",334],["T_VARIABLE","$stat",335],"[",["T_CONSTANT_ENCAPSED_STRING","'mtime'",335],"]",["T_WHITESPACE"," ",335],"=",["T_WHITESPACE"," ",335],["T_LNUMBER","0",335],";",["T_WHITESPACE","\n        ",335],["T_VARIABLE","$stat",336],"[",["T_CONSTANT_ENCAPSED_STRING","'ctime'",336],"]",["T_WHITESPACE"," ",336],"=",["T_WHITESPACE"," ",336],["T_LNUMBER","0",336],";",["T_WHITESPACE","\n        ",336],["T_VARIABLE","$stat",337],"[",["T_CONSTANT_ENCAPSED_STRING","'blksize'",337],"]",["T_WHITESPACE"," ",337],"=",["T_WHITESPACE"," ",337],["T_LNUMBER","0",337],";",["T_WHITESPACE","\n        ",337],["T_VARIABLE","$stat",338],"[",["T_CONSTANT_ENCAPSED_STRING","'blocks'",338],"]",["T_WHITESPACE"," ",338],"=",["T_WHITESPACE"," ",338],["T_LNUMBER","0",338],";",["T_WHITESPACE","\n\n    ",338],["T_IF","if",340],"(","(",["T_VARIABLE","$slash",340],["T_WHITESPACE"," ",340],"=",["T_WHITESPACE"," ",340],["T_STRING","strchr",340],"(",["T_VARIABLE","$this",340],["T_OBJECT_OPERATOR","->",340],["T_STRING","_objectName",340],",",["T_WHITESPACE"," ",340],["T_CONSTANT_ENCAPSED_STRING","'\/'",340],")",")",["T_WHITESPACE"," ",340],["T_IS_IDENTICAL","===",340],["T_WHITESPACE"," ",340],["T_STRING","false",340],["T_WHITESPACE"," ",340],["T_BOOLEAN_OR","||",340],["T_WHITESPACE"," ",340],["T_VARIABLE","$slash",340],["T_WHITESPACE"," ",340],["T_IS_EQUAL","==",340],["T_WHITESPACE"," ",340],["T_STRING","strlen",340],"(",["T_VARIABLE","$this",340],["T_OBJECT_OPERATOR","->",340],["T_STRING","_objectName",340],")","-",["T_LNUMBER","1",340],")",["T_WHITESPACE"," ",340],"{",["T_WHITESPACE","\n        ",340],["T_COMMENT","\/* bucket *\/",341],["T_WHITESPACE","\n        ",341],["T_VARIABLE","$stat",342],"[",["T_CONSTANT_ENCAPSED_STRING","'mode'",342],"]",["T_WHITESPACE"," ",342],["T_OR_EQUAL","|=",342],["T_WHITESPACE"," ",342],["T_LNUMBER","040000",342],";",["T_WHITESPACE","\n    ",342],"}",["T_WHITESPACE"," ",343],["T_ELSE","else",343],["T_WHITESPACE"," ",343],"{",["T_WHITESPACE","\n        ",343],["T_VARIABLE","$stat",344],"[",["T_CONSTANT_ENCAPSED_STRING","'mode'",344],"]",["T_WHITESPACE"," ",344],["T_OR_EQUAL","|=",344],["T_WHITESPACE"," ",344],["T_LNUMBER","0100000",344],";",["T_WHITESPACE","\n    ",344],"}",["T_WHITESPACE","\n           ",345],["T_VARIABLE","$info",346],["T_WHITESPACE"," ",346],"=",["T_WHITESPACE"," ",346],["T_VARIABLE","$this",346],["T_OBJECT_OPERATOR","->",346],["T_STRING","_s3",346],["T_OBJECT_OPERATOR","->",346],["T_STRING","getInfo",346],"(",["T_VARIABLE","$this",346],["T_OBJECT_OPERATOR","->",346],["T_STRING","_objectName",346],")",";",["T_WHITESPACE","\n        ",346],["T_IF","if",347],["T_WHITESPACE"," ",347],"(","!",["T_EMPTY","empty",347],"(",["T_VARIABLE","$info",347],")",")",["T_WHITESPACE"," ",347],"{",["T_WHITESPACE","\n            ",347],["T_VARIABLE","$stat",348],"[",["T_CONSTANT_ENCAPSED_STRING","'size'",348],"]",["T_WHITESPACE","  ",348],"=",["T_WHITESPACE"," ",348],["T_VARIABLE","$info",348],"[",["T_CONSTANT_ENCAPSED_STRING","'size'",348],"]",";",["T_WHITESPACE","\n            ",348],["T_VARIABLE","$stat",349],"[",["T_CONSTANT_ENCAPSED_STRING","'atime'",349],"]",["T_WHITESPACE"," ",349],"=",["T_WHITESPACE"," ",349],["T_STRING","time",349],"(",")",";",["T_WHITESPACE","\n            ",349],["T_VARIABLE","$stat",350],"[",["T_CONSTANT_ENCAPSED_STRING","'mtime'",350],"]",["T_WHITESPACE"," ",350],"=",["T_WHITESPACE"," ",350],["T_VARIABLE","$info",350],"[",["T_CONSTANT_ENCAPSED_STRING","'mtime'",350],"]",";",["T_WHITESPACE","\n        ",350],"}",["T_WHITESPACE","\n\n        ",351],["T_RETURN","return",353],["T_WHITESPACE"," ",353],["T_VARIABLE","$stat",353],";",["T_WHITESPACE","\n    ",353],"}",["T_WHITESPACE","\n\n    ",354],["T_DOC_COMMENT","\/**\n     * Attempt to delete the item\n     *\n     * @param  string $path\n     * @return boolean\n     *\/",356],["T_WHITESPACE","\n    ",361],["T_PUBLIC","public",362],["T_WHITESPACE"," ",362],["T_FUNCTION","function",362],["T_WHITESPACE"," ",362],["T_STRING","unlink",362],"(",["T_VARIABLE","$path",362],")",["T_WHITESPACE","\n    ",362],"{",["T_WHITESPACE","\n        ",363],["T_RETURN","return",364],["T_WHITESPACE"," ",364],["T_VARIABLE","$this",364],["T_OBJECT_OPERATOR","->",364],["T_STRING","_getS3Client",364],"(",["T_VARIABLE","$path",364],")",["T_OBJECT_OPERATOR","->",364],["T_STRING","removeObject",364],"(",["T_VARIABLE","$this",364],["T_OBJECT_OPERATOR","->",364],["T_STRING","_getNamePart",364],"(",["T_VARIABLE","$path",364],")",")",";",["T_WHITESPACE","\n    ",364],"}",["T_WHITESPACE","\n\n    ",365],["T_DOC_COMMENT","\/**\n     * Attempt to rename the item\n     *\n     * @param  string  $path_from\n     * @param  string  $path_to\n     * @return boolean False\n     *\/",367],["T_WHITESPACE","\n    ",373],["T_PUBLIC","public",374],["T_WHITESPACE"," ",374],["T_FUNCTION","function",374],["T_WHITESPACE"," ",374],["T_STRING","rename",374],"(",["T_VARIABLE","$path_from",374],",",["T_WHITESPACE"," ",374],["T_VARIABLE","$path_to",374],")",["T_WHITESPACE","\n    ",374],"{",["T_WHITESPACE","\n        ",375],["T_COMMENT","\/\/ TODO: Renaming isn't supported, always return false\n",376],["T_WHITESPACE","        ",377],["T_RETURN","return",377],["T_WHITESPACE"," ",377],["T_STRING","false",377],";",["T_WHITESPACE","\n    ",377],"}",["T_WHITESPACE","\n\n    ",378],["T_DOC_COMMENT","\/**\n     * Create a new directory\n     *\n     * @param  string  $path\n     * @param  integer $mode\n     * @param  integer $options\n     * @return boolean\n     *\/",380],["T_WHITESPACE","\n    ",387],["T_PUBLIC","public",388],["T_WHITESPACE"," ",388],["T_FUNCTION","function",388],["T_WHITESPACE"," ",388],["T_STRING","mkdir",388],"(",["T_VARIABLE","$path",388],",",["T_WHITESPACE"," ",388],["T_VARIABLE","$mode",388],",",["T_WHITESPACE"," ",388],["T_VARIABLE","$options",388],")",["T_WHITESPACE","\n    ",388],"{",["T_WHITESPACE","\n        ",389],["T_RETURN","return",390],["T_WHITESPACE"," ",390],["T_VARIABLE","$this",390],["T_OBJECT_OPERATOR","->",390],["T_STRING","_getS3Client",390],"(",["T_VARIABLE","$path",390],")",["T_OBJECT_OPERATOR","->",390],["T_STRING","createBucket",390],"(",["T_STRING","parse_url",390],"(",["T_VARIABLE","$path",390],",",["T_WHITESPACE"," ",390],["T_STRING","PHP_URL_HOST",390],")",")",";",["T_WHITESPACE","\n    ",390],"}",["T_WHITESPACE","\n\n    ",391],["T_DOC_COMMENT","\/**\n     * Remove a directory\n     *\n     * @param  string  $path\n     * @param  integer $options\n     * @return boolean\n     *\/",393],["T_WHITESPACE","\n    ",399],["T_PUBLIC","public",400],["T_WHITESPACE"," ",400],["T_FUNCTION","function",400],["T_WHITESPACE"," ",400],["T_STRING","rmdir",400],"(",["T_VARIABLE","$path",400],",",["T_WHITESPACE"," ",400],["T_VARIABLE","$options",400],")",["T_WHITESPACE","\n    ",400],"{",["T_WHITESPACE","\n        ",401],["T_RETURN","return",402],["T_WHITESPACE"," ",402],["T_VARIABLE","$this",402],["T_OBJECT_OPERATOR","->",402],["T_STRING","_getS3Client",402],"(",["T_VARIABLE","$path",402],")",["T_OBJECT_OPERATOR","->",402],["T_STRING","removeBucket",402],"(",["T_STRING","parse_url",402],"(",["T_VARIABLE","$path",402],",",["T_WHITESPACE"," ",402],["T_STRING","PHP_URL_HOST",402],")",")",";",["T_WHITESPACE","\n    ",402],"}",["T_WHITESPACE","\n\n    ",403],["T_DOC_COMMENT","\/**\n     * Attempt to open a directory\n     *\n     * @param  string $path\n     * @param  integer $options\n     * @return boolean\n     *\/",405],["T_WHITESPACE","\n    ",411],["T_PUBLIC","public",412],["T_WHITESPACE"," ",412],["T_FUNCTION","function",412],["T_WHITESPACE"," ",412],["T_STRING","dir_opendir",412],"(",["T_VARIABLE","$path",412],",",["T_WHITESPACE"," ",412],["T_VARIABLE","$options",412],")",["T_WHITESPACE","\n    ",412],"{",["T_WHITESPACE","\n\n        ",413],["T_IF","if",415],["T_WHITESPACE"," ",415],"(",["T_STRING","preg_match",415],"(",["T_CONSTANT_ENCAPSED_STRING","'@^([a-z0-9+.]|-)+:\/\/$@'",415],",",["T_WHITESPACE"," ",415],["T_VARIABLE","$path",415],")",")",["T_WHITESPACE"," ",415],"{",["T_WHITESPACE","\n            ",415],["T_VARIABLE","$this",416],["T_OBJECT_OPERATOR","->",416],["T_STRING","_bucketList",416],["T_WHITESPACE"," ",416],"=",["T_WHITESPACE"," ",416],["T_VARIABLE","$this",416],["T_OBJECT_OPERATOR","->",416],["T_STRING","_getS3Client",416],"(",["T_VARIABLE","$path",416],")",["T_OBJECT_OPERATOR","->",416],["T_STRING","getBuckets",416],"(",")",";",["T_WHITESPACE","\n        ",416],"}",["T_WHITESPACE","\n        ",417],["T_ELSE","else",418],["T_WHITESPACE"," ",418],"{",["T_WHITESPACE","\n            ",418],["T_VARIABLE","$host",419],["T_WHITESPACE"," ",419],"=",["T_WHITESPACE"," ",419],["T_STRING","parse_url",419],"(",["T_VARIABLE","$path",419],",",["T_WHITESPACE"," ",419],["T_STRING","PHP_URL_HOST",419],")",";",["T_WHITESPACE","\n            ",419],["T_VARIABLE","$this",420],["T_OBJECT_OPERATOR","->",420],["T_STRING","_bucketList",420],["T_WHITESPACE"," ",420],"=",["T_WHITESPACE"," ",420],["T_VARIABLE","$this",420],["T_OBJECT_OPERATOR","->",420],["T_STRING","_getS3Client",420],"(",["T_VARIABLE","$path",420],")",["T_OBJECT_OPERATOR","->",420],["T_STRING","getObjectsByBucket",420],"(",["T_VARIABLE","$host",420],")",";",["T_WHITESPACE","\n        ",420],"}",["T_WHITESPACE","\n\n        ",421],["T_RETURN","return",423],["T_WHITESPACE"," ",423],"(",["T_VARIABLE","$this",423],["T_OBJECT_OPERATOR","->",423],["T_STRING","_bucketList",423],["T_WHITESPACE"," ",423],["T_IS_NOT_IDENTICAL","!==",423],["T_WHITESPACE"," ",423],["T_STRING","false",423],")",";",["T_WHITESPACE","\n    ",423],"}",["T_WHITESPACE","\n\n    ",424],["T_DOC_COMMENT","\/**\n     * Return array of URL variables\n     *\n     * @param  string $path\n     * @param  integer $flags\n     * @return array\n     *\/",426],["T_WHITESPACE","\n    ",432],["T_PUBLIC","public",433],["T_WHITESPACE"," ",433],["T_FUNCTION","function",433],["T_WHITESPACE"," ",433],["T_STRING","url_stat",433],"(",["T_VARIABLE","$path",433],",",["T_WHITESPACE"," ",433],["T_VARIABLE","$flags",433],")",["T_WHITESPACE","\n    ",433],"{",["T_WHITESPACE","\n        ",434],["T_VARIABLE","$stat",435],["T_WHITESPACE"," ",435],"=",["T_WHITESPACE"," ",435],["T_ARRAY","array",435],"(",")",";",["T_WHITESPACE","\n        ",435],["T_VARIABLE","$stat",436],"[",["T_CONSTANT_ENCAPSED_STRING","'dev'",436],"]",["T_WHITESPACE"," ",436],"=",["T_WHITESPACE"," ",436],["T_LNUMBER","0",436],";",["T_WHITESPACE","\n        ",436],["T_VARIABLE","$stat",437],"[",["T_CONSTANT_ENCAPSED_STRING","'ino'",437],"]",["T_WHITESPACE"," ",437],"=",["T_WHITESPACE"," ",437],["T_LNUMBER","0",437],";",["T_WHITESPACE","\n        ",437],["T_VARIABLE","$stat",438],"[",["T_CONSTANT_ENCAPSED_STRING","'mode'",438],"]",["T_WHITESPACE"," ",438],"=",["T_WHITESPACE"," ",438],["T_LNUMBER","0777",438],";",["T_WHITESPACE","\n        ",438],["T_VARIABLE","$stat",439],"[",["T_CONSTANT_ENCAPSED_STRING","'nlink'",439],"]",["T_WHITESPACE"," ",439],"=",["T_WHITESPACE"," ",439],["T_LNUMBER","0",439],";",["T_WHITESPACE","\n        ",439],["T_VARIABLE","$stat",440],"[",["T_CONSTANT_ENCAPSED_STRING","'uid'",440],"]",["T_WHITESPACE"," ",440],"=",["T_WHITESPACE"," ",440],["T_LNUMBER","0",440],";",["T_WHITESPACE","\n        ",440],["T_VARIABLE","$stat",441],"[",["T_CONSTANT_ENCAPSED_STRING","'gid'",441],"]",["T_WHITESPACE"," ",441],"=",["T_WHITESPACE"," ",441],["T_LNUMBER","0",441],";",["T_WHITESPACE","\n        ",441],["T_VARIABLE","$stat",442],"[",["T_CONSTANT_ENCAPSED_STRING","'rdev'",442],"]",["T_WHITESPACE"," ",442],"=",["T_WHITESPACE"," ",442],["T_LNUMBER","0",442],";",["T_WHITESPACE","\n        ",442],["T_VARIABLE","$stat",443],"[",["T_CONSTANT_ENCAPSED_STRING","'size'",443],"]",["T_WHITESPACE"," ",443],"=",["T_WHITESPACE"," ",443],["T_LNUMBER","0",443],";",["T_WHITESPACE","\n        ",443],["T_VARIABLE","$stat",444],"[",["T_CONSTANT_ENCAPSED_STRING","'atime'",444],"]",["T_WHITESPACE"," ",444],"=",["T_WHITESPACE"," ",444],["T_LNUMBER","0",444],";",["T_WHITESPACE","\n        ",444],["T_VARIABLE","$stat",445],"[",["T_CONSTANT_ENCAPSED_STRING","'mtime'",445],"]",["T_WHITESPACE"," ",445],"=",["T_WHITESPACE"," ",445],["T_LNUMBER","0",445],";",["T_WHITESPACE","\n        ",445],["T_VARIABLE","$stat",446],"[",["T_CONSTANT_ENCAPSED_STRING","'ctime'",446],"]",["T_WHITESPACE"," ",446],"=",["T_WHITESPACE"," ",446],["T_LNUMBER","0",446],";",["T_WHITESPACE","\n        ",446],["T_VARIABLE","$stat",447],"[",["T_CONSTANT_ENCAPSED_STRING","'blksize'",447],"]",["T_WHITESPACE"," ",447],"=",["T_WHITESPACE"," ",447],["T_LNUMBER","0",447],";",["T_WHITESPACE","\n        ",447],["T_VARIABLE","$stat",448],"[",["T_CONSTANT_ENCAPSED_STRING","'blocks'",448],"]",["T_WHITESPACE"," ",448],"=",["T_WHITESPACE"," ",448],["T_LNUMBER","0",448],";",["T_WHITESPACE","\n\n    ",448],["T_VARIABLE","$name",450],["T_WHITESPACE"," ",450],"=",["T_WHITESPACE"," ",450],["T_VARIABLE","$this",450],["T_OBJECT_OPERATOR","->",450],["T_STRING","_getNamePart",450],"(",["T_VARIABLE","$path",450],")",";",["T_WHITESPACE","\n    ",450],["T_IF","if",451],"(","(",["T_VARIABLE","$slash",451],["T_WHITESPACE"," ",451],"=",["T_WHITESPACE"," ",451],["T_STRING","strchr",451],"(",["T_VARIABLE","$name",451],",",["T_WHITESPACE"," ",451],["T_CONSTANT_ENCAPSED_STRING","'\/'",451],")",")",["T_WHITESPACE"," ",451],["T_IS_IDENTICAL","===",451],["T_WHITESPACE"," ",451],["T_STRING","false",451],["T_WHITESPACE"," ",451],["T_BOOLEAN_OR","||",451],["T_WHITESPACE"," ",451],["T_VARIABLE","$slash",451],["T_WHITESPACE"," ",451],["T_IS_EQUAL","==",451],["T_WHITESPACE"," ",451],["T_STRING","strlen",451],"(",["T_VARIABLE","$name",451],")","-",["T_LNUMBER","1",451],")",["T_WHITESPACE"," ",451],"{",["T_WHITESPACE","\n        ",451],["T_COMMENT","\/* bucket *\/",452],["T_WHITESPACE","\n        ",452],["T_VARIABLE","$stat",453],"[",["T_CONSTANT_ENCAPSED_STRING","'mode'",453],"]",["T_WHITESPACE"," ",453],["T_OR_EQUAL","|=",453],["T_WHITESPACE"," ",453],["T_LNUMBER","040000",453],";",["T_WHITESPACE","\n    ",453],"}",["T_WHITESPACE"," ",454],["T_ELSE","else",454],["T_WHITESPACE"," ",454],"{",["T_WHITESPACE","\n        ",454],["T_VARIABLE","$stat",455],"[",["T_CONSTANT_ENCAPSED_STRING","'mode'",455],"]",["T_WHITESPACE"," ",455],["T_OR_EQUAL","|=",455],["T_WHITESPACE"," ",455],["T_LNUMBER","0100000",455],";",["T_WHITESPACE","\n    ",455],"}",["T_WHITESPACE","\n           ",456],["T_VARIABLE","$info",457],["T_WHITESPACE"," ",457],"=",["T_WHITESPACE"," ",457],["T_VARIABLE","$this",457],["T_OBJECT_OPERATOR","->",457],["T_STRING","_getS3Client",457],"(",["T_VARIABLE","$path",457],")",["T_OBJECT_OPERATOR","->",457],["T_STRING","getInfo",457],"(",["T_VARIABLE","$name",457],")",";",["T_WHITESPACE","\n\n        ",457],["T_IF","if",459],["T_WHITESPACE"," ",459],"(","!",["T_EMPTY","empty",459],"(",["T_VARIABLE","$info",459],")",")",["T_WHITESPACE"," ",459],"{",["T_WHITESPACE","\n            ",459],["T_VARIABLE","$stat",460],"[",["T_CONSTANT_ENCAPSED_STRING","'size'",460],"]",["T_WHITESPACE","  ",460],"=",["T_WHITESPACE"," ",460],["T_VARIABLE","$info",460],"[",["T_CONSTANT_ENCAPSED_STRING","'size'",460],"]",";",["T_WHITESPACE","\n            ",460],["T_VARIABLE","$stat",461],"[",["T_CONSTANT_ENCAPSED_STRING","'atime'",461],"]",["T_WHITESPACE"," ",461],"=",["T_WHITESPACE"," ",461],["T_STRING","time",461],"(",")",";",["T_WHITESPACE","\n            ",461],["T_VARIABLE","$stat",462],"[",["T_CONSTANT_ENCAPSED_STRING","'mtime'",462],"]",["T_WHITESPACE"," ",462],"=",["T_WHITESPACE"," ",462],["T_VARIABLE","$info",462],"[",["T_CONSTANT_ENCAPSED_STRING","'mtime'",462],"]",";",["T_WHITESPACE","\n        ",462],"}",["T_WHITESPACE","\n\n        ",463],["T_RETURN","return",465],["T_WHITESPACE"," ",465],["T_VARIABLE","$stat",465],";",["T_WHITESPACE","\n    ",465],"}",["T_WHITESPACE","\n\n    ",466],["T_DOC_COMMENT","\/**\n     * Return the next filename in the directory\n     *\n     * @return string\n     *\/",468],["T_WHITESPACE","\n    ",472],["T_PUBLIC","public",473],["T_WHITESPACE"," ",473],["T_FUNCTION","function",473],["T_WHITESPACE"," ",473],["T_STRING","dir_readdir",473],"(",")",["T_WHITESPACE","\n    ",473],"{",["T_WHITESPACE","\n        ",474],["T_VARIABLE","$object",475],["T_WHITESPACE"," ",475],"=",["T_WHITESPACE"," ",475],["T_STRING","current",475],"(",["T_VARIABLE","$this",475],["T_OBJECT_OPERATOR","->",475],["T_STRING","_bucketList",475],")",";",["T_WHITESPACE","\n        ",475],["T_IF","if",476],["T_WHITESPACE"," ",476],"(",["T_VARIABLE","$object",476],["T_WHITESPACE"," ",476],["T_IS_NOT_IDENTICAL","!==",476],["T_WHITESPACE"," ",476],["T_STRING","false",476],")",["T_WHITESPACE"," ",476],"{",["T_WHITESPACE","\n            ",476],["T_STRING","next",477],"(",["T_VARIABLE","$this",477],["T_OBJECT_OPERATOR","->",477],["T_STRING","_bucketList",477],")",";",["T_WHITESPACE","\n        ",477],"}",["T_WHITESPACE","\n        ",478],["T_RETURN","return",479],["T_WHITESPACE"," ",479],["T_VARIABLE","$object",479],";",["T_WHITESPACE","\n    ",479],"}",["T_WHITESPACE","\n\n    ",480],["T_DOC_COMMENT","\/**\n     * Reset the directory pointer\n     *\n     * @return boolean True\n     *\/",482],["T_WHITESPACE","\n    ",486],["T_PUBLIC","public",487],["T_WHITESPACE"," ",487],["T_FUNCTION","function",487],["T_WHITESPACE"," ",487],["T_STRING","dir_rewinddir",487],"(",")",["T_WHITESPACE","\n    ",487],"{",["T_WHITESPACE","\n        ",488],["T_STRING","reset",489],"(",["T_VARIABLE","$this",489],["T_OBJECT_OPERATOR","->",489],["T_STRING","_bucketList",489],")",";",["T_WHITESPACE","\n        ",489],["T_RETURN","return",490],["T_WHITESPACE"," ",490],["T_STRING","true",490],";",["T_WHITESPACE","\n    ",490],"}",["T_WHITESPACE","\n\n    ",491],["T_DOC_COMMENT","\/**\n     * Close a directory\n     *\n     * @return boolean True\n     *\/",493],["T_WHITESPACE","\n    ",497],["T_PUBLIC","public",498],["T_WHITESPACE"," ",498],["T_FUNCTION","function",498],["T_WHITESPACE"," ",498],["T_STRING","dir_closedir",498],"(",")",["T_WHITESPACE","\n    ",498],"{",["T_WHITESPACE","\n        ",499],["T_VARIABLE","$this",500],["T_OBJECT_OPERATOR","->",500],["T_STRING","_bucketList",500],["T_WHITESPACE"," ",500],"=",["T_WHITESPACE"," ",500],["T_ARRAY","array",500],"(",")",";",["T_WHITESPACE","\n        ",500],["T_RETURN","return",501],["T_WHITESPACE"," ",501],["T_STRING","true",501],";",["T_WHITESPACE","\n    ",501],"}",["T_WHITESPACE","\n",502],"}",["T_WHITESPACE","\n",503]]
[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Zend Framework\n *\n * LICENSE\n *\n * This source file is subject to the new BSD license that is bundled\n * with this package in the file LICENSE.txt.\n * It is also available through the world-wide-web at this URL:\n * http:\/\/framework.zend.com\/license\/new-bsd\n * If you did not receive a copy of the license and are unable to\n * obtain it through the world-wide-web, please send an email\n * to license@zend.com so we can send you a copy immediately.\n *\n * @category   Zend\n * @package    Zend_Service_Amazon\n * @subpackage Ec2\n * @copyright  Copyright (c) 2005-2015 Zend Technologies USA Inc. (http:\/\/www.zend.com)\n * @license    http:\/\/framework.zend.com\/license\/new-bsd     New BSD License\n * @version    $Id$\n *\/",2],["T_WHITESPACE","\n\n",21],["T_DOC_COMMENT","\/**\n * @see Zend_Service_Amazon_Ec2_Abstract\n *\/",23],["T_WHITESPACE","\n",25],["T_COMMENT","#require_once 'Zend\/Service\/Amazon\/Ec2\/Abstract.php';\n",26],["T_WHITESPACE","\n",27],["T_DOC_COMMENT","\/**\n * @see Zend_Crypt_Hmac\n *\/",28],["T_WHITESPACE","\n",30],["T_COMMENT","#require_once 'Zend\/Crypt\/Hmac.php';\n",31],["T_WHITESPACE","\n",32],["T_DOC_COMMENT","\/**\n * @see Zend_Json\n *\/",33],["T_WHITESPACE","\n",35],["T_COMMENT","#require_once 'Zend\/Json.php';\n",36],["T_WHITESPACE","\n",37],["T_DOC_COMMENT","\/**\n * An Amazon EC2 interface that allows yout to run, terminate, reboot and describe Amazon\n * Ec2 Instances.\n *\n * @category   Zend\n * @package    Zend_Service_Amazon\n * @subpackage Ec2\n * @copyright  Copyright (c) 2005-2015 Zend Technologies USA Inc. (http:\/\/www.zend.com)\n * @license    http:\/\/framework.zend.com\/license\/new-bsd     New BSD License\n *\/",38],["T_WHITESPACE","\n",47],["T_CLASS","class",48],["T_WHITESPACE"," ",48],["T_STRING","Zend_Service_Amazon_Ec2_Instance_Windows",48],["T_WHITESPACE"," ",48],["T_EXTENDS","extends",48],["T_WHITESPACE"," ",48],["T_STRING","Zend_Service_Amazon_Ec2_Abstract",48],["T_WHITESPACE","\n",48],"{",["T_WHITESPACE","\n    ",49],["T_DOC_COMMENT","\/**\n     * Bundles an Amazon EC2 instance running Windows\n     *\n     * @param string $instanceId        The instance you want to bundle\n     * @param string $s3Bucket          Where you want the ami to live on S3\n     * @param string $s3Prefix          The prefix you want to assign to the AMI on S3\n     * @param integer $uploadExpiration The expiration of the upload policy.  Amazon recommends 12 hours or longer.\n     *                                  This is based in nubmer of minutes. Default is 1440 minutes (24 hours)\n     * @return array                    containing the information on the new bundle operation\n     *\/",50],["T_WHITESPACE","\n    ",59],["T_PUBLIC","public",60],["T_WHITESPACE"," ",60],["T_FUNCTION","function",60],["T_WHITESPACE"," ",60],["T_STRING","bundle",60],"(",["T_VARIABLE","$instanceId",60],",",["T_WHITESPACE"," ",60],["T_VARIABLE","$s3Bucket",60],",",["T_WHITESPACE"," ",60],["T_VARIABLE","$s3Prefix",60],",",["T_WHITESPACE"," ",60],["T_VARIABLE","$uploadExpiration",60],["T_WHITESPACE"," ",60],"=",["T_WHITESPACE"," ",60],["T_LNUMBER","1440",60],")",["T_WHITESPACE","\n    ",60],"{",["T_WHITESPACE","\n        ",61],["T_VARIABLE","$params",62],["T_WHITESPACE"," ",62],"=",["T_WHITESPACE"," ",62],["T_ARRAY","array",62],"(",")",";",["T_WHITESPACE","\n        ",62],["T_VARIABLE","$params",63],"[",["T_CONSTANT_ENCAPSED_STRING","'Action'",63],"]",["T_WHITESPACE"," ",63],"=",["T_WHITESPACE"," ",63],["T_CONSTANT_ENCAPSED_STRING","'BundleInstance'",63],";",["T_WHITESPACE","\n        ",63],["T_VARIABLE","$params",64],"[",["T_CONSTANT_ENCAPSED_STRING","'InstanceId'",64],"]",["T_WHITESPACE"," ",64],"=",["T_WHITESPACE"," ",64],["T_VARIABLE","$instanceId",64],";",["T_WHITESPACE","\n        ",64],["T_VARIABLE","$params",65],"[",["T_CONSTANT_ENCAPSED_STRING","'Storage.S3.AWSAccessKeyId'",65],"]",["T_WHITESPACE"," ",65],"=",["T_WHITESPACE"," ",65],["T_VARIABLE","$this",65],["T_OBJECT_OPERATOR","->",65],["T_STRING","_getAccessKey",65],"(",")",";",["T_WHITESPACE","\n        ",65],["T_VARIABLE","$params",66],"[",["T_CONSTANT_ENCAPSED_STRING","'Storage.S3.Bucket'",66],"]",["T_WHITESPACE"," ",66],"=",["T_WHITESPACE"," ",66],["T_VARIABLE","$s3Bucket",66],";",["T_WHITESPACE","\n        ",66],["T_VARIABLE","$params",67],"[",["T_CONSTANT_ENCAPSED_STRING","'Storage.S3.Prefix'",67],"]",["T_WHITESPACE"," ",67],"=",["T_WHITESPACE"," ",67],["T_VARIABLE","$s3Prefix",67],";",["T_WHITESPACE","\n        ",67],["T_VARIABLE","$uploadPolicy",68],["T_WHITESPACE"," ",68],"=",["T_WHITESPACE"," ",68],["T_VARIABLE","$this",68],["T_OBJECT_OPERATOR","->",68],["T_STRING","_getS3UploadPolicy",68],"(",["T_VARIABLE","$s3Bucket",68],",",["T_WHITESPACE"," ",68],["T_VARIABLE","$s3Prefix",68],",",["T_WHITESPACE"," ",68],["T_VARIABLE","$uploadExpiration",68],")",";",["T_WHITESPACE","\n        ",68],["T_VARIABLE","$params",69],"[",["T_CONSTANT_ENCAPSED_STRING","'Storage.S3.UploadPolicy'",69],"]",["T_WHITESPACE"," ",69],"=",["T_WHITESPACE"," ",69],["T_VARIABLE","$uploadPolicy",69],";",["T_WHITESPACE","\n        ",69],["T_VARIABLE","$params",70],"[",["T_CONSTANT_ENCAPSED_STRING","'Storage.S3.UploadPolicySignature'",70],"]",["T_WHITESPACE"," ",70],"=",["T_WHITESPACE"," ",70],["T_VARIABLE","$this",70],["T_OBJECT_OPERATOR","->",70],["T_STRING","_signS3UploadPolicy",70],"(",["T_VARIABLE","$uploadPolicy",70],")",";",["T_WHITESPACE","\n\n        ",70],["T_VARIABLE","$response",72],["T_WHITESPACE"," ",72],"=",["T_WHITESPACE"," ",72],["T_VARIABLE","$this",72],["T_OBJECT_OPERATOR","->",72],["T_STRING","sendRequest",72],"(",["T_VARIABLE","$params",72],")",";",["T_WHITESPACE","\n\n        ",72],["T_VARIABLE","$xpath",74],["T_WHITESPACE"," ",74],"=",["T_WHITESPACE"," ",74],["T_VARIABLE","$response",74],["T_OBJECT_OPERATOR","->",74],["T_STRING","getXPath",74],"(",")",";",["T_WHITESPACE","\n\n        ",74],["T_VARIABLE","$return",76],["T_WHITESPACE"," ",76],"=",["T_WHITESPACE"," ",76],["T_ARRAY","array",76],"(",")",";",["T_WHITESPACE","\n        ",76],["T_VARIABLE","$return",77],"[",["T_CONSTANT_ENCAPSED_STRING","'instanceId'",77],"]",["T_WHITESPACE"," ",77],"=",["T_WHITESPACE"," ",77],["T_VARIABLE","$xpath",77],["T_OBJECT_OPERATOR","->",77],["T_STRING","evaluate",77],"(",["T_CONSTANT_ENCAPSED_STRING","'string(\/\/ec2:bundleInstanceTask\/ec2:instanceId\/text())'",77],")",";",["T_WHITESPACE","\n        ",77],["T_VARIABLE","$return",78],"[",["T_CONSTANT_ENCAPSED_STRING","'bundleId'",78],"]",["T_WHITESPACE"," ",78],"=",["T_WHITESPACE"," ",78],["T_VARIABLE","$xpath",78],["T_OBJECT_OPERATOR","->",78],["T_STRING","evaluate",78],"(",["T_CONSTANT_ENCAPSED_STRING","'string(\/\/ec2:bundleInstanceTask\/ec2:bundleId\/text())'",78],")",";",["T_WHITESPACE","\n        ",78],["T_VARIABLE","$return",79],"[",["T_CONSTANT_ENCAPSED_STRING","'state'",79],"]",["T_WHITESPACE"," ",79],"=",["T_WHITESPACE"," ",79],["T_VARIABLE","$xpath",79],["T_OBJECT_OPERATOR","->",79],["T_STRING","evaluate",79],"(",["T_CONSTANT_ENCAPSED_STRING","'string(\/\/ec2:bundleInstanceTask\/ec2:state\/text())'",79],")",";",["T_WHITESPACE","\n        ",79],["T_VARIABLE","$return",80],"[",["T_CONSTANT_ENCAPSED_STRING","'startTime'",80],"]",["T_WHITESPACE"," ",80],"=",["T_WHITESPACE"," ",80],["T_VARIABLE","$xpath",80],["T_OBJECT_OPERATOR","->",80],["T_STRING","evaluate",80],"(",["T_CONSTANT_ENCAPSED_STRING","'string(\/\/ec2:bundleInstanceTask\/ec2:startTime\/text())'",80],")",";",["T_WHITESPACE","\n        ",80],["T_VARIABLE","$return",81],"[",["T_CONSTANT_ENCAPSED_STRING","'updateTime'",81],"]",["T_WHITESPACE"," ",81],"=",["T_WHITESPACE"," ",81],["T_VARIABLE","$xpath",81],["T_OBJECT_OPERATOR","->",81],["T_STRING","evaluate",81],"(",["T_CONSTANT_ENCAPSED_STRING","'string(\/\/ec2:bundleInstanceTask\/ec2:updateTime\/text())'",81],")",";",["T_WHITESPACE","\n        ",81],["T_VARIABLE","$return",82],"[",["T_CONSTANT_ENCAPSED_STRING","'progress'",82],"]",["T_WHITESPACE"," ",82],"=",["T_WHITESPACE"," ",82],["T_VARIABLE","$xpath",82],["T_OBJECT_OPERATOR","->",82],["T_STRING","evaluate",82],"(",["T_CONSTANT_ENCAPSED_STRING","'string(\/\/ec2:bundleInstanceTask\/ec2:progress\/text())'",82],")",";",["T_WHITESPACE","\n        ",82],["T_VARIABLE","$return",83],"[",["T_CONSTANT_ENCAPSED_STRING","'storage'",83],"]","[",["T_CONSTANT_ENCAPSED_STRING","'s3'",83],"]","[",["T_CONSTANT_ENCAPSED_STRING","'bucket'",83],"]",["T_WHITESPACE"," ",83],"=",["T_WHITESPACE"," ",83],["T_VARIABLE","$xpath",83],["T_OBJECT_OPERATOR","->",83],["T_STRING","evaluate",83],"(",["T_CONSTANT_ENCAPSED_STRING","'string(\/\/ec2:bundleInstanceTask\/ec2:storage\/ec2:S3\/ec2:bucket\/text())'",83],")",";",["T_WHITESPACE","\n        ",83],["T_VARIABLE","$return",84],"[",["T_CONSTANT_ENCAPSED_STRING","'storage'",84],"]","[",["T_CONSTANT_ENCAPSED_STRING","'s3'",84],"]","[",["T_CONSTANT_ENCAPSED_STRING","'prefix'",84],"]",["T_WHITESPACE"," ",84],"=",["T_WHITESPACE"," ",84],["T_VARIABLE","$xpath",84],["T_OBJECT_OPERATOR","->",84],["T_STRING","evaluate",84],"(",["T_CONSTANT_ENCAPSED_STRING","'string(\/\/ec2:bundleInstanceTask\/ec2:storage\/ec2:S3\/ec2:prefix\/text())'",84],")",";",["T_WHITESPACE","\n\n        ",84],["T_RETURN","return",86],["T_WHITESPACE"," ",86],["T_VARIABLE","$return",86],";",["T_WHITESPACE","\n    ",86],"}",["T_WHITESPACE","\n\n    ",87],["T_DOC_COMMENT","\/**\n     * Cancels an Amazon EC2 bundling operation\n     *\n     * @param string $bundleId          The ID of the bundle task to cancel\n     * @return array                    Information on the bundle task\n     *\/",89],["T_WHITESPACE","\n    ",94],["T_PUBLIC","public",95],["T_WHITESPACE"," ",95],["T_FUNCTION","function",95],["T_WHITESPACE"," ",95],["T_STRING","cancelBundle",95],"(",["T_VARIABLE","$bundleId",95],")",["T_WHITESPACE","\n    ",95],"{",["T_WHITESPACE","\n        ",96],["T_VARIABLE","$params",97],["T_WHITESPACE"," ",97],"=",["T_WHITESPACE"," ",97],["T_ARRAY","array",97],"(",")",";",["T_WHITESPACE","\n        ",97],["T_VARIABLE","$params",98],"[",["T_CONSTANT_ENCAPSED_STRING","'Action'",98],"]",["T_WHITESPACE"," ",98],"=",["T_WHITESPACE"," ",98],["T_CONSTANT_ENCAPSED_STRING","'CancelBundleTask'",98],";",["T_WHITESPACE","\n        ",98],["T_VARIABLE","$params",99],"[",["T_CONSTANT_ENCAPSED_STRING","'BundleId'",99],"]",["T_WHITESPACE"," ",99],"=",["T_WHITESPACE"," ",99],["T_VARIABLE","$bundleId",99],";",["T_WHITESPACE","\n\n        ",99],["T_VARIABLE","$response",101],["T_WHITESPACE"," ",101],"=",["T_WHITESPACE"," ",101],["T_VARIABLE","$this",101],["T_OBJECT_OPERATOR","->",101],["T_STRING","sendRequest",101],"(",["T_VARIABLE","$params",101],")",";",["T_WHITESPACE","\n\n        ",101],["T_VARIABLE","$xpath",103],["T_WHITESPACE"," ",103],"=",["T_WHITESPACE"," ",103],["T_VARIABLE","$response",103],["T_OBJECT_OPERATOR","->",103],["T_STRING","getXPath",103],"(",")",";",["T_WHITESPACE","\n\n        ",103],["T_VARIABLE","$return",105],["T_WHITESPACE"," ",105],"=",["T_WHITESPACE"," ",105],["T_ARRAY","array",105],"(",")",";",["T_WHITESPACE","\n        ",105],["T_VARIABLE","$return",106],"[",["T_CONSTANT_ENCAPSED_STRING","'instanceId'",106],"]",["T_WHITESPACE"," ",106],"=",["T_WHITESPACE"," ",106],["T_VARIABLE","$xpath",106],["T_OBJECT_OPERATOR","->",106],["T_STRING","evaluate",106],"(",["T_CONSTANT_ENCAPSED_STRING","'string(\/\/ec2:bundleInstanceTask\/ec2:instanceId\/text())'",106],")",";",["T_WHITESPACE","\n        ",106],["T_VARIABLE","$return",107],"[",["T_CONSTANT_ENCAPSED_STRING","'bundleId'",107],"]",["T_WHITESPACE"," ",107],"=",["T_WHITESPACE"," ",107],["T_VARIABLE","$xpath",107],["T_OBJECT_OPERATOR","->",107],["T_STRING","evaluate",107],"(",["T_CONSTANT_ENCAPSED_STRING","'string(\/\/ec2:bundleInstanceTask\/ec2:bundleId\/text())'",107],")",";",["T_WHITESPACE","\n        ",107],["T_VARIABLE","$return",108],"[",["T_CONSTANT_ENCAPSED_STRING","'state'",108],"]",["T_WHITESPACE"," ",108],"=",["T_WHITESPACE"," ",108],["T_VARIABLE","$xpath",108],["T_OBJECT_OPERATOR","->",108],["T_STRING","evaluate",108],"(",["T_CONSTANT_ENCAPSED_STRING","'string(\/\/ec2:bundleInstanceTask\/ec2:state\/text())'",108],")",";",["T_WHITESPACE","\n        ",108],["T_VARIABLE","$return",109],"[",["T_CONSTANT_ENCAPSED_STRING","'startTime'",109],"]",["T_WHITESPACE"," ",109],"=",["T_WHITESPACE"," ",109],["T_VARIABLE","$xpath",109],["T_OBJECT_OPERATOR","->",109],["T_STRING","evaluate",109],"(",["T_CONSTANT_ENCAPSED_STRING","'string(\/\/ec2:bundleInstanceTask\/ec2:startTime\/text())'",109],")",";",["T_WHITESPACE","\n        ",109],["T_VARIABLE","$return",110],"[",["T_CONSTANT_ENCAPSED_STRING","'updateTime'",110],"]",["T_WHITESPACE"," ",110],"=",["T_WHITESPACE"," ",110],["T_VARIABLE","$xpath",110],["T_OBJECT_OPERATOR","->",110],["T_STRING","evaluate",110],"(",["T_CONSTANT_ENCAPSED_STRING","'string(\/\/ec2:bundleInstanceTask\/ec2:updateTime\/text())'",110],")",";",["T_WHITESPACE","\n        ",110],["T_VARIABLE","$return",111],"[",["T_CONSTANT_ENCAPSED_STRING","'progress'",111],"]",["T_WHITESPACE"," ",111],"=",["T_WHITESPACE"," ",111],["T_VARIABLE","$xpath",111],["T_OBJECT_OPERATOR","->",111],["T_STRING","evaluate",111],"(",["T_CONSTANT_ENCAPSED_STRING","'string(\/\/ec2:bundleInstanceTask\/ec2:progress\/text())'",111],")",";",["T_WHITESPACE","\n        ",111],["T_VARIABLE","$return",112],"[",["T_CONSTANT_ENCAPSED_STRING","'storage'",112],"]","[",["T_CONSTANT_ENCAPSED_STRING","'s3'",112],"]","[",["T_CONSTANT_ENCAPSED_STRING","'bucket'",112],"]",["T_WHITESPACE"," ",112],"=",["T_WHITESPACE"," ",112],["T_VARIABLE","$xpath",112],["T_OBJECT_OPERATOR","->",112],["T_STRING","evaluate",112],"(",["T_CONSTANT_ENCAPSED_STRING","'string(\/\/ec2:bundleInstanceTask\/ec2:storage\/ec2:S3\/ec2:bucket\/text())'",112],")",";",["T_WHITESPACE","\n        ",112],["T_VARIABLE","$return",113],"[",["T_CONSTANT_ENCAPSED_STRING","'storage'",113],"]","[",["T_CONSTANT_ENCAPSED_STRING","'s3'",113],"]","[",["T_CONSTANT_ENCAPSED_STRING","'prefix'",113],"]",["T_WHITESPACE"," ",113],"=",["T_WHITESPACE"," ",113],["T_VARIABLE","$xpath",113],["T_OBJECT_OPERATOR","->",113],["T_STRING","evaluate",113],"(",["T_CONSTANT_ENCAPSED_STRING","'string(\/\/ec2:bundleInstanceTask\/ec2:storage\/ec2:S3\/ec2:prefix\/text())'",113],")",";",["T_WHITESPACE","\n\n        ",113],["T_RETURN","return",115],["T_WHITESPACE"," ",115],["T_VARIABLE","$return",115],";",["T_WHITESPACE","\n    ",115],"}",["T_WHITESPACE","\n\n    ",116],["T_DOC_COMMENT","\/**\n     * Describes current bundling tasks\n     *\n     * @param string|array $bundleId            A single or a list of bundle tasks that you want\n     *                                          to find information for.\n     * @return array                            Information for the task that you requested\n     *\/",118],["T_WHITESPACE","\n    ",124],["T_PUBLIC","public",125],["T_WHITESPACE"," ",125],["T_FUNCTION","function",125],["T_WHITESPACE"," ",125],["T_STRING","describeBundle",125],"(",["T_VARIABLE","$bundleId",125],["T_WHITESPACE"," ",125],"=",["T_WHITESPACE"," ",125],["T_CONSTANT_ENCAPSED_STRING","''",125],")",["T_WHITESPACE","\n    ",125],"{",["T_WHITESPACE","\n        ",126],["T_VARIABLE","$params",127],["T_WHITESPACE"," ",127],"=",["T_WHITESPACE"," ",127],["T_ARRAY","array",127],"(",")",";",["T_WHITESPACE","\n        ",127],["T_VARIABLE","$params",128],"[",["T_CONSTANT_ENCAPSED_STRING","'Action'",128],"]",["T_WHITESPACE"," ",128],"=",["T_WHITESPACE"," ",128],["T_CONSTANT_ENCAPSED_STRING","'DescribeBundleTasks'",128],";",["T_WHITESPACE","\n\n        ",128],["T_IF","if",130],"(",["T_STRING","is_array",130],"(",["T_VARIABLE","$bundleId",130],")",["T_WHITESPACE"," ",130],["T_BOOLEAN_AND","&&",130],["T_WHITESPACE"," ",130],"!",["T_EMPTY","empty",130],"(",["T_VARIABLE","$bundleId",130],")",")",["T_WHITESPACE"," ",130],"{",["T_WHITESPACE","\n            ",130],["T_FOREACH","foreach",131],"(",["T_VARIABLE","$bundleId",131],["T_WHITESPACE"," ",131],["T_AS","as",131],["T_WHITESPACE"," ",131],["T_VARIABLE","$k",131],["T_DOUBLE_ARROW","=>",131],["T_VARIABLE","$name",131],")",["T_WHITESPACE"," ",131],"{",["T_WHITESPACE","\n                ",131],["T_VARIABLE","$params",132],"[",["T_CONSTANT_ENCAPSED_STRING","'bundleId.'",132],["T_WHITESPACE"," ",132],".",["T_WHITESPACE"," ",132],"(",["T_VARIABLE","$k",132],"+",["T_LNUMBER","1",132],")","]",["T_WHITESPACE"," ",132],"=",["T_WHITESPACE"," ",132],["T_VARIABLE","$name",132],";",["T_WHITESPACE","\n            ",132],"}",["T_WHITESPACE","\n        ",133],"}",["T_WHITESPACE"," ",134],["T_ELSEIF","elseif",134],"(","!",["T_EMPTY","empty",134],"(",["T_VARIABLE","$bundleId",134],")",")",["T_WHITESPACE"," ",134],"{",["T_WHITESPACE","\n            ",134],["T_VARIABLE","$params",135],"[",["T_CONSTANT_ENCAPSED_STRING","'bundleId.1'",135],"]",["T_WHITESPACE"," ",135],"=",["T_WHITESPACE"," ",135],["T_VARIABLE","$bundleId",135],";",["T_WHITESPACE","\n        ",135],"}",["T_WHITESPACE","\n\n        ",136],["T_VARIABLE","$response",138],["T_WHITESPACE"," ",138],"=",["T_WHITESPACE"," ",138],["T_VARIABLE","$this",138],["T_OBJECT_OPERATOR","->",138],["T_STRING","sendRequest",138],"(",["T_VARIABLE","$params",138],")",";",["T_WHITESPACE","\n\n        ",138],["T_VARIABLE","$xpath",140],["T_WHITESPACE"," ",140],"=",["T_WHITESPACE"," ",140],["T_VARIABLE","$response",140],["T_OBJECT_OPERATOR","->",140],["T_STRING","getXPath",140],"(",")",";",["T_WHITESPACE","\n\n        ",140],["T_VARIABLE","$items",142],["T_WHITESPACE"," ",142],"=",["T_WHITESPACE"," ",142],["T_VARIABLE","$xpath",142],["T_OBJECT_OPERATOR","->",142],["T_STRING","evaluate",142],"(",["T_CONSTANT_ENCAPSED_STRING","'\/\/ec2:bundleInstanceTasksSet\/ec2:item'",142],")",";",["T_WHITESPACE","\n        ",142],["T_VARIABLE","$return",143],["T_WHITESPACE"," ",143],"=",["T_WHITESPACE"," ",143],["T_ARRAY","array",143],"(",")",";",["T_WHITESPACE","\n\n        ",143],["T_FOREACH","foreach",145],"(",["T_VARIABLE","$items",145],["T_WHITESPACE"," ",145],["T_AS","as",145],["T_WHITESPACE"," ",145],["T_VARIABLE","$item",145],")",["T_WHITESPACE"," ",145],"{",["T_WHITESPACE","\n            ",145],["T_VARIABLE","$i",146],["T_WHITESPACE"," ",146],"=",["T_WHITESPACE"," ",146],["T_ARRAY","array",146],"(",")",";",["T_WHITESPACE","\n            ",146],["T_VARIABLE","$i",147],"[",["T_CONSTANT_ENCAPSED_STRING","'instanceId'",147],"]",["T_WHITESPACE"," ",147],"=",["T_WHITESPACE"," ",147],["T_VARIABLE","$xpath",147],["T_OBJECT_OPERATOR","->",147],["T_STRING","evaluate",147],"(",["T_CONSTANT_ENCAPSED_STRING","'string(ec2:instanceId\/text())'",147],",",["T_WHITESPACE"," ",147],["T_VARIABLE","$item",147],")",";",["T_WHITESPACE","\n            ",147],["T_VARIABLE","$i",148],"[",["T_CONSTANT_ENCAPSED_STRING","'bundleId'",148],"]",["T_WHITESPACE"," ",148],"=",["T_WHITESPACE"," ",148],["T_VARIABLE","$xpath",148],["T_OBJECT_OPERATOR","->",148],["T_STRING","evaluate",148],"(",["T_CONSTANT_ENCAPSED_STRING","'string(ec2:bundleId\/text())'",148],",",["T_WHITESPACE"," ",148],["T_VARIABLE","$item",148],")",";",["T_WHITESPACE","\n            ",148],["T_VARIABLE","$i",149],"[",["T_CONSTANT_ENCAPSED_STRING","'state'",149],"]",["T_WHITESPACE"," ",149],"=",["T_WHITESPACE"," ",149],["T_VARIABLE","$xpath",149],["T_OBJECT_OPERATOR","->",149],["T_STRING","evaluate",149],"(",["T_CONSTANT_ENCAPSED_STRING","'string(ec2:state\/text())'",149],",",["T_WHITESPACE"," ",149],["T_VARIABLE","$item",149],")",";",["T_WHITESPACE","\n            ",149],["T_VARIABLE","$i",150],"[",["T_CONSTANT_ENCAPSED_STRING","'startTime'",150],"]",["T_WHITESPACE"," ",150],"=",["T_WHITESPACE"," ",150],["T_VARIABLE","$xpath",150],["T_OBJECT_OPERATOR","->",150],["T_STRING","evaluate",150],"(",["T_CONSTANT_ENCAPSED_STRING","'string(ec2:startTime\/text())'",150],",",["T_WHITESPACE"," ",150],["T_VARIABLE","$item",150],")",";",["T_WHITESPACE","\n            ",150],["T_VARIABLE","$i",151],"[",["T_CONSTANT_ENCAPSED_STRING","'updateTime'",151],"]",["T_WHITESPACE"," ",151],"=",["T_WHITESPACE"," ",151],["T_VARIABLE","$xpath",151],["T_OBJECT_OPERATOR","->",151],["T_STRING","evaluate",151],"(",["T_CONSTANT_ENCAPSED_STRING","'string(ec2:updateTime\/text())'",151],",",["T_WHITESPACE"," ",151],["T_VARIABLE","$item",151],")",";",["T_WHITESPACE","\n            ",151],["T_VARIABLE","$i",152],"[",["T_CONSTANT_ENCAPSED_STRING","'progress'",152],"]",["T_WHITESPACE"," ",152],"=",["T_WHITESPACE"," ",152],["T_VARIABLE","$xpath",152],["T_OBJECT_OPERATOR","->",152],["T_STRING","evaluate",152],"(",["T_CONSTANT_ENCAPSED_STRING","'string(ec2:progress\/text())'",152],",",["T_WHITESPACE"," ",152],["T_VARIABLE","$item",152],")",";",["T_WHITESPACE","\n            ",152],["T_VARIABLE","$i",153],"[",["T_CONSTANT_ENCAPSED_STRING","'storage'",153],"]","[",["T_CONSTANT_ENCAPSED_STRING","'s3'",153],"]","[",["T_CONSTANT_ENCAPSED_STRING","'bucket'",153],"]",["T_WHITESPACE"," ",153],"=",["T_WHITESPACE"," ",153],["T_VARIABLE","$xpath",153],["T_OBJECT_OPERATOR","->",153],["T_STRING","evaluate",153],"(",["T_CONSTANT_ENCAPSED_STRING","'string(ec2:storage\/ec2:S3\/ec2:bucket\/text())'",153],",",["T_WHITESPACE"," ",153],["T_VARIABLE","$item",153],")",";",["T_WHITESPACE","\n            ",153],["T_VARIABLE","$i",154],"[",["T_CONSTANT_ENCAPSED_STRING","'storage'",154],"]","[",["T_CONSTANT_ENCAPSED_STRING","'s3'",154],"]","[",["T_CONSTANT_ENCAPSED_STRING","'prefix'",154],"]",["T_WHITESPACE"," ",154],"=",["T_WHITESPACE"," ",154],["T_VARIABLE","$xpath",154],["T_OBJECT_OPERATOR","->",154],["T_STRING","evaluate",154],"(",["T_CONSTANT_ENCAPSED_STRING","'string(ec2:storage\/ec2:S3\/ec2:prefix\/text())'",154],",",["T_WHITESPACE"," ",154],["T_VARIABLE","$item",154],")",";",["T_WHITESPACE","\n\n            ",154],["T_VARIABLE","$return",156],"[","]",["T_WHITESPACE"," ",156],"=",["T_WHITESPACE"," ",156],["T_VARIABLE","$i",156],";",["T_WHITESPACE","\n            ",156],["T_UNSET","unset",157],"(",["T_VARIABLE","$i",157],")",";",["T_WHITESPACE","\n        ",157],"}",["T_WHITESPACE","\n\n\n        ",158],["T_RETURN","return",161],["T_WHITESPACE"," ",161],["T_VARIABLE","$return",161],";",["T_WHITESPACE","\n    ",161],"}",["T_WHITESPACE","\n\n    ",162],["T_DOC_COMMENT","\/**\n     * Generates the S3 Upload Policy Information\n     *\n     * @param string $bucketName        Which bucket you want the ami to live in on S3\n     * @param string $prefix            The prefix you want to assign to the AMI on S3\n     * @param integer $expireInMinutes  The expiration of the upload policy.  Amazon recommends 12 hours or longer.\n     *                                  This is based in nubmer of minutes. Default is 1440 minutes (24 hours)\n     * @return string                   Base64 encoded string that is the upload policy\n     *\/",164],["T_WHITESPACE","\n    ",172],["T_PROTECTED","protected",173],["T_WHITESPACE"," ",173],["T_FUNCTION","function",173],["T_WHITESPACE"," ",173],["T_STRING","_getS3UploadPolicy",173],"(",["T_VARIABLE","$bucketName",173],",",["T_WHITESPACE"," ",173],["T_VARIABLE","$prefix",173],",",["T_WHITESPACE"," ",173],["T_VARIABLE","$expireInMinutes",173],["T_WHITESPACE"," ",173],"=",["T_WHITESPACE"," ",173],["T_LNUMBER","1440",173],")",["T_WHITESPACE","\n    ",173],"{",["T_WHITESPACE","\n        ",174],["T_VARIABLE","$arrParams",175],["T_WHITESPACE"," ",175],"=",["T_WHITESPACE"," ",175],["T_ARRAY","array",175],"(",")",";",["T_WHITESPACE","\n        ",175],["T_VARIABLE","$arrParams",176],"[",["T_CONSTANT_ENCAPSED_STRING","'expiration'",176],"]",["T_WHITESPACE"," ",176],"=",["T_WHITESPACE"," ",176],["T_STRING","gmdate",176],"(",["T_CONSTANT_ENCAPSED_STRING","\"Y-m-d\\TH:i:s.\\\\0\\\\0\\\\0\\\\Z\"",176],",",["T_WHITESPACE"," ",176],"(",["T_STRING","time",176],"(",")",["T_WHITESPACE"," ",176],"+",["T_WHITESPACE"," ",176],"(",["T_VARIABLE","$expireInMinutes",176],["T_WHITESPACE"," ",176],"*",["T_WHITESPACE"," ",176],["T_LNUMBER","60",176],")",")",")",";",["T_WHITESPACE","\n        ",176],["T_VARIABLE","$arrParams",177],"[",["T_CONSTANT_ENCAPSED_STRING","'conditions'",177],"]","[","]",["T_WHITESPACE"," ",177],"=",["T_WHITESPACE"," ",177],["T_ARRAY","array",177],"(",["T_CONSTANT_ENCAPSED_STRING","'bucket'",177],["T_WHITESPACE"," ",177],["T_DOUBLE_ARROW","=>",177],["T_WHITESPACE"," ",177],["T_VARIABLE","$bucketName",177],")",";",["T_WHITESPACE","\n        ",177],["T_VARIABLE","$arrParams",178],"[",["T_CONSTANT_ENCAPSED_STRING","'conditions'",178],"]","[","]",["T_WHITESPACE"," ",178],"=",["T_WHITESPACE"," ",178],["T_ARRAY","array",178],"(",["T_CONSTANT_ENCAPSED_STRING","'acl'",178],["T_WHITESPACE"," ",178],["T_DOUBLE_ARROW","=>",178],["T_WHITESPACE"," ",178],["T_CONSTANT_ENCAPSED_STRING","'ec2-bundle-read'",178],")",";",["T_WHITESPACE","\n        ",178],["T_VARIABLE","$arrParams",179],"[",["T_CONSTANT_ENCAPSED_STRING","'conditions'",179],"]","[","]",["T_WHITESPACE"," ",179],"=",["T_WHITESPACE"," ",179],["T_ARRAY","array",179],"(",["T_CONSTANT_ENCAPSED_STRING","'starts-with'",179],",",["T_WHITESPACE"," ",179],["T_CONSTANT_ENCAPSED_STRING","'$key'",179],",",["T_WHITESPACE"," ",179],["T_VARIABLE","$prefix",179],")",";",["T_WHITESPACE","\n\n        ",179],["T_RETURN","return",181],["T_WHITESPACE"," ",181],["T_STRING","base64_encode",181],"(",["T_STRING","Zend_Json",181],["T_DOUBLE_COLON","::",181],["T_STRING","encode",181],"(",["T_VARIABLE","$arrParams",181],")",")",";",["T_WHITESPACE","\n    ",181],"}",["T_WHITESPACE","\n\n    ",182],["T_DOC_COMMENT","\/**\n     * Signed S3 Upload Policy\n     *\n     * @param string $policy            Base64 Encoded string that is the upload policy\n     * @return string                   SHA1 encoded S3 Upload Policy\n     *\/",184],["T_WHITESPACE","\n    ",189],["T_PROTECTED","protected",190],["T_WHITESPACE"," ",190],["T_FUNCTION","function",190],["T_WHITESPACE"," ",190],["T_STRING","_signS3UploadPolicy",190],"(",["T_VARIABLE","$policy",190],")",["T_WHITESPACE","\n    ",190],"{",["T_WHITESPACE","\n        ",191],["T_VARIABLE","$hmac",192],["T_WHITESPACE"," ",192],"=",["T_WHITESPACE"," ",192],["T_STRING","Zend_Crypt_Hmac",192],["T_DOUBLE_COLON","::",192],["T_STRING","compute",192],"(",["T_VARIABLE","$this",192],["T_OBJECT_OPERATOR","->",192],["T_STRING","_getSecretKey",192],"(",")",",",["T_WHITESPACE"," ",192],["T_CONSTANT_ENCAPSED_STRING","'SHA1'",192],",",["T_WHITESPACE"," ",192],["T_VARIABLE","$policy",192],",",["T_WHITESPACE"," ",192],["T_STRING","Zend_Crypt_Hmac",192],["T_DOUBLE_COLON","::",192],["T_STRING","BINARY",192],")",";",["T_WHITESPACE","\n        ",192],["T_RETURN","return",193],["T_WHITESPACE"," ",193],["T_VARIABLE","$hmac",193],";",["T_WHITESPACE","\n    ",193],"}",["T_WHITESPACE","\n",194],"}",["T_WHITESPACE","\n",195]]
[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Zend Framework\n *\n * LICENSE\n *\n * This source file is subject to the new BSD license that is bundled\n * with this package in the file LICENSE.txt.\n * It is also available through the world-wide-web at this URL:\n * http:\/\/framework.zend.com\/license\/new-bsd\n * If you did not receive a copy of the license and are unable to\n * obtain it through the world-wide-web, please send an email\n * to license@zend.com so we can send you a copy immediately.\n *\n * @category   Zend\n * @package    Zend_Service_ShortUrl\n * @copyright  Copyright (c) 2005-2015 Zend Technologies USA Inc. (http:\/\/www.zend.com)\n * @license    http:\/\/framework.zend.com\/license\/new-bsd     New BSD License\n * @version    $Id$\n *\/",2],["T_WHITESPACE","\n\n",20],["T_DOC_COMMENT","\/**\n * @see Zend_Service_ShortUrl_AbstractShortener\n *\/",22],["T_WHITESPACE","\n",24],["T_COMMENT","#require_once 'Zend\/Service\/ShortUrl\/AbstractShortener.php';\n",25],["T_WHITESPACE","\n",26],["T_DOC_COMMENT","\/**\n * Bit.ly API implementation\n *\n * @category   Zend\n * @package    Zend_Service_ShortUrl\n * @copyright  Copyright (c) 2005-2015 Zend Technologies USA Inc. (http:\/\/www.zend.com)\n * @license    http:\/\/framework.zend.com\/license\/new-bsd     New BSD License\n *\/",27],["T_WHITESPACE","\n",34],["T_CLASS","class",35],["T_WHITESPACE"," ",35],["T_STRING","Zend_Service_ShortUrl_BitLy",35],["T_WHITESPACE"," ",35],["T_EXTENDS","extends",35],["T_WHITESPACE"," ",35],["T_STRING","Zend_Service_ShortUrl_AbstractShortener",35],["T_WHITESPACE","\n",35],"{",["T_WHITESPACE","\n\n    ",36],["T_DOC_COMMENT","\/**\n     * Base URI of the service\n     *\n     * @var string\n     *\/",38],["T_WHITESPACE","\n    ",42],["T_PROTECTED","protected",43],["T_WHITESPACE"," ",43],["T_VARIABLE","$_apiUri",43],["T_WHITESPACE"," ",43],"=",["T_WHITESPACE"," ",43],["T_CONSTANT_ENCAPSED_STRING","'http:\/\/api.bitly.com'",43],";",["T_WHITESPACE","\n\n    ",43],["T_DOC_COMMENT","\/**\n     * user login name\n     *\n     * @var string\n     *\/",45],["T_WHITESPACE","\n    ",49],["T_PROTECTED","protected",50],["T_WHITESPACE"," ",50],["T_VARIABLE","$_loginName",50],";",["T_WHITESPACE","\n\n    ",50],["T_DOC_COMMENT","\/**\n     * user API key or application access token\n     *\n     * @var string\n     *\/",52],["T_WHITESPACE","\n    ",56],["T_PROTECTED","protected",57],["T_WHITESPACE"," ",57],["T_VARIABLE","$_apiKey",57],";",["T_WHITESPACE","\n\n    ",57],["T_DOC_COMMENT","\/**\n     * @param string $login user login name or application access token\n     * @param null|string $apiKey user API key\n     *\/",59],["T_WHITESPACE","\n    ",62],["T_PUBLIC","public",63],["T_WHITESPACE"," ",63],["T_FUNCTION","function",63],["T_WHITESPACE"," ",63],["T_STRING","__construct",63],"(",["T_VARIABLE","$login",63],",",["T_WHITESPACE"," ",63],["T_VARIABLE","$apiKey",63],["T_WHITESPACE"," ",63],"=",["T_WHITESPACE"," ",63],["T_STRING","null",63],")",["T_WHITESPACE","\n    ",63],"{",["T_WHITESPACE","\n        ",64],["T_IF","if",65],"(",["T_STRING","null",65],["T_WHITESPACE"," ",65],["T_IS_IDENTICAL","===",65],["T_WHITESPACE"," ",65],["T_VARIABLE","$apiKey",65],")",["T_WHITESPACE"," ",65],"{",["T_WHITESPACE","\n            ",65],["T_VARIABLE","$this",66],["T_OBJECT_OPERATOR","->",66],["T_STRING","setOAuthAccessToken",66],"(",["T_VARIABLE","$login",66],")",";",["T_WHITESPACE","\n        ",66],"}",["T_WHITESPACE"," ",67],["T_ELSE","else",67],["T_WHITESPACE"," ",67],"{",["T_WHITESPACE","\n            ",67],["T_VARIABLE","$this",68],["T_OBJECT_OPERATOR","->",68],["T_STRING","setApiLogin",68],"(",["T_VARIABLE","$login",68],",",["T_WHITESPACE"," ",68],["T_VARIABLE","$apiKey",68],")",";",["T_WHITESPACE","\n        ",68],"}",["T_WHITESPACE","\n    ",69],"}",["T_WHITESPACE","\n\n    ",70],["T_DOC_COMMENT","\/**\n     * set OAuth credentials\n     *\n     * @param $accessToken\n     * @return Zend_Service_ShortUrl_BitLy\n     *\/",72],["T_WHITESPACE","\n    ",77],["T_PUBLIC","public",78],["T_WHITESPACE"," ",78],["T_FUNCTION","function",78],["T_WHITESPACE"," ",78],["T_STRING","setOAuthAccessToken",78],"(",["T_VARIABLE","$accessToken",78],")",["T_WHITESPACE","\n    ",78],"{",["T_WHITESPACE","\n        ",79],["T_VARIABLE","$this",80],["T_OBJECT_OPERATOR","->",80],["T_STRING","_apiKey",80],["T_WHITESPACE"," ",80],"=",["T_WHITESPACE"," ",80],["T_VARIABLE","$accessToken",80],";",["T_WHITESPACE","\n        ",80],["T_VARIABLE","$this",81],["T_OBJECT_OPERATOR","->",81],["T_STRING","_loginName",81],["T_WHITESPACE"," ",81],"=",["T_WHITESPACE"," ",81],["T_STRING","null",81],";",["T_WHITESPACE","\n        ",81],["T_RETURN","return",82],["T_WHITESPACE"," ",82],["T_VARIABLE","$this",82],";",["T_WHITESPACE","\n    ",82],"}",["T_WHITESPACE","\n\n    ",83],["T_DOC_COMMENT","\/**\n     * set login credentials\n     *\n     * @param $login\n     * @param $apiKey\n     * @return Zend_Service_ShortUrl_BitLy\n     *\/",85],["T_WHITESPACE","\n    ",91],["T_PUBLIC","public",92],["T_WHITESPACE"," ",92],["T_FUNCTION","function",92],["T_WHITESPACE"," ",92],["T_STRING","setApiLogin",92],"(",["T_VARIABLE","$login",92],",",["T_WHITESPACE"," ",92],["T_VARIABLE","$apiKey",92],")",["T_WHITESPACE","\n    ",92],"{",["T_WHITESPACE","\n        ",93],["T_VARIABLE","$this",94],["T_OBJECT_OPERATOR","->",94],["T_STRING","_apiKey",94],["T_WHITESPACE"," ",94],"=",["T_WHITESPACE"," ",94],["T_VARIABLE","$apiKey",94],";",["T_WHITESPACE","\n        ",94],["T_VARIABLE","$this",95],["T_OBJECT_OPERATOR","->",95],["T_STRING","_loginName",95],["T_WHITESPACE"," ",95],"=",["T_WHITESPACE"," ",95],["T_VARIABLE","$login",95],";",["T_WHITESPACE","\n        ",95],["T_RETURN","return",96],["T_WHITESPACE"," ",96],["T_VARIABLE","$this",96],";",["T_WHITESPACE","\n    ",96],"}",["T_WHITESPACE","\n\n    ",97],["T_DOC_COMMENT","\/**\n     * prepare http client\n     * @return void\n     *\/",99],["T_WHITESPACE","\n    ",102],["T_PROTECTED","protected",103],["T_WHITESPACE"," ",103],["T_FUNCTION","function",103],["T_WHITESPACE"," ",103],["T_STRING","_setAccessParameter",103],"(",")",["T_WHITESPACE","\n    ",103],"{",["T_WHITESPACE","\n        ",104],["T_IF","if",105],"(",["T_STRING","null",105],["T_WHITESPACE"," ",105],["T_IS_IDENTICAL","===",105],["T_WHITESPACE"," ",105],["T_VARIABLE","$this",105],["T_OBJECT_OPERATOR","->",105],["T_STRING","_loginName",105],")",["T_WHITESPACE"," ",105],"{",["T_WHITESPACE","\n            ",105],["T_COMMENT","\/\/OAuth login\n",106],["T_WHITESPACE","            ",107],["T_VARIABLE","$this",107],["T_OBJECT_OPERATOR","->",107],["T_STRING","getHttpClient",107],"(",")",["T_OBJECT_OPERATOR","->",107],["T_STRING","setParameterGet",107],"(",["T_CONSTANT_ENCAPSED_STRING","'access_token'",107],",",["T_WHITESPACE"," ",107],["T_VARIABLE","$this",107],["T_OBJECT_OPERATOR","->",107],["T_STRING","_apiKey",107],")",";",["T_WHITESPACE","\n        ",107],"}",["T_WHITESPACE"," ",108],["T_ELSE","else",108],["T_WHITESPACE"," ",108],"{",["T_WHITESPACE","\n            ",108],["T_COMMENT","\/\/login\/APIKey authentication\n",109],["T_WHITESPACE","            ",110],["T_VARIABLE","$this",110],["T_OBJECT_OPERATOR","->",110],["T_STRING","getHttpClient",110],"(",")",["T_OBJECT_OPERATOR","->",110],["T_STRING","setParameterGet",110],"(",["T_CONSTANT_ENCAPSED_STRING","'login'",110],",",["T_VARIABLE","$this",110],["T_OBJECT_OPERATOR","->",110],["T_STRING","_loginName",110],")",";",["T_WHITESPACE","\n            ",110],["T_VARIABLE","$this",111],["T_OBJECT_OPERATOR","->",111],["T_STRING","getHttpClient",111],"(",")",["T_OBJECT_OPERATOR","->",111],["T_STRING","setParameterGet",111],"(",["T_CONSTANT_ENCAPSED_STRING","'apiKey'",111],",",["T_VARIABLE","$this",111],["T_OBJECT_OPERATOR","->",111],["T_STRING","_apiKey",111],")",";",["T_WHITESPACE","\n        ",111],"}",["T_WHITESPACE","\n    ",112],"}",["T_WHITESPACE","\n\n    ",113],["T_DOC_COMMENT","\/**\n     * handle bit.ly response\n     *\n     * @return string\n     * @throws Zend_Service_ShortUrl_Exception\n     *\/",115],["T_WHITESPACE","\n    ",120],["T_PROTECTED","protected",121],["T_WHITESPACE"," ",121],["T_FUNCTION","function",121],["T_WHITESPACE"," ",121],["T_STRING","_processRequest",121],"(",")",["T_WHITESPACE","\n    ",121],"{",["T_WHITESPACE","\n        ",122],["T_VARIABLE","$response",123],["T_WHITESPACE"," ",123],"=",["T_WHITESPACE"," ",123],["T_VARIABLE","$this",123],["T_OBJECT_OPERATOR","->",123],["T_STRING","getHttpClient",123],"(",")",["T_OBJECT_OPERATOR","->",123],["T_STRING","request",123],"(",")",";",["T_WHITESPACE","\n        ",123],["T_IF","if",124],"(",["T_LNUMBER","500",124],["T_WHITESPACE"," ",124],["T_IS_EQUAL","==",124],["T_WHITESPACE"," ",124],["T_VARIABLE","$response",124],["T_OBJECT_OPERATOR","->",124],["T_STRING","getStatus",124],"(",")",")",["T_WHITESPACE"," ",124],"{",["T_WHITESPACE","\n            ",124],["T_THROW","throw",125],["T_WHITESPACE"," ",125],["T_NEW","new",125],["T_WHITESPACE"," ",125],["T_STRING","Zend_Service_ShortUrl_Exception",125],"(",["T_CONSTANT_ENCAPSED_STRING","'Bit.ly :: '",125],".",["T_VARIABLE","$response",125],["T_OBJECT_OPERATOR","->",125],["T_STRING","getBody",125],"(",")",")",";",["T_WHITESPACE","\n        ",125],"}",["T_WHITESPACE","\n        ",126],["T_RETURN","return",127],["T_WHITESPACE"," ",127],["T_VARIABLE","$response",127],["T_OBJECT_OPERATOR","->",127],["T_STRING","getBody",127],"(",")",";",["T_WHITESPACE","\n    ",127],"}",["T_WHITESPACE","\n\n    ",128],["T_DOC_COMMENT","\/**\n     * This function shortens long url\n     *\n     * @param  string $url URL to Shorten\n     * @throws Zend_Service_ShortUrl_Exception if bit.ly reports an error\n     * @return string Shortened Url\n     *\/",130],["T_WHITESPACE","\n    ",136],["T_PUBLIC","public",137],["T_WHITESPACE"," ",137],["T_FUNCTION","function",137],["T_WHITESPACE"," ",137],["T_STRING","shorten",137],"(",["T_VARIABLE","$url",137],")",["T_WHITESPACE","\n    ",137],"{",["T_WHITESPACE","\n        ",138],["T_VARIABLE","$this",139],["T_OBJECT_OPERATOR","->",139],["T_STRING","_validateUri",139],"(",["T_VARIABLE","$url",139],")",";",["T_WHITESPACE","\n        ",139],["T_VARIABLE","$this",140],["T_OBJECT_OPERATOR","->",140],["T_STRING","_setAccessParameter",140],"(",")",";",["T_WHITESPACE","\n\n        ",140],["T_VARIABLE","$this",142],["T_OBJECT_OPERATOR","->",142],["T_STRING","getHttpClient",142],"(",")",["T_OBJECT_OPERATOR","->",142],["T_STRING","setUri",142],"(",["T_VARIABLE","$this",142],["T_OBJECT_OPERATOR","->",142],["T_STRING","_apiUri",142],".",["T_CONSTANT_ENCAPSED_STRING","'\/v3\/shorten'",142],")",";",["T_WHITESPACE","\n        ",142],["T_VARIABLE","$this",143],["T_OBJECT_OPERATOR","->",143],["T_STRING","getHttpClient",143],"(",")",["T_OBJECT_OPERATOR","->",143],["T_STRING","setParameterGet",143],"(",["T_CONSTANT_ENCAPSED_STRING","'longUrl'",143],",",["T_VARIABLE","$url",143],")",";",["T_WHITESPACE","\n        ",143],["T_VARIABLE","$this",144],["T_OBJECT_OPERATOR","->",144],["T_STRING","getHttpClient",144],"(",")",["T_OBJECT_OPERATOR","->",144],["T_STRING","setParameterGet",144],"(",["T_CONSTANT_ENCAPSED_STRING","'format'",144],",",["T_CONSTANT_ENCAPSED_STRING","'txt'",144],")",";",["T_WHITESPACE","\n\n        ",144],["T_RETURN","return",146],["T_WHITESPACE"," ",146],["T_VARIABLE","$this",146],["T_OBJECT_OPERATOR","->",146],["T_STRING","_processRequest",146],"(",")",";",["T_WHITESPACE","\n    ",146],"}",["T_WHITESPACE","\n\n    ",147],["T_DOC_COMMENT","\/**\n     * Reveals target for short URL\n     *\n     * @param  string $shortenedUrl URL to reveal target of\n     * @throws Zend_Service_ShortUrl_Exception if bit.ly reports an error\n     * @return string Unshortened Url\n     *\/",149],["T_WHITESPACE","\n    ",155],["T_PUBLIC","public",156],["T_WHITESPACE"," ",156],["T_FUNCTION","function",156],["T_WHITESPACE"," ",156],["T_STRING","unshorten",156],"(",["T_VARIABLE","$shortenedUrl",156],")",["T_WHITESPACE","\n    ",156],"{",["T_WHITESPACE","\n        ",157],["T_VARIABLE","$this",158],["T_OBJECT_OPERATOR","->",158],["T_STRING","_validateUri",158],"(",["T_VARIABLE","$shortenedUrl",158],")",";",["T_WHITESPACE","\n        ",158],["T_VARIABLE","$this",159],["T_OBJECT_OPERATOR","->",159],["T_STRING","_setAccessParameter",159],"(",")",";",["T_WHITESPACE","\n\n        ",159],["T_VARIABLE","$this",161],["T_OBJECT_OPERATOR","->",161],["T_STRING","getHttpClient",161],"(",")",["T_OBJECT_OPERATOR","->",161],["T_STRING","setUri",161],"(",["T_VARIABLE","$this",161],["T_OBJECT_OPERATOR","->",161],["T_STRING","_apiUri",161],".",["T_CONSTANT_ENCAPSED_STRING","'\/v3\/expand'",161],")",";",["T_WHITESPACE","\n        ",161],["T_VARIABLE","$this",162],["T_OBJECT_OPERATOR","->",162],["T_STRING","getHttpClient",162],"(",")",["T_OBJECT_OPERATOR","->",162],["T_STRING","setParameterGet",162],"(",["T_CONSTANT_ENCAPSED_STRING","'shortUrl'",162],",",["T_VARIABLE","$shortenedUrl",162],")",";",["T_WHITESPACE","\n        ",162],["T_VARIABLE","$this",163],["T_OBJECT_OPERATOR","->",163],["T_STRING","getHttpClient",163],"(",")",["T_OBJECT_OPERATOR","->",163],["T_STRING","setParameterGet",163],"(",["T_CONSTANT_ENCAPSED_STRING","'format'",163],",",["T_CONSTANT_ENCAPSED_STRING","'txt'",163],")",";",["T_WHITESPACE","\n\n        ",163],["T_RETURN","return",165],["T_WHITESPACE"," ",165],["T_VARIABLE","$this",165],["T_OBJECT_OPERATOR","->",165],["T_STRING","_processRequest",165],"(",")",";",["T_WHITESPACE","\n    ",165],"}",["T_WHITESPACE","\n",166],"}",["T_WHITESPACE","\n",167]]
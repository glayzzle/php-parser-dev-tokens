[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Zend Framework\n *\n * LICENSE\n *\n * This source file is subject to the new BSD license that is bundled\n * with this package in the file LICENSE.txt.\n * It is also available through the world-wide-web at this URL:\n * http:\/\/framework.zend.com\/license\/new-bsd\n * If you did not receive a copy of the license and are unable to\n * obtain it through the world-wide-web, please send an email\n * to license@zend.com so we can send you a copy immediately.\n *\n * @category   Zend\n * @package    Zend_Wildfire\n * @subpackage Channel\n * @copyright  Copyright (c) 2005-2015 Zend Technologies USA Inc. (http:\/\/www.zend.com)\n * @license    http:\/\/framework.zend.com\/license\/new-bsd     New BSD License\n * @version    $Id$\n *\/",2],["T_WHITESPACE","\n\n",21],["T_DOC_COMMENT","\/** Zend_Wildfire_Channel_Interface *\/",23],["T_WHITESPACE","\n",23],["T_COMMENT","#require_once 'Zend\/Wildfire\/Channel\/Interface.php';\n",24],["T_WHITESPACE","\n",25],["T_DOC_COMMENT","\/** Zend_Controller_Request_Abstract *\/",26],["T_WHITESPACE","\n",26],["T_COMMENT","#require_once('Zend\/Controller\/Request\/Abstract.php');\n",27],["T_WHITESPACE","\n",28],["T_DOC_COMMENT","\/** Zend_Controller_Response_Abstract *\/",29],["T_WHITESPACE","\n",29],["T_COMMENT","#require_once('Zend\/Controller\/Response\/Abstract.php');\n",30],["T_WHITESPACE","\n",31],["T_DOC_COMMENT","\/** Zend_Controller_Plugin_Abstract *\/",32],["T_WHITESPACE","\n",32],["T_COMMENT","#require_once 'Zend\/Controller\/Plugin\/Abstract.php';\n",33],["T_WHITESPACE","\n",34],["T_DOC_COMMENT","\/** Zend_Wildfire_Protocol_JsonStream *\/",35],["T_WHITESPACE","\n",35],["T_COMMENT","#require_once 'Zend\/Wildfire\/Protocol\/JsonStream.php';\n",36],["T_WHITESPACE","\n",37],["T_DOC_COMMENT","\/** Zend_Controller_Front **\/",38],["T_WHITESPACE","\n",38],["T_COMMENT","#require_once 'Zend\/Controller\/Front.php';\n",39],["T_WHITESPACE","\n",40],["T_DOC_COMMENT","\/**\n * Implements communication via HTTP request and response headers for Wildfire Protocols.\n *\n * @category   Zend\n * @package    Zend_Wildfire\n * @subpackage Channel\n * @copyright  Copyright (c) 2005-2015 Zend Technologies USA Inc. (http:\/\/www.zend.com)\n * @license    http:\/\/framework.zend.com\/license\/new-bsd     New BSD License\n *\/",41],["T_WHITESPACE","\n",49],["T_CLASS","class",50],["T_WHITESPACE"," ",50],["T_STRING","Zend_Wildfire_Channel_HttpHeaders",50],["T_WHITESPACE"," ",50],["T_EXTENDS","extends",50],["T_WHITESPACE"," ",50],["T_STRING","Zend_Controller_Plugin_Abstract",50],["T_WHITESPACE"," ",50],["T_IMPLEMENTS","implements",50],["T_WHITESPACE"," ",50],["T_STRING","Zend_Wildfire_Channel_Interface",50],["T_WHITESPACE","\n",50],"{",["T_WHITESPACE","\n    ",51],["T_DOC_COMMENT","\/**\n     * The string to be used to prefix the headers.\n     * @var string\n     *\/",52],["T_WHITESPACE","\n    ",55],["T_PROTECTED","protected",56],["T_WHITESPACE"," ",56],["T_STATIC","static",56],["T_WHITESPACE"," ",56],["T_VARIABLE","$_headerPrefix",56],["T_WHITESPACE"," ",56],"=",["T_WHITESPACE"," ",56],["T_CONSTANT_ENCAPSED_STRING","'X-WF-'",56],";",["T_WHITESPACE","\n\n    ",56],["T_DOC_COMMENT","\/**\n     * Singleton instance\n     * @var Zend_Wildfire_Channel_HttpHeaders\n     *\/",58],["T_WHITESPACE","\n    ",61],["T_PROTECTED","protected",62],["T_WHITESPACE"," ",62],["T_STATIC","static",62],["T_WHITESPACE"," ",62],["T_VARIABLE","$_instance",62],["T_WHITESPACE"," ",62],"=",["T_WHITESPACE"," ",62],["T_STRING","null",62],";",["T_WHITESPACE","\n\n    ",62],["T_DOC_COMMENT","\/**\n     * The index of the plugin in the controller dispatch loop plugin stack\n     * @var integer\n     *\/",64],["T_WHITESPACE","\n    ",67],["T_PROTECTED","protected",68],["T_WHITESPACE"," ",68],["T_STATIC","static",68],["T_WHITESPACE"," ",68],["T_VARIABLE","$_controllerPluginStackIndex",68],["T_WHITESPACE"," ",68],"=",["T_WHITESPACE"," ",68],["T_LNUMBER","999",68],";",["T_WHITESPACE","\n\n    ",68],["T_DOC_COMMENT","\/**\n     * The protocol instances for this channel\n     * @var array\n     *\/",70],["T_WHITESPACE","\n    ",73],["T_PROTECTED","protected",74],["T_WHITESPACE"," ",74],["T_VARIABLE","$_protocols",74],["T_WHITESPACE"," ",74],"=",["T_WHITESPACE"," ",74],["T_STRING","null",74],";",["T_WHITESPACE","\n\n    ",74],["T_DOC_COMMENT","\/**\n     * Initialize singleton instance.\n     *\n     * @param string $class OPTIONAL Subclass of Zend_Wildfire_Channel_HttpHeaders\n     * @return Zend_Wildfire_Channel_HttpHeaders Returns the singleton Zend_Wildfire_Channel_HttpHeaders instance\n     * @throws Zend_Wildfire_Exception\n     *\/",76],["T_WHITESPACE","\n    ",82],["T_PUBLIC","public",83],["T_WHITESPACE"," ",83],["T_STATIC","static",83],["T_WHITESPACE"," ",83],["T_FUNCTION","function",83],["T_WHITESPACE"," ",83],["T_STRING","init",83],"(",["T_VARIABLE","$class",83],["T_WHITESPACE"," ",83],"=",["T_WHITESPACE"," ",83],["T_STRING","null",83],")",["T_WHITESPACE","\n    ",83],"{",["T_WHITESPACE","\n        ",84],["T_IF","if",85],["T_WHITESPACE"," ",85],"(",["T_STRING","self",85],["T_DOUBLE_COLON","::",85],["T_VARIABLE","$_instance",85],["T_WHITESPACE"," ",85],["T_IS_NOT_IDENTICAL","!==",85],["T_WHITESPACE"," ",85],["T_STRING","null",85],")",["T_WHITESPACE"," ",85],"{",["T_WHITESPACE","\n            ",85],["T_COMMENT","#require_once 'Zend\/Wildfire\/Exception.php';\n",86],["T_WHITESPACE","            ",87],["T_THROW","throw",87],["T_WHITESPACE"," ",87],["T_NEW","new",87],["T_WHITESPACE"," ",87],["T_STRING","Zend_Wildfire_Exception",87],"(",["T_CONSTANT_ENCAPSED_STRING","'Singleton instance of Zend_Wildfire_Channel_HttpHeaders already exists!'",87],")",";",["T_WHITESPACE","\n        ",87],"}",["T_WHITESPACE","\n        ",88],["T_IF","if",89],["T_WHITESPACE"," ",89],"(",["T_VARIABLE","$class",89],["T_WHITESPACE"," ",89],["T_IS_NOT_IDENTICAL","!==",89],["T_WHITESPACE"," ",89],["T_STRING","null",89],")",["T_WHITESPACE"," ",89],"{",["T_WHITESPACE","\n            ",89],["T_IF","if",90],["T_WHITESPACE"," ",90],"(","!",["T_STRING","is_string",90],"(",["T_VARIABLE","$class",90],")",")",["T_WHITESPACE"," ",90],"{",["T_WHITESPACE","\n                ",90],["T_COMMENT","#require_once 'Zend\/Wildfire\/Exception.php';\n",91],["T_WHITESPACE","                ",92],["T_THROW","throw",92],["T_WHITESPACE"," ",92],["T_NEW","new",92],["T_WHITESPACE"," ",92],["T_STRING","Zend_Wildfire_Exception",92],"(",["T_CONSTANT_ENCAPSED_STRING","'Third argument is not a class string'",92],")",";",["T_WHITESPACE","\n            ",92],"}",["T_WHITESPACE","\n\n            ",93],["T_IF","if",95],["T_WHITESPACE"," ",95],"(","!",["T_STRING","class_exists",95],"(",["T_VARIABLE","$class",95],")",")",["T_WHITESPACE"," ",95],"{",["T_WHITESPACE","\n                ",95],["T_COMMENT","#require_once 'Zend\/Loader.php';\n",96],["T_WHITESPACE","                ",97],["T_STRING","Zend_Loader",97],["T_DOUBLE_COLON","::",97],["T_STRING","loadClass",97],"(",["T_VARIABLE","$class",97],")",";",["T_WHITESPACE","\n            ",97],"}",["T_WHITESPACE","\n\n            ",98],["T_STRING","self",100],["T_DOUBLE_COLON","::",100],["T_VARIABLE","$_instance",100],["T_WHITESPACE"," ",100],"=",["T_WHITESPACE"," ",100],["T_NEW","new",100],["T_WHITESPACE"," ",100],["T_VARIABLE","$class",100],"(",")",";",["T_WHITESPACE","\n\n            ",100],["T_IF","if",102],["T_WHITESPACE"," ",102],"(","!",["T_STRING","self",102],["T_DOUBLE_COLON","::",102],["T_VARIABLE","$_instance",102],["T_WHITESPACE"," ",102],["T_INSTANCEOF","instanceof",102],["T_WHITESPACE"," ",102],["T_STRING","Zend_Wildfire_Channel_HttpHeaders",102],")",["T_WHITESPACE"," ",102],"{",["T_WHITESPACE","\n                ",102],["T_STRING","self",103],["T_DOUBLE_COLON","::",103],["T_VARIABLE","$_instance",103],["T_WHITESPACE"," ",103],"=",["T_WHITESPACE"," ",103],["T_STRING","null",103],";",["T_WHITESPACE","\n                ",103],["T_COMMENT","#require_once 'Zend\/Wildfire\/Exception.php';\n",104],["T_WHITESPACE","                ",105],["T_THROW","throw",105],["T_WHITESPACE"," ",105],["T_NEW","new",105],["T_WHITESPACE"," ",105],["T_STRING","Zend_Wildfire_Exception",105],"(",["T_CONSTANT_ENCAPSED_STRING","'Invalid class to third argument. Must be subclass of Zend_Wildfire_Channel_HttpHeaders.'",105],")",";",["T_WHITESPACE","\n            ",105],"}",["T_WHITESPACE","\n        ",106],"}",["T_WHITESPACE"," ",107],["T_ELSE","else",107],["T_WHITESPACE"," ",107],"{",["T_WHITESPACE","\n            ",107],["T_STRING","self",108],["T_DOUBLE_COLON","::",108],["T_VARIABLE","$_instance",108],["T_WHITESPACE"," ",108],"=",["T_WHITESPACE"," ",108],["T_NEW","new",108],["T_WHITESPACE"," ",108],["T_STRING","self",108],"(",")",";",["T_WHITESPACE","\n        ",108],"}",["T_WHITESPACE","\n\n        ",109],["T_RETURN","return",111],["T_WHITESPACE"," ",111],["T_STRING","self",111],["T_DOUBLE_COLON","::",111],["T_VARIABLE","$_instance",111],";",["T_WHITESPACE","\n    ",111],"}",["T_WHITESPACE","\n\n\n    ",112],["T_DOC_COMMENT","\/**\n     * Get or create singleton instance\n     *\n     * @param bool $skipCreate True if an instance should not be created\n     * @return Zend_Wildfire_Channel_HttpHeaders\n     *\/",115],["T_WHITESPACE","\n    ",120],["T_PUBLIC","public",121],["T_WHITESPACE"," ",121],["T_STATIC","static",121],["T_WHITESPACE"," ",121],["T_FUNCTION","function",121],["T_WHITESPACE"," ",121],["T_STRING","getInstance",121],"(",["T_VARIABLE","$skipCreate",121],"=",["T_STRING","false",121],")",["T_WHITESPACE","\n    ",121],"{",["T_WHITESPACE","\n        ",122],["T_IF","if",123],["T_WHITESPACE"," ",123],"(",["T_STRING","self",123],["T_DOUBLE_COLON","::",123],["T_VARIABLE","$_instance",123],["T_IS_IDENTICAL","===",123],["T_STRING","null",123],["T_WHITESPACE"," ",123],["T_BOOLEAN_AND","&&",123],["T_WHITESPACE"," ",123],["T_VARIABLE","$skipCreate",123],["T_IS_NOT_IDENTICAL","!==",123],["T_STRING","true",123],")",["T_WHITESPACE"," ",123],"{",["T_WHITESPACE","\n            ",123],["T_RETURN","return",124],["T_WHITESPACE"," ",124],["T_STRING","self",124],["T_DOUBLE_COLON","::",124],["T_STRING","init",124],"(",")",";",["T_WHITESPACE","\n        ",124],"}",["T_WHITESPACE","\n        ",125],["T_RETURN","return",126],["T_WHITESPACE"," ",126],["T_STRING","self",126],["T_DOUBLE_COLON","::",126],["T_VARIABLE","$_instance",126],";",["T_WHITESPACE","\n    ",126],"}",["T_WHITESPACE","\n\n    ",127],["T_DOC_COMMENT","\/**\n     * Destroys the singleton instance\n     *\n     * Primarily used for testing.\n     *\n     * @return void\n     *\/",129],["T_WHITESPACE","\n    ",135],["T_PUBLIC","public",136],["T_WHITESPACE"," ",136],["T_STATIC","static",136],["T_WHITESPACE"," ",136],["T_FUNCTION","function",136],["T_WHITESPACE"," ",136],["T_STRING","destroyInstance",136],"(",")",["T_WHITESPACE","\n    ",136],"{",["T_WHITESPACE","\n        ",137],["T_STRING","self",138],["T_DOUBLE_COLON","::",138],["T_VARIABLE","$_instance",138],["T_WHITESPACE"," ",138],"=",["T_WHITESPACE"," ",138],["T_STRING","null",138],";",["T_WHITESPACE","\n    ",138],"}",["T_WHITESPACE","\n\n    ",139],["T_DOC_COMMENT","\/**\n     * Get the instance of a give protocol for this channel\n     *\n     * @param string $uri The URI for the protocol\n     * @return object Returns the protocol instance for the diven URI\n     *\/",141],["T_WHITESPACE","\n    ",146],["T_PUBLIC","public",147],["T_WHITESPACE"," ",147],["T_FUNCTION","function",147],["T_WHITESPACE"," ",147],["T_STRING","getProtocol",147],"(",["T_VARIABLE","$uri",147],")",["T_WHITESPACE","\n    ",147],"{",["T_WHITESPACE","\n        ",148],["T_IF","if",149],["T_WHITESPACE"," ",149],"(","!",["T_ISSET","isset",149],"(",["T_VARIABLE","$this",149],["T_OBJECT_OPERATOR","->",149],["T_STRING","_protocols",149],"[",["T_VARIABLE","$uri",149],"]",")",")",["T_WHITESPACE"," ",149],"{",["T_WHITESPACE","\n            ",149],["T_VARIABLE","$this",150],["T_OBJECT_OPERATOR","->",150],["T_STRING","_protocols",150],"[",["T_VARIABLE","$uri",150],"]",["T_WHITESPACE"," ",150],"=",["T_WHITESPACE"," ",150],["T_VARIABLE","$this",150],["T_OBJECT_OPERATOR","->",150],["T_STRING","_initProtocol",150],"(",["T_VARIABLE","$uri",150],")",";",["T_WHITESPACE","\n        ",150],"}",["T_WHITESPACE","\n\n        ",151],["T_VARIABLE","$this",153],["T_OBJECT_OPERATOR","->",153],["T_STRING","_registerControllerPlugin",153],"(",")",";",["T_WHITESPACE","\n\n        ",153],["T_RETURN","return",155],["T_WHITESPACE"," ",155],["T_VARIABLE","$this",155],["T_OBJECT_OPERATOR","->",155],["T_STRING","_protocols",155],"[",["T_VARIABLE","$uri",155],"]",";",["T_WHITESPACE","\n    ",155],"}",["T_WHITESPACE","\n\n    ",156],["T_DOC_COMMENT","\/**\n     * Initialize a new protocol\n     *\n     * @param string $uri The URI for the protocol to be initialized\n     * @return object Returns the new initialized protocol instance\n     * @throws Zend_Wildfire_Exception\n     *\/",158],["T_WHITESPACE","\n    ",164],["T_PROTECTED","protected",165],["T_WHITESPACE"," ",165],["T_FUNCTION","function",165],["T_WHITESPACE"," ",165],["T_STRING","_initProtocol",165],"(",["T_VARIABLE","$uri",165],")",["T_WHITESPACE","\n    ",165],"{",["T_WHITESPACE","\n        ",166],["T_SWITCH","switch",167],["T_WHITESPACE"," ",167],"(",["T_VARIABLE","$uri",167],")",["T_WHITESPACE"," ",167],"{",["T_WHITESPACE","\n            ",167],["T_CASE","case",168],["T_WHITESPACE"," ",168],["T_STRING","Zend_Wildfire_Protocol_JsonStream",168],["T_DOUBLE_COLON","::",168],["T_STRING","PROTOCOL_URI",168],";",["T_WHITESPACE","\n                ",168],["T_RETURN","return",169],["T_WHITESPACE"," ",169],["T_NEW","new",169],["T_WHITESPACE"," ",169],["T_STRING","Zend_Wildfire_Protocol_JsonStream",169],"(",")",";",["T_WHITESPACE","\n        ",169],"}",["T_WHITESPACE","\n        ",170],["T_COMMENT","#require_once 'Zend\/Wildfire\/Exception.php';\n",171],["T_WHITESPACE","        ",172],["T_THROW","throw",172],["T_WHITESPACE"," ",172],["T_NEW","new",172],["T_WHITESPACE"," ",172],["T_STRING","Zend_Wildfire_Exception",172],"(",["T_CONSTANT_ENCAPSED_STRING","'Tyring to initialize unknown protocol for URI \"'",172],".",["T_VARIABLE","$uri",172],".",["T_CONSTANT_ENCAPSED_STRING","'\".'",172],")",";",["T_WHITESPACE","\n    ",172],"}",["T_WHITESPACE","\n\n\n    ",173],["T_DOC_COMMENT","\/**\n     * Flush all data from all protocols and send all data to response headers.\n     *\n     * @return boolean Returns TRUE if data was flushed\n     *\/",176],["T_WHITESPACE","\n    ",180],["T_PUBLIC","public",181],["T_WHITESPACE"," ",181],["T_FUNCTION","function",181],["T_WHITESPACE"," ",181],["T_STRING","flush",181],"(",")",["T_WHITESPACE","\n    ",181],"{",["T_WHITESPACE","\n        ",182],["T_IF","if",183],["T_WHITESPACE"," ",183],"(","!",["T_VARIABLE","$this",183],["T_OBJECT_OPERATOR","->",183],["T_STRING","_protocols",183],["T_WHITESPACE"," ",183],["T_BOOLEAN_OR","||",183],["T_WHITESPACE"," ",183],"!",["T_VARIABLE","$this",183],["T_OBJECT_OPERATOR","->",183],["T_STRING","isReady",183],"(",")",")",["T_WHITESPACE"," ",183],"{",["T_WHITESPACE","\n            ",183],["T_RETURN","return",184],["T_WHITESPACE"," ",184],["T_STRING","false",184],";",["T_WHITESPACE","\n        ",184],"}",["T_WHITESPACE","\n\n        ",185],["T_FOREACH","foreach",187],["T_WHITESPACE"," ",187],"(",["T_WHITESPACE"," ",187],["T_VARIABLE","$this",187],["T_OBJECT_OPERATOR","->",187],["T_STRING","_protocols",187],["T_WHITESPACE"," ",187],["T_AS","as",187],["T_WHITESPACE"," ",187],["T_VARIABLE","$protocol",187],["T_WHITESPACE"," ",187],")",["T_WHITESPACE"," ",187],"{",["T_WHITESPACE","\n\n            ",187],["T_VARIABLE","$payload",189],["T_WHITESPACE"," ",189],"=",["T_WHITESPACE"," ",189],["T_VARIABLE","$protocol",189],["T_OBJECT_OPERATOR","->",189],["T_STRING","getPayload",189],"(",["T_VARIABLE","$this",189],")",";",["T_WHITESPACE","\n\n            ",189],["T_IF","if",191],["T_WHITESPACE"," ",191],"(",["T_VARIABLE","$payload",191],")",["T_WHITESPACE"," ",191],"{",["T_WHITESPACE","\n                ",191],["T_FOREACH","foreach",192],"(",["T_WHITESPACE"," ",192],["T_VARIABLE","$payload",192],["T_WHITESPACE"," ",192],["T_AS","as",192],["T_WHITESPACE"," ",192],["T_VARIABLE","$message",192],["T_WHITESPACE"," ",192],")",["T_WHITESPACE"," ",192],"{",["T_WHITESPACE","\n\n                    ",192],["T_VARIABLE","$this",194],["T_OBJECT_OPERATOR","->",194],["T_STRING","getResponse",194],"(",")",["T_OBJECT_OPERATOR","->",194],["T_STRING","setHeader",194],"(",["T_STRING","self",194],["T_DOUBLE_COLON","::",194],["T_VARIABLE","$_headerPrefix",194],".",["T_VARIABLE","$message",194],"[",["T_LNUMBER","0",194],"]",",",["T_WHITESPACE","\n                                                    ",194],["T_VARIABLE","$message",195],"[",["T_LNUMBER","1",195],"]",",",["T_WHITESPACE"," ",195],["T_STRING","true",195],")",";",["T_WHITESPACE","\n                ",195],"}",["T_WHITESPACE","\n            ",196],"}",["T_WHITESPACE","\n        ",197],"}",["T_WHITESPACE","\n        ",198],["T_RETURN","return",199],["T_WHITESPACE"," ",199],["T_STRING","true",199],";",["T_WHITESPACE","\n    ",199],"}",["T_WHITESPACE","\n\n    ",200],["T_DOC_COMMENT","\/**\n     * Set the index of the plugin in the controller dispatch loop plugin stack\n     *\n     * @param integer $index The index of the plugin in the stack\n     * @return integer The previous index.\n     *\/",202],["T_WHITESPACE","\n    ",207],["T_PUBLIC","public",208],["T_WHITESPACE"," ",208],["T_STATIC","static",208],["T_WHITESPACE"," ",208],["T_FUNCTION","function",208],["T_WHITESPACE"," ",208],["T_STRING","setControllerPluginStackIndex",208],"(",["T_VARIABLE","$index",208],")",["T_WHITESPACE","\n    ",208],"{",["T_WHITESPACE","\n        ",209],["T_VARIABLE","$previous",210],["T_WHITESPACE"," ",210],"=",["T_WHITESPACE"," ",210],["T_STRING","self",210],["T_DOUBLE_COLON","::",210],["T_VARIABLE","$_controllerPluginStackIndex",210],";",["T_WHITESPACE","\n        ",210],["T_STRING","self",211],["T_DOUBLE_COLON","::",211],["T_VARIABLE","$_controllerPluginStackIndex",211],["T_WHITESPACE"," ",211],"=",["T_WHITESPACE"," ",211],["T_VARIABLE","$index",211],";",["T_WHITESPACE","\n        ",211],["T_RETURN","return",212],["T_WHITESPACE"," ",212],["T_VARIABLE","$previous",212],";",["T_WHITESPACE","\n    ",212],"}",["T_WHITESPACE","\n\n    ",213],["T_DOC_COMMENT","\/**\n     * Register this object as a controller plugin.\n     *\n     * @return void\n     *\/",215],["T_WHITESPACE","\n    ",219],["T_PROTECTED","protected",220],["T_WHITESPACE"," ",220],["T_FUNCTION","function",220],["T_WHITESPACE"," ",220],["T_STRING","_registerControllerPlugin",220],"(",")",["T_WHITESPACE","\n    ",220],"{",["T_WHITESPACE","\n        ",221],["T_VARIABLE","$controller",222],["T_WHITESPACE"," ",222],"=",["T_WHITESPACE"," ",222],["T_STRING","Zend_Controller_Front",222],["T_DOUBLE_COLON","::",222],["T_STRING","getInstance",222],"(",")",";",["T_WHITESPACE","\n        ",222],["T_IF","if",223],["T_WHITESPACE"," ",223],"(","!",["T_VARIABLE","$controller",223],["T_OBJECT_OPERATOR","->",223],["T_STRING","hasPlugin",223],"(",["T_STRING","get_class",223],"(",["T_VARIABLE","$this",223],")",")",")",["T_WHITESPACE"," ",223],"{",["T_WHITESPACE","\n            ",223],["T_VARIABLE","$controller",224],["T_OBJECT_OPERATOR","->",224],["T_STRING","registerPlugin",224],"(",["T_VARIABLE","$this",224],",",["T_WHITESPACE"," ",224],["T_STRING","self",224],["T_DOUBLE_COLON","::",224],["T_VARIABLE","$_controllerPluginStackIndex",224],")",";",["T_WHITESPACE","\n        ",224],"}",["T_WHITESPACE","\n    ",225],"}",["T_WHITESPACE","\n\n\n    ",226],["T_COMMENT","\/*\n     * Zend_Wildfire_Channel_Interface\n     *\/",229],["T_WHITESPACE","\n\n    ",231],["T_DOC_COMMENT","\/**\n     * Determine if channel is ready.\n     *\n     * The channel is ready as long as the request and response objects are initialized,\n     * can send headers and the FirePHP header exists in the User-Agent.\n     *\n     * If the header does not exist in the User-Agent, no appropriate client\n     * is making this request and the messages should not be sent.\n     *\n     * A timing issue arises when messages are logged before the request\/response\n     * objects are initialized. In this case we do not yet know if the client\n     * will be able to accept the messages. If we consequently indicate that\n     * the channel is not ready, these messages will be dropped which is in\n     * most cases not the intended behaviour. The intent is to send them at the\n     * end of the request when the request\/response objects will be available\n     * for sure.\n     *\n     * If the request\/response objects are not yet initialized we assume if messages are\n     * logged, the client will be able to receive them. As soon as the request\/response\n     * objects are availoable and a message is logged this assumption is challenged.\n     * If the client cannot accept the messages any further messages are dropped\n     * and messages sent prior are kept but discarded when the channel is finally\n     * flushed at the end of the request.\n     *\n     * When the channel is flushed the $forceCheckRequest option is used to force\n     * a check of the request\/response objects. This is the last verification to ensure\n     * messages are only sent when the client can accept them.\n     *\n     * @param boolean $forceCheckRequest OPTIONAL Set to TRUE if the request must be checked\n     * @return boolean Returns TRUE if channel is ready.\n     *\/",233],["T_WHITESPACE","\n    ",263],["T_PUBLIC","public",264],["T_WHITESPACE"," ",264],["T_FUNCTION","function",264],["T_WHITESPACE"," ",264],["T_STRING","isReady",264],"(",["T_VARIABLE","$forceCheckRequest",264],"=",["T_STRING","false",264],")",["T_WHITESPACE","\n    ",264],"{",["T_WHITESPACE","\n        ",265],["T_IF","if",266],["T_WHITESPACE"," ",266],"(","!",["T_VARIABLE","$forceCheckRequest",266],["T_WHITESPACE","\n            ",266],["T_BOOLEAN_AND","&&",267],["T_WHITESPACE"," ",267],"!",["T_VARIABLE","$this",267],["T_OBJECT_OPERATOR","->",267],["T_STRING","_request",267],["T_WHITESPACE","\n            ",267],["T_BOOLEAN_AND","&&",268],["T_WHITESPACE"," ",268],"!",["T_VARIABLE","$this",268],["T_OBJECT_OPERATOR","->",268],["T_STRING","_response",268],["T_WHITESPACE","\n        ",268],")",["T_WHITESPACE"," ",269],"{",["T_WHITESPACE","\n            ",269],["T_RETURN","return",270],["T_WHITESPACE"," ",270],["T_STRING","true",270],";",["T_WHITESPACE","\n        ",270],"}",["T_WHITESPACE","\n\n        ",271],["T_IF","if",273],["T_WHITESPACE"," ",273],"(","!","(",["T_VARIABLE","$this",273],["T_OBJECT_OPERATOR","->",273],["T_STRING","getRequest",273],"(",")",["T_WHITESPACE"," ",273],["T_INSTANCEOF","instanceof",273],["T_WHITESPACE"," ",273],["T_STRING","Zend_Controller_Request_Http",273],")",")",["T_WHITESPACE"," ",273],"{",["T_WHITESPACE","\n            ",273],["T_RETURN","return",274],["T_WHITESPACE"," ",274],["T_STRING","false",274],";",["T_WHITESPACE","\n        ",274],"}",["T_WHITESPACE","\n\n        ",275],["T_RETURN","return",277],["T_WHITESPACE"," ",277],"(",["T_VARIABLE","$this",277],["T_OBJECT_OPERATOR","->",277],["T_STRING","getResponse",277],"(",")",["T_OBJECT_OPERATOR","->",277],["T_STRING","canSendHeaders",277],"(",")",["T_WHITESPACE","\n                ",277],["T_BOOLEAN_AND","&&",278],["T_WHITESPACE"," ",278],"(",["T_STRING","preg_match_all",278],"(",["T_WHITESPACE","\n                        ",278],["T_CONSTANT_ENCAPSED_STRING","'\/\\s?FirePHP\\\/([\\.\\d]*)\\s?\/si'",279],",",["T_WHITESPACE","\n                        ",279],["T_VARIABLE","$this",280],["T_OBJECT_OPERATOR","->",280],["T_STRING","getRequest",280],"(",")",["T_OBJECT_OPERATOR","->",280],["T_STRING","getHeader",280],"(",["T_CONSTANT_ENCAPSED_STRING","'User-Agent'",280],")",",",["T_WHITESPACE","\n                        ",280],["T_VARIABLE","$m",281],["T_WHITESPACE","\n                    ",281],")",["T_WHITESPACE"," ",282],["T_BOOLEAN_OR","||",282],["T_WHITESPACE","\n                    ",282],"(","(",["T_VARIABLE","$header",283],["T_WHITESPACE"," ",283],"=",["T_WHITESPACE"," ",283],["T_VARIABLE","$this",283],["T_OBJECT_OPERATOR","->",283],["T_STRING","getRequest",283],"(",")",["T_OBJECT_OPERATOR","->",283],["T_STRING","getHeader",283],"(",["T_CONSTANT_ENCAPSED_STRING","'X-FirePHP-Version'",283],")",")",["T_WHITESPACE","\n                     ",283],["T_BOOLEAN_AND","&&",284],["T_WHITESPACE"," ",284],["T_STRING","preg_match_all",284],"(",["T_CONSTANT_ENCAPSED_STRING","'\/^([\\.\\d]*)$\/si'",284],",",["T_WHITESPACE"," ",284],["T_VARIABLE","$header",284],",",["T_WHITESPACE"," ",284],["T_VARIABLE","$m",284],")",["T_WHITESPACE","\n                   ",284],")",")",["T_WHITESPACE","\n               ",285],")",";",["T_WHITESPACE","\n    ",286],"}",["T_WHITESPACE","\n\n\n    ",287],["T_COMMENT","\/*\n     * Zend_Controller_Plugin_Abstract\n     *\/",290],["T_WHITESPACE","\n\n    ",292],["T_DOC_COMMENT","\/**\n     * Flush messages to headers as late as possible but before headers have been sent.\n     *\n     * @return void\n     *\/",294],["T_WHITESPACE","\n    ",298],["T_PUBLIC","public",299],["T_WHITESPACE"," ",299],["T_FUNCTION","function",299],["T_WHITESPACE"," ",299],["T_STRING","dispatchLoopShutdown",299],"(",")",["T_WHITESPACE","\n    ",299],"{",["T_WHITESPACE","\n        ",300],["T_VARIABLE","$this",301],["T_OBJECT_OPERATOR","->",301],["T_STRING","flush",301],"(",")",";",["T_WHITESPACE","\n    ",301],"}",["T_WHITESPACE","\n\n    ",302],["T_DOC_COMMENT","\/**\n     * Get the request object\n     *\n     * @return Zend_Controller_Request_Abstract\n     * @throws Zend_Wildfire_Exception\n     *\/",304],["T_WHITESPACE","\n    ",309],["T_PUBLIC","public",310],["T_WHITESPACE"," ",310],["T_FUNCTION","function",310],["T_WHITESPACE"," ",310],["T_STRING","getRequest",310],"(",")",["T_WHITESPACE","\n    ",310],"{",["T_WHITESPACE","\n        ",311],["T_IF","if",312],["T_WHITESPACE"," ",312],"(","!",["T_VARIABLE","$this",312],["T_OBJECT_OPERATOR","->",312],["T_STRING","_request",312],")",["T_WHITESPACE"," ",312],"{",["T_WHITESPACE","\n            ",312],["T_VARIABLE","$controller",313],["T_WHITESPACE"," ",313],"=",["T_WHITESPACE"," ",313],["T_STRING","Zend_Controller_Front",313],["T_DOUBLE_COLON","::",313],["T_STRING","getInstance",313],"(",")",";",["T_WHITESPACE","\n            ",313],["T_VARIABLE","$this",314],["T_OBJECT_OPERATOR","->",314],["T_STRING","setRequest",314],"(",["T_VARIABLE","$controller",314],["T_OBJECT_OPERATOR","->",314],["T_STRING","getRequest",314],"(",")",")",";",["T_WHITESPACE","\n        ",314],"}",["T_WHITESPACE","\n        ",315],["T_IF","if",316],["T_WHITESPACE"," ",316],"(","!",["T_VARIABLE","$this",316],["T_OBJECT_OPERATOR","->",316],["T_STRING","_request",316],")",["T_WHITESPACE"," ",316],"{",["T_WHITESPACE","\n            ",316],["T_COMMENT","#require_once 'Zend\/Wildfire\/Exception.php';\n",317],["T_WHITESPACE","            ",318],["T_THROW","throw",318],["T_WHITESPACE"," ",318],["T_NEW","new",318],["T_WHITESPACE"," ",318],["T_STRING","Zend_Wildfire_Exception",318],"(",["T_CONSTANT_ENCAPSED_STRING","'Request objects not initialized.'",318],")",";",["T_WHITESPACE","\n        ",318],"}",["T_WHITESPACE","\n        ",319],["T_RETURN","return",320],["T_WHITESPACE"," ",320],["T_VARIABLE","$this",320],["T_OBJECT_OPERATOR","->",320],["T_STRING","_request",320],";",["T_WHITESPACE","\n    ",320],"}",["T_WHITESPACE","\n\n    ",321],["T_DOC_COMMENT","\/**\n     * Get the response object\n     *\n     * @return Zend_Controller_Response_Abstract\n     * @throws Zend_Wildfire_Exception\n     *\/",323],["T_WHITESPACE","\n    ",328],["T_PUBLIC","public",329],["T_WHITESPACE"," ",329],["T_FUNCTION","function",329],["T_WHITESPACE"," ",329],["T_STRING","getResponse",329],"(",")",["T_WHITESPACE","\n    ",329],"{",["T_WHITESPACE","\n        ",330],["T_IF","if",331],["T_WHITESPACE"," ",331],"(","!",["T_VARIABLE","$this",331],["T_OBJECT_OPERATOR","->",331],["T_STRING","_response",331],")",["T_WHITESPACE"," ",331],"{",["T_WHITESPACE","\n            ",331],["T_VARIABLE","$response",332],["T_WHITESPACE"," ",332],"=",["T_WHITESPACE"," ",332],["T_STRING","Zend_Controller_Front",332],["T_DOUBLE_COLON","::",332],["T_STRING","getInstance",332],"(",")",["T_OBJECT_OPERATOR","->",332],["T_STRING","getResponse",332],"(",")",";",["T_WHITESPACE","\n            ",332],["T_IF","if",333],["T_WHITESPACE"," ",333],"(",["T_VARIABLE","$response",333],")",["T_WHITESPACE"," ",333],"{",["T_WHITESPACE","\n                ",333],["T_VARIABLE","$this",334],["T_OBJECT_OPERATOR","->",334],["T_STRING","setResponse",334],"(",["T_VARIABLE","$response",334],")",";",["T_WHITESPACE","\n            ",334],"}",["T_WHITESPACE","\n        ",335],"}",["T_WHITESPACE","\n        ",336],["T_IF","if",337],["T_WHITESPACE"," ",337],"(","!",["T_VARIABLE","$this",337],["T_OBJECT_OPERATOR","->",337],["T_STRING","_response",337],")",["T_WHITESPACE"," ",337],"{",["T_WHITESPACE","\n            ",337],["T_COMMENT","#require_once 'Zend\/Wildfire\/Exception.php';\n",338],["T_WHITESPACE","            ",339],["T_THROW","throw",339],["T_WHITESPACE"," ",339],["T_NEW","new",339],["T_WHITESPACE"," ",339],["T_STRING","Zend_Wildfire_Exception",339],"(",["T_CONSTANT_ENCAPSED_STRING","'Response objects not initialized.'",339],")",";",["T_WHITESPACE","\n        ",339],"}",["T_WHITESPACE","\n        ",340],["T_RETURN","return",341],["T_WHITESPACE"," ",341],["T_VARIABLE","$this",341],["T_OBJECT_OPERATOR","->",341],["T_STRING","_response",341],";",["T_WHITESPACE","\n    ",341],"}",["T_WHITESPACE","\n",342],"}",["T_WHITESPACE","\n",343]]
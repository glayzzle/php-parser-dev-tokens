[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Zend Framework\n *\n * LICENSE\n *\n * This source file is subject to the new BSD license that is bundled\n * with this package in the file LICENSE.txt.\n * It is also available through the world-wide-web at this URL:\n * http:\/\/framework.zend.com\/license\/new-bsd\n * If you did not receive a copy of the license and are unable to\n * obtain it through the world-wide-web, please send an email\n * to license@zend.com so we can send you a copy immediately.\n *\n * @category   Zend\n * @package    Zend_Feed_Pubsubhubbub\n * @subpackage Callback\n * @copyright  Copyright (c) 2005-2015 Zend Technologies USA Inc. (http:\/\/www.zend.com)\n * @license    http:\/\/framework.zend.com\/license\/new-bsd     New BSD License\n * @version    $Id$\n *\/",2],["T_WHITESPACE","\n\n",21],["T_DOC_COMMENT","\/**\n * @see Zend_Feed_Pubsubhubbub_CallbackInterface\n *\/",23],["T_WHITESPACE","\n",25],["T_COMMENT","#require_once 'Zend\/Feed\/Pubsubhubbub\/CallbackInterface.php';\n",26],["T_WHITESPACE","\n",27],["T_DOC_COMMENT","\/**\n * @see Zend_Feed_Pubsubhubbub_HttpResponse\n *\/",28],["T_WHITESPACE","\n",30],["T_COMMENT","#require_once 'Zend\/Feed\/Pubsubhubbub\/HttpResponse.php';\n",31],["T_WHITESPACE","\n",32],["T_DOC_COMMENT","\/**\n * @category   Zend\n * @package    Zend_Feed_Pubsubhubbub\n * @subpackage Callback\n * @copyright  Copyright (c) 2005-2015 Zend Technologies USA Inc. (http:\/\/www.zend.com)\n * @license    http:\/\/framework.zend.com\/license\/new-bsd     New BSD License\n *\/",33],["T_WHITESPACE","\n",39],["T_ABSTRACT","abstract",40],["T_WHITESPACE"," ",40],["T_CLASS","class",40],["T_WHITESPACE"," ",40],["T_STRING","Zend_Feed_Pubsubhubbub_CallbackAbstract",40],["T_WHITESPACE","\n    ",40],["T_IMPLEMENTS","implements",41],["T_WHITESPACE"," ",41],["T_STRING","Zend_Feed_Pubsubhubbub_CallbackInterface",41],["T_WHITESPACE","\n",41],"{",["T_WHITESPACE","\n    ",42],["T_DOC_COMMENT","\/**\n     * An instance of Zend_Feed_Pubsubhubbub_Model_SubscriptionInterface used\n     * to background save any verification tokens associated with a subscription\n     * or other.\n     *\n     * @var Zend_Feed_Pubsubhubbub_Model_SubscriptionInterface\n     *\/",43],["T_WHITESPACE","\n    ",49],["T_PROTECTED","protected",50],["T_WHITESPACE"," ",50],["T_VARIABLE","$_storage",50],["T_WHITESPACE"," ",50],"=",["T_WHITESPACE"," ",50],["T_STRING","null",50],";",["T_WHITESPACE","\n\n    ",50],["T_DOC_COMMENT","\/**\n     * An instance of a class handling Http Responses. This is implemented in\n     * Zend_Feed_Pubsubhubbub_HttpResponse which shares an unenforced interface with\n     * (i.e. not inherited from) Zend_Controller_Response_Http.\n     *\n     * @var Zend_Feed_Pubsubhubbub_HttpResponse|Zend_Controller_Response_Http\n     *\/",52],["T_WHITESPACE","\n    ",58],["T_PROTECTED","protected",59],["T_WHITESPACE"," ",59],["T_VARIABLE","$_httpResponse",59],["T_WHITESPACE"," ",59],"=",["T_WHITESPACE"," ",59],["T_STRING","null",59],";",["T_WHITESPACE","\n\n    ",59],["T_DOC_COMMENT","\/**\n     * The number of Subscribers for which any updates are on behalf of.\n     *\n     * @var int\n     *\/",61],["T_WHITESPACE","\n    ",65],["T_PROTECTED","protected",66],["T_WHITESPACE"," ",66],["T_VARIABLE","$_subscriberCount",66],["T_WHITESPACE"," ",66],"=",["T_WHITESPACE"," ",66],["T_LNUMBER","1",66],";",["T_WHITESPACE","\n\n    ",66],["T_DOC_COMMENT","\/**\n     * Constructor; accepts an array or Zend_Config instance to preset\n     * options for the Subscriber without calling all supported setter\n     * methods in turn.\n     *\n     * @param array|Zend_Config|null $config Options array or Zend_Config instance\n     *\/",68],["T_WHITESPACE","\n    ",74],["T_PUBLIC","public",75],["T_WHITESPACE"," ",75],["T_FUNCTION","function",75],["T_WHITESPACE"," ",75],["T_STRING","__construct",75],"(",["T_VARIABLE","$config",75],["T_WHITESPACE"," ",75],"=",["T_WHITESPACE"," ",75],["T_STRING","null",75],")",["T_WHITESPACE","\n    ",75],"{",["T_WHITESPACE","\n        ",76],["T_IF","if",77],["T_WHITESPACE"," ",77],"(",["T_VARIABLE","$config",77],["T_WHITESPACE"," ",77],["T_IS_NOT_IDENTICAL","!==",77],["T_WHITESPACE"," ",77],["T_STRING","null",77],")",["T_WHITESPACE"," ",77],"{",["T_WHITESPACE","\n            ",77],["T_VARIABLE","$this",78],["T_OBJECT_OPERATOR","->",78],["T_STRING","setConfig",78],"(",["T_VARIABLE","$config",78],")",";",["T_WHITESPACE","\n        ",78],"}",["T_WHITESPACE","\n    ",79],"}",["T_WHITESPACE","\n\n    ",80],["T_DOC_COMMENT","\/**\n     * Process any injected configuration options\n     *\n     * @param  array|Zend_Config $config Options array or Zend_Config instance\n     * @throws Zend_Feed_Pubsubhubbub_Exception\n     * @return Zend_Feed_Pubsubhubbub_CallbackAbstract\n     *\/",82],["T_WHITESPACE","\n    ",88],["T_PUBLIC","public",89],["T_WHITESPACE"," ",89],["T_FUNCTION","function",89],["T_WHITESPACE"," ",89],["T_STRING","setConfig",89],"(",["T_VARIABLE","$config",89],")",["T_WHITESPACE","\n    ",89],"{",["T_WHITESPACE","\n        ",90],["T_IF","if",91],["T_WHITESPACE"," ",91],"(",["T_VARIABLE","$config",91],["T_WHITESPACE"," ",91],["T_INSTANCEOF","instanceof",91],["T_WHITESPACE"," ",91],["T_STRING","Zend_Config",91],")",["T_WHITESPACE"," ",91],"{",["T_WHITESPACE","\n            ",91],["T_VARIABLE","$config",92],["T_WHITESPACE"," ",92],"=",["T_WHITESPACE"," ",92],["T_VARIABLE","$config",92],["T_OBJECT_OPERATOR","->",92],["T_STRING","toArray",92],"(",")",";",["T_WHITESPACE","\n        ",92],"}",["T_WHITESPACE"," ",93],["T_ELSEIF","elseif",93],["T_WHITESPACE"," ",93],"(","!",["T_STRING","is_array",93],"(",["T_VARIABLE","$config",93],")",")",["T_WHITESPACE"," ",93],"{",["T_WHITESPACE","\n            ",93],["T_COMMENT","#require_once 'Zend\/Feed\/Pubsubhubbub\/Exception.php';\n",94],["T_WHITESPACE","            ",95],["T_THROW","throw",95],["T_WHITESPACE"," ",95],["T_NEW","new",95],["T_WHITESPACE"," ",95],["T_STRING","Zend_Feed_Pubsubhubbub_Exception",95],"(",["T_CONSTANT_ENCAPSED_STRING","'Array or Zend_Config object'",95],["T_WHITESPACE","\n            ",95],".",["T_WHITESPACE"," ",96],["T_CONSTANT_ENCAPSED_STRING","'expected, got '",96],["T_WHITESPACE"," ",96],".",["T_WHITESPACE"," ",96],["T_STRING","gettype",96],"(",["T_VARIABLE","$config",96],")",")",";",["T_WHITESPACE","\n        ",96],"}",["T_WHITESPACE","\n        ",97],["T_IF","if",98],["T_WHITESPACE"," ",98],"(",["T_STRING","array_key_exists",98],"(",["T_CONSTANT_ENCAPSED_STRING","'storage'",98],",",["T_WHITESPACE"," ",98],["T_VARIABLE","$config",98],")",")",["T_WHITESPACE"," ",98],"{",["T_WHITESPACE","\n            ",98],["T_VARIABLE","$this",99],["T_OBJECT_OPERATOR","->",99],["T_STRING","setStorage",99],"(",["T_VARIABLE","$config",99],"[",["T_CONSTANT_ENCAPSED_STRING","'storage'",99],"]",")",";",["T_WHITESPACE","\n        ",99],"}",["T_WHITESPACE","\n        ",100],["T_RETURN","return",101],["T_WHITESPACE"," ",101],["T_VARIABLE","$this",101],";",["T_WHITESPACE","\n    ",101],"}",["T_WHITESPACE","\n\n    ",102],["T_DOC_COMMENT","\/**\n     * Send the response, including all headers.\n     * If you wish to handle this via Zend_Controller, use the getter methods\n     * to retrieve any data needed to be set on your HTTP Response object, or\n     * simply give this object the HTTP Response instance to work with for you!\n     *\n     * @return void\n     *\/",104],["T_WHITESPACE","\n    ",111],["T_PUBLIC","public",112],["T_WHITESPACE"," ",112],["T_FUNCTION","function",112],["T_WHITESPACE"," ",112],["T_STRING","sendResponse",112],"(",")",["T_WHITESPACE","\n    ",112],"{",["T_WHITESPACE","\n        ",113],["T_VARIABLE","$this",114],["T_OBJECT_OPERATOR","->",114],["T_STRING","getHttpResponse",114],"(",")",["T_OBJECT_OPERATOR","->",114],["T_STRING","sendResponse",114],"(",")",";",["T_WHITESPACE","\n    ",114],"}",["T_WHITESPACE","\n\n    ",115],["T_DOC_COMMENT","\/**\n     * Sets an instance of Zend_Feed_Pubsubhubbub_Model_SubscriptionInterface used\n     * to background save any verification tokens associated with a subscription\n     * or other.\n     *\n     * @param  Zend_Feed_Pubsubhubbub_Model_SubscriptionInterface $storage\n     * @return Zend_Feed_Pubsubhubbub_CallbackAbstract\n     *\/",117],["T_WHITESPACE","\n    ",124],["T_PUBLIC","public",125],["T_WHITESPACE"," ",125],["T_FUNCTION","function",125],["T_WHITESPACE"," ",125],["T_STRING","setStorage",125],"(",["T_STRING","Zend_Feed_Pubsubhubbub_Model_SubscriptionInterface",125],["T_WHITESPACE"," ",125],["T_VARIABLE","$storage",125],")",["T_WHITESPACE","\n    ",125],"{",["T_WHITESPACE","\n        ",126],["T_VARIABLE","$this",127],["T_OBJECT_OPERATOR","->",127],["T_STRING","_storage",127],["T_WHITESPACE"," ",127],"=",["T_WHITESPACE"," ",127],["T_VARIABLE","$storage",127],";",["T_WHITESPACE","\n        ",127],["T_RETURN","return",128],["T_WHITESPACE"," ",128],["T_VARIABLE","$this",128],";",["T_WHITESPACE","\n    ",128],"}",["T_WHITESPACE","\n\n    ",129],["T_DOC_COMMENT","\/**\n     * Gets an instance of Zend_Feed_Pubsubhubbub_Model_SubscriptionInterface used\n     * to background save any verification tokens associated with a subscription\n     * or other.\n     *\n     * @throws Zend_Feed_Pubsubhubbub_Exception\n     * @return Zend_Feed_Pubsubhubbub_Model_SubscriptionInterface\n     *\/",131],["T_WHITESPACE","\n    ",138],["T_PUBLIC","public",139],["T_WHITESPACE"," ",139],["T_FUNCTION","function",139],["T_WHITESPACE"," ",139],["T_STRING","getStorage",139],"(",")",["T_WHITESPACE","\n    ",139],"{",["T_WHITESPACE","\n        ",140],["T_IF","if",141],["T_WHITESPACE"," ",141],"(",["T_VARIABLE","$this",141],["T_OBJECT_OPERATOR","->",141],["T_STRING","_storage",141],["T_WHITESPACE"," ",141],["T_IS_IDENTICAL","===",141],["T_WHITESPACE"," ",141],["T_STRING","null",141],")",["T_WHITESPACE"," ",141],"{",["T_WHITESPACE","\n            ",141],["T_COMMENT","#require_once 'Zend\/Feed\/Pubsubhubbub\/Exception.php';\n",142],["T_WHITESPACE","            ",143],["T_THROW","throw",143],["T_WHITESPACE"," ",143],["T_NEW","new",143],["T_WHITESPACE"," ",143],["T_STRING","Zend_Feed_Pubsubhubbub_Exception",143],"(",["T_CONSTANT_ENCAPSED_STRING","'No storage object has been'",143],["T_WHITESPACE","\n                ",143],".",["T_WHITESPACE"," ",144],["T_CONSTANT_ENCAPSED_STRING","' set that subclasses Zend_Feed_Pubsubhubbub_Model_SubscriptionInterface'",144],")",";",["T_WHITESPACE","\n        ",144],"}",["T_WHITESPACE","\n        ",145],["T_RETURN","return",146],["T_WHITESPACE"," ",146],["T_VARIABLE","$this",146],["T_OBJECT_OPERATOR","->",146],["T_STRING","_storage",146],";",["T_WHITESPACE","\n    ",146],"}",["T_WHITESPACE","\n\n    ",147],["T_DOC_COMMENT","\/**\n     * An instance of a class handling Http Responses. This is implemented in\n     * Zend_Feed_Pubsubhubbub_HttpResponse which shares an unenforced interface with\n     * (i.e. not inherited from) Zend_Controller_Response_Http.\n     *\n     * @param  Zend_Feed_Pubsubhubbub_HttpResponse|Zend_Controller_Response_Http $httpResponse\n     * @throws Zend_Feed_Pubsubhubbub_Exception\n     * @return Zend_Feed_Pubsubhubbub_CallbackAbstract\n     *\/",149],["T_WHITESPACE","\n    ",157],["T_PUBLIC","public",158],["T_WHITESPACE"," ",158],["T_FUNCTION","function",158],["T_WHITESPACE"," ",158],["T_STRING","setHttpResponse",158],"(",["T_VARIABLE","$httpResponse",158],")",["T_WHITESPACE","\n    ",158],"{",["T_WHITESPACE","\n        ",159],["T_IF","if",160],["T_WHITESPACE"," ",160],"(","!",["T_STRING","is_object",160],"(",["T_VARIABLE","$httpResponse",160],")",["T_WHITESPACE","\n            ",160],["T_BOOLEAN_OR","||",161],["T_WHITESPACE"," ",161],"(","!",["T_VARIABLE","$httpResponse",161],["T_WHITESPACE"," ",161],["T_INSTANCEOF","instanceof",161],["T_WHITESPACE"," ",161],["T_STRING","Zend_Feed_Pubsubhubbub_HttpResponse",161],["T_WHITESPACE","\n                ",161],["T_BOOLEAN_AND","&&",162],["T_WHITESPACE"," ",162],"!",["T_VARIABLE","$httpResponse",162],["T_WHITESPACE"," ",162],["T_INSTANCEOF","instanceof",162],["T_WHITESPACE"," ",162],["T_STRING","Zend_Controller_Response_Http",162],")",["T_WHITESPACE","\n        ",162],")",["T_WHITESPACE"," ",163],"{",["T_WHITESPACE","\n            ",163],["T_COMMENT","#require_once 'Zend\/Feed\/Pubsubhubbub\/Exception.php';\n",164],["T_WHITESPACE","            ",165],["T_THROW","throw",165],["T_WHITESPACE"," ",165],["T_NEW","new",165],["T_WHITESPACE"," ",165],["T_STRING","Zend_Feed_Pubsubhubbub_Exception",165],"(",["T_CONSTANT_ENCAPSED_STRING","'HTTP Response object must'",165],["T_WHITESPACE","\n                ",165],".",["T_WHITESPACE"," ",166],["T_CONSTANT_ENCAPSED_STRING","' implement one of Zend_Feed_Pubsubhubbub_HttpResponse or'",166],["T_WHITESPACE","\n                ",166],".",["T_WHITESPACE"," ",167],["T_CONSTANT_ENCAPSED_STRING","' Zend_Controller_Response_Http'",167],")",";",["T_WHITESPACE","\n        ",167],"}",["T_WHITESPACE","\n        ",168],["T_VARIABLE","$this",169],["T_OBJECT_OPERATOR","->",169],["T_STRING","_httpResponse",169],["T_WHITESPACE"," ",169],"=",["T_WHITESPACE"," ",169],["T_VARIABLE","$httpResponse",169],";",["T_WHITESPACE","\n        ",169],["T_RETURN","return",170],["T_WHITESPACE"," ",170],["T_VARIABLE","$this",170],";",["T_WHITESPACE","\n    ",170],"}",["T_WHITESPACE","\n\n    ",171],["T_DOC_COMMENT","\/**\n     * An instance of a class handling Http Responses. This is implemented in\n     * Zend_Feed_Pubsubhubbub_HttpResponse which shares an unenforced interface with\n     * (i.e. not inherited from) Zend_Controller_Response_Http.\n     *\n     * @return Zend_Feed_Pubsubhubbub_HttpResponse|Zend_Controller_Response_Http\n     *\/",173],["T_WHITESPACE","\n    ",179],["T_PUBLIC","public",180],["T_WHITESPACE"," ",180],["T_FUNCTION","function",180],["T_WHITESPACE"," ",180],["T_STRING","getHttpResponse",180],"(",")",["T_WHITESPACE","\n    ",180],"{",["T_WHITESPACE","\n        ",181],["T_IF","if",182],["T_WHITESPACE"," ",182],"(",["T_VARIABLE","$this",182],["T_OBJECT_OPERATOR","->",182],["T_STRING","_httpResponse",182],["T_WHITESPACE"," ",182],["T_IS_IDENTICAL","===",182],["T_WHITESPACE"," ",182],["T_STRING","null",182],")",["T_WHITESPACE"," ",182],"{",["T_WHITESPACE","\n            ",182],["T_VARIABLE","$this",183],["T_OBJECT_OPERATOR","->",183],["T_STRING","_httpResponse",183],["T_WHITESPACE"," ",183],"=",["T_WHITESPACE"," ",183],["T_NEW","new",183],["T_WHITESPACE"," ",183],["T_STRING","Zend_Feed_Pubsubhubbub_HttpResponse",183],";",["T_WHITESPACE","\n        ",183],"}",["T_WHITESPACE","\n        ",184],["T_RETURN","return",185],["T_WHITESPACE"," ",185],["T_VARIABLE","$this",185],["T_OBJECT_OPERATOR","->",185],["T_STRING","_httpResponse",185],";",["T_WHITESPACE","\n    ",185],"}",["T_WHITESPACE","\n\n    ",186],["T_DOC_COMMENT","\/**\n     * Sets the number of Subscribers for which any updates are on behalf of.\n     * In other words, is this class serving one or more subscribers? How many?\n     * Defaults to 1 if left unchanged.\n     *\n     * @param  string|int $count\n     * @throws Zend_Feed_Pubsubhubbub_Exception\n     * @return Zend_Feed_Pubsubhubbub_CallbackAbstract\n     *\/",188],["T_WHITESPACE","\n    ",196],["T_PUBLIC","public",197],["T_WHITESPACE"," ",197],["T_FUNCTION","function",197],["T_WHITESPACE"," ",197],["T_STRING","setSubscriberCount",197],"(",["T_VARIABLE","$count",197],")",["T_WHITESPACE","\n    ",197],"{",["T_WHITESPACE","\n        ",198],["T_VARIABLE","$count",199],["T_WHITESPACE"," ",199],"=",["T_WHITESPACE"," ",199],["T_STRING","intval",199],"(",["T_VARIABLE","$count",199],")",";",["T_WHITESPACE","\n        ",199],["T_IF","if",200],["T_WHITESPACE"," ",200],"(",["T_VARIABLE","$count",200],["T_WHITESPACE"," ",200],["T_IS_SMALLER_OR_EQUAL","<=",200],["T_WHITESPACE"," ",200],["T_LNUMBER","0",200],")",["T_WHITESPACE"," ",200],"{",["T_WHITESPACE","\n            ",200],["T_COMMENT","#require_once 'Zend\/Feed\/Pubsubhubbub\/Exception.php';\n",201],["T_WHITESPACE","            ",202],["T_THROW","throw",202],["T_WHITESPACE"," ",202],["T_NEW","new",202],["T_WHITESPACE"," ",202],["T_STRING","Zend_Feed_Pubsubhubbub_Exception",202],"(",["T_CONSTANT_ENCAPSED_STRING","'Subscriber count must be'",202],["T_WHITESPACE","\n                ",202],".",["T_WHITESPACE"," ",203],["T_CONSTANT_ENCAPSED_STRING","' greater than zero'",203],")",";",["T_WHITESPACE","\n        ",203],"}",["T_WHITESPACE","\n        ",204],["T_VARIABLE","$this",205],["T_OBJECT_OPERATOR","->",205],["T_STRING","_subscriberCount",205],["T_WHITESPACE"," ",205],"=",["T_WHITESPACE"," ",205],["T_VARIABLE","$count",205],";",["T_WHITESPACE","\n        ",205],["T_RETURN","return",206],["T_WHITESPACE"," ",206],["T_VARIABLE","$this",206],";",["T_WHITESPACE","\n    ",206],"}",["T_WHITESPACE","\n\n    ",207],["T_DOC_COMMENT","\/**\n     * Gets the number of Subscribers for which any updates are on behalf of.\n     * In other words, is this class serving one or more subscribers? How many?\n     *\n     * @return int\n     *\/",209],["T_WHITESPACE","\n    ",214],["T_PUBLIC","public",215],["T_WHITESPACE"," ",215],["T_FUNCTION","function",215],["T_WHITESPACE"," ",215],["T_STRING","getSubscriberCount",215],"(",")",["T_WHITESPACE","\n    ",215],"{",["T_WHITESPACE","\n        ",216],["T_RETURN","return",217],["T_WHITESPACE"," ",217],["T_VARIABLE","$this",217],["T_OBJECT_OPERATOR","->",217],["T_STRING","_subscriberCount",217],";",["T_WHITESPACE","\n    ",217],"}",["T_WHITESPACE","\n\n    ",218],["T_DOC_COMMENT","\/**\n     * Attempt to detect the callback URL (specifically the path forward)\n     *\/",220],["T_WHITESPACE","\n    ",222],["T_PROTECTED","protected",223],["T_WHITESPACE"," ",223],["T_FUNCTION","function",223],["T_WHITESPACE"," ",223],["T_STRING","_detectCallbackUrl",223],"(",")",["T_WHITESPACE","\n    ",223],"{",["T_WHITESPACE","\n        ",224],["T_VARIABLE","$callbackUrl",225],["T_WHITESPACE"," ",225],"=",["T_WHITESPACE"," ",225],["T_CONSTANT_ENCAPSED_STRING","''",225],";",["T_WHITESPACE","\n        ",225],["T_IF","if",226],["T_WHITESPACE"," ",226],"(",["T_ISSET","isset",226],"(",["T_VARIABLE","$_SERVER",226],"[",["T_CONSTANT_ENCAPSED_STRING","'HTTP_X_ORIGINAL_URL'",226],"]",")",")",["T_WHITESPACE"," ",226],"{",["T_WHITESPACE","\n            ",226],["T_VARIABLE","$callbackUrl",227],["T_WHITESPACE"," ",227],"=",["T_WHITESPACE"," ",227],["T_VARIABLE","$_SERVER",227],"[",["T_CONSTANT_ENCAPSED_STRING","'HTTP_X_ORIGINAL_URL'",227],"]",";",["T_WHITESPACE","\n        ",227],"}",["T_WHITESPACE"," ",228],["T_ELSEIF","elseif",228],["T_WHITESPACE"," ",228],"(",["T_ISSET","isset",228],"(",["T_VARIABLE","$_SERVER",228],"[",["T_CONSTANT_ENCAPSED_STRING","'HTTP_X_REWRITE_URL'",228],"]",")",")",["T_WHITESPACE"," ",228],"{",["T_WHITESPACE","\n            ",228],["T_VARIABLE","$callbackUrl",229],["T_WHITESPACE"," ",229],"=",["T_WHITESPACE"," ",229],["T_VARIABLE","$_SERVER",229],"[",["T_CONSTANT_ENCAPSED_STRING","'HTTP_X_REWRITE_URL'",229],"]",";",["T_WHITESPACE","\n        ",229],"}",["T_WHITESPACE"," ",230],["T_ELSEIF","elseif",230],["T_WHITESPACE"," ",230],"(",["T_ISSET","isset",230],"(",["T_VARIABLE","$_SERVER",230],"[",["T_CONSTANT_ENCAPSED_STRING","'REQUEST_URI'",230],"]",")",")",["T_WHITESPACE"," ",230],"{",["T_WHITESPACE","\n            ",230],["T_VARIABLE","$callbackUrl",231],["T_WHITESPACE"," ",231],"=",["T_WHITESPACE"," ",231],["T_VARIABLE","$_SERVER",231],"[",["T_CONSTANT_ENCAPSED_STRING","'REQUEST_URI'",231],"]",";",["T_WHITESPACE","\n            ",231],["T_VARIABLE","$scheme",232],["T_WHITESPACE"," ",232],"=",["T_WHITESPACE"," ",232],["T_CONSTANT_ENCAPSED_STRING","'http'",232],";",["T_WHITESPACE","\n            ",232],["T_IF","if",233],["T_WHITESPACE"," ",233],"(",["T_VARIABLE","$_SERVER",233],"[",["T_CONSTANT_ENCAPSED_STRING","'HTTPS'",233],"]",["T_WHITESPACE"," ",233],["T_IS_EQUAL","==",233],["T_WHITESPACE"," ",233],["T_CONSTANT_ENCAPSED_STRING","'on'",233],")",["T_WHITESPACE"," ",233],"{",["T_WHITESPACE","\n                ",233],["T_VARIABLE","$scheme",234],["T_WHITESPACE"," ",234],"=",["T_WHITESPACE"," ",234],["T_CONSTANT_ENCAPSED_STRING","'https'",234],";",["T_WHITESPACE","\n            ",234],"}",["T_WHITESPACE","\n            ",235],["T_VARIABLE","$schemeAndHttpHost",236],["T_WHITESPACE"," ",236],"=",["T_WHITESPACE"," ",236],["T_VARIABLE","$scheme",236],["T_WHITESPACE"," ",236],".",["T_WHITESPACE"," ",236],["T_CONSTANT_ENCAPSED_STRING","':\/\/'",236],["T_WHITESPACE"," ",236],".",["T_WHITESPACE"," ",236],["T_VARIABLE","$this",236],["T_OBJECT_OPERATOR","->",236],["T_STRING","_getHttpHost",236],"(",")",";",["T_WHITESPACE","\n            ",236],["T_IF","if",237],["T_WHITESPACE"," ",237],"(",["T_STRING","strpos",237],"(",["T_VARIABLE","$callbackUrl",237],",",["T_WHITESPACE"," ",237],["T_VARIABLE","$schemeAndHttpHost",237],")",["T_WHITESPACE"," ",237],["T_IS_IDENTICAL","===",237],["T_WHITESPACE"," ",237],["T_LNUMBER","0",237],")",["T_WHITESPACE"," ",237],"{",["T_WHITESPACE","\n                ",237],["T_VARIABLE","$callbackUrl",238],["T_WHITESPACE"," ",238],"=",["T_WHITESPACE"," ",238],["T_STRING","substr",238],"(",["T_VARIABLE","$callbackUrl",238],",",["T_WHITESPACE"," ",238],["T_STRING","strlen",238],"(",["T_VARIABLE","$schemeAndHttpHost",238],")",")",";",["T_WHITESPACE","\n            ",238],"}",["T_WHITESPACE","\n        ",239],"}",["T_WHITESPACE"," ",240],["T_ELSEIF","elseif",240],["T_WHITESPACE"," ",240],"(",["T_ISSET","isset",240],"(",["T_VARIABLE","$_SERVER",240],"[",["T_CONSTANT_ENCAPSED_STRING","'ORIG_PATH_INFO'",240],"]",")",")",["T_WHITESPACE"," ",240],"{",["T_WHITESPACE","\n            ",240],["T_VARIABLE","$callbackUrl",241],"=",["T_WHITESPACE"," ",241],["T_VARIABLE","$_SERVER",241],"[",["T_CONSTANT_ENCAPSED_STRING","'ORIG_PATH_INFO'",241],"]",";",["T_WHITESPACE","\n            ",241],["T_IF","if",242],["T_WHITESPACE"," ",242],"(","!",["T_EMPTY","empty",242],"(",["T_VARIABLE","$_SERVER",242],"[",["T_CONSTANT_ENCAPSED_STRING","'QUERY_STRING'",242],"]",")",")",["T_WHITESPACE"," ",242],"{",["T_WHITESPACE","\n                ",242],["T_VARIABLE","$callbackUrl",243],["T_WHITESPACE"," ",243],["T_CONCAT_EQUAL",".=",243],["T_WHITESPACE"," ",243],["T_CONSTANT_ENCAPSED_STRING","'?'",243],["T_WHITESPACE"," ",243],".",["T_WHITESPACE"," ",243],["T_VARIABLE","$_SERVER",243],"[",["T_CONSTANT_ENCAPSED_STRING","'QUERY_STRING'",243],"]",";",["T_WHITESPACE","\n            ",243],"}",["T_WHITESPACE","\n        ",244],"}",["T_WHITESPACE","\n        ",245],["T_RETURN","return",246],["T_WHITESPACE"," ",246],["T_VARIABLE","$callbackUrl",246],";",["T_WHITESPACE","\n    ",246],"}",["T_WHITESPACE","\n\n    ",247],["T_DOC_COMMENT","\/**\n     * Get the HTTP host\n     *\n     * @return string\n     *\/",249],["T_WHITESPACE","\n    ",253],["T_PROTECTED","protected",254],["T_WHITESPACE"," ",254],["T_FUNCTION","function",254],["T_WHITESPACE"," ",254],["T_STRING","_getHttpHost",254],"(",")",["T_WHITESPACE","\n    ",254],"{",["T_WHITESPACE","\n        ",255],["T_IF","if",256],["T_WHITESPACE"," ",256],"(","!",["T_EMPTY","empty",256],"(",["T_VARIABLE","$_SERVER",256],"[",["T_CONSTANT_ENCAPSED_STRING","'HTTP_HOST'",256],"]",")",")",["T_WHITESPACE"," ",256],"{",["T_WHITESPACE","\n            ",256],["T_RETURN","return",257],["T_WHITESPACE"," ",257],["T_VARIABLE","$_SERVER",257],"[",["T_CONSTANT_ENCAPSED_STRING","'HTTP_HOST'",257],"]",";",["T_WHITESPACE","\n        ",257],"}",["T_WHITESPACE","\n        ",258],["T_VARIABLE","$scheme",259],["T_WHITESPACE"," ",259],"=",["T_WHITESPACE"," ",259],["T_CONSTANT_ENCAPSED_STRING","'http'",259],";",["T_WHITESPACE","\n        ",259],["T_IF","if",260],["T_WHITESPACE"," ",260],"(",["T_VARIABLE","$_SERVER",260],"[",["T_CONSTANT_ENCAPSED_STRING","'HTTPS'",260],"]",["T_WHITESPACE"," ",260],["T_IS_EQUAL","==",260],["T_WHITESPACE"," ",260],["T_CONSTANT_ENCAPSED_STRING","'on'",260],")",["T_WHITESPACE"," ",260],"{",["T_WHITESPACE","\n            ",260],["T_VARIABLE","$scheme",261],["T_WHITESPACE"," ",261],"=",["T_WHITESPACE"," ",261],["T_CONSTANT_ENCAPSED_STRING","'https'",261],";",["T_WHITESPACE","\n        ",261],"}",["T_WHITESPACE","\n        ",262],["T_VARIABLE","$name",263],["T_WHITESPACE"," ",263],"=",["T_WHITESPACE"," ",263],["T_VARIABLE","$_SERVER",263],"[",["T_CONSTANT_ENCAPSED_STRING","'SERVER_NAME'",263],"]",";",["T_WHITESPACE","\n        ",263],["T_VARIABLE","$port",264],["T_WHITESPACE"," ",264],"=",["T_WHITESPACE"," ",264],["T_VARIABLE","$_SERVER",264],"[",["T_CONSTANT_ENCAPSED_STRING","'SERVER_PORT'",264],"]",";",["T_WHITESPACE","\n        ",264],["T_IF","if",265],["T_WHITESPACE"," ",265],"(","(",["T_VARIABLE","$scheme",265],["T_WHITESPACE"," ",265],["T_IS_EQUAL","==",265],["T_WHITESPACE"," ",265],["T_CONSTANT_ENCAPSED_STRING","'http'",265],["T_WHITESPACE"," ",265],["T_BOOLEAN_AND","&&",265],["T_WHITESPACE"," ",265],["T_VARIABLE","$port",265],["T_WHITESPACE"," ",265],["T_IS_EQUAL","==",265],["T_WHITESPACE"," ",265],["T_LNUMBER","80",265],")",["T_WHITESPACE","\n            ",265],["T_BOOLEAN_OR","||",266],["T_WHITESPACE"," ",266],"(",["T_VARIABLE","$scheme",266],["T_WHITESPACE"," ",266],["T_IS_EQUAL","==",266],["T_WHITESPACE"," ",266],["T_CONSTANT_ENCAPSED_STRING","'https'",266],["T_WHITESPACE"," ",266],["T_BOOLEAN_AND","&&",266],["T_WHITESPACE"," ",266],["T_VARIABLE","$port",266],["T_WHITESPACE"," ",266],["T_IS_EQUAL","==",266],["T_WHITESPACE"," ",266],["T_LNUMBER","443",266],")",["T_WHITESPACE","\n        ",266],")",["T_WHITESPACE"," ",267],"{",["T_WHITESPACE","\n            ",267],["T_RETURN","return",268],["T_WHITESPACE"," ",268],["T_VARIABLE","$name",268],";",["T_WHITESPACE","\n        ",268],"}",["T_WHITESPACE"," ",269],["T_ELSE","else",269],["T_WHITESPACE"," ",269],"{",["T_WHITESPACE","\n            ",269],["T_RETURN","return",270],["T_WHITESPACE"," ",270],["T_VARIABLE","$name",270],["T_WHITESPACE"," ",270],".",["T_WHITESPACE"," ",270],["T_CONSTANT_ENCAPSED_STRING","':'",270],["T_WHITESPACE"," ",270],".",["T_WHITESPACE"," ",270],["T_VARIABLE","$port",270],";",["T_WHITESPACE","\n        ",270],"}",["T_WHITESPACE","\n    ",271],"}",["T_WHITESPACE","\n\n    ",272],["T_DOC_COMMENT","\/**\n     * Retrieve a Header value from either $_SERVER or Apache\n     *\n     * @param  string $header\n     * @return bool\n     *\/",274],["T_WHITESPACE","\n    ",279],["T_PROTECTED","protected",280],["T_WHITESPACE"," ",280],["T_FUNCTION","function",280],["T_WHITESPACE"," ",280],["T_STRING","_getHeader",280],"(",["T_VARIABLE","$header",280],")",["T_WHITESPACE","\n    ",280],"{",["T_WHITESPACE","\n        ",281],["T_VARIABLE","$temp",282],["T_WHITESPACE"," ",282],"=",["T_WHITESPACE"," ",282],["T_STRING","strtoupper",282],"(",["T_STRING","str_replace",282],"(",["T_CONSTANT_ENCAPSED_STRING","'-'",282],",",["T_WHITESPACE"," ",282],["T_CONSTANT_ENCAPSED_STRING","'_'",282],",",["T_WHITESPACE"," ",282],["T_VARIABLE","$header",282],")",")",";",["T_WHITESPACE","\n        ",282],["T_IF","if",283],["T_WHITESPACE"," ",283],"(","!",["T_EMPTY","empty",283],"(",["T_VARIABLE","$_SERVER",283],"[",["T_VARIABLE","$temp",283],"]",")",")",["T_WHITESPACE"," ",283],"{",["T_WHITESPACE","\n            ",283],["T_RETURN","return",284],["T_WHITESPACE"," ",284],["T_VARIABLE","$_SERVER",284],"[",["T_VARIABLE","$temp",284],"]",";",["T_WHITESPACE","\n        ",284],"}",["T_WHITESPACE","\n        ",285],["T_VARIABLE","$temp",286],["T_WHITESPACE"," ",286],"=",["T_WHITESPACE"," ",286],["T_CONSTANT_ENCAPSED_STRING","'HTTP_'",286],["T_WHITESPACE"," ",286],".",["T_WHITESPACE"," ",286],["T_STRING","strtoupper",286],"(",["T_STRING","str_replace",286],"(",["T_CONSTANT_ENCAPSED_STRING","'-'",286],",",["T_WHITESPACE"," ",286],["T_CONSTANT_ENCAPSED_STRING","'_'",286],",",["T_WHITESPACE"," ",286],["T_VARIABLE","$header",286],")",")",";",["T_WHITESPACE","\n        ",286],["T_IF","if",287],["T_WHITESPACE"," ",287],"(","!",["T_EMPTY","empty",287],"(",["T_VARIABLE","$_SERVER",287],"[",["T_VARIABLE","$temp",287],"]",")",")",["T_WHITESPACE"," ",287],"{",["T_WHITESPACE","\n            ",287],["T_RETURN","return",288],["T_WHITESPACE"," ",288],["T_VARIABLE","$_SERVER",288],"[",["T_VARIABLE","$temp",288],"]",";",["T_WHITESPACE","\n        ",288],"}",["T_WHITESPACE","\n        ",289],["T_IF","if",290],["T_WHITESPACE"," ",290],"(",["T_STRING","function_exists",290],"(",["T_CONSTANT_ENCAPSED_STRING","'apache_request_headers'",290],")",")",["T_WHITESPACE"," ",290],"{",["T_WHITESPACE","\n            ",290],["T_VARIABLE","$headers",291],["T_WHITESPACE"," ",291],"=",["T_WHITESPACE"," ",291],["T_STRING","apache_request_headers",291],"(",")",";",["T_WHITESPACE","\n            ",291],["T_IF","if",292],["T_WHITESPACE"," ",292],"(","!",["T_EMPTY","empty",292],"(",["T_VARIABLE","$headers",292],"[",["T_VARIABLE","$header",292],"]",")",")",["T_WHITESPACE"," ",292],"{",["T_WHITESPACE","\n                ",292],["T_RETURN","return",293],["T_WHITESPACE"," ",293],["T_VARIABLE","$headers",293],"[",["T_VARIABLE","$header",293],"]",";",["T_WHITESPACE","\n            ",293],"}",["T_WHITESPACE","\n        ",294],"}",["T_WHITESPACE","\n        ",295],["T_RETURN","return",296],["T_WHITESPACE"," ",296],["T_STRING","false",296],";",["T_WHITESPACE","\n    ",296],"}",["T_WHITESPACE","\n\n    ",297],["T_DOC_COMMENT","\/**\n     * Return the raw body of the request\n     *\n     * @return string|false Raw body, or false if not present\n     *\/",299],["T_WHITESPACE","\n    ",303],["T_PROTECTED","protected",304],["T_WHITESPACE"," ",304],["T_FUNCTION","function",304],["T_WHITESPACE"," ",304],["T_STRING","_getRawBody",304],"(",")",["T_WHITESPACE","\n    ",304],"{",["T_WHITESPACE","\n        ",305],["T_VARIABLE","$body",306],["T_WHITESPACE"," ",306],"=",["T_WHITESPACE"," ",306],["T_STRING","file_get_contents",306],"(",["T_CONSTANT_ENCAPSED_STRING","'php:\/\/input'",306],")",";",["T_WHITESPACE","\n        ",306],["T_IF","if",307],["T_WHITESPACE"," ",307],"(",["T_STRING","strlen",307],"(",["T_STRING","trim",307],"(",["T_VARIABLE","$body",307],")",")",["T_WHITESPACE"," ",307],["T_IS_EQUAL","==",307],["T_WHITESPACE"," ",307],["T_LNUMBER","0",307],["T_WHITESPACE"," ",307],["T_BOOLEAN_AND","&&",307],["T_WHITESPACE"," ",307],["T_ISSET","isset",307],"(",["T_VARIABLE","$GLOBALS",307],"[",["T_CONSTANT_ENCAPSED_STRING","'HTTP_RAW_POST_DATA'",307],"]",")",")",["T_WHITESPACE"," ",307],"{",["T_WHITESPACE","\n            ",307],["T_VARIABLE","$body",308],["T_WHITESPACE"," ",308],"=",["T_WHITESPACE"," ",308],["T_VARIABLE","$GLOBALS",308],"[",["T_CONSTANT_ENCAPSED_STRING","'HTTP_RAW_POST_DATA'",308],"]",";",["T_WHITESPACE","\n        ",308],"}",["T_WHITESPACE","\n        ",309],["T_IF","if",310],["T_WHITESPACE"," ",310],"(",["T_STRING","strlen",310],"(",["T_STRING","trim",310],"(",["T_VARIABLE","$body",310],")",")",["T_WHITESPACE"," ",310],">",["T_WHITESPACE"," ",310],["T_LNUMBER","0",310],")",["T_WHITESPACE"," ",310],"{",["T_WHITESPACE","\n            ",310],["T_RETURN","return",311],["T_WHITESPACE"," ",311],["T_VARIABLE","$body",311],";",["T_WHITESPACE","\n        ",311],"}",["T_WHITESPACE","\n        ",312],["T_RETURN","return",313],["T_WHITESPACE"," ",313],["T_STRING","false",313],";",["T_WHITESPACE","\n    ",313],"}",["T_WHITESPACE","\n",314],"}",["T_WHITESPACE","\n",315]]
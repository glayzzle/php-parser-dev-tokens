[["T_OPEN_TAG","<?php\n",1],["T_WHITESPACE","\n",2],["T_DOC_COMMENT","\/**\n * Zend Framework\n *\n * LICENSE\n *\n * This source file is subject to the new BSD license that is bundled\n * with this package in the file LICENSE.txt.\n * It is also available through the world-wide-web at this URL:\n * http:\/\/framework.zend.com\/license\/new-bsd\n * If you did not receive a copy of the license and are unable to\n * obtain it through the world-wide-web, please send an email\n * to license@zend.com so we can send you a copy immediately.\n *\n * @category   Zend\n * @package    Zend_OpenId\n * @copyright  Copyright (c) 2005-2015 Zend Technologies USA Inc. (http:\/\/www.zend.com)\n * @license    http:\/\/framework.zend.com\/license\/new-bsd     New BSD License\n * @version    $Id$\n *\/",3],["T_WHITESPACE","\n\n",21],["T_DOC_COMMENT","\/**\n * @see Zend_OpenId_Extension\n *\/",23],["T_WHITESPACE","\n",25],["T_COMMENT","#require_once \"Zend\/OpenId\/Extension.php\";\n",26],["T_WHITESPACE","\n",27],["T_DOC_COMMENT","\/**\n * 'Simple Refistration Extension' for Zend_OpenId\n *\n * @category   Zend\n * @package    Zend_OpenId\n * @copyright  Copyright (c) 2005-2015 Zend Technologies USA Inc. (http:\/\/www.zend.com)\n * @license    http:\/\/framework.zend.com\/license\/new-bsd     New BSD License\n *\/",28],["T_WHITESPACE","\n",35],["T_CLASS","class",36],["T_WHITESPACE"," ",36],["T_STRING","Zend_OpenId_Extension_Sreg",36],["T_WHITESPACE"," ",36],["T_EXTENDS","extends",36],["T_WHITESPACE"," ",36],["T_STRING","Zend_OpenId_Extension",36],["T_WHITESPACE","\n",36],"{",["T_WHITESPACE","\n    ",37],["T_DOC_COMMENT","\/**\n     * SREG 1.1 namespace. All OpenID SREG 1.1 messages MUST contain variable\n     * openid.ns.sreg with its value.\n     *\/",38],["T_WHITESPACE","\n    ",41],["T_CONST","const",42],["T_WHITESPACE"," ",42],["T_STRING","NAMESPACE_1_1",42],["T_WHITESPACE"," ",42],"=",["T_WHITESPACE"," ",42],["T_CONSTANT_ENCAPSED_STRING","\"http:\/\/openid.net\/extensions\/sreg\/1.1\"",42],";",["T_WHITESPACE","\n\n    ",42],["T_PRIVATE","private",44],["T_WHITESPACE"," ",44],["T_VARIABLE","$_props",44],";",["T_WHITESPACE","\n    ",44],["T_PRIVATE","private",45],["T_WHITESPACE"," ",45],["T_VARIABLE","$_policy_url",45],";",["T_WHITESPACE","\n    ",45],["T_PRIVATE","private",46],["T_WHITESPACE"," ",46],["T_VARIABLE","$_version",46],";",["T_WHITESPACE","\n\n    ",46],["T_DOC_COMMENT","\/**\n     * Creates SREG extension object\n     *\n     * @param array $props associative array of SREG variables\n     * @param string $policy_url SREG policy URL\n     * @param float $version SREG version\n     * @return array\n     *\/",48],["T_WHITESPACE","\n    ",55],["T_PUBLIC","public",56],["T_WHITESPACE"," ",56],["T_FUNCTION","function",56],["T_WHITESPACE"," ",56],["T_STRING","__construct",56],"(",["T_ARRAY","array",56],["T_WHITESPACE"," ",56],["T_VARIABLE","$props",56],"=",["T_STRING","null",56],",",["T_WHITESPACE"," ",56],["T_VARIABLE","$policy_url",56],"=",["T_STRING","null",56],",",["T_WHITESPACE"," ",56],["T_VARIABLE","$version",56],"=",["T_DNUMBER","1.0",56],")",["T_WHITESPACE","\n    ",56],"{",["T_WHITESPACE","\n        ",57],["T_VARIABLE","$this",58],["T_OBJECT_OPERATOR","->",58],["T_STRING","_props",58],["T_WHITESPACE"," ",58],"=",["T_WHITESPACE"," ",58],["T_VARIABLE","$props",58],";",["T_WHITESPACE","\n        ",58],["T_VARIABLE","$this",59],["T_OBJECT_OPERATOR","->",59],["T_STRING","_policy_url",59],["T_WHITESPACE"," ",59],"=",["T_WHITESPACE"," ",59],["T_VARIABLE","$policy_url",59],";",["T_WHITESPACE","\n        ",59],["T_VARIABLE","$this",60],["T_OBJECT_OPERATOR","->",60],["T_STRING","_version",60],["T_WHITESPACE"," ",60],"=",["T_WHITESPACE"," ",60],["T_VARIABLE","$version",60],";",["T_WHITESPACE","\n    ",60],"}",["T_WHITESPACE","\n\n    ",61],["T_DOC_COMMENT","\/**\n     * Returns associative array of SREG variables\n     *\n     * @return array\n     *\/",63],["T_WHITESPACE","\n    ",67],["T_PUBLIC","public",68],["T_WHITESPACE"," ",68],["T_FUNCTION","function",68],["T_WHITESPACE"," ",68],["T_STRING","getProperties",68],"(",")",["T_WHITESPACE"," ",68],"{",["T_WHITESPACE","\n        ",68],["T_IF","if",69],["T_WHITESPACE"," ",69],"(",["T_STRING","is_array",69],"(",["T_VARIABLE","$this",69],["T_OBJECT_OPERATOR","->",69],["T_STRING","_props",69],")",")",["T_WHITESPACE"," ",69],"{",["T_WHITESPACE","\n            ",69],["T_RETURN","return",70],["T_WHITESPACE"," ",70],["T_VARIABLE","$this",70],["T_OBJECT_OPERATOR","->",70],["T_STRING","_props",70],";",["T_WHITESPACE","\n        ",70],"}",["T_WHITESPACE"," ",71],["T_ELSE","else",71],["T_WHITESPACE"," ",71],"{",["T_WHITESPACE","\n            ",71],["T_RETURN","return",72],["T_WHITESPACE"," ",72],["T_ARRAY","array",72],"(",")",";",["T_WHITESPACE","\n        ",72],"}",["T_WHITESPACE","\n    ",73],"}",["T_WHITESPACE","\n\n    ",74],["T_DOC_COMMENT","\/**\n     * Returns SREG policy URL\n     *\n     * @return string\n     *\/",76],["T_WHITESPACE","\n    ",80],["T_PUBLIC","public",81],["T_WHITESPACE"," ",81],["T_FUNCTION","function",81],["T_WHITESPACE"," ",81],["T_STRING","getPolicyUrl",81],"(",")",["T_WHITESPACE"," ",81],"{",["T_WHITESPACE","\n        ",81],["T_RETURN","return",82],["T_WHITESPACE"," ",82],["T_VARIABLE","$this",82],["T_OBJECT_OPERATOR","->",82],["T_STRING","_policy_url",82],";",["T_WHITESPACE","\n    ",82],"}",["T_WHITESPACE","\n\n    ",83],["T_DOC_COMMENT","\/**\n     * Returns SREG protocol version\n     *\n     * @return float\n     *\/",85],["T_WHITESPACE","\n    ",89],["T_PUBLIC","public",90],["T_WHITESPACE"," ",90],["T_FUNCTION","function",90],["T_WHITESPACE"," ",90],["T_STRING","getVersion",90],"(",")",["T_WHITESPACE"," ",90],"{",["T_WHITESPACE","\n        ",90],["T_RETURN","return",91],["T_WHITESPACE"," ",91],["T_VARIABLE","$this",91],["T_OBJECT_OPERATOR","->",91],["T_STRING","_version",91],";",["T_WHITESPACE","\n    ",91],"}",["T_WHITESPACE","\n\n    ",92],["T_DOC_COMMENT","\/**\n     * Returns array of allowed SREG variable names.\n     *\n     * @return array\n     *\/",94],["T_WHITESPACE","\n    ",98],["T_PUBLIC","public",99],["T_WHITESPACE"," ",99],["T_STATIC","static",99],["T_WHITESPACE"," ",99],["T_FUNCTION","function",99],["T_WHITESPACE"," ",99],["T_STRING","getSregProperties",99],"(",")",["T_WHITESPACE","\n    ",99],"{",["T_WHITESPACE","\n        ",100],["T_RETURN","return",101],["T_WHITESPACE"," ",101],["T_ARRAY","array",101],"(",["T_WHITESPACE","\n            ",101],["T_CONSTANT_ENCAPSED_STRING","\"nickname\"",102],",",["T_WHITESPACE","\n            ",102],["T_CONSTANT_ENCAPSED_STRING","\"email\"",103],",",["T_WHITESPACE","\n            ",103],["T_CONSTANT_ENCAPSED_STRING","\"fullname\"",104],",",["T_WHITESPACE","\n            ",104],["T_CONSTANT_ENCAPSED_STRING","\"dob\"",105],",",["T_WHITESPACE","\n            ",105],["T_CONSTANT_ENCAPSED_STRING","\"gender\"",106],",",["T_WHITESPACE","\n            ",106],["T_CONSTANT_ENCAPSED_STRING","\"postcode\"",107],",",["T_WHITESPACE","\n            ",107],["T_CONSTANT_ENCAPSED_STRING","\"country\"",108],",",["T_WHITESPACE","\n            ",108],["T_CONSTANT_ENCAPSED_STRING","\"language\"",109],",",["T_WHITESPACE","\n            ",109],["T_CONSTANT_ENCAPSED_STRING","\"timezone\"",110],["T_WHITESPACE","\n        ",110],")",";",["T_WHITESPACE","\n    ",111],"}",["T_WHITESPACE","\n\n    ",112],["T_DOC_COMMENT","\/**\n     * Adds additional SREG data to OpenId 'checkid_immediate' or\n     * 'checkid_setup' request.\n     *\n     * @param array &$params request's var\/val pairs\n     * @return bool\n     *\/",114],["T_WHITESPACE","\n    ",120],["T_PUBLIC","public",121],["T_WHITESPACE"," ",121],["T_FUNCTION","function",121],["T_WHITESPACE"," ",121],["T_STRING","prepareRequest",121],"(","&",["T_VARIABLE","$params",121],")",["T_WHITESPACE","\n    ",121],"{",["T_WHITESPACE","\n        ",122],["T_IF","if",123],["T_WHITESPACE"," ",123],"(",["T_STRING","is_array",123],"(",["T_VARIABLE","$this",123],["T_OBJECT_OPERATOR","->",123],["T_STRING","_props",123],")",["T_WHITESPACE"," ",123],["T_BOOLEAN_AND","&&",123],["T_WHITESPACE"," ",123],["T_STRING","count",123],"(",["T_VARIABLE","$this",123],["T_OBJECT_OPERATOR","->",123],["T_STRING","_props",123],")",["T_WHITESPACE"," ",123],">",["T_WHITESPACE"," ",123],["T_LNUMBER","0",123],")",["T_WHITESPACE"," ",123],"{",["T_WHITESPACE","\n            ",123],["T_FOREACH","foreach",124],["T_WHITESPACE"," ",124],"(",["T_VARIABLE","$this",124],["T_OBJECT_OPERATOR","->",124],["T_STRING","_props",124],["T_WHITESPACE"," ",124],["T_AS","as",124],["T_WHITESPACE"," ",124],["T_VARIABLE","$prop",124],["T_WHITESPACE"," ",124],["T_DOUBLE_ARROW","=>",124],["T_WHITESPACE"," ",124],["T_VARIABLE","$req",124],")",["T_WHITESPACE"," ",124],"{",["T_WHITESPACE","\n                ",124],["T_IF","if",125],["T_WHITESPACE"," ",125],"(",["T_VARIABLE","$req",125],")",["T_WHITESPACE"," ",125],"{",["T_WHITESPACE","\n                    ",125],["T_IF","if",126],["T_WHITESPACE"," ",126],"(",["T_ISSET","isset",126],"(",["T_VARIABLE","$required",126],")",")",["T_WHITESPACE"," ",126],"{",["T_WHITESPACE","\n                        ",126],["T_VARIABLE","$required",127],["T_WHITESPACE"," ",127],["T_CONCAT_EQUAL",".=",127],["T_WHITESPACE"," ",127],["T_CONSTANT_ENCAPSED_STRING","','",127],".",["T_VARIABLE","$prop",127],";",["T_WHITESPACE","\n                    ",127],"}",["T_WHITESPACE"," ",128],["T_ELSE","else",128],["T_WHITESPACE"," ",128],"{",["T_WHITESPACE","\n                        ",128],["T_VARIABLE","$required",129],["T_WHITESPACE"," ",129],"=",["T_WHITESPACE"," ",129],["T_VARIABLE","$prop",129],";",["T_WHITESPACE","\n                    ",129],"}",["T_WHITESPACE","\n                ",130],"}",["T_WHITESPACE"," ",131],["T_ELSE","else",131],["T_WHITESPACE"," ",131],"{",["T_WHITESPACE","\n                    ",131],["T_IF","if",132],["T_WHITESPACE"," ",132],"(",["T_ISSET","isset",132],"(",["T_VARIABLE","$optional",132],")",")",["T_WHITESPACE"," ",132],"{",["T_WHITESPACE","\n                        ",132],["T_VARIABLE","$optional",133],["T_WHITESPACE"," ",133],["T_CONCAT_EQUAL",".=",133],["T_WHITESPACE"," ",133],["T_CONSTANT_ENCAPSED_STRING","','",133],".",["T_VARIABLE","$prop",133],";",["T_WHITESPACE","\n                    ",133],"}",["T_WHITESPACE"," ",134],["T_ELSE","else",134],["T_WHITESPACE"," ",134],"{",["T_WHITESPACE","\n                        ",134],["T_VARIABLE","$optional",135],["T_WHITESPACE"," ",135],"=",["T_WHITESPACE"," ",135],["T_VARIABLE","$prop",135],";",["T_WHITESPACE","\n                    ",135],"}",["T_WHITESPACE","\n                ",136],"}",["T_WHITESPACE","\n            ",137],"}",["T_WHITESPACE","\n            ",138],["T_IF","if",139],["T_WHITESPACE"," ",139],"(",["T_VARIABLE","$this",139],["T_OBJECT_OPERATOR","->",139],["T_STRING","_version",139],["T_WHITESPACE"," ",139],["T_IS_GREATER_OR_EQUAL",">=",139],["T_WHITESPACE"," ",139],["T_DNUMBER","1.1",139],")",["T_WHITESPACE"," ",139],"{",["T_WHITESPACE","\n                ",139],["T_VARIABLE","$params",140],"[",["T_CONSTANT_ENCAPSED_STRING","'openid.ns.sreg'",140],"]",["T_WHITESPACE"," ",140],"=",["T_WHITESPACE"," ",140],["T_STRING","Zend_OpenId_Extension_Sreg",140],["T_DOUBLE_COLON","::",140],["T_STRING","NAMESPACE_1_1",140],";",["T_WHITESPACE","\n            ",140],"}",["T_WHITESPACE","\n            ",141],["T_IF","if",142],["T_WHITESPACE"," ",142],"(","!",["T_EMPTY","empty",142],"(",["T_VARIABLE","$required",142],")",")",["T_WHITESPACE"," ",142],"{",["T_WHITESPACE","\n                ",142],["T_VARIABLE","$params",143],"[",["T_CONSTANT_ENCAPSED_STRING","'openid.sreg.required'",143],"]",["T_WHITESPACE"," ",143],"=",["T_WHITESPACE"," ",143],["T_VARIABLE","$required",143],";",["T_WHITESPACE","\n            ",143],"}",["T_WHITESPACE","\n            ",144],["T_IF","if",145],["T_WHITESPACE"," ",145],"(","!",["T_EMPTY","empty",145],"(",["T_VARIABLE","$optional",145],")",")",["T_WHITESPACE"," ",145],"{",["T_WHITESPACE","\n                ",145],["T_VARIABLE","$params",146],"[",["T_CONSTANT_ENCAPSED_STRING","'openid.sreg.optional'",146],"]",["T_WHITESPACE"," ",146],"=",["T_WHITESPACE"," ",146],["T_VARIABLE","$optional",146],";",["T_WHITESPACE","\n            ",146],"}",["T_WHITESPACE","\n            ",147],["T_IF","if",148],["T_WHITESPACE"," ",148],"(","!",["T_EMPTY","empty",148],"(",["T_VARIABLE","$this",148],["T_OBJECT_OPERATOR","->",148],["T_STRING","_policy_url",148],")",")",["T_WHITESPACE"," ",148],"{",["T_WHITESPACE","\n                ",148],["T_VARIABLE","$params",149],"[",["T_CONSTANT_ENCAPSED_STRING","'openid.sreg.policy_url'",149],"]",["T_WHITESPACE"," ",149],"=",["T_WHITESPACE"," ",149],["T_VARIABLE","$this",149],["T_OBJECT_OPERATOR","->",149],["T_STRING","_policy_url",149],";",["T_WHITESPACE","\n            ",149],"}",["T_WHITESPACE","\n        ",150],"}",["T_WHITESPACE","\n        ",151],["T_RETURN","return",152],["T_WHITESPACE"," ",152],["T_STRING","true",152],";",["T_WHITESPACE","\n    ",152],"}",["T_WHITESPACE","\n\n    ",153],["T_DOC_COMMENT","\/**\n     * Parses OpenId 'checkid_immediate' or 'checkid_setup' request,\n     * extracts SREG variables and sets ovject properties to corresponding\n     * values.\n     *\n     * @param array $params request's var\/val pairs\n     * @return bool\n     *\/",155],["T_WHITESPACE","\n    ",162],["T_PUBLIC","public",163],["T_WHITESPACE"," ",163],["T_FUNCTION","function",163],["T_WHITESPACE"," ",163],["T_STRING","parseRequest",163],"(",["T_VARIABLE","$params",163],")",["T_WHITESPACE","\n    ",163],"{",["T_WHITESPACE","\n        ",164],["T_IF","if",165],["T_WHITESPACE"," ",165],"(",["T_ISSET","isset",165],"(",["T_VARIABLE","$params",165],"[",["T_CONSTANT_ENCAPSED_STRING","'openid_ns_sreg'",165],"]",")",["T_WHITESPACE"," ",165],["T_BOOLEAN_AND","&&",165],["T_WHITESPACE","\n            ",165],["T_VARIABLE","$params",166],"[",["T_CONSTANT_ENCAPSED_STRING","'openid_ns_sreg'",166],"]",["T_WHITESPACE"," ",166],["T_IS_IDENTICAL","===",166],["T_WHITESPACE"," ",166],["T_STRING","Zend_OpenId_Extension_Sreg",166],["T_DOUBLE_COLON","::",166],["T_STRING","NAMESPACE_1_1",166],")",["T_WHITESPACE"," ",166],"{",["T_WHITESPACE","\n            ",166],["T_VARIABLE","$this",167],["T_OBJECT_OPERATOR","->",167],["T_STRING","_version",167],"=",["T_WHITESPACE"," ",167],["T_DNUMBER","1.1",167],";",["T_WHITESPACE","\n        ",167],"}",["T_WHITESPACE"," ",168],["T_ELSE","else",168],["T_WHITESPACE"," ",168],"{",["T_WHITESPACE","\n            ",168],["T_VARIABLE","$this",169],["T_OBJECT_OPERATOR","->",169],["T_STRING","_version",169],"=",["T_WHITESPACE"," ",169],["T_DNUMBER","1.0",169],";",["T_WHITESPACE","\n        ",169],"}",["T_WHITESPACE","\n        ",170],["T_IF","if",171],["T_WHITESPACE"," ",171],"(","!",["T_EMPTY","empty",171],"(",["T_VARIABLE","$params",171],"[",["T_CONSTANT_ENCAPSED_STRING","'openid_sreg_policy_url'",171],"]",")",")",["T_WHITESPACE"," ",171],"{",["T_WHITESPACE","\n            ",171],["T_VARIABLE","$this",172],["T_OBJECT_OPERATOR","->",172],["T_STRING","_policy_url",172],["T_WHITESPACE"," ",172],"=",["T_WHITESPACE"," ",172],["T_VARIABLE","$params",172],"[",["T_CONSTANT_ENCAPSED_STRING","'openid_sreg_policy_url'",172],"]",";",["T_WHITESPACE","\n        ",172],"}",["T_WHITESPACE"," ",173],["T_ELSE","else",173],["T_WHITESPACE"," ",173],"{",["T_WHITESPACE","\n            ",173],["T_VARIABLE","$this",174],["T_OBJECT_OPERATOR","->",174],["T_STRING","_policy_url",174],["T_WHITESPACE"," ",174],"=",["T_WHITESPACE"," ",174],["T_STRING","null",174],";",["T_WHITESPACE","\n        ",174],"}",["T_WHITESPACE","\n        ",175],["T_VARIABLE","$props",176],["T_WHITESPACE"," ",176],"=",["T_WHITESPACE"," ",176],["T_ARRAY","array",176],"(",")",";",["T_WHITESPACE","\n        ",176],["T_IF","if",177],["T_WHITESPACE"," ",177],"(","!",["T_EMPTY","empty",177],"(",["T_VARIABLE","$params",177],"[",["T_CONSTANT_ENCAPSED_STRING","'openid_sreg_optional'",177],"]",")",")",["T_WHITESPACE"," ",177],"{",["T_WHITESPACE","\n            ",177],["T_FOREACH","foreach",178],["T_WHITESPACE"," ",178],"(",["T_STRING","explode",178],"(",["T_CONSTANT_ENCAPSED_STRING","','",178],",",["T_WHITESPACE"," ",178],["T_VARIABLE","$params",178],"[",["T_CONSTANT_ENCAPSED_STRING","'openid_sreg_optional'",178],"]",")",["T_WHITESPACE"," ",178],["T_AS","as",178],["T_WHITESPACE"," ",178],["T_VARIABLE","$prop",178],")",["T_WHITESPACE"," ",178],"{",["T_WHITESPACE","\n                ",178],["T_VARIABLE","$prop",179],["T_WHITESPACE"," ",179],"=",["T_WHITESPACE"," ",179],["T_STRING","trim",179],"(",["T_VARIABLE","$prop",179],")",";",["T_WHITESPACE","\n                ",179],["T_VARIABLE","$props",180],"[",["T_VARIABLE","$prop",180],"]",["T_WHITESPACE"," ",180],"=",["T_WHITESPACE"," ",180],["T_STRING","false",180],";",["T_WHITESPACE","\n            ",180],"}",["T_WHITESPACE","\n        ",181],"}",["T_WHITESPACE","\n        ",182],["T_IF","if",183],["T_WHITESPACE"," ",183],"(","!",["T_EMPTY","empty",183],"(",["T_VARIABLE","$params",183],"[",["T_CONSTANT_ENCAPSED_STRING","'openid_sreg_required'",183],"]",")",")",["T_WHITESPACE"," ",183],"{",["T_WHITESPACE","\n            ",183],["T_FOREACH","foreach",184],["T_WHITESPACE"," ",184],"(",["T_STRING","explode",184],"(",["T_CONSTANT_ENCAPSED_STRING","','",184],",",["T_WHITESPACE"," ",184],["T_VARIABLE","$params",184],"[",["T_CONSTANT_ENCAPSED_STRING","'openid_sreg_required'",184],"]",")",["T_WHITESPACE"," ",184],["T_AS","as",184],["T_WHITESPACE"," ",184],["T_VARIABLE","$prop",184],")",["T_WHITESPACE"," ",184],"{",["T_WHITESPACE","\n                ",184],["T_VARIABLE","$prop",185],["T_WHITESPACE"," ",185],"=",["T_WHITESPACE"," ",185],["T_STRING","trim",185],"(",["T_VARIABLE","$prop",185],")",";",["T_WHITESPACE","\n                ",185],["T_VARIABLE","$props",186],"[",["T_VARIABLE","$prop",186],"]",["T_WHITESPACE"," ",186],"=",["T_WHITESPACE"," ",186],["T_STRING","true",186],";",["T_WHITESPACE","\n            ",186],"}",["T_WHITESPACE","\n        ",187],"}",["T_WHITESPACE","\n        ",188],["T_VARIABLE","$props2",189],["T_WHITESPACE"," ",189],"=",["T_WHITESPACE"," ",189],["T_ARRAY","array",189],"(",")",";",["T_WHITESPACE","\n        ",189],["T_FOREACH","foreach",190],["T_WHITESPACE"," ",190],"(",["T_STRING","self",190],["T_DOUBLE_COLON","::",190],["T_STRING","getSregProperties",190],"(",")",["T_WHITESPACE"," ",190],["T_AS","as",190],["T_WHITESPACE"," ",190],["T_VARIABLE","$prop",190],")",["T_WHITESPACE"," ",190],"{",["T_WHITESPACE","\n            ",190],["T_IF","if",191],["T_WHITESPACE"," ",191],"(",["T_ISSET","isset",191],"(",["T_VARIABLE","$props",191],"[",["T_VARIABLE","$prop",191],"]",")",")",["T_WHITESPACE"," ",191],"{",["T_WHITESPACE","\n                ",191],["T_VARIABLE","$props2",192],"[",["T_VARIABLE","$prop",192],"]",["T_WHITESPACE"," ",192],"=",["T_WHITESPACE"," ",192],["T_VARIABLE","$props",192],"[",["T_VARIABLE","$prop",192],"]",";",["T_WHITESPACE","\n            ",192],"}",["T_WHITESPACE","\n        ",193],"}",["T_WHITESPACE","\n\n        ",194],["T_VARIABLE","$this",196],["T_OBJECT_OPERATOR","->",196],["T_STRING","_props",196],["T_WHITESPACE"," ",196],"=",["T_WHITESPACE"," ",196],"(",["T_STRING","count",196],"(",["T_VARIABLE","$props2",196],")",["T_WHITESPACE"," ",196],">",["T_WHITESPACE"," ",196],["T_LNUMBER","0",196],")",["T_WHITESPACE"," ",196],"?",["T_WHITESPACE"," ",196],["T_VARIABLE","$props2",196],["T_WHITESPACE"," ",196],":",["T_WHITESPACE"," ",196],["T_STRING","null",196],";",["T_WHITESPACE","\n        ",196],["T_RETURN","return",197],["T_WHITESPACE"," ",197],["T_STRING","true",197],";",["T_WHITESPACE","\n    ",197],"}",["T_WHITESPACE","\n\n    ",198],["T_DOC_COMMENT","\/**\n     * Adds additional SREG data to OpenId 'id_res' response.\n     *\n     * @param array &$params response's var\/val pairs\n     * @return bool\n     *\/",200],["T_WHITESPACE","\n    ",205],["T_PUBLIC","public",206],["T_WHITESPACE"," ",206],["T_FUNCTION","function",206],["T_WHITESPACE"," ",206],["T_STRING","prepareResponse",206],"(","&",["T_VARIABLE","$params",206],")",["T_WHITESPACE","\n    ",206],"{",["T_WHITESPACE","\n        ",207],["T_IF","if",208],["T_WHITESPACE"," ",208],"(",["T_STRING","is_array",208],"(",["T_VARIABLE","$this",208],["T_OBJECT_OPERATOR","->",208],["T_STRING","_props",208],")",["T_WHITESPACE"," ",208],["T_BOOLEAN_AND","&&",208],["T_WHITESPACE"," ",208],["T_STRING","count",208],"(",["T_VARIABLE","$this",208],["T_OBJECT_OPERATOR","->",208],["T_STRING","_props",208],")",["T_WHITESPACE"," ",208],">",["T_WHITESPACE"," ",208],["T_LNUMBER","0",208],")",["T_WHITESPACE"," ",208],"{",["T_WHITESPACE","\n            ",208],["T_IF","if",209],["T_WHITESPACE"," ",209],"(",["T_VARIABLE","$this",209],["T_OBJECT_OPERATOR","->",209],["T_STRING","_version",209],["T_WHITESPACE"," ",209],["T_IS_GREATER_OR_EQUAL",">=",209],["T_WHITESPACE"," ",209],["T_DNUMBER","1.1",209],")",["T_WHITESPACE"," ",209],"{",["T_WHITESPACE","\n                ",209],["T_VARIABLE","$params",210],"[",["T_CONSTANT_ENCAPSED_STRING","'openid.ns.sreg'",210],"]",["T_WHITESPACE"," ",210],"=",["T_WHITESPACE"," ",210],["T_STRING","Zend_OpenId_Extension_Sreg",210],["T_DOUBLE_COLON","::",210],["T_STRING","NAMESPACE_1_1",210],";",["T_WHITESPACE","\n            ",210],"}",["T_WHITESPACE","\n            ",211],["T_FOREACH","foreach",212],["T_WHITESPACE"," ",212],"(",["T_STRING","self",212],["T_DOUBLE_COLON","::",212],["T_STRING","getSregProperties",212],"(",")",["T_WHITESPACE"," ",212],["T_AS","as",212],["T_WHITESPACE"," ",212],["T_VARIABLE","$prop",212],")",["T_WHITESPACE"," ",212],"{",["T_WHITESPACE","\n                ",212],["T_IF","if",213],["T_WHITESPACE"," ",213],"(","!",["T_EMPTY","empty",213],"(",["T_VARIABLE","$this",213],["T_OBJECT_OPERATOR","->",213],["T_STRING","_props",213],"[",["T_VARIABLE","$prop",213],"]",")",")",["T_WHITESPACE"," ",213],"{",["T_WHITESPACE","\n                    ",213],["T_VARIABLE","$params",214],"[",["T_CONSTANT_ENCAPSED_STRING","'openid.sreg.'",214],["T_WHITESPACE"," ",214],".",["T_WHITESPACE"," ",214],["T_VARIABLE","$prop",214],"]",["T_WHITESPACE"," ",214],"=",["T_WHITESPACE"," ",214],["T_VARIABLE","$this",214],["T_OBJECT_OPERATOR","->",214],["T_STRING","_props",214],"[",["T_VARIABLE","$prop",214],"]",";",["T_WHITESPACE","\n                ",214],"}",["T_WHITESPACE","\n            ",215],"}",["T_WHITESPACE","\n        ",216],"}",["T_WHITESPACE","\n        ",217],["T_RETURN","return",218],["T_WHITESPACE"," ",218],["T_STRING","true",218],";",["T_WHITESPACE","\n    ",218],"}",["T_WHITESPACE","\n\n    ",219],["T_DOC_COMMENT","\/**\n     * Parses OpenId 'id_res' response and sets object's properties according\n     * to 'openid.sreg.*' variables in response\n     *\n     * @param array $params response's var\/val pairs\n     * @return bool\n     *\/",221],["T_WHITESPACE","\n    ",227],["T_PUBLIC","public",228],["T_WHITESPACE"," ",228],["T_FUNCTION","function",228],["T_WHITESPACE"," ",228],["T_STRING","parseResponse",228],"(",["T_VARIABLE","$params",228],")",["T_WHITESPACE","\n    ",228],"{",["T_WHITESPACE","\n        ",229],["T_IF","if",230],["T_WHITESPACE"," ",230],"(",["T_ISSET","isset",230],"(",["T_VARIABLE","$params",230],"[",["T_CONSTANT_ENCAPSED_STRING","'openid_ns_sreg'",230],"]",")",["T_WHITESPACE"," ",230],["T_BOOLEAN_AND","&&",230],["T_WHITESPACE","\n            ",230],["T_VARIABLE","$params",231],"[",["T_CONSTANT_ENCAPSED_STRING","'openid_ns_sreg'",231],"]",["T_WHITESPACE"," ",231],["T_IS_IDENTICAL","===",231],["T_WHITESPACE"," ",231],["T_STRING","Zend_OpenId_Extension_Sreg",231],["T_DOUBLE_COLON","::",231],["T_STRING","NAMESPACE_1_1",231],")",["T_WHITESPACE"," ",231],"{",["T_WHITESPACE","\n            ",231],["T_VARIABLE","$this",232],["T_OBJECT_OPERATOR","->",232],["T_STRING","_version",232],"=",["T_WHITESPACE"," ",232],["T_DNUMBER","1.1",232],";",["T_WHITESPACE","\n        ",232],"}",["T_WHITESPACE"," ",233],["T_ELSE","else",233],["T_WHITESPACE"," ",233],"{",["T_WHITESPACE","\n            ",233],["T_VARIABLE","$this",234],["T_OBJECT_OPERATOR","->",234],["T_STRING","_version",234],"=",["T_WHITESPACE"," ",234],["T_DNUMBER","1.0",234],";",["T_WHITESPACE","\n        ",234],"}",["T_WHITESPACE","\n        ",235],["T_VARIABLE","$props",236],["T_WHITESPACE"," ",236],"=",["T_WHITESPACE"," ",236],["T_ARRAY","array",236],"(",")",";",["T_WHITESPACE","\n        ",236],["T_FOREACH","foreach",237],["T_WHITESPACE"," ",237],"(",["T_STRING","self",237],["T_DOUBLE_COLON","::",237],["T_STRING","getSregProperties",237],"(",")",["T_WHITESPACE"," ",237],["T_AS","as",237],["T_WHITESPACE"," ",237],["T_VARIABLE","$prop",237],")",["T_WHITESPACE"," ",237],"{",["T_WHITESPACE","\n            ",237],["T_IF","if",238],["T_WHITESPACE"," ",238],"(","!",["T_EMPTY","empty",238],"(",["T_VARIABLE","$params",238],"[",["T_CONSTANT_ENCAPSED_STRING","'openid_sreg_'",238],["T_WHITESPACE"," ",238],".",["T_WHITESPACE"," ",238],["T_VARIABLE","$prop",238],"]",")",")",["T_WHITESPACE"," ",238],"{",["T_WHITESPACE","\n                ",238],["T_VARIABLE","$props",239],"[",["T_VARIABLE","$prop",239],"]",["T_WHITESPACE"," ",239],"=",["T_WHITESPACE"," ",239],["T_VARIABLE","$params",239],"[",["T_CONSTANT_ENCAPSED_STRING","'openid_sreg_'",239],["T_WHITESPACE"," ",239],".",["T_WHITESPACE"," ",239],["T_VARIABLE","$prop",239],"]",";",["T_WHITESPACE","\n            ",239],"}",["T_WHITESPACE","\n        ",240],"}",["T_WHITESPACE","\n        ",241],["T_IF","if",242],["T_WHITESPACE"," ",242],"(",["T_ISSET","isset",242],"(",["T_VARIABLE","$this",242],["T_OBJECT_OPERATOR","->",242],["T_STRING","_props",242],")",["T_WHITESPACE"," ",242],["T_BOOLEAN_AND","&&",242],["T_WHITESPACE"," ",242],["T_STRING","is_array",242],"(",["T_VARIABLE","$this",242],["T_OBJECT_OPERATOR","->",242],["T_STRING","_props",242],")",")",["T_WHITESPACE"," ",242],"{",["T_WHITESPACE","\n            ",242],["T_FOREACH","foreach",243],["T_WHITESPACE"," ",243],"(",["T_STRING","self",243],["T_DOUBLE_COLON","::",243],["T_STRING","getSregProperties",243],"(",")",["T_WHITESPACE"," ",243],["T_AS","as",243],["T_WHITESPACE"," ",243],["T_VARIABLE","$prop",243],")",["T_WHITESPACE"," ",243],"{",["T_WHITESPACE","\n                ",243],["T_IF","if",244],["T_WHITESPACE"," ",244],"(",["T_ISSET","isset",244],"(",["T_VARIABLE","$this",244],["T_OBJECT_OPERATOR","->",244],["T_STRING","_props",244],"[",["T_VARIABLE","$prop",244],"]",")",["T_WHITESPACE"," ",244],["T_BOOLEAN_AND","&&",244],["T_WHITESPACE","\n                    ",244],["T_VARIABLE","$this",245],["T_OBJECT_OPERATOR","->",245],["T_STRING","_props",245],"[",["T_VARIABLE","$prop",245],"]",["T_WHITESPACE"," ",245],["T_BOOLEAN_AND","&&",245],["T_WHITESPACE","\n                    ",245],"!",["T_ISSET","isset",246],"(",["T_VARIABLE","$props",246],"[",["T_VARIABLE","$prop",246],"]",")",")",["T_WHITESPACE"," ",246],"{",["T_WHITESPACE","\n                    ",246],["T_RETURN","return",247],["T_WHITESPACE"," ",247],["T_STRING","false",247],";",["T_WHITESPACE","\n                ",247],"}",["T_WHITESPACE","\n            ",248],"}",["T_WHITESPACE","\n        ",249],"}",["T_WHITESPACE","\n        ",250],["T_VARIABLE","$this",251],["T_OBJECT_OPERATOR","->",251],["T_STRING","_props",251],["T_WHITESPACE"," ",251],"=",["T_WHITESPACE"," ",251],"(",["T_STRING","count",251],"(",["T_VARIABLE","$props",251],")",["T_WHITESPACE"," ",251],">",["T_WHITESPACE"," ",251],["T_LNUMBER","0",251],")",["T_WHITESPACE"," ",251],"?",["T_WHITESPACE"," ",251],["T_VARIABLE","$props",251],["T_WHITESPACE"," ",251],":",["T_WHITESPACE"," ",251],["T_STRING","null",251],";",["T_WHITESPACE","\n        ",251],["T_RETURN","return",252],["T_WHITESPACE"," ",252],["T_STRING","true",252],";",["T_WHITESPACE","\n    ",252],"}",["T_WHITESPACE","\n\n    ",253],["T_DOC_COMMENT","\/**\n     * Addes SREG properties that are allowed to be send to consumer to\n     * the given $data argument.\n     *\n     * @param array &$data data to be stored in tusted servers database\n     * @return bool\n     *\/",255],["T_WHITESPACE","\n    ",261],["T_PUBLIC","public",262],["T_WHITESPACE"," ",262],["T_FUNCTION","function",262],["T_WHITESPACE"," ",262],["T_STRING","getTrustData",262],"(","&",["T_VARIABLE","$data",262],")",["T_WHITESPACE","\n    ",262],"{",["T_WHITESPACE","\n        ",263],["T_VARIABLE","$data",264],"[",["T_STRING","get_class",264],"(",")","]",["T_WHITESPACE"," ",264],"=",["T_WHITESPACE"," ",264],["T_VARIABLE","$this",264],["T_OBJECT_OPERATOR","->",264],["T_STRING","getProperties",264],"(",")",";",["T_WHITESPACE","\n        ",264],["T_RETURN","return",265],["T_WHITESPACE"," ",265],["T_STRING","true",265],";",["T_WHITESPACE","\n    ",265],"}",["T_WHITESPACE","\n\n    ",266],["T_DOC_COMMENT","\/**\n     * Check if given $data contains necessury SREG properties to sutisfy\n     * OpenId request. On success sets SREG response properties from given\n     * $data and returns true, on failure returns false.\n     *\n     * @param array $data data from tusted servers database\n     * @return bool\n     *\/",268],["T_WHITESPACE","\n    ",275],["T_PUBLIC","public",276],["T_WHITESPACE"," ",276],["T_FUNCTION","function",276],["T_WHITESPACE"," ",276],["T_STRING","checkTrustData",276],"(",["T_VARIABLE","$data",276],")",["T_WHITESPACE","\n    ",276],"{",["T_WHITESPACE","\n        ",277],["T_IF","if",278],["T_WHITESPACE"," ",278],"(",["T_STRING","is_array",278],"(",["T_VARIABLE","$this",278],["T_OBJECT_OPERATOR","->",278],["T_STRING","_props",278],")",["T_WHITESPACE"," ",278],["T_BOOLEAN_AND","&&",278],["T_WHITESPACE"," ",278],["T_STRING","count",278],"(",["T_VARIABLE","$this",278],["T_OBJECT_OPERATOR","->",278],["T_STRING","_props",278],")",["T_WHITESPACE"," ",278],">",["T_WHITESPACE"," ",278],["T_LNUMBER","0",278],")",["T_WHITESPACE"," ",278],"{",["T_WHITESPACE","\n            ",278],["T_VARIABLE","$props",279],["T_WHITESPACE"," ",279],"=",["T_WHITESPACE"," ",279],["T_ARRAY","array",279],"(",")",";",["T_WHITESPACE","\n            ",279],["T_VARIABLE","$name",280],["T_WHITESPACE"," ",280],"=",["T_WHITESPACE"," ",280],["T_STRING","get_class",280],"(",")",";",["T_WHITESPACE","\n            ",280],["T_IF","if",281],["T_WHITESPACE"," ",281],"(",["T_ISSET","isset",281],"(",["T_VARIABLE","$data",281],"[",["T_VARIABLE","$name",281],"]",")",")",["T_WHITESPACE"," ",281],"{",["T_WHITESPACE","\n                ",281],["T_VARIABLE","$props",282],["T_WHITESPACE"," ",282],"=",["T_WHITESPACE"," ",282],["T_VARIABLE","$data",282],"[",["T_VARIABLE","$name",282],"]",";",["T_WHITESPACE","\n            ",282],"}",["T_WHITESPACE"," ",283],["T_ELSE","else",283],["T_WHITESPACE"," ",283],"{",["T_WHITESPACE","\n                ",283],["T_VARIABLE","$props",284],["T_WHITESPACE"," ",284],"=",["T_WHITESPACE"," ",284],["T_ARRAY","array",284],"(",")",";",["T_WHITESPACE","\n            ",284],"}",["T_WHITESPACE","\n            ",285],["T_VARIABLE","$props2",286],["T_WHITESPACE"," ",286],"=",["T_WHITESPACE"," ",286],["T_ARRAY","array",286],"(",")",";",["T_WHITESPACE","\n            ",286],["T_FOREACH","foreach",287],["T_WHITESPACE"," ",287],"(",["T_VARIABLE","$this",287],["T_OBJECT_OPERATOR","->",287],["T_STRING","_props",287],["T_WHITESPACE"," ",287],["T_AS","as",287],["T_WHITESPACE"," ",287],["T_VARIABLE","$prop",287],["T_WHITESPACE"," ",287],["T_DOUBLE_ARROW","=>",287],["T_WHITESPACE"," ",287],["T_VARIABLE","$req",287],")",["T_WHITESPACE"," ",287],"{",["T_WHITESPACE","\n                ",287],["T_IF","if",288],["T_WHITESPACE"," ",288],"(",["T_EMPTY","empty",288],"(",["T_VARIABLE","$props",288],"[",["T_VARIABLE","$prop",288],"]",")",")",["T_WHITESPACE"," ",288],"{",["T_WHITESPACE","\n                    ",288],["T_IF","if",289],["T_WHITESPACE"," ",289],"(",["T_VARIABLE","$req",289],")",["T_WHITESPACE"," ",289],"{",["T_WHITESPACE","\n                        ",289],["T_RETURN","return",290],["T_WHITESPACE"," ",290],["T_STRING","false",290],";",["T_WHITESPACE","\n                    ",290],"}",["T_WHITESPACE","\n                ",291],"}",["T_WHITESPACE"," ",292],["T_ELSE","else",292],["T_WHITESPACE"," ",292],"{",["T_WHITESPACE","\n                    ",292],["T_VARIABLE","$props2",293],"[",["T_VARIABLE","$prop",293],"]",["T_WHITESPACE"," ",293],"=",["T_WHITESPACE"," ",293],["T_VARIABLE","$props",293],"[",["T_VARIABLE","$prop",293],"]",";",["T_WHITESPACE","\n                ",293],"}",["T_WHITESPACE","\n            ",294],"}",["T_WHITESPACE","\n            ",295],["T_VARIABLE","$this",296],["T_OBJECT_OPERATOR","->",296],["T_STRING","_props",296],["T_WHITESPACE"," ",296],"=",["T_WHITESPACE"," ",296],"(",["T_STRING","count",296],"(",["T_VARIABLE","$props2",296],")",["T_WHITESPACE"," ",296],">",["T_WHITESPACE"," ",296],["T_LNUMBER","0",296],")",["T_WHITESPACE"," ",296],"?",["T_WHITESPACE"," ",296],["T_VARIABLE","$props2",296],["T_WHITESPACE"," ",296],":",["T_WHITESPACE"," ",296],["T_STRING","null",296],";",["T_WHITESPACE","\n        ",296],"}",["T_WHITESPACE","\n        ",297],["T_RETURN","return",298],["T_WHITESPACE"," ",298],["T_STRING","true",298],";",["T_WHITESPACE","\n    ",298],"}",["T_WHITESPACE","\n",299],"}",["T_WHITESPACE","\n",300]]
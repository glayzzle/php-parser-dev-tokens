[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Zend Framework\n *\n * LICENSE\n *\n * This source file is subject to the new BSD license that is bundled\n * with this package in the file LICENSE.txt.\n * It is also available through the world-wide-web at this URL:\n * http:\/\/framework.zend.com\/license\/new-bsd\n * If you did not receive a copy of the license and are unable to\n * obtain it through the world-wide-web, please send an email\n * to license@zend.com so we can send you a copy immediately.\n *\n * @category   Zend\n * @package    Zend_Search_Lucene\n * @subpackage Search\n * @copyright  Copyright (c) 2005-2015 Zend Technologies USA Inc. (http:\/\/www.zend.com)\n * @license    http:\/\/framework.zend.com\/license\/new-bsd     New BSD License\n * @version    $Id$\n *\/",2],["T_WHITESPACE","\n\n\n",21],["T_DOC_COMMENT","\/** Zend_Search_Lucene_Search_Query *\/",24],["T_WHITESPACE","\n",24],["T_COMMENT","#require_once 'Zend\/Search\/Lucene\/Search\/Query.php';\n",25],["T_WHITESPACE","\n\n",26],["T_DOC_COMMENT","\/**\n * A Query that matches documents containing a particular sequence of terms.\n *\n * @category   Zend\n * @package    Zend_Search_Lucene\n * @subpackage Search\n * @copyright  Copyright (c) 2005-2015 Zend Technologies USA Inc. (http:\/\/www.zend.com)\n * @license    http:\/\/framework.zend.com\/license\/new-bsd     New BSD License\n *\/",28],["T_WHITESPACE","\n",36],["T_CLASS","class",37],["T_WHITESPACE"," ",37],["T_STRING","Zend_Search_Lucene_Search_Query_Phrase",37],["T_WHITESPACE"," ",37],["T_EXTENDS","extends",37],["T_WHITESPACE"," ",37],["T_STRING","Zend_Search_Lucene_Search_Query",37],["T_WHITESPACE","\n",37],"{",["T_WHITESPACE","\n    ",38],["T_DOC_COMMENT","\/**\n     * Terms to find.\n     * Array of Zend_Search_Lucene_Index_Term objects.\n     *\n     * @var array\n     *\/",39],["T_WHITESPACE","\n    ",44],["T_PRIVATE","private",45],["T_WHITESPACE"," ",45],["T_VARIABLE","$_terms",45],";",["T_WHITESPACE","\n\n    ",45],["T_DOC_COMMENT","\/**\n     * Term positions (relative positions of terms within the phrase).\n     * Array of integers\n     *\n     * @var array\n     *\/",47],["T_WHITESPACE","\n    ",52],["T_PRIVATE","private",53],["T_WHITESPACE"," ",53],["T_VARIABLE","$_offsets",53],";",["T_WHITESPACE","\n\n    ",53],["T_DOC_COMMENT","\/**\n     * Sets the number of other words permitted between words in query phrase.\n     * If zero, then this is an exact phrase search.  For larger values this works\n     * like a WITHIN or NEAR operator.\n     *\n     * The slop is in fact an edit-distance, where the units correspond to\n     * moves of terms in the query phrase out of position.  For example, to switch\n     * the order of two words requires two moves (the first move places the words\n     * atop one another), so to permit re-orderings of phrases, the slop must be\n     * at least two.\n     * More exact matches are scored higher than sloppier matches, thus search\n     * results are sorted by exactness.\n     *\n     * The slop is zero by default, requiring exact matches.\n     *\n     * @var integer\n     *\/",55],["T_WHITESPACE","\n    ",71],["T_PRIVATE","private",72],["T_WHITESPACE"," ",72],["T_VARIABLE","$_slop",72],";",["T_WHITESPACE","\n\n    ",72],["T_DOC_COMMENT","\/**\n     * Result vector.\n     *\n     * @var array\n     *\/",74],["T_WHITESPACE","\n    ",78],["T_PRIVATE","private",79],["T_WHITESPACE"," ",79],["T_VARIABLE","$_resVector",79],["T_WHITESPACE"," ",79],"=",["T_WHITESPACE"," ",79],["T_STRING","null",79],";",["T_WHITESPACE","\n\n    ",79],["T_DOC_COMMENT","\/**\n     * Terms positions vectors.\n     * Array of Arrays:\n     * term1Id => (docId => array( pos1, pos2, ... ), ...)\n     * term2Id => (docId => array( pos1, pos2, ... ), ...)\n     *\n     * @var array\n     *\/",81],["T_WHITESPACE","\n    ",88],["T_PRIVATE","private",89],["T_WHITESPACE"," ",89],["T_VARIABLE","$_termsPositions",89],["T_WHITESPACE"," ",89],"=",["T_WHITESPACE"," ",89],["T_ARRAY","array",89],"(",")",";",["T_WHITESPACE","\n\n    ",89],["T_DOC_COMMENT","\/**\n     * Class constructor.  Create a new prase query.\n     *\n     * @param string $field    Field to search.\n     * @param array  $terms    Terms to search Array of strings.\n     * @param array  $offsets  Relative term positions. Array of integers.\n     * @throws Zend_Search_Lucene_Exception\n     *\/",91],["T_WHITESPACE","\n    ",98],["T_PUBLIC","public",99],["T_WHITESPACE"," ",99],["T_FUNCTION","function",99],["T_WHITESPACE"," ",99],["T_STRING","__construct",99],"(",["T_VARIABLE","$terms",99],["T_WHITESPACE"," ",99],"=",["T_WHITESPACE"," ",99],["T_STRING","null",99],",",["T_WHITESPACE"," ",99],["T_VARIABLE","$offsets",99],["T_WHITESPACE"," ",99],"=",["T_WHITESPACE"," ",99],["T_STRING","null",99],",",["T_WHITESPACE"," ",99],["T_VARIABLE","$field",99],["T_WHITESPACE"," ",99],"=",["T_WHITESPACE"," ",99],["T_STRING","null",99],")",["T_WHITESPACE","\n    ",99],"{",["T_WHITESPACE","\n        ",100],["T_VARIABLE","$this",101],["T_OBJECT_OPERATOR","->",101],["T_STRING","_slop",101],["T_WHITESPACE"," ",101],"=",["T_WHITESPACE"," ",101],["T_LNUMBER","0",101],";",["T_WHITESPACE","\n\n        ",101],["T_IF","if",103],["T_WHITESPACE"," ",103],"(",["T_STRING","is_array",103],"(",["T_VARIABLE","$terms",103],")",")",["T_WHITESPACE"," ",103],"{",["T_WHITESPACE","\n            ",103],["T_VARIABLE","$this",104],["T_OBJECT_OPERATOR","->",104],["T_STRING","_terms",104],["T_WHITESPACE"," ",104],"=",["T_WHITESPACE"," ",104],["T_ARRAY","array",104],"(",")",";",["T_WHITESPACE","\n            ",104],["T_COMMENT","#require_once 'Zend\/Search\/Lucene\/Index\/Term.php';\n",105],["T_WHITESPACE","            ",106],["T_FOREACH","foreach",106],["T_WHITESPACE"," ",106],"(",["T_VARIABLE","$terms",106],["T_WHITESPACE"," ",106],["T_AS","as",106],["T_WHITESPACE"," ",106],["T_VARIABLE","$termId",106],["T_WHITESPACE"," ",106],["T_DOUBLE_ARROW","=>",106],["T_WHITESPACE"," ",106],["T_VARIABLE","$termText",106],")",["T_WHITESPACE"," ",106],"{",["T_WHITESPACE","\n                ",106],["T_VARIABLE","$this",107],["T_OBJECT_OPERATOR","->",107],["T_STRING","_terms",107],"[",["T_VARIABLE","$termId",107],"]",["T_WHITESPACE"," ",107],"=",["T_WHITESPACE"," ",107],"(",["T_VARIABLE","$field",107],["T_WHITESPACE"," ",107],["T_IS_NOT_IDENTICAL","!==",107],["T_WHITESPACE"," ",107],["T_STRING","null",107],")","?",["T_WHITESPACE"," ",107],["T_NEW","new",107],["T_WHITESPACE"," ",107],["T_STRING","Zend_Search_Lucene_Index_Term",107],"(",["T_VARIABLE","$termText",107],",",["T_WHITESPACE"," ",107],["T_VARIABLE","$field",107],")",":",["T_WHITESPACE","\n                                                            ",107],["T_NEW","new",108],["T_WHITESPACE"," ",108],["T_STRING","Zend_Search_Lucene_Index_Term",108],"(",["T_VARIABLE","$termText",108],")",";",["T_WHITESPACE","\n            ",108],"}",["T_WHITESPACE","\n        ",109],"}",["T_WHITESPACE"," ",110],["T_ELSE","else",110],["T_WHITESPACE"," ",110],["T_IF","if",110],["T_WHITESPACE"," ",110],"(",["T_VARIABLE","$terms",110],["T_WHITESPACE"," ",110],["T_IS_IDENTICAL","===",110],["T_WHITESPACE"," ",110],["T_STRING","null",110],")",["T_WHITESPACE"," ",110],"{",["T_WHITESPACE","\n            ",110],["T_VARIABLE","$this",111],["T_OBJECT_OPERATOR","->",111],["T_STRING","_terms",111],["T_WHITESPACE"," ",111],"=",["T_WHITESPACE"," ",111],["T_ARRAY","array",111],"(",")",";",["T_WHITESPACE","\n        ",111],"}",["T_WHITESPACE"," ",112],["T_ELSE","else",112],["T_WHITESPACE"," ",112],"{",["T_WHITESPACE","\n            ",112],["T_COMMENT","#require_once 'Zend\/Search\/Lucene\/Exception.php';\n",113],["T_WHITESPACE","            ",114],["T_THROW","throw",114],["T_WHITESPACE"," ",114],["T_NEW","new",114],["T_WHITESPACE"," ",114],["T_STRING","Zend_Search_Lucene_Exception",114],"(",["T_CONSTANT_ENCAPSED_STRING","'terms argument must be array of strings or null'",114],")",";",["T_WHITESPACE","\n        ",114],"}",["T_WHITESPACE","\n\n        ",115],["T_IF","if",117],["T_WHITESPACE"," ",117],"(",["T_STRING","is_array",117],"(",["T_VARIABLE","$offsets",117],")",")",["T_WHITESPACE"," ",117],"{",["T_WHITESPACE","\n            ",117],["T_IF","if",118],["T_WHITESPACE"," ",118],"(",["T_STRING","count",118],"(",["T_VARIABLE","$this",118],["T_OBJECT_OPERATOR","->",118],["T_STRING","_terms",118],")",["T_WHITESPACE"," ",118],["T_IS_NOT_EQUAL","!=",118],["T_WHITESPACE"," ",118],["T_STRING","count",118],"(",["T_VARIABLE","$offsets",118],")",")",["T_WHITESPACE"," ",118],"{",["T_WHITESPACE","\n                ",118],["T_COMMENT","#require_once 'Zend\/Search\/Lucene\/Exception.php';\n",119],["T_WHITESPACE","                ",120],["T_THROW","throw",120],["T_WHITESPACE"," ",120],["T_NEW","new",120],["T_WHITESPACE"," ",120],["T_STRING","Zend_Search_Lucene_Exception",120],"(",["T_CONSTANT_ENCAPSED_STRING","'terms and offsets arguments must have the same size.'",120],")",";",["T_WHITESPACE","\n            ",120],"}",["T_WHITESPACE","\n            ",121],["T_VARIABLE","$this",122],["T_OBJECT_OPERATOR","->",122],["T_STRING","_offsets",122],["T_WHITESPACE"," ",122],"=",["T_WHITESPACE"," ",122],["T_VARIABLE","$offsets",122],";",["T_WHITESPACE","\n        ",122],"}",["T_WHITESPACE"," ",123],["T_ELSE","else",123],["T_WHITESPACE"," ",123],["T_IF","if",123],["T_WHITESPACE"," ",123],"(",["T_VARIABLE","$offsets",123],["T_WHITESPACE"," ",123],["T_IS_IDENTICAL","===",123],["T_WHITESPACE"," ",123],["T_STRING","null",123],")",["T_WHITESPACE"," ",123],"{",["T_WHITESPACE","\n            ",123],["T_VARIABLE","$this",124],["T_OBJECT_OPERATOR","->",124],["T_STRING","_offsets",124],["T_WHITESPACE"," ",124],"=",["T_WHITESPACE"," ",124],["T_ARRAY","array",124],"(",")",";",["T_WHITESPACE","\n            ",124],["T_FOREACH","foreach",125],["T_WHITESPACE"," ",125],"(",["T_VARIABLE","$this",125],["T_OBJECT_OPERATOR","->",125],["T_STRING","_terms",125],["T_WHITESPACE"," ",125],["T_AS","as",125],["T_WHITESPACE"," ",125],["T_VARIABLE","$termId",125],["T_WHITESPACE"," ",125],["T_DOUBLE_ARROW","=>",125],["T_WHITESPACE"," ",125],["T_VARIABLE","$term",125],")",["T_WHITESPACE"," ",125],"{",["T_WHITESPACE","\n                ",125],["T_VARIABLE","$position",126],["T_WHITESPACE"," ",126],"=",["T_WHITESPACE"," ",126],["T_STRING","count",126],"(",["T_VARIABLE","$this",126],["T_OBJECT_OPERATOR","->",126],["T_STRING","_offsets",126],")",";",["T_WHITESPACE","\n                ",126],["T_VARIABLE","$this",127],["T_OBJECT_OPERATOR","->",127],["T_STRING","_offsets",127],"[",["T_VARIABLE","$termId",127],"]",["T_WHITESPACE"," ",127],"=",["T_WHITESPACE"," ",127],["T_VARIABLE","$position",127],";",["T_WHITESPACE","\n            ",127],"}",["T_WHITESPACE","\n        ",128],"}",["T_WHITESPACE"," ",129],["T_ELSE","else",129],["T_WHITESPACE"," ",129],"{",["T_WHITESPACE","\n            ",129],["T_COMMENT","#require_once 'Zend\/Search\/Lucene\/Exception.php';\n",130],["T_WHITESPACE","            ",131],["T_THROW","throw",131],["T_WHITESPACE"," ",131],["T_NEW","new",131],["T_WHITESPACE"," ",131],["T_STRING","Zend_Search_Lucene_Exception",131],"(",["T_CONSTANT_ENCAPSED_STRING","'offsets argument must be array of strings or null'",131],")",";",["T_WHITESPACE","\n        ",131],"}",["T_WHITESPACE","\n    ",132],"}",["T_WHITESPACE","\n\n    ",133],["T_DOC_COMMENT","\/**\n     * Set slop\n     *\n     * @param integer $slop\n     *\/",135],["T_WHITESPACE","\n    ",139],["T_PUBLIC","public",140],["T_WHITESPACE"," ",140],["T_FUNCTION","function",140],["T_WHITESPACE"," ",140],["T_STRING","setSlop",140],"(",["T_VARIABLE","$slop",140],")",["T_WHITESPACE","\n    ",140],"{",["T_WHITESPACE","\n        ",141],["T_VARIABLE","$this",142],["T_OBJECT_OPERATOR","->",142],["T_STRING","_slop",142],["T_WHITESPACE"," ",142],"=",["T_WHITESPACE"," ",142],["T_VARIABLE","$slop",142],";",["T_WHITESPACE","\n    ",142],"}",["T_WHITESPACE","\n\n\n    ",143],["T_DOC_COMMENT","\/**\n     * Get slop\n     *\n     * @return integer\n     *\/",146],["T_WHITESPACE","\n    ",150],["T_PUBLIC","public",151],["T_WHITESPACE"," ",151],["T_FUNCTION","function",151],["T_WHITESPACE"," ",151],["T_STRING","getSlop",151],"(",")",["T_WHITESPACE","\n    ",151],"{",["T_WHITESPACE","\n        ",152],["T_RETURN","return",153],["T_WHITESPACE"," ",153],["T_VARIABLE","$this",153],["T_OBJECT_OPERATOR","->",153],["T_STRING","_slop",153],";",["T_WHITESPACE","\n    ",153],"}",["T_WHITESPACE","\n\n\n    ",154],["T_DOC_COMMENT","\/**\n     * Adds a term to the end of the query phrase.\n     * The relative position of the term is specified explicitly or the one immediately\n     * after the last term added.\n     *\n     * @param Zend_Search_Lucene_Index_Term $term\n     * @param integer $position\n     *\/",157],["T_WHITESPACE","\n    ",164],["T_PUBLIC","public",165],["T_WHITESPACE"," ",165],["T_FUNCTION","function",165],["T_WHITESPACE"," ",165],["T_STRING","addTerm",165],"(",["T_STRING","Zend_Search_Lucene_Index_Term",165],["T_WHITESPACE"," ",165],["T_VARIABLE","$term",165],",",["T_WHITESPACE"," ",165],["T_VARIABLE","$position",165],["T_WHITESPACE"," ",165],"=",["T_WHITESPACE"," ",165],["T_STRING","null",165],")",["T_WHITESPACE"," ",165],"{",["T_WHITESPACE","\n        ",165],["T_IF","if",166],["T_WHITESPACE"," ",166],"(","(",["T_STRING","count",166],"(",["T_VARIABLE","$this",166],["T_OBJECT_OPERATOR","->",166],["T_STRING","_terms",166],")",["T_WHITESPACE"," ",166],["T_IS_NOT_EQUAL","!=",166],["T_WHITESPACE"," ",166],["T_LNUMBER","0",166],")",["T_BOOLEAN_AND","&&",166],"(",["T_STRING","end",166],"(",["T_VARIABLE","$this",166],["T_OBJECT_OPERATOR","->",166],["T_STRING","_terms",166],")",["T_OBJECT_OPERATOR","->",166],["T_STRING","field",166],["T_WHITESPACE"," ",166],["T_IS_NOT_EQUAL","!=",166],["T_WHITESPACE"," ",166],["T_VARIABLE","$term",166],["T_OBJECT_OPERATOR","->",166],["T_STRING","field",166],")",")",["T_WHITESPACE"," ",166],"{",["T_WHITESPACE","\n            ",166],["T_COMMENT","#require_once 'Zend\/Search\/Lucene\/Exception.php';\n",167],["T_WHITESPACE","            ",168],["T_THROW","throw",168],["T_WHITESPACE"," ",168],["T_NEW","new",168],["T_WHITESPACE"," ",168],["T_STRING","Zend_Search_Lucene_Exception",168],"(",["T_CONSTANT_ENCAPSED_STRING","'All phrase terms must be in the same field: '",168],["T_WHITESPACE"," ",168],".",["T_WHITESPACE","\n                                                   ",168],["T_VARIABLE","$term",169],["T_OBJECT_OPERATOR","->",169],["T_STRING","field",169],["T_WHITESPACE"," ",169],".",["T_WHITESPACE"," ",169],["T_CONSTANT_ENCAPSED_STRING","':'",169],["T_WHITESPACE"," ",169],".",["T_WHITESPACE"," ",169],["T_VARIABLE","$term",169],["T_OBJECT_OPERATOR","->",169],["T_STRING","text",169],")",";",["T_WHITESPACE","\n        ",169],"}",["T_WHITESPACE","\n\n        ",170],["T_VARIABLE","$this",172],["T_OBJECT_OPERATOR","->",172],["T_STRING","_terms",172],"[","]",["T_WHITESPACE"," ",172],"=",["T_WHITESPACE"," ",172],["T_VARIABLE","$term",172],";",["T_WHITESPACE","\n        ",172],["T_IF","if",173],["T_WHITESPACE"," ",173],"(",["T_VARIABLE","$position",173],["T_WHITESPACE"," ",173],["T_IS_NOT_IDENTICAL","!==",173],["T_WHITESPACE"," ",173],["T_STRING","null",173],")",["T_WHITESPACE"," ",173],"{",["T_WHITESPACE","\n            ",173],["T_VARIABLE","$this",174],["T_OBJECT_OPERATOR","->",174],["T_STRING","_offsets",174],"[","]",["T_WHITESPACE"," ",174],"=",["T_WHITESPACE"," ",174],["T_VARIABLE","$position",174],";",["T_WHITESPACE","\n        ",174],"}",["T_WHITESPACE"," ",175],["T_ELSE","else",175],["T_WHITESPACE"," ",175],["T_IF","if",175],["T_WHITESPACE"," ",175],"(",["T_STRING","count",175],"(",["T_VARIABLE","$this",175],["T_OBJECT_OPERATOR","->",175],["T_STRING","_offsets",175],")",["T_WHITESPACE"," ",175],["T_IS_NOT_EQUAL","!=",175],["T_WHITESPACE"," ",175],["T_LNUMBER","0",175],")",["T_WHITESPACE"," ",175],"{",["T_WHITESPACE","\n            ",175],["T_VARIABLE","$this",176],["T_OBJECT_OPERATOR","->",176],["T_STRING","_offsets",176],"[","]",["T_WHITESPACE"," ",176],"=",["T_WHITESPACE"," ",176],["T_STRING","end",176],"(",["T_VARIABLE","$this",176],["T_OBJECT_OPERATOR","->",176],["T_STRING","_offsets",176],")",["T_WHITESPACE"," ",176],"+",["T_WHITESPACE"," ",176],["T_LNUMBER","1",176],";",["T_WHITESPACE","\n        ",176],"}",["T_WHITESPACE"," ",177],["T_ELSE","else",177],["T_WHITESPACE"," ",177],"{",["T_WHITESPACE","\n            ",177],["T_VARIABLE","$this",178],["T_OBJECT_OPERATOR","->",178],["T_STRING","_offsets",178],"[","]",["T_WHITESPACE"," ",178],"=",["T_WHITESPACE"," ",178],["T_LNUMBER","0",178],";",["T_WHITESPACE","\n        ",178],"}",["T_WHITESPACE","\n    ",179],"}",["T_WHITESPACE","\n\n\n    ",180],["T_DOC_COMMENT","\/**\n     * Re-write query into primitive queries in the context of specified index\n     *\n     * @param Zend_Search_Lucene_Interface $index\n     * @return Zend_Search_Lucene_Search_Query\n     *\/",183],["T_WHITESPACE","\n    ",188],["T_PUBLIC","public",189],["T_WHITESPACE"," ",189],["T_FUNCTION","function",189],["T_WHITESPACE"," ",189],["T_STRING","rewrite",189],"(",["T_STRING","Zend_Search_Lucene_Interface",189],["T_WHITESPACE"," ",189],["T_VARIABLE","$index",189],")",["T_WHITESPACE","\n    ",189],"{",["T_WHITESPACE","\n        ",190],["T_IF","if",191],["T_WHITESPACE"," ",191],"(",["T_STRING","count",191],"(",["T_VARIABLE","$this",191],["T_OBJECT_OPERATOR","->",191],["T_STRING","_terms",191],")",["T_WHITESPACE"," ",191],["T_IS_EQUAL","==",191],["T_WHITESPACE"," ",191],["T_LNUMBER","0",191],")",["T_WHITESPACE"," ",191],"{",["T_WHITESPACE","\n            ",191],["T_COMMENT","#require_once 'Zend\/Search\/Lucene\/Search\/Query\/Empty.php';\n",192],["T_WHITESPACE","            ",193],["T_RETURN","return",193],["T_WHITESPACE"," ",193],["T_NEW","new",193],["T_WHITESPACE"," ",193],["T_STRING","Zend_Search_Lucene_Search_Query_Empty",193],"(",")",";",["T_WHITESPACE","\n        ",193],"}",["T_WHITESPACE"," ",194],["T_ELSE","else",194],["T_WHITESPACE"," ",194],["T_IF","if",194],["T_WHITESPACE"," ",194],"(",["T_VARIABLE","$this",194],["T_OBJECT_OPERATOR","->",194],["T_STRING","_terms",194],"[",["T_LNUMBER","0",194],"]",["T_OBJECT_OPERATOR","->",194],["T_STRING","field",194],["T_WHITESPACE"," ",194],["T_IS_NOT_IDENTICAL","!==",194],["T_WHITESPACE"," ",194],["T_STRING","null",194],")",["T_WHITESPACE"," ",194],"{",["T_WHITESPACE","\n            ",194],["T_RETURN","return",195],["T_WHITESPACE"," ",195],["T_VARIABLE","$this",195],";",["T_WHITESPACE","\n        ",195],"}",["T_WHITESPACE"," ",196],["T_ELSE","else",196],["T_WHITESPACE"," ",196],"{",["T_WHITESPACE","\n            ",196],["T_COMMENT","#require_once 'Zend\/Search\/Lucene\/Search\/Query\/Boolean.php';\n",197],["T_WHITESPACE","            ",198],["T_VARIABLE","$query",198],["T_WHITESPACE"," ",198],"=",["T_WHITESPACE"," ",198],["T_NEW","new",198],["T_WHITESPACE"," ",198],["T_STRING","Zend_Search_Lucene_Search_Query_Boolean",198],"(",")",";",["T_WHITESPACE","\n            ",198],["T_VARIABLE","$query",199],["T_OBJECT_OPERATOR","->",199],["T_STRING","setBoost",199],"(",["T_VARIABLE","$this",199],["T_OBJECT_OPERATOR","->",199],["T_STRING","getBoost",199],"(",")",")",";",["T_WHITESPACE","\n\n            ",199],["T_FOREACH","foreach",201],["T_WHITESPACE"," ",201],"(",["T_VARIABLE","$index",201],["T_OBJECT_OPERATOR","->",201],["T_STRING","getFieldNames",201],"(",["T_STRING","true",201],")",["T_WHITESPACE"," ",201],["T_AS","as",201],["T_WHITESPACE"," ",201],["T_VARIABLE","$fieldName",201],")",["T_WHITESPACE"," ",201],"{",["T_WHITESPACE","\n                ",201],["T_VARIABLE","$subquery",202],["T_WHITESPACE"," ",202],"=",["T_WHITESPACE"," ",202],["T_NEW","new",202],["T_WHITESPACE"," ",202],["T_STRING","Zend_Search_Lucene_Search_Query_Phrase",202],"(",")",";",["T_WHITESPACE","\n                ",202],["T_VARIABLE","$subquery",203],["T_OBJECT_OPERATOR","->",203],["T_STRING","setSlop",203],"(",["T_VARIABLE","$this",203],["T_OBJECT_OPERATOR","->",203],["T_STRING","getSlop",203],"(",")",")",";",["T_WHITESPACE","\n\n                ",203],["T_COMMENT","#require_once 'Zend\/Search\/Lucene\/Index\/Term.php';\n",205],["T_WHITESPACE","                ",206],["T_FOREACH","foreach",206],["T_WHITESPACE"," ",206],"(",["T_VARIABLE","$this",206],["T_OBJECT_OPERATOR","->",206],["T_STRING","_terms",206],["T_WHITESPACE"," ",206],["T_AS","as",206],["T_WHITESPACE"," ",206],["T_VARIABLE","$termId",206],["T_WHITESPACE"," ",206],["T_DOUBLE_ARROW","=>",206],["T_WHITESPACE"," ",206],["T_VARIABLE","$term",206],")",["T_WHITESPACE"," ",206],"{",["T_WHITESPACE","\n                    ",206],["T_VARIABLE","$qualifiedTerm",207],["T_WHITESPACE"," ",207],"=",["T_WHITESPACE"," ",207],["T_NEW","new",207],["T_WHITESPACE"," ",207],["T_STRING","Zend_Search_Lucene_Index_Term",207],"(",["T_VARIABLE","$term",207],["T_OBJECT_OPERATOR","->",207],["T_STRING","text",207],",",["T_WHITESPACE"," ",207],["T_VARIABLE","$fieldName",207],")",";",["T_WHITESPACE","\n\n                    ",207],["T_VARIABLE","$subquery",209],["T_OBJECT_OPERATOR","->",209],["T_STRING","addTerm",209],"(",["T_VARIABLE","$qualifiedTerm",209],",",["T_WHITESPACE"," ",209],["T_VARIABLE","$this",209],["T_OBJECT_OPERATOR","->",209],["T_STRING","_offsets",209],"[",["T_VARIABLE","$termId",209],"]",")",";",["T_WHITESPACE","\n                ",209],"}",["T_WHITESPACE","\n\n                ",210],["T_VARIABLE","$query",212],["T_OBJECT_OPERATOR","->",212],["T_STRING","addSubquery",212],"(",["T_VARIABLE","$subquery",212],")",";",["T_WHITESPACE","\n            ",212],"}",["T_WHITESPACE","\n\n            ",213],["T_RETURN","return",215],["T_WHITESPACE"," ",215],["T_VARIABLE","$query",215],";",["T_WHITESPACE","\n        ",215],"}",["T_WHITESPACE","\n    ",216],"}",["T_WHITESPACE","\n\n    ",217],["T_DOC_COMMENT","\/**\n     * Optimize query in the context of specified index\n     *\n     * @param Zend_Search_Lucene_Interface $index\n     * @return Zend_Search_Lucene_Search_Query\n     *\/",219],["T_WHITESPACE","\n    ",224],["T_PUBLIC","public",225],["T_WHITESPACE"," ",225],["T_FUNCTION","function",225],["T_WHITESPACE"," ",225],["T_STRING","optimize",225],"(",["T_STRING","Zend_Search_Lucene_Interface",225],["T_WHITESPACE"," ",225],["T_VARIABLE","$index",225],")",["T_WHITESPACE","\n    ",225],"{",["T_WHITESPACE","\n        ",226],["T_COMMENT","\/\/ Check, that index contains all phrase terms\n",227],["T_WHITESPACE","        ",228],["T_FOREACH","foreach",228],["T_WHITESPACE"," ",228],"(",["T_VARIABLE","$this",228],["T_OBJECT_OPERATOR","->",228],["T_STRING","_terms",228],["T_WHITESPACE"," ",228],["T_AS","as",228],["T_WHITESPACE"," ",228],["T_VARIABLE","$term",228],")",["T_WHITESPACE"," ",228],"{",["T_WHITESPACE","\n            ",228],["T_IF","if",229],["T_WHITESPACE"," ",229],"(","!",["T_VARIABLE","$index",229],["T_OBJECT_OPERATOR","->",229],["T_STRING","hasTerm",229],"(",["T_VARIABLE","$term",229],")",")",["T_WHITESPACE"," ",229],"{",["T_WHITESPACE","\n                ",229],["T_COMMENT","#require_once 'Zend\/Search\/Lucene\/Search\/Query\/Empty.php';\n",230],["T_WHITESPACE","                ",231],["T_RETURN","return",231],["T_WHITESPACE"," ",231],["T_NEW","new",231],["T_WHITESPACE"," ",231],["T_STRING","Zend_Search_Lucene_Search_Query_Empty",231],"(",")",";",["T_WHITESPACE","\n            ",231],"}",["T_WHITESPACE","\n        ",232],"}",["T_WHITESPACE","\n\n        ",233],["T_IF","if",235],["T_WHITESPACE"," ",235],"(",["T_STRING","count",235],"(",["T_VARIABLE","$this",235],["T_OBJECT_OPERATOR","->",235],["T_STRING","_terms",235],")",["T_WHITESPACE"," ",235],["T_IS_EQUAL","==",235],["T_WHITESPACE"," ",235],["T_LNUMBER","1",235],")",["T_WHITESPACE"," ",235],"{",["T_WHITESPACE","\n            ",235],["T_COMMENT","\/\/ It's one term query\n",236],["T_WHITESPACE","            ",237],["T_COMMENT","#require_once 'Zend\/Search\/Lucene\/Search\/Query\/Term.php';\n",237],["T_WHITESPACE","            ",238],["T_VARIABLE","$optimizedQuery",238],["T_WHITESPACE"," ",238],"=",["T_WHITESPACE"," ",238],["T_NEW","new",238],["T_WHITESPACE"," ",238],["T_STRING","Zend_Search_Lucene_Search_Query_Term",238],"(",["T_STRING","reset",238],"(",["T_VARIABLE","$this",238],["T_OBJECT_OPERATOR","->",238],["T_STRING","_terms",238],")",")",";",["T_WHITESPACE","\n            ",238],["T_VARIABLE","$optimizedQuery",239],["T_OBJECT_OPERATOR","->",239],["T_STRING","setBoost",239],"(",["T_VARIABLE","$this",239],["T_OBJECT_OPERATOR","->",239],["T_STRING","getBoost",239],"(",")",")",";",["T_WHITESPACE","\n\n            ",239],["T_RETURN","return",241],["T_WHITESPACE"," ",241],["T_VARIABLE","$optimizedQuery",241],";",["T_WHITESPACE","\n        ",241],"}",["T_WHITESPACE","\n\n        ",242],["T_IF","if",244],["T_WHITESPACE"," ",244],"(",["T_STRING","count",244],"(",["T_VARIABLE","$this",244],["T_OBJECT_OPERATOR","->",244],["T_STRING","_terms",244],")",["T_WHITESPACE"," ",244],["T_IS_EQUAL","==",244],["T_WHITESPACE"," ",244],["T_LNUMBER","0",244],")",["T_WHITESPACE"," ",244],"{",["T_WHITESPACE","\n            ",244],["T_COMMENT","#require_once 'Zend\/Search\/Lucene\/Search\/Query\/Empty.php';\n",245],["T_WHITESPACE","            ",246],["T_RETURN","return",246],["T_WHITESPACE"," ",246],["T_NEW","new",246],["T_WHITESPACE"," ",246],["T_STRING","Zend_Search_Lucene_Search_Query_Empty",246],"(",")",";",["T_WHITESPACE","\n        ",246],"}",["T_WHITESPACE","\n\n\n        ",247],["T_RETURN","return",250],["T_WHITESPACE"," ",250],["T_VARIABLE","$this",250],";",["T_WHITESPACE","\n    ",250],"}",["T_WHITESPACE","\n\n    ",251],["T_DOC_COMMENT","\/**\n     * Returns query term\n     *\n     * @return array\n     *\/",253],["T_WHITESPACE","\n    ",257],["T_PUBLIC","public",258],["T_WHITESPACE"," ",258],["T_FUNCTION","function",258],["T_WHITESPACE"," ",258],["T_STRING","getTerms",258],"(",")",["T_WHITESPACE","\n    ",258],"{",["T_WHITESPACE","\n        ",259],["T_RETURN","return",260],["T_WHITESPACE"," ",260],["T_VARIABLE","$this",260],["T_OBJECT_OPERATOR","->",260],["T_STRING","_terms",260],";",["T_WHITESPACE","\n    ",260],"}",["T_WHITESPACE","\n\n\n    ",261],["T_DOC_COMMENT","\/**\n     * Set weight for specified term\n     *\n     * @param integer $num\n     * @param Zend_Search_Lucene_Search_Weight_Term $weight\n     *\/",264],["T_WHITESPACE","\n    ",269],["T_PUBLIC","public",270],["T_WHITESPACE"," ",270],["T_FUNCTION","function",270],["T_WHITESPACE"," ",270],["T_STRING","setWeight",270],"(",["T_VARIABLE","$num",270],",",["T_WHITESPACE"," ",270],["T_VARIABLE","$weight",270],")",["T_WHITESPACE","\n    ",270],"{",["T_WHITESPACE","\n        ",271],["T_VARIABLE","$this",272],["T_OBJECT_OPERATOR","->",272],["T_STRING","_weights",272],"[",["T_VARIABLE","$num",272],"]",["T_WHITESPACE"," ",272],"=",["T_WHITESPACE"," ",272],["T_VARIABLE","$weight",272],";",["T_WHITESPACE","\n    ",272],"}",["T_WHITESPACE","\n\n\n    ",273],["T_DOC_COMMENT","\/**\n     * Constructs an appropriate Weight implementation for this query.\n     *\n     * @param Zend_Search_Lucene_Interface $reader\n     * @return Zend_Search_Lucene_Search_Weight\n     *\/",276],["T_WHITESPACE","\n    ",281],["T_PUBLIC","public",282],["T_WHITESPACE"," ",282],["T_FUNCTION","function",282],["T_WHITESPACE"," ",282],["T_STRING","createWeight",282],"(",["T_STRING","Zend_Search_Lucene_Interface",282],["T_WHITESPACE"," ",282],["T_VARIABLE","$reader",282],")",["T_WHITESPACE","\n    ",282],"{",["T_WHITESPACE","\n        ",283],["T_COMMENT","#require_once 'Zend\/Search\/Lucene\/Search\/Weight\/Phrase.php';\n",284],["T_WHITESPACE","        ",285],["T_VARIABLE","$this",285],["T_OBJECT_OPERATOR","->",285],["T_STRING","_weight",285],["T_WHITESPACE"," ",285],"=",["T_WHITESPACE"," ",285],["T_NEW","new",285],["T_WHITESPACE"," ",285],["T_STRING","Zend_Search_Lucene_Search_Weight_Phrase",285],"(",["T_VARIABLE","$this",285],",",["T_WHITESPACE"," ",285],["T_VARIABLE","$reader",285],")",";",["T_WHITESPACE","\n        ",285],["T_RETURN","return",286],["T_WHITESPACE"," ",286],["T_VARIABLE","$this",286],["T_OBJECT_OPERATOR","->",286],["T_STRING","_weight",286],";",["T_WHITESPACE","\n    ",286],"}",["T_WHITESPACE","\n\n\n    ",287],["T_DOC_COMMENT","\/**\n     * Score calculator for exact phrase queries (terms sequence is fixed)\n     *\n     * @param integer $docId\n     * @return float\n     *\/",290],["T_WHITESPACE","\n    ",295],["T_PUBLIC","public",296],["T_WHITESPACE"," ",296],["T_FUNCTION","function",296],["T_WHITESPACE"," ",296],["T_STRING","_exactPhraseFreq",296],"(",["T_VARIABLE","$docId",296],")",["T_WHITESPACE","\n    ",296],"{",["T_WHITESPACE","\n        ",297],["T_VARIABLE","$freq",298],["T_WHITESPACE"," ",298],"=",["T_WHITESPACE"," ",298],["T_LNUMBER","0",298],";",["T_WHITESPACE","\n\n        ",298],["T_COMMENT","\/\/ Term Id with lowest cardinality\n",300],["T_WHITESPACE","        ",301],["T_VARIABLE","$lowCardTermId",301],["T_WHITESPACE"," ",301],"=",["T_WHITESPACE"," ",301],["T_STRING","null",301],";",["T_WHITESPACE","\n\n        ",301],["T_COMMENT","\/\/ Calculate $lowCardTermId\n",303],["T_WHITESPACE","        ",304],["T_FOREACH","foreach",304],["T_WHITESPACE"," ",304],"(",["T_VARIABLE","$this",304],["T_OBJECT_OPERATOR","->",304],["T_STRING","_terms",304],["T_WHITESPACE"," ",304],["T_AS","as",304],["T_WHITESPACE"," ",304],["T_VARIABLE","$termId",304],["T_WHITESPACE"," ",304],["T_DOUBLE_ARROW","=>",304],["T_WHITESPACE"," ",304],["T_VARIABLE","$term",304],")",["T_WHITESPACE"," ",304],"{",["T_WHITESPACE","\n            ",304],["T_IF","if",305],["T_WHITESPACE"," ",305],"(",["T_VARIABLE","$lowCardTermId",305],["T_WHITESPACE"," ",305],["T_IS_IDENTICAL","===",305],["T_WHITESPACE"," ",305],["T_STRING","null",305],["T_WHITESPACE"," ",305],["T_BOOLEAN_OR","||",305],["T_WHITESPACE","\n                ",305],["T_STRING","count",306],"(",["T_VARIABLE","$this",306],["T_OBJECT_OPERATOR","->",306],["T_STRING","_termsPositions",306],"[",["T_VARIABLE","$termId",306],"]","[",["T_VARIABLE","$docId",306],"]",")",["T_WHITESPACE"," ",306],"<",["T_WHITESPACE","\n                ",306],["T_STRING","count",307],"(",["T_VARIABLE","$this",307],["T_OBJECT_OPERATOR","->",307],["T_STRING","_termsPositions",307],"[",["T_VARIABLE","$lowCardTermId",307],"]","[",["T_VARIABLE","$docId",307],"]",")",["T_WHITESPACE"," ",307],")",["T_WHITESPACE"," ",307],"{",["T_WHITESPACE","\n                    ",307],["T_VARIABLE","$lowCardTermId",308],["T_WHITESPACE"," ",308],"=",["T_WHITESPACE"," ",308],["T_VARIABLE","$termId",308],";",["T_WHITESPACE","\n                ",308],"}",["T_WHITESPACE","\n        ",309],"}",["T_WHITESPACE","\n\n        ",310],["T_COMMENT","\/\/ Walk through positions of the term with lowest cardinality\n",312],["T_WHITESPACE","        ",313],["T_FOREACH","foreach",313],["T_WHITESPACE"," ",313],"(",["T_VARIABLE","$this",313],["T_OBJECT_OPERATOR","->",313],["T_STRING","_termsPositions",313],"[",["T_VARIABLE","$lowCardTermId",313],"]","[",["T_VARIABLE","$docId",313],"]",["T_WHITESPACE"," ",313],["T_AS","as",313],["T_WHITESPACE"," ",313],["T_VARIABLE","$lowCardPos",313],")",["T_WHITESPACE"," ",313],"{",["T_WHITESPACE","\n            ",313],["T_COMMENT","\/\/ We expect phrase to be found\n",314],["T_WHITESPACE","            ",315],["T_VARIABLE","$freq",315],["T_INC","++",315],";",["T_WHITESPACE","\n\n            ",315],["T_COMMENT","\/\/ Walk through other terms\n",317],["T_WHITESPACE","            ",318],["T_FOREACH","foreach",318],["T_WHITESPACE"," ",318],"(",["T_VARIABLE","$this",318],["T_OBJECT_OPERATOR","->",318],["T_STRING","_terms",318],["T_WHITESPACE"," ",318],["T_AS","as",318],["T_WHITESPACE"," ",318],["T_VARIABLE","$termId",318],["T_WHITESPACE"," ",318],["T_DOUBLE_ARROW","=>",318],["T_WHITESPACE"," ",318],["T_VARIABLE","$term",318],")",["T_WHITESPACE"," ",318],"{",["T_WHITESPACE","\n                ",318],["T_IF","if",319],["T_WHITESPACE"," ",319],"(",["T_VARIABLE","$termId",319],["T_WHITESPACE"," ",319],["T_IS_NOT_EQUAL","!=",319],["T_WHITESPACE"," ",319],["T_VARIABLE","$lowCardTermId",319],")",["T_WHITESPACE"," ",319],"{",["T_WHITESPACE","\n                    ",319],["T_VARIABLE","$expectedPosition",320],["T_WHITESPACE"," ",320],"=",["T_WHITESPACE"," ",320],["T_VARIABLE","$lowCardPos",320],["T_WHITESPACE"," ",320],"+",["T_WHITESPACE","\n                                            ",320],"(",["T_VARIABLE","$this",321],["T_OBJECT_OPERATOR","->",321],["T_STRING","_offsets",321],"[",["T_VARIABLE","$termId",321],"]",["T_WHITESPACE"," ",321],"-",["T_WHITESPACE","\n                                             ",321],["T_VARIABLE","$this",322],["T_OBJECT_OPERATOR","->",322],["T_STRING","_offsets",322],"[",["T_VARIABLE","$lowCardTermId",322],"]",")",";",["T_WHITESPACE","\n\n                    ",322],["T_IF","if",324],["T_WHITESPACE"," ",324],"(","!",["T_STRING","in_array",324],"(",["T_VARIABLE","$expectedPosition",324],",",["T_WHITESPACE"," ",324],["T_VARIABLE","$this",324],["T_OBJECT_OPERATOR","->",324],["T_STRING","_termsPositions",324],"[",["T_VARIABLE","$termId",324],"]","[",["T_VARIABLE","$docId",324],"]",")",")",["T_WHITESPACE"," ",324],"{",["T_WHITESPACE","\n                        ",324],["T_VARIABLE","$freq",325],["T_DEC","--",325],";",["T_WHITESPACE","  ",325],["T_COMMENT","\/\/ Phrase wasn't found.\n",325],["T_WHITESPACE","                        ",326],["T_BREAK","break",326],";",["T_WHITESPACE","\n                    ",326],"}",["T_WHITESPACE","\n                ",327],"}",["T_WHITESPACE","\n            ",328],"}",["T_WHITESPACE","\n        ",329],"}",["T_WHITESPACE","\n\n        ",330],["T_RETURN","return",332],["T_WHITESPACE"," ",332],["T_VARIABLE","$freq",332],";",["T_WHITESPACE","\n    ",332],"}",["T_WHITESPACE","\n\n    ",333],["T_DOC_COMMENT","\/**\n     * Score calculator for sloppy phrase queries (terms sequence is fixed)\n     *\n     * @param integer $docId\n     * @param Zend_Search_Lucene_Interface $reader\n     * @return float\n     *\/",335],["T_WHITESPACE","\n    ",341],["T_PUBLIC","public",342],["T_WHITESPACE"," ",342],["T_FUNCTION","function",342],["T_WHITESPACE"," ",342],["T_STRING","_sloppyPhraseFreq",342],"(",["T_VARIABLE","$docId",342],",",["T_WHITESPACE"," ",342],["T_STRING","Zend_Search_Lucene_Interface",342],["T_WHITESPACE"," ",342],["T_VARIABLE","$reader",342],")",["T_WHITESPACE","\n    ",342],"{",["T_WHITESPACE","\n        ",343],["T_VARIABLE","$freq",344],["T_WHITESPACE"," ",344],"=",["T_WHITESPACE"," ",344],["T_LNUMBER","0",344],";",["T_WHITESPACE","\n\n        ",344],["T_VARIABLE","$phraseQueue",346],["T_WHITESPACE"," ",346],"=",["T_WHITESPACE"," ",346],["T_ARRAY","array",346],"(",")",";",["T_WHITESPACE","\n        ",346],["T_VARIABLE","$phraseQueue",347],"[",["T_LNUMBER","0",347],"]",["T_WHITESPACE"," ",347],"=",["T_WHITESPACE"," ",347],["T_ARRAY","array",347],"(",")",";",["T_WHITESPACE"," ",347],["T_COMMENT","\/\/ empty phrase\n",347],["T_WHITESPACE","        ",348],["T_VARIABLE","$lastTerm",348],["T_WHITESPACE"," ",348],"=",["T_WHITESPACE"," ",348],["T_STRING","null",348],";",["T_WHITESPACE","\n\n        ",348],["T_COMMENT","\/\/ Walk through the terms to create phrases.\n",350],["T_WHITESPACE","        ",351],["T_FOREACH","foreach",351],["T_WHITESPACE"," ",351],"(",["T_VARIABLE","$this",351],["T_OBJECT_OPERATOR","->",351],["T_STRING","_terms",351],["T_WHITESPACE"," ",351],["T_AS","as",351],["T_WHITESPACE"," ",351],["T_VARIABLE","$termId",351],["T_WHITESPACE"," ",351],["T_DOUBLE_ARROW","=>",351],["T_WHITESPACE"," ",351],["T_VARIABLE","$term",351],")",["T_WHITESPACE"," ",351],"{",["T_WHITESPACE","\n            ",351],["T_VARIABLE","$queueSize",352],["T_WHITESPACE"," ",352],"=",["T_WHITESPACE"," ",352],["T_STRING","count",352],"(",["T_VARIABLE","$phraseQueue",352],")",";",["T_WHITESPACE","\n            ",352],["T_VARIABLE","$firstPass",353],["T_WHITESPACE"," ",353],"=",["T_WHITESPACE"," ",353],["T_STRING","true",353],";",["T_WHITESPACE","\n\n            ",353],["T_COMMENT","\/\/ Walk through the term positions.\n",355],["T_WHITESPACE","            ",356],["T_COMMENT","\/\/ Each term position produces a set of phrases.\n",356],["T_WHITESPACE","            ",357],["T_FOREACH","foreach",357],["T_WHITESPACE"," ",357],"(",["T_VARIABLE","$this",357],["T_OBJECT_OPERATOR","->",357],["T_STRING","_termsPositions",357],"[",["T_VARIABLE","$termId",357],"]","[",["T_VARIABLE","$docId",357],"]",["T_WHITESPACE"," ",357],["T_AS","as",357],["T_WHITESPACE"," ",357],["T_VARIABLE","$termPosition",357],["T_WHITESPACE"," ",357],")",["T_WHITESPACE"," ",357],"{",["T_WHITESPACE","\n                ",357],["T_IF","if",358],["T_WHITESPACE"," ",358],"(",["T_VARIABLE","$firstPass",358],")",["T_WHITESPACE"," ",358],"{",["T_WHITESPACE","\n                    ",358],["T_FOR","for",359],["T_WHITESPACE"," ",359],"(",["T_VARIABLE","$count",359],["T_WHITESPACE"," ",359],"=",["T_WHITESPACE"," ",359],["T_LNUMBER","0",359],";",["T_WHITESPACE"," ",359],["T_VARIABLE","$count",359],["T_WHITESPACE"," ",359],"<",["T_WHITESPACE"," ",359],["T_VARIABLE","$queueSize",359],";",["T_WHITESPACE"," ",359],["T_VARIABLE","$count",359],["T_INC","++",359],")",["T_WHITESPACE"," ",359],"{",["T_WHITESPACE","\n                        ",359],["T_VARIABLE","$phraseQueue",360],"[",["T_VARIABLE","$count",360],"]","[",["T_VARIABLE","$termId",360],"]",["T_WHITESPACE"," ",360],"=",["T_WHITESPACE"," ",360],["T_VARIABLE","$termPosition",360],";",["T_WHITESPACE","\n                    ",360],"}",["T_WHITESPACE","\n                ",361],"}",["T_WHITESPACE"," ",362],["T_ELSE","else",362],["T_WHITESPACE"," ",362],"{",["T_WHITESPACE","\n                    ",362],["T_FOR","for",363],["T_WHITESPACE"," ",363],"(",["T_VARIABLE","$count",363],["T_WHITESPACE"," ",363],"=",["T_WHITESPACE"," ",363],["T_LNUMBER","0",363],";",["T_WHITESPACE"," ",363],["T_VARIABLE","$count",363],["T_WHITESPACE"," ",363],"<",["T_WHITESPACE"," ",363],["T_VARIABLE","$queueSize",363],";",["T_WHITESPACE"," ",363],["T_VARIABLE","$count",363],["T_INC","++",363],")",["T_WHITESPACE"," ",363],"{",["T_WHITESPACE","\n                        ",363],["T_IF","if",364],["T_WHITESPACE"," ",364],"(",["T_VARIABLE","$lastTerm",364],["T_WHITESPACE"," ",364],["T_IS_NOT_IDENTICAL","!==",364],["T_WHITESPACE"," ",364],["T_STRING","null",364],["T_WHITESPACE"," ",364],["T_BOOLEAN_AND","&&",364],["T_WHITESPACE","\n                            ",364],["T_STRING","abs",365],"(",["T_WHITESPACE"," ",365],["T_VARIABLE","$termPosition",365],["T_WHITESPACE"," ",365],"-",["T_WHITESPACE"," ",365],["T_VARIABLE","$phraseQueue",365],"[",["T_VARIABLE","$count",365],"]","[",["T_VARIABLE","$lastTerm",365],"]",["T_WHITESPACE"," ",365],"-",["T_WHITESPACE","\n                                 ",365],"(",["T_VARIABLE","$this",366],["T_OBJECT_OPERATOR","->",366],["T_STRING","_offsets",366],"[",["T_VARIABLE","$termId",366],"]",["T_WHITESPACE"," ",366],"-",["T_WHITESPACE"," ",366],["T_VARIABLE","$this",366],["T_OBJECT_OPERATOR","->",366],["T_STRING","_offsets",366],"[",["T_VARIABLE","$lastTerm",366],"]",")",")",["T_WHITESPACE"," ",366],">",["T_WHITESPACE"," ",366],["T_VARIABLE","$this",366],["T_OBJECT_OPERATOR","->",366],["T_STRING","_slop",366],")",["T_WHITESPACE"," ",366],"{",["T_WHITESPACE","\n                            ",366],["T_CONTINUE","continue",367],";",["T_WHITESPACE","\n                        ",367],"}",["T_WHITESPACE","\n\n                        ",368],["T_VARIABLE","$newPhraseId",370],["T_WHITESPACE"," ",370],"=",["T_WHITESPACE"," ",370],["T_STRING","count",370],"(",["T_VARIABLE","$phraseQueue",370],")",";",["T_WHITESPACE","\n                        ",370],["T_VARIABLE","$phraseQueue",371],"[",["T_VARIABLE","$newPhraseId",371],"]",["T_WHITESPACE","          ",371],"=",["T_WHITESPACE"," ",371],["T_VARIABLE","$phraseQueue",371],"[",["T_VARIABLE","$count",371],"]",";",["T_WHITESPACE","\n                        ",371],["T_VARIABLE","$phraseQueue",372],"[",["T_VARIABLE","$newPhraseId",372],"]","[",["T_VARIABLE","$termId",372],"]",["T_WHITESPACE"," ",372],"=",["T_WHITESPACE"," ",372],["T_VARIABLE","$termPosition",372],";",["T_WHITESPACE","\n                    ",372],"}",["T_WHITESPACE","\n\n                ",373],"}",["T_WHITESPACE","\n\n                ",375],["T_VARIABLE","$firstPass",377],["T_WHITESPACE"," ",377],"=",["T_WHITESPACE"," ",377],["T_STRING","false",377],";",["T_WHITESPACE","\n            ",377],"}",["T_WHITESPACE","\n            ",378],["T_VARIABLE","$lastTerm",379],["T_WHITESPACE"," ",379],"=",["T_WHITESPACE"," ",379],["T_VARIABLE","$termId",379],";",["T_WHITESPACE","\n        ",379],"}",["T_WHITESPACE","\n\n\n        ",380],["T_FOREACH","foreach",383],["T_WHITESPACE"," ",383],"(",["T_VARIABLE","$phraseQueue",383],["T_WHITESPACE"," ",383],["T_AS","as",383],["T_WHITESPACE"," ",383],["T_VARIABLE","$phrasePos",383],")",["T_WHITESPACE"," ",383],"{",["T_WHITESPACE","\n            ",383],["T_VARIABLE","$minDistance",384],["T_WHITESPACE"," ",384],"=",["T_WHITESPACE"," ",384],["T_STRING","null",384],";",["T_WHITESPACE","\n\n            ",384],["T_FOR","for",386],["T_WHITESPACE"," ",386],"(",["T_VARIABLE","$shift",386],["T_WHITESPACE"," ",386],"=",["T_WHITESPACE"," ",386],"-",["T_VARIABLE","$this",386],["T_OBJECT_OPERATOR","->",386],["T_STRING","_slop",386],";",["T_WHITESPACE"," ",386],["T_VARIABLE","$shift",386],["T_WHITESPACE"," ",386],["T_IS_SMALLER_OR_EQUAL","<=",386],["T_WHITESPACE"," ",386],["T_VARIABLE","$this",386],["T_OBJECT_OPERATOR","->",386],["T_STRING","_slop",386],";",["T_WHITESPACE"," ",386],["T_VARIABLE","$shift",386],["T_INC","++",386],")",["T_WHITESPACE"," ",386],"{",["T_WHITESPACE","\n                ",386],["T_VARIABLE","$distance",387],["T_WHITESPACE"," ",387],"=",["T_WHITESPACE"," ",387],["T_LNUMBER","0",387],";",["T_WHITESPACE","\n                ",387],["T_VARIABLE","$start",388],["T_WHITESPACE"," ",388],"=",["T_WHITESPACE"," ",388],["T_STRING","reset",388],"(",["T_VARIABLE","$phrasePos",388],")",["T_WHITESPACE"," ",388],"-",["T_WHITESPACE"," ",388],["T_STRING","reset",388],"(",["T_VARIABLE","$this",388],["T_OBJECT_OPERATOR","->",388],["T_STRING","_offsets",388],")",["T_WHITESPACE"," ",388],"+",["T_WHITESPACE"," ",388],["T_VARIABLE","$shift",388],";",["T_WHITESPACE","\n\n                ",388],["T_FOREACH","foreach",390],["T_WHITESPACE"," ",390],"(",["T_VARIABLE","$this",390],["T_OBJECT_OPERATOR","->",390],["T_STRING","_terms",390],["T_WHITESPACE"," ",390],["T_AS","as",390],["T_WHITESPACE"," ",390],["T_VARIABLE","$termId",390],["T_WHITESPACE"," ",390],["T_DOUBLE_ARROW","=>",390],["T_WHITESPACE"," ",390],["T_VARIABLE","$term",390],")",["T_WHITESPACE"," ",390],"{",["T_WHITESPACE","\n                    ",390],["T_VARIABLE","$distance",391],["T_WHITESPACE"," ",391],["T_PLUS_EQUAL","+=",391],["T_WHITESPACE"," ",391],["T_STRING","abs",391],"(",["T_VARIABLE","$phrasePos",391],"[",["T_VARIABLE","$termId",391],"]",["T_WHITESPACE"," ",391],"-",["T_WHITESPACE"," ",391],["T_VARIABLE","$this",391],["T_OBJECT_OPERATOR","->",391],["T_STRING","_offsets",391],"[",["T_VARIABLE","$termId",391],"]",["T_WHITESPACE"," ",391],"-",["T_WHITESPACE"," ",391],["T_VARIABLE","$start",391],")",";",["T_WHITESPACE","\n\n                    ",391],["T_IF","if",393],"(",["T_VARIABLE","$distance",393],["T_WHITESPACE"," ",393],">",["T_WHITESPACE"," ",393],["T_VARIABLE","$this",393],["T_OBJECT_OPERATOR","->",393],["T_STRING","_slop",393],")",["T_WHITESPACE"," ",393],"{",["T_WHITESPACE","\n                        ",393],["T_BREAK","break",394],";",["T_WHITESPACE","\n                    ",394],"}",["T_WHITESPACE","\n                ",395],"}",["T_WHITESPACE","\n\n                ",396],["T_IF","if",398],["T_WHITESPACE"," ",398],"(",["T_VARIABLE","$minDistance",398],["T_WHITESPACE"," ",398],["T_IS_IDENTICAL","===",398],["T_WHITESPACE"," ",398],["T_STRING","null",398],["T_WHITESPACE"," ",398],["T_BOOLEAN_OR","||",398],["T_WHITESPACE"," ",398],["T_VARIABLE","$distance",398],["T_WHITESPACE"," ",398],"<",["T_WHITESPACE"," ",398],["T_VARIABLE","$minDistance",398],")",["T_WHITESPACE"," ",398],"{",["T_WHITESPACE","\n                    ",398],["T_VARIABLE","$minDistance",399],["T_WHITESPACE"," ",399],"=",["T_WHITESPACE"," ",399],["T_VARIABLE","$distance",399],";",["T_WHITESPACE","\n                ",399],"}",["T_WHITESPACE","\n            ",400],"}",["T_WHITESPACE","\n\n            ",401],["T_IF","if",403],["T_WHITESPACE"," ",403],"(",["T_VARIABLE","$minDistance",403],["T_WHITESPACE"," ",403],["T_IS_SMALLER_OR_EQUAL","<=",403],["T_WHITESPACE"," ",403],["T_VARIABLE","$this",403],["T_OBJECT_OPERATOR","->",403],["T_STRING","_slop",403],")",["T_WHITESPACE"," ",403],"{",["T_WHITESPACE","\n                ",403],["T_VARIABLE","$freq",404],["T_WHITESPACE"," ",404],["T_PLUS_EQUAL","+=",404],["T_WHITESPACE"," ",404],["T_VARIABLE","$reader",404],["T_OBJECT_OPERATOR","->",404],["T_STRING","getSimilarity",404],"(",")",["T_OBJECT_OPERATOR","->",404],["T_STRING","sloppyFreq",404],"(",["T_VARIABLE","$minDistance",404],")",";",["T_WHITESPACE","\n            ",404],"}",["T_WHITESPACE","\n        ",405],"}",["T_WHITESPACE","\n\n        ",406],["T_RETURN","return",408],["T_WHITESPACE"," ",408],["T_VARIABLE","$freq",408],";",["T_WHITESPACE","\n    ",408],"}",["T_WHITESPACE","\n\n    ",409],["T_DOC_COMMENT","\/**\n     * Execute query in context of index reader\n     * It also initializes necessary internal structures\n     *\n     * @param Zend_Search_Lucene_Interface $reader\n     * @param Zend_Search_Lucene_Index_DocsFilter|null $docsFilter\n     *\/",411],["T_WHITESPACE","\n    ",417],["T_PUBLIC","public",418],["T_WHITESPACE"," ",418],["T_FUNCTION","function",418],["T_WHITESPACE"," ",418],["T_STRING","execute",418],"(",["T_STRING","Zend_Search_Lucene_Interface",418],["T_WHITESPACE"," ",418],["T_VARIABLE","$reader",418],",",["T_WHITESPACE"," ",418],["T_VARIABLE","$docsFilter",418],["T_WHITESPACE"," ",418],"=",["T_WHITESPACE"," ",418],["T_STRING","null",418],")",["T_WHITESPACE","\n    ",418],"{",["T_WHITESPACE","\n        ",419],["T_VARIABLE","$this",420],["T_OBJECT_OPERATOR","->",420],["T_STRING","_resVector",420],["T_WHITESPACE"," ",420],"=",["T_WHITESPACE"," ",420],["T_STRING","null",420],";",["T_WHITESPACE","\n\n        ",420],["T_IF","if",422],["T_WHITESPACE"," ",422],"(",["T_STRING","count",422],"(",["T_VARIABLE","$this",422],["T_OBJECT_OPERATOR","->",422],["T_STRING","_terms",422],")",["T_WHITESPACE"," ",422],["T_IS_EQUAL","==",422],["T_WHITESPACE"," ",422],["T_LNUMBER","0",422],")",["T_WHITESPACE"," ",422],"{",["T_WHITESPACE","\n            ",422],["T_VARIABLE","$this",423],["T_OBJECT_OPERATOR","->",423],["T_STRING","_resVector",423],["T_WHITESPACE"," ",423],"=",["T_WHITESPACE"," ",423],["T_ARRAY","array",423],"(",")",";",["T_WHITESPACE","\n        ",423],"}",["T_WHITESPACE","\n\n        ",424],["T_VARIABLE","$resVectors",426],["T_WHITESPACE","      ",426],"=",["T_WHITESPACE"," ",426],["T_ARRAY","array",426],"(",")",";",["T_WHITESPACE","\n        ",426],["T_VARIABLE","$resVectorsSizes",427],["T_WHITESPACE"," ",427],"=",["T_WHITESPACE"," ",427],["T_ARRAY","array",427],"(",")",";",["T_WHITESPACE","\n        ",427],["T_VARIABLE","$resVectorsIds",428],["T_WHITESPACE","   ",428],"=",["T_WHITESPACE"," ",428],["T_ARRAY","array",428],"(",")",";",["T_WHITESPACE"," ",428],["T_COMMENT","\/\/ is used to prevent arrays comparison\n",428],["T_WHITESPACE","        ",429],["T_FOREACH","foreach",429],["T_WHITESPACE"," ",429],"(",["T_VARIABLE","$this",429],["T_OBJECT_OPERATOR","->",429],["T_STRING","_terms",429],["T_WHITESPACE"," ",429],["T_AS","as",429],["T_WHITESPACE"," ",429],["T_VARIABLE","$termId",429],["T_WHITESPACE"," ",429],["T_DOUBLE_ARROW","=>",429],["T_WHITESPACE"," ",429],["T_VARIABLE","$term",429],")",["T_WHITESPACE"," ",429],"{",["T_WHITESPACE","\n            ",429],["T_VARIABLE","$resVectors",430],"[","]",["T_WHITESPACE","      ",430],"=",["T_WHITESPACE"," ",430],["T_STRING","array_flip",430],"(",["T_VARIABLE","$reader",430],["T_OBJECT_OPERATOR","->",430],["T_STRING","termDocs",430],"(",["T_VARIABLE","$term",430],")",")",";",["T_WHITESPACE","\n            ",430],["T_VARIABLE","$resVectorsSizes",431],"[","]",["T_WHITESPACE"," ",431],"=",["T_WHITESPACE"," ",431],["T_STRING","count",431],"(",["T_STRING","end",431],"(",["T_VARIABLE","$resVectors",431],")",")",";",["T_WHITESPACE","\n            ",431],["T_VARIABLE","$resVectorsIds",432],"[","]",["T_WHITESPACE","   ",432],"=",["T_WHITESPACE"," ",432],["T_VARIABLE","$termId",432],";",["T_WHITESPACE","\n\n            ",432],["T_VARIABLE","$this",434],["T_OBJECT_OPERATOR","->",434],["T_STRING","_termsPositions",434],"[",["T_VARIABLE","$termId",434],"]",["T_WHITESPACE"," ",434],"=",["T_WHITESPACE"," ",434],["T_VARIABLE","$reader",434],["T_OBJECT_OPERATOR","->",434],["T_STRING","termPositions",434],"(",["T_VARIABLE","$term",434],")",";",["T_WHITESPACE","\n        ",434],"}",["T_WHITESPACE","\n        ",435],["T_COMMENT","\/\/ sort resvectors in order of subquery cardinality increasing\n",436],["T_WHITESPACE","        ",437],["T_STRING","array_multisort",437],"(",["T_VARIABLE","$resVectorsSizes",437],",",["T_WHITESPACE"," ",437],["T_STRING","SORT_ASC",437],",",["T_WHITESPACE"," ",437],["T_STRING","SORT_NUMERIC",437],",",["T_WHITESPACE","\n                        ",437],["T_VARIABLE","$resVectorsIds",438],",",["T_WHITESPACE","   ",438],["T_STRING","SORT_ASC",438],",",["T_WHITESPACE"," ",438],["T_STRING","SORT_NUMERIC",438],",",["T_WHITESPACE","\n                        ",438],["T_VARIABLE","$resVectors",439],")",";",["T_WHITESPACE","\n\n        ",439],["T_FOREACH","foreach",441],["T_WHITESPACE"," ",441],"(",["T_VARIABLE","$resVectors",441],["T_WHITESPACE"," ",441],["T_AS","as",441],["T_WHITESPACE"," ",441],["T_VARIABLE","$nextResVector",441],")",["T_WHITESPACE"," ",441],"{",["T_WHITESPACE","\n            ",441],["T_IF","if",442],"(",["T_VARIABLE","$this",442],["T_OBJECT_OPERATOR","->",442],["T_STRING","_resVector",442],["T_WHITESPACE"," ",442],["T_IS_IDENTICAL","===",442],["T_WHITESPACE"," ",442],["T_STRING","null",442],")",["T_WHITESPACE"," ",442],"{",["T_WHITESPACE","\n                ",442],["T_VARIABLE","$this",443],["T_OBJECT_OPERATOR","->",443],["T_STRING","_resVector",443],["T_WHITESPACE"," ",443],"=",["T_WHITESPACE"," ",443],["T_VARIABLE","$nextResVector",443],";",["T_WHITESPACE","\n            ",443],"}",["T_WHITESPACE"," ",444],["T_ELSE","else",444],["T_WHITESPACE"," ",444],"{",["T_WHITESPACE","\n                ",444],["T_COMMENT","\/\/$this->_resVector = array_intersect_key($this->_resVector, $nextResVector);\n",445],["T_WHITESPACE","\n                ",446],["T_DOC_COMMENT","\/**\n                 * This code is used as workaround for array_intersect_key() slowness problem.\n                 *\/",447],["T_WHITESPACE","\n                ",449],["T_VARIABLE","$updatedVector",450],["T_WHITESPACE"," ",450],"=",["T_WHITESPACE"," ",450],["T_ARRAY","array",450],"(",")",";",["T_WHITESPACE","\n                ",450],["T_FOREACH","foreach",451],["T_WHITESPACE"," ",451],"(",["T_VARIABLE","$this",451],["T_OBJECT_OPERATOR","->",451],["T_STRING","_resVector",451],["T_WHITESPACE"," ",451],["T_AS","as",451],["T_WHITESPACE"," ",451],["T_VARIABLE","$id",451],["T_WHITESPACE"," ",451],["T_DOUBLE_ARROW","=>",451],["T_WHITESPACE"," ",451],["T_VARIABLE","$value",451],")",["T_WHITESPACE"," ",451],"{",["T_WHITESPACE","\n                    ",451],["T_IF","if",452],["T_WHITESPACE"," ",452],"(",["T_ISSET","isset",452],"(",["T_VARIABLE","$nextResVector",452],"[",["T_VARIABLE","$id",452],"]",")",")",["T_WHITESPACE"," ",452],"{",["T_WHITESPACE","\n                        ",452],["T_VARIABLE","$updatedVector",453],"[",["T_VARIABLE","$id",453],"]",["T_WHITESPACE"," ",453],"=",["T_WHITESPACE"," ",453],["T_VARIABLE","$value",453],";",["T_WHITESPACE","\n                    ",453],"}",["T_WHITESPACE","\n                ",454],"}",["T_WHITESPACE","\n                ",455],["T_VARIABLE","$this",456],["T_OBJECT_OPERATOR","->",456],["T_STRING","_resVector",456],["T_WHITESPACE"," ",456],"=",["T_WHITESPACE"," ",456],["T_VARIABLE","$updatedVector",456],";",["T_WHITESPACE","\n            ",456],"}",["T_WHITESPACE","\n\n            ",457],["T_IF","if",459],["T_WHITESPACE"," ",459],"(",["T_STRING","count",459],"(",["T_VARIABLE","$this",459],["T_OBJECT_OPERATOR","->",459],["T_STRING","_resVector",459],")",["T_WHITESPACE"," ",459],["T_IS_EQUAL","==",459],["T_WHITESPACE"," ",459],["T_LNUMBER","0",459],")",["T_WHITESPACE"," ",459],"{",["T_WHITESPACE","\n                ",459],["T_COMMENT","\/\/ Empty result set, we don't need to check other terms\n",460],["T_WHITESPACE","                ",461],["T_BREAK","break",461],";",["T_WHITESPACE","\n            ",461],"}",["T_WHITESPACE","\n        ",462],"}",["T_WHITESPACE","\n\n        ",463],["T_COMMENT","\/\/ ksort($this->_resVector, SORT_NUMERIC);\n",465],["T_WHITESPACE","        ",466],["T_COMMENT","\/\/ Docs are returned ordered. Used algorithm doesn't change elements order.\n",466],["T_WHITESPACE","\n        ",467],["T_COMMENT","\/\/ Initialize weight if it's not done yet\n",468],["T_WHITESPACE","        ",469],["T_VARIABLE","$this",469],["T_OBJECT_OPERATOR","->",469],["T_STRING","_initWeight",469],"(",["T_VARIABLE","$reader",469],")",";",["T_WHITESPACE","\n    ",469],"}",["T_WHITESPACE","\n\n    ",470],["T_DOC_COMMENT","\/**\n     * Get document ids likely matching the query\n     *\n     * It's an array with document ids as keys (performance considerations)\n     *\n     * @return array\n     *\/",472],["T_WHITESPACE","\n    ",478],["T_PUBLIC","public",479],["T_WHITESPACE"," ",479],["T_FUNCTION","function",479],["T_WHITESPACE"," ",479],["T_STRING","matchedDocs",479],"(",")",["T_WHITESPACE","\n    ",479],"{",["T_WHITESPACE","\n        ",480],["T_RETURN","return",481],["T_WHITESPACE"," ",481],["T_VARIABLE","$this",481],["T_OBJECT_OPERATOR","->",481],["T_STRING","_resVector",481],";",["T_WHITESPACE","\n    ",481],"}",["T_WHITESPACE","\n\n    ",482],["T_DOC_COMMENT","\/**\n     * Score specified document\n     *\n     * @param integer $docId\n     * @param Zend_Search_Lucene_Interface $reader\n     * @return float\n     *\/",484],["T_WHITESPACE","\n    ",490],["T_PUBLIC","public",491],["T_WHITESPACE"," ",491],["T_FUNCTION","function",491],["T_WHITESPACE"," ",491],["T_STRING","score",491],"(",["T_VARIABLE","$docId",491],",",["T_WHITESPACE"," ",491],["T_STRING","Zend_Search_Lucene_Interface",491],["T_WHITESPACE"," ",491],["T_VARIABLE","$reader",491],")",["T_WHITESPACE","\n    ",491],"{",["T_WHITESPACE","\n        ",492],["T_IF","if",493],["T_WHITESPACE"," ",493],"(",["T_ISSET","isset",493],"(",["T_VARIABLE","$this",493],["T_OBJECT_OPERATOR","->",493],["T_STRING","_resVector",493],"[",["T_VARIABLE","$docId",493],"]",")",")",["T_WHITESPACE"," ",493],"{",["T_WHITESPACE","\n            ",493],["T_IF","if",494],["T_WHITESPACE"," ",494],"(",["T_VARIABLE","$this",494],["T_OBJECT_OPERATOR","->",494],["T_STRING","_slop",494],["T_WHITESPACE"," ",494],["T_IS_EQUAL","==",494],["T_WHITESPACE"," ",494],["T_LNUMBER","0",494],")",["T_WHITESPACE"," ",494],"{",["T_WHITESPACE","\n                ",494],["T_VARIABLE","$freq",495],["T_WHITESPACE"," ",495],"=",["T_WHITESPACE"," ",495],["T_VARIABLE","$this",495],["T_OBJECT_OPERATOR","->",495],["T_STRING","_exactPhraseFreq",495],"(",["T_VARIABLE","$docId",495],")",";",["T_WHITESPACE","\n            ",495],"}",["T_WHITESPACE"," ",496],["T_ELSE","else",496],["T_WHITESPACE"," ",496],"{",["T_WHITESPACE","\n                ",496],["T_VARIABLE","$freq",497],["T_WHITESPACE"," ",497],"=",["T_WHITESPACE"," ",497],["T_VARIABLE","$this",497],["T_OBJECT_OPERATOR","->",497],["T_STRING","_sloppyPhraseFreq",497],"(",["T_VARIABLE","$docId",497],",",["T_WHITESPACE"," ",497],["T_VARIABLE","$reader",497],")",";",["T_WHITESPACE","\n            ",497],"}",["T_WHITESPACE","\n\n            ",498],["T_IF","if",500],["T_WHITESPACE"," ",500],"(",["T_VARIABLE","$freq",500],["T_WHITESPACE"," ",500],["T_IS_NOT_EQUAL","!=",500],["T_WHITESPACE"," ",500],["T_LNUMBER","0",500],")",["T_WHITESPACE"," ",500],"{",["T_WHITESPACE","\n                ",500],["T_VARIABLE","$tf",501],["T_WHITESPACE"," ",501],"=",["T_WHITESPACE"," ",501],["T_VARIABLE","$reader",501],["T_OBJECT_OPERATOR","->",501],["T_STRING","getSimilarity",501],"(",")",["T_OBJECT_OPERATOR","->",501],["T_STRING","tf",501],"(",["T_VARIABLE","$freq",501],")",";",["T_WHITESPACE","\n                ",501],["T_VARIABLE","$weight",502],["T_WHITESPACE"," ",502],"=",["T_WHITESPACE"," ",502],["T_VARIABLE","$this",502],["T_OBJECT_OPERATOR","->",502],["T_STRING","_weight",502],["T_OBJECT_OPERATOR","->",502],["T_STRING","getValue",502],"(",")",";",["T_WHITESPACE","\n                ",502],["T_VARIABLE","$norm",503],["T_WHITESPACE"," ",503],"=",["T_WHITESPACE"," ",503],["T_VARIABLE","$reader",503],["T_OBJECT_OPERATOR","->",503],["T_STRING","norm",503],"(",["T_VARIABLE","$docId",503],",",["T_WHITESPACE"," ",503],["T_STRING","reset",503],"(",["T_VARIABLE","$this",503],["T_OBJECT_OPERATOR","->",503],["T_STRING","_terms",503],")",["T_OBJECT_OPERATOR","->",503],["T_STRING","field",503],")",";",["T_WHITESPACE","\n\n                ",503],["T_RETURN","return",505],["T_WHITESPACE"," ",505],["T_VARIABLE","$tf",505],["T_WHITESPACE"," ",505],"*",["T_WHITESPACE"," ",505],["T_VARIABLE","$weight",505],["T_WHITESPACE"," ",505],"*",["T_WHITESPACE"," ",505],["T_VARIABLE","$norm",505],["T_WHITESPACE"," ",505],"*",["T_WHITESPACE"," ",505],["T_VARIABLE","$this",505],["T_OBJECT_OPERATOR","->",505],["T_STRING","getBoost",505],"(",")",";",["T_WHITESPACE","\n            ",505],"}",["T_WHITESPACE","\n\n            ",506],["T_COMMENT","\/\/ Included in result, but culculated freq is zero\n",508],["T_WHITESPACE","            ",509],["T_RETURN","return",509],["T_WHITESPACE"," ",509],["T_LNUMBER","0",509],";",["T_WHITESPACE","\n        ",509],"}",["T_WHITESPACE"," ",510],["T_ELSE","else",510],["T_WHITESPACE"," ",510],"{",["T_WHITESPACE","\n            ",510],["T_RETURN","return",511],["T_WHITESPACE"," ",511],["T_LNUMBER","0",511],";",["T_WHITESPACE","\n        ",511],"}",["T_WHITESPACE","\n    ",512],"}",["T_WHITESPACE","\n\n    ",513],["T_DOC_COMMENT","\/**\n     * Return query terms\n     *\n     * @return array\n     *\/",515],["T_WHITESPACE","\n    ",519],["T_PUBLIC","public",520],["T_WHITESPACE"," ",520],["T_FUNCTION","function",520],["T_WHITESPACE"," ",520],["T_STRING","getQueryTerms",520],"(",")",["T_WHITESPACE","\n    ",520],"{",["T_WHITESPACE","\n        ",521],["T_RETURN","return",522],["T_WHITESPACE"," ",522],["T_VARIABLE","$this",522],["T_OBJECT_OPERATOR","->",522],["T_STRING","_terms",522],";",["T_WHITESPACE","\n    ",522],"}",["T_WHITESPACE","\n\n    ",523],["T_DOC_COMMENT","\/**\n     * Query specific matches highlighting\n     *\n     * @param Zend_Search_Lucene_Search_Highlighter_Interface $highlighter  Highlighter object (also contains doc for highlighting)\n     *\/",525],["T_WHITESPACE","\n    ",529],["T_PROTECTED","protected",530],["T_WHITESPACE"," ",530],["T_FUNCTION","function",530],["T_WHITESPACE"," ",530],["T_STRING","_highlightMatches",530],"(",["T_STRING","Zend_Search_Lucene_Search_Highlighter_Interface",530],["T_WHITESPACE"," ",530],["T_VARIABLE","$highlighter",530],")",["T_WHITESPACE","\n    ",530],"{",["T_WHITESPACE","\n        ",531],["T_VARIABLE","$words",532],["T_WHITESPACE"," ",532],"=",["T_WHITESPACE"," ",532],["T_ARRAY","array",532],"(",")",";",["T_WHITESPACE","\n        ",532],["T_FOREACH","foreach",533],["T_WHITESPACE"," ",533],"(",["T_VARIABLE","$this",533],["T_OBJECT_OPERATOR","->",533],["T_STRING","_terms",533],["T_WHITESPACE"," ",533],["T_AS","as",533],["T_WHITESPACE"," ",533],["T_VARIABLE","$term",533],")",["T_WHITESPACE"," ",533],"{",["T_WHITESPACE","\n            ",533],["T_VARIABLE","$words",534],"[","]",["T_WHITESPACE"," ",534],"=",["T_WHITESPACE"," ",534],["T_VARIABLE","$term",534],["T_OBJECT_OPERATOR","->",534],["T_STRING","text",534],";",["T_WHITESPACE","\n        ",534],"}",["T_WHITESPACE","\n\n        ",535],["T_VARIABLE","$highlighter",537],["T_OBJECT_OPERATOR","->",537],["T_STRING","highlight",537],"(",["T_VARIABLE","$words",537],")",";",["T_WHITESPACE","\n    ",537],"}",["T_WHITESPACE","\n\n    ",538],["T_DOC_COMMENT","\/**\n     * Print a query\n     *\n     * @return string\n     *\/",540],["T_WHITESPACE","\n    ",544],["T_PUBLIC","public",545],["T_WHITESPACE"," ",545],["T_FUNCTION","function",545],["T_WHITESPACE"," ",545],["T_STRING","__toString",545],"(",")",["T_WHITESPACE","\n    ",545],"{",["T_WHITESPACE","\n        ",546],["T_COMMENT","\/\/ It's used only for query visualisation, so we don't care about characters escaping\n",547],["T_WHITESPACE","        ",548],["T_IF","if",548],["T_WHITESPACE"," ",548],"(",["T_ISSET","isset",548],"(",["T_VARIABLE","$this",548],["T_OBJECT_OPERATOR","->",548],["T_STRING","_terms",548],"[",["T_LNUMBER","0",548],"]",")",["T_WHITESPACE"," ",548],["T_BOOLEAN_AND","&&",548],["T_WHITESPACE"," ",548],["T_VARIABLE","$this",548],["T_OBJECT_OPERATOR","->",548],["T_STRING","_terms",548],"[",["T_LNUMBER","0",548],"]",["T_OBJECT_OPERATOR","->",548],["T_STRING","field",548],["T_WHITESPACE"," ",548],["T_IS_NOT_IDENTICAL","!==",548],["T_WHITESPACE"," ",548],["T_STRING","null",548],")",["T_WHITESPACE"," ",548],"{",["T_WHITESPACE","\n            ",548],["T_VARIABLE","$query",549],["T_WHITESPACE"," ",549],"=",["T_WHITESPACE"," ",549],["T_VARIABLE","$this",549],["T_OBJECT_OPERATOR","->",549],["T_STRING","_terms",549],"[",["T_LNUMBER","0",549],"]",["T_OBJECT_OPERATOR","->",549],["T_STRING","field",549],["T_WHITESPACE"," ",549],".",["T_WHITESPACE"," ",549],["T_CONSTANT_ENCAPSED_STRING","':'",549],";",["T_WHITESPACE","\n        ",549],"}",["T_WHITESPACE"," ",550],["T_ELSE","else",550],["T_WHITESPACE"," ",550],"{",["T_WHITESPACE","\n            ",550],["T_VARIABLE","$query",551],["T_WHITESPACE"," ",551],"=",["T_WHITESPACE"," ",551],["T_CONSTANT_ENCAPSED_STRING","''",551],";",["T_WHITESPACE","\n        ",551],"}",["T_WHITESPACE","\n\n        ",552],["T_VARIABLE","$query",554],["T_WHITESPACE"," ",554],["T_CONCAT_EQUAL",".=",554],["T_WHITESPACE"," ",554],["T_CONSTANT_ENCAPSED_STRING","'\"'",554],";",["T_WHITESPACE","\n\n        ",554],["T_FOREACH","foreach",556],["T_WHITESPACE"," ",556],"(",["T_VARIABLE","$this",556],["T_OBJECT_OPERATOR","->",556],["T_STRING","_terms",556],["T_WHITESPACE"," ",556],["T_AS","as",556],["T_WHITESPACE"," ",556],["T_VARIABLE","$id",556],["T_WHITESPACE"," ",556],["T_DOUBLE_ARROW","=>",556],["T_WHITESPACE"," ",556],["T_VARIABLE","$term",556],")",["T_WHITESPACE"," ",556],"{",["T_WHITESPACE","\n            ",556],["T_IF","if",557],["T_WHITESPACE"," ",557],"(",["T_VARIABLE","$id",557],["T_WHITESPACE"," ",557],["T_IS_NOT_EQUAL","!=",557],["T_WHITESPACE"," ",557],["T_LNUMBER","0",557],")",["T_WHITESPACE"," ",557],"{",["T_WHITESPACE","\n                ",557],["T_VARIABLE","$query",558],["T_WHITESPACE"," ",558],["T_CONCAT_EQUAL",".=",558],["T_WHITESPACE"," ",558],["T_CONSTANT_ENCAPSED_STRING","' '",558],";",["T_WHITESPACE","\n            ",558],"}",["T_WHITESPACE","\n            ",559],["T_VARIABLE","$query",560],["T_WHITESPACE"," ",560],["T_CONCAT_EQUAL",".=",560],["T_WHITESPACE"," ",560],["T_VARIABLE","$term",560],["T_OBJECT_OPERATOR","->",560],["T_STRING","text",560],";",["T_WHITESPACE","\n        ",560],"}",["T_WHITESPACE","\n\n        ",561],["T_VARIABLE","$query",563],["T_WHITESPACE"," ",563],["T_CONCAT_EQUAL",".=",563],["T_WHITESPACE"," ",563],["T_CONSTANT_ENCAPSED_STRING","'\"'",563],";",["T_WHITESPACE","\n\n        ",563],["T_IF","if",565],["T_WHITESPACE"," ",565],"(",["T_VARIABLE","$this",565],["T_OBJECT_OPERATOR","->",565],["T_STRING","_slop",565],["T_WHITESPACE"," ",565],["T_IS_NOT_EQUAL","!=",565],["T_WHITESPACE"," ",565],["T_LNUMBER","0",565],")",["T_WHITESPACE"," ",565],"{",["T_WHITESPACE","\n            ",565],["T_VARIABLE","$query",566],["T_WHITESPACE"," ",566],["T_CONCAT_EQUAL",".=",566],["T_WHITESPACE"," ",566],["T_CONSTANT_ENCAPSED_STRING","'~'",566],["T_WHITESPACE"," ",566],".",["T_WHITESPACE"," ",566],["T_VARIABLE","$this",566],["T_OBJECT_OPERATOR","->",566],["T_STRING","_slop",566],";",["T_WHITESPACE","\n        ",566],"}",["T_WHITESPACE","\n\n        ",567],["T_IF","if",569],["T_WHITESPACE"," ",569],"(",["T_VARIABLE","$this",569],["T_OBJECT_OPERATOR","->",569],["T_STRING","getBoost",569],"(",")",["T_WHITESPACE"," ",569],["T_IS_NOT_EQUAL","!=",569],["T_WHITESPACE"," ",569],["T_LNUMBER","1",569],")",["T_WHITESPACE"," ",569],"{",["T_WHITESPACE","\n            ",569],["T_VARIABLE","$query",570],["T_WHITESPACE"," ",570],["T_CONCAT_EQUAL",".=",570],["T_WHITESPACE"," ",570],["T_CONSTANT_ENCAPSED_STRING","'^'",570],["T_WHITESPACE"," ",570],".",["T_WHITESPACE"," ",570],["T_STRING","round",570],"(",["T_VARIABLE","$this",570],["T_OBJECT_OPERATOR","->",570],["T_STRING","getBoost",570],"(",")",",",["T_WHITESPACE"," ",570],["T_LNUMBER","4",570],")",";",["T_WHITESPACE","\n        ",570],"}",["T_WHITESPACE","\n\n        ",571],["T_RETURN","return",573],["T_WHITESPACE"," ",573],["T_VARIABLE","$query",573],";",["T_WHITESPACE","\n    ",573],"}",["T_WHITESPACE","\n",574],"}",["T_WHITESPACE","\n\n",575]]
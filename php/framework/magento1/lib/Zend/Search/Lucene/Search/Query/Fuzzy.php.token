[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Zend Framework\n *\n * LICENSE\n *\n * This source file is subject to the new BSD license that is bundled\n * with this package in the file LICENSE.txt.\n * It is also available through the world-wide-web at this URL:\n * http:\/\/framework.zend.com\/license\/new-bsd\n * If you did not receive a copy of the license and are unable to\n * obtain it through the world-wide-web, please send an email\n * to license@zend.com so we can send you a copy immediately.\n *\n * @category   Zend\n * @package    Zend_Search_Lucene\n * @subpackage Search\n * @copyright  Copyright (c) 2005-2015 Zend Technologies USA Inc. (http:\/\/www.zend.com)\n * @license    http:\/\/framework.zend.com\/license\/new-bsd     New BSD License\n * @version    $Id$\n *\/",2],["T_WHITESPACE","\n\n\n",21],["T_DOC_COMMENT","\/** Zend_Search_Lucene_Search_Query *\/",24],["T_WHITESPACE","\n",24],["T_COMMENT","#require_once 'Zend\/Search\/Lucene\/Search\/Query.php';\n",25],["T_WHITESPACE","\n\n",26],["T_DOC_COMMENT","\/**\n * @category   Zend\n * @package    Zend_Search_Lucene\n * @subpackage Search\n * @copyright  Copyright (c) 2005-2015 Zend Technologies USA Inc. (http:\/\/www.zend.com)\n * @license    http:\/\/framework.zend.com\/license\/new-bsd     New BSD License\n *\/",28],["T_WHITESPACE","\n",34],["T_CLASS","class",35],["T_WHITESPACE"," ",35],["T_STRING","Zend_Search_Lucene_Search_Query_Fuzzy",35],["T_WHITESPACE"," ",35],["T_EXTENDS","extends",35],["T_WHITESPACE"," ",35],["T_STRING","Zend_Search_Lucene_Search_Query",35],["T_WHITESPACE","\n",35],"{",["T_WHITESPACE","\n    ",36],["T_DOC_COMMENT","\/** Default minimum similarity *\/",37],["T_WHITESPACE","\n    ",37],["T_CONST","const",38],["T_WHITESPACE"," ",38],["T_STRING","DEFAULT_MIN_SIMILARITY",38],["T_WHITESPACE"," ",38],"=",["T_WHITESPACE"," ",38],["T_DNUMBER","0.5",38],";",["T_WHITESPACE","\n\n    ",38],["T_DOC_COMMENT","\/**\n     * Maximum number of matched terms.\n     * Apache Lucene defines this limitation as boolean query maximum number of clauses:\n     * org.apache.lucene.search.BooleanQuery.getMaxClauseCount()\n     *\/",40],["T_WHITESPACE","\n    ",44],["T_CONST","const",45],["T_WHITESPACE"," ",45],["T_STRING","MAX_CLAUSE_COUNT",45],["T_WHITESPACE"," ",45],"=",["T_WHITESPACE"," ",45],["T_LNUMBER","1024",45],";",["T_WHITESPACE","\n\n    ",45],["T_DOC_COMMENT","\/**\n     * Array of precalculated max distances\n     *\n     * keys are integers representing a word size\n     *\/",47],["T_WHITESPACE","\n    ",51],["T_PRIVATE","private",52],["T_WHITESPACE"," ",52],["T_VARIABLE","$_maxDistances",52],["T_WHITESPACE"," ",52],"=",["T_WHITESPACE"," ",52],["T_ARRAY","array",52],"(",")",";",["T_WHITESPACE","\n\n    ",52],["T_DOC_COMMENT","\/**\n     * Base searching term.\n     *\n     * @var Zend_Search_Lucene_Index_Term\n     *\/",54],["T_WHITESPACE","\n    ",58],["T_PRIVATE","private",59],["T_WHITESPACE"," ",59],["T_VARIABLE","$_term",59],";",["T_WHITESPACE","\n\n    ",59],["T_DOC_COMMENT","\/**\n     * A value between 0 and 1 to set the required similarity\n     *  between the query term and the matching terms. For example, for a\n     *  _minimumSimilarity of 0.5 a term of the same length\n     *  as the query term is considered similar to the query term if the edit distance\n     *  between both terms is less than length(term)*0.5\n     *\n     * @var float\n     *\/",61],["T_WHITESPACE","\n    ",69],["T_PRIVATE","private",70],["T_WHITESPACE"," ",70],["T_VARIABLE","$_minimumSimilarity",70],";",["T_WHITESPACE","\n\n    ",70],["T_DOC_COMMENT","\/**\n     * The length of common (non-fuzzy) prefix\n     *\n     * @var integer\n     *\/",72],["T_WHITESPACE","\n    ",76],["T_PRIVATE","private",77],["T_WHITESPACE"," ",77],["T_VARIABLE","$_prefixLength",77],";",["T_WHITESPACE","\n\n    ",77],["T_DOC_COMMENT","\/**\n     * Matched terms.\n     *\n     * Matched terms list.\n     * It's filled during the search (rewrite operation) and may be used for search result\n     * post-processing\n     *\n     * Array of Zend_Search_Lucene_Index_Term objects\n     *\n     * @var array\n     *\/",79],["T_WHITESPACE","\n    ",89],["T_PRIVATE","private",90],["T_WHITESPACE"," ",90],["T_VARIABLE","$_matches",90],["T_WHITESPACE"," ",90],"=",["T_WHITESPACE"," ",90],["T_STRING","null",90],";",["T_WHITESPACE","\n\n    ",90],["T_DOC_COMMENT","\/**\n     * Matched terms scores\n     *\n     * @var array\n     *\/",92],["T_WHITESPACE","\n    ",96],["T_PRIVATE","private",97],["T_WHITESPACE"," ",97],["T_VARIABLE","$_scores",97],["T_WHITESPACE"," ",97],"=",["T_WHITESPACE"," ",97],["T_STRING","null",97],";",["T_WHITESPACE","\n\n    ",97],["T_DOC_COMMENT","\/**\n     * Array of the term keys.\n     * Used to sort terms in alphabetical order if terms have the same socres\n     *\n     * @var array\n     *\/",99],["T_WHITESPACE","\n    ",104],["T_PRIVATE","private",105],["T_WHITESPACE"," ",105],["T_VARIABLE","$_termKeys",105],["T_WHITESPACE"," ",105],"=",["T_WHITESPACE"," ",105],["T_STRING","null",105],";",["T_WHITESPACE","\n\n    ",105],["T_DOC_COMMENT","\/**\n     * Default non-fuzzy prefix length\n     *\n     * @var integer\n     *\/",107],["T_WHITESPACE","\n    ",111],["T_PRIVATE","private",112],["T_WHITESPACE"," ",112],["T_STATIC","static",112],["T_WHITESPACE"," ",112],["T_VARIABLE","$_defaultPrefixLength",112],["T_WHITESPACE"," ",112],"=",["T_WHITESPACE"," ",112],["T_LNUMBER","3",112],";",["T_WHITESPACE","\n\n    ",112],["T_DOC_COMMENT","\/**\n     * Zend_Search_Lucene_Search_Query_Wildcard constructor.\n     *\n     * @param Zend_Search_Lucene_Index_Term $term\n     * @param float   $minimumSimilarity\n     * @param integer $prefixLength\n     * @throws Zend_Search_Lucene_Exception\n     *\/",114],["T_WHITESPACE","\n    ",121],["T_PUBLIC","public",122],["T_WHITESPACE"," ",122],["T_FUNCTION","function",122],["T_WHITESPACE"," ",122],["T_STRING","__construct",122],"(",["T_STRING","Zend_Search_Lucene_Index_Term",122],["T_WHITESPACE"," ",122],["T_VARIABLE","$term",122],",",["T_WHITESPACE"," ",122],["T_VARIABLE","$minimumSimilarity",122],["T_WHITESPACE"," ",122],"=",["T_WHITESPACE"," ",122],["T_STRING","self",122],["T_DOUBLE_COLON","::",122],["T_STRING","DEFAULT_MIN_SIMILARITY",122],",",["T_WHITESPACE"," ",122],["T_VARIABLE","$prefixLength",122],["T_WHITESPACE"," ",122],"=",["T_WHITESPACE"," ",122],["T_STRING","null",122],")",["T_WHITESPACE","\n    ",122],"{",["T_WHITESPACE","\n        ",123],["T_IF","if",124],["T_WHITESPACE"," ",124],"(",["T_VARIABLE","$minimumSimilarity",124],["T_WHITESPACE"," ",124],"<",["T_WHITESPACE"," ",124],["T_LNUMBER","0",124],")",["T_WHITESPACE"," ",124],"{",["T_WHITESPACE","\n            ",124],["T_COMMENT","#require_once 'Zend\/Search\/Lucene\/Exception.php';\n",125],["T_WHITESPACE","            ",126],["T_THROW","throw",126],["T_WHITESPACE"," ",126],["T_NEW","new",126],["T_WHITESPACE"," ",126],["T_STRING","Zend_Search_Lucene_Exception",126],"(",["T_CONSTANT_ENCAPSED_STRING","'minimumSimilarity cannot be less than 0'",126],")",";",["T_WHITESPACE","\n        ",126],"}",["T_WHITESPACE","\n        ",127],["T_IF","if",128],["T_WHITESPACE"," ",128],"(",["T_VARIABLE","$minimumSimilarity",128],["T_WHITESPACE"," ",128],["T_IS_GREATER_OR_EQUAL",">=",128],["T_WHITESPACE"," ",128],["T_LNUMBER","1",128],")",["T_WHITESPACE"," ",128],"{",["T_WHITESPACE","\n            ",128],["T_COMMENT","#require_once 'Zend\/Search\/Lucene\/Exception.php';\n",129],["T_WHITESPACE","            ",130],["T_THROW","throw",130],["T_WHITESPACE"," ",130],["T_NEW","new",130],["T_WHITESPACE"," ",130],["T_STRING","Zend_Search_Lucene_Exception",130],"(",["T_CONSTANT_ENCAPSED_STRING","'minimumSimilarity cannot be greater than or equal to 1'",130],")",";",["T_WHITESPACE","\n        ",130],"}",["T_WHITESPACE","\n        ",131],["T_IF","if",132],["T_WHITESPACE"," ",132],"(",["T_VARIABLE","$prefixLength",132],["T_WHITESPACE"," ",132],"<",["T_WHITESPACE"," ",132],["T_LNUMBER","0",132],")",["T_WHITESPACE"," ",132],"{",["T_WHITESPACE","\n            ",132],["T_COMMENT","#require_once 'Zend\/Search\/Lucene\/Exception.php';\n",133],["T_WHITESPACE","            ",134],["T_THROW","throw",134],["T_WHITESPACE"," ",134],["T_NEW","new",134],["T_WHITESPACE"," ",134],["T_STRING","Zend_Search_Lucene_Exception",134],"(",["T_CONSTANT_ENCAPSED_STRING","'prefixLength cannot be less than 0'",134],")",";",["T_WHITESPACE","\n        ",134],"}",["T_WHITESPACE","\n\n        ",135],["T_VARIABLE","$this",137],["T_OBJECT_OPERATOR","->",137],["T_STRING","_term",137],["T_WHITESPACE","              ",137],"=",["T_WHITESPACE"," ",137],["T_VARIABLE","$term",137],";",["T_WHITESPACE","\n        ",137],["T_VARIABLE","$this",138],["T_OBJECT_OPERATOR","->",138],["T_STRING","_minimumSimilarity",138],["T_WHITESPACE"," ",138],"=",["T_WHITESPACE"," ",138],["T_VARIABLE","$minimumSimilarity",138],";",["T_WHITESPACE","\n        ",138],["T_VARIABLE","$this",139],["T_OBJECT_OPERATOR","->",139],["T_STRING","_prefixLength",139],["T_WHITESPACE","      ",139],"=",["T_WHITESPACE"," ",139],"(",["T_VARIABLE","$prefixLength",139],["T_WHITESPACE"," ",139],["T_IS_NOT_IDENTICAL","!==",139],["T_WHITESPACE"," ",139],["T_STRING","null",139],")","?",["T_WHITESPACE"," ",139],["T_VARIABLE","$prefixLength",139],["T_WHITESPACE"," ",139],":",["T_WHITESPACE"," ",139],["T_STRING","self",139],["T_DOUBLE_COLON","::",139],["T_VARIABLE","$_defaultPrefixLength",139],";",["T_WHITESPACE","\n    ",139],"}",["T_WHITESPACE","\n\n    ",140],["T_DOC_COMMENT","\/**\n     * Get default non-fuzzy prefix length\n     *\n     * @return integer\n     *\/",142],["T_WHITESPACE","\n    ",146],["T_PUBLIC","public",147],["T_WHITESPACE"," ",147],["T_STATIC","static",147],["T_WHITESPACE"," ",147],["T_FUNCTION","function",147],["T_WHITESPACE"," ",147],["T_STRING","getDefaultPrefixLength",147],"(",")",["T_WHITESPACE","\n    ",147],"{",["T_WHITESPACE","\n        ",148],["T_RETURN","return",149],["T_WHITESPACE"," ",149],["T_STRING","self",149],["T_DOUBLE_COLON","::",149],["T_VARIABLE","$_defaultPrefixLength",149],";",["T_WHITESPACE","\n    ",149],"}",["T_WHITESPACE","\n\n    ",150],["T_DOC_COMMENT","\/**\n     * Set default non-fuzzy prefix length\n     *\n     * @param integer $defaultPrefixLength\n     *\/",152],["T_WHITESPACE","\n    ",156],["T_PUBLIC","public",157],["T_WHITESPACE"," ",157],["T_STATIC","static",157],["T_WHITESPACE"," ",157],["T_FUNCTION","function",157],["T_WHITESPACE"," ",157],["T_STRING","setDefaultPrefixLength",157],"(",["T_VARIABLE","$defaultPrefixLength",157],")",["T_WHITESPACE","\n    ",157],"{",["T_WHITESPACE","\n        ",158],["T_STRING","self",159],["T_DOUBLE_COLON","::",159],["T_VARIABLE","$_defaultPrefixLength",159],["T_WHITESPACE"," ",159],"=",["T_WHITESPACE"," ",159],["T_VARIABLE","$defaultPrefixLength",159],";",["T_WHITESPACE","\n    ",159],"}",["T_WHITESPACE","\n\n    ",160],["T_DOC_COMMENT","\/**\n     * Calculate maximum distance for specified word length\n     *\n     * @param integer $prefixLength\n     * @param integer $termLength\n     * @param integer $length\n     * @return integer\n     *\/",162],["T_WHITESPACE","\n    ",169],["T_PRIVATE","private",170],["T_WHITESPACE"," ",170],["T_FUNCTION","function",170],["T_WHITESPACE"," ",170],["T_STRING","_calculateMaxDistance",170],"(",["T_VARIABLE","$prefixLength",170],",",["T_WHITESPACE"," ",170],["T_VARIABLE","$termLength",170],",",["T_WHITESPACE"," ",170],["T_VARIABLE","$length",170],")",["T_WHITESPACE","\n    ",170],"{",["T_WHITESPACE","\n        ",171],["T_VARIABLE","$this",172],["T_OBJECT_OPERATOR","->",172],["T_STRING","_maxDistances",172],"[",["T_VARIABLE","$length",172],"]",["T_WHITESPACE"," ",172],"=",["T_WHITESPACE"," ",172],["T_INT_CAST","(int)",172],["T_WHITESPACE"," ",172],"(","(",["T_LNUMBER","1",172],["T_WHITESPACE"," ",172],"-",["T_WHITESPACE"," ",172],["T_VARIABLE","$this",172],["T_OBJECT_OPERATOR","->",172],["T_STRING","_minimumSimilarity",172],")","*","(",["T_STRING","min",172],"(",["T_VARIABLE","$termLength",172],",",["T_WHITESPACE"," ",172],["T_VARIABLE","$length",172],")",["T_WHITESPACE"," ",172],"+",["T_WHITESPACE"," ",172],["T_VARIABLE","$prefixLength",172],")",")",";",["T_WHITESPACE","\n        ",172],["T_RETURN","return",173],["T_WHITESPACE"," ",173],["T_VARIABLE","$this",173],["T_OBJECT_OPERATOR","->",173],["T_STRING","_maxDistances",173],"[",["T_VARIABLE","$length",173],"]",";",["T_WHITESPACE","\n    ",173],"}",["T_WHITESPACE","\n\n    ",174],["T_DOC_COMMENT","\/**\n     * Re-write query into primitive queries in the context of specified index\n     *\n     * @param Zend_Search_Lucene_Interface $index\n     * @return Zend_Search_Lucene_Search_Query\n     * @throws Zend_Search_Lucene_Exception\n     *\/",176],["T_WHITESPACE","\n    ",182],["T_PUBLIC","public",183],["T_WHITESPACE"," ",183],["T_FUNCTION","function",183],["T_WHITESPACE"," ",183],["T_STRING","rewrite",183],"(",["T_STRING","Zend_Search_Lucene_Interface",183],["T_WHITESPACE"," ",183],["T_VARIABLE","$index",183],")",["T_WHITESPACE","\n    ",183],"{",["T_WHITESPACE","\n        ",184],["T_VARIABLE","$this",185],["T_OBJECT_OPERATOR","->",185],["T_STRING","_matches",185],["T_WHITESPACE","  ",185],"=",["T_WHITESPACE"," ",185],["T_ARRAY","array",185],"(",")",";",["T_WHITESPACE","\n        ",185],["T_VARIABLE","$this",186],["T_OBJECT_OPERATOR","->",186],["T_STRING","_scores",186],["T_WHITESPACE","   ",186],"=",["T_WHITESPACE"," ",186],["T_ARRAY","array",186],"(",")",";",["T_WHITESPACE","\n        ",186],["T_VARIABLE","$this",187],["T_OBJECT_OPERATOR","->",187],["T_STRING","_termKeys",187],["T_WHITESPACE"," ",187],"=",["T_WHITESPACE"," ",187],["T_ARRAY","array",187],"(",")",";",["T_WHITESPACE","\n\n        ",187],["T_IF","if",189],["T_WHITESPACE"," ",189],"(",["T_VARIABLE","$this",189],["T_OBJECT_OPERATOR","->",189],["T_STRING","_term",189],["T_OBJECT_OPERATOR","->",189],["T_STRING","field",189],["T_WHITESPACE"," ",189],["T_IS_IDENTICAL","===",189],["T_WHITESPACE"," ",189],["T_STRING","null",189],")",["T_WHITESPACE"," ",189],"{",["T_WHITESPACE","\n            ",189],["T_COMMENT","\/\/ Search through all fields\n",190],["T_WHITESPACE","            ",191],["T_VARIABLE","$fields",191],["T_WHITESPACE"," ",191],"=",["T_WHITESPACE"," ",191],["T_VARIABLE","$index",191],["T_OBJECT_OPERATOR","->",191],["T_STRING","getFieldNames",191],"(",["T_STRING","true",191],["T_WHITESPACE"," ",191],["T_COMMENT","\/* indexed fields list *\/",191],")",";",["T_WHITESPACE","\n        ",191],"}",["T_WHITESPACE"," ",192],["T_ELSE","else",192],["T_WHITESPACE"," ",192],"{",["T_WHITESPACE","\n            ",192],["T_VARIABLE","$fields",193],["T_WHITESPACE"," ",193],"=",["T_WHITESPACE"," ",193],["T_ARRAY","array",193],"(",["T_VARIABLE","$this",193],["T_OBJECT_OPERATOR","->",193],["T_STRING","_term",193],["T_OBJECT_OPERATOR","->",193],["T_STRING","field",193],")",";",["T_WHITESPACE","\n        ",193],"}",["T_WHITESPACE","\n\n        ",194],["T_COMMENT","#require_once 'Zend\/Search\/Lucene\/Index\/Term.php';\n",196],["T_WHITESPACE","        ",197],["T_VARIABLE","$prefix",197],["T_WHITESPACE","           ",197],"=",["T_WHITESPACE"," ",197],["T_STRING","Zend_Search_Lucene_Index_Term",197],["T_DOUBLE_COLON","::",197],["T_STRING","getPrefix",197],"(",["T_VARIABLE","$this",197],["T_OBJECT_OPERATOR","->",197],["T_STRING","_term",197],["T_OBJECT_OPERATOR","->",197],["T_STRING","text",197],",",["T_WHITESPACE"," ",197],["T_VARIABLE","$this",197],["T_OBJECT_OPERATOR","->",197],["T_STRING","_prefixLength",197],")",";",["T_WHITESPACE","\n        ",197],["T_VARIABLE","$prefixByteLength",198],["T_WHITESPACE"," ",198],"=",["T_WHITESPACE"," ",198],["T_STRING","strlen",198],"(",["T_VARIABLE","$prefix",198],")",";",["T_WHITESPACE","\n        ",198],["T_VARIABLE","$prefixUtf8Length",199],["T_WHITESPACE"," ",199],"=",["T_WHITESPACE"," ",199],["T_STRING","Zend_Search_Lucene_Index_Term",199],["T_DOUBLE_COLON","::",199],["T_STRING","getLength",199],"(",["T_VARIABLE","$prefix",199],")",";",["T_WHITESPACE","\n\n        ",199],["T_VARIABLE","$termLength",201],["T_WHITESPACE","       ",201],"=",["T_WHITESPACE"," ",201],["T_STRING","Zend_Search_Lucene_Index_Term",201],["T_DOUBLE_COLON","::",201],["T_STRING","getLength",201],"(",["T_VARIABLE","$this",201],["T_OBJECT_OPERATOR","->",201],["T_STRING","_term",201],["T_OBJECT_OPERATOR","->",201],["T_STRING","text",201],")",";",["T_WHITESPACE","\n\n        ",201],["T_VARIABLE","$termRest",203],["T_WHITESPACE","         ",203],"=",["T_WHITESPACE"," ",203],["T_STRING","substr",203],"(",["T_VARIABLE","$this",203],["T_OBJECT_OPERATOR","->",203],["T_STRING","_term",203],["T_OBJECT_OPERATOR","->",203],["T_STRING","text",203],",",["T_WHITESPACE"," ",203],["T_VARIABLE","$prefixByteLength",203],")",";",["T_WHITESPACE","\n        ",203],["T_COMMENT","\/\/ we calculate length of the rest in bytes since levenshtein() is not UTF-8 compatible\n",204],["T_WHITESPACE","        ",205],["T_VARIABLE","$termRestLength",205],["T_WHITESPACE","   ",205],"=",["T_WHITESPACE"," ",205],["T_STRING","strlen",205],"(",["T_VARIABLE","$termRest",205],")",";",["T_WHITESPACE","\n\n        ",205],["T_VARIABLE","$scaleFactor",207],["T_WHITESPACE"," ",207],"=",["T_WHITESPACE"," ",207],["T_LNUMBER","1",207],"\/","(",["T_LNUMBER","1",207],["T_WHITESPACE"," ",207],"-",["T_WHITESPACE"," ",207],["T_VARIABLE","$this",207],["T_OBJECT_OPERATOR","->",207],["T_STRING","_minimumSimilarity",207],")",";",["T_WHITESPACE","\n\n        ",207],["T_COMMENT","#require_once 'Zend\/Search\/Lucene.php';\n",209],["T_WHITESPACE","        ",210],["T_VARIABLE","$maxTerms",210],["T_WHITESPACE"," ",210],"=",["T_WHITESPACE"," ",210],["T_STRING","Zend_Search_Lucene",210],["T_DOUBLE_COLON","::",210],["T_STRING","getTermsPerQueryLimit",210],"(",")",";",["T_WHITESPACE","\n        ",210],["T_FOREACH","foreach",211],["T_WHITESPACE"," ",211],"(",["T_VARIABLE","$fields",211],["T_WHITESPACE"," ",211],["T_AS","as",211],["T_WHITESPACE"," ",211],["T_VARIABLE","$field",211],")",["T_WHITESPACE"," ",211],"{",["T_WHITESPACE","\n            ",211],["T_VARIABLE","$index",212],["T_OBJECT_OPERATOR","->",212],["T_STRING","resetTermsStream",212],"(",")",";",["T_WHITESPACE","\n\n            ",212],["T_COMMENT","#require_once 'Zend\/Search\/Lucene\/Index\/Term.php';\n",214],["T_WHITESPACE","            ",215],["T_IF","if",215],["T_WHITESPACE"," ",215],"(",["T_VARIABLE","$prefix",215],["T_WHITESPACE"," ",215],["T_IS_NOT_EQUAL","!=",215],["T_WHITESPACE"," ",215],["T_CONSTANT_ENCAPSED_STRING","''",215],")",["T_WHITESPACE"," ",215],"{",["T_WHITESPACE","\n                ",215],["T_VARIABLE","$index",216],["T_OBJECT_OPERATOR","->",216],["T_STRING","skipTo",216],"(",["T_NEW","new",216],["T_WHITESPACE"," ",216],["T_STRING","Zend_Search_Lucene_Index_Term",216],"(",["T_VARIABLE","$prefix",216],",",["T_WHITESPACE"," ",216],["T_VARIABLE","$field",216],")",")",";",["T_WHITESPACE","\n\n                ",216],["T_WHILE","while",218],["T_WHITESPACE"," ",218],"(",["T_VARIABLE","$index",218],["T_OBJECT_OPERATOR","->",218],["T_STRING","currentTerm",218],"(",")",["T_WHITESPACE"," ",218],["T_IS_NOT_IDENTICAL","!==",218],["T_WHITESPACE"," ",218],["T_STRING","null",218],["T_WHITESPACE","          ",218],["T_BOOLEAN_AND","&&",218],["T_WHITESPACE","\n                       ",218],["T_VARIABLE","$index",219],["T_OBJECT_OPERATOR","->",219],["T_STRING","currentTerm",219],"(",")",["T_OBJECT_OPERATOR","->",219],["T_STRING","field",219],["T_WHITESPACE"," ",219],["T_IS_EQUAL","==",219],["T_WHITESPACE"," ",219],["T_VARIABLE","$field",219],["T_WHITESPACE","  ",219],["T_BOOLEAN_AND","&&",219],["T_WHITESPACE","\n                       ",219],["T_STRING","substr",220],"(",["T_VARIABLE","$index",220],["T_OBJECT_OPERATOR","->",220],["T_STRING","currentTerm",220],"(",")",["T_OBJECT_OPERATOR","->",220],["T_STRING","text",220],",",["T_WHITESPACE"," ",220],["T_LNUMBER","0",220],",",["T_WHITESPACE"," ",220],["T_VARIABLE","$prefixByteLength",220],")",["T_WHITESPACE"," ",220],["T_IS_EQUAL","==",220],["T_WHITESPACE"," ",220],["T_VARIABLE","$prefix",220],")",["T_WHITESPACE"," ",220],"{",["T_WHITESPACE","\n                    ",220],["T_COMMENT","\/\/ Calculate similarity\n",221],["T_WHITESPACE","                    ",222],["T_VARIABLE","$target",222],["T_WHITESPACE"," ",222],"=",["T_WHITESPACE"," ",222],["T_STRING","substr",222],"(",["T_VARIABLE","$index",222],["T_OBJECT_OPERATOR","->",222],["T_STRING","currentTerm",222],"(",")",["T_OBJECT_OPERATOR","->",222],["T_STRING","text",222],",",["T_WHITESPACE"," ",222],["T_VARIABLE","$prefixByteLength",222],")",";",["T_WHITESPACE","\n\n                    ",222],["T_VARIABLE","$maxDistance",224],["T_WHITESPACE"," ",224],"=",["T_WHITESPACE"," ",224],["T_ISSET","isset",224],"(",["T_VARIABLE","$this",224],["T_OBJECT_OPERATOR","->",224],["T_STRING","_maxDistances",224],"[",["T_STRING","strlen",224],"(",["T_VARIABLE","$target",224],")","]",")","?",["T_WHITESPACE","\n                                       ",224],["T_VARIABLE","$this",225],["T_OBJECT_OPERATOR","->",225],["T_STRING","_maxDistances",225],"[",["T_STRING","strlen",225],"(",["T_VARIABLE","$target",225],")","]",["T_WHITESPACE"," ",225],":",["T_WHITESPACE","\n                                       ",225],["T_VARIABLE","$this",226],["T_OBJECT_OPERATOR","->",226],["T_STRING","_calculateMaxDistance",226],"(",["T_VARIABLE","$prefixUtf8Length",226],",",["T_WHITESPACE"," ",226],["T_VARIABLE","$termRestLength",226],",",["T_WHITESPACE"," ",226],["T_STRING","strlen",226],"(",["T_VARIABLE","$target",226],")",")",";",["T_WHITESPACE","\n\n                    ",226],["T_IF","if",228],["T_WHITESPACE"," ",228],"(",["T_VARIABLE","$termRestLength",228],["T_WHITESPACE"," ",228],["T_IS_EQUAL","==",228],["T_WHITESPACE"," ",228],["T_LNUMBER","0",228],")",["T_WHITESPACE"," ",228],"{",["T_WHITESPACE","\n                        ",228],["T_COMMENT","\/\/ we don't have anything to compare.  That means if we just add\n",229],["T_WHITESPACE","                        ",230],["T_COMMENT","\/\/ the letters for current term we get the new word\n",230],["T_WHITESPACE","                        ",231],["T_VARIABLE","$similarity",231],["T_WHITESPACE"," ",231],"=",["T_WHITESPACE"," ",231],"(","(",["T_VARIABLE","$prefixUtf8Length",231],["T_WHITESPACE"," ",231],["T_IS_EQUAL","==",231],["T_WHITESPACE"," ",231],["T_LNUMBER","0",231],")","?",["T_WHITESPACE"," ",231],["T_LNUMBER","0",231],["T_WHITESPACE"," ",231],":",["T_WHITESPACE"," ",231],["T_LNUMBER","1",231],["T_WHITESPACE"," ",231],"-",["T_WHITESPACE"," ",231],["T_STRING","strlen",231],"(",["T_VARIABLE","$target",231],")","\/",["T_VARIABLE","$prefixUtf8Length",231],")",";",["T_WHITESPACE","\n                    ",231],"}",["T_WHITESPACE"," ",232],["T_ELSE","else",232],["T_WHITESPACE"," ",232],["T_IF","if",232],["T_WHITESPACE"," ",232],"(",["T_STRING","strlen",232],"(",["T_VARIABLE","$target",232],")",["T_WHITESPACE"," ",232],["T_IS_EQUAL","==",232],["T_WHITESPACE"," ",232],["T_LNUMBER","0",232],")",["T_WHITESPACE"," ",232],"{",["T_WHITESPACE","\n                        ",232],["T_VARIABLE","$similarity",233],["T_WHITESPACE"," ",233],"=",["T_WHITESPACE"," ",233],"(","(",["T_VARIABLE","$prefixUtf8Length",233],["T_WHITESPACE"," ",233],["T_IS_EQUAL","==",233],["T_WHITESPACE"," ",233],["T_LNUMBER","0",233],")","?",["T_WHITESPACE"," ",233],["T_LNUMBER","0",233],["T_WHITESPACE"," ",233],":",["T_WHITESPACE"," ",233],["T_LNUMBER","1",233],["T_WHITESPACE"," ",233],"-",["T_WHITESPACE"," ",233],["T_VARIABLE","$termRestLength",233],"\/",["T_VARIABLE","$prefixUtf8Length",233],")",";",["T_WHITESPACE","\n                    ",233],"}",["T_WHITESPACE"," ",234],["T_ELSE","else",234],["T_WHITESPACE"," ",234],["T_IF","if",234],["T_WHITESPACE"," ",234],"(",["T_VARIABLE","$maxDistance",234],["T_WHITESPACE"," ",234],"<",["T_WHITESPACE"," ",234],["T_STRING","abs",234],"(",["T_VARIABLE","$termRestLength",234],["T_WHITESPACE"," ",234],"-",["T_WHITESPACE"," ",234],["T_STRING","strlen",234],"(",["T_VARIABLE","$target",234],")",")",")","{",["T_WHITESPACE","\n                        ",234],["T_COMMENT","\/\/just adding the characters of term to target or vice-versa results in too many edits\n",235],["T_WHITESPACE","                        ",236],["T_COMMENT","\/\/for example \"pre\" length is 3 and \"prefixes\" length is 8.  We can see that\n",236],["T_WHITESPACE","                        ",237],["T_COMMENT","\/\/given this optimal circumstance, the edit distance cannot be less than 5.\n",237],["T_WHITESPACE","                        ",238],["T_COMMENT","\/\/which is 8-3 or more precisesly abs(3-8).\n",238],["T_WHITESPACE","                        ",239],["T_COMMENT","\/\/if our maximum edit distance is 4, then we can discard this word\n",239],["T_WHITESPACE","                        ",240],["T_COMMENT","\/\/without looking at it.\n",240],["T_WHITESPACE","                        ",241],["T_VARIABLE","$similarity",241],["T_WHITESPACE"," ",241],"=",["T_WHITESPACE"," ",241],["T_LNUMBER","0",241],";",["T_WHITESPACE","\n                    ",241],"}",["T_WHITESPACE"," ",242],["T_ELSE","else",242],["T_WHITESPACE"," ",242],"{",["T_WHITESPACE","\n                        ",242],["T_VARIABLE","$similarity",243],["T_WHITESPACE"," ",243],"=",["T_WHITESPACE"," ",243],["T_LNUMBER","1",243],["T_WHITESPACE"," ",243],"-",["T_WHITESPACE"," ",243],["T_STRING","levenshtein",243],"(",["T_VARIABLE","$termRest",243],",",["T_WHITESPACE"," ",243],["T_VARIABLE","$target",243],")","\/","(",["T_VARIABLE","$prefixUtf8Length",243],["T_WHITESPACE"," ",243],"+",["T_WHITESPACE"," ",243],["T_STRING","min",243],"(",["T_VARIABLE","$termRestLength",243],",",["T_WHITESPACE"," ",243],["T_STRING","strlen",243],"(",["T_VARIABLE","$target",243],")",")",")",";",["T_WHITESPACE","\n                    ",243],"}",["T_WHITESPACE","\n\n                    ",244],["T_IF","if",246],["T_WHITESPACE"," ",246],"(",["T_VARIABLE","$similarity",246],["T_WHITESPACE"," ",246],">",["T_WHITESPACE"," ",246],["T_VARIABLE","$this",246],["T_OBJECT_OPERATOR","->",246],["T_STRING","_minimumSimilarity",246],")",["T_WHITESPACE"," ",246],"{",["T_WHITESPACE","\n                        ",246],["T_VARIABLE","$this",247],["T_OBJECT_OPERATOR","->",247],["T_STRING","_matches",247],"[","]",["T_WHITESPACE","  ",247],"=",["T_WHITESPACE"," ",247],["T_VARIABLE","$index",247],["T_OBJECT_OPERATOR","->",247],["T_STRING","currentTerm",247],"(",")",";",["T_WHITESPACE","\n                        ",247],["T_VARIABLE","$this",248],["T_OBJECT_OPERATOR","->",248],["T_STRING","_termKeys",248],"[","]",["T_WHITESPACE"," ",248],"=",["T_WHITESPACE"," ",248],["T_VARIABLE","$index",248],["T_OBJECT_OPERATOR","->",248],["T_STRING","currentTerm",248],"(",")",["T_OBJECT_OPERATOR","->",248],["T_STRING","key",248],"(",")",";",["T_WHITESPACE","\n                        ",248],["T_VARIABLE","$this",249],["T_OBJECT_OPERATOR","->",249],["T_STRING","_scores",249],"[","]",["T_WHITESPACE","   ",249],"=",["T_WHITESPACE"," ",249],"(",["T_VARIABLE","$similarity",249],["T_WHITESPACE"," ",249],"-",["T_WHITESPACE"," ",249],["T_VARIABLE","$this",249],["T_OBJECT_OPERATOR","->",249],["T_STRING","_minimumSimilarity",249],")","*",["T_VARIABLE","$scaleFactor",249],";",["T_WHITESPACE","\n\n                        ",249],["T_IF","if",251],["T_WHITESPACE"," ",251],"(",["T_VARIABLE","$maxTerms",251],["T_WHITESPACE"," ",251],["T_IS_NOT_EQUAL","!=",251],["T_WHITESPACE"," ",251],["T_LNUMBER","0",251],["T_WHITESPACE","  ",251],["T_BOOLEAN_AND","&&",251],["T_WHITESPACE","  ",251],["T_STRING","count",251],"(",["T_VARIABLE","$this",251],["T_OBJECT_OPERATOR","->",251],["T_STRING","_matches",251],")",["T_WHITESPACE"," ",251],">",["T_WHITESPACE"," ",251],["T_VARIABLE","$maxTerms",251],")",["T_WHITESPACE"," ",251],"{",["T_WHITESPACE","\n                            ",251],["T_COMMENT","#require_once 'Zend\/Search\/Lucene\/Exception.php';\n",252],["T_WHITESPACE","                            ",253],["T_THROW","throw",253],["T_WHITESPACE"," ",253],["T_NEW","new",253],["T_WHITESPACE"," ",253],["T_STRING","Zend_Search_Lucene_Exception",253],"(",["T_CONSTANT_ENCAPSED_STRING","'Terms per query limit is reached.'",253],")",";",["T_WHITESPACE","\n                        ",253],"}",["T_WHITESPACE","\n                    ",254],"}",["T_WHITESPACE","\n\n                    ",255],["T_VARIABLE","$index",257],["T_OBJECT_OPERATOR","->",257],["T_STRING","nextTerm",257],"(",")",";",["T_WHITESPACE","\n                ",257],"}",["T_WHITESPACE","\n            ",258],"}",["T_WHITESPACE"," ",259],["T_ELSE","else",259],["T_WHITESPACE"," ",259],"{",["T_WHITESPACE","\n                ",259],["T_VARIABLE","$index",260],["T_OBJECT_OPERATOR","->",260],["T_STRING","skipTo",260],"(",["T_NEW","new",260],["T_WHITESPACE"," ",260],["T_STRING","Zend_Search_Lucene_Index_Term",260],"(",["T_CONSTANT_ENCAPSED_STRING","''",260],",",["T_WHITESPACE"," ",260],["T_VARIABLE","$field",260],")",")",";",["T_WHITESPACE","\n\n                ",260],["T_WHILE","while",262],["T_WHITESPACE"," ",262],"(",["T_VARIABLE","$index",262],["T_OBJECT_OPERATOR","->",262],["T_STRING","currentTerm",262],"(",")",["T_WHITESPACE"," ",262],["T_IS_NOT_IDENTICAL","!==",262],["T_WHITESPACE"," ",262],["T_STRING","null",262],["T_WHITESPACE","  ",262],["T_BOOLEAN_AND","&&",262],["T_WHITESPACE","  ",262],["T_VARIABLE","$index",262],["T_OBJECT_OPERATOR","->",262],["T_STRING","currentTerm",262],"(",")",["T_OBJECT_OPERATOR","->",262],["T_STRING","field",262],["T_WHITESPACE"," ",262],["T_IS_EQUAL","==",262],["T_WHITESPACE"," ",262],["T_VARIABLE","$field",262],")",["T_WHITESPACE"," ",262],"{",["T_WHITESPACE","\n                    ",262],["T_COMMENT","\/\/ Calculate similarity\n",263],["T_WHITESPACE","                    ",264],["T_VARIABLE","$target",264],["T_WHITESPACE"," ",264],"=",["T_WHITESPACE"," ",264],["T_VARIABLE","$index",264],["T_OBJECT_OPERATOR","->",264],["T_STRING","currentTerm",264],"(",")",["T_OBJECT_OPERATOR","->",264],["T_STRING","text",264],";",["T_WHITESPACE","\n\n                    ",264],["T_VARIABLE","$maxDistance",266],["T_WHITESPACE"," ",266],"=",["T_WHITESPACE"," ",266],["T_ISSET","isset",266],"(",["T_VARIABLE","$this",266],["T_OBJECT_OPERATOR","->",266],["T_STRING","_maxDistances",266],"[",["T_STRING","strlen",266],"(",["T_VARIABLE","$target",266],")","]",")","?",["T_WHITESPACE","\n                                       ",266],["T_VARIABLE","$this",267],["T_OBJECT_OPERATOR","->",267],["T_STRING","_maxDistances",267],"[",["T_STRING","strlen",267],"(",["T_VARIABLE","$target",267],")","]",["T_WHITESPACE"," ",267],":",["T_WHITESPACE","\n                                       ",267],["T_VARIABLE","$this",268],["T_OBJECT_OPERATOR","->",268],["T_STRING","_calculateMaxDistance",268],"(",["T_LNUMBER","0",268],",",["T_WHITESPACE"," ",268],["T_VARIABLE","$termRestLength",268],",",["T_WHITESPACE"," ",268],["T_STRING","strlen",268],"(",["T_VARIABLE","$target",268],")",")",";",["T_WHITESPACE","\n\n                    ",268],["T_IF","if",270],["T_WHITESPACE"," ",270],"(",["T_VARIABLE","$maxDistance",270],["T_WHITESPACE"," ",270],"<",["T_WHITESPACE"," ",270],["T_STRING","abs",270],"(",["T_VARIABLE","$termRestLength",270],["T_WHITESPACE"," ",270],"-",["T_WHITESPACE"," ",270],["T_STRING","strlen",270],"(",["T_VARIABLE","$target",270],")",")",")","{",["T_WHITESPACE","\n                        ",270],["T_COMMENT","\/\/just adding the characters of term to target or vice-versa results in too many edits\n",271],["T_WHITESPACE","                        ",272],["T_COMMENT","\/\/for example \"pre\" length is 3 and \"prefixes\" length is 8.  We can see that\n",272],["T_WHITESPACE","                        ",273],["T_COMMENT","\/\/given this optimal circumstance, the edit distance cannot be less than 5.\n",273],["T_WHITESPACE","                        ",274],["T_COMMENT","\/\/which is 8-3 or more precisesly abs(3-8).\n",274],["T_WHITESPACE","                        ",275],["T_COMMENT","\/\/if our maximum edit distance is 4, then we can discard this word\n",275],["T_WHITESPACE","                        ",276],["T_COMMENT","\/\/without looking at it.\n",276],["T_WHITESPACE","                        ",277],["T_VARIABLE","$similarity",277],["T_WHITESPACE"," ",277],"=",["T_WHITESPACE"," ",277],["T_LNUMBER","0",277],";",["T_WHITESPACE","\n                    ",277],"}",["T_WHITESPACE"," ",278],["T_ELSE","else",278],["T_WHITESPACE"," ",278],"{",["T_WHITESPACE","\n                        ",278],["T_VARIABLE","$similarity",279],["T_WHITESPACE"," ",279],"=",["T_WHITESPACE"," ",279],["T_LNUMBER","1",279],["T_WHITESPACE"," ",279],"-",["T_WHITESPACE"," ",279],["T_STRING","levenshtein",279],"(",["T_VARIABLE","$termRest",279],",",["T_WHITESPACE"," ",279],["T_VARIABLE","$target",279],")","\/",["T_STRING","min",279],"(",["T_VARIABLE","$termRestLength",279],",",["T_WHITESPACE"," ",279],["T_STRING","strlen",279],"(",["T_VARIABLE","$target",279],")",")",";",["T_WHITESPACE","\n                    ",279],"}",["T_WHITESPACE","\n\n                    ",280],["T_IF","if",282],["T_WHITESPACE"," ",282],"(",["T_VARIABLE","$similarity",282],["T_WHITESPACE"," ",282],">",["T_WHITESPACE"," ",282],["T_VARIABLE","$this",282],["T_OBJECT_OPERATOR","->",282],["T_STRING","_minimumSimilarity",282],")",["T_WHITESPACE"," ",282],"{",["T_WHITESPACE","\n                        ",282],["T_VARIABLE","$this",283],["T_OBJECT_OPERATOR","->",283],["T_STRING","_matches",283],"[","]",["T_WHITESPACE","  ",283],"=",["T_WHITESPACE"," ",283],["T_VARIABLE","$index",283],["T_OBJECT_OPERATOR","->",283],["T_STRING","currentTerm",283],"(",")",";",["T_WHITESPACE","\n                        ",283],["T_VARIABLE","$this",284],["T_OBJECT_OPERATOR","->",284],["T_STRING","_termKeys",284],"[","]",["T_WHITESPACE"," ",284],"=",["T_WHITESPACE"," ",284],["T_VARIABLE","$index",284],["T_OBJECT_OPERATOR","->",284],["T_STRING","currentTerm",284],"(",")",["T_OBJECT_OPERATOR","->",284],["T_STRING","key",284],"(",")",";",["T_WHITESPACE","\n                        ",284],["T_VARIABLE","$this",285],["T_OBJECT_OPERATOR","->",285],["T_STRING","_scores",285],"[","]",["T_WHITESPACE","   ",285],"=",["T_WHITESPACE"," ",285],"(",["T_VARIABLE","$similarity",285],["T_WHITESPACE"," ",285],"-",["T_WHITESPACE"," ",285],["T_VARIABLE","$this",285],["T_OBJECT_OPERATOR","->",285],["T_STRING","_minimumSimilarity",285],")","*",["T_VARIABLE","$scaleFactor",285],";",["T_WHITESPACE","\n\n                        ",285],["T_IF","if",287],["T_WHITESPACE"," ",287],"(",["T_VARIABLE","$maxTerms",287],["T_WHITESPACE"," ",287],["T_IS_NOT_EQUAL","!=",287],["T_WHITESPACE"," ",287],["T_LNUMBER","0",287],["T_WHITESPACE","  ",287],["T_BOOLEAN_AND","&&",287],["T_WHITESPACE","  ",287],["T_STRING","count",287],"(",["T_VARIABLE","$this",287],["T_OBJECT_OPERATOR","->",287],["T_STRING","_matches",287],")",["T_WHITESPACE"," ",287],">",["T_WHITESPACE"," ",287],["T_VARIABLE","$maxTerms",287],")",["T_WHITESPACE"," ",287],"{",["T_WHITESPACE","\n                            ",287],["T_COMMENT","#require_once 'Zend\/Search\/Lucene\/Exception.php';\n",288],["T_WHITESPACE","                            ",289],["T_THROW","throw",289],["T_WHITESPACE"," ",289],["T_NEW","new",289],["T_WHITESPACE"," ",289],["T_STRING","Zend_Search_Lucene_Exception",289],"(",["T_CONSTANT_ENCAPSED_STRING","'Terms per query limit is reached.'",289],")",";",["T_WHITESPACE","\n                        ",289],"}",["T_WHITESPACE","\n                    ",290],"}",["T_WHITESPACE","\n\n                    ",291],["T_VARIABLE","$index",293],["T_OBJECT_OPERATOR","->",293],["T_STRING","nextTerm",293],"(",")",";",["T_WHITESPACE","\n                ",293],"}",["T_WHITESPACE","\n            ",294],"}",["T_WHITESPACE","\n\n            ",295],["T_VARIABLE","$index",297],["T_OBJECT_OPERATOR","->",297],["T_STRING","closeTermsStream",297],"(",")",";",["T_WHITESPACE","\n        ",297],"}",["T_WHITESPACE","\n\n        ",298],["T_IF","if",300],["T_WHITESPACE"," ",300],"(",["T_STRING","count",300],"(",["T_VARIABLE","$this",300],["T_OBJECT_OPERATOR","->",300],["T_STRING","_matches",300],")",["T_WHITESPACE"," ",300],["T_IS_EQUAL","==",300],["T_WHITESPACE"," ",300],["T_LNUMBER","0",300],")",["T_WHITESPACE"," ",300],"{",["T_WHITESPACE","\n            ",300],["T_COMMENT","#require_once 'Zend\/Search\/Lucene\/Search\/Query\/Empty.php';\n",301],["T_WHITESPACE","            ",302],["T_RETURN","return",302],["T_WHITESPACE"," ",302],["T_NEW","new",302],["T_WHITESPACE"," ",302],["T_STRING","Zend_Search_Lucene_Search_Query_Empty",302],"(",")",";",["T_WHITESPACE","\n        ",302],"}",["T_WHITESPACE"," ",303],["T_ELSE","else",303],["T_WHITESPACE"," ",303],["T_IF","if",303],["T_WHITESPACE"," ",303],"(",["T_STRING","count",303],"(",["T_VARIABLE","$this",303],["T_OBJECT_OPERATOR","->",303],["T_STRING","_matches",303],")",["T_WHITESPACE"," ",303],["T_IS_EQUAL","==",303],["T_WHITESPACE"," ",303],["T_LNUMBER","1",303],")",["T_WHITESPACE"," ",303],"{",["T_WHITESPACE","\n            ",303],["T_COMMENT","#require_once 'Zend\/Search\/Lucene\/Search\/Query\/Term.php';\n",304],["T_WHITESPACE","            ",305],["T_RETURN","return",305],["T_WHITESPACE"," ",305],["T_NEW","new",305],["T_WHITESPACE"," ",305],["T_STRING","Zend_Search_Lucene_Search_Query_Term",305],"(",["T_STRING","reset",305],"(",["T_VARIABLE","$this",305],["T_OBJECT_OPERATOR","->",305],["T_STRING","_matches",305],")",")",";",["T_WHITESPACE","\n        ",305],"}",["T_WHITESPACE"," ",306],["T_ELSE","else",306],["T_WHITESPACE"," ",306],"{",["T_WHITESPACE","\n            ",306],["T_COMMENT","#require_once 'Zend\/Search\/Lucene\/Search\/Query\/Boolean.php';\n",307],["T_WHITESPACE","            ",308],["T_VARIABLE","$rewrittenQuery",308],["T_WHITESPACE"," ",308],"=",["T_WHITESPACE"," ",308],["T_NEW","new",308],["T_WHITESPACE"," ",308],["T_STRING","Zend_Search_Lucene_Search_Query_Boolean",308],"(",")",";",["T_WHITESPACE","\n\n            ",308],["T_STRING","array_multisort",310],"(",["T_VARIABLE","$this",310],["T_OBJECT_OPERATOR","->",310],["T_STRING","_scores",310],",",["T_WHITESPACE","   ",310],["T_STRING","SORT_DESC",310],",",["T_WHITESPACE"," ",310],["T_STRING","SORT_NUMERIC",310],",",["T_WHITESPACE","\n                            ",310],["T_VARIABLE","$this",311],["T_OBJECT_OPERATOR","->",311],["T_STRING","_termKeys",311],",",["T_WHITESPACE"," ",311],["T_STRING","SORT_ASC",311],",",["T_WHITESPACE","  ",311],["T_STRING","SORT_STRING",311],",",["T_WHITESPACE","\n                            ",311],["T_VARIABLE","$this",312],["T_OBJECT_OPERATOR","->",312],["T_STRING","_matches",312],")",";",["T_WHITESPACE","\n\n            ",312],["T_VARIABLE","$termCount",314],["T_WHITESPACE"," ",314],"=",["T_WHITESPACE"," ",314],["T_LNUMBER","0",314],";",["T_WHITESPACE","\n            ",314],["T_COMMENT","#require_once 'Zend\/Search\/Lucene\/Search\/Query\/Term.php';\n",315],["T_WHITESPACE","            ",316],["T_FOREACH","foreach",316],["T_WHITESPACE"," ",316],"(",["T_VARIABLE","$this",316],["T_OBJECT_OPERATOR","->",316],["T_STRING","_matches",316],["T_WHITESPACE"," ",316],["T_AS","as",316],["T_WHITESPACE"," ",316],["T_VARIABLE","$id",316],["T_WHITESPACE"," ",316],["T_DOUBLE_ARROW","=>",316],["T_WHITESPACE"," ",316],["T_VARIABLE","$matchedTerm",316],")",["T_WHITESPACE"," ",316],"{",["T_WHITESPACE","\n                ",316],["T_VARIABLE","$subquery",317],["T_WHITESPACE"," ",317],"=",["T_WHITESPACE"," ",317],["T_NEW","new",317],["T_WHITESPACE"," ",317],["T_STRING","Zend_Search_Lucene_Search_Query_Term",317],"(",["T_VARIABLE","$matchedTerm",317],")",";",["T_WHITESPACE","\n                ",317],["T_VARIABLE","$subquery",318],["T_OBJECT_OPERATOR","->",318],["T_STRING","setBoost",318],"(",["T_VARIABLE","$this",318],["T_OBJECT_OPERATOR","->",318],["T_STRING","_scores",318],"[",["T_VARIABLE","$id",318],"]",")",";",["T_WHITESPACE","\n\n                ",318],["T_VARIABLE","$rewrittenQuery",320],["T_OBJECT_OPERATOR","->",320],["T_STRING","addSubquery",320],"(",["T_VARIABLE","$subquery",320],")",";",["T_WHITESPACE","\n\n                ",320],["T_VARIABLE","$termCount",322],["T_INC","++",322],";",["T_WHITESPACE","\n                ",322],["T_IF","if",323],["T_WHITESPACE"," ",323],"(",["T_VARIABLE","$termCount",323],["T_WHITESPACE"," ",323],["T_IS_GREATER_OR_EQUAL",">=",323],["T_WHITESPACE"," ",323],["T_STRING","self",323],["T_DOUBLE_COLON","::",323],["T_STRING","MAX_CLAUSE_COUNT",323],")",["T_WHITESPACE"," ",323],"{",["T_WHITESPACE","\n                    ",323],["T_BREAK","break",324],";",["T_WHITESPACE","\n                ",324],"}",["T_WHITESPACE","\n            ",325],"}",["T_WHITESPACE","\n\n            ",326],["T_RETURN","return",328],["T_WHITESPACE"," ",328],["T_VARIABLE","$rewrittenQuery",328],";",["T_WHITESPACE","\n        ",328],"}",["T_WHITESPACE","\n    ",329],"}",["T_WHITESPACE","\n\n    ",330],["T_DOC_COMMENT","\/**\n     * Optimize query in the context of specified index\n     *\n     * @param Zend_Search_Lucene_Interface $index\n     * @return Zend_Search_Lucene_Search_Query\n     *\/",332],["T_WHITESPACE","\n    ",337],["T_PUBLIC","public",338],["T_WHITESPACE"," ",338],["T_FUNCTION","function",338],["T_WHITESPACE"," ",338],["T_STRING","optimize",338],"(",["T_STRING","Zend_Search_Lucene_Interface",338],["T_WHITESPACE"," ",338],["T_VARIABLE","$index",338],")",["T_WHITESPACE","\n    ",338],"{",["T_WHITESPACE","\n        ",339],["T_COMMENT","#require_once 'Zend\/Search\/Lucene\/Exception.php';\n",340],["T_WHITESPACE","        ",341],["T_THROW","throw",341],["T_WHITESPACE"," ",341],["T_NEW","new",341],["T_WHITESPACE"," ",341],["T_STRING","Zend_Search_Lucene_Exception",341],"(",["T_CONSTANT_ENCAPSED_STRING","'Fuzzy query should not be directly used for search. Use $query->rewrite($index)'",341],")",";",["T_WHITESPACE","\n    ",341],"}",["T_WHITESPACE","\n\n    ",342],["T_DOC_COMMENT","\/**\n     * Return query terms\n     *\n     * @return array\n     * @throws Zend_Search_Lucene_Exception\n     *\/",344],["T_WHITESPACE","\n    ",349],["T_PUBLIC","public",350],["T_WHITESPACE"," ",350],["T_FUNCTION","function",350],["T_WHITESPACE"," ",350],["T_STRING","getQueryTerms",350],"(",")",["T_WHITESPACE","\n    ",350],"{",["T_WHITESPACE","\n        ",351],["T_IF","if",352],["T_WHITESPACE"," ",352],"(",["T_VARIABLE","$this",352],["T_OBJECT_OPERATOR","->",352],["T_STRING","_matches",352],["T_WHITESPACE"," ",352],["T_IS_IDENTICAL","===",352],["T_WHITESPACE"," ",352],["T_STRING","null",352],")",["T_WHITESPACE"," ",352],"{",["T_WHITESPACE","\n            ",352],["T_COMMENT","#require_once 'Zend\/Search\/Lucene\/Exception.php';\n",353],["T_WHITESPACE","            ",354],["T_THROW","throw",354],["T_WHITESPACE"," ",354],["T_NEW","new",354],["T_WHITESPACE"," ",354],["T_STRING","Zend_Search_Lucene_Exception",354],"(",["T_CONSTANT_ENCAPSED_STRING","'Search or rewrite operations have to be performed before.'",354],")",";",["T_WHITESPACE","\n        ",354],"}",["T_WHITESPACE","\n\n        ",355],["T_RETURN","return",357],["T_WHITESPACE"," ",357],["T_VARIABLE","$this",357],["T_OBJECT_OPERATOR","->",357],["T_STRING","_matches",357],";",["T_WHITESPACE","\n    ",357],"}",["T_WHITESPACE","\n\n    ",358],["T_DOC_COMMENT","\/**\n     * Constructs an appropriate Weight implementation for this query.\n     *\n     * @param Zend_Search_Lucene_Interface $reader\n     * @return Zend_Search_Lucene_Search_Weight\n     * @throws Zend_Search_Lucene_Exception\n     *\/",360],["T_WHITESPACE","\n    ",366],["T_PUBLIC","public",367],["T_WHITESPACE"," ",367],["T_FUNCTION","function",367],["T_WHITESPACE"," ",367],["T_STRING","createWeight",367],"(",["T_STRING","Zend_Search_Lucene_Interface",367],["T_WHITESPACE"," ",367],["T_VARIABLE","$reader",367],")",["T_WHITESPACE","\n    ",367],"{",["T_WHITESPACE","\n        ",368],["T_COMMENT","#require_once 'Zend\/Search\/Lucene\/Exception.php';\n",369],["T_WHITESPACE","        ",370],["T_THROW","throw",370],["T_WHITESPACE"," ",370],["T_NEW","new",370],["T_WHITESPACE"," ",370],["T_STRING","Zend_Search_Lucene_Exception",370],"(",["T_CONSTANT_ENCAPSED_STRING","'Fuzzy query should not be directly used for search. Use $query->rewrite($index)'",370],")",";",["T_WHITESPACE","\n    ",370],"}",["T_WHITESPACE","\n\n\n    ",371],["T_DOC_COMMENT","\/**\n     * Execute query in context of index reader\n     * It also initializes necessary internal structures\n     *\n     * @param Zend_Search_Lucene_Interface $reader\n     * @param Zend_Search_Lucene_Index_DocsFilter|null $docsFilter\n     * @throws Zend_Search_Lucene_Exception\n     *\/",374],["T_WHITESPACE","\n    ",381],["T_PUBLIC","public",382],["T_WHITESPACE"," ",382],["T_FUNCTION","function",382],["T_WHITESPACE"," ",382],["T_STRING","execute",382],"(",["T_STRING","Zend_Search_Lucene_Interface",382],["T_WHITESPACE"," ",382],["T_VARIABLE","$reader",382],",",["T_WHITESPACE"," ",382],["T_VARIABLE","$docsFilter",382],["T_WHITESPACE"," ",382],"=",["T_WHITESPACE"," ",382],["T_STRING","null",382],")",["T_WHITESPACE","\n    ",382],"{",["T_WHITESPACE","\n        ",383],["T_COMMENT","#require_once 'Zend\/Search\/Lucene\/Exception.php';\n",384],["T_WHITESPACE","        ",385],["T_THROW","throw",385],["T_WHITESPACE"," ",385],["T_NEW","new",385],["T_WHITESPACE"," ",385],["T_STRING","Zend_Search_Lucene_Exception",385],"(",["T_CONSTANT_ENCAPSED_STRING","'Fuzzy query should not be directly used for search. Use $query->rewrite($index)'",385],")",";",["T_WHITESPACE","\n    ",385],"}",["T_WHITESPACE","\n\n    ",386],["T_DOC_COMMENT","\/**\n     * Get document ids likely matching the query\n     *\n     * It's an array with document ids as keys (performance considerations)\n     *\n     * @return array\n     * @throws Zend_Search_Lucene_Exception\n     *\/",388],["T_WHITESPACE","\n    ",395],["T_PUBLIC","public",396],["T_WHITESPACE"," ",396],["T_FUNCTION","function",396],["T_WHITESPACE"," ",396],["T_STRING","matchedDocs",396],"(",")",["T_WHITESPACE","\n    ",396],"{",["T_WHITESPACE","\n        ",397],["T_COMMENT","#require_once 'Zend\/Search\/Lucene\/Exception.php';\n",398],["T_WHITESPACE","        ",399],["T_THROW","throw",399],["T_WHITESPACE"," ",399],["T_NEW","new",399],["T_WHITESPACE"," ",399],["T_STRING","Zend_Search_Lucene_Exception",399],"(",["T_CONSTANT_ENCAPSED_STRING","'Fuzzy query should not be directly used for search. Use $query->rewrite($index)'",399],")",";",["T_WHITESPACE","\n    ",399],"}",["T_WHITESPACE","\n\n    ",400],["T_DOC_COMMENT","\/**\n     * Score specified document\n     *\n     * @param integer $docId\n     * @param Zend_Search_Lucene_Interface $reader\n     * @return float\n     * @throws Zend_Search_Lucene_Exception\n     *\/",402],["T_WHITESPACE","\n    ",409],["T_PUBLIC","public",410],["T_WHITESPACE"," ",410],["T_FUNCTION","function",410],["T_WHITESPACE"," ",410],["T_STRING","score",410],"(",["T_VARIABLE","$docId",410],",",["T_WHITESPACE"," ",410],["T_STRING","Zend_Search_Lucene_Interface",410],["T_WHITESPACE"," ",410],["T_VARIABLE","$reader",410],")",["T_WHITESPACE","\n    ",410],"{",["T_WHITESPACE","\n        ",411],["T_COMMENT","#require_once 'Zend\/Search\/Lucene\/Exception.php';\n",412],["T_WHITESPACE","        ",413],["T_THROW","throw",413],["T_WHITESPACE"," ",413],["T_NEW","new",413],["T_WHITESPACE"," ",413],["T_STRING","Zend_Search_Lucene_Exception",413],"(",["T_CONSTANT_ENCAPSED_STRING","'Fuzzy query should not be directly used for search. Use $query->rewrite($index)'",413],")",";",["T_WHITESPACE","\n    ",413],"}",["T_WHITESPACE","\n\n    ",414],["T_DOC_COMMENT","\/**\n     * Query specific matches highlighting\n     *\n     * @param Zend_Search_Lucene_Search_Highlighter_Interface $highlighter  Highlighter object (also contains doc for highlighting)\n     *\/",416],["T_WHITESPACE","\n    ",420],["T_PROTECTED","protected",421],["T_WHITESPACE"," ",421],["T_FUNCTION","function",421],["T_WHITESPACE"," ",421],["T_STRING","_highlightMatches",421],"(",["T_STRING","Zend_Search_Lucene_Search_Highlighter_Interface",421],["T_WHITESPACE"," ",421],["T_VARIABLE","$highlighter",421],")",["T_WHITESPACE","\n    ",421],"{",["T_WHITESPACE","\n        ",422],["T_VARIABLE","$words",423],["T_WHITESPACE"," ",423],"=",["T_WHITESPACE"," ",423],["T_ARRAY","array",423],"(",")",";",["T_WHITESPACE","\n\n        ",423],["T_COMMENT","#require_once 'Zend\/Search\/Lucene\/Index\/Term.php';\n",425],["T_WHITESPACE","        ",426],["T_VARIABLE","$prefix",426],["T_WHITESPACE","           ",426],"=",["T_WHITESPACE"," ",426],["T_STRING","Zend_Search_Lucene_Index_Term",426],["T_DOUBLE_COLON","::",426],["T_STRING","getPrefix",426],"(",["T_VARIABLE","$this",426],["T_OBJECT_OPERATOR","->",426],["T_STRING","_term",426],["T_OBJECT_OPERATOR","->",426],["T_STRING","text",426],",",["T_WHITESPACE"," ",426],["T_VARIABLE","$this",426],["T_OBJECT_OPERATOR","->",426],["T_STRING","_prefixLength",426],")",";",["T_WHITESPACE","\n        ",426],["T_VARIABLE","$prefixByteLength",427],["T_WHITESPACE"," ",427],"=",["T_WHITESPACE"," ",427],["T_STRING","strlen",427],"(",["T_VARIABLE","$prefix",427],")",";",["T_WHITESPACE","\n        ",427],["T_VARIABLE","$prefixUtf8Length",428],["T_WHITESPACE"," ",428],"=",["T_WHITESPACE"," ",428],["T_STRING","Zend_Search_Lucene_Index_Term",428],["T_DOUBLE_COLON","::",428],["T_STRING","getLength",428],"(",["T_VARIABLE","$prefix",428],")",";",["T_WHITESPACE","\n\n        ",428],["T_VARIABLE","$termLength",430],["T_WHITESPACE","       ",430],"=",["T_WHITESPACE"," ",430],["T_STRING","Zend_Search_Lucene_Index_Term",430],["T_DOUBLE_COLON","::",430],["T_STRING","getLength",430],"(",["T_VARIABLE","$this",430],["T_OBJECT_OPERATOR","->",430],["T_STRING","_term",430],["T_OBJECT_OPERATOR","->",430],["T_STRING","text",430],")",";",["T_WHITESPACE","\n\n        ",430],["T_VARIABLE","$termRest",432],["T_WHITESPACE","         ",432],"=",["T_WHITESPACE"," ",432],["T_STRING","substr",432],"(",["T_VARIABLE","$this",432],["T_OBJECT_OPERATOR","->",432],["T_STRING","_term",432],["T_OBJECT_OPERATOR","->",432],["T_STRING","text",432],",",["T_WHITESPACE"," ",432],["T_VARIABLE","$prefixByteLength",432],")",";",["T_WHITESPACE","\n        ",432],["T_COMMENT","\/\/ we calculate length of the rest in bytes since levenshtein() is not UTF-8 compatible\n",433],["T_WHITESPACE","        ",434],["T_VARIABLE","$termRestLength",434],["T_WHITESPACE","   ",434],"=",["T_WHITESPACE"," ",434],["T_STRING","strlen",434],"(",["T_VARIABLE","$termRest",434],")",";",["T_WHITESPACE","\n\n        ",434],["T_VARIABLE","$scaleFactor",436],["T_WHITESPACE"," ",436],"=",["T_WHITESPACE"," ",436],["T_LNUMBER","1",436],"\/","(",["T_LNUMBER","1",436],["T_WHITESPACE"," ",436],"-",["T_WHITESPACE"," ",436],["T_VARIABLE","$this",436],["T_OBJECT_OPERATOR","->",436],["T_STRING","_minimumSimilarity",436],")",";",["T_WHITESPACE","\n\n        ",436],["T_VARIABLE","$docBody",438],["T_WHITESPACE"," ",438],"=",["T_WHITESPACE"," ",438],["T_VARIABLE","$highlighter",438],["T_OBJECT_OPERATOR","->",438],["T_STRING","getDocument",438],"(",")",["T_OBJECT_OPERATOR","->",438],["T_STRING","getFieldUtf8Value",438],"(",["T_CONSTANT_ENCAPSED_STRING","'body'",438],")",";",["T_WHITESPACE","\n        ",438],["T_COMMENT","#require_once 'Zend\/Search\/Lucene\/Analysis\/Analyzer.php';\n",439],["T_WHITESPACE","        ",440],["T_VARIABLE","$tokens",440],["T_WHITESPACE"," ",440],"=",["T_WHITESPACE"," ",440],["T_STRING","Zend_Search_Lucene_Analysis_Analyzer",440],["T_DOUBLE_COLON","::",440],["T_STRING","getDefault",440],"(",")",["T_OBJECT_OPERATOR","->",440],["T_STRING","tokenize",440],"(",["T_VARIABLE","$docBody",440],",",["T_WHITESPACE"," ",440],["T_CONSTANT_ENCAPSED_STRING","'UTF-8'",440],")",";",["T_WHITESPACE","\n        ",440],["T_FOREACH","foreach",441],["T_WHITESPACE"," ",441],"(",["T_VARIABLE","$tokens",441],["T_WHITESPACE"," ",441],["T_AS","as",441],["T_WHITESPACE"," ",441],["T_VARIABLE","$token",441],")",["T_WHITESPACE"," ",441],"{",["T_WHITESPACE","\n            ",441],["T_VARIABLE","$termText",442],["T_WHITESPACE"," ",442],"=",["T_WHITESPACE"," ",442],["T_VARIABLE","$token",442],["T_OBJECT_OPERATOR","->",442],["T_STRING","getTermText",442],"(",")",";",["T_WHITESPACE","\n\n            ",442],["T_IF","if",444],["T_WHITESPACE"," ",444],"(",["T_STRING","substr",444],"(",["T_VARIABLE","$termText",444],",",["T_WHITESPACE"," ",444],["T_LNUMBER","0",444],",",["T_WHITESPACE"," ",444],["T_VARIABLE","$prefixByteLength",444],")",["T_WHITESPACE"," ",444],["T_IS_EQUAL","==",444],["T_WHITESPACE"," ",444],["T_VARIABLE","$prefix",444],")",["T_WHITESPACE"," ",444],"{",["T_WHITESPACE","\n                ",444],["T_COMMENT","\/\/ Calculate similarity\n",445],["T_WHITESPACE","                ",446],["T_VARIABLE","$target",446],["T_WHITESPACE"," ",446],"=",["T_WHITESPACE"," ",446],["T_STRING","substr",446],"(",["T_VARIABLE","$termText",446],",",["T_WHITESPACE"," ",446],["T_VARIABLE","$prefixByteLength",446],")",";",["T_WHITESPACE","\n\n                ",446],["T_VARIABLE","$maxDistance",448],["T_WHITESPACE"," ",448],"=",["T_WHITESPACE"," ",448],["T_ISSET","isset",448],"(",["T_VARIABLE","$this",448],["T_OBJECT_OPERATOR","->",448],["T_STRING","_maxDistances",448],"[",["T_STRING","strlen",448],"(",["T_VARIABLE","$target",448],")","]",")","?",["T_WHITESPACE","\n                                   ",448],["T_VARIABLE","$this",449],["T_OBJECT_OPERATOR","->",449],["T_STRING","_maxDistances",449],"[",["T_STRING","strlen",449],"(",["T_VARIABLE","$target",449],")","]",["T_WHITESPACE"," ",449],":",["T_WHITESPACE","\n                                   ",449],["T_VARIABLE","$this",450],["T_OBJECT_OPERATOR","->",450],["T_STRING","_calculateMaxDistance",450],"(",["T_VARIABLE","$prefixUtf8Length",450],",",["T_WHITESPACE"," ",450],["T_VARIABLE","$termRestLength",450],",",["T_WHITESPACE"," ",450],["T_STRING","strlen",450],"(",["T_VARIABLE","$target",450],")",")",";",["T_WHITESPACE","\n\n                ",450],["T_IF","if",452],["T_WHITESPACE"," ",452],"(",["T_VARIABLE","$termRestLength",452],["T_WHITESPACE"," ",452],["T_IS_EQUAL","==",452],["T_WHITESPACE"," ",452],["T_LNUMBER","0",452],")",["T_WHITESPACE"," ",452],"{",["T_WHITESPACE","\n                    ",452],["T_COMMENT","\/\/ we don't have anything to compare.  That means if we just add\n",453],["T_WHITESPACE","                    ",454],["T_COMMENT","\/\/ the letters for current term we get the new word\n",454],["T_WHITESPACE","                    ",455],["T_VARIABLE","$similarity",455],["T_WHITESPACE"," ",455],"=",["T_WHITESPACE"," ",455],"(","(",["T_VARIABLE","$prefixUtf8Length",455],["T_WHITESPACE"," ",455],["T_IS_EQUAL","==",455],["T_WHITESPACE"," ",455],["T_LNUMBER","0",455],")","?",["T_WHITESPACE"," ",455],["T_LNUMBER","0",455],["T_WHITESPACE"," ",455],":",["T_WHITESPACE"," ",455],["T_LNUMBER","1",455],["T_WHITESPACE"," ",455],"-",["T_WHITESPACE"," ",455],["T_STRING","strlen",455],"(",["T_VARIABLE","$target",455],")","\/",["T_VARIABLE","$prefixUtf8Length",455],")",";",["T_WHITESPACE","\n                ",455],"}",["T_WHITESPACE"," ",456],["T_ELSE","else",456],["T_WHITESPACE"," ",456],["T_IF","if",456],["T_WHITESPACE"," ",456],"(",["T_STRING","strlen",456],"(",["T_VARIABLE","$target",456],")",["T_WHITESPACE"," ",456],["T_IS_EQUAL","==",456],["T_WHITESPACE"," ",456],["T_LNUMBER","0",456],")",["T_WHITESPACE"," ",456],"{",["T_WHITESPACE","\n                    ",456],["T_VARIABLE","$similarity",457],["T_WHITESPACE"," ",457],"=",["T_WHITESPACE"," ",457],"(","(",["T_VARIABLE","$prefixUtf8Length",457],["T_WHITESPACE"," ",457],["T_IS_EQUAL","==",457],["T_WHITESPACE"," ",457],["T_LNUMBER","0",457],")","?",["T_WHITESPACE"," ",457],["T_LNUMBER","0",457],["T_WHITESPACE"," ",457],":",["T_WHITESPACE"," ",457],["T_LNUMBER","1",457],["T_WHITESPACE"," ",457],"-",["T_WHITESPACE"," ",457],["T_VARIABLE","$termRestLength",457],"\/",["T_VARIABLE","$prefixUtf8Length",457],")",";",["T_WHITESPACE","\n                ",457],"}",["T_WHITESPACE"," ",458],["T_ELSE","else",458],["T_WHITESPACE"," ",458],["T_IF","if",458],["T_WHITESPACE"," ",458],"(",["T_VARIABLE","$maxDistance",458],["T_WHITESPACE"," ",458],"<",["T_WHITESPACE"," ",458],["T_STRING","abs",458],"(",["T_VARIABLE","$termRestLength",458],["T_WHITESPACE"," ",458],"-",["T_WHITESPACE"," ",458],["T_STRING","strlen",458],"(",["T_VARIABLE","$target",458],")",")",")","{",["T_WHITESPACE","\n                    ",458],["T_COMMENT","\/\/just adding the characters of term to target or vice-versa results in too many edits\n",459],["T_WHITESPACE","                    ",460],["T_COMMENT","\/\/for example \"pre\" length is 3 and \"prefixes\" length is 8.  We can see that\n",460],["T_WHITESPACE","                    ",461],["T_COMMENT","\/\/given this optimal circumstance, the edit distance cannot be less than 5.\n",461],["T_WHITESPACE","                    ",462],["T_COMMENT","\/\/which is 8-3 or more precisesly abs(3-8).\n",462],["T_WHITESPACE","                    ",463],["T_COMMENT","\/\/if our maximum edit distance is 4, then we can discard this word\n",463],["T_WHITESPACE","                    ",464],["T_COMMENT","\/\/without looking at it.\n",464],["T_WHITESPACE","                    ",465],["T_VARIABLE","$similarity",465],["T_WHITESPACE"," ",465],"=",["T_WHITESPACE"," ",465],["T_LNUMBER","0",465],";",["T_WHITESPACE","\n                ",465],"}",["T_WHITESPACE"," ",466],["T_ELSE","else",466],["T_WHITESPACE"," ",466],"{",["T_WHITESPACE","\n                    ",466],["T_VARIABLE","$similarity",467],["T_WHITESPACE"," ",467],"=",["T_WHITESPACE"," ",467],["T_LNUMBER","1",467],["T_WHITESPACE"," ",467],"-",["T_WHITESPACE"," ",467],["T_STRING","levenshtein",467],"(",["T_VARIABLE","$termRest",467],",",["T_WHITESPACE"," ",467],["T_VARIABLE","$target",467],")","\/","(",["T_VARIABLE","$prefixUtf8Length",467],["T_WHITESPACE"," ",467],"+",["T_WHITESPACE"," ",467],["T_STRING","min",467],"(",["T_VARIABLE","$termRestLength",467],",",["T_WHITESPACE"," ",467],["T_STRING","strlen",467],"(",["T_VARIABLE","$target",467],")",")",")",";",["T_WHITESPACE","\n                ",467],"}",["T_WHITESPACE","\n\n                ",468],["T_IF","if",470],["T_WHITESPACE"," ",470],"(",["T_VARIABLE","$similarity",470],["T_WHITESPACE"," ",470],">",["T_WHITESPACE"," ",470],["T_VARIABLE","$this",470],["T_OBJECT_OPERATOR","->",470],["T_STRING","_minimumSimilarity",470],")",["T_WHITESPACE"," ",470],"{",["T_WHITESPACE","\n                    ",470],["T_VARIABLE","$words",471],"[","]",["T_WHITESPACE"," ",471],"=",["T_WHITESPACE"," ",471],["T_VARIABLE","$termText",471],";",["T_WHITESPACE","\n                ",471],"}",["T_WHITESPACE","\n            ",472],"}",["T_WHITESPACE","\n        ",473],"}",["T_WHITESPACE","\n\n        ",474],["T_VARIABLE","$highlighter",476],["T_OBJECT_OPERATOR","->",476],["T_STRING","highlight",476],"(",["T_VARIABLE","$words",476],")",";",["T_WHITESPACE","\n    ",476],"}",["T_WHITESPACE","\n\n    ",477],["T_DOC_COMMENT","\/**\n     * Print a query\n     *\n     * @return string\n     *\/",479],["T_WHITESPACE","\n    ",483],["T_PUBLIC","public",484],["T_WHITESPACE"," ",484],["T_FUNCTION","function",484],["T_WHITESPACE"," ",484],["T_STRING","__toString",484],"(",")",["T_WHITESPACE","\n    ",484],"{",["T_WHITESPACE","\n        ",485],["T_COMMENT","\/\/ It's used only for query visualisation, so we don't care about characters escaping\n",486],["T_WHITESPACE","        ",487],["T_RETURN","return",487],["T_WHITESPACE"," ",487],"(","(",["T_VARIABLE","$this",487],["T_OBJECT_OPERATOR","->",487],["T_STRING","_term",487],["T_OBJECT_OPERATOR","->",487],["T_STRING","field",487],["T_WHITESPACE"," ",487],["T_IS_IDENTICAL","===",487],["T_WHITESPACE"," ",487],["T_STRING","null",487],")","?",["T_WHITESPACE"," ",487],["T_CONSTANT_ENCAPSED_STRING","''",487],["T_WHITESPACE"," ",487],":",["T_WHITESPACE"," ",487],["T_VARIABLE","$this",487],["T_OBJECT_OPERATOR","->",487],["T_STRING","_term",487],["T_OBJECT_OPERATOR","->",487],["T_STRING","field",487],["T_WHITESPACE"," ",487],".",["T_WHITESPACE"," ",487],["T_CONSTANT_ENCAPSED_STRING","':'",487],")",["T_WHITESPACE","\n             ",487],".",["T_WHITESPACE"," ",488],["T_VARIABLE","$this",488],["T_OBJECT_OPERATOR","->",488],["T_STRING","_term",488],["T_OBJECT_OPERATOR","->",488],["T_STRING","text",488],["T_WHITESPACE"," ",488],".",["T_WHITESPACE"," ",488],["T_CONSTANT_ENCAPSED_STRING","'~'",488],["T_WHITESPACE","\n             ",488],".",["T_WHITESPACE"," ",489],"(","(",["T_VARIABLE","$this",489],["T_OBJECT_OPERATOR","->",489],["T_STRING","_minimumSimilarity",489],["T_WHITESPACE"," ",489],["T_IS_NOT_EQUAL","!=",489],["T_WHITESPACE"," ",489],["T_STRING","self",489],["T_DOUBLE_COLON","::",489],["T_STRING","DEFAULT_MIN_SIMILARITY",489],")","?",["T_WHITESPACE"," ",489],["T_STRING","round",489],"(",["T_VARIABLE","$this",489],["T_OBJECT_OPERATOR","->",489],["T_STRING","_minimumSimilarity",489],",",["T_WHITESPACE"," ",489],["T_LNUMBER","4",489],")",["T_WHITESPACE"," ",489],":",["T_WHITESPACE"," ",489],["T_CONSTANT_ENCAPSED_STRING","''",489],")",["T_WHITESPACE","\n             ",489],".",["T_WHITESPACE"," ",490],"(","(",["T_VARIABLE","$this",490],["T_OBJECT_OPERATOR","->",490],["T_STRING","getBoost",490],"(",")",["T_WHITESPACE"," ",490],["T_IS_NOT_EQUAL","!=",490],["T_WHITESPACE"," ",490],["T_LNUMBER","1",490],")","?",["T_WHITESPACE"," ",490],["T_CONSTANT_ENCAPSED_STRING","'^'",490],["T_WHITESPACE"," ",490],".",["T_WHITESPACE"," ",490],["T_STRING","round",490],"(",["T_VARIABLE","$this",490],["T_OBJECT_OPERATOR","->",490],["T_STRING","getBoost",490],"(",")",",",["T_WHITESPACE"," ",490],["T_LNUMBER","4",490],")",["T_WHITESPACE"," ",490],":",["T_WHITESPACE"," ",490],["T_CONSTANT_ENCAPSED_STRING","''",490],")",";",["T_WHITESPACE","\n    ",490],"}",["T_WHITESPACE","\n",491],"}",["T_WHITESPACE","\n\n",492]]
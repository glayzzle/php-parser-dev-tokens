[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Zend Framework\n *\n * LICENSE\n *\n * This source file is subject to the new BSD license that is bundled\n * with this package in the file LICENSE.txt.\n * It is also available through the world-wide-web at this URL:\n * http:\/\/framework.zend.com\/license\/new-bsd\n * If you did not receive a copy of the license and are unable to\n * obtain it through the world-wide-web, please send an email\n * to license@zend.com so we can send you a copy immediately.\n *\n * @category   Zend\n * @package    Zend_Search_Lucene\n * @subpackage Search\n * @copyright  Copyright (c) 2005-2015 Zend Technologies USA Inc. (http:\/\/www.zend.com)\n * @license    http:\/\/framework.zend.com\/license\/new-bsd     New BSD License\n * @version    $Id$\n *\/",2],["T_WHITESPACE","\n\n\n",21],["T_DOC_COMMENT","\/** Zend_Search_Lucene_Search_Query *\/",24],["T_WHITESPACE","\n",24],["T_COMMENT","#require_once 'Zend\/Search\/Lucene\/Search\/Query.php';\n",25],["T_WHITESPACE","\n\n",26],["T_DOC_COMMENT","\/**\n * @category   Zend\n * @package    Zend_Search_Lucene\n * @subpackage Search\n * @copyright  Copyright (c) 2005-2015 Zend Technologies USA Inc. (http:\/\/www.zend.com)\n * @license    http:\/\/framework.zend.com\/license\/new-bsd     New BSD License\n *\/",28],["T_WHITESPACE","\n",34],["T_CLASS","class",35],["T_WHITESPACE"," ",35],["T_STRING","Zend_Search_Lucene_Search_Query_MultiTerm",35],["T_WHITESPACE"," ",35],["T_EXTENDS","extends",35],["T_WHITESPACE"," ",35],["T_STRING","Zend_Search_Lucene_Search_Query",35],["T_WHITESPACE","\n",35],"{",["T_WHITESPACE","\n\n    ",36],["T_DOC_COMMENT","\/**\n     * Terms to find.\n     * Array of Zend_Search_Lucene_Index_Term\n     *\n     * @var array\n     *\/",38],["T_WHITESPACE","\n    ",43],["T_PRIVATE","private",44],["T_WHITESPACE"," ",44],["T_VARIABLE","$_terms",44],["T_WHITESPACE"," ",44],"=",["T_WHITESPACE"," ",44],["T_ARRAY","array",44],"(",")",";",["T_WHITESPACE","\n\n    ",44],["T_DOC_COMMENT","\/**\n     * Term signs.\n     * If true then term is required.\n     * If false then term is prohibited.\n     * If null then term is neither prohibited, nor required\n     *\n     * If array is null then all terms are required\n     *\n     * @var array\n     *\/",46],["T_WHITESPACE","\n    ",55],["T_PRIVATE","private",56],["T_WHITESPACE"," ",56],["T_VARIABLE","$_signs",56],";",["T_WHITESPACE","\n\n    ",56],["T_DOC_COMMENT","\/**\n     * Result vector.\n     *\n     * @var array\n     *\/",58],["T_WHITESPACE","\n    ",62],["T_PRIVATE","private",63],["T_WHITESPACE"," ",63],["T_VARIABLE","$_resVector",63],["T_WHITESPACE"," ",63],"=",["T_WHITESPACE"," ",63],["T_STRING","null",63],";",["T_WHITESPACE","\n\n    ",63],["T_DOC_COMMENT","\/**\n     * Terms positions vectors.\n     * Array of Arrays:\n     * term1Id => (docId => freq, ...)\n     * term2Id => (docId => freq, ...)\n     *\n     * @var array\n     *\/",65],["T_WHITESPACE","\n    ",72],["T_PRIVATE","private",73],["T_WHITESPACE"," ",73],["T_VARIABLE","$_termsFreqs",73],["T_WHITESPACE"," ",73],"=",["T_WHITESPACE"," ",73],["T_ARRAY","array",73],"(",")",";",["T_WHITESPACE","\n\n\n    ",73],["T_DOC_COMMENT","\/**\n     * A score factor based on the fraction of all query terms\n     * that a document contains.\n     * float for conjunction queries\n     * array of float for non conjunction queries\n     *\n     * @var mixed\n     *\/",76],["T_WHITESPACE","\n    ",83],["T_PRIVATE","private",84],["T_WHITESPACE"," ",84],["T_VARIABLE","$_coord",84],["T_WHITESPACE"," ",84],"=",["T_WHITESPACE"," ",84],["T_STRING","null",84],";",["T_WHITESPACE","\n\n\n    ",84],["T_DOC_COMMENT","\/**\n     * Terms weights\n     * array of Zend_Search_Lucene_Search_Weight\n     *\n     * @var array\n     *\/",87],["T_WHITESPACE","\n    ",92],["T_PRIVATE","private",93],["T_WHITESPACE"," ",93],["T_VARIABLE","$_weights",93],["T_WHITESPACE"," ",93],"=",["T_WHITESPACE"," ",93],["T_ARRAY","array",93],"(",")",";",["T_WHITESPACE","\n\n\n    ",93],["T_DOC_COMMENT","\/**\n     * Class constructor.  Create a new multi-term query object.\n     *\n     * if $signs array is omitted then all terms are required\n     * it differs from addTerm() behavior, but should never be used\n     *\n     * @param array $terms    Array of Zend_Search_Lucene_Index_Term objects\n     * @param array $signs    Array of signs.  Sign is boolean|null.\n     * @throws Zend_Search_Lucene_Exception\n     *\/",96],["T_WHITESPACE","\n    ",105],["T_PUBLIC","public",106],["T_WHITESPACE"," ",106],["T_FUNCTION","function",106],["T_WHITESPACE"," ",106],["T_STRING","__construct",106],"(",["T_VARIABLE","$terms",106],["T_WHITESPACE"," ",106],"=",["T_WHITESPACE"," ",106],["T_STRING","null",106],",",["T_WHITESPACE"," ",106],["T_VARIABLE","$signs",106],["T_WHITESPACE"," ",106],"=",["T_WHITESPACE"," ",106],["T_STRING","null",106],")",["T_WHITESPACE","\n    ",106],"{",["T_WHITESPACE","\n        ",107],["T_IF","if",108],["T_WHITESPACE"," ",108],"(",["T_STRING","is_array",108],"(",["T_VARIABLE","$terms",108],")",")",["T_WHITESPACE"," ",108],"{",["T_WHITESPACE","\n            ",108],["T_COMMENT","#require_once 'Zend\/Search\/Lucene.php';\n",109],["T_WHITESPACE","            ",110],["T_IF","if",110],["T_WHITESPACE"," ",110],"(",["T_STRING","count",110],"(",["T_VARIABLE","$terms",110],")",["T_WHITESPACE"," ",110],">",["T_WHITESPACE"," ",110],["T_STRING","Zend_Search_Lucene",110],["T_DOUBLE_COLON","::",110],["T_STRING","getTermsPerQueryLimit",110],"(",")",")",["T_WHITESPACE"," ",110],"{",["T_WHITESPACE","\n                ",110],["T_THROW","throw",111],["T_WHITESPACE"," ",111],["T_NEW","new",111],["T_WHITESPACE"," ",111],["T_STRING","Zend_Search_Lucene_Exception",111],"(",["T_CONSTANT_ENCAPSED_STRING","'Terms per query limit is reached.'",111],")",";",["T_WHITESPACE","\n            ",111],"}",["T_WHITESPACE","\n\n            ",112],["T_VARIABLE","$this",114],["T_OBJECT_OPERATOR","->",114],["T_STRING","_terms",114],["T_WHITESPACE"," ",114],"=",["T_WHITESPACE"," ",114],["T_VARIABLE","$terms",114],";",["T_WHITESPACE","\n\n            ",114],["T_VARIABLE","$this",116],["T_OBJECT_OPERATOR","->",116],["T_STRING","_signs",116],["T_WHITESPACE"," ",116],"=",["T_WHITESPACE"," ",116],["T_STRING","null",116],";",["T_WHITESPACE","\n            ",116],["T_COMMENT","\/\/ Check if all terms are required\n",117],["T_WHITESPACE","            ",118],["T_IF","if",118],["T_WHITESPACE"," ",118],"(",["T_STRING","is_array",118],"(",["T_VARIABLE","$signs",118],")",")",["T_WHITESPACE"," ",118],"{",["T_WHITESPACE","\n                ",118],["T_FOREACH","foreach",119],["T_WHITESPACE"," ",119],"(",["T_VARIABLE","$signs",119],["T_WHITESPACE"," ",119],["T_AS","as",119],["T_WHITESPACE"," ",119],["T_VARIABLE","$sign",119],["T_WHITESPACE"," ",119],")",["T_WHITESPACE"," ",119],"{",["T_WHITESPACE","\n                    ",119],["T_IF","if",120],["T_WHITESPACE"," ",120],"(",["T_VARIABLE","$sign",120],["T_WHITESPACE"," ",120],["T_IS_NOT_IDENTICAL","!==",120],["T_WHITESPACE"," ",120],["T_STRING","true",120],")",["T_WHITESPACE"," ",120],"{",["T_WHITESPACE","\n                        ",120],["T_VARIABLE","$this",121],["T_OBJECT_OPERATOR","->",121],["T_STRING","_signs",121],["T_WHITESPACE"," ",121],"=",["T_WHITESPACE"," ",121],["T_VARIABLE","$signs",121],";",["T_WHITESPACE","\n                        ",121],["T_BREAK","break",122],";",["T_WHITESPACE","\n                    ",122],"}",["T_WHITESPACE","\n                ",123],"}",["T_WHITESPACE","\n            ",124],"}",["T_WHITESPACE","\n        ",125],"}",["T_WHITESPACE","\n    ",126],"}",["T_WHITESPACE","\n\n\n    ",127],["T_DOC_COMMENT","\/**\n     * Add a $term (Zend_Search_Lucene_Index_Term) to this query.\n     *\n     * The sign is specified as:\n     *     TRUE  - term is required\n     *     FALSE - term is prohibited\n     *     NULL  - term is neither prohibited, nor required\n     *\n     * @param  Zend_Search_Lucene_Index_Term $term\n     * @param  boolean|null $sign\n     * @return void\n     *\/",130],["T_WHITESPACE","\n    ",141],["T_PUBLIC","public",142],["T_WHITESPACE"," ",142],["T_FUNCTION","function",142],["T_WHITESPACE"," ",142],["T_STRING","addTerm",142],"(",["T_STRING","Zend_Search_Lucene_Index_Term",142],["T_WHITESPACE"," ",142],["T_VARIABLE","$term",142],",",["T_WHITESPACE"," ",142],["T_VARIABLE","$sign",142],["T_WHITESPACE"," ",142],"=",["T_WHITESPACE"," ",142],["T_STRING","null",142],")",["T_WHITESPACE"," ",142],"{",["T_WHITESPACE","\n        ",142],["T_IF","if",143],["T_WHITESPACE"," ",143],"(",["T_VARIABLE","$sign",143],["T_WHITESPACE"," ",143],["T_IS_NOT_IDENTICAL","!==",143],["T_WHITESPACE"," ",143],["T_STRING","true",143],["T_WHITESPACE"," ",143],["T_BOOLEAN_OR","||",143],["T_WHITESPACE"," ",143],["T_VARIABLE","$this",143],["T_OBJECT_OPERATOR","->",143],["T_STRING","_signs",143],["T_WHITESPACE"," ",143],["T_IS_NOT_IDENTICAL","!==",143],["T_WHITESPACE"," ",143],["T_STRING","null",143],")",["T_WHITESPACE"," ",143],"{",["T_WHITESPACE","       ",143],["T_COMMENT","\/\/ Skip, if all terms are required\n",143],["T_WHITESPACE","            ",144],["T_IF","if",144],["T_WHITESPACE"," ",144],"(",["T_VARIABLE","$this",144],["T_OBJECT_OPERATOR","->",144],["T_STRING","_signs",144],["T_WHITESPACE"," ",144],["T_IS_IDENTICAL","===",144],["T_WHITESPACE"," ",144],["T_STRING","null",144],")",["T_WHITESPACE"," ",144],"{",["T_WHITESPACE","                     ",144],["T_COMMENT","\/\/ Check, If all previous terms are required\n",144],["T_WHITESPACE","                ",145],["T_VARIABLE","$this",145],["T_OBJECT_OPERATOR","->",145],["T_STRING","_signs",145],["T_WHITESPACE"," ",145],"=",["T_WHITESPACE"," ",145],["T_ARRAY","array",145],"(",")",";",["T_WHITESPACE","\n                ",145],["T_FOREACH","foreach",146],["T_WHITESPACE"," ",146],"(",["T_VARIABLE","$this",146],["T_OBJECT_OPERATOR","->",146],["T_STRING","_terms",146],["T_WHITESPACE"," ",146],["T_AS","as",146],["T_WHITESPACE"," ",146],["T_VARIABLE","$prevTerm",146],")",["T_WHITESPACE"," ",146],"{",["T_WHITESPACE","\n                    ",146],["T_VARIABLE","$this",147],["T_OBJECT_OPERATOR","->",147],["T_STRING","_signs",147],"[","]",["T_WHITESPACE"," ",147],"=",["T_WHITESPACE"," ",147],["T_STRING","true",147],";",["T_WHITESPACE","\n                ",147],"}",["T_WHITESPACE","\n            ",148],"}",["T_WHITESPACE","\n            ",149],["T_VARIABLE","$this",150],["T_OBJECT_OPERATOR","->",150],["T_STRING","_signs",150],"[","]",["T_WHITESPACE"," ",150],"=",["T_WHITESPACE"," ",150],["T_VARIABLE","$sign",150],";",["T_WHITESPACE","\n        ",150],"}",["T_WHITESPACE","\n\n        ",151],["T_VARIABLE","$this",153],["T_OBJECT_OPERATOR","->",153],["T_STRING","_terms",153],"[","]",["T_WHITESPACE"," ",153],"=",["T_WHITESPACE"," ",153],["T_VARIABLE","$term",153],";",["T_WHITESPACE","\n    ",153],"}",["T_WHITESPACE","\n\n\n    ",154],["T_DOC_COMMENT","\/**\n     * Re-write query into primitive queries in the context of specified index\n     *\n     * @param Zend_Search_Lucene_Interface $index\n     * @return Zend_Search_Lucene_Search_Query\n     *\/",157],["T_WHITESPACE","\n    ",162],["T_PUBLIC","public",163],["T_WHITESPACE"," ",163],["T_FUNCTION","function",163],["T_WHITESPACE"," ",163],["T_STRING","rewrite",163],"(",["T_STRING","Zend_Search_Lucene_Interface",163],["T_WHITESPACE"," ",163],["T_VARIABLE","$index",163],")",["T_WHITESPACE","\n    ",163],"{",["T_WHITESPACE","\n        ",164],["T_IF","if",165],["T_WHITESPACE"," ",165],"(",["T_STRING","count",165],"(",["T_VARIABLE","$this",165],["T_OBJECT_OPERATOR","->",165],["T_STRING","_terms",165],")",["T_WHITESPACE"," ",165],["T_IS_EQUAL","==",165],["T_WHITESPACE"," ",165],["T_LNUMBER","0",165],")",["T_WHITESPACE"," ",165],"{",["T_WHITESPACE","\n            ",165],["T_COMMENT","#require_once 'Zend\/Search\/Lucene\/Search\/Query\/Empty.php';\n",166],["T_WHITESPACE","            ",167],["T_RETURN","return",167],["T_WHITESPACE"," ",167],["T_NEW","new",167],["T_WHITESPACE"," ",167],["T_STRING","Zend_Search_Lucene_Search_Query_Empty",167],"(",")",";",["T_WHITESPACE","\n        ",167],"}",["T_WHITESPACE","\n\n        ",168],["T_COMMENT","\/\/ Check, that all fields are qualified\n",170],["T_WHITESPACE","        ",171],["T_VARIABLE","$allQualified",171],["T_WHITESPACE"," ",171],"=",["T_WHITESPACE"," ",171],["T_STRING","true",171],";",["T_WHITESPACE","\n        ",171],["T_FOREACH","foreach",172],["T_WHITESPACE"," ",172],"(",["T_VARIABLE","$this",172],["T_OBJECT_OPERATOR","->",172],["T_STRING","_terms",172],["T_WHITESPACE"," ",172],["T_AS","as",172],["T_WHITESPACE"," ",172],["T_VARIABLE","$term",172],")",["T_WHITESPACE"," ",172],"{",["T_WHITESPACE","\n            ",172],["T_IF","if",173],["T_WHITESPACE"," ",173],"(",["T_VARIABLE","$term",173],["T_OBJECT_OPERATOR","->",173],["T_STRING","field",173],["T_WHITESPACE"," ",173],["T_IS_IDENTICAL","===",173],["T_WHITESPACE"," ",173],["T_STRING","null",173],")",["T_WHITESPACE"," ",173],"{",["T_WHITESPACE","\n                ",173],["T_VARIABLE","$allQualified",174],["T_WHITESPACE"," ",174],"=",["T_WHITESPACE"," ",174],["T_STRING","false",174],";",["T_WHITESPACE","\n                ",174],["T_BREAK","break",175],";",["T_WHITESPACE","\n            ",175],"}",["T_WHITESPACE","\n        ",176],"}",["T_WHITESPACE","\n\n        ",177],["T_IF","if",179],["T_WHITESPACE"," ",179],"(",["T_VARIABLE","$allQualified",179],")",["T_WHITESPACE"," ",179],"{",["T_WHITESPACE","\n            ",179],["T_RETURN","return",180],["T_WHITESPACE"," ",180],["T_VARIABLE","$this",180],";",["T_WHITESPACE","\n        ",180],"}",["T_WHITESPACE"," ",181],["T_ELSE","else",181],["T_WHITESPACE"," ",181],"{",["T_WHITESPACE","\n            ",181],["T_DOC_COMMENT","\/** transform multiterm query to boolean and apply rewrite() method to subqueries. *\/",182],["T_WHITESPACE","\n            ",182],["T_COMMENT","#require_once 'Zend\/Search\/Lucene\/Search\/Query\/Boolean.php';\n",183],["T_WHITESPACE","            ",184],["T_VARIABLE","$query",184],["T_WHITESPACE"," ",184],"=",["T_WHITESPACE"," ",184],["T_NEW","new",184],["T_WHITESPACE"," ",184],["T_STRING","Zend_Search_Lucene_Search_Query_Boolean",184],"(",")",";",["T_WHITESPACE","\n            ",184],["T_VARIABLE","$query",185],["T_OBJECT_OPERATOR","->",185],["T_STRING","setBoost",185],"(",["T_VARIABLE","$this",185],["T_OBJECT_OPERATOR","->",185],["T_STRING","getBoost",185],"(",")",")",";",["T_WHITESPACE","\n\n            ",185],["T_COMMENT","#require_once 'Zend\/Search\/Lucene\/Search\/Query\/Term.php';\n",187],["T_WHITESPACE","            ",188],["T_FOREACH","foreach",188],["T_WHITESPACE"," ",188],"(",["T_VARIABLE","$this",188],["T_OBJECT_OPERATOR","->",188],["T_STRING","_terms",188],["T_WHITESPACE"," ",188],["T_AS","as",188],["T_WHITESPACE"," ",188],["T_VARIABLE","$termId",188],["T_WHITESPACE"," ",188],["T_DOUBLE_ARROW","=>",188],["T_WHITESPACE"," ",188],["T_VARIABLE","$term",188],")",["T_WHITESPACE"," ",188],"{",["T_WHITESPACE","\n                ",188],["T_VARIABLE","$subquery",189],["T_WHITESPACE"," ",189],"=",["T_WHITESPACE"," ",189],["T_NEW","new",189],["T_WHITESPACE"," ",189],["T_STRING","Zend_Search_Lucene_Search_Query_Term",189],"(",["T_VARIABLE","$term",189],")",";",["T_WHITESPACE","\n\n                ",189],["T_VARIABLE","$query",191],["T_OBJECT_OPERATOR","->",191],["T_STRING","addSubquery",191],"(",["T_VARIABLE","$subquery",191],["T_OBJECT_OPERATOR","->",191],["T_STRING","rewrite",191],"(",["T_VARIABLE","$index",191],")",",",["T_WHITESPACE","\n                                    ",191],"(",["T_VARIABLE","$this",192],["T_OBJECT_OPERATOR","->",192],["T_STRING","_signs",192],["T_WHITESPACE"," ",192],["T_IS_IDENTICAL","===",192],["T_WHITESPACE"," ",192],["T_STRING","null",192],")","?",["T_WHITESPACE","  ",192],["T_STRING","true",192],["T_WHITESPACE"," ",192],":",["T_WHITESPACE"," ",192],["T_VARIABLE","$this",192],["T_OBJECT_OPERATOR","->",192],["T_STRING","_signs",192],"[",["T_VARIABLE","$termId",192],"]",")",";",["T_WHITESPACE","\n            ",192],"}",["T_WHITESPACE","\n\n            ",193],["T_RETURN","return",195],["T_WHITESPACE"," ",195],["T_VARIABLE","$query",195],";",["T_WHITESPACE","\n        ",195],"}",["T_WHITESPACE","\n    ",196],"}",["T_WHITESPACE","\n\n    ",197],["T_DOC_COMMENT","\/**\n     * Optimize query in the context of specified index\n     *\n     * @param Zend_Search_Lucene_Interface $index\n     * @return Zend_Search_Lucene_Search_Query\n     *\/",199],["T_WHITESPACE","\n    ",204],["T_PUBLIC","public",205],["T_WHITESPACE"," ",205],["T_FUNCTION","function",205],["T_WHITESPACE"," ",205],["T_STRING","optimize",205],"(",["T_STRING","Zend_Search_Lucene_Interface",205],["T_WHITESPACE"," ",205],["T_VARIABLE","$index",205],")",["T_WHITESPACE","\n    ",205],"{",["T_WHITESPACE","\n        ",206],["T_VARIABLE","$terms",207],["T_WHITESPACE"," ",207],"=",["T_WHITESPACE"," ",207],["T_VARIABLE","$this",207],["T_OBJECT_OPERATOR","->",207],["T_STRING","_terms",207],";",["T_WHITESPACE","\n        ",207],["T_VARIABLE","$signs",208],["T_WHITESPACE"," ",208],"=",["T_WHITESPACE"," ",208],["T_VARIABLE","$this",208],["T_OBJECT_OPERATOR","->",208],["T_STRING","_signs",208],";",["T_WHITESPACE","\n\n        ",208],["T_FOREACH","foreach",210],["T_WHITESPACE"," ",210],"(",["T_VARIABLE","$terms",210],["T_WHITESPACE"," ",210],["T_AS","as",210],["T_WHITESPACE"," ",210],["T_VARIABLE","$id",210],["T_WHITESPACE"," ",210],["T_DOUBLE_ARROW","=>",210],["T_WHITESPACE"," ",210],["T_VARIABLE","$term",210],")",["T_WHITESPACE"," ",210],"{",["T_WHITESPACE","\n            ",210],["T_IF","if",211],["T_WHITESPACE"," ",211],"(","!",["T_VARIABLE","$index",211],["T_OBJECT_OPERATOR","->",211],["T_STRING","hasTerm",211],"(",["T_VARIABLE","$term",211],")",")",["T_WHITESPACE"," ",211],"{",["T_WHITESPACE","\n                ",211],["T_IF","if",212],["T_WHITESPACE"," ",212],"(",["T_VARIABLE","$signs",212],["T_WHITESPACE"," ",212],["T_IS_IDENTICAL","===",212],["T_WHITESPACE"," ",212],["T_STRING","null",212],["T_WHITESPACE","  ",212],["T_BOOLEAN_OR","||",212],["T_WHITESPACE","  ",212],["T_VARIABLE","$signs",212],"[",["T_VARIABLE","$id",212],"]",["T_WHITESPACE"," ",212],["T_IS_IDENTICAL","===",212],["T_WHITESPACE"," ",212],["T_STRING","true",212],")",["T_WHITESPACE"," ",212],"{",["T_WHITESPACE","\n                    ",212],["T_COMMENT","\/\/ Term is required\n",213],["T_WHITESPACE","                    ",214],["T_COMMENT","#require_once 'Zend\/Search\/Lucene\/Search\/Query\/Empty.php';\n",214],["T_WHITESPACE","                    ",215],["T_RETURN","return",215],["T_WHITESPACE"," ",215],["T_NEW","new",215],["T_WHITESPACE"," ",215],["T_STRING","Zend_Search_Lucene_Search_Query_Empty",215],"(",")",";",["T_WHITESPACE","\n                ",215],"}",["T_WHITESPACE"," ",216],["T_ELSE","else",216],["T_WHITESPACE"," ",216],"{",["T_WHITESPACE","\n                    ",216],["T_COMMENT","\/\/ Term is optional or prohibited\n",217],["T_WHITESPACE","                    ",218],["T_COMMENT","\/\/ Remove it from terms and signs list\n",218],["T_WHITESPACE","                    ",219],["T_UNSET","unset",219],"(",["T_VARIABLE","$terms",219],"[",["T_VARIABLE","$id",219],"]",")",";",["T_WHITESPACE","\n                    ",219],["T_UNSET","unset",220],"(",["T_VARIABLE","$signs",220],"[",["T_VARIABLE","$id",220],"]",")",";",["T_WHITESPACE","\n                ",220],"}",["T_WHITESPACE","\n            ",221],"}",["T_WHITESPACE","\n        ",222],"}",["T_WHITESPACE","\n\n        ",223],["T_COMMENT","\/\/ Check if all presented terms are prohibited\n",225],["T_WHITESPACE","        ",226],["T_VARIABLE","$allProhibited",226],["T_WHITESPACE"," ",226],"=",["T_WHITESPACE"," ",226],["T_STRING","true",226],";",["T_WHITESPACE","\n        ",226],["T_IF","if",227],["T_WHITESPACE"," ",227],"(",["T_VARIABLE","$signs",227],["T_WHITESPACE"," ",227],["T_IS_IDENTICAL","===",227],["T_WHITESPACE"," ",227],["T_STRING","null",227],")",["T_WHITESPACE"," ",227],"{",["T_WHITESPACE","\n            ",227],["T_VARIABLE","$allProhibited",228],["T_WHITESPACE"," ",228],"=",["T_WHITESPACE"," ",228],["T_STRING","false",228],";",["T_WHITESPACE","\n        ",228],"}",["T_WHITESPACE"," ",229],["T_ELSE","else",229],["T_WHITESPACE"," ",229],"{",["T_WHITESPACE","\n            ",229],["T_FOREACH","foreach",230],["T_WHITESPACE"," ",230],"(",["T_VARIABLE","$signs",230],["T_WHITESPACE"," ",230],["T_AS","as",230],["T_WHITESPACE"," ",230],["T_VARIABLE","$sign",230],")",["T_WHITESPACE"," ",230],"{",["T_WHITESPACE","\n                ",230],["T_IF","if",231],["T_WHITESPACE"," ",231],"(",["T_VARIABLE","$sign",231],["T_WHITESPACE"," ",231],["T_IS_NOT_IDENTICAL","!==",231],["T_WHITESPACE"," ",231],["T_STRING","false",231],")",["T_WHITESPACE"," ",231],"{",["T_WHITESPACE","\n                    ",231],["T_VARIABLE","$allProhibited",232],["T_WHITESPACE"," ",232],"=",["T_WHITESPACE"," ",232],["T_STRING","false",232],";",["T_WHITESPACE","\n                    ",232],["T_BREAK","break",233],";",["T_WHITESPACE","\n                ",233],"}",["T_WHITESPACE","\n            ",234],"}",["T_WHITESPACE","\n        ",235],"}",["T_WHITESPACE","\n        ",236],["T_IF","if",237],["T_WHITESPACE"," ",237],"(",["T_VARIABLE","$allProhibited",237],")",["T_WHITESPACE"," ",237],"{",["T_WHITESPACE","\n            ",237],["T_COMMENT","#require_once 'Zend\/Search\/Lucene\/Search\/Query\/Empty.php';\n",238],["T_WHITESPACE","            ",239],["T_RETURN","return",239],["T_WHITESPACE"," ",239],["T_NEW","new",239],["T_WHITESPACE"," ",239],["T_STRING","Zend_Search_Lucene_Search_Query_Empty",239],"(",")",";",["T_WHITESPACE","\n        ",239],"}",["T_WHITESPACE","\n\n        ",240],["T_DOC_COMMENT","\/**\n         * @todo make an optimization for repeated terms\n         * (they may have different signs)\n         *\/",242],["T_WHITESPACE","\n\n        ",245],["T_IF","if",247],["T_WHITESPACE"," ",247],"(",["T_STRING","count",247],"(",["T_VARIABLE","$terms",247],")",["T_WHITESPACE"," ",247],["T_IS_EQUAL","==",247],["T_WHITESPACE"," ",247],["T_LNUMBER","1",247],")",["T_WHITESPACE"," ",247],"{",["T_WHITESPACE","\n            ",247],["T_COMMENT","\/\/ It's already checked, that it's not a prohibited term\n",248],["T_WHITESPACE","\n            ",249],["T_COMMENT","\/\/ It's one term query with one required or optional element\n",250],["T_WHITESPACE","            ",251],["T_COMMENT","#require_once 'Zend\/Search\/Lucene\/Search\/Query\/Term.php';\n",251],["T_WHITESPACE","            ",252],["T_VARIABLE","$optimizedQuery",252],["T_WHITESPACE"," ",252],"=",["T_WHITESPACE"," ",252],["T_NEW","new",252],["T_WHITESPACE"," ",252],["T_STRING","Zend_Search_Lucene_Search_Query_Term",252],"(",["T_STRING","reset",252],"(",["T_VARIABLE","$terms",252],")",")",";",["T_WHITESPACE","\n            ",252],["T_VARIABLE","$optimizedQuery",253],["T_OBJECT_OPERATOR","->",253],["T_STRING","setBoost",253],"(",["T_VARIABLE","$this",253],["T_OBJECT_OPERATOR","->",253],["T_STRING","getBoost",253],"(",")",")",";",["T_WHITESPACE","\n\n            ",253],["T_RETURN","return",255],["T_WHITESPACE"," ",255],["T_VARIABLE","$optimizedQuery",255],";",["T_WHITESPACE","\n        ",255],"}",["T_WHITESPACE","\n\n        ",256],["T_IF","if",258],["T_WHITESPACE"," ",258],"(",["T_STRING","count",258],"(",["T_VARIABLE","$terms",258],")",["T_WHITESPACE"," ",258],["T_IS_EQUAL","==",258],["T_WHITESPACE"," ",258],["T_LNUMBER","0",258],")",["T_WHITESPACE"," ",258],"{",["T_WHITESPACE","\n            ",258],["T_COMMENT","#require_once 'Zend\/Search\/Lucene\/Search\/Query\/Empty.php';\n",259],["T_WHITESPACE","            ",260],["T_RETURN","return",260],["T_WHITESPACE"," ",260],["T_NEW","new",260],["T_WHITESPACE"," ",260],["T_STRING","Zend_Search_Lucene_Search_Query_Empty",260],"(",")",";",["T_WHITESPACE","\n        ",260],"}",["T_WHITESPACE","\n\n        ",261],["T_VARIABLE","$optimizedQuery",263],["T_WHITESPACE"," ",263],"=",["T_WHITESPACE"," ",263],["T_NEW","new",263],["T_WHITESPACE"," ",263],["T_STRING","Zend_Search_Lucene_Search_Query_MultiTerm",263],"(",["T_VARIABLE","$terms",263],",",["T_WHITESPACE"," ",263],["T_VARIABLE","$signs",263],")",";",["T_WHITESPACE","\n        ",263],["T_VARIABLE","$optimizedQuery",264],["T_OBJECT_OPERATOR","->",264],["T_STRING","setBoost",264],"(",["T_VARIABLE","$this",264],["T_OBJECT_OPERATOR","->",264],["T_STRING","getBoost",264],"(",")",")",";",["T_WHITESPACE","\n        ",264],["T_RETURN","return",265],["T_WHITESPACE"," ",265],["T_VARIABLE","$optimizedQuery",265],";",["T_WHITESPACE","\n    ",265],"}",["T_WHITESPACE","\n\n\n    ",266],["T_DOC_COMMENT","\/**\n     * Returns query term\n     *\n     * @return array\n     *\/",269],["T_WHITESPACE","\n    ",273],["T_PUBLIC","public",274],["T_WHITESPACE"," ",274],["T_FUNCTION","function",274],["T_WHITESPACE"," ",274],["T_STRING","getTerms",274],"(",")",["T_WHITESPACE","\n    ",274],"{",["T_WHITESPACE","\n        ",275],["T_RETURN","return",276],["T_WHITESPACE"," ",276],["T_VARIABLE","$this",276],["T_OBJECT_OPERATOR","->",276],["T_STRING","_terms",276],";",["T_WHITESPACE","\n    ",276],"}",["T_WHITESPACE","\n\n\n    ",277],["T_DOC_COMMENT","\/**\n     * Return terms signs\n     *\n     * @return array\n     *\/",280],["T_WHITESPACE","\n    ",284],["T_PUBLIC","public",285],["T_WHITESPACE"," ",285],["T_FUNCTION","function",285],["T_WHITESPACE"," ",285],["T_STRING","getSigns",285],"(",")",["T_WHITESPACE","\n    ",285],"{",["T_WHITESPACE","\n        ",286],["T_RETURN","return",287],["T_WHITESPACE"," ",287],["T_VARIABLE","$this",287],["T_OBJECT_OPERATOR","->",287],["T_STRING","_signs",287],";",["T_WHITESPACE","\n    ",287],"}",["T_WHITESPACE","\n\n\n    ",288],["T_DOC_COMMENT","\/**\n     * Set weight for specified term\n     *\n     * @param integer $num\n     * @param Zend_Search_Lucene_Search_Weight_Term $weight\n     *\/",291],["T_WHITESPACE","\n    ",296],["T_PUBLIC","public",297],["T_WHITESPACE"," ",297],["T_FUNCTION","function",297],["T_WHITESPACE"," ",297],["T_STRING","setWeight",297],"(",["T_VARIABLE","$num",297],",",["T_WHITESPACE"," ",297],["T_VARIABLE","$weight",297],")",["T_WHITESPACE","\n    ",297],"{",["T_WHITESPACE","\n        ",298],["T_VARIABLE","$this",299],["T_OBJECT_OPERATOR","->",299],["T_STRING","_weights",299],"[",["T_VARIABLE","$num",299],"]",["T_WHITESPACE"," ",299],"=",["T_WHITESPACE"," ",299],["T_VARIABLE","$weight",299],";",["T_WHITESPACE","\n    ",299],"}",["T_WHITESPACE","\n\n\n    ",300],["T_DOC_COMMENT","\/**\n     * Constructs an appropriate Weight implementation for this query.\n     *\n     * @param Zend_Search_Lucene_Interface $reader\n     * @return Zend_Search_Lucene_Search_Weight\n     *\/",303],["T_WHITESPACE","\n    ",308],["T_PUBLIC","public",309],["T_WHITESPACE"," ",309],["T_FUNCTION","function",309],["T_WHITESPACE"," ",309],["T_STRING","createWeight",309],"(",["T_STRING","Zend_Search_Lucene_Interface",309],["T_WHITESPACE"," ",309],["T_VARIABLE","$reader",309],")",["T_WHITESPACE","\n    ",309],"{",["T_WHITESPACE","\n        ",310],["T_COMMENT","#require_once 'Zend\/Search\/Lucene\/Search\/Weight\/MultiTerm.php';\n",311],["T_WHITESPACE","        ",312],["T_VARIABLE","$this",312],["T_OBJECT_OPERATOR","->",312],["T_STRING","_weight",312],["T_WHITESPACE"," ",312],"=",["T_WHITESPACE"," ",312],["T_NEW","new",312],["T_WHITESPACE"," ",312],["T_STRING","Zend_Search_Lucene_Search_Weight_MultiTerm",312],"(",["T_VARIABLE","$this",312],",",["T_WHITESPACE"," ",312],["T_VARIABLE","$reader",312],")",";",["T_WHITESPACE","\n        ",312],["T_RETURN","return",313],["T_WHITESPACE"," ",313],["T_VARIABLE","$this",313],["T_OBJECT_OPERATOR","->",313],["T_STRING","_weight",313],";",["T_WHITESPACE","\n    ",313],"}",["T_WHITESPACE","\n\n\n    ",314],["T_DOC_COMMENT","\/**\n     * Calculate result vector for Conjunction query\n     * (like '+something +another')\n     *\n     * @param Zend_Search_Lucene_Interface $reader\n     *\/",317],["T_WHITESPACE","\n    ",322],["T_PRIVATE","private",323],["T_WHITESPACE"," ",323],["T_FUNCTION","function",323],["T_WHITESPACE"," ",323],["T_STRING","_calculateConjunctionResult",323],"(",["T_STRING","Zend_Search_Lucene_Interface",323],["T_WHITESPACE"," ",323],["T_VARIABLE","$reader",323],")",["T_WHITESPACE","\n    ",323],"{",["T_WHITESPACE","\n        ",324],["T_VARIABLE","$this",325],["T_OBJECT_OPERATOR","->",325],["T_STRING","_resVector",325],["T_WHITESPACE"," ",325],"=",["T_WHITESPACE"," ",325],["T_STRING","null",325],";",["T_WHITESPACE","\n\n        ",325],["T_IF","if",327],["T_WHITESPACE"," ",327],"(",["T_STRING","count",327],"(",["T_VARIABLE","$this",327],["T_OBJECT_OPERATOR","->",327],["T_STRING","_terms",327],")",["T_WHITESPACE"," ",327],["T_IS_EQUAL","==",327],["T_WHITESPACE"," ",327],["T_LNUMBER","0",327],")",["T_WHITESPACE"," ",327],"{",["T_WHITESPACE","\n            ",327],["T_VARIABLE","$this",328],["T_OBJECT_OPERATOR","->",328],["T_STRING","_resVector",328],["T_WHITESPACE"," ",328],"=",["T_WHITESPACE"," ",328],["T_ARRAY","array",328],"(",")",";",["T_WHITESPACE","\n        ",328],"}",["T_WHITESPACE","\n\n        ",329],["T_COMMENT","\/\/ Order terms by selectivity\n",331],["T_WHITESPACE","        ",332],["T_VARIABLE","$docFreqs",332],["T_WHITESPACE"," ",332],"=",["T_WHITESPACE"," ",332],["T_ARRAY","array",332],"(",")",";",["T_WHITESPACE","\n        ",332],["T_VARIABLE","$ids",333],["T_WHITESPACE","      ",333],"=",["T_WHITESPACE"," ",333],["T_ARRAY","array",333],"(",")",";",["T_WHITESPACE","\n        ",333],["T_FOREACH","foreach",334],["T_WHITESPACE"," ",334],"(",["T_VARIABLE","$this",334],["T_OBJECT_OPERATOR","->",334],["T_STRING","_terms",334],["T_WHITESPACE"," ",334],["T_AS","as",334],["T_WHITESPACE"," ",334],["T_VARIABLE","$id",334],["T_WHITESPACE"," ",334],["T_DOUBLE_ARROW","=>",334],["T_WHITESPACE"," ",334],["T_VARIABLE","$term",334],")",["T_WHITESPACE"," ",334],"{",["T_WHITESPACE","\n            ",334],["T_VARIABLE","$docFreqs",335],"[","]",["T_WHITESPACE"," ",335],"=",["T_WHITESPACE"," ",335],["T_VARIABLE","$reader",335],["T_OBJECT_OPERATOR","->",335],["T_STRING","docFreq",335],"(",["T_VARIABLE","$term",335],")",";",["T_WHITESPACE","\n            ",335],["T_VARIABLE","$ids",336],"[","]",["T_WHITESPACE","      ",336],"=",["T_WHITESPACE"," ",336],["T_VARIABLE","$id",336],";",["T_WHITESPACE"," ",336],["T_COMMENT","\/\/ Used to keep original order for terms with the same selectivity and omit terms comparison\n",336],["T_WHITESPACE","        ",337],"}",["T_WHITESPACE","\n        ",337],["T_STRING","array_multisort",338],"(",["T_VARIABLE","$docFreqs",338],",",["T_WHITESPACE"," ",338],["T_STRING","SORT_ASC",338],",",["T_WHITESPACE"," ",338],["T_STRING","SORT_NUMERIC",338],",",["T_WHITESPACE","\n                        ",338],["T_VARIABLE","$ids",339],",",["T_WHITESPACE","      ",339],["T_STRING","SORT_ASC",339],",",["T_WHITESPACE"," ",339],["T_STRING","SORT_NUMERIC",339],",",["T_WHITESPACE","\n                        ",339],["T_VARIABLE","$this",340],["T_OBJECT_OPERATOR","->",340],["T_STRING","_terms",340],")",";",["T_WHITESPACE","\n\n        ",340],["T_COMMENT","#require_once 'Zend\/Search\/Lucene\/Index\/DocsFilter.php';\n",342],["T_WHITESPACE","        ",343],["T_VARIABLE","$docsFilter",343],["T_WHITESPACE"," ",343],"=",["T_WHITESPACE"," ",343],["T_NEW","new",343],["T_WHITESPACE"," ",343],["T_STRING","Zend_Search_Lucene_Index_DocsFilter",343],"(",")",";",["T_WHITESPACE","\n        ",343],["T_FOREACH","foreach",344],["T_WHITESPACE"," ",344],"(",["T_VARIABLE","$this",344],["T_OBJECT_OPERATOR","->",344],["T_STRING","_terms",344],["T_WHITESPACE"," ",344],["T_AS","as",344],["T_WHITESPACE"," ",344],["T_VARIABLE","$termId",344],["T_WHITESPACE"," ",344],["T_DOUBLE_ARROW","=>",344],["T_WHITESPACE"," ",344],["T_VARIABLE","$term",344],")",["T_WHITESPACE"," ",344],"{",["T_WHITESPACE","\n            ",344],["T_VARIABLE","$termDocs",345],["T_WHITESPACE"," ",345],"=",["T_WHITESPACE"," ",345],["T_VARIABLE","$reader",345],["T_OBJECT_OPERATOR","->",345],["T_STRING","termDocs",345],"(",["T_VARIABLE","$term",345],",",["T_WHITESPACE"," ",345],["T_VARIABLE","$docsFilter",345],")",";",["T_WHITESPACE","\n        ",345],"}",["T_WHITESPACE","\n        ",346],["T_COMMENT","\/\/ Treat last retrieved docs vector as a result set\n",347],["T_WHITESPACE","        ",348],["T_COMMENT","\/\/ (filter collects data for other terms)\n",348],["T_WHITESPACE","        ",349],["T_VARIABLE","$this",349],["T_OBJECT_OPERATOR","->",349],["T_STRING","_resVector",349],["T_WHITESPACE"," ",349],"=",["T_WHITESPACE"," ",349],["T_STRING","array_flip",349],"(",["T_VARIABLE","$termDocs",349],")",";",["T_WHITESPACE","\n\n        ",349],["T_FOREACH","foreach",351],["T_WHITESPACE"," ",351],"(",["T_VARIABLE","$this",351],["T_OBJECT_OPERATOR","->",351],["T_STRING","_terms",351],["T_WHITESPACE"," ",351],["T_AS","as",351],["T_WHITESPACE"," ",351],["T_VARIABLE","$termId",351],["T_WHITESPACE"," ",351],["T_DOUBLE_ARROW","=>",351],["T_WHITESPACE"," ",351],["T_VARIABLE","$term",351],")",["T_WHITESPACE"," ",351],"{",["T_WHITESPACE","\n            ",351],["T_VARIABLE","$this",352],["T_OBJECT_OPERATOR","->",352],["T_STRING","_termsFreqs",352],"[",["T_VARIABLE","$termId",352],"]",["T_WHITESPACE"," ",352],"=",["T_WHITESPACE"," ",352],["T_VARIABLE","$reader",352],["T_OBJECT_OPERATOR","->",352],["T_STRING","termFreqs",352],"(",["T_VARIABLE","$term",352],",",["T_WHITESPACE"," ",352],["T_VARIABLE","$docsFilter",352],")",";",["T_WHITESPACE","\n        ",352],"}",["T_WHITESPACE","\n\n        ",353],["T_COMMENT","\/\/ ksort($this->_resVector, SORT_NUMERIC);\n",355],["T_WHITESPACE","        ",356],["T_COMMENT","\/\/ Docs are returned ordered. Used algorithms doesn't change elements order.\n",356],["T_WHITESPACE","    ",357],"}",["T_WHITESPACE","\n\n\n    ",357],["T_DOC_COMMENT","\/**\n     * Calculate result vector for non Conjunction query\n     * (like '+something -another')\n     *\n     * @param Zend_Search_Lucene_Interface $reader\n     *\/",360],["T_WHITESPACE","\n    ",365],["T_PRIVATE","private",366],["T_WHITESPACE"," ",366],["T_FUNCTION","function",366],["T_WHITESPACE"," ",366],["T_STRING","_calculateNonConjunctionResult",366],"(",["T_STRING","Zend_Search_Lucene_Interface",366],["T_WHITESPACE"," ",366],["T_VARIABLE","$reader",366],")",["T_WHITESPACE","\n    ",366],"{",["T_WHITESPACE","\n        ",367],["T_VARIABLE","$requiredVectors",368],["T_WHITESPACE","      ",368],"=",["T_WHITESPACE"," ",368],["T_ARRAY","array",368],"(",")",";",["T_WHITESPACE","\n        ",368],["T_VARIABLE","$requiredVectorsSizes",369],["T_WHITESPACE"," ",369],"=",["T_WHITESPACE"," ",369],["T_ARRAY","array",369],"(",")",";",["T_WHITESPACE","\n        ",369],["T_VARIABLE","$requiredVectorsIds",370],["T_WHITESPACE","   ",370],"=",["T_WHITESPACE"," ",370],["T_ARRAY","array",370],"(",")",";",["T_WHITESPACE"," ",370],["T_COMMENT","\/\/ is used to prevent arrays comparison\n",370],["T_WHITESPACE","\n        ",371],["T_VARIABLE","$optional",372],["T_WHITESPACE","   ",372],"=",["T_WHITESPACE"," ",372],["T_ARRAY","array",372],"(",")",";",["T_WHITESPACE","\n        ",372],["T_VARIABLE","$prohibited",373],["T_WHITESPACE"," ",373],"=",["T_WHITESPACE"," ",373],["T_ARRAY","array",373],"(",")",";",["T_WHITESPACE","\n\n        ",373],["T_FOREACH","foreach",375],["T_WHITESPACE"," ",375],"(",["T_VARIABLE","$this",375],["T_OBJECT_OPERATOR","->",375],["T_STRING","_terms",375],["T_WHITESPACE"," ",375],["T_AS","as",375],["T_WHITESPACE"," ",375],["T_VARIABLE","$termId",375],["T_WHITESPACE"," ",375],["T_DOUBLE_ARROW","=>",375],["T_WHITESPACE"," ",375],["T_VARIABLE","$term",375],")",["T_WHITESPACE"," ",375],"{",["T_WHITESPACE","\n            ",375],["T_VARIABLE","$termDocs",376],["T_WHITESPACE"," ",376],"=",["T_WHITESPACE"," ",376],["T_STRING","array_flip",376],"(",["T_VARIABLE","$reader",376],["T_OBJECT_OPERATOR","->",376],["T_STRING","termDocs",376],"(",["T_VARIABLE","$term",376],")",")",";",["T_WHITESPACE","\n\n            ",376],["T_IF","if",378],["T_WHITESPACE"," ",378],"(",["T_VARIABLE","$this",378],["T_OBJECT_OPERATOR","->",378],["T_STRING","_signs",378],"[",["T_VARIABLE","$termId",378],"]",["T_WHITESPACE"," ",378],["T_IS_IDENTICAL","===",378],["T_WHITESPACE"," ",378],["T_STRING","true",378],")",["T_WHITESPACE"," ",378],"{",["T_WHITESPACE","\n                ",378],["T_COMMENT","\/\/ required\n",379],["T_WHITESPACE","                ",380],["T_VARIABLE","$requiredVectors",380],"[","]",["T_WHITESPACE","      ",380],"=",["T_WHITESPACE"," ",380],["T_VARIABLE","$termDocs",380],";",["T_WHITESPACE","\n                ",380],["T_VARIABLE","$requiredVectorsSizes",381],"[","]",["T_WHITESPACE"," ",381],"=",["T_WHITESPACE"," ",381],["T_STRING","count",381],"(",["T_VARIABLE","$termDocs",381],")",";",["T_WHITESPACE","\n                ",381],["T_VARIABLE","$requiredVectorsIds",382],"[","]",["T_WHITESPACE","   ",382],"=",["T_WHITESPACE"," ",382],["T_VARIABLE","$termId",382],";",["T_WHITESPACE","\n            ",382],"}",["T_WHITESPACE"," ",383],["T_ELSEIF","elseif",383],["T_WHITESPACE"," ",383],"(",["T_VARIABLE","$this",383],["T_OBJECT_OPERATOR","->",383],["T_STRING","_signs",383],"[",["T_VARIABLE","$termId",383],"]",["T_WHITESPACE"," ",383],["T_IS_IDENTICAL","===",383],["T_WHITESPACE"," ",383],["T_STRING","false",383],")",["T_WHITESPACE"," ",383],"{",["T_WHITESPACE","\n                ",383],["T_COMMENT","\/\/ prohibited\n",384],["T_WHITESPACE","                ",385],["T_COMMENT","\/\/ array union\n",385],["T_WHITESPACE","                ",386],["T_VARIABLE","$prohibited",386],["T_WHITESPACE"," ",386],["T_PLUS_EQUAL","+=",386],["T_WHITESPACE"," ",386],["T_VARIABLE","$termDocs",386],";",["T_WHITESPACE","\n            ",386],"}",["T_WHITESPACE"," ",387],["T_ELSE","else",387],["T_WHITESPACE"," ",387],"{",["T_WHITESPACE","\n                ",387],["T_COMMENT","\/\/ neither required, nor prohibited\n",388],["T_WHITESPACE","                ",389],["T_COMMENT","\/\/ array union\n",389],["T_WHITESPACE","                ",390],["T_VARIABLE","$optional",390],["T_WHITESPACE"," ",390],["T_PLUS_EQUAL","+=",390],["T_WHITESPACE"," ",390],["T_VARIABLE","$termDocs",390],";",["T_WHITESPACE","\n            ",390],"}",["T_WHITESPACE","\n\n            ",391],["T_VARIABLE","$this",393],["T_OBJECT_OPERATOR","->",393],["T_STRING","_termsFreqs",393],"[",["T_VARIABLE","$termId",393],"]",["T_WHITESPACE"," ",393],"=",["T_WHITESPACE"," ",393],["T_VARIABLE","$reader",393],["T_OBJECT_OPERATOR","->",393],["T_STRING","termFreqs",393],"(",["T_VARIABLE","$term",393],")",";",["T_WHITESPACE","\n        ",393],"}",["T_WHITESPACE","\n\n        ",394],["T_COMMENT","\/\/ sort resvectors in order of subquery cardinality increasing\n",396],["T_WHITESPACE","        ",397],["T_STRING","array_multisort",397],"(",["T_VARIABLE","$requiredVectorsSizes",397],",",["T_WHITESPACE"," ",397],["T_STRING","SORT_ASC",397],",",["T_WHITESPACE"," ",397],["T_STRING","SORT_NUMERIC",397],",",["T_WHITESPACE","\n                        ",397],["T_VARIABLE","$requiredVectorsIds",398],",",["T_WHITESPACE","   ",398],["T_STRING","SORT_ASC",398],",",["T_WHITESPACE"," ",398],["T_STRING","SORT_NUMERIC",398],",",["T_WHITESPACE","\n                        ",398],["T_VARIABLE","$requiredVectors",399],")",";",["T_WHITESPACE","\n\n        ",399],["T_VARIABLE","$required",401],["T_WHITESPACE"," ",401],"=",["T_WHITESPACE"," ",401],["T_STRING","null",401],";",["T_WHITESPACE","\n        ",401],["T_FOREACH","foreach",402],["T_WHITESPACE"," ",402],"(",["T_VARIABLE","$requiredVectors",402],["T_WHITESPACE"," ",402],["T_AS","as",402],["T_WHITESPACE"," ",402],["T_VARIABLE","$nextResVector",402],")",["T_WHITESPACE"," ",402],"{",["T_WHITESPACE","\n            ",402],["T_IF","if",403],"(",["T_VARIABLE","$required",403],["T_WHITESPACE"," ",403],["T_IS_IDENTICAL","===",403],["T_WHITESPACE"," ",403],["T_STRING","null",403],")",["T_WHITESPACE"," ",403],"{",["T_WHITESPACE","\n                ",403],["T_VARIABLE","$required",404],["T_WHITESPACE"," ",404],"=",["T_WHITESPACE"," ",404],["T_VARIABLE","$nextResVector",404],";",["T_WHITESPACE","\n            ",404],"}",["T_WHITESPACE"," ",405],["T_ELSE","else",405],["T_WHITESPACE"," ",405],"{",["T_WHITESPACE","\n                ",405],["T_COMMENT","\/\/$required = array_intersect_key($required, $nextResVector);\n",406],["T_WHITESPACE","\n                ",407],["T_DOC_COMMENT","\/**\n                 * This code is used as workaround for array_intersect_key() slowness problem.\n                 *\/",408],["T_WHITESPACE","\n                ",410],["T_VARIABLE","$updatedVector",411],["T_WHITESPACE"," ",411],"=",["T_WHITESPACE"," ",411],["T_ARRAY","array",411],"(",")",";",["T_WHITESPACE","\n                ",411],["T_FOREACH","foreach",412],["T_WHITESPACE"," ",412],"(",["T_VARIABLE","$required",412],["T_WHITESPACE"," ",412],["T_AS","as",412],["T_WHITESPACE"," ",412],["T_VARIABLE","$id",412],["T_WHITESPACE"," ",412],["T_DOUBLE_ARROW","=>",412],["T_WHITESPACE"," ",412],["T_VARIABLE","$value",412],")",["T_WHITESPACE"," ",412],"{",["T_WHITESPACE","\n                    ",412],["T_IF","if",413],["T_WHITESPACE"," ",413],"(",["T_ISSET","isset",413],"(",["T_VARIABLE","$nextResVector",413],"[",["T_VARIABLE","$id",413],"]",")",")",["T_WHITESPACE"," ",413],"{",["T_WHITESPACE","\n                        ",413],["T_VARIABLE","$updatedVector",414],"[",["T_VARIABLE","$id",414],"]",["T_WHITESPACE"," ",414],"=",["T_WHITESPACE"," ",414],["T_VARIABLE","$value",414],";",["T_WHITESPACE","\n                    ",414],"}",["T_WHITESPACE","\n                ",415],"}",["T_WHITESPACE","\n                ",416],["T_VARIABLE","$required",417],["T_WHITESPACE"," ",417],"=",["T_WHITESPACE"," ",417],["T_VARIABLE","$updatedVector",417],";",["T_WHITESPACE","\n            ",417],"}",["T_WHITESPACE","\n\n            ",418],["T_IF","if",420],["T_WHITESPACE"," ",420],"(",["T_STRING","count",420],"(",["T_VARIABLE","$required",420],")",["T_WHITESPACE"," ",420],["T_IS_EQUAL","==",420],["T_WHITESPACE"," ",420],["T_LNUMBER","0",420],")",["T_WHITESPACE"," ",420],"{",["T_WHITESPACE","\n                ",420],["T_COMMENT","\/\/ Empty result set, we don't need to check other terms\n",421],["T_WHITESPACE","                ",422],["T_BREAK","break",422],";",["T_WHITESPACE","\n            ",422],"}",["T_WHITESPACE","\n        ",423],"}",["T_WHITESPACE","\n\n        ",424],["T_IF","if",426],["T_WHITESPACE"," ",426],"(",["T_VARIABLE","$required",426],["T_WHITESPACE"," ",426],["T_IS_NOT_IDENTICAL","!==",426],["T_WHITESPACE"," ",426],["T_STRING","null",426],")",["T_WHITESPACE"," ",426],"{",["T_WHITESPACE","\n            ",426],["T_VARIABLE","$this",427],["T_OBJECT_OPERATOR","->",427],["T_STRING","_resVector",427],["T_WHITESPACE"," ",427],"=",["T_WHITESPACE"," ",427],["T_VARIABLE","$required",427],";",["T_WHITESPACE","\n        ",427],"}",["T_WHITESPACE"," ",428],["T_ELSE","else",428],["T_WHITESPACE"," ",428],"{",["T_WHITESPACE","\n            ",428],["T_VARIABLE","$this",429],["T_OBJECT_OPERATOR","->",429],["T_STRING","_resVector",429],["T_WHITESPACE"," ",429],"=",["T_WHITESPACE"," ",429],["T_VARIABLE","$optional",429],";",["T_WHITESPACE","\n        ",429],"}",["T_WHITESPACE","\n\n        ",430],["T_IF","if",432],["T_WHITESPACE"," ",432],"(",["T_STRING","count",432],"(",["T_VARIABLE","$prohibited",432],")",["T_WHITESPACE"," ",432],["T_IS_NOT_EQUAL","!=",432],["T_WHITESPACE"," ",432],["T_LNUMBER","0",432],")",["T_WHITESPACE"," ",432],"{",["T_WHITESPACE","\n            ",432],["T_COMMENT","\/\/ $this->_resVector = array_diff_key($this->_resVector, $prohibited);\n",433],["T_WHITESPACE","\n            ",434],["T_DOC_COMMENT","\/**\n             * This code is used as workaround for array_diff_key() slowness problem.\n             *\/",435],["T_WHITESPACE","\n            ",437],["T_IF","if",438],["T_WHITESPACE"," ",438],"(",["T_STRING","count",438],"(",["T_VARIABLE","$this",438],["T_OBJECT_OPERATOR","->",438],["T_STRING","_resVector",438],")",["T_WHITESPACE"," ",438],"<",["T_WHITESPACE"," ",438],["T_STRING","count",438],"(",["T_VARIABLE","$prohibited",438],")",")",["T_WHITESPACE"," ",438],"{",["T_WHITESPACE","\n                ",438],["T_VARIABLE","$updatedVector",439],["T_WHITESPACE"," ",439],"=",["T_WHITESPACE"," ",439],["T_VARIABLE","$this",439],["T_OBJECT_OPERATOR","->",439],["T_STRING","_resVector",439],";",["T_WHITESPACE","\n                ",439],["T_FOREACH","foreach",440],["T_WHITESPACE"," ",440],"(",["T_VARIABLE","$this",440],["T_OBJECT_OPERATOR","->",440],["T_STRING","_resVector",440],["T_WHITESPACE"," ",440],["T_AS","as",440],["T_WHITESPACE"," ",440],["T_VARIABLE","$id",440],["T_WHITESPACE"," ",440],["T_DOUBLE_ARROW","=>",440],["T_WHITESPACE"," ",440],["T_VARIABLE","$value",440],")",["T_WHITESPACE"," ",440],"{",["T_WHITESPACE","\n                    ",440],["T_IF","if",441],["T_WHITESPACE"," ",441],"(",["T_ISSET","isset",441],"(",["T_VARIABLE","$prohibited",441],"[",["T_VARIABLE","$id",441],"]",")",")",["T_WHITESPACE"," ",441],"{",["T_WHITESPACE","\n                        ",441],["T_UNSET","unset",442],"(",["T_VARIABLE","$updatedVector",442],"[",["T_VARIABLE","$id",442],"]",")",";",["T_WHITESPACE","\n                    ",442],"}",["T_WHITESPACE","\n                ",443],"}",["T_WHITESPACE","\n                ",444],["T_VARIABLE","$this",445],["T_OBJECT_OPERATOR","->",445],["T_STRING","_resVector",445],["T_WHITESPACE"," ",445],"=",["T_WHITESPACE"," ",445],["T_VARIABLE","$updatedVector",445],";",["T_WHITESPACE","\n            ",445],"}",["T_WHITESPACE"," ",446],["T_ELSE","else",446],["T_WHITESPACE"," ",446],"{",["T_WHITESPACE","\n                ",446],["T_VARIABLE","$updatedVector",447],["T_WHITESPACE"," ",447],"=",["T_WHITESPACE"," ",447],["T_VARIABLE","$this",447],["T_OBJECT_OPERATOR","->",447],["T_STRING","_resVector",447],";",["T_WHITESPACE","\n                ",447],["T_FOREACH","foreach",448],["T_WHITESPACE"," ",448],"(",["T_VARIABLE","$prohibited",448],["T_WHITESPACE"," ",448],["T_AS","as",448],["T_WHITESPACE"," ",448],["T_VARIABLE","$id",448],["T_WHITESPACE"," ",448],["T_DOUBLE_ARROW","=>",448],["T_WHITESPACE"," ",448],["T_VARIABLE","$value",448],")",["T_WHITESPACE"," ",448],"{",["T_WHITESPACE","\n                    ",448],["T_UNSET","unset",449],"(",["T_VARIABLE","$updatedVector",449],"[",["T_VARIABLE","$id",449],"]",")",";",["T_WHITESPACE","\n                ",449],"}",["T_WHITESPACE","\n                ",450],["T_VARIABLE","$this",451],["T_OBJECT_OPERATOR","->",451],["T_STRING","_resVector",451],["T_WHITESPACE"," ",451],"=",["T_WHITESPACE"," ",451],["T_VARIABLE","$updatedVector",451],";",["T_WHITESPACE","\n            ",451],"}",["T_WHITESPACE","\n        ",452],"}",["T_WHITESPACE","\n\n        ",453],["T_STRING","ksort",455],"(",["T_VARIABLE","$this",455],["T_OBJECT_OPERATOR","->",455],["T_STRING","_resVector",455],",",["T_WHITESPACE"," ",455],["T_STRING","SORT_NUMERIC",455],")",";",["T_WHITESPACE","\n    ",455],"}",["T_WHITESPACE","\n\n\n    ",456],["T_DOC_COMMENT","\/**\n     * Score calculator for conjunction queries (all terms are required)\n     *\n     * @param integer $docId\n     * @param Zend_Search_Lucene_Interface $reader\n     * @return float\n     *\/",459],["T_WHITESPACE","\n    ",465],["T_PUBLIC","public",466],["T_WHITESPACE"," ",466],["T_FUNCTION","function",466],["T_WHITESPACE"," ",466],["T_STRING","_conjunctionScore",466],"(",["T_VARIABLE","$docId",466],",",["T_WHITESPACE"," ",466],["T_STRING","Zend_Search_Lucene_Interface",466],["T_WHITESPACE"," ",466],["T_VARIABLE","$reader",466],")",["T_WHITESPACE","\n    ",466],"{",["T_WHITESPACE","\n        ",467],["T_IF","if",468],["T_WHITESPACE"," ",468],"(",["T_VARIABLE","$this",468],["T_OBJECT_OPERATOR","->",468],["T_STRING","_coord",468],["T_WHITESPACE"," ",468],["T_IS_IDENTICAL","===",468],["T_WHITESPACE"," ",468],["T_STRING","null",468],")",["T_WHITESPACE"," ",468],"{",["T_WHITESPACE","\n            ",468],["T_VARIABLE","$this",469],["T_OBJECT_OPERATOR","->",469],["T_STRING","_coord",469],["T_WHITESPACE"," ",469],"=",["T_WHITESPACE"," ",469],["T_VARIABLE","$reader",469],["T_OBJECT_OPERATOR","->",469],["T_STRING","getSimilarity",469],"(",")",["T_OBJECT_OPERATOR","->",469],["T_STRING","coord",469],"(",["T_STRING","count",469],"(",["T_VARIABLE","$this",469],["T_OBJECT_OPERATOR","->",469],["T_STRING","_terms",469],")",",",["T_WHITESPACE","\n                                                            ",469],["T_STRING","count",470],"(",["T_VARIABLE","$this",470],["T_OBJECT_OPERATOR","->",470],["T_STRING","_terms",470],")",["T_WHITESPACE"," ",470],")",";",["T_WHITESPACE","\n        ",470],"}",["T_WHITESPACE","\n\n        ",471],["T_VARIABLE","$score",473],["T_WHITESPACE"," ",473],"=",["T_WHITESPACE"," ",473],["T_DNUMBER","0.0",473],";",["T_WHITESPACE","\n\n        ",473],["T_FOREACH","foreach",475],["T_WHITESPACE"," ",475],"(",["T_VARIABLE","$this",475],["T_OBJECT_OPERATOR","->",475],["T_STRING","_terms",475],["T_WHITESPACE"," ",475],["T_AS","as",475],["T_WHITESPACE"," ",475],["T_VARIABLE","$termId",475],["T_WHITESPACE"," ",475],["T_DOUBLE_ARROW","=>",475],["T_WHITESPACE"," ",475],["T_VARIABLE","$term",475],")",["T_WHITESPACE"," ",475],"{",["T_WHITESPACE","\n            ",475],["T_DOC_COMMENT","\/**\n             * We don't need to check that term freq is not 0\n             * Score calculation is performed only for matched docs\n             *\/",476],["T_WHITESPACE","\n            ",479],["T_VARIABLE","$score",480],["T_WHITESPACE"," ",480],["T_PLUS_EQUAL","+=",480],["T_WHITESPACE"," ",480],["T_VARIABLE","$reader",480],["T_OBJECT_OPERATOR","->",480],["T_STRING","getSimilarity",480],"(",")",["T_OBJECT_OPERATOR","->",480],["T_STRING","tf",480],"(",["T_VARIABLE","$this",480],["T_OBJECT_OPERATOR","->",480],["T_STRING","_termsFreqs",480],"[",["T_VARIABLE","$termId",480],"]","[",["T_VARIABLE","$docId",480],"]",")",["T_WHITESPACE"," ",480],"*",["T_WHITESPACE","\n                      ",480],["T_VARIABLE","$this",481],["T_OBJECT_OPERATOR","->",481],["T_STRING","_weights",481],"[",["T_VARIABLE","$termId",481],"]",["T_OBJECT_OPERATOR","->",481],["T_STRING","getValue",481],"(",")",["T_WHITESPACE"," ",481],"*",["T_WHITESPACE","\n                      ",481],["T_VARIABLE","$reader",482],["T_OBJECT_OPERATOR","->",482],["T_STRING","norm",482],"(",["T_VARIABLE","$docId",482],",",["T_WHITESPACE"," ",482],["T_VARIABLE","$term",482],["T_OBJECT_OPERATOR","->",482],["T_STRING","field",482],")",";",["T_WHITESPACE","\n        ",482],"}",["T_WHITESPACE","\n\n        ",483],["T_RETURN","return",485],["T_WHITESPACE"," ",485],["T_VARIABLE","$score",485],["T_WHITESPACE"," ",485],"*",["T_WHITESPACE"," ",485],["T_VARIABLE","$this",485],["T_OBJECT_OPERATOR","->",485],["T_STRING","_coord",485],["T_WHITESPACE"," ",485],"*",["T_WHITESPACE"," ",485],["T_VARIABLE","$this",485],["T_OBJECT_OPERATOR","->",485],["T_STRING","getBoost",485],"(",")",";",["T_WHITESPACE","\n    ",485],"}",["T_WHITESPACE","\n\n\n    ",486],["T_DOC_COMMENT","\/**\n     * Score calculator for non conjunction queries (not all terms are required)\n     *\n     * @param integer $docId\n     * @param Zend_Search_Lucene_Interface $reader\n     * @return float\n     *\/",489],["T_WHITESPACE","\n    ",495],["T_PUBLIC","public",496],["T_WHITESPACE"," ",496],["T_FUNCTION","function",496],["T_WHITESPACE"," ",496],["T_STRING","_nonConjunctionScore",496],"(",["T_VARIABLE","$docId",496],",",["T_WHITESPACE"," ",496],["T_VARIABLE","$reader",496],")",["T_WHITESPACE","\n    ",496],"{",["T_WHITESPACE","\n        ",497],["T_IF","if",498],["T_WHITESPACE"," ",498],"(",["T_VARIABLE","$this",498],["T_OBJECT_OPERATOR","->",498],["T_STRING","_coord",498],["T_WHITESPACE"," ",498],["T_IS_IDENTICAL","===",498],["T_WHITESPACE"," ",498],["T_STRING","null",498],")",["T_WHITESPACE"," ",498],"{",["T_WHITESPACE","\n            ",498],["T_VARIABLE","$this",499],["T_OBJECT_OPERATOR","->",499],["T_STRING","_coord",499],["T_WHITESPACE"," ",499],"=",["T_WHITESPACE"," ",499],["T_ARRAY","array",499],"(",")",";",["T_WHITESPACE","\n\n            ",499],["T_VARIABLE","$maxCoord",501],["T_WHITESPACE"," ",501],"=",["T_WHITESPACE"," ",501],["T_LNUMBER","0",501],";",["T_WHITESPACE","\n            ",501],["T_FOREACH","foreach",502],["T_WHITESPACE"," ",502],"(",["T_VARIABLE","$this",502],["T_OBJECT_OPERATOR","->",502],["T_STRING","_signs",502],["T_WHITESPACE"," ",502],["T_AS","as",502],["T_WHITESPACE"," ",502],["T_VARIABLE","$sign",502],")",["T_WHITESPACE"," ",502],"{",["T_WHITESPACE","\n                ",502],["T_IF","if",503],["T_WHITESPACE"," ",503],"(",["T_VARIABLE","$sign",503],["T_WHITESPACE"," ",503],["T_IS_NOT_IDENTICAL","!==",503],["T_WHITESPACE"," ",503],["T_STRING","false",503],["T_WHITESPACE"," ",503],["T_COMMENT","\/* not prohibited *\/",503],")",["T_WHITESPACE"," ",503],"{",["T_WHITESPACE","\n                    ",503],["T_VARIABLE","$maxCoord",504],["T_INC","++",504],";",["T_WHITESPACE","\n                ",504],"}",["T_WHITESPACE","\n            ",505],"}",["T_WHITESPACE","\n\n            ",506],["T_FOR","for",508],["T_WHITESPACE"," ",508],"(",["T_VARIABLE","$count",508],["T_WHITESPACE"," ",508],"=",["T_WHITESPACE"," ",508],["T_LNUMBER","0",508],";",["T_WHITESPACE"," ",508],["T_VARIABLE","$count",508],["T_WHITESPACE"," ",508],["T_IS_SMALLER_OR_EQUAL","<=",508],["T_WHITESPACE"," ",508],["T_VARIABLE","$maxCoord",508],";",["T_WHITESPACE"," ",508],["T_VARIABLE","$count",508],["T_INC","++",508],")",["T_WHITESPACE"," ",508],"{",["T_WHITESPACE","\n                ",508],["T_VARIABLE","$this",509],["T_OBJECT_OPERATOR","->",509],["T_STRING","_coord",509],"[",["T_VARIABLE","$count",509],"]",["T_WHITESPACE"," ",509],"=",["T_WHITESPACE"," ",509],["T_VARIABLE","$reader",509],["T_OBJECT_OPERATOR","->",509],["T_STRING","getSimilarity",509],"(",")",["T_OBJECT_OPERATOR","->",509],["T_STRING","coord",509],"(",["T_VARIABLE","$count",509],",",["T_WHITESPACE"," ",509],["T_VARIABLE","$maxCoord",509],")",";",["T_WHITESPACE","\n            ",509],"}",["T_WHITESPACE","\n        ",510],"}",["T_WHITESPACE","\n\n        ",511],["T_VARIABLE","$score",513],["T_WHITESPACE"," ",513],"=",["T_WHITESPACE"," ",513],["T_DNUMBER","0.0",513],";",["T_WHITESPACE","\n        ",513],["T_VARIABLE","$matchedTerms",514],["T_WHITESPACE"," ",514],"=",["T_WHITESPACE"," ",514],["T_LNUMBER","0",514],";",["T_WHITESPACE","\n        ",514],["T_FOREACH","foreach",515],["T_WHITESPACE"," ",515],"(",["T_VARIABLE","$this",515],["T_OBJECT_OPERATOR","->",515],["T_STRING","_terms",515],["T_WHITESPACE"," ",515],["T_AS","as",515],["T_WHITESPACE"," ",515],["T_VARIABLE","$termId",515],["T_DOUBLE_ARROW","=>",515],["T_VARIABLE","$term",515],")",["T_WHITESPACE"," ",515],"{",["T_WHITESPACE","\n            ",515],["T_COMMENT","\/\/ Check if term is\n",516],["T_WHITESPACE","            ",517],["T_IF","if",517],["T_WHITESPACE"," ",517],"(",["T_VARIABLE","$this",517],["T_OBJECT_OPERATOR","->",517],["T_STRING","_signs",517],"[",["T_VARIABLE","$termId",517],"]",["T_WHITESPACE"," ",517],["T_IS_NOT_IDENTICAL","!==",517],["T_WHITESPACE"," ",517],["T_STRING","false",517],["T_WHITESPACE"," ",517],["T_BOOLEAN_AND","&&",517],["T_WHITESPACE","        ",517],["T_COMMENT","\/\/ not prohibited\n",517],["T_WHITESPACE","                ",518],["T_ISSET","isset",518],"(",["T_VARIABLE","$this",518],["T_OBJECT_OPERATOR","->",518],["T_STRING","_termsFreqs",518],"[",["T_VARIABLE","$termId",518],"]","[",["T_VARIABLE","$docId",518],"]",")",["T_WHITESPACE"," ",518],["T_COMMENT","\/\/ matched\n",518],["T_WHITESPACE","               ",519],")",["T_WHITESPACE"," ",519],"{",["T_WHITESPACE","\n                ",519],["T_VARIABLE","$matchedTerms",520],["T_INC","++",520],";",["T_WHITESPACE","\n\n                ",520],["T_DOC_COMMENT","\/**\n                 * We don't need to check that term freq is not 0\n                 * Score calculation is performed only for matched docs\n                 *\/",522],["T_WHITESPACE","\n                ",525],["T_VARIABLE","$score",526],["T_WHITESPACE"," ",526],["T_PLUS_EQUAL","+=",526],["T_WHITESPACE","\n                      ",526],["T_VARIABLE","$reader",527],["T_OBJECT_OPERATOR","->",527],["T_STRING","getSimilarity",527],"(",")",["T_OBJECT_OPERATOR","->",527],["T_STRING","tf",527],"(",["T_VARIABLE","$this",527],["T_OBJECT_OPERATOR","->",527],["T_STRING","_termsFreqs",527],"[",["T_VARIABLE","$termId",527],"]","[",["T_VARIABLE","$docId",527],"]",")",["T_WHITESPACE"," ",527],"*",["T_WHITESPACE","\n                      ",527],["T_VARIABLE","$this",528],["T_OBJECT_OPERATOR","->",528],["T_STRING","_weights",528],"[",["T_VARIABLE","$termId",528],"]",["T_OBJECT_OPERATOR","->",528],["T_STRING","getValue",528],"(",")",["T_WHITESPACE"," ",528],"*",["T_WHITESPACE","\n                      ",528],["T_VARIABLE","$reader",529],["T_OBJECT_OPERATOR","->",529],["T_STRING","norm",529],"(",["T_VARIABLE","$docId",529],",",["T_WHITESPACE"," ",529],["T_VARIABLE","$term",529],["T_OBJECT_OPERATOR","->",529],["T_STRING","field",529],")",";",["T_WHITESPACE","\n            ",529],"}",["T_WHITESPACE","\n        ",530],"}",["T_WHITESPACE","\n\n        ",531],["T_RETURN","return",533],["T_WHITESPACE"," ",533],["T_VARIABLE","$score",533],["T_WHITESPACE"," ",533],"*",["T_WHITESPACE"," ",533],["T_VARIABLE","$this",533],["T_OBJECT_OPERATOR","->",533],["T_STRING","_coord",533],"[",["T_VARIABLE","$matchedTerms",533],"]",["T_WHITESPACE"," ",533],"*",["T_WHITESPACE"," ",533],["T_VARIABLE","$this",533],["T_OBJECT_OPERATOR","->",533],["T_STRING","getBoost",533],"(",")",";",["T_WHITESPACE","\n    ",533],"}",["T_WHITESPACE","\n\n    ",534],["T_DOC_COMMENT","\/**\n     * Execute query in context of index reader\n     * It also initializes necessary internal structures\n     *\n     * @param Zend_Search_Lucene_Interface $reader\n     * @param Zend_Search_Lucene_Index_DocsFilter|null $docsFilter\n     *\/",536],["T_WHITESPACE","\n    ",542],["T_PUBLIC","public",543],["T_WHITESPACE"," ",543],["T_FUNCTION","function",543],["T_WHITESPACE"," ",543],["T_STRING","execute",543],"(",["T_STRING","Zend_Search_Lucene_Interface",543],["T_WHITESPACE"," ",543],["T_VARIABLE","$reader",543],",",["T_WHITESPACE"," ",543],["T_VARIABLE","$docsFilter",543],["T_WHITESPACE"," ",543],"=",["T_WHITESPACE"," ",543],["T_STRING","null",543],")",["T_WHITESPACE","\n    ",543],"{",["T_WHITESPACE","\n        ",544],["T_IF","if",545],["T_WHITESPACE"," ",545],"(",["T_VARIABLE","$this",545],["T_OBJECT_OPERATOR","->",545],["T_STRING","_signs",545],["T_WHITESPACE"," ",545],["T_IS_IDENTICAL","===",545],["T_WHITESPACE"," ",545],["T_STRING","null",545],")",["T_WHITESPACE"," ",545],"{",["T_WHITESPACE","\n            ",545],["T_VARIABLE","$this",546],["T_OBJECT_OPERATOR","->",546],["T_STRING","_calculateConjunctionResult",546],"(",["T_VARIABLE","$reader",546],")",";",["T_WHITESPACE","\n        ",546],"}",["T_WHITESPACE"," ",547],["T_ELSE","else",547],["T_WHITESPACE"," ",547],"{",["T_WHITESPACE","\n            ",547],["T_VARIABLE","$this",548],["T_OBJECT_OPERATOR","->",548],["T_STRING","_calculateNonConjunctionResult",548],"(",["T_VARIABLE","$reader",548],")",";",["T_WHITESPACE","\n        ",548],"}",["T_WHITESPACE","\n\n        ",549],["T_COMMENT","\/\/ Initialize weight if it's not done yet\n",551],["T_WHITESPACE","        ",552],["T_VARIABLE","$this",552],["T_OBJECT_OPERATOR","->",552],["T_STRING","_initWeight",552],"(",["T_VARIABLE","$reader",552],")",";",["T_WHITESPACE","\n    ",552],"}",["T_WHITESPACE","\n\n    ",553],["T_DOC_COMMENT","\/**\n     * Get document ids likely matching the query\n     *\n     * It's an array with document ids as keys (performance considerations)\n     *\n     * @return array\n     *\/",555],["T_WHITESPACE","\n    ",561],["T_PUBLIC","public",562],["T_WHITESPACE"," ",562],["T_FUNCTION","function",562],["T_WHITESPACE"," ",562],["T_STRING","matchedDocs",562],"(",")",["T_WHITESPACE","\n    ",562],"{",["T_WHITESPACE","\n        ",563],["T_RETURN","return",564],["T_WHITESPACE"," ",564],["T_VARIABLE","$this",564],["T_OBJECT_OPERATOR","->",564],["T_STRING","_resVector",564],";",["T_WHITESPACE","\n    ",564],"}",["T_WHITESPACE","\n\n    ",565],["T_DOC_COMMENT","\/**\n     * Score specified document\n     *\n     * @param integer $docId\n     * @param Zend_Search_Lucene_Interface $reader\n     * @return float\n     *\/",567],["T_WHITESPACE","\n    ",573],["T_PUBLIC","public",574],["T_WHITESPACE"," ",574],["T_FUNCTION","function",574],["T_WHITESPACE"," ",574],["T_STRING","score",574],"(",["T_VARIABLE","$docId",574],",",["T_WHITESPACE"," ",574],["T_STRING","Zend_Search_Lucene_Interface",574],["T_WHITESPACE"," ",574],["T_VARIABLE","$reader",574],")",["T_WHITESPACE","\n    ",574],"{",["T_WHITESPACE","\n        ",575],["T_IF","if",576],["T_WHITESPACE"," ",576],"(",["T_ISSET","isset",576],"(",["T_VARIABLE","$this",576],["T_OBJECT_OPERATOR","->",576],["T_STRING","_resVector",576],"[",["T_VARIABLE","$docId",576],"]",")",")",["T_WHITESPACE"," ",576],"{",["T_WHITESPACE","\n            ",576],["T_IF","if",577],["T_WHITESPACE"," ",577],"(",["T_VARIABLE","$this",577],["T_OBJECT_OPERATOR","->",577],["T_STRING","_signs",577],["T_WHITESPACE"," ",577],["T_IS_IDENTICAL","===",577],["T_WHITESPACE"," ",577],["T_STRING","null",577],")",["T_WHITESPACE"," ",577],"{",["T_WHITESPACE","\n                ",577],["T_RETURN","return",578],["T_WHITESPACE"," ",578],["T_VARIABLE","$this",578],["T_OBJECT_OPERATOR","->",578],["T_STRING","_conjunctionScore",578],"(",["T_VARIABLE","$docId",578],",",["T_WHITESPACE"," ",578],["T_VARIABLE","$reader",578],")",";",["T_WHITESPACE","\n            ",578],"}",["T_WHITESPACE"," ",579],["T_ELSE","else",579],["T_WHITESPACE"," ",579],"{",["T_WHITESPACE","\n                ",579],["T_RETURN","return",580],["T_WHITESPACE"," ",580],["T_VARIABLE","$this",580],["T_OBJECT_OPERATOR","->",580],["T_STRING","_nonConjunctionScore",580],"(",["T_VARIABLE","$docId",580],",",["T_WHITESPACE"," ",580],["T_VARIABLE","$reader",580],")",";",["T_WHITESPACE","\n            ",580],"}",["T_WHITESPACE","\n        ",581],"}",["T_WHITESPACE"," ",582],["T_ELSE","else",582],["T_WHITESPACE"," ",582],"{",["T_WHITESPACE","\n            ",582],["T_RETURN","return",583],["T_WHITESPACE"," ",583],["T_LNUMBER","0",583],";",["T_WHITESPACE","\n        ",583],"}",["T_WHITESPACE","\n    ",584],"}",["T_WHITESPACE","\n\n    ",585],["T_DOC_COMMENT","\/**\n     * Return query terms\n     *\n     * @return array\n     *\/",587],["T_WHITESPACE","\n    ",591],["T_PUBLIC","public",592],["T_WHITESPACE"," ",592],["T_FUNCTION","function",592],["T_WHITESPACE"," ",592],["T_STRING","getQueryTerms",592],"(",")",["T_WHITESPACE","\n    ",592],"{",["T_WHITESPACE","\n        ",593],["T_IF","if",594],["T_WHITESPACE"," ",594],"(",["T_VARIABLE","$this",594],["T_OBJECT_OPERATOR","->",594],["T_STRING","_signs",594],["T_WHITESPACE"," ",594],["T_IS_IDENTICAL","===",594],["T_WHITESPACE"," ",594],["T_STRING","null",594],")",["T_WHITESPACE"," ",594],"{",["T_WHITESPACE","\n            ",594],["T_RETURN","return",595],["T_WHITESPACE"," ",595],["T_VARIABLE","$this",595],["T_OBJECT_OPERATOR","->",595],["T_STRING","_terms",595],";",["T_WHITESPACE","\n        ",595],"}",["T_WHITESPACE","\n\n        ",596],["T_VARIABLE","$terms",598],["T_WHITESPACE"," ",598],"=",["T_WHITESPACE"," ",598],["T_ARRAY","array",598],"(",")",";",["T_WHITESPACE","\n\n        ",598],["T_FOREACH","foreach",600],["T_WHITESPACE"," ",600],"(",["T_VARIABLE","$this",600],["T_OBJECT_OPERATOR","->",600],["T_STRING","_signs",600],["T_WHITESPACE"," ",600],["T_AS","as",600],["T_WHITESPACE"," ",600],["T_VARIABLE","$id",600],["T_WHITESPACE"," ",600],["T_DOUBLE_ARROW","=>",600],["T_WHITESPACE"," ",600],["T_VARIABLE","$sign",600],")",["T_WHITESPACE"," ",600],"{",["T_WHITESPACE","\n            ",600],["T_IF","if",601],["T_WHITESPACE"," ",601],"(",["T_VARIABLE","$sign",601],["T_WHITESPACE"," ",601],["T_IS_NOT_IDENTICAL","!==",601],["T_WHITESPACE"," ",601],["T_STRING","false",601],")",["T_WHITESPACE"," ",601],"{",["T_WHITESPACE","\n                ",601],["T_VARIABLE","$terms",602],"[","]",["T_WHITESPACE"," ",602],"=",["T_WHITESPACE"," ",602],["T_VARIABLE","$this",602],["T_OBJECT_OPERATOR","->",602],["T_STRING","_terms",602],"[",["T_VARIABLE","$id",602],"]",";",["T_WHITESPACE","\n            ",602],"}",["T_WHITESPACE","\n        ",603],"}",["T_WHITESPACE","\n\n        ",604],["T_RETURN","return",606],["T_WHITESPACE"," ",606],["T_VARIABLE","$terms",606],";",["T_WHITESPACE","\n    ",606],"}",["T_WHITESPACE","\n\n    ",607],["T_DOC_COMMENT","\/**\n     * Query specific matches highlighting\n     *\n     * @param Zend_Search_Lucene_Search_Highlighter_Interface $highlighter  Highlighter object (also contains doc for highlighting)\n     *\/",609],["T_WHITESPACE","\n    ",613],["T_PROTECTED","protected",614],["T_WHITESPACE"," ",614],["T_FUNCTION","function",614],["T_WHITESPACE"," ",614],["T_STRING","_highlightMatches",614],"(",["T_STRING","Zend_Search_Lucene_Search_Highlighter_Interface",614],["T_WHITESPACE"," ",614],["T_VARIABLE","$highlighter",614],")",["T_WHITESPACE","\n    ",614],"{",["T_WHITESPACE","\n        ",615],["T_VARIABLE","$words",616],["T_WHITESPACE"," ",616],"=",["T_WHITESPACE"," ",616],["T_ARRAY","array",616],"(",")",";",["T_WHITESPACE","\n\n        ",616],["T_IF","if",618],["T_WHITESPACE"," ",618],"(",["T_VARIABLE","$this",618],["T_OBJECT_OPERATOR","->",618],["T_STRING","_signs",618],["T_WHITESPACE"," ",618],["T_IS_IDENTICAL","===",618],["T_WHITESPACE"," ",618],["T_STRING","null",618],")",["T_WHITESPACE"," ",618],"{",["T_WHITESPACE","\n            ",618],["T_FOREACH","foreach",619],["T_WHITESPACE"," ",619],"(",["T_VARIABLE","$this",619],["T_OBJECT_OPERATOR","->",619],["T_STRING","_terms",619],["T_WHITESPACE"," ",619],["T_AS","as",619],["T_WHITESPACE"," ",619],["T_VARIABLE","$term",619],")",["T_WHITESPACE"," ",619],"{",["T_WHITESPACE","\n                ",619],["T_VARIABLE","$words",620],"[","]",["T_WHITESPACE"," ",620],"=",["T_WHITESPACE"," ",620],["T_VARIABLE","$term",620],["T_OBJECT_OPERATOR","->",620],["T_STRING","text",620],";",["T_WHITESPACE","\n            ",620],"}",["T_WHITESPACE","\n        ",621],"}",["T_WHITESPACE"," ",622],["T_ELSE","else",622],["T_WHITESPACE"," ",622],"{",["T_WHITESPACE","\n            ",622],["T_FOREACH","foreach",623],["T_WHITESPACE"," ",623],"(",["T_VARIABLE","$this",623],["T_OBJECT_OPERATOR","->",623],["T_STRING","_signs",623],["T_WHITESPACE"," ",623],["T_AS","as",623],["T_WHITESPACE"," ",623],["T_VARIABLE","$id",623],["T_WHITESPACE"," ",623],["T_DOUBLE_ARROW","=>",623],["T_WHITESPACE"," ",623],["T_VARIABLE","$sign",623],")",["T_WHITESPACE"," ",623],"{",["T_WHITESPACE","\n                ",623],["T_IF","if",624],["T_WHITESPACE"," ",624],"(",["T_VARIABLE","$sign",624],["T_WHITESPACE"," ",624],["T_IS_NOT_IDENTICAL","!==",624],["T_WHITESPACE"," ",624],["T_STRING","false",624],")",["T_WHITESPACE"," ",624],"{",["T_WHITESPACE","\n                    ",624],["T_VARIABLE","$words",625],"[","]",["T_WHITESPACE"," ",625],"=",["T_WHITESPACE"," ",625],["T_VARIABLE","$this",625],["T_OBJECT_OPERATOR","->",625],["T_STRING","_terms",625],"[",["T_VARIABLE","$id",625],"]",["T_OBJECT_OPERATOR","->",625],["T_STRING","text",625],";",["T_WHITESPACE","\n                ",625],"}",["T_WHITESPACE","\n            ",626],"}",["T_WHITESPACE","\n        ",627],"}",["T_WHITESPACE","\n\n        ",628],["T_VARIABLE","$highlighter",630],["T_OBJECT_OPERATOR","->",630],["T_STRING","highlight",630],"(",["T_VARIABLE","$words",630],")",";",["T_WHITESPACE","\n    ",630],"}",["T_WHITESPACE","\n\n    ",631],["T_DOC_COMMENT","\/**\n     * Print a query\n     *\n     * @return string\n     *\/",633],["T_WHITESPACE","\n    ",637],["T_PUBLIC","public",638],["T_WHITESPACE"," ",638],["T_FUNCTION","function",638],["T_WHITESPACE"," ",638],["T_STRING","__toString",638],"(",")",["T_WHITESPACE","\n    ",638],"{",["T_WHITESPACE","\n        ",639],["T_COMMENT","\/\/ It's used only for query visualisation, so we don't care about characters escaping\n",640],["T_WHITESPACE","\n        ",641],["T_VARIABLE","$query",642],["T_WHITESPACE"," ",642],"=",["T_WHITESPACE"," ",642],["T_CONSTANT_ENCAPSED_STRING","''",642],";",["T_WHITESPACE","\n\n        ",642],["T_FOREACH","foreach",644],["T_WHITESPACE"," ",644],"(",["T_VARIABLE","$this",644],["T_OBJECT_OPERATOR","->",644],["T_STRING","_terms",644],["T_WHITESPACE"," ",644],["T_AS","as",644],["T_WHITESPACE"," ",644],["T_VARIABLE","$id",644],["T_WHITESPACE"," ",644],["T_DOUBLE_ARROW","=>",644],["T_WHITESPACE"," ",644],["T_VARIABLE","$term",644],")",["T_WHITESPACE"," ",644],"{",["T_WHITESPACE","\n            ",644],["T_IF","if",645],["T_WHITESPACE"," ",645],"(",["T_VARIABLE","$id",645],["T_WHITESPACE"," ",645],["T_IS_NOT_EQUAL","!=",645],["T_WHITESPACE"," ",645],["T_LNUMBER","0",645],")",["T_WHITESPACE"," ",645],"{",["T_WHITESPACE","\n                ",645],["T_VARIABLE","$query",646],["T_WHITESPACE"," ",646],["T_CONCAT_EQUAL",".=",646],["T_WHITESPACE"," ",646],["T_CONSTANT_ENCAPSED_STRING","' '",646],";",["T_WHITESPACE","\n            ",646],"}",["T_WHITESPACE","\n\n            ",647],["T_IF","if",649],["T_WHITESPACE"," ",649],"(",["T_VARIABLE","$this",649],["T_OBJECT_OPERATOR","->",649],["T_STRING","_signs",649],["T_WHITESPACE"," ",649],["T_IS_IDENTICAL","===",649],["T_WHITESPACE"," ",649],["T_STRING","null",649],["T_WHITESPACE"," ",649],["T_BOOLEAN_OR","||",649],["T_WHITESPACE"," ",649],["T_VARIABLE","$this",649],["T_OBJECT_OPERATOR","->",649],["T_STRING","_signs",649],"[",["T_VARIABLE","$id",649],"]",["T_WHITESPACE"," ",649],["T_IS_IDENTICAL","===",649],["T_WHITESPACE"," ",649],["T_STRING","true",649],")",["T_WHITESPACE"," ",649],"{",["T_WHITESPACE","\n                ",649],["T_VARIABLE","$query",650],["T_WHITESPACE"," ",650],["T_CONCAT_EQUAL",".=",650],["T_WHITESPACE"," ",650],["T_CONSTANT_ENCAPSED_STRING","'+'",650],";",["T_WHITESPACE","\n            ",650],"}",["T_WHITESPACE"," ",651],["T_ELSE","else",651],["T_WHITESPACE"," ",651],["T_IF","if",651],["T_WHITESPACE"," ",651],"(",["T_VARIABLE","$this",651],["T_OBJECT_OPERATOR","->",651],["T_STRING","_signs",651],"[",["T_VARIABLE","$id",651],"]",["T_WHITESPACE"," ",651],["T_IS_IDENTICAL","===",651],["T_WHITESPACE"," ",651],["T_STRING","false",651],")",["T_WHITESPACE"," ",651],"{",["T_WHITESPACE","\n                ",651],["T_VARIABLE","$query",652],["T_WHITESPACE"," ",652],["T_CONCAT_EQUAL",".=",652],["T_WHITESPACE"," ",652],["T_CONSTANT_ENCAPSED_STRING","'-'",652],";",["T_WHITESPACE","\n            ",652],"}",["T_WHITESPACE","\n\n            ",653],["T_IF","if",655],["T_WHITESPACE"," ",655],"(",["T_VARIABLE","$term",655],["T_OBJECT_OPERATOR","->",655],["T_STRING","field",655],["T_WHITESPACE"," ",655],["T_IS_NOT_IDENTICAL","!==",655],["T_WHITESPACE"," ",655],["T_STRING","null",655],")",["T_WHITESPACE"," ",655],"{",["T_WHITESPACE","\n                ",655],["T_VARIABLE","$query",656],["T_WHITESPACE"," ",656],["T_CONCAT_EQUAL",".=",656],["T_WHITESPACE"," ",656],["T_VARIABLE","$term",656],["T_OBJECT_OPERATOR","->",656],["T_STRING","field",656],["T_WHITESPACE"," ",656],".",["T_WHITESPACE"," ",656],["T_CONSTANT_ENCAPSED_STRING","':'",656],";",["T_WHITESPACE","\n            ",656],"}",["T_WHITESPACE","\n            ",657],["T_VARIABLE","$query",658],["T_WHITESPACE"," ",658],["T_CONCAT_EQUAL",".=",658],["T_WHITESPACE"," ",658],["T_VARIABLE","$term",658],["T_OBJECT_OPERATOR","->",658],["T_STRING","text",658],";",["T_WHITESPACE","\n        ",658],"}",["T_WHITESPACE","\n\n        ",659],["T_IF","if",661],["T_WHITESPACE"," ",661],"(",["T_VARIABLE","$this",661],["T_OBJECT_OPERATOR","->",661],["T_STRING","getBoost",661],"(",")",["T_WHITESPACE"," ",661],["T_IS_NOT_EQUAL","!=",661],["T_WHITESPACE"," ",661],["T_LNUMBER","1",661],")",["T_WHITESPACE"," ",661],"{",["T_WHITESPACE","\n            ",661],["T_VARIABLE","$query",662],["T_WHITESPACE"," ",662],"=",["T_WHITESPACE"," ",662],["T_CONSTANT_ENCAPSED_STRING","'('",662],["T_WHITESPACE"," ",662],".",["T_WHITESPACE"," ",662],["T_VARIABLE","$query",662],["T_WHITESPACE"," ",662],".",["T_WHITESPACE"," ",662],["T_CONSTANT_ENCAPSED_STRING","')^'",662],["T_WHITESPACE"," ",662],".",["T_WHITESPACE"," ",662],["T_STRING","round",662],"(",["T_VARIABLE","$this",662],["T_OBJECT_OPERATOR","->",662],["T_STRING","getBoost",662],"(",")",",",["T_WHITESPACE"," ",662],["T_LNUMBER","4",662],")",";",["T_WHITESPACE","\n        ",662],"}",["T_WHITESPACE","\n\n        ",663],["T_RETURN","return",665],["T_WHITESPACE"," ",665],["T_VARIABLE","$query",665],";",["T_WHITESPACE","\n    ",665],"}",["T_WHITESPACE","\n",666],"}",["T_WHITESPACE","\n\n",667]]
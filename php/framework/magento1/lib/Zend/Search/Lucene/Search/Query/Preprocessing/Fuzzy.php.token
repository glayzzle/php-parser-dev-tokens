[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Zend Framework\n *\n * LICENSE\n *\n * This source file is subject to the new BSD license that is bundled\n * with this package in the file LICENSE.txt.\n * It is also available through the world-wide-web at this URL:\n * http:\/\/framework.zend.com\/license\/new-bsd\n * If you did not receive a copy of the license and are unable to\n * obtain it through the world-wide-web, please send an email\n * to license@zend.com so we can send you a copy immediately.\n *\n * @category   Zend\n * @package    Zend_Search_Lucene\n * @subpackage Search\n * @copyright  Copyright (c) 2005-2015 Zend Technologies USA Inc. (http:\/\/www.zend.com)\n * @license    http:\/\/framework.zend.com\/license\/new-bsd     New BSD License\n * @version    $Id$\n *\/",2],["T_WHITESPACE","\n\n\n",21],["T_DOC_COMMENT","\/** Zend_Search_Lucene_Search_Query_Processing *\/",24],["T_WHITESPACE","\n",24],["T_COMMENT","#require_once 'Zend\/Search\/Lucene\/Search\/Query\/Preprocessing.php';\n",25],["T_WHITESPACE","\n\n",26],["T_DOC_COMMENT","\/**\n * It's an internal abstract class intended to finalize ase a query processing after query parsing.\n * This type of query is not actually involved into query execution.\n *\n * @category   Zend\n * @package    Zend_Search_Lucene\n * @subpackage Search\n * @internal\n * @copyright  Copyright (c) 2005-2015 Zend Technologies USA Inc. (http:\/\/www.zend.com)\n * @license    http:\/\/framework.zend.com\/license\/new-bsd     New BSD License\n *\/",28],["T_WHITESPACE","\n",38],["T_CLASS","class",39],["T_WHITESPACE"," ",39],["T_STRING","Zend_Search_Lucene_Search_Query_Preprocessing_Fuzzy",39],["T_WHITESPACE"," ",39],["T_EXTENDS","extends",39],["T_WHITESPACE"," ",39],["T_STRING","Zend_Search_Lucene_Search_Query_Preprocessing",39],["T_WHITESPACE","\n",39],"{",["T_WHITESPACE","\n    ",40],["T_DOC_COMMENT","\/**\n     * word (query parser lexeme) to find.\n     *\n     * @var string\n     *\/",41],["T_WHITESPACE","\n    ",45],["T_PRIVATE","private",46],["T_WHITESPACE"," ",46],["T_VARIABLE","$_word",46],";",["T_WHITESPACE","\n\n    ",46],["T_DOC_COMMENT","\/**\n     * Word encoding (field name is always provided using UTF-8 encoding since it may be retrieved from index).\n     *\n     * @var string\n     *\/",48],["T_WHITESPACE","\n    ",52],["T_PRIVATE","private",53],["T_WHITESPACE"," ",53],["T_VARIABLE","$_encoding",53],";",["T_WHITESPACE","\n\n\n    ",53],["T_DOC_COMMENT","\/**\n     * Field name.\n     *\n     * @var string\n     *\/",56],["T_WHITESPACE","\n    ",60],["T_PRIVATE","private",61],["T_WHITESPACE"," ",61],["T_VARIABLE","$_field",61],";",["T_WHITESPACE","\n\n    ",61],["T_DOC_COMMENT","\/**\n     * A value between 0 and 1 to set the required similarity\n     *  between the query term and the matching terms. For example, for a\n     *  _minimumSimilarity of 0.5 a term of the same length\n     *  as the query term is considered similar to the query term if the edit distance\n     *  between both terms is less than length(term)*0.5\n     *\n     * @var float\n     *\/",63],["T_WHITESPACE","\n    ",71],["T_PRIVATE","private",72],["T_WHITESPACE"," ",72],["T_VARIABLE","$_minimumSimilarity",72],";",["T_WHITESPACE","\n\n    ",72],["T_DOC_COMMENT","\/**\n     * Class constructor.  Create a new preprocessing object for prase query.\n     *\n     * @param string $word       Non-tokenized word (query parser lexeme) to search.\n     * @param string $encoding   Word encoding.\n     * @param string $fieldName  Field name.\n     * @param float  $minimumSimilarity minimum similarity\n     *\/",74],["T_WHITESPACE","\n    ",81],["T_PUBLIC","public",82],["T_WHITESPACE"," ",82],["T_FUNCTION","function",82],["T_WHITESPACE"," ",82],["T_STRING","__construct",82],"(",["T_VARIABLE","$word",82],",",["T_WHITESPACE"," ",82],["T_VARIABLE","$encoding",82],",",["T_WHITESPACE"," ",82],["T_VARIABLE","$fieldName",82],",",["T_WHITESPACE"," ",82],["T_VARIABLE","$minimumSimilarity",82],")",["T_WHITESPACE","\n    ",82],"{",["T_WHITESPACE","\n        ",83],["T_VARIABLE","$this",84],["T_OBJECT_OPERATOR","->",84],["T_STRING","_word",84],["T_WHITESPACE","     ",84],"=",["T_WHITESPACE"," ",84],["T_VARIABLE","$word",84],";",["T_WHITESPACE","\n        ",84],["T_VARIABLE","$this",85],["T_OBJECT_OPERATOR","->",85],["T_STRING","_encoding",85],["T_WHITESPACE"," ",85],"=",["T_WHITESPACE"," ",85],["T_VARIABLE","$encoding",85],";",["T_WHITESPACE","\n        ",85],["T_VARIABLE","$this",86],["T_OBJECT_OPERATOR","->",86],["T_STRING","_field",86],["T_WHITESPACE","    ",86],"=",["T_WHITESPACE"," ",86],["T_VARIABLE","$fieldName",86],";",["T_WHITESPACE","\n        ",86],["T_VARIABLE","$this",87],["T_OBJECT_OPERATOR","->",87],["T_STRING","_minimumSimilarity",87],["T_WHITESPACE"," ",87],"=",["T_WHITESPACE"," ",87],["T_VARIABLE","$minimumSimilarity",87],";",["T_WHITESPACE","\n    ",87],"}",["T_WHITESPACE","\n\n    ",88],["T_DOC_COMMENT","\/**\n     * Re-write query into primitive queries in the context of specified index\n     *\n     * @param Zend_Search_Lucene_Interface $index\n     * @return Zend_Search_Lucene_Search_Query\n     *\/",90],["T_WHITESPACE","\n    ",95],["T_PUBLIC","public",96],["T_WHITESPACE"," ",96],["T_FUNCTION","function",96],["T_WHITESPACE"," ",96],["T_STRING","rewrite",96],"(",["T_STRING","Zend_Search_Lucene_Interface",96],["T_WHITESPACE"," ",96],["T_VARIABLE","$index",96],")",["T_WHITESPACE","\n    ",96],"{",["T_WHITESPACE","\n        ",97],["T_IF","if",98],["T_WHITESPACE"," ",98],"(",["T_VARIABLE","$this",98],["T_OBJECT_OPERATOR","->",98],["T_STRING","_field",98],["T_WHITESPACE"," ",98],["T_IS_IDENTICAL","===",98],["T_WHITESPACE"," ",98],["T_STRING","null",98],")",["T_WHITESPACE"," ",98],"{",["T_WHITESPACE","\n            ",98],["T_COMMENT","#require_once 'Zend\/Search\/Lucene\/Search\/Query\/Boolean.php';\n",99],["T_WHITESPACE","            ",100],["T_VARIABLE","$query",100],["T_WHITESPACE"," ",100],"=",["T_WHITESPACE"," ",100],["T_NEW","new",100],["T_WHITESPACE"," ",100],["T_STRING","Zend_Search_Lucene_Search_Query_Boolean",100],"(",")",";",["T_WHITESPACE","\n\n            ",100],["T_VARIABLE","$hasInsignificantSubqueries",102],["T_WHITESPACE"," ",102],"=",["T_WHITESPACE"," ",102],["T_STRING","false",102],";",["T_WHITESPACE","\n\n            ",102],["T_COMMENT","#require_once 'Zend\/Search\/Lucene.php';\n",104],["T_WHITESPACE","            ",105],["T_IF","if",105],["T_WHITESPACE"," ",105],"(",["T_STRING","Zend_Search_Lucene",105],["T_DOUBLE_COLON","::",105],["T_STRING","getDefaultSearchField",105],"(",")",["T_WHITESPACE"," ",105],["T_IS_IDENTICAL","===",105],["T_WHITESPACE"," ",105],["T_STRING","null",105],")",["T_WHITESPACE"," ",105],"{",["T_WHITESPACE","\n                ",105],["T_VARIABLE","$searchFields",106],["T_WHITESPACE"," ",106],"=",["T_WHITESPACE"," ",106],["T_VARIABLE","$index",106],["T_OBJECT_OPERATOR","->",106],["T_STRING","getFieldNames",106],"(",["T_STRING","true",106],")",";",["T_WHITESPACE","\n            ",106],"}",["T_WHITESPACE"," ",107],["T_ELSE","else",107],["T_WHITESPACE"," ",107],"{",["T_WHITESPACE","\n                ",107],["T_VARIABLE","$searchFields",108],["T_WHITESPACE"," ",108],"=",["T_WHITESPACE"," ",108],["T_ARRAY","array",108],"(",["T_STRING","Zend_Search_Lucene",108],["T_DOUBLE_COLON","::",108],["T_STRING","getDefaultSearchField",108],"(",")",")",";",["T_WHITESPACE","\n            ",108],"}",["T_WHITESPACE","\n\n            ",109],["T_COMMENT","#require_once 'Zend\/Search\/Lucene\/Search\/Query\/Preprocessing\/Fuzzy.php';\n",111],["T_WHITESPACE","            ",112],["T_FOREACH","foreach",112],["T_WHITESPACE"," ",112],"(",["T_VARIABLE","$searchFields",112],["T_WHITESPACE"," ",112],["T_AS","as",112],["T_WHITESPACE"," ",112],["T_VARIABLE","$fieldName",112],")",["T_WHITESPACE"," ",112],"{",["T_WHITESPACE","\n                ",112],["T_VARIABLE","$subquery",113],["T_WHITESPACE"," ",113],"=",["T_WHITESPACE"," ",113],["T_NEW","new",113],["T_WHITESPACE"," ",113],["T_STRING","Zend_Search_Lucene_Search_Query_Preprocessing_Fuzzy",113],"(",["T_VARIABLE","$this",113],["T_OBJECT_OPERATOR","->",113],["T_STRING","_word",113],",",["T_WHITESPACE","\n                                                                                    ",113],["T_VARIABLE","$this",114],["T_OBJECT_OPERATOR","->",114],["T_STRING","_encoding",114],",",["T_WHITESPACE","\n                                                                                    ",114],["T_VARIABLE","$fieldName",115],",",["T_WHITESPACE","\n                                                                                    ",115],["T_VARIABLE","$this",116],["T_OBJECT_OPERATOR","->",116],["T_STRING","_minimumSimilarity",116],")",";",["T_WHITESPACE","\n\n                ",116],["T_VARIABLE","$rewrittenSubquery",118],["T_WHITESPACE"," ",118],"=",["T_WHITESPACE"," ",118],["T_VARIABLE","$subquery",118],["T_OBJECT_OPERATOR","->",118],["T_STRING","rewrite",118],"(",["T_VARIABLE","$index",118],")",";",["T_WHITESPACE","\n\n                ",118],["T_IF","if",120],["T_WHITESPACE"," ",120],"(",["T_WHITESPACE"," ",120],"!","(",["T_VARIABLE","$rewrittenSubquery",120],["T_WHITESPACE"," ",120],["T_INSTANCEOF","instanceof",120],["T_WHITESPACE"," ",120],["T_STRING","Zend_Search_Lucene_Search_Query_Insignificant",120],["T_WHITESPACE","  ",120],["T_BOOLEAN_OR","||",120],["T_WHITESPACE","\n                       ",120],["T_VARIABLE","$rewrittenSubquery",121],["T_WHITESPACE"," ",121],["T_INSTANCEOF","instanceof",121],["T_WHITESPACE"," ",121],["T_STRING","Zend_Search_Lucene_Search_Query_Empty",121],")",["T_WHITESPACE"," ",121],")",["T_WHITESPACE"," ",121],"{",["T_WHITESPACE","\n                    ",121],["T_VARIABLE","$query",122],["T_OBJECT_OPERATOR","->",122],["T_STRING","addSubquery",122],"(",["T_VARIABLE","$rewrittenSubquery",122],")",";",["T_WHITESPACE","\n                ",122],"}",["T_WHITESPACE","\n\n                ",123],["T_IF","if",125],["T_WHITESPACE"," ",125],"(",["T_VARIABLE","$rewrittenSubquery",125],["T_WHITESPACE"," ",125],["T_INSTANCEOF","instanceof",125],["T_WHITESPACE"," ",125],["T_STRING","Zend_Search_Lucene_Search_Query_Insignificant",125],")",["T_WHITESPACE"," ",125],"{",["T_WHITESPACE","\n                    ",125],["T_VARIABLE","$hasInsignificantSubqueries",126],["T_WHITESPACE"," ",126],"=",["T_WHITESPACE"," ",126],["T_STRING","true",126],";",["T_WHITESPACE","\n                ",126],"}",["T_WHITESPACE","\n            ",127],"}",["T_WHITESPACE","\n\n            ",128],["T_VARIABLE","$subqueries",130],["T_WHITESPACE"," ",130],"=",["T_WHITESPACE"," ",130],["T_VARIABLE","$query",130],["T_OBJECT_OPERATOR","->",130],["T_STRING","getSubqueries",130],"(",")",";",["T_WHITESPACE","\n\n            ",130],["T_IF","if",132],["T_WHITESPACE"," ",132],"(",["T_STRING","count",132],"(",["T_VARIABLE","$subqueries",132],")",["T_WHITESPACE"," ",132],["T_IS_EQUAL","==",132],["T_WHITESPACE"," ",132],["T_LNUMBER","0",132],")",["T_WHITESPACE"," ",132],"{",["T_WHITESPACE","\n                ",132],["T_VARIABLE","$this",133],["T_OBJECT_OPERATOR","->",133],["T_STRING","_matches",133],["T_WHITESPACE"," ",133],"=",["T_WHITESPACE"," ",133],["T_ARRAY","array",133],"(",")",";",["T_WHITESPACE","\n                ",133],["T_IF","if",134],["T_WHITESPACE"," ",134],"(",["T_VARIABLE","$hasInsignificantSubqueries",134],")",["T_WHITESPACE"," ",134],"{",["T_WHITESPACE","\n                    ",134],["T_COMMENT","#require_once 'Zend\/Search\/Lucene\/Search\/Query\/Insignificant.php';\n",135],["T_WHITESPACE","                    ",136],["T_RETURN","return",136],["T_WHITESPACE"," ",136],["T_NEW","new",136],["T_WHITESPACE"," ",136],["T_STRING","Zend_Search_Lucene_Search_Query_Insignificant",136],"(",")",";",["T_WHITESPACE","\n                ",136],"}",["T_WHITESPACE"," ",137],["T_ELSE","else",137],["T_WHITESPACE"," ",137],"{",["T_WHITESPACE","\n                    ",137],["T_COMMENT","#require_once 'Zend\/Search\/Lucene\/Search\/Query\/Empty.php';\n",138],["T_WHITESPACE","                    ",139],["T_RETURN","return",139],["T_WHITESPACE"," ",139],["T_NEW","new",139],["T_WHITESPACE"," ",139],["T_STRING","Zend_Search_Lucene_Search_Query_Empty",139],"(",")",";",["T_WHITESPACE","\n                ",139],"}",["T_WHITESPACE","\n            ",140],"}",["T_WHITESPACE","\n\n            ",141],["T_IF","if",143],["T_WHITESPACE"," ",143],"(",["T_STRING","count",143],"(",["T_VARIABLE","$subqueries",143],")",["T_WHITESPACE"," ",143],["T_IS_EQUAL","==",143],["T_WHITESPACE"," ",143],["T_LNUMBER","1",143],")",["T_WHITESPACE"," ",143],"{",["T_WHITESPACE","\n                ",143],["T_VARIABLE","$query",144],["T_WHITESPACE"," ",144],"=",["T_WHITESPACE"," ",144],["T_STRING","reset",144],"(",["T_VARIABLE","$subqueries",144],")",";",["T_WHITESPACE","\n            ",144],"}",["T_WHITESPACE","\n\n            ",145],["T_VARIABLE","$query",147],["T_OBJECT_OPERATOR","->",147],["T_STRING","setBoost",147],"(",["T_VARIABLE","$this",147],["T_OBJECT_OPERATOR","->",147],["T_STRING","getBoost",147],"(",")",")",";",["T_WHITESPACE","\n\n            ",147],["T_VARIABLE","$this",149],["T_OBJECT_OPERATOR","->",149],["T_STRING","_matches",149],["T_WHITESPACE"," ",149],"=",["T_WHITESPACE"," ",149],["T_VARIABLE","$query",149],["T_OBJECT_OPERATOR","->",149],["T_STRING","getQueryTerms",149],"(",")",";",["T_WHITESPACE","\n            ",149],["T_RETURN","return",150],["T_WHITESPACE"," ",150],["T_VARIABLE","$query",150],";",["T_WHITESPACE","\n        ",150],"}",["T_WHITESPACE","\n\n        ",151],["T_COMMENT","\/\/ -------------------------------------\n",153],["T_WHITESPACE","        ",154],["T_COMMENT","\/\/ Recognize exact term matching (it corresponds to Keyword fields stored in the index)\n",154],["T_WHITESPACE","        ",155],["T_COMMENT","\/\/ encoding is not used since we expect binary matching\n",155],["T_WHITESPACE","        ",156],["T_COMMENT","#require_once 'Zend\/Search\/Lucene\/Index\/Term.php';\n",156],["T_WHITESPACE","        ",157],["T_VARIABLE","$term",157],["T_WHITESPACE"," ",157],"=",["T_WHITESPACE"," ",157],["T_NEW","new",157],["T_WHITESPACE"," ",157],["T_STRING","Zend_Search_Lucene_Index_Term",157],"(",["T_VARIABLE","$this",157],["T_OBJECT_OPERATOR","->",157],["T_STRING","_word",157],",",["T_WHITESPACE"," ",157],["T_VARIABLE","$this",157],["T_OBJECT_OPERATOR","->",157],["T_STRING","_field",157],")",";",["T_WHITESPACE","\n        ",157],["T_IF","if",158],["T_WHITESPACE"," ",158],"(",["T_VARIABLE","$index",158],["T_OBJECT_OPERATOR","->",158],["T_STRING","hasTerm",158],"(",["T_VARIABLE","$term",158],")",")",["T_WHITESPACE"," ",158],"{",["T_WHITESPACE","\n            ",158],["T_COMMENT","#require_once 'Zend\/Search\/Lucene\/Search\/Query\/Fuzzy.php';\n",159],["T_WHITESPACE","            ",160],["T_VARIABLE","$query",160],["T_WHITESPACE"," ",160],"=",["T_WHITESPACE"," ",160],["T_NEW","new",160],["T_WHITESPACE"," ",160],["T_STRING","Zend_Search_Lucene_Search_Query_Fuzzy",160],"(",["T_VARIABLE","$term",160],",",["T_WHITESPACE"," ",160],["T_VARIABLE","$this",160],["T_OBJECT_OPERATOR","->",160],["T_STRING","_minimumSimilarity",160],")",";",["T_WHITESPACE","\n            ",160],["T_VARIABLE","$query",161],["T_OBJECT_OPERATOR","->",161],["T_STRING","setBoost",161],"(",["T_VARIABLE","$this",161],["T_OBJECT_OPERATOR","->",161],["T_STRING","getBoost",161],"(",")",")",";",["T_WHITESPACE","\n\n            ",161],["T_COMMENT","\/\/ Get rewritten query. Important! It also fills terms matching container.\n",163],["T_WHITESPACE","            ",164],["T_VARIABLE","$rewrittenQuery",164],["T_WHITESPACE"," ",164],"=",["T_WHITESPACE"," ",164],["T_VARIABLE","$query",164],["T_OBJECT_OPERATOR","->",164],["T_STRING","rewrite",164],"(",["T_VARIABLE","$index",164],")",";",["T_WHITESPACE","\n            ",164],["T_VARIABLE","$this",165],["T_OBJECT_OPERATOR","->",165],["T_STRING","_matches",165],["T_WHITESPACE"," ",165],"=",["T_WHITESPACE"," ",165],["T_VARIABLE","$query",165],["T_OBJECT_OPERATOR","->",165],["T_STRING","getQueryTerms",165],"(",")",";",["T_WHITESPACE","\n\n            ",165],["T_RETURN","return",167],["T_WHITESPACE"," ",167],["T_VARIABLE","$rewrittenQuery",167],";",["T_WHITESPACE","\n        ",167],"}",["T_WHITESPACE","\n\n\n        ",168],["T_COMMENT","\/\/ -------------------------------------\n",171],["T_WHITESPACE","        ",172],["T_COMMENT","\/\/ Recognize wildcard queries\n",172],["T_WHITESPACE","\n        ",173],["T_DOC_COMMENT","\/** @todo check for PCRE unicode support may be performed through Zend_Environment in some future *\/",174],["T_WHITESPACE","\n        ",174],["T_IF","if",175],["T_WHITESPACE"," ",175],"(","@",["T_STRING","preg_match",175],"(",["T_CONSTANT_ENCAPSED_STRING","'\/\\pL\/u'",175],",",["T_WHITESPACE"," ",175],["T_CONSTANT_ENCAPSED_STRING","'a'",175],")",["T_WHITESPACE"," ",175],["T_IS_EQUAL","==",175],["T_WHITESPACE"," ",175],["T_LNUMBER","1",175],")",["T_WHITESPACE"," ",175],"{",["T_WHITESPACE","\n            ",175],["T_VARIABLE","$subPatterns",176],["T_WHITESPACE"," ",176],"=",["T_WHITESPACE"," ",176],["T_STRING","preg_split",176],"(",["T_CONSTANT_ENCAPSED_STRING","'\/[*?]\/u'",176],",",["T_WHITESPACE"," ",176],["T_STRING","iconv",176],"(",["T_VARIABLE","$this",176],["T_OBJECT_OPERATOR","->",176],["T_STRING","_encoding",176],",",["T_WHITESPACE"," ",176],["T_CONSTANT_ENCAPSED_STRING","'UTF-8'",176],",",["T_WHITESPACE"," ",176],["T_VARIABLE","$this",176],["T_OBJECT_OPERATOR","->",176],["T_STRING","_word",176],")",")",";",["T_WHITESPACE","\n        ",176],"}",["T_WHITESPACE"," ",177],["T_ELSE","else",177],["T_WHITESPACE"," ",177],"{",["T_WHITESPACE","\n            ",177],["T_VARIABLE","$subPatterns",178],["T_WHITESPACE"," ",178],"=",["T_WHITESPACE"," ",178],["T_STRING","preg_split",178],"(",["T_CONSTANT_ENCAPSED_STRING","'\/[*?]\/'",178],",",["T_WHITESPACE"," ",178],["T_VARIABLE","$this",178],["T_OBJECT_OPERATOR","->",178],["T_STRING","_word",178],")",";",["T_WHITESPACE","\n        ",178],"}",["T_WHITESPACE","\n        ",179],["T_IF","if",180],["T_WHITESPACE"," ",180],"(",["T_STRING","count",180],"(",["T_VARIABLE","$subPatterns",180],")",["T_WHITESPACE"," ",180],">",["T_WHITESPACE"," ",180],["T_LNUMBER","1",180],")",["T_WHITESPACE"," ",180],"{",["T_WHITESPACE","\n            ",180],["T_COMMENT","#require_once 'Zend\/Search\/Lucene\/Search\/QueryParserException.php';\n",181],["T_WHITESPACE","            ",182],["T_THROW","throw",182],["T_WHITESPACE"," ",182],["T_NEW","new",182],["T_WHITESPACE"," ",182],["T_STRING","Zend_Search_Lucene_Search_QueryParserException",182],"(",["T_CONSTANT_ENCAPSED_STRING","'Fuzzy search doesn\\'t support wildcards (except within Keyword fields).'",182],")",";",["T_WHITESPACE","\n        ",182],"}",["T_WHITESPACE","\n\n\n        ",183],["T_COMMENT","\/\/ -------------------------------------\n",186],["T_WHITESPACE","        ",187],["T_COMMENT","\/\/ Recognize one-term multi-term and \"insignificant\" queries\n",187],["T_WHITESPACE","        ",188],["T_COMMENT","#require_once 'Zend\/Search\/Lucene\/Analysis\/Analyzer.php';\n",188],["T_WHITESPACE","        ",189],["T_VARIABLE","$tokens",189],["T_WHITESPACE"," ",189],"=",["T_WHITESPACE"," ",189],["T_STRING","Zend_Search_Lucene_Analysis_Analyzer",189],["T_DOUBLE_COLON","::",189],["T_STRING","getDefault",189],"(",")",["T_OBJECT_OPERATOR","->",189],["T_STRING","tokenize",189],"(",["T_VARIABLE","$this",189],["T_OBJECT_OPERATOR","->",189],["T_STRING","_word",189],",",["T_WHITESPACE"," ",189],["T_VARIABLE","$this",189],["T_OBJECT_OPERATOR","->",189],["T_STRING","_encoding",189],")",";",["T_WHITESPACE","\n\n        ",189],["T_IF","if",191],["T_WHITESPACE"," ",191],"(",["T_STRING","count",191],"(",["T_VARIABLE","$tokens",191],")",["T_WHITESPACE"," ",191],["T_IS_EQUAL","==",191],["T_WHITESPACE"," ",191],["T_LNUMBER","0",191],")",["T_WHITESPACE"," ",191],"{",["T_WHITESPACE","\n            ",191],["T_VARIABLE","$this",192],["T_OBJECT_OPERATOR","->",192],["T_STRING","_matches",192],["T_WHITESPACE"," ",192],"=",["T_WHITESPACE"," ",192],["T_ARRAY","array",192],"(",")",";",["T_WHITESPACE","\n            ",192],["T_COMMENT","#require_once 'Zend\/Search\/Lucene\/Search\/Query\/Insignificant.php';\n",193],["T_WHITESPACE","            ",194],["T_RETURN","return",194],["T_WHITESPACE"," ",194],["T_NEW","new",194],["T_WHITESPACE"," ",194],["T_STRING","Zend_Search_Lucene_Search_Query_Insignificant",194],"(",")",";",["T_WHITESPACE","\n        ",194],"}",["T_WHITESPACE","\n\n        ",195],["T_IF","if",197],["T_WHITESPACE"," ",197],"(",["T_STRING","count",197],"(",["T_VARIABLE","$tokens",197],")",["T_WHITESPACE"," ",197],["T_IS_EQUAL","==",197],["T_WHITESPACE"," ",197],["T_LNUMBER","1",197],")",["T_WHITESPACE"," ",197],"{",["T_WHITESPACE","\n            ",197],["T_COMMENT","#require_once 'Zend\/Search\/Lucene\/Index\/Term.php';\n",198],["T_WHITESPACE","            ",199],["T_VARIABLE","$term",199],["T_WHITESPACE","  ",199],"=",["T_WHITESPACE"," ",199],["T_NEW","new",199],["T_WHITESPACE"," ",199],["T_STRING","Zend_Search_Lucene_Index_Term",199],"(",["T_VARIABLE","$tokens",199],"[",["T_LNUMBER","0",199],"]",["T_OBJECT_OPERATOR","->",199],["T_STRING","getTermText",199],"(",")",",",["T_WHITESPACE"," ",199],["T_VARIABLE","$this",199],["T_OBJECT_OPERATOR","->",199],["T_STRING","_field",199],")",";",["T_WHITESPACE","\n            ",199],["T_COMMENT","#require_once 'Zend\/Search\/Lucene\/Search\/Query\/Fuzzy.php';\n",200],["T_WHITESPACE","            ",201],["T_VARIABLE","$query",201],["T_WHITESPACE"," ",201],"=",["T_WHITESPACE"," ",201],["T_NEW","new",201],["T_WHITESPACE"," ",201],["T_STRING","Zend_Search_Lucene_Search_Query_Fuzzy",201],"(",["T_VARIABLE","$term",201],",",["T_WHITESPACE"," ",201],["T_VARIABLE","$this",201],["T_OBJECT_OPERATOR","->",201],["T_STRING","_minimumSimilarity",201],")",";",["T_WHITESPACE","\n            ",201],["T_VARIABLE","$query",202],["T_OBJECT_OPERATOR","->",202],["T_STRING","setBoost",202],"(",["T_VARIABLE","$this",202],["T_OBJECT_OPERATOR","->",202],["T_STRING","getBoost",202],"(",")",")",";",["T_WHITESPACE","\n\n            ",202],["T_COMMENT","\/\/ Get rewritten query. Important! It also fills terms matching container.\n",204],["T_WHITESPACE","            ",205],["T_VARIABLE","$rewrittenQuery",205],["T_WHITESPACE"," ",205],"=",["T_WHITESPACE"," ",205],["T_VARIABLE","$query",205],["T_OBJECT_OPERATOR","->",205],["T_STRING","rewrite",205],"(",["T_VARIABLE","$index",205],")",";",["T_WHITESPACE","\n            ",205],["T_VARIABLE","$this",206],["T_OBJECT_OPERATOR","->",206],["T_STRING","_matches",206],["T_WHITESPACE"," ",206],"=",["T_WHITESPACE"," ",206],["T_VARIABLE","$query",206],["T_OBJECT_OPERATOR","->",206],["T_STRING","getQueryTerms",206],"(",")",";",["T_WHITESPACE","\n\n            ",206],["T_RETURN","return",208],["T_WHITESPACE"," ",208],["T_VARIABLE","$rewrittenQuery",208],";",["T_WHITESPACE","\n        ",208],"}",["T_WHITESPACE","\n\n        ",209],["T_COMMENT","\/\/ Word is tokenized into several tokens\n",211],["T_WHITESPACE","        ",212],["T_COMMENT","#require_once 'Zend\/Search\/Lucene\/Search\/QueryParserException.php';\n",212],["T_WHITESPACE","        ",213],["T_THROW","throw",213],["T_WHITESPACE"," ",213],["T_NEW","new",213],["T_WHITESPACE"," ",213],["T_STRING","Zend_Search_Lucene_Search_QueryParserException",213],"(",["T_CONSTANT_ENCAPSED_STRING","'Fuzzy search is supported only for non-multiple word terms'",213],")",";",["T_WHITESPACE","\n    ",213],"}",["T_WHITESPACE","\n\n    ",214],["T_DOC_COMMENT","\/**\n     * Query specific matches highlighting\n     *\n     * @param Zend_Search_Lucene_Search_Highlighter_Interface $highlighter  Highlighter object (also contains doc for highlighting)\n     *\/",216],["T_WHITESPACE","\n    ",220],["T_PROTECTED","protected",221],["T_WHITESPACE"," ",221],["T_FUNCTION","function",221],["T_WHITESPACE"," ",221],["T_STRING","_highlightMatches",221],"(",["T_STRING","Zend_Search_Lucene_Search_Highlighter_Interface",221],["T_WHITESPACE"," ",221],["T_VARIABLE","$highlighter",221],")",["T_WHITESPACE","\n    ",221],"{",["T_WHITESPACE","\n        ",222],["T_DOC_COMMENT","\/** Skip fields detection. We don't need it, since we expect all fields presented in the HTML body and don't differentiate them *\/",223],["T_WHITESPACE","\n\n        ",223],["T_DOC_COMMENT","\/** Skip exact term matching recognition, keyword fields highlighting is not supported *\/",225],["T_WHITESPACE","\n\n        ",225],["T_COMMENT","\/\/ -------------------------------------\n",227],["T_WHITESPACE","        ",228],["T_COMMENT","\/\/ Recognize wildcard queries\n",228],["T_WHITESPACE","\n        ",229],["T_DOC_COMMENT","\/** @todo check for PCRE unicode support may be performed through Zend_Environment in some future *\/",230],["T_WHITESPACE","\n        ",230],["T_IF","if",231],["T_WHITESPACE"," ",231],"(","@",["T_STRING","preg_match",231],"(",["T_CONSTANT_ENCAPSED_STRING","'\/\\pL\/u'",231],",",["T_WHITESPACE"," ",231],["T_CONSTANT_ENCAPSED_STRING","'a'",231],")",["T_WHITESPACE"," ",231],["T_IS_EQUAL","==",231],["T_WHITESPACE"," ",231],["T_LNUMBER","1",231],")",["T_WHITESPACE"," ",231],"{",["T_WHITESPACE","\n            ",231],["T_VARIABLE","$subPatterns",232],["T_WHITESPACE"," ",232],"=",["T_WHITESPACE"," ",232],["T_STRING","preg_split",232],"(",["T_CONSTANT_ENCAPSED_STRING","'\/[*?]\/u'",232],",",["T_WHITESPACE"," ",232],["T_STRING","iconv",232],"(",["T_VARIABLE","$this",232],["T_OBJECT_OPERATOR","->",232],["T_STRING","_encoding",232],",",["T_WHITESPACE"," ",232],["T_CONSTANT_ENCAPSED_STRING","'UTF-8'",232],",",["T_WHITESPACE"," ",232],["T_VARIABLE","$this",232],["T_OBJECT_OPERATOR","->",232],["T_STRING","_word",232],")",")",";",["T_WHITESPACE","\n        ",232],"}",["T_WHITESPACE"," ",233],["T_ELSE","else",233],["T_WHITESPACE"," ",233],"{",["T_WHITESPACE","\n            ",233],["T_VARIABLE","$subPatterns",234],["T_WHITESPACE"," ",234],"=",["T_WHITESPACE"," ",234],["T_STRING","preg_split",234],"(",["T_CONSTANT_ENCAPSED_STRING","'\/[*?]\/'",234],",",["T_WHITESPACE"," ",234],["T_VARIABLE","$this",234],["T_OBJECT_OPERATOR","->",234],["T_STRING","_word",234],")",";",["T_WHITESPACE","\n        ",234],"}",["T_WHITESPACE","\n        ",235],["T_IF","if",236],["T_WHITESPACE"," ",236],"(",["T_STRING","count",236],"(",["T_VARIABLE","$subPatterns",236],")",["T_WHITESPACE"," ",236],">",["T_WHITESPACE"," ",236],["T_LNUMBER","1",236],")",["T_WHITESPACE"," ",236],"{",["T_WHITESPACE","\n            ",236],["T_COMMENT","\/\/ Do nothing\n",237],["T_WHITESPACE","            ",238],["T_RETURN","return",238],";",["T_WHITESPACE","\n        ",238],"}",["T_WHITESPACE","\n\n\n        ",239],["T_COMMENT","\/\/ -------------------------------------\n",242],["T_WHITESPACE","        ",243],["T_COMMENT","\/\/ Recognize one-term multi-term and \"insignificant\" queries\n",243],["T_WHITESPACE","        ",244],["T_COMMENT","#require_once 'Zend\/Search\/Lucene\/Analysis\/Analyzer.php';\n",244],["T_WHITESPACE","        ",245],["T_VARIABLE","$tokens",245],["T_WHITESPACE"," ",245],"=",["T_WHITESPACE"," ",245],["T_STRING","Zend_Search_Lucene_Analysis_Analyzer",245],["T_DOUBLE_COLON","::",245],["T_STRING","getDefault",245],"(",")",["T_OBJECT_OPERATOR","->",245],["T_STRING","tokenize",245],"(",["T_VARIABLE","$this",245],["T_OBJECT_OPERATOR","->",245],["T_STRING","_word",245],",",["T_WHITESPACE"," ",245],["T_VARIABLE","$this",245],["T_OBJECT_OPERATOR","->",245],["T_STRING","_encoding",245],")",";",["T_WHITESPACE","\n        ",245],["T_IF","if",246],["T_WHITESPACE"," ",246],"(",["T_STRING","count",246],"(",["T_VARIABLE","$tokens",246],")",["T_WHITESPACE"," ",246],["T_IS_EQUAL","==",246],["T_WHITESPACE"," ",246],["T_LNUMBER","0",246],")",["T_WHITESPACE"," ",246],"{",["T_WHITESPACE","\n            ",246],["T_COMMENT","\/\/ Do nothing\n",247],["T_WHITESPACE","            ",248],["T_RETURN","return",248],";",["T_WHITESPACE","\n        ",248],"}",["T_WHITESPACE","\n        ",249],["T_IF","if",250],["T_WHITESPACE"," ",250],"(",["T_STRING","count",250],"(",["T_VARIABLE","$tokens",250],")",["T_WHITESPACE"," ",250],["T_IS_EQUAL","==",250],["T_WHITESPACE"," ",250],["T_LNUMBER","1",250],")",["T_WHITESPACE"," ",250],"{",["T_WHITESPACE","\n            ",250],["T_COMMENT","#require_once 'Zend\/Search\/Lucene\/Index\/Term.php';\n",251],["T_WHITESPACE","            ",252],["T_VARIABLE","$term",252],["T_WHITESPACE","  ",252],"=",["T_WHITESPACE"," ",252],["T_NEW","new",252],["T_WHITESPACE"," ",252],["T_STRING","Zend_Search_Lucene_Index_Term",252],"(",["T_VARIABLE","$tokens",252],"[",["T_LNUMBER","0",252],"]",["T_OBJECT_OPERATOR","->",252],["T_STRING","getTermText",252],"(",")",",",["T_WHITESPACE"," ",252],["T_VARIABLE","$this",252],["T_OBJECT_OPERATOR","->",252],["T_STRING","_field",252],")",";",["T_WHITESPACE","\n            ",252],["T_COMMENT","#require_once 'Zend\/Search\/Lucene\/Search\/Query\/Fuzzy.php';\n",253],["T_WHITESPACE","            ",254],["T_VARIABLE","$query",254],["T_WHITESPACE"," ",254],"=",["T_WHITESPACE"," ",254],["T_NEW","new",254],["T_WHITESPACE"," ",254],["T_STRING","Zend_Search_Lucene_Search_Query_Fuzzy",254],"(",["T_VARIABLE","$term",254],",",["T_WHITESPACE"," ",254],["T_VARIABLE","$this",254],["T_OBJECT_OPERATOR","->",254],["T_STRING","_minimumSimilarity",254],")",";",["T_WHITESPACE","\n\n            ",254],["T_VARIABLE","$query",256],["T_OBJECT_OPERATOR","->",256],["T_STRING","_highlightMatches",256],"(",["T_VARIABLE","$highlighter",256],")",";",["T_WHITESPACE","\n            ",256],["T_RETURN","return",257],";",["T_WHITESPACE","\n        ",257],"}",["T_WHITESPACE","\n\n        ",258],["T_COMMENT","\/\/ Word is tokenized into several tokens\n",260],["T_WHITESPACE","        ",261],["T_COMMENT","\/\/ But fuzzy search is supported only for non-multiple word terms\n",261],["T_WHITESPACE","        ",262],["T_COMMENT","\/\/ Do nothing\n",262],["T_WHITESPACE","    ",263],"}",["T_WHITESPACE","\n\n    ",263],["T_DOC_COMMENT","\/**\n     * Print a query\n     *\n     * @return string\n     *\/",265],["T_WHITESPACE","\n    ",269],["T_PUBLIC","public",270],["T_WHITESPACE"," ",270],["T_FUNCTION","function",270],["T_WHITESPACE"," ",270],["T_STRING","__toString",270],"(",")",["T_WHITESPACE","\n    ",270],"{",["T_WHITESPACE","\n        ",271],["T_COMMENT","\/\/ It's used only for query visualisation, so we don't care about characters escaping\n",272],["T_WHITESPACE","        ",273],["T_IF","if",273],["T_WHITESPACE"," ",273],"(",["T_VARIABLE","$this",273],["T_OBJECT_OPERATOR","->",273],["T_STRING","_field",273],["T_WHITESPACE"," ",273],["T_IS_NOT_IDENTICAL","!==",273],["T_WHITESPACE"," ",273],["T_STRING","null",273],")",["T_WHITESPACE"," ",273],"{",["T_WHITESPACE","\n            ",273],["T_VARIABLE","$query",274],["T_WHITESPACE"," ",274],"=",["T_WHITESPACE"," ",274],["T_VARIABLE","$this",274],["T_OBJECT_OPERATOR","->",274],["T_STRING","_field",274],["T_WHITESPACE"," ",274],".",["T_WHITESPACE"," ",274],["T_CONSTANT_ENCAPSED_STRING","':'",274],";",["T_WHITESPACE","\n        ",274],"}",["T_WHITESPACE"," ",275],["T_ELSE","else",275],["T_WHITESPACE"," ",275],"{",["T_WHITESPACE","\n            ",275],["T_VARIABLE","$query",276],["T_WHITESPACE"," ",276],"=",["T_WHITESPACE"," ",276],["T_CONSTANT_ENCAPSED_STRING","''",276],";",["T_WHITESPACE","\n        ",276],"}",["T_WHITESPACE","\n\n        ",277],["T_VARIABLE","$query",279],["T_WHITESPACE"," ",279],["T_CONCAT_EQUAL",".=",279],["T_WHITESPACE"," ",279],["T_VARIABLE","$this",279],["T_OBJECT_OPERATOR","->",279],["T_STRING","_word",279],";",["T_WHITESPACE","\n\n        ",279],["T_IF","if",281],["T_WHITESPACE"," ",281],"(",["T_VARIABLE","$this",281],["T_OBJECT_OPERATOR","->",281],["T_STRING","getBoost",281],"(",")",["T_WHITESPACE"," ",281],["T_IS_NOT_EQUAL","!=",281],["T_WHITESPACE"," ",281],["T_LNUMBER","1",281],")",["T_WHITESPACE"," ",281],"{",["T_WHITESPACE","\n            ",281],["T_VARIABLE","$query",282],["T_WHITESPACE"," ",282],["T_CONCAT_EQUAL",".=",282],["T_WHITESPACE"," ",282],["T_CONSTANT_ENCAPSED_STRING","'^'",282],["T_WHITESPACE"," ",282],".",["T_WHITESPACE"," ",282],["T_STRING","round",282],"(",["T_VARIABLE","$this",282],["T_OBJECT_OPERATOR","->",282],["T_STRING","getBoost",282],"(",")",",",["T_WHITESPACE"," ",282],["T_LNUMBER","4",282],")",";",["T_WHITESPACE","\n        ",282],"}",["T_WHITESPACE","\n\n        ",283],["T_RETURN","return",285],["T_WHITESPACE"," ",285],["T_VARIABLE","$query",285],";",["T_WHITESPACE","\n    ",285],"}",["T_WHITESPACE","\n",286],"}",["T_WHITESPACE","\n",287]]
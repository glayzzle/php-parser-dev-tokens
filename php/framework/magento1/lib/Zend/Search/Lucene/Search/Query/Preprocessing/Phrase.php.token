[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Zend Framework\n *\n * LICENSE\n *\n * This source file is subject to the new BSD license that is bundled\n * with this package in the file LICENSE.txt.\n * It is also available through the world-wide-web at this URL:\n * http:\/\/framework.zend.com\/license\/new-bsd\n * If you did not receive a copy of the license and are unable to\n * obtain it through the world-wide-web, please send an email\n * to license@zend.com so we can send you a copy immediately.\n *\n * @category   Zend\n * @package    Zend_Search_Lucene\n * @subpackage Search\n * @copyright  Copyright (c) 2005-2015 Zend Technologies USA Inc. (http:\/\/www.zend.com)\n * @license    http:\/\/framework.zend.com\/license\/new-bsd     New BSD License\n * @version    $Id$\n *\/",2],["T_WHITESPACE","\n\n\n",21],["T_DOC_COMMENT","\/** Zend_Search_Lucene_Search_Query_Processing *\/",24],["T_WHITESPACE","\n",24],["T_COMMENT","#require_once 'Zend\/Search\/Lucene\/Search\/Query\/Preprocessing.php';\n",25],["T_WHITESPACE","\n",26],["T_DOC_COMMENT","\/**\n * It's an internal abstract class intended to finalize ase a query processing after query parsing.\n * This type of query is not actually involved into query execution.\n *\n * @category   Zend\n * @package    Zend_Search_Lucene\n * @subpackage Search\n * @internal\n * @copyright  Copyright (c) 2005-2015 Zend Technologies USA Inc. (http:\/\/www.zend.com)\n * @license    http:\/\/framework.zend.com\/license\/new-bsd     New BSD License\n *\/",27],["T_WHITESPACE","\n",37],["T_CLASS","class",38],["T_WHITESPACE"," ",38],["T_STRING","Zend_Search_Lucene_Search_Query_Preprocessing_Phrase",38],["T_WHITESPACE"," ",38],["T_EXTENDS","extends",38],["T_WHITESPACE"," ",38],["T_STRING","Zend_Search_Lucene_Search_Query_Preprocessing",38],["T_WHITESPACE","\n",38],"{",["T_WHITESPACE","\n    ",39],["T_DOC_COMMENT","\/**\n     * Phrase to find.\n     *\n     * @var string\n     *\/",40],["T_WHITESPACE","\n    ",44],["T_PRIVATE","private",45],["T_WHITESPACE"," ",45],["T_VARIABLE","$_phrase",45],";",["T_WHITESPACE","\n\n    ",45],["T_DOC_COMMENT","\/**\n     * Phrase encoding (field name is always provided using UTF-8 encoding since it may be retrieved from index).\n     *\n     * @var string\n     *\/",47],["T_WHITESPACE","\n    ",51],["T_PRIVATE","private",52],["T_WHITESPACE"," ",52],["T_VARIABLE","$_phraseEncoding",52],";",["T_WHITESPACE","\n\n\n    ",52],["T_DOC_COMMENT","\/**\n     * Field name.\n     *\n     * @var string\n     *\/",55],["T_WHITESPACE","\n    ",59],["T_PRIVATE","private",60],["T_WHITESPACE"," ",60],["T_VARIABLE","$_field",60],";",["T_WHITESPACE","\n\n    ",60],["T_DOC_COMMENT","\/**\n     * Sets the number of other words permitted between words in query phrase.\n     * If zero, then this is an exact phrase search.  For larger values this works\n     * like a WITHIN or NEAR operator.\n     *\n     * The slop is in fact an edit-distance, where the units correspond to\n     * moves of terms in the query phrase out of position.  For example, to switch\n     * the order of two words requires two moves (the first move places the words\n     * atop one another), so to permit re-orderings of phrases, the slop must be\n     * at least two.\n     * More exact matches are scored higher than sloppier matches, thus search\n     * results are sorted by exactness.\n     *\n     * The slop is zero by default, requiring exact matches.\n     *\n     * @var integer\n     *\/",62],["T_WHITESPACE","\n    ",78],["T_PRIVATE","private",79],["T_WHITESPACE"," ",79],["T_VARIABLE","$_slop",79],";",["T_WHITESPACE","\n\n    ",79],["T_DOC_COMMENT","\/**\n     * Class constructor.  Create a new preprocessing object for prase query.\n     *\n     * @param string $phrase          Phrase to search.\n     * @param string $phraseEncoding  Phrase encoding.\n     * @param string $fieldName       Field name.\n     *\/",81],["T_WHITESPACE","\n    ",87],["T_PUBLIC","public",88],["T_WHITESPACE"," ",88],["T_FUNCTION","function",88],["T_WHITESPACE"," ",88],["T_STRING","__construct",88],"(",["T_VARIABLE","$phrase",88],",",["T_WHITESPACE"," ",88],["T_VARIABLE","$phraseEncoding",88],",",["T_WHITESPACE"," ",88],["T_VARIABLE","$fieldName",88],")",["T_WHITESPACE","\n    ",88],"{",["T_WHITESPACE","\n        ",89],["T_VARIABLE","$this",90],["T_OBJECT_OPERATOR","->",90],["T_STRING","_phrase",90],["T_WHITESPACE","         ",90],"=",["T_WHITESPACE"," ",90],["T_VARIABLE","$phrase",90],";",["T_WHITESPACE","\n        ",90],["T_VARIABLE","$this",91],["T_OBJECT_OPERATOR","->",91],["T_STRING","_phraseEncoding",91],["T_WHITESPACE"," ",91],"=",["T_WHITESPACE"," ",91],["T_VARIABLE","$phraseEncoding",91],";",["T_WHITESPACE","\n        ",91],["T_VARIABLE","$this",92],["T_OBJECT_OPERATOR","->",92],["T_STRING","_field",92],["T_WHITESPACE","          ",92],"=",["T_WHITESPACE"," ",92],["T_VARIABLE","$fieldName",92],";",["T_WHITESPACE","\n    ",92],"}",["T_WHITESPACE","\n\n    ",93],["T_DOC_COMMENT","\/**\n     * Set slop\n     *\n     * @param integer $slop\n     *\/",95],["T_WHITESPACE","\n    ",99],["T_PUBLIC","public",100],["T_WHITESPACE"," ",100],["T_FUNCTION","function",100],["T_WHITESPACE"," ",100],["T_STRING","setSlop",100],"(",["T_VARIABLE","$slop",100],")",["T_WHITESPACE","\n    ",100],"{",["T_WHITESPACE","\n        ",101],["T_VARIABLE","$this",102],["T_OBJECT_OPERATOR","->",102],["T_STRING","_slop",102],["T_WHITESPACE"," ",102],"=",["T_WHITESPACE"," ",102],["T_VARIABLE","$slop",102],";",["T_WHITESPACE","\n    ",102],"}",["T_WHITESPACE","\n\n\n    ",103],["T_DOC_COMMENT","\/**\n     * Get slop\n     *\n     * @return integer\n     *\/",106],["T_WHITESPACE","\n    ",110],["T_PUBLIC","public",111],["T_WHITESPACE"," ",111],["T_FUNCTION","function",111],["T_WHITESPACE"," ",111],["T_STRING","getSlop",111],"(",")",["T_WHITESPACE","\n    ",111],"{",["T_WHITESPACE","\n        ",112],["T_RETURN","return",113],["T_WHITESPACE"," ",113],["T_VARIABLE","$this",113],["T_OBJECT_OPERATOR","->",113],["T_STRING","_slop",113],";",["T_WHITESPACE","\n    ",113],"}",["T_WHITESPACE","\n\n    ",114],["T_DOC_COMMENT","\/**\n     * Re-write query into primitive queries in the context of specified index\n     *\n     * @param Zend_Search_Lucene_Interface $index\n     * @return Zend_Search_Lucene_Search_Query\n     *\/",116],["T_WHITESPACE","\n    ",121],["T_PUBLIC","public",122],["T_WHITESPACE"," ",122],["T_FUNCTION","function",122],["T_WHITESPACE"," ",122],["T_STRING","rewrite",122],"(",["T_STRING","Zend_Search_Lucene_Interface",122],["T_WHITESPACE"," ",122],["T_VARIABLE","$index",122],")",["T_WHITESPACE","\n    ",122],"{",["T_WHITESPACE","\n",123],["T_COMMENT","\/\/ Allow to use wildcards within phrases\n",124],["T_COMMENT","\/\/ They are either removed by text analyzer or used as a part of keyword for keyword fields\n",125],["T_COMMENT","\/\/\n",126],["T_COMMENT","\/\/        if (strpos($this->_phrase, '?') !== false || strpos($this->_phrase, '*') !== false) {\n",127],["T_COMMENT","\/\/            #require_once 'Zend\/Search\/Lucene\/Search\/QueryParserException.php';\n",128],["T_COMMENT","\/\/            throw new Zend_Search_Lucene_Search_QueryParserException('Wildcards are only allowed in a single terms.');\n",129],["T_COMMENT","\/\/        }\n",130],["T_WHITESPACE","\n        ",131],["T_COMMENT","\/\/ Split query into subqueries if field name is not specified\n",132],["T_WHITESPACE","        ",133],["T_IF","if",133],["T_WHITESPACE"," ",133],"(",["T_VARIABLE","$this",133],["T_OBJECT_OPERATOR","->",133],["T_STRING","_field",133],["T_WHITESPACE"," ",133],["T_IS_IDENTICAL","===",133],["T_WHITESPACE"," ",133],["T_STRING","null",133],")",["T_WHITESPACE"," ",133],"{",["T_WHITESPACE","\n            ",133],["T_COMMENT","#require_once 'Zend\/Search\/Lucene\/Search\/Query\/Boolean.php';\n",134],["T_WHITESPACE","            ",135],["T_VARIABLE","$query",135],["T_WHITESPACE"," ",135],"=",["T_WHITESPACE"," ",135],["T_NEW","new",135],["T_WHITESPACE"," ",135],["T_STRING","Zend_Search_Lucene_Search_Query_Boolean",135],"(",")",";",["T_WHITESPACE","\n            ",135],["T_VARIABLE","$query",136],["T_OBJECT_OPERATOR","->",136],["T_STRING","setBoost",136],"(",["T_VARIABLE","$this",136],["T_OBJECT_OPERATOR","->",136],["T_STRING","getBoost",136],"(",")",")",";",["T_WHITESPACE","\n\n            ",136],["T_COMMENT","#require_once 'Zend\/Search\/Lucene.php';\n",138],["T_WHITESPACE","            ",139],["T_IF","if",139],["T_WHITESPACE"," ",139],"(",["T_STRING","Zend_Search_Lucene",139],["T_DOUBLE_COLON","::",139],["T_STRING","getDefaultSearchField",139],"(",")",["T_WHITESPACE"," ",139],["T_IS_IDENTICAL","===",139],["T_WHITESPACE"," ",139],["T_STRING","null",139],")",["T_WHITESPACE"," ",139],"{",["T_WHITESPACE","\n                ",139],["T_VARIABLE","$searchFields",140],["T_WHITESPACE"," ",140],"=",["T_WHITESPACE"," ",140],["T_VARIABLE","$index",140],["T_OBJECT_OPERATOR","->",140],["T_STRING","getFieldNames",140],"(",["T_STRING","true",140],")",";",["T_WHITESPACE","\n            ",140],"}",["T_WHITESPACE"," ",141],["T_ELSE","else",141],["T_WHITESPACE"," ",141],"{",["T_WHITESPACE","\n                ",141],["T_VARIABLE","$searchFields",142],["T_WHITESPACE"," ",142],"=",["T_WHITESPACE"," ",142],["T_ARRAY","array",142],"(",["T_STRING","Zend_Search_Lucene",142],["T_DOUBLE_COLON","::",142],["T_STRING","getDefaultSearchField",142],"(",")",")",";",["T_WHITESPACE","\n            ",142],"}",["T_WHITESPACE","\n\n            ",143],["T_FOREACH","foreach",145],["T_WHITESPACE"," ",145],"(",["T_VARIABLE","$searchFields",145],["T_WHITESPACE"," ",145],["T_AS","as",145],["T_WHITESPACE"," ",145],["T_VARIABLE","$fieldName",145],")",["T_WHITESPACE"," ",145],"{",["T_WHITESPACE","\n                ",145],["T_VARIABLE","$subquery",146],["T_WHITESPACE"," ",146],"=",["T_WHITESPACE"," ",146],["T_NEW","new",146],["T_WHITESPACE"," ",146],["T_STRING","Zend_Search_Lucene_Search_Query_Preprocessing_Phrase",146],"(",["T_VARIABLE","$this",146],["T_OBJECT_OPERATOR","->",146],["T_STRING","_phrase",146],",",["T_WHITESPACE","\n                                                                                     ",146],["T_VARIABLE","$this",147],["T_OBJECT_OPERATOR","->",147],["T_STRING","_phraseEncoding",147],",",["T_WHITESPACE","\n                                                                                     ",147],["T_VARIABLE","$fieldName",148],")",";",["T_WHITESPACE","\n                ",148],["T_VARIABLE","$subquery",149],["T_OBJECT_OPERATOR","->",149],["T_STRING","setSlop",149],"(",["T_VARIABLE","$this",149],["T_OBJECT_OPERATOR","->",149],["T_STRING","getSlop",149],"(",")",")",";",["T_WHITESPACE","\n\n                ",149],["T_VARIABLE","$query",151],["T_OBJECT_OPERATOR","->",151],["T_STRING","addSubquery",151],"(",["T_VARIABLE","$subquery",151],["T_OBJECT_OPERATOR","->",151],["T_STRING","rewrite",151],"(",["T_VARIABLE","$index",151],")",")",";",["T_WHITESPACE","\n            ",151],"}",["T_WHITESPACE","\n\n            ",152],["T_VARIABLE","$this",154],["T_OBJECT_OPERATOR","->",154],["T_STRING","_matches",154],["T_WHITESPACE"," ",154],"=",["T_WHITESPACE"," ",154],["T_VARIABLE","$query",154],["T_OBJECT_OPERATOR","->",154],["T_STRING","getQueryTerms",154],"(",")",";",["T_WHITESPACE","\n            ",154],["T_RETURN","return",155],["T_WHITESPACE"," ",155],["T_VARIABLE","$query",155],";",["T_WHITESPACE","\n        ",155],"}",["T_WHITESPACE","\n\n        ",156],["T_COMMENT","\/\/ Recognize exact term matching (it corresponds to Keyword fields stored in the index)\n",158],["T_WHITESPACE","        ",159],["T_COMMENT","\/\/ encoding is not used since we expect binary matching\n",159],["T_WHITESPACE","        ",160],["T_COMMENT","#require_once 'Zend\/Search\/Lucene\/Index\/Term.php';\n",160],["T_WHITESPACE","        ",161],["T_VARIABLE","$term",161],["T_WHITESPACE"," ",161],"=",["T_WHITESPACE"," ",161],["T_NEW","new",161],["T_WHITESPACE"," ",161],["T_STRING","Zend_Search_Lucene_Index_Term",161],"(",["T_VARIABLE","$this",161],["T_OBJECT_OPERATOR","->",161],["T_STRING","_phrase",161],",",["T_WHITESPACE"," ",161],["T_VARIABLE","$this",161],["T_OBJECT_OPERATOR","->",161],["T_STRING","_field",161],")",";",["T_WHITESPACE","\n        ",161],["T_IF","if",162],["T_WHITESPACE"," ",162],"(",["T_VARIABLE","$index",162],["T_OBJECT_OPERATOR","->",162],["T_STRING","hasTerm",162],"(",["T_VARIABLE","$term",162],")",")",["T_WHITESPACE"," ",162],"{",["T_WHITESPACE","\n            ",162],["T_COMMENT","#require_once 'Zend\/Search\/Lucene\/Search\/Query\/Term.php';\n",163],["T_WHITESPACE","            ",164],["T_VARIABLE","$query",164],["T_WHITESPACE"," ",164],"=",["T_WHITESPACE"," ",164],["T_NEW","new",164],["T_WHITESPACE"," ",164],["T_STRING","Zend_Search_Lucene_Search_Query_Term",164],"(",["T_VARIABLE","$term",164],")",";",["T_WHITESPACE","\n            ",164],["T_VARIABLE","$query",165],["T_OBJECT_OPERATOR","->",165],["T_STRING","setBoost",165],"(",["T_VARIABLE","$this",165],["T_OBJECT_OPERATOR","->",165],["T_STRING","getBoost",165],"(",")",")",";",["T_WHITESPACE","\n\n            ",165],["T_VARIABLE","$this",167],["T_OBJECT_OPERATOR","->",167],["T_STRING","_matches",167],["T_WHITESPACE"," ",167],"=",["T_WHITESPACE"," ",167],["T_VARIABLE","$query",167],["T_OBJECT_OPERATOR","->",167],["T_STRING","getQueryTerms",167],"(",")",";",["T_WHITESPACE","\n            ",167],["T_RETURN","return",168],["T_WHITESPACE"," ",168],["T_VARIABLE","$query",168],";",["T_WHITESPACE","\n        ",168],"}",["T_WHITESPACE","\n\n\n        ",169],["T_COMMENT","\/\/ tokenize phrase using current analyzer and process it as a phrase query\n",172],["T_WHITESPACE","        ",173],["T_COMMENT","#require_once 'Zend\/Search\/Lucene\/Analysis\/Analyzer.php';\n",173],["T_WHITESPACE","        ",174],["T_VARIABLE","$tokens",174],["T_WHITESPACE"," ",174],"=",["T_WHITESPACE"," ",174],["T_STRING","Zend_Search_Lucene_Analysis_Analyzer",174],["T_DOUBLE_COLON","::",174],["T_STRING","getDefault",174],"(",")",["T_OBJECT_OPERATOR","->",174],["T_STRING","tokenize",174],"(",["T_VARIABLE","$this",174],["T_OBJECT_OPERATOR","->",174],["T_STRING","_phrase",174],",",["T_WHITESPACE"," ",174],["T_VARIABLE","$this",174],["T_OBJECT_OPERATOR","->",174],["T_STRING","_phraseEncoding",174],")",";",["T_WHITESPACE","\n\n        ",174],["T_IF","if",176],["T_WHITESPACE"," ",176],"(",["T_STRING","count",176],"(",["T_VARIABLE","$tokens",176],")",["T_WHITESPACE"," ",176],["T_IS_EQUAL","==",176],["T_WHITESPACE"," ",176],["T_LNUMBER","0",176],")",["T_WHITESPACE"," ",176],"{",["T_WHITESPACE","\n            ",176],["T_VARIABLE","$this",177],["T_OBJECT_OPERATOR","->",177],["T_STRING","_matches",177],["T_WHITESPACE"," ",177],"=",["T_WHITESPACE"," ",177],["T_ARRAY","array",177],"(",")",";",["T_WHITESPACE","\n            ",177],["T_COMMENT","#require_once 'Zend\/Search\/Lucene\/Search\/Query\/Insignificant.php';\n",178],["T_WHITESPACE","            ",179],["T_RETURN","return",179],["T_WHITESPACE"," ",179],["T_NEW","new",179],["T_WHITESPACE"," ",179],["T_STRING","Zend_Search_Lucene_Search_Query_Insignificant",179],"(",")",";",["T_WHITESPACE","\n        ",179],"}",["T_WHITESPACE","\n\n        ",180],["T_IF","if",182],["T_WHITESPACE"," ",182],"(",["T_STRING","count",182],"(",["T_VARIABLE","$tokens",182],")",["T_WHITESPACE"," ",182],["T_IS_EQUAL","==",182],["T_WHITESPACE"," ",182],["T_LNUMBER","1",182],")",["T_WHITESPACE"," ",182],"{",["T_WHITESPACE","\n            ",182],["T_COMMENT","#require_once 'Zend\/Search\/Lucene\/Index\/Term.php';\n",183],["T_WHITESPACE","            ",184],["T_VARIABLE","$term",184],["T_WHITESPACE","  ",184],"=",["T_WHITESPACE"," ",184],["T_NEW","new",184],["T_WHITESPACE"," ",184],["T_STRING","Zend_Search_Lucene_Index_Term",184],"(",["T_VARIABLE","$tokens",184],"[",["T_LNUMBER","0",184],"]",["T_OBJECT_OPERATOR","->",184],["T_STRING","getTermText",184],"(",")",",",["T_WHITESPACE"," ",184],["T_VARIABLE","$this",184],["T_OBJECT_OPERATOR","->",184],["T_STRING","_field",184],")",";",["T_WHITESPACE","\n            ",184],["T_COMMENT","#require_once 'Zend\/Search\/Lucene\/Search\/Query\/Term.php';\n",185],["T_WHITESPACE","            ",186],["T_VARIABLE","$query",186],["T_WHITESPACE"," ",186],"=",["T_WHITESPACE"," ",186],["T_NEW","new",186],["T_WHITESPACE"," ",186],["T_STRING","Zend_Search_Lucene_Search_Query_Term",186],"(",["T_VARIABLE","$term",186],")",";",["T_WHITESPACE","\n            ",186],["T_VARIABLE","$query",187],["T_OBJECT_OPERATOR","->",187],["T_STRING","setBoost",187],"(",["T_VARIABLE","$this",187],["T_OBJECT_OPERATOR","->",187],["T_STRING","getBoost",187],"(",")",")",";",["T_WHITESPACE","\n\n            ",187],["T_VARIABLE","$this",189],["T_OBJECT_OPERATOR","->",189],["T_STRING","_matches",189],["T_WHITESPACE"," ",189],"=",["T_WHITESPACE"," ",189],["T_VARIABLE","$query",189],["T_OBJECT_OPERATOR","->",189],["T_STRING","getQueryTerms",189],"(",")",";",["T_WHITESPACE","\n            ",189],["T_RETURN","return",190],["T_WHITESPACE"," ",190],["T_VARIABLE","$query",190],";",["T_WHITESPACE","\n        ",190],"}",["T_WHITESPACE","\n\n        ",191],["T_COMMENT","\/\/It's non-trivial phrase query\n",193],["T_WHITESPACE","        ",194],["T_VARIABLE","$position",194],["T_WHITESPACE"," ",194],"=",["T_WHITESPACE"," ",194],"-",["T_LNUMBER","1",194],";",["T_WHITESPACE","\n        ",194],["T_COMMENT","#require_once 'Zend\/Search\/Lucene\/Search\/Query\/Phrase.php';\n",195],["T_WHITESPACE","        ",196],["T_VARIABLE","$query",196],["T_WHITESPACE"," ",196],"=",["T_WHITESPACE"," ",196],["T_NEW","new",196],["T_WHITESPACE"," ",196],["T_STRING","Zend_Search_Lucene_Search_Query_Phrase",196],"(",")",";",["T_WHITESPACE","\n        ",196],["T_COMMENT","#require_once 'Zend\/Search\/Lucene\/Index\/Term.php';\n",197],["T_WHITESPACE","        ",198],["T_FOREACH","foreach",198],["T_WHITESPACE"," ",198],"(",["T_VARIABLE","$tokens",198],["T_WHITESPACE"," ",198],["T_AS","as",198],["T_WHITESPACE"," ",198],["T_VARIABLE","$token",198],")",["T_WHITESPACE"," ",198],"{",["T_WHITESPACE","\n            ",198],["T_VARIABLE","$position",199],["T_WHITESPACE"," ",199],["T_PLUS_EQUAL","+=",199],["T_WHITESPACE"," ",199],["T_VARIABLE","$token",199],["T_OBJECT_OPERATOR","->",199],["T_STRING","getPositionIncrement",199],"(",")",";",["T_WHITESPACE","\n            ",199],["T_VARIABLE","$term",200],["T_WHITESPACE"," ",200],"=",["T_WHITESPACE"," ",200],["T_NEW","new",200],["T_WHITESPACE"," ",200],["T_STRING","Zend_Search_Lucene_Index_Term",200],"(",["T_VARIABLE","$token",200],["T_OBJECT_OPERATOR","->",200],["T_STRING","getTermText",200],"(",")",",",["T_WHITESPACE"," ",200],["T_VARIABLE","$this",200],["T_OBJECT_OPERATOR","->",200],["T_STRING","_field",200],")",";",["T_WHITESPACE","\n            ",200],["T_VARIABLE","$query",201],["T_OBJECT_OPERATOR","->",201],["T_STRING","addTerm",201],"(",["T_VARIABLE","$term",201],",",["T_WHITESPACE"," ",201],["T_VARIABLE","$position",201],")",";",["T_WHITESPACE","\n            ",201],["T_VARIABLE","$query",202],["T_OBJECT_OPERATOR","->",202],["T_STRING","setSlop",202],"(",["T_VARIABLE","$this",202],["T_OBJECT_OPERATOR","->",202],["T_STRING","getSlop",202],"(",")",")",";",["T_WHITESPACE","\n        ",202],"}",["T_WHITESPACE","\n        ",203],["T_VARIABLE","$this",204],["T_OBJECT_OPERATOR","->",204],["T_STRING","_matches",204],["T_WHITESPACE"," ",204],"=",["T_WHITESPACE"," ",204],["T_VARIABLE","$query",204],["T_OBJECT_OPERATOR","->",204],["T_STRING","getQueryTerms",204],"(",")",";",["T_WHITESPACE","\n        ",204],["T_RETURN","return",205],["T_WHITESPACE"," ",205],["T_VARIABLE","$query",205],";",["T_WHITESPACE","\n    ",205],"}",["T_WHITESPACE","\n\n    ",206],["T_DOC_COMMENT","\/**\n     * Query specific matches highlighting\n     *\n     * @param Zend_Search_Lucene_Search_Highlighter_Interface $highlighter  Highlighter object (also contains doc for highlighting)\n     *\/",208],["T_WHITESPACE","\n    ",212],["T_PROTECTED","protected",213],["T_WHITESPACE"," ",213],["T_FUNCTION","function",213],["T_WHITESPACE"," ",213],["T_STRING","_highlightMatches",213],"(",["T_STRING","Zend_Search_Lucene_Search_Highlighter_Interface",213],["T_WHITESPACE"," ",213],["T_VARIABLE","$highlighter",213],")",["T_WHITESPACE","\n    ",213],"{",["T_WHITESPACE","\n        ",214],["T_DOC_COMMENT","\/** Skip fields detection. We don't need it, since we expect all fields presented in the HTML body and don't differentiate them *\/",215],["T_WHITESPACE","\n\n        ",215],["T_DOC_COMMENT","\/** Skip exact term matching recognition, keyword fields highlighting is not supported *\/",217],["T_WHITESPACE","\n\n        ",217],["T_DOC_COMMENT","\/** Skip wildcard queries recognition. Supported wildcards are removed by text analyzer *\/",219],["T_WHITESPACE","\n\n\n        ",219],["T_COMMENT","\/\/ tokenize phrase using current analyzer and process it as a phrase query\n",222],["T_WHITESPACE","        ",223],["T_COMMENT","#require_once 'Zend\/Search\/Lucene\/Analysis\/Analyzer.php';\n",223],["T_WHITESPACE","        ",224],["T_VARIABLE","$tokens",224],["T_WHITESPACE"," ",224],"=",["T_WHITESPACE"," ",224],["T_STRING","Zend_Search_Lucene_Analysis_Analyzer",224],["T_DOUBLE_COLON","::",224],["T_STRING","getDefault",224],"(",")",["T_OBJECT_OPERATOR","->",224],["T_STRING","tokenize",224],"(",["T_VARIABLE","$this",224],["T_OBJECT_OPERATOR","->",224],["T_STRING","_phrase",224],",",["T_WHITESPACE"," ",224],["T_VARIABLE","$this",224],["T_OBJECT_OPERATOR","->",224],["T_STRING","_phraseEncoding",224],")",";",["T_WHITESPACE","\n\n        ",224],["T_IF","if",226],["T_WHITESPACE"," ",226],"(",["T_STRING","count",226],"(",["T_VARIABLE","$tokens",226],")",["T_WHITESPACE"," ",226],["T_IS_EQUAL","==",226],["T_WHITESPACE"," ",226],["T_LNUMBER","0",226],")",["T_WHITESPACE"," ",226],"{",["T_WHITESPACE","\n            ",226],["T_COMMENT","\/\/ Do nothing\n",227],["T_WHITESPACE","            ",228],["T_RETURN","return",228],";",["T_WHITESPACE","\n        ",228],"}",["T_WHITESPACE","\n\n        ",229],["T_IF","if",231],["T_WHITESPACE"," ",231],"(",["T_STRING","count",231],"(",["T_VARIABLE","$tokens",231],")",["T_WHITESPACE"," ",231],["T_IS_EQUAL","==",231],["T_WHITESPACE"," ",231],["T_LNUMBER","1",231],")",["T_WHITESPACE"," ",231],"{",["T_WHITESPACE","\n            ",231],["T_VARIABLE","$highlighter",232],["T_OBJECT_OPERATOR","->",232],["T_STRING","highlight",232],"(",["T_VARIABLE","$tokens",232],"[",["T_LNUMBER","0",232],"]",["T_OBJECT_OPERATOR","->",232],["T_STRING","getTermText",232],"(",")",")",";",["T_WHITESPACE","\n            ",232],["T_RETURN","return",233],";",["T_WHITESPACE","\n        ",233],"}",["T_WHITESPACE","\n\n        ",234],["T_COMMENT","\/\/It's non-trivial phrase query\n",236],["T_WHITESPACE","        ",237],["T_VARIABLE","$words",237],["T_WHITESPACE"," ",237],"=",["T_WHITESPACE"," ",237],["T_ARRAY","array",237],"(",")",";",["T_WHITESPACE","\n        ",237],["T_FOREACH","foreach",238],["T_WHITESPACE"," ",238],"(",["T_VARIABLE","$tokens",238],["T_WHITESPACE"," ",238],["T_AS","as",238],["T_WHITESPACE"," ",238],["T_VARIABLE","$token",238],")",["T_WHITESPACE"," ",238],"{",["T_WHITESPACE","\n            ",238],["T_VARIABLE","$words",239],"[","]",["T_WHITESPACE"," ",239],"=",["T_WHITESPACE"," ",239],["T_VARIABLE","$token",239],["T_OBJECT_OPERATOR","->",239],["T_STRING","getTermText",239],"(",")",";",["T_WHITESPACE","\n        ",239],"}",["T_WHITESPACE","\n        ",240],["T_VARIABLE","$highlighter",241],["T_OBJECT_OPERATOR","->",241],["T_STRING","highlight",241],"(",["T_VARIABLE","$words",241],")",";",["T_WHITESPACE","\n    ",241],"}",["T_WHITESPACE","\n\n    ",242],["T_DOC_COMMENT","\/**\n     * Print a query\n     *\n     * @return string\n     *\/",244],["T_WHITESPACE","\n    ",248],["T_PUBLIC","public",249],["T_WHITESPACE"," ",249],["T_FUNCTION","function",249],["T_WHITESPACE"," ",249],["T_STRING","__toString",249],"(",")",["T_WHITESPACE","\n    ",249],"{",["T_WHITESPACE","\n        ",250],["T_COMMENT","\/\/ It's used only for query visualisation, so we don't care about characters escaping\n",251],["T_WHITESPACE","        ",252],["T_IF","if",252],["T_WHITESPACE"," ",252],"(",["T_VARIABLE","$this",252],["T_OBJECT_OPERATOR","->",252],["T_STRING","_field",252],["T_WHITESPACE"," ",252],["T_IS_NOT_IDENTICAL","!==",252],["T_WHITESPACE"," ",252],["T_STRING","null",252],")",["T_WHITESPACE"," ",252],"{",["T_WHITESPACE","\n            ",252],["T_VARIABLE","$query",253],["T_WHITESPACE"," ",253],"=",["T_WHITESPACE"," ",253],["T_VARIABLE","$this",253],["T_OBJECT_OPERATOR","->",253],["T_STRING","_field",253],["T_WHITESPACE"," ",253],".",["T_WHITESPACE"," ",253],["T_CONSTANT_ENCAPSED_STRING","':'",253],";",["T_WHITESPACE","\n        ",253],"}",["T_WHITESPACE"," ",254],["T_ELSE","else",254],["T_WHITESPACE"," ",254],"{",["T_WHITESPACE","\n            ",254],["T_VARIABLE","$query",255],["T_WHITESPACE"," ",255],"=",["T_WHITESPACE"," ",255],["T_CONSTANT_ENCAPSED_STRING","''",255],";",["T_WHITESPACE","\n        ",255],"}",["T_WHITESPACE","\n\n        ",256],["T_VARIABLE","$query",258],["T_WHITESPACE"," ",258],["T_CONCAT_EQUAL",".=",258],["T_WHITESPACE"," ",258],["T_CONSTANT_ENCAPSED_STRING","'\"'",258],["T_WHITESPACE"," ",258],".",["T_WHITESPACE"," ",258],["T_VARIABLE","$this",258],["T_OBJECT_OPERATOR","->",258],["T_STRING","_phrase",258],["T_WHITESPACE"," ",258],".",["T_WHITESPACE"," ",258],["T_CONSTANT_ENCAPSED_STRING","'\"'",258],";",["T_WHITESPACE","\n\n        ",258],["T_IF","if",260],["T_WHITESPACE"," ",260],"(",["T_VARIABLE","$this",260],["T_OBJECT_OPERATOR","->",260],["T_STRING","_slop",260],["T_WHITESPACE"," ",260],["T_IS_NOT_EQUAL","!=",260],["T_WHITESPACE"," ",260],["T_LNUMBER","0",260],")",["T_WHITESPACE"," ",260],"{",["T_WHITESPACE","\n            ",260],["T_VARIABLE","$query",261],["T_WHITESPACE"," ",261],["T_CONCAT_EQUAL",".=",261],["T_WHITESPACE"," ",261],["T_CONSTANT_ENCAPSED_STRING","'~'",261],["T_WHITESPACE"," ",261],".",["T_WHITESPACE"," ",261],["T_VARIABLE","$this",261],["T_OBJECT_OPERATOR","->",261],["T_STRING","_slop",261],";",["T_WHITESPACE","\n        ",261],"}",["T_WHITESPACE","\n\n        ",262],["T_IF","if",264],["T_WHITESPACE"," ",264],"(",["T_VARIABLE","$this",264],["T_OBJECT_OPERATOR","->",264],["T_STRING","getBoost",264],"(",")",["T_WHITESPACE"," ",264],["T_IS_NOT_EQUAL","!=",264],["T_WHITESPACE"," ",264],["T_LNUMBER","1",264],")",["T_WHITESPACE"," ",264],"{",["T_WHITESPACE","\n            ",264],["T_VARIABLE","$query",265],["T_WHITESPACE"," ",265],["T_CONCAT_EQUAL",".=",265],["T_WHITESPACE"," ",265],["T_CONSTANT_ENCAPSED_STRING","'^'",265],["T_WHITESPACE"," ",265],".",["T_WHITESPACE"," ",265],["T_STRING","round",265],"(",["T_VARIABLE","$this",265],["T_OBJECT_OPERATOR","->",265],["T_STRING","getBoost",265],"(",")",",",["T_WHITESPACE"," ",265],["T_LNUMBER","4",265],")",";",["T_WHITESPACE","\n        ",265],"}",["T_WHITESPACE","\n\n        ",266],["T_RETURN","return",268],["T_WHITESPACE"," ",268],["T_VARIABLE","$query",268],";",["T_WHITESPACE","\n    ",268],"}",["T_WHITESPACE","\n",269],"}",["T_WHITESPACE","\n",270]]
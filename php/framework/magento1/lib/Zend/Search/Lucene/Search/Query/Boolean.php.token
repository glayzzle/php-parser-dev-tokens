[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Zend Framework\n *\n * LICENSE\n *\n * This source file is subject to the new BSD license that is bundled\n * with this package in the file LICENSE.txt.\n * It is also available through the world-wide-web at this URL:\n * http:\/\/framework.zend.com\/license\/new-bsd\n * If you did not receive a copy of the license and are unable to\n * obtain it through the world-wide-web, please send an email\n * to license@zend.com so we can send you a copy immediately.\n *\n * @category   Zend\n * @package    Zend_Search_Lucene\n * @subpackage Search\n * @copyright  Copyright (c) 2005-2015 Zend Technologies USA Inc. (http:\/\/www.zend.com)\n * @license    http:\/\/framework.zend.com\/license\/new-bsd     New BSD License\n * @version    $Id$\n *\/",2],["T_WHITESPACE","\n\n\n",21],["T_DOC_COMMENT","\/** Zend_Search_Lucene_Search_Query *\/",24],["T_WHITESPACE","\n",24],["T_COMMENT","#require_once 'Zend\/Search\/Lucene\/Search\/Query.php';\n",25],["T_WHITESPACE","\n\n",26],["T_DOC_COMMENT","\/**\n * @category   Zend\n * @package    Zend_Search_Lucene\n * @subpackage Search\n * @copyright  Copyright (c) 2005-2015 Zend Technologies USA Inc. (http:\/\/www.zend.com)\n * @license    http:\/\/framework.zend.com\/license\/new-bsd     New BSD License\n *\/",28],["T_WHITESPACE","\n",34],["T_CLASS","class",35],["T_WHITESPACE"," ",35],["T_STRING","Zend_Search_Lucene_Search_Query_Boolean",35],["T_WHITESPACE"," ",35],["T_EXTENDS","extends",35],["T_WHITESPACE"," ",35],["T_STRING","Zend_Search_Lucene_Search_Query",35],["T_WHITESPACE","\n",35],"{",["T_WHITESPACE","\n\n    ",36],["T_DOC_COMMENT","\/**\n     * Subqueries\n     * Array of Zend_Search_Lucene_Search_Query\n     *\n     * @var array\n     *\/",38],["T_WHITESPACE","\n    ",43],["T_PRIVATE","private",44],["T_WHITESPACE"," ",44],["T_VARIABLE","$_subqueries",44],["T_WHITESPACE"," ",44],"=",["T_WHITESPACE"," ",44],["T_ARRAY","array",44],"(",")",";",["T_WHITESPACE","\n\n    ",44],["T_DOC_COMMENT","\/**\n     * Subqueries signs.\n     * If true then subquery is required.\n     * If false then subquery is prohibited.\n     * If null then subquery is neither prohibited, nor required\n     *\n     * If array is null then all subqueries are required\n     *\n     * @var array\n     *\/",46],["T_WHITESPACE","\n    ",55],["T_PRIVATE","private",56],["T_WHITESPACE"," ",56],["T_VARIABLE","$_signs",56],["T_WHITESPACE"," ",56],"=",["T_WHITESPACE"," ",56],["T_ARRAY","array",56],"(",")",";",["T_WHITESPACE","\n\n    ",56],["T_DOC_COMMENT","\/**\n     * Result vector.\n     *\n     * @var array\n     *\/",58],["T_WHITESPACE","\n    ",62],["T_PRIVATE","private",63],["T_WHITESPACE"," ",63],["T_VARIABLE","$_resVector",63],["T_WHITESPACE"," ",63],"=",["T_WHITESPACE"," ",63],["T_STRING","null",63],";",["T_WHITESPACE","\n\n    ",63],["T_DOC_COMMENT","\/**\n     * A score factor based on the fraction of all query subqueries\n     * that a document contains.\n     * float for conjunction queries\n     * array of float for non conjunction queries\n     *\n     * @var mixed\n     *\/",65],["T_WHITESPACE","\n    ",72],["T_PRIVATE","private",73],["T_WHITESPACE"," ",73],["T_VARIABLE","$_coord",73],["T_WHITESPACE"," ",73],"=",["T_WHITESPACE"," ",73],["T_STRING","null",73],";",["T_WHITESPACE","\n\n\n    ",73],["T_DOC_COMMENT","\/**\n     * Class constructor.  Create a new Boolean query object.\n     *\n     * if $signs array is omitted then all subqueries are required\n     * it differs from addSubquery() behavior, but should never be used\n     *\n     * @param array $subqueries    Array of Zend_Search_Search_Query objects\n     * @param array $signs    Array of signs.  Sign is boolean|null.\n     * @return void\n     *\/",76],["T_WHITESPACE","\n    ",85],["T_PUBLIC","public",86],["T_WHITESPACE"," ",86],["T_FUNCTION","function",86],["T_WHITESPACE"," ",86],["T_STRING","__construct",86],"(",["T_VARIABLE","$subqueries",86],["T_WHITESPACE"," ",86],"=",["T_WHITESPACE"," ",86],["T_STRING","null",86],",",["T_WHITESPACE"," ",86],["T_VARIABLE","$signs",86],["T_WHITESPACE"," ",86],"=",["T_WHITESPACE"," ",86],["T_STRING","null",86],")",["T_WHITESPACE","\n    ",86],"{",["T_WHITESPACE","\n        ",87],["T_IF","if",88],["T_WHITESPACE"," ",88],"(",["T_STRING","is_array",88],"(",["T_VARIABLE","$subqueries",88],")",")",["T_WHITESPACE"," ",88],"{",["T_WHITESPACE","\n            ",88],["T_VARIABLE","$this",89],["T_OBJECT_OPERATOR","->",89],["T_STRING","_subqueries",89],["T_WHITESPACE"," ",89],"=",["T_WHITESPACE"," ",89],["T_VARIABLE","$subqueries",89],";",["T_WHITESPACE","\n\n            ",89],["T_VARIABLE","$this",91],["T_OBJECT_OPERATOR","->",91],["T_STRING","_signs",91],["T_WHITESPACE"," ",91],"=",["T_WHITESPACE"," ",91],["T_STRING","null",91],";",["T_WHITESPACE","\n            ",91],["T_COMMENT","\/\/ Check if all subqueries are required\n",92],["T_WHITESPACE","            ",93],["T_IF","if",93],["T_WHITESPACE"," ",93],"(",["T_STRING","is_array",93],"(",["T_VARIABLE","$signs",93],")",")",["T_WHITESPACE"," ",93],"{",["T_WHITESPACE","\n                ",93],["T_FOREACH","foreach",94],["T_WHITESPACE"," ",94],"(",["T_VARIABLE","$signs",94],["T_WHITESPACE"," ",94],["T_AS","as",94],["T_WHITESPACE"," ",94],["T_VARIABLE","$sign",94],["T_WHITESPACE"," ",94],")",["T_WHITESPACE"," ",94],"{",["T_WHITESPACE","\n                    ",94],["T_IF","if",95],["T_WHITESPACE"," ",95],"(",["T_VARIABLE","$sign",95],["T_WHITESPACE"," ",95],["T_IS_NOT_IDENTICAL","!==",95],["T_WHITESPACE"," ",95],["T_STRING","true",95],")",["T_WHITESPACE"," ",95],"{",["T_WHITESPACE","\n                        ",95],["T_VARIABLE","$this",96],["T_OBJECT_OPERATOR","->",96],["T_STRING","_signs",96],["T_WHITESPACE"," ",96],"=",["T_WHITESPACE"," ",96],["T_VARIABLE","$signs",96],";",["T_WHITESPACE","\n                        ",96],["T_BREAK","break",97],";",["T_WHITESPACE","\n                    ",97],"}",["T_WHITESPACE","\n                ",98],"}",["T_WHITESPACE","\n            ",99],"}",["T_WHITESPACE","\n        ",100],"}",["T_WHITESPACE","\n    ",101],"}",["T_WHITESPACE","\n\n\n    ",102],["T_DOC_COMMENT","\/**\n     * Add a $subquery (Zend_Search_Lucene_Search_Query) to this query.\n     *\n     * The sign is specified as:\n     *     TRUE  - subquery is required\n     *     FALSE - subquery is prohibited\n     *     NULL  - subquery is neither prohibited, nor required\n     *\n     * @param  Zend_Search_Lucene_Search_Query $subquery\n     * @param  boolean|null $sign\n     * @return void\n     *\/",105],["T_WHITESPACE","\n    ",116],["T_PUBLIC","public",117],["T_WHITESPACE"," ",117],["T_FUNCTION","function",117],["T_WHITESPACE"," ",117],["T_STRING","addSubquery",117],"(",["T_STRING","Zend_Search_Lucene_Search_Query",117],["T_WHITESPACE"," ",117],["T_VARIABLE","$subquery",117],",",["T_WHITESPACE"," ",117],["T_VARIABLE","$sign",117],"=",["T_STRING","null",117],")",["T_WHITESPACE"," ",117],"{",["T_WHITESPACE","\n        ",117],["T_IF","if",118],["T_WHITESPACE"," ",118],"(",["T_VARIABLE","$sign",118],["T_WHITESPACE"," ",118],["T_IS_NOT_IDENTICAL","!==",118],["T_WHITESPACE"," ",118],["T_STRING","true",118],["T_WHITESPACE"," ",118],["T_BOOLEAN_OR","||",118],["T_WHITESPACE"," ",118],["T_VARIABLE","$this",118],["T_OBJECT_OPERATOR","->",118],["T_STRING","_signs",118],["T_WHITESPACE"," ",118],["T_IS_NOT_IDENTICAL","!==",118],["T_WHITESPACE"," ",118],["T_STRING","null",118],")",["T_WHITESPACE"," ",118],"{",["T_WHITESPACE","       ",118],["T_COMMENT","\/\/ Skip, if all subqueries are required\n",118],["T_WHITESPACE","            ",119],["T_IF","if",119],["T_WHITESPACE"," ",119],"(",["T_VARIABLE","$this",119],["T_OBJECT_OPERATOR","->",119],["T_STRING","_signs",119],["T_WHITESPACE"," ",119],["T_IS_IDENTICAL","===",119],["T_WHITESPACE"," ",119],["T_STRING","null",119],")",["T_WHITESPACE"," ",119],"{",["T_WHITESPACE","                     ",119],["T_COMMENT","\/\/ Check, If all previous subqueries are required\n",119],["T_WHITESPACE","                ",120],["T_VARIABLE","$this",120],["T_OBJECT_OPERATOR","->",120],["T_STRING","_signs",120],["T_WHITESPACE"," ",120],"=",["T_WHITESPACE"," ",120],["T_ARRAY","array",120],"(",")",";",["T_WHITESPACE","\n                ",120],["T_FOREACH","foreach",121],["T_WHITESPACE"," ",121],"(",["T_VARIABLE","$this",121],["T_OBJECT_OPERATOR","->",121],["T_STRING","_subqueries",121],["T_WHITESPACE"," ",121],["T_AS","as",121],["T_WHITESPACE"," ",121],["T_VARIABLE","$prevSubquery",121],")",["T_WHITESPACE"," ",121],"{",["T_WHITESPACE","\n                    ",121],["T_VARIABLE","$this",122],["T_OBJECT_OPERATOR","->",122],["T_STRING","_signs",122],"[","]",["T_WHITESPACE"," ",122],"=",["T_WHITESPACE"," ",122],["T_STRING","true",122],";",["T_WHITESPACE","\n                ",122],"}",["T_WHITESPACE","\n            ",123],"}",["T_WHITESPACE","\n            ",124],["T_VARIABLE","$this",125],["T_OBJECT_OPERATOR","->",125],["T_STRING","_signs",125],"[","]",["T_WHITESPACE"," ",125],"=",["T_WHITESPACE"," ",125],["T_VARIABLE","$sign",125],";",["T_WHITESPACE","\n        ",125],"}",["T_WHITESPACE","\n\n        ",126],["T_VARIABLE","$this",128],["T_OBJECT_OPERATOR","->",128],["T_STRING","_subqueries",128],"[","]",["T_WHITESPACE"," ",128],"=",["T_WHITESPACE"," ",128],["T_VARIABLE","$subquery",128],";",["T_WHITESPACE","\n    ",128],"}",["T_WHITESPACE","\n\n    ",129],["T_DOC_COMMENT","\/**\n     * Re-write queries into primitive queries\n     *\n     * @param Zend_Search_Lucene_Interface $index\n     * @return Zend_Search_Lucene_Search_Query\n     *\/",131],["T_WHITESPACE","\n    ",136],["T_PUBLIC","public",137],["T_WHITESPACE"," ",137],["T_FUNCTION","function",137],["T_WHITESPACE"," ",137],["T_STRING","rewrite",137],"(",["T_STRING","Zend_Search_Lucene_Interface",137],["T_WHITESPACE"," ",137],["T_VARIABLE","$index",137],")",["T_WHITESPACE","\n    ",137],"{",["T_WHITESPACE","\n        ",138],["T_VARIABLE","$query",139],["T_WHITESPACE"," ",139],"=",["T_WHITESPACE"," ",139],["T_NEW","new",139],["T_WHITESPACE"," ",139],["T_STRING","Zend_Search_Lucene_Search_Query_Boolean",139],"(",")",";",["T_WHITESPACE","\n        ",139],["T_VARIABLE","$query",140],["T_OBJECT_OPERATOR","->",140],["T_STRING","setBoost",140],"(",["T_VARIABLE","$this",140],["T_OBJECT_OPERATOR","->",140],["T_STRING","getBoost",140],"(",")",")",";",["T_WHITESPACE","\n\n        ",140],["T_FOREACH","foreach",142],["T_WHITESPACE"," ",142],"(",["T_VARIABLE","$this",142],["T_OBJECT_OPERATOR","->",142],["T_STRING","_subqueries",142],["T_WHITESPACE"," ",142],["T_AS","as",142],["T_WHITESPACE"," ",142],["T_VARIABLE","$subqueryId",142],["T_WHITESPACE"," ",142],["T_DOUBLE_ARROW","=>",142],["T_WHITESPACE"," ",142],["T_VARIABLE","$subquery",142],")",["T_WHITESPACE"," ",142],"{",["T_WHITESPACE","\n            ",142],["T_VARIABLE","$query",143],["T_OBJECT_OPERATOR","->",143],["T_STRING","addSubquery",143],"(",["T_VARIABLE","$subquery",143],["T_OBJECT_OPERATOR","->",143],["T_STRING","rewrite",143],"(",["T_VARIABLE","$index",143],")",",",["T_WHITESPACE","\n                                ",143],"(",["T_VARIABLE","$this",144],["T_OBJECT_OPERATOR","->",144],["T_STRING","_signs",144],["T_WHITESPACE"," ",144],["T_IS_IDENTICAL","===",144],["T_WHITESPACE"," ",144],["T_STRING","null",144],")","?",["T_WHITESPACE","  ",144],["T_STRING","true",144],["T_WHITESPACE"," ",144],":",["T_WHITESPACE"," ",144],["T_VARIABLE","$this",144],["T_OBJECT_OPERATOR","->",144],["T_STRING","_signs",144],"[",["T_VARIABLE","$subqueryId",144],"]",")",";",["T_WHITESPACE","\n        ",144],"}",["T_WHITESPACE","\n\n        ",145],["T_RETURN","return",147],["T_WHITESPACE"," ",147],["T_VARIABLE","$query",147],";",["T_WHITESPACE","\n    ",147],"}",["T_WHITESPACE","\n\n    ",148],["T_DOC_COMMENT","\/**\n     * Optimize query in the context of specified index\n     *\n     * @param Zend_Search_Lucene_Interface $index\n     * @return Zend_Search_Lucene_Search_Query\n     *\/",150],["T_WHITESPACE","\n    ",155],["T_PUBLIC","public",156],["T_WHITESPACE"," ",156],["T_FUNCTION","function",156],["T_WHITESPACE"," ",156],["T_STRING","optimize",156],"(",["T_STRING","Zend_Search_Lucene_Interface",156],["T_WHITESPACE"," ",156],["T_VARIABLE","$index",156],")",["T_WHITESPACE","\n    ",156],"{",["T_WHITESPACE","\n        ",157],["T_VARIABLE","$subqueries",158],["T_WHITESPACE"," ",158],"=",["T_WHITESPACE"," ",158],["T_ARRAY","array",158],"(",")",";",["T_WHITESPACE","\n        ",158],["T_VARIABLE","$signs",159],["T_WHITESPACE","      ",159],"=",["T_WHITESPACE"," ",159],["T_ARRAY","array",159],"(",")",";",["T_WHITESPACE","\n\n        ",159],["T_COMMENT","\/\/ Optimize all subqueries\n",161],["T_WHITESPACE","        ",162],["T_FOREACH","foreach",162],["T_WHITESPACE"," ",162],"(",["T_VARIABLE","$this",162],["T_OBJECT_OPERATOR","->",162],["T_STRING","_subqueries",162],["T_WHITESPACE"," ",162],["T_AS","as",162],["T_WHITESPACE"," ",162],["T_VARIABLE","$id",162],["T_WHITESPACE"," ",162],["T_DOUBLE_ARROW","=>",162],["T_WHITESPACE"," ",162],["T_VARIABLE","$subquery",162],")",["T_WHITESPACE"," ",162],"{",["T_WHITESPACE","\n            ",162],["T_VARIABLE","$subqueries",163],"[","]",["T_WHITESPACE"," ",163],"=",["T_WHITESPACE"," ",163],["T_VARIABLE","$subquery",163],["T_OBJECT_OPERATOR","->",163],["T_STRING","optimize",163],"(",["T_VARIABLE","$index",163],")",";",["T_WHITESPACE","\n            ",163],["T_VARIABLE","$signs",164],"[","]",["T_WHITESPACE","      ",164],"=",["T_WHITESPACE"," ",164],"(",["T_VARIABLE","$this",164],["T_OBJECT_OPERATOR","->",164],["T_STRING","_signs",164],["T_WHITESPACE"," ",164],["T_IS_IDENTICAL","===",164],["T_WHITESPACE"," ",164],["T_STRING","null",164],")","?",["T_WHITESPACE"," ",164],["T_STRING","true",164],["T_WHITESPACE"," ",164],":",["T_WHITESPACE"," ",164],["T_VARIABLE","$this",164],["T_OBJECT_OPERATOR","->",164],["T_STRING","_signs",164],"[",["T_VARIABLE","$id",164],"]",";",["T_WHITESPACE","\n        ",164],"}",["T_WHITESPACE","\n\n        ",165],["T_COMMENT","\/\/ Remove insignificant subqueries\n",167],["T_WHITESPACE","        ",168],["T_FOREACH","foreach",168],["T_WHITESPACE"," ",168],"(",["T_VARIABLE","$subqueries",168],["T_WHITESPACE"," ",168],["T_AS","as",168],["T_WHITESPACE"," ",168],["T_VARIABLE","$id",168],["T_WHITESPACE"," ",168],["T_DOUBLE_ARROW","=>",168],["T_WHITESPACE"," ",168],["T_VARIABLE","$subquery",168],")",["T_WHITESPACE"," ",168],"{",["T_WHITESPACE","\n            ",168],["T_IF","if",169],["T_WHITESPACE"," ",169],"(",["T_VARIABLE","$subquery",169],["T_WHITESPACE"," ",169],["T_INSTANCEOF","instanceof",169],["T_WHITESPACE"," ",169],["T_STRING","Zend_Search_Lucene_Search_Query_Insignificant",169],")",["T_WHITESPACE"," ",169],"{",["T_WHITESPACE","\n                ",169],["T_COMMENT","\/\/ Insignificant subquery has to be removed anyway\n",170],["T_WHITESPACE","                ",171],["T_UNSET","unset",171],"(",["T_VARIABLE","$subqueries",171],"[",["T_VARIABLE","$id",171],"]",")",";",["T_WHITESPACE","\n                ",171],["T_UNSET","unset",172],"(",["T_VARIABLE","$signs",172],"[",["T_VARIABLE","$id",172],"]",")",";",["T_WHITESPACE","\n            ",172],"}",["T_WHITESPACE","\n        ",173],"}",["T_WHITESPACE","\n        ",174],["T_IF","if",175],["T_WHITESPACE"," ",175],"(",["T_STRING","count",175],"(",["T_VARIABLE","$subqueries",175],")",["T_WHITESPACE"," ",175],["T_IS_EQUAL","==",175],["T_WHITESPACE"," ",175],["T_LNUMBER","0",175],")",["T_WHITESPACE"," ",175],"{",["T_WHITESPACE","\n            ",175],["T_COMMENT","\/\/ Boolean query doesn't has non-insignificant subqueries\n",176],["T_WHITESPACE","            ",177],["T_COMMENT","#require_once 'Zend\/Search\/Lucene\/Search\/Query\/Insignificant.php';\n",177],["T_WHITESPACE","            ",178],["T_RETURN","return",178],["T_WHITESPACE"," ",178],["T_NEW","new",178],["T_WHITESPACE"," ",178],["T_STRING","Zend_Search_Lucene_Search_Query_Insignificant",178],"(",")",";",["T_WHITESPACE","\n        ",178],"}",["T_WHITESPACE","\n        ",179],["T_COMMENT","\/\/ Check if all non-insignificant subqueries are prohibited\n",180],["T_WHITESPACE","        ",181],["T_VARIABLE","$allProhibited",181],["T_WHITESPACE"," ",181],"=",["T_WHITESPACE"," ",181],["T_STRING","true",181],";",["T_WHITESPACE","\n        ",181],["T_FOREACH","foreach",182],["T_WHITESPACE"," ",182],"(",["T_VARIABLE","$signs",182],["T_WHITESPACE"," ",182],["T_AS","as",182],["T_WHITESPACE"," ",182],["T_VARIABLE","$sign",182],")",["T_WHITESPACE"," ",182],"{",["T_WHITESPACE","\n            ",182],["T_IF","if",183],["T_WHITESPACE"," ",183],"(",["T_VARIABLE","$sign",183],["T_WHITESPACE"," ",183],["T_IS_NOT_IDENTICAL","!==",183],["T_WHITESPACE"," ",183],["T_STRING","false",183],")",["T_WHITESPACE"," ",183],"{",["T_WHITESPACE","\n                ",183],["T_VARIABLE","$allProhibited",184],["T_WHITESPACE"," ",184],"=",["T_WHITESPACE"," ",184],["T_STRING","false",184],";",["T_WHITESPACE","\n                ",184],["T_BREAK","break",185],";",["T_WHITESPACE","\n            ",185],"}",["T_WHITESPACE","\n        ",186],"}",["T_WHITESPACE","\n        ",187],["T_IF","if",188],["T_WHITESPACE"," ",188],"(",["T_VARIABLE","$allProhibited",188],")",["T_WHITESPACE"," ",188],"{",["T_WHITESPACE","\n            ",188],["T_COMMENT","#require_once 'Zend\/Search\/Lucene\/Search\/Query\/Insignificant.php';\n",189],["T_WHITESPACE","            ",190],["T_RETURN","return",190],["T_WHITESPACE"," ",190],["T_NEW","new",190],["T_WHITESPACE"," ",190],["T_STRING","Zend_Search_Lucene_Search_Query_Insignificant",190],"(",")",";",["T_WHITESPACE","\n        ",190],"}",["T_WHITESPACE","\n\n\n        ",191],["T_COMMENT","\/\/ Check for empty subqueries\n",194],["T_WHITESPACE","        ",195],["T_FOREACH","foreach",195],["T_WHITESPACE"," ",195],"(",["T_VARIABLE","$subqueries",195],["T_WHITESPACE"," ",195],["T_AS","as",195],["T_WHITESPACE"," ",195],["T_VARIABLE","$id",195],["T_WHITESPACE"," ",195],["T_DOUBLE_ARROW","=>",195],["T_WHITESPACE"," ",195],["T_VARIABLE","$subquery",195],")",["T_WHITESPACE"," ",195],"{",["T_WHITESPACE","\n            ",195],["T_IF","if",196],["T_WHITESPACE"," ",196],"(",["T_VARIABLE","$subquery",196],["T_WHITESPACE"," ",196],["T_INSTANCEOF","instanceof",196],["T_WHITESPACE"," ",196],["T_STRING","Zend_Search_Lucene_Search_Query_Empty",196],")",["T_WHITESPACE"," ",196],"{",["T_WHITESPACE","\n                ",196],["T_IF","if",197],["T_WHITESPACE"," ",197],"(",["T_VARIABLE","$signs",197],"[",["T_VARIABLE","$id",197],"]",["T_WHITESPACE"," ",197],["T_IS_IDENTICAL","===",197],["T_WHITESPACE"," ",197],["T_STRING","true",197],")",["T_WHITESPACE"," ",197],"{",["T_WHITESPACE","\n                    ",197],["T_COMMENT","\/\/ Matching is required, but is actually empty\n",198],["T_WHITESPACE","                    ",199],["T_COMMENT","#require_once 'Zend\/Search\/Lucene\/Search\/Query\/Empty.php';\n",199],["T_WHITESPACE","                    ",200],["T_RETURN","return",200],["T_WHITESPACE"," ",200],["T_NEW","new",200],["T_WHITESPACE"," ",200],["T_STRING","Zend_Search_Lucene_Search_Query_Empty",200],"(",")",";",["T_WHITESPACE","\n                ",200],"}",["T_WHITESPACE"," ",201],["T_ELSE","else",201],["T_WHITESPACE"," ",201],"{",["T_WHITESPACE","\n                    ",201],["T_COMMENT","\/\/ Matching is optional or prohibited, but is empty\n",202],["T_WHITESPACE","                    ",203],["T_COMMENT","\/\/ Remove it from subqueries and signs list\n",203],["T_WHITESPACE","                    ",204],["T_UNSET","unset",204],"(",["T_VARIABLE","$subqueries",204],"[",["T_VARIABLE","$id",204],"]",")",";",["T_WHITESPACE","\n                    ",204],["T_UNSET","unset",205],"(",["T_VARIABLE","$signs",205],"[",["T_VARIABLE","$id",205],"]",")",";",["T_WHITESPACE","\n                ",205],"}",["T_WHITESPACE","\n            ",206],"}",["T_WHITESPACE","\n        ",207],"}",["T_WHITESPACE","\n\n        ",208],["T_COMMENT","\/\/ Check, if reduced subqueries list is empty\n",210],["T_WHITESPACE","        ",211],["T_IF","if",211],["T_WHITESPACE"," ",211],"(",["T_STRING","count",211],"(",["T_VARIABLE","$subqueries",211],")",["T_WHITESPACE"," ",211],["T_IS_EQUAL","==",211],["T_WHITESPACE"," ",211],["T_LNUMBER","0",211],")",["T_WHITESPACE"," ",211],"{",["T_WHITESPACE","\n            ",211],["T_COMMENT","#require_once 'Zend\/Search\/Lucene\/Search\/Query\/Empty.php';\n",212],["T_WHITESPACE","            ",213],["T_RETURN","return",213],["T_WHITESPACE"," ",213],["T_NEW","new",213],["T_WHITESPACE"," ",213],["T_STRING","Zend_Search_Lucene_Search_Query_Empty",213],"(",")",";",["T_WHITESPACE","\n        ",213],"}",["T_WHITESPACE","\n\n        ",214],["T_COMMENT","\/\/ Check if all non-empty subqueries are prohibited\n",216],["T_WHITESPACE","        ",217],["T_VARIABLE","$allProhibited",217],["T_WHITESPACE"," ",217],"=",["T_WHITESPACE"," ",217],["T_STRING","true",217],";",["T_WHITESPACE","\n        ",217],["T_FOREACH","foreach",218],["T_WHITESPACE"," ",218],"(",["T_VARIABLE","$signs",218],["T_WHITESPACE"," ",218],["T_AS","as",218],["T_WHITESPACE"," ",218],["T_VARIABLE","$sign",218],")",["T_WHITESPACE"," ",218],"{",["T_WHITESPACE","\n            ",218],["T_IF","if",219],["T_WHITESPACE"," ",219],"(",["T_VARIABLE","$sign",219],["T_WHITESPACE"," ",219],["T_IS_NOT_IDENTICAL","!==",219],["T_WHITESPACE"," ",219],["T_STRING","false",219],")",["T_WHITESPACE"," ",219],"{",["T_WHITESPACE","\n                ",219],["T_VARIABLE","$allProhibited",220],["T_WHITESPACE"," ",220],"=",["T_WHITESPACE"," ",220],["T_STRING","false",220],";",["T_WHITESPACE","\n                ",220],["T_BREAK","break",221],";",["T_WHITESPACE","\n            ",221],"}",["T_WHITESPACE","\n        ",222],"}",["T_WHITESPACE","\n        ",223],["T_IF","if",224],["T_WHITESPACE"," ",224],"(",["T_VARIABLE","$allProhibited",224],")",["T_WHITESPACE"," ",224],"{",["T_WHITESPACE","\n            ",224],["T_COMMENT","#require_once 'Zend\/Search\/Lucene\/Search\/Query\/Empty.php';\n",225],["T_WHITESPACE","            ",226],["T_RETURN","return",226],["T_WHITESPACE"," ",226],["T_NEW","new",226],["T_WHITESPACE"," ",226],["T_STRING","Zend_Search_Lucene_Search_Query_Empty",226],"(",")",";",["T_WHITESPACE","\n        ",226],"}",["T_WHITESPACE","\n\n\n        ",227],["T_COMMENT","\/\/ Check, if reduced subqueries list has only one entry\n",230],["T_WHITESPACE","        ",231],["T_IF","if",231],["T_WHITESPACE"," ",231],"(",["T_STRING","count",231],"(",["T_VARIABLE","$subqueries",231],")",["T_WHITESPACE"," ",231],["T_IS_EQUAL","==",231],["T_WHITESPACE"," ",231],["T_LNUMBER","1",231],")",["T_WHITESPACE"," ",231],"{",["T_WHITESPACE","\n            ",231],["T_COMMENT","\/\/ It's a query with only one required or optional clause\n",232],["T_WHITESPACE","            ",233],["T_COMMENT","\/\/ (it's already checked, that it's not a prohibited clause)\n",233],["T_WHITESPACE","\n            ",234],["T_IF","if",235],["T_WHITESPACE"," ",235],"(",["T_VARIABLE","$this",235],["T_OBJECT_OPERATOR","->",235],["T_STRING","getBoost",235],"(",")",["T_WHITESPACE"," ",235],["T_IS_EQUAL","==",235],["T_WHITESPACE"," ",235],["T_LNUMBER","1",235],")",["T_WHITESPACE"," ",235],"{",["T_WHITESPACE","\n                ",235],["T_RETURN","return",236],["T_WHITESPACE"," ",236],["T_STRING","reset",236],"(",["T_VARIABLE","$subqueries",236],")",";",["T_WHITESPACE","\n            ",236],"}",["T_WHITESPACE","\n\n            ",237],["T_VARIABLE","$optimizedQuery",239],["T_WHITESPACE"," ",239],"=",["T_WHITESPACE"," ",239],["T_CLONE","clone",239],["T_WHITESPACE"," ",239],["T_STRING","reset",239],"(",["T_VARIABLE","$subqueries",239],")",";",["T_WHITESPACE","\n            ",239],["T_VARIABLE","$optimizedQuery",240],["T_OBJECT_OPERATOR","->",240],["T_STRING","setBoost",240],"(",["T_VARIABLE","$optimizedQuery",240],["T_OBJECT_OPERATOR","->",240],["T_STRING","getBoost",240],"(",")","*",["T_VARIABLE","$this",240],["T_OBJECT_OPERATOR","->",240],["T_STRING","getBoost",240],"(",")",")",";",["T_WHITESPACE","\n\n            ",240],["T_RETURN","return",242],["T_WHITESPACE"," ",242],["T_VARIABLE","$optimizedQuery",242],";",["T_WHITESPACE","\n        ",242],"}",["T_WHITESPACE","\n\n\n        ",243],["T_COMMENT","\/\/ Prepare first candidate for optimized query\n",246],["T_WHITESPACE","        ",247],["T_VARIABLE","$optimizedQuery",247],["T_WHITESPACE"," ",247],"=",["T_WHITESPACE"," ",247],["T_NEW","new",247],["T_WHITESPACE"," ",247],["T_STRING","Zend_Search_Lucene_Search_Query_Boolean",247],"(",["T_VARIABLE","$subqueries",247],",",["T_WHITESPACE"," ",247],["T_VARIABLE","$signs",247],")",";",["T_WHITESPACE","\n        ",247],["T_VARIABLE","$optimizedQuery",248],["T_OBJECT_OPERATOR","->",248],["T_STRING","setBoost",248],"(",["T_VARIABLE","$this",248],["T_OBJECT_OPERATOR","->",248],["T_STRING","getBoost",248],"(",")",")",";",["T_WHITESPACE","\n\n\n        ",248],["T_VARIABLE","$terms",251],["T_WHITESPACE","        ",251],"=",["T_WHITESPACE"," ",251],["T_ARRAY","array",251],"(",")",";",["T_WHITESPACE","\n        ",251],["T_VARIABLE","$tsigns",252],["T_WHITESPACE","       ",252],"=",["T_WHITESPACE"," ",252],["T_ARRAY","array",252],"(",")",";",["T_WHITESPACE","\n        ",252],["T_VARIABLE","$boostFactors",253],["T_WHITESPACE"," ",253],"=",["T_WHITESPACE"," ",253],["T_ARRAY","array",253],"(",")",";",["T_WHITESPACE","\n\n        ",253],["T_COMMENT","\/\/ Try to decompose term and multi-term subqueries\n",255],["T_WHITESPACE","        ",256],["T_FOREACH","foreach",256],["T_WHITESPACE"," ",256],"(",["T_VARIABLE","$subqueries",256],["T_WHITESPACE"," ",256],["T_AS","as",256],["T_WHITESPACE"," ",256],["T_VARIABLE","$id",256],["T_WHITESPACE"," ",256],["T_DOUBLE_ARROW","=>",256],["T_WHITESPACE"," ",256],["T_VARIABLE","$subquery",256],")",["T_WHITESPACE"," ",256],"{",["T_WHITESPACE","\n            ",256],["T_IF","if",257],["T_WHITESPACE"," ",257],"(",["T_VARIABLE","$subquery",257],["T_WHITESPACE"," ",257],["T_INSTANCEOF","instanceof",257],["T_WHITESPACE"," ",257],["T_STRING","Zend_Search_Lucene_Search_Query_Term",257],")",["T_WHITESPACE"," ",257],"{",["T_WHITESPACE","\n                ",257],["T_VARIABLE","$terms",258],"[","]",["T_WHITESPACE","        ",258],"=",["T_WHITESPACE"," ",258],["T_VARIABLE","$subquery",258],["T_OBJECT_OPERATOR","->",258],["T_STRING","getTerm",258],"(",")",";",["T_WHITESPACE","\n                ",258],["T_VARIABLE","$tsigns",259],"[","]",["T_WHITESPACE","       ",259],"=",["T_WHITESPACE"," ",259],["T_VARIABLE","$signs",259],"[",["T_VARIABLE","$id",259],"]",";",["T_WHITESPACE","\n                ",259],["T_VARIABLE","$boostFactors",260],"[","]",["T_WHITESPACE"," ",260],"=",["T_WHITESPACE"," ",260],["T_VARIABLE","$subquery",260],["T_OBJECT_OPERATOR","->",260],["T_STRING","getBoost",260],"(",")",";",["T_WHITESPACE","\n\n                ",260],["T_COMMENT","\/\/ remove subquery from a subqueries list\n",262],["T_WHITESPACE","                ",263],["T_UNSET","unset",263],"(",["T_VARIABLE","$subqueries",263],"[",["T_VARIABLE","$id",263],"]",")",";",["T_WHITESPACE","\n                ",263],["T_UNSET","unset",264],"(",["T_VARIABLE","$signs",264],"[",["T_VARIABLE","$id",264],"]",")",";",["T_WHITESPACE","\n           ",264],"}",["T_WHITESPACE"," ",265],["T_ELSE","else",265],["T_WHITESPACE"," ",265],["T_IF","if",265],["T_WHITESPACE"," ",265],"(",["T_VARIABLE","$subquery",265],["T_WHITESPACE"," ",265],["T_INSTANCEOF","instanceof",265],["T_WHITESPACE"," ",265],["T_STRING","Zend_Search_Lucene_Search_Query_MultiTerm",265],")",["T_WHITESPACE"," ",265],"{",["T_WHITESPACE","\n                ",265],["T_VARIABLE","$subTerms",266],["T_WHITESPACE"," ",266],"=",["T_WHITESPACE"," ",266],["T_VARIABLE","$subquery",266],["T_OBJECT_OPERATOR","->",266],["T_STRING","getTerms",266],"(",")",";",["T_WHITESPACE","\n                ",266],["T_VARIABLE","$subSigns",267],["T_WHITESPACE"," ",267],"=",["T_WHITESPACE"," ",267],["T_VARIABLE","$subquery",267],["T_OBJECT_OPERATOR","->",267],["T_STRING","getSigns",267],"(",")",";",["T_WHITESPACE","\n\n                ",267],["T_IF","if",269],["T_WHITESPACE"," ",269],"(",["T_VARIABLE","$signs",269],"[",["T_VARIABLE","$id",269],"]",["T_WHITESPACE"," ",269],["T_IS_IDENTICAL","===",269],["T_WHITESPACE"," ",269],["T_STRING","true",269],")",["T_WHITESPACE"," ",269],"{",["T_WHITESPACE","\n                    ",269],["T_COMMENT","\/\/ It's a required multi-term subquery.\n",270],["T_WHITESPACE","                    ",271],["T_COMMENT","\/\/ Something like '... +(+term1 -term2 term3 ...) ...'\n",271],["T_WHITESPACE","\n                    ",272],["T_COMMENT","\/\/ Multi-term required subquery can be decomposed only if it contains\n",273],["T_WHITESPACE","                    ",274],["T_COMMENT","\/\/ required terms and doesn't contain prohibited terms:\n",274],["T_WHITESPACE","                    ",275],["T_COMMENT","\/\/ ... +(+term1 term2 ...) ... => ... +term1 term2 ...\n",275],["T_WHITESPACE","                    ",276],["T_COMMENT","\/\/\n",276],["T_WHITESPACE","                    ",277],["T_COMMENT","\/\/ Check this\n",277],["T_WHITESPACE","                    ",278],["T_VARIABLE","$hasRequired",278],["T_WHITESPACE","   ",278],"=",["T_WHITESPACE"," ",278],["T_STRING","false",278],";",["T_WHITESPACE","\n                    ",278],["T_VARIABLE","$hasProhibited",279],["T_WHITESPACE"," ",279],"=",["T_WHITESPACE"," ",279],["T_STRING","false",279],";",["T_WHITESPACE","\n                    ",279],["T_IF","if",280],["T_WHITESPACE"," ",280],"(",["T_VARIABLE","$subSigns",280],["T_WHITESPACE"," ",280],["T_IS_IDENTICAL","===",280],["T_WHITESPACE"," ",280],["T_STRING","null",280],")",["T_WHITESPACE"," ",280],"{",["T_WHITESPACE","\n                        ",280],["T_COMMENT","\/\/ All subterms are required\n",281],["T_WHITESPACE","                        ",282],["T_VARIABLE","$hasRequired",282],["T_WHITESPACE"," ",282],"=",["T_WHITESPACE"," ",282],["T_STRING","true",282],";",["T_WHITESPACE","\n                    ",282],"}",["T_WHITESPACE"," ",283],["T_ELSE","else",283],["T_WHITESPACE"," ",283],"{",["T_WHITESPACE","\n                        ",283],["T_FOREACH","foreach",284],["T_WHITESPACE"," ",284],"(",["T_VARIABLE","$subSigns",284],["T_WHITESPACE"," ",284],["T_AS","as",284],["T_WHITESPACE"," ",284],["T_VARIABLE","$sign",284],")",["T_WHITESPACE"," ",284],"{",["T_WHITESPACE","\n                            ",284],["T_IF","if",285],["T_WHITESPACE"," ",285],"(",["T_VARIABLE","$sign",285],["T_WHITESPACE"," ",285],["T_IS_IDENTICAL","===",285],["T_WHITESPACE"," ",285],["T_STRING","true",285],")",["T_WHITESPACE"," ",285],"{",["T_WHITESPACE","\n                                ",285],["T_VARIABLE","$hasRequired",286],["T_WHITESPACE","   ",286],"=",["T_WHITESPACE"," ",286],["T_STRING","true",286],";",["T_WHITESPACE","\n                            ",286],"}",["T_WHITESPACE"," ",287],["T_ELSE","else",287],["T_WHITESPACE"," ",287],["T_IF","if",287],["T_WHITESPACE"," ",287],"(",["T_VARIABLE","$sign",287],["T_WHITESPACE"," ",287],["T_IS_IDENTICAL","===",287],["T_WHITESPACE"," ",287],["T_STRING","false",287],")",["T_WHITESPACE"," ",287],"{",["T_WHITESPACE","\n                                ",287],["T_VARIABLE","$hasProhibited",288],["T_WHITESPACE"," ",288],"=",["T_WHITESPACE"," ",288],["T_STRING","true",288],";",["T_WHITESPACE","\n                                ",288],["T_BREAK","break",289],";",["T_WHITESPACE","\n                            ",289],"}",["T_WHITESPACE","\n                        ",290],"}",["T_WHITESPACE","\n                    ",291],"}",["T_WHITESPACE","\n                    ",292],["T_COMMENT","\/\/ Continue if subquery has prohibited terms or doesn't have required terms\n",293],["T_WHITESPACE","                    ",294],["T_IF","if",294],["T_WHITESPACE"," ",294],"(",["T_VARIABLE","$hasProhibited",294],["T_WHITESPACE","  ",294],["T_BOOLEAN_OR","||",294],["T_WHITESPACE","  ",294],"!",["T_VARIABLE","$hasRequired",294],")",["T_WHITESPACE"," ",294],"{",["T_WHITESPACE","\n                        ",294],["T_CONTINUE","continue",295],";",["T_WHITESPACE","\n                    ",295],"}",["T_WHITESPACE","\n\n                    ",296],["T_FOREACH","foreach",298],["T_WHITESPACE"," ",298],"(",["T_VARIABLE","$subTerms",298],["T_WHITESPACE"," ",298],["T_AS","as",298],["T_WHITESPACE"," ",298],["T_VARIABLE","$termId",298],["T_WHITESPACE"," ",298],["T_DOUBLE_ARROW","=>",298],["T_WHITESPACE"," ",298],["T_VARIABLE","$term",298],")",["T_WHITESPACE"," ",298],"{",["T_WHITESPACE","\n                        ",298],["T_VARIABLE","$terms",299],"[","]",["T_WHITESPACE","        ",299],"=",["T_WHITESPACE"," ",299],["T_VARIABLE","$term",299],";",["T_WHITESPACE","\n                        ",299],["T_VARIABLE","$tsigns",300],"[","]",["T_WHITESPACE","       ",300],"=",["T_WHITESPACE"," ",300],"(",["T_VARIABLE","$subSigns",300],["T_WHITESPACE"," ",300],["T_IS_IDENTICAL","===",300],["T_WHITESPACE"," ",300],["T_STRING","null",300],")","?",["T_WHITESPACE"," ",300],["T_STRING","true",300],["T_WHITESPACE"," ",300],":",["T_WHITESPACE"," ",300],["T_VARIABLE","$subSigns",300],"[",["T_VARIABLE","$termId",300],"]",";",["T_WHITESPACE","\n                        ",300],["T_VARIABLE","$boostFactors",301],"[","]",["T_WHITESPACE"," ",301],"=",["T_WHITESPACE"," ",301],["T_VARIABLE","$subquery",301],["T_OBJECT_OPERATOR","->",301],["T_STRING","getBoost",301],"(",")",";",["T_WHITESPACE","\n                    ",301],"}",["T_WHITESPACE","\n\n                    ",302],["T_COMMENT","\/\/ remove subquery from a subqueries list\n",304],["T_WHITESPACE","                    ",305],["T_UNSET","unset",305],"(",["T_VARIABLE","$subqueries",305],"[",["T_VARIABLE","$id",305],"]",")",";",["T_WHITESPACE","\n                    ",305],["T_UNSET","unset",306],"(",["T_VARIABLE","$signs",306],"[",["T_VARIABLE","$id",306],"]",")",";",["T_WHITESPACE","\n\n                ",306],"}",["T_WHITESPACE"," ",308],["T_ELSE","else",308],["T_WHITESPACE"," ",308],"{",["T_WHITESPACE"," ",308],["T_COMMENT","\/\/ $signs[$id] === null  ||  $signs[$id] === false\n",308],["T_WHITESPACE","                    ",309],["T_COMMENT","\/\/ It's an optional or prohibited multi-term subquery.\n",309],["T_WHITESPACE","                    ",310],["T_COMMENT","\/\/ Something like '... (+term1 -term2 term3 ...) ...'\n",310],["T_WHITESPACE","                    ",311],["T_COMMENT","\/\/ or\n",311],["T_WHITESPACE","                    ",312],["T_COMMENT","\/\/ something like '... -(+term1 -term2 term3 ...) ...'\n",312],["T_WHITESPACE","\n                    ",313],["T_COMMENT","\/\/ Multi-term optional and required subqueries can be decomposed\n",314],["T_WHITESPACE","                    ",315],["T_COMMENT","\/\/ only if all terms are optional.\n",315],["T_WHITESPACE","                    ",316],["T_COMMENT","\/\/\n",316],["T_WHITESPACE","                    ",317],["T_COMMENT","\/\/ Check if all terms are optional.\n",317],["T_WHITESPACE","                    ",318],["T_VARIABLE","$onlyOptional",318],["T_WHITESPACE"," ",318],"=",["T_WHITESPACE"," ",318],["T_STRING","true",318],";",["T_WHITESPACE","\n                    ",318],["T_IF","if",319],["T_WHITESPACE"," ",319],"(",["T_VARIABLE","$subSigns",319],["T_WHITESPACE"," ",319],["T_IS_IDENTICAL","===",319],["T_WHITESPACE"," ",319],["T_STRING","null",319],")",["T_WHITESPACE"," ",319],"{",["T_WHITESPACE","\n                        ",319],["T_COMMENT","\/\/ All subterms are required\n",320],["T_WHITESPACE","                        ",321],["T_VARIABLE","$onlyOptional",321],["T_WHITESPACE"," ",321],"=",["T_WHITESPACE"," ",321],["T_STRING","false",321],";",["T_WHITESPACE","\n                    ",321],"}",["T_WHITESPACE"," ",322],["T_ELSE","else",322],["T_WHITESPACE"," ",322],"{",["T_WHITESPACE","\n                        ",322],["T_FOREACH","foreach",323],["T_WHITESPACE"," ",323],"(",["T_VARIABLE","$subSigns",323],["T_WHITESPACE"," ",323],["T_AS","as",323],["T_WHITESPACE"," ",323],["T_VARIABLE","$sign",323],")",["T_WHITESPACE"," ",323],"{",["T_WHITESPACE","\n                            ",323],["T_IF","if",324],["T_WHITESPACE"," ",324],"(",["T_VARIABLE","$sign",324],["T_WHITESPACE"," ",324],["T_IS_NOT_IDENTICAL","!==",324],["T_WHITESPACE"," ",324],["T_STRING","null",324],")",["T_WHITESPACE"," ",324],"{",["T_WHITESPACE","\n                                ",324],["T_VARIABLE","$onlyOptional",325],["T_WHITESPACE"," ",325],"=",["T_WHITESPACE"," ",325],["T_STRING","false",325],";",["T_WHITESPACE","\n                                ",325],["T_BREAK","break",326],";",["T_WHITESPACE","\n                            ",326],"}",["T_WHITESPACE","\n                        ",327],"}",["T_WHITESPACE","\n                    ",328],"}",["T_WHITESPACE","\n\n                    ",329],["T_COMMENT","\/\/ Continue if non-optional terms are presented in this multi-term subquery\n",331],["T_WHITESPACE","                    ",332],["T_IF","if",332],["T_WHITESPACE"," ",332],"(","!",["T_VARIABLE","$onlyOptional",332],")",["T_WHITESPACE"," ",332],"{",["T_WHITESPACE","\n                        ",332],["T_CONTINUE","continue",333],";",["T_WHITESPACE","\n                    ",333],"}",["T_WHITESPACE","\n\n                    ",334],["T_FOREACH","foreach",336],["T_WHITESPACE"," ",336],"(",["T_VARIABLE","$subTerms",336],["T_WHITESPACE"," ",336],["T_AS","as",336],["T_WHITESPACE"," ",336],["T_VARIABLE","$termId",336],["T_WHITESPACE"," ",336],["T_DOUBLE_ARROW","=>",336],["T_WHITESPACE"," ",336],["T_VARIABLE","$term",336],")",["T_WHITESPACE"," ",336],"{",["T_WHITESPACE","\n                        ",336],["T_VARIABLE","$terms",337],"[","]",["T_WHITESPACE","  ",337],"=",["T_WHITESPACE"," ",337],["T_VARIABLE","$term",337],";",["T_WHITESPACE","\n                        ",337],["T_VARIABLE","$tsigns",338],"[","]",["T_WHITESPACE"," ",338],"=",["T_WHITESPACE"," ",338],"(",["T_VARIABLE","$signs",338],"[",["T_VARIABLE","$id",338],"]",["T_WHITESPACE"," ",338],["T_IS_IDENTICAL","===",338],["T_WHITESPACE"," ",338],["T_STRING","null",338],")","?",["T_WHITESPACE"," ",338],["T_STRING","null",338],["T_WHITESPACE","  ",338],["T_COMMENT","\/* optional *\/",338],["T_WHITESPACE"," ",338],":",["T_WHITESPACE","\n                                                            ",338],["T_STRING","false",339],["T_WHITESPACE"," ",339],["T_COMMENT","\/* prohibited *\/",339],";",["T_WHITESPACE","\n                        ",339],["T_VARIABLE","$boostFactors",340],"[","]",["T_WHITESPACE"," ",340],"=",["T_WHITESPACE"," ",340],["T_VARIABLE","$subquery",340],["T_OBJECT_OPERATOR","->",340],["T_STRING","getBoost",340],"(",")",";",["T_WHITESPACE","\n                    ",340],"}",["T_WHITESPACE","\n\n                    ",341],["T_COMMENT","\/\/ remove subquery from a subqueries list\n",343],["T_WHITESPACE","                    ",344],["T_UNSET","unset",344],"(",["T_VARIABLE","$subqueries",344],"[",["T_VARIABLE","$id",344],"]",")",";",["T_WHITESPACE","\n                    ",344],["T_UNSET","unset",345],"(",["T_VARIABLE","$signs",345],"[",["T_VARIABLE","$id",345],"]",")",";",["T_WHITESPACE","\n                ",345],"}",["T_WHITESPACE","\n            ",346],"}",["T_WHITESPACE","\n        ",347],"}",["T_WHITESPACE","\n\n\n        ",348],["T_COMMENT","\/\/ Check, if there are no decomposed subqueries\n",351],["T_WHITESPACE","        ",352],["T_IF","if",352],["T_WHITESPACE"," ",352],"(",["T_STRING","count",352],"(",["T_VARIABLE","$terms",352],")",["T_WHITESPACE"," ",352],["T_IS_EQUAL","==",352],["T_WHITESPACE"," ",352],["T_LNUMBER","0",352],["T_WHITESPACE"," ",352],")",["T_WHITESPACE"," ",352],"{",["T_WHITESPACE","\n            ",352],["T_COMMENT","\/\/ return prepared candidate\n",353],["T_WHITESPACE","            ",354],["T_RETURN","return",354],["T_WHITESPACE"," ",354],["T_VARIABLE","$optimizedQuery",354],";",["T_WHITESPACE","\n        ",354],"}",["T_WHITESPACE","\n\n\n        ",355],["T_COMMENT","\/\/ Check, if all subqueries have been decomposed and all terms has the same boost factor\n",358],["T_WHITESPACE","        ",359],["T_IF","if",359],["T_WHITESPACE"," ",359],"(",["T_STRING","count",359],"(",["T_VARIABLE","$subqueries",359],")",["T_WHITESPACE"," ",359],["T_IS_EQUAL","==",359],["T_WHITESPACE"," ",359],["T_LNUMBER","0",359],["T_WHITESPACE","  ",359],["T_BOOLEAN_AND","&&",359],["T_WHITESPACE","  ",359],["T_STRING","count",359],"(",["T_STRING","array_unique",359],"(",["T_VARIABLE","$boostFactors",359],")",")",["T_WHITESPACE"," ",359],["T_IS_EQUAL","==",359],["T_WHITESPACE"," ",359],["T_LNUMBER","1",359],")",["T_WHITESPACE"," ",359],"{",["T_WHITESPACE","\n            ",359],["T_COMMENT","#require_once 'Zend\/Search\/Lucene\/Search\/Query\/MultiTerm.php';\n",360],["T_WHITESPACE","            ",361],["T_VARIABLE","$optimizedQuery",361],["T_WHITESPACE"," ",361],"=",["T_WHITESPACE"," ",361],["T_NEW","new",361],["T_WHITESPACE"," ",361],["T_STRING","Zend_Search_Lucene_Search_Query_MultiTerm",361],"(",["T_VARIABLE","$terms",361],",",["T_WHITESPACE"," ",361],["T_VARIABLE","$tsigns",361],")",";",["T_WHITESPACE","\n            ",361],["T_VARIABLE","$optimizedQuery",362],["T_OBJECT_OPERATOR","->",362],["T_STRING","setBoost",362],"(",["T_STRING","reset",362],"(",["T_VARIABLE","$boostFactors",362],")","*",["T_VARIABLE","$this",362],["T_OBJECT_OPERATOR","->",362],["T_STRING","getBoost",362],"(",")",")",";",["T_WHITESPACE","\n\n            ",362],["T_RETURN","return",364],["T_WHITESPACE"," ",364],["T_VARIABLE","$optimizedQuery",364],";",["T_WHITESPACE","\n        ",364],"}",["T_WHITESPACE","\n\n\n        ",365],["T_COMMENT","\/\/ This boolean query can't be transformed to Term\/MultiTerm query and still contains\n",368],["T_WHITESPACE","        ",369],["T_COMMENT","\/\/ several subqueries\n",369],["T_WHITESPACE","\n        ",370],["T_COMMENT","\/\/ Separate prohibited terms\n",371],["T_WHITESPACE","        ",372],["T_VARIABLE","$prohibitedTerms",372],["T_WHITESPACE","        ",372],"=",["T_WHITESPACE"," ",372],["T_ARRAY","array",372],"(",")",";",["T_WHITESPACE","\n        ",372],["T_FOREACH","foreach",373],["T_WHITESPACE"," ",373],"(",["T_VARIABLE","$terms",373],["T_WHITESPACE"," ",373],["T_AS","as",373],["T_WHITESPACE"," ",373],["T_VARIABLE","$id",373],["T_WHITESPACE"," ",373],["T_DOUBLE_ARROW","=>",373],["T_WHITESPACE"," ",373],["T_VARIABLE","$term",373],")",["T_WHITESPACE"," ",373],"{",["T_WHITESPACE","\n            ",373],["T_IF","if",374],["T_WHITESPACE"," ",374],"(",["T_VARIABLE","$tsigns",374],"[",["T_VARIABLE","$id",374],"]",["T_WHITESPACE"," ",374],["T_IS_IDENTICAL","===",374],["T_WHITESPACE"," ",374],["T_STRING","false",374],")",["T_WHITESPACE"," ",374],"{",["T_WHITESPACE","\n                ",374],["T_VARIABLE","$prohibitedTerms",375],"[","]",["T_WHITESPACE","        ",375],"=",["T_WHITESPACE"," ",375],["T_VARIABLE","$term",375],";",["T_WHITESPACE","\n\n                ",375],["T_UNSET","unset",377],"(",["T_VARIABLE","$terms",377],"[",["T_VARIABLE","$id",377],"]",")",";",["T_WHITESPACE","\n                ",377],["T_UNSET","unset",378],"(",["T_VARIABLE","$tsigns",378],"[",["T_VARIABLE","$id",378],"]",")",";",["T_WHITESPACE","\n                ",378],["T_UNSET","unset",379],"(",["T_VARIABLE","$boostFactors",379],"[",["T_VARIABLE","$id",379],"]",")",";",["T_WHITESPACE","\n            ",379],"}",["T_WHITESPACE","\n        ",380],"}",["T_WHITESPACE","\n\n        ",381],["T_IF","if",383],["T_WHITESPACE"," ",383],"(",["T_STRING","count",383],"(",["T_VARIABLE","$terms",383],")",["T_WHITESPACE"," ",383],["T_IS_EQUAL","==",383],["T_WHITESPACE"," ",383],["T_LNUMBER","1",383],")",["T_WHITESPACE"," ",383],"{",["T_WHITESPACE","\n            ",383],["T_COMMENT","#require_once 'Zend\/Search\/Lucene\/Search\/Query\/Term.php';\n",384],["T_WHITESPACE","            ",385],["T_VARIABLE","$clause",385],["T_WHITESPACE"," ",385],"=",["T_WHITESPACE"," ",385],["T_NEW","new",385],["T_WHITESPACE"," ",385],["T_STRING","Zend_Search_Lucene_Search_Query_Term",385],"(",["T_STRING","reset",385],"(",["T_VARIABLE","$terms",385],")",")",";",["T_WHITESPACE","\n            ",385],["T_VARIABLE","$clause",386],["T_OBJECT_OPERATOR","->",386],["T_STRING","setBoost",386],"(",["T_STRING","reset",386],"(",["T_VARIABLE","$boostFactors",386],")",")",";",["T_WHITESPACE","\n\n            ",386],["T_VARIABLE","$subqueries",388],"[","]",["T_WHITESPACE"," ",388],"=",["T_WHITESPACE"," ",388],["T_VARIABLE","$clause",388],";",["T_WHITESPACE","\n            ",388],["T_VARIABLE","$signs",389],"[","]",["T_WHITESPACE","      ",389],"=",["T_WHITESPACE"," ",389],["T_STRING","reset",389],"(",["T_VARIABLE","$tsigns",389],")",";",["T_WHITESPACE","\n\n            ",389],["T_COMMENT","\/\/ Clear terms list\n",391],["T_WHITESPACE","            ",392],["T_VARIABLE","$terms",392],["T_WHITESPACE"," ",392],"=",["T_WHITESPACE"," ",392],["T_ARRAY","array",392],"(",")",";",["T_WHITESPACE","\n        ",392],"}",["T_WHITESPACE"," ",393],["T_ELSE","else",393],["T_WHITESPACE"," ",393],["T_IF","if",393],["T_WHITESPACE"," ",393],"(",["T_STRING","count",393],"(",["T_VARIABLE","$terms",393],")",["T_WHITESPACE"," ",393],">",["T_WHITESPACE"," ",393],["T_LNUMBER","1",393],["T_WHITESPACE","  ",393],["T_BOOLEAN_AND","&&",393],["T_WHITESPACE","  ",393],["T_STRING","count",393],"(",["T_STRING","array_unique",393],"(",["T_VARIABLE","$boostFactors",393],")",")",["T_WHITESPACE"," ",393],["T_IS_EQUAL","==",393],["T_WHITESPACE"," ",393],["T_LNUMBER","1",393],")",["T_WHITESPACE"," ",393],"{",["T_WHITESPACE","\n            ",393],["T_COMMENT","#require_once 'Zend\/Search\/Lucene\/Search\/Query\/MultiTerm.php';\n",394],["T_WHITESPACE","            ",395],["T_VARIABLE","$clause",395],["T_WHITESPACE"," ",395],"=",["T_WHITESPACE"," ",395],["T_NEW","new",395],["T_WHITESPACE"," ",395],["T_STRING","Zend_Search_Lucene_Search_Query_MultiTerm",395],"(",["T_VARIABLE","$terms",395],",",["T_WHITESPACE"," ",395],["T_VARIABLE","$tsigns",395],")",";",["T_WHITESPACE","\n            ",395],["T_VARIABLE","$clause",396],["T_OBJECT_OPERATOR","->",396],["T_STRING","setBoost",396],"(",["T_STRING","reset",396],"(",["T_VARIABLE","$boostFactors",396],")",")",";",["T_WHITESPACE","\n\n            ",396],["T_VARIABLE","$subqueries",398],"[","]",["T_WHITESPACE"," ",398],"=",["T_WHITESPACE"," ",398],["T_VARIABLE","$clause",398],";",["T_WHITESPACE","\n            ",398],["T_COMMENT","\/\/ Clause sign is 'required' if clause contains required terms. 'Optional' otherwise.\n",399],["T_WHITESPACE","            ",400],["T_VARIABLE","$signs",400],"[","]",["T_WHITESPACE","      ",400],"=",["T_WHITESPACE"," ",400],"(",["T_STRING","in_array",400],"(",["T_STRING","true",400],",",["T_WHITESPACE"," ",400],["T_VARIABLE","$tsigns",400],")",")","?",["T_WHITESPACE"," ",400],["T_STRING","true",400],["T_WHITESPACE"," ",400],":",["T_WHITESPACE"," ",400],["T_STRING","null",400],";",["T_WHITESPACE","\n\n            ",400],["T_COMMENT","\/\/ Clear terms list\n",402],["T_WHITESPACE","            ",403],["T_VARIABLE","$terms",403],["T_WHITESPACE"," ",403],"=",["T_WHITESPACE"," ",403],["T_ARRAY","array",403],"(",")",";",["T_WHITESPACE","\n        ",403],"}",["T_WHITESPACE","\n\n        ",404],["T_IF","if",406],["T_WHITESPACE"," ",406],"(",["T_STRING","count",406],"(",["T_VARIABLE","$prohibitedTerms",406],")",["T_WHITESPACE"," ",406],["T_IS_EQUAL","==",406],["T_WHITESPACE"," ",406],["T_LNUMBER","1",406],")",["T_WHITESPACE"," ",406],"{",["T_WHITESPACE","\n            ",406],["T_COMMENT","\/\/ (boost factors are not significant for prohibited clauses)\n",407],["T_WHITESPACE","            ",408],["T_COMMENT","#require_once 'Zend\/Search\/Lucene\/Search\/Query\/Term.php';\n",408],["T_WHITESPACE","            ",409],["T_VARIABLE","$subqueries",409],"[","]",["T_WHITESPACE"," ",409],"=",["T_WHITESPACE"," ",409],["T_NEW","new",409],["T_WHITESPACE"," ",409],["T_STRING","Zend_Search_Lucene_Search_Query_Term",409],"(",["T_STRING","reset",409],"(",["T_VARIABLE","$prohibitedTerms",409],")",")",";",["T_WHITESPACE","\n            ",409],["T_VARIABLE","$signs",410],"[","]",["T_WHITESPACE","      ",410],"=",["T_WHITESPACE"," ",410],["T_STRING","false",410],";",["T_WHITESPACE","\n\n            ",410],["T_COMMENT","\/\/ Clear prohibited terms list\n",412],["T_WHITESPACE","            ",413],["T_VARIABLE","$prohibitedTerms",413],["T_WHITESPACE"," ",413],"=",["T_WHITESPACE"," ",413],["T_ARRAY","array",413],"(",")",";",["T_WHITESPACE","\n        ",413],"}",["T_WHITESPACE"," ",414],["T_ELSE","else",414],["T_WHITESPACE"," ",414],["T_IF","if",414],["T_WHITESPACE"," ",414],"(",["T_STRING","count",414],"(",["T_VARIABLE","$prohibitedTerms",414],")",["T_WHITESPACE"," ",414],">",["T_WHITESPACE"," ",414],["T_LNUMBER","1",414],")",["T_WHITESPACE"," ",414],"{",["T_WHITESPACE","\n            ",414],["T_COMMENT","\/\/ prepare signs array\n",415],["T_WHITESPACE","            ",416],["T_VARIABLE","$prohibitedSigns",416],["T_WHITESPACE"," ",416],"=",["T_WHITESPACE"," ",416],["T_ARRAY","array",416],"(",")",";",["T_WHITESPACE","\n            ",416],["T_FOREACH","foreach",417],["T_WHITESPACE"," ",417],"(",["T_VARIABLE","$prohibitedTerms",417],["T_WHITESPACE"," ",417],["T_AS","as",417],["T_WHITESPACE"," ",417],["T_VARIABLE","$id",417],["T_WHITESPACE"," ",417],["T_DOUBLE_ARROW","=>",417],["T_WHITESPACE"," ",417],["T_VARIABLE","$term",417],")",["T_WHITESPACE"," ",417],"{",["T_WHITESPACE","\n                ",417],["T_COMMENT","\/\/ all prohibited term are grouped as optional into multi-term query\n",418],["T_WHITESPACE","                ",419],["T_VARIABLE","$prohibitedSigns",419],"[",["T_VARIABLE","$id",419],"]",["T_WHITESPACE"," ",419],"=",["T_WHITESPACE"," ",419],["T_STRING","null",419],";",["T_WHITESPACE","\n            ",419],"}",["T_WHITESPACE","\n\n            ",420],["T_COMMENT","\/\/ (boost factors are not significant for prohibited clauses)\n",422],["T_WHITESPACE","            ",423],["T_COMMENT","#require_once 'Zend\/Search\/Lucene\/Search\/Query\/MultiTerm.php';\n",423],["T_WHITESPACE","            ",424],["T_VARIABLE","$subqueries",424],"[","]",["T_WHITESPACE"," ",424],"=",["T_WHITESPACE"," ",424],["T_NEW","new",424],["T_WHITESPACE"," ",424],["T_STRING","Zend_Search_Lucene_Search_Query_MultiTerm",424],"(",["T_VARIABLE","$prohibitedTerms",424],",",["T_WHITESPACE"," ",424],["T_VARIABLE","$prohibitedSigns",424],")",";",["T_WHITESPACE","\n            ",424],["T_COMMENT","\/\/ Clause sign is 'prohibited'\n",425],["T_WHITESPACE","            ",426],["T_VARIABLE","$signs",426],"[","]",["T_WHITESPACE","      ",426],"=",["T_WHITESPACE"," ",426],["T_STRING","false",426],";",["T_WHITESPACE","\n\n            ",426],["T_COMMENT","\/\/ Clear terms list\n",428],["T_WHITESPACE","            ",429],["T_VARIABLE","$prohibitedTerms",429],["T_WHITESPACE"," ",429],"=",["T_WHITESPACE"," ",429],["T_ARRAY","array",429],"(",")",";",["T_WHITESPACE","\n        ",429],"}",["T_WHITESPACE","\n\n        ",430],["T_DOC_COMMENT","\/** @todo Group terms with the same boost factors together *\/",432],["T_WHITESPACE","\n\n        ",432],["T_COMMENT","\/\/ Check, that all terms are processed\n",434],["T_WHITESPACE","        ",435],["T_COMMENT","\/\/ Replace candidate for optimized query\n",435],["T_WHITESPACE","        ",436],["T_IF","if",436],["T_WHITESPACE"," ",436],"(",["T_STRING","count",436],"(",["T_VARIABLE","$terms",436],")",["T_WHITESPACE"," ",436],["T_IS_EQUAL","==",436],["T_WHITESPACE"," ",436],["T_LNUMBER","0",436],["T_WHITESPACE","  ",436],["T_BOOLEAN_AND","&&",436],["T_WHITESPACE","  ",436],["T_STRING","count",436],"(",["T_VARIABLE","$prohibitedTerms",436],")",["T_WHITESPACE"," ",436],["T_IS_EQUAL","==",436],["T_WHITESPACE"," ",436],["T_LNUMBER","0",436],")",["T_WHITESPACE"," ",436],"{",["T_WHITESPACE","\n            ",436],["T_VARIABLE","$optimizedQuery",437],["T_WHITESPACE"," ",437],"=",["T_WHITESPACE"," ",437],["T_NEW","new",437],["T_WHITESPACE"," ",437],["T_STRING","Zend_Search_Lucene_Search_Query_Boolean",437],"(",["T_VARIABLE","$subqueries",437],",",["T_WHITESPACE"," ",437],["T_VARIABLE","$signs",437],")",";",["T_WHITESPACE","\n            ",437],["T_VARIABLE","$optimizedQuery",438],["T_OBJECT_OPERATOR","->",438],["T_STRING","setBoost",438],"(",["T_VARIABLE","$this",438],["T_OBJECT_OPERATOR","->",438],["T_STRING","getBoost",438],"(",")",")",";",["T_WHITESPACE","\n        ",438],"}",["T_WHITESPACE","\n\n        ",439],["T_RETURN","return",441],["T_WHITESPACE"," ",441],["T_VARIABLE","$optimizedQuery",441],";",["T_WHITESPACE","\n    ",441],"}",["T_WHITESPACE","\n\n    ",442],["T_DOC_COMMENT","\/**\n     * Returns subqueries\n     *\n     * @return array\n     *\/",444],["T_WHITESPACE","\n    ",448],["T_PUBLIC","public",449],["T_WHITESPACE"," ",449],["T_FUNCTION","function",449],["T_WHITESPACE"," ",449],["T_STRING","getSubqueries",449],"(",")",["T_WHITESPACE","\n    ",449],"{",["T_WHITESPACE","\n        ",450],["T_RETURN","return",451],["T_WHITESPACE"," ",451],["T_VARIABLE","$this",451],["T_OBJECT_OPERATOR","->",451],["T_STRING","_subqueries",451],";",["T_WHITESPACE","\n    ",451],"}",["T_WHITESPACE","\n\n\n    ",452],["T_DOC_COMMENT","\/**\n     * Return subqueries signs\n     *\n     * @return array\n     *\/",455],["T_WHITESPACE","\n    ",459],["T_PUBLIC","public",460],["T_WHITESPACE"," ",460],["T_FUNCTION","function",460],["T_WHITESPACE"," ",460],["T_STRING","getSigns",460],"(",")",["T_WHITESPACE","\n    ",460],"{",["T_WHITESPACE","\n        ",461],["T_RETURN","return",462],["T_WHITESPACE"," ",462],["T_VARIABLE","$this",462],["T_OBJECT_OPERATOR","->",462],["T_STRING","_signs",462],";",["T_WHITESPACE","\n    ",462],"}",["T_WHITESPACE","\n\n\n    ",463],["T_DOC_COMMENT","\/**\n     * Constructs an appropriate Weight implementation for this query.\n     *\n     * @param Zend_Search_Lucene_Interface $reader\n     * @return Zend_Search_Lucene_Search_Weight\n     *\/",466],["T_WHITESPACE","\n    ",471],["T_PUBLIC","public",472],["T_WHITESPACE"," ",472],["T_FUNCTION","function",472],["T_WHITESPACE"," ",472],["T_STRING","createWeight",472],"(",["T_STRING","Zend_Search_Lucene_Interface",472],["T_WHITESPACE"," ",472],["T_VARIABLE","$reader",472],")",["T_WHITESPACE","\n    ",472],"{",["T_WHITESPACE","\n        ",473],["T_COMMENT","#require_once 'Zend\/Search\/Lucene\/Search\/Weight\/Boolean.php';\n",474],["T_WHITESPACE","        ",475],["T_VARIABLE","$this",475],["T_OBJECT_OPERATOR","->",475],["T_STRING","_weight",475],["T_WHITESPACE"," ",475],"=",["T_WHITESPACE"," ",475],["T_NEW","new",475],["T_WHITESPACE"," ",475],["T_STRING","Zend_Search_Lucene_Search_Weight_Boolean",475],"(",["T_VARIABLE","$this",475],",",["T_WHITESPACE"," ",475],["T_VARIABLE","$reader",475],")",";",["T_WHITESPACE","\n        ",475],["T_RETURN","return",476],["T_WHITESPACE"," ",476],["T_VARIABLE","$this",476],["T_OBJECT_OPERATOR","->",476],["T_STRING","_weight",476],";",["T_WHITESPACE","\n    ",476],"}",["T_WHITESPACE","\n\n\n    ",477],["T_DOC_COMMENT","\/**\n     * Calculate result vector for Conjunction query\n     * (like '<subquery1> AND <subquery2> AND <subquery3>')\n     *\/",480],["T_WHITESPACE","\n    ",483],["T_PRIVATE","private",484],["T_WHITESPACE"," ",484],["T_FUNCTION","function",484],["T_WHITESPACE"," ",484],["T_STRING","_calculateConjunctionResult",484],"(",")",["T_WHITESPACE","\n    ",484],"{",["T_WHITESPACE","\n        ",485],["T_VARIABLE","$this",486],["T_OBJECT_OPERATOR","->",486],["T_STRING","_resVector",486],["T_WHITESPACE"," ",486],"=",["T_WHITESPACE"," ",486],["T_STRING","null",486],";",["T_WHITESPACE","\n\n        ",486],["T_IF","if",488],["T_WHITESPACE"," ",488],"(",["T_STRING","count",488],"(",["T_VARIABLE","$this",488],["T_OBJECT_OPERATOR","->",488],["T_STRING","_subqueries",488],")",["T_WHITESPACE"," ",488],["T_IS_EQUAL","==",488],["T_WHITESPACE"," ",488],["T_LNUMBER","0",488],")",["T_WHITESPACE"," ",488],"{",["T_WHITESPACE","\n            ",488],["T_VARIABLE","$this",489],["T_OBJECT_OPERATOR","->",489],["T_STRING","_resVector",489],["T_WHITESPACE"," ",489],"=",["T_WHITESPACE"," ",489],["T_ARRAY","array",489],"(",")",";",["T_WHITESPACE","\n        ",489],"}",["T_WHITESPACE","\n\n        ",490],["T_VARIABLE","$resVectors",492],["T_WHITESPACE","      ",492],"=",["T_WHITESPACE"," ",492],["T_ARRAY","array",492],"(",")",";",["T_WHITESPACE","\n        ",492],["T_VARIABLE","$resVectorsSizes",493],["T_WHITESPACE"," ",493],"=",["T_WHITESPACE"," ",493],["T_ARRAY","array",493],"(",")",";",["T_WHITESPACE","\n        ",493],["T_VARIABLE","$resVectorsIds",494],["T_WHITESPACE","   ",494],"=",["T_WHITESPACE"," ",494],["T_ARRAY","array",494],"(",")",";",["T_WHITESPACE"," ",494],["T_COMMENT","\/\/ is used to prevent arrays comparison\n",494],["T_WHITESPACE","        ",495],["T_FOREACH","foreach",495],["T_WHITESPACE"," ",495],"(",["T_VARIABLE","$this",495],["T_OBJECT_OPERATOR","->",495],["T_STRING","_subqueries",495],["T_WHITESPACE"," ",495],["T_AS","as",495],["T_WHITESPACE"," ",495],["T_VARIABLE","$subqueryId",495],["T_WHITESPACE"," ",495],["T_DOUBLE_ARROW","=>",495],["T_WHITESPACE"," ",495],["T_VARIABLE","$subquery",495],")",["T_WHITESPACE"," ",495],"{",["T_WHITESPACE","\n            ",495],["T_VARIABLE","$resVectors",496],"[","]",["T_WHITESPACE","      ",496],"=",["T_WHITESPACE"," ",496],["T_VARIABLE","$subquery",496],["T_OBJECT_OPERATOR","->",496],["T_STRING","matchedDocs",496],"(",")",";",["T_WHITESPACE","\n            ",496],["T_VARIABLE","$resVectorsSizes",497],"[","]",["T_WHITESPACE"," ",497],"=",["T_WHITESPACE"," ",497],["T_STRING","count",497],"(",["T_STRING","end",497],"(",["T_VARIABLE","$resVectors",497],")",")",";",["T_WHITESPACE","\n            ",497],["T_VARIABLE","$resVectorsIds",498],"[","]",["T_WHITESPACE","   ",498],"=",["T_WHITESPACE"," ",498],["T_VARIABLE","$subqueryId",498],";",["T_WHITESPACE","\n        ",498],"}",["T_WHITESPACE","\n        ",499],["T_COMMENT","\/\/ sort resvectors in order of subquery cardinality increasing\n",500],["T_WHITESPACE","        ",501],["T_STRING","array_multisort",501],"(",["T_VARIABLE","$resVectorsSizes",501],",",["T_WHITESPACE"," ",501],["T_STRING","SORT_ASC",501],",",["T_WHITESPACE"," ",501],["T_STRING","SORT_NUMERIC",501],",",["T_WHITESPACE","\n                        ",501],["T_VARIABLE","$resVectorsIds",502],",",["T_WHITESPACE","   ",502],["T_STRING","SORT_ASC",502],",",["T_WHITESPACE"," ",502],["T_STRING","SORT_NUMERIC",502],",",["T_WHITESPACE","\n                        ",502],["T_VARIABLE","$resVectors",503],")",";",["T_WHITESPACE","\n\n        ",503],["T_FOREACH","foreach",505],["T_WHITESPACE"," ",505],"(",["T_VARIABLE","$resVectors",505],["T_WHITESPACE"," ",505],["T_AS","as",505],["T_WHITESPACE"," ",505],["T_VARIABLE","$nextResVector",505],")",["T_WHITESPACE"," ",505],"{",["T_WHITESPACE","\n            ",505],["T_IF","if",506],"(",["T_VARIABLE","$this",506],["T_OBJECT_OPERATOR","->",506],["T_STRING","_resVector",506],["T_WHITESPACE"," ",506],["T_IS_IDENTICAL","===",506],["T_WHITESPACE"," ",506],["T_STRING","null",506],")",["T_WHITESPACE"," ",506],"{",["T_WHITESPACE","\n                ",506],["T_VARIABLE","$this",507],["T_OBJECT_OPERATOR","->",507],["T_STRING","_resVector",507],["T_WHITESPACE"," ",507],"=",["T_WHITESPACE"," ",507],["T_VARIABLE","$nextResVector",507],";",["T_WHITESPACE","\n            ",507],"}",["T_WHITESPACE"," ",508],["T_ELSE","else",508],["T_WHITESPACE"," ",508],"{",["T_WHITESPACE","\n                ",508],["T_COMMENT","\/\/$this->_resVector = array_intersect_key($this->_resVector, $nextResVector);\n",509],["T_WHITESPACE","\n                ",510],["T_DOC_COMMENT","\/**\n                 * This code is used as workaround for array_intersect_key() slowness problem.\n                 *\/",511],["T_WHITESPACE","\n                ",513],["T_VARIABLE","$updatedVector",514],["T_WHITESPACE"," ",514],"=",["T_WHITESPACE"," ",514],["T_ARRAY","array",514],"(",")",";",["T_WHITESPACE","\n                ",514],["T_FOREACH","foreach",515],["T_WHITESPACE"," ",515],"(",["T_VARIABLE","$this",515],["T_OBJECT_OPERATOR","->",515],["T_STRING","_resVector",515],["T_WHITESPACE"," ",515],["T_AS","as",515],["T_WHITESPACE"," ",515],["T_VARIABLE","$id",515],["T_WHITESPACE"," ",515],["T_DOUBLE_ARROW","=>",515],["T_WHITESPACE"," ",515],["T_VARIABLE","$value",515],")",["T_WHITESPACE"," ",515],"{",["T_WHITESPACE","\n                    ",515],["T_IF","if",516],["T_WHITESPACE"," ",516],"(",["T_ISSET","isset",516],"(",["T_VARIABLE","$nextResVector",516],"[",["T_VARIABLE","$id",516],"]",")",")",["T_WHITESPACE"," ",516],"{",["T_WHITESPACE","\n                        ",516],["T_VARIABLE","$updatedVector",517],"[",["T_VARIABLE","$id",517],"]",["T_WHITESPACE"," ",517],"=",["T_WHITESPACE"," ",517],["T_VARIABLE","$value",517],";",["T_WHITESPACE","\n                    ",517],"}",["T_WHITESPACE","\n                ",518],"}",["T_WHITESPACE","\n                ",519],["T_VARIABLE","$this",520],["T_OBJECT_OPERATOR","->",520],["T_STRING","_resVector",520],["T_WHITESPACE"," ",520],"=",["T_WHITESPACE"," ",520],["T_VARIABLE","$updatedVector",520],";",["T_WHITESPACE","\n            ",520],"}",["T_WHITESPACE","\n\n            ",521],["T_IF","if",523],["T_WHITESPACE"," ",523],"(",["T_STRING","count",523],"(",["T_VARIABLE","$this",523],["T_OBJECT_OPERATOR","->",523],["T_STRING","_resVector",523],")",["T_WHITESPACE"," ",523],["T_IS_EQUAL","==",523],["T_WHITESPACE"," ",523],["T_LNUMBER","0",523],")",["T_WHITESPACE"," ",523],"{",["T_WHITESPACE","\n                ",523],["T_COMMENT","\/\/ Empty result set, we don't need to check other terms\n",524],["T_WHITESPACE","                ",525],["T_BREAK","break",525],";",["T_WHITESPACE","\n            ",525],"}",["T_WHITESPACE","\n        ",526],"}",["T_WHITESPACE","\n\n        ",527],["T_COMMENT","\/\/ ksort($this->_resVector, SORT_NUMERIC);\n",529],["T_WHITESPACE","        ",530],["T_COMMENT","\/\/ Used algorithm doesn't change elements order\n",530],["T_WHITESPACE","    ",531],"}",["T_WHITESPACE","\n\n\n    ",531],["T_DOC_COMMENT","\/**\n     * Calculate result vector for non Conjunction query\n     * (like '<subquery1> AND <subquery2> AND NOT <subquery3> OR <subquery4>')\n     *\/",534],["T_WHITESPACE","\n    ",537],["T_PRIVATE","private",538],["T_WHITESPACE"," ",538],["T_FUNCTION","function",538],["T_WHITESPACE"," ",538],["T_STRING","_calculateNonConjunctionResult",538],"(",")",["T_WHITESPACE","\n    ",538],"{",["T_WHITESPACE","\n        ",539],["T_VARIABLE","$requiredVectors",540],["T_WHITESPACE","      ",540],"=",["T_WHITESPACE"," ",540],["T_ARRAY","array",540],"(",")",";",["T_WHITESPACE","\n        ",540],["T_VARIABLE","$requiredVectorsSizes",541],["T_WHITESPACE"," ",541],"=",["T_WHITESPACE"," ",541],["T_ARRAY","array",541],"(",")",";",["T_WHITESPACE","\n        ",541],["T_VARIABLE","$requiredVectorsIds",542],["T_WHITESPACE","   ",542],"=",["T_WHITESPACE"," ",542],["T_ARRAY","array",542],"(",")",";",["T_WHITESPACE"," ",542],["T_COMMENT","\/\/ is used to prevent arrays comparison\n",542],["T_WHITESPACE","\n        ",543],["T_VARIABLE","$optional",544],["T_WHITESPACE"," ",544],"=",["T_WHITESPACE"," ",544],["T_ARRAY","array",544],"(",")",";",["T_WHITESPACE","\n\n        ",544],["T_FOREACH","foreach",546],["T_WHITESPACE"," ",546],"(",["T_VARIABLE","$this",546],["T_OBJECT_OPERATOR","->",546],["T_STRING","_subqueries",546],["T_WHITESPACE"," ",546],["T_AS","as",546],["T_WHITESPACE"," ",546],["T_VARIABLE","$subqueryId",546],["T_WHITESPACE"," ",546],["T_DOUBLE_ARROW","=>",546],["T_WHITESPACE"," ",546],["T_VARIABLE","$subquery",546],")",["T_WHITESPACE"," ",546],"{",["T_WHITESPACE","\n            ",546],["T_IF","if",547],["T_WHITESPACE"," ",547],"(",["T_VARIABLE","$this",547],["T_OBJECT_OPERATOR","->",547],["T_STRING","_signs",547],"[",["T_VARIABLE","$subqueryId",547],"]",["T_WHITESPACE"," ",547],["T_IS_IDENTICAL","===",547],["T_WHITESPACE"," ",547],["T_STRING","true",547],")",["T_WHITESPACE"," ",547],"{",["T_WHITESPACE","\n                ",547],["T_COMMENT","\/\/ required\n",548],["T_WHITESPACE","                ",549],["T_VARIABLE","$requiredVectors",549],"[","]",["T_WHITESPACE","      ",549],"=",["T_WHITESPACE"," ",549],["T_VARIABLE","$subquery",549],["T_OBJECT_OPERATOR","->",549],["T_STRING","matchedDocs",549],"(",")",";",["T_WHITESPACE","\n                ",549],["T_VARIABLE","$requiredVectorsSizes",550],"[","]",["T_WHITESPACE"," ",550],"=",["T_WHITESPACE"," ",550],["T_STRING","count",550],"(",["T_STRING","end",550],"(",["T_VARIABLE","$requiredVectors",550],")",")",";",["T_WHITESPACE","\n                ",550],["T_VARIABLE","$requiredVectorsIds",551],"[","]",["T_WHITESPACE","   ",551],"=",["T_WHITESPACE"," ",551],["T_VARIABLE","$subqueryId",551],";",["T_WHITESPACE","\n            ",551],"}",["T_WHITESPACE"," ",552],["T_ELSEIF","elseif",552],["T_WHITESPACE"," ",552],"(",["T_VARIABLE","$this",552],["T_OBJECT_OPERATOR","->",552],["T_STRING","_signs",552],"[",["T_VARIABLE","$subqueryId",552],"]",["T_WHITESPACE"," ",552],["T_IS_IDENTICAL","===",552],["T_WHITESPACE"," ",552],["T_STRING","false",552],")",["T_WHITESPACE"," ",552],"{",["T_WHITESPACE","\n                ",552],["T_COMMENT","\/\/ prohibited\n",553],["T_WHITESPACE","                ",554],["T_COMMENT","\/\/ Do nothing. matchedDocs() may include non-matching id's\n",554],["T_WHITESPACE","                ",555],["T_COMMENT","\/\/ Calculating prohibited vector may take significant time, but do not affect the result\n",555],["T_WHITESPACE","                ",556],["T_COMMENT","\/\/ Skipped.\n",556],["T_WHITESPACE","            ",557],"}",["T_WHITESPACE"," ",557],["T_ELSE","else",557],["T_WHITESPACE"," ",557],"{",["T_WHITESPACE","\n                ",557],["T_COMMENT","\/\/ neither required, nor prohibited\n",558],["T_WHITESPACE","                ",559],["T_COMMENT","\/\/ array union\n",559],["T_WHITESPACE","                ",560],["T_VARIABLE","$optional",560],["T_WHITESPACE"," ",560],["T_PLUS_EQUAL","+=",560],["T_WHITESPACE"," ",560],["T_VARIABLE","$subquery",560],["T_OBJECT_OPERATOR","->",560],["T_STRING","matchedDocs",560],"(",")",";",["T_WHITESPACE","\n            ",560],"}",["T_WHITESPACE","\n        ",561],"}",["T_WHITESPACE","\n\n        ",562],["T_COMMENT","\/\/ sort resvectors in order of subquery cardinality increasing\n",564],["T_WHITESPACE","        ",565],["T_STRING","array_multisort",565],"(",["T_VARIABLE","$requiredVectorsSizes",565],",",["T_WHITESPACE"," ",565],["T_STRING","SORT_ASC",565],",",["T_WHITESPACE"," ",565],["T_STRING","SORT_NUMERIC",565],",",["T_WHITESPACE","\n                        ",565],["T_VARIABLE","$requiredVectorsIds",566],",",["T_WHITESPACE","   ",566],["T_STRING","SORT_ASC",566],",",["T_WHITESPACE"," ",566],["T_STRING","SORT_NUMERIC",566],",",["T_WHITESPACE","\n                        ",566],["T_VARIABLE","$requiredVectors",567],")",";",["T_WHITESPACE","\n\n        ",567],["T_VARIABLE","$required",569],["T_WHITESPACE"," ",569],"=",["T_WHITESPACE"," ",569],["T_STRING","null",569],";",["T_WHITESPACE","\n        ",569],["T_FOREACH","foreach",570],["T_WHITESPACE"," ",570],"(",["T_VARIABLE","$requiredVectors",570],["T_WHITESPACE"," ",570],["T_AS","as",570],["T_WHITESPACE"," ",570],["T_VARIABLE","$nextResVector",570],")",["T_WHITESPACE"," ",570],"{",["T_WHITESPACE","\n            ",570],["T_IF","if",571],"(",["T_VARIABLE","$required",571],["T_WHITESPACE"," ",571],["T_IS_IDENTICAL","===",571],["T_WHITESPACE"," ",571],["T_STRING","null",571],")",["T_WHITESPACE"," ",571],"{",["T_WHITESPACE","\n                ",571],["T_VARIABLE","$required",572],["T_WHITESPACE"," ",572],"=",["T_WHITESPACE"," ",572],["T_VARIABLE","$nextResVector",572],";",["T_WHITESPACE","\n            ",572],"}",["T_WHITESPACE"," ",573],["T_ELSE","else",573],["T_WHITESPACE"," ",573],"{",["T_WHITESPACE","\n                ",573],["T_COMMENT","\/\/$required = array_intersect_key($required, $nextResVector);\n",574],["T_WHITESPACE","\n                ",575],["T_DOC_COMMENT","\/**\n                 * This code is used as workaround for array_intersect_key() slowness problem.\n                 *\/",576],["T_WHITESPACE","\n                ",578],["T_VARIABLE","$updatedVector",579],["T_WHITESPACE"," ",579],"=",["T_WHITESPACE"," ",579],["T_ARRAY","array",579],"(",")",";",["T_WHITESPACE","\n                ",579],["T_FOREACH","foreach",580],["T_WHITESPACE"," ",580],"(",["T_VARIABLE","$required",580],["T_WHITESPACE"," ",580],["T_AS","as",580],["T_WHITESPACE"," ",580],["T_VARIABLE","$id",580],["T_WHITESPACE"," ",580],["T_DOUBLE_ARROW","=>",580],["T_WHITESPACE"," ",580],["T_VARIABLE","$value",580],")",["T_WHITESPACE"," ",580],"{",["T_WHITESPACE","\n                    ",580],["T_IF","if",581],["T_WHITESPACE"," ",581],"(",["T_ISSET","isset",581],"(",["T_VARIABLE","$nextResVector",581],"[",["T_VARIABLE","$id",581],"]",")",")",["T_WHITESPACE"," ",581],"{",["T_WHITESPACE","\n                        ",581],["T_VARIABLE","$updatedVector",582],"[",["T_VARIABLE","$id",582],"]",["T_WHITESPACE"," ",582],"=",["T_WHITESPACE"," ",582],["T_VARIABLE","$value",582],";",["T_WHITESPACE","\n                    ",582],"}",["T_WHITESPACE","\n                ",583],"}",["T_WHITESPACE","\n                ",584],["T_VARIABLE","$required",585],["T_WHITESPACE"," ",585],"=",["T_WHITESPACE"," ",585],["T_VARIABLE","$updatedVector",585],";",["T_WHITESPACE","\n            ",585],"}",["T_WHITESPACE","\n\n            ",586],["T_IF","if",588],["T_WHITESPACE"," ",588],"(",["T_STRING","count",588],"(",["T_VARIABLE","$required",588],")",["T_WHITESPACE"," ",588],["T_IS_EQUAL","==",588],["T_WHITESPACE"," ",588],["T_LNUMBER","0",588],")",["T_WHITESPACE"," ",588],"{",["T_WHITESPACE","\n                ",588],["T_COMMENT","\/\/ Empty result set, we don't need to check other terms\n",589],["T_WHITESPACE","                ",590],["T_BREAK","break",590],";",["T_WHITESPACE","\n            ",590],"}",["T_WHITESPACE","\n        ",591],"}",["T_WHITESPACE","\n\n\n        ",592],["T_IF","if",595],["T_WHITESPACE"," ",595],"(",["T_VARIABLE","$required",595],["T_WHITESPACE"," ",595],["T_IS_NOT_IDENTICAL","!==",595],["T_WHITESPACE"," ",595],["T_STRING","null",595],")",["T_WHITESPACE"," ",595],"{",["T_WHITESPACE","\n            ",595],["T_VARIABLE","$this",596],["T_OBJECT_OPERATOR","->",596],["T_STRING","_resVector",596],["T_WHITESPACE"," ",596],"=",["T_WHITESPACE"," ",596],"&",["T_VARIABLE","$required",596],";",["T_WHITESPACE","\n        ",596],"}",["T_WHITESPACE"," ",597],["T_ELSE","else",597],["T_WHITESPACE"," ",597],"{",["T_WHITESPACE","\n            ",597],["T_VARIABLE","$this",598],["T_OBJECT_OPERATOR","->",598],["T_STRING","_resVector",598],["T_WHITESPACE"," ",598],"=",["T_WHITESPACE"," ",598],"&",["T_VARIABLE","$optional",598],";",["T_WHITESPACE","\n        ",598],"}",["T_WHITESPACE","\n\n        ",599],["T_STRING","ksort",601],"(",["T_VARIABLE","$this",601],["T_OBJECT_OPERATOR","->",601],["T_STRING","_resVector",601],",",["T_WHITESPACE"," ",601],["T_STRING","SORT_NUMERIC",601],")",";",["T_WHITESPACE","\n    ",601],"}",["T_WHITESPACE","\n\n\n    ",602],["T_DOC_COMMENT","\/**\n     * Score calculator for conjunction queries (all subqueries are required)\n     *\n     * @param integer $docId\n     * @param Zend_Search_Lucene_Interface $reader\n     * @return float\n     *\/",605],["T_WHITESPACE","\n    ",611],["T_PUBLIC","public",612],["T_WHITESPACE"," ",612],["T_FUNCTION","function",612],["T_WHITESPACE"," ",612],["T_STRING","_conjunctionScore",612],"(",["T_VARIABLE","$docId",612],",",["T_WHITESPACE"," ",612],["T_STRING","Zend_Search_Lucene_Interface",612],["T_WHITESPACE"," ",612],["T_VARIABLE","$reader",612],")",["T_WHITESPACE","\n    ",612],"{",["T_WHITESPACE","\n        ",613],["T_IF","if",614],["T_WHITESPACE"," ",614],"(",["T_VARIABLE","$this",614],["T_OBJECT_OPERATOR","->",614],["T_STRING","_coord",614],["T_WHITESPACE"," ",614],["T_IS_IDENTICAL","===",614],["T_WHITESPACE"," ",614],["T_STRING","null",614],")",["T_WHITESPACE"," ",614],"{",["T_WHITESPACE","\n            ",614],["T_VARIABLE","$this",615],["T_OBJECT_OPERATOR","->",615],["T_STRING","_coord",615],["T_WHITESPACE"," ",615],"=",["T_WHITESPACE"," ",615],["T_VARIABLE","$reader",615],["T_OBJECT_OPERATOR","->",615],["T_STRING","getSimilarity",615],"(",")",["T_OBJECT_OPERATOR","->",615],["T_STRING","coord",615],"(",["T_STRING","count",615],"(",["T_VARIABLE","$this",615],["T_OBJECT_OPERATOR","->",615],["T_STRING","_subqueries",615],")",",",["T_WHITESPACE","\n                                                            ",615],["T_STRING","count",616],"(",["T_VARIABLE","$this",616],["T_OBJECT_OPERATOR","->",616],["T_STRING","_subqueries",616],")",["T_WHITESPACE"," ",616],")",";",["T_WHITESPACE","\n        ",616],"}",["T_WHITESPACE","\n\n        ",617],["T_VARIABLE","$score",619],["T_WHITESPACE"," ",619],"=",["T_WHITESPACE"," ",619],["T_LNUMBER","0",619],";",["T_WHITESPACE","\n\n        ",619],["T_FOREACH","foreach",621],["T_WHITESPACE"," ",621],"(",["T_VARIABLE","$this",621],["T_OBJECT_OPERATOR","->",621],["T_STRING","_subqueries",621],["T_WHITESPACE"," ",621],["T_AS","as",621],["T_WHITESPACE"," ",621],["T_VARIABLE","$subquery",621],")",["T_WHITESPACE"," ",621],"{",["T_WHITESPACE","\n            ",621],["T_VARIABLE","$subscore",622],["T_WHITESPACE"," ",622],"=",["T_WHITESPACE"," ",622],["T_VARIABLE","$subquery",622],["T_OBJECT_OPERATOR","->",622],["T_STRING","score",622],"(",["T_VARIABLE","$docId",622],",",["T_WHITESPACE"," ",622],["T_VARIABLE","$reader",622],")",";",["T_WHITESPACE","\n\n            ",622],["T_IF","if",624],["T_WHITESPACE"," ",624],"(",["T_VARIABLE","$subscore",624],["T_WHITESPACE"," ",624],["T_IS_EQUAL","==",624],["T_WHITESPACE"," ",624],["T_LNUMBER","0",624],")",["T_WHITESPACE"," ",624],"{",["T_WHITESPACE","\n                ",624],["T_RETURN","return",625],["T_WHITESPACE"," ",625],["T_LNUMBER","0",625],";",["T_WHITESPACE","\n            ",625],"}",["T_WHITESPACE","\n\n            ",626],["T_VARIABLE","$score",628],["T_WHITESPACE"," ",628],["T_PLUS_EQUAL","+=",628],["T_WHITESPACE"," ",628],["T_VARIABLE","$subquery",628],["T_OBJECT_OPERATOR","->",628],["T_STRING","score",628],"(",["T_VARIABLE","$docId",628],",",["T_WHITESPACE"," ",628],["T_VARIABLE","$reader",628],")",["T_WHITESPACE"," ",628],"*",["T_WHITESPACE"," ",628],["T_VARIABLE","$this",628],["T_OBJECT_OPERATOR","->",628],["T_STRING","_coord",628],";",["T_WHITESPACE","\n        ",628],"}",["T_WHITESPACE","\n\n        ",629],["T_RETURN","return",631],["T_WHITESPACE"," ",631],["T_VARIABLE","$score",631],["T_WHITESPACE"," ",631],"*",["T_WHITESPACE"," ",631],["T_VARIABLE","$this",631],["T_OBJECT_OPERATOR","->",631],["T_STRING","_coord",631],["T_WHITESPACE"," ",631],"*",["T_WHITESPACE"," ",631],["T_VARIABLE","$this",631],["T_OBJECT_OPERATOR","->",631],["T_STRING","getBoost",631],"(",")",";",["T_WHITESPACE","\n    ",631],"}",["T_WHITESPACE","\n\n\n    ",632],["T_DOC_COMMENT","\/**\n     * Score calculator for non conjunction queries (not all subqueries are required)\n     *\n     * @param integer $docId\n     * @param Zend_Search_Lucene_Interface $reader\n     * @return float\n     *\/",635],["T_WHITESPACE","\n    ",641],["T_PUBLIC","public",642],["T_WHITESPACE"," ",642],["T_FUNCTION","function",642],["T_WHITESPACE"," ",642],["T_STRING","_nonConjunctionScore",642],"(",["T_VARIABLE","$docId",642],",",["T_WHITESPACE"," ",642],["T_STRING","Zend_Search_Lucene_Interface",642],["T_WHITESPACE"," ",642],["T_VARIABLE","$reader",642],")",["T_WHITESPACE","\n    ",642],"{",["T_WHITESPACE","\n        ",643],["T_IF","if",644],["T_WHITESPACE"," ",644],"(",["T_VARIABLE","$this",644],["T_OBJECT_OPERATOR","->",644],["T_STRING","_coord",644],["T_WHITESPACE"," ",644],["T_IS_IDENTICAL","===",644],["T_WHITESPACE"," ",644],["T_STRING","null",644],")",["T_WHITESPACE"," ",644],"{",["T_WHITESPACE","\n            ",644],["T_VARIABLE","$this",645],["T_OBJECT_OPERATOR","->",645],["T_STRING","_coord",645],["T_WHITESPACE"," ",645],"=",["T_WHITESPACE"," ",645],["T_ARRAY","array",645],"(",")",";",["T_WHITESPACE","\n\n            ",645],["T_VARIABLE","$maxCoord",647],["T_WHITESPACE"," ",647],"=",["T_WHITESPACE"," ",647],["T_LNUMBER","0",647],";",["T_WHITESPACE","\n            ",647],["T_FOREACH","foreach",648],["T_WHITESPACE"," ",648],"(",["T_VARIABLE","$this",648],["T_OBJECT_OPERATOR","->",648],["T_STRING","_signs",648],["T_WHITESPACE"," ",648],["T_AS","as",648],["T_WHITESPACE"," ",648],["T_VARIABLE","$sign",648],")",["T_WHITESPACE"," ",648],"{",["T_WHITESPACE","\n                ",648],["T_IF","if",649],["T_WHITESPACE"," ",649],"(",["T_VARIABLE","$sign",649],["T_WHITESPACE"," ",649],["T_IS_NOT_IDENTICAL","!==",649],["T_WHITESPACE"," ",649],["T_STRING","false",649],["T_WHITESPACE"," ",649],["T_COMMENT","\/* not prohibited *\/",649],")",["T_WHITESPACE"," ",649],"{",["T_WHITESPACE","\n                    ",649],["T_VARIABLE","$maxCoord",650],["T_INC","++",650],";",["T_WHITESPACE","\n                ",650],"}",["T_WHITESPACE","\n            ",651],"}",["T_WHITESPACE","\n\n            ",652],["T_FOR","for",654],["T_WHITESPACE"," ",654],"(",["T_VARIABLE","$count",654],["T_WHITESPACE"," ",654],"=",["T_WHITESPACE"," ",654],["T_LNUMBER","0",654],";",["T_WHITESPACE"," ",654],["T_VARIABLE","$count",654],["T_WHITESPACE"," ",654],["T_IS_SMALLER_OR_EQUAL","<=",654],["T_WHITESPACE"," ",654],["T_VARIABLE","$maxCoord",654],";",["T_WHITESPACE"," ",654],["T_VARIABLE","$count",654],["T_INC","++",654],")",["T_WHITESPACE"," ",654],"{",["T_WHITESPACE","\n                ",654],["T_VARIABLE","$this",655],["T_OBJECT_OPERATOR","->",655],["T_STRING","_coord",655],"[",["T_VARIABLE","$count",655],"]",["T_WHITESPACE"," ",655],"=",["T_WHITESPACE"," ",655],["T_VARIABLE","$reader",655],["T_OBJECT_OPERATOR","->",655],["T_STRING","getSimilarity",655],"(",")",["T_OBJECT_OPERATOR","->",655],["T_STRING","coord",655],"(",["T_VARIABLE","$count",655],",",["T_WHITESPACE"," ",655],["T_VARIABLE","$maxCoord",655],")",";",["T_WHITESPACE","\n            ",655],"}",["T_WHITESPACE","\n        ",656],"}",["T_WHITESPACE","\n\n        ",657],["T_VARIABLE","$score",659],["T_WHITESPACE"," ",659],"=",["T_WHITESPACE"," ",659],["T_LNUMBER","0",659],";",["T_WHITESPACE","\n        ",659],["T_VARIABLE","$matchedSubqueries",660],["T_WHITESPACE"," ",660],"=",["T_WHITESPACE"," ",660],["T_LNUMBER","0",660],";",["T_WHITESPACE","\n        ",660],["T_FOREACH","foreach",661],["T_WHITESPACE"," ",661],"(",["T_VARIABLE","$this",661],["T_OBJECT_OPERATOR","->",661],["T_STRING","_subqueries",661],["T_WHITESPACE"," ",661],["T_AS","as",661],["T_WHITESPACE"," ",661],["T_VARIABLE","$subqueryId",661],["T_WHITESPACE"," ",661],["T_DOUBLE_ARROW","=>",661],["T_WHITESPACE"," ",661],["T_VARIABLE","$subquery",661],")",["T_WHITESPACE"," ",661],"{",["T_WHITESPACE","\n            ",661],["T_VARIABLE","$subscore",662],["T_WHITESPACE"," ",662],"=",["T_WHITESPACE"," ",662],["T_VARIABLE","$subquery",662],["T_OBJECT_OPERATOR","->",662],["T_STRING","score",662],"(",["T_VARIABLE","$docId",662],",",["T_WHITESPACE"," ",662],["T_VARIABLE","$reader",662],")",";",["T_WHITESPACE","\n\n            ",662],["T_COMMENT","\/\/ Prohibited\n",664],["T_WHITESPACE","            ",665],["T_IF","if",665],["T_WHITESPACE"," ",665],"(",["T_VARIABLE","$this",665],["T_OBJECT_OPERATOR","->",665],["T_STRING","_signs",665],"[",["T_VARIABLE","$subqueryId",665],"]",["T_WHITESPACE"," ",665],["T_IS_IDENTICAL","===",665],["T_WHITESPACE"," ",665],["T_STRING","false",665],["T_WHITESPACE"," ",665],["T_BOOLEAN_AND","&&",665],["T_WHITESPACE"," ",665],["T_VARIABLE","$subscore",665],["T_WHITESPACE"," ",665],["T_IS_NOT_EQUAL","!=",665],["T_WHITESPACE"," ",665],["T_LNUMBER","0",665],")",["T_WHITESPACE"," ",665],"{",["T_WHITESPACE","\n                ",665],["T_RETURN","return",666],["T_WHITESPACE"," ",666],["T_LNUMBER","0",666],";",["T_WHITESPACE","\n            ",666],"}",["T_WHITESPACE","\n\n            ",667],["T_COMMENT","\/\/ is required, but doen't match\n",669],["T_WHITESPACE","            ",670],["T_IF","if",670],["T_WHITESPACE"," ",670],"(",["T_VARIABLE","$this",670],["T_OBJECT_OPERATOR","->",670],["T_STRING","_signs",670],"[",["T_VARIABLE","$subqueryId",670],"]",["T_WHITESPACE"," ",670],["T_IS_IDENTICAL","===",670],["T_WHITESPACE"," ",670],["T_STRING","true",670],["T_WHITESPACE"," ",670],["T_BOOLEAN_AND","&&",670],["T_WHITESPACE","  ",670],["T_VARIABLE","$subscore",670],["T_WHITESPACE"," ",670],["T_IS_EQUAL","==",670],["T_WHITESPACE"," ",670],["T_LNUMBER","0",670],")",["T_WHITESPACE"," ",670],"{",["T_WHITESPACE","\n                ",670],["T_RETURN","return",671],["T_WHITESPACE"," ",671],["T_LNUMBER","0",671],";",["T_WHITESPACE","\n            ",671],"}",["T_WHITESPACE","\n\n            ",672],["T_IF","if",674],["T_WHITESPACE"," ",674],"(",["T_VARIABLE","$subscore",674],["T_WHITESPACE"," ",674],["T_IS_NOT_EQUAL","!=",674],["T_WHITESPACE"," ",674],["T_LNUMBER","0",674],")",["T_WHITESPACE"," ",674],"{",["T_WHITESPACE","\n                ",674],["T_VARIABLE","$matchedSubqueries",675],["T_INC","++",675],";",["T_WHITESPACE","\n                ",675],["T_VARIABLE","$score",676],["T_WHITESPACE"," ",676],["T_PLUS_EQUAL","+=",676],["T_WHITESPACE"," ",676],["T_VARIABLE","$subscore",676],";",["T_WHITESPACE","\n            ",676],"}",["T_WHITESPACE","\n        ",677],"}",["T_WHITESPACE","\n\n        ",678],["T_RETURN","return",680],["T_WHITESPACE"," ",680],["T_VARIABLE","$score",680],["T_WHITESPACE"," ",680],"*",["T_WHITESPACE"," ",680],["T_VARIABLE","$this",680],["T_OBJECT_OPERATOR","->",680],["T_STRING","_coord",680],"[",["T_VARIABLE","$matchedSubqueries",680],"]",["T_WHITESPACE"," ",680],"*",["T_WHITESPACE"," ",680],["T_VARIABLE","$this",680],["T_OBJECT_OPERATOR","->",680],["T_STRING","getBoost",680],"(",")",";",["T_WHITESPACE","\n    ",680],"}",["T_WHITESPACE","\n\n    ",681],["T_DOC_COMMENT","\/**\n     * Execute query in context of index reader\n     * It also initializes necessary internal structures\n     *\n     * @param Zend_Search_Lucene_Interface $reader\n     * @param Zend_Search_Lucene_Index_DocsFilter|null $docsFilter\n     *\/",683],["T_WHITESPACE","\n    ",689],["T_PUBLIC","public",690],["T_WHITESPACE"," ",690],["T_FUNCTION","function",690],["T_WHITESPACE"," ",690],["T_STRING","execute",690],"(",["T_STRING","Zend_Search_Lucene_Interface",690],["T_WHITESPACE"," ",690],["T_VARIABLE","$reader",690],",",["T_WHITESPACE"," ",690],["T_VARIABLE","$docsFilter",690],["T_WHITESPACE"," ",690],"=",["T_WHITESPACE"," ",690],["T_STRING","null",690],")",["T_WHITESPACE","\n    ",690],"{",["T_WHITESPACE","\n        ",691],["T_COMMENT","\/\/ Initialize weight if it's not done yet\n",692],["T_WHITESPACE","        ",693],["T_VARIABLE","$this",693],["T_OBJECT_OPERATOR","->",693],["T_STRING","_initWeight",693],"(",["T_VARIABLE","$reader",693],")",";",["T_WHITESPACE","\n\n        ",693],["T_IF","if",695],["T_WHITESPACE"," ",695],"(",["T_VARIABLE","$docsFilter",695],["T_WHITESPACE"," ",695],["T_IS_IDENTICAL","===",695],["T_WHITESPACE"," ",695],["T_STRING","null",695],")",["T_WHITESPACE"," ",695],"{",["T_WHITESPACE","\n            ",695],["T_COMMENT","\/\/ Create local documents filter if it's not provided by upper query\n",696],["T_WHITESPACE","            ",697],["T_COMMENT","#require_once 'Zend\/Search\/Lucene\/Index\/DocsFilter.php';\n",697],["T_WHITESPACE","            ",698],["T_VARIABLE","$docsFilter",698],["T_WHITESPACE"," ",698],"=",["T_WHITESPACE"," ",698],["T_NEW","new",698],["T_WHITESPACE"," ",698],["T_STRING","Zend_Search_Lucene_Index_DocsFilter",698],"(",")",";",["T_WHITESPACE","\n        ",698],"}",["T_WHITESPACE","\n\n        ",699],["T_FOREACH","foreach",701],["T_WHITESPACE"," ",701],"(",["T_VARIABLE","$this",701],["T_OBJECT_OPERATOR","->",701],["T_STRING","_subqueries",701],["T_WHITESPACE"," ",701],["T_AS","as",701],["T_WHITESPACE"," ",701],["T_VARIABLE","$subqueryId",701],["T_WHITESPACE"," ",701],["T_DOUBLE_ARROW","=>",701],["T_WHITESPACE"," ",701],["T_VARIABLE","$subquery",701],")",["T_WHITESPACE"," ",701],"{",["T_WHITESPACE","\n            ",701],["T_IF","if",702],["T_WHITESPACE"," ",702],"(",["T_VARIABLE","$this",702],["T_OBJECT_OPERATOR","->",702],["T_STRING","_signs",702],["T_WHITESPACE"," ",702],["T_IS_EQUAL","==",702],["T_WHITESPACE"," ",702],["T_STRING","null",702],["T_WHITESPACE","  ",702],["T_BOOLEAN_OR","||",702],["T_WHITESPACE","  ",702],["T_VARIABLE","$this",702],["T_OBJECT_OPERATOR","->",702],["T_STRING","_signs",702],"[",["T_VARIABLE","$subqueryId",702],"]",["T_WHITESPACE"," ",702],["T_IS_IDENTICAL","===",702],["T_WHITESPACE"," ",702],["T_STRING","true",702],")",["T_WHITESPACE"," ",702],"{",["T_WHITESPACE","\n                ",702],["T_COMMENT","\/\/ Subquery is required\n",703],["T_WHITESPACE","                ",704],["T_VARIABLE","$subquery",704],["T_OBJECT_OPERATOR","->",704],["T_STRING","execute",704],"(",["T_VARIABLE","$reader",704],",",["T_WHITESPACE"," ",704],["T_VARIABLE","$docsFilter",704],")",";",["T_WHITESPACE","\n            ",704],"}",["T_WHITESPACE"," ",705],["T_ELSE","else",705],["T_WHITESPACE"," ",705],"{",["T_WHITESPACE","\n                ",705],["T_VARIABLE","$subquery",706],["T_OBJECT_OPERATOR","->",706],["T_STRING","execute",706],"(",["T_VARIABLE","$reader",706],")",";",["T_WHITESPACE","\n            ",706],"}",["T_WHITESPACE","\n        ",707],"}",["T_WHITESPACE","\n\n        ",708],["T_IF","if",710],["T_WHITESPACE"," ",710],"(",["T_VARIABLE","$this",710],["T_OBJECT_OPERATOR","->",710],["T_STRING","_signs",710],["T_WHITESPACE"," ",710],["T_IS_IDENTICAL","===",710],["T_WHITESPACE"," ",710],["T_STRING","null",710],")",["T_WHITESPACE"," ",710],"{",["T_WHITESPACE","\n            ",710],["T_VARIABLE","$this",711],["T_OBJECT_OPERATOR","->",711],["T_STRING","_calculateConjunctionResult",711],"(",")",";",["T_WHITESPACE","\n        ",711],"}",["T_WHITESPACE"," ",712],["T_ELSE","else",712],["T_WHITESPACE"," ",712],"{",["T_WHITESPACE","\n            ",712],["T_VARIABLE","$this",713],["T_OBJECT_OPERATOR","->",713],["T_STRING","_calculateNonConjunctionResult",713],"(",")",";",["T_WHITESPACE","\n        ",713],"}",["T_WHITESPACE","\n    ",714],"}",["T_WHITESPACE","\n\n\n\n    ",715],["T_DOC_COMMENT","\/**\n     * Get document ids likely matching the query\n     *\n     * It's an array with document ids as keys (performance considerations)\n     *\n     * @return array\n     *\/",719],["T_WHITESPACE","\n    ",725],["T_PUBLIC","public",726],["T_WHITESPACE"," ",726],["T_FUNCTION","function",726],["T_WHITESPACE"," ",726],["T_STRING","matchedDocs",726],"(",")",["T_WHITESPACE","\n    ",726],"{",["T_WHITESPACE","\n        ",727],["T_RETURN","return",728],["T_WHITESPACE"," ",728],["T_VARIABLE","$this",728],["T_OBJECT_OPERATOR","->",728],["T_STRING","_resVector",728],";",["T_WHITESPACE","\n    ",728],"}",["T_WHITESPACE","\n\n    ",729],["T_DOC_COMMENT","\/**\n     * Score specified document\n     *\n     * @param integer $docId\n     * @param Zend_Search_Lucene_Interface $reader\n     * @return float\n     *\/",731],["T_WHITESPACE","\n    ",737],["T_PUBLIC","public",738],["T_WHITESPACE"," ",738],["T_FUNCTION","function",738],["T_WHITESPACE"," ",738],["T_STRING","score",738],"(",["T_VARIABLE","$docId",738],",",["T_WHITESPACE"," ",738],["T_STRING","Zend_Search_Lucene_Interface",738],["T_WHITESPACE"," ",738],["T_VARIABLE","$reader",738],")",["T_WHITESPACE","\n    ",738],"{",["T_WHITESPACE","\n        ",739],["T_IF","if",740],["T_WHITESPACE"," ",740],"(",["T_ISSET","isset",740],"(",["T_VARIABLE","$this",740],["T_OBJECT_OPERATOR","->",740],["T_STRING","_resVector",740],"[",["T_VARIABLE","$docId",740],"]",")",")",["T_WHITESPACE"," ",740],"{",["T_WHITESPACE","\n            ",740],["T_IF","if",741],["T_WHITESPACE"," ",741],"(",["T_VARIABLE","$this",741],["T_OBJECT_OPERATOR","->",741],["T_STRING","_signs",741],["T_WHITESPACE"," ",741],["T_IS_IDENTICAL","===",741],["T_WHITESPACE"," ",741],["T_STRING","null",741],")",["T_WHITESPACE"," ",741],"{",["T_WHITESPACE","\n                ",741],["T_RETURN","return",742],["T_WHITESPACE"," ",742],["T_VARIABLE","$this",742],["T_OBJECT_OPERATOR","->",742],["T_STRING","_conjunctionScore",742],"(",["T_VARIABLE","$docId",742],",",["T_WHITESPACE"," ",742],["T_VARIABLE","$reader",742],")",";",["T_WHITESPACE","\n            ",742],"}",["T_WHITESPACE"," ",743],["T_ELSE","else",743],["T_WHITESPACE"," ",743],"{",["T_WHITESPACE","\n                ",743],["T_RETURN","return",744],["T_WHITESPACE"," ",744],["T_VARIABLE","$this",744],["T_OBJECT_OPERATOR","->",744],["T_STRING","_nonConjunctionScore",744],"(",["T_VARIABLE","$docId",744],",",["T_WHITESPACE"," ",744],["T_VARIABLE","$reader",744],")",";",["T_WHITESPACE","\n            ",744],"}",["T_WHITESPACE","\n        ",745],"}",["T_WHITESPACE"," ",746],["T_ELSE","else",746],["T_WHITESPACE"," ",746],"{",["T_WHITESPACE","\n            ",746],["T_RETURN","return",747],["T_WHITESPACE"," ",747],["T_LNUMBER","0",747],";",["T_WHITESPACE","\n        ",747],"}",["T_WHITESPACE","\n    ",748],"}",["T_WHITESPACE","\n\n    ",749],["T_DOC_COMMENT","\/**\n     * Return query terms\n     *\n     * @return array\n     *\/",751],["T_WHITESPACE","\n    ",755],["T_PUBLIC","public",756],["T_WHITESPACE"," ",756],["T_FUNCTION","function",756],["T_WHITESPACE"," ",756],["T_STRING","getQueryTerms",756],"(",")",["T_WHITESPACE","\n    ",756],"{",["T_WHITESPACE","\n        ",757],["T_VARIABLE","$terms",758],["T_WHITESPACE"," ",758],"=",["T_WHITESPACE"," ",758],["T_ARRAY","array",758],"(",")",";",["T_WHITESPACE","\n\n        ",758],["T_FOREACH","foreach",760],["T_WHITESPACE"," ",760],"(",["T_VARIABLE","$this",760],["T_OBJECT_OPERATOR","->",760],["T_STRING","_subqueries",760],["T_WHITESPACE"," ",760],["T_AS","as",760],["T_WHITESPACE"," ",760],["T_VARIABLE","$id",760],["T_WHITESPACE"," ",760],["T_DOUBLE_ARROW","=>",760],["T_WHITESPACE"," ",760],["T_VARIABLE","$subquery",760],")",["T_WHITESPACE"," ",760],"{",["T_WHITESPACE","\n            ",760],["T_IF","if",761],["T_WHITESPACE"," ",761],"(",["T_VARIABLE","$this",761],["T_OBJECT_OPERATOR","->",761],["T_STRING","_signs",761],["T_WHITESPACE"," ",761],["T_IS_IDENTICAL","===",761],["T_WHITESPACE"," ",761],["T_STRING","null",761],["T_WHITESPACE","  ",761],["T_BOOLEAN_OR","||",761],["T_WHITESPACE","  ",761],["T_VARIABLE","$this",761],["T_OBJECT_OPERATOR","->",761],["T_STRING","_signs",761],"[",["T_VARIABLE","$id",761],"]",["T_WHITESPACE"," ",761],["T_IS_NOT_IDENTICAL","!==",761],["T_WHITESPACE"," ",761],["T_STRING","false",761],")",["T_WHITESPACE"," ",761],"{",["T_WHITESPACE","\n                ",761],["T_VARIABLE","$terms",762],["T_WHITESPACE"," ",762],"=",["T_WHITESPACE"," ",762],["T_STRING","array_merge",762],"(",["T_VARIABLE","$terms",762],",",["T_WHITESPACE"," ",762],["T_VARIABLE","$subquery",762],["T_OBJECT_OPERATOR","->",762],["T_STRING","getQueryTerms",762],"(",")",")",";",["T_WHITESPACE","\n            ",762],"}",["T_WHITESPACE","\n        ",763],"}",["T_WHITESPACE","\n\n        ",764],["T_RETURN","return",766],["T_WHITESPACE"," ",766],["T_VARIABLE","$terms",766],";",["T_WHITESPACE","\n    ",766],"}",["T_WHITESPACE","\n\n    ",767],["T_DOC_COMMENT","\/**\n     * Query specific matches highlighting\n     *\n     * @param Zend_Search_Lucene_Search_Highlighter_Interface $highlighter  Highlighter object (also contains doc for highlighting)\n     *\/",769],["T_WHITESPACE","\n    ",773],["T_PROTECTED","protected",774],["T_WHITESPACE"," ",774],["T_FUNCTION","function",774],["T_WHITESPACE"," ",774],["T_STRING","_highlightMatches",774],"(",["T_STRING","Zend_Search_Lucene_Search_Highlighter_Interface",774],["T_WHITESPACE"," ",774],["T_VARIABLE","$highlighter",774],")",["T_WHITESPACE","\n    ",774],"{",["T_WHITESPACE","\n        ",775],["T_FOREACH","foreach",776],["T_WHITESPACE"," ",776],"(",["T_VARIABLE","$this",776],["T_OBJECT_OPERATOR","->",776],["T_STRING","_subqueries",776],["T_WHITESPACE"," ",776],["T_AS","as",776],["T_WHITESPACE"," ",776],["T_VARIABLE","$id",776],["T_WHITESPACE"," ",776],["T_DOUBLE_ARROW","=>",776],["T_WHITESPACE"," ",776],["T_VARIABLE","$subquery",776],")",["T_WHITESPACE"," ",776],"{",["T_WHITESPACE","\n            ",776],["T_IF","if",777],["T_WHITESPACE"," ",777],"(",["T_VARIABLE","$this",777],["T_OBJECT_OPERATOR","->",777],["T_STRING","_signs",777],["T_WHITESPACE"," ",777],["T_IS_IDENTICAL","===",777],["T_WHITESPACE"," ",777],["T_STRING","null",777],["T_WHITESPACE","  ",777],["T_BOOLEAN_OR","||",777],["T_WHITESPACE","  ",777],["T_VARIABLE","$this",777],["T_OBJECT_OPERATOR","->",777],["T_STRING","_signs",777],"[",["T_VARIABLE","$id",777],"]",["T_WHITESPACE"," ",777],["T_IS_NOT_IDENTICAL","!==",777],["T_WHITESPACE"," ",777],["T_STRING","false",777],")",["T_WHITESPACE"," ",777],"{",["T_WHITESPACE","\n                ",777],["T_VARIABLE","$subquery",778],["T_OBJECT_OPERATOR","->",778],["T_STRING","_highlightMatches",778],"(",["T_VARIABLE","$highlighter",778],")",";",["T_WHITESPACE","\n            ",778],"}",["T_WHITESPACE","\n        ",779],"}",["T_WHITESPACE","\n    ",780],"}",["T_WHITESPACE","\n\n    ",781],["T_DOC_COMMENT","\/**\n     * Print a query\n     *\n     * @return string\n     *\/",783],["T_WHITESPACE","\n    ",787],["T_PUBLIC","public",788],["T_WHITESPACE"," ",788],["T_FUNCTION","function",788],["T_WHITESPACE"," ",788],["T_STRING","__toString",788],"(",")",["T_WHITESPACE","\n    ",788],"{",["T_WHITESPACE","\n        ",789],["T_COMMENT","\/\/ It's used only for query visualisation, so we don't care about characters escaping\n",790],["T_WHITESPACE","\n        ",791],["T_VARIABLE","$query",792],["T_WHITESPACE"," ",792],"=",["T_WHITESPACE"," ",792],["T_CONSTANT_ENCAPSED_STRING","''",792],";",["T_WHITESPACE","\n\n        ",792],["T_FOREACH","foreach",794],["T_WHITESPACE"," ",794],"(",["T_VARIABLE","$this",794],["T_OBJECT_OPERATOR","->",794],["T_STRING","_subqueries",794],["T_WHITESPACE"," ",794],["T_AS","as",794],["T_WHITESPACE"," ",794],["T_VARIABLE","$id",794],["T_WHITESPACE"," ",794],["T_DOUBLE_ARROW","=>",794],["T_WHITESPACE"," ",794],["T_VARIABLE","$subquery",794],")",["T_WHITESPACE"," ",794],"{",["T_WHITESPACE","\n            ",794],["T_IF","if",795],["T_WHITESPACE"," ",795],"(",["T_VARIABLE","$id",795],["T_WHITESPACE"," ",795],["T_IS_NOT_EQUAL","!=",795],["T_WHITESPACE"," ",795],["T_LNUMBER","0",795],")",["T_WHITESPACE"," ",795],"{",["T_WHITESPACE","\n                ",795],["T_VARIABLE","$query",796],["T_WHITESPACE"," ",796],["T_CONCAT_EQUAL",".=",796],["T_WHITESPACE"," ",796],["T_CONSTANT_ENCAPSED_STRING","' '",796],";",["T_WHITESPACE","\n            ",796],"}",["T_WHITESPACE","\n\n            ",797],["T_IF","if",799],["T_WHITESPACE"," ",799],"(",["T_VARIABLE","$this",799],["T_OBJECT_OPERATOR","->",799],["T_STRING","_signs",799],["T_WHITESPACE"," ",799],["T_IS_IDENTICAL","===",799],["T_WHITESPACE"," ",799],["T_STRING","null",799],["T_WHITESPACE"," ",799],["T_BOOLEAN_OR","||",799],["T_WHITESPACE"," ",799],["T_VARIABLE","$this",799],["T_OBJECT_OPERATOR","->",799],["T_STRING","_signs",799],"[",["T_VARIABLE","$id",799],"]",["T_WHITESPACE"," ",799],["T_IS_IDENTICAL","===",799],["T_WHITESPACE"," ",799],["T_STRING","true",799],")",["T_WHITESPACE"," ",799],"{",["T_WHITESPACE","\n                ",799],["T_VARIABLE","$query",800],["T_WHITESPACE"," ",800],["T_CONCAT_EQUAL",".=",800],["T_WHITESPACE"," ",800],["T_CONSTANT_ENCAPSED_STRING","'+'",800],";",["T_WHITESPACE","\n            ",800],"}",["T_WHITESPACE"," ",801],["T_ELSE","else",801],["T_WHITESPACE"," ",801],["T_IF","if",801],["T_WHITESPACE"," ",801],"(",["T_VARIABLE","$this",801],["T_OBJECT_OPERATOR","->",801],["T_STRING","_signs",801],"[",["T_VARIABLE","$id",801],"]",["T_WHITESPACE"," ",801],["T_IS_IDENTICAL","===",801],["T_WHITESPACE"," ",801],["T_STRING","false",801],")",["T_WHITESPACE"," ",801],"{",["T_WHITESPACE","\n                ",801],["T_VARIABLE","$query",802],["T_WHITESPACE"," ",802],["T_CONCAT_EQUAL",".=",802],["T_WHITESPACE"," ",802],["T_CONSTANT_ENCAPSED_STRING","'-'",802],";",["T_WHITESPACE","\n            ",802],"}",["T_WHITESPACE","\n\n            ",803],["T_VARIABLE","$query",805],["T_WHITESPACE"," ",805],["T_CONCAT_EQUAL",".=",805],["T_WHITESPACE"," ",805],["T_CONSTANT_ENCAPSED_STRING","'('",805],["T_WHITESPACE"," ",805],".",["T_WHITESPACE"," ",805],["T_VARIABLE","$subquery",805],["T_OBJECT_OPERATOR","->",805],["T_STRING","__toString",805],"(",")",["T_WHITESPACE"," ",805],".",["T_WHITESPACE"," ",805],["T_CONSTANT_ENCAPSED_STRING","')'",805],";",["T_WHITESPACE","\n        ",805],"}",["T_WHITESPACE","\n\n        ",806],["T_IF","if",808],["T_WHITESPACE"," ",808],"(",["T_VARIABLE","$this",808],["T_OBJECT_OPERATOR","->",808],["T_STRING","getBoost",808],"(",")",["T_WHITESPACE"," ",808],["T_IS_NOT_EQUAL","!=",808],["T_WHITESPACE"," ",808],["T_LNUMBER","1",808],")",["T_WHITESPACE"," ",808],"{",["T_WHITESPACE","\n            ",808],["T_VARIABLE","$query",809],["T_WHITESPACE"," ",809],"=",["T_WHITESPACE"," ",809],["T_CONSTANT_ENCAPSED_STRING","'('",809],["T_WHITESPACE"," ",809],".",["T_WHITESPACE"," ",809],["T_VARIABLE","$query",809],["T_WHITESPACE"," ",809],".",["T_WHITESPACE"," ",809],["T_CONSTANT_ENCAPSED_STRING","')^'",809],["T_WHITESPACE"," ",809],".",["T_WHITESPACE"," ",809],["T_STRING","round",809],"(",["T_VARIABLE","$this",809],["T_OBJECT_OPERATOR","->",809],["T_STRING","getBoost",809],"(",")",",",["T_WHITESPACE"," ",809],["T_LNUMBER","4",809],")",";",["T_WHITESPACE","\n        ",809],"}",["T_WHITESPACE","\n\n        ",810],["T_RETURN","return",812],["T_WHITESPACE"," ",812],["T_VARIABLE","$query",812],";",["T_WHITESPACE","\n    ",812],"}",["T_WHITESPACE","\n",813],"}",["T_WHITESPACE","\n\n",814]]
[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Zend Framework\n *\n * LICENSE\n *\n * This source file is subject to the new BSD license that is bundled\n * with this package in the file LICENSE.txt.\n * It is also available through the world-wide-web at this URL:\n * http:\/\/framework.zend.com\/license\/new-bsd\n * If you did not receive a copy of the license and are unable to\n * obtain it through the world-wide-web, please send an email\n * to license@zend.com so we can send you a copy immediately.\n *\n * @category   Zend\n * @package    Zend_Search_Lucene\n * @subpackage Index\n * @copyright  Copyright (c) 2005-2015 Zend Technologies USA Inc. (http:\/\/www.zend.com)\n * @license    http:\/\/framework.zend.com\/license\/new-bsd     New BSD License\n * @version    $Id$\n *\/",2],["T_WHITESPACE","\n\n",21],["T_DOC_COMMENT","\/** Zend_Search_Lucene_Index_SegmentInfo *\/",23],["T_WHITESPACE","\n",23],["T_COMMENT","#require_once 'Zend\/Search\/Lucene\/Index\/SegmentInfo.php';\n",24],["T_WHITESPACE","\n\n",25],["T_DOC_COMMENT","\/**\n * @category   Zend\n * @package    Zend_Search_Lucene\n * @subpackage Index\n * @copyright  Copyright (c) 2005-2015 Zend Technologies USA Inc. (http:\/\/www.zend.com)\n * @license    http:\/\/framework.zend.com\/license\/new-bsd     New BSD License\n *\/",27],["T_WHITESPACE","\n",33],["T_CLASS","class",34],["T_WHITESPACE"," ",34],["T_STRING","Zend_Search_Lucene_Index_SegmentMerger",34],["T_WHITESPACE","\n",34],"{",["T_WHITESPACE","\n    ",35],["T_DOC_COMMENT","\/**\n     * Target segment writer\n     *\n     * @var Zend_Search_Lucene_Index_SegmentWriter_StreamWriter\n     *\/",36],["T_WHITESPACE","\n    ",40],["T_PRIVATE","private",41],["T_WHITESPACE"," ",41],["T_VARIABLE","$_writer",41],";",["T_WHITESPACE","\n\n    ",41],["T_DOC_COMMENT","\/**\n     * Number of docs in a new segment\n     *\n     * @var integer\n     *\/",43],["T_WHITESPACE","\n    ",47],["T_PRIVATE","private",48],["T_WHITESPACE"," ",48],["T_VARIABLE","$_docCount",48],";",["T_WHITESPACE","\n\n    ",48],["T_DOC_COMMENT","\/**\n     * A set of segments to be merged\n     *\n     * @var array Zend_Search_Lucene_Index_SegmentInfo\n     *\/",50],["T_WHITESPACE","\n    ",54],["T_PRIVATE","private",55],["T_WHITESPACE"," ",55],["T_VARIABLE","$_segmentInfos",55],["T_WHITESPACE"," ",55],"=",["T_WHITESPACE"," ",55],["T_ARRAY","array",55],"(",")",";",["T_WHITESPACE","\n\n    ",55],["T_DOC_COMMENT","\/**\n     * Flag to signal, that merge is already done\n     *\n     * @var boolean\n     *\/",57],["T_WHITESPACE","\n    ",61],["T_PRIVATE","private",62],["T_WHITESPACE"," ",62],["T_VARIABLE","$_mergeDone",62],["T_WHITESPACE"," ",62],"=",["T_WHITESPACE"," ",62],["T_STRING","false",62],";",["T_WHITESPACE","\n\n    ",62],["T_DOC_COMMENT","\/**\n     * Field map\n     * [<segment_name>][<field_number>] => <target_field_number>\n     *\n     * @var array\n     *\/",64],["T_WHITESPACE","\n    ",69],["T_PRIVATE","private",70],["T_WHITESPACE"," ",70],["T_VARIABLE","$_fieldsMap",70],["T_WHITESPACE"," ",70],"=",["T_WHITESPACE"," ",70],["T_ARRAY","array",70],"(",")",";",["T_WHITESPACE","\n\n\n\n    ",70],["T_DOC_COMMENT","\/**\n     * Object constructor.\n     *\n     * Creates new segment merger with $directory as target to merge segments into\n     * and $name as a name of new segment\n     *\n     * @param Zend_Search_Lucene_Storage_Directory $directory\n     * @param string $name\n     *\/",74],["T_WHITESPACE","\n    ",82],["T_PUBLIC","public",83],["T_WHITESPACE"," ",83],["T_FUNCTION","function",83],["T_WHITESPACE"," ",83],["T_STRING","__construct",83],"(",["T_VARIABLE","$directory",83],",",["T_WHITESPACE"," ",83],["T_VARIABLE","$name",83],")",["T_WHITESPACE","\n    ",83],"{",["T_WHITESPACE","\n        ",84],["T_DOC_COMMENT","\/** Zend_Search_Lucene_Index_SegmentWriter_StreamWriter *\/",85],["T_WHITESPACE","\n        ",85],["T_COMMENT","#require_once 'Zend\/Search\/Lucene\/Index\/SegmentWriter\/StreamWriter.php';\n",86],["T_WHITESPACE","        ",87],["T_VARIABLE","$this",87],["T_OBJECT_OPERATOR","->",87],["T_STRING","_writer",87],["T_WHITESPACE"," ",87],"=",["T_WHITESPACE"," ",87],["T_NEW","new",87],["T_WHITESPACE"," ",87],["T_STRING","Zend_Search_Lucene_Index_SegmentWriter_StreamWriter",87],"(",["T_VARIABLE","$directory",87],",",["T_WHITESPACE"," ",87],["T_VARIABLE","$name",87],")",";",["T_WHITESPACE","\n    ",87],"}",["T_WHITESPACE","\n\n\n    ",88],["T_DOC_COMMENT","\/**\n     * Add segmnet to a collection of segments to be merged\n     *\n     * @param Zend_Search_Lucene_Index_SegmentInfo $segment\n     *\/",91],["T_WHITESPACE","\n    ",95],["T_PUBLIC","public",96],["T_WHITESPACE"," ",96],["T_FUNCTION","function",96],["T_WHITESPACE"," ",96],["T_STRING","addSource",96],"(",["T_STRING","Zend_Search_Lucene_Index_SegmentInfo",96],["T_WHITESPACE"," ",96],["T_VARIABLE","$segmentInfo",96],")",["T_WHITESPACE","\n    ",96],"{",["T_WHITESPACE","\n        ",97],["T_VARIABLE","$this",98],["T_OBJECT_OPERATOR","->",98],["T_STRING","_segmentInfos",98],"[",["T_VARIABLE","$segmentInfo",98],["T_OBJECT_OPERATOR","->",98],["T_STRING","getName",98],"(",")","]",["T_WHITESPACE"," ",98],"=",["T_WHITESPACE"," ",98],["T_VARIABLE","$segmentInfo",98],";",["T_WHITESPACE","\n    ",98],"}",["T_WHITESPACE","\n\n\n    ",99],["T_DOC_COMMENT","\/**\n     * Do merge.\n     *\n     * Returns number of documents in newly created segment\n     *\n     * @return Zend_Search_Lucene_Index_SegmentInfo\n     * @throws Zend_Search_Lucene_Exception\n     *\/",102],["T_WHITESPACE","\n    ",109],["T_PUBLIC","public",110],["T_WHITESPACE"," ",110],["T_FUNCTION","function",110],["T_WHITESPACE"," ",110],["T_STRING","merge",110],"(",")",["T_WHITESPACE","\n    ",110],"{",["T_WHITESPACE","\n        ",111],["T_IF","if",112],["T_WHITESPACE"," ",112],"(",["T_VARIABLE","$this",112],["T_OBJECT_OPERATOR","->",112],["T_STRING","_mergeDone",112],")",["T_WHITESPACE"," ",112],"{",["T_WHITESPACE","\n            ",112],["T_COMMENT","#require_once 'Zend\/Search\/Lucene\/Exception.php';\n",113],["T_WHITESPACE","            ",114],["T_THROW","throw",114],["T_WHITESPACE"," ",114],["T_NEW","new",114],["T_WHITESPACE"," ",114],["T_STRING","Zend_Search_Lucene_Exception",114],"(",["T_CONSTANT_ENCAPSED_STRING","'Merge is already done.'",114],")",";",["T_WHITESPACE","\n        ",114],"}",["T_WHITESPACE","\n\n        ",115],["T_IF","if",117],["T_WHITESPACE"," ",117],"(",["T_STRING","count",117],"(",["T_VARIABLE","$this",117],["T_OBJECT_OPERATOR","->",117],["T_STRING","_segmentInfos",117],")",["T_WHITESPACE"," ",117],"<",["T_WHITESPACE"," ",117],["T_LNUMBER","1",117],")",["T_WHITESPACE"," ",117],"{",["T_WHITESPACE","\n            ",117],["T_COMMENT","#require_once 'Zend\/Search\/Lucene\/Exception.php';\n",118],["T_WHITESPACE","            ",119],["T_THROW","throw",119],["T_WHITESPACE"," ",119],["T_NEW","new",119],["T_WHITESPACE"," ",119],["T_STRING","Zend_Search_Lucene_Exception",119],"(",["T_CONSTANT_ENCAPSED_STRING","'Wrong number of segments to be merged ('",119],["T_WHITESPACE","\n                                                 ",119],".",["T_WHITESPACE"," ",120],["T_STRING","count",120],"(",["T_VARIABLE","$this",120],["T_OBJECT_OPERATOR","->",120],["T_STRING","_segmentInfos",120],")",["T_WHITESPACE","\n                                                 ",120],".",["T_WHITESPACE"," ",121],["T_CONSTANT_ENCAPSED_STRING","').'",121],")",";",["T_WHITESPACE","\n        ",121],"}",["T_WHITESPACE","\n\n        ",122],["T_VARIABLE","$this",124],["T_OBJECT_OPERATOR","->",124],["T_STRING","_mergeFields",124],"(",")",";",["T_WHITESPACE","\n        ",124],["T_VARIABLE","$this",125],["T_OBJECT_OPERATOR","->",125],["T_STRING","_mergeNorms",125],"(",")",";",["T_WHITESPACE","\n        ",125],["T_VARIABLE","$this",126],["T_OBJECT_OPERATOR","->",126],["T_STRING","_mergeStoredFields",126],"(",")",";",["T_WHITESPACE","\n        ",126],["T_VARIABLE","$this",127],["T_OBJECT_OPERATOR","->",127],["T_STRING","_mergeTerms",127],"(",")",";",["T_WHITESPACE","\n\n        ",127],["T_VARIABLE","$this",129],["T_OBJECT_OPERATOR","->",129],["T_STRING","_mergeDone",129],["T_WHITESPACE"," ",129],"=",["T_WHITESPACE"," ",129],["T_STRING","true",129],";",["T_WHITESPACE","\n\n        ",129],["T_RETURN","return",131],["T_WHITESPACE"," ",131],["T_VARIABLE","$this",131],["T_OBJECT_OPERATOR","->",131],["T_STRING","_writer",131],["T_OBJECT_OPERATOR","->",131],["T_STRING","close",131],"(",")",";",["T_WHITESPACE","\n    ",131],"}",["T_WHITESPACE","\n\n\n    ",132],["T_DOC_COMMENT","\/**\n     * Merge fields information\n     *\/",135],["T_WHITESPACE","\n    ",137],["T_PRIVATE","private",138],["T_WHITESPACE"," ",138],["T_FUNCTION","function",138],["T_WHITESPACE"," ",138],["T_STRING","_mergeFields",138],"(",")",["T_WHITESPACE","\n    ",138],"{",["T_WHITESPACE","\n        ",139],["T_FOREACH","foreach",140],["T_WHITESPACE"," ",140],"(",["T_VARIABLE","$this",140],["T_OBJECT_OPERATOR","->",140],["T_STRING","_segmentInfos",140],["T_WHITESPACE"," ",140],["T_AS","as",140],["T_WHITESPACE"," ",140],["T_VARIABLE","$segName",140],["T_WHITESPACE"," ",140],["T_DOUBLE_ARROW","=>",140],["T_WHITESPACE"," ",140],["T_VARIABLE","$segmentInfo",140],")",["T_WHITESPACE"," ",140],"{",["T_WHITESPACE","\n            ",140],["T_FOREACH","foreach",141],["T_WHITESPACE"," ",141],"(",["T_VARIABLE","$segmentInfo",141],["T_OBJECT_OPERATOR","->",141],["T_STRING","getFieldInfos",141],"(",")",["T_WHITESPACE"," ",141],["T_AS","as",141],["T_WHITESPACE"," ",141],["T_VARIABLE","$fieldInfo",141],")",["T_WHITESPACE"," ",141],"{",["T_WHITESPACE","\n                ",141],["T_VARIABLE","$this",142],["T_OBJECT_OPERATOR","->",142],["T_STRING","_fieldsMap",142],"[",["T_VARIABLE","$segName",142],"]","[",["T_VARIABLE","$fieldInfo",142],["T_OBJECT_OPERATOR","->",142],["T_STRING","number",142],"]",["T_WHITESPACE"," ",142],"=",["T_WHITESPACE"," ",142],["T_VARIABLE","$this",142],["T_OBJECT_OPERATOR","->",142],["T_STRING","_writer",142],["T_OBJECT_OPERATOR","->",142],["T_STRING","addFieldInfo",142],"(",["T_VARIABLE","$fieldInfo",142],")",";",["T_WHITESPACE","\n            ",142],"}",["T_WHITESPACE","\n        ",143],"}",["T_WHITESPACE","\n    ",144],"}",["T_WHITESPACE","\n\n    ",145],["T_DOC_COMMENT","\/**\n     * Merge field's normalization factors\n     *\/",147],["T_WHITESPACE","\n    ",149],["T_PRIVATE","private",150],["T_WHITESPACE"," ",150],["T_FUNCTION","function",150],["T_WHITESPACE"," ",150],["T_STRING","_mergeNorms",150],"(",")",["T_WHITESPACE","\n    ",150],"{",["T_WHITESPACE","\n        ",151],["T_FOREACH","foreach",152],["T_WHITESPACE"," ",152],"(",["T_VARIABLE","$this",152],["T_OBJECT_OPERATOR","->",152],["T_STRING","_writer",152],["T_OBJECT_OPERATOR","->",152],["T_STRING","getFieldInfos",152],"(",")",["T_WHITESPACE"," ",152],["T_AS","as",152],["T_WHITESPACE"," ",152],["T_VARIABLE","$fieldInfo",152],")",["T_WHITESPACE"," ",152],"{",["T_WHITESPACE","\n            ",152],["T_IF","if",153],["T_WHITESPACE"," ",153],"(",["T_VARIABLE","$fieldInfo",153],["T_OBJECT_OPERATOR","->",153],["T_STRING","isIndexed",153],")",["T_WHITESPACE"," ",153],"{",["T_WHITESPACE","\n                ",153],["T_FOREACH","foreach",154],["T_WHITESPACE"," ",154],"(",["T_VARIABLE","$this",154],["T_OBJECT_OPERATOR","->",154],["T_STRING","_segmentInfos",154],["T_WHITESPACE"," ",154],["T_AS","as",154],["T_WHITESPACE"," ",154],["T_VARIABLE","$segName",154],["T_WHITESPACE"," ",154],["T_DOUBLE_ARROW","=>",154],["T_WHITESPACE"," ",154],["T_VARIABLE","$segmentInfo",154],")",["T_WHITESPACE"," ",154],"{",["T_WHITESPACE","\n                    ",154],["T_IF","if",155],["T_WHITESPACE"," ",155],"(",["T_VARIABLE","$segmentInfo",155],["T_OBJECT_OPERATOR","->",155],["T_STRING","hasDeletions",155],"(",")",")",["T_WHITESPACE"," ",155],"{",["T_WHITESPACE","\n                        ",155],["T_VARIABLE","$srcNorm",156],["T_WHITESPACE"," ",156],"=",["T_WHITESPACE"," ",156],["T_VARIABLE","$segmentInfo",156],["T_OBJECT_OPERATOR","->",156],["T_STRING","normVector",156],"(",["T_VARIABLE","$fieldInfo",156],["T_OBJECT_OPERATOR","->",156],["T_STRING","name",156],")",";",["T_WHITESPACE","\n                        ",156],["T_VARIABLE","$norm",157],["T_WHITESPACE","    ",157],"=",["T_WHITESPACE"," ",157],["T_CONSTANT_ENCAPSED_STRING","''",157],";",["T_WHITESPACE","\n                        ",157],["T_VARIABLE","$docs",158],["T_WHITESPACE","    ",158],"=",["T_WHITESPACE"," ",158],["T_VARIABLE","$segmentInfo",158],["T_OBJECT_OPERATOR","->",158],["T_STRING","count",158],"(",")",";",["T_WHITESPACE","\n                        ",158],["T_FOR","for",159],["T_WHITESPACE"," ",159],"(",["T_VARIABLE","$count",159],["T_WHITESPACE"," ",159],"=",["T_WHITESPACE"," ",159],["T_LNUMBER","0",159],";",["T_WHITESPACE"," ",159],["T_VARIABLE","$count",159],["T_WHITESPACE"," ",159],"<",["T_WHITESPACE"," ",159],["T_VARIABLE","$docs",159],";",["T_WHITESPACE"," ",159],["T_VARIABLE","$count",159],["T_INC","++",159],")",["T_WHITESPACE"," ",159],"{",["T_WHITESPACE","\n                            ",159],["T_IF","if",160],["T_WHITESPACE"," ",160],"(","!",["T_VARIABLE","$segmentInfo",160],["T_OBJECT_OPERATOR","->",160],["T_STRING","isDeleted",160],"(",["T_VARIABLE","$count",160],")",")",["T_WHITESPACE"," ",160],"{",["T_WHITESPACE","\n                                ",160],["T_VARIABLE","$norm",161],["T_WHITESPACE"," ",161],["T_CONCAT_EQUAL",".=",161],["T_WHITESPACE"," ",161],["T_VARIABLE","$srcNorm",161],"[",["T_VARIABLE","$count",161],"]",";",["T_WHITESPACE","\n                            ",161],"}",["T_WHITESPACE","\n                        ",162],"}",["T_WHITESPACE","\n                        ",163],["T_VARIABLE","$this",164],["T_OBJECT_OPERATOR","->",164],["T_STRING","_writer",164],["T_OBJECT_OPERATOR","->",164],["T_STRING","addNorm",164],"(",["T_VARIABLE","$fieldInfo",164],["T_OBJECT_OPERATOR","->",164],["T_STRING","name",164],",",["T_WHITESPACE"," ",164],["T_VARIABLE","$norm",164],")",";",["T_WHITESPACE","\n                    ",164],"}",["T_WHITESPACE"," ",165],["T_ELSE","else",165],["T_WHITESPACE"," ",165],"{",["T_WHITESPACE","\n                        ",165],["T_VARIABLE","$this",166],["T_OBJECT_OPERATOR","->",166],["T_STRING","_writer",166],["T_OBJECT_OPERATOR","->",166],["T_STRING","addNorm",166],"(",["T_VARIABLE","$fieldInfo",166],["T_OBJECT_OPERATOR","->",166],["T_STRING","name",166],",",["T_WHITESPACE"," ",166],["T_VARIABLE","$segmentInfo",166],["T_OBJECT_OPERATOR","->",166],["T_STRING","normVector",166],"(",["T_VARIABLE","$fieldInfo",166],["T_OBJECT_OPERATOR","->",166],["T_STRING","name",166],")",")",";",["T_WHITESPACE","\n                    ",166],"}",["T_WHITESPACE","\n                ",167],"}",["T_WHITESPACE","\n            ",168],"}",["T_WHITESPACE","\n        ",169],"}",["T_WHITESPACE","\n    ",170],"}",["T_WHITESPACE","\n\n    ",171],["T_DOC_COMMENT","\/**\n     * Merge fields information\n     *\/",173],["T_WHITESPACE","\n    ",175],["T_PRIVATE","private",176],["T_WHITESPACE"," ",176],["T_FUNCTION","function",176],["T_WHITESPACE"," ",176],["T_STRING","_mergeStoredFields",176],"(",")",["T_WHITESPACE","\n    ",176],"{",["T_WHITESPACE","\n        ",177],["T_VARIABLE","$this",178],["T_OBJECT_OPERATOR","->",178],["T_STRING","_docCount",178],["T_WHITESPACE"," ",178],"=",["T_WHITESPACE"," ",178],["T_LNUMBER","0",178],";",["T_WHITESPACE","\n\n        ",178],["T_FOREACH","foreach",180],["T_WHITESPACE"," ",180],"(",["T_VARIABLE","$this",180],["T_OBJECT_OPERATOR","->",180],["T_STRING","_segmentInfos",180],["T_WHITESPACE"," ",180],["T_AS","as",180],["T_WHITESPACE"," ",180],["T_VARIABLE","$segName",180],["T_WHITESPACE"," ",180],["T_DOUBLE_ARROW","=>",180],["T_WHITESPACE"," ",180],["T_VARIABLE","$segmentInfo",180],")",["T_WHITESPACE"," ",180],"{",["T_WHITESPACE","\n            ",180],["T_VARIABLE","$fdtFile",181],["T_WHITESPACE"," ",181],"=",["T_WHITESPACE"," ",181],["T_VARIABLE","$segmentInfo",181],["T_OBJECT_OPERATOR","->",181],["T_STRING","openCompoundFile",181],"(",["T_CONSTANT_ENCAPSED_STRING","'.fdt'",181],")",";",["T_WHITESPACE","\n\n            ",181],["T_FOR","for",183],["T_WHITESPACE"," ",183],"(",["T_VARIABLE","$count",183],["T_WHITESPACE"," ",183],"=",["T_WHITESPACE"," ",183],["T_LNUMBER","0",183],";",["T_WHITESPACE"," ",183],["T_VARIABLE","$count",183],["T_WHITESPACE"," ",183],"<",["T_WHITESPACE"," ",183],["T_VARIABLE","$segmentInfo",183],["T_OBJECT_OPERATOR","->",183],["T_STRING","count",183],"(",")",";",["T_WHITESPACE"," ",183],["T_VARIABLE","$count",183],["T_INC","++",183],")",["T_WHITESPACE"," ",183],"{",["T_WHITESPACE","\n                ",183],["T_VARIABLE","$fieldCount",184],["T_WHITESPACE"," ",184],"=",["T_WHITESPACE"," ",184],["T_VARIABLE","$fdtFile",184],["T_OBJECT_OPERATOR","->",184],["T_STRING","readVInt",184],"(",")",";",["T_WHITESPACE","\n                ",184],["T_VARIABLE","$storedFields",185],["T_WHITESPACE"," ",185],"=",["T_WHITESPACE"," ",185],["T_ARRAY","array",185],"(",")",";",["T_WHITESPACE","\n\n                ",185],["T_FOR","for",187],["T_WHITESPACE"," ",187],"(",["T_VARIABLE","$count2",187],["T_WHITESPACE"," ",187],"=",["T_WHITESPACE"," ",187],["T_LNUMBER","0",187],";",["T_WHITESPACE"," ",187],["T_VARIABLE","$count2",187],["T_WHITESPACE"," ",187],"<",["T_WHITESPACE"," ",187],["T_VARIABLE","$fieldCount",187],";",["T_WHITESPACE"," ",187],["T_VARIABLE","$count2",187],["T_INC","++",187],")",["T_WHITESPACE"," ",187],"{",["T_WHITESPACE","\n                    ",187],["T_VARIABLE","$fieldNum",188],["T_WHITESPACE"," ",188],"=",["T_WHITESPACE"," ",188],["T_VARIABLE","$fdtFile",188],["T_OBJECT_OPERATOR","->",188],["T_STRING","readVInt",188],"(",")",";",["T_WHITESPACE","\n                    ",188],["T_VARIABLE","$bits",189],["T_WHITESPACE"," ",189],"=",["T_WHITESPACE"," ",189],["T_VARIABLE","$fdtFile",189],["T_OBJECT_OPERATOR","->",189],["T_STRING","readByte",189],"(",")",";",["T_WHITESPACE","\n                    ",189],["T_VARIABLE","$fieldInfo",190],["T_WHITESPACE"," ",190],"=",["T_WHITESPACE"," ",190],["T_VARIABLE","$segmentInfo",190],["T_OBJECT_OPERATOR","->",190],["T_STRING","getField",190],"(",["T_VARIABLE","$fieldNum",190],")",";",["T_WHITESPACE","\n\n                    ",190],["T_IF","if",192],["T_WHITESPACE"," ",192],"(","!","(",["T_VARIABLE","$bits",192],["T_WHITESPACE"," ",192],"&",["T_WHITESPACE"," ",192],["T_LNUMBER","2",192],")",")",["T_WHITESPACE"," ",192],"{",["T_WHITESPACE"," ",192],["T_COMMENT","\/\/ Text data\n",192],["T_WHITESPACE","                        ",193],["T_VARIABLE","$storedFields",193],"[","]",["T_WHITESPACE"," ",193],"=",["T_WHITESPACE","\n                                 ",193],["T_NEW","new",194],["T_WHITESPACE"," ",194],["T_STRING","Zend_Search_Lucene_Field",194],"(",["T_VARIABLE","$fieldInfo",194],["T_OBJECT_OPERATOR","->",194],["T_STRING","name",194],",",["T_WHITESPACE","\n                                                              ",194],["T_VARIABLE","$fdtFile",195],["T_OBJECT_OPERATOR","->",195],["T_STRING","readString",195],"(",")",",",["T_WHITESPACE","\n                                                              ",195],["T_CONSTANT_ENCAPSED_STRING","'UTF-8'",196],",",["T_WHITESPACE","\n                                                              ",196],["T_STRING","true",197],",",["T_WHITESPACE","\n                                                              ",197],["T_VARIABLE","$fieldInfo",198],["T_OBJECT_OPERATOR","->",198],["T_STRING","isIndexed",198],",",["T_WHITESPACE","\n                                                              ",198],["T_VARIABLE","$bits",199],["T_WHITESPACE"," ",199],"&",["T_WHITESPACE"," ",199],["T_LNUMBER","1",199],["T_WHITESPACE"," ",199],")",";",["T_WHITESPACE","\n                    ",199],"}",["T_WHITESPACE"," ",200],["T_ELSE","else",200],["T_WHITESPACE"," ",200],"{",["T_WHITESPACE","            ",200],["T_COMMENT","\/\/ Binary data\n",200],["T_WHITESPACE","                        ",201],["T_VARIABLE","$storedFields",201],"[","]",["T_WHITESPACE"," ",201],"=",["T_WHITESPACE","\n                                 ",201],["T_NEW","new",202],["T_WHITESPACE"," ",202],["T_STRING","Zend_Search_Lucene_Field",202],"(",["T_VARIABLE","$fieldInfo",202],["T_OBJECT_OPERATOR","->",202],["T_STRING","name",202],",",["T_WHITESPACE","\n                                                              ",202],["T_VARIABLE","$fdtFile",203],["T_OBJECT_OPERATOR","->",203],["T_STRING","readBinary",203],"(",")",",",["T_WHITESPACE","\n                                                              ",203],["T_CONSTANT_ENCAPSED_STRING","''",204],",",["T_WHITESPACE","\n                                                              ",204],["T_STRING","true",205],",",["T_WHITESPACE","\n                                                              ",205],["T_VARIABLE","$fieldInfo",206],["T_OBJECT_OPERATOR","->",206],["T_STRING","isIndexed",206],",",["T_WHITESPACE","\n                                                              ",206],["T_VARIABLE","$bits",207],["T_WHITESPACE"," ",207],"&",["T_WHITESPACE"," ",207],["T_LNUMBER","1",207],",",["T_WHITESPACE","\n                                                              ",207],["T_STRING","true",208],")",";",["T_WHITESPACE","\n                    ",208],"}",["T_WHITESPACE","\n                ",209],"}",["T_WHITESPACE","\n\n                ",210],["T_IF","if",212],["T_WHITESPACE"," ",212],"(","!",["T_VARIABLE","$segmentInfo",212],["T_OBJECT_OPERATOR","->",212],["T_STRING","isDeleted",212],"(",["T_VARIABLE","$count",212],")",")",["T_WHITESPACE"," ",212],"{",["T_WHITESPACE","\n                    ",212],["T_VARIABLE","$this",213],["T_OBJECT_OPERATOR","->",213],["T_STRING","_docCount",213],["T_INC","++",213],";",["T_WHITESPACE","\n                    ",213],["T_VARIABLE","$this",214],["T_OBJECT_OPERATOR","->",214],["T_STRING","_writer",214],["T_OBJECT_OPERATOR","->",214],["T_STRING","addStoredFields",214],"(",["T_VARIABLE","$storedFields",214],")",";",["T_WHITESPACE","\n                ",214],"}",["T_WHITESPACE","\n            ",215],"}",["T_WHITESPACE","\n        ",216],"}",["T_WHITESPACE","\n    ",217],"}",["T_WHITESPACE","\n\n\n    ",218],["T_DOC_COMMENT","\/**\n     * Merge fields information\n     *\/",221],["T_WHITESPACE","\n    ",223],["T_PRIVATE","private",224],["T_WHITESPACE"," ",224],["T_FUNCTION","function",224],["T_WHITESPACE"," ",224],["T_STRING","_mergeTerms",224],"(",")",["T_WHITESPACE","\n    ",224],"{",["T_WHITESPACE","\n        ",225],["T_DOC_COMMENT","\/** Zend_Search_Lucene_Index_TermsPriorityQueue *\/",226],["T_WHITESPACE","\n        ",226],["T_COMMENT","#require_once 'Zend\/Search\/Lucene\/Index\/TermsPriorityQueue.php';\n",227],["T_WHITESPACE","\n        ",228],["T_VARIABLE","$segmentInfoQueue",229],["T_WHITESPACE"," ",229],"=",["T_WHITESPACE"," ",229],["T_NEW","new",229],["T_WHITESPACE"," ",229],["T_STRING","Zend_Search_Lucene_Index_TermsPriorityQueue",229],"(",")",";",["T_WHITESPACE","\n\n        ",229],["T_VARIABLE","$segmentStartId",231],["T_WHITESPACE"," ",231],"=",["T_WHITESPACE"," ",231],["T_LNUMBER","0",231],";",["T_WHITESPACE","\n        ",231],["T_FOREACH","foreach",232],["T_WHITESPACE"," ",232],"(",["T_VARIABLE","$this",232],["T_OBJECT_OPERATOR","->",232],["T_STRING","_segmentInfos",232],["T_WHITESPACE"," ",232],["T_AS","as",232],["T_WHITESPACE"," ",232],["T_VARIABLE","$segName",232],["T_WHITESPACE"," ",232],["T_DOUBLE_ARROW","=>",232],["T_WHITESPACE"," ",232],["T_VARIABLE","$segmentInfo",232],")",["T_WHITESPACE"," ",232],"{",["T_WHITESPACE","\n            ",232],["T_VARIABLE","$segmentStartId",233],["T_WHITESPACE"," ",233],"=",["T_WHITESPACE"," ",233],["T_VARIABLE","$segmentInfo",233],["T_OBJECT_OPERATOR","->",233],["T_STRING","resetTermsStream",233],"(",["T_VARIABLE","$segmentStartId",233],",",["T_WHITESPACE"," ",233],["T_STRING","Zend_Search_Lucene_Index_SegmentInfo",233],["T_DOUBLE_COLON","::",233],["T_STRING","SM_MERGE_INFO",233],")",";",["T_WHITESPACE","\n\n            ",233],["T_COMMENT","\/\/ Skip \"empty\" segments\n",235],["T_WHITESPACE","            ",236],["T_IF","if",236],["T_WHITESPACE"," ",236],"(",["T_VARIABLE","$segmentInfo",236],["T_OBJECT_OPERATOR","->",236],["T_STRING","currentTerm",236],"(",")",["T_WHITESPACE"," ",236],["T_IS_NOT_IDENTICAL","!==",236],["T_WHITESPACE"," ",236],["T_STRING","null",236],")",["T_WHITESPACE"," ",236],"{",["T_WHITESPACE","\n                ",236],["T_VARIABLE","$segmentInfoQueue",237],["T_OBJECT_OPERATOR","->",237],["T_STRING","put",237],"(",["T_VARIABLE","$segmentInfo",237],")",";",["T_WHITESPACE","\n            ",237],"}",["T_WHITESPACE","\n        ",238],"}",["T_WHITESPACE","\n\n        ",239],["T_VARIABLE","$this",241],["T_OBJECT_OPERATOR","->",241],["T_STRING","_writer",241],["T_OBJECT_OPERATOR","->",241],["T_STRING","initializeDictionaryFiles",241],"(",")",";",["T_WHITESPACE","\n\n        ",241],["T_VARIABLE","$termDocs",243],["T_WHITESPACE"," ",243],"=",["T_WHITESPACE"," ",243],["T_ARRAY","array",243],"(",")",";",["T_WHITESPACE","\n        ",243],["T_WHILE","while",244],["T_WHITESPACE"," ",244],"(","(",["T_VARIABLE","$segmentInfo",244],["T_WHITESPACE"," ",244],"=",["T_WHITESPACE"," ",244],["T_VARIABLE","$segmentInfoQueue",244],["T_OBJECT_OPERATOR","->",244],["T_STRING","pop",244],"(",")",")",["T_WHITESPACE"," ",244],["T_IS_NOT_IDENTICAL","!==",244],["T_WHITESPACE"," ",244],["T_STRING","null",244],")",["T_WHITESPACE"," ",244],"{",["T_WHITESPACE","\n            ",244],["T_COMMENT","\/\/ Merge positions array\n",245],["T_WHITESPACE","            ",246],["T_VARIABLE","$termDocs",246],["T_WHITESPACE"," ",246],["T_PLUS_EQUAL","+=",246],["T_WHITESPACE"," ",246],["T_VARIABLE","$segmentInfo",246],["T_OBJECT_OPERATOR","->",246],["T_STRING","currentTermPositions",246],"(",")",";",["T_WHITESPACE","\n\n            ",246],["T_IF","if",248],["T_WHITESPACE"," ",248],"(",["T_VARIABLE","$segmentInfoQueue",248],["T_OBJECT_OPERATOR","->",248],["T_STRING","top",248],"(",")",["T_WHITESPACE"," ",248],["T_IS_IDENTICAL","===",248],["T_WHITESPACE"," ",248],["T_STRING","null",248],["T_WHITESPACE"," ",248],["T_BOOLEAN_OR","||",248],["T_WHITESPACE","\n                ",248],["T_VARIABLE","$segmentInfoQueue",249],["T_OBJECT_OPERATOR","->",249],["T_STRING","top",249],"(",")",["T_OBJECT_OPERATOR","->",249],["T_STRING","currentTerm",249],"(",")",["T_OBJECT_OPERATOR","->",249],["T_STRING","key",249],"(",")",["T_WHITESPACE"," ",249],["T_IS_NOT_EQUAL","!=",249],["T_WHITESPACE","\n                            ",249],["T_VARIABLE","$segmentInfo",250],["T_OBJECT_OPERATOR","->",250],["T_STRING","currentTerm",250],"(",")",["T_OBJECT_OPERATOR","->",250],["T_STRING","key",250],"(",")",")",["T_WHITESPACE"," ",250],"{",["T_WHITESPACE","\n                ",250],["T_COMMENT","\/\/ We got new term\n",251],["T_WHITESPACE","                ",252],["T_STRING","ksort",252],"(",["T_VARIABLE","$termDocs",252],",",["T_WHITESPACE"," ",252],["T_STRING","SORT_NUMERIC",252],")",";",["T_WHITESPACE","\n\n                ",252],["T_COMMENT","\/\/ Add term if it's contained in any document\n",254],["T_WHITESPACE","                ",255],["T_IF","if",255],["T_WHITESPACE"," ",255],"(",["T_STRING","count",255],"(",["T_VARIABLE","$termDocs",255],")",["T_WHITESPACE"," ",255],">",["T_WHITESPACE"," ",255],["T_LNUMBER","0",255],")",["T_WHITESPACE"," ",255],"{",["T_WHITESPACE","\n                    ",255],["T_VARIABLE","$this",256],["T_OBJECT_OPERATOR","->",256],["T_STRING","_writer",256],["T_OBJECT_OPERATOR","->",256],["T_STRING","addTerm",256],"(",["T_VARIABLE","$segmentInfo",256],["T_OBJECT_OPERATOR","->",256],["T_STRING","currentTerm",256],"(",")",",",["T_WHITESPACE"," ",256],["T_VARIABLE","$termDocs",256],")",";",["T_WHITESPACE","\n                ",256],"}",["T_WHITESPACE","\n                ",257],["T_VARIABLE","$termDocs",258],["T_WHITESPACE"," ",258],"=",["T_WHITESPACE"," ",258],["T_ARRAY","array",258],"(",")",";",["T_WHITESPACE","\n            ",258],"}",["T_WHITESPACE","\n\n            ",259],["T_VARIABLE","$segmentInfo",261],["T_OBJECT_OPERATOR","->",261],["T_STRING","nextTerm",261],"(",")",";",["T_WHITESPACE","\n            ",261],["T_COMMENT","\/\/ check, if segment dictionary is finished\n",262],["T_WHITESPACE","            ",263],["T_IF","if",263],["T_WHITESPACE"," ",263],"(",["T_VARIABLE","$segmentInfo",263],["T_OBJECT_OPERATOR","->",263],["T_STRING","currentTerm",263],"(",")",["T_WHITESPACE"," ",263],["T_IS_NOT_IDENTICAL","!==",263],["T_WHITESPACE"," ",263],["T_STRING","null",263],")",["T_WHITESPACE"," ",263],"{",["T_WHITESPACE","\n                ",263],["T_COMMENT","\/\/ Put segment back into the priority queue\n",264],["T_WHITESPACE","                ",265],["T_VARIABLE","$segmentInfoQueue",265],["T_OBJECT_OPERATOR","->",265],["T_STRING","put",265],"(",["T_VARIABLE","$segmentInfo",265],")",";",["T_WHITESPACE","\n            ",265],"}",["T_WHITESPACE","\n        ",266],"}",["T_WHITESPACE","\n\n        ",267],["T_VARIABLE","$this",269],["T_OBJECT_OPERATOR","->",269],["T_STRING","_writer",269],["T_OBJECT_OPERATOR","->",269],["T_STRING","closeDictionaryFiles",269],"(",")",";",["T_WHITESPACE","\n    ",269],"}",["T_WHITESPACE","\n",270],"}",["T_WHITESPACE","\n",271]]
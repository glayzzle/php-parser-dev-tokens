[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Zend Framework\n *\n * LICENSE\n *\n * This source file is subject to the new BSD license that is bundled\n * with this package in the file LICENSE.txt.\n * It is also available through the world-wide-web at this URL:\n * http:\/\/framework.zend.com\/license\/new-bsd\n * If you did not receive a copy of the license and are unable to\n * obtain it through the world-wide-web, please send an email\n * to license@zend.com so we can send you a copy immediately.\n *\n * @category   Zend\n * @package    Zend_Search_Lucene\n * @copyright  Copyright (c) 2005-2015 Zend Technologies USA Inc. (http:\/\/www.zend.com)\n * @license    http:\/\/framework.zend.com\/license\/new-bsd     New BSD License\n * @version    $Id$\n *\/",2],["T_WHITESPACE","\n\n",20],["T_DOC_COMMENT","\/** Zend_Search_Lucene_Storage_Directory *\/",22],["T_WHITESPACE","\n",22],["T_COMMENT","#require_once 'Zend\/Search\/Lucene\/Storage\/Directory.php';\n",23],["T_WHITESPACE","\n",24],["T_DOC_COMMENT","\/** Zend_Search_Lucene_Storage_File *\/",25],["T_WHITESPACE","\n",25],["T_COMMENT","#require_once 'Zend\/Search\/Lucene\/Storage\/File.php';\n",26],["T_WHITESPACE","\n",27],["T_DOC_COMMENT","\/**\n * This is an utility class which provides index locks processing functionality\n *\n * @category   Zend\n * @package    Zend_Search_Lucene\n * @copyright  Copyright (c) 2005-2015 Zend Technologies USA Inc. (http:\/\/www.zend.com)\n * @license    http:\/\/framework.zend.com\/license\/new-bsd     New BSD License\n *\/",28],["T_WHITESPACE","\n",35],["T_CLASS","class",36],["T_WHITESPACE"," ",36],["T_STRING","Zend_Search_Lucene_LockManager",36],["T_WHITESPACE","\n",36],"{",["T_WHITESPACE","\n    ",37],["T_DOC_COMMENT","\/**\n     * consts for name of file to show lock status\n     *\/",38],["T_WHITESPACE","\n    ",40],["T_CONST","const",41],["T_WHITESPACE"," ",41],["T_STRING","WRITE_LOCK_FILE",41],["T_WHITESPACE","                ",41],"=",["T_WHITESPACE"," ",41],["T_CONSTANT_ENCAPSED_STRING","'write.lock.file'",41],";",["T_WHITESPACE","\n    ",41],["T_CONST","const",42],["T_WHITESPACE"," ",42],["T_STRING","READ_LOCK_FILE",42],["T_WHITESPACE","                 ",42],"=",["T_WHITESPACE"," ",42],["T_CONSTANT_ENCAPSED_STRING","'read.lock.file'",42],";",["T_WHITESPACE","\n    ",42],["T_CONST","const",43],["T_WHITESPACE"," ",43],["T_STRING","READ_LOCK_PROCESSING_LOCK_FILE",43],["T_WHITESPACE"," ",43],"=",["T_WHITESPACE"," ",43],["T_CONSTANT_ENCAPSED_STRING","'read-lock-processing.lock.file'",43],";",["T_WHITESPACE","\n    ",43],["T_CONST","const",44],["T_WHITESPACE"," ",44],["T_STRING","OPTIMIZATION_LOCK_FILE",44],["T_WHITESPACE","         ",44],"=",["T_WHITESPACE"," ",44],["T_CONSTANT_ENCAPSED_STRING","'optimization.lock.file'",44],";",["T_WHITESPACE","\n\n    ",44],["T_DOC_COMMENT","\/**\n     * Obtain exclusive write lock on the index\n     *\n     * @param Zend_Search_Lucene_Storage_Directory $lockDirectory\n     * @return Zend_Search_Lucene_Storage_File\n     * @throws Zend_Search_Lucene_Exception\n     *\/",46],["T_WHITESPACE","\n    ",52],["T_PUBLIC","public",53],["T_WHITESPACE"," ",53],["T_STATIC","static",53],["T_WHITESPACE"," ",53],["T_FUNCTION","function",53],["T_WHITESPACE"," ",53],["T_STRING","obtainWriteLock",53],"(",["T_STRING","Zend_Search_Lucene_Storage_Directory",53],["T_WHITESPACE"," ",53],["T_VARIABLE","$lockDirectory",53],")",["T_WHITESPACE","\n    ",53],"{",["T_WHITESPACE","\n        ",54],["T_VARIABLE","$lock",55],["T_WHITESPACE"," ",55],"=",["T_WHITESPACE"," ",55],["T_VARIABLE","$lockDirectory",55],["T_OBJECT_OPERATOR","->",55],["T_STRING","createFile",55],"(",["T_STRING","self",55],["T_DOUBLE_COLON","::",55],["T_STRING","WRITE_LOCK_FILE",55],")",";",["T_WHITESPACE","\n        ",55],["T_IF","if",56],["T_WHITESPACE"," ",56],"(","!",["T_VARIABLE","$lock",56],["T_OBJECT_OPERATOR","->",56],["T_STRING","lock",56],"(",["T_STRING","LOCK_EX",56],")",")",["T_WHITESPACE"," ",56],"{",["T_WHITESPACE","\n            ",56],["T_COMMENT","#require_once 'Zend\/Search\/Lucene\/Exception.php';\n",57],["T_WHITESPACE","            ",58],["T_THROW","throw",58],["T_WHITESPACE"," ",58],["T_NEW","new",58],["T_WHITESPACE"," ",58],["T_STRING","Zend_Search_Lucene_Exception",58],"(",["T_CONSTANT_ENCAPSED_STRING","'Can\\'t obtain exclusive index lock'",58],")",";",["T_WHITESPACE","\n        ",58],"}",["T_WHITESPACE","\n        ",59],["T_RETURN","return",60],["T_WHITESPACE"," ",60],["T_VARIABLE","$lock",60],";",["T_WHITESPACE","\n    ",60],"}",["T_WHITESPACE","\n\n    ",61],["T_DOC_COMMENT","\/**\n     * Release exclusive write lock\n     *\n     * @param Zend_Search_Lucene_Storage_Directory $lockDirectory\n     *\/",63],["T_WHITESPACE","\n    ",67],["T_PUBLIC","public",68],["T_WHITESPACE"," ",68],["T_STATIC","static",68],["T_WHITESPACE"," ",68],["T_FUNCTION","function",68],["T_WHITESPACE"," ",68],["T_STRING","releaseWriteLock",68],"(",["T_STRING","Zend_Search_Lucene_Storage_Directory",68],["T_WHITESPACE"," ",68],["T_VARIABLE","$lockDirectory",68],")",["T_WHITESPACE","\n    ",68],"{",["T_WHITESPACE","\n        ",69],["T_VARIABLE","$lock",70],["T_WHITESPACE"," ",70],"=",["T_WHITESPACE"," ",70],["T_VARIABLE","$lockDirectory",70],["T_OBJECT_OPERATOR","->",70],["T_STRING","getFileObject",70],"(",["T_STRING","self",70],["T_DOUBLE_COLON","::",70],["T_STRING","WRITE_LOCK_FILE",70],")",";",["T_WHITESPACE","\n        ",70],["T_VARIABLE","$lock",71],["T_OBJECT_OPERATOR","->",71],["T_STRING","unlock",71],"(",")",";",["T_WHITESPACE","\n    ",71],"}",["T_WHITESPACE","\n\n    ",72],["T_DOC_COMMENT","\/**\n     * Obtain the exclusive \"read escalation\/de-escalation\" lock\n     *\n     * Required to protect the escalate\/de-escalate read lock process\n     * on GFS (and potentially other) mounted filesystems.\n     *\n     * Why we need this:\n     *  While GFS supports cluster-wide locking via flock(), it's\n     *  implementation isn't quite what it should be.  The locking\n     *  semantics that work consistently on a local filesystem tend to\n     *  fail on GFS mounted filesystems.  This appears to be a design defect\n     *  in the implementation of GFS.  How this manifests itself is that\n     *  conditional promotion of a shared lock to exclusive will always\n     *  fail, lock release requests are honored but not immediately\n     *  processed (causing erratic failures of subsequent conditional\n     *  requests) and the releasing of the exclusive lock before the\n     *  shared lock is set when a lock is demoted (which can open a window\n     *  of opportunity for another process to gain an exclusive lock when\n     *  it shoudln't be allowed to).\n     *\n     * @param Zend_Search_Lucene_Storage_Directory $lockDirectory\n     * @return Zend_Search_Lucene_Storage_File\n     * @throws Zend_Search_Lucene_Exception\n     *\/",74],["T_WHITESPACE","\n    ",97],["T_PRIVATE","private",98],["T_WHITESPACE"," ",98],["T_STATIC","static",98],["T_WHITESPACE"," ",98],["T_FUNCTION","function",98],["T_WHITESPACE"," ",98],["T_STRING","_startReadLockProcessing",98],"(",["T_STRING","Zend_Search_Lucene_Storage_Directory",98],["T_WHITESPACE"," ",98],["T_VARIABLE","$lockDirectory",98],")",["T_WHITESPACE","\n    ",98],"{",["T_WHITESPACE","\n        ",99],["T_VARIABLE","$lock",100],["T_WHITESPACE"," ",100],"=",["T_WHITESPACE"," ",100],["T_VARIABLE","$lockDirectory",100],["T_OBJECT_OPERATOR","->",100],["T_STRING","createFile",100],"(",["T_STRING","self",100],["T_DOUBLE_COLON","::",100],["T_STRING","READ_LOCK_PROCESSING_LOCK_FILE",100],")",";",["T_WHITESPACE","\n        ",100],["T_IF","if",101],["T_WHITESPACE"," ",101],"(","!",["T_VARIABLE","$lock",101],["T_OBJECT_OPERATOR","->",101],["T_STRING","lock",101],"(",["T_STRING","LOCK_EX",101],")",")",["T_WHITESPACE"," ",101],"{",["T_WHITESPACE","\n            ",101],["T_COMMENT","#require_once 'Zend\/Search\/Lucene\/Exception.php';\n",102],["T_WHITESPACE","            ",103],["T_THROW","throw",103],["T_WHITESPACE"," ",103],["T_NEW","new",103],["T_WHITESPACE"," ",103],["T_STRING","Zend_Search_Lucene_Exception",103],"(",["T_CONSTANT_ENCAPSED_STRING","'Can\\'t obtain exclusive lock for the read lock processing file'",103],")",";",["T_WHITESPACE","\n        ",103],"}",["T_WHITESPACE","\n        ",104],["T_RETURN","return",105],["T_WHITESPACE"," ",105],["T_VARIABLE","$lock",105],";",["T_WHITESPACE","\n    ",105],"}",["T_WHITESPACE","\n\n    ",106],["T_DOC_COMMENT","\/**\n     * Release the exclusive \"read escalation\/de-escalation\" lock\n     *\n     * Required to protect the escalate\/de-escalate read lock process\n     * on GFS (and potentially other) mounted filesystems.\n     *\n     * @param Zend_Search_Lucene_Storage_Directory $lockDirectory\n     *\/",108],["T_WHITESPACE","\n    ",115],["T_PRIVATE","private",116],["T_WHITESPACE"," ",116],["T_STATIC","static",116],["T_WHITESPACE"," ",116],["T_FUNCTION","function",116],["T_WHITESPACE"," ",116],["T_STRING","_stopReadLockProcessing",116],"(",["T_STRING","Zend_Search_Lucene_Storage_Directory",116],["T_WHITESPACE"," ",116],["T_VARIABLE","$lockDirectory",116],")",["T_WHITESPACE","\n    ",116],"{",["T_WHITESPACE","\n        ",117],["T_VARIABLE","$lock",118],["T_WHITESPACE"," ",118],"=",["T_WHITESPACE"," ",118],["T_VARIABLE","$lockDirectory",118],["T_OBJECT_OPERATOR","->",118],["T_STRING","getFileObject",118],"(",["T_STRING","self",118],["T_DOUBLE_COLON","::",118],["T_STRING","READ_LOCK_PROCESSING_LOCK_FILE",118],")",";",["T_WHITESPACE","\n        ",118],["T_VARIABLE","$lock",119],["T_OBJECT_OPERATOR","->",119],["T_STRING","unlock",119],"(",")",";",["T_WHITESPACE","\n    ",119],"}",["T_WHITESPACE","\n\n\n    ",120],["T_DOC_COMMENT","\/**\n     * Obtain shared read lock on the index\n     *\n     * It doesn't block other read or update processes, but prevent index from the premature cleaning-up\n     *\n     * @param Zend_Search_Lucene_Storage_Directory $defaultLockDirectory\n     * @return Zend_Search_Lucene_Storage_File\n     * @throws Zend_Search_Lucene_Exception\n     *\/",123],["T_WHITESPACE","\n    ",131],["T_PUBLIC","public",132],["T_WHITESPACE"," ",132],["T_STATIC","static",132],["T_WHITESPACE"," ",132],["T_FUNCTION","function",132],["T_WHITESPACE"," ",132],["T_STRING","obtainReadLock",132],"(",["T_STRING","Zend_Search_Lucene_Storage_Directory",132],["T_WHITESPACE"," ",132],["T_VARIABLE","$lockDirectory",132],")",["T_WHITESPACE","\n    ",132],"{",["T_WHITESPACE","\n        ",133],["T_VARIABLE","$lock",134],["T_WHITESPACE"," ",134],"=",["T_WHITESPACE"," ",134],["T_VARIABLE","$lockDirectory",134],["T_OBJECT_OPERATOR","->",134],["T_STRING","createFile",134],"(",["T_STRING","self",134],["T_DOUBLE_COLON","::",134],["T_STRING","READ_LOCK_FILE",134],")",";",["T_WHITESPACE","\n        ",134],["T_IF","if",135],["T_WHITESPACE"," ",135],"(","!",["T_VARIABLE","$lock",135],["T_OBJECT_OPERATOR","->",135],["T_STRING","lock",135],"(",["T_STRING","LOCK_SH",135],")",")",["T_WHITESPACE"," ",135],"{",["T_WHITESPACE","\n            ",135],["T_COMMENT","#require_once 'Zend\/Search\/Lucene\/Exception.php';\n",136],["T_WHITESPACE","            ",137],["T_THROW","throw",137],["T_WHITESPACE"," ",137],["T_NEW","new",137],["T_WHITESPACE"," ",137],["T_STRING","Zend_Search_Lucene_Exception",137],"(",["T_CONSTANT_ENCAPSED_STRING","'Can\\'t obtain shared reading index lock'",137],")",";",["T_WHITESPACE","\n        ",137],"}",["T_WHITESPACE","\n        ",138],["T_RETURN","return",139],["T_WHITESPACE"," ",139],["T_VARIABLE","$lock",139],";",["T_WHITESPACE","\n    ",139],"}",["T_WHITESPACE","\n\n    ",140],["T_DOC_COMMENT","\/**\n     * Release shared read lock\n     *\n     * @param Zend_Search_Lucene_Storage_Directory $lockDirectory\n     *\/",142],["T_WHITESPACE","\n    ",146],["T_PUBLIC","public",147],["T_WHITESPACE"," ",147],["T_STATIC","static",147],["T_WHITESPACE"," ",147],["T_FUNCTION","function",147],["T_WHITESPACE"," ",147],["T_STRING","releaseReadLock",147],"(",["T_STRING","Zend_Search_Lucene_Storage_Directory",147],["T_WHITESPACE"," ",147],["T_VARIABLE","$lockDirectory",147],")",["T_WHITESPACE","\n    ",147],"{",["T_WHITESPACE","\n        ",148],["T_VARIABLE","$lock",149],["T_WHITESPACE"," ",149],"=",["T_WHITESPACE"," ",149],["T_VARIABLE","$lockDirectory",149],["T_OBJECT_OPERATOR","->",149],["T_STRING","getFileObject",149],"(",["T_STRING","self",149],["T_DOUBLE_COLON","::",149],["T_STRING","READ_LOCK_FILE",149],")",";",["T_WHITESPACE","\n        ",149],["T_VARIABLE","$lock",150],["T_OBJECT_OPERATOR","->",150],["T_STRING","unlock",150],"(",")",";",["T_WHITESPACE","\n    ",150],"}",["T_WHITESPACE","\n\n    ",151],["T_DOC_COMMENT","\/**\n     * Escalate Read lock to exclusive level\n     *\n     * @param Zend_Search_Lucene_Storage_Directory $lockDirectory\n     * @return boolean\n     *\/",153],["T_WHITESPACE","\n    ",158],["T_PUBLIC","public",159],["T_WHITESPACE"," ",159],["T_STATIC","static",159],["T_WHITESPACE"," ",159],["T_FUNCTION","function",159],["T_WHITESPACE"," ",159],["T_STRING","escalateReadLock",159],"(",["T_STRING","Zend_Search_Lucene_Storage_Directory",159],["T_WHITESPACE"," ",159],["T_VARIABLE","$lockDirectory",159],")",["T_WHITESPACE","\n    ",159],"{",["T_WHITESPACE","\n        ",160],["T_STRING","self",161],["T_DOUBLE_COLON","::",161],["T_STRING","_startReadLockProcessing",161],"(",["T_VARIABLE","$lockDirectory",161],")",";",["T_WHITESPACE","\n\n        ",161],["T_VARIABLE","$lock",163],["T_WHITESPACE"," ",163],"=",["T_WHITESPACE"," ",163],["T_VARIABLE","$lockDirectory",163],["T_OBJECT_OPERATOR","->",163],["T_STRING","getFileObject",163],"(",["T_STRING","self",163],["T_DOUBLE_COLON","::",163],["T_STRING","READ_LOCK_FILE",163],")",";",["T_WHITESPACE","\n\n        ",163],["T_COMMENT","\/\/ First, release the shared lock for the benefit of GFS since\n",165],["T_WHITESPACE","        ",166],["T_COMMENT","\/\/ it will fail the conditional request to promote the lock to\n",166],["T_WHITESPACE","        ",167],["T_COMMENT","\/\/ \"exclusive\" while the shared lock is held (even when we are\n",167],["T_WHITESPACE","        ",168],["T_COMMENT","\/\/ the only holder).\n",168],["T_WHITESPACE","        ",169],["T_VARIABLE","$lock",169],["T_OBJECT_OPERATOR","->",169],["T_STRING","unlock",169],"(",")",";",["T_WHITESPACE","\n\n        ",169],["T_COMMENT","\/\/ GFS is really poor.  While the above \"unlock\" returns, GFS\n",171],["T_WHITESPACE","        ",172],["T_COMMENT","\/\/ doesn't clean up it's tables right away (which will potentially\n",172],["T_WHITESPACE","        ",173],["T_COMMENT","\/\/ cause the conditional locking for the \"exclusive\" lock to fail.\n",173],["T_WHITESPACE","        ",174],["T_COMMENT","\/\/ We will retry the conditional lock request several times on a\n",174],["T_WHITESPACE","        ",175],["T_COMMENT","\/\/ failure to get past this.  The performance hit is negligible\n",175],["T_WHITESPACE","        ",176],["T_COMMENT","\/\/ in the grand scheme of things and only will occur with GFS\n",176],["T_WHITESPACE","        ",177],["T_COMMENT","\/\/ filesystems or if another local process has the shared lock\n",177],["T_WHITESPACE","        ",178],["T_COMMENT","\/\/ on local filesystems.\n",178],["T_WHITESPACE","        ",179],["T_FOR","for",179],["T_WHITESPACE"," ",179],"(",["T_VARIABLE","$retries",179],["T_WHITESPACE"," ",179],"=",["T_WHITESPACE"," ",179],["T_LNUMBER","0",179],";",["T_WHITESPACE"," ",179],["T_VARIABLE","$retries",179],["T_WHITESPACE"," ",179],"<",["T_WHITESPACE"," ",179],["T_LNUMBER","10",179],";",["T_WHITESPACE"," ",179],["T_VARIABLE","$retries",179],["T_INC","++",179],")",["T_WHITESPACE"," ",179],"{",["T_WHITESPACE","\n            ",179],["T_IF","if",180],["T_WHITESPACE"," ",180],"(",["T_VARIABLE","$lock",180],["T_OBJECT_OPERATOR","->",180],["T_STRING","lock",180],"(",["T_STRING","LOCK_EX",180],",",["T_WHITESPACE"," ",180],["T_STRING","true",180],")",")",["T_WHITESPACE"," ",180],"{",["T_WHITESPACE","\n                ",180],["T_COMMENT","\/\/ Exclusive lock is obtained!\n",181],["T_WHITESPACE","                ",182],["T_STRING","self",182],["T_DOUBLE_COLON","::",182],["T_STRING","_stopReadLockProcessing",182],"(",["T_VARIABLE","$lockDirectory",182],")",";",["T_WHITESPACE","\n                ",182],["T_RETURN","return",183],["T_WHITESPACE"," ",183],["T_STRING","true",183],";",["T_WHITESPACE","\n            ",183],"}",["T_WHITESPACE","\n\n            ",184],["T_COMMENT","\/\/ wait 1 microsecond\n",186],["T_WHITESPACE","            ",187],["T_STRING","usleep",187],"(",["T_LNUMBER","1",187],")",";",["T_WHITESPACE","\n        ",187],"}",["T_WHITESPACE","\n\n        ",188],["T_COMMENT","\/\/ Restore lock state\n",190],["T_WHITESPACE","        ",191],["T_VARIABLE","$lock",191],["T_OBJECT_OPERATOR","->",191],["T_STRING","lock",191],"(",["T_STRING","LOCK_SH",191],")",";",["T_WHITESPACE","\n\n        ",191],["T_STRING","self",193],["T_DOUBLE_COLON","::",193],["T_STRING","_stopReadLockProcessing",193],"(",["T_VARIABLE","$lockDirectory",193],")",";",["T_WHITESPACE","\n        ",193],["T_RETURN","return",194],["T_WHITESPACE"," ",194],["T_STRING","false",194],";",["T_WHITESPACE","\n    ",194],"}",["T_WHITESPACE","\n\n    ",195],["T_DOC_COMMENT","\/**\n     * De-escalate Read lock to shared level\n     *\n     * @param Zend_Search_Lucene_Storage_Directory $lockDirectory\n     *\/",197],["T_WHITESPACE","\n    ",201],["T_PUBLIC","public",202],["T_WHITESPACE"," ",202],["T_STATIC","static",202],["T_WHITESPACE"," ",202],["T_FUNCTION","function",202],["T_WHITESPACE"," ",202],["T_STRING","deEscalateReadLock",202],"(",["T_STRING","Zend_Search_Lucene_Storage_Directory",202],["T_WHITESPACE"," ",202],["T_VARIABLE","$lockDirectory",202],")",["T_WHITESPACE","\n    ",202],"{",["T_WHITESPACE","\n        ",203],["T_VARIABLE","$lock",204],["T_WHITESPACE"," ",204],"=",["T_WHITESPACE"," ",204],["T_VARIABLE","$lockDirectory",204],["T_OBJECT_OPERATOR","->",204],["T_STRING","getFileObject",204],"(",["T_STRING","self",204],["T_DOUBLE_COLON","::",204],["T_STRING","READ_LOCK_FILE",204],")",";",["T_WHITESPACE","\n        ",204],["T_VARIABLE","$lock",205],["T_OBJECT_OPERATOR","->",205],["T_STRING","lock",205],"(",["T_STRING","LOCK_SH",205],")",";",["T_WHITESPACE","\n    ",205],"}",["T_WHITESPACE","\n\n    ",206],["T_DOC_COMMENT","\/**\n     * Obtain exclusive optimization lock on the index\n     *\n     * Returns lock object on success and false otherwise (doesn't block execution)\n     *\n     * @param Zend_Search_Lucene_Storage_Directory $lockDirectory\n     * @return mixed\n     *\/",208],["T_WHITESPACE","\n    ",215],["T_PUBLIC","public",216],["T_WHITESPACE"," ",216],["T_STATIC","static",216],["T_WHITESPACE"," ",216],["T_FUNCTION","function",216],["T_WHITESPACE"," ",216],["T_STRING","obtainOptimizationLock",216],"(",["T_STRING","Zend_Search_Lucene_Storage_Directory",216],["T_WHITESPACE"," ",216],["T_VARIABLE","$lockDirectory",216],")",["T_WHITESPACE","\n    ",216],"{",["T_WHITESPACE","\n        ",217],["T_VARIABLE","$lock",218],["T_WHITESPACE"," ",218],"=",["T_WHITESPACE"," ",218],["T_VARIABLE","$lockDirectory",218],["T_OBJECT_OPERATOR","->",218],["T_STRING","createFile",218],"(",["T_STRING","self",218],["T_DOUBLE_COLON","::",218],["T_STRING","OPTIMIZATION_LOCK_FILE",218],")",";",["T_WHITESPACE","\n        ",218],["T_IF","if",219],["T_WHITESPACE"," ",219],"(","!",["T_VARIABLE","$lock",219],["T_OBJECT_OPERATOR","->",219],["T_STRING","lock",219],"(",["T_STRING","LOCK_EX",219],",",["T_WHITESPACE"," ",219],["T_STRING","true",219],")",")",["T_WHITESPACE"," ",219],"{",["T_WHITESPACE","\n            ",219],["T_RETURN","return",220],["T_WHITESPACE"," ",220],["T_STRING","false",220],";",["T_WHITESPACE","\n        ",220],"}",["T_WHITESPACE","\n        ",221],["T_RETURN","return",222],["T_WHITESPACE"," ",222],["T_VARIABLE","$lock",222],";",["T_WHITESPACE","\n    ",222],"}",["T_WHITESPACE","\n\n    ",223],["T_DOC_COMMENT","\/**\n     * Release exclusive optimization lock\n     *\n     * @param Zend_Search_Lucene_Storage_Directory $lockDirectory\n     *\/",225],["T_WHITESPACE","\n    ",229],["T_PUBLIC","public",230],["T_WHITESPACE"," ",230],["T_STATIC","static",230],["T_WHITESPACE"," ",230],["T_FUNCTION","function",230],["T_WHITESPACE"," ",230],["T_STRING","releaseOptimizationLock",230],"(",["T_STRING","Zend_Search_Lucene_Storage_Directory",230],["T_WHITESPACE"," ",230],["T_VARIABLE","$lockDirectory",230],")",["T_WHITESPACE","\n    ",230],"{",["T_WHITESPACE","\n        ",231],["T_VARIABLE","$lock",232],["T_WHITESPACE"," ",232],"=",["T_WHITESPACE"," ",232],["T_VARIABLE","$lockDirectory",232],["T_OBJECT_OPERATOR","->",232],["T_STRING","getFileObject",232],"(",["T_STRING","self",232],["T_DOUBLE_COLON","::",232],["T_STRING","OPTIMIZATION_LOCK_FILE",232],")",";",["T_WHITESPACE","\n        ",232],["T_VARIABLE","$lock",233],["T_OBJECT_OPERATOR","->",233],["T_STRING","unlock",233],"(",")",";",["T_WHITESPACE","\n    ",233],"}",["T_WHITESPACE","\n\n",234],"}",["T_WHITESPACE","\n",236]]
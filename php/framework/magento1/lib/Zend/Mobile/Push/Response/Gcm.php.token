[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Zend Framework\n *\n * LICENSE\n *\n * This source file is subject to the new BSD license that is bundled\n * with this package in the file LICENSE.txt.\n * It is also available through the world-wide-web at this URL:\n * http:\/\/framework.zend.com\/license\/new-bsd\n * If you did not receive a copy of the license and are unable to\n * obtain it through the world-wide-web, please send an email\n * to license@zend.com so we can send you a copy immediately.\n *\n * @category   Zend\n * @package    Zend_Mobile\n * @subpackage Zend_Mobile_Push\n * @copyright  Copyright (c) 2005-2015 Zend Technologies USA Inc. (http:\/\/www.zend.com)\n * @license    http:\/\/framework.zend.com\/license\/new-bsd     New BSD License\n * @version    $Id$\n *\/",2],["T_WHITESPACE","\n\n",21],["T_DOC_COMMENT","\/**\n * Gcm Response\n *\n * @category   Zend\n * @package    Zend_Mobile\n * @subpackage Zend_Mobile_Push\n * @copyright  Copyright (c) 2005-2015 Zend Technologies USA Inc. (http:\/\/www.zend.com)\n * @license    http:\/\/framework.zend.com\/license\/new-bsd     New BSD License\n * @version    $Id$\n *\/",23],["T_WHITESPACE","\n",32],["T_CLASS","class",33],["T_WHITESPACE"," ",33],["T_STRING","Zend_Mobile_Push_Response_Gcm",33],["T_WHITESPACE","\n",33],"{",["T_WHITESPACE","\n\n    ",34],["T_CONST","const",36],["T_WHITESPACE"," ",36],["T_STRING","RESULT_MESSAGE_ID",36],["T_WHITESPACE"," ",36],"=",["T_WHITESPACE"," ",36],["T_CONSTANT_ENCAPSED_STRING","'message_id'",36],";",["T_WHITESPACE","\n    ",36],["T_CONST","const",37],["T_WHITESPACE"," ",37],["T_STRING","RESULT_ERROR",37],["T_WHITESPACE"," ",37],"=",["T_WHITESPACE"," ",37],["T_CONSTANT_ENCAPSED_STRING","'error'",37],";",["T_WHITESPACE","\n    ",37],["T_CONST","const",38],["T_WHITESPACE"," ",38],["T_STRING","RESULT_CANONICAL",38],["T_WHITESPACE"," ",38],"=",["T_WHITESPACE"," ",38],["T_CONSTANT_ENCAPSED_STRING","'registration_id'",38],";",["T_WHITESPACE","\n\n    ",38],["T_DOC_COMMENT","\/**\n     * Multicast ID\n     * @var int\n     *\/",40],["T_WHITESPACE","\n    ",43],["T_PROTECTED","protected",44],["T_WHITESPACE"," ",44],["T_VARIABLE","$_id",44],";",["T_WHITESPACE","\n\n    ",44],["T_DOC_COMMENT","\/**\n     * Success Count\n     * @var int\n     *\/",46],["T_WHITESPACE","\n    ",49],["T_PROTECTED","protected",50],["T_WHITESPACE"," ",50],["T_VARIABLE","$_successCnt",50],";",["T_WHITESPACE","\n\n    ",50],["T_DOC_COMMENT","\/**\n     * Failure Count\n     * @var int\n     *\/",52],["T_WHITESPACE","\n    ",55],["T_PROTECTED","protected",56],["T_WHITESPACE"," ",56],["T_VARIABLE","$_failureCnt",56],";",["T_WHITESPACE","\n\n    ",56],["T_DOC_COMMENT","\/**\n     * Canonical registration id count\n     * @var int\n     *\/",58],["T_WHITESPACE","\n    ",61],["T_PROTECTED","protected",62],["T_WHITESPACE"," ",62],["T_VARIABLE","$_canonicalCnt",62],";",["T_WHITESPACE","\n\n    ",62],["T_DOC_COMMENT","\/**\n     * Message\n     * @var Zend_Mobile_Push_Message_Gcm\n     *\/",64],["T_WHITESPACE","\n    ",67],["T_PROTECTED","protected",68],["T_WHITESPACE"," ",68],["T_VARIABLE","$_message",68],";",["T_WHITESPACE","\n\n    ",68],["T_DOC_COMMENT","\/**\n     * Results\n     * @var array\n     *\/",70],["T_WHITESPACE","\n    ",73],["T_PROTECTED","protected",74],["T_WHITESPACE"," ",74],["T_VARIABLE","$_results",74],";",["T_WHITESPACE","\n\n    ",74],["T_DOC_COMMENT","\/**\n     * Raw Response\n     * @var array\n     *\/",76],["T_WHITESPACE","\n    ",79],["T_PROTECTED","protected",80],["T_WHITESPACE"," ",80],["T_VARIABLE","$_response",80],";",["T_WHITESPACE","\n\n    ",80],["T_DOC_COMMENT","\/**\n     * Constructor\n     *\n     * @param string $responseString JSON encoded response\n     * @param Zend_Mobile_Push_Message_Gcm $message\n     * @return Zend_Mobile_Push_Response_Gcm\n     * @throws Zend_Mobile_Push_Exception_ServerUnavailable\n     *\/",82],["T_WHITESPACE","\n    ",89],["T_PUBLIC","public",90],["T_WHITESPACE"," ",90],["T_FUNCTION","function",90],["T_WHITESPACE"," ",90],["T_STRING","__construct",90],"(",["T_VARIABLE","$responseString",90],["T_WHITESPACE"," ",90],"=",["T_WHITESPACE"," ",90],["T_STRING","null",90],",",["T_WHITESPACE"," ",90],["T_STRING","Zend_Mobile_Push_Message_Gcm",90],["T_WHITESPACE"," ",90],["T_VARIABLE","$message",90],["T_WHITESPACE"," ",90],"=",["T_WHITESPACE"," ",90],["T_STRING","null",90],")",["T_WHITESPACE","\n    ",90],"{",["T_WHITESPACE","\n        ",91],["T_IF","if",92],["T_WHITESPACE"," ",92],"(",["T_VARIABLE","$responseString",92],")",["T_WHITESPACE"," ",92],"{",["T_WHITESPACE","\n            ",92],["T_IF","if",93],["T_WHITESPACE"," ",93],"(","!",["T_VARIABLE","$response",93],["T_WHITESPACE"," ",93],"=",["T_WHITESPACE"," ",93],["T_STRING","json_decode",93],"(",["T_VARIABLE","$responseString",93],",",["T_WHITESPACE"," ",93],["T_STRING","true",93],")",")",["T_WHITESPACE"," ",93],"{",["T_WHITESPACE","\n                ",93],["T_COMMENT","#require_once 'Zend\/Mobile\/Push\/Exception\/ServerUnavailable.php';\n",94],["T_WHITESPACE","                ",95],["T_THROW","throw",95],["T_WHITESPACE"," ",95],["T_NEW","new",95],["T_WHITESPACE"," ",95],["T_STRING","Zend_Mobile_Push_Exception_ServerUnavailable",95],"(",["T_CONSTANT_ENCAPSED_STRING","'The server gave us an invalid response, try again later'",95],")",";",["T_WHITESPACE","\n            ",95],"}",["T_WHITESPACE","\n            ",96],["T_VARIABLE","$this",97],["T_OBJECT_OPERATOR","->",97],["T_STRING","setResponse",97],"(",["T_VARIABLE","$response",97],")",";",["T_WHITESPACE","\n        ",97],"}",["T_WHITESPACE","\n\n        ",98],["T_IF","if",100],["T_WHITESPACE"," ",100],"(",["T_VARIABLE","$message",100],")",["T_WHITESPACE"," ",100],"{",["T_WHITESPACE","\n            ",100],["T_VARIABLE","$this",101],["T_OBJECT_OPERATOR","->",101],["T_STRING","setMessage",101],"(",["T_VARIABLE","$message",101],")",";",["T_WHITESPACE","\n        ",101],"}",["T_WHITESPACE","\n\n    ",102],"}",["T_WHITESPACE","\n\n    ",104],["T_DOC_COMMENT","\/**\n     * Get Message\n     *\n     * @return Zend_Mobile_Push_Message_Gcm\n     *\/",106],["T_WHITESPACE","\n    ",110],["T_PUBLIC","public",111],["T_WHITESPACE"," ",111],["T_FUNCTION","function",111],["T_WHITESPACE"," ",111],["T_STRING","getMessage",111],"(",")",["T_WHITESPACE","\n    ",111],"{",["T_WHITESPACE","\n        ",112],["T_RETURN","return",113],["T_WHITESPACE"," ",113],["T_VARIABLE","$this",113],["T_OBJECT_OPERATOR","->",113],["T_STRING","_message",113],";",["T_WHITESPACE","\n    ",113],"}",["T_WHITESPACE","\n\n    ",114],["T_DOC_COMMENT","\/**\n     * Set Message\n     *\n     * @param Zend_Mobile_Push_Message_Gcm $message\n     * @return Zend_Mobile_Push_Response_Gcm\n     *\/",116],["T_WHITESPACE","\n    ",121],["T_PUBLIC","public",122],["T_WHITESPACE"," ",122],["T_FUNCTION","function",122],["T_WHITESPACE"," ",122],["T_STRING","setMessage",122],"(",["T_STRING","Zend_Mobile_Push_Message_Gcm",122],["T_WHITESPACE"," ",122],["T_VARIABLE","$message",122],")",["T_WHITESPACE","\n    ",122],"{",["T_WHITESPACE","\n        ",123],["T_VARIABLE","$this",124],["T_OBJECT_OPERATOR","->",124],["T_STRING","_message",124],["T_WHITESPACE"," ",124],"=",["T_WHITESPACE"," ",124],["T_VARIABLE","$message",124],";",["T_WHITESPACE","\n        ",124],["T_RETURN","return",125],["T_WHITESPACE"," ",125],["T_VARIABLE","$this",125],";",["T_WHITESPACE","\n    ",125],"}",["T_WHITESPACE","\n\n    ",126],["T_DOC_COMMENT","\/**\n     * Get Response\n     *\n     * @return array\n     *\/",128],["T_WHITESPACE","\n    ",132],["T_PUBLIC","public",133],["T_WHITESPACE"," ",133],["T_FUNCTION","function",133],["T_WHITESPACE"," ",133],["T_STRING","getResponse",133],"(",")",["T_WHITESPACE","\n    ",133],"{",["T_WHITESPACE","\n        ",134],["T_RETURN","return",135],["T_WHITESPACE"," ",135],["T_VARIABLE","$this",135],["T_OBJECT_OPERATOR","->",135],["T_STRING","_response",135],";",["T_WHITESPACE","\n    ",135],"}",["T_WHITESPACE","\n\n    ",136],["T_DOC_COMMENT","\/**\n     * Set Response\n     *\n     * @param  array $response\n     * @throws Zend_Mobile_Push_Exception\n     * @return Zend_Mobile_Push_Response_Gcm\n     *\/",138],["T_WHITESPACE","\n    ",144],["T_PUBLIC","public",145],["T_WHITESPACE"," ",145],["T_FUNCTION","function",145],["T_WHITESPACE"," ",145],["T_STRING","setResponse",145],"(",["T_ARRAY","array",145],["T_WHITESPACE"," ",145],["T_VARIABLE","$response",145],")",["T_WHITESPACE","\n    ",145],"{",["T_WHITESPACE","\n        ",146],["T_IF","if",147],["T_WHITESPACE"," ",147],"(","!",["T_ISSET","isset",147],"(",["T_VARIABLE","$response",147],"[",["T_CONSTANT_ENCAPSED_STRING","'results'",147],"]",")",["T_WHITESPACE"," ",147],["T_BOOLEAN_OR","||",147],["T_WHITESPACE","\n            ",147],"!",["T_ISSET","isset",148],"(",["T_VARIABLE","$response",148],"[",["T_CONSTANT_ENCAPSED_STRING","'success'",148],"]",")",["T_WHITESPACE"," ",148],["T_BOOLEAN_OR","||",148],["T_WHITESPACE","\n            ",148],"!",["T_ISSET","isset",149],"(",["T_VARIABLE","$response",149],"[",["T_CONSTANT_ENCAPSED_STRING","'failure'",149],"]",")",["T_WHITESPACE"," ",149],["T_BOOLEAN_OR","||",149],["T_WHITESPACE","\n            ",149],"!",["T_ISSET","isset",150],"(",["T_VARIABLE","$response",150],"[",["T_CONSTANT_ENCAPSED_STRING","'canonical_ids'",150],"]",")",["T_WHITESPACE"," ",150],["T_BOOLEAN_OR","||",150],["T_WHITESPACE","\n            ",150],"!",["T_ISSET","isset",151],"(",["T_VARIABLE","$response",151],"[",["T_CONSTANT_ENCAPSED_STRING","'multicast_id'",151],"]",")",")",["T_WHITESPACE"," ",151],"{",["T_WHITESPACE","\n            ",151],["T_THROW","throw",152],["T_WHITESPACE"," ",152],["T_NEW","new",152],["T_WHITESPACE"," ",152],["T_STRING","Zend_Mobile_Push_Exception",152],"(",["T_CONSTANT_ENCAPSED_STRING","'Response did not contain the proper fields'",152],")",";",["T_WHITESPACE","\n        ",152],"}",["T_WHITESPACE","\n        ",153],["T_VARIABLE","$this",154],["T_OBJECT_OPERATOR","->",154],["T_STRING","_response",154],["T_WHITESPACE"," ",154],"=",["T_WHITESPACE"," ",154],["T_VARIABLE","$response",154],";",["T_WHITESPACE","\n        ",154],["T_VARIABLE","$this",155],["T_OBJECT_OPERATOR","->",155],["T_STRING","_results",155],["T_WHITESPACE"," ",155],"=",["T_WHITESPACE"," ",155],["T_VARIABLE","$response",155],"[",["T_CONSTANT_ENCAPSED_STRING","'results'",155],"]",";",["T_WHITESPACE","\n        ",155],["T_VARIABLE","$this",156],["T_OBJECT_OPERATOR","->",156],["T_STRING","_successCnt",156],["T_WHITESPACE"," ",156],"=",["T_WHITESPACE"," ",156],["T_INT_CAST","(int)",156],["T_WHITESPACE"," ",156],["T_VARIABLE","$response",156],"[",["T_CONSTANT_ENCAPSED_STRING","'success'",156],"]",";",["T_WHITESPACE","\n        ",156],["T_VARIABLE","$this",157],["T_OBJECT_OPERATOR","->",157],["T_STRING","_failureCnt",157],["T_WHITESPACE"," ",157],"=",["T_WHITESPACE"," ",157],["T_INT_CAST","(int)",157],["T_WHITESPACE"," ",157],["T_VARIABLE","$response",157],"[",["T_CONSTANT_ENCAPSED_STRING","'failure'",157],"]",";",["T_WHITESPACE","\n        ",157],["T_VARIABLE","$this",158],["T_OBJECT_OPERATOR","->",158],["T_STRING","_canonicalCnt",158],["T_WHITESPACE"," ",158],"=",["T_WHITESPACE"," ",158],["T_INT_CAST","(int)",158],["T_WHITESPACE"," ",158],["T_VARIABLE","$response",158],"[",["T_CONSTANT_ENCAPSED_STRING","'canonical_ids'",158],"]",";",["T_WHITESPACE","\n        ",158],["T_VARIABLE","$this",159],["T_OBJECT_OPERATOR","->",159],["T_STRING","_id",159],["T_WHITESPACE"," ",159],"=",["T_WHITESPACE"," ",159],["T_INT_CAST","(int)",159],["T_WHITESPACE"," ",159],["T_VARIABLE","$response",159],"[",["T_CONSTANT_ENCAPSED_STRING","'multicast_id'",159],"]",";",["T_WHITESPACE","\n        ",159],["T_RETURN","return",160],["T_WHITESPACE"," ",160],["T_VARIABLE","$this",160],";",["T_WHITESPACE","\n    ",160],"}",["T_WHITESPACE","\n\n    ",161],["T_DOC_COMMENT","\/**\n     * Get Success Count\n     *\n     * @return int\n     *\/",163],["T_WHITESPACE","\n    ",167],["T_PUBLIC","public",168],["T_WHITESPACE"," ",168],["T_FUNCTION","function",168],["T_WHITESPACE"," ",168],["T_STRING","getSuccessCount",168],"(",")",["T_WHITESPACE","\n    ",168],"{",["T_WHITESPACE","\n        ",169],["T_RETURN","return",170],["T_WHITESPACE"," ",170],["T_VARIABLE","$this",170],["T_OBJECT_OPERATOR","->",170],["T_STRING","_successCnt",170],";",["T_WHITESPACE","\n    ",170],"}",["T_WHITESPACE","\n\n    ",171],["T_DOC_COMMENT","\/**\n     * Get Failure Count\n     *\n     * @return int\n     *\/",173],["T_WHITESPACE","\n    ",177],["T_PUBLIC","public",178],["T_WHITESPACE"," ",178],["T_FUNCTION","function",178],["T_WHITESPACE"," ",178],["T_STRING","getFailureCount",178],"(",")",["T_WHITESPACE","\n    ",178],"{",["T_WHITESPACE","\n        ",179],["T_RETURN","return",180],["T_WHITESPACE"," ",180],["T_VARIABLE","$this",180],["T_OBJECT_OPERATOR","->",180],["T_STRING","_failureCnt",180],";",["T_WHITESPACE","\n    ",180],"}",["T_WHITESPACE","\n\n    ",181],["T_DOC_COMMENT","\/**\n     * Get Canonical Count\n     *\n     * @return int\n     *\/",183],["T_WHITESPACE","\n    ",187],["T_PUBLIC","public",188],["T_WHITESPACE"," ",188],["T_FUNCTION","function",188],["T_WHITESPACE"," ",188],["T_STRING","getCanonicalCount",188],"(",")",["T_WHITESPACE","\n    ",188],"{",["T_WHITESPACE","\n        ",189],["T_RETURN","return",190],["T_WHITESPACE"," ",190],["T_VARIABLE","$this",190],["T_OBJECT_OPERATOR","->",190],["T_STRING","_canonicalCnt",190],";",["T_WHITESPACE","\n    ",190],"}",["T_WHITESPACE","\n\n    ",191],["T_DOC_COMMENT","\/**\n     * Get Results\n     *\n     * @return array multi dimensional array of:\n     *         NOTE: key is registration_id if the message is passed.\n     *         'registration_id' => array( \n     *             'message_id' => 'id',\n     *             'error' => 'error',\n     *             'registration_id' => 'id'\n     *          )\n     *\/",193],["T_WHITESPACE","\n    ",203],["T_PUBLIC","public",204],["T_WHITESPACE"," ",204],["T_FUNCTION","function",204],["T_WHITESPACE"," ",204],["T_STRING","getResults",204],"(",")",["T_WHITESPACE","\n    ",204],"{",["T_WHITESPACE","\n        ",205],["T_RETURN","return",206],["T_WHITESPACE"," ",206],["T_VARIABLE","$this",206],["T_OBJECT_OPERATOR","->",206],["T_STRING","_correlate",206],"(",")",";",["T_WHITESPACE","\n    ",206],"}",["T_WHITESPACE","\n\n    ",207],["T_DOC_COMMENT","\/**\n     * Get Singular Result\n     *\n     * @param  int   $flag one of the RESULT_* flags\n     * @return array singular array with keys being registration id\n     *               value is the type of result\n     *\/",209],["T_WHITESPACE","\n    ",215],["T_PUBLIC","public",216],["T_WHITESPACE"," ",216],["T_FUNCTION","function",216],["T_WHITESPACE"," ",216],["T_STRING","getResult",216],"(",["T_VARIABLE","$flag",216],")",["T_WHITESPACE","\n    ",216],"{",["T_WHITESPACE","\n        ",217],["T_VARIABLE","$ret",218],["T_WHITESPACE"," ",218],"=",["T_WHITESPACE"," ",218],["T_ARRAY","array",218],"(",")",";",["T_WHITESPACE","\n        ",218],["T_FOREACH","foreach",219],["T_WHITESPACE"," ",219],"(",["T_VARIABLE","$this",219],["T_OBJECT_OPERATOR","->",219],["T_STRING","_correlate",219],"(",")",["T_WHITESPACE"," ",219],["T_AS","as",219],["T_WHITESPACE"," ",219],["T_VARIABLE","$k",219],["T_WHITESPACE"," ",219],["T_DOUBLE_ARROW","=>",219],["T_WHITESPACE"," ",219],["T_VARIABLE","$v",219],")",["T_WHITESPACE"," ",219],"{",["T_WHITESPACE","\n            ",219],["T_IF","if",220],["T_WHITESPACE"," ",220],"(",["T_ISSET","isset",220],"(",["T_VARIABLE","$v",220],"[",["T_VARIABLE","$flag",220],"]",")",")",["T_WHITESPACE"," ",220],"{",["T_WHITESPACE","\n                ",220],["T_VARIABLE","$ret",221],"[",["T_VARIABLE","$k",221],"]",["T_WHITESPACE"," ",221],"=",["T_WHITESPACE"," ",221],["T_VARIABLE","$v",221],"[",["T_VARIABLE","$flag",221],"]",";",["T_WHITESPACE","\n            ",221],"}",["T_WHITESPACE","\n        ",222],"}",["T_WHITESPACE","\n        ",223],["T_RETURN","return",224],["T_WHITESPACE"," ",224],["T_VARIABLE","$ret",224],";",["T_WHITESPACE","\n    ",224],"}",["T_WHITESPACE","\n\n    ",225],["T_DOC_COMMENT","\/**\n     * Correlate Message and Result\n     *\n     * @return array\n     *\/",227],["T_WHITESPACE","\n    ",231],["T_PROTECTED","protected",232],["T_WHITESPACE"," ",232],["T_FUNCTION","function",232],["T_WHITESPACE"," ",232],["T_STRING","_correlate",232],"(",")",["T_WHITESPACE","\n    ",232],"{",["T_WHITESPACE","\n        ",233],["T_VARIABLE","$results",234],["T_WHITESPACE"," ",234],"=",["T_WHITESPACE"," ",234],["T_VARIABLE","$this",234],["T_OBJECT_OPERATOR","->",234],["T_STRING","_results",234],";",["T_WHITESPACE","\n        ",234],["T_IF","if",235],["T_WHITESPACE"," ",235],"(",["T_VARIABLE","$this",235],["T_OBJECT_OPERATOR","->",235],["T_STRING","_message",235],["T_WHITESPACE"," ",235],["T_BOOLEAN_AND","&&",235],["T_WHITESPACE"," ",235],["T_VARIABLE","$results",235],")",["T_WHITESPACE"," ",235],"{",["T_WHITESPACE","\n            ",235],["T_VARIABLE","$tokens",236],["T_WHITESPACE"," ",236],"=",["T_WHITESPACE"," ",236],["T_VARIABLE","$this",236],["T_OBJECT_OPERATOR","->",236],["T_STRING","_message",236],["T_OBJECT_OPERATOR","->",236],["T_STRING","getToken",236],"(",")",";",["T_WHITESPACE","\n            ",236],["T_WHILE","while",237],"(",["T_VARIABLE","$token",237],["T_WHITESPACE"," ",237],"=",["T_WHITESPACE"," ",237],["T_STRING","array_shift",237],"(",["T_VARIABLE","$tokens",237],")",")",["T_WHITESPACE"," ",237],"{",["T_WHITESPACE","\n                ",237],["T_VARIABLE","$results",238],"[",["T_VARIABLE","$token",238],"]",["T_WHITESPACE"," ",238],"=",["T_WHITESPACE"," ",238],["T_STRING","array_shift",238],"(",["T_VARIABLE","$results",238],")",";",["T_WHITESPACE","\n            ",238],"}",["T_WHITESPACE","\n        ",239],"}",["T_WHITESPACE","\n        ",240],["T_RETURN","return",241],["T_WHITESPACE"," ",241],["T_VARIABLE","$results",241],";",["T_WHITESPACE","\n    ",241],"}",["T_WHITESPACE","\n",242],"}",["T_WHITESPACE","\n",243]]
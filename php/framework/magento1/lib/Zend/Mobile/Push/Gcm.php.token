[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Zend Framework\n *\n * LICENSE\n *\n * This source file is subject to the new BSD license that is bundled\n * with this package in the file LICENSE.txt.\n * It is also available through the world-wide-web at this URL:\n * http:\/\/framework.zend.com\/license\/new-bsd\n * If you did not receive a copy of the license and are unable to\n * obtain it through the world-wide-web, please send an email\n * to license@zend.com so we can send you a copy immediately.\n *\n * @category   Zend\n * @package    Zend_Mobile\n * @subpackage Zend_Mobile_Push\n * @copyright  Copyright (c) 2005-2015 Zend Technologies USA Inc. (http:\/\/www.zend.com)\n * @license    http:\/\/framework.zend.com\/license\/new-bsd     New BSD License\n * @version    $Id$\n *\/",2],["T_WHITESPACE","\n\n",21],["T_DOC_COMMENT","\/** Zend_Http_Client **\/",23],["T_WHITESPACE","\n",23],["T_COMMENT","#require_once 'Zend\/Http\/Client.php';\n",24],["T_WHITESPACE","\n",25],["T_DOC_COMMENT","\/** Zend_Mobile_Push_Abstract **\/",26],["T_WHITESPACE","\n",26],["T_COMMENT","#require_once 'Zend\/Mobile\/Push\/Abstract.php';\n",27],["T_WHITESPACE","\n",28],["T_DOC_COMMENT","\/** Zend_Mobile_Push_Message_Gcm **\/",29],["T_WHITESPACE","\n",29],["T_COMMENT","#require_once 'Zend\/Mobile\/Push\/Message\/Gcm.php';\n",30],["T_WHITESPACE","\n",31],["T_DOC_COMMENT","\/** Zend_Mobile_Push_Response_Gcm **\/",32],["T_WHITESPACE","\n",32],["T_COMMENT","#require_once 'Zend\/Mobile\/Push\/Response\/Gcm.php';\n",33],["T_WHITESPACE","\n",34],["T_DOC_COMMENT","\/**\n * GCM Push\n *\n * @category   Zend\n * @package    Zend_Mobile\n * @subpackage Zend_Mobile_Push\n * @copyright  Copyright (c) 2005-2015 Zend Technologies USA Inc. (http:\/\/www.zend.com)\n * @license    http:\/\/framework.zend.com\/license\/new-bsd     New BSD License\n * @version    $Id$\n *\/",35],["T_WHITESPACE","\n",44],["T_CLASS","class",45],["T_WHITESPACE"," ",45],["T_STRING","Zend_Mobile_Push_Gcm",45],["T_WHITESPACE"," ",45],["T_EXTENDS","extends",45],["T_WHITESPACE"," ",45],["T_STRING","Zend_Mobile_Push_Abstract",45],["T_WHITESPACE","\n",45],"{",["T_WHITESPACE","\n\n    ",46],["T_DOC_COMMENT","\/**\n     * @const string Server URI\n     *\/",48],["T_WHITESPACE","\n    ",50],["T_CONST","const",51],["T_WHITESPACE"," ",51],["T_STRING","SERVER_URI",51],["T_WHITESPACE"," ",51],"=",["T_WHITESPACE"," ",51],["T_CONSTANT_ENCAPSED_STRING","'https:\/\/android.googleapis.com\/gcm\/send'",51],";",["T_WHITESPACE","\n\n    ",51],["T_DOC_COMMENT","\/**\n     * Http Client\n     *\n     * @var Zend_Http_Client\n     *\/",53],["T_WHITESPACE","\n    ",57],["T_PROTECTED","protected",58],["T_WHITESPACE"," ",58],["T_VARIABLE","$_httpClient",58],";",["T_WHITESPACE","\n\n    ",58],["T_DOC_COMMENT","\/**\n     * API Key\n     *\n     * @var string\n     *\/",60],["T_WHITESPACE","\n    ",64],["T_PROTECTED","protected",65],["T_WHITESPACE"," ",65],["T_VARIABLE","$_apiKey",65],";",["T_WHITESPACE","\n\n    ",65],["T_DOC_COMMENT","\/**\n     * Get API Key\n     *\n     * @return string\n     *\/",67],["T_WHITESPACE","\n    ",71],["T_PUBLIC","public",72],["T_WHITESPACE"," ",72],["T_FUNCTION","function",72],["T_WHITESPACE"," ",72],["T_STRING","getApiKey",72],"(",")",["T_WHITESPACE","\n    ",72],"{",["T_WHITESPACE","\n        ",73],["T_RETURN","return",74],["T_WHITESPACE"," ",74],["T_VARIABLE","$this",74],["T_OBJECT_OPERATOR","->",74],["T_STRING","_apiKey",74],";",["T_WHITESPACE","\n    ",74],"}",["T_WHITESPACE","\n\n    ",75],["T_DOC_COMMENT","\/**\n     * Set API Key\n     *\n     * @param  string $key\n     * @return Zend_Mobile_Push_Gcm\n     * @throws Zend_Mobile_Push_Exception\n     *\/",77],["T_WHITESPACE","\n    ",83],["T_PUBLIC","public",84],["T_WHITESPACE"," ",84],["T_FUNCTION","function",84],["T_WHITESPACE"," ",84],["T_STRING","setApiKey",84],"(",["T_VARIABLE","$key",84],")",["T_WHITESPACE","\n    ",84],"{",["T_WHITESPACE","\n        ",85],["T_IF","if",86],["T_WHITESPACE"," ",86],"(","!",["T_STRING","is_string",86],"(",["T_VARIABLE","$key",86],")",["T_WHITESPACE"," ",86],["T_BOOLEAN_OR","||",86],["T_WHITESPACE"," ",86],["T_EMPTY","empty",86],"(",["T_VARIABLE","$key",86],")",")",["T_WHITESPACE"," ",86],"{",["T_WHITESPACE","\n            ",86],["T_THROW","throw",87],["T_WHITESPACE"," ",87],["T_NEW","new",87],["T_WHITESPACE"," ",87],["T_STRING","Zend_Mobile_Push_Exception",87],"(",["T_CONSTANT_ENCAPSED_STRING","'The api key must be a string and not empty'",87],")",";",["T_WHITESPACE","\n        ",87],"}",["T_WHITESPACE","\n        ",88],["T_VARIABLE","$this",89],["T_OBJECT_OPERATOR","->",89],["T_STRING","_apiKey",89],["T_WHITESPACE"," ",89],"=",["T_WHITESPACE"," ",89],["T_VARIABLE","$key",89],";",["T_WHITESPACE","\n        ",89],["T_RETURN","return",90],["T_WHITESPACE"," ",90],["T_VARIABLE","$this",90],";",["T_WHITESPACE","\n    ",90],"}",["T_WHITESPACE","\n\n    ",91],["T_DOC_COMMENT","\/**\n     * Get Http Client\n     *\n     * @return Zend_Http_Client\n     *\/",93],["T_WHITESPACE","\n    ",97],["T_PUBLIC","public",98],["T_WHITESPACE"," ",98],["T_FUNCTION","function",98],["T_WHITESPACE"," ",98],["T_STRING","getHttpClient",98],"(",")",["T_WHITESPACE","\n    ",98],"{",["T_WHITESPACE","\n        ",99],["T_IF","if",100],["T_WHITESPACE"," ",100],"(","!",["T_VARIABLE","$this",100],["T_OBJECT_OPERATOR","->",100],["T_STRING","_httpClient",100],")",["T_WHITESPACE"," ",100],"{",["T_WHITESPACE","\n            ",100],["T_VARIABLE","$this",101],["T_OBJECT_OPERATOR","->",101],["T_STRING","_httpClient",101],["T_WHITESPACE"," ",101],"=",["T_WHITESPACE"," ",101],["T_NEW","new",101],["T_WHITESPACE"," ",101],["T_STRING","Zend_Http_Client",101],"(",")",";",["T_WHITESPACE","\n            ",101],["T_VARIABLE","$this",102],["T_OBJECT_OPERATOR","->",102],["T_STRING","_httpClient",102],["T_OBJECT_OPERATOR","->",102],["T_STRING","setConfig",102],"(",["T_ARRAY","array",102],"(",["T_WHITESPACE","\n                ",102],["T_CONSTANT_ENCAPSED_STRING","'strictredirects'",103],["T_WHITESPACE"," ",103],["T_DOUBLE_ARROW","=>",103],["T_WHITESPACE"," ",103],["T_STRING","true",103],",",["T_WHITESPACE","\n            ",103],")",")",";",["T_WHITESPACE","\n        ",104],"}",["T_WHITESPACE","\n        ",105],["T_RETURN","return",106],["T_WHITESPACE"," ",106],["T_VARIABLE","$this",106],["T_OBJECT_OPERATOR","->",106],["T_STRING","_httpClient",106],";",["T_WHITESPACE","\n    ",106],"}",["T_WHITESPACE","\n\n    ",107],["T_DOC_COMMENT","\/**\n     * Set Http Client\n     *\n     * @return Zend_Mobile_Push_Gcm\n     *\/",109],["T_WHITESPACE","\n    ",113],["T_PUBLIC","public",114],["T_WHITESPACE"," ",114],["T_FUNCTION","function",114],["T_WHITESPACE"," ",114],["T_STRING","setHttpClient",114],"(",["T_STRING","Zend_Http_Client",114],["T_WHITESPACE"," ",114],["T_VARIABLE","$client",114],")",["T_WHITESPACE","\n    ",114],"{",["T_WHITESPACE","\n        ",115],["T_VARIABLE","$this",116],["T_OBJECT_OPERATOR","->",116],["T_STRING","_httpClient",116],["T_WHITESPACE"," ",116],"=",["T_WHITESPACE"," ",116],["T_VARIABLE","$client",116],";",["T_WHITESPACE","\n        ",116],["T_RETURN","return",117],["T_WHITESPACE"," ",117],["T_VARIABLE","$this",117],";",["T_WHITESPACE","\n    ",117],"}",["T_WHITESPACE","\n\n    ",118],["T_DOC_COMMENT","\/**\n     * Send Message\n     *\n     * @param  Zend_Mobile_Push_Message_Abstract $message\n     * @throws Zend_Http_Client_Exception\n     * @throws Zend_Mobile_Push_Exception\n     * @throws Zend_Mobile_Push_Exception_InvalidAuthToken\n     * @throws Zend_Mobile_Push_Exception_InvalidPayload\n     * @throws Zend_Mobile_Push_Exception_ServerUnavailable\n     * @return Zend_Mobile_Push_Response_Gcm\n     *\/",120],["T_WHITESPACE","\n    ",130],["T_PUBLIC","public",131],["T_WHITESPACE"," ",131],["T_FUNCTION","function",131],["T_WHITESPACE"," ",131],["T_STRING","send",131],"(",["T_STRING","Zend_Mobile_Push_Message_Abstract",131],["T_WHITESPACE"," ",131],["T_VARIABLE","$message",131],")",["T_WHITESPACE","\n    ",131],"{",["T_WHITESPACE","\n        ",132],["T_IF","if",133],["T_WHITESPACE"," ",133],"(","!",["T_VARIABLE","$message",133],["T_OBJECT_OPERATOR","->",133],["T_STRING","validate",133],"(",")",")",["T_WHITESPACE"," ",133],"{",["T_WHITESPACE","\n            ",133],["T_THROW","throw",134],["T_WHITESPACE"," ",134],["T_NEW","new",134],["T_WHITESPACE"," ",134],["T_STRING","Zend_Mobile_Push_Exception",134],"(",["T_CONSTANT_ENCAPSED_STRING","'The message is not valid.'",134],")",";",["T_WHITESPACE","\n        ",134],"}",["T_WHITESPACE","\n\n        ",135],["T_VARIABLE","$this",137],["T_OBJECT_OPERATOR","->",137],["T_STRING","connect",137],"(",")",";",["T_WHITESPACE","\n\n        ",137],["T_VARIABLE","$client",139],["T_WHITESPACE"," ",139],"=",["T_WHITESPACE"," ",139],["T_VARIABLE","$this",139],["T_OBJECT_OPERATOR","->",139],["T_STRING","getHttpClient",139],"(",")",";",["T_WHITESPACE","\n        ",139],["T_VARIABLE","$client",140],["T_OBJECT_OPERATOR","->",140],["T_STRING","setUri",140],"(",["T_STRING","self",140],["T_DOUBLE_COLON","::",140],["T_STRING","SERVER_URI",140],")",";",["T_WHITESPACE","\n        ",140],["T_VARIABLE","$client",141],["T_OBJECT_OPERATOR","->",141],["T_STRING","setHeaders",141],"(",["T_CONSTANT_ENCAPSED_STRING","'Authorization'",141],",",["T_WHITESPACE"," ",141],["T_CONSTANT_ENCAPSED_STRING","'key='",141],["T_WHITESPACE"," ",141],".",["T_WHITESPACE"," ",141],["T_VARIABLE","$this",141],["T_OBJECT_OPERATOR","->",141],["T_STRING","getApiKey",141],"(",")",")",";",["T_WHITESPACE","\n\n        ",141],["T_VARIABLE","$response",143],["T_WHITESPACE"," ",143],"=",["T_WHITESPACE"," ",143],["T_VARIABLE","$client",143],["T_OBJECT_OPERATOR","->",143],["T_STRING","setRawData",143],"(",["T_VARIABLE","$message",143],["T_OBJECT_OPERATOR","->",143],["T_STRING","toJson",143],"(",")",",",["T_WHITESPACE"," ",143],["T_CONSTANT_ENCAPSED_STRING","'application\/json'",143],")",["T_WHITESPACE","\n                           ",143],["T_OBJECT_OPERATOR","->",144],["T_STRING","request",144],"(",["T_CONSTANT_ENCAPSED_STRING","'POST'",144],")",";",["T_WHITESPACE","\n        ",144],["T_VARIABLE","$this",145],["T_OBJECT_OPERATOR","->",145],["T_STRING","close",145],"(",")",";",["T_WHITESPACE","\n\n        ",145],["T_SWITCH","switch",147],["T_WHITESPACE"," ",147],"(",["T_VARIABLE","$response",147],["T_OBJECT_OPERATOR","->",147],["T_STRING","getStatus",147],"(",")",")",["T_WHITESPACE","\n        ",147],"{",["T_WHITESPACE","\n            ",148],["T_CASE","case",149],["T_WHITESPACE"," ",149],["T_LNUMBER","500",149],":",["T_WHITESPACE","\n                ",149],["T_COMMENT","#require_once 'Zend\/Mobile\/Push\/Exception\/ServerUnavailable.php';\n",150],["T_WHITESPACE","                ",151],["T_THROW","throw",151],["T_WHITESPACE"," ",151],["T_NEW","new",151],["T_WHITESPACE"," ",151],["T_STRING","Zend_Mobile_Push_Exception_ServerUnavailable",151],"(",["T_CONSTANT_ENCAPSED_STRING","'The server encountered an internal error, try again'",151],")",";",["T_WHITESPACE","\n                ",151],["T_BREAK","break",152],";",["T_WHITESPACE","\n            ",152],["T_CASE","case",153],["T_WHITESPACE"," ",153],["T_LNUMBER","503",153],":",["T_WHITESPACE","\n                ",153],["T_COMMENT","#require_once 'Zend\/Mobile\/Push\/Exception\/ServerUnavailable.php';\n",154],["T_WHITESPACE","                ",155],["T_THROW","throw",155],["T_WHITESPACE"," ",155],["T_NEW","new",155],["T_WHITESPACE"," ",155],["T_STRING","Zend_Mobile_Push_Exception_ServerUnavailable",155],"(",["T_CONSTANT_ENCAPSED_STRING","'The server was unavailable, check Retry-After header'",155],")",";",["T_WHITESPACE","\n                ",155],["T_BREAK","break",156],";",["T_WHITESPACE","\n            ",156],["T_CASE","case",157],["T_WHITESPACE"," ",157],["T_LNUMBER","401",157],":",["T_WHITESPACE","\n                ",157],["T_COMMENT","#require_once 'Zend\/Mobile\/Push\/Exception\/InvalidAuthToken.php';\n",158],["T_WHITESPACE","                ",159],["T_THROW","throw",159],["T_WHITESPACE"," ",159],["T_NEW","new",159],["T_WHITESPACE"," ",159],["T_STRING","Zend_Mobile_Push_Exception_InvalidAuthToken",159],"(",["T_CONSTANT_ENCAPSED_STRING","'There was an error authenticating the sender account'",159],")",";",["T_WHITESPACE","\n                ",159],["T_BREAK","break",160],";",["T_WHITESPACE","\n            ",160],["T_CASE","case",161],["T_WHITESPACE"," ",161],["T_LNUMBER","400",161],":",["T_WHITESPACE","\n                ",161],["T_COMMENT","#require_once 'Zend\/Mobile\/Push\/Exception\/InvalidPayload.php';\n",162],["T_WHITESPACE","                ",163],["T_THROW","throw",163],["T_WHITESPACE"," ",163],["T_NEW","new",163],["T_WHITESPACE"," ",163],["T_STRING","Zend_Mobile_Push_Exception_InvalidPayload",163],"(",["T_CONSTANT_ENCAPSED_STRING","'The request could not be parsed as JSON or contains invalid fields'",163],")",";",["T_WHITESPACE","\n                ",163],["T_BREAK","break",164],";",["T_WHITESPACE","\n        ",164],"}",["T_WHITESPACE","\n        ",165],["T_RETURN","return",166],["T_WHITESPACE"," ",166],["T_NEW","new",166],["T_WHITESPACE"," ",166],["T_STRING","Zend_Mobile_Push_Response_Gcm",166],"(",["T_VARIABLE","$response",166],["T_OBJECT_OPERATOR","->",166],["T_STRING","getBody",166],"(",")",",",["T_WHITESPACE"," ",166],["T_VARIABLE","$message",166],")",";",["T_WHITESPACE","\n    ",166],"}",["T_WHITESPACE","\n",167],"}",["T_WHITESPACE","\n",168]]
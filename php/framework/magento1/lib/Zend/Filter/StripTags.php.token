[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Zend Framework\n *\n * LICENSE\n *\n * This source file is subject to the new BSD license that is bundled\n * with this package in the file LICENSE.txt.\n * It is also available through the world-wide-web at this URL:\n * http:\/\/framework.zend.com\/license\/new-bsd\n * If you did not receive a copy of the license and are unable to\n * obtain it through the world-wide-web, please send an email\n * to license@zend.com so we can send you a copy immediately.\n *\n * @category   Zend\n * @package    Zend_Filter\n * @copyright  Copyright (c) 2005-2015 Zend Technologies USA Inc. (http:\/\/www.zend.com)\n * @license    http:\/\/framework.zend.com\/license\/new-bsd     New BSD License\n * @version    $Id$\n *\/",2],["T_WHITESPACE","\n\n\n",20],["T_DOC_COMMENT","\/**\n * @see Zend_Filter_Interface\n *\/",23],["T_WHITESPACE","\n",25],["T_COMMENT","#require_once 'Zend\/Filter\/Interface.php';\n",26],["T_WHITESPACE","\n\n",27],["T_DOC_COMMENT","\/**\n * @category   Zend\n * @package    Zend_Filter\n * @copyright  Copyright (c) 2005-2015 Zend Technologies USA Inc. (http:\/\/www.zend.com)\n * @license    http:\/\/framework.zend.com\/license\/new-bsd     New BSD License\n *\/",29],["T_WHITESPACE","\n",34],["T_CLASS","class",35],["T_WHITESPACE"," ",35],["T_STRING","Zend_Filter_StripTags",35],["T_WHITESPACE"," ",35],["T_IMPLEMENTS","implements",35],["T_WHITESPACE"," ",35],["T_STRING","Zend_Filter_Interface",35],["T_WHITESPACE","\n",35],"{",["T_WHITESPACE","\n    ",36],["T_DOC_COMMENT","\/**\n     * Unique ID prefix used for allowing comments\n     *\/",37],["T_WHITESPACE","\n    ",39],["T_CONST","const",40],["T_WHITESPACE"," ",40],["T_STRING","UNIQUE_ID_PREFIX",40],["T_WHITESPACE"," ",40],"=",["T_WHITESPACE"," ",40],["T_CONSTANT_ENCAPSED_STRING","'__Zend_Filter_StripTags__'",40],";",["T_WHITESPACE","\n\n    ",40],["T_DOC_COMMENT","\/**\n     * Whether comments are allowed\n     *\n     * If false (the default), then comments are removed from the input string.\n     *\n     * This setting is now deprecated, and ignored internally.\n     *\n     * @deprecated\n     * @var boolean\n     *\/",42],["T_WHITESPACE","\n    ",51],["T_PUBLIC","public",52],["T_WHITESPACE"," ",52],["T_VARIABLE","$commentsAllowed",52],["T_WHITESPACE"," ",52],"=",["T_WHITESPACE"," ",52],["T_STRING","false",52],";",["T_WHITESPACE","\n\n    ",52],["T_DOC_COMMENT","\/**\n     * Array of allowed tags and allowed attributes for each allowed tag\n     *\n     * Tags are stored in the array keys, and the array values are themselves\n     * arrays of the attributes allowed for the corresponding tag.\n     *\n     * @var array\n     *\/",54],["T_WHITESPACE","\n    ",61],["T_PROTECTED","protected",62],["T_WHITESPACE"," ",62],["T_VARIABLE","$_tagsAllowed",62],["T_WHITESPACE"," ",62],"=",["T_WHITESPACE"," ",62],["T_ARRAY","array",62],"(",")",";",["T_WHITESPACE","\n\n    ",62],["T_DOC_COMMENT","\/**\n     * Array of allowed attributes for all allowed tags\n     *\n     * Attributes stored here are allowed for all of the allowed tags.\n     *\n     * @var array\n     *\/",64],["T_WHITESPACE","\n    ",70],["T_PROTECTED","protected",71],["T_WHITESPACE"," ",71],["T_VARIABLE","$_attributesAllowed",71],["T_WHITESPACE"," ",71],"=",["T_WHITESPACE"," ",71],["T_ARRAY","array",71],"(",")",";",["T_WHITESPACE","\n\n    ",71],["T_DOC_COMMENT","\/**\n     * Sets the filter options\n     * Allowed options are\n     *     'allowTags'     => Tags which are allowed\n     *     'allowAttribs'  => Attributes which are allowed\n     *     'allowComments' => Are comments allowed ?\n     *\n     * @param  string|array|Zend_Config $options\n     * @return void\n     *\/",73],["T_WHITESPACE","\n    ",82],["T_PUBLIC","public",83],["T_WHITESPACE"," ",83],["T_FUNCTION","function",83],["T_WHITESPACE"," ",83],["T_STRING","__construct",83],"(",["T_VARIABLE","$options",83],["T_WHITESPACE"," ",83],"=",["T_WHITESPACE"," ",83],["T_STRING","null",83],")",["T_WHITESPACE","\n    ",83],"{",["T_WHITESPACE","\n        ",84],["T_IF","if",85],["T_WHITESPACE"," ",85],"(",["T_VARIABLE","$options",85],["T_WHITESPACE"," ",85],["T_INSTANCEOF","instanceof",85],["T_WHITESPACE"," ",85],["T_STRING","Zend_Config",85],")",["T_WHITESPACE"," ",85],"{",["T_WHITESPACE","\n            ",85],["T_VARIABLE","$options",86],["T_WHITESPACE"," ",86],"=",["T_WHITESPACE"," ",86],["T_VARIABLE","$options",86],["T_OBJECT_OPERATOR","->",86],["T_STRING","toArray",86],"(",")",";",["T_WHITESPACE","\n        ",86],"}",["T_WHITESPACE"," ",87],["T_ELSE","else",87],["T_WHITESPACE"," ",87],["T_IF","if",87],["T_WHITESPACE"," ",87],"(","(","!",["T_STRING","is_array",87],"(",["T_VARIABLE","$options",87],")",")",["T_WHITESPACE"," ",87],["T_BOOLEAN_OR","||",87],["T_WHITESPACE"," ",87],"(",["T_STRING","is_array",87],"(",["T_VARIABLE","$options",87],")",["T_WHITESPACE"," ",87],["T_BOOLEAN_AND","&&",87],["T_WHITESPACE"," ",87],"!",["T_STRING","array_key_exists",87],"(",["T_CONSTANT_ENCAPSED_STRING","'allowTags'",87],",",["T_WHITESPACE"," ",87],["T_VARIABLE","$options",87],")",["T_WHITESPACE"," ",87],["T_BOOLEAN_AND","&&",87],["T_WHITESPACE","\n            ",87],"!",["T_STRING","array_key_exists",88],"(",["T_CONSTANT_ENCAPSED_STRING","'allowAttribs'",88],",",["T_WHITESPACE"," ",88],["T_VARIABLE","$options",88],")",["T_WHITESPACE"," ",88],["T_BOOLEAN_AND","&&",88],["T_WHITESPACE"," ",88],"!",["T_STRING","array_key_exists",88],"(",["T_CONSTANT_ENCAPSED_STRING","'allowComments'",88],",",["T_WHITESPACE"," ",88],["T_VARIABLE","$options",88],")",")",")",["T_WHITESPACE"," ",88],"{",["T_WHITESPACE","\n            ",88],["T_VARIABLE","$options",89],["T_WHITESPACE"," ",89],"=",["T_WHITESPACE"," ",89],["T_STRING","func_get_args",89],"(",")",";",["T_WHITESPACE","\n            ",89],["T_VARIABLE","$temp",90],"[",["T_CONSTANT_ENCAPSED_STRING","'allowTags'",90],"]",["T_WHITESPACE"," ",90],"=",["T_WHITESPACE"," ",90],["T_STRING","array_shift",90],"(",["T_VARIABLE","$options",90],")",";",["T_WHITESPACE","\n            ",90],["T_IF","if",91],["T_WHITESPACE"," ",91],"(","!",["T_EMPTY","empty",91],"(",["T_VARIABLE","$options",91],")",")",["T_WHITESPACE"," ",91],"{",["T_WHITESPACE","\n                ",91],["T_VARIABLE","$temp",92],"[",["T_CONSTANT_ENCAPSED_STRING","'allowAttribs'",92],"]",["T_WHITESPACE"," ",92],"=",["T_WHITESPACE"," ",92],["T_STRING","array_shift",92],"(",["T_VARIABLE","$options",92],")",";",["T_WHITESPACE","\n            ",92],"}",["T_WHITESPACE","\n\n            ",93],["T_IF","if",95],["T_WHITESPACE"," ",95],"(","!",["T_EMPTY","empty",95],"(",["T_VARIABLE","$options",95],")",")",["T_WHITESPACE"," ",95],"{",["T_WHITESPACE","\n                ",95],["T_VARIABLE","$temp",96],"[",["T_CONSTANT_ENCAPSED_STRING","'allowComments'",96],"]",["T_WHITESPACE"," ",96],"=",["T_WHITESPACE"," ",96],["T_STRING","array_shift",96],"(",["T_VARIABLE","$options",96],")",";",["T_WHITESPACE","\n            ",96],"}",["T_WHITESPACE","\n\n            ",97],["T_VARIABLE","$options",99],["T_WHITESPACE"," ",99],"=",["T_WHITESPACE"," ",99],["T_VARIABLE","$temp",99],";",["T_WHITESPACE","\n        ",99],"}",["T_WHITESPACE","\n\n        ",100],["T_IF","if",102],["T_WHITESPACE"," ",102],"(",["T_STRING","array_key_exists",102],"(",["T_CONSTANT_ENCAPSED_STRING","'allowTags'",102],",",["T_WHITESPACE"," ",102],["T_VARIABLE","$options",102],")",")",["T_WHITESPACE"," ",102],"{",["T_WHITESPACE","\n            ",102],["T_VARIABLE","$this",103],["T_OBJECT_OPERATOR","->",103],["T_STRING","setTagsAllowed",103],"(",["T_VARIABLE","$options",103],"[",["T_CONSTANT_ENCAPSED_STRING","'allowTags'",103],"]",")",";",["T_WHITESPACE","\n        ",103],"}",["T_WHITESPACE","\n\n        ",104],["T_IF","if",106],["T_WHITESPACE"," ",106],"(",["T_STRING","array_key_exists",106],"(",["T_CONSTANT_ENCAPSED_STRING","'allowAttribs'",106],",",["T_WHITESPACE"," ",106],["T_VARIABLE","$options",106],")",")",["T_WHITESPACE"," ",106],"{",["T_WHITESPACE","\n            ",106],["T_VARIABLE","$this",107],["T_OBJECT_OPERATOR","->",107],["T_STRING","setAttributesAllowed",107],"(",["T_VARIABLE","$options",107],"[",["T_CONSTANT_ENCAPSED_STRING","'allowAttribs'",107],"]",")",";",["T_WHITESPACE","\n        ",107],"}",["T_WHITESPACE","\n\n        ",108],["T_IF","if",110],["T_WHITESPACE"," ",110],"(",["T_STRING","array_key_exists",110],"(",["T_CONSTANT_ENCAPSED_STRING","'allowComments'",110],",",["T_WHITESPACE"," ",110],["T_VARIABLE","$options",110],")",")",["T_WHITESPACE"," ",110],"{",["T_WHITESPACE","\n            ",110],["T_VARIABLE","$this",111],["T_OBJECT_OPERATOR","->",111],["T_STRING","setCommentsAllowed",111],"(",["T_VARIABLE","$options",111],"[",["T_CONSTANT_ENCAPSED_STRING","'allowComments'",111],"]",")",";",["T_WHITESPACE","\n        ",111],"}",["T_WHITESPACE","\n    ",112],"}",["T_WHITESPACE","\n\n    ",113],["T_DOC_COMMENT","\/**\n     * Returns the commentsAllowed option\n     *\n     * This setting is now deprecated and ignored internally.\n     *\n     * @deprecated\n     * @return bool\n     *\/",115],["T_WHITESPACE","\n    ",122],["T_PUBLIC","public",123],["T_WHITESPACE"," ",123],["T_FUNCTION","function",123],["T_WHITESPACE"," ",123],["T_STRING","getCommentsAllowed",123],"(",")",["T_WHITESPACE","\n    ",123],"{",["T_WHITESPACE","\n        ",124],["T_RETURN","return",125],["T_WHITESPACE"," ",125],["T_VARIABLE","$this",125],["T_OBJECT_OPERATOR","->",125],["T_STRING","commentsAllowed",125],";",["T_WHITESPACE","\n    ",125],"}",["T_WHITESPACE","\n\n    ",126],["T_DOC_COMMENT","\/**\n     * Sets the commentsAllowed option\n     *\n     * This setting is now deprecated and ignored internally.\n     *\n     * @deprecated\n     * @param  boolean $commentsAllowed\n     * @return Zend_Filter_StripTags Provides a fluent interface\n     *\/",128],["T_WHITESPACE","\n    ",136],["T_PUBLIC","public",137],["T_WHITESPACE"," ",137],["T_FUNCTION","function",137],["T_WHITESPACE"," ",137],["T_STRING","setCommentsAllowed",137],"(",["T_VARIABLE","$commentsAllowed",137],")",["T_WHITESPACE","\n    ",137],"{",["T_WHITESPACE","\n       ",138],["T_VARIABLE","$this",139],["T_OBJECT_OPERATOR","->",139],["T_STRING","commentsAllowed",139],["T_WHITESPACE"," ",139],"=",["T_WHITESPACE"," ",139],["T_BOOL_CAST","(boolean)",139],["T_WHITESPACE"," ",139],["T_VARIABLE","$commentsAllowed",139],";",["T_WHITESPACE","\n       ",139],["T_RETURN","return",140],["T_WHITESPACE"," ",140],["T_VARIABLE","$this",140],";",["T_WHITESPACE","\n    ",140],"}",["T_WHITESPACE","\n\n    ",141],["T_DOC_COMMENT","\/**\n     * Returns the tagsAllowed option\n     *\n     * @return array\n     *\/",143],["T_WHITESPACE","\n    ",147],["T_PUBLIC","public",148],["T_WHITESPACE"," ",148],["T_FUNCTION","function",148],["T_WHITESPACE"," ",148],["T_STRING","getTagsAllowed",148],"(",")",["T_WHITESPACE","\n    ",148],"{",["T_WHITESPACE","\n        ",149],["T_RETURN","return",150],["T_WHITESPACE"," ",150],["T_VARIABLE","$this",150],["T_OBJECT_OPERATOR","->",150],["T_STRING","_tagsAllowed",150],";",["T_WHITESPACE","\n    ",150],"}",["T_WHITESPACE","\n\n    ",151],["T_DOC_COMMENT","\/**\n     * Sets the tagsAllowed option\n     *\n     * @param  array|string $tagsAllowed\n     * @return Zend_Filter_StripTags Provides a fluent interface\n     *\/",153],["T_WHITESPACE","\n    ",158],["T_PUBLIC","public",159],["T_WHITESPACE"," ",159],["T_FUNCTION","function",159],["T_WHITESPACE"," ",159],["T_STRING","setTagsAllowed",159],"(",["T_VARIABLE","$tagsAllowed",159],")",["T_WHITESPACE","\n    ",159],"{",["T_WHITESPACE","\n        ",160],["T_IF","if",161],["T_WHITESPACE"," ",161],"(","!",["T_STRING","is_array",161],"(",["T_VARIABLE","$tagsAllowed",161],")",")",["T_WHITESPACE"," ",161],"{",["T_WHITESPACE","\n            ",161],["T_VARIABLE","$tagsAllowed",162],["T_WHITESPACE"," ",162],"=",["T_WHITESPACE"," ",162],["T_ARRAY","array",162],"(",["T_VARIABLE","$tagsAllowed",162],")",";",["T_WHITESPACE","\n        ",162],"}",["T_WHITESPACE","\n\n        ",163],["T_FOREACH","foreach",165],["T_WHITESPACE"," ",165],"(",["T_VARIABLE","$tagsAllowed",165],["T_WHITESPACE"," ",165],["T_AS","as",165],["T_WHITESPACE"," ",165],["T_VARIABLE","$index",165],["T_WHITESPACE"," ",165],["T_DOUBLE_ARROW","=>",165],["T_WHITESPACE"," ",165],["T_VARIABLE","$element",165],")",["T_WHITESPACE"," ",165],"{",["T_WHITESPACE","\n            ",165],["T_COMMENT","\/\/ If the tag was provided without attributes\n",166],["T_WHITESPACE","            ",167],["T_IF","if",167],["T_WHITESPACE"," ",167],"(",["T_STRING","is_int",167],"(",["T_VARIABLE","$index",167],")",["T_WHITESPACE"," ",167],["T_BOOLEAN_AND","&&",167],["T_WHITESPACE"," ",167],["T_STRING","is_string",167],"(",["T_VARIABLE","$element",167],")",")",["T_WHITESPACE"," ",167],"{",["T_WHITESPACE","\n                ",167],["T_COMMENT","\/\/ Canonicalize the tag name\n",168],["T_WHITESPACE","                ",169],["T_VARIABLE","$tagName",169],["T_WHITESPACE"," ",169],"=",["T_WHITESPACE"," ",169],["T_STRING","strtolower",169],"(",["T_VARIABLE","$element",169],")",";",["T_WHITESPACE","\n                ",169],["T_COMMENT","\/\/ Store the tag as allowed with no attributes\n",170],["T_WHITESPACE","                ",171],["T_VARIABLE","$this",171],["T_OBJECT_OPERATOR","->",171],["T_STRING","_tagsAllowed",171],"[",["T_VARIABLE","$tagName",171],"]",["T_WHITESPACE"," ",171],"=",["T_WHITESPACE"," ",171],["T_ARRAY","array",171],"(",")",";",["T_WHITESPACE","\n            ",171],"}",["T_WHITESPACE","\n            ",172],["T_COMMENT","\/\/ Otherwise, if a tag was provided with attributes\n",173],["T_WHITESPACE","            ",174],["T_ELSE","else",174],["T_WHITESPACE"," ",174],["T_IF","if",174],["T_WHITESPACE"," ",174],"(",["T_STRING","is_string",174],"(",["T_VARIABLE","$index",174],")",["T_WHITESPACE"," ",174],["T_BOOLEAN_AND","&&",174],["T_WHITESPACE"," ",174],"(",["T_STRING","is_array",174],"(",["T_VARIABLE","$element",174],")",["T_WHITESPACE"," ",174],["T_BOOLEAN_OR","||",174],["T_WHITESPACE"," ",174],["T_STRING","is_string",174],"(",["T_VARIABLE","$element",174],")",")",")",["T_WHITESPACE"," ",174],"{",["T_WHITESPACE","\n                ",174],["T_COMMENT","\/\/ Canonicalize the tag name\n",175],["T_WHITESPACE","                ",176],["T_VARIABLE","$tagName",176],["T_WHITESPACE"," ",176],"=",["T_WHITESPACE"," ",176],["T_STRING","strtolower",176],"(",["T_VARIABLE","$index",176],")",";",["T_WHITESPACE","\n                ",176],["T_COMMENT","\/\/ Canonicalize the attributes\n",177],["T_WHITESPACE","                ",178],["T_IF","if",178],["T_WHITESPACE"," ",178],"(",["T_STRING","is_string",178],"(",["T_VARIABLE","$element",178],")",")",["T_WHITESPACE"," ",178],"{",["T_WHITESPACE","\n                    ",178],["T_VARIABLE","$element",179],["T_WHITESPACE"," ",179],"=",["T_WHITESPACE"," ",179],["T_ARRAY","array",179],"(",["T_VARIABLE","$element",179],")",";",["T_WHITESPACE","\n                ",179],"}",["T_WHITESPACE","\n                ",180],["T_COMMENT","\/\/ Store the tag as allowed with the provided attributes\n",181],["T_WHITESPACE","                ",182],["T_VARIABLE","$this",182],["T_OBJECT_OPERATOR","->",182],["T_STRING","_tagsAllowed",182],"[",["T_VARIABLE","$tagName",182],"]",["T_WHITESPACE"," ",182],"=",["T_WHITESPACE"," ",182],["T_ARRAY","array",182],"(",")",";",["T_WHITESPACE","\n                ",182],["T_FOREACH","foreach",183],["T_WHITESPACE"," ",183],"(",["T_VARIABLE","$element",183],["T_WHITESPACE"," ",183],["T_AS","as",183],["T_WHITESPACE"," ",183],["T_VARIABLE","$attribute",183],")",["T_WHITESPACE"," ",183],"{",["T_WHITESPACE","\n                    ",183],["T_IF","if",184],["T_WHITESPACE"," ",184],"(",["T_STRING","is_string",184],"(",["T_VARIABLE","$attribute",184],")",")",["T_WHITESPACE"," ",184],"{",["T_WHITESPACE","\n                        ",184],["T_COMMENT","\/\/ Canonicalize the attribute name\n",185],["T_WHITESPACE","                        ",186],["T_VARIABLE","$attributeName",186],["T_WHITESPACE"," ",186],"=",["T_WHITESPACE"," ",186],["T_STRING","strtolower",186],"(",["T_VARIABLE","$attribute",186],")",";",["T_WHITESPACE","\n                        ",186],["T_VARIABLE","$this",187],["T_OBJECT_OPERATOR","->",187],["T_STRING","_tagsAllowed",187],"[",["T_VARIABLE","$tagName",187],"]","[",["T_VARIABLE","$attributeName",187],"]",["T_WHITESPACE"," ",187],"=",["T_WHITESPACE"," ",187],["T_STRING","null",187],";",["T_WHITESPACE","\n                    ",187],"}",["T_WHITESPACE","\n                ",188],"}",["T_WHITESPACE","\n            ",189],"}",["T_WHITESPACE","\n        ",190],"}",["T_WHITESPACE","\n\n        ",191],["T_RETURN","return",193],["T_WHITESPACE"," ",193],["T_VARIABLE","$this",193],";",["T_WHITESPACE","\n    ",193],"}",["T_WHITESPACE","\n\n    ",194],["T_DOC_COMMENT","\/**\n     * Returns the attributesAllowed option\n     *\n     * @return array\n     *\/",196],["T_WHITESPACE","\n    ",200],["T_PUBLIC","public",201],["T_WHITESPACE"," ",201],["T_FUNCTION","function",201],["T_WHITESPACE"," ",201],["T_STRING","getAttributesAllowed",201],"(",")",["T_WHITESPACE","\n    ",201],"{",["T_WHITESPACE","\n        ",202],["T_RETURN","return",203],["T_WHITESPACE"," ",203],["T_VARIABLE","$this",203],["T_OBJECT_OPERATOR","->",203],["T_STRING","_attributesAllowed",203],";",["T_WHITESPACE","\n    ",203],"}",["T_WHITESPACE","\n\n    ",204],["T_DOC_COMMENT","\/**\n     * Sets the attributesAllowed option\n     *\n     * @param  array|string $attributesAllowed\n     * @return Zend_Filter_StripTags Provides a fluent interface\n     *\/",206],["T_WHITESPACE","\n    ",211],["T_PUBLIC","public",212],["T_WHITESPACE"," ",212],["T_FUNCTION","function",212],["T_WHITESPACE"," ",212],["T_STRING","setAttributesAllowed",212],"(",["T_VARIABLE","$attributesAllowed",212],")",["T_WHITESPACE","\n    ",212],"{",["T_WHITESPACE","\n        ",213],["T_IF","if",214],["T_WHITESPACE"," ",214],"(","!",["T_STRING","is_array",214],"(",["T_VARIABLE","$attributesAllowed",214],")",")",["T_WHITESPACE"," ",214],"{",["T_WHITESPACE","\n            ",214],["T_VARIABLE","$attributesAllowed",215],["T_WHITESPACE"," ",215],"=",["T_WHITESPACE"," ",215],["T_ARRAY","array",215],"(",["T_VARIABLE","$attributesAllowed",215],")",";",["T_WHITESPACE","\n        ",215],"}",["T_WHITESPACE","\n\n        ",216],["T_COMMENT","\/\/ Store each attribute as allowed\n",218],["T_WHITESPACE","        ",219],["T_FOREACH","foreach",219],["T_WHITESPACE"," ",219],"(",["T_VARIABLE","$attributesAllowed",219],["T_WHITESPACE"," ",219],["T_AS","as",219],["T_WHITESPACE"," ",219],["T_VARIABLE","$attribute",219],")",["T_WHITESPACE"," ",219],"{",["T_WHITESPACE","\n            ",219],["T_IF","if",220],["T_WHITESPACE"," ",220],"(",["T_STRING","is_string",220],"(",["T_VARIABLE","$attribute",220],")",")",["T_WHITESPACE"," ",220],"{",["T_WHITESPACE","\n                ",220],["T_COMMENT","\/\/ Canonicalize the attribute name\n",221],["T_WHITESPACE","                ",222],["T_VARIABLE","$attributeName",222],["T_WHITESPACE"," ",222],"=",["T_WHITESPACE"," ",222],["T_STRING","strtolower",222],"(",["T_VARIABLE","$attribute",222],")",";",["T_WHITESPACE","\n                ",222],["T_VARIABLE","$this",223],["T_OBJECT_OPERATOR","->",223],["T_STRING","_attributesAllowed",223],"[",["T_VARIABLE","$attributeName",223],"]",["T_WHITESPACE"," ",223],"=",["T_WHITESPACE"," ",223],["T_STRING","null",223],";",["T_WHITESPACE","\n            ",223],"}",["T_WHITESPACE","\n        ",224],"}",["T_WHITESPACE","\n\n        ",225],["T_RETURN","return",227],["T_WHITESPACE"," ",227],["T_VARIABLE","$this",227],";",["T_WHITESPACE","\n    ",227],"}",["T_WHITESPACE","\n\n    ",228],["T_DOC_COMMENT","\/**\n     * Defined by Zend_Filter_Interface\n     *\n     * @todo improve docblock descriptions\n     *\n     * @param  string $value\n     * @return string\n     *\/",230],["T_WHITESPACE","\n    ",237],["T_PUBLIC","public",238],["T_WHITESPACE"," ",238],["T_FUNCTION","function",238],["T_WHITESPACE"," ",238],["T_STRING","filter",238],"(",["T_VARIABLE","$value",238],")",["T_WHITESPACE","\n    ",238],"{",["T_WHITESPACE","\n        ",239],["T_VARIABLE","$value",240],["T_WHITESPACE"," ",240],"=",["T_WHITESPACE"," ",240],["T_STRING_CAST","(string)",240],["T_WHITESPACE"," ",240],["T_VARIABLE","$value",240],";",["T_WHITESPACE","\n\n        ",240],["T_COMMENT","\/\/ Strip HTML comments first\n",242],["T_WHITESPACE","        ",243],["T_WHILE","while",243],["T_WHITESPACE"," ",243],"(",["T_STRING","strpos",243],"(",["T_VARIABLE","$value",243],",",["T_WHITESPACE"," ",243],["T_CONSTANT_ENCAPSED_STRING","'<!--'",243],")",["T_WHITESPACE"," ",243],["T_IS_NOT_IDENTICAL","!==",243],["T_WHITESPACE"," ",243],["T_STRING","false",243],")",["T_WHITESPACE"," ",243],"{",["T_WHITESPACE","\n            ",243],["T_VARIABLE","$pos",244],["T_WHITESPACE","   ",244],"=",["T_WHITESPACE"," ",244],["T_STRING","strrpos",244],"(",["T_VARIABLE","$value",244],",",["T_WHITESPACE"," ",244],["T_CONSTANT_ENCAPSED_STRING","'<!--'",244],")",";",["T_WHITESPACE","\n            ",244],["T_VARIABLE","$start",245],["T_WHITESPACE"," ",245],"=",["T_WHITESPACE"," ",245],["T_STRING","substr",245],"(",["T_VARIABLE","$value",245],",",["T_WHITESPACE"," ",245],["T_LNUMBER","0",245],",",["T_WHITESPACE"," ",245],["T_VARIABLE","$pos",245],")",";",["T_WHITESPACE","\n            ",245],["T_VARIABLE","$value",246],["T_WHITESPACE"," ",246],"=",["T_WHITESPACE"," ",246],["T_STRING","substr",246],"(",["T_VARIABLE","$value",246],",",["T_WHITESPACE"," ",246],["T_VARIABLE","$pos",246],")",";",["T_WHITESPACE","\n\n            ",246],["T_COMMENT","\/\/ If there is no comment closing tag, strip whole text\n",248],["T_WHITESPACE","            ",249],["T_IF","if",249],["T_WHITESPACE"," ",249],"(","!",["T_STRING","preg_match",249],"(",["T_CONSTANT_ENCAPSED_STRING","'\/--\\s*>\/s'",249],",",["T_WHITESPACE"," ",249],["T_VARIABLE","$value",249],")",")",["T_WHITESPACE"," ",249],"{",["T_WHITESPACE","\n                ",249],["T_VARIABLE","$value",250],["T_WHITESPACE"," ",250],"=",["T_WHITESPACE"," ",250],["T_CONSTANT_ENCAPSED_STRING","''",250],";",["T_WHITESPACE","\n            ",250],"}",["T_WHITESPACE"," ",251],["T_ELSE","else",251],["T_WHITESPACE"," ",251],"{",["T_WHITESPACE","\n                ",251],["T_VARIABLE","$value",252],["T_WHITESPACE"," ",252],"=",["T_WHITESPACE"," ",252],["T_STRING","preg_replace",252],"(",["T_CONSTANT_ENCAPSED_STRING","'\/<(?:!(?:--[\\s\\S]*?--\\s*)?(>))\/s'",252],",",["T_WHITESPACE"," ",252],["T_CONSTANT_ENCAPSED_STRING","''",252],",",["T_WHITESPACE","  ",252],["T_VARIABLE","$value",252],")",";",["T_WHITESPACE","\n            ",252],"}",["T_WHITESPACE","\n\n            ",253],["T_VARIABLE","$value",255],["T_WHITESPACE"," ",255],"=",["T_WHITESPACE"," ",255],["T_VARIABLE","$start",255],["T_WHITESPACE"," ",255],".",["T_WHITESPACE"," ",255],["T_VARIABLE","$value",255],";",["T_WHITESPACE","\n        ",255],"}",["T_WHITESPACE","\n\n        ",256],["T_COMMENT","\/\/ Initialize accumulator for filtered data\n",258],["T_WHITESPACE","        ",259],["T_VARIABLE","$dataFiltered",259],["T_WHITESPACE"," ",259],"=",["T_WHITESPACE"," ",259],["T_CONSTANT_ENCAPSED_STRING","''",259],";",["T_WHITESPACE","\n        ",259],["T_COMMENT","\/\/ Parse the input data iteratively as regular pre-tag text followed by a\n",260],["T_WHITESPACE","        ",261],["T_COMMENT","\/\/ tag; either may be empty strings\n",261],["T_WHITESPACE","        ",262],["T_STRING","preg_match_all",262],"(",["T_CONSTANT_ENCAPSED_STRING","'\/([^<]*)(<?[^>]*>?)\/'",262],",",["T_WHITESPACE"," ",262],["T_STRING_CAST","(string)",262],["T_WHITESPACE"," ",262],["T_VARIABLE","$value",262],",",["T_WHITESPACE"," ",262],["T_VARIABLE","$matches",262],")",";",["T_WHITESPACE","\n\n        ",262],["T_COMMENT","\/\/ Iterate over each set of matches\n",264],["T_WHITESPACE","        ",265],["T_FOREACH","foreach",265],["T_WHITESPACE"," ",265],"(",["T_VARIABLE","$matches",265],"[",["T_LNUMBER","1",265],"]",["T_WHITESPACE"," ",265],["T_AS","as",265],["T_WHITESPACE"," ",265],["T_VARIABLE","$index",265],["T_WHITESPACE"," ",265],["T_DOUBLE_ARROW","=>",265],["T_WHITESPACE"," ",265],["T_VARIABLE","$preTag",265],")",["T_WHITESPACE"," ",265],"{",["T_WHITESPACE","\n            ",265],["T_COMMENT","\/\/ If the pre-tag text is non-empty, strip any \">\" characters from it\n",266],["T_WHITESPACE","            ",267],["T_IF","if",267],["T_WHITESPACE"," ",267],"(",["T_STRING","strlen",267],"(",["T_VARIABLE","$preTag",267],")",")",["T_WHITESPACE"," ",267],"{",["T_WHITESPACE","\n                ",267],["T_VARIABLE","$preTag",268],["T_WHITESPACE"," ",268],"=",["T_WHITESPACE"," ",268],["T_STRING","str_replace",268],"(",["T_CONSTANT_ENCAPSED_STRING","'>'",268],",",["T_WHITESPACE"," ",268],["T_CONSTANT_ENCAPSED_STRING","''",268],",",["T_WHITESPACE"," ",268],["T_VARIABLE","$preTag",268],")",";",["T_WHITESPACE","\n            ",268],"}",["T_WHITESPACE","\n            ",269],["T_COMMENT","\/\/ If a tag exists in this match, then filter the tag\n",270],["T_WHITESPACE","            ",271],["T_VARIABLE","$tag",271],["T_WHITESPACE"," ",271],"=",["T_WHITESPACE"," ",271],["T_VARIABLE","$matches",271],"[",["T_LNUMBER","2",271],"]","[",["T_VARIABLE","$index",271],"]",";",["T_WHITESPACE","\n            ",271],["T_IF","if",272],["T_WHITESPACE"," ",272],"(",["T_STRING","strlen",272],"(",["T_VARIABLE","$tag",272],")",")",["T_WHITESPACE"," ",272],"{",["T_WHITESPACE","\n                ",272],["T_VARIABLE","$tagFiltered",273],["T_WHITESPACE"," ",273],"=",["T_WHITESPACE"," ",273],["T_VARIABLE","$this",273],["T_OBJECT_OPERATOR","->",273],["T_STRING","_filterTag",273],"(",["T_VARIABLE","$tag",273],")",";",["T_WHITESPACE","\n            ",273],"}",["T_WHITESPACE"," ",274],["T_ELSE","else",274],["T_WHITESPACE"," ",274],"{",["T_WHITESPACE","\n                ",274],["T_VARIABLE","$tagFiltered",275],["T_WHITESPACE"," ",275],"=",["T_WHITESPACE"," ",275],["T_CONSTANT_ENCAPSED_STRING","''",275],";",["T_WHITESPACE","\n            ",275],"}",["T_WHITESPACE","\n            ",276],["T_COMMENT","\/\/ Add the filtered pre-tag text and filtered tag to the data buffer\n",277],["T_WHITESPACE","            ",278],["T_VARIABLE","$dataFiltered",278],["T_WHITESPACE"," ",278],["T_CONCAT_EQUAL",".=",278],["T_WHITESPACE"," ",278],["T_VARIABLE","$preTag",278],["T_WHITESPACE"," ",278],".",["T_WHITESPACE"," ",278],["T_VARIABLE","$tagFiltered",278],";",["T_WHITESPACE","\n        ",278],"}",["T_WHITESPACE","\n\n        ",279],["T_COMMENT","\/\/ Return the filtered data\n",281],["T_WHITESPACE","        ",282],["T_RETURN","return",282],["T_WHITESPACE"," ",282],["T_VARIABLE","$dataFiltered",282],";",["T_WHITESPACE","\n    ",282],"}",["T_WHITESPACE","\n\n    ",283],["T_DOC_COMMENT","\/**\n     * Filters a single tag against the current option settings\n     *\n     * @param  string $tag\n     * @return string\n     *\/",285],["T_WHITESPACE","\n    ",290],["T_PROTECTED","protected",291],["T_WHITESPACE"," ",291],["T_FUNCTION","function",291],["T_WHITESPACE"," ",291],["T_STRING","_filterTag",291],"(",["T_VARIABLE","$tag",291],")",["T_WHITESPACE","\n    ",291],"{",["T_WHITESPACE","\n        ",292],["T_COMMENT","\/\/ Parse the tag into:\n",293],["T_WHITESPACE","        ",294],["T_COMMENT","\/\/ 1. a starting delimiter (mandatory)\n",294],["T_WHITESPACE","        ",295],["T_COMMENT","\/\/ 2. a tag name (if available)\n",295],["T_WHITESPACE","        ",296],["T_COMMENT","\/\/ 3. a string of attributes (if available)\n",296],["T_WHITESPACE","        ",297],["T_COMMENT","\/\/ 4. an ending delimiter (if available)\n",297],["T_WHITESPACE","        ",298],["T_VARIABLE","$isMatch",298],["T_WHITESPACE"," ",298],"=",["T_WHITESPACE"," ",298],["T_STRING","preg_match",298],"(",["T_CONSTANT_ENCAPSED_STRING","'~(<\/?)(\\w*)((\/(?!>)|[^\/>])*)(\/?>)~'",298],",",["T_WHITESPACE"," ",298],["T_VARIABLE","$tag",298],",",["T_WHITESPACE"," ",298],["T_VARIABLE","$matches",298],")",";",["T_WHITESPACE","\n\n        ",298],["T_COMMENT","\/\/ If the tag does not match, then strip the tag entirely\n",300],["T_WHITESPACE","        ",301],["T_IF","if",301],["T_WHITESPACE"," ",301],"(","!",["T_VARIABLE","$isMatch",301],")",["T_WHITESPACE"," ",301],"{",["T_WHITESPACE","\n            ",301],["T_RETURN","return",302],["T_WHITESPACE"," ",302],["T_CONSTANT_ENCAPSED_STRING","''",302],";",["T_WHITESPACE","\n        ",302],"}",["T_WHITESPACE","\n\n        ",303],["T_COMMENT","\/\/ Save the matches to more meaningfully named variables\n",305],["T_WHITESPACE","        ",306],["T_VARIABLE","$tagStart",306],["T_WHITESPACE","      ",306],"=",["T_WHITESPACE"," ",306],["T_VARIABLE","$matches",306],"[",["T_LNUMBER","1",306],"]",";",["T_WHITESPACE","\n        ",306],["T_VARIABLE","$tagName",307],["T_WHITESPACE","       ",307],"=",["T_WHITESPACE"," ",307],["T_STRING","strtolower",307],"(",["T_VARIABLE","$matches",307],"[",["T_LNUMBER","2",307],"]",")",";",["T_WHITESPACE","\n        ",307],["T_VARIABLE","$tagAttributes",308],["T_WHITESPACE"," ",308],"=",["T_WHITESPACE"," ",308],["T_VARIABLE","$matches",308],"[",["T_LNUMBER","3",308],"]",";",["T_WHITESPACE","\n        ",308],["T_VARIABLE","$tagEnd",309],["T_WHITESPACE","        ",309],"=",["T_WHITESPACE"," ",309],["T_VARIABLE","$matches",309],"[",["T_LNUMBER","5",309],"]",";",["T_WHITESPACE","\n\n        ",309],["T_COMMENT","\/\/ If the tag is not an allowed tag, then remove the tag entirely\n",311],["T_WHITESPACE","        ",312],["T_IF","if",312],["T_WHITESPACE"," ",312],"(","!",["T_ISSET","isset",312],"(",["T_VARIABLE","$this",312],["T_OBJECT_OPERATOR","->",312],["T_STRING","_tagsAllowed",312],"[",["T_VARIABLE","$tagName",312],"]",")",")",["T_WHITESPACE"," ",312],"{",["T_WHITESPACE","\n            ",312],["T_RETURN","return",313],["T_WHITESPACE"," ",313],["T_CONSTANT_ENCAPSED_STRING","''",313],";",["T_WHITESPACE","\n        ",313],"}",["T_WHITESPACE","\n\n        ",314],["T_COMMENT","\/\/ Trim the attribute string of whitespace at the ends\n",316],["T_WHITESPACE","        ",317],["T_VARIABLE","$tagAttributes",317],["T_WHITESPACE"," ",317],"=",["T_WHITESPACE"," ",317],["T_STRING","trim",317],"(",["T_VARIABLE","$tagAttributes",317],")",";",["T_WHITESPACE","\n\n        ",317],["T_COMMENT","\/\/ If there are non-whitespace characters in the attribute string\n",319],["T_WHITESPACE","        ",320],["T_IF","if",320],["T_WHITESPACE"," ",320],"(",["T_STRING","strlen",320],"(",["T_VARIABLE","$tagAttributes",320],")",")",["T_WHITESPACE"," ",320],"{",["T_WHITESPACE","\n            ",320],["T_COMMENT","\/\/ Parse iteratively for well-formed attributes\n",321],["T_WHITESPACE","            ",322],["T_STRING","preg_match_all",322],"(",["T_CONSTANT_ENCAPSED_STRING","'\/([\\w-]+)\\s*=\\s*(?:(\")(.*?)\"|(\\')(.*?)\\')\/s'",322],",",["T_WHITESPACE"," ",322],["T_VARIABLE","$tagAttributes",322],",",["T_WHITESPACE"," ",322],["T_VARIABLE","$matches",322],")",";",["T_WHITESPACE","\n\n            ",322],["T_COMMENT","\/\/ Initialize valid attribute accumulator\n",324],["T_WHITESPACE","            ",325],["T_VARIABLE","$tagAttributes",325],["T_WHITESPACE"," ",325],"=",["T_WHITESPACE"," ",325],["T_CONSTANT_ENCAPSED_STRING","''",325],";",["T_WHITESPACE","\n\n            ",325],["T_COMMENT","\/\/ Iterate over each matched attribute\n",327],["T_WHITESPACE","            ",328],["T_FOREACH","foreach",328],["T_WHITESPACE"," ",328],"(",["T_VARIABLE","$matches",328],"[",["T_LNUMBER","1",328],"]",["T_WHITESPACE"," ",328],["T_AS","as",328],["T_WHITESPACE"," ",328],["T_VARIABLE","$index",328],["T_WHITESPACE"," ",328],["T_DOUBLE_ARROW","=>",328],["T_WHITESPACE"," ",328],["T_VARIABLE","$attributeName",328],")",["T_WHITESPACE"," ",328],"{",["T_WHITESPACE","\n                ",328],["T_VARIABLE","$attributeName",329],["T_WHITESPACE","      ",329],"=",["T_WHITESPACE"," ",329],["T_STRING","strtolower",329],"(",["T_VARIABLE","$attributeName",329],")",";",["T_WHITESPACE","\n                ",329],["T_VARIABLE","$attributeDelimiter",330],["T_WHITESPACE"," ",330],"=",["T_WHITESPACE"," ",330],["T_EMPTY","empty",330],"(",["T_VARIABLE","$matches",330],"[",["T_LNUMBER","2",330],"]","[",["T_VARIABLE","$index",330],"]",")",["T_WHITESPACE"," ",330],"?",["T_WHITESPACE"," ",330],["T_VARIABLE","$matches",330],"[",["T_LNUMBER","4",330],"]","[",["T_VARIABLE","$index",330],"]",["T_WHITESPACE"," ",330],":",["T_WHITESPACE"," ",330],["T_VARIABLE","$matches",330],"[",["T_LNUMBER","2",330],"]","[",["T_VARIABLE","$index",330],"]",";",["T_WHITESPACE","\n                ",330],["T_VARIABLE","$attributeValue",331],["T_WHITESPACE","     ",331],"=",["T_WHITESPACE"," ",331],["T_EMPTY","empty",331],"(",["T_VARIABLE","$matches",331],"[",["T_LNUMBER","3",331],"]","[",["T_VARIABLE","$index",331],"]",")",["T_WHITESPACE"," ",331],"?",["T_WHITESPACE"," ",331],["T_VARIABLE","$matches",331],"[",["T_LNUMBER","5",331],"]","[",["T_VARIABLE","$index",331],"]",["T_WHITESPACE"," ",331],":",["T_WHITESPACE"," ",331],["T_VARIABLE","$matches",331],"[",["T_LNUMBER","3",331],"]","[",["T_VARIABLE","$index",331],"]",";",["T_WHITESPACE","\n\n                ",331],["T_COMMENT","\/\/ If the attribute is not allowed, then remove it entirely\n",333],["T_WHITESPACE","                ",334],["T_IF","if",334],["T_WHITESPACE"," ",334],"(","!",["T_STRING","array_key_exists",334],"(",["T_VARIABLE","$attributeName",334],",",["T_WHITESPACE"," ",334],["T_VARIABLE","$this",334],["T_OBJECT_OPERATOR","->",334],["T_STRING","_tagsAllowed",334],"[",["T_VARIABLE","$tagName",334],"]",")",["T_WHITESPACE","\n                    ",334],["T_BOOLEAN_AND","&&",335],["T_WHITESPACE"," ",335],"!",["T_STRING","array_key_exists",335],"(",["T_VARIABLE","$attributeName",335],",",["T_WHITESPACE"," ",335],["T_VARIABLE","$this",335],["T_OBJECT_OPERATOR","->",335],["T_STRING","_attributesAllowed",335],")",")",["T_WHITESPACE"," ",335],"{",["T_WHITESPACE","\n                    ",335],["T_CONTINUE","continue",336],";",["T_WHITESPACE","\n                ",336],"}",["T_WHITESPACE","\n                ",337],["T_COMMENT","\/\/ Add the attribute to the accumulator\n",338],["T_WHITESPACE","                ",339],["T_VARIABLE","$tagAttributes",339],["T_WHITESPACE"," ",339],["T_CONCAT_EQUAL",".=",339],["T_WHITESPACE"," ",339],"\"",["T_ENCAPSED_AND_WHITESPACE"," ",339],["T_VARIABLE","$attributeName",339],["T_ENCAPSED_AND_WHITESPACE","=",339],"\"",["T_WHITESPACE"," ",339],".",["T_WHITESPACE"," ",339],["T_VARIABLE","$attributeDelimiter",339],["T_WHITESPACE","\n                                ",339],".",["T_WHITESPACE"," ",340],["T_VARIABLE","$attributeValue",340],["T_WHITESPACE"," ",340],".",["T_WHITESPACE"," ",340],["T_VARIABLE","$attributeDelimiter",340],";",["T_WHITESPACE","\n            ",340],"}",["T_WHITESPACE","\n        ",341],"}",["T_WHITESPACE","\n\n        ",342],["T_COMMENT","\/\/ Reconstruct tags ending with \"\/>\" as backwards-compatible XHTML tag\n",344],["T_WHITESPACE","        ",345],["T_IF","if",345],["T_WHITESPACE"," ",345],"(",["T_STRING","strpos",345],"(",["T_VARIABLE","$tagEnd",345],",",["T_WHITESPACE"," ",345],["T_CONSTANT_ENCAPSED_STRING","'\/'",345],")",["T_WHITESPACE"," ",345],["T_IS_NOT_IDENTICAL","!==",345],["T_WHITESPACE"," ",345],["T_STRING","false",345],")",["T_WHITESPACE"," ",345],"{",["T_WHITESPACE","\n            ",345],["T_VARIABLE","$tagEnd",346],["T_WHITESPACE"," ",346],"=",["T_WHITESPACE"," ",346],"\"",["T_ENCAPSED_AND_WHITESPACE"," ",346],["T_VARIABLE","$tagEnd",346],"\"",";",["T_WHITESPACE","\n        ",346],"}",["T_WHITESPACE","\n\n        ",347],["T_COMMENT","\/\/ Return the filtered tag\n",349],["T_WHITESPACE","        ",350],["T_RETURN","return",350],["T_WHITESPACE"," ",350],["T_VARIABLE","$tagStart",350],["T_WHITESPACE"," ",350],".",["T_WHITESPACE"," ",350],["T_VARIABLE","$tagName",350],["T_WHITESPACE"," ",350],".",["T_WHITESPACE"," ",350],["T_VARIABLE","$tagAttributes",350],["T_WHITESPACE"," ",350],".",["T_WHITESPACE"," ",350],["T_VARIABLE","$tagEnd",350],";",["T_WHITESPACE","\n    ",350],"}",["T_WHITESPACE","\n",351],"}",["T_WHITESPACE","\n",352]]
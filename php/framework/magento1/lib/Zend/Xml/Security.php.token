[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Zend Framework\n *\n * LICENSE\n *\n * This source file is subject to the new BSD license that is bundled\n * with this package in the file LICENSE.txt.\n * It is also available through the world-wide-web at this URL:\n * http:\/\/framework.zend.com\/license\/new-bsd\n * If you did not receive a copy of the license and are unable to\n * obtain it through the world-wide-web, please send an email\n * to license@zend.com so we can send you a copy immediately.\n *\n * @category   Zend\n * @package    Zend_Xml\n * @copyright  Copyright (c) 2005-2015 Zend Technologies USA Inc. (http:\/\/www.zend.com)\n * @license    http:\/\/framework.zend.com\/license\/new-bsd     New BSD License\n * @version    $Id$\n *\/",2],["T_WHITESPACE","\n\n \n",20],["T_DOC_COMMENT","\/**\n * @category   Zend\n * @package    Zend_Xml_SecurityScan\n * @copyright  Copyright (c) 2005-2015 Zend Technologies USA Inc. (http:\/\/www.zend.com)\n * @license    http:\/\/framework.zend.com\/license\/new-bsd     New BSD License\n *\/",23],["T_WHITESPACE","\n",28],["T_CLASS","class",29],["T_WHITESPACE"," ",29],["T_STRING","Zend_Xml_Security",29],["T_WHITESPACE","\n",29],"{",["T_WHITESPACE","\n    ",30],["T_CONST","const",31],["T_WHITESPACE"," ",31],["T_STRING","ENTITY_DETECT",31],["T_WHITESPACE"," ",31],"=",["T_WHITESPACE"," ",31],["T_CONSTANT_ENCAPSED_STRING","'Detected use of ENTITY in XML, disabled to prevent XXE\/XEE attacks'",31],";",["T_WHITESPACE","\n\n    ",31],["T_DOC_COMMENT","\/**\n     * Heuristic scan to detect entity in XML\n     *\n     * @param  string $xml\n     * @throws Zend_Xml_Exception If entity expansion or external entity declaration was discovered.\n     *\/",33],["T_WHITESPACE","\n    ",38],["T_PROTECTED","protected",39],["T_WHITESPACE"," ",39],["T_STATIC","static",39],["T_WHITESPACE"," ",39],["T_FUNCTION","function",39],["T_WHITESPACE"," ",39],["T_STRING","heuristicScan",39],"(",["T_VARIABLE","$xml",39],")",["T_WHITESPACE","\n    ",39],"{",["T_WHITESPACE","\n        ",40],["T_FOREACH","foreach",41],["T_WHITESPACE"," ",41],"(",["T_STRING","self",41],["T_DOUBLE_COLON","::",41],["T_STRING","getEntityComparison",41],"(",["T_VARIABLE","$xml",41],")",["T_WHITESPACE"," ",41],["T_AS","as",41],["T_WHITESPACE"," ",41],["T_VARIABLE","$compare",41],")",["T_WHITESPACE"," ",41],"{",["T_WHITESPACE","\n            ",41],["T_IF","if",42],["T_WHITESPACE"," ",42],"(",["T_STRING","strpos",42],"(",["T_VARIABLE","$xml",42],",",["T_WHITESPACE"," ",42],["T_VARIABLE","$compare",42],")",["T_WHITESPACE"," ",42],["T_IS_NOT_IDENTICAL","!==",42],["T_WHITESPACE"," ",42],["T_STRING","false",42],")",["T_WHITESPACE"," ",42],"{",["T_WHITESPACE","\n                ",42],["T_THROW","throw",43],["T_WHITESPACE"," ",43],["T_NEW","new",43],["T_WHITESPACE"," ",43],["T_STRING","Zend_Xml_Exception",43],"(",["T_STRING","self",43],["T_DOUBLE_COLON","::",43],["T_STRING","ENTITY_DETECT",43],")",";",["T_WHITESPACE","\n            ",43],"}",["T_WHITESPACE","\n        ",44],"}",["T_WHITESPACE","\n    ",45],"}",["T_WHITESPACE","\n\n    ",46],["T_DOC_COMMENT","\/**\n     * @param integer $errno\n     * @param string $errstr\n     * @param string $errfile\n     * @param integer $errline\n     * @return bool\n     *\/",48],["T_WHITESPACE","\n    ",54],["T_PUBLIC","public",55],["T_WHITESPACE"," ",55],["T_STATIC","static",55],["T_WHITESPACE"," ",55],["T_FUNCTION","function",55],["T_WHITESPACE"," ",55],["T_STRING","loadXmlErrorHandler",55],"(",["T_VARIABLE","$errno",55],",",["T_WHITESPACE"," ",55],["T_VARIABLE","$errstr",55],",",["T_WHITESPACE"," ",55],["T_VARIABLE","$errfile",55],",",["T_WHITESPACE"," ",55],["T_VARIABLE","$errline",55],")",["T_WHITESPACE","\n    ",55],"{",["T_WHITESPACE","\n        ",56],["T_IF","if",57],["T_WHITESPACE"," ",57],"(",["T_STRING","substr_count",57],"(",["T_VARIABLE","$errstr",57],",",["T_WHITESPACE"," ",57],["T_CONSTANT_ENCAPSED_STRING","'DOMDocument::loadXML()'",57],")",["T_WHITESPACE"," ",57],">",["T_WHITESPACE"," ",57],["T_LNUMBER","0",57],")",["T_WHITESPACE"," ",57],"{",["T_WHITESPACE","\n            ",57],["T_RETURN","return",58],["T_WHITESPACE"," ",58],["T_STRING","true",58],";",["T_WHITESPACE","\n        ",58],"}",["T_WHITESPACE","\n        ",59],["T_RETURN","return",60],["T_WHITESPACE"," ",60],["T_STRING","false",60],";",["T_WHITESPACE","\n    ",60],"}",["T_WHITESPACE","\n\n    ",61],["T_DOC_COMMENT","\/**\n     * Scan XML string for potential XXE and XEE attacks\n     *\n     * @param   string $xml\n     * @param   DomDocument $dom\n     * @throws  Zend_Xml_Exception\n     * @return  SimpleXMLElement|DomDocument|boolean\n     *\/",63],["T_WHITESPACE","\n    ",70],["T_PUBLIC","public",71],["T_WHITESPACE"," ",71],["T_STATIC","static",71],["T_WHITESPACE"," ",71],["T_FUNCTION","function",71],["T_WHITESPACE"," ",71],["T_STRING","scan",71],"(",["T_VARIABLE","$xml",71],",",["T_WHITESPACE"," ",71],["T_STRING","DOMDocument",71],["T_WHITESPACE"," ",71],["T_VARIABLE","$dom",71],["T_WHITESPACE"," ",71],"=",["T_WHITESPACE"," ",71],["T_STRING","null",71],")",["T_WHITESPACE","\n    ",71],"{",["T_WHITESPACE","\n        ",72],["T_COMMENT","\/\/ If running with PHP-FPM we perform an heuristic scan\n",73],["T_WHITESPACE","        ",74],["T_COMMENT","\/\/ We cannot use libxml_disable_entity_loader because of this bug\n",74],["T_WHITESPACE","        ",75],["T_COMMENT","\/\/ @see https:\/\/bugs.php.net\/bug.php?id=64938\n",75],["T_WHITESPACE","        ",76],["T_IF","if",76],["T_WHITESPACE"," ",76],"(",["T_STRING","self",76],["T_DOUBLE_COLON","::",76],["T_STRING","isPhpFpm",76],"(",")",")",["T_WHITESPACE"," ",76],"{",["T_WHITESPACE","\n            ",76],["T_STRING","self",77],["T_DOUBLE_COLON","::",77],["T_STRING","heuristicScan",77],"(",["T_VARIABLE","$xml",77],")",";",["T_WHITESPACE","\n        ",77],"}",["T_WHITESPACE","\n\n        ",78],["T_IF","if",80],["T_WHITESPACE"," ",80],"(",["T_STRING","null",80],["T_WHITESPACE"," ",80],["T_IS_IDENTICAL","===",80],["T_WHITESPACE"," ",80],["T_VARIABLE","$dom",80],")",["T_WHITESPACE"," ",80],"{",["T_WHITESPACE","\n            ",80],["T_VARIABLE","$simpleXml",81],["T_WHITESPACE"," ",81],"=",["T_WHITESPACE"," ",81],["T_STRING","true",81],";",["T_WHITESPACE","\n            ",81],["T_VARIABLE","$dom",82],["T_WHITESPACE"," ",82],"=",["T_WHITESPACE"," ",82],["T_NEW","new",82],["T_WHITESPACE"," ",82],["T_STRING","DOMDocument",82],"(",")",";",["T_WHITESPACE","\n        ",82],"}",["T_WHITESPACE","\n\n        ",83],["T_IF","if",85],["T_WHITESPACE"," ",85],"(","!",["T_STRING","self",85],["T_DOUBLE_COLON","::",85],["T_STRING","isPhpFpm",85],"(",")",")",["T_WHITESPACE"," ",85],"{",["T_WHITESPACE","\n            ",85],["T_VARIABLE","$loadEntities",86],["T_WHITESPACE"," ",86],"=",["T_WHITESPACE"," ",86],["T_STRING","libxml_disable_entity_loader",86],"(",["T_STRING","true",86],")",";",["T_WHITESPACE","\n            ",86],["T_VARIABLE","$useInternalXmlErrors",87],["T_WHITESPACE"," ",87],"=",["T_WHITESPACE"," ",87],["T_STRING","libxml_use_internal_errors",87],"(",["T_STRING","true",87],")",";",["T_WHITESPACE","\n        ",87],"}",["T_WHITESPACE","\n\n        ",88],["T_COMMENT","\/\/ Load XML with network access disabled (LIBXML_NONET)\n",90],["T_WHITESPACE","        ",91],["T_COMMENT","\/\/ error disabled with @ for PHP-FPM scenario\n",91],["T_WHITESPACE","        ",92],["T_STRING","set_error_handler",92],"(",["T_ARRAY","array",92],"(",["T_CONSTANT_ENCAPSED_STRING","'Zend_Xml_Security'",92],",",["T_WHITESPACE"," ",92],["T_CONSTANT_ENCAPSED_STRING","'loadXmlErrorHandler'",92],")",",",["T_WHITESPACE"," ",92],["T_STRING","E_WARNING",92],")",";",["T_WHITESPACE","\n\n        ",92],["T_VARIABLE","$result",94],["T_WHITESPACE"," ",94],"=",["T_WHITESPACE"," ",94],["T_VARIABLE","$dom",94],["T_OBJECT_OPERATOR","->",94],["T_STRING","loadXml",94],"(",["T_VARIABLE","$xml",94],",",["T_WHITESPACE"," ",94],["T_STRING","LIBXML_NONET",94],")",";",["T_WHITESPACE","\n        ",94],["T_STRING","restore_error_handler",95],"(",")",";",["T_WHITESPACE","\n\n        ",95],["T_IF","if",97],["T_WHITESPACE"," ",97],"(","!",["T_VARIABLE","$result",97],")",["T_WHITESPACE"," ",97],"{",["T_WHITESPACE","\n            ",97],["T_COMMENT","\/\/ Entity load to previous setting\n",98],["T_WHITESPACE","            ",99],["T_IF","if",99],["T_WHITESPACE"," ",99],"(","!",["T_STRING","self",99],["T_DOUBLE_COLON","::",99],["T_STRING","isPhpFpm",99],"(",")",")",["T_WHITESPACE"," ",99],"{",["T_WHITESPACE","\n                ",99],["T_STRING","libxml_disable_entity_loader",100],"(",["T_VARIABLE","$loadEntities",100],")",";",["T_WHITESPACE","\n                ",100],["T_STRING","libxml_use_internal_errors",101],"(",["T_VARIABLE","$useInternalXmlErrors",101],")",";",["T_WHITESPACE","\n            ",101],"}",["T_WHITESPACE","\n            ",102],["T_RETURN","return",103],["T_WHITESPACE"," ",103],["T_STRING","false",103],";",["T_WHITESPACE","\n        ",103],"}",["T_WHITESPACE","\n\n        ",104],["T_COMMENT","\/\/ Scan for potential XEE attacks using ENTITY, if not PHP-FPM\n",106],["T_WHITESPACE","        ",107],["T_IF","if",107],["T_WHITESPACE"," ",107],"(","!",["T_STRING","self",107],["T_DOUBLE_COLON","::",107],["T_STRING","isPhpFpm",107],"(",")",")",["T_WHITESPACE"," ",107],"{",["T_WHITESPACE","\n            ",107],["T_FOREACH","foreach",108],["T_WHITESPACE"," ",108],"(",["T_VARIABLE","$dom",108],["T_OBJECT_OPERATOR","->",108],["T_STRING","childNodes",108],["T_WHITESPACE"," ",108],["T_AS","as",108],["T_WHITESPACE"," ",108],["T_VARIABLE","$child",108],")",["T_WHITESPACE"," ",108],"{",["T_WHITESPACE","\n                ",108],["T_IF","if",109],["T_WHITESPACE"," ",109],"(",["T_VARIABLE","$child",109],["T_OBJECT_OPERATOR","->",109],["T_STRING","nodeType",109],["T_WHITESPACE"," ",109],["T_IS_IDENTICAL","===",109],["T_WHITESPACE"," ",109],["T_STRING","XML_DOCUMENT_TYPE_NODE",109],")",["T_WHITESPACE"," ",109],"{",["T_WHITESPACE","\n                    ",109],["T_IF","if",110],["T_WHITESPACE"," ",110],"(",["T_VARIABLE","$child",110],["T_OBJECT_OPERATOR","->",110],["T_STRING","entities",110],["T_OBJECT_OPERATOR","->",110],["T_STRING","length",110],["T_WHITESPACE"," ",110],">",["T_WHITESPACE"," ",110],["T_LNUMBER","0",110],")",["T_WHITESPACE"," ",110],"{",["T_WHITESPACE","\n                        ",110],["T_COMMENT","#require_once 'Exception.php';\n",111],["T_WHITESPACE","                        ",112],["T_THROW","throw",112],["T_WHITESPACE"," ",112],["T_NEW","new",112],["T_WHITESPACE"," ",112],["T_STRING","Zend_Xml_Exception",112],"(",["T_STRING","self",112],["T_DOUBLE_COLON","::",112],["T_STRING","ENTITY_DETECT",112],")",";",["T_WHITESPACE","\n                    ",112],"}",["T_WHITESPACE","\n                ",113],"}",["T_WHITESPACE","\n            ",114],"}",["T_WHITESPACE","\n        ",115],"}",["T_WHITESPACE","\n\n        ",116],["T_COMMENT","\/\/ Entity load to previous setting\n",118],["T_WHITESPACE","        ",119],["T_IF","if",119],["T_WHITESPACE"," ",119],"(","!",["T_STRING","self",119],["T_DOUBLE_COLON","::",119],["T_STRING","isPhpFpm",119],"(",")",")",["T_WHITESPACE"," ",119],"{",["T_WHITESPACE","\n            ",119],["T_STRING","libxml_disable_entity_loader",120],"(",["T_VARIABLE","$loadEntities",120],")",";",["T_WHITESPACE","\n            ",120],["T_STRING","libxml_use_internal_errors",121],"(",["T_VARIABLE","$useInternalXmlErrors",121],")",";",["T_WHITESPACE","\n        ",121],"}",["T_WHITESPACE","\n\n        ",122],["T_IF","if",124],["T_WHITESPACE"," ",124],"(",["T_ISSET","isset",124],"(",["T_VARIABLE","$simpleXml",124],")",")",["T_WHITESPACE"," ",124],"{",["T_WHITESPACE","\n            ",124],["T_VARIABLE","$result",125],["T_WHITESPACE"," ",125],"=",["T_WHITESPACE"," ",125],["T_STRING","simplexml_import_dom",125],"(",["T_VARIABLE","$dom",125],")",";",["T_WHITESPACE","\n            ",125],["T_IF","if",126],["T_WHITESPACE"," ",126],"(","!",["T_VARIABLE","$result",126],["T_WHITESPACE"," ",126],["T_INSTANCEOF","instanceof",126],["T_WHITESPACE"," ",126],["T_STRING","SimpleXMLElement",126],")",["T_WHITESPACE"," ",126],"{",["T_WHITESPACE","\n                ",126],["T_RETURN","return",127],["T_WHITESPACE"," ",127],["T_STRING","false",127],";",["T_WHITESPACE","\n            ",127],"}",["T_WHITESPACE","\n            ",128],["T_RETURN","return",129],["T_WHITESPACE"," ",129],["T_VARIABLE","$result",129],";",["T_WHITESPACE","\n        ",129],"}",["T_WHITESPACE","\n        ",130],["T_RETURN","return",131],["T_WHITESPACE"," ",131],["T_VARIABLE","$dom",131],";",["T_WHITESPACE","\n    ",131],"}",["T_WHITESPACE","\n\n    ",132],["T_DOC_COMMENT","\/**\n     * Scan XML file for potential XXE\/XEE attacks\n     *\n     * @param  string $file\n     * @param  DOMDocument $dom\n     * @throws Zend_Xml_Exception\n     * @return SimpleXMLElement|DomDocument\n     *\/",134],["T_WHITESPACE","\n    ",141],["T_PUBLIC","public",142],["T_WHITESPACE"," ",142],["T_STATIC","static",142],["T_WHITESPACE"," ",142],["T_FUNCTION","function",142],["T_WHITESPACE"," ",142],["T_STRING","scanFile",142],"(",["T_VARIABLE","$file",142],",",["T_WHITESPACE"," ",142],["T_STRING","DOMDocument",142],["T_WHITESPACE"," ",142],["T_VARIABLE","$dom",142],["T_WHITESPACE"," ",142],"=",["T_WHITESPACE"," ",142],["T_STRING","null",142],")",["T_WHITESPACE","\n    ",142],"{",["T_WHITESPACE","\n        ",143],["T_IF","if",144],["T_WHITESPACE"," ",144],"(","!",["T_STRING","file_exists",144],"(",["T_VARIABLE","$file",144],")",")",["T_WHITESPACE"," ",144],"{",["T_WHITESPACE","\n            ",144],["T_COMMENT","#require_once 'Exception.php';\n",145],["T_WHITESPACE","            ",146],["T_THROW","throw",146],["T_WHITESPACE"," ",146],["T_NEW","new",146],["T_WHITESPACE"," ",146],["T_STRING","Zend_Xml_Exception",146],"(",["T_WHITESPACE","\n                ",146],"\"",["T_ENCAPSED_AND_WHITESPACE","The file ",147],["T_VARIABLE","$file",147],["T_ENCAPSED_AND_WHITESPACE"," specified doesn't exist",147],"\"",["T_WHITESPACE","\n            ",147],")",";",["T_WHITESPACE","\n        ",148],"}",["T_WHITESPACE","\n        ",149],["T_RETURN","return",150],["T_WHITESPACE"," ",150],["T_STRING","self",150],["T_DOUBLE_COLON","::",150],["T_STRING","scan",150],"(",["T_STRING","file_get_contents",150],"(",["T_VARIABLE","$file",150],")",",",["T_WHITESPACE"," ",150],["T_VARIABLE","$dom",150],")",";",["T_WHITESPACE","\n    ",150],"}",["T_WHITESPACE","\n\n    ",151],["T_DOC_COMMENT","\/**\n     * Return true if PHP is running with PHP-FPM\n     *\n     * This method is mainly used to determine whether or not heuristic checks\n     * (vs libxml checks) should be made, due to threading issues in libxml;\n     * under php-fpm, threading becomes a concern.\n     *\n     * However, PHP versions 5.5.22+ and 5.6.6+ contain a patch to the\n     * libxml support in PHP that makes the libxml checks viable; in such\n     * versions, this method will return false to enforce those checks, which\n     * are more strict and accurate than the heuristic checks.\n     *\n     * @return boolean\n     *\/",153],["T_WHITESPACE","\n    ",166],["T_PUBLIC","public",167],["T_WHITESPACE"," ",167],["T_STATIC","static",167],["T_WHITESPACE"," ",167],["T_FUNCTION","function",167],["T_WHITESPACE"," ",167],["T_STRING","isPhpFpm",167],"(",")",["T_WHITESPACE","\n    ",167],"{",["T_WHITESPACE","\n        ",168],["T_VARIABLE","$isVulnerableVersion",169],["T_WHITESPACE"," ",169],"=",["T_WHITESPACE"," ",169],"(",["T_WHITESPACE","\n            ",169],["T_STRING","version_compare",170],"(",["T_STRING","PHP_VERSION",170],",",["T_WHITESPACE"," ",170],["T_CONSTANT_ENCAPSED_STRING","'5.5.22'",170],",",["T_WHITESPACE"," ",170],["T_CONSTANT_ENCAPSED_STRING","'lt'",170],")",["T_WHITESPACE","\n            ",170],["T_BOOLEAN_OR","||",171],["T_WHITESPACE"," ",171],"(",["T_WHITESPACE","\n                ",171],["T_STRING","version_compare",172],"(",["T_STRING","PHP_VERSION",172],",",["T_WHITESPACE"," ",172],["T_CONSTANT_ENCAPSED_STRING","'5.6'",172],",",["T_WHITESPACE"," ",172],["T_CONSTANT_ENCAPSED_STRING","'gte'",172],")",["T_WHITESPACE","\n                ",172],["T_BOOLEAN_AND","&&",173],["T_WHITESPACE"," ",173],["T_STRING","version_compare",173],"(",["T_STRING","PHP_VERSION",173],",",["T_WHITESPACE"," ",173],["T_CONSTANT_ENCAPSED_STRING","'5.6.6'",173],",",["T_WHITESPACE"," ",173],["T_CONSTANT_ENCAPSED_STRING","'lt'",173],")",["T_WHITESPACE","\n            ",173],")",["T_WHITESPACE","\n        ",174],")",";",["T_WHITESPACE","\n\n        ",175],["T_IF","if",177],["T_WHITESPACE"," ",177],"(",["T_STRING","substr",177],"(",["T_STRING","php_sapi_name",177],"(",")",",",["T_WHITESPACE"," ",177],["T_LNUMBER","0",177],",",["T_WHITESPACE"," ",177],["T_LNUMBER","3",177],")",["T_WHITESPACE"," ",177],["T_IS_IDENTICAL","===",177],["T_WHITESPACE"," ",177],["T_CONSTANT_ENCAPSED_STRING","'fpm'",177],["T_WHITESPACE"," ",177],["T_BOOLEAN_AND","&&",177],["T_WHITESPACE"," ",177],["T_VARIABLE","$isVulnerableVersion",177],")",["T_WHITESPACE"," ",177],"{",["T_WHITESPACE","\n            ",177],["T_RETURN","return",178],["T_WHITESPACE"," ",178],["T_STRING","true",178],";",["T_WHITESPACE","\n        ",178],"}",["T_WHITESPACE","\n        ",179],["T_RETURN","return",180],["T_WHITESPACE"," ",180],["T_STRING","false",180],";",["T_WHITESPACE","\n    ",180],"}",["T_WHITESPACE","\n\n    ",181],["T_DOC_COMMENT","\/**\n     * Determine and return the string(s) to use for the <!ENTITY comparison.\n     *\n     * @param string $xml\n     * @return string[]\n     *\/",183],["T_WHITESPACE","\n    ",188],["T_PROTECTED","protected",189],["T_WHITESPACE"," ",189],["T_STATIC","static",189],["T_WHITESPACE"," ",189],["T_FUNCTION","function",189],["T_WHITESPACE"," ",189],["T_STRING","getEntityComparison",189],"(",["T_VARIABLE","$xml",189],")",["T_WHITESPACE","\n    ",189],"{",["T_WHITESPACE","\n        ",190],["T_VARIABLE","$encodingMap",191],["T_WHITESPACE"," ",191],"=",["T_WHITESPACE"," ",191],["T_STRING","self",191],["T_DOUBLE_COLON","::",191],["T_STRING","getAsciiEncodingMap",191],"(",")",";",["T_WHITESPACE","\n        ",191],["T_RETURN","return",192],["T_WHITESPACE"," ",192],["T_STRING","array_map",192],"(",["T_WHITESPACE","\n            ",192],["T_ARRAY","array",193],"(",["T_CLASS_C","__CLASS__",193],",",["T_WHITESPACE"," ",193],["T_CONSTANT_ENCAPSED_STRING","'generateEntityComparison'",193],")",",",["T_WHITESPACE","\n            ",193],["T_STRING","self",194],["T_DOUBLE_COLON","::",194],["T_STRING","detectXmlEncoding",194],"(",["T_VARIABLE","$xml",194],",",["T_WHITESPACE"," ",194],["T_STRING","self",194],["T_DOUBLE_COLON","::",194],["T_STRING","detectStringEncoding",194],"(",["T_VARIABLE","$xml",194],")",")",["T_WHITESPACE","\n        ",194],")",";",["T_WHITESPACE","\n    ",195],"}",["T_WHITESPACE","\n\n    ",196],["T_DOC_COMMENT","\/**\n     * Determine the string encoding.\n     *\n     * Determines string encoding from either a detected BOM or a\n     * heuristic.\n     *\n     * @param string $xml\n     * @return string File encoding\n     *\/",198],["T_WHITESPACE","\n    ",206],["T_PROTECTED","protected",207],["T_WHITESPACE"," ",207],["T_STATIC","static",207],["T_WHITESPACE"," ",207],["T_FUNCTION","function",207],["T_WHITESPACE"," ",207],["T_STRING","detectStringEncoding",207],"(",["T_VARIABLE","$xml",207],")",["T_WHITESPACE","\n    ",207],"{",["T_WHITESPACE","\n        ",208],["T_VARIABLE","$encoding",209],["T_WHITESPACE"," ",209],"=",["T_WHITESPACE"," ",209],["T_STRING","self",209],["T_DOUBLE_COLON","::",209],["T_STRING","detectBom",209],"(",["T_VARIABLE","$xml",209],")",";",["T_WHITESPACE","\n        ",209],["T_RETURN","return",210],["T_WHITESPACE"," ",210],"(",["T_VARIABLE","$encoding",210],")",["T_WHITESPACE"," ",210],"?",["T_WHITESPACE"," ",210],["T_VARIABLE","$encoding",210],["T_WHITESPACE"," ",210],":",["T_WHITESPACE"," ",210],["T_STRING","self",210],["T_DOUBLE_COLON","::",210],["T_STRING","detectXmlStringEncoding",210],"(",["T_VARIABLE","$xml",210],")",";",["T_WHITESPACE","\n    ",210],"}",["T_WHITESPACE","\n\n    ",211],["T_DOC_COMMENT","\/**\n     * Attempt to match a known BOM.\n     *\n     * Iterates through the return of getBomMap(), comparing the initial bytes\n     * of the provided string to the BOM of each; if a match is determined,\n     * it returns the encoding.\n     *\n     * @param string $string\n     * @return false|string Returns encoding on success.\n     *\/",213],["T_WHITESPACE","\n    ",222],["T_PROTECTED","protected",223],["T_WHITESPACE"," ",223],["T_STATIC","static",223],["T_WHITESPACE"," ",223],["T_FUNCTION","function",223],["T_WHITESPACE"," ",223],["T_STRING","detectBom",223],"(",["T_VARIABLE","$string",223],")",["T_WHITESPACE","\n    ",223],"{",["T_WHITESPACE","\n        ",224],["T_FOREACH","foreach",225],["T_WHITESPACE"," ",225],"(",["T_STRING","self",225],["T_DOUBLE_COLON","::",225],["T_STRING","getBomMap",225],"(",")",["T_WHITESPACE"," ",225],["T_AS","as",225],["T_WHITESPACE"," ",225],["T_VARIABLE","$criteria",225],")",["T_WHITESPACE"," ",225],"{",["T_WHITESPACE","\n            ",225],["T_IF","if",226],["T_WHITESPACE"," ",226],"(",["T_LNUMBER","0",226],["T_WHITESPACE"," ",226],["T_IS_IDENTICAL","===",226],["T_WHITESPACE"," ",226],["T_STRING","strncmp",226],"(",["T_VARIABLE","$string",226],",",["T_WHITESPACE"," ",226],["T_VARIABLE","$criteria",226],"[",["T_CONSTANT_ENCAPSED_STRING","'bom'",226],"]",",",["T_WHITESPACE"," ",226],["T_VARIABLE","$criteria",226],"[",["T_CONSTANT_ENCAPSED_STRING","'length'",226],"]",")",")",["T_WHITESPACE"," ",226],"{",["T_WHITESPACE","\n                ",226],["T_RETURN","return",227],["T_WHITESPACE"," ",227],["T_VARIABLE","$criteria",227],"[",["T_CONSTANT_ENCAPSED_STRING","'encoding'",227],"]",";",["T_WHITESPACE","\n            ",227],"}",["T_WHITESPACE","\n        ",228],"}",["T_WHITESPACE","\n        ",229],["T_RETURN","return",230],["T_WHITESPACE"," ",230],["T_STRING","false",230],";",["T_WHITESPACE","\n    ",230],"}",["T_WHITESPACE","\n\n    ",231],["T_DOC_COMMENT","\/**\n     * Attempt to detect the string encoding of an XML string.\n     *\n     * @param string $xml\n     * @return string Encoding\n     *\/",233],["T_WHITESPACE","\n    ",238],["T_PROTECTED","protected",239],["T_WHITESPACE"," ",239],["T_STATIC","static",239],["T_WHITESPACE"," ",239],["T_FUNCTION","function",239],["T_WHITESPACE"," ",239],["T_STRING","detectXmlStringEncoding",239],"(",["T_VARIABLE","$xml",239],")",["T_WHITESPACE","\n    ",239],"{",["T_WHITESPACE","\n        ",240],["T_FOREACH","foreach",241],["T_WHITESPACE"," ",241],"(",["T_STRING","self",241],["T_DOUBLE_COLON","::",241],["T_STRING","getAsciiEncodingMap",241],"(",")",["T_WHITESPACE"," ",241],["T_AS","as",241],["T_WHITESPACE"," ",241],["T_VARIABLE","$encoding",241],["T_WHITESPACE"," ",241],["T_DOUBLE_ARROW","=>",241],["T_WHITESPACE"," ",241],["T_VARIABLE","$generator",241],")",["T_WHITESPACE"," ",241],"{",["T_WHITESPACE","\n            ",241],["T_VARIABLE","$prefix",242],["T_WHITESPACE"," ",242],"=",["T_WHITESPACE"," ",242],["T_STRING","call_user_func",242],"(",["T_VARIABLE","$generator",242],",",["T_WHITESPACE"," ",242],["T_CONSTANT_ENCAPSED_STRING","'<'",242],["T_WHITESPACE"," ",242],".",["T_WHITESPACE"," ",242],["T_CONSTANT_ENCAPSED_STRING","'?xml'",242],")",";",["T_WHITESPACE","\n            ",242],["T_IF","if",243],["T_WHITESPACE"," ",243],"(",["T_LNUMBER","0",243],["T_WHITESPACE"," ",243],["T_IS_IDENTICAL","===",243],["T_WHITESPACE"," ",243],["T_STRING","strncmp",243],"(",["T_VARIABLE","$xml",243],",",["T_WHITESPACE"," ",243],["T_VARIABLE","$prefix",243],",",["T_WHITESPACE"," ",243],["T_STRING","strlen",243],"(",["T_VARIABLE","$prefix",243],")",")",")",["T_WHITESPACE"," ",243],"{",["T_WHITESPACE","\n                ",243],["T_RETURN","return",244],["T_WHITESPACE"," ",244],["T_VARIABLE","$encoding",244],";",["T_WHITESPACE","\n            ",244],"}",["T_WHITESPACE","\n        ",245],"}",["T_WHITESPACE","\n\n        ",246],["T_COMMENT","\/\/ Fallback\n",248],["T_WHITESPACE","        ",249],["T_RETURN","return",249],["T_WHITESPACE"," ",249],["T_CONSTANT_ENCAPSED_STRING","'UTF-8'",249],";",["T_WHITESPACE","\n    ",249],"}",["T_WHITESPACE","\n\n    ",250],["T_DOC_COMMENT","\/**\n     * Attempt to detect the specified XML encoding.\n     *\n     * Using the file's encoding, determines if an \"encoding\" attribute is\n     * present and well-formed in the XML declaration; if so, it returns a\n     * list with both the ASCII representation of that declaration and the\n     * original file encoding.\n     *\n     * If not, a list containing only the provided file encoding is returned.\n     *\n     * @param string $xml\n     * @param string $fileEncoding\n     * @return string[] Potential XML encodings\n     *\/",252],["T_WHITESPACE","\n    ",265],["T_PROTECTED","protected",266],["T_WHITESPACE"," ",266],["T_STATIC","static",266],["T_WHITESPACE"," ",266],["T_FUNCTION","function",266],["T_WHITESPACE"," ",266],["T_STRING","detectXmlEncoding",266],"(",["T_VARIABLE","$xml",266],",",["T_WHITESPACE"," ",266],["T_VARIABLE","$fileEncoding",266],")",["T_WHITESPACE","\n    ",266],"{",["T_WHITESPACE","\n        ",267],["T_VARIABLE","$encodingMap",268],["T_WHITESPACE"," ",268],"=",["T_WHITESPACE"," ",268],["T_STRING","self",268],["T_DOUBLE_COLON","::",268],["T_STRING","getAsciiEncodingMap",268],"(",")",";",["T_WHITESPACE","\n        ",268],["T_VARIABLE","$generator",269],["T_WHITESPACE","   ",269],"=",["T_WHITESPACE"," ",269],["T_VARIABLE","$encodingMap",269],"[",["T_VARIABLE","$fileEncoding",269],"]",";",["T_WHITESPACE","\n        ",269],["T_VARIABLE","$encAttr",270],["T_WHITESPACE","     ",270],"=",["T_WHITESPACE"," ",270],["T_STRING","call_user_func",270],"(",["T_VARIABLE","$generator",270],",",["T_WHITESPACE"," ",270],["T_CONSTANT_ENCAPSED_STRING","'encoding=\"'",270],")",";",["T_WHITESPACE","\n        ",270],["T_VARIABLE","$quote",271],["T_WHITESPACE","       ",271],"=",["T_WHITESPACE"," ",271],["T_STRING","call_user_func",271],"(",["T_VARIABLE","$generator",271],",",["T_WHITESPACE"," ",271],["T_CONSTANT_ENCAPSED_STRING","'\"'",271],")",";",["T_WHITESPACE","\n        ",271],["T_VARIABLE","$close",272],["T_WHITESPACE","       ",272],"=",["T_WHITESPACE"," ",272],["T_STRING","call_user_func",272],"(",["T_VARIABLE","$generator",272],",",["T_WHITESPACE"," ",272],["T_CONSTANT_ENCAPSED_STRING","'>'",272],")",";",["T_WHITESPACE","\n\n        ",272],["T_VARIABLE","$closePos",274],["T_WHITESPACE","    ",274],"=",["T_WHITESPACE"," ",274],["T_STRING","strpos",274],"(",["T_VARIABLE","$xml",274],",",["T_WHITESPACE"," ",274],["T_VARIABLE","$close",274],")",";",["T_WHITESPACE","\n        ",274],["T_IF","if",275],["T_WHITESPACE"," ",275],"(",["T_STRING","false",275],["T_WHITESPACE"," ",275],["T_IS_IDENTICAL","===",275],["T_WHITESPACE"," ",275],["T_VARIABLE","$closePos",275],")",["T_WHITESPACE"," ",275],"{",["T_WHITESPACE","\n            ",275],["T_RETURN","return",276],["T_WHITESPACE"," ",276],["T_ARRAY","array",276],"(",["T_VARIABLE","$fileEncoding",276],")",";",["T_WHITESPACE","\n        ",276],"}",["T_WHITESPACE","\n\n        ",277],["T_VARIABLE","$encPos",279],["T_WHITESPACE"," ",279],"=",["T_WHITESPACE"," ",279],["T_STRING","strpos",279],"(",["T_VARIABLE","$xml",279],",",["T_WHITESPACE"," ",279],["T_VARIABLE","$encAttr",279],")",";",["T_WHITESPACE","\n        ",279],["T_IF","if",280],["T_WHITESPACE"," ",280],"(",["T_STRING","false",280],["T_WHITESPACE"," ",280],["T_IS_IDENTICAL","===",280],["T_WHITESPACE"," ",280],["T_VARIABLE","$encPos",280],["T_WHITESPACE","\n            ",280],["T_BOOLEAN_OR","||",281],["T_WHITESPACE"," ",281],["T_VARIABLE","$encPos",281],["T_WHITESPACE"," ",281],">",["T_WHITESPACE"," ",281],["T_VARIABLE","$closePos",281],["T_WHITESPACE","\n        ",281],")",["T_WHITESPACE"," ",282],"{",["T_WHITESPACE","\n            ",282],["T_RETURN","return",283],["T_WHITESPACE"," ",283],["T_ARRAY","array",283],"(",["T_VARIABLE","$fileEncoding",283],")",";",["T_WHITESPACE","\n        ",283],"}",["T_WHITESPACE","\n\n        ",284],["T_VARIABLE","$encPos",286],["T_WHITESPACE","   ",286],["T_PLUS_EQUAL","+=",286],["T_WHITESPACE"," ",286],["T_STRING","strlen",286],"(",["T_VARIABLE","$encAttr",286],")",";",["T_WHITESPACE","\n        ",286],["T_VARIABLE","$quotePos",287],["T_WHITESPACE"," ",287],"=",["T_WHITESPACE"," ",287],["T_STRING","strpos",287],"(",["T_VARIABLE","$xml",287],",",["T_WHITESPACE"," ",287],["T_VARIABLE","$quote",287],",",["T_WHITESPACE"," ",287],["T_VARIABLE","$encPos",287],")",";",["T_WHITESPACE","\n        ",287],["T_IF","if",288],["T_WHITESPACE"," ",288],"(",["T_STRING","false",288],["T_WHITESPACE"," ",288],["T_IS_IDENTICAL","===",288],["T_WHITESPACE"," ",288],["T_VARIABLE","$quotePos",288],")",["T_WHITESPACE"," ",288],"{",["T_WHITESPACE","\n            ",288],["T_RETURN","return",289],["T_WHITESPACE"," ",289],["T_ARRAY","array",289],"(",["T_VARIABLE","$fileEncoding",289],")",";",["T_WHITESPACE","\n        ",289],"}",["T_WHITESPACE","\n\n        ",290],["T_VARIABLE","$encoding",292],["T_WHITESPACE"," ",292],"=",["T_WHITESPACE"," ",292],["T_STRING","self",292],["T_DOUBLE_COLON","::",292],["T_STRING","substr",292],"(",["T_VARIABLE","$xml",292],",",["T_WHITESPACE"," ",292],["T_VARIABLE","$encPos",292],",",["T_WHITESPACE"," ",292],["T_VARIABLE","$quotePos",292],")",";",["T_WHITESPACE","\n        ",292],["T_RETURN","return",293],["T_WHITESPACE"," ",293],["T_ARRAY","array",293],"(",["T_WHITESPACE","\n            ",293],["T_COMMENT","\/\/ Following line works because we're only supporting 8-bit safe encodings at this time.\n",294],["T_WHITESPACE","            ",295],["T_STRING","str_replace",295],"(",["T_CONSTANT_ENCAPSED_STRING","'\\0'",295],",",["T_WHITESPACE"," ",295],["T_CONSTANT_ENCAPSED_STRING","''",295],",",["T_WHITESPACE"," ",295],["T_VARIABLE","$encoding",295],")",",",["T_WHITESPACE"," ",295],["T_COMMENT","\/\/ detected encoding\n",295],["T_WHITESPACE","            ",296],["T_VARIABLE","$fileEncoding",296],",",["T_WHITESPACE","                    ",296],["T_COMMENT","\/\/ file encoding\n",296],["T_WHITESPACE","        ",297],")",";",["T_WHITESPACE","\n    ",297],"}",["T_WHITESPACE","\n\n    ",298],["T_DOC_COMMENT","\/**\n     * Return a list of BOM maps.\n     *\n     * Returns a list of common encoding -> BOM maps, along with the character\n     * length to compare against.\n     *\n     * @link https:\/\/en.wikipedia.org\/wiki\/Byte_order_mark\n     * @return array\n     *\/",300],["T_WHITESPACE","\n    ",308],["T_PROTECTED","protected",309],["T_WHITESPACE"," ",309],["T_STATIC","static",309],["T_WHITESPACE"," ",309],["T_FUNCTION","function",309],["T_WHITESPACE"," ",309],["T_STRING","getBomMap",309],"(",")",["T_WHITESPACE","\n    ",309],"{",["T_WHITESPACE","\n        ",310],["T_RETURN","return",311],["T_WHITESPACE"," ",311],["T_ARRAY","array",311],"(",["T_WHITESPACE","\n            ",311],["T_ARRAY","array",312],"(",["T_WHITESPACE","\n                ",312],["T_CONSTANT_ENCAPSED_STRING","'encoding'",313],["T_WHITESPACE"," ",313],["T_DOUBLE_ARROW","=>",313],["T_WHITESPACE"," ",313],["T_CONSTANT_ENCAPSED_STRING","'UTF-32BE'",313],",",["T_WHITESPACE","\n                ",313],["T_CONSTANT_ENCAPSED_STRING","'bom'",314],["T_WHITESPACE","      ",314],["T_DOUBLE_ARROW","=>",314],["T_WHITESPACE"," ",314],["T_STRING","pack",314],"(",["T_CONSTANT_ENCAPSED_STRING","'CCCC'",314],",",["T_WHITESPACE"," ",314],["T_LNUMBER","0x00",314],",",["T_WHITESPACE"," ",314],["T_LNUMBER","0x00",314],",",["T_WHITESPACE"," ",314],["T_LNUMBER","0xfe",314],",",["T_WHITESPACE"," ",314],["T_LNUMBER","0xff",314],")",",",["T_WHITESPACE","\n                ",314],["T_CONSTANT_ENCAPSED_STRING","'length'",315],["T_WHITESPACE","   ",315],["T_DOUBLE_ARROW","=>",315],["T_WHITESPACE"," ",315],["T_LNUMBER","4",315],",",["T_WHITESPACE","\n            ",315],")",",",["T_WHITESPACE","\n            ",316],["T_ARRAY","array",317],"(",["T_WHITESPACE","\n                ",317],["T_CONSTANT_ENCAPSED_STRING","'encoding'",318],["T_WHITESPACE"," ",318],["T_DOUBLE_ARROW","=>",318],["T_WHITESPACE"," ",318],["T_CONSTANT_ENCAPSED_STRING","'UTF-32LE'",318],",",["T_WHITESPACE","\n                ",318],["T_CONSTANT_ENCAPSED_STRING","'bom'",319],["T_WHITESPACE","      ",319],["T_DOUBLE_ARROW","=>",319],["T_WHITESPACE"," ",319],["T_STRING","pack",319],"(",["T_CONSTANT_ENCAPSED_STRING","'CCCC'",319],",",["T_WHITESPACE"," ",319],["T_LNUMBER","0xff",319],",",["T_WHITESPACE"," ",319],["T_LNUMBER","0xfe",319],",",["T_WHITESPACE"," ",319],["T_LNUMBER","0x00",319],",",["T_WHITESPACE"," ",319],["T_LNUMBER","0x00",319],")",",",["T_WHITESPACE","\n                ",319],["T_CONSTANT_ENCAPSED_STRING","'length'",320],["T_WHITESPACE","   ",320],["T_DOUBLE_ARROW","=>",320],["T_WHITESPACE"," ",320],["T_LNUMBER","4",320],",",["T_WHITESPACE","\n            ",320],")",",",["T_WHITESPACE","\n            ",321],["T_ARRAY","array",322],"(",["T_WHITESPACE","\n                ",322],["T_CONSTANT_ENCAPSED_STRING","'encoding'",323],["T_WHITESPACE"," ",323],["T_DOUBLE_ARROW","=>",323],["T_WHITESPACE"," ",323],["T_CONSTANT_ENCAPSED_STRING","'GB-18030'",323],",",["T_WHITESPACE","\n                ",323],["T_CONSTANT_ENCAPSED_STRING","'bom'",324],["T_WHITESPACE","      ",324],["T_DOUBLE_ARROW","=>",324],["T_WHITESPACE"," ",324],["T_STRING","pack",324],"(",["T_CONSTANT_ENCAPSED_STRING","'CCCC'",324],",",["T_WHITESPACE"," ",324],["T_LNUMBER","0x84",324],",",["T_WHITESPACE"," ",324],["T_LNUMBER","0x31",324],",",["T_WHITESPACE"," ",324],["T_LNUMBER","0x95",324],",",["T_WHITESPACE"," ",324],["T_LNUMBER","0x33",324],")",",",["T_WHITESPACE","\n                ",324],["T_CONSTANT_ENCAPSED_STRING","'length'",325],["T_WHITESPACE","   ",325],["T_DOUBLE_ARROW","=>",325],["T_WHITESPACE"," ",325],["T_LNUMBER","4",325],",",["T_WHITESPACE","\n            ",325],")",",",["T_WHITESPACE","\n            ",326],["T_ARRAY","array",327],"(",["T_WHITESPACE","\n                ",327],["T_CONSTANT_ENCAPSED_STRING","'encoding'",328],["T_WHITESPACE"," ",328],["T_DOUBLE_ARROW","=>",328],["T_WHITESPACE"," ",328],["T_CONSTANT_ENCAPSED_STRING","'UTF-16BE'",328],",",["T_WHITESPACE","\n                ",328],["T_CONSTANT_ENCAPSED_STRING","'bom'",329],["T_WHITESPACE","      ",329],["T_DOUBLE_ARROW","=>",329],["T_WHITESPACE"," ",329],["T_STRING","pack",329],"(",["T_CONSTANT_ENCAPSED_STRING","'CC'",329],",",["T_WHITESPACE"," ",329],["T_LNUMBER","0xfe",329],",",["T_WHITESPACE"," ",329],["T_LNUMBER","0xff",329],")",",",["T_WHITESPACE","\n                ",329],["T_CONSTANT_ENCAPSED_STRING","'length'",330],["T_WHITESPACE","   ",330],["T_DOUBLE_ARROW","=>",330],["T_WHITESPACE"," ",330],["T_LNUMBER","2",330],",",["T_WHITESPACE","\n            ",330],")",",",["T_WHITESPACE","\n            ",331],["T_ARRAY","array",332],"(",["T_WHITESPACE","\n                ",332],["T_CONSTANT_ENCAPSED_STRING","'encoding'",333],["T_WHITESPACE"," ",333],["T_DOUBLE_ARROW","=>",333],["T_WHITESPACE"," ",333],["T_CONSTANT_ENCAPSED_STRING","'UTF-16LE'",333],",",["T_WHITESPACE","\n                ",333],["T_CONSTANT_ENCAPSED_STRING","'bom'",334],["T_WHITESPACE","      ",334],["T_DOUBLE_ARROW","=>",334],["T_WHITESPACE"," ",334],["T_STRING","pack",334],"(",["T_CONSTANT_ENCAPSED_STRING","'CC'",334],",",["T_WHITESPACE"," ",334],["T_LNUMBER","0xff",334],",",["T_WHITESPACE"," ",334],["T_LNUMBER","0xfe",334],")",",",["T_WHITESPACE","\n                ",334],["T_CONSTANT_ENCAPSED_STRING","'length'",335],["T_WHITESPACE","   ",335],["T_DOUBLE_ARROW","=>",335],["T_WHITESPACE"," ",335],["T_LNUMBER","2",335],",",["T_WHITESPACE","\n            ",335],")",",",["T_WHITESPACE","\n            ",336],["T_ARRAY","array",337],"(",["T_WHITESPACE","\n                ",337],["T_CONSTANT_ENCAPSED_STRING","'encoding'",338],["T_WHITESPACE"," ",338],["T_DOUBLE_ARROW","=>",338],["T_WHITESPACE"," ",338],["T_CONSTANT_ENCAPSED_STRING","'UTF-8'",338],",",["T_WHITESPACE","\n                ",338],["T_CONSTANT_ENCAPSED_STRING","'bom'",339],["T_WHITESPACE","      ",339],["T_DOUBLE_ARROW","=>",339],["T_WHITESPACE"," ",339],["T_STRING","pack",339],"(",["T_CONSTANT_ENCAPSED_STRING","'CCC'",339],",",["T_WHITESPACE"," ",339],["T_LNUMBER","0xef",339],",",["T_WHITESPACE"," ",339],["T_LNUMBER","0xbb",339],",",["T_WHITESPACE"," ",339],["T_LNUMBER","0xbf",339],")",",",["T_WHITESPACE","\n                ",339],["T_CONSTANT_ENCAPSED_STRING","'length'",340],["T_WHITESPACE","   ",340],["T_DOUBLE_ARROW","=>",340],["T_WHITESPACE"," ",340],["T_LNUMBER","3",340],",",["T_WHITESPACE","\n            ",340],")",",",["T_WHITESPACE","\n        ",341],")",";",["T_WHITESPACE","\n    ",342],"}",["T_WHITESPACE","\n\n    ",343],["T_DOC_COMMENT","\/**\n     * Return a map of encoding => generator pairs.\n     *\n     * Returns a map of encoding => generator pairs, where the generator is a\n     * callable that accepts a string and returns the appropriate byte order\n     * sequence of that string for the encoding.\n     *\n     * @return array\n     *\/",345],["T_WHITESPACE","\n    ",353],["T_PROTECTED","protected",354],["T_WHITESPACE"," ",354],["T_STATIC","static",354],["T_WHITESPACE"," ",354],["T_FUNCTION","function",354],["T_WHITESPACE"," ",354],["T_STRING","getAsciiEncodingMap",354],"(",")",["T_WHITESPACE","\n    ",354],"{",["T_WHITESPACE","\n        ",355],["T_RETURN","return",356],["T_WHITESPACE"," ",356],["T_ARRAY","array",356],"(",["T_WHITESPACE","\n            ",356],["T_CONSTANT_ENCAPSED_STRING","'UTF-32BE'",357],["T_WHITESPACE","   ",357],["T_DOUBLE_ARROW","=>",357],["T_WHITESPACE"," ",357],["T_ARRAY","array",357],"(",["T_CLASS_C","__CLASS__",357],",",["T_WHITESPACE"," ",357],["T_CONSTANT_ENCAPSED_STRING","'encodeToUTF32BE'",357],")",",",["T_WHITESPACE","\n            ",357],["T_CONSTANT_ENCAPSED_STRING","'UTF-32LE'",358],["T_WHITESPACE","   ",358],["T_DOUBLE_ARROW","=>",358],["T_WHITESPACE"," ",358],["T_ARRAY","array",358],"(",["T_CLASS_C","__CLASS__",358],",",["T_WHITESPACE"," ",358],["T_CONSTANT_ENCAPSED_STRING","'encodeToUTF32LE'",358],")",",",["T_WHITESPACE","\n            ",358],["T_CONSTANT_ENCAPSED_STRING","'UTF-32odd1'",359],["T_WHITESPACE"," ",359],["T_DOUBLE_ARROW","=>",359],["T_WHITESPACE"," ",359],["T_ARRAY","array",359],"(",["T_CLASS_C","__CLASS__",359],",",["T_WHITESPACE"," ",359],["T_CONSTANT_ENCAPSED_STRING","'encodeToUTF32odd1'",359],")",",",["T_WHITESPACE","\n            ",359],["T_CONSTANT_ENCAPSED_STRING","'UTF-32odd2'",360],["T_WHITESPACE"," ",360],["T_DOUBLE_ARROW","=>",360],["T_WHITESPACE"," ",360],["T_ARRAY","array",360],"(",["T_CLASS_C","__CLASS__",360],",",["T_WHITESPACE"," ",360],["T_CONSTANT_ENCAPSED_STRING","'encodeToUTF32odd2'",360],")",",",["T_WHITESPACE","\n            ",360],["T_CONSTANT_ENCAPSED_STRING","'UTF-16BE'",361],["T_WHITESPACE","   ",361],["T_DOUBLE_ARROW","=>",361],["T_WHITESPACE"," ",361],["T_ARRAY","array",361],"(",["T_CLASS_C","__CLASS__",361],",",["T_WHITESPACE"," ",361],["T_CONSTANT_ENCAPSED_STRING","'encodeToUTF16BE'",361],")",",",["T_WHITESPACE","\n            ",361],["T_CONSTANT_ENCAPSED_STRING","'UTF-16LE'",362],["T_WHITESPACE","   ",362],["T_DOUBLE_ARROW","=>",362],["T_WHITESPACE"," ",362],["T_ARRAY","array",362],"(",["T_CLASS_C","__CLASS__",362],",",["T_WHITESPACE"," ",362],["T_CONSTANT_ENCAPSED_STRING","'encodeToUTF16LE'",362],")",",",["T_WHITESPACE","\n            ",362],["T_CONSTANT_ENCAPSED_STRING","'UTF-8'",363],["T_WHITESPACE","      ",363],["T_DOUBLE_ARROW","=>",363],["T_WHITESPACE"," ",363],["T_ARRAY","array",363],"(",["T_CLASS_C","__CLASS__",363],",",["T_WHITESPACE"," ",363],["T_CONSTANT_ENCAPSED_STRING","'encodeToUTF8'",363],")",",",["T_WHITESPACE","\n            ",363],["T_CONSTANT_ENCAPSED_STRING","'GB-18030'",364],["T_WHITESPACE","   ",364],["T_DOUBLE_ARROW","=>",364],["T_WHITESPACE"," ",364],["T_ARRAY","array",364],"(",["T_CLASS_C","__CLASS__",364],",",["T_WHITESPACE"," ",364],["T_CONSTANT_ENCAPSED_STRING","'encodeToUTF8'",364],")",",",["T_WHITESPACE","\n        ",364],")",";",["T_WHITESPACE","\n    ",365],"}",["T_WHITESPACE","\n\n    ",366],["T_DOC_COMMENT","\/**\n     * Binary-safe substr.\n     *\n     * substr() is not binary-safe; this method loops by character to ensure\n     * multi-byte characters are aggregated correctly.\n     *\n     * @param string $string\n     * @param int $start\n     * @param int $end\n     * @return string\n     *\/",368],["T_WHITESPACE","\n    ",378],["T_PROTECTED","protected",379],["T_WHITESPACE"," ",379],["T_STATIC","static",379],["T_WHITESPACE"," ",379],["T_FUNCTION","function",379],["T_WHITESPACE"," ",379],["T_STRING","substr",379],"(",["T_VARIABLE","$string",379],",",["T_WHITESPACE"," ",379],["T_VARIABLE","$start",379],",",["T_WHITESPACE"," ",379],["T_VARIABLE","$end",379],")",["T_WHITESPACE","\n    ",379],"{",["T_WHITESPACE","\n        ",380],["T_VARIABLE","$substr",381],["T_WHITESPACE"," ",381],"=",["T_WHITESPACE"," ",381],["T_CONSTANT_ENCAPSED_STRING","''",381],";",["T_WHITESPACE","\n        ",381],["T_FOR","for",382],["T_WHITESPACE"," ",382],"(",["T_VARIABLE","$i",382],["T_WHITESPACE"," ",382],"=",["T_WHITESPACE"," ",382],["T_VARIABLE","$start",382],";",["T_WHITESPACE"," ",382],["T_VARIABLE","$i",382],["T_WHITESPACE"," ",382],"<",["T_WHITESPACE"," ",382],["T_VARIABLE","$end",382],";",["T_WHITESPACE"," ",382],["T_VARIABLE","$i",382],["T_WHITESPACE"," ",382],["T_PLUS_EQUAL","+=",382],["T_WHITESPACE"," ",382],["T_LNUMBER","1",382],")",["T_WHITESPACE"," ",382],"{",["T_WHITESPACE","\n            ",382],["T_VARIABLE","$substr",383],["T_WHITESPACE"," ",383],["T_CONCAT_EQUAL",".=",383],["T_WHITESPACE"," ",383],["T_VARIABLE","$string",383],"[",["T_VARIABLE","$i",383],"]",";",["T_WHITESPACE","\n        ",383],"}",["T_WHITESPACE","\n        ",384],["T_RETURN","return",385],["T_WHITESPACE"," ",385],["T_VARIABLE","$substr",385],";",["T_WHITESPACE","\n    ",385],"}",["T_WHITESPACE","\n\n    ",386],["T_DOC_COMMENT","\/**\n     * Generate an entity comparison based on the given encoding.\n     *\n     * This patch is internal only, and public only so it can be used as a\n     * callable to pass to array_map.\n     *\n     * @internal\n     * @param string $encoding\n     * @return string\n     *\/",388],["T_WHITESPACE","\n    ",397],["T_PUBLIC","public",398],["T_WHITESPACE"," ",398],["T_STATIC","static",398],["T_WHITESPACE"," ",398],["T_FUNCTION","function",398],["T_WHITESPACE"," ",398],["T_STRING","generateEntityComparison",398],"(",["T_VARIABLE","$encoding",398],")",["T_WHITESPACE","\n    ",398],"{",["T_WHITESPACE","\n        ",399],["T_VARIABLE","$encodingMap",400],["T_WHITESPACE"," ",400],"=",["T_WHITESPACE"," ",400],["T_STRING","self",400],["T_DOUBLE_COLON","::",400],["T_STRING","getAsciiEncodingMap",400],"(",")",";",["T_WHITESPACE","\n        ",400],["T_VARIABLE","$generator",401],["T_WHITESPACE","   ",401],"=",["T_WHITESPACE"," ",401],["T_ISSET","isset",401],"(",["T_VARIABLE","$encodingMap",401],"[",["T_VARIABLE","$encoding",401],"]",")",["T_WHITESPACE"," ",401],"?",["T_WHITESPACE"," ",401],["T_VARIABLE","$encodingMap",401],"[",["T_VARIABLE","$encoding",401],"]",["T_WHITESPACE"," ",401],":",["T_WHITESPACE"," ",401],["T_VARIABLE","$encodingMap",401],"[",["T_CONSTANT_ENCAPSED_STRING","'UTF-8'",401],"]",";",["T_WHITESPACE","\n        ",401],["T_RETURN","return",402],["T_WHITESPACE"," ",402],["T_STRING","call_user_func",402],"(",["T_VARIABLE","$generator",402],",",["T_WHITESPACE"," ",402],["T_CONSTANT_ENCAPSED_STRING","'<!ENTITY'",402],")",";",["T_WHITESPACE","\n    ",402],"}",["T_WHITESPACE","\n\n    ",403],["T_DOC_COMMENT","\/**\n     * Encode an ASCII string to UTF-32BE\n     *\n     * @internal\n     * @param string $ascii\n     * @return string\n     *\/",405],["T_WHITESPACE","\n    ",411],["T_PUBLIC","public",412],["T_WHITESPACE"," ",412],["T_STATIC","static",412],["T_WHITESPACE"," ",412],["T_FUNCTION","function",412],["T_WHITESPACE"," ",412],["T_STRING","encodeToUTF32BE",412],"(",["T_VARIABLE","$ascii",412],")",["T_WHITESPACE","\n    ",412],"{",["T_WHITESPACE","\n        ",413],["T_RETURN","return",414],["T_WHITESPACE"," ",414],["T_STRING","preg_replace",414],"(",["T_CONSTANT_ENCAPSED_STRING","'\/(.)\/'",414],",",["T_WHITESPACE"," ",414],["T_CONSTANT_ENCAPSED_STRING","\"\\0\\0\\0\\\\1\"",414],",",["T_WHITESPACE"," ",414],["T_VARIABLE","$ascii",414],")",";",["T_WHITESPACE","\n    ",414],"}",["T_WHITESPACE","\n\n    ",415],["T_DOC_COMMENT","\/**\n     * Encode an ASCII string to UTF-32LE\n     *\n     * @internal\n     * @param string $ascii\n     * @return string\n     *\/",417],["T_WHITESPACE","\n    ",423],["T_PUBLIC","public",424],["T_WHITESPACE"," ",424],["T_STATIC","static",424],["T_WHITESPACE"," ",424],["T_FUNCTION","function",424],["T_WHITESPACE"," ",424],["T_STRING","encodeToUTF32LE",424],"(",["T_VARIABLE","$ascii",424],")",["T_WHITESPACE","\n    ",424],"{",["T_WHITESPACE","\n        ",425],["T_RETURN","return",426],["T_WHITESPACE"," ",426],["T_STRING","preg_replace",426],"(",["T_CONSTANT_ENCAPSED_STRING","'\/(.)\/'",426],",",["T_WHITESPACE"," ",426],["T_CONSTANT_ENCAPSED_STRING","\"\\\\1\\0\\0\\0\"",426],",",["T_WHITESPACE"," ",426],["T_VARIABLE","$ascii",426],")",";",["T_WHITESPACE","\n    ",426],"}",["T_WHITESPACE","\n\n    ",427],["T_DOC_COMMENT","\/**\n     * Encode an ASCII string to UTF-32odd1\n     *\n     * @internal\n     * @param string $ascii\n     * @return string\n     *\/",429],["T_WHITESPACE","\n    ",435],["T_PUBLIC","public",436],["T_WHITESPACE"," ",436],["T_STATIC","static",436],["T_WHITESPACE"," ",436],["T_FUNCTION","function",436],["T_WHITESPACE"," ",436],["T_STRING","encodeToUTF32odd1",436],"(",["T_VARIABLE","$ascii",436],")",["T_WHITESPACE","\n    ",436],"{",["T_WHITESPACE","\n        ",437],["T_RETURN","return",438],["T_WHITESPACE"," ",438],["T_STRING","preg_replace",438],"(",["T_CONSTANT_ENCAPSED_STRING","'\/(.)\/'",438],",",["T_WHITESPACE"," ",438],["T_CONSTANT_ENCAPSED_STRING","\"\\0\\\\1\\0\\0\"",438],",",["T_WHITESPACE"," ",438],["T_VARIABLE","$ascii",438],")",";",["T_WHITESPACE","\n    ",438],"}",["T_WHITESPACE","\n\n    ",439],["T_DOC_COMMENT","\/**\n     * Encode an ASCII string to UTF-32odd2\n     *\n     * @internal\n     * @param string $ascii\n     * @return string\n     *\/",441],["T_WHITESPACE","\n    ",447],["T_PUBLIC","public",448],["T_WHITESPACE"," ",448],["T_STATIC","static",448],["T_WHITESPACE"," ",448],["T_FUNCTION","function",448],["T_WHITESPACE"," ",448],["T_STRING","encodeToUTF32odd2",448],"(",["T_VARIABLE","$ascii",448],")",["T_WHITESPACE","\n    ",448],"{",["T_WHITESPACE","\n        ",449],["T_RETURN","return",450],["T_WHITESPACE"," ",450],["T_STRING","preg_replace",450],"(",["T_CONSTANT_ENCAPSED_STRING","'\/(.)\/'",450],",",["T_WHITESPACE"," ",450],["T_CONSTANT_ENCAPSED_STRING","\"\\0\\0\\\\1\\0\"",450],",",["T_WHITESPACE"," ",450],["T_VARIABLE","$ascii",450],")",";",["T_WHITESPACE","\n    ",450],"}",["T_WHITESPACE","\n\n    ",451],["T_DOC_COMMENT","\/**\n     * Encode an ASCII string to UTF-16BE\n     *\n     * @internal\n     * @param string $ascii\n     * @return string\n     *\/",453],["T_WHITESPACE","\n    ",459],["T_PUBLIC","public",460],["T_WHITESPACE"," ",460],["T_STATIC","static",460],["T_WHITESPACE"," ",460],["T_FUNCTION","function",460],["T_WHITESPACE"," ",460],["T_STRING","encodeToUTF16BE",460],"(",["T_VARIABLE","$ascii",460],")",["T_WHITESPACE","\n    ",460],"{",["T_WHITESPACE","\n        ",461],["T_RETURN","return",462],["T_WHITESPACE"," ",462],["T_STRING","preg_replace",462],"(",["T_CONSTANT_ENCAPSED_STRING","'\/(.)\/'",462],",",["T_WHITESPACE"," ",462],["T_CONSTANT_ENCAPSED_STRING","\"\\0\\\\1\"",462],",",["T_WHITESPACE"," ",462],["T_VARIABLE","$ascii",462],")",";",["T_WHITESPACE","\n    ",462],"}",["T_WHITESPACE","\n\n    ",463],["T_DOC_COMMENT","\/**\n     * Encode an ASCII string to UTF-16LE\n     *\n     * @internal\n     * @param string $ascii\n     * @return string\n     *\/",465],["T_WHITESPACE","\n    ",471],["T_PUBLIC","public",472],["T_WHITESPACE"," ",472],["T_STATIC","static",472],["T_WHITESPACE"," ",472],["T_FUNCTION","function",472],["T_WHITESPACE"," ",472],["T_STRING","encodeToUTF16LE",472],"(",["T_VARIABLE","$ascii",472],")",["T_WHITESPACE","\n    ",472],"{",["T_WHITESPACE","\n        ",473],["T_RETURN","return",474],["T_WHITESPACE"," ",474],["T_STRING","preg_replace",474],"(",["T_CONSTANT_ENCAPSED_STRING","'\/(.)\/'",474],",",["T_WHITESPACE"," ",474],["T_CONSTANT_ENCAPSED_STRING","\"\\\\1\\0\"",474],",",["T_WHITESPACE"," ",474],["T_VARIABLE","$ascii",474],")",";",["T_WHITESPACE","\n    ",474],"}",["T_WHITESPACE","\n\n    ",475],["T_DOC_COMMENT","\/**\n     * Encode an ASCII string to UTF-8\n     *\n     * @internal\n     * @param string $ascii\n     * @return string\n     *\/",477],["T_WHITESPACE","\n    ",483],["T_PUBLIC","public",484],["T_WHITESPACE"," ",484],["T_STATIC","static",484],["T_WHITESPACE"," ",484],["T_FUNCTION","function",484],["T_WHITESPACE"," ",484],["T_STRING","encodeToUTF8",484],"(",["T_VARIABLE","$ascii",484],")",["T_WHITESPACE","\n    ",484],"{",["T_WHITESPACE","\n        ",485],["T_RETURN","return",486],["T_WHITESPACE"," ",486],["T_VARIABLE","$ascii",486],";",["T_WHITESPACE","\n    ",486],"}",["T_WHITESPACE","\n",487],"}",["T_WHITESPACE","\n",488]]
[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Zend Framework\n *\n * LICENSE\n *\n * This source file is subject to the new BSD license that is bundled\n * with this package in the file LICENSE.txt.\n * It is also available through the world-wide-web at this URL:\n * http:\/\/framework.zend.com\/license\/new-bsd\n * If you did not receive a copy of the license and are unable to\n * obtain it through the world-wide-web, please send an email\n * to license@zend.com so we can send you a copy immediately.\n *\n * @category   Zend\n * @package    Zend_Pdf\n * @copyright  Copyright (c) 2005-2015 Zend Technologies USA Inc. (http:\/\/www.zend.com)\n * @license    http:\/\/framework.zend.com\/license\/new-bsd     New BSD License\n * @version    $Id$\n *\/",2],["T_WHITESPACE","\n\n\n",20],["T_DOC_COMMENT","\/** Zend_Pdf_ElementFactory_Interface *\/",23],["T_WHITESPACE","\n",23],["T_COMMENT","#require_once 'Zend\/Pdf\/ElementFactory\/Interface.php';\n",24],["T_WHITESPACE","\n",25],["T_DOC_COMMENT","\/**\n * PDF element factory.\n * Responsibility is to log PDF changes\n *\n * @package    Zend_Pdf\n * @copyright  Copyright (c) 2005-2015 Zend Technologies USA Inc. (http:\/\/www.zend.com)\n * @license    http:\/\/framework.zend.com\/license\/new-bsd     New BSD License\n *\/",26],["T_WHITESPACE","\n",33],["T_CLASS","class",34],["T_WHITESPACE"," ",34],["T_STRING","Zend_Pdf_ElementFactory",34],["T_WHITESPACE"," ",34],["T_IMPLEMENTS","implements",34],["T_WHITESPACE"," ",34],["T_STRING","Zend_Pdf_ElementFactory_Interface",34],["T_WHITESPACE","\n",34],"{",["T_WHITESPACE","\n    ",35],["T_DOC_COMMENT","\/**\n     * List of the modified objects.\n     * Also contains new and removed objects\n     *\n     * Array: ojbectNumber => Zend_Pdf_Element_Object\n     *\n     * @var array\n     *\/",36],["T_WHITESPACE","\n    ",43],["T_PRIVATE","private",44],["T_WHITESPACE"," ",44],["T_VARIABLE","$_modifiedObjects",44],["T_WHITESPACE"," ",44],"=",["T_WHITESPACE"," ",44],["T_ARRAY","array",44],"(",")",";",["T_WHITESPACE","\n\n    ",44],["T_DOC_COMMENT","\/**\n     * List of the removed objects\n     *\n     * Array: ojbectNumber => Zend_Pdf_Element_Object\n     *\n     * @var SplObjectStorage\n     *\/",46],["T_WHITESPACE","\n    ",52],["T_PRIVATE","private",53],["T_WHITESPACE"," ",53],["T_VARIABLE","$_removedObjects",53],";",["T_WHITESPACE","\n\n    ",53],["T_DOC_COMMENT","\/**\n     * List of registered objects.\n     * Used for resources clean up when factory is destroyed.\n     *\n     * Array of Zend_Pdf_Element objects\n     *\n     * @var array\n     *\/",55],["T_WHITESPACE","\n    ",62],["T_PRIVATE","private",63],["T_WHITESPACE"," ",63],["T_VARIABLE","$_registeredObjects",63],["T_WHITESPACE"," ",63],"=",["T_WHITESPACE"," ",63],["T_ARRAY","array",63],"(",")",";",["T_WHITESPACE","\n\n    ",63],["T_DOC_COMMENT","\/**\n     * PDF object counter.\n     * Actually it's an object number for new PDF object\n     *\n     * @var integer\n     *\/",65],["T_WHITESPACE","\n    ",70],["T_PRIVATE","private",71],["T_WHITESPACE"," ",71],["T_VARIABLE","$_objectCount",71],";",["T_WHITESPACE","\n\n\n    ",71],["T_DOC_COMMENT","\/**\n     * List of the attached object factories.\n     * Array of Zend_Pdf_ElementFactory_Interface objects\n     *\n     * @var array\n     *\/",74],["T_WHITESPACE","\n    ",79],["T_PRIVATE","private",80],["T_WHITESPACE"," ",80],["T_VARIABLE","$_attachedFactories",80],["T_WHITESPACE"," ",80],"=",["T_WHITESPACE"," ",80],["T_ARRAY","array",80],"(",")",";",["T_WHITESPACE","\n\n\n    ",80],["T_DOC_COMMENT","\/**\n     * Factory internal id\n     *\n     * @var integer\n     *\/",83],["T_WHITESPACE","\n    ",87],["T_PRIVATE","private",88],["T_WHITESPACE"," ",88],["T_VARIABLE","$_factoryId",88],";",["T_WHITESPACE","\n\n    ",88],["T_DOC_COMMENT","\/**\n     * Identity, used for factory id generation\n     *\n     * @var integer\n     *\/",90],["T_WHITESPACE","\n    ",94],["T_PRIVATE","private",95],["T_WHITESPACE"," ",95],["T_STATIC","static",95],["T_WHITESPACE"," ",95],["T_VARIABLE","$_identity",95],["T_WHITESPACE"," ",95],"=",["T_WHITESPACE"," ",95],["T_LNUMBER","0",95],";",["T_WHITESPACE","\n\n\n    ",95],["T_DOC_COMMENT","\/**\n     * Internal cache to save calculated shifts\n     *\n     * @var array\n     *\/",98],["T_WHITESPACE","\n    ",102],["T_PRIVATE","private",103],["T_WHITESPACE"," ",103],["T_VARIABLE","$_shiftCalculationCache",103],["T_WHITESPACE"," ",103],"=",["T_WHITESPACE"," ",103],["T_ARRAY","array",103],"(",")",";",["T_WHITESPACE","\n\n\n    ",103],["T_DOC_COMMENT","\/**\n     * Object constructor\n     *\n     * @param integer $objCount\n     *\/",106],["T_WHITESPACE","\n    ",110],["T_PUBLIC","public",111],["T_WHITESPACE"," ",111],["T_FUNCTION","function",111],["T_WHITESPACE"," ",111],["T_STRING","__construct",111],"(",["T_VARIABLE","$objCount",111],")",["T_WHITESPACE","\n    ",111],"{",["T_WHITESPACE","\n        ",112],["T_VARIABLE","$this",113],["T_OBJECT_OPERATOR","->",113],["T_STRING","_objectCount",113],["T_WHITESPACE","    ",113],"=",["T_WHITESPACE"," ",113],["T_INT_CAST","(int)",113],["T_VARIABLE","$objCount",113],";",["T_WHITESPACE","\n        ",113],["T_VARIABLE","$this",114],["T_OBJECT_OPERATOR","->",114],["T_STRING","_factoryId",114],["T_WHITESPACE","      ",114],"=",["T_WHITESPACE"," ",114],["T_STRING","self",114],["T_DOUBLE_COLON","::",114],["T_VARIABLE","$_identity",114],["T_INC","++",114],";",["T_WHITESPACE","\n        ",114],["T_VARIABLE","$this",115],["T_OBJECT_OPERATOR","->",115],["T_STRING","_removedObjects",115],["T_WHITESPACE"," ",115],"=",["T_WHITESPACE"," ",115],["T_NEW","new",115],["T_WHITESPACE"," ",115],["T_STRING","SplObjectStorage",115],"(",")",";",["T_WHITESPACE","\n    ",115],"}",["T_WHITESPACE","\n\n\n    ",116],["T_DOC_COMMENT","\/**\n     * Get factory\n     *\n     * @return Zend_Pdf_ElementFactory_Interface\n     *\/",119],["T_WHITESPACE","\n    ",123],["T_PUBLIC","public",124],["T_WHITESPACE"," ",124],["T_FUNCTION","function",124],["T_WHITESPACE"," ",124],["T_STRING","getFactory",124],"(",")",["T_WHITESPACE","\n    ",124],"{",["T_WHITESPACE","\n        ",125],["T_RETURN","return",126],["T_WHITESPACE"," ",126],["T_VARIABLE","$this",126],";",["T_WHITESPACE","\n    ",126],"}",["T_WHITESPACE","\n\n    ",127],["T_DOC_COMMENT","\/**\n     * Factory generator\n     *\n     * @param integer $objCount\n     * @return Zend_Pdf_ElementFactory_Interface\n     *\/",129],["T_WHITESPACE","\n    ",134],["T_STATIC","static",135],["T_WHITESPACE"," ",135],["T_PUBLIC","public",135],["T_WHITESPACE"," ",135],["T_FUNCTION","function",135],["T_WHITESPACE"," ",135],["T_STRING","createFactory",135],"(",["T_VARIABLE","$objCount",135],")",["T_WHITESPACE","\n    ",135],"{",["T_WHITESPACE","\n        ",136],["T_COMMENT","#require_once 'Zend\/Pdf\/ElementFactory\/Proxy.php';\n",137],["T_WHITESPACE","        ",138],["T_RETURN","return",138],["T_WHITESPACE"," ",138],["T_NEW","new",138],["T_WHITESPACE"," ",138],["T_STRING","Zend_Pdf_ElementFactory_Proxy",138],"(",["T_NEW","new",138],["T_WHITESPACE"," ",138],["T_STRING","Zend_Pdf_ElementFactory",138],"(",["T_VARIABLE","$objCount",138],")",")",";",["T_WHITESPACE","\n    ",138],"}",["T_WHITESPACE","\n\n    ",139],["T_DOC_COMMENT","\/**\n     * Close factory and clean-up resources\n     *\n     * @internal\n     *\/",141],["T_WHITESPACE","\n    ",145],["T_PUBLIC","public",146],["T_WHITESPACE"," ",146],["T_FUNCTION","function",146],["T_WHITESPACE"," ",146],["T_STRING","close",146],"(",")",["T_WHITESPACE","\n    ",146],"{",["T_WHITESPACE","\n        ",147],["T_VARIABLE","$this",148],["T_OBJECT_OPERATOR","->",148],["T_STRING","_modifiedObjects",148],["T_WHITESPACE","   ",148],"=",["T_WHITESPACE"," ",148],["T_STRING","null",148],";",["T_WHITESPACE","\n        ",148],["T_VARIABLE","$this",149],["T_OBJECT_OPERATOR","->",149],["T_STRING","_removedObjects",149],["T_WHITESPACE","    ",149],"=",["T_WHITESPACE"," ",149],["T_STRING","null",149],";",["T_WHITESPACE","\n        ",149],["T_VARIABLE","$this",150],["T_OBJECT_OPERATOR","->",150],["T_STRING","_attachedFactories",150],["T_WHITESPACE"," ",150],"=",["T_WHITESPACE"," ",150],["T_STRING","null",150],";",["T_WHITESPACE","\n\n        ",150],["T_FOREACH","foreach",152],["T_WHITESPACE"," ",152],"(",["T_VARIABLE","$this",152],["T_OBJECT_OPERATOR","->",152],["T_STRING","_registeredObjects",152],["T_WHITESPACE"," ",152],["T_AS","as",152],["T_WHITESPACE"," ",152],["T_VARIABLE","$obj",152],")",["T_WHITESPACE"," ",152],"{",["T_WHITESPACE","\n            ",152],["T_VARIABLE","$obj",153],["T_OBJECT_OPERATOR","->",153],["T_STRING","cleanUp",153],"(",")",";",["T_WHITESPACE","\n        ",153],"}",["T_WHITESPACE","\n        ",154],["T_VARIABLE","$this",155],["T_OBJECT_OPERATOR","->",155],["T_STRING","_registeredObjects",155],["T_WHITESPACE"," ",155],"=",["T_WHITESPACE"," ",155],["T_STRING","null",155],";",["T_WHITESPACE","\n    ",155],"}",["T_WHITESPACE","\n\n    ",156],["T_DOC_COMMENT","\/**\n     * Get source factory object\n     *\n     * @return Zend_Pdf_ElementFactory\n     *\/",158],["T_WHITESPACE","\n    ",162],["T_PUBLIC","public",163],["T_WHITESPACE"," ",163],["T_FUNCTION","function",163],["T_WHITESPACE"," ",163],["T_STRING","resolve",163],"(",")",["T_WHITESPACE","\n    ",163],"{",["T_WHITESPACE","\n        ",164],["T_RETURN","return",165],["T_WHITESPACE"," ",165],["T_VARIABLE","$this",165],";",["T_WHITESPACE","\n    ",165],"}",["T_WHITESPACE","\n\n    ",166],["T_DOC_COMMENT","\/**\n     * Get factory ID\n     *\n     * @return integer\n     *\/",168],["T_WHITESPACE","\n    ",172],["T_PUBLIC","public",173],["T_WHITESPACE"," ",173],["T_FUNCTION","function",173],["T_WHITESPACE"," ",173],["T_STRING","getId",173],"(",")",["T_WHITESPACE","\n    ",173],"{",["T_WHITESPACE","\n        ",174],["T_RETURN","return",175],["T_WHITESPACE"," ",175],["T_VARIABLE","$this",175],["T_OBJECT_OPERATOR","->",175],["T_STRING","_factoryId",175],";",["T_WHITESPACE","\n    ",175],"}",["T_WHITESPACE","\n\n    ",176],["T_DOC_COMMENT","\/**\n     * Set object counter\n     *\n     * @param integer $objCount\n     *\/",178],["T_WHITESPACE","\n    ",182],["T_PUBLIC","public",183],["T_WHITESPACE"," ",183],["T_FUNCTION","function",183],["T_WHITESPACE"," ",183],["T_STRING","setObjectCount",183],"(",["T_VARIABLE","$objCount",183],")",["T_WHITESPACE","\n    ",183],"{",["T_WHITESPACE","\n        ",184],["T_VARIABLE","$this",185],["T_OBJECT_OPERATOR","->",185],["T_STRING","_objectCount",185],["T_WHITESPACE"," ",185],"=",["T_WHITESPACE"," ",185],["T_INT_CAST","(int)",185],["T_VARIABLE","$objCount",185],";",["T_WHITESPACE","\n    ",185],"}",["T_WHITESPACE","\n\n    ",186],["T_DOC_COMMENT","\/**\n     * Get object counter\n     *\n     * @return integer\n     *\/",188],["T_WHITESPACE","\n    ",192],["T_PUBLIC","public",193],["T_WHITESPACE"," ",193],["T_FUNCTION","function",193],["T_WHITESPACE"," ",193],["T_STRING","getObjectCount",193],"(",")",["T_WHITESPACE","\n    ",193],"{",["T_WHITESPACE","\n        ",194],["T_VARIABLE","$count",195],["T_WHITESPACE"," ",195],"=",["T_WHITESPACE"," ",195],["T_VARIABLE","$this",195],["T_OBJECT_OPERATOR","->",195],["T_STRING","_objectCount",195],";",["T_WHITESPACE","\n\n        ",195],["T_FOREACH","foreach",197],["T_WHITESPACE"," ",197],"(",["T_VARIABLE","$this",197],["T_OBJECT_OPERATOR","->",197],["T_STRING","_attachedFactories",197],["T_WHITESPACE"," ",197],["T_AS","as",197],["T_WHITESPACE"," ",197],["T_VARIABLE","$attached",197],")",["T_WHITESPACE"," ",197],"{",["T_WHITESPACE","\n            ",197],["T_VARIABLE","$count",198],["T_WHITESPACE"," ",198],["T_PLUS_EQUAL","+=",198],["T_WHITESPACE"," ",198],["T_VARIABLE","$attached",198],["T_OBJECT_OPERATOR","->",198],["T_STRING","getObjectCount",198],"(",")",["T_WHITESPACE"," ",198],"-",["T_WHITESPACE"," ",198],["T_LNUMBER","1",198],";",["T_WHITESPACE"," ",198],["T_COMMENT","\/\/ -1 as \"0\" object is a special case and shared between factories\n",198],["T_WHITESPACE","        ",199],"}",["T_WHITESPACE","\n\n        ",199],["T_RETURN","return",201],["T_WHITESPACE"," ",201],["T_VARIABLE","$count",201],";",["T_WHITESPACE","\n    ",201],"}",["T_WHITESPACE","\n\n\n    ",202],["T_DOC_COMMENT","\/**\n     * Attach factory to the current;\n     *\n     * @param Zend_Pdf_ElementFactory_Interface $factory\n     *\/",205],["T_WHITESPACE","\n    ",209],["T_PUBLIC","public",210],["T_WHITESPACE"," ",210],["T_FUNCTION","function",210],["T_WHITESPACE"," ",210],["T_STRING","attach",210],"(",["T_STRING","Zend_Pdf_ElementFactory_Interface",210],["T_WHITESPACE"," ",210],["T_VARIABLE","$factory",210],")",["T_WHITESPACE","\n    ",210],"{",["T_WHITESPACE","\n        ",211],["T_IF","if",212],["T_WHITESPACE"," ",212],"(",["T_WHITESPACE"," ",212],["T_VARIABLE","$factory",212],["T_WHITESPACE"," ",212],["T_IS_IDENTICAL","===",212],["T_WHITESPACE"," ",212],["T_VARIABLE","$this",212],["T_WHITESPACE"," ",212],["T_BOOLEAN_OR","||",212],["T_WHITESPACE"," ",212],["T_ISSET","isset",212],"(",["T_VARIABLE","$this",212],["T_OBJECT_OPERATOR","->",212],["T_STRING","_attachedFactories",212],"[",["T_VARIABLE","$factory",212],["T_OBJECT_OPERATOR","->",212],["T_STRING","getId",212],"(",")","]",")",")",["T_WHITESPACE"," ",212],"{",["T_WHITESPACE","\n            ",212],["T_DOC_COMMENT","\/**\n             * Don't attach factory twice.\n             * We do not check recusively because of nature of attach operation\n             * (Pages are always attached to the Documents, Fonts are always attached\n             * to the pages even if pages already use Document level object factory and so on)\n             *\/",213],["T_WHITESPACE","\n            ",218],["T_RETURN","return",219],";",["T_WHITESPACE","\n        ",219],"}",["T_WHITESPACE","\n\n        ",220],["T_VARIABLE","$this",222],["T_OBJECT_OPERATOR","->",222],["T_STRING","_attachedFactories",222],"[",["T_VARIABLE","$factory",222],["T_OBJECT_OPERATOR","->",222],["T_STRING","getId",222],"(",")","]",["T_WHITESPACE"," ",222],"=",["T_WHITESPACE"," ",222],["T_VARIABLE","$factory",222],";",["T_WHITESPACE","\n    ",222],"}",["T_WHITESPACE","\n\n\n    ",223],["T_DOC_COMMENT","\/**\n     * Calculate object enumeration shift.\n     *\n     * @param Zend_Pdf_ElementFactory_Interface $factory\n     * @return integer\n     *\/",226],["T_WHITESPACE","\n    ",231],["T_PUBLIC","public",232],["T_WHITESPACE"," ",232],["T_FUNCTION","function",232],["T_WHITESPACE"," ",232],["T_STRING","calculateShift",232],"(",["T_STRING","Zend_Pdf_ElementFactory_Interface",232],["T_WHITESPACE"," ",232],["T_VARIABLE","$factory",232],")",["T_WHITESPACE","\n    ",232],"{",["T_WHITESPACE","\n        ",233],["T_IF","if",234],["T_WHITESPACE"," ",234],"(",["T_VARIABLE","$factory",234],["T_WHITESPACE"," ",234],["T_IS_IDENTICAL","===",234],["T_WHITESPACE"," ",234],["T_VARIABLE","$this",234],")",["T_WHITESPACE"," ",234],"{",["T_WHITESPACE","\n            ",234],["T_RETURN","return",235],["T_WHITESPACE"," ",235],["T_LNUMBER","0",235],";",["T_WHITESPACE","\n        ",235],"}",["T_WHITESPACE","\n\n        ",236],["T_IF","if",238],["T_WHITESPACE"," ",238],"(",["T_ISSET","isset",238],"(",["T_VARIABLE","$this",238],["T_OBJECT_OPERATOR","->",238],["T_STRING","_shiftCalculationCache",238],"[",["T_VARIABLE","$factory",238],["T_OBJECT_OPERATOR","->",238],["T_STRING","_factoryId",238],"]",")",")",["T_WHITESPACE"," ",238],"{",["T_WHITESPACE","\n            ",238],["T_RETURN","return",239],["T_WHITESPACE"," ",239],["T_VARIABLE","$this",239],["T_OBJECT_OPERATOR","->",239],["T_STRING","_shiftCalculationCache",239],"[",["T_VARIABLE","$factory",239],["T_OBJECT_OPERATOR","->",239],["T_STRING","_factoryId",239],"]",";",["T_WHITESPACE","\n        ",239],"}",["T_WHITESPACE","\n\n        ",240],["T_VARIABLE","$shift",242],["T_WHITESPACE"," ",242],"=",["T_WHITESPACE"," ",242],["T_VARIABLE","$this",242],["T_OBJECT_OPERATOR","->",242],["T_STRING","_objectCount",242],["T_WHITESPACE"," ",242],"-",["T_WHITESPACE"," ",242],["T_LNUMBER","1",242],";",["T_WHITESPACE","\n\n        ",242],["T_FOREACH","foreach",244],["T_WHITESPACE"," ",244],"(",["T_VARIABLE","$this",244],["T_OBJECT_OPERATOR","->",244],["T_STRING","_attachedFactories",244],["T_WHITESPACE"," ",244],["T_AS","as",244],["T_WHITESPACE"," ",244],["T_VARIABLE","$subFactory",244],")",["T_WHITESPACE"," ",244],"{",["T_WHITESPACE","\n            ",244],["T_VARIABLE","$subFactoryShift",245],["T_WHITESPACE"," ",245],"=",["T_WHITESPACE"," ",245],["T_VARIABLE","$subFactory",245],["T_OBJECT_OPERATOR","->",245],["T_STRING","calculateShift",245],"(",["T_VARIABLE","$factory",245],")",";",["T_WHITESPACE","\n\n            ",245],["T_IF","if",247],["T_WHITESPACE"," ",247],"(",["T_VARIABLE","$subFactoryShift",247],["T_WHITESPACE"," ",247],["T_IS_NOT_EQUAL","!=",247],["T_WHITESPACE"," ",247],"-",["T_LNUMBER","1",247],")",["T_WHITESPACE"," ",247],"{",["T_WHITESPACE","\n                ",247],["T_COMMENT","\/\/ context found\n",248],["T_WHITESPACE","                ",249],["T_VARIABLE","$this",249],["T_OBJECT_OPERATOR","->",249],["T_STRING","_shiftCalculationCache",249],"[",["T_VARIABLE","$factory",249],["T_OBJECT_OPERATOR","->",249],["T_STRING","_factoryId",249],"]",["T_WHITESPACE"," ",249],"=",["T_WHITESPACE"," ",249],["T_VARIABLE","$shift",249],["T_WHITESPACE"," ",249],"+",["T_WHITESPACE"," ",249],["T_VARIABLE","$subFactoryShift",249],";",["T_WHITESPACE","\n                ",249],["T_RETURN","return",250],["T_WHITESPACE"," ",250],["T_VARIABLE","$shift",250],["T_WHITESPACE"," ",250],"+",["T_WHITESPACE"," ",250],["T_VARIABLE","$subFactoryShift",250],";",["T_WHITESPACE","\n            ",250],"}",["T_WHITESPACE"," ",251],["T_ELSE","else",251],["T_WHITESPACE"," ",251],"{",["T_WHITESPACE","\n                ",251],["T_VARIABLE","$shift",252],["T_WHITESPACE"," ",252],["T_PLUS_EQUAL","+=",252],["T_WHITESPACE"," ",252],["T_VARIABLE","$subFactory",252],["T_OBJECT_OPERATOR","->",252],["T_STRING","getObjectCount",252],"(",")","-",["T_LNUMBER","1",252],";",["T_WHITESPACE","\n            ",252],"}",["T_WHITESPACE","\n        ",253],"}",["T_WHITESPACE","\n\n        ",254],["T_VARIABLE","$this",256],["T_OBJECT_OPERATOR","->",256],["T_STRING","_shiftCalculationCache",256],"[",["T_VARIABLE","$factory",256],["T_OBJECT_OPERATOR","->",256],["T_STRING","_factoryId",256],"]",["T_WHITESPACE"," ",256],"=",["T_WHITESPACE"," ",256],"-",["T_LNUMBER","1",256],";",["T_WHITESPACE","\n        ",256],["T_RETURN","return",257],["T_WHITESPACE"," ",257],"-",["T_LNUMBER","1",257],";",["T_WHITESPACE","\n    ",257],"}",["T_WHITESPACE","\n\n    ",258],["T_DOC_COMMENT","\/**\n     * Clean enumeration shift cache.\n     * Has to be used after PDF render operation to let followed updates be correct.\n     *\/",260],["T_WHITESPACE","\n    ",263],["T_PUBLIC","public",264],["T_WHITESPACE"," ",264],["T_FUNCTION","function",264],["T_WHITESPACE"," ",264],["T_STRING","cleanEnumerationShiftCache",264],"(",")",["T_WHITESPACE","\n    ",264],"{",["T_WHITESPACE","\n        ",265],["T_VARIABLE","$this",266],["T_OBJECT_OPERATOR","->",266],["T_STRING","_shiftCalculationCache",266],["T_WHITESPACE"," ",266],"=",["T_WHITESPACE"," ",266],["T_ARRAY","array",266],"(",")",";",["T_WHITESPACE","\n\n        ",266],["T_FOREACH","foreach",268],["T_WHITESPACE"," ",268],"(",["T_VARIABLE","$this",268],["T_OBJECT_OPERATOR","->",268],["T_STRING","_attachedFactories",268],["T_WHITESPACE"," ",268],["T_AS","as",268],["T_WHITESPACE"," ",268],["T_VARIABLE","$attached",268],")",["T_WHITESPACE"," ",268],"{",["T_WHITESPACE","\n            ",268],["T_VARIABLE","$attached",269],["T_OBJECT_OPERATOR","->",269],["T_STRING","cleanEnumerationShiftCache",269],"(",")",";",["T_WHITESPACE","\n        ",269],"}",["T_WHITESPACE","\n    ",270],"}",["T_WHITESPACE","\n\n    ",271],["T_DOC_COMMENT","\/**\n     * Retrive object enumeration shift.\n     *\n     * @param Zend_Pdf_ElementFactory_Interface $factory\n     * @return integer\n     * @throws Zend_Pdf_Exception\n     *\/",273],["T_WHITESPACE","\n    ",279],["T_PUBLIC","public",280],["T_WHITESPACE"," ",280],["T_FUNCTION","function",280],["T_WHITESPACE"," ",280],["T_STRING","getEnumerationShift",280],"(",["T_STRING","Zend_Pdf_ElementFactory_Interface",280],["T_WHITESPACE"," ",280],["T_VARIABLE","$factory",280],")",["T_WHITESPACE","\n    ",280],"{",["T_WHITESPACE","\n        ",281],["T_IF","if",282],["T_WHITESPACE"," ",282],"(","(",["T_VARIABLE","$shift",282],["T_WHITESPACE"," ",282],"=",["T_WHITESPACE"," ",282],["T_VARIABLE","$this",282],["T_OBJECT_OPERATOR","->",282],["T_STRING","calculateShift",282],"(",["T_VARIABLE","$factory",282],")",")",["T_WHITESPACE"," ",282],["T_IS_EQUAL","==",282],["T_WHITESPACE"," ",282],"-",["T_LNUMBER","1",282],")",["T_WHITESPACE"," ",282],"{",["T_WHITESPACE","\n            ",282],["T_COMMENT","#require_once 'Zend\/Pdf\/Exception.php';\n",283],["T_WHITESPACE","            ",284],["T_THROW","throw",284],["T_WHITESPACE"," ",284],["T_NEW","new",284],["T_WHITESPACE"," ",284],["T_STRING","Zend_Pdf_Exception",284],"(",["T_CONSTANT_ENCAPSED_STRING","'Wrong object context'",284],")",";",["T_WHITESPACE","\n        ",284],"}",["T_WHITESPACE","\n\n        ",285],["T_RETURN","return",287],["T_WHITESPACE"," ",287],["T_VARIABLE","$shift",287],";",["T_WHITESPACE","\n    ",287],"}",["T_WHITESPACE","\n\n    ",288],["T_DOC_COMMENT","\/**\n     * Mark object as modified in context of current factory.\n     *\n     * @param Zend_Pdf_Element_Object $obj\n     * @throws Zend_Pdf_Exception\n     *\/",290],["T_WHITESPACE","\n    ",295],["T_PUBLIC","public",296],["T_WHITESPACE"," ",296],["T_FUNCTION","function",296],["T_WHITESPACE"," ",296],["T_STRING","markAsModified",296],"(",["T_STRING","Zend_Pdf_Element_Object",296],["T_WHITESPACE"," ",296],["T_VARIABLE","$obj",296],")",["T_WHITESPACE","\n    ",296],"{",["T_WHITESPACE","\n        ",297],["T_IF","if",298],["T_WHITESPACE"," ",298],"(",["T_VARIABLE","$obj",298],["T_OBJECT_OPERATOR","->",298],["T_STRING","getFactory",298],"(",")",["T_WHITESPACE"," ",298],["T_IS_NOT_IDENTICAL","!==",298],["T_WHITESPACE"," ",298],["T_VARIABLE","$this",298],")",["T_WHITESPACE"," ",298],"{",["T_WHITESPACE","\n            ",298],["T_COMMENT","#require_once 'Zend\/Pdf\/Exception.php';\n",299],["T_WHITESPACE","            ",300],["T_THROW","throw",300],["T_WHITESPACE"," ",300],["T_NEW","new",300],["T_WHITESPACE"," ",300],["T_STRING","Zend_Pdf_Exception",300],"(",["T_CONSTANT_ENCAPSED_STRING","'Object is not generated by this factory'",300],")",";",["T_WHITESPACE","\n        ",300],"}",["T_WHITESPACE","\n\n        ",301],["T_VARIABLE","$this",303],["T_OBJECT_OPERATOR","->",303],["T_STRING","_modifiedObjects",303],"[",["T_VARIABLE","$obj",303],["T_OBJECT_OPERATOR","->",303],["T_STRING","getObjNum",303],"(",")","]",["T_WHITESPACE"," ",303],"=",["T_WHITESPACE"," ",303],["T_VARIABLE","$obj",303],";",["T_WHITESPACE","\n    ",303],"}",["T_WHITESPACE","\n\n\n    ",304],["T_DOC_COMMENT","\/**\n     * Remove object in context of current factory.\n     *\n     * @param Zend_Pdf_Element_Object $obj\n     * @throws Zend_Pdf_Exception\n     *\/",307],["T_WHITESPACE","\n    ",312],["T_PUBLIC","public",313],["T_WHITESPACE"," ",313],["T_FUNCTION","function",313],["T_WHITESPACE"," ",313],["T_STRING","remove",313],"(",["T_STRING","Zend_Pdf_Element_Object",313],["T_WHITESPACE"," ",313],["T_VARIABLE","$obj",313],")",["T_WHITESPACE","\n    ",313],"{",["T_WHITESPACE","\n        ",314],["T_IF","if",315],["T_WHITESPACE"," ",315],"(","!",["T_VARIABLE","$obj",315],["T_OBJECT_OPERATOR","->",315],["T_STRING","compareFactory",315],"(",["T_VARIABLE","$this",315],")",")",["T_WHITESPACE"," ",315],"{",["T_WHITESPACE","\n            ",315],["T_COMMENT","#require_once 'Zend\/Pdf\/Exception.php';\n",316],["T_WHITESPACE","            ",317],["T_THROW","throw",317],["T_WHITESPACE"," ",317],["T_NEW","new",317],["T_WHITESPACE"," ",317],["T_STRING","Zend_Pdf_Exception",317],"(",["T_CONSTANT_ENCAPSED_STRING","'Object is not generated by this factory'",317],")",";",["T_WHITESPACE","\n        ",317],"}",["T_WHITESPACE","\n\n        ",318],["T_VARIABLE","$this",320],["T_OBJECT_OPERATOR","->",320],["T_STRING","_modifiedObjects",320],"[",["T_VARIABLE","$obj",320],["T_OBJECT_OPERATOR","->",320],["T_STRING","getObjNum",320],"(",")","]",["T_WHITESPACE"," ",320],"=",["T_WHITESPACE"," ",320],["T_VARIABLE","$obj",320],";",["T_WHITESPACE","\n        ",320],["T_VARIABLE","$this",321],["T_OBJECT_OPERATOR","->",321],["T_STRING","_removedObjects",321],["T_OBJECT_OPERATOR","->",321],["T_STRING","attach",321],"(",["T_VARIABLE","$obj",321],")",";",["T_WHITESPACE","\n    ",321],"}",["T_WHITESPACE","\n\n\n    ",322],["T_DOC_COMMENT","\/**\n     * Generate new Zend_Pdf_Element_Object\n     *\n     * @todo Reusage of the freed object. It's not a support of new feature, but only improvement.\n     *\n     * @param Zend_Pdf_Element $objectValue\n     * @return Zend_Pdf_Element_Object\n     *\/",325],["T_WHITESPACE","\n    ",332],["T_PUBLIC","public",333],["T_WHITESPACE"," ",333],["T_FUNCTION","function",333],["T_WHITESPACE"," ",333],["T_STRING","newObject",333],"(",["T_STRING","Zend_Pdf_Element",333],["T_WHITESPACE"," ",333],["T_VARIABLE","$objectValue",333],")",["T_WHITESPACE","\n    ",333],"{",["T_WHITESPACE","\n        ",334],["T_COMMENT","#require_once 'Zend\/Pdf\/Element\/Object.php';\n",335],["T_WHITESPACE","        ",336],["T_VARIABLE","$obj",336],["T_WHITESPACE"," ",336],"=",["T_WHITESPACE"," ",336],["T_NEW","new",336],["T_WHITESPACE"," ",336],["T_STRING","Zend_Pdf_Element_Object",336],"(",["T_VARIABLE","$objectValue",336],",",["T_WHITESPACE"," ",336],["T_VARIABLE","$this",336],["T_OBJECT_OPERATOR","->",336],["T_STRING","_objectCount",336],["T_INC","++",336],",",["T_WHITESPACE"," ",336],["T_LNUMBER","0",336],",",["T_WHITESPACE"," ",336],["T_VARIABLE","$this",336],")",";",["T_WHITESPACE","\n        ",336],["T_VARIABLE","$this",337],["T_OBJECT_OPERATOR","->",337],["T_STRING","_modifiedObjects",337],"[",["T_VARIABLE","$obj",337],["T_OBJECT_OPERATOR","->",337],["T_STRING","getObjNum",337],"(",")","]",["T_WHITESPACE"," ",337],"=",["T_WHITESPACE"," ",337],["T_VARIABLE","$obj",337],";",["T_WHITESPACE","\n        ",337],["T_RETURN","return",338],["T_WHITESPACE"," ",338],["T_VARIABLE","$obj",338],";",["T_WHITESPACE","\n    ",338],"}",["T_WHITESPACE","\n\n    ",339],["T_DOC_COMMENT","\/**\n     * Generate new Zend_Pdf_Element_Object_Stream\n     *\n     * @todo Reusage of the freed object. It's not a support of new feature, but only improvement.\n     *\n     * @param mixed $objectValue\n     * @return Zend_Pdf_Element_Object_Stream\n     *\/",341],["T_WHITESPACE","\n    ",348],["T_PUBLIC","public",349],["T_WHITESPACE"," ",349],["T_FUNCTION","function",349],["T_WHITESPACE"," ",349],["T_STRING","newStreamObject",349],"(",["T_VARIABLE","$streamValue",349],")",["T_WHITESPACE","\n    ",349],"{",["T_WHITESPACE","\n        ",350],["T_COMMENT","#require_once 'Zend\/Pdf\/Element\/Object\/Stream.php';\n",351],["T_WHITESPACE","        ",352],["T_VARIABLE","$obj",352],["T_WHITESPACE"," ",352],"=",["T_WHITESPACE"," ",352],["T_NEW","new",352],["T_WHITESPACE"," ",352],["T_STRING","Zend_Pdf_Element_Object_Stream",352],"(",["T_VARIABLE","$streamValue",352],",",["T_WHITESPACE"," ",352],["T_VARIABLE","$this",352],["T_OBJECT_OPERATOR","->",352],["T_STRING","_objectCount",352],["T_INC","++",352],",",["T_WHITESPACE"," ",352],["T_LNUMBER","0",352],",",["T_WHITESPACE"," ",352],["T_VARIABLE","$this",352],")",";",["T_WHITESPACE","\n        ",352],["T_VARIABLE","$this",353],["T_OBJECT_OPERATOR","->",353],["T_STRING","_modifiedObjects",353],"[",["T_VARIABLE","$obj",353],["T_OBJECT_OPERATOR","->",353],["T_STRING","getObjNum",353],"(",")","]",["T_WHITESPACE"," ",353],"=",["T_WHITESPACE"," ",353],["T_VARIABLE","$obj",353],";",["T_WHITESPACE","\n        ",353],["T_RETURN","return",354],["T_WHITESPACE"," ",354],["T_VARIABLE","$obj",354],";",["T_WHITESPACE","\n    ",354],"}",["T_WHITESPACE","\n\n\n    ",355],["T_DOC_COMMENT","\/**\n     * Enumerate modified objects.\n     * Returns array of Zend_Pdf_UpdateInfoContainer\n     *\n     * @param Zend_Pdf_ElementFactory_Interface $rootFactory\n     * @return array\n     *\/",358],["T_WHITESPACE","\n    ",364],["T_PUBLIC","public",365],["T_WHITESPACE"," ",365],["T_FUNCTION","function",365],["T_WHITESPACE"," ",365],["T_STRING","listModifiedObjects",365],"(",["T_VARIABLE","$rootFactory",365],["T_WHITESPACE"," ",365],"=",["T_WHITESPACE"," ",365],["T_STRING","null",365],")",["T_WHITESPACE","\n    ",365],"{",["T_WHITESPACE","\n        ",366],["T_IF","if",367],["T_WHITESPACE"," ",367],"(",["T_VARIABLE","$rootFactory",367],["T_WHITESPACE"," ",367],["T_IS_EQUAL","==",367],["T_WHITESPACE"," ",367],["T_STRING","null",367],")",["T_WHITESPACE"," ",367],"{",["T_WHITESPACE","\n            ",367],["T_VARIABLE","$rootFactory",368],["T_WHITESPACE"," ",368],"=",["T_WHITESPACE"," ",368],["T_VARIABLE","$this",368],";",["T_WHITESPACE","\n            ",368],["T_VARIABLE","$shift",369],["T_WHITESPACE"," ",369],"=",["T_WHITESPACE"," ",369],["T_LNUMBER","0",369],";",["T_WHITESPACE","\n        ",369],"}",["T_WHITESPACE"," ",370],["T_ELSE","else",370],["T_WHITESPACE"," ",370],"{",["T_WHITESPACE","\n            ",370],["T_VARIABLE","$shift",371],["T_WHITESPACE"," ",371],"=",["T_WHITESPACE"," ",371],["T_VARIABLE","$rootFactory",371],["T_OBJECT_OPERATOR","->",371],["T_STRING","getEnumerationShift",371],"(",["T_VARIABLE","$this",371],")",";",["T_WHITESPACE","\n        ",371],"}",["T_WHITESPACE","\n\n        ",372],["T_STRING","ksort",374],"(",["T_VARIABLE","$this",374],["T_OBJECT_OPERATOR","->",374],["T_STRING","_modifiedObjects",374],")",";",["T_WHITESPACE","\n\n        ",374],["T_VARIABLE","$result",376],["T_WHITESPACE"," ",376],"=",["T_WHITESPACE"," ",376],["T_ARRAY","array",376],"(",")",";",["T_WHITESPACE","\n        ",376],["T_COMMENT","#require_once 'Zend\/Pdf\/UpdateInfoContainer.php';\n",377],["T_WHITESPACE","        ",378],["T_FOREACH","foreach",378],["T_WHITESPACE"," ",378],"(",["T_VARIABLE","$this",378],["T_OBJECT_OPERATOR","->",378],["T_STRING","_modifiedObjects",378],["T_WHITESPACE"," ",378],["T_AS","as",378],["T_WHITESPACE"," ",378],["T_VARIABLE","$objNum",378],["T_WHITESPACE"," ",378],["T_DOUBLE_ARROW","=>",378],["T_WHITESPACE"," ",378],["T_VARIABLE","$obj",378],")",["T_WHITESPACE"," ",378],"{",["T_WHITESPACE","\n            ",378],["T_IF","if",379],["T_WHITESPACE"," ",379],"(",["T_VARIABLE","$this",379],["T_OBJECT_OPERATOR","->",379],["T_STRING","_removedObjects",379],["T_OBJECT_OPERATOR","->",379],["T_STRING","contains",379],"(",["T_VARIABLE","$obj",379],")",")",["T_WHITESPACE"," ",379],"{",["T_WHITESPACE","\n                            ",379],["T_VARIABLE","$result",380],"[",["T_VARIABLE","$objNum",380],"+",["T_VARIABLE","$shift",380],"]",["T_WHITESPACE"," ",380],"=",["T_WHITESPACE"," ",380],["T_NEW","new",380],["T_WHITESPACE"," ",380],["T_STRING","Zend_Pdf_UpdateInfoContainer",380],"(",["T_VARIABLE","$objNum",380],["T_WHITESPACE"," ",380],"+",["T_WHITESPACE"," ",380],["T_VARIABLE","$shift",380],",",["T_WHITESPACE","\n                                                                           ",380],["T_VARIABLE","$obj",381],["T_OBJECT_OPERATOR","->",381],["T_STRING","getGenNum",381],"(",")","+",["T_LNUMBER","1",381],",",["T_WHITESPACE","\n                                                                           ",381],["T_STRING","true",382],")",";",["T_WHITESPACE","\n            ",382],"}",["T_WHITESPACE"," ",383],["T_ELSE","else",383],["T_WHITESPACE"," ",383],"{",["T_WHITESPACE","\n                ",383],["T_VARIABLE","$result",384],"[",["T_VARIABLE","$objNum",384],"+",["T_VARIABLE","$shift",384],"]",["T_WHITESPACE"," ",384],"=",["T_WHITESPACE"," ",384],["T_NEW","new",384],["T_WHITESPACE"," ",384],["T_STRING","Zend_Pdf_UpdateInfoContainer",384],"(",["T_VARIABLE","$objNum",384],["T_WHITESPACE"," ",384],"+",["T_WHITESPACE"," ",384],["T_VARIABLE","$shift",384],",",["T_WHITESPACE","\n                                                                           ",384],["T_VARIABLE","$obj",385],["T_OBJECT_OPERATOR","->",385],["T_STRING","getGenNum",385],"(",")",",",["T_WHITESPACE","\n                                                                           ",385],["T_STRING","false",386],",",["T_WHITESPACE","\n                                                                           ",386],["T_VARIABLE","$obj",387],["T_OBJECT_OPERATOR","->",387],["T_STRING","dump",387],"(",["T_VARIABLE","$rootFactory",387],")",")",";",["T_WHITESPACE","\n            ",387],"}",["T_WHITESPACE","\n        ",388],"}",["T_WHITESPACE","\n\n        ",389],["T_FOREACH","foreach",391],["T_WHITESPACE"," ",391],"(",["T_VARIABLE","$this",391],["T_OBJECT_OPERATOR","->",391],["T_STRING","_attachedFactories",391],["T_WHITESPACE"," ",391],["T_AS","as",391],["T_WHITESPACE"," ",391],["T_VARIABLE","$factory",391],")",["T_WHITESPACE"," ",391],"{",["T_WHITESPACE","\n            ",391],["T_VARIABLE","$result",392],["T_WHITESPACE"," ",392],["T_PLUS_EQUAL","+=",392],["T_WHITESPACE"," ",392],["T_VARIABLE","$factory",392],["T_OBJECT_OPERATOR","->",392],["T_STRING","listModifiedObjects",392],"(",["T_VARIABLE","$rootFactory",392],")",";",["T_WHITESPACE","\n        ",392],"}",["T_WHITESPACE","\n\n        ",393],["T_RETURN","return",395],["T_WHITESPACE"," ",395],["T_VARIABLE","$result",395],";",["T_WHITESPACE","\n    ",395],"}",["T_WHITESPACE","\n\n    ",396],["T_DOC_COMMENT","\/**\n     * Register object in the factory\n     *\n     * It's used to clear \"parent object\" referencies when factory is closed and clean up resources\n     *\n     * @param string $refString\n     * @param Zend_Pdf_Element_Object $obj\n     *\/",398],["T_WHITESPACE","\n    ",405],["T_PUBLIC","public",406],["T_WHITESPACE"," ",406],["T_FUNCTION","function",406],["T_WHITESPACE"," ",406],["T_STRING","registerObject",406],"(",["T_STRING","Zend_Pdf_Element_Object",406],["T_WHITESPACE"," ",406],["T_VARIABLE","$obj",406],",",["T_WHITESPACE"," ",406],["T_VARIABLE","$refString",406],")",["T_WHITESPACE","\n    ",406],"{",["T_WHITESPACE","\n        ",407],["T_VARIABLE","$this",408],["T_OBJECT_OPERATOR","->",408],["T_STRING","_registeredObjects",408],"[",["T_VARIABLE","$refString",408],"]",["T_WHITESPACE"," ",408],"=",["T_WHITESPACE"," ",408],["T_VARIABLE","$obj",408],";",["T_WHITESPACE","\n    ",408],"}",["T_WHITESPACE","\n\n    ",409],["T_DOC_COMMENT","\/**\n     * Fetch object specified by reference\n     *\n     * @param string $refString\n     * @return Zend_Pdf_Element_Object|null\n     *\/",411],["T_WHITESPACE","\n    ",416],["T_PUBLIC","public",417],["T_WHITESPACE"," ",417],["T_FUNCTION","function",417],["T_WHITESPACE"," ",417],["T_STRING","fetchObject",417],"(",["T_VARIABLE","$refString",417],")",["T_WHITESPACE","\n    ",417],"{",["T_WHITESPACE","\n        ",418],["T_IF","if",419],["T_WHITESPACE"," ",419],"(","!",["T_ISSET","isset",419],"(",["T_VARIABLE","$this",419],["T_OBJECT_OPERATOR","->",419],["T_STRING","_registeredObjects",419],"[",["T_VARIABLE","$refString",419],"]",")",")",["T_WHITESPACE"," ",419],"{",["T_WHITESPACE","\n            ",419],["T_RETURN","return",420],["T_WHITESPACE"," ",420],["T_STRING","null",420],";",["T_WHITESPACE","\n        ",420],"}",["T_WHITESPACE","\n        ",421],["T_RETURN","return",422],["T_WHITESPACE"," ",422],["T_VARIABLE","$this",422],["T_OBJECT_OPERATOR","->",422],["T_STRING","_registeredObjects",422],"[",["T_VARIABLE","$refString",422],"]",";",["T_WHITESPACE","\n    ",422],"}",["T_WHITESPACE","\n\n\n    ",423],["T_DOC_COMMENT","\/**\n     * Check if PDF file was modified\n     *\n     * @return boolean\n     *\/",426],["T_WHITESPACE","\n    ",430],["T_PUBLIC","public",431],["T_WHITESPACE"," ",431],["T_FUNCTION","function",431],["T_WHITESPACE"," ",431],["T_STRING","isModified",431],"(",")",["T_WHITESPACE","\n    ",431],"{",["T_WHITESPACE","\n        ",432],["T_IF","if",433],["T_WHITESPACE"," ",433],"(",["T_STRING","count",433],"(",["T_VARIABLE","$this",433],["T_OBJECT_OPERATOR","->",433],["T_STRING","_modifiedObjects",433],")",["T_WHITESPACE"," ",433],["T_IS_NOT_EQUAL","!=",433],["T_WHITESPACE"," ",433],["T_LNUMBER","0",433],")",["T_WHITESPACE"," ",433],"{",["T_WHITESPACE","\n            ",433],["T_RETURN","return",434],["T_WHITESPACE"," ",434],["T_STRING","true",434],";",["T_WHITESPACE","\n        ",434],"}",["T_WHITESPACE","\n\n        ",435],["T_FOREACH","foreach",437],["T_WHITESPACE"," ",437],"(",["T_VARIABLE","$this",437],["T_OBJECT_OPERATOR","->",437],["T_STRING","_attachedFactories",437],["T_WHITESPACE"," ",437],["T_AS","as",437],["T_WHITESPACE"," ",437],["T_VARIABLE","$subFactory",437],")",["T_WHITESPACE"," ",437],"{",["T_WHITESPACE","\n            ",437],["T_IF","if",438],["T_WHITESPACE"," ",438],"(",["T_VARIABLE","$subFactory",438],["T_OBJECT_OPERATOR","->",438],["T_STRING","isModified",438],"(",")",")",["T_WHITESPACE"," ",438],"{",["T_WHITESPACE","\n                ",438],["T_RETURN","return",439],["T_WHITESPACE"," ",439],["T_STRING","true",439],";",["T_WHITESPACE","\n            ",439],"}",["T_WHITESPACE","\n        ",440],"}",["T_WHITESPACE","\n\n        ",441],["T_RETURN","return",443],["T_WHITESPACE"," ",443],["T_STRING","false",443],";",["T_WHITESPACE","\n    ",443],"}",["T_WHITESPACE","\n",444],"}",["T_WHITESPACE","\n\n",445]]
[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Zend Framework\n *\n * LICENSE\n *\n * This source file is subject to the new BSD license that is bundled\n * with this package in the file LICENSE.txt.\n * It is also available through the world-wide-web at this URL:\n * http:\/\/framework.zend.com\/license\/new-bsd\n * If you did not receive a copy of the license and are unable to\n * obtain it through the world-wide-web, please send an email\n * to license@zend.com so we can send you a copy immediately.\n *\n * @category   Zend\n * @package    Zend_Pdf\n * @subpackage FileParser\n * @copyright  Copyright (c) 2005-2015 Zend Technologies USA Inc. (http:\/\/www.zend.com)\n * @license    http:\/\/framework.zend.com\/license\/new-bsd     New BSD License\n * @version    $Id$\n *\/",2],["T_WHITESPACE","\n\n",21],["T_DOC_COMMENT","\/** @see Zend_Pdf_FileParser_Image *\/",23],["T_WHITESPACE","\n",23],["T_COMMENT","#require_once 'Zend\/Pdf\/FileParser\/Image.php';\n",24],["T_WHITESPACE","\n\n",25],["T_DOC_COMMENT","\/**\n * Abstract base class for Image file parsers.\n *\n * @package    Zend_Pdf\n * @subpackage FileParser\n * @copyright  Copyright (c) 2005-2015 Zend Technologies USA Inc. (http:\/\/www.zend.com)\n * @license    http:\/\/framework.zend.com\/license\/new-bsd     New BSD License\n *\/",27],["T_WHITESPACE","\n",34],["T_CLASS","class",35],["T_WHITESPACE"," ",35],["T_STRING","Zend_Pdf_FileParser_Image_Png",35],["T_WHITESPACE"," ",35],["T_EXTENDS","extends",35],["T_WHITESPACE"," ",35],["T_STRING","Zend_Pdf_FileParser_Image",35],["T_WHITESPACE","\n",35],"{",["T_WHITESPACE","\n     ",36],["T_PROTECTED","protected",37],["T_WHITESPACE"," ",37],["T_VARIABLE","$_isPNG",37],";",["T_WHITESPACE","\n     ",37],["T_PROTECTED","protected",38],["T_WHITESPACE"," ",38],["T_VARIABLE","$_width",38],";",["T_WHITESPACE","\n     ",38],["T_PROTECTED","protected",39],["T_WHITESPACE"," ",39],["T_VARIABLE","$_height",39],";",["T_WHITESPACE","\n     ",39],["T_PROTECTED","protected",40],["T_WHITESPACE"," ",40],["T_VARIABLE","$_bits",40],";",["T_WHITESPACE","\n     ",40],["T_PROTECTED","protected",41],["T_WHITESPACE"," ",41],["T_VARIABLE","$_color",41],";",["T_WHITESPACE","\n     ",41],["T_PROTECTED","protected",42],["T_WHITESPACE"," ",42],["T_VARIABLE","$_compression",42],";",["T_WHITESPACE","\n     ",42],["T_PROTECTED","protected",43],["T_WHITESPACE"," ",43],["T_VARIABLE","$_preFilter",43],";",["T_WHITESPACE","\n     ",43],["T_PROTECTED","protected",44],["T_WHITESPACE"," ",44],["T_VARIABLE","$_interlacing",44],";",["T_WHITESPACE","\n\n     ",44],["T_PROTECTED","protected",46],["T_WHITESPACE"," ",46],["T_VARIABLE","$_imageData",46],";",["T_WHITESPACE","\n     ",46],["T_PROTECTED","protected",47],["T_WHITESPACE"," ",47],["T_VARIABLE","$_paletteData",47],";",["T_WHITESPACE","\n     ",47],["T_PROTECTED","protected",48],["T_WHITESPACE"," ",48],["T_VARIABLE","$_transparencyData",48],";",["T_WHITESPACE","\n\n  ",48],["T_COMMENT","\/**** Public Interface ****\/",50],["T_WHITESPACE","\n\n     ",50],["T_PUBLIC","public",52],["T_WHITESPACE"," ",52],["T_FUNCTION","function",52],["T_WHITESPACE"," ",52],["T_STRING","getWidth",52],"(",")",["T_WHITESPACE"," ",52],"{",["T_WHITESPACE","\n          ",52],["T_IF","if",53],"(","!",["T_VARIABLE","$this",53],["T_OBJECT_OPERATOR","->",53],["T_STRING","_isParsed",53],")",["T_WHITESPACE"," ",53],"{",["T_WHITESPACE","\n               ",53],["T_VARIABLE","$this",54],["T_OBJECT_OPERATOR","->",54],["T_STRING","parse",54],"(",")",";",["T_WHITESPACE","\n          ",54],"}",["T_WHITESPACE","\n          ",55],["T_RETURN","return",56],["T_WHITESPACE"," ",56],["T_VARIABLE","$this",56],["T_OBJECT_OPERATOR","->",56],["T_STRING","_width",56],";",["T_WHITESPACE","\n     ",56],"}",["T_WHITESPACE","\n\n     ",57],["T_PUBLIC","public",59],["T_WHITESPACE"," ",59],["T_FUNCTION","function",59],["T_WHITESPACE"," ",59],["T_STRING","getHeight",59],"(",")",["T_WHITESPACE"," ",59],"{",["T_WHITESPACE","\n          ",59],["T_IF","if",60],"(","!",["T_VARIABLE","$this",60],["T_OBJECT_OPERATOR","->",60],["T_STRING","_isParsed",60],")",["T_WHITESPACE"," ",60],"{",["T_WHITESPACE","\n               ",60],["T_VARIABLE","$this",61],["T_OBJECT_OPERATOR","->",61],["T_STRING","parse",61],"(",")",";",["T_WHITESPACE","\n          ",61],"}",["T_WHITESPACE","\n          ",62],["T_RETURN","return",63],["T_WHITESPACE"," ",63],["T_VARIABLE","$this",63],["T_OBJECT_OPERATOR","->",63],["T_STRING","_width",63],";",["T_WHITESPACE","\n     ",63],"}",["T_WHITESPACE","\n\n     ",64],["T_PUBLIC","public",66],["T_WHITESPACE"," ",66],["T_FUNCTION","function",66],["T_WHITESPACE"," ",66],["T_STRING","getBitDepth",66],"(",")",["T_WHITESPACE"," ",66],"{",["T_WHITESPACE","\n          ",66],["T_IF","if",67],"(","!",["T_VARIABLE","$this",67],["T_OBJECT_OPERATOR","->",67],["T_STRING","_isParsed",67],")",["T_WHITESPACE"," ",67],"{",["T_WHITESPACE","\n               ",67],["T_VARIABLE","$this",68],["T_OBJECT_OPERATOR","->",68],["T_STRING","parse",68],"(",")",";",["T_WHITESPACE","\n          ",68],"}",["T_WHITESPACE","\n          ",69],["T_RETURN","return",70],["T_WHITESPACE"," ",70],["T_VARIABLE","$this",70],["T_OBJECT_OPERATOR","->",70],["T_STRING","_bits",70],";",["T_WHITESPACE","\n     ",70],"}",["T_WHITESPACE","\n\n     ",71],["T_PUBLIC","public",73],["T_WHITESPACE"," ",73],["T_FUNCTION","function",73],["T_WHITESPACE"," ",73],["T_STRING","getColorSpace",73],"(",")",["T_WHITESPACE"," ",73],"{",["T_WHITESPACE","\n          ",73],["T_IF","if",74],"(","!",["T_VARIABLE","$this",74],["T_OBJECT_OPERATOR","->",74],["T_STRING","_isParsed",74],")",["T_WHITESPACE"," ",74],"{",["T_WHITESPACE","\n               ",74],["T_VARIABLE","$this",75],["T_OBJECT_OPERATOR","->",75],["T_STRING","parse",75],"(",")",";",["T_WHITESPACE","\n          ",75],"}",["T_WHITESPACE","\n          ",76],["T_RETURN","return",77],["T_WHITESPACE"," ",77],["T_VARIABLE","$this",77],["T_OBJECT_OPERATOR","->",77],["T_STRING","_color",77],";",["T_WHITESPACE","\n     ",77],"}",["T_WHITESPACE","\n\n     ",78],["T_PUBLIC","public",80],["T_WHITESPACE"," ",80],["T_FUNCTION","function",80],["T_WHITESPACE"," ",80],["T_STRING","getCompressionStrategy",80],"(",")",["T_WHITESPACE"," ",80],"{",["T_WHITESPACE","\n          ",80],["T_IF","if",81],"(","!",["T_VARIABLE","$this",81],["T_OBJECT_OPERATOR","->",81],["T_STRING","_isParsed",81],")",["T_WHITESPACE"," ",81],"{",["T_WHITESPACE","\n               ",81],["T_VARIABLE","$this",82],["T_OBJECT_OPERATOR","->",82],["T_STRING","parse",82],"(",")",";",["T_WHITESPACE","\n          ",82],"}",["T_WHITESPACE","\n          ",83],["T_RETURN","return",84],["T_WHITESPACE"," ",84],["T_VARIABLE","$this",84],["T_OBJECT_OPERATOR","->",84],["T_STRING","_compression",84],";",["T_WHITESPACE","\n     ",84],"}",["T_WHITESPACE","\n\n     ",85],["T_PUBLIC","public",87],["T_WHITESPACE"," ",87],["T_FUNCTION","function",87],["T_WHITESPACE"," ",87],["T_STRING","getPaethFilter",87],"(",")",["T_WHITESPACE"," ",87],"{",["T_WHITESPACE","\n          ",87],["T_IF","if",88],"(","!",["T_VARIABLE","$this",88],["T_OBJECT_OPERATOR","->",88],["T_STRING","_isParsed",88],")",["T_WHITESPACE"," ",88],"{",["T_WHITESPACE","\n               ",88],["T_VARIABLE","$this",89],["T_OBJECT_OPERATOR","->",89],["T_STRING","parse",89],"(",")",";",["T_WHITESPACE","\n          ",89],"}",["T_WHITESPACE","\n          ",90],["T_RETURN","return",91],["T_WHITESPACE"," ",91],["T_VARIABLE","$this",91],["T_OBJECT_OPERATOR","->",91],["T_STRING","_preFilter",91],";",["T_WHITESPACE","\n     ",91],"}",["T_WHITESPACE","\n\n     ",92],["T_PUBLIC","public",94],["T_WHITESPACE"," ",94],["T_FUNCTION","function",94],["T_WHITESPACE"," ",94],["T_STRING","getInterlacingMode",94],"(",")",["T_WHITESPACE"," ",94],"{",["T_WHITESPACE","\n          ",94],["T_IF","if",95],"(","!",["T_VARIABLE","$this",95],["T_OBJECT_OPERATOR","->",95],["T_STRING","_isParsed",95],")",["T_WHITESPACE"," ",95],"{",["T_WHITESPACE","\n               ",95],["T_VARIABLE","$this",96],["T_OBJECT_OPERATOR","->",96],["T_STRING","parse",96],"(",")",";",["T_WHITESPACE","\n          ",96],"}",["T_WHITESPACE","\n          ",97],["T_RETURN","return",98],["T_WHITESPACE"," ",98],["T_VARIABLE","$this",98],["T_OBJECT_OPERATOR","->",98],["T_STRING","_interlacing",98],";",["T_WHITESPACE","\n     ",98],"}",["T_WHITESPACE","\n\n     ",99],["T_PUBLIC","public",101],["T_WHITESPACE"," ",101],["T_FUNCTION","function",101],["T_WHITESPACE"," ",101],["T_STRING","getRawImageData",101],"(",")",["T_WHITESPACE"," ",101],"{",["T_WHITESPACE","\n          ",101],["T_IF","if",102],"(","!",["T_VARIABLE","$this",102],["T_OBJECT_OPERATOR","->",102],["T_STRING","_isParsed",102],")",["T_WHITESPACE"," ",102],"{",["T_WHITESPACE","\n               ",102],["T_VARIABLE","$this",103],["T_OBJECT_OPERATOR","->",103],["T_STRING","parse",103],"(",")",";",["T_WHITESPACE","\n          ",103],"}",["T_WHITESPACE","\n          ",104],["T_RETURN","return",105],["T_WHITESPACE"," ",105],["T_VARIABLE","$this",105],["T_OBJECT_OPERATOR","->",105],["T_STRING","_imageData",105],";",["T_WHITESPACE","\n     ",105],"}",["T_WHITESPACE","\n\n     ",106],["T_PUBLIC","public",108],["T_WHITESPACE"," ",108],["T_FUNCTION","function",108],["T_WHITESPACE"," ",108],["T_STRING","getRawPaletteData",108],"(",")",["T_WHITESPACE"," ",108],"{",["T_WHITESPACE","\n          ",108],["T_IF","if",109],"(","!",["T_VARIABLE","$this",109],["T_OBJECT_OPERATOR","->",109],["T_STRING","_isParsed",109],")",["T_WHITESPACE"," ",109],"{",["T_WHITESPACE","\n               ",109],["T_VARIABLE","$this",110],["T_OBJECT_OPERATOR","->",110],["T_STRING","parse",110],"(",")",";",["T_WHITESPACE","\n          ",110],"}",["T_WHITESPACE","\n          ",111],["T_RETURN","return",112],["T_WHITESPACE"," ",112],["T_VARIABLE","$this",112],["T_OBJECT_OPERATOR","->",112],["T_STRING","_paletteData",112],";",["T_WHITESPACE","\n     ",112],"}",["T_WHITESPACE","\n\n     ",113],["T_PUBLIC","public",115],["T_WHITESPACE"," ",115],["T_FUNCTION","function",115],["T_WHITESPACE"," ",115],["T_STRING","getRawTransparencyData",115],"(",")",["T_WHITESPACE"," ",115],"{",["T_WHITESPACE","\n          ",115],["T_IF","if",116],"(","!",["T_VARIABLE","$this",116],["T_OBJECT_OPERATOR","->",116],["T_STRING","_isParsed",116],")",["T_WHITESPACE"," ",116],"{",["T_WHITESPACE","\n               ",116],["T_VARIABLE","$this",117],["T_OBJECT_OPERATOR","->",117],["T_STRING","parse",117],"(",")",";",["T_WHITESPACE","\n          ",117],"}",["T_WHITESPACE","\n          ",118],["T_RETURN","return",119],["T_WHITESPACE"," ",119],["T_VARIABLE","$this",119],["T_OBJECT_OPERATOR","->",119],["T_STRING","_transparencyData",119],";",["T_WHITESPACE","\n     ",119],"}",["T_WHITESPACE","\n\n  ",120],["T_COMMENT","\/* Semi-Concrete Class Implementation *\/",122],["T_WHITESPACE","\n\n    ",122],["T_DOC_COMMENT","\/**\n     * Verifies that the image file is in the expected format.\n     *\n     * @throws Zend_Pdf_Exception\n     *\/",124],["T_WHITESPACE","\n    ",128],["T_PUBLIC","public",129],["T_WHITESPACE"," ",129],["T_FUNCTION","function",129],["T_WHITESPACE"," ",129],["T_STRING","screen",129],"(",")",["T_WHITESPACE","\n    ",129],"{",["T_WHITESPACE","\n         ",130],["T_IF","if",131],["T_WHITESPACE"," ",131],"(",["T_VARIABLE","$this",131],["T_OBJECT_OPERATOR","->",131],["T_STRING","_isScreened",131],")",["T_WHITESPACE"," ",131],"{",["T_WHITESPACE","\n             ",131],["T_RETURN","return",132],";",["T_WHITESPACE","\n         ",132],"}",["T_WHITESPACE","\n         ",133],["T_RETURN","return",134],["T_WHITESPACE"," ",134],["T_VARIABLE","$this",134],["T_OBJECT_OPERATOR","->",134],["T_STRING","_checkSignature",134],"(",")",";",["T_WHITESPACE","\n    ",134],"}",["T_WHITESPACE","\n\n    ",135],["T_DOC_COMMENT","\/**\n     * Reads and parses the image data from the file on disk.\n     *\n     * @throws Zend_Pdf_Exception\n     *\/",137],["T_WHITESPACE","\n    ",141],["T_PUBLIC","public",142],["T_WHITESPACE"," ",142],["T_FUNCTION","function",142],["T_WHITESPACE"," ",142],["T_STRING","parse",142],"(",")",["T_WHITESPACE","\n    ",142],"{",["T_WHITESPACE","\n        ",143],["T_IF","if",144],["T_WHITESPACE"," ",144],"(",["T_VARIABLE","$this",144],["T_OBJECT_OPERATOR","->",144],["T_STRING","_isParsed",144],")",["T_WHITESPACE"," ",144],"{",["T_WHITESPACE","\n            ",144],["T_RETURN","return",145],";",["T_WHITESPACE","\n        ",145],"}",["T_WHITESPACE","\n\n        ",146],["T_COMMENT","\/* Screen the font file first, if it hasn't been done yet.\n        *\/",148],["T_WHITESPACE","\n        ",149],["T_VARIABLE","$this",150],["T_OBJECT_OPERATOR","->",150],["T_STRING","screen",150],"(",")",";",["T_WHITESPACE","\n\n        ",150],["T_VARIABLE","$this",152],["T_OBJECT_OPERATOR","->",152],["T_STRING","_parseIHDRChunk",152],"(",")",";",["T_WHITESPACE","\n        ",152],["T_VARIABLE","$this",153],["T_OBJECT_OPERATOR","->",153],["T_STRING","_parseChunks",153],"(",")",";",["T_WHITESPACE","\n    ",153],"}",["T_WHITESPACE","\n\n\n    ",154],["T_PROTECTED","protected",157],["T_WHITESPACE"," ",157],["T_FUNCTION","function",157],["T_WHITESPACE"," ",157],["T_STRING","_parseSignature",157],"(",")",["T_WHITESPACE"," ",157],"{",["T_WHITESPACE","\n         ",157],["T_VARIABLE","$this",158],["T_OBJECT_OPERATOR","->",158],["T_STRING","moveToOffset",158],"(",["T_LNUMBER","1",158],")",";",["T_WHITESPACE"," ",158],["T_COMMENT","\/\/Skip the first byte (%)\n",158],["T_WHITESPACE","         ",159],["T_IF","if",159],"(",["T_CONSTANT_ENCAPSED_STRING","'PNG'",159],["T_WHITESPACE"," ",159],["T_IS_NOT_EQUAL","!=",159],["T_WHITESPACE"," ",159],["T_VARIABLE","$this",159],["T_OBJECT_OPERATOR","->",159],["T_STRING","readBytes",159],"(",["T_LNUMBER","3",159],")",")",["T_WHITESPACE"," ",159],"{",["T_WHITESPACE","\n               ",159],["T_VARIABLE","$this",160],["T_OBJECT_OPERATOR","->",160],["T_STRING","_isPNG",160],["T_WHITESPACE"," ",160],"=",["T_WHITESPACE"," ",160],["T_STRING","false",160],";",["T_WHITESPACE","\n         ",160],"}",["T_WHITESPACE"," ",161],["T_ELSE","else",161],["T_WHITESPACE"," ",161],"{",["T_WHITESPACE","\n               ",161],["T_VARIABLE","$this",162],["T_OBJECT_OPERATOR","->",162],["T_STRING","_isPNG",162],["T_WHITESPACE"," ",162],"=",["T_WHITESPACE"," ",162],["T_STRING","true",162],";",["T_WHITESPACE","\n         ",162],"}",["T_WHITESPACE","\n    ",163],"}",["T_WHITESPACE","\n\n    ",164],["T_PROTECTED","protected",166],["T_WHITESPACE"," ",166],["T_FUNCTION","function",166],["T_WHITESPACE"," ",166],["T_STRING","_checkSignature",166],"(",")",["T_WHITESPACE"," ",166],"{",["T_WHITESPACE","\n         ",166],["T_IF","if",167],"(","!",["T_ISSET","isset",167],"(",["T_VARIABLE","$this",167],["T_OBJECT_OPERATOR","->",167],["T_STRING","_isPNG",167],")",")",["T_WHITESPACE"," ",167],"{",["T_WHITESPACE","\n              ",167],["T_VARIABLE","$this",168],["T_OBJECT_OPERATOR","->",168],["T_STRING","_parseSignature",168],"(",")",";",["T_WHITESPACE","\n         ",168],"}",["T_WHITESPACE","\n         ",169],["T_RETURN","return",170],["T_WHITESPACE"," ",170],["T_VARIABLE","$this",170],["T_OBJECT_OPERATOR","->",170],["T_STRING","_isPNG",170],";",["T_WHITESPACE","\n    ",170],"}",["T_WHITESPACE","\n\n    ",171],["T_PROTECTED","protected",173],["T_WHITESPACE"," ",173],["T_FUNCTION","function",173],["T_WHITESPACE"," ",173],["T_STRING","_parseChunks",173],"(",")",["T_WHITESPACE"," ",173],"{",["T_WHITESPACE","\n         ",173],["T_VARIABLE","$this",174],["T_OBJECT_OPERATOR","->",174],["T_STRING","moveToOffset",174],"(",["T_LNUMBER","33",174],")",";",["T_WHITESPACE"," ",174],["T_COMMENT","\/\/Variable chunks start at the end of IHDR\n",174],["T_WHITESPACE","\n         ",175],["T_COMMENT","\/\/Start processing chunks. If there are no more bytes to read parsing is complete.\n",176],["T_WHITESPACE","         ",177],["T_VARIABLE","$size",177],["T_WHITESPACE"," ",177],"=",["T_WHITESPACE"," ",177],["T_VARIABLE","$this",177],["T_OBJECT_OPERATOR","->",177],["T_STRING","getSize",177],"(",")",";",["T_WHITESPACE","\n         ",177],["T_WHILE","while",178],"(",["T_VARIABLE","$size",178],["T_WHITESPACE"," ",178],"-",["T_WHITESPACE"," ",178],["T_VARIABLE","$this",178],["T_OBJECT_OPERATOR","->",178],["T_STRING","getOffset",178],"(",")",["T_WHITESPACE"," ",178],["T_IS_GREATER_OR_EQUAL",">=",178],["T_WHITESPACE"," ",178],["T_LNUMBER","8",178],")",["T_WHITESPACE"," ",178],"{",["T_WHITESPACE","\n              ",178],["T_VARIABLE","$chunkLength",179],["T_WHITESPACE"," ",179],"=",["T_WHITESPACE"," ",179],["T_VARIABLE","$this",179],["T_OBJECT_OPERATOR","->",179],["T_STRING","readUInt",179],"(",["T_LNUMBER","4",179],")",";",["T_WHITESPACE","\n              ",179],["T_IF","if",180],"(",["T_VARIABLE","$chunkLength",180],["T_WHITESPACE"," ",180],"<",["T_WHITESPACE"," ",180],["T_LNUMBER","0",180],["T_WHITESPACE"," ",180],["T_BOOLEAN_OR","||",180],["T_WHITESPACE"," ",180],"(",["T_VARIABLE","$chunkLength",180],["T_WHITESPACE"," ",180],"+",["T_WHITESPACE"," ",180],["T_VARIABLE","$this",180],["T_OBJECT_OPERATOR","->",180],["T_STRING","getOffset",180],"(",")",["T_WHITESPACE"," ",180],"+",["T_WHITESPACE"," ",180],["T_LNUMBER","4",180],")",["T_WHITESPACE"," ",180],">",["T_WHITESPACE"," ",180],["T_VARIABLE","$size",180],")",["T_WHITESPACE"," ",180],"{",["T_WHITESPACE","\n                   ",180],["T_COMMENT","#require_once 'Zend\/Pdf\/Exception.php';\n",181],["T_WHITESPACE","                   ",182],["T_THROW","throw",182],["T_WHITESPACE"," ",182],["T_NEW","new",182],["T_WHITESPACE"," ",182],["T_STRING","Zend_Pdf_Exception",182],"(",["T_CONSTANT_ENCAPSED_STRING","\"PNG Corrupt: Invalid Chunk Size In File.\"",182],")",";",["T_WHITESPACE","\n              ",182],"}",["T_WHITESPACE","\n\n              ",183],["T_VARIABLE","$chunkType",185],["T_WHITESPACE"," ",185],"=",["T_WHITESPACE"," ",185],["T_VARIABLE","$this",185],["T_OBJECT_OPERATOR","->",185],["T_STRING","readBytes",185],"(",["T_LNUMBER","4",185],")",";",["T_WHITESPACE","\n              ",185],["T_VARIABLE","$offset",186],["T_WHITESPACE"," ",186],"=",["T_WHITESPACE"," ",186],["T_VARIABLE","$this",186],["T_OBJECT_OPERATOR","->",186],["T_STRING","getOffset",186],"(",")",";",["T_WHITESPACE","\n\n              ",186],["T_COMMENT","\/\/If we know how to process the chunk, do it here, else ignore the chunk and move on to the next\n",188],["T_WHITESPACE","              ",189],["T_SWITCH","switch",189],"(",["T_VARIABLE","$chunkType",189],")",["T_WHITESPACE"," ",189],"{",["T_WHITESPACE","\n                   ",189],["T_CASE","case",190],["T_WHITESPACE"," ",190],["T_CONSTANT_ENCAPSED_STRING","'IDAT'",190],":",["T_WHITESPACE"," ",190],["T_COMMENT","\/\/ This chunk may appear more than once. It contains the actual image data.\n",190],["T_WHITESPACE","                       ",191],["T_VARIABLE","$this",191],["T_OBJECT_OPERATOR","->",191],["T_STRING","_parseIDATChunk",191],"(",["T_VARIABLE","$offset",191],",",["T_WHITESPACE"," ",191],["T_VARIABLE","$chunkLength",191],")",";",["T_WHITESPACE","\n                       ",191],["T_BREAK","break",192],";",["T_WHITESPACE","\n\n                   ",192],["T_CASE","case",194],["T_WHITESPACE"," ",194],["T_CONSTANT_ENCAPSED_STRING","'PLTE'",194],":",["T_WHITESPACE"," ",194],["T_COMMENT","\/\/ This chunk contains the image palette.\n",194],["T_WHITESPACE","                       ",195],["T_VARIABLE","$this",195],["T_OBJECT_OPERATOR","->",195],["T_STRING","_parsePLTEChunk",195],"(",["T_VARIABLE","$offset",195],",",["T_WHITESPACE"," ",195],["T_VARIABLE","$chunkLength",195],")",";",["T_WHITESPACE","\n                       ",195],["T_BREAK","break",196],";",["T_WHITESPACE","\n\n                   ",196],["T_CASE","case",198],["T_WHITESPACE"," ",198],["T_CONSTANT_ENCAPSED_STRING","'tRNS'",198],":",["T_WHITESPACE"," ",198],["T_COMMENT","\/\/ This chunk contains non-alpha channel transparency data\n",198],["T_WHITESPACE","                       ",199],["T_VARIABLE","$this",199],["T_OBJECT_OPERATOR","->",199],["T_STRING","_parseTRNSChunk",199],"(",["T_VARIABLE","$offset",199],",",["T_WHITESPACE"," ",199],["T_VARIABLE","$chunkLength",199],")",";",["T_WHITESPACE","\n                       ",199],["T_BREAK","break",200],";",["T_WHITESPACE","\n\n                   ",200],["T_CASE","case",202],["T_WHITESPACE"," ",202],["T_CONSTANT_ENCAPSED_STRING","'IEND'",202],":",["T_WHITESPACE","\n                       ",202],["T_BREAK","break",203],["T_WHITESPACE"," ",203],["T_LNUMBER","2",203],";",["T_WHITESPACE"," ",203],["T_COMMENT","\/\/End the loop too\n",203],["T_WHITESPACE","\n                   ",204],["T_COMMENT","\/\/@TODO Implement the rest of the PNG chunks. (There are many not implemented here)\n",205],["T_WHITESPACE","              ",206],"}",["T_WHITESPACE","\n              ",206],["T_IF","if",207],"(",["T_VARIABLE","$offset",207],["T_WHITESPACE"," ",207],"+",["T_WHITESPACE"," ",207],["T_VARIABLE","$chunkLength",207],["T_WHITESPACE"," ",207],"+",["T_WHITESPACE"," ",207],["T_LNUMBER","4",207],["T_WHITESPACE"," ",207],"<",["T_WHITESPACE"," ",207],["T_VARIABLE","$size",207],")",["T_WHITESPACE"," ",207],"{",["T_WHITESPACE","\n                  ",207],["T_VARIABLE","$this",208],["T_OBJECT_OPERATOR","->",208],["T_STRING","moveToOffset",208],"(",["T_VARIABLE","$offset",208],["T_WHITESPACE"," ",208],"+",["T_WHITESPACE"," ",208],["T_VARIABLE","$chunkLength",208],["T_WHITESPACE"," ",208],"+",["T_WHITESPACE"," ",208],["T_LNUMBER","4",208],")",";",["T_WHITESPACE"," ",208],["T_COMMENT","\/\/Skip past the data finalizer. (Don't rely on the parse to leave the offsets correct)\n",208],["T_WHITESPACE","              ",209],"}",["T_WHITESPACE","\n         ",209],"}",["T_WHITESPACE","\n         ",210],["T_IF","if",211],"(",["T_EMPTY","empty",211],"(",["T_VARIABLE","$this",211],["T_OBJECT_OPERATOR","->",211],["T_STRING","_imageData",211],")",")",["T_WHITESPACE"," ",211],"{",["T_WHITESPACE","\n              ",211],["T_COMMENT","#require_once 'Zend\/Pdf\/Exception.php';\n",212],["T_WHITESPACE","              ",213],["T_THROW","throw",213],["T_WHITESPACE"," ",213],["T_NEW","new",213],["T_WHITESPACE"," ",213],["T_STRING","Zend_Pdf_Exception",213],["T_WHITESPACE"," ",213],"(",["T_WHITESPACE"," ",213],["T_CONSTANT_ENCAPSED_STRING","\"This PNG is corrupt. All png must contain IDAT chunks.\"",213],["T_WHITESPACE"," ",213],")",";",["T_WHITESPACE","\n         ",213],"}",["T_WHITESPACE","\n    ",214],"}",["T_WHITESPACE","\n\n    ",215],["T_PROTECTED","protected",217],["T_WHITESPACE"," ",217],["T_FUNCTION","function",217],["T_WHITESPACE"," ",217],["T_STRING","_parseIHDRChunk",217],"(",")",["T_WHITESPACE"," ",217],"{",["T_WHITESPACE","\n         ",217],["T_VARIABLE","$this",218],["T_OBJECT_OPERATOR","->",218],["T_STRING","moveToOffset",218],"(",["T_LNUMBER","12",218],")",";",["T_WHITESPACE"," ",218],["T_COMMENT","\/\/IHDR must always start at offset 12 and run for 17 bytes\n",218],["T_WHITESPACE","         ",219],["T_IF","if",219],"(","!",["T_VARIABLE","$this",219],["T_OBJECT_OPERATOR","->",219],["T_STRING","readBytes",219],"(",["T_LNUMBER","4",219],")",["T_WHITESPACE"," ",219],["T_IS_EQUAL","==",219],["T_WHITESPACE"," ",219],["T_CONSTANT_ENCAPSED_STRING","'IHDR'",219],")",["T_WHITESPACE"," ",219],"{",["T_WHITESPACE","\n              ",219],["T_COMMENT","#require_once 'Zend\/Pdf\/Exception.php';\n",220],["T_WHITESPACE","              ",221],["T_THROW","throw",221],["T_WHITESPACE"," ",221],["T_NEW","new",221],["T_WHITESPACE"," ",221],["T_STRING","Zend_Pdf_Exception",221],"(",["T_WHITESPACE"," ",221],["T_CONSTANT_ENCAPSED_STRING","\"This PNG is corrupt. The first chunk in a PNG file must be IHDR.\"",221],["T_WHITESPACE"," ",221],")",";",["T_WHITESPACE","\n         ",221],"}",["T_WHITESPACE","\n         ",222],["T_VARIABLE","$this",223],["T_OBJECT_OPERATOR","->",223],["T_STRING","_width",223],["T_WHITESPACE"," ",223],"=",["T_WHITESPACE"," ",223],["T_VARIABLE","$this",223],["T_OBJECT_OPERATOR","->",223],["T_STRING","readUInt",223],"(",["T_LNUMBER","4",223],")",";",["T_WHITESPACE","\n         ",223],["T_VARIABLE","$this",224],["T_OBJECT_OPERATOR","->",224],["T_STRING","_height",224],["T_WHITESPACE"," ",224],"=",["T_WHITESPACE"," ",224],["T_VARIABLE","$this",224],["T_OBJECT_OPERATOR","->",224],["T_STRING","readUInt",224],"(",["T_LNUMBER","4",224],")",";",["T_WHITESPACE","\n         ",224],["T_VARIABLE","$this",225],["T_OBJECT_OPERATOR","->",225],["T_STRING","_bits",225],["T_WHITESPACE"," ",225],"=",["T_WHITESPACE"," ",225],["T_VARIABLE","$this",225],["T_OBJECT_OPERATOR","->",225],["T_STRING","readInt",225],"(",["T_LNUMBER","1",225],")",";",["T_WHITESPACE","\n         ",225],["T_VARIABLE","$this",226],["T_OBJECT_OPERATOR","->",226],["T_STRING","_color",226],["T_WHITESPACE"," ",226],"=",["T_WHITESPACE"," ",226],["T_VARIABLE","$this",226],["T_OBJECT_OPERATOR","->",226],["T_STRING","readInt",226],"(",["T_LNUMBER","1",226],")",";",["T_WHITESPACE","\n         ",226],["T_VARIABLE","$this",227],["T_OBJECT_OPERATOR","->",227],["T_STRING","_compression",227],["T_WHITESPACE"," ",227],"=",["T_WHITESPACE"," ",227],["T_VARIABLE","$this",227],["T_OBJECT_OPERATOR","->",227],["T_STRING","readInt",227],"(",["T_LNUMBER","1",227],")",";",["T_WHITESPACE","\n         ",227],["T_VARIABLE","$this",228],["T_OBJECT_OPERATOR","->",228],["T_STRING","_preFilter",228],["T_WHITESPACE"," ",228],"=",["T_WHITESPACE"," ",228],["T_VARIABLE","$this",228],["T_OBJECT_OPERATOR","->",228],["T_STRING","readInt",228],"(",["T_LNUMBER","1",228],")",";",["T_WHITESPACE","\n         ",228],["T_VARIABLE","$this",229],["T_OBJECT_OPERATOR","->",229],["T_STRING","_interlacing",229],["T_WHITESPACE"," ",229],"=",["T_WHITESPACE"," ",229],["T_VARIABLE","$this",229],["T_OBJECT_OPERATOR","->",229],["T_STRING","readInt",229],"(",["T_LNUMBER","1",229],")",";",["T_WHITESPACE","\n         ",229],["T_IF","if",230],"(",["T_VARIABLE","$this",230],["T_OBJECT_OPERATOR","->",230],["T_STRING","_interlacing",230],["T_WHITESPACE"," ",230],["T_IS_NOT_EQUAL","!=",230],["T_WHITESPACE"," ",230],["T_STRING","Zend_Pdf_Image",230],["T_DOUBLE_COLON","::",230],["T_STRING","PNG_INTERLACING_DISABLED",230],")",["T_WHITESPACE"," ",230],"{",["T_WHITESPACE","\n              ",230],["T_COMMENT","#require_once 'Zend\/Pdf\/Exception.php';\n",231],["T_WHITESPACE","              ",232],["T_THROW","throw",232],["T_WHITESPACE"," ",232],["T_NEW","new",232],["T_WHITESPACE"," ",232],["T_STRING","Zend_Pdf_Exception",232],"(",["T_WHITESPACE"," ",232],["T_CONSTANT_ENCAPSED_STRING","\"Only non-interlaced images are currently supported.\"",232],["T_WHITESPACE"," ",232],")",";",["T_WHITESPACE","\n         ",232],"}",["T_WHITESPACE","\n    ",233],"}",["T_WHITESPACE","\n\n    ",234],["T_PROTECTED","protected",236],["T_WHITESPACE"," ",236],["T_FUNCTION","function",236],["T_WHITESPACE"," ",236],["T_STRING","_parseIDATChunk",236],"(",["T_VARIABLE","$chunkOffset",236],",",["T_WHITESPACE"," ",236],["T_VARIABLE","$chunkLength",236],")",["T_WHITESPACE"," ",236],"{",["T_WHITESPACE","\n         ",236],["T_VARIABLE","$this",237],["T_OBJECT_OPERATOR","->",237],["T_STRING","moveToOffset",237],"(",["T_VARIABLE","$chunkOffset",237],")",";",["T_WHITESPACE","\n         ",237],["T_IF","if",238],"(","!",["T_ISSET","isset",238],"(",["T_VARIABLE","$this",238],["T_OBJECT_OPERATOR","->",238],["T_STRING","_imageData",238],")",")",["T_WHITESPACE"," ",238],"{",["T_WHITESPACE","\n              ",238],["T_VARIABLE","$this",239],["T_OBJECT_OPERATOR","->",239],["T_STRING","_imageData",239],["T_WHITESPACE"," ",239],"=",["T_WHITESPACE"," ",239],["T_VARIABLE","$this",239],["T_OBJECT_OPERATOR","->",239],["T_STRING","readBytes",239],"(",["T_VARIABLE","$chunkLength",239],")",";",["T_WHITESPACE","\n         ",239],"}",["T_WHITESPACE"," ",240],["T_ELSE","else",240],["T_WHITESPACE"," ",240],"{",["T_WHITESPACE","\n              ",240],["T_VARIABLE","$this",241],["T_OBJECT_OPERATOR","->",241],["T_STRING","_imageData",241],["T_WHITESPACE"," ",241],["T_CONCAT_EQUAL",".=",241],["T_WHITESPACE"," ",241],["T_VARIABLE","$this",241],["T_OBJECT_OPERATOR","->",241],["T_STRING","readBytes",241],"(",["T_VARIABLE","$chunkLength",241],")",";",["T_WHITESPACE","\n         ",241],"}",["T_WHITESPACE","\n    ",242],"}",["T_WHITESPACE","\n\n    ",243],["T_PROTECTED","protected",245],["T_WHITESPACE"," ",245],["T_FUNCTION","function",245],["T_WHITESPACE"," ",245],["T_STRING","_parsePLTEChunk",245],"(",["T_VARIABLE","$chunkOffset",245],",",["T_WHITESPACE"," ",245],["T_VARIABLE","$chunkLength",245],")",["T_WHITESPACE"," ",245],"{",["T_WHITESPACE","\n         ",245],["T_VARIABLE","$this",246],["T_OBJECT_OPERATOR","->",246],["T_STRING","moveToOffset",246],"(",["T_VARIABLE","$chunkOffset",246],")",";",["T_WHITESPACE","\n         ",246],["T_VARIABLE","$this",247],["T_OBJECT_OPERATOR","->",247],["T_STRING","_paletteData",247],["T_WHITESPACE"," ",247],"=",["T_WHITESPACE"," ",247],["T_VARIABLE","$this",247],["T_OBJECT_OPERATOR","->",247],["T_STRING","readBytes",247],"(",["T_VARIABLE","$chunkLength",247],")",";",["T_WHITESPACE","\n    ",247],"}",["T_WHITESPACE","\n\n    ",248],["T_PROTECTED","protected",250],["T_WHITESPACE"," ",250],["T_FUNCTION","function",250],["T_WHITESPACE"," ",250],["T_STRING","_parseTRNSChunk",250],"(",["T_VARIABLE","$chunkOffset",250],",",["T_WHITESPACE"," ",250],["T_VARIABLE","$chunkLength",250],")",["T_WHITESPACE"," ",250],"{",["T_WHITESPACE","\n         ",250],["T_VARIABLE","$this",251],["T_OBJECT_OPERATOR","->",251],["T_STRING","moveToOffset",251],"(",["T_VARIABLE","$chunkOffset",251],")",";",["T_WHITESPACE","\n\n         ",251],["T_COMMENT","\/\/Processing of tRNS data varies dependending on the color depth\n",253],["T_WHITESPACE","\n         ",254],["T_SWITCH","switch",255],"(",["T_VARIABLE","$this",255],["T_OBJECT_OPERATOR","->",255],["T_STRING","_color",255],")",["T_WHITESPACE"," ",255],"{",["T_WHITESPACE","\n             ",255],["T_CASE","case",256],["T_WHITESPACE"," ",256],["T_STRING","Zend_Pdf_Image",256],["T_DOUBLE_COLON","::",256],["T_STRING","PNG_CHANNEL_GRAY",256],":",["T_WHITESPACE","\n                  ",256],["T_VARIABLE","$baseColor",257],["T_WHITESPACE"," ",257],"=",["T_WHITESPACE"," ",257],["T_VARIABLE","$this",257],["T_OBJECT_OPERATOR","->",257],["T_STRING","readInt",257],"(",["T_LNUMBER","1",257],")",";",["T_WHITESPACE","\n                  ",257],["T_VARIABLE","$this",258],["T_OBJECT_OPERATOR","->",258],["T_STRING","_transparencyData",258],["T_WHITESPACE"," ",258],"=",["T_WHITESPACE"," ",258],["T_ARRAY","array",258],"(",["T_VARIABLE","$baseColor",258],",",["T_WHITESPACE"," ",258],["T_VARIABLE","$baseColor",258],")",";",["T_WHITESPACE","\n                  ",258],["T_BREAK","break",259],";",["T_WHITESPACE","\n\n             ",259],["T_CASE","case",261],["T_WHITESPACE"," ",261],["T_STRING","Zend_Pdf_Image",261],["T_DOUBLE_COLON","::",261],["T_STRING","PNG_CHANNEL_RGB",261],":",["T_WHITESPACE","\n\n                  ",261],["T_COMMENT","\/\/@TODO Fix this hack.\n",263],["T_WHITESPACE","                  ",264],["T_COMMENT","\/\/This parser cheats and only uses the lsb's (and only works with < 16 bit depth images)\n",264],["T_WHITESPACE","\n                  ",265],["T_COMMENT","\/*\n                       From the standard:\n\n                       For color type 2 (truecolor), the tRNS chunk contains a single RGB color value, stored in the format:\n\n                       Red:   2 bytes, range 0 .. (2^bitdepth)-1\n                       Green: 2 bytes, range 0 .. (2^bitdepth)-1\n                       Blue:  2 bytes, range 0 .. (2^bitdepth)-1\n\n                       (If the image bit depth is less than 16, the least significant bits are used and the others are 0.)\n                       Pixels of the specified color value are to be treated as transparent (equivalent to alpha value 0);\n                       all other pixels are to be treated as fully opaque (alpha value 2bitdepth-1).\n\n                  *\/",266],["T_WHITESPACE","\n\n                  ",279],["T_VARIABLE","$red",281],["T_WHITESPACE"," ",281],"=",["T_WHITESPACE"," ",281],["T_VARIABLE","$this",281],["T_OBJECT_OPERATOR","->",281],["T_STRING","readInt",281],"(",["T_LNUMBER","1",281],")",";",["T_WHITESPACE","\n                  ",281],["T_VARIABLE","$this",282],["T_OBJECT_OPERATOR","->",282],["T_STRING","skipBytes",282],"(",["T_LNUMBER","1",282],")",";",["T_WHITESPACE","\n                  ",282],["T_VARIABLE","$green",283],["T_WHITESPACE"," ",283],"=",["T_WHITESPACE"," ",283],["T_VARIABLE","$this",283],["T_OBJECT_OPERATOR","->",283],["T_STRING","readInt",283],"(",["T_LNUMBER","1",283],")",";",["T_WHITESPACE","\n                  ",283],["T_VARIABLE","$this",284],["T_OBJECT_OPERATOR","->",284],["T_STRING","skipBytes",284],"(",["T_LNUMBER","1",284],")",";",["T_WHITESPACE","\n                  ",284],["T_VARIABLE","$blue",285],["T_WHITESPACE"," ",285],"=",["T_WHITESPACE"," ",285],["T_VARIABLE","$this",285],["T_OBJECT_OPERATOR","->",285],["T_STRING","readInt",285],"(",["T_LNUMBER","1",285],")",";",["T_WHITESPACE","\n\n                  ",285],["T_VARIABLE","$this",287],["T_OBJECT_OPERATOR","->",287],["T_STRING","_transparencyData",287],["T_WHITESPACE"," ",287],"=",["T_WHITESPACE"," ",287],["T_ARRAY","array",287],"(",["T_VARIABLE","$red",287],",",["T_WHITESPACE"," ",287],["T_VARIABLE","$red",287],",",["T_WHITESPACE"," ",287],["T_VARIABLE","$green",287],",",["T_WHITESPACE"," ",287],["T_VARIABLE","$green",287],",",["T_WHITESPACE"," ",287],["T_VARIABLE","$blue",287],",",["T_WHITESPACE"," ",287],["T_VARIABLE","$blue",287],")",";",["T_WHITESPACE","\n\n                  ",287],["T_BREAK","break",289],";",["T_WHITESPACE","\n\n             ",289],["T_CASE","case",291],["T_WHITESPACE"," ",291],["T_STRING","Zend_Pdf_Image",291],["T_DOUBLE_COLON","::",291],["T_STRING","PNG_CHANNEL_INDEXED",291],":",["T_WHITESPACE","\n\n                  ",291],["T_COMMENT","\/\/@TODO Fix this hack.\n",293],["T_WHITESPACE","                  ",294],["T_COMMENT","\/\/This parser cheats too. It only masks the first color in the palette.\n",294],["T_WHITESPACE","\n                  ",295],["T_COMMENT","\/*\n                       From the standard:\n\n                       For color type 3 (indexed color), the tRNS chunk contains a series of one-byte alpha values, corresponding to entries in the PLTE chunk:\n\n                          Alpha for palette index 0:  1 byte\n                          Alpha for palette index 1:  1 byte\n                          ...etc...\n\n                       Each entry indicates that pixels of the corresponding palette index must be treated as having the specified alpha value.\n                       Alpha values have the same interpretation as in an 8-bit full alpha channel: 0 is fully transparent, 255 is fully opaque,\n                       regardless of image bit depth. The tRNS chunk must not contain more alpha values than there are palette entries,\n                       but tRNS can contain fewer values than there are palette entries. In this case, the alpha value for all remaining palette\n                       entries is assumed to be 255. In the common case in which only palette index 0 need be made transparent, only a one-byte\n                       tRNS chunk is needed.\n\n                  *\/",296],["T_WHITESPACE","\n\n                  ",312],["T_VARIABLE","$tmpData",314],["T_WHITESPACE"," ",314],"=",["T_WHITESPACE"," ",314],["T_VARIABLE","$this",314],["T_OBJECT_OPERATOR","->",314],["T_STRING","readBytes",314],"(",["T_VARIABLE","$chunkLength",314],")",";",["T_WHITESPACE","\n                  ",314],["T_IF","if",315],"(","(",["T_VARIABLE","$trnsIdx",315],["T_WHITESPACE"," ",315],"=",["T_WHITESPACE"," ",315],["T_STRING","strpos",315],"(",["T_VARIABLE","$tmpData",315],",",["T_WHITESPACE"," ",315],["T_CONSTANT_ENCAPSED_STRING","\"\\0\"",315],")",")",["T_WHITESPACE"," ",315],["T_IS_NOT_IDENTICAL","!==",315],["T_WHITESPACE"," ",315],["T_STRING","false",315],")",["T_WHITESPACE"," ",315],"{",["T_WHITESPACE","\n                       ",315],["T_VARIABLE","$this",316],["T_OBJECT_OPERATOR","->",316],["T_STRING","_transparencyData",316],["T_WHITESPACE"," ",316],"=",["T_WHITESPACE"," ",316],["T_ARRAY","array",316],"(",["T_VARIABLE","$trnsIdx",316],",",["T_WHITESPACE"," ",316],["T_VARIABLE","$trnsIdx",316],")",";",["T_WHITESPACE","\n                  ",316],"}",["T_WHITESPACE","\n\n                  ",317],["T_BREAK","break",319],";",["T_WHITESPACE","\n\n             ",319],["T_CASE","case",321],["T_WHITESPACE"," ",321],["T_STRING","Zend_Pdf_Image",321],["T_DOUBLE_COLON","::",321],["T_STRING","PNG_CHANNEL_GRAY_ALPHA",321],":",["T_WHITESPACE","\n                  ",321],["T_COMMENT","\/\/Fall through to the next case\n",322],["T_WHITESPACE","             ",323],["T_CASE","case",323],["T_WHITESPACE"," ",323],["T_STRING","Zend_Pdf_Image",323],["T_DOUBLE_COLON","::",323],["T_STRING","PNG_CHANNEL_RGB_ALPHA",323],":",["T_WHITESPACE","\n                  ",323],["T_COMMENT","#require_once 'Zend\/Pdf\/Exception.php';\n",324],["T_WHITESPACE","                  ",325],["T_THROW","throw",325],["T_WHITESPACE"," ",325],["T_NEW","new",325],["T_WHITESPACE"," ",325],["T_STRING","Zend_Pdf_Exception",325],"(",["T_WHITESPACE"," ",325],["T_CONSTANT_ENCAPSED_STRING","\"tRNS chunk illegal for Alpha Channel Images\"",325],["T_WHITESPACE"," ",325],")",";",["T_WHITESPACE","\n                  ",325],["T_BREAK","break",326],";",["T_WHITESPACE","\n         ",326],"}",["T_WHITESPACE","\n    ",327],"}",["T_WHITESPACE","\n",328],"}",["T_WHITESPACE","\n",329]]
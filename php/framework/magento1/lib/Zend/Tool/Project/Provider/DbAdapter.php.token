[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Zend Framework\n *\n * LICENSE\n *\n * This source file is subject to the new BSD license that is bundled\n * with this package in the file LICENSE.txt.\n * It is also available through the world-wide-web at this URL:\n * http:\/\/framework.zend.com\/license\/new-bsd\n * If you did not receive a copy of the license and are unable to\n * obtain it through the world-wide-web, please send an email\n * to license@zend.com so we can send you a copy immediately.\n *\n * @category   Zend\n * @package    Zend_Tool\n * @subpackage Framework\n * @copyright  Copyright (c) 2005-2015 Zend Technologies USA Inc. (http:\/\/www.zend.com)\n * @license    http:\/\/framework.zend.com\/license\/new-bsd     New BSD License\n * @version    $Id$\n *\/",2],["T_WHITESPACE","\n\n",21],["T_DOC_COMMENT","\/**\n * @see Zend_Tool_Project_Provider_Abstract\n *\/",23],["T_WHITESPACE","\n",25],["T_COMMENT","#require_once 'Zend\/Tool\/Project\/Provider\/Abstract.php';\n",26],["T_WHITESPACE","\n",27],["T_DOC_COMMENT","\/**\n * @see Zend_Tool_Framework_Provider_Interactable\n *\/",28],["T_WHITESPACE","\n",30],["T_COMMENT","#require_once 'Zend\/Tool\/Framework\/Provider\/Interactable.php';\n",31],["T_WHITESPACE","\n",32],["T_DOC_COMMENT","\/**\n * @category   Zend\n * @package    Zend_Tool\n * @copyright  Copyright (c) 2005-2015 Zend Technologies USA Inc. (http:\/\/www.zend.com)\n * @license    http:\/\/framework.zend.com\/license\/new-bsd     New BSD License\n *\/",33],["T_WHITESPACE","\n",38],["T_CLASS","class",39],["T_WHITESPACE"," ",39],["T_STRING","Zend_Tool_Project_Provider_DbAdapter",39],["T_WHITESPACE","\n    ",39],["T_EXTENDS","extends",40],["T_WHITESPACE"," ",40],["T_STRING","Zend_Tool_Project_Provider_Abstract",40],["T_WHITESPACE","\n    ",40],["T_IMPLEMENTS","implements",41],["T_WHITESPACE"," ",41],["T_STRING","Zend_Tool_Framework_Provider_Interactable",41],",",["T_WHITESPACE"," ",41],["T_STRING","Zend_Tool_Framework_Provider_Pretendable",41],["T_WHITESPACE","\n",41],"{",["T_WHITESPACE","\n\n    ",42],["T_PROTECTED","protected",44],["T_WHITESPACE"," ",44],["T_VARIABLE","$_appConfigFilePath",44],["T_WHITESPACE"," ",44],"=",["T_WHITESPACE"," ",44],["T_STRING","null",44],";",["T_WHITESPACE","\n\n    ",44],["T_PROTECTED","protected",46],["T_WHITESPACE"," ",46],["T_VARIABLE","$_config",46],["T_WHITESPACE"," ",46],"=",["T_WHITESPACE"," ",46],["T_STRING","null",46],";",["T_WHITESPACE","\n\n    ",46],["T_PROTECTED","protected",48],["T_WHITESPACE"," ",48],["T_VARIABLE","$_sectionName",48],["T_WHITESPACE"," ",48],"=",["T_WHITESPACE"," ",48],["T_CONSTANT_ENCAPSED_STRING","'production'",48],";",["T_WHITESPACE","\n\n    ",48],["T_PUBLIC","public",50],["T_WHITESPACE"," ",50],["T_FUNCTION","function",50],["T_WHITESPACE"," ",50],["T_STRING","configure",50],"(",["T_VARIABLE","$dsn",50],["T_WHITESPACE"," ",50],"=",["T_WHITESPACE"," ",50],["T_STRING","null",50],",",["T_WHITESPACE"," ",50],["T_COMMENT","\/* $interactivelyPrompt = false, *\/",50],["T_WHITESPACE"," ",50],["T_VARIABLE","$sectionName",50],["T_WHITESPACE"," ",50],"=",["T_WHITESPACE"," ",50],["T_CONSTANT_ENCAPSED_STRING","'production'",50],")",["T_WHITESPACE","\n    ",50],"{",["T_WHITESPACE","\n        ",51],["T_VARIABLE","$profile",52],["T_WHITESPACE"," ",52],"=",["T_WHITESPACE"," ",52],["T_VARIABLE","$this",52],["T_OBJECT_OPERATOR","->",52],["T_STRING","_loadProfile",52],"(",["T_STRING","self",52],["T_DOUBLE_COLON","::",52],["T_STRING","NO_PROFILE_THROW_EXCEPTION",52],")",";",["T_WHITESPACE","\n\n        ",52],["T_VARIABLE","$appConfigFileResource",54],["T_WHITESPACE"," ",54],"=",["T_WHITESPACE"," ",54],["T_VARIABLE","$profile",54],["T_OBJECT_OPERATOR","->",54],["T_STRING","search",54],"(",["T_CONSTANT_ENCAPSED_STRING","'applicationConfigFile'",54],")",";",["T_WHITESPACE","\n\n        ",54],["T_IF","if",56],["T_WHITESPACE"," ",56],"(",["T_VARIABLE","$appConfigFileResource",56],["T_WHITESPACE"," ",56],["T_IS_EQUAL","==",56],["T_WHITESPACE"," ",56],["T_STRING","false",56],")",["T_WHITESPACE"," ",56],"{",["T_WHITESPACE","\n            ",56],["T_THROW","throw",57],["T_WHITESPACE"," ",57],["T_NEW","new",57],["T_WHITESPACE"," ",57],["T_STRING","Zend_Tool_Project_Exception",57],"(",["T_CONSTANT_ENCAPSED_STRING","'A project with an application config file is required to use this provider.'",57],")",";",["T_WHITESPACE","\n        ",57],"}",["T_WHITESPACE","\n\n        ",58],["T_VARIABLE","$this",60],["T_OBJECT_OPERATOR","->",60],["T_STRING","_appConfigFilePath",60],["T_WHITESPACE"," ",60],"=",["T_WHITESPACE"," ",60],["T_VARIABLE","$appConfigFileResource",60],["T_OBJECT_OPERATOR","->",60],["T_STRING","getPath",60],"(",")",";",["T_WHITESPACE","\n\n        ",60],["T_VARIABLE","$this",62],["T_OBJECT_OPERATOR","->",62],["T_STRING","_config",62],["T_WHITESPACE"," ",62],"=",["T_WHITESPACE"," ",62],["T_NEW","new",62],["T_WHITESPACE"," ",62],["T_STRING","Zend_Config_Ini",62],"(",["T_VARIABLE","$this",62],["T_OBJECT_OPERATOR","->",62],["T_STRING","_appConfigFilePath",62],",",["T_WHITESPACE"," ",62],["T_STRING","null",62],",",["T_WHITESPACE"," ",62],["T_ARRAY","array",62],"(",["T_CONSTANT_ENCAPSED_STRING","'skipExtends'",62],["T_WHITESPACE"," ",62],["T_DOUBLE_ARROW","=>",62],["T_WHITESPACE"," ",62],["T_STRING","true",62],",",["T_WHITESPACE"," ",62],["T_CONSTANT_ENCAPSED_STRING","'allowModifications'",62],["T_WHITESPACE"," ",62],["T_DOUBLE_ARROW","=>",62],["T_WHITESPACE"," ",62],["T_STRING","true",62],")",")",";",["T_WHITESPACE","\n\n        ",62],["T_IF","if",64],["T_WHITESPACE"," ",64],"(",["T_VARIABLE","$sectionName",64],["T_WHITESPACE"," ",64],["T_IS_NOT_EQUAL","!=",64],["T_WHITESPACE"," ",64],["T_CONSTANT_ENCAPSED_STRING","'production'",64],")",["T_WHITESPACE"," ",64],"{",["T_WHITESPACE","\n            ",64],["T_VARIABLE","$this",65],["T_OBJECT_OPERATOR","->",65],["T_STRING","_sectionName",65],["T_WHITESPACE"," ",65],"=",["T_WHITESPACE"," ",65],["T_VARIABLE","$sectionName",65],";",["T_WHITESPACE","\n        ",65],"}",["T_WHITESPACE","\n\n        ",66],["T_IF","if",68],["T_WHITESPACE"," ",68],"(","!",["T_ISSET","isset",68],"(",["T_VARIABLE","$this",68],["T_OBJECT_OPERATOR","->",68],["T_STRING","_config",68],["T_OBJECT_OPERATOR","->",68],"{",["T_VARIABLE","$this",68],["T_OBJECT_OPERATOR","->",68],["T_STRING","_sectionName",68],"}",")",")",["T_WHITESPACE"," ",68],"{",["T_WHITESPACE","\n            ",68],["T_THROW","throw",69],["T_WHITESPACE"," ",69],["T_NEW","new",69],["T_WHITESPACE"," ",69],["T_STRING","Zend_Tool_Project_Exception",69],"(",["T_CONSTANT_ENCAPSED_STRING","'The config does not have a '",69],["T_WHITESPACE"," ",69],".",["T_WHITESPACE"," ",69],["T_VARIABLE","$this",69],["T_OBJECT_OPERATOR","->",69],["T_STRING","_sectionName",69],["T_WHITESPACE"," ",69],".",["T_WHITESPACE"," ",69],["T_CONSTANT_ENCAPSED_STRING","' section.'",69],")",";",["T_WHITESPACE","\n        ",69],"}",["T_WHITESPACE","\n\n        ",70],["T_IF","if",72],["T_WHITESPACE"," ",72],"(",["T_ISSET","isset",72],"(",["T_VARIABLE","$this",72],["T_OBJECT_OPERATOR","->",72],["T_STRING","_config",72],["T_OBJECT_OPERATOR","->",72],"{",["T_VARIABLE","$this",72],["T_OBJECT_OPERATOR","->",72],["T_STRING","_sectionName",72],"}",["T_OBJECT_OPERATOR","->",72],["T_STRING","resources",72],["T_OBJECT_OPERATOR","->",72],["T_STRING","db",72],")",")",["T_WHITESPACE"," ",72],"{",["T_WHITESPACE","\n            ",72],["T_THROW","throw",73],["T_WHITESPACE"," ",73],["T_NEW","new",73],["T_WHITESPACE"," ",73],["T_STRING","Zend_Tool_Project_Exception",73],"(",["T_CONSTANT_ENCAPSED_STRING","'The config already has a db resource configured in section '",73],["T_WHITESPACE"," ",73],".",["T_WHITESPACE"," ",73],["T_VARIABLE","$this",73],["T_OBJECT_OPERATOR","->",73],["T_STRING","_sectionName",73],["T_WHITESPACE"," ",73],".",["T_WHITESPACE"," ",73],["T_CONSTANT_ENCAPSED_STRING","'.'",73],")",";",["T_WHITESPACE","\n        ",73],"}",["T_WHITESPACE","\n\n        ",74],["T_IF","if",76],["T_WHITESPACE"," ",76],"(",["T_VARIABLE","$dsn",76],")",["T_WHITESPACE"," ",76],"{",["T_WHITESPACE","\n            ",76],["T_VARIABLE","$this",77],["T_OBJECT_OPERATOR","->",77],["T_STRING","_configureViaDSN",77],"(",["T_VARIABLE","$dsn",77],")",";",["T_WHITESPACE","\n        ",77],["T_COMMENT","\/\/} elseif ($interactivelyPrompt) {\n",78],["T_WHITESPACE","        ",79],["T_COMMENT","\/\/    $this->_promptForConfig();\n",79],["T_WHITESPACE","        ",80],"}",["T_WHITESPACE"," ",80],["T_ELSE","else",80],["T_WHITESPACE"," ",80],"{",["T_WHITESPACE","\n            ",80],["T_VARIABLE","$this",81],["T_OBJECT_OPERATOR","->",81],["T_STRING","_registry",81],["T_OBJECT_OPERATOR","->",81],["T_STRING","getResponse",81],"(",")",["T_OBJECT_OPERATOR","->",81],["T_STRING","appendContent",81],"(",["T_CONSTANT_ENCAPSED_STRING","'Nothing to do!'",81],")",";",["T_WHITESPACE","\n        ",81],"}",["T_WHITESPACE","\n\n\n    ",82],"}",["T_WHITESPACE","\n\n    ",85],["T_PROTECTED","protected",87],["T_WHITESPACE"," ",87],["T_FUNCTION","function",87],["T_WHITESPACE"," ",87],["T_STRING","_configureViaDSN",87],"(",["T_VARIABLE","$dsn",87],")",["T_WHITESPACE","\n    ",87],"{",["T_WHITESPACE","\n        ",88],["T_VARIABLE","$dsnVars",89],["T_WHITESPACE"," ",89],"=",["T_WHITESPACE"," ",89],["T_ARRAY","array",89],"(",")",";",["T_WHITESPACE","\n\n        ",89],["T_IF","if",91],["T_WHITESPACE"," ",91],"(",["T_STRING","strpos",91],"(",["T_VARIABLE","$dsn",91],",",["T_WHITESPACE"," ",91],["T_CONSTANT_ENCAPSED_STRING","'='",91],")",["T_WHITESPACE"," ",91],["T_IS_IDENTICAL","===",91],["T_WHITESPACE"," ",91],["T_STRING","false",91],")",["T_WHITESPACE"," ",91],"{",["T_WHITESPACE","\n            ",91],["T_THROW","throw",92],["T_WHITESPACE"," ",92],["T_NEW","new",92],["T_WHITESPACE"," ",92],["T_STRING","Zend_Tool_Project_Provider_Exception",92],"(",["T_CONSTANT_ENCAPSED_STRING","'At least one name value pair is expected, typcially '",92],["T_WHITESPACE","\n                ",92],".",["T_WHITESPACE"," ",93],["T_CONSTANT_ENCAPSED_STRING","'in the format of \"adapter=Mysqli&username=uname&password=mypass&dbname=mydb\"'",93],["T_WHITESPACE","\n                ",93],")",";",["T_WHITESPACE","\n        ",94],"}",["T_WHITESPACE","\n\n        ",95],["T_STRING","parse_str",97],"(",["T_VARIABLE","$dsn",97],",",["T_WHITESPACE"," ",97],["T_VARIABLE","$dsnVars",97],")",";",["T_WHITESPACE","\n\n        ",97],["T_COMMENT","\/\/ parse_str suffers when magic_quotes is enabled\n",99],["T_WHITESPACE","        ",100],["T_IF","if",100],["T_WHITESPACE"," ",100],"(",["T_STRING","get_magic_quotes_gpc",100],"(",")",")",["T_WHITESPACE"," ",100],"{",["T_WHITESPACE","\n            ",100],["T_STRING","array_walk_recursive",101],"(",["T_VARIABLE","$dsnVars",101],",",["T_WHITESPACE"," ",101],["T_ARRAY","array",101],"(",["T_VARIABLE","$this",101],",",["T_WHITESPACE"," ",101],["T_CONSTANT_ENCAPSED_STRING","'_cleanMagicQuotesInValues'",101],")",")",";",["T_WHITESPACE","\n        ",101],"}",["T_WHITESPACE","\n\n        ",102],["T_VARIABLE","$dbConfigValues",104],["T_WHITESPACE"," ",104],"=",["T_WHITESPACE"," ",104],["T_ARRAY","array",104],"(",["T_CONSTANT_ENCAPSED_STRING","'resources'",104],["T_WHITESPACE"," ",104],["T_DOUBLE_ARROW","=>",104],["T_WHITESPACE"," ",104],["T_ARRAY","array",104],"(",["T_CONSTANT_ENCAPSED_STRING","'db'",104],["T_WHITESPACE"," ",104],["T_DOUBLE_ARROW","=>",104],["T_WHITESPACE"," ",104],["T_STRING","null",104],")",")",";",["T_WHITESPACE","\n\n        ",104],["T_IF","if",106],["T_WHITESPACE"," ",106],"(",["T_ISSET","isset",106],"(",["T_VARIABLE","$dsnVars",106],"[",["T_CONSTANT_ENCAPSED_STRING","'adapter'",106],"]",")",")",["T_WHITESPACE"," ",106],"{",["T_WHITESPACE","\n            ",106],["T_VARIABLE","$dbConfigValues",107],"[",["T_CONSTANT_ENCAPSED_STRING","'resources'",107],"]","[",["T_CONSTANT_ENCAPSED_STRING","'db'",107],"]","[",["T_CONSTANT_ENCAPSED_STRING","'adapter'",107],"]",["T_WHITESPACE"," ",107],"=",["T_WHITESPACE"," ",107],["T_VARIABLE","$dsnVars",107],"[",["T_CONSTANT_ENCAPSED_STRING","'adapter'",107],"]",";",["T_WHITESPACE","\n            ",107],["T_UNSET","unset",108],"(",["T_VARIABLE","$dsnVars",108],"[",["T_CONSTANT_ENCAPSED_STRING","'adapter'",108],"]",")",";",["T_WHITESPACE","\n        ",108],"}",["T_WHITESPACE","\n\n        ",109],["T_VARIABLE","$dbConfigValues",111],"[",["T_CONSTANT_ENCAPSED_STRING","'resources'",111],"]","[",["T_CONSTANT_ENCAPSED_STRING","'db'",111],"]","[",["T_CONSTANT_ENCAPSED_STRING","'params'",111],"]",["T_WHITESPACE"," ",111],"=",["T_WHITESPACE"," ",111],["T_VARIABLE","$dsnVars",111],";",["T_WHITESPACE","\n\n        ",111],["T_VARIABLE","$isPretend",113],["T_WHITESPACE"," ",113],"=",["T_WHITESPACE"," ",113],["T_VARIABLE","$this",113],["T_OBJECT_OPERATOR","->",113],["T_STRING","_registry",113],["T_OBJECT_OPERATOR","->",113],["T_STRING","getRequest",113],"(",")",["T_OBJECT_OPERATOR","->",113],["T_STRING","isPretend",113],"(",")",";",["T_WHITESPACE","\n\n        ",113],["T_COMMENT","\/\/ get the config resource\n",115],["T_WHITESPACE","        ",116],["T_VARIABLE","$applicationConfig",116],["T_WHITESPACE"," ",116],"=",["T_WHITESPACE"," ",116],["T_VARIABLE","$this",116],["T_OBJECT_OPERATOR","->",116],["T_STRING","_loadedProfile",116],["T_OBJECT_OPERATOR","->",116],["T_STRING","search",116],"(",["T_CONSTANT_ENCAPSED_STRING","'ApplicationConfigFile'",116],")",";",["T_WHITESPACE","\n        ",116],["T_VARIABLE","$applicationConfig",117],["T_OBJECT_OPERATOR","->",117],["T_STRING","addItem",117],"(",["T_VARIABLE","$dbConfigValues",117],",",["T_WHITESPACE"," ",117],["T_VARIABLE","$this",117],["T_OBJECT_OPERATOR","->",117],["T_STRING","_sectionName",117],",",["T_WHITESPACE"," ",117],["T_STRING","null",117],")",";",["T_WHITESPACE","\n\n        ",117],["T_VARIABLE","$response",119],["T_WHITESPACE"," ",119],"=",["T_WHITESPACE"," ",119],["T_VARIABLE","$this",119],["T_OBJECT_OPERATOR","->",119],["T_STRING","_registry",119],["T_OBJECT_OPERATOR","->",119],["T_STRING","getResponse",119],"(",")",";",["T_WHITESPACE","\n\n        ",119],["T_IF","if",121],["T_WHITESPACE"," ",121],"(",["T_VARIABLE","$isPretend",121],")",["T_WHITESPACE"," ",121],"{",["T_WHITESPACE","\n            ",121],["T_VARIABLE","$response",122],["T_OBJECT_OPERATOR","->",122],["T_STRING","appendContent",122],"(",["T_CONSTANT_ENCAPSED_STRING","'A db configuration for the '",122],["T_WHITESPACE"," ",122],".",["T_WHITESPACE"," ",122],["T_VARIABLE","$this",122],["T_OBJECT_OPERATOR","->",122],["T_STRING","_sectionName",122],["T_WHITESPACE","\n                ",122],".",["T_WHITESPACE"," ",123],["T_CONSTANT_ENCAPSED_STRING","' section would be written to the application config file with the following contents: '",123],["T_WHITESPACE","\n                ",123],")",";",["T_WHITESPACE","\n            ",124],["T_VARIABLE","$response",125],["T_OBJECT_OPERATOR","->",125],["T_STRING","appendContent",125],"(",["T_VARIABLE","$applicationConfig",125],["T_OBJECT_OPERATOR","->",125],["T_STRING","getContents",125],"(",")",")",";",["T_WHITESPACE","\n        ",125],"}",["T_WHITESPACE"," ",126],["T_ELSE","else",126],["T_WHITESPACE"," ",126],"{",["T_WHITESPACE","\n            ",126],["T_VARIABLE","$applicationConfig",127],["T_OBJECT_OPERATOR","->",127],["T_STRING","create",127],"(",")",";",["T_WHITESPACE","\n            ",127],["T_VARIABLE","$response",128],["T_OBJECT_OPERATOR","->",128],["T_STRING","appendContent",128],"(",["T_CONSTANT_ENCAPSED_STRING","'A db configuration for the '",128],["T_WHITESPACE"," ",128],".",["T_WHITESPACE"," ",128],["T_VARIABLE","$this",128],["T_OBJECT_OPERATOR","->",128],["T_STRING","_sectionName",128],["T_WHITESPACE","\n                ",128],".",["T_WHITESPACE"," ",129],["T_CONSTANT_ENCAPSED_STRING","' section has been written to the application config file.'",129],["T_WHITESPACE","\n                ",129],")",";",["T_WHITESPACE","\n        ",130],"}",["T_WHITESPACE","\n    ",131],"}",["T_WHITESPACE","\n\n    ",132],["T_PROTECTED","protected",134],["T_WHITESPACE"," ",134],["T_FUNCTION","function",134],["T_WHITESPACE"," ",134],["T_STRING","_cleanMagicQuotesInValues",134],"(","&",["T_VARIABLE","$value",134],",",["T_WHITESPACE"," ",134],["T_VARIABLE","$key",134],")",["T_WHITESPACE","\n    ",134],"{",["T_WHITESPACE","\n        ",135],["T_VARIABLE","$value",136],["T_WHITESPACE"," ",136],"=",["T_WHITESPACE"," ",136],["T_STRING","stripslashes",136],"(",["T_VARIABLE","$value",136],")",";",["T_WHITESPACE","\n    ",136],"}",["T_WHITESPACE","\n\n",137],"}",["T_WHITESPACE","\n",139]]
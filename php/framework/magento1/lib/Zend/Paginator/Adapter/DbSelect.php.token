[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Zend Framework\n *\n * LICENSE\n *\n * This source file is subject to the new BSD license that is bundled\n * with this package in the file LICENSE.txt.\n * It is also available through the world-wide-web at this URL:\n * http:\/\/framework.zend.com\/license\/new-bsd\n * If you did not receive a copy of the license and are unable to\n * obtain it through the world-wide-web, please send an email\n * to license@zend.com so we can send you a copy immediately.\n *\n * @category   Zend\n * @package    Zend_Paginator\n * @copyright  Copyright (c) 2005-2015 Zend Technologies USA Inc. (http:\/\/www.zend.com)\n * @license    http:\/\/framework.zend.com\/license\/new-bsd     New BSD License\n * @version    $Id$\n *\/",2],["T_WHITESPACE","\n\n",20],["T_DOC_COMMENT","\/**\n * @see Zend_Paginator_Adapter_Interface\n *\/",22],["T_WHITESPACE","\n",24],["T_COMMENT","#require_once 'Zend\/Paginator\/Adapter\/Interface.php';\n",25],["T_WHITESPACE","\n",26],["T_DOC_COMMENT","\/**\n * @see Zend_Db\n *\/",27],["T_WHITESPACE","\n",29],["T_COMMENT","#require_once 'Zend\/Db.php';\n",30],["T_WHITESPACE","\n",31],["T_DOC_COMMENT","\/**\n * @see Zend_Db_Select\n *\/",32],["T_WHITESPACE","\n",34],["T_COMMENT","#require_once 'Zend\/Db\/Select.php';\n",35],["T_WHITESPACE","\n",36],["T_DOC_COMMENT","\/**\n * @category   Zend\n * @package    Zend_Paginator\n * @copyright  Copyright (c) 2005-2015 Zend Technologies USA Inc. (http:\/\/www.zend.com)\n * @license    http:\/\/framework.zend.com\/license\/new-bsd     New BSD License\n *\/",37],["T_WHITESPACE","\n",42],["T_CLASS","class",43],["T_WHITESPACE"," ",43],["T_STRING","Zend_Paginator_Adapter_DbSelect",43],["T_WHITESPACE"," ",43],["T_IMPLEMENTS","implements",43],["T_WHITESPACE"," ",43],["T_STRING","Zend_Paginator_Adapter_Interface",43],["T_WHITESPACE","\n",43],"{",["T_WHITESPACE","\n    ",44],["T_DOC_COMMENT","\/**\n     * Name of the row count column\n     *\n     * @var string\n     *\/",45],["T_WHITESPACE","\n    ",49],["T_CONST","const",50],["T_WHITESPACE"," ",50],["T_STRING","ROW_COUNT_COLUMN",50],["T_WHITESPACE"," ",50],"=",["T_WHITESPACE"," ",50],["T_CONSTANT_ENCAPSED_STRING","'zend_paginator_row_count'",50],";",["T_WHITESPACE","\n\n    ",50],["T_DOC_COMMENT","\/**\n     * The COUNT query\n     *\n     * @var Zend_Db_Select\n     *\/",52],["T_WHITESPACE","\n    ",56],["T_PROTECTED","protected",57],["T_WHITESPACE"," ",57],["T_VARIABLE","$_countSelect",57],["T_WHITESPACE"," ",57],"=",["T_WHITESPACE"," ",57],["T_STRING","null",57],";",["T_WHITESPACE","\n\n    ",57],["T_DOC_COMMENT","\/**\n     * Database query\n     *\n     * @var Zend_Db_Select\n     *\/",59],["T_WHITESPACE","\n    ",63],["T_PROTECTED","protected",64],["T_WHITESPACE"," ",64],["T_VARIABLE","$_select",64],["T_WHITESPACE"," ",64],"=",["T_WHITESPACE"," ",64],["T_STRING","null",64],";",["T_WHITESPACE","\n\n    ",64],["T_DOC_COMMENT","\/**\n     * Total item count\n     *\n     * @var integer\n     *\/",66],["T_WHITESPACE","\n    ",70],["T_PROTECTED","protected",71],["T_WHITESPACE"," ",71],["T_VARIABLE","$_rowCount",71],["T_WHITESPACE"," ",71],"=",["T_WHITESPACE"," ",71],["T_STRING","null",71],";",["T_WHITESPACE","\n\n    ",71],["T_DOC_COMMENT","\/**\n     * Identifies this adapter for caching purposes.  This value will remain constant for\n     * the entire life of this adapter regardless of how many different pages are queried.\n     *\n     * @var string\n     *\/",73],["T_WHITESPACE","\n    ",78],["T_PROTECTED","protected",79],["T_WHITESPACE"," ",79],["T_VARIABLE","$_cacheIdentifier",79],["T_WHITESPACE"," ",79],"=",["T_WHITESPACE"," ",79],["T_STRING","null",79],";",["T_WHITESPACE","\n\n    ",79],["T_DOC_COMMENT","\/**\n     * Constructor.\n     *\n     * @param Zend_Db_Select $select The select query\n     *\/",81],["T_WHITESPACE","\n    ",85],["T_PUBLIC","public",86],["T_WHITESPACE"," ",86],["T_FUNCTION","function",86],["T_WHITESPACE"," ",86],["T_STRING","__construct",86],"(",["T_STRING","Zend_Db_Select",86],["T_WHITESPACE"," ",86],["T_VARIABLE","$select",86],")",["T_WHITESPACE","\n    ",86],"{",["T_WHITESPACE","\n        ",87],["T_VARIABLE","$this",88],["T_OBJECT_OPERATOR","->",88],["T_STRING","_select",88],["T_WHITESPACE"," ",88],"=",["T_WHITESPACE"," ",88],["T_VARIABLE","$select",88],";",["T_WHITESPACE","\n        ",88],["T_VARIABLE","$this",89],["T_OBJECT_OPERATOR","->",89],["T_STRING","_cacheIdentifier",89],["T_WHITESPACE"," ",89],"=",["T_WHITESPACE"," ",89],["T_STRING","md5",89],"(",["T_VARIABLE","$select",89],["T_OBJECT_OPERATOR","->",89],["T_STRING","assemble",89],"(",")",")",";",["T_WHITESPACE","\n    ",89],"}",["T_WHITESPACE","\n\n    ",90],["T_DOC_COMMENT","\/**\n     * Returns the cache identifier.\n     * \n     * @return string\n     *\/",92],["T_WHITESPACE","\n    ",96],["T_PUBLIC","public",97],["T_WHITESPACE"," ",97],["T_FUNCTION","function",97],["T_WHITESPACE"," ",97],["T_STRING","getCacheIdentifier",97],"(",")",["T_WHITESPACE","\n    ",97],"{",["T_WHITESPACE","\n        ",98],["T_RETURN","return",99],["T_WHITESPACE"," ",99],["T_VARIABLE","$this",99],["T_OBJECT_OPERATOR","->",99],["T_STRING","_cacheIdentifier",99],";",["T_WHITESPACE","\n    ",99],"}",["T_WHITESPACE","\n    \n    ",100],["T_DOC_COMMENT","\/**\n     * Sets the total row count, either directly or through a supplied\n     * query.  Without setting this, {@link getPages()} selects the count\n     * as a subquery (SELECT COUNT ... FROM (SELECT ...)).  While this\n     * yields an accurate count even with queries containing clauses like\n     * LIMIT, it can be slow in some circumstances.  For example, in MySQL,\n     * subqueries are generally slow when using the InnoDB storage engine.\n     * Users are therefore encouraged to profile their queries to find\n     * the solution that best meets their needs.\n     *\n     * @param  Zend_Db_Select|integer $totalRowCount Total row count integer\n     *                                               or query\n     * @return Zend_Paginator_Adapter_DbSelect $this\n     * @throws Zend_Paginator_Exception\n     *\/",102],["T_WHITESPACE","\n    ",116],["T_PUBLIC","public",117],["T_WHITESPACE"," ",117],["T_FUNCTION","function",117],["T_WHITESPACE"," ",117],["T_STRING","setRowCount",117],"(",["T_VARIABLE","$rowCount",117],")",["T_WHITESPACE","\n    ",117],"{",["T_WHITESPACE","\n        ",118],["T_IF","if",119],["T_WHITESPACE"," ",119],"(",["T_VARIABLE","$rowCount",119],["T_WHITESPACE"," ",119],["T_INSTANCEOF","instanceof",119],["T_WHITESPACE"," ",119],["T_STRING","Zend_Db_Select",119],")",["T_WHITESPACE"," ",119],"{",["T_WHITESPACE","\n            ",119],["T_VARIABLE","$columns",120],["T_WHITESPACE"," ",120],"=",["T_WHITESPACE"," ",120],["T_VARIABLE","$rowCount",120],["T_OBJECT_OPERATOR","->",120],["T_STRING","getPart",120],"(",["T_STRING","Zend_Db_Select",120],["T_DOUBLE_COLON","::",120],["T_STRING","COLUMNS",120],")",";",["T_WHITESPACE","\n\n            ",120],["T_VARIABLE","$countColumnPart",122],["T_WHITESPACE"," ",122],"=",["T_WHITESPACE"," ",122],["T_EMPTY","empty",122],"(",["T_VARIABLE","$columns",122],"[",["T_LNUMBER","0",122],"]","[",["T_LNUMBER","2",122],"]",")",["T_WHITESPACE","\n                             ",122],"?",["T_WHITESPACE"," ",123],["T_VARIABLE","$columns",123],"[",["T_LNUMBER","0",123],"]","[",["T_LNUMBER","1",123],"]",["T_WHITESPACE","\n                             ",123],":",["T_WHITESPACE"," ",124],["T_VARIABLE","$columns",124],"[",["T_LNUMBER","0",124],"]","[",["T_LNUMBER","2",124],"]",";",["T_WHITESPACE","\n\n            ",124],["T_IF","if",126],["T_WHITESPACE"," ",126],"(",["T_VARIABLE","$countColumnPart",126],["T_WHITESPACE"," ",126],["T_INSTANCEOF","instanceof",126],["T_WHITESPACE"," ",126],["T_STRING","Zend_Db_Expr",126],")",["T_WHITESPACE"," ",126],"{",["T_WHITESPACE","\n                ",126],["T_VARIABLE","$countColumnPart",127],["T_WHITESPACE"," ",127],"=",["T_WHITESPACE"," ",127],["T_VARIABLE","$countColumnPart",127],["T_OBJECT_OPERATOR","->",127],["T_STRING","__toString",127],"(",")",";",["T_WHITESPACE","\n            ",127],"}",["T_WHITESPACE","\n\n            ",128],["T_VARIABLE","$rowCountColumn",130],["T_WHITESPACE"," ",130],"=",["T_WHITESPACE"," ",130],["T_VARIABLE","$this",130],["T_OBJECT_OPERATOR","->",130],["T_STRING","_select",130],["T_OBJECT_OPERATOR","->",130],["T_STRING","getAdapter",130],"(",")",["T_OBJECT_OPERATOR","->",130],["T_STRING","foldCase",130],"(",["T_STRING","self",130],["T_DOUBLE_COLON","::",130],["T_STRING","ROW_COUNT_COLUMN",130],")",";",["T_WHITESPACE","\n\n            ",130],["T_COMMENT","\/\/ The select query can contain only one column, which should be the row count column\n",132],["T_WHITESPACE","            ",133],["T_IF","if",133],["T_WHITESPACE"," ",133],"(",["T_STRING","false",133],["T_WHITESPACE"," ",133],["T_IS_IDENTICAL","===",133],["T_WHITESPACE"," ",133],["T_STRING","strpos",133],"(",["T_VARIABLE","$countColumnPart",133],",",["T_WHITESPACE"," ",133],["T_VARIABLE","$rowCountColumn",133],")",")",["T_WHITESPACE"," ",133],"{",["T_WHITESPACE","\n                ",133],["T_DOC_COMMENT","\/**\n                 * @see Zend_Paginator_Exception\n                 *\/",134],["T_WHITESPACE","\n                ",136],["T_COMMENT","#require_once 'Zend\/Paginator\/Exception.php';\n",137],["T_WHITESPACE","\n                ",138],["T_THROW","throw",139],["T_WHITESPACE"," ",139],["T_NEW","new",139],["T_WHITESPACE"," ",139],["T_STRING","Zend_Paginator_Exception",139],"(",["T_CONSTANT_ENCAPSED_STRING","'Row count column not found'",139],")",";",["T_WHITESPACE","\n            ",139],"}",["T_WHITESPACE","\n\n            ",140],["T_VARIABLE","$result",142],["T_WHITESPACE"," ",142],"=",["T_WHITESPACE"," ",142],["T_VARIABLE","$rowCount",142],["T_OBJECT_OPERATOR","->",142],["T_STRING","query",142],"(",["T_STRING","Zend_Db",142],["T_DOUBLE_COLON","::",142],["T_STRING","FETCH_ASSOC",142],")",["T_OBJECT_OPERATOR","->",142],["T_STRING","fetch",142],"(",")",";",["T_WHITESPACE","\n\n            ",142],["T_VARIABLE","$this",144],["T_OBJECT_OPERATOR","->",144],["T_STRING","_rowCount",144],["T_WHITESPACE"," ",144],"=",["T_WHITESPACE"," ",144],["T_STRING","count",144],"(",["T_VARIABLE","$result",144],")",["T_WHITESPACE"," ",144],">",["T_WHITESPACE"," ",144],["T_LNUMBER","0",144],["T_WHITESPACE"," ",144],"?",["T_WHITESPACE"," ",144],["T_VARIABLE","$result",144],"[",["T_VARIABLE","$rowCountColumn",144],"]",["T_WHITESPACE"," ",144],":",["T_WHITESPACE"," ",144],["T_LNUMBER","0",144],";",["T_WHITESPACE","\n        ",144],"}",["T_WHITESPACE"," ",145],["T_ELSE","else",145],["T_WHITESPACE"," ",145],["T_IF","if",145],["T_WHITESPACE"," ",145],"(",["T_STRING","is_integer",145],"(",["T_VARIABLE","$rowCount",145],")",")",["T_WHITESPACE"," ",145],"{",["T_WHITESPACE","\n            ",145],["T_VARIABLE","$this",146],["T_OBJECT_OPERATOR","->",146],["T_STRING","_rowCount",146],["T_WHITESPACE"," ",146],"=",["T_WHITESPACE"," ",146],["T_VARIABLE","$rowCount",146],";",["T_WHITESPACE","\n        ",146],"}",["T_WHITESPACE"," ",147],["T_ELSE","else",147],["T_WHITESPACE"," ",147],"{",["T_WHITESPACE","\n            ",147],["T_DOC_COMMENT","\/**\n             * @see Zend_Paginator_Exception\n             *\/",148],["T_WHITESPACE","\n            ",150],["T_COMMENT","#require_once 'Zend\/Paginator\/Exception.php';\n",151],["T_WHITESPACE","\n            ",152],["T_THROW","throw",153],["T_WHITESPACE"," ",153],["T_NEW","new",153],["T_WHITESPACE"," ",153],["T_STRING","Zend_Paginator_Exception",153],"(",["T_CONSTANT_ENCAPSED_STRING","'Invalid row count'",153],")",";",["T_WHITESPACE","\n        ",153],"}",["T_WHITESPACE","\n\n        ",154],["T_RETURN","return",156],["T_WHITESPACE"," ",156],["T_VARIABLE","$this",156],";",["T_WHITESPACE","\n    ",156],"}",["T_WHITESPACE","\n\n    ",157],["T_DOC_COMMENT","\/**\n     * Returns an array of items for a page.\n     *\n     * @param  integer $offset Page offset\n     * @param  integer $itemCountPerPage Number of items per page\n     * @return array\n     *\/",159],["T_WHITESPACE","\n    ",165],["T_PUBLIC","public",166],["T_WHITESPACE"," ",166],["T_FUNCTION","function",166],["T_WHITESPACE"," ",166],["T_STRING","getItems",166],"(",["T_VARIABLE","$offset",166],",",["T_WHITESPACE"," ",166],["T_VARIABLE","$itemCountPerPage",166],")",["T_WHITESPACE","\n    ",166],"{",["T_WHITESPACE","\n        ",167],["T_VARIABLE","$this",168],["T_OBJECT_OPERATOR","->",168],["T_STRING","_select",168],["T_OBJECT_OPERATOR","->",168],["T_STRING","limit",168],"(",["T_VARIABLE","$itemCountPerPage",168],",",["T_WHITESPACE"," ",168],["T_VARIABLE","$offset",168],")",";",["T_WHITESPACE","\n\n        ",168],["T_RETURN","return",170],["T_WHITESPACE"," ",170],["T_VARIABLE","$this",170],["T_OBJECT_OPERATOR","->",170],["T_STRING","_select",170],["T_OBJECT_OPERATOR","->",170],["T_STRING","query",170],"(",")",["T_OBJECT_OPERATOR","->",170],["T_STRING","fetchAll",170],"(",")",";",["T_WHITESPACE","\n    ",170],"}",["T_WHITESPACE","\n\n    ",171],["T_DOC_COMMENT","\/**\n     * Returns the total number of rows in the result set.\n     *\n     * @return integer\n     *\/",173],["T_WHITESPACE","\n    ",177],["T_PUBLIC","public",178],["T_WHITESPACE"," ",178],["T_FUNCTION","function",178],["T_WHITESPACE"," ",178],["T_STRING","count",178],"(",")",["T_WHITESPACE","\n    ",178],"{",["T_WHITESPACE","\n        ",179],["T_IF","if",180],["T_WHITESPACE"," ",180],"(",["T_VARIABLE","$this",180],["T_OBJECT_OPERATOR","->",180],["T_STRING","_rowCount",180],["T_WHITESPACE"," ",180],["T_IS_IDENTICAL","===",180],["T_WHITESPACE"," ",180],["T_STRING","null",180],")",["T_WHITESPACE"," ",180],"{",["T_WHITESPACE","\n            ",180],["T_VARIABLE","$this",181],["T_OBJECT_OPERATOR","->",181],["T_STRING","setRowCount",181],"(",["T_WHITESPACE","\n                ",181],["T_VARIABLE","$this",182],["T_OBJECT_OPERATOR","->",182],["T_STRING","getCountSelect",182],"(",")",["T_WHITESPACE","\n            ",182],")",";",["T_WHITESPACE","\n        ",183],"}",["T_WHITESPACE","\n\n        ",184],["T_RETURN","return",186],["T_WHITESPACE"," ",186],["T_VARIABLE","$this",186],["T_OBJECT_OPERATOR","->",186],["T_STRING","_rowCount",186],";",["T_WHITESPACE","\n    ",186],"}",["T_WHITESPACE","\n\n    ",187],["T_DOC_COMMENT","\/**\n     * Get the COUNT select object for the provided query\n     *\n     * TODO: Have a look at queries that have both GROUP BY and DISTINCT specified.\n     * In that use-case I'm expecting problems when either GROUP BY or DISTINCT\n     * has one column.\n     *\n     * @return Zend_Db_Select\n     *\/",189],["T_WHITESPACE","\n    ",197],["T_PUBLIC","public",198],["T_WHITESPACE"," ",198],["T_FUNCTION","function",198],["T_WHITESPACE"," ",198],["T_STRING","getCountSelect",198],"(",")",["T_WHITESPACE","\n    ",198],"{",["T_WHITESPACE","\n        ",199],["T_DOC_COMMENT","\/**\n         * We only need to generate a COUNT query once. It will not change for\n         * this instance.\n         *\/",200],["T_WHITESPACE","\n        ",203],["T_IF","if",204],["T_WHITESPACE"," ",204],"(",["T_VARIABLE","$this",204],["T_OBJECT_OPERATOR","->",204],["T_STRING","_countSelect",204],["T_WHITESPACE"," ",204],["T_IS_NOT_IDENTICAL","!==",204],["T_WHITESPACE"," ",204],["T_STRING","null",204],")",["T_WHITESPACE"," ",204],"{",["T_WHITESPACE","\n            ",204],["T_RETURN","return",205],["T_WHITESPACE"," ",205],["T_VARIABLE","$this",205],["T_OBJECT_OPERATOR","->",205],["T_STRING","_countSelect",205],";",["T_WHITESPACE","\n        ",205],"}",["T_WHITESPACE","\n\n        ",206],["T_VARIABLE","$rowCount",208],["T_WHITESPACE"," ",208],"=",["T_WHITESPACE"," ",208],["T_CLONE","clone",208],["T_WHITESPACE"," ",208],["T_VARIABLE","$this",208],["T_OBJECT_OPERATOR","->",208],["T_STRING","_select",208],";",["T_WHITESPACE","\n        ",208],["T_VARIABLE","$rowCount",209],["T_OBJECT_OPERATOR","->",209],["T_STRING","__toString",209],"(",")",";",["T_WHITESPACE"," ",209],["T_COMMENT","\/\/ Workaround for ZF-3719 and related\n",209],["T_WHITESPACE","\n        ",210],["T_VARIABLE","$db",211],["T_WHITESPACE"," ",211],"=",["T_WHITESPACE"," ",211],["T_VARIABLE","$rowCount",211],["T_OBJECT_OPERATOR","->",211],["T_STRING","getAdapter",211],"(",")",";",["T_WHITESPACE","\n\n        ",211],["T_VARIABLE","$countColumn",213],["T_WHITESPACE"," ",213],"=",["T_WHITESPACE"," ",213],["T_VARIABLE","$db",213],["T_OBJECT_OPERATOR","->",213],["T_STRING","quoteIdentifier",213],"(",["T_VARIABLE","$db",213],["T_OBJECT_OPERATOR","->",213],["T_STRING","foldCase",213],"(",["T_STRING","self",213],["T_DOUBLE_COLON","::",213],["T_STRING","ROW_COUNT_COLUMN",213],")",")",";",["T_WHITESPACE","\n        ",213],["T_VARIABLE","$countPart",214],["T_WHITESPACE","   ",214],"=",["T_WHITESPACE"," ",214],["T_CONSTANT_ENCAPSED_STRING","'COUNT(1) AS '",214],";",["T_WHITESPACE","\n        ",214],["T_VARIABLE","$groupPart",215],["T_WHITESPACE","   ",215],"=",["T_WHITESPACE"," ",215],["T_STRING","null",215],";",["T_WHITESPACE","\n        ",215],["T_VARIABLE","$unionParts",216],["T_WHITESPACE","  ",216],"=",["T_WHITESPACE"," ",216],["T_VARIABLE","$rowCount",216],["T_OBJECT_OPERATOR","->",216],["T_STRING","getPart",216],"(",["T_STRING","Zend_Db_Select",216],["T_DOUBLE_COLON","::",216],["T_STRING","UNION",216],")",";",["T_WHITESPACE","\n\n        ",216],["T_DOC_COMMENT","\/**\n         * If we're dealing with a UNION query, execute the UNION as a subquery\n         * to the COUNT query.\n         *\/",218],["T_WHITESPACE","\n        ",221],["T_IF","if",222],["T_WHITESPACE"," ",222],"(","!",["T_EMPTY","empty",222],"(",["T_VARIABLE","$unionParts",222],")",")",["T_WHITESPACE"," ",222],"{",["T_WHITESPACE","\n            ",222],["T_VARIABLE","$expression",223],["T_WHITESPACE"," ",223],"=",["T_WHITESPACE"," ",223],["T_NEW","new",223],["T_WHITESPACE"," ",223],["T_STRING","Zend_Db_Expr",223],"(",["T_VARIABLE","$countPart",223],["T_WHITESPACE"," ",223],".",["T_WHITESPACE"," ",223],["T_VARIABLE","$countColumn",223],")",";",["T_WHITESPACE","\n\n            ",223],["T_VARIABLE","$rowCount",225],["T_WHITESPACE"," ",225],"=",["T_WHITESPACE"," ",225],["T_VARIABLE","$db",225],["T_WHITESPACE","\n                            ",225],["T_OBJECT_OPERATOR","->",226],["T_STRING","select",226],"(",")",["T_WHITESPACE","\n                            ",226],["T_OBJECT_OPERATOR","->",227],["T_STRING","bind",227],"(",["T_VARIABLE","$rowCount",227],["T_OBJECT_OPERATOR","->",227],["T_STRING","getBind",227],"(",")",")",["T_WHITESPACE","\n                            ",227],["T_OBJECT_OPERATOR","->",228],["T_STRING","from",228],"(",["T_VARIABLE","$rowCount",228],",",["T_WHITESPACE"," ",228],["T_VARIABLE","$expression",228],")",";",["T_WHITESPACE","\n        ",228],"}",["T_WHITESPACE"," ",229],["T_ELSE","else",229],["T_WHITESPACE"," ",229],"{",["T_WHITESPACE","\n            ",229],["T_VARIABLE","$columnParts",230],["T_WHITESPACE"," ",230],"=",["T_WHITESPACE"," ",230],["T_VARIABLE","$rowCount",230],["T_OBJECT_OPERATOR","->",230],["T_STRING","getPart",230],"(",["T_STRING","Zend_Db_Select",230],["T_DOUBLE_COLON","::",230],["T_STRING","COLUMNS",230],")",";",["T_WHITESPACE","\n            ",230],["T_VARIABLE","$groupParts",231],["T_WHITESPACE","  ",231],"=",["T_WHITESPACE"," ",231],["T_VARIABLE","$rowCount",231],["T_OBJECT_OPERATOR","->",231],["T_STRING","getPart",231],"(",["T_STRING","Zend_Db_Select",231],["T_DOUBLE_COLON","::",231],["T_STRING","GROUP",231],")",";",["T_WHITESPACE","\n            ",231],["T_VARIABLE","$havingParts",232],["T_WHITESPACE"," ",232],"=",["T_WHITESPACE"," ",232],["T_VARIABLE","$rowCount",232],["T_OBJECT_OPERATOR","->",232],["T_STRING","getPart",232],"(",["T_STRING","Zend_Db_Select",232],["T_DOUBLE_COLON","::",232],["T_STRING","HAVING",232],")",";",["T_WHITESPACE","\n            ",232],["T_VARIABLE","$isDistinct",233],["T_WHITESPACE","  ",233],"=",["T_WHITESPACE"," ",233],["T_VARIABLE","$rowCount",233],["T_OBJECT_OPERATOR","->",233],["T_STRING","getPart",233],"(",["T_STRING","Zend_Db_Select",233],["T_DOUBLE_COLON","::",233],["T_STRING","DISTINCT",233],")",";",["T_WHITESPACE","\n\n            ",233],["T_DOC_COMMENT","\/**\n             * If there is more than one column AND it's a DISTINCT query, more\n             * than one group, or if the query has a HAVING clause, then take\n             * the original query and use it as a subquery os the COUNT query.\n             *\/",235],["T_WHITESPACE","\n            ",239],["T_IF","if",240],["T_WHITESPACE"," ",240],"(","(",["T_VARIABLE","$isDistinct",240],["T_WHITESPACE"," ",240],["T_BOOLEAN_AND","&&",240],["T_WHITESPACE"," ",240],"(","(",["T_STRING","count",240],"(",["T_VARIABLE","$columnParts",240],")",["T_WHITESPACE"," ",240],["T_IS_EQUAL","==",240],["T_WHITESPACE"," ",240],["T_LNUMBER","1",240],["T_WHITESPACE"," ",240],["T_BOOLEAN_AND","&&",240],["T_WHITESPACE"," ",240],["T_VARIABLE","$columnParts",240],"[",["T_LNUMBER","0",240],"]","[",["T_LNUMBER","1",240],"]",["T_WHITESPACE"," ",240],["T_IS_EQUAL","==",240],["T_WHITESPACE"," ",240],["T_STRING","Zend_Db_Select",240],["T_DOUBLE_COLON","::",240],["T_STRING","SQL_WILDCARD",240],")",["T_WHITESPACE"," \n                 ",240],["T_BOOLEAN_OR","||",241],["T_WHITESPACE"," ",241],["T_STRING","count",241],"(",["T_VARIABLE","$columnParts",241],")",["T_WHITESPACE"," ",241],">",["T_WHITESPACE"," ",241],["T_LNUMBER","1",241],")",")",["T_WHITESPACE"," ",241],["T_BOOLEAN_OR","||",241],["T_WHITESPACE"," ",241],["T_STRING","count",241],"(",["T_VARIABLE","$groupParts",241],")",["T_WHITESPACE"," ",241],">",["T_WHITESPACE"," ",241],["T_LNUMBER","1",241],["T_WHITESPACE"," ",241],["T_BOOLEAN_OR","||",241],["T_WHITESPACE"," ",241],"!",["T_EMPTY","empty",241],"(",["T_VARIABLE","$havingParts",241],")",")",["T_WHITESPACE"," ",241],"{",["T_WHITESPACE","\n                ",241],["T_VARIABLE","$rowCount",242],["T_OBJECT_OPERATOR","->",242],["T_STRING","reset",242],"(",["T_STRING","Zend_Db_Select",242],["T_DOUBLE_COLON","::",242],["T_STRING","ORDER",242],")",";",["T_WHITESPACE","\n                ",242],["T_VARIABLE","$rowCount",243],["T_WHITESPACE"," ",243],"=",["T_WHITESPACE"," ",243],["T_VARIABLE","$db",243],["T_WHITESPACE","\n                               ",243],["T_OBJECT_OPERATOR","->",244],["T_STRING","select",244],"(",")",["T_WHITESPACE","\n                               ",244],["T_OBJECT_OPERATOR","->",245],["T_STRING","bind",245],"(",["T_VARIABLE","$rowCount",245],["T_OBJECT_OPERATOR","->",245],["T_STRING","getBind",245],"(",")",")",["T_WHITESPACE","\n                               ",245],["T_OBJECT_OPERATOR","->",246],["T_STRING","from",246],"(",["T_VARIABLE","$rowCount",246],")",";",["T_WHITESPACE","\n            ",246],"}",["T_WHITESPACE"," ",247],["T_ELSE","else",247],["T_WHITESPACE"," ",247],["T_IF","if",247],["T_WHITESPACE"," ",247],"(",["T_VARIABLE","$isDistinct",247],")",["T_WHITESPACE"," ",247],"{",["T_WHITESPACE","\n                ",247],["T_VARIABLE","$part",248],["T_WHITESPACE"," ",248],"=",["T_WHITESPACE"," ",248],["T_VARIABLE","$columnParts",248],"[",["T_LNUMBER","0",248],"]",";",["T_WHITESPACE","\n\n                ",248],["T_IF","if",250],["T_WHITESPACE"," ",250],"(",["T_VARIABLE","$part",250],"[",["T_LNUMBER","1",250],"]",["T_WHITESPACE"," ",250],["T_IS_NOT_IDENTICAL","!==",250],["T_WHITESPACE"," ",250],["T_STRING","Zend_Db_Select",250],["T_DOUBLE_COLON","::",250],["T_STRING","SQL_WILDCARD",250],["T_WHITESPACE"," ",250],["T_BOOLEAN_AND","&&",250],["T_WHITESPACE"," ",250],"!","(",["T_VARIABLE","$part",250],"[",["T_LNUMBER","1",250],"]",["T_WHITESPACE"," ",250],["T_INSTANCEOF","instanceof",250],["T_WHITESPACE"," ",250],["T_STRING","Zend_Db_Expr",250],")",")",["T_WHITESPACE"," ",250],"{",["T_WHITESPACE","\n                    ",250],["T_VARIABLE","$column",251],["T_WHITESPACE"," ",251],"=",["T_WHITESPACE"," ",251],["T_VARIABLE","$db",251],["T_OBJECT_OPERATOR","->",251],["T_STRING","quoteIdentifier",251],"(",["T_VARIABLE","$part",251],"[",["T_LNUMBER","1",251],"]",",",["T_WHITESPACE"," ",251],["T_STRING","true",251],")",";",["T_WHITESPACE","\n\n                    ",251],["T_IF","if",253],["T_WHITESPACE"," ",253],"(","!",["T_EMPTY","empty",253],"(",["T_VARIABLE","$part",253],"[",["T_LNUMBER","0",253],"]",")",")",["T_WHITESPACE"," ",253],"{",["T_WHITESPACE","\n                        ",253],["T_VARIABLE","$column",254],["T_WHITESPACE"," ",254],"=",["T_WHITESPACE"," ",254],["T_VARIABLE","$db",254],["T_OBJECT_OPERATOR","->",254],["T_STRING","quoteIdentifier",254],"(",["T_VARIABLE","$part",254],"[",["T_LNUMBER","0",254],"]",",",["T_WHITESPACE"," ",254],["T_STRING","true",254],")",["T_WHITESPACE"," ",254],".",["T_WHITESPACE"," ",254],["T_CONSTANT_ENCAPSED_STRING","'.'",254],["T_WHITESPACE"," ",254],".",["T_WHITESPACE"," ",254],["T_VARIABLE","$column",254],";",["T_WHITESPACE","\n                    ",254],"}",["T_WHITESPACE","\n\n                    ",255],["T_VARIABLE","$groupPart",257],["T_WHITESPACE"," ",257],"=",["T_WHITESPACE"," ",257],["T_VARIABLE","$column",257],";",["T_WHITESPACE","\n                ",257],"}",["T_WHITESPACE","\n            ",258],"}",["T_WHITESPACE"," ",259],["T_ELSE","else",259],["T_WHITESPACE"," ",259],["T_IF","if",259],["T_WHITESPACE"," ",259],"(","!",["T_EMPTY","empty",259],"(",["T_VARIABLE","$groupParts",259],")",")",["T_WHITESPACE"," ",259],"{",["T_WHITESPACE","\n                ",259],["T_VARIABLE","$groupPart",260],["T_WHITESPACE"," ",260],"=",["T_WHITESPACE"," ",260],["T_VARIABLE","$db",260],["T_OBJECT_OPERATOR","->",260],["T_STRING","quoteIdentifier",260],"(",["T_VARIABLE","$groupParts",260],"[",["T_LNUMBER","0",260],"]",",",["T_WHITESPACE"," ",260],["T_STRING","true",260],")",";",["T_WHITESPACE","\n            ",260],"}",["T_WHITESPACE","\n\n            ",261],["T_DOC_COMMENT","\/**\n             * If the original query had a GROUP BY or a DISTINCT part and only\n             * one column was specified, create a COUNT(DISTINCT ) query instead\n             * of a regular COUNT query.\n             *\/",263],["T_WHITESPACE","\n            ",267],["T_IF","if",268],["T_WHITESPACE"," ",268],"(","!",["T_EMPTY","empty",268],"(",["T_VARIABLE","$groupPart",268],")",")",["T_WHITESPACE"," ",268],"{",["T_WHITESPACE","\n                ",268],["T_VARIABLE","$countPart",269],["T_WHITESPACE"," ",269],"=",["T_WHITESPACE"," ",269],["T_CONSTANT_ENCAPSED_STRING","'COUNT(DISTINCT '",269],["T_WHITESPACE"," ",269],".",["T_WHITESPACE"," ",269],["T_VARIABLE","$groupPart",269],["T_WHITESPACE"," ",269],".",["T_WHITESPACE"," ",269],["T_CONSTANT_ENCAPSED_STRING","') AS '",269],";",["T_WHITESPACE","\n            ",269],"}",["T_WHITESPACE","\n\n            ",270],["T_DOC_COMMENT","\/**\n             * Create the COUNT part of the query\n             *\/",272],["T_WHITESPACE","\n            ",274],["T_VARIABLE","$expression",275],["T_WHITESPACE"," ",275],"=",["T_WHITESPACE"," ",275],["T_NEW","new",275],["T_WHITESPACE"," ",275],["T_STRING","Zend_Db_Expr",275],"(",["T_VARIABLE","$countPart",275],["T_WHITESPACE"," ",275],".",["T_WHITESPACE"," ",275],["T_VARIABLE","$countColumn",275],")",";",["T_WHITESPACE","\n\n            ",275],["T_VARIABLE","$rowCount",277],["T_OBJECT_OPERATOR","->",277],["T_STRING","reset",277],"(",["T_STRING","Zend_Db_Select",277],["T_DOUBLE_COLON","::",277],["T_STRING","COLUMNS",277],")",["T_WHITESPACE","\n                     ",277],["T_OBJECT_OPERATOR","->",278],["T_STRING","reset",278],"(",["T_STRING","Zend_Db_Select",278],["T_DOUBLE_COLON","::",278],["T_STRING","ORDER",278],")",["T_WHITESPACE","\n                     ",278],["T_OBJECT_OPERATOR","->",279],["T_STRING","reset",279],"(",["T_STRING","Zend_Db_Select",279],["T_DOUBLE_COLON","::",279],["T_STRING","LIMIT_OFFSET",279],")",["T_WHITESPACE","\n                     ",279],["T_OBJECT_OPERATOR","->",280],["T_STRING","reset",280],"(",["T_STRING","Zend_Db_Select",280],["T_DOUBLE_COLON","::",280],["T_STRING","GROUP",280],")",["T_WHITESPACE","\n                     ",280],["T_OBJECT_OPERATOR","->",281],["T_STRING","reset",281],"(",["T_STRING","Zend_Db_Select",281],["T_DOUBLE_COLON","::",281],["T_STRING","DISTINCT",281],")",["T_WHITESPACE","\n                     ",281],["T_OBJECT_OPERATOR","->",282],["T_STRING","reset",282],"(",["T_STRING","Zend_Db_Select",282],["T_DOUBLE_COLON","::",282],["T_STRING","HAVING",282],")",["T_WHITESPACE","\n                     ",282],["T_OBJECT_OPERATOR","->",283],["T_STRING","columns",283],"(",["T_VARIABLE","$expression",283],")",";",["T_WHITESPACE","\n        ",283],"}",["T_WHITESPACE","\n\n        ",284],["T_VARIABLE","$this",286],["T_OBJECT_OPERATOR","->",286],["T_STRING","_countSelect",286],["T_WHITESPACE"," ",286],"=",["T_WHITESPACE"," ",286],["T_VARIABLE","$rowCount",286],";",["T_WHITESPACE","\n\n        ",286],["T_RETURN","return",288],["T_WHITESPACE"," ",288],["T_VARIABLE","$rowCount",288],";",["T_WHITESPACE","\n    ",288],"}",["T_WHITESPACE","\n",289],"}",["T_WHITESPACE","\n",290]]
[["T_OPEN_TAG","<?php\n",1],["T_WHITESPACE","\n",2],["T_DOC_COMMENT","\/**\n * This class provides functions for converting CSS styles into inline style attributes in your HTML code.\n *\n * For more information, please see the README.md file.\n *\n * @author Cameron Brooks\n * @author Jaime Prado\n * @author Roman O\u00c5\u00beana <ozana@omdesign.cz>\n *\/",3],["T_WHITESPACE","\n",11],["T_CLASS","class",12],["T_WHITESPACE"," ",12],["T_STRING","Pelago_Emogrifier",12],["T_WHITESPACE"," ",12],"{",["T_WHITESPACE","\n    ",12],["T_DOC_COMMENT","\/**\n     * @var string\n     *\/",13],["T_WHITESPACE","\n    ",15],["T_CONST","const",16],["T_WHITESPACE"," ",16],["T_STRING","ENCODING",16],["T_WHITESPACE"," ",16],"=",["T_WHITESPACE"," ",16],["T_CONSTANT_ENCAPSED_STRING","'UTF-8'",16],";",["T_WHITESPACE","\n\n    ",16],["T_DOC_COMMENT","\/**\n     * @var integer\n     *\/",18],["T_WHITESPACE","\n    ",20],["T_CONST","const",21],["T_WHITESPACE"," ",21],["T_STRING","CACHE_KEY_CSS",21],["T_WHITESPACE"," ",21],"=",["T_WHITESPACE"," ",21],["T_LNUMBER","0",21],";",["T_WHITESPACE","\n\n    ",21],["T_DOC_COMMENT","\/**\n     * @var integer\n     *\/",23],["T_WHITESPACE","\n    ",25],["T_CONST","const",26],["T_WHITESPACE"," ",26],["T_STRING","CACHE_KEY_SELECTOR",26],["T_WHITESPACE"," ",26],"=",["T_WHITESPACE"," ",26],["T_LNUMBER","1",26],";",["T_WHITESPACE","\n\n    ",26],["T_DOC_COMMENT","\/**\n     * @var integer\n     *\/",28],["T_WHITESPACE","\n    ",30],["T_CONST","const",31],["T_WHITESPACE"," ",31],["T_STRING","CACHE_KEY_XPATH",31],["T_WHITESPACE"," ",31],"=",["T_WHITESPACE"," ",31],["T_LNUMBER","2",31],";",["T_WHITESPACE","\n\n    ",31],["T_DOC_COMMENT","\/**\n     * @var integer\n     *\/",33],["T_WHITESPACE","\n    ",35],["T_CONST","const",36],["T_WHITESPACE"," ",36],["T_STRING","CACHE_KEY_CSS_DECLARATION_BLOCK",36],["T_WHITESPACE"," ",36],"=",["T_WHITESPACE"," ",36],["T_LNUMBER","3",36],";",["T_WHITESPACE","\n\n    ",36],["T_DOC_COMMENT","\/**\n     * for calculating nth-of-type and nth-child selectors\n     *\n     * @var integer\n     *\/",38],["T_WHITESPACE","\n    ",42],["T_CONST","const",43],["T_WHITESPACE"," ",43],["T_STRING","INDEX",43],["T_WHITESPACE"," ",43],"=",["T_WHITESPACE"," ",43],["T_LNUMBER","0",43],";",["T_WHITESPACE","\n\n    ",43],["T_DOC_COMMENT","\/**\n     * for calculating nth-of-type and nth-child selectors\n     *\n     * @var integer\n     *\/",45],["T_WHITESPACE","\n    ",49],["T_CONST","const",50],["T_WHITESPACE"," ",50],["T_STRING","MULTIPLIER",50],["T_WHITESPACE"," ",50],"=",["T_WHITESPACE"," ",50],["T_LNUMBER","1",50],";",["T_WHITESPACE","\n\n    ",50],["T_DOC_COMMENT","\/**\n     * @var string\n     *\/",52],["T_WHITESPACE","\n    ",54],["T_CONST","const",55],["T_WHITESPACE"," ",55],["T_STRING","ID_ATTRIBUTE_MATCHER",55],["T_WHITESPACE"," ",55],"=",["T_WHITESPACE"," ",55],["T_CONSTANT_ENCAPSED_STRING","'\/(\\\\w+)?\\\\#([\\\\w\\\\-]+)\/'",55],";",["T_WHITESPACE","\n\n    ",55],["T_DOC_COMMENT","\/**\n     * @var string\n     *\/",57],["T_WHITESPACE","\n    ",59],["T_CONST","const",60],["T_WHITESPACE"," ",60],["T_STRING","CLASS_ATTRIBUTE_MATCHER",60],["T_WHITESPACE"," ",60],"=",["T_WHITESPACE"," ",60],["T_CONSTANT_ENCAPSED_STRING","'\/(\\\\w+|[\\\\*\\\\]])?((\\\\.[\\\\w\\\\-]+)+)\/'",60],";",["T_WHITESPACE","\n\n    ",60],["T_DOC_COMMENT","\/**\n     * @var string\n     *\/",62],["T_WHITESPACE","\n    ",64],["T_PRIVATE","private",65],["T_WHITESPACE"," ",65],["T_VARIABLE","$html",65],["T_WHITESPACE"," ",65],"=",["T_WHITESPACE"," ",65],["T_CONSTANT_ENCAPSED_STRING","''",65],";",["T_WHITESPACE","\n\n    ",65],["T_DOC_COMMENT","\/**\n     * @var string\n     *\/",67],["T_WHITESPACE","\n    ",69],["T_PRIVATE","private",70],["T_WHITESPACE"," ",70],["T_VARIABLE","$css",70],["T_WHITESPACE"," ",70],"=",["T_WHITESPACE"," ",70],["T_CONSTANT_ENCAPSED_STRING","''",70],";",["T_WHITESPACE","\n\n    ",70],["T_DOC_COMMENT","\/**\n     * @var bool\n     *\/",72],["T_WHITESPACE","\n    ",74],["T_PRIVATE","private",75],["T_WHITESPACE"," ",75],["T_VARIABLE","$parseInlineStyleTags",75],["T_WHITESPACE"," ",75],"=",["T_WHITESPACE"," ",75],["T_STRING","true",75],";",["T_WHITESPACE","\n\n    ",75],["T_DOC_COMMENT","\/**\n     * @var array<string>\n     *\/",77],["T_WHITESPACE","\n    ",79],["T_PRIVATE","private",80],["T_WHITESPACE"," ",80],["T_VARIABLE","$unprocessableHtmlTags",80],["T_WHITESPACE"," ",80],"=",["T_WHITESPACE"," ",80],["T_ARRAY","array",80],"(",["T_CONSTANT_ENCAPSED_STRING","'wbr'",80],")",";",["T_WHITESPACE","\n\n    ",80],["T_DOC_COMMENT","\/**\n     * @var array<array>\n     *\/",82],["T_WHITESPACE","\n    ",84],["T_PRIVATE","private",85],["T_WHITESPACE"," ",85],["T_VARIABLE","$caches",85],["T_WHITESPACE"," ",85],"=",["T_WHITESPACE"," ",85],["T_ARRAY","array",85],"(",["T_WHITESPACE","\n        ",85],["T_STRING","self",86],["T_DOUBLE_COLON","::",86],["T_STRING","CACHE_KEY_CSS",86],["T_WHITESPACE"," ",86],["T_DOUBLE_ARROW","=>",86],["T_WHITESPACE"," ",86],["T_ARRAY","array",86],"(",")",",",["T_WHITESPACE","\n        ",86],["T_STRING","self",87],["T_DOUBLE_COLON","::",87],["T_STRING","CACHE_KEY_SELECTOR",87],["T_WHITESPACE"," ",87],["T_DOUBLE_ARROW","=>",87],["T_WHITESPACE"," ",87],["T_ARRAY","array",87],"(",")",",",["T_WHITESPACE","\n        ",87],["T_STRING","self",88],["T_DOUBLE_COLON","::",88],["T_STRING","CACHE_KEY_XPATH",88],["T_WHITESPACE"," ",88],["T_DOUBLE_ARROW","=>",88],["T_WHITESPACE"," ",88],["T_ARRAY","array",88],"(",")",",",["T_WHITESPACE","\n        ",88],["T_STRING","self",89],["T_DOUBLE_COLON","::",89],["T_STRING","CACHE_KEY_CSS_DECLARATION_BLOCK",89],["T_WHITESPACE"," ",89],["T_DOUBLE_ARROW","=>",89],["T_WHITESPACE"," ",89],["T_ARRAY","array",89],"(",")",",",["T_WHITESPACE","\n    ",89],")",";",["T_WHITESPACE","\n\n    ",90],["T_DOC_COMMENT","\/**\n     * the visited nodes with the XPath paths as array keys\n     *\n     * @var array<\\DOMNode>\n     *\/",92],["T_WHITESPACE","\n    ",96],["T_PRIVATE","private",97],["T_WHITESPACE"," ",97],["T_VARIABLE","$visitedNodes",97],["T_WHITESPACE"," ",97],"=",["T_WHITESPACE"," ",97],["T_ARRAY","array",97],"(",")",";",["T_WHITESPACE","\n\n    ",97],["T_DOC_COMMENT","\/**\n     * the styles to apply to the nodes with the XPath paths as array keys for the outer array and the attribute names\/values\n     * as key\/value pairs for the inner array\n     *\n     * @var array<array><string>\n     *\/",99],["T_WHITESPACE","\n    ",104],["T_PRIVATE","private",105],["T_WHITESPACE"," ",105],["T_VARIABLE","$styleAttributesForNodes",105],["T_WHITESPACE"," ",105],"=",["T_WHITESPACE"," ",105],["T_ARRAY","array",105],"(",")",";",["T_WHITESPACE","\n\n    ",105],["T_DOC_COMMENT","\/**\n     * This attribute applies to the case where you want to preserve your original text encoding.\n     *\n     * By default, emogrifier translates your text into HTML entities for two reasons:\n     *\n     * 1. Because of client incompatibilities, it is better practice to send out HTML entities rather than unicode over email.\n     *\n     * 2. It translates any illegal XML characters that DOMDocument cannot work with.\n     *\n     * If you would like to preserve your original encoding, set this attribute to TRUE.\n     *\n     * @var boolean\n     *\/",107],["T_WHITESPACE","\n    ",119],["T_PUBLIC","public",120],["T_WHITESPACE"," ",120],["T_VARIABLE","$preserveEncoding",120],["T_WHITESPACE"," ",120],"=",["T_WHITESPACE"," ",120],["T_STRING","FALSE",120],";",["T_WHITESPACE","\n\n    ",120],["T_DOC_COMMENT","\/**\n     * The constructor.\n     *\n     * @param string $html the HTML to emogrify, must be UTF-8-encoded\n     * @param string $css the CSS to merge, must be UTF-8-encoded\n     *\/",122],["T_WHITESPACE","\n    ",127],["T_PUBLIC","public",128],["T_WHITESPACE"," ",128],["T_FUNCTION","function",128],["T_WHITESPACE"," ",128],["T_STRING","__construct",128],"(",["T_VARIABLE","$html",128],["T_WHITESPACE"," ",128],"=",["T_WHITESPACE"," ",128],["T_CONSTANT_ENCAPSED_STRING","''",128],",",["T_WHITESPACE"," ",128],["T_VARIABLE","$css",128],["T_WHITESPACE"," ",128],"=",["T_WHITESPACE"," ",128],["T_CONSTANT_ENCAPSED_STRING","''",128],")",["T_WHITESPACE"," ",128],"{",["T_WHITESPACE","\n        ",128],["T_VARIABLE","$this",129],["T_OBJECT_OPERATOR","->",129],["T_STRING","setHtml",129],"(",["T_VARIABLE","$html",129],")",";",["T_WHITESPACE","\n        ",129],["T_VARIABLE","$this",130],["T_OBJECT_OPERATOR","->",130],["T_STRING","setCss",130],"(",["T_VARIABLE","$css",130],")",";",["T_WHITESPACE","\n    ",130],"}",["T_WHITESPACE","\n\n    ",131],["T_DOC_COMMENT","\/**\n     * The destructor.\n     *\/",133],["T_WHITESPACE","\n    ",135],["T_PUBLIC","public",136],["T_WHITESPACE"," ",136],["T_FUNCTION","function",136],["T_WHITESPACE"," ",136],["T_STRING","__destruct",136],"(",")",["T_WHITESPACE"," ",136],"{",["T_WHITESPACE","\n        ",136],["T_VARIABLE","$this",137],["T_OBJECT_OPERATOR","->",137],["T_STRING","purgeVisitedNodes",137],"(",")",";",["T_WHITESPACE","\n    ",137],"}",["T_WHITESPACE","\n\n    ",138],["T_DOC_COMMENT","\/**\n     * Sets the HTML to emogrify.\n     *\n     * @param string $html the HTML to emogrify, must be UTF-8-encoded\n     *\n     * @return void\n     *\/",140],["T_WHITESPACE","\n    ",146],["T_PUBLIC","public",147],["T_WHITESPACE"," ",147],["T_FUNCTION","function",147],["T_WHITESPACE"," ",147],["T_STRING","setHtml",147],"(",["T_VARIABLE","$html",147],["T_WHITESPACE"," ",147],"=",["T_WHITESPACE"," ",147],["T_CONSTANT_ENCAPSED_STRING","''",147],")",["T_WHITESPACE"," ",147],"{",["T_WHITESPACE","\n        ",147],["T_VARIABLE","$this",148],["T_OBJECT_OPERATOR","->",148],["T_STRING","html",148],["T_WHITESPACE"," ",148],"=",["T_WHITESPACE"," ",148],["T_VARIABLE","$html",148],";",["T_WHITESPACE","\n    ",148],"}",["T_WHITESPACE","\n\n    ",149],["T_DOC_COMMENT","\/**\n     * Sets the CSS to merge with the HTML.\n     *\n     * @param string $css the CSS to merge, must be UTF-8-encoded\n     *\n     * @return void\n     *\/",151],["T_WHITESPACE","\n    ",157],["T_PUBLIC","public",158],["T_WHITESPACE"," ",158],["T_FUNCTION","function",158],["T_WHITESPACE"," ",158],["T_STRING","setCss",158],"(",["T_VARIABLE","$css",158],["T_WHITESPACE"," ",158],"=",["T_WHITESPACE"," ",158],["T_CONSTANT_ENCAPSED_STRING","''",158],")",["T_WHITESPACE"," ",158],"{",["T_WHITESPACE","\n        ",158],["T_VARIABLE","$this",159],["T_OBJECT_OPERATOR","->",159],["T_STRING","css",159],["T_WHITESPACE"," ",159],"=",["T_WHITESPACE"," ",159],["T_VARIABLE","$css",159],";",["T_WHITESPACE","\n    ",159],"}",["T_WHITESPACE","\n\n    ",160],["T_PUBLIC","public",162],["T_WHITESPACE"," ",162],["T_FUNCTION","function",162],["T_WHITESPACE"," ",162],["T_STRING","setParseInlineStyleTags",162],"(",["T_VARIABLE","$value",162],")",["T_WHITESPACE"," ",162],"{",["T_WHITESPACE","\n        ",162],["T_VARIABLE","$this",163],["T_OBJECT_OPERATOR","->",163],["T_STRING","parseInlineStyleTags",163],["T_WHITESPACE"," ",163],"=",["T_WHITESPACE"," ",163],["T_VARIABLE","$value",163],";",["T_WHITESPACE","\n    ",163],"}",["T_WHITESPACE","\n\n    ",164],["T_DOC_COMMENT","\/**\n     * Clears all caches.\n     *\n     * @return void\n     *\/",166],["T_WHITESPACE","\n    ",170],["T_PRIVATE","private",171],["T_WHITESPACE"," ",171],["T_FUNCTION","function",171],["T_WHITESPACE"," ",171],["T_STRING","clearAllCaches",171],"(",")",["T_WHITESPACE"," ",171],"{",["T_WHITESPACE","\n        ",171],["T_VARIABLE","$this",172],["T_OBJECT_OPERATOR","->",172],["T_STRING","clearCache",172],"(",["T_STRING","self",172],["T_DOUBLE_COLON","::",172],["T_STRING","CACHE_KEY_CSS",172],")",";",["T_WHITESPACE","\n        ",172],["T_VARIABLE","$this",173],["T_OBJECT_OPERATOR","->",173],["T_STRING","clearCache",173],"(",["T_STRING","self",173],["T_DOUBLE_COLON","::",173],["T_STRING","CACHE_KEY_SELECTOR",173],")",";",["T_WHITESPACE","\n        ",173],["T_VARIABLE","$this",174],["T_OBJECT_OPERATOR","->",174],["T_STRING","clearCache",174],"(",["T_STRING","self",174],["T_DOUBLE_COLON","::",174],["T_STRING","CACHE_KEY_XPATH",174],")",";",["T_WHITESPACE","\n        ",174],["T_VARIABLE","$this",175],["T_OBJECT_OPERATOR","->",175],["T_STRING","clearCache",175],"(",["T_STRING","self",175],["T_DOUBLE_COLON","::",175],["T_STRING","CACHE_KEY_CSS_DECLARATION_BLOCK",175],")",";",["T_WHITESPACE","\n    ",175],"}",["T_WHITESPACE","\n\n    ",176],["T_DOC_COMMENT","\/**\n     * Clears a single cache by key.\n     *\n     * @param integer $key the cache key, must be CACHE_KEY_CSS, CACHE_KEY_SELECTOR, CACHE_KEY_XPATH or CACHE_KEY_CSS_DECLARATION_BLOCK\n     *\n     * @return void\n     *\n     * @throws \\InvalidArgumentException\n     *\/",178],["T_WHITESPACE","\n    ",186],["T_PRIVATE","private",187],["T_WHITESPACE"," ",187],["T_FUNCTION","function",187],["T_WHITESPACE"," ",187],["T_STRING","clearCache",187],"(",["T_VARIABLE","$key",187],")",["T_WHITESPACE"," ",187],"{",["T_WHITESPACE","\n        ",187],["T_VARIABLE","$allowedCacheKeys",188],["T_WHITESPACE"," ",188],"=",["T_WHITESPACE"," ",188],["T_ARRAY","array",188],"(",["T_STRING","self",188],["T_DOUBLE_COLON","::",188],["T_STRING","CACHE_KEY_CSS",188],",",["T_WHITESPACE"," ",188],["T_STRING","self",188],["T_DOUBLE_COLON","::",188],["T_STRING","CACHE_KEY_SELECTOR",188],",",["T_WHITESPACE"," ",188],["T_STRING","self",188],["T_DOUBLE_COLON","::",188],["T_STRING","CACHE_KEY_XPATH",188],",",["T_WHITESPACE"," ",188],["T_STRING","self",188],["T_DOUBLE_COLON","::",188],["T_STRING","CACHE_KEY_CSS_DECLARATION_BLOCK",188],")",";",["T_WHITESPACE","\n        ",188],["T_IF","if",189],["T_WHITESPACE"," ",189],"(","!",["T_STRING","in_array",189],"(",["T_VARIABLE","$key",189],",",["T_WHITESPACE"," ",189],["T_VARIABLE","$allowedCacheKeys",189],",",["T_WHITESPACE"," ",189],["T_STRING","TRUE",189],")",")",["T_WHITESPACE"," ",189],"{",["T_WHITESPACE","\n            ",189],["T_THROW","throw",190],["T_WHITESPACE"," ",190],["T_NEW","new",190],["T_WHITESPACE"," ",190],["T_NS_SEPARATOR","\\",190],["T_STRING","InvalidArgumentException",190],"(",["T_CONSTANT_ENCAPSED_STRING","'Invalid cache key: '",190],["T_WHITESPACE"," ",190],".",["T_WHITESPACE"," ",190],["T_VARIABLE","$key",190],",",["T_WHITESPACE"," ",190],["T_LNUMBER","1391822035",190],")",";",["T_WHITESPACE","\n        ",190],"}",["T_WHITESPACE","\n\n        ",191],["T_VARIABLE","$this",193],["T_OBJECT_OPERATOR","->",193],["T_STRING","caches",193],"[",["T_VARIABLE","$key",193],"]",["T_WHITESPACE"," ",193],"=",["T_WHITESPACE"," ",193],["T_ARRAY","array",193],"(",")",";",["T_WHITESPACE","\n    ",193],"}",["T_WHITESPACE","\n\n    ",194],["T_DOC_COMMENT","\/**\n     * Purges the visited nodes.\n     *\n     * @return void\n     *\/",196],["T_WHITESPACE","\n    ",200],["T_PRIVATE","private",201],["T_WHITESPACE"," ",201],["T_FUNCTION","function",201],["T_WHITESPACE"," ",201],["T_STRING","purgeVisitedNodes",201],"(",")",["T_WHITESPACE"," ",201],"{",["T_WHITESPACE","\n        ",201],["T_VARIABLE","$this",202],["T_OBJECT_OPERATOR","->",202],["T_STRING","visitedNodes",202],["T_WHITESPACE"," ",202],"=",["T_WHITESPACE"," ",202],["T_ARRAY","array",202],"(",")",";",["T_WHITESPACE","\n        ",202],["T_VARIABLE","$this",203],["T_OBJECT_OPERATOR","->",203],["T_STRING","styleAttributesForNodes",203],["T_WHITESPACE"," ",203],"=",["T_WHITESPACE"," ",203],["T_ARRAY","array",203],"(",")",";",["T_WHITESPACE","\n    ",203],"}",["T_WHITESPACE","\n\n    ",204],["T_DOC_COMMENT","\/**\n     * Marks a tag for removal.\n     *\n     * There are some HTML tags that DOMDocument cannot process, and it will throw an error if it encounters them.\n     * In particular, DOMDocument will complain if you try to use HTML5 tags in an XHTML document.\n     *\n     * Note: The tags will not be removed if they have any content.\n     *\n     * @param string $tagName the tag name, e.g., \"p\"\n     *\n     * @return void\n     *\/",206],["T_WHITESPACE","\n    ",217],["T_PUBLIC","public",218],["T_WHITESPACE"," ",218],["T_FUNCTION","function",218],["T_WHITESPACE"," ",218],["T_STRING","addUnprocessableHtmlTag",218],"(",["T_VARIABLE","$tagName",218],")",["T_WHITESPACE"," ",218],"{",["T_WHITESPACE","\n        ",218],["T_VARIABLE","$this",219],["T_OBJECT_OPERATOR","->",219],["T_STRING","unprocessableHtmlTags",219],"[","]",["T_WHITESPACE"," ",219],"=",["T_WHITESPACE"," ",219],["T_VARIABLE","$tagName",219],";",["T_WHITESPACE","\n    ",219],"}",["T_WHITESPACE","\n\n    ",220],["T_DOC_COMMENT","\/**\n     * Drops a tag from the removal list.\n     *\n     * @param string $tagName the tag name, e.g., \"p\"\n     *\n     * @return void\n     *\/",222],["T_WHITESPACE","\n    ",228],["T_PUBLIC","public",229],["T_WHITESPACE"," ",229],["T_FUNCTION","function",229],["T_WHITESPACE"," ",229],["T_STRING","removeUnprocessableHtmlTag",229],"(",["T_VARIABLE","$tagName",229],")",["T_WHITESPACE"," ",229],"{",["T_WHITESPACE","\n        ",229],["T_VARIABLE","$key",230],["T_WHITESPACE"," ",230],"=",["T_WHITESPACE"," ",230],["T_STRING","array_search",230],"(",["T_VARIABLE","$tagName",230],",",["T_WHITESPACE"," ",230],["T_VARIABLE","$this",230],["T_OBJECT_OPERATOR","->",230],["T_STRING","unprocessableHtmlTags",230],",",["T_WHITESPACE"," ",230],["T_STRING","TRUE",230],")",";",["T_WHITESPACE","\n        ",230],["T_IF","if",231],["T_WHITESPACE"," ",231],"(",["T_VARIABLE","$key",231],["T_WHITESPACE"," ",231],["T_IS_NOT_IDENTICAL","!==",231],["T_WHITESPACE"," ",231],["T_STRING","FALSE",231],")",["T_WHITESPACE"," ",231],"{",["T_WHITESPACE","\n            ",231],["T_UNSET","unset",232],"(",["T_VARIABLE","$this",232],["T_OBJECT_OPERATOR","->",232],["T_STRING","unprocessableHtmlTags",232],"[",["T_VARIABLE","$key",232],"]",")",";",["T_WHITESPACE","\n        ",232],"}",["T_WHITESPACE","\n    ",233],"}",["T_WHITESPACE","\n\n    ",234],["T_DOC_COMMENT","\/**\n     * Applies the CSS you submit to the HTML you submit.\n     *\n     * This method places the CSS inline.\n     *\n     * @return string\n     *\n     * @throws \\BadMethodCallException\n     *\/",236],["T_WHITESPACE","\n    ",244],["T_PUBLIC","public",245],["T_WHITESPACE"," ",245],["T_FUNCTION","function",245],["T_WHITESPACE"," ",245],["T_STRING","emogrify",245],"(",")",["T_WHITESPACE"," ",245],"{",["T_WHITESPACE","\n        ",245],["T_IF","if",246],["T_WHITESPACE"," ",246],"(",["T_VARIABLE","$this",246],["T_OBJECT_OPERATOR","->",246],["T_STRING","html",246],["T_WHITESPACE"," ",246],["T_IS_IDENTICAL","===",246],["T_WHITESPACE"," ",246],["T_CONSTANT_ENCAPSED_STRING","''",246],")",["T_WHITESPACE"," ",246],"{",["T_WHITESPACE","\n            ",246],["T_THROW","throw",247],["T_WHITESPACE"," ",247],["T_NEW","new",247],["T_WHITESPACE"," ",247],["T_NS_SEPARATOR","\\",247],["T_STRING","BadMethodCallException",247],"(",["T_CONSTANT_ENCAPSED_STRING","'Please set some HTML first before calling emogrify.'",247],",",["T_WHITESPACE"," ",247],["T_LNUMBER","1390393096",247],")",";",["T_WHITESPACE","\n        ",247],"}",["T_WHITESPACE","\n\n        ",248],["T_VARIABLE","$xmlDocument",250],["T_WHITESPACE"," ",250],"=",["T_WHITESPACE"," ",250],["T_VARIABLE","$this",250],["T_OBJECT_OPERATOR","->",250],["T_STRING","createXmlDocument",250],"(",")",";",["T_WHITESPACE","\n        ",250],["T_VARIABLE","$xpath",251],["T_WHITESPACE"," ",251],"=",["T_WHITESPACE"," ",251],["T_NEW","new",251],["T_WHITESPACE"," ",251],["T_NS_SEPARATOR","\\",251],["T_STRING","DOMXPath",251],"(",["T_VARIABLE","$xmlDocument",251],")",";",["T_WHITESPACE","\n        ",251],["T_VARIABLE","$this",252],["T_OBJECT_OPERATOR","->",252],["T_STRING","clearAllCaches",252],"(",")",";",["T_WHITESPACE","\n\n        ",252],["T_COMMENT","\/\/ before be begin processing the CSS file, parse the document and normalize all existing CSS attributes (changes 'DISPLAY: none' to 'display: none');\n",254],["T_WHITESPACE","        ",255],["T_COMMENT","\/\/ we wouldn't have to do this if DOMXPath supported XPath 2.0.\n",255],["T_WHITESPACE","        ",256],["T_COMMENT","\/\/ also store a reference of nodes with existing inline styles so we don't overwrite them\n",256],["T_WHITESPACE","        ",257],["T_VARIABLE","$this",257],["T_OBJECT_OPERATOR","->",257],["T_STRING","purgeVisitedNodes",257],"(",")",";",["T_WHITESPACE","\n\n        ",257],["T_VARIABLE","$nodesWithStyleAttributes",259],["T_WHITESPACE"," ",259],"=",["T_WHITESPACE"," ",259],["T_VARIABLE","$xpath",259],["T_OBJECT_OPERATOR","->",259],["T_STRING","query",259],"(",["T_CONSTANT_ENCAPSED_STRING","'\/\/*[@style]'",259],")",";",["T_WHITESPACE","\n        ",259],["T_IF","if",260],["T_WHITESPACE"," ",260],"(",["T_VARIABLE","$nodesWithStyleAttributes",260],["T_WHITESPACE"," ",260],["T_IS_NOT_IDENTICAL","!==",260],["T_WHITESPACE"," ",260],["T_STRING","FALSE",260],")",["T_WHITESPACE"," ",260],"{",["T_WHITESPACE","\n            ",260],["T_DOC_COMMENT","\/** @var $nodeWithStyleAttribute \\DOMNode *\/",261],["T_WHITESPACE","\n            ",261],["T_FOREACH","foreach",262],["T_WHITESPACE"," ",262],"(",["T_VARIABLE","$nodesWithStyleAttributes",262],["T_WHITESPACE"," ",262],["T_AS","as",262],["T_WHITESPACE"," ",262],["T_VARIABLE","$node",262],")",["T_WHITESPACE"," ",262],"{",["T_WHITESPACE","\n                ",262],["T_VARIABLE","$normalizedOriginalStyle",263],["T_WHITESPACE"," ",263],"=",["T_WHITESPACE"," ",263],["T_STRING","preg_replace_callback",263],"(",["T_WHITESPACE","\n                    ",263],["T_CONSTANT_ENCAPSED_STRING","'\/[A-z\\\\-]+(?=\\\\:)\/S'",264],",",["T_WHITESPACE","\n                    ",264],["T_FUNCTION","function",265],["T_WHITESPACE"," ",265],"(",["T_ARRAY","array",265],["T_WHITESPACE"," ",265],["T_VARIABLE","$m",265],")",["T_WHITESPACE"," ",265],"{",["T_WHITESPACE","\n                        ",265],["T_RETURN","return",266],["T_WHITESPACE"," ",266],["T_STRING","strtolower",266],"(",["T_VARIABLE","$m",266],"[",["T_LNUMBER","0",266],"]",")",";",["T_WHITESPACE","\n                    ",266],"}",",",["T_WHITESPACE","\n                    ",267],["T_VARIABLE","$node",268],["T_OBJECT_OPERATOR","->",268],["T_STRING","getAttribute",268],"(",["T_CONSTANT_ENCAPSED_STRING","'style'",268],")",["T_WHITESPACE","\n                ",268],")",";",["T_WHITESPACE","\n\n                ",269],["T_COMMENT","\/\/ in order to not overwrite existing style attributes in the HTML, we have to save the original HTML styles\n",271],["T_WHITESPACE","                ",272],["T_VARIABLE","$nodePath",272],["T_WHITESPACE"," ",272],"=",["T_WHITESPACE"," ",272],["T_VARIABLE","$node",272],["T_OBJECT_OPERATOR","->",272],["T_STRING","getNodePath",272],"(",")",";",["T_WHITESPACE","\n                ",272],["T_IF","if",273],["T_WHITESPACE"," ",273],"(","!",["T_ISSET","isset",273],"(",["T_VARIABLE","$this",273],["T_OBJECT_OPERATOR","->",273],["T_STRING","styleAttributesForNodes",273],"[",["T_VARIABLE","$nodePath",273],"]",")",")",["T_WHITESPACE"," ",273],"{",["T_WHITESPACE","\n                    ",273],["T_VARIABLE","$this",274],["T_OBJECT_OPERATOR","->",274],["T_STRING","styleAttributesForNodes",274],"[",["T_VARIABLE","$nodePath",274],"]",["T_WHITESPACE"," ",274],"=",["T_WHITESPACE"," ",274],["T_VARIABLE","$this",274],["T_OBJECT_OPERATOR","->",274],["T_STRING","parseCssDeclarationBlock",274],"(",["T_VARIABLE","$normalizedOriginalStyle",274],")",";",["T_WHITESPACE","\n                    ",274],["T_VARIABLE","$this",275],["T_OBJECT_OPERATOR","->",275],["T_STRING","visitedNodes",275],"[",["T_VARIABLE","$nodePath",275],"]",["T_WHITESPACE"," ",275],"=",["T_WHITESPACE"," ",275],["T_VARIABLE","$node",275],";",["T_WHITESPACE","\n                ",275],"}",["T_WHITESPACE","\n\n                ",276],["T_VARIABLE","$node",278],["T_OBJECT_OPERATOR","->",278],["T_STRING","setAttribute",278],"(",["T_CONSTANT_ENCAPSED_STRING","'style'",278],",",["T_WHITESPACE"," ",278],["T_VARIABLE","$normalizedOriginalStyle",278],")",";",["T_WHITESPACE","\n            ",278],"}",["T_WHITESPACE","\n        ",279],"}",["T_WHITESPACE","\n\n        ",280],["T_COMMENT","\/\/ grab any existing style blocks from the html and append them to the existing CSS\n",282],["T_WHITESPACE","        ",283],["T_COMMENT","\/\/ (these blocks should be appended so as to have precedence over conflicting styles in the existing CSS)\n",283],["T_WHITESPACE","        ",284],["T_VARIABLE","$allCss",284],["T_WHITESPACE"," ",284],"=",["T_WHITESPACE"," ",284],["T_VARIABLE","$this",284],["T_OBJECT_OPERATOR","->",284],["T_STRING","css",284],";",["T_WHITESPACE","\n\n        ",284],["T_VARIABLE","$allCss",286],["T_WHITESPACE"," ",286],["T_CONCAT_EQUAL",".=",286],["T_WHITESPACE"," ",286],["T_VARIABLE","$this",286],["T_OBJECT_OPERATOR","->",286],["T_STRING","getCssFromAllStyleNodes",286],"(",["T_VARIABLE","$xpath",286],")",";",["T_WHITESPACE","\n\n        ",286],["T_VARIABLE","$cssParts",288],["T_WHITESPACE"," ",288],"=",["T_WHITESPACE"," ",288],["T_VARIABLE","$this",288],["T_OBJECT_OPERATOR","->",288],["T_STRING","splitCssAndMediaQuery",288],"(",["T_VARIABLE","$allCss",288],")",";",["T_WHITESPACE","\n\n        ",288],["T_VARIABLE","$cssKey",290],["T_WHITESPACE"," ",290],"=",["T_WHITESPACE"," ",290],["T_STRING","md5",290],"(",["T_VARIABLE","$cssParts",290],"[",["T_CONSTANT_ENCAPSED_STRING","'css'",290],"]",")",";",["T_WHITESPACE","\n        ",290],["T_IF","if",291],["T_WHITESPACE"," ",291],"(","!",["T_ISSET","isset",291],"(",["T_VARIABLE","$this",291],["T_OBJECT_OPERATOR","->",291],["T_STRING","caches",291],"[",["T_STRING","self",291],["T_DOUBLE_COLON","::",291],["T_STRING","CACHE_KEY_CSS",291],"]","[",["T_VARIABLE","$cssKey",291],"]",")",")",["T_WHITESPACE"," ",291],"{",["T_WHITESPACE","\n            ",291],["T_COMMENT","\/\/ process the CSS file for selectors and definitions\n",292],["T_WHITESPACE","            ",293],["T_STRING","preg_match_all",293],"(",["T_CONSTANT_ENCAPSED_STRING","'\/(?:^|[\\\\s^{}]*)([^{]+){([^}]*)}\/mis'",293],",",["T_WHITESPACE"," ",293],["T_VARIABLE","$cssParts",293],"[",["T_CONSTANT_ENCAPSED_STRING","'css'",293],"]",",",["T_WHITESPACE"," ",293],["T_VARIABLE","$matches",293],",",["T_WHITESPACE"," ",293],["T_STRING","PREG_SET_ORDER",293],")",";",["T_WHITESPACE","\n\n            ",293],["T_VARIABLE","$allSelectors",295],["T_WHITESPACE"," ",295],"=",["T_WHITESPACE"," ",295],["T_ARRAY","array",295],"(",")",";",["T_WHITESPACE","\n            ",295],["T_FOREACH","foreach",296],["T_WHITESPACE"," ",296],"(",["T_VARIABLE","$matches",296],["T_WHITESPACE"," ",296],["T_AS","as",296],["T_WHITESPACE"," ",296],["T_VARIABLE","$key",296],["T_WHITESPACE"," ",296],["T_DOUBLE_ARROW","=>",296],["T_WHITESPACE"," ",296],["T_VARIABLE","$selectorString",296],")",["T_WHITESPACE"," ",296],"{",["T_WHITESPACE","\n                ",296],["T_COMMENT","\/\/ if there is a blank definition, skip\n",297],["T_WHITESPACE","                ",298],["T_IF","if",298],["T_WHITESPACE"," ",298],"(","!",["T_STRING","strlen",298],"(",["T_STRING","trim",298],"(",["T_VARIABLE","$selectorString",298],"[",["T_LNUMBER","2",298],"]",")",")",")",["T_WHITESPACE"," ",298],"{",["T_WHITESPACE","\n                    ",298],["T_CONTINUE","continue",299],";",["T_WHITESPACE","\n                ",299],"}",["T_WHITESPACE","\n\n                ",300],["T_COMMENT","\/\/ else split by commas and duplicate attributes so we can sort by selector precedence\n",302],["T_WHITESPACE","                ",303],["T_VARIABLE","$selectors",303],["T_WHITESPACE"," ",303],"=",["T_WHITESPACE"," ",303],["T_STRING","explode",303],"(",["T_CONSTANT_ENCAPSED_STRING","','",303],",",["T_WHITESPACE"," ",303],["T_VARIABLE","$selectorString",303],"[",["T_LNUMBER","1",303],"]",")",";",["T_WHITESPACE","\n                ",303],["T_FOREACH","foreach",304],["T_WHITESPACE"," ",304],"(",["T_VARIABLE","$selectors",304],["T_WHITESPACE"," ",304],["T_AS","as",304],["T_WHITESPACE"," ",304],["T_VARIABLE","$selector",304],")",["T_WHITESPACE"," ",304],"{",["T_WHITESPACE","\n                    ",304],["T_COMMENT","\/\/ don't process pseudo-elements and behavioral (dynamic) pseudo-classes; ONLY allow structural pseudo-classes\n",305],["T_WHITESPACE","                    ",306],["T_IF","if",306],["T_WHITESPACE"," ",306],"(",["T_STRING","strpos",306],"(",["T_VARIABLE","$selector",306],",",["T_WHITESPACE"," ",306],["T_CONSTANT_ENCAPSED_STRING","':'",306],")",["T_WHITESPACE"," ",306],["T_IS_NOT_IDENTICAL","!==",306],["T_WHITESPACE"," ",306],["T_STRING","FALSE",306],["T_WHITESPACE"," ",306],["T_BOOLEAN_AND","&&",306],["T_WHITESPACE"," ",306],"!",["T_STRING","preg_match",306],"(",["T_CONSTANT_ENCAPSED_STRING","'\/:\\\\S+\\\\-(child|type)\\\\(\/i'",306],",",["T_WHITESPACE"," ",306],["T_VARIABLE","$selector",306],")",")",["T_WHITESPACE"," ",306],"{",["T_WHITESPACE","\n                        ",306],["T_CONTINUE","continue",307],";",["T_WHITESPACE","\n                    ",307],"}",["T_WHITESPACE","\n\n                    ",308],["T_VARIABLE","$allSelectors",310],"[","]",["T_WHITESPACE"," ",310],"=",["T_WHITESPACE"," ",310],["T_ARRAY","array",310],"(",["T_CONSTANT_ENCAPSED_STRING","'selector'",310],["T_WHITESPACE"," ",310],["T_DOUBLE_ARROW","=>",310],["T_WHITESPACE"," ",310],["T_STRING","trim",310],"(",["T_VARIABLE","$selector",310],")",",",["T_WHITESPACE","\n                                             ",310],["T_CONSTANT_ENCAPSED_STRING","'attributes'",311],["T_WHITESPACE"," ",311],["T_DOUBLE_ARROW","=>",311],["T_WHITESPACE"," ",311],["T_STRING","trim",311],"(",["T_VARIABLE","$selectorString",311],"[",["T_LNUMBER","2",311],"]",")",",",["T_WHITESPACE","\n                                             ",311],["T_COMMENT","\/\/ keep track of where it appears in the file, since order is important\n",312],["T_WHITESPACE","                                             ",313],["T_CONSTANT_ENCAPSED_STRING","'line'",313],["T_WHITESPACE"," ",313],["T_DOUBLE_ARROW","=>",313],["T_WHITESPACE"," ",313],["T_VARIABLE","$key",313],",",["T_WHITESPACE","\n                    ",313],")",";",["T_WHITESPACE","\n                ",314],"}",["T_WHITESPACE","\n            ",315],"}",["T_WHITESPACE","\n\n            ",316],["T_COMMENT","\/\/ now sort the selectors by precedence\n",318],["T_WHITESPACE","            ",319],["T_STRING","usort",319],"(",["T_VARIABLE","$allSelectors",319],",",["T_WHITESPACE"," ",319],["T_ARRAY","array",319],"(",["T_VARIABLE","$this",319],",",["T_CONSTANT_ENCAPSED_STRING","'sortBySelectorPrecedence'",319],")",")",";",["T_WHITESPACE","\n\n            ",319],["T_VARIABLE","$this",321],["T_OBJECT_OPERATOR","->",321],["T_STRING","caches",321],"[",["T_STRING","self",321],["T_DOUBLE_COLON","::",321],["T_STRING","CACHE_KEY_CSS",321],"]","[",["T_VARIABLE","$cssKey",321],"]",["T_WHITESPACE"," ",321],"=",["T_WHITESPACE"," ",321],["T_VARIABLE","$allSelectors",321],";",["T_WHITESPACE","\n        ",321],"}",["T_WHITESPACE","\n\n        ",322],["T_FOREACH","foreach",324],["T_WHITESPACE"," ",324],"(",["T_VARIABLE","$this",324],["T_OBJECT_OPERATOR","->",324],["T_STRING","caches",324],"[",["T_STRING","self",324],["T_DOUBLE_COLON","::",324],["T_STRING","CACHE_KEY_CSS",324],"]","[",["T_VARIABLE","$cssKey",324],"]",["T_WHITESPACE"," ",324],["T_AS","as",324],["T_WHITESPACE"," ",324],["T_VARIABLE","$value",324],")",["T_WHITESPACE"," ",324],"{",["T_WHITESPACE","\n            ",324],["T_COMMENT","\/\/ query the body for the xpath selector\n",325],["T_WHITESPACE","            ",326],["T_VARIABLE","$nodesMatchingCssSelectors",326],["T_WHITESPACE"," ",326],"=",["T_WHITESPACE"," ",326],["T_VARIABLE","$xpath",326],["T_OBJECT_OPERATOR","->",326],["T_STRING","query",326],"(",["T_VARIABLE","$this",326],["T_OBJECT_OPERATOR","->",326],["T_STRING","translateCssToXpath",326],"(",["T_VARIABLE","$value",326],"[",["T_CONSTANT_ENCAPSED_STRING","'selector'",326],"]",")",")",";",["T_WHITESPACE","\n\n            ",326],["T_DOC_COMMENT","\/** @var $node \\DOMNode *\/",328],["T_WHITESPACE","\n            ",328],["T_FOREACH","foreach",329],["T_WHITESPACE"," ",329],"(",["T_VARIABLE","$nodesMatchingCssSelectors",329],["T_WHITESPACE"," ",329],["T_AS","as",329],["T_WHITESPACE"," ",329],["T_VARIABLE","$node",329],")",["T_WHITESPACE"," ",329],"{",["T_WHITESPACE","\n                ",329],["T_COMMENT","\/\/ if it has a style attribute, get it, process it, and append (overwrite) new stuff\n",330],["T_WHITESPACE","                ",331],["T_IF","if",331],["T_WHITESPACE"," ",331],"(",["T_VARIABLE","$node",331],["T_OBJECT_OPERATOR","->",331],["T_STRING","hasAttribute",331],"(",["T_CONSTANT_ENCAPSED_STRING","'style'",331],")",")",["T_WHITESPACE"," ",331],"{",["T_WHITESPACE","\n                    ",331],["T_COMMENT","\/\/ break it up into an associative array\n",332],["T_WHITESPACE","                    ",333],["T_VARIABLE","$oldStyleDeclarations",333],["T_WHITESPACE"," ",333],"=",["T_WHITESPACE"," ",333],["T_VARIABLE","$this",333],["T_OBJECT_OPERATOR","->",333],["T_STRING","parseCssDeclarationBlock",333],"(",["T_VARIABLE","$node",333],["T_OBJECT_OPERATOR","->",333],["T_STRING","getAttribute",333],"(",["T_CONSTANT_ENCAPSED_STRING","'style'",333],")",")",";",["T_WHITESPACE","\n                ",333],"}",["T_WHITESPACE"," ",334],["T_ELSE","else",334],["T_WHITESPACE"," ",334],"{",["T_WHITESPACE","\n                    ",334],["T_VARIABLE","$oldStyleDeclarations",335],["T_WHITESPACE"," ",335],"=",["T_WHITESPACE"," ",335],["T_ARRAY","array",335],"(",")",";",["T_WHITESPACE","\n                ",335],"}",["T_WHITESPACE","\n                ",336],["T_VARIABLE","$newStyleDeclarations",337],["T_WHITESPACE"," ",337],"=",["T_WHITESPACE"," ",337],["T_VARIABLE","$this",337],["T_OBJECT_OPERATOR","->",337],["T_STRING","parseCssDeclarationBlock",337],"(",["T_VARIABLE","$value",337],"[",["T_CONSTANT_ENCAPSED_STRING","'attributes'",337],"]",")",";",["T_WHITESPACE","\n                ",337],["T_VARIABLE","$node",338],["T_OBJECT_OPERATOR","->",338],["T_STRING","setAttribute",338],"(",["T_CONSTANT_ENCAPSED_STRING","'style'",338],",",["T_WHITESPACE"," ",338],["T_VARIABLE","$this",338],["T_OBJECT_OPERATOR","->",338],["T_STRING","generateStyleStringFromDeclarationsArrays",338],"(",["T_VARIABLE","$oldStyleDeclarations",338],",",["T_WHITESPACE"," ",338],["T_VARIABLE","$newStyleDeclarations",338],")",")",";",["T_WHITESPACE","\n            ",338],"}",["T_WHITESPACE","\n        ",339],"}",["T_WHITESPACE","\n\n        ",340],["T_COMMENT","\/\/ now iterate through the nodes that contained inline styles in the original HTML\n",342],["T_WHITESPACE","        ",343],["T_FOREACH","foreach",343],["T_WHITESPACE"," ",343],"(",["T_VARIABLE","$this",343],["T_OBJECT_OPERATOR","->",343],["T_STRING","styleAttributesForNodes",343],["T_WHITESPACE"," ",343],["T_AS","as",343],["T_WHITESPACE"," ",343],["T_VARIABLE","$nodePath",343],["T_WHITESPACE"," ",343],["T_DOUBLE_ARROW","=>",343],["T_WHITESPACE"," ",343],["T_VARIABLE","$styleAttributesForNode",343],")",["T_WHITESPACE"," ",343],"{",["T_WHITESPACE","\n            ",343],["T_VARIABLE","$node",344],["T_WHITESPACE"," ",344],"=",["T_WHITESPACE"," ",344],["T_VARIABLE","$this",344],["T_OBJECT_OPERATOR","->",344],["T_STRING","visitedNodes",344],"[",["T_VARIABLE","$nodePath",344],"]",";",["T_WHITESPACE","\n            ",344],["T_VARIABLE","$currentStyleAttributes",345],["T_WHITESPACE"," ",345],"=",["T_WHITESPACE"," ",345],["T_VARIABLE","$this",345],["T_OBJECT_OPERATOR","->",345],["T_STRING","parseCssDeclarationBlock",345],"(",["T_VARIABLE","$node",345],["T_OBJECT_OPERATOR","->",345],["T_STRING","getAttribute",345],"(",["T_CONSTANT_ENCAPSED_STRING","'style'",345],")",")",";",["T_WHITESPACE","\n            ",345],["T_VARIABLE","$node",346],["T_OBJECT_OPERATOR","->",346],["T_STRING","setAttribute",346],"(",["T_CONSTANT_ENCAPSED_STRING","'style'",346],",",["T_WHITESPACE"," ",346],["T_VARIABLE","$this",346],["T_OBJECT_OPERATOR","->",346],["T_STRING","generateStyleStringFromDeclarationsArrays",346],"(",["T_VARIABLE","$currentStyleAttributes",346],",",["T_WHITESPACE"," ",346],["T_VARIABLE","$styleAttributesForNode",346],")",")",";",["T_WHITESPACE","\n        ",346],"}",["T_WHITESPACE","\n\n        ",347],["T_COMMENT","\/\/ This removes styles from your email that contain display:none.\n",349],["T_WHITESPACE","        ",350],["T_COMMENT","\/\/ We need to look for display:none, but we need to do a case-insensitive search. Since DOMDocument only supports XPath 1.0,\n",350],["T_WHITESPACE","        ",351],["T_COMMENT","\/\/ lower-case() isn't available to us. We've thus far only set attributes to lowercase, not attribute values. Consequently, we need\n",351],["T_WHITESPACE","        ",352],["T_COMMENT","\/\/ to translate() the letters that would be in 'NONE' (\"NOE\") to lowercase.\n",352],["T_WHITESPACE","        ",353],["T_VARIABLE","$nodesWithStyleDisplayNone",353],["T_WHITESPACE"," ",353],"=",["T_WHITESPACE"," ",353],["T_VARIABLE","$xpath",353],["T_OBJECT_OPERATOR","->",353],["T_STRING","query",353],"(",["T_CONSTANT_ENCAPSED_STRING","'\/\/*[contains(translate(translate(@style,\" \",\"\"),\"NOE\",\"noe\"),\"display:none\")]'",353],")",";",["T_WHITESPACE","\n        ",353],["T_COMMENT","\/\/ The checks on parentNode and is_callable below ensure that if we've deleted the parent node,\n",354],["T_WHITESPACE","        ",355],["T_COMMENT","\/\/ we don't try to call removeChild on a nonexistent child node\n",355],["T_WHITESPACE","        ",356],["T_IF","if",356],["T_WHITESPACE"," ",356],"(",["T_VARIABLE","$nodesWithStyleDisplayNone",356],["T_OBJECT_OPERATOR","->",356],["T_STRING","length",356],["T_WHITESPACE"," ",356],">",["T_WHITESPACE"," ",356],["T_LNUMBER","0",356],")",["T_WHITESPACE"," ",356],"{",["T_WHITESPACE","\n            ",356],["T_DOC_COMMENT","\/** @var $node \\DOMNode *\/",357],["T_WHITESPACE","\n            ",357],["T_FOREACH","foreach",358],["T_WHITESPACE"," ",358],"(",["T_VARIABLE","$nodesWithStyleDisplayNone",358],["T_WHITESPACE"," ",358],["T_AS","as",358],["T_WHITESPACE"," ",358],["T_VARIABLE","$node",358],")",["T_WHITESPACE"," ",358],"{",["T_WHITESPACE","\n                ",358],["T_IF","if",359],["T_WHITESPACE"," ",359],"(",["T_VARIABLE","$node",359],["T_OBJECT_OPERATOR","->",359],["T_STRING","parentNode",359],["T_WHITESPACE"," ",359],["T_BOOLEAN_AND","&&",359],["T_WHITESPACE"," ",359],["T_STRING","is_callable",359],"(",["T_ARRAY","array",359],"(",["T_VARIABLE","$node",359],["T_OBJECT_OPERATOR","->",359],["T_STRING","parentNode",359],",",["T_CONSTANT_ENCAPSED_STRING","'removeChild'",359],")",")",")",["T_WHITESPACE"," ",359],"{",["T_WHITESPACE","\n                    ",359],["T_VARIABLE","$node",360],["T_OBJECT_OPERATOR","->",360],["T_STRING","parentNode",360],["T_OBJECT_OPERATOR","->",360],["T_STRING","removeChild",360],"(",["T_VARIABLE","$node",360],")",";",["T_WHITESPACE","\n                ",360],"}",["T_WHITESPACE","\n            ",361],"}",["T_WHITESPACE","\n        ",362],"}",["T_WHITESPACE","\n\n        ",363],["T_VARIABLE","$this",365],["T_OBJECT_OPERATOR","->",365],["T_STRING","copyCssWithMediaToStyleNode",365],"(",["T_VARIABLE","$cssParts",365],",",["T_WHITESPACE"," ",365],["T_VARIABLE","$xmlDocument",365],")",";",["T_WHITESPACE","\n\n        ",365],["T_IF","if",367],["T_WHITESPACE"," ",367],"(",["T_VARIABLE","$this",367],["T_OBJECT_OPERATOR","->",367],["T_STRING","preserveEncoding",367],")",["T_WHITESPACE"," ",367],"{",["T_WHITESPACE","\n            ",367],["T_RETURN","return",368],["T_WHITESPACE"," ",368],["T_STRING","mb_convert_encoding",368],"(",["T_VARIABLE","$xmlDocument",368],["T_OBJECT_OPERATOR","->",368],["T_STRING","saveHTML",368],"(",")",",",["T_WHITESPACE"," ",368],["T_STRING","self",368],["T_DOUBLE_COLON","::",368],["T_STRING","ENCODING",368],",",["T_WHITESPACE"," ",368],["T_CONSTANT_ENCAPSED_STRING","'HTML-ENTITIES'",368],")",";",["T_WHITESPACE","\n        ",368],"}",["T_WHITESPACE"," ",369],["T_ELSE","else",369],["T_WHITESPACE"," ",369],"{",["T_WHITESPACE","\n            ",369],["T_RETURN","return",370],["T_WHITESPACE"," ",370],["T_VARIABLE","$xmlDocument",370],["T_OBJECT_OPERATOR","->",370],["T_STRING","saveHTML",370],"(",")",";",["T_WHITESPACE","\n        ",370],"}",["T_WHITESPACE","\n    ",371],"}",["T_WHITESPACE","\n\n\n    ",372],["T_DOC_COMMENT","\/**\n     * This method merges old or existing name\/value array with new name\/value array\n     * and then generates a string of the combined style suitable for placing inline.\n     * This becomes the single point for CSS string generation allowing for consistent\n     * CSS output no matter where the CSS originally came from.\n     * @param array $oldStyles\n     * @param array $newStyles\n     * @return string\n     *\/",375],["T_WHITESPACE","\n    ",383],["T_PRIVATE","private",384],["T_WHITESPACE"," ",384],["T_FUNCTION","function",384],["T_WHITESPACE"," ",384],["T_STRING","generateStyleStringFromDeclarationsArrays",384],"(",["T_ARRAY","array",384],["T_WHITESPACE"," ",384],["T_VARIABLE","$oldStyles",384],",",["T_WHITESPACE"," ",384],["T_ARRAY","array",384],["T_WHITESPACE"," ",384],["T_VARIABLE","$newStyles",384],")",["T_WHITESPACE"," ",384],"{",["T_WHITESPACE","\n        ",384],["T_VARIABLE","$combinedStyles",385],["T_WHITESPACE"," ",385],"=",["T_WHITESPACE"," ",385],["T_STRING","array_merge",385],"(",["T_VARIABLE","$oldStyles",385],",",["T_WHITESPACE"," ",385],["T_VARIABLE","$newStyles",385],")",";",["T_WHITESPACE","\n        ",385],["T_VARIABLE","$style",386],["T_WHITESPACE"," ",386],"=",["T_WHITESPACE"," ",386],["T_CONSTANT_ENCAPSED_STRING","''",386],";",["T_WHITESPACE","\n        ",386],["T_FOREACH","foreach",387],["T_WHITESPACE"," ",387],"(",["T_VARIABLE","$combinedStyles",387],["T_WHITESPACE"," ",387],["T_AS","as",387],["T_WHITESPACE"," ",387],["T_VARIABLE","$attributeName",387],["T_WHITESPACE"," ",387],["T_DOUBLE_ARROW","=>",387],["T_WHITESPACE"," ",387],["T_VARIABLE","$attributeValue",387],")",["T_WHITESPACE"," ",387],"{",["T_WHITESPACE","\n            ",387],["T_VARIABLE","$style",388],["T_WHITESPACE"," ",388],["T_CONCAT_EQUAL",".=",388],["T_WHITESPACE"," ",388],"(",["T_STRING","strtolower",388],"(",["T_STRING","trim",388],"(",["T_VARIABLE","$attributeName",388],")",")",["T_WHITESPACE"," ",388],".",["T_WHITESPACE"," ",388],["T_CONSTANT_ENCAPSED_STRING","': '",388],["T_WHITESPACE"," ",388],".",["T_WHITESPACE"," ",388],["T_STRING","trim",388],"(",["T_VARIABLE","$attributeValue",388],")",["T_WHITESPACE"," ",388],".",["T_WHITESPACE"," ",388],["T_CONSTANT_ENCAPSED_STRING","'; '",388],")",";",["T_WHITESPACE","\n        ",388],"}",["T_WHITESPACE","\n        ",389],["T_RETURN","return",390],["T_WHITESPACE"," ",390],["T_STRING","trim",390],"(",["T_VARIABLE","$style",390],")",";",["T_WHITESPACE","\n    ",390],"}",["T_WHITESPACE","\n\n\n    ",391],["T_DOC_COMMENT","\/**\n     * Copies the media part from CSS array parts to $xmlDocument.\n     *\n     * @param array $cssParts\n     * @param \\DOMDocument $xmlDocument\n     * @return void\n     *\/",394],["T_WHITESPACE","\n    ",400],["T_PUBLIC","public",401],["T_WHITESPACE"," ",401],["T_FUNCTION","function",401],["T_WHITESPACE"," ",401],["T_STRING","copyCssWithMediaToStyleNode",401],"(",["T_ARRAY","array",401],["T_WHITESPACE"," ",401],["T_VARIABLE","$cssParts",401],",",["T_WHITESPACE"," ",401],["T_NS_SEPARATOR","\\",401],["T_STRING","DOMDocument",401],["T_WHITESPACE"," ",401],["T_VARIABLE","$xmlDocument",401],")",["T_WHITESPACE"," ",401],"{",["T_WHITESPACE","\n        ",401],["T_IF","if",402],["T_WHITESPACE"," ",402],"(",["T_ISSET","isset",402],"(",["T_VARIABLE","$cssParts",402],"[",["T_CONSTANT_ENCAPSED_STRING","'media'",402],"]",")",["T_WHITESPACE"," ",402],["T_BOOLEAN_AND","&&",402],["T_WHITESPACE"," ",402],["T_VARIABLE","$cssParts",402],"[",["T_CONSTANT_ENCAPSED_STRING","'media'",402],"]",["T_WHITESPACE"," ",402],["T_IS_NOT_IDENTICAL","!==",402],["T_WHITESPACE"," ",402],["T_CONSTANT_ENCAPSED_STRING","''",402],")",["T_WHITESPACE"," ",402],"{",["T_WHITESPACE","\n            ",402],["T_VARIABLE","$this",403],["T_OBJECT_OPERATOR","->",403],["T_STRING","addStyleElementToDocument",403],"(",["T_VARIABLE","$xmlDocument",403],",",["T_WHITESPACE"," ",403],["T_VARIABLE","$cssParts",403],"[",["T_CONSTANT_ENCAPSED_STRING","'media'",403],"]",")",";",["T_WHITESPACE","\n        ",403],"}",["T_WHITESPACE","\n    ",404],"}",["T_WHITESPACE","\n\n    ",405],["T_DOC_COMMENT","\/**\n     * Returns CSS content.\n     *\n     * @param \\DOMXPath $xpath\n     * @return string\n     *\/",407],["T_WHITESPACE","\n    ",412],["T_PRIVATE","private",413],["T_WHITESPACE"," ",413],["T_FUNCTION","function",413],["T_WHITESPACE"," ",413],["T_STRING","getCssFromAllStyleNodes",413],"(",["T_NS_SEPARATOR","\\",413],["T_STRING","DOMXPath",413],["T_WHITESPACE"," ",413],["T_VARIABLE","$xpath",413],")",["T_WHITESPACE"," ",413],"{",["T_WHITESPACE","\n\n        ",413],["T_IF","if",415],["T_WHITESPACE"," ",415],"(","!",["T_VARIABLE","$this",415],["T_OBJECT_OPERATOR","->",415],["T_STRING","parseInlineStyleTags",415],")",["T_WHITESPACE"," ",415],"{",["T_WHITESPACE","\n            ",415],["T_RETURN","return",416],["T_WHITESPACE"," ",416],["T_CONSTANT_ENCAPSED_STRING","''",416],";",["T_WHITESPACE","\n        ",416],"}",["T_WHITESPACE","\n\n        ",417],["T_VARIABLE","$styleNodes",419],["T_WHITESPACE"," ",419],"=",["T_WHITESPACE"," ",419],["T_VARIABLE","$xpath",419],["T_OBJECT_OPERATOR","->",419],["T_STRING","query",419],"(",["T_CONSTANT_ENCAPSED_STRING","'\/\/style'",419],")",";",["T_WHITESPACE","\n\n        ",419],["T_IF","if",421],["T_WHITESPACE"," ",421],"(",["T_VARIABLE","$styleNodes",421],["T_WHITESPACE"," ",421],["T_IS_IDENTICAL","===",421],["T_WHITESPACE"," ",421],["T_STRING","FALSE",421],")",["T_WHITESPACE"," ",421],"{",["T_WHITESPACE","\n            ",421],["T_RETURN","return",422],["T_WHITESPACE"," ",422],["T_CONSTANT_ENCAPSED_STRING","''",422],";",["T_WHITESPACE","\n        ",422],"}",["T_WHITESPACE","\n\n        ",423],["T_VARIABLE","$css",425],["T_WHITESPACE"," ",425],"=",["T_WHITESPACE"," ",425],["T_CONSTANT_ENCAPSED_STRING","''",425],";",["T_WHITESPACE","\n        ",425],["T_DOC_COMMENT","\/** @var $styleNode \\DOMNode *\/",426],["T_WHITESPACE","\n        ",426],["T_FOREACH","foreach",427],["T_WHITESPACE"," ",427],"(",["T_VARIABLE","$styleNodes",427],["T_WHITESPACE"," ",427],["T_AS","as",427],["T_WHITESPACE"," ",427],["T_VARIABLE","$styleNode",427],")",["T_WHITESPACE"," ",427],"{",["T_WHITESPACE","\n            ",427],["T_VARIABLE","$css",428],["T_WHITESPACE"," ",428],["T_CONCAT_EQUAL",".=",428],["T_WHITESPACE"," ",428],["T_CONSTANT_ENCAPSED_STRING","\"\\n\\n\"",428],["T_WHITESPACE"," ",428],".",["T_WHITESPACE"," ",428],["T_VARIABLE","$styleNode",428],["T_OBJECT_OPERATOR","->",428],["T_STRING","nodeValue",428],";",["T_WHITESPACE","\n            ",428],["T_VARIABLE","$styleNode",429],["T_OBJECT_OPERATOR","->",429],["T_STRING","parentNode",429],["T_OBJECT_OPERATOR","->",429],["T_STRING","removeChild",429],"(",["T_VARIABLE","$styleNode",429],")",";",["T_WHITESPACE","\n        ",429],"}",["T_WHITESPACE","\n\n        ",430],["T_RETURN","return",432],["T_WHITESPACE"," ",432],["T_VARIABLE","$css",432],";",["T_WHITESPACE","\n    ",432],"}",["T_WHITESPACE","\n\n    ",433],["T_DOC_COMMENT","\/**\n     * Adds a style element with $css to $document.\n     *\n     * @param \\DOMDocument $document\n     * @param string $css\n     * @return void\n     *\/",435],["T_WHITESPACE","\n    ",441],["T_PRIVATE","private",442],["T_WHITESPACE"," ",442],["T_FUNCTION","function",442],["T_WHITESPACE"," ",442],["T_STRING","addStyleElementToDocument",442],"(",["T_NS_SEPARATOR","\\",442],["T_STRING","DOMDocument",442],["T_WHITESPACE"," ",442],["T_VARIABLE","$document",442],",",["T_WHITESPACE"," ",442],["T_VARIABLE","$css",442],")",["T_WHITESPACE"," ",442],"{",["T_WHITESPACE","\n        ",442],["T_VARIABLE","$styleElement",443],["T_WHITESPACE"," ",443],"=",["T_WHITESPACE"," ",443],["T_VARIABLE","$document",443],["T_OBJECT_OPERATOR","->",443],["T_STRING","createElement",443],"(",["T_CONSTANT_ENCAPSED_STRING","'style'",443],",",["T_WHITESPACE"," ",443],["T_VARIABLE","$css",443],")",";",["T_WHITESPACE","\n        ",443],["T_VARIABLE","$styleAttribute",444],["T_WHITESPACE"," ",444],"=",["T_WHITESPACE"," ",444],["T_VARIABLE","$document",444],["T_OBJECT_OPERATOR","->",444],["T_STRING","createAttribute",444],"(",["T_CONSTANT_ENCAPSED_STRING","'type'",444],")",";",["T_WHITESPACE","\n        ",444],["T_VARIABLE","$styleAttribute",445],["T_OBJECT_OPERATOR","->",445],["T_STRING","value",445],["T_WHITESPACE"," ",445],"=",["T_WHITESPACE"," ",445],["T_CONSTANT_ENCAPSED_STRING","'text\/css'",445],";",["T_WHITESPACE","\n        ",445],["T_VARIABLE","$styleElement",446],["T_OBJECT_OPERATOR","->",446],["T_STRING","appendChild",446],"(",["T_VARIABLE","$styleAttribute",446],")",";",["T_WHITESPACE","\n\n        ",446],["T_VARIABLE","$head",448],["T_WHITESPACE"," ",448],"=",["T_WHITESPACE"," ",448],["T_VARIABLE","$this",448],["T_OBJECT_OPERATOR","->",448],["T_STRING","getOrCreateHeadElement",448],"(",["T_VARIABLE","$document",448],")",";",["T_WHITESPACE","\n        ",448],["T_VARIABLE","$head",449],["T_OBJECT_OPERATOR","->",449],["T_STRING","appendChild",449],"(",["T_VARIABLE","$styleElement",449],")",";",["T_WHITESPACE","\n    ",449],"}",["T_WHITESPACE","\n\n    ",450],["T_DOC_COMMENT","\/**\n     * Returns the existing or creates a new head element in $document.\n     *\n     * @param \\DOMDocument $document\n     * @return \\DOMNode the head element\n     *\/",452],["T_WHITESPACE","\n    ",457],["T_PRIVATE","private",458],["T_WHITESPACE"," ",458],["T_FUNCTION","function",458],["T_WHITESPACE"," ",458],["T_STRING","getOrCreateHeadElement",458],"(",["T_NS_SEPARATOR","\\",458],["T_STRING","DOMDocument",458],["T_WHITESPACE"," ",458],["T_VARIABLE","$document",458],")",["T_WHITESPACE"," ",458],"{",["T_WHITESPACE","\n        ",458],["T_VARIABLE","$head",459],["T_WHITESPACE"," ",459],"=",["T_WHITESPACE"," ",459],["T_VARIABLE","$document",459],["T_OBJECT_OPERATOR","->",459],["T_STRING","getElementsByTagName",459],"(",["T_CONSTANT_ENCAPSED_STRING","'head'",459],")",["T_OBJECT_OPERATOR","->",459],["T_STRING","item",459],"(",["T_LNUMBER","0",459],")",";",["T_WHITESPACE","\n\n        ",459],["T_IF","if",461],["T_WHITESPACE"," ",461],"(",["T_VARIABLE","$head",461],["T_WHITESPACE"," ",461],["T_IS_IDENTICAL","===",461],["T_WHITESPACE"," ",461],["T_STRING","NULL",461],")",["T_WHITESPACE"," ",461],"{",["T_WHITESPACE","\n            ",461],["T_VARIABLE","$head",462],["T_WHITESPACE"," ",462],"=",["T_WHITESPACE"," ",462],["T_VARIABLE","$document",462],["T_OBJECT_OPERATOR","->",462],["T_STRING","createElement",462],"(",["T_CONSTANT_ENCAPSED_STRING","'head'",462],")",";",["T_WHITESPACE","\n            ",462],["T_VARIABLE","$html",463],["T_WHITESPACE"," ",463],"=",["T_WHITESPACE"," ",463],["T_VARIABLE","$document",463],["T_OBJECT_OPERATOR","->",463],["T_STRING","getElementsByTagName",463],"(",["T_CONSTANT_ENCAPSED_STRING","'html'",463],")",["T_OBJECT_OPERATOR","->",463],["T_STRING","item",463],"(",["T_LNUMBER","0",463],")",";",["T_WHITESPACE","\n            ",463],["T_VARIABLE","$html",464],["T_OBJECT_OPERATOR","->",464],["T_STRING","insertBefore",464],"(",["T_VARIABLE","$head",464],",",["T_WHITESPACE"," ",464],["T_VARIABLE","$document",464],["T_OBJECT_OPERATOR","->",464],["T_STRING","getElementsByTagName",464],"(",["T_CONSTANT_ENCAPSED_STRING","'body'",464],")",["T_OBJECT_OPERATOR","->",464],["T_STRING","item",464],"(",["T_LNUMBER","0",464],")",")",";",["T_WHITESPACE","\n        ",464],"}",["T_WHITESPACE","\n\n        ",465],["T_RETURN","return",467],["T_WHITESPACE"," ",467],["T_VARIABLE","$head",467],";",["T_WHITESPACE","\n    ",467],"}",["T_WHITESPACE","\n\n    ",468],["T_DOC_COMMENT","\/**\n     * Splits input CSS code to an array where:\n     *\n     * - key \"css\" will be contains clean CSS code\n     * - key \"media\" will be contains all valuable media queries\n     *\n     * Example:\n     *\n     * The CSS code\n     *\n     *   \"@import \"file.css\"; h1 { color:red; } @media { h1 {}} @media tv { h1 {}}\"\n     *\n     * will be parsed into the following array:\n     *\n     *   \"css\" => \"h1 { color:red; }\"\n     *   \"media\" => \"@media { h1 {}}\"\n     *\n     * @param string $css\n     * @return array\n     *\/",470],["T_WHITESPACE","\n    ",489],["T_PRIVATE","private",490],["T_WHITESPACE"," ",490],["T_FUNCTION","function",490],["T_WHITESPACE"," ",490],["T_STRING","splitCssAndMediaQuery",490],"(",["T_VARIABLE","$css",490],")",["T_WHITESPACE"," ",490],"{",["T_WHITESPACE","\n        ",490],["T_VARIABLE","$media",491],["T_WHITESPACE"," ",491],"=",["T_WHITESPACE"," ",491],["T_CONSTANT_ENCAPSED_STRING","''",491],";",["T_WHITESPACE","\n\n        ",491],["T_VARIABLE","$css",493],["T_WHITESPACE"," ",493],"=",["T_WHITESPACE"," ",493],["T_STRING","preg_replace_callback",493],"(",["T_WHITESPACE","\n            ",493],["T_CONSTANT_ENCAPSED_STRING","'#@media\\\\s+(?:only\\\\s)?(?:[\\\\s{\\(]|screen|all)\\\\s?[^{]+{.*}\\\\s*}\\\\s*#misU'",494],",",["T_WHITESPACE","\n            ",494],["T_FUNCTION","function",495],"(",["T_VARIABLE","$matches",495],")",["T_WHITESPACE"," ",495],["T_USE","use",495],["T_WHITESPACE"," ",495],"(","&",["T_VARIABLE","$media",495],")",["T_WHITESPACE"," ",495],"{",["T_WHITESPACE","\n                ",495],["T_VARIABLE","$media",496],["T_WHITESPACE"," ",496],["T_CONCAT_EQUAL",".=",496],["T_WHITESPACE"," ",496],["T_VARIABLE","$matches",496],"[",["T_LNUMBER","0",496],"]",";",["T_WHITESPACE","\n            ",496],"}",",",["T_WHITESPACE"," ",497],["T_VARIABLE","$css",497],["T_WHITESPACE","\n        ",497],")",";",["T_WHITESPACE","\n\n        ",498],["T_COMMENT","\/\/ filter the CSS\n",500],["T_WHITESPACE","        ",501],["T_VARIABLE","$search",501],["T_WHITESPACE"," ",501],"=",["T_WHITESPACE"," ",501],["T_ARRAY","array",501],"(",["T_WHITESPACE","\n            ",501],["T_COMMENT","\/\/ get rid of css comment code\n",502],["T_WHITESPACE","            ",503],["T_CONSTANT_ENCAPSED_STRING","'\/\\\\\/\\\\*.*\\\\*\\\\\/\/sU'",503],",",["T_WHITESPACE","\n            ",503],["T_COMMENT","\/\/ strip out any import directives\n",504],["T_WHITESPACE","            ",505],["T_CONSTANT_ENCAPSED_STRING","'\/^\\\\s*@import\\\\s[^;]+;\/misU'",505],",",["T_WHITESPACE","\n            ",505],["T_COMMENT","\/\/ strip remains media enclosures\n",506],["T_WHITESPACE","            ",507],["T_CONSTANT_ENCAPSED_STRING","'\/^\\\\s*@media\\\\s[^{]+{(.*)}\\\\s*}\\\\s\/misU'",507],",",["T_WHITESPACE","\n        ",507],")",";",["T_WHITESPACE","\n\n        ",508],["T_VARIABLE","$replace",510],["T_WHITESPACE"," ",510],"=",["T_WHITESPACE"," ",510],["T_ARRAY","array",510],"(",["T_WHITESPACE","\n            ",510],["T_CONSTANT_ENCAPSED_STRING","''",511],",",["T_WHITESPACE","\n            ",511],["T_CONSTANT_ENCAPSED_STRING","''",512],",",["T_WHITESPACE","\n            ",512],["T_CONSTANT_ENCAPSED_STRING","''",513],",",["T_WHITESPACE","\n        ",513],")",";",["T_WHITESPACE","\n\n        ",514],["T_COMMENT","\/\/ clean CSS before output\n",516],["T_WHITESPACE","        ",517],["T_VARIABLE","$css",517],["T_WHITESPACE"," ",517],"=",["T_WHITESPACE"," ",517],["T_STRING","preg_replace",517],"(",["T_VARIABLE","$search",517],",",["T_WHITESPACE"," ",517],["T_VARIABLE","$replace",517],",",["T_WHITESPACE"," ",517],["T_VARIABLE","$css",517],")",";",["T_WHITESPACE","\n\n        ",517],["T_RETURN","return",519],["T_WHITESPACE"," ",519],["T_ARRAY","array",519],"(",["T_CONSTANT_ENCAPSED_STRING","'css'",519],["T_WHITESPACE"," ",519],["T_DOUBLE_ARROW","=>",519],["T_WHITESPACE"," ",519],["T_VARIABLE","$css",519],",",["T_WHITESPACE"," ",519],["T_CONSTANT_ENCAPSED_STRING","'media'",519],["T_WHITESPACE"," ",519],["T_DOUBLE_ARROW","=>",519],["T_WHITESPACE"," ",519],["T_VARIABLE","$media",519],")",";",["T_WHITESPACE","\n    ",519],"}",["T_WHITESPACE","\n\n    ",520],["T_DOC_COMMENT","\/**\n     * Creates a DOMDocument instance with the current HTML.\n     *\n     * @return \\DOMDocument\n     *\/",522],["T_WHITESPACE","\n    ",526],["T_PRIVATE","private",527],["T_WHITESPACE"," ",527],["T_FUNCTION","function",527],["T_WHITESPACE"," ",527],["T_STRING","createXmlDocument",527],"(",")",["T_WHITESPACE"," ",527],"{",["T_WHITESPACE","\n        ",527],["T_VARIABLE","$xmlDocument",528],["T_WHITESPACE"," ",528],"=",["T_WHITESPACE"," ",528],["T_NEW","new",528],["T_WHITESPACE"," ",528],["T_NS_SEPARATOR","\\",528],["T_STRING","DOMDocument",528],";",["T_WHITESPACE","\n        ",528],["T_VARIABLE","$xmlDocument",529],["T_OBJECT_OPERATOR","->",529],["T_STRING","encoding",529],["T_WHITESPACE"," ",529],"=",["T_WHITESPACE"," ",529],["T_STRING","self",529],["T_DOUBLE_COLON","::",529],["T_STRING","ENCODING",529],";",["T_WHITESPACE","\n        ",529],["T_VARIABLE","$xmlDocument",530],["T_OBJECT_OPERATOR","->",530],["T_STRING","strictErrorChecking",530],["T_WHITESPACE"," ",530],"=",["T_WHITESPACE"," ",530],["T_STRING","FALSE",530],";",["T_WHITESPACE","\n        ",530],["T_VARIABLE","$xmlDocument",531],["T_OBJECT_OPERATOR","->",531],["T_STRING","formatOutput",531],["T_WHITESPACE"," ",531],"=",["T_WHITESPACE"," ",531],["T_STRING","TRUE",531],";",["T_WHITESPACE","\n        ",531],["T_VARIABLE","$libXmlState",532],["T_WHITESPACE"," ",532],"=",["T_WHITESPACE"," ",532],["T_STRING","libxml_use_internal_errors",532],"(",["T_STRING","TRUE",532],")",";",["T_WHITESPACE","\n        ",532],["T_VARIABLE","$xmlDocument",533],["T_OBJECT_OPERATOR","->",533],["T_STRING","loadHTML",533],"(",["T_VARIABLE","$this",533],["T_OBJECT_OPERATOR","->",533],["T_STRING","getUnifiedHtml",533],"(",")",")",";",["T_WHITESPACE","\n        ",533],["T_STRING","libxml_clear_errors",534],"(",")",";",["T_WHITESPACE","\n        ",534],["T_STRING","libxml_use_internal_errors",535],"(",["T_VARIABLE","$libXmlState",535],")",";",["T_WHITESPACE","\n        ",535],["T_VARIABLE","$xmlDocument",536],["T_OBJECT_OPERATOR","->",536],["T_STRING","normalizeDocument",536],"(",")",";",["T_WHITESPACE","\n\n        ",536],["T_RETURN","return",538],["T_WHITESPACE"," ",538],["T_VARIABLE","$xmlDocument",538],";",["T_WHITESPACE","\n    ",538],"}",["T_WHITESPACE","\n\n    ",539],["T_DOC_COMMENT","\/**\n     * Returns the HTML with the non-ASCII characters converts into HTML entities and the unprocessable HTML tags removed.\n     *\n     * @return string the unified HTML\n     *\n     * @throws \\BadMethodCallException\n     *\/",541],["T_WHITESPACE","\n    ",547],["T_PRIVATE","private",548],["T_WHITESPACE"," ",548],["T_FUNCTION","function",548],["T_WHITESPACE"," ",548],["T_STRING","getUnifiedHtml",548],"(",")",["T_WHITESPACE"," ",548],"{",["T_WHITESPACE","\n        ",548],["T_IF","if",549],["T_WHITESPACE"," ",549],"(","!",["T_EMPTY","empty",549],"(",["T_VARIABLE","$this",549],["T_OBJECT_OPERATOR","->",549],["T_STRING","unprocessableHtmlTags",549],")",")",["T_WHITESPACE"," ",549],"{",["T_WHITESPACE","\n            ",549],["T_VARIABLE","$unprocessableHtmlTags",550],["T_WHITESPACE"," ",550],"=",["T_WHITESPACE"," ",550],["T_STRING","implode",550],"(",["T_CONSTANT_ENCAPSED_STRING","'|'",550],",",["T_WHITESPACE"," ",550],["T_VARIABLE","$this",550],["T_OBJECT_OPERATOR","->",550],["T_STRING","unprocessableHtmlTags",550],")",";",["T_WHITESPACE","\n            ",550],["T_VARIABLE","$bodyWithoutUnprocessableTags",551],["T_WHITESPACE"," ",551],"=",["T_WHITESPACE"," ",551],["T_STRING","preg_replace",551],"(",["T_CONSTANT_ENCAPSED_STRING","'\/<\\\\\/?('",551],["T_WHITESPACE"," ",551],".",["T_WHITESPACE"," ",551],["T_VARIABLE","$unprocessableHtmlTags",551],["T_WHITESPACE"," ",551],".",["T_WHITESPACE"," ",551],["T_CONSTANT_ENCAPSED_STRING","')[^>]*>\/i'",551],",",["T_WHITESPACE"," ",551],["T_CONSTANT_ENCAPSED_STRING","''",551],",",["T_WHITESPACE"," ",551],["T_VARIABLE","$this",551],["T_OBJECT_OPERATOR","->",551],["T_STRING","html",551],")",";",["T_WHITESPACE","\n        ",551],"}",["T_WHITESPACE"," ",552],["T_ELSE","else",552],["T_WHITESPACE"," ",552],"{",["T_WHITESPACE","\n            ",552],["T_VARIABLE","$bodyWithoutUnprocessableTags",553],["T_WHITESPACE"," ",553],"=",["T_WHITESPACE"," ",553],["T_VARIABLE","$this",553],["T_OBJECT_OPERATOR","->",553],["T_STRING","html",553],";",["T_WHITESPACE","\n        ",553],"}",["T_WHITESPACE","\n\n        ",554],["T_RETURN","return",556],["T_WHITESPACE"," ",556],["T_STRING","mb_convert_encoding",556],"(",["T_VARIABLE","$bodyWithoutUnprocessableTags",556],",",["T_WHITESPACE"," ",556],["T_CONSTANT_ENCAPSED_STRING","'HTML-ENTITIES'",556],",",["T_WHITESPACE"," ",556],["T_STRING","self",556],["T_DOUBLE_COLON","::",556],["T_STRING","ENCODING",556],")",";",["T_WHITESPACE","\n    ",556],"}",["T_WHITESPACE","\n\n    ",557],["T_DOC_COMMENT","\/**\n     * @param array $a\n     * @param array $b\n     *\n     * @return integer\n     *\/",559],["T_WHITESPACE","\n    ",564],["T_PRIVATE","private",565],["T_WHITESPACE"," ",565],["T_FUNCTION","function",565],["T_WHITESPACE"," ",565],["T_STRING","sortBySelectorPrecedence",565],"(",["T_ARRAY","array",565],["T_WHITESPACE"," ",565],["T_VARIABLE","$a",565],",",["T_WHITESPACE"," ",565],["T_ARRAY","array",565],["T_WHITESPACE"," ",565],["T_VARIABLE","$b",565],")",["T_WHITESPACE"," ",565],"{",["T_WHITESPACE","\n        ",565],["T_VARIABLE","$precedenceA",566],["T_WHITESPACE"," ",566],"=",["T_WHITESPACE"," ",566],["T_VARIABLE","$this",566],["T_OBJECT_OPERATOR","->",566],["T_STRING","getCssSelectorPrecedence",566],"(",["T_VARIABLE","$a",566],"[",["T_CONSTANT_ENCAPSED_STRING","'selector'",566],"]",")",";",["T_WHITESPACE","\n        ",566],["T_VARIABLE","$precedenceB",567],["T_WHITESPACE"," ",567],"=",["T_WHITESPACE"," ",567],["T_VARIABLE","$this",567],["T_OBJECT_OPERATOR","->",567],["T_STRING","getCssSelectorPrecedence",567],"(",["T_VARIABLE","$b",567],"[",["T_CONSTANT_ENCAPSED_STRING","'selector'",567],"]",")",";",["T_WHITESPACE","\n\n        ",567],["T_COMMENT","\/\/ We want these sorted in ascending order so selectors with lesser precedence get processed first and\n",569],["T_WHITESPACE","        ",570],["T_COMMENT","\/\/ selectors with greater precedence get sorted last.\n",570],["T_WHITESPACE","        ",571],["T_COMMENT","\/\/ The parenthesis around the -1 are necessary to avoid a PHP_CodeSniffer warning about missing spaces around\n",571],["T_WHITESPACE","        ",572],["T_COMMENT","\/\/ arithmetic operators.\n",572],["T_WHITESPACE","        ",573],["T_COMMENT","\/\/ @see http:\/\/forge.typo3.org\/issues\/55605\n",573],["T_WHITESPACE","        ",574],["T_VARIABLE","$precedenceForEquals",574],["T_WHITESPACE"," ",574],"=",["T_WHITESPACE"," ",574],"(",["T_VARIABLE","$a",574],"[",["T_CONSTANT_ENCAPSED_STRING","'line'",574],"]",["T_WHITESPACE"," ",574],"<",["T_WHITESPACE"," ",574],["T_VARIABLE","$b",574],"[",["T_CONSTANT_ENCAPSED_STRING","'line'",574],"]",["T_WHITESPACE"," ",574],"?",["T_WHITESPACE"," ",574],"(","-",["T_LNUMBER","1",574],")",["T_WHITESPACE"," ",574],":",["T_WHITESPACE"," ",574],["T_LNUMBER","1",574],")",";",["T_WHITESPACE","\n        ",574],["T_VARIABLE","$precedenceForNotEquals",575],["T_WHITESPACE"," ",575],"=",["T_WHITESPACE"," ",575],"(",["T_VARIABLE","$precedenceA",575],["T_WHITESPACE"," ",575],"<",["T_WHITESPACE"," ",575],["T_VARIABLE","$precedenceB",575],["T_WHITESPACE"," ",575],"?",["T_WHITESPACE"," ",575],"(","-",["T_LNUMBER","1",575],")",["T_WHITESPACE"," ",575],":",["T_WHITESPACE"," ",575],["T_LNUMBER","1",575],")",";",["T_WHITESPACE","\n        ",575],["T_RETURN","return",576],["T_WHITESPACE"," ",576],"(",["T_VARIABLE","$precedenceA",576],["T_WHITESPACE"," ",576],["T_IS_IDENTICAL","===",576],["T_WHITESPACE"," ",576],["T_VARIABLE","$precedenceB",576],")",["T_WHITESPACE"," ",576],"?",["T_WHITESPACE"," ",576],["T_VARIABLE","$precedenceForEquals",576],["T_WHITESPACE"," ",576],":",["T_WHITESPACE"," ",576],["T_VARIABLE","$precedenceForNotEquals",576],";",["T_WHITESPACE","\n    ",576],"}",["T_WHITESPACE","\n\n    ",577],["T_DOC_COMMENT","\/**\n     * @param string $selector\n     *\n     * @return integer\n     *\/",579],["T_WHITESPACE","\n    ",583],["T_PRIVATE","private",584],["T_WHITESPACE"," ",584],["T_FUNCTION","function",584],["T_WHITESPACE"," ",584],["T_STRING","getCssSelectorPrecedence",584],"(",["T_VARIABLE","$selector",584],")",["T_WHITESPACE"," ",584],"{",["T_WHITESPACE","\n        ",584],["T_VARIABLE","$selectorKey",585],["T_WHITESPACE"," ",585],"=",["T_WHITESPACE"," ",585],["T_STRING","md5",585],"(",["T_VARIABLE","$selector",585],")",";",["T_WHITESPACE","\n        ",585],["T_IF","if",586],["T_WHITESPACE"," ",586],"(","!",["T_ISSET","isset",586],"(",["T_VARIABLE","$this",586],["T_OBJECT_OPERATOR","->",586],["T_STRING","caches",586],"[",["T_STRING","self",586],["T_DOUBLE_COLON","::",586],["T_STRING","CACHE_KEY_SELECTOR",586],"]","[",["T_VARIABLE","$selectorKey",586],"]",")",")",["T_WHITESPACE"," ",586],"{",["T_WHITESPACE","\n            ",586],["T_VARIABLE","$precedence",587],["T_WHITESPACE"," ",587],"=",["T_WHITESPACE"," ",587],["T_LNUMBER","0",587],";",["T_WHITESPACE","\n            ",587],["T_VARIABLE","$value",588],["T_WHITESPACE"," ",588],"=",["T_WHITESPACE"," ",588],["T_LNUMBER","100",588],";",["T_WHITESPACE","\n            ",588],["T_COMMENT","\/\/ ids: worth 100, classes: worth 10, elements: worth 1\n",589],["T_WHITESPACE","            ",590],["T_VARIABLE","$search",590],["T_WHITESPACE"," ",590],"=",["T_WHITESPACE"," ",590],["T_ARRAY","array",590],"(",["T_CONSTANT_ENCAPSED_STRING","'\\\\#'",590],",",["T_CONSTANT_ENCAPSED_STRING","'\\\\.'",590],",",["T_CONSTANT_ENCAPSED_STRING","''",590],")",";",["T_WHITESPACE","\n\n            ",590],["T_FOREACH","foreach",592],["T_WHITESPACE"," ",592],"(",["T_VARIABLE","$search",592],["T_WHITESPACE"," ",592],["T_AS","as",592],["T_WHITESPACE"," ",592],["T_VARIABLE","$s",592],")",["T_WHITESPACE"," ",592],"{",["T_WHITESPACE","\n                ",592],["T_IF","if",593],["T_WHITESPACE"," ",593],"(",["T_STRING","trim",593],"(",["T_VARIABLE","$selector",593],["T_WHITESPACE"," ",593],["T_IS_EQUAL","==",593],["T_WHITESPACE"," ",593],["T_CONSTANT_ENCAPSED_STRING","''",593],")",")",["T_WHITESPACE"," ",593],"{",["T_WHITESPACE","\n                    ",593],["T_BREAK","break",594],";",["T_WHITESPACE","\n                ",594],"}",["T_WHITESPACE","\n                ",595],["T_VARIABLE","$number",596],["T_WHITESPACE"," ",596],"=",["T_WHITESPACE"," ",596],["T_LNUMBER","0",596],";",["T_WHITESPACE","\n                ",596],["T_VARIABLE","$selector",597],["T_WHITESPACE"," ",597],"=",["T_WHITESPACE"," ",597],["T_STRING","preg_replace",597],"(",["T_CONSTANT_ENCAPSED_STRING","'\/'",597],["T_WHITESPACE"," ",597],".",["T_WHITESPACE"," ",597],["T_VARIABLE","$s",597],["T_WHITESPACE"," ",597],".",["T_WHITESPACE"," ",597],["T_CONSTANT_ENCAPSED_STRING","'\\\\w+\/'",597],",",["T_WHITESPACE"," ",597],["T_CONSTANT_ENCAPSED_STRING","''",597],",",["T_WHITESPACE"," ",597],["T_VARIABLE","$selector",597],",",["T_WHITESPACE"," ",597],"-",["T_LNUMBER","1",597],",",["T_WHITESPACE"," ",597],["T_VARIABLE","$number",597],")",";",["T_WHITESPACE","\n                ",597],["T_VARIABLE","$precedence",598],["T_WHITESPACE"," ",598],["T_PLUS_EQUAL","+=",598],["T_WHITESPACE"," ",598],"(",["T_VARIABLE","$value",598],["T_WHITESPACE"," ",598],"*",["T_WHITESPACE"," ",598],["T_VARIABLE","$number",598],")",";",["T_WHITESPACE","\n                ",598],["T_VARIABLE","$value",599],["T_WHITESPACE"," ",599],["T_DIV_EQUAL","\/=",599],["T_WHITESPACE"," ",599],["T_LNUMBER","10",599],";",["T_WHITESPACE","\n            ",599],"}",["T_WHITESPACE","\n            ",600],["T_VARIABLE","$this",601],["T_OBJECT_OPERATOR","->",601],["T_STRING","caches",601],"[",["T_STRING","self",601],["T_DOUBLE_COLON","::",601],["T_STRING","CACHE_KEY_SELECTOR",601],"]","[",["T_VARIABLE","$selectorKey",601],"]",["T_WHITESPACE"," ",601],"=",["T_WHITESPACE"," ",601],["T_VARIABLE","$precedence",601],";",["T_WHITESPACE","\n        ",601],"}",["T_WHITESPACE","\n\n        ",602],["T_RETURN","return",604],["T_WHITESPACE"," ",604],["T_VARIABLE","$this",604],["T_OBJECT_OPERATOR","->",604],["T_STRING","caches",604],"[",["T_STRING","self",604],["T_DOUBLE_COLON","::",604],["T_STRING","CACHE_KEY_SELECTOR",604],"]","[",["T_VARIABLE","$selectorKey",604],"]",";",["T_WHITESPACE","\n    ",604],"}",["T_WHITESPACE","\n\n    ",605],["T_DOC_COMMENT","\/**\n     * Right now, we support all CSS 1 selectors and most CSS2\/3 selectors.\n     *\n     * @see http:\/\/plasmasturm.org\/log\/444\/\n     *\n     * @param string $paramCssSelector\n     *\n     * @return string\n     *\/",607],["T_WHITESPACE","\n    ",615],["T_PRIVATE","private",616],["T_WHITESPACE"," ",616],["T_FUNCTION","function",616],["T_WHITESPACE"," ",616],["T_STRING","translateCssToXpath",616],"(",["T_VARIABLE","$paramCssSelector",616],")",["T_WHITESPACE"," ",616],"{",["T_WHITESPACE","\n        ",616],["T_VARIABLE","$cssSelector",617],["T_WHITESPACE"," ",617],"=",["T_WHITESPACE"," ",617],["T_CONSTANT_ENCAPSED_STRING","' '",617],["T_WHITESPACE"," ",617],".",["T_WHITESPACE"," ",617],["T_VARIABLE","$paramCssSelector",617],["T_WHITESPACE"," ",617],".",["T_WHITESPACE"," ",617],["T_CONSTANT_ENCAPSED_STRING","' '",617],";",["T_WHITESPACE","\n        ",617],["T_VARIABLE","$cssSelector",618],["T_WHITESPACE"," ",618],"=",["T_WHITESPACE"," ",618],["T_STRING","preg_replace_callback",618],"(",["T_CONSTANT_ENCAPSED_STRING","'\/\\s+\\w+\\s+\/'",618],",",["T_WHITESPACE","\n            ",618],["T_FUNCTION","function",619],"(",["T_ARRAY","array",619],["T_WHITESPACE"," ",619],["T_VARIABLE","$matches",619],")",["T_WHITESPACE"," ",619],"{",["T_WHITESPACE","\n                ",619],["T_RETURN","return",620],["T_WHITESPACE"," ",620],["T_STRING","strtolower",620],"(",["T_VARIABLE","$matches",620],"[",["T_LNUMBER","0",620],"]",")",";",["T_WHITESPACE","\n            ",620],"}",",",["T_WHITESPACE","\n            ",621],["T_VARIABLE","$cssSelector",622],["T_WHITESPACE","\n        ",622],")",";",["T_WHITESPACE","\n        ",623],["T_VARIABLE","$cssSelector",624],["T_WHITESPACE"," ",624],"=",["T_WHITESPACE"," ",624],["T_STRING","trim",624],"(",["T_VARIABLE","$cssSelector",624],")",";",["T_WHITESPACE","\n        ",624],["T_VARIABLE","$xpathKey",625],["T_WHITESPACE"," ",625],"=",["T_WHITESPACE"," ",625],["T_STRING","md5",625],"(",["T_VARIABLE","$cssSelector",625],")",";",["T_WHITESPACE","\n        ",625],["T_IF","if",626],["T_WHITESPACE"," ",626],"(","!",["T_ISSET","isset",626],"(",["T_VARIABLE","$this",626],["T_OBJECT_OPERATOR","->",626],["T_STRING","caches",626],"[",["T_STRING","self",626],["T_DOUBLE_COLON","::",626],["T_STRING","CACHE_KEY_XPATH",626],"]","[",["T_VARIABLE","$xpathKey",626],"]",")",")",["T_WHITESPACE"," ",626],"{",["T_WHITESPACE","\n            ",626],["T_COMMENT","\/\/ returns an Xpath selector\n",627],["T_WHITESPACE","            ",628],["T_VARIABLE","$search",628],["T_WHITESPACE"," ",628],"=",["T_WHITESPACE"," ",628],["T_ARRAY","array",628],"(",["T_WHITESPACE","\n                ",628],["T_COMMENT","\/\/ Matches any element that is a child of parent.\n",629],["T_WHITESPACE","                ",630],["T_CONSTANT_ENCAPSED_STRING","'\/\\\\s+>\\\\s+\/'",630],",",["T_WHITESPACE","\n                ",630],["T_COMMENT","\/\/ Matches any element that is an adjacent sibling.\n",631],["T_WHITESPACE","                ",632],["T_CONSTANT_ENCAPSED_STRING","'\/\\\\s+\\\\+\\\\s+\/'",632],",",["T_WHITESPACE","\n                ",632],["T_COMMENT","\/\/ Matches any element that is a descendant of an parent element element.\n",633],["T_WHITESPACE","                ",634],["T_CONSTANT_ENCAPSED_STRING","'\/\\\\s+\/'",634],",",["T_WHITESPACE","\n                ",634],["T_COMMENT","\/\/ first-child pseudo-selector\n",635],["T_WHITESPACE","                ",636],["T_CONSTANT_ENCAPSED_STRING","'\/([^\\\\\/]+):first-child\/i'",636],",",["T_WHITESPACE","\n                ",636],["T_COMMENT","\/\/ last-child pseudo-selector\n",637],["T_WHITESPACE","                ",638],["T_CONSTANT_ENCAPSED_STRING","'\/([^\\\\\/]+):last-child\/i'",638],",",["T_WHITESPACE","\n                ",638],["T_COMMENT","\/\/ Matches attribute only selector\n",639],["T_WHITESPACE","                ",640],["T_CONSTANT_ENCAPSED_STRING","'\/^\\\\[(\\\\w+)\\\\]\/'",640],",",["T_WHITESPACE","\n                ",640],["T_COMMENT","\/\/ Matches element with attribute\n",641],["T_WHITESPACE","                ",642],["T_CONSTANT_ENCAPSED_STRING","'\/(\\\\w)\\\\[(\\\\w+)\\\\]\/'",642],",",["T_WHITESPACE","\n                ",642],["T_COMMENT","\/\/ Matches element with EXACT attribute\n",643],["T_WHITESPACE","                ",644],["T_CONSTANT_ENCAPSED_STRING","'\/(\\\\w)\\\\[(\\\\w+)\\\\=[\\'\"]?(\\\\w+)[\\'\"]?\\\\]\/'",644],",",["T_WHITESPACE","\n            ",644],")",";",["T_WHITESPACE","\n            ",645],["T_VARIABLE","$replace",646],["T_WHITESPACE"," ",646],"=",["T_WHITESPACE"," ",646],["T_ARRAY","array",646],"(",["T_WHITESPACE","\n                ",646],["T_CONSTANT_ENCAPSED_STRING","'\/'",647],",",["T_WHITESPACE","\n                ",647],["T_CONSTANT_ENCAPSED_STRING","'\/following-sibling::*[1]\/self::'",648],",",["T_WHITESPACE","\n                ",648],["T_CONSTANT_ENCAPSED_STRING","'\/\/'",649],",",["T_WHITESPACE","\n                ",649],["T_CONSTANT_ENCAPSED_STRING","'*[1]\/self::\\\\1'",650],",",["T_WHITESPACE","\n                ",650],["T_CONSTANT_ENCAPSED_STRING","'*[last()]\/self::\\\\1'",651],",",["T_WHITESPACE","\n                ",651],["T_CONSTANT_ENCAPSED_STRING","'*[@\\\\1]'",652],",",["T_WHITESPACE","\n                ",652],["T_CONSTANT_ENCAPSED_STRING","'\\\\1[@\\\\2]'",653],",",["T_WHITESPACE","\n                ",653],["T_CONSTANT_ENCAPSED_STRING","'\\\\1[@\\\\2=\"\\\\3\"]'",654],",",["T_WHITESPACE","\n            ",654],")",";",["T_WHITESPACE","\n\n            ",655],["T_VARIABLE","$cssSelector",657],["T_WHITESPACE"," ",657],"=",["T_WHITESPACE"," ",657],["T_CONSTANT_ENCAPSED_STRING","'\/\/'",657],["T_WHITESPACE"," ",657],".",["T_WHITESPACE"," ",657],["T_STRING","preg_replace",657],"(",["T_VARIABLE","$search",657],",",["T_WHITESPACE"," ",657],["T_VARIABLE","$replace",657],",",["T_WHITESPACE"," ",657],["T_VARIABLE","$cssSelector",657],")",";",["T_WHITESPACE","\n\n            ",657],["T_VARIABLE","$cssSelector",659],["T_WHITESPACE"," ",659],"=",["T_WHITESPACE"," ",659],["T_STRING","preg_replace_callback",659],"(",["T_STRING","self",659],["T_DOUBLE_COLON","::",659],["T_STRING","ID_ATTRIBUTE_MATCHER",659],",",["T_WHITESPACE"," ",659],["T_ARRAY","array",659],"(",["T_VARIABLE","$this",659],",",["T_WHITESPACE"," ",659],["T_CONSTANT_ENCAPSED_STRING","'matchIdAttributes'",659],")",",",["T_WHITESPACE"," ",659],["T_VARIABLE","$cssSelector",659],")",";",["T_WHITESPACE","\n            ",659],["T_VARIABLE","$cssSelector",660],["T_WHITESPACE"," ",660],"=",["T_WHITESPACE"," ",660],["T_STRING","preg_replace_callback",660],"(",["T_STRING","self",660],["T_DOUBLE_COLON","::",660],["T_STRING","CLASS_ATTRIBUTE_MATCHER",660],",",["T_WHITESPACE"," ",660],["T_ARRAY","array",660],"(",["T_VARIABLE","$this",660],",",["T_WHITESPACE"," ",660],["T_CONSTANT_ENCAPSED_STRING","'matchClassAttributes'",660],")",",",["T_WHITESPACE"," ",660],["T_VARIABLE","$cssSelector",660],")",";",["T_WHITESPACE","\n\n            ",660],["T_COMMENT","\/\/ Advanced selectors are going to require a bit more advanced emogrification.\n",662],["T_WHITESPACE","            ",663],["T_COMMENT","\/\/ When we required PHP 5.3, we could do this with closures.\n",663],["T_WHITESPACE","            ",664],["T_VARIABLE","$cssSelector",664],["T_WHITESPACE"," ",664],"=",["T_WHITESPACE"," ",664],["T_STRING","preg_replace_callback",664],"(",["T_WHITESPACE","\n                ",664],["T_CONSTANT_ENCAPSED_STRING","'\/([^\\\\\/]+):nth-child\\\\(\\s*(odd|even|[+\\-]?\\\\d|[+\\\\-]?\\\\d?n(\\\\s*[+\\\\-]\\\\s*\\\\d)?)\\\\s*\\\\)\/i'",665],",",["T_WHITESPACE","\n                ",665],["T_ARRAY","array",666],"(",["T_VARIABLE","$this",666],",",["T_WHITESPACE"," ",666],["T_CONSTANT_ENCAPSED_STRING","'translateNthChild'",666],")",",",["T_WHITESPACE"," ",666],["T_VARIABLE","$cssSelector",666],["T_WHITESPACE","\n            ",666],")",";",["T_WHITESPACE","\n            ",667],["T_VARIABLE","$cssSelector",668],["T_WHITESPACE"," ",668],"=",["T_WHITESPACE"," ",668],["T_STRING","preg_replace_callback",668],"(",["T_WHITESPACE","\n                ",668],["T_CONSTANT_ENCAPSED_STRING","'\/([^\\\\\/]+):nth-of-type\\\\(\\s*(odd|even|[+\\-]?\\\\d|[+\\\\-]?\\\\d?n(\\\\s*[+\\\\-]\\\\s*\\\\d)?)\\\\s*\\\\)\/i'",669],",",["T_WHITESPACE","\n                ",669],["T_ARRAY","array",670],"(",["T_VARIABLE","$this",670],",",["T_WHITESPACE"," ",670],["T_CONSTANT_ENCAPSED_STRING","'translateNthOfType'",670],")",",",["T_WHITESPACE"," ",670],["T_VARIABLE","$cssSelector",670],["T_WHITESPACE","\n            ",670],")",";",["T_WHITESPACE","\n\n            ",671],["T_VARIABLE","$this",673],["T_OBJECT_OPERATOR","->",673],["T_STRING","caches",673],"[",["T_STRING","self",673],["T_DOUBLE_COLON","::",673],["T_STRING","CACHE_KEY_SELECTOR",673],"]","[",["T_VARIABLE","$xpathKey",673],"]",["T_WHITESPACE"," ",673],"=",["T_WHITESPACE"," ",673],["T_VARIABLE","$cssSelector",673],";",["T_WHITESPACE","\n        ",673],"}",["T_WHITESPACE","\n        ",674],["T_RETURN","return",675],["T_WHITESPACE"," ",675],["T_VARIABLE","$this",675],["T_OBJECT_OPERATOR","->",675],["T_STRING","caches",675],"[",["T_STRING","self",675],["T_DOUBLE_COLON","::",675],["T_STRING","CACHE_KEY_SELECTOR",675],"]","[",["T_VARIABLE","$xpathKey",675],"]",";",["T_WHITESPACE","\n    ",675],"}",["T_WHITESPACE","\n\n    ",676],["T_DOC_COMMENT","\/**\n     * @param array $match\n     *\n     * @return string\n     *\/",678],["T_WHITESPACE","\n    ",682],["T_PRIVATE","private",683],["T_WHITESPACE"," ",683],["T_FUNCTION","function",683],["T_WHITESPACE"," ",683],["T_STRING","matchIdAttributes",683],"(",["T_ARRAY","array",683],["T_WHITESPACE"," ",683],["T_VARIABLE","$match",683],")",["T_WHITESPACE"," ",683],"{",["T_WHITESPACE","\n        ",683],["T_RETURN","return",684],["T_WHITESPACE"," ",684],"(",["T_STRING","strlen",684],"(",["T_VARIABLE","$match",684],"[",["T_LNUMBER","1",684],"]",")",["T_WHITESPACE"," ",684],"?",["T_WHITESPACE"," ",684],["T_VARIABLE","$match",684],"[",["T_LNUMBER","1",684],"]",["T_WHITESPACE"," ",684],":",["T_WHITESPACE"," ",684],["T_CONSTANT_ENCAPSED_STRING","'*'",684],")",["T_WHITESPACE"," ",684],".",["T_WHITESPACE"," ",684],["T_CONSTANT_ENCAPSED_STRING","'[@id=\"'",684],["T_WHITESPACE"," ",684],".",["T_WHITESPACE"," ",684],["T_VARIABLE","$match",684],"[",["T_LNUMBER","2",684],"]",["T_WHITESPACE"," ",684],".",["T_WHITESPACE"," ",684],["T_CONSTANT_ENCAPSED_STRING","'\"]'",684],";",["T_WHITESPACE","\n    ",684],"}",["T_WHITESPACE","\n\n    ",685],["T_DOC_COMMENT","\/**\n     * @param array $match\n     *\n     * @return string\n     *\/",687],["T_WHITESPACE","\n    ",691],["T_PRIVATE","private",692],["T_WHITESPACE"," ",692],["T_FUNCTION","function",692],["T_WHITESPACE"," ",692],["T_STRING","matchClassAttributes",692],"(",["T_ARRAY","array",692],["T_WHITESPACE"," ",692],["T_VARIABLE","$match",692],")",["T_WHITESPACE"," ",692],"{",["T_WHITESPACE","\n        ",692],["T_RETURN","return",693],["T_WHITESPACE"," ",693],"(",["T_STRING","strlen",693],"(",["T_VARIABLE","$match",693],"[",["T_LNUMBER","1",693],"]",")",["T_WHITESPACE"," ",693],"?",["T_WHITESPACE"," ",693],["T_VARIABLE","$match",693],"[",["T_LNUMBER","1",693],"]",["T_WHITESPACE"," ",693],":",["T_WHITESPACE"," ",693],["T_CONSTANT_ENCAPSED_STRING","'*'",693],")",["T_WHITESPACE"," ",693],".",["T_WHITESPACE"," ",693],["T_CONSTANT_ENCAPSED_STRING","'[contains(concat(\" \",@class,\" \"),concat(\" \",\"'",693],["T_WHITESPACE"," ",693],".",["T_WHITESPACE","\n            ",693],["T_STRING","implode",694],"(",["T_WHITESPACE","\n                ",694],["T_CONSTANT_ENCAPSED_STRING","'\",\" \"))][contains(concat(\" \",@class,\" \"),concat(\" \",\"'",695],",",["T_WHITESPACE","\n                ",695],["T_STRING","explode",696],"(",["T_CONSTANT_ENCAPSED_STRING","'.'",696],",",["T_WHITESPACE"," ",696],["T_STRING","substr",696],"(",["T_VARIABLE","$match",696],"[",["T_LNUMBER","2",696],"]",",",["T_WHITESPACE"," ",696],["T_LNUMBER","1",696],")",")",["T_WHITESPACE","\n            ",696],")",["T_WHITESPACE"," ",697],".",["T_WHITESPACE"," ",697],["T_CONSTANT_ENCAPSED_STRING","'\",\" \"))]'",697],";",["T_WHITESPACE","\n    ",697],"}",["T_WHITESPACE","\n\n    ",698],["T_DOC_COMMENT","\/**\n     * @param array $match\n     *\n     * @return string\n     *\/",700],["T_WHITESPACE","\n    ",704],["T_PRIVATE","private",705],["T_WHITESPACE"," ",705],["T_FUNCTION","function",705],["T_WHITESPACE"," ",705],["T_STRING","translateNthChild",705],"(",["T_ARRAY","array",705],["T_WHITESPACE"," ",705],["T_VARIABLE","$match",705],")",["T_WHITESPACE"," ",705],"{",["T_WHITESPACE","\n        ",705],["T_VARIABLE","$result",706],["T_WHITESPACE"," ",706],"=",["T_WHITESPACE"," ",706],["T_VARIABLE","$this",706],["T_OBJECT_OPERATOR","->",706],["T_STRING","parseNth",706],"(",["T_VARIABLE","$match",706],")",";",["T_WHITESPACE","\n\n        ",706],["T_IF","if",708],["T_WHITESPACE"," ",708],"(",["T_ISSET","isset",708],"(",["T_VARIABLE","$result",708],"[",["T_STRING","self",708],["T_DOUBLE_COLON","::",708],["T_STRING","MULTIPLIER",708],"]",")",")",["T_WHITESPACE"," ",708],"{",["T_WHITESPACE","\n            ",708],["T_IF","if",709],["T_WHITESPACE"," ",709],"(",["T_VARIABLE","$result",709],"[",["T_STRING","self",709],["T_DOUBLE_COLON","::",709],["T_STRING","MULTIPLIER",709],"]",["T_WHITESPACE"," ",709],"<",["T_WHITESPACE"," ",709],["T_LNUMBER","0",709],")",["T_WHITESPACE"," ",709],"{",["T_WHITESPACE","\n                ",709],["T_VARIABLE","$result",710],"[",["T_STRING","self",710],["T_DOUBLE_COLON","::",710],["T_STRING","MULTIPLIER",710],"]",["T_WHITESPACE"," ",710],"=",["T_WHITESPACE"," ",710],["T_STRING","abs",710],"(",["T_VARIABLE","$result",710],"[",["T_STRING","self",710],["T_DOUBLE_COLON","::",710],["T_STRING","MULTIPLIER",710],"]",")",";",["T_WHITESPACE","\n                ",710],["T_RETURN","return",711],["T_WHITESPACE"," ",711],["T_STRING","sprintf",711],"(",["T_CONSTANT_ENCAPSED_STRING","'*[(last() - position()) mod %u = %u]\/self::%s'",711],",",["T_WHITESPACE"," ",711],["T_VARIABLE","$result",711],"[",["T_STRING","self",711],["T_DOUBLE_COLON","::",711],["T_STRING","MULTIPLIER",711],"]",",",["T_WHITESPACE"," ",711],["T_VARIABLE","$result",711],"[",["T_STRING","self",711],["T_DOUBLE_COLON","::",711],["T_STRING","INDEX",711],"]",",",["T_WHITESPACE"," ",711],["T_VARIABLE","$match",711],"[",["T_LNUMBER","1",711],"]",")",";",["T_WHITESPACE","\n            ",711],"}",["T_WHITESPACE"," ",712],["T_ELSE","else",712],["T_WHITESPACE"," ",712],"{",["T_WHITESPACE","\n                ",712],["T_RETURN","return",713],["T_WHITESPACE"," ",713],["T_STRING","sprintf",713],"(",["T_CONSTANT_ENCAPSED_STRING","'*[position() mod %u = %u]\/self::%s'",713],",",["T_WHITESPACE"," ",713],["T_VARIABLE","$result",713],"[",["T_STRING","self",713],["T_DOUBLE_COLON","::",713],["T_STRING","MULTIPLIER",713],"]",",",["T_WHITESPACE"," ",713],["T_VARIABLE","$result",713],"[",["T_STRING","self",713],["T_DOUBLE_COLON","::",713],["T_STRING","INDEX",713],"]",",",["T_WHITESPACE"," ",713],["T_VARIABLE","$match",713],"[",["T_LNUMBER","1",713],"]",")",";",["T_WHITESPACE","\n            ",713],"}",["T_WHITESPACE","\n        ",714],"}",["T_WHITESPACE"," ",715],["T_ELSE","else",715],["T_WHITESPACE"," ",715],"{",["T_WHITESPACE","\n            ",715],["T_RETURN","return",716],["T_WHITESPACE"," ",716],["T_STRING","sprintf",716],"(",["T_CONSTANT_ENCAPSED_STRING","'*[%u]\/self::%s'",716],",",["T_WHITESPACE"," ",716],["T_VARIABLE","$result",716],"[",["T_STRING","self",716],["T_DOUBLE_COLON","::",716],["T_STRING","INDEX",716],"]",",",["T_WHITESPACE"," ",716],["T_VARIABLE","$match",716],"[",["T_LNUMBER","1",716],"]",")",";",["T_WHITESPACE","\n        ",716],"}",["T_WHITESPACE","\n    ",717],"}",["T_WHITESPACE","\n\n    ",718],["T_DOC_COMMENT","\/**\n     * @param array $match\n     *\n     * @return string\n     *\/",720],["T_WHITESPACE","\n    ",724],["T_PRIVATE","private",725],["T_WHITESPACE"," ",725],["T_FUNCTION","function",725],["T_WHITESPACE"," ",725],["T_STRING","translateNthOfType",725],"(",["T_ARRAY","array",725],["T_WHITESPACE"," ",725],["T_VARIABLE","$match",725],")",["T_WHITESPACE"," ",725],"{",["T_WHITESPACE","\n        ",725],["T_VARIABLE","$result",726],["T_WHITESPACE"," ",726],"=",["T_WHITESPACE"," ",726],["T_VARIABLE","$this",726],["T_OBJECT_OPERATOR","->",726],["T_STRING","parseNth",726],"(",["T_VARIABLE","$match",726],")",";",["T_WHITESPACE","\n\n        ",726],["T_IF","if",728],["T_WHITESPACE"," ",728],"(",["T_ISSET","isset",728],"(",["T_VARIABLE","$result",728],"[",["T_STRING","self",728],["T_DOUBLE_COLON","::",728],["T_STRING","MULTIPLIER",728],"]",")",")",["T_WHITESPACE"," ",728],"{",["T_WHITESPACE","\n            ",728],["T_IF","if",729],["T_WHITESPACE"," ",729],"(",["T_VARIABLE","$result",729],"[",["T_STRING","self",729],["T_DOUBLE_COLON","::",729],["T_STRING","MULTIPLIER",729],"]",["T_WHITESPACE"," ",729],"<",["T_WHITESPACE"," ",729],["T_LNUMBER","0",729],")",["T_WHITESPACE"," ",729],"{",["T_WHITESPACE","\n                ",729],["T_VARIABLE","$result",730],"[",["T_STRING","self",730],["T_DOUBLE_COLON","::",730],["T_STRING","MULTIPLIER",730],"]",["T_WHITESPACE"," ",730],"=",["T_WHITESPACE"," ",730],["T_STRING","abs",730],"(",["T_VARIABLE","$result",730],"[",["T_STRING","self",730],["T_DOUBLE_COLON","::",730],["T_STRING","MULTIPLIER",730],"]",")",";",["T_WHITESPACE","\n                ",730],["T_RETURN","return",731],["T_WHITESPACE"," ",731],["T_STRING","sprintf",731],"(",["T_CONSTANT_ENCAPSED_STRING","'%s[(last() - position()) mod %u = %u]'",731],",",["T_WHITESPACE"," ",731],["T_VARIABLE","$match",731],"[",["T_LNUMBER","1",731],"]",",",["T_WHITESPACE"," ",731],["T_VARIABLE","$result",731],"[",["T_STRING","self",731],["T_DOUBLE_COLON","::",731],["T_STRING","MULTIPLIER",731],"]",",",["T_WHITESPACE"," ",731],["T_VARIABLE","$result",731],"[",["T_STRING","self",731],["T_DOUBLE_COLON","::",731],["T_STRING","INDEX",731],"]",")",";",["T_WHITESPACE","\n            ",731],"}",["T_WHITESPACE"," ",732],["T_ELSE","else",732],["T_WHITESPACE"," ",732],"{",["T_WHITESPACE","\n                ",732],["T_RETURN","return",733],["T_WHITESPACE"," ",733],["T_STRING","sprintf",733],"(",["T_CONSTANT_ENCAPSED_STRING","'%s[position() mod %u = %u]'",733],",",["T_WHITESPACE"," ",733],["T_VARIABLE","$match",733],"[",["T_LNUMBER","1",733],"]",",",["T_WHITESPACE"," ",733],["T_VARIABLE","$result",733],"[",["T_STRING","self",733],["T_DOUBLE_COLON","::",733],["T_STRING","MULTIPLIER",733],"]",",",["T_WHITESPACE"," ",733],["T_VARIABLE","$result",733],"[",["T_STRING","self",733],["T_DOUBLE_COLON","::",733],["T_STRING","INDEX",733],"]",")",";",["T_WHITESPACE","\n            ",733],"}",["T_WHITESPACE","\n        ",734],"}",["T_WHITESPACE"," ",735],["T_ELSE","else",735],["T_WHITESPACE"," ",735],"{",["T_WHITESPACE","\n            ",735],["T_RETURN","return",736],["T_WHITESPACE"," ",736],["T_STRING","sprintf",736],"(",["T_CONSTANT_ENCAPSED_STRING","'%s[%u]'",736],",",["T_WHITESPACE"," ",736],["T_VARIABLE","$match",736],"[",["T_LNUMBER","1",736],"]",",",["T_WHITESPACE"," ",736],["T_VARIABLE","$result",736],"[",["T_STRING","self",736],["T_DOUBLE_COLON","::",736],["T_STRING","INDEX",736],"]",")",";",["T_WHITESPACE","\n        ",736],"}",["T_WHITESPACE","\n    ",737],"}",["T_WHITESPACE","\n\n    ",738],["T_DOC_COMMENT","\/**\n     * @param array $match\n     *\n     * @return array\n     *\/",740],["T_WHITESPACE","\n    ",744],["T_PRIVATE","private",745],["T_WHITESPACE"," ",745],["T_FUNCTION","function",745],["T_WHITESPACE"," ",745],["T_STRING","parseNth",745],"(",["T_ARRAY","array",745],["T_WHITESPACE"," ",745],["T_VARIABLE","$match",745],")",["T_WHITESPACE"," ",745],"{",["T_WHITESPACE","\n        ",745],["T_IF","if",746],["T_WHITESPACE"," ",746],"(",["T_STRING","in_array",746],"(",["T_STRING","strtolower",746],"(",["T_VARIABLE","$match",746],"[",["T_LNUMBER","2",746],"]",")",",",["T_WHITESPACE"," ",746],["T_ARRAY","array",746],"(",["T_CONSTANT_ENCAPSED_STRING","'even'",746],",",["T_CONSTANT_ENCAPSED_STRING","'odd'",746],")",")",")",["T_WHITESPACE"," ",746],"{",["T_WHITESPACE","\n            ",746],["T_VARIABLE","$index",747],["T_WHITESPACE"," ",747],"=",["T_WHITESPACE"," ",747],["T_STRING","strtolower",747],"(",["T_VARIABLE","$match",747],"[",["T_LNUMBER","2",747],"]",")",["T_WHITESPACE"," ",747],["T_IS_EQUAL","==",747],["T_WHITESPACE"," ",747],["T_CONSTANT_ENCAPSED_STRING","'even'",747],["T_WHITESPACE"," ",747],"?",["T_WHITESPACE"," ",747],["T_LNUMBER","0",747],["T_WHITESPACE"," ",747],":",["T_WHITESPACE"," ",747],["T_LNUMBER","1",747],";",["T_WHITESPACE","\n            ",747],["T_RETURN","return",748],["T_WHITESPACE"," ",748],["T_ARRAY","array",748],"(",["T_STRING","self",748],["T_DOUBLE_COLON","::",748],["T_STRING","MULTIPLIER",748],["T_WHITESPACE"," ",748],["T_DOUBLE_ARROW","=>",748],["T_WHITESPACE"," ",748],["T_LNUMBER","2",748],",",["T_WHITESPACE"," ",748],["T_STRING","self",748],["T_DOUBLE_COLON","::",748],["T_STRING","INDEX",748],["T_WHITESPACE"," ",748],["T_DOUBLE_ARROW","=>",748],["T_WHITESPACE"," ",748],["T_VARIABLE","$index",748],")",";",["T_WHITESPACE","\n        ",748],"}",["T_WHITESPACE"," ",749],["T_ELSEIF","elseif",749],["T_WHITESPACE"," ",749],"(",["T_STRING","stripos",749],"(",["T_VARIABLE","$match",749],"[",["T_LNUMBER","2",749],"]",",",["T_WHITESPACE"," ",749],["T_CONSTANT_ENCAPSED_STRING","'n'",749],")",["T_WHITESPACE"," ",749],["T_IS_IDENTICAL","===",749],["T_WHITESPACE"," ",749],["T_STRING","FALSE",749],")",["T_WHITESPACE"," ",749],"{",["T_WHITESPACE","\n            ",749],["T_COMMENT","\/\/ if there is a multiplier\n",750],["T_WHITESPACE","            ",751],["T_VARIABLE","$index",751],["T_WHITESPACE"," ",751],"=",["T_WHITESPACE"," ",751],["T_STRING","intval",751],"(",["T_STRING","str_replace",751],"(",["T_CONSTANT_ENCAPSED_STRING","' '",751],",",["T_WHITESPACE"," ",751],["T_CONSTANT_ENCAPSED_STRING","''",751],",",["T_WHITESPACE"," ",751],["T_VARIABLE","$match",751],"[",["T_LNUMBER","2",751],"]",")",")",";",["T_WHITESPACE","\n            ",751],["T_RETURN","return",752],["T_WHITESPACE"," ",752],["T_ARRAY","array",752],"(",["T_STRING","self",752],["T_DOUBLE_COLON","::",752],["T_STRING","INDEX",752],["T_WHITESPACE"," ",752],["T_DOUBLE_ARROW","=>",752],["T_WHITESPACE"," ",752],["T_VARIABLE","$index",752],")",";",["T_WHITESPACE","\n        ",752],"}",["T_WHITESPACE"," ",753],["T_ELSE","else",753],["T_WHITESPACE"," ",753],"{",["T_WHITESPACE","\n            ",753],["T_IF","if",754],["T_WHITESPACE"," ",754],"(",["T_ISSET","isset",754],"(",["T_VARIABLE","$match",754],"[",["T_LNUMBER","3",754],"]",")",")",["T_WHITESPACE"," ",754],"{",["T_WHITESPACE","\n                ",754],["T_VARIABLE","$multipleTerm",755],["T_WHITESPACE"," ",755],"=",["T_WHITESPACE"," ",755],["T_STRING","str_replace",755],"(",["T_VARIABLE","$match",755],"[",["T_LNUMBER","3",755],"]",",",["T_WHITESPACE"," ",755],["T_CONSTANT_ENCAPSED_STRING","''",755],",",["T_WHITESPACE"," ",755],["T_VARIABLE","$match",755],"[",["T_LNUMBER","2",755],"]",")",";",["T_WHITESPACE","\n                ",755],["T_VARIABLE","$index",756],["T_WHITESPACE"," ",756],"=",["T_WHITESPACE"," ",756],["T_STRING","intval",756],"(",["T_STRING","str_replace",756],"(",["T_CONSTANT_ENCAPSED_STRING","' '",756],",",["T_WHITESPACE"," ",756],["T_CONSTANT_ENCAPSED_STRING","''",756],",",["T_WHITESPACE"," ",756],["T_VARIABLE","$match",756],"[",["T_LNUMBER","3",756],"]",")",")",";",["T_WHITESPACE","\n            ",756],"}",["T_WHITESPACE"," ",757],["T_ELSE","else",757],["T_WHITESPACE"," ",757],"{",["T_WHITESPACE","\n                ",757],["T_VARIABLE","$multipleTerm",758],["T_WHITESPACE"," ",758],"=",["T_WHITESPACE"," ",758],["T_VARIABLE","$match",758],"[",["T_LNUMBER","2",758],"]",";",["T_WHITESPACE","\n                ",758],["T_VARIABLE","$index",759],["T_WHITESPACE"," ",759],"=",["T_WHITESPACE"," ",759],["T_LNUMBER","0",759],";",["T_WHITESPACE","\n            ",759],"}",["T_WHITESPACE","\n\n            ",760],["T_VARIABLE","$multiplier",762],["T_WHITESPACE"," ",762],"=",["T_WHITESPACE"," ",762],["T_STRING","str_ireplace",762],"(",["T_CONSTANT_ENCAPSED_STRING","'n'",762],",",["T_WHITESPACE"," ",762],["T_CONSTANT_ENCAPSED_STRING","''",762],",",["T_WHITESPACE"," ",762],["T_VARIABLE","$multipleTerm",762],")",";",["T_WHITESPACE","\n\n            ",762],["T_IF","if",764],["T_WHITESPACE"," ",764],"(","!",["T_STRING","strlen",764],"(",["T_VARIABLE","$multiplier",764],")",")",["T_WHITESPACE"," ",764],"{",["T_WHITESPACE","\n                ",764],["T_VARIABLE","$multiplier",765],["T_WHITESPACE"," ",765],"=",["T_WHITESPACE"," ",765],["T_LNUMBER","1",765],";",["T_WHITESPACE","\n            ",765],"}",["T_WHITESPACE"," ",766],["T_ELSEIF","elseif",766],["T_WHITESPACE"," ",766],"(",["T_VARIABLE","$multiplier",766],["T_WHITESPACE"," ",766],["T_IS_EQUAL","==",766],["T_WHITESPACE"," ",766],["T_LNUMBER","0",766],")",["T_WHITESPACE"," ",766],"{",["T_WHITESPACE","\n                ",766],["T_RETURN","return",767],["T_WHITESPACE"," ",767],["T_ARRAY","array",767],"(",["T_STRING","self",767],["T_DOUBLE_COLON","::",767],["T_STRING","INDEX",767],["T_WHITESPACE"," ",767],["T_DOUBLE_ARROW","=>",767],["T_WHITESPACE"," ",767],["T_VARIABLE","$index",767],")",";",["T_WHITESPACE","\n            ",767],"}",["T_WHITESPACE"," ",768],["T_ELSE","else",768],["T_WHITESPACE"," ",768],"{",["T_WHITESPACE","\n                ",768],["T_VARIABLE","$multiplier",769],["T_WHITESPACE"," ",769],"=",["T_WHITESPACE"," ",769],["T_STRING","intval",769],"(",["T_VARIABLE","$multiplier",769],")",";",["T_WHITESPACE","\n            ",769],"}",["T_WHITESPACE","\n\n            ",770],["T_WHILE","while",772],["T_WHITESPACE"," ",772],"(",["T_VARIABLE","$index",772],["T_WHITESPACE"," ",772],"<",["T_WHITESPACE"," ",772],["T_LNUMBER","0",772],")",["T_WHITESPACE"," ",772],"{",["T_WHITESPACE","\n                ",772],["T_VARIABLE","$index",773],["T_WHITESPACE"," ",773],["T_PLUS_EQUAL","+=",773],["T_WHITESPACE"," ",773],["T_STRING","abs",773],"(",["T_VARIABLE","$multiplier",773],")",";",["T_WHITESPACE","\n            ",773],"}",["T_WHITESPACE","\n\n            ",774],["T_RETURN","return",776],["T_WHITESPACE"," ",776],["T_ARRAY","array",776],"(",["T_STRING","self",776],["T_DOUBLE_COLON","::",776],["T_STRING","MULTIPLIER",776],["T_WHITESPACE"," ",776],["T_DOUBLE_ARROW","=>",776],["T_WHITESPACE"," ",776],["T_VARIABLE","$multiplier",776],",",["T_WHITESPACE"," ",776],["T_STRING","self",776],["T_DOUBLE_COLON","::",776],["T_STRING","INDEX",776],["T_WHITESPACE"," ",776],["T_DOUBLE_ARROW","=>",776],["T_WHITESPACE"," ",776],["T_VARIABLE","$index",776],")",";",["T_WHITESPACE","\n        ",776],"}",["T_WHITESPACE","\n    ",777],"}",["T_WHITESPACE","\n\n    ",778],["T_DOC_COMMENT","\/**\n     * Parses a CSS declaration block into property name\/value pairs.\n     *\n     * Example:\n     *\n     * The declaration block\n     *\n     *   \"color: #000; font-weight: bold;\"\n     *\n     * will be parsed into the following array:\n     *\n     *   \"color\" => \"#000\"\n     *   \"font-weight\" => \"bold\"\n     *\n     * @param string $cssDeclarationBlock the CSS declaration block without the curly braces, may be empty\n     *\n     * @return array the CSS declarations with the property names as array keys and the property values as array values\n     *\/",780],["T_WHITESPACE","\n    ",797],["T_PRIVATE","private",798],["T_WHITESPACE"," ",798],["T_FUNCTION","function",798],["T_WHITESPACE"," ",798],["T_STRING","parseCssDeclarationBlock",798],"(",["T_VARIABLE","$cssDeclarationBlock",798],")",["T_WHITESPACE"," ",798],"{",["T_WHITESPACE","\n        ",798],["T_IF","if",799],["T_WHITESPACE"," ",799],"(",["T_ISSET","isset",799],"(",["T_VARIABLE","$this",799],["T_OBJECT_OPERATOR","->",799],["T_STRING","caches",799],"[",["T_STRING","self",799],["T_DOUBLE_COLON","::",799],["T_STRING","CACHE_KEY_CSS_DECLARATION_BLOCK",799],"]","[",["T_VARIABLE","$cssDeclarationBlock",799],"]",")",")",["T_WHITESPACE"," ",799],"{",["T_WHITESPACE","\n            ",799],["T_RETURN","return",800],["T_WHITESPACE"," ",800],["T_VARIABLE","$this",800],["T_OBJECT_OPERATOR","->",800],["T_STRING","caches",800],"[",["T_STRING","self",800],["T_DOUBLE_COLON","::",800],["T_STRING","CACHE_KEY_CSS_DECLARATION_BLOCK",800],"]","[",["T_VARIABLE","$cssDeclarationBlock",800],"]",";",["T_WHITESPACE","\n        ",800],"}",["T_WHITESPACE","\n\n        ",801],["T_VARIABLE","$properties",803],["T_WHITESPACE"," ",803],"=",["T_WHITESPACE"," ",803],["T_ARRAY","array",803],"(",")",";",["T_WHITESPACE","\n        ",803],["T_VARIABLE","$declarations",804],["T_WHITESPACE"," ",804],"=",["T_WHITESPACE"," ",804],["T_STRING","explode",804],"(",["T_CONSTANT_ENCAPSED_STRING","';'",804],",",["T_WHITESPACE"," ",804],["T_VARIABLE","$cssDeclarationBlock",804],")",";",["T_WHITESPACE","\n        ",804],["T_FOREACH","foreach",805],["T_WHITESPACE"," ",805],"(",["T_VARIABLE","$declarations",805],["T_WHITESPACE"," ",805],["T_AS","as",805],["T_WHITESPACE"," ",805],["T_VARIABLE","$declaration",805],")",["T_WHITESPACE"," ",805],"{",["T_WHITESPACE","\n            ",805],["T_VARIABLE","$matches",806],["T_WHITESPACE"," ",806],"=",["T_WHITESPACE"," ",806],["T_ARRAY","array",806],"(",")",";",["T_WHITESPACE","\n            ",806],["T_IF","if",807],["T_WHITESPACE"," ",807],"(","!",["T_STRING","preg_match",807],"(",["T_CONSTANT_ENCAPSED_STRING","'\/ *([A-Za-z\\\\-]+) *: *([^;]+) *\/'",807],",",["T_WHITESPACE"," ",807],["T_VARIABLE","$declaration",807],",",["T_WHITESPACE"," ",807],["T_VARIABLE","$matches",807],")",")",["T_WHITESPACE"," ",807],"{",["T_WHITESPACE","\n                ",807],["T_CONTINUE","continue",808],";",["T_WHITESPACE","\n            ",808],"}",["T_WHITESPACE","\n            ",809],["T_VARIABLE","$propertyName",810],["T_WHITESPACE"," ",810],"=",["T_WHITESPACE"," ",810],["T_STRING","strtolower",810],"(",["T_VARIABLE","$matches",810],"[",["T_LNUMBER","1",810],"]",")",";",["T_WHITESPACE","\n            ",810],["T_VARIABLE","$propertyValue",811],["T_WHITESPACE"," ",811],"=",["T_WHITESPACE"," ",811],["T_VARIABLE","$matches",811],"[",["T_LNUMBER","2",811],"]",";",["T_WHITESPACE","\n            ",811],["T_VARIABLE","$properties",812],"[",["T_VARIABLE","$propertyName",812],"]",["T_WHITESPACE"," ",812],"=",["T_WHITESPACE"," ",812],["T_VARIABLE","$propertyValue",812],";",["T_WHITESPACE","\n        ",812],"}",["T_WHITESPACE","\n        ",813],["T_VARIABLE","$this",814],["T_OBJECT_OPERATOR","->",814],["T_STRING","caches",814],"[",["T_STRING","self",814],["T_DOUBLE_COLON","::",814],["T_STRING","CACHE_KEY_CSS_DECLARATION_BLOCK",814],"]","[",["T_VARIABLE","$cssDeclarationBlock",814],"]",["T_WHITESPACE"," ",814],"=",["T_WHITESPACE"," ",814],["T_VARIABLE","$properties",814],";",["T_WHITESPACE","\n\n        ",814],["T_RETURN","return",816],["T_WHITESPACE"," ",816],["T_VARIABLE","$properties",816],";",["T_WHITESPACE","\n    ",816],"}",["T_WHITESPACE","\n",817],"}",["T_WHITESPACE","\n",818]]
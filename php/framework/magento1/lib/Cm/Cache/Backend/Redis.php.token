[["T_OPEN_TAG","<?php\n",1],["T_COMMENT","\/*\n==New BSD License==\n\nCopyright (c) 2013, Colin Mollenhour\nAll rights reserved.\n\nRedistribution and use in source and binary forms, with or without\nmodification, are permitted provided that the following conditions are met:\n\n    * Redistributions of source code must retain the above copyright\n      notice, this list of conditions and the following disclaimer.\n    * Redistributions in binary form must reproduce the above copyright\n      notice, this list of conditions and the following disclaimer in the\n      documentation and\/or other materials provided with the distribution.\n    * The name of Colin Mollenhour may not be used to endorse or promote products\n      derived from this software without specific prior written permission.\n    * The class name must remain as Cm_Cache_Backend_Redis.\n\nTHIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\nANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\nWARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\nDISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER BE LIABLE FOR ANY\nDIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n(INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\nLOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\nON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n(INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\nSOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n *\/",2],["T_WHITESPACE","\n\n",30],["T_DOC_COMMENT","\/**\n * Redis adapter for Zend_Cache\n *\n * @copyright  Copyright (c) 2013 Colin Mollenhour (http:\/\/colin.mollenhour.com)\n * @license    http:\/\/framework.zend.com\/license\/new-bsd     New BSD License\n * @author     Colin Mollenhour (http:\/\/colin.mollenhour.com)\n *\/",32],["T_WHITESPACE","\n",38],["T_CLASS","class",39],["T_WHITESPACE"," ",39],["T_STRING","Cm_Cache_Backend_Redis",39],["T_WHITESPACE"," ",39],["T_EXTENDS","extends",39],["T_WHITESPACE"," ",39],["T_STRING","Zend_Cache_Backend",39],["T_WHITESPACE"," ",39],["T_IMPLEMENTS","implements",39],["T_WHITESPACE"," ",39],["T_STRING","Zend_Cache_Backend_ExtendedInterface",39],["T_WHITESPACE","\n",39],"{",["T_WHITESPACE","\n\n    ",40],["T_CONST","const",42],["T_WHITESPACE"," ",42],["T_STRING","SET_IDS",42],["T_WHITESPACE","         ",42],"=",["T_WHITESPACE"," ",42],["T_CONSTANT_ENCAPSED_STRING","'zc:ids'",42],";",["T_WHITESPACE","\n    ",42],["T_CONST","const",43],["T_WHITESPACE"," ",43],["T_STRING","SET_TAGS",43],["T_WHITESPACE","        ",43],"=",["T_WHITESPACE"," ",43],["T_CONSTANT_ENCAPSED_STRING","'zc:tags'",43],";",["T_WHITESPACE","\n\n    ",43],["T_CONST","const",45],["T_WHITESPACE"," ",45],["T_STRING","PREFIX_KEY",45],["T_WHITESPACE","      ",45],"=",["T_WHITESPACE"," ",45],["T_CONSTANT_ENCAPSED_STRING","'zc:k:'",45],";",["T_WHITESPACE","\n    ",45],["T_CONST","const",46],["T_WHITESPACE"," ",46],["T_STRING","PREFIX_TAG_IDS",46],["T_WHITESPACE","  ",46],"=",["T_WHITESPACE"," ",46],["T_CONSTANT_ENCAPSED_STRING","'zc:ti:'",46],";",["T_WHITESPACE","\n\n    ",46],["T_CONST","const",48],["T_WHITESPACE"," ",48],["T_STRING","FIELD_DATA",48],["T_WHITESPACE","      ",48],"=",["T_WHITESPACE"," ",48],["T_CONSTANT_ENCAPSED_STRING","'d'",48],";",["T_WHITESPACE","\n    ",48],["T_CONST","const",49],["T_WHITESPACE"," ",49],["T_STRING","FIELD_MTIME",49],["T_WHITESPACE","     ",49],"=",["T_WHITESPACE"," ",49],["T_CONSTANT_ENCAPSED_STRING","'m'",49],";",["T_WHITESPACE","\n    ",49],["T_CONST","const",50],["T_WHITESPACE"," ",50],["T_STRING","FIELD_TAGS",50],["T_WHITESPACE","      ",50],"=",["T_WHITESPACE"," ",50],["T_CONSTANT_ENCAPSED_STRING","'t'",50],";",["T_WHITESPACE","\n    ",50],["T_CONST","const",51],["T_WHITESPACE"," ",51],["T_STRING","FIELD_INF",51],["T_WHITESPACE","       ",51],"=",["T_WHITESPACE"," ",51],["T_CONSTANT_ENCAPSED_STRING","'i'",51],";",["T_WHITESPACE","\n\n    ",51],["T_CONST","const",53],["T_WHITESPACE"," ",53],["T_STRING","MAX_LIFETIME",53],["T_WHITESPACE","    ",53],"=",["T_WHITESPACE"," ",53],["T_LNUMBER","2592000",53],";",["T_WHITESPACE"," ",53],["T_COMMENT","\/* Redis backend limit *\/",53],["T_WHITESPACE","\n    ",53],["T_CONST","const",54],["T_WHITESPACE"," ",54],["T_STRING","COMPRESS_PREFIX",54],["T_WHITESPACE"," ",54],"=",["T_WHITESPACE"," ",54],["T_CONSTANT_ENCAPSED_STRING","\":\\x1f\\x8b\"",54],";",["T_WHITESPACE","\n    ",54],["T_CONST","const",55],["T_WHITESPACE"," ",55],["T_STRING","DEFAULT_CONNECT_TIMEOUT",55],["T_WHITESPACE"," ",55],"=",["T_WHITESPACE"," ",55],["T_DNUMBER","2.5",55],";",["T_WHITESPACE","\n    ",55],["T_CONST","const",56],["T_WHITESPACE"," ",56],["T_STRING","DEFAULT_CONNECT_RETRIES",56],["T_WHITESPACE"," ",56],"=",["T_WHITESPACE"," ",56],["T_LNUMBER","1",56],";",["T_WHITESPACE","\n\n    ",56],["T_CONST","const",58],["T_WHITESPACE"," ",58],["T_STRING","LUA_SAVE_SH1",58],["T_WHITESPACE"," ",58],"=",["T_WHITESPACE"," ",58],["T_CONSTANT_ENCAPSED_STRING","'1617c9fb2bda7d790bb1aaa320c1099d81825e64'",58],";",["T_WHITESPACE","\n    ",58],["T_CONST","const",59],["T_WHITESPACE"," ",59],["T_STRING","LUA_CLEAN_SH1",59],["T_WHITESPACE"," ",59],"=",["T_WHITESPACE"," ",59],["T_CONSTANT_ENCAPSED_STRING","'42ab2fe548aee5ff540123687a2c39a38b54e4a2'",59],";",["T_WHITESPACE","\n    ",59],["T_CONST","const",60],["T_WHITESPACE"," ",60],["T_STRING","LUA_GC_SH1",60],["T_WHITESPACE"," ",60],"=",["T_WHITESPACE"," ",60],["T_CONSTANT_ENCAPSED_STRING","'c00416b970f1aa6363b44965d4cf60ee99a6f065'",60],";",["T_WHITESPACE","\n\n    ",60],["T_DOC_COMMENT","\/** @var Credis_Client *\/",62],["T_WHITESPACE","\n    ",62],["T_PROTECTED","protected",63],["T_WHITESPACE"," ",63],["T_VARIABLE","$_redis",63],";",["T_WHITESPACE","\n\n    ",63],["T_DOC_COMMENT","\/** @var bool *\/",65],["T_WHITESPACE","\n    ",65],["T_PROTECTED","protected",66],["T_WHITESPACE"," ",66],["T_VARIABLE","$_notMatchingTags",66],["T_WHITESPACE"," ",66],"=",["T_WHITESPACE"," ",66],["T_STRING","FALSE",66],";",["T_WHITESPACE","\n\n    ",66],["T_DOC_COMMENT","\/** @var int *\/",68],["T_WHITESPACE","\n    ",68],["T_PROTECTED","protected",69],["T_WHITESPACE"," ",69],["T_VARIABLE","$_lifetimelimit",69],["T_WHITESPACE"," ",69],"=",["T_WHITESPACE"," ",69],["T_STRING","self",69],["T_DOUBLE_COLON","::",69],["T_STRING","MAX_LIFETIME",69],";",["T_WHITESPACE"," ",69],["T_COMMENT","\/* Redis backend limit *\/",69],["T_WHITESPACE","\n\n    ",69],["T_DOC_COMMENT","\/** @var int *\/",71],["T_WHITESPACE","\n    ",71],["T_PROTECTED","protected",72],["T_WHITESPACE"," ",72],["T_VARIABLE","$_compressTags",72],["T_WHITESPACE"," ",72],"=",["T_WHITESPACE"," ",72],["T_LNUMBER","1",72],";",["T_WHITESPACE","\n\n    ",72],["T_DOC_COMMENT","\/** @var int *\/",74],["T_WHITESPACE","\n    ",74],["T_PROTECTED","protected",75],["T_WHITESPACE"," ",75],["T_VARIABLE","$_compressData",75],["T_WHITESPACE"," ",75],"=",["T_WHITESPACE"," ",75],["T_LNUMBER","1",75],";",["T_WHITESPACE","\n\n    ",75],["T_DOC_COMMENT","\/** @var int *\/",77],["T_WHITESPACE","\n    ",77],["T_PROTECTED","protected",78],["T_WHITESPACE"," ",78],["T_VARIABLE","$_compressThreshold",78],["T_WHITESPACE"," ",78],"=",["T_WHITESPACE"," ",78],["T_LNUMBER","20480",78],";",["T_WHITESPACE","\n\n    ",78],["T_DOC_COMMENT","\/** @var string *\/",80],["T_WHITESPACE","\n    ",80],["T_PROTECTED","protected",81],["T_WHITESPACE"," ",81],["T_VARIABLE","$_compressionLib",81],";",["T_WHITESPACE","\n\n    ",81],["T_DOC_COMMENT","\/** @var bool *\/",83],["T_WHITESPACE","\n    ",83],["T_PROTECTED","protected",84],["T_WHITESPACE"," ",84],["T_VARIABLE","$_useLua",84],["T_WHITESPACE"," ",84],"=",["T_WHITESPACE"," ",84],["T_STRING","false",84],";",["T_WHITESPACE","\n\n    ",84],["T_DOC_COMMENT","\/**\n     * Lua's unpack() has a limit on the size of the table imposed by\n     * the number of Lua stack slots that a C function can use.\n     * This value is defined by LUAI_MAXCSTACK in luaconf.h and for Redis it is set to 8000.\n     *\n     * @see https:\/\/github.com\/antirez\/redis\/blob\/b903145\/deps\/lua\/src\/luaconf.h#L439\n     * @var int\n     *\/",86],["T_WHITESPACE","\n    ",93],["T_PROTECTED","protected",94],["T_WHITESPACE"," ",94],["T_VARIABLE","$_luaMaxCStack",94],["T_WHITESPACE"," ",94],"=",["T_WHITESPACE"," ",94],["T_LNUMBER","5000",94],";",["T_WHITESPACE","\n\n    ",94],["T_DOC_COMMENT","\/**\n     * Contruct Zend_Cache Redis backend\n     * @param array $options\n     * @return \\Cm_Cache_Backend_Redis\n     *\/",96],["T_WHITESPACE","\n    ",100],["T_PUBLIC","public",101],["T_WHITESPACE"," ",101],["T_FUNCTION","function",101],["T_WHITESPACE"," ",101],["T_STRING","__construct",101],"(",["T_VARIABLE","$options",101],["T_WHITESPACE"," ",101],"=",["T_WHITESPACE"," ",101],["T_ARRAY","array",101],"(",")",")",["T_WHITESPACE","\n    ",101],"{",["T_WHITESPACE","\n        ",102],["T_IF","if",103],["T_WHITESPACE"," ",103],"(",["T_WHITESPACE"," ",103],["T_EMPTY","empty",103],"(",["T_VARIABLE","$options",103],"[",["T_CONSTANT_ENCAPSED_STRING","'server'",103],"]",")",["T_WHITESPACE"," ",103],")",["T_WHITESPACE"," ",103],"{",["T_WHITESPACE","\n            ",103],["T_STRING","Zend_Cache",104],["T_DOUBLE_COLON","::",104],["T_STRING","throwException",104],"(",["T_CONSTANT_ENCAPSED_STRING","'Redis \\'server\\' not specified.'",104],")",";",["T_WHITESPACE","\n        ",104],"}",["T_WHITESPACE","\n\n        ",105],["T_IF","if",107],["T_WHITESPACE"," ",107],"(",["T_WHITESPACE"," ",107],["T_EMPTY","empty",107],"(",["T_VARIABLE","$options",107],"[",["T_CONSTANT_ENCAPSED_STRING","'port'",107],"]",")",["T_WHITESPACE"," ",107],["T_BOOLEAN_AND","&&",107],["T_WHITESPACE"," ",107],["T_STRING","substr",107],"(",["T_VARIABLE","$options",107],"[",["T_CONSTANT_ENCAPSED_STRING","'server'",107],"]",",",["T_LNUMBER","0",107],",",["T_LNUMBER","1",107],")",["T_WHITESPACE"," ",107],["T_IS_NOT_EQUAL","!=",107],["T_WHITESPACE"," ",107],["T_CONSTANT_ENCAPSED_STRING","'\/'",107],["T_WHITESPACE"," ",107],")",["T_WHITESPACE"," ",107],"{",["T_WHITESPACE","\n            ",107],["T_STRING","Zend_Cache",108],["T_DOUBLE_COLON","::",108],["T_STRING","throwException",108],"(",["T_CONSTANT_ENCAPSED_STRING","'Redis \\'port\\' not specified.'",108],")",";",["T_WHITESPACE","\n        ",108],"}",["T_WHITESPACE","\n\n        ",109],["T_VARIABLE","$port",111],["T_WHITESPACE"," ",111],"=",["T_WHITESPACE"," ",111],["T_ISSET","isset",111],"(",["T_VARIABLE","$options",111],"[",["T_CONSTANT_ENCAPSED_STRING","'port'",111],"]",")",["T_WHITESPACE"," ",111],"?",["T_WHITESPACE"," ",111],["T_VARIABLE","$options",111],"[",["T_CONSTANT_ENCAPSED_STRING","'port'",111],"]",["T_WHITESPACE"," ",111],":",["T_WHITESPACE"," ",111],["T_STRING","NULL",111],";",["T_WHITESPACE","\n        ",111],["T_VARIABLE","$timeout",112],["T_WHITESPACE"," ",112],"=",["T_WHITESPACE"," ",112],["T_ISSET","isset",112],"(",["T_VARIABLE","$options",112],"[",["T_CONSTANT_ENCAPSED_STRING","'timeout'",112],"]",")",["T_WHITESPACE"," ",112],"?",["T_WHITESPACE"," ",112],["T_VARIABLE","$options",112],"[",["T_CONSTANT_ENCAPSED_STRING","'timeout'",112],"]",["T_WHITESPACE"," ",112],":",["T_WHITESPACE"," ",112],["T_STRING","self",112],["T_DOUBLE_COLON","::",112],["T_STRING","DEFAULT_CONNECT_TIMEOUT",112],";",["T_WHITESPACE","\n        ",112],["T_VARIABLE","$persistent",113],["T_WHITESPACE"," ",113],"=",["T_WHITESPACE"," ",113],["T_ISSET","isset",113],"(",["T_VARIABLE","$options",113],"[",["T_CONSTANT_ENCAPSED_STRING","'persistent'",113],"]",")",["T_WHITESPACE"," ",113],"?",["T_WHITESPACE"," ",113],["T_VARIABLE","$options",113],"[",["T_CONSTANT_ENCAPSED_STRING","'persistent'",113],"]",["T_WHITESPACE"," ",113],":",["T_WHITESPACE"," ",113],["T_CONSTANT_ENCAPSED_STRING","''",113],";",["T_WHITESPACE","\n        ",113],["T_VARIABLE","$this",114],["T_OBJECT_OPERATOR","->",114],["T_STRING","_redis",114],["T_WHITESPACE"," ",114],"=",["T_WHITESPACE"," ",114],["T_NEW","new",114],["T_WHITESPACE"," ",114],["T_STRING","Credis_Client",114],"(",["T_VARIABLE","$options",114],"[",["T_CONSTANT_ENCAPSED_STRING","'server'",114],"]",",",["T_WHITESPACE"," ",114],["T_VARIABLE","$port",114],",",["T_WHITESPACE"," ",114],["T_VARIABLE","$timeout",114],",",["T_WHITESPACE"," ",114],["T_VARIABLE","$persistent",114],")",";",["T_WHITESPACE","\n\n        ",114],["T_IF","if",116],["T_WHITESPACE"," ",116],"(",["T_WHITESPACE"," ",116],["T_ISSET","isset",116],"(",["T_VARIABLE","$options",116],"[",["T_CONSTANT_ENCAPSED_STRING","'force_standalone'",116],"]",")",["T_WHITESPACE"," ",116],["T_BOOLEAN_AND","&&",116],["T_WHITESPACE"," ",116],["T_VARIABLE","$options",116],"[",["T_CONSTANT_ENCAPSED_STRING","'force_standalone'",116],"]",")",["T_WHITESPACE"," ",116],"{",["T_WHITESPACE","\n            ",116],["T_VARIABLE","$this",117],["T_OBJECT_OPERATOR","->",117],["T_STRING","_redis",117],["T_OBJECT_OPERATOR","->",117],["T_STRING","forceStandalone",117],"(",")",";",["T_WHITESPACE","\n        ",117],"}",["T_WHITESPACE","\n\n        ",118],["T_VARIABLE","$connectRetries",120],["T_WHITESPACE"," ",120],"=",["T_WHITESPACE"," ",120],["T_ISSET","isset",120],"(",["T_VARIABLE","$options",120],"[",["T_CONSTANT_ENCAPSED_STRING","'connect_retries'",120],"]",")",["T_WHITESPACE"," ",120],"?",["T_WHITESPACE"," ",120],["T_INT_CAST","(int)",120],["T_VARIABLE","$options",120],"[",["T_CONSTANT_ENCAPSED_STRING","'connect_retries'",120],"]",["T_WHITESPACE"," ",120],":",["T_WHITESPACE"," ",120],["T_STRING","self",120],["T_DOUBLE_COLON","::",120],["T_STRING","DEFAULT_CONNECT_RETRIES",120],";",["T_WHITESPACE","\n        ",120],["T_VARIABLE","$this",121],["T_OBJECT_OPERATOR","->",121],["T_STRING","_redis",121],["T_OBJECT_OPERATOR","->",121],["T_STRING","setMaxConnectRetries",121],"(",["T_VARIABLE","$connectRetries",121],")",";",["T_WHITESPACE","\n\n        ",121],["T_IF","if",123],["T_WHITESPACE"," ",123],"(",["T_WHITESPACE"," ",123],"!",["T_WHITESPACE"," ",123],["T_EMPTY","empty",123],"(",["T_VARIABLE","$options",123],"[",["T_CONSTANT_ENCAPSED_STRING","'read_timeout'",123],"]",")",["T_WHITESPACE"," ",123],["T_BOOLEAN_AND","&&",123],["T_WHITESPACE"," ",123],["T_VARIABLE","$options",123],"[",["T_CONSTANT_ENCAPSED_STRING","'read_timeout'",123],"]",["T_WHITESPACE"," ",123],">",["T_WHITESPACE"," ",123],["T_LNUMBER","0",123],")",["T_WHITESPACE"," ",123],"{",["T_WHITESPACE","\n            ",123],["T_VARIABLE","$this",124],["T_OBJECT_OPERATOR","->",124],["T_STRING","_redis",124],["T_OBJECT_OPERATOR","->",124],["T_STRING","setReadTimeout",124],"(",["T_DOUBLE_CAST","(float)",124],["T_WHITESPACE"," ",124],["T_VARIABLE","$options",124],"[",["T_CONSTANT_ENCAPSED_STRING","'read_timeout'",124],"]",")",";",["T_WHITESPACE","\n        ",124],"}",["T_WHITESPACE","\n\n        ",125],["T_IF","if",127],["T_WHITESPACE"," ",127],"(",["T_WHITESPACE"," ",127],"!",["T_WHITESPACE"," ",127],["T_EMPTY","empty",127],"(",["T_VARIABLE","$options",127],"[",["T_CONSTANT_ENCAPSED_STRING","'password'",127],"]",")",")",["T_WHITESPACE"," ",127],"{",["T_WHITESPACE","\n            ",127],["T_VARIABLE","$this",128],["T_OBJECT_OPERATOR","->",128],["T_STRING","_redis",128],["T_OBJECT_OPERATOR","->",128],["T_STRING","auth",128],"(",["T_VARIABLE","$options",128],"[",["T_CONSTANT_ENCAPSED_STRING","'password'",128],"]",")",["T_WHITESPACE"," ",128],["T_LOGICAL_OR","or",128],["T_WHITESPACE"," ",128],["T_STRING","Zend_Cache",128],["T_DOUBLE_COLON","::",128],["T_STRING","throwException",128],"(",["T_CONSTANT_ENCAPSED_STRING","'Unable to authenticate with the redis server.'",128],")",";",["T_WHITESPACE","\n        ",128],"}",["T_WHITESPACE","\n\n        ",129],["T_COMMENT","\/\/ Always select database on startup in case persistent connection is re-used by other code\n",131],["T_WHITESPACE","        ",132],["T_IF","if",132],["T_WHITESPACE"," ",132],"(",["T_EMPTY","empty",132],"(",["T_VARIABLE","$options",132],"[",["T_CONSTANT_ENCAPSED_STRING","'database'",132],"]",")",")",["T_WHITESPACE"," ",132],"{",["T_WHITESPACE","\n            ",132],["T_VARIABLE","$options",133],"[",["T_CONSTANT_ENCAPSED_STRING","'database'",133],"]",["T_WHITESPACE"," ",133],"=",["T_WHITESPACE"," ",133],["T_LNUMBER","0",133],";",["T_WHITESPACE","\n        ",133],"}",["T_WHITESPACE","\n        ",134],["T_VARIABLE","$this",135],["T_OBJECT_OPERATOR","->",135],["T_STRING","_redis",135],["T_OBJECT_OPERATOR","->",135],["T_STRING","select",135],"(",["T_WHITESPACE"," ",135],["T_INT_CAST","(int)",135],["T_WHITESPACE"," ",135],["T_VARIABLE","$options",135],"[",["T_CONSTANT_ENCAPSED_STRING","'database'",135],"]",")",["T_WHITESPACE"," ",135],["T_LOGICAL_OR","or",135],["T_WHITESPACE"," ",135],["T_STRING","Zend_Cache",135],["T_DOUBLE_COLON","::",135],["T_STRING","throwException",135],"(",["T_CONSTANT_ENCAPSED_STRING","'The redis database could not be selected.'",135],")",";",["T_WHITESPACE","\n\n        ",135],["T_IF","if",137],["T_WHITESPACE"," ",137],"(",["T_WHITESPACE"," ",137],["T_ISSET","isset",137],"(",["T_VARIABLE","$options",137],"[",["T_CONSTANT_ENCAPSED_STRING","'notMatchingTags'",137],"]",")",["T_WHITESPACE"," ",137],")",["T_WHITESPACE"," ",137],"{",["T_WHITESPACE","\n            ",137],["T_VARIABLE","$this",138],["T_OBJECT_OPERATOR","->",138],["T_STRING","_notMatchingTags",138],["T_WHITESPACE"," ",138],"=",["T_WHITESPACE"," ",138],["T_BOOL_CAST","(bool)",138],["T_WHITESPACE"," ",138],["T_VARIABLE","$options",138],"[",["T_CONSTANT_ENCAPSED_STRING","'notMatchingTags'",138],"]",";",["T_WHITESPACE","\n        ",138],"}",["T_WHITESPACE","\n\n        ",139],["T_IF","if",141],["T_WHITESPACE"," ",141],"(",["T_WHITESPACE"," ",141],["T_ISSET","isset",141],"(",["T_VARIABLE","$options",141],"[",["T_CONSTANT_ENCAPSED_STRING","'compress_tags'",141],"]",")",")",["T_WHITESPACE"," ",141],"{",["T_WHITESPACE","\n            ",141],["T_VARIABLE","$this",142],["T_OBJECT_OPERATOR","->",142],["T_STRING","_compressTags",142],["T_WHITESPACE"," ",142],"=",["T_WHITESPACE"," ",142],["T_INT_CAST","(int)",142],["T_WHITESPACE"," ",142],["T_VARIABLE","$options",142],"[",["T_CONSTANT_ENCAPSED_STRING","'compress_tags'",142],"]",";",["T_WHITESPACE","\n        ",142],"}",["T_WHITESPACE","\n\n        ",143],["T_IF","if",145],["T_WHITESPACE"," ",145],"(",["T_WHITESPACE"," ",145],["T_ISSET","isset",145],"(",["T_VARIABLE","$options",145],"[",["T_CONSTANT_ENCAPSED_STRING","'compress_data'",145],"]",")",")",["T_WHITESPACE"," ",145],"{",["T_WHITESPACE","\n            ",145],["T_VARIABLE","$this",146],["T_OBJECT_OPERATOR","->",146],["T_STRING","_compressData",146],["T_WHITESPACE"," ",146],"=",["T_WHITESPACE"," ",146],["T_INT_CAST","(int)",146],["T_WHITESPACE"," ",146],["T_VARIABLE","$options",146],"[",["T_CONSTANT_ENCAPSED_STRING","'compress_data'",146],"]",";",["T_WHITESPACE","\n        ",146],"}",["T_WHITESPACE","\n\n        ",147],["T_IF","if",149],["T_WHITESPACE"," ",149],"(",["T_WHITESPACE"," ",149],["T_ISSET","isset",149],"(",["T_VARIABLE","$options",149],"[",["T_CONSTANT_ENCAPSED_STRING","'lifetimelimit'",149],"]",")",")",["T_WHITESPACE"," ",149],"{",["T_WHITESPACE","\n            ",149],["T_VARIABLE","$this",150],["T_OBJECT_OPERATOR","->",150],["T_STRING","_lifetimelimit",150],["T_WHITESPACE"," ",150],"=",["T_WHITESPACE"," ",150],["T_INT_CAST","(int)",150],["T_WHITESPACE"," ",150],["T_STRING","min",150],"(",["T_VARIABLE","$options",150],"[",["T_CONSTANT_ENCAPSED_STRING","'lifetimelimit'",150],"]",",",["T_WHITESPACE"," ",150],["T_STRING","self",150],["T_DOUBLE_COLON","::",150],["T_STRING","MAX_LIFETIME",150],")",";",["T_WHITESPACE","\n        ",150],"}",["T_WHITESPACE","\n\n        ",151],["T_IF","if",153],["T_WHITESPACE"," ",153],"(",["T_WHITESPACE"," ",153],["T_ISSET","isset",153],"(",["T_VARIABLE","$options",153],"[",["T_CONSTANT_ENCAPSED_STRING","'compress_threshold'",153],"]",")",")",["T_WHITESPACE"," ",153],"{",["T_WHITESPACE","\n            ",153],["T_VARIABLE","$this",154],["T_OBJECT_OPERATOR","->",154],["T_STRING","_compressThreshold",154],["T_WHITESPACE"," ",154],"=",["T_WHITESPACE"," ",154],["T_INT_CAST","(int)",154],["T_WHITESPACE"," ",154],["T_VARIABLE","$options",154],"[",["T_CONSTANT_ENCAPSED_STRING","'compress_threshold'",154],"]",";",["T_WHITESPACE","\n        ",154],"}",["T_WHITESPACE","\n\n        ",155],["T_IF","if",157],["T_WHITESPACE"," ",157],"(",["T_WHITESPACE"," ",157],["T_ISSET","isset",157],"(",["T_VARIABLE","$options",157],"[",["T_CONSTANT_ENCAPSED_STRING","'automatic_cleaning_factor'",157],"]",")",["T_WHITESPACE"," ",157],")",["T_WHITESPACE"," ",157],"{",["T_WHITESPACE","\n            ",157],["T_VARIABLE","$this",158],["T_OBJECT_OPERATOR","->",158],["T_STRING","_options",158],"[",["T_CONSTANT_ENCAPSED_STRING","'automatic_cleaning_factor'",158],"]",["T_WHITESPACE"," ",158],"=",["T_WHITESPACE"," ",158],["T_INT_CAST","(int)",158],["T_WHITESPACE"," ",158],["T_VARIABLE","$options",158],"[",["T_CONSTANT_ENCAPSED_STRING","'automatic_cleaning_factor'",158],"]",";",["T_WHITESPACE","\n        ",158],"}",["T_WHITESPACE"," ",159],["T_ELSE","else",159],["T_WHITESPACE"," ",159],"{",["T_WHITESPACE","\n            ",159],["T_VARIABLE","$this",160],["T_OBJECT_OPERATOR","->",160],["T_STRING","_options",160],"[",["T_CONSTANT_ENCAPSED_STRING","'automatic_cleaning_factor'",160],"]",["T_WHITESPACE"," ",160],"=",["T_WHITESPACE"," ",160],["T_LNUMBER","0",160],";",["T_WHITESPACE","\n        ",160],"}",["T_WHITESPACE","\n\n        ",161],["T_IF","if",163],["T_WHITESPACE"," ",163],"(",["T_WHITESPACE"," ",163],["T_ISSET","isset",163],"(",["T_VARIABLE","$options",163],"[",["T_CONSTANT_ENCAPSED_STRING","'compression_lib'",163],"]",")",["T_WHITESPACE"," ",163],")",["T_WHITESPACE"," ",163],"{",["T_WHITESPACE","\n            ",163],["T_VARIABLE","$this",164],["T_OBJECT_OPERATOR","->",164],["T_STRING","_compressionLib",164],["T_WHITESPACE"," ",164],"=",["T_WHITESPACE"," ",164],["T_STRING_CAST","(string)",164],["T_WHITESPACE"," ",164],["T_VARIABLE","$options",164],"[",["T_CONSTANT_ENCAPSED_STRING","'compression_lib'",164],"]",";",["T_WHITESPACE","\n        ",164],"}",["T_WHITESPACE","\n        ",165],["T_ELSE","else",166],["T_WHITESPACE"," ",166],["T_IF","if",166],["T_WHITESPACE"," ",166],"(",["T_WHITESPACE"," ",166],["T_STRING","function_exists",166],"(",["T_CONSTANT_ENCAPSED_STRING","'snappy_compress'",166],")",["T_WHITESPACE"," ",166],")",["T_WHITESPACE"," ",166],"{",["T_WHITESPACE","\n            ",166],["T_VARIABLE","$this",167],["T_OBJECT_OPERATOR","->",167],["T_STRING","_compressionLib",167],["T_WHITESPACE"," ",167],"=",["T_WHITESPACE"," ",167],["T_CONSTANT_ENCAPSED_STRING","'snappy'",167],";",["T_WHITESPACE","\n        ",167],"}",["T_WHITESPACE","\n        ",168],["T_ELSE","else",169],["T_WHITESPACE"," ",169],["T_IF","if",169],["T_WHITESPACE"," ",169],"(",["T_WHITESPACE"," ",169],["T_STRING","function_exists",169],"(",["T_CONSTANT_ENCAPSED_STRING","'lz4_compress'",169],")",")",["T_WHITESPACE"," ",169],"{",["T_WHITESPACE","\n            ",169],["T_VARIABLE","$this",170],["T_OBJECT_OPERATOR","->",170],["T_STRING","_compressionLib",170],["T_WHITESPACE"," ",170],"=",["T_WHITESPACE"," ",170],["T_CONSTANT_ENCAPSED_STRING","'l4z'",170],";",["T_WHITESPACE","\n        ",170],"}",["T_WHITESPACE","\n        ",171],["T_ELSE","else",172],["T_WHITESPACE"," ",172],["T_IF","if",172],["T_WHITESPACE"," ",172],"(",["T_WHITESPACE"," ",172],["T_STRING","function_exists",172],"(",["T_CONSTANT_ENCAPSED_STRING","'lzf_compress'",172],")",["T_WHITESPACE"," ",172],")",["T_WHITESPACE"," ",172],"{",["T_WHITESPACE","\n            ",172],["T_VARIABLE","$this",173],["T_OBJECT_OPERATOR","->",173],["T_STRING","_compressionLib",173],["T_WHITESPACE"," ",173],"=",["T_WHITESPACE"," ",173],["T_CONSTANT_ENCAPSED_STRING","'lzf'",173],";",["T_WHITESPACE","\n        ",173],"}",["T_WHITESPACE","\n        ",174],["T_ELSE","else",175],["T_WHITESPACE"," ",175],"{",["T_WHITESPACE","\n            ",175],["T_VARIABLE","$this",176],["T_OBJECT_OPERATOR","->",176],["T_STRING","_compressionLib",176],["T_WHITESPACE"," ",176],"=",["T_WHITESPACE"," ",176],["T_CONSTANT_ENCAPSED_STRING","'gzip'",176],";",["T_WHITESPACE","\n        ",176],"}",["T_WHITESPACE","\n        ",177],["T_VARIABLE","$this",178],["T_OBJECT_OPERATOR","->",178],["T_STRING","_compressPrefix",178],["T_WHITESPACE"," ",178],"=",["T_WHITESPACE"," ",178],["T_STRING","substr",178],"(",["T_VARIABLE","$this",178],["T_OBJECT_OPERATOR","->",178],["T_STRING","_compressionLib",178],",",["T_LNUMBER","0",178],",",["T_LNUMBER","2",178],")",".",["T_STRING","self",178],["T_DOUBLE_COLON","::",178],["T_STRING","COMPRESS_PREFIX",178],";",["T_WHITESPACE","\n\n        ",178],["T_IF","if",180],["T_WHITESPACE"," ",180],"(",["T_ISSET","isset",180],"(",["T_VARIABLE","$options",180],"[",["T_CONSTANT_ENCAPSED_STRING","'use_lua'",180],"]",")",")",["T_WHITESPACE"," ",180],"{",["T_WHITESPACE","\n            ",180],["T_VARIABLE","$this",181],["T_OBJECT_OPERATOR","->",181],["T_STRING","_useLua",181],["T_WHITESPACE"," ",181],"=",["T_WHITESPACE"," ",181],["T_BOOL_CAST","(bool)",181],["T_WHITESPACE"," ",181],["T_VARIABLE","$options",181],"[",["T_CONSTANT_ENCAPSED_STRING","'use_lua'",181],"]",";",["T_WHITESPACE","\n        ",181],"}",["T_WHITESPACE","\n\n        ",182],["T_IF","if",184],["T_WHITESPACE"," ",184],"(",["T_ISSET","isset",184],"(",["T_VARIABLE","$options",184],"[",["T_CONSTANT_ENCAPSED_STRING","'lua_max_c_stack'",184],"]",")",")",["T_WHITESPACE"," ",184],"{",["T_WHITESPACE","\n            ",184],["T_VARIABLE","$this",185],["T_OBJECT_OPERATOR","->",185],["T_STRING","_luaMaxCStack",185],["T_WHITESPACE"," ",185],"=",["T_WHITESPACE"," ",185],["T_INT_CAST","(int)",185],["T_WHITESPACE"," ",185],["T_VARIABLE","$options",185],"[",["T_CONSTANT_ENCAPSED_STRING","'lua_max_c_stack'",185],"]",";",["T_WHITESPACE","\n        ",185],"}",["T_WHITESPACE","\n    ",186],"}",["T_WHITESPACE","\n\n    ",187],["T_DOC_COMMENT","\/**\n     * Load value with given id from cache\n     *\n     * @param  string  $id                     Cache id\n     * @param  boolean $doNotTestCacheValidity If set to true, the cache validity won't be tested\n     * @return bool|string\n     *\/",189],["T_WHITESPACE","\n    ",195],["T_PUBLIC","public",196],["T_WHITESPACE"," ",196],["T_FUNCTION","function",196],["T_WHITESPACE"," ",196],["T_STRING","load",196],"(",["T_VARIABLE","$id",196],",",["T_WHITESPACE"," ",196],["T_VARIABLE","$doNotTestCacheValidity",196],["T_WHITESPACE"," ",196],"=",["T_WHITESPACE"," ",196],["T_STRING","false",196],")",["T_WHITESPACE","\n    ",196],"{",["T_WHITESPACE","\n        ",197],["T_VARIABLE","$data",198],["T_WHITESPACE"," ",198],"=",["T_WHITESPACE"," ",198],["T_VARIABLE","$this",198],["T_OBJECT_OPERATOR","->",198],["T_STRING","_redis",198],["T_OBJECT_OPERATOR","->",198],["T_STRING","hGet",198],"(",["T_STRING","self",198],["T_DOUBLE_COLON","::",198],["T_STRING","PREFIX_KEY",198],".",["T_VARIABLE","$id",198],",",["T_WHITESPACE"," ",198],["T_STRING","self",198],["T_DOUBLE_COLON","::",198],["T_STRING","FIELD_DATA",198],")",";",["T_WHITESPACE","\n        ",198],["T_IF","if",199],["T_WHITESPACE"," ",199],"(",["T_VARIABLE","$data",199],["T_WHITESPACE"," ",199],["T_IS_IDENTICAL","===",199],["T_WHITESPACE"," ",199],["T_STRING","NULL",199],")",["T_WHITESPACE"," ",199],"{",["T_WHITESPACE","\n            ",199],["T_RETURN","return",200],["T_WHITESPACE"," ",200],["T_STRING","FALSE",200],";",["T_WHITESPACE","\n        ",200],"}",["T_WHITESPACE","\n        ",201],["T_RETURN","return",202],["T_WHITESPACE"," ",202],["T_VARIABLE","$this",202],["T_OBJECT_OPERATOR","->",202],["T_STRING","_decodeData",202],"(",["T_VARIABLE","$data",202],")",";",["T_WHITESPACE","\n    ",202],"}",["T_WHITESPACE","\n\n    ",203],["T_DOC_COMMENT","\/**\n     * Test if a cache is available or not (for the given id)\n     *\n     * @param  string $id Cache id\n     * @return bool|int False if record is not available or \"last modified\" timestamp of the available cache record\n     *\/",205],["T_WHITESPACE","\n    ",210],["T_PUBLIC","public",211],["T_WHITESPACE"," ",211],["T_FUNCTION","function",211],["T_WHITESPACE"," ",211],["T_STRING","test",211],"(",["T_VARIABLE","$id",211],")",["T_WHITESPACE","\n    ",211],"{",["T_WHITESPACE","\n        ",212],["T_VARIABLE","$mtime",213],["T_WHITESPACE"," ",213],"=",["T_WHITESPACE"," ",213],["T_VARIABLE","$this",213],["T_OBJECT_OPERATOR","->",213],["T_STRING","_redis",213],["T_OBJECT_OPERATOR","->",213],["T_STRING","hGet",213],"(",["T_STRING","self",213],["T_DOUBLE_COLON","::",213],["T_STRING","PREFIX_KEY",213],".",["T_VARIABLE","$id",213],",",["T_WHITESPACE"," ",213],["T_STRING","self",213],["T_DOUBLE_COLON","::",213],["T_STRING","FIELD_MTIME",213],")",";",["T_WHITESPACE","\n        ",213],["T_RETURN","return",214],["T_WHITESPACE"," ",214],"(",["T_VARIABLE","$mtime",214],["T_WHITESPACE"," ",214],"?",["T_WHITESPACE"," ",214],["T_VARIABLE","$mtime",214],["T_WHITESPACE"," ",214],":",["T_WHITESPACE"," ",214],["T_STRING","FALSE",214],")",";",["T_WHITESPACE","\n    ",214],"}",["T_WHITESPACE","\n\n    ",215],["T_DOC_COMMENT","\/**\n     * Save some string datas into a cache record\n     *\n     * Note : $data is always \"string\" (serialization is done by the\n     * core not by the backend)\n     *\n     * @param  string $data             Datas to cache\n     * @param  string $id               Cache id\n     * @param  array  $tags             Array of strings, the cache record will be tagged by each string entry\n     * @param  bool|int $specificLifetime If != false, set a specific lifetime for this cache record (null => infinite lifetime)\n     * @throws CredisException\n     * @return boolean True if no problem\n     *\/",217],["T_WHITESPACE","\n    ",229],["T_PUBLIC","public",230],["T_WHITESPACE"," ",230],["T_FUNCTION","function",230],["T_WHITESPACE"," ",230],["T_STRING","save",230],"(",["T_VARIABLE","$data",230],",",["T_WHITESPACE"," ",230],["T_VARIABLE","$id",230],",",["T_WHITESPACE"," ",230],["T_VARIABLE","$tags",230],["T_WHITESPACE"," ",230],"=",["T_WHITESPACE"," ",230],["T_ARRAY","array",230],"(",")",",",["T_WHITESPACE"," ",230],["T_VARIABLE","$specificLifetime",230],["T_WHITESPACE"," ",230],"=",["T_WHITESPACE"," ",230],["T_STRING","false",230],")",["T_WHITESPACE","\n    ",230],"{",["T_WHITESPACE","\n        ",231],["T_IF","if",232],"(","!",["T_STRING","is_array",232],"(",["T_VARIABLE","$tags",232],")",")",["T_WHITESPACE","\n            ",232],["T_VARIABLE","$tags",233],["T_WHITESPACE"," ",233],"=",["T_WHITESPACE"," ",233],["T_VARIABLE","$tags",233],["T_WHITESPACE"," ",233],"?",["T_WHITESPACE"," ",233],["T_ARRAY","array",233],"(",["T_VARIABLE","$tags",233],")",["T_WHITESPACE"," ",233],":",["T_WHITESPACE"," ",233],["T_ARRAY","array",233],"(",")",";",["T_WHITESPACE","\n        ",233],["T_ELSE","else",234],["T_WHITESPACE","\n            ",234],["T_VARIABLE","$tags",235],["T_WHITESPACE"," ",235],"=",["T_WHITESPACE"," ",235],["T_STRING","array_flip",235],"(",["T_STRING","array_flip",235],"(",["T_VARIABLE","$tags",235],")",")",";",["T_WHITESPACE","\n\n        ",235],["T_VARIABLE","$lifetime",237],["T_WHITESPACE"," ",237],"=",["T_WHITESPACE"," ",237],["T_VARIABLE","$this",237],["T_OBJECT_OPERATOR","->",237],["T_STRING","getLifetime",237],"(",["T_VARIABLE","$specificLifetime",237],")",";",["T_WHITESPACE","\n\n        ",237],["T_IF","if",239],["T_WHITESPACE"," ",239],"(",["T_VARIABLE","$this",239],["T_OBJECT_OPERATOR","->",239],["T_STRING","_useLua",239],")",["T_WHITESPACE"," ",239],"{",["T_WHITESPACE","\n            ",239],["T_VARIABLE","$sArgs",240],["T_WHITESPACE"," ",240],"=",["T_WHITESPACE"," ",240],["T_ARRAY","array",240],"(",["T_WHITESPACE","\n                ",240],["T_STRING","self",241],["T_DOUBLE_COLON","::",241],["T_STRING","PREFIX_KEY",241],",",["T_WHITESPACE","\n                ",241],["T_STRING","self",242],["T_DOUBLE_COLON","::",242],["T_STRING","FIELD_DATA",242],",",["T_WHITESPACE","\n                ",242],["T_STRING","self",243],["T_DOUBLE_COLON","::",243],["T_STRING","FIELD_TAGS",243],",",["T_WHITESPACE","\n                ",243],["T_STRING","self",244],["T_DOUBLE_COLON","::",244],["T_STRING","FIELD_MTIME",244],",",["T_WHITESPACE","\n                ",244],["T_STRING","self",245],["T_DOUBLE_COLON","::",245],["T_STRING","FIELD_INF",245],",",["T_WHITESPACE","\n                ",245],["T_STRING","self",246],["T_DOUBLE_COLON","::",246],["T_STRING","SET_TAGS",246],",",["T_WHITESPACE","\n                ",246],["T_STRING","self",247],["T_DOUBLE_COLON","::",247],["T_STRING","PREFIX_TAG_IDS",247],",",["T_WHITESPACE","\n                ",247],["T_STRING","self",248],["T_DOUBLE_COLON","::",248],["T_STRING","SET_IDS",248],",",["T_WHITESPACE","\n                ",248],["T_VARIABLE","$id",249],",",["T_WHITESPACE","\n                ",249],["T_VARIABLE","$this",250],["T_OBJECT_OPERATOR","->",250],["T_STRING","_encodeData",250],"(",["T_VARIABLE","$data",250],",",["T_WHITESPACE"," ",250],["T_VARIABLE","$this",250],["T_OBJECT_OPERATOR","->",250],["T_STRING","_compressData",250],")",",",["T_WHITESPACE","\n                ",250],["T_VARIABLE","$this",251],["T_OBJECT_OPERATOR","->",251],["T_STRING","_encodeData",251],"(",["T_STRING","implode",251],"(",["T_CONSTANT_ENCAPSED_STRING","','",251],",",["T_VARIABLE","$tags",251],")",",",["T_WHITESPACE"," ",251],["T_VARIABLE","$this",251],["T_OBJECT_OPERATOR","->",251],["T_STRING","_compressTags",251],")",",",["T_WHITESPACE","\n                ",251],["T_STRING","time",252],"(",")",",",["T_WHITESPACE","\n                ",252],["T_VARIABLE","$lifetime",253],["T_WHITESPACE"," ",253],"?",["T_WHITESPACE"," ",253],["T_LNUMBER","0",253],["T_WHITESPACE"," ",253],":",["T_WHITESPACE"," ",253],["T_LNUMBER","1",253],",",["T_WHITESPACE","\n                ",253],["T_STRING","min",254],"(",["T_VARIABLE","$lifetime",254],",",["T_WHITESPACE"," ",254],["T_STRING","self",254],["T_DOUBLE_COLON","::",254],["T_STRING","MAX_LIFETIME",254],")",",",["T_WHITESPACE","\n                ",254],["T_VARIABLE","$this",255],["T_OBJECT_OPERATOR","->",255],["T_STRING","_notMatchingTags",255],["T_WHITESPACE"," ",255],"?",["T_WHITESPACE"," ",255],["T_LNUMBER","1",255],["T_WHITESPACE"," ",255],":",["T_WHITESPACE"," ",255],["T_LNUMBER","0",255],["T_WHITESPACE","\n            ",255],")",";",["T_WHITESPACE","\n\n            ",256],["T_VARIABLE","$res",258],["T_WHITESPACE"," ",258],"=",["T_WHITESPACE"," ",258],["T_VARIABLE","$this",258],["T_OBJECT_OPERATOR","->",258],["T_STRING","_redis",258],["T_OBJECT_OPERATOR","->",258],["T_STRING","evalSha",258],"(",["T_STRING","self",258],["T_DOUBLE_COLON","::",258],["T_STRING","LUA_SAVE_SH1",258],",",["T_WHITESPACE"," ",258],["T_VARIABLE","$tags",258],",",["T_WHITESPACE"," ",258],["T_VARIABLE","$sArgs",258],")",";",["T_WHITESPACE","\n            ",258],["T_IF","if",259],["T_WHITESPACE"," ",259],"(",["T_STRING","is_null",259],"(",["T_VARIABLE","$res",259],")",")",["T_WHITESPACE"," ",259],"{",["T_WHITESPACE","\n                ",259],["T_VARIABLE","$script",260],["T_WHITESPACE"," ",260],"=",["T_WHITESPACE","\n                    ",260],["T_CONSTANT_ENCAPSED_STRING","\"local oldTags = redis.call('HGET', ARGV[1]..ARGV[9], ARGV[3]) \"",261],".",["T_WHITESPACE","\n                    ",261],["T_CONSTANT_ENCAPSED_STRING","\"redis.call('HMSET', ARGV[1]..ARGV[9], ARGV[2], ARGV[10], ARGV[3], ARGV[11], ARGV[4], ARGV[12], ARGV[5], ARGV[13]) \"",262],".",["T_WHITESPACE","\n                    ",262],["T_CONSTANT_ENCAPSED_STRING","\"if (ARGV[13] == '0') then \"",263],".",["T_WHITESPACE","\n                        ",263],["T_CONSTANT_ENCAPSED_STRING","\"redis.call('EXPIRE', ARGV[1]..ARGV[9], ARGV[14]) \"",264],".",["T_WHITESPACE","\n                    ",264],["T_CONSTANT_ENCAPSED_STRING","\"end \"",265],".",["T_WHITESPACE","\n                    ",265],["T_CONSTANT_ENCAPSED_STRING","\"if next(KEYS) ~= nil then \"",266],".",["T_WHITESPACE","\n                        ",266],["T_CONSTANT_ENCAPSED_STRING","\"redis.call('SADD', ARGV[6], unpack(KEYS)) \"",267],".",["T_WHITESPACE","\n                        ",267],["T_CONSTANT_ENCAPSED_STRING","\"for _, tagname in ipairs(KEYS) do \"",268],".",["T_WHITESPACE","\n                            ",268],["T_CONSTANT_ENCAPSED_STRING","\"redis.call('SADD', ARGV[7]..tagname, ARGV[9]) \"",269],".",["T_WHITESPACE","\n                        ",269],["T_CONSTANT_ENCAPSED_STRING","\"end \"",270],".",["T_WHITESPACE","\n                    ",270],["T_CONSTANT_ENCAPSED_STRING","\"end \"",271],".",["T_WHITESPACE","\n                    ",271],["T_CONSTANT_ENCAPSED_STRING","\"if (ARGV[15] == '1') then \"",272],".",["T_WHITESPACE","\n                        ",272],["T_CONSTANT_ENCAPSED_STRING","\"redis.call('SADD', ARGV[8], ARGV[9]) \"",273],".",["T_WHITESPACE","\n                    ",273],["T_CONSTANT_ENCAPSED_STRING","\"end \"",274],".",["T_WHITESPACE","\n                    ",274],["T_CONSTANT_ENCAPSED_STRING","\"if (oldTags ~= false) then \"",275],".",["T_WHITESPACE","\n                        ",275],["T_CONSTANT_ENCAPSED_STRING","\"return oldTags \"",276],".",["T_WHITESPACE","\n                    ",276],["T_CONSTANT_ENCAPSED_STRING","\"else \"",277],".",["T_WHITESPACE","\n                        ",277],["T_CONSTANT_ENCAPSED_STRING","\"return '' \"",278],".",["T_WHITESPACE","\n                    ",278],["T_CONSTANT_ENCAPSED_STRING","\"end\"",279],";",["T_WHITESPACE","\n                ",279],["T_VARIABLE","$res",280],["T_WHITESPACE"," ",280],"=",["T_WHITESPACE"," ",280],["T_VARIABLE","$this",280],["T_OBJECT_OPERATOR","->",280],["T_STRING","_redis",280],["T_OBJECT_OPERATOR","->",280],["T_STRING","eval",280],"(",["T_VARIABLE","$script",280],",",["T_WHITESPACE"," ",280],["T_VARIABLE","$tags",280],",",["T_WHITESPACE"," ",280],["T_VARIABLE","$sArgs",280],")",";",["T_WHITESPACE","\n            ",280],"}",["T_WHITESPACE","\n\n            ",281],["T_COMMENT","\/\/ Process removed tags if cache entry already existed\n",283],["T_WHITESPACE","            ",284],["T_IF","if",284],["T_WHITESPACE"," ",284],"(",["T_VARIABLE","$res",284],")",["T_WHITESPACE"," ",284],"{",["T_WHITESPACE","\n                ",284],["T_VARIABLE","$oldTags",285],["T_WHITESPACE"," ",285],"=",["T_WHITESPACE"," ",285],["T_STRING","explode",285],"(",["T_CONSTANT_ENCAPSED_STRING","','",285],",",["T_WHITESPACE"," ",285],["T_VARIABLE","$this",285],["T_OBJECT_OPERATOR","->",285],["T_STRING","_decodeData",285],"(",["T_VARIABLE","$res",285],")",")",";",["T_WHITESPACE","\n                ",285],["T_IF","if",286],["T_WHITESPACE"," ",286],"(",["T_VARIABLE","$remTags",286],["T_WHITESPACE"," ",286],"=",["T_WHITESPACE"," ",286],"(",["T_VARIABLE","$oldTags",286],["T_WHITESPACE"," ",286],"?",["T_WHITESPACE"," ",286],["T_STRING","array_diff",286],"(",["T_VARIABLE","$oldTags",286],",",["T_WHITESPACE"," ",286],["T_VARIABLE","$tags",286],")",["T_WHITESPACE"," ",286],":",["T_WHITESPACE"," ",286],["T_STRING","FALSE",286],")",")",["T_WHITESPACE","\n                ",286],"{",["T_WHITESPACE","\n                    ",287],["T_COMMENT","\/\/ Update the id list for each tag\n",288],["T_WHITESPACE","                    ",289],["T_FOREACH","foreach",289],"(",["T_VARIABLE","$remTags",289],["T_WHITESPACE"," ",289],["T_AS","as",289],["T_WHITESPACE"," ",289],["T_VARIABLE","$tag",289],")",["T_WHITESPACE","\n                    ",289],"{",["T_WHITESPACE","\n                        ",290],["T_VARIABLE","$this",291],["T_OBJECT_OPERATOR","->",291],["T_STRING","_redis",291],["T_OBJECT_OPERATOR","->",291],["T_STRING","sRem",291],"(",["T_STRING","self",291],["T_DOUBLE_COLON","::",291],["T_STRING","PREFIX_TAG_IDS",291],["T_WHITESPACE"," ",291],".",["T_WHITESPACE"," ",291],["T_VARIABLE","$tag",291],",",["T_WHITESPACE"," ",291],["T_VARIABLE","$id",291],")",";",["T_WHITESPACE","\n                    ",291],"}",["T_WHITESPACE","\n                ",292],"}",["T_WHITESPACE","\n            ",293],"}",["T_WHITESPACE","\n\n            ",294],["T_RETURN","return",296],["T_WHITESPACE"," ",296],["T_STRING","TRUE",296],";",["T_WHITESPACE","\n        ",296],"}",["T_WHITESPACE","\n\n        ",297],["T_COMMENT","\/\/ Get list of tags previously assigned\n",299],["T_WHITESPACE","        ",300],["T_VARIABLE","$oldTags",300],["T_WHITESPACE"," ",300],"=",["T_WHITESPACE"," ",300],["T_VARIABLE","$this",300],["T_OBJECT_OPERATOR","->",300],["T_STRING","_decodeData",300],"(",["T_VARIABLE","$this",300],["T_OBJECT_OPERATOR","->",300],["T_STRING","_redis",300],["T_OBJECT_OPERATOR","->",300],["T_STRING","hGet",300],"(",["T_STRING","self",300],["T_DOUBLE_COLON","::",300],["T_STRING","PREFIX_KEY",300],".",["T_VARIABLE","$id",300],",",["T_WHITESPACE"," ",300],["T_STRING","self",300],["T_DOUBLE_COLON","::",300],["T_STRING","FIELD_TAGS",300],")",")",";",["T_WHITESPACE","\n        ",300],["T_VARIABLE","$oldTags",301],["T_WHITESPACE"," ",301],"=",["T_WHITESPACE"," ",301],["T_VARIABLE","$oldTags",301],["T_WHITESPACE"," ",301],"?",["T_WHITESPACE"," ",301],["T_STRING","explode",301],"(",["T_CONSTANT_ENCAPSED_STRING","','",301],",",["T_WHITESPACE"," ",301],["T_VARIABLE","$oldTags",301],")",["T_WHITESPACE"," ",301],":",["T_WHITESPACE"," ",301],["T_ARRAY","array",301],"(",")",";",["T_WHITESPACE","\n\n        ",301],["T_VARIABLE","$this",303],["T_OBJECT_OPERATOR","->",303],["T_STRING","_redis",303],["T_OBJECT_OPERATOR","->",303],["T_STRING","pipeline",303],"(",")",["T_OBJECT_OPERATOR","->",303],["T_STRING","multi",303],"(",")",";",["T_WHITESPACE","\n\n        ",303],["T_COMMENT","\/\/ Set the data\n",305],["T_WHITESPACE","        ",306],["T_VARIABLE","$result",306],["T_WHITESPACE"," ",306],"=",["T_WHITESPACE"," ",306],["T_VARIABLE","$this",306],["T_OBJECT_OPERATOR","->",306],["T_STRING","_redis",306],["T_OBJECT_OPERATOR","->",306],["T_STRING","hMSet",306],"(",["T_STRING","self",306],["T_DOUBLE_COLON","::",306],["T_STRING","PREFIX_KEY",306],".",["T_VARIABLE","$id",306],",",["T_WHITESPACE"," ",306],["T_ARRAY","array",306],"(",["T_WHITESPACE","\n          ",306],["T_STRING","self",307],["T_DOUBLE_COLON","::",307],["T_STRING","FIELD_DATA",307],["T_WHITESPACE"," ",307],["T_DOUBLE_ARROW","=>",307],["T_WHITESPACE"," ",307],["T_VARIABLE","$this",307],["T_OBJECT_OPERATOR","->",307],["T_STRING","_encodeData",307],"(",["T_VARIABLE","$data",307],",",["T_WHITESPACE"," ",307],["T_VARIABLE","$this",307],["T_OBJECT_OPERATOR","->",307],["T_STRING","_compressData",307],")",",",["T_WHITESPACE","\n          ",307],["T_STRING","self",308],["T_DOUBLE_COLON","::",308],["T_STRING","FIELD_TAGS",308],["T_WHITESPACE"," ",308],["T_DOUBLE_ARROW","=>",308],["T_WHITESPACE"," ",308],["T_VARIABLE","$this",308],["T_OBJECT_OPERATOR","->",308],["T_STRING","_encodeData",308],"(",["T_STRING","implode",308],"(",["T_CONSTANT_ENCAPSED_STRING","','",308],",",["T_VARIABLE","$tags",308],")",",",["T_WHITESPACE"," ",308],["T_VARIABLE","$this",308],["T_OBJECT_OPERATOR","->",308],["T_STRING","_compressTags",308],")",",",["T_WHITESPACE","\n          ",308],["T_STRING","self",309],["T_DOUBLE_COLON","::",309],["T_STRING","FIELD_MTIME",309],["T_WHITESPACE"," ",309],["T_DOUBLE_ARROW","=>",309],["T_WHITESPACE"," ",309],["T_STRING","time",309],"(",")",",",["T_WHITESPACE","\n          ",309],["T_STRING","self",310],["T_DOUBLE_COLON","::",310],["T_STRING","FIELD_INF",310],["T_WHITESPACE"," ",310],["T_DOUBLE_ARROW","=>",310],["T_WHITESPACE"," ",310],["T_VARIABLE","$lifetime",310],["T_WHITESPACE"," ",310],"?",["T_WHITESPACE"," ",310],["T_LNUMBER","0",310],["T_WHITESPACE"," ",310],":",["T_WHITESPACE"," ",310],["T_LNUMBER","1",310],",",["T_WHITESPACE","\n        ",310],")",")",";",["T_WHITESPACE","\n        ",311],["T_IF","if",312],"(",["T_WHITESPACE"," ",312],"!",["T_WHITESPACE"," ",312],["T_VARIABLE","$result",312],")",["T_WHITESPACE"," ",312],"{",["T_WHITESPACE","\n            ",312],["T_THROW","throw",313],["T_WHITESPACE"," ",313],["T_NEW","new",313],["T_WHITESPACE"," ",313],["T_STRING","CredisException",313],"(","\"",["T_ENCAPSED_AND_WHITESPACE","Could not set cache key ",313],["T_VARIABLE","$id",313],"\"",")",";",["T_WHITESPACE","\n        ",313],"}",["T_WHITESPACE","\n\n        ",314],["T_COMMENT","\/\/ Set expiration if specified\n",316],["T_WHITESPACE","        ",317],["T_IF","if",317],["T_WHITESPACE"," ",317],"(",["T_VARIABLE","$lifetime",317],")",["T_WHITESPACE"," ",317],"{",["T_WHITESPACE","\n          ",317],["T_VARIABLE","$this",318],["T_OBJECT_OPERATOR","->",318],["T_STRING","_redis",318],["T_OBJECT_OPERATOR","->",318],["T_STRING","expire",318],"(",["T_STRING","self",318],["T_DOUBLE_COLON","::",318],["T_STRING","PREFIX_KEY",318],".",["T_VARIABLE","$id",318],",",["T_WHITESPACE"," ",318],["T_STRING","min",318],"(",["T_VARIABLE","$lifetime",318],",",["T_WHITESPACE"," ",318],["T_STRING","self",318],["T_DOUBLE_COLON","::",318],["T_STRING","MAX_LIFETIME",318],")",")",";",["T_WHITESPACE","\n        ",318],"}",["T_WHITESPACE","\n\n        ",319],["T_COMMENT","\/\/ Process added tags\n",321],["T_WHITESPACE","        ",322],["T_IF","if",322],["T_WHITESPACE"," ",322],"(",["T_VARIABLE","$tags",322],")",["T_WHITESPACE","\n        ",322],"{",["T_WHITESPACE","\n            ",323],["T_COMMENT","\/\/ Update the list with all the tags\n",324],["T_WHITESPACE","            ",325],["T_VARIABLE","$this",325],["T_OBJECT_OPERATOR","->",325],["T_STRING","_redis",325],["T_OBJECT_OPERATOR","->",325],["T_STRING","sAdd",325],"(",["T_WHITESPACE"," ",325],["T_STRING","self",325],["T_DOUBLE_COLON","::",325],["T_STRING","SET_TAGS",325],",",["T_WHITESPACE"," ",325],["T_VARIABLE","$tags",325],")",";",["T_WHITESPACE","\n\n            ",325],["T_COMMENT","\/\/ Update the id list for each tag\n",327],["T_WHITESPACE","            ",328],["T_FOREACH","foreach",328],"(",["T_VARIABLE","$tags",328],["T_WHITESPACE"," ",328],["T_AS","as",328],["T_WHITESPACE"," ",328],["T_VARIABLE","$tag",328],")",["T_WHITESPACE","\n            ",328],"{",["T_WHITESPACE","\n                ",329],["T_VARIABLE","$this",330],["T_OBJECT_OPERATOR","->",330],["T_STRING","_redis",330],["T_OBJECT_OPERATOR","->",330],["T_STRING","sAdd",330],"(",["T_STRING","self",330],["T_DOUBLE_COLON","::",330],["T_STRING","PREFIX_TAG_IDS",330],["T_WHITESPACE"," ",330],".",["T_WHITESPACE"," ",330],["T_VARIABLE","$tag",330],",",["T_WHITESPACE"," ",330],["T_VARIABLE","$id",330],")",";",["T_WHITESPACE","\n            ",330],"}",["T_WHITESPACE","\n        ",331],"}",["T_WHITESPACE","\n\n        ",332],["T_COMMENT","\/\/ Process removed tags\n",334],["T_WHITESPACE","        ",335],["T_IF","if",335],["T_WHITESPACE"," ",335],"(",["T_VARIABLE","$remTags",335],["T_WHITESPACE"," ",335],"=",["T_WHITESPACE"," ",335],"(",["T_VARIABLE","$oldTags",335],["T_WHITESPACE"," ",335],"?",["T_WHITESPACE"," ",335],["T_STRING","array_diff",335],"(",["T_VARIABLE","$oldTags",335],",",["T_WHITESPACE"," ",335],["T_VARIABLE","$tags",335],")",["T_WHITESPACE"," ",335],":",["T_WHITESPACE"," ",335],["T_STRING","FALSE",335],")",")",["T_WHITESPACE","\n        ",335],"{",["T_WHITESPACE","\n            ",336],["T_COMMENT","\/\/ Update the id list for each tag\n",337],["T_WHITESPACE","            ",338],["T_FOREACH","foreach",338],"(",["T_VARIABLE","$remTags",338],["T_WHITESPACE"," ",338],["T_AS","as",338],["T_WHITESPACE"," ",338],["T_VARIABLE","$tag",338],")",["T_WHITESPACE","\n            ",338],"{",["T_WHITESPACE","\n                ",339],["T_VARIABLE","$this",340],["T_OBJECT_OPERATOR","->",340],["T_STRING","_redis",340],["T_OBJECT_OPERATOR","->",340],["T_STRING","sRem",340],"(",["T_STRING","self",340],["T_DOUBLE_COLON","::",340],["T_STRING","PREFIX_TAG_IDS",340],["T_WHITESPACE"," ",340],".",["T_WHITESPACE"," ",340],["T_VARIABLE","$tag",340],",",["T_WHITESPACE"," ",340],["T_VARIABLE","$id",340],")",";",["T_WHITESPACE","\n            ",340],"}",["T_WHITESPACE","\n        ",341],"}",["T_WHITESPACE","\n\n        ",342],["T_COMMENT","\/\/ Update the list with all the ids\n",344],["T_WHITESPACE","        ",345],["T_IF","if",345],"(",["T_VARIABLE","$this",345],["T_OBJECT_OPERATOR","->",345],["T_STRING","_notMatchingTags",345],")",["T_WHITESPACE"," ",345],"{",["T_WHITESPACE","\n            ",345],["T_VARIABLE","$this",346],["T_OBJECT_OPERATOR","->",346],["T_STRING","_redis",346],["T_OBJECT_OPERATOR","->",346],["T_STRING","sAdd",346],"(",["T_STRING","self",346],["T_DOUBLE_COLON","::",346],["T_STRING","SET_IDS",346],",",["T_WHITESPACE"," ",346],["T_VARIABLE","$id",346],")",";",["T_WHITESPACE","\n        ",346],"}",["T_WHITESPACE","\n\n        ",347],["T_VARIABLE","$this",349],["T_OBJECT_OPERATOR","->",349],["T_STRING","_redis",349],["T_OBJECT_OPERATOR","->",349],["T_STRING","exec",349],"(",")",";",["T_WHITESPACE","\n\n        ",349],["T_RETURN","return",351],["T_WHITESPACE"," ",351],["T_STRING","TRUE",351],";",["T_WHITESPACE","\n    ",351],"}",["T_WHITESPACE","\n\n    ",352],["T_DOC_COMMENT","\/**\n     * Remove a cache record\n     *\n     * @param  string $id Cache id\n     * @return boolean True if no problem\n     *\/",354],["T_WHITESPACE","\n    ",359],["T_PUBLIC","public",360],["T_WHITESPACE"," ",360],["T_FUNCTION","function",360],["T_WHITESPACE"," ",360],["T_STRING","remove",360],"(",["T_VARIABLE","$id",360],")",["T_WHITESPACE","\n    ",360],"{",["T_WHITESPACE","\n        ",361],["T_COMMENT","\/\/ Get list of tags for this id\n",362],["T_WHITESPACE","        ",363],["T_VARIABLE","$tags",363],["T_WHITESPACE"," ",363],"=",["T_WHITESPACE"," ",363],["T_STRING","explode",363],"(",["T_CONSTANT_ENCAPSED_STRING","','",363],",",["T_WHITESPACE"," ",363],["T_VARIABLE","$this",363],["T_OBJECT_OPERATOR","->",363],["T_STRING","_decodeData",363],"(",["T_VARIABLE","$this",363],["T_OBJECT_OPERATOR","->",363],["T_STRING","_redis",363],["T_OBJECT_OPERATOR","->",363],["T_STRING","hGet",363],"(",["T_STRING","self",363],["T_DOUBLE_COLON","::",363],["T_STRING","PREFIX_KEY",363],".",["T_VARIABLE","$id",363],",",["T_WHITESPACE"," ",363],["T_STRING","self",363],["T_DOUBLE_COLON","::",363],["T_STRING","FIELD_TAGS",363],")",")",")",";",["T_WHITESPACE","\n\n        ",363],["T_VARIABLE","$this",365],["T_OBJECT_OPERATOR","->",365],["T_STRING","_redis",365],["T_OBJECT_OPERATOR","->",365],["T_STRING","pipeline",365],"(",")",["T_OBJECT_OPERATOR","->",365],["T_STRING","multi",365],"(",")",";",["T_WHITESPACE","\n\n        ",365],["T_COMMENT","\/\/ Remove data\n",367],["T_WHITESPACE","        ",368],["T_VARIABLE","$this",368],["T_OBJECT_OPERATOR","->",368],["T_STRING","_redis",368],["T_OBJECT_OPERATOR","->",368],["T_STRING","del",368],"(",["T_STRING","self",368],["T_DOUBLE_COLON","::",368],["T_STRING","PREFIX_KEY",368],".",["T_VARIABLE","$id",368],")",";",["T_WHITESPACE","\n\n        ",368],["T_COMMENT","\/\/ Remove id from list of all ids\n",370],["T_WHITESPACE","        ",371],["T_IF","if",371],"(",["T_VARIABLE","$this",371],["T_OBJECT_OPERATOR","->",371],["T_STRING","_notMatchingTags",371],")",["T_WHITESPACE"," ",371],"{",["T_WHITESPACE","\n            ",371],["T_VARIABLE","$this",372],["T_OBJECT_OPERATOR","->",372],["T_STRING","_redis",372],["T_OBJECT_OPERATOR","->",372],["T_STRING","sRem",372],"(",["T_WHITESPACE"," ",372],["T_STRING","self",372],["T_DOUBLE_COLON","::",372],["T_STRING","SET_IDS",372],",",["T_WHITESPACE"," ",372],["T_VARIABLE","$id",372],["T_WHITESPACE"," ",372],")",";",["T_WHITESPACE","\n        ",372],"}",["T_WHITESPACE","\n\n        ",373],["T_COMMENT","\/\/ Update the id list for each tag\n",375],["T_WHITESPACE","        ",376],["T_FOREACH","foreach",376],"(",["T_VARIABLE","$tags",376],["T_WHITESPACE"," ",376],["T_AS","as",376],["T_WHITESPACE"," ",376],["T_VARIABLE","$tag",376],")",["T_WHITESPACE"," ",376],"{",["T_WHITESPACE","\n            ",376],["T_VARIABLE","$this",377],["T_OBJECT_OPERATOR","->",377],["T_STRING","_redis",377],["T_OBJECT_OPERATOR","->",377],["T_STRING","sRem",377],"(",["T_STRING","self",377],["T_DOUBLE_COLON","::",377],["T_STRING","PREFIX_TAG_IDS",377],["T_WHITESPACE"," ",377],".",["T_WHITESPACE"," ",377],["T_VARIABLE","$tag",377],",",["T_WHITESPACE"," ",377],["T_VARIABLE","$id",377],")",";",["T_WHITESPACE","\n        ",377],"}",["T_WHITESPACE","\n\n        ",378],["T_VARIABLE","$result",380],["T_WHITESPACE"," ",380],"=",["T_WHITESPACE"," ",380],["T_VARIABLE","$this",380],["T_OBJECT_OPERATOR","->",380],["T_STRING","_redis",380],["T_OBJECT_OPERATOR","->",380],["T_STRING","exec",380],"(",")",";",["T_WHITESPACE","\n\n        ",380],["T_RETURN","return",382],["T_WHITESPACE"," ",382],["T_BOOL_CAST","(bool)",382],["T_WHITESPACE"," ",382],["T_VARIABLE","$result",382],"[",["T_LNUMBER","0",382],"]",";",["T_WHITESPACE","\n    ",382],"}",["T_WHITESPACE","\n\n    ",383],["T_DOC_COMMENT","\/**\n     * @param array $tags\n     *\/",385],["T_WHITESPACE","\n    ",387],["T_PROTECTED","protected",388],["T_WHITESPACE"," ",388],["T_FUNCTION","function",388],["T_WHITESPACE"," ",388],["T_STRING","_removeByNotMatchingTags",388],"(",["T_VARIABLE","$tags",388],")",["T_WHITESPACE","\n    ",388],"{",["T_WHITESPACE","\n        ",389],["T_VARIABLE","$ids",390],["T_WHITESPACE"," ",390],"=",["T_WHITESPACE"," ",390],["T_VARIABLE","$this",390],["T_OBJECT_OPERATOR","->",390],["T_STRING","getIdsNotMatchingTags",390],"(",["T_VARIABLE","$tags",390],")",";",["T_WHITESPACE","\n        ",390],["T_IF","if",391],"(",["T_VARIABLE","$ids",391],")",["T_WHITESPACE","\n        ",391],"{",["T_WHITESPACE","\n            ",392],["T_VARIABLE","$this",393],["T_OBJECT_OPERATOR","->",393],["T_STRING","_redis",393],["T_OBJECT_OPERATOR","->",393],["T_STRING","pipeline",393],"(",")",["T_OBJECT_OPERATOR","->",393],["T_STRING","multi",393],"(",")",";",["T_WHITESPACE","\n\n            ",393],["T_COMMENT","\/\/ Remove data\n",395],["T_WHITESPACE","            ",396],["T_VARIABLE","$this",396],["T_OBJECT_OPERATOR","->",396],["T_STRING","_redis",396],["T_OBJECT_OPERATOR","->",396],["T_STRING","del",396],"(",["T_WHITESPACE"," ",396],["T_VARIABLE","$this",396],["T_OBJECT_OPERATOR","->",396],["T_STRING","_preprocessIds",396],"(",["T_VARIABLE","$ids",396],")",")",";",["T_WHITESPACE","\n\n            ",396],["T_COMMENT","\/\/ Remove ids from list of all ids\n",398],["T_WHITESPACE","            ",399],["T_IF","if",399],"(",["T_VARIABLE","$this",399],["T_OBJECT_OPERATOR","->",399],["T_STRING","_notMatchingTags",399],")",["T_WHITESPACE"," ",399],"{",["T_WHITESPACE","\n                ",399],["T_VARIABLE","$this",400],["T_OBJECT_OPERATOR","->",400],["T_STRING","_redis",400],["T_OBJECT_OPERATOR","->",400],["T_STRING","sRem",400],"(",["T_WHITESPACE"," ",400],["T_STRING","self",400],["T_DOUBLE_COLON","::",400],["T_STRING","SET_IDS",400],",",["T_WHITESPACE"," ",400],["T_VARIABLE","$ids",400],")",";",["T_WHITESPACE","\n            ",400],"}",["T_WHITESPACE","\n\n            ",401],["T_VARIABLE","$this",403],["T_OBJECT_OPERATOR","->",403],["T_STRING","_redis",403],["T_OBJECT_OPERATOR","->",403],["T_STRING","exec",403],"(",")",";",["T_WHITESPACE","\n        ",403],"}",["T_WHITESPACE","\n    ",404],"}",["T_WHITESPACE","\n\n    ",405],["T_DOC_COMMENT","\/**\n     * @param array $tags\n     *\/",407],["T_WHITESPACE","\n    ",409],["T_PROTECTED","protected",410],["T_WHITESPACE"," ",410],["T_FUNCTION","function",410],["T_WHITESPACE"," ",410],["T_STRING","_removeByMatchingTags",410],"(",["T_VARIABLE","$tags",410],")",["T_WHITESPACE","\n    ",410],"{",["T_WHITESPACE","\n        ",411],["T_VARIABLE","$ids",412],["T_WHITESPACE"," ",412],"=",["T_WHITESPACE"," ",412],["T_VARIABLE","$this",412],["T_OBJECT_OPERATOR","->",412],["T_STRING","getIdsMatchingTags",412],"(",["T_VARIABLE","$tags",412],")",";",["T_WHITESPACE","\n        ",412],["T_IF","if",413],"(",["T_VARIABLE","$ids",413],")",["T_WHITESPACE","\n        ",413],"{",["T_WHITESPACE","\n            ",414],["T_VARIABLE","$this",415],["T_OBJECT_OPERATOR","->",415],["T_STRING","_redis",415],["T_OBJECT_OPERATOR","->",415],["T_STRING","pipeline",415],"(",")",["T_OBJECT_OPERATOR","->",415],["T_STRING","multi",415],"(",")",";",["T_WHITESPACE","\n\n            ",415],["T_COMMENT","\/\/ Remove data\n",417],["T_WHITESPACE","            ",418],["T_VARIABLE","$this",418],["T_OBJECT_OPERATOR","->",418],["T_STRING","_redis",418],["T_OBJECT_OPERATOR","->",418],["T_STRING","del",418],"(",["T_WHITESPACE"," ",418],["T_VARIABLE","$this",418],["T_OBJECT_OPERATOR","->",418],["T_STRING","_preprocessIds",418],"(",["T_VARIABLE","$ids",418],")",")",";",["T_WHITESPACE","\n\n            ",418],["T_COMMENT","\/\/ Remove ids from list of all ids\n",420],["T_WHITESPACE","            ",421],["T_IF","if",421],"(",["T_VARIABLE","$this",421],["T_OBJECT_OPERATOR","->",421],["T_STRING","_notMatchingTags",421],")",["T_WHITESPACE"," ",421],"{",["T_WHITESPACE","\n                ",421],["T_VARIABLE","$this",422],["T_OBJECT_OPERATOR","->",422],["T_STRING","_redis",422],["T_OBJECT_OPERATOR","->",422],["T_STRING","sRem",422],"(",["T_WHITESPACE"," ",422],["T_STRING","self",422],["T_DOUBLE_COLON","::",422],["T_STRING","SET_IDS",422],",",["T_WHITESPACE"," ",422],["T_VARIABLE","$ids",422],")",";",["T_WHITESPACE","\n            ",422],"}",["T_WHITESPACE","\n\n            ",423],["T_VARIABLE","$this",425],["T_OBJECT_OPERATOR","->",425],["T_STRING","_redis",425],["T_OBJECT_OPERATOR","->",425],["T_STRING","exec",425],"(",")",";",["T_WHITESPACE","\n        ",425],"}",["T_WHITESPACE","\n    ",426],"}",["T_WHITESPACE","\n\n    ",427],["T_DOC_COMMENT","\/**\n     * @param array $tags\n     *\/",429],["T_WHITESPACE","\n    ",431],["T_PROTECTED","protected",432],["T_WHITESPACE"," ",432],["T_FUNCTION","function",432],["T_WHITESPACE"," ",432],["T_STRING","_removeByMatchingAnyTags",432],"(",["T_VARIABLE","$tags",432],")",["T_WHITESPACE","\n    ",432],"{",["T_WHITESPACE","\n        ",433],["T_IF","if",434],["T_WHITESPACE"," ",434],"(",["T_VARIABLE","$this",434],["T_OBJECT_OPERATOR","->",434],["T_STRING","_useLua",434],")",["T_WHITESPACE"," ",434],"{",["T_WHITESPACE","\n            ",434],["T_VARIABLE","$pTags",435],["T_WHITESPACE"," ",435],"=",["T_WHITESPACE"," ",435],["T_VARIABLE","$this",435],["T_OBJECT_OPERATOR","->",435],["T_STRING","_preprocessTagIds",435],"(",["T_VARIABLE","$tags",435],")",";",["T_WHITESPACE","\n            ",435],["T_VARIABLE","$sArgs",436],["T_WHITESPACE"," ",436],"=",["T_WHITESPACE"," ",436],["T_ARRAY","array",436],"(",["T_STRING","self",436],["T_DOUBLE_COLON","::",436],["T_STRING","PREFIX_KEY",436],",",["T_WHITESPACE"," ",436],["T_STRING","self",436],["T_DOUBLE_COLON","::",436],["T_STRING","SET_TAGS",436],",",["T_WHITESPACE"," ",436],["T_STRING","self",436],["T_DOUBLE_COLON","::",436],["T_STRING","SET_IDS",436],",",["T_WHITESPACE"," ",436],"(",["T_VARIABLE","$this",436],["T_OBJECT_OPERATOR","->",436],["T_STRING","_notMatchingTags",436],["T_WHITESPACE"," ",436],"?",["T_WHITESPACE"," ",436],["T_LNUMBER","1",436],["T_WHITESPACE"," ",436],":",["T_WHITESPACE"," ",436],["T_LNUMBER","0",436],")",",",["T_WHITESPACE"," ",436],["T_INT_CAST","(int)",436],["T_WHITESPACE"," ",436],["T_VARIABLE","$this",436],["T_OBJECT_OPERATOR","->",436],["T_STRING","_luaMaxCStack",436],")",";",["T_WHITESPACE","\n            ",436],["T_IF","if",437],["T_WHITESPACE"," ",437],"(",["T_WHITESPACE"," ",437],"!",["T_WHITESPACE"," ",437],["T_VARIABLE","$this",437],["T_OBJECT_OPERATOR","->",437],["T_STRING","_redis",437],["T_OBJECT_OPERATOR","->",437],["T_STRING","evalSha",437],"(",["T_STRING","self",437],["T_DOUBLE_COLON","::",437],["T_STRING","LUA_CLEAN_SH1",437],",",["T_WHITESPACE"," ",437],["T_VARIABLE","$pTags",437],",",["T_WHITESPACE"," ",437],["T_VARIABLE","$sArgs",437],")",")",["T_WHITESPACE"," ",437],"{",["T_WHITESPACE","\n                ",437],["T_VARIABLE","$script",438],["T_WHITESPACE"," ",438],"=",["T_WHITESPACE","\n                    ",438],["T_CONSTANT_ENCAPSED_STRING","\"for i = 1, #KEYS, ARGV[5] do \"",439],".",["T_WHITESPACE","\n                        ",439],["T_CONSTANT_ENCAPSED_STRING","\"local keysToDel = redis.call('SUNION', unpack(KEYS, i, math.min(#KEYS, i + ARGV[5] - 1))) \"",440],".",["T_WHITESPACE","\n                        ",440],["T_CONSTANT_ENCAPSED_STRING","\"for _, keyname in ipairs(keysToDel) do \"",441],".",["T_WHITESPACE","\n                            ",441],["T_CONSTANT_ENCAPSED_STRING","\"redis.call('DEL', ARGV[1]..keyname) \"",442],".",["T_WHITESPACE","\n                            ",442],["T_CONSTANT_ENCAPSED_STRING","\"if (ARGV[4] == '1') then \"",443],".",["T_WHITESPACE","\n                                ",443],["T_CONSTANT_ENCAPSED_STRING","\"redis.call('SREM', ARGV[3], keyname) \"",444],".",["T_WHITESPACE","\n                            ",444],["T_CONSTANT_ENCAPSED_STRING","\"end \"",445],".",["T_WHITESPACE","\n                        ",445],["T_CONSTANT_ENCAPSED_STRING","\"end \"",446],".",["T_WHITESPACE","\n                        ",446],["T_CONSTANT_ENCAPSED_STRING","\"redis.call('DEL', unpack(KEYS, i, math.min(#KEYS, i + ARGV[5] - 1))) \"",447],".",["T_WHITESPACE","\n                        ",447],["T_CONSTANT_ENCAPSED_STRING","\"redis.call('SREM', ARGV[2], unpack(KEYS, i, math.min(#KEYS, i + ARGV[5] - 1))) \"",448],".",["T_WHITESPACE","\n                    ",448],["T_CONSTANT_ENCAPSED_STRING","\"end \"",449],".",["T_WHITESPACE","\n                    ",449],["T_CONSTANT_ENCAPSED_STRING","\"return true\"",450],";",["T_WHITESPACE","\n                ",450],["T_VARIABLE","$this",451],["T_OBJECT_OPERATOR","->",451],["T_STRING","_redis",451],["T_OBJECT_OPERATOR","->",451],["T_STRING","eval",451],"(",["T_VARIABLE","$script",451],",",["T_WHITESPACE"," ",451],["T_VARIABLE","$pTags",451],",",["T_WHITESPACE"," ",451],["T_VARIABLE","$sArgs",451],")",";",["T_WHITESPACE","\n            ",451],"}",["T_WHITESPACE","\n            ",452],["T_RETURN","return",453],";",["T_WHITESPACE","\n        ",453],"}",["T_WHITESPACE","\n\n        ",454],["T_VARIABLE","$ids",456],["T_WHITESPACE"," ",456],"=",["T_WHITESPACE"," ",456],["T_VARIABLE","$this",456],["T_OBJECT_OPERATOR","->",456],["T_STRING","getIdsMatchingAnyTags",456],"(",["T_VARIABLE","$tags",456],")",";",["T_WHITESPACE","\n\n        ",456],["T_VARIABLE","$this",458],["T_OBJECT_OPERATOR","->",458],["T_STRING","_redis",458],["T_OBJECT_OPERATOR","->",458],["T_STRING","pipeline",458],"(",")",["T_OBJECT_OPERATOR","->",458],["T_STRING","multi",458],"(",")",";",["T_WHITESPACE","\n\n        ",458],["T_IF","if",460],"(",["T_VARIABLE","$ids",460],")",["T_WHITESPACE","\n        ",460],"{",["T_WHITESPACE","\n            ",461],["T_COMMENT","\/\/ Remove data\n",462],["T_WHITESPACE","            ",463],["T_VARIABLE","$this",463],["T_OBJECT_OPERATOR","->",463],["T_STRING","_redis",463],["T_OBJECT_OPERATOR","->",463],["T_STRING","del",463],"(",["T_WHITESPACE"," ",463],["T_VARIABLE","$this",463],["T_OBJECT_OPERATOR","->",463],["T_STRING","_preprocessIds",463],"(",["T_VARIABLE","$ids",463],")",")",";",["T_WHITESPACE","\n\n            ",463],["T_COMMENT","\/\/ Remove ids from list of all ids\n",465],["T_WHITESPACE","            ",466],["T_IF","if",466],"(",["T_VARIABLE","$this",466],["T_OBJECT_OPERATOR","->",466],["T_STRING","_notMatchingTags",466],")",["T_WHITESPACE"," ",466],"{",["T_WHITESPACE","\n                ",466],["T_VARIABLE","$this",467],["T_OBJECT_OPERATOR","->",467],["T_STRING","_redis",467],["T_OBJECT_OPERATOR","->",467],["T_STRING","sRem",467],"(",["T_WHITESPACE"," ",467],["T_STRING","self",467],["T_DOUBLE_COLON","::",467],["T_STRING","SET_IDS",467],",",["T_WHITESPACE"," ",467],["T_VARIABLE","$ids",467],")",";",["T_WHITESPACE","\n            ",467],"}",["T_WHITESPACE","\n        ",468],"}",["T_WHITESPACE","\n\n        ",469],["T_COMMENT","\/\/ Remove tag id lists\n",471],["T_WHITESPACE","        ",472],["T_VARIABLE","$this",472],["T_OBJECT_OPERATOR","->",472],["T_STRING","_redis",472],["T_OBJECT_OPERATOR","->",472],["T_STRING","del",472],"(",["T_WHITESPACE"," ",472],["T_VARIABLE","$this",472],["T_OBJECT_OPERATOR","->",472],["T_STRING","_preprocessTagIds",472],"(",["T_VARIABLE","$tags",472],")",")",";",["T_WHITESPACE","\n\n        ",472],["T_COMMENT","\/\/ Remove tags from list of tags\n",474],["T_WHITESPACE","        ",475],["T_VARIABLE","$this",475],["T_OBJECT_OPERATOR","->",475],["T_STRING","_redis",475],["T_OBJECT_OPERATOR","->",475],["T_STRING","sRem",475],"(",["T_WHITESPACE"," ",475],["T_STRING","self",475],["T_DOUBLE_COLON","::",475],["T_STRING","SET_TAGS",475],",",["T_WHITESPACE"," ",475],["T_VARIABLE","$tags",475],")",";",["T_WHITESPACE","\n\n        ",475],["T_VARIABLE","$this",477],["T_OBJECT_OPERATOR","->",477],["T_STRING","_redis",477],["T_OBJECT_OPERATOR","->",477],["T_STRING","exec",477],"(",")",";",["T_WHITESPACE","\n    ",477],"}",["T_WHITESPACE","\n\n    ",478],["T_DOC_COMMENT","\/**\n     * Clean up tag id lists since as keys expire the ids remain in the tag id lists\n     *\/",480],["T_WHITESPACE","\n    ",482],["T_PROTECTED","protected",483],["T_WHITESPACE"," ",483],["T_FUNCTION","function",483],["T_WHITESPACE"," ",483],["T_STRING","_collectGarbage",483],"(",")",["T_WHITESPACE","\n    ",483],"{",["T_WHITESPACE","\n        ",484],["T_COMMENT","\/\/ Clean up expired keys from tag id set and global id set\n",485],["T_WHITESPACE","\n        ",486],["T_IF","if",487],["T_WHITESPACE"," ",487],"(",["T_VARIABLE","$this",487],["T_OBJECT_OPERATOR","->",487],["T_STRING","_useLua",487],")",["T_WHITESPACE"," ",487],"{",["T_WHITESPACE","\n            ",487],["T_VARIABLE","$sArgs",488],["T_WHITESPACE"," ",488],"=",["T_WHITESPACE"," ",488],["T_ARRAY","array",488],"(",["T_STRING","self",488],["T_DOUBLE_COLON","::",488],["T_STRING","PREFIX_KEY",488],",",["T_WHITESPACE"," ",488],["T_STRING","self",488],["T_DOUBLE_COLON","::",488],["T_STRING","SET_TAGS",488],",",["T_WHITESPACE"," ",488],["T_STRING","self",488],["T_DOUBLE_COLON","::",488],["T_STRING","SET_IDS",488],",",["T_WHITESPACE"," ",488],["T_STRING","self",488],["T_DOUBLE_COLON","::",488],["T_STRING","PREFIX_TAG_IDS",488],",",["T_WHITESPACE"," ",488],"(",["T_VARIABLE","$this",488],["T_OBJECT_OPERATOR","->",488],["T_STRING","_notMatchingTags",488],["T_WHITESPACE"," ",488],"?",["T_WHITESPACE"," ",488],["T_LNUMBER","1",488],["T_WHITESPACE"," ",488],":",["T_WHITESPACE"," ",488],["T_LNUMBER","0",488],")",")",";",["T_WHITESPACE","\n            ",488],["T_VARIABLE","$allTags",489],["T_WHITESPACE"," ",489],"=",["T_WHITESPACE"," ",489],["T_ARRAY_CAST","(array)",489],["T_WHITESPACE"," ",489],["T_VARIABLE","$this",489],["T_OBJECT_OPERATOR","->",489],["T_STRING","_redis",489],["T_OBJECT_OPERATOR","->",489],["T_STRING","sMembers",489],"(",["T_STRING","self",489],["T_DOUBLE_COLON","::",489],["T_STRING","SET_TAGS",489],")",";",["T_WHITESPACE","\n            ",489],["T_VARIABLE","$tagsCount",490],["T_WHITESPACE"," ",490],"=",["T_WHITESPACE"," ",490],["T_STRING","count",490],"(",["T_VARIABLE","$allTags",490],")",";",["T_WHITESPACE","\n            ",490],["T_VARIABLE","$counter",491],["T_WHITESPACE"," ",491],"=",["T_WHITESPACE"," ",491],["T_LNUMBER","0",491],";",["T_WHITESPACE","\n            ",491],["T_VARIABLE","$tagsBatch",492],["T_WHITESPACE"," ",492],"=",["T_WHITESPACE"," ",492],["T_ARRAY","array",492],"(",")",";",["T_WHITESPACE","\n            ",492],["T_FOREACH","foreach",493],["T_WHITESPACE"," ",493],"(",["T_VARIABLE","$allTags",493],["T_WHITESPACE"," ",493],["T_AS","as",493],["T_WHITESPACE"," ",493],["T_VARIABLE","$tag",493],")",["T_WHITESPACE"," ",493],"{",["T_WHITESPACE","\n                ",493],["T_VARIABLE","$tagsBatch",494],"[","]",["T_WHITESPACE"," ",494],"=",["T_WHITESPACE"," ",494],["T_VARIABLE","$tag",494],";",["T_WHITESPACE","\n                ",494],["T_VARIABLE","$counter",495],["T_INC","++",495],";",["T_WHITESPACE","\n                ",495],["T_IF","if",496],["T_WHITESPACE"," ",496],"(",["T_STRING","count",496],"(",["T_VARIABLE","$tagsBatch",496],")",["T_WHITESPACE"," ",496],["T_IS_EQUAL","==",496],["T_WHITESPACE"," ",496],["T_LNUMBER","10",496],["T_WHITESPACE"," ",496],["T_BOOLEAN_OR","||",496],["T_WHITESPACE"," ",496],["T_VARIABLE","$counter",496],["T_WHITESPACE"," ",496],["T_IS_EQUAL","==",496],["T_WHITESPACE"," ",496],["T_VARIABLE","$tagsCount",496],["T_WHITESPACE"," ",496],")",["T_WHITESPACE"," ",496],"{",["T_WHITESPACE","\n                    ",496],["T_IF","if",497],["T_WHITESPACE"," ",497],"(",["T_WHITESPACE"," ",497],"!",["T_WHITESPACE"," ",497],["T_VARIABLE","$this",497],["T_OBJECT_OPERATOR","->",497],["T_STRING","_redis",497],["T_OBJECT_OPERATOR","->",497],["T_STRING","evalSha",497],"(",["T_STRING","self",497],["T_DOUBLE_COLON","::",497],["T_STRING","LUA_GC_SH1",497],",",["T_WHITESPACE"," ",497],["T_VARIABLE","$tagsBatch",497],",",["T_WHITESPACE"," ",497],["T_VARIABLE","$sArgs",497],")",")",["T_WHITESPACE"," ",497],"{",["T_WHITESPACE","\n                        ",497],["T_VARIABLE","$script",498],["T_WHITESPACE"," ",498],"=",["T_WHITESPACE","\n                            ",498],["T_CONSTANT_ENCAPSED_STRING","\"local tagKeys = {} \"",499],".",["T_WHITESPACE","\n                            ",499],["T_CONSTANT_ENCAPSED_STRING","\"local expired = {} \"",500],".",["T_WHITESPACE","\n                            ",500],["T_CONSTANT_ENCAPSED_STRING","\"local expiredCount = 0 \"",501],".",["T_WHITESPACE","\n                            ",501],["T_CONSTANT_ENCAPSED_STRING","\"local notExpiredCount = 0 \"",502],".",["T_WHITESPACE","\n                            ",502],["T_CONSTANT_ENCAPSED_STRING","\"for _, tagName in ipairs(KEYS) do \"",503],".",["T_WHITESPACE","\n                                ",503],["T_CONSTANT_ENCAPSED_STRING","\"tagKeys = redis.call('SMEMBERS', ARGV[4]..tagName) \"",504],".",["T_WHITESPACE","\n                                ",504],["T_CONSTANT_ENCAPSED_STRING","\"for __, keyName in ipairs(tagKeys) do \"",505],".",["T_WHITESPACE","\n                                    ",505],["T_CONSTANT_ENCAPSED_STRING","\"if (redis.call('EXISTS', ARGV[1]..keyName) == 0) then \"",506],".",["T_WHITESPACE","\n                                        ",506],["T_CONSTANT_ENCAPSED_STRING","\"expiredCount = expiredCount + 1 \"",507],".",["T_WHITESPACE","\n                                        ",507],["T_CONSTANT_ENCAPSED_STRING","\"expired[expiredCount] = keyName \"",508],".",["T_WHITESPACE","\n                                        ",508],["T_COMMENT","\/* Redis Lua scripts have a hard limit of 8000 parameters per command *\/",509],["T_WHITESPACE","\n                                        ",509],["T_CONSTANT_ENCAPSED_STRING","\"if (expiredCount == 7990) then \"",510],".",["T_WHITESPACE","\n                                            ",510],["T_CONSTANT_ENCAPSED_STRING","\"redis.call('SREM', ARGV[4]..tagName, unpack(expired)) \"",511],".",["T_WHITESPACE","\n                                            ",511],["T_CONSTANT_ENCAPSED_STRING","\"if (ARGV[5] == '1') then \"",512],".",["T_WHITESPACE","\n                                                ",512],["T_CONSTANT_ENCAPSED_STRING","\"redis.call('SREM', ARGV[3], unpack(expired)) \"",513],".",["T_WHITESPACE","\n                                            ",513],["T_CONSTANT_ENCAPSED_STRING","\"end \"",514],".",["T_WHITESPACE","\n                                            ",514],["T_CONSTANT_ENCAPSED_STRING","\"expiredCount = 0 \"",515],".",["T_WHITESPACE","\n                                            ",515],["T_CONSTANT_ENCAPSED_STRING","\"expired = {} \"",516],".",["T_WHITESPACE","\n                                        ",516],["T_CONSTANT_ENCAPSED_STRING","\"end \"",517],".",["T_WHITESPACE","\n                                    ",517],["T_CONSTANT_ENCAPSED_STRING","\"else \"",518],".",["T_WHITESPACE","\n                                        ",518],["T_CONSTANT_ENCAPSED_STRING","\"notExpiredCount = notExpiredCount + 1 \"",519],".",["T_WHITESPACE","\n                                    ",519],["T_CONSTANT_ENCAPSED_STRING","\"end \"",520],".",["T_WHITESPACE","\n                                ",520],["T_CONSTANT_ENCAPSED_STRING","\"end \"",521],".",["T_WHITESPACE","\n                                ",521],["T_CONSTANT_ENCAPSED_STRING","\"if (expiredCount > 0) then \"",522],".",["T_WHITESPACE","\n                                    ",522],["T_CONSTANT_ENCAPSED_STRING","\"redis.call('SREM', ARGV[4]..tagName, unpack(expired)) \"",523],".",["T_WHITESPACE","\n                                    ",523],["T_CONSTANT_ENCAPSED_STRING","\"if (ARGV[5] == '1') then \"",524],".",["T_WHITESPACE","\n                                        ",524],["T_CONSTANT_ENCAPSED_STRING","\"redis.call('SREM', ARGV[3], unpack(expired)) \"",525],".",["T_WHITESPACE","\n                                    ",525],["T_CONSTANT_ENCAPSED_STRING","\"end \"",526],".",["T_WHITESPACE","\n                                ",526],["T_CONSTANT_ENCAPSED_STRING","\"end \"",527],".",["T_WHITESPACE","\n                                ",527],["T_CONSTANT_ENCAPSED_STRING","\"if (notExpiredCount == 0) then \"",528],".",["T_WHITESPACE","\n                                    ",528],["T_CONSTANT_ENCAPSED_STRING","\"redis.call ('DEL', ARGV[4]..tagName) \"",529],".",["T_WHITESPACE","\n                                    ",529],["T_CONSTANT_ENCAPSED_STRING","\"redis.call ('SREM', ARGV[2], tagName) \"",530],".",["T_WHITESPACE","\n                                ",530],["T_CONSTANT_ENCAPSED_STRING","\"end \"",531],".",["T_WHITESPACE","\n                                ",531],["T_CONSTANT_ENCAPSED_STRING","\"expired = {} \"",532],".",["T_WHITESPACE","\n                                ",532],["T_CONSTANT_ENCAPSED_STRING","\"expiredCount = 0 \"",533],".",["T_WHITESPACE","\n                                ",533],["T_CONSTANT_ENCAPSED_STRING","\"notExpiredCount = 0 \"",534],".",["T_WHITESPACE","\n                            ",534],["T_CONSTANT_ENCAPSED_STRING","\"end \"",535],".",["T_WHITESPACE","\n                            ",535],["T_CONSTANT_ENCAPSED_STRING","\"return true\"",536],";",["T_WHITESPACE","\n                        ",536],["T_VARIABLE","$this",537],["T_OBJECT_OPERATOR","->",537],["T_STRING","_redis",537],["T_OBJECT_OPERATOR","->",537],["T_STRING","eval",537],"(",["T_VARIABLE","$script",537],",",["T_WHITESPACE"," ",537],["T_VARIABLE","$tagsBatch",537],",",["T_WHITESPACE"," ",537],["T_VARIABLE","$sArgs",537],")",";",["T_WHITESPACE","\n                    ",537],"}",["T_WHITESPACE","\n                    ",538],["T_VARIABLE","$tagsBatch",539],["T_WHITESPACE"," ",539],"=",["T_WHITESPACE"," ",539],["T_ARRAY","array",539],"(",")",";",["T_WHITESPACE","\n                    ",539],["T_COMMENT","\/* Give Redis some time to handle other requests *\/",540],["T_WHITESPACE","\n                    ",540],["T_STRING","usleep",541],"(",["T_LNUMBER","20000",541],")",";",["T_WHITESPACE","\n                ",541],"}",["T_WHITESPACE","\n            ",542],"}",["T_WHITESPACE","\n            ",543],["T_RETURN","return",544],";",["T_WHITESPACE","\n        ",544],"}",["T_WHITESPACE","\n\n        ",545],["T_VARIABLE","$exists",547],["T_WHITESPACE"," ",547],"=",["T_WHITESPACE"," ",547],["T_ARRAY","array",547],"(",")",";",["T_WHITESPACE","\n        ",547],["T_VARIABLE","$tags",548],["T_WHITESPACE"," ",548],"=",["T_WHITESPACE"," ",548],["T_ARRAY_CAST","(array)",548],["T_WHITESPACE"," ",548],["T_VARIABLE","$this",548],["T_OBJECT_OPERATOR","->",548],["T_STRING","_redis",548],["T_OBJECT_OPERATOR","->",548],["T_STRING","sMembers",548],"(",["T_STRING","self",548],["T_DOUBLE_COLON","::",548],["T_STRING","SET_TAGS",548],")",";",["T_WHITESPACE","\n        ",548],["T_FOREACH","foreach",549],"(",["T_VARIABLE","$tags",549],["T_WHITESPACE"," ",549],["T_AS","as",549],["T_WHITESPACE"," ",549],["T_VARIABLE","$tag",549],")",["T_WHITESPACE","\n        ",549],"{",["T_WHITESPACE","\n            ",550],["T_COMMENT","\/\/ Get list of expired ids for each tag\n",551],["T_WHITESPACE","            ",552],["T_VARIABLE","$tagMembers",552],["T_WHITESPACE"," ",552],"=",["T_WHITESPACE"," ",552],["T_VARIABLE","$this",552],["T_OBJECT_OPERATOR","->",552],["T_STRING","_redis",552],["T_OBJECT_OPERATOR","->",552],["T_STRING","sMembers",552],"(",["T_STRING","self",552],["T_DOUBLE_COLON","::",552],["T_STRING","PREFIX_TAG_IDS",552],["T_WHITESPACE"," ",552],".",["T_WHITESPACE"," ",552],["T_VARIABLE","$tag",552],")",";",["T_WHITESPACE","\n            ",552],["T_VARIABLE","$numTagMembers",553],["T_WHITESPACE"," ",553],"=",["T_WHITESPACE"," ",553],["T_STRING","count",553],"(",["T_VARIABLE","$tagMembers",553],")",";",["T_WHITESPACE","\n            ",553],["T_VARIABLE","$expired",554],["T_WHITESPACE"," ",554],"=",["T_WHITESPACE"," ",554],["T_ARRAY","array",554],"(",")",";",["T_WHITESPACE","\n            ",554],["T_VARIABLE","$numExpired",555],["T_WHITESPACE"," ",555],"=",["T_WHITESPACE"," ",555],["T_VARIABLE","$numNotExpired",555],["T_WHITESPACE"," ",555],"=",["T_WHITESPACE"," ",555],["T_LNUMBER","0",555],";",["T_WHITESPACE","\n            ",555],["T_IF","if",556],"(",["T_VARIABLE","$numTagMembers",556],")",["T_WHITESPACE"," ",556],"{",["T_WHITESPACE","\n                ",556],["T_WHILE","while",557],["T_WHITESPACE"," ",557],"(",["T_VARIABLE","$id",557],["T_WHITESPACE"," ",557],"=",["T_WHITESPACE"," ",557],["T_STRING","array_pop",557],"(",["T_VARIABLE","$tagMembers",557],")",")",["T_WHITESPACE"," ",557],"{",["T_WHITESPACE","\n                    ",557],["T_IF","if",558],"(",["T_WHITESPACE"," ",558],"!",["T_WHITESPACE"," ",558],["T_ISSET","isset",558],"(",["T_VARIABLE","$exists",558],"[",["T_VARIABLE","$id",558],"]",")",")",["T_WHITESPACE"," ",558],"{",["T_WHITESPACE","\n                        ",558],["T_VARIABLE","$exists",559],"[",["T_VARIABLE","$id",559],"]",["T_WHITESPACE"," ",559],"=",["T_WHITESPACE"," ",559],["T_VARIABLE","$this",559],["T_OBJECT_OPERATOR","->",559],["T_STRING","_redis",559],["T_OBJECT_OPERATOR","->",559],["T_STRING","exists",559],"(",["T_STRING","self",559],["T_DOUBLE_COLON","::",559],["T_STRING","PREFIX_KEY",559],".",["T_VARIABLE","$id",559],")",";",["T_WHITESPACE","\n                    ",559],"}",["T_WHITESPACE","\n                    ",560],["T_IF","if",561],["T_WHITESPACE"," ",561],"(",["T_VARIABLE","$exists",561],"[",["T_VARIABLE","$id",561],"]",")",["T_WHITESPACE"," ",561],"{",["T_WHITESPACE","\n                        ",561],["T_VARIABLE","$numNotExpired",562],["T_INC","++",562],";",["T_WHITESPACE","\n                    ",562],"}",["T_WHITESPACE","\n                    ",563],["T_ELSE","else",564],["T_WHITESPACE"," ",564],"{",["T_WHITESPACE","\n                        ",564],["T_VARIABLE","$numExpired",565],["T_INC","++",565],";",["T_WHITESPACE","\n                        ",565],["T_VARIABLE","$expired",566],"[","]",["T_WHITESPACE"," ",566],"=",["T_WHITESPACE"," ",566],["T_VARIABLE","$id",566],";",["T_WHITESPACE","\n\n                        ",566],["T_COMMENT","\/\/ Remove incrementally to reduce memory usage\n",568],["T_WHITESPACE","                        ",569],["T_IF","if",569],["T_WHITESPACE"," ",569],"(",["T_STRING","count",569],"(",["T_VARIABLE","$expired",569],")",["T_WHITESPACE"," ",569],"%",["T_WHITESPACE"," ",569],["T_LNUMBER","100",569],["T_WHITESPACE"," ",569],["T_IS_EQUAL","==",569],["T_WHITESPACE"," ",569],["T_LNUMBER","0",569],["T_WHITESPACE"," ",569],["T_BOOLEAN_AND","&&",569],["T_WHITESPACE"," ",569],["T_VARIABLE","$numNotExpired",569],["T_WHITESPACE"," ",569],">",["T_WHITESPACE"," ",569],["T_LNUMBER","0",569],")",["T_WHITESPACE"," ",569],"{",["T_WHITESPACE","\n                            ",569],["T_VARIABLE","$this",570],["T_OBJECT_OPERATOR","->",570],["T_STRING","_redis",570],["T_OBJECT_OPERATOR","->",570],["T_STRING","sRem",570],"(",["T_WHITESPACE"," ",570],["T_STRING","self",570],["T_DOUBLE_COLON","::",570],["T_STRING","PREFIX_TAG_IDS",570],["T_WHITESPACE"," ",570],".",["T_WHITESPACE"," ",570],["T_VARIABLE","$tag",570],",",["T_WHITESPACE"," ",570],["T_VARIABLE","$expired",570],")",";",["T_WHITESPACE","\n                            ",570],["T_IF","if",571],"(",["T_VARIABLE","$this",571],["T_OBJECT_OPERATOR","->",571],["T_STRING","_notMatchingTags",571],")",["T_WHITESPACE"," ",571],"{",["T_WHITESPACE"," ",571],["T_COMMENT","\/\/ Clean up expired ids from ids set\n",571],["T_WHITESPACE","                                ",572],["T_VARIABLE","$this",572],["T_OBJECT_OPERATOR","->",572],["T_STRING","_redis",572],["T_OBJECT_OPERATOR","->",572],["T_STRING","sRem",572],"(",["T_WHITESPACE"," ",572],["T_STRING","self",572],["T_DOUBLE_COLON","::",572],["T_STRING","SET_IDS",572],",",["T_WHITESPACE"," ",572],["T_VARIABLE","$expired",572],")",";",["T_WHITESPACE","\n                            ",572],"}",["T_WHITESPACE","\n                            ",573],["T_VARIABLE","$expired",574],["T_WHITESPACE"," ",574],"=",["T_WHITESPACE"," ",574],["T_ARRAY","array",574],"(",")",";",["T_WHITESPACE","\n                        ",574],"}",["T_WHITESPACE","\n                    ",575],"}",["T_WHITESPACE","\n                ",576],"}",["T_WHITESPACE","\n                ",577],["T_IF","if",578],"(",["T_WHITESPACE"," ",578],"!",["T_WHITESPACE"," ",578],["T_STRING","count",578],"(",["T_VARIABLE","$expired",578],")",")",["T_WHITESPACE"," ",578],["T_CONTINUE","continue",578],";",["T_WHITESPACE","\n            ",578],"}",["T_WHITESPACE","\n\n            ",579],["T_COMMENT","\/\/ Remove empty tags or completely expired tags\n",581],["T_WHITESPACE","            ",582],["T_IF","if",582],["T_WHITESPACE"," ",582],"(",["T_VARIABLE","$numExpired",582],["T_WHITESPACE"," ",582],["T_IS_EQUAL","==",582],["T_WHITESPACE"," ",582],["T_VARIABLE","$numTagMembers",582],")",["T_WHITESPACE"," ",582],"{",["T_WHITESPACE","\n                ",582],["T_VARIABLE","$this",583],["T_OBJECT_OPERATOR","->",583],["T_STRING","_redis",583],["T_OBJECT_OPERATOR","->",583],["T_STRING","del",583],"(",["T_STRING","self",583],["T_DOUBLE_COLON","::",583],["T_STRING","PREFIX_TAG_IDS",583],["T_WHITESPACE"," ",583],".",["T_WHITESPACE"," ",583],["T_VARIABLE","$tag",583],")",";",["T_WHITESPACE","\n                ",583],["T_VARIABLE","$this",584],["T_OBJECT_OPERATOR","->",584],["T_STRING","_redis",584],["T_OBJECT_OPERATOR","->",584],["T_STRING","sRem",584],"(",["T_STRING","self",584],["T_DOUBLE_COLON","::",584],["T_STRING","SET_TAGS",584],",",["T_WHITESPACE"," ",584],["T_VARIABLE","$tag",584],")",";",["T_WHITESPACE","\n            ",584],"}",["T_WHITESPACE","\n            ",585],["T_COMMENT","\/\/ Clean up expired ids from tag ids set\n",586],["T_WHITESPACE","            ",587],["T_ELSE","else",587],["T_WHITESPACE"," ",587],["T_IF","if",587],["T_WHITESPACE"," ",587],"(",["T_STRING","count",587],"(",["T_VARIABLE","$expired",587],")",")",["T_WHITESPACE"," ",587],"{",["T_WHITESPACE","\n                ",587],["T_VARIABLE","$this",588],["T_OBJECT_OPERATOR","->",588],["T_STRING","_redis",588],["T_OBJECT_OPERATOR","->",588],["T_STRING","sRem",588],"(",["T_WHITESPACE"," ",588],["T_STRING","self",588],["T_DOUBLE_COLON","::",588],["T_STRING","PREFIX_TAG_IDS",588],["T_WHITESPACE"," ",588],".",["T_WHITESPACE"," ",588],["T_VARIABLE","$tag",588],",",["T_WHITESPACE"," ",588],["T_VARIABLE","$expired",588],")",";",["T_WHITESPACE","\n                ",588],["T_IF","if",589],"(",["T_VARIABLE","$this",589],["T_OBJECT_OPERATOR","->",589],["T_STRING","_notMatchingTags",589],")",["T_WHITESPACE"," ",589],"{",["T_WHITESPACE"," ",589],["T_COMMENT","\/\/ Clean up expired ids from ids set\n",589],["T_WHITESPACE","                    ",590],["T_VARIABLE","$this",590],["T_OBJECT_OPERATOR","->",590],["T_STRING","_redis",590],["T_OBJECT_OPERATOR","->",590],["T_STRING","sRem",590],"(",["T_WHITESPACE"," ",590],["T_STRING","self",590],["T_DOUBLE_COLON","::",590],["T_STRING","SET_IDS",590],",",["T_WHITESPACE"," ",590],["T_VARIABLE","$expired",590],")",";",["T_WHITESPACE","\n                ",590],"}",["T_WHITESPACE","\n            ",591],"}",["T_WHITESPACE","\n            ",592],["T_UNSET","unset",593],"(",["T_VARIABLE","$expired",593],")",";",["T_WHITESPACE","\n        ",593],"}",["T_WHITESPACE","\n\n        ",594],["T_COMMENT","\/\/ Clean up global list of ids for ids with no tag\n",596],["T_WHITESPACE","        ",597],["T_IF","if",597],"(",["T_VARIABLE","$this",597],["T_OBJECT_OPERATOR","->",597],["T_STRING","_notMatchingTags",597],")",["T_WHITESPACE"," ",597],"{",["T_WHITESPACE","\n            ",597],["T_COMMENT","\/\/ TODO\n",598],["T_WHITESPACE","        ",599],"}",["T_WHITESPACE","\n    ",599],"}",["T_WHITESPACE","\n\n    ",600],["T_DOC_COMMENT","\/**\n     * Clean some cache records\n     *\n     * Available modes are :\n     * 'all' (default)  => remove all cache entries ($tags is not used)\n     * 'old'            => runs _collectGarbage()\n     * 'matchingTag'    => supported\n     * 'notMatchingTag' => supported\n     * 'matchingAnyTag' => supported\n     *\n     * @param  string $mode Clean mode\n     * @param  array  $tags Array of tags\n     * @throws Zend_Cache_Exception\n     * @return boolean True if no problem\n     *\/",602],["T_WHITESPACE","\n    ",616],["T_PUBLIC","public",617],["T_WHITESPACE"," ",617],["T_FUNCTION","function",617],["T_WHITESPACE"," ",617],["T_STRING","clean",617],"(",["T_VARIABLE","$mode",617],["T_WHITESPACE"," ",617],"=",["T_WHITESPACE"," ",617],["T_STRING","Zend_Cache",617],["T_DOUBLE_COLON","::",617],["T_STRING","CLEANING_MODE_ALL",617],",",["T_WHITESPACE"," ",617],["T_VARIABLE","$tags",617],["T_WHITESPACE"," ",617],"=",["T_WHITESPACE"," ",617],["T_ARRAY","array",617],"(",")",")",["T_WHITESPACE","\n    ",617],"{",["T_WHITESPACE","\n        ",618],["T_IF","if",619],"(",["T_WHITESPACE"," ",619],["T_VARIABLE","$tags",619],["T_WHITESPACE"," ",619],["T_BOOLEAN_AND","&&",619],["T_WHITESPACE"," ",619],"!",["T_WHITESPACE"," ",619],["T_STRING","is_array",619],"(",["T_VARIABLE","$tags",619],")",")",["T_WHITESPACE"," ",619],"{",["T_WHITESPACE","\n            ",619],["T_VARIABLE","$tags",620],["T_WHITESPACE"," ",620],"=",["T_WHITESPACE"," ",620],["T_ARRAY","array",620],"(",["T_VARIABLE","$tags",620],")",";",["T_WHITESPACE","\n        ",620],"}",["T_WHITESPACE","\n\n        ",621],["T_TRY","try",623],["T_WHITESPACE"," ",623],"{",["T_WHITESPACE","\n            ",623],["T_IF","if",624],["T_WHITESPACE"," ",624],"(",["T_VARIABLE","$mode",624],["T_WHITESPACE"," ",624],["T_IS_EQUAL","==",624],["T_WHITESPACE"," ",624],["T_STRING","Zend_Cache",624],["T_DOUBLE_COLON","::",624],["T_STRING","CLEANING_MODE_ALL",624],")",["T_WHITESPACE"," ",624],"{",["T_WHITESPACE","\n                ",624],["T_RETURN","return",625],["T_WHITESPACE"," ",625],["T_VARIABLE","$this",625],["T_OBJECT_OPERATOR","->",625],["T_STRING","_redis",625],["T_OBJECT_OPERATOR","->",625],["T_STRING","flushDb",625],"(",")",";",["T_WHITESPACE","\n            ",625],"}",["T_WHITESPACE","\n            ",626],["T_IF","if",627],["T_WHITESPACE"," ",627],"(",["T_VARIABLE","$mode",627],["T_WHITESPACE"," ",627],["T_IS_EQUAL","==",627],["T_WHITESPACE"," ",627],["T_STRING","Zend_Cache",627],["T_DOUBLE_COLON","::",627],["T_STRING","CLEANING_MODE_OLD",627],")",["T_WHITESPACE"," ",627],"{",["T_WHITESPACE","\n                ",627],["T_VARIABLE","$this",628],["T_OBJECT_OPERATOR","->",628],["T_STRING","_collectGarbage",628],"(",")",";",["T_WHITESPACE","\n                ",628],["T_RETURN","return",629],["T_WHITESPACE"," ",629],["T_STRING","TRUE",629],";",["T_WHITESPACE","\n            ",629],"}",["T_WHITESPACE","\n            ",630],["T_IF","if",631],["T_WHITESPACE"," ",631],"(",["T_WHITESPACE"," ",631],"!",["T_WHITESPACE"," ",631],["T_STRING","count",631],"(",["T_VARIABLE","$tags",631],")",")",["T_WHITESPACE"," ",631],"{",["T_WHITESPACE","\n                ",631],["T_RETURN","return",632],["T_WHITESPACE"," ",632],["T_STRING","TRUE",632],";",["T_WHITESPACE","\n            ",632],"}",["T_WHITESPACE","\n            ",633],["T_SWITCH","switch",634],["T_WHITESPACE"," ",634],"(",["T_VARIABLE","$mode",634],")",["T_WHITESPACE","\n            ",634],"{",["T_WHITESPACE","\n                ",635],["T_CASE","case",636],["T_WHITESPACE"," ",636],["T_STRING","Zend_Cache",636],["T_DOUBLE_COLON","::",636],["T_STRING","CLEANING_MODE_MATCHING_TAG",636],":",["T_WHITESPACE","\n\n                    ",636],["T_VARIABLE","$this",638],["T_OBJECT_OPERATOR","->",638],["T_STRING","_removeByMatchingTags",638],"(",["T_VARIABLE","$tags",638],")",";",["T_WHITESPACE","\n                    ",638],["T_BREAK","break",639],";",["T_WHITESPACE","\n\n                ",639],["T_CASE","case",641],["T_WHITESPACE"," ",641],["T_STRING","Zend_Cache",641],["T_DOUBLE_COLON","::",641],["T_STRING","CLEANING_MODE_NOT_MATCHING_TAG",641],":",["T_WHITESPACE","\n\n                    ",641],["T_VARIABLE","$this",643],["T_OBJECT_OPERATOR","->",643],["T_STRING","_removeByNotMatchingTags",643],"(",["T_VARIABLE","$tags",643],")",";",["T_WHITESPACE","\n                    ",643],["T_BREAK","break",644],";",["T_WHITESPACE","\n\n                ",644],["T_CASE","case",646],["T_WHITESPACE"," ",646],["T_STRING","Zend_Cache",646],["T_DOUBLE_COLON","::",646],["T_STRING","CLEANING_MODE_MATCHING_ANY_TAG",646],":",["T_WHITESPACE","\n\n                    ",646],["T_VARIABLE","$this",648],["T_OBJECT_OPERATOR","->",648],["T_STRING","_removeByMatchingAnyTags",648],"(",["T_VARIABLE","$tags",648],")",";",["T_WHITESPACE","\n                    ",648],["T_BREAK","break",649],";",["T_WHITESPACE","\n\n                ",649],["T_DEFAULT","default",651],":",["T_WHITESPACE","\n                    ",651],["T_STRING","Zend_Cache",652],["T_DOUBLE_COLON","::",652],["T_STRING","throwException",652],"(",["T_CONSTANT_ENCAPSED_STRING","'Invalid mode for clean() method: '",652],".",["T_VARIABLE","$mode",652],")",";",["T_WHITESPACE","\n            ",652],"}",["T_WHITESPACE","\n        ",653],"}",["T_WHITESPACE"," ",654],["T_CATCH","catch",654],["T_WHITESPACE"," ",654],"(",["T_STRING","CredisException",654],["T_WHITESPACE"," ",654],["T_VARIABLE","$e",654],")",["T_WHITESPACE"," ",654],"{",["T_WHITESPACE","\n            ",654],["T_STRING","Zend_Cache",655],["T_DOUBLE_COLON","::",655],["T_STRING","throwException",655],"(",["T_CONSTANT_ENCAPSED_STRING","'Error cleaning cache by mode '",655],".",["T_VARIABLE","$mode",655],".",["T_CONSTANT_ENCAPSED_STRING","': '",655],".",["T_VARIABLE","$e",655],["T_OBJECT_OPERATOR","->",655],["T_STRING","getMessage",655],"(",")",",",["T_WHITESPACE"," ",655],["T_VARIABLE","$e",655],")",";",["T_WHITESPACE","\n        ",655],"}",["T_WHITESPACE","\n        ",656],["T_RETURN","return",657],["T_WHITESPACE"," ",657],["T_STRING","TRUE",657],";",["T_WHITESPACE","\n    ",657],"}",["T_WHITESPACE","\n\n    ",658],["T_DOC_COMMENT","\/**\n     * Return true if the automatic cleaning is available for the backend\n     *\n     * @return boolean\n     *\/",660],["T_WHITESPACE","\n    ",664],["T_PUBLIC","public",665],["T_WHITESPACE"," ",665],["T_FUNCTION","function",665],["T_WHITESPACE"," ",665],["T_STRING","isAutomaticCleaningAvailable",665],"(",")",["T_WHITESPACE","\n    ",665],"{",["T_WHITESPACE","\n        ",666],["T_RETURN","return",667],["T_WHITESPACE"," ",667],["T_STRING","TRUE",667],";",["T_WHITESPACE","\n    ",667],"}",["T_WHITESPACE","\n\n    ",668],["T_DOC_COMMENT","\/**\n     * Set the frontend directives\n     *\n     * @param  array $directives Assoc of directives\n     * @throws Zend_Cache_Exception\n     * @return void\n     *\/",670],["T_WHITESPACE","\n    ",676],["T_PUBLIC","public",677],["T_WHITESPACE"," ",677],["T_FUNCTION","function",677],["T_WHITESPACE"," ",677],["T_STRING","setDirectives",677],"(",["T_VARIABLE","$directives",677],")",["T_WHITESPACE","\n    ",677],"{",["T_WHITESPACE","\n        ",678],["T_STRING","parent",679],["T_DOUBLE_COLON","::",679],["T_STRING","setDirectives",679],"(",["T_VARIABLE","$directives",679],")",";",["T_WHITESPACE","\n        ",679],["T_VARIABLE","$lifetime",680],["T_WHITESPACE"," ",680],"=",["T_WHITESPACE"," ",680],["T_VARIABLE","$this",680],["T_OBJECT_OPERATOR","->",680],["T_STRING","getLifetime",680],"(",["T_STRING","false",680],")",";",["T_WHITESPACE","\n        ",680],["T_IF","if",681],["T_WHITESPACE"," ",681],"(",["T_VARIABLE","$lifetime",681],["T_WHITESPACE"," ",681],">",["T_WHITESPACE"," ",681],["T_STRING","self",681],["T_DOUBLE_COLON","::",681],["T_STRING","MAX_LIFETIME",681],")",["T_WHITESPACE"," ",681],"{",["T_WHITESPACE","\n            ",681],["T_STRING","Zend_Cache",682],["T_DOUBLE_COLON","::",682],["T_STRING","throwException",682],"(",["T_CONSTANT_ENCAPSED_STRING","'Redis backend has a limit of 30 days (2592000 seconds) for the lifetime'",682],")",";",["T_WHITESPACE","\n        ",682],"}",["T_WHITESPACE","\n    ",683],"}",["T_WHITESPACE","\n\n    ",684],["T_DOC_COMMENT","\/**\n     * Return an array of stored cache ids\n     *\n     * @return array array of stored cache ids (string)\n     *\/",686],["T_WHITESPACE","\n    ",690],["T_PUBLIC","public",691],["T_WHITESPACE"," ",691],["T_FUNCTION","function",691],["T_WHITESPACE"," ",691],["T_STRING","getIds",691],"(",")",["T_WHITESPACE","\n    ",691],"{",["T_WHITESPACE","\n        ",692],["T_IF","if",693],"(",["T_VARIABLE","$this",693],["T_OBJECT_OPERATOR","->",693],["T_STRING","_notMatchingTags",693],")",["T_WHITESPACE"," ",693],"{",["T_WHITESPACE","\n            ",693],["T_RETURN","return",694],["T_WHITESPACE"," ",694],["T_ARRAY_CAST","(array)",694],["T_WHITESPACE"," ",694],["T_VARIABLE","$this",694],["T_OBJECT_OPERATOR","->",694],["T_STRING","_redis",694],["T_OBJECT_OPERATOR","->",694],["T_STRING","sMembers",694],"(",["T_STRING","self",694],["T_DOUBLE_COLON","::",694],["T_STRING","SET_IDS",694],")",";",["T_WHITESPACE","\n        ",694],"}",["T_WHITESPACE"," ",695],["T_ELSE","else",695],["T_WHITESPACE"," ",695],"{",["T_WHITESPACE","\n            ",695],["T_VARIABLE","$keys",696],["T_WHITESPACE"," ",696],"=",["T_WHITESPACE"," ",696],["T_VARIABLE","$this",696],["T_OBJECT_OPERATOR","->",696],["T_STRING","_redis",696],["T_OBJECT_OPERATOR","->",696],["T_STRING","keys",696],"(",["T_STRING","self",696],["T_DOUBLE_COLON","::",696],["T_STRING","PREFIX_KEY",696],["T_WHITESPACE"," ",696],".",["T_WHITESPACE"," ",696],["T_CONSTANT_ENCAPSED_STRING","'*'",696],")",";",["T_WHITESPACE","\n            ",696],["T_VARIABLE","$prefixLen",697],["T_WHITESPACE"," ",697],"=",["T_WHITESPACE"," ",697],["T_STRING","strlen",697],"(",["T_STRING","self",697],["T_DOUBLE_COLON","::",697],["T_STRING","PREFIX_KEY",697],")",";",["T_WHITESPACE","\n            ",697],["T_FOREACH","foreach",698],"(",["T_VARIABLE","$keys",698],["T_WHITESPACE"," ",698],["T_AS","as",698],["T_WHITESPACE"," ",698],["T_VARIABLE","$index",698],["T_WHITESPACE"," ",698],["T_DOUBLE_ARROW","=>",698],["T_WHITESPACE"," ",698],["T_VARIABLE","$key",698],")",["T_WHITESPACE"," ",698],"{",["T_WHITESPACE","\n                ",698],["T_VARIABLE","$keys",699],"[",["T_VARIABLE","$index",699],"]",["T_WHITESPACE"," ",699],"=",["T_WHITESPACE"," ",699],["T_STRING","substr",699],"(",["T_VARIABLE","$key",699],",",["T_WHITESPACE"," ",699],["T_VARIABLE","$prefixLen",699],")",";",["T_WHITESPACE","\n            ",699],"}",["T_WHITESPACE","\n            ",700],["T_RETURN","return",701],["T_WHITESPACE"," ",701],["T_VARIABLE","$keys",701],";",["T_WHITESPACE","\n        ",701],"}",["T_WHITESPACE","\n    ",702],"}",["T_WHITESPACE","\n\n    ",703],["T_DOC_COMMENT","\/**\n     * Return an array of stored tags\n     *\n     * @return array array of stored tags (string)\n     *\/",705],["T_WHITESPACE","\n    ",709],["T_PUBLIC","public",710],["T_WHITESPACE"," ",710],["T_FUNCTION","function",710],["T_WHITESPACE"," ",710],["T_STRING","getTags",710],"(",")",["T_WHITESPACE","\n    ",710],"{",["T_WHITESPACE","\n        ",711],["T_RETURN","return",712],["T_WHITESPACE"," ",712],["T_ARRAY_CAST","(array)",712],["T_WHITESPACE"," ",712],["T_VARIABLE","$this",712],["T_OBJECT_OPERATOR","->",712],["T_STRING","_redis",712],["T_OBJECT_OPERATOR","->",712],["T_STRING","sMembers",712],"(",["T_STRING","self",712],["T_DOUBLE_COLON","::",712],["T_STRING","SET_TAGS",712],")",";",["T_WHITESPACE","\n    ",712],"}",["T_WHITESPACE","\n\n    ",713],["T_DOC_COMMENT","\/**\n     * Return an array of stored cache ids which match given tags\n     *\n     * In case of multiple tags, a logical AND is made between tags\n     *\n     * @param array $tags array of tags\n     * @return array array of matching cache ids (string)\n     *\/",715],["T_WHITESPACE","\n    ",722],["T_PUBLIC","public",723],["T_WHITESPACE"," ",723],["T_FUNCTION","function",723],["T_WHITESPACE"," ",723],["T_STRING","getIdsMatchingTags",723],"(",["T_VARIABLE","$tags",723],["T_WHITESPACE"," ",723],"=",["T_WHITESPACE"," ",723],["T_ARRAY","array",723],"(",")",")",["T_WHITESPACE","\n    ",723],"{",["T_WHITESPACE","\n        ",724],["T_IF","if",725],["T_WHITESPACE"," ",725],"(",["T_VARIABLE","$tags",725],")",["T_WHITESPACE"," ",725],"{",["T_WHITESPACE","\n            ",725],["T_RETURN","return",726],["T_WHITESPACE"," ",726],["T_ARRAY_CAST","(array)",726],["T_WHITESPACE"," ",726],["T_VARIABLE","$this",726],["T_OBJECT_OPERATOR","->",726],["T_STRING","_redis",726],["T_OBJECT_OPERATOR","->",726],["T_STRING","sInter",726],"(",["T_WHITESPACE"," ",726],["T_VARIABLE","$this",726],["T_OBJECT_OPERATOR","->",726],["T_STRING","_preprocessTagIds",726],"(",["T_VARIABLE","$tags",726],")",["T_WHITESPACE"," ",726],")",";",["T_WHITESPACE","\n        ",726],"}",["T_WHITESPACE","\n        ",727],["T_RETURN","return",728],["T_WHITESPACE"," ",728],["T_ARRAY","array",728],"(",")",";",["T_WHITESPACE","\n    ",728],"}",["T_WHITESPACE","\n\n    ",729],["T_DOC_COMMENT","\/**\n     * Return an array of stored cache ids which don't match given tags\n     *\n     * In case of multiple tags, a negated logical AND is made between tags\n     *\n     * @param array $tags array of tags\n     * @return array array of not matching cache ids (string)\n     *\/",731],["T_WHITESPACE","\n    ",738],["T_PUBLIC","public",739],["T_WHITESPACE"," ",739],["T_FUNCTION","function",739],["T_WHITESPACE"," ",739],["T_STRING","getIdsNotMatchingTags",739],"(",["T_VARIABLE","$tags",739],["T_WHITESPACE"," ",739],"=",["T_WHITESPACE"," ",739],["T_ARRAY","array",739],"(",")",")",["T_WHITESPACE","\n    ",739],"{",["T_WHITESPACE","\n        ",740],["T_IF","if",741],"(",["T_WHITESPACE"," ",741],"!",["T_WHITESPACE"," ",741],["T_VARIABLE","$this",741],["T_OBJECT_OPERATOR","->",741],["T_STRING","_notMatchingTags",741],")",["T_WHITESPACE"," ",741],"{",["T_WHITESPACE","\n            ",741],["T_STRING","Zend_Cache",742],["T_DOUBLE_COLON","::",742],["T_STRING","throwException",742],"(",["T_CONSTANT_ENCAPSED_STRING","\"notMatchingTags is currently disabled.\"",742],")",";",["T_WHITESPACE","\n        ",742],"}",["T_WHITESPACE","\n        ",743],["T_IF","if",744],["T_WHITESPACE"," ",744],"(",["T_VARIABLE","$tags",744],")",["T_WHITESPACE"," ",744],"{",["T_WHITESPACE","\n            ",744],["T_RETURN","return",745],["T_WHITESPACE"," ",745],["T_ARRAY_CAST","(array)",745],["T_WHITESPACE"," ",745],["T_VARIABLE","$this",745],["T_OBJECT_OPERATOR","->",745],["T_STRING","_redis",745],["T_OBJECT_OPERATOR","->",745],["T_STRING","sDiff",745],"(",["T_WHITESPACE"," ",745],["T_STRING","self",745],["T_DOUBLE_COLON","::",745],["T_STRING","SET_IDS",745],",",["T_WHITESPACE"," ",745],["T_VARIABLE","$this",745],["T_OBJECT_OPERATOR","->",745],["T_STRING","_preprocessTagIds",745],"(",["T_VARIABLE","$tags",745],")",["T_WHITESPACE"," ",745],")",";",["T_WHITESPACE","\n        ",745],"}",["T_WHITESPACE","\n        ",746],["T_RETURN","return",747],["T_WHITESPACE"," ",747],["T_ARRAY_CAST","(array)",747],["T_WHITESPACE"," ",747],["T_VARIABLE","$this",747],["T_OBJECT_OPERATOR","->",747],["T_STRING","_redis",747],["T_OBJECT_OPERATOR","->",747],["T_STRING","sMembers",747],"(",["T_WHITESPACE"," ",747],["T_STRING","self",747],["T_DOUBLE_COLON","::",747],["T_STRING","SET_IDS",747],["T_WHITESPACE"," ",747],")",";",["T_WHITESPACE","\n    ",747],"}",["T_WHITESPACE","\n\n    ",748],["T_DOC_COMMENT","\/**\n     * Return an array of stored cache ids which match any given tags\n     *\n     * In case of multiple tags, a logical OR is made between tags\n     *\n     * @param array $tags array of tags\n     * @return array array of any matching cache ids (string)\n     *\/",750],["T_WHITESPACE","\n    ",757],["T_PUBLIC","public",758],["T_WHITESPACE"," ",758],["T_FUNCTION","function",758],["T_WHITESPACE"," ",758],["T_STRING","getIdsMatchingAnyTags",758],"(",["T_VARIABLE","$tags",758],["T_WHITESPACE"," ",758],"=",["T_WHITESPACE"," ",758],["T_ARRAY","array",758],"(",")",")",["T_WHITESPACE","\n    ",758],"{",["T_WHITESPACE","\n        ",759],["T_IF","if",760],["T_WHITESPACE"," ",760],"(",["T_VARIABLE","$tags",760],")",["T_WHITESPACE"," ",760],"{",["T_WHITESPACE","\n            ",760],["T_RETURN","return",761],["T_WHITESPACE"," ",761],["T_ARRAY_CAST","(array)",761],["T_WHITESPACE"," ",761],["T_VARIABLE","$this",761],["T_OBJECT_OPERATOR","->",761],["T_STRING","_redis",761],["T_OBJECT_OPERATOR","->",761],["T_STRING","sUnion",761],"(",["T_WHITESPACE"," ",761],["T_VARIABLE","$this",761],["T_OBJECT_OPERATOR","->",761],["T_STRING","_preprocessTagIds",761],"(",["T_VARIABLE","$tags",761],")",")",";",["T_WHITESPACE","\n        ",761],"}",["T_WHITESPACE","\n        ",762],["T_RETURN","return",763],["T_WHITESPACE"," ",763],["T_ARRAY","array",763],"(",")",";",["T_WHITESPACE","\n    ",763],"}",["T_WHITESPACE","\n\n    ",764],["T_DOC_COMMENT","\/**\n     * Return the filling percentage of the backend storage\n     *\n     * @throws Zend_Cache_Exception\n     * @return int integer between 0 and 100\n     *\/",766],["T_WHITESPACE","\n    ",771],["T_PUBLIC","public",772],["T_WHITESPACE"," ",772],["T_FUNCTION","function",772],["T_WHITESPACE"," ",772],["T_STRING","getFillingPercentage",772],"(",")",["T_WHITESPACE","\n    ",772],"{",["T_WHITESPACE","\n        ",773],["T_VARIABLE","$maxMem",774],["T_WHITESPACE"," ",774],"=",["T_WHITESPACE"," ",774],["T_VARIABLE","$this",774],["T_OBJECT_OPERATOR","->",774],["T_STRING","_redis",774],["T_OBJECT_OPERATOR","->",774],["T_STRING","config",774],"(",["T_CONSTANT_ENCAPSED_STRING","'GET'",774],",",["T_CONSTANT_ENCAPSED_STRING","'maxmemory'",774],")",";",["T_WHITESPACE","\n        ",774],["T_IF","if",775],["T_WHITESPACE"," ",775],"(",["T_LNUMBER","0",775],["T_WHITESPACE"," ",775],["T_IS_EQUAL","==",775],["T_WHITESPACE"," ",775],["T_INT_CAST","(int)",775],["T_WHITESPACE"," ",775],["T_VARIABLE","$maxMem",775],"[",["T_CONSTANT_ENCAPSED_STRING","'maxmemory'",775],"]",")",["T_WHITESPACE"," ",775],"{",["T_WHITESPACE","\n            ",775],["T_RETURN","return",776],["T_WHITESPACE"," ",776],["T_LNUMBER","1",776],";",["T_WHITESPACE","\n        ",776],"}",["T_WHITESPACE","\n        ",777],["T_VARIABLE","$info",778],["T_WHITESPACE"," ",778],"=",["T_WHITESPACE"," ",778],["T_VARIABLE","$this",778],["T_OBJECT_OPERATOR","->",778],["T_STRING","_redis",778],["T_OBJECT_OPERATOR","->",778],["T_STRING","info",778],"(",")",";",["T_WHITESPACE","\n        ",778],["T_RETURN","return",779],["T_WHITESPACE"," ",779],["T_STRING","round",779],"(",["T_WHITESPACE","\n            ",779],"(",["T_VARIABLE","$info",780],"[",["T_CONSTANT_ENCAPSED_STRING","'used_memory'",780],"]","\/",["T_VARIABLE","$maxMem",780],"[",["T_CONSTANT_ENCAPSED_STRING","'maxmemory'",780],"]","*",["T_LNUMBER","100",780],")",["T_WHITESPACE","\n            ",780],",",["T_LNUMBER","0",781],["T_WHITESPACE","\n            ",781],",",["T_STRING","PHP_ROUND_HALF_UP",782],["T_WHITESPACE","\n        ",782],")",";",["T_WHITESPACE","\n    ",783],"}",["T_WHITESPACE","\n\n    ",784],["T_DOC_COMMENT","\/**\n     * Return an array of metadatas for the given cache id\n     *\n     * The array must include these keys :\n     * - expire : the expire timestamp\n     * - tags : a string array of tags\n     * - mtime : timestamp of last modification time\n     *\n     * @param string $id cache id\n     * @return array array of metadatas (false if the cache id is not found)\n     *\/",786],["T_WHITESPACE","\n    ",796],["T_PUBLIC","public",797],["T_WHITESPACE"," ",797],["T_FUNCTION","function",797],["T_WHITESPACE"," ",797],["T_STRING","getMetadatas",797],"(",["T_VARIABLE","$id",797],")",["T_WHITESPACE","\n    ",797],"{",["T_WHITESPACE","\n        ",798],["T_LIST","list",799],"(",["T_VARIABLE","$tags",799],",",["T_WHITESPACE"," ",799],["T_VARIABLE","$mtime",799],",",["T_WHITESPACE"," ",799],["T_VARIABLE","$inf",799],")",["T_WHITESPACE"," ",799],"=",["T_WHITESPACE"," ",799],["T_VARIABLE","$this",799],["T_OBJECT_OPERATOR","->",799],["T_STRING","_redis",799],["T_OBJECT_OPERATOR","->",799],["T_STRING","hMGet",799],"(",["T_STRING","self",799],["T_DOUBLE_COLON","::",799],["T_STRING","PREFIX_KEY",799],".",["T_VARIABLE","$id",799],",",["T_WHITESPACE"," ",799],["T_ARRAY","array",799],"(",["T_STRING","self",799],["T_DOUBLE_COLON","::",799],["T_STRING","FIELD_TAGS",799],",",["T_WHITESPACE"," ",799],["T_STRING","self",799],["T_DOUBLE_COLON","::",799],["T_STRING","FIELD_MTIME",799],",",["T_WHITESPACE"," ",799],["T_STRING","self",799],["T_DOUBLE_COLON","::",799],["T_STRING","FIELD_INF",799],")",")",";",["T_WHITESPACE","\n        ",799],["T_IF","if",800],"(",["T_WHITESPACE"," ",800],"!",["T_WHITESPACE"," ",800],["T_VARIABLE","$mtime",800],")",["T_WHITESPACE"," ",800],"{",["T_WHITESPACE","\n          ",800],["T_RETURN","return",801],["T_WHITESPACE"," ",801],["T_STRING","FALSE",801],";",["T_WHITESPACE","\n        ",801],"}",["T_WHITESPACE","\n        ",802],["T_VARIABLE","$tags",803],["T_WHITESPACE"," ",803],"=",["T_WHITESPACE"," ",803],["T_STRING","explode",803],"(",["T_CONSTANT_ENCAPSED_STRING","','",803],",",["T_WHITESPACE"," ",803],["T_VARIABLE","$this",803],["T_OBJECT_OPERATOR","->",803],["T_STRING","_decodeData",803],"(",["T_VARIABLE","$tags",803],")",")",";",["T_WHITESPACE","\n        ",803],["T_VARIABLE","$expire",804],["T_WHITESPACE"," ",804],"=",["T_WHITESPACE"," ",804],["T_VARIABLE","$inf",804],["T_WHITESPACE"," ",804],["T_IS_IDENTICAL","===",804],["T_WHITESPACE"," ",804],["T_CONSTANT_ENCAPSED_STRING","'1'",804],["T_WHITESPACE"," ",804],"?",["T_WHITESPACE"," ",804],["T_STRING","FALSE",804],["T_WHITESPACE"," ",804],":",["T_WHITESPACE"," ",804],["T_STRING","time",804],"(",")",["T_WHITESPACE"," ",804],"+",["T_WHITESPACE"," ",804],["T_VARIABLE","$this",804],["T_OBJECT_OPERATOR","->",804],["T_STRING","_redis",804],["T_OBJECT_OPERATOR","->",804],["T_STRING","ttl",804],"(",["T_STRING","self",804],["T_DOUBLE_COLON","::",804],["T_STRING","PREFIX_KEY",804],".",["T_VARIABLE","$id",804],")",";",["T_WHITESPACE","\n\n        ",804],["T_RETURN","return",806],["T_WHITESPACE"," ",806],["T_ARRAY","array",806],"(",["T_WHITESPACE","\n            ",806],["T_CONSTANT_ENCAPSED_STRING","'expire'",807],["T_WHITESPACE"," ",807],["T_DOUBLE_ARROW","=>",807],["T_WHITESPACE"," ",807],["T_VARIABLE","$expire",807],",",["T_WHITESPACE","\n            ",807],["T_CONSTANT_ENCAPSED_STRING","'tags'",808],["T_WHITESPACE","   ",808],["T_DOUBLE_ARROW","=>",808],["T_WHITESPACE"," ",808],["T_VARIABLE","$tags",808],",",["T_WHITESPACE","\n            ",808],["T_CONSTANT_ENCAPSED_STRING","'mtime'",809],["T_WHITESPACE","  ",809],["T_DOUBLE_ARROW","=>",809],["T_WHITESPACE"," ",809],["T_VARIABLE","$mtime",809],",",["T_WHITESPACE","\n        ",809],")",";",["T_WHITESPACE","\n    ",810],"}",["T_WHITESPACE","\n\n    ",811],["T_DOC_COMMENT","\/**\n     * Give (if possible) an extra lifetime to the given cache id\n     *\n     * @param string $id cache id\n     * @param int $extraLifetime\n     * @return boolean true if ok\n     *\/",813],["T_WHITESPACE","\n    ",819],["T_PUBLIC","public",820],["T_WHITESPACE"," ",820],["T_FUNCTION","function",820],["T_WHITESPACE"," ",820],["T_STRING","touch",820],"(",["T_VARIABLE","$id",820],",",["T_WHITESPACE"," ",820],["T_VARIABLE","$extraLifetime",820],")",["T_WHITESPACE","\n    ",820],"{",["T_WHITESPACE","\n        ",821],["T_LIST","list",822],"(",["T_VARIABLE","$inf",822],")",["T_WHITESPACE"," ",822],"=",["T_WHITESPACE"," ",822],["T_VARIABLE","$this",822],["T_OBJECT_OPERATOR","->",822],["T_STRING","_redis",822],["T_OBJECT_OPERATOR","->",822],["T_STRING","hGet",822],"(",["T_STRING","self",822],["T_DOUBLE_COLON","::",822],["T_STRING","PREFIX_KEY",822],".",["T_VARIABLE","$id",822],",",["T_WHITESPACE"," ",822],["T_STRING","self",822],["T_DOUBLE_COLON","::",822],["T_STRING","FIELD_INF",822],")",";",["T_WHITESPACE","\n        ",822],["T_IF","if",823],["T_WHITESPACE"," ",823],"(",["T_VARIABLE","$inf",823],["T_WHITESPACE"," ",823],["T_IS_IDENTICAL","===",823],["T_WHITESPACE"," ",823],["T_CONSTANT_ENCAPSED_STRING","'0'",823],")",["T_WHITESPACE"," ",823],"{",["T_WHITESPACE","\n            ",823],["T_VARIABLE","$expireAt",824],["T_WHITESPACE"," ",824],"=",["T_WHITESPACE"," ",824],["T_STRING","time",824],"(",")",["T_WHITESPACE"," ",824],"+",["T_WHITESPACE"," ",824],["T_VARIABLE","$this",824],["T_OBJECT_OPERATOR","->",824],["T_STRING","_redis",824],["T_OBJECT_OPERATOR","->",824],["T_STRING","ttl",824],"(",["T_STRING","self",824],["T_DOUBLE_COLON","::",824],["T_STRING","PREFIX_KEY",824],".",["T_VARIABLE","$id",824],")",["T_WHITESPACE"," ",824],"+",["T_WHITESPACE"," ",824],["T_VARIABLE","$extraLifetime",824],";",["T_WHITESPACE","\n            ",824],["T_RETURN","return",825],["T_WHITESPACE"," ",825],["T_BOOL_CAST","(bool)",825],["T_WHITESPACE"," ",825],["T_VARIABLE","$this",825],["T_OBJECT_OPERATOR","->",825],["T_STRING","_redis",825],["T_OBJECT_OPERATOR","->",825],["T_STRING","expireAt",825],"(",["T_STRING","self",825],["T_DOUBLE_COLON","::",825],["T_STRING","PREFIX_KEY",825],".",["T_VARIABLE","$id",825],",",["T_WHITESPACE"," ",825],["T_VARIABLE","$expireAt",825],")",";",["T_WHITESPACE","\n        ",825],"}",["T_WHITESPACE","\n        ",826],["T_RETURN","return",827],["T_WHITESPACE"," ",827],["T_STRING","false",827],";",["T_WHITESPACE","\n    ",827],"}",["T_WHITESPACE","\n\n    ",828],["T_DOC_COMMENT","\/**\n     * Return an associative array of capabilities (booleans) of the backend\n     *\n     * The array must include these keys :\n     * - automatic_cleaning (is automating cleaning necessary)\n     * - tags (are tags supported)\n     * - expired_read (is it possible to read expired cache records\n     *                 (for doNotTestCacheValidity option for example))\n     * - priority does the backend deal with priority when saving\n     * - infinite_lifetime (is infinite lifetime can work with this backend)\n     * - get_list (is it possible to get the list of cache ids and the complete list of tags)\n     *\n     * @return array associative of with capabilities\n     *\/",830],["T_WHITESPACE","\n    ",843],["T_PUBLIC","public",844],["T_WHITESPACE"," ",844],["T_FUNCTION","function",844],["T_WHITESPACE"," ",844],["T_STRING","getCapabilities",844],"(",")",["T_WHITESPACE","\n    ",844],"{",["T_WHITESPACE","\n        ",845],["T_RETURN","return",846],["T_WHITESPACE"," ",846],["T_ARRAY","array",846],"(",["T_WHITESPACE","\n            ",846],["T_CONSTANT_ENCAPSED_STRING","'automatic_cleaning'",847],["T_WHITESPACE"," ",847],["T_DOUBLE_ARROW","=>",847],["T_WHITESPACE"," ",847],"(",["T_VARIABLE","$this",847],["T_OBJECT_OPERATOR","->",847],["T_STRING","_options",847],"[",["T_CONSTANT_ENCAPSED_STRING","'automatic_cleaning_factor'",847],"]",["T_WHITESPACE"," ",847],">",["T_WHITESPACE"," ",847],["T_LNUMBER","0",847],")",",",["T_WHITESPACE","\n            ",847],["T_CONSTANT_ENCAPSED_STRING","'tags'",848],["T_WHITESPACE","               ",848],["T_DOUBLE_ARROW","=>",848],["T_WHITESPACE"," ",848],["T_STRING","true",848],",",["T_WHITESPACE","\n            ",848],["T_CONSTANT_ENCAPSED_STRING","'expired_read'",849],["T_WHITESPACE","       ",849],["T_DOUBLE_ARROW","=>",849],["T_WHITESPACE"," ",849],["T_STRING","false",849],",",["T_WHITESPACE","\n            ",849],["T_CONSTANT_ENCAPSED_STRING","'priority'",850],["T_WHITESPACE","           ",850],["T_DOUBLE_ARROW","=>",850],["T_WHITESPACE"," ",850],["T_STRING","false",850],",",["T_WHITESPACE","\n            ",850],["T_CONSTANT_ENCAPSED_STRING","'infinite_lifetime'",851],["T_WHITESPACE","  ",851],["T_DOUBLE_ARROW","=>",851],["T_WHITESPACE"," ",851],["T_STRING","true",851],",",["T_WHITESPACE","\n            ",851],["T_CONSTANT_ENCAPSED_STRING","'get_list'",852],["T_WHITESPACE","           ",852],["T_DOUBLE_ARROW","=>",852],["T_WHITESPACE"," ",852],["T_STRING","true",852],",",["T_WHITESPACE","\n        ",852],")",";",["T_WHITESPACE","\n    ",853],"}",["T_WHITESPACE","\n\n    ",854],["T_DOC_COMMENT","\/**\n     * @param string $data\n     * @param int $level\n     * @throws CredisException\n     * @return string\n     *\/",856],["T_WHITESPACE","\n    ",861],["T_PROTECTED","protected",862],["T_WHITESPACE"," ",862],["T_FUNCTION","function",862],["T_WHITESPACE"," ",862],["T_STRING","_encodeData",862],"(",["T_VARIABLE","$data",862],",",["T_WHITESPACE"," ",862],["T_VARIABLE","$level",862],")",["T_WHITESPACE","\n    ",862],"{",["T_WHITESPACE","\n        ",863],["T_IF","if",864],["T_WHITESPACE"," ",864],"(",["T_VARIABLE","$this",864],["T_OBJECT_OPERATOR","->",864],["T_STRING","_compressionLib",864],["T_WHITESPACE"," ",864],["T_BOOLEAN_AND","&&",864],["T_WHITESPACE"," ",864],["T_VARIABLE","$level",864],["T_WHITESPACE"," ",864],["T_BOOLEAN_AND","&&",864],["T_WHITESPACE"," ",864],["T_STRING","strlen",864],"(",["T_VARIABLE","$data",864],")",["T_WHITESPACE"," ",864],["T_IS_GREATER_OR_EQUAL",">=",864],["T_WHITESPACE"," ",864],["T_VARIABLE","$this",864],["T_OBJECT_OPERATOR","->",864],["T_STRING","_compressThreshold",864],")",["T_WHITESPACE"," ",864],"{",["T_WHITESPACE","\n            ",864],["T_SWITCH","switch",865],"(",["T_VARIABLE","$this",865],["T_OBJECT_OPERATOR","->",865],["T_STRING","_compressionLib",865],")",["T_WHITESPACE"," ",865],"{",["T_WHITESPACE","\n                ",865],["T_CASE","case",866],["T_WHITESPACE"," ",866],["T_CONSTANT_ENCAPSED_STRING","'snappy'",866],":",["T_WHITESPACE"," ",866],["T_VARIABLE","$data",866],["T_WHITESPACE"," ",866],"=",["T_WHITESPACE"," ",866],["T_STRING","snappy_compress",866],"(",["T_VARIABLE","$data",866],")",";",["T_WHITESPACE"," ",866],["T_BREAK","break",866],";",["T_WHITESPACE","\n                ",866],["T_CASE","case",867],["T_WHITESPACE"," ",867],["T_CONSTANT_ENCAPSED_STRING","'lzf'",867],":",["T_WHITESPACE","    ",867],["T_VARIABLE","$data",867],["T_WHITESPACE"," ",867],"=",["T_WHITESPACE"," ",867],["T_STRING","lzf_compress",867],"(",["T_VARIABLE","$data",867],")",";",["T_WHITESPACE"," ",867],["T_BREAK","break",867],";",["T_WHITESPACE","\n                ",867],["T_CASE","case",868],["T_WHITESPACE"," ",868],["T_CONSTANT_ENCAPSED_STRING","'l4z'",868],":",["T_WHITESPACE","    ",868],["T_VARIABLE","$data",868],["T_WHITESPACE"," ",868],"=",["T_WHITESPACE"," ",868],["T_STRING","lz4_compress",868],"(",["T_VARIABLE","$data",868],",","(",["T_VARIABLE","$level",868],["T_WHITESPACE"," ",868],">",["T_WHITESPACE"," ",868],["T_LNUMBER","1",868],["T_WHITESPACE"," ",868],"?",["T_WHITESPACE"," ",868],["T_STRING","true",868],["T_WHITESPACE"," ",868],":",["T_WHITESPACE"," ",868],["T_STRING","false",868],")",")",";",["T_WHITESPACE"," ",868],["T_BREAK","break",868],";",["T_WHITESPACE","\n                ",868],["T_CASE","case",869],["T_WHITESPACE"," ",869],["T_CONSTANT_ENCAPSED_STRING","'gzip'",869],":",["T_WHITESPACE","   ",869],["T_VARIABLE","$data",869],["T_WHITESPACE"," ",869],"=",["T_WHITESPACE"," ",869],["T_STRING","gzcompress",869],"(",["T_VARIABLE","$data",869],",",["T_WHITESPACE"," ",869],["T_VARIABLE","$level",869],")",";",["T_WHITESPACE"," ",869],["T_BREAK","break",869],";",["T_WHITESPACE","\n                ",869],["T_DEFAULT","default",870],":",["T_WHITESPACE","       ",870],["T_THROW","throw",870],["T_WHITESPACE"," ",870],["T_NEW","new",870],["T_WHITESPACE"," ",870],["T_STRING","CredisException",870],"(",["T_CONSTANT_ENCAPSED_STRING","\"Unrecognized 'compression_lib'.\"",870],")",";",["T_WHITESPACE","\n            ",870],"}",["T_WHITESPACE","\n            ",871],["T_IF","if",872],"(",["T_WHITESPACE"," ",872],"!",["T_WHITESPACE"," ",872],["T_VARIABLE","$data",872],")",["T_WHITESPACE"," ",872],"{",["T_WHITESPACE","\n                ",872],["T_THROW","throw",873],["T_WHITESPACE"," ",873],["T_NEW","new",873],["T_WHITESPACE"," ",873],["T_STRING","CredisException",873],"(",["T_CONSTANT_ENCAPSED_STRING","\"Could not compress cache data.\"",873],")",";",["T_WHITESPACE","\n            ",873],"}",["T_WHITESPACE","\n            ",874],["T_RETURN","return",875],["T_WHITESPACE"," ",875],["T_VARIABLE","$this",875],["T_OBJECT_OPERATOR","->",875],["T_STRING","_compressPrefix",875],".",["T_VARIABLE","$data",875],";",["T_WHITESPACE","\n        ",875],"}",["T_WHITESPACE","\n        ",876],["T_RETURN","return",877],["T_WHITESPACE"," ",877],["T_VARIABLE","$data",877],";",["T_WHITESPACE","\n    ",877],"}",["T_WHITESPACE","\n\n    ",878],["T_DOC_COMMENT","\/**\n     * @param bool|string $data\n     * @return string\n     *\/",880],["T_WHITESPACE","\n    ",883],["T_PROTECTED","protected",884],["T_WHITESPACE"," ",884],["T_FUNCTION","function",884],["T_WHITESPACE"," ",884],["T_STRING","_decodeData",884],"(",["T_VARIABLE","$data",884],")",["T_WHITESPACE","\n    ",884],"{",["T_WHITESPACE","\n        ",885],["T_IF","if",886],["T_WHITESPACE"," ",886],"(",["T_STRING","substr",886],"(",["T_VARIABLE","$data",886],",",["T_LNUMBER","2",886],",",["T_LNUMBER","3",886],")",["T_WHITESPACE"," ",886],["T_IS_EQUAL","==",886],["T_WHITESPACE"," ",886],["T_STRING","self",886],["T_DOUBLE_COLON","::",886],["T_STRING","COMPRESS_PREFIX",886],")",["T_WHITESPACE"," ",886],"{",["T_WHITESPACE","\n            ",886],["T_SWITCH","switch",887],"(",["T_STRING","substr",887],"(",["T_VARIABLE","$data",887],",",["T_LNUMBER","0",887],",",["T_LNUMBER","2",887],")",")",["T_WHITESPACE"," ",887],"{",["T_WHITESPACE","\n                ",887],["T_CASE","case",888],["T_WHITESPACE"," ",888],["T_CONSTANT_ENCAPSED_STRING","'sn'",888],":",["T_WHITESPACE"," ",888],["T_RETURN","return",888],["T_WHITESPACE"," ",888],["T_STRING","snappy_uncompress",888],"(",["T_STRING","substr",888],"(",["T_VARIABLE","$data",888],",",["T_LNUMBER","5",888],")",")",";",["T_WHITESPACE","\n                ",888],["T_CASE","case",889],["T_WHITESPACE"," ",889],["T_CONSTANT_ENCAPSED_STRING","'lz'",889],":",["T_WHITESPACE"," ",889],["T_RETURN","return",889],["T_WHITESPACE"," ",889],["T_STRING","lzf_decompress",889],"(",["T_STRING","substr",889],"(",["T_VARIABLE","$data",889],",",["T_LNUMBER","5",889],")",")",";",["T_WHITESPACE","\n                ",889],["T_CASE","case",890],["T_WHITESPACE"," ",890],["T_CONSTANT_ENCAPSED_STRING","'l4'",890],":",["T_WHITESPACE"," ",890],["T_RETURN","return",890],["T_WHITESPACE"," ",890],["T_STRING","lz4_uncompress",890],"(",["T_STRING","substr",890],"(",["T_VARIABLE","$data",890],",",["T_LNUMBER","5",890],")",")",";",["T_WHITESPACE","\n                ",890],["T_CASE","case",891],["T_WHITESPACE"," ",891],["T_CONSTANT_ENCAPSED_STRING","'gz'",891],":",["T_WHITESPACE"," ",891],["T_CASE","case",891],["T_WHITESPACE"," ",891],["T_CONSTANT_ENCAPSED_STRING","'zc'",891],":",["T_WHITESPACE"," ",891],["T_RETURN","return",891],["T_WHITESPACE"," ",891],["T_STRING","gzuncompress",891],"(",["T_STRING","substr",891],"(",["T_VARIABLE","$data",891],",",["T_LNUMBER","5",891],")",")",";",["T_WHITESPACE","\n            ",891],"}",["T_WHITESPACE","\n        ",892],"}",["T_WHITESPACE","\n        ",893],["T_RETURN","return",894],["T_WHITESPACE"," ",894],["T_VARIABLE","$data",894],";",["T_WHITESPACE","\n    ",894],"}",["T_WHITESPACE","\n\n    ",895],["T_DOC_COMMENT","\/**\n     * @param $item\n     * @param $index\n     * @param $prefix\n     *\/",897],["T_WHITESPACE","\n    ",901],["T_PROTECTED","protected",902],["T_WHITESPACE"," ",902],["T_FUNCTION","function",902],["T_WHITESPACE"," ",902],["T_STRING","_preprocess",902],"(","&",["T_VARIABLE","$item",902],",",["T_WHITESPACE"," ",902],["T_VARIABLE","$index",902],",",["T_WHITESPACE"," ",902],["T_VARIABLE","$prefix",902],")",["T_WHITESPACE","\n    ",902],"{",["T_WHITESPACE","\n        ",903],["T_VARIABLE","$item",904],["T_WHITESPACE"," ",904],"=",["T_WHITESPACE"," ",904],["T_VARIABLE","$prefix",904],["T_WHITESPACE"," ",904],".",["T_WHITESPACE"," ",904],["T_VARIABLE","$item",904],";",["T_WHITESPACE","\n    ",904],"}",["T_WHITESPACE","\n\n    ",905],["T_DOC_COMMENT","\/**\n     * @param $ids\n     * @return array\n     *\/",907],["T_WHITESPACE","\n    ",910],["T_PROTECTED","protected",911],["T_WHITESPACE"," ",911],["T_FUNCTION","function",911],["T_WHITESPACE"," ",911],["T_STRING","_preprocessIds",911],"(",["T_VARIABLE","$ids",911],")",["T_WHITESPACE","\n    ",911],"{",["T_WHITESPACE","\n        ",912],["T_STRING","array_walk",913],"(",["T_VARIABLE","$ids",913],",",["T_WHITESPACE"," ",913],["T_ARRAY","array",913],"(",["T_VARIABLE","$this",913],",",["T_WHITESPACE"," ",913],["T_CONSTANT_ENCAPSED_STRING","'_preprocess'",913],")",",",["T_WHITESPACE"," ",913],["T_STRING","self",913],["T_DOUBLE_COLON","::",913],["T_STRING","PREFIX_KEY",913],")",";",["T_WHITESPACE","\n        ",913],["T_RETURN","return",914],["T_WHITESPACE"," ",914],["T_VARIABLE","$ids",914],";",["T_WHITESPACE","\n    ",914],"}",["T_WHITESPACE","\n\n    ",915],["T_DOC_COMMENT","\/**\n     * @param $tags\n     * @return array\n     *\/",917],["T_WHITESPACE","\n    ",920],["T_PROTECTED","protected",921],["T_WHITESPACE"," ",921],["T_FUNCTION","function",921],["T_WHITESPACE"," ",921],["T_STRING","_preprocessTagIds",921],"(",["T_VARIABLE","$tags",921],")",["T_WHITESPACE","\n    ",921],"{",["T_WHITESPACE","\n        ",922],["T_STRING","array_walk",923],"(",["T_VARIABLE","$tags",923],",",["T_WHITESPACE"," ",923],["T_ARRAY","array",923],"(",["T_VARIABLE","$this",923],",",["T_WHITESPACE"," ",923],["T_CONSTANT_ENCAPSED_STRING","'_preprocess'",923],")",",",["T_WHITESPACE"," ",923],["T_STRING","self",923],["T_DOUBLE_COLON","::",923],["T_STRING","PREFIX_TAG_IDS",923],")",";",["T_WHITESPACE","\n        ",923],["T_RETURN","return",924],["T_WHITESPACE"," ",924],["T_VARIABLE","$tags",924],";",["T_WHITESPACE","\n    ",924],"}",["T_WHITESPACE","\n\n    ",925],["T_DOC_COMMENT","\/**\n     * Required to pass unit tests\n     *\n     * @param  string $id\n     * @return void\n     *\/",927],["T_WHITESPACE","\n    ",932],["T_PUBLIC","public",933],["T_WHITESPACE"," ",933],["T_FUNCTION","function",933],["T_WHITESPACE"," ",933],["T_STRING","___expire",933],"(",["T_VARIABLE","$id",933],")",["T_WHITESPACE","\n    ",933],"{",["T_WHITESPACE","\n        ",934],["T_VARIABLE","$this",935],["T_OBJECT_OPERATOR","->",935],["T_STRING","_redis",935],["T_OBJECT_OPERATOR","->",935],["T_STRING","del",935],"(",["T_STRING","self",935],["T_DOUBLE_COLON","::",935],["T_STRING","PREFIX_KEY",935],".",["T_VARIABLE","$id",935],")",";",["T_WHITESPACE","\n    ",935],"}",["T_WHITESPACE","\n\n",936],"}",["T_WHITESPACE","\n",938]]
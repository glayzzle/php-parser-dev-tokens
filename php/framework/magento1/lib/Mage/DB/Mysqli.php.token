[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Magento\n *\n * NOTICE OF LICENSE\n *\n * This source file is subject to the Open Software License (OSL 3.0)\n * that is bundled with this package in the file LICENSE.txt.\n * It is also available through the world-wide-web at this URL:\n * http:\/\/opensource.org\/licenses\/osl-3.0.php\n * If you did not receive a copy of the license and are unable to\n * obtain it through the world-wide-web, please send an email\n * to license@magento.com so we can send you a copy immediately.\n *\n * DISCLAIMER\n *\n * Do not edit or add to this file if you wish to upgrade Magento to newer\n * versions in the future. If you wish to customize Magento for your\n * needs please refer to http:\/\/www.magento.com for more information.\n *\n * @category    Mage\n * @package     Mage_DB\n * @copyright  Copyright (c) 2006-2016 X.commerce, Inc. and affiliates (http:\/\/www.magento.com)\n * @license    http:\/\/opensource.org\/licenses\/osl-3.0.php  Open Software License (OSL 3.0)\n *\/",2],["T_WHITESPACE","\n\n",25],["T_DOC_COMMENT","\/**\n * Mysqli database connector\n *\n * @category    Mage\n * @package     Mage_Db\n * @author      Magento Core Team <core@magentocommerce.com>\n *\/",27],["T_WHITESPACE","\n",33],["T_CLASS","class",34],["T_WHITESPACE"," ",34],["T_STRING","Mage_DB_Mysqli",34],["T_WHITESPACE","\n",34],"{",["T_WHITESPACE","\n    ",35],["T_DOC_COMMENT","\/**\n     * Default port\n     * @var int\n     *\/",36],["T_WHITESPACE","\n    ",39],["T_CONST","const",40],["T_WHITESPACE"," ",40],["T_STRING","DEFAULT_PORT",40],["T_WHITESPACE"," ",40],"=",["T_WHITESPACE"," ",40],["T_LNUMBER","3306",40],";",["T_WHITESPACE","\n\n    ",40],["T_DOC_COMMENT","\/**\n     * Table name escaper\n     * @var string\n     *\/",42],["T_WHITESPACE","\n    ",45],["T_CONST","const",46],["T_WHITESPACE"," ",46],["T_STRING","TABLE_ESCAPER",46],["T_WHITESPACE"," ",46],"=",["T_WHITESPACE"," ",46],["T_CONSTANT_ENCAPSED_STRING","'`'",46],";",["T_WHITESPACE","\n\n    ",46],["T_DOC_COMMENT","\/**\n     * Value escaper\n     * @var unknown_type\n     *\/",48],["T_WHITESPACE","\n    ",51],["T_CONST","const",52],["T_WHITESPACE"," ",52],["T_STRING","VALUE_ESCAPER",52],["T_WHITESPACE"," ",52],"=",["T_WHITESPACE"," ",52],["T_CONSTANT_ENCAPSED_STRING","'\"'",52],";",["T_WHITESPACE","\n\n    ",52],["T_DOC_COMMENT","\/**\n     * Connection\n     * @var mysqli\n     *\/",54],["T_WHITESPACE","\n    ",57],["T_PROTECTED","protected",58],["T_WHITESPACE"," ",58],["T_VARIABLE","$conn",58],";",["T_WHITESPACE","\n    ",58],["T_DOC_COMMENT","\/**\n     * Fetch mode\n     * @var unknown_type\n     *\/",59],["T_WHITESPACE","\n    ",62],["T_PRIVATE","private",63],["T_WHITESPACE"," ",63],["T_VARIABLE","$fetch_mode",63],["T_WHITESPACE"," ",63],"=",["T_WHITESPACE"," ",63],["T_STRING","MYSQLI_ASSOC",63],";",["T_WHITESPACE","\n\n\n    ",63],["T_DOC_COMMENT","\/**\n     * Constructor\n     *\/",66],["T_WHITESPACE","\n    ",68],["T_PUBLIC","public",69],["T_WHITESPACE"," ",69],["T_FUNCTION","function",69],["T_WHITESPACE"," ",69],["T_STRING","__construct",69],"(",")",["T_WHITESPACE","\n    ",69],"{",["T_WHITESPACE","\n        ",70],["T_VARIABLE","$this",71],["T_OBJECT_OPERATOR","->",71],["T_STRING","conn",71],["T_WHITESPACE"," ",71],"=",["T_WHITESPACE"," ",71],["T_NEW","new",71],["T_WHITESPACE"," ",71],["T_STRING","mysqli",71],"(",")",";",["T_WHITESPACE","\n    ",71],"}",["T_WHITESPACE","\n\n    ",72],["T_DOC_COMMENT","\/**\n     * Connect\n     * @param string $host\n     * @param string $user\n     * @param string $paswd\n     * @param string $db\n     * @param int $port\n     * @return mixed\n     *\/",74],["T_WHITESPACE","\n    ",82],["T_PUBLIC","public",83],["T_WHITESPACE"," ",83],["T_FUNCTION","function",83],["T_WHITESPACE"," ",83],["T_STRING","connect",83],"(",["T_VARIABLE","$host",83],",",["T_WHITESPACE"," ",83],["T_VARIABLE","$user",83],",",["T_WHITESPACE"," ",83],["T_VARIABLE","$paswd",83],",",["T_WHITESPACE"," ",83],["T_VARIABLE","$db",83],",",["T_WHITESPACE"," ",83],["T_VARIABLE","$port",83],["T_WHITESPACE"," ",83],"=",["T_WHITESPACE"," ",83],["T_STRING","self",83],["T_DOUBLE_COLON","::",83],["T_STRING","DEFAULT_PORT",83],")",["T_WHITESPACE","\n    ",83],"{",["T_WHITESPACE","\n        ",84],["T_VARIABLE","$port",85],["T_WHITESPACE"," ",85],"=",["T_WHITESPACE"," ",85],["T_INT_CAST","(int)",85],["T_WHITESPACE"," ",85],["T_VARIABLE","$port",85],";",["T_WHITESPACE","\n        ",85],["T_VARIABLE","$res",86],["T_WHITESPACE"," ",86],"=",["T_WHITESPACE"," ",86],"@",["T_VARIABLE","$this",86],["T_OBJECT_OPERATOR","->",86],["T_STRING","conn",86],["T_OBJECT_OPERATOR","->",86],["T_STRING","connect",86],"(",["T_VARIABLE","$host",86],",",["T_WHITESPACE"," ",86],["T_VARIABLE","$user",86],",",["T_WHITESPACE"," ",86],["T_VARIABLE","$paswd",86],",",["T_WHITESPACE"," ",86],["T_VARIABLE","$db",86],",",["T_WHITESPACE"," ",86],["T_VARIABLE","$port",86],")",";",["T_WHITESPACE","\n        ",86],["T_IF","if",87],"(",["T_LNUMBER","0",87],["T_WHITESPACE"," ",87],["T_IS_NOT_IDENTICAL","!==",87],["T_WHITESPACE"," ",87],["T_STRING","mysqli_connect_errno",87],"(",["T_VARIABLE","$this",87],["T_OBJECT_OPERATOR","->",87],["T_STRING","conn",87],")",")",["T_WHITESPACE"," ",87],"{",["T_WHITESPACE","\n            ",87],["T_THROW","throw",88],["T_WHITESPACE"," ",88],["T_NEW","new",88],["T_WHITESPACE"," ",88],["T_STRING","Mage_DB_Exception",88],"(",["T_STRING","mysqli_connect_error",88],"(",["T_VARIABLE","$this",88],["T_OBJECT_OPERATOR","->",88],["T_STRING","conn",88],")",")",";",["T_WHITESPACE","\n        ",88],"}",["T_WHITESPACE","\n        ",89],["T_RETURN","return",90],["T_WHITESPACE"," ",90],["T_VARIABLE","$res",90],";",["T_WHITESPACE","\n    ",90],"}",["T_WHITESPACE","\n\n    ",91],["T_DOC_COMMENT","\/**\n     * Select database\n     * @param $db db name\n     * @return mixed\n     *\/",93],["T_WHITESPACE","\n    ",97],["T_PUBLIC","public",98],["T_WHITESPACE"," ",98],["T_FUNCTION","function",98],["T_WHITESPACE"," ",98],["T_STRING","selectDb",98],"(",["T_VARIABLE","$db",98],")",["T_WHITESPACE","\n    ",98],"{",["T_WHITESPACE","\n        ",99],["T_VARIABLE","$res",100],["T_WHITESPACE"," ",100],"=",["T_WHITESPACE"," ",100],["T_STRING","mysqli_select_db",100],"(",["T_VARIABLE","$this",100],["T_OBJECT_OPERATOR","->",100],["T_STRING","conn",100],",",["T_WHITESPACE"," ",100],["T_VARIABLE","$db",100],")",";",["T_WHITESPACE","\n        ",100],["T_RETURN","return",101],["T_WHITESPACE"," ",101],["T_VARIABLE","$res",101],";",["T_WHITESPACE","\n    ",101],"}",["T_WHITESPACE","\n\n    ",102],["T_DOC_COMMENT","\/**\n     * Escape string\n     * @param string $str\n     * @return string\n     *\/",104],["T_WHITESPACE","\n    ",108],["T_PUBLIC","public",109],["T_WHITESPACE"," ",109],["T_FUNCTION","function",109],["T_WHITESPACE"," ",109],["T_STRING","escapeString",109],"(",["T_VARIABLE","$str",109],")",["T_WHITESPACE","\n    ",109],"{",["T_WHITESPACE","\n        ",110],["T_RETURN","return",111],["T_WHITESPACE"," ",111],["T_STRING","mysqli_real_escape_string",111],"(",["T_VARIABLE","$this",111],["T_OBJECT_OPERATOR","->",111],["T_STRING","conn",111],",",["T_WHITESPACE"," ",111],["T_VARIABLE","$str",111],")",";",["T_WHITESPACE","\n    ",111],"}",["T_WHITESPACE","\n\n    ",112],["T_DOC_COMMENT","\/**\n     * Escape table name\n     * @param string $table\n     * @return string\n     *\/",114],["T_WHITESPACE","\n    ",118],["T_PUBLIC","public",119],["T_WHITESPACE"," ",119],["T_FUNCTION","function",119],["T_WHITESPACE"," ",119],["T_STRING","escapeTableName",119],"(",["T_VARIABLE","$table",119],")",["T_WHITESPACE","\n    ",119],"{",["T_WHITESPACE","\n        ",120],["T_RETURN","return",121],["T_WHITESPACE"," ",121],["T_STRING","self",121],["T_DOUBLE_COLON","::",121],["T_STRING","TABLE_ESCAPER",121],".",["T_VARIABLE","$this",121],["T_OBJECT_OPERATOR","->",121],["T_STRING","escapeString",121],"(",["T_VARIABLE","$table",121],")",".",["T_STRING","self",121],["T_DOUBLE_COLON","::",121],["T_STRING","TABLE_ESCAPER",121],";",["T_WHITESPACE","\n    ",121],"}",["T_WHITESPACE","\n\n    ",122],["T_DOC_COMMENT","\/**\n     * Escape field name\n     * @param stirng $fld\n     * @return string\n     *\/",124],["T_WHITESPACE","\n    ",128],["T_PUBLIC","public",129],["T_WHITESPACE"," ",129],["T_FUNCTION","function",129],["T_WHITESPACE"," ",129],["T_STRING","escapeFieldName",129],"(",["T_VARIABLE","$fld",129],")",["T_WHITESPACE","\n    ",129],"{",["T_WHITESPACE","\n        ",130],["T_RETURN","return",131],["T_WHITESPACE"," ",131],["T_STRING","self",131],["T_DOUBLE_COLON","::",131],["T_STRING","TABLE_ESCAPER",131],".",["T_VARIABLE","$this",131],["T_OBJECT_OPERATOR","->",131],["T_STRING","escapeString",131],"(",["T_VARIABLE","$fld",131],")",".",["T_STRING","self",131],["T_DOUBLE_COLON","::",131],["T_STRING","TABLE_ESCAPER",131],";",["T_WHITESPACE","\n    ",131],"}",["T_WHITESPACE","\n\n    ",132],["T_DOC_COMMENT","\/**\n     * Escape field value\n     * @param $data\n     * @return string\n     *\/",134],["T_WHITESPACE","\n    ",138],["T_PUBLIC","public",139],["T_WHITESPACE"," ",139],["T_FUNCTION","function",139],["T_WHITESPACE"," ",139],["T_STRING","escapeFieldValue",139],"(",["T_VARIABLE","$data",139],")",["T_WHITESPACE","\n    ",139],"{",["T_WHITESPACE","\n        ",140],["T_RETURN","return",141],["T_WHITESPACE"," ",141],["T_STRING","self",141],["T_DOUBLE_COLON","::",141],["T_STRING","VALUE_ESCAPER",141],".",["T_VARIABLE","$this",141],["T_OBJECT_OPERATOR","->",141],["T_STRING","escapeString",141],"(",["T_VARIABLE","$data",141],")",".",["T_STRING","self",141],["T_DOUBLE_COLON","::",141],["T_STRING","VALUE_ESCAPER",141],";",["T_WHITESPACE","\n    ",141],"}",["T_WHITESPACE","\n\n    ",142],["T_DOC_COMMENT","\/**\n     * Fetch all rows\n     * @param $sql\n     * @return array\n     *\/",144],["T_WHITESPACE","\n    ",148],["T_PUBLIC","public",149],["T_WHITESPACE"," ",149],["T_FUNCTION","function",149],["T_WHITESPACE"," ",149],["T_STRING","fetchAll",149],"(",["T_VARIABLE","$sql",149],")",["T_WHITESPACE","\n    ",149],"{",["T_WHITESPACE","\n        ",150],["T_VARIABLE","$res",151],["T_WHITESPACE"," ",151],"=",["T_WHITESPACE"," ",151],["T_VARIABLE","$this",151],["T_OBJECT_OPERATOR","->",151],["T_STRING","query",151],"(",["T_VARIABLE","$sql",151],")",";",["T_WHITESPACE","\n        ",151],["T_FOR","for",152],"(",["T_VARIABLE","$out",152],["T_WHITESPACE"," ",152],"=",["T_WHITESPACE"," ",152],["T_ARRAY","array",152],"(",")",";",["T_WHITESPACE"," ",152],["T_VARIABLE","$row",152],["T_WHITESPACE"," ",152],"=",["T_WHITESPACE"," ",152],["T_VARIABLE","$res",152],["T_OBJECT_OPERATOR","->",152],["T_STRING","fetch_array",152],"(",["T_VARIABLE","$this",152],["T_OBJECT_OPERATOR","->",152],["T_STRING","fetch_mode",152],")",";",["T_WHITESPACE"," ",152],["T_VARIABLE","$out",152],"[","]",["T_WHITESPACE"," ",152],"=",["T_WHITESPACE"," ",152],["T_VARIABLE","$row",152],")",";",["T_WHITESPACE","\n        ",152],["T_RETURN","return",153],["T_WHITESPACE"," ",153],["T_VARIABLE","$out",153],";",["T_WHITESPACE","\n    ",153],"}",["T_WHITESPACE","\n\n    ",154],["T_DOC_COMMENT","\/**\n     * Fetch one row\n     * @param $sql\n     * @return array\n     *\/",156],["T_WHITESPACE","\n    ",160],["T_PUBLIC","public",161],["T_WHITESPACE"," ",161],["T_FUNCTION","function",161],["T_WHITESPACE"," ",161],["T_STRING","fetchOne",161],"(",["T_VARIABLE","$sql",161],")",["T_WHITESPACE","\n    ",161],"{",["T_WHITESPACE","\n        ",162],["T_VARIABLE","$res",163],["T_WHITESPACE"," ",163],"=",["T_WHITESPACE"," ",163],["T_VARIABLE","$this",163],["T_OBJECT_OPERATOR","->",163],["T_STRING","query",163],"(",["T_VARIABLE","$sql",163],")",";",["T_WHITESPACE","\n        ",163],["T_RETURN","return",164],["T_WHITESPACE"," ",164],["T_VARIABLE","$res",164],["T_OBJECT_OPERATOR","->",164],["T_STRING","fetch_array",164],"(",["T_VARIABLE","$this",164],["T_OBJECT_OPERATOR","->",164],["T_STRING","fetch_mode",164],")",";",["T_WHITESPACE","\n    ",164],"}",["T_WHITESPACE","\n\n    ",165],["T_DOC_COMMENT","\/**\n     * Fetch rows grouped by key\n     * @param $sql\n     * @param $key\n     * @param $arrayMode force Array mode\n     * @return array\n     *\/",167],["T_WHITESPACE","\n    ",173],["T_PUBLIC","public",174],["T_WHITESPACE"," ",174],["T_FUNCTION","function",174],["T_WHITESPACE"," ",174],["T_STRING","fetchGroupedArrayByKey",174],"(",["T_VARIABLE","$sql",174],",",["T_WHITESPACE"," ",174],["T_VARIABLE","$key",174],",",["T_WHITESPACE"," ",174],["T_VARIABLE","$arrayMode",174],["T_WHITESPACE"," ",174],"=",["T_WHITESPACE"," ",174],["T_STRING","true",174],")",["T_WHITESPACE","\n    ",174],"{",["T_WHITESPACE","\n        ",175],["T_VARIABLE","$res",176],["T_WHITESPACE"," ",176],"=",["T_WHITESPACE"," ",176],["T_VARIABLE","$this",176],["T_OBJECT_OPERATOR","->",176],["T_STRING","query",176],"(",["T_VARIABLE","$sql",176],")",";",["T_WHITESPACE","\n        ",176],["T_VARIABLE","$out",177],["T_WHITESPACE"," ",177],"=",["T_WHITESPACE"," ",177],["T_ARRAY","array",177],"(",")",";",["T_WHITESPACE","\n        ",177],["T_WHILE","while",178],"(",["T_VARIABLE","$row",178],["T_WHITESPACE"," ",178],"=",["T_WHITESPACE"," ",178],["T_VARIABLE","$res",178],["T_OBJECT_OPERATOR","->",178],["T_STRING","fetch_array",178],"(",["T_STRING","MYSQLI_ASSOC",178],")",")",["T_WHITESPACE"," ",178],"{",["T_WHITESPACE","\n            ",178],["T_IF","if",179],"(",["T_VARIABLE","$arrayMode",179],")",["T_WHITESPACE"," ",179],"{",["T_WHITESPACE","\n                ",179],["T_IF","if",180],"(","!",["T_ISSET","isset",180],"(",["T_VARIABLE","$out",180],"[",["T_VARIABLE","$row",180],"[",["T_VARIABLE","$key",180],"]","]",")",")",["T_WHITESPACE"," ",180],"{",["T_WHITESPACE","\n                    ",180],["T_VARIABLE","$out",181],"[",["T_VARIABLE","$row",181],"[",["T_VARIABLE","$key",181],"]","]",["T_WHITESPACE"," ",181],"=",["T_WHITESPACE"," ",181],["T_ARRAY","array",181],"(",")",";",["T_WHITESPACE","\n                ",181],"}",["T_WHITESPACE","\n                ",182],["T_VARIABLE","$out",183],"[",["T_VARIABLE","$row",183],"[",["T_VARIABLE","$key",183],"]","]","[","]",["T_WHITESPACE"," ",183],"=",["T_WHITESPACE"," ",183],["T_VARIABLE","$row",183],";",["T_WHITESPACE","\n            ",183],"}",["T_WHITESPACE"," ",184],["T_ELSE","else",184],["T_WHITESPACE"," ",184],"{",["T_WHITESPACE","\n                ",184],["T_VARIABLE","$out",185],"[",["T_VARIABLE","$row",185],"[",["T_VARIABLE","$key",185],"]","]",["T_WHITESPACE"," ",185],"=",["T_WHITESPACE"," ",185],["T_VARIABLE","$row",185],";",["T_WHITESPACE","\n            ",185],"}",["T_WHITESPACE","\n        ",186],"}",["T_WHITESPACE","\n        ",187],["T_RETURN","return",188],["T_WHITESPACE"," ",188],["T_VARIABLE","$out",188],";",["T_WHITESPACE","\n    ",188],"}",["T_WHITESPACE","\n\n    ",189],["T_DOC_COMMENT","\/**\n     * Fetch one field from all rows and place to list\n     * @param string $sql\n     * @param string $fld\n     * @return array\n     *\/",191],["T_WHITESPACE","\n    ",196],["T_PUBLIC","public",197],["T_WHITESPACE"," ",197],["T_FUNCTION","function",197],["T_WHITESPACE"," ",197],["T_STRING","fetchOneFieldAll",197],"(",["T_VARIABLE","$sql",197],",",["T_WHITESPACE"," ",197],["T_VARIABLE","$fld",197],")",["T_WHITESPACE","\n    ",197],"{",["T_WHITESPACE","\n        ",198],["T_VARIABLE","$res",199],["T_WHITESPACE"," ",199],"=",["T_WHITESPACE"," ",199],["T_VARIABLE","$this",199],["T_OBJECT_OPERATOR","->",199],["T_STRING","query",199],"(",["T_VARIABLE","$sql",199],")",";",["T_WHITESPACE","\n        ",199],["T_FOR","for",200],"(",["T_VARIABLE","$out",200],["T_WHITESPACE"," ",200],"=",["T_WHITESPACE"," ",200],["T_ARRAY","array",200],"(",")",";",["T_WHITESPACE"," ",200],["T_VARIABLE","$row",200],["T_WHITESPACE"," ",200],"=",["T_WHITESPACE"," ",200],["T_VARIABLE","$res",200],["T_OBJECT_OPERATOR","->",200],["T_STRING","fetch_array",200],"(",["T_VARIABLE","$this",200],["T_OBJECT_OPERATOR","->",200],["T_STRING","fetch_mode",200],")",";",["T_WHITESPACE"," ",200],["T_VARIABLE","$out",200],"[","]",["T_WHITESPACE"," ",200],"=",["T_WHITESPACE"," ",200],["T_VARIABLE","$row",200],"[",["T_VARIABLE","$fld",200],"]",")",";",["T_WHITESPACE","\n        ",200],["T_RETURN","return",201],["T_WHITESPACE"," ",201],["T_VARIABLE","$out",201],";",["T_WHITESPACE","\n    ",201],"}",["T_WHITESPACE","\n\n    ",202],["T_DOC_COMMENT","\/**\n     * List one item\n     * @param $table\n     * @param $condition\n     * @return array\n     *\/",204],["T_WHITESPACE","\n    ",209],["T_PUBLIC","public",210],["T_WHITESPACE"," ",210],["T_FUNCTION","function",210],["T_WHITESPACE"," ",210],["T_STRING","listOne",210],"(",["T_VARIABLE","$table",210],",",["T_WHITESPACE"," ",210],["T_VARIABLE","$condition",210],")",["T_WHITESPACE","\n    ",210],"{",["T_WHITESPACE","\n        ",211],["T_VARIABLE","$table",212],["T_WHITESPACE"," ",212],"=",["T_WHITESPACE"," ",212],["T_VARIABLE","$this",212],["T_OBJECT_OPERATOR","->",212],["T_STRING","escapeTableName",212],"(",["T_VARIABLE","$table",212],")",";",["T_WHITESPACE","\n        ",212],["T_VARIABLE","$sql",213],["T_WHITESPACE"," ",213],"=",["T_WHITESPACE"," ",213],"\"",["T_ENCAPSED_AND_WHITESPACE","SELECT * FROM ",213],["T_CURLY_OPEN","{",213],["T_VARIABLE","$table",213],"}",["T_ENCAPSED_AND_WHITESPACE"," WHERE ",213],["T_CURLY_OPEN","{",213],["T_VARIABLE","$condition",213],"}","\"",";",["T_WHITESPACE","\n        ",213],["T_RETURN","return",214],["T_WHITESPACE"," ",214],["T_VARIABLE","$this",214],["T_OBJECT_OPERATOR","->",214],["T_STRING","fetchOne",214],"(",["T_VARIABLE","$sql",214],")",";",["T_WHITESPACE","\n    ",214],"}",["T_WHITESPACE","\n\n    ",215],["T_DOC_COMMENT","\/**\n     * List items in table by condition\n     * @param string $table        table name\n     * @param string $condition    optional, if empty 1=1 is used\n     * @return array\n     *\/",217],["T_WHITESPACE","\n    ",222],["T_PUBLIC","public",223],["T_WHITESPACE"," ",223],["T_FUNCTION","function",223],["T_WHITESPACE"," ",223],["T_STRING","listAll",223],"(",["T_VARIABLE","$table",223],",",["T_WHITESPACE"," ",223],["T_VARIABLE","$condition",223],["T_WHITESPACE"," ",223],"=",["T_WHITESPACE"," ",223],["T_CONSTANT_ENCAPSED_STRING","'1=1'",223],")",["T_WHITESPACE","\n    ",223],"{",["T_WHITESPACE","\n        ",224],["T_VARIABLE","$table",225],["T_WHITESPACE"," ",225],"=",["T_WHITESPACE"," ",225],["T_VARIABLE","$this",225],["T_OBJECT_OPERATOR","->",225],["T_STRING","escapeTableName",225],"(",["T_VARIABLE","$table",225],")",";",["T_WHITESPACE","\n        ",225],["T_VARIABLE","$sql",226],["T_WHITESPACE"," ",226],"=",["T_WHITESPACE"," ",226],"\"",["T_ENCAPSED_AND_WHITESPACE","SELECT * FROM ",226],["T_CURLY_OPEN","{",226],["T_VARIABLE","$table",226],"}",["T_ENCAPSED_AND_WHITESPACE"," WHERE ",226],["T_CURLY_OPEN","{",226],["T_VARIABLE","$condition",226],"}","\"",";",["T_WHITESPACE","\n        ",226],["T_RETURN","return",227],["T_WHITESPACE"," ",227],["T_VARIABLE","$this",227],["T_OBJECT_OPERATOR","->",227],["T_STRING","fetchAll",227],"(",["T_VARIABLE","$sql",227],")",";",["T_WHITESPACE","\n    ",227],"}",["T_WHITESPACE","\n\n    ",228],["T_DOC_COMMENT","\/**\n     * List by key single entry\n     * @param string $table   table name\n     * @param string $value   field value\n     * @param string $key     field name\n     * @return array\n     *\/",230],["T_WHITESPACE","\n    ",236],["T_PUBLIC","public",237],["T_WHITESPACE"," ",237],["T_FUNCTION","function",237],["T_WHITESPACE"," ",237],["T_STRING","listByKeyOne",237],"(",["T_VARIABLE","$table",237],",",["T_WHITESPACE"," ",237],["T_VARIABLE","$value",237],",",["T_WHITESPACE"," ",237],["T_VARIABLE","$key",237],["T_WHITESPACE"," ",237],"=",["T_WHITESPACE"," ",237],["T_CONSTANT_ENCAPSED_STRING","'id'",237],")",["T_WHITESPACE","\n    ",237],"{",["T_WHITESPACE","\n        ",238],["T_VARIABLE","$table",239],["T_WHITESPACE"," ",239],"=",["T_WHITESPACE"," ",239],["T_VARIABLE","$this",239],["T_OBJECT_OPERATOR","->",239],["T_STRING","escapeTableName",239],"(",["T_VARIABLE","$table",239],")",";",["T_WHITESPACE","\n        ",239],["T_VARIABLE","$key",240],["T_WHITESPACE"," ",240],"=",["T_WHITESPACE"," ",240],["T_VARIABLE","$this",240],["T_OBJECT_OPERATOR","->",240],["T_STRING","escapeFieldName",240],"(",["T_VARIABLE","$key",240],")",";",["T_WHITESPACE","\n        ",240],["T_VARIABLE","$value",241],["T_WHITESPACE"," ",241],"=",["T_WHITESPACE"," ",241],["T_VARIABLE","$this",241],["T_OBJECT_OPERATOR","->",241],["T_STRING","escapeFieldValue",241],"(",["T_VARIABLE","$value",241],")",";",["T_WHITESPACE","\n        ",241],["T_VARIABLE","$sql",242],["T_WHITESPACE"," ",242],"=",["T_WHITESPACE"," ",242],"\"",["T_ENCAPSED_AND_WHITESPACE","SELECT * FROM ",242],["T_CURLY_OPEN","{",242],["T_VARIABLE","$table",242],"}",["T_ENCAPSED_AND_WHITESPACE"," WHERE ",242],["T_CURLY_OPEN","{",242],["T_VARIABLE","$key",242],"}",["T_ENCAPSED_AND_WHITESPACE"," = ",242],["T_CURLY_OPEN","{",242],["T_VARIABLE","$value",242],"}","\"",";",["T_WHITESPACE","\n        ",242],["T_RETURN","return",243],["T_WHITESPACE"," ",243],["T_VARIABLE","$this",243],["T_OBJECT_OPERATOR","->",243],["T_STRING","fetchOne",243],"(",["T_VARIABLE","$sql",243],")",";",["T_WHITESPACE","\n    ",243],"}",["T_WHITESPACE","\n\n    ",244],["T_DOC_COMMENT","\/**\n     * List by key all rows in table\n     * @param string $table   table name\n     * @param string $value   value of key field\n     * @param string $key     key field name\n     * @param string $add     additional conditions\n     * @return array\n     *\/",246],["T_WHITESPACE","\n    ",253],["T_PUBLIC","public",254],["T_WHITESPACE"," ",254],["T_FUNCTION","function",254],["T_WHITESPACE"," ",254],["T_STRING","listByKeyAll",254],"(",["T_VARIABLE","$table",254],",",["T_WHITESPACE"," ",254],["T_VARIABLE","$value",254],",",["T_WHITESPACE"," ",254],["T_VARIABLE","$key",254],["T_WHITESPACE"," ",254],"=",["T_WHITESPACE"," ",254],["T_CONSTANT_ENCAPSED_STRING","'id'",254],",",["T_WHITESPACE"," ",254],["T_VARIABLE","$add",254],["T_WHITESPACE"," ",254],"=",["T_WHITESPACE"," ",254],["T_CONSTANT_ENCAPSED_STRING","''",254],")",["T_WHITESPACE","\n    ",254],"{",["T_WHITESPACE","\n        ",255],["T_VARIABLE","$table",256],["T_WHITESPACE"," ",256],"=",["T_WHITESPACE"," ",256],["T_VARIABLE","$this",256],["T_OBJECT_OPERATOR","->",256],["T_STRING","escapeTableName",256],"(",["T_VARIABLE","$table",256],")",";",["T_WHITESPACE","\n        ",256],["T_VARIABLE","$key",257],["T_WHITESPACE"," ",257],"=",["T_WHITESPACE"," ",257],["T_VARIABLE","$this",257],["T_OBJECT_OPERATOR","->",257],["T_STRING","escapeFieldName",257],"(",["T_VARIABLE","$key",257],")",";",["T_WHITESPACE","\n        ",257],["T_VARIABLE","$value",258],["T_WHITESPACE"," ",258],"=",["T_WHITESPACE"," ",258],["T_VARIABLE","$this",258],["T_OBJECT_OPERATOR","->",258],["T_STRING","escapeFieldValue",258],"(",["T_VARIABLE","$value",258],")",";",["T_WHITESPACE","\n        ",258],["T_VARIABLE","$sql",259],["T_WHITESPACE"," ",259],"=",["T_WHITESPACE"," ",259],"\"",["T_ENCAPSED_AND_WHITESPACE","SELECT * FROM ",259],["T_CURLY_OPEN","{",259],["T_VARIABLE","$table",259],"}",["T_ENCAPSED_AND_WHITESPACE"," WHERE ",259],["T_CURLY_OPEN","{",259],["T_VARIABLE","$key",259],"}",["T_ENCAPSED_AND_WHITESPACE"," = ",259],["T_CURLY_OPEN","{",259],["T_VARIABLE","$value",259],"}",["T_ENCAPSED_AND_WHITESPACE"," ",259],["T_CURLY_OPEN","{",259],["T_VARIABLE","$add",259],"}","\"",";",["T_WHITESPACE","\n        ",259],["T_RETURN","return",260],["T_WHITESPACE"," ",260],["T_VARIABLE","$this",260],["T_OBJECT_OPERATOR","->",260],["T_STRING","fetchAll",260],"(",["T_VARIABLE","$sql",260],")",";",["T_WHITESPACE","\n    ",260],"}",["T_WHITESPACE","\n\n    ",261],["T_DOC_COMMENT","\/**\n     * List by key grouped\n     * @param string $table\n     * @param string $key\n     * @param bool $forcedArrayMode\n     * @return array\n     *\/",263],["T_WHITESPACE","\n    ",269],["T_PUBLIC","public",270],["T_WHITESPACE"," ",270],["T_FUNCTION","function",270],["T_WHITESPACE"," ",270],["T_STRING","listByKeyGrouped",270],"(",["T_VARIABLE","$table",270],",",["T_WHITESPACE","  ",270],["T_VARIABLE","$key",270],["T_WHITESPACE"," ",270],"=",["T_WHITESPACE"," ",270],["T_CONSTANT_ENCAPSED_STRING","'id'",270],",",["T_WHITESPACE"," ",270],["T_VARIABLE","$forcedArrayMode",270],["T_WHITESPACE"," ",270],"=",["T_WHITESPACE"," ",270],["T_STRING","false",270],")",["T_WHITESPACE","\n    ",270],"{",["T_WHITESPACE","\n        ",271],["T_VARIABLE","$table",272],["T_WHITESPACE"," ",272],"=",["T_WHITESPACE"," ",272],["T_VARIABLE","$this",272],["T_OBJECT_OPERATOR","->",272],["T_STRING","escapeTableName",272],"(",["T_VARIABLE","$table",272],")",";",["T_WHITESPACE","\n        ",272],["T_VARIABLE","$sql",273],["T_WHITESPACE"," ",273],"=",["T_WHITESPACE"," ",273],"\"",["T_ENCAPSED_AND_WHITESPACE","SELECT * FROM ",273],["T_CURLY_OPEN","{",273],["T_VARIABLE","$table",273],"}","\"",";",["T_WHITESPACE","\n        ",273],["T_RETURN","return",274],["T_WHITESPACE"," ",274],["T_VARIABLE","$this",274],["T_OBJECT_OPERATOR","->",274],["T_STRING","fetchGroupedArrayByKey",274],"(",["T_VARIABLE","$sql",274],",",["T_WHITESPACE"," ",274],["T_VARIABLE","$key",274],",",["T_WHITESPACE"," ",274],["T_VARIABLE","$forcedArrayMode",274],")",";",["T_WHITESPACE","\n    ",274],"}",["T_WHITESPACE","\n\n\n    ",275],["T_DOC_COMMENT","\/**\n     * Escape field names\n     * @param array $arrNames\n     * @return array\n     *\/",278],["T_WHITESPACE","\n    ",282],["T_PUBLIC","public",283],["T_WHITESPACE"," ",283],["T_FUNCTION","function",283],["T_WHITESPACE"," ",283],["T_STRING","escapeFieldNames",283],"(",["T_ARRAY","array",283],["T_WHITESPACE"," ",283],["T_VARIABLE","$arrNames",283],")",["T_WHITESPACE","\n    ",283],"{",["T_WHITESPACE","\n        ",284],["T_VARIABLE","$out",285],["T_WHITESPACE"," ",285],"=",["T_WHITESPACE"," ",285],["T_ARRAY","array",285],"(",")",";",["T_WHITESPACE","\n        ",285],["T_FOR","for",286],["T_WHITESPACE"," ",286],"(",["T_VARIABLE","$i",286],"=",["T_LNUMBER","0",286],",",["T_WHITESPACE"," ",286],["T_VARIABLE","$c",286],["T_WHITESPACE"," ",286],"=",["T_WHITESPACE"," ",286],["T_STRING","count",286],"(",["T_VARIABLE","$arrNames",286],")",["T_WHITESPACE"," ",286],";",["T_WHITESPACE"," ",286],["T_VARIABLE","$i",286],"<",["T_VARIABLE","$c",286],";",["T_WHITESPACE"," ",286],["T_VARIABLE","$i",286],["T_INC","++",286],")",["T_WHITESPACE"," ",286],"{",["T_WHITESPACE","\n            ",286],["T_VARIABLE","$out",287],"[","]",["T_WHITESPACE"," ",287],"=",["T_WHITESPACE"," ",287],["T_VARIABLE","$this",287],["T_OBJECT_OPERATOR","->",287],["T_STRING","escapeFieldName",287],"(",["T_VARIABLE","$arrNames",287],"[",["T_VARIABLE","$i",287],"]",")",";",["T_WHITESPACE","\n        ",287],"}",["T_WHITESPACE","\n        ",288],["T_RETURN","return",289],["T_WHITESPACE"," ",289],["T_VARIABLE","$out",289],";",["T_WHITESPACE","\n    ",289],"}",["T_WHITESPACE","\n\n    ",290],["T_DOC_COMMENT","\/**\n     * Escape field values\n     * @param array $arrNames\n     * @return array\n     *\/",292],["T_WHITESPACE","\n    ",296],["T_PUBLIC","public",297],["T_WHITESPACE"," ",297],["T_FUNCTION","function",297],["T_WHITESPACE"," ",297],["T_STRING","escapeFieldValues",297],"(",["T_ARRAY","array",297],["T_WHITESPACE"," ",297],["T_VARIABLE","$arrNames",297],")",["T_WHITESPACE","\n    ",297],"{",["T_WHITESPACE","\n        ",298],["T_VARIABLE","$out",299],["T_WHITESPACE"," ",299],"=",["T_WHITESPACE"," ",299],["T_ARRAY","array",299],"(",")",";",["T_WHITESPACE","\n        ",299],["T_FOR","for",300],["T_WHITESPACE"," ",300],"(",["T_VARIABLE","$i",300],"=",["T_LNUMBER","0",300],",",["T_WHITESPACE"," ",300],["T_VARIABLE","$c",300],["T_WHITESPACE"," ",300],"=",["T_WHITESPACE"," ",300],["T_STRING","count",300],"(",["T_VARIABLE","$arrNames",300],")",["T_WHITESPACE"," ",300],";",["T_WHITESPACE"," ",300],["T_VARIABLE","$i",300],"<",["T_VARIABLE","$c",300],";",["T_WHITESPACE"," ",300],["T_VARIABLE","$i",300],["T_INC","++",300],")",["T_WHITESPACE"," ",300],"{",["T_WHITESPACE","\n            ",300],["T_IF","if",301],"(",["T_VARIABLE","$arrNames",301],"[",["T_VARIABLE","$i",301],"]",["T_WHITESPACE"," ",301],["T_IS_NOT_IDENTICAL","!==",301],["T_WHITESPACE"," ",301],["T_CONSTANT_ENCAPSED_STRING","'LAST_INSERT_ID()'",301],")",["T_WHITESPACE"," ",301],"{",["T_WHITESPACE","\n                ",301],["T_VARIABLE","$out",302],"[","]",["T_WHITESPACE"," ",302],"=",["T_WHITESPACE"," ",302],["T_VARIABLE","$this",302],["T_OBJECT_OPERATOR","->",302],["T_STRING","escapeFieldValue",302],"(",["T_VARIABLE","$arrNames",302],"[",["T_VARIABLE","$i",302],"]",")",";",["T_WHITESPACE","\n            ",302],"}",["T_WHITESPACE"," ",303],["T_ELSE","else",303],["T_WHITESPACE"," ",303],"{",["T_WHITESPACE","\n                ",303],["T_VARIABLE","$out",304],"[","]",["T_WHITESPACE"," ",304],"=",["T_WHITESPACE"," ",304],["T_VARIABLE","$arrNames",304],"[",["T_VARIABLE","$i",304],"]",";",["T_WHITESPACE","\n            ",304],"}",["T_WHITESPACE","\n        ",305],"}",["T_WHITESPACE","\n        ",306],["T_RETURN","return",307],["T_WHITESPACE"," ",307],["T_VARIABLE","$out",307],";",["T_WHITESPACE","\n    ",307],"}",["T_WHITESPACE","\n\n\n    ",308],["T_DOC_COMMENT","\/**\n     * Throw connect exception\n     * @throws Mage_DB_Exception\n     * @return void\n     *\/",311],["T_WHITESPACE","\n    ",315],["T_PROTECTED","protected",316],["T_WHITESPACE"," ",316],["T_FUNCTION","function",316],["T_WHITESPACE"," ",316],["T_STRING","throwConnectException",316],"(",")",["T_WHITESPACE","\n    ",316],"{",["T_WHITESPACE","\n        ",317],["T_THROW","throw",318],["T_WHITESPACE"," ",318],["T_NEW","new",318],["T_WHITESPACE"," ",318],["T_STRING","Mage_DB_Exception",318],"(",["T_VARIABLE","$this",318],["T_OBJECT_OPERATOR","->",318],["T_STRING","conn",318],["T_OBJECT_OPERATOR","->",318],["T_STRING","connect_error",318],")",";",["T_WHITESPACE","\n    ",318],"}",["T_WHITESPACE","\n\n    ",319],["T_DOC_COMMENT","\/**\n     * Query - perform with throwing exception on error\n     * @param sting $sql query\n     * @throws Mage_DB_Exception\n     * @return mixed\n     *\/",321],["T_WHITESPACE","\n    ",326],["T_PUBLIC","public",327],["T_WHITESPACE"," ",327],["T_FUNCTION","function",327],["T_WHITESPACE"," ",327],["T_STRING","query",327],"(",["T_VARIABLE","$sql",327],")",["T_WHITESPACE","\n    ",327],"{",["T_WHITESPACE","\n        ",328],["T_VARIABLE","$res",329],["T_WHITESPACE"," ",329],"=",["T_WHITESPACE"," ",329],["T_VARIABLE","$this",329],["T_OBJECT_OPERATOR","->",329],["T_STRING","unsafeQuery",329],"(",["T_VARIABLE","$sql",329],")",";",["T_WHITESPACE","\n        ",329],["T_IF","if",330],"(","!",["T_VARIABLE","$res",330],")",["T_WHITESPACE"," ",330],"{",["T_WHITESPACE","\n            ",330],["T_THROW","throw",331],["T_WHITESPACE"," ",331],["T_NEW","new",331],["T_WHITESPACE"," ",331],["T_STRING","Mage_DB_Exception",331],"(",["T_VARIABLE","$this",331],["T_OBJECT_OPERATOR","->",331],["T_STRING","conn",331],["T_OBJECT_OPERATOR","->",331],["T_STRING","error",331],")",";",["T_WHITESPACE","\n        ",331],"}",["T_WHITESPACE","\n        ",332],["T_RETURN","return",333],["T_WHITESPACE"," ",333],["T_VARIABLE","$res",333],";",["T_WHITESPACE","\n    ",333],"}",["T_WHITESPACE","\n\n    ",334],["T_DOC_COMMENT","\/**\n     * Unsafe query - perform without error checking\n     * @param string $sql query\n     * @return mixed\n     *\/",336],["T_WHITESPACE","\n    ",340],["T_PUBLIC","public",341],["T_WHITESPACE"," ",341],["T_FUNCTION","function",341],["T_WHITESPACE"," ",341],["T_STRING","unsafeQuery",341],"(",["T_VARIABLE","$sql",341],")",["T_WHITESPACE","\n    ",341],"{",["T_WHITESPACE","\n        ",342],["T_RETURN","return",343],["T_WHITESPACE"," ",343],["T_VARIABLE","$this",343],["T_OBJECT_OPERATOR","->",343],["T_STRING","conn",343],["T_OBJECT_OPERATOR","->",343],["T_STRING","query",343],"(",["T_VARIABLE","$sql",343],")",";",["T_WHITESPACE","\n    ",343],"}",["T_WHITESPACE","\n\n    ",344],["T_DOC_COMMENT","\/**\n     * Insert assoc array to table\n     * @param string $table\n     * @param array $data\n     * @param bool $replace\n     * @return mixed\n     *\/",346],["T_WHITESPACE","\n    ",352],["T_PUBLIC","public",353],["T_WHITESPACE"," ",353],["T_FUNCTION","function",353],["T_WHITESPACE"," ",353],["T_STRING","insertAssocOne",353],"(",["T_VARIABLE","$table",353],",",["T_WHITESPACE"," ",353],["T_ARRAY","array",353],["T_WHITESPACE"," ",353],["T_VARIABLE","$data",353],",",["T_WHITESPACE"," ",353],["T_VARIABLE","$replace",353],["T_WHITESPACE"," ",353],"=",["T_WHITESPACE"," ",353],["T_STRING","false",353],")",["T_WHITESPACE"," ",353],"{",["T_WHITESPACE","\n        ",353],["T_VARIABLE","$keys",354],["T_WHITESPACE"," ",354],"=",["T_WHITESPACE"," ",354],["T_VARIABLE","$this",354],["T_OBJECT_OPERATOR","->",354],["T_STRING","escapeFieldNames",354],"(",["T_STRING","array_keys",354],"(",["T_VARIABLE","$data",354],")",")",";",["T_WHITESPACE","\n        ",354],["T_VARIABLE","$keys",355],["T_WHITESPACE"," ",355],"=",["T_WHITESPACE"," ",355],["T_CONSTANT_ENCAPSED_STRING","\"(\"",355],["T_WHITESPACE"," ",355],".",["T_WHITESPACE"," ",355],["T_STRING","implode",355],["T_WHITESPACE"," ",355],"(",["T_CONSTANT_ENCAPSED_STRING","\",\"",355],",",["T_WHITESPACE"," ",355],["T_VARIABLE","$keys",355],")",["T_WHITESPACE"," ",355],".",["T_WHITESPACE"," ",355],["T_CONSTANT_ENCAPSED_STRING","\")\"",355],";",["T_WHITESPACE","\n        ",355],["T_VARIABLE","$table",356],["T_WHITESPACE"," ",356],"=",["T_WHITESPACE"," ",356],["T_VARIABLE","$this",356],["T_OBJECT_OPERATOR","->",356],["T_STRING","escapeTableName",356],"(",["T_VARIABLE","$table",356],")",";",["T_WHITESPACE","\n        ",356],["T_VARIABLE","$sql",357],["T_WHITESPACE"," ",357],"=",["T_WHITESPACE"," ",357],["T_VARIABLE","$replace",357],["T_WHITESPACE"," ",357],"?",["T_WHITESPACE"," ",357],"\"",["T_ENCAPSED_AND_WHITESPACE","REPLACE INTO ",357],["T_CURLY_OPEN","{",357],["T_VARIABLE","$table",357],"}",["T_ENCAPSED_AND_WHITESPACE"," ",357],"\"",["T_WHITESPACE"," ",357],":",["T_WHITESPACE"," ",357],"\"",["T_ENCAPSED_AND_WHITESPACE","INSERT INTO ",357],["T_CURLY_OPEN","{",357],["T_VARIABLE","$table",357],"}",["T_ENCAPSED_AND_WHITESPACE"," ",357],"\"",";",["T_WHITESPACE","\n        ",357],["T_VARIABLE","$values",358],["T_WHITESPACE"," ",358],"=",["T_WHITESPACE"," ",358],["T_VARIABLE","$this",358],["T_OBJECT_OPERATOR","->",358],["T_STRING","escapeFieldValues",358],"(",["T_STRING","array_values",358],"(",["T_VARIABLE","$data",358],")",")",";",["T_WHITESPACE","\n        ",358],["T_VARIABLE","$values",359],["T_WHITESPACE"," ",359],"=",["T_WHITESPACE"," ",359],["T_CONSTANT_ENCAPSED_STRING","\" VALUES (\"",359],["T_WHITESPACE"," ",359],".",["T_WHITESPACE"," ",359],["T_STRING","implode",359],["T_WHITESPACE"," ",359],"(",["T_CONSTANT_ENCAPSED_STRING","\",\"",359],",",["T_WHITESPACE"," ",359],["T_VARIABLE","$values",359],")",["T_WHITESPACE"," ",359],".",["T_WHITESPACE"," ",359],["T_CONSTANT_ENCAPSED_STRING","\")\"",359],";",["T_WHITESPACE","\n        ",359],["T_VARIABLE","$sql",360],["T_WHITESPACE"," ",360],["T_CONCAT_EQUAL",".=",360],["T_WHITESPACE"," ",360],["T_VARIABLE","$keys",360],["T_WHITESPACE"," ",360],".",["T_WHITESPACE"," ",360],["T_VARIABLE","$values",360],";",["T_WHITESPACE","\n        ",360],["T_RETURN","return",361],["T_WHITESPACE"," ",361],["T_VARIABLE","$this",361],["T_OBJECT_OPERATOR","->",361],["T_STRING","query",361],"(",["T_VARIABLE","$sql",361],")",";",["T_WHITESPACE","\n    ",361],"}",["T_WHITESPACE","\n\n    ",362],["T_DOC_COMMENT","\/**\n     * Insert several records to table\n     * @param string $table\n     * @param array $data\n     * @param bool $replace   use REPLACE INTO instead of INSERT INTO\n     * @return array\n     *\/",364],["T_WHITESPACE","\n    ",370],["T_PUBLIC","public",371],["T_WHITESPACE"," ",371],["T_FUNCTION","function",371],["T_WHITESPACE"," ",371],["T_STRING","insertAssocMultiple",371],"(",["T_VARIABLE","$table",371],",",["T_WHITESPACE"," ",371],["T_ARRAY","array",371],["T_WHITESPACE"," ",371],["T_VARIABLE","$data",371],",",["T_WHITESPACE"," ",371],["T_VARIABLE","$replace",371],["T_WHITESPACE"," ",371],"=",["T_WHITESPACE"," ",371],["T_STRING","false",371],",",["T_WHITESPACE"," ",371],["T_VARIABLE","$excludeFields",371],["T_WHITESPACE"," ",371],"=",["T_WHITESPACE"," ",371],["T_ARRAY","array",371],"(",")",")",["T_WHITESPACE","\n    ",371],"{",["T_WHITESPACE","\n        ",372],["T_VARIABLE","$table",373],["T_WHITESPACE"," ",373],"=",["T_WHITESPACE"," ",373],["T_VARIABLE","$this",373],["T_OBJECT_OPERATOR","->",373],["T_STRING","escapeTableName",373],"(",["T_VARIABLE","$table",373],")",";",["T_WHITESPACE","\n        ",373],["T_VARIABLE","$sql",374],["T_WHITESPACE"," ",374],"=",["T_WHITESPACE"," ",374],["T_VARIABLE","$replace",374],["T_WHITESPACE"," ",374],"?",["T_WHITESPACE"," ",374],"\"",["T_ENCAPSED_AND_WHITESPACE","REPLACE INTO ",374],["T_CURLY_OPEN","{",374],["T_VARIABLE","$table",374],"}",["T_ENCAPSED_AND_WHITESPACE"," ",374],"\"",["T_WHITESPACE"," ",374],":",["T_WHITESPACE"," ",374],"\"",["T_ENCAPSED_AND_WHITESPACE","INSERT INTO ",374],["T_CURLY_OPEN","{",374],["T_VARIABLE","$table",374],"}",["T_ENCAPSED_AND_WHITESPACE"," ",374],"\"",";",["T_WHITESPACE","\n        ",374],["T_VARIABLE","$keys",375],["T_WHITESPACE"," ",375],"=",["T_WHITESPACE"," ",375],["T_STRING","array_keys",375],"(",["T_VARIABLE","$data",375],"[",["T_LNUMBER","0",375],"]",")",";",["T_WHITESPACE","\n        ",375],["T_VARIABLE","$excluded",376],["T_WHITESPACE"," ",376],"=",["T_WHITESPACE"," ",376],["T_ARRAY","array",376],"(",")",";",["T_WHITESPACE","\n        ",376],["T_FOR","for",377],"(",["T_VARIABLE","$i",377],["T_WHITESPACE"," ",377],"=",["T_WHITESPACE"," ",377],["T_LNUMBER","0",377],",",["T_WHITESPACE"," ",377],["T_VARIABLE","$c",377],["T_WHITESPACE"," ",377],"=",["T_WHITESPACE"," ",377],["T_STRING","count",377],"(",["T_VARIABLE","$excludeFields",377],")",";",["T_WHITESPACE"," ",377],["T_VARIABLE","$i",377],["T_WHITESPACE"," ",377],"<",["T_WHITESPACE"," ",377],["T_VARIABLE","$c",377],";",["T_WHITESPACE"," ",377],["T_VARIABLE","$i",377],["T_INC","++",377],")",["T_WHITESPACE"," ",377],"{",["T_WHITESPACE","\n            ",377],["T_VARIABLE","$k",378],["T_WHITESPACE"," ",378],"=",["T_WHITESPACE"," ",378],["T_VARIABLE","$excludeFields",378],"[",["T_VARIABLE","$i",378],"]",";",["T_WHITESPACE","\n            ",378],["T_IF","if",379],"(",["T_ISSET","isset",379],"(",["T_VARIABLE","$keys",379],"[",["T_VARIABLE","$k",379],"]",")",")",["T_WHITESPACE"," ",379],"{",["T_WHITESPACE","\n                ",379],["T_VARIABLE","$excluded",380],["T_WHITESPACE"," ",380],"[","]",["T_WHITESPACE"," ",380],"=",["T_WHITESPACE"," ",380],["T_VARIABLE","$k",380],";",["T_WHITESPACE","\n                ",380],["T_UNSET","unset",381],"(",["T_VARIABLE","$keys",381],"[",["T_VARIABLE","$k",381],"]",")",";",["T_WHITESPACE","    \n            ",381],"}",["T_WHITESPACE","            \n        ",382],"}",["T_WHITESPACE","\n        \n        ",383],["T_VARIABLE","$keys",385],["T_WHITESPACE"," ",385],"=",["T_WHITESPACE"," ",385],["T_VARIABLE","$this",385],["T_OBJECT_OPERATOR","->",385],["T_STRING","escapeFieldNames",385],"(",["T_VARIABLE","$keys",385],")",";",["T_WHITESPACE","\n        ",385],["T_VARIABLE","$sql",386],["T_WHITESPACE"," ",386],["T_CONCAT_EQUAL",".=",386],["T_WHITESPACE"," ",386],["T_CONSTANT_ENCAPSED_STRING","\" ( \"",386],";",["T_WHITESPACE","\n        ",386],["T_FOR","for",387],"(",["T_VARIABLE","$i",387],["T_WHITESPACE"," ",387],"=",["T_WHITESPACE"," ",387],["T_LNUMBER","0",387],",",["T_WHITESPACE"," ",387],["T_VARIABLE","$c",387],["T_WHITESPACE"," ",387],"=",["T_WHITESPACE"," ",387],["T_STRING","count",387],"(",["T_VARIABLE","$keys",387],")",";",["T_WHITESPACE"," ",387],["T_VARIABLE","$i",387],"<",["T_VARIABLE","$c",387],";",["T_WHITESPACE"," ",387],["T_VARIABLE","$i",387],["T_INC","++",387],")",["T_WHITESPACE"," ",387],"{",["T_WHITESPACE","\n            ",387],["T_VARIABLE","$sql",388],["T_WHITESPACE"," ",388],["T_CONCAT_EQUAL",".=",388],["T_WHITESPACE"," ",388],["T_VARIABLE","$keys",388],"[",["T_VARIABLE","$i",388],"]",";",["T_WHITESPACE","\n            ",388],["T_IF","if",389],"(",["T_VARIABLE","$i",389],["T_IS_NOT_EQUAL","!=",389],["T_VARIABLE","$c",389],"-",["T_LNUMBER","1",389],")",["T_WHITESPACE"," ",389],"{",["T_WHITESPACE","\n                ",389],["T_VARIABLE","$sql",390],["T_WHITESPACE"," ",390],["T_CONCAT_EQUAL",".=",390],["T_WHITESPACE"," ",390],["T_CONSTANT_ENCAPSED_STRING","\",\"",390],";",["T_WHITESPACE","\n            ",390],"}",["T_WHITESPACE","\n        ",391],"}",["T_WHITESPACE","\n        ",392],["T_VARIABLE","$sql",393],["T_WHITESPACE"," ",393],["T_CONCAT_EQUAL",".=",393],["T_WHITESPACE"," ",393],["T_CONSTANT_ENCAPSED_STRING","\" ) VALUES \"",393],";",["T_WHITESPACE","\n        ",393],["T_FOR","for",394],"(",["T_VARIABLE","$i",394],["T_WHITESPACE"," ",394],"=",["T_WHITESPACE"," ",394],["T_LNUMBER","0",394],",",["T_WHITESPACE"," ",394],["T_VARIABLE","$c",394],["T_WHITESPACE"," ",394],"=",["T_WHITESPACE"," ",394],["T_STRING","count",394],"(",["T_VARIABLE","$data",394],")",";",["T_WHITESPACE"," ",394],["T_VARIABLE","$i",394],"<",["T_VARIABLE","$c",394],";",["T_WHITESPACE"," ",394],["T_VARIABLE","$i",394],["T_INC","++",394],")",["T_WHITESPACE"," ",394],"{",["T_WHITESPACE","\n            ",394],["T_VARIABLE","$row",395],["T_WHITESPACE"," ",395],"=",["T_WHITESPACE"," ",395],["T_VARIABLE","$data",395],"[",["T_VARIABLE","$i",395],"]",";",["T_WHITESPACE","\n            ",395],["T_FOR","for",396],["T_WHITESPACE"," ",396],"(",["T_VARIABLE","$j",396],["T_WHITESPACE"," ",396],"=",["T_WHITESPACE"," ",396],["T_LNUMBER","0",396],",",["T_WHITESPACE"," ",396],["T_VARIABLE","$jc",396],["T_WHITESPACE"," ",396],"=",["T_WHITESPACE"," ",396],["T_STRING","count",396],"(",["T_VARIABLE","$excluded",396],")",";",["T_WHITESPACE"," ",396],["T_VARIABLE","$j",396],"<",["T_VARIABLE","$jc",396],";",["T_WHITESPACE"," ",396],["T_VARIABLE","$j",396],["T_INC","++",396],")",["T_WHITESPACE"," ",396],"{",["T_WHITESPACE","\n                ",396],["T_UNSET","unset",397],"(",["T_VARIABLE","$data",397],"[",["T_VARIABLE","$excluded",397],"[",["T_VARIABLE","$j",397],"]","]",")",";",["T_WHITESPACE","\n            ",397],"}",["T_WHITESPACE","\n            ",398],["T_VARIABLE","$values",399],["T_WHITESPACE"," ",399],"=",["T_WHITESPACE"," ",399],["T_VARIABLE","$this",399],["T_OBJECT_OPERATOR","->",399],["T_STRING","escapeFieldValues",399],"(",["T_STRING","array_values",399],"(",["T_VARIABLE","$row",399],")",")",";",["T_WHITESPACE","\n            ",399],["T_VARIABLE","$sql",400],["T_WHITESPACE"," ",400],["T_CONCAT_EQUAL",".=",400],["T_WHITESPACE"," ",400],["T_CONSTANT_ENCAPSED_STRING","\"( \"",400],";",["T_WHITESPACE","\n            ",400],["T_FOR","for",401],["T_WHITESPACE"," ",401],"(",["T_VARIABLE","$j",401],["T_WHITESPACE"," ",401],"=",["T_WHITESPACE"," ",401],["T_LNUMBER","0",401],",",["T_WHITESPACE"," ",401],["T_VARIABLE","$jc",401],["T_WHITESPACE"," ",401],"=",["T_WHITESPACE"," ",401],["T_STRING","count",401],"(",["T_VARIABLE","$values",401],")",";",["T_WHITESPACE"," ",401],["T_VARIABLE","$j",401],["T_WHITESPACE"," ",401],"<",["T_WHITESPACE"," ",401],["T_VARIABLE","$jc",401],";",["T_WHITESPACE"," ",401],["T_VARIABLE","$j",401],["T_INC","++",401],")",["T_WHITESPACE"," ",401],"{",["T_WHITESPACE","\n                ",401],["T_VARIABLE","$sql",402],["T_WHITESPACE"," ",402],["T_CONCAT_EQUAL",".=",402],["T_WHITESPACE"," ",402],["T_VARIABLE","$values",402],"[",["T_VARIABLE","$j",402],"]",";",["T_WHITESPACE","\n                ",402],["T_IF","if",403],"(",["T_VARIABLE","$j",403],["T_WHITESPACE"," ",403],["T_IS_NOT_EQUAL","!=",403],["T_WHITESPACE"," ",403],["T_VARIABLE","$jc",403],"-",["T_LNUMBER","1",403],")",["T_WHITESPACE"," ",403],"{",["T_WHITESPACE","\n                    ",403],["T_VARIABLE","$sql",404],["T_WHITESPACE"," ",404],["T_CONCAT_EQUAL",".=",404],["T_WHITESPACE"," ",404],["T_CONSTANT_ENCAPSED_STRING","\",\"",404],";",["T_WHITESPACE","\n                ",404],"}",["T_WHITESPACE","\n            ",405],"}",["T_WHITESPACE","\n            ",406],["T_VARIABLE","$sql",407],["T_WHITESPACE"," ",407],["T_CONCAT_EQUAL",".=",407],["T_WHITESPACE"," ",407],["T_CONSTANT_ENCAPSED_STRING","\" )\"",407],";",["T_WHITESPACE","\n            ",407],["T_IF","if",408],"(",["T_VARIABLE","$i",408],["T_IS_NOT_EQUAL","!=",408],["T_VARIABLE","$c",408],"-",["T_LNUMBER","1",408],")",["T_WHITESPACE"," ",408],"{",["T_WHITESPACE","\n                ",408],["T_VARIABLE","$sql",409],["T_WHITESPACE"," ",409],["T_CONCAT_EQUAL",".=",409],["T_WHITESPACE"," ",409],["T_CONSTANT_ENCAPSED_STRING","\",\"",409],";",["T_WHITESPACE","\n            ",409],"}",["T_WHITESPACE","\n        ",410],"}",["T_WHITESPACE","        \n        ",411],["T_RETURN","return",412],["T_WHITESPACE"," ",412],["T_VARIABLE","$this",412],["T_OBJECT_OPERATOR","->",412],["T_STRING","query",412],"(",["T_VARIABLE","$sql",412],")",";",["T_WHITESPACE","\n    ",412],"}",["T_WHITESPACE","\n\n\n    ",413],["T_DOC_COMMENT","\/**\n     * Set table data by condition\n     * @param $table\n     * @param $data\n     * @param $condition\n     * @return mixed\n     *\/",416],["T_WHITESPACE","\n    ",422],["T_PUBLIC","public",423],["T_WHITESPACE"," ",423],["T_FUNCTION","function",423],["T_WHITESPACE"," ",423],["T_STRING","updateAssoc",423],"(",["T_VARIABLE","$table",423],",",["T_WHITESPACE"," ",423],["T_ARRAY","array",423],["T_WHITESPACE"," ",423],["T_VARIABLE","$data",423],",",["T_WHITESPACE"," ",423],["T_VARIABLE","$condition",423],["T_WHITESPACE"," ",423],"=",["T_WHITESPACE"," ",423],["T_CONSTANT_ENCAPSED_STRING","'1=1'",423],")",["T_WHITESPACE","\n    ",423],"{",["T_WHITESPACE","\n        ",424],["T_VARIABLE","$table",425],["T_WHITESPACE"," ",425],"=",["T_WHITESPACE"," ",425],["T_VARIABLE","$this",425],["T_OBJECT_OPERATOR","->",425],["T_STRING","escapeTableName",425],"(",["T_VARIABLE","$table",425],")",";",["T_WHITESPACE","\n        ",425],["T_VARIABLE","$set",426],["T_WHITESPACE"," ",426],"=",["T_WHITESPACE"," ",426],["T_ARRAY","array",426],"(",")",";",["T_WHITESPACE","\n        ",426],["T_FOREACH","foreach",427],"(",["T_VARIABLE","$data",427],["T_WHITESPACE"," ",427],["T_AS","as",427],["T_WHITESPACE"," ",427],["T_VARIABLE","$k",427],["T_DOUBLE_ARROW","=>",427],["T_VARIABLE","$v",427],")",["T_WHITESPACE"," ",427],"{",["T_WHITESPACE","\n            ",427],["T_VARIABLE","$k",428],["T_WHITESPACE"," ",428],"=",["T_WHITESPACE"," ",428],["T_VARIABLE","$this",428],["T_OBJECT_OPERATOR","->",428],["T_STRING","escapeFieldName",428],"(",["T_VARIABLE","$k",428],")",";",["T_WHITESPACE","\n            ",428],["T_VARIABLE","$v",429],["T_WHITESPACE"," ",429],"=",["T_WHITESPACE"," ",429],["T_VARIABLE","$this",429],["T_OBJECT_OPERATOR","->",429],["T_STRING","escapeFieldValue",429],"(",["T_VARIABLE","$v",429],")",";",["T_WHITESPACE","\n            ",429],["T_VARIABLE","$set",430],"[","]",["T_WHITESPACE"," ",430],"=",["T_WHITESPACE"," ",430],["T_VARIABLE","$k",430],["T_WHITESPACE"," ",430],".",["T_WHITESPACE"," ",430],["T_CONSTANT_ENCAPSED_STRING","\" = \"",430],["T_WHITESPACE"," ",430],".",["T_WHITESPACE"," ",430],["T_VARIABLE","$v",430],";",["T_WHITESPACE","\n        ",430],"}",["T_WHITESPACE","\n        ",431],["T_VARIABLE","$set",432],["T_WHITESPACE"," ",432],"=",["T_WHITESPACE"," ",432],["T_STRING","implode",432],"(",["T_CONSTANT_ENCAPSED_STRING","\",\"",432],",",["T_WHITESPACE"," ",432],["T_VARIABLE","$set",432],")",";",["T_WHITESPACE","\n        ",432],["T_VARIABLE","$sql",433],["T_WHITESPACE"," ",433],"=",["T_WHITESPACE"," ",433],"\"",["T_ENCAPSED_AND_WHITESPACE","UPDATE ",433],["T_CURLY_OPEN","{",433],["T_VARIABLE","$table",433],"}",["T_ENCAPSED_AND_WHITESPACE"," SET ",433],["T_CURLY_OPEN","{",433],["T_VARIABLE","$set",433],"}",["T_ENCAPSED_AND_WHITESPACE"," WHERE ",433],["T_CURLY_OPEN","{",433],["T_VARIABLE","$condition",433],"}","\"",";",["T_WHITESPACE","\n        ",433],["T_RETURN","return",434],["T_WHITESPACE"," ",434],["T_VARIABLE","$this",434],["T_OBJECT_OPERATOR","->",434],["T_STRING","query",434],"(",["T_VARIABLE","$sql",434],")",";",["T_WHITESPACE","\n    ",434],"}",["T_WHITESPACE","\n\n\n    ",435],["T_DOC_COMMENT","\/**\n     * Update entry by pk\n     * @param string $table\n     * @param array $data\n     * @param string $value\n     * @param string $key\n     * @return mixed\n     *\/",438],["T_WHITESPACE","\n    ",445],["T_PUBLIC","public",446],["T_WHITESPACE"," ",446],["T_FUNCTION","function",446],["T_WHITESPACE"," ",446],["T_STRING","updateAssocByKey",446],"(",["T_VARIABLE","$table",446],",",["T_WHITESPACE"," ",446],["T_ARRAY","array",446],["T_WHITESPACE"," ",446],["T_VARIABLE","$data",446],",",["T_WHITESPACE"," ",446],["T_VARIABLE","$value",446],",",["T_WHITESPACE"," ",446],["T_VARIABLE","$key",446],["T_WHITESPACE"," ",446],"=",["T_WHITESPACE"," ",446],["T_CONSTANT_ENCAPSED_STRING","'id'",446],")",["T_WHITESPACE","\n    ",446],"{",["T_WHITESPACE","\n        ",447],["T_VARIABLE","$table",448],["T_WHITESPACE"," ",448],"=",["T_WHITESPACE"," ",448],["T_VARIABLE","$this",448],["T_OBJECT_OPERATOR","->",448],["T_STRING","escapeTableName",448],"(",["T_VARIABLE","$table",448],")",";",["T_WHITESPACE","\n        ",448],["T_VARIABLE","$key",449],["T_WHITESPACE"," ",449],"=",["T_WHITESPACE"," ",449],["T_VARIABLE","$this",449],["T_OBJECT_OPERATOR","->",449],["T_STRING","escapeFieldName",449],"(",["T_VARIABLE","$key",449],")",";",["T_WHITESPACE","\n        ",449],["T_VARIABLE","$value",450],["T_WHITESPACE"," ",450],"=",["T_WHITESPACE"," ",450],["T_VARIABLE","$this",450],["T_OBJECT_OPERATOR","->",450],["T_STRING","escapeFieldValue",450],"(",["T_VARIABLE","$value",450],")",";",["T_WHITESPACE","\n        ",450],["T_VARIABLE","$set",451],["T_WHITESPACE"," ",451],"=",["T_WHITESPACE"," ",451],["T_ARRAY","array",451],"(",")",";",["T_WHITESPACE","\n        ",451],["T_FOREACH","foreach",452],"(",["T_VARIABLE","$data",452],["T_WHITESPACE"," ",452],["T_AS","as",452],["T_WHITESPACE"," ",452],["T_VARIABLE","$k",452],["T_DOUBLE_ARROW","=>",452],["T_VARIABLE","$v",452],")",["T_WHITESPACE"," ",452],"{",["T_WHITESPACE","\n            ",452],["T_VARIABLE","$k",453],["T_WHITESPACE"," ",453],"=",["T_WHITESPACE"," ",453],["T_VARIABLE","$this",453],["T_OBJECT_OPERATOR","->",453],["T_STRING","escapeFieldName",453],"(",["T_VARIABLE","$k",453],")",";",["T_WHITESPACE","\n            ",453],["T_VARIABLE","$v",454],["T_WHITESPACE"," ",454],"=",["T_WHITESPACE"," ",454],["T_VARIABLE","$this",454],["T_OBJECT_OPERATOR","->",454],["T_STRING","escapeFieldValue",454],"(",["T_VARIABLE","$v",454],")",";",["T_WHITESPACE","\n            ",454],["T_VARIABLE","$set",455],"[","]",["T_WHITESPACE"," ",455],"=",["T_WHITESPACE"," ",455],["T_VARIABLE","$k",455],["T_WHITESPACE"," ",455],".",["T_WHITESPACE"," ",455],["T_CONSTANT_ENCAPSED_STRING","\" = \"",455],["T_WHITESPACE"," ",455],".",["T_WHITESPACE"," ",455],["T_VARIABLE","$v",455],";",["T_WHITESPACE","\n        ",455],"}",["T_WHITESPACE","\n        ",456],["T_VARIABLE","$set",457],["T_WHITESPACE"," ",457],"=",["T_WHITESPACE"," ",457],["T_STRING","implode",457],"(",["T_CONSTANT_ENCAPSED_STRING","\",\"",457],",",["T_WHITESPACE"," ",457],["T_VARIABLE","$set",457],")",";",["T_WHITESPACE","\n        ",457],["T_VARIABLE","$sql",458],["T_WHITESPACE"," ",458],"=",["T_WHITESPACE"," ",458],"\"",["T_ENCAPSED_AND_WHITESPACE","UPDATE ",458],["T_CURLY_OPEN","{",458],["T_VARIABLE","$table",458],"}",["T_ENCAPSED_AND_WHITESPACE"," SET ",458],["T_CURLY_OPEN","{",458],["T_VARIABLE","$set",458],"}",["T_ENCAPSED_AND_WHITESPACE"," WHERE ",458],["T_CURLY_OPEN","{",458],["T_VARIABLE","$key",458],"}",["T_ENCAPSED_AND_WHITESPACE"," = ",458],["T_CURLY_OPEN","{",458],["T_VARIABLE","$value",458],"}","\"",";",["T_WHITESPACE","\n        ",458],["T_RETURN","return",459],["T_WHITESPACE"," ",459],["T_VARIABLE","$this",459],["T_OBJECT_OPERATOR","->",459],["T_STRING","query",459],"(",["T_VARIABLE","$sql",459],")",";",["T_WHITESPACE","\n    ",459],"}",["T_WHITESPACE","\n\n\n    ",460],["T_DOC_COMMENT","\/**\n     * Convert ids to string\n     * @param array|string $ids\n     * @return string\n     *\/",463],["T_WHITESPACE","\n    ",467],["T_PUBLIC","public",468],["T_WHITESPACE"," ",468],["T_FUNCTION","function",468],["T_WHITESPACE"," ",468],["T_STRING","idsToString",468],"(",["T_VARIABLE","$ids",468],")",["T_WHITESPACE","\n    ",468],"{",["T_WHITESPACE","\n        ",469],["T_IF","if",470],"(",["T_STRING","is_scalar",470],"(",["T_VARIABLE","$ids",470],")",")",["T_WHITESPACE"," ",470],"{",["T_WHITESPACE","\n            ",470],["T_RETURN","return",471],["T_WHITESPACE"," ",471],["T_VARIABLE","$this",471],["T_OBJECT_OPERATOR","->",471],["T_STRING","escapeFieldValue",471],"(",["T_STRING","strval",471],"(",["T_VARIABLE","$ids",471],")",")",";",["T_WHITESPACE","\n        ",471],"}",["T_WHITESPACE","\n        ",472],["T_VARIABLE","$out",473],["T_WHITESPACE"," ",473],"=",["T_WHITESPACE"," ",473],["T_ARRAY","array",473],"(",")",";",["T_WHITESPACE","\n        ",473],["T_FOREACH","foreach",474],["T_WHITESPACE"," ",474],"(",["T_VARIABLE","$values",474],["T_WHITESPACE"," ",474],["T_AS","as",474],["T_WHITESPACE"," ",474],["T_VARIABLE","$id",474],")",["T_WHITESPACE"," ",474],"{",["T_WHITESPACE","\n            ",474],["T_VARIABLE","$out",475],["T_WHITESPACE"," ",475],["T_CONCAT_EQUAL",".=",475],["T_WHITESPACE"," ",475],["T_VARIABLE","$this",475],["T_OBJECT_OPERATOR","->",475],["T_STRING","escapeFieldValue",475],"(",["T_VARIABLE","$id",475],")",";",["T_WHITESPACE","\n        ",475],"}",["T_WHITESPACE","\n        ",476],["T_RETURN","return",477],["T_WHITESPACE"," ",477],["T_STRING","implode",477],"(",["T_CONSTANT_ENCAPSED_STRING","\",\"",477],",",["T_WHITESPACE"," ",477],["T_VARIABLE","$out",477],")",";",["T_WHITESPACE","\n    ",477],"}",["T_WHITESPACE","\n\n    ",478],["T_DOC_COMMENT","\/**\n     * Ids equality condition\n     * @param mixed $ids   array or string\n     * @return string\n     *\/",480],["T_WHITESPACE","\n    ",484],["T_PUBLIC","public",485],["T_WHITESPACE"," ",485],["T_FUNCTION","function",485],["T_WHITESPACE"," ",485],["T_STRING","idsEqualCondition",485],"(",["T_VARIABLE","$ids",485],")",["T_WHITESPACE","\n    ",485],"{",["T_WHITESPACE","\n        ",486],["T_VARIABLE","$vals",487],["T_WHITESPACE"," ",487],"=",["T_WHITESPACE"," ",487],["T_VARIABLE","$this",487],["T_OBJECT_OPERATOR","->",487],["T_STRING","idsToString",487],"(",["T_VARIABLE","$ids",487],")",";",["T_WHITESPACE","\n        ",487],["T_VARIABLE","$condition",488],["T_WHITESPACE"," ",488],"=",["T_WHITESPACE"," ",488],["T_STRING","is_scalar",488],"(",["T_VARIABLE","$ids",488],")",["T_WHITESPACE"," ",488],"?",["T_WHITESPACE"," ",488],"\"",["T_ENCAPSED_AND_WHITESPACE"," = ",488],["T_CURLY_OPEN","{",488],["T_VARIABLE","$vals",488],"}",["T_ENCAPSED_AND_WHITESPACE"," ",488],"\"",["T_WHITESPACE"," ",488],":",["T_WHITESPACE"," ",488],"\"",["T_ENCAPSED_AND_WHITESPACE"," IN (",488],["T_CURLY_OPEN","{",488],["T_VARIABLE","$vals",488],"}",["T_ENCAPSED_AND_WHITESPACE",") ",488],"\"",";",["T_WHITESPACE","\n        ",488],["T_RETURN","return",489],["T_WHITESPACE"," ",489],["T_VARIABLE","$condition",489],";",["T_WHITESPACE","\n    ",489],"}",["T_WHITESPACE","\n\n\n    ",490],["T_DOC_COMMENT","\/**\n     * Delete items by id\n     * @param string $table\n     * @param mixed $ids      array or string\n     * @param string $key     key field\n     * @return mixed\n     *\/",493],["T_WHITESPACE","\n    ",499],["T_PUBLIC","public",500],["T_WHITESPACE"," ",500],["T_FUNCTION","function",500],["T_WHITESPACE"," ",500],["T_STRING","deleteById",500],"(",["T_VARIABLE","$table",500],",",["T_WHITESPACE"," ",500],["T_VARIABLE","$ids",500],",",["T_WHITESPACE"," ",500],["T_VARIABLE","$key",500],["T_WHITESPACE"," ",500],"=",["T_WHITESPACE"," ",500],["T_CONSTANT_ENCAPSED_STRING","'id'",500],")",["T_WHITESPACE","\n    ",500],"{",["T_WHITESPACE","\n        ",501],["T_VARIABLE","$key",502],["T_WHITESPACE"," ",502],"=",["T_WHITESPACE"," ",502],["T_VARIABLE","$this",502],["T_OBJECT_OPERATOR","->",502],["T_STRING","escapeFieldName",502],"(",["T_VARIABLE","$key",502],")",";",["T_WHITESPACE","\n        ",502],["T_VARIABLE","$cond",503],["T_WHITESPACE"," ",503],"=",["T_WHITESPACE"," ",503],["T_VARIABLE","$this",503],["T_OBJECT_OPERATOR","->",503],["T_STRING","idsEqualCondition",503],"(",["T_VARIABLE","$ids",503],")",";",["T_WHITESPACE","\n        ",503],["T_VARIABLE","$table",504],["T_WHITESPACE"," ",504],"=",["T_WHITESPACE"," ",504],["T_VARIABLE","$this",504],["T_OBJECT_OPERATOR","->",504],["T_STRING","escapeTableName",504],"(",["T_VARIABLE","$table",504],")",";",["T_WHITESPACE","\n        ",504],["T_VARIABLE","$sql",505],["T_WHITESPACE"," ",505],"=",["T_WHITESPACE"," ",505],"\"",["T_ENCAPSED_AND_WHITESPACE","DELETE FROM ",505],["T_CURLY_OPEN","{",505],["T_VARIABLE","$table",505],"}",["T_ENCAPSED_AND_WHITESPACE"," WHERE ",505],["T_CURLY_OPEN","{",505],["T_VARIABLE","$key",505],"}",["T_ENCAPSED_AND_WHITESPACE"," ",505],["T_CURLY_OPEN","{",505],["T_VARIABLE","$cond",505],"}","\"",";",["T_WHITESPACE","\n        ",505],["T_RETURN","return",506],["T_WHITESPACE"," ",506],["T_VARIABLE","$this",506],["T_OBJECT_OPERATOR","->",506],["T_STRING","query",506],"(",["T_VARIABLE","$sql",506],")",";",["T_WHITESPACE","\n    ",506],"}",["T_WHITESPACE","\n\n    ",507],["T_DOC_COMMENT","\/**\n     * Count items in table by condition\n     * @param string $table\n     * @param string $condition ex: \"a>0\"\n     * @return int\n     *\/",509],["T_WHITESPACE","\n    ",514],["T_PUBLIC","public",515],["T_WHITESPACE"," ",515],["T_FUNCTION","function",515],["T_WHITESPACE"," ",515],["T_STRING","simpleCount",515],"(",["T_VARIABLE","$table",515],",",["T_WHITESPACE"," ",515],["T_VARIABLE","$condition",515],")",["T_WHITESPACE"," ",515],"{",["T_WHITESPACE","\n        ",515],["T_VARIABLE","$sql",516],["T_WHITESPACE"," ",516],"=",["T_WHITESPACE"," ",516],"\"",["T_ENCAPSED_AND_WHITESPACE","SELECT count(*) AS `cnt` WHERE ",516],["T_CURLY_OPEN","{",516],["T_VARIABLE","$condition",516],"}","\"",";",["T_WHITESPACE","\n        ",516],["T_VARIABLE","$data",517],["T_WHITESPACE"," ",517],"=",["T_WHITESPACE"," ",517],["T_VARIABLE","$this",517],["T_OBJECT_OPERATOR","->",517],["T_STRING","fetchOne",517],"(",["T_VARIABLE","$sql",517],")",";",["T_WHITESPACE","\n        ",517],["T_IF","if",518],"(",["T_EMPTY","empty",518],"(",["T_VARIABLE","$data",518],"[",["T_CONSTANT_ENCAPSED_STRING","'cnt'",518],"]",")",")",["T_WHITESPACE"," ",518],"{",["T_WHITESPACE","\n            ",518],["T_RETURN","return",519],["T_WHITESPACE"," ",519],["T_LNUMBER","0",519],";",["T_WHITESPACE","\n        ",519],"}",["T_WHITESPACE","\n        ",520],["T_RETURN","return",521],["T_WHITESPACE"," ",521],["T_STRING","intval",521],"(",["T_VARIABLE","$data",521],"[",["T_CONSTANT_ENCAPSED_STRING","'cnt'",521],"]",")",";",["T_WHITESPACE","\n\n    ",521],"}",["T_WHITESPACE","\n    \n    ",523],["T_PUBLIC","public",525],["T_WHITESPACE"," ",525],["T_FUNCTION","function",525],["T_WHITESPACE"," ",525],["T_STRING","lastInsertId",525],"(",")",["T_WHITESPACE","\n    ",525],"{",["T_WHITESPACE","\n        ",526],["T_VARIABLE","$sql",527],["T_WHITESPACE"," ",527],"=",["T_WHITESPACE"," ",527],["T_CONSTANT_ENCAPSED_STRING","\"SELECT LAST_INSERT_ID() as `id`\"",527],";",["T_WHITESPACE","\n        ",527],["T_VARIABLE","$data",528],["T_WHITESPACE"," ",528],"=",["T_WHITESPACE"," ",528],["T_VARIABLE","$this",528],["T_OBJECT_OPERATOR","->",528],["T_STRING","fetchOne",528],"(",["T_VARIABLE","$sql",528],")",";",["T_WHITESPACE","\n        ",528],["T_RETURN","return",529],["T_WHITESPACE"," ",529],["T_VARIABLE","$data",529],"[",["T_CONSTANT_ENCAPSED_STRING","'id'",529],"]",";",["T_WHITESPACE","        \n    ",529],"}",["T_WHITESPACE","\n\n",530],"}",["T_WHITESPACE","\n",532]]
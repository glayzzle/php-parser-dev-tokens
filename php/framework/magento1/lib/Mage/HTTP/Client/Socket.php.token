[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Magento\n *\n * NOTICE OF LICENSE\n *\n * This source file is subject to the Open Software License (OSL 3.0)\n * that is bundled with this package in the file LICENSE.txt.\n * It is also available through the world-wide-web at this URL:\n * http:\/\/opensource.org\/licenses\/osl-3.0.php\n * If you did not receive a copy of the license and are unable to\n * obtain it through the world-wide-web, please send an email\n * to license@magento.com so we can send you a copy immediately.\n *\n * DISCLAIMER\n *\n * Do not edit or add to this file if you wish to upgrade Magento to newer\n * versions in the future. If you wish to customize Magento for your\n * needs please refer to http:\/\/www.magento.com for more information.\n *\n * @category    Mage\n * @package     Mage_HTTP\n * @copyright  Copyright (c) 2006-2016 X.commerce, Inc. and affiliates (http:\/\/www.magento.com)\n * @license    http:\/\/opensource.org\/licenses\/osl-3.0.php  Open Software License (OSL 3.0)\n *\/",2],["T_WHITESPACE","\n\n",25],["T_DOC_COMMENT","\/**\n * Class to work with HTTP protocol using sockets\n *\n * @category    Mage\n * @package     Mage_Connect\n * @author      Magento Core Team <core@magentocommerce.com>\n *\/",27],["T_WHITESPACE","\n",33],["T_CLASS","class",34],["T_WHITESPACE"," ",34],["T_STRING","Mage_HTTP_Client_Socket",34],["T_WHITESPACE","\n    ",34],["T_IMPLEMENTS","implements",35],["T_WHITESPACE"," ",35],["T_STRING","Mage_HTTP_IClient",35],["T_WHITESPACE","\n",35],"{",["T_WHITESPACE","\n    ",36],["T_DOC_COMMENT","\/**\n     * Hostname\n     * @var string\n     *\/",37],["T_WHITESPACE","\n    ",40],["T_PRIVATE","private",41],["T_WHITESPACE"," ",41],["T_VARIABLE","$_host",41],["T_WHITESPACE"," ",41],"=",["T_WHITESPACE"," ",41],["T_CONSTANT_ENCAPSED_STRING","'localhost'",41],";",["T_WHITESPACE","\n\n    ",41],["T_DOC_COMMENT","\/**\n     * Port\n     * @var int\n     *\/",43],["T_WHITESPACE","\n    ",46],["T_PRIVATE","private",47],["T_WHITESPACE"," ",47],["T_VARIABLE","$_port",47],["T_WHITESPACE"," ",47],"=",["T_WHITESPACE"," ",47],["T_LNUMBER","80",47],";",["T_WHITESPACE","\n\n    ",47],["T_DOC_COMMENT","\/**\n     * Stream resource\n     * @var object\n     *\/",49],["T_WHITESPACE","\n    ",52],["T_PRIVATE","private",53],["T_WHITESPACE"," ",53],["T_VARIABLE","$_sock",53],["T_WHITESPACE"," ",53],"=",["T_WHITESPACE"," ",53],["T_STRING","null",53],";",["T_WHITESPACE","\n\n    ",53],["T_DOC_COMMENT","\/**\n     * Request headers\n     * @var array\n     *\/",55],["T_WHITESPACE","\n    ",58],["T_PRIVATE","private",59],["T_WHITESPACE"," ",59],["T_VARIABLE","$_headers",59],["T_WHITESPACE"," ",59],"=",["T_WHITESPACE"," ",59],["T_ARRAY","array",59],"(",")",";",["T_WHITESPACE","\n\n\n    ",59],["T_DOC_COMMENT","\/**\n     * Fields for POST method - hash\n     * @var array\n     *\/",62],["T_WHITESPACE","\n    ",65],["T_PRIVATE","private",66],["T_WHITESPACE"," ",66],["T_VARIABLE","$_postFields",66],["T_WHITESPACE"," ",66],"=",["T_WHITESPACE"," ",66],["T_ARRAY","array",66],"(",")",";",["T_WHITESPACE","\n\n    ",66],["T_DOC_COMMENT","\/**\n     * Request cookies\n     * @var array\n     *\/",68],["T_WHITESPACE","\n    ",71],["T_PRIVATE","private",72],["T_WHITESPACE"," ",72],["T_VARIABLE","$_cookies",72],["T_WHITESPACE"," ",72],"=",["T_WHITESPACE"," ",72],["T_ARRAY","array",72],"(",")",";",["T_WHITESPACE","\n\n    ",72],["T_DOC_COMMENT","\/**\n     * Response headers\n     * @var array\n     *\/",74],["T_WHITESPACE","\n    ",77],["T_PRIVATE","private",78],["T_WHITESPACE"," ",78],["T_VARIABLE","$_responseHeaders",78],["T_WHITESPACE"," ",78],"=",["T_WHITESPACE"," ",78],["T_ARRAY","array",78],"(",")",";",["T_WHITESPACE","\n\n    ",78],["T_DOC_COMMENT","\/**\n     * Response body\n     * @var string\n     *\/",80],["T_WHITESPACE","\n    ",83],["T_PRIVATE","private",84],["T_WHITESPACE"," ",84],["T_VARIABLE","$_responseBody",84],["T_WHITESPACE"," ",84],"=",["T_WHITESPACE"," ",84],["T_CONSTANT_ENCAPSED_STRING","''",84],";",["T_WHITESPACE","\n\n    ",84],["T_DOC_COMMENT","\/**\n     * Response status\n     * @var int\n     *\/",86],["T_WHITESPACE","\n    ",89],["T_PRIVATE","private",90],["T_WHITESPACE"," ",90],["T_VARIABLE","$_responseStatus",90],["T_WHITESPACE"," ",90],"=",["T_WHITESPACE"," ",90],["T_LNUMBER","0",90],";",["T_WHITESPACE","\n\n\n    ",90],["T_DOC_COMMENT","\/**\n     * Request timeout\n     * @var int\n     *\/",93],["T_WHITESPACE","\n    ",96],["T_PRIVATE","private",97],["T_WHITESPACE"," ",97],["T_VARIABLE","$_timeout",97],["T_WHITESPACE"," ",97],"=",["T_WHITESPACE"," ",97],["T_LNUMBER","300",97],";",["T_WHITESPACE","\n\n    ",97],["T_DOC_COMMENT","\/**\n     * TODO\n     * @var int\n     *\/",99],["T_WHITESPACE","\n    ",102],["T_PRIVATE","private",103],["T_WHITESPACE"," ",103],["T_VARIABLE","$_redirectCount",103],["T_WHITESPACE"," ",103],"=",["T_WHITESPACE"," ",103],["T_LNUMBER","0",103],";",["T_WHITESPACE","\n\n\n    ",103],["T_DOC_COMMENT","\/**\n     * Set request timeout, msec\n     *\n     * @param int $value\n     *\/",106],["T_WHITESPACE","\n    ",110],["T_PUBLIC","public",111],["T_WHITESPACE"," ",111],["T_FUNCTION","function",111],["T_WHITESPACE"," ",111],["T_STRING","setTimeout",111],"(",["T_VARIABLE","$value",111],")",["T_WHITESPACE","\n    ",111],"{",["T_WHITESPACE","\n        ",112],["T_VARIABLE","$this",113],["T_OBJECT_OPERATOR","->",113],["T_STRING","_timeout",113],["T_WHITESPACE"," ",113],"=",["T_WHITESPACE"," ",113],["T_INT_CAST","(int)",113],["T_WHITESPACE"," ",113],["T_VARIABLE","$value",113],";",["T_WHITESPACE","\n    ",113],"}",["T_WHITESPACE","\n\n    ",114],["T_DOC_COMMENT","\/**\n     * Constructor\n     * @param string $host\n     * @param int $port\n     *\/",116],["T_WHITESPACE","\n    ",120],["T_PUBLIC","public",121],["T_WHITESPACE"," ",121],["T_FUNCTION","function",121],["T_WHITESPACE"," ",121],["T_STRING","__construct",121],"(",["T_VARIABLE","$host",121],["T_WHITESPACE"," ",121],"=",["T_WHITESPACE"," ",121],["T_STRING","null",121],",",["T_WHITESPACE"," ",121],["T_VARIABLE","$port",121],["T_WHITESPACE"," ",121],"=",["T_WHITESPACE"," ",121],["T_LNUMBER","80",121],")",["T_WHITESPACE","\n    ",121],"{",["T_WHITESPACE","\n        ",122],["T_IF","if",123],"(",["T_VARIABLE","$host",123],")",["T_WHITESPACE"," ",123],"{",["T_WHITESPACE","\n            ",123],["T_VARIABLE","$this",124],["T_OBJECT_OPERATOR","->",124],["T_STRING","connect",124],"(",["T_VARIABLE","$host",124],",",["T_WHITESPACE"," ",124],["T_INT_CAST","(int)",124],["T_WHITESPACE"," ",124],["T_VARIABLE","$port",124],")",";",["T_WHITESPACE","\n        ",124],"}",["T_WHITESPACE","\n    ",125],"}",["T_WHITESPACE","\n\n    ",126],["T_DOC_COMMENT","\/**\n     * Set connection params\n     *\n     * @param string $host\n     * @param int $port\n     *\/",128],["T_WHITESPACE","\n    ",133],["T_PUBLIC","public",134],["T_WHITESPACE"," ",134],["T_FUNCTION","function",134],["T_WHITESPACE"," ",134],["T_STRING","connect",134],"(",["T_VARIABLE","$host",134],",",["T_WHITESPACE"," ",134],["T_VARIABLE","$port",134],["T_WHITESPACE"," ",134],"=",["T_WHITESPACE"," ",134],["T_LNUMBER","80",134],")",["T_WHITESPACE","\n    ",134],"{",["T_WHITESPACE","\n        ",135],["T_VARIABLE","$this",136],["T_OBJECT_OPERATOR","->",136],["T_STRING","_host",136],["T_WHITESPACE"," ",136],"=",["T_WHITESPACE"," ",136],["T_VARIABLE","$host",136],";",["T_WHITESPACE","\n        ",136],["T_VARIABLE","$this",137],["T_OBJECT_OPERATOR","->",137],["T_STRING","_port",137],["T_WHITESPACE"," ",137],"=",["T_WHITESPACE"," ",137],["T_INT_CAST","(int)",137],["T_WHITESPACE"," ",137],["T_VARIABLE","$port",137],";",["T_WHITESPACE","\n\n    ",137],"}",["T_WHITESPACE","\n\n    ",139],["T_DOC_COMMENT","\/**\n     * Disconnect\n     *\/",141],["T_WHITESPACE","\n    ",143],["T_PUBLIC","public",144],["T_WHITESPACE"," ",144],["T_FUNCTION","function",144],["T_WHITESPACE"," ",144],["T_STRING","disconnect",144],"(",")",["T_WHITESPACE","\n    ",144],"{",["T_WHITESPACE","\n        ",145],"@",["T_STRING","fclose",146],"(",["T_VARIABLE","$this",146],["T_OBJECT_OPERATOR","->",146],["T_STRING","_sock",146],")",";",["T_WHITESPACE","\n    ",146],"}",["T_WHITESPACE","\n\n    ",147],["T_DOC_COMMENT","\/**\n     * Set headers from hash\n\n     * @param array $headers\n     *\/",149],["T_WHITESPACE","\n    ",153],["T_PUBLIC","public",154],["T_WHITESPACE"," ",154],["T_FUNCTION","function",154],["T_WHITESPACE"," ",154],["T_STRING","setHeaders",154],"(",["T_VARIABLE","$headers",154],")",["T_WHITESPACE","\n    ",154],"{",["T_WHITESPACE","\n        ",155],["T_VARIABLE","$this",156],["T_OBJECT_OPERATOR","->",156],["T_STRING","_headers",156],["T_WHITESPACE"," ",156],"=",["T_WHITESPACE"," ",156],["T_VARIABLE","$headers",156],";",["T_WHITESPACE","\n\n    ",156],"}",["T_WHITESPACE","\n\n    ",158],["T_DOC_COMMENT","\/**\n     * Add header\n     *\n     * @param $name name, ex. \"Location\"\n     * @param $value value ex. \"http:\/\/google.com\"\n     *\/",160],["T_WHITESPACE","\n    ",165],["T_PUBLIC","public",166],["T_WHITESPACE"," ",166],["T_FUNCTION","function",166],["T_WHITESPACE"," ",166],["T_STRING","addHeader",166],"(",["T_VARIABLE","$name",166],",",["T_WHITESPACE"," ",166],["T_VARIABLE","$value",166],")",["T_WHITESPACE","\n    ",166],"{",["T_WHITESPACE","\n        ",167],["T_VARIABLE","$this",168],["T_OBJECT_OPERATOR","->",168],["T_STRING","_headers",168],"[",["T_VARIABLE","$name",168],"]",["T_WHITESPACE"," ",168],"=",["T_WHITESPACE"," ",168],["T_VARIABLE","$value",168],";",["T_WHITESPACE","\n\n    ",168],"}",["T_WHITESPACE","\n\n    ",170],["T_DOC_COMMENT","\/**\n     * Remove specified header\n     *\n     * @param string $name\n     *\/",172],["T_WHITESPACE","\n    ",176],["T_PUBLIC","public",177],["T_WHITESPACE"," ",177],["T_FUNCTION","function",177],["T_WHITESPACE"," ",177],["T_STRING","removeHeader",177],"(",["T_VARIABLE","$name",177],")",["T_WHITESPACE","\n    ",177],"{",["T_WHITESPACE","\n        ",178],["T_UNSET","unset",179],"(",["T_VARIABLE","$this",179],["T_OBJECT_OPERATOR","->",179],["T_STRING","_headers",179],"[",["T_VARIABLE","$name",179],"]",")",";",["T_WHITESPACE","\n\n    ",179],"}",["T_WHITESPACE","\n\n    ",181],["T_DOC_COMMENT","\/**\n     * Authorization: Basic header\n     * Login credentials support\n     *\n     * @param string $login username\n     * @param string $pass password\n     *\/",183],["T_WHITESPACE","\n    ",189],["T_PUBLIC","public",190],["T_WHITESPACE"," ",190],["T_FUNCTION","function",190],["T_WHITESPACE"," ",190],["T_STRING","setCredentials",190],"(",["T_VARIABLE","$login",190],",",["T_WHITESPACE"," ",190],["T_VARIABLE","$pass",190],")",["T_WHITESPACE","\n    ",190],"{",["T_WHITESPACE","\n        ",191],["T_VARIABLE","$val",192],"=",["T_WHITESPACE"," ",192],["T_STRING","base64_encode",192],"(",["T_WHITESPACE"," ",192],"\"",["T_VARIABLE","$login",192],["T_ENCAPSED_AND_WHITESPACE",":",192],["T_VARIABLE","$pass",192],"\"",["T_WHITESPACE"," ",192],")",";",["T_WHITESPACE","\n        ",192],["T_VARIABLE","$this",193],["T_OBJECT_OPERATOR","->",193],["T_STRING","addHeader",193],"(",["T_WHITESPACE"," ",193],["T_CONSTANT_ENCAPSED_STRING","\"Authorization\"",193],",",["T_WHITESPACE"," ",193],"\"",["T_ENCAPSED_AND_WHITESPACE","Basic ",193],["T_VARIABLE","$val",193],"\"",["T_WHITESPACE"," ",193],")",";",["T_WHITESPACE","\n    ",193],"}",["T_WHITESPACE","\n\n    ",194],["T_DOC_COMMENT","\/**\n     * Add cookie\n     *\n     * @param string $name\n     * @param string $value\n     *\/",196],["T_WHITESPACE","\n    ",201],["T_PUBLIC","public",202],["T_WHITESPACE"," ",202],["T_FUNCTION","function",202],["T_WHITESPACE"," ",202],["T_STRING","addCookie",202],"(",["T_VARIABLE","$name",202],",",["T_WHITESPACE"," ",202],["T_VARIABLE","$value",202],")",["T_WHITESPACE","\n    ",202],"{",["T_WHITESPACE","\n        ",203],["T_VARIABLE","$this",204],["T_OBJECT_OPERATOR","->",204],["T_STRING","_cookies",204],"[",["T_VARIABLE","$name",204],"]",["T_WHITESPACE"," ",204],"=",["T_WHITESPACE"," ",204],["T_VARIABLE","$value",204],";",["T_WHITESPACE","\n    ",204],"}",["T_WHITESPACE","\n\n    ",205],["T_DOC_COMMENT","\/**\n     * Remove cookie\n     *\n     * @param string $name\n     *\/",207],["T_WHITESPACE","\n    ",211],["T_PUBLIC","public",212],["T_WHITESPACE"," ",212],["T_FUNCTION","function",212],["T_WHITESPACE"," ",212],["T_STRING","removeCookie",212],"(",["T_VARIABLE","$name",212],")",["T_WHITESPACE","\n    ",212],"{",["T_WHITESPACE","\n        ",213],["T_UNSET","unset",214],"(",["T_VARIABLE","$this",214],["T_OBJECT_OPERATOR","->",214],["T_STRING","_cookies",214],"[",["T_VARIABLE","$name",214],"]",")",";",["T_WHITESPACE","\n    ",214],"}",["T_WHITESPACE","\n\n    ",215],["T_DOC_COMMENT","\/**\n     * Set cookies array\n     *\n     * @param array $cookies\n     *\/",217],["T_WHITESPACE","\n    ",221],["T_PUBLIC","public",222],["T_WHITESPACE"," ",222],["T_FUNCTION","function",222],["T_WHITESPACE"," ",222],["T_STRING","setCookies",222],"(",["T_VARIABLE","$cookies",222],")",["T_WHITESPACE","\n    ",222],"{",["T_WHITESPACE","\n        ",223],["T_VARIABLE","$this",224],["T_OBJECT_OPERATOR","->",224],["T_STRING","_cookies",224],["T_WHITESPACE"," ",224],"=",["T_WHITESPACE"," ",224],["T_VARIABLE","$cookies",224],";",["T_WHITESPACE","\n    ",224],"}",["T_WHITESPACE","\n\n    ",225],["T_DOC_COMMENT","\/**\n     * Clear cookies\n     *\/",227],["T_WHITESPACE","\n    ",229],["T_PUBLIC","public",230],["T_WHITESPACE"," ",230],["T_FUNCTION","function",230],["T_WHITESPACE"," ",230],["T_STRING","removeCookies",230],"(",")",["T_WHITESPACE","\n    ",230],"{",["T_WHITESPACE","\n        ",231],["T_VARIABLE","$this",232],["T_OBJECT_OPERATOR","->",232],["T_STRING","setCookies",232],"(",["T_ARRAY","array",232],"(",")",")",";",["T_WHITESPACE","\n    ",232],"}",["T_WHITESPACE","\n\n\n    ",233],["T_DOC_COMMENT","\/**\n     * Make GET request\n     *\n     * @param string $uri full uri path\n     *\/",236],["T_WHITESPACE","\n    ",240],["T_PUBLIC","public",241],["T_WHITESPACE"," ",241],["T_FUNCTION","function",241],["T_WHITESPACE"," ",241],["T_STRING","get",241],"(",["T_VARIABLE","$uri",241],")",["T_WHITESPACE","\n    ",241],"{",["T_WHITESPACE","\n        ",242],["T_VARIABLE","$this",243],["T_OBJECT_OPERATOR","->",243],["T_STRING","makeRequest",243],"(",["T_CONSTANT_ENCAPSED_STRING","\"GET\"",243],",",["T_VARIABLE","$this",243],["T_OBJECT_OPERATOR","->",243],["T_STRING","parseUrl",243],"(",["T_VARIABLE","$uri",243],")",")",";",["T_WHITESPACE","\n    ",243],"}",["T_WHITESPACE","\n\n    ",244],["T_DOC_COMMENT","\/**\n     * Set host, port from full url\n     * and return relative url\n     *\n     * @param string $uri ex. http:\/\/google.com\/index.php?a=b\n     * @return string ex. \/index.php?a=b\n     *\/",246],["T_WHITESPACE","\n    ",252],["T_PROTECTED","protected",253],["T_WHITESPACE"," ",253],["T_FUNCTION","function",253],["T_WHITESPACE"," ",253],["T_STRING","parseUrl",253],"(",["T_VARIABLE","$uri",253],")",["T_WHITESPACE","\n    ",253],"{",["T_WHITESPACE","\n        ",254],["T_VARIABLE","$parts",255],["T_WHITESPACE"," ",255],"=",["T_WHITESPACE"," ",255],["T_STRING","parse_url",255],"(",["T_VARIABLE","$uri",255],")",";",["T_WHITESPACE","\n        ",255],["T_IF","if",256],"(","!",["T_EMPTY","empty",256],"(",["T_VARIABLE","$parts",256],"[",["T_CONSTANT_ENCAPSED_STRING","'user'",256],"]",")",["T_WHITESPACE"," ",256],["T_BOOLEAN_AND","&&",256],["T_WHITESPACE"," ",256],"!",["T_EMPTY","empty",256],"(",["T_VARIABLE","$parts",256],"[",["T_CONSTANT_ENCAPSED_STRING","'pass'",256],"]",")",")",["T_WHITESPACE"," ",256],"{",["T_WHITESPACE","\n            ",256],["T_VARIABLE","$this",257],["T_OBJECT_OPERATOR","->",257],["T_STRING","setCredentials",257],"(",["T_VARIABLE","$parts",257],"[",["T_CONSTANT_ENCAPSED_STRING","'user'",257],"]",",",["T_WHITESPACE"," ",257],["T_VARIABLE","$parts",257],"[",["T_CONSTANT_ENCAPSED_STRING","'pass'",257],"]",")",";",["T_WHITESPACE","\n        ",257],"}",["T_WHITESPACE","\n        ",258],["T_IF","if",259],"(","!",["T_EMPTY","empty",259],"(",["T_VARIABLE","$parts",259],"[",["T_CONSTANT_ENCAPSED_STRING","'port'",259],"]",")",")",["T_WHITESPACE"," ",259],"{",["T_WHITESPACE","\n            ",259],["T_VARIABLE","$this",260],["T_OBJECT_OPERATOR","->",260],["T_STRING","_port",260],["T_WHITESPACE"," ",260],"=",["T_WHITESPACE"," ",260],["T_INT_CAST","(int)",260],["T_WHITESPACE"," ",260],["T_VARIABLE","$parts",260],"[",["T_CONSTANT_ENCAPSED_STRING","'port'",260],"]",";",["T_WHITESPACE","\n        ",260],"}",["T_WHITESPACE","\n\n        ",261],["T_IF","if",263],"(","!",["T_EMPTY","empty",263],"(",["T_VARIABLE","$parts",263],"[",["T_CONSTANT_ENCAPSED_STRING","'host'",263],"]",")",")",["T_WHITESPACE"," ",263],"{",["T_WHITESPACE","\n            ",263],["T_VARIABLE","$this",264],["T_OBJECT_OPERATOR","->",264],["T_STRING","_host",264],["T_WHITESPACE"," ",264],"=",["T_WHITESPACE"," ",264],["T_VARIABLE","$parts",264],"[",["T_CONSTANT_ENCAPSED_STRING","'host'",264],"]",";",["T_WHITESPACE","\n        ",264],"}",["T_WHITESPACE"," ",265],["T_ELSE","else",265],["T_WHITESPACE"," ",265],"{",["T_WHITESPACE","\n            ",265],["T_THROW","throw",266],["T_WHITESPACE"," ",266],["T_NEW","new",266],["T_WHITESPACE"," ",266],["T_STRING","InvalidArgumentException",266],"(",["T_CONSTANT_ENCAPSED_STRING","\"Uri doesn't contain host part\"",266],")",";",["T_WHITESPACE","\n        ",266],"}",["T_WHITESPACE","\n\n\n        ",267],["T_IF","if",270],"(","!",["T_EMPTY","empty",270],"(",["T_VARIABLE","$parts",270],"[",["T_CONSTANT_ENCAPSED_STRING","'path'",270],"]",")",")",["T_WHITESPACE"," ",270],"{",["T_WHITESPACE","\n            ",270],["T_VARIABLE","$requestUri",271],["T_WHITESPACE"," ",271],"=",["T_WHITESPACE"," ",271],["T_VARIABLE","$parts",271],"[",["T_CONSTANT_ENCAPSED_STRING","'path'",271],"]",";",["T_WHITESPACE","\n        ",271],"}",["T_WHITESPACE"," ",272],["T_ELSE","else",272],["T_WHITESPACE"," ",272],"{",["T_WHITESPACE","\n            ",272],["T_THROW","throw",273],["T_WHITESPACE"," ",273],["T_NEW","new",273],["T_WHITESPACE"," ",273],["T_STRING","InvalidArgumentException",273],"(",["T_CONSTANT_ENCAPSED_STRING","\"Uri doesn't contain path part\"",273],")",";",["T_WHITESPACE","\n        ",273],"}",["T_WHITESPACE","\n        ",274],["T_IF","if",275],"(","!",["T_EMPTY","empty",275],"(",["T_VARIABLE","$parts",275],"[",["T_CONSTANT_ENCAPSED_STRING","'query'",275],"]",")",")",["T_WHITESPACE"," ",275],"{",["T_WHITESPACE","\n            ",275],["T_VARIABLE","$requestUri",276],["T_WHITESPACE"," ",276],["T_CONCAT_EQUAL",".=",276],["T_WHITESPACE"," ",276],["T_CONSTANT_ENCAPSED_STRING","\"?\"",276],".",["T_VARIABLE","$parts",276],"[",["T_CONSTANT_ENCAPSED_STRING","'query'",276],"]",";",["T_WHITESPACE","\n        ",276],"}",["T_WHITESPACE","\n        ",277],["T_RETURN","return",278],["T_WHITESPACE"," ",278],["T_VARIABLE","$requestUri",278],";",["T_WHITESPACE","\n    ",278],"}",["T_WHITESPACE","\n\n    ",279],["T_DOC_COMMENT","\/**\n     * Make POST request\n     *\/",281],["T_WHITESPACE","\n    ",283],["T_PUBLIC","public",284],["T_WHITESPACE"," ",284],["T_FUNCTION","function",284],["T_WHITESPACE"," ",284],["T_STRING","post",284],"(",["T_VARIABLE","$uri",284],",",["T_WHITESPACE"," ",284],["T_VARIABLE","$params",284],")",["T_WHITESPACE","\n    ",284],"{",["T_WHITESPACE","\n        ",285],["T_VARIABLE","$this",286],["T_OBJECT_OPERATOR","->",286],["T_STRING","makeRequest",286],"(",["T_CONSTANT_ENCAPSED_STRING","\"POST\"",286],",",["T_WHITESPACE"," ",286],["T_VARIABLE","$this",286],["T_OBJECT_OPERATOR","->",286],["T_STRING","parseUrl",286],"(",["T_VARIABLE","$uri",286],")",",",["T_WHITESPACE"," ",286],["T_VARIABLE","$params",286],")",";",["T_WHITESPACE","\n    ",286],"}",["T_WHITESPACE","\n\n\n    ",287],["T_DOC_COMMENT","\/**\n     * Get response headers\n     *\n     * @return array\n     *\/",290],["T_WHITESPACE","\n    ",294],["T_PUBLIC","public",295],["T_WHITESPACE"," ",295],["T_FUNCTION","function",295],["T_WHITESPACE"," ",295],["T_STRING","getHeaders",295],"(",")",["T_WHITESPACE","\n    ",295],"{",["T_WHITESPACE","\n        ",296],["T_RETURN","return",297],["T_WHITESPACE"," ",297],["T_VARIABLE","$this",297],["T_OBJECT_OPERATOR","->",297],["T_STRING","_responseHeaders",297],";",["T_WHITESPACE","\n    ",297],"}",["T_WHITESPACE","\n\n\n    ",298],["T_DOC_COMMENT","\/**\n     * Get response body\n     *\n     * @return string\n     *\/",301],["T_WHITESPACE","\n    ",305],["T_PUBLIC","public",306],["T_WHITESPACE"," ",306],["T_FUNCTION","function",306],["T_WHITESPACE"," ",306],["T_STRING","getBody",306],"(",")",["T_WHITESPACE","\n    ",306],"{",["T_WHITESPACE","\n        ",307],["T_RETURN","return",308],["T_WHITESPACE"," ",308],["T_VARIABLE","$this",308],["T_OBJECT_OPERATOR","->",308],["T_STRING","_responseBody",308],";",["T_WHITESPACE","\n    ",308],"}",["T_WHITESPACE","\n\n    ",309],["T_DOC_COMMENT","\/**\n     * Get cookies response hash\n     *\n     * @return array\n     *\/",311],["T_WHITESPACE","\n    ",315],["T_PUBLIC","public",316],["T_WHITESPACE"," ",316],["T_FUNCTION","function",316],["T_WHITESPACE"," ",316],["T_STRING","getCookies",316],"(",")",["T_WHITESPACE","\n    ",316],"{",["T_WHITESPACE","\n        ",317],["T_IF","if",318],"(",["T_EMPTY","empty",318],"(",["T_VARIABLE","$this",318],["T_OBJECT_OPERATOR","->",318],["T_STRING","_responseHeaders",318],"[",["T_CONSTANT_ENCAPSED_STRING","'Set-Cookie'",318],"]",")",")",["T_WHITESPACE"," ",318],"{",["T_WHITESPACE","\n            ",318],["T_RETURN","return",319],["T_WHITESPACE"," ",319],["T_ARRAY","array",319],"(",")",";",["T_WHITESPACE","\n        ",319],"}",["T_WHITESPACE","\n        ",320],["T_VARIABLE","$out",321],["T_WHITESPACE"," ",321],"=",["T_WHITESPACE"," ",321],["T_ARRAY","array",321],"(",")",";",["T_WHITESPACE","\n        ",321],["T_FOREACH","foreach",322],"(",["T_WHITESPACE"," ",322],["T_VARIABLE","$this",322],["T_OBJECT_OPERATOR","->",322],["T_STRING","_responseHeaders",322],"[",["T_CONSTANT_ENCAPSED_STRING","'Set-Cookie'",322],"]",["T_WHITESPACE"," ",322],["T_AS","as",322],["T_WHITESPACE"," ",322],["T_VARIABLE","$row",322],")",["T_WHITESPACE"," ",322],"{",["T_WHITESPACE","\n            ",322],["T_VARIABLE","$values",323],["T_WHITESPACE"," ",323],"=",["T_WHITESPACE"," ",323],["T_STRING","explode",323],"(",["T_CONSTANT_ENCAPSED_STRING","\"; \"",323],",",["T_WHITESPACE"," ",323],["T_VARIABLE","$row",323],")",";",["T_WHITESPACE","\n            ",323],["T_VARIABLE","$c",324],["T_WHITESPACE"," ",324],"=",["T_WHITESPACE"," ",324],["T_STRING","count",324],"(",["T_VARIABLE","$values",324],")",";",["T_WHITESPACE","\n            ",324],["T_IF","if",325],"(","!",["T_VARIABLE","$c",325],")",["T_WHITESPACE"," ",325],"{",["T_WHITESPACE","\n                ",325],["T_CONTINUE","continue",326],";",["T_WHITESPACE","\n            ",326],"}",["T_WHITESPACE","\n            ",327],["T_LIST","list",328],"(",["T_VARIABLE","$key",328],",",["T_WHITESPACE"," ",328],["T_VARIABLE","$val",328],")",["T_WHITESPACE"," ",328],"=",["T_WHITESPACE"," ",328],["T_STRING","explode",328],"(",["T_CONSTANT_ENCAPSED_STRING","\"=\"",328],",",["T_WHITESPACE"," ",328],["T_VARIABLE","$values",328],"[",["T_LNUMBER","0",328],"]",")",";",["T_WHITESPACE","\n            ",328],["T_IF","if",329],"(",["T_STRING","is_null",329],"(",["T_VARIABLE","$val",329],")",")",["T_WHITESPACE"," ",329],"{",["T_WHITESPACE","\n                ",329],["T_CONTINUE","continue",330],";",["T_WHITESPACE","\n            ",330],"}",["T_WHITESPACE","\n            ",331],["T_VARIABLE","$out",332],"[",["T_STRING","trim",332],"(",["T_VARIABLE","$key",332],")","]",["T_WHITESPACE"," ",332],"=",["T_WHITESPACE"," ",332],["T_STRING","trim",332],"(",["T_VARIABLE","$val",332],")",";",["T_WHITESPACE","\n        ",332],"}",["T_WHITESPACE","\n        ",333],["T_RETURN","return",334],["T_WHITESPACE"," ",334],["T_VARIABLE","$out",334],";",["T_WHITESPACE","\n    ",334],"}",["T_WHITESPACE","\n\n\n    ",335],["T_DOC_COMMENT","\/**\n     * Get cookies array with details\n     * (domain, expire time etc)\n     * @return array\n     *\/",338],["T_WHITESPACE","\n    ",342],["T_PUBLIC","public",343],["T_WHITESPACE"," ",343],["T_FUNCTION","function",343],["T_WHITESPACE"," ",343],["T_STRING","getCookiesFull",343],"(",")",["T_WHITESPACE","\n    ",343],"{",["T_WHITESPACE","\n        ",344],["T_IF","if",345],"(",["T_EMPTY","empty",345],"(",["T_VARIABLE","$this",345],["T_OBJECT_OPERATOR","->",345],["T_STRING","_responseHeaders",345],"[",["T_CONSTANT_ENCAPSED_STRING","'Set-Cookie'",345],"]",")",")",["T_WHITESPACE"," ",345],"{",["T_WHITESPACE","\n            ",345],["T_RETURN","return",346],["T_WHITESPACE"," ",346],["T_ARRAY","array",346],"(",")",";",["T_WHITESPACE","\n        ",346],"}",["T_WHITESPACE","\n        ",347],["T_VARIABLE","$out",348],["T_WHITESPACE"," ",348],"=",["T_WHITESPACE"," ",348],["T_ARRAY","array",348],"(",")",";",["T_WHITESPACE","\n        ",348],["T_FOREACH","foreach",349],"(",["T_WHITESPACE"," ",349],["T_VARIABLE","$this",349],["T_OBJECT_OPERATOR","->",349],["T_STRING","_responseHeaders",349],"[",["T_CONSTANT_ENCAPSED_STRING","'Set-Cookie'",349],"]",["T_WHITESPACE"," ",349],["T_AS","as",349],["T_WHITESPACE"," ",349],["T_VARIABLE","$row",349],")",["T_WHITESPACE"," ",349],"{",["T_WHITESPACE","\n            ",349],["T_VARIABLE","$values",350],["T_WHITESPACE"," ",350],"=",["T_WHITESPACE"," ",350],["T_STRING","explode",350],"(",["T_CONSTANT_ENCAPSED_STRING","\"; \"",350],",",["T_WHITESPACE"," ",350],["T_VARIABLE","$row",350],")",";",["T_WHITESPACE","\n            ",350],["T_VARIABLE","$c",351],["T_WHITESPACE"," ",351],"=",["T_WHITESPACE"," ",351],["T_STRING","count",351],"(",["T_VARIABLE","$values",351],")",";",["T_WHITESPACE","\n            ",351],["T_IF","if",352],"(","!",["T_VARIABLE","$c",352],")",["T_WHITESPACE"," ",352],"{",["T_WHITESPACE","\n                ",352],["T_CONTINUE","continue",353],";",["T_WHITESPACE","\n            ",353],"}",["T_WHITESPACE","\n            ",354],["T_LIST","list",355],"(",["T_VARIABLE","$key",355],",",["T_WHITESPACE"," ",355],["T_VARIABLE","$val",355],")",["T_WHITESPACE"," ",355],"=",["T_WHITESPACE"," ",355],["T_STRING","explode",355],"(",["T_CONSTANT_ENCAPSED_STRING","\"=\"",355],",",["T_WHITESPACE"," ",355],["T_VARIABLE","$values",355],"[",["T_LNUMBER","0",355],"]",")",";",["T_WHITESPACE","\n            ",355],["T_IF","if",356],"(",["T_STRING","is_null",356],"(",["T_VARIABLE","$val",356],")",")",["T_WHITESPACE"," ",356],"{",["T_WHITESPACE","\n                ",356],["T_CONTINUE","continue",357],";",["T_WHITESPACE","\n            ",357],"}",["T_WHITESPACE","\n            ",358],["T_VARIABLE","$out",359],"[",["T_STRING","trim",359],"(",["T_VARIABLE","$key",359],")","]",["T_WHITESPACE"," ",359],"=",["T_WHITESPACE"," ",359],["T_ARRAY","array",359],"(",["T_CONSTANT_ENCAPSED_STRING","'value'",359],["T_DOUBLE_ARROW","=>",359],["T_STRING","trim",359],"(",["T_VARIABLE","$val",359],")",")",";",["T_WHITESPACE","\n            ",359],["T_STRING","array_shift",360],"(",["T_VARIABLE","$values",360],")",";",["T_WHITESPACE","\n            ",360],["T_VARIABLE","$c",361],["T_DEC","--",361],";",["T_WHITESPACE","\n            ",361],["T_IF","if",362],"(","!",["T_VARIABLE","$c",362],")",["T_WHITESPACE"," ",362],"{",["T_WHITESPACE","\n                ",362],["T_CONTINUE","continue",363],";",["T_WHITESPACE","\n            ",363],"}",["T_WHITESPACE","\n            ",364],["T_FOR","for",365],"(",["T_VARIABLE","$i",365],["T_WHITESPACE"," ",365],"=",["T_WHITESPACE"," ",365],["T_LNUMBER","0",365],";",["T_WHITESPACE"," ",365],["T_VARIABLE","$i",365],"<",["T_VARIABLE","$c",365],";",["T_WHITESPACE"," ",365],["T_VARIABLE","$i",365],["T_INC","++",365],")",["T_WHITESPACE"," ",365],"{",["T_WHITESPACE","\n                ",365],["T_LIST","list",366],"(",["T_VARIABLE","$subkey",366],",",["T_WHITESPACE"," ",366],["T_VARIABLE","$val",366],")",["T_WHITESPACE"," ",366],"=",["T_WHITESPACE"," ",366],["T_STRING","explode",366],"(",["T_CONSTANT_ENCAPSED_STRING","\"=\"",366],",",["T_WHITESPACE"," ",366],["T_VARIABLE","$values",366],"[",["T_VARIABLE","$i",366],"]",")",";",["T_WHITESPACE","\n                ",366],["T_VARIABLE","$out",367],"[",["T_STRING","trim",367],"(",["T_VARIABLE","$key",367],")","]","[",["T_STRING","trim",367],"(",["T_VARIABLE","$subkey",367],")","]",["T_WHITESPACE"," ",367],"=",["T_WHITESPACE"," ",367],["T_STRING","trim",367],"(",["T_VARIABLE","$val",367],")",";",["T_WHITESPACE","\n            ",367],"}",["T_WHITESPACE","\n        ",368],"}",["T_WHITESPACE","\n        ",369],["T_RETURN","return",370],["T_WHITESPACE"," ",370],["T_VARIABLE","$out",370],";",["T_WHITESPACE","\n    ",370],"}",["T_WHITESPACE","\n\n    ",371],["T_DOC_COMMENT","\/**\n     * Process response headers\n     *\/",373],["T_WHITESPACE","\n    ",375],["T_PROTECTED","protected",376],["T_WHITESPACE"," ",376],["T_FUNCTION","function",376],["T_WHITESPACE"," ",376],["T_STRING","processResponseHeaders",376],"(",")",["T_WHITESPACE","\n    ",376],"{",["T_WHITESPACE","\n        ",377],["T_VARIABLE","$crlf",378],["T_WHITESPACE"," ",378],"=",["T_WHITESPACE"," ",378],["T_CONSTANT_ENCAPSED_STRING","\"\\r\\n\"",378],";",["T_WHITESPACE","\n        ",378],["T_VARIABLE","$this",379],["T_OBJECT_OPERATOR","->",379],["T_STRING","_responseHeaders",379],["T_WHITESPACE"," ",379],"=",["T_WHITESPACE"," ",379],["T_ARRAY","array",379],"(",")",";",["T_WHITESPACE","\n        ",379],["T_WHILE","while",380],["T_WHITESPACE"," ",380],"(","!",["T_STRING","feof",380],"(",["T_VARIABLE","$this",380],["T_OBJECT_OPERATOR","->",380],["T_STRING","_sock",380],")",")",["T_WHITESPACE"," ",380],"{",["T_WHITESPACE","\n            ",380],["T_VARIABLE","$line",381],["T_WHITESPACE"," ",381],"=",["T_WHITESPACE"," ",381],["T_STRING","fgets",381],"(",["T_VARIABLE","$this",381],["T_OBJECT_OPERATOR","->",381],["T_STRING","_sock",381],",",["T_WHITESPACE"," ",381],["T_LNUMBER","1024",381],")",";",["T_WHITESPACE","\n            ",381],["T_IF","if",382],"(",["T_VARIABLE","$line",382],["T_WHITESPACE"," ",382],["T_IS_IDENTICAL","===",382],["T_WHITESPACE"," ",382],["T_VARIABLE","$crlf",382],")",["T_WHITESPACE"," ",382],"{",["T_WHITESPACE","\n                ",382],["T_RETURN","return",383],";",["T_WHITESPACE","\n            ",383],"}",["T_WHITESPACE","\n            ",384],["T_VARIABLE","$name",385],["T_WHITESPACE"," ",385],"=",["T_WHITESPACE"," ",385],["T_VARIABLE","$value",385],["T_WHITESPACE"," ",385],"=",["T_WHITESPACE"," ",385],["T_CONSTANT_ENCAPSED_STRING","''",385],";",["T_WHITESPACE","\n            ",385],["T_VARIABLE","$out",386],["T_WHITESPACE"," ",386],"=",["T_WHITESPACE"," ",386],["T_STRING","explode",386],"(",["T_CONSTANT_ENCAPSED_STRING","\": \"",386],",",["T_WHITESPACE"," ",386],["T_STRING","trim",386],"(",["T_VARIABLE","$line",386],")",",",["T_WHITESPACE"," ",386],["T_LNUMBER","2",386],")",";",["T_WHITESPACE","\n            ",386],["T_IF","if",387],"(",["T_STRING","count",387],"(",["T_VARIABLE","$out",387],")",["T_WHITESPACE"," ",387],["T_IS_EQUAL","==",387],["T_WHITESPACE"," ",387],["T_LNUMBER","2",387],")",["T_WHITESPACE"," ",387],"{",["T_WHITESPACE","\n                ",387],["T_VARIABLE","$name",388],["T_WHITESPACE"," ",388],"=",["T_WHITESPACE"," ",388],["T_VARIABLE","$out",388],"[",["T_LNUMBER","0",388],"]",";",["T_WHITESPACE","\n                ",388],["T_VARIABLE","$value",389],["T_WHITESPACE"," ",389],"=",["T_WHITESPACE"," ",389],["T_VARIABLE","$out",389],"[",["T_LNUMBER","1",389],"]",";",["T_WHITESPACE","\n            ",389],"}",["T_WHITESPACE","\n            ",390],["T_IF","if",391],"(","!",["T_EMPTY","empty",391],"(",["T_VARIABLE","$value",391],")",")",["T_WHITESPACE"," ",391],"{",["T_WHITESPACE","\n                ",391],["T_IF","if",392],"(",["T_VARIABLE","$name",392],["T_WHITESPACE"," ",392],["T_IS_EQUAL","==",392],["T_WHITESPACE"," ",392],["T_CONSTANT_ENCAPSED_STRING","\"Set-Cookie\"",392],")",["T_WHITESPACE"," ",392],"{",["T_WHITESPACE","\n                    ",392],["T_IF","if",393],"(","!",["T_ISSET","isset",393],"(",["T_VARIABLE","$this",393],["T_OBJECT_OPERATOR","->",393],["T_STRING","_responseHeaders",393],"[",["T_VARIABLE","$name",393],"]",")",")",["T_WHITESPACE"," ",393],"{",["T_WHITESPACE","\n                        ",393],["T_VARIABLE","$this",394],["T_OBJECT_OPERATOR","->",394],["T_STRING","_responseHeaders",394],"[",["T_VARIABLE","$name",394],"]",["T_WHITESPACE"," ",394],"=",["T_WHITESPACE"," ",394],["T_ARRAY","array",394],"(",")",";",["T_WHITESPACE","\n                    ",394],"}",["T_WHITESPACE","\n                    ",395],["T_VARIABLE","$this",396],["T_OBJECT_OPERATOR","->",396],["T_STRING","_responseHeaders",396],"[",["T_VARIABLE","$name",396],"]","[","]",["T_WHITESPACE"," ",396],"=",["T_WHITESPACE"," ",396],["T_VARIABLE","$value",396],";",["T_WHITESPACE","\n                ",396],"}",["T_WHITESPACE"," ",397],["T_ELSE","else",397],["T_WHITESPACE"," ",397],"{",["T_WHITESPACE","\n                    ",397],["T_VARIABLE","$this",398],["T_OBJECT_OPERATOR","->",398],["T_STRING","_responseHeaders",398],"[",["T_VARIABLE","$name",398],"]",["T_WHITESPACE"," ",398],"=",["T_WHITESPACE"," ",398],["T_VARIABLE","$value",398],";",["T_WHITESPACE","\n                ",398],"}",["T_WHITESPACE","\n            ",399],"}",["T_WHITESPACE","\n        ",400],"}",["T_WHITESPACE","\n    ",401],"}",["T_WHITESPACE","\n\n    ",402],["T_DOC_COMMENT","\/**\n     * Process response body\n     *\/",404],["T_WHITESPACE","\n    ",406],["T_PROTECTED","protected",407],["T_WHITESPACE"," ",407],["T_FUNCTION","function",407],["T_WHITESPACE"," ",407],["T_STRING","processResponseBody",407],"(",")",["T_WHITESPACE","\n    ",407],"{",["T_WHITESPACE","\n        ",408],["T_VARIABLE","$this",409],["T_OBJECT_OPERATOR","->",409],["T_STRING","_responseBody",409],["T_WHITESPACE"," ",409],"=",["T_WHITESPACE"," ",409],["T_CONSTANT_ENCAPSED_STRING","''",409],";",["T_WHITESPACE","\n\n        ",409],["T_WHILE","while",411],["T_WHITESPACE"," ",411],"(","!",["T_STRING","feof",411],"(",["T_VARIABLE","$this",411],["T_OBJECT_OPERATOR","->",411],["T_STRING","_sock",411],")",")",["T_WHITESPACE"," ",411],"{",["T_WHITESPACE","\n            ",411],["T_VARIABLE","$this",412],["T_OBJECT_OPERATOR","->",412],["T_STRING","_responseBody",412],["T_WHITESPACE"," ",412],["T_CONCAT_EQUAL",".=",412],["T_WHITESPACE"," ",412],"@",["T_STRING","fread",412],"(",["T_VARIABLE","$this",412],["T_OBJECT_OPERATOR","->",412],["T_STRING","_sock",412],",",["T_WHITESPACE"," ",412],["T_LNUMBER","1024",412],")",";",["T_WHITESPACE","\n        ",412],"}",["T_WHITESPACE","\n    ",413],"}",["T_WHITESPACE","\n\n    ",414],["T_DOC_COMMENT","\/**\n     * Process response\n     *\/",416],["T_WHITESPACE","\n    ",418],["T_PROTECTED","protected",419],["T_WHITESPACE"," ",419],["T_FUNCTION","function",419],["T_WHITESPACE"," ",419],["T_STRING","processResponse",419],"(",")",["T_WHITESPACE","\n    ",419],"{",["T_WHITESPACE","\n        ",420],["T_VARIABLE","$response",421],["T_WHITESPACE"," ",421],"=",["T_WHITESPACE"," ",421],["T_CONSTANT_ENCAPSED_STRING","''",421],";",["T_WHITESPACE","\n        ",421],["T_VARIABLE","$responseLine",422],["T_WHITESPACE"," ",422],"=",["T_WHITESPACE"," ",422],["T_STRING","trim",422],"(",["T_STRING","fgets",422],"(",["T_VARIABLE","$this",422],["T_OBJECT_OPERATOR","->",422],["T_STRING","_sock",422],",",["T_WHITESPACE"," ",422],["T_LNUMBER","1024",422],")",")",";",["T_WHITESPACE","\n\n        ",422],["T_VARIABLE","$line",424],["T_WHITESPACE"," ",424],"=",["T_WHITESPACE"," ",424],["T_STRING","explode",424],"(",["T_CONSTANT_ENCAPSED_STRING","\" \"",424],",",["T_WHITESPACE"," ",424],["T_VARIABLE","$responseLine",424],",",["T_WHITESPACE"," ",424],["T_LNUMBER","3",424],")",";",["T_WHITESPACE","\n        ",424],["T_IF","if",425],"(",["T_STRING","count",425],"(",["T_VARIABLE","$line",425],")",["T_WHITESPACE"," ",425],["T_IS_NOT_EQUAL","!=",425],["T_WHITESPACE"," ",425],["T_LNUMBER","3",425],")",["T_WHITESPACE"," ",425],"{",["T_WHITESPACE","\n            ",425],["T_RETURN","return",426],["T_WHITESPACE"," ",426],["T_VARIABLE","$this",426],["T_OBJECT_OPERATOR","->",426],["T_STRING","doError",426],"(",["T_CONSTANT_ENCAPSED_STRING","\"Invalid response line returned from server: \"",426],".",["T_VARIABLE","$responseLine",426],")",";",["T_WHITESPACE","\n        ",426],"}",["T_WHITESPACE","\n        ",427],["T_VARIABLE","$this",428],["T_OBJECT_OPERATOR","->",428],["T_STRING","_responseStatus",428],["T_WHITESPACE"," ",428],"=",["T_WHITESPACE"," ",428],["T_STRING","intval",428],"(",["T_VARIABLE","$line",428],"[",["T_LNUMBER","1",428],"]",")",";",["T_WHITESPACE","\n        ",428],["T_VARIABLE","$this",429],["T_OBJECT_OPERATOR","->",429],["T_STRING","processResponseHeaders",429],"(",")",";",["T_WHITESPACE","\n\n        ",429],["T_VARIABLE","$this",431],["T_OBJECT_OPERATOR","->",431],["T_STRING","processRedirect",431],"(",")",";",["T_WHITESPACE","\n\n        ",431],["T_VARIABLE","$this",433],["T_OBJECT_OPERATOR","->",433],["T_STRING","processResponseBody",433],"(",")",";",["T_WHITESPACE","\n    ",433],"}",["T_WHITESPACE","\n\n\n    ",434],["T_DOC_COMMENT","\/**\n     * Process redirect\n     *\/",437],["T_WHITESPACE","\n    ",439],["T_PROTECTED","protected",440],["T_WHITESPACE"," ",440],["T_FUNCTION","function",440],["T_WHITESPACE"," ",440],["T_STRING","processRedirect",440],"(",")",["T_WHITESPACE","\n    ",440],"{",["T_WHITESPACE","\n        ",441],["T_COMMENT","\/\/ TODO: implement redircets support\n",442],["T_WHITESPACE","    ",443],"}",["T_WHITESPACE","\n\n\n    ",443],["T_DOC_COMMENT","\/**\n     * Get response status code\n     * @see lib\/Mage\/HTTP\/Mage_HTTP_Client#getStatus()\n     *\/",446],["T_WHITESPACE","\n    ",449],["T_PUBLIC","public",450],["T_WHITESPACE"," ",450],["T_FUNCTION","function",450],["T_WHITESPACE"," ",450],["T_STRING","getStatus",450],"(",")",["T_WHITESPACE","\n    ",450],"{",["T_WHITESPACE","\n        ",451],["T_RETURN","return",452],["T_WHITESPACE"," ",452],["T_VARIABLE","$this",452],["T_OBJECT_OPERATOR","->",452],["T_STRING","_responseStatus",452],";",["T_WHITESPACE","\n    ",452],"}",["T_WHITESPACE","\n\n    ",453],["T_DOC_COMMENT","\/**\n     * Make request\n     * @param string $method\n     * @param string $uri\n     * @param array $params\n     * @return null\n     *\/",455],["T_WHITESPACE","\n    ",461],["T_PROTECTED","protected",462],["T_WHITESPACE"," ",462],["T_FUNCTION","function",462],["T_WHITESPACE"," ",462],["T_STRING","makeRequest",462],"(",["T_VARIABLE","$method",462],",",["T_WHITESPACE"," ",462],["T_VARIABLE","$uri",462],",",["T_WHITESPACE"," ",462],["T_VARIABLE","$params",462],["T_WHITESPACE"," ",462],"=",["T_WHITESPACE"," ",462],["T_ARRAY","array",462],"(",")",")",["T_WHITESPACE","\n    ",462],"{",["T_WHITESPACE","\n        ",463],["T_VARIABLE","$errno",464],["T_WHITESPACE"," ",464],"=",["T_WHITESPACE"," ",464],["T_VARIABLE","$errstr",464],["T_WHITESPACE"," ",464],"=",["T_WHITESPACE"," ",464],["T_CONSTANT_ENCAPSED_STRING","''",464],";",["T_WHITESPACE","\n        ",464],["T_VARIABLE","$this",465],["T_OBJECT_OPERATOR","->",465],["T_STRING","_sock",465],["T_WHITESPACE"," ",465],"=",["T_WHITESPACE"," ",465],"@",["T_STRING","fsockopen",465],"(",["T_VARIABLE","$this",465],["T_OBJECT_OPERATOR","->",465],["T_STRING","_host",465],",",["T_WHITESPACE"," ",465],["T_VARIABLE","$this",465],["T_OBJECT_OPERATOR","->",465],["T_STRING","_port",465],",",["T_WHITESPACE"," ",465],["T_VARIABLE","$errno",465],",",["T_WHITESPACE"," ",465],["T_VARIABLE","$errstr",465],",",["T_WHITESPACE"," ",465],["T_VARIABLE","$this",465],["T_OBJECT_OPERATOR","->",465],["T_STRING","_timeout",465],")",";",["T_WHITESPACE","\n        ",465],["T_IF","if",466],"(","!",["T_VARIABLE","$this",466],["T_OBJECT_OPERATOR","->",466],["T_STRING","_sock",466],")",["T_WHITESPACE"," ",466],"{",["T_WHITESPACE","\n            ",466],["T_RETURN","return",467],["T_WHITESPACE"," ",467],["T_VARIABLE","$this",467],["T_OBJECT_OPERATOR","->",467],["T_STRING","doError",467],"(",["T_STRING","sprintf",467],"(",["T_CONSTANT_ENCAPSED_STRING","\"[errno: %d] %s\"",467],",",["T_WHITESPACE"," ",467],["T_VARIABLE","$errno",467],",",["T_WHITESPACE"," ",467],["T_VARIABLE","$errstr",467],")",")",";",["T_WHITESPACE","\n        ",467],"}",["T_WHITESPACE","\n\n        ",468],["T_VARIABLE","$crlf",470],["T_WHITESPACE"," ",470],"=",["T_WHITESPACE"," ",470],["T_CONSTANT_ENCAPSED_STRING","\"\\r\\n\"",470],";",["T_WHITESPACE","\n        ",470],["T_VARIABLE","$isPost",471],["T_WHITESPACE"," ",471],"=",["T_WHITESPACE"," ",471],["T_VARIABLE","$method",471],["T_WHITESPACE"," ",471],["T_IS_EQUAL","==",471],["T_WHITESPACE"," ",471],["T_CONSTANT_ENCAPSED_STRING","\"POST\"",471],";",["T_WHITESPACE","\n\n        ",471],["T_VARIABLE","$appendHeaders",473],["T_WHITESPACE"," ",473],"=",["T_WHITESPACE"," ",473],["T_ARRAY","array",473],"(",")",";",["T_WHITESPACE","\n        ",473],["T_VARIABLE","$paramsStr",474],["T_WHITESPACE"," ",474],"=",["T_WHITESPACE"," ",474],["T_STRING","false",474],";",["T_WHITESPACE","\n        ",474],["T_IF","if",475],"(",["T_VARIABLE","$isPost",475],["T_WHITESPACE"," ",475],["T_BOOLEAN_AND","&&",475],["T_WHITESPACE"," ",475],["T_STRING","count",475],"(",["T_VARIABLE","$params",475],")",")",["T_WHITESPACE"," ",475],"{",["T_WHITESPACE","\n            ",475],["T_VARIABLE","$paramsStr",476],["T_WHITESPACE"," ",476],"=",["T_WHITESPACE"," ",476],["T_STRING","http_build_query",476],"(",["T_VARIABLE","$params",476],")",";",["T_WHITESPACE","\n            ",476],["T_VARIABLE","$appendHeaders",477],"[",["T_CONSTANT_ENCAPSED_STRING","'Content-type'",477],"]",["T_WHITESPACE"," ",477],"=",["T_WHITESPACE"," ",477],["T_CONSTANT_ENCAPSED_STRING","'application\/x-www-form-urlencoded'",477],";",["T_WHITESPACE","\n            ",477],["T_VARIABLE","$appendHeaders",478],"[",["T_CONSTANT_ENCAPSED_STRING","'Content-length'",478],"]",["T_WHITESPACE"," ",478],"=",["T_WHITESPACE"," ",478],["T_STRING","strlen",478],"(",["T_VARIABLE","$paramsStr",478],")",";",["T_WHITESPACE","\n        ",478],"}",["T_WHITESPACE","\n\n        ",479],["T_VARIABLE","$out",481],["T_WHITESPACE"," ",481],"=",["T_WHITESPACE"," ",481],"\"",["T_CURLY_OPEN","{",481],["T_VARIABLE","$method",481],"}",["T_ENCAPSED_AND_WHITESPACE"," ",481],["T_CURLY_OPEN","{",481],["T_VARIABLE","$uri",481],"}",["T_ENCAPSED_AND_WHITESPACE"," HTTP\/1.1",481],["T_CURLY_OPEN","{",481],["T_VARIABLE","$crlf",481],"}","\"",";",["T_WHITESPACE","\n        ",481],["T_VARIABLE","$out",482],["T_WHITESPACE"," ",482],["T_CONCAT_EQUAL",".=",482],["T_WHITESPACE"," ",482],["T_VARIABLE","$this",482],["T_OBJECT_OPERATOR","->",482],["T_STRING","headersToString",482],"(",["T_VARIABLE","$appendHeaders",482],")",";",["T_WHITESPACE","\n        ",482],["T_VARIABLE","$out",483],["T_WHITESPACE"," ",483],["T_CONCAT_EQUAL",".=",483],["T_WHITESPACE"," ",483],["T_VARIABLE","$crlf",483],";",["T_WHITESPACE","\n        ",483],["T_IF","if",484],"(",["T_VARIABLE","$paramsStr",484],")",["T_WHITESPACE"," ",484],"{",["T_WHITESPACE","\n            ",484],["T_VARIABLE","$out",485],["T_WHITESPACE"," ",485],["T_CONCAT_EQUAL",".=",485],["T_WHITESPACE"," ",485],["T_VARIABLE","$paramsStr",485],".",["T_VARIABLE","$crlf",485],";",["T_WHITESPACE","\n        ",485],"}",["T_WHITESPACE","\n\n        ",486],["T_STRING","fwrite",488],"(",["T_VARIABLE","$this",488],["T_OBJECT_OPERATOR","->",488],["T_STRING","_sock",488],",",["T_WHITESPACE"," ",488],["T_VARIABLE","$out",488],")",";",["T_WHITESPACE","\n        ",488],["T_VARIABLE","$this",489],["T_OBJECT_OPERATOR","->",489],["T_STRING","processResponse",489],"(",")",";",["T_WHITESPACE","\n    ",489],"}",["T_WHITESPACE","\n\n    ",490],["T_DOC_COMMENT","\/**\n     * Throw error excpetion\n     * @param $string\n     * @throws Exception\n     *\/",492],["T_WHITESPACE","\n    ",496],["T_PUBLIC","public",497],["T_WHITESPACE"," ",497],["T_FUNCTION","function",497],["T_WHITESPACE"," ",497],["T_STRING","doError",497],"(",["T_VARIABLE","$string",497],")",["T_WHITESPACE","\n    ",497],"{",["T_WHITESPACE","\n        ",498],["T_THROW","throw",499],["T_WHITESPACE"," ",499],["T_NEW","new",499],["T_WHITESPACE"," ",499],["T_STRING","Exception",499],"(",["T_VARIABLE","$string",499],")",";",["T_WHITESPACE","\n    ",499],"}",["T_WHITESPACE","\n\n    ",500],["T_DOC_COMMENT","\/**\n     * Convert headers hash to string\n     * @param $delimiter\n     * @param $append\n     * @return string\n     *\/",502],["T_WHITESPACE","\n    ",507],["T_PROTECTED","protected",508],["T_WHITESPACE"," ",508],["T_FUNCTION","function",508],["T_WHITESPACE"," ",508],["T_STRING","headersToString",508],"(",["T_VARIABLE","$append",508],["T_WHITESPACE"," ",508],"=",["T_WHITESPACE"," ",508],["T_ARRAY","array",508],"(",")",")",["T_WHITESPACE","\n    ",508],"{",["T_WHITESPACE","\n        ",509],["T_VARIABLE","$headers",510],["T_WHITESPACE"," ",510],"=",["T_WHITESPACE"," ",510],["T_ARRAY","array",510],"(",")",";",["T_WHITESPACE","\n        ",510],["T_VARIABLE","$headers",511],"[",["T_CONSTANT_ENCAPSED_STRING","\"Host\"",511],"]",["T_WHITESPACE"," ",511],"=",["T_WHITESPACE"," ",511],["T_VARIABLE","$this",511],["T_OBJECT_OPERATOR","->",511],["T_STRING","_host",511],";",["T_WHITESPACE","\n        ",511],["T_VARIABLE","$headers",512],"[",["T_CONSTANT_ENCAPSED_STRING","'Connection'",512],"]",["T_WHITESPACE"," ",512],"=",["T_WHITESPACE"," ",512],["T_CONSTANT_ENCAPSED_STRING","\"close\"",512],";",["T_WHITESPACE","\n        ",512],["T_VARIABLE","$headers",513],["T_WHITESPACE"," ",513],"=",["T_WHITESPACE"," ",513],["T_STRING","array_merge",513],"(",["T_VARIABLE","$headers",513],",",["T_WHITESPACE"," ",513],["T_VARIABLE","$this",513],["T_OBJECT_OPERATOR","->",513],["T_STRING","_headers",513],",",["T_WHITESPACE"," ",513],["T_VARIABLE","$append",513],")",";",["T_WHITESPACE","\n        ",513],["T_VARIABLE","$str",514],["T_WHITESPACE"," ",514],"=",["T_WHITESPACE"," ",514],["T_ARRAY","array",514],"(",")",";",["T_WHITESPACE","\n        ",514],["T_FOREACH","foreach",515],["T_WHITESPACE"," ",515],"(",["T_VARIABLE","$headers",515],["T_WHITESPACE"," ",515],["T_AS","as",515],["T_WHITESPACE"," ",515],["T_VARIABLE","$k",515],["T_DOUBLE_ARROW","=>",515],["T_VARIABLE","$v",515],")",["T_WHITESPACE"," ",515],"{",["T_WHITESPACE","\n            ",515],["T_VARIABLE","$str",516],["T_WHITESPACE"," ",516],"[","]","=",["T_WHITESPACE"," ",516],"\"",["T_VARIABLE","$k",516],["T_ENCAPSED_AND_WHITESPACE",": ",516],["T_VARIABLE","$v",516],["T_ENCAPSED_AND_WHITESPACE","\\r\\n",516],"\"",";",["T_WHITESPACE","\n        ",516],"}",["T_WHITESPACE","\n        ",517],["T_RETURN","return",518],["T_WHITESPACE"," ",518],["T_STRING","implode",518],"(",["T_VARIABLE","$str",518],")",";",["T_WHITESPACE","\n    ",518],"}",["T_WHITESPACE","\n\n    ",519],["T_DOC_COMMENT","\/**\n     * TODO\n     *\/",521],["T_WHITESPACE","\n    ",523],["T_PUBLIC","public",524],["T_WHITESPACE"," ",524],["T_FUNCTION","function",524],["T_WHITESPACE"," ",524],["T_STRING","setOptions",524],"(",["T_VARIABLE","$arr",524],")",["T_WHITESPACE","\n    ",524],"{",["T_WHITESPACE","\n        ",525],["T_COMMENT","\/\/ Stub\n",526],["T_WHITESPACE","    ",527],"}",["T_WHITESPACE","\n\n    ",527],["T_DOC_COMMENT","\/**\n     * TODO\n     *\/",529],["T_WHITESPACE","\n    ",531],["T_PUBLIC","public",532],["T_WHITESPACE"," ",532],["T_FUNCTION","function",532],["T_WHITESPACE"," ",532],["T_STRING","setOption",532],"(",["T_VARIABLE","$name",532],",",["T_WHITESPACE"," ",532],["T_VARIABLE","$value",532],")",["T_WHITESPACE","\n    ",532],"{",["T_WHITESPACE","\n        ",533],["T_COMMENT","\/\/ Stub\n",534],["T_WHITESPACE","    ",535],"}",["T_WHITESPACE","\n\n",535],"}",["T_WHITESPACE","\n",537]]
[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Magento\n *\n * NOTICE OF LICENSE\n *\n * This source file is subject to the Open Software License (OSL 3.0)\n * that is bundled with this package in the file LICENSE.txt.\n * It is also available through the world-wide-web at this URL:\n * http:\/\/opensource.org\/licenses\/osl-3.0.php\n * If you did not receive a copy of the license and are unable to\n * obtain it through the world-wide-web, please send an email\n * to license@magento.com so we can send you a copy immediately.\n *\n * DISCLAIMER\n *\n * Do not edit or add to this file if you wish to upgrade Magento to newer\n * versions in the future. If you wish to customize Magento for your\n * needs please refer to http:\/\/www.magento.com for more information.\n *\n * @category    Mage\n * @package     Mage_Connect\n * @copyright  Copyright (c) 2006-2016 X.commerce, Inc. and affiliates (http:\/\/www.magento.com)\n * @license    http:\/\/opensource.org\/licenses\/osl-3.0.php  Open Software License (OSL 3.0)\n *\/",2],["T_WHITESPACE","\n\n",25],["T_CLASS","class",27],["T_WHITESPACE"," ",27],["T_STRING","Mage_Connect_Structures_Graph",27],["T_WHITESPACE","\n",27],"{",["T_WHITESPACE","\n    ",28],["T_PROTECTED","protected",29],["T_WHITESPACE"," ",29],["T_VARIABLE","$_nodes",29],["T_WHITESPACE"," ",29],"=",["T_WHITESPACE"," ",29],["T_ARRAY","array",29],"(",")",";",["T_WHITESPACE","\n    ",29],["T_PROTECTED","protected",30],["T_WHITESPACE"," ",30],["T_VARIABLE","$_directed",30],["T_WHITESPACE"," ",30],"=",["T_WHITESPACE"," ",30],["T_STRING","false",30],";",["T_WHITESPACE","\n    ",30],["T_PROTECTED","protected",31],["T_WHITESPACE"," ",31],["T_VARIABLE","$_nodeClassName",31],["T_WHITESPACE"," ",31],"=",["T_WHITESPACE"," ",31],["T_CONSTANT_ENCAPSED_STRING","'Mage_Connect_Structures_Node'",31],";",["T_WHITESPACE","\n\n    ",31],["T_CONST","const",33],["T_WHITESPACE"," ",33],["T_STRING","ACYCLIC_VISITED_KEY",33],["T_WHITESPACE"," ",33],"=",["T_WHITESPACE"," ",33],["T_CONSTANT_ENCAPSED_STRING","'acyclic-test-visited'",33],";",["T_WHITESPACE","\n    ",33],["T_CONST","const",34],["T_WHITESPACE"," ",34],["T_STRING","SORT_VISITED_KEY",34],["T_WHITESPACE"," ",34],"=",["T_WHITESPACE"," ",34],["T_CONSTANT_ENCAPSED_STRING","'topological-sort-visited'",34],";",["T_WHITESPACE","\n    ",34],["T_CONST","const",35],["T_WHITESPACE"," ",35],["T_STRING","SORT_LEVEL_KEY",35],["T_WHITESPACE"," ",35],"=",["T_WHITESPACE"," ",35],["T_CONSTANT_ENCAPSED_STRING","'topological-sort-level'",35],";",["T_WHITESPACE","\n     \n    ",35],["T_DOC_COMMENT","\/**\n     * Constructor\n     * @param bool $directed directed graph?\n     * @return void\n     *\/",37],["T_WHITESPACE","\n    ",41],["T_PUBLIC","public",42],["T_WHITESPACE"," ",42],["T_FUNCTION","function",42],["T_WHITESPACE"," ",42],["T_STRING","__construct",42],"(",["T_VARIABLE","$directed",42],["T_WHITESPACE"," ",42],"=",["T_WHITESPACE"," ",42],["T_STRING","true",42],")",["T_WHITESPACE","\n    ",42],"{",["T_WHITESPACE","\n        ",43],["T_VARIABLE","$this",44],["T_OBJECT_OPERATOR","->",44],["T_STRING","_directed",44],["T_WHITESPACE"," ",44],"=",["T_WHITESPACE"," ",44],["T_VARIABLE","$directed",44],";",["T_WHITESPACE","\n    ",44],"}",["T_WHITESPACE","\n\n\n    ",45],["T_DOC_COMMENT","\/**\n     * Is graph directed?\n     *\n     * @return bool\n     *\/",48],["T_WHITESPACE","\n    ",52],["T_PUBLIC","public",53],["T_WHITESPACE"," ",53],["T_FUNCTION","function",53],["T_WHITESPACE"," ",53],["T_STRING","isDirected",53],"(",")",["T_WHITESPACE","\n    ",53],"{",["T_WHITESPACE","\n        ",54],["T_RETURN","return",55],["T_WHITESPACE"," ",55],["T_BOOL_CAST","(boolean)",55],["T_WHITESPACE"," ",55],["T_VARIABLE","$this",55],["T_OBJECT_OPERATOR","->",55],["T_STRING","_directed",55],";",["T_WHITESPACE","\n    ",55],"}",["T_WHITESPACE","\n\n    ",56],["T_DOC_COMMENT","\/**\n     * Add node to list\n     *\n     * @param Mage_Connect_Structures_Graph_Node $newNode\n     * @return void\n     *\/",58],["T_WHITESPACE","\n    ",63],["T_PUBLIC","public",64],["T_WHITESPACE"," ",64],["T_FUNCTION","function",64],["T_WHITESPACE"," ",64],["T_STRING","addNode",64],"(","&",["T_VARIABLE","$newNode",64],")",["T_WHITESPACE","\n    ",64],"{",["T_WHITESPACE","\n        ",65],["T_IF","if",66],"(","!",["T_VARIABLE","$newNode",66],["T_WHITESPACE"," ",66],["T_INSTANCEOF","instanceof",66],["T_WHITESPACE"," ",66],["T_VARIABLE","$this",66],["T_OBJECT_OPERATOR","->",66],["T_STRING","_nodeClassName",66],")",["T_WHITESPACE"," ",66],"{",["T_WHITESPACE","\n            ",66],["T_THROW","throw",67],["T_WHITESPACE"," ",67],["T_NEW","new",67],["T_WHITESPACE"," ",67],["T_STRING","Exception",67],"(",["T_METHOD_C","__METHOD__",67],".",["T_CONSTANT_ENCAPSED_STRING","\" : invalid node class, should be instance of: \"",67],".",["T_VARIABLE","$this",67],["T_OBJECT_OPERATOR","->",67],["T_STRING","_nodeClassName",67],")",";",["T_WHITESPACE","\n        ",67],"}",["T_WHITESPACE","\n        ",68],["T_FOREACH","foreach",69],"(",["T_VARIABLE","$this",69],["T_OBJECT_OPERATOR","->",69],["T_STRING","_nodes",69],["T_WHITESPACE"," ",69],["T_AS","as",69],["T_WHITESPACE"," ",69],["T_VARIABLE","$key",69],["T_WHITESPACE"," ",69],["T_DOUBLE_ARROW","=>",69],["T_WHITESPACE"," ",69],["T_VARIABLE","$node",69],")",["T_WHITESPACE"," ",69],"{",["T_WHITESPACE","\n            ",69],["T_IF","if",70],"(",["T_VARIABLE","$newNode",70],["T_WHITESPACE"," ",70],["T_IS_IDENTICAL","===",70],["T_WHITESPACE"," ",70],["T_VARIABLE","$node",70],")",["T_WHITESPACE"," ",70],"{",["T_WHITESPACE","\n                ",70],["T_THROW","throw",71],["T_WHITESPACE"," ",71],["T_NEW","new",71],["T_WHITESPACE"," ",71],["T_STRING","Exception",71],"(",["T_METHOD_C","__METHOD__",71],".",["T_CONSTANT_ENCAPSED_STRING","\" : received duplicate object\"",71],")",";",["T_WHITESPACE","\n            ",71],"}",["T_WHITESPACE","\n        ",72],"}",["T_WHITESPACE","\n        ",73],["T_VARIABLE","$this",74],["T_OBJECT_OPERATOR","->",74],["T_STRING","_nodes",74],"[","]",["T_WHITESPACE"," ",74],"=","&",["T_WHITESPACE"," ",74],["T_VARIABLE","$newNode",74],";",["T_WHITESPACE","\n        ",74],["T_VARIABLE","$newNode",75],["T_OBJECT_OPERATOR","->",75],["T_STRING","setGraph",75],"(",["T_VARIABLE","$this",75],")",";",["T_WHITESPACE","\n    ",75],"}",["T_WHITESPACE","\n\n    ",76],["T_DOC_COMMENT","\/**\n     * Remove a Node from the Graph\n     * @param  Mage_Connect_Structures_Graph_Node  $node\n     *\/",78],["T_WHITESPACE","\n    ",81],["T_PUBLIC","public",82],["T_WHITESPACE"," ",82],["T_FUNCTION","function",82],["T_WHITESPACE"," ",82],["T_STRING","removeNode",82],"(","&",["T_VARIABLE","$node",82],")",["T_WHITESPACE","\n    ",82],"{",["T_WHITESPACE","\n\n    ",83],"}",["T_WHITESPACE","\n\n    ",85],["T_DOC_COMMENT","\/**\n     * Return set of nodes\n     * @return   array\n     *\/",87],["T_WHITESPACE","\n    ",90],["T_PUBLIC","public",91],["T_WHITESPACE"," ",91],["T_FUNCTION","function",91],["T_WHITESPACE"," ",91],"&",["T_STRING","getNodes",91],"(",")",["T_WHITESPACE","\n    ",91],"{",["T_WHITESPACE","\n        ",92],["T_RETURN","return",93],["T_WHITESPACE"," ",93],["T_VARIABLE","$this",93],["T_OBJECT_OPERATOR","->",93],["T_STRING","_nodes",93],";",["T_WHITESPACE","\n    ",93],"}",["T_WHITESPACE","\n\n    ",94],["T_DOC_COMMENT","\/**\n     * Is asyclic\n     * @return unknown_type\n     *\/",96],["T_WHITESPACE","\n    ",99],["T_PUBLIC","public",100],["T_WHITESPACE"," ",100],["T_FUNCTION","function",100],["T_WHITESPACE"," ",100],["T_STRING","isAcyclic",100],"(",")",["T_WHITESPACE","\n    ",100],"{",["T_WHITESPACE","\n        ",101],["T_IF","if",102],["T_WHITESPACE"," ",102],"(","!",["T_VARIABLE","$this",102],["T_OBJECT_OPERATOR","->",102],["T_STRING","isDirected",102],"(",")",")",["T_WHITESPACE"," ",102],"{",["T_WHITESPACE","\n            ",102],["T_RETURN","return",103],["T_WHITESPACE"," ",103],["T_STRING","false",103],";",["T_WHITESPACE","\n        ",103],"}",["T_WHITESPACE","\n        ",104],["T_RETURN","return",105],["T_WHITESPACE"," ",105],["T_STRING","self",105],["T_DOUBLE_COLON","::",105],["T_STRING","_isAcyclic",105],"(",["T_VARIABLE","$this",105],")",";",["T_WHITESPACE","\n    ",105],"}",["T_WHITESPACE","\n\n    ",106],["T_DOC_COMMENT","\/**\n     *\n     * This is a variant of Graph::inDegree which does\n     * not count nodes marked as visited.\n     *\n     * @return integer\n     *\/",108],["T_WHITESPACE","\n    ",114],["T_PROTECTED","protected",115],["T_WHITESPACE"," ",115],["T_STATIC","static",115],["T_WHITESPACE"," ",115],["T_FUNCTION","function",115],["T_WHITESPACE"," ",115],["T_STRING","_nonVisitedInDegree",115],"(","&",["T_VARIABLE","$node",115],",",["T_WHITESPACE"," ",115],["T_VARIABLE","$metadataKey",115],")",["T_WHITESPACE","\n    ",115],"{",["T_WHITESPACE","\n        ",116],["T_VARIABLE","$result",117],["T_WHITESPACE"," ",117],"=",["T_WHITESPACE"," ",117],["T_LNUMBER","0",117],";",["T_WHITESPACE","\n        ",117],["T_VARIABLE","$graphNodes",118],["T_WHITESPACE"," ",118],"=","&",["T_WHITESPACE"," ",118],["T_VARIABLE","$node",118],["T_OBJECT_OPERATOR","->",118],["T_STRING","getGraph",118],"(",")",["T_OBJECT_OPERATOR","->",118],["T_STRING","getNodes",118],"(",")",";",["T_WHITESPACE","\n        ",118],["T_FOREACH","foreach",119],["T_WHITESPACE"," ",119],"(",["T_STRING","array_keys",119],"(",["T_VARIABLE","$graphNodes",119],")",["T_WHITESPACE"," ",119],["T_AS","as",119],["T_WHITESPACE"," ",119],["T_VARIABLE","$key",119],")",["T_WHITESPACE"," ",119],"{",["T_WHITESPACE","\n            ",119],["T_IF","if",120],["T_WHITESPACE"," ",120],"(","(","!",["T_VARIABLE","$graphNodes",120],"[",["T_VARIABLE","$key",120],"]",["T_OBJECT_OPERATOR","->",120],["T_STRING","getMetadata",120],"(",["T_VARIABLE","$metadataKey",120],")",")",["T_WHITESPACE"," ",120],["T_BOOLEAN_AND","&&",120],["T_WHITESPACE"," ",120],["T_VARIABLE","$graphNodes",120],"[",["T_VARIABLE","$key",120],"]",["T_OBJECT_OPERATOR","->",120],["T_STRING","connectsTo",120],"(",["T_VARIABLE","$node",120],")",")",["T_WHITESPACE"," ",120],"{",["T_WHITESPACE","\n                ",120],["T_VARIABLE","$result",121],["T_INC","++",121],";",["T_WHITESPACE","\n            ",121],"}",["T_WHITESPACE","\n        ",122],"}",["T_WHITESPACE","\n        ",123],["T_RETURN","return",124],["T_WHITESPACE"," ",124],["T_VARIABLE","$result",124],";",["T_WHITESPACE","\n    ",124],"}",["T_WHITESPACE","\n\n    ",125],["T_DOC_COMMENT","\/**\n     * Is graph acyclic?\n     * @param $graph\n     * @return bool\n     *\/",127],["T_WHITESPACE","\n    ",131],["T_PROTECTED","protected",132],["T_WHITESPACE"," ",132],["T_STATIC","static",132],["T_WHITESPACE"," ",132],["T_FUNCTION","function",132],["T_WHITESPACE"," ",132],["T_STRING","_isAcyclic",132],"(","&",["T_VARIABLE","$graph",132],")",["T_WHITESPACE","\n    ",132],"{",["T_WHITESPACE","\n        ",133],["T_COMMENT","\/\/ Mark every node as not visited\n",134],["T_WHITESPACE","        ",135],["T_VARIABLE","$nodes",135],["T_WHITESPACE"," ",135],"=","&",["T_WHITESPACE"," ",135],["T_VARIABLE","$graph",135],["T_OBJECT_OPERATOR","->",135],["T_STRING","getNodes",135],"(",")",";",["T_WHITESPACE","\n        ",135],["T_VARIABLE","$nodeKeys",136],["T_WHITESPACE"," ",136],"=",["T_WHITESPACE"," ",136],["T_STRING","array_keys",136],"(",["T_VARIABLE","$nodes",136],")",";",["T_WHITESPACE","\n        ",136],["T_VARIABLE","$refGenerator",137],["T_WHITESPACE"," ",137],"=",["T_WHITESPACE"," ",137],["T_ARRAY","array",137],"(",")",";",["T_WHITESPACE","\n        ",137],["T_FOREACH","foreach",138],"(",["T_VARIABLE","$nodeKeys",138],["T_WHITESPACE"," ",138],["T_AS","as",138],["T_WHITESPACE"," ",138],["T_VARIABLE","$key",138],")",["T_WHITESPACE"," ",138],"{",["T_WHITESPACE","\n            ",138],["T_VARIABLE","$refGenerator",139],"[","]",["T_WHITESPACE"," ",139],"=",["T_WHITESPACE"," ",139],["T_STRING","false",139],";",["T_WHITESPACE","\n            ",139],["T_VARIABLE","$nodes",140],"[",["T_VARIABLE","$key",140],"]",["T_OBJECT_OPERATOR","->",140],["T_STRING","setMetadata",140],"(",["T_STRING","self",140],["T_DOUBLE_COLON","::",140],["T_STRING","ACYCLIC_VISITED_KEY",140],",",["T_WHITESPACE"," ",140],["T_VARIABLE","$refGenerator",140],"[",["T_STRING","sizeof",140],"(",["T_VARIABLE","$refGenerator",140],")",["T_WHITESPACE"," ",140],"-",["T_WHITESPACE"," ",140],["T_LNUMBER","1",140],"]",")",";",["T_WHITESPACE","\n        ",140],"}",["T_WHITESPACE","\n\n        ",141],["T_COMMENT","\/\/ Iteratively peel off leaf nodes\n",143],["T_WHITESPACE","        ",144],["T_DO","do",144],["T_WHITESPACE"," ",144],"{",["T_WHITESPACE","\n            ",144],["T_COMMENT","\/\/ Find out which nodes are leafs (excluding visited nodes)\n",145],["T_WHITESPACE","            ",146],["T_VARIABLE","$leafNodes",146],["T_WHITESPACE"," ",146],"=",["T_WHITESPACE"," ",146],["T_ARRAY","array",146],"(",")",";",["T_WHITESPACE","\n            ",146],["T_FOREACH","foreach",147],"(",["T_VARIABLE","$nodeKeys",147],["T_WHITESPACE"," ",147],["T_AS","as",147],["T_WHITESPACE"," ",147],["T_VARIABLE","$key",147],")",["T_WHITESPACE"," ",147],"{",["T_WHITESPACE","\n                ",147],["T_IF","if",148],["T_WHITESPACE"," ",148],"(","(","!",["T_VARIABLE","$nodes",148],"[",["T_VARIABLE","$key",148],"]",["T_OBJECT_OPERATOR","->",148],["T_STRING","getMetadata",148],"(",["T_STRING","self",148],["T_DOUBLE_COLON","::",148],["T_STRING","ACYCLIC_VISITED_KEY",148],")",")",["T_WHITESPACE"," ",148],["T_BOOLEAN_AND","&&",148],["T_WHITESPACE","\n                ",148],["T_STRING","self",149],["T_DOUBLE_COLON","::",149],["T_STRING","_nonVisitedInDegree",149],"(",["T_VARIABLE","$nodes",149],"[",["T_VARIABLE","$key",149],"]",",",["T_WHITESPACE"," ",149],["T_STRING","self",149],["T_DOUBLE_COLON","::",149],["T_STRING","ACYCLIC_VISITED_KEY",149],")",["T_WHITESPACE"," ",149],["T_IS_EQUAL","==",149],["T_WHITESPACE"," ",149],["T_LNUMBER","0",149],")",["T_WHITESPACE"," ",149],"{",["T_WHITESPACE","\n                    ",149],["T_VARIABLE","$leafNodes",150],"[","]",["T_WHITESPACE"," ",150],"=","&",["T_WHITESPACE"," ",150],["T_VARIABLE","$nodes",150],"[",["T_VARIABLE","$key",150],"]",";",["T_WHITESPACE","\n                ",150],"}",["T_WHITESPACE","\n            ",151],"}",["T_WHITESPACE","\n            ",152],["T_COMMENT","\/\/ Mark leafs as visited\n",153],["T_WHITESPACE","            ",154],["T_FOR","for",154],["T_WHITESPACE"," ",154],"(",["T_VARIABLE","$i",154],"=",["T_STRING","sizeof",154],"(",["T_VARIABLE","$leafNodes",154],")",["T_WHITESPACE"," ",154],"-",["T_WHITESPACE"," ",154],["T_LNUMBER","1",154],";",["T_WHITESPACE"," ",154],["T_VARIABLE","$i",154],["T_IS_GREATER_OR_EQUAL",">=",154],["T_LNUMBER","0",154],";",["T_WHITESPACE"," ",154],["T_VARIABLE","$i",154],["T_DEC","--",154],")",["T_WHITESPACE"," ",154],"{",["T_WHITESPACE","\n                ",154],["T_VARIABLE","$visited",155],["T_WHITESPACE"," ",155],"=","&",["T_WHITESPACE"," ",155],["T_VARIABLE","$leafNodes",155],"[",["T_VARIABLE","$i",155],"]",["T_OBJECT_OPERATOR","->",155],["T_STRING","getMetadata",155],"(",["T_STRING","self",155],["T_DOUBLE_COLON","::",155],["T_STRING","ACYCLIC_VISITED_KEY",155],")",";",["T_WHITESPACE","\n                ",155],["T_VARIABLE","$visited",156],["T_WHITESPACE"," ",156],"=",["T_WHITESPACE"," ",156],["T_STRING","true",156],";",["T_WHITESPACE","\n                ",156],["T_VARIABLE","$leafNodes",157],"[",["T_VARIABLE","$i",157],"]",["T_OBJECT_OPERATOR","->",157],["T_STRING","setMetadata",157],"(",["T_STRING","self",157],["T_DOUBLE_COLON","::",157],["T_STRING","ACYCLIC_VISITED_KEY",157],",",["T_WHITESPACE"," ",157],["T_VARIABLE","$visited",157],")",";",["T_WHITESPACE","\n            ",157],"}",["T_WHITESPACE","\n        ",158],"}",["T_WHITESPACE"," ",159],["T_WHILE","while",159],["T_WHITESPACE"," ",159],"(",["T_STRING","sizeof",159],"(",["T_VARIABLE","$leafNodes",159],")",["T_WHITESPACE"," ",159],">",["T_WHITESPACE"," ",159],["T_LNUMBER","0",159],")",";",["T_WHITESPACE","\n\n\n        ",159],["T_COMMENT","\/\/ If graph is a DAG, there should be no non-visited nodes.\n",162],["T_WHITESPACE","        ",163],["T_COMMENT","\/\/ Let's try to prove otherwise\n",163],["T_WHITESPACE","        ",164],["T_VARIABLE","$result",164],["T_WHITESPACE"," ",164],"=",["T_WHITESPACE"," ",164],["T_STRING","true",164],";",["T_WHITESPACE","\n        ",164],["T_FOREACH","foreach",165],"(",["T_VARIABLE","$nodeKeys",165],["T_WHITESPACE"," ",165],["T_AS","as",165],["T_WHITESPACE"," ",165],["T_VARIABLE","$key",165],")",["T_WHITESPACE"," ",165],"{",["T_WHITESPACE","\n            ",165],["T_IF","if",166],["T_WHITESPACE"," ",166],"(","!",["T_VARIABLE","$nodes",166],"[",["T_VARIABLE","$key",166],"]",["T_OBJECT_OPERATOR","->",166],["T_STRING","getMetadata",166],"(",["T_STRING","self",166],["T_DOUBLE_COLON","::",166],["T_STRING","ACYCLIC_VISITED_KEY",166],")",")",["T_WHITESPACE"," ",166],"{",["T_WHITESPACE","\n                ",166],["T_VARIABLE","$result",167],["T_WHITESPACE"," ",167],"=",["T_WHITESPACE"," ",167],["T_STRING","false",167],";",["T_WHITESPACE","\n                ",167],["T_BREAK","break",168],";",["T_WHITESPACE","\n            ",168],"}",["T_WHITESPACE","\n        ",169],"}",["T_WHITESPACE","\n\n        ",170],["T_COMMENT","\/\/ Cleanup visited marks\n",172],["T_WHITESPACE","        ",173],["T_FOREACH","foreach",173],"(",["T_VARIABLE","$nodeKeys",173],["T_WHITESPACE"," ",173],["T_AS","as",173],["T_WHITESPACE"," ",173],["T_VARIABLE","$key",173],")",["T_WHITESPACE"," ",173],"{",["T_WHITESPACE","\n            ",173],["T_VARIABLE","$nodes",174],"[",["T_VARIABLE","$key",174],"]",["T_OBJECT_OPERATOR","->",174],["T_STRING","unsetMetadata",174],"(",["T_STRING","self",174],["T_DOUBLE_COLON","::",174],["T_STRING","ACYCLIC_VISITED_KEY",174],")",";",["T_WHITESPACE","\n        ",174],"}",["T_WHITESPACE","\n\n        ",175],["T_RETURN","return",177],["T_WHITESPACE"," ",177],["T_VARIABLE","$result",177],";",["T_WHITESPACE","\n    ",177],"}",["T_WHITESPACE","\n\n    ",178],["T_DOC_COMMENT","\/**\n     *\n     * sort returns the graph's nodes, sorted by topological order.\n     *\n     * The result is an array with\n     * as many entries as topological levels.\n     *\n     * Each entry in this array is an array of nodes within\n     * the given topological level.\n     *\n     * @return   array\n     *\/",180],["T_WHITESPACE","\n    ",191],["T_PUBLIC","public",192],["T_WHITESPACE"," ",192],["T_FUNCTION","function",192],["T_WHITESPACE"," ",192],["T_STRING","topologicalSort",192],"(",")",["T_WHITESPACE","\n    ",192],"{",["T_WHITESPACE","\n        ",193],["T_COMMENT","\/\/ We only sort graphs\n",194],["T_WHITESPACE","        ",195],["T_STRING","self",195],["T_DOUBLE_COLON","::",195],["T_STRING","_topologicalSort",195],"(",["T_VARIABLE","$this",195],")",";",["T_WHITESPACE","\n        ",195],["T_VARIABLE","$result",196],["T_WHITESPACE"," ",196],"=",["T_WHITESPACE"," ",196],["T_ARRAY","array",196],"(",")",";",["T_WHITESPACE","\n        ",196],["T_COMMENT","\/\/ Fill out result array\n",197],["T_WHITESPACE","        ",198],["T_VARIABLE","$nodes",198],["T_WHITESPACE"," ",198],"=","&",["T_WHITESPACE"," ",198],["T_VARIABLE","$this",198],["T_OBJECT_OPERATOR","->",198],["T_STRING","getNodes",198],"(",")",";",["T_WHITESPACE","\n        ",198],["T_VARIABLE","$nodeKeys",199],["T_WHITESPACE"," ",199],"=",["T_WHITESPACE"," ",199],["T_STRING","array_keys",199],"(",["T_VARIABLE","$nodes",199],")",";",["T_WHITESPACE","\n        ",199],["T_FOREACH","foreach",200],"(",["T_VARIABLE","$nodeKeys",200],["T_WHITESPACE"," ",200],["T_AS","as",200],["T_WHITESPACE"," ",200],["T_VARIABLE","$key",200],")",["T_WHITESPACE"," ",200],"{",["T_WHITESPACE","\n            ",200],["T_VARIABLE","$k",201],["T_WHITESPACE"," ",201],"=",["T_WHITESPACE"," ",201],["T_VARIABLE","$nodes",201],"[",["T_VARIABLE","$key",201],"]",["T_OBJECT_OPERATOR","->",201],["T_STRING","getMetadata",201],"(",["T_STRING","self",201],["T_DOUBLE_COLON","::",201],["T_STRING","SORT_LEVEL_KEY",201],")",";",["T_WHITESPACE","\n            ",201],["T_IF","if",202],["T_WHITESPACE"," ",202],"(","!",["T_STRING","array_key_exists",202],"(",["T_VARIABLE","$k",202],",",["T_WHITESPACE"," ",202],["T_VARIABLE","$result",202],")",")",["T_WHITESPACE"," ",202],"{",["T_WHITESPACE","\n                ",202],["T_VARIABLE","$result",203],"[",["T_VARIABLE","$k",203],"]",["T_WHITESPACE"," ",203],"=",["T_WHITESPACE"," ",203],["T_ARRAY","array",203],"(",")",";",["T_WHITESPACE","   \n            ",203],"}",["T_WHITESPACE","\n            ",204],["T_VARIABLE","$result",205],"[",["T_VARIABLE","$k",205],"]","[","]",["T_WHITESPACE"," ",205],"=","&",["T_WHITESPACE"," ",205],["T_VARIABLE","$nodes",205],"[",["T_VARIABLE","$key",205],"]",";",["T_WHITESPACE","\n            ",205],["T_VARIABLE","$nodes",206],"[",["T_VARIABLE","$key",206],"]",["T_OBJECT_OPERATOR","->",206],["T_STRING","unsetMetadata",206],"(",["T_STRING","self",206],["T_DOUBLE_COLON","::",206],["T_STRING","SORT_LEVEL_KEY",206],")",";",["T_WHITESPACE","\n        ",206],"}",["T_WHITESPACE","\n        ",207],["T_RETURN","return",208],["T_WHITESPACE"," ",208],["T_VARIABLE","$result",208],";",["T_WHITESPACE","\n    ",208],"}",["T_WHITESPACE","\n\n    ",209],["T_PROTECTED","protected",211],["T_WHITESPACE"," ",211],["T_STATIC","static",211],["T_WHITESPACE"," ",211],["T_FUNCTION","function",211],["T_WHITESPACE"," ",211],["T_STRING","_topologicalSort",211],"(","&",["T_VARIABLE","$graph",211],")",["T_WHITESPACE","\n    ",211],"{",["T_WHITESPACE","\n        ",212],["T_COMMENT","\/\/ Mark every node as not visited\n",213],["T_WHITESPACE","        ",214],["T_VARIABLE","$nodes",214],["T_WHITESPACE"," ",214],"=","&",["T_WHITESPACE"," ",214],["T_VARIABLE","$graph",214],["T_OBJECT_OPERATOR","->",214],["T_STRING","getNodes",214],"(",")",";",["T_WHITESPACE","\n        ",214],["T_VARIABLE","$nodeKeys",215],["T_WHITESPACE"," ",215],"=",["T_WHITESPACE"," ",215],["T_STRING","array_keys",215],"(",["T_VARIABLE","$nodes",215],")",";",["T_WHITESPACE","\n        ",215],["T_VARIABLE","$refGenerator",216],["T_WHITESPACE"," ",216],"=",["T_WHITESPACE"," ",216],["T_ARRAY","array",216],"(",")",";",["T_WHITESPACE","\n        ",216],["T_FOREACH","foreach",217],"(",["T_VARIABLE","$nodeKeys",217],["T_WHITESPACE"," ",217],["T_AS","as",217],["T_WHITESPACE"," ",217],["T_VARIABLE","$key",217],")",["T_WHITESPACE"," ",217],"{",["T_WHITESPACE","\n            ",217],["T_VARIABLE","$refGenerator",218],"[","]",["T_WHITESPACE"," ",218],"=",["T_WHITESPACE"," ",218],["T_STRING","false",218],";",["T_WHITESPACE","\n            ",218],["T_VARIABLE","$nodes",219],"[",["T_VARIABLE","$key",219],"]",["T_OBJECT_OPERATOR","->",219],["T_STRING","setMetadata",219],"(",["T_STRING","self",219],["T_DOUBLE_COLON","::",219],["T_STRING","SORT_VISITED_KEY",219],",",["T_WHITESPACE"," ",219],["T_VARIABLE","$refGenerator",219],"[",["T_STRING","sizeof",219],"(",["T_VARIABLE","$refGenerator",219],")",["T_WHITESPACE"," ",219],"-",["T_WHITESPACE"," ",219],["T_LNUMBER","1",219],"]",")",";",["T_WHITESPACE","\n        ",219],"}",["T_WHITESPACE","\n\n        ",220],["T_COMMENT","\/\/ Iteratively peel off leaf nodes\n",222],["T_WHITESPACE","        ",223],["T_VARIABLE","$topologicalLevel",223],["T_WHITESPACE"," ",223],"=",["T_WHITESPACE"," ",223],["T_LNUMBER","0",223],";",["T_WHITESPACE","\n        ",223],["T_DO","do",224],["T_WHITESPACE"," ",224],"{",["T_WHITESPACE","\n            ",224],["T_COMMENT","\/\/ Find out which nodes are leafs (excluding visited nodes)\n",225],["T_WHITESPACE","            ",226],["T_VARIABLE","$leafNodes",226],["T_WHITESPACE"," ",226],"=",["T_WHITESPACE"," ",226],["T_ARRAY","array",226],"(",")",";",["T_WHITESPACE","\n            ",226],["T_FOREACH","foreach",227],"(",["T_VARIABLE","$nodeKeys",227],["T_WHITESPACE"," ",227],["T_AS","as",227],["T_WHITESPACE"," ",227],["T_VARIABLE","$key",227],")",["T_WHITESPACE"," ",227],"{",["T_WHITESPACE","\n                ",227],["T_IF","if",228],["T_WHITESPACE"," ",228],"(","(","!",["T_VARIABLE","$nodes",228],"[",["T_VARIABLE","$key",228],"]",["T_OBJECT_OPERATOR","->",228],["T_STRING","getMetadata",228],"(",["T_STRING","self",228],["T_DOUBLE_COLON","::",228],["T_STRING","SORT_VISITED_KEY",228],")",")",["T_WHITESPACE"," ",228],["T_BOOLEAN_AND","&&",228],["T_WHITESPACE"," ",228],["T_STRING","self",228],["T_DOUBLE_COLON","::",228],["T_STRING","_nonVisitedInDegree",228],"(",["T_VARIABLE","$nodes",228],"[",["T_VARIABLE","$key",228],"]",",",["T_WHITESPACE"," ",228],["T_STRING","self",228],["T_DOUBLE_COLON","::",228],["T_STRING","SORT_VISITED_KEY",228],")",["T_WHITESPACE"," ",228],["T_IS_EQUAL","==",228],["T_WHITESPACE"," ",228],["T_LNUMBER","0",228],")",["T_WHITESPACE"," ",228],"{",["T_WHITESPACE","\n                    ",228],["T_VARIABLE","$leafNodes",229],"[","]",["T_WHITESPACE"," ",229],"=","&",["T_WHITESPACE"," ",229],["T_VARIABLE","$nodes",229],"[",["T_VARIABLE","$key",229],"]",";",["T_WHITESPACE","\n                ",229],"}",["T_WHITESPACE","\n            ",230],"}",["T_WHITESPACE","\n            ",231],["T_COMMENT","\/\/ Mark leafs as visited\n",232],["T_WHITESPACE","            ",233],["T_VARIABLE","$refGenerator",233],"[","]",["T_WHITESPACE"," ",233],"=",["T_WHITESPACE"," ",233],["T_VARIABLE","$topologicalLevel",233],";",["T_WHITESPACE","\n            ",233],["T_FOR","for",234],["T_WHITESPACE"," ",234],"(",["T_VARIABLE","$i",234],"=",["T_STRING","sizeof",234],"(",["T_VARIABLE","$leafNodes",234],")",["T_WHITESPACE"," ",234],"-",["T_WHITESPACE"," ",234],["T_LNUMBER","1",234],";",["T_WHITESPACE"," ",234],["T_VARIABLE","$i",234],["T_IS_GREATER_OR_EQUAL",">=",234],["T_LNUMBER","0",234],";",["T_WHITESPACE"," ",234],["T_VARIABLE","$i",234],["T_DEC","--",234],")",["T_WHITESPACE"," ",234],"{",["T_WHITESPACE","\n                ",234],["T_VARIABLE","$visited",235],["T_WHITESPACE"," ",235],"=","&",["T_WHITESPACE"," ",235],["T_VARIABLE","$leafNodes",235],"[",["T_VARIABLE","$i",235],"]",["T_OBJECT_OPERATOR","->",235],["T_STRING","getMetadata",235],"(",["T_STRING","self",235],["T_DOUBLE_COLON","::",235],["T_STRING","SORT_VISITED_KEY",235],")",";",["T_WHITESPACE","\n                ",235],["T_VARIABLE","$visited",236],["T_WHITESPACE"," ",236],"=",["T_WHITESPACE"," ",236],["T_STRING","true",236],";",["T_WHITESPACE","\n                ",236],["T_VARIABLE","$leafNodes",237],"[",["T_VARIABLE","$i",237],"]",["T_OBJECT_OPERATOR","->",237],["T_STRING","setMetadata",237],"(",["T_STRING","self",237],["T_DOUBLE_COLON","::",237],["T_STRING","SORT_VISITED_KEY",237],",",["T_WHITESPACE"," ",237],["T_VARIABLE","$visited",237],")",";",["T_WHITESPACE","\n                ",237],["T_VARIABLE","$leafNodes",238],"[",["T_VARIABLE","$i",238],"]",["T_OBJECT_OPERATOR","->",238],["T_STRING","setMetadata",238],"(",["T_STRING","self",238],["T_DOUBLE_COLON","::",238],["T_STRING","SORT_LEVEL_KEY",238],",",["T_WHITESPACE"," ",238],["T_VARIABLE","$refGenerator",238],"[",["T_STRING","sizeof",238],"(",["T_VARIABLE","$refGenerator",238],")",["T_WHITESPACE"," ",238],"-",["T_WHITESPACE"," ",238],["T_LNUMBER","1",238],"]",")",";",["T_WHITESPACE","\n            ",238],"}",["T_WHITESPACE","\n            ",239],["T_VARIABLE","$topologicalLevel",240],["T_INC","++",240],";",["T_WHITESPACE","\n        ",240],"}",["T_WHITESPACE"," ",241],["T_WHILE","while",241],["T_WHITESPACE"," ",241],"(",["T_STRING","sizeof",241],"(",["T_VARIABLE","$leafNodes",241],")",["T_WHITESPACE"," ",241],">",["T_WHITESPACE"," ",241],["T_LNUMBER","0",241],")",";",["T_WHITESPACE","\n\n        ",241],["T_FOREACH","foreach",243],"(",["T_VARIABLE","$nodeKeys",243],["T_WHITESPACE"," ",243],["T_AS","as",243],["T_WHITESPACE"," ",243],["T_VARIABLE","$key",243],")",["T_WHITESPACE"," ",243],"{",["T_WHITESPACE","\n            ",243],["T_VARIABLE","$nodes",244],"[",["T_VARIABLE","$key",244],"]",["T_OBJECT_OPERATOR","->",244],["T_STRING","unsetMetadata",244],"(",["T_STRING","self",244],["T_DOUBLE_COLON","::",244],["T_STRING","SORT_VISITED_KEY",244],")",";",["T_WHITESPACE","\n        ",244],"}",["T_WHITESPACE","\n    ",245],"}",["T_WHITESPACE","\n\n",246],"}",["T_WHITESPACE","\n",248]]
[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Magento\n *\n * NOTICE OF LICENSE\n *\n * This source file is subject to the Open Software License (OSL 3.0)\n * that is bundled with this package in the file LICENSE.txt.\n * It is also available through the world-wide-web at this URL:\n * http:\/\/opensource.org\/licenses\/osl-3.0.php\n * If you did not receive a copy of the license and are unable to\n * obtain it through the world-wide-web, please send an email\n * to license@magento.com so we can send you a copy immediately.\n *\n * DISCLAIMER\n *\n * Do not edit or add to this file if you wish to upgrade Magento to newer\n * versions in the future. If you wish to customize Magento for your\n * needs please refer to http:\/\/www.magento.com for more information.\n *\n * @category    Mage\n * @package     Mage_Connect\n * @copyright  Copyright (c) 2006-2016 X.commerce, Inc. and affiliates (http:\/\/www.magento.com)\n * @license    http:\/\/opensource.org\/licenses\/osl-3.0.php  Open Software License (OSL 3.0)\n *\/",2],["T_WHITESPACE","\n\n ",25],["T_DOC_COMMENT","\/**\n * Class to work with Magento Connect Hotfix\n *\n * @category    Mage\n * @package     Mage_Connect\n * @author      Magento Core Team <core@magentocommerce.com>\n *\/",27],["T_WHITESPACE","\n\n",33],["T_CLASS","class",35],["T_WHITESPACE"," ",35],["T_STRING","Mage_Connect_Package_Hotfix",35],["T_WHITESPACE"," ",35],["T_EXTENDS","extends",35],["T_WHITESPACE"," ",35],["T_STRING","Mage_Connect_Package",35],["T_WHITESPACE","\n",35],"{",["T_WHITESPACE","\n\n    ",36],["T_DOC_COMMENT","\/**\n     * Initializes an empty package object\n     *\n     * @param null|string $definition optional package definition xml\n     * @return Mage_Connect_Package\n     *\/",38],["T_WHITESPACE","\n    ",43],["T_PROTECTED","protected",44],["T_WHITESPACE"," ",44],["T_FUNCTION","function",44],["T_WHITESPACE"," ",44],["T_STRING","_init",44],"(",["T_VARIABLE","$definition",44],"=",["T_STRING","null",44],")",["T_WHITESPACE","\n    ",44],"{",["T_WHITESPACE","\n\n        ",45],["T_IF","if",47],["T_WHITESPACE"," ",47],"(","!",["T_STRING","is_null",47],"(",["T_VARIABLE","$definition",47],")",")",["T_WHITESPACE"," ",47],"{",["T_WHITESPACE","\n            ",47],["T_VARIABLE","$this",48],["T_OBJECT_OPERATOR","->",48],["T_STRING","_packageXml",48],["T_WHITESPACE"," ",48],"=",["T_WHITESPACE"," ",48],["T_STRING","simplexml_load_string",48],"(",["T_VARIABLE","$definition",48],")",";",["T_WHITESPACE","\n        ",48],"}",["T_WHITESPACE"," ",49],["T_ELSE","else",49],["T_WHITESPACE"," ",49],"{",["T_WHITESPACE","\n            ",49],["T_VARIABLE","$packageXmlStub",50],["T_WHITESPACE"," ",50],"=",["T_WHITESPACE"," ",50],["T_START_HEREDOC","<<<END\n",50],["T_ENCAPSED_AND_WHITESPACE","<?xml version=\"1.0\"?>\n<package>\n    <name \/>\n    <version \/>\n    <stability \/>\n    <license \/>\n    <channel \/>\n    <extends \/>\n    <summary \/>\n    <description \/>\n    <notes \/>\n    <authors \/>\n    <date \/>\n    <time \/>\n    <replace \/>\n    <compatible \/>\n    <dependencies \/>\n<\/package>\n",51],["T_END_HEREDOC","END",69],";",["T_WHITESPACE","\n            ",69],["T_VARIABLE","$this",70],["T_OBJECT_OPERATOR","->",70],["T_STRING","_packageXml",70],["T_WHITESPACE"," ",70],"=",["T_WHITESPACE"," ",70],["T_STRING","simplexml_load_string",70],"(",["T_VARIABLE","$packageXmlStub",70],")",";",["T_WHITESPACE","\n        ",70],"}",["T_WHITESPACE","\n        ",71],["T_RETURN","return",72],["T_WHITESPACE"," ",72],["T_VARIABLE","$this",72],";",["T_WHITESPACE","\n    ",72],"}",["T_WHITESPACE","\n\n    ",73],["T_DOC_COMMENT","\/**\n    * Add content to node <replace\/>\n    *\n    * @return Mage_Connect_Package_Hotfix\n    *\/",75],["T_WHITESPACE","\n    ",79],["T_PUBLIC","public",80],["T_WHITESPACE"," ",80],["T_FUNCTION","function",80],["T_WHITESPACE"," ",80],["T_STRING","addReplace",80],"(",["T_VARIABLE","$path",80],",",["T_WHITESPACE"," ",80],["T_VARIABLE","$targetName",80],")",["T_WHITESPACE","\n    ",80],"{",["T_WHITESPACE","\n        ",81],["T_VARIABLE","$found",82],["T_WHITESPACE"," ",82],"=",["T_WHITESPACE"," ",82],["T_STRING","false",82],";",["T_WHITESPACE","\n        ",82],["T_VARIABLE","$parent",83],["T_WHITESPACE"," ",83],"=",["T_WHITESPACE"," ",83],["T_VARIABLE","$this",83],["T_OBJECT_OPERATOR","->",83],["T_STRING","_getNode",83],"(",["T_CONSTANT_ENCAPSED_STRING","'target'",83],",",["T_WHITESPACE"," ",83],["T_VARIABLE","$this",83],["T_OBJECT_OPERATOR","->",83],["T_STRING","_packageXml",83],["T_OBJECT_OPERATOR","->",83],["T_STRING","replace",83],",",["T_WHITESPACE"," ",83],["T_VARIABLE","$targetName",83],")",";",["T_WHITESPACE","\n        ",83],["T_VARIABLE","$path",84],["T_WHITESPACE"," ",84],"=",["T_WHITESPACE"," ",84],["T_STRING","str_replace",84],"(",["T_CONSTANT_ENCAPSED_STRING","'\\\\'",84],",",["T_WHITESPACE"," ",84],["T_CONSTANT_ENCAPSED_STRING","'\/'",84],",",["T_WHITESPACE"," ",84],["T_VARIABLE","$path",84],")",";",["T_WHITESPACE","\n        ",84],["T_VARIABLE","$directories",85],["T_WHITESPACE"," ",85],"=",["T_WHITESPACE"," ",85],["T_STRING","explode",85],"(",["T_CONSTANT_ENCAPSED_STRING","'\/'",85],",",["T_WHITESPACE"," ",85],["T_STRING","dirname",85],"(",["T_VARIABLE","$path",85],")",")",";",["T_WHITESPACE","\n        ",85],["T_FOREACH","foreach",86],["T_WHITESPACE"," ",86],"(",["T_VARIABLE","$directories",86],["T_WHITESPACE"," ",86],["T_AS","as",86],["T_WHITESPACE"," ",86],["T_VARIABLE","$directory",86],")",["T_WHITESPACE"," ",86],"{",["T_WHITESPACE","\n            ",86],["T_VARIABLE","$parent",87],["T_WHITESPACE"," ",87],"=",["T_WHITESPACE"," ",87],["T_VARIABLE","$this",87],["T_OBJECT_OPERATOR","->",87],["T_STRING","_getNode",87],"(",["T_CONSTANT_ENCAPSED_STRING","'dir'",87],",",["T_WHITESPACE"," ",87],["T_VARIABLE","$parent",87],",",["T_WHITESPACE"," ",87],["T_VARIABLE","$directory",87],")",";",["T_WHITESPACE","\n        ",87],"}",["T_WHITESPACE","\n        ",88],["T_VARIABLE","$fileName",89],["T_WHITESPACE"," ",89],"=",["T_WHITESPACE"," ",89],["T_STRING","basename",89],"(",["T_VARIABLE","$path",89],")",";",["T_WHITESPACE","\n        ",89],["T_IF","if",90],["T_WHITESPACE"," ",90],"(",["T_VARIABLE","$fileName",90],["T_IS_NOT_EQUAL","!=",90],["T_CONSTANT_ENCAPSED_STRING","''",90],")",["T_WHITESPACE"," ",90],"{",["T_WHITESPACE","\n            ",90],["T_VARIABLE","$fileNode",91],["T_WHITESPACE"," ",91],"=",["T_WHITESPACE"," ",91],["T_VARIABLE","$parent",91],["T_OBJECT_OPERATOR","->",91],["T_STRING","addChild",91],"(",["T_CONSTANT_ENCAPSED_STRING","'file'",91],")",";",["T_WHITESPACE","\n            ",91],["T_VARIABLE","$fileNode",92],["T_OBJECT_OPERATOR","->",92],["T_STRING","addAttribute",92],"(",["T_CONSTANT_ENCAPSED_STRING","'name'",92],",",["T_WHITESPACE"," ",92],["T_VARIABLE","$fileName",92],")",";",["T_WHITESPACE","\n        ",92],"}",["T_WHITESPACE","\n        ",93],["T_RETURN","return",94],["T_WHITESPACE"," ",94],["T_VARIABLE","$this",94],";",["T_WHITESPACE","\n    ",94],"}",["T_WHITESPACE","\n\n    ",95],["T_DOC_COMMENT","\/**\n     * Add directory recursively (with subdirectory and file).\n     * Exclude and Include can be add using Regular Expression.\n     *\n     * @param string $targetName Target name\n     * @param string $targetDir Path for target name\n     * @param string $path Path to directory\n     * @param string $exclude Exclude\n     * @param string $include Include\n     * @return Mage_Connect_Package\n     *\/",97],["T_WHITESPACE","\n    ",107],["T_PUBLIC","public",108],["T_WHITESPACE"," ",108],["T_FUNCTION","function",108],["T_WHITESPACE"," ",108],["T_STRING","addReplaceDir",108],"(",["T_VARIABLE","$targetName",108],",",["T_WHITESPACE"," ",108],["T_VARIABLE","$targetDir",108],",",["T_WHITESPACE"," ",108],["T_VARIABLE","$path",108],",",["T_WHITESPACE"," ",108],["T_VARIABLE","$exclude",108],"=",["T_STRING","null",108],",",["T_WHITESPACE"," ",108],["T_VARIABLE","$include",108],"=",["T_STRING","null",108],")",["T_WHITESPACE","\n    ",108],"{",["T_WHITESPACE","\n        ",109],["T_VARIABLE","$targetDirLen",110],["T_WHITESPACE"," ",110],"=",["T_WHITESPACE"," ",110],["T_STRING","strlen",110],"(",["T_VARIABLE","$targetDir",110],")",";",["T_WHITESPACE","\n        ",110],["T_COMMENT","\/\/get all subdirectories and files.\n",111],["T_WHITESPACE","        ",112],["T_VARIABLE","$entries",112],["T_WHITESPACE"," ",112],"=",["T_WHITESPACE"," ",112],"@",["T_STRING","glob",112],"(",["T_VARIABLE","$targetDir",112],".",["T_VARIABLE","$path",112],".",["T_STRING","DS",112],".",["T_CONSTANT_ENCAPSED_STRING","\"*\"",112],")",";",["T_WHITESPACE","\n        ",112],["T_IF","if",113],["T_WHITESPACE"," ",113],"(","!",["T_EMPTY","empty",113],"(",["T_VARIABLE","$entries",113],")",")",["T_WHITESPACE"," ",113],"{",["T_WHITESPACE","\n            ",113],["T_FOREACH","foreach",114],["T_WHITESPACE"," ",114],"(",["T_VARIABLE","$entries",114],["T_WHITESPACE"," ",114],["T_AS","as",114],["T_WHITESPACE"," ",114],["T_VARIABLE","$entry",114],")",["T_WHITESPACE"," ",114],"{",["T_WHITESPACE","\n                ",114],["T_VARIABLE","$filePath",115],["T_WHITESPACE"," ",115],"=",["T_WHITESPACE"," ",115],["T_STRING","substr",115],"(",["T_VARIABLE","$entry",115],",",["T_WHITESPACE"," ",115],["T_VARIABLE","$targetDirLen",115],")",";",["T_WHITESPACE","\n                ",115],["T_IF","if",116],["T_WHITESPACE"," ",116],"(","!",["T_EMPTY","empty",116],"(",["T_VARIABLE","$include",116],")",["T_WHITESPACE"," ",116],["T_BOOLEAN_AND","&&",116],["T_WHITESPACE"," ",116],"!",["T_STRING","preg_match",116],"(",["T_VARIABLE","$include",116],",",["T_WHITESPACE"," ",116],["T_VARIABLE","$filePath",116],")",")",["T_WHITESPACE"," ",116],"{",["T_WHITESPACE","\n                    ",116],["T_CONTINUE","continue",117],";",["T_WHITESPACE","\n                ",117],"}",["T_WHITESPACE","\n                ",118],["T_IF","if",119],["T_WHITESPACE"," ",119],"(","!",["T_EMPTY","empty",119],"(",["T_VARIABLE","$ignore",119],")",["T_WHITESPACE"," ",119],["T_BOOLEAN_AND","&&",119],["T_WHITESPACE"," ",119],["T_STRING","preg_match",119],"(",["T_VARIABLE","$exclude",119],",",["T_WHITESPACE"," ",119],["T_VARIABLE","$filePath",119],")",")",["T_WHITESPACE"," ",119],"{",["T_WHITESPACE","\n                    ",119],["T_CONTINUE","continue",120],";",["T_WHITESPACE","\n                ",120],"}",["T_WHITESPACE","\n                ",121],["T_IF","if",122],["T_WHITESPACE"," ",122],"(",["T_STRING","is_dir",122],"(",["T_VARIABLE","$entry",122],")",")",["T_WHITESPACE"," ",122],"{",["T_WHITESPACE","\n                    ",122],["T_VARIABLE","$baseName",123],["T_WHITESPACE"," ",123],"=",["T_WHITESPACE"," ",123],["T_STRING","basename",123],"(",["T_VARIABLE","$entry",123],")",";",["T_WHITESPACE","\n                    ",123],["T_IF","if",124],["T_WHITESPACE"," ",124],"(",["T_CONSTANT_ENCAPSED_STRING","'.'",124],["T_IS_IDENTICAL","===",124],["T_VARIABLE","$baseName",124],["T_WHITESPACE"," ",124],["T_BOOLEAN_OR","||",124],["T_WHITESPACE"," ",124],["T_CONSTANT_ENCAPSED_STRING","'..'",124],["T_IS_IDENTICAL","===",124],["T_VARIABLE","$baseName",124],")",["T_WHITESPACE"," ",124],"{",["T_WHITESPACE","\n                        ",124],["T_CONTINUE","continue",125],";",["T_WHITESPACE","\n                    ",125],"}",["T_WHITESPACE","\n                    ",126],["T_COMMENT","\/\/for subdirectory call method recursively\n",127],["T_WHITESPACE","                    ",128],["T_VARIABLE","$this",128],["T_OBJECT_OPERATOR","->",128],["T_STRING","addReplaceDir",128],"(",["T_VARIABLE","$targetName",128],",",["T_WHITESPACE"," ",128],["T_VARIABLE","$targetDir",128],",",["T_WHITESPACE"," ",128],["T_VARIABLE","$filePath",128],",",["T_WHITESPACE"," ",128],["T_VARIABLE","$exclude",128],",",["T_WHITESPACE"," ",128],["T_VARIABLE","$include",128],")",";",["T_WHITESPACE","\n                ",128],"}",["T_WHITESPACE"," ",129],["T_ELSEIF","elseif",129],["T_WHITESPACE"," ",129],"(",["T_STRING","is_file",129],"(",["T_VARIABLE","$entry",129],")",")",["T_WHITESPACE"," ",129],"{",["T_WHITESPACE","\n                    ",129],["T_VARIABLE","$this",130],["T_OBJECT_OPERATOR","->",130],["T_STRING","addReplace",130],"(",["T_VARIABLE","$filePath",130],",",["T_WHITESPACE"," ",130],["T_VARIABLE","$targetName",130],")",";",["T_WHITESPACE","\n                ",130],"}",["T_WHITESPACE","\n            ",131],"}",["T_WHITESPACE","\n        ",132],"}",["T_WHITESPACE","\n        ",133],["T_RETURN","return",134],["T_WHITESPACE"," ",134],["T_VARIABLE","$this",134],";",["T_WHITESPACE","\n    ",134],"}",["T_WHITESPACE","\n\n",135],"}",["T_WHITESPACE","\n",137]]
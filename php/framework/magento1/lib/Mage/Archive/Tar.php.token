[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Magento\n *\n * NOTICE OF LICENSE\n *\n * This source file is subject to the Open Software License (OSL 3.0)\n * that is bundled with this package in the file LICENSE.txt.\n * It is also available through the world-wide-web at this URL:\n * http:\/\/opensource.org\/licenses\/osl-3.0.php\n * If you did not receive a copy of the license and are unable to\n * obtain it through the world-wide-web, please send an email\n * to license@magento.com so we can send you a copy immediately.\n *\n * DISCLAIMER\n *\n * Do not edit or add to this file if you wish to upgrade Magento to newer\n * versions in the future. If you wish to customize Magento for your\n * needs please refer to http:\/\/www.magento.com for more information.\n *\n * @category    Mage\n * @package     Mage_Archive\n * @copyright  Copyright (c) 2006-2016 X.commerce, Inc. and affiliates (http:\/\/www.magento.com)\n * @license    http:\/\/opensource.org\/licenses\/osl-3.0.php  Open Software License (OSL 3.0)\n *\/",2],["T_WHITESPACE","\n\n",25],["T_DOC_COMMENT","\/**\n * Class to work with tar archives\n *\n * @category    Mage\n * @package     Mage_Archive\n * @author      Magento Core Team <core@magentocommerce.com>\n *\/",27],["T_WHITESPACE","\n",33],["T_CLASS","class",34],["T_WHITESPACE"," ",34],["T_STRING","Mage_Archive_Tar",34],["T_WHITESPACE"," ",34],["T_EXTENDS","extends",34],["T_WHITESPACE"," ",34],["T_STRING","Mage_Archive_Abstract",34],["T_WHITESPACE"," ",34],["T_IMPLEMENTS","implements",34],["T_WHITESPACE"," ",34],["T_STRING","Mage_Archive_Interface",34],["T_WHITESPACE","\n",34],"{",["T_WHITESPACE","\n    ",35],["T_DOC_COMMENT","\/**\n     * Tar block size\n     *\n     * @const int\n     *\/",36],["T_WHITESPACE","\n    ",40],["T_CONST","const",41],["T_WHITESPACE"," ",41],["T_STRING","TAR_BLOCK_SIZE",41],["T_WHITESPACE"," ",41],"=",["T_WHITESPACE"," ",41],["T_LNUMBER","512",41],";",["T_WHITESPACE","\n\n    ",41],["T_DOC_COMMENT","\/**\n     * Keep file or directory for packing.\n     *\n     * @var string\n     *\/",43],["T_WHITESPACE","\n    ",47],["T_PROTECTED","protected",48],["T_WHITESPACE"," ",48],["T_VARIABLE","$_currentFile",48],";",["T_WHITESPACE","\n\n    ",48],["T_DOC_COMMENT","\/**\n     * Keep path to file or directory for packing.\n     *\n     * @var mixed\n     *\/",50],["T_WHITESPACE","\n    ",54],["T_PROTECTED","protected",55],["T_WHITESPACE"," ",55],["T_VARIABLE","$_currentPath",55],";",["T_WHITESPACE","\n\n    ",55],["T_DOC_COMMENT","\/**\n     * Skip first level parent directory. Example:\n     *   use test\/fip.php instead test\/test\/fip.php;\n     *\n     * @var mixed\n     *\/",57],["T_WHITESPACE","\n    ",62],["T_PROTECTED","protected",63],["T_WHITESPACE"," ",63],["T_VARIABLE","$_skipRoot",63],";",["T_WHITESPACE","\n\n    ",63],["T_DOC_COMMENT","\/**\n    * Tarball data writer\n    *\n    * @var Mage_Archive_Helper_File\n    *\/",65],["T_WHITESPACE","\n    ",69],["T_PROTECTED","protected",70],["T_WHITESPACE"," ",70],["T_VARIABLE","$_writer",70],";",["T_WHITESPACE","\n\n    ",70],["T_DOC_COMMENT","\/**\n    * Tarball data reader\n    *\n    * @var Mage_Archive_Helper_File\n    *\/",72],["T_WHITESPACE","\n    ",76],["T_PROTECTED","protected",77],["T_WHITESPACE"," ",77],["T_VARIABLE","$_reader",77],";",["T_WHITESPACE","\n\n    ",77],["T_DOC_COMMENT","\/**\n    * Path to file where tarball should be placed\n    *\n    * @var string\n    *\/",79],["T_WHITESPACE","\n    ",83],["T_PROTECTED","protected",84],["T_WHITESPACE"," ",84],["T_VARIABLE","$_destinationFilePath",84],";",["T_WHITESPACE","\n\n    ",84],["T_DOC_COMMENT","\/**\n     * Initialize tarball writer\n     *\n     * @return Mage_Archive_Tar\n     *\/",86],["T_WHITESPACE","\n    ",90],["T_PROTECTED","protected",91],["T_WHITESPACE"," ",91],["T_FUNCTION","function",91],["T_WHITESPACE"," ",91],["T_STRING","_initWriter",91],"(",")",["T_WHITESPACE","\n    ",91],"{",["T_WHITESPACE","\n        ",92],["T_VARIABLE","$this",93],["T_OBJECT_OPERATOR","->",93],["T_STRING","_writer",93],["T_WHITESPACE"," ",93],"=",["T_WHITESPACE"," ",93],["T_NEW","new",93],["T_WHITESPACE"," ",93],["T_STRING","Mage_Archive_Helper_File",93],"(",["T_VARIABLE","$this",93],["T_OBJECT_OPERATOR","->",93],["T_STRING","_destinationFilePath",93],")",";",["T_WHITESPACE","\n        ",93],["T_VARIABLE","$this",94],["T_OBJECT_OPERATOR","->",94],["T_STRING","_writer",94],["T_OBJECT_OPERATOR","->",94],["T_STRING","open",94],"(",["T_CONSTANT_ENCAPSED_STRING","'w'",94],")",";",["T_WHITESPACE","\n\n        ",94],["T_RETURN","return",96],["T_WHITESPACE"," ",96],["T_VARIABLE","$this",96],";",["T_WHITESPACE","\n    ",96],"}",["T_WHITESPACE","\n\n    ",97],["T_DOC_COMMENT","\/**\n     * Returns string that is used for tar's header parsing\n     *\n     * @return string\n     *\/",99],["T_WHITESPACE","\n    ",103],["T_PROTECTED","protected",104],["T_WHITESPACE"," ",104],["T_STATIC","static",104],["T_WHITESPACE"," ",104],["T_FINAL","final",104],["T_WHITESPACE"," ",104],["T_FUNCTION","function",104],["T_WHITESPACE"," ",104],["T_STRING","_getFormatParseHeader",104],"(",")",["T_WHITESPACE","\n    ",104],"{",["T_WHITESPACE","\n        ",105],["T_IF","if",106],["T_WHITESPACE"," ",106],"(",["T_STRING","version_compare",106],"(",["T_STRING","phpversion",106],"(",")",",",["T_WHITESPACE"," ",106],["T_CONSTANT_ENCAPSED_STRING","'5.5.0'",106],",",["T_WHITESPACE"," ",106],["T_CONSTANT_ENCAPSED_STRING","'<'",106],")",["T_WHITESPACE"," ",106],["T_IS_IDENTICAL","===",106],["T_WHITESPACE"," ",106],["T_STRING","true",106],")",["T_WHITESPACE"," ",106],"{",["T_WHITESPACE","\n            ",106],["T_RETURN","return",107],["T_WHITESPACE"," ",107],["T_CONSTANT_ENCAPSED_STRING","'a100name\/a8mode\/a8uid\/a8gid\/a12size\/a12mtime\/a8checksum\/a1type\/a100symlink\/a6magic\/a2version\/'",107],["T_WHITESPACE","\n            ",107],".",["T_WHITESPACE"," ",108],["T_CONSTANT_ENCAPSED_STRING","'a32uname\/a32gname\/a8devmajor\/a8devminor\/a155prefix\/a12closer'",108],";",["T_WHITESPACE","\n        ",108],"}",["T_WHITESPACE","\n        ",109],["T_RETURN","return",110],["T_WHITESPACE"," ",110],["T_CONSTANT_ENCAPSED_STRING","'Z100name\/Z8mode\/Z8uid\/Z8gid\/Z12size\/Z12mtime\/Z8checksum\/Z1type\/Z100symlink\/Z6magic\/Z2version\/'",110],["T_WHITESPACE","\n        ",110],".",["T_WHITESPACE"," ",111],["T_CONSTANT_ENCAPSED_STRING","'Z32uname\/Z32gname\/Z8devmajor\/Z8devminor\/Z155prefix\/Z12closer'",111],";",["T_WHITESPACE","\n    ",111],"}",["T_WHITESPACE","\n\n    ",112],["T_DOC_COMMENT","\/**\n     * Destroy tarball writer\n     *\n     * @return Mage_Archive_Tar\n     *\/",114],["T_WHITESPACE","\n    ",118],["T_PROTECTED","protected",119],["T_WHITESPACE"," ",119],["T_FUNCTION","function",119],["T_WHITESPACE"," ",119],["T_STRING","_destroyWriter",119],"(",")",["T_WHITESPACE","\n    ",119],"{",["T_WHITESPACE","\n        ",120],["T_IF","if",121],["T_WHITESPACE"," ",121],"(",["T_VARIABLE","$this",121],["T_OBJECT_OPERATOR","->",121],["T_STRING","_writer",121],["T_WHITESPACE"," ",121],["T_INSTANCEOF","instanceof",121],["T_WHITESPACE"," ",121],["T_STRING","Mage_Archive_Helper_File",121],")",["T_WHITESPACE"," ",121],"{",["T_WHITESPACE","\n            ",121],["T_VARIABLE","$this",122],["T_OBJECT_OPERATOR","->",122],["T_STRING","_writer",122],["T_OBJECT_OPERATOR","->",122],["T_STRING","close",122],"(",")",";",["T_WHITESPACE","\n            ",122],["T_VARIABLE","$this",123],["T_OBJECT_OPERATOR","->",123],["T_STRING","_writer",123],["T_WHITESPACE"," ",123],"=",["T_WHITESPACE"," ",123],["T_STRING","null",123],";",["T_WHITESPACE","\n        ",123],"}",["T_WHITESPACE","\n\n        ",124],["T_RETURN","return",126],["T_WHITESPACE"," ",126],["T_VARIABLE","$this",126],";",["T_WHITESPACE","\n    ",126],"}",["T_WHITESPACE","\n\n    ",127],["T_DOC_COMMENT","\/**\n     * Get tarball writer\n     *\n     * @return Mage_Archive_Helper_File\n     *\/",129],["T_WHITESPACE","\n    ",133],["T_PROTECTED","protected",134],["T_WHITESPACE"," ",134],["T_FUNCTION","function",134],["T_WHITESPACE"," ",134],["T_STRING","_getWriter",134],"(",")",["T_WHITESPACE","\n    ",134],"{",["T_WHITESPACE","\n        ",135],["T_IF","if",136],["T_WHITESPACE"," ",136],"(","!",["T_VARIABLE","$this",136],["T_OBJECT_OPERATOR","->",136],["T_STRING","_writer",136],")",["T_WHITESPACE"," ",136],"{",["T_WHITESPACE","\n            ",136],["T_VARIABLE","$this",137],["T_OBJECT_OPERATOR","->",137],["T_STRING","_initWriter",137],"(",")",";",["T_WHITESPACE","\n        ",137],"}",["T_WHITESPACE","\n\n        ",138],["T_RETURN","return",140],["T_WHITESPACE"," ",140],["T_VARIABLE","$this",140],["T_OBJECT_OPERATOR","->",140],["T_STRING","_writer",140],";",["T_WHITESPACE","\n    ",140],"}",["T_WHITESPACE","\n\n    ",141],["T_DOC_COMMENT","\/**\n     * Initialize tarball reader\n     *\n     * @return Mage_Archive_Tar\n     *\/",143],["T_WHITESPACE","\n    ",147],["T_PROTECTED","protected",148],["T_WHITESPACE"," ",148],["T_FUNCTION","function",148],["T_WHITESPACE"," ",148],["T_STRING","_initReader",148],"(",")",["T_WHITESPACE","\n    ",148],"{",["T_WHITESPACE","\n        ",149],["T_VARIABLE","$this",150],["T_OBJECT_OPERATOR","->",150],["T_STRING","_reader",150],["T_WHITESPACE"," ",150],"=",["T_WHITESPACE"," ",150],["T_NEW","new",150],["T_WHITESPACE"," ",150],["T_STRING","Mage_Archive_Helper_File",150],"(",["T_VARIABLE","$this",150],["T_OBJECT_OPERATOR","->",150],["T_STRING","_getCurrentFile",150],"(",")",")",";",["T_WHITESPACE","\n        ",150],["T_VARIABLE","$this",151],["T_OBJECT_OPERATOR","->",151],["T_STRING","_reader",151],["T_OBJECT_OPERATOR","->",151],["T_STRING","open",151],"(",["T_CONSTANT_ENCAPSED_STRING","'r'",151],")",";",["T_WHITESPACE","\n\n        ",151],["T_RETURN","return",153],["T_WHITESPACE"," ",153],["T_VARIABLE","$this",153],";",["T_WHITESPACE","\n    ",153],"}",["T_WHITESPACE","\n\n    ",154],["T_DOC_COMMENT","\/**\n     * Destroy tarball reader\n     *\n     * @return Mage_Archive_Tar\n     *\/",156],["T_WHITESPACE","\n    ",160],["T_PROTECTED","protected",161],["T_WHITESPACE"," ",161],["T_FUNCTION","function",161],["T_WHITESPACE"," ",161],["T_STRING","_destroyReader",161],"(",")",["T_WHITESPACE","\n    ",161],"{",["T_WHITESPACE","\n        ",162],["T_IF","if",163],["T_WHITESPACE"," ",163],"(",["T_VARIABLE","$this",163],["T_OBJECT_OPERATOR","->",163],["T_STRING","_reader",163],["T_WHITESPACE"," ",163],["T_INSTANCEOF","instanceof",163],["T_WHITESPACE"," ",163],["T_STRING","Mage_Archive_Helper_File",163],")",["T_WHITESPACE"," ",163],"{",["T_WHITESPACE","\n            ",163],["T_VARIABLE","$this",164],["T_OBJECT_OPERATOR","->",164],["T_STRING","_reader",164],["T_OBJECT_OPERATOR","->",164],["T_STRING","close",164],"(",")",";",["T_WHITESPACE","\n            ",164],["T_VARIABLE","$this",165],["T_OBJECT_OPERATOR","->",165],["T_STRING","_reader",165],["T_WHITESPACE"," ",165],"=",["T_WHITESPACE"," ",165],["T_STRING","null",165],";",["T_WHITESPACE","\n        ",165],"}",["T_WHITESPACE","\n\n        ",166],["T_RETURN","return",168],["T_WHITESPACE"," ",168],["T_VARIABLE","$this",168],";",["T_WHITESPACE","\n    ",168],"}",["T_WHITESPACE","\n\n    ",169],["T_DOC_COMMENT","\/**\n     * Get tarball reader\n     *\n     * @return Mage_Archive_Helper_File\n     *\/",171],["T_WHITESPACE","\n    ",175],["T_PROTECTED","protected",176],["T_WHITESPACE"," ",176],["T_FUNCTION","function",176],["T_WHITESPACE"," ",176],["T_STRING","_getReader",176],"(",")",["T_WHITESPACE","\n    ",176],"{",["T_WHITESPACE","\n        ",177],["T_IF","if",178],["T_WHITESPACE"," ",178],"(","!",["T_VARIABLE","$this",178],["T_OBJECT_OPERATOR","->",178],["T_STRING","_reader",178],")",["T_WHITESPACE"," ",178],"{",["T_WHITESPACE","\n            ",178],["T_VARIABLE","$this",179],["T_OBJECT_OPERATOR","->",179],["T_STRING","_initReader",179],"(",")",";",["T_WHITESPACE","\n        ",179],"}",["T_WHITESPACE","\n\n        ",180],["T_RETURN","return",182],["T_WHITESPACE"," ",182],["T_VARIABLE","$this",182],["T_OBJECT_OPERATOR","->",182],["T_STRING","_reader",182],";",["T_WHITESPACE","\n    ",182],"}",["T_WHITESPACE","\n\n    ",183],["T_DOC_COMMENT","\/**\n     * Set option that define ability skip first catalog level.\n     *\n     * @param mixed $skipRoot\n     * @return Mage_Archive_Tar\n     *\/",185],["T_WHITESPACE","\n    ",190],["T_PROTECTED","protected",191],["T_WHITESPACE"," ",191],["T_FUNCTION","function",191],["T_WHITESPACE"," ",191],["T_STRING","_setSkipRoot",191],"(",["T_VARIABLE","$skipRoot",191],")",["T_WHITESPACE","\n    ",191],"{",["T_WHITESPACE","\n        ",192],["T_VARIABLE","$this",193],["T_OBJECT_OPERATOR","->",193],["T_STRING","_skipRoot",193],["T_WHITESPACE"," ",193],"=",["T_WHITESPACE"," ",193],["T_VARIABLE","$skipRoot",193],";",["T_WHITESPACE","\n        ",193],["T_RETURN","return",194],["T_WHITESPACE"," ",194],["T_VARIABLE","$this",194],";",["T_WHITESPACE","\n    ",194],"}",["T_WHITESPACE","\n\n    ",195],["T_DOC_COMMENT","\/**\n     * Set file which is packing.\n     *\n     * @param string $file\n     * @return Mage_Archive_Tar\n     *\/",197],["T_WHITESPACE","\n    ",202],["T_PROTECTED","protected",203],["T_WHITESPACE"," ",203],["T_FUNCTION","function",203],["T_WHITESPACE"," ",203],["T_STRING","_setCurrentFile",203],"(",["T_VARIABLE","$file",203],")",["T_WHITESPACE","\n    ",203],"{",["T_WHITESPACE","\n        ",204],["T_VARIABLE","$this",205],["T_OBJECT_OPERATOR","->",205],["T_STRING","_currentFile",205],["T_WHITESPACE"," ",205],"=",["T_WHITESPACE"," ",205],["T_VARIABLE","$file",205],["T_WHITESPACE"," ",205],".","(","(","!",["T_STRING","is_link",205],"(",["T_VARIABLE","$file",205],")",["T_WHITESPACE"," ",205],["T_BOOLEAN_AND","&&",205],["T_WHITESPACE"," ",205],["T_STRING","is_dir",205],"(",["T_VARIABLE","$file",205],")",["T_WHITESPACE"," ",205],["T_BOOLEAN_AND","&&",205],["T_WHITESPACE"," ",205],["T_STRING","substr",205],"(",["T_VARIABLE","$file",205],",",["T_WHITESPACE"," ",205],"-",["T_LNUMBER","1",205],")",["T_WHITESPACE"," ",205],["T_IS_NOT_EQUAL","!=",205],["T_WHITESPACE"," ",205],["T_STRING","DS",205],")",["T_WHITESPACE"," ",205],"?",["T_WHITESPACE"," ",205],["T_STRING","DS",205],["T_WHITESPACE"," ",205],":",["T_WHITESPACE"," ",205],["T_CONSTANT_ENCAPSED_STRING","''",205],")",";",["T_WHITESPACE","\n        ",205],["T_RETURN","return",206],["T_WHITESPACE"," ",206],["T_VARIABLE","$this",206],";",["T_WHITESPACE","\n    ",206],"}",["T_WHITESPACE","\n\n    ",207],["T_DOC_COMMENT","\/**\n    * Set path to file where tarball should be placed\n    *\n    * @param string $destinationFilePath\n    * @return Mage_Archive_Tar\n    *\/",209],["T_WHITESPACE","\n    ",214],["T_PROTECTED","protected",215],["T_WHITESPACE"," ",215],["T_FUNCTION","function",215],["T_WHITESPACE"," ",215],["T_STRING","_setDestinationFilePath",215],"(",["T_VARIABLE","$destinationFilePath",215],")",["T_WHITESPACE","\n    ",215],"{",["T_WHITESPACE","\n        ",216],["T_VARIABLE","$this",217],["T_OBJECT_OPERATOR","->",217],["T_STRING","_destinationFilePath",217],["T_WHITESPACE"," ",217],"=",["T_WHITESPACE"," ",217],["T_VARIABLE","$destinationFilePath",217],";",["T_WHITESPACE","\n        ",217],["T_RETURN","return",218],["T_WHITESPACE"," ",218],["T_VARIABLE","$this",218],";",["T_WHITESPACE","\n    ",218],"}",["T_WHITESPACE","\n\n    ",219],["T_DOC_COMMENT","\/**\n     * Retrieve file which is packing.\n     *\n     * @return string\n     *\/",221],["T_WHITESPACE","\n    ",225],["T_PROTECTED","protected",226],["T_WHITESPACE"," ",226],["T_FUNCTION","function",226],["T_WHITESPACE"," ",226],["T_STRING","_getCurrentFile",226],"(",")",["T_WHITESPACE","\n    ",226],"{",["T_WHITESPACE","\n        ",227],["T_RETURN","return",228],["T_WHITESPACE"," ",228],["T_VARIABLE","$this",228],["T_OBJECT_OPERATOR","->",228],["T_STRING","_currentFile",228],";",["T_WHITESPACE","\n    ",228],"}",["T_WHITESPACE","\n\n    ",229],["T_DOC_COMMENT","\/**\n     * Set path to file which is packing.\n     *\n     * @param string $path\n     * @return Mage_Archive_Tar\n     *\/",231],["T_WHITESPACE","\n    ",236],["T_PROTECTED","protected",237],["T_WHITESPACE"," ",237],["T_FUNCTION","function",237],["T_WHITESPACE"," ",237],["T_STRING","_setCurrentPath",237],"(",["T_VARIABLE","$path",237],")",["T_WHITESPACE","\n    ",237],"{",["T_WHITESPACE","\n        ",238],["T_IF","if",239],["T_WHITESPACE"," ",239],"(",["T_VARIABLE","$this",239],["T_OBJECT_OPERATOR","->",239],["T_STRING","_skipRoot",239],["T_WHITESPACE"," ",239],["T_BOOLEAN_AND","&&",239],["T_WHITESPACE"," ",239],["T_STRING","is_dir",239],"(",["T_VARIABLE","$path",239],")",")",["T_WHITESPACE"," ",239],"{",["T_WHITESPACE","\n            ",239],["T_VARIABLE","$this",240],["T_OBJECT_OPERATOR","->",240],["T_STRING","_currentPath",240],["T_WHITESPACE"," ",240],"=",["T_WHITESPACE"," ",240],["T_VARIABLE","$path",240],".","(",["T_STRING","substr",240],"(",["T_VARIABLE","$path",240],",",["T_WHITESPACE"," ",240],"-",["T_LNUMBER","1",240],")",["T_IS_NOT_EQUAL","!=",240],["T_STRING","DS",240],"?",["T_STRING","DS",240],":",["T_CONSTANT_ENCAPSED_STRING","''",240],")",";",["T_WHITESPACE","\n        ",240],"}",["T_WHITESPACE"," ",241],["T_ELSE","else",241],["T_WHITESPACE"," ",241],"{",["T_WHITESPACE","\n            ",241],["T_VARIABLE","$this",242],["T_OBJECT_OPERATOR","->",242],["T_STRING","_currentPath",242],["T_WHITESPACE"," ",242],"=",["T_WHITESPACE"," ",242],["T_STRING","dirname",242],"(",["T_VARIABLE","$path",242],")",["T_WHITESPACE"," ",242],".",["T_WHITESPACE"," ",242],["T_STRING","DS",242],";",["T_WHITESPACE","\n        ",242],"}",["T_WHITESPACE","\n        ",243],["T_RETURN","return",244],["T_WHITESPACE"," ",244],["T_VARIABLE","$this",244],";",["T_WHITESPACE","\n    ",244],"}",["T_WHITESPACE","\n\n    ",245],["T_DOC_COMMENT","\/**\n     * Retrieve path to file which is packing.\n     *\n     * @return string\n     *\/",247],["T_WHITESPACE","\n    ",251],["T_PROTECTED","protected",252],["T_WHITESPACE"," ",252],["T_FUNCTION","function",252],["T_WHITESPACE"," ",252],["T_STRING","_getCurrentPath",252],"(",")",["T_WHITESPACE","\n    ",252],"{",["T_WHITESPACE","\n        ",253],["T_RETURN","return",254],["T_WHITESPACE"," ",254],["T_VARIABLE","$this",254],["T_OBJECT_OPERATOR","->",254],["T_STRING","_currentPath",254],";",["T_WHITESPACE","\n    ",254],"}",["T_WHITESPACE","\n\n    ",255],["T_DOC_COMMENT","\/**\n     * Walk through directory and add to tar file or directory.\n     * Result is packed string on TAR format.\n     *\n     * @deprecated after 1.7.0.0\n     * @param boolean $skipRoot\n     * @return string\n     *\/",257],["T_WHITESPACE","\n    ",264],["T_PROTECTED","protected",265],["T_WHITESPACE"," ",265],["T_FUNCTION","function",265],["T_WHITESPACE"," ",265],["T_STRING","_packToTar",265],"(",["T_VARIABLE","$skipRoot",265],"=",["T_STRING","false",265],")",["T_WHITESPACE","\n    ",265],"{",["T_WHITESPACE","\n        ",266],["T_VARIABLE","$file",267],["T_WHITESPACE"," ",267],"=",["T_WHITESPACE"," ",267],["T_VARIABLE","$this",267],["T_OBJECT_OPERATOR","->",267],["T_STRING","_getCurrentFile",267],"(",")",";",["T_WHITESPACE","\n        ",267],["T_VARIABLE","$header",268],["T_WHITESPACE"," ",268],"=",["T_WHITESPACE"," ",268],["T_CONSTANT_ENCAPSED_STRING","''",268],";",["T_WHITESPACE","\n        ",268],["T_VARIABLE","$data",269],["T_WHITESPACE"," ",269],"=",["T_WHITESPACE"," ",269],["T_CONSTANT_ENCAPSED_STRING","''",269],";",["T_WHITESPACE","\n        ",269],["T_IF","if",270],["T_WHITESPACE"," ",270],"(","!",["T_VARIABLE","$skipRoot",270],")",["T_WHITESPACE"," ",270],"{",["T_WHITESPACE","\n            ",270],["T_VARIABLE","$header",271],["T_WHITESPACE"," ",271],"=",["T_WHITESPACE"," ",271],["T_VARIABLE","$this",271],["T_OBJECT_OPERATOR","->",271],["T_STRING","_composeHeader",271],"(",")",";",["T_WHITESPACE","\n            ",271],["T_VARIABLE","$data",272],["T_WHITESPACE"," ",272],"=",["T_WHITESPACE"," ",272],["T_VARIABLE","$this",272],["T_OBJECT_OPERATOR","->",272],["T_STRING","_readFile",272],"(",["T_VARIABLE","$file",272],")",";",["T_WHITESPACE","\n            ",272],["T_VARIABLE","$data",273],["T_WHITESPACE"," ",273],"=",["T_WHITESPACE"," ",273],["T_STRING","str_pad",273],"(",["T_VARIABLE","$data",273],",",["T_WHITESPACE"," ",273],["T_STRING","floor",273],"(","(","(",["T_STRING","is_dir",273],"(",["T_VARIABLE","$file",273],")",["T_WHITESPACE"," ",273],"?",["T_WHITESPACE"," ",273],["T_LNUMBER","0",273],["T_WHITESPACE"," ",273],":",["T_WHITESPACE"," ",273],["T_STRING","filesize",273],"(",["T_VARIABLE","$file",273],")",")",["T_WHITESPACE"," ",273],"+",["T_WHITESPACE"," ",273],["T_LNUMBER","512",273],["T_WHITESPACE"," ",273],"-",["T_WHITESPACE"," ",273],["T_LNUMBER","1",273],")",["T_WHITESPACE"," ",273],"\/",["T_WHITESPACE"," ",273],["T_LNUMBER","512",273],")",["T_WHITESPACE"," ",273],"*",["T_WHITESPACE"," ",273],["T_LNUMBER","512",273],",",["T_WHITESPACE"," ",273],["T_CONSTANT_ENCAPSED_STRING","\"\\0\"",273],")",";",["T_WHITESPACE","\n        ",273],"}",["T_WHITESPACE","\n        ",274],["T_VARIABLE","$sub",275],["T_WHITESPACE"," ",275],"=",["T_WHITESPACE"," ",275],["T_CONSTANT_ENCAPSED_STRING","''",275],";",["T_WHITESPACE","\n        ",275],["T_IF","if",276],["T_WHITESPACE"," ",276],"(",["T_STRING","is_dir",276],"(",["T_VARIABLE","$file",276],")",")",["T_WHITESPACE"," ",276],"{",["T_WHITESPACE","\n            ",276],["T_VARIABLE","$treeDir",277],["T_WHITESPACE"," ",277],"=",["T_WHITESPACE"," ",277],["T_STRING","scandir",277],"(",["T_VARIABLE","$file",277],")",";",["T_WHITESPACE","\n            ",277],["T_IF","if",278],["T_WHITESPACE"," ",278],"(",["T_EMPTY","empty",278],"(",["T_VARIABLE","$treeDir",278],")",")",["T_WHITESPACE"," ",278],"{",["T_WHITESPACE","\n                ",278],["T_THROW","throw",279],["T_WHITESPACE"," ",279],["T_NEW","new",279],["T_WHITESPACE"," ",279],["T_STRING","Mage_Exception",279],"(",["T_CONSTANT_ENCAPSED_STRING","'Can\\'t scan dir: '",279],["T_WHITESPACE"," ",279],".",["T_WHITESPACE"," ",279],["T_VARIABLE","$file",279],")",";",["T_WHITESPACE","\n            ",279],"}",["T_WHITESPACE","\n            ",280],["T_STRING","array_shift",281],"(",["T_VARIABLE","$treeDir",281],")",";",["T_WHITESPACE"," ",281],["T_COMMENT","\/* remove  '.\/'*\/",281],["T_WHITESPACE","\n            ",281],["T_STRING","array_shift",282],"(",["T_VARIABLE","$treeDir",282],")",";",["T_WHITESPACE"," ",282],["T_COMMENT","\/* remove  '..\/'*\/",282],["T_WHITESPACE","\n            ",282],["T_FOREACH","foreach",283],["T_WHITESPACE"," ",283],"(",["T_VARIABLE","$treeDir",283],["T_WHITESPACE"," ",283],["T_AS","as",283],["T_WHITESPACE"," ",283],["T_VARIABLE","$item",283],")",["T_WHITESPACE"," ",283],"{",["T_WHITESPACE","\n                ",283],["T_VARIABLE","$sub",284],["T_WHITESPACE"," ",284],["T_CONCAT_EQUAL",".=",284],["T_WHITESPACE"," ",284],["T_VARIABLE","$this",284],["T_OBJECT_OPERATOR","->",284],["T_STRING","_setCurrentFile",284],"(",["T_VARIABLE","$file",284],".",["T_VARIABLE","$item",284],")",["T_OBJECT_OPERATOR","->",284],["T_STRING","_packToTar",284],"(",["T_STRING","false",284],")",";",["T_WHITESPACE","\n            ",284],"}",["T_WHITESPACE","\n        ",285],"}",["T_WHITESPACE","\n        ",286],["T_VARIABLE","$tarData",287],["T_WHITESPACE"," ",287],"=",["T_WHITESPACE"," ",287],["T_VARIABLE","$header",287],["T_WHITESPACE"," ",287],".",["T_WHITESPACE"," ",287],["T_VARIABLE","$data",287],["T_WHITESPACE"," ",287],".",["T_WHITESPACE"," ",287],["T_VARIABLE","$sub",287],";",["T_WHITESPACE","\n        ",287],["T_VARIABLE","$tarData",288],["T_WHITESPACE"," ",288],"=",["T_WHITESPACE"," ",288],["T_STRING","str_pad",288],"(",["T_VARIABLE","$tarData",288],",",["T_WHITESPACE"," ",288],["T_STRING","floor",288],"(","(",["T_STRING","strlen",288],"(",["T_VARIABLE","$tarData",288],")",["T_WHITESPACE"," ",288],"-",["T_WHITESPACE"," ",288],["T_LNUMBER","1",288],")",["T_WHITESPACE"," ",288],"\/",["T_WHITESPACE"," ",288],["T_LNUMBER","1536",288],")",["T_WHITESPACE"," ",288],"*",["T_WHITESPACE"," ",288],["T_LNUMBER","1536",288],",",["T_WHITESPACE"," ",288],["T_CONSTANT_ENCAPSED_STRING","\"\\0\"",288],")",";",["T_WHITESPACE","\n        ",288],["T_RETURN","return",289],["T_WHITESPACE"," ",289],["T_VARIABLE","$tarData",289],";",["T_WHITESPACE","\n    ",289],"}",["T_WHITESPACE","\n\n    ",290],["T_DOC_COMMENT","\/**\n     * Recursively walk through file tree and create tarball\n     *\n     * @param boolean $skipRoot\n     * @param boolean $finalize\n     * @throws Mage_Exception\n     *\/",292],["T_WHITESPACE","\n    ",298],["T_PROTECTED","protected",299],["T_WHITESPACE"," ",299],["T_FUNCTION","function",299],["T_WHITESPACE"," ",299],["T_STRING","_createTar",299],"(",["T_VARIABLE","$skipRoot",299],["T_WHITESPACE"," ",299],"=",["T_WHITESPACE"," ",299],["T_STRING","false",299],",",["T_WHITESPACE"," ",299],["T_VARIABLE","$finalize",299],["T_WHITESPACE"," ",299],"=",["T_WHITESPACE"," ",299],["T_STRING","false",299],")",["T_WHITESPACE","\n    ",299],"{",["T_WHITESPACE","\n        ",300],["T_IF","if",301],["T_WHITESPACE"," ",301],"(","!",["T_VARIABLE","$skipRoot",301],")",["T_WHITESPACE"," ",301],"{",["T_WHITESPACE","\n            ",301],["T_VARIABLE","$this",302],["T_OBJECT_OPERATOR","->",302],["T_STRING","_packAndWriteCurrentFile",302],"(",")",";",["T_WHITESPACE","\n        ",302],"}",["T_WHITESPACE","\n\n        ",303],["T_VARIABLE","$file",305],["T_WHITESPACE"," ",305],"=",["T_WHITESPACE"," ",305],["T_VARIABLE","$this",305],["T_OBJECT_OPERATOR","->",305],["T_STRING","_getCurrentFile",305],"(",")",";",["T_WHITESPACE","\n\n        ",305],["T_IF","if",307],["T_WHITESPACE"," ",307],"(",["T_STRING","is_dir",307],"(",["T_VARIABLE","$file",307],")",")",["T_WHITESPACE"," ",307],"{",["T_WHITESPACE","\n            ",307],["T_VARIABLE","$dirFiles",308],["T_WHITESPACE"," ",308],"=",["T_WHITESPACE"," ",308],["T_STRING","scandir",308],"(",["T_VARIABLE","$file",308],")",";",["T_WHITESPACE","\n\n            ",308],["T_IF","if",310],["T_WHITESPACE"," ",310],"(",["T_STRING","false",310],["T_WHITESPACE"," ",310],["T_IS_IDENTICAL","===",310],["T_WHITESPACE"," ",310],["T_VARIABLE","$dirFiles",310],")",["T_WHITESPACE"," ",310],"{",["T_WHITESPACE","\n                ",310],["T_THROW","throw",311],["T_WHITESPACE"," ",311],["T_NEW","new",311],["T_WHITESPACE"," ",311],["T_STRING","Mage_Exception",311],"(",["T_CONSTANT_ENCAPSED_STRING","'Can\\'t scan dir: '",311],["T_WHITESPACE"," ",311],".",["T_WHITESPACE"," ",311],["T_VARIABLE","$file",311],")",";",["T_WHITESPACE","\n            ",311],"}",["T_WHITESPACE","\n\n            ",312],["T_STRING","array_shift",314],"(",["T_VARIABLE","$dirFiles",314],")",";",["T_WHITESPACE"," ",314],["T_COMMENT","\/* remove  '.\/'*\/",314],["T_WHITESPACE","\n            ",314],["T_STRING","array_shift",315],"(",["T_VARIABLE","$dirFiles",315],")",";",["T_WHITESPACE"," ",315],["T_COMMENT","\/* remove  '..\/'*\/",315],["T_WHITESPACE","\n\n            ",315],["T_FOREACH","foreach",317],["T_WHITESPACE"," ",317],"(",["T_VARIABLE","$dirFiles",317],["T_WHITESPACE"," ",317],["T_AS","as",317],["T_WHITESPACE"," ",317],["T_VARIABLE","$item",317],")",["T_WHITESPACE"," ",317],"{",["T_WHITESPACE","\n                ",317],["T_VARIABLE","$this",318],["T_OBJECT_OPERATOR","->",318],["T_STRING","_setCurrentFile",318],"(",["T_VARIABLE","$file",318],["T_WHITESPACE"," ",318],".",["T_WHITESPACE"," ",318],["T_VARIABLE","$item",318],")",["T_OBJECT_OPERATOR","->",318],["T_STRING","_createTar",318],"(",")",";",["T_WHITESPACE","\n            ",318],"}",["T_WHITESPACE","\n        ",319],"}",["T_WHITESPACE","\n\n        ",320],["T_IF","if",322],["T_WHITESPACE"," ",322],"(",["T_VARIABLE","$finalize",322],")",["T_WHITESPACE"," ",322],"{",["T_WHITESPACE","\n            ",322],["T_VARIABLE","$this",323],["T_OBJECT_OPERATOR","->",323],["T_STRING","_getWriter",323],"(",")",["T_OBJECT_OPERATOR","->",323],["T_STRING","write",323],"(",["T_STRING","str_repeat",323],"(",["T_CONSTANT_ENCAPSED_STRING","\"\\0\"",323],",",["T_WHITESPACE"," ",323],["T_STRING","self",323],["T_DOUBLE_COLON","::",323],["T_STRING","TAR_BLOCK_SIZE",323],["T_WHITESPACE"," ",323],"*",["T_WHITESPACE"," ",323],["T_LNUMBER","12",323],")",")",";",["T_WHITESPACE","\n        ",323],"}",["T_WHITESPACE","\n    ",324],"}",["T_WHITESPACE","\n\n    ",325],["T_DOC_COMMENT","\/**\n     * Write current file to tarball\n     *\/",327],["T_WHITESPACE","\n    ",329],["T_PROTECTED","protected",330],["T_WHITESPACE"," ",330],["T_FUNCTION","function",330],["T_WHITESPACE"," ",330],["T_STRING","_packAndWriteCurrentFile",330],"(",")",["T_WHITESPACE","\n    ",330],"{",["T_WHITESPACE","\n        ",331],["T_VARIABLE","$archiveWriter",332],["T_WHITESPACE"," ",332],"=",["T_WHITESPACE"," ",332],["T_VARIABLE","$this",332],["T_OBJECT_OPERATOR","->",332],["T_STRING","_getWriter",332],"(",")",";",["T_WHITESPACE","\n        ",332],["T_VARIABLE","$archiveWriter",333],["T_OBJECT_OPERATOR","->",333],["T_STRING","write",333],"(",["T_VARIABLE","$this",333],["T_OBJECT_OPERATOR","->",333],["T_STRING","_composeHeader",333],"(",")",")",";",["T_WHITESPACE","\n\n        ",333],["T_VARIABLE","$currentFile",335],["T_WHITESPACE"," ",335],"=",["T_WHITESPACE"," ",335],["T_VARIABLE","$this",335],["T_OBJECT_OPERATOR","->",335],["T_STRING","_getCurrentFile",335],"(",")",";",["T_WHITESPACE","\n\n        ",335],["T_VARIABLE","$fileSize",337],["T_WHITESPACE"," ",337],"=",["T_WHITESPACE"," ",337],["T_LNUMBER","0",337],";",["T_WHITESPACE","\n\n        ",337],["T_IF","if",339],["T_WHITESPACE"," ",339],"(",["T_STRING","is_file",339],"(",["T_VARIABLE","$currentFile",339],")",["T_WHITESPACE"," ",339],["T_BOOLEAN_AND","&&",339],["T_WHITESPACE"," ",339],"!",["T_STRING","is_link",339],"(",["T_VARIABLE","$currentFile",339],")",")",["T_WHITESPACE"," ",339],"{",["T_WHITESPACE","\n            ",339],["T_VARIABLE","$fileReader",340],["T_WHITESPACE"," ",340],"=",["T_WHITESPACE"," ",340],["T_NEW","new",340],["T_WHITESPACE"," ",340],["T_STRING","Mage_Archive_Helper_File",340],"(",["T_VARIABLE","$currentFile",340],")",";",["T_WHITESPACE","\n            ",340],["T_VARIABLE","$fileReader",341],["T_OBJECT_OPERATOR","->",341],["T_STRING","open",341],"(",["T_CONSTANT_ENCAPSED_STRING","'r'",341],")",";",["T_WHITESPACE","\n\n            ",341],["T_WHILE","while",343],["T_WHITESPACE"," ",343],"(","!",["T_VARIABLE","$fileReader",343],["T_OBJECT_OPERATOR","->",343],["T_STRING","eof",343],"(",")",")",["T_WHITESPACE"," ",343],"{",["T_WHITESPACE","\n                ",343],["T_VARIABLE","$archiveWriter",344],["T_OBJECT_OPERATOR","->",344],["T_STRING","write",344],"(",["T_VARIABLE","$fileReader",344],["T_OBJECT_OPERATOR","->",344],["T_STRING","read",344],"(",")",")",";",["T_WHITESPACE","\n            ",344],"}",["T_WHITESPACE","\n\n            ",345],["T_VARIABLE","$fileReader",347],["T_OBJECT_OPERATOR","->",347],["T_STRING","close",347],"(",")",";",["T_WHITESPACE","\n\n            ",347],["T_VARIABLE","$fileSize",349],["T_WHITESPACE"," ",349],"=",["T_WHITESPACE"," ",349],["T_STRING","filesize",349],"(",["T_VARIABLE","$currentFile",349],")",";",["T_WHITESPACE","\n        ",349],"}",["T_WHITESPACE","\n\n        ",350],["T_VARIABLE","$appendZerosCount",352],["T_WHITESPACE"," ",352],"=",["T_WHITESPACE"," ",352],"(",["T_STRING","self",352],["T_DOUBLE_COLON","::",352],["T_STRING","TAR_BLOCK_SIZE",352],["T_WHITESPACE"," ",352],"-",["T_WHITESPACE"," ",352],["T_VARIABLE","$fileSize",352],["T_WHITESPACE"," ",352],"%",["T_WHITESPACE"," ",352],["T_STRING","self",352],["T_DOUBLE_COLON","::",352],["T_STRING","TAR_BLOCK_SIZE",352],")",["T_WHITESPACE"," ",352],"%",["T_WHITESPACE"," ",352],["T_STRING","self",352],["T_DOUBLE_COLON","::",352],["T_STRING","TAR_BLOCK_SIZE",352],";",["T_WHITESPACE","\n        ",352],["T_VARIABLE","$archiveWriter",353],["T_OBJECT_OPERATOR","->",353],["T_STRING","write",353],"(",["T_STRING","str_repeat",353],"(",["T_CONSTANT_ENCAPSED_STRING","\"\\0\"",353],",",["T_WHITESPACE"," ",353],["T_VARIABLE","$appendZerosCount",353],")",")",";",["T_WHITESPACE","\n    ",353],"}",["T_WHITESPACE","\n\n    ",354],["T_DOC_COMMENT","\/**\n     * Compose header for current file in TAR format.\n     * If length of file's name greater 100 characters,\n     * method breaks header into two pieces. First contains\n     * header and data with long name. Second contain only header.\n     *\n     * @param boolean $long\n     * @return string\n     *\/",356],["T_WHITESPACE","\n    ",364],["T_PROTECTED","protected",365],["T_WHITESPACE"," ",365],["T_FUNCTION","function",365],["T_WHITESPACE"," ",365],["T_STRING","_composeHeader",365],"(",["T_VARIABLE","$long",365],["T_WHITESPACE"," ",365],"=",["T_WHITESPACE"," ",365],["T_STRING","false",365],")",["T_WHITESPACE","\n    ",365],"{",["T_WHITESPACE","\n        ",366],["T_VARIABLE","$file",367],["T_WHITESPACE"," ",367],"=",["T_WHITESPACE"," ",367],["T_VARIABLE","$this",367],["T_OBJECT_OPERATOR","->",367],["T_STRING","_getCurrentFile",367],"(",")",";",["T_WHITESPACE","\n        ",367],["T_VARIABLE","$path",368],["T_WHITESPACE"," ",368],"=",["T_WHITESPACE"," ",368],["T_VARIABLE","$this",368],["T_OBJECT_OPERATOR","->",368],["T_STRING","_getCurrentPath",368],"(",")",";",["T_WHITESPACE","\n        ",368],["T_VARIABLE","$infoFile",369],["T_WHITESPACE"," ",369],"=",["T_WHITESPACE"," ",369],["T_STRING","stat",369],"(",["T_VARIABLE","$file",369],")",";",["T_WHITESPACE","\n        ",369],["T_VARIABLE","$nameFile",370],["T_WHITESPACE"," ",370],"=",["T_WHITESPACE"," ",370],["T_STRING","str_replace",370],"(",["T_VARIABLE","$path",370],",",["T_WHITESPACE"," ",370],["T_CONSTANT_ENCAPSED_STRING","''",370],",",["T_WHITESPACE"," ",370],["T_VARIABLE","$file",370],")",";",["T_WHITESPACE","\n        ",370],["T_VARIABLE","$nameFile",371],["T_WHITESPACE"," ",371],"=",["T_WHITESPACE"," ",371],["T_STRING","str_replace",371],"(",["T_CONSTANT_ENCAPSED_STRING","'\\\\'",371],",",["T_WHITESPACE"," ",371],["T_CONSTANT_ENCAPSED_STRING","'\/'",371],",",["T_WHITESPACE"," ",371],["T_VARIABLE","$nameFile",371],")",";",["T_WHITESPACE","\n        ",371],["T_VARIABLE","$packedHeader",372],["T_WHITESPACE"," ",372],"=",["T_WHITESPACE"," ",372],["T_CONSTANT_ENCAPSED_STRING","''",372],";",["T_WHITESPACE","\n        ",372],["T_VARIABLE","$longHeader",373],["T_WHITESPACE"," ",373],"=",["T_WHITESPACE"," ",373],["T_CONSTANT_ENCAPSED_STRING","''",373],";",["T_WHITESPACE","\n        ",373],["T_IF","if",374],["T_WHITESPACE"," ",374],"(","!",["T_VARIABLE","$long",374],["T_WHITESPACE"," ",374],["T_BOOLEAN_AND","&&",374],["T_WHITESPACE"," ",374],["T_STRING","strlen",374],"(",["T_VARIABLE","$nameFile",374],")",">",["T_LNUMBER","100",374],")",["T_WHITESPACE"," ",374],"{",["T_WHITESPACE","\n            ",374],["T_VARIABLE","$longHeader",375],["T_WHITESPACE"," ",375],"=",["T_WHITESPACE"," ",375],["T_VARIABLE","$this",375],["T_OBJECT_OPERATOR","->",375],["T_STRING","_composeHeader",375],"(",["T_STRING","true",375],")",";",["T_WHITESPACE","\n            ",375],["T_VARIABLE","$longHeader",376],["T_WHITESPACE"," ",376],["T_CONCAT_EQUAL",".=",376],["T_WHITESPACE"," ",376],["T_STRING","str_pad",376],"(",["T_VARIABLE","$nameFile",376],",",["T_WHITESPACE"," ",376],["T_STRING","floor",376],"(","(",["T_STRING","strlen",376],"(",["T_VARIABLE","$nameFile",376],")",["T_WHITESPACE"," ",376],"+",["T_WHITESPACE"," ",376],["T_LNUMBER","512",376],["T_WHITESPACE"," ",376],"-",["T_WHITESPACE"," ",376],["T_LNUMBER","1",376],")",["T_WHITESPACE"," ",376],"\/",["T_WHITESPACE"," ",376],["T_LNUMBER","512",376],")",["T_WHITESPACE"," ",376],"*",["T_WHITESPACE"," ",376],["T_LNUMBER","512",376],",",["T_WHITESPACE"," ",376],["T_CONSTANT_ENCAPSED_STRING","\"\\0\"",376],")",";",["T_WHITESPACE","\n        ",376],"}",["T_WHITESPACE","\n        ",377],["T_VARIABLE","$header",378],["T_WHITESPACE"," ",378],"=",["T_WHITESPACE"," ",378],["T_ARRAY","array",378],"(",")",";",["T_WHITESPACE","\n        ",378],["T_VARIABLE","$header",379],"[",["T_CONSTANT_ENCAPSED_STRING","'100-name'",379],"]",["T_WHITESPACE","       ",379],"=",["T_WHITESPACE"," ",379],["T_VARIABLE","$long",379],"?",["T_CONSTANT_ENCAPSED_STRING","'.\/.\/@LongLink'",379],":",["T_STRING","substr",379],"(",["T_VARIABLE","$nameFile",379],",",["T_WHITESPACE"," ",379],["T_LNUMBER","0",379],",",["T_WHITESPACE"," ",379],["T_LNUMBER","100",379],")",";",["T_WHITESPACE","\n        ",379],["T_VARIABLE","$header",380],"[",["T_CONSTANT_ENCAPSED_STRING","'8-mode'",380],"]",["T_WHITESPACE","         ",380],"=",["T_WHITESPACE"," ",380],["T_VARIABLE","$long",380],["T_WHITESPACE"," ",380],"?",["T_WHITESPACE"," ",380],["T_CONSTANT_ENCAPSED_STRING","'       '",380],["T_WHITESPACE","\n            ",380],":",["T_WHITESPACE"," ",381],["T_STRING","str_pad",381],"(",["T_STRING","substr",381],"(",["T_STRING","sprintf",381],"(",["T_CONSTANT_ENCAPSED_STRING","\"%07o\"",381],",",["T_WHITESPACE"," ",381],["T_VARIABLE","$infoFile",381],"[",["T_CONSTANT_ENCAPSED_STRING","'mode'",381],"]",")",",","-",["T_LNUMBER","4",381],")",",",["T_WHITESPACE"," ",381],["T_LNUMBER","6",381],",",["T_WHITESPACE"," ",381],["T_CONSTANT_ENCAPSED_STRING","'0'",381],",",["T_WHITESPACE"," ",381],["T_STRING","STR_PAD_LEFT",381],")",";",["T_WHITESPACE","\n        ",381],["T_VARIABLE","$header",382],"[",["T_CONSTANT_ENCAPSED_STRING","'8-uid'",382],"]",["T_WHITESPACE","          ",382],"=",["T_WHITESPACE"," ",382],["T_VARIABLE","$long",382],["T_WHITESPACE"," ",382],["T_BOOLEAN_OR","||",382],["T_WHITESPACE"," ",382],["T_VARIABLE","$infoFile",382],"[",["T_CONSTANT_ENCAPSED_STRING","'uid'",382],"]",["T_IS_EQUAL","==",382],["T_LNUMBER","0",382],"?",["T_CONSTANT_ENCAPSED_STRING","\"\\0\\0\\0\\0\\0\\0\\0\"",382],":",["T_STRING","sprintf",382],"(",["T_CONSTANT_ENCAPSED_STRING","\"%07o\"",382],",",["T_WHITESPACE"," ",382],["T_VARIABLE","$infoFile",382],"[",["T_CONSTANT_ENCAPSED_STRING","'uid'",382],"]",")",";",["T_WHITESPACE","\n        ",382],["T_VARIABLE","$header",383],"[",["T_CONSTANT_ENCAPSED_STRING","'8-gid'",383],"]",["T_WHITESPACE","          ",383],"=",["T_WHITESPACE"," ",383],["T_VARIABLE","$long",383],["T_WHITESPACE"," ",383],["T_BOOLEAN_OR","||",383],["T_WHITESPACE"," ",383],["T_VARIABLE","$infoFile",383],"[",["T_CONSTANT_ENCAPSED_STRING","'gid'",383],"]",["T_IS_EQUAL","==",383],["T_LNUMBER","0",383],"?",["T_CONSTANT_ENCAPSED_STRING","\"\\0\\0\\0\\0\\0\\0\\0\"",383],":",["T_STRING","sprintf",383],"(",["T_CONSTANT_ENCAPSED_STRING","\"%07o\"",383],",",["T_WHITESPACE"," ",383],["T_VARIABLE","$infoFile",383],"[",["T_CONSTANT_ENCAPSED_STRING","'gid'",383],"]",")",";",["T_WHITESPACE","\n        ",383],["T_VARIABLE","$header",384],"[",["T_CONSTANT_ENCAPSED_STRING","'12-size'",384],"]",["T_WHITESPACE","        ",384],"=",["T_WHITESPACE"," ",384],["T_VARIABLE","$long",384],["T_WHITESPACE"," ",384],"?",["T_WHITESPACE"," ",384],["T_STRING","sprintf",384],"(",["T_CONSTANT_ENCAPSED_STRING","\"%011o\"",384],",",["T_WHITESPACE"," ",384],["T_STRING","strlen",384],"(",["T_VARIABLE","$nameFile",384],")",")",["T_WHITESPACE"," ",384],":",["T_WHITESPACE"," ",384],["T_STRING","sprintf",384],"(",["T_CONSTANT_ENCAPSED_STRING","\"%011o\"",384],",",["T_WHITESPACE"," ",384],["T_STRING","is_dir",384],"(",["T_VARIABLE","$file",384],")",["T_WHITESPACE","\n            ",384],"?",["T_WHITESPACE"," ",385],["T_LNUMBER","0",385],["T_WHITESPACE"," ",385],":",["T_WHITESPACE"," ",385],["T_STRING","filesize",385],"(",["T_VARIABLE","$file",385],")",")",";",["T_WHITESPACE","\n        ",385],["T_VARIABLE","$header",386],"[",["T_CONSTANT_ENCAPSED_STRING","'12-mtime'",386],"]",["T_WHITESPACE","       ",386],"=",["T_WHITESPACE"," ",386],["T_VARIABLE","$long",386],"?",["T_CONSTANT_ENCAPSED_STRING","'00000000000'",386],":",["T_STRING","sprintf",386],"(",["T_CONSTANT_ENCAPSED_STRING","\"%011o\"",386],",",["T_WHITESPACE"," ",386],["T_VARIABLE","$infoFile",386],"[",["T_CONSTANT_ENCAPSED_STRING","'mtime'",386],"]",")",";",["T_WHITESPACE","\n        ",386],["T_VARIABLE","$header",387],"[",["T_CONSTANT_ENCAPSED_STRING","'8-check'",387],"]",["T_WHITESPACE","        ",387],"=",["T_WHITESPACE"," ",387],["T_STRING","sprintf",387],"(",["T_CONSTANT_ENCAPSED_STRING","'% 8s'",387],",",["T_WHITESPACE"," ",387],["T_CONSTANT_ENCAPSED_STRING","''",387],")",";",["T_WHITESPACE","\n        ",387],["T_VARIABLE","$header",388],"[",["T_CONSTANT_ENCAPSED_STRING","'1-type'",388],"]",["T_WHITESPACE","         ",388],"=",["T_WHITESPACE"," ",388],["T_VARIABLE","$long",388],["T_WHITESPACE"," ",388],"?",["T_WHITESPACE"," ",388],["T_CONSTANT_ENCAPSED_STRING","'L'",388],["T_WHITESPACE"," ",388],":",["T_WHITESPACE"," ",388],"(",["T_STRING","is_link",388],"(",["T_VARIABLE","$file",388],")",["T_WHITESPACE"," ",388],"?",["T_WHITESPACE"," ",388],["T_LNUMBER","2",388],["T_WHITESPACE"," ",388],":",["T_WHITESPACE"," ",388],"(",["T_STRING","is_dir",388],"(",["T_VARIABLE","$file",388],")",["T_WHITESPACE"," ",388],"?",["T_WHITESPACE"," ",388],["T_LNUMBER","5",388],["T_WHITESPACE"," ",388],":",["T_WHITESPACE"," ",388],["T_LNUMBER","0",388],")",")",";",["T_WHITESPACE","\n        ",388],["T_VARIABLE","$header",389],"[",["T_CONSTANT_ENCAPSED_STRING","'100-symlink'",389],"]",["T_WHITESPACE","    ",389],"=",["T_WHITESPACE"," ",389],["T_STRING","is_link",389],"(",["T_VARIABLE","$file",389],")",["T_WHITESPACE"," ",389],"?",["T_WHITESPACE"," ",389],["T_STRING","readlink",389],"(",["T_VARIABLE","$file",389],")",["T_WHITESPACE"," ",389],":",["T_WHITESPACE"," ",389],["T_CONSTANT_ENCAPSED_STRING","''",389],";",["T_WHITESPACE","\n        ",389],["T_VARIABLE","$header",390],"[",["T_CONSTANT_ENCAPSED_STRING","'6-magic'",390],"]",["T_WHITESPACE","        ",390],"=",["T_WHITESPACE"," ",390],["T_CONSTANT_ENCAPSED_STRING","'ustar '",390],";",["T_WHITESPACE","\n        ",390],["T_VARIABLE","$header",391],"[",["T_CONSTANT_ENCAPSED_STRING","'2-version'",391],"]",["T_WHITESPACE","      ",391],"=",["T_WHITESPACE"," ",391],["T_CONSTANT_ENCAPSED_STRING","' '",391],";",["T_WHITESPACE","\n        ",391],["T_VARIABLE","$a",392],"=",["T_STRING","function_exists",392],"(",["T_CONSTANT_ENCAPSED_STRING","'posix_getpwuid'",392],")","?",["T_STRING","posix_getpwuid",392],["T_WHITESPACE"," ",392],"(",["T_STRING","fileowner",392],"(",["T_VARIABLE","$file",392],")",")",":",["T_ARRAY","array",392],"(",["T_CONSTANT_ENCAPSED_STRING","'name'",392],["T_DOUBLE_ARROW","=>",392],["T_CONSTANT_ENCAPSED_STRING","''",392],")",";",["T_WHITESPACE","\n        ",392],["T_VARIABLE","$header",393],"[",["T_CONSTANT_ENCAPSED_STRING","'32-uname'",393],"]",["T_WHITESPACE","       ",393],"=",["T_WHITESPACE"," ",393],["T_VARIABLE","$a",393],"[",["T_CONSTANT_ENCAPSED_STRING","'name'",393],"]",";",["T_WHITESPACE","\n        ",393],["T_VARIABLE","$a",394],"=",["T_STRING","function_exists",394],"(",["T_CONSTANT_ENCAPSED_STRING","'posix_getgrgid'",394],")","?",["T_STRING","posix_getgrgid",394],["T_WHITESPACE"," ",394],"(",["T_STRING","filegroup",394],"(",["T_VARIABLE","$file",394],")",")",":",["T_ARRAY","array",394],"(",["T_CONSTANT_ENCAPSED_STRING","'name'",394],["T_DOUBLE_ARROW","=>",394],["T_CONSTANT_ENCAPSED_STRING","''",394],")",";",["T_WHITESPACE","\n        ",394],["T_VARIABLE","$header",395],"[",["T_CONSTANT_ENCAPSED_STRING","'32-gname'",395],"]",["T_WHITESPACE","       ",395],"=",["T_WHITESPACE"," ",395],["T_VARIABLE","$a",395],"[",["T_CONSTANT_ENCAPSED_STRING","'name'",395],"]",";",["T_WHITESPACE","\n        ",395],["T_VARIABLE","$header",396],"[",["T_CONSTANT_ENCAPSED_STRING","'8-devmajor'",396],"]",["T_WHITESPACE","     ",396],"=",["T_WHITESPACE"," ",396],["T_CONSTANT_ENCAPSED_STRING","''",396],";",["T_WHITESPACE","\n        ",396],["T_VARIABLE","$header",397],"[",["T_CONSTANT_ENCAPSED_STRING","'8-devminor'",397],"]",["T_WHITESPACE","     ",397],"=",["T_WHITESPACE"," ",397],["T_CONSTANT_ENCAPSED_STRING","''",397],";",["T_WHITESPACE","\n        ",397],["T_VARIABLE","$header",398],"[",["T_CONSTANT_ENCAPSED_STRING","'155-prefix'",398],"]",["T_WHITESPACE","     ",398],"=",["T_WHITESPACE"," ",398],["T_CONSTANT_ENCAPSED_STRING","''",398],";",["T_WHITESPACE","\n        ",398],["T_VARIABLE","$header",399],"[",["T_CONSTANT_ENCAPSED_STRING","'12-closer'",399],"]",["T_WHITESPACE","      ",399],"=",["T_WHITESPACE"," ",399],["T_CONSTANT_ENCAPSED_STRING","''",399],";",["T_WHITESPACE","\n\n        ",399],["T_VARIABLE","$packedHeader",401],["T_WHITESPACE"," ",401],"=",["T_WHITESPACE"," ",401],["T_CONSTANT_ENCAPSED_STRING","''",401],";",["T_WHITESPACE","\n        ",401],["T_FOREACH","foreach",402],["T_WHITESPACE"," ",402],"(",["T_VARIABLE","$header",402],["T_WHITESPACE"," ",402],["T_AS","as",402],["T_WHITESPACE"," ",402],["T_VARIABLE","$key",402],["T_DOUBLE_ARROW","=>",402],["T_VARIABLE","$element",402],")",["T_WHITESPACE"," ",402],"{",["T_WHITESPACE","\n            ",402],["T_VARIABLE","$length",403],["T_WHITESPACE"," ",403],"=",["T_WHITESPACE"," ",403],["T_STRING","explode",403],"(",["T_CONSTANT_ENCAPSED_STRING","'-'",403],",",["T_WHITESPACE"," ",403],["T_VARIABLE","$key",403],")",";",["T_WHITESPACE","\n            ",403],["T_VARIABLE","$packedHeader",404],["T_WHITESPACE"," ",404],["T_CONCAT_EQUAL",".=",404],["T_WHITESPACE"," ",404],["T_STRING","pack",404],"(",["T_CONSTANT_ENCAPSED_STRING","'a'",404],["T_WHITESPACE"," ",404],".",["T_WHITESPACE"," ",404],["T_VARIABLE","$length",404],"[",["T_LNUMBER","0",404],"]",",",["T_WHITESPACE"," ",404],["T_VARIABLE","$element",404],")",";",["T_WHITESPACE","\n        ",404],"}",["T_WHITESPACE","\n\n        ",405],["T_VARIABLE","$checksum",407],["T_WHITESPACE"," ",407],"=",["T_WHITESPACE"," ",407],["T_LNUMBER","0",407],";",["T_WHITESPACE","\n        ",407],["T_FOR","for",408],["T_WHITESPACE"," ",408],"(",["T_VARIABLE","$i",408],["T_WHITESPACE"," ",408],"=",["T_WHITESPACE"," ",408],["T_LNUMBER","0",408],";",["T_WHITESPACE"," ",408],["T_VARIABLE","$i",408],["T_WHITESPACE"," ",408],"<",["T_WHITESPACE"," ",408],["T_LNUMBER","512",408],";",["T_WHITESPACE"," ",408],["T_VARIABLE","$i",408],["T_INC","++",408],")",["T_WHITESPACE"," ",408],"{",["T_WHITESPACE","\n            ",408],["T_VARIABLE","$checksum",409],["T_WHITESPACE"," ",409],["T_PLUS_EQUAL","+=",409],["T_WHITESPACE"," ",409],["T_STRING","ord",409],"(",["T_STRING","substr",409],"(",["T_VARIABLE","$packedHeader",409],",",["T_WHITESPACE"," ",409],["T_VARIABLE","$i",409],",",["T_WHITESPACE"," ",409],["T_LNUMBER","1",409],")",")",";",["T_WHITESPACE","\n        ",409],"}",["T_WHITESPACE","\n        ",410],["T_VARIABLE","$packedHeader",411],["T_WHITESPACE"," ",411],"=",["T_WHITESPACE"," ",411],["T_STRING","substr_replace",411],"(",["T_VARIABLE","$packedHeader",411],",",["T_WHITESPACE"," ",411],["T_STRING","sprintf",411],"(",["T_CONSTANT_ENCAPSED_STRING","\"%07o\"",411],",",["T_WHITESPACE"," ",411],["T_VARIABLE","$checksum",411],")",".",["T_CONSTANT_ENCAPSED_STRING","\"\\0\"",411],",",["T_WHITESPACE"," ",411],["T_LNUMBER","148",411],",",["T_WHITESPACE"," ",411],["T_LNUMBER","8",411],")",";",["T_WHITESPACE","\n\n        ",411],["T_RETURN","return",413],["T_WHITESPACE"," ",413],["T_VARIABLE","$longHeader",413],["T_WHITESPACE"," ",413],".",["T_WHITESPACE"," ",413],["T_VARIABLE","$packedHeader",413],";",["T_WHITESPACE","\n    ",413],"}",["T_WHITESPACE","\n\n    ",414],["T_DOC_COMMENT","\/**\n     * Read TAR string from file, and unpacked it.\n     * Create files and directories information about discribed\n     * in the string.\n     *\n     * @param string $destination path to file is unpacked\n     * @return array list of files\n     * @throws Mage_Exception\n     *\/",416],["T_WHITESPACE","\n    ",424],["T_PROTECTED","protected",425],["T_WHITESPACE"," ",425],["T_FUNCTION","function",425],["T_WHITESPACE"," ",425],["T_STRING","_unpackCurrentTar",425],"(",["T_VARIABLE","$destination",425],")",["T_WHITESPACE","\n    ",425],"{",["T_WHITESPACE","\n        ",426],["T_VARIABLE","$archiveReader",427],["T_WHITESPACE"," ",427],"=",["T_WHITESPACE"," ",427],["T_VARIABLE","$this",427],["T_OBJECT_OPERATOR","->",427],["T_STRING","_getReader",427],"(",")",";",["T_WHITESPACE","\n        ",427],["T_VARIABLE","$list",428],["T_WHITESPACE"," ",428],"=",["T_WHITESPACE"," ",428],["T_ARRAY","array",428],"(",")",";",["T_WHITESPACE","\n\n        ",428],["T_WHILE","while",430],["T_WHITESPACE"," ",430],"(","!",["T_VARIABLE","$archiveReader",430],["T_OBJECT_OPERATOR","->",430],["T_STRING","eof",430],"(",")",")",["T_WHITESPACE"," ",430],"{",["T_WHITESPACE","\n            ",430],["T_VARIABLE","$header",431],["T_WHITESPACE"," ",431],"=",["T_WHITESPACE"," ",431],["T_VARIABLE","$this",431],["T_OBJECT_OPERATOR","->",431],["T_STRING","_extractFileHeader",431],"(",")",";",["T_WHITESPACE","\n\n            ",431],["T_IF","if",433],["T_WHITESPACE"," ",433],"(","!",["T_VARIABLE","$header",433],")",["T_WHITESPACE"," ",433],"{",["T_WHITESPACE","\n                ",433],["T_CONTINUE","continue",434],";",["T_WHITESPACE","\n            ",434],"}",["T_WHITESPACE","\n\n            ",435],["T_VARIABLE","$currentFile",437],["T_WHITESPACE"," ",437],"=",["T_WHITESPACE"," ",437],["T_VARIABLE","$destination",437],["T_WHITESPACE"," ",437],".",["T_WHITESPACE"," ",437],["T_VARIABLE","$header",437],"[",["T_CONSTANT_ENCAPSED_STRING","'name'",437],"]",";",["T_WHITESPACE","\n            ",437],["T_VARIABLE","$dirname",438],["T_WHITESPACE"," ",438],"=",["T_WHITESPACE"," ",438],["T_STRING","dirname",438],"(",["T_VARIABLE","$currentFile",438],")",";",["T_WHITESPACE","\n\n            ",438],["T_IF","if",440],["T_WHITESPACE"," ",440],"(",["T_STRING","in_array",440],"(",["T_VARIABLE","$header",440],"[",["T_CONSTANT_ENCAPSED_STRING","'type'",440],"]",",",["T_WHITESPACE"," ",440],["T_ARRAY","array",440],"(",["T_CONSTANT_ENCAPSED_STRING","\"0\"",440],",",["T_STRING","chr",440],"(",["T_LNUMBER","0",440],")",",",["T_WHITESPACE"," ",440],["T_CONSTANT_ENCAPSED_STRING","''",440],")",")",")",["T_WHITESPACE"," ",440],"{",["T_WHITESPACE","\n\n                ",440],["T_IF","if",442],"(","!",["T_STRING","file_exists",442],"(",["T_VARIABLE","$dirname",442],")",")",["T_WHITESPACE"," ",442],"{",["T_WHITESPACE","\n                    ",442],["T_VARIABLE","$mkdirResult",443],["T_WHITESPACE"," ",443],"=",["T_WHITESPACE"," ",443],"@",["T_STRING","mkdir",443],"(",["T_VARIABLE","$dirname",443],",",["T_WHITESPACE"," ",443],["T_LNUMBER","0777",443],",",["T_WHITESPACE"," ",443],["T_STRING","true",443],")",";",["T_WHITESPACE","\n\n                    ",443],["T_IF","if",445],["T_WHITESPACE"," ",445],"(",["T_STRING","false",445],["T_WHITESPACE"," ",445],["T_IS_IDENTICAL","===",445],["T_WHITESPACE"," ",445],["T_VARIABLE","$mkdirResult",445],")",["T_WHITESPACE"," ",445],"{",["T_WHITESPACE","\n                        ",445],["T_THROW","throw",446],["T_WHITESPACE"," ",446],["T_NEW","new",446],["T_WHITESPACE"," ",446],["T_STRING","Mage_Exception",446],"(",["T_CONSTANT_ENCAPSED_STRING","'Failed to create directory '",446],["T_WHITESPACE"," ",446],".",["T_WHITESPACE"," ",446],["T_VARIABLE","$dirname",446],")",";",["T_WHITESPACE","\n                    ",446],"}",["T_WHITESPACE","\n                ",447],"}",["T_WHITESPACE","\n\n                ",448],["T_VARIABLE","$this",450],["T_OBJECT_OPERATOR","->",450],["T_STRING","_extractAndWriteFile",450],"(",["T_VARIABLE","$header",450],",",["T_WHITESPACE"," ",450],["T_VARIABLE","$currentFile",450],")",";",["T_WHITESPACE","\n                ",450],["T_VARIABLE","$list",451],"[","]",["T_WHITESPACE"," ",451],"=",["T_WHITESPACE"," ",451],["T_VARIABLE","$currentFile",451],";",["T_WHITESPACE","\n\n            ",451],"}",["T_WHITESPACE"," ",453],["T_ELSEIF","elseif",453],["T_WHITESPACE"," ",453],"(",["T_VARIABLE","$header",453],"[",["T_CONSTANT_ENCAPSED_STRING","'type'",453],"]",["T_WHITESPACE"," ",453],["T_IS_EQUAL","==",453],["T_WHITESPACE"," ",453],["T_CONSTANT_ENCAPSED_STRING","'5'",453],")",["T_WHITESPACE"," ",453],"{",["T_WHITESPACE","\n\n                ",453],["T_IF","if",455],"(","!",["T_STRING","file_exists",455],"(",["T_VARIABLE","$dirname",455],")",")",["T_WHITESPACE"," ",455],"{",["T_WHITESPACE","\n                    ",455],["T_VARIABLE","$mkdirResult",456],["T_WHITESPACE"," ",456],"=",["T_WHITESPACE"," ",456],"@",["T_STRING","mkdir",456],"(",["T_VARIABLE","$currentFile",456],",",["T_WHITESPACE"," ",456],["T_VARIABLE","$header",456],"[",["T_CONSTANT_ENCAPSED_STRING","'mode'",456],"]",",",["T_WHITESPACE"," ",456],["T_STRING","true",456],")",";",["T_WHITESPACE","\n\n                    ",456],["T_IF","if",458],["T_WHITESPACE"," ",458],"(",["T_STRING","false",458],["T_WHITESPACE"," ",458],["T_IS_IDENTICAL","===",458],["T_WHITESPACE"," ",458],["T_VARIABLE","$mkdirResult",458],")",["T_WHITESPACE"," ",458],"{",["T_WHITESPACE","\n                        ",458],["T_THROW","throw",459],["T_WHITESPACE"," ",459],["T_NEW","new",459],["T_WHITESPACE"," ",459],["T_STRING","Mage_Exception",459],"(",["T_CONSTANT_ENCAPSED_STRING","'Failed to create directory '",459],["T_WHITESPACE"," ",459],".",["T_WHITESPACE"," ",459],["T_VARIABLE","$currentFile",459],")",";",["T_WHITESPACE","\n                    ",459],"}",["T_WHITESPACE","\n                ",460],"}",["T_WHITESPACE","\n                ",461],["T_VARIABLE","$list",462],"[","]",["T_WHITESPACE"," ",462],"=",["T_WHITESPACE"," ",462],["T_VARIABLE","$currentFile",462],["T_WHITESPACE"," ",462],".",["T_WHITESPACE"," ",462],["T_STRING","DS",462],";",["T_WHITESPACE","\n            ",462],"}",["T_WHITESPACE"," ",463],["T_ELSEIF","elseif",463],["T_WHITESPACE"," ",463],"(",["T_VARIABLE","$header",463],"[",["T_CONSTANT_ENCAPSED_STRING","'type'",463],"]",["T_WHITESPACE"," ",463],["T_IS_EQUAL","==",463],["T_WHITESPACE"," ",463],["T_CONSTANT_ENCAPSED_STRING","'2'",463],")",["T_WHITESPACE"," ",463],"{",["T_WHITESPACE","\n\n                ",463],["T_COMMENT","\/\/we do not interrupt unpack process if symlink creation failed as symlinks are not so important\n",465],["T_WHITESPACE","                ",466],"@",["T_STRING","symlink",466],"(",["T_VARIABLE","$header",466],"[",["T_CONSTANT_ENCAPSED_STRING","'symlink'",466],"]",",",["T_WHITESPACE"," ",466],["T_VARIABLE","$currentFile",466],")",";",["T_WHITESPACE","\n            ",466],"}",["T_WHITESPACE","\n        ",467],"}",["T_WHITESPACE","\n\n        ",468],["T_RETURN","return",470],["T_WHITESPACE"," ",470],["T_VARIABLE","$list",470],";",["T_WHITESPACE","\n    ",470],"}",["T_WHITESPACE","\n\n    ",471],["T_DOC_COMMENT","\/**\n     * Get header from TAR string and unpacked it by format.\n     *\n     * @deprecated after 1.7.0.0\n     * @param resource $pointer\n     * @return string\n     *\/",473],["T_WHITESPACE","\n    ",479],["T_PROTECTED","protected",480],["T_WHITESPACE"," ",480],["T_FUNCTION","function",480],["T_WHITESPACE"," ",480],["T_STRING","_parseHeader",480],"(","&",["T_VARIABLE","$pointer",480],")",["T_WHITESPACE","\n    ",480],"{",["T_WHITESPACE","\n        ",481],["T_VARIABLE","$firstLine",482],["T_WHITESPACE"," ",482],"=",["T_WHITESPACE"," ",482],["T_STRING","fread",482],"(",["T_VARIABLE","$pointer",482],",",["T_WHITESPACE"," ",482],["T_LNUMBER","512",482],")",";",["T_WHITESPACE","\n\n        ",482],["T_IF","if",484],["T_WHITESPACE"," ",484],"(",["T_STRING","strlen",484],"(",["T_VARIABLE","$firstLine",484],")","<",["T_LNUMBER","512",484],")","{",["T_WHITESPACE","\n            ",484],["T_RETURN","return",485],["T_WHITESPACE"," ",485],["T_STRING","false",485],";",["T_WHITESPACE","\n        ",485],"}",["T_WHITESPACE","\n\n        ",486],["T_VARIABLE","$fmt",488],["T_WHITESPACE"," ",488],"=",["T_WHITESPACE"," ",488],["T_STRING","self",488],["T_DOUBLE_COLON","::",488],["T_STRING","_getFormatParseHeader",488],"(",")",";",["T_WHITESPACE","\n        ",488],["T_VARIABLE","$header",489],["T_WHITESPACE"," ",489],"=",["T_WHITESPACE"," ",489],["T_STRING","unpack",489],["T_WHITESPACE"," ",489],"(",["T_VARIABLE","$fmt",489],",",["T_WHITESPACE"," ",489],["T_VARIABLE","$firstLine",489],")",";",["T_WHITESPACE","\n\n        ",489],["T_VARIABLE","$header",491],"[",["T_CONSTANT_ENCAPSED_STRING","'mode'",491],"]","=",["T_VARIABLE","$header",491],"[",["T_CONSTANT_ENCAPSED_STRING","'mode'",491],"]","+",["T_LNUMBER","0",491],";",["T_WHITESPACE","\n        ",491],["T_VARIABLE","$header",492],"[",["T_CONSTANT_ENCAPSED_STRING","'uid'",492],"]","=",["T_STRING","octdec",492],"(",["T_VARIABLE","$header",492],"[",["T_CONSTANT_ENCAPSED_STRING","'uid'",492],"]",")",";",["T_WHITESPACE","\n        ",492],["T_VARIABLE","$header",493],"[",["T_CONSTANT_ENCAPSED_STRING","'gid'",493],"]","=",["T_STRING","octdec",493],"(",["T_VARIABLE","$header",493],"[",["T_CONSTANT_ENCAPSED_STRING","'gid'",493],"]",")",";",["T_WHITESPACE","\n        ",493],["T_VARIABLE","$header",494],"[",["T_CONSTANT_ENCAPSED_STRING","'size'",494],"]","=",["T_STRING","octdec",494],"(",["T_VARIABLE","$header",494],"[",["T_CONSTANT_ENCAPSED_STRING","'size'",494],"]",")",";",["T_WHITESPACE","\n        ",494],["T_VARIABLE","$header",495],"[",["T_CONSTANT_ENCAPSED_STRING","'mtime'",495],"]","=",["T_STRING","octdec",495],"(",["T_VARIABLE","$header",495],"[",["T_CONSTANT_ENCAPSED_STRING","'mtime'",495],"]",")",";",["T_WHITESPACE","\n        ",495],["T_VARIABLE","$header",496],"[",["T_CONSTANT_ENCAPSED_STRING","'checksum'",496],"]","=",["T_STRING","octdec",496],"(",["T_VARIABLE","$header",496],"[",["T_CONSTANT_ENCAPSED_STRING","'checksum'",496],"]",")",";",["T_WHITESPACE","\n\n        ",496],["T_IF","if",498],["T_WHITESPACE"," ",498],"(",["T_VARIABLE","$header",498],"[",["T_CONSTANT_ENCAPSED_STRING","'type'",498],"]",["T_WHITESPACE"," ",498],["T_IS_EQUAL","==",498],["T_WHITESPACE"," ",498],["T_CONSTANT_ENCAPSED_STRING","\"5\"",498],")",["T_WHITESPACE"," ",498],"{",["T_WHITESPACE","\n            ",498],["T_VARIABLE","$header",499],"[",["T_CONSTANT_ENCAPSED_STRING","'size'",499],"]",["T_WHITESPACE"," ",499],"=",["T_WHITESPACE"," ",499],["T_LNUMBER","0",499],";",["T_WHITESPACE","\n        ",499],"}",["T_WHITESPACE","\n\n        ",500],["T_VARIABLE","$checksum",502],["T_WHITESPACE"," ",502],"=",["T_WHITESPACE"," ",502],["T_LNUMBER","0",502],";",["T_WHITESPACE","\n        ",502],["T_VARIABLE","$firstLine",503],["T_WHITESPACE"," ",503],"=",["T_WHITESPACE"," ",503],["T_STRING","substr_replace",503],"(",["T_VARIABLE","$firstLine",503],",",["T_WHITESPACE"," ",503],["T_CONSTANT_ENCAPSED_STRING","'        '",503],",",["T_WHITESPACE"," ",503],["T_LNUMBER","148",503],",",["T_WHITESPACE"," ",503],["T_LNUMBER","8",503],")",";",["T_WHITESPACE","\n        ",503],["T_FOR","for",504],["T_WHITESPACE"," ",504],"(",["T_VARIABLE","$i",504],["T_WHITESPACE"," ",504],"=",["T_WHITESPACE"," ",504],["T_LNUMBER","0",504],";",["T_WHITESPACE"," ",504],["T_VARIABLE","$i",504],["T_WHITESPACE"," ",504],"<",["T_WHITESPACE"," ",504],["T_LNUMBER","512",504],";",["T_WHITESPACE"," ",504],["T_VARIABLE","$i",504],["T_INC","++",504],")",["T_WHITESPACE"," ",504],"{",["T_WHITESPACE","\n            ",504],["T_VARIABLE","$checksum",505],["T_WHITESPACE"," ",505],["T_PLUS_EQUAL","+=",505],["T_WHITESPACE"," ",505],["T_STRING","ord",505],"(",["T_STRING","substr",505],"(",["T_VARIABLE","$firstLine",505],",",["T_WHITESPACE"," ",505],["T_VARIABLE","$i",505],",",["T_WHITESPACE"," ",505],["T_LNUMBER","1",505],")",")",";",["T_WHITESPACE","\n        ",505],"}",["T_WHITESPACE","\n\n        ",506],["T_VARIABLE","$isUstar",508],["T_WHITESPACE"," ",508],"=",["T_WHITESPACE"," ",508],["T_CONSTANT_ENCAPSED_STRING","'ustar'",508],["T_WHITESPACE"," ",508],["T_IS_EQUAL","==",508],["T_WHITESPACE"," ",508],["T_STRING","strtolower",508],"(",["T_STRING","substr",508],"(",["T_VARIABLE","$header",508],"[",["T_CONSTANT_ENCAPSED_STRING","'magic'",508],"]",",",["T_WHITESPACE"," ",508],["T_LNUMBER","0",508],",",["T_WHITESPACE"," ",508],["T_LNUMBER","5",508],")",")",";",["T_WHITESPACE","\n\n        ",508],["T_VARIABLE","$checksumOk",510],["T_WHITESPACE"," ",510],"=",["T_WHITESPACE"," ",510],["T_VARIABLE","$header",510],"[",["T_CONSTANT_ENCAPSED_STRING","'checksum'",510],"]",["T_WHITESPACE"," ",510],["T_IS_EQUAL","==",510],["T_WHITESPACE"," ",510],["T_VARIABLE","$checksum",510],";",["T_WHITESPACE","\n        ",510],["T_IF","if",511],["T_WHITESPACE"," ",511],"(",["T_ISSET","isset",511],"(",["T_VARIABLE","$header",511],"[",["T_CONSTANT_ENCAPSED_STRING","'name'",511],"]",")",["T_WHITESPACE"," ",511],["T_BOOLEAN_AND","&&",511],["T_WHITESPACE"," ",511],["T_VARIABLE","$checksumOk",511],")",["T_WHITESPACE"," ",511],"{",["T_WHITESPACE","\n            ",511],["T_IF","if",512],["T_WHITESPACE"," ",512],"(",["T_VARIABLE","$header",512],"[",["T_CONSTANT_ENCAPSED_STRING","'name'",512],"]",["T_WHITESPACE"," ",512],["T_IS_EQUAL","==",512],["T_WHITESPACE"," ",512],["T_CONSTANT_ENCAPSED_STRING","'.\/.\/@LongLink'",512],["T_WHITESPACE"," ",512],["T_BOOLEAN_AND","&&",512],["T_WHITESPACE"," ",512],["T_VARIABLE","$header",512],"[",["T_CONSTANT_ENCAPSED_STRING","'type'",512],"]",["T_WHITESPACE"," ",512],["T_IS_EQUAL","==",512],["T_WHITESPACE"," ",512],["T_CONSTANT_ENCAPSED_STRING","'L'",512],")",["T_WHITESPACE"," ",512],"{",["T_WHITESPACE","\n                ",512],["T_VARIABLE","$realName",513],["T_WHITESPACE"," ",513],"=",["T_WHITESPACE"," ",513],["T_STRING","substr",513],"(",["T_STRING","fread",513],"(",["T_VARIABLE","$pointer",513],",",["T_WHITESPACE"," ",513],["T_STRING","floor",513],"(","(",["T_VARIABLE","$header",513],"[",["T_CONSTANT_ENCAPSED_STRING","'size'",513],"]",["T_WHITESPACE"," ",513],"+",["T_WHITESPACE"," ",513],["T_LNUMBER","512",513],["T_WHITESPACE"," ",513],"-",["T_WHITESPACE"," ",513],["T_LNUMBER","1",513],")",["T_WHITESPACE"," ",513],"\/",["T_WHITESPACE"," ",513],["T_LNUMBER","512",513],")",["T_WHITESPACE"," ",513],"*",["T_WHITESPACE"," ",513],["T_LNUMBER","512",513],")",",",["T_WHITESPACE"," ",513],["T_LNUMBER","0",513],",",["T_WHITESPACE"," ",513],["T_VARIABLE","$header",513],"[",["T_CONSTANT_ENCAPSED_STRING","'size'",513],"]",")",";",["T_WHITESPACE","\n                ",513],["T_VARIABLE","$headerMain",514],["T_WHITESPACE"," ",514],"=",["T_WHITESPACE"," ",514],["T_VARIABLE","$this",514],["T_OBJECT_OPERATOR","->",514],["T_STRING","_parseHeader",514],"(",["T_VARIABLE","$pointer",514],")",";",["T_WHITESPACE","\n                ",514],["T_VARIABLE","$headerMain",515],"[",["T_CONSTANT_ENCAPSED_STRING","'name'",515],"]",["T_WHITESPACE"," ",515],"=",["T_WHITESPACE"," ",515],["T_VARIABLE","$realName",515],";",["T_WHITESPACE","\n                ",515],["T_RETURN","return",516],["T_WHITESPACE"," ",516],["T_VARIABLE","$headerMain",516],";",["T_WHITESPACE","\n            ",516],"}",["T_WHITESPACE"," ",517],["T_ELSE","else",517],["T_WHITESPACE"," ",517],"{",["T_WHITESPACE","\n                ",517],["T_IF","if",518],["T_WHITESPACE"," ",518],"(",["T_VARIABLE","$header",518],"[",["T_CONSTANT_ENCAPSED_STRING","'size'",518],"]",">",["T_LNUMBER","0",518],")",["T_WHITESPACE"," ",518],"{",["T_WHITESPACE","\n                    ",518],["T_VARIABLE","$header",519],"[",["T_CONSTANT_ENCAPSED_STRING","'data'",519],"]",["T_WHITESPACE"," ",519],"=",["T_WHITESPACE"," ",519],["T_STRING","substr",519],"(",["T_STRING","fread",519],"(",["T_VARIABLE","$pointer",519],",",["T_WHITESPACE"," ",519],["T_STRING","floor",519],"(","(",["T_VARIABLE","$header",519],"[",["T_CONSTANT_ENCAPSED_STRING","'size'",519],"]",["T_WHITESPACE"," ",519],"+",["T_WHITESPACE"," ",519],["T_LNUMBER","512",519],["T_WHITESPACE"," ",519],"-",["T_WHITESPACE"," ",519],["T_LNUMBER","1",519],")",["T_WHITESPACE"," ",519],"\/",["T_WHITESPACE"," ",519],["T_LNUMBER","512",519],")",["T_WHITESPACE"," ",519],"*",["T_WHITESPACE"," ",519],["T_LNUMBER","512",519],")",",",["T_WHITESPACE"," ",519],["T_LNUMBER","0",519],",",["T_WHITESPACE"," ",519],["T_VARIABLE","$header",519],"[",["T_CONSTANT_ENCAPSED_STRING","'size'",519],"]",")",";",["T_WHITESPACE","\n                ",519],"}",["T_WHITESPACE"," ",520],["T_ELSE","else",520],["T_WHITESPACE"," ",520],"{",["T_WHITESPACE","\n                    ",520],["T_VARIABLE","$header",521],"[",["T_CONSTANT_ENCAPSED_STRING","'data'",521],"]",["T_WHITESPACE"," ",521],"=",["T_WHITESPACE"," ",521],["T_CONSTANT_ENCAPSED_STRING","''",521],";",["T_WHITESPACE","\n                ",521],"}",["T_WHITESPACE","\n                ",522],["T_RETURN","return",523],["T_WHITESPACE"," ",523],["T_VARIABLE","$header",523],";",["T_WHITESPACE","\n            ",523],"}",["T_WHITESPACE","\n        ",524],"}",["T_WHITESPACE","\n        ",525],["T_RETURN","return",526],["T_WHITESPACE"," ",526],["T_STRING","false",526],";",["T_WHITESPACE","\n    ",526],"}",["T_WHITESPACE","\n\n    ",527],["T_DOC_COMMENT","\/**\n     * Read and decode file header information from tarball\n     *\n     * @return array|boolean\n     *\/",529],["T_WHITESPACE","\n    ",533],["T_PROTECTED","protected",534],["T_WHITESPACE"," ",534],["T_FUNCTION","function",534],["T_WHITESPACE"," ",534],["T_STRING","_extractFileHeader",534],"(",")",["T_WHITESPACE","\n    ",534],"{",["T_WHITESPACE","\n        ",535],["T_VARIABLE","$archiveReader",536],["T_WHITESPACE"," ",536],"=",["T_WHITESPACE"," ",536],["T_VARIABLE","$this",536],["T_OBJECT_OPERATOR","->",536],["T_STRING","_getReader",536],"(",")",";",["T_WHITESPACE","\n\n        ",536],["T_VARIABLE","$headerBlock",538],["T_WHITESPACE"," ",538],"=",["T_WHITESPACE"," ",538],["T_VARIABLE","$archiveReader",538],["T_OBJECT_OPERATOR","->",538],["T_STRING","read",538],"(",["T_STRING","self",538],["T_DOUBLE_COLON","::",538],["T_STRING","TAR_BLOCK_SIZE",538],")",";",["T_WHITESPACE","\n\n        ",538],["T_IF","if",540],["T_WHITESPACE"," ",540],"(",["T_STRING","strlen",540],"(",["T_VARIABLE","$headerBlock",540],")",["T_WHITESPACE"," ",540],"<",["T_WHITESPACE"," ",540],["T_STRING","self",540],["T_DOUBLE_COLON","::",540],["T_STRING","TAR_BLOCK_SIZE",540],")",["T_WHITESPACE"," ",540],"{",["T_WHITESPACE","\n            ",540],["T_RETURN","return",541],["T_WHITESPACE"," ",541],["T_STRING","false",541],";",["T_WHITESPACE","\n        ",541],"}",["T_WHITESPACE","\n\n        ",542],["T_VARIABLE","$header",544],["T_WHITESPACE"," ",544],"=",["T_WHITESPACE"," ",544],["T_STRING","unpack",544],"(",["T_STRING","self",544],["T_DOUBLE_COLON","::",544],["T_STRING","_getFormatParseHeader",544],"(",")",",",["T_WHITESPACE"," ",544],["T_VARIABLE","$headerBlock",544],")",";",["T_WHITESPACE","\n\n        ",544],["T_VARIABLE","$header",546],"[",["T_CONSTANT_ENCAPSED_STRING","'mode'",546],"]",["T_WHITESPACE","     ",546],"=",["T_WHITESPACE"," ",546],["T_STRING","octdec",546],"(",["T_VARIABLE","$header",546],"[",["T_CONSTANT_ENCAPSED_STRING","'mode'",546],"]",")",";",["T_WHITESPACE","\n        ",546],["T_VARIABLE","$header",547],"[",["T_CONSTANT_ENCAPSED_STRING","'uid'",547],"]",["T_WHITESPACE","      ",547],"=",["T_WHITESPACE"," ",547],["T_STRING","octdec",547],"(",["T_VARIABLE","$header",547],"[",["T_CONSTANT_ENCAPSED_STRING","'uid'",547],"]",")",";",["T_WHITESPACE","\n        ",547],["T_VARIABLE","$header",548],"[",["T_CONSTANT_ENCAPSED_STRING","'gid'",548],"]",["T_WHITESPACE","      ",548],"=",["T_WHITESPACE"," ",548],["T_STRING","octdec",548],"(",["T_VARIABLE","$header",548],"[",["T_CONSTANT_ENCAPSED_STRING","'gid'",548],"]",")",";",["T_WHITESPACE","\n        ",548],["T_VARIABLE","$header",549],"[",["T_CONSTANT_ENCAPSED_STRING","'size'",549],"]",["T_WHITESPACE","     ",549],"=",["T_WHITESPACE"," ",549],["T_STRING","octdec",549],"(",["T_VARIABLE","$header",549],"[",["T_CONSTANT_ENCAPSED_STRING","'size'",549],"]",")",";",["T_WHITESPACE","\n        ",549],["T_VARIABLE","$header",550],"[",["T_CONSTANT_ENCAPSED_STRING","'mtime'",550],"]",["T_WHITESPACE","    ",550],"=",["T_WHITESPACE"," ",550],["T_STRING","octdec",550],"(",["T_VARIABLE","$header",550],"[",["T_CONSTANT_ENCAPSED_STRING","'mtime'",550],"]",")",";",["T_WHITESPACE","\n        ",550],["T_VARIABLE","$header",551],"[",["T_CONSTANT_ENCAPSED_STRING","'checksum'",551],"]",["T_WHITESPACE"," ",551],"=",["T_WHITESPACE"," ",551],["T_STRING","octdec",551],"(",["T_VARIABLE","$header",551],"[",["T_CONSTANT_ENCAPSED_STRING","'checksum'",551],"]",")",";",["T_WHITESPACE","\n\n        ",551],["T_IF","if",553],["T_WHITESPACE"," ",553],"(",["T_VARIABLE","$header",553],"[",["T_CONSTANT_ENCAPSED_STRING","'type'",553],"]",["T_WHITESPACE"," ",553],["T_IS_EQUAL","==",553],["T_WHITESPACE"," ",553],["T_CONSTANT_ENCAPSED_STRING","\"5\"",553],")",["T_WHITESPACE"," ",553],"{",["T_WHITESPACE","\n            ",553],["T_VARIABLE","$header",554],"[",["T_CONSTANT_ENCAPSED_STRING","'size'",554],"]",["T_WHITESPACE"," ",554],"=",["T_WHITESPACE"," ",554],["T_LNUMBER","0",554],";",["T_WHITESPACE","\n        ",554],"}",["T_WHITESPACE","\n\n        ",555],["T_VARIABLE","$checksum",557],["T_WHITESPACE"," ",557],"=",["T_WHITESPACE"," ",557],["T_LNUMBER","0",557],";",["T_WHITESPACE","\n        ",557],["T_VARIABLE","$headerBlock",558],["T_WHITESPACE"," ",558],"=",["T_WHITESPACE"," ",558],["T_STRING","substr_replace",558],"(",["T_VARIABLE","$headerBlock",558],",",["T_WHITESPACE"," ",558],["T_CONSTANT_ENCAPSED_STRING","'        '",558],",",["T_WHITESPACE"," ",558],["T_LNUMBER","148",558],",",["T_WHITESPACE"," ",558],["T_LNUMBER","8",558],")",";",["T_WHITESPACE","\n\n        ",558],["T_FOR","for",560],["T_WHITESPACE"," ",560],"(",["T_VARIABLE","$i",560],["T_WHITESPACE"," ",560],"=",["T_WHITESPACE"," ",560],["T_LNUMBER","0",560],";",["T_WHITESPACE"," ",560],["T_VARIABLE","$i",560],["T_WHITESPACE"," ",560],"<",["T_WHITESPACE"," ",560],["T_LNUMBER","512",560],";",["T_WHITESPACE"," ",560],["T_VARIABLE","$i",560],["T_INC","++",560],")",["T_WHITESPACE"," ",560],"{",["T_WHITESPACE","\n            ",560],["T_VARIABLE","$checksum",561],["T_WHITESPACE"," ",561],["T_PLUS_EQUAL","+=",561],["T_WHITESPACE"," ",561],["T_STRING","ord",561],"(",["T_STRING","substr",561],"(",["T_VARIABLE","$headerBlock",561],",",["T_WHITESPACE"," ",561],["T_VARIABLE","$i",561],",",["T_WHITESPACE"," ",561],["T_LNUMBER","1",561],")",")",";",["T_WHITESPACE","\n        ",561],"}",["T_WHITESPACE","\n\n        ",562],["T_VARIABLE","$checksumOk",564],["T_WHITESPACE"," ",564],"=",["T_WHITESPACE"," ",564],["T_VARIABLE","$header",564],"[",["T_CONSTANT_ENCAPSED_STRING","'checksum'",564],"]",["T_WHITESPACE"," ",564],["T_IS_EQUAL","==",564],["T_WHITESPACE"," ",564],["T_VARIABLE","$checksum",564],";",["T_WHITESPACE","\n        ",564],["T_IF","if",565],["T_WHITESPACE"," ",565],"(",["T_ISSET","isset",565],"(",["T_VARIABLE","$header",565],"[",["T_CONSTANT_ENCAPSED_STRING","'name'",565],"]",")",["T_WHITESPACE"," ",565],["T_BOOLEAN_AND","&&",565],["T_WHITESPACE"," ",565],["T_VARIABLE","$checksumOk",565],")",["T_WHITESPACE"," ",565],"{",["T_WHITESPACE","\n\n            ",565],["T_IF","if",567],["T_WHITESPACE"," ",567],"(","!","(",["T_VARIABLE","$header",567],"[",["T_CONSTANT_ENCAPSED_STRING","'name'",567],"]",["T_WHITESPACE"," ",567],["T_IS_EQUAL","==",567],["T_WHITESPACE"," ",567],["T_CONSTANT_ENCAPSED_STRING","'.\/.\/@LongLink'",567],["T_WHITESPACE"," ",567],["T_BOOLEAN_AND","&&",567],["T_WHITESPACE"," ",567],["T_VARIABLE","$header",567],"[",["T_CONSTANT_ENCAPSED_STRING","'type'",567],"]",["T_WHITESPACE"," ",567],["T_IS_EQUAL","==",567],["T_WHITESPACE"," ",567],["T_CONSTANT_ENCAPSED_STRING","'L'",567],")",")",["T_WHITESPACE"," ",567],"{",["T_WHITESPACE","\n                ",567],["T_VARIABLE","$header",568],"[",["T_CONSTANT_ENCAPSED_STRING","'name'",568],"]",["T_WHITESPACE"," ",568],"=",["T_WHITESPACE"," ",568],["T_STRING","trim",568],"(",["T_VARIABLE","$header",568],"[",["T_CONSTANT_ENCAPSED_STRING","'name'",568],"]",")",";",["T_WHITESPACE","\n                ",568],["T_RETURN","return",569],["T_WHITESPACE"," ",569],["T_VARIABLE","$header",569],";",["T_WHITESPACE","\n            ",569],"}",["T_WHITESPACE","\n\n            ",570],["T_VARIABLE","$realNameBlockSize",572],["T_WHITESPACE"," ",572],"=",["T_WHITESPACE"," ",572],["T_STRING","floor",572],"(","(",["T_VARIABLE","$header",572],"[",["T_CONSTANT_ENCAPSED_STRING","'size'",572],"]",["T_WHITESPACE"," ",572],"+",["T_WHITESPACE"," ",572],["T_STRING","self",572],["T_DOUBLE_COLON","::",572],["T_STRING","TAR_BLOCK_SIZE",572],["T_WHITESPACE"," ",572],"-",["T_WHITESPACE"," ",572],["T_LNUMBER","1",572],")",["T_WHITESPACE"," ",572],"\/",["T_WHITESPACE"," ",572],["T_STRING","self",572],["T_DOUBLE_COLON","::",572],["T_STRING","TAR_BLOCK_SIZE",572],")",["T_WHITESPACE","\n                ",572],"*",["T_WHITESPACE"," ",573],["T_STRING","self",573],["T_DOUBLE_COLON","::",573],["T_STRING","TAR_BLOCK_SIZE",573],";",["T_WHITESPACE","\n            ",573],["T_VARIABLE","$realNameBlock",574],["T_WHITESPACE"," ",574],"=",["T_WHITESPACE"," ",574],["T_VARIABLE","$archiveReader",574],["T_OBJECT_OPERATOR","->",574],["T_STRING","read",574],"(",["T_VARIABLE","$realNameBlockSize",574],")",";",["T_WHITESPACE","\n            ",574],["T_VARIABLE","$realName",575],["T_WHITESPACE"," ",575],"=",["T_WHITESPACE"," ",575],["T_STRING","substr",575],"(",["T_VARIABLE","$realNameBlock",575],",",["T_WHITESPACE"," ",575],["T_LNUMBER","0",575],",",["T_WHITESPACE"," ",575],["T_VARIABLE","$header",575],"[",["T_CONSTANT_ENCAPSED_STRING","'size'",575],"]",")",";",["T_WHITESPACE","\n\n            ",575],["T_VARIABLE","$headerMain",577],["T_WHITESPACE"," ",577],"=",["T_WHITESPACE"," ",577],["T_VARIABLE","$this",577],["T_OBJECT_OPERATOR","->",577],["T_STRING","_extractFileHeader",577],"(",")",";",["T_WHITESPACE","\n            ",577],["T_VARIABLE","$headerMain",578],"[",["T_CONSTANT_ENCAPSED_STRING","'name'",578],"]",["T_WHITESPACE"," ",578],"=",["T_WHITESPACE"," ",578],["T_STRING","trim",578],"(",["T_VARIABLE","$realName",578],")",";",["T_WHITESPACE","\n            ",578],["T_RETURN","return",579],["T_WHITESPACE"," ",579],["T_VARIABLE","$headerMain",579],";",["T_WHITESPACE","\n        ",579],"}",["T_WHITESPACE","\n\n        ",580],["T_RETURN","return",582],["T_WHITESPACE"," ",582],["T_STRING","false",582],";",["T_WHITESPACE","\n    ",582],"}",["T_WHITESPACE","\n\n    ",583],["T_DOC_COMMENT","\/**\n     * Extract next file from tarball by its $header information and save it to $destination\n     *\n     * @param array $fileHeader\n     * @param string $destination\n     *\/",585],["T_WHITESPACE","\n    ",590],["T_PROTECTED","protected",591],["T_WHITESPACE"," ",591],["T_FUNCTION","function",591],["T_WHITESPACE"," ",591],["T_STRING","_extractAndWriteFile",591],"(",["T_VARIABLE","$fileHeader",591],",",["T_WHITESPACE"," ",591],["T_VARIABLE","$destination",591],")",["T_WHITESPACE","\n    ",591],"{",["T_WHITESPACE","\n        ",592],["T_VARIABLE","$fileWriter",593],["T_WHITESPACE"," ",593],"=",["T_WHITESPACE"," ",593],["T_NEW","new",593],["T_WHITESPACE"," ",593],["T_STRING","Mage_Archive_Helper_File",593],"(",["T_VARIABLE","$destination",593],")",";",["T_WHITESPACE","\n        ",593],["T_VARIABLE","$fileWriter",594],["T_OBJECT_OPERATOR","->",594],["T_STRING","open",594],"(",["T_CONSTANT_ENCAPSED_STRING","'w'",594],",",["T_WHITESPACE"," ",594],["T_VARIABLE","$fileHeader",594],"[",["T_CONSTANT_ENCAPSED_STRING","'mode'",594],"]",")",";",["T_WHITESPACE","\n\n        ",594],["T_VARIABLE","$archiveReader",596],["T_WHITESPACE"," ",596],"=",["T_WHITESPACE"," ",596],["T_VARIABLE","$this",596],["T_OBJECT_OPERATOR","->",596],["T_STRING","_getReader",596],"(",")",";",["T_WHITESPACE","\n\n        ",596],["T_VARIABLE","$filesize",598],["T_WHITESPACE"," ",598],"=",["T_WHITESPACE"," ",598],["T_VARIABLE","$fileHeader",598],"[",["T_CONSTANT_ENCAPSED_STRING","'size'",598],"]",";",["T_WHITESPACE","\n        ",598],["T_VARIABLE","$bytesExtracted",599],["T_WHITESPACE"," ",599],"=",["T_WHITESPACE"," ",599],["T_LNUMBER","0",599],";",["T_WHITESPACE","\n\n        ",599],["T_WHILE","while",601],["T_WHITESPACE"," ",601],"(",["T_VARIABLE","$filesize",601],["T_WHITESPACE"," ",601],">",["T_WHITESPACE"," ",601],["T_VARIABLE","$bytesExtracted",601],["T_WHITESPACE"," ",601],["T_BOOLEAN_AND","&&",601],["T_WHITESPACE"," ",601],"!",["T_VARIABLE","$archiveReader",601],["T_OBJECT_OPERATOR","->",601],["T_STRING","eof",601],"(",")",")",["T_WHITESPACE"," ",601],"{",["T_WHITESPACE","\n            ",601],["T_VARIABLE","$block",602],["T_WHITESPACE"," ",602],"=",["T_WHITESPACE"," ",602],["T_VARIABLE","$archiveReader",602],["T_OBJECT_OPERATOR","->",602],["T_STRING","read",602],"(",["T_STRING","self",602],["T_DOUBLE_COLON","::",602],["T_STRING","TAR_BLOCK_SIZE",602],")",";",["T_WHITESPACE","\n            ",602],["T_VARIABLE","$nonExtractedBytesCount",603],["T_WHITESPACE"," ",603],"=",["T_WHITESPACE"," ",603],["T_VARIABLE","$filesize",603],["T_WHITESPACE"," ",603],"-",["T_WHITESPACE"," ",603],["T_VARIABLE","$bytesExtracted",603],";",["T_WHITESPACE","\n\n            ",603],["T_VARIABLE","$data",605],["T_WHITESPACE"," ",605],"=",["T_WHITESPACE"," ",605],["T_STRING","substr",605],"(",["T_VARIABLE","$block",605],",",["T_WHITESPACE"," ",605],["T_LNUMBER","0",605],",",["T_WHITESPACE"," ",605],["T_VARIABLE","$nonExtractedBytesCount",605],")",";",["T_WHITESPACE","\n            ",605],["T_VARIABLE","$fileWriter",606],["T_OBJECT_OPERATOR","->",606],["T_STRING","write",606],"(",["T_VARIABLE","$data",606],")",";",["T_WHITESPACE","\n\n            ",606],["T_VARIABLE","$bytesExtracted",608],["T_WHITESPACE"," ",608],["T_PLUS_EQUAL","+=",608],["T_WHITESPACE"," ",608],["T_STRING","strlen",608],"(",["T_VARIABLE","$block",608],")",";",["T_WHITESPACE","\n        ",608],"}",["T_WHITESPACE","\n    ",609],"}",["T_WHITESPACE","\n\n    ",610],["T_DOC_COMMENT","\/**\n     * Pack file to TAR (Tape Archiver).\n     *\n     * @param string $source\n     * @param string $destination\n     * @param boolean $skipRoot\n     * @return string\n     *\/",612],["T_WHITESPACE","\n    ",619],["T_PUBLIC","public",620],["T_WHITESPACE"," ",620],["T_FUNCTION","function",620],["T_WHITESPACE"," ",620],["T_STRING","pack",620],"(",["T_VARIABLE","$source",620],",",["T_WHITESPACE"," ",620],["T_VARIABLE","$destination",620],",",["T_WHITESPACE"," ",620],["T_VARIABLE","$skipRoot",620],["T_WHITESPACE"," ",620],"=",["T_WHITESPACE"," ",620],["T_STRING","false",620],")",["T_WHITESPACE","\n    ",620],"{",["T_WHITESPACE","\n        ",621],["T_VARIABLE","$this",622],["T_OBJECT_OPERATOR","->",622],["T_STRING","_setSkipRoot",622],"(",["T_VARIABLE","$skipRoot",622],")",";",["T_WHITESPACE","\n        ",622],["T_VARIABLE","$source",623],["T_WHITESPACE"," ",623],"=",["T_WHITESPACE"," ",623],["T_STRING","realpath",623],"(",["T_VARIABLE","$source",623],")",";",["T_WHITESPACE","\n        ",623],["T_VARIABLE","$tarData",624],["T_WHITESPACE"," ",624],"=",["T_WHITESPACE"," ",624],["T_VARIABLE","$this",624],["T_OBJECT_OPERATOR","->",624],["T_STRING","_setCurrentPath",624],"(",["T_VARIABLE","$source",624],")",["T_WHITESPACE","\n            ",624],["T_OBJECT_OPERATOR","->",625],["T_STRING","_setDestinationFilePath",625],"(",["T_VARIABLE","$destination",625],")",["T_WHITESPACE","\n            ",625],["T_OBJECT_OPERATOR","->",626],["T_STRING","_setCurrentFile",626],"(",["T_VARIABLE","$source",626],")",";",["T_WHITESPACE","\n\n        ",626],["T_VARIABLE","$this",628],["T_OBJECT_OPERATOR","->",628],["T_STRING","_initWriter",628],"(",")",";",["T_WHITESPACE","\n        ",628],["T_VARIABLE","$this",629],["T_OBJECT_OPERATOR","->",629],["T_STRING","_createTar",629],"(",["T_VARIABLE","$skipRoot",629],",",["T_WHITESPACE"," ",629],["T_STRING","true",629],")",";",["T_WHITESPACE","\n        ",629],["T_VARIABLE","$this",630],["T_OBJECT_OPERATOR","->",630],["T_STRING","_destroyWriter",630],"(",")",";",["T_WHITESPACE","\n\n        ",630],["T_RETURN","return",632],["T_WHITESPACE"," ",632],["T_VARIABLE","$destination",632],";",["T_WHITESPACE","\n    ",632],"}",["T_WHITESPACE","\n\n    ",633],["T_DOC_COMMENT","\/**\n     * Unpack file from TAR (Tape Archiver).\n     *\n     * @param string $source\n     * @param string $destination\n     * @return string\n     *\/",635],["T_WHITESPACE","\n    ",641],["T_PUBLIC","public",642],["T_WHITESPACE"," ",642],["T_FUNCTION","function",642],["T_WHITESPACE"," ",642],["T_STRING","unpack",642],"(",["T_VARIABLE","$source",642],",",["T_WHITESPACE"," ",642],["T_VARIABLE","$destination",642],")",["T_WHITESPACE","\n    ",642],"{",["T_WHITESPACE","\n        ",643],["T_VARIABLE","$this",644],["T_OBJECT_OPERATOR","->",644],["T_STRING","_setCurrentFile",644],"(",["T_VARIABLE","$source",644],")",["T_WHITESPACE","\n            ",644],["T_OBJECT_OPERATOR","->",645],["T_STRING","_setCurrentPath",645],"(",["T_VARIABLE","$source",645],")",";",["T_WHITESPACE","\n\n        ",645],["T_VARIABLE","$this",647],["T_OBJECT_OPERATOR","->",647],["T_STRING","_initReader",647],"(",")",";",["T_WHITESPACE","\n        ",647],["T_VARIABLE","$this",648],["T_OBJECT_OPERATOR","->",648],["T_STRING","_unpackCurrentTar",648],"(",["T_VARIABLE","$destination",648],")",";",["T_WHITESPACE","\n        ",648],["T_VARIABLE","$this",649],["T_OBJECT_OPERATOR","->",649],["T_STRING","_destroyReader",649],"(",")",";",["T_WHITESPACE","\n\n        ",649],["T_RETURN","return",651],["T_WHITESPACE"," ",651],["T_VARIABLE","$destination",651],";",["T_WHITESPACE","\n    ",651],"}",["T_WHITESPACE","\n\n    ",652],["T_DOC_COMMENT","\/**\n     * Extract one file from TAR (Tape Archiver).\n     *\n     * @param string $file\n     * @param string $source\n     * @param string $destination\n     * @return string\n     *\/",654],["T_WHITESPACE","\n    ",661],["T_PUBLIC","public",662],["T_WHITESPACE"," ",662],["T_FUNCTION","function",662],["T_WHITESPACE"," ",662],["T_STRING","extract",662],"(",["T_VARIABLE","$file",662],",",["T_WHITESPACE"," ",662],["T_VARIABLE","$source",662],",",["T_WHITESPACE"," ",662],["T_VARIABLE","$destination",662],")",["T_WHITESPACE","\n    ",662],"{",["T_WHITESPACE","\n        ",663],["T_VARIABLE","$this",664],["T_OBJECT_OPERATOR","->",664],["T_STRING","_setCurrentFile",664],"(",["T_VARIABLE","$source",664],")",";",["T_WHITESPACE","\n        ",664],["T_VARIABLE","$this",665],["T_OBJECT_OPERATOR","->",665],["T_STRING","_initReader",665],"(",")",";",["T_WHITESPACE","\n\n        ",665],["T_VARIABLE","$archiveReader",667],["T_WHITESPACE"," ",667],"=",["T_WHITESPACE"," ",667],["T_VARIABLE","$this",667],["T_OBJECT_OPERATOR","->",667],["T_STRING","_getReader",667],"(",")",";",["T_WHITESPACE","\n        ",667],["T_VARIABLE","$extractedFile",668],["T_WHITESPACE"," ",668],"=",["T_WHITESPACE"," ",668],["T_CONSTANT_ENCAPSED_STRING","''",668],";",["T_WHITESPACE","\n\n        ",668],["T_WHILE","while",670],["T_WHITESPACE"," ",670],"(","!",["T_VARIABLE","$archiveReader",670],["T_OBJECT_OPERATOR","->",670],["T_STRING","eof",670],"(",")",")",["T_WHITESPACE"," ",670],"{",["T_WHITESPACE","\n            ",670],["T_VARIABLE","$header",671],["T_WHITESPACE"," ",671],"=",["T_WHITESPACE"," ",671],["T_VARIABLE","$this",671],["T_OBJECT_OPERATOR","->",671],["T_STRING","_extractFileHeader",671],"(",")",";",["T_WHITESPACE","\n            ",671],["T_IF","if",672],["T_WHITESPACE"," ",672],"(",["T_VARIABLE","$header",672],"[",["T_CONSTANT_ENCAPSED_STRING","'name'",672],"]",["T_WHITESPACE"," ",672],["T_IS_EQUAL","==",672],["T_WHITESPACE"," ",672],["T_VARIABLE","$file",672],")",["T_WHITESPACE"," ",672],"{",["T_WHITESPACE","\n                ",672],["T_VARIABLE","$extractedFile",673],["T_WHITESPACE"," ",673],"=",["T_WHITESPACE"," ",673],["T_VARIABLE","$destination",673],["T_WHITESPACE"," ",673],".",["T_WHITESPACE"," ",673],["T_STRING","basename",673],"(",["T_VARIABLE","$header",673],"[",["T_CONSTANT_ENCAPSED_STRING","'name'",673],"]",")",";",["T_WHITESPACE","\n                ",673],["T_VARIABLE","$this",674],["T_OBJECT_OPERATOR","->",674],["T_STRING","_extractAndWriteFile",674],"(",["T_VARIABLE","$header",674],",",["T_WHITESPACE"," ",674],["T_VARIABLE","$extractedFile",674],")",";",["T_WHITESPACE","\n                ",674],["T_BREAK","break",675],";",["T_WHITESPACE","\n            ",675],"}",["T_WHITESPACE","\n\n            ",676],["T_IF","if",678],["T_WHITESPACE"," ",678],"(",["T_VARIABLE","$header",678],"[",["T_CONSTANT_ENCAPSED_STRING","'type'",678],"]",["T_WHITESPACE"," ",678],["T_IS_NOT_EQUAL","!=",678],["T_WHITESPACE"," ",678],["T_LNUMBER","5",678],")","{",["T_WHITESPACE","\n                ",678],["T_VARIABLE","$skipBytes",679],["T_WHITESPACE"," ",679],"=",["T_WHITESPACE"," ",679],["T_STRING","floor",679],"(","(",["T_VARIABLE","$header",679],"[",["T_CONSTANT_ENCAPSED_STRING","'size'",679],"]",["T_WHITESPACE"," ",679],"+",["T_WHITESPACE"," ",679],["T_STRING","self",679],["T_DOUBLE_COLON","::",679],["T_STRING","TAR_BLOCK_SIZE",679],["T_WHITESPACE"," ",679],"-",["T_WHITESPACE"," ",679],["T_LNUMBER","1",679],")",["T_WHITESPACE"," ",679],"\/",["T_WHITESPACE"," ",679],["T_STRING","self",679],["T_DOUBLE_COLON","::",679],["T_STRING","TAR_BLOCK_SIZE",679],")",["T_WHITESPACE","\n                    ",679],"*",["T_WHITESPACE"," ",680],["T_STRING","self",680],["T_DOUBLE_COLON","::",680],["T_STRING","TAR_BLOCK_SIZE",680],";",["T_WHITESPACE","\n                ",680],["T_VARIABLE","$archiveReader",681],["T_OBJECT_OPERATOR","->",681],["T_STRING","read",681],"(",["T_VARIABLE","$skipBytes",681],")",";",["T_WHITESPACE","\n            ",681],"}",["T_WHITESPACE","\n        ",682],"}",["T_WHITESPACE","\n\n        ",683],["T_VARIABLE","$this",685],["T_OBJECT_OPERATOR","->",685],["T_STRING","_destroyReader",685],"(",")",";",["T_WHITESPACE","\n        ",685],["T_RETURN","return",686],["T_WHITESPACE"," ",686],["T_VARIABLE","$extractedFile",686],";",["T_WHITESPACE","\n    ",686],"}",["T_WHITESPACE","\n",687],"}",["T_WHITESPACE","\n",688]]
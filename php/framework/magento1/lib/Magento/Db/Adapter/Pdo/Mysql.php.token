[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Magento\n *\n * NOTICE OF LICENSE\n *\n * This source file is subject to the Open Software License (OSL 3.0)\n * that is bundled with this package in the file LICENSE.txt.\n * It is also available through the world-wide-web at this URL:\n * http:\/\/opensource.org\/licenses\/osl-3.0.php\n * If you did not receive a copy of the license and are unable to\n * obtain it through the world-wide-web, please send an email\n * to license@magento.com so we can send you a copy immediately.\n *\n * DISCLAIMER\n *\n * Do not edit or add to this file if you wish to upgrade Magento to newer\n * versions in the future. If you wish to customize Magento for your\n * needs please refer to http:\/\/www.magento.com for more information.\n *\n * @category    Magento\n * @package     Magento_Db\n * @copyright  Copyright (c) 2006-2016 X.commerce, Inc. and affiliates (http:\/\/www.magento.com)\n * @license    http:\/\/opensource.org\/licenses\/osl-3.0.php  Open Software License (OSL 3.0)\n *\/",2],["T_WHITESPACE","\n\n",25],["T_DOC_COMMENT","\/**\n * Magento PDO MySQL DB adapter\n *\n * @category    Magento\n * @package     Magento_Db\n * @author      Magento Core Team <core@magentocommerce.com>\n *\/",27],["T_WHITESPACE","\n",33],["T_CLASS","class",34],["T_WHITESPACE"," ",34],["T_STRING","Magento_Db_Adapter_Pdo_Mysql",34],["T_WHITESPACE"," ",34],["T_EXTENDS","extends",34],["T_WHITESPACE"," ",34],["T_STRING","Varien_Db_Adapter_Pdo_Mysql",34],["T_WHITESPACE","\n",34],"{",["T_WHITESPACE","\n    ",35],["T_DOC_COMMENT","\/**\n     * Returns flag is transaction now?\n     *\n     * @return bool\n     *\/",36],["T_WHITESPACE","\n    ",40],["T_PUBLIC","public",41],["T_WHITESPACE"," ",41],["T_FUNCTION","function",41],["T_WHITESPACE"," ",41],["T_STRING","isTransaction",41],"(",")",["T_WHITESPACE","\n    ",41],"{",["T_WHITESPACE","\n        ",42],["T_RETURN","return",43],["T_WHITESPACE"," ",43],["T_BOOL_CAST","(bool)",43],["T_VARIABLE","$this",43],["T_OBJECT_OPERATOR","->",43],["T_STRING","_transactionLevel",43],";",["T_WHITESPACE","\n    ",43],"}",["T_WHITESPACE","\n\n    ",44],["T_DOC_COMMENT","\/**\n     * Batched insert of specified select\n     *\n     * @param Varien_Db_Select $select\n     * @param string $table\n     * @param array $fields\n     * @param bool $mode\n     * @param int $step\n     * @return int\n     *\/",46],["T_WHITESPACE","\n    ",55],["T_PUBLIC","public",56],["T_WHITESPACE"," ",56],["T_FUNCTION","function",56],["T_WHITESPACE"," ",56],["T_STRING","insertBatchFromSelect",56],"(",["T_STRING","Varien_Db_Select",56],["T_WHITESPACE"," ",56],["T_VARIABLE","$select",56],",",["T_WHITESPACE"," ",56],["T_VARIABLE","$table",56],",",["T_WHITESPACE"," ",56],["T_ARRAY","array",56],["T_WHITESPACE"," ",56],["T_VARIABLE","$fields",56],["T_WHITESPACE"," ",56],"=",["T_WHITESPACE"," ",56],["T_ARRAY","array",56],"(",")",",",["T_WHITESPACE","\n                                          ",56],["T_VARIABLE","$mode",57],["T_WHITESPACE"," ",57],"=",["T_WHITESPACE"," ",57],["T_STRING","false",57],",",["T_WHITESPACE"," ",57],["T_VARIABLE","$step",57],["T_WHITESPACE"," ",57],"=",["T_WHITESPACE"," ",57],["T_LNUMBER","10000",57],["T_WHITESPACE","\n    ",57],")",["T_WHITESPACE"," ",58],"{",["T_WHITESPACE","\n        ",58],["T_VARIABLE","$limitOffset",59],["T_WHITESPACE"," ",59],"=",["T_WHITESPACE"," ",59],["T_LNUMBER","0",59],";",["T_WHITESPACE","\n        ",59],["T_VARIABLE","$totalAffectedRows",60],["T_WHITESPACE"," ",60],"=",["T_WHITESPACE"," ",60],["T_LNUMBER","0",60],";",["T_WHITESPACE","\n\n        ",60],["T_DO","do",62],["T_WHITESPACE"," ",62],"{",["T_WHITESPACE","\n            ",62],["T_VARIABLE","$select",63],["T_OBJECT_OPERATOR","->",63],["T_STRING","limit",63],"(",["T_VARIABLE","$step",63],",",["T_WHITESPACE"," ",63],["T_VARIABLE","$limitOffset",63],")",";",["T_WHITESPACE","\n            ",63],["T_VARIABLE","$result",64],["T_WHITESPACE"," ",64],"=",["T_WHITESPACE"," ",64],["T_VARIABLE","$this",64],["T_OBJECT_OPERATOR","->",64],["T_STRING","query",64],"(",["T_WHITESPACE","\n                ",64],["T_VARIABLE","$this",65],["T_OBJECT_OPERATOR","->",65],["T_STRING","insertFromSelect",65],"(",["T_VARIABLE","$select",65],",",["T_WHITESPACE"," ",65],["T_VARIABLE","$table",65],",",["T_WHITESPACE"," ",65],["T_VARIABLE","$fields",65],",",["T_WHITESPACE"," ",65],["T_VARIABLE","$mode",65],")",["T_WHITESPACE","\n            ",65],")",";",["T_WHITESPACE","\n\n            ",66],["T_VARIABLE","$affectedRows",68],["T_WHITESPACE"," ",68],"=",["T_WHITESPACE"," ",68],["T_VARIABLE","$result",68],["T_OBJECT_OPERATOR","->",68],["T_STRING","rowCount",68],"(",")",";",["T_WHITESPACE","\n            ",68],["T_VARIABLE","$totalAffectedRows",69],["T_WHITESPACE"," ",69],["T_PLUS_EQUAL","+=",69],["T_WHITESPACE"," ",69],["T_VARIABLE","$affectedRows",69],";",["T_WHITESPACE","\n            ",69],["T_VARIABLE","$limitOffset",70],["T_WHITESPACE"," ",70],["T_PLUS_EQUAL","+=",70],["T_WHITESPACE"," ",70],["T_VARIABLE","$step",70],";",["T_WHITESPACE","\n        ",70],"}",["T_WHITESPACE"," ",71],["T_WHILE","while",71],["T_WHITESPACE"," ",71],"(",["T_VARIABLE","$affectedRows",71],["T_WHITESPACE"," ",71],">",["T_WHITESPACE"," ",71],["T_LNUMBER","0",71],")",";",["T_WHITESPACE","\n\n        ",71],["T_RETURN","return",73],["T_WHITESPACE"," ",73],["T_VARIABLE","$totalAffectedRows",73],";",["T_WHITESPACE","\n    ",73],"}",["T_WHITESPACE","\n\n    ",74],["T_DOC_COMMENT","\/**\n     * Retrieve bunch of queries for specified select splitted by specified step\n     *\n     * @param Varien_Db_Select $select\n     * @param string $entityIdField\n     * @param int $step\n     * @return array\n     *\/",76],["T_WHITESPACE","\n    ",83],["T_PUBLIC","public",84],["T_WHITESPACE"," ",84],["T_FUNCTION","function",84],["T_WHITESPACE"," ",84],["T_STRING","splitSelect",84],"(",["T_STRING","Varien_Db_Select",84],["T_WHITESPACE"," ",84],["T_VARIABLE","$select",84],",",["T_WHITESPACE"," ",84],["T_VARIABLE","$entityIdField",84],["T_WHITESPACE"," ",84],"=",["T_WHITESPACE"," ",84],["T_CONSTANT_ENCAPSED_STRING","'*'",84],",",["T_WHITESPACE"," ",84],["T_VARIABLE","$step",84],["T_WHITESPACE"," ",84],"=",["T_WHITESPACE"," ",84],["T_LNUMBER","10000",84],")",["T_WHITESPACE","\n    ",84],"{",["T_WHITESPACE","\n        ",85],["T_VARIABLE","$countSelect",86],["T_WHITESPACE"," ",86],"=",["T_WHITESPACE"," ",86],["T_CLONE","clone",86],["T_WHITESPACE"," ",86],["T_VARIABLE","$select",86],";",["T_WHITESPACE","\n\n        ",86],["T_VARIABLE","$countSelect",88],["T_OBJECT_OPERATOR","->",88],["T_STRING","reset",88],"(",["T_STRING","Zend_Db_Select",88],["T_DOUBLE_COLON","::",88],["T_STRING","COLUMNS",88],")",";",["T_WHITESPACE","\n        ",88],["T_VARIABLE","$countSelect",89],["T_OBJECT_OPERATOR","->",89],["T_STRING","reset",89],"(",["T_STRING","Zend_Db_Select",89],["T_DOUBLE_COLON","::",89],["T_STRING","LIMIT_COUNT",89],")",";",["T_WHITESPACE","\n        ",89],["T_VARIABLE","$countSelect",90],["T_OBJECT_OPERATOR","->",90],["T_STRING","reset",90],"(",["T_STRING","Zend_Db_Select",90],["T_DOUBLE_COLON","::",90],["T_STRING","LIMIT_OFFSET",90],")",";",["T_WHITESPACE","\n        ",90],["T_VARIABLE","$countSelect",91],["T_OBJECT_OPERATOR","->",91],["T_STRING","columns",91],"(",["T_CONSTANT_ENCAPSED_STRING","'COUNT('",91],["T_WHITESPACE"," ",91],".",["T_WHITESPACE"," ",91],["T_VARIABLE","$entityIdField",91],["T_WHITESPACE"," ",91],".",["T_WHITESPACE"," ",91],["T_CONSTANT_ENCAPSED_STRING","')'",91],")",";",["T_WHITESPACE","\n\n        ",91],["T_VARIABLE","$row",93],["T_WHITESPACE"," ",93],"=",["T_WHITESPACE"," ",93],["T_VARIABLE","$this",93],["T_OBJECT_OPERATOR","->",93],["T_STRING","fetchRow",93],"(",["T_VARIABLE","$countSelect",93],")",";",["T_WHITESPACE","\n        ",93],["T_VARIABLE","$totalRows",94],["T_WHITESPACE"," ",94],"=",["T_WHITESPACE"," ",94],["T_STRING","array_shift",94],"(",["T_VARIABLE","$row",94],")",";",["T_WHITESPACE","\n\n        ",94],["T_VARIABLE","$bunches",96],["T_WHITESPACE"," ",96],"=",["T_WHITESPACE"," ",96],["T_ARRAY","array",96],"(",")",";",["T_WHITESPACE","\n        ",96],["T_FOR","for",97],["T_WHITESPACE"," ",97],"(",["T_VARIABLE","$i",97],["T_WHITESPACE"," ",97],"=",["T_WHITESPACE"," ",97],["T_LNUMBER","0",97],";",["T_WHITESPACE"," ",97],["T_VARIABLE","$i",97],["T_WHITESPACE"," ",97],["T_IS_SMALLER_OR_EQUAL","<=",97],["T_WHITESPACE"," ",97],["T_VARIABLE","$totalRows",97],";",["T_WHITESPACE"," ",97],["T_VARIABLE","$i",97],["T_WHITESPACE"," ",97],["T_PLUS_EQUAL","+=",97],["T_WHITESPACE"," ",97],["T_VARIABLE","$step",97],")",["T_WHITESPACE"," ",97],"{",["T_WHITESPACE","\n            ",97],["T_VARIABLE","$bunchSelect",98],["T_WHITESPACE"," ",98],"=",["T_WHITESPACE"," ",98],["T_CLONE","clone",98],["T_WHITESPACE"," ",98],["T_VARIABLE","$select",98],";",["T_WHITESPACE","\n            ",98],["T_VARIABLE","$bunches",99],"[","]",["T_WHITESPACE"," ",99],"=",["T_WHITESPACE"," ",99],["T_VARIABLE","$bunchSelect",99],["T_OBJECT_OPERATOR","->",99],["T_STRING","limit",99],"(",["T_VARIABLE","$step",99],",",["T_WHITESPACE"," ",99],["T_VARIABLE","$i",99],")",";",["T_WHITESPACE","\n        ",99],"}",["T_WHITESPACE","\n\n        ",100],["T_RETURN","return",102],["T_WHITESPACE"," ",102],["T_VARIABLE","$bunches",102],";",["T_WHITESPACE","\n    ",102],"}",["T_WHITESPACE","\n\n    ",103],["T_DOC_COMMENT","\/**\n     * Quote a raw string.\n     *\n     * @param string $value     Raw string\n     * @return string           Quoted string\n     *\/",105],["T_WHITESPACE","\n    ",110],["T_PROTECTED","protected",111],["T_WHITESPACE"," ",111],["T_FUNCTION","function",111],["T_WHITESPACE"," ",111],["T_STRING","_quote",111],"(",["T_VARIABLE","$value",111],")",["T_WHITESPACE","\n    ",111],"{",["T_WHITESPACE","\n        ",112],["T_IF","if",113],["T_WHITESPACE"," ",113],"(",["T_STRING","is_float",113],"(",["T_VARIABLE","$value",113],")",")",["T_WHITESPACE"," ",113],"{",["T_WHITESPACE","\n            ",113],["T_VARIABLE","$value",114],["T_WHITESPACE"," ",114],"=",["T_WHITESPACE"," ",114],["T_VARIABLE","$this",114],["T_OBJECT_OPERATOR","->",114],["T_STRING","_convertFloat",114],"(",["T_VARIABLE","$value",114],")",";",["T_WHITESPACE","\n            ",114],["T_RETURN","return",115],["T_WHITESPACE"," ",115],["T_VARIABLE","$value",115],";",["T_WHITESPACE","\n        ",115],"}",["T_WHITESPACE","\n\n        ",116],["T_RETURN","return",118],["T_WHITESPACE"," ",118],["T_STRING","parent",118],["T_DOUBLE_COLON","::",118],["T_STRING","_quote",118],"(",["T_VARIABLE","$value",118],")",";",["T_WHITESPACE","\n    ",118],"}",["T_WHITESPACE","\n\n    ",119],["T_DOC_COMMENT","\/**\n     * Safely quotes a value for an SQL statement.\n     *\n     * If an array is passed as the value, the array values are quote\n     * and then returned as a comma-separated string.\n     *\n     * @param mixed $value The value to quote.\n     * @param null $type OPTIONAL the SQL datatype name, or constant, or null.\n     * @return mixed|string An SQL-safe quoted value (or string of separated values).\n     *\/",121],["T_WHITESPACE","\n    ",130],["T_PUBLIC","public",131],["T_WHITESPACE"," ",131],["T_FUNCTION","function",131],["T_WHITESPACE"," ",131],["T_STRING","quote",131],"(",["T_VARIABLE","$value",131],",",["T_WHITESPACE"," ",131],["T_VARIABLE","$type",131],["T_WHITESPACE"," ",131],"=",["T_WHITESPACE"," ",131],["T_STRING","null",131],")",["T_WHITESPACE","\n    ",131],"{",["T_WHITESPACE","\n        ",132],["T_VARIABLE","$this",133],["T_OBJECT_OPERATOR","->",133],["T_STRING","_connect",133],"(",")",";",["T_WHITESPACE","\n\n        ",133],["T_IF","if",135],["T_WHITESPACE"," ",135],"(",["T_VARIABLE","$type",135],["T_WHITESPACE"," ",135],["T_IS_NOT_IDENTICAL","!==",135],["T_WHITESPACE"," ",135],["T_STRING","null",135],["T_WHITESPACE"," ",135],["T_BOOLEAN_AND","&&",135],["T_WHITESPACE","\n            ",135],["T_STRING","array_key_exists",136],"(",["T_VARIABLE","$type",136],["T_WHITESPACE"," ",136],"=",["T_WHITESPACE"," ",136],["T_STRING","strtoupper",136],"(",["T_VARIABLE","$type",136],")",",",["T_WHITESPACE"," ",136],["T_VARIABLE","$this",136],["T_OBJECT_OPERATOR","->",136],["T_STRING","_numericDataTypes",136],")",["T_WHITESPACE"," ",136],["T_BOOLEAN_AND","&&",136],["T_WHITESPACE","\n            ",136],["T_VARIABLE","$this",137],["T_OBJECT_OPERATOR","->",137],["T_STRING","_numericDataTypes",137],"[",["T_VARIABLE","$type",137],"]",["T_WHITESPACE"," ",137],["T_IS_EQUAL","==",137],["T_WHITESPACE"," ",137],["T_STRING","Zend_Db",137],["T_DOUBLE_COLON","::",137],["T_STRING","FLOAT_TYPE",137],")",["T_WHITESPACE"," ",137],"{",["T_WHITESPACE","\n                ",137],["T_VARIABLE","$value",138],["T_WHITESPACE"," ",138],"=",["T_WHITESPACE"," ",138],["T_VARIABLE","$this",138],["T_OBJECT_OPERATOR","->",138],["T_STRING","_convertFloat",138],"(",["T_VARIABLE","$value",138],")",";",["T_WHITESPACE","\n                ",138],["T_VARIABLE","$quoteValue",139],["T_WHITESPACE"," ",139],"=",["T_WHITESPACE"," ",139],["T_STRING","sprintf",139],"(",["T_CONSTANT_ENCAPSED_STRING","'%F'",139],",",["T_WHITESPACE"," ",139],["T_VARIABLE","$value",139],")",";",["T_WHITESPACE","\n                ",139],["T_RETURN","return",140],["T_WHITESPACE"," ",140],["T_VARIABLE","$quoteValue",140],";",["T_WHITESPACE","\n        ",140],"}",["T_WHITESPACE"," ",141],["T_ELSEIF","elseif",141],["T_WHITESPACE"," ",141],"(",["T_STRING","is_float",141],"(",["T_VARIABLE","$value",141],")",")",["T_WHITESPACE"," ",141],"{",["T_WHITESPACE","\n            ",141],["T_RETURN","return",142],["T_WHITESPACE"," ",142],["T_VARIABLE","$this",142],["T_OBJECT_OPERATOR","->",142],["T_STRING","_quote",142],"(",["T_VARIABLE","$value",142],")",";",["T_WHITESPACE","\n        ",142],"}",["T_WHITESPACE","\n\n        ",143],["T_RETURN","return",145],["T_WHITESPACE"," ",145],["T_STRING","parent",145],["T_DOUBLE_COLON","::",145],["T_STRING","quote",145],"(",["T_VARIABLE","$value",145],",",["T_WHITESPACE"," ",145],["T_VARIABLE","$type",145],")",";",["T_WHITESPACE","\n    ",145],"}",["T_WHITESPACE","\n\n    ",146],["T_DOC_COMMENT","\/**\n     * Convert float values that are not supported by MySQL to alternative representation value.\n     * Value 99999999.9999 is a maximum value that may be stored in Magento decimal columns in DB.\n     *\n     * @param float $value\n     * @return float\n     *\/",148],["T_WHITESPACE","\n    ",154],["T_PROTECTED","protected",155],["T_WHITESPACE"," ",155],["T_FUNCTION","function",155],["T_WHITESPACE"," ",155],["T_STRING","_convertFloat",155],"(",["T_VARIABLE","$value",155],")",["T_WHITESPACE","\n    ",155],"{",["T_WHITESPACE","\n        ",156],["T_VARIABLE","$value",157],["T_WHITESPACE"," ",157],"=",["T_WHITESPACE"," ",157],["T_DOUBLE_CAST","(float)",157],["T_WHITESPACE"," ",157],["T_VARIABLE","$value",157],";",["T_WHITESPACE","\n\n        ",157],["T_IF","if",159],["T_WHITESPACE"," ",159],"(",["T_STRING","is_infinite",159],"(",["T_VARIABLE","$value",159],")",")",["T_WHITESPACE"," ",159],"{",["T_WHITESPACE","\n            ",159],["T_VARIABLE","$value",160],["T_WHITESPACE"," ",160],"=",["T_WHITESPACE"," ",160],"(",["T_VARIABLE","$value",160],["T_WHITESPACE"," ",160],">",["T_WHITESPACE"," ",160],["T_LNUMBER","0",160],")",["T_WHITESPACE","\n                ",160],"?",["T_WHITESPACE"," ",161],["T_DNUMBER","99999999.9999",161],["T_WHITESPACE","\n                ",161],":",["T_WHITESPACE"," ",162],"-",["T_DNUMBER","99999999.9999",162],";",["T_WHITESPACE","\n        ",162],"}",["T_WHITESPACE"," ",163],["T_ELSEIF","elseif",163],["T_WHITESPACE"," ",163],"(",["T_STRING","is_nan",163],"(",["T_VARIABLE","$value",163],")",")",["T_WHITESPACE"," ",163],"{",["T_WHITESPACE","\n            ",163],["T_VARIABLE","$value",164],["T_WHITESPACE"," ",164],"=",["T_WHITESPACE"," ",164],["T_DNUMBER","0.0",164],";",["T_WHITESPACE","\n        ",164],"}",["T_WHITESPACE","\n\n        ",165],["T_RETURN","return",167],["T_WHITESPACE"," ",167],["T_VARIABLE","$value",167],";",["T_WHITESPACE","\n    ",167],"}",["T_WHITESPACE","\n",168],"}",["T_WHITESPACE","\n",169]]
[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Magento\n *\n * NOTICE OF LICENSE\n *\n * This source file is subject to the Open Software License (OSL 3.0)\n * that is bundled with this package in the file LICENSE.txt.\n * It is also available through the world-wide-web at this URL:\n * http:\/\/opensource.org\/licenses\/osl-3.0.php\n * If you did not receive a copy of the license and are unable to\n * obtain it through the world-wide-web, please send an email\n * to license@magento.com so we can send you a copy immediately.\n *\n * DISCLAIMER\n *\n * Do not edit or add to this file if you wish to upgrade Magento to newer\n * versions in the future. If you wish to customize Magento for your\n * needs please refer to http:\/\/www.magento.com for more information.\n *\n * @category    Magento\n * @package     Magento_Db\n * @copyright  Copyright (c) 2006-2016 X.commerce, Inc. and affiliates (http:\/\/www.magento.com)\n * @license    http:\/\/opensource.org\/licenses\/osl-3.0.php  Open Software License (OSL 3.0)\n *\/",2],["T_WHITESPACE","\n\n",25],["T_DOC_COMMENT","\/**\n * Magento_Db_Sql_Trigger\n *\n * @category    Magento\n * @package     Magento_Db\n * @author      Magento Core Team <core@magentocommerce.com>\n *\/",27],["T_WHITESPACE","\n",33],["T_CLASS","class",34],["T_WHITESPACE"," ",34],["T_STRING","Magento_Db_Sql_Trigger",34],["T_WHITESPACE","\n",34],"{",["T_WHITESPACE","\n    ",35],["T_CONST","const",36],["T_WHITESPACE"," ",36],["T_STRING","NAME",36],["T_WHITESPACE","      ",36],"=",["T_WHITESPACE"," ",36],["T_CONSTANT_ENCAPSED_STRING","'name'",36],";",["T_WHITESPACE","\n    ",36],["T_CONST","const",37],["T_WHITESPACE"," ",37],["T_STRING","TARGET",37],["T_WHITESPACE","    ",37],"=",["T_WHITESPACE"," ",37],["T_CONSTANT_ENCAPSED_STRING","'target'",37],";",["T_WHITESPACE","\n    ",37],["T_CONST","const",38],["T_WHITESPACE"," ",38],["T_STRING","TIME",38],["T_WHITESPACE","      ",38],"=",["T_WHITESPACE"," ",38],["T_CONSTANT_ENCAPSED_STRING","'time'",38],";",["T_WHITESPACE","\n    ",38],["T_CONST","const",39],["T_WHITESPACE"," ",39],["T_STRING","EVENT",39],["T_WHITESPACE","     ",39],"=",["T_WHITESPACE"," ",39],["T_CONSTANT_ENCAPSED_STRING","'event'",39],";",["T_WHITESPACE","\n    ",39],["T_CONST","const",40],["T_WHITESPACE"," ",40],["T_STRING","SCOPE",40],["T_WHITESPACE","     ",40],"=",["T_WHITESPACE"," ",40],["T_CONSTANT_ENCAPSED_STRING","'scope'",40],";",["T_WHITESPACE","\n    ",40],["T_CONST","const",41],["T_WHITESPACE"," ",41],["T_STRING","BODY",41],["T_WHITESPACE","      ",41],"=",["T_WHITESPACE"," ",41],["T_CONSTANT_ENCAPSED_STRING","'body'",41],";",["T_WHITESPACE","\n\n    ",41],["T_DOC_COMMENT","\/**\n     * SQL constants\n     *\/",43],["T_WHITESPACE","\n    ",45],["T_CONST","const",46],["T_WHITESPACE"," ",46],["T_STRING","SQL_TIME_BEFORE",46],["T_WHITESPACE","   ",46],"=",["T_WHITESPACE"," ",46],["T_CONSTANT_ENCAPSED_STRING","'BEFORE'",46],";",["T_WHITESPACE","\n    ",46],["T_CONST","const",47],["T_WHITESPACE"," ",47],["T_STRING","SQL_TIME_AFTER",47],["T_WHITESPACE","    ",47],"=",["T_WHITESPACE"," ",47],["T_CONSTANT_ENCAPSED_STRING","'AFTER'",47],";",["T_WHITESPACE","\n    ",47],["T_CONST","const",48],["T_WHITESPACE"," ",48],["T_STRING","SQL_EVENT_INSERT",48],["T_WHITESPACE","  ",48],"=",["T_WHITESPACE"," ",48],["T_CONSTANT_ENCAPSED_STRING","'INSERT'",48],";",["T_WHITESPACE","\n    ",48],["T_CONST","const",49],["T_WHITESPACE"," ",49],["T_STRING","SQL_EVENT_UPDATE",49],["T_WHITESPACE","  ",49],"=",["T_WHITESPACE"," ",49],["T_CONSTANT_ENCAPSED_STRING","'UPDATE'",49],";",["T_WHITESPACE","\n    ",49],["T_CONST","const",50],["T_WHITESPACE"," ",50],["T_STRING","SQL_EVENT_DELETE",50],["T_WHITESPACE","  ",50],"=",["T_WHITESPACE"," ",50],["T_CONSTANT_ENCAPSED_STRING","'DELETE'",50],";",["T_WHITESPACE","\n    ",50],["T_CONST","const",51],["T_WHITESPACE"," ",51],["T_STRING","SQL_FOR_EACH_ROW",51],["T_WHITESPACE","  ",51],"=",["T_WHITESPACE"," ",51],["T_CONSTANT_ENCAPSED_STRING","'FOR EACH ROW'",51],";",["T_WHITESPACE","\n\n    ",51],["T_DOC_COMMENT","\/**\n     * Trigger parts\n     *\n     * @var array\n     *\/",53],["T_WHITESPACE","\n    ",57],["T_PROTECTED","protected",58],["T_WHITESPACE"," ",58],["T_VARIABLE","$_parts",58],["T_WHITESPACE"," ",58],"=",["T_WHITESPACE"," ",58],["T_ARRAY","array",58],"(",")",";",["T_WHITESPACE","\n\n    ",58],["T_DOC_COMMENT","\/**\n     * Allowed time types\n     *\n     * @var array\n     *\/",60],["T_WHITESPACE","\n    ",64],["T_PROTECTED","protected",65],["T_WHITESPACE"," ",65],["T_VARIABLE","$_timeTypes",65],["T_WHITESPACE"," ",65],"=",["T_WHITESPACE"," ",65],["T_ARRAY","array",65],"(",["T_WHITESPACE","\n        ",65],["T_STRING","self",66],["T_DOUBLE_COLON","::",66],["T_STRING","SQL_TIME_AFTER",66],",",["T_WHITESPACE","\n        ",66],["T_STRING","self",67],["T_DOUBLE_COLON","::",67],["T_STRING","SQL_TIME_BEFORE",67],["T_WHITESPACE","\n    ",67],")",";",["T_WHITESPACE","\n\n    ",68],["T_DOC_COMMENT","\/**\n     * Allowed event types\n     *\n     * @var array\n     *\/",70],["T_WHITESPACE","\n    ",74],["T_PROTECTED","protected",75],["T_WHITESPACE"," ",75],["T_VARIABLE","$_eventTypes",75],["T_WHITESPACE"," ",75],"=",["T_WHITESPACE"," ",75],["T_ARRAY","array",75],"(",["T_WHITESPACE","\n        ",75],["T_STRING","self",76],["T_DOUBLE_COLON","::",76],["T_STRING","SQL_EVENT_INSERT",76],",",["T_WHITESPACE","\n        ",76],["T_STRING","self",77],["T_DOUBLE_COLON","::",77],["T_STRING","SQL_EVENT_UPDATE",77],",",["T_WHITESPACE","\n        ",77],["T_STRING","self",78],["T_DOUBLE_COLON","::",78],["T_STRING","SQL_EVENT_DELETE",78],["T_WHITESPACE","\n    ",78],")",";",["T_WHITESPACE","\n\n    ",79],["T_DOC_COMMENT","\/**\n     * Initial trigger structure, for MySQL scope is always \"FOR EACH ROW\".\n     * Time \"AFTER\" is default\n     *\n     * @var array\n     *\/",81],["T_WHITESPACE","\n    ",86],["T_PROTECTED","protected",87],["T_WHITESPACE"," ",87],["T_STATIC","static",87],["T_WHITESPACE"," ",87],["T_VARIABLE","$_partsInit",87],["T_WHITESPACE"," ",87],"=",["T_WHITESPACE"," ",87],["T_ARRAY","array",87],"(",["T_WHITESPACE","\n        ",87],["T_STRING","self",88],["T_DOUBLE_COLON","::",88],["T_STRING","TARGET",88],["T_WHITESPACE","    ",88],["T_DOUBLE_ARROW","=>",88],["T_WHITESPACE"," ",88],["T_STRING","null",88],",",["T_WHITESPACE","\n        ",88],["T_STRING","self",89],["T_DOUBLE_COLON","::",89],["T_STRING","TIME",89],["T_WHITESPACE","      ",89],["T_DOUBLE_ARROW","=>",89],["T_WHITESPACE"," ",89],["T_STRING","self",89],["T_DOUBLE_COLON","::",89],["T_STRING","SQL_TIME_AFTER",89],",",["T_WHITESPACE","\n        ",89],["T_STRING","self",90],["T_DOUBLE_COLON","::",90],["T_STRING","EVENT",90],["T_WHITESPACE","     ",90],["T_DOUBLE_ARROW","=>",90],["T_WHITESPACE"," ",90],["T_STRING","null",90],",",["T_WHITESPACE","\n        ",90],["T_STRING","self",91],["T_DOUBLE_COLON","::",91],["T_STRING","SCOPE",91],["T_WHITESPACE","     ",91],["T_DOUBLE_ARROW","=>",91],["T_WHITESPACE"," ",91],["T_STRING","self",91],["T_DOUBLE_COLON","::",91],["T_STRING","SQL_FOR_EACH_ROW",91],",",["T_WHITESPACE","\n        ",91],["T_STRING","self",92],["T_DOUBLE_COLON","::",92],["T_STRING","BODY",92],["T_WHITESPACE","      ",92],["T_DOUBLE_ARROW","=>",92],["T_WHITESPACE"," ",92],["T_ARRAY","array",92],"(",")",["T_WHITESPACE","\n    ",92],")",";",["T_WHITESPACE","\n\n    ",93],["T_DOC_COMMENT","\/**\n     * Constructor\n     *\/",95],["T_WHITESPACE","\n    ",97],["T_PUBLIC","public",98],["T_WHITESPACE"," ",98],["T_FUNCTION","function",98],["T_WHITESPACE"," ",98],["T_STRING","__construct",98],"(",")",["T_WHITESPACE","\n    ",98],"{",["T_WHITESPACE","\n        ",99],["T_VARIABLE","$this",100],["T_OBJECT_OPERATOR","->",100],["T_STRING","_parts",100],["T_WHITESPACE"," ",100],"=",["T_WHITESPACE"," ",100],["T_STRING","self",100],["T_DOUBLE_COLON","::",100],["T_VARIABLE","$_partsInit",100],";",["T_WHITESPACE","\n    ",100],"}",["T_WHITESPACE","\n\n    ",101],["T_DOC_COMMENT","\/**\n     * Validate where all trigger parts set?\n     *\n     * @return Magento_Db_Sql_Trigger\n     * @throws Exception\n     *\/",103],["T_WHITESPACE","\n    ",108],["T_PROTECTED","protected",109],["T_WHITESPACE"," ",109],["T_FUNCTION","function",109],["T_WHITESPACE"," ",109],["T_STRING","_validateIsComplete",109],"(",")",["T_WHITESPACE","\n    ",109],"{",["T_WHITESPACE","\n        ",110],["T_FOREACH","foreach",111],["T_WHITESPACE"," ",111],"(",["T_STRING","array_keys",111],"(",["T_STRING","self",111],["T_DOUBLE_COLON","::",111],["T_VARIABLE","$_partsInit",111],")",["T_WHITESPACE"," ",111],["T_AS","as",111],["T_WHITESPACE"," ",111],["T_VARIABLE","$part",111],")",["T_WHITESPACE"," ",111],"{",["T_WHITESPACE","\n            ",111],["T_IF","if",112],["T_WHITESPACE"," ",112],"(",["T_EMPTY","empty",112],"(",["T_VARIABLE","$this",112],["T_OBJECT_OPERATOR","->",112],["T_STRING","_parts",112],"[",["T_VARIABLE","$part",112],"]",")",")",["T_WHITESPACE"," ",112],"{",["T_WHITESPACE","\n                ",112],["T_THROW","throw",113],["T_WHITESPACE"," ",113],["T_NEW","new",113],["T_WHITESPACE"," ",113],["T_STRING","Exception",113],"(",["T_CONSTANT_ENCAPSED_STRING","'Part ['",113],["T_WHITESPACE"," ",113],".",["T_WHITESPACE"," ",113],["T_VARIABLE","$part",113],["T_WHITESPACE"," ",113],".",["T_WHITESPACE"," ",113],["T_CONSTANT_ENCAPSED_STRING","'] should be set'",113],")",";",["T_WHITESPACE","\n            ",113],"}",["T_WHITESPACE","\n        ",114],"}",["T_WHITESPACE","\n        ",115],["T_RETURN","return",116],["T_WHITESPACE"," ",116],["T_VARIABLE","$this",116],";",["T_WHITESPACE","\n    ",116],"}",["T_WHITESPACE","\n\n    ",117],["T_DOC_COMMENT","\/**\n     * Set trigger part\n     *\n     * @param $part\n     * @param $value\n     * @return Magento_Db_Sql_Trigger\n     * @throws InvalidArgumentException\n     *\/",119],["T_WHITESPACE","\n    ",126],["T_PROTECTED","protected",127],["T_WHITESPACE"," ",127],["T_FUNCTION","function",127],["T_WHITESPACE"," ",127],["T_STRING","_setPart",127],"(",["T_VARIABLE","$part",127],",",["T_WHITESPACE"," ",127],["T_VARIABLE","$value",127],")",["T_WHITESPACE","\n    ",127],"{",["T_WHITESPACE","\n        ",128],["T_IF","if",129],["T_WHITESPACE"," ",129],"(",["T_VARIABLE","$value",129],["T_WHITESPACE"," ",129],["T_IS_NOT_EQUAL","!=",129],["T_WHITESPACE"," ",129],["T_STRING","null",129],")",["T_WHITESPACE"," ",129],"{",["T_WHITESPACE","\n            ",129],["T_VARIABLE","$this",130],["T_OBJECT_OPERATOR","->",130],["T_STRING","_parts",130],"[",["T_VARIABLE","$part",130],"]",["T_WHITESPACE"," ",130],"=",["T_WHITESPACE"," ",130],["T_VARIABLE","$value",130],";",["T_WHITESPACE","\n        ",130],"}",["T_WHITESPACE"," ",131],["T_ELSE","else",131],["T_WHITESPACE"," ",131],"{",["T_WHITESPACE","\n            ",131],["T_THROW","throw",132],["T_WHITESPACE"," ",132],["T_NEW","new",132],["T_WHITESPACE"," ",132],["T_STRING","InvalidArgumentException",132],"(",["T_CONSTANT_ENCAPSED_STRING","'Part ['",132],["T_WHITESPACE"," ",132],".",["T_WHITESPACE"," ",132],["T_VARIABLE","$part",132],["T_WHITESPACE"," ",132],".",["T_WHITESPACE"," ",132],["T_CONSTANT_ENCAPSED_STRING","'] can not be empty'",132],")",";",["T_WHITESPACE","\n        ",132],"}",["T_WHITESPACE","\n        ",133],["T_RETURN","return",134],["T_WHITESPACE"," ",134],["T_VARIABLE","$this",134],";",["T_WHITESPACE","\n    ",134],"}",["T_WHITESPACE","\n\n    ",135],["T_DOC_COMMENT","\/**\n     * Set trigger part\n     *\n     * @param $part\n     * @return string|array\n     * @throws Exception\n     *\/",137],["T_WHITESPACE","\n    ",143],["T_PROTECTED","protected",144],["T_WHITESPACE"," ",144],["T_FUNCTION","function",144],["T_WHITESPACE"," ",144],["T_STRING","_getPart",144],"(",["T_VARIABLE","$part",144],")",["T_WHITESPACE","\n    ",144],"{",["T_WHITESPACE","\n        ",145],["T_IF","if",146],["T_WHITESPACE"," ",146],"(",["T_ISSET","isset",146],"(",["T_VARIABLE","$this",146],["T_OBJECT_OPERATOR","->",146],["T_STRING","_parts",146],"[",["T_VARIABLE","$part",146],"]",")",")",["T_WHITESPACE"," ",146],"{",["T_WHITESPACE","\n            ",146],["T_RETURN","return",147],["T_WHITESPACE"," ",147],["T_VARIABLE","$this",147],["T_OBJECT_OPERATOR","->",147],["T_STRING","_parts",147],"[",["T_VARIABLE","$part",147],"]",";",["T_WHITESPACE","\n        ",147],"}",["T_WHITESPACE","\n\n        ",148],["T_THROW","throw",150],["T_WHITESPACE"," ",150],["T_NEW","new",150],["T_WHITESPACE"," ",150],["T_STRING","Exception",150],"(",["T_CONSTANT_ENCAPSED_STRING","'Part ['",150],["T_WHITESPACE"," ",150],".",["T_WHITESPACE"," ",150],["T_VARIABLE","$part",150],["T_WHITESPACE"," ",150],".",["T_WHITESPACE"," ",150],["T_CONSTANT_ENCAPSED_STRING","'] does\\'t exists'",150],")",";",["T_WHITESPACE","\n    ",150],"}",["T_WHITESPACE","\n\n    ",151],["T_DOC_COMMENT","\/**\n     * Set body part to trigger\n     *\n     * @param $part\n     * @param $value\n     * @return Magento_Db_Sql_Trigger\n     * @throws InvalidArgumentException\n     *\/",153],["T_WHITESPACE","\n    ",160],["T_PUBLIC","public",161],["T_WHITESPACE"," ",161],["T_FUNCTION","function",161],["T_WHITESPACE"," ",161],["T_STRING","setBodyPart",161],"(",["T_VARIABLE","$part",161],",",["T_WHITESPACE"," ",161],["T_VARIABLE","$value",161],")",["T_WHITESPACE","\n    ",161],"{",["T_WHITESPACE","\n        ",162],["T_IF","if",163],["T_WHITESPACE"," ",163],"(",["T_VARIABLE","$value",163],["T_WHITESPACE"," ",163],["T_IS_NOT_EQUAL","!=",163],["T_WHITESPACE"," ",163],["T_STRING","null",163],")",["T_WHITESPACE"," ",163],"{",["T_WHITESPACE","\n            ",163],["T_VARIABLE","$this",164],["T_OBJECT_OPERATOR","->",164],["T_STRING","_parts",164],"[",["T_STRING","self",164],["T_DOUBLE_COLON","::",164],["T_STRING","BODY",164],"]","[",["T_VARIABLE","$part",164],"]",["T_WHITESPACE"," ",164],"=",["T_WHITESPACE"," ",164],["T_VARIABLE","$value",164],";",["T_WHITESPACE","\n        ",164],"}",["T_WHITESPACE"," ",165],["T_ELSE","else",165],["T_WHITESPACE"," ",165],"{",["T_WHITESPACE","\n            ",165],["T_THROW","throw",166],["T_WHITESPACE"," ",166],["T_NEW","new",166],["T_WHITESPACE"," ",166],["T_STRING","InvalidArgumentException",166],"(",["T_CONSTANT_ENCAPSED_STRING","'Part ['",166],["T_WHITESPACE"," ",166],".",["T_WHITESPACE"," ",166],["T_VARIABLE","$part",166],["T_WHITESPACE"," ",166],".",["T_WHITESPACE"," ",166],["T_CONSTANT_ENCAPSED_STRING","'] can not be empty'",166],")",";",["T_WHITESPACE","\n        ",166],"}",["T_WHITESPACE","\n        ",167],["T_RETURN","return",168],["T_WHITESPACE"," ",168],["T_VARIABLE","$this",168],";",["T_WHITESPACE","\n    ",168],"}",["T_WHITESPACE","\n\n\n    ",169],["T_DOC_COMMENT","\/**\n     * Set body part to trigger\n     *\n     * @param string $part\n     * @return string\n     * @throws Exception\n     *\/",172],["T_WHITESPACE","\n    ",178],["T_PUBLIC","public",179],["T_WHITESPACE"," ",179],["T_FUNCTION","function",179],["T_WHITESPACE"," ",179],["T_STRING","getBodyPart",179],"(",["T_VARIABLE","$part",179],")",["T_WHITESPACE","\n    ",179],"{",["T_WHITESPACE","\n        ",180],["T_IF","if",181],["T_WHITESPACE"," ",181],"(",["T_ISSET","isset",181],"(",["T_VARIABLE","$this",181],["T_OBJECT_OPERATOR","->",181],["T_STRING","_parts",181],"[",["T_STRING","self",181],["T_DOUBLE_COLON","::",181],["T_STRING","BODY",181],"]","[",["T_VARIABLE","$part",181],"]",")",")",["T_WHITESPACE"," ",181],"{",["T_WHITESPACE","\n            ",181],["T_RETURN","return",182],["T_WHITESPACE"," ",182],["T_VARIABLE","$this",182],["T_OBJECT_OPERATOR","->",182],["T_STRING","_parts",182],"[",["T_STRING","self",182],["T_DOUBLE_COLON","::",182],["T_STRING","BODY",182],"]","[",["T_VARIABLE","$part",182],"]",";",["T_WHITESPACE","\n        ",182],"}",["T_WHITESPACE","\n\n        ",183],["T_THROW","throw",185],["T_WHITESPACE"," ",185],["T_NEW","new",185],["T_WHITESPACE"," ",185],["T_STRING","Exception",185],"(",["T_CONSTANT_ENCAPSED_STRING","'Part ['",185],["T_WHITESPACE"," ",185],".",["T_WHITESPACE"," ",185],["T_VARIABLE","$part",185],["T_WHITESPACE"," ",185],".",["T_WHITESPACE"," ",185],["T_CONSTANT_ENCAPSED_STRING","'] does\\'t exists'",185],")",";",["T_WHITESPACE","\n    ",185],"}",["T_WHITESPACE","\n\n    ",186],["T_DOC_COMMENT","\/**\n     * Generate trigger name\n     *\n     * @return string\n     *\/",188],["T_WHITESPACE","\n    ",192],["T_PROTECTED","protected",193],["T_WHITESPACE"," ",193],["T_FUNCTION","function",193],["T_WHITESPACE"," ",193],["T_STRING","_generateTriggerName",193],"(",")",["T_WHITESPACE","\n    ",193],"{",["T_WHITESPACE","\n        ",194],["T_RETURN","return",195],["T_WHITESPACE"," ",195],["T_STRING","strtolower",195],"(",["T_CONSTANT_ENCAPSED_STRING","'trg_'",195],["T_WHITESPACE"," ",195],".",["T_WHITESPACE"," ",195],["T_VARIABLE","$this",195],["T_OBJECT_OPERATOR","->",195],["T_STRING","_parts",195],"[",["T_STRING","self",195],["T_DOUBLE_COLON","::",195],["T_STRING","TARGET",195],"]",["T_WHITESPACE","\n            ",195],".",["T_WHITESPACE"," ",196],["T_CONSTANT_ENCAPSED_STRING","'_'",196],["T_WHITESPACE"," ",196],".",["T_WHITESPACE"," ",196],["T_VARIABLE","$this",196],["T_OBJECT_OPERATOR","->",196],["T_STRING","_parts",196],"[",["T_STRING","self",196],["T_DOUBLE_COLON","::",196],["T_STRING","TIME",196],"]",["T_WHITESPACE","\n            ",196],".",["T_WHITESPACE"," ",197],["T_CONSTANT_ENCAPSED_STRING","'_'",197],["T_WHITESPACE"," ",197],".",["T_WHITESPACE"," ",197],["T_VARIABLE","$this",197],["T_OBJECT_OPERATOR","->",197],["T_STRING","_parts",197],"[",["T_STRING","self",197],["T_DOUBLE_COLON","::",197],["T_STRING","EVENT",197],"]",")",";",["T_WHITESPACE","\n    ",197],"}",["T_WHITESPACE","\n\n    ",198],["T_DOC_COMMENT","\/**\n     * Set trigger time {BEFORE\/AFTER}\n     * @param $time\n     * @return Magento_Db_Sql_Trigger\n     * @throws InvalidArgumentException\n     *\/",200],["T_WHITESPACE","\n    ",205],["T_PUBLIC","public",206],["T_WHITESPACE"," ",206],["T_FUNCTION","function",206],["T_WHITESPACE"," ",206],["T_STRING","setTime",206],"(",["T_VARIABLE","$time",206],")",["T_WHITESPACE","\n    ",206],"{",["T_WHITESPACE","\n        ",207],["T_IF","if",208],["T_WHITESPACE"," ",208],"(",["T_STRING","in_array",208],"(",["T_VARIABLE","$time",208],",",["T_WHITESPACE"," ",208],["T_VARIABLE","$this",208],["T_OBJECT_OPERATOR","->",208],["T_STRING","getTimeTypes",208],"(",")",")",")",["T_WHITESPACE"," ",208],"{",["T_WHITESPACE","\n            ",208],["T_VARIABLE","$this",209],["T_OBJECT_OPERATOR","->",209],["T_STRING","_setPart",209],"(",["T_STRING","self",209],["T_DOUBLE_COLON","::",209],["T_STRING","TIME",209],",",["T_WHITESPACE"," ",209],["T_VARIABLE","$time",209],")",";",["T_WHITESPACE","\n        ",209],"}",["T_WHITESPACE"," ",210],["T_ELSE","else",210],["T_WHITESPACE"," ",210],"{",["T_WHITESPACE","\n            ",210],["T_THROW","throw",211],["T_WHITESPACE"," ",211],["T_NEW","new",211],["T_WHITESPACE"," ",211],["T_STRING","InvalidArgumentException",211],"(",["T_CONSTANT_ENCAPSED_STRING","'Unsupported time type!'",211],")",";",["T_WHITESPACE","\n        ",211],"}",["T_WHITESPACE","\n        ",212],["T_RETURN","return",213],["T_WHITESPACE"," ",213],["T_VARIABLE","$this",213],";",["T_WHITESPACE","\n    ",213],"}",["T_WHITESPACE","\n\n    ",214],["T_DOC_COMMENT","\/**\n     * Set trigger event {INSERT\/UPDATE\/DELETE}\n     *\n     * @param $event\n     * @return Magento_Db_Sql_Trigger\n     * @throws InvalidArgumentException\n     *\/",216],["T_WHITESPACE","\n    ",222],["T_PUBLIC","public",223],["T_WHITESPACE"," ",223],["T_FUNCTION","function",223],["T_WHITESPACE"," ",223],["T_STRING","setEvent",223],"(",["T_VARIABLE","$event",223],")",["T_WHITESPACE","\n    ",223],"{",["T_WHITESPACE","\n        ",224],["T_IF","if",225],["T_WHITESPACE"," ",225],"(",["T_STRING","in_array",225],"(",["T_VARIABLE","$event",225],",",["T_WHITESPACE"," ",225],["T_VARIABLE","$this",225],["T_OBJECT_OPERATOR","->",225],["T_STRING","getEventTypes",225],"(",")",")",")",["T_WHITESPACE"," ",225],"{",["T_WHITESPACE","\n            ",225],["T_VARIABLE","$this",226],["T_OBJECT_OPERATOR","->",226],["T_STRING","_setPart",226],"(",["T_STRING","self",226],["T_DOUBLE_COLON","::",226],["T_STRING","EVENT",226],",",["T_WHITESPACE"," ",226],["T_VARIABLE","$event",226],")",";",["T_WHITESPACE","\n        ",226],"}",["T_WHITESPACE"," ",227],["T_ELSE","else",227],["T_WHITESPACE"," ",227],"{",["T_WHITESPACE","\n            ",227],["T_THROW","throw",228],["T_WHITESPACE"," ",228],["T_NEW","new",228],["T_WHITESPACE"," ",228],["T_STRING","InvalidArgumentException",228],"(",["T_CONSTANT_ENCAPSED_STRING","'Unsupported event type!'",228],")",";",["T_WHITESPACE","\n        ",228],"}",["T_WHITESPACE","\n        ",229],["T_RETURN","return",230],["T_WHITESPACE"," ",230],["T_VARIABLE","$this",230],";",["T_WHITESPACE","\n    ",230],"}",["T_WHITESPACE","\n\n    ",231],["T_DOC_COMMENT","\/**\n     * Set trigger target, table name\n     *\n     * @param $target\n     * @return Magento_Db_Sql_Trigger\n     *\/",233],["T_WHITESPACE","\n    ",238],["T_PUBLIC","public",239],["T_WHITESPACE"," ",239],["T_FUNCTION","function",239],["T_WHITESPACE"," ",239],["T_STRING","setTarget",239],"(",["T_VARIABLE","$target",239],")",["T_WHITESPACE","\n    ",239],"{",["T_WHITESPACE","\n        ",240],["T_VARIABLE","$this",241],["T_OBJECT_OPERATOR","->",241],["T_STRING","_setPart",241],"(",["T_STRING","self",241],["T_DOUBLE_COLON","::",241],["T_STRING","TARGET",241],",",["T_WHITESPACE"," ",241],["T_VARIABLE","$target",241],")",";",["T_WHITESPACE","\n        ",241],["T_RETURN","return",242],["T_WHITESPACE"," ",242],["T_VARIABLE","$this",242],";",["T_WHITESPACE","\n    ",242],"}",["T_WHITESPACE","\n\n    ",243],["T_DOC_COMMENT","\/**\n     * Set trigger name\n     *\n     * @param $name\n     * @return Magento_Db_Sql_Trigger\n     *\/",245],["T_WHITESPACE","\n    ",250],["T_PUBLIC","public",251],["T_WHITESPACE"," ",251],["T_FUNCTION","function",251],["T_WHITESPACE"," ",251],["T_STRING","setName",251],"(",["T_VARIABLE","$name",251],")",["T_WHITESPACE","\n    ",251],"{",["T_WHITESPACE","\n        ",252],["T_VARIABLE","$this",253],["T_OBJECT_OPERATOR","->",253],["T_STRING","_setPart",253],"(",["T_STRING","self",253],["T_DOUBLE_COLON","::",253],["T_STRING","NAME",253],",",["T_WHITESPACE"," ",253],["T_VARIABLE","$name",253],")",";",["T_WHITESPACE","\n        ",253],["T_RETURN","return",254],["T_WHITESPACE"," ",254],["T_VARIABLE","$this",254],";",["T_WHITESPACE","\n    ",254],"}",["T_WHITESPACE","\n\n    ",255],["T_DOC_COMMENT","\/**\n     * Retrieve trigger name.\n     * If trigger name does not exists generate it by template 'trg_{TARGET}_{TIME}_{EVENT}'.\n     *\n     * @return mixed\n     *\/",257],["T_WHITESPACE","\n    ",262],["T_PUBLIC","public",263],["T_WHITESPACE"," ",263],["T_FUNCTION","function",263],["T_WHITESPACE"," ",263],["T_STRING","getName",263],"(",")",["T_WHITESPACE","\n    ",263],"{",["T_WHITESPACE","\n        ",264],["T_IF","if",265],["T_WHITESPACE"," ",265],"(",["T_EMPTY","empty",265],"(",["T_VARIABLE","$this",265],["T_OBJECT_OPERATOR","->",265],["T_STRING","_parts",265],"[",["T_STRING","self",265],["T_DOUBLE_COLON","::",265],["T_STRING","NAME",265],"]",")",")",["T_WHITESPACE"," ",265],"{",["T_WHITESPACE","\n            ",265],["T_VARIABLE","$this",266],["T_OBJECT_OPERATOR","->",266],["T_STRING","_parts",266],"[",["T_STRING","self",266],["T_DOUBLE_COLON","::",266],["T_STRING","NAME",266],"]",["T_WHITESPACE"," ",266],"=",["T_WHITESPACE"," ",266],["T_VARIABLE","$this",266],["T_OBJECT_OPERATOR","->",266],["T_STRING","_generateTriggerName",266],"(",")",";",["T_WHITESPACE","\n        ",266],"}",["T_WHITESPACE","\n        ",267],["T_RETURN","return",268],["T_WHITESPACE"," ",268],["T_VARIABLE","$this",268],["T_OBJECT_OPERATOR","->",268],["T_STRING","_parts",268],"[",["T_STRING","self",268],["T_DOUBLE_COLON","::",268],["T_STRING","NAME",268],"]",";",["T_WHITESPACE","\n    ",268],"}",["T_WHITESPACE","\n\n    ",269],["T_DOC_COMMENT","\/**\n     * Set trigger body\n     *\n     * @param array|string $body\n     * @return Magento_Db_Sql_Trigger\n     *\/",271],["T_WHITESPACE","\n    ",276],["T_PUBLIC","public",277],["T_WHITESPACE"," ",277],["T_FUNCTION","function",277],["T_WHITESPACE"," ",277],["T_STRING","setBody",277],"(",["T_VARIABLE","$body",277],")",["T_WHITESPACE","\n    ",277],"{",["T_WHITESPACE","\n        ",278],["T_IF","if",279],["T_WHITESPACE"," ",279],"(","!",["T_STRING","is_array",279],"(",["T_VARIABLE","$body",279],")",")",["T_WHITESPACE"," ",279],"{",["T_WHITESPACE","\n            ",279],["T_VARIABLE","$body",280],["T_WHITESPACE"," ",280],"=",["T_WHITESPACE"," ",280],["T_ARRAY","array",280],"(",["T_VARIABLE","$body",280],")",";",["T_WHITESPACE","\n        ",280],"}",["T_WHITESPACE","\n        ",281],["T_VARIABLE","$this",282],["T_OBJECT_OPERATOR","->",282],["T_STRING","_setPart",282],"(",["T_STRING","self",282],["T_DOUBLE_COLON","::",282],["T_STRING","BODY",282],",",["T_WHITESPACE"," ",282],["T_VARIABLE","$body",282],")",";",["T_WHITESPACE","\n        ",282],["T_RETURN","return",283],["T_WHITESPACE"," ",283],["T_VARIABLE","$this",283],";",["T_WHITESPACE","\n    ",283],"}",["T_WHITESPACE","\n\n    ",284],["T_DOC_COMMENT","\/**\n     * Get body parts of trigger\n     *\n     * @return array\n     *\/",286],["T_WHITESPACE","\n    ",290],["T_PUBLIC","public",291],["T_WHITESPACE"," ",291],["T_FUNCTION","function",291],["T_WHITESPACE"," ",291],["T_STRING","getBody",291],"(",")",["T_WHITESPACE","\n    ",291],"{",["T_WHITESPACE","\n        ",292],["T_RETURN","return",293],["T_WHITESPACE"," ",293],["T_VARIABLE","$this",293],["T_OBJECT_OPERATOR","->",293],["T_STRING","_getPart",293],"(",["T_STRING","self",293],["T_DOUBLE_COLON","::",293],["T_STRING","BODY",293],")",";",["T_WHITESPACE","\n    ",293],"}",["T_WHITESPACE","\n\n    ",294],["T_DOC_COMMENT","\/**\n     * Get trigger creating SQL script\n     *\n     * @return string\n     *\/",296],["T_WHITESPACE","\n    ",300],["T_PUBLIC","public",301],["T_WHITESPACE"," ",301],["T_FUNCTION","function",301],["T_WHITESPACE"," ",301],["T_STRING","assemble",301],"(",")",["T_WHITESPACE","\n    ",301],"{",["T_WHITESPACE","\n        ",302],["T_VARIABLE","$this",303],["T_OBJECT_OPERATOR","->",303],["T_STRING","_validateIsComplete",303],"(",")",";",["T_WHITESPACE","\n        ",303],["T_RETURN","return",304],["T_WHITESPACE"," ",304],["T_CONSTANT_ENCAPSED_STRING","\"CREATE TRIGGER \"",304],["T_WHITESPACE","\n            ",304],".",["T_WHITESPACE"," ",305],["T_VARIABLE","$this",305],["T_OBJECT_OPERATOR","->",305],["T_STRING","getName",305],"(",")",["T_WHITESPACE"," ",305],".",["T_WHITESPACE"," ",305],["T_CONSTANT_ENCAPSED_STRING","\"\\n\"",305],["T_WHITESPACE","\n            ",305],".",["T_WHITESPACE"," ",306],["T_VARIABLE","$this",306],["T_OBJECT_OPERATOR","->",306],["T_STRING","_parts",306],"[",["T_STRING","self",306],["T_DOUBLE_COLON","::",306],["T_STRING","TIME",306],"]",["T_WHITESPACE"," ",306],".",["T_WHITESPACE"," ",306],["T_CONSTANT_ENCAPSED_STRING","\" \"",306],["T_WHITESPACE"," ",306],".",["T_WHITESPACE"," ",306],["T_VARIABLE","$this",306],["T_OBJECT_OPERATOR","->",306],["T_STRING","_parts",306],"[",["T_STRING","self",306],["T_DOUBLE_COLON","::",306],["T_STRING","EVENT",306],"]",["T_WHITESPACE"," ",306],".",["T_WHITESPACE"," ",306],["T_CONSTANT_ENCAPSED_STRING","\"\\n\"",306],["T_WHITESPACE","\n            ",306],".",["T_WHITESPACE"," ",307],["T_CONSTANT_ENCAPSED_STRING","\"ON \"",307],["T_WHITESPACE"," ",307],".",["T_WHITESPACE"," ",307],["T_VARIABLE","$this",307],["T_OBJECT_OPERATOR","->",307],["T_STRING","_parts",307],"[",["T_STRING","self",307],["T_DOUBLE_COLON","::",307],["T_STRING","TARGET",307],"]",["T_WHITESPACE"," ",307],".",["T_WHITESPACE"," ",307],["T_CONSTANT_ENCAPSED_STRING","\" \"",307],["T_WHITESPACE"," ",307],".",["T_WHITESPACE"," ",307],["T_VARIABLE","$this",307],["T_OBJECT_OPERATOR","->",307],["T_STRING","_parts",307],"[",["T_STRING","self",307],["T_DOUBLE_COLON","::",307],["T_STRING","SCOPE",307],"]",["T_WHITESPACE"," ",307],".",["T_WHITESPACE"," ",307],["T_CONSTANT_ENCAPSED_STRING","\"\\n\"",307],["T_WHITESPACE","\n            ",307],".",["T_WHITESPACE"," ",308],["T_CONSTANT_ENCAPSED_STRING","\"BEGIN\\n\"",308],["T_WHITESPACE","\n            ",308],".",["T_WHITESPACE"," ",309],["T_STRING","implode",309],"(",["T_CONSTANT_ENCAPSED_STRING","\"\\n\"",309],",",["T_WHITESPACE"," ",309],["T_VARIABLE","$this",309],["T_OBJECT_OPERATOR","->",309],["T_STRING","_parts",309],"[",["T_STRING","self",309],["T_DOUBLE_COLON","::",309],["T_STRING","BODY",309],"]",")",["T_WHITESPACE"," ",309],".",["T_WHITESPACE"," ",309],["T_CONSTANT_ENCAPSED_STRING","\"\\n\"",309],["T_WHITESPACE","\n            ",309],".",["T_WHITESPACE"," ",310],["T_CONSTANT_ENCAPSED_STRING","\"END;\\n\"",310],";",["T_WHITESPACE","\n    ",310],"}",["T_WHITESPACE","\n\n    ",311],["T_DOC_COMMENT","\/**\n     * Implement magic method\n     *\n     * @return string\n     *\/",313],["T_WHITESPACE","\n    ",317],["T_PUBLIC","public",318],["T_WHITESPACE"," ",318],["T_FUNCTION","function",318],["T_WHITESPACE"," ",318],["T_STRING","__toString",318],"(",")",["T_WHITESPACE","\n    ",318],"{",["T_WHITESPACE","\n        ",319],["T_RETURN","return",320],["T_WHITESPACE"," ",320],["T_VARIABLE","$this",320],["T_OBJECT_OPERATOR","->",320],["T_STRING","assemble",320],"(",")",";",["T_WHITESPACE","\n    ",320],"}",["T_WHITESPACE","\n\n    ",321],["T_DOC_COMMENT","\/**\n     * Retrieve list of allowed events\n     *\n     * @return array\n     *\/",323],["T_WHITESPACE","\n    ",327],["T_PUBLIC","public",328],["T_WHITESPACE"," ",328],["T_FUNCTION","function",328],["T_WHITESPACE"," ",328],["T_STRING","getEventTypes",328],"(",")",["T_WHITESPACE","\n    ",328],"{",["T_WHITESPACE","\n        ",329],["T_RETURN","return",330],["T_WHITESPACE"," ",330],["T_VARIABLE","$this",330],["T_OBJECT_OPERATOR","->",330],["T_STRING","_eventTypes",330],";",["T_WHITESPACE","\n    ",330],"}",["T_WHITESPACE","\n\n    ",331],["T_DOC_COMMENT","\/**\n     * Retrieve list of allowed time types\n     *\n     * @return array\n     *\/",333],["T_WHITESPACE","\n    ",337],["T_PUBLIC","public",338],["T_WHITESPACE"," ",338],["T_FUNCTION","function",338],["T_WHITESPACE"," ",338],["T_STRING","getTimeTypes",338],"(",")",["T_WHITESPACE","\n    ",338],"{",["T_WHITESPACE","\n        ",339],["T_RETURN","return",340],["T_WHITESPACE"," ",340],["T_VARIABLE","$this",340],["T_OBJECT_OPERATOR","->",340],["T_STRING","_timeTypes",340],";",["T_WHITESPACE","\n    ",340],"}",["T_WHITESPACE","\n\n    ",341],["T_DOC_COMMENT","\/**\n     * Reset trigger parts\n     *\n     * @return Magento_Db_Sql_Trigger\n     *\/",343],["T_WHITESPACE","\n    ",347],["T_PUBLIC","public",348],["T_WHITESPACE"," ",348],["T_FUNCTION","function",348],["T_WHITESPACE"," ",348],["T_STRING","reset",348],"(",")",["T_WHITESPACE","\n    ",348],"{",["T_WHITESPACE","\n        ",349],["T_VARIABLE","$this",350],["T_OBJECT_OPERATOR","->",350],["T_STRING","_parts",350],["T_WHITESPACE"," ",350],"=",["T_WHITESPACE"," ",350],["T_STRING","self",350],["T_DOUBLE_COLON","::",350],["T_VARIABLE","$_partsInit",350],";",["T_WHITESPACE","\n        ",350],["T_RETURN","return",351],["T_WHITESPACE"," ",351],["T_VARIABLE","$this",351],";",["T_WHITESPACE","\n    ",351],"}",["T_WHITESPACE","\n",352],"}",["T_WHITESPACE","\n",353]]
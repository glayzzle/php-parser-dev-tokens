[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Magento\n *\n * NOTICE OF LICENSE\n *\n * This source file is subject to the Academic Free License (AFL 3.0)\n * that is bundled with this package in the file LICENSE_AFL.txt.\n * It is also available through the world-wide-web at this URL:\n * http:\/\/opensource.org\/licenses\/afl-3.0.php\n * If you did not receive a copy of the license and are unable to\n * obtain it through the world-wide-web, please send an email\n * to license@magento.com so we can send you a copy immediately.\n *\n * DISCLAIMER\n *\n * Do not edit or add to this file if you wish to upgrade Magento to newer\n * versions in the future. If you wish to customize Magento for your\n * needs please refer to http:\/\/www.magento.com for more information.\n *\n * @category    design\n * @package     default_default\n * @copyright   Copyright (c) 2006-2016 X.commerce, Inc. and affiliates (http:\/\/www.magento.com)\n * @license     http:\/\/opensource.org\/licenses\/afl-3.0.php  Academic Free License (AFL 3.0)\n *\/",2],["T_WHITESPACE","\n",25],["T_CLOSE_TAG","?>\n",26],["T_INLINE_HTML","<div class=\"categories-side-col\">\n    <div class=\"content-header\">\n        <h3 class=\"icon-head head-categories\">",27],["T_OPEN_TAG","<?php ",29],["T_ECHO","echo",29],["T_WHITESPACE"," ",29],["T_STRING","Mage",29],["T_DOUBLE_COLON","::",29],["T_STRING","helper",29],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog'",29],")",["T_OBJECT_OPERATOR","->",29],["T_STRING","__",29],"(",["T_CONSTANT_ENCAPSED_STRING","'Categories'",29],")",["T_WHITESPACE"," ",29],["T_CLOSE_TAG","?>",29],["T_INLINE_HTML","<\/h3>\n        ",29],["T_OPEN_TAG","<?php ",30],["T_IF","if",30],["T_WHITESPACE"," ",30],"(",["T_VARIABLE","$this",30],["T_OBJECT_OPERATOR","->",30],["T_STRING","getRoot",30],"(",")",")",":",["T_WHITESPACE"," ",30],["T_CLOSE_TAG","?>\n",30],["T_INLINE_HTML","            ",31],["T_OPEN_TAG","<?php ",31],["T_ECHO","echo",31],["T_WHITESPACE"," ",31],["T_VARIABLE","$this",31],["T_OBJECT_OPERATOR","->",31],["T_STRING","getAddRootButtonHtml",31],"(",")",["T_WHITESPACE"," ",31],["T_CLOSE_TAG","?>",31],["T_INLINE_HTML","<br \/>\n            ",31],["T_OPEN_TAG","<?php ",32],["T_ECHO","echo",32],["T_WHITESPACE"," ",32],["T_VARIABLE","$this",32],["T_OBJECT_OPERATOR","->",32],["T_STRING","getAddSubButtonHtml",32],"(",")",["T_WHITESPACE"," ",32],["T_CLOSE_TAG","?>\n",32],["T_INLINE_HTML","        ",33],["T_OPEN_TAG","<?php ",33],["T_ENDIF","endif",33],";",["T_WHITESPACE"," ",33],["T_CLOSE_TAG","?>\n",33],["T_INLINE_HTML","    <\/div>\n    ",34],["T_OPEN_TAG","<?php ",35],["T_ECHO","echo",35],["T_WHITESPACE"," ",35],["T_VARIABLE","$this",35],["T_OBJECT_OPERATOR","->",35],["T_STRING","getStoreSwitcherHtml",35],"(",")",";",["T_CLOSE_TAG","?>\n",35],["T_INLINE_HTML","    <div class=\"tree-actions\">\n        ",36],["T_OPEN_TAG","<?php ",37],["T_IF","if",37],"(",["T_VARIABLE","$this",37],["T_OBJECT_OPERATOR","->",37],["T_STRING","getRoot",37],"(",")",")",":",["T_WHITESPACE"," ",37],["T_CLOSE_TAG","?>\n",37],["T_INLINE_HTML","            ",38],["T_OPEN_TAG","<?php ",38],["T_COMMENT","\/\/echo $this->getCollapseButtonHtml() ",38],["T_CLOSE_TAG","?>\n",38],["T_INLINE_HTML","            ",39],["T_OPEN_TAG","<?php ",39],["T_COMMENT","\/\/echo $this->getExpandButtonHtml() ",39],["T_CLOSE_TAG","?>\n",39],["T_INLINE_HTML","            <a href=\"#\" onclick=\"tree.collapseTree(); return false;\">",40],["T_OPEN_TAG","<?php ",40],["T_ECHO","echo",40],["T_WHITESPACE"," ",40],["T_STRING","Mage",40],["T_DOUBLE_COLON","::",40],["T_STRING","helper",40],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog'",40],")",["T_OBJECT_OPERATOR","->",40],["T_STRING","__",40],"(",["T_CONSTANT_ENCAPSED_STRING","'Collapse All'",40],")",";",["T_WHITESPACE"," ",40],["T_CLOSE_TAG","?>",40],["T_INLINE_HTML","<\/a> <span class=\"separator\">|<\/span> <a href=\"#\" onclick=\"tree.expandTree(); return false;\">",40],["T_OPEN_TAG","<?php ",40],["T_ECHO","echo",40],["T_WHITESPACE"," ",40],["T_STRING","Mage",40],["T_DOUBLE_COLON","::",40],["T_STRING","helper",40],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog'",40],")",["T_OBJECT_OPERATOR","->",40],["T_STRING","__",40],"(",["T_CONSTANT_ENCAPSED_STRING","'Expand All'",40],")",";",["T_WHITESPACE"," ",40],["T_CLOSE_TAG","?>",40],["T_INLINE_HTML","<\/a>\n        ",40],["T_OPEN_TAG","<?php ",41],["T_ENDIF","endif",41],";",["T_WHITESPACE"," ",41],["T_CLOSE_TAG","?>\n",41],["T_INLINE_HTML","    <\/div>\n    ",42],["T_OPEN_TAG","<?php ",43],["T_IF","if",43],["T_WHITESPACE"," ",43],"(",["T_VARIABLE","$this",43],["T_OBJECT_OPERATOR","->",43],["T_STRING","getRoot",43],"(",")",")",":",["T_WHITESPACE"," ",43],["T_CLOSE_TAG","?>\n",43],["T_INLINE_HTML","    <div class=\"tree-holder\">\n        <div id=\"tree-div\" style=\"width:100%; overflow:auto;\"><\/div>\n    <\/div>\n<\/div>\n<script type=\"text\/javascript\">\n\/\/<![CDATA[\nvar tree;\n\n\/**\n * Fix ext compatibility with prototype 1.6\n *\/\nExt.lib.Event.getTarget = function(e) {\n    var ee = e.browserEvent || e;\n    return ee.target ? Event.element(ee) : null;\n};\n\nExt.tree.TreePanel.Enhanced = function(el, config)\n{\n    Ext.tree.TreePanel.Enhanced.superclass.constructor.call(this, el, config);\n};\n\nExt.extend(Ext.tree.TreePanel.Enhanced, Ext.tree.TreePanel, {\n\n    loadTree : function(config, firstLoad)\n    {\n        var parameters = config['parameters'];\n        var data = config['data'];\n\n        this.storeId = parameters['store_id'];\n\n        if ( this.storeId != 0 && $('add_root_category_button')) {\n            $('add_root_category_button').hide();\n        }\n\n        if ((typeof parameters['root_visible']) != 'undefined') {\n            this.rootVisible = parameters['root_visible']*1;\n        }\n\n        var root = new Ext.tree.TreeNode(parameters);\n\n        this.nodeHash = {};\n        this.setRootNode(root);\n\n        if (firstLoad) {\n            this.addListener('click', this.categoryClick);\n            this.addListener('beforenodedrop', categoryMove.createDelegate(this));\n        }\n\n        this.loader.buildCategoryTree(root, data);\n        this.el.dom.innerHTML = '';\n        \/\/ render the tree\n        this.render();\n        if (parameters['expanded']) {\n            this.expandAll();\n        } else {\n            root.expand();\n        }\n\n        var selectedNode = this.getNodeById(parameters['category_id']);\n        if (selectedNode) {\n            this.currentNodeId = parameters['category_id'];\n        }\n        this.selectCurrentNode();\n    },\n\n    request : function(url, params)\n    {\n        if (!params) {\n            if (category_info_tabsJsTabs.activeTab) {\n                var params = {active_tab_id:category_info_tabsJsTabs.activeTab.id};\n            }\n            else {\n                var params = {};\n            }\n        }\n        if (!params.form_key) {\n            params.form_key = FORM_KEY;\n        }\n        var result = new Ajax.Request(\n            url + (url.match(new RegExp('\\\\?')) ? '&isAjax=true' : '?isAjax=true' ),\n            {\n               parameters:  params,\n               method:      'post'\n            }\n        );\n\n        return result;\n    },\n\n    selectCurrentNode : function()\n    {\n        if (this.currentNodeId) {\n            var selectedNode = this.getNodeById(this.currentNodeId);\n            if ((typeof selectedNode.attributes.path)!='undefined') {\n                var path = selectedNode.attributes.path;\n                if (!this.storeId) {\n                    path = '0\/'+path;\n                }\n                this.selectPath(path);\n            } else {\n                this.getSelectionModel().select(selectedNode);\n            }\n        }\n    },\n\n    collapseTree : function()\n    {\n        this.collapseAll();\n\n        this.selectCurrentNode();\n\n        if (!this.collapsed) {\n            this.collapsed = true;\n            this.loader.dataUrl = '",44],["T_OPEN_TAG","<?php ",157],["T_ECHO","echo",157],["T_WHITESPACE"," ",157],["T_VARIABLE","$this",157],["T_OBJECT_OPERATOR","->",157],["T_STRING","getLoadTreeUrl",157],"(",["T_STRING","false",157],")",["T_WHITESPACE"," ",157],["T_CLOSE_TAG","?>",157],["T_INLINE_HTML","';\n            this.request(this.loader.dataUrl, false);\n        }\n    },\n\n    expandTree : function()\n    {\n        this.expandAll();\n        if (this.collapsed) {\n            this.collapsed = false;\n            this.loader.dataUrl = '",157],["T_OPEN_TAG","<?php ",167],["T_ECHO","echo",167],["T_WHITESPACE"," ",167],["T_VARIABLE","$this",167],["T_OBJECT_OPERATOR","->",167],["T_STRING","getLoadTreeUrl",167],"(",["T_STRING","true",167],")",["T_WHITESPACE"," ",167],["T_CLOSE_TAG","?>",167],["T_INLINE_HTML","';\n            this.request(this.loader.dataUrl, false);\n        }\n    },\n\n    categoryClick : function(node, e)\n    {\n        var baseUrl = '",167],["T_OPEN_TAG","<?php ",174],["T_ECHO","echo",174],["T_WHITESPACE"," ",174],["T_VARIABLE","$this",174],["T_OBJECT_OPERATOR","->",174],["T_STRING","getEditUrl",174],"(",")",["T_WHITESPACE"," ",174],["T_CLOSE_TAG","?>",174],["T_INLINE_HTML","';\n        var urlExt = (this.storeId?'store\/'+this.storeId+'\/':'')+'id\/'+node.id+'\/';\n        var url = parseSidUrl(baseUrl, urlExt);\n\n        this.currentNodeId = node.id;\n        if (!this.useAjax) {\n            setLocation(url);\n            return;\n        }\n        if (category_info_tabsJsTabs.activeTab) {\n            var params = {active_tab_id:category_info_tabsJsTabs.activeTab.id};\n        }\n        updateContent(url, params);\n    }\n});\n\nfunction reRenderTree(event, switcher)\n{\n    \/\/ re-render tree by store switcher\n    if (tree && event) {\n        var obj = event.target;\n        var newStoreId = obj.value * 1;\n        var storeParam = newStoreId ? 'store\/'+newStoreId + '\/' : '';\n\n        if (obj.switchParams) {\n            storeParam += obj.switchParams;\n        }\n        if (switcher.useConfirm) {\n            if (!confirm('",174],["T_OPEN_TAG","<?php ",202],["T_ECHO","echo",202],["T_WHITESPACE"," ",202],["T_STRING","Mage",202],["T_DOUBLE_COLON","::",202],["T_STRING","helper",202],"(",["T_CONSTANT_ENCAPSED_STRING","'core'",202],")",["T_OBJECT_OPERATOR","->",202],["T_STRING","jsQuoteEscape",202],"(",["T_VARIABLE","$this",202],["T_OBJECT_OPERATOR","->",202],["T_STRING","__",202],"(",["T_CONSTANT_ENCAPSED_STRING","'Please confirm site switching. All data that hasn\\'t been saved will be lost.'",202],")",")",["T_WHITESPACE"," ",202],["T_CLOSE_TAG","?>",202],["T_INLINE_HTML","')){\n                obj.value = '",202],["T_OPEN_TAG","<?php ",203],["T_ECHO","echo",203],["T_WHITESPACE"," ",203],["T_INT_CAST","(int)",203],["T_WHITESPACE"," ",203],["T_VARIABLE","$this",203],["T_OBJECT_OPERATOR","->",203],["T_STRING","getStoreId",203],"(",")",["T_WHITESPACE"," ",203],["T_CLOSE_TAG","?>",203],["T_INLINE_HTML","';\n                return false;\n            }\n        }\n\n        if ($('add_root_category_button')) {\n            if (newStoreId == 0) {\n                $('add_root_category_button').show();\n            }\n            else {\n                $('add_root_category_button').hide();\n            }\n        }\n\n        \/\/ retain current selected category id\n        storeParam = storeParam + 'id\/' + tree.currentNodeId + '\/';\n        var url = tree.switchTreeUrl + storeParam;\n\n        \/\/ load from cache\n        \/\/ load from ajax\n        new Ajax.Request(url, {\n            parameters : {store: newStoreId, form_key: FORM_KEY, isAjax: 1},\n            method     : 'post',\n            onComplete : function(transport) {\n                var response = transport.responseJSON || transport.responseText.evalJSON(true) || {};\n                if (!response.parameters) {\n                    return false;\n                }\n\n                _renderNewTree(response, storeParam);\n            }\n        });\n    }\n    \/\/ render default tree\n    else {\n        _renderNewTree();\n    }\n}\n\nfunction _renderNewTree(config, storeParam)\n{\n    if (!config) {\n        config = defaultLoadTreeParams;\n    }\n    if (tree) {\n        tree.purgeListeners();\n        tree.el.dom.innerHTML = '';\n    }\n    tree = new Ext.tree.TreePanel.Enhanced('tree-div', newTreeParams);\n    tree.loadTree(config, true);\n\n    \/\/ try to select current category\n    var selectedNode = tree.getNodeById(config.parameters.category_id);\n    if (selectedNode) {\n        tree.currentNodeId = config.parameters.category_id;\n    }\n    tree.selectCurrentNode();\n\n    \/\/ update content area\n    var url = tree.editUrl;\n    if (storeParam) {\n        url = url + storeParam;\n    }\n    ",203],["T_OPEN_TAG","<?php ",266],["T_IF","if",266],["T_WHITESPACE"," ",266],"(",["T_VARIABLE","$this",266],["T_OBJECT_OPERATOR","->",266],["T_STRING","isClearEdit",266],"(",")",")",":",["T_CLOSE_TAG","?>\n",266],["T_INLINE_HTML","    if (selectedNode) {\n        url = url + 'id\/' + config.parameters.category_id;\n    }\n    ",267],["T_OPEN_TAG","<?php ",270],["T_ENDIF","endif",270],";",["T_CLOSE_TAG","?>\n",270],["T_INLINE_HTML","    updateContent(url);\n}\n\nExt.onReady(function()\n{\n    categoryLoader = new Ext.tree.TreeLoader({\n       dataUrl: '",271],["T_OPEN_TAG","<?php ",277],["T_ECHO","echo",277],["T_WHITESPACE"," ",277],["T_VARIABLE","$this",277],["T_OBJECT_OPERATOR","->",277],["T_STRING","getLoadTreeUrl",277],"(",")",["T_WHITESPACE"," ",277],["T_CLOSE_TAG","?>",277],["T_INLINE_HTML","'\n    });\n\n    categoryLoader.createNode = function(config) {\n        var node;\n        var _node = Object.clone(config);\n        if (config.children && !config.children.length) {\n            delete(config.children);\n            node = new Ext.tree.AsyncTreeNode(config);\n        } else {\n            node = new Ext.tree.TreeNode(config);\n        }\n\n        return node;\n    };\n\n    categoryLoader.buildCategoryTree = function(parent, config)\n    {\n        if (!config) return null;\n\n        if (parent && config && config.length){\n            for (var i = 0; i < config.length; i++) {\n                var node;\n                var _node = Object.clone(config[i]);\n                if (_node.children && !_node.children.length) {\n                    delete(_node.children);\n                    node = new Ext.tree.AsyncTreeNode(_node);\n                } else {\n                    node = new Ext.tree.TreeNode(config[i]);\n                }\n                parent.appendChild(node);\n                node.loader = node.getOwnerTree().loader;\n                if (_node.children) {\n                    this.buildCategoryTree(node, _node.children);\n                }\n            }\n        }\n    };\n\n    categoryLoader.buildHash = function(node)\n    {\n        var hash = {};\n\n        hash = this.toArray(node.attributes);\n\n        if (node.childNodes.length>0 || (node.loaded==false && node.loading==false)) {\n            hash['children'] = new Array;\n\n            for (var i = 0, len = node.childNodes.length; i < len; i++) {\n                if (!hash['children']) {\n                    hash['children'] = new Array;\n                }\n                hash['children'].push(this.buildHash(node.childNodes[i]));\n            }\n        }\n\n        return hash;\n    };\n\n    categoryLoader.toArray = function(attributes) {\n        var data = {form_key: FORM_KEY};\n        for (var key in attributes) {\n            var value = attributes[key];\n            data[key] = value;\n        }\n\n        return data;\n    };\n\n    categoryLoader.on(\"beforeload\", function(treeLoader, node) {\n        treeLoader.baseParams.id = node.attributes.id;\n        treeLoader.baseParams.store = node.attributes.store;\n        treeLoader.baseParams.form_key = FORM_KEY;\n    });\n\n    categoryLoader.on(\"load\", function(treeLoader, node, config) {\n        varienWindowOnload();\n    });\n\n    if ((typeof varienStoreSwitcher)!='undefined') {\n        varienStoreSwitcher.storeSelectorClickCallback = reRenderTree;\n    }\n\n    newTreeParams = {\n        animate         : false,\n        loader          : categoryLoader,\n        enableDD        : true,\n        containerScroll : true,\n        selModel        : new Ext.tree.CheckNodeMultiSelectionModel(),\n        rootVisible     : '",277],["T_OPEN_TAG","<?php ",366],["T_ECHO","echo",366],["T_WHITESPACE"," ",366],["T_VARIABLE","$this",366],["T_OBJECT_OPERATOR","->",366],["T_STRING","getRoot",366],"(",")",["T_OBJECT_OPERATOR","->",366],["T_STRING","getIsVisible",366],"(",")",["T_WHITESPACE"," ",366],["T_CLOSE_TAG","?>",366],["T_INLINE_HTML","',\n        useAjax         : ",366],["T_OPEN_TAG","<?php ",367],["T_ECHO","echo",367],["T_WHITESPACE"," ",367],["T_VARIABLE","$this",367],["T_OBJECT_OPERATOR","->",367],["T_STRING","getUseAjax",367],"(",")",["T_WHITESPACE"," ",367],["T_CLOSE_TAG","?>",367],["T_INLINE_HTML",",\n        switchTreeUrl   : '",367],["T_OPEN_TAG","<?php ",368],["T_ECHO","echo",368],["T_WHITESPACE"," ",368],["T_VARIABLE","$this",368],["T_OBJECT_OPERATOR","->",368],["T_STRING","getSwitchTreeUrl",368],"(",")",["T_WHITESPACE"," ",368],["T_CLOSE_TAG","?>",368],["T_INLINE_HTML","',\n        editUrl         : '",368],["T_OPEN_TAG","<?php ",369],["T_ECHO","echo",369],["T_WHITESPACE"," ",369],["T_VARIABLE","$this",369],["T_OBJECT_OPERATOR","->",369],["T_STRING","getEditUrl",369],"(",")",["T_WHITESPACE"," ",369],["T_CLOSE_TAG","?>",369],["T_INLINE_HTML","',\n        currentNodeId   : ",369],["T_OPEN_TAG","<?php ",370],["T_ECHO","echo",370],["T_WHITESPACE"," ",370],["T_INT_CAST","(int)",370],["T_WHITESPACE"," ",370],["T_VARIABLE","$this",370],["T_OBJECT_OPERATOR","->",370],["T_STRING","getCategoryId",370],"(",")",["T_WHITESPACE"," ",370],["T_CLOSE_TAG","?>\n",370],["T_INLINE_HTML","    };\n\n    defaultLoadTreeParams = {\n        parameters : {\n            text        : '",371],["T_OPEN_TAG","<?php ",375],["T_ECHO","echo",375],["T_WHITESPACE"," ",375],["T_STRING","Mage",375],["T_DOUBLE_COLON","::",375],["T_STRING","helper",375],"(",["T_CONSTANT_ENCAPSED_STRING","'core'",375],")",["T_OBJECT_OPERATOR","->",375],["T_STRING","jsQuoteEscape",375],"(",["T_STRING","htmlentities",375],"(",["T_VARIABLE","$this",375],["T_OBJECT_OPERATOR","->",375],["T_STRING","getRoot",375],"(",")",["T_OBJECT_OPERATOR","->",375],["T_STRING","getName",375],"(",")",")",")",["T_WHITESPACE"," ",375],["T_CLOSE_TAG","?>",375],["T_INLINE_HTML","',\n            draggable   : false,\n            allowDrop   : ",375],["T_OPEN_TAG","<?php ",377],["T_IF","if",377],["T_WHITESPACE"," ",377],"(",["T_VARIABLE","$this",377],["T_OBJECT_OPERATOR","->",377],["T_STRING","getRoot",377],"(",")",["T_OBJECT_OPERATOR","->",377],["T_STRING","getIsVisible",377],"(",")",")",":",["T_WHITESPACE"," ",377],["T_CLOSE_TAG","?>",377],["T_INLINE_HTML","true",377],["T_OPEN_TAG","<?php ",377],["T_ELSE","else",377],["T_WHITESPACE"," ",377],":",["T_WHITESPACE"," ",377],["T_CLOSE_TAG","?>",377],["T_INLINE_HTML","false",377],["T_OPEN_TAG","<?php ",377],["T_ENDIF","endif",377],";",["T_WHITESPACE"," ",377],["T_CLOSE_TAG","?>",377],["T_INLINE_HTML",",\n            id          : ",377],["T_OPEN_TAG","<?php ",378],["T_ECHO","echo",378],["T_WHITESPACE"," ",378],["T_INT_CAST","(int)",378],["T_WHITESPACE"," ",378],["T_VARIABLE","$this",378],["T_OBJECT_OPERATOR","->",378],["T_STRING","getRoot",378],"(",")",["T_OBJECT_OPERATOR","->",378],["T_STRING","getId",378],"(",")",["T_WHITESPACE"," ",378],["T_CLOSE_TAG","?>",378],["T_INLINE_HTML",",\n            expanded    : ",378],["T_OPEN_TAG","<?php ",379],["T_ECHO","echo",379],["T_WHITESPACE"," ",379],["T_INT_CAST","(int)",379],["T_WHITESPACE"," ",379],["T_VARIABLE","$this",379],["T_OBJECT_OPERATOR","->",379],["T_STRING","getIsWasExpanded",379],"(",")",["T_WHITESPACE"," ",379],["T_CLOSE_TAG","?>",379],["T_INLINE_HTML",",\n            store_id    : ",379],["T_OPEN_TAG","<?php ",380],["T_ECHO","echo",380],["T_WHITESPACE"," ",380],["T_INT_CAST","(int)",380],["T_WHITESPACE"," ",380],["T_VARIABLE","$this",380],["T_OBJECT_OPERATOR","->",380],["T_STRING","getStore",380],"(",")",["T_OBJECT_OPERATOR","->",380],["T_STRING","getId",380],"(",")",["T_WHITESPACE"," ",380],["T_CLOSE_TAG","?>",380],["T_INLINE_HTML",",\n            category_id : ",380],["T_OPEN_TAG","<?php ",381],["T_ECHO","echo",381],["T_WHITESPACE"," ",381],["T_INT_CAST","(int)",381],["T_WHITESPACE"," ",381],["T_VARIABLE","$this",381],["T_OBJECT_OPERATOR","->",381],["T_STRING","getCategoryId",381],"(",")",["T_WHITESPACE"," ",381],["T_CLOSE_TAG","?>\n",381],["T_INLINE_HTML","        },\n        data : ",382],["T_OPEN_TAG","<?php ",383],["T_ECHO","echo",383],["T_WHITESPACE"," ",383],["T_VARIABLE","$this",383],["T_OBJECT_OPERATOR","->",383],["T_STRING","getTreeJson",383],"(",")",["T_WHITESPACE"," ",383],["T_CLOSE_TAG","?>\n",383],["T_INLINE_HTML","    };\n\n    reRenderTree();\n});\n\nfunction addNew(url, isRoot)\n{\n    if (isRoot) {\n        tree.currentNodeId = tree.root.id;\n    }\n\n    if (\/store\\\/\\d+\/.test(url)) {\n        url = url.replace(\/store\\\/\\d+\/, \"store\/\" + tree.storeId);\n    }\n    else    {\n        url+= \"store\/\" + tree.storeId + \"\/\";\n    }\n\n    url+= 'parent\/'+tree.currentNodeId;\n    updateContent(url);\n}\n\nfunction categoryMove(obj)\n{\n    var data = {id: obj.dropNode.id, form_key: FORM_KEY};\n\n    data.point = obj.point;\n    switch (obj.point) {\n        case 'above' :\n            data.pid = obj.target.parentNode.id;\n            data.paid = obj.dropNode.parentNode.id;\n            if (obj.target.previousSibling) {\n                data.aid = obj.target.previousSibling.id;\n            } else {\n                data.aid = 0;\n            }\n            break;\n        case 'below' :\n            data.pid = obj.target.parentNode.id;\n            data.aid = obj.target.id;\n        break;\n        case 'append' :\n            data.pid = obj.target.id;\n            data.paid = obj.dropNode.parentNode.id;\n            if (obj.target.lastChild) {\n                data.aid = obj.target.lastChild.id;\n            } else {\n                data.aid = 0;\n            }\n        break;\n        default :\n            obj.cancel = true;\n            return obj;\n    }\n\n    var success = function(o) {\n        try {\n            if(o.responseText){\n                if(o.responseText==='SUCCESS'){\n                    categoryForm.refreshPath();\n                } else {\n                    alert(o.responseText.stripTags().toString());\n                    location.reload();\n                }\n            }\n        }\n        catch(e) {\n        }\n    };\n\n    var failure = function(o) {\n        try {\n            console.log(o.statusText);\n        } catch (e2) {\n            alert(o.statusText);\n        }\n        location.reload();\n    };\n\n    var pd = [];\n    for(var key in data) {\n        pd.push(encodeURIComponent(key), \"=\", encodeURIComponent(data[key]), \"&\");\n    }\n    pd.splice(pd.length-1,1);\n    new Ajax.Request(\n        '",384],["T_OPEN_TAG","<?php ",469],["T_ECHO","echo",469],["T_WHITESPACE"," ",469],["T_VARIABLE","$this",469],["T_OBJECT_OPERATOR","->",469],["T_STRING","getMoveUrl",469],"(",")",["T_WHITESPACE"," ",469],["T_CLOSE_TAG","?>",469],["T_INLINE_HTML","',\n        {\n            method:     'POST',\n            parameters: pd.join(\"\"),\n            onSuccess : success,\n            onFailure : failure\n        }\n    );\n}\n\/\/]]>\n<\/script>\n",469],["T_OPEN_TAG","<?php ",480],["T_ENDIF","endif",480],";",["T_WHITESPACE"," ",480],["T_CLOSE_TAG","?>\n",480]]
[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Magento\n *\n * NOTICE OF LICENSE\n *\n * This source file is subject to the Academic Free License (AFL 3.0)\n * that is bundled with this package in the file LICENSE_AFL.txt.\n * It is also available through the world-wide-web at this URL:\n * http:\/\/opensource.org\/licenses\/afl-3.0.php\n * If you did not receive a copy of the license and are unable to\n * obtain it through the world-wide-web, please send an email\n * to license@magento.com so we can send you a copy immediately.\n *\n * DISCLAIMER\n *\n * Do not edit or add to this file if you wish to upgrade Magento to newer\n * versions in the future. If you wish to customize Magento for your\n * needs please refer to http:\/\/www.magento.com for more information.\n *\n * @category    design\n * @package     default_default\n * @copyright   Copyright (c) 2006-2016 X.commerce, Inc. and affiliates (http:\/\/www.magento.com)\n * @license     http:\/\/opensource.org\/licenses\/afl-3.0.php  Academic Free License (AFL 3.0)\n *\/",2],["T_WHITESPACE","\n",25],["T_CLOSE_TAG","?>\n",26],["T_INLINE_HTML","<script type=\"text\/javascript\">\n\/\/<![CDATA[\n\nvar bundleTemplateBox = '<table class=\"border\" cellpadding=\"0\" cellspacing=\"0\">' +\n    '    <thead>' +\n    '        <tr class=\"headings\">' +\n    '            <th>",27],["T_OPEN_TAG","<?php ",33],["T_ECHO","echo",33],["T_WHITESPACE"," ",33],["T_VARIABLE","$this",33],["T_OBJECT_OPERATOR","->",33],["T_STRING","jsQuoteEscape",33],"(",["T_STRING","Mage",33],["T_DOUBLE_COLON","::",33],["T_STRING","helper",33],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog'",33],")",["T_OBJECT_OPERATOR","->",33],["T_STRING","__",33],"(",["T_CONSTANT_ENCAPSED_STRING","'Name'",33],")",")",["T_WHITESPACE"," ",33],["T_CLOSE_TAG","?>",33],["T_INLINE_HTML","<\/th>' +\n    ",33],["T_OPEN_TAG","<?php ",34],["T_IF","if",34],["T_WHITESPACE"," ",34],"(",["T_VARIABLE","$this",34],["T_OBJECT_OPERATOR","->",34],["T_STRING","getCanReadPrice",34],"(",")",["T_WHITESPACE"," ",34],["T_IS_NOT_IDENTICAL","!==",34],["T_WHITESPACE"," ",34],["T_STRING","false",34],")",["T_WHITESPACE"," ",34],":",["T_WHITESPACE"," ",34],["T_CLOSE_TAG","?>\n",34],["T_INLINE_HTML","    '            <th class=\"type-price price-type-box\">",35],["T_OPEN_TAG","<?php ",35],["T_ECHO","echo",35],["T_WHITESPACE"," ",35],["T_VARIABLE","$this",35],["T_OBJECT_OPERATOR","->",35],["T_STRING","jsQuoteEscape",35],"(",["T_STRING","Mage",35],["T_DOUBLE_COLON","::",35],["T_STRING","helper",35],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog'",35],")",["T_OBJECT_OPERATOR","->",35],["T_STRING","__",35],"(",["T_CONSTANT_ENCAPSED_STRING","'Price'",35],")",")",["T_WHITESPACE"," ",35],["T_CLOSE_TAG","?>",35],["T_INLINE_HTML","<\/th>' +\n    '            <th class=\"type-type price-type-box\">",35],["T_OPEN_TAG","<?php ",36],["T_ECHO","echo",36],["T_WHITESPACE"," ",36],["T_VARIABLE","$this",36],["T_OBJECT_OPERATOR","->",36],["T_STRING","jsQuoteEscape",36],"(",["T_STRING","Mage",36],["T_DOUBLE_COLON","::",36],["T_STRING","helper",36],"(",["T_CONSTANT_ENCAPSED_STRING","'bundle'",36],")",["T_OBJECT_OPERATOR","->",36],["T_STRING","__",36],"(",["T_CONSTANT_ENCAPSED_STRING","'Price Type'",36],")",")",["T_WHITESPACE"," ",36],["T_CLOSE_TAG","?>",36],["T_INLINE_HTML","<\/th>' +\n    ",36],["T_OPEN_TAG","<?php ",37],["T_ENDIF","endif",37],";",["T_WHITESPACE"," ",37],["T_CLOSE_TAG","?>\n",37],["T_INLINE_HTML","    '            <th class=\"type-price\">",38],["T_OPEN_TAG","<?php ",38],["T_ECHO","echo",38],["T_WHITESPACE"," ",38],["T_VARIABLE","$this",38],["T_OBJECT_OPERATOR","->",38],["T_STRING","jsQuoteEscape",38],"(",["T_STRING","Mage",38],["T_DOUBLE_COLON","::",38],["T_STRING","helper",38],"(",["T_CONSTANT_ENCAPSED_STRING","'bundle'",38],")",["T_OBJECT_OPERATOR","->",38],["T_STRING","__",38],"(",["T_CONSTANT_ENCAPSED_STRING","'Default Qty'",38],")",")",["T_WHITESPACE"," ",38],["T_CLOSE_TAG","?>",38],["T_INLINE_HTML","<\/th>' +\n    '            <th class=\"type-uqty qty-box\">",38],["T_OPEN_TAG","<?php ",39],["T_ECHO","echo",39],["T_WHITESPACE"," ",39],["T_VARIABLE","$this",39],["T_OBJECT_OPERATOR","->",39],["T_STRING","jsQuoteEscape",39],"(",["T_STRING","Mage",39],["T_DOUBLE_COLON","::",39],["T_STRING","helper",39],"(",["T_CONSTANT_ENCAPSED_STRING","'bundle'",39],")",["T_OBJECT_OPERATOR","->",39],["T_STRING","__",39],"(",["T_CONSTANT_ENCAPSED_STRING","'User Defined Qty'",39],")",")",["T_WHITESPACE"," ",39],["T_CLOSE_TAG","?>",39],["T_INLINE_HTML","<\/th>' +\n    '            <th class=\"type-order\">",39],["T_OPEN_TAG","<?php ",40],["T_ECHO","echo",40],["T_WHITESPACE"," ",40],["T_VARIABLE","$this",40],["T_OBJECT_OPERATOR","->",40],["T_STRING","jsQuoteEscape",40],"(",["T_STRING","Mage",40],["T_DOUBLE_COLON","::",40],["T_STRING","helper",40],"(",["T_CONSTANT_ENCAPSED_STRING","'bundle'",40],")",["T_OBJECT_OPERATOR","->",40],["T_STRING","__",40],"(",["T_CONSTANT_ENCAPSED_STRING","'Position'",40],")",")",["T_WHITESPACE"," ",40],["T_CLOSE_TAG","?>",40],["T_INLINE_HTML","<\/th>' +\n    '            <th style=\"width:1px\">",40],["T_OPEN_TAG","<?php ",41],["T_ECHO","echo",41],["T_WHITESPACE"," ",41],["T_VARIABLE","$this",41],["T_OBJECT_OPERATOR","->",41],["T_STRING","jsQuoteEscape",41],"(",["T_STRING","Mage",41],["T_DOUBLE_COLON","::",41],["T_STRING","helper",41],"(",["T_CONSTANT_ENCAPSED_STRING","'bundle'",41],")",["T_OBJECT_OPERATOR","->",41],["T_STRING","__",41],"(",["T_CONSTANT_ENCAPSED_STRING","'Default'",41],")",")",["T_WHITESPACE"," ",41],["T_CLOSE_TAG","?>",41],["T_INLINE_HTML","<\/th>' +\n    '            <th class=\"last\">&nbsp;<\/th>' +\n    '        <\/tr>' +\n    '    <\/thead> ' +\n    '    <tbody>' +\n    '    <\/tbody>' +\n    '<\/table>';\n\nvar bundleTemplateRow ='<td>' +\n                '    <input type=\"hidden\" id=\"",41],["T_OPEN_TAG","<?php ",50],["T_ECHO","echo",50],["T_WHITESPACE"," ",50],["T_VARIABLE","$this",50],["T_OBJECT_OPERATOR","->",50],["T_STRING","getFieldId",50],"(",")",["T_WHITESPACE"," ",50],["T_CLOSE_TAG","?>",50],["T_INLINE_HTML","_id_{{index}}\" name=\"",50],["T_OPEN_TAG","<?php ",50],["T_ECHO","echo",50],["T_WHITESPACE"," ",50],["T_VARIABLE","$this",50],["T_OBJECT_OPERATOR","->",50],["T_STRING","getFieldName",50],"(",")",["T_WHITESPACE"," ",50],["T_CLOSE_TAG","?>",50],["T_INLINE_HTML","[{{parentIndex}}][{{index}}][selection_id]\" value=\"{{selection_id}}\">' +\n                '    <input type=\"hidden\" name=\"",50],["T_OPEN_TAG","<?php ",51],["T_ECHO","echo",51],["T_WHITESPACE"," ",51],["T_VARIABLE","$this",51],["T_OBJECT_OPERATOR","->",51],["T_STRING","getFieldName",51],"(",")",["T_WHITESPACE"," ",51],["T_CLOSE_TAG","?>",51],["T_INLINE_HTML","[{{parentIndex}}][{{index}}][option_id]\" value=\"{{option_id}}\">' +\n                '    <input type=\"hidden\" class=\"product\" name=\"",51],["T_OPEN_TAG","<?php ",52],["T_ECHO","echo",52],["T_WHITESPACE"," ",52],["T_VARIABLE","$this",52],["T_OBJECT_OPERATOR","->",52],["T_STRING","getFieldName",52],"(",")",["T_WHITESPACE"," ",52],["T_CLOSE_TAG","?>",52],["T_INLINE_HTML","[{{parentIndex}}][{{index}}][product_id]\" value=\"{{product_id}}\">' +\n                '    <input type=\"hidden\" name=\"",52],["T_OPEN_TAG","<?php ",53],["T_ECHO","echo",53],["T_WHITESPACE"," ",53],["T_VARIABLE","$this",53],["T_OBJECT_OPERATOR","->",53],["T_STRING","getFieldName",53],"(",")",["T_WHITESPACE"," ",53],["T_CLOSE_TAG","?>",53],["T_INLINE_HTML","[{{parentIndex}}][{{index}}][delete]\" value=\"\" class=\"delete\">' +\n                '    {{name}}<br \/>' +\n                '   <div  class=\"nobr\">' +\n                '        <strong>",53],["T_OPEN_TAG","<?php ",56],["T_ECHO","echo",56],["T_WHITESPACE"," ",56],["T_VARIABLE","$this",56],["T_OBJECT_OPERATOR","->",56],["T_STRING","helper",56],"(",["T_CONSTANT_ENCAPSED_STRING","'sales'",56],")",["T_OBJECT_OPERATOR","->",56],["T_STRING","__",56],"(",["T_CONSTANT_ENCAPSED_STRING","'SKU'",56],")",["T_WHITESPACE"," ",56],["T_CLOSE_TAG","?>",56],["T_INLINE_HTML",":<\/strong> {{sku}}' +\n                '    <\/div>' +\n                '<\/td>' +\n                ",56],["T_OPEN_TAG","<?php ",59],["T_IF","if",59],["T_WHITESPACE"," ",59],"(",["T_VARIABLE","$this",59],["T_OBJECT_OPERATOR","->",59],["T_STRING","getCanReadPrice",59],"(",")",["T_WHITESPACE"," ",59],["T_IS_NOT_IDENTICAL","!==",59],["T_WHITESPACE"," ",59],["T_STRING","false",59],")",["T_WHITESPACE"," ",59],":",["T_WHITESPACE"," ",59],["T_CLOSE_TAG","?>\n",59],["T_INLINE_HTML","                '<td class=\"price-type-box\"><input id=\"",60],["T_OPEN_TAG","<?php ",60],["T_ECHO","echo",60],["T_WHITESPACE"," ",60],["T_VARIABLE","$this",60],["T_OBJECT_OPERATOR","->",60],["T_STRING","getFieldId",60],"(",")",["T_WHITESPACE"," ",60],["T_CLOSE_TAG","?>",60],["T_INLINE_HTML","_{{index}}_price_value\" class=\"input-text required-entry validate-zero-or-greater\" type=\"text\" name=\"",60],["T_OPEN_TAG","<?php ",60],["T_ECHO","echo",60],["T_WHITESPACE"," ",60],["T_VARIABLE","$this",60],["T_OBJECT_OPERATOR","->",60],["T_STRING","getFieldName",60],"(",")",["T_WHITESPACE"," ",60],["T_CLOSE_TAG","?>",60],["T_INLINE_HTML","[{{parentIndex}}][{{index}}][selection_price_value]\" value=\"{{selection_price_value}}\"",60],["T_OPEN_TAG","<?php ",60],["T_IF","if",60],"(",["T_VARIABLE","$this",60],["T_OBJECT_OPERATOR","->",60],["T_STRING","getCanEditPrice",60],"(",")",["T_WHITESPACE"," ",60],["T_IS_IDENTICAL","===",60],["T_WHITESPACE"," ",60],["T_STRING","false",60],")",["T_WHITESPACE"," ",60],":",["T_WHITESPACE"," ",60],["T_CLOSE_TAG","?>",60],["T_INLINE_HTML"," disabled=\"disabled\"",60],["T_OPEN_TAG","<?php ",60],["T_ENDIF","endif",60],";",["T_WHITESPACE"," ",60],["T_CLOSE_TAG","?>",60],["T_INLINE_HTML","><\/td>' +\n                '<td class=\"price-type-box\">",60],["T_OPEN_TAG","<?php ",61],["T_ECHO","echo",61],["T_WHITESPACE"," ",61],["T_VARIABLE","$this",61],["T_OBJECT_OPERATOR","->",61],["T_STRING","getPriceTypeSelectHtml",61],"(",")",["T_WHITESPACE"," ",61],["T_CLOSE_TAG","?>",61],["T_INLINE_HTML","<div>",61],["T_OPEN_TAG","<?php ",61],["T_ECHO","echo",61],["T_WHITESPACE"," ",61],["T_VARIABLE","$this",61],["T_OBJECT_OPERATOR","->",61],["T_STRING","getCheckboxScopeHtml",61],"(",")",["T_WHITESPACE"," ",61],["T_CLOSE_TAG","?>",61],["T_INLINE_HTML","<\/div><\/td>' +\n                ",61],["T_OPEN_TAG","<?php ",62],["T_ELSE","else",62],["T_WHITESPACE"," ",62],":",["T_WHITESPACE"," ",62],["T_CLOSE_TAG","?>\n",62],["T_INLINE_HTML","                    '<input type=\"hidden\" id=\"",63],["T_OPEN_TAG","<?php ",63],["T_ECHO","echo",63],["T_WHITESPACE"," ",63],["T_VARIABLE","$this",63],["T_OBJECT_OPERATOR","->",63],["T_STRING","getFieldId",63],"(",")",";",["T_WHITESPACE"," ",63],["T_CLOSE_TAG","?>",63],["T_INLINE_HTML","_{{index}}_price_value\" name=\"",63],["T_OPEN_TAG","<?php ",63],["T_ECHO","echo",63],["T_WHITESPACE"," ",63],["T_VARIABLE","$this",63],["T_OBJECT_OPERATOR","->",63],["T_STRING","getFieldName",63],"(",")",";",["T_WHITESPACE"," ",63],["T_CLOSE_TAG","?>",63],["T_INLINE_HTML","[{{parentIndex}}][{{index}}][selection_price_value]\" value=\"0\" \/>' +\n                    '<input type=\"hidden\" id=\"",63],["T_OPEN_TAG","<?php ",64],["T_ECHO","echo",64],["T_WHITESPACE"," ",64],["T_VARIABLE","$this",64],["T_OBJECT_OPERATOR","->",64],["T_STRING","getFieldId",64],"(",")",";",["T_WHITESPACE"," ",64],["T_CLOSE_TAG","?>",64],["T_INLINE_HTML","_{{index}}_price_type\" name=\"",64],["T_OPEN_TAG","<?php ",64],["T_ECHO","echo",64],["T_WHITESPACE"," ",64],["T_VARIABLE","$this",64],["T_OBJECT_OPERATOR","->",64],["T_STRING","getFieldName",64],"(",")",";",["T_WHITESPACE"," ",64],["T_CLOSE_TAG","?>",64],["T_INLINE_HTML","[{{parentIndex}}][{{index}}][selection_price_type]\" value=\"0\" \/>' +\n                    ",64],["T_OPEN_TAG","<?php ",65],["T_IF","if",65],["T_WHITESPACE"," ",65],"(",["T_VARIABLE","$this",65],["T_OBJECT_OPERATOR","->",65],["T_STRING","isUsedWebsitePrice",65],"(",")",")",":",["T_WHITESPACE"," ",65],["T_CLOSE_TAG","?>\n",65],["T_INLINE_HTML","                    '<input type=\"hidden\" id=\"",66],["T_OPEN_TAG","<?php ",66],["T_ECHO","echo",66],["T_WHITESPACE"," ",66],["T_VARIABLE","$this",66],["T_OBJECT_OPERATOR","->",66],["T_STRING","getFieldId",66],"(",")",";",["T_WHITESPACE"," ",66],["T_CLOSE_TAG","?>",66],["T_INLINE_HTML","_{{index}}_price_scope\" name=\"",66],["T_OPEN_TAG","<?php ",66],["T_ECHO","echo",66],["T_WHITESPACE"," ",66],["T_VARIABLE","$this",66],["T_OBJECT_OPERATOR","->",66],["T_STRING","getFieldName",66],"(",")",";",["T_WHITESPACE"," ",66],["T_CLOSE_TAG","?>",66],["T_INLINE_HTML","[{{parentIndex}}][{{index}}][default_price_scope]\" value=\"1\" \/>' +\n                    ",66],["T_OPEN_TAG","<?php ",67],["T_ENDIF","endif",67],";",["T_WHITESPACE"," ",67],["T_CLOSE_TAG","?>\n",67],["T_INLINE_HTML","                ",68],["T_OPEN_TAG","<?php ",68],["T_ENDIF","endif",68],";",["T_WHITESPACE"," ",68],["T_CLOSE_TAG","?>\n",68],["T_INLINE_HTML","                '<td><input class=\"input-text required-entry validate-greater-zero-based-on-option validate-zero-or-greater\" type=\"text\" name=\"",69],["T_OPEN_TAG","<?php ",69],["T_ECHO","echo",69],["T_WHITESPACE"," ",69],["T_VARIABLE","$this",69],["T_OBJECT_OPERATOR","->",69],["T_STRING","getFieldName",69],"(",")",["T_WHITESPACE"," ",69],["T_CLOSE_TAG","?>",69],["T_INLINE_HTML","[{{parentIndex}}][{{index}}][selection_qty]\" value=\"{{selection_qty}}\"><\/td>' +\n                '<td class=\"qty-box\">",69],["T_OPEN_TAG","<?php ",70],["T_ECHO","echo",70],["T_WHITESPACE"," ",70],["T_VARIABLE","$this",70],["T_OBJECT_OPERATOR","->",70],["T_STRING","getQtyTypeSelectHtml",70],"(",")",["T_WHITESPACE"," ",70],["T_CLOSE_TAG","?>",70],["T_INLINE_HTML","<\/td>' +\n                '<td><input class=\"input-text required-entry validate-zero-or-greater\" type=\"text\" name=\"",70],["T_OPEN_TAG","<?php ",71],["T_ECHO","echo",71],["T_WHITESPACE"," ",71],["T_VARIABLE","$this",71],["T_OBJECT_OPERATOR","->",71],["T_STRING","getFieldName",71],"(",")",["T_WHITESPACE"," ",71],["T_CLOSE_TAG","?>",71],["T_INLINE_HTML","[{{parentIndex}}][{{index}}][position]\" value=\"{{position}}\"><\/td>' +\n                '<td class=\"a-center\"><input onclick=\"bSelection.checkGroup(event)\" type=\"{{option_type}}\" class=\"default\" name=\"",71],["T_OPEN_TAG","<?php ",72],["T_ECHO","echo",72],["T_WHITESPACE"," ",72],["T_VARIABLE","$this",72],["T_OBJECT_OPERATOR","->",72],["T_STRING","getFieldName",72],"(",")",["T_WHITESPACE"," ",72],["T_CLOSE_TAG","?>",72],["T_INLINE_HTML","[{{parentIndex}}][{{index}}][is_default]\" value=\"1\" {{checked}}><\/td>' +\n                '<td class=\"last\"><span title=\"Delete Row\">",72],["T_OPEN_TAG","<?php ",73],["T_ECHO","echo",73],["T_WHITESPACE"," ",73],["T_VARIABLE","$this",73],["T_OBJECT_OPERATOR","->",73],["T_STRING","getSelectionDeleteButtonHtml",73],"(",")",["T_WHITESPACE"," ",73],["T_CLOSE_TAG","?>",73],["T_INLINE_HTML","<\/span><\/td>';\n\nBundle.Selection = Class.create();\nBundle.Selection.prototype = {\n    idLabel : '",73],["T_OPEN_TAG","<?php ",77],["T_ECHO","echo",77],["T_WHITESPACE"," ",77],["T_VARIABLE","$this",77],["T_OBJECT_OPERATOR","->",77],["T_STRING","getFieldId",77],"(",")",["T_WHITESPACE"," ",77],["T_CLOSE_TAG","?>",77],["T_INLINE_HTML","',\n    scopePrice : ",77],["T_OPEN_TAG","<?php ",78],["T_ECHO","echo",78],["T_WHITESPACE"," ",78],["T_INT_CAST","(int)",78],["T_VARIABLE","$this",78],["T_OBJECT_OPERATOR","->",78],["T_STRING","isUsedWebsitePrice",78],"(",")",["T_WHITESPACE"," ",78],["T_CLOSE_TAG","?>",78],["T_INLINE_HTML",",\n    templateSyntax : \/(^|.|\\r|\\n)({{(\\w+)}})\/,\n    templateBox : '',\n    templateRow : '',\n    itemsCount : 0,\n    row : null,\n    gridSelection : new Hash(),\n\n    initialize : function() {\n        this.templateBox = '<div class=\"grid tier form-list\" id=\"' + this.idLabel + '_box_{{parentIndex}}\">' + bundleTemplateBox + '<\/div>';\n\n        this.templateRow = '<tr class=\"selection\" id=\"' + this.idLabel + '_row_{{index}}\">' + bundleTemplateRow + '<\/tr>';\n    },\n\n    showSearch : function(event) {\n        var element = Event.findElement(event, 'div');\n        var parts = element.id.split('_');\n\n        var products = new Array();\n\n        var inputs = $A($$('#' + element.id + ' tr.selection input.product'));\n        for (i=0; i<inputs.length; i++) {\n            products.push(inputs[i].value);\n        }\n\n        this.gridSelection.set(parts[2], $H({}));\n\n        new Ajax.Updater(bOption.idLabel + '_search_' + parts[2], '",78],["T_OPEN_TAG","<?php ",105],["T_ECHO","echo",105],["T_WHITESPACE"," ",105],["T_VARIABLE","$this",105],["T_OBJECT_OPERATOR","->",105],["T_STRING","getSelectionSearchUrl",105],"(",")",["T_WHITESPACE"," ",105],["T_CLOSE_TAG","?>",105],["T_INLINE_HTML","', {\n            method: 'post',\n            parameters : {'index' : parts[2], 'products[]' : products, 'form_key': FORM_KEY},\n            evalScripts : true\n        });\n\n        if (Event.element(event).tagName.toLowerCase() != 'button') {\n            var button = Event.element(event).up('button');\n        } else {\n            var button = Event.element(event);\n        }\n        button.hide();\n    },\n\n    addRow : function (parentIndex, data) {\n        var box = null;\n        if (!(box = $(this.idLabel + '_box_' + parentIndex))) {\n            this.addBox(parentIndex);\n            box = $(this.idLabel + '_box_' + parentIndex);\n        } else {\n            box.show();\n        }\n\n        var option_type = $(bOption.idLabel + '_' + parentIndex + '_type');\n\n        if(!data){\n            var data = {};\n        }\n\n        if (data.can_read_price != undefined && !data.can_read_price) {\n            data.selection_price_value = '';\n        } else {\n            data.selection_price_value = Number(data.selection_price_value).toFixed(2);\n        }\n\n        data.index = this.itemsCount++;\n        data.parentIndex = parentIndex;\n\n        if (option_type.value == 'multi' || option_type.value == 'checkbox') {\n            data.option_type = 'checkbox';\n        } else {\n            data.option_type = 'radio';\n        }\n\n        if (data.is_default == 1) {\n            data.checked = 'checked=\"checked\"';\n        }\n\n        this.template = new Template(this.templateRow, this.templateSyntax);\n        var tbody = $$('#' + this.idLabel + '_box_' + parentIndex + ' tbody');\n\n        Element.insert(tbody[0], {'bottom':this.template.evaluate(data)});\n\n        if (data.selection_price_type) {\n            $A($(this.idLabel + '_'+data.index+'_price_type').options).each(function(option){\n                if (option.value==data.selection_price_type) option.selected = true;\n            });\n        }\n\n        if (data.selection_price_type) {\n            $A($(this.idLabel + '_'+data.index+'_can_change_qty').options).each(function(option){\n                if (option.value==data.selection_can_change_qty) option.selected = true;\n            });\n        }\n\n        var checkbox = $(this.idLabel + '_'+data.index+'_price_scope');\n        if (checkbox && this.scopePrice) {\n            if (data.price_scope === undefined) {\n                checkbox.up().hide();\n            } else if(!data.price_scope) {\n                checkbox.checked = true;\n                this.addScope(null, checkbox);\n            }\n        }\n\n        this.bindScopeCheckbox();\n\n        if (option_type.value == 'multi' || option_type.value == 'checkbox') {\n            \/**\n             * Hide not needed elements (user defined qty select box)\n             *\/\n            inputs = $A($$('#' + this.idLabel + '_box_' + data.parentIndex + ' .qty-box'));\n            inputs.each(\n                function(elem){\n                    elem.hide();\n                }\n            );\n        }\n\n        if (!$('price_type') || $('price_type').value != '1') {\n            \/**\n             * Hide not needed elements (price type select and price input)\n             *\/\n            inputs = $A($$('#' + this.idLabel + '_box_' + data.parentIndex + ' .price-type-box'));\n            inputs.each(\n                function(elem){\n                    elem.hide();\n                }\n            );\n        }\n    },\n\n    bindScopeCheckbox : function(){\n        var checkboxes = $$('.bundle-option-price-scope-checkbox');\n        for (var i=0;i<checkboxes.length;i++) {\n            if (!$(checkboxes[i]).binded) {\n                $(checkboxes[i]).binded = true;\n                Event.observe(checkboxes[i], 'click', this.addScope.bind(this));\n            }\n        }\n    },\n\n    addScope : function(event, element){\n        if (element == undefined) {\n            element = $(Event.element(event));\n        }\n        var priceValue = $(element.id.sub('scope', 'value'));\n        var priceType = $(element.id.sub('scope', 'type'));\n\n        if (element.checked) {\n            priceValue.disable();\n            priceType.disable();\n        } else {\n            priceValue.enable();\n            priceType.enable();\n        }\n    },\n\n    addBox : function (parentIndex) {\n        var div = $(bOption.idLabel + '_' + parentIndex)\n        this.template = new Template(this.templateBox, this.templateSyntax);\n        var data = {'parentIndex' : parentIndex};\n        Element.insert(div, {'bottom':this.template.evaluate(data)});\n    },\n\n    remove : function(event) {\n        var element = Event.findElement(event, 'tr');\n        var container = Event.findElement(event, 'div');\n\n        if (element) {\n            Element.select(element, '.delete').each(function(elem){elem.value='1'});\n            Element.select(element, ['input', 'select']).each(function(elem){elem.hide()});\n            Element.removeClassName(element, 'selection');\n            Element.hide(element);\n\n            if (container) {\n                if ($$('#' + container.id + ' tr.selection')) {\n                    if (!$$('#' + container.id + ' tr.selection').length) {\n                        container.hide();\n                    }\n                }\n            }\n        }\n    },\n\n    checkGroup : function(event) {\n        var element = Event.element(event);\n        if (element.type == 'radio') {\n            var box = element.up('div');\n\n            var inputs = $$('div#' + box.id + ' input.default');\n            if (inputs) {\n                for (i=0; i< inputs.length; i++) {\n                    if (inputs[i].name != element.name) {\n                        inputs[i].checked = false;\n                    }\n                }\n            }\n        }\n    },\n\n    productGridAddSelected : function(event) {\n        var element = Event.findElement(event, 'button');\n        var parts = element.id.split('_');\n\n        $(bOption.idLabel + '_search_' + parts[2]).innerHTML = '';\n        $(bOption.idLabel + '_' + parts[2] + '_add_button').show();\n\n        this.gridSelection.get(parts[2]).each(\n            function(pair) {\n                var qty = pair.value.get('qty');\n                var data = {\n                    'name' : pair.value.get('name'),\n                    'selection_price_value' : 0,\n                    'selection_qty' : (qty == '' ? 1 : qty),\n                    'sku' : pair.value.get('sku'),\n                    'position' : 0,\n                    'product_id' : pair.key,\n                    'option_id' : $(bOption.idLabel + '_id_' + parts[2]).value\n                };\n                bSelection.addRow(parts[2], data);\n            }\n        );\n    },\n\n    productGridRowInit : function(grid, row){\n        var checkbox = $(row).getElementsByClassName('checkbox')[0];\n        var inputs = $(row).getElementsByClassName('input-text');\n        for (var i = 0; i < inputs.length; i++) {\n            inputs[i].checkbox = checkbox;\n            Event.observe(inputs[i], 'keyup', this.productGridRowInputChange.bind(this));\n            Event.observe(inputs[i], 'change', this.productGridRowInputChange.bind(this));\n        }\n    },\n\n    productGridCheckboxCheck : function(grid, element, checked) {\n        var id = element.up('table').id.split('_')[4];\n        if (element.value > 0) {\n            if (element.checked) {\n                var tr = element.parentNode.parentNode;\n                if (!this.gridSelection.get(id)) {\n                    this.gridSelection.set(id, new Hash());\n                }\n                this.gridSelection.get(id).set(element.value, $H({}));\n                this.gridSelection.get(id).get(element.value).set('name', tr.select('td.name')[0].innerHTML);\n                this.gridSelection.get(id).get(element.value).set('qty', tr.select('input.qty')[0].value);\n                this.gridSelection.get(id).get(element.value).set('sku', tr.select('td.sku')[0].innerHTML);\n            } else {\n                this.gridSelection.get(id).unset(element.value);\n            }\n        }\n    },\n\n    productGridRowClick : function(grid, event) {\n        var trElement = Event.findElement(event, 'tr');\n        var isInput = Event.element(event).tagName == 'INPUT';\n        if (trElement) {\n            var checkbox = Element.select(trElement, 'input');\n            if (checkbox[0]) {\n                var checked = isInput ? checkbox[0].checked : !checkbox[0].checked;\n                grid.setCheckboxChecked(checkbox[0], checked);\n            }\n        }\n    },\n\n    productGridRowInputChange : function(event) {\n        var element = Event.element(event);\n        if (!element.checkbox.checked) {\n            return;\n        }\n        var id = element.up('table').id.split('_')[4];\n        this.gridSelection.get(id).get(element.checkbox.value).set('qty', element.value);\n    }\n}\n\nbSelection = new Bundle.Selection();\n\/\/]]>\n<\/script>\n",105]]
[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Magento\n *\n * NOTICE OF LICENSE\n *\n * This source file is subject to the Academic Free License (AFL 3.0)\n * that is bundled with this package in the file LICENSE_AFL.txt.\n * It is also available through the world-wide-web at this URL:\n * http:\/\/opensource.org\/licenses\/afl-3.0.php\n * If you did not receive a copy of the license and are unable to\n * obtain it through the world-wide-web, please send an email\n * to license@magento.com so we can send you a copy immediately.\n *\n * DISCLAIMER\n *\n * Do not edit or add to this file if you wish to upgrade Magento to newer\n * versions in the future. If you wish to customize Magento for your\n * needs please refer to http:\/\/www.magento.com for more information.\n *\n * @category    design\n * @package     default_default\n * @copyright   Copyright (c) 2006-2016 X.commerce, Inc. and affiliates (http:\/\/www.magento.com)\n * @license     http:\/\/opensource.org\/licenses\/afl-3.0.php  Academic Free License (AFL 3.0)\n *\/",2],["T_WHITESPACE","\n",25],["T_CLOSE_TAG","?>\n",26],["T_INLINE_HTML","<!-- Addresses list -->\n<table cellspacing=\"0\" class=\"form-edit\">\n<tr>\n<td class=\"address-list\">\n    <div class=\"entry-edit-head\">\n        <h4 class=\"icon-head head-customer-address-list\">",27],["T_OPEN_TAG","<?php ",32],["T_ECHO","echo",32],["T_WHITESPACE"," ",32],["T_STRING","Mage",32],["T_DOUBLE_COLON","::",32],["T_STRING","helper",32],"(",["T_CONSTANT_ENCAPSED_STRING","'customer'",32],")",["T_OBJECT_OPERATOR","->",32],["T_STRING","__",32],"(",["T_CONSTANT_ENCAPSED_STRING","'Customer Addresses'",32],")",["T_WHITESPACE"," ",32],["T_CLOSE_TAG","?>",32],["T_INLINE_HTML","<\/h4>\n    <\/div>\n    <div class=\"sub-btn-set\">",32],["T_OPEN_TAG","<?php ",34],["T_ECHO","echo",34],["T_WHITESPACE"," ",34],["T_VARIABLE","$this",34],["T_OBJECT_OPERATOR","->",34],["T_STRING","getAddNewButtonHtml",34],"(",")",["T_WHITESPACE"," ",34],["T_CLOSE_TAG","?>",34],["T_INLINE_HTML","<\/div>\n    <ul id=\"address_list\">\n    ",34],["T_OPEN_TAG","<?php ",36],["T_VARIABLE","$_iterator",36],["T_WHITESPACE"," ",36],"=",["T_WHITESPACE"," ",36],["T_LNUMBER","0",36],";",["T_WHITESPACE"," ",36],["T_CLOSE_TAG","?>\n",36],["T_INLINE_HTML","    ",37],["T_OPEN_TAG","<?php ",37],["T_IF","if",37],"(",["T_STRING","count",37],"(",["T_VARIABLE","$addressCollection",37],")",")",":",["T_WHITESPACE"," ",37],["T_CLOSE_TAG","?>\n",37],["T_INLINE_HTML","        ",38],["T_OPEN_TAG","<?php ",38],["T_FOREACH","foreach",38],["T_WHITESPACE"," ",38],"(",["T_VARIABLE","$addressCollection",38],["T_WHITESPACE"," ",38],["T_AS","as",38],["T_WHITESPACE"," ",38],["T_VARIABLE","$_address",38],")",":",["T_WHITESPACE"," ",38],["T_CLOSE_TAG","?>\n",38],["T_INLINE_HTML","        <li id=\"address_item_",39],["T_OPEN_TAG","<?php ",39],["T_ECHO","echo",39],["T_WHITESPACE"," ",39],["T_VARIABLE","$_address",39],["T_OBJECT_OPERATOR","->",39],["T_STRING","getId",39],"(",")",["T_WHITESPACE"," ",39],["T_CLOSE_TAG","?>",39],["T_INLINE_HTML","\">\n            ",39],["T_OPEN_TAG","<?php ",40],["T_IF","if",40],["T_WHITESPACE"," ",40],"(","!",["T_VARIABLE","$this",40],["T_OBJECT_OPERATOR","->",40],["T_STRING","isReadonly",40],"(",")",")",":",["T_WHITESPACE"," ",40],["T_CLOSE_TAG","?>\n",40],["T_INLINE_HTML","            <a href=\"#\" class=\"btn-remove-address\">\n                <img src=\"",41],["T_OPEN_TAG","<?php ",42],["T_ECHO","echo",42],["T_WHITESPACE"," ",42],["T_VARIABLE","$this",42],["T_OBJECT_OPERATOR","->",42],["T_STRING","getSkinUrl",42],"(",["T_CONSTANT_ENCAPSED_STRING","'images\/cancel_icon.gif'",42],")",["T_WHITESPACE"," ",42],["T_CLOSE_TAG","?>",42],["T_INLINE_HTML","\" alt=\"",42],["T_OPEN_TAG","<?php ",42],["T_ECHO","echo",42],["T_WHITESPACE"," ",42],["T_STRING","Mage",42],["T_DOUBLE_COLON","::",42],["T_STRING","helper",42],"(",["T_CONSTANT_ENCAPSED_STRING","'core'",42],")",["T_OBJECT_OPERATOR","->",42],["T_STRING","quoteEscape",42],"(",["T_STRING","Mage",42],["T_DOUBLE_COLON","::",42],["T_STRING","helper",42],"(",["T_CONSTANT_ENCAPSED_STRING","'customer'",42],")",["T_OBJECT_OPERATOR","->",42],["T_STRING","__",42],"(",["T_CONSTANT_ENCAPSED_STRING","'Remove address'",42],")",")",["T_WHITESPACE"," ",42],["T_CLOSE_TAG","?>",42],["T_INLINE_HTML","\" id=\"delete_button",42],["T_OPEN_TAG","<?php ",42],["T_ECHO","echo",42],["T_WHITESPACE"," ",42],["T_INC","++",42],["T_VARIABLE","$_iterator",42],["T_WHITESPACE"," ",42],["T_CLOSE_TAG","?>",42],["T_INLINE_HTML","\" \/>\n            <\/a>\n            <a href=\"#\" id=\"select_button_",42],["T_OPEN_TAG","<?php ",44],["T_ECHO","echo",44],["T_WHITESPACE"," ",44],["T_VARIABLE","$_address",44],["T_OBJECT_OPERATOR","->",44],["T_STRING","getId",44],"(",")",["T_WHITESPACE"," ",44],["T_CLOSE_TAG","?>",44],["T_INLINE_HTML","\" class=\"select_button btn-edit-address\">\n                <img src=\"",44],["T_OPEN_TAG","<?php ",45],["T_ECHO","echo",45],["T_WHITESPACE"," ",45],["T_VARIABLE","$this",45],["T_OBJECT_OPERATOR","->",45],["T_STRING","getSkinUrl",45],"(",["T_CONSTANT_ENCAPSED_STRING","'images\/edit_icon.gif'",45],")",["T_WHITESPACE"," ",45],["T_CLOSE_TAG","?>",45],["T_INLINE_HTML","\" alt=\"",45],["T_OPEN_TAG","<?php ",45],["T_ECHO","echo",45],["T_WHITESPACE"," ",45],["T_STRING","Mage",45],["T_DOUBLE_COLON","::",45],["T_STRING","helper",45],"(",["T_CONSTANT_ENCAPSED_STRING","'core'",45],")",["T_OBJECT_OPERATOR","->",45],["T_STRING","quoteEscape",45],"(",["T_STRING","Mage",45],["T_DOUBLE_COLON","::",45],["T_STRING","helper",45],"(",["T_CONSTANT_ENCAPSED_STRING","'customer'",45],")",["T_OBJECT_OPERATOR","->",45],["T_STRING","__",45],"(",["T_CONSTANT_ENCAPSED_STRING","'Edit address'",45],")",")",["T_WHITESPACE"," ",45],["T_CLOSE_TAG","?>",45],["T_INLINE_HTML","\"\/>\n            <\/a>\n            ",45],["T_OPEN_TAG","<?php ",47],["T_ENDIF","endif",47],";",["T_CLOSE_TAG","?>\n",47],["T_INLINE_HTML","            <address>\n                ",48],["T_OPEN_TAG","<?php ",49],["T_ECHO","echo",49],["T_WHITESPACE"," ",49],["T_VARIABLE","$_address",49],["T_OBJECT_OPERATOR","->",49],["T_STRING","format",49],"(",["T_CONSTANT_ENCAPSED_STRING","'html'",49],")",["T_WHITESPACE"," ",49],["T_CLOSE_TAG","?>\n",49],["T_INLINE_HTML","            <\/address>\n            <div class=\"address-type\">\n                <span class=\"address-type-line\">\n                    <input type=\"radio\" ",50],["T_OPEN_TAG","<?php ",53],["T_IF","if",53],["T_WHITESPACE"," ",53],"(",["T_VARIABLE","$this",53],["T_OBJECT_OPERATOR","->",53],["T_STRING","isReadonly",53],"(",")",")",":",["T_CLOSE_TAG","?>",53],["T_INLINE_HTML"," disabled=\"disabled\"",53],["T_OPEN_TAG","<?php ",53],["T_ENDIF","endif",53],";",["T_CLOSE_TAG","?>",53],["T_INLINE_HTML"," value=\"",53],["T_OPEN_TAG","<?php ",53],["T_ECHO","echo",53],["T_WHITESPACE"," ",53],["T_VARIABLE","$_address",53],["T_OBJECT_OPERATOR","->",53],["T_STRING","getId",53],"(",")",["T_WHITESPACE"," ",53],["T_CLOSE_TAG","?>",53],["T_INLINE_HTML","\" id=\"address_item_billing",53],["T_OPEN_TAG","<?php ",53],["T_ECHO","echo",53],["T_WHITESPACE"," ",53],["T_VARIABLE","$_address",53],["T_OBJECT_OPERATOR","->",53],["T_STRING","getId",53],"(",")",["T_WHITESPACE"," ",53],["T_CLOSE_TAG","?>",53],["T_INLINE_HTML","\" name=\"account[default_billing]\" title=\"",53],["T_OPEN_TAG","<?php ",53],["T_ECHO","echo",53],["T_WHITESPACE"," ",53],["T_STRING","Mage",53],["T_DOUBLE_COLON","::",53],["T_STRING","helper",53],"(",["T_CONSTANT_ENCAPSED_STRING","'core'",53],")",["T_OBJECT_OPERATOR","->",53],["T_STRING","quoteEscape",53],"(",["T_STRING","Mage",53],["T_DOUBLE_COLON","::",53],["T_STRING","helper",53],"(",["T_CONSTANT_ENCAPSED_STRING","'customer'",53],")",["T_OBJECT_OPERATOR","->",53],["T_STRING","__",53],"(",["T_CONSTANT_ENCAPSED_STRING","'Set as Default Billing Address'",53],")",")",["T_WHITESPACE"," ",53],["T_CLOSE_TAG","?>",53],["T_INLINE_HTML","\"",53],["T_OPEN_TAG","<?php ",53],["T_IF","if",53],"(",["T_VARIABLE","$_address",53],["T_OBJECT_OPERATOR","->",53],["T_STRING","getId",53],"(",")",["T_IS_EQUAL","==",53],["T_VARIABLE","$customer",53],["T_OBJECT_OPERATOR","->",53],["T_STRING","getDefaultBilling",53],"(",")",")",":",["T_WHITESPACE"," ",53],["T_CLOSE_TAG","?>",53],["T_INLINE_HTML"," checked=\"checked\"",53],["T_OPEN_TAG","<?php ",53],["T_ENDIF","endif",53],";",["T_WHITESPACE"," ",53],["T_CLOSE_TAG","?>",53],["T_INLINE_HTML","\/>\n                    &nbsp;<label for=\"address_item_billing",53],["T_OPEN_TAG","<?php ",54],["T_ECHO","echo",54],["T_WHITESPACE"," ",54],["T_VARIABLE","$_address",54],["T_OBJECT_OPERATOR","->",54],["T_STRING","getId",54],"(",")",["T_WHITESPACE"," ",54],["T_CLOSE_TAG","?>",54],["T_INLINE_HTML","\">",54],["T_OPEN_TAG","<?php ",54],["T_ECHO","echo",54],["T_WHITESPACE"," ",54],["T_STRING","Mage",54],["T_DOUBLE_COLON","::",54],["T_STRING","helper",54],"(",["T_CONSTANT_ENCAPSED_STRING","'customer'",54],")",["T_OBJECT_OPERATOR","->",54],["T_STRING","__",54],"(",["T_CONSTANT_ENCAPSED_STRING","'Default Billing Address'",54],")",["T_WHITESPACE"," ",54],["T_CLOSE_TAG","?>",54],["T_INLINE_HTML","<\/label>\n                <\/span>\n                <span class=\"address-type-line\">\n                    <input type=\"radio\"  ",54],["T_OPEN_TAG","<?php ",57],["T_IF","if",57],["T_WHITESPACE"," ",57],"(",["T_VARIABLE","$this",57],["T_OBJECT_OPERATOR","->",57],["T_STRING","isReadonly",57],"(",")",")",":",["T_CLOSE_TAG","?>",57],["T_INLINE_HTML"," disabled=\"disabled\"",57],["T_OPEN_TAG","<?php ",57],["T_ENDIF","endif",57],";",["T_CLOSE_TAG","?>",57],["T_INLINE_HTML"," value=\"",57],["T_OPEN_TAG","<?php ",57],["T_ECHO","echo",57],["T_WHITESPACE"," ",57],["T_VARIABLE","$_address",57],["T_OBJECT_OPERATOR","->",57],["T_STRING","getId",57],"(",")",["T_WHITESPACE"," ",57],["T_CLOSE_TAG","?>",57],["T_INLINE_HTML","\" id=\"address_item_shipping",57],["T_OPEN_TAG","<?php ",57],["T_ECHO","echo",57],["T_WHITESPACE"," ",57],["T_VARIABLE","$_address",57],["T_OBJECT_OPERATOR","->",57],["T_STRING","getId",57],"(",")",["T_WHITESPACE"," ",57],["T_CLOSE_TAG","?>",57],["T_INLINE_HTML","\" name=\"account[default_shipping]\" title=\"",57],["T_OPEN_TAG","<?php ",57],["T_ECHO","echo",57],["T_WHITESPACE"," ",57],["T_STRING","Mage",57],["T_DOUBLE_COLON","::",57],["T_STRING","helper",57],"(",["T_CONSTANT_ENCAPSED_STRING","'core'",57],")",["T_OBJECT_OPERATOR","->",57],["T_STRING","quoteEscape",57],"(",["T_STRING","Mage",57],["T_DOUBLE_COLON","::",57],["T_STRING","helper",57],"(",["T_CONSTANT_ENCAPSED_STRING","'customer'",57],")",["T_OBJECT_OPERATOR","->",57],["T_STRING","__",57],"(",["T_CONSTANT_ENCAPSED_STRING","'Set as Default Shipping Address'",57],")",")",["T_WHITESPACE"," ",57],["T_CLOSE_TAG","?>",57],["T_INLINE_HTML","\"",57],["T_OPEN_TAG","<?php ",57],["T_IF","if",57],"(",["T_VARIABLE","$_address",57],["T_OBJECT_OPERATOR","->",57],["T_STRING","getId",57],"(",")",["T_IS_EQUAL","==",57],["T_VARIABLE","$customer",57],["T_OBJECT_OPERATOR","->",57],["T_STRING","getDefaultShipping",57],"(",")",")",":",["T_WHITESPACE"," ",57],["T_CLOSE_TAG","?>",57],["T_INLINE_HTML"," checked=\"checked\"",57],["T_OPEN_TAG","<?php ",57],["T_ENDIF","endif",57],";",["T_WHITESPACE"," ",57],["T_CLOSE_TAG","?>",57],["T_INLINE_HTML","\/>\n                    &nbsp;<label for=\"address_item_shipping",57],["T_OPEN_TAG","<?php ",58],["T_ECHO","echo",58],["T_WHITESPACE"," ",58],["T_VARIABLE","$_address",58],["T_OBJECT_OPERATOR","->",58],["T_STRING","getId",58],"(",")",["T_WHITESPACE"," ",58],["T_CLOSE_TAG","?>",58],["T_INLINE_HTML","\">",58],["T_OPEN_TAG","<?php ",58],["T_ECHO","echo",58],["T_WHITESPACE"," ",58],["T_STRING","Mage",58],["T_DOUBLE_COLON","::",58],["T_STRING","helper",58],"(",["T_CONSTANT_ENCAPSED_STRING","'customer'",58],")",["T_OBJECT_OPERATOR","->",58],["T_STRING","__",58],"(",["T_CONSTANT_ENCAPSED_STRING","'Default Shipping Address'",58],")",["T_WHITESPACE"," ",58],["T_CLOSE_TAG","?>",58],["T_INLINE_HTML","<\/label>\n                <\/span>\n            <\/div>\n        <\/li>\n        ",58],["T_OPEN_TAG","<?php ",62],["T_ENDFOREACH","endforeach",62],";",["T_WHITESPACE"," ",62],["T_CLOSE_TAG","?>\n",62],["T_INLINE_HTML","    ",63],["T_OPEN_TAG","<?php ",63],["T_ENDIF","endif",63],";",["T_WHITESPACE"," ",63],["T_CLOSE_TAG","?>\n",63],["T_INLINE_HTML","    <\/ul>\n<\/td>\n<td>\n    <!-- Template for adding address item to list -->\n    ",64],["T_OPEN_TAG","<?php ",68],["T_VARIABLE","$_templatePrefix",68],["T_WHITESPACE"," ",68],"=",["T_WHITESPACE"," ",68],["T_VARIABLE","$this",68],["T_OBJECT_OPERATOR","->",68],["T_STRING","getTemplatePrefix",68],"(",")",["T_WHITESPACE"," ",68],["T_CLOSE_TAG","?>\n",68],["T_INLINE_HTML","    <div id=\"address_item_template\" class=\"no-display template\">\n        ",69],["T_OPEN_TAG","<?php ",70],["T_IF","if",70],["T_WHITESPACE"," ",70],"(","!",["T_VARIABLE","$this",70],["T_OBJECT_OPERATOR","->",70],["T_STRING","isReadonly",70],"(",")",")",":",["T_WHITESPACE"," ",70],["T_CLOSE_TAG","?>\n",70],["T_INLINE_HTML","        <a href=\"#\" class=\"btn-remove-address\">\n            <img src=\"",71],["T_OPEN_TAG","<?php ",72],["T_ECHO","echo",72],["T_WHITESPACE"," ",72],["T_VARIABLE","$this",72],["T_OBJECT_OPERATOR","->",72],["T_STRING","getSkinUrl",72],"(",["T_CONSTANT_ENCAPSED_STRING","'images\/cancel_icon.gif'",72],")",["T_WHITESPACE"," ",72],["T_CLOSE_TAG","?>",72],["T_INLINE_HTML","\" alt=\"",72],["T_OPEN_TAG","<?php ",72],["T_ECHO","echo",72],["T_WHITESPACE"," ",72],["T_STRING","Mage",72],["T_DOUBLE_COLON","::",72],["T_STRING","helper",72],"(",["T_CONSTANT_ENCAPSED_STRING","'core'",72],")",["T_OBJECT_OPERATOR","->",72],["T_STRING","quoteEscape",72],"(",["T_STRING","Mage",72],["T_DOUBLE_COLON","::",72],["T_STRING","helper",72],"(",["T_CONSTANT_ENCAPSED_STRING","'customer'",72],")",["T_OBJECT_OPERATOR","->",72],["T_STRING","__",72],"(",["T_CONSTANT_ENCAPSED_STRING","'Remove address'",72],")",")",["T_WHITESPACE"," ",72],["T_CLOSE_TAG","?>",72],["T_INLINE_HTML","\" id=\"delete_button",72],["T_OPEN_TAG","<?php ",72],["T_ECHO","echo",72],["T_WHITESPACE"," ",72],["T_INC","++",72],["T_VARIABLE","$_iterator",72],["T_WHITESPACE"," ",72],["T_CLOSE_TAG","?>",72],["T_INLINE_HTML","\" \/>\n        <\/a>\n        <a href=\"#\" id=\"select_button_\" class=\"select_button btn-edit-address\">\n            <img src=\"",72],["T_OPEN_TAG","<?php ",75],["T_ECHO","echo",75],["T_WHITESPACE"," ",75],["T_VARIABLE","$this",75],["T_OBJECT_OPERATOR","->",75],["T_STRING","getSkinUrl",75],"(",["T_CONSTANT_ENCAPSED_STRING","'images\/edit_icon.gif'",75],")",["T_WHITESPACE"," ",75],["T_CLOSE_TAG","?>",75],["T_INLINE_HTML","\" alt=\"",75],["T_OPEN_TAG","<?php ",75],["T_ECHO","echo",75],["T_WHITESPACE"," ",75],["T_STRING","Mage",75],["T_DOUBLE_COLON","::",75],["T_STRING","helper",75],"(",["T_CONSTANT_ENCAPSED_STRING","'core'",75],")",["T_OBJECT_OPERATOR","->",75],["T_STRING","quoteEscape",75],"(",["T_STRING","Mage",75],["T_DOUBLE_COLON","::",75],["T_STRING","helper",75],"(",["T_CONSTANT_ENCAPSED_STRING","'customer'",75],")",["T_OBJECT_OPERATOR","->",75],["T_STRING","__",75],"(",["T_CONSTANT_ENCAPSED_STRING","'Edit address'",75],")",")",["T_WHITESPACE"," ",75],["T_CLOSE_TAG","?>",75],["T_INLINE_HTML","\"\/>\n        <\/a>\n        ",75],["T_OPEN_TAG","<?php ",77],["T_ENDIF","endif",77],";",["T_CLOSE_TAG","?>\n",77],["T_INLINE_HTML","        <address>",78],["T_OPEN_TAG","<?php ",78],["T_ECHO","echo",78],["T_WHITESPACE"," ",78],["T_STRING","Mage",78],["T_DOUBLE_COLON","::",78],["T_STRING","helper",78],"(",["T_CONSTANT_ENCAPSED_STRING","'customer'",78],")",["T_OBJECT_OPERATOR","->",78],["T_STRING","__",78],"(",["T_CONSTANT_ENCAPSED_STRING","'New Customer Address'",78],")",["T_WHITESPACE"," ",78],["T_CLOSE_TAG","?>",78],["T_INLINE_HTML","<\/address>\n        <div class=\"address-type\">\n            <span class=\"address-type-line\">\n                <input  ",78],["T_OPEN_TAG","<?php ",81],["T_IF","if",81],["T_WHITESPACE"," ",81],"(",["T_VARIABLE","$this",81],["T_OBJECT_OPERATOR","->",81],["T_STRING","isReadonly",81],"(",")",")",":",["T_CLOSE_TAG","?>",81],["T_INLINE_HTML"," disabled=\"disabled\"",81],["T_OPEN_TAG","<?php ",81],["T_ENDIF","endif",81],";",["T_CLOSE_TAG","?>",81],["T_INLINE_HTML"," type=\"radio\" value=\"",81],["T_OPEN_TAG","<?php ",81],["T_ECHO","echo",81],["T_WHITESPACE"," ",81],["T_VARIABLE","$_templatePrefix",81],["T_WHITESPACE"," ",81],["T_CLOSE_TAG","?>",81],["T_INLINE_HTML","\" id=\"address_item_billing",81],["T_OPEN_TAG","<?php ",81],["T_ECHO","echo",81],["T_WHITESPACE"," ",81],["T_VARIABLE","$_templatePrefix",81],["T_WHITESPACE"," ",81],["T_CLOSE_TAG","?>",81],["T_INLINE_HTML","\" name=\"account[default_billing]\" title=\"",81],["T_OPEN_TAG","<?php ",81],["T_ECHO","echo",81],["T_WHITESPACE"," ",81],["T_STRING","Mage",81],["T_DOUBLE_COLON","::",81],["T_STRING","helper",81],"(",["T_CONSTANT_ENCAPSED_STRING","'core'",81],")",["T_OBJECT_OPERATOR","->",81],["T_STRING","quoteEscape",81],"(",["T_STRING","Mage",81],["T_DOUBLE_COLON","::",81],["T_STRING","helper",81],"(",["T_CONSTANT_ENCAPSED_STRING","'customer'",81],")",["T_OBJECT_OPERATOR","->",81],["T_STRING","__",81],"(",["T_CONSTANT_ENCAPSED_STRING","'Set as Default Billing Address'",81],")",")",["T_WHITESPACE"," ",81],["T_CLOSE_TAG","?>",81],["T_INLINE_HTML","\"\/>\n                &nbsp;<label for=\"address_item_billing",81],["T_OPEN_TAG","<?php ",82],["T_ECHO","echo",82],["T_WHITESPACE"," ",82],["T_VARIABLE","$_templatePrefix",82],["T_WHITESPACE"," ",82],["T_CLOSE_TAG","?>",82],["T_INLINE_HTML","\">",82],["T_OPEN_TAG","<?php ",82],["T_ECHO","echo",82],["T_WHITESPACE"," ",82],["T_STRING","Mage",82],["T_DOUBLE_COLON","::",82],["T_STRING","helper",82],"(",["T_CONSTANT_ENCAPSED_STRING","'customer'",82],")",["T_OBJECT_OPERATOR","->",82],["T_STRING","__",82],"(",["T_CONSTANT_ENCAPSED_STRING","'Default Billing Address'",82],")",["T_WHITESPACE"," ",82],["T_CLOSE_TAG","?>",82],["T_INLINE_HTML","<\/label>\n            <\/span>\n            <span class=\"address-type-line\">\n                <input  ",82],["T_OPEN_TAG","<?php ",85],["T_IF","if",85],["T_WHITESPACE"," ",85],"(",["T_VARIABLE","$this",85],["T_OBJECT_OPERATOR","->",85],["T_STRING","isReadonly",85],"(",")",")",":",["T_CLOSE_TAG","?>",85],["T_INLINE_HTML"," disabled=\"disabled\"",85],["T_OPEN_TAG","<?php ",85],["T_ENDIF","endif",85],";",["T_CLOSE_TAG","?>",85],["T_INLINE_HTML"," type=\"radio\" value=\"",85],["T_OPEN_TAG","<?php ",85],["T_ECHO","echo",85],["T_WHITESPACE"," ",85],["T_VARIABLE","$_templatePrefix",85],["T_WHITESPACE"," ",85],["T_CLOSE_TAG","?>",85],["T_INLINE_HTML","\" id=\"address_item_shipping",85],["T_OPEN_TAG","<?php ",85],["T_ECHO","echo",85],["T_WHITESPACE"," ",85],["T_VARIABLE","$_templatePrefix",85],["T_WHITESPACE"," ",85],["T_CLOSE_TAG","?>",85],["T_INLINE_HTML","\" name=\"account[default_shipping]\" title=\"",85],["T_OPEN_TAG","<?php ",85],["T_ECHO","echo",85],["T_WHITESPACE"," ",85],["T_STRING","Mage",85],["T_DOUBLE_COLON","::",85],["T_STRING","helper",85],"(",["T_CONSTANT_ENCAPSED_STRING","'core'",85],")",["T_OBJECT_OPERATOR","->",85],["T_STRING","quoteEscape",85],"(",["T_STRING","Mage",85],["T_DOUBLE_COLON","::",85],["T_STRING","helper",85],"(",["T_CONSTANT_ENCAPSED_STRING","'customer'",85],")",["T_OBJECT_OPERATOR","->",85],["T_STRING","__",85],"(",["T_CONSTANT_ENCAPSED_STRING","'Set as Default Shipping Address'",85],")",")",["T_WHITESPACE"," ",85],["T_CLOSE_TAG","?>",85],["T_INLINE_HTML","\"\/>\n                &nbsp;<label for=\"address_item_shipping",85],["T_OPEN_TAG","<?php ",86],["T_ECHO","echo",86],["T_WHITESPACE"," ",86],["T_VARIABLE","$_templatePrefix",86],["T_WHITESPACE"," ",86],["T_CLOSE_TAG","?>",86],["T_INLINE_HTML","\">",86],["T_OPEN_TAG","<?php ",86],["T_ECHO","echo",86],["T_WHITESPACE"," ",86],["T_STRING","Mage",86],["T_DOUBLE_COLON","::",86],["T_STRING","helper",86],"(",["T_CONSTANT_ENCAPSED_STRING","'customer'",86],")",["T_OBJECT_OPERATOR","->",86],["T_STRING","__",86],"(",["T_CONSTANT_ENCAPSED_STRING","'Default Shipping Address'",86],")",["T_WHITESPACE"," ",86],["T_CLOSE_TAG","?>",86],["T_INLINE_HTML","<\/label>\n            <\/span>\n        <\/div>\n    <\/div>\n\n    <!-- Address form template -->\n    <div id=\"address_form_template\" class=\"no-display template\">\n    ",86],["T_OPEN_TAG","<?php\n",93],["T_WHITESPACE","        ",94],["T_COMMENT","\/\/ Set form template elements prefix\n",94],["T_WHITESPACE","        ",95],["T_VARIABLE","$this",95],["T_OBJECT_OPERATOR","->",95],["T_STRING","getForm",95],"(",")",["T_OBJECT_OPERATOR","->",95],["T_STRING","setHtmlIdPrefix",95],"(",["T_VARIABLE","$_templatePrefix",95],")",["T_WHITESPACE","\n                ",95],["T_OBJECT_OPERATOR","->",96],["T_STRING","setFieldNameSuffix",96],"(",["T_CONSTANT_ENCAPSED_STRING","'address['",96],".",["T_VARIABLE","$_templatePrefix",96],".",["T_CONSTANT_ENCAPSED_STRING","']'",96],")",";",["T_WHITESPACE","\n    ",96],["T_CLOSE_TAG","?>\n",97],["T_INLINE_HTML","    ",98],["T_OPEN_TAG","<?php ",98],["T_ECHO","echo",98],["T_WHITESPACE"," ",98],["T_VARIABLE","$this",98],["T_OBJECT_OPERATOR","->",98],["T_STRING","getForm",98],"(",")",["T_OBJECT_OPERATOR","->",98],["T_STRING","getHtml",98],"(",")",["T_WHITESPACE"," ",98],["T_CLOSE_TAG","?>\n",98],["T_INLINE_HTML","    ",99],["T_OPEN_TAG","<?php ",99],["T_ECHO","echo",99],["T_WHITESPACE"," ",99],["T_VARIABLE","$this",99],["T_OBJECT_OPERATOR","->",99],["T_STRING","getCancelButtonHtml",99],"(",")",["T_WHITESPACE"," ",99],["T_CLOSE_TAG","?>\n",99],["T_INLINE_HTML","    <\/div>\n<!-- -->\n\n<!-- Addresses forms -->\n    <div class=\"entry-edit\" id=\"address_form_container\">\n        ",100],["T_OPEN_TAG","<?php ",105],["T_IF","if",105],"(",["T_STRING","count",105],"(",["T_VARIABLE","$addressCollection",105],")",")",":",["T_WHITESPACE"," ",105],["T_CLOSE_TAG","?>\n",105],["T_INLINE_HTML","            ",106],["T_OPEN_TAG","<?php ",106],["T_FOREACH","foreach",106],["T_WHITESPACE"," ",106],"(",["T_VARIABLE","$addressCollection",106],["T_WHITESPACE"," ",106],["T_AS","as",106],["T_WHITESPACE"," ",106],["T_VARIABLE","$_address",106],")",":",["T_WHITESPACE"," ",106],["T_CLOSE_TAG","?>\n",106],["T_INLINE_HTML","            <div id=\"form_address_item_",107],["T_OPEN_TAG","<?php ",107],["T_ECHO","echo",107],["T_WHITESPACE"," ",107],["T_VARIABLE","$_address",107],["T_OBJECT_OPERATOR","->",107],["T_STRING","getId",107],"(",")",["T_WHITESPACE"," ",107],["T_CLOSE_TAG","?>",107],["T_INLINE_HTML","\" style=\"display:none\">\n            ",107],["T_OPEN_TAG","<?php\n",108],["T_WHITESPACE","                    ",109],["T_VARIABLE","$this",109],["T_OBJECT_OPERATOR","->",109],["T_STRING","getForm",109],"(",")",["T_OBJECT_OPERATOR","->",109],["T_STRING","addValues",109],"(",["T_VARIABLE","$_address",109],["T_OBJECT_OPERATOR","->",109],["T_STRING","getData",109],"(",")",")",["T_WHITESPACE","\n                            ",109],["T_OBJECT_OPERATOR","->",110],["T_STRING","setHtmlIdPrefix",110],"(","\"",["T_ENCAPSED_AND_WHITESPACE","_item",110],["T_CURLY_OPEN","{",110],["T_VARIABLE","$_address",110],["T_OBJECT_OPERATOR","->",110],["T_STRING","getId",110],"(",")","}","\"",")",["T_WHITESPACE","\n                            ",110],["T_OBJECT_OPERATOR","->",111],["T_STRING","setFieldNameSuffix",111],"(",["T_CONSTANT_ENCAPSED_STRING","'address['",111],".",["T_VARIABLE","$_address",111],["T_OBJECT_OPERATOR","->",111],["T_STRING","getId",111],"(",")",".",["T_CONSTANT_ENCAPSED_STRING","']'",111],")",";",["T_WHITESPACE","\n                    ",111],["T_VARIABLE","$this",112],["T_OBJECT_OPERATOR","->",112],["T_STRING","addValuesToNamePrefixElement",112],"(",["T_VARIABLE","$_address",112],["T_OBJECT_OPERATOR","->",112],["T_STRING","getPrefix",112],"(",")",")",["T_WHITESPACE","\n                        ",112],["T_OBJECT_OPERATOR","->",113],["T_STRING","addValuesToNameSuffixElement",113],"(",["T_VARIABLE","$_address",113],["T_OBJECT_OPERATOR","->",113],["T_STRING","getSuffix",113],"(",")",")",";",["T_WHITESPACE","\n            ",113],["T_CLOSE_TAG","?>\n",114],["T_INLINE_HTML","            ",115],["T_OPEN_TAG","<?php ",115],["T_ECHO","echo",115],["T_WHITESPACE"," ",115],["T_VARIABLE","$this",115],["T_OBJECT_OPERATOR","->",115],["T_STRING","getForm",115],"(",")",["T_OBJECT_OPERATOR","->",115],["T_STRING","getHtml",115],"(",")",["T_WHITESPACE"," ",115],["T_CLOSE_TAG","?>\n",115],["T_INLINE_HTML","            <input type=\"hidden\" name=\"address[",116],["T_OPEN_TAG","<?php ",116],["T_ECHO","echo",116],["T_WHITESPACE"," ",116],["T_VARIABLE","$_address",116],["T_OBJECT_OPERATOR","->",116],["T_STRING","getId",116],"(",")",["T_WHITESPACE"," ",116],["T_CLOSE_TAG","?>",116],["T_INLINE_HTML","][_deleted]\" id=\"deleted_address_item_",116],["T_OPEN_TAG","<?php ",116],["T_ECHO","echo",116],["T_WHITESPACE"," ",116],["T_VARIABLE","$_address",116],["T_OBJECT_OPERATOR","->",116],["T_STRING","getId",116],"(",")",["T_WHITESPACE"," ",116],["T_CLOSE_TAG","?>",116],["T_INLINE_HTML","\" \/>\n            <\/div>\n            ",116],["T_OPEN_TAG","<?php ",118],["T_ENDFOREACH","endforeach",118],";",["T_WHITESPACE"," ",118],["T_CLOSE_TAG","?>\n",118],["T_INLINE_HTML","        ",119],["T_OPEN_TAG","<?php ",119],["T_ELSE","else",119],":",["T_WHITESPACE"," ",119],["T_CLOSE_TAG","?>\n",119],["T_INLINE_HTML","            <div id=\"no_address_message\">",120],["T_OPEN_TAG","<?php ",120],["T_ECHO","echo",120],["T_WHITESPACE"," ",120],["T_STRING","Mage",120],["T_DOUBLE_COLON","::",120],["T_STRING","helper",120],"(",["T_CONSTANT_ENCAPSED_STRING","'customer'",120],")",["T_OBJECT_OPERATOR","->",120],["T_STRING","__",120],"(",["T_CONSTANT_ENCAPSED_STRING","'This customer has no saved addresses.'",120],")",["T_WHITESPACE"," ",120],["T_CLOSE_TAG","?>",120],["T_INLINE_HTML","<\/div>\n        ",120],["T_OPEN_TAG","<?php ",121],["T_ENDIF","endif",121],";",["T_WHITESPACE"," ",121],["T_CLOSE_TAG","?>\n",121],["T_INLINE_HTML","    <\/div>\n\n<script type=\"text\/javascript\">\n\/\/<![CDATA[\nvar deleteButtonId = ",122],["T_OPEN_TAG","<?php ",126],["T_ECHO","echo",126],["T_WHITESPACE"," ",126],["T_VARIABLE","$_iterator",126],["T_WHITESPACE"," ",126],["T_CLOSE_TAG","?>",126],["T_INLINE_HTML",";\n\nvar addressesModel = Class.create();\naddressesModel.prototype = {\n    initialize : function() {\n        this.activeItem   = null;\n        this.itemTemplate = $('address_item_template');\n        this.formTemplate = $('address_form_template');\n        this.itemContainer= $('address_list');\n        this.formContainer= $('address_form_container');\n        this.baseItemId   = 'new_item';\n\n        this.defaultCountries = ",126],["T_OPEN_TAG","<?php ",138],["T_ECHO","echo",138],["T_WHITESPACE"," ",138],["T_VARIABLE","$this",138],["T_OBJECT_OPERATOR","->",138],["T_STRING","getDefaultCountriesJson",138],"(",")",";",["T_WHITESPACE"," ",138],["T_CLOSE_TAG","?>",138],["T_INLINE_HTML",";\n        this.itemContentTemplate = new Template('",138],["T_OPEN_TAG","<?php ",139],["T_ECHO","echo",139],["T_WHITESPACE"," ",139],["T_VARIABLE","$this",139],["T_OBJECT_OPERATOR","->",139],["T_STRING","helper",139],"(",["T_CONSTANT_ENCAPSED_STRING","'customer\/address'",139],")",["T_OBJECT_OPERATOR","->",139],["T_STRING","getFormat",139],"(",["T_CONSTANT_ENCAPSED_STRING","'js_template'",139],")",["T_CLOSE_TAG","?>",139],["T_INLINE_HTML","');\n\n        this.onNewAddressClick  = this.addNewAddress.bindAsEventListener(this);\n        this.onItemMouseOver    = this.itemMouseOver.bindAsEventListener(this);\n        this.onItemMouseOut     = this.itemMouseOut.bindAsEventListener(this);\n        this.onItemMouseClick   = this.itemMouseClick.bindAsEventListener(this);\n        this.onItemFormFieldChange = this.syncFormData.bindAsEventListener(this);\n\n        this.loader = new varienLoader(true);\n        this.regionsUrl = '",139],["T_OPEN_TAG","<?php ",148],["T_ECHO","echo",148],["T_WHITESPACE"," ",148],["T_VARIABLE","$this",148],["T_OBJECT_OPERATOR","->",148],["T_STRING","getRegionsUrl",148],"(",")",["T_WHITESPACE"," ",148],["T_CLOSE_TAG","?>",148],["T_INLINE_HTML","';\n        this.requiredStateForCountries = ",148],["T_OPEN_TAG","<?php ",149],["T_ECHO","echo",149],["T_WHITESPACE"," ",149],["T_VARIABLE","$this",149],["T_OBJECT_OPERATOR","->",149],["T_STRING","helper",149],"(",["T_CONSTANT_ENCAPSED_STRING","'directory'",149],")",["T_OBJECT_OPERATOR","->",149],["T_STRING","getCountriesWithStatesRequired",149],"(",["T_STRING","true",149],")",["T_WHITESPACE"," ",149],["T_CLOSE_TAG","?>",149],["T_INLINE_HTML",";\n        this.showAllRegions = ",149],["T_OPEN_TAG","<?php ",150],["T_ECHO","echo",150],["T_WHITESPACE"," ",150],["T_STRING_CAST","(string)",150],["T_VARIABLE","$this",150],["T_OBJECT_OPERATOR","->",150],["T_STRING","helper",150],"(",["T_CONSTANT_ENCAPSED_STRING","'directory'",150],")",["T_OBJECT_OPERATOR","->",150],["T_STRING","getShowNonRequiredState",150],"(",")",["T_WHITESPACE"," ",150],"?",["T_WHITESPACE"," ",150],["T_LNUMBER","1",150],["T_WHITESPACE"," ",150],":",["T_WHITESPACE"," ",150],["T_LNUMBER","0",150],";",["T_WHITESPACE"," ",150],["T_CLOSE_TAG","?>",150],["T_INLINE_HTML",";\n\n        this.reloadItemList(1);\n\n        for(var i=0,n=this.itemList.length; i<n; i++){\n            if(this.itemList[i].id){\n                this.addItemObservers(this.itemList[i]);\n                this.initItem(this.itemList[i]);\n            }\n        }\n        if($('add_new_address_button')){\n            Event.observe('add_new_address_button', 'click', this.onNewAddressClick)\n        }\n\n        this.setActiveItem(this.itemList[0]);\n        this.setAddressAsDefault();\n        this.bindCountryRegionRelation();\n    },\n\n    reloadItemList : function(initial){\n        this.itemList = $$('#address_list li');\n        if( initial ) {\n            this.itemCount = this.itemList.length;\n        }\n        if(!this.itemList.length){\n            if($('no_address_message')){\n                $('no_address_message').show();\n            }\n            else {\n                this.formContainer.innerHTML+= '<div id=\"no_address_message\">",150],["T_OPEN_TAG","<?php ",179],["T_ECHO","echo",179],["T_WHITESPACE"," ",179],["T_STRING","Mage",179],["T_DOUBLE_COLON","::",179],["T_STRING","helper",179],"(",["T_CONSTANT_ENCAPSED_STRING","'core'",179],")",["T_OBJECT_OPERATOR","->",179],["T_STRING","jsQuoteEscape",179],"(",["T_STRING","Mage",179],["T_DOUBLE_COLON","::",179],["T_STRING","helper",179],"(",["T_CONSTANT_ENCAPSED_STRING","'customer'",179],")",["T_OBJECT_OPERATOR","->",179],["T_STRING","__",179],"(",["T_CONSTANT_ENCAPSED_STRING","'This customer has no saved addresses.'",179],")",")",["T_WHITESPACE"," ",179],["T_CLOSE_TAG","?>",179],["T_INLINE_HTML","<\/div>'\n            }\n        }\n    },\n\n    initItem : function(item){\n        if(item && $('form_'+item.id)){\n            item.formBlock = $('form_'+item.id);\n            Element.hide($('form_'+item.id));\n            $('form_'+item.id).statusBar = item;\n            $('form_'+item.id).addressItem = item;\n\n            \/\/ set Zip optional\/required\n            var countryElement = $('_item' + item.id.replace(\/address_item_\/, '').replace(new RegExp(this.baseItemId), '') + 'country_id');\n            varienGlobalEvents.fireEvent(\"address_country_changed\", countryElement);\n        }\n    },\n\n    addItemObservers : function(item){\n        if(item.id){\n            Event.observe(item, 'mouseover', this.onItemMouseOver);\n            Event.observe(item, 'mouseout', this.onItemMouseOut);\n            Event.observe(item, 'click', this.onItemMouseClick);\n        }\n    },\n\n    addNewAddress : function(event){\n        if(this.canCreateNewAddress){\n            this.itemCount++;\n            if($('no_address_message')){\n                $('no_address_message').hide();\n            }\n            \/\/ preventing duplication of ids for fields and blocks\n            while ($$(\"div[id='form_address_item_\" + this.itemCount + \"']\").length) {\n                this.itemCount++;\n            }\n            \/\/ create new form elements\n            Element.insert(this.formContainer, {bottom:\n                '<div id=\"' + 'form_' + this.baseItemId + this.itemCount + '\">'\n                + this.prepareTemplate(this.formTemplate.innerHTML)\n                + '<\/div>'\n            });\n\n            var newForm = $('form_' + this.baseItemId + this.itemCount);\n\n            $('_item'+this.itemCount+'firstname').value = $('_accountfirstname').value;\n            $('_item'+this.itemCount+'lastname').value = $('_accountlastname').value;\n\n            if ($('_accountwebsite_id').value !== '' && undefined !== this.defaultCountries[$('_accountwebsite_id').value]) {\n                $('_item'+this.itemCount+'country_id').value = this.defaultCountries[$('_accountwebsite_id').value];\n            }\n\n            Element.hide(newForm);\n            var template = '<li id=\"' + this.baseItemId+this.itemCount + '\">';\n            deleteButtonId ++;\n            template    += this.prepareTemplate(this.itemTemplate.innerHTML).replace('delete_button', 'delete_button'+ deleteButtonId);\n            template    += '<\/li>';\n            Element.insert(this.itemContainer, {bottom: template});\n            var newItem = $(this.baseItemId+this.itemCount);\n            newItem.isNewAddress = true;\n            newItem.formBlock = newForm;\n\n\n            newForm.statusBar = newItem;\n            newForm.addressItem = newItem;\n\n            \/\/ set Zip optional\/required\n            var countryElement = $('_item' + newItem.id.replace(\/address_item_\/, '').replace(new RegExp(this.baseItemId), '') + 'country_id');\n            varienGlobalEvents.fireEvent(\"address_country_changed\", countryElement);\n\n            this.addItemObservers(newItem);\n            this.setActiveItem(newItem);\n            this.bindCountryRegionRelation(newForm.id);\n\n            if( $('_item'+this.itemCount+'firstname').value ) this.syncFormData($('_item'+this.itemCount+'firstname'));\n            if( $('_item'+this.itemCount+'lastname').value ) this.syncFormData($('_item'+this.itemCount+'lastname'));\n        }\n        this.reloadItemList();\n        \/\/Event.stop(event);\n    },\n\n    prepareTemplate : function(template){\n        return template\n            .replace(\/",179],["T_OPEN_TAG","<?php ",262],["T_ECHO","echo",262],["T_WHITESPACE"," ",262],["T_VARIABLE","$_templatePrefix",262],["T_WHITESPACE"," ",262],["T_CLOSE_TAG","?>",262],["T_INLINE_HTML","\/g, '_item'+this.itemCount)\n            .replace(\/_counted=\"undefined\"\/g, '')\n            .replace(\/\"select_button_\"\/g, 'select_button_' + this.itemCount)\n            ;\n    },\n\n    canCreateNewAddress : function(){\n        return true;\n    },\n\n    itemMouseOver : function(event){\n        var element = Event.findElement(event, 'li');\n        Element.addClassName(element, 'over');\n    },\n\n    itemMouseOut : function(event){\n        var element = Event.findElement(event, 'li');\n        Element.removeClassName(element, 'over');\n    },\n\n    itemMouseClick : function(event){\n        if (!Event) {\n            return;\n        }\n        var element = Event.findElement(event, 'li'); \/\/ find top item\n        var elem = Event.element(event); \/\/ exact element clicked\n\n        if ( ((elem.tagName.toUpperCase() == 'A') && elem.id.match(\/^delete_button([0-9]*?)$\/)) || ((elem.tagName.toUpperCase() == 'IMG') && elem.id.match(\/^delete_button([0-9]*?)$\/)) ) {\n            this.deleteAddress(element);\n            Event.stop(event);\n        }\n        else if(elem.tagName.toUpperCase() == 'INPUT') {\n            this.setAddressAsDefault(element);\n        }\n        else {\n            this.setActiveItem(element);\n        }\n    },\n\n     setAddressAsDefault : function(){\n        for(var i=0; i<this.itemList.length;i++){\n            if(this.itemList[i].id){\n                var inputs = $(this.itemList[i].id).getElementsBySelector('input');\n                var isActive = false;\n                for(var j in inputs){\n                    if(inputs[j].type=='radio' && inputs[j].checked && this.itemList.length > 1){\n                        isActive = true;\n                    }\n                }\n                this.toggleDeleteButton(this.itemList[i], !isActive);\n            }\n        }\n    },\n\n    toggleDeleteButton : function(item, flag){\n        if(flag){\n            $(item).select('.btn-remove-address').each(Element.show);\n            $(item.formBlock).getElementsBySelector('.delete-address').each(Element.show);\n        } else {\n            $(item).select('.btn-remove-address').each(Element.hide);\n            $(item.formBlock).getElementsBySelector('.delete-address').each(Element.hide);\n        }\n    },\n\n    setActiveItem : function(item){\n        if(this.activeItem){\n            Element.removeClassName(this.activeItem, 'on');\n            if($('form_'+this.activeItem.id)){\n                Element.hide($('form_'+this.activeItem.id));\n            }\n        }\n        Element.addClassName(item, 'on');\n\n        if(item && $('form_'+item.id)){\n            $('form_'+item.id).changeRelation = item;\n            $('form_'+item.id).addressItem = item;\n            Element.show($('form_'+item.id));\n            \/\/new Effect.Appear($('form_'+item.id), {duration : 0.3 });\n            \/\/$('form_'+item.id).focus();\n            this.addFieldChangeObserver($('form_'+item.id));\n            var regionIdElement = $('_item' + item.id.replace(\/address_item_\/, '').replace(new RegExp(this.baseItemId), '') + 'region_id');\n            var regionElement = $('_item' + item.id.replace(\/address_item_\/, '').replace(new RegExp(this.baseItemId), '') + 'region');\n            this.countryEl = $('_item' + item.id.replace(\/address_item_\/, '').replace(new RegExp(this.baseItemId), '') + 'country_id');\n            if (regionIdElement && regionElement) {\n                var actualId = regionElement.id;\n                if (('select' == regionIdElement.tagName.toLowerCase()) && regionIdElement) {\n                    actualId = regionIdElement.id;\n                }\n                this._checkRegionRequired([regionIdElement, regionElement], actualId);\n            }\n        }\n\n        this.activeItem = item;\n    },\n\n    getFormContainerFields : function(container){\n        var fields = $$( '#' + container.id + ' input','#' + container.id + ' select','#' + container.id + ' textarea');\n        return fields;\n    },\n\n    addFieldChangeObserver : function(container){\n        var fields = this.getFormContainerFields(container);\n        for (var i = 0; i < fields.length; i++) {\n            Event.observe(fields[i], 'change', this.onItemFormFieldChange);\n        }\n\n    },\n\n    syncFormData : function(evt){\n        var container = false;\n\n        if(!evt.addClassName) {\n            var elm = Event.element(evt);\n        } else {\n            var elm = evt;\n        }\n\n        elm = $(elm);\n        while(elm.tagName.toUpperCase() != 'BODY') {\n            if(elm.addressItem){\n                container = elm;\n            }\n            elm = $(elm.parentNode);\n        }\n\n        if(container){\n            var data = {};\n            var fields = this.getFormContainerFields(container);\n            for(var i=0; i < fields.size(); i++){\n                if(fields[i].id){\n                    var id = fields[i].id.replace(\/^(_item)?[0-9]+\/, '');\n                    var id = id.replace(\/^(id)?[0-9]+\/, '');\n                    var value = fields[i].getValue();\n                    var tagName = fields[i].tagName.toLowerCase();\n                    if (tagName == 'select') {\n                        if (fields[i].multiple) {\n                            var values = $([]);\n                            var l = fields[i].options.length;\n                            for (j=0; j<l; j++) {\n                                var o = fields[i].options[j];\n                                if (o.selected === true) {\n                                    values[values.length] = o.text.escapeHTML();\n                                }\n                            }\n                            data[id] = values.join(', ');\n                        } else {\n                            var option = fields[i].options[fields[i].selectedIndex],\n                                text   = option.value == '0' || option.value == '' ? '' : option.text;\n                            data[id] = text.escapeHTML();\n                        }\n                    } else if (value !== null) {\n                        data[id] = value.escapeHTML();\n                    }\n                }\n            }\n\n            \/\/ Set name of state to 'region' if list of states are in 'region_id' selectbox\n            if (!data['region'] && data['region_id']) {\n                data['region'] = data['region_id'];\n                delete data['region_id'];\n            }\n\n            \/\/ Set data to html\n            var itemContainer = container.addressItem.getElementsBySelector('address');\n            if(itemContainer[0]){\n                var html = this.itemContentTemplate.evaluate(data);\n                html = html.replace(new RegExp('(<br\\\\s*\/?>\\\\s*){2,}','img'),'<br\/>');\n                html = html.replace(new RegExp('<br\\\\s*\/?>(\\\\s*,){1,}\\\\s*<br\\\\s*\/?>','ig'),'<br\/>');\n                html = html.replace(new RegExp('<br\\\\s*\/?>(\\\\s*,){1,}(.*)<br\\\\s*\/?>','ig'),'<br\/>$2<br\/>');\n                html = html.replace(new RegExp('<br\\\\s*\/?>(.*?)(,\\\\s*){1,}<br\\\\s*\/?>','ig'),'<br\/>$1<br\/>');\n                html = html.replace(new RegExp('<br\\\\s*\/?>(.*?)(,\\\\s*){2,}(.*?)<br\\\\s*\/?>','ig'),'<br\/>$1, $3<br\/>');\n                html = html.replace(new RegExp('t:\\\\s*<br\\\\s*\/?>','ig'),'');\n                html = html.replace(new RegExp('f:\\\\s*<br\\\\s*\/?>','ig'),'');\n                html = html.replace(new RegExp('vat:\\\\s*$','ig'),'');\n                itemContainer[0].innerHTML = html;\n            }\n        }\n    },\n\n    deleteAddress : function(item){\n        if(confirm('",262],["T_OPEN_TAG","<?php ",442],["T_ECHO","echo",442],["T_WHITESPACE"," ",442],["T_STRING","Mage",442],["T_DOUBLE_COLON","::",442],["T_STRING","helper",442],"(",["T_CONSTANT_ENCAPSED_STRING","'core'",442],")",["T_OBJECT_OPERATOR","->",442],["T_STRING","jsQuoteEscape",442],"(",["T_STRING","Mage",442],["T_DOUBLE_COLON","::",442],["T_STRING","helper",442],"(",["T_CONSTANT_ENCAPSED_STRING","'customer'",442],")",["T_OBJECT_OPERATOR","->",442],["T_STRING","__",442],"(",["T_CONSTANT_ENCAPSED_STRING","'Are you sure you want to delete this address?'",442],")",")",["T_WHITESPACE"," ",442],["T_CLOSE_TAG","?>",442],["T_INLINE_HTML","')){\n            if (!item.isNewAddress && $('deleted_'+item.id)){\n                $('deleted_'+item.id).value = 1;\n                if (item.formBlock){\n                    item.formBlock.addClassName('ignore-validation');\n                }\n            }\n            if (this.activeItem == item && item != this.itemList[0]) this.setActiveItem(this.itemList[0]);\n            if (item == this.itemList[0] && (this.itemList[1])) this.setActiveItem(this.itemList[1]);\n\n            this.formContainer.removeChild(item.formBlock);\n            this.itemContainer.removeChild(item);\n            this.reloadItemList();\n            this.setAddressAsDefault();\n        }\n    },\n\n    cancelAdd : function(button){\n        if(confirm('",442],["T_OPEN_TAG","<?php ",460],["T_ECHO","echo",460],["T_WHITESPACE"," ",460],["T_STRING","Mage",460],["T_DOUBLE_COLON","::",460],["T_STRING","helper",460],"(",["T_CONSTANT_ENCAPSED_STRING","'core'",460],")",["T_OBJECT_OPERATOR","->",460],["T_STRING","jsQuoteEscape",460],"(",["T_STRING","Mage",460],["T_DOUBLE_COLON","::",460],["T_STRING","helper",460],"(",["T_CONSTANT_ENCAPSED_STRING","'customer'",460],")",["T_OBJECT_OPERATOR","->",460],["T_STRING","__",460],"(",["T_CONSTANT_ENCAPSED_STRING","'Are you sure you want to cancel adding of this address?'",460],")",")",["T_WHITESPACE"," ",460],["T_CLOSE_TAG","?>",460],["T_INLINE_HTML","')){\n            var item = $(this.baseItemId + button.id.replace(new RegExp('[a-z_]*',''), ''));\n\n            if( item.isNewAddress){\n                if ( this.activeItem == item ) this.formContainer.removeChild(item.formBlock);\n            }\n            if ( this.activeItem == item && item != this.itemList[0] ) this.setActiveItem(this.itemList[0]);\n            if ( item == this.itemList[0] && (this.itemList[1]) ) this.setActiveItem(this.itemList[1]);\n\n            this.itemContainer.removeChild(item);\n\n            this.reloadItemList();\n            this.setAddressAsDefault();\n        }\n    },\n\n    bindCountryRegionRelation : function(parentId){\n        \/\/alert('OK');\n        if(parentId){\n            var countryElements = $(parentId).getElementsByClassName('countries');\n        }\n        else{\n            var countryElements = $$('.countries');\n        }\n\n        for(var i=0;i<=countryElements.length;i++){\n            if(countryElements[i]){\n                if(!countryElements[i].bindRegions || !countryElements[i].parentBindId || countryElements[i].parentBindId!=parentId){\n                \/\/if(!countryElements[i].bindRegions || !countryElements[i].parentBindId){\n                    Event.observe(countryElements[i], 'change', this.reloadRegionField.bind(this));\n\n                    countryElements[i].bindRegions = true;\n                    countryElements[i].parentBindId = parentId;\n                }\n            }\n        }\n    },\n\n    reloadRegionField : function(event){\n        var countryElement = Event.element(event);\n        if(countryElement.id){\n            var regionElement  = $(countryElement.id.replace(\/country_id\/, 'region'));\n            if(regionElement){\n                this.regionElement = regionElement;\n                this.countryEl = countryElement;\n                if (countryElement.value) {\n                    var url = this.regionsUrl + 'parent\/' + countryElement.value;\n                    this.loader.load(url, {}, this.refreshRegionField.bind(this));\n                } else {\n                    \/\/ Set empty text field in region\n                    this.refreshRegionField('[]');\n                }\n            }\n            \/\/ set Zip optional\/required\n            varienGlobalEvents.fireEvent(\"address_country_changed\", countryElement);\n        }\n    },\n\n    \/\/ serverResponse is either string with server response, or object to force some paricular data setting\n    refreshRegionField : function(serverResponse){\n        if (!serverResponse)\n            return;\n        var data = eval('(' + serverResponse + ')');\n\n        var row = Element.previous(this.regionElement.parentNode,0);\n        var reqLabel = Element.select(row, '.required');\n\n        \/\/ Set regions and refresh controls\n        \/\/ We use a pair of 'region' and 'region_id' to properly submit data:\n        \/\/ manually entered text goes in 'region' and selected option id goes in 'region_id'\n        var regionHtmlName = this.regionElement.name;\n        var regionIdHtmlName = regionHtmlName.replace(\/region\/, 'region_id');\n        var regionHtmlId = this.regionElement.id;\n        var regionIdHtmlId = regionHtmlId.replace(\/region\/, 'region_id');\n        var newInputId = null; \/\/ id of imput that was added to a page - filled below\n\n        if (data.length) {\n            \/\/ Create visible selectbox 'region_id' and hidden 'region'\n            var html = '<select name=\"' + regionIdHtmlName + '\" id=\"' + regionIdHtmlId + '\" class=\"required-entry select\" title=\"' + this.regionElement.title + '\">';\n            for (var i in data){\n                if(data[i].label) {\n                    html+= '<option value=\"'+data[i].value+'\"';\n                    if(this.regionElement.value && (this.regionElement.value == data[i].value || this.regionElement.value == data[i].label)){\n                        html+= ' selected=\"selected\"';\n                    }\n                    html+='>'+data[i].label+'<\/option>';\n                }\n            }\n            html += '<\/select>';\n\n            html += '<input type=\"hidden\" name=\"' + regionHtmlName + '\" id=\"' + regionHtmlId + '\"\/>';\n\n            if (reqLabel) {\n                reqLabel.each(function(item){Element.show(item)});\n            }\n\n            newInputId = regionIdHtmlId;\n        } else {\n            \/\/ Create visible text input 'region' and hidden 'region_id'\n            var html = '<input type=\"text\" name=\"' + regionHtmlName + '\" id=\"' + regionHtmlId + '\" class=\"input-text\" title=\"' + this.regionElement.title + '\" \/>';\n            html += '<input type=\"hidden\" name=\"' + regionIdHtmlName + '\" id=\"' + regionIdHtmlId + '\"\/>';\n\n            if (reqLabel) {\n                reqLabel.each(function(item){Element.hide(item)});\n            }\n\n            newInputId = regionHtmlId;\n        }\n\n        var parentNode = this.regionElement.parentNode;\n        parentNode.innerHTML = html;\n        this.regionElement = $(regionHtmlId);\n\n        \/\/ Updating in address info\n        var newInput = $(newInputId);\n        Event.observe(newInput, 'change', this.onItemFormFieldChange); \/\/ Restore observing to update address info\n        this.syncFormData(newInput); \/\/ Update address info now\n        var activeElementId = regionHtmlId;\n        if (('select' == $(regionIdHtmlId).tagName.toLowerCase()) && regionIdHtmlId) {\n            activeElementId = regionIdHtmlId;\n        }\n        this._checkRegionRequired([$(regionHtmlId), $(regionIdHtmlId)], activeElementId);\n    },\n\n    _checkRegionRequired: function(elements, activeElementId)\n    {\n        var label, wildCard;\n        var that = this;\n        var regionRequired = this.requiredStateForCountries.indexOf(this.countryEl.value) >= 0;\n\n        elements.each(function(currentElement) {\n            Validation.reset(currentElement);\n            label = $$('label[for=\"' + currentElement.id + '\"]')[0];\n            if (label) {\n                wildCard = label.down('em') || label.down('span.required');\n                if (!that.showAllRegions) {\n                    if (regionRequired) {\n                        label.up('tr').show();\n                    } else {\n                        label.up('tr').hide();\n                    }\n                }\n            }\n\n            if (label && wildCard) {\n                if (!regionRequired) {\n                    wildCard.hide();\n                } else {\n                    wildCard.show();\n                }\n            }\n\n            if (!regionRequired) {\n                if (currentElement.hasClassName('required-entry')) {\n                    currentElement.removeClassName('required-entry');\n                }\n                if ('select' == currentElement.tagName.toLowerCase() &&\n                    currentElement.hasClassName('validate-select')\n                ) {\n                    currentElement.removeClassName('validate-select');\n                }\n            } else if (activeElementId == currentElement.id) {\n                if (!currentElement.hasClassName('required-entry')) {\n                    currentElement.addClassName('required-entry');\n                }\n                if ('select' == currentElement.tagName.toLowerCase() &&\n                    !currentElement.hasClassName('validate-select')\n                ) {\n                    currentElement.addClassName('validate-select');\n                }\n            }\n        });\n    }\n}\n\ncustomerAddresses = new addressesModel();\n\/\/]]>\n<\/script>\n<\/td>\n<\/tr>\n<\/table>\n",460]]
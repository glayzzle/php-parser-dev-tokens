[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Magento\n *\n * NOTICE OF LICENSE\n *\n * This source file is subject to the Academic Free License (AFL 3.0)\n * that is bundled with this package in the file LICENSE_AFL.txt.\n * It is also available through the world-wide-web at this URL:\n * http:\/\/opensource.org\/licenses\/afl-3.0.php\n * If you did not receive a copy of the license and are unable to\n * obtain it through the world-wide-web, please send an email\n * to license@magento.com so we can send you a copy immediately.\n *\n * DISCLAIMER\n *\n * Do not edit or add to this file if you wish to upgrade Magento to newer\n * versions in the future. If you wish to customize Magento for your\n * needs please refer to http:\/\/www.magento.com for more information.\n *\n * @category    design\n * @package     default_default\n * @copyright   Copyright (c) 2006-2016 X.commerce, Inc. and affiliates (http:\/\/www.magento.com)\n * @license     http:\/\/opensource.org\/licenses\/afl-3.0.php  Academic Free License (AFL 3.0)\n *\/",2],["T_WHITESPACE","\n",25],["T_CLOSE_TAG","?>\n",26],["T_INLINE_HTML","\n<div class=\"content-header\">\n        <h3 class=\"icon-head head-categories\">",27],["T_OPEN_TAG","<?php ",29],["T_ECHO","echo",29],["T_WHITESPACE"," ",29],["T_VARIABLE","$this",29],["T_OBJECT_OPERATOR","->",29],["T_STRING","escapeHtml",29],"(",["T_VARIABLE","$this",29],["T_OBJECT_OPERATOR","->",29],["T_STRING","getHeader",29],"(",")",")",["T_WHITESPACE"," ",29],".",["T_WHITESPACE"," ",29],"(",["T_VARIABLE","$this",29],["T_OBJECT_OPERATOR","->",29],["T_STRING","getCategoryId",29],"(",")",["T_WHITESPACE"," ",29],"?",["T_WHITESPACE"," ",29],["T_CONSTANT_ENCAPSED_STRING","' ('",29],["T_WHITESPACE"," ",29],".",["T_WHITESPACE"," ",29],["T_STRING","Mage",29],["T_DOUBLE_COLON","::",29],["T_STRING","helper",29],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog'",29],")",["T_OBJECT_OPERATOR","->",29],["T_STRING","__",29],"(",["T_CONSTANT_ENCAPSED_STRING","'ID: %s'",29],",",["T_WHITESPACE"," ",29],["T_VARIABLE","$this",29],["T_OBJECT_OPERATOR","->",29],["T_STRING","getCategoryId",29],"(",")",")",["T_WHITESPACE"," ",29],".",["T_WHITESPACE"," ",29],["T_CONSTANT_ENCAPSED_STRING","')'",29],["T_WHITESPACE"," ",29],":",["T_WHITESPACE"," ",29],["T_CONSTANT_ENCAPSED_STRING","''",29],")",["T_WHITESPACE"," ",29],["T_CLOSE_TAG","?>",29],["T_INLINE_HTML","<\/h3>\n        <p class=\"content-buttons form-buttons\">\n            ",29],["T_OPEN_TAG","<?php ",31],["T_ECHO","echo",31],["T_WHITESPACE"," ",31],["T_VARIABLE","$this",31],["T_OBJECT_OPERATOR","->",31],["T_STRING","getResetButtonHtml",31],"(",")",["T_WHITESPACE"," ",31],["T_CLOSE_TAG","?>\n",31],["T_INLINE_HTML","            ",32],["T_OPEN_TAG","<?php ",32],["T_IF","if",32],"(",["T_VARIABLE","$this",32],["T_OBJECT_OPERATOR","->",32],["T_STRING","getCategoryId",32],"(",")",")",":",["T_WHITESPACE"," ",32],["T_CLOSE_TAG","?>\n",32],["T_INLINE_HTML","                    ",33],["T_OPEN_TAG","<?php ",33],["T_ECHO","echo",33],["T_WHITESPACE"," ",33],["T_VARIABLE","$this",33],["T_OBJECT_OPERATOR","->",33],["T_STRING","getDeleteButtonHtml",33],"(",")",["T_WHITESPACE"," ",33],["T_CLOSE_TAG","?>\n",33],["T_INLINE_HTML","            ",34],["T_OPEN_TAG","<?php ",34],["T_ENDIF","endif",34],";",["T_WHITESPACE"," ",34],["T_CLOSE_TAG","?>\n",34],["T_INLINE_HTML","            ",35],["T_OPEN_TAG","<?php ",35],["T_ECHO","echo",35],["T_WHITESPACE"," ",35],["T_VARIABLE","$this",35],["T_OBJECT_OPERATOR","->",35],["T_STRING","getAdditionalButtonsHtml",35],"(",")",";",["T_WHITESPACE"," ",35],["T_CLOSE_TAG","?>\n",35],["T_INLINE_HTML","            ",36],["T_OPEN_TAG","<?php ",36],["T_ECHO","echo",36],["T_WHITESPACE"," ",36],["T_VARIABLE","$this",36],["T_OBJECT_OPERATOR","->",36],["T_STRING","getSaveButtonHtml",36],"(",")",["T_WHITESPACE"," ",36],["T_CLOSE_TAG","?>\n",36],["T_INLINE_HTML","        <\/p>\n<\/div>\n",37],["T_OPEN_TAG","<?php ",39],["T_IF","if",39],"(",["T_VARIABLE","$this",39],["T_OBJECT_OPERATOR","->",39],["T_STRING","hasStoreRootCategory",39],"(",")",")",":",["T_WHITESPACE"," ",39],["T_CLOSE_TAG","?>\n",39],["T_INLINE_HTML","    ",40],["T_OPEN_TAG","<?php ",40],["T_ECHO","echo",40],["T_WHITESPACE"," ",40],["T_VARIABLE","$this",40],["T_OBJECT_OPERATOR","->",40],["T_STRING","getTabsHtml",40],"(",")",["T_WHITESPACE"," ",40],["T_CLOSE_TAG","?>\n",40],["T_OPEN_TAG","<?php ",41],["T_ELSE","else",41],":",["T_WHITESPACE"," ",41],["T_CLOSE_TAG","?>\n",41],["T_INLINE_HTML","<div class=\"messages warning-msg\">\n    ",42],["T_OPEN_TAG","<?php ",43],["T_ECHO","echo",43],["T_WHITESPACE"," ",43],["T_STRING","Mage",43],["T_DOUBLE_COLON","::",43],["T_STRING","helper",43],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog'",43],")",["T_OBJECT_OPERATOR","->",43],["T_STRING","__",43],"(",["T_CONSTANT_ENCAPSED_STRING","'Set root category for this store in the <a href=\"%s\">configuration<\/a>'",43],",",["T_WHITESPACE"," ",43],["T_VARIABLE","$this",43],["T_OBJECT_OPERATOR","->",43],["T_STRING","getStoreConfigurationUrl",43],"(",")",")",["T_WHITESPACE"," ",43],["T_CLOSE_TAG","?>\n",43],["T_INLINE_HTML","<\/div>\n",44],["T_OPEN_TAG","<?php ",45],["T_ENDIF","endif",45],";",["T_WHITESPACE"," ",45],["T_CLOSE_TAG","?>\n",45],["T_INLINE_HTML","<iframe name=\"iframeSave\" style=\"display:none; width:100%;\" src=\"",46],["T_OPEN_TAG","<?php ",46],["T_ECHO","echo",46],["T_WHITESPACE"," ",46],["T_VARIABLE","$this",46],["T_OBJECT_OPERATOR","->",46],["T_STRING","getJsUrl",46],"(",")",["T_WHITESPACE"," ",46],["T_CLOSE_TAG","?>",46],["T_INLINE_HTML","blank.html\"><\/iframe>\n<form target=\"iframeSave\" id=\"category_edit_form\" action=\"",46],["T_OPEN_TAG","<?php ",47],["T_ECHO","echo",47],["T_WHITESPACE"," ",47],["T_VARIABLE","$this",47],["T_OBJECT_OPERATOR","->",47],["T_STRING","getSaveUrl",47],"(",")",["T_WHITESPACE"," ",47],["T_CLOSE_TAG","?>",47],["T_INLINE_HTML","\" method=\"post\" enctype=\"multipart\/form-data\">\n    <div class=\"no-display\">\n        <input type=\"hidden\" name=\"isIframe\" value=\"1\" \/>\n        <input name=\"form_key\" type=\"hidden\" value=\"",47],["T_OPEN_TAG","<?php ",50],["T_ECHO","echo",50],["T_WHITESPACE"," ",50],["T_VARIABLE","$this",50],["T_OBJECT_OPERATOR","->",50],["T_STRING","getFormKey",50],"(",")",["T_WHITESPACE"," ",50],["T_CLOSE_TAG","?>",50],["T_INLINE_HTML","\" \/>\n        <input type=\"hidden\" name=\"category_products\" id=\"in_category_products\" value=\"\" \/>\n        <input type=\"hidden\" name=\"active_tab_id\" id=\"active_tab_id\" value=\"\" \/>\n    <\/div>\n    <div id=\"category_tab_content\"><\/div>\n<\/form>\n<script type=\"text\/javascript\">\n\/\/<![CDATA[\n    categoryForm = new varienForm('category_edit_form');\n\n    categoryForm.submit= function (url) {\n        this.errorSections = $H({});\n        this.canShowError = true;\n        this.submitUrl = url;\n        if (this.validator && this.validator.validate()) {\n            if(this.validationUrl){\n                this._validate();\n            }\n            else{\n                if (this.isSubmitted) {\n                    return false;\n                }\n                this.isSubmitted = true;\n                this._submit();\n            }\n            displayLoadingMask();\n            return true;\n        }\n        return false;\n    };\n\n    categoryForm.refreshPath = function () {\n\n        categoryId = this.getCategoryId();\n\n        if (!categoryId) {\n            return false;\n        }\n\n        var refreshPathSuccess = function(transport) {\n            if (transport.responseText.isJSON()) {\n                response = transport.responseText.evalJSON()\n                if (response.error) {\n                    alert(response.message);\n                } else {\n                    if (categoryForm.getCategoryId() == response['id']) {\n                        categoryForm.setCategoryPath(response['path']);\n                    }\n                }\n            }\n        };\n\n        new Ajax.Request(\n                '",50],["T_OPEN_TAG","<?php ",103],["T_ECHO","echo",103],["T_WHITESPACE"," ",103],["T_VARIABLE","$this",103],["T_OBJECT_OPERATOR","->",103],["T_STRING","getRefreshPathUrl",103],"(",")",["T_WHITESPACE"," ",103],["T_CLOSE_TAG","?>",103],["T_INLINE_HTML","',\n                {\n                    method:     'POST',\n                    evalScripts: true,\n                    onSuccess: refreshPathSuccess\n                }\n        );\n\n    };\n\n    categoryForm.getCategoryId = function () {\n        collection = $(this.formId).getInputs('hidden','general[id]');\n        if (collection.size() > 0) {\n            return collection.first().value;\n        }\n        return false;\n    };\n\n    categoryForm.setCategoryPath = function (path) {\n        collection = $(this.formId).getInputs('hidden','general[path]');\n        if (collection.size() > 0) {\n            return collection.first().value = path;\n        }\n    };\n\n    \/**\n    * Create\/edit some category\n    *\/\n    function categorySubmit(url, useAjax) {\n        var activeTab = $('active_tab_id');\n        if (activeTab) {\n            if (activeTab.tabsJsObject && activeTab.tabsJsObject.activeTab) {\n                activeTab.value = activeTab.tabsJsObject.activeTab.id;\n            }\n        }\n\n        var params = {};\n        var fields = $('category_edit_form').getElementsBySelector('input', 'select');\n        for(var i=0;i<fields.length;i++){\n            if (!fields[i].name) {\n                continue;\n            }\n            params[fields[i].name] = fields[i].getValue();\n        }\n\n        \/\/ Get info about what we're submitting - to properly update tree nodes\n        var categoryId = params['general[id]'] ? params['general[id]'] : 0;\n        var isCreating = categoryId == 0; \/\/ Separate variable is needed because '0' in javascript converts to TRUE\n        var path = params['general[path]'].split('\/');\n        var parentId = path.pop();\n        if (parentId == categoryId) { \/\/ Maybe path includes category id itself\n            parentId = path.pop();\n        }\n\n        \/\/ Make operations with category tree\n        if (isCreating) {\n            \/* Some specific tasks for creating category *\/\n            if (!tree.currentNodeId) {\n                \/\/ First submit of form - select some node to be current\n                tree.currentNodeId = parentId;\n            }\n            tree.addNodeTo = parentId;\n        } else {\n            \/* Some specific tasks for editing category *\/\n            \/\/ Maybe change category enabled\/disabled style\n            if (tree && tree.storeId==0) {\n                var currentNode = tree.getNodeById(categoryId);\n\n                if (currentNode) {\n                    if (parseInt(params['general[is_active]'])) {\n                        var oldClass = 'no-active-category';\n                        var newClass = 'active-category';\n                    } else {\n                        var oldClass = 'active-category';\n                        var newClass = 'no-active-category';\n                    }\n\n                    Element.removeClassName(currentNode.ui.wrap.firstChild, oldClass);\n                    Element.addClassName(currentNode.ui.wrap.firstChild, newClass);\n                }\n            }\n        }\n\n        \/\/ Submit form\n        categoryForm.submit();\n    }\n\n",103],["T_OPEN_TAG","<?php ",190],["T_IF","if",190],"(","(",["T_VARIABLE","$block",190],["T_WHITESPACE"," ",190],"=",["T_WHITESPACE"," ",190],["T_VARIABLE","$this",190],["T_OBJECT_OPERATOR","->",190],["T_STRING","getLayout",190],"(",")",["T_OBJECT_OPERATOR","->",190],["T_STRING","getBlock",190],"(",["T_CONSTANT_ENCAPSED_STRING","'category.product.grid'",190],")",")",["T_WHITESPACE"," ",190],["T_BOOLEAN_AND","&&",190],["T_WHITESPACE"," ",190],"(",["T_VARIABLE","$_gridJsObject",190],"=",["T_VARIABLE","$block",190],["T_OBJECT_OPERATOR","->",190],["T_STRING","getJsObjectName",190],"(",")",")",")",":",["T_WHITESPACE"," ",190],["T_CLOSE_TAG","?>\n",190],["T_INLINE_HTML","\n    var categoryProducts = $H(",191],["T_OPEN_TAG","<?php ",192],["T_ECHO","echo",192],["T_WHITESPACE"," ",192],["T_VARIABLE","$this",192],["T_OBJECT_OPERATOR","->",192],["T_STRING","getProductsJson",192],"(",")",["T_WHITESPACE"," ",192],["T_CLOSE_TAG","?>",192],["T_INLINE_HTML",");\n    $('in_category_products').value = categoryProducts.toQueryString();\n\n    function registerCategoryProduct(grid, element, checked){\n        if(checked){\n            if(element.positionElement){\n                element.positionElement.disabled = false;\n                categoryProducts.set(element.value, element.positionElement.value);\n            }\n        }\n        else{\n            if(element.positionElement){\n                element.positionElement.disabled = true;\n            }\n            categoryProducts.unset(element.value);\n        }\n        $('in_category_products').value = categoryProducts.toQueryString();\n        grid.reloadParams = {'selected_products[]':categoryProducts.keys()};\n    }\n    function categoryProductRowClick(grid, event){\n        var trElement = Event.findElement(event, 'tr');\n        var isInput   = Event.element(event).tagName == 'INPUT';\n        if(trElement){\n            var checkbox = Element.getElementsBySelector(trElement, 'input');\n            if(checkbox[0]){\n                var checked = isInput ? checkbox[0].checked : !checkbox[0].checked;\n                ",192],["T_OPEN_TAG","<?php ",218],["T_ECHO","echo",218],["T_WHITESPACE"," ",218],["T_VARIABLE","$_gridJsObject",218],["T_WHITESPACE"," ",218],["T_CLOSE_TAG","?>",218],["T_INLINE_HTML",".setCheckboxChecked(checkbox[0], checked);\n            }\n        }\n    }\n    function positionChange(event){\n        var element = Event.element(event);\n        if(element && element.checkboxElement && element.checkboxElement.checked){\n            categoryProducts.set(element.checkboxElement.value, element.value);\n            $('in_category_products').value = categoryProducts.toQueryString();\n        }\n    }\n\n    var tabIndex = 1000;\n    function categoryProductRowInit(grid, row){\n        var checkbox = $(row).getElementsByClassName('checkbox')[0];\n        var position = $(row).getElementsByClassName('input-text')[0];\n        if(checkbox && position){\n            checkbox.positionElement = position;\n            position.checkboxElement = checkbox;\n            position.disabled = !checkbox.checked;\n            position.tabIndex = tabIndex++;\n            Event.observe(position,'keyup',positionChange);\n        }\n    }\n\n\n    ",218],["T_OPEN_TAG","<?php ",244],["T_ECHO","echo",244],["T_WHITESPACE"," ",244],["T_VARIABLE","$_gridJsObject",244],["T_WHITESPACE"," ",244],["T_CLOSE_TAG","?>",244],["T_INLINE_HTML",".rowClickCallback = categoryProductRowClick;\n    ",244],["T_OPEN_TAG","<?php ",245],["T_ECHO","echo",245],["T_WHITESPACE"," ",245],["T_VARIABLE","$_gridJsObject",245],["T_WHITESPACE"," ",245],["T_CLOSE_TAG","?>",245],["T_INLINE_HTML",".initRowCallback = categoryProductRowInit;\n    ",245],["T_OPEN_TAG","<?php ",246],["T_ECHO","echo",246],["T_WHITESPACE"," ",246],["T_VARIABLE","$_gridJsObject",246],["T_WHITESPACE"," ",246],["T_CLOSE_TAG","?>",246],["T_INLINE_HTML",".checkboxCheckCallback = registerCategoryProduct;\n    ",246],["T_OPEN_TAG","<?php ",247],["T_ECHO","echo",247],["T_WHITESPACE"," ",247],["T_VARIABLE","$_gridJsObject",247],["T_WHITESPACE"," ",247],["T_CLOSE_TAG","?>",247],["T_INLINE_HTML",".rows.each(function(row){categoryProductRowInit(",247],["T_OPEN_TAG","<?php ",247],["T_ECHO","echo",247],["T_WHITESPACE"," ",247],["T_VARIABLE","$_gridJsObject",247],["T_WHITESPACE"," ",247],["T_CLOSE_TAG","?>",247],["T_INLINE_HTML",", row)});\n\n",247],["T_OPEN_TAG","<?php ",249],["T_ENDIF","endif",249],";",["T_WHITESPACE"," ",249],["T_CLOSE_TAG","?>\n",249],["T_OPEN_TAG","<?php ",250],["T_IF","if",250],"(",["T_VARIABLE","$this",250],["T_OBJECT_OPERATOR","->",250],["T_STRING","isAjax",250],"(",")",["T_WHITESPACE"," ",250],["T_BOOLEAN_AND","&&",250],["T_WHITESPACE"," ",250],"(",["T_VARIABLE","$block",250],["T_WHITESPACE"," ",250],"=",["T_WHITESPACE"," ",250],["T_VARIABLE","$this",250],["T_OBJECT_OPERATOR","->",250],["T_STRING","getLayout",250],"(",")",["T_OBJECT_OPERATOR","->",250],["T_STRING","getBlock",250],"(",["T_CONSTANT_ENCAPSED_STRING","'tabs'",250],")",")",["T_WHITESPACE"," ",250],["T_BOOLEAN_AND","&&",250],["T_WHITESPACE"," ",250],"(",["T_VARIABLE","$_tabsJsObject",250],"=",["T_VARIABLE","$block",250],["T_OBJECT_OPERATOR","->",250],["T_STRING","getJsObjectName",250],"(",")",")",")",":",["T_WHITESPACE"," ",250],["T_CLOSE_TAG","?>\n",250],["T_INLINE_HTML","    ",251],["T_OPEN_TAG","<?php ",251],["T_ECHO","echo",251],["T_WHITESPACE"," ",251],["T_VARIABLE","$_tabsJsObject",251],["T_WHITESPACE"," ",251],["T_CLOSE_TAG","?>",251],["T_INLINE_HTML",".moveTabContentInDest();\n    if (",251],["T_OPEN_TAG","<?php ",252],["T_ECHO","echo",252],["T_WHITESPACE"," ",252],["T_VARIABLE","$_tabsJsObject",252],["T_WHITESPACE"," ",252],["T_CLOSE_TAG","?>",252],["T_INLINE_HTML",".activeTab) {\n        $('active_tab_id').value = ",252],["T_OPEN_TAG","<?php ",253],["T_ECHO","echo",253],["T_WHITESPACE"," ",253],["T_VARIABLE","$_tabsJsObject",253],["T_WHITESPACE"," ",253],["T_CLOSE_TAG","?>",253],["T_INLINE_HTML",".activeTab.id;\n    }\n    $('active_tab_id').tabsJsObject = ",253],["T_OPEN_TAG","<?php ",255],["T_ECHO","echo",255],["T_WHITESPACE"," ",255],["T_VARIABLE","$_tabsJsObject",255],["T_WHITESPACE"," ",255],["T_CLOSE_TAG","?>",255],["T_INLINE_HTML",";\n",255],["T_OPEN_TAG","<?php ",256],["T_ENDIF","endif",256],";",["T_WHITESPACE"," ",256],["T_CLOSE_TAG","?>\n",256],["T_INLINE_HTML","\/\/]]>\n<\/script>\n",257]]
[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Magento\n *\n * NOTICE OF LICENSE\n *\n * This source file is subject to the Academic Free License (AFL 3.0)\n * that is bundled with this package in the file LICENSE_AFL.txt.\n * It is also available through the world-wide-web at this URL:\n * http:\/\/opensource.org\/licenses\/afl-3.0.php\n * If you did not receive a copy of the license and are unable to\n * obtain it through the world-wide-web, please send an email\n * to license@magento.com so we can send you a copy immediately.\n *\n * DISCLAIMER\n *\n * Do not edit or add to this file if you wish to upgrade Magento to newer\n * versions in the future. If you wish to customize Magento for your\n * needs please refer to http:\/\/www.magento.com for more information.\n *\n * @category    design\n * @package     default_default\n * @copyright   Copyright (c) 2006-2016 X.commerce, Inc. and affiliates (http:\/\/www.magento.com)\n * @license     http:\/\/opensource.org\/licenses\/afl-3.0.php  Academic Free License (AFL 3.0)\n *\/",2],["T_WHITESPACE","\n",25],["T_CLOSE_TAG","?>\n",26],["T_INLINE_HTML","<div class=\"entry-edit\">\n    <div class=\"entry-edit-head\">\n        <h4 class=\"icon-head head-edit-form fieldset-legend\">",27],["T_OPEN_TAG","<?php ",29],["T_ECHO","echo",29],["T_WHITESPACE"," ",29],["T_VARIABLE","$this",29],["T_OBJECT_OPERATOR","->",29],["T_STRING","__",29],"(",["T_CONSTANT_ENCAPSED_STRING","'Roles Resources'",29],")",["T_WHITESPACE"," ",29],["T_CLOSE_TAG","?>",29],["T_INLINE_HTML","<\/h4>\n    <\/div>\n    <input type=\"hidden\" name=\"resource\" id=\"role_resources\" value=\"\">\n    <fieldset id=\"role_resources\">\n\n        <span class=\"field-row\">\n            <label for=\"all\">",29],["T_OPEN_TAG","<?php ",35],["T_ECHO","echo",35],["T_WHITESPACE"," ",35],["T_VARIABLE","$this",35],["T_OBJECT_OPERATOR","->",35],["T_STRING","__",35],"(",["T_CONSTANT_ENCAPSED_STRING","'Resource Access'",35],")",["T_WHITESPACE"," ",35],["T_CLOSE_TAG","?>",35],["T_INLINE_HTML","<\/label>\n            <select id=\"all\" name=\"all\" onchange=\"$('resources_container').toggle()\" class=\"select\">\n                <option value=\"0\" ",35],["T_OPEN_TAG","<?php ",37],["T_ECHO","echo",37],["T_WHITESPACE"," ",37],"(",["T_VARIABLE","$this",37],["T_OBJECT_OPERATOR","->",37],["T_STRING","getEverythingAllowed",37],"(",")","?",["T_CONSTANT_ENCAPSED_STRING","''",37],":",["T_CONSTANT_ENCAPSED_STRING","'selected=\"selected\"'",37],")",";",["T_WHITESPACE"," ",37],["T_CLOSE_TAG","?>",37],["T_INLINE_HTML",">",37],["T_OPEN_TAG","<?php ",37],["T_ECHO","echo",37],["T_WHITESPACE"," ",37],["T_VARIABLE","$this",37],["T_OBJECT_OPERATOR","->",37],["T_STRING","__",37],"(",["T_CONSTANT_ENCAPSED_STRING","'Custom'",37],")",["T_WHITESPACE"," ",37],["T_CLOSE_TAG","?>",37],["T_INLINE_HTML","<\/option>\n                <option value=\"1\" ",37],["T_OPEN_TAG","<?php ",38],["T_ECHO","echo",38],["T_WHITESPACE"," ",38],"(",["T_VARIABLE","$this",38],["T_OBJECT_OPERATOR","->",38],["T_STRING","getEverythingAllowed",38],"(",")","?",["T_CONSTANT_ENCAPSED_STRING","'selected=\"selected\"'",38],":",["T_CONSTANT_ENCAPSED_STRING","''",38],")",";",["T_WHITESPACE"," ",38],["T_CLOSE_TAG","?>",38],["T_INLINE_HTML",">",38],["T_OPEN_TAG","<?php ",38],["T_ECHO","echo",38],["T_WHITESPACE"," ",38],["T_VARIABLE","$this",38],["T_OBJECT_OPERATOR","->",38],["T_STRING","__",38],"(",["T_CONSTANT_ENCAPSED_STRING","'All'",38],")",["T_WHITESPACE"," ",38],["T_CLOSE_TAG","?>",38],["T_INLINE_HTML","<\/option>\n            <\/select>\n        <\/span>\n\n        <span class=\"field-row\" id=\"resources_container\">\n            <label>",38],["T_OPEN_TAG","<?php ",43],["T_ECHO","echo",43],["T_WHITESPACE"," ",43],["T_VARIABLE","$this",43],["T_OBJECT_OPERATOR","->",43],["T_STRING","__",43],"(",["T_CONSTANT_ENCAPSED_STRING","'Resources'",43],")",["T_WHITESPACE"," ",43],["T_CLOSE_TAG","?>",43],["T_INLINE_HTML","<\/label>\n            <div class=\"f-left\">\n                <div class=\"tree x-tree\" id=\"resource-tree\"><\/div>\n            <\/div>\n        <\/span>\n\n    <\/fieldset>\n<\/div>\n<!-- Draw Resources Tree -->\n<script type=\"text\/javascript\">\n",43],["T_OPEN_TAG","<?php ",53],["T_IF","if",53],"(",["T_VARIABLE","$this",53],["T_OBJECT_OPERATOR","->",53],["T_STRING","getEverythingAllowed",53],"(",")",")",":",["T_WHITESPACE"," ",53],["T_CLOSE_TAG","?>\n",53],["T_INLINE_HTML","    $('resources_container').hide();\n",54],["T_OPEN_TAG","<?php ",55],["T_ENDIF","endif",55],";",["T_WHITESPACE"," ",55],["T_CLOSE_TAG","?>\n",55],["T_INLINE_HTML","Ext.EventManager.onDocumentReady(function() {\n    var tree = new Ext.tree.TreePanel('resource-tree', {\n        animate:false,\n        loader: false,\n        enableDD:false,\n        containerScroll: true,\n        rootUIProvider: Ext.tree.CheckboxNodeUI,\n        selModel: new Ext.tree.CheckNodeMultiSelectionModel(),\n        rootVisible: false\n    });\n\n    tree.on('check', checkHandler, tree);\n\n    \/\/ set the root node\n    var root = new Ext.tree.TreeNode({\n        text: 'root',\n        draggable:false,\n        checked:'false',\n        id:'__root__',\n        uiProvider: Ext.tree.CheckboxNodeUI\n    });\n\n    tree.setRootNode(root);\n    bildResourcesTree(root, ",56],["T_OPEN_TAG","<?php ",79],["T_ECHO","echo",79],["T_WHITESPACE"," ",79],["T_VARIABLE","$this",79],["T_OBJECT_OPERATOR","->",79],["T_STRING","getResTreeJson",79],"(",")",["T_WHITESPACE"," ",79],["T_CLOSE_TAG","?>",79],["T_INLINE_HTML",");\n    tree.addListener('click', resourceClick.createDelegate(this));\n\n    \/\/ render the tree\n    tree.render();\n    \/\/ root.expand();\n    tree.expandAll();\n\n    $('role_resources').value = tree.getChecked().join(',');\n});\n\nfunction resourceClick(node, e){\n    node.getUI().check(!node.getUI().checked());\n    varienElementMethods.setHasChanges(Event.element(e), e);\n};\n\nfunction bildResourcesTree(parent, config){\n    if (!config) return null;\n\n    if (parent && config && config.length){\n        for (var i = 0; i < config.length; i++){\n            config[i].uiProvider = Ext.tree.CheckboxNodeUI;\n            var node = new Ext.tree.TreeNode(config[i]);\n            parent.appendChild(node);\n            if(config[i].children){\n                bildResourcesTree(node, config[i].children);\n            }\n        }\n    }\n}\n\nfunction checkHandler(node)\n{\n    if ( node.attributes.checked && node.parentNode ) {\n        var n = node.parentNode;\n        this.removeListener('check', checkHandler);\n        do {\n            if (!n || n.attributes.id == 'admin' || n.attributes.id == '__root__') {\n                break;\n            } else {\n                n.ui.check(true);\n            }\n        } while (n = n.parentNode );\n        this.on('check', checkHandler);\n    }\n    if ( !node.isLeaf() && node.hasChildNodes() ) {\n        this.removeListener('check', checkHandler);\n        processChildren(node, node.attributes.checked);\n        this.on('check', checkHandler);\n    }\n    $('role_resources').value = this.getChecked().join(',');\n}\n\nfunction processChildren(node, state)\n{\n    if ( !node.hasChildNodes() ) return false;\n    for(var i = 0; i < node.childNodes.length; i++ ) {\n        node.childNodes[i].ui.check(state);\n        if ( node.childNodes[i].hasChildNodes() ) {\n            processChildren(node.childNodes[i], state);\n        }\n    }\n    return true;\n}\n<\/script>\n",79]]
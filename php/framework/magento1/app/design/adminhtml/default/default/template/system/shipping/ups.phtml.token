[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Magento\n *\n * NOTICE OF LICENSE\n *\n * This source file is subject to the Academic Free License (AFL 3.0)\n * that is bundled with this package in the file LICENSE_AFL.txt.\n * It is also available through the world-wide-web at this URL:\n * http:\/\/opensource.org\/licenses\/afl-3.0.php\n * If you did not receive a copy of the license and are unable to\n * obtain it through the world-wide-web, please send an email\n * to license@magento.com so we can send you a copy immediately.\n *\n * DISCLAIMER\n *\n * Do not edit or add to this file if you wish to upgrade Magento to newer\n * versions in the future. If you wish to customize Magento for your\n * needs please refer to http:\/\/www.magento.com for more information.\n *\n * @category    design\n * @package     default_default\n * @copyright   Copyright (c) 2006-2016 X.commerce, Inc. and affiliates (http:\/\/www.magento.com)\n * @license     http:\/\/opensource.org\/licenses\/afl-3.0.php  Academic Free License (AFL 3.0)\n *\/",2],["T_WHITESPACE","\n\n",25],["T_DOC_COMMENT","\/** @var $upsModel Mage_Usa_Model_Shipping_Carrier_Ups *\/",27],["T_WHITESPACE","\n",27],["T_VARIABLE","$upsModel",28],["T_WHITESPACE"," ",28],"=",["T_WHITESPACE"," ",28],["T_STRING","Mage",28],["T_DOUBLE_COLON","::",28],["T_STRING","getSingleton",28],"(",["T_CONSTANT_ENCAPSED_STRING","'usa\/shipping_carrier_ups'",28],")",";",["T_WHITESPACE","\n",28],["T_VARIABLE","$orShipArr",29],["T_WHITESPACE"," ",29],"=",["T_WHITESPACE"," ",29],["T_VARIABLE","$upsModel",29],["T_OBJECT_OPERATOR","->",29],["T_STRING","getCode",29],"(",["T_CONSTANT_ENCAPSED_STRING","'originShipment'",29],")",";",["T_WHITESPACE","\n",29],["T_VARIABLE","$defShipArr",30],["T_WHITESPACE"," ",30],"=",["T_WHITESPACE"," ",30],["T_VARIABLE","$upsModel",30],["T_OBJECT_OPERATOR","->",30],["T_STRING","getCode",30],"(",["T_CONSTANT_ENCAPSED_STRING","'method'",30],")",";",["T_WHITESPACE","\n\n",30],["T_DOC_COMMENT","\/** @var $this Mage_Adminhtml_Block_Template *\/",32],["T_WHITESPACE","\n",32],["T_VARIABLE","$sectionCode",33],["T_WHITESPACE"," ",33],"=",["T_WHITESPACE"," ",33],["T_VARIABLE","$this",33],["T_OBJECT_OPERATOR","->",33],["T_STRING","getRequest",33],"(",")",["T_OBJECT_OPERATOR","->",33],["T_STRING","getParam",33],"(",["T_CONSTANT_ENCAPSED_STRING","'section'",33],")",";",["T_WHITESPACE","\n",33],["T_VARIABLE","$websiteCode",34],["T_WHITESPACE"," ",34],"=",["T_WHITESPACE"," ",34],["T_VARIABLE","$this",34],["T_OBJECT_OPERATOR","->",34],["T_STRING","getRequest",34],"(",")",["T_OBJECT_OPERATOR","->",34],["T_STRING","getParam",34],"(",["T_CONSTANT_ENCAPSED_STRING","'website'",34],")",";",["T_WHITESPACE","\n",34],["T_VARIABLE","$storeCode",35],["T_WHITESPACE"," ",35],"=",["T_WHITESPACE"," ",35],["T_VARIABLE","$this",35],["T_OBJECT_OPERATOR","->",35],["T_STRING","getRequest",35],"(",")",["T_OBJECT_OPERATOR","->",35],["T_STRING","getParam",35],"(",["T_CONSTANT_ENCAPSED_STRING","'store'",35],")",";",["T_WHITESPACE","\n\n",35],["T_IF","if",37],["T_WHITESPACE"," ",37],"(","!",["T_VARIABLE","$storeCode",37],["T_WHITESPACE"," ",37],["T_BOOLEAN_AND","&&",37],["T_WHITESPACE"," ",37],["T_VARIABLE","$websiteCode",37],")",["T_WHITESPACE"," ",37],"{",["T_WHITESPACE","\n    ",37],["T_DOC_COMMENT","\/** @var $web Mage_Core_Model_Website *\/",38],["T_WHITESPACE","\n    ",38],["T_VARIABLE","$web",39],["T_WHITESPACE"," ",39],"=",["T_WHITESPACE"," ",39],["T_STRING","Mage",39],["T_DOUBLE_COLON","::",39],["T_STRING","getModel",39],"(",["T_CONSTANT_ENCAPSED_STRING","'Mage_Core_Model_Website'",39],")",["T_OBJECT_OPERATOR","->",39],["T_STRING","load",39],"(",["T_VARIABLE","$websiteCode",39],")",";",["T_WHITESPACE","\n    ",39],["T_VARIABLE","$storedAllowedMethods",40],["T_WHITESPACE"," ",40],"=",["T_WHITESPACE"," ",40],["T_STRING","explode",40],"(",["T_CONSTANT_ENCAPSED_STRING","','",40],",",["T_WHITESPACE"," ",40],["T_VARIABLE","$web",40],["T_OBJECT_OPERATOR","->",40],["T_STRING","getConfig",40],"(",["T_CONSTANT_ENCAPSED_STRING","'carriers\/ups\/allowed_methods'",40],")",")",";",["T_WHITESPACE","\n    ",40],["T_VARIABLE","$storedOriginShipment",41],["T_WHITESPACE"," ",41],"=",["T_WHITESPACE"," ",41],["T_VARIABLE","$web",41],["T_OBJECT_OPERATOR","->",41],["T_STRING","getConfig",41],"(",["T_CONSTANT_ENCAPSED_STRING","'carriers\/ups\/origin_shipment'",41],")",";",["T_WHITESPACE","\n    ",41],["T_VARIABLE","$storedFreeShipment",42],["T_WHITESPACE","   ",42],"=",["T_WHITESPACE"," ",42],["T_VARIABLE","$web",42],["T_OBJECT_OPERATOR","->",42],["T_STRING","getConfig",42],"(",["T_CONSTANT_ENCAPSED_STRING","'carriers\/ups\/free_method'",42],")",";",["T_WHITESPACE","\n    ",42],["T_VARIABLE","$storedUpsType",43],["T_WHITESPACE","        ",43],"=",["T_WHITESPACE"," ",43],["T_VARIABLE","$web",43],["T_OBJECT_OPERATOR","->",43],["T_STRING","getConfig",43],"(",["T_CONSTANT_ENCAPSED_STRING","'carriers\/ups\/type'",43],")",";",["T_WHITESPACE","\n",43],"}",["T_WHITESPACE"," ",44],["T_ELSEIF","elseif",44],["T_WHITESPACE"," ",44],"(",["T_VARIABLE","$storeCode",44],")",["T_WHITESPACE"," ",44],"{",["T_WHITESPACE","\n    ",44],["T_VARIABLE","$storedAllowedMethods",45],["T_WHITESPACE"," ",45],"=",["T_WHITESPACE"," ",45],["T_STRING","explode",45],"(",["T_CONSTANT_ENCAPSED_STRING","','",45],",",["T_WHITESPACE"," ",45],["T_STRING","Mage",45],["T_DOUBLE_COLON","::",45],["T_STRING","getStoreConfig",45],"(",["T_CONSTANT_ENCAPSED_STRING","'carriers\/ups\/allowed_methods'",45],",",["T_WHITESPACE"," ",45],["T_VARIABLE","$storeCode",45],")",")",";",["T_WHITESPACE","\n    ",45],["T_VARIABLE","$storedOriginShipment",46],["T_WHITESPACE"," ",46],"=",["T_WHITESPACE"," ",46],["T_STRING","Mage",46],["T_DOUBLE_COLON","::",46],["T_STRING","getStoreConfig",46],"(",["T_CONSTANT_ENCAPSED_STRING","'carriers\/ups\/origin_shipment'",46],",",["T_WHITESPACE"," ",46],["T_VARIABLE","$storeCode",46],")",";",["T_WHITESPACE","\n    ",46],["T_VARIABLE","$storedFreeShipment",47],["T_WHITESPACE","   ",47],"=",["T_WHITESPACE"," ",47],["T_STRING","Mage",47],["T_DOUBLE_COLON","::",47],["T_STRING","getStoreConfig",47],"(",["T_CONSTANT_ENCAPSED_STRING","'carriers\/ups\/free_method'",47],",",["T_WHITESPACE"," ",47],["T_VARIABLE","$storeCode",47],")",";",["T_WHITESPACE","\n    ",47],["T_VARIABLE","$storedUpsType",48],["T_WHITESPACE","        ",48],"=",["T_WHITESPACE"," ",48],["T_STRING","Mage",48],["T_DOUBLE_COLON","::",48],["T_STRING","getStoreConfig",48],"(",["T_CONSTANT_ENCAPSED_STRING","'carriers\/ups\/type'",48],",",["T_WHITESPACE"," ",48],["T_VARIABLE","$storeCode",48],")",";",["T_WHITESPACE","\n",48],"}",["T_WHITESPACE"," ",49],["T_ELSE","else",49],["T_WHITESPACE"," ",49],"{",["T_WHITESPACE","\n    ",49],["T_VARIABLE","$storedAllowedMethods",50],["T_WHITESPACE"," ",50],"=",["T_WHITESPACE"," ",50],["T_STRING","explode",50],"(",["T_CONSTANT_ENCAPSED_STRING","','",50],",",["T_WHITESPACE"," ",50],["T_STRING","Mage",50],["T_DOUBLE_COLON","::",50],["T_STRING","getStoreConfig",50],"(",["T_CONSTANT_ENCAPSED_STRING","'carriers\/ups\/allowed_methods'",50],")",")",";",["T_WHITESPACE","\n    ",50],["T_VARIABLE","$storedOriginShipment",51],["T_WHITESPACE"," ",51],"=",["T_WHITESPACE"," ",51],["T_STRING","Mage",51],["T_DOUBLE_COLON","::",51],["T_STRING","getStoreConfig",51],"(",["T_CONSTANT_ENCAPSED_STRING","'carriers\/ups\/origin_shipment'",51],")",";",["T_WHITESPACE","\n    ",51],["T_VARIABLE","$storedFreeShipment",52],["T_WHITESPACE","   ",52],"=",["T_WHITESPACE"," ",52],["T_STRING","Mage",52],["T_DOUBLE_COLON","::",52],["T_STRING","getStoreConfig",52],"(",["T_CONSTANT_ENCAPSED_STRING","'carriers\/ups\/free_method'",52],")",";",["T_WHITESPACE","\n    ",52],["T_VARIABLE","$storedUpsType",53],["T_WHITESPACE","        ",53],"=",["T_WHITESPACE"," ",53],["T_STRING","Mage",53],["T_DOUBLE_COLON","::",53],["T_STRING","getStoreConfig",53],"(",["T_CONSTANT_ENCAPSED_STRING","'carriers\/ups\/type'",53],")",";",["T_WHITESPACE","\n",53],"}",["T_WHITESPACE","\n",54],["T_CLOSE_TAG","?>\n",55],["T_INLINE_HTML","<script type=\"text\/javascript\">\n\/\/<![CDATA[\n    function hideRowArrayElements(arr)\n    {\n        for (var a = 0; a < arr.length; a++) {\n            $(arr[a]).up(1).hide();\n        }\n    }\n\n    function showRowArrayElements(arr)\n    {\n        for (var a = 0; a < arr.length; a++) {\n            $(arr[a]).up(1).show();\n        }\n    }\n\n    function inArray(arr, value)\n    {\n        for (var i = 0; i < arr.length; i++) {\n            if (arr[i] === value) {\n                return true;\n            }\n        }\n        return false;\n    }\n\n    var upsXml = Class.create();\n    upsXml.prototype = {\n        initialize: function()\n        {\n            this.carriersUpsTypeId = 'carriers_ups_type';\n            if (!$(this.carriersUpsTypeId)) {\n                return;\n            }\n\n            this.checkingUpsXmlId = ['carriers_ups_gateway_xml_url','carriers_ups_username',\n                'carriers_ups_password','carriers_ups_access_license_number'];\n            this.checkingUpsId = ['carriers_ups_gateway_url'];\n            this.originShipmentTitle = '';\n            this.allowedMethodsId = 'carriers_ups_allowed_methods';\n            this.freeShipmentId = 'carriers_ups_free_method';\n            this.onlyUpsXmlElements = ['carriers_ups_gateway_xml_url','carriers_ups_tracking_xml_url',\n                'carriers_ups_shipconfirm_xml_url', 'carriers_ups_shipaccept_xml_url',\n                'carriers_ups_username','carriers_ups_password','carriers_ups_access_license_number',\n                'carriers_ups_origin_shipment','carriers_ups_negotiated_active','carriers_ups_shipper_number',\n                'carriers_ups_mode_xml'];\n            this.onlyUpsElements = ['carriers_ups_gateway_url'];\n\n            this.storedOriginShipment = '",56],["T_OPEN_TAG","<?php ",104],["T_ECHO","echo",104],["T_WHITESPACE"," ",104],["T_VARIABLE","$storedOriginShipment",104],["T_WHITESPACE"," ",104],["T_CLOSE_TAG","?>",104],["T_INLINE_HTML","';\n            this.storedFreeShipment = '",104],["T_OPEN_TAG","<?php ",105],["T_ECHO","echo",105],["T_WHITESPACE"," ",105],["T_VARIABLE","$storedFreeShipment",105],["T_WHITESPACE"," ",105],["T_CLOSE_TAG","?>",105],["T_INLINE_HTML","';\n            this.storedUpsType = '",105],["T_OPEN_TAG","<?php ",106],["T_ECHO","echo",106],["T_WHITESPACE"," ",106],["T_VARIABLE","$storedUpsType",106],["T_WHITESPACE"," ",106],["T_CLOSE_TAG","?>",106],["T_INLINE_HTML","';\n            ",106],["T_OPEN_TAG","<?php ",107],["T_DOC_COMMENT","\/** @var $_coreHelper Mage_Core_Helper_Data *\/",107],["T_WHITESPACE"," ",107],["T_VARIABLE","$_coreHelper",107],["T_WHITESPACE"," ",107],"=",["T_WHITESPACE"," ",107],["T_STRING","Mage",107],["T_DOUBLE_COLON","::",107],["T_STRING","helper",107],"(",["T_CONSTANT_ENCAPSED_STRING","'core'",107],")",";",["T_WHITESPACE"," ",107],["T_CLOSE_TAG","?>\n",107],["T_INLINE_HTML","            this.storedAllowedMethods = ",108],["T_OPEN_TAG","<?php ",108],["T_ECHO","echo",108],["T_WHITESPACE"," ",108],["T_VARIABLE","$_coreHelper",108],["T_OBJECT_OPERATOR","->",108],["T_STRING","jsonEncode",108],"(",["T_VARIABLE","$storedAllowedMethods",108],")",["T_WHITESPACE"," ",108],["T_CLOSE_TAG","?>",108],["T_INLINE_HTML",";\n            this.originShipmentObj = ",108],["T_OPEN_TAG","<?php ",109],["T_ECHO","echo",109],["T_WHITESPACE"," ",109],["T_VARIABLE","$_coreHelper",109],["T_OBJECT_OPERATOR","->",109],["T_STRING","jsonEncode",109],"(",["T_VARIABLE","$orShipArr",109],")",["T_WHITESPACE"," ",109],["T_CLOSE_TAG","?>",109],["T_INLINE_HTML",";\n            this.originShipmentObj['default'] = ",109],["T_OPEN_TAG","<?php ",110],["T_ECHO","echo",110],["T_WHITESPACE"," ",110],["T_VARIABLE","$_coreHelper",110],["T_OBJECT_OPERATOR","->",110],["T_STRING","jsonEncode",110],"(",["T_VARIABLE","$defShipArr",110],")",["T_WHITESPACE"," ",110],["T_CLOSE_TAG","?>",110],["T_INLINE_HTML",";\n\n            this.setFormValues();\n            Event.observe($(this.carriersUpsTypeId), 'change', this.setFormValues.bind(this));\n        },\n        updateAllowedMethods: function(originShipmentTitle)\n        {\n            var allowedMethods = $(this.allowedMethodsId), \/\/ multiselect\n                freeMethod = $(this.freeShipmentId), \/\/ single-choice select\n                originShipment = this.originShipmentObj[originShipmentTitle];\n\n            while (allowedMethods.length > 0) {\n                allowedMethods.remove(0);\n            }\n\n            while (freeMethod.length > 0) {\n                freeMethod.remove(0);\n            }\n\n            freeMethod.insert(new Element('option', {value:''}).update('None'));\n\n            var code, option;\n            for (code in originShipment) {\n                option = new Element('option', {value:code}).update(originShipment[code]);\n                if ((originShipmentTitle == this.storedOriginShipment || originShipmentTitle == 'default')\n                    && this.storedFreeShipment == code\n                ) {\n                    option.selected = true;\n                }\n                freeMethod.insert(option);\n\n                option = new Element('option', {value:code}).update(originShipment[code]);\n                if (this.storedUpsType == 'UPS') {\n                    if (originShipmentTitle != 'default' || inArray(this.storedAllowedMethods, code)) {\n                        option.selected = true;\n                    }\n                } else if (originShipmentTitle != this.storedOriginShipment\n                    || inArray(this.storedAllowedMethods, code)\n                ) {\n                    option.selected = true;\n                }\n\n                if ((originShipmentTitle == 'default' || originShipmentTitle == this.storedOriginShipment)\n                    && inArray(this.storedAllowedMethods, code)\n                ) {\n                    option.selected = true;\n                }\n\n                allowedMethods.insert(option);\n            }\n        },\n        setFormValues: function()\n        {\n            var a;\n            if ($F(this.carriersUpsTypeId) == 'UPS') {\n                for (a = 0; a < this.checkingUpsXmlId.length; a++) {\n                    $(this.checkingUpsXmlId[a]).removeClassName('required-entry');\n                }\n                for (a = 0; a < this.checkingUpsId.length; a++) {\n                    $(this.checkingUpsXmlId[a]).addClassName('required-entry');\n                }\n                Event.stopObserving($('carriers_ups_origin_shipment'), 'change', this.changeOriginShipment.bind(this));\n                showRowArrayElements(this.onlyUpsElements);\n                hideRowArrayElements(this.onlyUpsXmlElements);\n                this.changeOriginShipment(null, 'default');\n            } else {\n                for (a = 0; a < this.checkingUpsXmlId.length; a++) {\n                    $(this.checkingUpsXmlId[a]).addClassName('required-entry');\n                }\n                for (a = 0; a < this.checkingUpsId.length; a++) {\n                    $(this.checkingUpsXmlId[a]).removeClassName('required-entry');\n                }\n                Event.observe($('carriers_ups_origin_shipment'), 'change', this.changeOriginShipment.bind(this));\n                showRowArrayElements(this.onlyUpsXmlElements);\n                hideRowArrayElements(this.onlyUpsElements);\n                this.changeOriginShipment(null, null);\n            }\n        },\n        changeOriginShipment: function(Event, key)\n        {\n            this.originShipmentTitle = key ? key : $F('carriers_ups_origin_shipment');\n            this.updateAllowedMethods(this.originShipmentTitle);\n        }\n    };\n    xml = new upsXml();\n    \/\/]]>\n<\/script>\n",110]]
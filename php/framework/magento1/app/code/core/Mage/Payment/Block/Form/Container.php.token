[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Magento\n *\n * NOTICE OF LICENSE\n *\n * This source file is subject to the Open Software License (OSL 3.0)\n * that is bundled with this package in the file LICENSE.txt.\n * It is also available through the world-wide-web at this URL:\n * http:\/\/opensource.org\/licenses\/osl-3.0.php\n * If you did not receive a copy of the license and are unable to\n * obtain it through the world-wide-web, please send an email\n * to license@magento.com so we can send you a copy immediately.\n *\n * DISCLAIMER\n *\n * Do not edit or add to this file if you wish to upgrade Magento to newer\n * versions in the future. If you wish to customize Magento for your\n * needs please refer to http:\/\/www.magento.com for more information.\n *\n * @category    Mage\n * @package     Mage_Payment\n * @copyright  Copyright (c) 2006-2016 X.commerce, Inc. and affiliates (http:\/\/www.magento.com)\n * @license    http:\/\/opensource.org\/licenses\/osl-3.0.php  Open Software License (OSL 3.0)\n *\/",2],["T_WHITESPACE","\n\n",25],["T_DOC_COMMENT","\/**\n * Base container block for payment methods forms\n *\n * @method Mage_Sales_Model_Quote getQuote()\n *\n * @category   Mage\n * @package    Mage_Payment\n * @author      Magento Core Team <core@magentocommerce.com>\n *\/",27],["T_WHITESPACE","\n",35],["T_CLASS","class",36],["T_WHITESPACE"," ",36],["T_STRING","Mage_Payment_Block_Form_Container",36],["T_WHITESPACE"," ",36],["T_EXTENDS","extends",36],["T_WHITESPACE"," ",36],["T_STRING","Mage_Core_Block_Template",36],["T_WHITESPACE","\n",36],"{",["T_WHITESPACE","\n    ",37],["T_DOC_COMMENT","\/**\n     * Prepare children blocks\n     *\/",38],["T_WHITESPACE","\n    ",40],["T_PROTECTED","protected",41],["T_WHITESPACE"," ",41],["T_FUNCTION","function",41],["T_WHITESPACE"," ",41],["T_STRING","_prepareLayout",41],"(",")",["T_WHITESPACE","\n    ",41],"{",["T_WHITESPACE","\n        ",42],["T_DOC_COMMENT","\/**\n         * Create child blocks for payment methods forms\n         *\/",43],["T_WHITESPACE","\n        ",45],["T_FOREACH","foreach",46],["T_WHITESPACE"," ",46],"(",["T_VARIABLE","$this",46],["T_OBJECT_OPERATOR","->",46],["T_STRING","getMethods",46],"(",")",["T_WHITESPACE"," ",46],["T_AS","as",46],["T_WHITESPACE"," ",46],["T_VARIABLE","$method",46],")",["T_WHITESPACE"," ",46],"{",["T_WHITESPACE","\n            ",46],["T_VARIABLE","$this",47],["T_OBJECT_OPERATOR","->",47],["T_STRING","setChild",47],"(",["T_WHITESPACE","\n               ",47],["T_CONSTANT_ENCAPSED_STRING","'payment.method.'",48],".",["T_VARIABLE","$method",48],["T_OBJECT_OPERATOR","->",48],["T_STRING","getCode",48],"(",")",",",["T_WHITESPACE","\n               ",48],["T_VARIABLE","$this",49],["T_OBJECT_OPERATOR","->",49],["T_STRING","helper",49],"(",["T_CONSTANT_ENCAPSED_STRING","'payment'",49],")",["T_OBJECT_OPERATOR","->",49],["T_STRING","getMethodFormBlock",49],"(",["T_VARIABLE","$method",49],")",["T_WHITESPACE","\n            ",49],")",";",["T_WHITESPACE","\n        ",50],"}",["T_WHITESPACE","\n\n        ",51],["T_RETURN","return",53],["T_WHITESPACE"," ",53],["T_STRING","parent",53],["T_DOUBLE_COLON","::",53],["T_STRING","_prepareLayout",53],"(",")",";",["T_WHITESPACE","\n    ",53],"}",["T_WHITESPACE","\n\n    ",54],["T_DOC_COMMENT","\/**\n     * Check payment method model\n     *\n     * @param Mage_Payment_Model_Method_Abstract $method\n     * @return bool\n     *\/",56],["T_WHITESPACE","\n    ",61],["T_PROTECTED","protected",62],["T_WHITESPACE"," ",62],["T_FUNCTION","function",62],["T_WHITESPACE"," ",62],["T_STRING","_canUseMethod",62],"(",["T_VARIABLE","$method",62],")",["T_WHITESPACE","\n    ",62],"{",["T_WHITESPACE","\n        ",63],["T_RETURN","return",64],["T_WHITESPACE"," ",64],["T_VARIABLE","$method",64],["T_OBJECT_OPERATOR","->",64],["T_STRING","isApplicableToQuote",64],"(",["T_VARIABLE","$this",64],["T_OBJECT_OPERATOR","->",64],["T_STRING","getQuote",64],"(",")",",",["T_WHITESPACE"," ",64],["T_STRING","Mage_Payment_Model_Method_Abstract",64],["T_DOUBLE_COLON","::",64],["T_STRING","CHECK_USE_FOR_COUNTRY",64],["T_WHITESPACE","\n            ",64],"|",["T_WHITESPACE"," ",65],["T_STRING","Mage_Payment_Model_Method_Abstract",65],["T_DOUBLE_COLON","::",65],["T_STRING","CHECK_USE_FOR_CURRENCY",65],["T_WHITESPACE","\n            ",65],"|",["T_WHITESPACE"," ",66],["T_STRING","Mage_Payment_Model_Method_Abstract",66],["T_DOUBLE_COLON","::",66],["T_STRING","CHECK_ORDER_TOTAL_MIN_MAX",66],["T_WHITESPACE","\n        ",66],")",";",["T_WHITESPACE","\n    ",67],"}",["T_WHITESPACE","\n\n    ",68],["T_DOC_COMMENT","\/**\n     * Check and prepare payment method model\n     *\n     * Redeclare this method in child classes for declaring method info instance\n     *\n     * @param Mage_Payment_Model_Method_Abstract $method\n     * @return bool\n     *\/",70],["T_WHITESPACE","\n    ",77],["T_PROTECTED","protected",78],["T_WHITESPACE"," ",78],["T_FUNCTION","function",78],["T_WHITESPACE"," ",78],["T_STRING","_assignMethod",78],"(",["T_VARIABLE","$method",78],")",["T_WHITESPACE","\n    ",78],"{",["T_WHITESPACE","\n        ",79],["T_VARIABLE","$method",80],["T_OBJECT_OPERATOR","->",80],["T_STRING","setInfoInstance",80],"(",["T_VARIABLE","$this",80],["T_OBJECT_OPERATOR","->",80],["T_STRING","getQuote",80],"(",")",["T_OBJECT_OPERATOR","->",80],["T_STRING","getPayment",80],"(",")",")",";",["T_WHITESPACE","\n        ",80],["T_RETURN","return",81],["T_WHITESPACE"," ",81],["T_VARIABLE","$this",81],";",["T_WHITESPACE","\n    ",81],"}",["T_WHITESPACE","\n\n    ",82],["T_DOC_COMMENT","\/**\n     * Declare template for payment method form block\n     *\n     * @param   string $method\n     * @param   string $template\n     * @return  Mage_Payment_Block_Form_Container\n     *\/",84],["T_WHITESPACE","\n    ",90],["T_PUBLIC","public",91],["T_WHITESPACE"," ",91],["T_FUNCTION","function",91],["T_WHITESPACE"," ",91],["T_STRING","setMethodFormTemplate",91],"(",["T_VARIABLE","$method",91],"=",["T_CONSTANT_ENCAPSED_STRING","''",91],",",["T_WHITESPACE"," ",91],["T_VARIABLE","$template",91],"=",["T_CONSTANT_ENCAPSED_STRING","''",91],")",["T_WHITESPACE","\n    ",91],"{",["T_WHITESPACE","\n        ",92],["T_IF","if",93],["T_WHITESPACE"," ",93],"(","!",["T_EMPTY","empty",93],"(",["T_VARIABLE","$method",93],")",["T_WHITESPACE"," ",93],["T_BOOLEAN_AND","&&",93],["T_WHITESPACE"," ",93],"!",["T_EMPTY","empty",93],"(",["T_VARIABLE","$template",93],")",")",["T_WHITESPACE"," ",93],"{",["T_WHITESPACE","\n            ",93],["T_IF","if",94],["T_WHITESPACE"," ",94],"(",["T_VARIABLE","$block",94],["T_WHITESPACE"," ",94],"=",["T_WHITESPACE"," ",94],["T_VARIABLE","$this",94],["T_OBJECT_OPERATOR","->",94],["T_STRING","getChild",94],"(",["T_CONSTANT_ENCAPSED_STRING","'payment.method.'",94],".",["T_VARIABLE","$method",94],")",")",["T_WHITESPACE"," ",94],"{",["T_WHITESPACE","\n                ",94],["T_VARIABLE","$block",95],["T_OBJECT_OPERATOR","->",95],["T_STRING","setTemplate",95],"(",["T_VARIABLE","$template",95],")",";",["T_WHITESPACE","\n            ",95],"}",["T_WHITESPACE","\n        ",96],"}",["T_WHITESPACE","\n        ",97],["T_RETURN","return",98],["T_WHITESPACE"," ",98],["T_VARIABLE","$this",98],";",["T_WHITESPACE","\n    ",98],"}",["T_WHITESPACE","\n\n    ",99],["T_DOC_COMMENT","\/**\n     * Retrieve available payment methods\n     *\n     * @return array\n     *\/",101],["T_WHITESPACE","\n    ",105],["T_PUBLIC","public",106],["T_WHITESPACE"," ",106],["T_FUNCTION","function",106],["T_WHITESPACE"," ",106],["T_STRING","getMethods",106],"(",")",["T_WHITESPACE","\n    ",106],"{",["T_WHITESPACE","\n        ",107],["T_VARIABLE","$methods",108],["T_WHITESPACE"," ",108],"=",["T_WHITESPACE"," ",108],["T_VARIABLE","$this",108],["T_OBJECT_OPERATOR","->",108],["T_STRING","getData",108],"(",["T_CONSTANT_ENCAPSED_STRING","'methods'",108],")",";",["T_WHITESPACE","\n        ",108],["T_IF","if",109],["T_WHITESPACE"," ",109],"(",["T_VARIABLE","$methods",109],["T_WHITESPACE"," ",109],["T_IS_IDENTICAL","===",109],["T_WHITESPACE"," ",109],["T_STRING","null",109],")",["T_WHITESPACE"," ",109],"{",["T_WHITESPACE","\n            ",109],["T_VARIABLE","$quote",110],["T_WHITESPACE"," ",110],"=",["T_WHITESPACE"," ",110],["T_VARIABLE","$this",110],["T_OBJECT_OPERATOR","->",110],["T_STRING","getQuote",110],"(",")",";",["T_WHITESPACE","\n            ",110],["T_VARIABLE","$store",111],["T_WHITESPACE"," ",111],"=",["T_WHITESPACE"," ",111],["T_VARIABLE","$quote",111],["T_WHITESPACE"," ",111],"?",["T_WHITESPACE"," ",111],["T_VARIABLE","$quote",111],["T_OBJECT_OPERATOR","->",111],["T_STRING","getStoreId",111],"(",")",["T_WHITESPACE"," ",111],":",["T_WHITESPACE"," ",111],["T_STRING","null",111],";",["T_WHITESPACE","\n            ",111],["T_VARIABLE","$methods",112],["T_WHITESPACE"," ",112],"=",["T_WHITESPACE"," ",112],["T_ARRAY","array",112],"(",")",";",["T_WHITESPACE","\n            ",112],["T_FOREACH","foreach",113],["T_WHITESPACE"," ",113],"(",["T_VARIABLE","$this",113],["T_OBJECT_OPERATOR","->",113],["T_STRING","helper",113],"(",["T_CONSTANT_ENCAPSED_STRING","'payment'",113],")",["T_OBJECT_OPERATOR","->",113],["T_STRING","getStoreMethods",113],"(",["T_VARIABLE","$store",113],",",["T_WHITESPACE"," ",113],["T_VARIABLE","$quote",113],")",["T_WHITESPACE"," ",113],["T_AS","as",113],["T_WHITESPACE"," ",113],["T_VARIABLE","$method",113],")",["T_WHITESPACE"," ",113],"{",["T_WHITESPACE","\n                ",113],["T_IF","if",114],["T_WHITESPACE"," ",114],"(",["T_VARIABLE","$this",114],["T_OBJECT_OPERATOR","->",114],["T_STRING","_canUseMethod",114],"(",["T_VARIABLE","$method",114],")",["T_WHITESPACE"," ",114],["T_BOOLEAN_AND","&&",114],["T_WHITESPACE"," ",114],["T_VARIABLE","$method",114],["T_OBJECT_OPERATOR","->",114],["T_STRING","isApplicableToQuote",114],"(",["T_WHITESPACE","\n                    ",114],["T_VARIABLE","$quote",115],",",["T_WHITESPACE","\n                    ",115],["T_STRING","Mage_Payment_Model_Method_Abstract",116],["T_DOUBLE_COLON","::",116],["T_STRING","CHECK_ZERO_TOTAL",116],["T_WHITESPACE","\n                ",116],")",")",["T_WHITESPACE"," ",117],"{",["T_WHITESPACE","\n                    ",117],["T_VARIABLE","$this",118],["T_OBJECT_OPERATOR","->",118],["T_STRING","_assignMethod",118],"(",["T_VARIABLE","$method",118],")",";",["T_WHITESPACE","\n                    ",118],["T_VARIABLE","$methods",119],"[","]",["T_WHITESPACE"," ",119],"=",["T_WHITESPACE"," ",119],["T_VARIABLE","$method",119],";",["T_WHITESPACE","\n                ",119],"}",["T_WHITESPACE","\n            ",120],"}",["T_WHITESPACE","\n            ",121],["T_VARIABLE","$this",122],["T_OBJECT_OPERATOR","->",122],["T_STRING","setData",122],"(",["T_CONSTANT_ENCAPSED_STRING","'methods'",122],",",["T_WHITESPACE"," ",122],["T_VARIABLE","$methods",122],")",";",["T_WHITESPACE","\n        ",122],"}",["T_WHITESPACE","\n        ",123],["T_RETURN","return",124],["T_WHITESPACE"," ",124],["T_VARIABLE","$methods",124],";",["T_WHITESPACE","\n    ",124],"}",["T_WHITESPACE","\n\n    ",125],["T_DOC_COMMENT","\/**\n     * Retrieve code of current payment method\n     *\n     * @return mixed\n     *\/",127],["T_WHITESPACE","\n    ",131],["T_PUBLIC","public",132],["T_WHITESPACE"," ",132],["T_FUNCTION","function",132],["T_WHITESPACE"," ",132],["T_STRING","getSelectedMethodCode",132],"(",")",["T_WHITESPACE","\n    ",132],"{",["T_WHITESPACE","\n        ",133],["T_VARIABLE","$methods",134],["T_WHITESPACE"," ",134],"=",["T_WHITESPACE"," ",134],["T_VARIABLE","$this",134],["T_OBJECT_OPERATOR","->",134],["T_STRING","getMethods",134],"(",")",";",["T_WHITESPACE","\n        ",134],["T_IF","if",135],["T_WHITESPACE"," ",135],"(","!",["T_EMPTY","empty",135],"(",["T_VARIABLE","$methods",135],")",")",["T_WHITESPACE"," ",135],"{",["T_WHITESPACE","\n            ",135],["T_STRING","reset",136],"(",["T_VARIABLE","$methods",136],")",";",["T_WHITESPACE","\n            ",136],["T_RETURN","return",137],["T_WHITESPACE"," ",137],["T_STRING","current",137],"(",["T_VARIABLE","$methods",137],")",["T_OBJECT_OPERATOR","->",137],["T_STRING","getCode",137],"(",")",";",["T_WHITESPACE","\n        ",137],"}",["T_WHITESPACE","\n        ",138],["T_RETURN","return",139],["T_WHITESPACE"," ",139],["T_STRING","false",139],";",["T_WHITESPACE","\n    ",139],"}",["T_WHITESPACE","\n",140],"}",["T_WHITESPACE","\n",141]]
[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Magento\n *\n * NOTICE OF LICENSE\n *\n * This source file is subject to the Open Software License (OSL 3.0)\n * that is bundled with this package in the file LICENSE.txt.\n * It is also available through the world-wide-web at this URL:\n * http:\/\/opensource.org\/licenses\/osl-3.0.php\n * If you did not receive a copy of the license and are unable to\n * obtain it through the world-wide-web, please send an email\n * to license@magento.com so we can send you a copy immediately.\n *\n * DISCLAIMER\n *\n * Do not edit or add to this file if you wish to upgrade Magento to newer\n * versions in the future. If you wish to customize Magento for your\n * needs please refer to http:\/\/www.magento.com for more information.\n *\n * @category    Mage\n * @package     Mage_Payment\n * @copyright  Copyright (c) 2006-2016 X.commerce, Inc. and affiliates (http:\/\/www.magento.com)\n * @license    http:\/\/opensource.org\/licenses\/osl-3.0.php  Open Software License (OSL 3.0)\n *\/",2],["T_WHITESPACE","\n\n",25],["T_DOC_COMMENT","\/**\n * Payment module base helper\n *\n * @author      Magento Core Team <core@magentocommerce.com>\n *\/",27],["T_WHITESPACE","\n",31],["T_CLASS","class",32],["T_WHITESPACE"," ",32],["T_STRING","Mage_Payment_Helper_Data",32],["T_WHITESPACE"," ",32],["T_EXTENDS","extends",32],["T_WHITESPACE"," ",32],["T_STRING","Mage_Core_Helper_Abstract",32],["T_WHITESPACE","\n",32],"{",["T_WHITESPACE","\n    ",33],["T_CONST","const",34],["T_WHITESPACE"," ",34],["T_STRING","XML_PATH_PAYMENT_METHODS",34],["T_WHITESPACE"," ",34],"=",["T_WHITESPACE"," ",34],["T_CONSTANT_ENCAPSED_STRING","'payment'",34],";",["T_WHITESPACE","\n    ",34],["T_CONST","const",35],["T_WHITESPACE"," ",35],["T_STRING","XML_PATH_PAYMENT_GROUPS",35],["T_WHITESPACE"," ",35],"=",["T_WHITESPACE"," ",35],["T_CONSTANT_ENCAPSED_STRING","'global\/payment\/groups'",35],";",["T_WHITESPACE","\n\n    ",35],["T_DOC_COMMENT","\/**\n     * Retrieve method model object\n     *\n     * @param   string $code\n     * @return  Mage_Payment_Model_Method_Abstract|false\n     *\/",37],["T_WHITESPACE","\n    ",42],["T_PUBLIC","public",43],["T_WHITESPACE"," ",43],["T_FUNCTION","function",43],["T_WHITESPACE"," ",43],["T_STRING","getMethodInstance",43],"(",["T_VARIABLE","$code",43],")",["T_WHITESPACE","\n    ",43],"{",["T_WHITESPACE","\n        ",44],["T_VARIABLE","$key",45],["T_WHITESPACE"," ",45],"=",["T_WHITESPACE"," ",45],["T_STRING","self",45],["T_DOUBLE_COLON","::",45],["T_STRING","XML_PATH_PAYMENT_METHODS",45],".",["T_CONSTANT_ENCAPSED_STRING","'\/'",45],".",["T_VARIABLE","$code",45],".",["T_CONSTANT_ENCAPSED_STRING","'\/model'",45],";",["T_WHITESPACE","\n        ",45],["T_VARIABLE","$class",46],["T_WHITESPACE"," ",46],"=",["T_WHITESPACE"," ",46],["T_STRING","Mage",46],["T_DOUBLE_COLON","::",46],["T_STRING","getStoreConfig",46],"(",["T_VARIABLE","$key",46],")",";",["T_WHITESPACE","\n        ",46],["T_RETURN","return",47],["T_WHITESPACE"," ",47],["T_STRING","Mage",47],["T_DOUBLE_COLON","::",47],["T_STRING","getModel",47],"(",["T_VARIABLE","$class",47],")",";",["T_WHITESPACE","\n    ",47],"}",["T_WHITESPACE","\n\n    ",48],["T_DOC_COMMENT","\/**\n     * Get and sort available payment methods for specified or current store\n     *\n     * array structure:\n     *  $index => Varien_Simplexml_Element\n     *\n     * @param mixed $store\n     * @param Mage_Sales_Model_Quote $quote\n     * @return array\n     *\/",50],["T_WHITESPACE","\n    ",59],["T_PUBLIC","public",60],["T_WHITESPACE"," ",60],["T_FUNCTION","function",60],["T_WHITESPACE"," ",60],["T_STRING","getStoreMethods",60],"(",["T_VARIABLE","$store",60],["T_WHITESPACE"," ",60],"=",["T_WHITESPACE"," ",60],["T_STRING","null",60],",",["T_WHITESPACE"," ",60],["T_VARIABLE","$quote",60],["T_WHITESPACE"," ",60],"=",["T_WHITESPACE"," ",60],["T_STRING","null",60],")",["T_WHITESPACE","\n    ",60],"{",["T_WHITESPACE","\n        ",61],["T_VARIABLE","$res",62],["T_WHITESPACE"," ",62],"=",["T_WHITESPACE"," ",62],["T_ARRAY","array",62],"(",")",";",["T_WHITESPACE","\n        ",62],["T_FOREACH","foreach",63],["T_WHITESPACE"," ",63],"(",["T_VARIABLE","$this",63],["T_OBJECT_OPERATOR","->",63],["T_STRING","getPaymentMethods",63],"(",["T_VARIABLE","$store",63],")",["T_WHITESPACE"," ",63],["T_AS","as",63],["T_WHITESPACE"," ",63],["T_VARIABLE","$code",63],["T_WHITESPACE"," ",63],["T_DOUBLE_ARROW","=>",63],["T_WHITESPACE"," ",63],["T_VARIABLE","$methodConfig",63],")",["T_WHITESPACE"," ",63],"{",["T_WHITESPACE","\n            ",63],["T_VARIABLE","$prefix",64],["T_WHITESPACE"," ",64],"=",["T_WHITESPACE"," ",64],["T_STRING","self",64],["T_DOUBLE_COLON","::",64],["T_STRING","XML_PATH_PAYMENT_METHODS",64],["T_WHITESPACE"," ",64],".",["T_WHITESPACE"," ",64],["T_CONSTANT_ENCAPSED_STRING","'\/'",64],["T_WHITESPACE"," ",64],".",["T_WHITESPACE"," ",64],["T_VARIABLE","$code",64],["T_WHITESPACE"," ",64],".",["T_WHITESPACE"," ",64],["T_CONSTANT_ENCAPSED_STRING","'\/'",64],";",["T_WHITESPACE","\n            ",64],["T_IF","if",65],["T_WHITESPACE"," ",65],"(","!",["T_VARIABLE","$model",65],["T_WHITESPACE"," ",65],"=",["T_WHITESPACE"," ",65],["T_STRING","Mage",65],["T_DOUBLE_COLON","::",65],["T_STRING","getStoreConfig",65],"(",["T_VARIABLE","$prefix",65],["T_WHITESPACE"," ",65],".",["T_WHITESPACE"," ",65],["T_CONSTANT_ENCAPSED_STRING","'model'",65],",",["T_WHITESPACE"," ",65],["T_VARIABLE","$store",65],")",")",["T_WHITESPACE"," ",65],"{",["T_WHITESPACE","\n                ",65],["T_CONTINUE","continue",66],";",["T_WHITESPACE","\n            ",66],"}",["T_WHITESPACE","\n            ",67],["T_VARIABLE","$methodInstance",68],["T_WHITESPACE"," ",68],"=",["T_WHITESPACE"," ",68],["T_STRING","Mage",68],["T_DOUBLE_COLON","::",68],["T_STRING","getModel",68],"(",["T_VARIABLE","$model",68],")",";",["T_WHITESPACE","\n            ",68],["T_IF","if",69],["T_WHITESPACE"," ",69],"(","!",["T_VARIABLE","$methodInstance",69],")",["T_WHITESPACE"," ",69],"{",["T_WHITESPACE","\n                ",69],["T_CONTINUE","continue",70],";",["T_WHITESPACE","\n            ",70],"}",["T_WHITESPACE","\n            ",71],["T_VARIABLE","$methodInstance",72],["T_OBJECT_OPERATOR","->",72],["T_STRING","setStore",72],"(",["T_VARIABLE","$store",72],")",";",["T_WHITESPACE","\n            ",72],["T_IF","if",73],["T_WHITESPACE"," ",73],"(","!",["T_VARIABLE","$methodInstance",73],["T_OBJECT_OPERATOR","->",73],["T_STRING","isAvailable",73],"(",["T_VARIABLE","$quote",73],")",")",["T_WHITESPACE"," ",73],"{",["T_WHITESPACE","\n                ",73],["T_COMMENT","\/* if the payment method cannot be used at this time *\/",74],["T_WHITESPACE","\n                ",74],["T_CONTINUE","continue",75],";",["T_WHITESPACE","\n            ",75],"}",["T_WHITESPACE","\n            ",76],["T_VARIABLE","$sortOrder",77],["T_WHITESPACE"," ",77],"=",["T_WHITESPACE"," ",77],["T_INT_CAST","(int)",77],["T_VARIABLE","$methodInstance",77],["T_OBJECT_OPERATOR","->",77],["T_STRING","getConfigData",77],"(",["T_CONSTANT_ENCAPSED_STRING","'sort_order'",77],",",["T_WHITESPACE"," ",77],["T_VARIABLE","$store",77],")",";",["T_WHITESPACE","\n            ",77],["T_VARIABLE","$methodInstance",78],["T_OBJECT_OPERATOR","->",78],["T_STRING","setSortOrder",78],"(",["T_VARIABLE","$sortOrder",78],")",";",["T_WHITESPACE","\n            ",78],["T_VARIABLE","$res",79],"[","]",["T_WHITESPACE"," ",79],"=",["T_WHITESPACE"," ",79],["T_VARIABLE","$methodInstance",79],";",["T_WHITESPACE","\n        ",79],"}",["T_WHITESPACE","\n\n        ",80],["T_STRING","usort",82],"(",["T_VARIABLE","$res",82],",",["T_WHITESPACE"," ",82],["T_ARRAY","array",82],"(",["T_VARIABLE","$this",82],",",["T_WHITESPACE"," ",82],["T_CONSTANT_ENCAPSED_STRING","'_sortMethods'",82],")",")",";",["T_WHITESPACE","\n        ",82],["T_RETURN","return",83],["T_WHITESPACE"," ",83],["T_VARIABLE","$res",83],";",["T_WHITESPACE","\n    ",83],"}",["T_WHITESPACE","\n\n    ",84],["T_PROTECTED","protected",86],["T_WHITESPACE"," ",86],["T_FUNCTION","function",86],["T_WHITESPACE"," ",86],["T_STRING","_sortMethods",86],"(",["T_VARIABLE","$a",86],",",["T_WHITESPACE"," ",86],["T_VARIABLE","$b",86],")",["T_WHITESPACE","\n    ",86],"{",["T_WHITESPACE","\n        ",87],["T_IF","if",88],["T_WHITESPACE"," ",88],"(",["T_STRING","is_object",88],"(",["T_VARIABLE","$a",88],")",")",["T_WHITESPACE"," ",88],"{",["T_WHITESPACE","\n            ",88],["T_RETURN","return",89],["T_WHITESPACE"," ",89],["T_INT_CAST","(int)",89],["T_VARIABLE","$a",89],["T_OBJECT_OPERATOR","->",89],["T_STRING","sort_order",89],["T_WHITESPACE"," ",89],"<",["T_WHITESPACE"," ",89],["T_INT_CAST","(int)",89],["T_VARIABLE","$b",89],["T_OBJECT_OPERATOR","->",89],["T_STRING","sort_order",89],["T_WHITESPACE"," ",89],"?",["T_WHITESPACE"," ",89],"-",["T_LNUMBER","1",89],["T_WHITESPACE"," ",89],":",["T_WHITESPACE"," ",89],"(",["T_INT_CAST","(int)",89],["T_VARIABLE","$a",89],["T_OBJECT_OPERATOR","->",89],["T_STRING","sort_order",89],["T_WHITESPACE"," ",89],">",["T_WHITESPACE"," ",89],["T_INT_CAST","(int)",89],["T_VARIABLE","$b",89],["T_OBJECT_OPERATOR","->",89],["T_STRING","sort_order",89],["T_WHITESPACE"," ",89],"?",["T_WHITESPACE"," ",89],["T_LNUMBER","1",89],["T_WHITESPACE"," ",89],":",["T_WHITESPACE"," ",89],["T_LNUMBER","0",89],")",";",["T_WHITESPACE","\n        ",89],"}",["T_WHITESPACE","\n        ",90],["T_RETURN","return",91],["T_WHITESPACE"," ",91],["T_LNUMBER","0",91],";",["T_WHITESPACE","\n    ",91],"}",["T_WHITESPACE","\n\n    ",92],["T_DOC_COMMENT","\/**\n     * Retreive payment method form html\n     *\n     * @param   Mage_Payment_Model_Abstract $method\n     * @return  Mage_Payment_Block_Form\n     *\/",94],["T_WHITESPACE","\n    ",99],["T_PUBLIC","public",100],["T_WHITESPACE"," ",100],["T_FUNCTION","function",100],["T_WHITESPACE"," ",100],["T_STRING","getMethodFormBlock",100],"(",["T_STRING","Mage_Payment_Model_Method_Abstract",100],["T_WHITESPACE"," ",100],["T_VARIABLE","$method",100],")",["T_WHITESPACE","\n    ",100],"{",["T_WHITESPACE","\n        ",101],["T_VARIABLE","$block",102],["T_WHITESPACE"," ",102],"=",["T_WHITESPACE"," ",102],["T_STRING","false",102],";",["T_WHITESPACE","\n        ",102],["T_VARIABLE","$blockType",103],["T_WHITESPACE"," ",103],"=",["T_WHITESPACE"," ",103],["T_VARIABLE","$method",103],["T_OBJECT_OPERATOR","->",103],["T_STRING","getFormBlockType",103],"(",")",";",["T_WHITESPACE","\n        ",103],["T_IF","if",104],["T_WHITESPACE"," ",104],"(",["T_VARIABLE","$this",104],["T_OBJECT_OPERATOR","->",104],["T_STRING","getLayout",104],"(",")",")",["T_WHITESPACE"," ",104],"{",["T_WHITESPACE","\n            ",104],["T_VARIABLE","$block",105],["T_WHITESPACE"," ",105],"=",["T_WHITESPACE"," ",105],["T_VARIABLE","$this",105],["T_OBJECT_OPERATOR","->",105],["T_STRING","getLayout",105],"(",")",["T_OBJECT_OPERATOR","->",105],["T_STRING","createBlock",105],"(",["T_VARIABLE","$blockType",105],")",";",["T_WHITESPACE","\n            ",105],["T_VARIABLE","$block",106],["T_OBJECT_OPERATOR","->",106],["T_STRING","setMethod",106],"(",["T_VARIABLE","$method",106],")",";",["T_WHITESPACE","\n        ",106],"}",["T_WHITESPACE","\n        ",107],["T_RETURN","return",108],["T_WHITESPACE"," ",108],["T_VARIABLE","$block",108],";",["T_WHITESPACE","\n    ",108],"}",["T_WHITESPACE","\n\n    ",109],["T_DOC_COMMENT","\/**\n     * Retrieve payment information block\n     *\n     * @param   Mage_Payment_Model_Info $info\n     * @return  Mage_Core_Block_Template\n     *\/",111],["T_WHITESPACE","\n    ",116],["T_PUBLIC","public",117],["T_WHITESPACE"," ",117],["T_FUNCTION","function",117],["T_WHITESPACE"," ",117],["T_STRING","getInfoBlock",117],"(",["T_STRING","Mage_Payment_Model_Info",117],["T_WHITESPACE"," ",117],["T_VARIABLE","$info",117],")",["T_WHITESPACE","\n    ",117],"{",["T_WHITESPACE","\n        ",118],["T_VARIABLE","$blockType",119],["T_WHITESPACE"," ",119],"=",["T_WHITESPACE"," ",119],["T_VARIABLE","$info",119],["T_OBJECT_OPERATOR","->",119],["T_STRING","getMethodInstance",119],"(",")",["T_OBJECT_OPERATOR","->",119],["T_STRING","getInfoBlockType",119],"(",")",";",["T_WHITESPACE","\n        ",119],["T_IF","if",120],["T_WHITESPACE"," ",120],"(",["T_VARIABLE","$this",120],["T_OBJECT_OPERATOR","->",120],["T_STRING","getLayout",120],"(",")",")",["T_WHITESPACE"," ",120],"{",["T_WHITESPACE","\n            ",120],["T_VARIABLE","$block",121],["T_WHITESPACE"," ",121],"=",["T_WHITESPACE"," ",121],["T_VARIABLE","$this",121],["T_OBJECT_OPERATOR","->",121],["T_STRING","getLayout",121],"(",")",["T_OBJECT_OPERATOR","->",121],["T_STRING","createBlock",121],"(",["T_VARIABLE","$blockType",121],")",";",["T_WHITESPACE","\n        ",121],"}",["T_WHITESPACE","\n        ",122],["T_ELSE","else",123],["T_WHITESPACE"," ",123],"{",["T_WHITESPACE","\n            ",123],["T_VARIABLE","$className",124],["T_WHITESPACE"," ",124],"=",["T_WHITESPACE"," ",124],["T_STRING","Mage",124],["T_DOUBLE_COLON","::",124],["T_STRING","getConfig",124],"(",")",["T_OBJECT_OPERATOR","->",124],["T_STRING","getBlockClassName",124],"(",["T_VARIABLE","$blockType",124],")",";",["T_WHITESPACE","\n            ",124],["T_VARIABLE","$block",125],["T_WHITESPACE"," ",125],"=",["T_WHITESPACE"," ",125],["T_NEW","new",125],["T_WHITESPACE"," ",125],["T_VARIABLE","$className",125],";",["T_WHITESPACE","\n        ",125],"}",["T_WHITESPACE","\n        ",126],["T_VARIABLE","$block",127],["T_OBJECT_OPERATOR","->",127],["T_STRING","setInfo",127],"(",["T_VARIABLE","$info",127],")",";",["T_WHITESPACE","\n        ",127],["T_RETURN","return",128],["T_WHITESPACE"," ",128],["T_VARIABLE","$block",128],";",["T_WHITESPACE","\n    ",128],"}",["T_WHITESPACE","\n\n    ",129],["T_DOC_COMMENT","\/**\n     * Retrieve available billing agreement methods\n     *\n     * @param mixed $store\n     * @param Mage_Sales_Model_Quote $quote\n     * @return array\n     *\/",131],["T_WHITESPACE","\n    ",137],["T_PUBLIC","public",138],["T_WHITESPACE"," ",138],["T_FUNCTION","function",138],["T_WHITESPACE"," ",138],["T_STRING","getBillingAgreementMethods",138],"(",["T_VARIABLE","$store",138],["T_WHITESPACE"," ",138],"=",["T_WHITESPACE"," ",138],["T_STRING","null",138],",",["T_WHITESPACE"," ",138],["T_VARIABLE","$quote",138],["T_WHITESPACE"," ",138],"=",["T_WHITESPACE"," ",138],["T_STRING","null",138],")",["T_WHITESPACE","\n    ",138],"{",["T_WHITESPACE","\n        ",139],["T_VARIABLE","$result",140],["T_WHITESPACE"," ",140],"=",["T_WHITESPACE"," ",140],["T_ARRAY","array",140],"(",")",";",["T_WHITESPACE","\n        ",140],["T_FOREACH","foreach",141],["T_WHITESPACE"," ",141],"(",["T_VARIABLE","$this",141],["T_OBJECT_OPERATOR","->",141],["T_STRING","getStoreMethods",141],"(",["T_VARIABLE","$store",141],",",["T_WHITESPACE"," ",141],["T_VARIABLE","$quote",141],")",["T_WHITESPACE"," ",141],["T_AS","as",141],["T_WHITESPACE"," ",141],["T_VARIABLE","$method",141],")",["T_WHITESPACE"," ",141],"{",["T_WHITESPACE","\n            ",141],["T_IF","if",142],["T_WHITESPACE"," ",142],"(",["T_VARIABLE","$method",142],["T_OBJECT_OPERATOR","->",142],["T_STRING","canManageBillingAgreements",142],"(",")",")",["T_WHITESPACE"," ",142],"{",["T_WHITESPACE","\n                ",142],["T_VARIABLE","$result",143],"[","]",["T_WHITESPACE"," ",143],"=",["T_WHITESPACE"," ",143],["T_VARIABLE","$method",143],";",["T_WHITESPACE","\n            ",143],"}",["T_WHITESPACE","\n        ",144],"}",["T_WHITESPACE","\n        ",145],["T_RETURN","return",146],["T_WHITESPACE"," ",146],["T_VARIABLE","$result",146],";",["T_WHITESPACE","\n    ",146],"}",["T_WHITESPACE","\n\n    ",147],["T_DOC_COMMENT","\/**\n     * Get payment methods that implement recurring profilez management\n     *\n     * @param mixed $store\n     * @return array\n     *\/",149],["T_WHITESPACE","\n    ",154],["T_PUBLIC","public",155],["T_WHITESPACE"," ",155],["T_FUNCTION","function",155],["T_WHITESPACE"," ",155],["T_STRING","getRecurringProfileMethods",155],"(",["T_VARIABLE","$store",155],["T_WHITESPACE"," ",155],"=",["T_WHITESPACE"," ",155],["T_STRING","null",155],")",["T_WHITESPACE","\n    ",155],"{",["T_WHITESPACE","\n        ",156],["T_VARIABLE","$result",157],["T_WHITESPACE"," ",157],"=",["T_WHITESPACE"," ",157],["T_ARRAY","array",157],"(",")",";",["T_WHITESPACE","\n        ",157],["T_FOREACH","foreach",158],["T_WHITESPACE"," ",158],"(",["T_VARIABLE","$this",158],["T_OBJECT_OPERATOR","->",158],["T_STRING","getPaymentMethods",158],"(",["T_VARIABLE","$store",158],")",["T_WHITESPACE"," ",158],["T_AS","as",158],["T_WHITESPACE"," ",158],["T_VARIABLE","$code",158],["T_WHITESPACE"," ",158],["T_DOUBLE_ARROW","=>",158],["T_WHITESPACE"," ",158],["T_VARIABLE","$data",158],")",["T_WHITESPACE"," ",158],"{",["T_WHITESPACE","\n            ",158],["T_VARIABLE","$method",159],["T_WHITESPACE"," ",159],"=",["T_WHITESPACE"," ",159],["T_VARIABLE","$this",159],["T_OBJECT_OPERATOR","->",159],["T_STRING","getMethodInstance",159],"(",["T_VARIABLE","$code",159],")",";",["T_WHITESPACE","\n            ",159],["T_IF","if",160],["T_WHITESPACE"," ",160],"(",["T_VARIABLE","$method",160],["T_WHITESPACE"," ",160],["T_BOOLEAN_AND","&&",160],["T_WHITESPACE"," ",160],["T_VARIABLE","$method",160],["T_OBJECT_OPERATOR","->",160],["T_STRING","canManageRecurringProfiles",160],"(",")",")",["T_WHITESPACE"," ",160],"{",["T_WHITESPACE","\n                ",160],["T_VARIABLE","$result",161],"[","]",["T_WHITESPACE"," ",161],"=",["T_WHITESPACE"," ",161],["T_VARIABLE","$method",161],";",["T_WHITESPACE","\n            ",161],"}",["T_WHITESPACE","\n        ",162],"}",["T_WHITESPACE","\n        ",163],["T_RETURN","return",164],["T_WHITESPACE"," ",164],["T_VARIABLE","$result",164],";",["T_WHITESPACE","\n    ",164],"}",["T_WHITESPACE","\n\n    ",165],["T_DOC_COMMENT","\/**\n     * Retrieve all payment methods\n     *\n     * @param mixed $store\n     * @return array\n     *\/",167],["T_WHITESPACE","\n    ",172],["T_PUBLIC","public",173],["T_WHITESPACE"," ",173],["T_FUNCTION","function",173],["T_WHITESPACE"," ",173],["T_STRING","getPaymentMethods",173],"(",["T_VARIABLE","$store",173],["T_WHITESPACE"," ",173],"=",["T_WHITESPACE"," ",173],["T_STRING","null",173],")",["T_WHITESPACE","\n    ",173],"{",["T_WHITESPACE","\n        ",174],["T_RETURN","return",175],["T_WHITESPACE"," ",175],["T_STRING","Mage",175],["T_DOUBLE_COLON","::",175],["T_STRING","getStoreConfig",175],"(",["T_STRING","self",175],["T_DOUBLE_COLON","::",175],["T_STRING","XML_PATH_PAYMENT_METHODS",175],",",["T_WHITESPACE"," ",175],["T_VARIABLE","$store",175],")",";",["T_WHITESPACE","\n    ",175],"}",["T_WHITESPACE","\n\n    ",176],["T_DOC_COMMENT","\/**\n     * Retrieve all payment methods list as an array\n     *\n     * Possible output:\n     * 1) assoc array as <code> => <title>\n     * 2) array of array('label' => <title>, 'value' => <code>)\n     * 3) array of array(\n     *                 array('value' => <code>, 'label' => <title>),\n     *                 array('value' => array(\n     *                     'value' => array(array(<code1> => <title1>, <code2> =>...),\n     *                     'label' => <group name>\n     *                 )),\n     *                 array('value' => <code>, 'label' => <title>),\n     *                 ...\n     *             )\n     *\n     * @param bool $sorted\n     * @param bool $asLabelValue\n     * @param bool $withGroups\n     * @return array\n     *\/",178],["T_WHITESPACE","\n    ",198],["T_PUBLIC","public",199],["T_WHITESPACE"," ",199],["T_FUNCTION","function",199],["T_WHITESPACE"," ",199],["T_STRING","getPaymentMethodList",199],"(",["T_VARIABLE","$sorted",199],["T_WHITESPACE"," ",199],"=",["T_WHITESPACE"," ",199],["T_STRING","true",199],",",["T_WHITESPACE"," ",199],["T_VARIABLE","$asLabelValue",199],["T_WHITESPACE"," ",199],"=",["T_WHITESPACE"," ",199],["T_STRING","false",199],",",["T_WHITESPACE"," ",199],["T_VARIABLE","$withGroups",199],["T_WHITESPACE"," ",199],"=",["T_WHITESPACE"," ",199],["T_STRING","false",199],",",["T_WHITESPACE"," ",199],["T_VARIABLE","$store",199],["T_WHITESPACE"," ",199],"=",["T_WHITESPACE"," ",199],["T_STRING","null",199],")",["T_WHITESPACE","\n    ",199],"{",["T_WHITESPACE","\n        ",200],["T_VARIABLE","$methods",201],["T_WHITESPACE"," ",201],"=",["T_WHITESPACE"," ",201],["T_ARRAY","array",201],"(",")",";",["T_WHITESPACE","\n        ",201],["T_VARIABLE","$groups",202],["T_WHITESPACE"," ",202],"=",["T_WHITESPACE"," ",202],["T_ARRAY","array",202],"(",")",";",["T_WHITESPACE","\n        ",202],["T_VARIABLE","$groupRelations",203],["T_WHITESPACE"," ",203],"=",["T_WHITESPACE"," ",203],["T_ARRAY","array",203],"(",")",";",["T_WHITESPACE","\n\n        ",203],["T_FOREACH","foreach",205],["T_WHITESPACE"," ",205],"(",["T_VARIABLE","$this",205],["T_OBJECT_OPERATOR","->",205],["T_STRING","getPaymentMethods",205],"(",["T_VARIABLE","$store",205],")",["T_WHITESPACE"," ",205],["T_AS","as",205],["T_WHITESPACE"," ",205],["T_VARIABLE","$code",205],["T_WHITESPACE"," ",205],["T_DOUBLE_ARROW","=>",205],["T_WHITESPACE"," ",205],["T_VARIABLE","$data",205],")",["T_WHITESPACE"," ",205],"{",["T_WHITESPACE","\n            ",205],["T_IF","if",206],["T_WHITESPACE"," ",206],"(","(",["T_ISSET","isset",206],"(",["T_VARIABLE","$data",206],"[",["T_CONSTANT_ENCAPSED_STRING","'title'",206],"]",")",")",")",["T_WHITESPACE"," ",206],"{",["T_WHITESPACE","\n                ",206],["T_VARIABLE","$methods",207],"[",["T_VARIABLE","$code",207],"]",["T_WHITESPACE"," ",207],"=",["T_WHITESPACE"," ",207],["T_VARIABLE","$data",207],"[",["T_CONSTANT_ENCAPSED_STRING","'title'",207],"]",";",["T_WHITESPACE","\n            ",207],"}",["T_WHITESPACE"," ",208],["T_ELSE","else",208],["T_WHITESPACE"," ",208],"{",["T_WHITESPACE","\n                ",208],["T_IF","if",209],["T_WHITESPACE"," ",209],"(",["T_VARIABLE","$this",209],["T_OBJECT_OPERATOR","->",209],["T_STRING","getMethodInstance",209],"(",["T_VARIABLE","$code",209],")",")",["T_WHITESPACE"," ",209],"{",["T_WHITESPACE","\n                    ",209],["T_VARIABLE","$methods",210],"[",["T_VARIABLE","$code",210],"]",["T_WHITESPACE"," ",210],"=",["T_WHITESPACE"," ",210],["T_VARIABLE","$this",210],["T_OBJECT_OPERATOR","->",210],["T_STRING","getMethodInstance",210],"(",["T_VARIABLE","$code",210],")",["T_OBJECT_OPERATOR","->",210],["T_STRING","getConfigData",210],"(",["T_CONSTANT_ENCAPSED_STRING","'title'",210],",",["T_WHITESPACE"," ",210],["T_VARIABLE","$store",210],")",";",["T_WHITESPACE","\n                ",210],"}",["T_WHITESPACE","\n            ",211],"}",["T_WHITESPACE","\n            ",212],["T_IF","if",213],["T_WHITESPACE"," ",213],"(",["T_VARIABLE","$asLabelValue",213],["T_WHITESPACE"," ",213],["T_BOOLEAN_AND","&&",213],["T_WHITESPACE"," ",213],["T_VARIABLE","$withGroups",213],["T_WHITESPACE"," ",213],["T_BOOLEAN_AND","&&",213],["T_WHITESPACE"," ",213],["T_ISSET","isset",213],"(",["T_VARIABLE","$data",213],"[",["T_CONSTANT_ENCAPSED_STRING","'group'",213],"]",")",")",["T_WHITESPACE"," ",213],"{",["T_WHITESPACE","\n                ",213],["T_VARIABLE","$groupRelations",214],"[",["T_VARIABLE","$code",214],"]",["T_WHITESPACE"," ",214],"=",["T_WHITESPACE"," ",214],["T_VARIABLE","$data",214],"[",["T_CONSTANT_ENCAPSED_STRING","'group'",214],"]",";",["T_WHITESPACE","\n            ",214],"}",["T_WHITESPACE","\n        ",215],"}",["T_WHITESPACE","\n        ",216],["T_IF","if",217],["T_WHITESPACE"," ",217],"(",["T_VARIABLE","$asLabelValue",217],["T_WHITESPACE"," ",217],["T_BOOLEAN_AND","&&",217],["T_WHITESPACE"," ",217],["T_VARIABLE","$withGroups",217],")",["T_WHITESPACE"," ",217],"{",["T_WHITESPACE","\n            ",217],["T_VARIABLE","$groups",218],["T_WHITESPACE"," ",218],"=",["T_WHITESPACE"," ",218],["T_STRING","Mage",218],["T_DOUBLE_COLON","::",218],["T_STRING","app",218],"(",")",["T_OBJECT_OPERATOR","->",218],["T_STRING","getConfig",218],"(",")",["T_OBJECT_OPERATOR","->",218],["T_STRING","getNode",218],"(",["T_STRING","self",218],["T_DOUBLE_COLON","::",218],["T_STRING","XML_PATH_PAYMENT_GROUPS",218],")",["T_OBJECT_OPERATOR","->",218],["T_STRING","asCanonicalArray",218],"(",")",";",["T_WHITESPACE","\n            ",218],["T_FOREACH","foreach",219],["T_WHITESPACE"," ",219],"(",["T_VARIABLE","$groups",219],["T_WHITESPACE"," ",219],["T_AS","as",219],["T_WHITESPACE"," ",219],["T_VARIABLE","$code",219],["T_WHITESPACE"," ",219],["T_DOUBLE_ARROW","=>",219],["T_WHITESPACE"," ",219],["T_VARIABLE","$title",219],")",["T_WHITESPACE"," ",219],"{",["T_WHITESPACE","\n                ",219],["T_VARIABLE","$methods",220],"[",["T_VARIABLE","$code",220],"]",["T_WHITESPACE"," ",220],"=",["T_WHITESPACE"," ",220],["T_VARIABLE","$title",220],";",["T_WHITESPACE"," ",220],["T_COMMENT","\/\/ for sorting, see below\n",220],["T_WHITESPACE","            ",221],"}",["T_WHITESPACE","\n        ",221],"}",["T_WHITESPACE","\n        ",222],["T_IF","if",223],["T_WHITESPACE"," ",223],"(",["T_VARIABLE","$sorted",223],")",["T_WHITESPACE"," ",223],"{",["T_WHITESPACE","\n            ",223],["T_STRING","asort",224],"(",["T_VARIABLE","$methods",224],")",";",["T_WHITESPACE","\n        ",224],"}",["T_WHITESPACE","\n        ",225],["T_IF","if",226],["T_WHITESPACE"," ",226],"(",["T_VARIABLE","$asLabelValue",226],")",["T_WHITESPACE"," ",226],"{",["T_WHITESPACE","\n            ",226],["T_VARIABLE","$labelValues",227],["T_WHITESPACE"," ",227],"=",["T_WHITESPACE"," ",227],["T_ARRAY","array",227],"(",")",";",["T_WHITESPACE","\n            ",227],["T_FOREACH","foreach",228],["T_WHITESPACE"," ",228],"(",["T_VARIABLE","$methods",228],["T_WHITESPACE"," ",228],["T_AS","as",228],["T_WHITESPACE"," ",228],["T_VARIABLE","$code",228],["T_WHITESPACE"," ",228],["T_DOUBLE_ARROW","=>",228],["T_WHITESPACE"," ",228],["T_VARIABLE","$title",228],")",["T_WHITESPACE"," ",228],"{",["T_WHITESPACE","\n                ",228],["T_VARIABLE","$labelValues",229],"[",["T_VARIABLE","$code",229],"]",["T_WHITESPACE"," ",229],"=",["T_WHITESPACE"," ",229],["T_ARRAY","array",229],"(",")",";",["T_WHITESPACE","\n            ",229],"}",["T_WHITESPACE","\n            ",230],["T_FOREACH","foreach",231],["T_WHITESPACE"," ",231],"(",["T_VARIABLE","$methods",231],["T_WHITESPACE"," ",231],["T_AS","as",231],["T_WHITESPACE"," ",231],["T_VARIABLE","$code",231],["T_WHITESPACE"," ",231],["T_DOUBLE_ARROW","=>",231],["T_WHITESPACE"," ",231],["T_VARIABLE","$title",231],")",["T_WHITESPACE"," ",231],"{",["T_WHITESPACE","\n                ",231],["T_IF","if",232],["T_WHITESPACE"," ",232],"(",["T_ISSET","isset",232],"(",["T_VARIABLE","$groups",232],"[",["T_VARIABLE","$code",232],"]",")",")",["T_WHITESPACE"," ",232],"{",["T_WHITESPACE","\n                    ",232],["T_VARIABLE","$labelValues",233],"[",["T_VARIABLE","$code",233],"]","[",["T_CONSTANT_ENCAPSED_STRING","'label'",233],"]",["T_WHITESPACE"," ",233],"=",["T_WHITESPACE"," ",233],["T_VARIABLE","$title",233],";",["T_WHITESPACE","\n                ",233],"}",["T_WHITESPACE"," ",234],["T_ELSEIF","elseif",234],["T_WHITESPACE"," ",234],"(",["T_ISSET","isset",234],"(",["T_VARIABLE","$groupRelations",234],"[",["T_VARIABLE","$code",234],"]",")",")",["T_WHITESPACE"," ",234],"{",["T_WHITESPACE","\n                    ",234],["T_UNSET","unset",235],"(",["T_VARIABLE","$labelValues",235],"[",["T_VARIABLE","$code",235],"]",")",";",["T_WHITESPACE","\n                    ",235],["T_VARIABLE","$labelValues",236],"[",["T_VARIABLE","$groupRelations",236],"[",["T_VARIABLE","$code",236],"]","]","[",["T_CONSTANT_ENCAPSED_STRING","'value'",236],"]","[",["T_VARIABLE","$code",236],"]",["T_WHITESPACE"," ",236],"=",["T_WHITESPACE"," ",236],["T_ARRAY","array",236],"(",["T_CONSTANT_ENCAPSED_STRING","'value'",236],["T_WHITESPACE"," ",236],["T_DOUBLE_ARROW","=>",236],["T_WHITESPACE"," ",236],["T_VARIABLE","$code",236],",",["T_WHITESPACE"," ",236],["T_CONSTANT_ENCAPSED_STRING","'label'",236],["T_WHITESPACE"," ",236],["T_DOUBLE_ARROW","=>",236],["T_WHITESPACE"," ",236],["T_VARIABLE","$title",236],")",";",["T_WHITESPACE","\n                ",236],"}",["T_WHITESPACE"," ",237],["T_ELSE","else",237],["T_WHITESPACE"," ",237],"{",["T_WHITESPACE","\n                    ",237],["T_VARIABLE","$labelValues",238],"[",["T_VARIABLE","$code",238],"]",["T_WHITESPACE"," ",238],"=",["T_WHITESPACE"," ",238],["T_ARRAY","array",238],"(",["T_CONSTANT_ENCAPSED_STRING","'value'",238],["T_WHITESPACE"," ",238],["T_DOUBLE_ARROW","=>",238],["T_WHITESPACE"," ",238],["T_VARIABLE","$code",238],",",["T_WHITESPACE"," ",238],["T_CONSTANT_ENCAPSED_STRING","'label'",238],["T_WHITESPACE"," ",238],["T_DOUBLE_ARROW","=>",238],["T_WHITESPACE"," ",238],["T_VARIABLE","$title",238],")",";",["T_WHITESPACE","\n                ",238],"}",["T_WHITESPACE","\n            ",239],"}",["T_WHITESPACE","\n            ",240],["T_RETURN","return",241],["T_WHITESPACE"," ",241],["T_VARIABLE","$labelValues",241],";",["T_WHITESPACE","\n        ",241],"}",["T_WHITESPACE","\n\n        ",242],["T_RETURN","return",244],["T_WHITESPACE"," ",244],["T_VARIABLE","$methods",244],";",["T_WHITESPACE","\n    ",244],"}",["T_WHITESPACE","\n\n    ",245],["T_DOC_COMMENT","\/**\n     * Retrieve all billing agreement methods (code and label)\n     *\n     * @return array\n     *\/",247],["T_WHITESPACE","\n    ",251],["T_PUBLIC","public",252],["T_WHITESPACE"," ",252],["T_FUNCTION","function",252],["T_WHITESPACE"," ",252],["T_STRING","getAllBillingAgreementMethods",252],"(",")",["T_WHITESPACE","\n    ",252],"{",["T_WHITESPACE","\n        ",253],["T_VARIABLE","$result",254],["T_WHITESPACE"," ",254],"=",["T_WHITESPACE"," ",254],["T_ARRAY","array",254],"(",")",";",["T_WHITESPACE","\n        ",254],["T_VARIABLE","$interface",255],["T_WHITESPACE"," ",255],"=",["T_WHITESPACE"," ",255],["T_CONSTANT_ENCAPSED_STRING","'Mage_Payment_Model_Billing_Agreement_MethodInterface'",255],";",["T_WHITESPACE","\n        ",255],["T_FOREACH","foreach",256],["T_WHITESPACE"," ",256],"(",["T_VARIABLE","$this",256],["T_OBJECT_OPERATOR","->",256],["T_STRING","getPaymentMethods",256],"(",")",["T_WHITESPACE"," ",256],["T_AS","as",256],["T_WHITESPACE"," ",256],["T_VARIABLE","$code",256],["T_WHITESPACE"," ",256],["T_DOUBLE_ARROW","=>",256],["T_WHITESPACE"," ",256],["T_VARIABLE","$data",256],")",["T_WHITESPACE"," ",256],"{",["T_WHITESPACE","\n            ",256],["T_IF","if",257],["T_WHITESPACE"," ",257],"(","!",["T_ISSET","isset",257],"(",["T_VARIABLE","$data",257],"[",["T_CONSTANT_ENCAPSED_STRING","'model'",257],"]",")",")",["T_WHITESPACE"," ",257],"{",["T_WHITESPACE","\n                ",257],["T_CONTINUE","continue",258],";",["T_WHITESPACE","\n            ",258],"}",["T_WHITESPACE","\n            ",259],["T_VARIABLE","$method",260],["T_WHITESPACE"," ",260],"=",["T_WHITESPACE"," ",260],["T_STRING","Mage",260],["T_DOUBLE_COLON","::",260],["T_STRING","app",260],"(",")",["T_OBJECT_OPERATOR","->",260],["T_STRING","getConfig",260],"(",")",["T_OBJECT_OPERATOR","->",260],["T_STRING","getModelClassName",260],"(",["T_VARIABLE","$data",260],"[",["T_CONSTANT_ENCAPSED_STRING","'model'",260],"]",")",";",["T_WHITESPACE","\n            ",260],["T_IF","if",261],["T_WHITESPACE"," ",261],"(",["T_STRING","in_array",261],"(",["T_VARIABLE","$interface",261],",",["T_WHITESPACE"," ",261],["T_STRING","class_implements",261],"(",["T_VARIABLE","$method",261],")",")",")",["T_WHITESPACE"," ",261],"{",["T_WHITESPACE","\n                ",261],["T_VARIABLE","$result",262],"[",["T_VARIABLE","$code",262],"]",["T_WHITESPACE"," ",262],"=",["T_WHITESPACE"," ",262],["T_VARIABLE","$data",262],"[",["T_CONSTANT_ENCAPSED_STRING","'title'",262],"]",";",["T_WHITESPACE","\n            ",262],"}",["T_WHITESPACE","\n        ",263],"}",["T_WHITESPACE","\n        ",264],["T_RETURN","return",265],["T_WHITESPACE"," ",265],["T_VARIABLE","$result",265],";",["T_WHITESPACE","\n    ",265],"}",["T_WHITESPACE","\n\n    ",266],["T_DOC_COMMENT","\/**\n     * Returns value of Zero Subtotal Checkout \/ Enabled\n     *\n     * @param mixed $store\n     * @return boolean\n     *\/",268],["T_WHITESPACE","\n    ",273],["T_PUBLIC","public",274],["T_WHITESPACE"," ",274],["T_FUNCTION","function",274],["T_WHITESPACE"," ",274],["T_STRING","isZeroSubTotal",274],"(",["T_VARIABLE","$store",274],["T_WHITESPACE"," ",274],"=",["T_WHITESPACE"," ",274],["T_STRING","null",274],")",["T_WHITESPACE","\n    ",274],"{",["T_WHITESPACE","\n        ",275],["T_RETURN","return",276],["T_WHITESPACE"," ",276],["T_STRING","Mage",276],["T_DOUBLE_COLON","::",276],["T_STRING","getStoreConfig",276],"(",["T_STRING","Mage_Payment_Model_Method_Free",276],["T_DOUBLE_COLON","::",276],["T_STRING","XML_PATH_PAYMENT_FREE_ACTIVE",276],",",["T_WHITESPACE"," ",276],["T_VARIABLE","$store",276],")",";",["T_WHITESPACE","\n    ",276],"}",["T_WHITESPACE","\n\n    ",277],["T_DOC_COMMENT","\/**\n     * Returns value of Zero Subtotal Checkout \/ New Order Status\n     *\n     * @param mixed $store\n     * @return string\n     *\/",279],["T_WHITESPACE","\n    ",284],["T_PUBLIC","public",285],["T_WHITESPACE"," ",285],["T_FUNCTION","function",285],["T_WHITESPACE"," ",285],["T_STRING","getZeroSubTotalOrderStatus",285],"(",["T_VARIABLE","$store",285],["T_WHITESPACE"," ",285],"=",["T_WHITESPACE"," ",285],["T_STRING","null",285],")",["T_WHITESPACE","\n    ",285],"{",["T_WHITESPACE","\n        ",286],["T_RETURN","return",287],["T_WHITESPACE"," ",287],["T_STRING","Mage",287],["T_DOUBLE_COLON","::",287],["T_STRING","getStoreConfig",287],"(",["T_STRING","Mage_Payment_Model_Method_Free",287],["T_DOUBLE_COLON","::",287],["T_STRING","XML_PATH_PAYMENT_FREE_ORDER_STATUS",287],",",["T_WHITESPACE"," ",287],["T_VARIABLE","$store",287],")",";",["T_WHITESPACE","\n    ",287],"}",["T_WHITESPACE","\n\n    ",288],["T_DOC_COMMENT","\/**\n     * Returns value of Zero Subtotal Checkout \/ Automatically Invoice All Items\n     *\n     * @param mixed $store\n     * @return string\n     *\/",290],["T_WHITESPACE","\n    ",295],["T_PUBLIC","public",296],["T_WHITESPACE"," ",296],["T_FUNCTION","function",296],["T_WHITESPACE"," ",296],["T_STRING","getZeroSubTotalPaymentAutomaticInvoice",296],"(",["T_VARIABLE","$store",296],["T_WHITESPACE"," ",296],"=",["T_WHITESPACE"," ",296],["T_STRING","null",296],")",["T_WHITESPACE","\n    ",296],"{",["T_WHITESPACE","\n        ",297],["T_RETURN","return",298],["T_WHITESPACE"," ",298],["T_STRING","Mage",298],["T_DOUBLE_COLON","::",298],["T_STRING","getStoreConfig",298],"(",["T_STRING","Mage_Payment_Model_Method_Free",298],["T_DOUBLE_COLON","::",298],["T_STRING","XML_PATH_PAYMENT_FREE_PAYMENT_ACTION",298],",",["T_WHITESPACE"," ",298],["T_VARIABLE","$store",298],")",";",["T_WHITESPACE","\n    ",298],"}",["T_WHITESPACE","\n",299],"}",["T_WHITESPACE","\n",300]]
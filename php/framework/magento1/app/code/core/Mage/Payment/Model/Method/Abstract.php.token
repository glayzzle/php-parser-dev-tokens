[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Magento\n *\n * NOTICE OF LICENSE\n *\n * This source file is subject to the Open Software License (OSL 3.0)\n * that is bundled with this package in the file LICENSE.txt.\n * It is also available through the world-wide-web at this URL:\n * http:\/\/opensource.org\/licenses\/osl-3.0.php\n * If you did not receive a copy of the license and are unable to\n * obtain it through the world-wide-web, please send an email\n * to license@magento.com so we can send you a copy immediately.\n *\n * DISCLAIMER\n *\n * Do not edit or add to this file if you wish to upgrade Magento to newer\n * versions in the future. If you wish to customize Magento for your\n * needs please refer to http:\/\/www.magento.com for more information.\n *\n * @category    Mage\n * @package     Mage_Payment\n * @copyright  Copyright (c) 2006-2016 X.commerce, Inc. and affiliates (http:\/\/www.magento.com)\n * @license    http:\/\/opensource.org\/licenses\/osl-3.0.php  Open Software License (OSL 3.0)\n *\/",2],["T_WHITESPACE","\n\n",25],["T_DOC_COMMENT","\/**\n * Payment method abstract model\n *\n * @author      Magento Core Team <core@magentocommerce.com>\n *\/",27],["T_WHITESPACE","\n",31],["T_ABSTRACT","abstract",32],["T_WHITESPACE"," ",32],["T_CLASS","class",32],["T_WHITESPACE"," ",32],["T_STRING","Mage_Payment_Model_Method_Abstract",32],["T_WHITESPACE"," ",32],["T_EXTENDS","extends",32],["T_WHITESPACE"," ",32],["T_STRING","Varien_Object",32],["T_WHITESPACE","\n",32],"{",["T_WHITESPACE","\n    ",33],["T_CONST","const",34],["T_WHITESPACE"," ",34],["T_STRING","ACTION_ORDER",34],["T_WHITESPACE","             ",34],"=",["T_WHITESPACE"," ",34],["T_CONSTANT_ENCAPSED_STRING","'order'",34],";",["T_WHITESPACE","\n    ",34],["T_CONST","const",35],["T_WHITESPACE"," ",35],["T_STRING","ACTION_AUTHORIZE",35],["T_WHITESPACE","         ",35],"=",["T_WHITESPACE"," ",35],["T_CONSTANT_ENCAPSED_STRING","'authorize'",35],";",["T_WHITESPACE","\n    ",35],["T_CONST","const",36],["T_WHITESPACE"," ",36],["T_STRING","ACTION_AUTHORIZE_CAPTURE",36],["T_WHITESPACE"," ",36],"=",["T_WHITESPACE"," ",36],["T_CONSTANT_ENCAPSED_STRING","'authorize_capture'",36],";",["T_WHITESPACE","\n\n    ",36],["T_CONST","const",38],["T_WHITESPACE"," ",38],["T_STRING","STATUS_UNKNOWN",38],["T_WHITESPACE","    ",38],"=",["T_WHITESPACE"," ",38],["T_CONSTANT_ENCAPSED_STRING","'UNKNOWN'",38],";",["T_WHITESPACE","\n    ",38],["T_CONST","const",39],["T_WHITESPACE"," ",39],["T_STRING","STATUS_APPROVED",39],["T_WHITESPACE","   ",39],"=",["T_WHITESPACE"," ",39],["T_CONSTANT_ENCAPSED_STRING","'APPROVED'",39],";",["T_WHITESPACE","\n    ",39],["T_CONST","const",40],["T_WHITESPACE"," ",40],["T_STRING","STATUS_ERROR",40],["T_WHITESPACE","      ",40],"=",["T_WHITESPACE"," ",40],["T_CONSTANT_ENCAPSED_STRING","'ERROR'",40],";",["T_WHITESPACE","\n    ",40],["T_CONST","const",41],["T_WHITESPACE"," ",41],["T_STRING","STATUS_DECLINED",41],["T_WHITESPACE","   ",41],"=",["T_WHITESPACE"," ",41],["T_CONSTANT_ENCAPSED_STRING","'DECLINED'",41],";",["T_WHITESPACE","\n    ",41],["T_CONST","const",42],["T_WHITESPACE"," ",42],["T_STRING","STATUS_VOID",42],["T_WHITESPACE","       ",42],"=",["T_WHITESPACE"," ",42],["T_CONSTANT_ENCAPSED_STRING","'VOID'",42],";",["T_WHITESPACE","\n    ",42],["T_CONST","const",43],["T_WHITESPACE"," ",43],["T_STRING","STATUS_SUCCESS",43],["T_WHITESPACE","    ",43],"=",["T_WHITESPACE"," ",43],["T_CONSTANT_ENCAPSED_STRING","'SUCCESS'",43],";",["T_WHITESPACE","\n\n    ",43],["T_DOC_COMMENT","\/**\n     * Bit masks to specify different payment method checks.\n     * @see Mage_Payment_Model_Method_Abstract::isApplicableToQuote\n     *\/",45],["T_WHITESPACE","\n    ",48],["T_CONST","const",49],["T_WHITESPACE"," ",49],["T_STRING","CHECK_USE_FOR_COUNTRY",49],["T_WHITESPACE","       ",49],"=",["T_WHITESPACE"," ",49],["T_LNUMBER","1",49],";",["T_WHITESPACE","\n    ",49],["T_CONST","const",50],["T_WHITESPACE"," ",50],["T_STRING","CHECK_USE_FOR_CURRENCY",50],["T_WHITESPACE","      ",50],"=",["T_WHITESPACE"," ",50],["T_LNUMBER","2",50],";",["T_WHITESPACE","\n    ",50],["T_CONST","const",51],["T_WHITESPACE"," ",51],["T_STRING","CHECK_USE_CHECKOUT",51],["T_WHITESPACE","          ",51],"=",["T_WHITESPACE"," ",51],["T_LNUMBER","4",51],";",["T_WHITESPACE","\n    ",51],["T_CONST","const",52],["T_WHITESPACE"," ",52],["T_STRING","CHECK_USE_FOR_MULTISHIPPING",52],["T_WHITESPACE"," ",52],"=",["T_WHITESPACE"," ",52],["T_LNUMBER","8",52],";",["T_WHITESPACE","\n    ",52],["T_CONST","const",53],["T_WHITESPACE"," ",53],["T_STRING","CHECK_USE_INTERNAL",53],["T_WHITESPACE","          ",53],"=",["T_WHITESPACE"," ",53],["T_LNUMBER","16",53],";",["T_WHITESPACE","\n    ",53],["T_CONST","const",54],["T_WHITESPACE"," ",54],["T_STRING","CHECK_ORDER_TOTAL_MIN_MAX",54],["T_WHITESPACE","   ",54],"=",["T_WHITESPACE"," ",54],["T_LNUMBER","32",54],";",["T_WHITESPACE","\n    ",54],["T_CONST","const",55],["T_WHITESPACE"," ",55],["T_STRING","CHECK_RECURRING_PROFILES",55],["T_WHITESPACE","    ",55],"=",["T_WHITESPACE"," ",55],["T_LNUMBER","64",55],";",["T_WHITESPACE","\n    ",55],["T_CONST","const",56],["T_WHITESPACE"," ",56],["T_STRING","CHECK_ZERO_TOTAL",56],["T_WHITESPACE","            ",56],"=",["T_WHITESPACE"," ",56],["T_LNUMBER","128",56],";",["T_WHITESPACE","\n\n    ",56],["T_PROTECTED","protected",58],["T_WHITESPACE"," ",58],["T_VARIABLE","$_code",58],";",["T_WHITESPACE","\n    ",58],["T_PROTECTED","protected",59],["T_WHITESPACE"," ",59],["T_VARIABLE","$_formBlockType",59],["T_WHITESPACE"," ",59],"=",["T_WHITESPACE"," ",59],["T_CONSTANT_ENCAPSED_STRING","'payment\/form'",59],";",["T_WHITESPACE","\n    ",59],["T_PROTECTED","protected",60],["T_WHITESPACE"," ",60],["T_VARIABLE","$_infoBlockType",60],["T_WHITESPACE"," ",60],"=",["T_WHITESPACE"," ",60],["T_CONSTANT_ENCAPSED_STRING","'payment\/info'",60],";",["T_WHITESPACE","\n\n    ",60],["T_DOC_COMMENT","\/**\n     * Payment Method features\n     * @var bool\n     *\/",62],["T_WHITESPACE","\n    ",65],["T_PROTECTED","protected",66],["T_WHITESPACE"," ",66],["T_VARIABLE","$_isGateway",66],["T_WHITESPACE","                   ",66],"=",["T_WHITESPACE"," ",66],["T_STRING","false",66],";",["T_WHITESPACE","\n    ",66],["T_PROTECTED","protected",67],["T_WHITESPACE"," ",67],["T_VARIABLE","$_canOrder",67],["T_WHITESPACE","                    ",67],"=",["T_WHITESPACE"," ",67],["T_STRING","false",67],";",["T_WHITESPACE","\n    ",67],["T_PROTECTED","protected",68],["T_WHITESPACE"," ",68],["T_VARIABLE","$_canAuthorize",68],["T_WHITESPACE","                ",68],"=",["T_WHITESPACE"," ",68],["T_STRING","false",68],";",["T_WHITESPACE","\n    ",68],["T_PROTECTED","protected",69],["T_WHITESPACE"," ",69],["T_VARIABLE","$_canCapture",69],["T_WHITESPACE","                  ",69],"=",["T_WHITESPACE"," ",69],["T_STRING","false",69],";",["T_WHITESPACE","\n    ",69],["T_PROTECTED","protected",70],["T_WHITESPACE"," ",70],["T_VARIABLE","$_canCapturePartial",70],["T_WHITESPACE","           ",70],"=",["T_WHITESPACE"," ",70],["T_STRING","false",70],";",["T_WHITESPACE","\n    ",70],["T_PROTECTED","protected",71],["T_WHITESPACE"," ",71],["T_VARIABLE","$_canCaptureOnce",71],["T_WHITESPACE","              ",71],"=",["T_WHITESPACE"," ",71],["T_STRING","false",71],";",["T_WHITESPACE","\n    ",71],["T_PROTECTED","protected",72],["T_WHITESPACE"," ",72],["T_VARIABLE","$_canRefund",72],["T_WHITESPACE","                   ",72],"=",["T_WHITESPACE"," ",72],["T_STRING","false",72],";",["T_WHITESPACE","\n    ",72],["T_PROTECTED","protected",73],["T_WHITESPACE"," ",73],["T_VARIABLE","$_canRefundInvoicePartial",73],["T_WHITESPACE","     ",73],"=",["T_WHITESPACE"," ",73],["T_STRING","false",73],";",["T_WHITESPACE","\n    ",73],["T_PROTECTED","protected",74],["T_WHITESPACE"," ",74],["T_VARIABLE","$_canVoid",74],["T_WHITESPACE","                     ",74],"=",["T_WHITESPACE"," ",74],["T_STRING","false",74],";",["T_WHITESPACE","\n    ",74],["T_PROTECTED","protected",75],["T_WHITESPACE"," ",75],["T_VARIABLE","$_canUseInternal",75],["T_WHITESPACE","              ",75],"=",["T_WHITESPACE"," ",75],["T_STRING","true",75],";",["T_WHITESPACE","\n    ",75],["T_PROTECTED","protected",76],["T_WHITESPACE"," ",76],["T_VARIABLE","$_canUseCheckout",76],["T_WHITESPACE","              ",76],"=",["T_WHITESPACE"," ",76],["T_STRING","true",76],";",["T_WHITESPACE","\n    ",76],["T_PROTECTED","protected",77],["T_WHITESPACE"," ",77],["T_VARIABLE","$_canUseForMultishipping",77],["T_WHITESPACE","      ",77],"=",["T_WHITESPACE"," ",77],["T_STRING","true",77],";",["T_WHITESPACE","\n    ",77],["T_PROTECTED","protected",78],["T_WHITESPACE"," ",78],["T_VARIABLE","$_isInitializeNeeded",78],["T_WHITESPACE","          ",78],"=",["T_WHITESPACE"," ",78],["T_STRING","false",78],";",["T_WHITESPACE","\n    ",78],["T_PROTECTED","protected",79],["T_WHITESPACE"," ",79],["T_VARIABLE","$_canFetchTransactionInfo",79],["T_WHITESPACE","     ",79],"=",["T_WHITESPACE"," ",79],["T_STRING","false",79],";",["T_WHITESPACE","\n    ",79],["T_PROTECTED","protected",80],["T_WHITESPACE"," ",80],["T_VARIABLE","$_canReviewPayment",80],["T_WHITESPACE","            ",80],"=",["T_WHITESPACE"," ",80],["T_STRING","false",80],";",["T_WHITESPACE","\n    ",80],["T_PROTECTED","protected",81],["T_WHITESPACE"," ",81],["T_VARIABLE","$_canCreateBillingAgreement",81],["T_WHITESPACE","   ",81],"=",["T_WHITESPACE"," ",81],["T_STRING","false",81],";",["T_WHITESPACE","\n    ",81],["T_PROTECTED","protected",82],["T_WHITESPACE"," ",82],["T_VARIABLE","$_canManageRecurringProfiles",82],["T_WHITESPACE","  ",82],"=",["T_WHITESPACE"," ",82],["T_STRING","true",82],";",["T_WHITESPACE","\n    ",82],["T_DOC_COMMENT","\/**\n     * TODO: whether a captured transaction may be voided by this gateway\n     * This may happen when amount is captured, but not settled\n     * @var bool\n     *\/",83],["T_WHITESPACE","\n    ",87],["T_PROTECTED","protected",88],["T_WHITESPACE"," ",88],["T_VARIABLE","$_canCancelInvoice",88],["T_WHITESPACE","        ",88],"=",["T_WHITESPACE"," ",88],["T_STRING","false",88],";",["T_WHITESPACE","\n\n    ",88],["T_DOC_COMMENT","\/**\n     * Fields that should be replaced in debug with '***'\n     *\n     * @var array\n     *\/",90],["T_WHITESPACE","\n    ",94],["T_PROTECTED","protected",95],["T_WHITESPACE"," ",95],["T_VARIABLE","$_debugReplacePrivateDataKeys",95],["T_WHITESPACE"," ",95],"=",["T_WHITESPACE"," ",95],["T_ARRAY","array",95],"(",")",";",["T_WHITESPACE","\n\n    ",95],["T_PUBLIC","public",97],["T_WHITESPACE"," ",97],["T_FUNCTION","function",97],["T_WHITESPACE"," ",97],["T_STRING","__construct",97],"(",")",["T_WHITESPACE","\n    ",97],"{",["T_WHITESPACE","\n\n    ",98],"}",["T_WHITESPACE","\n\n    ",100],["T_DOC_COMMENT","\/**\n     * Check order availability\n     *\n     * @return bool\n     *\/",102],["T_WHITESPACE","\n    ",106],["T_PUBLIC","public",107],["T_WHITESPACE"," ",107],["T_FUNCTION","function",107],["T_WHITESPACE"," ",107],["T_STRING","canOrder",107],"(",")",["T_WHITESPACE","\n    ",107],"{",["T_WHITESPACE","\n        ",108],["T_RETURN","return",109],["T_WHITESPACE"," ",109],["T_VARIABLE","$this",109],["T_OBJECT_OPERATOR","->",109],["T_STRING","_canOrder",109],";",["T_WHITESPACE","\n    ",109],"}",["T_WHITESPACE","\n\n    ",110],["T_DOC_COMMENT","\/**\n     * Check authorise availability\n     *\n     * @return bool\n     *\/",112],["T_WHITESPACE","\n    ",116],["T_PUBLIC","public",117],["T_WHITESPACE"," ",117],["T_FUNCTION","function",117],["T_WHITESPACE"," ",117],["T_STRING","canAuthorize",117],"(",")",["T_WHITESPACE","\n    ",117],"{",["T_WHITESPACE","\n        ",118],["T_RETURN","return",119],["T_WHITESPACE"," ",119],["T_VARIABLE","$this",119],["T_OBJECT_OPERATOR","->",119],["T_STRING","_canAuthorize",119],";",["T_WHITESPACE","\n    ",119],"}",["T_WHITESPACE","\n\n    ",120],["T_DOC_COMMENT","\/**\n     * Check capture availability\n     *\n     * @return bool\n     *\/",122],["T_WHITESPACE","\n    ",126],["T_PUBLIC","public",127],["T_WHITESPACE"," ",127],["T_FUNCTION","function",127],["T_WHITESPACE"," ",127],["T_STRING","canCapture",127],"(",")",["T_WHITESPACE","\n    ",127],"{",["T_WHITESPACE","\n        ",128],["T_RETURN","return",129],["T_WHITESPACE"," ",129],["T_VARIABLE","$this",129],["T_OBJECT_OPERATOR","->",129],["T_STRING","_canCapture",129],";",["T_WHITESPACE","\n    ",129],"}",["T_WHITESPACE","\n\n    ",130],["T_DOC_COMMENT","\/**\n     * Check partial capture availability\n     *\n     * @return bool\n     *\/",132],["T_WHITESPACE","\n    ",136],["T_PUBLIC","public",137],["T_WHITESPACE"," ",137],["T_FUNCTION","function",137],["T_WHITESPACE"," ",137],["T_STRING","canCapturePartial",137],"(",")",["T_WHITESPACE","\n    ",137],"{",["T_WHITESPACE","\n        ",138],["T_RETURN","return",139],["T_WHITESPACE"," ",139],["T_VARIABLE","$this",139],["T_OBJECT_OPERATOR","->",139],["T_STRING","_canCapturePartial",139],";",["T_WHITESPACE","\n    ",139],"}",["T_WHITESPACE","\n\n    ",140],["T_DOC_COMMENT","\/**\n     * Check whether capture can be performed once and no further capture possible\n     *\n     * @return bool\n     *\/",142],["T_WHITESPACE","\n    ",146],["T_PUBLIC","public",147],["T_WHITESPACE"," ",147],["T_FUNCTION","function",147],["T_WHITESPACE"," ",147],["T_STRING","canCaptureOnce",147],"(",")",["T_WHITESPACE","\n    ",147],"{",["T_WHITESPACE","\n        ",148],["T_RETURN","return",149],["T_WHITESPACE"," ",149],["T_VARIABLE","$this",149],["T_OBJECT_OPERATOR","->",149],["T_STRING","_canCaptureOnce",149],";",["T_WHITESPACE","\n    ",149],"}",["T_WHITESPACE","\n\n    ",150],["T_DOC_COMMENT","\/**\n     * Check refund availability\n     *\n     * @return bool\n     *\/",152],["T_WHITESPACE","\n    ",156],["T_PUBLIC","public",157],["T_WHITESPACE"," ",157],["T_FUNCTION","function",157],["T_WHITESPACE"," ",157],["T_STRING","canRefund",157],"(",")",["T_WHITESPACE","\n    ",157],"{",["T_WHITESPACE","\n        ",158],["T_RETURN","return",159],["T_WHITESPACE"," ",159],["T_VARIABLE","$this",159],["T_OBJECT_OPERATOR","->",159],["T_STRING","_canRefund",159],";",["T_WHITESPACE","\n    ",159],"}",["T_WHITESPACE","\n\n    ",160],["T_DOC_COMMENT","\/**\n     * Check partial refund availability for invoice\n     *\n     * @return bool\n     *\/",162],["T_WHITESPACE","\n    ",166],["T_PUBLIC","public",167],["T_WHITESPACE"," ",167],["T_FUNCTION","function",167],["T_WHITESPACE"," ",167],["T_STRING","canRefundPartialPerInvoice",167],"(",")",["T_WHITESPACE","\n    ",167],"{",["T_WHITESPACE","\n        ",168],["T_RETURN","return",169],["T_WHITESPACE"," ",169],["T_VARIABLE","$this",169],["T_OBJECT_OPERATOR","->",169],["T_STRING","_canRefundInvoicePartial",169],";",["T_WHITESPACE","\n    ",169],"}",["T_WHITESPACE","\n\n    ",170],["T_DOC_COMMENT","\/**\n     * Check void availability\n     *\n     * @param   Varien_Object $payment\n     * @return  bool\n     *\/",172],["T_WHITESPACE","\n    ",177],["T_PUBLIC","public",178],["T_WHITESPACE"," ",178],["T_FUNCTION","function",178],["T_WHITESPACE"," ",178],["T_STRING","canVoid",178],"(",["T_STRING","Varien_Object",178],["T_WHITESPACE"," ",178],["T_VARIABLE","$payment",178],")",["T_WHITESPACE","\n    ",178],"{",["T_WHITESPACE","\n        ",179],["T_RETURN","return",180],["T_WHITESPACE"," ",180],["T_VARIABLE","$this",180],["T_OBJECT_OPERATOR","->",180],["T_STRING","_canVoid",180],";",["T_WHITESPACE","\n    ",180],"}",["T_WHITESPACE","\n\n    ",181],["T_DOC_COMMENT","\/**\n     * Using internal pages for input payment data\n     * Can be used in admin\n     *\n     * @return bool\n     *\/",183],["T_WHITESPACE","\n    ",188],["T_PUBLIC","public",189],["T_WHITESPACE"," ",189],["T_FUNCTION","function",189],["T_WHITESPACE"," ",189],["T_STRING","canUseInternal",189],"(",")",["T_WHITESPACE","\n    ",189],"{",["T_WHITESPACE","\n        ",190],["T_RETURN","return",191],["T_WHITESPACE"," ",191],["T_VARIABLE","$this",191],["T_OBJECT_OPERATOR","->",191],["T_STRING","_canUseInternal",191],";",["T_WHITESPACE","\n    ",191],"}",["T_WHITESPACE","\n\n    ",192],["T_DOC_COMMENT","\/**\n     * Can be used in regular checkout\n     *\n     * @return bool\n     *\/",194],["T_WHITESPACE","\n    ",198],["T_PUBLIC","public",199],["T_WHITESPACE"," ",199],["T_FUNCTION","function",199],["T_WHITESPACE"," ",199],["T_STRING","canUseCheckout",199],"(",")",["T_WHITESPACE","\n    ",199],"{",["T_WHITESPACE","\n        ",200],["T_RETURN","return",201],["T_WHITESPACE"," ",201],["T_VARIABLE","$this",201],["T_OBJECT_OPERATOR","->",201],["T_STRING","_canUseCheckout",201],";",["T_WHITESPACE","\n    ",201],"}",["T_WHITESPACE","\n\n    ",202],["T_DOC_COMMENT","\/**\n     * Using for multiple shipping address\n     *\n     * @return bool\n     *\/",204],["T_WHITESPACE","\n    ",208],["T_PUBLIC","public",209],["T_WHITESPACE"," ",209],["T_FUNCTION","function",209],["T_WHITESPACE"," ",209],["T_STRING","canUseForMultishipping",209],"(",")",["T_WHITESPACE","\n    ",209],"{",["T_WHITESPACE","\n        ",210],["T_RETURN","return",211],["T_WHITESPACE"," ",211],["T_VARIABLE","$this",211],["T_OBJECT_OPERATOR","->",211],["T_STRING","_canUseForMultishipping",211],";",["T_WHITESPACE","\n    ",211],"}",["T_WHITESPACE","\n\n    ",212],["T_DOC_COMMENT","\/**\n     * Can be edit order (renew order)\n     *\n     * @return bool\n     *\/",214],["T_WHITESPACE","\n    ",218],["T_PUBLIC","public",219],["T_WHITESPACE"," ",219],["T_FUNCTION","function",219],["T_WHITESPACE"," ",219],["T_STRING","canEdit",219],"(",")",["T_WHITESPACE","\n    ",219],"{",["T_WHITESPACE","\n        ",220],["T_RETURN","return",221],["T_WHITESPACE"," ",221],["T_STRING","true",221],";",["T_WHITESPACE","\n    ",221],"}",["T_WHITESPACE","\n\n    ",222],["T_DOC_COMMENT","\/**\n     * Check fetch transaction info availability\n     *\n     * @return bool\n     *\/",224],["T_WHITESPACE","\n    ",228],["T_PUBLIC","public",229],["T_WHITESPACE"," ",229],["T_FUNCTION","function",229],["T_WHITESPACE"," ",229],["T_STRING","canFetchTransactionInfo",229],"(",")",["T_WHITESPACE","\n    ",229],"{",["T_WHITESPACE","\n        ",230],["T_RETURN","return",231],["T_WHITESPACE"," ",231],["T_VARIABLE","$this",231],["T_OBJECT_OPERATOR","->",231],["T_STRING","_canFetchTransactionInfo",231],";",["T_WHITESPACE","\n    ",231],"}",["T_WHITESPACE","\n\n    ",232],["T_DOC_COMMENT","\/**\n     * Check whether payment method instance can create billing agreements\n     *\n     * @return bool\n     *\/",234],["T_WHITESPACE","\n    ",238],["T_PUBLIC","public",239],["T_WHITESPACE"," ",239],["T_FUNCTION","function",239],["T_WHITESPACE"," ",239],["T_STRING","canCreateBillingAgreement",239],"(",")",["T_WHITESPACE","\n    ",239],"{",["T_WHITESPACE","\n        ",240],["T_RETURN","return",241],["T_WHITESPACE"," ",241],["T_VARIABLE","$this",241],["T_OBJECT_OPERATOR","->",241],["T_STRING","_canCreateBillingAgreement",241],";",["T_WHITESPACE","\n    ",241],"}",["T_WHITESPACE","\n\n    ",242],["T_DOC_COMMENT","\/**\n     * Fetch transaction info\n     *\n     * @param Mage_Payment_Model_Info $payment\n     * @param string $transactionId\n     * @return array\n     *\/",244],["T_WHITESPACE","\n    ",250],["T_PUBLIC","public",251],["T_WHITESPACE"," ",251],["T_FUNCTION","function",251],["T_WHITESPACE"," ",251],["T_STRING","fetchTransactionInfo",251],"(",["T_STRING","Mage_Payment_Model_Info",251],["T_WHITESPACE"," ",251],["T_VARIABLE","$payment",251],",",["T_WHITESPACE"," ",251],["T_VARIABLE","$transactionId",251],")",["T_WHITESPACE","\n    ",251],"{",["T_WHITESPACE","\n        ",252],["T_RETURN","return",253],["T_WHITESPACE"," ",253],["T_ARRAY","array",253],"(",")",";",["T_WHITESPACE","\n    ",253],"}",["T_WHITESPACE","\n\n    ",254],["T_DOC_COMMENT","\/**\n     * Retrieve payment system relation flag\n     *\n     * @return bool\n     *\/",256],["T_WHITESPACE","\n    ",260],["T_PUBLIC","public",261],["T_WHITESPACE"," ",261],["T_FUNCTION","function",261],["T_WHITESPACE"," ",261],["T_STRING","isGateway",261],"(",")",["T_WHITESPACE","\n    ",261],"{",["T_WHITESPACE","\n        ",262],["T_RETURN","return",263],["T_WHITESPACE"," ",263],["T_VARIABLE","$this",263],["T_OBJECT_OPERATOR","->",263],["T_STRING","_isGateway",263],";",["T_WHITESPACE","\n    ",263],"}",["T_WHITESPACE","\n\n    ",264],["T_DOC_COMMENT","\/**\n     * flag if we need to run payment initialize while order place\n     *\n     * @return bool\n     *\/",266],["T_WHITESPACE","\n    ",270],["T_PUBLIC","public",271],["T_WHITESPACE"," ",271],["T_FUNCTION","function",271],["T_WHITESPACE"," ",271],["T_STRING","isInitializeNeeded",271],"(",")",["T_WHITESPACE","\n    ",271],"{",["T_WHITESPACE","\n        ",272],["T_RETURN","return",273],["T_WHITESPACE"," ",273],["T_VARIABLE","$this",273],["T_OBJECT_OPERATOR","->",273],["T_STRING","_isInitializeNeeded",273],";",["T_WHITESPACE","\n    ",273],"}",["T_WHITESPACE","\n\n    ",274],["T_DOC_COMMENT","\/**\n     * To check billing country is allowed for the payment method\n     *\n     * @return bool\n     *\/",276],["T_WHITESPACE","\n    ",280],["T_PUBLIC","public",281],["T_WHITESPACE"," ",281],["T_FUNCTION","function",281],["T_WHITESPACE"," ",281],["T_STRING","canUseForCountry",281],"(",["T_VARIABLE","$country",281],")",["T_WHITESPACE","\n    ",281],"{",["T_WHITESPACE","\n        ",282],["T_COMMENT","\/*\n        for specific country, the flag will set up as 1\n        *\/",283],["T_WHITESPACE","\n        ",285],["T_IF","if",286],"(",["T_VARIABLE","$this",286],["T_OBJECT_OPERATOR","->",286],["T_STRING","getConfigData",286],"(",["T_CONSTANT_ENCAPSED_STRING","'allowspecific'",286],")",["T_IS_EQUAL","==",286],["T_LNUMBER","1",286],")","{",["T_WHITESPACE","\n            ",286],["T_VARIABLE","$availableCountries",287],["T_WHITESPACE"," ",287],"=",["T_WHITESPACE"," ",287],["T_STRING","explode",287],"(",["T_CONSTANT_ENCAPSED_STRING","','",287],",",["T_WHITESPACE"," ",287],["T_VARIABLE","$this",287],["T_OBJECT_OPERATOR","->",287],["T_STRING","getConfigData",287],"(",["T_CONSTANT_ENCAPSED_STRING","'specificcountry'",287],")",")",";",["T_WHITESPACE","\n            ",287],["T_IF","if",288],"(","!",["T_STRING","in_array",288],"(",["T_VARIABLE","$country",288],",",["T_WHITESPACE"," ",288],["T_VARIABLE","$availableCountries",288],")",")","{",["T_WHITESPACE","\n                ",288],["T_RETURN","return",289],["T_WHITESPACE"," ",289],["T_STRING","false",289],";",["T_WHITESPACE","\n            ",289],"}",["T_WHITESPACE","\n\n        ",290],"}",["T_WHITESPACE","\n        ",292],["T_RETURN","return",293],["T_WHITESPACE"," ",293],["T_STRING","true",293],";",["T_WHITESPACE","\n    ",293],"}",["T_WHITESPACE","\n\n    ",294],["T_DOC_COMMENT","\/**\n     * Check method for processing with base currency\n     *\n     * @param string $currencyCode\n     * @return boolean\n     *\/",296],["T_WHITESPACE","\n    ",301],["T_PUBLIC","public",302],["T_WHITESPACE"," ",302],["T_FUNCTION","function",302],["T_WHITESPACE"," ",302],["T_STRING","canUseForCurrency",302],"(",["T_VARIABLE","$currencyCode",302],")",["T_WHITESPACE","\n    ",302],"{",["T_WHITESPACE","\n        ",303],["T_RETURN","return",304],["T_WHITESPACE"," ",304],["T_STRING","true",304],";",["T_WHITESPACE","\n    ",304],"}",["T_WHITESPACE","\n\n    ",305],["T_DOC_COMMENT","\/**\n     * Check manage billing agreements availability\n     *\n     * @return bool\n     *\/",307],["T_WHITESPACE","\n    ",311],["T_PUBLIC","public",312],["T_WHITESPACE"," ",312],["T_FUNCTION","function",312],["T_WHITESPACE"," ",312],["T_STRING","canManageBillingAgreements",312],"(",")",["T_WHITESPACE","\n    ",312],"{",["T_WHITESPACE","\n        ",313],["T_RETURN","return",314],["T_WHITESPACE"," ",314],"(",["T_VARIABLE","$this",314],["T_WHITESPACE"," ",314],["T_INSTANCEOF","instanceof",314],["T_WHITESPACE"," ",314],["T_STRING","Mage_Payment_Model_Billing_Agreement_MethodInterface",314],")",";",["T_WHITESPACE","\n    ",314],"}",["T_WHITESPACE","\n\n    ",315],["T_DOC_COMMENT","\/**\n     * Whether can manage recurring profiles\n     *\n     * @return bool\n     *\/",317],["T_WHITESPACE","\n    ",321],["T_PUBLIC","public",322],["T_WHITESPACE"," ",322],["T_FUNCTION","function",322],["T_WHITESPACE"," ",322],["T_STRING","canManageRecurringProfiles",322],"(",")",["T_WHITESPACE","\n    ",322],"{",["T_WHITESPACE","\n        ",323],["T_RETURN","return",324],["T_WHITESPACE"," ",324],["T_VARIABLE","$this",324],["T_OBJECT_OPERATOR","->",324],["T_STRING","_canManageRecurringProfiles",324],["T_WHITESPACE","\n               ",324],["T_BOOLEAN_AND","&&",325],["T_WHITESPACE"," ",325],"(",["T_VARIABLE","$this",325],["T_WHITESPACE"," ",325],["T_INSTANCEOF","instanceof",325],["T_WHITESPACE"," ",325],["T_STRING","Mage_Payment_Model_Recurring_Profile_MethodInterface",325],")",";",["T_WHITESPACE","\n    ",325],"}",["T_WHITESPACE","\n\n    ",326],["T_DOC_COMMENT","\/**\n     * Retrieve model helper\n     *\n     * @return Mage_Payment_Helper_Data\n     *\/",328],["T_WHITESPACE","\n    ",332],["T_PROTECTED","protected",333],["T_WHITESPACE"," ",333],["T_FUNCTION","function",333],["T_WHITESPACE"," ",333],["T_STRING","_getHelper",333],"(",")",["T_WHITESPACE","\n    ",333],"{",["T_WHITESPACE","\n        ",334],["T_RETURN","return",335],["T_WHITESPACE"," ",335],["T_STRING","Mage",335],["T_DOUBLE_COLON","::",335],["T_STRING","helper",335],"(",["T_CONSTANT_ENCAPSED_STRING","'payment'",335],")",";",["T_WHITESPACE","\n    ",335],"}",["T_WHITESPACE","\n\n    ",336],["T_DOC_COMMENT","\/**\n     * Retrieve payment method code\n     *\n     * @return string\n     *\/",338],["T_WHITESPACE","\n    ",342],["T_PUBLIC","public",343],["T_WHITESPACE"," ",343],["T_FUNCTION","function",343],["T_WHITESPACE"," ",343],["T_STRING","getCode",343],"(",")",["T_WHITESPACE","\n    ",343],"{",["T_WHITESPACE","\n        ",344],["T_IF","if",345],["T_WHITESPACE"," ",345],"(",["T_EMPTY","empty",345],"(",["T_VARIABLE","$this",345],["T_OBJECT_OPERATOR","->",345],["T_STRING","_code",345],")",")",["T_WHITESPACE"," ",345],"{",["T_WHITESPACE","\n            ",345],["T_STRING","Mage",346],["T_DOUBLE_COLON","::",346],["T_STRING","throwException",346],"(",["T_STRING","Mage",346],["T_DOUBLE_COLON","::",346],["T_STRING","helper",346],"(",["T_CONSTANT_ENCAPSED_STRING","'payment'",346],")",["T_OBJECT_OPERATOR","->",346],["T_STRING","__",346],"(",["T_CONSTANT_ENCAPSED_STRING","'Cannot retrieve the payment method code.'",346],")",")",";",["T_WHITESPACE","\n        ",346],"}",["T_WHITESPACE","\n        ",347],["T_RETURN","return",348],["T_WHITESPACE"," ",348],["T_VARIABLE","$this",348],["T_OBJECT_OPERATOR","->",348],["T_STRING","_code",348],";",["T_WHITESPACE","\n    ",348],"}",["T_WHITESPACE","\n\n    ",349],["T_DOC_COMMENT","\/**\n     * Retrieve block type for method form generation\n     *\n     * @return string\n     *\/",351],["T_WHITESPACE","\n    ",355],["T_PUBLIC","public",356],["T_WHITESPACE"," ",356],["T_FUNCTION","function",356],["T_WHITESPACE"," ",356],["T_STRING","getFormBlockType",356],"(",")",["T_WHITESPACE","\n    ",356],"{",["T_WHITESPACE","\n        ",357],["T_RETURN","return",358],["T_WHITESPACE"," ",358],["T_VARIABLE","$this",358],["T_OBJECT_OPERATOR","->",358],["T_STRING","_formBlockType",358],";",["T_WHITESPACE","\n    ",358],"}",["T_WHITESPACE","\n\n    ",359],["T_DOC_COMMENT","\/**\n     * Retrieve block type for display method information\n     *\n     * @return string\n     *\/",361],["T_WHITESPACE","\n    ",365],["T_PUBLIC","public",366],["T_WHITESPACE"," ",366],["T_FUNCTION","function",366],["T_WHITESPACE"," ",366],["T_STRING","getInfoBlockType",366],"(",")",["T_WHITESPACE","\n    ",366],"{",["T_WHITESPACE","\n        ",367],["T_RETURN","return",368],["T_WHITESPACE"," ",368],["T_VARIABLE","$this",368],["T_OBJECT_OPERATOR","->",368],["T_STRING","_infoBlockType",368],";",["T_WHITESPACE","\n    ",368],"}",["T_WHITESPACE","\n\n    ",369],["T_DOC_COMMENT","\/**\n     * Retrieve payment iformation model object\n     *\n     * @return Mage_Payment_Model_Info\n     *\/",371],["T_WHITESPACE","\n    ",375],["T_PUBLIC","public",376],["T_WHITESPACE"," ",376],["T_FUNCTION","function",376],["T_WHITESPACE"," ",376],["T_STRING","getInfoInstance",376],"(",")",["T_WHITESPACE","\n    ",376],"{",["T_WHITESPACE","\n        ",377],["T_VARIABLE","$instance",378],["T_WHITESPACE"," ",378],"=",["T_WHITESPACE"," ",378],["T_VARIABLE","$this",378],["T_OBJECT_OPERATOR","->",378],["T_STRING","getData",378],"(",["T_CONSTANT_ENCAPSED_STRING","'info_instance'",378],")",";",["T_WHITESPACE","\n        ",378],["T_IF","if",379],["T_WHITESPACE"," ",379],"(","!","(",["T_VARIABLE","$instance",379],["T_WHITESPACE"," ",379],["T_INSTANCEOF","instanceof",379],["T_WHITESPACE"," ",379],["T_STRING","Mage_Payment_Model_Info",379],")",")",["T_WHITESPACE"," ",379],"{",["T_WHITESPACE","\n            ",379],["T_STRING","Mage",380],["T_DOUBLE_COLON","::",380],["T_STRING","throwException",380],"(",["T_STRING","Mage",380],["T_DOUBLE_COLON","::",380],["T_STRING","helper",380],"(",["T_CONSTANT_ENCAPSED_STRING","'payment'",380],")",["T_OBJECT_OPERATOR","->",380],["T_STRING","__",380],"(",["T_CONSTANT_ENCAPSED_STRING","'Cannot retrieve the payment information object instance.'",380],")",")",";",["T_WHITESPACE","\n        ",380],"}",["T_WHITESPACE","\n        ",381],["T_RETURN","return",382],["T_WHITESPACE"," ",382],["T_VARIABLE","$instance",382],";",["T_WHITESPACE","\n    ",382],"}",["T_WHITESPACE","\n\n    ",383],["T_DOC_COMMENT","\/**\n     * Validate payment method information object\n     *\n     * @return Mage_Payment_Model_Abstract\n     *\/",385],["T_WHITESPACE","\n    ",389],["T_PUBLIC","public",390],["T_WHITESPACE"," ",390],["T_FUNCTION","function",390],["T_WHITESPACE"," ",390],["T_STRING","validate",390],"(",")",["T_WHITESPACE","\n    ",390],"{",["T_WHITESPACE","\n         ",391],["T_DOC_COMMENT","\/**\n          * to validate payment method is allowed for billing country or not\n          *\/",392],["T_WHITESPACE","\n         ",394],["T_VARIABLE","$paymentInfo",395],["T_WHITESPACE"," ",395],"=",["T_WHITESPACE"," ",395],["T_VARIABLE","$this",395],["T_OBJECT_OPERATOR","->",395],["T_STRING","getInfoInstance",395],"(",")",";",["T_WHITESPACE","\n         ",395],["T_IF","if",396],["T_WHITESPACE"," ",396],"(",["T_VARIABLE","$paymentInfo",396],["T_WHITESPACE"," ",396],["T_INSTANCEOF","instanceof",396],["T_WHITESPACE"," ",396],["T_STRING","Mage_Sales_Model_Order_Payment",396],")",["T_WHITESPACE"," ",396],"{",["T_WHITESPACE","\n             ",396],["T_VARIABLE","$billingCountry",397],["T_WHITESPACE"," ",397],"=",["T_WHITESPACE"," ",397],["T_VARIABLE","$paymentInfo",397],["T_OBJECT_OPERATOR","->",397],["T_STRING","getOrder",397],"(",")",["T_OBJECT_OPERATOR","->",397],["T_STRING","getBillingAddress",397],"(",")",["T_OBJECT_OPERATOR","->",397],["T_STRING","getCountryId",397],"(",")",";",["T_WHITESPACE","\n         ",397],"}",["T_WHITESPACE"," ",398],["T_ELSE","else",398],["T_WHITESPACE"," ",398],"{",["T_WHITESPACE","\n             ",398],["T_VARIABLE","$billingCountry",399],["T_WHITESPACE"," ",399],"=",["T_WHITESPACE"," ",399],["T_VARIABLE","$paymentInfo",399],["T_OBJECT_OPERATOR","->",399],["T_STRING","getQuote",399],"(",")",["T_OBJECT_OPERATOR","->",399],["T_STRING","getBillingAddress",399],"(",")",["T_OBJECT_OPERATOR","->",399],["T_STRING","getCountryId",399],"(",")",";",["T_WHITESPACE","\n         ",399],"}",["T_WHITESPACE","\n         ",400],["T_IF","if",401],["T_WHITESPACE"," ",401],"(","!",["T_VARIABLE","$this",401],["T_OBJECT_OPERATOR","->",401],["T_STRING","canUseForCountry",401],"(",["T_VARIABLE","$billingCountry",401],")",")",["T_WHITESPACE"," ",401],"{",["T_WHITESPACE","\n             ",401],["T_STRING","Mage",402],["T_DOUBLE_COLON","::",402],["T_STRING","throwException",402],"(",["T_STRING","Mage",402],["T_DOUBLE_COLON","::",402],["T_STRING","helper",402],"(",["T_CONSTANT_ENCAPSED_STRING","'payment'",402],")",["T_OBJECT_OPERATOR","->",402],["T_STRING","__",402],"(",["T_CONSTANT_ENCAPSED_STRING","'Selected payment type is not allowed for billing country.'",402],")",")",";",["T_WHITESPACE","\n         ",402],"}",["T_WHITESPACE","\n         ",403],["T_RETURN","return",404],["T_WHITESPACE"," ",404],["T_VARIABLE","$this",404],";",["T_WHITESPACE","\n    ",404],"}",["T_WHITESPACE","\n\n    ",405],["T_DOC_COMMENT","\/**\n     * Order payment abstract method\n     *\n     * @param Varien_Object $payment\n     * @param float $amount\n     *\n     * @return Mage_Payment_Model_Abstract\n     *\/",407],["T_WHITESPACE","\n    ",414],["T_PUBLIC","public",415],["T_WHITESPACE"," ",415],["T_FUNCTION","function",415],["T_WHITESPACE"," ",415],["T_STRING","order",415],"(",["T_STRING","Varien_Object",415],["T_WHITESPACE"," ",415],["T_VARIABLE","$payment",415],",",["T_WHITESPACE"," ",415],["T_VARIABLE","$amount",415],")",["T_WHITESPACE","\n    ",415],"{",["T_WHITESPACE","\n        ",416],["T_IF","if",417],["T_WHITESPACE"," ",417],"(","!",["T_VARIABLE","$this",417],["T_OBJECT_OPERATOR","->",417],["T_STRING","canOrder",417],"(",")",")",["T_WHITESPACE"," ",417],"{",["T_WHITESPACE","\n            ",417],["T_STRING","Mage",418],["T_DOUBLE_COLON","::",418],["T_STRING","throwException",418],"(",["T_STRING","Mage",418],["T_DOUBLE_COLON","::",418],["T_STRING","helper",418],"(",["T_CONSTANT_ENCAPSED_STRING","'payment'",418],")",["T_OBJECT_OPERATOR","->",418],["T_STRING","__",418],"(",["T_CONSTANT_ENCAPSED_STRING","'Order action is not available.'",418],")",")",";",["T_WHITESPACE","\n        ",418],"}",["T_WHITESPACE","\n        ",419],["T_RETURN","return",420],["T_WHITESPACE"," ",420],["T_VARIABLE","$this",420],";",["T_WHITESPACE","\n    ",420],"}",["T_WHITESPACE","\n\n    ",421],["T_DOC_COMMENT","\/**\n     * Authorize payment abstract method\n     *\n     * @param Varien_Object $payment\n     * @param float $amount\n     *\n     * @return Mage_Payment_Model_Abstract\n     *\/",423],["T_WHITESPACE","\n    ",430],["T_PUBLIC","public",431],["T_WHITESPACE"," ",431],["T_FUNCTION","function",431],["T_WHITESPACE"," ",431],["T_STRING","authorize",431],"(",["T_STRING","Varien_Object",431],["T_WHITESPACE"," ",431],["T_VARIABLE","$payment",431],",",["T_WHITESPACE"," ",431],["T_VARIABLE","$amount",431],")",["T_WHITESPACE","\n    ",431],"{",["T_WHITESPACE","\n        ",432],["T_IF","if",433],["T_WHITESPACE"," ",433],"(","!",["T_VARIABLE","$this",433],["T_OBJECT_OPERATOR","->",433],["T_STRING","canAuthorize",433],"(",")",")",["T_WHITESPACE"," ",433],"{",["T_WHITESPACE","\n            ",433],["T_STRING","Mage",434],["T_DOUBLE_COLON","::",434],["T_STRING","throwException",434],"(",["T_STRING","Mage",434],["T_DOUBLE_COLON","::",434],["T_STRING","helper",434],"(",["T_CONSTANT_ENCAPSED_STRING","'payment'",434],")",["T_OBJECT_OPERATOR","->",434],["T_STRING","__",434],"(",["T_CONSTANT_ENCAPSED_STRING","'Authorize action is not available.'",434],")",")",";",["T_WHITESPACE","\n        ",434],"}",["T_WHITESPACE","\n        ",435],["T_RETURN","return",436],["T_WHITESPACE"," ",436],["T_VARIABLE","$this",436],";",["T_WHITESPACE","\n    ",436],"}",["T_WHITESPACE","\n\n    ",437],["T_DOC_COMMENT","\/**\n     * Capture payment abstract method\n     *\n     * @param Varien_Object $payment\n     * @param float $amount\n     *\n     * @return Mage_Payment_Model_Abstract\n     *\/",439],["T_WHITESPACE","\n    ",446],["T_PUBLIC","public",447],["T_WHITESPACE"," ",447],["T_FUNCTION","function",447],["T_WHITESPACE"," ",447],["T_STRING","capture",447],"(",["T_STRING","Varien_Object",447],["T_WHITESPACE"," ",447],["T_VARIABLE","$payment",447],",",["T_WHITESPACE"," ",447],["T_VARIABLE","$amount",447],")",["T_WHITESPACE","\n    ",447],"{",["T_WHITESPACE","\n        ",448],["T_IF","if",449],["T_WHITESPACE"," ",449],"(","!",["T_VARIABLE","$this",449],["T_OBJECT_OPERATOR","->",449],["T_STRING","canCapture",449],"(",")",")",["T_WHITESPACE"," ",449],"{",["T_WHITESPACE","\n            ",449],["T_STRING","Mage",450],["T_DOUBLE_COLON","::",450],["T_STRING","throwException",450],"(",["T_STRING","Mage",450],["T_DOUBLE_COLON","::",450],["T_STRING","helper",450],"(",["T_CONSTANT_ENCAPSED_STRING","'payment'",450],")",["T_OBJECT_OPERATOR","->",450],["T_STRING","__",450],"(",["T_CONSTANT_ENCAPSED_STRING","'Capture action is not available.'",450],")",")",";",["T_WHITESPACE","\n        ",450],"}",["T_WHITESPACE","\n\n        ",451],["T_RETURN","return",453],["T_WHITESPACE"," ",453],["T_VARIABLE","$this",453],";",["T_WHITESPACE","\n    ",453],"}",["T_WHITESPACE","\n\n    ",454],["T_DOC_COMMENT","\/**\n     * Set capture transaction ID to invoice for informational purposes\n     * @param Mage_Sales_Model_Order_Invoice $invoice\n     * @param Mage_Sales_Model_Order_Payment $payment\n     * @return Mage_Payment_Model_Method_Abstract\n     *\/",456],["T_WHITESPACE","\n    ",461],["T_PUBLIC","public",462],["T_WHITESPACE"," ",462],["T_FUNCTION","function",462],["T_WHITESPACE"," ",462],["T_STRING","processInvoice",462],"(",["T_VARIABLE","$invoice",462],",",["T_WHITESPACE"," ",462],["T_VARIABLE","$payment",462],")",["T_WHITESPACE","\n    ",462],"{",["T_WHITESPACE","\n        ",463],["T_VARIABLE","$invoice",464],["T_OBJECT_OPERATOR","->",464],["T_STRING","setTransactionId",464],"(",["T_VARIABLE","$payment",464],["T_OBJECT_OPERATOR","->",464],["T_STRING","getLastTransId",464],"(",")",")",";",["T_WHITESPACE","\n        ",464],["T_RETURN","return",465],["T_WHITESPACE"," ",465],["T_VARIABLE","$this",465],";",["T_WHITESPACE","\n    ",465],"}",["T_WHITESPACE","\n\n    ",466],["T_DOC_COMMENT","\/**\n     * Set refund transaction id to payment object for informational purposes\n     * Candidate to be deprecated:\n     * there can be multiple refunds per payment, thus payment.refund_transaction_id doesn't make big sense\n     *\n     * @param Mage_Sales_Model_Order_Invoice $invoice\n     * @param Mage_Sales_Model_Order_Payment $payment\n     * @return Mage_Payment_Model_Method_Abstract\n     *\/",468],["T_WHITESPACE","\n    ",476],["T_PUBLIC","public",477],["T_WHITESPACE"," ",477],["T_FUNCTION","function",477],["T_WHITESPACE"," ",477],["T_STRING","processBeforeRefund",477],"(",["T_VARIABLE","$invoice",477],",",["T_WHITESPACE"," ",477],["T_VARIABLE","$payment",477],")",["T_WHITESPACE","\n    ",477],"{",["T_WHITESPACE","\n        ",478],["T_VARIABLE","$payment",479],["T_OBJECT_OPERATOR","->",479],["T_STRING","setRefundTransactionId",479],"(",["T_VARIABLE","$invoice",479],["T_OBJECT_OPERATOR","->",479],["T_STRING","getTransactionId",479],"(",")",")",";",["T_WHITESPACE","\n        ",479],["T_RETURN","return",480],["T_WHITESPACE"," ",480],["T_VARIABLE","$this",480],";",["T_WHITESPACE","\n    ",480],"}",["T_WHITESPACE","\n\n    ",481],["T_DOC_COMMENT","\/**\n     * Refund specified amount for payment\n     *\n     * @param Varien_Object $payment\n     * @param float $amount\n     *\n     * @return Mage_Payment_Model_Abstract\n     *\/",483],["T_WHITESPACE","\n    ",490],["T_PUBLIC","public",491],["T_WHITESPACE"," ",491],["T_FUNCTION","function",491],["T_WHITESPACE"," ",491],["T_STRING","refund",491],"(",["T_STRING","Varien_Object",491],["T_WHITESPACE"," ",491],["T_VARIABLE","$payment",491],",",["T_WHITESPACE"," ",491],["T_VARIABLE","$amount",491],")",["T_WHITESPACE","\n    ",491],"{",["T_WHITESPACE","\n\n        ",492],["T_IF","if",494],["T_WHITESPACE"," ",494],"(","!",["T_VARIABLE","$this",494],["T_OBJECT_OPERATOR","->",494],["T_STRING","canRefund",494],"(",")",")",["T_WHITESPACE"," ",494],"{",["T_WHITESPACE","\n            ",494],["T_STRING","Mage",495],["T_DOUBLE_COLON","::",495],["T_STRING","throwException",495],"(",["T_STRING","Mage",495],["T_DOUBLE_COLON","::",495],["T_STRING","helper",495],"(",["T_CONSTANT_ENCAPSED_STRING","'payment'",495],")",["T_OBJECT_OPERATOR","->",495],["T_STRING","__",495],"(",["T_CONSTANT_ENCAPSED_STRING","'Refund action is not available.'",495],")",")",";",["T_WHITESPACE","\n        ",495],"}",["T_WHITESPACE","\n\n\n        ",496],["T_RETURN","return",499],["T_WHITESPACE"," ",499],["T_VARIABLE","$this",499],";",["T_WHITESPACE","\n    ",499],"}",["T_WHITESPACE","\n\n    ",500],["T_DOC_COMMENT","\/**\n     * Set transaction ID into creditmemo for informational purposes\n     * @param Mage_Sales_Model_Order_Creditmemo $creditmemo\n     * @param Mage_Sales_Model_Order_Payment $payment\n     * @return Mage_Payment_Model_Method_Abstract\n     *\/",502],["T_WHITESPACE","\n    ",507],["T_PUBLIC","public",508],["T_WHITESPACE"," ",508],["T_FUNCTION","function",508],["T_WHITESPACE"," ",508],["T_STRING","processCreditmemo",508],"(",["T_VARIABLE","$creditmemo",508],",",["T_WHITESPACE"," ",508],["T_VARIABLE","$payment",508],")",["T_WHITESPACE","\n    ",508],"{",["T_WHITESPACE","\n        ",509],["T_VARIABLE","$creditmemo",510],["T_OBJECT_OPERATOR","->",510],["T_STRING","setTransactionId",510],"(",["T_VARIABLE","$payment",510],["T_OBJECT_OPERATOR","->",510],["T_STRING","getLastTransId",510],"(",")",")",";",["T_WHITESPACE","\n        ",510],["T_RETURN","return",511],["T_WHITESPACE"," ",511],["T_VARIABLE","$this",511],";",["T_WHITESPACE","\n    ",511],"}",["T_WHITESPACE","\n\n    ",512],["T_DOC_COMMENT","\/**\n     * Cancel payment abstract method\n     *\n     * @param Varien_Object $payment\n     *\n     * @return Mage_Payment_Model_Abstract\n     *\/",514],["T_WHITESPACE","\n    ",520],["T_PUBLIC","public",521],["T_WHITESPACE"," ",521],["T_FUNCTION","function",521],["T_WHITESPACE"," ",521],["T_STRING","cancel",521],"(",["T_STRING","Varien_Object",521],["T_WHITESPACE"," ",521],["T_VARIABLE","$payment",521],")",["T_WHITESPACE","\n    ",521],"{",["T_WHITESPACE","\n        ",522],["T_RETURN","return",523],["T_WHITESPACE"," ",523],["T_VARIABLE","$this",523],";",["T_WHITESPACE","\n    ",523],"}",["T_WHITESPACE","\n\n    ",524],["T_DOC_COMMENT","\/**\n     * @deprecated after 1.4.0.0-alpha3\n     * this method doesn't make sense, because invoice must not void entire authorization\n     * there should be method for invoice cancellation\n     * @param Mage_Sales_Model_Order_Invoice $invoice\n     * @param Mage_Sales_Model_Order_Payment $payment\n     * @return Mage_Payment_Model_Method_Abstract\n     *\/",526],["T_WHITESPACE","\n    ",533],["T_PUBLIC","public",534],["T_WHITESPACE"," ",534],["T_FUNCTION","function",534],["T_WHITESPACE"," ",534],["T_STRING","processBeforeVoid",534],"(",["T_VARIABLE","$invoice",534],",",["T_WHITESPACE"," ",534],["T_VARIABLE","$payment",534],")",["T_WHITESPACE","\n    ",534],"{",["T_WHITESPACE","\n        ",535],["T_VARIABLE","$payment",536],["T_OBJECT_OPERATOR","->",536],["T_STRING","setVoidTransactionId",536],"(",["T_VARIABLE","$invoice",536],["T_OBJECT_OPERATOR","->",536],["T_STRING","getTransactionId",536],"(",")",")",";",["T_WHITESPACE","\n        ",536],["T_RETURN","return",537],["T_WHITESPACE"," ",537],["T_VARIABLE","$this",537],";",["T_WHITESPACE","\n    ",537],"}",["T_WHITESPACE","\n\n    ",538],["T_DOC_COMMENT","\/**\n     * Void payment abstract method\n     *\n     * @param Varien_Object $payment\n     *\n     * @return Mage_Payment_Model_Abstract\n     *\/",540],["T_WHITESPACE","\n    ",546],["T_PUBLIC","public",547],["T_WHITESPACE"," ",547],["T_FUNCTION","function",547],["T_WHITESPACE"," ",547],["T_STRING","void",547],"(",["T_STRING","Varien_Object",547],["T_WHITESPACE"," ",547],["T_VARIABLE","$payment",547],")",["T_WHITESPACE","\n    ",547],"{",["T_WHITESPACE","\n        ",548],["T_IF","if",549],["T_WHITESPACE"," ",549],"(","!",["T_VARIABLE","$this",549],["T_OBJECT_OPERATOR","->",549],["T_STRING","canVoid",549],"(",["T_VARIABLE","$payment",549],")",")",["T_WHITESPACE"," ",549],"{",["T_WHITESPACE","\n            ",549],["T_STRING","Mage",550],["T_DOUBLE_COLON","::",550],["T_STRING","throwException",550],"(",["T_STRING","Mage",550],["T_DOUBLE_COLON","::",550],["T_STRING","helper",550],"(",["T_CONSTANT_ENCAPSED_STRING","'payment'",550],")",["T_OBJECT_OPERATOR","->",550],["T_STRING","__",550],"(",["T_CONSTANT_ENCAPSED_STRING","'Void action is not available.'",550],")",")",";",["T_WHITESPACE","\n        ",550],"}",["T_WHITESPACE","\n        ",551],["T_RETURN","return",552],["T_WHITESPACE"," ",552],["T_VARIABLE","$this",552],";",["T_WHITESPACE","\n    ",552],"}",["T_WHITESPACE","\n\n    ",553],["T_DOC_COMMENT","\/**\n     * Whether this method can accept or deny payment\n     *\n     * @param Mage_Payment_Model_Info $payment\n     *\n     * @return bool\n     *\/",555],["T_WHITESPACE","\n    ",561],["T_PUBLIC","public",562],["T_WHITESPACE"," ",562],["T_FUNCTION","function",562],["T_WHITESPACE"," ",562],["T_STRING","canReviewPayment",562],"(",["T_STRING","Mage_Payment_Model_Info",562],["T_WHITESPACE"," ",562],["T_VARIABLE","$payment",562],")",["T_WHITESPACE","\n    ",562],"{",["T_WHITESPACE","\n        ",563],["T_RETURN","return",564],["T_WHITESPACE"," ",564],["T_VARIABLE","$this",564],["T_OBJECT_OPERATOR","->",564],["T_STRING","_canReviewPayment",564],";",["T_WHITESPACE","\n    ",564],"}",["T_WHITESPACE","\n\n    ",565],["T_DOC_COMMENT","\/**\n     * Attempt to accept a payment that us under review\n     *\n     * @param Mage_Payment_Model_Info $payment\n     * @return bool\n     * @throws Mage_Core_Exception\n     *\/",567],["T_WHITESPACE","\n    ",573],["T_PUBLIC","public",574],["T_WHITESPACE"," ",574],["T_FUNCTION","function",574],["T_WHITESPACE"," ",574],["T_STRING","acceptPayment",574],"(",["T_STRING","Mage_Payment_Model_Info",574],["T_WHITESPACE"," ",574],["T_VARIABLE","$payment",574],")",["T_WHITESPACE","\n    ",574],"{",["T_WHITESPACE","\n        ",575],["T_IF","if",576],["T_WHITESPACE"," ",576],"(","!",["T_VARIABLE","$this",576],["T_OBJECT_OPERATOR","->",576],["T_STRING","canReviewPayment",576],"(",["T_VARIABLE","$payment",576],")",")",["T_WHITESPACE"," ",576],"{",["T_WHITESPACE","\n            ",576],["T_STRING","Mage",577],["T_DOUBLE_COLON","::",577],["T_STRING","throwException",577],"(",["T_STRING","Mage",577],["T_DOUBLE_COLON","::",577],["T_STRING","helper",577],"(",["T_CONSTANT_ENCAPSED_STRING","'payment'",577],")",["T_OBJECT_OPERATOR","->",577],["T_STRING","__",577],"(",["T_CONSTANT_ENCAPSED_STRING","'The payment review action is unavailable.'",577],")",")",";",["T_WHITESPACE","\n        ",577],"}",["T_WHITESPACE","\n        ",578],["T_RETURN","return",579],["T_WHITESPACE"," ",579],["T_STRING","false",579],";",["T_WHITESPACE","\n    ",579],"}",["T_WHITESPACE","\n\n    ",580],["T_DOC_COMMENT","\/**\n     * Attempt to deny a payment that us under review\n     *\n     * @param Mage_Payment_Model_Info $payment\n     * @return bool\n     * @throws Mage_Core_Exception\n     *\/",582],["T_WHITESPACE","\n    ",588],["T_PUBLIC","public",589],["T_WHITESPACE"," ",589],["T_FUNCTION","function",589],["T_WHITESPACE"," ",589],["T_STRING","denyPayment",589],"(",["T_STRING","Mage_Payment_Model_Info",589],["T_WHITESPACE"," ",589],["T_VARIABLE","$payment",589],")",["T_WHITESPACE","\n    ",589],"{",["T_WHITESPACE","\n        ",590],["T_IF","if",591],["T_WHITESPACE"," ",591],"(","!",["T_VARIABLE","$this",591],["T_OBJECT_OPERATOR","->",591],["T_STRING","canReviewPayment",591],"(",["T_VARIABLE","$payment",591],")",")",["T_WHITESPACE"," ",591],"{",["T_WHITESPACE","\n            ",591],["T_STRING","Mage",592],["T_DOUBLE_COLON","::",592],["T_STRING","throwException",592],"(",["T_STRING","Mage",592],["T_DOUBLE_COLON","::",592],["T_STRING","helper",592],"(",["T_CONSTANT_ENCAPSED_STRING","'payment'",592],")",["T_OBJECT_OPERATOR","->",592],["T_STRING","__",592],"(",["T_CONSTANT_ENCAPSED_STRING","'The payment review action is unavailable.'",592],")",")",";",["T_WHITESPACE","\n        ",592],"}",["T_WHITESPACE","\n        ",593],["T_RETURN","return",594],["T_WHITESPACE"," ",594],["T_STRING","false",594],";",["T_WHITESPACE","\n    ",594],"}",["T_WHITESPACE","\n\n    ",595],["T_DOC_COMMENT","\/**\n     * Retrieve payment method title\n     *\n     * @return string\n     *\/",597],["T_WHITESPACE","\n    ",601],["T_PUBLIC","public",602],["T_WHITESPACE"," ",602],["T_FUNCTION","function",602],["T_WHITESPACE"," ",602],["T_STRING","getTitle",602],"(",")",["T_WHITESPACE","\n    ",602],"{",["T_WHITESPACE","\n        ",603],["T_RETURN","return",604],["T_WHITESPACE"," ",604],["T_VARIABLE","$this",604],["T_OBJECT_OPERATOR","->",604],["T_STRING","getConfigData",604],"(",["T_CONSTANT_ENCAPSED_STRING","'title'",604],")",";",["T_WHITESPACE","\n    ",604],"}",["T_WHITESPACE","\n\n    ",605],["T_DOC_COMMENT","\/**\n     * Retrieve information from payment configuration\n     *\n     * @param string $field\n     * @param int|string|null|Mage_Core_Model_Store $storeId\n     *\n     * @return mixed\n     *\/",607],["T_WHITESPACE","\n    ",614],["T_PUBLIC","public",615],["T_WHITESPACE"," ",615],["T_FUNCTION","function",615],["T_WHITESPACE"," ",615],["T_STRING","getConfigData",615],"(",["T_VARIABLE","$field",615],",",["T_WHITESPACE"," ",615],["T_VARIABLE","$storeId",615],["T_WHITESPACE"," ",615],"=",["T_WHITESPACE"," ",615],["T_STRING","null",615],")",["T_WHITESPACE","\n    ",615],"{",["T_WHITESPACE","\n        ",616],["T_IF","if",617],["T_WHITESPACE"," ",617],"(",["T_STRING","null",617],["T_WHITESPACE"," ",617],["T_IS_IDENTICAL","===",617],["T_WHITESPACE"," ",617],["T_VARIABLE","$storeId",617],")",["T_WHITESPACE"," ",617],"{",["T_WHITESPACE","\n            ",617],["T_VARIABLE","$storeId",618],["T_WHITESPACE"," ",618],"=",["T_WHITESPACE"," ",618],["T_VARIABLE","$this",618],["T_OBJECT_OPERATOR","->",618],["T_STRING","getStore",618],"(",")",";",["T_WHITESPACE","\n        ",618],"}",["T_WHITESPACE","\n        ",619],["T_VARIABLE","$path",620],["T_WHITESPACE"," ",620],"=",["T_WHITESPACE"," ",620],["T_CONSTANT_ENCAPSED_STRING","'payment\/'",620],".",["T_VARIABLE","$this",620],["T_OBJECT_OPERATOR","->",620],["T_STRING","getCode",620],"(",")",".",["T_CONSTANT_ENCAPSED_STRING","'\/'",620],".",["T_VARIABLE","$field",620],";",["T_WHITESPACE","\n        ",620],["T_RETURN","return",621],["T_WHITESPACE"," ",621],["T_STRING","Mage",621],["T_DOUBLE_COLON","::",621],["T_STRING","getStoreConfig",621],"(",["T_VARIABLE","$path",621],",",["T_WHITESPACE"," ",621],["T_VARIABLE","$storeId",621],")",";",["T_WHITESPACE","\n    ",621],"}",["T_WHITESPACE","\n\n    ",622],["T_DOC_COMMENT","\/**\n     * Assign data to info model instance\n     *\n     * @param   mixed $data\n     * @return  Mage_Payment_Model_Info\n     *\/",624],["T_WHITESPACE","\n    ",629],["T_PUBLIC","public",630],["T_WHITESPACE"," ",630],["T_FUNCTION","function",630],["T_WHITESPACE"," ",630],["T_STRING","assignData",630],"(",["T_VARIABLE","$data",630],")",["T_WHITESPACE","\n    ",630],"{",["T_WHITESPACE","\n        ",631],["T_IF","if",632],["T_WHITESPACE"," ",632],"(",["T_STRING","is_array",632],"(",["T_VARIABLE","$data",632],")",")",["T_WHITESPACE"," ",632],"{",["T_WHITESPACE","\n            ",632],["T_VARIABLE","$this",633],["T_OBJECT_OPERATOR","->",633],["T_STRING","getInfoInstance",633],"(",")",["T_OBJECT_OPERATOR","->",633],["T_STRING","addData",633],"(",["T_VARIABLE","$data",633],")",";",["T_WHITESPACE","\n        ",633],"}",["T_WHITESPACE","\n        ",634],["T_ELSEIF","elseif",635],["T_WHITESPACE"," ",635],"(",["T_VARIABLE","$data",635],["T_WHITESPACE"," ",635],["T_INSTANCEOF","instanceof",635],["T_WHITESPACE"," ",635],["T_STRING","Varien_Object",635],")",["T_WHITESPACE"," ",635],"{",["T_WHITESPACE","\n            ",635],["T_VARIABLE","$this",636],["T_OBJECT_OPERATOR","->",636],["T_STRING","getInfoInstance",636],"(",")",["T_OBJECT_OPERATOR","->",636],["T_STRING","addData",636],"(",["T_VARIABLE","$data",636],["T_OBJECT_OPERATOR","->",636],["T_STRING","getData",636],"(",")",")",";",["T_WHITESPACE","\n        ",636],"}",["T_WHITESPACE","\n        ",637],["T_RETURN","return",638],["T_WHITESPACE"," ",638],["T_VARIABLE","$this",638],";",["T_WHITESPACE","\n    ",638],"}",["T_WHITESPACE","\n\n   ",639],["T_DOC_COMMENT","\/**\n     * Parepare info instance for save\n     *\n     * @return Mage_Payment_Model_Abstract\n     *\/",641],["T_WHITESPACE","\n    ",645],["T_PUBLIC","public",646],["T_WHITESPACE"," ",646],["T_FUNCTION","function",646],["T_WHITESPACE"," ",646],["T_STRING","prepareSave",646],"(",")",["T_WHITESPACE","\n    ",646],"{",["T_WHITESPACE","\n        ",647],["T_RETURN","return",648],["T_WHITESPACE"," ",648],["T_VARIABLE","$this",648],";",["T_WHITESPACE","\n    ",648],"}",["T_WHITESPACE","\n\n    ",649],["T_DOC_COMMENT","\/**\n     * Check whether payment method can be used\n     *\n     * TODO: payment method instance is not supposed to know about quote\n     *\n     * @param Mage_Sales_Model_Quote|null $quote\n     *\n     * @return bool\n     *\/",651],["T_WHITESPACE","\n    ",659],["T_PUBLIC","public",660],["T_WHITESPACE"," ",660],["T_FUNCTION","function",660],["T_WHITESPACE"," ",660],["T_STRING","isAvailable",660],"(",["T_VARIABLE","$quote",660],["T_WHITESPACE"," ",660],"=",["T_WHITESPACE"," ",660],["T_STRING","null",660],")",["T_WHITESPACE","\n    ",660],"{",["T_WHITESPACE","\n        ",661],["T_VARIABLE","$checkResult",662],["T_WHITESPACE"," ",662],"=",["T_WHITESPACE"," ",662],["T_NEW","new",662],["T_WHITESPACE"," ",662],["T_STRING","StdClass",662],";",["T_WHITESPACE","\n        ",662],["T_VARIABLE","$isActive",663],["T_WHITESPACE"," ",663],"=",["T_WHITESPACE"," ",663],["T_BOOL_CAST","(bool)",663],["T_INT_CAST","(int)",663],["T_VARIABLE","$this",663],["T_OBJECT_OPERATOR","->",663],["T_STRING","getConfigData",663],"(",["T_CONSTANT_ENCAPSED_STRING","'active'",663],",",["T_WHITESPACE"," ",663],["T_VARIABLE","$quote",663],["T_WHITESPACE"," ",663],"?",["T_WHITESPACE"," ",663],["T_VARIABLE","$quote",663],["T_OBJECT_OPERATOR","->",663],["T_STRING","getStoreId",663],"(",")",["T_WHITESPACE"," ",663],":",["T_WHITESPACE"," ",663],["T_STRING","null",663],")",";",["T_WHITESPACE","\n        ",663],["T_VARIABLE","$checkResult",664],["T_OBJECT_OPERATOR","->",664],["T_STRING","isAvailable",664],["T_WHITESPACE"," ",664],"=",["T_WHITESPACE"," ",664],["T_VARIABLE","$isActive",664],";",["T_WHITESPACE","\n        ",664],["T_VARIABLE","$checkResult",665],["T_OBJECT_OPERATOR","->",665],["T_STRING","isDeniedInConfig",665],["T_WHITESPACE"," ",665],"=",["T_WHITESPACE"," ",665],"!",["T_VARIABLE","$isActive",665],";",["T_WHITESPACE"," ",665],["T_COMMENT","\/\/ for future use in observers\n",665],["T_WHITESPACE","        ",666],["T_STRING","Mage",666],["T_DOUBLE_COLON","::",666],["T_STRING","dispatchEvent",666],"(",["T_CONSTANT_ENCAPSED_STRING","'payment_method_is_active'",666],",",["T_WHITESPACE"," ",666],["T_ARRAY","array",666],"(",["T_WHITESPACE","\n            ",666],["T_CONSTANT_ENCAPSED_STRING","'result'",667],["T_WHITESPACE","          ",667],["T_DOUBLE_ARROW","=>",667],["T_WHITESPACE"," ",667],["T_VARIABLE","$checkResult",667],",",["T_WHITESPACE","\n            ",667],["T_CONSTANT_ENCAPSED_STRING","'method_instance'",668],["T_WHITESPACE"," ",668],["T_DOUBLE_ARROW","=>",668],["T_WHITESPACE"," ",668],["T_VARIABLE","$this",668],",",["T_WHITESPACE","\n            ",668],["T_CONSTANT_ENCAPSED_STRING","'quote'",669],["T_WHITESPACE","           ",669],["T_DOUBLE_ARROW","=>",669],["T_WHITESPACE"," ",669],["T_VARIABLE","$quote",669],",",["T_WHITESPACE","\n        ",669],")",")",";",["T_WHITESPACE","\n\n        ",670],["T_IF","if",672],["T_WHITESPACE"," ",672],"(",["T_VARIABLE","$checkResult",672],["T_OBJECT_OPERATOR","->",672],["T_STRING","isAvailable",672],["T_WHITESPACE"," ",672],["T_BOOLEAN_AND","&&",672],["T_WHITESPACE"," ",672],["T_VARIABLE","$quote",672],")",["T_WHITESPACE"," ",672],"{",["T_WHITESPACE","\n            ",672],["T_VARIABLE","$checkResult",673],["T_OBJECT_OPERATOR","->",673],["T_STRING","isAvailable",673],["T_WHITESPACE"," ",673],"=",["T_WHITESPACE"," ",673],["T_VARIABLE","$this",673],["T_OBJECT_OPERATOR","->",673],["T_STRING","isApplicableToQuote",673],"(",["T_VARIABLE","$quote",673],",",["T_WHITESPACE"," ",673],["T_STRING","self",673],["T_DOUBLE_COLON","::",673],["T_STRING","CHECK_RECURRING_PROFILES",673],")",";",["T_WHITESPACE","\n        ",673],"}",["T_WHITESPACE","\n        ",674],["T_RETURN","return",675],["T_WHITESPACE"," ",675],["T_VARIABLE","$checkResult",675],["T_OBJECT_OPERATOR","->",675],["T_STRING","isAvailable",675],";",["T_WHITESPACE","\n    ",675],"}",["T_WHITESPACE","\n\n    ",676],["T_DOC_COMMENT","\/**\n     * Check whether payment method is applicable to quote\n     * Purposed to allow use in controllers some logic that was implemented in blocks only before\n     *\n     * @param Mage_Sales_Model_Quote $quote\n     * @param int|null $checksBitMask\n     * @return bool\n     *\/",678],["T_WHITESPACE","\n    ",685],["T_PUBLIC","public",686],["T_WHITESPACE"," ",686],["T_FUNCTION","function",686],["T_WHITESPACE"," ",686],["T_STRING","isApplicableToQuote",686],"(",["T_VARIABLE","$quote",686],",",["T_WHITESPACE"," ",686],["T_VARIABLE","$checksBitMask",686],")",["T_WHITESPACE","\n    ",686],"{",["T_WHITESPACE","\n        ",687],["T_IF","if",688],["T_WHITESPACE"," ",688],"(",["T_VARIABLE","$checksBitMask",688],["T_WHITESPACE"," ",688],"&",["T_WHITESPACE"," ",688],["T_STRING","self",688],["T_DOUBLE_COLON","::",688],["T_STRING","CHECK_USE_FOR_COUNTRY",688],")",["T_WHITESPACE"," ",688],"{",["T_WHITESPACE","\n            ",688],["T_IF","if",689],["T_WHITESPACE"," ",689],"(","!",["T_VARIABLE","$this",689],["T_OBJECT_OPERATOR","->",689],["T_STRING","canUseForCountry",689],"(",["T_VARIABLE","$quote",689],["T_OBJECT_OPERATOR","->",689],["T_STRING","getBillingAddress",689],"(",")",["T_OBJECT_OPERATOR","->",689],["T_STRING","getCountry",689],"(",")",")",")",["T_WHITESPACE"," ",689],"{",["T_WHITESPACE","\n                ",689],["T_RETURN","return",690],["T_WHITESPACE"," ",690],["T_STRING","false",690],";",["T_WHITESPACE","\n            ",690],"}",["T_WHITESPACE","\n        ",691],"}",["T_WHITESPACE","\n        ",692],["T_IF","if",693],["T_WHITESPACE"," ",693],"(",["T_VARIABLE","$checksBitMask",693],["T_WHITESPACE"," ",693],"&",["T_WHITESPACE"," ",693],["T_STRING","self",693],["T_DOUBLE_COLON","::",693],["T_STRING","CHECK_USE_FOR_CURRENCY",693],")",["T_WHITESPACE"," ",693],"{",["T_WHITESPACE","\n            ",693],["T_IF","if",694],["T_WHITESPACE"," ",694],"(","!",["T_VARIABLE","$this",694],["T_OBJECT_OPERATOR","->",694],["T_STRING","canUseForCurrency",694],"(",["T_VARIABLE","$quote",694],["T_OBJECT_OPERATOR","->",694],["T_STRING","getStore",694],"(",")",["T_OBJECT_OPERATOR","->",694],["T_STRING","getBaseCurrencyCode",694],"(",")",")",")",["T_WHITESPACE"," ",694],"{",["T_WHITESPACE","\n                ",694],["T_RETURN","return",695],["T_WHITESPACE"," ",695],["T_STRING","false",695],";",["T_WHITESPACE","\n            ",695],"}",["T_WHITESPACE","\n        ",696],"}",["T_WHITESPACE","\n        ",697],["T_IF","if",698],["T_WHITESPACE"," ",698],"(",["T_VARIABLE","$checksBitMask",698],["T_WHITESPACE"," ",698],"&",["T_WHITESPACE"," ",698],["T_STRING","self",698],["T_DOUBLE_COLON","::",698],["T_STRING","CHECK_USE_CHECKOUT",698],")",["T_WHITESPACE"," ",698],"{",["T_WHITESPACE","\n            ",698],["T_IF","if",699],["T_WHITESPACE"," ",699],"(","!",["T_VARIABLE","$this",699],["T_OBJECT_OPERATOR","->",699],["T_STRING","canUseCheckout",699],"(",")",")",["T_WHITESPACE"," ",699],"{",["T_WHITESPACE","\n                ",699],["T_RETURN","return",700],["T_WHITESPACE"," ",700],["T_STRING","false",700],";",["T_WHITESPACE","\n            ",700],"}",["T_WHITESPACE","\n        ",701],"}",["T_WHITESPACE","\n        ",702],["T_IF","if",703],["T_WHITESPACE"," ",703],"(",["T_VARIABLE","$checksBitMask",703],["T_WHITESPACE"," ",703],"&",["T_WHITESPACE"," ",703],["T_STRING","self",703],["T_DOUBLE_COLON","::",703],["T_STRING","CHECK_USE_FOR_MULTISHIPPING",703],")",["T_WHITESPACE"," ",703],"{",["T_WHITESPACE","\n            ",703],["T_IF","if",704],["T_WHITESPACE"," ",704],"(","!",["T_VARIABLE","$this",704],["T_OBJECT_OPERATOR","->",704],["T_STRING","canUseForMultishipping",704],"(",")",")",["T_WHITESPACE"," ",704],"{",["T_WHITESPACE","\n                ",704],["T_RETURN","return",705],["T_WHITESPACE"," ",705],["T_STRING","false",705],";",["T_WHITESPACE","\n            ",705],"}",["T_WHITESPACE","\n        ",706],"}",["T_WHITESPACE","\n        ",707],["T_IF","if",708],["T_WHITESPACE"," ",708],"(",["T_VARIABLE","$checksBitMask",708],["T_WHITESPACE"," ",708],"&",["T_WHITESPACE"," ",708],["T_STRING","self",708],["T_DOUBLE_COLON","::",708],["T_STRING","CHECK_USE_INTERNAL",708],")",["T_WHITESPACE"," ",708],"{",["T_WHITESPACE","\n            ",708],["T_IF","if",709],["T_WHITESPACE"," ",709],"(","!",["T_VARIABLE","$this",709],["T_OBJECT_OPERATOR","->",709],["T_STRING","canUseInternal",709],"(",")",")",["T_WHITESPACE"," ",709],"{",["T_WHITESPACE","\n                ",709],["T_RETURN","return",710],["T_WHITESPACE"," ",710],["T_STRING","false",710],";",["T_WHITESPACE","\n            ",710],"}",["T_WHITESPACE","\n        ",711],"}",["T_WHITESPACE","\n        ",712],["T_IF","if",713],["T_WHITESPACE"," ",713],"(",["T_VARIABLE","$checksBitMask",713],["T_WHITESPACE"," ",713],"&",["T_WHITESPACE"," ",713],["T_STRING","self",713],["T_DOUBLE_COLON","::",713],["T_STRING","CHECK_ORDER_TOTAL_MIN_MAX",713],")",["T_WHITESPACE"," ",713],"{",["T_WHITESPACE","\n            ",713],["T_VARIABLE","$total",714],["T_WHITESPACE"," ",714],"=",["T_WHITESPACE"," ",714],["T_VARIABLE","$quote",714],["T_OBJECT_OPERATOR","->",714],["T_STRING","getBaseGrandTotal",714],"(",")",";",["T_WHITESPACE","\n            ",714],["T_VARIABLE","$minTotal",715],["T_WHITESPACE"," ",715],"=",["T_WHITESPACE"," ",715],["T_VARIABLE","$this",715],["T_OBJECT_OPERATOR","->",715],["T_STRING","getConfigData",715],"(",["T_CONSTANT_ENCAPSED_STRING","'min_order_total'",715],")",";",["T_WHITESPACE","\n            ",715],["T_VARIABLE","$maxTotal",716],["T_WHITESPACE"," ",716],"=",["T_WHITESPACE"," ",716],["T_VARIABLE","$this",716],["T_OBJECT_OPERATOR","->",716],["T_STRING","getConfigData",716],"(",["T_CONSTANT_ENCAPSED_STRING","'max_order_total'",716],")",";",["T_WHITESPACE","\n            ",716],["T_IF","if",717],["T_WHITESPACE"," ",717],"(","!",["T_EMPTY","empty",717],"(",["T_VARIABLE","$minTotal",717],")",["T_WHITESPACE"," ",717],["T_BOOLEAN_AND","&&",717],["T_WHITESPACE"," ",717],["T_VARIABLE","$total",717],["T_WHITESPACE"," ",717],"<",["T_WHITESPACE"," ",717],["T_VARIABLE","$minTotal",717],["T_WHITESPACE"," ",717],["T_BOOLEAN_OR","||",717],["T_WHITESPACE"," ",717],"!",["T_EMPTY","empty",717],"(",["T_VARIABLE","$maxTotal",717],")",["T_WHITESPACE"," ",717],["T_BOOLEAN_AND","&&",717],["T_WHITESPACE"," ",717],["T_VARIABLE","$total",717],["T_WHITESPACE"," ",717],">",["T_WHITESPACE"," ",717],["T_VARIABLE","$maxTotal",717],")",["T_WHITESPACE"," ",717],"{",["T_WHITESPACE","\n                ",717],["T_RETURN","return",718],["T_WHITESPACE"," ",718],["T_STRING","false",718],";",["T_WHITESPACE","\n            ",718],"}",["T_WHITESPACE","\n        ",719],"}",["T_WHITESPACE","\n        ",720],["T_IF","if",721],["T_WHITESPACE"," ",721],"(",["T_VARIABLE","$checksBitMask",721],["T_WHITESPACE"," ",721],"&",["T_WHITESPACE"," ",721],["T_STRING","self",721],["T_DOUBLE_COLON","::",721],["T_STRING","CHECK_RECURRING_PROFILES",721],")",["T_WHITESPACE"," ",721],"{",["T_WHITESPACE","\n            ",721],["T_IF","if",722],["T_WHITESPACE"," ",722],"(","!",["T_VARIABLE","$this",722],["T_OBJECT_OPERATOR","->",722],["T_STRING","canManageRecurringProfiles",722],"(",")",["T_WHITESPACE"," ",722],["T_BOOLEAN_AND","&&",722],["T_WHITESPACE"," ",722],["T_VARIABLE","$quote",722],["T_OBJECT_OPERATOR","->",722],["T_STRING","hasRecurringItems",722],"(",")",")",["T_WHITESPACE"," ",722],"{",["T_WHITESPACE","\n                ",722],["T_RETURN","return",723],["T_WHITESPACE"," ",723],["T_STRING","false",723],";",["T_WHITESPACE","\n            ",723],"}",["T_WHITESPACE","\n        ",724],"}",["T_WHITESPACE","\n        ",725],["T_IF","if",726],["T_WHITESPACE"," ",726],"(",["T_VARIABLE","$checksBitMask",726],["T_WHITESPACE"," ",726],"&",["T_WHITESPACE"," ",726],["T_STRING","self",726],["T_DOUBLE_COLON","::",726],["T_STRING","CHECK_ZERO_TOTAL",726],")",["T_WHITESPACE"," ",726],"{",["T_WHITESPACE","\n            ",726],["T_VARIABLE","$total",727],["T_WHITESPACE"," ",727],"=",["T_WHITESPACE"," ",727],["T_VARIABLE","$quote",727],["T_OBJECT_OPERATOR","->",727],["T_STRING","getBaseSubtotal",727],"(",")",["T_WHITESPACE"," ",727],"+",["T_WHITESPACE"," ",727],["T_VARIABLE","$quote",727],["T_OBJECT_OPERATOR","->",727],["T_STRING","getShippingAddress",727],"(",")",["T_OBJECT_OPERATOR","->",727],["T_STRING","getBaseShippingAmount",727],"(",")",";",["T_WHITESPACE","\n            ",727],["T_IF","if",728],["T_WHITESPACE"," ",728],"(",["T_VARIABLE","$total",728],["T_WHITESPACE"," ",728],"<",["T_WHITESPACE"," ",728],["T_DNUMBER","0.0001",728],["T_WHITESPACE"," ",728],["T_BOOLEAN_AND","&&",728],["T_WHITESPACE"," ",728],["T_VARIABLE","$this",728],["T_OBJECT_OPERATOR","->",728],["T_STRING","getCode",728],"(",")",["T_WHITESPACE"," ",728],["T_IS_NOT_EQUAL","!=",728],["T_WHITESPACE"," ",728],["T_CONSTANT_ENCAPSED_STRING","'free'",728],["T_WHITESPACE","\n                ",728],["T_BOOLEAN_AND","&&",729],["T_WHITESPACE"," ",729],"!","(",["T_VARIABLE","$this",729],["T_OBJECT_OPERATOR","->",729],["T_STRING","canManageRecurringProfiles",729],"(",")",["T_WHITESPACE"," ",729],["T_BOOLEAN_AND","&&",729],["T_WHITESPACE"," ",729],["T_VARIABLE","$quote",729],["T_OBJECT_OPERATOR","->",729],["T_STRING","hasRecurringItems",729],"(",")",")",["T_WHITESPACE","\n            ",729],")",["T_WHITESPACE"," ",730],"{",["T_WHITESPACE","\n                ",730],["T_RETURN","return",731],["T_WHITESPACE"," ",731],["T_STRING","false",731],";",["T_WHITESPACE","\n            ",731],"}",["T_WHITESPACE","\n        ",732],"}",["T_WHITESPACE","\n        ",733],["T_RETURN","return",734],["T_WHITESPACE"," ",734],["T_STRING","true",734],";",["T_WHITESPACE","\n    ",734],"}",["T_WHITESPACE","\n\n    ",735],["T_DOC_COMMENT","\/**\n     * Method that will be executed instead of authorize or capture\n     * if flag isInitializeNeeded set to true\n     *\n     * @param string $paymentAction\n     * @param object $stateObject\n     *\n     * @return Mage_Payment_Model_Abstract\n     *\/",737],["T_WHITESPACE","\n    ",745],["T_PUBLIC","public",746],["T_WHITESPACE"," ",746],["T_FUNCTION","function",746],["T_WHITESPACE"," ",746],["T_STRING","initialize",746],"(",["T_VARIABLE","$paymentAction",746],",",["T_WHITESPACE"," ",746],["T_VARIABLE","$stateObject",746],")",["T_WHITESPACE","\n    ",746],"{",["T_WHITESPACE","\n        ",747],["T_RETURN","return",748],["T_WHITESPACE"," ",748],["T_VARIABLE","$this",748],";",["T_WHITESPACE","\n    ",748],"}",["T_WHITESPACE","\n\n    ",749],["T_DOC_COMMENT","\/**\n     * Get config payment action url\n     * Used to universalize payment actions when processing payment place\n     *\n     * @return string\n     *\/",751],["T_WHITESPACE","\n    ",756],["T_PUBLIC","public",757],["T_WHITESPACE"," ",757],["T_FUNCTION","function",757],["T_WHITESPACE"," ",757],["T_STRING","getConfigPaymentAction",757],"(",")",["T_WHITESPACE","\n    ",757],"{",["T_WHITESPACE","\n        ",758],["T_RETURN","return",759],["T_WHITESPACE"," ",759],["T_VARIABLE","$this",759],["T_OBJECT_OPERATOR","->",759],["T_STRING","getConfigData",759],"(",["T_CONSTANT_ENCAPSED_STRING","'payment_action'",759],")",";",["T_WHITESPACE","\n    ",759],"}",["T_WHITESPACE","\n\n    ",760],["T_DOC_COMMENT","\/**\n     * Log debug data to file\n     *\n     * @param mixed $debugData\n     *\/",762],["T_WHITESPACE","\n    ",766],["T_PROTECTED","protected",767],["T_WHITESPACE"," ",767],["T_FUNCTION","function",767],["T_WHITESPACE"," ",767],["T_STRING","_debug",767],"(",["T_VARIABLE","$debugData",767],")",["T_WHITESPACE","\n    ",767],"{",["T_WHITESPACE","\n        ",768],["T_IF","if",769],["T_WHITESPACE"," ",769],"(",["T_VARIABLE","$this",769],["T_OBJECT_OPERATOR","->",769],["T_STRING","getDebugFlag",769],"(",")",")",["T_WHITESPACE"," ",769],"{",["T_WHITESPACE","\n            ",769],["T_STRING","Mage",770],["T_DOUBLE_COLON","::",770],["T_STRING","getModel",770],"(",["T_CONSTANT_ENCAPSED_STRING","'core\/log_adapter'",770],",",["T_WHITESPACE"," ",770],["T_CONSTANT_ENCAPSED_STRING","'payment_'",770],["T_WHITESPACE"," ",770],".",["T_WHITESPACE"," ",770],["T_VARIABLE","$this",770],["T_OBJECT_OPERATOR","->",770],["T_STRING","getCode",770],"(",")",["T_WHITESPACE"," ",770],".",["T_WHITESPACE"," ",770],["T_CONSTANT_ENCAPSED_STRING","'.log'",770],")",["T_WHITESPACE","\n               ",770],["T_OBJECT_OPERATOR","->",771],["T_STRING","setFilterDataKeys",771],"(",["T_VARIABLE","$this",771],["T_OBJECT_OPERATOR","->",771],["T_STRING","_debugReplacePrivateDataKeys",771],")",["T_WHITESPACE","\n               ",771],["T_OBJECT_OPERATOR","->",772],["T_STRING","log",772],"(",["T_VARIABLE","$debugData",772],")",";",["T_WHITESPACE","\n        ",772],"}",["T_WHITESPACE","\n    ",773],"}",["T_WHITESPACE","\n\n    ",774],["T_DOC_COMMENT","\/**\n     * Define if debugging is enabled\n     *\n     * @return bool\n     *\/",776],["T_WHITESPACE","\n    ",780],["T_PUBLIC","public",781],["T_WHITESPACE"," ",781],["T_FUNCTION","function",781],["T_WHITESPACE"," ",781],["T_STRING","getDebugFlag",781],"(",")",["T_WHITESPACE","\n    ",781],"{",["T_WHITESPACE","\n        ",782],["T_RETURN","return",783],["T_WHITESPACE"," ",783],["T_VARIABLE","$this",783],["T_OBJECT_OPERATOR","->",783],["T_STRING","getConfigData",783],"(",["T_CONSTANT_ENCAPSED_STRING","'debug'",783],")",";",["T_WHITESPACE","\n    ",783],"}",["T_WHITESPACE","\n\n    ",784],["T_DOC_COMMENT","\/**\n     * Used to call debug method from not Payment Method context\n     *\n     * @param mixed $debugData\n     *\/",786],["T_WHITESPACE","\n    ",790],["T_PUBLIC","public",791],["T_WHITESPACE"," ",791],["T_FUNCTION","function",791],["T_WHITESPACE"," ",791],["T_STRING","debugData",791],"(",["T_VARIABLE","$debugData",791],")",["T_WHITESPACE","\n    ",791],"{",["T_WHITESPACE","\n        ",792],["T_VARIABLE","$this",793],["T_OBJECT_OPERATOR","->",793],["T_STRING","_debug",793],"(",["T_VARIABLE","$debugData",793],")",";",["T_WHITESPACE","\n    ",793],"}",["T_WHITESPACE","\n",794],"}",["T_WHITESPACE","\n",795]]
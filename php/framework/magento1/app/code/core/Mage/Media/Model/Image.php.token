[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Magento\n *\n * NOTICE OF LICENSE\n *\n * This source file is subject to the Open Software License (OSL 3.0)\n * that is bundled with this package in the file LICENSE.txt.\n * It is also available through the world-wide-web at this URL:\n * http:\/\/opensource.org\/licenses\/osl-3.0.php\n * If you did not receive a copy of the license and are unable to\n * obtain it through the world-wide-web, please send an email\n * to license@magento.com so we can send you a copy immediately.\n *\n * DISCLAIMER\n *\n * Do not edit or add to this file if you wish to upgrade Magento to newer\n * versions in the future. If you wish to customize Magento for your\n * needs please refer to http:\/\/www.magento.com for more information.\n *\n * @category    Mage\n * @package     Mage_Media\n * @copyright  Copyright (c) 2006-2016 X.commerce, Inc. and affiliates (http:\/\/www.magento.com)\n * @license    http:\/\/opensource.org\/licenses\/osl-3.0.php  Open Software License (OSL 3.0)\n *\/",2],["T_WHITESPACE","\n\n\n",25],["T_DOC_COMMENT","\/**\n * Media library Image model\n *\n * @category   Mage\n * @package    Mage_Media\n * @author      Magento Core Team <core@magentocommerce.com>\n *\/",28],["T_WHITESPACE","\n",34],["T_CLASS","class",35],["T_WHITESPACE"," ",35],["T_STRING","Mage_Media_Model_Image",35],["T_WHITESPACE"," ",35],["T_EXTENDS","extends",35],["T_WHITESPACE"," ",35],["T_STRING","Mage_Core_Model_Abstract",35],["T_WHITESPACE","\n",35],"{",["T_WHITESPACE","\n    ",36],["T_DOC_COMMENT","\/**\n     * Image config instance\n     *\n     * @var Mage_Media_Model_Image_Config_Interface\n     *\/",37],["T_WHITESPACE","\n    ",41],["T_PROTECTED","protected",42],["T_WHITESPACE"," ",42],["T_VARIABLE","$_config",42],";",["T_WHITESPACE","\n\n    ",42],["T_DOC_COMMENT","\/**\n     * Image resource\n     *\n     * @var resource\n     *\/",44],["T_WHITESPACE","\n    ",48],["T_PROTECTED","protected",49],["T_WHITESPACE"," ",49],["T_VARIABLE","$_image",49],";",["T_WHITESPACE","\n\n    ",49],["T_DOC_COMMENT","\/**\n     * Tmp image resource\n     *\n     * @var resource\n     *\/",51],["T_WHITESPACE","\n    ",55],["T_PROTECTED","protected",56],["T_WHITESPACE"," ",56],["T_VARIABLE","$_tmpImage",56],";",["T_WHITESPACE","\n\n    ",56],["T_DOC_COMMENT","\/**\n     * Params for filename generation\n     *\n     * @var array\n     *\/",58],["T_WHITESPACE","\n    ",62],["T_PROTECTED","protected",63],["T_WHITESPACE"," ",63],["T_VARIABLE","$_params",63],["T_WHITESPACE"," ",63],"=",["T_WHITESPACE"," ",63],["T_ARRAY","array",63],"(",")",";",["T_WHITESPACE","\n\n\n    ",63],["T_PROTECTED","protected",66],["T_WHITESPACE"," ",66],["T_FUNCTION","function",66],["T_WHITESPACE"," ",66],["T_STRING","_construct",66],"(",")",["T_WHITESPACE","\n    ",66],"{",["T_WHITESPACE","\n        ",67],["T_VARIABLE","$this",68],["T_OBJECT_OPERATOR","->",68],["T_STRING","_init",68],"(",["T_CONSTANT_ENCAPSED_STRING","'media\/image'",68],")",";",["T_WHITESPACE","\n    ",68],"}",["T_WHITESPACE","\n\n    ",69],["T_DOC_COMMENT","\/**\n     * Set media image config instance\n     *\n     * @param Mage_Media_Model_Image_Config_Interface $config\n     * @return unknown\n     *\/",71],["T_WHITESPACE","\n    ",76],["T_PUBLIC","public",77],["T_WHITESPACE"," ",77],["T_FUNCTION","function",77],["T_WHITESPACE"," ",77],["T_STRING","setConfig",77],"(",["T_STRING","Mage_Media_Model_Image_Config_Interface",77],["T_WHITESPACE"," ",77],["T_VARIABLE","$config",77],")",["T_WHITESPACE","\n    ",77],"{",["T_WHITESPACE","\n        ",78],["T_VARIABLE","$this",79],["T_OBJECT_OPERATOR","->",79],["T_STRING","_config",79],["T_WHITESPACE"," ",79],"=",["T_WHITESPACE"," ",79],["T_VARIABLE","$config",79],";",["T_WHITESPACE","\n        ",79],["T_RETURN","return",80],["T_WHITESPACE"," ",80],["T_VARIABLE","$this",80],";",["T_WHITESPACE","\n    ",80],"}",["T_WHITESPACE","\n\n    ",81],["T_DOC_COMMENT","\/**\n     * Retrive media image config instance\n     *\n     * @return Mage_Media_Model_Image_Config_Interface\n     *\/",83],["T_WHITESPACE","\n    ",87],["T_PUBLIC","public",88],["T_WHITESPACE"," ",88],["T_FUNCTION","function",88],["T_WHITESPACE"," ",88],["T_STRING","getConfig",88],"(",")",["T_WHITESPACE","\n    ",88],"{",["T_WHITESPACE","\n        ",89],["T_RETURN","return",90],["T_WHITESPACE"," ",90],["T_VARIABLE","$this",90],["T_OBJECT_OPERATOR","->",90],["T_STRING","_config",90],";",["T_WHITESPACE","\n    ",90],"}",["T_WHITESPACE","\n\n    ",91],["T_PUBLIC","public",93],["T_WHITESPACE"," ",93],["T_FUNCTION","function",93],["T_WHITESPACE"," ",93],["T_STRING","getImage",93],"(",")",["T_WHITESPACE","\n    ",93],"{",["T_WHITESPACE","\n        ",94],["T_IF","if",95],"(",["T_STRING","is_null",95],"(",["T_VARIABLE","$this",95],["T_OBJECT_OPERATOR","->",95],["T_STRING","_image",95],")",")",["T_WHITESPACE"," ",95],"{",["T_WHITESPACE","\n            ",95],["T_VARIABLE","$this",96],["T_OBJECT_OPERATOR","->",96],["T_STRING","_image",96],["T_WHITESPACE"," ",96],"=",["T_WHITESPACE"," ",96],["T_VARIABLE","$this",96],["T_OBJECT_OPERATOR","->",96],["T_STRING","_getResource",96],"(",")",["T_OBJECT_OPERATOR","->",96],["T_STRING","getImage",96],"(",["T_VARIABLE","$this",96],")",";",["T_WHITESPACE","\n        ",96],"}",["T_WHITESPACE","\n\n        ",97],["T_RETURN","return",99],["T_WHITESPACE"," ",99],["T_VARIABLE","$this",99],["T_OBJECT_OPERATOR","->",99],["T_STRING","_image",99],";",["T_WHITESPACE","\n    ",99],"}",["T_WHITESPACE","\n\n    ",100],["T_PUBLIC","public",102],["T_WHITESPACE"," ",102],["T_FUNCTION","function",102],["T_WHITESPACE"," ",102],["T_STRING","getTmpImage",102],"(",")",["T_WHITESPACE","\n    ",102],"{",["T_WHITESPACE","\n        ",103],["T_IF","if",104],"(",["T_STRING","is_null",104],"(",["T_VARIABLE","$this",104],["T_OBJECT_OPERATOR","->",104],["T_STRING","_image",104],")",")",["T_WHITESPACE"," ",104],"{",["T_WHITESPACE","\n            ",104],["T_VARIABLE","$this",105],["T_OBJECT_OPERATOR","->",105],["T_STRING","_tmpImage",105],["T_WHITESPACE"," ",105],"=",["T_WHITESPACE"," ",105],["T_VARIABLE","$this",105],["T_OBJECT_OPERATOR","->",105],["T_STRING","_getResource",105],"(",")",["T_OBJECT_OPERATOR","->",105],["T_STRING","getTmpImage",105],"(",["T_VARIABLE","$this",105],")",";",["T_WHITESPACE","\n        ",105],"}",["T_WHITESPACE","\n\n        ",106],["T_RETURN","return",108],["T_WHITESPACE"," ",108],["T_VARIABLE","$this",108],["T_OBJECT_OPERATOR","->",108],["T_STRING","_tmpImage",108],";",["T_WHITESPACE","\n    ",108],"}",["T_WHITESPACE","\n\n    ",109],["T_DOC_COMMENT","\/**\n     * Retrive source dimensions object\n     *\n     * @return Varien_Object\n     *\/",111],["T_WHITESPACE","\n    ",115],["T_PUBLIC","public",116],["T_WHITESPACE"," ",116],["T_FUNCTION","function",116],["T_WHITESPACE"," ",116],["T_STRING","getDimensions",116],"(",")",["T_WHITESPACE","\n    ",116],"{",["T_WHITESPACE","\n        ",117],["T_IF","if",118],"(","!",["T_VARIABLE","$this",118],["T_OBJECT_OPERATOR","->",118],["T_STRING","getData",118],"(",["T_CONSTANT_ENCAPSED_STRING","'dimensions'",118],")",")",["T_WHITESPACE"," ",118],"{",["T_WHITESPACE","\n            ",118],["T_VARIABLE","$this",119],["T_OBJECT_OPERATOR","->",119],["T_STRING","setData",119],"(",["T_CONSTANT_ENCAPSED_STRING","'dimensions'",119],",",["T_WHITESPACE"," ",119],["T_VARIABLE","$this",119],["T_OBJECT_OPERATOR","->",119],["T_STRING","_getResource",119],"(",")",["T_OBJECT_OPERATOR","->",119],["T_STRING","getDimensions",119],"(",["T_VARIABLE","$this",119],")",")",";",["T_WHITESPACE","\n        ",119],"}",["T_WHITESPACE","\n        ",120],["T_RETURN","return",121],["T_WHITESPACE"," ",121],["T_VARIABLE","$this",121],["T_OBJECT_OPERATOR","->",121],["T_STRING","getData",121],"(",["T_CONSTANT_ENCAPSED_STRING","'dimensions'",121],")",";",["T_WHITESPACE","\n    ",121],"}",["T_WHITESPACE","\n\n    ",122],["T_DOC_COMMENT","\/**\n     * Retrive destanation dimensions object\n     *\n     * @return Varien_Object\n     *\/",124],["T_WHITESPACE","\n    ",128],["T_PUBLIC","public",129],["T_WHITESPACE"," ",129],["T_FUNCTION","function",129],["T_WHITESPACE"," ",129],["T_STRING","getDestanationDimensions",129],"(",")",["T_WHITESPACE","\n    ",129],"{",["T_WHITESPACE","\n        ",130],["T_IF","if",131],"(","!",["T_VARIABLE","$this",131],["T_OBJECT_OPERATOR","->",131],["T_STRING","getData",131],"(",["T_CONSTANT_ENCAPSED_STRING","'destanation_dimensions'",131],")",")",["T_WHITESPACE"," ",131],"{",["T_WHITESPACE","\n            ",131],["T_VARIABLE","$this",132],["T_OBJECT_OPERATOR","->",132],["T_STRING","setData",132],"(",["T_CONSTANT_ENCAPSED_STRING","'destanation_dimensions'",132],",",["T_WHITESPACE"," ",132],["T_CLONE","clone",132],["T_WHITESPACE"," ",132],["T_VARIABLE","$this",132],["T_OBJECT_OPERATOR","->",132],["T_STRING","getDimensions",132],"(",")",")",";",["T_WHITESPACE","\n        ",132],"}",["T_WHITESPACE","\n\n        ",133],["T_RETURN","return",135],["T_WHITESPACE"," ",135],["T_VARIABLE","$this",135],["T_OBJECT_OPERATOR","->",135],["T_STRING","getData",135],"(",["T_CONSTANT_ENCAPSED_STRING","'destanation_dimensions'",135],")",";",["T_WHITESPACE","\n    ",135],"}",["T_WHITESPACE","\n\n    ",136],["T_PUBLIC","public",138],["T_WHITESPACE"," ",138],["T_FUNCTION","function",138],["T_WHITESPACE"," ",138],["T_STRING","getExtension",138],"(",")",["T_WHITESPACE","\n    ",138],"{",["T_WHITESPACE","\n        ",139],["T_RETURN","return",140],["T_WHITESPACE"," ",140],["T_STRING","substr",140],"(",["T_VARIABLE","$this",140],["T_OBJECT_OPERATOR","->",140],["T_STRING","getFileName",140],"(",")",",",["T_WHITESPACE"," ",140],["T_STRING","strrpos",140],"(",["T_VARIABLE","$this",140],["T_OBJECT_OPERATOR","->",140],["T_STRING","getFileName",140],"(",")",",",["T_WHITESPACE"," ",140],["T_CONSTANT_ENCAPSED_STRING","'.'",140],")","+",["T_LNUMBER","1",140],")",";",["T_WHITESPACE","\n    ",140],"}",["T_WHITESPACE","\n\n    ",141],["T_PUBLIC","public",143],["T_WHITESPACE"," ",143],["T_FUNCTION","function",143],["T_WHITESPACE"," ",143],["T_STRING","getFilePath",143],"(",["T_VARIABLE","$useParams",143],"=",["T_STRING","false",143],")",["T_WHITESPACE","\n    ",143],"{",["T_WHITESPACE","\n        ",144],["T_IF","if",145],"(",["T_VARIABLE","$useParams",145],["T_WHITESPACE"," ",145],["T_BOOLEAN_AND","&&",145],["T_WHITESPACE"," ",145],["T_STRING","sizeof",145],"(",["T_VARIABLE","$this",145],["T_OBJECT_OPERATOR","->",145],["T_STRING","getParams",145],"(",")",")",")",["T_WHITESPACE"," ",145],"{",["T_WHITESPACE","\n            ",145],["T_VARIABLE","$changes",146],["T_WHITESPACE"," ",146],"=",["T_WHITESPACE"," ",146],["T_CONSTANT_ENCAPSED_STRING","'.'",146],["T_WHITESPACE"," ",146],".",["T_WHITESPACE"," ",146],["T_VARIABLE","$this",146],["T_OBJECT_OPERATOR","->",146],["T_STRING","getParamsSum",146],"(",")",";",["T_WHITESPACE","\n        ",146],"}",["T_WHITESPACE"," ",147],["T_ELSE","else",147],["T_WHITESPACE"," ",147],"{",["T_WHITESPACE","\n            ",147],["T_VARIABLE","$changes",148],["T_WHITESPACE"," ",148],"=",["T_WHITESPACE"," ",148],["T_CONSTANT_ENCAPSED_STRING","''",148],";",["T_WHITESPACE","\n        ",148],"}",["T_WHITESPACE","\n\n        ",149],["T_RETURN","return",151],["T_WHITESPACE"," ",151],["T_VARIABLE","$this",151],["T_OBJECT_OPERATOR","->",151],["T_STRING","getConfig",151],"(",")",["T_OBJECT_OPERATOR","->",151],["T_STRING","getBaseMediaPath",151],"(",")",["T_WHITESPACE"," ",151],".",["T_WHITESPACE"," ",151],["T_STRING","DS",151],["T_WHITESPACE"," ",151],".",["T_WHITESPACE"," ",151],["T_VARIABLE","$this",151],["T_OBJECT_OPERATOR","->",151],["T_STRING","getName",151],"(",")",["T_WHITESPACE"," ",151],".",["T_WHITESPACE"," ",151],["T_VARIABLE","$changes",151],["T_WHITESPACE"," ",151],".",["T_WHITESPACE"," ",151],["T_CONSTANT_ENCAPSED_STRING","'.'",151],["T_WHITESPACE","\n             ",151],".",["T_WHITESPACE"," ",152],"(",["T_WHITESPACE"," ",152],"(",["T_WHITESPACE"," ",152],["T_VARIABLE","$useParams",152],["T_WHITESPACE"," ",152],["T_BOOLEAN_AND","&&",152],["T_WHITESPACE"," ",152],["T_VARIABLE","$this",152],["T_OBJECT_OPERATOR","->",152],["T_STRING","getParam",152],"(",["T_CONSTANT_ENCAPSED_STRING","'extension'",152],")",")",["T_WHITESPACE"," ",152],"?",["T_WHITESPACE"," ",152],["T_VARIABLE","$this",152],["T_OBJECT_OPERATOR","->",152],["T_STRING","getParam",152],"(",["T_CONSTANT_ENCAPSED_STRING","'extension'",152],")",["T_WHITESPACE"," ",152],":",["T_WHITESPACE"," ",152],["T_VARIABLE","$this",152],["T_OBJECT_OPERATOR","->",152],["T_STRING","getExtension",152],"(",")",["T_WHITESPACE"," ",152],")",";",["T_WHITESPACE","\n    ",152],"}",["T_WHITESPACE","\n\n    ",153],["T_PUBLIC","public",155],["T_WHITESPACE"," ",155],["T_FUNCTION","function",155],["T_WHITESPACE"," ",155],["T_STRING","getFileUrl",155],"(",["T_VARIABLE","$useParams",155],"=",["T_STRING","false",155],")",["T_WHITESPACE","\n    ",155],"{",["T_WHITESPACE","\n        ",156],["T_IF","if",157],"(",["T_VARIABLE","$useParams",157],["T_WHITESPACE"," ",157],["T_BOOLEAN_AND","&&",157],["T_WHITESPACE"," ",157],["T_STRING","sizeof",157],"(",["T_VARIABLE","$this",157],["T_OBJECT_OPERATOR","->",157],["T_STRING","getParams",157],"(",")",")",")",["T_WHITESPACE"," ",157],"{",["T_WHITESPACE","\n            ",157],["T_VARIABLE","$changes",158],["T_WHITESPACE"," ",158],"=",["T_WHITESPACE"," ",158],["T_CONSTANT_ENCAPSED_STRING","'.'",158],["T_WHITESPACE"," ",158],".",["T_WHITESPACE"," ",158],["T_VARIABLE","$this",158],["T_OBJECT_OPERATOR","->",158],["T_STRING","getParamsSum",158],"(",")",";",["T_WHITESPACE","\n        ",158],"}",["T_WHITESPACE"," ",159],["T_ELSE","else",159],["T_WHITESPACE"," ",159],"{",["T_WHITESPACE","\n            ",159],["T_VARIABLE","$changes",160],["T_WHITESPACE"," ",160],"=",["T_WHITESPACE"," ",160],["T_CONSTANT_ENCAPSED_STRING","''",160],";",["T_WHITESPACE","\n        ",160],"}",["T_WHITESPACE","\n\n        ",161],["T_RETURN","return",163],["T_WHITESPACE"," ",163],["T_VARIABLE","$this",163],["T_OBJECT_OPERATOR","->",163],["T_STRING","getConfig",163],"(",")",["T_OBJECT_OPERATOR","->",163],["T_STRING","getBaseMediaUrl",163],"(",")",["T_WHITESPACE"," ",163],".",["T_WHITESPACE"," ",163],["T_CONSTANT_ENCAPSED_STRING","'\/'",163],["T_WHITESPACE"," ",163],".",["T_WHITESPACE"," ",163],["T_VARIABLE","$this",163],["T_OBJECT_OPERATOR","->",163],["T_STRING","getName",163],"(",")",["T_WHITESPACE"," ",163],".",["T_WHITESPACE"," ",163],["T_VARIABLE","$changes",163],["T_WHITESPACE"," ",163],".",["T_WHITESPACE"," ",163],["T_CONSTANT_ENCAPSED_STRING","'.'",163],["T_WHITESPACE","\n             ",163],".",["T_WHITESPACE"," ",164],"(",["T_WHITESPACE"," ",164],"(",["T_WHITESPACE"," ",164],["T_VARIABLE","$useParams",164],["T_WHITESPACE"," ",164],["T_BOOLEAN_AND","&&",164],["T_WHITESPACE"," ",164],["T_VARIABLE","$this",164],["T_OBJECT_OPERATOR","->",164],["T_STRING","getParam",164],"(",["T_CONSTANT_ENCAPSED_STRING","'extension'",164],")",")",["T_WHITESPACE"," ",164],"?",["T_WHITESPACE"," ",164],["T_VARIABLE","$this",164],["T_OBJECT_OPERATOR","->",164],["T_STRING","getParam",164],"(",["T_CONSTANT_ENCAPSED_STRING","'extension'",164],")",["T_WHITESPACE"," ",164],":",["T_WHITESPACE"," ",164],["T_VARIABLE","$this",164],["T_OBJECT_OPERATOR","->",164],["T_STRING","getExtension",164],"(",")",["T_WHITESPACE"," ",164],")",";",["T_WHITESPACE","\n    ",164],"}",["T_WHITESPACE","\n\n    ",165],["T_PUBLIC","public",167],["T_WHITESPACE"," ",167],["T_FUNCTION","function",167],["T_WHITESPACE"," ",167],["T_STRING","getName",167],"(",")",["T_WHITESPACE","\n    ",167],"{",["T_WHITESPACE","\n        ",168],["T_RETURN","return",169],["T_WHITESPACE"," ",169],["T_STRING","substr",169],"(",["T_VARIABLE","$this",169],["T_OBJECT_OPERATOR","->",169],["T_STRING","getFileName",169],"(",")",",",["T_WHITESPACE"," ",169],["T_LNUMBER","0",169],",",["T_WHITESPACE"," ",169],["T_STRING","strrpos",169],"(",["T_VARIABLE","$this",169],["T_OBJECT_OPERATOR","->",169],["T_STRING","getFileName",169],"(",")",",",["T_WHITESPACE"," ",169],["T_CONSTANT_ENCAPSED_STRING","'.'",169],")",")",";",["T_WHITESPACE","\n    ",169],"}",["T_WHITESPACE","\n\n    ",170],["T_PUBLIC","public",172],["T_WHITESPACE"," ",172],["T_FUNCTION","function",172],["T_WHITESPACE"," ",172],["T_STRING","addParam",172],"(",["T_VARIABLE","$param",172],",",["T_WHITESPACE"," ",172],["T_VARIABLE","$value",172],"=",["T_STRING","null",172],")",["T_WHITESPACE","\n    ",172],"{",["T_WHITESPACE","\n        ",173],["T_IF","if",174],"(",["T_STRING","is_array",174],"(",["T_VARIABLE","$param",174],")",")",["T_WHITESPACE"," ",174],"{",["T_WHITESPACE","\n            ",174],["T_VARIABLE","$this",175],["T_OBJECT_OPERATOR","->",175],["T_STRING","_params",175],["T_WHITESPACE"," ",175],"=",["T_WHITESPACE"," ",175],["T_STRING","array_merge",175],"(",["T_VARIABLE","$this",175],["T_OBJECT_OPERATOR","->",175],["T_STRING","_params",175],",",["T_WHITESPACE"," ",175],["T_VARIABLE","$param",175],")",";",["T_WHITESPACE","\n        ",175],"}",["T_WHITESPACE"," ",176],["T_ELSE","else",176],["T_WHITESPACE"," ",176],"{",["T_WHITESPACE","\n            ",176],["T_VARIABLE","$this",177],["T_OBJECT_OPERATOR","->",177],["T_STRING","_params",177],"[",["T_VARIABLE","$param",177],"]",["T_WHITESPACE"," ",177],"=",["T_WHITESPACE"," ",177],["T_VARIABLE","$value",177],";",["T_WHITESPACE","\n        ",177],"}",["T_WHITESPACE","\n\n        ",178],["T_RETURN","return",180],["T_WHITESPACE"," ",180],["T_VARIABLE","$this",180],";",["T_WHITESPACE","\n    ",180],"}",["T_WHITESPACE","\n\n    ",181],["T_PUBLIC","public",183],["T_WHITESPACE"," ",183],["T_FUNCTION","function",183],["T_WHITESPACE"," ",183],["T_STRING","setParam",183],"(",["T_VARIABLE","$param",183],",",["T_WHITESPACE"," ",183],["T_VARIABLE","$value",183],"=",["T_STRING","null",183],")",["T_WHITESPACE","\n    ",183],"{",["T_WHITESPACE","\n        ",184],["T_IF","if",185],"(",["T_STRING","is_array",185],"(",["T_VARIABLE","$param",185],")",")",["T_WHITESPACE"," ",185],"{",["T_WHITESPACE","\n            ",185],["T_VARIABLE","$this",186],["T_OBJECT_OPERATOR","->",186],["T_STRING","_params",186],["T_WHITESPACE"," ",186],"=",["T_WHITESPACE"," ",186],["T_VARIABLE","$param",186],";",["T_WHITESPACE","\n        ",186],"}",["T_WHITESPACE"," ",187],["T_ELSE","else",187],["T_WHITESPACE"," ",187],"{",["T_WHITESPACE","\n            ",187],["T_VARIABLE","$this",188],["T_OBJECT_OPERATOR","->",188],["T_STRING","_params",188],"[",["T_VARIABLE","$param",188],"]",["T_WHITESPACE"," ",188],"=",["T_WHITESPACE"," ",188],["T_VARIABLE","$value",188],";",["T_WHITESPACE","\n        ",188],"}",["T_WHITESPACE","\n\n        ",189],["T_RETURN","return",191],["T_WHITESPACE"," ",191],["T_VARIABLE","$this",191],";",["T_WHITESPACE","\n    ",191],"}",["T_WHITESPACE","\n\n    ",192],["T_PUBLIC","public",194],["T_WHITESPACE"," ",194],["T_FUNCTION","function",194],["T_WHITESPACE"," ",194],["T_STRING","getParam",194],"(",["T_VARIABLE","$param",194],")",["T_WHITESPACE","\n    ",194],"{",["T_WHITESPACE","\n        ",195],["T_IF","if",196],"(",["T_ISSET","isset",196],"(",["T_VARIABLE","$this",196],["T_OBJECT_OPERATOR","->",196],["T_STRING","_params",196],"[",["T_VARIABLE","$param",196],"]",")",")",["T_WHITESPACE"," ",196],"{",["T_WHITESPACE","\n            ",196],["T_RETURN","return",197],["T_WHITESPACE"," ",197],["T_VARIABLE","$this",197],["T_OBJECT_OPERATOR","->",197],["T_STRING","_params",197],"[",["T_VARIABLE","$param",197],"]",";",["T_WHITESPACE","\n        ",197],"}",["T_WHITESPACE","\n\n        ",198],["T_RETURN","return",200],["T_WHITESPACE"," ",200],["T_STRING","null",200],";",["T_WHITESPACE","\n    ",200],"}",["T_WHITESPACE","\n\n    ",201],["T_PUBLIC","public",203],["T_WHITESPACE"," ",203],["T_FUNCTION","function",203],["T_WHITESPACE"," ",203],["T_STRING","getParams",203],"(",")",["T_WHITESPACE","\n    ",203],"{",["T_WHITESPACE","\n        ",204],["T_RETURN","return",205],["T_WHITESPACE"," ",205],["T_VARIABLE","$this",205],["T_OBJECT_OPERATOR","->",205],["T_STRING","_params",205],";",["T_WHITESPACE","\n    ",205],"}",["T_WHITESPACE","\n\n    ",206],["T_PUBLIC","public",208],["T_WHITESPACE"," ",208],["T_FUNCTION","function",208],["T_WHITESPACE"," ",208],["T_STRING","getParamsSum",208],"(",")",["T_WHITESPACE","\n    ",208],"{",["T_WHITESPACE","\n        ",209],["T_RETURN","return",210],["T_WHITESPACE"," ",210],["T_STRING","md5",210],"(",["T_STRING","serialize",210],"(",["T_VARIABLE","$this",210],["T_OBJECT_OPERATOR","->",210],["T_STRING","_params",210],")",")",";",["T_WHITESPACE","\n    ",210],"}",["T_WHITESPACE","\n\n    ",211],["T_DOC_COMMENT","\/**\n     * Return special link (with creating image if not exists)\n     *\n     * @param string $file\n     * @param string $size\n     * @param string $extension\n     * @param string $watermark\n     * @return string\n     *\/",213],["T_WHITESPACE","\n    ",221],["T_PUBLIC","public",222],["T_WHITESPACE"," ",222],["T_FUNCTION","function",222],["T_WHITESPACE"," ",222],["T_STRING","getSpecialLink",222],"(",["T_VARIABLE","$file",222],",",["T_WHITESPACE"," ",222],["T_VARIABLE","$size",222],",",["T_WHITESPACE"," ",222],["T_VARIABLE","$extension",222],"=",["T_STRING","null",222],",",["T_WHITESPACE"," ",222],["T_VARIABLE","$watermark",222],"=",["T_STRING","null",222],")",["T_WHITESPACE","\n    ",222],"{",["T_WHITESPACE","\n        ",223],["T_VARIABLE","$this",224],["T_OBJECT_OPERATOR","->",224],["T_STRING","_removeResources",224],"(",")",";",["T_WHITESPACE","\n        ",224],["T_VARIABLE","$this",225],["T_OBJECT_OPERATOR","->",225],["T_STRING","setData",225],"(",["T_ARRAY","array",225],"(",")",")",";",["T_WHITESPACE","\n        ",225],["T_VARIABLE","$this",226],["T_OBJECT_OPERATOR","->",226],["T_STRING","setParam",226],"(",["T_ARRAY","array",226],"(",")",")",";",["T_WHITESPACE","\n        ",226],["T_VARIABLE","$this",227],["T_OBJECT_OPERATOR","->",227],["T_STRING","setFileName",227],"(",["T_VARIABLE","$file",227],")",";",["T_WHITESPACE","\n\n        ",227],["T_VARIABLE","$this",229],["T_OBJECT_OPERATOR","->",229],["T_STRING","addParam",229],"(",["T_CONSTANT_ENCAPSED_STRING","'size'",229],",",["T_WHITESPACE"," ",229],["T_VARIABLE","$size",229],")",";",["T_WHITESPACE","\n        ",229],["T_VARIABLE","$this",230],["T_OBJECT_OPERATOR","->",230],["T_STRING","addParam",230],"(",["T_CONSTANT_ENCAPSED_STRING","'watermark'",230],",",["T_WHITESPACE"," ",230],["T_VARIABLE","$watermark",230],")",";",["T_WHITESPACE","\n        ",230],["T_VARIABLE","$this",231],["T_OBJECT_OPERATOR","->",231],["T_STRING","addParam",231],"(",["T_CONSTANT_ENCAPSED_STRING","'extension'",231],",",["T_WHITESPACE"," ",231],["T_VARIABLE","$extension",231],")",";",["T_WHITESPACE","\n\n        ",231],["T_IF","if",233],"(","!",["T_VARIABLE","$this",233],["T_OBJECT_OPERATOR","->",233],["T_STRING","hasSpecialImage",233],"(",")",")",["T_WHITESPACE"," ",233],"{",["T_WHITESPACE","\n            ",233],["T_IF","if",234],["T_WHITESPACE"," ",234],"(",["T_STRING","strpos",234],"(",["T_VARIABLE","$size",234],",",["T_WHITESPACE"," ",234],["T_CONSTANT_ENCAPSED_STRING","'x'",234],")",["T_IS_NOT_IDENTICAL","!==",234],["T_STRING","false",234],")",["T_WHITESPACE"," ",234],"{",["T_WHITESPACE","\n               ",234],["T_LIST","list",235],"(",["T_VARIABLE","$width",235],",",["T_WHITESPACE"," ",235],["T_VARIABLE","$height",235],")",["T_WHITESPACE"," ",235],"=",["T_WHITESPACE"," ",235],["T_STRING","explode",235],"(",["T_CONSTANT_ENCAPSED_STRING","'x'",235],",",["T_WHITESPACE"," ",235],["T_VARIABLE","$size",235],")",";",["T_WHITESPACE","\n            ",235],"}",["T_WHITESPACE"," ",236],["T_ELSE","else",236],["T_WHITESPACE"," ",236],"{",["T_WHITESPACE","\n                ",236],["T_VARIABLE","$width",237],["T_WHITESPACE"," ",237],"=",["T_WHITESPACE"," ",237],["T_VARIABLE","$size",237],";",["T_WHITESPACE","\n                ",237],["T_VARIABLE","$height",238],["T_WHITESPACE"," ",238],"=",["T_WHITESPACE"," ",238],["T_VARIABLE","$this",238],["T_OBJECT_OPERATOR","->",238],["T_STRING","getDimensions",238],"(",")",["T_OBJECT_OPERATOR","->",238],["T_STRING","getHeight",238],"(",")",";",["T_WHITESPACE","\n            ",238],"}",["T_WHITESPACE","\n\n            ",239],["T_VARIABLE","$sizeHRate",241],["T_WHITESPACE"," ",241],"=",["T_WHITESPACE"," ",241],["T_VARIABLE","$width",241],["T_WHITESPACE"," ",241],"\/",["T_WHITESPACE"," ",241],["T_VARIABLE","$this",241],["T_OBJECT_OPERATOR","->",241],["T_STRING","getDimensions",241],"(",")",["T_OBJECT_OPERATOR","->",241],["T_STRING","getWidth",241],"(",")",";",["T_WHITESPACE","\n            ",241],["T_VARIABLE","$sizeVRate",242],["T_WHITESPACE"," ",242],"=",["T_WHITESPACE"," ",242],["T_VARIABLE","$height",242],["T_WHITESPACE"," ",242],"\/",["T_WHITESPACE"," ",242],["T_VARIABLE","$this",242],["T_OBJECT_OPERATOR","->",242],["T_STRING","getDimensions",242],"(",")",["T_OBJECT_OPERATOR","->",242],["T_STRING","getHeight",242],"(",")",";",["T_WHITESPACE","\n\n            ",242],["T_VARIABLE","$rate",244],["T_WHITESPACE"," ",244],"=",["T_WHITESPACE"," ",244],["T_STRING","min",244],"(",["T_VARIABLE","$sizeHRate",244],",",["T_WHITESPACE"," ",244],["T_VARIABLE","$sizeVRate",244],")",";",["T_WHITESPACE","\n\n            ",244],["T_IF","if",246],["T_WHITESPACE"," ",246],"(",["T_VARIABLE","$rate",246],["T_WHITESPACE"," ",246],">",["T_WHITESPACE"," ",246],["T_LNUMBER","1",246],")",["T_WHITESPACE"," ",246],"{",["T_WHITESPACE"," ",246],["T_COMMENT","\/\/ If image smaller than needed\n",246],["T_WHITESPACE","                ",247],["T_VARIABLE","$rate",247],["T_WHITESPACE"," ",247],"=",["T_WHITESPACE"," ",247],["T_LNUMBER","1",247],";",["T_WHITESPACE","\n            ",247],"}",["T_WHITESPACE","\n\n            ",248],["T_VARIABLE","$this",250],["T_OBJECT_OPERATOR","->",250],["T_STRING","getDestanationDimensions",250],"(",")",["T_WHITESPACE","\n                ",250],["T_OBJECT_OPERATOR","->",251],["T_STRING","setWidth",251],"(",["T_VARIABLE","$rate",251],"*",["T_VARIABLE","$this",251],["T_OBJECT_OPERATOR","->",251],["T_STRING","getDimensions",251],"(",")",["T_OBJECT_OPERATOR","->",251],["T_STRING","getWidth",251],"(",")",")",["T_WHITESPACE","\n                ",251],["T_OBJECT_OPERATOR","->",252],["T_STRING","setHeight",252],"(",["T_VARIABLE","$rate",252],"*",["T_VARIABLE","$this",252],["T_OBJECT_OPERATOR","->",252],["T_STRING","getDimensions",252],"(",")",["T_OBJECT_OPERATOR","->",252],["T_STRING","getHeight",252],"(",")",")",";",["T_WHITESPACE","\n\n\n            ",252],["T_VARIABLE","$this",255],["T_OBJECT_OPERATOR","->",255],["T_STRING","_getResource",255],"(",")",["T_OBJECT_OPERATOR","->",255],["T_STRING","resize",255],"(",["T_VARIABLE","$this",255],")",";",["T_WHITESPACE","\n            ",255],["T_VARIABLE","$this",256],["T_OBJECT_OPERATOR","->",256],["T_STRING","_getResource",256],"(",")",["T_OBJECT_OPERATOR","->",256],["T_STRING","watermark",256],"(",["T_VARIABLE","$this",256],")",";",["T_WHITESPACE","\n            ",256],["T_VARIABLE","$this",257],["T_OBJECT_OPERATOR","->",257],["T_STRING","_getResource",257],"(",")",["T_OBJECT_OPERATOR","->",257],["T_STRING","saveAs",257],"(",["T_VARIABLE","$this",257],",",["T_WHITESPACE"," ",257],["T_VARIABLE","$extension",257],")",";",["T_WHITESPACE","\n            ",257],["T_VARIABLE","$this",258],["T_OBJECT_OPERATOR","->",258],["T_STRING","_removeResources",258],"(",")",";",["T_WHITESPACE","\n        ",258],"}",["T_WHITESPACE","\n\n        ",259],["T_RETURN","return",261],["T_WHITESPACE"," ",261],["T_VARIABLE","$this",261],["T_OBJECT_OPERATOR","->",261],["T_STRING","getFileUrl",261],"(",["T_STRING","true",261],")",";",["T_WHITESPACE","\n    ",261],"}",["T_WHITESPACE","\n\n    ",262],["T_PUBLIC","public",264],["T_WHITESPACE"," ",264],["T_FUNCTION","function",264],["T_WHITESPACE"," ",264],["T_STRING","hasSpecialImage",264],"(",")",["T_WHITESPACE","\n    ",264],"{",["T_WHITESPACE","\n        ",265],["T_RETURN","return",266],["T_WHITESPACE"," ",266],["T_VARIABLE","$this",266],["T_OBJECT_OPERATOR","->",266],["T_STRING","_getResource",266],"(",")",["T_OBJECT_OPERATOR","->",266],["T_STRING","hasSpecialImage",266],"(",["T_VARIABLE","$this",266],")",";",["T_WHITESPACE","\n    ",266],"}",["T_WHITESPACE","\n\n    ",267],["T_PROTECTED","protected",269],["T_WHITESPACE"," ",269],["T_FUNCTION","function",269],["T_WHITESPACE"," ",269],["T_STRING","_removeResources",269],"(",")",["T_WHITESPACE","\n    ",269],"{",["T_WHITESPACE","\n        ",270],["T_IF","if",271],["T_WHITESPACE"," ",271],"(",["T_VARIABLE","$this",271],["T_OBJECT_OPERATOR","->",271],["T_STRING","_image",271],")",["T_WHITESPACE"," ",271],"{",["T_WHITESPACE","\n            ",271],["T_VARIABLE","$this",272],["T_OBJECT_OPERATOR","->",272],["T_STRING","_getResource",272],"(",")",["T_OBJECT_OPERATOR","->",272],["T_STRING","destroyResource",272],"(",["T_VARIABLE","$this",272],["T_OBJECT_OPERATOR","->",272],["T_STRING","_image",272],")",";",["T_WHITESPACE","\n            ",272],["T_VARIABLE","$this",273],["T_OBJECT_OPERATOR","->",273],["T_STRING","_image",273],["T_WHITESPACE"," ",273],"=",["T_WHITESPACE"," ",273],["T_STRING","null",273],";",["T_WHITESPACE","\n        ",273],"}",["T_WHITESPACE","\n\n        ",274],["T_IF","if",276],["T_WHITESPACE"," ",276],"(",["T_VARIABLE","$this",276],["T_OBJECT_OPERATOR","->",276],["T_STRING","_tmpImage",276],")",["T_WHITESPACE"," ",276],"{",["T_WHITESPACE","\n            ",276],["T_VARIABLE","$this",277],["T_OBJECT_OPERATOR","->",277],["T_STRING","_getResource",277],"(",")",["T_OBJECT_OPERATOR","->",277],["T_STRING","destroyResource",277],"(",["T_VARIABLE","$this",277],["T_OBJECT_OPERATOR","->",277],["T_STRING","_tmpImage",277],")",";",["T_WHITESPACE","\n            ",277],["T_VARIABLE","$this",278],["T_OBJECT_OPERATOR","->",278],["T_STRING","_tmpImage",278],["T_WHITESPACE"," ",278],"=",["T_WHITESPACE"," ",278],["T_STRING","null",278],";",["T_WHITESPACE","\n        ",278],"}",["T_WHITESPACE","\n    ",279],"}",["T_WHITESPACE","\n\n",280],"}",["T_WHITESPACE","\n",282]]
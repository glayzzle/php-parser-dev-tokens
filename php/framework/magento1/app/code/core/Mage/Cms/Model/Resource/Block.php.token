[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Magento\n *\n * NOTICE OF LICENSE\n *\n * This source file is subject to the Open Software License (OSL 3.0)\n * that is bundled with this package in the file LICENSE.txt.\n * It is also available through the world-wide-web at this URL:\n * http:\/\/opensource.org\/licenses\/osl-3.0.php\n * If you did not receive a copy of the license and are unable to\n * obtain it through the world-wide-web, please send an email\n * to license@magento.com so we can send you a copy immediately.\n *\n * DISCLAIMER\n *\n * Do not edit or add to this file if you wish to upgrade Magento to newer\n * versions in the future. If you wish to customize Magento for your\n * needs please refer to http:\/\/www.magento.com for more information.\n *\n * @category    Mage\n * @package     Mage_Cms\n * @copyright  Copyright (c) 2006-2016 X.commerce, Inc. and affiliates (http:\/\/www.magento.com)\n * @license    http:\/\/opensource.org\/licenses\/osl-3.0.php  Open Software License (OSL 3.0)\n *\/",2],["T_WHITESPACE","\n\n\n",25],["T_DOC_COMMENT","\/**\n * CMS block model\n *\n * @category    Mage\n * @package     Mage_Cms\n * @author      Magento Core Team <core@magentocommerce.com>\n *\/",28],["T_WHITESPACE","\n",34],["T_CLASS","class",35],["T_WHITESPACE"," ",35],["T_STRING","Mage_Cms_Model_Resource_Block",35],["T_WHITESPACE"," ",35],["T_EXTENDS","extends",35],["T_WHITESPACE"," ",35],["T_STRING","Mage_Core_Model_Resource_Db_Abstract",35],["T_WHITESPACE","\n",35],"{",["T_WHITESPACE","\n    ",36],["T_DOC_COMMENT","\/**\n     * Initialize resource model\n     *\n     *\/",37],["T_WHITESPACE","\n    ",40],["T_PROTECTED","protected",41],["T_WHITESPACE"," ",41],["T_FUNCTION","function",41],["T_WHITESPACE"," ",41],["T_STRING","_construct",41],"(",")",["T_WHITESPACE","\n    ",41],"{",["T_WHITESPACE","\n        ",42],["T_VARIABLE","$this",43],["T_OBJECT_OPERATOR","->",43],["T_STRING","_init",43],"(",["T_CONSTANT_ENCAPSED_STRING","'cms\/block'",43],",",["T_WHITESPACE"," ",43],["T_CONSTANT_ENCAPSED_STRING","'block_id'",43],")",";",["T_WHITESPACE","\n    ",43],"}",["T_WHITESPACE","\n\n    ",44],["T_DOC_COMMENT","\/**\n     * Process block data before deleting\n     *\n     * @param Mage_Core_Model_Abstract $object\n     * @return Mage_Cms_Model_Resource_Page\n     *\/",46],["T_WHITESPACE","\n    ",51],["T_PROTECTED","protected",52],["T_WHITESPACE"," ",52],["T_FUNCTION","function",52],["T_WHITESPACE"," ",52],["T_STRING","_beforeDelete",52],"(",["T_STRING","Mage_Core_Model_Abstract",52],["T_WHITESPACE"," ",52],["T_VARIABLE","$object",52],")",["T_WHITESPACE","\n    ",52],"{",["T_WHITESPACE","\n        ",53],["T_VARIABLE","$condition",54],["T_WHITESPACE"," ",54],"=",["T_WHITESPACE"," ",54],["T_ARRAY","array",54],"(",["T_WHITESPACE","\n            ",54],["T_CONSTANT_ENCAPSED_STRING","'block_id = ?'",55],["T_WHITESPACE","     ",55],["T_DOUBLE_ARROW","=>",55],["T_WHITESPACE"," ",55],["T_INT_CAST","(int)",55],["T_WHITESPACE"," ",55],["T_VARIABLE","$object",55],["T_OBJECT_OPERATOR","->",55],["T_STRING","getId",55],"(",")",",",["T_WHITESPACE","\n        ",55],")",";",["T_WHITESPACE","\n\n        ",56],["T_VARIABLE","$this",58],["T_OBJECT_OPERATOR","->",58],["T_STRING","_getWriteAdapter",58],"(",")",["T_OBJECT_OPERATOR","->",58],["T_STRING","delete",58],"(",["T_VARIABLE","$this",58],["T_OBJECT_OPERATOR","->",58],["T_STRING","getTable",58],"(",["T_CONSTANT_ENCAPSED_STRING","'cms\/block_store'",58],")",",",["T_WHITESPACE"," ",58],["T_VARIABLE","$condition",58],")",";",["T_WHITESPACE","\n\n        ",58],["T_RETURN","return",60],["T_WHITESPACE"," ",60],["T_STRING","parent",60],["T_DOUBLE_COLON","::",60],["T_STRING","_beforeDelete",60],"(",["T_VARIABLE","$object",60],")",";",["T_WHITESPACE","\n    ",60],"}",["T_WHITESPACE","\n\n    ",61],["T_DOC_COMMENT","\/**\n     * Perform operations before object save\n     *\n     * @param Mage_Cms_Model_Block $object\n     * @return Mage_Cms_Model_Resource_Block\n     *\/",63],["T_WHITESPACE","\n    ",68],["T_PROTECTED","protected",69],["T_WHITESPACE"," ",69],["T_FUNCTION","function",69],["T_WHITESPACE"," ",69],["T_STRING","_beforeSave",69],"(",["T_STRING","Mage_Core_Model_Abstract",69],["T_WHITESPACE"," ",69],["T_VARIABLE","$object",69],")",["T_WHITESPACE","\n    ",69],"{",["T_WHITESPACE","\n        ",70],["T_IF","if",71],["T_WHITESPACE"," ",71],"(","!",["T_VARIABLE","$this",71],["T_OBJECT_OPERATOR","->",71],["T_STRING","getIsUniqueBlockToStores",71],"(",["T_VARIABLE","$object",71],")",")",["T_WHITESPACE"," ",71],"{",["T_WHITESPACE","\n            ",71],["T_STRING","Mage",72],["T_DOUBLE_COLON","::",72],["T_STRING","throwException",72],"(",["T_STRING","Mage",72],["T_DOUBLE_COLON","::",72],["T_STRING","helper",72],"(",["T_CONSTANT_ENCAPSED_STRING","'cms'",72],")",["T_OBJECT_OPERATOR","->",72],["T_STRING","__",72],"(",["T_CONSTANT_ENCAPSED_STRING","'A block identifier with the same properties already exists in the selected store.'",72],")",")",";",["T_WHITESPACE","\n        ",72],"}",["T_WHITESPACE","\n\n        ",73],["T_IF","if",75],["T_WHITESPACE"," ",75],"(","!",["T_WHITESPACE"," ",75],["T_VARIABLE","$object",75],["T_OBJECT_OPERATOR","->",75],["T_STRING","getId",75],"(",")",")",["T_WHITESPACE"," ",75],"{",["T_WHITESPACE","\n            ",75],["T_VARIABLE","$object",76],["T_OBJECT_OPERATOR","->",76],["T_STRING","setCreationTime",76],"(",["T_STRING","Mage",76],["T_DOUBLE_COLON","::",76],["T_STRING","getSingleton",76],"(",["T_CONSTANT_ENCAPSED_STRING","'core\/date'",76],")",["T_OBJECT_OPERATOR","->",76],["T_STRING","gmtDate",76],"(",")",")",";",["T_WHITESPACE","\n        ",76],"}",["T_WHITESPACE","\n        ",77],["T_VARIABLE","$object",78],["T_OBJECT_OPERATOR","->",78],["T_STRING","setUpdateTime",78],"(",["T_STRING","Mage",78],["T_DOUBLE_COLON","::",78],["T_STRING","getSingleton",78],"(",["T_CONSTANT_ENCAPSED_STRING","'core\/date'",78],")",["T_OBJECT_OPERATOR","->",78],["T_STRING","gmtDate",78],"(",")",")",";",["T_WHITESPACE","\n        ",78],["T_RETURN","return",79],["T_WHITESPACE"," ",79],["T_VARIABLE","$this",79],";",["T_WHITESPACE","\n    ",79],"}",["T_WHITESPACE","\n\n    ",80],["T_DOC_COMMENT","\/**\n     * Perform operations after object save\n     *\n     * @param Mage_Core_Model_Abstract $object\n     * @return Mage_Cms_Model_Resource_Block\n     *\/",82],["T_WHITESPACE","\n    ",87],["T_PROTECTED","protected",88],["T_WHITESPACE"," ",88],["T_FUNCTION","function",88],["T_WHITESPACE"," ",88],["T_STRING","_afterSave",88],"(",["T_STRING","Mage_Core_Model_Abstract",88],["T_WHITESPACE"," ",88],["T_VARIABLE","$object",88],")",["T_WHITESPACE","\n    ",88],"{",["T_WHITESPACE","\n        ",89],["T_VARIABLE","$oldStores",90],["T_WHITESPACE"," ",90],"=",["T_WHITESPACE"," ",90],["T_VARIABLE","$this",90],["T_OBJECT_OPERATOR","->",90],["T_STRING","lookupStoreIds",90],"(",["T_VARIABLE","$object",90],["T_OBJECT_OPERATOR","->",90],["T_STRING","getId",90],"(",")",")",";",["T_WHITESPACE","\n        ",90],["T_VARIABLE","$newStores",91],["T_WHITESPACE"," ",91],"=",["T_WHITESPACE"," ",91],["T_ARRAY_CAST","(array)",91],["T_VARIABLE","$object",91],["T_OBJECT_OPERATOR","->",91],["T_STRING","getStores",91],"(",")",";",["T_WHITESPACE","\n\n        ",91],["T_VARIABLE","$table",93],["T_WHITESPACE","  ",93],"=",["T_WHITESPACE"," ",93],["T_VARIABLE","$this",93],["T_OBJECT_OPERATOR","->",93],["T_STRING","getTable",93],"(",["T_CONSTANT_ENCAPSED_STRING","'cms\/block_store'",93],")",";",["T_WHITESPACE","\n        ",93],["T_VARIABLE","$insert",94],["T_WHITESPACE"," ",94],"=",["T_WHITESPACE"," ",94],["T_STRING","array_diff",94],"(",["T_VARIABLE","$newStores",94],",",["T_WHITESPACE"," ",94],["T_VARIABLE","$oldStores",94],")",";",["T_WHITESPACE","\n        ",94],["T_VARIABLE","$delete",95],["T_WHITESPACE"," ",95],"=",["T_WHITESPACE"," ",95],["T_STRING","array_diff",95],"(",["T_VARIABLE","$oldStores",95],",",["T_WHITESPACE"," ",95],["T_VARIABLE","$newStores",95],")",";",["T_WHITESPACE","\n\n        ",95],["T_IF","if",97],["T_WHITESPACE"," ",97],"(",["T_VARIABLE","$delete",97],")",["T_WHITESPACE"," ",97],"{",["T_WHITESPACE","\n            ",97],["T_VARIABLE","$where",98],["T_WHITESPACE"," ",98],"=",["T_WHITESPACE"," ",98],["T_ARRAY","array",98],"(",["T_WHITESPACE","\n                ",98],["T_CONSTANT_ENCAPSED_STRING","'block_id = ?'",99],["T_WHITESPACE","     ",99],["T_DOUBLE_ARROW","=>",99],["T_WHITESPACE"," ",99],["T_INT_CAST","(int)",99],["T_WHITESPACE"," ",99],["T_VARIABLE","$object",99],["T_OBJECT_OPERATOR","->",99],["T_STRING","getId",99],"(",")",",",["T_WHITESPACE","\n                ",99],["T_CONSTANT_ENCAPSED_STRING","'store_id IN (?)'",100],["T_WHITESPACE"," ",100],["T_DOUBLE_ARROW","=>",100],["T_WHITESPACE"," ",100],["T_VARIABLE","$delete",100],["T_WHITESPACE","\n            ",100],")",";",["T_WHITESPACE","\n\n            ",101],["T_VARIABLE","$this",103],["T_OBJECT_OPERATOR","->",103],["T_STRING","_getWriteAdapter",103],"(",")",["T_OBJECT_OPERATOR","->",103],["T_STRING","delete",103],"(",["T_VARIABLE","$table",103],",",["T_WHITESPACE"," ",103],["T_VARIABLE","$where",103],")",";",["T_WHITESPACE","\n        ",103],"}",["T_WHITESPACE","\n\n        ",104],["T_IF","if",106],["T_WHITESPACE"," ",106],"(",["T_VARIABLE","$insert",106],")",["T_WHITESPACE"," ",106],"{",["T_WHITESPACE","\n            ",106],["T_VARIABLE","$data",107],["T_WHITESPACE"," ",107],"=",["T_WHITESPACE"," ",107],["T_ARRAY","array",107],"(",")",";",["T_WHITESPACE","\n\n            ",107],["T_FOREACH","foreach",109],["T_WHITESPACE"," ",109],"(",["T_VARIABLE","$insert",109],["T_WHITESPACE"," ",109],["T_AS","as",109],["T_WHITESPACE"," ",109],["T_VARIABLE","$storeId",109],")",["T_WHITESPACE"," ",109],"{",["T_WHITESPACE","\n                ",109],["T_VARIABLE","$data",110],"[","]",["T_WHITESPACE"," ",110],"=",["T_WHITESPACE"," ",110],["T_ARRAY","array",110],"(",["T_WHITESPACE","\n                    ",110],["T_CONSTANT_ENCAPSED_STRING","'block_id'",111],["T_WHITESPACE","  ",111],["T_DOUBLE_ARROW","=>",111],["T_WHITESPACE"," ",111],["T_INT_CAST","(int)",111],["T_WHITESPACE"," ",111],["T_VARIABLE","$object",111],["T_OBJECT_OPERATOR","->",111],["T_STRING","getId",111],"(",")",",",["T_WHITESPACE","\n                    ",111],["T_CONSTANT_ENCAPSED_STRING","'store_id'",112],["T_WHITESPACE"," ",112],["T_DOUBLE_ARROW","=>",112],["T_WHITESPACE"," ",112],["T_INT_CAST","(int)",112],["T_WHITESPACE"," ",112],["T_VARIABLE","$storeId",112],["T_WHITESPACE","\n                ",112],")",";",["T_WHITESPACE","\n            ",113],"}",["T_WHITESPACE","\n\n            ",114],["T_VARIABLE","$this",116],["T_OBJECT_OPERATOR","->",116],["T_STRING","_getWriteAdapter",116],"(",")",["T_OBJECT_OPERATOR","->",116],["T_STRING","insertMultiple",116],"(",["T_VARIABLE","$table",116],",",["T_WHITESPACE"," ",116],["T_VARIABLE","$data",116],")",";",["T_WHITESPACE","\n        ",116],"}",["T_WHITESPACE","\n\n        ",117],["T_RETURN","return",119],["T_WHITESPACE"," ",119],["T_STRING","parent",119],["T_DOUBLE_COLON","::",119],["T_STRING","_afterSave",119],"(",["T_VARIABLE","$object",119],")",";",["T_WHITESPACE","\n\n    ",119],"}",["T_WHITESPACE","\n\n    ",121],["T_DOC_COMMENT","\/**\n     * Load an object using 'identifier' field if there's no field specified and value is not numeric\n     *\n     * @param Mage_Core_Model_Abstract $object\n     * @param mixed $value\n     * @param string $field\n     * @return Mage_Cms_Model_Resource_Block\n     *\/",123],["T_WHITESPACE","\n    ",130],["T_PUBLIC","public",131],["T_WHITESPACE"," ",131],["T_FUNCTION","function",131],["T_WHITESPACE"," ",131],["T_STRING","load",131],"(",["T_STRING","Mage_Core_Model_Abstract",131],["T_WHITESPACE"," ",131],["T_VARIABLE","$object",131],",",["T_WHITESPACE"," ",131],["T_VARIABLE","$value",131],",",["T_WHITESPACE"," ",131],["T_VARIABLE","$field",131],["T_WHITESPACE"," ",131],"=",["T_WHITESPACE"," ",131],["T_STRING","null",131],")",["T_WHITESPACE","\n    ",131],"{",["T_WHITESPACE","\n        ",132],["T_IF","if",133],["T_WHITESPACE"," ",133],"(","!",["T_STRING","is_numeric",133],"(",["T_VARIABLE","$value",133],")",["T_WHITESPACE"," ",133],["T_BOOLEAN_AND","&&",133],["T_WHITESPACE"," ",133],["T_STRING","is_null",133],"(",["T_VARIABLE","$field",133],")",")",["T_WHITESPACE"," ",133],"{",["T_WHITESPACE","\n            ",133],["T_VARIABLE","$field",134],["T_WHITESPACE"," ",134],"=",["T_WHITESPACE"," ",134],["T_CONSTANT_ENCAPSED_STRING","'identifier'",134],";",["T_WHITESPACE","\n        ",134],"}",["T_WHITESPACE","\n\n        ",135],["T_RETURN","return",137],["T_WHITESPACE"," ",137],["T_STRING","parent",137],["T_DOUBLE_COLON","::",137],["T_STRING","load",137],"(",["T_VARIABLE","$object",137],",",["T_WHITESPACE"," ",137],["T_VARIABLE","$value",137],",",["T_WHITESPACE"," ",137],["T_VARIABLE","$field",137],")",";",["T_WHITESPACE","\n    ",137],"}",["T_WHITESPACE","\n\n    ",138],["T_DOC_COMMENT","\/**\n     * Perform operations after object load\n     *\n     * @param Mage_Core_Model_Abstract $object\n     * @return Mage_Cms_Model_Resource_Block\n     *\/",140],["T_WHITESPACE","\n    ",145],["T_PROTECTED","protected",146],["T_WHITESPACE"," ",146],["T_FUNCTION","function",146],["T_WHITESPACE"," ",146],["T_STRING","_afterLoad",146],"(",["T_STRING","Mage_Core_Model_Abstract",146],["T_WHITESPACE"," ",146],["T_VARIABLE","$object",146],")",["T_WHITESPACE","\n    ",146],"{",["T_WHITESPACE","\n        ",147],["T_IF","if",148],["T_WHITESPACE"," ",148],"(",["T_VARIABLE","$object",148],["T_OBJECT_OPERATOR","->",148],["T_STRING","getId",148],"(",")",")",["T_WHITESPACE"," ",148],"{",["T_WHITESPACE","\n            ",148],["T_VARIABLE","$stores",149],["T_WHITESPACE"," ",149],"=",["T_WHITESPACE"," ",149],["T_VARIABLE","$this",149],["T_OBJECT_OPERATOR","->",149],["T_STRING","lookupStoreIds",149],"(",["T_VARIABLE","$object",149],["T_OBJECT_OPERATOR","->",149],["T_STRING","getId",149],"(",")",")",";",["T_WHITESPACE","\n            ",149],["T_VARIABLE","$object",150],["T_OBJECT_OPERATOR","->",150],["T_STRING","setData",150],"(",["T_CONSTANT_ENCAPSED_STRING","'store_id'",150],",",["T_WHITESPACE"," ",150],["T_VARIABLE","$stores",150],")",";",["T_WHITESPACE","\n            ",150],["T_VARIABLE","$object",151],["T_OBJECT_OPERATOR","->",151],["T_STRING","setData",151],"(",["T_CONSTANT_ENCAPSED_STRING","'stores'",151],",",["T_WHITESPACE"," ",151],["T_VARIABLE","$stores",151],")",";",["T_WHITESPACE","\n        ",151],"}",["T_WHITESPACE","\n\n        ",152],["T_RETURN","return",154],["T_WHITESPACE"," ",154],["T_STRING","parent",154],["T_DOUBLE_COLON","::",154],["T_STRING","_afterLoad",154],"(",["T_VARIABLE","$object",154],")",";",["T_WHITESPACE","\n    ",154],"}",["T_WHITESPACE","\n\n    ",155],["T_DOC_COMMENT","\/**\n     * Retrieve select object for load object data\n     *\n     * @param string $field\n     * @param mixed $value\n     * @param Mage_Cms_Model_Block $object\n     * @return Zend_Db_Select\n     *\/",157],["T_WHITESPACE","\n    ",164],["T_PROTECTED","protected",165],["T_WHITESPACE"," ",165],["T_FUNCTION","function",165],["T_WHITESPACE"," ",165],["T_STRING","_getLoadSelect",165],"(",["T_VARIABLE","$field",165],",",["T_WHITESPACE"," ",165],["T_VARIABLE","$value",165],",",["T_WHITESPACE"," ",165],["T_VARIABLE","$object",165],")",["T_WHITESPACE","\n    ",165],"{",["T_WHITESPACE","\n        ",166],["T_VARIABLE","$select",167],["T_WHITESPACE"," ",167],"=",["T_WHITESPACE"," ",167],["T_STRING","parent",167],["T_DOUBLE_COLON","::",167],["T_STRING","_getLoadSelect",167],"(",["T_VARIABLE","$field",167],",",["T_WHITESPACE"," ",167],["T_VARIABLE","$value",167],",",["T_WHITESPACE"," ",167],["T_VARIABLE","$object",167],")",";",["T_WHITESPACE","\n\n        ",167],["T_IF","if",169],["T_WHITESPACE"," ",169],"(",["T_VARIABLE","$object",169],["T_OBJECT_OPERATOR","->",169],["T_STRING","getStoreId",169],"(",")",")",["T_WHITESPACE"," ",169],"{",["T_WHITESPACE","\n            ",169],["T_VARIABLE","$stores",170],["T_WHITESPACE"," ",170],"=",["T_WHITESPACE"," ",170],["T_ARRAY","array",170],"(",["T_WHITESPACE","\n                ",170],["T_INT_CAST","(int)",171],["T_WHITESPACE"," ",171],["T_VARIABLE","$object",171],["T_OBJECT_OPERATOR","->",171],["T_STRING","getStoreId",171],"(",")",",",["T_WHITESPACE","\n                ",171],["T_STRING","Mage_Core_Model_App",172],["T_DOUBLE_COLON","::",172],["T_STRING","ADMIN_STORE_ID",172],",",["T_WHITESPACE","\n            ",172],")",";",["T_WHITESPACE","\n\n            ",173],["T_VARIABLE","$select",175],["T_OBJECT_OPERATOR","->",175],["T_STRING","join",175],"(",["T_WHITESPACE","\n                ",175],["T_ARRAY","array",176],"(",["T_CONSTANT_ENCAPSED_STRING","'cbs'",176],["T_WHITESPACE"," ",176],["T_DOUBLE_ARROW","=>",176],["T_WHITESPACE"," ",176],["T_VARIABLE","$this",176],["T_OBJECT_OPERATOR","->",176],["T_STRING","getTable",176],"(",["T_CONSTANT_ENCAPSED_STRING","'cms\/block_store'",176],")",")",",",["T_WHITESPACE","\n                ",176],["T_VARIABLE","$this",177],["T_OBJECT_OPERATOR","->",177],["T_STRING","getMainTable",177],"(",")",".",["T_CONSTANT_ENCAPSED_STRING","'.block_id = cbs.block_id'",177],",",["T_WHITESPACE","\n                ",177],["T_ARRAY","array",178],"(",["T_CONSTANT_ENCAPSED_STRING","'store_id'",178],")",["T_WHITESPACE","\n            ",178],")",["T_OBJECT_OPERATOR","->",179],["T_STRING","where",179],"(",["T_CONSTANT_ENCAPSED_STRING","'is_active = ?'",179],",",["T_WHITESPACE"," ",179],["T_LNUMBER","1",179],")",["T_WHITESPACE","\n            ",179],["T_OBJECT_OPERATOR","->",180],["T_STRING","where",180],"(",["T_CONSTANT_ENCAPSED_STRING","'cbs.store_id in (?) '",180],",",["T_WHITESPACE"," ",180],["T_VARIABLE","$stores",180],")",["T_WHITESPACE","\n            ",180],["T_OBJECT_OPERATOR","->",181],["T_STRING","order",181],"(",["T_CONSTANT_ENCAPSED_STRING","'store_id DESC'",181],")",["T_WHITESPACE","\n            ",181],["T_OBJECT_OPERATOR","->",182],["T_STRING","limit",182],"(",["T_LNUMBER","1",182],")",";",["T_WHITESPACE","\n        ",182],"}",["T_WHITESPACE","\n\n        ",183],["T_RETURN","return",185],["T_WHITESPACE"," ",185],["T_VARIABLE","$select",185],";",["T_WHITESPACE","\n    ",185],"}",["T_WHITESPACE","\n\n    ",186],["T_DOC_COMMENT","\/**\n     * Check for unique of identifier of block to selected store(s).\n     *\n     * @param Mage_Core_Model_Abstract $object\n     * @return bool\n     *\/",188],["T_WHITESPACE","\n    ",193],["T_PUBLIC","public",194],["T_WHITESPACE"," ",194],["T_FUNCTION","function",194],["T_WHITESPACE"," ",194],["T_STRING","getIsUniqueBlockToStores",194],"(",["T_STRING","Mage_Core_Model_Abstract",194],["T_WHITESPACE"," ",194],["T_VARIABLE","$object",194],")",["T_WHITESPACE","\n    ",194],"{",["T_WHITESPACE","\n        ",195],["T_IF","if",196],["T_WHITESPACE"," ",196],"(",["T_STRING","Mage",196],["T_DOUBLE_COLON","::",196],["T_STRING","app",196],"(",")",["T_OBJECT_OPERATOR","->",196],["T_STRING","isSingleStoreMode",196],"(",")",")",["T_WHITESPACE"," ",196],"{",["T_WHITESPACE","\n            ",196],["T_VARIABLE","$stores",197],["T_WHITESPACE"," ",197],"=",["T_WHITESPACE"," ",197],["T_ARRAY","array",197],"(",["T_STRING","Mage_Core_Model_App",197],["T_DOUBLE_COLON","::",197],["T_STRING","ADMIN_STORE_ID",197],")",";",["T_WHITESPACE","\n        ",197],"}",["T_WHITESPACE"," ",198],["T_ELSE","else",198],["T_WHITESPACE"," ",198],"{",["T_WHITESPACE","\n            ",198],["T_VARIABLE","$stores",199],["T_WHITESPACE"," ",199],"=",["T_WHITESPACE"," ",199],["T_ARRAY_CAST","(array)",199],["T_VARIABLE","$object",199],["T_OBJECT_OPERATOR","->",199],["T_STRING","getData",199],"(",["T_CONSTANT_ENCAPSED_STRING","'stores'",199],")",";",["T_WHITESPACE","\n        ",199],"}",["T_WHITESPACE","\n\n        ",200],["T_VARIABLE","$select",202],["T_WHITESPACE"," ",202],"=",["T_WHITESPACE"," ",202],["T_VARIABLE","$this",202],["T_OBJECT_OPERATOR","->",202],["T_STRING","_getReadAdapter",202],"(",")",["T_OBJECT_OPERATOR","->",202],["T_STRING","select",202],"(",")",["T_WHITESPACE","\n            ",202],["T_OBJECT_OPERATOR","->",203],["T_STRING","from",203],"(",["T_ARRAY","array",203],"(",["T_CONSTANT_ENCAPSED_STRING","'cb'",203],["T_WHITESPACE"," ",203],["T_DOUBLE_ARROW","=>",203],["T_WHITESPACE"," ",203],["T_VARIABLE","$this",203],["T_OBJECT_OPERATOR","->",203],["T_STRING","getMainTable",203],"(",")",")",")",["T_WHITESPACE","\n            ",203],["T_OBJECT_OPERATOR","->",204],["T_STRING","join",204],"(",["T_WHITESPACE","\n                ",204],["T_ARRAY","array",205],"(",["T_CONSTANT_ENCAPSED_STRING","'cbs'",205],["T_WHITESPACE"," ",205],["T_DOUBLE_ARROW","=>",205],["T_WHITESPACE"," ",205],["T_VARIABLE","$this",205],["T_OBJECT_OPERATOR","->",205],["T_STRING","getTable",205],"(",["T_CONSTANT_ENCAPSED_STRING","'cms\/block_store'",205],")",")",",",["T_WHITESPACE","\n                ",205],["T_CONSTANT_ENCAPSED_STRING","'cb.block_id = cbs.block_id'",206],",",["T_WHITESPACE","\n                ",206],["T_ARRAY","array",207],"(",")",["T_WHITESPACE","\n            ",207],")",["T_OBJECT_OPERATOR","->",208],["T_STRING","where",208],"(",["T_CONSTANT_ENCAPSED_STRING","'cb.identifier = ?'",208],",",["T_WHITESPACE"," ",208],["T_VARIABLE","$object",208],["T_OBJECT_OPERATOR","->",208],["T_STRING","getData",208],"(",["T_CONSTANT_ENCAPSED_STRING","'identifier'",208],")",")",["T_WHITESPACE","\n            ",208],["T_OBJECT_OPERATOR","->",209],["T_STRING","where",209],"(",["T_CONSTANT_ENCAPSED_STRING","'cbs.store_id IN (?)'",209],",",["T_WHITESPACE"," ",209],["T_VARIABLE","$stores",209],")",";",["T_WHITESPACE","\n\n        ",209],["T_IF","if",211],["T_WHITESPACE"," ",211],"(",["T_VARIABLE","$object",211],["T_OBJECT_OPERATOR","->",211],["T_STRING","getId",211],"(",")",")",["T_WHITESPACE"," ",211],"{",["T_WHITESPACE","\n            ",211],["T_VARIABLE","$select",212],["T_OBJECT_OPERATOR","->",212],["T_STRING","where",212],"(",["T_CONSTANT_ENCAPSED_STRING","'cb.block_id <> ?'",212],",",["T_WHITESPACE"," ",212],["T_VARIABLE","$object",212],["T_OBJECT_OPERATOR","->",212],["T_STRING","getId",212],"(",")",")",";",["T_WHITESPACE","\n        ",212],"}",["T_WHITESPACE","\n\n        ",213],["T_IF","if",215],["T_WHITESPACE"," ",215],"(",["T_VARIABLE","$this",215],["T_OBJECT_OPERATOR","->",215],["T_STRING","_getReadAdapter",215],"(",")",["T_OBJECT_OPERATOR","->",215],["T_STRING","fetchRow",215],"(",["T_VARIABLE","$select",215],")",")",["T_WHITESPACE"," ",215],"{",["T_WHITESPACE","\n            ",215],["T_RETURN","return",216],["T_WHITESPACE"," ",216],["T_STRING","false",216],";",["T_WHITESPACE","\n        ",216],"}",["T_WHITESPACE","\n\n        ",217],["T_RETURN","return",219],["T_WHITESPACE"," ",219],["T_STRING","true",219],";",["T_WHITESPACE","\n    ",219],"}",["T_WHITESPACE","\n\n    ",220],["T_DOC_COMMENT","\/**\n     * Get store ids to which specified item is assigned\n     *\n     * @param int $id\n     * @return array\n     *\/",222],["T_WHITESPACE","\n    ",227],["T_PUBLIC","public",228],["T_WHITESPACE"," ",228],["T_FUNCTION","function",228],["T_WHITESPACE"," ",228],["T_STRING","lookupStoreIds",228],"(",["T_VARIABLE","$id",228],")",["T_WHITESPACE","\n    ",228],"{",["T_WHITESPACE","\n        ",229],["T_VARIABLE","$adapter",230],["T_WHITESPACE"," ",230],"=",["T_WHITESPACE"," ",230],["T_VARIABLE","$this",230],["T_OBJECT_OPERATOR","->",230],["T_STRING","_getReadAdapter",230],"(",")",";",["T_WHITESPACE","\n\n        ",230],["T_VARIABLE","$select",232],["T_WHITESPACE","  ",232],"=",["T_WHITESPACE"," ",232],["T_VARIABLE","$adapter",232],["T_OBJECT_OPERATOR","->",232],["T_STRING","select",232],"(",")",["T_WHITESPACE","\n            ",232],["T_OBJECT_OPERATOR","->",233],["T_STRING","from",233],"(",["T_VARIABLE","$this",233],["T_OBJECT_OPERATOR","->",233],["T_STRING","getTable",233],"(",["T_CONSTANT_ENCAPSED_STRING","'cms\/block_store'",233],")",",",["T_WHITESPACE"," ",233],["T_CONSTANT_ENCAPSED_STRING","'store_id'",233],")",["T_WHITESPACE","\n            ",233],["T_OBJECT_OPERATOR","->",234],["T_STRING","where",234],"(",["T_CONSTANT_ENCAPSED_STRING","'block_id = :block_id'",234],")",";",["T_WHITESPACE","\n\n        ",234],["T_VARIABLE","$binds",236],["T_WHITESPACE"," ",236],"=",["T_WHITESPACE"," ",236],["T_ARRAY","array",236],"(",["T_WHITESPACE","\n            ",236],["T_CONSTANT_ENCAPSED_STRING","':block_id'",237],["T_WHITESPACE"," ",237],["T_DOUBLE_ARROW","=>",237],["T_WHITESPACE"," ",237],["T_INT_CAST","(int)",237],["T_WHITESPACE"," ",237],["T_VARIABLE","$id",237],["T_WHITESPACE","\n        ",237],")",";",["T_WHITESPACE","\n\n        ",238],["T_RETURN","return",240],["T_WHITESPACE"," ",240],["T_VARIABLE","$adapter",240],["T_OBJECT_OPERATOR","->",240],["T_STRING","fetchCol",240],"(",["T_VARIABLE","$select",240],",",["T_WHITESPACE"," ",240],["T_VARIABLE","$binds",240],")",";",["T_WHITESPACE","\n    ",240],"}",["T_WHITESPACE","\n",241],"}",["T_WHITESPACE","\n",242]]
[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Magento\n *\n * NOTICE OF LICENSE\n *\n * This source file is subject to the Open Software License (OSL 3.0)\n * that is bundled with this package in the file LICENSE.txt.\n * It is also available through the world-wide-web at this URL:\n * http:\/\/opensource.org\/licenses\/osl-3.0.php\n * If you did not receive a copy of the license and are unable to\n * obtain it through the world-wide-web, please send an email\n * to license@magento.com so we can send you a copy immediately.\n *\n * DISCLAIMER\n *\n * Do not edit or add to this file if you wish to upgrade Magento to newer\n * versions in the future. If you wish to customize Magento for your\n * needs please refer to http:\/\/www.magento.com for more information.\n *\n * @category    Mage\n * @package     Mage_Cms\n * @copyright  Copyright (c) 2006-2016 X.commerce, Inc. and affiliates (http:\/\/www.magento.com)\n * @license    http:\/\/opensource.org\/licenses\/osl-3.0.php  Open Software License (OSL 3.0)\n *\/",2],["T_WHITESPACE","\n\n\n",25],["T_DOC_COMMENT","\/**\n * Cms page mysql resource\n *\n * @category    Mage\n * @package     Mage_Cms\n * @author      Magento Core Team <core@magentocommerce.com>\n *\/",28],["T_WHITESPACE","\n",34],["T_CLASS","class",35],["T_WHITESPACE"," ",35],["T_STRING","Mage_Cms_Model_Resource_Page",35],["T_WHITESPACE"," ",35],["T_EXTENDS","extends",35],["T_WHITESPACE"," ",35],["T_STRING","Mage_Core_Model_Resource_Db_Abstract",35],["T_WHITESPACE","\n",35],"{",["T_WHITESPACE","\n    ",36],["T_DOC_COMMENT","\/**\n     * Store model\n     *\n     * @var null|Mage_Core_Model_Store\n     *\/",37],["T_WHITESPACE","\n    ",41],["T_PROTECTED","protected",42],["T_WHITESPACE"," ",42],["T_VARIABLE","$_store",42],["T_WHITESPACE","  ",42],"=",["T_WHITESPACE"," ",42],["T_STRING","null",42],";",["T_WHITESPACE","\n\n    ",42],["T_DOC_COMMENT","\/**\n     * Initialize resource model\n     *\n     *\/",44],["T_WHITESPACE","\n    ",47],["T_PROTECTED","protected",48],["T_WHITESPACE"," ",48],["T_FUNCTION","function",48],["T_WHITESPACE"," ",48],["T_STRING","_construct",48],"(",")",["T_WHITESPACE","\n    ",48],"{",["T_WHITESPACE","\n        ",49],["T_VARIABLE","$this",50],["T_OBJECT_OPERATOR","->",50],["T_STRING","_init",50],"(",["T_CONSTANT_ENCAPSED_STRING","'cms\/page'",50],",",["T_WHITESPACE"," ",50],["T_CONSTANT_ENCAPSED_STRING","'page_id'",50],")",";",["T_WHITESPACE","\n    ",50],"}",["T_WHITESPACE","\n\n    ",51],["T_DOC_COMMENT","\/**\n     * Process page data before deleting\n     *\n     * @param Mage_Core_Model_Abstract $object\n     * @return Mage_Cms_Model_Resource_Page\n     *\/",53],["T_WHITESPACE","\n    ",58],["T_PROTECTED","protected",59],["T_WHITESPACE"," ",59],["T_FUNCTION","function",59],["T_WHITESPACE"," ",59],["T_STRING","_beforeDelete",59],"(",["T_STRING","Mage_Core_Model_Abstract",59],["T_WHITESPACE"," ",59],["T_VARIABLE","$object",59],")",["T_WHITESPACE","\n    ",59],"{",["T_WHITESPACE","\n        ",60],["T_VARIABLE","$condition",61],["T_WHITESPACE"," ",61],"=",["T_WHITESPACE"," ",61],["T_ARRAY","array",61],"(",["T_WHITESPACE","\n            ",61],["T_CONSTANT_ENCAPSED_STRING","'page_id = ?'",62],["T_WHITESPACE","     ",62],["T_DOUBLE_ARROW","=>",62],["T_WHITESPACE"," ",62],["T_INT_CAST","(int)",62],["T_WHITESPACE"," ",62],["T_VARIABLE","$object",62],["T_OBJECT_OPERATOR","->",62],["T_STRING","getId",62],"(",")",",",["T_WHITESPACE","\n        ",62],")",";",["T_WHITESPACE","\n\n        ",63],["T_VARIABLE","$this",65],["T_OBJECT_OPERATOR","->",65],["T_STRING","_getWriteAdapter",65],"(",")",["T_OBJECT_OPERATOR","->",65],["T_STRING","delete",65],"(",["T_VARIABLE","$this",65],["T_OBJECT_OPERATOR","->",65],["T_STRING","getTable",65],"(",["T_CONSTANT_ENCAPSED_STRING","'cms\/page_store'",65],")",",",["T_WHITESPACE"," ",65],["T_VARIABLE","$condition",65],")",";",["T_WHITESPACE","\n\n        ",65],["T_RETURN","return",67],["T_WHITESPACE"," ",67],["T_STRING","parent",67],["T_DOUBLE_COLON","::",67],["T_STRING","_beforeDelete",67],"(",["T_VARIABLE","$object",67],")",";",["T_WHITESPACE","\n    ",67],"}",["T_WHITESPACE","\n\n    ",68],["T_DOC_COMMENT","\/**\n     * Process page data before saving\n     *\n     * @param Mage_Core_Model_Abstract $object\n     * @return Mage_Cms_Model_Resource_Page\n     *\/",70],["T_WHITESPACE","\n    ",75],["T_PROTECTED","protected",76],["T_WHITESPACE"," ",76],["T_FUNCTION","function",76],["T_WHITESPACE"," ",76],["T_STRING","_beforeSave",76],"(",["T_STRING","Mage_Core_Model_Abstract",76],["T_WHITESPACE"," ",76],["T_VARIABLE","$object",76],")",["T_WHITESPACE","\n    ",76],"{",["T_WHITESPACE","\n        ",77],["T_COMMENT","\/*\n         * For two attributes which represent timestamp data in DB\n         * we should make converting such as:\n         * If they are empty we need to convert them into DB\n         * type NULL so in DB they will be empty and not some default value\n         *\/",78],["T_WHITESPACE","\n        ",83],["T_FOREACH","foreach",84],["T_WHITESPACE"," ",84],"(",["T_ARRAY","array",84],"(",["T_CONSTANT_ENCAPSED_STRING","'custom_theme_from'",84],",",["T_WHITESPACE"," ",84],["T_CONSTANT_ENCAPSED_STRING","'custom_theme_to'",84],")",["T_WHITESPACE"," ",84],["T_AS","as",84],["T_WHITESPACE"," ",84],["T_VARIABLE","$field",84],")",["T_WHITESPACE"," ",84],"{",["T_WHITESPACE","\n            ",84],["T_VARIABLE","$value",85],["T_WHITESPACE"," ",85],"=",["T_WHITESPACE"," ",85],"!",["T_VARIABLE","$object",85],["T_OBJECT_OPERATOR","->",85],["T_STRING","getData",85],"(",["T_VARIABLE","$field",85],")",["T_WHITESPACE"," ",85],"?",["T_WHITESPACE"," ",85],["T_STRING","null",85],["T_WHITESPACE"," ",85],":",["T_WHITESPACE"," ",85],["T_VARIABLE","$object",85],["T_OBJECT_OPERATOR","->",85],["T_STRING","getData",85],"(",["T_VARIABLE","$field",85],")",";",["T_WHITESPACE","\n            ",85],["T_VARIABLE","$object",86],["T_OBJECT_OPERATOR","->",86],["T_STRING","setData",86],"(",["T_VARIABLE","$field",86],",",["T_WHITESPACE"," ",86],["T_VARIABLE","$this",86],["T_OBJECT_OPERATOR","->",86],["T_STRING","formatDate",86],"(",["T_VARIABLE","$value",86],")",")",";",["T_WHITESPACE","\n        ",86],"}",["T_WHITESPACE","\n\n        ",87],["T_IF","if",89],["T_WHITESPACE"," ",89],"(","!",["T_VARIABLE","$this",89],["T_OBJECT_OPERATOR","->",89],["T_STRING","getIsUniquePageToStores",89],"(",["T_VARIABLE","$object",89],")",")",["T_WHITESPACE"," ",89],"{",["T_WHITESPACE","\n            ",89],["T_STRING","Mage",90],["T_DOUBLE_COLON","::",90],["T_STRING","throwException",90],"(",["T_STRING","Mage",90],["T_DOUBLE_COLON","::",90],["T_STRING","helper",90],"(",["T_CONSTANT_ENCAPSED_STRING","'cms'",90],")",["T_OBJECT_OPERATOR","->",90],["T_STRING","__",90],"(",["T_CONSTANT_ENCAPSED_STRING","'A page URL key for specified store already exists.'",90],")",")",";",["T_WHITESPACE","\n        ",90],"}",["T_WHITESPACE","\n\n        ",91],["T_IF","if",93],["T_WHITESPACE"," ",93],"(","!",["T_VARIABLE","$this",93],["T_OBJECT_OPERATOR","->",93],["T_STRING","isValidPageIdentifier",93],"(",["T_VARIABLE","$object",93],")",")",["T_WHITESPACE"," ",93],"{",["T_WHITESPACE","\n            ",93],["T_STRING","Mage",94],["T_DOUBLE_COLON","::",94],["T_STRING","throwException",94],"(",["T_STRING","Mage",94],["T_DOUBLE_COLON","::",94],["T_STRING","helper",94],"(",["T_CONSTANT_ENCAPSED_STRING","'cms'",94],")",["T_OBJECT_OPERATOR","->",94],["T_STRING","__",94],"(",["T_CONSTANT_ENCAPSED_STRING","'The page URL key contains capital letters or disallowed symbols.'",94],")",")",";",["T_WHITESPACE","\n        ",94],"}",["T_WHITESPACE","\n\n        ",95],["T_IF","if",97],["T_WHITESPACE"," ",97],"(",["T_VARIABLE","$this",97],["T_OBJECT_OPERATOR","->",97],["T_STRING","isNumericPageIdentifier",97],"(",["T_VARIABLE","$object",97],")",")",["T_WHITESPACE"," ",97],"{",["T_WHITESPACE","\n            ",97],["T_STRING","Mage",98],["T_DOUBLE_COLON","::",98],["T_STRING","throwException",98],"(",["T_STRING","Mage",98],["T_DOUBLE_COLON","::",98],["T_STRING","helper",98],"(",["T_CONSTANT_ENCAPSED_STRING","'cms'",98],")",["T_OBJECT_OPERATOR","->",98],["T_STRING","__",98],"(",["T_CONSTANT_ENCAPSED_STRING","'The page URL key cannot consist only of numbers.'",98],")",")",";",["T_WHITESPACE","\n        ",98],"}",["T_WHITESPACE","\n\n        ",99],["T_COMMENT","\/\/ modify create \/ update dates\n",101],["T_WHITESPACE","        ",102],["T_IF","if",102],["T_WHITESPACE"," ",102],"(",["T_VARIABLE","$object",102],["T_OBJECT_OPERATOR","->",102],["T_STRING","isObjectNew",102],"(",")",["T_WHITESPACE"," ",102],["T_BOOLEAN_AND","&&",102],["T_WHITESPACE"," ",102],"!",["T_VARIABLE","$object",102],["T_OBJECT_OPERATOR","->",102],["T_STRING","hasCreationTime",102],"(",")",")",["T_WHITESPACE"," ",102],"{",["T_WHITESPACE","\n            ",102],["T_VARIABLE","$object",103],["T_OBJECT_OPERATOR","->",103],["T_STRING","setCreationTime",103],"(",["T_STRING","Mage",103],["T_DOUBLE_COLON","::",103],["T_STRING","getSingleton",103],"(",["T_CONSTANT_ENCAPSED_STRING","'core\/date'",103],")",["T_OBJECT_OPERATOR","->",103],["T_STRING","gmtDate",103],"(",")",")",";",["T_WHITESPACE","\n        ",103],"}",["T_WHITESPACE","\n\n        ",104],["T_VARIABLE","$object",106],["T_OBJECT_OPERATOR","->",106],["T_STRING","setUpdateTime",106],"(",["T_STRING","Mage",106],["T_DOUBLE_COLON","::",106],["T_STRING","getSingleton",106],"(",["T_CONSTANT_ENCAPSED_STRING","'core\/date'",106],")",["T_OBJECT_OPERATOR","->",106],["T_STRING","gmtDate",106],"(",")",")",";",["T_WHITESPACE","\n\n        ",106],["T_RETURN","return",108],["T_WHITESPACE"," ",108],["T_STRING","parent",108],["T_DOUBLE_COLON","::",108],["T_STRING","_beforeSave",108],"(",["T_VARIABLE","$object",108],")",";",["T_WHITESPACE","\n    ",108],"}",["T_WHITESPACE","\n\n    ",109],["T_DOC_COMMENT","\/**\n     * Assign page to store views\n     *\n     * @param Mage_Core_Model_Abstract $object\n     * @return Mage_Cms_Model_Resource_Page\n     *\/",111],["T_WHITESPACE","\n    ",116],["T_PROTECTED","protected",117],["T_WHITESPACE"," ",117],["T_FUNCTION","function",117],["T_WHITESPACE"," ",117],["T_STRING","_afterSave",117],"(",["T_STRING","Mage_Core_Model_Abstract",117],["T_WHITESPACE"," ",117],["T_VARIABLE","$object",117],")",["T_WHITESPACE","\n    ",117],"{",["T_WHITESPACE","\n        ",118],["T_VARIABLE","$oldStores",119],["T_WHITESPACE"," ",119],"=",["T_WHITESPACE"," ",119],["T_VARIABLE","$this",119],["T_OBJECT_OPERATOR","->",119],["T_STRING","lookupStoreIds",119],"(",["T_VARIABLE","$object",119],["T_OBJECT_OPERATOR","->",119],["T_STRING","getId",119],"(",")",")",";",["T_WHITESPACE","\n        ",119],["T_VARIABLE","$newStores",120],["T_WHITESPACE"," ",120],"=",["T_WHITESPACE"," ",120],["T_ARRAY_CAST","(array)",120],["T_VARIABLE","$object",120],["T_OBJECT_OPERATOR","->",120],["T_STRING","getStores",120],"(",")",";",["T_WHITESPACE","\n        ",120],["T_IF","if",121],["T_WHITESPACE"," ",121],"(",["T_EMPTY","empty",121],"(",["T_VARIABLE","$newStores",121],")",")",["T_WHITESPACE"," ",121],"{",["T_WHITESPACE","\n            ",121],["T_VARIABLE","$newStores",122],["T_WHITESPACE"," ",122],"=",["T_WHITESPACE"," ",122],["T_ARRAY_CAST","(array)",122],["T_VARIABLE","$object",122],["T_OBJECT_OPERATOR","->",122],["T_STRING","getStoreId",122],"(",")",";",["T_WHITESPACE","\n        ",122],"}",["T_WHITESPACE","\n        ",123],["T_VARIABLE","$table",124],["T_WHITESPACE","  ",124],"=",["T_WHITESPACE"," ",124],["T_VARIABLE","$this",124],["T_OBJECT_OPERATOR","->",124],["T_STRING","getTable",124],"(",["T_CONSTANT_ENCAPSED_STRING","'cms\/page_store'",124],")",";",["T_WHITESPACE","\n        ",124],["T_VARIABLE","$insert",125],["T_WHITESPACE"," ",125],"=",["T_WHITESPACE"," ",125],["T_STRING","array_diff",125],"(",["T_VARIABLE","$newStores",125],",",["T_WHITESPACE"," ",125],["T_VARIABLE","$oldStores",125],")",";",["T_WHITESPACE","\n        ",125],["T_VARIABLE","$delete",126],["T_WHITESPACE"," ",126],"=",["T_WHITESPACE"," ",126],["T_STRING","array_diff",126],"(",["T_VARIABLE","$oldStores",126],",",["T_WHITESPACE"," ",126],["T_VARIABLE","$newStores",126],")",";",["T_WHITESPACE","\n\n        ",126],["T_IF","if",128],["T_WHITESPACE"," ",128],"(",["T_VARIABLE","$delete",128],")",["T_WHITESPACE"," ",128],"{",["T_WHITESPACE","\n            ",128],["T_VARIABLE","$where",129],["T_WHITESPACE"," ",129],"=",["T_WHITESPACE"," ",129],["T_ARRAY","array",129],"(",["T_WHITESPACE","\n                ",129],["T_CONSTANT_ENCAPSED_STRING","'page_id = ?'",130],["T_WHITESPACE","     ",130],["T_DOUBLE_ARROW","=>",130],["T_WHITESPACE"," ",130],["T_INT_CAST","(int)",130],["T_WHITESPACE"," ",130],["T_VARIABLE","$object",130],["T_OBJECT_OPERATOR","->",130],["T_STRING","getId",130],"(",")",",",["T_WHITESPACE","\n                ",130],["T_CONSTANT_ENCAPSED_STRING","'store_id IN (?)'",131],["T_WHITESPACE"," ",131],["T_DOUBLE_ARROW","=>",131],["T_WHITESPACE"," ",131],["T_VARIABLE","$delete",131],["T_WHITESPACE","\n            ",131],")",";",["T_WHITESPACE","\n\n            ",132],["T_VARIABLE","$this",134],["T_OBJECT_OPERATOR","->",134],["T_STRING","_getWriteAdapter",134],"(",")",["T_OBJECT_OPERATOR","->",134],["T_STRING","delete",134],"(",["T_VARIABLE","$table",134],",",["T_WHITESPACE"," ",134],["T_VARIABLE","$where",134],")",";",["T_WHITESPACE","\n        ",134],"}",["T_WHITESPACE","\n\n        ",135],["T_IF","if",137],["T_WHITESPACE"," ",137],"(",["T_VARIABLE","$insert",137],")",["T_WHITESPACE"," ",137],"{",["T_WHITESPACE","\n            ",137],["T_VARIABLE","$data",138],["T_WHITESPACE"," ",138],"=",["T_WHITESPACE"," ",138],["T_ARRAY","array",138],"(",")",";",["T_WHITESPACE","\n\n            ",138],["T_FOREACH","foreach",140],["T_WHITESPACE"," ",140],"(",["T_VARIABLE","$insert",140],["T_WHITESPACE"," ",140],["T_AS","as",140],["T_WHITESPACE"," ",140],["T_VARIABLE","$storeId",140],")",["T_WHITESPACE"," ",140],"{",["T_WHITESPACE","\n                ",140],["T_VARIABLE","$data",141],"[","]",["T_WHITESPACE"," ",141],"=",["T_WHITESPACE"," ",141],["T_ARRAY","array",141],"(",["T_WHITESPACE","\n                    ",141],["T_CONSTANT_ENCAPSED_STRING","'page_id'",142],["T_WHITESPACE","  ",142],["T_DOUBLE_ARROW","=>",142],["T_WHITESPACE"," ",142],["T_INT_CAST","(int)",142],["T_WHITESPACE"," ",142],["T_VARIABLE","$object",142],["T_OBJECT_OPERATOR","->",142],["T_STRING","getId",142],"(",")",",",["T_WHITESPACE","\n                    ",142],["T_CONSTANT_ENCAPSED_STRING","'store_id'",143],["T_WHITESPACE"," ",143],["T_DOUBLE_ARROW","=>",143],["T_WHITESPACE"," ",143],["T_INT_CAST","(int)",143],["T_WHITESPACE"," ",143],["T_VARIABLE","$storeId",143],["T_WHITESPACE","\n                ",143],")",";",["T_WHITESPACE","\n            ",144],"}",["T_WHITESPACE","\n\n            ",145],["T_VARIABLE","$this",147],["T_OBJECT_OPERATOR","->",147],["T_STRING","_getWriteAdapter",147],"(",")",["T_OBJECT_OPERATOR","->",147],["T_STRING","insertMultiple",147],"(",["T_VARIABLE","$table",147],",",["T_WHITESPACE"," ",147],["T_VARIABLE","$data",147],")",";",["T_WHITESPACE","\n        ",147],"}",["T_WHITESPACE","\n\n        ",148],["T_COMMENT","\/\/Mark layout cache as invalidated\n",150],["T_WHITESPACE","        ",151],["T_STRING","Mage",151],["T_DOUBLE_COLON","::",151],["T_STRING","app",151],"(",")",["T_OBJECT_OPERATOR","->",151],["T_STRING","getCacheInstance",151],"(",")",["T_OBJECT_OPERATOR","->",151],["T_STRING","invalidateType",151],"(",["T_CONSTANT_ENCAPSED_STRING","'layout'",151],")",";",["T_WHITESPACE","\n\n        ",151],["T_RETURN","return",153],["T_WHITESPACE"," ",153],["T_STRING","parent",153],["T_DOUBLE_COLON","::",153],["T_STRING","_afterSave",153],"(",["T_VARIABLE","$object",153],")",";",["T_WHITESPACE","\n    ",153],"}",["T_WHITESPACE","\n\n    ",154],["T_DOC_COMMENT","\/**\n     * Load an object using 'identifier' field if there's no field specified and value is not numeric\n     *\n     * @param Mage_Core_Model_Abstract $object\n     * @param mixed $value\n     * @param string $field\n     * @return Mage_Cms_Model_Resource_Page\n     *\/",156],["T_WHITESPACE","\n    ",163],["T_PUBLIC","public",164],["T_WHITESPACE"," ",164],["T_FUNCTION","function",164],["T_WHITESPACE"," ",164],["T_STRING","load",164],"(",["T_STRING","Mage_Core_Model_Abstract",164],["T_WHITESPACE"," ",164],["T_VARIABLE","$object",164],",",["T_WHITESPACE"," ",164],["T_VARIABLE","$value",164],",",["T_WHITESPACE"," ",164],["T_VARIABLE","$field",164],["T_WHITESPACE"," ",164],"=",["T_WHITESPACE"," ",164],["T_STRING","null",164],")",["T_WHITESPACE","\n    ",164],"{",["T_WHITESPACE","\n        ",165],["T_IF","if",166],["T_WHITESPACE"," ",166],"(","!",["T_STRING","is_numeric",166],"(",["T_VARIABLE","$value",166],")",["T_WHITESPACE"," ",166],["T_BOOLEAN_AND","&&",166],["T_WHITESPACE"," ",166],["T_STRING","is_null",166],"(",["T_VARIABLE","$field",166],")",")",["T_WHITESPACE"," ",166],"{",["T_WHITESPACE","\n            ",166],["T_VARIABLE","$field",167],["T_WHITESPACE"," ",167],"=",["T_WHITESPACE"," ",167],["T_CONSTANT_ENCAPSED_STRING","'identifier'",167],";",["T_WHITESPACE","\n        ",167],"}",["T_WHITESPACE","\n\n        ",168],["T_RETURN","return",170],["T_WHITESPACE"," ",170],["T_STRING","parent",170],["T_DOUBLE_COLON","::",170],["T_STRING","load",170],"(",["T_VARIABLE","$object",170],",",["T_WHITESPACE"," ",170],["T_VARIABLE","$value",170],",",["T_WHITESPACE"," ",170],["T_VARIABLE","$field",170],")",";",["T_WHITESPACE","\n    ",170],"}",["T_WHITESPACE","\n\n    ",171],["T_DOC_COMMENT","\/**\n     * Perform operations after object load\n     *\n     * @param Mage_Core_Model_Abstract $object\n     * @return Mage_Cms_Model_Resource_Page\n     *\/",173],["T_WHITESPACE","\n    ",178],["T_PROTECTED","protected",179],["T_WHITESPACE"," ",179],["T_FUNCTION","function",179],["T_WHITESPACE"," ",179],["T_STRING","_afterLoad",179],"(",["T_STRING","Mage_Core_Model_Abstract",179],["T_WHITESPACE"," ",179],["T_VARIABLE","$object",179],")",["T_WHITESPACE","\n    ",179],"{",["T_WHITESPACE","\n        ",180],["T_IF","if",181],["T_WHITESPACE"," ",181],"(",["T_VARIABLE","$object",181],["T_OBJECT_OPERATOR","->",181],["T_STRING","getId",181],"(",")",")",["T_WHITESPACE"," ",181],"{",["T_WHITESPACE","\n            ",181],["T_VARIABLE","$stores",182],["T_WHITESPACE"," ",182],"=",["T_WHITESPACE"," ",182],["T_VARIABLE","$this",182],["T_OBJECT_OPERATOR","->",182],["T_STRING","lookupStoreIds",182],"(",["T_VARIABLE","$object",182],["T_OBJECT_OPERATOR","->",182],["T_STRING","getId",182],"(",")",")",";",["T_WHITESPACE","\n\n            ",182],["T_VARIABLE","$object",184],["T_OBJECT_OPERATOR","->",184],["T_STRING","setData",184],"(",["T_CONSTANT_ENCAPSED_STRING","'store_id'",184],",",["T_WHITESPACE"," ",184],["T_VARIABLE","$stores",184],")",";",["T_WHITESPACE","\n\n        ",184],"}",["T_WHITESPACE","\n\n        ",186],["T_RETURN","return",188],["T_WHITESPACE"," ",188],["T_STRING","parent",188],["T_DOUBLE_COLON","::",188],["T_STRING","_afterLoad",188],"(",["T_VARIABLE","$object",188],")",";",["T_WHITESPACE","\n    ",188],"}",["T_WHITESPACE","\n\n    ",189],["T_DOC_COMMENT","\/**\n     * Retrieve select object for load object data\n     *\n     * @param string $field\n     * @param mixed $value\n     * @param Mage_Cms_Model_Page $object\n     * @return Zend_Db_Select\n     *\/",191],["T_WHITESPACE","\n    ",198],["T_PROTECTED","protected",199],["T_WHITESPACE"," ",199],["T_FUNCTION","function",199],["T_WHITESPACE"," ",199],["T_STRING","_getLoadSelect",199],"(",["T_VARIABLE","$field",199],",",["T_WHITESPACE"," ",199],["T_VARIABLE","$value",199],",",["T_WHITESPACE"," ",199],["T_VARIABLE","$object",199],")",["T_WHITESPACE","\n    ",199],"{",["T_WHITESPACE","\n        ",200],["T_VARIABLE","$select",201],["T_WHITESPACE"," ",201],"=",["T_WHITESPACE"," ",201],["T_STRING","parent",201],["T_DOUBLE_COLON","::",201],["T_STRING","_getLoadSelect",201],"(",["T_VARIABLE","$field",201],",",["T_WHITESPACE"," ",201],["T_VARIABLE","$value",201],",",["T_WHITESPACE"," ",201],["T_VARIABLE","$object",201],")",";",["T_WHITESPACE","\n\n        ",201],["T_IF","if",203],["T_WHITESPACE"," ",203],"(",["T_VARIABLE","$object",203],["T_OBJECT_OPERATOR","->",203],["T_STRING","getStoreId",203],"(",")",")",["T_WHITESPACE"," ",203],"{",["T_WHITESPACE","\n            ",203],["T_VARIABLE","$storeIds",204],["T_WHITESPACE"," ",204],"=",["T_WHITESPACE"," ",204],["T_ARRAY","array",204],"(",["T_STRING","Mage_Core_Model_App",204],["T_DOUBLE_COLON","::",204],["T_STRING","ADMIN_STORE_ID",204],",",["T_WHITESPACE"," ",204],["T_INT_CAST","(int)",204],["T_VARIABLE","$object",204],["T_OBJECT_OPERATOR","->",204],["T_STRING","getStoreId",204],"(",")",")",";",["T_WHITESPACE","\n            ",204],["T_VARIABLE","$select",205],["T_OBJECT_OPERATOR","->",205],["T_STRING","join",205],"(",["T_WHITESPACE","\n                ",205],["T_ARRAY","array",206],"(",["T_CONSTANT_ENCAPSED_STRING","'cms_page_store'",206],["T_WHITESPACE"," ",206],["T_DOUBLE_ARROW","=>",206],["T_WHITESPACE"," ",206],["T_VARIABLE","$this",206],["T_OBJECT_OPERATOR","->",206],["T_STRING","getTable",206],"(",["T_CONSTANT_ENCAPSED_STRING","'cms\/page_store'",206],")",")",",",["T_WHITESPACE","\n                ",206],["T_VARIABLE","$this",207],["T_OBJECT_OPERATOR","->",207],["T_STRING","getMainTable",207],"(",")",["T_WHITESPACE"," ",207],".",["T_WHITESPACE"," ",207],["T_CONSTANT_ENCAPSED_STRING","'.page_id = cms_page_store.page_id'",207],",",["T_WHITESPACE","\n                ",207],["T_ARRAY","array",208],"(",")",")",["T_WHITESPACE","\n                ",208],["T_OBJECT_OPERATOR","->",209],["T_STRING","where",209],"(",["T_CONSTANT_ENCAPSED_STRING","'is_active = ?'",209],",",["T_WHITESPACE"," ",209],["T_LNUMBER","1",209],")",["T_WHITESPACE","\n                ",209],["T_OBJECT_OPERATOR","->",210],["T_STRING","where",210],"(",["T_CONSTANT_ENCAPSED_STRING","'cms_page_store.store_id IN (?)'",210],",",["T_WHITESPACE"," ",210],["T_VARIABLE","$storeIds",210],")",["T_WHITESPACE","\n                ",210],["T_OBJECT_OPERATOR","->",211],["T_STRING","order",211],"(",["T_CONSTANT_ENCAPSED_STRING","'cms_page_store.store_id DESC'",211],")",["T_WHITESPACE","\n                ",211],["T_OBJECT_OPERATOR","->",212],["T_STRING","limit",212],"(",["T_LNUMBER","1",212],")",";",["T_WHITESPACE","\n        ",212],"}",["T_WHITESPACE","\n\n        ",213],["T_RETURN","return",215],["T_WHITESPACE"," ",215],["T_VARIABLE","$select",215],";",["T_WHITESPACE","\n    ",215],"}",["T_WHITESPACE","\n\n    ",216],["T_DOC_COMMENT","\/**\n     * Retrieve load select with filter by identifier, store and activity\n     *\n     * @param string $identifier\n     * @param int|array $store\n     * @param int $isActive\n     * @return Varien_Db_Select\n     *\/",218],["T_WHITESPACE","\n    ",225],["T_PROTECTED","protected",226],["T_WHITESPACE"," ",226],["T_FUNCTION","function",226],["T_WHITESPACE"," ",226],["T_STRING","_getLoadByIdentifierSelect",226],"(",["T_VARIABLE","$identifier",226],",",["T_WHITESPACE"," ",226],["T_VARIABLE","$store",226],",",["T_WHITESPACE"," ",226],["T_VARIABLE","$isActive",226],["T_WHITESPACE"," ",226],"=",["T_WHITESPACE"," ",226],["T_STRING","null",226],")",["T_WHITESPACE","\n    ",226],"{",["T_WHITESPACE","\n        ",227],["T_VARIABLE","$select",228],["T_WHITESPACE"," ",228],"=",["T_WHITESPACE"," ",228],["T_VARIABLE","$this",228],["T_OBJECT_OPERATOR","->",228],["T_STRING","_getReadAdapter",228],"(",")",["T_OBJECT_OPERATOR","->",228],["T_STRING","select",228],"(",")",["T_WHITESPACE","\n            ",228],["T_OBJECT_OPERATOR","->",229],["T_STRING","from",229],"(",["T_ARRAY","array",229],"(",["T_CONSTANT_ENCAPSED_STRING","'cp'",229],["T_WHITESPACE"," ",229],["T_DOUBLE_ARROW","=>",229],["T_WHITESPACE"," ",229],["T_VARIABLE","$this",229],["T_OBJECT_OPERATOR","->",229],["T_STRING","getMainTable",229],"(",")",")",")",["T_WHITESPACE","\n            ",229],["T_OBJECT_OPERATOR","->",230],["T_STRING","join",230],"(",["T_WHITESPACE","\n                ",230],["T_ARRAY","array",231],"(",["T_CONSTANT_ENCAPSED_STRING","'cps'",231],["T_WHITESPACE"," ",231],["T_DOUBLE_ARROW","=>",231],["T_WHITESPACE"," ",231],["T_VARIABLE","$this",231],["T_OBJECT_OPERATOR","->",231],["T_STRING","getTable",231],"(",["T_CONSTANT_ENCAPSED_STRING","'cms\/page_store'",231],")",")",",",["T_WHITESPACE","\n                ",231],["T_CONSTANT_ENCAPSED_STRING","'cp.page_id = cps.page_id'",232],",",["T_WHITESPACE","\n                ",232],["T_ARRAY","array",233],"(",")",")",["T_WHITESPACE","\n            ",233],["T_OBJECT_OPERATOR","->",234],["T_STRING","where",234],"(",["T_CONSTANT_ENCAPSED_STRING","'cp.identifier = ?'",234],",",["T_WHITESPACE"," ",234],["T_VARIABLE","$identifier",234],")",["T_WHITESPACE","\n            ",234],["T_OBJECT_OPERATOR","->",235],["T_STRING","where",235],"(",["T_CONSTANT_ENCAPSED_STRING","'cps.store_id IN (?)'",235],",",["T_WHITESPACE"," ",235],["T_VARIABLE","$store",235],")",";",["T_WHITESPACE","\n\n        ",235],["T_IF","if",237],["T_WHITESPACE"," ",237],"(","!",["T_STRING","is_null",237],"(",["T_VARIABLE","$isActive",237],")",")",["T_WHITESPACE"," ",237],"{",["T_WHITESPACE","\n            ",237],["T_VARIABLE","$select",238],["T_OBJECT_OPERATOR","->",238],["T_STRING","where",238],"(",["T_CONSTANT_ENCAPSED_STRING","'cp.is_active = ?'",238],",",["T_WHITESPACE"," ",238],["T_VARIABLE","$isActive",238],")",";",["T_WHITESPACE","\n        ",238],"}",["T_WHITESPACE","\n\n        ",239],["T_RETURN","return",241],["T_WHITESPACE"," ",241],["T_VARIABLE","$select",241],";",["T_WHITESPACE","\n    ",241],"}",["T_WHITESPACE","\n\n    ",242],["T_DOC_COMMENT","\/**\n     * Check for unique of identifier of page to selected store(s).\n     *\n     * @param Mage_Core_Model_Abstract $object\n     * @return bool\n     *\/",244],["T_WHITESPACE","\n    ",249],["T_PUBLIC","public",250],["T_WHITESPACE"," ",250],["T_FUNCTION","function",250],["T_WHITESPACE"," ",250],["T_STRING","getIsUniquePageToStores",250],"(",["T_STRING","Mage_Core_Model_Abstract",250],["T_WHITESPACE"," ",250],["T_VARIABLE","$object",250],")",["T_WHITESPACE","\n    ",250],"{",["T_WHITESPACE","\n        ",251],["T_IF","if",252],["T_WHITESPACE"," ",252],"(","!",["T_VARIABLE","$object",252],["T_OBJECT_OPERATOR","->",252],["T_STRING","hasStores",252],"(",")",")",["T_WHITESPACE"," ",252],"{",["T_WHITESPACE","\n            ",252],["T_VARIABLE","$stores",253],["T_WHITESPACE"," ",253],"=",["T_WHITESPACE"," ",253],["T_ARRAY","array",253],"(",["T_STRING","Mage_Core_Model_App",253],["T_DOUBLE_COLON","::",253],["T_STRING","ADMIN_STORE_ID",253],")",";",["T_WHITESPACE","\n        ",253],"}",["T_WHITESPACE"," ",254],["T_ELSE","else",254],["T_WHITESPACE"," ",254],"{",["T_WHITESPACE","\n            ",254],["T_VARIABLE","$stores",255],["T_WHITESPACE"," ",255],"=",["T_WHITESPACE"," ",255],["T_ARRAY_CAST","(array)",255],["T_VARIABLE","$object",255],["T_OBJECT_OPERATOR","->",255],["T_STRING","getData",255],"(",["T_CONSTANT_ENCAPSED_STRING","'stores'",255],")",";",["T_WHITESPACE","\n        ",255],"}",["T_WHITESPACE","\n\n        ",256],["T_VARIABLE","$select",258],["T_WHITESPACE"," ",258],"=",["T_WHITESPACE"," ",258],["T_VARIABLE","$this",258],["T_OBJECT_OPERATOR","->",258],["T_STRING","_getLoadByIdentifierSelect",258],"(",["T_VARIABLE","$object",258],["T_OBJECT_OPERATOR","->",258],["T_STRING","getData",258],"(",["T_CONSTANT_ENCAPSED_STRING","'identifier'",258],")",",",["T_WHITESPACE"," ",258],["T_VARIABLE","$stores",258],")",";",["T_WHITESPACE","\n\n        ",258],["T_IF","if",260],["T_WHITESPACE"," ",260],"(",["T_VARIABLE","$object",260],["T_OBJECT_OPERATOR","->",260],["T_STRING","getId",260],"(",")",")",["T_WHITESPACE"," ",260],"{",["T_WHITESPACE","\n            ",260],["T_VARIABLE","$select",261],["T_OBJECT_OPERATOR","->",261],["T_STRING","where",261],"(",["T_CONSTANT_ENCAPSED_STRING","'cps.page_id <> ?'",261],",",["T_WHITESPACE"," ",261],["T_VARIABLE","$object",261],["T_OBJECT_OPERATOR","->",261],["T_STRING","getId",261],"(",")",")",";",["T_WHITESPACE","\n        ",261],"}",["T_WHITESPACE","\n\n        ",262],["T_IF","if",264],["T_WHITESPACE"," ",264],"(",["T_VARIABLE","$this",264],["T_OBJECT_OPERATOR","->",264],["T_STRING","_getWriteAdapter",264],"(",")",["T_OBJECT_OPERATOR","->",264],["T_STRING","fetchRow",264],"(",["T_VARIABLE","$select",264],")",")",["T_WHITESPACE"," ",264],"{",["T_WHITESPACE","\n            ",264],["T_RETURN","return",265],["T_WHITESPACE"," ",265],["T_STRING","false",265],";",["T_WHITESPACE","\n        ",265],"}",["T_WHITESPACE","\n\n        ",266],["T_RETURN","return",268],["T_WHITESPACE"," ",268],["T_STRING","true",268],";",["T_WHITESPACE","\n    ",268],"}",["T_WHITESPACE","\n\n    ",269],["T_DOC_COMMENT","\/**\n     *  Check whether page identifier is numeric\n     *\n     * @date Wed Mar 26 18:12:28 EET 2008\n     *\n     * @param Mage_Core_Model_Abstract $object\n     * @return bool\n     *\/",271],["T_WHITESPACE","\n    ",278],["T_PROTECTED","protected",279],["T_WHITESPACE"," ",279],["T_FUNCTION","function",279],["T_WHITESPACE"," ",279],["T_STRING","isNumericPageIdentifier",279],"(",["T_STRING","Mage_Core_Model_Abstract",279],["T_WHITESPACE"," ",279],["T_VARIABLE","$object",279],")",["T_WHITESPACE","\n    ",279],"{",["T_WHITESPACE","\n        ",280],["T_RETURN","return",281],["T_WHITESPACE"," ",281],["T_STRING","preg_match",281],"(",["T_CONSTANT_ENCAPSED_STRING","'\/^[0-9]+$\/'",281],",",["T_WHITESPACE"," ",281],["T_VARIABLE","$object",281],["T_OBJECT_OPERATOR","->",281],["T_STRING","getData",281],"(",["T_CONSTANT_ENCAPSED_STRING","'identifier'",281],")",")",";",["T_WHITESPACE","\n    ",281],"}",["T_WHITESPACE","\n\n    ",282],["T_DOC_COMMENT","\/**\n     *  Check whether page identifier is valid\n     *\n     *  @param    Mage_Core_Model_Abstract $object\n     *  @return   bool\n     *\/",284],["T_WHITESPACE","\n    ",289],["T_PROTECTED","protected",290],["T_WHITESPACE"," ",290],["T_FUNCTION","function",290],["T_WHITESPACE"," ",290],["T_STRING","isValidPageIdentifier",290],"(",["T_STRING","Mage_Core_Model_Abstract",290],["T_WHITESPACE"," ",290],["T_VARIABLE","$object",290],")",["T_WHITESPACE","\n    ",290],"{",["T_WHITESPACE","\n        ",291],["T_RETURN","return",292],["T_WHITESPACE"," ",292],["T_STRING","preg_match",292],"(",["T_CONSTANT_ENCAPSED_STRING","'\/^[a-z0-9][a-z0-9_\\\/-]+(\\.[a-z0-9_-]+)?$\/'",292],",",["T_WHITESPACE"," ",292],["T_VARIABLE","$object",292],["T_OBJECT_OPERATOR","->",292],["T_STRING","getData",292],"(",["T_CONSTANT_ENCAPSED_STRING","'identifier'",292],")",")",";",["T_WHITESPACE","\n    ",292],"}",["T_WHITESPACE","\n\n\n\n    ",293],["T_DOC_COMMENT","\/**\n     * Check if page identifier exist for specific store\n     * return page id if page exists\n     *\n     * @param string $identifier\n     * @param int $storeId\n     * @return int\n     *\/",297],["T_WHITESPACE","\n    ",304],["T_PUBLIC","public",305],["T_WHITESPACE"," ",305],["T_FUNCTION","function",305],["T_WHITESPACE"," ",305],["T_STRING","checkIdentifier",305],"(",["T_VARIABLE","$identifier",305],",",["T_WHITESPACE"," ",305],["T_VARIABLE","$storeId",305],")",["T_WHITESPACE","\n    ",305],"{",["T_WHITESPACE","\n        ",306],["T_VARIABLE","$stores",307],["T_WHITESPACE"," ",307],"=",["T_WHITESPACE"," ",307],["T_ARRAY","array",307],"(",["T_STRING","Mage_Core_Model_App",307],["T_DOUBLE_COLON","::",307],["T_STRING","ADMIN_STORE_ID",307],",",["T_WHITESPACE"," ",307],["T_VARIABLE","$storeId",307],")",";",["T_WHITESPACE","\n        ",307],["T_VARIABLE","$select",308],["T_WHITESPACE"," ",308],"=",["T_WHITESPACE"," ",308],["T_VARIABLE","$this",308],["T_OBJECT_OPERATOR","->",308],["T_STRING","_getLoadByIdentifierSelect",308],"(",["T_VARIABLE","$identifier",308],",",["T_WHITESPACE"," ",308],["T_VARIABLE","$stores",308],",",["T_WHITESPACE"," ",308],["T_LNUMBER","1",308],")",";",["T_WHITESPACE","\n        ",308],["T_VARIABLE","$select",309],["T_OBJECT_OPERATOR","->",309],["T_STRING","reset",309],"(",["T_STRING","Zend_Db_Select",309],["T_DOUBLE_COLON","::",309],["T_STRING","COLUMNS",309],")",["T_WHITESPACE","\n            ",309],["T_OBJECT_OPERATOR","->",310],["T_STRING","columns",310],"(",["T_CONSTANT_ENCAPSED_STRING","'cp.page_id'",310],")",["T_WHITESPACE","\n            ",310],["T_OBJECT_OPERATOR","->",311],["T_STRING","order",311],"(",["T_CONSTANT_ENCAPSED_STRING","'cps.store_id DESC'",311],")",["T_WHITESPACE","\n            ",311],["T_OBJECT_OPERATOR","->",312],["T_STRING","limit",312],"(",["T_LNUMBER","1",312],")",";",["T_WHITESPACE","\n\n        ",312],["T_RETURN","return",314],["T_WHITESPACE"," ",314],["T_VARIABLE","$this",314],["T_OBJECT_OPERATOR","->",314],["T_STRING","_getReadAdapter",314],"(",")",["T_OBJECT_OPERATOR","->",314],["T_STRING","fetchOne",314],"(",["T_VARIABLE","$select",314],")",";",["T_WHITESPACE","\n    ",314],"}",["T_WHITESPACE","\n\n    ",315],["T_DOC_COMMENT","\/**\n     * Retrieves cms page title from DB by passed identifier.\n     *\n     * @param string $identifier\n     * @return string|false\n     *\/",317],["T_WHITESPACE","\n    ",322],["T_PUBLIC","public",323],["T_WHITESPACE"," ",323],["T_FUNCTION","function",323],["T_WHITESPACE"," ",323],["T_STRING","getCmsPageTitleByIdentifier",323],"(",["T_VARIABLE","$identifier",323],")",["T_WHITESPACE","\n    ",323],"{",["T_WHITESPACE","\n        ",324],["T_VARIABLE","$stores",325],["T_WHITESPACE"," ",325],"=",["T_WHITESPACE"," ",325],["T_ARRAY","array",325],"(",["T_STRING","Mage_Core_Model_App",325],["T_DOUBLE_COLON","::",325],["T_STRING","ADMIN_STORE_ID",325],")",";",["T_WHITESPACE","\n        ",325],["T_IF","if",326],["T_WHITESPACE"," ",326],"(",["T_VARIABLE","$this",326],["T_OBJECT_OPERATOR","->",326],["T_STRING","_store",326],")",["T_WHITESPACE"," ",326],"{",["T_WHITESPACE","\n            ",326],["T_VARIABLE","$stores",327],"[","]",["T_WHITESPACE"," ",327],"=",["T_WHITESPACE"," ",327],["T_INT_CAST","(int)",327],["T_VARIABLE","$this",327],["T_OBJECT_OPERATOR","->",327],["T_STRING","getStore",327],"(",")",["T_OBJECT_OPERATOR","->",327],["T_STRING","getId",327],"(",")",";",["T_WHITESPACE","\n        ",327],"}",["T_WHITESPACE","\n\n        ",328],["T_VARIABLE","$select",330],["T_WHITESPACE"," ",330],"=",["T_WHITESPACE"," ",330],["T_VARIABLE","$this",330],["T_OBJECT_OPERATOR","->",330],["T_STRING","_getLoadByIdentifierSelect",330],"(",["T_VARIABLE","$identifier",330],",",["T_WHITESPACE"," ",330],["T_VARIABLE","$stores",330],")",";",["T_WHITESPACE","\n        ",330],["T_VARIABLE","$select",331],["T_OBJECT_OPERATOR","->",331],["T_STRING","reset",331],"(",["T_STRING","Zend_Db_Select",331],["T_DOUBLE_COLON","::",331],["T_STRING","COLUMNS",331],")",["T_WHITESPACE","\n            ",331],["T_OBJECT_OPERATOR","->",332],["T_STRING","columns",332],"(",["T_CONSTANT_ENCAPSED_STRING","'cp.title'",332],")",["T_WHITESPACE","\n            ",332],["T_OBJECT_OPERATOR","->",333],["T_STRING","order",333],"(",["T_CONSTANT_ENCAPSED_STRING","'cps.store_id DESC'",333],")",["T_WHITESPACE","\n            ",333],["T_OBJECT_OPERATOR","->",334],["T_STRING","limit",334],"(",["T_LNUMBER","1",334],")",";",["T_WHITESPACE","\n\n        ",334],["T_RETURN","return",336],["T_WHITESPACE"," ",336],["T_VARIABLE","$this",336],["T_OBJECT_OPERATOR","->",336],["T_STRING","_getReadAdapter",336],"(",")",["T_OBJECT_OPERATOR","->",336],["T_STRING","fetchOne",336],"(",["T_VARIABLE","$select",336],")",";",["T_WHITESPACE","\n    ",336],"}",["T_WHITESPACE","\n\n    ",337],["T_DOC_COMMENT","\/**\n     * Retrieves cms page title from DB by passed id.\n     *\n     * @param string $id\n     * @return string|false\n     *\/",339],["T_WHITESPACE","\n    ",344],["T_PUBLIC","public",345],["T_WHITESPACE"," ",345],["T_FUNCTION","function",345],["T_WHITESPACE"," ",345],["T_STRING","getCmsPageTitleById",345],"(",["T_VARIABLE","$id",345],")",["T_WHITESPACE","\n    ",345],"{",["T_WHITESPACE","\n        ",346],["T_VARIABLE","$adapter",347],["T_WHITESPACE"," ",347],"=",["T_WHITESPACE"," ",347],["T_VARIABLE","$this",347],["T_OBJECT_OPERATOR","->",347],["T_STRING","_getReadAdapter",347],"(",")",";",["T_WHITESPACE","\n\n        ",347],["T_VARIABLE","$select",349],["T_WHITESPACE","  ",349],"=",["T_WHITESPACE"," ",349],["T_VARIABLE","$adapter",349],["T_OBJECT_OPERATOR","->",349],["T_STRING","select",349],"(",")",["T_WHITESPACE","\n            ",349],["T_OBJECT_OPERATOR","->",350],["T_STRING","from",350],"(",["T_VARIABLE","$this",350],["T_OBJECT_OPERATOR","->",350],["T_STRING","getMainTable",350],"(",")",",",["T_WHITESPACE"," ",350],["T_CONSTANT_ENCAPSED_STRING","'title'",350],")",["T_WHITESPACE","\n            ",350],["T_OBJECT_OPERATOR","->",351],["T_STRING","where",351],"(",["T_CONSTANT_ENCAPSED_STRING","'page_id = :page_id'",351],")",";",["T_WHITESPACE","\n\n        ",351],["T_VARIABLE","$binds",353],["T_WHITESPACE"," ",353],"=",["T_WHITESPACE"," ",353],["T_ARRAY","array",353],"(",["T_WHITESPACE","\n            ",353],["T_CONSTANT_ENCAPSED_STRING","'page_id'",354],["T_WHITESPACE"," ",354],["T_DOUBLE_ARROW","=>",354],["T_WHITESPACE"," ",354],["T_INT_CAST","(int)",354],["T_WHITESPACE"," ",354],["T_VARIABLE","$id",354],["T_WHITESPACE","\n        ",354],")",";",["T_WHITESPACE","\n\n        ",355],["T_RETURN","return",357],["T_WHITESPACE"," ",357],["T_VARIABLE","$adapter",357],["T_OBJECT_OPERATOR","->",357],["T_STRING","fetchOne",357],"(",["T_VARIABLE","$select",357],",",["T_WHITESPACE"," ",357],["T_VARIABLE","$binds",357],")",";",["T_WHITESPACE","\n    ",357],"}",["T_WHITESPACE","\n\n    ",358],["T_DOC_COMMENT","\/**\n     * Retrieves cms page identifier from DB by passed id.\n     *\n     * @param string $id\n     * @return string|false\n     *\/",360],["T_WHITESPACE","\n    ",365],["T_PUBLIC","public",366],["T_WHITESPACE"," ",366],["T_FUNCTION","function",366],["T_WHITESPACE"," ",366],["T_STRING","getCmsPageIdentifierById",366],"(",["T_VARIABLE","$id",366],")",["T_WHITESPACE","\n    ",366],"{",["T_WHITESPACE","\n        ",367],["T_VARIABLE","$adapter",368],["T_WHITESPACE"," ",368],"=",["T_WHITESPACE"," ",368],["T_VARIABLE","$this",368],["T_OBJECT_OPERATOR","->",368],["T_STRING","_getReadAdapter",368],"(",")",";",["T_WHITESPACE","\n\n        ",368],["T_VARIABLE","$select",370],["T_WHITESPACE","  ",370],"=",["T_WHITESPACE"," ",370],["T_VARIABLE","$adapter",370],["T_OBJECT_OPERATOR","->",370],["T_STRING","select",370],"(",")",["T_WHITESPACE","\n            ",370],["T_OBJECT_OPERATOR","->",371],["T_STRING","from",371],"(",["T_VARIABLE","$this",371],["T_OBJECT_OPERATOR","->",371],["T_STRING","getMainTable",371],"(",")",",",["T_WHITESPACE"," ",371],["T_CONSTANT_ENCAPSED_STRING","'identifier'",371],")",["T_WHITESPACE","\n            ",371],["T_OBJECT_OPERATOR","->",372],["T_STRING","where",372],"(",["T_CONSTANT_ENCAPSED_STRING","'page_id = :page_id'",372],")",";",["T_WHITESPACE","\n\n        ",372],["T_VARIABLE","$binds",374],["T_WHITESPACE"," ",374],"=",["T_WHITESPACE"," ",374],["T_ARRAY","array",374],"(",["T_WHITESPACE","\n            ",374],["T_CONSTANT_ENCAPSED_STRING","'page_id'",375],["T_WHITESPACE"," ",375],["T_DOUBLE_ARROW","=>",375],["T_WHITESPACE"," ",375],["T_INT_CAST","(int)",375],["T_WHITESPACE"," ",375],["T_VARIABLE","$id",375],["T_WHITESPACE","\n        ",375],")",";",["T_WHITESPACE","\n\n        ",376],["T_RETURN","return",378],["T_WHITESPACE"," ",378],["T_VARIABLE","$adapter",378],["T_OBJECT_OPERATOR","->",378],["T_STRING","fetchOne",378],"(",["T_VARIABLE","$select",378],",",["T_WHITESPACE"," ",378],["T_VARIABLE","$binds",378],")",";",["T_WHITESPACE","\n    ",378],"}",["T_WHITESPACE","\n\n    ",379],["T_DOC_COMMENT","\/**\n     * Get store ids to which specified item is assigned\n     *\n     * @param int $id\n     * @return array\n     *\/",381],["T_WHITESPACE","\n    ",386],["T_PUBLIC","public",387],["T_WHITESPACE"," ",387],["T_FUNCTION","function",387],["T_WHITESPACE"," ",387],["T_STRING","lookupStoreIds",387],"(",["T_VARIABLE","$pageId",387],")",["T_WHITESPACE","\n    ",387],"{",["T_WHITESPACE","\n        ",388],["T_VARIABLE","$adapter",389],["T_WHITESPACE"," ",389],"=",["T_WHITESPACE"," ",389],["T_VARIABLE","$this",389],["T_OBJECT_OPERATOR","->",389],["T_STRING","_getReadAdapter",389],"(",")",";",["T_WHITESPACE","\n\n        ",389],["T_VARIABLE","$select",391],["T_WHITESPACE","  ",391],"=",["T_WHITESPACE"," ",391],["T_VARIABLE","$adapter",391],["T_OBJECT_OPERATOR","->",391],["T_STRING","select",391],"(",")",["T_WHITESPACE","\n            ",391],["T_OBJECT_OPERATOR","->",392],["T_STRING","from",392],"(",["T_VARIABLE","$this",392],["T_OBJECT_OPERATOR","->",392],["T_STRING","getTable",392],"(",["T_CONSTANT_ENCAPSED_STRING","'cms\/page_store'",392],")",",",["T_WHITESPACE"," ",392],["T_CONSTANT_ENCAPSED_STRING","'store_id'",392],")",["T_WHITESPACE","\n            ",392],["T_OBJECT_OPERATOR","->",393],["T_STRING","where",393],"(",["T_CONSTANT_ENCAPSED_STRING","'page_id = ?'",393],",",["T_INT_CAST","(int)",393],["T_VARIABLE","$pageId",393],")",";",["T_WHITESPACE","\n\n        ",393],["T_RETURN","return",395],["T_WHITESPACE"," ",395],["T_VARIABLE","$adapter",395],["T_OBJECT_OPERATOR","->",395],["T_STRING","fetchCol",395],"(",["T_VARIABLE","$select",395],")",";",["T_WHITESPACE","\n    ",395],"}",["T_WHITESPACE","\n\n    ",396],["T_DOC_COMMENT","\/**\n     * Set store model\n     *\n     * @param Mage_Core_Model_Store $store\n     * @return Mage_Cms_Model_Resource_Page\n     *\/",398],["T_WHITESPACE","\n    ",403],["T_PUBLIC","public",404],["T_WHITESPACE"," ",404],["T_FUNCTION","function",404],["T_WHITESPACE"," ",404],["T_STRING","setStore",404],"(",["T_VARIABLE","$store",404],")",["T_WHITESPACE","\n    ",404],"{",["T_WHITESPACE","\n        ",405],["T_VARIABLE","$this",406],["T_OBJECT_OPERATOR","->",406],["T_STRING","_store",406],["T_WHITESPACE"," ",406],"=",["T_WHITESPACE"," ",406],["T_VARIABLE","$store",406],";",["T_WHITESPACE","\n        ",406],["T_RETURN","return",407],["T_WHITESPACE"," ",407],["T_VARIABLE","$this",407],";",["T_WHITESPACE","\n    ",407],"}",["T_WHITESPACE","\n\n    ",408],["T_DOC_COMMENT","\/**\n     * Retrieve store model\n     *\n     * @return Mage_Core_Model_Store\n     *\/",410],["T_WHITESPACE","\n    ",414],["T_PUBLIC","public",415],["T_WHITESPACE"," ",415],["T_FUNCTION","function",415],["T_WHITESPACE"," ",415],["T_STRING","getStore",415],"(",")",["T_WHITESPACE","\n    ",415],"{",["T_WHITESPACE","\n        ",416],["T_RETURN","return",417],["T_WHITESPACE"," ",417],["T_STRING","Mage",417],["T_DOUBLE_COLON","::",417],["T_STRING","app",417],"(",")",["T_OBJECT_OPERATOR","->",417],["T_STRING","getStore",417],"(",["T_VARIABLE","$this",417],["T_OBJECT_OPERATOR","->",417],["T_STRING","_store",417],")",";",["T_WHITESPACE","\n    ",417],"}",["T_WHITESPACE","\n",418],"}",["T_WHITESPACE","\n",419]]
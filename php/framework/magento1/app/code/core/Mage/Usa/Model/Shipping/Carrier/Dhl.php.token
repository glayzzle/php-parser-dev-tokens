[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Magento\n *\n * NOTICE OF LICENSE\n *\n * This source file is subject to the Open Software License (OSL 3.0)\n * that is bundled with this package in the file LICENSE.txt.\n * It is also available through the world-wide-web at this URL:\n * http:\/\/opensource.org\/licenses\/osl-3.0.php\n * If you did not receive a copy of the license and are unable to\n * obtain it through the world-wide-web, please send an email\n * to license@magento.com so we can send you a copy immediately.\n *\n * DISCLAIMER\n *\n * Do not edit or add to this file if you wish to upgrade Magento to newer\n * versions in the future. If you wish to customize Magento for your\n * needs please refer to http:\/\/www.magento.com for more information.\n *\n * @category    Mage\n * @package     Mage_Usa\n * @copyright  Copyright (c) 2006-2016 X.commerce, Inc. and affiliates (http:\/\/www.magento.com)\n * @license    http:\/\/opensource.org\/licenses\/osl-3.0.php  Open Software License (OSL 3.0)\n *\/",2],["T_WHITESPACE","\n\n\n",25],["T_DOC_COMMENT","\/**\n * DHL shipping implementation\n *\n * @category   Mage\n * @package    Mage_Usa\n * @author      Magento Core Team <core@magentocommerce.com>\n *\/",28],["T_WHITESPACE","\n",34],["T_CLASS","class",35],["T_WHITESPACE"," ",35],["T_STRING","Mage_Usa_Model_Shipping_Carrier_Dhl",35],["T_WHITESPACE","\n    ",35],["T_EXTENDS","extends",36],["T_WHITESPACE"," ",36],["T_STRING","Mage_Usa_Model_Shipping_Carrier_Dhl_Abstract",36],["T_WHITESPACE","\n    ",36],["T_IMPLEMENTS","implements",37],["T_WHITESPACE"," ",37],["T_STRING","Mage_Shipping_Model_Carrier_Interface",37],["T_WHITESPACE","\n",37],"{",["T_WHITESPACE","\n\n    ",38],["T_DOC_COMMENT","\/**\n     * Code of the carrier\n     *\n     * @var string\n     *\/",40],["T_WHITESPACE","\n    ",44],["T_CONST","const",45],["T_WHITESPACE"," ",45],["T_STRING","CODE",45],["T_WHITESPACE"," ",45],"=",["T_WHITESPACE"," ",45],["T_CONSTANT_ENCAPSED_STRING","'dhl'",45],";",["T_WHITESPACE","\n\n    ",45],["T_DOC_COMMENT","\/**\n     * Code of the carrier\n     *\n     * @var string\n     *\/",47],["T_WHITESPACE","\n    ",51],["T_PROTECTED","protected",52],["T_WHITESPACE"," ",52],["T_VARIABLE","$_code",52],["T_WHITESPACE"," ",52],"=",["T_WHITESPACE"," ",52],["T_STRING","self",52],["T_DOUBLE_COLON","::",52],["T_STRING","CODE",52],";",["T_WHITESPACE","\n\n    ",52],["T_DOC_COMMENT","\/**\n     * Rate request data\n     *\n     * @var Mage_Shipping_Model_Rate_Request|null\n     *\/",54],["T_WHITESPACE","\n    ",58],["T_PROTECTED","protected",59],["T_WHITESPACE"," ",59],["T_VARIABLE","$_request",59],["T_WHITESPACE"," ",59],"=",["T_WHITESPACE"," ",59],["T_STRING","null",59],";",["T_WHITESPACE","\n\n    ",59],["T_DOC_COMMENT","\/**\n     * Raw rate request data\n     *\n     * @var Varien_Object|null\n     *\/",61],["T_WHITESPACE","\n    ",65],["T_PROTECTED","protected",66],["T_WHITESPACE"," ",66],["T_VARIABLE","$_rawRequest",66],["T_WHITESPACE"," ",66],"=",["T_WHITESPACE"," ",66],["T_STRING","null",66],";",["T_WHITESPACE","\n\n    ",66],["T_DOC_COMMENT","\/**\n     * Rate result data\n     *\n     * @var Mage_Shipping_Model_Rate_Result|null\n     *\/",68],["T_WHITESPACE","\n    ",72],["T_PROTECTED","protected",73],["T_WHITESPACE"," ",73],["T_VARIABLE","$_result",73],["T_WHITESPACE"," ",73],"=",["T_WHITESPACE"," ",73],["T_STRING","null",73],";",["T_WHITESPACE","\n\n    ",73],["T_DOC_COMMENT","\/**\n     * Errors placeholder\n     *\n     * @var array\n     *\/",75],["T_WHITESPACE","\n    ",79],["T_PROTECTED","protected",80],["T_WHITESPACE"," ",80],["T_VARIABLE","$_errors",80],["T_WHITESPACE"," ",80],"=",["T_WHITESPACE"," ",80],["T_ARRAY","array",80],"(",")",";",["T_WHITESPACE","\n\n    ",80],["T_DOC_COMMENT","\/**\n     * Dhl rates result\n     *\n     * @var array\n     *\/",82],["T_WHITESPACE","\n    ",86],["T_PROTECTED","protected",87],["T_WHITESPACE"," ",87],["T_VARIABLE","$_dhlRates",87],["T_WHITESPACE"," ",87],"=",["T_WHITESPACE"," ",87],["T_ARRAY","array",87],"(",")",";",["T_WHITESPACE","\n\n    ",87],["T_DOC_COMMENT","\/**\n     * Default gateway url\n     *\n     * @var string\n     *\/",89],["T_WHITESPACE","\n    ",93],["T_PROTECTED","protected",94],["T_WHITESPACE"," ",94],["T_VARIABLE","$_defaultGatewayUrl",94],["T_WHITESPACE"," ",94],"=",["T_WHITESPACE"," ",94],["T_CONSTANT_ENCAPSED_STRING","'https:\/\/eCommerce.airborne.com\/ApiLandingTest.asp'",94],";",["T_WHITESPACE","\n\n    ",94],["T_DOC_COMMENT","\/**\n     * Container types that could be customized\n     *\n     * @var array\n     *\/",96],["T_WHITESPACE","\n    ",100],["T_PROTECTED","protected",101],["T_WHITESPACE"," ",101],["T_VARIABLE","$_customizableContainerTypes",101],["T_WHITESPACE"," ",101],"=",["T_WHITESPACE"," ",101],["T_ARRAY","array",101],"(",["T_CONSTANT_ENCAPSED_STRING","'P'",101],")",";",["T_WHITESPACE","\n\n    ",101],["T_CONST","const",103],["T_WHITESPACE"," ",103],["T_STRING","SUCCESS_CODE",103],["T_WHITESPACE"," ",103],"=",["T_WHITESPACE"," ",103],["T_LNUMBER","203",103],";",["T_WHITESPACE","\n    ",103],["T_CONST","const",104],["T_WHITESPACE"," ",104],["T_STRING","SUCCESS_LABEL_CODE",104],["T_WHITESPACE"," ",104],"=",["T_WHITESPACE"," ",104],["T_LNUMBER","100",104],";",["T_WHITESPACE","\n\n    ",104],["T_CONST","const",106],["T_WHITESPACE"," ",106],["T_STRING","ADDITIONAL_PROTECTION_ASSET",106],["T_WHITESPACE"," ",106],"=",["T_WHITESPACE"," ",106],["T_CONSTANT_ENCAPSED_STRING","'AP'",106],";",["T_WHITESPACE","\n    ",106],["T_CONST","const",107],["T_WHITESPACE"," ",107],["T_STRING","ADDITIONAL_PROTECTION_NOT_REQUIRED",107],["T_WHITESPACE"," ",107],"=",["T_WHITESPACE"," ",107],["T_CONSTANT_ENCAPSED_STRING","'NR'",107],";",["T_WHITESPACE","\n\n    ",107],["T_CONST","const",109],["T_WHITESPACE"," ",109],["T_STRING","ADDITIONAL_PROTECTION_VALUE_CONFIG",109],["T_WHITESPACE"," ",109],"=",["T_WHITESPACE"," ",109],["T_LNUMBER","0",109],";",["T_WHITESPACE","\n    ",109],["T_CONST","const",110],["T_WHITESPACE"," ",110],["T_STRING","ADDITIONAL_PROTECTION_VALUE_SUBTOTAL",110],["T_WHITESPACE"," ",110],"=",["T_WHITESPACE"," ",110],["T_LNUMBER","1",110],";",["T_WHITESPACE","\n    ",110],["T_CONST","const",111],["T_WHITESPACE"," ",111],["T_STRING","ADDITIONAL_PROTECTION_VALUE_SUBTOTAL_WITH_DISCOUNT",111],["T_WHITESPACE"," ",111],"=",["T_WHITESPACE"," ",111],["T_LNUMBER","2",111],";",["T_WHITESPACE","\n\n    ",111],["T_CONST","const",113],["T_WHITESPACE"," ",113],["T_STRING","ADDITIONAL_PROTECTION_ROUNDING_FLOOR",113],["T_WHITESPACE"," ",113],"=",["T_WHITESPACE"," ",113],["T_LNUMBER","0",113],";",["T_WHITESPACE","\n    ",113],["T_CONST","const",114],["T_WHITESPACE"," ",114],["T_STRING","ADDITIONAL_PROTECTION_ROUNDING_CEIL",114],["T_WHITESPACE"," ",114],"=",["T_WHITESPACE"," ",114],["T_LNUMBER","1",114],";",["T_WHITESPACE","\n    ",114],["T_CONST","const",115],["T_WHITESPACE"," ",115],["T_STRING","ADDITIONAL_PROTECTION_ROUNDING_ROUND",115],["T_WHITESPACE"," ",115],"=",["T_WHITESPACE"," ",115],["T_LNUMBER","2",115],";",["T_WHITESPACE","\n\n    ",115],["T_DOC_COMMENT","\/**\n     * Collect and get rates\n     *\n     * @param Mage_Shipping_Model_Rate_Request $request\n     * @return bool|Mage_Shipping_Model_Rate_Result|null\n     *\/",117],["T_WHITESPACE","\n    ",122],["T_PUBLIC","public",123],["T_WHITESPACE"," ",123],["T_FUNCTION","function",123],["T_WHITESPACE"," ",123],["T_STRING","collectRates",123],"(",["T_STRING","Mage_Shipping_Model_Rate_Request",123],["T_WHITESPACE"," ",123],["T_VARIABLE","$request",123],")",["T_WHITESPACE","\n    ",123],"{",["T_WHITESPACE","\n        ",124],["T_IF","if",125],["T_WHITESPACE"," ",125],"(","!",["T_VARIABLE","$this",125],["T_OBJECT_OPERATOR","->",125],["T_STRING","getConfigFlag",125],"(",["T_VARIABLE","$this",125],["T_OBJECT_OPERATOR","->",125],["T_STRING","_activeFlag",125],")",")",["T_WHITESPACE"," ",125],"{",["T_WHITESPACE","\n            ",125],["T_RETURN","return",126],["T_WHITESPACE"," ",126],["T_STRING","false",126],";",["T_WHITESPACE","\n        ",126],"}",["T_WHITESPACE","\n\n        ",127],["T_VARIABLE","$requestDhl",129],["T_WHITESPACE"," ",129],"=",["T_WHITESPACE"," ",129],["T_CLONE","clone",129],["T_WHITESPACE"," ",129],["T_VARIABLE","$request",129],";",["T_WHITESPACE","\n        ",129],["T_VARIABLE","$origCompanyName",130],["T_WHITESPACE"," ",130],"=",["T_WHITESPACE"," ",130],["T_VARIABLE","$requestDhl",130],["T_OBJECT_OPERATOR","->",130],["T_STRING","getOrigCompanyName",130],"(",")",";",["T_WHITESPACE","\n        ",130],["T_IF","if",131],["T_WHITESPACE"," ",131],"(","!",["T_VARIABLE","$origCompanyName",131],")",["T_WHITESPACE"," ",131],"{",["T_WHITESPACE","\n            ",131],["T_VARIABLE","$origCompanyName",132],["T_WHITESPACE"," ",132],"=",["T_WHITESPACE"," ",132],["T_STRING","Mage",132],["T_DOUBLE_COLON","::",132],["T_STRING","getStoreConfig",132],"(",["T_WHITESPACE","\n                ",132],["T_STRING","Mage_Core_Model_Store",133],["T_DOUBLE_COLON","::",133],["T_STRING","XML_PATH_STORE_STORE_NAME",133],",",["T_WHITESPACE","\n                ",133],["T_VARIABLE","$requestDhl",134],["T_OBJECT_OPERATOR","->",134],["T_STRING","getStoreId",134],"(",")",["T_WHITESPACE","\n            ",134],")",";",["T_WHITESPACE","\n        ",135],"}",["T_WHITESPACE","\n\n        ",136],["T_VARIABLE","$origCountryId",138],["T_WHITESPACE"," ",138],"=",["T_WHITESPACE"," ",138],["T_VARIABLE","$requestDhl",138],["T_OBJECT_OPERATOR","->",138],["T_STRING","getOrigCountryId",138],"(",")",";",["T_WHITESPACE","\n        ",138],["T_IF","if",139],["T_WHITESPACE"," ",139],"(","!",["T_VARIABLE","$origCountryId",139],")",["T_WHITESPACE"," ",139],"{",["T_WHITESPACE","\n            ",139],["T_VARIABLE","$origCountryId",140],["T_WHITESPACE"," ",140],"=",["T_WHITESPACE"," ",140],["T_STRING","Mage",140],["T_DOUBLE_COLON","::",140],["T_STRING","getStoreConfig",140],"(",["T_WHITESPACE","\n                ",140],["T_STRING","Mage_Shipping_Model_Shipping",141],["T_DOUBLE_COLON","::",141],["T_STRING","XML_PATH_STORE_COUNTRY_ID",141],",",["T_WHITESPACE","\n                ",141],["T_VARIABLE","$requestDhl",142],["T_OBJECT_OPERATOR","->",142],["T_STRING","getStoreId",142],"(",")",["T_WHITESPACE","\n            ",142],")",";",["T_WHITESPACE","\n        ",143],"}",["T_WHITESPACE","\n        ",144],["T_VARIABLE","$origState",145],["T_WHITESPACE"," ",145],"=",["T_WHITESPACE"," ",145],["T_VARIABLE","$requestDhl",145],["T_OBJECT_OPERATOR","->",145],["T_STRING","getOrigState",145],"(",")",";",["T_WHITESPACE","\n        ",145],["T_IF","if",146],["T_WHITESPACE"," ",146],"(","!",["T_VARIABLE","$origState",146],")",["T_WHITESPACE"," ",146],"{",["T_WHITESPACE","\n            ",146],["T_VARIABLE","$origState",147],["T_WHITESPACE"," ",147],"=",["T_WHITESPACE"," ",147],["T_STRING","Mage",147],["T_DOUBLE_COLON","::",147],["T_STRING","getStoreConfig",147],"(",["T_WHITESPACE","\n                ",147],["T_STRING","Mage_Shipping_Model_Shipping",148],["T_DOUBLE_COLON","::",148],["T_STRING","XML_PATH_STORE_REGION_ID",148],",",["T_WHITESPACE","\n                ",148],["T_VARIABLE","$requestDhl",149],["T_OBJECT_OPERATOR","->",149],["T_STRING","getStoreId",149],"(",")",["T_WHITESPACE","\n            ",149],")",";",["T_WHITESPACE","\n        ",150],"}",["T_WHITESPACE","\n        ",151],["T_VARIABLE","$origCity",152],["T_WHITESPACE"," ",152],"=",["T_WHITESPACE"," ",152],["T_VARIABLE","$requestDhl",152],["T_OBJECT_OPERATOR","->",152],["T_STRING","getOrigCity",152],"(",")",";",["T_WHITESPACE","\n        ",152],["T_IF","if",153],["T_WHITESPACE"," ",153],"(","!",["T_VARIABLE","$origCity",153],")",["T_WHITESPACE"," ",153],"{",["T_WHITESPACE","\n            ",153],["T_VARIABLE","$origCity",154],["T_WHITESPACE"," ",154],"=",["T_WHITESPACE"," ",154],["T_STRING","Mage",154],["T_DOUBLE_COLON","::",154],["T_STRING","getStoreConfig",154],"(",["T_WHITESPACE","\n                ",154],["T_STRING","Mage_Shipping_Model_Shipping",155],["T_DOUBLE_COLON","::",155],["T_STRING","XML_PATH_STORE_CITY",155],",",["T_WHITESPACE","\n                ",155],["T_VARIABLE","$requestDhl",156],["T_OBJECT_OPERATOR","->",156],["T_STRING","getStoreId",156],"(",")",["T_WHITESPACE","\n            ",156],")",";",["T_WHITESPACE","\n        ",157],"}",["T_WHITESPACE","\n\n        ",158],["T_VARIABLE","$origPostcode",160],["T_WHITESPACE"," ",160],"=",["T_WHITESPACE"," ",160],["T_VARIABLE","$requestDhl",160],["T_OBJECT_OPERATOR","->",160],["T_STRING","getOrigPostcode",160],"(",")",";",["T_WHITESPACE","\n        ",160],["T_IF","if",161],["T_WHITESPACE"," ",161],"(","!",["T_VARIABLE","$origPostcode",161],")",["T_WHITESPACE"," ",161],"{",["T_WHITESPACE","\n            ",161],["T_VARIABLE","$origPostcode",162],["T_WHITESPACE"," ",162],"=",["T_WHITESPACE"," ",162],["T_STRING","Mage",162],["T_DOUBLE_COLON","::",162],["T_STRING","getStoreConfig",162],"(",["T_WHITESPACE","\n                ",162],["T_STRING","Mage_Shipping_Model_Shipping",163],["T_DOUBLE_COLON","::",163],["T_STRING","XML_PATH_STORE_ZIP",163],",",["T_WHITESPACE","\n                ",163],["T_VARIABLE","$requestDhl",164],["T_OBJECT_OPERATOR","->",164],["T_STRING","getStoreId",164],"(",")",["T_WHITESPACE","\n            ",164],")",";",["T_WHITESPACE","\n        ",165],"}",["T_WHITESPACE","\n        ",166],["T_VARIABLE","$requestDhl",167],["T_OBJECT_OPERATOR","->",167],["T_STRING","setOrigCompanyName",167],"(",["T_VARIABLE","$origCompanyName",167],")",["T_WHITESPACE","\n            ",167],["T_OBJECT_OPERATOR","->",168],["T_STRING","setCountryId",168],"(",["T_VARIABLE","$origCountryId",168],")",["T_WHITESPACE","\n            ",168],["T_OBJECT_OPERATOR","->",169],["T_STRING","setOrigState",169],"(",["T_VARIABLE","$origState",169],")",["T_WHITESPACE","\n            ",169],["T_OBJECT_OPERATOR","->",170],["T_STRING","setOrigCity",170],"(",["T_VARIABLE","$origCity",170],")",["T_WHITESPACE","\n            ",170],["T_OBJECT_OPERATOR","->",171],["T_STRING","setOrigPostal",171],"(",["T_VARIABLE","$origPostcode",171],")",";",["T_WHITESPACE","\n        ",171],["T_VARIABLE","$this",172],["T_OBJECT_OPERATOR","->",172],["T_STRING","setRequest",172],"(",["T_VARIABLE","$requestDhl",172],")",";",["T_WHITESPACE","\n        ",172],["T_VARIABLE","$this",173],["T_OBJECT_OPERATOR","->",173],["T_STRING","_result",173],["T_WHITESPACE"," ",173],"=",["T_WHITESPACE"," ",173],["T_VARIABLE","$this",173],["T_OBJECT_OPERATOR","->",173],["T_STRING","_getQuotes",173],"(",")",";",["T_WHITESPACE","\n        ",173],["T_VARIABLE","$this",174],["T_OBJECT_OPERATOR","->",174],["T_STRING","_updateFreeMethodQuote",174],"(",["T_VARIABLE","$request",174],")",";",["T_WHITESPACE","\n\n        ",174],["T_RETURN","return",176],["T_WHITESPACE"," ",176],["T_VARIABLE","$this",176],["T_OBJECT_OPERATOR","->",176],["T_STRING","getResult",176],"(",")",";",["T_WHITESPACE","\n    ",176],"}",["T_WHITESPACE","\n\n    ",177],["T_DOC_COMMENT","\/**\n     * Prepare and set request in property of current instance\n     *\n     * @param Varien_Object $request\n     * @return Mage_Usa_Model_Shipping_Carrier_Dhl\n     *\/",179],["T_WHITESPACE","\n    ",184],["T_PUBLIC","public",185],["T_WHITESPACE"," ",185],["T_FUNCTION","function",185],["T_WHITESPACE"," ",185],["T_STRING","setRequest",185],"(",["T_STRING","Varien_Object",185],["T_WHITESPACE"," ",185],["T_VARIABLE","$request",185],")",["T_WHITESPACE","\n    ",185],"{",["T_WHITESPACE","\n        ",186],["T_VARIABLE","$this",187],["T_OBJECT_OPERATOR","->",187],["T_STRING","_request",187],["T_WHITESPACE"," ",187],"=",["T_WHITESPACE"," ",187],["T_VARIABLE","$request",187],";",["T_WHITESPACE","\n\n        ",187],["T_VARIABLE","$r",189],["T_WHITESPACE"," ",189],"=",["T_WHITESPACE"," ",189],["T_NEW","new",189],["T_WHITESPACE"," ",189],["T_STRING","Varien_Object",189],"(",")",";",["T_WHITESPACE","\n\n        ",189],["T_IF","if",191],["T_WHITESPACE"," ",191],"(",["T_VARIABLE","$request",191],["T_OBJECT_OPERATOR","->",191],["T_STRING","getAction",191],"(",")",["T_WHITESPACE"," ",191],["T_IS_EQUAL","==",191],["T_WHITESPACE"," ",191],["T_CONSTANT_ENCAPSED_STRING","'GenerateLabel'",191],")",["T_WHITESPACE"," ",191],"{",["T_WHITESPACE","\n            ",191],["T_VARIABLE","$r",192],["T_OBJECT_OPERATOR","->",192],["T_STRING","setAction",192],"(",["T_CONSTANT_ENCAPSED_STRING","'GenerateLabel'",192],")",";",["T_WHITESPACE","\n        ",192],"}",["T_WHITESPACE"," ",193],["T_ELSE","else",193],["T_WHITESPACE"," ",193],"{",["T_WHITESPACE","\n            ",193],["T_VARIABLE","$r",194],["T_OBJECT_OPERATOR","->",194],["T_STRING","setAction",194],"(",["T_CONSTANT_ENCAPSED_STRING","'RateEstimate'",194],")",";",["T_WHITESPACE","\n        ",194],"}",["T_WHITESPACE","\n        ",195],["T_VARIABLE","$r",196],["T_OBJECT_OPERATOR","->",196],["T_STRING","setIsGenerateLabelReturn",196],"(",["T_VARIABLE","$request",196],["T_OBJECT_OPERATOR","->",196],["T_STRING","getIsGenerateLabelReturn",196],"(",")",")",";",["T_WHITESPACE","\n\n        ",196],["T_VARIABLE","$r",198],["T_OBJECT_OPERATOR","->",198],["T_STRING","setStoreId",198],"(",["T_VARIABLE","$request",198],["T_OBJECT_OPERATOR","->",198],["T_STRING","getStoreId",198],"(",")",")",";",["T_WHITESPACE","\n\n        ",198],["T_IF","if",200],["T_WHITESPACE"," ",200],"(",["T_VARIABLE","$request",200],["T_OBJECT_OPERATOR","->",200],["T_STRING","getLimitMethod",200],"(",")",")",["T_WHITESPACE"," ",200],"{",["T_WHITESPACE","\n            ",200],["T_VARIABLE","$r",201],["T_OBJECT_OPERATOR","->",201],["T_STRING","setService",201],"(",["T_VARIABLE","$request",201],["T_OBJECT_OPERATOR","->",201],["T_STRING","getLimitMethod",201],"(",")",")",";",["T_WHITESPACE","\n        ",201],"}",["T_WHITESPACE","\n\n        ",202],["T_IF","if",204],["T_WHITESPACE"," ",204],"(",["T_VARIABLE","$request",204],["T_OBJECT_OPERATOR","->",204],["T_STRING","getDhlId",204],"(",")",")",["T_WHITESPACE"," ",204],"{",["T_WHITESPACE","\n            ",204],["T_VARIABLE","$id",205],["T_WHITESPACE"," ",205],"=",["T_WHITESPACE"," ",205],["T_VARIABLE","$request",205],["T_OBJECT_OPERATOR","->",205],["T_STRING","getDhlId",205],"(",")",";",["T_WHITESPACE","\n        ",205],"}",["T_WHITESPACE"," ",206],["T_ELSE","else",206],["T_WHITESPACE"," ",206],"{",["T_WHITESPACE","\n            ",206],["T_VARIABLE","$id",207],["T_WHITESPACE"," ",207],"=",["T_WHITESPACE"," ",207],["T_VARIABLE","$this",207],["T_OBJECT_OPERATOR","->",207],["T_STRING","getConfigData",207],"(",["T_CONSTANT_ENCAPSED_STRING","'id'",207],")",";",["T_WHITESPACE","\n        ",207],"}",["T_WHITESPACE","\n        ",208],["T_VARIABLE","$r",209],["T_OBJECT_OPERATOR","->",209],["T_STRING","setId",209],"(",["T_VARIABLE","$id",209],")",";",["T_WHITESPACE","\n\n        ",209],["T_IF","if",211],["T_WHITESPACE"," ",211],"(",["T_VARIABLE","$request",211],["T_OBJECT_OPERATOR","->",211],["T_STRING","getDhlPassword",211],"(",")",")",["T_WHITESPACE"," ",211],"{",["T_WHITESPACE","\n            ",211],["T_VARIABLE","$password",212],["T_WHITESPACE"," ",212],"=",["T_WHITESPACE"," ",212],["T_VARIABLE","$request",212],["T_OBJECT_OPERATOR","->",212],["T_STRING","getDhlPassword",212],"(",")",";",["T_WHITESPACE","\n        ",212],"}",["T_WHITESPACE"," ",213],["T_ELSE","else",213],["T_WHITESPACE"," ",213],"{",["T_WHITESPACE","\n            ",213],["T_VARIABLE","$password",214],["T_WHITESPACE"," ",214],"=",["T_WHITESPACE"," ",214],["T_VARIABLE","$this",214],["T_OBJECT_OPERATOR","->",214],["T_STRING","getConfigData",214],"(",["T_CONSTANT_ENCAPSED_STRING","'password'",214],")",";",["T_WHITESPACE","\n        ",214],"}",["T_WHITESPACE","\n        ",215],["T_VARIABLE","$r",216],["T_OBJECT_OPERATOR","->",216],["T_STRING","setPassword",216],"(",["T_VARIABLE","$password",216],")",";",["T_WHITESPACE","\n\n        ",216],["T_IF","if",218],["T_WHITESPACE"," ",218],"(",["T_VARIABLE","$request",218],["T_OBJECT_OPERATOR","->",218],["T_STRING","getDhlAccount",218],"(",")",")",["T_WHITESPACE"," ",218],"{",["T_WHITESPACE","\n            ",218],["T_VARIABLE","$accountNbr",219],["T_WHITESPACE"," ",219],"=",["T_WHITESPACE"," ",219],["T_VARIABLE","$request",219],["T_OBJECT_OPERATOR","->",219],["T_STRING","getDhlAccount",219],"(",")",";",["T_WHITESPACE","\n        ",219],"}",["T_WHITESPACE"," ",220],["T_ELSE","else",220],["T_WHITESPACE"," ",220],"{",["T_WHITESPACE","\n            ",220],["T_VARIABLE","$accountNbr",221],["T_WHITESPACE"," ",221],"=",["T_WHITESPACE"," ",221],["T_VARIABLE","$this",221],["T_OBJECT_OPERATOR","->",221],["T_STRING","getConfigData",221],"(",["T_CONSTANT_ENCAPSED_STRING","'account'",221],")",";",["T_WHITESPACE","\n        ",221],"}",["T_WHITESPACE","\n        ",222],["T_VARIABLE","$r",223],["T_OBJECT_OPERATOR","->",223],["T_STRING","setAccountNbr",223],"(",["T_VARIABLE","$accountNbr",223],")",";",["T_WHITESPACE","\n\n        ",223],["T_IF","if",225],["T_WHITESPACE"," ",225],"(",["T_VARIABLE","$request",225],["T_OBJECT_OPERATOR","->",225],["T_STRING","getDhlShippingKey",225],"(",")",")",["T_WHITESPACE"," ",225],"{",["T_WHITESPACE","\n            ",225],["T_VARIABLE","$shippingKey",226],["T_WHITESPACE"," ",226],"=",["T_WHITESPACE"," ",226],["T_VARIABLE","$request",226],["T_OBJECT_OPERATOR","->",226],["T_STRING","getDhlShippingKey",226],"(",")",";",["T_WHITESPACE","\n        ",226],"}",["T_WHITESPACE"," ",227],["T_ELSE","else",227],["T_WHITESPACE"," ",227],"{",["T_WHITESPACE","\n            ",227],["T_VARIABLE","$shippingKey",228],["T_WHITESPACE"," ",228],"=",["T_WHITESPACE"," ",228],["T_VARIABLE","$this",228],["T_OBJECT_OPERATOR","->",228],["T_STRING","getConfigData",228],"(",["T_CONSTANT_ENCAPSED_STRING","'shipping_key'",228],")",";",["T_WHITESPACE","\n        ",228],"}",["T_WHITESPACE","\n        ",229],["T_VARIABLE","$r",230],["T_OBJECT_OPERATOR","->",230],["T_STRING","setShippingKey",230],"(",["T_VARIABLE","$shippingKey",230],")",";",["T_WHITESPACE","\n\n        ",230],["T_IF","if",232],["T_WHITESPACE"," ",232],"(",["T_VARIABLE","$request",232],["T_OBJECT_OPERATOR","->",232],["T_STRING","getDhlShippingIntlKey",232],"(",")",")",["T_WHITESPACE"," ",232],"{",["T_WHITESPACE","\n            ",232],["T_VARIABLE","$shippingKey",233],["T_WHITESPACE"," ",233],"=",["T_WHITESPACE"," ",233],["T_VARIABLE","$request",233],["T_OBJECT_OPERATOR","->",233],["T_STRING","getDhlShippingIntlKey",233],"(",")",";",["T_WHITESPACE","\n        ",233],"}",["T_WHITESPACE"," ",234],["T_ELSE","else",234],["T_WHITESPACE"," ",234],"{",["T_WHITESPACE","\n            ",234],["T_VARIABLE","$shippingKey",235],["T_WHITESPACE"," ",235],"=",["T_WHITESPACE"," ",235],["T_VARIABLE","$this",235],["T_OBJECT_OPERATOR","->",235],["T_STRING","getConfigData",235],"(",["T_CONSTANT_ENCAPSED_STRING","'shipping_intlkey'",235],")",";",["T_WHITESPACE","\n        ",235],"}",["T_WHITESPACE","\n        ",236],["T_VARIABLE","$r",237],["T_OBJECT_OPERATOR","->",237],["T_STRING","setShippingIntlKey",237],"(",["T_VARIABLE","$shippingKey",237],")",";",["T_WHITESPACE","\n\n        ",237],["T_IF","if",239],["T_WHITESPACE"," ",239],"(",["T_VARIABLE","$request",239],["T_OBJECT_OPERATOR","->",239],["T_STRING","getDhlShipmentType",239],"(",")",")",["T_WHITESPACE"," ",239],"{",["T_WHITESPACE","\n            ",239],["T_VARIABLE","$shipmentType",240],["T_WHITESPACE"," ",240],"=",["T_WHITESPACE"," ",240],["T_VARIABLE","$request",240],["T_OBJECT_OPERATOR","->",240],["T_STRING","getDhlShipmentType",240],"(",")",";",["T_WHITESPACE","\n        ",240],"}",["T_WHITESPACE"," ",241],["T_ELSE","else",241],["T_WHITESPACE"," ",241],"{",["T_WHITESPACE","\n            ",241],["T_VARIABLE","$shipmentType",242],["T_WHITESPACE"," ",242],"=",["T_WHITESPACE"," ",242],["T_VARIABLE","$this",242],["T_OBJECT_OPERATOR","->",242],["T_STRING","getConfigData",242],"(",["T_CONSTANT_ENCAPSED_STRING","'shipment_type'",242],")",";",["T_WHITESPACE","\n        ",242],"}",["T_WHITESPACE","\n        ",243],["T_VARIABLE","$r",244],["T_OBJECT_OPERATOR","->",244],["T_STRING","setShipmentType",244],"(",["T_VARIABLE","$shipmentType",244],")",";",["T_WHITESPACE","\n\n        ",244],["T_IF","if",246],["T_WHITESPACE"," ",246],"(",["T_VARIABLE","$request",246],["T_OBJECT_OPERATOR","->",246],["T_STRING","getDhlDutiable",246],"(",")",")",["T_WHITESPACE"," ",246],"{",["T_WHITESPACE","\n            ",246],["T_VARIABLE","$shipmentDutible",247],["T_WHITESPACE"," ",247],"=",["T_WHITESPACE"," ",247],["T_VARIABLE","$request",247],["T_OBJECT_OPERATOR","->",247],["T_STRING","getDhlDutiable",247],"(",")",";",["T_WHITESPACE","\n        ",247],"}",["T_WHITESPACE"," ",248],["T_ELSE","else",248],["T_WHITESPACE"," ",248],"{",["T_WHITESPACE","\n            ",248],["T_VARIABLE","$shipmentDutible",249],["T_WHITESPACE"," ",249],"=",["T_WHITESPACE"," ",249],["T_VARIABLE","$this",249],["T_OBJECT_OPERATOR","->",249],["T_STRING","getConfigData",249],"(",["T_CONSTANT_ENCAPSED_STRING","'dutiable'",249],")",";",["T_WHITESPACE","\n        ",249],"}",["T_WHITESPACE","\n        ",250],["T_VARIABLE","$r",251],["T_OBJECT_OPERATOR","->",251],["T_STRING","setDutiable",251],"(",["T_VARIABLE","$shipmentDutible",251],")",";",["T_WHITESPACE","\n\n        ",251],["T_IF","if",253],["T_WHITESPACE"," ",253],"(",["T_VARIABLE","$request",253],["T_OBJECT_OPERATOR","->",253],["T_STRING","getDhlDutyPaymentType",253],"(",")",")",["T_WHITESPACE"," ",253],"{",["T_WHITESPACE","\n            ",253],["T_VARIABLE","$dutypaytype",254],["T_WHITESPACE"," ",254],"=",["T_WHITESPACE"," ",254],["T_VARIABLE","$request",254],["T_OBJECT_OPERATOR","->",254],["T_STRING","getDhlDutyPaymentType",254],"(",")",";",["T_WHITESPACE","\n        ",254],"}",["T_WHITESPACE"," ",255],["T_ELSE","else",255],["T_WHITESPACE"," ",255],"{",["T_WHITESPACE","\n            ",255],["T_VARIABLE","$dutypaytype",256],["T_WHITESPACE"," ",256],"=",["T_WHITESPACE"," ",256],["T_VARIABLE","$this",256],["T_OBJECT_OPERATOR","->",256],["T_STRING","getConfigData",256],"(",["T_CONSTANT_ENCAPSED_STRING","'dutypaymenttype'",256],")",";",["T_WHITESPACE","\n        ",256],"}",["T_WHITESPACE","\n        ",257],["T_VARIABLE","$r",258],["T_OBJECT_OPERATOR","->",258],["T_STRING","setDutyPaymentType",258],"(",["T_VARIABLE","$dutypaytype",258],")",";",["T_WHITESPACE","\n\n        ",258],["T_IF","if",260],["T_WHITESPACE"," ",260],"(",["T_VARIABLE","$request",260],["T_OBJECT_OPERATOR","->",260],["T_STRING","getDhlContentDesc",260],"(",")",")",["T_WHITESPACE"," ",260],"{",["T_WHITESPACE","\n            ",260],["T_VARIABLE","$contentdesc",261],["T_WHITESPACE"," ",261],"=",["T_WHITESPACE"," ",261],["T_VARIABLE","$request",261],["T_OBJECT_OPERATOR","->",261],["T_STRING","getDhlContentDesc",261],"(",")",";",["T_WHITESPACE","\n        ",261],"}",["T_WHITESPACE"," ",262],["T_ELSE","else",262],["T_WHITESPACE"," ",262],"{",["T_WHITESPACE","\n            ",262],["T_VARIABLE","$contentdesc",263],["T_WHITESPACE"," ",263],"=",["T_WHITESPACE"," ",263],["T_VARIABLE","$this",263],["T_OBJECT_OPERATOR","->",263],["T_STRING","getConfigData",263],"(",["T_CONSTANT_ENCAPSED_STRING","'contentdesc'",263],")",";",["T_WHITESPACE","\n        ",263],"}",["T_WHITESPACE","\n        ",264],["T_VARIABLE","$r",265],["T_OBJECT_OPERATOR","->",265],["T_STRING","setContentDesc",265],"(",["T_VARIABLE","$contentdesc",265],")",";",["T_WHITESPACE","\n\n        ",265],["T_IF","if",267],["T_WHITESPACE"," ",267],"(",["T_VARIABLE","$request",267],["T_OBJECT_OPERATOR","->",267],["T_STRING","getDestPostcode",267],"(",")",")",["T_WHITESPACE"," ",267],"{",["T_WHITESPACE","\n            ",267],["T_VARIABLE","$r",268],["T_OBJECT_OPERATOR","->",268],["T_STRING","setDestPostal",268],"(",["T_VARIABLE","$request",268],["T_OBJECT_OPERATOR","->",268],["T_STRING","getDestPostcode",268],"(",")",")",";",["T_WHITESPACE","\n        ",268],"}",["T_WHITESPACE","\n\n        ",269],["T_IF","if",271],["T_WHITESPACE"," ",271],"(",["T_VARIABLE","$request",271],["T_OBJECT_OPERATOR","->",271],["T_STRING","getOrigCountry",271],"(",")",")",["T_WHITESPACE"," ",271],"{",["T_WHITESPACE","\n            ",271],["T_VARIABLE","$origCountry",272],["T_WHITESPACE"," ",272],"=",["T_WHITESPACE"," ",272],["T_VARIABLE","$request",272],["T_OBJECT_OPERATOR","->",272],["T_STRING","getOrigCountry",272],"(",")",";",["T_WHITESPACE","\n        ",272],"}",["T_WHITESPACE"," ",273],["T_ELSE","else",273],["T_WHITESPACE"," ",273],"{",["T_WHITESPACE","\n            ",273],["T_VARIABLE","$origCountry",274],["T_WHITESPACE"," ",274],"=",["T_WHITESPACE"," ",274],["T_STRING","Mage",274],["T_DOUBLE_COLON","::",274],["T_STRING","getStoreConfig",274],"(",["T_WHITESPACE","\n                ",274],["T_STRING","Mage_Shipping_Model_Shipping",275],["T_DOUBLE_COLON","::",275],["T_STRING","XML_PATH_STORE_COUNTRY_ID",275],",",["T_WHITESPACE","\n                ",275],["T_VARIABLE","$r",276],["T_OBJECT_OPERATOR","->",276],["T_STRING","getStoreId",276],"(",")",["T_WHITESPACE","\n            ",276],")",";",["T_WHITESPACE","\n        ",277],"}",["T_WHITESPACE","\n        ",278],["T_VARIABLE","$r",279],["T_OBJECT_OPERATOR","->",279],["T_STRING","setOrigCountry",279],"(",["T_VARIABLE","$origCountry",279],")",";",["T_WHITESPACE","\n\n        ",279],["T_IF","if",281],["T_WHITESPACE"," ",281],"(",["T_VARIABLE","$request",281],["T_OBJECT_OPERATOR","->",281],["T_STRING","getOrigCountryId",281],"(",")",")",["T_WHITESPACE"," ",281],"{",["T_WHITESPACE","\n            ",281],["T_VARIABLE","$origCountryId",282],["T_WHITESPACE"," ",282],"=",["T_WHITESPACE"," ",282],["T_VARIABLE","$request",282],["T_OBJECT_OPERATOR","->",282],["T_STRING","getOrigCountryId",282],"(",")",";",["T_WHITESPACE","\n        ",282],"}",["T_WHITESPACE"," ",283],["T_ELSE","else",283],["T_WHITESPACE"," ",283],"{",["T_WHITESPACE","\n            ",283],["T_VARIABLE","$origCountryId",284],["T_WHITESPACE"," ",284],"=",["T_WHITESPACE"," ",284],["T_STRING","Mage",284],["T_DOUBLE_COLON","::",284],["T_STRING","getStoreConfig",284],"(",["T_WHITESPACE","\n                ",284],["T_STRING","Mage_Shipping_Model_Shipping",285],["T_DOUBLE_COLON","::",285],["T_STRING","XML_PATH_STORE_COUNTRY_ID",285],",",["T_WHITESPACE","\n                ",285],["T_VARIABLE","$r",286],["T_OBJECT_OPERATOR","->",286],["T_STRING","getStoreId",286],"(",")",["T_WHITESPACE","\n            ",286],")",";",["T_WHITESPACE","\n        ",287],"}",["T_WHITESPACE","\n        ",288],["T_VARIABLE","$r",289],["T_OBJECT_OPERATOR","->",289],["T_STRING","setOrigCountryId",289],"(",["T_VARIABLE","$origCountryId",289],")",";",["T_WHITESPACE","\n\n        ",289],["T_IF","if",291],["T_WHITESPACE"," ",291],"(",["T_VARIABLE","$request",291],["T_OBJECT_OPERATOR","->",291],["T_STRING","getAction",291],"(",")",["T_WHITESPACE"," ",291],["T_IS_EQUAL","==",291],["T_WHITESPACE"," ",291],["T_CONSTANT_ENCAPSED_STRING","'GenerateLabel'",291],")",["T_WHITESPACE"," ",291],"{",["T_WHITESPACE","\n            ",291],["T_VARIABLE","$packageParams",292],["T_WHITESPACE"," ",292],"=",["T_WHITESPACE"," ",292],["T_VARIABLE","$request",292],["T_OBJECT_OPERATOR","->",292],["T_STRING","getPackageParams",292],"(",")",";",["T_WHITESPACE","\n            ",292],["T_VARIABLE","$shippingWeight",293],["T_WHITESPACE"," ",293],"=",["T_WHITESPACE"," ",293],["T_VARIABLE","$request",293],["T_OBJECT_OPERATOR","->",293],["T_STRING","getPackageWeight",293],"(",")",";",["T_WHITESPACE","\n            ",293],["T_IF","if",294],["T_WHITESPACE"," ",294],"(",["T_VARIABLE","$packageParams",294],["T_OBJECT_OPERATOR","->",294],["T_STRING","getWeightUnits",294],"(",")",["T_WHITESPACE"," ",294],["T_IS_NOT_EQUAL","!=",294],["T_WHITESPACE"," ",294],["T_STRING","Zend_Measure_Weight",294],["T_DOUBLE_COLON","::",294],["T_STRING","POUND",294],")",["T_WHITESPACE"," ",294],"{",["T_WHITESPACE","\n                ",294],["T_VARIABLE","$shippingWeight",295],["T_WHITESPACE"," ",295],"=",["T_WHITESPACE"," ",295],["T_STRING","round",295],"(",["T_STRING","Mage",295],["T_DOUBLE_COLON","::",295],["T_STRING","helper",295],"(",["T_CONSTANT_ENCAPSED_STRING","'usa'",295],")",["T_OBJECT_OPERATOR","->",295],["T_STRING","convertMeasureWeight",295],"(",["T_WHITESPACE","\n                    ",295],["T_VARIABLE","$request",296],["T_OBJECT_OPERATOR","->",296],["T_STRING","getPackageWeight",296],"(",")",",",["T_WHITESPACE","\n                    ",296],["T_VARIABLE","$packageParams",297],["T_OBJECT_OPERATOR","->",297],["T_STRING","getWeightUnits",297],"(",")",",",["T_WHITESPACE","\n                    ",297],["T_STRING","Zend_Measure_Weight",298],["T_DOUBLE_COLON","::",298],["T_STRING","POUND",298],["T_WHITESPACE","\n                ",298],")",")",";",["T_WHITESPACE","\n            ",299],"}",["T_WHITESPACE","\n            ",300],["T_IF","if",301],["T_WHITESPACE"," ",301],"(",["T_VARIABLE","$packageParams",301],["T_OBJECT_OPERATOR","->",301],["T_STRING","getDimensionUnits",301],"(",")",["T_WHITESPACE"," ",301],["T_IS_NOT_EQUAL","!=",301],["T_WHITESPACE"," ",301],["T_STRING","Zend_Measure_Length",301],["T_DOUBLE_COLON","::",301],["T_STRING","INCH",301],")",["T_WHITESPACE"," ",301],"{",["T_WHITESPACE","\n                ",301],["T_VARIABLE","$packageParams",302],["T_OBJECT_OPERATOR","->",302],["T_STRING","setLength",302],"(",["T_STRING","round",302],"(",["T_STRING","Mage",302],["T_DOUBLE_COLON","::",302],["T_STRING","helper",302],"(",["T_CONSTANT_ENCAPSED_STRING","'usa'",302],")",["T_OBJECT_OPERATOR","->",302],["T_STRING","convertMeasureDimension",302],"(",["T_WHITESPACE","\n                    ",302],["T_VARIABLE","$packageParams",303],["T_OBJECT_OPERATOR","->",303],["T_STRING","getLength",303],"(",")",",",["T_WHITESPACE","\n                    ",303],["T_VARIABLE","$packageParams",304],["T_OBJECT_OPERATOR","->",304],["T_STRING","getDimensionUnits",304],"(",")",",",["T_WHITESPACE","\n                    ",304],["T_STRING","Zend_Measure_Length",305],["T_DOUBLE_COLON","::",305],["T_STRING","INCH",305],["T_WHITESPACE","\n                ",305],")",")",")",";",["T_WHITESPACE","\n                ",306],["T_VARIABLE","$packageParams",307],["T_OBJECT_OPERATOR","->",307],["T_STRING","setWidth",307],"(",["T_STRING","round",307],"(",["T_STRING","Mage",307],["T_DOUBLE_COLON","::",307],["T_STRING","helper",307],"(",["T_CONSTANT_ENCAPSED_STRING","'usa'",307],")",["T_OBJECT_OPERATOR","->",307],["T_STRING","convertMeasureDimension",307],"(",["T_WHITESPACE","\n                    ",307],["T_VARIABLE","$packageParams",308],["T_OBJECT_OPERATOR","->",308],["T_STRING","getWidth",308],"(",")",",",["T_WHITESPACE","\n                    ",308],["T_VARIABLE","$packageParams",309],["T_OBJECT_OPERATOR","->",309],["T_STRING","getDimensionUnits",309],"(",")",",",["T_WHITESPACE","\n                    ",309],["T_STRING","Zend_Measure_Length",310],["T_DOUBLE_COLON","::",310],["T_STRING","INCH",310],["T_WHITESPACE","\n                ",310],")",")",")",";",["T_WHITESPACE","\n                ",311],["T_VARIABLE","$packageParams",312],["T_OBJECT_OPERATOR","->",312],["T_STRING","setHeight",312],"(",["T_STRING","round",312],"(",["T_STRING","Mage",312],["T_DOUBLE_COLON","::",312],["T_STRING","helper",312],"(",["T_CONSTANT_ENCAPSED_STRING","'usa'",312],")",["T_OBJECT_OPERATOR","->",312],["T_STRING","convertMeasureDimension",312],"(",["T_WHITESPACE","\n                    ",312],["T_VARIABLE","$packageParams",313],["T_OBJECT_OPERATOR","->",313],["T_STRING","getHeight",313],"(",")",",",["T_WHITESPACE","\n                    ",313],["T_VARIABLE","$packageParams",314],["T_OBJECT_OPERATOR","->",314],["T_STRING","getDimensionUnits",314],"(",")",",",["T_WHITESPACE","\n                    ",314],["T_STRING","Zend_Measure_Length",315],["T_DOUBLE_COLON","::",315],["T_STRING","INCH",315],["T_WHITESPACE","\n                ",315],")",")",")",";",["T_WHITESPACE","\n            ",316],"}",["T_WHITESPACE","\n            ",317],["T_VARIABLE","$r",318],["T_OBJECT_OPERATOR","->",318],["T_STRING","setPackageParams",318],"(",["T_VARIABLE","$packageParams",318],")",";",["T_WHITESPACE","\n        ",318],"}",["T_WHITESPACE"," ",319],["T_ELSE","else",319],["T_WHITESPACE"," ",319],"{",["T_WHITESPACE","\n            ",319],["T_COMMENT","\/*\n            * DHL only accepts weight as a whole number. Maximum length is 3 digits.\n            *\/",320],["T_WHITESPACE","\n            ",322],["T_VARIABLE","$shippingWeight",323],["T_WHITESPACE"," ",323],"=",["T_WHITESPACE"," ",323],["T_VARIABLE","$request",323],["T_OBJECT_OPERATOR","->",323],["T_STRING","getPackageWeight",323],"(",")",";",["T_WHITESPACE","\n            ",323],["T_IF","if",324],["T_WHITESPACE"," ",324],"(",["T_VARIABLE","$shipmentType",324],["T_WHITESPACE"," ",324],["T_IS_NOT_EQUAL","!=",324],["T_WHITESPACE"," ",324],["T_CONSTANT_ENCAPSED_STRING","'L'",324],")",["T_WHITESPACE"," ",324],"{",["T_WHITESPACE","\n                ",324],["T_VARIABLE","$weight",325],["T_WHITESPACE"," ",325],"=",["T_WHITESPACE"," ",325],["T_VARIABLE","$this",325],["T_OBJECT_OPERATOR","->",325],["T_STRING","getTotalNumOfBoxes",325],"(",["T_VARIABLE","$shippingWeight",325],")",";",["T_WHITESPACE","\n                ",325],["T_VARIABLE","$shippingWeight",326],["T_WHITESPACE"," ",326],"=",["T_WHITESPACE"," ",326],["T_STRING","round",326],"(",["T_STRING","max",326],"(",["T_LNUMBER","1",326],",",["T_WHITESPACE"," ",326],["T_VARIABLE","$weight",326],")",",",["T_WHITESPACE"," ",326],["T_LNUMBER","0",326],")",";",["T_WHITESPACE","\n            ",326],"}",["T_WHITESPACE","\n        ",327],"}",["T_WHITESPACE","\n\n        ",328],["T_VARIABLE","$r",330],["T_OBJECT_OPERATOR","->",330],["T_STRING","setValue",330],"(",["T_STRING","round",330],"(",["T_VARIABLE","$request",330],["T_OBJECT_OPERATOR","->",330],["T_STRING","getPackageValue",330],"(",")",",",["T_WHITESPACE"," ",330],["T_LNUMBER","2",330],")",")",";",["T_WHITESPACE","\n        ",330],["T_VARIABLE","$r",331],["T_OBJECT_OPERATOR","->",331],["T_STRING","setValueWithDiscount",331],"(",["T_VARIABLE","$request",331],["T_OBJECT_OPERATOR","->",331],["T_STRING","getPackageValueWithDiscount",331],"(",")",")",";",["T_WHITESPACE","\n        ",331],["T_VARIABLE","$r",332],["T_OBJECT_OPERATOR","->",332],["T_STRING","setCustomsValue",332],"(",["T_VARIABLE","$request",332],["T_OBJECT_OPERATOR","->",332],["T_STRING","getPackageCustomsValue",332],"(",")",")",";",["T_WHITESPACE","\n        ",332],["T_VARIABLE","$r",333],["T_OBJECT_OPERATOR","->",333],["T_STRING","setDestStreet",333],"(",["T_STRING","Mage",333],["T_DOUBLE_COLON","::",333],["T_STRING","helper",333],"(",["T_CONSTANT_ENCAPSED_STRING","'core\/string'",333],")",["T_OBJECT_OPERATOR","->",333],["T_STRING","substr",333],"(",["T_STRING","str_replace",333],"(",["T_CONSTANT_ENCAPSED_STRING","\"\\n\"",333],",",["T_WHITESPACE"," ",333],["T_CONSTANT_ENCAPSED_STRING","''",333],",",["T_WHITESPACE"," ",333],["T_VARIABLE","$request",333],["T_OBJECT_OPERATOR","->",333],["T_STRING","getDestStreet",333],"(",")",")",",",["T_WHITESPACE"," ",333],["T_LNUMBER","0",333],",",["T_WHITESPACE"," ",333],["T_LNUMBER","35",333],")",")",";",["T_WHITESPACE","\n        ",333],["T_VARIABLE","$r",334],["T_OBJECT_OPERATOR","->",334],["T_STRING","setDestStreetLine2",334],"(",["T_VARIABLE","$request",334],["T_OBJECT_OPERATOR","->",334],["T_STRING","getDestStreetLine2",334],"(",")",")",";",["T_WHITESPACE","\n        ",334],["T_VARIABLE","$r",335],["T_OBJECT_OPERATOR","->",335],["T_STRING","setDestCity",335],"(",["T_VARIABLE","$request",335],["T_OBJECT_OPERATOR","->",335],["T_STRING","getDestCity",335],"(",")",")",";",["T_WHITESPACE","\n        ",335],["T_VARIABLE","$r",336],["T_OBJECT_OPERATOR","->",336],["T_STRING","setOrigCompanyName",336],"(",["T_VARIABLE","$request",336],["T_OBJECT_OPERATOR","->",336],["T_STRING","getOrigCompanyName",336],"(",")",")",";",["T_WHITESPACE","\n        ",336],["T_VARIABLE","$r",337],["T_OBJECT_OPERATOR","->",337],["T_STRING","setOrigCity",337],"(",["T_VARIABLE","$request",337],["T_OBJECT_OPERATOR","->",337],["T_STRING","getOrigCity",337],"(",")",")",";",["T_WHITESPACE","\n        ",337],["T_VARIABLE","$r",338],["T_OBJECT_OPERATOR","->",338],["T_STRING","setOrigPhoneNumber",338],"(",["T_VARIABLE","$request",338],["T_OBJECT_OPERATOR","->",338],["T_STRING","getOrigPhoneNumber",338],"(",")",")",";",["T_WHITESPACE","\n        ",338],["T_VARIABLE","$r",339],["T_OBJECT_OPERATOR","->",339],["T_STRING","setOrigPersonName",339],"(",["T_VARIABLE","$request",339],["T_OBJECT_OPERATOR","->",339],["T_STRING","getOrigPersonName",339],"(",")",")",";",["T_WHITESPACE","\n        ",339],["T_VARIABLE","$r",340],["T_OBJECT_OPERATOR","->",340],["T_STRING","setOrigEmail",340],"(",["T_STRING","Mage",340],["T_DOUBLE_COLON","::",340],["T_STRING","getStoreConfig",340],"(",["T_CONSTANT_ENCAPSED_STRING","'trans_email\/ident_general\/email'",340],",",["T_WHITESPACE"," ",340],["T_VARIABLE","$r",340],["T_OBJECT_OPERATOR","->",340],["T_STRING","getStoreId",340],"(",")",")",")",";",["T_WHITESPACE","\n        ",340],["T_VARIABLE","$r",341],["T_OBJECT_OPERATOR","->",341],["T_STRING","setOrigCity",341],"(",["T_VARIABLE","$request",341],["T_OBJECT_OPERATOR","->",341],["T_STRING","getOrigCity",341],"(",")",")",";",["T_WHITESPACE","\n        ",341],["T_VARIABLE","$r",342],["T_OBJECT_OPERATOR","->",342],["T_STRING","setOrigPostal",342],"(",["T_VARIABLE","$request",342],["T_OBJECT_OPERATOR","->",342],["T_STRING","getOrigPostal",342],"(",")",")",";",["T_WHITESPACE","\n        ",342],["T_VARIABLE","$originStreet1",343],["T_WHITESPACE"," ",343],"=",["T_WHITESPACE"," ",343],["T_STRING","Mage",343],["T_DOUBLE_COLON","::",343],["T_STRING","getStoreConfig",343],"(",["T_STRING","Mage_Shipping_Model_Shipping",343],["T_DOUBLE_COLON","::",343],["T_STRING","XML_PATH_STORE_ADDRESS1",343],",",["T_VARIABLE","$r",343],["T_OBJECT_OPERATOR","->",343],["T_STRING","getStoreId",343],"(",")",")",";",["T_WHITESPACE","\n        ",343],["T_VARIABLE","$originStreet2",344],["T_WHITESPACE"," ",344],"=",["T_WHITESPACE"," ",344],["T_STRING","Mage",344],["T_DOUBLE_COLON","::",344],["T_STRING","getStoreConfig",344],"(",["T_STRING","Mage_Shipping_Model_Shipping",344],["T_DOUBLE_COLON","::",344],["T_STRING","XML_PATH_STORE_ADDRESS2",344],",",["T_WHITESPACE"," ",344],["T_VARIABLE","$r",344],["T_OBJECT_OPERATOR","->",344],["T_STRING","getStoreId",344],"(",")",")",";",["T_WHITESPACE","\n        ",344],["T_VARIABLE","$r",345],["T_OBJECT_OPERATOR","->",345],["T_STRING","setOrigStreet",345],"(",["T_VARIABLE","$request",345],["T_OBJECT_OPERATOR","->",345],["T_STRING","getOrigStreet",345],"(",")",["T_WHITESPACE"," ",345],"?",["T_WHITESPACE"," ",345],["T_VARIABLE","$request",345],["T_OBJECT_OPERATOR","->",345],["T_STRING","getOrigStreet",345],"(",")",["T_WHITESPACE"," ",345],":",["T_WHITESPACE"," ",345],["T_VARIABLE","$originStreet2",345],")",";",["T_WHITESPACE","\n        ",345],["T_VARIABLE","$r",346],["T_OBJECT_OPERATOR","->",346],["T_STRING","setOrigStreetLine2",346],"(",["T_VARIABLE","$request",346],["T_OBJECT_OPERATOR","->",346],["T_STRING","getOrigStreetLine2",346],"(",")",")",";",["T_WHITESPACE","\n        ",346],["T_VARIABLE","$r",347],["T_OBJECT_OPERATOR","->",347],["T_STRING","setDestPhoneNumber",347],"(",["T_VARIABLE","$request",347],["T_OBJECT_OPERATOR","->",347],["T_STRING","getDestPhoneNumber",347],"(",")",")",";",["T_WHITESPACE","\n        ",347],["T_VARIABLE","$r",348],["T_OBJECT_OPERATOR","->",348],["T_STRING","setDestPersonName",348],"(",["T_VARIABLE","$request",348],["T_OBJECT_OPERATOR","->",348],["T_STRING","getDestPersonName",348],"(",")",")",";",["T_WHITESPACE","\n        ",348],["T_VARIABLE","$r",349],["T_OBJECT_OPERATOR","->",349],["T_STRING","setDestCompanyName",349],"(",["T_VARIABLE","$request",349],["T_OBJECT_OPERATOR","->",349],["T_STRING","getDestCompanyName",349],"(",")",")",";",["T_WHITESPACE","\n\n\n        ",349],["T_IF","if",352],["T_WHITESPACE"," ",352],"(",["T_STRING","is_numeric",352],"(",["T_VARIABLE","$request",352],["T_OBJECT_OPERATOR","->",352],["T_STRING","getOrigState",352],"(",")",")",")",["T_WHITESPACE"," ",352],"{",["T_WHITESPACE","\n            ",352],["T_VARIABLE","$r",353],["T_OBJECT_OPERATOR","->",353],["T_STRING","setOrigState",353],"(",["T_STRING","Mage",353],["T_DOUBLE_COLON","::",353],["T_STRING","getModel",353],"(",["T_CONSTANT_ENCAPSED_STRING","'directory\/region'",353],")",["T_OBJECT_OPERATOR","->",353],["T_STRING","load",353],"(",["T_VARIABLE","$request",353],["T_OBJECT_OPERATOR","->",353],["T_STRING","getOrigState",353],"(",")",")",["T_OBJECT_OPERATOR","->",353],["T_STRING","getCode",353],"(",")",")",";",["T_WHITESPACE","\n        ",353],"}",["T_WHITESPACE"," ",354],["T_ELSE","else",354],["T_WHITESPACE"," ",354],"{",["T_WHITESPACE","\n            ",354],["T_VARIABLE","$r",355],["T_OBJECT_OPERATOR","->",355],["T_STRING","setOrigState",355],"(",["T_VARIABLE","$request",355],["T_OBJECT_OPERATOR","->",355],["T_STRING","getOrigState",355],"(",")",")",";",["T_WHITESPACE","\n        ",355],"}",["T_WHITESPACE","\n\n        ",356],["T_IF","if",358],["T_WHITESPACE"," ",358],"(",["T_VARIABLE","$request",358],["T_OBJECT_OPERATOR","->",358],["T_STRING","getDestCountryId",358],"(",")",")",["T_WHITESPACE"," ",358],"{",["T_WHITESPACE","\n            ",358],["T_VARIABLE","$destCountry",359],["T_WHITESPACE"," ",359],"=",["T_WHITESPACE"," ",359],["T_VARIABLE","$request",359],["T_OBJECT_OPERATOR","->",359],["T_STRING","getDestCountryId",359],"(",")",";",["T_WHITESPACE","\n        ",359],"}",["T_WHITESPACE"," ",360],["T_ELSE","else",360],["T_WHITESPACE"," ",360],"{",["T_WHITESPACE","\n            ",360],["T_VARIABLE","$destCountry",361],["T_WHITESPACE"," ",361],"=",["T_WHITESPACE"," ",361],["T_STRING","self",361],["T_DOUBLE_COLON","::",361],["T_STRING","USA_COUNTRY_ID",361],";",["T_WHITESPACE","\n        ",361],"}",["T_WHITESPACE","\n\n        ",362],["T_COMMENT","\/\/for DHL, puero rico state for US will assume as puerto rico country\n",364],["T_WHITESPACE","        ",365],["T_COMMENT","\/\/for puerto rico, dhl will ship as international\n",365],["T_WHITESPACE","        ",366],["T_IF","if",366],["T_WHITESPACE"," ",366],"(",["T_VARIABLE","$destCountry",366],["T_WHITESPACE"," ",366],["T_IS_EQUAL","==",366],["T_WHITESPACE"," ",366],["T_STRING","self",366],["T_DOUBLE_COLON","::",366],["T_STRING","USA_COUNTRY_ID",366],["T_WHITESPACE"," ",366],["T_BOOLEAN_AND","&&",366],["T_WHITESPACE"," ",366],"(",["T_VARIABLE","$request",366],["T_OBJECT_OPERATOR","->",366],["T_STRING","getDestPostcode",366],"(",")",["T_WHITESPACE"," ",366],["T_IS_EQUAL","==",366],["T_WHITESPACE"," ",366],["T_CONSTANT_ENCAPSED_STRING","'00912'",366],["T_WHITESPACE","\n                                                     ",366],["T_BOOLEAN_OR","||",367],["T_WHITESPACE"," ",367],["T_VARIABLE","$request",367],["T_OBJECT_OPERATOR","->",367],["T_STRING","getDestRegionCode",367],"(",")",["T_WHITESPACE"," ",367],["T_IS_EQUAL","==",367],["T_WHITESPACE"," ",367],["T_STRING","self",367],["T_DOUBLE_COLON","::",367],["T_STRING","PUERTORICO_COUNTRY_ID",367],")",["T_WHITESPACE","\n        ",367],")",["T_WHITESPACE"," ",368],"{",["T_WHITESPACE","\n            ",368],["T_VARIABLE","$destCountry",369],["T_WHITESPACE"," ",369],"=",["T_WHITESPACE"," ",369],["T_STRING","self",369],["T_DOUBLE_COLON","::",369],["T_STRING","PUERTORICO_COUNTRY_ID",369],";",["T_WHITESPACE","\n        ",369],"}",["T_WHITESPACE","\n\n        ",370],["T_VARIABLE","$r",372],["T_OBJECT_OPERATOR","->",372],["T_STRING","setDestCountryId",372],"(",["T_VARIABLE","$destCountry",372],")",";",["T_WHITESPACE","\n        ",372],["T_VARIABLE","$r",373],["T_OBJECT_OPERATOR","->",373],["T_STRING","setDestState",373],"(",["T_VARIABLE","$request",373],["T_OBJECT_OPERATOR","->",373],["T_STRING","getDestRegionCode",373],"(",")",")",";",["T_WHITESPACE","\n\n        ",373],["T_VARIABLE","$r",375],["T_OBJECT_OPERATOR","->",375],["T_STRING","setWeight",375],"(",["T_VARIABLE","$shippingWeight",375],")",";",["T_WHITESPACE","\n        ",375],["T_VARIABLE","$r",376],["T_OBJECT_OPERATOR","->",376],["T_STRING","setFreeMethodWeight",376],"(",["T_VARIABLE","$request",376],["T_OBJECT_OPERATOR","->",376],["T_STRING","getFreeMethodWeight",376],"(",")",")",";",["T_WHITESPACE","\n\n        ",376],["T_VARIABLE","$r",378],["T_OBJECT_OPERATOR","->",378],["T_STRING","setOrderShipment",378],"(",["T_VARIABLE","$request",378],["T_OBJECT_OPERATOR","->",378],["T_STRING","getOrderShipment",378],"(",")",")",";",["T_WHITESPACE","\n\n        ",378],["T_IF","if",380],["T_WHITESPACE"," ",380],"(",["T_VARIABLE","$request",380],["T_OBJECT_OPERATOR","->",380],["T_STRING","getPackageId",380],"(",")",")",["T_WHITESPACE"," ",380],"{",["T_WHITESPACE","\n            ",380],["T_VARIABLE","$r",381],["T_OBJECT_OPERATOR","->",381],["T_STRING","setPackageId",381],"(",["T_VARIABLE","$request",381],["T_OBJECT_OPERATOR","->",381],["T_STRING","getPackageId",381],"(",")",")",";",["T_WHITESPACE","\n        ",381],"}",["T_WHITESPACE","\n\n        ",382],["T_VARIABLE","$r",384],["T_OBJECT_OPERATOR","->",384],["T_STRING","setBaseSubtotalInclTax",384],"(",["T_VARIABLE","$request",384],["T_OBJECT_OPERATOR","->",384],["T_STRING","getBaseSubtotalInclTax",384],"(",")",")",";",["T_WHITESPACE","\n\n        ",384],["T_VARIABLE","$this",386],["T_OBJECT_OPERATOR","->",386],["T_STRING","_rawRequest",386],["T_WHITESPACE"," ",386],"=",["T_WHITESPACE"," ",386],["T_VARIABLE","$r",386],";",["T_WHITESPACE","\n        ",386],["T_RETURN","return",387],["T_WHITESPACE"," ",387],["T_VARIABLE","$this",387],";",["T_WHITESPACE","\n    ",387],"}",["T_WHITESPACE","\n\n    ",388],["T_DOC_COMMENT","\/**\n     * Get result of request\n     *\n     * @return mixed\n     *\/",390],["T_WHITESPACE","\n    ",394],["T_PUBLIC","public",395],["T_WHITESPACE"," ",395],["T_FUNCTION","function",395],["T_WHITESPACE"," ",395],["T_STRING","getResult",395],"(",")",["T_WHITESPACE","\n    ",395],"{",["T_WHITESPACE","\n        ",396],["T_RETURN","return",397],["T_WHITESPACE"," ",397],["T_VARIABLE","$this",397],["T_OBJECT_OPERATOR","->",397],["T_STRING","_result",397],";",["T_WHITESPACE","\n    ",397],"}",["T_WHITESPACE","\n\n    ",398],["T_DOC_COMMENT","\/**\n     * Get quotes\n     *\n     * @return Mage_Shipping_Model_Rate_Result\n     *\/",400],["T_WHITESPACE","\n    ",404],["T_PROTECTED","protected",405],["T_WHITESPACE"," ",405],["T_FUNCTION","function",405],["T_WHITESPACE"," ",405],["T_STRING","_getQuotes",405],"(",")",["T_WHITESPACE","\n    ",405],"{",["T_WHITESPACE","\n        ",406],["T_RETURN","return",407],["T_WHITESPACE"," ",407],["T_VARIABLE","$this",407],["T_OBJECT_OPERATOR","->",407],["T_STRING","_getXmlQuotes",407],"(",")",";",["T_WHITESPACE","\n    ",407],"}",["T_WHITESPACE","\n\n    ",408],["T_DOC_COMMENT","\/**\n     * Set free method request\n     *\n     * @param  $freeMethod\n     * @return void\n     *\/",410],["T_WHITESPACE","\n    ",415],["T_PROTECTED","protected",416],["T_WHITESPACE"," ",416],["T_FUNCTION","function",416],["T_WHITESPACE"," ",416],["T_STRING","_setFreeMethodRequest",416],"(",["T_VARIABLE","$freeMethod",416],")",["T_WHITESPACE","\n    ",416],"{",["T_WHITESPACE","\n        ",417],["T_VARIABLE","$r",418],["T_WHITESPACE"," ",418],"=",["T_WHITESPACE"," ",418],["T_VARIABLE","$this",418],["T_OBJECT_OPERATOR","->",418],["T_STRING","_rawRequest",418],";",["T_WHITESPACE","\n\n        ",418],["T_VARIABLE","$r",420],["T_OBJECT_OPERATOR","->",420],["T_STRING","setFreeMethodRequest",420],"(",["T_STRING","true",420],")",";",["T_WHITESPACE","\n        ",420],["T_VARIABLE","$weight",421],["T_WHITESPACE"," ",421],"=",["T_WHITESPACE"," ",421],["T_VARIABLE","$this",421],["T_OBJECT_OPERATOR","->",421],["T_STRING","getTotalNumOfBoxes",421],"(",["T_VARIABLE","$r",421],["T_OBJECT_OPERATOR","->",421],["T_STRING","getFreeMethodWeight",421],"(",")",")",";",["T_WHITESPACE","\n        ",421],["T_VARIABLE","$freeWeight",422],["T_WHITESPACE"," ",422],"=",["T_WHITESPACE"," ",422],["T_STRING","round",422],"(",["T_STRING","max",422],"(",["T_LNUMBER","1",422],",",["T_WHITESPACE"," ",422],["T_VARIABLE","$weight",422],")",",",["T_WHITESPACE"," ",422],["T_LNUMBER","0",422],")",";",["T_WHITESPACE","\n        ",422],["T_VARIABLE","$r",423],["T_OBJECT_OPERATOR","->",423],["T_STRING","setWeight",423],"(",["T_VARIABLE","$freeWeight",423],")",";",["T_WHITESPACE","\n        ",423],["T_VARIABLE","$r",424],["T_OBJECT_OPERATOR","->",424],["T_STRING","setService",424],"(",["T_VARIABLE","$freeMethod",424],")",";",["T_WHITESPACE","\n    ",424],"}",["T_WHITESPACE","\n\n    ",425],["T_DOC_COMMENT","\/**\n     * Get xml quotes\n     *\n     * @return Mage_Core_Model_Abstract|Varien_Object\n     *\/",427],["T_WHITESPACE","\n    ",431],["T_PROTECTED","protected",432],["T_WHITESPACE"," ",432],["T_FUNCTION","function",432],["T_WHITESPACE"," ",432],["T_STRING","_getXmlQuotes",432],"(",")",["T_WHITESPACE","\n    ",432],"{",["T_WHITESPACE","\n        ",433],["T_RETURN","return",434],["T_WHITESPACE"," ",434],["T_VARIABLE","$this",434],["T_OBJECT_OPERATOR","->",434],["T_STRING","_doRequest",434],"(",")",";",["T_WHITESPACE","\n    ",434],"}",["T_WHITESPACE","\n\n    ",435],["T_DOC_COMMENT","\/**\n     * Do rate request and handle errors\n     *\n     * @return Mage_Shipping_Model_Rate_Result|Varien_Object\n     *\/",437],["T_WHITESPACE","\n    ",441],["T_PROTECTED","protected",442],["T_WHITESPACE"," ",442],["T_FUNCTION","function",442],["T_WHITESPACE"," ",442],["T_STRING","_doRequest",442],"(",")",["T_WHITESPACE","\n    ",442],"{",["T_WHITESPACE","\n        ",443],["T_VARIABLE","$r",444],["T_WHITESPACE"," ",444],"=",["T_WHITESPACE"," ",444],["T_VARIABLE","$this",444],["T_OBJECT_OPERATOR","->",444],["T_STRING","_rawRequest",444],";",["T_WHITESPACE","\n\n        ",444],["T_VARIABLE","$xml",446],["T_WHITESPACE"," ",446],"=",["T_WHITESPACE"," ",446],["T_NEW","new",446],["T_WHITESPACE"," ",446],["T_STRING","SimpleXMLElement",446],"(",["T_CONSTANT_ENCAPSED_STRING","'<?xml version = \"1.0\" encoding = \"UTF-8\"?><eCommerce\/>'",446],")",";",["T_WHITESPACE","\n        ",446],["T_VARIABLE","$xml",447],["T_OBJECT_OPERATOR","->",447],["T_STRING","addAttribute",447],"(",["T_CONSTANT_ENCAPSED_STRING","'action'",447],",",["T_WHITESPACE"," ",447],["T_CONSTANT_ENCAPSED_STRING","'Request'",447],")",";",["T_WHITESPACE","\n        ",447],["T_VARIABLE","$xml",448],["T_OBJECT_OPERATOR","->",448],["T_STRING","addAttribute",448],"(",["T_CONSTANT_ENCAPSED_STRING","'version'",448],",",["T_WHITESPACE"," ",448],["T_CONSTANT_ENCAPSED_STRING","'1.1'",448],")",";",["T_WHITESPACE","\n\n        ",448],["T_VARIABLE","$requestor",450],["T_WHITESPACE"," ",450],"=",["T_WHITESPACE"," ",450],["T_VARIABLE","$xml",450],["T_OBJECT_OPERATOR","->",450],["T_STRING","addChild",450],"(",["T_CONSTANT_ENCAPSED_STRING","'Requestor'",450],")",";",["T_WHITESPACE","\n        ",450],["T_VARIABLE","$requestor",451],["T_OBJECT_OPERATOR","->",451],["T_STRING","addChild",451],"(",["T_CONSTANT_ENCAPSED_STRING","'ID'",451],",",["T_WHITESPACE"," ",451],["T_VARIABLE","$r",451],["T_OBJECT_OPERATOR","->",451],["T_STRING","getId",451],"(",")",")",";",["T_WHITESPACE","\n        ",451],["T_VARIABLE","$requestor",452],["T_OBJECT_OPERATOR","->",452],["T_STRING","addChild",452],"(",["T_CONSTANT_ENCAPSED_STRING","'Password'",452],",",["T_WHITESPACE"," ",452],["T_VARIABLE","$r",452],["T_OBJECT_OPERATOR","->",452],["T_STRING","getPassword",452],"(",")",")",";",["T_WHITESPACE","\n\n        ",452],["T_VARIABLE","$methods",454],["T_WHITESPACE"," ",454],"=",["T_WHITESPACE"," ",454],["T_STRING","explode",454],"(",["T_CONSTANT_ENCAPSED_STRING","','",454],",",["T_WHITESPACE"," ",454],["T_VARIABLE","$this",454],["T_OBJECT_OPERATOR","->",454],["T_STRING","getConfigData",454],"(",["T_CONSTANT_ENCAPSED_STRING","'allowed_methods'",454],")",")",";",["T_WHITESPACE","\n        ",454],["T_VARIABLE","$internationcode",455],["T_WHITESPACE"," ",455],"=",["T_WHITESPACE"," ",455],["T_VARIABLE","$this",455],["T_OBJECT_OPERATOR","->",455],["T_STRING","getCode",455],"(",["T_CONSTANT_ENCAPSED_STRING","'international_searvice'",455],")",";",["T_WHITESPACE","\n        ",455],["T_VARIABLE","$hasShipCode",456],["T_WHITESPACE"," ",456],"=",["T_WHITESPACE"," ",456],["T_STRING","false",456],";",["T_WHITESPACE","\n\n        ",456],["T_VARIABLE","$shipDate",458],["T_WHITESPACE"," ",458],"=",["T_WHITESPACE"," ",458],["T_VARIABLE","$this",458],["T_OBJECT_OPERATOR","->",458],["T_STRING","_getShipDate",458],"(",")",";",["T_WHITESPACE","\n\n        ",458],["T_IF","if",460],["T_WHITESPACE"," ",460],"(",["T_VARIABLE","$r",460],["T_OBJECT_OPERATOR","->",460],["T_STRING","hasService",460],"(",")",["T_WHITESPACE"," ",460],["T_BOOLEAN_AND","&&",460],["T_WHITESPACE"," ",460],["T_VARIABLE","$r",460],["T_OBJECT_OPERATOR","->",460],["T_STRING","getFreeMethodRequest",460],"(",")",")",["T_WHITESPACE"," ",460],"{",["T_WHITESPACE","\n            ",460],["T_IF","if",461],["T_WHITESPACE"," ",461],"(",["T_VARIABLE","$r",461],["T_OBJECT_OPERATOR","->",461],["T_STRING","getDestCountryId",461],"(",")",["T_WHITESPACE"," ",461],["T_IS_EQUAL","==",461],["T_WHITESPACE"," ",461],["T_STRING","self",461],["T_DOUBLE_COLON","::",461],["T_STRING","USA_COUNTRY_ID",461],")",["T_WHITESPACE"," ",461],"{",["T_WHITESPACE","\n                ",461],["T_VARIABLE","$shipment",462],["T_WHITESPACE"," ",462],"=",["T_WHITESPACE"," ",462],["T_VARIABLE","$xml",462],["T_OBJECT_OPERATOR","->",462],["T_STRING","addChild",462],"(",["T_CONSTANT_ENCAPSED_STRING","'Shipment'",462],")",";",["T_WHITESPACE","\n                ",462],["T_VARIABLE","$shipKey",463],["T_WHITESPACE"," ",463],"=",["T_WHITESPACE"," ",463],["T_VARIABLE","$r",463],["T_OBJECT_OPERATOR","->",463],["T_STRING","getShippingKey",463],"(",")",";",["T_WHITESPACE","\n                ",463],["T_VARIABLE","$r",464],["T_OBJECT_OPERATOR","->",464],["T_STRING","setShipDate",464],"(",["T_VARIABLE","$shipDate",464],")",";",["T_WHITESPACE","\n            ",464],"}",["T_WHITESPACE"," ",465],["T_ELSE","else",465],["T_WHITESPACE"," ",465],"{",["T_WHITESPACE","\n                ",465],["T_VARIABLE","$shipment",466],["T_WHITESPACE"," ",466],"=",["T_WHITESPACE"," ",466],["T_VARIABLE","$xml",466],["T_OBJECT_OPERATOR","->",466],["T_STRING","addChild",466],"(",["T_CONSTANT_ENCAPSED_STRING","'IntlShipment'",466],")",";",["T_WHITESPACE","\n                ",466],["T_VARIABLE","$shipKey",467],["T_WHITESPACE"," ",467],"=",["T_WHITESPACE"," ",467],["T_VARIABLE","$r",467],["T_OBJECT_OPERATOR","->",467],["T_STRING","getShippingIntlKey",467],"(",")",";",["T_WHITESPACE","\n                ",467],["T_VARIABLE","$r",468],["T_OBJECT_OPERATOR","->",468],["T_STRING","setShipDate",468],"(",["T_VARIABLE","$this",468],["T_OBJECT_OPERATOR","->",468],["T_STRING","_getShipDate",468],"(",["T_STRING","false",468],")",")",";",["T_WHITESPACE","\n                ",468],["T_COMMENT","\/*\n                * For internation shippingment customsvalue must be posted\n                *\/",469],["T_WHITESPACE","\n                ",471],["T_VARIABLE","$shippingDuty",472],["T_WHITESPACE"," ",472],"=",["T_WHITESPACE"," ",472],["T_VARIABLE","$shipment",472],["T_OBJECT_OPERATOR","->",472],["T_STRING","addChild",472],"(",["T_CONSTANT_ENCAPSED_STRING","'Dutiable'",472],")",";",["T_WHITESPACE","\n                ",472],["T_VARIABLE","$shippingDuty",473],["T_OBJECT_OPERATOR","->",473],["T_STRING","addChild",473],"(",["T_CONSTANT_ENCAPSED_STRING","'DutiableFlag'",473],",",["T_WHITESPACE"," ",473],"(",["T_VARIABLE","$r",473],["T_OBJECT_OPERATOR","->",473],["T_STRING","getDutiable",473],"(",")",["T_WHITESPACE"," ",473],"?",["T_WHITESPACE"," ",473],["T_CONSTANT_ENCAPSED_STRING","'Y'",473],["T_WHITESPACE"," ",473],":",["T_WHITESPACE"," ",473],["T_CONSTANT_ENCAPSED_STRING","'N'",473],")",")",";",["T_WHITESPACE","\n                ",473],["T_VARIABLE","$shippingDuty",474],["T_OBJECT_OPERATOR","->",474],["T_STRING","addChild",474],"(",["T_CONSTANT_ENCAPSED_STRING","'CustomsValue'",474],",",["T_WHITESPACE"," ",474],["T_VARIABLE","$r",474],["T_OBJECT_OPERATOR","->",474],["T_STRING","getValue",474],"(",")",")",";",["T_WHITESPACE","\n                ",474],["T_VARIABLE","$shippingDuty",475],["T_OBJECT_OPERATOR","->",475],["T_STRING","addChild",475],"(",["T_CONSTANT_ENCAPSED_STRING","'IsSEDReqd'",475],",",["T_WHITESPACE"," ",475],["T_CONSTANT_ENCAPSED_STRING","'N'",475],")",";",["T_WHITESPACE","\n            ",475],"}",["T_WHITESPACE","\n            ",476],["T_VARIABLE","$hasShipCode",477],["T_WHITESPACE"," ",477],"=",["T_WHITESPACE"," ",477],["T_STRING","true",477],";",["T_WHITESPACE","\n            ",477],["T_VARIABLE","$this",478],["T_OBJECT_OPERATOR","->",478],["T_STRING","_createShipmentXml",478],"(",["T_VARIABLE","$shipment",478],",",["T_WHITESPACE"," ",478],["T_VARIABLE","$shipKey",478],")",";",["T_WHITESPACE","\n        ",478],"}",["T_WHITESPACE"," ",479],["T_ELSE","else",479],["T_WHITESPACE"," ",479],"{",["T_WHITESPACE","\n            ",479],["T_IF","if",480],["T_WHITESPACE"," ",480],"(",["T_VARIABLE","$r",480],["T_OBJECT_OPERATOR","->",480],["T_STRING","getAction",480],"(",")",["T_WHITESPACE"," ",480],["T_IS_EQUAL","==",480],["T_WHITESPACE"," ",480],["T_CONSTANT_ENCAPSED_STRING","'GenerateLabel'",480],")",["T_WHITESPACE"," ",480],"{",["T_WHITESPACE","\n                ",480],["T_VARIABLE","$methods",481],["T_WHITESPACE"," ",481],"=",["T_WHITESPACE"," ",481],["T_ARRAY","array",481],"(",["T_VARIABLE","$r",481],["T_OBJECT_OPERATOR","->",481],["T_STRING","getService",481],"(",")",")",";",["T_WHITESPACE","\n            ",481],"}",["T_WHITESPACE","\n\n            ",482],["T_FOREACH","foreach",484],["T_WHITESPACE"," ",484],"(",["T_VARIABLE","$methods",484],["T_WHITESPACE"," ",484],["T_AS","as",484],["T_WHITESPACE"," ",484],["T_VARIABLE","$method",484],")",["T_WHITESPACE"," ",484],"{",["T_WHITESPACE","\n                ",484],["T_VARIABLE","$shipment",485],["T_WHITESPACE"," ",485],"=",["T_WHITESPACE"," ",485],["T_STRING","false",485],";",["T_WHITESPACE","\n                ",485],["T_IF","if",486],["T_WHITESPACE"," ",486],"(",["T_STRING","in_array",486],"(",["T_VARIABLE","$method",486],",",["T_WHITESPACE"," ",486],["T_STRING","array_keys",486],"(",["T_VARIABLE","$this",486],["T_OBJECT_OPERATOR","->",486],["T_STRING","getCode",486],"(",["T_CONSTANT_ENCAPSED_STRING","'special_express'",486],")",")",")",")",["T_WHITESPACE"," ",486],"{",["T_WHITESPACE","\n                    ",486],["T_VARIABLE","$r",487],["T_OBJECT_OPERATOR","->",487],["T_STRING","setService",487],"(",["T_CONSTANT_ENCAPSED_STRING","'E'",487],")",";",["T_WHITESPACE","\n                    ",487],["T_VARIABLE","$r",488],["T_OBJECT_OPERATOR","->",488],["T_STRING","setExtendedService",488],"(",["T_VARIABLE","$this",488],["T_OBJECT_OPERATOR","->",488],["T_STRING","getCode",488],"(",["T_CONSTANT_ENCAPSED_STRING","'special_express'",488],",",["T_WHITESPACE"," ",488],["T_VARIABLE","$method",488],")",")",";",["T_WHITESPACE","\n                ",488],"}",["T_WHITESPACE"," ",489],["T_ELSE","else",489],["T_WHITESPACE"," ",489],"{",["T_WHITESPACE","\n                    ",489],["T_VARIABLE","$r",490],["T_OBJECT_OPERATOR","->",490],["T_STRING","setService",490],"(",["T_VARIABLE","$method",490],")",";",["T_WHITESPACE","\n                    ",490],["T_VARIABLE","$r",491],["T_OBJECT_OPERATOR","->",491],["T_STRING","setExtendedService",491],"(",["T_STRING","null",491],")",";",["T_WHITESPACE","\n                ",491],"}",["T_WHITESPACE","\n                ",492],["T_IF","if",493],["T_WHITESPACE"," ",493],"(",["T_VARIABLE","$r",493],["T_OBJECT_OPERATOR","->",493],["T_STRING","getDestCountryId",493],"(",")",["T_WHITESPACE"," ",493],["T_IS_EQUAL","==",493],["T_WHITESPACE"," ",493],["T_STRING","self",493],["T_DOUBLE_COLON","::",493],["T_STRING","USA_COUNTRY_ID",493],["T_WHITESPACE"," ",493],["T_BOOLEAN_AND","&&",493],["T_WHITESPACE"," ",493],["T_VARIABLE","$method",493],["T_WHITESPACE"," ",493],["T_IS_NOT_EQUAL","!=",493],["T_WHITESPACE"," ",493],["T_VARIABLE","$internationcode",493],")",["T_WHITESPACE"," ",493],"{",["T_WHITESPACE","\n                    ",493],["T_VARIABLE","$shipment",494],["T_WHITESPACE"," ",494],"=",["T_WHITESPACE"," ",494],["T_VARIABLE","$xml",494],["T_OBJECT_OPERATOR","->",494],["T_STRING","addChild",494],"(",["T_CONSTANT_ENCAPSED_STRING","'Shipment'",494],")",";",["T_WHITESPACE","\n                    ",494],["T_VARIABLE","$shipKey",495],["T_WHITESPACE"," ",495],"=",["T_WHITESPACE"," ",495],["T_VARIABLE","$r",495],["T_OBJECT_OPERATOR","->",495],["T_STRING","getShippingKey",495],"(",")",";",["T_WHITESPACE","\n                    ",495],["T_VARIABLE","$r",496],["T_OBJECT_OPERATOR","->",496],["T_STRING","setShipDate",496],"(",["T_VARIABLE","$shipDate",496],")",";",["T_WHITESPACE","\n                ",496],"}",["T_WHITESPACE"," ",497],["T_ELSEIF","elseif",497],["T_WHITESPACE"," ",497],"(",["T_VARIABLE","$r",497],["T_OBJECT_OPERATOR","->",497],["T_STRING","getDestCountryId",497],"(",")",["T_WHITESPACE"," ",497],["T_IS_NOT_EQUAL","!=",497],["T_WHITESPACE"," ",497],["T_STRING","self",497],["T_DOUBLE_COLON","::",497],["T_STRING","USA_COUNTRY_ID",497],["T_WHITESPACE"," ",497],["T_BOOLEAN_AND","&&",497],["T_WHITESPACE"," ",497],["T_VARIABLE","$method",497],["T_WHITESPACE"," ",497],["T_IS_EQUAL","==",497],["T_WHITESPACE"," ",497],["T_VARIABLE","$internationcode",497],")",["T_WHITESPACE"," ",497],"{",["T_WHITESPACE","\n                    ",497],["T_VARIABLE","$shipment",498],["T_WHITESPACE"," ",498],"=",["T_WHITESPACE"," ",498],["T_VARIABLE","$xml",498],["T_OBJECT_OPERATOR","->",498],["T_STRING","addChild",498],"(",["T_CONSTANT_ENCAPSED_STRING","'IntlShipment'",498],")",";",["T_WHITESPACE","\n                    ",498],["T_VARIABLE","$shipKey",499],["T_WHITESPACE"," ",499],"=",["T_WHITESPACE"," ",499],["T_VARIABLE","$r",499],["T_OBJECT_OPERATOR","->",499],["T_STRING","getShippingIntlKey",499],"(",")",";",["T_WHITESPACE","\n                    ",499],["T_IF","if",500],["T_WHITESPACE"," ",500],"(",["T_VARIABLE","$r",500],["T_OBJECT_OPERATOR","->",500],["T_STRING","getCustomsValue",500],"(",")",["T_WHITESPACE"," ",500],["T_IS_NOT_EQUAL","!=",500],["T_WHITESPACE"," ",500],["T_STRING","null",500],["T_WHITESPACE"," ",500],["T_BOOLEAN_AND","&&",500],["T_WHITESPACE"," ",500],["T_VARIABLE","$r",500],["T_OBJECT_OPERATOR","->",500],["T_STRING","getCustomsValue",500],"(",")",["T_WHITESPACE"," ",500],["T_IS_NOT_EQUAL","!=",500],["T_WHITESPACE"," ",500],["T_CONSTANT_ENCAPSED_STRING","''",500],")",["T_WHITESPACE"," ",500],"{",["T_WHITESPACE","\n                        ",500],["T_VARIABLE","$customsValue",501],["T_WHITESPACE"," ",501],"=",["T_WHITESPACE","  ",501],["T_VARIABLE","$r",501],["T_OBJECT_OPERATOR","->",501],["T_STRING","getCustomsValue",501],"(",")",";",["T_WHITESPACE","\n                    ",501],"}",["T_WHITESPACE"," ",502],["T_ELSE","else",502],["T_WHITESPACE"," ",502],"{",["T_WHITESPACE","\n                        ",502],["T_VARIABLE","$customsValue",503],["T_WHITESPACE"," ",503],"=",["T_WHITESPACE","  ",503],["T_VARIABLE","$r",503],["T_OBJECT_OPERATOR","->",503],["T_STRING","getValue",503],"(",")",";",["T_WHITESPACE","\n                    ",503],"}",["T_WHITESPACE","\n\n                    ",504],["T_VARIABLE","$r",506],["T_OBJECT_OPERATOR","->",506],["T_STRING","setShipDate",506],"(",["T_VARIABLE","$this",506],["T_OBJECT_OPERATOR","->",506],["T_STRING","_getShipDate",506],"(",["T_STRING","false",506],")",")",";",["T_WHITESPACE","\n\n                    ",506],["T_COMMENT","\/*\n                    * For internation shippingment customsvalue must be posted\n                    *\/",508],["T_WHITESPACE","\n                    ",510],["T_VARIABLE","$shippingDuty",511],["T_WHITESPACE"," ",511],"=",["T_WHITESPACE"," ",511],["T_VARIABLE","$shipment",511],["T_OBJECT_OPERATOR","->",511],["T_STRING","addChild",511],"(",["T_CONSTANT_ENCAPSED_STRING","'Dutiable'",511],")",";",["T_WHITESPACE","\n                    ",511],["T_VARIABLE","$shippingDuty",512],["T_OBJECT_OPERATOR","->",512],["T_STRING","addChild",512],"(",["T_CONSTANT_ENCAPSED_STRING","'DutiableFlag'",512],",",["T_WHITESPACE"," ",512],"(",["T_VARIABLE","$r",512],["T_OBJECT_OPERATOR","->",512],["T_STRING","getDutiable",512],"(",")",["T_WHITESPACE"," ",512],"?",["T_WHITESPACE"," ",512],["T_CONSTANT_ENCAPSED_STRING","'Y'",512],["T_WHITESPACE"," ",512],":",["T_WHITESPACE"," ",512],["T_CONSTANT_ENCAPSED_STRING","'N'",512],")",")",";",["T_WHITESPACE","\n                    ",512],["T_VARIABLE","$shippingDuty",513],["T_OBJECT_OPERATOR","->",513],["T_STRING","addChild",513],"(",["T_CONSTANT_ENCAPSED_STRING","'CustomsValue'",513],",",["T_WHITESPACE"," ",513],["T_VARIABLE","$customsValue",513],")",";",["T_WHITESPACE","\n                    ",513],["T_VARIABLE","$shippingDuty",514],["T_OBJECT_OPERATOR","->",514],["T_STRING","addChild",514],"(",["T_CONSTANT_ENCAPSED_STRING","'IsSEDReqd'",514],",",["T_WHITESPACE"," ",514],["T_CONSTANT_ENCAPSED_STRING","'N'",514],")",";",["T_WHITESPACE","\n                ",514],"}",["T_WHITESPACE","\n                ",515],["T_IF","if",516],["T_WHITESPACE"," ",516],"(",["T_VARIABLE","$shipment",516],["T_WHITESPACE"," ",516],["T_IS_NOT_IDENTICAL","!==",516],["T_WHITESPACE"," ",516],["T_STRING","false",516],")",["T_WHITESPACE"," ",516],"{",["T_WHITESPACE","\n                    ",516],["T_VARIABLE","$hasShipCode",517],["T_WHITESPACE"," ",517],"=",["T_WHITESPACE"," ",517],["T_STRING","true",517],";",["T_WHITESPACE","\n                    ",517],["T_VARIABLE","$this",518],["T_OBJECT_OPERATOR","->",518],["T_STRING","_createShipmentXml",518],"(",["T_VARIABLE","$shipment",518],",",["T_WHITESPACE"," ",518],["T_VARIABLE","$shipKey",518],")",";",["T_WHITESPACE","\n                ",518],"}",["T_WHITESPACE","\n            ",519],"}",["T_WHITESPACE","\n        ",520],"}",["T_WHITESPACE","\n\n        ",521],["T_IF","if",523],["T_WHITESPACE"," ",523],"(","!",["T_VARIABLE","$hasShipCode",523],")",["T_WHITESPACE"," ",523],"{",["T_WHITESPACE","\n            ",523],["T_VARIABLE","$this",524],["T_OBJECT_OPERATOR","->",524],["T_STRING","_errors",524],"[","]",["T_WHITESPACE"," ",524],"=",["T_WHITESPACE"," ",524],["T_STRING","Mage",524],["T_DOUBLE_COLON","::",524],["T_STRING","helper",524],"(",["T_CONSTANT_ENCAPSED_STRING","'usa'",524],")",["T_OBJECT_OPERATOR","->",524],["T_STRING","__",524],"(",["T_CONSTANT_ENCAPSED_STRING","'There is no available method for selected shipping address.'",524],")",";",["T_WHITESPACE","\n            ",524],["T_RETURN","return",525],";",["T_WHITESPACE","\n        ",525],"}",["T_WHITESPACE","\n\n        ",526],["T_VARIABLE","$request",528],["T_WHITESPACE"," ",528],"=",["T_WHITESPACE"," ",528],["T_VARIABLE","$xml",528],["T_OBJECT_OPERATOR","->",528],["T_STRING","asXML",528],"(",")",";",["T_WHITESPACE","\n        ",528],["T_VARIABLE","$request",529],["T_WHITESPACE"," ",529],"=",["T_WHITESPACE"," ",529],["T_STRING","utf8_encode",529],"(",["T_VARIABLE","$request",529],")",";",["T_WHITESPACE","\n        ",529],["T_VARIABLE","$responseBody",530],["T_WHITESPACE"," ",530],"=",["T_WHITESPACE"," ",530],["T_VARIABLE","$this",530],["T_OBJECT_OPERATOR","->",530],["T_STRING","_getCachedQuotes",530],"(",["T_VARIABLE","$request",530],")",";",["T_WHITESPACE","\n        ",530],["T_IF","if",531],["T_WHITESPACE"," ",531],"(",["T_VARIABLE","$responseBody",531],["T_WHITESPACE"," ",531],["T_IS_IDENTICAL","===",531],["T_WHITESPACE"," ",531],["T_STRING","null",531],")",["T_WHITESPACE"," ",531],"{",["T_WHITESPACE","\n            ",531],["T_VARIABLE","$debugData",532],["T_WHITESPACE"," ",532],"=",["T_WHITESPACE"," ",532],["T_ARRAY","array",532],"(",["T_CONSTANT_ENCAPSED_STRING","'request'",532],["T_WHITESPACE"," ",532],["T_DOUBLE_ARROW","=>",532],["T_WHITESPACE"," ",532],["T_VARIABLE","$request",532],")",";",["T_WHITESPACE","\n            ",532],["T_TRY","try",533],["T_WHITESPACE"," ",533],"{",["T_WHITESPACE","\n                ",533],["T_VARIABLE","$url",534],["T_WHITESPACE"," ",534],"=",["T_WHITESPACE"," ",534],["T_VARIABLE","$this",534],["T_OBJECT_OPERATOR","->",534],["T_STRING","getConfigData",534],"(",["T_CONSTANT_ENCAPSED_STRING","'gateway_url'",534],")",";",["T_WHITESPACE","\n                ",534],["T_IF","if",535],["T_WHITESPACE"," ",535],"(","!",["T_VARIABLE","$url",535],")",["T_WHITESPACE"," ",535],"{",["T_WHITESPACE","\n                    ",535],["T_VARIABLE","$url",536],["T_WHITESPACE"," ",536],"=",["T_WHITESPACE"," ",536],["T_VARIABLE","$this",536],["T_OBJECT_OPERATOR","->",536],["T_STRING","_defaultGatewayUrl",536],";",["T_WHITESPACE","\n                ",536],"}",["T_WHITESPACE","\n                ",537],["T_VARIABLE","$ch",538],["T_WHITESPACE"," ",538],"=",["T_WHITESPACE"," ",538],["T_STRING","curl_init",538],"(",")",";",["T_WHITESPACE","\n                ",538],["T_STRING","curl_setopt",539],"(",["T_VARIABLE","$ch",539],",",["T_WHITESPACE"," ",539],["T_STRING","CURLOPT_RETURNTRANSFER",539],",",["T_WHITESPACE"," ",539],["T_LNUMBER","1",539],")",";",["T_WHITESPACE","\n                ",539],["T_STRING","curl_setopt",540],"(",["T_VARIABLE","$ch",540],",",["T_WHITESPACE"," ",540],["T_STRING","CURLOPT_URL",540],",",["T_WHITESPACE"," ",540],["T_VARIABLE","$url",540],")",";",["T_WHITESPACE","\n                ",540],["T_STRING","curl_setopt",541],"(",["T_VARIABLE","$ch",541],",",["T_WHITESPACE"," ",541],["T_STRING","CURLOPT_SSL_VERIFYPEER",541],",",["T_WHITESPACE"," ",541],["T_VARIABLE","$this",541],["T_OBJECT_OPERATOR","->",541],["T_STRING","getConfigFlag",541],"(",["T_CONSTANT_ENCAPSED_STRING","'verify_peer'",541],")",")",";",["T_WHITESPACE","\n                ",541],["T_STRING","curl_setopt",542],"(",["T_VARIABLE","$ch",542],",",["T_WHITESPACE"," ",542],["T_STRING","CURLOPT_SSL_VERIFYHOST",542],",",["T_WHITESPACE"," ",542],["T_LNUMBER","2",542],")",";",["T_WHITESPACE","\n                ",542],["T_STRING","curl_setopt",543],"(",["T_VARIABLE","$ch",543],",",["T_WHITESPACE"," ",543],["T_STRING","CURLOPT_POSTFIELDS",543],",",["T_WHITESPACE"," ",543],["T_VARIABLE","$request",543],")",";",["T_WHITESPACE","\n                ",543],["T_VARIABLE","$responseBody",544],["T_WHITESPACE"," ",544],"=",["T_WHITESPACE"," ",544],["T_STRING","curl_exec",544],"(",["T_VARIABLE","$ch",544],")",";",["T_WHITESPACE","\n                ",544],["T_STRING","curl_close",545],"(",["T_VARIABLE","$ch",545],")",";",["T_WHITESPACE","\n\n                ",545],["T_VARIABLE","$debugData",547],"[",["T_CONSTANT_ENCAPSED_STRING","'result'",547],"]",["T_WHITESPACE"," ",547],"=",["T_WHITESPACE"," ",547],["T_VARIABLE","$responseBody",547],";",["T_WHITESPACE","\n                ",547],["T_VARIABLE","$this",548],["T_OBJECT_OPERATOR","->",548],["T_STRING","_setCachedQuotes",548],"(",["T_VARIABLE","$request",548],",",["T_WHITESPACE"," ",548],["T_VARIABLE","$responseBody",548],")",";",["T_WHITESPACE","\n            ",548],"}",["T_WHITESPACE","\n            ",549],["T_CATCH","catch",550],["T_WHITESPACE"," ",550],"(",["T_STRING","Exception",550],["T_WHITESPACE"," ",550],["T_VARIABLE","$e",550],")",["T_WHITESPACE"," ",550],"{",["T_WHITESPACE","\n                ",550],["T_VARIABLE","$debugData",551],"[",["T_CONSTANT_ENCAPSED_STRING","'result'",551],"]",["T_WHITESPACE"," ",551],"=",["T_WHITESPACE"," ",551],["T_ARRAY","array",551],"(",["T_CONSTANT_ENCAPSED_STRING","'error'",551],["T_WHITESPACE"," ",551],["T_DOUBLE_ARROW","=>",551],["T_WHITESPACE"," ",551],["T_VARIABLE","$e",551],["T_OBJECT_OPERATOR","->",551],["T_STRING","getMessage",551],"(",")",",",["T_WHITESPACE"," ",551],["T_CONSTANT_ENCAPSED_STRING","'code'",551],["T_WHITESPACE"," ",551],["T_DOUBLE_ARROW","=>",551],["T_WHITESPACE"," ",551],["T_VARIABLE","$e",551],["T_OBJECT_OPERATOR","->",551],["T_STRING","getCode",551],"(",")",")",";",["T_WHITESPACE","\n                ",551],["T_VARIABLE","$responseBody",552],["T_WHITESPACE"," ",552],"=",["T_WHITESPACE"," ",552],["T_CONSTANT_ENCAPSED_STRING","''",552],";",["T_WHITESPACE","\n            ",552],"}",["T_WHITESPACE","\n            ",553],["T_VARIABLE","$this",554],["T_OBJECT_OPERATOR","->",554],["T_STRING","_debug",554],"(",["T_VARIABLE","$debugData",554],")",";",["T_WHITESPACE","\n        ",554],"}",["T_WHITESPACE","\n\n        ",555],["T_RETURN","return",557],["T_WHITESPACE"," ",557],["T_VARIABLE","$this",557],["T_OBJECT_OPERATOR","->",557],["T_STRING","_parseXmlResponse",557],"(",["T_VARIABLE","$responseBody",557],")",";",["T_WHITESPACE","\n    ",557],"}",["T_WHITESPACE","\n\n    ",558],["T_DOC_COMMENT","\/**\n     * Create shipment xml\n     *\n     * @param  $shipment\n     * @param  $shipKey\n     * @return void\n     *\/",560],["T_WHITESPACE","\n    ",566],["T_PROTECTED","protected",567],["T_WHITESPACE"," ",567],["T_FUNCTION","function",567],["T_WHITESPACE"," ",567],["T_STRING","_createShipmentXml",567],"(",["T_VARIABLE","$shipment",567],",",["T_WHITESPACE"," ",567],["T_VARIABLE","$shipKey",567],")",["T_WHITESPACE","\n    ",567],"{",["T_WHITESPACE","\n        ",568],["T_VARIABLE","$r",569],["T_WHITESPACE"," ",569],"=",["T_WHITESPACE"," ",569],["T_VARIABLE","$this",569],["T_OBJECT_OPERATOR","->",569],["T_STRING","_rawRequest",569],";",["T_WHITESPACE","\n\n        ",569],["T_VARIABLE","$store",571],["T_WHITESPACE"," ",571],"=",["T_WHITESPACE"," ",571],["T_STRING","Mage",571],["T_DOUBLE_COLON","::",571],["T_STRING","app",571],"(",")",["T_OBJECT_OPERATOR","->",571],["T_STRING","getStore",571],"(",["T_VARIABLE","$r",571],["T_OBJECT_OPERATOR","->",571],["T_STRING","getStoreId",571],"(",")",")",";",["T_WHITESPACE","\n\n        ",571],["T_VARIABLE","$_haz",573],["T_WHITESPACE"," ",573],"=",["T_WHITESPACE"," ",573],["T_VARIABLE","$this",573],["T_OBJECT_OPERATOR","->",573],["T_STRING","getConfigFlag",573],"(",["T_CONSTANT_ENCAPSED_STRING","'hazardous_materials'",573],")",";",["T_WHITESPACE","\n\n        ",573],["T_VARIABLE","$_subtotal",575],["T_WHITESPACE"," ",575],"=",["T_WHITESPACE"," ",575],["T_VARIABLE","$r",575],["T_OBJECT_OPERATOR","->",575],["T_STRING","getValue",575],"(",")",";",["T_WHITESPACE","\n        ",575],["T_VARIABLE","$_subtotalWithDiscount",576],["T_WHITESPACE"," ",576],"=",["T_WHITESPACE"," ",576],["T_VARIABLE","$r",576],["T_OBJECT_OPERATOR","->",576],["T_STRING","getValueWithDiscount",576],"(",")",";",["T_WHITESPACE","\n\n        ",576],["T_VARIABLE","$_width",578],["T_WHITESPACE"," ",578],"=",["T_WHITESPACE"," ",578],["T_STRING","max",578],"(",["T_LNUMBER","0",578],",",["T_WHITESPACE"," ",578],["T_DOUBLE_CAST","(double)",578],["T_VARIABLE","$this",578],["T_OBJECT_OPERATOR","->",578],["T_STRING","getConfigData",578],"(",["T_CONSTANT_ENCAPSED_STRING","'default_width'",578],")",")",";",["T_WHITESPACE","\n        ",578],["T_VARIABLE","$_height",579],["T_WHITESPACE"," ",579],"=",["T_WHITESPACE"," ",579],["T_STRING","max",579],"(",["T_LNUMBER","0",579],",",["T_WHITESPACE"," ",579],["T_DOUBLE_CAST","(double)",579],["T_VARIABLE","$this",579],["T_OBJECT_OPERATOR","->",579],["T_STRING","getConfigData",579],"(",["T_CONSTANT_ENCAPSED_STRING","'default_height'",579],")",")",";",["T_WHITESPACE","\n        ",579],["T_VARIABLE","$_length",580],["T_WHITESPACE"," ",580],"=",["T_WHITESPACE"," ",580],["T_STRING","max",580],"(",["T_LNUMBER","0",580],",",["T_WHITESPACE"," ",580],["T_DOUBLE_CAST","(double)",580],["T_VARIABLE","$this",580],["T_OBJECT_OPERATOR","->",580],["T_STRING","getConfigData",580],"(",["T_CONSTANT_ENCAPSED_STRING","'default_length'",580],")",")",";",["T_WHITESPACE","\n\n        ",580],["T_VARIABLE","$packageParams",582],["T_WHITESPACE"," ",582],"=",["T_WHITESPACE"," ",582],["T_VARIABLE","$r",582],["T_OBJECT_OPERATOR","->",582],["T_STRING","getPackageParams",582],"(",")",";",["T_WHITESPACE","\n        ",582],["T_IF","if",583],["T_WHITESPACE"," ",583],"(",["T_VARIABLE","$packageParams",583],")",["T_WHITESPACE"," ",583],"{",["T_WHITESPACE","\n            ",583],["T_VARIABLE","$_length",584],["T_WHITESPACE"," ",584],"=",["T_WHITESPACE"," ",584],["T_VARIABLE","$packageParams",584],["T_OBJECT_OPERATOR","->",584],["T_STRING","getLength",584],"(",")",";",["T_WHITESPACE","\n            ",584],["T_VARIABLE","$_width",585],["T_WHITESPACE"," ",585],"=",["T_WHITESPACE"," ",585],["T_VARIABLE","$packageParams",585],["T_OBJECT_OPERATOR","->",585],["T_STRING","getWidth",585],"(",")",";",["T_WHITESPACE","\n            ",585],["T_VARIABLE","$_height",586],["T_WHITESPACE"," ",586],"=",["T_WHITESPACE"," ",586],["T_VARIABLE","$packageParams",586],["T_OBJECT_OPERATOR","->",586],["T_STRING","getHeight",586],"(",")",";",["T_WHITESPACE","\n        ",586],"}",["T_WHITESPACE","\n\n        ",587],["T_VARIABLE","$_apEnabled",589],["T_WHITESPACE"," ",589],"=",["T_WHITESPACE"," ",589],["T_VARIABLE","$this",589],["T_OBJECT_OPERATOR","->",589],["T_STRING","getConfigFlag",589],"(",["T_CONSTANT_ENCAPSED_STRING","'additional_protection_enabled'",589],")",";",["T_WHITESPACE","\n        ",589],["T_VARIABLE","$_apUseSubtotal",590],["T_WHITESPACE"," ",590],"=",["T_WHITESPACE"," ",590],["T_VARIABLE","$this",590],["T_OBJECT_OPERATOR","->",590],["T_STRING","getConfigData",590],"(",["T_CONSTANT_ENCAPSED_STRING","'additional_protection_use_subtotal'",590],")",";",["T_WHITESPACE","\n        ",590],["T_VARIABLE","$_apConfigValue",591],["T_WHITESPACE"," ",591],"=",["T_WHITESPACE"," ",591],["T_STRING","max",591],"(",["T_LNUMBER","0",591],",",["T_WHITESPACE"," ",591],["T_DOUBLE_CAST","(double)",591],["T_VARIABLE","$this",591],["T_OBJECT_OPERATOR","->",591],["T_STRING","getConfigData",591],"(",["T_CONSTANT_ENCAPSED_STRING","'additional_protection_value'",591],")",")",";",["T_WHITESPACE","\n        ",591],["T_VARIABLE","$_apMinValue",592],["T_WHITESPACE"," ",592],"=",["T_WHITESPACE"," ",592],["T_STRING","max",592],"(",["T_LNUMBER","0",592],",",["T_WHITESPACE"," ",592],["T_DOUBLE_CAST","(double)",592],["T_VARIABLE","$this",592],["T_OBJECT_OPERATOR","->",592],["T_STRING","getConfigData",592],"(",["T_CONSTANT_ENCAPSED_STRING","'additional_protection_min_value'",592],")",")",";",["T_WHITESPACE","\n        ",592],["T_VARIABLE","$_apValueRounding",593],["T_WHITESPACE"," ",593],"=",["T_WHITESPACE"," ",593],["T_VARIABLE","$this",593],["T_OBJECT_OPERATOR","->",593],["T_STRING","getConfigData",593],"(",["T_CONSTANT_ENCAPSED_STRING","'additional_protection_rounding'",593],")",";",["T_WHITESPACE","\n\n        ",593],["T_VARIABLE","$apValue",595],["T_WHITESPACE"," ",595],"=",["T_WHITESPACE"," ",595],["T_LNUMBER","0",595],";",["T_WHITESPACE","\n        ",595],["T_VARIABLE","$apCode",596],["T_WHITESPACE"," ",596],"=",["T_WHITESPACE"," ",596],["T_STRING","self",596],["T_DOUBLE_COLON","::",596],["T_STRING","ADDITIONAL_PROTECTION_NOT_REQUIRED",596],";",["T_WHITESPACE","\n        ",596],["T_IF","if",597],["T_WHITESPACE"," ",597],"(",["T_VARIABLE","$_apEnabled",597],")",["T_WHITESPACE"," ",597],"{",["T_WHITESPACE","\n            ",597],["T_IF","if",598],["T_WHITESPACE"," ",598],"(",["T_VARIABLE","$_apMinValue",598],["T_WHITESPACE"," ",598],["T_IS_SMALLER_OR_EQUAL","<=",598],["T_WHITESPACE"," ",598],["T_VARIABLE","$_subtotal",598],")",["T_WHITESPACE"," ",598],"{",["T_WHITESPACE","\n                ",598],["T_SWITCH","switch",599],["T_WHITESPACE"," ",599],"(",["T_VARIABLE","$_apUseSubtotal",599],")",["T_WHITESPACE"," ",599],"{",["T_WHITESPACE","\n                    ",599],["T_CASE","case",600],["T_WHITESPACE"," ",600],["T_STRING","self",600],["T_DOUBLE_COLON","::",600],["T_STRING","ADDITIONAL_PROTECTION_VALUE_SUBTOTAL",600],":",["T_WHITESPACE","\n                        ",600],["T_VARIABLE","$apValue",601],["T_WHITESPACE"," ",601],"=",["T_WHITESPACE"," ",601],["T_VARIABLE","$_subtotal",601],";",["T_WHITESPACE","\n                        ",601],["T_BREAK","break",602],";",["T_WHITESPACE","\n                    ",602],["T_CASE","case",603],["T_WHITESPACE"," ",603],["T_STRING","self",603],["T_DOUBLE_COLON","::",603],["T_STRING","ADDITIONAL_PROTECTION_VALUE_SUBTOTAL_WITH_DISCOUNT",603],":",["T_WHITESPACE","\n                        ",603],["T_VARIABLE","$apValue",604],["T_WHITESPACE"," ",604],"=",["T_WHITESPACE"," ",604],["T_VARIABLE","$_subtotalWithDiscount",604],";",["T_WHITESPACE","\n                        ",604],["T_BREAK","break",605],";",["T_WHITESPACE","\n                    ",605],["T_DEFAULT","default",606],":",["T_WHITESPACE","\n                    ",606],["T_CASE","case",607],["T_WHITESPACE"," ",607],["T_STRING","self",607],["T_DOUBLE_COLON","::",607],["T_STRING","ADDITIONAL_PROTECTION_VALUE_CONFIG",607],":",["T_WHITESPACE","\n                        ",607],["T_VARIABLE","$apValue",608],["T_WHITESPACE"," ",608],"=",["T_WHITESPACE"," ",608],["T_VARIABLE","$_apConfigValue",608],";",["T_WHITESPACE","\n                        ",608],["T_BREAK","break",609],";",["T_WHITESPACE","\n                ",609],"}",["T_WHITESPACE","\n\n                ",610],["T_IF","if",612],["T_WHITESPACE"," ",612],"(",["T_VARIABLE","$apValue",612],")",["T_WHITESPACE"," ",612],"{",["T_WHITESPACE","\n                    ",612],["T_VARIABLE","$apCode",613],["T_WHITESPACE"," ",613],"=",["T_WHITESPACE"," ",613],["T_STRING","self",613],["T_DOUBLE_COLON","::",613],["T_STRING","ADDITIONAL_PROTECTION_ASSET",613],";",["T_WHITESPACE","\n\n\n                    ",613],["T_SWITCH","switch",616],["T_WHITESPACE"," ",616],"(",["T_VARIABLE","$_apValueRounding",616],")",["T_WHITESPACE"," ",616],"{",["T_WHITESPACE","\n                        ",616],["T_CASE","case",617],["T_WHITESPACE"," ",617],["T_STRING","self",617],["T_DOUBLE_COLON","::",617],["T_STRING","ADDITIONAL_PROTECTION_ROUNDING_CEIL",617],":",["T_WHITESPACE","\n                            ",617],["T_VARIABLE","$apValue",618],["T_WHITESPACE"," ",618],"=",["T_WHITESPACE"," ",618],["T_STRING","ceil",618],"(",["T_VARIABLE","$apValue",618],")",";",["T_WHITESPACE","\n                            ",618],["T_BREAK","break",619],";",["T_WHITESPACE","\n                        ",619],["T_CASE","case",620],["T_WHITESPACE"," ",620],["T_STRING","self",620],["T_DOUBLE_COLON","::",620],["T_STRING","ADDITIONAL_PROTECTION_ROUNDING_ROUND",620],":",["T_WHITESPACE","\n                            ",620],["T_VARIABLE","$apValue",621],["T_WHITESPACE"," ",621],"=",["T_WHITESPACE"," ",621],["T_STRING","round",621],"(",["T_VARIABLE","$apValue",621],")",";",["T_WHITESPACE","\n                            ",621],["T_BREAK","break",622],";",["T_WHITESPACE","\n                        ",622],["T_DEFAULT","default",623],":",["T_WHITESPACE","\n                        ",623],["T_CASE","case",624],["T_WHITESPACE"," ",624],["T_STRING","self",624],["T_DOUBLE_COLON","::",624],["T_STRING","ADDITIONAL_PROTECTION_ROUNDING_FLOOR",624],":",["T_WHITESPACE","\n                            ",624],["T_VARIABLE","$apValue",625],["T_WHITESPACE"," ",625],"=",["T_WHITESPACE"," ",625],["T_STRING","floor",625],"(",["T_VARIABLE","$apValue",625],")",";",["T_WHITESPACE","\n                            ",625],["T_BREAK","break",626],";",["T_WHITESPACE","\n                    ",626],"}",["T_WHITESPACE","\n                ",627],"}",["T_WHITESPACE","\n            ",628],"}",["T_WHITESPACE","\n        ",629],"}",["T_WHITESPACE","\n\n        ",630],["T_IF","if",632],["T_WHITESPACE"," ",632],"(",["T_VARIABLE","$r",632],["T_OBJECT_OPERATOR","->",632],["T_STRING","getAction",632],"(",")",["T_WHITESPACE"," ",632],["T_IS_EQUAL","==",632],["T_WHITESPACE"," ",632],["T_CONSTANT_ENCAPSED_STRING","'GenerateLabel'",632],")",["T_WHITESPACE"," ",632],"{",["T_WHITESPACE","\n            ",632],["T_VARIABLE","$shipment",633],["T_OBJECT_OPERATOR","->",633],["T_STRING","addAttribute",633],"(",["T_CONSTANT_ENCAPSED_STRING","'action'",633],",",["T_WHITESPACE"," ",633],["T_CONSTANT_ENCAPSED_STRING","'GenerateLabel'",633],")",";",["T_WHITESPACE","\n        ",633],"}",["T_WHITESPACE"," ",634],["T_ELSE","else",634],["T_WHITESPACE"," ",634],"{",["T_WHITESPACE","\n            ",634],["T_VARIABLE","$shipment",635],["T_OBJECT_OPERATOR","->",635],["T_STRING","addAttribute",635],"(",["T_CONSTANT_ENCAPSED_STRING","'action'",635],",",["T_WHITESPACE"," ",635],["T_CONSTANT_ENCAPSED_STRING","'RateEstimate'",635],")",";",["T_WHITESPACE","\n        ",635],"}",["T_WHITESPACE","\n        ",636],["T_VARIABLE","$shipment",637],["T_OBJECT_OPERATOR","->",637],["T_STRING","addAttribute",637],"(",["T_CONSTANT_ENCAPSED_STRING","'version'",637],",",["T_WHITESPACE"," ",637],["T_CONSTANT_ENCAPSED_STRING","'1.0'",637],")",";",["T_WHITESPACE","\n\n        ",637],["T_VARIABLE","$shippingCredentials",639],["T_WHITESPACE"," ",639],"=",["T_WHITESPACE"," ",639],["T_VARIABLE","$shipment",639],["T_OBJECT_OPERATOR","->",639],["T_STRING","addChild",639],"(",["T_CONSTANT_ENCAPSED_STRING","'ShippingCredentials'",639],")",";",["T_WHITESPACE","\n        ",639],["T_VARIABLE","$shippingCredentials",640],["T_OBJECT_OPERATOR","->",640],["T_STRING","addChild",640],"(",["T_CONSTANT_ENCAPSED_STRING","'ShippingKey'",640],",",["T_WHITESPACE"," ",640],["T_VARIABLE","$shipKey",640],")",";",["T_WHITESPACE","\n        ",640],["T_VARIABLE","$shippingCredentials",641],["T_OBJECT_OPERATOR","->",641],["T_STRING","addChild",641],"(",["T_CONSTANT_ENCAPSED_STRING","'AccountNbr'",641],",",["T_WHITESPACE"," ",641],["T_VARIABLE","$r",641],["T_OBJECT_OPERATOR","->",641],["T_STRING","getAccountNbr",641],"(",")",")",";",["T_WHITESPACE","\n\n        ",641],["T_VARIABLE","$shipmentDetail",643],["T_WHITESPACE"," ",643],"=",["T_WHITESPACE"," ",643],["T_VARIABLE","$shipment",643],["T_OBJECT_OPERATOR","->",643],["T_STRING","addChild",643],"(",["T_CONSTANT_ENCAPSED_STRING","'ShipmentDetail'",643],")",";",["T_WHITESPACE","\n        ",643],["T_IF","if",644],["T_WHITESPACE"," ",644],"(",["T_VARIABLE","$r",644],["T_OBJECT_OPERATOR","->",644],["T_STRING","getAction",644],"(",")",["T_WHITESPACE"," ",644],["T_IS_EQUAL","==",644],["T_WHITESPACE"," ",644],["T_CONSTANT_ENCAPSED_STRING","'GenerateLabel'",644],")",["T_WHITESPACE"," ",644],"{",["T_WHITESPACE","\n            ",644],["T_IF","if",645],["T_WHITESPACE"," ",645],"(",["T_VARIABLE","$this",645],["T_OBJECT_OPERATOR","->",645],["T_STRING","_request",645],["T_OBJECT_OPERATOR","->",645],["T_STRING","getReferenceData",645],"(",")",")",["T_WHITESPACE"," ",645],"{",["T_WHITESPACE","\n                ",645],["T_VARIABLE","$referenceData",646],["T_WHITESPACE"," ",646],"=",["T_WHITESPACE"," ",646],["T_VARIABLE","$this",646],["T_OBJECT_OPERATOR","->",646],["T_STRING","_request",646],["T_OBJECT_OPERATOR","->",646],["T_STRING","getReferenceData",646],"(",")",["T_WHITESPACE"," ",646],".",["T_WHITESPACE"," ",646],["T_VARIABLE","$this",646],["T_OBJECT_OPERATOR","->",646],["T_STRING","_request",646],["T_OBJECT_OPERATOR","->",646],["T_STRING","getPackageId",646],"(",")",";",["T_WHITESPACE","\n            ",646],"}",["T_WHITESPACE"," ",647],["T_ELSE","else",647],["T_WHITESPACE"," ",647],"{",["T_WHITESPACE","\n                ",647],["T_VARIABLE","$referenceData",648],["T_WHITESPACE"," ",648],"=",["T_WHITESPACE"," ",648],["T_CONSTANT_ENCAPSED_STRING","'Order #'",648],["T_WHITESPACE","\n                                 ",648],".",["T_WHITESPACE"," ",649],["T_VARIABLE","$r",649],["T_OBJECT_OPERATOR","->",649],["T_STRING","getOrderShipment",649],"(",")",["T_OBJECT_OPERATOR","->",649],["T_STRING","getOrder",649],"(",")",["T_OBJECT_OPERATOR","->",649],["T_STRING","getIncrementId",649],"(",")",["T_WHITESPACE","\n                                 ",649],".",["T_WHITESPACE"," ",650],["T_CONSTANT_ENCAPSED_STRING","' P'",650],["T_WHITESPACE","\n                                 ",650],".",["T_WHITESPACE"," ",651],["T_VARIABLE","$r",651],["T_OBJECT_OPERATOR","->",651],["T_STRING","getPackageId",651],"(",")",";",["T_WHITESPACE","\n            ",651],"}",["T_WHITESPACE","\n\n            ",652],["T_VARIABLE","$shipmentDetail",654],["T_OBJECT_OPERATOR","->",654],["T_STRING","addChild",654],"(",["T_CONSTANT_ENCAPSED_STRING","'ShipperReference'",654],",",["T_WHITESPACE"," ",654],["T_VARIABLE","$referenceData",654],")",";",["T_WHITESPACE","\n        ",654],"}",["T_WHITESPACE","\n        ",655],["T_VARIABLE","$shipmentDetail",656],["T_OBJECT_OPERATOR","->",656],["T_STRING","addChild",656],"(",["T_CONSTANT_ENCAPSED_STRING","'ShipDate'",656],",",["T_WHITESPACE"," ",656],["T_VARIABLE","$r",656],["T_OBJECT_OPERATOR","->",656],["T_STRING","getShipDate",656],"(",")",")",";",["T_WHITESPACE","\n        ",656],["T_VARIABLE","$shipmentDetail",657],["T_OBJECT_OPERATOR","->",657],["T_STRING","addChild",657],"(",["T_CONSTANT_ENCAPSED_STRING","'Service'",657],")",["T_OBJECT_OPERATOR","->",657],["T_STRING","addChild",657],"(",["T_CONSTANT_ENCAPSED_STRING","'Code'",657],",",["T_WHITESPACE"," ",657],["T_VARIABLE","$r",657],["T_OBJECT_OPERATOR","->",657],["T_STRING","getService",657],"(",")",")",";",["T_WHITESPACE","\n        ",657],["T_VARIABLE","$shipmentDetail",658],["T_OBJECT_OPERATOR","->",658],["T_STRING","addChild",658],"(",["T_CONSTANT_ENCAPSED_STRING","'ShipmentType'",658],")",["T_OBJECT_OPERATOR","->",658],["T_STRING","addChild",658],"(",["T_CONSTANT_ENCAPSED_STRING","'Code'",658],",",["T_WHITESPACE"," ",658],["T_VARIABLE","$r",658],["T_OBJECT_OPERATOR","->",658],["T_STRING","getShipmentType",658],"(",")",")",";",["T_WHITESPACE","\n        ",658],["T_VARIABLE","$shipmentDetail",659],["T_OBJECT_OPERATOR","->",659],["T_STRING","addChild",659],"(",["T_CONSTANT_ENCAPSED_STRING","'Weight'",659],",",["T_WHITESPACE"," ",659],["T_VARIABLE","$r",659],["T_OBJECT_OPERATOR","->",659],["T_STRING","getWeight",659],"(",")",")",";",["T_WHITESPACE","\n        ",659],["T_VARIABLE","$shipmentDetail",660],["T_OBJECT_OPERATOR","->",660],["T_STRING","addChild",660],"(",["T_CONSTANT_ENCAPSED_STRING","'ContentDesc'",660],",",["T_WHITESPACE"," ",660],["T_VARIABLE","$r",660],["T_OBJECT_OPERATOR","->",660],["T_STRING","getContentDesc",660],"(",")",")",";",["T_WHITESPACE","\n        ",660],["T_VARIABLE","$additionalProtection",661],["T_WHITESPACE"," ",661],"=",["T_WHITESPACE"," ",661],["T_VARIABLE","$shipmentDetail",661],["T_OBJECT_OPERATOR","->",661],["T_STRING","addChild",661],"(",["T_CONSTANT_ENCAPSED_STRING","'AdditionalProtection'",661],")",";",["T_WHITESPACE","\n        ",661],["T_VARIABLE","$additionalProtection",662],["T_OBJECT_OPERATOR","->",662],["T_STRING","addChild",662],"(",["T_CONSTANT_ENCAPSED_STRING","'Code'",662],",",["T_WHITESPACE"," ",662],["T_VARIABLE","$apCode",662],")",";",["T_WHITESPACE","\n        ",662],["T_VARIABLE","$additionalProtection",663],["T_OBJECT_OPERATOR","->",663],["T_STRING","addChild",663],"(",["T_CONSTANT_ENCAPSED_STRING","'Value'",663],",",["T_WHITESPACE"," ",663],["T_STRING","floor",663],"(",["T_VARIABLE","$apValue",663],")",")",";",["T_WHITESPACE","\n\n        ",663],["T_IF","if",665],["T_WHITESPACE"," ",665],"(",["T_VARIABLE","$_width",665],["T_WHITESPACE"," ",665],["T_BOOLEAN_OR","||",665],["T_WHITESPACE"," ",665],["T_VARIABLE","$_height",665],["T_WHITESPACE"," ",665],["T_BOOLEAN_OR","||",665],["T_WHITESPACE"," ",665],["T_VARIABLE","$_length",665],")",["T_WHITESPACE"," ",665],"{",["T_WHITESPACE","\n            ",665],["T_VARIABLE","$dimensions",666],["T_WHITESPACE"," ",666],"=",["T_WHITESPACE"," ",666],["T_VARIABLE","$shipmentDetail",666],["T_OBJECT_OPERATOR","->",666],["T_STRING","addChild",666],"(",["T_CONSTANT_ENCAPSED_STRING","'Dimensions'",666],")",";",["T_WHITESPACE","\n            ",666],["T_VARIABLE","$dimensions",667],["T_OBJECT_OPERATOR","->",667],["T_STRING","addChild",667],"(",["T_CONSTANT_ENCAPSED_STRING","'Length'",667],",",["T_WHITESPACE"," ",667],["T_VARIABLE","$_length",667],")",";",["T_WHITESPACE","\n            ",667],["T_VARIABLE","$dimensions",668],["T_OBJECT_OPERATOR","->",668],["T_STRING","addChild",668],"(",["T_CONSTANT_ENCAPSED_STRING","'Width'",668],",",["T_WHITESPACE"," ",668],["T_VARIABLE","$_width",668],")",";",["T_WHITESPACE","\n            ",668],["T_VARIABLE","$dimensions",669],["T_OBJECT_OPERATOR","->",669],["T_STRING","addChild",669],"(",["T_CONSTANT_ENCAPSED_STRING","'Height'",669],",",["T_WHITESPACE"," ",669],["T_VARIABLE","$_height",669],")",";",["T_WHITESPACE","\n        ",669],"}",["T_WHITESPACE","\n\n        ",670],["T_IF","if",672],["T_WHITESPACE"," ",672],"(",["T_VARIABLE","$_haz",672],["T_WHITESPACE"," ",672],["T_BOOLEAN_OR","||",672],["T_WHITESPACE"," ",672],"(",["T_VARIABLE","$r",672],["T_OBJECT_OPERATOR","->",672],["T_STRING","getExtendedService",672],"(",")",")",")",["T_WHITESPACE"," ",672],"{",["T_WHITESPACE","\n            ",672],["T_VARIABLE","$specialServices",673],["T_WHITESPACE"," ",673],"=",["T_WHITESPACE"," ",673],["T_VARIABLE","$shipmentDetail",673],["T_OBJECT_OPERATOR","->",673],["T_STRING","addChild",673],"(",["T_CONSTANT_ENCAPSED_STRING","'SpecialServices'",673],")",";",["T_WHITESPACE","\n        ",673],"}",["T_WHITESPACE","\n\n        ",674],["T_IF","if",676],["T_WHITESPACE"," ",676],"(",["T_VARIABLE","$_haz",676],")",["T_WHITESPACE"," ",676],"{",["T_WHITESPACE","\n            ",676],["T_VARIABLE","$hazardousMaterials",677],["T_WHITESPACE"," ",677],"=",["T_WHITESPACE"," ",677],["T_VARIABLE","$specialServices",677],["T_OBJECT_OPERATOR","->",677],["T_STRING","addChild",677],"(",["T_CONSTANT_ENCAPSED_STRING","'SpecialService'",677],")",";",["T_WHITESPACE","\n            ",677],["T_VARIABLE","$hazardousMaterials",678],["T_OBJECT_OPERATOR","->",678],["T_STRING","addChild",678],"(",["T_CONSTANT_ENCAPSED_STRING","'Code'",678],",",["T_WHITESPACE"," ",678],["T_CONSTANT_ENCAPSED_STRING","'HAZ'",678],")",";",["T_WHITESPACE","\n        ",678],"}",["T_WHITESPACE","\n\n        ",679],["T_IF","if",681],["T_WHITESPACE"," ",681],"(",["T_VARIABLE","$r",681],["T_OBJECT_OPERATOR","->",681],["T_STRING","getExtendedService",681],"(",")",")",["T_WHITESPACE"," ",681],"{",["T_WHITESPACE","\n            ",681],["T_VARIABLE","$extendedService",682],["T_WHITESPACE"," ",682],"=",["T_WHITESPACE"," ",682],["T_VARIABLE","$specialServices",682],["T_OBJECT_OPERATOR","->",682],["T_STRING","addChild",682],"(",["T_CONSTANT_ENCAPSED_STRING","'SpecialService'",682],")",";",["T_WHITESPACE","\n            ",682],["T_VARIABLE","$extendedService",683],["T_OBJECT_OPERATOR","->",683],["T_STRING","addChild",683],"(",["T_CONSTANT_ENCAPSED_STRING","'Code'",683],",",["T_WHITESPACE"," ",683],["T_VARIABLE","$r",683],["T_OBJECT_OPERATOR","->",683],["T_STRING","getExtendedService",683],"(",")",")",";",["T_WHITESPACE","\n        ",683],"}",["T_WHITESPACE","\n\n\n        ",684],["T_COMMENT","\/*\n        * R = Receiver (if receiver, need AccountNbr)\n        * S = Sender\n        * 3 = Third Party (if third party, need AccountNbr)\n        *\/",687],["T_WHITESPACE","\n        ",691],["T_VARIABLE","$billing",692],["T_WHITESPACE"," ",692],"=",["T_WHITESPACE"," ",692],["T_VARIABLE","$shipment",692],["T_OBJECT_OPERATOR","->",692],["T_STRING","addChild",692],"(",["T_CONSTANT_ENCAPSED_STRING","'Billing'",692],")",";",["T_WHITESPACE","\n        ",692],["T_VARIABLE","$billing",693],["T_OBJECT_OPERATOR","->",693],["T_STRING","addChild",693],"(",["T_CONSTANT_ENCAPSED_STRING","'Party'",693],")",["T_OBJECT_OPERATOR","->",693],["T_STRING","addChild",693],"(",["T_CONSTANT_ENCAPSED_STRING","'Code'",693],",",["T_WHITESPACE"," ",693],["T_VARIABLE","$r",693],["T_OBJECT_OPERATOR","->",693],["T_STRING","getIsGenerateLabelReturn",693],"(",")",["T_WHITESPACE"," ",693],"?",["T_WHITESPACE"," ",693],["T_CONSTANT_ENCAPSED_STRING","'R'",693],["T_WHITESPACE"," ",693],":",["T_WHITESPACE"," ",693],["T_CONSTANT_ENCAPSED_STRING","'S'",693],")",";",["T_WHITESPACE","\n        ",693],["T_VARIABLE","$billing",694],["T_OBJECT_OPERATOR","->",694],["T_STRING","addChild",694],"(",["T_CONSTANT_ENCAPSED_STRING","'DutyPaymentType'",694],",",["T_WHITESPACE"," ",694],["T_VARIABLE","$r",694],["T_OBJECT_OPERATOR","->",694],["T_STRING","getDutyPaymentType",694],"(",")",")",";",["T_WHITESPACE","\n        ",694],["T_IF","if",695],["T_WHITESPACE"," ",695],"(",["T_VARIABLE","$r",695],["T_OBJECT_OPERATOR","->",695],["T_STRING","getIsGenerateLabelReturn",695],"(",")",")",["T_WHITESPACE"," ",695],"{",["T_WHITESPACE","\n            ",695],["T_VARIABLE","$billing",696],["T_OBJECT_OPERATOR","->",696],["T_STRING","addChild",696],"(",["T_CONSTANT_ENCAPSED_STRING","'AccountNbr'",696],",",["T_WHITESPACE"," ",696],["T_VARIABLE","$r",696],["T_OBJECT_OPERATOR","->",696],["T_STRING","getAccountNbr",696],"(",")",")",";",["T_WHITESPACE","\n        ",696],"}",["T_WHITESPACE","\n\n        ",697],["T_VARIABLE","$sender",699],["T_WHITESPACE"," ",699],"=",["T_WHITESPACE"," ",699],["T_VARIABLE","$shipment",699],["T_OBJECT_OPERATOR","->",699],["T_STRING","addChild",699],"(",["T_CONSTANT_ENCAPSED_STRING","'Sender'",699],")",";",["T_WHITESPACE","\n        ",699],["T_VARIABLE","$sender",700],["T_OBJECT_OPERATOR","->",700],["T_STRING","addChild",700],"(",["T_CONSTANT_ENCAPSED_STRING","'SentBy'",700],",",["T_WHITESPACE"," ",700],"(",["T_VARIABLE","$r",700],["T_OBJECT_OPERATOR","->",700],["T_STRING","getOrigPersonName",700],"(",")",")",")",";",["T_WHITESPACE","\n        ",700],["T_VARIABLE","$sender",701],["T_OBJECT_OPERATOR","->",701],["T_STRING","addChild",701],"(",["T_CONSTANT_ENCAPSED_STRING","'PhoneNbr'",701],",",["T_WHITESPACE"," ",701],["T_VARIABLE","$r",701],["T_OBJECT_OPERATOR","->",701],["T_STRING","getOrigPhoneNumber",701],"(",")",")",";",["T_WHITESPACE","\n        ",701],["T_VARIABLE","$sender",702],["T_OBJECT_OPERATOR","->",702],["T_STRING","addChild",702],"(",["T_CONSTANT_ENCAPSED_STRING","'Email'",702],",",["T_WHITESPACE"," ",702],["T_VARIABLE","$r",702],["T_OBJECT_OPERATOR","->",702],["T_STRING","getOrigEmail",702],"(",")",")",";",["T_WHITESPACE","\n\n        ",702],["T_VARIABLE","$senderAddress",704],["T_WHITESPACE"," ",704],"=",["T_WHITESPACE"," ",704],["T_VARIABLE","$sender",704],["T_OBJECT_OPERATOR","->",704],["T_STRING","addChild",704],"(",["T_CONSTANT_ENCAPSED_STRING","'Address'",704],")",";",["T_WHITESPACE","\n        ",704],["T_VARIABLE","$senderAddress",705],["T_OBJECT_OPERATOR","->",705],["T_STRING","addChild",705],"(",["T_CONSTANT_ENCAPSED_STRING","'Street'",705],",",["T_WHITESPACE"," ",705],["T_STRING","htmlspecialchars",705],"(",["T_VARIABLE","$r",705],["T_OBJECT_OPERATOR","->",705],["T_STRING","getOrigStreet",705],"(",")",["T_WHITESPACE"," ",705],"?",["T_WHITESPACE"," ",705],["T_VARIABLE","$r",705],["T_OBJECT_OPERATOR","->",705],["T_STRING","getOrigStreet",705],"(",")",["T_WHITESPACE"," ",705],":",["T_WHITESPACE"," ",705],["T_CONSTANT_ENCAPSED_STRING","'N\/A'",705],")",")",";",["T_WHITESPACE","\n        ",705],["T_VARIABLE","$senderAddress",706],["T_OBJECT_OPERATOR","->",706],["T_STRING","addChild",706],"(",["T_CONSTANT_ENCAPSED_STRING","'City'",706],",",["T_WHITESPACE"," ",706],["T_STRING","htmlspecialchars",706],"(",["T_VARIABLE","$r",706],["T_OBJECT_OPERATOR","->",706],["T_STRING","getOrigCity",706],"(",")",")",")",";",["T_WHITESPACE","\n        ",706],["T_VARIABLE","$senderAddress",707],["T_OBJECT_OPERATOR","->",707],["T_STRING","addChild",707],"(",["T_CONSTANT_ENCAPSED_STRING","'State'",707],",",["T_WHITESPACE"," ",707],["T_STRING","htmlspecialchars",707],"(",["T_VARIABLE","$r",707],["T_OBJECT_OPERATOR","->",707],["T_STRING","getOrigState",707],"(",")",")",")",";",["T_WHITESPACE","\n        ",707],["T_VARIABLE","$senderAddress",708],["T_OBJECT_OPERATOR","->",708],["T_STRING","addChild",708],"(",["T_CONSTANT_ENCAPSED_STRING","'CompanyName'",708],",",["T_WHITESPACE"," ",708],["T_STRING","htmlspecialchars",708],"(",["T_VARIABLE","$r",708],["T_OBJECT_OPERATOR","->",708],["T_STRING","getOrigCompanyName",708],"(",")",")",")",";",["T_WHITESPACE","\n        ",708],["T_COMMENT","\/*\n        * DHL xml service is using UK for united kingdom instead of GB which is a standard ISO country code\n        *\/",709],["T_WHITESPACE","\n        ",711],["T_VARIABLE","$senderAddress",712],["T_OBJECT_OPERATOR","->",712],["T_STRING","addChild",712],"(",["T_CONSTANT_ENCAPSED_STRING","'Country'",712],",",["T_WHITESPACE"," ",712],"(",["T_VARIABLE","$r",712],["T_OBJECT_OPERATOR","->",712],["T_STRING","getOrigCountryId",712],"(",")",["T_WHITESPACE"," ",712],["T_IS_EQUAL","==",712],["T_WHITESPACE"," ",712],["T_CONSTANT_ENCAPSED_STRING","'GB'",712],["T_WHITESPACE"," ",712],"?",["T_WHITESPACE"," ",712],["T_CONSTANT_ENCAPSED_STRING","'UK'",712],["T_WHITESPACE"," ",712],":",["T_WHITESPACE"," ",712],["T_VARIABLE","$r",712],["T_OBJECT_OPERATOR","->",712],["T_STRING","getOrigCountryId",712],"(",")",")",")",";",["T_WHITESPACE","\n        ",712],["T_VARIABLE","$senderAddress",713],["T_OBJECT_OPERATOR","->",713],["T_STRING","addChild",713],"(",["T_CONSTANT_ENCAPSED_STRING","'PostalCode'",713],",",["T_WHITESPACE"," ",713],["T_VARIABLE","$r",713],["T_OBJECT_OPERATOR","->",713],["T_STRING","getOrigPostal",713],"(",")",")",";",["T_WHITESPACE","\n\n        ",713],["T_VARIABLE","$receiver",715],["T_WHITESPACE"," ",715],"=",["T_WHITESPACE"," ",715],["T_VARIABLE","$shipment",715],["T_OBJECT_OPERATOR","->",715],["T_STRING","addChild",715],"(",["T_CONSTANT_ENCAPSED_STRING","'Receiver'",715],")",";",["T_WHITESPACE","\n        ",715],["T_VARIABLE","$receiver",716],["T_OBJECT_OPERATOR","->",716],["T_STRING","addChild",716],"(",["T_CONSTANT_ENCAPSED_STRING","'AttnTo'",716],",",["T_WHITESPACE"," ",716],["T_VARIABLE","$r",716],["T_OBJECT_OPERATOR","->",716],["T_STRING","getDestPersonName",716],"(",")",")",";",["T_WHITESPACE","\n        ",716],["T_VARIABLE","$receiver",717],["T_OBJECT_OPERATOR","->",717],["T_STRING","addChild",717],"(",["T_CONSTANT_ENCAPSED_STRING","'PhoneNbr'",717],",",["T_WHITESPACE"," ",717],["T_VARIABLE","$r",717],["T_OBJECT_OPERATOR","->",717],["T_STRING","getDestPhoneNumber",717],"(",")",")",";",["T_WHITESPACE","\n\n        ",717],["T_VARIABLE","$receiverAddress",719],["T_WHITESPACE"," ",719],"=",["T_WHITESPACE"," ",719],["T_VARIABLE","$receiver",719],["T_OBJECT_OPERATOR","->",719],["T_STRING","addChild",719],"(",["T_CONSTANT_ENCAPSED_STRING","'Address'",719],")",";",["T_WHITESPACE","\n        ",719],["T_VARIABLE","$receiverAddress",720],["T_OBJECT_OPERATOR","->",720],["T_STRING","addChild",720],"(",["T_CONSTANT_ENCAPSED_STRING","'Street'",720],",",["T_WHITESPACE"," ",720],["T_STRING","htmlspecialchars",720],"(",["T_VARIABLE","$r",720],["T_OBJECT_OPERATOR","->",720],["T_STRING","getDestStreet",720],"(",")",["T_WHITESPACE"," ",720],"?",["T_WHITESPACE"," ",720],["T_VARIABLE","$r",720],["T_OBJECT_OPERATOR","->",720],["T_STRING","getDestStreet",720],"(",")",["T_WHITESPACE"," ",720],":",["T_WHITESPACE"," ",720],["T_CONSTANT_ENCAPSED_STRING","'N\/A'",720],")",")",";",["T_WHITESPACE","\n        ",720],["T_VARIABLE","$receiverAddress",721],["T_OBJECT_OPERATOR","->",721],["T_STRING","addChild",721],"(",["T_CONSTANT_ENCAPSED_STRING","'StreetLine2'",721],",",["T_WHITESPACE","\n                                   ",721],["T_STRING","htmlspecialchars",722],"(",["T_VARIABLE","$r",722],["T_OBJECT_OPERATOR","->",722],["T_STRING","getDestStreetLine2",722],"(",")",["T_WHITESPACE"," ",722],"?",["T_WHITESPACE"," ",722],["T_VARIABLE","$r",722],["T_OBJECT_OPERATOR","->",722],["T_STRING","getDestStreetLine2",722],"(",")",["T_WHITESPACE"," ",722],":",["T_WHITESPACE"," ",722],["T_CONSTANT_ENCAPSED_STRING","'N\/A'",722],")",["T_WHITESPACE","\n        ",722],")",";",["T_WHITESPACE","\n        ",723],["T_VARIABLE","$receiverAddress",724],["T_OBJECT_OPERATOR","->",724],["T_STRING","addChild",724],"(",["T_CONSTANT_ENCAPSED_STRING","'City'",724],",",["T_WHITESPACE"," ",724],["T_STRING","htmlspecialchars",724],"(",["T_VARIABLE","$r",724],["T_OBJECT_OPERATOR","->",724],["T_STRING","getDestCity",724],"(",")",")",")",";",["T_WHITESPACE","\n        ",724],["T_VARIABLE","$receiverAddress",725],["T_OBJECT_OPERATOR","->",725],["T_STRING","addChild",725],"(",["T_CONSTANT_ENCAPSED_STRING","'State'",725],",",["T_WHITESPACE"," ",725],["T_STRING","htmlspecialchars",725],"(",["T_VARIABLE","$r",725],["T_OBJECT_OPERATOR","->",725],["T_STRING","getDestState",725],"(",")",")",")",";",["T_WHITESPACE","\n        ",725],["T_VARIABLE","$receiverAddress",726],["T_OBJECT_OPERATOR","->",726],["T_STRING","addChild",726],"(",["T_CONSTANT_ENCAPSED_STRING","'CompanyName'",726],",",["T_WHITESPACE","\n                                   ",726],["T_STRING","htmlspecialchars",727],"(",["T_VARIABLE","$r",727],["T_OBJECT_OPERATOR","->",727],["T_STRING","getDestCompanyName",727],"(",")",["T_WHITESPACE"," ",727],"?",["T_WHITESPACE"," ",727],["T_VARIABLE","$r",727],["T_OBJECT_OPERATOR","->",727],["T_STRING","getDestCompanyName",727],"(",")",["T_WHITESPACE"," ",727],":",["T_WHITESPACE"," ",727],["T_CONSTANT_ENCAPSED_STRING","'N\/A'",727],")",["T_WHITESPACE","\n        ",727],")",";",["T_WHITESPACE","\n\n        ",728],["T_COMMENT","\/*\n        * DHL xml service is using UK for united kingdom instead of GB which is a standard ISO country code\n        *\/",730],["T_WHITESPACE","\n        ",732],["T_VARIABLE","$receiverAddress",733],["T_OBJECT_OPERATOR","->",733],["T_STRING","addChild",733],"(",["T_CONSTANT_ENCAPSED_STRING","'Country'",733],",",["T_WHITESPACE"," ",733],"(",["T_VARIABLE","$r",733],["T_OBJECT_OPERATOR","->",733],["T_STRING","getDestCountryId",733],"(",")",["T_WHITESPACE"," ",733],["T_IS_EQUAL","==",733],["T_WHITESPACE"," ",733],["T_CONSTANT_ENCAPSED_STRING","'GB'",733],["T_WHITESPACE"," ",733],"?",["T_WHITESPACE"," ",733],["T_CONSTANT_ENCAPSED_STRING","'UK'",733],["T_WHITESPACE"," ",733],":",["T_WHITESPACE"," ",733],["T_VARIABLE","$r",733],["T_OBJECT_OPERATOR","->",733],["T_STRING","getDestCountryId",733],"(",")",")",")",";",["T_WHITESPACE","\n        ",733],["T_VARIABLE","$receiverAddress",734],["T_OBJECT_OPERATOR","->",734],["T_STRING","addChild",734],"(",["T_CONSTANT_ENCAPSED_STRING","'PostalCode'",734],",",["T_WHITESPACE"," ",734],["T_VARIABLE","$r",734],["T_OBJECT_OPERATOR","->",734],["T_STRING","getDestPostal",734],"(",")",")",";",["T_WHITESPACE","\n\n        ",734],["T_IF","if",736],["T_WHITESPACE"," ",736],"(",["T_VARIABLE","$r",736],["T_OBJECT_OPERATOR","->",736],["T_STRING","getAction",736],"(",")",["T_WHITESPACE"," ",736],["T_IS_EQUAL","==",736],["T_WHITESPACE"," ",736],["T_CONSTANT_ENCAPSED_STRING","'GenerateLabel'",736],")",["T_WHITESPACE"," ",736],"{",["T_WHITESPACE","\n            ",736],["T_VARIABLE","$label",737],["T_WHITESPACE"," ",737],"=",["T_WHITESPACE"," ",737],["T_VARIABLE","$shipment",737],["T_OBJECT_OPERATOR","->",737],["T_STRING","addChild",737],"(",["T_CONSTANT_ENCAPSED_STRING","'ShipmentProcessingInstructions'",737],")",["T_OBJECT_OPERATOR","->",737],["T_STRING","addChild",737],"(",["T_CONSTANT_ENCAPSED_STRING","'Label'",737],")",";",["T_WHITESPACE","\n            ",737],["T_VARIABLE","$label",738],["T_OBJECT_OPERATOR","->",738],["T_STRING","addChild",738],"(",["T_CONSTANT_ENCAPSED_STRING","'ImageType'",738],",",["T_WHITESPACE"," ",738],["T_CONSTANT_ENCAPSED_STRING","'PNG'",738],")",";",["T_WHITESPACE","\n        ",738],"}",["T_WHITESPACE","\n    ",739],"}",["T_WHITESPACE","\n\n    ",740],["T_DOC_COMMENT","\/**\n     * Parse xml response and return result\n     *\n     * @param string $response\n     * @return Mage_Shipping_Model_Rate_Result|Varien_Object\n     *\/",742],["T_WHITESPACE","\n    ",747],["T_PROTECTED","protected",748],["T_WHITESPACE"," ",748],["T_FUNCTION","function",748],["T_WHITESPACE"," ",748],["T_STRING","_parseXmlResponse",748],"(",["T_VARIABLE","$response",748],")",["T_WHITESPACE","\n    ",748],"{",["T_WHITESPACE","\n        ",749],["T_VARIABLE","$r",750],["T_WHITESPACE"," ",750],"=",["T_WHITESPACE"," ",750],["T_VARIABLE","$this",750],["T_OBJECT_OPERATOR","->",750],["T_STRING","_rawRequest",750],";",["T_WHITESPACE","\n        ",750],["T_VARIABLE","$costArr",751],["T_WHITESPACE"," ",751],"=",["T_WHITESPACE"," ",751],["T_ARRAY","array",751],"(",")",";",["T_WHITESPACE","\n        ",751],["T_VARIABLE","$priceArr",752],["T_WHITESPACE"," ",752],"=",["T_WHITESPACE"," ",752],["T_ARRAY","array",752],"(",")",";",["T_WHITESPACE","\n        ",752],["T_VARIABLE","$errorTitle",753],["T_WHITESPACE"," ",753],"=",["T_WHITESPACE"," ",753],["T_CONSTANT_ENCAPSED_STRING","'Unable to retrieve quotes'",753],";",["T_WHITESPACE","\n\n        ",753],["T_IF","if",755],["T_WHITESPACE"," ",755],"(",["T_STRING","strlen",755],"(",["T_STRING","trim",755],"(",["T_VARIABLE","$response",755],")",")",["T_WHITESPACE"," ",755],">",["T_WHITESPACE"," ",755],["T_LNUMBER","0",755],")",["T_WHITESPACE"," ",755],"{",["T_WHITESPACE","\n            ",755],["T_IF","if",756],["T_WHITESPACE"," ",756],"(",["T_STRING","strpos",756],"(",["T_STRING","trim",756],"(",["T_VARIABLE","$response",756],")",",",["T_WHITESPACE"," ",756],["T_CONSTANT_ENCAPSED_STRING","'<?xml'",756],")",["T_WHITESPACE"," ",756],["T_IS_IDENTICAL","===",756],["T_WHITESPACE"," ",756],["T_LNUMBER","0",756],")",["T_WHITESPACE"," ",756],"{",["T_WHITESPACE","\n                ",756],["T_VARIABLE","$xml",757],["T_WHITESPACE"," ",757],"=",["T_WHITESPACE"," ",757],["T_STRING","simplexml_load_string",757],"(",["T_VARIABLE","$response",757],")",";",["T_WHITESPACE","\n                ",757],["T_IF","if",758],["T_WHITESPACE"," ",758],"(",["T_STRING","is_object",758],"(",["T_VARIABLE","$xml",758],")",")",["T_WHITESPACE"," ",758],"{",["T_WHITESPACE","\n                    ",758],["T_IF","if",759],["T_WHITESPACE"," ",759],"(",["T_WHITESPACE","\n                        ",759],["T_STRING","is_object",760],"(",["T_VARIABLE","$xml",760],["T_OBJECT_OPERATOR","->",760],["T_STRING","Faults",760],")",["T_WHITESPACE","\n                        ",760],["T_BOOLEAN_AND","&&",761],["T_WHITESPACE"," ",761],["T_STRING","is_object",761],"(",["T_VARIABLE","$xml",761],["T_OBJECT_OPERATOR","->",761],["T_STRING","Faults",761],["T_OBJECT_OPERATOR","->",761],["T_STRING","Fault",761],")",["T_WHITESPACE","\n                        ",761],["T_BOOLEAN_AND","&&",762],["T_WHITESPACE"," ",762],["T_STRING","is_object",762],"(",["T_VARIABLE","$xml",762],["T_OBJECT_OPERATOR","->",762],["T_STRING","Faults",762],["T_OBJECT_OPERATOR","->",762],["T_STRING","Fault",762],["T_OBJECT_OPERATOR","->",762],["T_STRING","Code",762],")",["T_WHITESPACE","\n                        ",762],["T_BOOLEAN_AND","&&",763],["T_WHITESPACE"," ",763],["T_STRING","is_object",763],"(",["T_VARIABLE","$xml",763],["T_OBJECT_OPERATOR","->",763],["T_STRING","Faults",763],["T_OBJECT_OPERATOR","->",763],["T_STRING","Fault",763],["T_OBJECT_OPERATOR","->",763],["T_STRING","Description",763],")",["T_WHITESPACE","\n                        ",763],["T_BOOLEAN_AND","&&",764],["T_WHITESPACE"," ",764],["T_STRING","is_object",764],"(",["T_VARIABLE","$xml",764],["T_OBJECT_OPERATOR","->",764],["T_STRING","Faults",764],["T_OBJECT_OPERATOR","->",764],["T_STRING","Fault",764],["T_OBJECT_OPERATOR","->",764],["T_STRING","Context",764],")",["T_WHITESPACE","\n                    ",764],")",["T_WHITESPACE"," ",765],"{",["T_WHITESPACE","\n                        ",765],["T_VARIABLE","$code",766],["T_WHITESPACE"," ",766],"=",["T_WHITESPACE"," ",766],["T_STRING_CAST","(string)",766],["T_VARIABLE","$xml",766],["T_OBJECT_OPERATOR","->",766],["T_STRING","Faults",766],["T_OBJECT_OPERATOR","->",766],["T_STRING","Fault",766],["T_OBJECT_OPERATOR","->",766],["T_STRING","Code",766],";",["T_WHITESPACE","\n                        ",766],["T_VARIABLE","$description",767],["T_WHITESPACE"," ",767],"=",["T_WHITESPACE"," ",767],["T_VARIABLE","$xml",767],["T_OBJECT_OPERATOR","->",767],["T_STRING","Faults",767],["T_OBJECT_OPERATOR","->",767],["T_STRING","Fault",767],["T_OBJECT_OPERATOR","->",767],["T_STRING","Description",767],";",["T_WHITESPACE","\n                        ",767],["T_VARIABLE","$context",768],["T_WHITESPACE"," ",768],"=",["T_WHITESPACE"," ",768],["T_VARIABLE","$xml",768],["T_OBJECT_OPERATOR","->",768],["T_STRING","Faults",768],["T_OBJECT_OPERATOR","->",768],["T_STRING","Fault",768],["T_OBJECT_OPERATOR","->",768],["T_STRING","Context",768],";",["T_WHITESPACE","\n                        ",768],["T_VARIABLE","$this",769],["T_OBJECT_OPERATOR","->",769],["T_STRING","_errors",769],"[",["T_VARIABLE","$code",769],"]",["T_WHITESPACE"," ",769],"=",["T_WHITESPACE"," ",769],["T_STRING","Mage",769],["T_DOUBLE_COLON","::",769],["T_STRING","helper",769],"(",["T_CONSTANT_ENCAPSED_STRING","'usa'",769],")",["T_OBJECT_OPERATOR","->",769],["T_STRING","__",769],"(",["T_CONSTANT_ENCAPSED_STRING","'Error #%s : %s (%s)'",769],",",["T_WHITESPACE"," ",769],["T_VARIABLE","$code",769],",",["T_WHITESPACE"," ",769],["T_VARIABLE","$description",769],",",["T_WHITESPACE"," ",769],["T_VARIABLE","$context",769],")",";",["T_WHITESPACE","\n                    ",769],"}",["T_WHITESPACE"," ",770],["T_ELSE","else",770],["T_WHITESPACE"," ",770],"{",["T_WHITESPACE","\n                        ",770],["T_IF","if",771],["T_WHITESPACE"," ",771],"(",["T_VARIABLE","$r",771],["T_OBJECT_OPERATOR","->",771],["T_STRING","getDestCountryId",771],"(",")",["T_WHITESPACE"," ",771],["T_IS_EQUAL","==",771],["T_WHITESPACE"," ",771],["T_STRING","self",771],["T_DOUBLE_COLON","::",771],["T_STRING","USA_COUNTRY_ID",771],")",["T_WHITESPACE"," ",771],"{",["T_WHITESPACE","\n                            ",771],["T_IF","if",772],["T_WHITESPACE"," ",772],"(",["T_VARIABLE","$xml",772],["T_OBJECT_OPERATOR","->",772],["T_STRING","Shipment",772],")",["T_WHITESPACE"," ",772],"{",["T_WHITESPACE","\n                                ",772],["T_FOREACH","foreach",773],["T_WHITESPACE"," ",773],"(",["T_VARIABLE","$xml",773],["T_OBJECT_OPERATOR","->",773],["T_STRING","Shipment",773],["T_WHITESPACE"," ",773],["T_AS","as",773],["T_WHITESPACE"," ",773],["T_VARIABLE","$shipXml",773],")",["T_WHITESPACE"," ",773],"{",["T_WHITESPACE","\n                                    ",773],["T_VARIABLE","$this",774],["T_OBJECT_OPERATOR","->",774],["T_STRING","_parseXmlObject",774],"(",["T_VARIABLE","$shipXml",774],")",";",["T_WHITESPACE","\n                                ",774],"}",["T_WHITESPACE","\n                            ",775],"}",["T_WHITESPACE"," ",776],["T_ELSE","else",776],["T_WHITESPACE"," ",776],"{",["T_WHITESPACE","\n                                ",776],["T_VARIABLE","$this",777],["T_OBJECT_OPERATOR","->",777],["T_STRING","_errors",777],"[","]",["T_WHITESPACE"," ",777],"=",["T_WHITESPACE"," ",777],["T_STRING","Mage",777],["T_DOUBLE_COLON","::",777],["T_STRING","helper",777],"(",["T_CONSTANT_ENCAPSED_STRING","'usa'",777],")",["T_OBJECT_OPERATOR","->",777],["T_STRING","__",777],"(",["T_CONSTANT_ENCAPSED_STRING","'Shipment is not available.'",777],")",";",["T_WHITESPACE","\n                            ",777],"}",["T_WHITESPACE","\n                        ",778],"}",["T_WHITESPACE"," ",779],["T_ELSE","else",779],["T_WHITESPACE"," ",779],"{",["T_WHITESPACE","\n                            ",779],["T_VARIABLE","$shipXml",780],["T_WHITESPACE"," ",780],"=",["T_WHITESPACE"," ",780],["T_VARIABLE","$xml",780],["T_OBJECT_OPERATOR","->",780],["T_STRING","IntlShipment",780],";",["T_WHITESPACE","\n                            ",780],["T_VARIABLE","$this",781],["T_OBJECT_OPERATOR","->",781],["T_STRING","_parseXmlObject",781],"(",["T_VARIABLE","$shipXml",781],")",";",["T_WHITESPACE","\n                        ",781],"}",["T_WHITESPACE","\n                        ",782],["T_VARIABLE","$shipXml",783],["T_WHITESPACE"," ",783],"=",["T_WHITESPACE"," ",783],"(","(",["T_VARIABLE","$r",783],["T_OBJECT_OPERATOR","->",783],["T_STRING","getDestCountryId",783],"(",")",["T_WHITESPACE"," ",783],["T_IS_EQUAL","==",783],["T_WHITESPACE"," ",783],["T_STRING","self",783],["T_DOUBLE_COLON","::",783],["T_STRING","USA_COUNTRY_ID",783],")",["T_WHITESPACE","\n                            ",783],"?",["T_WHITESPACE"," ",784],["T_VARIABLE","$xml",784],["T_OBJECT_OPERATOR","->",784],["T_STRING","Shipment",784],["T_WHITESPACE","\n                            ",784],":",["T_WHITESPACE"," ",785],["T_VARIABLE","$xml",785],["T_OBJECT_OPERATOR","->",785],["T_STRING","IntlShipment",785],["T_WHITESPACE","\n                        ",785],")",";",["T_WHITESPACE","\n                    ",786],"}",["T_WHITESPACE","\n                ",787],"}",["T_WHITESPACE","\n            ",788],"}",["T_WHITESPACE"," ",789],["T_ELSE","else",789],["T_WHITESPACE"," ",789],"{",["T_WHITESPACE","\n                ",789],["T_VARIABLE","$this",790],["T_OBJECT_OPERATOR","->",790],["T_STRING","_errors",790],"[","]",["T_WHITESPACE"," ",790],"=",["T_WHITESPACE"," ",790],["T_STRING","Mage",790],["T_DOUBLE_COLON","::",790],["T_STRING","helper",790],"(",["T_CONSTANT_ENCAPSED_STRING","'usa'",790],")",["T_OBJECT_OPERATOR","->",790],["T_STRING","__",790],"(",["T_CONSTANT_ENCAPSED_STRING","'The response is in wrong format.'",790],")",";",["T_WHITESPACE","\n            ",790],"}",["T_WHITESPACE","\n        ",791],"}",["T_WHITESPACE","\n\n        ",792],["T_IF","if",794],["T_WHITESPACE"," ",794],"(",["T_VARIABLE","$this",794],["T_OBJECT_OPERATOR","->",794],["T_STRING","_rawRequest",794],["T_OBJECT_OPERATOR","->",794],["T_STRING","getAction",794],"(",")",["T_WHITESPACE"," ",794],["T_IS_EQUAL","==",794],["T_WHITESPACE"," ",794],["T_CONSTANT_ENCAPSED_STRING","'GenerateLabel'",794],")",["T_WHITESPACE"," ",794],"{",["T_WHITESPACE","\n            ",794],["T_VARIABLE","$result",795],["T_WHITESPACE"," ",795],"=",["T_WHITESPACE"," ",795],["T_NEW","new",795],["T_WHITESPACE"," ",795],["T_STRING","Varien_Object",795],"(",")",";",["T_WHITESPACE","\n            ",795],["T_IF","if",796],["T_WHITESPACE"," ",796],"(","!",["T_EMPTY","empty",796],"(",["T_VARIABLE","$this",796],["T_OBJECT_OPERATOR","->",796],["T_STRING","_errors",796],")",")",["T_WHITESPACE"," ",796],"{",["T_WHITESPACE","\n                ",796],["T_VARIABLE","$result",797],["T_OBJECT_OPERATOR","->",797],["T_STRING","setErrors",797],"(",["T_STRING","implode",797],"(",["T_VARIABLE","$this",797],["T_OBJECT_OPERATOR","->",797],["T_STRING","_errors",797],",",["T_WHITESPACE"," ",797],["T_CONSTANT_ENCAPSED_STRING","'; '",797],")",")",";",["T_WHITESPACE","\n            ",797],"}",["T_WHITESPACE"," ",798],["T_ELSE","else",798],["T_WHITESPACE"," ",798],"{",["T_WHITESPACE","\n                ",798],["T_IF","if",799],["T_WHITESPACE"," ",799],"(",["T_VARIABLE","$xml",799],["T_WHITESPACE"," ",799],["T_IS_NOT_IDENTICAL","!==",799],["T_WHITESPACE"," ",799],["T_STRING","false",799],")",["T_WHITESPACE"," ",799],"{",["T_WHITESPACE","\n                    ",799],["T_IF","if",800],["T_WHITESPACE"," ",800],"(",["T_VARIABLE","$r",800],["T_OBJECT_OPERATOR","->",800],["T_STRING","getDestCountryId",800],"(",")",["T_WHITESPACE"," ",800],["T_IS_EQUAL","==",800],["T_WHITESPACE"," ",800],["T_STRING","self",800],["T_DOUBLE_COLON","::",800],["T_STRING","USA_COUNTRY_ID",800],")",["T_WHITESPACE"," ",800],"{",["T_WHITESPACE","\n                        ",800],["T_VARIABLE","$shippingLabelContent",801],["T_WHITESPACE"," ",801],"=",["T_WHITESPACE"," ",801],["T_STRING","base64_decode",801],"(",["T_STRING_CAST","(string)",801],["T_VARIABLE","$xml",801],["T_OBJECT_OPERATOR","->",801],["T_STRING","Shipment",801],["T_OBJECT_OPERATOR","->",801],["T_STRING","Label",801],["T_OBJECT_OPERATOR","->",801],["T_STRING","Image",801],")",";",["T_WHITESPACE","\n                        ",801],["T_VARIABLE","$trackingNumber",802],["T_WHITESPACE"," ",802],"=",["T_WHITESPACE"," ",802],["T_STRING_CAST","(string)",802],["T_VARIABLE","$xml",802],["T_OBJECT_OPERATOR","->",802],["T_STRING","Shipment",802],["T_OBJECT_OPERATOR","->",802],["T_STRING","ShipmentDetail",802],["T_OBJECT_OPERATOR","->",802],["T_STRING","AirbillNbr",802],";",["T_WHITESPACE","\n                    ",802],"}",["T_WHITESPACE"," ",803],["T_ELSE","else",803],["T_WHITESPACE"," ",803],"{",["T_WHITESPACE","\n                        ",803],["T_VARIABLE","$shippingLabelContent",804],["T_WHITESPACE"," ",804],"=",["T_WHITESPACE"," ",804],["T_STRING","base64_decode",804],"(",["T_STRING_CAST","(string)",804],["T_VARIABLE","$xml",804],["T_OBJECT_OPERATOR","->",804],["T_STRING","IntlShipment",804],["T_OBJECT_OPERATOR","->",804],["T_STRING","Label",804],["T_OBJECT_OPERATOR","->",804],["T_STRING","Image",804],")",";",["T_WHITESPACE","\n                        ",804],["T_VARIABLE","$trackingNumber",805],["T_WHITESPACE"," ",805],"=",["T_WHITESPACE"," ",805],["T_STRING_CAST","(string)",805],["T_VARIABLE","$xml",805],["T_OBJECT_OPERATOR","->",805],["T_STRING","IntlShipment",805],["T_OBJECT_OPERATOR","->",805],["T_STRING","ShipmentDetail",805],["T_OBJECT_OPERATOR","->",805],["T_STRING","AirbillNbr",805],";",["T_WHITESPACE","\n                    ",805],"}",["T_WHITESPACE","\n                ",806],"}",["T_WHITESPACE","\n                ",807],["T_VARIABLE","$result",808],["T_OBJECT_OPERATOR","->",808],["T_STRING","setShippingLabelContent",808],"(",["T_VARIABLE","$shippingLabelContent",808],")",";",["T_WHITESPACE","\n                ",808],["T_VARIABLE","$result",809],["T_OBJECT_OPERATOR","->",809],["T_STRING","setTrackingNumber",809],"(",["T_VARIABLE","$trackingNumber",809],")",";",["T_WHITESPACE","\n            ",809],"}",["T_WHITESPACE","\n            ",810],["T_RETURN","return",811],["T_WHITESPACE"," ",811],["T_VARIABLE","$result",811],";",["T_WHITESPACE","\n        ",811],"}",["T_WHITESPACE"," ",812],["T_ELSE","else",812],["T_WHITESPACE"," ",812],"{",["T_WHITESPACE","\n            ",812],["T_VARIABLE","$result",813],["T_WHITESPACE"," ",813],"=",["T_WHITESPACE"," ",813],["T_STRING","Mage",813],["T_DOUBLE_COLON","::",813],["T_STRING","getModel",813],"(",["T_CONSTANT_ENCAPSED_STRING","'shipping\/rate_result'",813],")",";",["T_WHITESPACE","\n            ",813],["T_IF","if",814],["T_WHITESPACE"," ",814],"(",["T_VARIABLE","$this",814],["T_OBJECT_OPERATOR","->",814],["T_STRING","_dhlRates",814],")",["T_WHITESPACE"," ",814],"{",["T_WHITESPACE","\n                ",814],["T_FOREACH","foreach",815],["T_WHITESPACE"," ",815],"(",["T_VARIABLE","$this",815],["T_OBJECT_OPERATOR","->",815],["T_STRING","_dhlRates",815],["T_WHITESPACE"," ",815],["T_AS","as",815],["T_WHITESPACE"," ",815],["T_VARIABLE","$rate",815],")",["T_WHITESPACE"," ",815],"{",["T_WHITESPACE","\n                    ",815],["T_VARIABLE","$method",816],["T_WHITESPACE"," ",816],"=",["T_WHITESPACE"," ",816],["T_VARIABLE","$rate",816],"[",["T_CONSTANT_ENCAPSED_STRING","'service'",816],"]",";",["T_WHITESPACE","\n                    ",816],["T_VARIABLE","$data",817],["T_WHITESPACE"," ",817],"=",["T_WHITESPACE"," ",817],["T_VARIABLE","$rate",817],"[",["T_CONSTANT_ENCAPSED_STRING","'data'",817],"]",";",["T_WHITESPACE","\n                    ",817],["T_VARIABLE","$rate",818],["T_WHITESPACE"," ",818],"=",["T_WHITESPACE"," ",818],["T_STRING","Mage",818],["T_DOUBLE_COLON","::",818],["T_STRING","getModel",818],"(",["T_CONSTANT_ENCAPSED_STRING","'shipping\/rate_result_method'",818],")",";",["T_WHITESPACE","\n                    ",818],["T_VARIABLE","$rate",819],["T_OBJECT_OPERATOR","->",819],["T_STRING","setCarrier",819],"(",["T_CONSTANT_ENCAPSED_STRING","'dhl'",819],")",";",["T_WHITESPACE","\n                    ",819],["T_VARIABLE","$rate",820],["T_OBJECT_OPERATOR","->",820],["T_STRING","setCarrierTitle",820],"(",["T_VARIABLE","$this",820],["T_OBJECT_OPERATOR","->",820],["T_STRING","getConfigData",820],"(",["T_CONSTANT_ENCAPSED_STRING","'title'",820],")",")",";",["T_WHITESPACE","\n                    ",820],["T_VARIABLE","$rate",821],["T_OBJECT_OPERATOR","->",821],["T_STRING","setMethod",821],"(",["T_VARIABLE","$method",821],")",";",["T_WHITESPACE","\n                    ",821],["T_VARIABLE","$rate",822],["T_OBJECT_OPERATOR","->",822],["T_STRING","setMethodTitle",822],"(",["T_VARIABLE","$data",822],"[",["T_CONSTANT_ENCAPSED_STRING","'term'",822],"]",")",";",["T_WHITESPACE","\n                    ",822],["T_VARIABLE","$rate",823],["T_OBJECT_OPERATOR","->",823],["T_STRING","setCost",823],"(",["T_VARIABLE","$data",823],"[",["T_CONSTANT_ENCAPSED_STRING","'price_total'",823],"]",")",";",["T_WHITESPACE","\n                    ",823],["T_VARIABLE","$rate",824],["T_OBJECT_OPERATOR","->",824],["T_STRING","setPrice",824],"(",["T_VARIABLE","$data",824],"[",["T_CONSTANT_ENCAPSED_STRING","'price_total'",824],"]",")",";",["T_WHITESPACE","\n                    ",824],["T_VARIABLE","$result",825],["T_OBJECT_OPERATOR","->",825],["T_STRING","append",825],"(",["T_VARIABLE","$rate",825],")",";",["T_WHITESPACE","\n                ",825],"}",["T_WHITESPACE","\n            ",826],"}",["T_WHITESPACE"," ",827],["T_ELSE","else",827],["T_WHITESPACE"," ",827],["T_IF","if",827],["T_WHITESPACE"," ",827],"(","!",["T_EMPTY","empty",827],"(",["T_VARIABLE","$this",827],["T_OBJECT_OPERATOR","->",827],["T_STRING","_errors",827],")",")",["T_WHITESPACE"," ",827],"{",["T_WHITESPACE","\n                ",827],["T_VARIABLE","$error",828],["T_WHITESPACE"," ",828],"=",["T_WHITESPACE"," ",828],["T_STRING","Mage",828],["T_DOUBLE_COLON","::",828],["T_STRING","getModel",828],"(",["T_CONSTANT_ENCAPSED_STRING","'shipping\/rate_result_error'",828],")",";",["T_WHITESPACE","\n                ",828],["T_VARIABLE","$error",829],["T_OBJECT_OPERATOR","->",829],["T_STRING","setCarrier",829],"(",["T_CONSTANT_ENCAPSED_STRING","'dhl'",829],")",";",["T_WHITESPACE","\n                ",829],["T_VARIABLE","$error",830],["T_OBJECT_OPERATOR","->",830],["T_STRING","setCarrierTitle",830],"(",["T_VARIABLE","$this",830],["T_OBJECT_OPERATOR","->",830],["T_STRING","getConfigData",830],"(",["T_CONSTANT_ENCAPSED_STRING","'title'",830],")",")",";",["T_WHITESPACE","\n                ",830],["T_VARIABLE","$error",831],["T_OBJECT_OPERATOR","->",831],["T_STRING","setErrorMessage",831],"(",["T_VARIABLE","$this",831],["T_OBJECT_OPERATOR","->",831],["T_STRING","getConfigData",831],"(",["T_CONSTANT_ENCAPSED_STRING","'specificerrmsg'",831],")",")",";",["T_WHITESPACE","\n                ",831],["T_VARIABLE","$result",832],["T_OBJECT_OPERATOR","->",832],["T_STRING","append",832],"(",["T_VARIABLE","$error",832],")",";",["T_WHITESPACE","\n            ",832],"}",["T_WHITESPACE","\n            ",833],["T_RETURN","return",834],["T_WHITESPACE"," ",834],["T_VARIABLE","$result",834],";",["T_WHITESPACE","\n        ",834],"}",["T_WHITESPACE","\n    ",835],"}",["T_WHITESPACE","\n\n    ",836],["T_DOC_COMMENT","\/**\n     * Parse xml object\n     *\n     * @param mixed $shipXml\n     * @return Mage_Usa_Model_Shipping_Carrier_Dhl\n     *\/",838],["T_WHITESPACE","\n    ",843],["T_PROTECTED","protected",844],["T_WHITESPACE"," ",844],["T_FUNCTION","function",844],["T_WHITESPACE"," ",844],["T_STRING","_parseXmlObject",844],"(",["T_VARIABLE","$shipXml",844],")",["T_WHITESPACE","\n    ",844],"{",["T_WHITESPACE","\n        ",845],["T_IF","if",846],["T_WHITESPACE"," ",846],"(",["T_WHITESPACE","\n            ",846],["T_STRING","is_object",847],"(",["T_VARIABLE","$shipXml",847],["T_OBJECT_OPERATOR","->",847],["T_STRING","Faults",847],")",["T_WHITESPACE","\n            ",847],["T_BOOLEAN_AND","&&",848],["T_WHITESPACE"," ",848],["T_STRING","is_object",848],"(",["T_VARIABLE","$shipXml",848],["T_OBJECT_OPERATOR","->",848],["T_STRING","Faults",848],["T_OBJECT_OPERATOR","->",848],["T_STRING","Fault",848],")",["T_WHITESPACE","\n            ",848],["T_BOOLEAN_AND","&&",849],["T_WHITESPACE"," ",849],["T_STRING","is_object",849],"(",["T_VARIABLE","$shipXml",849],["T_OBJECT_OPERATOR","->",849],["T_STRING","Faults",849],["T_OBJECT_OPERATOR","->",849],["T_STRING","Fault",849],["T_OBJECT_OPERATOR","->",849],["T_STRING","Desc",849],")",["T_WHITESPACE","\n            ",849],["T_BOOLEAN_AND","&&",850],["T_WHITESPACE"," ",850],["T_STRING","intval",850],"(",["T_VARIABLE","$shipXml",850],["T_OBJECT_OPERATOR","->",850],["T_STRING","Faults",850],["T_OBJECT_OPERATOR","->",850],["T_STRING","Fault",850],["T_OBJECT_OPERATOR","->",850],["T_STRING","Code",850],")",["T_WHITESPACE"," ",850],["T_IS_NOT_EQUAL","!=",850],["T_WHITESPACE"," ",850],["T_STRING","self",850],["T_DOUBLE_COLON","::",850],["T_STRING","SUCCESS_CODE",850],["T_WHITESPACE","\n            ",850],["T_BOOLEAN_AND","&&",851],["T_WHITESPACE"," ",851],["T_STRING","intval",851],"(",["T_VARIABLE","$shipXml",851],["T_OBJECT_OPERATOR","->",851],["T_STRING","Faults",851],["T_OBJECT_OPERATOR","->",851],["T_STRING","Fault",851],["T_OBJECT_OPERATOR","->",851],["T_STRING","Code",851],")",["T_WHITESPACE"," ",851],["T_IS_NOT_EQUAL","!=",851],["T_WHITESPACE"," ",851],["T_STRING","self",851],["T_DOUBLE_COLON","::",851],["T_STRING","SUCCESS_LABEL_CODE",851],["T_WHITESPACE","\n        ",851],")",["T_WHITESPACE"," ",852],"{",["T_WHITESPACE","\n            ",852],["T_VARIABLE","$code",853],["T_WHITESPACE"," ",853],"=",["T_WHITESPACE"," ",853],["T_STRING_CAST","(string)",853],["T_VARIABLE","$shipXml",853],["T_OBJECT_OPERATOR","->",853],["T_STRING","Faults",853],["T_OBJECT_OPERATOR","->",853],["T_STRING","Fault",853],["T_OBJECT_OPERATOR","->",853],["T_STRING","Code",853],";",["T_WHITESPACE","\n            ",853],["T_VARIABLE","$description",854],["T_WHITESPACE"," ",854],"=",["T_WHITESPACE"," ",854],["T_VARIABLE","$shipXml",854],["T_OBJECT_OPERATOR","->",854],["T_STRING","Faults",854],["T_OBJECT_OPERATOR","->",854],["T_STRING","Fault",854],["T_OBJECT_OPERATOR","->",854],["T_STRING","Desc",854],";",["T_WHITESPACE","\n            ",854],["T_VARIABLE","$this",855],["T_OBJECT_OPERATOR","->",855],["T_STRING","_errors",855],"[",["T_VARIABLE","$code",855],"]",["T_WHITESPACE"," ",855],"=",["T_WHITESPACE"," ",855],["T_STRING","Mage",855],["T_DOUBLE_COLON","::",855],["T_STRING","helper",855],"(",["T_CONSTANT_ENCAPSED_STRING","'usa'",855],")",["T_OBJECT_OPERATOR","->",855],["T_STRING","__",855],"(",["T_CONSTANT_ENCAPSED_STRING","'Error #%s: %s'",855],",",["T_WHITESPACE"," ",855],["T_VARIABLE","$code",855],",",["T_WHITESPACE"," ",855],["T_VARIABLE","$description",855],")",";",["T_WHITESPACE","\n        ",855],"}",["T_WHITESPACE"," ",856],["T_ELSEIF","elseif",856],["T_WHITESPACE"," ",856],"(",["T_WHITESPACE","\n            ",856],["T_STRING","is_object",857],"(",["T_VARIABLE","$shipXml",857],["T_OBJECT_OPERATOR","->",857],["T_STRING","Faults",857],")",["T_WHITESPACE","\n            ",857],["T_BOOLEAN_AND","&&",858],["T_WHITESPACE"," ",858],["T_STRING","is_object",858],"(",["T_VARIABLE","$shipXml",858],["T_OBJECT_OPERATOR","->",858],["T_STRING","Result",858],["T_OBJECT_OPERATOR","->",858],["T_STRING","Code",858],")",["T_WHITESPACE","\n            ",858],["T_BOOLEAN_AND","&&",859],["T_WHITESPACE"," ",859],["T_STRING","is_object",859],"(",["T_VARIABLE","$shipXml",859],["T_OBJECT_OPERATOR","->",859],["T_STRING","Result",859],["T_OBJECT_OPERATOR","->",859],["T_STRING","Desc",859],")",["T_WHITESPACE","\n            ",859],["T_BOOLEAN_AND","&&",860],["T_WHITESPACE"," ",860],["T_STRING","intval",860],"(",["T_VARIABLE","$shipXml",860],["T_OBJECT_OPERATOR","->",860],["T_STRING","Result",860],["T_OBJECT_OPERATOR","->",860],["T_STRING","Code",860],")",["T_WHITESPACE"," ",860],["T_IS_NOT_EQUAL","!=",860],["T_WHITESPACE"," ",860],["T_STRING","self",860],["T_DOUBLE_COLON","::",860],["T_STRING","SUCCESS_CODE",860],["T_WHITESPACE","\n            ",860],["T_BOOLEAN_AND","&&",861],["T_WHITESPACE"," ",861],["T_STRING","intval",861],"(",["T_VARIABLE","$shipXml",861],["T_OBJECT_OPERATOR","->",861],["T_STRING","Result",861],["T_OBJECT_OPERATOR","->",861],["T_STRING","Code",861],")",["T_WHITESPACE"," ",861],["T_IS_NOT_EQUAL","!=",861],["T_WHITESPACE"," ",861],["T_STRING","self",861],["T_DOUBLE_COLON","::",861],["T_STRING","SUCCESS_LABEL_CODE",861],["T_WHITESPACE","\n        ",861],")",["T_WHITESPACE"," ",862],"{",["T_WHITESPACE","\n            ",862],["T_VARIABLE","$code",863],["T_WHITESPACE"," ",863],"=",["T_WHITESPACE"," ",863],["T_STRING_CAST","(string)",863],["T_VARIABLE","$shipXml",863],["T_OBJECT_OPERATOR","->",863],["T_STRING","Result",863],["T_OBJECT_OPERATOR","->",863],["T_STRING","Code",863],";",["T_WHITESPACE","\n            ",863],["T_VARIABLE","$description",864],["T_WHITESPACE"," ",864],"=",["T_WHITESPACE"," ",864],["T_VARIABLE","$shipXml",864],["T_OBJECT_OPERATOR","->",864],["T_STRING","Result",864],["T_OBJECT_OPERATOR","->",864],["T_STRING","Desc",864],";",["T_WHITESPACE","\n            ",864],["T_VARIABLE","$this",865],["T_OBJECT_OPERATOR","->",865],["T_STRING","_errors",865],"[",["T_VARIABLE","$code",865],"]",["T_WHITESPACE"," ",865],"=",["T_WHITESPACE"," ",865],["T_STRING","Mage",865],["T_DOUBLE_COLON","::",865],["T_STRING","helper",865],"(",["T_CONSTANT_ENCAPSED_STRING","'usa'",865],")",["T_OBJECT_OPERATOR","->",865],["T_STRING","__",865],"(",["T_CONSTANT_ENCAPSED_STRING","'Error #%s: %s'",865],",",["T_WHITESPACE"," ",865],["T_VARIABLE","$code",865],",",["T_WHITESPACE"," ",865],["T_VARIABLE","$description",865],")",";",["T_WHITESPACE","\n        ",865],"}",["T_WHITESPACE"," ",866],["T_ELSE","else",866],["T_WHITESPACE"," ",866],"{",["T_WHITESPACE","\n            ",866],["T_VARIABLE","$this",867],["T_OBJECT_OPERATOR","->",867],["T_STRING","_addRate",867],"(",["T_VARIABLE","$shipXml",867],")",";",["T_WHITESPACE","\n        ",867],"}",["T_WHITESPACE","\n        ",868],["T_RETURN","return",869],["T_WHITESPACE"," ",869],["T_VARIABLE","$this",869],";",["T_WHITESPACE","\n    ",869],"}",["T_WHITESPACE","\n\n    ",870],["T_DOC_COMMENT","\/**\n     * Get configuration data of carrier\n     *\n     * @param string $type\n     * @param string $code\n     * @return array|bool\n     *\/",872],["T_WHITESPACE","\n    ",878],["T_PUBLIC","public",879],["T_WHITESPACE"," ",879],["T_FUNCTION","function",879],["T_WHITESPACE"," ",879],["T_STRING","getCode",879],"(",["T_VARIABLE","$type",879],",",["T_WHITESPACE"," ",879],["T_VARIABLE","$code",879],["T_WHITESPACE"," ",879],"=",["T_WHITESPACE"," ",879],["T_CONSTANT_ENCAPSED_STRING","''",879],")",["T_WHITESPACE","\n    ",879],"{",["T_WHITESPACE","\n        ",880],["T_STATIC","static",881],["T_WHITESPACE"," ",881],["T_VARIABLE","$codes",881],";",["T_WHITESPACE","\n        ",881],["T_VARIABLE","$codes",882],["T_WHITESPACE"," ",882],"=",["T_WHITESPACE"," ",882],["T_ARRAY","array",882],"(",["T_WHITESPACE","\n            ",882],["T_CONSTANT_ENCAPSED_STRING","'service'",883],["T_WHITESPACE"," ",883],["T_DOUBLE_ARROW","=>",883],["T_WHITESPACE"," ",883],["T_ARRAY","array",883],"(",["T_WHITESPACE","\n                ",883],["T_CONSTANT_ENCAPSED_STRING","'IE'",884],["T_WHITESPACE"," ",884],["T_DOUBLE_ARROW","=>",884],["T_WHITESPACE"," ",884],["T_STRING","Mage",884],["T_DOUBLE_COLON","::",884],["T_STRING","helper",884],"(",["T_CONSTANT_ENCAPSED_STRING","'usa'",884],")",["T_OBJECT_OPERATOR","->",884],["T_STRING","__",884],"(",["T_CONSTANT_ENCAPSED_STRING","'International Express'",884],")",",",["T_WHITESPACE","\n                ",884],["T_CONSTANT_ENCAPSED_STRING","'E SAT'",885],["T_WHITESPACE"," ",885],["T_DOUBLE_ARROW","=>",885],["T_WHITESPACE"," ",885],["T_STRING","Mage",885],["T_DOUBLE_COLON","::",885],["T_STRING","helper",885],"(",["T_CONSTANT_ENCAPSED_STRING","'usa'",885],")",["T_OBJECT_OPERATOR","->",885],["T_STRING","__",885],"(",["T_CONSTANT_ENCAPSED_STRING","'Express Saturday'",885],")",",",["T_WHITESPACE","\n                ",885],["T_CONSTANT_ENCAPSED_STRING","'E 10:30AM'",886],["T_WHITESPACE"," ",886],["T_DOUBLE_ARROW","=>",886],["T_WHITESPACE"," ",886],["T_STRING","Mage",886],["T_DOUBLE_COLON","::",886],["T_STRING","helper",886],"(",["T_CONSTANT_ENCAPSED_STRING","'usa'",886],")",["T_OBJECT_OPERATOR","->",886],["T_STRING","__",886],"(",["T_CONSTANT_ENCAPSED_STRING","'Express 10:30 AM'",886],")",",",["T_WHITESPACE","\n                ",886],["T_CONSTANT_ENCAPSED_STRING","'E'",887],["T_WHITESPACE"," ",887],["T_DOUBLE_ARROW","=>",887],["T_WHITESPACE"," ",887],["T_STRING","Mage",887],["T_DOUBLE_COLON","::",887],["T_STRING","helper",887],"(",["T_CONSTANT_ENCAPSED_STRING","'usa'",887],")",["T_OBJECT_OPERATOR","->",887],["T_STRING","__",887],"(",["T_CONSTANT_ENCAPSED_STRING","'Express'",887],")",",",["T_WHITESPACE","\n                ",887],["T_CONSTANT_ENCAPSED_STRING","'N'",888],["T_WHITESPACE"," ",888],["T_DOUBLE_ARROW","=>",888],["T_WHITESPACE"," ",888],["T_STRING","Mage",888],["T_DOUBLE_COLON","::",888],["T_STRING","helper",888],"(",["T_CONSTANT_ENCAPSED_STRING","'usa'",888],")",["T_OBJECT_OPERATOR","->",888],["T_STRING","__",888],"(",["T_CONSTANT_ENCAPSED_STRING","'Next Afternoon'",888],")",",",["T_WHITESPACE","\n                ",888],["T_CONSTANT_ENCAPSED_STRING","'S'",889],["T_WHITESPACE"," ",889],["T_DOUBLE_ARROW","=>",889],["T_WHITESPACE"," ",889],["T_STRING","Mage",889],["T_DOUBLE_COLON","::",889],["T_STRING","helper",889],"(",["T_CONSTANT_ENCAPSED_STRING","'usa'",889],")",["T_OBJECT_OPERATOR","->",889],["T_STRING","__",889],"(",["T_CONSTANT_ENCAPSED_STRING","'Second Day Service'",889],")",",",["T_WHITESPACE","\n                ",889],["T_CONSTANT_ENCAPSED_STRING","'G'",890],["T_WHITESPACE"," ",890],["T_DOUBLE_ARROW","=>",890],["T_WHITESPACE"," ",890],["T_STRING","Mage",890],["T_DOUBLE_COLON","::",890],["T_STRING","helper",890],"(",["T_CONSTANT_ENCAPSED_STRING","'usa'",890],")",["T_OBJECT_OPERATOR","->",890],["T_STRING","__",890],"(",["T_CONSTANT_ENCAPSED_STRING","'Ground'",890],")",",",["T_WHITESPACE","\n            ",890],")",",",["T_WHITESPACE","\n            ",891],["T_CONSTANT_ENCAPSED_STRING","'shipment_type'",892],["T_WHITESPACE"," ",892],["T_DOUBLE_ARROW","=>",892],["T_WHITESPACE"," ",892],["T_ARRAY","array",892],"(",["T_WHITESPACE","\n                ",892],["T_CONSTANT_ENCAPSED_STRING","'L'",893],["T_WHITESPACE"," ",893],["T_DOUBLE_ARROW","=>",893],["T_WHITESPACE"," ",893],["T_STRING","Mage",893],["T_DOUBLE_COLON","::",893],["T_STRING","helper",893],"(",["T_CONSTANT_ENCAPSED_STRING","'usa'",893],")",["T_OBJECT_OPERATOR","->",893],["T_STRING","__",893],"(",["T_CONSTANT_ENCAPSED_STRING","'Letter'",893],")",",",["T_WHITESPACE","\n                ",893],["T_CONSTANT_ENCAPSED_STRING","'P'",894],["T_WHITESPACE"," ",894],["T_DOUBLE_ARROW","=>",894],["T_WHITESPACE"," ",894],["T_STRING","Mage",894],["T_DOUBLE_COLON","::",894],["T_STRING","helper",894],"(",["T_CONSTANT_ENCAPSED_STRING","'usa'",894],")",["T_OBJECT_OPERATOR","->",894],["T_STRING","__",894],"(",["T_CONSTANT_ENCAPSED_STRING","'Package'",894],")",",",["T_WHITESPACE","\n            ",894],")",",",["T_WHITESPACE","\n            ",895],["T_CONSTANT_ENCAPSED_STRING","'international_searvice'",896],["T_WHITESPACE"," ",896],["T_DOUBLE_ARROW","=>",896],["T_WHITESPACE"," ",896],["T_CONSTANT_ENCAPSED_STRING","'IE'",896],",",["T_WHITESPACE","\n            ",896],["T_CONSTANT_ENCAPSED_STRING","'dutypayment_type'",897],["T_WHITESPACE"," ",897],["T_DOUBLE_ARROW","=>",897],["T_WHITESPACE"," ",897],["T_ARRAY","array",897],"(",["T_WHITESPACE","\n                ",897],["T_CONSTANT_ENCAPSED_STRING","'S'",898],["T_WHITESPACE"," ",898],["T_DOUBLE_ARROW","=>",898],["T_WHITESPACE"," ",898],["T_STRING","Mage",898],["T_DOUBLE_COLON","::",898],["T_STRING","helper",898],"(",["T_CONSTANT_ENCAPSED_STRING","'usa'",898],")",["T_OBJECT_OPERATOR","->",898],["T_STRING","__",898],"(",["T_CONSTANT_ENCAPSED_STRING","'Sender'",898],")",",",["T_WHITESPACE","\n                ",898],["T_CONSTANT_ENCAPSED_STRING","'R'",899],["T_WHITESPACE"," ",899],["T_DOUBLE_ARROW","=>",899],["T_WHITESPACE"," ",899],["T_STRING","Mage",899],["T_DOUBLE_COLON","::",899],["T_STRING","helper",899],"(",["T_CONSTANT_ENCAPSED_STRING","'usa'",899],")",["T_OBJECT_OPERATOR","->",899],["T_STRING","__",899],"(",["T_CONSTANT_ENCAPSED_STRING","'Receiver'",899],")",",",["T_WHITESPACE","\n                ",899],["T_CONSTANT_ENCAPSED_STRING","'3'",900],["T_WHITESPACE"," ",900],["T_DOUBLE_ARROW","=>",900],["T_WHITESPACE"," ",900],["T_STRING","Mage",900],["T_DOUBLE_COLON","::",900],["T_STRING","helper",900],"(",["T_CONSTANT_ENCAPSED_STRING","'usa'",900],")",["T_OBJECT_OPERATOR","->",900],["T_STRING","__",900],"(",["T_CONSTANT_ENCAPSED_STRING","'Third Party'",900],")",",",["T_WHITESPACE","\n            ",900],")",",",["T_WHITESPACE","\n\n            ",901],["T_CONSTANT_ENCAPSED_STRING","'special_express'",903],["T_WHITESPACE"," ",903],["T_DOUBLE_ARROW","=>",903],["T_WHITESPACE"," ",903],["T_ARRAY","array",903],"(",["T_WHITESPACE","\n                ",903],["T_CONSTANT_ENCAPSED_STRING","'E SAT'",904],["T_WHITESPACE"," ",904],["T_DOUBLE_ARROW","=>",904],["T_WHITESPACE"," ",904],["T_CONSTANT_ENCAPSED_STRING","'SAT'",904],",",["T_WHITESPACE","\n                ",904],["T_CONSTANT_ENCAPSED_STRING","'E 10:30AM'",905],["T_WHITESPACE"," ",905],["T_DOUBLE_ARROW","=>",905],["T_WHITESPACE"," ",905],["T_CONSTANT_ENCAPSED_STRING","'1030'",905],",",["T_WHITESPACE","\n            ",905],")",",",["T_WHITESPACE","\n\n            ",906],["T_CONSTANT_ENCAPSED_STRING","'descr_to_service'",908],["T_WHITESPACE"," ",908],["T_DOUBLE_ARROW","=>",908],["T_WHITESPACE"," ",908],["T_ARRAY","array",908],"(",["T_WHITESPACE","\n                ",908],["T_CONSTANT_ENCAPSED_STRING","'E SAT'",909],["T_WHITESPACE"," ",909],["T_DOUBLE_ARROW","=>",909],["T_WHITESPACE"," ",909],["T_CONSTANT_ENCAPSED_STRING","'Saturday'",909],",",["T_WHITESPACE","\n                ",909],["T_CONSTANT_ENCAPSED_STRING","'E 10:30AM'",910],["T_WHITESPACE"," ",910],["T_DOUBLE_ARROW","=>",910],["T_WHITESPACE"," ",910],["T_CONSTANT_ENCAPSED_STRING","'10:30 A.M'",910],",",["T_WHITESPACE","\n            ",910],")",",",["T_WHITESPACE","\n\n        ",911],")",";",["T_WHITESPACE","\n\n\n        ",913],["T_IF","if",916],["T_WHITESPACE"," ",916],"(","!",["T_ISSET","isset",916],"(",["T_VARIABLE","$codes",916],"[",["T_VARIABLE","$type",916],"]",")",")",["T_WHITESPACE"," ",916],"{",["T_WHITESPACE","\n            ",916],["T_RETURN","return",917],["T_WHITESPACE"," ",917],["T_STRING","false",917],";",["T_WHITESPACE","\n        ",917],"}",["T_WHITESPACE"," ",918],["T_ELSEIF","elseif",918],["T_WHITESPACE"," ",918],"(",["T_CONSTANT_ENCAPSED_STRING","''",918],["T_WHITESPACE"," ",918],["T_IS_IDENTICAL","===",918],["T_WHITESPACE"," ",918],["T_VARIABLE","$code",918],")",["T_WHITESPACE"," ",918],"{",["T_WHITESPACE","\n            ",918],["T_RETURN","return",919],["T_WHITESPACE"," ",919],["T_VARIABLE","$codes",919],"[",["T_VARIABLE","$type",919],"]",";",["T_WHITESPACE","\n        ",919],"}",["T_WHITESPACE","\n\n        ",920],["T_IF","if",922],["T_WHITESPACE"," ",922],"(","!",["T_ISSET","isset",922],"(",["T_VARIABLE","$codes",922],"[",["T_VARIABLE","$type",922],"]","[",["T_VARIABLE","$code",922],"]",")",")",["T_WHITESPACE"," ",922],"{",["T_WHITESPACE","\n            ",922],["T_RETURN","return",923],["T_WHITESPACE"," ",923],["T_STRING","false",923],";",["T_WHITESPACE","\n        ",923],"}",["T_WHITESPACE"," ",924],["T_ELSE","else",924],["T_WHITESPACE"," ",924],"{",["T_WHITESPACE","\n            ",924],["T_RETURN","return",925],["T_WHITESPACE"," ",925],["T_VARIABLE","$codes",925],"[",["T_VARIABLE","$type",925],"]","[",["T_VARIABLE","$code",925],"]",";",["T_WHITESPACE","\n        ",925],"}",["T_WHITESPACE","\n    ",926],"}",["T_WHITESPACE","\n\n    ",927],["T_DOC_COMMENT","\/**\n     * Parse xml and add rates to instance property\n     *\n     * @param mixed $shipXml\n     * @return void\n     *\/",929],["T_WHITESPACE","\n    ",934],["T_PROTECTED","protected",935],["T_WHITESPACE"," ",935],["T_FUNCTION","function",935],["T_WHITESPACE"," ",935],["T_STRING","_addRate",935],"(",["T_VARIABLE","$shipXml",935],")",["T_WHITESPACE","\n    ",935],"{",["T_WHITESPACE","\n        ",936],["T_VARIABLE","$r",937],["T_WHITESPACE"," ",937],"=",["T_WHITESPACE"," ",937],["T_VARIABLE","$this",937],["T_OBJECT_OPERATOR","->",937],["T_STRING","_rawRequest",937],";",["T_WHITESPACE","\n        ",937],["T_VARIABLE","$services",938],["T_WHITESPACE"," ",938],"=",["T_WHITESPACE"," ",938],["T_VARIABLE","$this",938],["T_OBJECT_OPERATOR","->",938],["T_STRING","getCode",938],"(",["T_CONSTANT_ENCAPSED_STRING","'service'",938],")",";",["T_WHITESPACE","\n        ",938],["T_VARIABLE","$regexps",939],["T_WHITESPACE"," ",939],"=",["T_WHITESPACE"," ",939],["T_VARIABLE","$this",939],["T_OBJECT_OPERATOR","->",939],["T_STRING","getCode",939],"(",["T_CONSTANT_ENCAPSED_STRING","'descr_to_service'",939],")",";",["T_WHITESPACE","\n        ",939],["T_VARIABLE","$desc",940],["T_WHITESPACE"," ",940],"=",["T_WHITESPACE"," ",940],"(",["T_VARIABLE","$shipXml",940],["T_OBJECT_OPERATOR","->",940],["T_STRING","EstimateDetail",940],")",["T_WHITESPACE"," ",940],"?",["T_WHITESPACE"," ",940],["T_STRING_CAST","(string)",940],["T_VARIABLE","$shipXml",940],["T_OBJECT_OPERATOR","->",940],["T_STRING","EstimateDetail",940],["T_OBJECT_OPERATOR","->",940],["T_STRING","ServiceLevelCommitment",940],["T_OBJECT_OPERATOR","->",940],["T_STRING","Desc",940],["T_WHITESPACE"," ",940],":",["T_WHITESPACE"," ",940],["T_STRING","null",940],";",["T_WHITESPACE","\n\n        ",940],["T_VARIABLE","$totalEstimate",942],["T_WHITESPACE"," ",942],"=",["T_WHITESPACE"," ",942],["T_VARIABLE","$shipXml",942],["T_OBJECT_OPERATOR","->",942],["T_STRING","EstimateDetail",942],["T_WHITESPACE","\n                ",942],"?",["T_WHITESPACE"," ",943],["T_STRING_CAST","(string)",943],["T_VARIABLE","$shipXml",943],["T_OBJECT_OPERATOR","->",943],["T_STRING","EstimateDetail",943],["T_OBJECT_OPERATOR","->",943],["T_STRING","RateEstimate",943],["T_OBJECT_OPERATOR","->",943],["T_STRING","TotalChargeEstimate",943],["T_WHITESPACE","\n                ",943],":",["T_WHITESPACE"," ",944],["T_STRING","null",944],";",["T_WHITESPACE","\n        ",944],["T_COMMENT","\/*\n        * DHL can return with empty result and success code\n        * we need to make sure there is shipping estimate and code\n        *\/",945],["T_WHITESPACE","\n        ",948],["T_IF","if",949],["T_WHITESPACE"," ",949],"(",["T_VARIABLE","$desc",949],["T_WHITESPACE"," ",949],["T_BOOLEAN_AND","&&",949],["T_WHITESPACE"," ",949],["T_VARIABLE","$totalEstimate",949],")",["T_WHITESPACE"," ",949],"{",["T_WHITESPACE","\n            ",949],["T_VARIABLE","$service",950],["T_WHITESPACE"," ",950],"=",["T_WHITESPACE"," ",950],["T_STRING_CAST","(string)",950],["T_VARIABLE","$shipXml",950],["T_OBJECT_OPERATOR","->",950],["T_STRING","EstimateDetail",950],["T_OBJECT_OPERATOR","->",950],["T_STRING","Service",950],["T_OBJECT_OPERATOR","->",950],["T_STRING","Code",950],";",["T_WHITESPACE","\n            ",950],["T_VARIABLE","$description",951],["T_WHITESPACE"," ",951],"=",["T_WHITESPACE"," ",951],["T_STRING_CAST","(string)",951],["T_VARIABLE","$shipXml",951],["T_OBJECT_OPERATOR","->",951],["T_STRING","EstimateDetail",951],["T_OBJECT_OPERATOR","->",951],["T_STRING","ServiceLevelCommitment",951],["T_OBJECT_OPERATOR","->",951],["T_STRING","Desc",951],";",["T_WHITESPACE","\n            ",951],["T_IF","if",952],["T_WHITESPACE"," ",952],"(",["T_VARIABLE","$service",952],["T_WHITESPACE"," ",952],["T_IS_EQUAL","==",952],["T_WHITESPACE"," ",952],["T_CONSTANT_ENCAPSED_STRING","'E'",952],")",["T_WHITESPACE"," ",952],"{",["T_WHITESPACE","\n                ",952],["T_FOREACH","foreach",953],["T_WHITESPACE"," ",953],"(",["T_VARIABLE","$regexps",953],["T_WHITESPACE"," ",953],["T_AS","as",953],["T_WHITESPACE"," ",953],["T_VARIABLE","$expService",953],["T_WHITESPACE"," ",953],["T_DOUBLE_ARROW","=>",953],["T_WHITESPACE"," ",953],["T_VARIABLE","$exp",953],")",["T_WHITESPACE"," ",953],"{",["T_WHITESPACE","\n                    ",953],["T_IF","if",954],["T_WHITESPACE"," ",954],"(",["T_STRING","preg_match",954],"(",["T_CONSTANT_ENCAPSED_STRING","'\/'",954],["T_WHITESPACE"," ",954],".",["T_WHITESPACE"," ",954],["T_STRING","preg_quote",954],"(",["T_VARIABLE","$exp",954],",",["T_WHITESPACE"," ",954],["T_CONSTANT_ENCAPSED_STRING","'\/'",954],")",["T_WHITESPACE"," ",954],".",["T_WHITESPACE"," ",954],["T_CONSTANT_ENCAPSED_STRING","'\/'",954],",",["T_WHITESPACE"," ",954],["T_VARIABLE","$description",954],")",")",["T_WHITESPACE"," ",954],"{",["T_WHITESPACE","\n                        ",954],["T_VARIABLE","$service",955],["T_WHITESPACE"," ",955],"=",["T_WHITESPACE"," ",955],["T_VARIABLE","$expService",955],";",["T_WHITESPACE","\n                    ",955],"}",["T_WHITESPACE","\n                ",956],"}",["T_WHITESPACE","\n            ",957],"}",["T_WHITESPACE","\n\n            ",958],["T_VARIABLE","$data",960],"[",["T_CONSTANT_ENCAPSED_STRING","'term'",960],"]",["T_WHITESPACE"," ",960],"=",["T_WHITESPACE"," ",960],"(",["T_ISSET","isset",960],"(",["T_VARIABLE","$services",960],"[",["T_VARIABLE","$service",960],"]",")",["T_WHITESPACE"," ",960],"?",["T_WHITESPACE"," ",960],["T_VARIABLE","$services",960],"[",["T_VARIABLE","$service",960],"]",["T_WHITESPACE"," ",960],":",["T_WHITESPACE"," ",960],["T_VARIABLE","$desc",960],")",";",["T_WHITESPACE","\n            ",960],["T_VARIABLE","$data",961],"[",["T_CONSTANT_ENCAPSED_STRING","'price_total'",961],"]",["T_WHITESPACE"," ",961],"=",["T_WHITESPACE"," ",961],["T_VARIABLE","$this",961],["T_OBJECT_OPERATOR","->",961],["T_STRING","getMethodPrice",961],"(",["T_VARIABLE","$totalEstimate",961],",",["T_WHITESPACE"," ",961],["T_VARIABLE","$service",961],")",";",["T_WHITESPACE","\n            ",961],["T_VARIABLE","$this",962],["T_OBJECT_OPERATOR","->",962],["T_STRING","_dhlRates",962],"[","]",["T_WHITESPACE"," ",962],"=",["T_WHITESPACE"," ",962],["T_ARRAY","array",962],"(",["T_CONSTANT_ENCAPSED_STRING","'service'",962],["T_WHITESPACE"," ",962],["T_DOUBLE_ARROW","=>",962],["T_WHITESPACE"," ",962],["T_VARIABLE","$service",962],",",["T_WHITESPACE"," ",962],["T_CONSTANT_ENCAPSED_STRING","'data'",962],["T_WHITESPACE"," ",962],["T_DOUBLE_ARROW","=>",962],["T_WHITESPACE"," ",962],["T_VARIABLE","$data",962],")",";",["T_WHITESPACE","\n        ",962],"}",["T_WHITESPACE","\n    ",963],"}",["T_WHITESPACE","\n\n    ",964],["T_DOC_COMMENT","\/**\n     * Get tracking\n     *\n     * @param mixed $trackings\n     * @return mixed\n     *\/",966],["T_WHITESPACE","\n    ",971],["T_PUBLIC","public",972],["T_WHITESPACE"," ",972],["T_FUNCTION","function",972],["T_WHITESPACE"," ",972],["T_STRING","getTracking",972],"(",["T_VARIABLE","$trackings",972],")",["T_WHITESPACE","\n    ",972],"{",["T_WHITESPACE","\n        ",973],["T_VARIABLE","$this",974],["T_OBJECT_OPERATOR","->",974],["T_STRING","setTrackingReqeust",974],"(",")",";",["T_WHITESPACE","\n\n        ",974],["T_IF","if",976],["T_WHITESPACE"," ",976],"(","!",["T_STRING","is_array",976],"(",["T_VARIABLE","$trackings",976],")",")",["T_WHITESPACE"," ",976],"{",["T_WHITESPACE","\n            ",976],["T_VARIABLE","$trackings",977],["T_WHITESPACE"," ",977],"=",["T_WHITESPACE"," ",977],["T_ARRAY","array",977],"(",["T_VARIABLE","$trackings",977],")",";",["T_WHITESPACE","\n        ",977],"}",["T_WHITESPACE","\n        ",978],["T_VARIABLE","$this",979],["T_OBJECT_OPERATOR","->",979],["T_STRING","_getXMLTracking",979],"(",["T_VARIABLE","$trackings",979],")",";",["T_WHITESPACE","\n\n        ",979],["T_RETURN","return",981],["T_WHITESPACE"," ",981],["T_VARIABLE","$this",981],["T_OBJECT_OPERATOR","->",981],["T_STRING","_result",981],";",["T_WHITESPACE","\n    ",981],"}",["T_WHITESPACE","\n\n    ",982],["T_DOC_COMMENT","\/**\n     * Set tracking request\n     *\n     * @return null\n     *\/",984],["T_WHITESPACE","\n    ",988],["T_PROTECTED","protected",989],["T_WHITESPACE"," ",989],["T_FUNCTION","function",989],["T_WHITESPACE"," ",989],["T_STRING","setTrackingReqeust",989],"(",")",["T_WHITESPACE","\n    ",989],"{",["T_WHITESPACE","\n        ",990],["T_VARIABLE","$r",991],["T_WHITESPACE"," ",991],"=",["T_WHITESPACE"," ",991],["T_NEW","new",991],["T_WHITESPACE"," ",991],["T_STRING","Varien_Object",991],"(",")",";",["T_WHITESPACE","\n\n        ",991],["T_VARIABLE","$id",993],["T_WHITESPACE"," ",993],"=",["T_WHITESPACE"," ",993],["T_VARIABLE","$this",993],["T_OBJECT_OPERATOR","->",993],["T_STRING","getConfigData",993],"(",["T_CONSTANT_ENCAPSED_STRING","'id'",993],")",";",["T_WHITESPACE","\n        ",993],["T_VARIABLE","$r",994],["T_OBJECT_OPERATOR","->",994],["T_STRING","setId",994],"(",["T_VARIABLE","$id",994],")",";",["T_WHITESPACE","\n\n        ",994],["T_VARIABLE","$password",996],["T_WHITESPACE"," ",996],"=",["T_WHITESPACE"," ",996],["T_VARIABLE","$this",996],["T_OBJECT_OPERATOR","->",996],["T_STRING","getConfigData",996],"(",["T_CONSTANT_ENCAPSED_STRING","'password'",996],")",";",["T_WHITESPACE","\n        ",996],["T_VARIABLE","$r",997],["T_OBJECT_OPERATOR","->",997],["T_STRING","setPassword",997],"(",["T_VARIABLE","$password",997],")",";",["T_WHITESPACE","\n\n        ",997],["T_VARIABLE","$this",999],["T_OBJECT_OPERATOR","->",999],["T_STRING","_rawTrackRequest",999],["T_WHITESPACE"," ",999],"=",["T_WHITESPACE"," ",999],["T_VARIABLE","$r",999],";",["T_WHITESPACE","\n    ",999],"}",["T_WHITESPACE","\n\n    ",1000],["T_DOC_COMMENT","\/**\n     * Send request for trackings\n     *\n     * @param array $trackings\n     *\/",1002],["T_WHITESPACE","\n    ",1006],["T_PROTECTED","protected",1007],["T_WHITESPACE"," ",1007],["T_FUNCTION","function",1007],["T_WHITESPACE"," ",1007],["T_STRING","_getXMLTracking",1007],"(",["T_VARIABLE","$trackings",1007],")",["T_WHITESPACE","\n    ",1007],"{",["T_WHITESPACE","\n        ",1008],["T_VARIABLE","$r",1009],["T_WHITESPACE"," ",1009],"=",["T_WHITESPACE"," ",1009],["T_VARIABLE","$this",1009],["T_OBJECT_OPERATOR","->",1009],["T_STRING","_rawTrackRequest",1009],";",["T_WHITESPACE","\n\n        ",1009],["T_VARIABLE","$xml",1011],["T_WHITESPACE"," ",1011],"=",["T_WHITESPACE"," ",1011],["T_NEW","new",1011],["T_WHITESPACE"," ",1011],["T_STRING","SimpleXMLElement",1011],"(",["T_CONSTANT_ENCAPSED_STRING","'<?xml version = \"1.0\" encoding = \"UTF-8\"?><eCommerce\/>'",1011],")",";",["T_WHITESPACE","\n        ",1011],["T_VARIABLE","$xml",1012],["T_OBJECT_OPERATOR","->",1012],["T_STRING","addAttribute",1012],"(",["T_CONSTANT_ENCAPSED_STRING","'action'",1012],",",["T_WHITESPACE"," ",1012],["T_CONSTANT_ENCAPSED_STRING","'Request'",1012],")",";",["T_WHITESPACE","\n        ",1012],["T_VARIABLE","$xml",1013],["T_OBJECT_OPERATOR","->",1013],["T_STRING","addAttribute",1013],"(",["T_CONSTANT_ENCAPSED_STRING","'version'",1013],",",["T_WHITESPACE"," ",1013],["T_CONSTANT_ENCAPSED_STRING","'1.1'",1013],")",";",["T_WHITESPACE","\n\n        ",1013],["T_VARIABLE","$requestor",1015],["T_WHITESPACE"," ",1015],"=",["T_WHITESPACE"," ",1015],["T_VARIABLE","$xml",1015],["T_OBJECT_OPERATOR","->",1015],["T_STRING","addChild",1015],"(",["T_CONSTANT_ENCAPSED_STRING","'Requestor'",1015],")",";",["T_WHITESPACE","\n        ",1015],["T_VARIABLE","$requestor",1016],["T_OBJECT_OPERATOR","->",1016],["T_STRING","addChild",1016],"(",["T_CONSTANT_ENCAPSED_STRING","'ID'",1016],",",["T_WHITESPACE"," ",1016],["T_VARIABLE","$r",1016],["T_OBJECT_OPERATOR","->",1016],["T_STRING","getId",1016],"(",")",")",";",["T_WHITESPACE","\n        ",1016],["T_VARIABLE","$requestor",1017],["T_OBJECT_OPERATOR","->",1017],["T_STRING","addChild",1017],"(",["T_CONSTANT_ENCAPSED_STRING","'Password'",1017],",",["T_WHITESPACE"," ",1017],["T_VARIABLE","$r",1017],["T_OBJECT_OPERATOR","->",1017],["T_STRING","getPassword",1017],"(",")",")",";",["T_WHITESPACE","\n\n        ",1017],["T_VARIABLE","$track",1019],["T_WHITESPACE"," ",1019],"=",["T_WHITESPACE"," ",1019],["T_VARIABLE","$xml",1019],["T_OBJECT_OPERATOR","->",1019],["T_STRING","addChild",1019],"(",["T_CONSTANT_ENCAPSED_STRING","'Track'",1019],")",";",["T_WHITESPACE","\n        ",1019],["T_VARIABLE","$track",1020],["T_OBJECT_OPERATOR","->",1020],["T_STRING","addAttribute",1020],"(",["T_CONSTANT_ENCAPSED_STRING","'action'",1020],",",["T_WHITESPACE"," ",1020],["T_CONSTANT_ENCAPSED_STRING","'Get'",1020],")",";",["T_WHITESPACE","\n        ",1020],["T_VARIABLE","$track",1021],["T_OBJECT_OPERATOR","->",1021],["T_STRING","addAttribute",1021],"(",["T_CONSTANT_ENCAPSED_STRING","'version'",1021],",",["T_WHITESPACE"," ",1021],["T_CONSTANT_ENCAPSED_STRING","'1.0'",1021],")",";",["T_WHITESPACE","\n\n        ",1021],["T_FOREACH","foreach",1023],["T_WHITESPACE"," ",1023],"(",["T_VARIABLE","$trackings",1023],["T_WHITESPACE"," ",1023],["T_AS","as",1023],["T_WHITESPACE"," ",1023],["T_VARIABLE","$tracking",1023],")",["T_WHITESPACE"," ",1023],"{",["T_WHITESPACE","\n            ",1023],["T_VARIABLE","$track",1024],["T_OBJECT_OPERATOR","->",1024],["T_STRING","addChild",1024],"(",["T_CONSTANT_ENCAPSED_STRING","'Shipment'",1024],")",["T_OBJECT_OPERATOR","->",1024],["T_STRING","addChild",1024],"(",["T_CONSTANT_ENCAPSED_STRING","'TrackingNbr'",1024],",",["T_WHITESPACE"," ",1024],["T_VARIABLE","$tracking",1024],")",";",["T_WHITESPACE","\n        ",1024],"}",["T_WHITESPACE","\n        ",1025],["T_VARIABLE","$request",1026],["T_WHITESPACE"," ",1026],"=",["T_WHITESPACE"," ",1026],["T_VARIABLE","$xml",1026],["T_OBJECT_OPERATOR","->",1026],["T_STRING","asXML",1026],"(",")",";",["T_WHITESPACE","\n        ",1026],["T_VARIABLE","$debugData",1027],["T_WHITESPACE"," ",1027],"=",["T_WHITESPACE"," ",1027],["T_ARRAY","array",1027],"(",["T_CONSTANT_ENCAPSED_STRING","'request'",1027],["T_WHITESPACE"," ",1027],["T_DOUBLE_ARROW","=>",1027],["T_WHITESPACE"," ",1027],["T_VARIABLE","$request",1027],")",";",["T_WHITESPACE","\n        ",1027],["T_COMMENT","\/*\n         * tracking api cannot process from 3pm to 5pm PST time on Sunday\n         * DHL Airborne conduts a maintainance during that period.\n         *\/",1028],["T_WHITESPACE","\n        ",1031],["T_TRY","try",1032],["T_WHITESPACE"," ",1032],"{",["T_WHITESPACE","\n            ",1032],["T_VARIABLE","$url",1033],["T_WHITESPACE"," ",1033],"=",["T_WHITESPACE"," ",1033],["T_VARIABLE","$this",1033],["T_OBJECT_OPERATOR","->",1033],["T_STRING","getConfigData",1033],"(",["T_CONSTANT_ENCAPSED_STRING","'gateway_url'",1033],")",";",["T_WHITESPACE","\n            ",1033],["T_IF","if",1034],["T_WHITESPACE"," ",1034],"(","!",["T_VARIABLE","$url",1034],")",["T_WHITESPACE"," ",1034],"{",["T_WHITESPACE","\n                ",1034],["T_VARIABLE","$url",1035],["T_WHITESPACE"," ",1035],"=",["T_WHITESPACE"," ",1035],["T_VARIABLE","$this",1035],["T_OBJECT_OPERATOR","->",1035],["T_STRING","_defaultGatewayUrl",1035],";",["T_WHITESPACE","\n            ",1035],"}",["T_WHITESPACE","\n            ",1036],["T_VARIABLE","$ch",1037],["T_WHITESPACE"," ",1037],"=",["T_WHITESPACE"," ",1037],["T_STRING","curl_init",1037],"(",")",";",["T_WHITESPACE","\n            ",1037],["T_STRING","curl_setopt",1038],"(",["T_VARIABLE","$ch",1038],",",["T_WHITESPACE"," ",1038],["T_STRING","CURLOPT_RETURNTRANSFER",1038],",",["T_WHITESPACE"," ",1038],["T_LNUMBER","1",1038],")",";",["T_WHITESPACE","\n            ",1038],["T_STRING","curl_setopt",1039],"(",["T_VARIABLE","$ch",1039],",",["T_WHITESPACE"," ",1039],["T_STRING","CURLOPT_URL",1039],",",["T_WHITESPACE"," ",1039],["T_VARIABLE","$url",1039],")",";",["T_WHITESPACE","\n            ",1039],["T_STRING","curl_setopt",1040],"(",["T_VARIABLE","$ch",1040],",",["T_WHITESPACE"," ",1040],["T_STRING","CURLOPT_SSL_VERIFYPEER",1040],",",["T_WHITESPACE"," ",1040],["T_VARIABLE","$this",1040],["T_OBJECT_OPERATOR","->",1040],["T_STRING","getConfigFlag",1040],"(",["T_CONSTANT_ENCAPSED_STRING","'verify_peer'",1040],")",")",";",["T_WHITESPACE","\n            ",1040],["T_STRING","curl_setopt",1041],"(",["T_VARIABLE","$ch",1041],",",["T_WHITESPACE"," ",1041],["T_STRING","CURLOPT_SSL_VERIFYHOST",1041],",",["T_WHITESPACE"," ",1041],["T_LNUMBER","2",1041],")",";",["T_WHITESPACE","\n            ",1041],["T_STRING","curl_setopt",1042],"(",["T_VARIABLE","$ch",1042],",",["T_WHITESPACE"," ",1042],["T_STRING","CURLOPT_POSTFIELDS",1042],",",["T_WHITESPACE"," ",1042],["T_VARIABLE","$request",1042],")",";",["T_WHITESPACE","\n            ",1042],["T_VARIABLE","$responseBody",1043],["T_WHITESPACE"," ",1043],"=",["T_WHITESPACE"," ",1043],["T_STRING","curl_exec",1043],"(",["T_VARIABLE","$ch",1043],")",";",["T_WHITESPACE","\n            ",1043],["T_VARIABLE","$debugData",1044],"[",["T_CONSTANT_ENCAPSED_STRING","'result'",1044],"]",["T_WHITESPACE"," ",1044],"=",["T_WHITESPACE"," ",1044],["T_VARIABLE","$responseBody",1044],";",["T_WHITESPACE","\n            ",1044],["T_STRING","curl_close",1045],"(",["T_VARIABLE","$ch",1045],")",";",["T_WHITESPACE","\n        ",1045],"}",["T_WHITESPACE"," ",1046],["T_CATCH","catch",1046],["T_WHITESPACE"," ",1046],"(",["T_STRING","Exception",1046],["T_WHITESPACE"," ",1046],["T_VARIABLE","$e",1046],")",["T_WHITESPACE"," ",1046],"{",["T_WHITESPACE","\n            ",1046],["T_VARIABLE","$debugData",1047],"[",["T_CONSTANT_ENCAPSED_STRING","'result'",1047],"]",["T_WHITESPACE"," ",1047],"=",["T_WHITESPACE"," ",1047],["T_ARRAY","array",1047],"(",["T_CONSTANT_ENCAPSED_STRING","'error'",1047],["T_WHITESPACE"," ",1047],["T_DOUBLE_ARROW","=>",1047],["T_WHITESPACE"," ",1047],["T_VARIABLE","$e",1047],["T_OBJECT_OPERATOR","->",1047],["T_STRING","getMessage",1047],"(",")",",",["T_WHITESPACE"," ",1047],["T_CONSTANT_ENCAPSED_STRING","'code'",1047],["T_WHITESPACE"," ",1047],["T_DOUBLE_ARROW","=>",1047],["T_WHITESPACE"," ",1047],["T_VARIABLE","$e",1047],["T_OBJECT_OPERATOR","->",1047],["T_STRING","getCode",1047],"(",")",")",";",["T_WHITESPACE","\n            ",1047],["T_VARIABLE","$responseBody",1048],["T_WHITESPACE"," ",1048],"=",["T_WHITESPACE"," ",1048],["T_CONSTANT_ENCAPSED_STRING","''",1048],";",["T_WHITESPACE","\n        ",1048],"}",["T_WHITESPACE","\n        ",1049],["T_VARIABLE","$this",1050],["T_OBJECT_OPERATOR","->",1050],["T_STRING","_debug",1050],"(",["T_VARIABLE","$debugData",1050],")",";",["T_WHITESPACE","\n        ",1050],["T_VARIABLE","$this",1051],["T_OBJECT_OPERATOR","->",1051],["T_STRING","_parseXmlTrackingResponse",1051],"(",["T_VARIABLE","$trackings",1051],",",["T_WHITESPACE"," ",1051],["T_VARIABLE","$responseBody",1051],")",";",["T_WHITESPACE","\n    ",1051],"}",["T_WHITESPACE","\n\n    ",1052],["T_DOC_COMMENT","\/**\n     * Parse xml tracking response\n     *\n     * @param array $trackingvalue\n     * @param string $response\n     * @return null\n     *\/",1054],["T_WHITESPACE","\n    ",1060],["T_PROTECTED","protected",1061],["T_WHITESPACE"," ",1061],["T_FUNCTION","function",1061],["T_WHITESPACE"," ",1061],["T_STRING","_parseXmlTrackingResponse",1061],"(",["T_VARIABLE","$trackings",1061],",",["T_WHITESPACE"," ",1061],["T_VARIABLE","$response",1061],")",["T_WHITESPACE","\n    ",1061],"{",["T_WHITESPACE","\n        ",1062],["T_VARIABLE","$errorTitle",1063],["T_WHITESPACE"," ",1063],"=",["T_WHITESPACE"," ",1063],["T_STRING","Mage",1063],["T_DOUBLE_COLON","::",1063],["T_STRING","helper",1063],"(",["T_CONSTANT_ENCAPSED_STRING","'usa'",1063],")",["T_OBJECT_OPERATOR","->",1063],["T_STRING","__",1063],"(",["T_CONSTANT_ENCAPSED_STRING","'Unable to retrieve tracking'",1063],")",";",["T_WHITESPACE","\n        ",1063],["T_VARIABLE","$resultArr",1064],["T_WHITESPACE"," ",1064],"=",["T_WHITESPACE"," ",1064],["T_ARRAY","array",1064],"(",")",";",["T_WHITESPACE","\n        ",1064],["T_VARIABLE","$errorArr",1065],["T_WHITESPACE"," ",1065],"=",["T_WHITESPACE"," ",1065],["T_ARRAY","array",1065],"(",")",";",["T_WHITESPACE","\n        ",1065],["T_VARIABLE","$trackingserror",1066],["T_WHITESPACE"," ",1066],"=",["T_WHITESPACE"," ",1066],["T_ARRAY","array",1066],"(",")",";",["T_WHITESPACE","\n        ",1066],["T_VARIABLE","$tracknum",1067],["T_WHITESPACE"," ",1067],"=",["T_WHITESPACE"," ",1067],["T_CONSTANT_ENCAPSED_STRING","''",1067],";",["T_WHITESPACE","\n        ",1067],["T_IF","if",1068],["T_WHITESPACE"," ",1068],"(",["T_STRING","strlen",1068],"(",["T_STRING","trim",1068],"(",["T_VARIABLE","$response",1068],")",")",["T_WHITESPACE"," ",1068],">",["T_WHITESPACE"," ",1068],["T_LNUMBER","0",1068],")",["T_WHITESPACE"," ",1068],"{",["T_WHITESPACE","\n            ",1068],["T_IF","if",1069],["T_WHITESPACE"," ",1069],"(",["T_STRING","strpos",1069],"(",["T_STRING","trim",1069],"(",["T_VARIABLE","$response",1069],")",",",["T_WHITESPACE"," ",1069],["T_CONSTANT_ENCAPSED_STRING","'<?xml'",1069],")",["T_WHITESPACE"," ",1069],["T_IS_IDENTICAL","===",1069],["T_WHITESPACE"," ",1069],["T_LNUMBER","0",1069],")",["T_WHITESPACE"," ",1069],"{",["T_WHITESPACE","\n                ",1069],["T_VARIABLE","$xml",1070],["T_WHITESPACE"," ",1070],"=",["T_WHITESPACE"," ",1070],["T_STRING","simplexml_load_string",1070],"(",["T_VARIABLE","$response",1070],")",";",["T_WHITESPACE","\n                ",1070],["T_IF","if",1071],["T_WHITESPACE"," ",1071],"(",["T_STRING","is_object",1071],"(",["T_VARIABLE","$xml",1071],")",")",["T_WHITESPACE"," ",1071],"{",["T_WHITESPACE","\n                    ",1071],["T_VARIABLE","$trackxml",1072],["T_WHITESPACE"," ",1072],"=",["T_WHITESPACE"," ",1072],["T_VARIABLE","$xml",1072],["T_OBJECT_OPERATOR","->",1072],["T_STRING","Track",1072],";",["T_WHITESPACE","\n                    ",1072],["T_IF","if",1073],["T_WHITESPACE"," ",1073],"(",["T_WHITESPACE","\n                        ",1073],["T_STRING","is_object",1074],"(",["T_VARIABLE","$xml",1074],["T_OBJECT_OPERATOR","->",1074],["T_STRING","Faults",1074],")",["T_WHITESPACE","\n                        ",1074],["T_BOOLEAN_AND","&&",1075],["T_WHITESPACE"," ",1075],["T_STRING","is_object",1075],"(",["T_VARIABLE","$xml",1075],["T_OBJECT_OPERATOR","->",1075],["T_STRING","Faults",1075],["T_OBJECT_OPERATOR","->",1075],["T_STRING","Fault",1075],")",["T_WHITESPACE","\n                        ",1075],["T_BOOLEAN_AND","&&",1076],["T_WHITESPACE"," ",1076],["T_STRING","is_object",1076],"(",["T_VARIABLE","$xml",1076],["T_OBJECT_OPERATOR","->",1076],["T_STRING","Faults",1076],["T_OBJECT_OPERATOR","->",1076],["T_STRING","Fault",1076],["T_OBJECT_OPERATOR","->",1076],["T_STRING","Code",1076],")",["T_WHITESPACE","\n                        ",1076],["T_BOOLEAN_AND","&&",1077],["T_WHITESPACE"," ",1077],["T_STRING","is_object",1077],"(",["T_VARIABLE","$xml",1077],["T_OBJECT_OPERATOR","->",1077],["T_STRING","Faults",1077],["T_OBJECT_OPERATOR","->",1077],["T_STRING","Fault",1077],["T_OBJECT_OPERATOR","->",1077],["T_STRING","Description",1077],")",["T_WHITESPACE","\n                        ",1077],["T_BOOLEAN_AND","&&",1078],["T_WHITESPACE"," ",1078],["T_STRING","is_object",1078],"(",["T_VARIABLE","$xml",1078],["T_OBJECT_OPERATOR","->",1078],["T_STRING","Faults",1078],["T_OBJECT_OPERATOR","->",1078],["T_STRING","Fault",1078],["T_OBJECT_OPERATOR","->",1078],["T_STRING","Context",1078],")",["T_WHITESPACE","\n                    ",1078],")",["T_WHITESPACE"," ",1079],"{",["T_WHITESPACE","\n                        ",1079],["T_VARIABLE","$code",1080],["T_WHITESPACE"," ",1080],"=",["T_WHITESPACE"," ",1080],["T_STRING_CAST","(string)",1080],["T_VARIABLE","$xml",1080],["T_OBJECT_OPERATOR","->",1080],["T_STRING","Faults",1080],["T_OBJECT_OPERATOR","->",1080],["T_STRING","Fault",1080],["T_OBJECT_OPERATOR","->",1080],["T_STRING","Code",1080],";",["T_WHITESPACE","\n                        ",1080],["T_VARIABLE","$description",1081],["T_WHITESPACE"," ",1081],"=",["T_WHITESPACE"," ",1081],["T_VARIABLE","$xml",1081],["T_OBJECT_OPERATOR","->",1081],["T_STRING","Faults",1081],["T_OBJECT_OPERATOR","->",1081],["T_STRING","Fault",1081],["T_OBJECT_OPERATOR","->",1081],["T_STRING","Description",1081],";",["T_WHITESPACE","\n                        ",1081],["T_VARIABLE","$context",1082],["T_WHITESPACE"," ",1082],"=",["T_WHITESPACE"," ",1082],["T_VARIABLE","$xml",1082],["T_OBJECT_OPERATOR","->",1082],["T_STRING","Faults",1082],["T_OBJECT_OPERATOR","->",1082],["T_STRING","Fault",1082],["T_OBJECT_OPERATOR","->",1082],["T_STRING","Context",1082],";",["T_WHITESPACE","\n                        ",1082],["T_VARIABLE","$errorTitle",1083],["T_WHITESPACE"," ",1083],"=",["T_WHITESPACE"," ",1083],["T_STRING","Mage",1083],["T_DOUBLE_COLON","::",1083],["T_STRING","helper",1083],"(",["T_CONSTANT_ENCAPSED_STRING","'usa'",1083],")",["T_OBJECT_OPERATOR","->",1083],["T_STRING","__",1083],"(",["T_CONSTANT_ENCAPSED_STRING","'Error #%s : %s (%s)'",1083],",",["T_WHITESPACE"," ",1083],["T_VARIABLE","$code",1083],",",["T_WHITESPACE"," ",1083],["T_VARIABLE","$description",1083],",",["T_WHITESPACE"," ",1083],["T_VARIABLE","$context",1083],")",";",["T_WHITESPACE","\n                    ",1083],"}",["T_WHITESPACE"," ",1084],["T_ELSEIF","elseif",1084],["T_WHITESPACE"," ",1084],"(",["T_STRING","is_object",1084],"(",["T_VARIABLE","$trackxml",1084],")",["T_WHITESPACE"," ",1084],["T_BOOLEAN_AND","&&",1084],["T_WHITESPACE"," ",1084],["T_STRING","is_object",1084],"(",["T_VARIABLE","$trackxml",1084],["T_OBJECT_OPERATOR","->",1084],["T_STRING","Shipment",1084],")",")",["T_WHITESPACE"," ",1084],"{",["T_WHITESPACE","\n                        ",1084],["T_FOREACH","foreach",1085],["T_WHITESPACE"," ",1085],"(",["T_VARIABLE","$trackxml",1085],["T_OBJECT_OPERATOR","->",1085],["T_STRING","Shipment",1085],["T_WHITESPACE"," ",1085],["T_AS","as",1085],["T_WHITESPACE"," ",1085],["T_VARIABLE","$txml",1085],")",["T_WHITESPACE"," ",1085],"{",["T_WHITESPACE","\n                            ",1085],["T_VARIABLE","$rArr",1086],["T_WHITESPACE"," ",1086],"=",["T_WHITESPACE"," ",1086],["T_ARRAY","array",1086],"(",")",";",["T_WHITESPACE","\n\n                            ",1086],["T_IF","if",1088],["T_WHITESPACE"," ",1088],"(",["T_STRING","is_object",1088],"(",["T_VARIABLE","$txml",1088],")",")",["T_WHITESPACE"," ",1088],"{",["T_WHITESPACE","\n                                ",1088],["T_VARIABLE","$tracknum",1089],["T_WHITESPACE"," ",1089],"=",["T_WHITESPACE"," ",1089],["T_STRING_CAST","(string)",1089],["T_VARIABLE","$txml",1089],["T_OBJECT_OPERATOR","->",1089],["T_STRING","TrackingNbr",1089],";",["T_WHITESPACE","\n                                ",1089],["T_IF","if",1090],["T_WHITESPACE"," ",1090],"(",["T_VARIABLE","$txml",1090],["T_OBJECT_OPERATOR","->",1090],["T_STRING","Fault",1090],")",["T_WHITESPACE"," ",1090],"{",["T_WHITESPACE","\n                                    ",1090],["T_VARIABLE","$code",1091],["T_WHITESPACE"," ",1091],"=",["T_WHITESPACE"," ",1091],["T_STRING_CAST","(string)",1091],["T_VARIABLE","$txml",1091],["T_OBJECT_OPERATOR","->",1091],["T_STRING","Fault",1091],["T_OBJECT_OPERATOR","->",1091],["T_STRING","Code",1091],";",["T_WHITESPACE","\n                                    ",1091],["T_VARIABLE","$description",1092],["T_WHITESPACE"," ",1092],"=",["T_WHITESPACE"," ",1092],["T_VARIABLE","$txml",1092],["T_OBJECT_OPERATOR","->",1092],["T_STRING","Fault",1092],["T_OBJECT_OPERATOR","->",1092],["T_STRING","Description",1092],";",["T_WHITESPACE","\n                                    ",1092],["T_VARIABLE","$errorArr",1093],"[",["T_VARIABLE","$tracknum",1093],"]",["T_WHITESPACE"," ",1093],"=",["T_WHITESPACE"," ",1093],["T_STRING","Mage",1093],["T_DOUBLE_COLON","::",1093],["T_STRING","helper",1093],"(",["T_CONSTANT_ENCAPSED_STRING","'usa'",1093],")",["T_OBJECT_OPERATOR","->",1093],["T_STRING","__",1093],"(",["T_CONSTANT_ENCAPSED_STRING","'Error #%s: %s'",1093],",",["T_WHITESPACE"," ",1093],["T_VARIABLE","$code",1093],",",["T_WHITESPACE"," ",1093],["T_VARIABLE","$description",1093],")",";",["T_WHITESPACE","\n                                ",1093],"}",["T_WHITESPACE"," ",1094],["T_ELSEIF","elseif",1094],["T_WHITESPACE"," ",1094],"(",["T_VARIABLE","$txml",1094],["T_OBJECT_OPERATOR","->",1094],["T_STRING","Result",1094],")",["T_WHITESPACE"," ",1094],"{",["T_WHITESPACE","\n                                    ",1094],["T_VARIABLE","$code",1095],["T_WHITESPACE"," ",1095],"=",["T_WHITESPACE"," ",1095],["T_INT_CAST","(int)",1095],["T_VARIABLE","$txml",1095],["T_OBJECT_OPERATOR","->",1095],["T_STRING","Result",1095],["T_OBJECT_OPERATOR","->",1095],["T_STRING","Code",1095],";",["T_WHITESPACE","\n                                    ",1095],["T_IF","if",1096],["T_WHITESPACE"," ",1096],"(",["T_VARIABLE","$code",1096],["T_WHITESPACE"," ",1096],["T_IS_IDENTICAL","===",1096],["T_WHITESPACE"," ",1096],["T_LNUMBER","0",1096],")",["T_WHITESPACE"," ",1096],"{",["T_WHITESPACE","\n                                        ",1096],["T_COMMENT","\/*\n                                        * Code 0== airbill  found\n                                        *\/",1097],["T_WHITESPACE","\n                                        ",1099],["T_VARIABLE","$rArr",1100],"[",["T_CONSTANT_ENCAPSED_STRING","'service'",1100],"]",["T_WHITESPACE"," ",1100],"=",["T_WHITESPACE"," ",1100],["T_STRING_CAST","(string)",1100],["T_VARIABLE","$txml",1100],["T_OBJECT_OPERATOR","->",1100],["T_STRING","Service",1100],["T_OBJECT_OPERATOR","->",1100],["T_STRING","Desc",1100],";",["T_WHITESPACE","\n                                        ",1100],["T_IF","if",1101],["T_WHITESPACE"," ",1101],"(",["T_ISSET","isset",1101],"(",["T_VARIABLE","$txml",1101],["T_OBJECT_OPERATOR","->",1101],["T_STRING","Weight",1101],")",")",["T_WHITESPACE","\n                                            ",1101],["T_VARIABLE","$rArr",1102],"[",["T_CONSTANT_ENCAPSED_STRING","'weight'",1102],"]",["T_WHITESPACE"," ",1102],"=",["T_WHITESPACE"," ",1102],["T_STRING_CAST","(string)",1102],["T_VARIABLE","$txml",1102],["T_OBJECT_OPERATOR","->",1102],["T_STRING","Weight",1102],["T_WHITESPACE"," ",1102],".",["T_WHITESPACE"," ",1102],["T_CONSTANT_ENCAPSED_STRING","\" lbs\"",1102],";",["T_WHITESPACE","\n                                        ",1102],["T_IF","if",1103],["T_WHITESPACE"," ",1103],"(",["T_ISSET","isset",1103],"(",["T_VARIABLE","$txml",1103],["T_OBJECT_OPERATOR","->",1103],["T_STRING","Delivery",1103],")",")",["T_WHITESPACE"," ",1103],"{",["T_WHITESPACE","\n                                            ",1103],["T_VARIABLE","$rArr",1104],"[",["T_CONSTANT_ENCAPSED_STRING","'deliverydate'",1104],"]",["T_WHITESPACE"," ",1104],"=",["T_WHITESPACE"," ",1104],["T_STRING_CAST","(string)",1104],["T_VARIABLE","$txml",1104],["T_OBJECT_OPERATOR","->",1104],["T_STRING","Delivery",1104],["T_OBJECT_OPERATOR","->",1104],["T_STRING","Date",1104],";",["T_WHITESPACE","\n                                            ",1104],["T_VARIABLE","$rArr",1105],"[",["T_CONSTANT_ENCAPSED_STRING","'deliverytime'",1105],"]",["T_WHITESPACE"," ",1105],"=",["T_WHITESPACE"," ",1105],["T_STRING_CAST","(string)",1105],["T_VARIABLE","$txml",1105],["T_OBJECT_OPERATOR","->",1105],["T_STRING","Delivery",1105],["T_OBJECT_OPERATOR","->",1105],["T_STRING","Time",1105],["T_WHITESPACE"," ",1105],".",["T_WHITESPACE"," ",1105],["T_CONSTANT_ENCAPSED_STRING","':00'",1105],";",["T_WHITESPACE","\n                                            ",1105],["T_VARIABLE","$rArr",1106],"[",["T_CONSTANT_ENCAPSED_STRING","'status'",1106],"]",["T_WHITESPACE"," ",1106],"=",["T_WHITESPACE"," ",1106],["T_STRING","Mage",1106],["T_DOUBLE_COLON","::",1106],["T_STRING","helper",1106],"(",["T_CONSTANT_ENCAPSED_STRING","'usa'",1106],")",["T_OBJECT_OPERATOR","->",1106],["T_STRING","__",1106],"(",["T_CONSTANT_ENCAPSED_STRING","'Delivered'",1106],")",";",["T_WHITESPACE","\n                                            ",1106],["T_IF","if",1107],["T_WHITESPACE"," ",1107],"(",["T_ISSET","isset",1107],"(",["T_VARIABLE","$txml",1107],["T_OBJECT_OPERATOR","->",1107],["T_STRING","Delivery",1107],["T_OBJECT_OPERATOR","->",1107],["T_STRING","Location",1107],["T_OBJECT_OPERATOR","->",1107],["T_STRING","Desc",1107],")",")",["T_WHITESPACE"," ",1107],"{",["T_WHITESPACE","\n                                                ",1107],["T_VARIABLE","$rArr",1108],"[",["T_CONSTANT_ENCAPSED_STRING","'deliverylocation'",1108],"]",["T_WHITESPACE"," ",1108],"=",["T_WHITESPACE"," ",1108],["T_STRING_CAST","(string)",1108],["T_VARIABLE","$txml",1108],["T_OBJECT_OPERATOR","->",1108],["T_STRING","Delivery",1108],["T_OBJECT_OPERATOR","->",1108],["T_STRING","Location",1108],["T_OBJECT_OPERATOR","->",1108],["T_STRING","Desc",1108],";",["T_WHITESPACE","\n                                            ",1108],"}",["T_WHITESPACE","\n                                        ",1109],"}",["T_WHITESPACE"," ",1110],["T_ELSEIF","elseif",1110],["T_WHITESPACE"," ",1110],"(",["T_ISSET","isset",1110],"(",["T_VARIABLE","$txml",1110],["T_OBJECT_OPERATOR","->",1110],["T_STRING","Pickup",1110],")",")",["T_WHITESPACE"," ",1110],"{",["T_WHITESPACE","\n                                            ",1110],["T_VARIABLE","$rArr",1111],"[",["T_CONSTANT_ENCAPSED_STRING","'deliverydate'",1111],"]",["T_WHITESPACE"," ",1111],"=",["T_WHITESPACE"," ",1111],["T_STRING_CAST","(string)",1111],["T_VARIABLE","$txml",1111],["T_OBJECT_OPERATOR","->",1111],["T_STRING","Pickup",1111],["T_OBJECT_OPERATOR","->",1111],["T_STRING","Date",1111],";",["T_WHITESPACE","\n                                            ",1111],["T_VARIABLE","$rArr",1112],"[",["T_CONSTANT_ENCAPSED_STRING","'deliverytime'",1112],"]",["T_WHITESPACE"," ",1112],"=",["T_WHITESPACE"," ",1112],["T_STRING_CAST","(string)",1112],["T_VARIABLE","$txml",1112],["T_OBJECT_OPERATOR","->",1112],["T_STRING","Pickup",1112],["T_OBJECT_OPERATOR","->",1112],["T_STRING","Time",1112],["T_WHITESPACE"," ",1112],".",["T_WHITESPACE"," ",1112],["T_CONSTANT_ENCAPSED_STRING","':00'",1112],";",["T_WHITESPACE","\n                                            ",1112],["T_VARIABLE","$rArr",1113],"[",["T_CONSTANT_ENCAPSED_STRING","'status'",1113],"]",["T_WHITESPACE"," ",1113],"=",["T_WHITESPACE"," ",1113],["T_STRING","Mage",1113],["T_DOUBLE_COLON","::",1113],["T_STRING","helper",1113],"(",["T_CONSTANT_ENCAPSED_STRING","'usa'",1113],")",["T_OBJECT_OPERATOR","->",1113],["T_STRING","__",1113],"(",["T_CONSTANT_ENCAPSED_STRING","'Shipment picked up'",1113],")",";",["T_WHITESPACE","\n                                        ",1113],"}",["T_WHITESPACE"," ",1114],["T_ELSE","else",1114],["T_WHITESPACE"," ",1114],"{",["T_WHITESPACE","\n                                            ",1114],["T_VARIABLE","$rArr",1115],"[",["T_CONSTANT_ENCAPSED_STRING","'status'",1115],"]",["T_WHITESPACE"," ",1115],"=",["T_WHITESPACE"," ",1115],["T_STRING_CAST","(string)",1115],["T_VARIABLE","$txml",1115],["T_OBJECT_OPERATOR","->",1115],["T_STRING","ShipmentType",1115],["T_OBJECT_OPERATOR","->",1115],["T_STRING","Desc",1115],["T_WHITESPACE","\n                                                  ",1115],".",["T_WHITESPACE"," ",1116],["T_STRING","Mage",1116],["T_DOUBLE_COLON","::",1116],["T_STRING","helper",1116],"(",["T_CONSTANT_ENCAPSED_STRING","'usa'",1116],")",["T_OBJECT_OPERATOR","->",1116],["T_STRING","__",1116],"(",["T_CONSTANT_ENCAPSED_STRING","' was not delivered nor scanned'",1116],")",";",["T_WHITESPACE","\n                                        ",1116],"}",["T_WHITESPACE","\n\n                                        ",1117],["T_VARIABLE","$packageProgress",1119],["T_WHITESPACE"," ",1119],"=",["T_WHITESPACE"," ",1119],["T_ARRAY","array",1119],"(",")",";",["T_WHITESPACE","\n                                        ",1119],["T_IF","if",1120],["T_WHITESPACE"," ",1120],"(",["T_ISSET","isset",1120],"(",["T_VARIABLE","$txml",1120],["T_OBJECT_OPERATOR","->",1120],["T_STRING","TrackingHistory",1120],")",["T_WHITESPACE"," ",1120],["T_BOOLEAN_AND","&&",1120],["T_WHITESPACE"," ",1120],["T_ISSET","isset",1120],"(",["T_VARIABLE","$txml",1120],["T_OBJECT_OPERATOR","->",1120],["T_STRING","TrackingHistory",1120],["T_OBJECT_OPERATOR","->",1120],["T_STRING","Status",1120],")",")",["T_WHITESPACE"," ",1120],"{",["T_WHITESPACE","\n\n                                            ",1120],["T_FOREACH","foreach",1122],["T_WHITESPACE"," ",1122],"(",["T_VARIABLE","$txml",1122],["T_OBJECT_OPERATOR","->",1122],["T_STRING","TrackingHistory",1122],["T_OBJECT_OPERATOR","->",1122],["T_STRING","Status",1122],["T_WHITESPACE"," ",1122],["T_AS","as",1122],["T_WHITESPACE"," ",1122],["T_VARIABLE","$thistory",1122],")",["T_WHITESPACE"," ",1122],"{",["T_WHITESPACE","\n                                                ",1122],["T_VARIABLE","$tempArr",1123],["T_WHITESPACE"," ",1123],"=",["T_WHITESPACE"," ",1123],["T_ARRAY","array",1123],"(",")",";",["T_WHITESPACE","\n                                                ",1123],["T_VARIABLE","$tempArr",1124],"[",["T_CONSTANT_ENCAPSED_STRING","'activity'",1124],"]",["T_WHITESPACE"," ",1124],"=",["T_WHITESPACE"," ",1124],["T_STRING_CAST","(string)",1124],["T_VARIABLE","$thistory",1124],["T_OBJECT_OPERATOR","->",1124],["T_STRING","StatusDesc",1124],";",["T_WHITESPACE","\n                                                ",1124],["T_VARIABLE","$tempArr",1125],"[",["T_CONSTANT_ENCAPSED_STRING","'deliverydate'",1125],"]",["T_WHITESPACE"," ",1125],"=",["T_WHITESPACE"," ",1125],["T_STRING_CAST","(string)",1125],["T_VARIABLE","$thistory",1125],["T_OBJECT_OPERATOR","->",1125],["T_STRING","Date",1125],";",["T_WHITESPACE"," ",1125],["T_COMMENT","\/\/YYYY-MM-DD\n",1125],["T_WHITESPACE","                                                ",1126],["T_VARIABLE","$tempArr",1126],"[",["T_CONSTANT_ENCAPSED_STRING","'deliverytime'",1126],"]",["T_WHITESPACE"," ",1126],"=",["T_WHITESPACE"," ",1126],["T_STRING_CAST","(string)",1126],["T_VARIABLE","$thistory",1126],["T_OBJECT_OPERATOR","->",1126],["T_STRING","Time",1126],["T_WHITESPACE"," ",1126],".",["T_WHITESPACE"," ",1126],["T_CONSTANT_ENCAPSED_STRING","':00'",1126],";",["T_WHITESPACE"," ",1126],["T_COMMENT","\/\/HH:MM:ss\n",1126],["T_WHITESPACE","                                                ",1127],["T_VARIABLE","$addArr",1127],["T_WHITESPACE"," ",1127],"=",["T_WHITESPACE"," ",1127],["T_ARRAY","array",1127],"(",")",";",["T_WHITESPACE","\n                                                ",1127],["T_IF","if",1128],["T_WHITESPACE"," ",1128],"(",["T_ISSET","isset",1128],"(",["T_VARIABLE","$thistory",1128],["T_OBJECT_OPERATOR","->",1128],["T_STRING","Location",1128],["T_OBJECT_OPERATOR","->",1128],["T_STRING","City",1128],")",")",["T_WHITESPACE"," ",1128],"{",["T_WHITESPACE","\n                                                    ",1128],["T_VARIABLE","$addArr",1129],"[","]",["T_WHITESPACE"," ",1129],"=",["T_WHITESPACE"," ",1129],["T_STRING_CAST","(string)",1129],["T_VARIABLE","$thistory",1129],["T_OBJECT_OPERATOR","->",1129],["T_STRING","Location",1129],["T_OBJECT_OPERATOR","->",1129],["T_STRING","City",1129],";",["T_WHITESPACE","\n                                                ",1129],"}",["T_WHITESPACE","\n                                                ",1130],["T_IF","if",1131],["T_WHITESPACE"," ",1131],"(",["T_ISSET","isset",1131],"(",["T_VARIABLE","$thistory",1131],["T_OBJECT_OPERATOR","->",1131],["T_STRING","Location",1131],["T_OBJECT_OPERATOR","->",1131],["T_STRING","State",1131],")",")",["T_WHITESPACE"," ",1131],"{",["T_WHITESPACE","\n                                                    ",1131],["T_VARIABLE","$addArr",1132],"[","]",["T_WHITESPACE"," ",1132],"=",["T_WHITESPACE"," ",1132],["T_STRING_CAST","(string)",1132],["T_VARIABLE","$thistory",1132],["T_OBJECT_OPERATOR","->",1132],["T_STRING","Location",1132],["T_OBJECT_OPERATOR","->",1132],["T_STRING","State",1132],";",["T_WHITESPACE","\n                                                ",1132],"}",["T_WHITESPACE","\n                                                ",1133],["T_IF","if",1134],["T_WHITESPACE"," ",1134],"(",["T_ISSET","isset",1134],"(",["T_VARIABLE","$thistory",1134],["T_OBJECT_OPERATOR","->",1134],["T_STRING","Location",1134],["T_OBJECT_OPERATOR","->",1134],["T_STRING","CountryCode",1134],")",")",["T_WHITESPACE"," ",1134],"{",["T_WHITESPACE","\n                                                    ",1134],["T_VARIABLE","$addArr",1135],"[","]",["T_WHITESPACE"," ",1135],"=",["T_WHITESPACE"," ",1135],["T_STRING_CAST","(string)",1135],["T_VARIABLE","$thistory",1135],["T_OBJECT_OPERATOR","->",1135],["T_STRING","Location",1135],["T_OBJECT_OPERATOR","->",1135],["T_STRING","Country",1135],";",["T_WHITESPACE","\n                                                ",1135],"}",["T_WHITESPACE","\n                                                ",1136],["T_IF","if",1137],["T_WHITESPACE"," ",1137],"(",["T_VARIABLE","$addArr",1137],")",["T_WHITESPACE"," ",1137],"{",["T_WHITESPACE","\n                                                    ",1137],["T_VARIABLE","$tempArr",1138],"[",["T_CONSTANT_ENCAPSED_STRING","'deliverylocation'",1138],"]",["T_WHITESPACE"," ",1138],"=",["T_WHITESPACE"," ",1138],["T_STRING","implode",1138],"(",["T_CONSTANT_ENCAPSED_STRING","', '",1138],",",["T_WHITESPACE"," ",1138],["T_VARIABLE","$addArr",1138],")",";",["T_WHITESPACE","\n                                                ",1138],"}",["T_WHITESPACE"," ",1139],["T_ELSEIF","elseif",1139],["T_WHITESPACE"," ",1139],"(",["T_ISSET","isset",1139],"(",["T_VARIABLE","$thistory",1139],"[",["T_CONSTANT_ENCAPSED_STRING","'final_delivery'",1139],"]",")",["T_WHITESPACE","\n                                                          ",1139],["T_BOOLEAN_AND","&&",1140],["T_WHITESPACE"," ",1140],["T_STRING_CAST","(string)",1140],["T_VARIABLE","$thistory",1140],"[",["T_CONSTANT_ENCAPSED_STRING","'final_delivery'",1140],"]",["T_WHITESPACE"," ",1140],["T_IS_IDENTICAL","===",1140],["T_WHITESPACE"," ",1140],["T_CONSTANT_ENCAPSED_STRING","'true'",1140],["T_WHITESPACE","\n                                                ",1140],")",["T_WHITESPACE"," ",1141],"{",["T_WHITESPACE","\n                                                    ",1141],["T_COMMENT","\/*\n                                                    * if the history is final delivery, there is no informationabout\n                                                    * city, state and country\n                                                    *\/",1142],["T_WHITESPACE","\n                                                    ",1145],["T_VARIABLE","$addArr",1146],["T_WHITESPACE"," ",1146],"=",["T_WHITESPACE"," ",1146],["T_ARRAY","array",1146],"(",")",";",["T_WHITESPACE","\n                                                    ",1146],["T_IF","if",1147],["T_WHITESPACE"," ",1147],"(",["T_ISSET","isset",1147],"(",["T_VARIABLE","$txml",1147],["T_OBJECT_OPERATOR","->",1147],["T_STRING","Receiver",1147],["T_OBJECT_OPERATOR","->",1147],["T_STRING","City",1147],")",")",["T_WHITESPACE"," ",1147],"{",["T_WHITESPACE","\n                                                        ",1147],["T_VARIABLE","$addArr",1148],"[","]",["T_WHITESPACE"," ",1148],"=",["T_WHITESPACE"," ",1148],["T_STRING_CAST","(string)",1148],["T_VARIABLE","$txml",1148],["T_OBJECT_OPERATOR","->",1148],["T_STRING","Receiver",1148],["T_OBJECT_OPERATOR","->",1148],["T_STRING","City",1148],";",["T_WHITESPACE","\n                                                    ",1148],"}",["T_WHITESPACE","\n                                                    ",1149],["T_IF","if",1150],["T_WHITESPACE"," ",1150],"(",["T_ISSET","isset",1150],"(",["T_VARIABLE","$thistory",1150],["T_OBJECT_OPERATOR","->",1150],["T_STRING","Receiver",1150],["T_OBJECT_OPERATOR","->",1150],["T_STRING","State",1150],")",")",["T_WHITESPACE"," ",1150],"{",["T_WHITESPACE","\n                                                        ",1150],["T_VARIABLE","$addArr",1151],"[","]",["T_WHITESPACE"," ",1151],"=",["T_WHITESPACE"," ",1151],["T_STRING_CAST","(string)",1151],["T_VARIABLE","$txml",1151],["T_OBJECT_OPERATOR","->",1151],["T_STRING","Receiver",1151],["T_OBJECT_OPERATOR","->",1151],["T_STRING","State",1151],";",["T_WHITESPACE","\n                                                    ",1151],"}",["T_WHITESPACE","\n                                                    ",1152],["T_IF","if",1153],["T_WHITESPACE"," ",1153],"(",["T_ISSET","isset",1153],"(",["T_VARIABLE","$thistory",1153],["T_OBJECT_OPERATOR","->",1153],["T_STRING","Receiver",1153],["T_OBJECT_OPERATOR","->",1153],["T_STRING","CountryCode",1153],")",")",["T_WHITESPACE"," ",1153],"{",["T_WHITESPACE","\n                                                        ",1153],["T_VARIABLE","$addArr",1154],"[","]",["T_WHITESPACE"," ",1154],"=",["T_WHITESPACE"," ",1154],["T_STRING_CAST","(string)",1154],["T_VARIABLE","$txml",1154],["T_OBJECT_OPERATOR","->",1154],["T_STRING","Receiver",1154],["T_OBJECT_OPERATOR","->",1154],["T_STRING","Country",1154],";",["T_WHITESPACE","\n                                                    ",1154],"}",["T_WHITESPACE","\n                                                    ",1155],["T_VARIABLE","$tempArr",1156],"[",["T_CONSTANT_ENCAPSED_STRING","'deliverylocation'",1156],"]",["T_WHITESPACE"," ",1156],"=",["T_WHITESPACE"," ",1156],["T_STRING","implode",1156],"(",["T_CONSTANT_ENCAPSED_STRING","', '",1156],",",["T_WHITESPACE"," ",1156],["T_VARIABLE","$addArr",1156],")",";",["T_WHITESPACE","\n                                                ",1156],"}",["T_WHITESPACE","\n                                                ",1157],["T_VARIABLE","$packageProgress",1158],"[","]",["T_WHITESPACE"," ",1158],"=",["T_WHITESPACE"," ",1158],["T_VARIABLE","$tempArr",1158],";",["T_WHITESPACE","\n                                            ",1158],"}",["T_WHITESPACE","\n                                            ",1159],["T_VARIABLE","$rArr",1160],"[",["T_CONSTANT_ENCAPSED_STRING","'progressdetail'",1160],"]",["T_WHITESPACE"," ",1160],"=",["T_WHITESPACE"," ",1160],["T_VARIABLE","$packageProgress",1160],";",["T_WHITESPACE","\n\n                                        ",1160],"}",["T_WHITESPACE","\n                                        ",1162],["T_VARIABLE","$resultArr",1163],"[",["T_VARIABLE","$tracknum",1163],"]",["T_WHITESPACE"," ",1163],"=",["T_WHITESPACE"," ",1163],["T_VARIABLE","$rArr",1163],";",["T_WHITESPACE","\n                                    ",1163],"}",["T_WHITESPACE"," ",1164],["T_ELSE","else",1164],["T_WHITESPACE"," ",1164],"{",["T_WHITESPACE","\n                                        ",1164],["T_VARIABLE","$description",1165],["T_WHITESPACE"," ",1165],"=",["T_WHITESPACE"," ",1165],["T_STRING_CAST","(string)",1165],["T_VARIABLE","$txml",1165],["T_OBJECT_OPERATOR","->",1165],["T_STRING","Result",1165],["T_OBJECT_OPERATOR","->",1165],["T_STRING","Desc",1165],";",["T_WHITESPACE","\n                                        ",1165],["T_IF","if",1166],["T_WHITESPACE"," ",1166],"(",["T_VARIABLE","$description",1166],")",["T_WHITESPACE","\n                                            ",1166],["T_VARIABLE","$errorArr",1167],"[",["T_VARIABLE","$tracknum",1167],"]",["T_WHITESPACE"," ",1167],"=",["T_WHITESPACE"," ",1167],["T_STRING","Mage",1167],["T_DOUBLE_COLON","::",1167],["T_STRING","helper",1167],"(",["T_CONSTANT_ENCAPSED_STRING","'usa'",1167],")",["T_OBJECT_OPERATOR","->",1167],["T_STRING","__",1167],"(",["T_CONSTANT_ENCAPSED_STRING","'Error #%s: %s'",1167],",",["T_WHITESPACE"," ",1167],["T_VARIABLE","$code",1167],",",["T_WHITESPACE"," ",1167],["T_VARIABLE","$description",1167],")",";",["T_WHITESPACE","\n                                        ",1167],["T_ELSE","else",1168],["T_WHITESPACE","\n                                            ",1168],["T_VARIABLE","$errorArr",1169],"[",["T_VARIABLE","$tracknum",1169],"]",["T_WHITESPACE"," ",1169],"=",["T_WHITESPACE"," ",1169],["T_STRING","Mage",1169],["T_DOUBLE_COLON","::",1169],["T_STRING","helper",1169],"(",["T_CONSTANT_ENCAPSED_STRING","'usa'",1169],")",["T_OBJECT_OPERATOR","->",1169],["T_STRING","__",1169],"(",["T_CONSTANT_ENCAPSED_STRING","'Unable to retrieve tracking'",1169],")",";",["T_WHITESPACE","\n                                    ",1169],"}",["T_WHITESPACE","\n                                ",1170],"}",["T_WHITESPACE"," ",1171],["T_ELSE","else",1171],["T_WHITESPACE"," ",1171],"{",["T_WHITESPACE","\n                                    ",1171],["T_VARIABLE","$errorArr",1172],"[",["T_VARIABLE","$tracknum",1172],"]",["T_WHITESPACE"," ",1172],"=",["T_WHITESPACE"," ",1172],["T_STRING","Mage",1172],["T_DOUBLE_COLON","::",1172],["T_STRING","helper",1172],"(",["T_CONSTANT_ENCAPSED_STRING","'usa'",1172],")",["T_OBJECT_OPERATOR","->",1172],["T_STRING","__",1172],"(",["T_CONSTANT_ENCAPSED_STRING","'Unable to retrieve tracking'",1172],")",";",["T_WHITESPACE","\n                                ",1172],"}",["T_WHITESPACE","\n\n                            ",1173],"}",["T_WHITESPACE","\n                        ",1175],"}",["T_WHITESPACE","\n\n                    ",1176],"}",["T_WHITESPACE","\n                ",1178],"}",["T_WHITESPACE","\n            ",1179],"}",["T_WHITESPACE"," ",1180],["T_ELSE","else",1180],["T_WHITESPACE"," ",1180],"{",["T_WHITESPACE","\n                ",1180],["T_VARIABLE","$errorTitle",1181],["T_WHITESPACE"," ",1181],"=",["T_WHITESPACE"," ",1181],["T_STRING","Mage",1181],["T_DOUBLE_COLON","::",1181],["T_STRING","helper",1181],"(",["T_CONSTANT_ENCAPSED_STRING","'usa'",1181],")",["T_OBJECT_OPERATOR","->",1181],["T_STRING","__",1181],"(",["T_CONSTANT_ENCAPSED_STRING","'Response is in the wrong format'",1181],")",";",["T_WHITESPACE","\n            ",1181],"}",["T_WHITESPACE","\n        ",1182],"}",["T_WHITESPACE","\n\n        ",1183],["T_VARIABLE","$result",1185],["T_WHITESPACE"," ",1185],"=",["T_WHITESPACE"," ",1185],["T_STRING","Mage",1185],["T_DOUBLE_COLON","::",1185],["T_STRING","getModel",1185],"(",["T_CONSTANT_ENCAPSED_STRING","'shipping\/tracking_result'",1185],")",";",["T_WHITESPACE","\n        ",1185],["T_IF","if",1186],["T_WHITESPACE"," ",1186],"(",["T_VARIABLE","$errorArr",1186],["T_WHITESPACE"," ",1186],["T_BOOLEAN_OR","||",1186],["T_WHITESPACE"," ",1186],["T_VARIABLE","$resultArr",1186],")",["T_WHITESPACE"," ",1186],"{",["T_WHITESPACE","\n            ",1186],["T_FOREACH","foreach",1187],["T_WHITESPACE"," ",1187],"(",["T_VARIABLE","$errorArr",1187],["T_WHITESPACE"," ",1187],["T_AS","as",1187],["T_WHITESPACE"," ",1187],["T_VARIABLE","$t",1187],["T_WHITESPACE"," ",1187],["T_DOUBLE_ARROW","=>",1187],["T_WHITESPACE"," ",1187],["T_VARIABLE","$r",1187],")",["T_WHITESPACE"," ",1187],"{",["T_WHITESPACE","\n                ",1187],["T_VARIABLE","$error",1188],["T_WHITESPACE"," ",1188],"=",["T_WHITESPACE"," ",1188],["T_STRING","Mage",1188],["T_DOUBLE_COLON","::",1188],["T_STRING","getModel",1188],"(",["T_CONSTANT_ENCAPSED_STRING","'shipping\/tracking_result_error'",1188],")",";",["T_WHITESPACE","\n                ",1188],["T_VARIABLE","$error",1189],["T_OBJECT_OPERATOR","->",1189],["T_STRING","setCarrier",1189],"(",["T_CONSTANT_ENCAPSED_STRING","'dhl'",1189],")",";",["T_WHITESPACE","\n                ",1189],["T_VARIABLE","$error",1190],["T_OBJECT_OPERATOR","->",1190],["T_STRING","setCarrierTitle",1190],"(",["T_VARIABLE","$this",1190],["T_OBJECT_OPERATOR","->",1190],["T_STRING","getConfigData",1190],"(",["T_CONSTANT_ENCAPSED_STRING","'title'",1190],")",")",";",["T_WHITESPACE","\n                ",1190],["T_VARIABLE","$error",1191],["T_OBJECT_OPERATOR","->",1191],["T_STRING","setTracking",1191],"(",["T_VARIABLE","$t",1191],")",";",["T_WHITESPACE","\n                ",1191],["T_VARIABLE","$error",1192],["T_OBJECT_OPERATOR","->",1192],["T_STRING","setErrorMessage",1192],"(",["T_VARIABLE","$r",1192],")",";",["T_WHITESPACE","\n                ",1192],["T_VARIABLE","$result",1193],["T_OBJECT_OPERATOR","->",1193],["T_STRING","append",1193],"(",["T_VARIABLE","$error",1193],")",";",["T_WHITESPACE","\n            ",1193],"}",["T_WHITESPACE","\n\n            ",1194],["T_FOREACH","foreach",1196],["T_WHITESPACE"," ",1196],"(",["T_VARIABLE","$resultArr",1196],["T_WHITESPACE"," ",1196],["T_AS","as",1196],["T_WHITESPACE"," ",1196],["T_VARIABLE","$t",1196],["T_WHITESPACE"," ",1196],["T_DOUBLE_ARROW","=>",1196],["T_WHITESPACE"," ",1196],["T_VARIABLE","$data",1196],")",["T_WHITESPACE"," ",1196],"{",["T_WHITESPACE","\n                ",1196],["T_VARIABLE","$tracking",1197],["T_WHITESPACE"," ",1197],"=",["T_WHITESPACE"," ",1197],["T_STRING","Mage",1197],["T_DOUBLE_COLON","::",1197],["T_STRING","getModel",1197],"(",["T_CONSTANT_ENCAPSED_STRING","'shipping\/tracking_result_status'",1197],")",";",["T_WHITESPACE","\n                ",1197],["T_VARIABLE","$tracking",1198],["T_OBJECT_OPERATOR","->",1198],["T_STRING","setCarrier",1198],"(",["T_CONSTANT_ENCAPSED_STRING","'dhl'",1198],")",";",["T_WHITESPACE","\n                ",1198],["T_VARIABLE","$tracking",1199],["T_OBJECT_OPERATOR","->",1199],["T_STRING","setCarrierTitle",1199],"(",["T_VARIABLE","$this",1199],["T_OBJECT_OPERATOR","->",1199],["T_STRING","getConfigData",1199],"(",["T_CONSTANT_ENCAPSED_STRING","'title'",1199],")",")",";",["T_WHITESPACE","\n                ",1199],["T_VARIABLE","$tracking",1200],["T_OBJECT_OPERATOR","->",1200],["T_STRING","setTracking",1200],"(",["T_VARIABLE","$t",1200],")",";",["T_WHITESPACE","\n                ",1200],["T_VARIABLE","$tracking",1201],["T_OBJECT_OPERATOR","->",1201],["T_STRING","addData",1201],"(",["T_VARIABLE","$data",1201],")",";",["T_WHITESPACE","\n\n                ",1201],["T_VARIABLE","$result",1203],["T_OBJECT_OPERATOR","->",1203],["T_STRING","append",1203],"(",["T_VARIABLE","$tracking",1203],")",";",["T_WHITESPACE","\n            ",1203],"}",["T_WHITESPACE","\n        ",1204],"}",["T_WHITESPACE"," ",1205],["T_ELSE","else",1205],["T_WHITESPACE"," ",1205],"{",["T_WHITESPACE","\n            ",1205],["T_FOREACH","foreach",1206],["T_WHITESPACE"," ",1206],"(",["T_VARIABLE","$trackings",1206],["T_WHITESPACE"," ",1206],["T_AS","as",1206],["T_WHITESPACE"," ",1206],["T_VARIABLE","$t",1206],")",["T_WHITESPACE"," ",1206],"{",["T_WHITESPACE","\n                ",1206],["T_VARIABLE","$error",1207],["T_WHITESPACE"," ",1207],"=",["T_WHITESPACE"," ",1207],["T_STRING","Mage",1207],["T_DOUBLE_COLON","::",1207],["T_STRING","getModel",1207],"(",["T_CONSTANT_ENCAPSED_STRING","'shipping\/tracking_result_error'",1207],")",";",["T_WHITESPACE","\n                ",1207],["T_VARIABLE","$error",1208],["T_OBJECT_OPERATOR","->",1208],["T_STRING","setCarrier",1208],"(",["T_CONSTANT_ENCAPSED_STRING","'dhl'",1208],")",";",["T_WHITESPACE","\n                ",1208],["T_VARIABLE","$error",1209],["T_OBJECT_OPERATOR","->",1209],["T_STRING","setCarrierTitle",1209],"(",["T_VARIABLE","$this",1209],["T_OBJECT_OPERATOR","->",1209],["T_STRING","getConfigData",1209],"(",["T_CONSTANT_ENCAPSED_STRING","'title'",1209],")",")",";",["T_WHITESPACE","\n                ",1209],["T_VARIABLE","$error",1210],["T_OBJECT_OPERATOR","->",1210],["T_STRING","setTracking",1210],"(",["T_VARIABLE","$t",1210],")",";",["T_WHITESPACE","\n                ",1210],["T_VARIABLE","$error",1211],["T_OBJECT_OPERATOR","->",1211],["T_STRING","setErrorMessage",1211],"(",["T_VARIABLE","$errorTitle",1211],")",";",["T_WHITESPACE","\n                ",1211],["T_VARIABLE","$result",1212],["T_OBJECT_OPERATOR","->",1212],["T_STRING","append",1212],"(",["T_VARIABLE","$error",1212],")",";",["T_WHITESPACE","\n\n            ",1212],"}",["T_WHITESPACE","\n        ",1214],"}",["T_WHITESPACE","\n        ",1215],["T_VARIABLE","$this",1216],["T_OBJECT_OPERATOR","->",1216],["T_STRING","_result",1216],["T_WHITESPACE"," ",1216],"=",["T_WHITESPACE"," ",1216],["T_VARIABLE","$result",1216],";",["T_WHITESPACE","\n    ",1216],"}",["T_WHITESPACE","\n\n    ",1217],["T_DOC_COMMENT","\/**\n     * Get tracking response\n     *\n     * @return string\n     *\/",1219],["T_WHITESPACE","\n    ",1223],["T_PUBLIC","public",1224],["T_WHITESPACE"," ",1224],["T_FUNCTION","function",1224],["T_WHITESPACE"," ",1224],["T_STRING","getResponse",1224],"(",")",["T_WHITESPACE","\n    ",1224],"{",["T_WHITESPACE","\n        ",1225],["T_VARIABLE","$statuses",1226],["T_WHITESPACE"," ",1226],"=",["T_WHITESPACE"," ",1226],["T_CONSTANT_ENCAPSED_STRING","''",1226],";",["T_WHITESPACE","\n        ",1226],["T_IF","if",1227],["T_WHITESPACE"," ",1227],"(",["T_VARIABLE","$this",1227],["T_OBJECT_OPERATOR","->",1227],["T_STRING","_result",1227],["T_WHITESPACE"," ",1227],["T_INSTANCEOF","instanceof",1227],["T_WHITESPACE"," ",1227],["T_STRING","Mage_Shipping_Model_Tracking_Result",1227],")",["T_WHITESPACE"," ",1227],"{",["T_WHITESPACE","\n            ",1227],["T_IF","if",1228],["T_WHITESPACE"," ",1228],"(",["T_VARIABLE","$trackings",1228],["T_WHITESPACE"," ",1228],"=",["T_WHITESPACE"," ",1228],["T_VARIABLE","$this",1228],["T_OBJECT_OPERATOR","->",1228],["T_STRING","_result",1228],["T_OBJECT_OPERATOR","->",1228],["T_STRING","getAllTrackings",1228],"(",")",")",["T_WHITESPACE"," ",1228],"{",["T_WHITESPACE","\n                ",1228],["T_FOREACH","foreach",1229],["T_WHITESPACE"," ",1229],"(",["T_VARIABLE","$trackings",1229],["T_WHITESPACE"," ",1229],["T_AS","as",1229],["T_WHITESPACE"," ",1229],["T_VARIABLE","$tracking",1229],")",["T_WHITESPACE"," ",1229],"{",["T_WHITESPACE","\n                    ",1229],["T_IF","if",1230],["T_WHITESPACE"," ",1230],"(",["T_VARIABLE","$data",1230],["T_WHITESPACE"," ",1230],"=",["T_WHITESPACE"," ",1230],["T_VARIABLE","$tracking",1230],["T_OBJECT_OPERATOR","->",1230],["T_STRING","getAllData",1230],"(",")",")",["T_WHITESPACE"," ",1230],"{",["T_WHITESPACE","\n                        ",1230],["T_IF","if",1231],["T_WHITESPACE"," ",1231],"(",["T_ISSET","isset",1231],"(",["T_VARIABLE","$data",1231],"[",["T_CONSTANT_ENCAPSED_STRING","'status'",1231],"]",")",")",["T_WHITESPACE"," ",1231],"{",["T_WHITESPACE","\n                            ",1231],["T_VARIABLE","$statuses",1232],["T_WHITESPACE"," ",1232],["T_CONCAT_EQUAL",".=",1232],["T_WHITESPACE"," ",1232],["T_STRING","Mage",1232],["T_DOUBLE_COLON","::",1232],["T_STRING","helper",1232],"(",["T_CONSTANT_ENCAPSED_STRING","'usa'",1232],")",["T_OBJECT_OPERATOR","->",1232],["T_STRING","__",1232],"(",["T_VARIABLE","$data",1232],"[",["T_CONSTANT_ENCAPSED_STRING","'status'",1232],"]",")",["T_WHITESPACE"," ",1232],".",["T_WHITESPACE"," ",1232],["T_CONSTANT_ENCAPSED_STRING","\"\\n<br\/>\"",1232],";",["T_WHITESPACE","\n                        ",1232],"}",["T_WHITESPACE"," ",1233],["T_ELSE","else",1233],["T_WHITESPACE"," ",1233],"{",["T_WHITESPACE","\n                            ",1233],["T_VARIABLE","$statuses",1234],["T_WHITESPACE"," ",1234],["T_CONCAT_EQUAL",".=",1234],["T_WHITESPACE"," ",1234],["T_STRING","Mage",1234],["T_DOUBLE_COLON","::",1234],["T_STRING","helper",1234],"(",["T_CONSTANT_ENCAPSED_STRING","'usa'",1234],")",["T_OBJECT_OPERATOR","->",1234],["T_STRING","__",1234],"(",["T_VARIABLE","$data",1234],"[",["T_CONSTANT_ENCAPSED_STRING","'error_message'",1234],"]",")",["T_WHITESPACE"," ",1234],".",["T_WHITESPACE"," ",1234],["T_CONSTANT_ENCAPSED_STRING","\"\\n<br\/>\"",1234],";",["T_WHITESPACE","\n                        ",1234],"}",["T_WHITESPACE","\n                    ",1235],"}",["T_WHITESPACE","\n                ",1236],"}",["T_WHITESPACE","\n            ",1237],"}",["T_WHITESPACE","\n        ",1238],"}",["T_WHITESPACE","\n        ",1239],["T_IF","if",1240],["T_WHITESPACE"," ",1240],"(",["T_EMPTY","empty",1240],"(",["T_VARIABLE","$statuses",1240],")",")",["T_WHITESPACE"," ",1240],"{",["T_WHITESPACE","\n            ",1240],["T_VARIABLE","$statuses",1241],["T_WHITESPACE"," ",1241],"=",["T_WHITESPACE"," ",1241],["T_STRING","Mage",1241],["T_DOUBLE_COLON","::",1241],["T_STRING","helper",1241],"(",["T_CONSTANT_ENCAPSED_STRING","'usa'",1241],")",["T_OBJECT_OPERATOR","->",1241],["T_STRING","__",1241],"(",["T_CONSTANT_ENCAPSED_STRING","'Empty response'",1241],")",";",["T_WHITESPACE","\n        ",1241],"}",["T_WHITESPACE","\n        ",1242],["T_RETURN","return",1243],["T_WHITESPACE"," ",1243],["T_VARIABLE","$statuses",1243],";",["T_WHITESPACE","\n    ",1243],"}",["T_WHITESPACE","\n\n    ",1244],["T_DOC_COMMENT","\/**\n     * Get allowed shipping methods\n     *\n     * @return array\n     *\/",1246],["T_WHITESPACE","\n    ",1250],["T_PUBLIC","public",1251],["T_WHITESPACE"," ",1251],["T_FUNCTION","function",1251],["T_WHITESPACE"," ",1251],["T_STRING","getAllowedMethods",1251],"(",")",["T_WHITESPACE","\n    ",1251],"{",["T_WHITESPACE","\n        ",1252],["T_VARIABLE","$allowed",1253],["T_WHITESPACE"," ",1253],"=",["T_WHITESPACE"," ",1253],["T_STRING","explode",1253],"(",["T_CONSTANT_ENCAPSED_STRING","','",1253],",",["T_WHITESPACE"," ",1253],["T_VARIABLE","$this",1253],["T_OBJECT_OPERATOR","->",1253],["T_STRING","getConfigData",1253],"(",["T_CONSTANT_ENCAPSED_STRING","'allowed_methods'",1253],")",")",";",["T_WHITESPACE","\n        ",1253],["T_VARIABLE","$arr",1254],["T_WHITESPACE"," ",1254],"=",["T_WHITESPACE"," ",1254],["T_ARRAY","array",1254],"(",")",";",["T_WHITESPACE","\n        ",1254],["T_FOREACH","foreach",1255],["T_WHITESPACE"," ",1255],"(",["T_VARIABLE","$allowed",1255],["T_WHITESPACE"," ",1255],["T_AS","as",1255],["T_WHITESPACE"," ",1255],["T_VARIABLE","$k",1255],")",["T_WHITESPACE"," ",1255],"{",["T_WHITESPACE","\n            ",1255],["T_VARIABLE","$arr",1256],"[",["T_VARIABLE","$k",1256],"]",["T_WHITESPACE"," ",1256],"=",["T_WHITESPACE"," ",1256],["T_VARIABLE","$this",1256],["T_OBJECT_OPERATOR","->",1256],["T_STRING","getCode",1256],"(",["T_CONSTANT_ENCAPSED_STRING","'service'",1256],",",["T_WHITESPACE"," ",1256],["T_VARIABLE","$k",1256],")",";",["T_WHITESPACE","\n        ",1256],"}",["T_WHITESPACE","\n        ",1257],["T_RETURN","return",1258],["T_WHITESPACE"," ",1258],["T_VARIABLE","$arr",1258],";",["T_WHITESPACE","\n    ",1258],"}",["T_WHITESPACE","\n\n    ",1259],["T_DOC_COMMENT","\/**\n     * Is state province required\n     *\n     * @return bool\n     *\/",1261],["T_WHITESPACE","\n    ",1265],["T_PUBLIC","public",1266],["T_WHITESPACE"," ",1266],["T_FUNCTION","function",1266],["T_WHITESPACE"," ",1266],["T_STRING","isStateProvinceRequired",1266],"(",")",["T_WHITESPACE","\n    ",1266],"{",["T_WHITESPACE","\n        ",1267],["T_RETURN","return",1268],["T_WHITESPACE"," ",1268],["T_STRING","true",1268],";",["T_WHITESPACE","\n    ",1268],"}",["T_WHITESPACE","\n\n    ",1269],["T_DOC_COMMENT","\/**\n     * Get additional protection value types\n     *\n     * @return array\n     *\/",1271],["T_WHITESPACE","\n    ",1275],["T_PUBLIC","public",1276],["T_WHITESPACE"," ",1276],["T_FUNCTION","function",1276],["T_WHITESPACE"," ",1276],["T_STRING","getAdditionalProtectionValueTypes",1276],"(",")",["T_WHITESPACE","\n    ",1276],"{",["T_WHITESPACE","\n        ",1277],["T_RETURN","return",1278],["T_WHITESPACE"," ",1278],["T_ARRAY","array",1278],"(",["T_WHITESPACE","\n            ",1278],["T_STRING","self",1279],["T_DOUBLE_COLON","::",1279],["T_STRING","ADDITIONAL_PROTECTION_VALUE_CONFIG",1279],["T_WHITESPACE"," ",1279],["T_DOUBLE_ARROW","=>",1279],["T_WHITESPACE"," ",1279],["T_STRING","Mage",1279],["T_DOUBLE_COLON","::",1279],["T_STRING","helper",1279],"(",["T_CONSTANT_ENCAPSED_STRING","'usa'",1279],")",["T_OBJECT_OPERATOR","->",1279],["T_STRING","__",1279],"(",["T_CONSTANT_ENCAPSED_STRING","'Configuration'",1279],")",",",["T_WHITESPACE","\n            ",1279],["T_STRING","self",1280],["T_DOUBLE_COLON","::",1280],["T_STRING","ADDITIONAL_PROTECTION_VALUE_SUBTOTAL",1280],["T_WHITESPACE"," ",1280],["T_DOUBLE_ARROW","=>",1280],["T_WHITESPACE"," ",1280],["T_STRING","Mage",1280],["T_DOUBLE_COLON","::",1280],["T_STRING","helper",1280],"(",["T_CONSTANT_ENCAPSED_STRING","'usa'",1280],")",["T_OBJECT_OPERATOR","->",1280],["T_STRING","__",1280],"(",["T_CONSTANT_ENCAPSED_STRING","'Subtotal'",1280],")",",",["T_WHITESPACE","\n            ",1280],["T_STRING","self",1281],["T_DOUBLE_COLON","::",1281],["T_STRING","ADDITIONAL_PROTECTION_VALUE_SUBTOTAL_WITH_DISCOUNT",1281],["T_WHITESPACE"," ",1281],["T_DOUBLE_ARROW","=>",1281],["T_WHITESPACE"," ",1281],["T_STRING","Mage",1281],["T_DOUBLE_COLON","::",1281],["T_STRING","helper",1281],"(",["T_CONSTANT_ENCAPSED_STRING","'usa'",1281],")",["T_OBJECT_OPERATOR","->",1281],["T_STRING","__",1281],"(",["T_CONSTANT_ENCAPSED_STRING","'Subtotal With Discount'",1281],")",",",["T_WHITESPACE","\n        ",1281],")",";",["T_WHITESPACE","\n    ",1282],"}",["T_WHITESPACE","\n\n    ",1283],["T_DOC_COMMENT","\/**\n     * Get additional protection rounding types\n     *\n     * @return array\n     *\/",1285],["T_WHITESPACE","\n    ",1289],["T_PUBLIC","public",1290],["T_WHITESPACE"," ",1290],["T_FUNCTION","function",1290],["T_WHITESPACE"," ",1290],["T_STRING","getAdditionalProtectionRoundingTypes",1290],"(",")",["T_WHITESPACE","\n    ",1290],"{",["T_WHITESPACE","\n        ",1291],["T_RETURN","return",1292],["T_WHITESPACE"," ",1292],["T_ARRAY","array",1292],"(",["T_WHITESPACE","\n            ",1292],["T_STRING","self",1293],["T_DOUBLE_COLON","::",1293],["T_STRING","ADDITIONAL_PROTECTION_ROUNDING_FLOOR",1293],["T_WHITESPACE"," ",1293],["T_DOUBLE_ARROW","=>",1293],["T_WHITESPACE"," ",1293],["T_STRING","Mage",1293],["T_DOUBLE_COLON","::",1293],["T_STRING","helper",1293],"(",["T_CONSTANT_ENCAPSED_STRING","'usa'",1293],")",["T_OBJECT_OPERATOR","->",1293],["T_STRING","__",1293],"(",["T_CONSTANT_ENCAPSED_STRING","'To Lower'",1293],")",",",["T_WHITESPACE","\n            ",1293],["T_STRING","self",1294],["T_DOUBLE_COLON","::",1294],["T_STRING","ADDITIONAL_PROTECTION_ROUNDING_CEIL",1294],["T_WHITESPACE"," ",1294],["T_DOUBLE_ARROW","=>",1294],["T_WHITESPACE"," ",1294],["T_STRING","Mage",1294],["T_DOUBLE_COLON","::",1294],["T_STRING","helper",1294],"(",["T_CONSTANT_ENCAPSED_STRING","'usa'",1294],")",["T_OBJECT_OPERATOR","->",1294],["T_STRING","__",1294],"(",["T_CONSTANT_ENCAPSED_STRING","'To Upper'",1294],")",",",["T_WHITESPACE","\n            ",1294],["T_STRING","self",1295],["T_DOUBLE_COLON","::",1295],["T_STRING","ADDITIONAL_PROTECTION_ROUNDING_ROUND",1295],["T_WHITESPACE"," ",1295],["T_DOUBLE_ARROW","=>",1295],["T_WHITESPACE"," ",1295],["T_STRING","Mage",1295],["T_DOUBLE_COLON","::",1295],["T_STRING","helper",1295],"(",["T_CONSTANT_ENCAPSED_STRING","'usa'",1295],")",["T_OBJECT_OPERATOR","->",1295],["T_STRING","__",1295],"(",["T_CONSTANT_ENCAPSED_STRING","'Round'",1295],")",",",["T_WHITESPACE","\n        ",1295],")",";",["T_WHITESPACE","\n    ",1296],"}",["T_WHITESPACE","\n\n    ",1297],["T_DOC_COMMENT","\/**\n     * Map request to shipment\n     *\n     * @param Varien_Object $request\n     * @return null\n     *\/",1299],["T_WHITESPACE","\n    ",1304],["T_PROTECTED","protected",1305],["T_WHITESPACE"," ",1305],["T_FUNCTION","function",1305],["T_WHITESPACE"," ",1305],["T_STRING","_mapRequestToShipment",1305],"(",["T_STRING","Varien_Object",1305],["T_WHITESPACE"," ",1305],["T_VARIABLE","$request",1305],")",["T_WHITESPACE","\n    ",1305],"{",["T_WHITESPACE","\n        ",1306],["T_VARIABLE","$customsValue",1307],["T_WHITESPACE"," ",1307],"=",["T_WHITESPACE"," ",1307],["T_VARIABLE","$request",1307],["T_OBJECT_OPERATOR","->",1307],["T_STRING","getPackageParams",1307],"(",")",["T_OBJECT_OPERATOR","->",1307],["T_STRING","getCustomsValue",1307],"(",")",";",["T_WHITESPACE","\n        ",1307],["T_VARIABLE","$request",1308],["T_OBJECT_OPERATOR","->",1308],["T_STRING","setOrigPersonName",1308],"(",["T_VARIABLE","$request",1308],["T_OBJECT_OPERATOR","->",1308],["T_STRING","getShipperContactPersonName",1308],"(",")",")",";",["T_WHITESPACE","\n        ",1308],["T_VARIABLE","$request",1309],["T_OBJECT_OPERATOR","->",1309],["T_STRING","setOrigPostal",1309],"(",["T_VARIABLE","$request",1309],["T_OBJECT_OPERATOR","->",1309],["T_STRING","getShipperAddressPostalCode",1309],"(",")",")",";",["T_WHITESPACE","\n        ",1309],["T_VARIABLE","$request",1310],["T_OBJECT_OPERATOR","->",1310],["T_STRING","setOrigPhoneNumber",1310],"(",["T_VARIABLE","$request",1310],["T_OBJECT_OPERATOR","->",1310],["T_STRING","getShipperContactPhoneNumber",1310],"(",")",")",";",["T_WHITESPACE","\n        ",1310],["T_VARIABLE","$request",1311],["T_OBJECT_OPERATOR","->",1311],["T_STRING","setOrigCompanyName",1311],"(",["T_VARIABLE","$request",1311],["T_OBJECT_OPERATOR","->",1311],["T_STRING","getShipperContactCompanyName",1311],"(",")",")",";",["T_WHITESPACE","\n        ",1311],["T_VARIABLE","$request",1312],["T_OBJECT_OPERATOR","->",1312],["T_STRING","setOrigCountryId",1312],"(",["T_VARIABLE","$request",1312],["T_OBJECT_OPERATOR","->",1312],["T_STRING","getShipperAddressCountryCode",1312],"(",")",")",";",["T_WHITESPACE","\n        ",1312],["T_VARIABLE","$request",1313],["T_OBJECT_OPERATOR","->",1313],["T_STRING","setOrigState",1313],"(",["T_VARIABLE","$request",1313],["T_OBJECT_OPERATOR","->",1313],["T_STRING","getShipperAddressStateOrProvinceCode",1313],"(",")",")",";",["T_WHITESPACE","\n        ",1313],["T_VARIABLE","$request",1314],["T_OBJECT_OPERATOR","->",1314],["T_STRING","setOrigCity",1314],"(",["T_VARIABLE","$request",1314],["T_OBJECT_OPERATOR","->",1314],["T_STRING","getShipperAddressCity",1314],"(",")",")",";",["T_WHITESPACE","\n        ",1314],["T_VARIABLE","$request",1315],["T_OBJECT_OPERATOR","->",1315],["T_STRING","setOrigStreet",1315],"(",["T_VARIABLE","$request",1315],["T_OBJECT_OPERATOR","->",1315],["T_STRING","getShipperAddressStreet1",1315],"(",")",["T_WHITESPACE"," ",1315],".",["T_WHITESPACE"," ",1315],["T_CONSTANT_ENCAPSED_STRING","' '",1315],["T_WHITESPACE"," ",1315],".",["T_WHITESPACE"," ",1315],["T_VARIABLE","$request",1315],["T_OBJECT_OPERATOR","->",1315],["T_STRING","getShipperAddressStreet2",1315],"(",")",")",";",["T_WHITESPACE","\n        ",1315],["T_VARIABLE","$request",1316],["T_OBJECT_OPERATOR","->",1316],["T_STRING","setOrigStreetLine2",1316],"(",["T_VARIABLE","$request",1316],["T_OBJECT_OPERATOR","->",1316],["T_STRING","getShipperAddressStreet2",1316],"(",")",")",";",["T_WHITESPACE","\n\n        ",1316],["T_VARIABLE","$request",1318],["T_OBJECT_OPERATOR","->",1318],["T_STRING","setDestPersonName",1318],"(",["T_VARIABLE","$request",1318],["T_OBJECT_OPERATOR","->",1318],["T_STRING","getRecipientContactPersonName",1318],"(",")",")",";",["T_WHITESPACE","\n        ",1318],["T_VARIABLE","$request",1319],["T_OBJECT_OPERATOR","->",1319],["T_STRING","setDestPostcode",1319],"(",["T_VARIABLE","$request",1319],["T_OBJECT_OPERATOR","->",1319],["T_STRING","getRecipientAddressPostalCode",1319],"(",")",")",";",["T_WHITESPACE","\n        ",1319],["T_VARIABLE","$request",1320],["T_OBJECT_OPERATOR","->",1320],["T_STRING","setDestPhoneNumber",1320],"(",["T_VARIABLE","$request",1320],["T_OBJECT_OPERATOR","->",1320],["T_STRING","getRecipientContactPhoneNumber",1320],"(",")",")",";",["T_WHITESPACE","\n        ",1320],["T_VARIABLE","$request",1321],["T_OBJECT_OPERATOR","->",1321],["T_STRING","setDestCompanyName",1321],"(",["T_VARIABLE","$request",1321],["T_OBJECT_OPERATOR","->",1321],["T_STRING","getRecipientContactCompanyName",1321],"(",")",")",";",["T_WHITESPACE","\n        ",1321],["T_VARIABLE","$request",1322],["T_OBJECT_OPERATOR","->",1322],["T_STRING","setDestCountryId",1322],"(",["T_VARIABLE","$request",1322],["T_OBJECT_OPERATOR","->",1322],["T_STRING","getRecipientAddressCountryCode",1322],"(",")",")",";",["T_WHITESPACE","\n        ",1322],["T_VARIABLE","$request",1323],["T_OBJECT_OPERATOR","->",1323],["T_STRING","setDestRegionCode",1323],"(",["T_VARIABLE","$request",1323],["T_OBJECT_OPERATOR","->",1323],["T_STRING","getRecipientAddressStateOrProvinceCode",1323],"(",")",")",";",["T_WHITESPACE","\n        ",1323],["T_VARIABLE","$request",1324],["T_OBJECT_OPERATOR","->",1324],["T_STRING","setDestCity",1324],"(",["T_VARIABLE","$request",1324],["T_OBJECT_OPERATOR","->",1324],["T_STRING","getRecipientAddressCity",1324],"(",")",")",";",["T_WHITESPACE","\n        ",1324],["T_VARIABLE","$request",1325],["T_OBJECT_OPERATOR","->",1325],["T_STRING","setDestStreet",1325],"(",["T_VARIABLE","$request",1325],["T_OBJECT_OPERATOR","->",1325],["T_STRING","getRecipientAddressStreet1",1325],"(",")",")",";",["T_WHITESPACE","\n        ",1325],["T_VARIABLE","$request",1326],["T_OBJECT_OPERATOR","->",1326],["T_STRING","setDestStreetLine2",1326],"(",["T_VARIABLE","$request",1326],["T_OBJECT_OPERATOR","->",1326],["T_STRING","getRecipientAddressStreet2",1326],"(",")",")",";",["T_WHITESPACE","\n\n        ",1326],["T_VARIABLE","$request",1328],["T_OBJECT_OPERATOR","->",1328],["T_STRING","setLimitMethod",1328],"(",["T_VARIABLE","$request",1328],["T_OBJECT_OPERATOR","->",1328],["T_STRING","getShippingMethod",1328],"(",")",")",";",["T_WHITESPACE","\n        ",1328],["T_VARIABLE","$request",1329],["T_OBJECT_OPERATOR","->",1329],["T_STRING","setPackageValue",1329],"(",["T_VARIABLE","$customsValue",1329],")",";",["T_WHITESPACE","\n        ",1329],["T_VARIABLE","$request",1330],["T_OBJECT_OPERATOR","->",1330],["T_STRING","setValueWithDiscount",1330],"(",["T_VARIABLE","$customsValue",1330],")",";",["T_WHITESPACE","\n        ",1330],["T_VARIABLE","$request",1331],["T_OBJECT_OPERATOR","->",1331],["T_STRING","setPackageCustomsValue",1331],"(",["T_VARIABLE","$customsValue",1331],")",";",["T_WHITESPACE","\n        ",1331],["T_VARIABLE","$request",1332],["T_OBJECT_OPERATOR","->",1332],["T_STRING","setFreeMethodWeight",1332],"(",["T_LNUMBER","0",1332],")",";",["T_WHITESPACE","\n        ",1332],["T_VARIABLE","$request",1333],["T_OBJECT_OPERATOR","->",1333],["T_STRING","setDhlShipmentType",1333],"(",["T_VARIABLE","$request",1333],["T_OBJECT_OPERATOR","->",1333],["T_STRING","getPackagingType",1333],"(",")",")",";",["T_WHITESPACE","\n\n        ",1333],["T_VARIABLE","$request",1335],["T_OBJECT_OPERATOR","->",1335],["T_STRING","setBaseSubtotalInclTax",1335],"(",["T_VARIABLE","$request",1335],["T_OBJECT_OPERATOR","->",1335],["T_STRING","getBaseSubtotalInclTax",1335],"(",")",")",";",["T_WHITESPACE","\n    ",1335],"}",["T_WHITESPACE","\n\n    ",1336],["T_DOC_COMMENT","\/**\n     * Do shipment request to carrier web service, obtain Print Shipping Labels and process errors in response\n     *\n     * @param Varien_Object $request\n     * @return Varien_Object\n     *\/",1338],["T_WHITESPACE","\n    ",1343],["T_PROTECTED","protected",1344],["T_WHITESPACE"," ",1344],["T_FUNCTION","function",1344],["T_WHITESPACE"," ",1344],["T_STRING","_doShipmentRequest",1344],"(",["T_STRING","Varien_Object",1344],["T_WHITESPACE"," ",1344],["T_VARIABLE","$request",1344],")",["T_WHITESPACE","\n    ",1344],"{",["T_WHITESPACE","\n        ",1345],["T_VARIABLE","$this",1346],["T_OBJECT_OPERATOR","->",1346],["T_STRING","_prepareShipmentRequest",1346],"(",["T_VARIABLE","$request",1346],")",";",["T_WHITESPACE","\n        ",1346],["T_VARIABLE","$request",1347],["T_OBJECT_OPERATOR","->",1347],["T_STRING","setAction",1347],"(",["T_CONSTANT_ENCAPSED_STRING","'GenerateLabel'",1347],")",";",["T_WHITESPACE","\n        ",1347],["T_VARIABLE","$this",1348],["T_OBJECT_OPERATOR","->",1348],["T_STRING","_mapRequestToShipment",1348],"(",["T_VARIABLE","$request",1348],")",";",["T_WHITESPACE","\n        ",1348],["T_VARIABLE","$this",1349],["T_OBJECT_OPERATOR","->",1349],["T_STRING","setRequest",1349],"(",["T_VARIABLE","$request",1349],")",";",["T_WHITESPACE","\n\n        ",1349],["T_RETURN","return",1351],["T_WHITESPACE"," ",1351],["T_VARIABLE","$this",1351],["T_OBJECT_OPERATOR","->",1351],["T_STRING","_doRequest",1351],"(",")",";",["T_WHITESPACE","\n    ",1351],"}",["T_WHITESPACE","\n\n    ",1352],["T_DOC_COMMENT","\/**\n     * Return container types of carrier\n     *\n     * @param Varien_Object|null $params\n     * @return array|bool\n     *\/",1354],["T_WHITESPACE","\n    ",1359],["T_PUBLIC","public",1360],["T_WHITESPACE"," ",1360],["T_FUNCTION","function",1360],["T_WHITESPACE"," ",1360],["T_STRING","getContainerTypes",1360],"(",["T_STRING","Varien_Object",1360],["T_WHITESPACE"," ",1360],["T_VARIABLE","$params",1360],["T_WHITESPACE"," ",1360],"=",["T_WHITESPACE"," ",1360],["T_STRING","null",1360],")",["T_WHITESPACE","\n    ",1360],"{",["T_WHITESPACE","\n        ",1361],["T_RETURN","return",1362],["T_WHITESPACE"," ",1362],["T_VARIABLE","$this",1362],["T_OBJECT_OPERATOR","->",1362],["T_STRING","getCode",1362],"(",["T_CONSTANT_ENCAPSED_STRING","'shipment_type'",1362],")",";",["T_WHITESPACE","\n    ",1362],"}",["T_WHITESPACE","\n",1363],"}",["T_WHITESPACE","\n",1364]]
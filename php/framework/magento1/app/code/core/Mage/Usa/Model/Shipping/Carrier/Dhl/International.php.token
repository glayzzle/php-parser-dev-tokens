[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Magento\n *\n * NOTICE OF LICENSE\n *\n * This source file is subject to the Open Software License (OSL 3.0)\n * that is bundled with this package in the file LICENSE.txt.\n * It is also available through the world-wide-web at this URL:\n * http:\/\/opensource.org\/licenses\/osl-3.0.php\n * If you did not receive a copy of the license and are unable to\n * obtain it through the world-wide-web, please send an email\n * to license@magento.com so we can send you a copy immediately.\n *\n * DISCLAIMER\n *\n * Do not edit or add to this file if you wish to upgrade Magento to newer\n * versions in the future. If you wish to customize Magento for your\n * needs please refer to http:\/\/www.magento.com for more information.\n *\n * @category    Mage\n * @package     Mage_Usa\n * @copyright  Copyright (c) 2006-2016 X.commerce, Inc. and affiliates (http:\/\/www.magento.com)\n * @license    http:\/\/opensource.org\/licenses\/osl-3.0.php  Open Software License (OSL 3.0)\n *\/",2],["T_WHITESPACE","\n\n",25],["T_DOC_COMMENT","\/**\n * DHL International (API v1.4)\n *\n * @category Mage\n * @package  Mage_Usa\n * @author   Magento Core Team <core@magentocommerce.com>\n *\/",27],["T_WHITESPACE","\n",33],["T_CLASS","class",34],["T_WHITESPACE"," ",34],["T_STRING","Mage_Usa_Model_Shipping_Carrier_Dhl_International",34],["T_WHITESPACE","\n    ",34],["T_EXTENDS","extends",35],["T_WHITESPACE"," ",35],["T_STRING","Mage_Usa_Model_Shipping_Carrier_Dhl_Abstract",35],["T_WHITESPACE","\n    ",35],["T_IMPLEMENTS","implements",36],["T_WHITESPACE"," ",36],["T_STRING","Mage_Shipping_Model_Carrier_Interface",36],["T_WHITESPACE","\n",36],"{",["T_WHITESPACE","\n    ",37],["T_DOC_COMMENT","\/**\n     * Carrier Product indicator\n     *\/",38],["T_WHITESPACE","\n    ",40],["T_CONST","const",41],["T_WHITESPACE"," ",41],["T_STRING","DHL_CONTENT_TYPE_DOC",41],["T_WHITESPACE","        ",41],"=",["T_WHITESPACE"," ",41],["T_CONSTANT_ENCAPSED_STRING","'D'",41],";",["T_WHITESPACE","\n    ",41],["T_CONST","const",42],["T_WHITESPACE"," ",42],["T_STRING","DHL_CONTENT_TYPE_NON_DOC",42],["T_WHITESPACE","    ",42],"=",["T_WHITESPACE"," ",42],["T_CONSTANT_ENCAPSED_STRING","'N'",42],";",["T_WHITESPACE","\n\n    ",42],["T_DOC_COMMENT","\/**\n     * Minimum allowed values for shipping package dimensions\n     *\/",44],["T_WHITESPACE","\n    ",46],["T_CONST","const",47],["T_WHITESPACE"," ",47],["T_STRING","DIMENSION_MIN_CM",47],["T_WHITESPACE"," ",47],"=",["T_WHITESPACE"," ",47],["T_LNUMBER","3",47],";",["T_WHITESPACE","\n    ",47],["T_CONST","const",48],["T_WHITESPACE"," ",48],["T_STRING","DIMENSION_MIN_IN",48],["T_WHITESPACE"," ",48],"=",["T_WHITESPACE"," ",48],["T_LNUMBER","1",48],";",["T_WHITESPACE","\n\n    ",48],["T_DOC_COMMENT","\/**\n     * Container types that could be customized\n     *\n     * @var array\n     *\/",50],["T_WHITESPACE","\n    ",54],["T_PROTECTED","protected",55],["T_WHITESPACE"," ",55],["T_VARIABLE","$_customizableContainerTypes",55],["T_WHITESPACE"," ",55],"=",["T_WHITESPACE"," ",55],["T_ARRAY","array",55],"(",["T_STRING","self",55],["T_DOUBLE_COLON","::",55],["T_STRING","DHL_CONTENT_TYPE_NON_DOC",55],")",";",["T_WHITESPACE","\n\n    ",55],["T_DOC_COMMENT","\/**\n     * Code of the carrier\n     *\/",57],["T_WHITESPACE","\n    ",59],["T_CONST","const",60],["T_WHITESPACE"," ",60],["T_STRING","CODE",60],["T_WHITESPACE"," ",60],"=",["T_WHITESPACE"," ",60],["T_CONSTANT_ENCAPSED_STRING","'dhlint'",60],";",["T_WHITESPACE","\n\n    ",60],["T_DOC_COMMENT","\/**\n     * Rate request data\n     *\n     * @var Mage_Shipping_Model_Rate_Request|null\n     *\/",62],["T_WHITESPACE","\n    ",66],["T_PROTECTED","protected",67],["T_WHITESPACE"," ",67],["T_VARIABLE","$_request",67],["T_WHITESPACE"," ",67],"=",["T_WHITESPACE"," ",67],["T_STRING","null",67],";",["T_WHITESPACE","\n\n    ",67],["T_DOC_COMMENT","\/**\n     * Raw rate request data\n     *\n     * @var Varien_Object|null\n     *\/",69],["T_WHITESPACE","\n    ",73],["T_PROTECTED","protected",74],["T_WHITESPACE"," ",74],["T_VARIABLE","$_rawRequest",74],["T_WHITESPACE"," ",74],"=",["T_WHITESPACE"," ",74],["T_STRING","null",74],";",["T_WHITESPACE","\n\n    ",74],["T_DOC_COMMENT","\/**\n     * Rate result data\n     *\n     * @var Mage_Shipping_Model_Rate_Result|null\n     *\/",76],["T_WHITESPACE","\n    ",80],["T_PROTECTED","protected",81],["T_WHITESPACE"," ",81],["T_VARIABLE","$_result",81],["T_WHITESPACE"," ",81],"=",["T_WHITESPACE"," ",81],["T_STRING","null",81],";",["T_WHITESPACE","\n\n    ",81],["T_DOC_COMMENT","\/**\n     * Countries parameters data\n     *\n     * @var SimpleXMLElement|null\n     *\/",83],["T_WHITESPACE","\n    ",87],["T_PROTECTED","protected",88],["T_WHITESPACE"," ",88],["T_VARIABLE","$_countryParams",88],["T_WHITESPACE"," ",88],"=",["T_WHITESPACE"," ",88],["T_STRING","null",88],";",["T_WHITESPACE","\n\n    ",88],["T_DOC_COMMENT","\/**\n     * Errors placeholder\n     *\n     * @var array\n     *\/",90],["T_WHITESPACE","\n    ",94],["T_PROTECTED","protected",95],["T_WHITESPACE"," ",95],["T_VARIABLE","$_errors",95],["T_WHITESPACE"," ",95],"=",["T_WHITESPACE"," ",95],["T_ARRAY","array",95],"(",")",";",["T_WHITESPACE","\n\n    ",95],["T_DOC_COMMENT","\/**\n     * Dhl rates result\n     *\n     * @var array\n     *\/",97],["T_WHITESPACE","\n    ",101],["T_PROTECTED","protected",102],["T_WHITESPACE"," ",102],["T_VARIABLE","$_rates",102],["T_WHITESPACE"," ",102],"=",["T_WHITESPACE"," ",102],["T_ARRAY","array",102],"(",")",";",["T_WHITESPACE","\n\n    ",102],["T_DOC_COMMENT","\/**\n     * Carrier's code\n     *\n     * @var string\n     *\/",104],["T_WHITESPACE","\n    ",108],["T_PROTECTED","protected",109],["T_WHITESPACE"," ",109],["T_VARIABLE","$_code",109],["T_WHITESPACE"," ",109],"=",["T_WHITESPACE"," ",109],["T_STRING","self",109],["T_DOUBLE_COLON","::",109],["T_STRING","CODE",109],";",["T_WHITESPACE","\n\n    ",109],["T_DOC_COMMENT","\/**\n     * Free Method config path\n     *\n     * @var string\n     *\/",111],["T_WHITESPACE","\n    ",115],["T_PROTECTED","protected",116],["T_WHITESPACE"," ",116],["T_VARIABLE","$_freeMethod",116],["T_WHITESPACE"," ",116],"=",["T_WHITESPACE"," ",116],["T_CONSTANT_ENCAPSED_STRING","'free_method_nondoc'",116],";",["T_WHITESPACE","\n\n    ",116],["T_DOC_COMMENT","\/**\n     * Max weight without fee\n     *\n     * @var int\n     *\/",118],["T_WHITESPACE","\n    ",122],["T_PROTECTED","protected",123],["T_WHITESPACE"," ",123],["T_VARIABLE","$_maxWeight",123],["T_WHITESPACE"," ",123],"=",["T_WHITESPACE"," ",123],["T_LNUMBER","70",123],";",["T_WHITESPACE","\n\n    ",123],["T_DOC_COMMENT","\/**\n     * Flag if response is for shipping label creating\n     *\n     * @var bool\n     *\/",125],["T_WHITESPACE","\n    ",129],["T_PROTECTED","protected",130],["T_WHITESPACE"," ",130],["T_VARIABLE","$_isShippingLabelFlag",130],["T_WHITESPACE"," ",130],"=",["T_WHITESPACE"," ",130],["T_STRING","false",130],";",["T_WHITESPACE","\n\n    ",130],["T_DOC_COMMENT","\/**\n     * Request variables array\n     *\n     * @var array\n     *\/",132],["T_WHITESPACE","\n    ",136],["T_PROTECTED","protected",137],["T_WHITESPACE"," ",137],["T_VARIABLE","$_requestVariables",137],["T_WHITESPACE"," ",137],"=",["T_WHITESPACE"," ",137],["T_ARRAY","array",137],"(",["T_WHITESPACE","\n        ",137],["T_CONSTANT_ENCAPSED_STRING","'id'",138],["T_WHITESPACE","                ",138],["T_DOUBLE_ARROW","=>",138],["T_WHITESPACE"," ",138],["T_ARRAY","array",138],"(",["T_CONSTANT_ENCAPSED_STRING","'code'",138],["T_WHITESPACE"," ",138],["T_DOUBLE_ARROW","=>",138],["T_WHITESPACE"," ",138],["T_CONSTANT_ENCAPSED_STRING","'dhl_id'",138],",",["T_WHITESPACE","                ",138],["T_CONSTANT_ENCAPSED_STRING","'setCode'",138],["T_WHITESPACE"," ",138],["T_DOUBLE_ARROW","=>",138],["T_WHITESPACE"," ",138],["T_CONSTANT_ENCAPSED_STRING","'id'",138],")",",",["T_WHITESPACE","\n        ",138],["T_CONSTANT_ENCAPSED_STRING","'password'",139],["T_WHITESPACE","          ",139],["T_DOUBLE_ARROW","=>",139],["T_WHITESPACE"," ",139],["T_ARRAY","array",139],"(",["T_CONSTANT_ENCAPSED_STRING","'code'",139],["T_WHITESPACE"," ",139],["T_DOUBLE_ARROW","=>",139],["T_WHITESPACE"," ",139],["T_CONSTANT_ENCAPSED_STRING","'dhl_password'",139],",",["T_WHITESPACE","          ",139],["T_CONSTANT_ENCAPSED_STRING","'setCode'",139],["T_WHITESPACE"," ",139],["T_DOUBLE_ARROW","=>",139],["T_WHITESPACE"," ",139],["T_CONSTANT_ENCAPSED_STRING","'password'",139],")",",",["T_WHITESPACE","\n        ",139],["T_CONSTANT_ENCAPSED_STRING","'account'",140],["T_WHITESPACE","           ",140],["T_DOUBLE_ARROW","=>",140],["T_WHITESPACE"," ",140],["T_ARRAY","array",140],"(",["T_CONSTANT_ENCAPSED_STRING","'code'",140],["T_WHITESPACE"," ",140],["T_DOUBLE_ARROW","=>",140],["T_WHITESPACE"," ",140],["T_CONSTANT_ENCAPSED_STRING","'dhl_account'",140],",",["T_WHITESPACE","           ",140],["T_CONSTANT_ENCAPSED_STRING","'setCode'",140],["T_WHITESPACE"," ",140],["T_DOUBLE_ARROW","=>",140],["T_WHITESPACE"," ",140],["T_CONSTANT_ENCAPSED_STRING","'account_nbr'",140],")",",",["T_WHITESPACE","\n        ",140],["T_CONSTANT_ENCAPSED_STRING","'shipping_key'",141],["T_WHITESPACE","      ",141],["T_DOUBLE_ARROW","=>",141],["T_WHITESPACE"," ",141],["T_ARRAY","array",141],"(",["T_CONSTANT_ENCAPSED_STRING","'code'",141],["T_WHITESPACE"," ",141],["T_DOUBLE_ARROW","=>",141],["T_WHITESPACE"," ",141],["T_CONSTANT_ENCAPSED_STRING","'dhl_shipping_key'",141],",",["T_WHITESPACE","      ",141],["T_CONSTANT_ENCAPSED_STRING","'setCode'",141],["T_WHITESPACE"," ",141],["T_DOUBLE_ARROW","=>",141],["T_WHITESPACE"," ",141],["T_CONSTANT_ENCAPSED_STRING","'shipping_key'",141],")",",",["T_WHITESPACE","\n        ",141],["T_CONSTANT_ENCAPSED_STRING","'shipping_intlkey'",142],["T_WHITESPACE","  ",142],["T_DOUBLE_ARROW","=>",142],["T_WHITESPACE"," ",142],["T_ARRAY","array",142],"(",["T_CONSTANT_ENCAPSED_STRING","'code'",142],["T_WHITESPACE"," ",142],["T_DOUBLE_ARROW","=>",142],["T_WHITESPACE"," ",142],["T_CONSTANT_ENCAPSED_STRING","'dhl_shipping_intl_key'",142],",",["T_WHITESPACE"," ",142],["T_CONSTANT_ENCAPSED_STRING","'setCode'",142],["T_WHITESPACE"," ",142],["T_DOUBLE_ARROW","=>",142],["T_WHITESPACE"," ",142],["T_CONSTANT_ENCAPSED_STRING","'shipping_intl_key'",142],")",",",["T_WHITESPACE","\n        ",142],["T_CONSTANT_ENCAPSED_STRING","'shipment_type'",143],["T_WHITESPACE","     ",143],["T_DOUBLE_ARROW","=>",143],["T_WHITESPACE"," ",143],["T_ARRAY","array",143],"(",["T_CONSTANT_ENCAPSED_STRING","'code'",143],["T_WHITESPACE"," ",143],["T_DOUBLE_ARROW","=>",143],["T_WHITESPACE"," ",143],["T_CONSTANT_ENCAPSED_STRING","'dhl_shipment_type'",143],",",["T_WHITESPACE","     ",143],["T_CONSTANT_ENCAPSED_STRING","'setCode'",143],["T_WHITESPACE"," ",143],["T_DOUBLE_ARROW","=>",143],["T_WHITESPACE"," ",143],["T_CONSTANT_ENCAPSED_STRING","'shipment_type'",143],")",",",["T_WHITESPACE","\n        ",143],["T_CONSTANT_ENCAPSED_STRING","'dutiable'",144],["T_WHITESPACE","          ",144],["T_DOUBLE_ARROW","=>",144],["T_WHITESPACE"," ",144],["T_ARRAY","array",144],"(",["T_CONSTANT_ENCAPSED_STRING","'code'",144],["T_WHITESPACE"," ",144],["T_DOUBLE_ARROW","=>",144],["T_WHITESPACE"," ",144],["T_CONSTANT_ENCAPSED_STRING","'dhl_dutiable'",144],",",["T_WHITESPACE","          ",144],["T_CONSTANT_ENCAPSED_STRING","'setCode'",144],["T_WHITESPACE"," ",144],["T_DOUBLE_ARROW","=>",144],["T_WHITESPACE"," ",144],["T_CONSTANT_ENCAPSED_STRING","'dutiable'",144],")",",",["T_WHITESPACE","\n        ",144],["T_CONSTANT_ENCAPSED_STRING","'dutypaymenttype'",145],["T_WHITESPACE","   ",145],["T_DOUBLE_ARROW","=>",145],["T_WHITESPACE"," ",145],["T_ARRAY","array",145],"(",["T_CONSTANT_ENCAPSED_STRING","'code'",145],["T_WHITESPACE"," ",145],["T_DOUBLE_ARROW","=>",145],["T_WHITESPACE"," ",145],["T_CONSTANT_ENCAPSED_STRING","'dhl_duty_payment_type'",145],",",["T_WHITESPACE"," ",145],["T_CONSTANT_ENCAPSED_STRING","'setCode'",145],["T_WHITESPACE"," ",145],["T_DOUBLE_ARROW","=>",145],["T_WHITESPACE"," ",145],["T_CONSTANT_ENCAPSED_STRING","'duty_payment_type'",145],")",",",["T_WHITESPACE","\n        ",145],["T_CONSTANT_ENCAPSED_STRING","'contentdesc'",146],["T_WHITESPACE","       ",146],["T_DOUBLE_ARROW","=>",146],["T_WHITESPACE"," ",146],["T_ARRAY","array",146],"(",["T_CONSTANT_ENCAPSED_STRING","'code'",146],["T_WHITESPACE"," ",146],["T_DOUBLE_ARROW","=>",146],["T_WHITESPACE"," ",146],["T_CONSTANT_ENCAPSED_STRING","'dhl_content_desc'",146],",",["T_WHITESPACE","      ",146],["T_CONSTANT_ENCAPSED_STRING","'setCode'",146],["T_WHITESPACE"," ",146],["T_DOUBLE_ARROW","=>",146],["T_WHITESPACE"," ",146],["T_CONSTANT_ENCAPSED_STRING","'content_desc'",146],")",["T_WHITESPACE","\n    ",146],")",";",["T_WHITESPACE","\n\n    ",147],["T_DOC_COMMENT","\/**\n     * Flag that shows if shipping is domestic\n     *\n     * @var bool\n     *\/",149],["T_WHITESPACE","\n    ",153],["T_PROTECTED","protected",154],["T_WHITESPACE"," ",154],["T_VARIABLE","$_isDomestic",154],["T_WHITESPACE"," ",154],"=",["T_WHITESPACE"," ",154],["T_STRING","false",154],";",["T_WHITESPACE","\n\n    ",154],["T_DOC_COMMENT","\/**\n     * Dhl International Class constructor\n     *\n     * Sets necessary data\n     *\/",156],["T_WHITESPACE","\n    ",160],["T_PROTECTED","protected",161],["T_WHITESPACE"," ",161],["T_FUNCTION","function",161],["T_WHITESPACE"," ",161],["T_STRING","_construct",161],"(",")",["T_WHITESPACE","\n    ",161],"{",["T_WHITESPACE","\n        ",162],["T_IF","if",163],["T_WHITESPACE"," ",163],"(",["T_VARIABLE","$this",163],["T_OBJECT_OPERATOR","->",163],["T_STRING","getConfigData",163],"(",["T_CONSTANT_ENCAPSED_STRING","'content_type'",163],")",["T_WHITESPACE"," ",163],["T_IS_EQUAL","==",163],["T_WHITESPACE"," ",163],["T_STRING","self",163],["T_DOUBLE_COLON","::",163],["T_STRING","DHL_CONTENT_TYPE_DOC",163],")",["T_WHITESPACE"," ",163],"{",["T_WHITESPACE","\n            ",163],["T_VARIABLE","$this",164],["T_OBJECT_OPERATOR","->",164],["T_STRING","_freeMethod",164],["T_WHITESPACE"," ",164],"=",["T_WHITESPACE"," ",164],["T_CONSTANT_ENCAPSED_STRING","'free_method_doc'",164],";",["T_WHITESPACE","\n        ",164],"}",["T_WHITESPACE","\n    ",165],"}",["T_WHITESPACE","\n\n    ",166],["T_DOC_COMMENT","\/**\n     * Returns value of given variable\n     *\n     * @param mixed $origValue\n     * @param string $pathToValue\n     * @return mixed\n     *\/",168],["T_WHITESPACE","\n    ",174],["T_PROTECTED","protected",175],["T_WHITESPACE"," ",175],["T_FUNCTION","function",175],["T_WHITESPACE"," ",175],["T_STRING","_getDefaultValue",175],"(",["T_VARIABLE","$origValue",175],",",["T_WHITESPACE"," ",175],["T_VARIABLE","$pathToValue",175],")",["T_WHITESPACE","\n    ",175],"{",["T_WHITESPACE","\n        ",176],["T_IF","if",177],["T_WHITESPACE"," ",177],"(","!",["T_VARIABLE","$origValue",177],")",["T_WHITESPACE"," ",177],"{",["T_WHITESPACE","\n            ",177],["T_VARIABLE","$origValue",178],["T_WHITESPACE"," ",178],"=",["T_WHITESPACE"," ",178],["T_STRING","Mage",178],["T_DOUBLE_COLON","::",178],["T_STRING","getStoreConfig",178],"(",["T_WHITESPACE","\n                ",178],["T_VARIABLE","$pathToValue",179],",",["T_WHITESPACE","\n                ",179],["T_VARIABLE","$this",180],["T_OBJECT_OPERATOR","->",180],["T_STRING","getStore",180],"(",")",["T_WHITESPACE","\n            ",180],")",";",["T_WHITESPACE","\n        ",181],"}",["T_WHITESPACE","\n\n        ",182],["T_RETURN","return",184],["T_WHITESPACE"," ",184],["T_VARIABLE","$origValue",184],";",["T_WHITESPACE","\n    ",184],"}",["T_WHITESPACE","\n\n    ",185],["T_DOC_COMMENT","\/**\n     * Collect and get rates\n     *\n     * @param Mage_Shipping_Model_Rate_Request $request\n     * @return bool|Mage_Shipping_Model_Rate_Result|null\n     *\/",187],["T_WHITESPACE","\n    ",192],["T_PUBLIC","public",193],["T_WHITESPACE"," ",193],["T_FUNCTION","function",193],["T_WHITESPACE"," ",193],["T_STRING","collectRates",193],"(",["T_STRING","Mage_Shipping_Model_Rate_Request",193],["T_WHITESPACE"," ",193],["T_VARIABLE","$request",193],")",["T_WHITESPACE","\n    ",193],"{",["T_WHITESPACE","\n        ",194],["T_IF","if",195],["T_WHITESPACE"," ",195],"(","!",["T_VARIABLE","$this",195],["T_OBJECT_OPERATOR","->",195],["T_STRING","getConfigFlag",195],"(",["T_VARIABLE","$this",195],["T_OBJECT_OPERATOR","->",195],["T_STRING","_activeFlag",195],")",")",["T_WHITESPACE"," ",195],"{",["T_WHITESPACE","\n            ",195],["T_RETURN","return",196],["T_WHITESPACE"," ",196],["T_STRING","false",196],";",["T_WHITESPACE","\n        ",196],"}",["T_WHITESPACE","\n\n        ",197],["T_VARIABLE","$requestDhl",199],["T_WHITESPACE","     ",199],"=",["T_WHITESPACE"," ",199],["T_CLONE","clone",199],["T_WHITESPACE"," ",199],["T_VARIABLE","$request",199],";",["T_WHITESPACE","\n        ",199],["T_VARIABLE","$this",200],["T_OBJECT_OPERATOR","->",200],["T_STRING","setStore",200],"(",["T_VARIABLE","$requestDhl",200],["T_OBJECT_OPERATOR","->",200],["T_STRING","getStoreId",200],"(",")",")",";",["T_WHITESPACE","\n\n        ",200],["T_VARIABLE","$origCompanyName",202],["T_WHITESPACE"," ",202],"=",["T_WHITESPACE"," ",202],["T_VARIABLE","$this",202],["T_OBJECT_OPERATOR","->",202],["T_STRING","_getDefaultValue",202],"(",["T_WHITESPACE","\n            ",202],["T_VARIABLE","$requestDhl",203],["T_OBJECT_OPERATOR","->",203],["T_STRING","getOrigCompanyName",203],"(",")",",",["T_WHITESPACE","\n            ",203],["T_STRING","Mage_Core_Model_Store",204],["T_DOUBLE_COLON","::",204],["T_STRING","XML_PATH_STORE_STORE_NAME",204],["T_WHITESPACE","\n        ",204],")",";",["T_WHITESPACE","\n        ",205],["T_VARIABLE","$origCountryId",206],["T_WHITESPACE"," ",206],"=",["T_WHITESPACE"," ",206],["T_VARIABLE","$this",206],["T_OBJECT_OPERATOR","->",206],["T_STRING","_getDefaultValue",206],"(",["T_WHITESPACE","\n            ",206],["T_VARIABLE","$requestDhl",207],["T_OBJECT_OPERATOR","->",207],["T_STRING","getOrigCountryId",207],"(",")",",",["T_WHITESPACE","\n            ",207],["T_STRING","Mage_Shipping_Model_Shipping",208],["T_DOUBLE_COLON","::",208],["T_STRING","XML_PATH_STORE_COUNTRY_ID",208],["T_WHITESPACE","\n        ",208],")",";",["T_WHITESPACE","\n        ",209],["T_VARIABLE","$origState",210],["T_WHITESPACE"," ",210],"=",["T_WHITESPACE"," ",210],["T_VARIABLE","$this",210],["T_OBJECT_OPERATOR","->",210],["T_STRING","_getDefaultValue",210],"(",["T_WHITESPACE","\n            ",210],["T_VARIABLE","$requestDhl",211],["T_OBJECT_OPERATOR","->",211],["T_STRING","getOrigState",211],"(",")",",",["T_WHITESPACE","\n            ",211],["T_STRING","Mage_Shipping_Model_Shipping",212],["T_DOUBLE_COLON","::",212],["T_STRING","XML_PATH_STORE_REGION_ID",212],["T_WHITESPACE","\n        ",212],")",";",["T_WHITESPACE","\n        ",213],["T_VARIABLE","$origCity",214],["T_WHITESPACE"," ",214],"=",["T_WHITESPACE"," ",214],["T_VARIABLE","$this",214],["T_OBJECT_OPERATOR","->",214],["T_STRING","_getDefaultValue",214],"(",["T_WHITESPACE","\n            ",214],["T_VARIABLE","$requestDhl",215],["T_OBJECT_OPERATOR","->",215],["T_STRING","getOrigCity",215],"(",")",",",["T_WHITESPACE","\n            ",215],["T_STRING","Mage_Shipping_Model_Shipping",216],["T_DOUBLE_COLON","::",216],["T_STRING","XML_PATH_STORE_CITY",216],["T_WHITESPACE","\n        ",216],")",";",["T_WHITESPACE","\n        ",217],["T_VARIABLE","$origPostcode",218],["T_WHITESPACE"," ",218],"=",["T_WHITESPACE"," ",218],["T_VARIABLE","$this",218],["T_OBJECT_OPERATOR","->",218],["T_STRING","_getDefaultValue",218],"(",["T_WHITESPACE","\n            ",218],["T_VARIABLE","$requestDhl",219],["T_OBJECT_OPERATOR","->",219],["T_STRING","getOrigPostcode",219],"(",")",",",["T_WHITESPACE","\n            ",219],["T_STRING","Mage_Shipping_Model_Shipping",220],["T_DOUBLE_COLON","::",220],["T_STRING","XML_PATH_STORE_ZIP",220],["T_WHITESPACE","\n        ",220],")",";",["T_WHITESPACE","\n\n        ",221],["T_VARIABLE","$requestDhl",223],["T_OBJECT_OPERATOR","->",223],["T_STRING","setOrigCompanyName",223],"(",["T_VARIABLE","$origCompanyName",223],")",["T_WHITESPACE","\n            ",223],["T_OBJECT_OPERATOR","->",224],["T_STRING","setCountryId",224],"(",["T_VARIABLE","$origCountryId",224],")",["T_WHITESPACE","\n            ",224],["T_OBJECT_OPERATOR","->",225],["T_STRING","setOrigState",225],"(",["T_VARIABLE","$origState",225],")",["T_WHITESPACE","\n            ",225],["T_OBJECT_OPERATOR","->",226],["T_STRING","setOrigCity",226],"(",["T_VARIABLE","$origCity",226],")",["T_WHITESPACE","\n            ",226],["T_OBJECT_OPERATOR","->",227],["T_STRING","setOrigPostal",227],"(",["T_VARIABLE","$origPostcode",227],")",";",["T_WHITESPACE","\n        ",227],["T_VARIABLE","$this",228],["T_OBJECT_OPERATOR","->",228],["T_STRING","setRequest",228],"(",["T_VARIABLE","$requestDhl",228],")",";",["T_WHITESPACE","\n\n        ",228],["T_VARIABLE","$this",230],["T_OBJECT_OPERATOR","->",230],["T_STRING","_result",230],["T_WHITESPACE"," ",230],"=",["T_WHITESPACE"," ",230],["T_VARIABLE","$this",230],["T_OBJECT_OPERATOR","->",230],["T_STRING","_getQuotes",230],"(",")",";",["T_WHITESPACE","\n\n        ",230],["T_VARIABLE","$this",232],["T_OBJECT_OPERATOR","->",232],["T_STRING","_updateFreeMethodQuote",232],"(",["T_VARIABLE","$request",232],")",";",["T_WHITESPACE","\n\n        ",232],["T_RETURN","return",234],["T_WHITESPACE"," ",234],["T_VARIABLE","$this",234],["T_OBJECT_OPERATOR","->",234],["T_STRING","_result",234],";",["T_WHITESPACE","\n    ",234],"}",["T_WHITESPACE","\n\n    ",235],["T_DOC_COMMENT","\/**\n     * Set Free Method Request\n     *\n     * @param  string $freeMethod\n     * @return void\n     *\/",237],["T_WHITESPACE","\n    ",242],["T_PROTECTED","protected",243],["T_WHITESPACE"," ",243],["T_FUNCTION","function",243],["T_WHITESPACE"," ",243],["T_STRING","_setFreeMethodRequest",243],"(",["T_VARIABLE","$freeMethod",243],")",["T_WHITESPACE","\n    ",243],"{",["T_WHITESPACE","\n        ",244],["T_VARIABLE","$rawRequest",245],["T_WHITESPACE"," ",245],"=",["T_WHITESPACE"," ",245],["T_VARIABLE","$this",245],["T_OBJECT_OPERATOR","->",245],["T_STRING","_rawRequest",245],";",["T_WHITESPACE","\n\n        ",245],["T_VARIABLE","$rawRequest",247],["T_OBJECT_OPERATOR","->",247],["T_STRING","setFreeMethodRequest",247],"(",["T_STRING","true",247],")",";",["T_WHITESPACE","\n        ",247],["T_VARIABLE","$freeWeight",248],["T_WHITESPACE"," ",248],"=",["T_WHITESPACE"," ",248],["T_VARIABLE","$this",248],["T_OBJECT_OPERATOR","->",248],["T_STRING","getTotalNumOfBoxes",248],"(",["T_VARIABLE","$rawRequest",248],["T_OBJECT_OPERATOR","->",248],["T_STRING","getFreeMethodWeight",248],"(",")",")",";",["T_WHITESPACE","\n        ",248],["T_VARIABLE","$rawRequest",249],["T_OBJECT_OPERATOR","->",249],["T_STRING","setWeight",249],"(",["T_VARIABLE","$freeWeight",249],")",";",["T_WHITESPACE","\n        ",249],["T_VARIABLE","$rawRequest",250],["T_OBJECT_OPERATOR","->",250],["T_STRING","setService",250],"(",["T_VARIABLE","$freeMethod",250],")",";",["T_WHITESPACE","\n    ",250],"}",["T_WHITESPACE","\n\n    ",251],["T_DOC_COMMENT","\/**\n     * Returns request result\n     *\n     * @return Mage_Shipping_Model_Rate_Result|null\n     *\/",253],["T_WHITESPACE","\n    ",257],["T_PUBLIC","public",258],["T_WHITESPACE"," ",258],["T_FUNCTION","function",258],["T_WHITESPACE"," ",258],["T_STRING","getResult",258],"(",")",["T_WHITESPACE","\n    ",258],"{",["T_WHITESPACE","\n        ",259],["T_RETURN","return",260],["T_WHITESPACE"," ",260],["T_VARIABLE","$this",260],["T_OBJECT_OPERATOR","->",260],["T_STRING","_result",260],";",["T_WHITESPACE","\n    ",260],"}",["T_WHITESPACE","\n\n    ",261],["T_PROTECTED","protected",263],["T_WHITESPACE"," ",263],["T_FUNCTION","function",263],["T_WHITESPACE"," ",263],["T_STRING","_addParams",263],"(",["T_VARIABLE","$requestObject",263],")",["T_WHITESPACE","\n    ",263],"{",["T_WHITESPACE","\n        ",264],["T_VARIABLE","$request",265],["T_WHITESPACE"," ",265],"=",["T_WHITESPACE"," ",265],["T_VARIABLE","$this",265],["T_OBJECT_OPERATOR","->",265],["T_STRING","_request",265],";",["T_WHITESPACE","\n        ",265],["T_FOREACH","foreach",266],["T_WHITESPACE"," ",266],"(",["T_VARIABLE","$this",266],["T_OBJECT_OPERATOR","->",266],["T_STRING","_requestVariables",266],["T_WHITESPACE"," ",266],["T_AS","as",266],["T_WHITESPACE"," ",266],["T_VARIABLE","$code",266],["T_WHITESPACE"," ",266],["T_DOUBLE_ARROW","=>",266],["T_WHITESPACE"," ",266],["T_VARIABLE","$objectCode",266],")",["T_WHITESPACE"," ",266],"{",["T_WHITESPACE","\n            ",266],["T_IF","if",267],["T_WHITESPACE"," ",267],"(",["T_VARIABLE","$request",267],["T_OBJECT_OPERATOR","->",267],["T_STRING","getDhlId",267],"(",")",")",["T_WHITESPACE"," ",267],"{",["T_WHITESPACE","\n                ",267],["T_VARIABLE","$value",268],["T_WHITESPACE"," ",268],"=",["T_WHITESPACE"," ",268],["T_VARIABLE","$request",268],["T_OBJECT_OPERATOR","->",268],["T_STRING","getData",268],"(",["T_VARIABLE","$objectCode",268],"[",["T_CONSTANT_ENCAPSED_STRING","'code'",268],"]",")",";",["T_WHITESPACE","\n            ",268],"}",["T_WHITESPACE"," ",269],["T_ELSE","else",269],["T_WHITESPACE"," ",269],"{",["T_WHITESPACE","\n                ",269],["T_VARIABLE","$value",270],["T_WHITESPACE"," ",270],"=",["T_WHITESPACE"," ",270],["T_VARIABLE","$this",270],["T_OBJECT_OPERATOR","->",270],["T_STRING","getConfigData",270],"(",["T_VARIABLE","$code",270],")",";",["T_WHITESPACE","\n            ",270],"}",["T_WHITESPACE","\n            ",271],["T_VARIABLE","$requestObject",272],["T_OBJECT_OPERATOR","->",272],["T_STRING","setData",272],"(",["T_VARIABLE","$objectCode",272],"[",["T_CONSTANT_ENCAPSED_STRING","'setCode'",272],"]",",",["T_WHITESPACE"," ",272],["T_VARIABLE","$value",272],")",";",["T_WHITESPACE","\n        ",272],"}",["T_WHITESPACE","\n        ",273],["T_RETURN","return",274],["T_WHITESPACE"," ",274],["T_VARIABLE","$requestObject",274],";",["T_WHITESPACE","\n    ",274],"}",["T_WHITESPACE","\n\n    ",275],["T_DOC_COMMENT","\/**\n     * Prepare and set request in property of current instance\n     *\n     * @param Varien_Object $request\n     * @return Mage_Usa_Model_Shipping_Carrier_Dhl\n     *\/",277],["T_WHITESPACE","\n    ",282],["T_PUBLIC","public",283],["T_WHITESPACE"," ",283],["T_FUNCTION","function",283],["T_WHITESPACE"," ",283],["T_STRING","setRequest",283],"(",["T_STRING","Varien_Object",283],["T_WHITESPACE"," ",283],["T_VARIABLE","$request",283],")",["T_WHITESPACE","\n    ",283],"{",["T_WHITESPACE","\n        ",284],["T_VARIABLE","$this",285],["T_OBJECT_OPERATOR","->",285],["T_STRING","_request",285],["T_WHITESPACE"," ",285],"=",["T_WHITESPACE"," ",285],["T_VARIABLE","$request",285],";",["T_WHITESPACE","\n        ",285],["T_VARIABLE","$this",286],["T_OBJECT_OPERATOR","->",286],["T_STRING","setStore",286],"(",["T_VARIABLE","$request",286],["T_OBJECT_OPERATOR","->",286],["T_STRING","getStoreId",286],"(",")",")",";",["T_WHITESPACE","\n\n        ",286],["T_VARIABLE","$requestObject",288],["T_WHITESPACE"," ",288],"=",["T_WHITESPACE"," ",288],["T_NEW","new",288],["T_WHITESPACE"," ",288],["T_STRING","Varien_Object",288],"(",")",";",["T_WHITESPACE","\n\n        ",288],["T_VARIABLE","$requestObject",290],["T_OBJECT_OPERATOR","->",290],["T_STRING","setIsGenerateLabelReturn",290],"(",["T_VARIABLE","$request",290],["T_OBJECT_OPERATOR","->",290],["T_STRING","getIsGenerateLabelReturn",290],"(",")",")",";",["T_WHITESPACE","\n\n        ",290],["T_VARIABLE","$requestObject",292],["T_OBJECT_OPERATOR","->",292],["T_STRING","setStoreId",292],"(",["T_VARIABLE","$request",292],["T_OBJECT_OPERATOR","->",292],["T_STRING","getStoreId",292],"(",")",")",";",["T_WHITESPACE","\n\n        ",292],["T_IF","if",294],["T_WHITESPACE"," ",294],"(",["T_VARIABLE","$request",294],["T_OBJECT_OPERATOR","->",294],["T_STRING","getLimitMethod",294],"(",")",")",["T_WHITESPACE"," ",294],"{",["T_WHITESPACE","\n            ",294],["T_VARIABLE","$requestObject",295],["T_OBJECT_OPERATOR","->",295],["T_STRING","setService",295],"(",["T_VARIABLE","$request",295],["T_OBJECT_OPERATOR","->",295],["T_STRING","getLimitMethod",295],"(",")",")",";",["T_WHITESPACE","\n        ",295],"}",["T_WHITESPACE","\n\n        ",296],["T_VARIABLE","$requestObject",298],["T_WHITESPACE"," ",298],"=",["T_WHITESPACE"," ",298],["T_VARIABLE","$this",298],["T_OBJECT_OPERATOR","->",298],["T_STRING","_addParams",298],"(",["T_VARIABLE","$requestObject",298],")",";",["T_WHITESPACE","\n\n        ",298],["T_IF","if",300],["T_WHITESPACE"," ",300],"(",["T_VARIABLE","$request",300],["T_OBJECT_OPERATOR","->",300],["T_STRING","getDestPostcode",300],"(",")",")",["T_WHITESPACE"," ",300],"{",["T_WHITESPACE","\n            ",300],["T_VARIABLE","$requestObject",301],["T_OBJECT_OPERATOR","->",301],["T_STRING","setDestPostal",301],"(",["T_VARIABLE","$request",301],["T_OBJECT_OPERATOR","->",301],["T_STRING","getDestPostcode",301],"(",")",")",";",["T_WHITESPACE","\n        ",301],"}",["T_WHITESPACE","\n\n        ",302],["T_VARIABLE","$requestObject",304],["T_OBJECT_OPERATOR","->",304],["T_STRING","setOrigCountry",304],"(",["T_WHITESPACE","\n                ",304],["T_VARIABLE","$this",305],["T_OBJECT_OPERATOR","->",305],["T_STRING","_getDefaultValue",305],"(",["T_WHITESPACE","\n                    ",305],["T_VARIABLE","$request",306],["T_OBJECT_OPERATOR","->",306],["T_STRING","getOrigCountry",306],"(",")",",",["T_WHITESPACE"," ",306],["T_STRING","Mage_Shipping_Model_Shipping",306],["T_DOUBLE_COLON","::",306],["T_STRING","XML_PATH_STORE_COUNTRY_ID",306],")",["T_WHITESPACE","\n            ",306],")",["T_WHITESPACE","\n            ",307],["T_OBJECT_OPERATOR","->",308],["T_STRING","setOrigCountryId",308],"(",["T_WHITESPACE","\n                ",308],["T_VARIABLE","$this",309],["T_OBJECT_OPERATOR","->",309],["T_STRING","_getDefaultValue",309],"(",["T_WHITESPACE","\n                    ",309],["T_VARIABLE","$request",310],["T_OBJECT_OPERATOR","->",310],["T_STRING","getOrigCountryId",310],"(",")",",",["T_WHITESPACE"," ",310],["T_STRING","Mage_Shipping_Model_Shipping",310],["T_DOUBLE_COLON","::",310],["T_STRING","XML_PATH_STORE_COUNTRY_ID",310],")",["T_WHITESPACE","\n            ",310],")",";",["T_WHITESPACE","\n\n        ",311],["T_VARIABLE","$shippingWeight",313],["T_WHITESPACE"," ",313],"=",["T_WHITESPACE"," ",313],["T_VARIABLE","$request",313],["T_OBJECT_OPERATOR","->",313],["T_STRING","getPackageWeight",313],"(",")",";",["T_WHITESPACE","\n\n        ",313],["T_VARIABLE","$requestObject",315],["T_OBJECT_OPERATOR","->",315],["T_STRING","setValue",315],"(",["T_STRING","round",315],"(",["T_VARIABLE","$request",315],["T_OBJECT_OPERATOR","->",315],["T_STRING","getPackageValue",315],"(",")",",",["T_WHITESPACE"," ",315],["T_LNUMBER","2",315],")",")",["T_WHITESPACE","\n            ",315],["T_OBJECT_OPERATOR","->",316],["T_STRING","setValueWithDiscount",316],"(",["T_VARIABLE","$request",316],["T_OBJECT_OPERATOR","->",316],["T_STRING","getPackageValueWithDiscount",316],"(",")",")",["T_WHITESPACE","\n            ",316],["T_OBJECT_OPERATOR","->",317],["T_STRING","setCustomsValue",317],"(",["T_VARIABLE","$request",317],["T_OBJECT_OPERATOR","->",317],["T_STRING","getPackageCustomsValue",317],"(",")",")",["T_WHITESPACE","\n            ",317],["T_OBJECT_OPERATOR","->",318],["T_STRING","setDestStreet",318],"(",["T_WHITESPACE","\n                ",318],["T_STRING","Mage",319],["T_DOUBLE_COLON","::",319],["T_STRING","helper",319],"(",["T_CONSTANT_ENCAPSED_STRING","'core\/string'",319],")",["T_OBJECT_OPERATOR","->",319],["T_STRING","substr",319],"(",["T_STRING","str_replace",319],"(",["T_CONSTANT_ENCAPSED_STRING","\"\\n\"",319],",",["T_WHITESPACE"," ",319],["T_CONSTANT_ENCAPSED_STRING","''",319],",",["T_WHITESPACE"," ",319],["T_VARIABLE","$request",319],["T_OBJECT_OPERATOR","->",319],["T_STRING","getDestStreet",319],"(",")",")",",",["T_WHITESPACE"," ",319],["T_LNUMBER","0",319],",",["T_WHITESPACE"," ",319],["T_LNUMBER","35",319],")",")",["T_WHITESPACE","\n            ",319],["T_OBJECT_OPERATOR","->",320],["T_STRING","setDestStreetLine2",320],"(",["T_VARIABLE","$request",320],["T_OBJECT_OPERATOR","->",320],["T_STRING","getDestStreetLine2",320],"(",")",")",["T_WHITESPACE","\n            ",320],["T_OBJECT_OPERATOR","->",321],["T_STRING","setDestCity",321],"(",["T_VARIABLE","$request",321],["T_OBJECT_OPERATOR","->",321],["T_STRING","getDestCity",321],"(",")",")",["T_WHITESPACE","\n            ",321],["T_OBJECT_OPERATOR","->",322],["T_STRING","setOrigCompanyName",322],"(",["T_VARIABLE","$request",322],["T_OBJECT_OPERATOR","->",322],["T_STRING","getOrigCompanyName",322],"(",")",")",["T_WHITESPACE","\n            ",322],["T_OBJECT_OPERATOR","->",323],["T_STRING","setOrigCity",323],"(",["T_VARIABLE","$request",323],["T_OBJECT_OPERATOR","->",323],["T_STRING","getOrigCity",323],"(",")",")",["T_WHITESPACE","\n            ",323],["T_OBJECT_OPERATOR","->",324],["T_STRING","setOrigPhoneNumber",324],"(",["T_VARIABLE","$request",324],["T_OBJECT_OPERATOR","->",324],["T_STRING","getOrigPhoneNumber",324],"(",")",")",["T_WHITESPACE","\n            ",324],["T_OBJECT_OPERATOR","->",325],["T_STRING","setOrigPersonName",325],"(",["T_VARIABLE","$request",325],["T_OBJECT_OPERATOR","->",325],["T_STRING","getOrigPersonName",325],"(",")",")",["T_WHITESPACE","\n            ",325],["T_OBJECT_OPERATOR","->",326],["T_STRING","setOrigEmail",326],"(",["T_STRING","Mage",326],["T_DOUBLE_COLON","::",326],["T_STRING","getStoreConfig",326],"(",["T_CONSTANT_ENCAPSED_STRING","'trans_email\/ident_general\/email'",326],",",["T_WHITESPACE"," ",326],["T_VARIABLE","$requestObject",326],["T_OBJECT_OPERATOR","->",326],["T_STRING","getStoreId",326],"(",")",")",")",["T_WHITESPACE","\n            ",326],["T_OBJECT_OPERATOR","->",327],["T_STRING","setOrigCity",327],"(",["T_VARIABLE","$request",327],["T_OBJECT_OPERATOR","->",327],["T_STRING","getOrigCity",327],"(",")",")",["T_WHITESPACE","\n            ",327],["T_OBJECT_OPERATOR","->",328],["T_STRING","setOrigPostal",328],"(",["T_VARIABLE","$request",328],["T_OBJECT_OPERATOR","->",328],["T_STRING","getOrigPostal",328],"(",")",")",["T_WHITESPACE","\n            ",328],["T_OBJECT_OPERATOR","->",329],["T_STRING","setOrigStreetLine2",329],"(",["T_VARIABLE","$request",329],["T_OBJECT_OPERATOR","->",329],["T_STRING","getOrigStreetLine2",329],"(",")",")",["T_WHITESPACE","\n            ",329],["T_OBJECT_OPERATOR","->",330],["T_STRING","setDestPhoneNumber",330],"(",["T_VARIABLE","$request",330],["T_OBJECT_OPERATOR","->",330],["T_STRING","getDestPhoneNumber",330],"(",")",")",["T_WHITESPACE","\n            ",330],["T_OBJECT_OPERATOR","->",331],["T_STRING","setDestPersonName",331],"(",["T_VARIABLE","$request",331],["T_OBJECT_OPERATOR","->",331],["T_STRING","getDestPersonName",331],"(",")",")",["T_WHITESPACE","\n            ",331],["T_OBJECT_OPERATOR","->",332],["T_STRING","setDestCompanyName",332],"(",["T_VARIABLE","$request",332],["T_OBJECT_OPERATOR","->",332],["T_STRING","getDestCompanyName",332],"(",")",")",";",["T_WHITESPACE","\n\n        ",332],["T_VARIABLE","$originStreet2",334],["T_WHITESPACE"," ",334],"=",["T_WHITESPACE"," ",334],["T_STRING","Mage",334],["T_DOUBLE_COLON","::",334],["T_STRING","getStoreConfig",334],"(",["T_WHITESPACE","\n                ",334],["T_STRING","Mage_Shipping_Model_Shipping",335],["T_DOUBLE_COLON","::",335],["T_STRING","XML_PATH_STORE_ADDRESS2",335],",",["T_WHITESPACE"," ",335],["T_VARIABLE","$requestObject",335],["T_OBJECT_OPERATOR","->",335],["T_STRING","getStoreId",335],"(",")",")",";",["T_WHITESPACE","\n\n        ",335],["T_VARIABLE","$requestObject",337],["T_OBJECT_OPERATOR","->",337],["T_STRING","setOrigStreet",337],"(",["T_VARIABLE","$request",337],["T_OBJECT_OPERATOR","->",337],["T_STRING","getOrigStreet",337],"(",")",["T_WHITESPACE"," ",337],"?",["T_WHITESPACE"," ",337],["T_VARIABLE","$request",337],["T_OBJECT_OPERATOR","->",337],["T_STRING","getOrigStreet",337],"(",")",["T_WHITESPACE"," ",337],":",["T_WHITESPACE"," ",337],["T_VARIABLE","$originStreet2",337],")",";",["T_WHITESPACE","\n\n        ",337],["T_IF","if",339],["T_WHITESPACE"," ",339],"(",["T_STRING","is_numeric",339],"(",["T_VARIABLE","$request",339],["T_OBJECT_OPERATOR","->",339],["T_STRING","getOrigState",339],"(",")",")",")",["T_WHITESPACE"," ",339],"{",["T_WHITESPACE","\n            ",339],["T_VARIABLE","$requestObject",340],["T_OBJECT_OPERATOR","->",340],["T_STRING","setOrigState",340],"(",["T_STRING","Mage",340],["T_DOUBLE_COLON","::",340],["T_STRING","getModel",340],"(",["T_CONSTANT_ENCAPSED_STRING","'directory\/region'",340],")",["T_OBJECT_OPERATOR","->",340],["T_STRING","load",340],"(",["T_VARIABLE","$request",340],["T_OBJECT_OPERATOR","->",340],["T_STRING","getOrigState",340],"(",")",")",["T_OBJECT_OPERATOR","->",340],["T_STRING","getCode",340],"(",")",")",";",["T_WHITESPACE","\n        ",340],"}",["T_WHITESPACE"," ",341],["T_ELSE","else",341],["T_WHITESPACE"," ",341],"{",["T_WHITESPACE","\n            ",341],["T_VARIABLE","$requestObject",342],["T_OBJECT_OPERATOR","->",342],["T_STRING","setOrigState",342],"(",["T_VARIABLE","$request",342],["T_OBJECT_OPERATOR","->",342],["T_STRING","getOrigState",342],"(",")",")",";",["T_WHITESPACE","\n        ",342],"}",["T_WHITESPACE","\n\n        ",343],["T_IF","if",345],["T_WHITESPACE"," ",345],"(",["T_VARIABLE","$request",345],["T_OBJECT_OPERATOR","->",345],["T_STRING","getDestCountryId",345],"(",")",")",["T_WHITESPACE"," ",345],"{",["T_WHITESPACE","\n            ",345],["T_VARIABLE","$destCountry",346],["T_WHITESPACE"," ",346],"=",["T_WHITESPACE"," ",346],["T_VARIABLE","$request",346],["T_OBJECT_OPERATOR","->",346],["T_STRING","getDestCountryId",346],"(",")",";",["T_WHITESPACE","\n        ",346],"}",["T_WHITESPACE"," ",347],["T_ELSE","else",347],["T_WHITESPACE"," ",347],"{",["T_WHITESPACE","\n            ",347],["T_VARIABLE","$destCountry",348],["T_WHITESPACE"," ",348],"=",["T_WHITESPACE"," ",348],["T_STRING","self",348],["T_DOUBLE_COLON","::",348],["T_STRING","USA_COUNTRY_ID",348],";",["T_WHITESPACE","\n        ",348],"}",["T_WHITESPACE","\n\n        ",349],["T_COMMENT","\/\/ for DHL, Puerto Rico state for US will assume as Puerto Rico country\n",351],["T_WHITESPACE","        ",352],["T_COMMENT","\/\/ for Puerto Rico, dhl will ship as international\n",352],["T_WHITESPACE","        ",353],["T_IF","if",353],["T_WHITESPACE"," ",353],"(",["T_VARIABLE","$destCountry",353],["T_WHITESPACE"," ",353],["T_IS_EQUAL","==",353],["T_WHITESPACE"," ",353],["T_STRING","self",353],["T_DOUBLE_COLON","::",353],["T_STRING","USA_COUNTRY_ID",353],["T_WHITESPACE"," ",353],["T_BOOLEAN_AND","&&",353],["T_WHITESPACE"," ",353],"(",["T_VARIABLE","$request",353],["T_OBJECT_OPERATOR","->",353],["T_STRING","getDestPostcode",353],"(",")",["T_WHITESPACE"," ",353],["T_IS_EQUAL","==",353],["T_WHITESPACE"," ",353],["T_CONSTANT_ENCAPSED_STRING","'00912'",353],["T_WHITESPACE","\n                                                     ",353],["T_BOOLEAN_OR","||",354],["T_WHITESPACE"," ",354],["T_VARIABLE","$request",354],["T_OBJECT_OPERATOR","->",354],["T_STRING","getDestRegionCode",354],"(",")",["T_WHITESPACE"," ",354],["T_IS_EQUAL","==",354],["T_WHITESPACE"," ",354],["T_STRING","self",354],["T_DOUBLE_COLON","::",354],["T_STRING","PUERTORICO_COUNTRY_ID",354],")",["T_WHITESPACE","\n        ",354],")",["T_WHITESPACE"," ",355],"{",["T_WHITESPACE","\n            ",355],["T_VARIABLE","$destCountry",356],["T_WHITESPACE"," ",356],"=",["T_WHITESPACE"," ",356],["T_STRING","self",356],["T_DOUBLE_COLON","::",356],["T_STRING","PUERTORICO_COUNTRY_ID",356],";",["T_WHITESPACE","\n        ",356],"}",["T_WHITESPACE","\n\n        ",357],["T_VARIABLE","$requestObject",359],["T_OBJECT_OPERATOR","->",359],["T_STRING","setDestCountryId",359],"(",["T_VARIABLE","$destCountry",359],")",["T_WHITESPACE","\n            ",359],["T_OBJECT_OPERATOR","->",360],["T_STRING","setDestState",360],"(",["T_VARIABLE","$request",360],["T_OBJECT_OPERATOR","->",360],["T_STRING","getDestRegionCode",360],"(",")",")",["T_WHITESPACE","\n            ",360],["T_OBJECT_OPERATOR","->",361],["T_STRING","setWeight",361],"(",["T_VARIABLE","$shippingWeight",361],")",["T_WHITESPACE","\n            ",361],["T_OBJECT_OPERATOR","->",362],["T_STRING","setFreeMethodWeight",362],"(",["T_VARIABLE","$request",362],["T_OBJECT_OPERATOR","->",362],["T_STRING","getFreeMethodWeight",362],"(",")",")",["T_WHITESPACE","\n            ",362],["T_OBJECT_OPERATOR","->",363],["T_STRING","setOrderShipment",363],"(",["T_VARIABLE","$request",363],["T_OBJECT_OPERATOR","->",363],["T_STRING","getOrderShipment",363],"(",")",")",";",["T_WHITESPACE","\n\n        ",363],["T_IF","if",365],["T_WHITESPACE"," ",365],"(",["T_VARIABLE","$request",365],["T_OBJECT_OPERATOR","->",365],["T_STRING","getPackageId",365],"(",")",")",["T_WHITESPACE"," ",365],"{",["T_WHITESPACE","\n            ",365],["T_VARIABLE","$requestObject",366],["T_OBJECT_OPERATOR","->",366],["T_STRING","setPackageId",366],"(",["T_VARIABLE","$request",366],["T_OBJECT_OPERATOR","->",366],["T_STRING","getPackageId",366],"(",")",")",";",["T_WHITESPACE","\n        ",366],"}",["T_WHITESPACE","\n\n        ",367],["T_VARIABLE","$requestObject",369],["T_OBJECT_OPERATOR","->",369],["T_STRING","setBaseSubtotalInclTax",369],"(",["T_VARIABLE","$request",369],["T_OBJECT_OPERATOR","->",369],["T_STRING","getBaseSubtotalInclTax",369],"(",")",")",";",["T_WHITESPACE","\n\n        ",369],["T_VARIABLE","$this",371],["T_OBJECT_OPERATOR","->",371],["T_STRING","_rawRequest",371],["T_WHITESPACE"," ",371],"=",["T_WHITESPACE"," ",371],["T_VARIABLE","$requestObject",371],";",["T_WHITESPACE","\n        ",371],["T_RETURN","return",372],["T_WHITESPACE"," ",372],["T_VARIABLE","$this",372],";",["T_WHITESPACE","\n    ",372],"}",["T_WHITESPACE","\n\n    ",373],["T_DOC_COMMENT","\/**\n     * Get allowed shipping methods\n     *\n     * @return array\n     *\/",375],["T_WHITESPACE","\n    ",379],["T_PUBLIC","public",380],["T_WHITESPACE"," ",380],["T_FUNCTION","function",380],["T_WHITESPACE"," ",380],["T_STRING","getAllowedMethods",380],"(",")",["T_WHITESPACE","\n    ",380],"{",["T_WHITESPACE","\n        ",381],["T_VARIABLE","$contentType",382],["T_WHITESPACE"," ",382],"=",["T_WHITESPACE"," ",382],["T_VARIABLE","$this",382],["T_OBJECT_OPERATOR","->",382],["T_STRING","getConfigData",382],"(",["T_CONSTANT_ENCAPSED_STRING","'content_type'",382],")",";",["T_WHITESPACE","\n        ",382],["T_VARIABLE","$allowedMethods",383],["T_WHITESPACE"," ",383],"=",["T_WHITESPACE"," ",383],["T_ARRAY","array",383],"(",")",";",["T_WHITESPACE","\n        ",383],["T_IF","if",384],["T_WHITESPACE"," ",384],"(",["T_VARIABLE","$this",384],["T_OBJECT_OPERATOR","->",384],["T_STRING","_isDomestic",384],")",["T_WHITESPACE"," ",384],"{",["T_WHITESPACE","\n            ",384],["T_VARIABLE","$allowedMethods",385],["T_WHITESPACE"," ",385],"=",["T_WHITESPACE"," ",385],["T_STRING","array_merge",385],"(",["T_STRING","explode",385],"(",["T_CONSTANT_ENCAPSED_STRING","','",385],",",["T_WHITESPACE"," ",385],["T_VARIABLE","$this",385],["T_OBJECT_OPERATOR","->",385],["T_STRING","getConfigData",385],"(",["T_CONSTANT_ENCAPSED_STRING","'doc_methods'",385],")",")",",",["T_WHITESPACE","\n                ",385],["T_STRING","explode",386],"(",["T_CONSTANT_ENCAPSED_STRING","','",386],",",["T_WHITESPACE"," ",386],["T_VARIABLE","$this",386],["T_OBJECT_OPERATOR","->",386],["T_STRING","getConfigData",386],"(",["T_CONSTANT_ENCAPSED_STRING","'nondoc_methods'",386],")",")",["T_WHITESPACE","\n            ",386],")",";",["T_WHITESPACE","\n        ",387],"}",["T_WHITESPACE"," ",388],["T_ELSE","else",388],["T_WHITESPACE"," ",388],"{",["T_WHITESPACE","\n            ",388],["T_SWITCH","switch",389],["T_WHITESPACE"," ",389],"(",["T_VARIABLE","$contentType",389],")",["T_WHITESPACE"," ",389],"{",["T_WHITESPACE","\n                ",389],["T_CASE","case",390],["T_WHITESPACE"," ",390],["T_STRING","self",390],["T_DOUBLE_COLON","::",390],["T_STRING","DHL_CONTENT_TYPE_DOC",390],":",["T_WHITESPACE","\n                    ",390],["T_VARIABLE","$allowedMethods",391],["T_WHITESPACE"," ",391],"=",["T_WHITESPACE"," ",391],["T_STRING","explode",391],"(",["T_CONSTANT_ENCAPSED_STRING","','",391],",",["T_WHITESPACE"," ",391],["T_VARIABLE","$this",391],["T_OBJECT_OPERATOR","->",391],["T_STRING","getConfigData",391],"(",["T_CONSTANT_ENCAPSED_STRING","'doc_methods'",391],")",")",";",["T_WHITESPACE","\n                    ",391],["T_BREAK","break",392],";",["T_WHITESPACE","\n                ",392],["T_CASE","case",393],["T_WHITESPACE"," ",393],["T_STRING","self",393],["T_DOUBLE_COLON","::",393],["T_STRING","DHL_CONTENT_TYPE_NON_DOC",393],":",["T_WHITESPACE","\n                    ",393],["T_VARIABLE","$allowedMethods",394],["T_WHITESPACE"," ",394],"=",["T_WHITESPACE"," ",394],["T_STRING","explode",394],"(",["T_CONSTANT_ENCAPSED_STRING","','",394],",",["T_WHITESPACE"," ",394],["T_VARIABLE","$this",394],["T_OBJECT_OPERATOR","->",394],["T_STRING","getConfigData",394],"(",["T_CONSTANT_ENCAPSED_STRING","'nondoc_methods'",394],")",")",";",["T_WHITESPACE","\n                    ",394],["T_BREAK","break",395],";",["T_WHITESPACE","\n                ",395],["T_DEFAULT","default",396],":",["T_WHITESPACE","\n                    ",396],["T_STRING","Mage",397],["T_DOUBLE_COLON","::",397],["T_STRING","throwException",397],"(",["T_STRING","Mage",397],["T_DOUBLE_COLON","::",397],["T_STRING","helper",397],"(",["T_CONSTANT_ENCAPSED_STRING","'usa'",397],")",["T_OBJECT_OPERATOR","->",397],["T_STRING","__",397],"(",["T_CONSTANT_ENCAPSED_STRING","'Wrong Content Type.'",397],")",")",";",["T_WHITESPACE","\n            ",397],"}",["T_WHITESPACE","\n        ",398],"}",["T_WHITESPACE","\n        ",399],["T_VARIABLE","$methods",400],["T_WHITESPACE"," ",400],"=",["T_WHITESPACE"," ",400],["T_ARRAY","array",400],"(",")",";",["T_WHITESPACE","\n        ",400],["T_FOREACH","foreach",401],["T_WHITESPACE"," ",401],"(",["T_VARIABLE","$allowedMethods",401],["T_WHITESPACE"," ",401],["T_AS","as",401],["T_WHITESPACE"," ",401],["T_VARIABLE","$method",401],")",["T_WHITESPACE"," ",401],"{",["T_WHITESPACE","\n            ",401],["T_VARIABLE","$methods",402],"[",["T_VARIABLE","$method",402],"]",["T_WHITESPACE"," ",402],"=",["T_WHITESPACE"," ",402],["T_VARIABLE","$this",402],["T_OBJECT_OPERATOR","->",402],["T_STRING","getDhlProductTitle",402],"(",["T_VARIABLE","$method",402],")",";",["T_WHITESPACE","\n        ",402],"}",["T_WHITESPACE","\n        ",403],["T_RETURN","return",404],["T_WHITESPACE"," ",404],["T_VARIABLE","$methods",404],";",["T_WHITESPACE","\n    ",404],"}",["T_WHITESPACE","\n\n    ",405],["T_DOC_COMMENT","\/**\n     * Get configuration data of carrier\n     *\n     * @param strin $type\n     * @param string $code\n     * @return array|bool\n     *\/",407],["T_WHITESPACE","\n    ",413],["T_PUBLIC","public",414],["T_WHITESPACE"," ",414],["T_FUNCTION","function",414],["T_WHITESPACE"," ",414],["T_STRING","getCode",414],"(",["T_VARIABLE","$type",414],",",["T_WHITESPACE"," ",414],["T_VARIABLE","$code",414],["T_WHITESPACE"," ",414],"=",["T_WHITESPACE"," ",414],["T_CONSTANT_ENCAPSED_STRING","''",414],")",["T_WHITESPACE","\n    ",414],"{",["T_WHITESPACE","\n        ",415],["T_VARIABLE","$codes",416],["T_WHITESPACE"," ",416],"=",["T_WHITESPACE"," ",416],["T_ARRAY","array",416],"(",["T_WHITESPACE","\n            ",416],["T_CONSTANT_ENCAPSED_STRING","'unit_of_measure'",417],["T_WHITESPACE","   ",417],["T_DOUBLE_ARROW","=>",417],["T_WHITESPACE"," ",417],["T_ARRAY","array",417],"(",["T_WHITESPACE","\n                ",417],["T_CONSTANT_ENCAPSED_STRING","'L'",418],["T_WHITESPACE"," ",418],["T_DOUBLE_ARROW","=>",418],["T_WHITESPACE"," ",418],["T_STRING","Mage",418],["T_DOUBLE_COLON","::",418],["T_STRING","helper",418],"(",["T_CONSTANT_ENCAPSED_STRING","'usa'",418],")",["T_OBJECT_OPERATOR","->",418],["T_STRING","__",418],"(",["T_CONSTANT_ENCAPSED_STRING","'Pounds'",418],")",",",["T_WHITESPACE","\n                ",418],["T_CONSTANT_ENCAPSED_STRING","'K'",419],["T_WHITESPACE"," ",419],["T_DOUBLE_ARROW","=>",419],["T_WHITESPACE"," ",419],["T_STRING","Mage",419],["T_DOUBLE_COLON","::",419],["T_STRING","helper",419],"(",["T_CONSTANT_ENCAPSED_STRING","'usa'",419],")",["T_OBJECT_OPERATOR","->",419],["T_STRING","__",419],"(",["T_CONSTANT_ENCAPSED_STRING","'Kilograms'",419],")",",",["T_WHITESPACE","\n            ",419],")",",",["T_WHITESPACE","\n            ",420],["T_CONSTANT_ENCAPSED_STRING","'unit_of_dimension'",421],["T_WHITESPACE"," ",421],["T_DOUBLE_ARROW","=>",421],["T_WHITESPACE"," ",421],["T_ARRAY","array",421],"(",["T_WHITESPACE","\n                ",421],["T_CONSTANT_ENCAPSED_STRING","'I'",422],["T_WHITESPACE"," ",422],["T_DOUBLE_ARROW","=>",422],["T_WHITESPACE"," ",422],["T_STRING","Mage",422],["T_DOUBLE_COLON","::",422],["T_STRING","helper",422],"(",["T_CONSTANT_ENCAPSED_STRING","'usa'",422],")",["T_OBJECT_OPERATOR","->",422],["T_STRING","__",422],"(",["T_CONSTANT_ENCAPSED_STRING","'Inches'",422],")",",",["T_WHITESPACE","\n                ",422],["T_CONSTANT_ENCAPSED_STRING","'C'",423],["T_WHITESPACE"," ",423],["T_DOUBLE_ARROW","=>",423],["T_WHITESPACE"," ",423],["T_STRING","Mage",423],["T_DOUBLE_COLON","::",423],["T_STRING","helper",423],"(",["T_CONSTANT_ENCAPSED_STRING","'usa'",423],")",["T_OBJECT_OPERATOR","->",423],["T_STRING","__",423],"(",["T_CONSTANT_ENCAPSED_STRING","'Centimeters'",423],")",",",["T_WHITESPACE","\n            ",423],")",",",["T_WHITESPACE","\n            ",424],["T_CONSTANT_ENCAPSED_STRING","'unit_of_dimension_cut'",425],["T_WHITESPACE"," ",425],["T_DOUBLE_ARROW","=>",425],["T_WHITESPACE"," ",425],["T_ARRAY","array",425],"(",["T_WHITESPACE","\n                ",425],["T_CONSTANT_ENCAPSED_STRING","'I'",426],["T_WHITESPACE"," ",426],["T_DOUBLE_ARROW","=>",426],["T_WHITESPACE"," ",426],["T_STRING","Mage",426],["T_DOUBLE_COLON","::",426],["T_STRING","helper",426],"(",["T_CONSTANT_ENCAPSED_STRING","'usa'",426],")",["T_OBJECT_OPERATOR","->",426],["T_STRING","__",426],"(",["T_CONSTANT_ENCAPSED_STRING","'inch'",426],")",",",["T_WHITESPACE","\n                ",426],["T_CONSTANT_ENCAPSED_STRING","'C'",427],["T_WHITESPACE"," ",427],["T_DOUBLE_ARROW","=>",427],["T_WHITESPACE"," ",427],["T_STRING","Mage",427],["T_DOUBLE_COLON","::",427],["T_STRING","helper",427],"(",["T_CONSTANT_ENCAPSED_STRING","'usa'",427],")",["T_OBJECT_OPERATOR","->",427],["T_STRING","__",427],"(",["T_CONSTANT_ENCAPSED_STRING","'cm'",427],")",",",["T_WHITESPACE","\n            ",427],")",",",["T_WHITESPACE","\n            ",428],["T_CONSTANT_ENCAPSED_STRING","'dimensions'",429],["T_WHITESPACE"," ",429],["T_DOUBLE_ARROW","=>",429],["T_WHITESPACE"," ",429],["T_ARRAY","array",429],"(",["T_WHITESPACE","\n                ",429],["T_CONSTANT_ENCAPSED_STRING","'HEIGHT'",430],["T_WHITESPACE","    ",430],["T_DOUBLE_ARROW","=>",430],["T_WHITESPACE"," ",430],["T_STRING","Mage",430],["T_DOUBLE_COLON","::",430],["T_STRING","helper",430],"(",["T_CONSTANT_ENCAPSED_STRING","'usa'",430],")",["T_OBJECT_OPERATOR","->",430],["T_STRING","__",430],"(",["T_CONSTANT_ENCAPSED_STRING","'Height'",430],")",",",["T_WHITESPACE","\n                ",430],["T_CONSTANT_ENCAPSED_STRING","'DEPTH'",431],["T_WHITESPACE","     ",431],["T_DOUBLE_ARROW","=>",431],["T_WHITESPACE"," ",431],["T_STRING","Mage",431],["T_DOUBLE_COLON","::",431],["T_STRING","helper",431],"(",["T_CONSTANT_ENCAPSED_STRING","'usa'",431],")",["T_OBJECT_OPERATOR","->",431],["T_STRING","__",431],"(",["T_CONSTANT_ENCAPSED_STRING","'Depth'",431],")",",",["T_WHITESPACE","\n                ",431],["T_CONSTANT_ENCAPSED_STRING","'WIDTH'",432],["T_WHITESPACE","     ",432],["T_DOUBLE_ARROW","=>",432],["T_WHITESPACE"," ",432],["T_STRING","Mage",432],["T_DOUBLE_COLON","::",432],["T_STRING","helper",432],"(",["T_CONSTANT_ENCAPSED_STRING","'usa'",432],")",["T_OBJECT_OPERATOR","->",432],["T_STRING","__",432],"(",["T_CONSTANT_ENCAPSED_STRING","'Width'",432],")",",",["T_WHITESPACE","\n            ",432],")",",",["T_WHITESPACE","\n            ",433],["T_CONSTANT_ENCAPSED_STRING","'size'",434],["T_WHITESPACE","              ",434],["T_DOUBLE_ARROW","=>",434],["T_WHITESPACE"," ",434],["T_ARRAY","array",434],"(",["T_WHITESPACE","\n                ",434],["T_CONSTANT_ENCAPSED_STRING","'0'",435],["T_WHITESPACE"," ",435],["T_DOUBLE_ARROW","=>",435],["T_WHITESPACE"," ",435],["T_STRING","Mage",435],["T_DOUBLE_COLON","::",435],["T_STRING","helper",435],"(",["T_CONSTANT_ENCAPSED_STRING","'usa'",435],")",["T_OBJECT_OPERATOR","->",435],["T_STRING","__",435],"(",["T_CONSTANT_ENCAPSED_STRING","'Regular'",435],")",",",["T_WHITESPACE","\n                ",435],["T_CONSTANT_ENCAPSED_STRING","'1'",436],["T_WHITESPACE"," ",436],["T_DOUBLE_ARROW","=>",436],["T_WHITESPACE"," ",436],["T_STRING","Mage",436],["T_DOUBLE_COLON","::",436],["T_STRING","helper",436],"(",["T_CONSTANT_ENCAPSED_STRING","'usa'",436],")",["T_OBJECT_OPERATOR","->",436],["T_STRING","__",436],"(",["T_CONSTANT_ENCAPSED_STRING","'Specific'",436],")",",",["T_WHITESPACE","\n            ",436],")",",",["T_WHITESPACE","\n            ",437],["T_CONSTANT_ENCAPSED_STRING","'dimensions_variables'",438],["T_WHITESPACE","  ",438],["T_DOUBLE_ARROW","=>",438],["T_WHITESPACE"," ",438],["T_ARRAY","array",438],"(",["T_WHITESPACE","\n                ",438],["T_CONSTANT_ENCAPSED_STRING","'L'",439],["T_WHITESPACE","         ",439],["T_DOUBLE_ARROW","=>",439],["T_WHITESPACE"," ",439],["T_STRING","Zend_Measure_Weight",439],["T_DOUBLE_COLON","::",439],["T_STRING","POUND",439],",",["T_WHITESPACE","\n                ",439],["T_CONSTANT_ENCAPSED_STRING","'LB'",440],["T_WHITESPACE","        ",440],["T_DOUBLE_ARROW","=>",440],["T_WHITESPACE"," ",440],["T_STRING","Zend_Measure_Weight",440],["T_DOUBLE_COLON","::",440],["T_STRING","POUND",440],",",["T_WHITESPACE","\n                ",440],["T_CONSTANT_ENCAPSED_STRING","'POUND'",441],["T_WHITESPACE","     ",441],["T_DOUBLE_ARROW","=>",441],["T_WHITESPACE"," ",441],["T_STRING","Zend_Measure_Weight",441],["T_DOUBLE_COLON","::",441],["T_STRING","POUND",441],",",["T_WHITESPACE","\n                ",441],["T_CONSTANT_ENCAPSED_STRING","'K'",442],["T_WHITESPACE","         ",442],["T_DOUBLE_ARROW","=>",442],["T_WHITESPACE"," ",442],["T_STRING","Zend_Measure_Weight",442],["T_DOUBLE_COLON","::",442],["T_STRING","KILOGRAM",442],",",["T_WHITESPACE","\n                ",442],["T_CONSTANT_ENCAPSED_STRING","'KG'",443],["T_WHITESPACE","        ",443],["T_DOUBLE_ARROW","=>",443],["T_WHITESPACE"," ",443],["T_STRING","Zend_Measure_Weight",443],["T_DOUBLE_COLON","::",443],["T_STRING","KILOGRAM",443],",",["T_WHITESPACE","\n                ",443],["T_CONSTANT_ENCAPSED_STRING","'KILOGRAM'",444],["T_WHITESPACE","  ",444],["T_DOUBLE_ARROW","=>",444],["T_WHITESPACE"," ",444],["T_STRING","Zend_Measure_Weight",444],["T_DOUBLE_COLON","::",444],["T_STRING","KILOGRAM",444],",",["T_WHITESPACE","\n                ",444],["T_CONSTANT_ENCAPSED_STRING","'I'",445],["T_WHITESPACE","         ",445],["T_DOUBLE_ARROW","=>",445],["T_WHITESPACE"," ",445],["T_STRING","Zend_Measure_Length",445],["T_DOUBLE_COLON","::",445],["T_STRING","INCH",445],",",["T_WHITESPACE","\n                ",445],["T_CONSTANT_ENCAPSED_STRING","'IN'",446],["T_WHITESPACE","        ",446],["T_DOUBLE_ARROW","=>",446],["T_WHITESPACE"," ",446],["T_STRING","Zend_Measure_Length",446],["T_DOUBLE_COLON","::",446],["T_STRING","INCH",446],",",["T_WHITESPACE","\n                ",446],["T_CONSTANT_ENCAPSED_STRING","'INCH'",447],["T_WHITESPACE","      ",447],["T_DOUBLE_ARROW","=>",447],["T_WHITESPACE"," ",447],["T_STRING","Zend_Measure_Length",447],["T_DOUBLE_COLON","::",447],["T_STRING","INCH",447],",",["T_WHITESPACE","\n                ",447],["T_CONSTANT_ENCAPSED_STRING","'C'",448],["T_WHITESPACE","         ",448],["T_DOUBLE_ARROW","=>",448],["T_WHITESPACE"," ",448],["T_STRING","Zend_Measure_Length",448],["T_DOUBLE_COLON","::",448],["T_STRING","CENTIMETER",448],",",["T_WHITESPACE","\n                ",448],["T_CONSTANT_ENCAPSED_STRING","'CM'",449],["T_WHITESPACE","        ",449],["T_DOUBLE_ARROW","=>",449],["T_WHITESPACE"," ",449],["T_STRING","Zend_Measure_Length",449],["T_DOUBLE_COLON","::",449],["T_STRING","CENTIMETER",449],",",["T_WHITESPACE","\n                ",449],["T_CONSTANT_ENCAPSED_STRING","'CENTIMETER'",450],["T_DOUBLE_ARROW","=>",450],["T_WHITESPACE"," ",450],["T_STRING","Zend_Measure_Length",450],["T_DOUBLE_COLON","::",450],["T_STRING","CENTIMETER",450],",",["T_WHITESPACE","\n\n            ",450],")",["T_WHITESPACE","\n        ",452],")",";",["T_WHITESPACE","\n\n        ",453],["T_IF","if",455],["T_WHITESPACE"," ",455],"(","!",["T_ISSET","isset",455],"(",["T_VARIABLE","$codes",455],"[",["T_VARIABLE","$type",455],"]",")",")",["T_WHITESPACE"," ",455],"{",["T_WHITESPACE","\n            ",455],["T_RETURN","return",456],["T_WHITESPACE"," ",456],["T_STRING","false",456],";",["T_WHITESPACE","\n        ",456],"}",["T_WHITESPACE"," ",457],["T_ELSEIF","elseif",457],["T_WHITESPACE"," ",457],"(",["T_CONSTANT_ENCAPSED_STRING","''",457],["T_WHITESPACE"," ",457],["T_IS_IDENTICAL","===",457],["T_WHITESPACE"," ",457],["T_VARIABLE","$code",457],")",["T_WHITESPACE"," ",457],"{",["T_WHITESPACE","\n            ",457],["T_RETURN","return",458],["T_WHITESPACE"," ",458],["T_VARIABLE","$codes",458],"[",["T_VARIABLE","$type",458],"]",";",["T_WHITESPACE","\n        ",458],"}",["T_WHITESPACE","\n\n        ",459],["T_VARIABLE","$code",461],["T_WHITESPACE"," ",461],"=",["T_WHITESPACE"," ",461],["T_STRING","strtoupper",461],"(",["T_VARIABLE","$code",461],")",";",["T_WHITESPACE","\n        ",461],["T_IF","if",462],["T_WHITESPACE"," ",462],"(","!",["T_ISSET","isset",462],"(",["T_VARIABLE","$codes",462],"[",["T_VARIABLE","$type",462],"]","[",["T_VARIABLE","$code",462],"]",")",")",["T_WHITESPACE"," ",462],"{",["T_WHITESPACE","\n            ",462],["T_RETURN","return",463],["T_WHITESPACE"," ",463],["T_STRING","false",463],";",["T_WHITESPACE","\n        ",463],"}",["T_WHITESPACE"," ",464],["T_ELSE","else",464],["T_WHITESPACE"," ",464],"{",["T_WHITESPACE","\n            ",464],["T_RETURN","return",465],["T_WHITESPACE"," ",465],["T_VARIABLE","$codes",465],"[",["T_VARIABLE","$type",465],"]","[",["T_VARIABLE","$code",465],"]",";",["T_WHITESPACE","\n        ",465],"}",["T_WHITESPACE","\n    ",466],"}",["T_WHITESPACE","\n\n    ",467],["T_DOC_COMMENT","\/**\n     * Returns DHL shipment methods (depending on package content type, if necessary)\n     *\n     * @param string $doc Package content type (doc\/non-doc) see DHL_CONTENT_TYPE_* constants\n     * @return array\n     *\/",469],["T_WHITESPACE","\n    ",474],["T_PUBLIC","public",475],["T_WHITESPACE"," ",475],["T_FUNCTION","function",475],["T_WHITESPACE"," ",475],["T_STRING","getDhlProducts",475],"(",["T_VARIABLE","$doc",475],")",["T_WHITESPACE","\n    ",475],"{",["T_WHITESPACE","\n        ",476],["T_VARIABLE","$docType",477],["T_WHITESPACE"," ",477],"=",["T_WHITESPACE"," ",477],["T_ARRAY","array",477],"(",["T_WHITESPACE","\n            ",477],["T_CONSTANT_ENCAPSED_STRING","'2'",478],["T_WHITESPACE"," ",478],["T_DOUBLE_ARROW","=>",478],["T_WHITESPACE"," ",478],["T_STRING","Mage",478],["T_DOUBLE_COLON","::",478],["T_STRING","helper",478],"(",["T_CONSTANT_ENCAPSED_STRING","'usa'",478],")",["T_OBJECT_OPERATOR","->",478],["T_STRING","__",478],"(",["T_CONSTANT_ENCAPSED_STRING","'Easy shop'",478],")",",",["T_WHITESPACE","\n            ",478],["T_CONSTANT_ENCAPSED_STRING","'5'",479],["T_WHITESPACE"," ",479],["T_DOUBLE_ARROW","=>",479],["T_WHITESPACE"," ",479],["T_STRING","Mage",479],["T_DOUBLE_COLON","::",479],["T_STRING","helper",479],"(",["T_CONSTANT_ENCAPSED_STRING","'usa'",479],")",["T_OBJECT_OPERATOR","->",479],["T_STRING","__",479],"(",["T_CONSTANT_ENCAPSED_STRING","'Sprintline'",479],")",",",["T_WHITESPACE","\n            ",479],["T_CONSTANT_ENCAPSED_STRING","'6'",480],["T_WHITESPACE"," ",480],["T_DOUBLE_ARROW","=>",480],["T_WHITESPACE"," ",480],["T_STRING","Mage",480],["T_DOUBLE_COLON","::",480],["T_STRING","helper",480],"(",["T_CONSTANT_ENCAPSED_STRING","'usa'",480],")",["T_OBJECT_OPERATOR","->",480],["T_STRING","__",480],"(",["T_CONSTANT_ENCAPSED_STRING","'Secureline'",480],")",",",["T_WHITESPACE","\n            ",480],["T_CONSTANT_ENCAPSED_STRING","'7'",481],["T_WHITESPACE"," ",481],["T_DOUBLE_ARROW","=>",481],["T_WHITESPACE"," ",481],["T_STRING","Mage",481],["T_DOUBLE_COLON","::",481],["T_STRING","helper",481],"(",["T_CONSTANT_ENCAPSED_STRING","'usa'",481],")",["T_OBJECT_OPERATOR","->",481],["T_STRING","__",481],"(",["T_CONSTANT_ENCAPSED_STRING","'Express easy'",481],")",",",["T_WHITESPACE","\n            ",481],["T_CONSTANT_ENCAPSED_STRING","'9'",482],["T_WHITESPACE"," ",482],["T_DOUBLE_ARROW","=>",482],["T_WHITESPACE"," ",482],["T_STRING","Mage",482],["T_DOUBLE_COLON","::",482],["T_STRING","helper",482],"(",["T_CONSTANT_ENCAPSED_STRING","'usa'",482],")",["T_OBJECT_OPERATOR","->",482],["T_STRING","__",482],"(",["T_CONSTANT_ENCAPSED_STRING","'Europack'",482],")",",",["T_WHITESPACE","\n            ",482],["T_CONSTANT_ENCAPSED_STRING","'B'",483],["T_WHITESPACE"," ",483],["T_DOUBLE_ARROW","=>",483],["T_WHITESPACE"," ",483],["T_STRING","Mage",483],["T_DOUBLE_COLON","::",483],["T_STRING","helper",483],"(",["T_CONSTANT_ENCAPSED_STRING","'usa'",483],")",["T_OBJECT_OPERATOR","->",483],["T_STRING","__",483],"(",["T_CONSTANT_ENCAPSED_STRING","'Break bulk express'",483],")",",",["T_WHITESPACE","\n            ",483],["T_CONSTANT_ENCAPSED_STRING","'C'",484],["T_WHITESPACE"," ",484],["T_DOUBLE_ARROW","=>",484],["T_WHITESPACE"," ",484],["T_STRING","Mage",484],["T_DOUBLE_COLON","::",484],["T_STRING","helper",484],"(",["T_CONSTANT_ENCAPSED_STRING","'usa'",484],")",["T_OBJECT_OPERATOR","->",484],["T_STRING","__",484],"(",["T_CONSTANT_ENCAPSED_STRING","'Medical express'",484],")",",",["T_WHITESPACE","\n            ",484],["T_CONSTANT_ENCAPSED_STRING","'D'",485],["T_WHITESPACE"," ",485],["T_DOUBLE_ARROW","=>",485],["T_WHITESPACE"," ",485],["T_STRING","Mage",485],["T_DOUBLE_COLON","::",485],["T_STRING","helper",485],"(",["T_CONSTANT_ENCAPSED_STRING","'usa'",485],")",["T_OBJECT_OPERATOR","->",485],["T_STRING","__",485],"(",["T_CONSTANT_ENCAPSED_STRING","'Express worldwide'",485],")",",",["T_WHITESPACE"," ",485],["T_COMMENT","\/\/ product content code: DOX\n",485],["T_WHITESPACE","            ",486],["T_CONSTANT_ENCAPSED_STRING","'U'",486],["T_WHITESPACE"," ",486],["T_DOUBLE_ARROW","=>",486],["T_WHITESPACE"," ",486],["T_STRING","Mage",486],["T_DOUBLE_COLON","::",486],["T_STRING","helper",486],"(",["T_CONSTANT_ENCAPSED_STRING","'usa'",486],")",["T_OBJECT_OPERATOR","->",486],["T_STRING","__",486],"(",["T_CONSTANT_ENCAPSED_STRING","'Express worldwide'",486],")",",",["T_WHITESPACE"," ",486],["T_COMMENT","\/\/ product content code: ECX\n",486],["T_WHITESPACE","            ",487],["T_CONSTANT_ENCAPSED_STRING","'K'",487],["T_WHITESPACE"," ",487],["T_DOUBLE_ARROW","=>",487],["T_WHITESPACE"," ",487],["T_STRING","Mage",487],["T_DOUBLE_COLON","::",487],["T_STRING","helper",487],"(",["T_CONSTANT_ENCAPSED_STRING","'usa'",487],")",["T_OBJECT_OPERATOR","->",487],["T_STRING","__",487],"(",["T_CONSTANT_ENCAPSED_STRING","'Express 9:00'",487],")",",",["T_WHITESPACE","\n            ",487],["T_CONSTANT_ENCAPSED_STRING","'L'",488],["T_WHITESPACE"," ",488],["T_DOUBLE_ARROW","=>",488],["T_WHITESPACE"," ",488],["T_STRING","Mage",488],["T_DOUBLE_COLON","::",488],["T_STRING","helper",488],"(",["T_CONSTANT_ENCAPSED_STRING","'usa'",488],")",["T_OBJECT_OPERATOR","->",488],["T_STRING","__",488],"(",["T_CONSTANT_ENCAPSED_STRING","'Express 10:30'",488],")",",",["T_WHITESPACE","\n            ",488],["T_CONSTANT_ENCAPSED_STRING","'G'",489],["T_WHITESPACE"," ",489],["T_DOUBLE_ARROW","=>",489],["T_WHITESPACE"," ",489],["T_STRING","Mage",489],["T_DOUBLE_COLON","::",489],["T_STRING","helper",489],"(",["T_CONSTANT_ENCAPSED_STRING","'usa'",489],")",["T_OBJECT_OPERATOR","->",489],["T_STRING","__",489],"(",["T_CONSTANT_ENCAPSED_STRING","'Domestic economy select'",489],")",",",["T_WHITESPACE","\n            ",489],["T_CONSTANT_ENCAPSED_STRING","'W'",490],["T_WHITESPACE"," ",490],["T_DOUBLE_ARROW","=>",490],["T_WHITESPACE"," ",490],["T_STRING","Mage",490],["T_DOUBLE_COLON","::",490],["T_STRING","helper",490],"(",["T_CONSTANT_ENCAPSED_STRING","'usa'",490],")",["T_OBJECT_OPERATOR","->",490],["T_STRING","__",490],"(",["T_CONSTANT_ENCAPSED_STRING","'Economy select'",490],")",",",["T_WHITESPACE","\n            ",490],["T_CONSTANT_ENCAPSED_STRING","'I'",491],["T_WHITESPACE"," ",491],["T_DOUBLE_ARROW","=>",491],["T_WHITESPACE"," ",491],["T_STRING","Mage",491],["T_DOUBLE_COLON","::",491],["T_STRING","helper",491],"(",["T_CONSTANT_ENCAPSED_STRING","'usa'",491],")",["T_OBJECT_OPERATOR","->",491],["T_STRING","__",491],"(",["T_CONSTANT_ENCAPSED_STRING","'Break bulk economy'",491],")",",",["T_WHITESPACE","\n            ",491],["T_CONSTANT_ENCAPSED_STRING","'N'",492],["T_WHITESPACE"," ",492],["T_DOUBLE_ARROW","=>",492],["T_WHITESPACE"," ",492],["T_STRING","Mage",492],["T_DOUBLE_COLON","::",492],["T_STRING","helper",492],"(",["T_CONSTANT_ENCAPSED_STRING","'usa'",492],")",["T_OBJECT_OPERATOR","->",492],["T_STRING","__",492],"(",["T_CONSTANT_ENCAPSED_STRING","'Domestic express'",492],")",",",["T_WHITESPACE","\n            ",492],["T_CONSTANT_ENCAPSED_STRING","'O'",493],["T_WHITESPACE"," ",493],["T_DOUBLE_ARROW","=>",493],["T_WHITESPACE"," ",493],["T_STRING","Mage",493],["T_DOUBLE_COLON","::",493],["T_STRING","helper",493],"(",["T_CONSTANT_ENCAPSED_STRING","'usa'",493],")",["T_OBJECT_OPERATOR","->",493],["T_STRING","__",493],"(",["T_CONSTANT_ENCAPSED_STRING","'Others'",493],")",",",["T_WHITESPACE","\n            ",493],["T_CONSTANT_ENCAPSED_STRING","'R'",494],["T_WHITESPACE"," ",494],["T_DOUBLE_ARROW","=>",494],["T_WHITESPACE"," ",494],["T_STRING","Mage",494],["T_DOUBLE_COLON","::",494],["T_STRING","helper",494],"(",["T_CONSTANT_ENCAPSED_STRING","'usa'",494],")",["T_OBJECT_OPERATOR","->",494],["T_STRING","__",494],"(",["T_CONSTANT_ENCAPSED_STRING","'Globalmail business'",494],")",",",["T_WHITESPACE","\n            ",494],["T_CONSTANT_ENCAPSED_STRING","'S'",495],["T_WHITESPACE"," ",495],["T_DOUBLE_ARROW","=>",495],["T_WHITESPACE"," ",495],["T_STRING","Mage",495],["T_DOUBLE_COLON","::",495],["T_STRING","helper",495],"(",["T_CONSTANT_ENCAPSED_STRING","'usa'",495],")",["T_OBJECT_OPERATOR","->",495],["T_STRING","__",495],"(",["T_CONSTANT_ENCAPSED_STRING","'Same day'",495],")",",",["T_WHITESPACE","\n            ",495],["T_CONSTANT_ENCAPSED_STRING","'T'",496],["T_WHITESPACE"," ",496],["T_DOUBLE_ARROW","=>",496],["T_WHITESPACE"," ",496],["T_STRING","Mage",496],["T_DOUBLE_COLON","::",496],["T_STRING","helper",496],"(",["T_CONSTANT_ENCAPSED_STRING","'usa'",496],")",["T_OBJECT_OPERATOR","->",496],["T_STRING","__",496],"(",["T_CONSTANT_ENCAPSED_STRING","'Express 12:00'",496],")",",",["T_WHITESPACE","\n            ",496],["T_CONSTANT_ENCAPSED_STRING","'X'",497],["T_WHITESPACE"," ",497],["T_DOUBLE_ARROW","=>",497],["T_WHITESPACE"," ",497],["T_STRING","Mage",497],["T_DOUBLE_COLON","::",497],["T_STRING","helper",497],"(",["T_CONSTANT_ENCAPSED_STRING","'usa'",497],")",["T_OBJECT_OPERATOR","->",497],["T_STRING","__",497],"(",["T_CONSTANT_ENCAPSED_STRING","'Express envelope'",497],")",",",["T_WHITESPACE","\n        ",497],")",";",["T_WHITESPACE","\n\n        ",498],["T_VARIABLE","$nonDocType",500],["T_WHITESPACE"," ",500],"=",["T_WHITESPACE"," ",500],["T_ARRAY","array",500],"(",["T_WHITESPACE","\n            ",500],["T_CONSTANT_ENCAPSED_STRING","'1'",501],["T_WHITESPACE"," ",501],["T_DOUBLE_ARROW","=>",501],["T_WHITESPACE"," ",501],["T_STRING","Mage",501],["T_DOUBLE_COLON","::",501],["T_STRING","helper",501],"(",["T_CONSTANT_ENCAPSED_STRING","'usa'",501],")",["T_OBJECT_OPERATOR","->",501],["T_STRING","__",501],"(",["T_CONSTANT_ENCAPSED_STRING","'Customer services'",501],")",",",["T_WHITESPACE","\n            ",501],["T_CONSTANT_ENCAPSED_STRING","'3'",502],["T_WHITESPACE"," ",502],["T_DOUBLE_ARROW","=>",502],["T_WHITESPACE"," ",502],["T_STRING","Mage",502],["T_DOUBLE_COLON","::",502],["T_STRING","helper",502],"(",["T_CONSTANT_ENCAPSED_STRING","'usa'",502],")",["T_OBJECT_OPERATOR","->",502],["T_STRING","__",502],"(",["T_CONSTANT_ENCAPSED_STRING","'Easy shop'",502],")",",",["T_WHITESPACE","\n            ",502],["T_CONSTANT_ENCAPSED_STRING","'4'",503],["T_WHITESPACE"," ",503],["T_DOUBLE_ARROW","=>",503],["T_WHITESPACE"," ",503],["T_STRING","Mage",503],["T_DOUBLE_COLON","::",503],["T_STRING","helper",503],"(",["T_CONSTANT_ENCAPSED_STRING","'usa'",503],")",["T_OBJECT_OPERATOR","->",503],["T_STRING","__",503],"(",["T_CONSTANT_ENCAPSED_STRING","'Jetline'",503],")",",",["T_WHITESPACE","\n            ",503],["T_CONSTANT_ENCAPSED_STRING","'8'",504],["T_WHITESPACE"," ",504],["T_DOUBLE_ARROW","=>",504],["T_WHITESPACE"," ",504],["T_STRING","Mage",504],["T_DOUBLE_COLON","::",504],["T_STRING","helper",504],"(",["T_CONSTANT_ENCAPSED_STRING","'usa'",504],")",["T_OBJECT_OPERATOR","->",504],["T_STRING","__",504],"(",["T_CONSTANT_ENCAPSED_STRING","'Express easy'",504],")",",",["T_WHITESPACE","\n            ",504],["T_CONSTANT_ENCAPSED_STRING","'P'",505],["T_WHITESPACE"," ",505],["T_DOUBLE_ARROW","=>",505],["T_WHITESPACE"," ",505],["T_STRING","Mage",505],["T_DOUBLE_COLON","::",505],["T_STRING","helper",505],"(",["T_CONSTANT_ENCAPSED_STRING","'usa'",505],")",["T_OBJECT_OPERATOR","->",505],["T_STRING","__",505],"(",["T_CONSTANT_ENCAPSED_STRING","'Express worldwide'",505],")",",",["T_WHITESPACE","\n            ",505],["T_CONSTANT_ENCAPSED_STRING","'Q'",506],["T_WHITESPACE"," ",506],["T_DOUBLE_ARROW","=>",506],["T_WHITESPACE"," ",506],["T_STRING","Mage",506],["T_DOUBLE_COLON","::",506],["T_STRING","helper",506],"(",["T_CONSTANT_ENCAPSED_STRING","'usa'",506],")",["T_OBJECT_OPERATOR","->",506],["T_STRING","__",506],"(",["T_CONSTANT_ENCAPSED_STRING","'Medical express'",506],")",",",["T_WHITESPACE","\n            ",506],["T_CONSTANT_ENCAPSED_STRING","'E'",507],["T_WHITESPACE"," ",507],["T_DOUBLE_ARROW","=>",507],["T_WHITESPACE"," ",507],["T_STRING","Mage",507],["T_DOUBLE_COLON","::",507],["T_STRING","helper",507],"(",["T_CONSTANT_ENCAPSED_STRING","'usa'",507],")",["T_OBJECT_OPERATOR","->",507],["T_STRING","__",507],"(",["T_CONSTANT_ENCAPSED_STRING","'Express 9:00'",507],")",",",["T_WHITESPACE","\n            ",507],["T_CONSTANT_ENCAPSED_STRING","'F'",508],["T_WHITESPACE"," ",508],["T_DOUBLE_ARROW","=>",508],["T_WHITESPACE"," ",508],["T_STRING","Mage",508],["T_DOUBLE_COLON","::",508],["T_STRING","helper",508],"(",["T_CONSTANT_ENCAPSED_STRING","'usa'",508],")",["T_OBJECT_OPERATOR","->",508],["T_STRING","__",508],"(",["T_CONSTANT_ENCAPSED_STRING","'Freight worldwide'",508],")",",",["T_WHITESPACE","\n            ",508],["T_CONSTANT_ENCAPSED_STRING","'H'",509],["T_WHITESPACE"," ",509],["T_DOUBLE_ARROW","=>",509],["T_WHITESPACE"," ",509],["T_STRING","Mage",509],["T_DOUBLE_COLON","::",509],["T_STRING","helper",509],"(",["T_CONSTANT_ENCAPSED_STRING","'usa'",509],")",["T_OBJECT_OPERATOR","->",509],["T_STRING","__",509],"(",["T_CONSTANT_ENCAPSED_STRING","'Economy select'",509],")",",",["T_WHITESPACE","\n            ",509],["T_CONSTANT_ENCAPSED_STRING","'J'",510],["T_WHITESPACE"," ",510],["T_DOUBLE_ARROW","=>",510],["T_WHITESPACE"," ",510],["T_STRING","Mage",510],["T_DOUBLE_COLON","::",510],["T_STRING","helper",510],"(",["T_CONSTANT_ENCAPSED_STRING","'usa'",510],")",["T_OBJECT_OPERATOR","->",510],["T_STRING","__",510],"(",["T_CONSTANT_ENCAPSED_STRING","'Jumbo box'",510],")",",",["T_WHITESPACE","\n            ",510],["T_CONSTANT_ENCAPSED_STRING","'M'",511],["T_WHITESPACE"," ",511],["T_DOUBLE_ARROW","=>",511],["T_WHITESPACE"," ",511],["T_STRING","Mage",511],["T_DOUBLE_COLON","::",511],["T_STRING","helper",511],"(",["T_CONSTANT_ENCAPSED_STRING","'usa'",511],")",["T_OBJECT_OPERATOR","->",511],["T_STRING","__",511],"(",["T_CONSTANT_ENCAPSED_STRING","'Express 10:30'",511],")",",",["T_WHITESPACE","\n            ",511],["T_CONSTANT_ENCAPSED_STRING","'V'",512],["T_WHITESPACE"," ",512],["T_DOUBLE_ARROW","=>",512],["T_WHITESPACE"," ",512],["T_STRING","Mage",512],["T_DOUBLE_COLON","::",512],["T_STRING","helper",512],"(",["T_CONSTANT_ENCAPSED_STRING","'usa'",512],")",["T_OBJECT_OPERATOR","->",512],["T_STRING","__",512],"(",["T_CONSTANT_ENCAPSED_STRING","'Europack'",512],")",",",["T_WHITESPACE","\n            ",512],["T_CONSTANT_ENCAPSED_STRING","'Y'",513],["T_WHITESPACE"," ",513],["T_DOUBLE_ARROW","=>",513],["T_WHITESPACE"," ",513],["T_STRING","Mage",513],["T_DOUBLE_COLON","::",513],["T_STRING","helper",513],"(",["T_CONSTANT_ENCAPSED_STRING","'usa'",513],")",["T_OBJECT_OPERATOR","->",513],["T_STRING","__",513],"(",["T_CONSTANT_ENCAPSED_STRING","'Express 12:00'",513],")",",",["T_WHITESPACE","\n        ",513],")",";",["T_WHITESPACE","\n\n        ",514],["T_IF","if",516],["T_WHITESPACE"," ",516],"(",["T_VARIABLE","$this",516],["T_OBJECT_OPERATOR","->",516],["T_STRING","_isDomestic",516],")",["T_WHITESPACE"," ",516],"{",["T_WHITESPACE","\n            ",516],["T_RETURN","return",517],["T_WHITESPACE"," ",517],["T_VARIABLE","$docType",517],["T_WHITESPACE"," ",517],"+",["T_WHITESPACE"," ",517],["T_VARIABLE","$nonDocType",517],";",["T_WHITESPACE","\n        ",517],"}",["T_WHITESPACE","\n        ",518],["T_IF","if",519],["T_WHITESPACE"," ",519],"(",["T_VARIABLE","$doc",519],["T_WHITESPACE"," ",519],["T_IS_EQUAL","==",519],["T_WHITESPACE"," ",519],["T_STRING","self",519],["T_DOUBLE_COLON","::",519],["T_STRING","DHL_CONTENT_TYPE_DOC",519],")",["T_WHITESPACE"," ",519],"{",["T_WHITESPACE","\n            ",519],["T_COMMENT","\/\/ Documents shipping\n",520],["T_WHITESPACE","            ",521],["T_RETURN","return",521],["T_WHITESPACE"," ",521],["T_VARIABLE","$docType",521],";",["T_WHITESPACE","\n        ",521],"}",["T_WHITESPACE"," ",522],["T_ELSE","else",522],["T_WHITESPACE"," ",522],"{",["T_WHITESPACE","\n            ",522],["T_COMMENT","\/\/ Services for shipping non-documents cargo\n",523],["T_WHITESPACE","            ",524],["T_RETURN","return",524],["T_WHITESPACE"," ",524],["T_VARIABLE","$nonDocType",524],";",["T_WHITESPACE","\n        ",524],"}",["T_WHITESPACE","\n    ",525],"}",["T_WHITESPACE","\n\n    ",526],["T_DOC_COMMENT","\/**\n     * Returns title of DHL shipping method by its code\n     *\n     * @param string $code One-symbol code (see getDhlProducts())\n     * @return bool\n     *\/",528],["T_WHITESPACE","\n    ",533],["T_PUBLIC","public",534],["T_WHITESPACE"," ",534],["T_FUNCTION","function",534],["T_WHITESPACE"," ",534],["T_STRING","getDhlProductTitle",534],"(",["T_VARIABLE","$code",534],")",["T_WHITESPACE","\n    ",534],"{",["T_WHITESPACE","\n        ",535],["T_VARIABLE","$contentType",536],["T_WHITESPACE"," ",536],"=",["T_WHITESPACE"," ",536],["T_VARIABLE","$this",536],["T_OBJECT_OPERATOR","->",536],["T_STRING","getConfigData",536],"(",["T_CONSTANT_ENCAPSED_STRING","'content_type'",536],")",";",["T_WHITESPACE","\n        ",536],["T_VARIABLE","$dhlProducts",537],["T_WHITESPACE"," ",537],"=",["T_WHITESPACE"," ",537],["T_VARIABLE","$this",537],["T_OBJECT_OPERATOR","->",537],["T_STRING","getDhlProducts",537],"(",["T_VARIABLE","$contentType",537],")",";",["T_WHITESPACE","\n        ",537],["T_RETURN","return",538],["T_WHITESPACE"," ",538],["T_ISSET","isset",538],"(",["T_VARIABLE","$dhlProducts",538],"[",["T_VARIABLE","$code",538],"]",")",["T_WHITESPACE"," ",538],"?",["T_WHITESPACE"," ",538],["T_VARIABLE","$dhlProducts",538],"[",["T_VARIABLE","$code",538],"]",["T_WHITESPACE"," ",538],":",["T_WHITESPACE"," ",538],["T_STRING","false",538],";",["T_WHITESPACE","\n    ",538],"}",["T_WHITESPACE","\n\n    ",539],["T_DOC_COMMENT","\/**\n     * Convert item weight to needed weight based on config weight unit dimensions\n     *\n     * @param float $weight\n     * @param bool $maxWeight\n     * @param string|bool $configWeightUnit\n     * @return float\n     *\/",541],["T_WHITESPACE","\n    ",548],["T_PROTECTED","protected",549],["T_WHITESPACE"," ",549],["T_FUNCTION","function",549],["T_WHITESPACE"," ",549],["T_STRING","_getWeight",549],"(",["T_VARIABLE","$weight",549],",",["T_WHITESPACE"," ",549],["T_VARIABLE","$maxWeight",549],["T_WHITESPACE"," ",549],"=",["T_WHITESPACE"," ",549],["T_STRING","false",549],",",["T_WHITESPACE"," ",549],["T_VARIABLE","$configWeightUnit",549],["T_WHITESPACE"," ",549],"=",["T_WHITESPACE"," ",549],["T_STRING","false",549],")",["T_WHITESPACE","\n    ",549],"{",["T_WHITESPACE","\n        ",550],["T_IF","if",551],["T_WHITESPACE"," ",551],"(",["T_VARIABLE","$maxWeight",551],")",["T_WHITESPACE"," ",551],"{",["T_WHITESPACE","\n            ",551],["T_VARIABLE","$configWeightUnit",552],["T_WHITESPACE"," ",552],"=",["T_WHITESPACE"," ",552],["T_STRING","Zend_Measure_Weight",552],["T_DOUBLE_COLON","::",552],["T_STRING","KILOGRAM",552],";",["T_WHITESPACE","\n        ",552],"}",["T_WHITESPACE"," ",553],["T_ELSEIF","elseif",553],["T_WHITESPACE"," ",553],"(",["T_VARIABLE","$configWeightUnit",553],")",["T_WHITESPACE"," ",553],"{",["T_WHITESPACE","\n            ",553],["T_VARIABLE","$configWeightUnit",554],["T_WHITESPACE"," ",554],"=",["T_WHITESPACE"," ",554],["T_VARIABLE","$this",554],["T_OBJECT_OPERATOR","->",554],["T_STRING","getCode",554],"(",["T_CONSTANT_ENCAPSED_STRING","'dimensions_variables'",554],",",["T_WHITESPACE"," ",554],["T_VARIABLE","$configWeightUnit",554],")",";",["T_WHITESPACE","\n        ",554],"}",["T_WHITESPACE"," ",555],["T_ELSE","else",555],["T_WHITESPACE"," ",555],"{",["T_WHITESPACE","\n            ",555],["T_VARIABLE","$configWeightUnit",556],["T_WHITESPACE"," ",556],"=",["T_WHITESPACE"," ",556],["T_VARIABLE","$this",556],["T_OBJECT_OPERATOR","->",556],["T_STRING","getCode",556],"(",["T_CONSTANT_ENCAPSED_STRING","'dimensions_variables'",556],",",["T_WHITESPACE"," ",556],["T_STRING_CAST","(string)",556],["T_VARIABLE","$this",556],["T_OBJECT_OPERATOR","->",556],["T_STRING","getConfigData",556],"(",["T_CONSTANT_ENCAPSED_STRING","'unit_of_measure'",556],")",")",";",["T_WHITESPACE","\n        ",556],"}",["T_WHITESPACE","\n\n        ",557],["T_VARIABLE","$countryWeightUnit",559],["T_WHITESPACE"," ",559],"=",["T_WHITESPACE"," ",559],["T_VARIABLE","$this",559],["T_OBJECT_OPERATOR","->",559],["T_STRING","getCode",559],"(",["T_CONSTANT_ENCAPSED_STRING","'dimensions_variables'",559],",",["T_WHITESPACE"," ",559],["T_VARIABLE","$this",559],["T_OBJECT_OPERATOR","->",559],["T_STRING","_getWeightUnit",559],"(",")",")",";",["T_WHITESPACE","\n\n        ",559],["T_IF","if",561],["T_WHITESPACE"," ",561],"(",["T_VARIABLE","$configWeightUnit",561],["T_WHITESPACE"," ",561],["T_IS_NOT_EQUAL","!=",561],["T_WHITESPACE"," ",561],["T_VARIABLE","$countryWeightUnit",561],")",["T_WHITESPACE"," ",561],"{",["T_WHITESPACE","\n            ",561],["T_VARIABLE","$weight",562],["T_WHITESPACE"," ",562],"=",["T_WHITESPACE"," ",562],["T_STRING","Mage",562],["T_DOUBLE_COLON","::",562],["T_STRING","helper",562],"(",["T_CONSTANT_ENCAPSED_STRING","'usa'",562],")",["T_OBJECT_OPERATOR","->",562],["T_STRING","convertMeasureWeight",562],"(",["T_WHITESPACE","\n                ",562],["T_STRING","round",563],"(",["T_VARIABLE","$weight",563],",",["T_LNUMBER","3",563],")",",",["T_WHITESPACE","\n                ",563],["T_VARIABLE","$configWeightUnit",564],",",["T_WHITESPACE","\n                ",564],["T_VARIABLE","$countryWeightUnit",565],["T_WHITESPACE","\n            ",565],")",";",["T_WHITESPACE","\n        ",566],"}",["T_WHITESPACE","\n\n        ",567],["T_RETURN","return",569],["T_WHITESPACE"," ",569],["T_STRING","round",569],"(",["T_VARIABLE","$weight",569],",",["T_WHITESPACE"," ",569],["T_LNUMBER","3",569],")",";",["T_WHITESPACE","\n    ",569],"}",["T_WHITESPACE","\n\n    ",570],["T_DOC_COMMENT","\/**\n     * Prepare items to pieces\n     *\n     * @return array\n     *\/",572],["T_WHITESPACE","\n    ",576],["T_PROTECTED","protected",577],["T_WHITESPACE"," ",577],["T_FUNCTION","function",577],["T_WHITESPACE"," ",577],["T_STRING","_getAllItems",577],"(",")",["T_WHITESPACE","\n    ",577],"{",["T_WHITESPACE","\n        ",578],["T_VARIABLE","$allItems",579],["T_WHITESPACE","   ",579],"=",["T_WHITESPACE"," ",579],["T_VARIABLE","$this",579],["T_OBJECT_OPERATOR","->",579],["T_STRING","_request",579],["T_OBJECT_OPERATOR","->",579],["T_STRING","getAllItems",579],"(",")",";",["T_WHITESPACE","\n        ",579],["T_VARIABLE","$fullItems",580],["T_WHITESPACE","  ",580],"=",["T_WHITESPACE"," ",580],["T_ARRAY","array",580],"(",")",";",["T_WHITESPACE","\n\n        ",580],["T_FOREACH","foreach",582],["T_WHITESPACE"," ",582],"(",["T_VARIABLE","$allItems",582],["T_WHITESPACE"," ",582],["T_AS","as",582],["T_WHITESPACE"," ",582],["T_VARIABLE","$item",582],")",["T_WHITESPACE"," ",582],"{",["T_WHITESPACE","\n            ",582],["T_IF","if",583],["T_WHITESPACE"," ",583],"(",["T_VARIABLE","$item",583],["T_OBJECT_OPERATOR","->",583],["T_STRING","getProductType",583],"(",")",["T_WHITESPACE"," ",583],["T_IS_EQUAL","==",583],["T_WHITESPACE"," ",583],["T_STRING","Mage_Catalog_Model_Product_Type",583],["T_DOUBLE_COLON","::",583],["T_STRING","TYPE_BUNDLE",583],["T_WHITESPACE","\n                ",583],["T_BOOLEAN_AND","&&",584],["T_WHITESPACE"," ",584],["T_VARIABLE","$item",584],["T_OBJECT_OPERATOR","->",584],["T_STRING","getProduct",584],"(",")",["T_OBJECT_OPERATOR","->",584],["T_STRING","getShipmentType",584],"(",")",["T_WHITESPACE","\n            ",584],")",["T_WHITESPACE"," ",585],"{",["T_WHITESPACE","\n                ",585],["T_CONTINUE","continue",586],";",["T_WHITESPACE","\n            ",586],"}",["T_WHITESPACE","\n\n            ",587],["T_VARIABLE","$qty",589],["T_WHITESPACE","            ",589],"=",["T_WHITESPACE"," ",589],["T_VARIABLE","$item",589],["T_OBJECT_OPERATOR","->",589],["T_STRING","getQty",589],"(",")",";",["T_WHITESPACE","\n            ",589],["T_VARIABLE","$changeQty",590],["T_WHITESPACE","      ",590],"=",["T_WHITESPACE"," ",590],["T_STRING","true",590],";",["T_WHITESPACE","\n            ",590],["T_VARIABLE","$checkWeight",591],["T_WHITESPACE","    ",591],"=",["T_WHITESPACE"," ",591],["T_STRING","true",591],";",["T_WHITESPACE","\n            ",591],["T_VARIABLE","$decimalItems",592],["T_WHITESPACE","   ",592],"=",["T_WHITESPACE"," ",592],["T_ARRAY","array",592],"(",")",";",["T_WHITESPACE","\n\n            ",592],["T_IF","if",594],["T_WHITESPACE"," ",594],"(",["T_VARIABLE","$item",594],["T_OBJECT_OPERATOR","->",594],["T_STRING","getParentItem",594],"(",")",")",["T_WHITESPACE"," ",594],"{",["T_WHITESPACE","\n                ",594],["T_IF","if",595],["T_WHITESPACE"," ",595],"(","!",["T_VARIABLE","$item",595],["T_OBJECT_OPERATOR","->",595],["T_STRING","getParentItem",595],"(",")",["T_OBJECT_OPERATOR","->",595],["T_STRING","getProduct",595],"(",")",["T_OBJECT_OPERATOR","->",595],["T_STRING","getShipmentType",595],"(",")",")",["T_WHITESPACE"," ",595],"{",["T_WHITESPACE","\n                    ",595],["T_CONTINUE","continue",596],";",["T_WHITESPACE","\n                ",596],"}",["T_WHITESPACE","\n                ",597],["T_VARIABLE","$qty",598],["T_WHITESPACE"," ",598],"=",["T_WHITESPACE"," ",598],["T_VARIABLE","$item",598],["T_OBJECT_OPERATOR","->",598],["T_STRING","getIsQtyDecimal",598],"(",")",["T_WHITESPACE","\n                    ",598],"?",["T_WHITESPACE"," ",599],["T_VARIABLE","$item",599],["T_OBJECT_OPERATOR","->",599],["T_STRING","getParentItem",599],"(",")",["T_OBJECT_OPERATOR","->",599],["T_STRING","getQty",599],"(",")",["T_WHITESPACE","\n                    ",599],":",["T_WHITESPACE"," ",600],["T_VARIABLE","$item",600],["T_OBJECT_OPERATOR","->",600],["T_STRING","getParentItem",600],"(",")",["T_OBJECT_OPERATOR","->",600],["T_STRING","getQty",600],"(",")",["T_WHITESPACE"," ",600],"*",["T_WHITESPACE"," ",600],["T_VARIABLE","$item",600],["T_OBJECT_OPERATOR","->",600],["T_STRING","getQty",600],"(",")",";",["T_WHITESPACE","\n            ",600],"}",["T_WHITESPACE","\n\n            ",601],["T_VARIABLE","$itemWeight",603],["T_WHITESPACE"," ",603],"=",["T_WHITESPACE"," ",603],["T_VARIABLE","$item",603],["T_OBJECT_OPERATOR","->",603],["T_STRING","getWeight",603],"(",")",";",["T_WHITESPACE","\n            ",603],["T_IF","if",604],["T_WHITESPACE"," ",604],"(",["T_VARIABLE","$item",604],["T_OBJECT_OPERATOR","->",604],["T_STRING","getIsQtyDecimal",604],"(",")",["T_WHITESPACE"," ",604],["T_BOOLEAN_AND","&&",604],["T_WHITESPACE"," ",604],["T_VARIABLE","$item",604],["T_OBJECT_OPERATOR","->",604],["T_STRING","getProductType",604],"(",")",["T_WHITESPACE"," ",604],["T_IS_NOT_EQUAL","!=",604],["T_WHITESPACE"," ",604],["T_STRING","Mage_Catalog_Model_Product_Type",604],["T_DOUBLE_COLON","::",604],["T_STRING","TYPE_BUNDLE",604],")",["T_WHITESPACE"," ",604],"{",["T_WHITESPACE","\n                ",604],["T_VARIABLE","$stockItem",605],["T_WHITESPACE"," ",605],"=",["T_WHITESPACE"," ",605],["T_VARIABLE","$item",605],["T_OBJECT_OPERATOR","->",605],["T_STRING","getProduct",605],"(",")",["T_OBJECT_OPERATOR","->",605],["T_STRING","getStockItem",605],"(",")",";",["T_WHITESPACE","\n                ",605],["T_IF","if",606],["T_WHITESPACE"," ",606],"(",["T_VARIABLE","$stockItem",606],["T_OBJECT_OPERATOR","->",606],["T_STRING","getIsDecimalDivided",606],"(",")",")",["T_WHITESPACE"," ",606],"{",["T_WHITESPACE","\n                   ",606],["T_IF","if",607],["T_WHITESPACE"," ",607],"(",["T_VARIABLE","$stockItem",607],["T_OBJECT_OPERATOR","->",607],["T_STRING","getEnableQtyIncrements",607],"(",")",["T_WHITESPACE"," ",607],["T_BOOLEAN_AND","&&",607],["T_WHITESPACE"," ",607],["T_VARIABLE","$stockItem",607],["T_OBJECT_OPERATOR","->",607],["T_STRING","getQtyIncrements",607],"(",")",")",["T_WHITESPACE"," ",607],"{",["T_WHITESPACE","\n                        ",607],["T_VARIABLE","$itemWeight",608],["T_WHITESPACE"," ",608],"=",["T_WHITESPACE"," ",608],["T_VARIABLE","$itemWeight",608],["T_WHITESPACE"," ",608],"*",["T_WHITESPACE"," ",608],["T_VARIABLE","$stockItem",608],["T_OBJECT_OPERATOR","->",608],["T_STRING","getQtyIncrements",608],"(",")",";",["T_WHITESPACE","\n                        ",608],["T_VARIABLE","$qty",609],["T_WHITESPACE","        ",609],"=",["T_WHITESPACE"," ",609],["T_STRING","round",609],"(","(",["T_VARIABLE","$item",609],["T_OBJECT_OPERATOR","->",609],["T_STRING","getWeight",609],"(",")",["T_WHITESPACE"," ",609],"\/",["T_WHITESPACE"," ",609],["T_VARIABLE","$itemWeight",609],")",["T_WHITESPACE"," ",609],"*",["T_WHITESPACE"," ",609],["T_VARIABLE","$qty",609],")",";",["T_WHITESPACE","\n                        ",609],["T_VARIABLE","$changeQty",610],["T_WHITESPACE","  ",610],"=",["T_WHITESPACE"," ",610],["T_STRING","false",610],";",["T_WHITESPACE","\n                   ",610],"}",["T_WHITESPACE"," ",611],["T_ELSE","else",611],["T_WHITESPACE"," ",611],"{",["T_WHITESPACE","\n                       ",611],["T_VARIABLE","$itemWeight",612],["T_WHITESPACE"," ",612],"=",["T_WHITESPACE"," ",612],["T_VARIABLE","$this",612],["T_OBJECT_OPERATOR","->",612],["T_STRING","_getWeight",612],"(",["T_VARIABLE","$itemWeight",612],["T_WHITESPACE"," ",612],"*",["T_WHITESPACE"," ",612],["T_VARIABLE","$item",612],["T_OBJECT_OPERATOR","->",612],["T_STRING","getQty",612],"(",")",")",";",["T_WHITESPACE","\n                       ",612],["T_VARIABLE","$maxWeight",613],["T_WHITESPACE","  ",613],"=",["T_WHITESPACE"," ",613],["T_VARIABLE","$this",613],["T_OBJECT_OPERATOR","->",613],["T_STRING","_getWeight",613],"(",["T_VARIABLE","$this",613],["T_OBJECT_OPERATOR","->",613],["T_STRING","_maxWeight",613],",",["T_WHITESPACE"," ",613],["T_STRING","true",613],")",";",["T_WHITESPACE","\n                       ",613],["T_IF","if",614],["T_WHITESPACE"," ",614],"(",["T_VARIABLE","$itemWeight",614],["T_WHITESPACE"," ",614],">",["T_WHITESPACE"," ",614],["T_VARIABLE","$maxWeight",614],")",["T_WHITESPACE"," ",614],"{",["T_WHITESPACE","\n                           ",614],["T_VARIABLE","$qtyItem",615],["T_WHITESPACE"," ",615],"=",["T_WHITESPACE"," ",615],["T_STRING","floor",615],"(",["T_VARIABLE","$itemWeight",615],["T_WHITESPACE"," ",615],"\/",["T_WHITESPACE"," ",615],["T_VARIABLE","$maxWeight",615],")",";",["T_WHITESPACE","\n                           ",615],["T_VARIABLE","$decimalItems",616],"[","]",["T_WHITESPACE"," ",616],"=",["T_WHITESPACE"," ",616],["T_ARRAY","array",616],"(",["T_CONSTANT_ENCAPSED_STRING","'weight'",616],["T_WHITESPACE"," ",616],["T_DOUBLE_ARROW","=>",616],["T_WHITESPACE"," ",616],["T_VARIABLE","$maxWeight",616],",",["T_WHITESPACE"," ",616],["T_CONSTANT_ENCAPSED_STRING","'qty'",616],["T_WHITESPACE"," ",616],["T_DOUBLE_ARROW","=>",616],["T_WHITESPACE"," ",616],["T_VARIABLE","$qtyItem",616],")",";",["T_WHITESPACE","\n                           ",616],["T_VARIABLE","$weightItem",617],["T_WHITESPACE"," ",617],"=",["T_WHITESPACE"," ",617],["T_STRING","Mage",617],["T_DOUBLE_COLON","::",617],["T_STRING","helper",617],"(",["T_CONSTANT_ENCAPSED_STRING","'core'",617],")",["T_OBJECT_OPERATOR","->",617],["T_STRING","getExactDivision",617],"(",["T_VARIABLE","$itemWeight",617],",",["T_WHITESPACE"," ",617],["T_VARIABLE","$maxWeight",617],")",";",["T_WHITESPACE","\n                           ",617],["T_IF","if",618],["T_WHITESPACE"," ",618],"(",["T_VARIABLE","$weightItem",618],")",["T_WHITESPACE"," ",618],"{",["T_WHITESPACE","\n                               ",618],["T_VARIABLE","$decimalItems",619],"[","]",["T_WHITESPACE"," ",619],"=",["T_WHITESPACE"," ",619],["T_ARRAY","array",619],"(",["T_CONSTANT_ENCAPSED_STRING","'weight'",619],["T_WHITESPACE"," ",619],["T_DOUBLE_ARROW","=>",619],["T_WHITESPACE"," ",619],["T_VARIABLE","$weightItem",619],",",["T_WHITESPACE"," ",619],["T_CONSTANT_ENCAPSED_STRING","'qty'",619],["T_WHITESPACE"," ",619],["T_DOUBLE_ARROW","=>",619],["T_WHITESPACE"," ",619],["T_LNUMBER","1",619],")",";",["T_WHITESPACE","\n                           ",619],"}",["T_WHITESPACE","\n                           ",620],["T_VARIABLE","$checkWeight",621],["T_WHITESPACE"," ",621],"=",["T_WHITESPACE"," ",621],["T_STRING","false",621],";",["T_WHITESPACE","\n                       ",621],"}",["T_WHITESPACE"," ",622],["T_ELSE","else",622],["T_WHITESPACE"," ",622],"{",["T_WHITESPACE","\n                           ",622],["T_VARIABLE","$itemWeight",623],["T_WHITESPACE"," ",623],"=",["T_WHITESPACE"," ",623],["T_VARIABLE","$itemWeight",623],["T_WHITESPACE"," ",623],"*",["T_WHITESPACE"," ",623],["T_VARIABLE","$item",623],["T_OBJECT_OPERATOR","->",623],["T_STRING","getQty",623],"(",")",";",["T_WHITESPACE","\n                       ",623],"}",["T_WHITESPACE","\n                   ",624],"}",["T_WHITESPACE","\n                ",625],"}",["T_WHITESPACE"," ",626],["T_ELSE","else",626],["T_WHITESPACE"," ",626],"{",["T_WHITESPACE","\n                    ",626],["T_VARIABLE","$itemWeight",627],["T_WHITESPACE"," ",627],"=",["T_WHITESPACE"," ",627],["T_VARIABLE","$itemWeight",627],["T_WHITESPACE"," ",627],"*",["T_WHITESPACE"," ",627],["T_VARIABLE","$item",627],["T_OBJECT_OPERATOR","->",627],["T_STRING","getQty",627],"(",")",";",["T_WHITESPACE","\n                ",627],"}",["T_WHITESPACE","\n            ",628],"}",["T_WHITESPACE","\n\n            ",629],["T_IF","if",631],["T_WHITESPACE"," ",631],"(",["T_VARIABLE","$checkWeight",631],["T_WHITESPACE"," ",631],["T_BOOLEAN_AND","&&",631],["T_WHITESPACE"," ",631],["T_VARIABLE","$this",631],["T_OBJECT_OPERATOR","->",631],["T_STRING","_getWeight",631],"(",["T_VARIABLE","$itemWeight",631],")",["T_WHITESPACE"," ",631],">",["T_WHITESPACE"," ",631],["T_VARIABLE","$this",631],["T_OBJECT_OPERATOR","->",631],["T_STRING","_getWeight",631],"(",["T_VARIABLE","$this",631],["T_OBJECT_OPERATOR","->",631],["T_STRING","_maxWeight",631],",",["T_WHITESPACE"," ",631],["T_STRING","true",631],")",")",["T_WHITESPACE"," ",631],"{",["T_WHITESPACE","\n                ",631],["T_RETURN","return",632],["T_WHITESPACE"," ",632],["T_ARRAY","array",632],"(",")",";",["T_WHITESPACE","\n            ",632],"}",["T_WHITESPACE","\n\n            ",633],["T_IF","if",635],["T_WHITESPACE"," ",635],"(",["T_VARIABLE","$changeQty",635],["T_WHITESPACE"," ",635],["T_BOOLEAN_AND","&&",635],["T_WHITESPACE"," ",635],"!",["T_VARIABLE","$item",635],["T_OBJECT_OPERATOR","->",635],["T_STRING","getParentItem",635],"(",")",["T_WHITESPACE"," ",635],["T_BOOLEAN_AND","&&",635],["T_WHITESPACE"," ",635],["T_VARIABLE","$item",635],["T_OBJECT_OPERATOR","->",635],["T_STRING","getIsQtyDecimal",635],"(",")",["T_WHITESPACE","\n                ",635],["T_BOOLEAN_AND","&&",636],["T_WHITESPACE"," ",636],["T_VARIABLE","$item",636],["T_OBJECT_OPERATOR","->",636],["T_STRING","getProductType",636],"(",")",["T_WHITESPACE"," ",636],["T_IS_NOT_EQUAL","!=",636],["T_WHITESPACE"," ",636],["T_STRING","Mage_Catalog_Model_Product_Type",636],["T_DOUBLE_COLON","::",636],["T_STRING","TYPE_BUNDLE",636],["T_WHITESPACE","\n            ",636],")",["T_WHITESPACE"," ",637],"{",["T_WHITESPACE","\n                ",637],["T_VARIABLE","$qty",638],["T_WHITESPACE"," ",638],"=",["T_WHITESPACE"," ",638],["T_LNUMBER","1",638],";",["T_WHITESPACE","\n            ",638],"}",["T_WHITESPACE","\n\n            ",639],["T_IF","if",641],["T_WHITESPACE"," ",641],"(","!",["T_EMPTY","empty",641],"(",["T_VARIABLE","$decimalItems",641],")",")",["T_WHITESPACE"," ",641],"{",["T_WHITESPACE","\n                ",641],["T_FOREACH","foreach",642],["T_WHITESPACE"," ",642],"(",["T_VARIABLE","$decimalItems",642],["T_WHITESPACE"," ",642],["T_AS","as",642],["T_WHITESPACE"," ",642],["T_VARIABLE","$decimalItem",642],")",["T_WHITESPACE"," ",642],"{",["T_WHITESPACE","\n                    ",642],["T_VARIABLE","$fullItems",643],["T_WHITESPACE"," ",643],"=",["T_WHITESPACE"," ",643],["T_STRING","array_merge",643],"(",["T_VARIABLE","$fullItems",643],",",["T_WHITESPACE","\n                        ",643],["T_STRING","array_fill",644],"(",["T_LNUMBER","0",644],",",["T_WHITESPACE"," ",644],["T_VARIABLE","$decimalItem",644],"[",["T_CONSTANT_ENCAPSED_STRING","'qty'",644],"]",["T_WHITESPACE"," ",644],"*",["T_WHITESPACE"," ",644],["T_VARIABLE","$qty",644],",",["T_WHITESPACE"," ",644],["T_VARIABLE","$decimalItem",644],"[",["T_CONSTANT_ENCAPSED_STRING","'weight'",644],"]",")",["T_WHITESPACE","\n                    ",644],")",";",["T_WHITESPACE","\n                ",645],"}",["T_WHITESPACE","\n            ",646],"}",["T_WHITESPACE"," ",647],["T_ELSE","else",647],["T_WHITESPACE"," ",647],"{",["T_WHITESPACE","\n                ",647],["T_VARIABLE","$fullItems",648],["T_WHITESPACE"," ",648],"=",["T_WHITESPACE"," ",648],["T_STRING","array_merge",648],"(",["T_VARIABLE","$fullItems",648],",",["T_WHITESPACE"," ",648],["T_STRING","array_fill",648],"(",["T_LNUMBER","0",648],",",["T_WHITESPACE"," ",648],["T_VARIABLE","$qty",648],",",["T_WHITESPACE"," ",648],["T_VARIABLE","$this",648],["T_OBJECT_OPERATOR","->",648],["T_STRING","_getWeight",648],"(",["T_VARIABLE","$itemWeight",648],")",")",")",";",["T_WHITESPACE","\n            ",648],"}",["T_WHITESPACE","\n        ",649],"}",["T_WHITESPACE","\n        ",650],["T_STRING","sort",651],"(",["T_VARIABLE","$fullItems",651],")",";",["T_WHITESPACE","\n\n        ",651],["T_RETURN","return",653],["T_WHITESPACE"," ",653],["T_VARIABLE","$fullItems",653],";",["T_WHITESPACE","\n    ",653],"}",["T_WHITESPACE","\n\n    ",654],["T_DOC_COMMENT","\/**\n     * Make pieces\n     *\n     * @param SimpleXMLElement $nodeBkgDetails\n     * @return void\n     *\/",656],["T_WHITESPACE","\n    ",661],["T_PROTECTED","protected",662],["T_WHITESPACE"," ",662],["T_FUNCTION","function",662],["T_WHITESPACE"," ",662],["T_STRING","_makePieces",662],"(",["T_STRING","SimpleXMLElement",662],["T_WHITESPACE"," ",662],["T_VARIABLE","$nodeBkgDetails",662],")",["T_WHITESPACE","\n    ",662],"{",["T_WHITESPACE","\n        ",663],["T_VARIABLE","$divideOrderWeight",664],["T_WHITESPACE"," ",664],"=",["T_WHITESPACE"," ",664],["T_STRING_CAST","(string)",664],["T_VARIABLE","$this",664],["T_OBJECT_OPERATOR","->",664],["T_STRING","getConfigData",664],"(",["T_CONSTANT_ENCAPSED_STRING","'divide_order_weight'",664],")",";",["T_WHITESPACE","\n        ",664],["T_VARIABLE","$nodePieces",665],["T_WHITESPACE"," ",665],"=",["T_WHITESPACE"," ",665],["T_VARIABLE","$nodeBkgDetails",665],["T_OBJECT_OPERATOR","->",665],["T_STRING","addChild",665],"(",["T_CONSTANT_ENCAPSED_STRING","'Pieces'",665],",",["T_WHITESPACE"," ",665],["T_CONSTANT_ENCAPSED_STRING","''",665],",",["T_WHITESPACE"," ",665],["T_CONSTANT_ENCAPSED_STRING","''",665],")",";",["T_WHITESPACE","\n        ",665],["T_VARIABLE","$items",666],["T_WHITESPACE"," ",666],"=",["T_WHITESPACE"," ",666],["T_VARIABLE","$this",666],["T_OBJECT_OPERATOR","->",666],["T_STRING","_getAllItems",666],"(",")",";",["T_WHITESPACE","\n        ",666],["T_VARIABLE","$numberOfPieces",667],["T_WHITESPACE"," ",667],"=",["T_WHITESPACE"," ",667],["T_LNUMBER","0",667],";",["T_WHITESPACE","\n\n        ",667],["T_IF","if",669],["T_WHITESPACE"," ",669],"(",["T_VARIABLE","$divideOrderWeight",669],["T_WHITESPACE"," ",669],["T_BOOLEAN_AND","&&",669],["T_WHITESPACE"," ",669],"!",["T_EMPTY","empty",669],"(",["T_VARIABLE","$items",669],")",")",["T_WHITESPACE"," ",669],"{",["T_WHITESPACE","\n            ",669],["T_VARIABLE","$maxWeight",670],["T_WHITESPACE"," ",670],"=",["T_WHITESPACE"," ",670],["T_VARIABLE","$this",670],["T_OBJECT_OPERATOR","->",670],["T_STRING","_getWeight",670],"(",["T_VARIABLE","$this",670],["T_OBJECT_OPERATOR","->",670],["T_STRING","_maxWeight",670],",",["T_WHITESPACE"," ",670],["T_STRING","true",670],")",";",["T_WHITESPACE","\n            ",670],["T_VARIABLE","$sumWeight",671],["T_WHITESPACE"," ",671],"=",["T_WHITESPACE"," ",671],["T_LNUMBER","0",671],";",["T_WHITESPACE","\n\n            ",671],["T_VARIABLE","$reverseOrderItems",673],["T_WHITESPACE"," ",673],"=",["T_WHITESPACE"," ",673],["T_VARIABLE","$items",673],";",["T_WHITESPACE","\n            ",673],["T_STRING","arsort",674],"(",["T_VARIABLE","$reverseOrderItems",674],")",";",["T_WHITESPACE","\n\n            ",674],["T_FOREACH","foreach",676],["T_WHITESPACE"," ",676],"(",["T_VARIABLE","$reverseOrderItems",676],["T_WHITESPACE"," ",676],["T_AS","as",676],["T_WHITESPACE"," ",676],["T_VARIABLE","$key",676],["T_WHITESPACE"," ",676],["T_DOUBLE_ARROW","=>",676],["T_WHITESPACE"," ",676],["T_VARIABLE","$weight",676],")",["T_WHITESPACE"," ",676],"{",["T_WHITESPACE","\n                ",676],["T_IF","if",677],["T_WHITESPACE"," ",677],"(","!",["T_ISSET","isset",677],"(",["T_VARIABLE","$items",677],"[",["T_VARIABLE","$key",677],"]",")",")",["T_WHITESPACE"," ",677],"{",["T_WHITESPACE","\n                    ",677],["T_CONTINUE","continue",678],";",["T_WHITESPACE","\n                ",678],"}",["T_WHITESPACE","\n                ",679],["T_UNSET","unset",680],"(",["T_VARIABLE","$items",680],"[",["T_VARIABLE","$key",680],"]",")",";",["T_WHITESPACE","\n                ",680],["T_VARIABLE","$sumWeight",681],["T_WHITESPACE"," ",681],"=",["T_WHITESPACE"," ",681],["T_VARIABLE","$weight",681],";",["T_WHITESPACE","\n                ",681],["T_FOREACH","foreach",682],["T_WHITESPACE"," ",682],"(",["T_VARIABLE","$items",682],["T_WHITESPACE"," ",682],["T_AS","as",682],["T_WHITESPACE"," ",682],["T_VARIABLE","$key",682],["T_WHITESPACE"," ",682],["T_DOUBLE_ARROW","=>",682],["T_WHITESPACE"," ",682],["T_VARIABLE","$weight",682],")",["T_WHITESPACE"," ",682],"{",["T_WHITESPACE","\n                    ",682],["T_IF","if",683],["T_WHITESPACE"," ",683],"(","(",["T_VARIABLE","$sumWeight",683],["T_WHITESPACE"," ",683],"+",["T_WHITESPACE"," ",683],["T_VARIABLE","$weight",683],")",["T_WHITESPACE"," ",683],"<",["T_WHITESPACE"," ",683],["T_VARIABLE","$maxWeight",683],")",["T_WHITESPACE"," ",683],"{",["T_WHITESPACE","\n                        ",683],["T_UNSET","unset",684],"(",["T_VARIABLE","$items",684],"[",["T_VARIABLE","$key",684],"]",")",";",["T_WHITESPACE","\n                        ",684],["T_VARIABLE","$sumWeight",685],["T_WHITESPACE"," ",685],["T_PLUS_EQUAL","+=",685],["T_WHITESPACE"," ",685],["T_VARIABLE","$weight",685],";",["T_WHITESPACE","\n                    ",685],"}",["T_WHITESPACE"," ",686],["T_ELSEIF","elseif",686],["T_WHITESPACE"," ",686],"(","(",["T_VARIABLE","$sumWeight",686],["T_WHITESPACE"," ",686],"+",["T_WHITESPACE"," ",686],["T_VARIABLE","$weight",686],")",["T_WHITESPACE"," ",686],">",["T_WHITESPACE"," ",686],["T_VARIABLE","$maxWeight",686],")",["T_WHITESPACE"," ",686],"{",["T_WHITESPACE","\n                        ",686],["T_VARIABLE","$numberOfPieces",687],["T_INC","++",687],";",["T_WHITESPACE","\n                        ",687],["T_VARIABLE","$nodePiece",688],["T_WHITESPACE"," ",688],"=",["T_WHITESPACE"," ",688],["T_VARIABLE","$nodePieces",688],["T_OBJECT_OPERATOR","->",688],["T_STRING","addChild",688],"(",["T_CONSTANT_ENCAPSED_STRING","'Piece'",688],",",["T_WHITESPACE"," ",688],["T_CONSTANT_ENCAPSED_STRING","''",688],",",["T_WHITESPACE"," ",688],["T_CONSTANT_ENCAPSED_STRING","''",688],")",";",["T_WHITESPACE","\n                        ",688],["T_VARIABLE","$nodePiece",689],["T_OBJECT_OPERATOR","->",689],["T_STRING","addChild",689],"(",["T_CONSTANT_ENCAPSED_STRING","'PieceID'",689],",",["T_WHITESPACE"," ",689],["T_VARIABLE","$numberOfPieces",689],")",";",["T_WHITESPACE","\n                        ",689],["T_VARIABLE","$this",690],["T_OBJECT_OPERATOR","->",690],["T_STRING","_addDimension",690],"(",["T_VARIABLE","$nodePiece",690],")",";",["T_WHITESPACE","\n                        ",690],["T_VARIABLE","$nodePiece",691],["T_OBJECT_OPERATOR","->",691],["T_STRING","addChild",691],"(",["T_CONSTANT_ENCAPSED_STRING","'Weight'",691],",",["T_WHITESPACE"," ",691],["T_VARIABLE","$sumWeight",691],")",";",["T_WHITESPACE","\n                        ",691],["T_BREAK","break",692],";",["T_WHITESPACE","\n                    ",692],"}",["T_WHITESPACE"," ",693],["T_ELSE","else",693],["T_WHITESPACE"," ",693],"{",["T_WHITESPACE","\n                        ",693],["T_UNSET","unset",694],"(",["T_VARIABLE","$items",694],"[",["T_VARIABLE","$key",694],"]",")",";",["T_WHITESPACE","\n                        ",694],["T_VARIABLE","$numberOfPieces",695],["T_INC","++",695],";",["T_WHITESPACE","\n                        ",695],["T_VARIABLE","$sumWeight",696],["T_WHITESPACE"," ",696],["T_PLUS_EQUAL","+=",696],["T_WHITESPACE"," ",696],["T_VARIABLE","$weight",696],";",["T_WHITESPACE","\n                        ",696],["T_VARIABLE","$nodePiece",697],["T_WHITESPACE"," ",697],"=",["T_WHITESPACE"," ",697],["T_VARIABLE","$nodePieces",697],["T_OBJECT_OPERATOR","->",697],["T_STRING","addChild",697],"(",["T_CONSTANT_ENCAPSED_STRING","'Piece'",697],",",["T_WHITESPACE"," ",697],["T_CONSTANT_ENCAPSED_STRING","''",697],",",["T_WHITESPACE"," ",697],["T_CONSTANT_ENCAPSED_STRING","''",697],")",";",["T_WHITESPACE","\n                        ",697],["T_VARIABLE","$nodePiece",698],["T_OBJECT_OPERATOR","->",698],["T_STRING","addChild",698],"(",["T_CONSTANT_ENCAPSED_STRING","'PieceID'",698],",",["T_WHITESPACE"," ",698],["T_VARIABLE","$numberOfPieces",698],")",";",["T_WHITESPACE","\n                        ",698],["T_VARIABLE","$this",699],["T_OBJECT_OPERATOR","->",699],["T_STRING","_addDimension",699],"(",["T_VARIABLE","$nodePiece",699],")",";",["T_WHITESPACE","\n                        ",699],["T_VARIABLE","$nodePiece",700],["T_OBJECT_OPERATOR","->",700],["T_STRING","addChild",700],"(",["T_CONSTANT_ENCAPSED_STRING","'Weight'",700],",",["T_WHITESPACE"," ",700],["T_VARIABLE","$sumWeight",700],")",";",["T_WHITESPACE","\n                        ",700],["T_VARIABLE","$sumWeight",701],["T_WHITESPACE"," ",701],"=",["T_WHITESPACE"," ",701],["T_LNUMBER","0",701],";",["T_WHITESPACE","\n                        ",701],["T_BREAK","break",702],";",["T_WHITESPACE","\n                    ",702],"}",["T_WHITESPACE","\n                ",703],"}",["T_WHITESPACE","\n            ",704],"}",["T_WHITESPACE","\n            ",705],["T_IF","if",706],["T_WHITESPACE"," ",706],"(",["T_VARIABLE","$sumWeight",706],["T_WHITESPACE"," ",706],">",["T_WHITESPACE"," ",706],["T_LNUMBER","0",706],")",["T_WHITESPACE"," ",706],"{",["T_WHITESPACE","\n                ",706],["T_VARIABLE","$numberOfPieces",707],["T_INC","++",707],";",["T_WHITESPACE","\n                ",707],["T_VARIABLE","$nodePiece",708],["T_WHITESPACE"," ",708],"=",["T_WHITESPACE"," ",708],["T_VARIABLE","$nodePieces",708],["T_OBJECT_OPERATOR","->",708],["T_STRING","addChild",708],"(",["T_CONSTANT_ENCAPSED_STRING","'Piece'",708],",",["T_WHITESPACE"," ",708],["T_CONSTANT_ENCAPSED_STRING","''",708],",",["T_WHITESPACE"," ",708],["T_CONSTANT_ENCAPSED_STRING","''",708],")",";",["T_WHITESPACE","\n                ",708],["T_VARIABLE","$nodePiece",709],["T_OBJECT_OPERATOR","->",709],["T_STRING","addChild",709],"(",["T_CONSTANT_ENCAPSED_STRING","'PieceID'",709],",",["T_WHITESPACE"," ",709],["T_VARIABLE","$numberOfPieces",709],")",";",["T_WHITESPACE","\n                ",709],["T_VARIABLE","$this",710],["T_OBJECT_OPERATOR","->",710],["T_STRING","_addDimension",710],"(",["T_VARIABLE","$nodePiece",710],")",";",["T_WHITESPACE","\n                ",710],["T_VARIABLE","$nodePiece",711],["T_OBJECT_OPERATOR","->",711],["T_STRING","addChild",711],"(",["T_CONSTANT_ENCAPSED_STRING","'Weight'",711],",",["T_WHITESPACE"," ",711],["T_VARIABLE","$sumWeight",711],")",";",["T_WHITESPACE","\n            ",711],"}",["T_WHITESPACE","\n        ",712],"}",["T_WHITESPACE"," ",713],["T_ELSE","else",713],["T_WHITESPACE"," ",713],"{",["T_WHITESPACE","\n            ",713],["T_VARIABLE","$nodePiece",714],["T_WHITESPACE"," ",714],"=",["T_WHITESPACE"," ",714],["T_VARIABLE","$nodePieces",714],["T_OBJECT_OPERATOR","->",714],["T_STRING","addChild",714],"(",["T_CONSTANT_ENCAPSED_STRING","'Piece'",714],",",["T_WHITESPACE"," ",714],["T_CONSTANT_ENCAPSED_STRING","''",714],",",["T_WHITESPACE"," ",714],["T_CONSTANT_ENCAPSED_STRING","''",714],")",";",["T_WHITESPACE","\n            ",714],["T_VARIABLE","$nodePiece",715],["T_OBJECT_OPERATOR","->",715],["T_STRING","addChild",715],"(",["T_CONSTANT_ENCAPSED_STRING","'PieceID'",715],",",["T_WHITESPACE"," ",715],["T_LNUMBER","1",715],")",";",["T_WHITESPACE","\n            ",715],["T_VARIABLE","$this",716],["T_OBJECT_OPERATOR","->",716],["T_STRING","_addDimension",716],"(",["T_VARIABLE","$nodePiece",716],")",";",["T_WHITESPACE","\n            ",716],["T_VARIABLE","$nodePiece",717],["T_OBJECT_OPERATOR","->",717],["T_STRING","addChild",717],"(",["T_CONSTANT_ENCAPSED_STRING","'Weight'",717],",",["T_WHITESPACE"," ",717],["T_VARIABLE","$this",717],["T_OBJECT_OPERATOR","->",717],["T_STRING","_getWeight",717],"(",["T_VARIABLE","$this",717],["T_OBJECT_OPERATOR","->",717],["T_STRING","_rawRequest",717],["T_OBJECT_OPERATOR","->",717],["T_STRING","getWeight",717],"(",")",")",")",";",["T_WHITESPACE","\n        ",717],"}",["T_WHITESPACE","\n\n        ",718],["T_VARIABLE","$handlingAction",720],["T_WHITESPACE"," ",720],"=",["T_WHITESPACE"," ",720],["T_VARIABLE","$this",720],["T_OBJECT_OPERATOR","->",720],["T_STRING","getConfigData",720],"(",["T_CONSTANT_ENCAPSED_STRING","'handling_action'",720],")",";",["T_WHITESPACE","\n        ",720],["T_IF","if",721],["T_WHITESPACE"," ",721],"(",["T_VARIABLE","$handlingAction",721],["T_WHITESPACE"," ",721],["T_IS_EQUAL","==",721],["T_WHITESPACE"," ",721],["T_STRING","Mage_Shipping_Model_Carrier_Abstract",721],["T_DOUBLE_COLON","::",721],["T_STRING","HANDLING_ACTION_PERORDER",721],["T_WHITESPACE"," ",721],["T_BOOLEAN_OR","||",721],["T_WHITESPACE"," ",721],"!",["T_VARIABLE","$numberOfPieces",721],")",["T_WHITESPACE"," ",721],"{",["T_WHITESPACE","\n            ",721],["T_VARIABLE","$numberOfPieces",722],["T_WHITESPACE"," ",722],"=",["T_WHITESPACE"," ",722],["T_LNUMBER","1",722],";",["T_WHITESPACE","\n        ",722],"}",["T_WHITESPACE","\n        ",723],["T_VARIABLE","$this",724],["T_OBJECT_OPERATOR","->",724],["T_STRING","_numBoxes",724],["T_WHITESPACE"," ",724],"=",["T_WHITESPACE"," ",724],["T_VARIABLE","$numberOfPieces",724],";",["T_WHITESPACE","\n    ",724],"}",["T_WHITESPACE","\n\n    ",725],["T_DOC_COMMENT","\/**\n     * Convert item dimension to needed dimension based on config dimension unit of measure\n     *\n     * @param float $dimension\n     * @param string|bool $configWeightUnit\n     * @return float\n     *\/",727],["T_WHITESPACE","\n    ",733],["T_PROTECTED","protected",734],["T_WHITESPACE"," ",734],["T_FUNCTION","function",734],["T_WHITESPACE"," ",734],["T_STRING","_getDimension",734],"(",["T_VARIABLE","$dimension",734],",",["T_WHITESPACE"," ",734],["T_VARIABLE","$configWeightUnit",734],["T_WHITESPACE"," ",734],"=",["T_WHITESPACE"," ",734],["T_STRING","false",734],")",["T_WHITESPACE","\n    ",734],"{",["T_WHITESPACE","\n        ",735],["T_IF","if",736],["T_WHITESPACE"," ",736],"(","!",["T_VARIABLE","$configWeightUnit",736],")",["T_WHITESPACE"," ",736],"{",["T_WHITESPACE","\n            ",736],["T_VARIABLE","$configWeightUnit",737],["T_WHITESPACE"," ",737],"=",["T_WHITESPACE"," ",737],["T_VARIABLE","$this",737],["T_OBJECT_OPERATOR","->",737],["T_STRING","getCode",737],"(",["T_CONSTANT_ENCAPSED_STRING","'dimensions_variables'",737],",",["T_WHITESPACE"," ",737],["T_STRING_CAST","(string)",737],["T_VARIABLE","$this",737],["T_OBJECT_OPERATOR","->",737],["T_STRING","getConfigData",737],"(",["T_CONSTANT_ENCAPSED_STRING","'unit_of_measure'",737],")",")",";",["T_WHITESPACE","\n        ",737],"}",["T_WHITESPACE"," ",738],["T_ELSE","else",738],["T_WHITESPACE"," ",738],"{",["T_WHITESPACE","\n            ",738],["T_VARIABLE","$configWeightUnit",739],["T_WHITESPACE"," ",739],"=",["T_WHITESPACE"," ",739],["T_VARIABLE","$this",739],["T_OBJECT_OPERATOR","->",739],["T_STRING","getCode",739],"(",["T_CONSTANT_ENCAPSED_STRING","'dimensions_variables'",739],",",["T_WHITESPACE"," ",739],["T_VARIABLE","$configWeightUnit",739],")",";",["T_WHITESPACE","\n        ",739],"}",["T_WHITESPACE","\n\n        ",740],["T_IF","if",742],["T_WHITESPACE"," ",742],"(",["T_VARIABLE","$configWeightUnit",742],["T_WHITESPACE"," ",742],["T_IS_EQUAL","==",742],["T_WHITESPACE"," ",742],["T_STRING","Zend_Measure_Weight",742],["T_DOUBLE_COLON","::",742],["T_STRING","POUND",742],")",["T_WHITESPACE"," ",742],"{",["T_WHITESPACE","\n            ",742],["T_VARIABLE","$configDimensionUnit",743],["T_WHITESPACE"," ",743],"=",["T_WHITESPACE"," ",743],["T_STRING","Zend_Measure_Length",743],["T_DOUBLE_COLON","::",743],["T_STRING","INCH",743],";",["T_WHITESPACE","\n        ",743],"}",["T_WHITESPACE"," ",744],["T_ELSE","else",744],["T_WHITESPACE"," ",744],"{",["T_WHITESPACE","\n            ",744],["T_VARIABLE","$configDimensionUnit",745],["T_WHITESPACE"," ",745],"=",["T_WHITESPACE"," ",745],["T_STRING","Zend_Measure_Length",745],["T_DOUBLE_COLON","::",745],["T_STRING","CENTIMETER",745],";",["T_WHITESPACE","\n        ",745],"}",["T_WHITESPACE","\n\n        ",746],["T_VARIABLE","$countryDimensionUnit",748],["T_WHITESPACE"," ",748],"=",["T_WHITESPACE"," ",748],["T_VARIABLE","$this",748],["T_OBJECT_OPERATOR","->",748],["T_STRING","getCode",748],"(",["T_CONSTANT_ENCAPSED_STRING","'dimensions_variables'",748],",",["T_WHITESPACE"," ",748],["T_VARIABLE","$this",748],["T_OBJECT_OPERATOR","->",748],["T_STRING","_getDimensionUnit",748],"(",")",")",";",["T_WHITESPACE","\n\n        ",748],["T_IF","if",750],["T_WHITESPACE"," ",750],"(",["T_VARIABLE","$configDimensionUnit",750],["T_WHITESPACE"," ",750],["T_IS_NOT_EQUAL","!=",750],["T_WHITESPACE"," ",750],["T_VARIABLE","$countryDimensionUnit",750],")",["T_WHITESPACE"," ",750],"{",["T_WHITESPACE","\n            ",750],["T_VARIABLE","$dimension",751],["T_WHITESPACE"," ",751],"=",["T_WHITESPACE"," ",751],["T_STRING","Mage",751],["T_DOUBLE_COLON","::",751],["T_STRING","helper",751],"(",["T_CONSTANT_ENCAPSED_STRING","'usa'",751],")",["T_OBJECT_OPERATOR","->",751],["T_STRING","convertMeasureDimension",751],"(",["T_WHITESPACE","\n                ",751],["T_STRING","round",752],"(",["T_VARIABLE","$dimension",752],",",["T_WHITESPACE"," ",752],["T_LNUMBER","3",752],")",",",["T_WHITESPACE","\n                ",752],["T_VARIABLE","$configDimensionUnit",753],",",["T_WHITESPACE","\n                ",753],["T_VARIABLE","$countryDimensionUnit",754],["T_WHITESPACE","\n            ",754],")",";",["T_WHITESPACE","\n        ",755],"}",["T_WHITESPACE","\n\n        ",756],["T_RETURN","return",758],["T_WHITESPACE"," ",758],["T_STRING","round",758],"(",["T_VARIABLE","$dimension",758],",",["T_WHITESPACE"," ",758],["T_LNUMBER","3",758],")",";",["T_WHITESPACE","\n    ",758],"}",["T_WHITESPACE","\n\n    ",759],["T_DOC_COMMENT","\/**\n     * Add dimension to piece\n     *\n     * @param SimpleXMLElement $nodePiece\n     * @return void\n     *\/",761],["T_WHITESPACE","\n    ",766],["T_PROTECTED","protected",767],["T_WHITESPACE"," ",767],["T_FUNCTION","function",767],["T_WHITESPACE"," ",767],["T_STRING","_addDimension",767],"(",["T_VARIABLE","$nodePiece",767],")",["T_WHITESPACE","\n    ",767],"{",["T_WHITESPACE","\n        ",768],["T_VARIABLE","$sizeChecker",769],["T_WHITESPACE"," ",769],"=",["T_WHITESPACE"," ",769],["T_STRING_CAST","(string)",769],["T_VARIABLE","$this",769],["T_OBJECT_OPERATOR","->",769],["T_STRING","getConfigData",769],"(",["T_CONSTANT_ENCAPSED_STRING","'size'",769],")",";",["T_WHITESPACE","\n\n        ",769],["T_VARIABLE","$height",771],["T_WHITESPACE"," ",771],"=",["T_WHITESPACE"," ",771],["T_VARIABLE","$this",771],["T_OBJECT_OPERATOR","->",771],["T_STRING","_getDimension",771],"(",["T_STRING_CAST","(string)",771],["T_VARIABLE","$this",771],["T_OBJECT_OPERATOR","->",771],["T_STRING","getConfigData",771],"(",["T_CONSTANT_ENCAPSED_STRING","'height'",771],")",")",";",["T_WHITESPACE","\n        ",771],["T_VARIABLE","$depth",772],["T_WHITESPACE"," ",772],"=",["T_WHITESPACE"," ",772],["T_VARIABLE","$this",772],["T_OBJECT_OPERATOR","->",772],["T_STRING","_getDimension",772],"(",["T_STRING_CAST","(string)",772],["T_VARIABLE","$this",772],["T_OBJECT_OPERATOR","->",772],["T_STRING","getConfigData",772],"(",["T_CONSTANT_ENCAPSED_STRING","'depth'",772],")",")",";",["T_WHITESPACE","\n        ",772],["T_VARIABLE","$width",773],["T_WHITESPACE"," ",773],"=",["T_WHITESPACE"," ",773],["T_VARIABLE","$this",773],["T_OBJECT_OPERATOR","->",773],["T_STRING","_getDimension",773],"(",["T_STRING_CAST","(string)",773],["T_VARIABLE","$this",773],["T_OBJECT_OPERATOR","->",773],["T_STRING","getConfigData",773],"(",["T_CONSTANT_ENCAPSED_STRING","'width'",773],")",")",";",["T_WHITESPACE","\n\n        ",773],["T_IF","if",775],["T_WHITESPACE"," ",775],"(",["T_VARIABLE","$sizeChecker",775],["T_WHITESPACE"," ",775],["T_BOOLEAN_AND","&&",775],["T_WHITESPACE"," ",775],["T_VARIABLE","$height",775],["T_WHITESPACE"," ",775],["T_BOOLEAN_AND","&&",775],["T_WHITESPACE"," ",775],["T_VARIABLE","$depth",775],["T_WHITESPACE"," ",775],["T_BOOLEAN_AND","&&",775],["T_WHITESPACE"," ",775],["T_VARIABLE","$width",775],")",["T_WHITESPACE"," ",775],"{",["T_WHITESPACE","\n            ",775],["T_VARIABLE","$nodePiece",776],["T_OBJECT_OPERATOR","->",776],["T_STRING","addChild",776],"(",["T_CONSTANT_ENCAPSED_STRING","'Height'",776],",",["T_WHITESPACE"," ",776],["T_VARIABLE","$height",776],")",";",["T_WHITESPACE","\n            ",776],["T_VARIABLE","$nodePiece",777],["T_OBJECT_OPERATOR","->",777],["T_STRING","addChild",777],"(",["T_CONSTANT_ENCAPSED_STRING","'Depth'",777],",",["T_WHITESPACE"," ",777],["T_VARIABLE","$depth",777],")",";",["T_WHITESPACE","\n            ",777],["T_VARIABLE","$nodePiece",778],["T_OBJECT_OPERATOR","->",778],["T_STRING","addChild",778],"(",["T_CONSTANT_ENCAPSED_STRING","'Width'",778],",",["T_WHITESPACE"," ",778],["T_VARIABLE","$width",778],")",";",["T_WHITESPACE","\n        ",778],"}",["T_WHITESPACE","\n    ",779],"}",["T_WHITESPACE","\n\n    ",780],["T_DOC_COMMENT","\/**\n     * Get shipping quotes\n     *\n     * @return Mage_Core_Model_Abstract|Mage_Shipping_Model_Rate_Result\n     *\/",782],["T_WHITESPACE","\n    ",786],["T_PROTECTED","protected",787],["T_WHITESPACE"," ",787],["T_FUNCTION","function",787],["T_WHITESPACE"," ",787],["T_STRING","_getQuotes",787],"(",")",["T_WHITESPACE","\n    ",787],"{",["T_WHITESPACE","\n        ",788],["T_VARIABLE","$responseBody",789],["T_WHITESPACE"," ",789],"=",["T_WHITESPACE"," ",789],["T_CONSTANT_ENCAPSED_STRING","''",789],";",["T_WHITESPACE","\n        ",789],["T_TRY","try",790],["T_WHITESPACE"," ",790],"{",["T_WHITESPACE","\n            ",790],["T_VARIABLE","$debugData",791],["T_WHITESPACE"," ",791],"=",["T_WHITESPACE"," ",791],["T_ARRAY","array",791],"(",")",";",["T_WHITESPACE","\n            ",791],["T_FOR","for",792],["T_WHITESPACE"," ",792],"(",["T_VARIABLE","$offset",792],["T_WHITESPACE"," ",792],"=",["T_WHITESPACE"," ",792],["T_LNUMBER","0",792],";",["T_WHITESPACE"," ",792],["T_VARIABLE","$offset",792],["T_WHITESPACE"," ",792],["T_IS_SMALLER_OR_EQUAL","<=",792],["T_WHITESPACE"," ",792],["T_STRING","self",792],["T_DOUBLE_COLON","::",792],["T_STRING","UNAVAILABLE_DATE_LOOK_FORWARD",792],";",["T_WHITESPACE"," ",792],["T_VARIABLE","$offset",792],["T_INC","++",792],")",["T_WHITESPACE"," ",792],"{",["T_WHITESPACE","\n                ",792],["T_VARIABLE","$debugData",793],"[",["T_CONSTANT_ENCAPSED_STRING","'try-'",793],["T_WHITESPACE"," ",793],".",["T_WHITESPACE"," ",793],["T_VARIABLE","$offset",793],"]",["T_WHITESPACE"," ",793],"=",["T_WHITESPACE"," ",793],["T_ARRAY","array",793],"(",")",";",["T_WHITESPACE","\n                ",793],["T_VARIABLE","$debugPoint",794],["T_WHITESPACE"," ",794],"=",["T_WHITESPACE"," ",794],"&",["T_VARIABLE","$debugData",794],"[",["T_CONSTANT_ENCAPSED_STRING","'try-'",794],["T_WHITESPACE"," ",794],".",["T_WHITESPACE"," ",794],["T_VARIABLE","$offset",794],"]",";",["T_WHITESPACE","\n\n                ",794],["T_VARIABLE","$requestXml",796],["T_WHITESPACE"," ",796],"=",["T_WHITESPACE"," ",796],["T_VARIABLE","$this",796],["T_OBJECT_OPERATOR","->",796],["T_STRING","_buildQuotesRequestXml",796],"(",")",";",["T_WHITESPACE","\n                ",796],["T_VARIABLE","$date",797],["T_WHITESPACE"," ",797],"=",["T_WHITESPACE"," ",797],["T_STRING","date",797],"(",["T_STRING","self",797],["T_DOUBLE_COLON","::",797],["T_STRING","REQUEST_DATE_FORMAT",797],",",["T_WHITESPACE"," ",797],["T_STRING","strtotime",797],"(",["T_VARIABLE","$this",797],["T_OBJECT_OPERATOR","->",797],["T_STRING","_getShipDate",797],"(",")",["T_WHITESPACE"," ",797],".",["T_WHITESPACE"," ",797],"\"",["T_ENCAPSED_AND_WHITESPACE"," +",797],["T_VARIABLE","$offset",797],["T_ENCAPSED_AND_WHITESPACE"," days",797],"\"",")",")",";",["T_WHITESPACE","\n                ",797],["T_VARIABLE","$this",798],["T_OBJECT_OPERATOR","->",798],["T_STRING","_setQuotesRequestXmlDate",798],"(",["T_VARIABLE","$requestXml",798],",",["T_WHITESPACE"," ",798],["T_VARIABLE","$date",798],")",";",["T_WHITESPACE","\n\n                ",798],["T_VARIABLE","$request",800],["T_WHITESPACE"," ",800],"=",["T_WHITESPACE"," ",800],["T_VARIABLE","$requestXml",800],["T_OBJECT_OPERATOR","->",800],["T_STRING","asXML",800],"(",")",";",["T_WHITESPACE","\n                ",800],["T_VARIABLE","$debugPoint",801],"[",["T_CONSTANT_ENCAPSED_STRING","'request'",801],"]",["T_WHITESPACE"," ",801],"=",["T_WHITESPACE"," ",801],["T_VARIABLE","$request",801],";",["T_WHITESPACE","\n                ",801],["T_VARIABLE","$responseBody",802],["T_WHITESPACE"," ",802],"=",["T_WHITESPACE"," ",802],["T_VARIABLE","$this",802],["T_OBJECT_OPERATOR","->",802],["T_STRING","_getCachedQuotes",802],"(",["T_VARIABLE","$request",802],")",";",["T_WHITESPACE","\n\n                ",802],["T_IF","if",804],["T_WHITESPACE"," ",804],"(",["T_VARIABLE","$debugPoint",804],"[",["T_CONSTANT_ENCAPSED_STRING","'from_cache'",804],"]",["T_WHITESPACE"," ",804],"=",["T_WHITESPACE"," ",804],"(",["T_VARIABLE","$responseBody",804],["T_WHITESPACE"," ",804],["T_IS_IDENTICAL","===",804],["T_WHITESPACE"," ",804],["T_STRING","null",804],")",")",["T_WHITESPACE"," ",804],"{",["T_WHITESPACE","\n                    ",804],["T_VARIABLE","$responseBody",805],["T_WHITESPACE"," ",805],"=",["T_WHITESPACE"," ",805],["T_VARIABLE","$this",805],["T_OBJECT_OPERATOR","->",805],["T_STRING","_getQuotesFromServer",805],"(",["T_VARIABLE","$request",805],")",";",["T_WHITESPACE","\n                ",805],"}",["T_WHITESPACE","\n\n                ",806],["T_VARIABLE","$debugPoint",808],"[",["T_CONSTANT_ENCAPSED_STRING","'response'",808],"]",["T_WHITESPACE"," ",808],"=",["T_WHITESPACE"," ",808],["T_VARIABLE","$responseBody",808],";",["T_WHITESPACE","\n\n                ",808],["T_VARIABLE","$bodyXml",810],["T_WHITESPACE"," ",810],"=",["T_WHITESPACE"," ",810],["T_NEW","new",810],["T_WHITESPACE"," ",810],["T_STRING","SimpleXMLElement",810],"(",["T_VARIABLE","$responseBody",810],")",";",["T_WHITESPACE","\n                ",810],["T_VARIABLE","$code",811],["T_WHITESPACE"," ",811],"=",["T_WHITESPACE"," ",811],["T_VARIABLE","$bodyXml",811],["T_OBJECT_OPERATOR","->",811],["T_STRING","xpath",811],"(",["T_CONSTANT_ENCAPSED_STRING","'\/\/GetQuoteResponse\/Note\/Condition\/ConditionCode'",811],")",";",["T_WHITESPACE","\n                ",811],["T_IF","if",812],["T_WHITESPACE"," ",812],"(",["T_ISSET","isset",812],"(",["T_VARIABLE","$code",812],"[",["T_LNUMBER","0",812],"]",")",["T_WHITESPACE"," ",812],["T_BOOLEAN_AND","&&",812],["T_WHITESPACE"," ",812],["T_INT_CAST","(int)",812],["T_VARIABLE","$code",812],"[",["T_LNUMBER","0",812],"]",["T_WHITESPACE"," ",812],["T_IS_EQUAL","==",812],["T_WHITESPACE"," ",812],["T_STRING","self",812],["T_DOUBLE_COLON","::",812],["T_STRING","CONDITION_CODE_SERVICE_DATE_UNAVAILABLE",812],")",["T_WHITESPACE"," ",812],"{",["T_WHITESPACE","\n                    ",812],["T_VARIABLE","$debugPoint",813],"[",["T_CONSTANT_ENCAPSED_STRING","'info'",813],"]",["T_WHITESPACE"," ",813],"=",["T_WHITESPACE"," ",813],["T_STRING","sprintf",813],"(",["T_WHITESPACE","\n                        ",813],["T_STRING","Mage",814],["T_DOUBLE_COLON","::",814],["T_STRING","helper",814],"(",["T_CONSTANT_ENCAPSED_STRING","'usa'",814],")",["T_OBJECT_OPERATOR","->",814],["T_STRING","__",814],"(",["T_CONSTANT_ENCAPSED_STRING","\"DHL service is not available at %s date\"",814],")",",",["T_WHITESPACE","\n                        ",814],["T_VARIABLE","$date",815],["T_WHITESPACE","\n                    ",815],")",";",["T_WHITESPACE","\n                ",816],"}",["T_WHITESPACE"," ",817],["T_ELSE","else",817],["T_WHITESPACE"," ",817],"{",["T_WHITESPACE","\n                    ",817],["T_BREAK","break",818],";",["T_WHITESPACE","\n                ",818],"}",["T_WHITESPACE","\n\n                ",819],["T_VARIABLE","$this",821],["T_OBJECT_OPERATOR","->",821],["T_STRING","_setCachedQuotes",821],"(",["T_VARIABLE","$request",821],",",["T_WHITESPACE"," ",821],["T_VARIABLE","$responseBody",821],")",";",["T_WHITESPACE","\n            ",821],"}",["T_WHITESPACE","\n            ",822],["T_VARIABLE","$this",823],["T_OBJECT_OPERATOR","->",823],["T_STRING","_debug",823],"(",["T_VARIABLE","$debugData",823],")",";",["T_WHITESPACE","\n        ",823],"}",["T_WHITESPACE"," ",824],["T_CATCH","catch",824],["T_WHITESPACE"," ",824],"(",["T_STRING","Exception",824],["T_WHITESPACE"," ",824],["T_VARIABLE","$e",824],")",["T_WHITESPACE"," ",824],"{",["T_WHITESPACE","\n            ",824],["T_VARIABLE","$this",825],["T_OBJECT_OPERATOR","->",825],["T_STRING","_errors",825],"[",["T_VARIABLE","$e",825],["T_OBJECT_OPERATOR","->",825],["T_STRING","getCode",825],"(",")","]",["T_WHITESPACE"," ",825],"=",["T_WHITESPACE"," ",825],["T_VARIABLE","$e",825],["T_OBJECT_OPERATOR","->",825],["T_STRING","getMessage",825],"(",")",";",["T_WHITESPACE","\n        ",825],"}",["T_WHITESPACE","\n        ",826],["T_RETURN","return",827],["T_WHITESPACE"," ",827],["T_VARIABLE","$this",827],["T_OBJECT_OPERATOR","->",827],["T_STRING","_parseResponse",827],"(",["T_VARIABLE","$responseBody",827],")",";",["T_WHITESPACE","\n    ",827],"}",["T_WHITESPACE","\n\n    ",828],["T_DOC_COMMENT","\/**\n     * Get shipping quotes from DHL service\n     *\n     * @param string $request\n     * @return string\n     *\/",830],["T_WHITESPACE","\n    ",835],["T_PROTECTED","protected",836],["T_WHITESPACE"," ",836],["T_FUNCTION","function",836],["T_WHITESPACE"," ",836],["T_STRING","_getQuotesFromServer",836],"(",["T_VARIABLE","$request",836],")",["T_WHITESPACE","\n    ",836],"{",["T_WHITESPACE","\n        ",837],["T_VARIABLE","$client",838],["T_WHITESPACE"," ",838],"=",["T_WHITESPACE"," ",838],["T_NEW","new",838],["T_WHITESPACE"," ",838],["T_STRING","Varien_Http_Client",838],"(",")",";",["T_WHITESPACE","\n        ",838],["T_VARIABLE","$client",839],["T_OBJECT_OPERATOR","->",839],["T_STRING","setUri",839],"(",["T_STRING_CAST","(string)",839],["T_VARIABLE","$this",839],["T_OBJECT_OPERATOR","->",839],["T_STRING","getConfigData",839],"(",["T_CONSTANT_ENCAPSED_STRING","'gateway_url'",839],")",")",";",["T_WHITESPACE","\n        ",839],["T_VARIABLE","$client",840],["T_OBJECT_OPERATOR","->",840],["T_STRING","setConfig",840],"(",["T_ARRAY","array",840],"(",["T_WHITESPACE","\n            ",840],["T_CONSTANT_ENCAPSED_STRING","'maxredirects'",841],["T_WHITESPACE"," ",841],["T_DOUBLE_ARROW","=>",841],["T_WHITESPACE"," ",841],["T_LNUMBER","0",841],",",["T_WHITESPACE","\n            ",841],["T_CONSTANT_ENCAPSED_STRING","'timeout'",842],["T_WHITESPACE"," ",842],["T_DOUBLE_ARROW","=>",842],["T_WHITESPACE"," ",842],["T_LNUMBER","30",842],",",["T_WHITESPACE","\n            ",842],["T_CONSTANT_ENCAPSED_STRING","'verifypeer'",843],["T_WHITESPACE"," ",843],["T_DOUBLE_ARROW","=>",843],["T_WHITESPACE"," ",843],["T_VARIABLE","$this",843],["T_OBJECT_OPERATOR","->",843],["T_STRING","getConfigFlag",843],"(",["T_CONSTANT_ENCAPSED_STRING","'verify_peer'",843],")",",",["T_WHITESPACE","\n            ",843],["T_CONSTANT_ENCAPSED_STRING","'verifyhost'",844],["T_WHITESPACE"," ",844],["T_DOUBLE_ARROW","=>",844],["T_WHITESPACE"," ",844],["T_LNUMBER","2",844],",",["T_WHITESPACE","\n        ",844],")",")",";",["T_WHITESPACE","\n        ",845],["T_VARIABLE","$client",846],["T_OBJECT_OPERATOR","->",846],["T_STRING","setRawData",846],"(",["T_STRING","utf8_encode",846],"(",["T_VARIABLE","$request",846],")",")",";",["T_WHITESPACE","\n        ",846],["T_RETURN","return",847],["T_WHITESPACE"," ",847],["T_VARIABLE","$client",847],["T_OBJECT_OPERATOR","->",847],["T_STRING","request",847],"(",["T_STRING","Varien_Http_Client",847],["T_DOUBLE_COLON","::",847],["T_STRING","POST",847],")",["T_OBJECT_OPERATOR","->",847],["T_STRING","getBody",847],"(",")",";",["T_WHITESPACE","\n    ",847],"}",["T_WHITESPACE","\n\n    ",848],["T_DOC_COMMENT","\/**\n     * Build qoutes request XML object\n     *\n     * @return SimpleXMLElement\n     *\/",850],["T_WHITESPACE","\n    ",854],["T_PROTECTED","protected",855],["T_WHITESPACE"," ",855],["T_FUNCTION","function",855],["T_WHITESPACE"," ",855],["T_STRING","_buildQuotesRequestXml",855],"(",")",["T_WHITESPACE","\n    ",855],"{",["T_WHITESPACE","\n        ",856],["T_VARIABLE","$rawRequest",857],["T_WHITESPACE"," ",857],"=",["T_WHITESPACE"," ",857],["T_VARIABLE","$this",857],["T_OBJECT_OPERATOR","->",857],["T_STRING","_rawRequest",857],";",["T_WHITESPACE","\n        ",857],["T_VARIABLE","$xmlStr",858],["T_WHITESPACE"," ",858],"=",["T_WHITESPACE"," ",858],["T_CONSTANT_ENCAPSED_STRING","'<?xml version = \"1.0\" encoding = \"UTF-8\"?>'",858],["T_WHITESPACE","\n            ",858],".",["T_WHITESPACE"," ",859],["T_CONSTANT_ENCAPSED_STRING","'<p:DCTRequest xmlns:p=\"http:\/\/www.dhl.com\" xmlns:p1=\"http:\/\/www.dhl.com\/datatypes\" '",859],["T_WHITESPACE","\n            ",859],".",["T_WHITESPACE"," ",860],["T_CONSTANT_ENCAPSED_STRING","'xmlns:p2=\"http:\/\/www.dhl.com\/DCTRequestdatatypes\" '",860],["T_WHITESPACE","\n            ",860],".",["T_WHITESPACE"," ",861],["T_CONSTANT_ENCAPSED_STRING","'xmlns:xsi=\"http:\/\/www.w3.org\/2001\/XMLSchema-instance\" '",861],["T_WHITESPACE","\n            ",861],".",["T_WHITESPACE"," ",862],["T_CONSTANT_ENCAPSED_STRING","'xsi:schemaLocation=\"http:\/\/www.dhl.com DCT-req.xsd \"\/>'",862],";",["T_WHITESPACE","\n        ",862],["T_VARIABLE","$xml",863],["T_WHITESPACE"," ",863],"=",["T_WHITESPACE"," ",863],["T_NEW","new",863],["T_WHITESPACE"," ",863],["T_STRING","SimpleXMLElement",863],"(",["T_VARIABLE","$xmlStr",863],")",";",["T_WHITESPACE","\n        ",863],["T_VARIABLE","$nodeGetQuote",864],["T_WHITESPACE"," ",864],"=",["T_WHITESPACE"," ",864],["T_VARIABLE","$xml",864],["T_OBJECT_OPERATOR","->",864],["T_STRING","addChild",864],"(",["T_CONSTANT_ENCAPSED_STRING","'GetQuote'",864],",",["T_WHITESPACE"," ",864],["T_CONSTANT_ENCAPSED_STRING","''",864],",",["T_WHITESPACE"," ",864],["T_CONSTANT_ENCAPSED_STRING","''",864],")",";",["T_WHITESPACE","\n        ",864],["T_VARIABLE","$nodeRequest",865],["T_WHITESPACE"," ",865],"=",["T_WHITESPACE"," ",865],["T_VARIABLE","$nodeGetQuote",865],["T_OBJECT_OPERATOR","->",865],["T_STRING","addChild",865],"(",["T_CONSTANT_ENCAPSED_STRING","'Request'",865],")",";",["T_WHITESPACE","\n\n        ",865],["T_VARIABLE","$nodeServiceHeader",867],["T_WHITESPACE"," ",867],"=",["T_WHITESPACE"," ",867],["T_VARIABLE","$nodeRequest",867],["T_OBJECT_OPERATOR","->",867],["T_STRING","addChild",867],"(",["T_CONSTANT_ENCAPSED_STRING","'ServiceHeader'",867],")",";",["T_WHITESPACE","\n        ",867],["T_VARIABLE","$nodeServiceHeader",868],["T_OBJECT_OPERATOR","->",868],["T_STRING","addChild",868],"(",["T_CONSTANT_ENCAPSED_STRING","'SiteID'",868],",",["T_WHITESPACE"," ",868],["T_STRING_CAST","(string)",868],["T_VARIABLE","$this",868],["T_OBJECT_OPERATOR","->",868],["T_STRING","getConfigData",868],"(",["T_CONSTANT_ENCAPSED_STRING","'id'",868],")",")",";",["T_WHITESPACE","\n        ",868],["T_VARIABLE","$nodeServiceHeader",869],["T_OBJECT_OPERATOR","->",869],["T_STRING","addChild",869],"(",["T_CONSTANT_ENCAPSED_STRING","'Password'",869],",",["T_WHITESPACE"," ",869],["T_STRING_CAST","(string)",869],["T_VARIABLE","$this",869],["T_OBJECT_OPERATOR","->",869],["T_STRING","getConfigData",869],"(",["T_CONSTANT_ENCAPSED_STRING","'password'",869],")",")",";",["T_WHITESPACE","\n\n        ",869],["T_VARIABLE","$nodeFrom",871],["T_WHITESPACE"," ",871],"=",["T_WHITESPACE"," ",871],["T_VARIABLE","$nodeGetQuote",871],["T_OBJECT_OPERATOR","->",871],["T_STRING","addChild",871],"(",["T_CONSTANT_ENCAPSED_STRING","'From'",871],")",";",["T_WHITESPACE","\n        ",871],["T_VARIABLE","$nodeFrom",872],["T_OBJECT_OPERATOR","->",872],["T_STRING","addChild",872],"(",["T_CONSTANT_ENCAPSED_STRING","'CountryCode'",872],",",["T_WHITESPACE"," ",872],["T_VARIABLE","$rawRequest",872],["T_OBJECT_OPERATOR","->",872],["T_STRING","getOrigCountryId",872],"(",")",")",";",["T_WHITESPACE","\n        ",872],["T_VARIABLE","$nodeFrom",873],["T_OBJECT_OPERATOR","->",873],["T_STRING","addChild",873],"(",["T_CONSTANT_ENCAPSED_STRING","'Postalcode'",873],",",["T_WHITESPACE"," ",873],["T_VARIABLE","$rawRequest",873],["T_OBJECT_OPERATOR","->",873],["T_STRING","getOrigPostal",873],"(",")",")",";",["T_WHITESPACE","\n        ",873],["T_VARIABLE","$nodeFrom",874],["T_OBJECT_OPERATOR","->",874],["T_STRING","addChild",874],"(",["T_CONSTANT_ENCAPSED_STRING","'City'",874],",",["T_WHITESPACE"," ",874],["T_VARIABLE","$rawRequest",874],["T_OBJECT_OPERATOR","->",874],["T_STRING","getOrigCity",874],"(",")",")",";",["T_WHITESPACE","\n\n        ",874],["T_VARIABLE","$nodeBkgDetails",876],["T_WHITESPACE"," ",876],"=",["T_WHITESPACE"," ",876],["T_VARIABLE","$nodeGetQuote",876],["T_OBJECT_OPERATOR","->",876],["T_STRING","addChild",876],"(",["T_CONSTANT_ENCAPSED_STRING","'BkgDetails'",876],")",";",["T_WHITESPACE","\n        ",876],["T_VARIABLE","$nodeBkgDetails",877],["T_OBJECT_OPERATOR","->",877],["T_STRING","addChild",877],"(",["T_CONSTANT_ENCAPSED_STRING","'PaymentCountryCode'",877],",",["T_WHITESPACE"," ",877],["T_VARIABLE","$rawRequest",877],["T_OBJECT_OPERATOR","->",877],["T_STRING","getOrigCountryId",877],"(",")",")",";",["T_WHITESPACE","\n        ",877],["T_VARIABLE","$nodeBkgDetails",878],["T_OBJECT_OPERATOR","->",878],["T_STRING","addChild",878],"(",["T_CONSTANT_ENCAPSED_STRING","'Date'",878],",",["T_WHITESPACE"," ",878],["T_VARIABLE","$this",878],["T_OBJECT_OPERATOR","->",878],["T_STRING","_getShipDate",878],"(",")",")",";",["T_WHITESPACE","\n        ",878],["T_VARIABLE","$nodeBkgDetails",879],["T_OBJECT_OPERATOR","->",879],["T_STRING","addChild",879],"(",["T_CONSTANT_ENCAPSED_STRING","'ReadyTime'",879],",",["T_WHITESPACE"," ",879],["T_CONSTANT_ENCAPSED_STRING","'PT'",879],["T_WHITESPACE"," ",879],".",["T_WHITESPACE"," ",879],["T_INT_CAST","(int)",879],["T_STRING_CAST","(string)",879],["T_VARIABLE","$this",879],["T_OBJECT_OPERATOR","->",879],["T_STRING","getConfigData",879],"(",["T_CONSTANT_ENCAPSED_STRING","'ready_time'",879],")",["T_WHITESPACE"," ",879],".",["T_WHITESPACE"," ",879],["T_CONSTANT_ENCAPSED_STRING","'H00M'",879],")",";",["T_WHITESPACE","\n\n        ",879],["T_VARIABLE","$nodeBkgDetails",881],["T_OBJECT_OPERATOR","->",881],["T_STRING","addChild",881],"(",["T_CONSTANT_ENCAPSED_STRING","'DimensionUnit'",881],",",["T_WHITESPACE"," ",881],["T_VARIABLE","$this",881],["T_OBJECT_OPERATOR","->",881],["T_STRING","_getDimensionUnit",881],"(",")",")",";",["T_WHITESPACE","\n        ",881],["T_VARIABLE","$nodeBkgDetails",882],["T_OBJECT_OPERATOR","->",882],["T_STRING","addChild",882],"(",["T_CONSTANT_ENCAPSED_STRING","'WeightUnit'",882],",",["T_WHITESPACE"," ",882],["T_VARIABLE","$this",882],["T_OBJECT_OPERATOR","->",882],["T_STRING","_getWeightUnit",882],"(",")",")",";",["T_WHITESPACE","\n\n        ",882],["T_VARIABLE","$this",884],["T_OBJECT_OPERATOR","->",884],["T_STRING","_makePieces",884],"(",["T_VARIABLE","$nodeBkgDetails",884],")",";",["T_WHITESPACE","\n\n        ",884],["T_VARIABLE","$nodeBkgDetails",886],["T_OBJECT_OPERATOR","->",886],["T_STRING","addChild",886],"(",["T_CONSTANT_ENCAPSED_STRING","'PaymentAccountNumber'",886],",",["T_WHITESPACE"," ",886],["T_STRING_CAST","(string)",886],["T_VARIABLE","$this",886],["T_OBJECT_OPERATOR","->",886],["T_STRING","getConfigData",886],"(",["T_CONSTANT_ENCAPSED_STRING","'account'",886],")",")",";",["T_WHITESPACE","\n\n        ",886],["T_VARIABLE","$nodeTo",888],["T_WHITESPACE"," ",888],"=",["T_WHITESPACE"," ",888],["T_VARIABLE","$nodeGetQuote",888],["T_OBJECT_OPERATOR","->",888],["T_STRING","addChild",888],"(",["T_CONSTANT_ENCAPSED_STRING","'To'",888],")",";",["T_WHITESPACE","\n        ",888],["T_VARIABLE","$nodeTo",889],["T_OBJECT_OPERATOR","->",889],["T_STRING","addChild",889],"(",["T_CONSTANT_ENCAPSED_STRING","'CountryCode'",889],",",["T_WHITESPACE"," ",889],["T_VARIABLE","$rawRequest",889],["T_OBJECT_OPERATOR","->",889],["T_STRING","getDestCountryId",889],"(",")",")",";",["T_WHITESPACE","\n        ",889],["T_VARIABLE","$nodeTo",890],["T_OBJECT_OPERATOR","->",890],["T_STRING","addChild",890],"(",["T_CONSTANT_ENCAPSED_STRING","'Postalcode'",890],",",["T_WHITESPACE"," ",890],["T_VARIABLE","$rawRequest",890],["T_OBJECT_OPERATOR","->",890],["T_STRING","getDestPostal",890],"(",")",")",";",["T_WHITESPACE","\n        ",890],["T_VARIABLE","$nodeTo",891],["T_OBJECT_OPERATOR","->",891],["T_STRING","addChild",891],"(",["T_CONSTANT_ENCAPSED_STRING","'City'",891],",",["T_WHITESPACE"," ",891],["T_VARIABLE","$rawRequest",891],["T_OBJECT_OPERATOR","->",891],["T_STRING","getDestCity",891],"(",")",")",";",["T_WHITESPACE","\n\n        ",891],["T_VARIABLE","$this",893],["T_OBJECT_OPERATOR","->",893],["T_STRING","_checkDomesticStatus",893],"(",["T_VARIABLE","$rawRequest",893],["T_OBJECT_OPERATOR","->",893],["T_STRING","getOrigCountryId",893],"(",")",",",["T_WHITESPACE"," ",893],["T_VARIABLE","$rawRequest",893],["T_OBJECT_OPERATOR","->",893],["T_STRING","getDestCountryId",893],"(",")",")",";",["T_WHITESPACE","\n\n        ",893],["T_IF","if",895],["T_WHITESPACE"," ",895],"(",["T_VARIABLE","$this",895],["T_OBJECT_OPERATOR","->",895],["T_STRING","getConfigData",895],"(",["T_CONSTANT_ENCAPSED_STRING","'content_type'",895],")",["T_WHITESPACE"," ",895],["T_IS_EQUAL","==",895],["T_WHITESPACE"," ",895],["T_STRING","self",895],["T_DOUBLE_COLON","::",895],["T_STRING","DHL_CONTENT_TYPE_NON_DOC",895],["T_WHITESPACE"," ",895],["T_BOOLEAN_AND","&&",895],["T_WHITESPACE"," ",895],"!",["T_VARIABLE","$this",895],["T_OBJECT_OPERATOR","->",895],["T_STRING","_isDomestic",895],")",["T_WHITESPACE"," ",895],"{",["T_WHITESPACE","\n            ",895],["T_COMMENT","\/\/ IsDutiable flag and Dutiable node indicates that cargo is not a documentation\n",896],["T_WHITESPACE","            ",897],["T_VARIABLE","$nodeBkgDetails",897],["T_OBJECT_OPERATOR","->",897],["T_STRING","addChild",897],"(",["T_CONSTANT_ENCAPSED_STRING","'IsDutiable'",897],",",["T_WHITESPACE"," ",897],["T_CONSTANT_ENCAPSED_STRING","'Y'",897],")",";",["T_WHITESPACE","\n            ",897],["T_VARIABLE","$nodeDutiable",898],["T_WHITESPACE"," ",898],"=",["T_WHITESPACE"," ",898],["T_VARIABLE","$nodeGetQuote",898],["T_OBJECT_OPERATOR","->",898],["T_STRING","addChild",898],"(",["T_CONSTANT_ENCAPSED_STRING","'Dutiable'",898],")",";",["T_WHITESPACE","\n            ",898],["T_VARIABLE","$baseCurrencyCode",899],["T_WHITESPACE"," ",899],"=",["T_WHITESPACE"," ",899],["T_STRING","Mage",899],["T_DOUBLE_COLON","::",899],["T_STRING","app",899],"(",")",["T_OBJECT_OPERATOR","->",899],["T_STRING","getWebsite",899],"(",["T_VARIABLE","$this",899],["T_OBJECT_OPERATOR","->",899],["T_STRING","_request",899],["T_OBJECT_OPERATOR","->",899],["T_STRING","getWebsiteId",899],"(",")",")",["T_OBJECT_OPERATOR","->",899],["T_STRING","getBaseCurrencyCode",899],"(",")",";",["T_WHITESPACE","\n            ",899],["T_VARIABLE","$nodeDutiable",900],["T_OBJECT_OPERATOR","->",900],["T_STRING","addChild",900],"(",["T_CONSTANT_ENCAPSED_STRING","'DeclaredCurrency'",900],",",["T_WHITESPACE"," ",900],["T_VARIABLE","$baseCurrencyCode",900],")",";",["T_WHITESPACE","\n            ",900],["T_VARIABLE","$nodeDutiable",901],["T_OBJECT_OPERATOR","->",901],["T_STRING","addChild",901],"(",["T_CONSTANT_ENCAPSED_STRING","'DeclaredValue'",901],",",["T_WHITESPACE"," ",901],["T_STRING","sprintf",901],"(",["T_CONSTANT_ENCAPSED_STRING","\"%.2F\"",901],",",["T_WHITESPACE"," ",901],["T_VARIABLE","$rawRequest",901],["T_OBJECT_OPERATOR","->",901],["T_STRING","getValue",901],"(",")",")",")",";",["T_WHITESPACE","\n        ",901],"}",["T_WHITESPACE","\n        ",902],["T_RETURN","return",903],["T_WHITESPACE"," ",903],["T_VARIABLE","$xml",903],";",["T_WHITESPACE","\n    ",903],"}",["T_WHITESPACE","\n\n    ",904],["T_DOC_COMMENT","\/**\n     * Set pick-up date in request XML object\n     *\n     * @param SimpleXMLElement $requestXml\n     * @param string $date\n     * @return SimpleXMLElement\n     *\/",906],["T_WHITESPACE","\n    ",912],["T_PROTECTED","protected",913],["T_WHITESPACE"," ",913],["T_FUNCTION","function",913],["T_WHITESPACE"," ",913],["T_STRING","_setQuotesRequestXmlDate",913],"(",["T_STRING","SimpleXMLElement",913],["T_WHITESPACE"," ",913],["T_VARIABLE","$requestXml",913],",",["T_WHITESPACE"," ",913],["T_VARIABLE","$date",913],")",["T_WHITESPACE","\n    ",913],"{",["T_WHITESPACE","\n        ",914],["T_VARIABLE","$requestXml",915],["T_OBJECT_OPERATOR","->",915],["T_STRING","GetQuote",915],["T_OBJECT_OPERATOR","->",915],["T_STRING","BkgDetails",915],["T_OBJECT_OPERATOR","->",915],["T_STRING","Date",915],["T_WHITESPACE"," ",915],"=",["T_WHITESPACE"," ",915],["T_VARIABLE","$date",915],";",["T_WHITESPACE","\n        ",915],["T_RETURN","return",916],["T_WHITESPACE"," ",916],["T_VARIABLE","$requestXml",916],";",["T_WHITESPACE","\n    ",916],"}",["T_WHITESPACE","\n\n    ",917],["T_DOC_COMMENT","\/**\n     * Parse response from DHL web service\n     *\n     * @param string $response\n     * @return Mage_Shipping_Model_Rate_Result\n     *\/",919],["T_WHITESPACE","\n    ",924],["T_PROTECTED","protected",925],["T_WHITESPACE"," ",925],["T_FUNCTION","function",925],["T_WHITESPACE"," ",925],["T_STRING","_parseResponse",925],"(",["T_VARIABLE","$response",925],")",["T_WHITESPACE","\n    ",925],"{",["T_WHITESPACE","\n        ",926],["T_VARIABLE","$responseError",927],["T_WHITESPACE"," ",927],"=",["T_WHITESPACE","  ",927],["T_STRING","Mage",927],["T_DOUBLE_COLON","::",927],["T_STRING","helper",927],"(",["T_CONSTANT_ENCAPSED_STRING","'usa'",927],")",["T_OBJECT_OPERATOR","->",927],["T_STRING","__",927],"(",["T_CONSTANT_ENCAPSED_STRING","'The response is in wrong format.'",927],")",";",["T_WHITESPACE","\n\n        ",927],["T_IF","if",929],["T_WHITESPACE"," ",929],"(",["T_STRING","strlen",929],"(",["T_STRING","trim",929],"(",["T_VARIABLE","$response",929],")",")",["T_WHITESPACE"," ",929],">",["T_WHITESPACE"," ",929],["T_LNUMBER","0",929],")",["T_WHITESPACE"," ",929],"{",["T_WHITESPACE","\n            ",929],["T_IF","if",930],["T_WHITESPACE"," ",930],"(",["T_STRING","strpos",930],"(",["T_STRING","trim",930],"(",["T_VARIABLE","$response",930],")",",",["T_WHITESPACE"," ",930],["T_CONSTANT_ENCAPSED_STRING","'<?xml'",930],")",["T_WHITESPACE"," ",930],["T_IS_IDENTICAL","===",930],["T_WHITESPACE"," ",930],["T_LNUMBER","0",930],")",["T_WHITESPACE"," ",930],"{",["T_WHITESPACE","\n                ",930],["T_VARIABLE","$xml",931],["T_WHITESPACE"," ",931],"=",["T_WHITESPACE"," ",931],["T_STRING","simplexml_load_string",931],"(",["T_VARIABLE","$response",931],")",";",["T_WHITESPACE","\n                ",931],["T_IF","if",932],["T_WHITESPACE"," ",932],"(",["T_STRING","is_object",932],"(",["T_VARIABLE","$xml",932],")",")",["T_WHITESPACE"," ",932],"{",["T_WHITESPACE","\n                    ",932],["T_IF","if",933],["T_WHITESPACE"," ",933],"(",["T_STRING","in_array",933],"(",["T_VARIABLE","$xml",933],["T_OBJECT_OPERATOR","->",933],["T_STRING","getName",933],"(",")",",",["T_WHITESPACE"," ",933],["T_ARRAY","array",933],"(",["T_CONSTANT_ENCAPSED_STRING","'ErrorResponse'",933],",",["T_WHITESPACE"," ",933],["T_CONSTANT_ENCAPSED_STRING","'ShipmentValidateErrorResponse'",933],")",")",["T_WHITESPACE","\n                        ",933],["T_BOOLEAN_OR","||",934],["T_WHITESPACE"," ",934],["T_ISSET","isset",934],"(",["T_VARIABLE","$xml",934],["T_OBJECT_OPERATOR","->",934],["T_STRING","GetQuoteResponse",934],["T_OBJECT_OPERATOR","->",934],["T_STRING","Note",934],["T_OBJECT_OPERATOR","->",934],["T_STRING","Condition",934],")",["T_WHITESPACE","\n                    ",934],")",["T_WHITESPACE"," ",935],"{",["T_WHITESPACE","\n                        ",935],["T_VARIABLE","$code",936],["T_WHITESPACE"," ",936],"=",["T_WHITESPACE"," ",936],["T_STRING","null",936],";",["T_WHITESPACE","\n                        ",936],["T_VARIABLE","$data",937],["T_WHITESPACE"," ",937],"=",["T_WHITESPACE"," ",937],["T_STRING","null",937],";",["T_WHITESPACE","\n                        ",937],["T_IF","if",938],["T_WHITESPACE"," ",938],"(",["T_ISSET","isset",938],"(",["T_VARIABLE","$xml",938],["T_OBJECT_OPERATOR","->",938],["T_STRING","Response",938],["T_OBJECT_OPERATOR","->",938],["T_STRING","Status",938],["T_OBJECT_OPERATOR","->",938],["T_STRING","Condition",938],")",")",["T_WHITESPACE"," ",938],"{",["T_WHITESPACE","\n                            ",938],["T_VARIABLE","$nodeCondition",939],["T_WHITESPACE"," ",939],"=",["T_WHITESPACE"," ",939],["T_VARIABLE","$xml",939],["T_OBJECT_OPERATOR","->",939],["T_STRING","Response",939],["T_OBJECT_OPERATOR","->",939],["T_STRING","Status",939],["T_OBJECT_OPERATOR","->",939],["T_STRING","Condition",939],";",["T_WHITESPACE","\n                        ",939],"}",["T_WHITESPACE"," ",940],["T_ELSE","else",940],["T_WHITESPACE"," ",940],"{",["T_WHITESPACE","\n                            ",940],["T_VARIABLE","$nodeCondition",941],["T_WHITESPACE"," ",941],"=",["T_WHITESPACE"," ",941],["T_VARIABLE","$xml",941],["T_OBJECT_OPERATOR","->",941],["T_STRING","GetQuoteResponse",941],["T_OBJECT_OPERATOR","->",941],["T_STRING","Note",941],["T_OBJECT_OPERATOR","->",941],["T_STRING","Condition",941],";",["T_WHITESPACE","\n                        ",941],"}",["T_WHITESPACE","\n\n                        ",942],["T_IF","if",944],["T_WHITESPACE"," ",944],"(",["T_VARIABLE","$this",944],["T_OBJECT_OPERATOR","->",944],["T_STRING","_isShippingLabelFlag",944],")",["T_WHITESPACE"," ",944],"{",["T_WHITESPACE","\n                            ",944],["T_FOREACH","foreach",945],["T_WHITESPACE"," ",945],"(",["T_VARIABLE","$nodeCondition",945],["T_WHITESPACE"," ",945],["T_AS","as",945],["T_WHITESPACE"," ",945],["T_VARIABLE","$condition",945],")",["T_WHITESPACE"," ",945],"{",["T_WHITESPACE","\n                                ",945],["T_VARIABLE","$code",946],["T_WHITESPACE"," ",946],"=",["T_WHITESPACE"," ",946],["T_ISSET","isset",946],"(",["T_VARIABLE","$condition",946],["T_OBJECT_OPERATOR","->",946],["T_STRING","ConditionCode",946],")",["T_WHITESPACE"," ",946],"?",["T_WHITESPACE"," ",946],["T_STRING_CAST","(string)",946],["T_VARIABLE","$condition",946],["T_OBJECT_OPERATOR","->",946],["T_STRING","ConditionCode",946],["T_WHITESPACE"," ",946],":",["T_WHITESPACE"," ",946],["T_LNUMBER","0",946],";",["T_WHITESPACE","\n                                ",946],["T_VARIABLE","$data",947],["T_WHITESPACE"," ",947],"=",["T_WHITESPACE"," ",947],["T_ISSET","isset",947],"(",["T_VARIABLE","$condition",947],["T_OBJECT_OPERATOR","->",947],["T_STRING","ConditionData",947],")",["T_WHITESPACE"," ",947],"?",["T_WHITESPACE"," ",947],["T_STRING_CAST","(string)",947],["T_VARIABLE","$condition",947],["T_OBJECT_OPERATOR","->",947],["T_STRING","ConditionData",947],["T_WHITESPACE"," ",947],":",["T_WHITESPACE"," ",947],["T_CONSTANT_ENCAPSED_STRING","''",947],";",["T_WHITESPACE","\n                                ",947],["T_IF","if",948],["T_WHITESPACE"," ",948],"(","!",["T_EMPTY","empty",948],"(",["T_VARIABLE","$code",948],")",["T_WHITESPACE"," ",948],["T_BOOLEAN_AND","&&",948],["T_WHITESPACE"," ",948],"!",["T_EMPTY","empty",948],"(",["T_VARIABLE","$data",948],")",")",["T_WHITESPACE"," ",948],"{",["T_WHITESPACE","\n                                    ",948],["T_BREAK","break",949],";",["T_WHITESPACE","\n                                ",949],"}",["T_WHITESPACE","\n                            ",950],"}",["T_WHITESPACE","\n                            ",951],["T_STRING","Mage",952],["T_DOUBLE_COLON","::",952],["T_STRING","throwException",952],"(",["T_STRING","Mage",952],["T_DOUBLE_COLON","::",952],["T_STRING","helper",952],"(",["T_CONSTANT_ENCAPSED_STRING","'usa'",952],")",["T_OBJECT_OPERATOR","->",952],["T_STRING","__",952],"(",["T_CONSTANT_ENCAPSED_STRING","'Error #%s : %s'",952],",",["T_WHITESPACE"," ",952],["T_STRING","trim",952],"(",["T_VARIABLE","$code",952],")",",",["T_WHITESPACE"," ",952],["T_STRING","trim",952],"(",["T_VARIABLE","$data",952],")",")",")",";",["T_WHITESPACE","\n                        ",952],"}",["T_WHITESPACE","\n\n                        ",953],["T_VARIABLE","$code",955],["T_WHITESPACE"," ",955],"=",["T_WHITESPACE"," ",955],["T_ISSET","isset",955],"(",["T_VARIABLE","$nodeCondition",955],["T_OBJECT_OPERATOR","->",955],["T_STRING","ConditionCode",955],")",["T_WHITESPACE"," ",955],"?",["T_WHITESPACE"," ",955],["T_STRING_CAST","(string)",955],["T_VARIABLE","$nodeCondition",955],["T_OBJECT_OPERATOR","->",955],["T_STRING","ConditionCode",955],["T_WHITESPACE"," ",955],":",["T_WHITESPACE"," ",955],["T_LNUMBER","0",955],";",["T_WHITESPACE","\n                        ",955],["T_VARIABLE","$data",956],["T_WHITESPACE"," ",956],"=",["T_WHITESPACE"," ",956],["T_ISSET","isset",956],"(",["T_VARIABLE","$nodeCondition",956],["T_OBJECT_OPERATOR","->",956],["T_STRING","ConditionData",956],")",["T_WHITESPACE"," ",956],"?",["T_WHITESPACE"," ",956],["T_STRING_CAST","(string)",956],["T_VARIABLE","$nodeCondition",956],["T_OBJECT_OPERATOR","->",956],["T_STRING","ConditionData",956],["T_WHITESPACE"," ",956],":",["T_WHITESPACE"," ",956],["T_CONSTANT_ENCAPSED_STRING","''",956],";",["T_WHITESPACE","\n                        ",956],["T_VARIABLE","$this",957],["T_OBJECT_OPERATOR","->",957],["T_STRING","_errors",957],"[",["T_VARIABLE","$code",957],"]",["T_WHITESPACE"," ",957],"=",["T_WHITESPACE"," ",957],["T_STRING","Mage",957],["T_DOUBLE_COLON","::",957],["T_STRING","helper",957],"(",["T_CONSTANT_ENCAPSED_STRING","'usa'",957],")",["T_OBJECT_OPERATOR","->",957],["T_STRING","__",957],"(",["T_CONSTANT_ENCAPSED_STRING","'Error #%s : %s'",957],",",["T_WHITESPACE"," ",957],["T_STRING","trim",957],"(",["T_VARIABLE","$code",957],")",",",["T_WHITESPACE"," ",957],["T_STRING","trim",957],"(",["T_VARIABLE","$data",957],")",")",";",["T_WHITESPACE","\n                    ",957],"}",["T_WHITESPACE"," ",958],["T_ELSE","else",958],["T_WHITESPACE"," ",958],"{",["T_WHITESPACE","\n                        ",958],["T_IF","if",959],["T_WHITESPACE"," ",959],"(",["T_ISSET","isset",959],"(",["T_VARIABLE","$xml",959],["T_OBJECT_OPERATOR","->",959],["T_STRING","GetQuoteResponse",959],["T_OBJECT_OPERATOR","->",959],["T_STRING","BkgDetails",959],["T_OBJECT_OPERATOR","->",959],["T_STRING","QtdShp",959],")",")",["T_WHITESPACE"," ",959],"{",["T_WHITESPACE","\n                            ",959],["T_FOREACH","foreach",960],["T_WHITESPACE"," ",960],"(",["T_VARIABLE","$xml",960],["T_OBJECT_OPERATOR","->",960],["T_STRING","GetQuoteResponse",960],["T_OBJECT_OPERATOR","->",960],["T_STRING","BkgDetails",960],["T_OBJECT_OPERATOR","->",960],["T_STRING","QtdShp",960],["T_WHITESPACE"," ",960],["T_AS","as",960],["T_WHITESPACE"," ",960],["T_VARIABLE","$quotedShipment",960],")",["T_WHITESPACE"," ",960],"{",["T_WHITESPACE","\n                                ",960],["T_VARIABLE","$this",961],["T_OBJECT_OPERATOR","->",961],["T_STRING","_addRate",961],"(",["T_VARIABLE","$quotedShipment",961],")",";",["T_WHITESPACE","\n                            ",961],"}",["T_WHITESPACE","\n                        ",962],"}",["T_WHITESPACE"," ",963],["T_ELSEIF","elseif",963],["T_WHITESPACE"," ",963],"(",["T_ISSET","isset",963],"(",["T_VARIABLE","$xml",963],["T_OBJECT_OPERATOR","->",963],["T_STRING","AirwayBillNumber",963],")",")",["T_WHITESPACE"," ",963],"{",["T_WHITESPACE","\n                            ",963],["T_VARIABLE","$result",964],["T_WHITESPACE"," ",964],"=",["T_WHITESPACE"," ",964],["T_NEW","new",964],["T_WHITESPACE"," ",964],["T_STRING","Varien_Object",964],"(",")",";",["T_WHITESPACE","\n                            ",964],["T_VARIABLE","$result",965],["T_OBJECT_OPERATOR","->",965],["T_STRING","setTrackingNumber",965],"(",["T_STRING_CAST","(string)",965],["T_VARIABLE","$xml",965],["T_OBJECT_OPERATOR","->",965],["T_STRING","AirwayBillNumber",965],")",";",["T_WHITESPACE","\n                            ",965],["T_TRY","try",966],["T_WHITESPACE"," ",966],"{",["T_WHITESPACE","\n                                ",966],["T_VARIABLE","$labelContent",967],["T_WHITESPACE"," ",967],"=",["T_WHITESPACE"," ",967],["T_STRING_CAST","(string)",967],["T_VARIABLE","$xml",967],["T_OBJECT_OPERATOR","->",967],["T_STRING","LabelImage",967],["T_OBJECT_OPERATOR","->",967],["T_STRING","OutputImage",967],";",["T_WHITESPACE","\n                                ",967],["T_VARIABLE","$result",968],["T_OBJECT_OPERATOR","->",968],["T_STRING","setShippingLabelContent",968],"(",["T_STRING","base64_decode",968],"(",["T_VARIABLE","$labelContent",968],")",")",";",["T_WHITESPACE","\n                            ",968],"}",["T_WHITESPACE"," ",969],["T_CATCH","catch",969],["T_WHITESPACE"," ",969],"(",["T_STRING","Exception",969],["T_WHITESPACE"," ",969],["T_VARIABLE","$e",969],")",["T_WHITESPACE"," ",969],"{",["T_WHITESPACE","\n                                ",969],["T_STRING","Mage",970],["T_DOUBLE_COLON","::",970],["T_STRING","throwException",970],"(",["T_STRING","Mage",970],["T_DOUBLE_COLON","::",970],["T_STRING","helper",970],"(",["T_CONSTANT_ENCAPSED_STRING","'usa'",970],")",["T_OBJECT_OPERATOR","->",970],["T_STRING","__",970],"(",["T_VARIABLE","$e",970],["T_OBJECT_OPERATOR","->",970],["T_STRING","getMessage",970],"(",")",")",")",";",["T_WHITESPACE","\n                            ",970],"}",["T_WHITESPACE","\n                            ",971],["T_RETURN","return",972],["T_WHITESPACE"," ",972],["T_VARIABLE","$result",972],";",["T_WHITESPACE","\n                        ",972],"}",["T_WHITESPACE"," ",973],["T_ELSE","else",973],["T_WHITESPACE"," ",973],"{",["T_WHITESPACE","\n                            ",973],["T_VARIABLE","$this",974],["T_OBJECT_OPERATOR","->",974],["T_STRING","_errors",974],"[","]",["T_WHITESPACE"," ",974],"=",["T_WHITESPACE"," ",974],["T_VARIABLE","$responseError",974],";",["T_WHITESPACE","\n                        ",974],"}",["T_WHITESPACE","\n                    ",975],"}",["T_WHITESPACE","\n                ",976],"}",["T_WHITESPACE","\n            ",977],"}",["T_WHITESPACE"," ",978],["T_ELSE","else",978],["T_WHITESPACE"," ",978],"{",["T_WHITESPACE","\n                ",978],["T_VARIABLE","$this",979],["T_OBJECT_OPERATOR","->",979],["T_STRING","_errors",979],"[","]",["T_WHITESPACE"," ",979],"=",["T_WHITESPACE"," ",979],["T_VARIABLE","$responseError",979],";",["T_WHITESPACE","\n            ",979],"}",["T_WHITESPACE","\n        ",980],"}",["T_WHITESPACE"," ",981],["T_ELSE","else",981],["T_WHITESPACE"," ",981],"{",["T_WHITESPACE","\n            ",981],["T_VARIABLE","$this",982],["T_OBJECT_OPERATOR","->",982],["T_STRING","_errors",982],"[","]",["T_WHITESPACE"," ",982],"=",["T_WHITESPACE"," ",982],["T_VARIABLE","$responseError",982],";",["T_WHITESPACE","\n        ",982],"}",["T_WHITESPACE","\n\n        ",983],["T_COMMENT","\/* @var $result Mage_Shipping_Model_Rate_Result *\/",985],["T_WHITESPACE","\n        ",985],["T_VARIABLE","$result",986],["T_WHITESPACE"," ",986],"=",["T_WHITESPACE"," ",986],["T_STRING","Mage",986],["T_DOUBLE_COLON","::",986],["T_STRING","getModel",986],"(",["T_CONSTANT_ENCAPSED_STRING","'shipping\/rate_result'",986],")",";",["T_WHITESPACE","\n        ",986],["T_IF","if",987],["T_WHITESPACE"," ",987],"(",["T_VARIABLE","$this",987],["T_OBJECT_OPERATOR","->",987],["T_STRING","_rates",987],")",["T_WHITESPACE"," ",987],"{",["T_WHITESPACE","\n            ",987],["T_FOREACH","foreach",988],["T_WHITESPACE"," ",988],"(",["T_VARIABLE","$this",988],["T_OBJECT_OPERATOR","->",988],["T_STRING","_rates",988],["T_WHITESPACE"," ",988],["T_AS","as",988],["T_WHITESPACE"," ",988],["T_VARIABLE","$rate",988],")",["T_WHITESPACE"," ",988],"{",["T_WHITESPACE","\n                ",988],["T_VARIABLE","$method",989],["T_WHITESPACE"," ",989],"=",["T_WHITESPACE"," ",989],["T_VARIABLE","$rate",989],"[",["T_CONSTANT_ENCAPSED_STRING","'service'",989],"]",";",["T_WHITESPACE","\n                ",989],["T_VARIABLE","$data",990],["T_WHITESPACE"," ",990],"=",["T_WHITESPACE"," ",990],["T_VARIABLE","$rate",990],"[",["T_CONSTANT_ENCAPSED_STRING","'data'",990],"]",";",["T_WHITESPACE","\n                ",990],["T_COMMENT","\/* @var $rate Mage_Shipping_Model_Rate_Result_Method *\/",991],["T_WHITESPACE","\n                ",991],["T_VARIABLE","$rate",992],["T_WHITESPACE"," ",992],"=",["T_WHITESPACE"," ",992],["T_STRING","Mage",992],["T_DOUBLE_COLON","::",992],["T_STRING","getModel",992],"(",["T_CONSTANT_ENCAPSED_STRING","'shipping\/rate_result_method'",992],")",";",["T_WHITESPACE","\n                ",992],["T_VARIABLE","$rate",993],["T_OBJECT_OPERATOR","->",993],["T_STRING","setCarrier",993],"(",["T_STRING","self",993],["T_DOUBLE_COLON","::",993],["T_STRING","CODE",993],")",";",["T_WHITESPACE","\n                ",993],["T_VARIABLE","$rate",994],["T_OBJECT_OPERATOR","->",994],["T_STRING","setCarrierTitle",994],"(",["T_VARIABLE","$this",994],["T_OBJECT_OPERATOR","->",994],["T_STRING","getConfigData",994],"(",["T_CONSTANT_ENCAPSED_STRING","'title'",994],")",")",";",["T_WHITESPACE","\n                ",994],["T_VARIABLE","$rate",995],["T_OBJECT_OPERATOR","->",995],["T_STRING","setMethod",995],"(",["T_VARIABLE","$method",995],")",";",["T_WHITESPACE","\n                ",995],["T_VARIABLE","$rate",996],["T_OBJECT_OPERATOR","->",996],["T_STRING","setMethodTitle",996],"(",["T_VARIABLE","$data",996],"[",["T_CONSTANT_ENCAPSED_STRING","'term'",996],"]",")",";",["T_WHITESPACE","\n                ",996],["T_VARIABLE","$rate",997],["T_OBJECT_OPERATOR","->",997],["T_STRING","setCost",997],"(",["T_VARIABLE","$data",997],"[",["T_CONSTANT_ENCAPSED_STRING","'price_total'",997],"]",")",";",["T_WHITESPACE","\n                ",997],["T_VARIABLE","$rate",998],["T_OBJECT_OPERATOR","->",998],["T_STRING","setPrice",998],"(",["T_VARIABLE","$data",998],"[",["T_CONSTANT_ENCAPSED_STRING","'price_total'",998],"]",")",";",["T_WHITESPACE","\n                ",998],["T_VARIABLE","$result",999],["T_OBJECT_OPERATOR","->",999],["T_STRING","append",999],"(",["T_VARIABLE","$rate",999],")",";",["T_WHITESPACE","\n            ",999],"}",["T_WHITESPACE","\n        ",1000],"}",["T_WHITESPACE"," ",1001],["T_ELSE","else",1001],["T_WHITESPACE"," ",1001],["T_IF","if",1001],["T_WHITESPACE"," ",1001],"(","!",["T_EMPTY","empty",1001],"(",["T_VARIABLE","$this",1001],["T_OBJECT_OPERATOR","->",1001],["T_STRING","_errors",1001],")",")",["T_WHITESPACE"," ",1001],"{",["T_WHITESPACE","\n            ",1001],["T_IF","if",1002],["T_WHITESPACE"," ",1002],"(",["T_VARIABLE","$this",1002],["T_OBJECT_OPERATOR","->",1002],["T_STRING","_isShippingLabelFlag",1002],")",["T_WHITESPACE"," ",1002],"{",["T_WHITESPACE","\n                ",1002],["T_STRING","Mage",1003],["T_DOUBLE_COLON","::",1003],["T_STRING","throwException",1003],"(",["T_VARIABLE","$responseError",1003],")",";",["T_WHITESPACE","\n            ",1003],"}",["T_WHITESPACE","\n            ",1004],["T_RETURN","return",1005],["T_WHITESPACE"," ",1005],["T_VARIABLE","$this",1005],["T_OBJECT_OPERATOR","->",1005],["T_STRING","_showError",1005],"(",")",";",["T_WHITESPACE","\n        ",1005],"}",["T_WHITESPACE","\n        ",1006],["T_RETURN","return",1007],["T_WHITESPACE"," ",1007],["T_VARIABLE","$result",1007],";",["T_WHITESPACE","\n    ",1007],"}",["T_WHITESPACE","\n\n    ",1008],["T_DOC_COMMENT","\/**\n     * Add rate to DHL rates array\n     *\n     * @param SimpleXMLElement $shipmentDetails\n     * @return Mage_Usa_Model_Shipping_Carrier_Dhl_International\n     *\/",1010],["T_WHITESPACE","\n    ",1015],["T_PROTECTED","protected",1016],["T_WHITESPACE"," ",1016],["T_FUNCTION","function",1016],["T_WHITESPACE"," ",1016],["T_STRING","_addRate",1016],"(",["T_STRING","SimpleXMLElement",1016],["T_WHITESPACE"," ",1016],["T_VARIABLE","$shipmentDetails",1016],")",["T_WHITESPACE","\n    ",1016],"{",["T_WHITESPACE","\n        ",1017],["T_IF","if",1018],["T_WHITESPACE"," ",1018],"(",["T_ISSET","isset",1018],"(",["T_VARIABLE","$shipmentDetails",1018],["T_OBJECT_OPERATOR","->",1018],["T_STRING","ProductShortName",1018],")",["T_WHITESPACE","\n            ",1018],["T_BOOLEAN_AND","&&",1019],["T_WHITESPACE"," ",1019],["T_ISSET","isset",1019],"(",["T_VARIABLE","$shipmentDetails",1019],["T_OBJECT_OPERATOR","->",1019],["T_STRING","ShippingCharge",1019],")",["T_WHITESPACE","\n            ",1019],["T_BOOLEAN_AND","&&",1020],["T_WHITESPACE"," ",1020],["T_ISSET","isset",1020],"(",["T_VARIABLE","$shipmentDetails",1020],["T_OBJECT_OPERATOR","->",1020],["T_STRING","GlobalProductCode",1020],")",["T_WHITESPACE","\n            ",1020],["T_BOOLEAN_AND","&&",1021],["T_WHITESPACE"," ",1021],["T_ISSET","isset",1021],"(",["T_VARIABLE","$shipmentDetails",1021],["T_OBJECT_OPERATOR","->",1021],["T_STRING","CurrencyCode",1021],")",["T_WHITESPACE","\n            ",1021],["T_BOOLEAN_AND","&&",1022],["T_WHITESPACE"," ",1022],["T_STRING","array_key_exists",1022],"(",["T_STRING_CAST","(string)",1022],["T_VARIABLE","$shipmentDetails",1022],["T_OBJECT_OPERATOR","->",1022],["T_STRING","GlobalProductCode",1022],",",["T_WHITESPACE"," ",1022],["T_VARIABLE","$this",1022],["T_OBJECT_OPERATOR","->",1022],["T_STRING","getAllowedMethods",1022],"(",")",")",["T_WHITESPACE","\n        ",1022],")",["T_WHITESPACE"," ",1023],"{",["T_WHITESPACE","\n            ",1023],["T_COMMENT","\/\/ DHL product code, e.g. '3', 'A', 'Q', etc.\n",1024],["T_WHITESPACE","            ",1025],["T_VARIABLE","$dhlProduct",1025],["T_WHITESPACE","             ",1025],"=",["T_WHITESPACE"," ",1025],["T_STRING_CAST","(string)",1025],["T_VARIABLE","$shipmentDetails",1025],["T_OBJECT_OPERATOR","->",1025],["T_STRING","GlobalProductCode",1025],";",["T_WHITESPACE","\n            ",1025],["T_VARIABLE","$totalEstimate",1026],["T_WHITESPACE","          ",1026],"=",["T_WHITESPACE"," ",1026],["T_DOUBLE_CAST","(float)",1026],["T_STRING_CAST","(string)",1026],["T_VARIABLE","$shipmentDetails",1026],["T_OBJECT_OPERATOR","->",1026],["T_STRING","ShippingCharge",1026],";",["T_WHITESPACE","\n            ",1026],["T_VARIABLE","$currencyCode",1027],["T_WHITESPACE","           ",1027],"=",["T_WHITESPACE"," ",1027],["T_STRING_CAST","(string)",1027],["T_VARIABLE","$shipmentDetails",1027],["T_OBJECT_OPERATOR","->",1027],["T_STRING","CurrencyCode",1027],";",["T_WHITESPACE","\n            ",1027],["T_VARIABLE","$baseCurrencyCode",1028],["T_WHITESPACE","       ",1028],"=",["T_WHITESPACE"," ",1028],["T_STRING","Mage",1028],["T_DOUBLE_COLON","::",1028],["T_STRING","app",1028],"(",")",["T_OBJECT_OPERATOR","->",1028],["T_STRING","getWebsite",1028],"(",["T_VARIABLE","$this",1028],["T_OBJECT_OPERATOR","->",1028],["T_STRING","_request",1028],["T_OBJECT_OPERATOR","->",1028],["T_STRING","getWebsiteId",1028],"(",")",")",["T_OBJECT_OPERATOR","->",1028],["T_STRING","getBaseCurrencyCode",1028],"(",")",";",["T_WHITESPACE","\n            ",1028],["T_VARIABLE","$dhlProductDescription",1029],["T_WHITESPACE","  ",1029],"=",["T_WHITESPACE"," ",1029],["T_VARIABLE","$this",1029],["T_OBJECT_OPERATOR","->",1029],["T_STRING","getDhlProductTitle",1029],"(",["T_VARIABLE","$dhlProduct",1029],")",";",["T_WHITESPACE","\n\n            ",1029],["T_IF","if",1031],["T_WHITESPACE"," ",1031],"(",["T_VARIABLE","$currencyCode",1031],["T_WHITESPACE"," ",1031],["T_IS_NOT_EQUAL","!=",1031],["T_WHITESPACE"," ",1031],["T_VARIABLE","$baseCurrencyCode",1031],")",["T_WHITESPACE"," ",1031],"{",["T_WHITESPACE","\n                ",1031],["T_COMMENT","\/* @var $currency Mage_Directory_Model_Currency *\/",1032],["T_WHITESPACE","\n                ",1032],["T_VARIABLE","$currency",1033],["T_WHITESPACE"," ",1033],"=",["T_WHITESPACE"," ",1033],["T_STRING","Mage",1033],["T_DOUBLE_COLON","::",1033],["T_STRING","getModel",1033],"(",["T_CONSTANT_ENCAPSED_STRING","'directory\/currency'",1033],")",";",["T_WHITESPACE","\n                ",1033],["T_VARIABLE","$rates",1034],["T_WHITESPACE"," ",1034],"=",["T_WHITESPACE"," ",1034],["T_VARIABLE","$currency",1034],["T_OBJECT_OPERATOR","->",1034],["T_STRING","getCurrencyRates",1034],"(",["T_VARIABLE","$currencyCode",1034],",",["T_WHITESPACE"," ",1034],["T_ARRAY","array",1034],"(",["T_VARIABLE","$baseCurrencyCode",1034],")",")",";",["T_WHITESPACE","\n                ",1034],["T_IF","if",1035],["T_WHITESPACE"," ",1035],"(","!",["T_EMPTY","empty",1035],"(",["T_VARIABLE","$rates",1035],")",["T_WHITESPACE"," ",1035],["T_BOOLEAN_AND","&&",1035],["T_WHITESPACE"," ",1035],["T_ISSET","isset",1035],"(",["T_VARIABLE","$rates",1035],"[",["T_VARIABLE","$baseCurrencyCode",1035],"]",")",")",["T_WHITESPACE"," ",1035],"{",["T_WHITESPACE","\n                    ",1035],["T_COMMENT","\/\/ Convert to store display currency using store exchange rate\n",1036],["T_WHITESPACE","                    ",1037],["T_VARIABLE","$totalEstimate",1037],["T_WHITESPACE"," ",1037],"=",["T_WHITESPACE"," ",1037],["T_VARIABLE","$totalEstimate",1037],["T_WHITESPACE"," ",1037],"*",["T_WHITESPACE"," ",1037],["T_VARIABLE","$rates",1037],"[",["T_VARIABLE","$baseCurrencyCode",1037],"]",";",["T_WHITESPACE","\n                ",1037],"}",["T_WHITESPACE"," ",1038],["T_ELSE","else",1038],["T_WHITESPACE"," ",1038],"{",["T_WHITESPACE","\n                    ",1038],["T_VARIABLE","$rates",1039],["T_WHITESPACE"," ",1039],"=",["T_WHITESPACE"," ",1039],["T_VARIABLE","$currency",1039],["T_OBJECT_OPERATOR","->",1039],["T_STRING","getCurrencyRates",1039],"(",["T_VARIABLE","$baseCurrencyCode",1039],",",["T_WHITESPACE"," ",1039],["T_ARRAY","array",1039],"(",["T_VARIABLE","$currencyCode",1039],")",")",";",["T_WHITESPACE","\n                    ",1039],["T_IF","if",1040],["T_WHITESPACE"," ",1040],"(","!",["T_EMPTY","empty",1040],"(",["T_VARIABLE","$rates",1040],")",["T_WHITESPACE"," ",1040],["T_BOOLEAN_AND","&&",1040],["T_WHITESPACE"," ",1040],["T_ISSET","isset",1040],"(",["T_VARIABLE","$rates",1040],"[",["T_VARIABLE","$currencyCode",1040],"]",")",")",["T_WHITESPACE"," ",1040],"{",["T_WHITESPACE","\n                        ",1040],["T_VARIABLE","$totalEstimate",1041],["T_WHITESPACE"," ",1041],"=",["T_WHITESPACE"," ",1041],["T_VARIABLE","$totalEstimate",1041],"\/",["T_VARIABLE","$rates",1041],"[",["T_VARIABLE","$currencyCode",1041],"]",";",["T_WHITESPACE","\n                    ",1041],"}",["T_WHITESPACE","\n                    ",1042],["T_IF","if",1043],["T_WHITESPACE"," ",1043],"(","!",["T_ISSET","isset",1043],"(",["T_VARIABLE","$rates",1043],"[",["T_VARIABLE","$currencyCode",1043],"]",")",["T_WHITESPACE"," ",1043],["T_BOOLEAN_OR","||",1043],["T_WHITESPACE"," ",1043],"!",["T_VARIABLE","$totalEstimate",1043],")",["T_WHITESPACE"," ",1043],"{",["T_WHITESPACE","\n                        ",1043],["T_VARIABLE","$totalEstimate",1044],["T_WHITESPACE"," ",1044],"=",["T_WHITESPACE"," ",1044],["T_STRING","false",1044],";",["T_WHITESPACE","\n                        ",1044],["T_VARIABLE","$this",1045],["T_OBJECT_OPERATOR","->",1045],["T_STRING","_errors",1045],"[","]",["T_WHITESPACE"," ",1045],"=",["T_WHITESPACE"," ",1045],["T_STRING","Mage",1045],["T_DOUBLE_COLON","::",1045],["T_STRING","helper",1045],"(",["T_CONSTANT_ENCAPSED_STRING","'usa'",1045],")",["T_OBJECT_OPERATOR","->",1045],["T_STRING","__",1045],"(",["T_CONSTANT_ENCAPSED_STRING","\"Exchange rate %s (Base Currency) -> %s not found. DHL method %s skipped\"",1045],",",["T_WHITESPACE"," ",1045],["T_VARIABLE","$currencyCode",1045],",",["T_WHITESPACE"," ",1045],["T_VARIABLE","$baseCurrencyCode",1045],",",["T_WHITESPACE"," ",1045],["T_VARIABLE","$dhlProductDescription",1045],")",";",["T_WHITESPACE","\n                    ",1045],"}",["T_WHITESPACE","\n                ",1046],"}",["T_WHITESPACE","\n            ",1047],"}",["T_WHITESPACE","\n            ",1048],["T_IF","if",1049],["T_WHITESPACE"," ",1049],"(",["T_VARIABLE","$totalEstimate",1049],")",["T_WHITESPACE"," ",1049],"{",["T_WHITESPACE","\n                ",1049],["T_VARIABLE","$data",1050],["T_WHITESPACE"," ",1050],"=",["T_WHITESPACE"," ",1050],["T_ARRAY","array",1050],"(",["T_CONSTANT_ENCAPSED_STRING","'term'",1050],["T_WHITESPACE"," ",1050],["T_DOUBLE_ARROW","=>",1050],["T_WHITESPACE"," ",1050],["T_VARIABLE","$dhlProductDescription",1050],",",["T_WHITESPACE","\n                    ",1050],["T_CONSTANT_ENCAPSED_STRING","'price_total'",1051],["T_WHITESPACE"," ",1051],["T_DOUBLE_ARROW","=>",1051],["T_WHITESPACE"," ",1051],["T_VARIABLE","$this",1051],["T_OBJECT_OPERATOR","->",1051],["T_STRING","getMethodPrice",1051],"(",["T_VARIABLE","$totalEstimate",1051],",",["T_WHITESPACE"," ",1051],["T_VARIABLE","$dhlProduct",1051],")",")",";",["T_WHITESPACE","\n                ",1051],["T_IF","if",1052],["T_WHITESPACE"," ",1052],"(","!",["T_EMPTY","empty",1052],"(",["T_VARIABLE","$this",1052],["T_OBJECT_OPERATOR","->",1052],["T_STRING","_rates",1052],")",")",["T_WHITESPACE"," ",1052],"{",["T_WHITESPACE","\n                    ",1052],["T_FOREACH","foreach",1053],["T_WHITESPACE"," ",1053],"(",["T_VARIABLE","$this",1053],["T_OBJECT_OPERATOR","->",1053],["T_STRING","_rates",1053],["T_WHITESPACE"," ",1053],["T_AS","as",1053],["T_WHITESPACE"," ",1053],["T_VARIABLE","$product",1053],")",["T_WHITESPACE"," ",1053],"{",["T_WHITESPACE","\n                        ",1053],["T_IF","if",1054],["T_WHITESPACE"," ",1054],"(",["T_VARIABLE","$product",1054],"[",["T_CONSTANT_ENCAPSED_STRING","'data'",1054],"]","[",["T_CONSTANT_ENCAPSED_STRING","'term'",1054],"]",["T_WHITESPACE"," ",1054],["T_IS_EQUAL","==",1054],["T_WHITESPACE"," ",1054],["T_VARIABLE","$data",1054],"[",["T_CONSTANT_ENCAPSED_STRING","'term'",1054],"]",["T_WHITESPACE","\n                            ",1054],["T_BOOLEAN_AND","&&",1055],["T_WHITESPACE"," ",1055],["T_VARIABLE","$product",1055],"[",["T_CONSTANT_ENCAPSED_STRING","'data'",1055],"]","[",["T_CONSTANT_ENCAPSED_STRING","'price_total'",1055],"]",["T_WHITESPACE"," ",1055],["T_IS_EQUAL","==",1055],["T_WHITESPACE"," ",1055],["T_VARIABLE","$data",1055],"[",["T_CONSTANT_ENCAPSED_STRING","'price_total'",1055],"]",["T_WHITESPACE","\n                        ",1055],")",["T_WHITESPACE"," ",1056],"{",["T_WHITESPACE","\n                            ",1056],["T_RETURN","return",1057],["T_WHITESPACE"," ",1057],["T_VARIABLE","$this",1057],";",["T_WHITESPACE","\n                        ",1057],"}",["T_WHITESPACE","\n                    ",1058],"}",["T_WHITESPACE","\n                ",1059],"}",["T_WHITESPACE","\n                ",1060],["T_VARIABLE","$this",1061],["T_OBJECT_OPERATOR","->",1061],["T_STRING","_rates",1061],"[","]",["T_WHITESPACE"," ",1061],"=",["T_WHITESPACE"," ",1061],["T_ARRAY","array",1061],"(",["T_CONSTANT_ENCAPSED_STRING","'service'",1061],["T_WHITESPACE"," ",1061],["T_DOUBLE_ARROW","=>",1061],["T_WHITESPACE"," ",1061],["T_VARIABLE","$dhlProduct",1061],",",["T_WHITESPACE"," ",1061],["T_CONSTANT_ENCAPSED_STRING","'data'",1061],["T_WHITESPACE"," ",1061],["T_DOUBLE_ARROW","=>",1061],["T_WHITESPACE"," ",1061],["T_VARIABLE","$data",1061],")",";",["T_WHITESPACE","\n            ",1061],"}",["T_WHITESPACE"," ",1062],["T_ELSE","else",1062],["T_WHITESPACE"," ",1062],"{",["T_WHITESPACE","\n                ",1062],["T_VARIABLE","$this",1063],["T_OBJECT_OPERATOR","->",1063],["T_STRING","_errors",1063],"[","]",["T_WHITESPACE"," ",1063],"=",["T_WHITESPACE"," ",1063],["T_STRING","Mage",1063],["T_DOUBLE_COLON","::",1063],["T_STRING","helper",1063],"(",["T_CONSTANT_ENCAPSED_STRING","'usa'",1063],")",["T_OBJECT_OPERATOR","->",1063],["T_STRING","__",1063],"(",["T_CONSTANT_ENCAPSED_STRING","\"Zero shipping charge for '%s'\"",1063],",",["T_WHITESPACE"," ",1063],["T_VARIABLE","$dhlProductDescription",1063],")",";",["T_WHITESPACE","\n            ",1063],"}",["T_WHITESPACE","\n        ",1064],"}",["T_WHITESPACE"," ",1065],["T_ELSE","else",1065],["T_WHITESPACE"," ",1065],"{",["T_WHITESPACE","\n            ",1065],["T_VARIABLE","$dhlProductDescription",1066],["T_WHITESPACE"," ",1066],"=",["T_WHITESPACE"," ",1066],["T_STRING","false",1066],";",["T_WHITESPACE","\n            ",1066],["T_IF","if",1067],["T_WHITESPACE"," ",1067],"(",["T_ISSET","isset",1067],"(",["T_VARIABLE","$shipmentDetails",1067],["T_OBJECT_OPERATOR","->",1067],["T_STRING","GlobalProductCode",1067],")",")",["T_WHITESPACE"," ",1067],"{",["T_WHITESPACE","\n                ",1067],["T_VARIABLE","$dhlProductDescription",1068],["T_WHITESPACE","  ",1068],"=",["T_WHITESPACE"," ",1068],["T_VARIABLE","$this",1068],["T_OBJECT_OPERATOR","->",1068],["T_STRING","getDhlProductTitle",1068],"(",["T_STRING_CAST","(string)",1068],["T_VARIABLE","$shipmentDetails",1068],["T_OBJECT_OPERATOR","->",1068],["T_STRING","GlobalProductCode",1068],")",";",["T_WHITESPACE","\n            ",1068],"}",["T_WHITESPACE","\n            ",1069],["T_VARIABLE","$dhlProductDescription",1070],["T_WHITESPACE"," ",1070],"=",["T_WHITESPACE"," ",1070],["T_VARIABLE","$dhlProductDescription",1070],["T_WHITESPACE"," ",1070],"?",["T_WHITESPACE"," ",1070],["T_VARIABLE","$dhlProductDescription",1070],["T_WHITESPACE"," ",1070],":",["T_WHITESPACE"," ",1070],["T_STRING","Mage",1070],["T_DOUBLE_COLON","::",1070],["T_STRING","helper",1070],"(",["T_CONSTANT_ENCAPSED_STRING","'usa'",1070],")",["T_OBJECT_OPERATOR","->",1070],["T_STRING","__",1070],"(",["T_CONSTANT_ENCAPSED_STRING","\"DHL\"",1070],")",";",["T_WHITESPACE","\n            ",1070],["T_VARIABLE","$this",1071],["T_OBJECT_OPERATOR","->",1071],["T_STRING","_errors",1071],"[","]",["T_WHITESPACE"," ",1071],"=",["T_WHITESPACE"," ",1071],["T_STRING","Mage",1071],["T_DOUBLE_COLON","::",1071],["T_STRING","helper",1071],"(",["T_CONSTANT_ENCAPSED_STRING","'usa'",1071],")",["T_OBJECT_OPERATOR","->",1071],["T_STRING","__",1071],"(",["T_CONSTANT_ENCAPSED_STRING","\"Zero shipping charge for '%s'\"",1071],",",["T_WHITESPACE"," ",1071],["T_VARIABLE","$dhlProductDescription",1071],")",";",["T_WHITESPACE","\n        ",1071],"}",["T_WHITESPACE","\n        ",1072],["T_RETURN","return",1073],["T_WHITESPACE"," ",1073],["T_VARIABLE","$this",1073],";",["T_WHITESPACE","\n    ",1073],"}",["T_WHITESPACE","\n\n    ",1074],["T_DOC_COMMENT","\/**\n     * Returns dimension unit (cm or inch)\n     *\n     * @return string\n     *\/",1076],["T_WHITESPACE","\n    ",1080],["T_PROTECTED","protected",1081],["T_WHITESPACE"," ",1081],["T_FUNCTION","function",1081],["T_WHITESPACE"," ",1081],["T_STRING","_getDimensionUnit",1081],"(",")",["T_WHITESPACE","\n    ",1081],"{",["T_WHITESPACE","\n        ",1082],["T_VARIABLE","$countryId",1083],["T_WHITESPACE"," ",1083],"=",["T_WHITESPACE"," ",1083],["T_VARIABLE","$this",1083],["T_OBJECT_OPERATOR","->",1083],["T_STRING","_rawRequest",1083],["T_OBJECT_OPERATOR","->",1083],["T_STRING","getOrigCountryId",1083],"(",")",";",["T_WHITESPACE","\n        ",1083],["T_VARIABLE","$measureUnit",1084],["T_WHITESPACE"," ",1084],"=",["T_WHITESPACE"," ",1084],["T_VARIABLE","$this",1084],["T_OBJECT_OPERATOR","->",1084],["T_STRING","getCountryParams",1084],"(",["T_VARIABLE","$countryId",1084],")",["T_OBJECT_OPERATOR","->",1084],["T_STRING","getMeasureUnit",1084],"(",")",";",["T_WHITESPACE","\n        ",1084],["T_IF","if",1085],["T_WHITESPACE"," ",1085],"(",["T_EMPTY","empty",1085],"(",["T_VARIABLE","$measureUnit",1085],")",")",["T_WHITESPACE"," ",1085],"{",["T_WHITESPACE","\n            ",1085],["T_STRING","Mage",1086],["T_DOUBLE_COLON","::",1086],["T_STRING","throwException",1086],"(",["T_STRING","Mage",1086],["T_DOUBLE_COLON","::",1086],["T_STRING","helper",1086],"(",["T_CONSTANT_ENCAPSED_STRING","'usa'",1086],")",["T_OBJECT_OPERATOR","->",1086],["T_STRING","__",1086],"(",["T_CONSTANT_ENCAPSED_STRING","\"Cannot identify measure unit for %s\"",1086],",",["T_WHITESPACE"," ",1086],["T_VARIABLE","$countryId",1086],")",")",";",["T_WHITESPACE","\n        ",1086],"}",["T_WHITESPACE","\n        ",1087],["T_RETURN","return",1088],["T_WHITESPACE"," ",1088],["T_VARIABLE","$measureUnit",1088],";",["T_WHITESPACE","\n    ",1088],"}",["T_WHITESPACE","\n\n    ",1089],["T_DOC_COMMENT","\/**\n     * Returns weight unit (kg or pound)\n     *\n     * @return string\n     *\/",1091],["T_WHITESPACE","\n    ",1095],["T_PROTECTED","protected",1096],["T_WHITESPACE"," ",1096],["T_FUNCTION","function",1096],["T_WHITESPACE"," ",1096],["T_STRING","_getWeightUnit",1096],"(",")",["T_WHITESPACE","\n    ",1096],"{",["T_WHITESPACE","\n        ",1097],["T_VARIABLE","$countryId",1098],["T_WHITESPACE"," ",1098],"=",["T_WHITESPACE"," ",1098],["T_VARIABLE","$this",1098],["T_OBJECT_OPERATOR","->",1098],["T_STRING","_rawRequest",1098],["T_OBJECT_OPERATOR","->",1098],["T_STRING","getOrigCountryId",1098],"(",")",";",["T_WHITESPACE","\n        ",1098],["T_VARIABLE","$weightUnit",1099],["T_WHITESPACE"," ",1099],"=",["T_WHITESPACE"," ",1099],["T_VARIABLE","$this",1099],["T_OBJECT_OPERATOR","->",1099],["T_STRING","getCountryParams",1099],"(",["T_VARIABLE","$countryId",1099],")",["T_OBJECT_OPERATOR","->",1099],["T_STRING","getWeightUnit",1099],"(",")",";",["T_WHITESPACE","\n        ",1099],["T_IF","if",1100],["T_WHITESPACE"," ",1100],"(",["T_EMPTY","empty",1100],"(",["T_VARIABLE","$weightUnit",1100],")",")",["T_WHITESPACE"," ",1100],"{",["T_WHITESPACE","\n            ",1100],["T_STRING","Mage",1101],["T_DOUBLE_COLON","::",1101],["T_STRING","throwException",1101],"(",["T_STRING","Mage",1101],["T_DOUBLE_COLON","::",1101],["T_STRING","helper",1101],"(",["T_CONSTANT_ENCAPSED_STRING","'usa'",1101],")",["T_OBJECT_OPERATOR","->",1101],["T_STRING","__",1101],"(",["T_CONSTANT_ENCAPSED_STRING","\"Cannot identify weight unit for %s\"",1101],",",["T_WHITESPACE"," ",1101],["T_VARIABLE","$countryId",1101],")",")",";",["T_WHITESPACE","\n        ",1101],"}",["T_WHITESPACE","\n        ",1102],["T_RETURN","return",1103],["T_WHITESPACE"," ",1103],["T_VARIABLE","$weightUnit",1103],";",["T_WHITESPACE","\n    ",1103],"}",["T_WHITESPACE","\n\n    ",1104],["T_DOC_COMMENT","\/**\n     * Get Country Params by Country Code\n     *\n     * @param string $countryCode\n     * @return Varien_Object\n     *\n     * @see $countryCode ISO 3166 Codes (Countries) A2\n     *\/",1106],["T_WHITESPACE","\n    ",1113],["T_PROTECTED","protected",1114],["T_WHITESPACE"," ",1114],["T_FUNCTION","function",1114],["T_WHITESPACE"," ",1114],["T_STRING","getCountryParams",1114],"(",["T_VARIABLE","$countryCode",1114],")",["T_WHITESPACE","\n    ",1114],"{",["T_WHITESPACE","\n        ",1115],["T_IF","if",1116],["T_WHITESPACE"," ",1116],"(",["T_EMPTY","empty",1116],"(",["T_VARIABLE","$this",1116],["T_OBJECT_OPERATOR","->",1116],["T_STRING","_countryParams",1116],")",")",["T_WHITESPACE"," ",1116],"{",["T_WHITESPACE","\n            ",1116],["T_VARIABLE","$dhlConfigPath",1117],["T_WHITESPACE"," ",1117],"=",["T_WHITESPACE"," ",1117],["T_STRING","Mage",1117],["T_DOUBLE_COLON","::",1117],["T_STRING","getModuleDir",1117],"(",["T_CONSTANT_ENCAPSED_STRING","'etc'",1117],",",["T_WHITESPACE"," ",1117],["T_CONSTANT_ENCAPSED_STRING","'Mage_Usa'",1117],")",["T_WHITESPACE","  ",1117],".",["T_WHITESPACE"," ",1117],["T_STRING","DS",1117],["T_WHITESPACE"," ",1117],".",["T_WHITESPACE"," ",1117],["T_CONSTANT_ENCAPSED_STRING","'dhl'",1117],["T_WHITESPACE"," ",1117],".",["T_WHITESPACE"," ",1117],["T_STRING","DS",1117],";",["T_WHITESPACE","\n            ",1117],["T_VARIABLE","$countriesXml",1118],["T_WHITESPACE"," ",1118],"=",["T_WHITESPACE"," ",1118],["T_STRING","file_get_contents",1118],"(",["T_VARIABLE","$dhlConfigPath",1118],["T_WHITESPACE"," ",1118],".",["T_WHITESPACE"," ",1118],["T_CONSTANT_ENCAPSED_STRING","'international'",1118],["T_WHITESPACE"," ",1118],".",["T_WHITESPACE"," ",1118],["T_STRING","DS",1118],["T_WHITESPACE"," ",1118],".",["T_WHITESPACE"," ",1118],["T_CONSTANT_ENCAPSED_STRING","'countries.xml'",1118],")",";",["T_WHITESPACE","\n            ",1118],["T_VARIABLE","$this",1119],["T_OBJECT_OPERATOR","->",1119],["T_STRING","_countryParams",1119],["T_WHITESPACE"," ",1119],"=",["T_WHITESPACE"," ",1119],["T_NEW","new",1119],["T_WHITESPACE"," ",1119],["T_STRING","Varien_Simplexml_Element",1119],"(",["T_VARIABLE","$countriesXml",1119],")",";",["T_WHITESPACE","\n        ",1119],"}",["T_WHITESPACE","\n        ",1120],["T_IF","if",1121],["T_WHITESPACE"," ",1121],"(",["T_ISSET","isset",1121],"(",["T_VARIABLE","$this",1121],["T_OBJECT_OPERATOR","->",1121],["T_STRING","_countryParams",1121],["T_OBJECT_OPERATOR","->",1121],["T_VARIABLE","$countryCode",1121],")",")",["T_WHITESPACE"," ",1121],"{",["T_WHITESPACE","\n            ",1121],["T_VARIABLE","$countryParams",1122],["T_WHITESPACE"," ",1122],"=",["T_WHITESPACE"," ",1122],["T_NEW","new",1122],["T_WHITESPACE"," ",1122],["T_STRING","Varien_Object",1122],"(",["T_VARIABLE","$this",1122],["T_OBJECT_OPERATOR","->",1122],["T_STRING","_countryParams",1122],["T_OBJECT_OPERATOR","->",1122],["T_VARIABLE","$countryCode",1122],["T_OBJECT_OPERATOR","->",1122],["T_STRING","asArray",1122],"(",")",")",";",["T_WHITESPACE","\n        ",1122],"}",["T_WHITESPACE","\n        ",1123],["T_RETURN","return",1124],["T_WHITESPACE"," ",1124],["T_ISSET","isset",1124],"(",["T_VARIABLE","$countryParams",1124],")",["T_WHITESPACE"," ",1124],"?",["T_WHITESPACE"," ",1124],["T_VARIABLE","$countryParams",1124],["T_WHITESPACE"," ",1124],":",["T_WHITESPACE"," ",1124],["T_NEW","new",1124],["T_WHITESPACE"," ",1124],["T_STRING","Varien_Object",1124],"(",")",";",["T_WHITESPACE","\n    ",1124],"}",["T_WHITESPACE","\n\n    ",1125],["T_DOC_COMMENT","\/**\n     * Do shipment request to carrier web service, obtain Print Shipping Labels and process errors in response\n     *\n     * @param Varien_Object $request\n     * @return Varien_Object\n     *\/",1127],["T_WHITESPACE","\n    ",1132],["T_PROTECTED","protected",1133],["T_WHITESPACE"," ",1133],["T_FUNCTION","function",1133],["T_WHITESPACE"," ",1133],["T_STRING","_doShipmentRequest",1133],"(",["T_STRING","Varien_Object",1133],["T_WHITESPACE"," ",1133],["T_VARIABLE","$request",1133],")",["T_WHITESPACE","\n    ",1133],"{",["T_WHITESPACE","\n        ",1134],["T_VARIABLE","$this",1135],["T_OBJECT_OPERATOR","->",1135],["T_STRING","_prepareShipmentRequest",1135],"(",["T_VARIABLE","$request",1135],")",";",["T_WHITESPACE","\n        ",1135],["T_VARIABLE","$this",1136],["T_OBJECT_OPERATOR","->",1136],["T_STRING","_mapRequestToShipment",1136],"(",["T_VARIABLE","$request",1136],")",";",["T_WHITESPACE","\n        ",1136],["T_VARIABLE","$this",1137],["T_OBJECT_OPERATOR","->",1137],["T_STRING","setRequest",1137],"(",["T_VARIABLE","$request",1137],")",";",["T_WHITESPACE","\n\n        ",1137],["T_RETURN","return",1139],["T_WHITESPACE"," ",1139],["T_VARIABLE","$this",1139],["T_OBJECT_OPERATOR","->",1139],["T_STRING","_doRequest",1139],"(",")",";",["T_WHITESPACE","\n    ",1139],"}",["T_WHITESPACE","\n\n    ",1140],["T_DOC_COMMENT","\/**\n     * Processing additional validation to check is carrier applicable.\n     *\n     * @param Mage_Shipping_Model_Rate_Request $request\n     * @return Mage_Shipping_Model_Carrier_Abstract|Mage_Shipping_Model_Rate_Result_Error|boolean\n     *\/",1142],["T_WHITESPACE","\n    ",1147],["T_PUBLIC","public",1148],["T_WHITESPACE"," ",1148],["T_FUNCTION","function",1148],["T_WHITESPACE"," ",1148],["T_STRING","proccessAdditionalValidation",1148],"(",["T_STRING","Mage_Shipping_Model_Rate_Request",1148],["T_WHITESPACE"," ",1148],["T_VARIABLE","$request",1148],")",["T_WHITESPACE","\n    ",1148],"{",["T_WHITESPACE","\n        ",1149],["T_COMMENT","\/\/Skip by item validation if there is no items in request\n",1150],["T_WHITESPACE","        ",1151],["T_IF","if",1151],["T_WHITESPACE"," ",1151],"(","!",["T_STRING","count",1151],"(",["T_VARIABLE","$this",1151],["T_OBJECT_OPERATOR","->",1151],["T_STRING","getAllItems",1151],"(",["T_VARIABLE","$request",1151],")",")",")",["T_WHITESPACE"," ",1151],"{",["T_WHITESPACE","\n            ",1151],["T_VARIABLE","$this",1152],["T_OBJECT_OPERATOR","->",1152],["T_STRING","_errors",1152],"[","]",["T_WHITESPACE"," ",1152],"=",["T_WHITESPACE"," ",1152],["T_STRING","Mage",1152],["T_DOUBLE_COLON","::",1152],["T_STRING","helper",1152],"(",["T_CONSTANT_ENCAPSED_STRING","'usa'",1152],")",["T_OBJECT_OPERATOR","->",1152],["T_STRING","__",1152],"(",["T_CONSTANT_ENCAPSED_STRING","'There is no items in this order'",1152],")",";",["T_WHITESPACE","\n        ",1152],"}",["T_WHITESPACE","\n\n        ",1153],["T_VARIABLE","$countryParams",1155],["T_WHITESPACE"," ",1155],"=",["T_WHITESPACE"," ",1155],["T_VARIABLE","$this",1155],["T_OBJECT_OPERATOR","->",1155],["T_STRING","getCountryParams",1155],"(",["T_WHITESPACE","\n            ",1155],["T_STRING","Mage",1156],["T_DOUBLE_COLON","::",1156],["T_STRING","getStoreConfig",1156],"(",["T_STRING","Mage_Shipping_Model_Shipping",1156],["T_DOUBLE_COLON","::",1156],["T_STRING","XML_PATH_STORE_COUNTRY_ID",1156],",",["T_WHITESPACE"," ",1156],["T_VARIABLE","$request",1156],["T_OBJECT_OPERATOR","->",1156],["T_STRING","getStoreId",1156],"(",")",")",["T_WHITESPACE","\n        ",1156],")",";",["T_WHITESPACE","\n        ",1157],["T_IF","if",1158],["T_WHITESPACE"," ",1158],"(","!",["T_VARIABLE","$countryParams",1158],["T_OBJECT_OPERATOR","->",1158],["T_STRING","getData",1158],"(",")",")",["T_WHITESPACE"," ",1158],"{",["T_WHITESPACE","\n            ",1158],["T_VARIABLE","$this",1159],["T_OBJECT_OPERATOR","->",1159],["T_STRING","_errors",1159],"[","]",["T_WHITESPACE"," ",1159],"=",["T_WHITESPACE"," ",1159],["T_STRING","Mage",1159],["T_DOUBLE_COLON","::",1159],["T_STRING","helper",1159],"(",["T_CONSTANT_ENCAPSED_STRING","'usa'",1159],")",["T_OBJECT_OPERATOR","->",1159],["T_STRING","__",1159],"(",["T_CONSTANT_ENCAPSED_STRING","'Please, specify origin country'",1159],")",";",["T_WHITESPACE","\n        ",1159],"}",["T_WHITESPACE","\n\n        ",1160],["T_IF","if",1162],["T_WHITESPACE"," ",1162],"(","!",["T_EMPTY","empty",1162],"(",["T_VARIABLE","$this",1162],["T_OBJECT_OPERATOR","->",1162],["T_STRING","_errors",1162],")",")",["T_WHITESPACE"," ",1162],"{",["T_WHITESPACE","\n            ",1162],["T_RETURN","return",1163],["T_WHITESPACE"," ",1163],["T_VARIABLE","$this",1163],["T_OBJECT_OPERATOR","->",1163],["T_STRING","_showError",1163],"(",")",";",["T_WHITESPACE","\n        ",1163],"}",["T_WHITESPACE","\n\n        ",1164],["T_RETURN","return",1166],["T_WHITESPACE"," ",1166],["T_VARIABLE","$this",1166],";",["T_WHITESPACE","\n    ",1166],"}",["T_WHITESPACE","\n\n    ",1167],["T_DOC_COMMENT","\/**\n     * Show default error\n     *\n     * @return bool|Mage_Shipping_Model_Rate_Result_Error\n     *\/",1169],["T_WHITESPACE","\n    ",1173],["T_PROTECTED","protected",1174],["T_WHITESPACE"," ",1174],["T_FUNCTION","function",1174],["T_WHITESPACE"," ",1174],["T_STRING","_showError",1174],"(",")",["T_WHITESPACE","\n    ",1174],"{",["T_WHITESPACE","\n        ",1175],["T_VARIABLE","$showMethod",1176],["T_WHITESPACE"," ",1176],"=",["T_WHITESPACE"," ",1176],["T_VARIABLE","$this",1176],["T_OBJECT_OPERATOR","->",1176],["T_STRING","getConfigData",1176],"(",["T_CONSTANT_ENCAPSED_STRING","'showmethod'",1176],")",";",["T_WHITESPACE","\n\n        ",1176],["T_IF","if",1178],["T_WHITESPACE"," ",1178],"(",["T_VARIABLE","$showMethod",1178],")",["T_WHITESPACE"," ",1178],"{",["T_WHITESPACE","\n            ",1178],["T_COMMENT","\/* @var $error Mage_Shipping_Model_Rate_Result_Error *\/",1179],["T_WHITESPACE","\n            ",1179],["T_VARIABLE","$error",1180],["T_WHITESPACE"," ",1180],"=",["T_WHITESPACE"," ",1180],["T_STRING","Mage",1180],["T_DOUBLE_COLON","::",1180],["T_STRING","getModel",1180],"(",["T_CONSTANT_ENCAPSED_STRING","'shipping\/rate_result_error'",1180],")",";",["T_WHITESPACE","\n            ",1180],["T_VARIABLE","$error",1181],["T_OBJECT_OPERATOR","->",1181],["T_STRING","setCarrier",1181],"(",["T_STRING","self",1181],["T_DOUBLE_COLON","::",1181],["T_STRING","CODE",1181],")",";",["T_WHITESPACE","\n            ",1181],["T_VARIABLE","$error",1182],["T_OBJECT_OPERATOR","->",1182],["T_STRING","setCarrierTitle",1182],"(",["T_VARIABLE","$this",1182],["T_OBJECT_OPERATOR","->",1182],["T_STRING","getConfigData",1182],"(",["T_CONSTANT_ENCAPSED_STRING","'title'",1182],")",")",";",["T_WHITESPACE","\n            ",1182],["T_VARIABLE","$error",1183],["T_OBJECT_OPERATOR","->",1183],["T_STRING","setErrorMessage",1183],"(",["T_VARIABLE","$this",1183],["T_OBJECT_OPERATOR","->",1183],["T_STRING","getConfigData",1183],"(",["T_CONSTANT_ENCAPSED_STRING","'specificerrmsg'",1183],")",")",";",["T_WHITESPACE","\n            ",1183],["T_VARIABLE","$this",1184],["T_OBJECT_OPERATOR","->",1184],["T_STRING","_debug",1184],"(",["T_VARIABLE","$this",1184],["T_OBJECT_OPERATOR","->",1184],["T_STRING","_errors",1184],")",";",["T_WHITESPACE","\n            ",1184],["T_RETURN","return",1185],["T_WHITESPACE"," ",1185],["T_VARIABLE","$error",1185],";",["T_WHITESPACE","\n        ",1185],"}",["T_WHITESPACE"," ",1186],["T_ELSE","else",1186],["T_WHITESPACE"," ",1186],"{",["T_WHITESPACE","\n            ",1186],["T_RETURN","return",1187],["T_WHITESPACE"," ",1187],["T_STRING","false",1187],";",["T_WHITESPACE","\n        ",1187],"}",["T_WHITESPACE","\n    ",1188],"}",["T_WHITESPACE","\n\n    ",1189],["T_DOC_COMMENT","\/**\n     * Return container types of carrier\n     *\n     * @param Varien_Object|null $params\n     * @return array\n     *\/",1191],["T_WHITESPACE","\n    ",1196],["T_PUBLIC","public",1197],["T_WHITESPACE"," ",1197],["T_FUNCTION","function",1197],["T_WHITESPACE"," ",1197],["T_STRING","getContainerTypes",1197],"(",["T_STRING","Varien_Object",1197],["T_WHITESPACE"," ",1197],["T_VARIABLE","$params",1197],["T_WHITESPACE"," ",1197],"=",["T_WHITESPACE"," ",1197],["T_STRING","null",1197],")",["T_WHITESPACE","\n    ",1197],"{",["T_WHITESPACE","\n        ",1198],["T_RETURN","return",1199],["T_WHITESPACE"," ",1199],["T_ARRAY","array",1199],"(",["T_WHITESPACE","\n            ",1199],["T_STRING","self",1200],["T_DOUBLE_COLON","::",1200],["T_STRING","DHL_CONTENT_TYPE_DOC",1200],["T_WHITESPACE","      ",1200],["T_DOUBLE_ARROW","=>",1200],["T_WHITESPACE"," ",1200],["T_STRING","Mage",1200],["T_DOUBLE_COLON","::",1200],["T_STRING","helper",1200],"(",["T_CONSTANT_ENCAPSED_STRING","'usa'",1200],")",["T_OBJECT_OPERATOR","->",1200],["T_STRING","__",1200],"(",["T_CONSTANT_ENCAPSED_STRING","'Documents'",1200],")",",",["T_WHITESPACE","\n            ",1200],["T_STRING","self",1201],["T_DOUBLE_COLON","::",1201],["T_STRING","DHL_CONTENT_TYPE_NON_DOC",1201],["T_WHITESPACE","  ",1201],["T_DOUBLE_ARROW","=>",1201],["T_WHITESPACE"," ",1201],["T_STRING","Mage",1201],["T_DOUBLE_COLON","::",1201],["T_STRING","helper",1201],"(",["T_CONSTANT_ENCAPSED_STRING","'usa'",1201],")",["T_OBJECT_OPERATOR","->",1201],["T_STRING","__",1201],"(",["T_CONSTANT_ENCAPSED_STRING","'Non Documents'",1201],")",["T_WHITESPACE","\n        ",1201],")",";",["T_WHITESPACE","\n    ",1202],"}",["T_WHITESPACE","\n\n    ",1203],["T_DOC_COMMENT","\/**\n     * Map request to shipment\n     *\n     * @param Varien_Object $request\n     * @return null\n     *\/",1205],["T_WHITESPACE","\n    ",1210],["T_PROTECTED","protected",1211],["T_WHITESPACE"," ",1211],["T_FUNCTION","function",1211],["T_WHITESPACE"," ",1211],["T_STRING","_mapRequestToShipment",1211],"(",["T_STRING","Varien_Object",1211],["T_WHITESPACE"," ",1211],["T_VARIABLE","$request",1211],")",["T_WHITESPACE","\n    ",1211],"{",["T_WHITESPACE","\n\n        ",1212],["T_VARIABLE","$request",1214],["T_OBJECT_OPERATOR","->",1214],["T_STRING","setOrigCountryId",1214],"(",["T_VARIABLE","$request",1214],["T_OBJECT_OPERATOR","->",1214],["T_STRING","getShipperAddressCountryCode",1214],"(",")",")",";",["T_WHITESPACE","\n        ",1214],["T_VARIABLE","$this",1215],["T_OBJECT_OPERATOR","->",1215],["T_STRING","_rawRequest",1215],["T_WHITESPACE"," ",1215],"=",["T_WHITESPACE"," ",1215],["T_VARIABLE","$request",1215],";",["T_WHITESPACE","\n        ",1215],["T_VARIABLE","$customsValue",1216],["T_WHITESPACE"," ",1216],"=",["T_WHITESPACE"," ",1216],["T_LNUMBER","0",1216],";",["T_WHITESPACE","\n        ",1216],["T_VARIABLE","$packageWeight",1217],["T_WHITESPACE"," ",1217],"=",["T_WHITESPACE"," ",1217],["T_LNUMBER","0",1217],";",["T_WHITESPACE","\n        ",1217],["T_VARIABLE","$packages",1218],["T_WHITESPACE"," ",1218],"=",["T_WHITESPACE"," ",1218],["T_VARIABLE","$request",1218],["T_OBJECT_OPERATOR","->",1218],["T_STRING","getPackages",1218],"(",")",";",["T_WHITESPACE","\n        ",1218],["T_FOREACH","foreach",1219],["T_WHITESPACE"," ",1219],"(",["T_VARIABLE","$packages",1219],["T_WHITESPACE"," ",1219],["T_AS","as",1219],["T_WHITESPACE"," ",1219],"&",["T_VARIABLE","$piece",1219],")",["T_WHITESPACE"," ",1219],"{",["T_WHITESPACE","\n            ",1219],["T_VARIABLE","$params",1220],["T_WHITESPACE"," ",1220],"=",["T_WHITESPACE"," ",1220],["T_VARIABLE","$piece",1220],"[",["T_CONSTANT_ENCAPSED_STRING","'params'",1220],"]",";",["T_WHITESPACE","\n            ",1220],["T_IF","if",1221],["T_WHITESPACE"," ",1221],"(",["T_VARIABLE","$params",1221],"[",["T_CONSTANT_ENCAPSED_STRING","'width'",1221],"]",["T_WHITESPACE"," ",1221],["T_BOOLEAN_OR","||",1221],["T_WHITESPACE"," ",1221],["T_VARIABLE","$params",1221],"[",["T_CONSTANT_ENCAPSED_STRING","'length'",1221],"]",["T_WHITESPACE"," ",1221],["T_BOOLEAN_OR","||",1221],["T_WHITESPACE"," ",1221],["T_VARIABLE","$params",1221],"[",["T_CONSTANT_ENCAPSED_STRING","'height'",1221],"]",")",["T_WHITESPACE"," ",1221],"{",["T_WHITESPACE","\n                ",1221],["T_VARIABLE","$minValue",1222],["T_WHITESPACE"," ",1222],"=",["T_WHITESPACE"," ",1222],["T_VARIABLE","$this",1222],["T_OBJECT_OPERATOR","->",1222],["T_STRING","_getMinDimension",1222],"(",["T_VARIABLE","$params",1222],"[",["T_CONSTANT_ENCAPSED_STRING","'dimension_units'",1222],"]",")",";",["T_WHITESPACE","\n                ",1222],["T_IF","if",1223],["T_WHITESPACE"," ",1223],"(",["T_VARIABLE","$params",1223],"[",["T_CONSTANT_ENCAPSED_STRING","'width'",1223],"]",["T_WHITESPACE"," ",1223],"<",["T_WHITESPACE"," ",1223],["T_VARIABLE","$minValue",1223],["T_WHITESPACE"," ",1223],["T_BOOLEAN_OR","||",1223],["T_WHITESPACE"," ",1223],["T_VARIABLE","$params",1223],"[",["T_CONSTANT_ENCAPSED_STRING","'length'",1223],"]",["T_WHITESPACE"," ",1223],"<",["T_WHITESPACE"," ",1223],["T_VARIABLE","$minValue",1223],["T_WHITESPACE"," ",1223],["T_BOOLEAN_OR","||",1223],["T_WHITESPACE"," ",1223],["T_VARIABLE","$params",1223],"[",["T_CONSTANT_ENCAPSED_STRING","'height'",1223],"]",["T_WHITESPACE"," ",1223],"<",["T_WHITESPACE"," ",1223],["T_VARIABLE","$minValue",1223],")",["T_WHITESPACE"," ",1223],"{",["T_WHITESPACE","\n                    ",1223],["T_VARIABLE","$message",1224],["T_WHITESPACE"," ",1224],"=",["T_WHITESPACE"," ",1224],["T_STRING","Mage",1224],["T_DOUBLE_COLON","::",1224],["T_STRING","helper",1224],"(",["T_CONSTANT_ENCAPSED_STRING","'usa'",1224],")",["T_OBJECT_OPERATOR","->",1224],["T_STRING","__",1224],"(",["T_CONSTANT_ENCAPSED_STRING","'Height, width and length should be equal or greater than %s'",1224],",",["T_WHITESPACE"," ",1224],["T_VARIABLE","$minValue",1224],")",";",["T_WHITESPACE","\n                    ",1224],["T_STRING","Mage",1225],["T_DOUBLE_COLON","::",1225],["T_STRING","throwException",1225],"(",["T_VARIABLE","$message",1225],")",";",["T_WHITESPACE","\n                ",1225],"}",["T_WHITESPACE","\n            ",1226],"}",["T_WHITESPACE","\n\n            ",1227],["T_VARIABLE","$weightUnits",1229],["T_WHITESPACE"," ",1229],"=",["T_WHITESPACE"," ",1229],["T_VARIABLE","$piece",1229],"[",["T_CONSTANT_ENCAPSED_STRING","'params'",1229],"]","[",["T_CONSTANT_ENCAPSED_STRING","'weight_units'",1229],"]",";",["T_WHITESPACE","\n            ",1229],["T_VARIABLE","$piece",1230],"[",["T_CONSTANT_ENCAPSED_STRING","'params'",1230],"]","[",["T_CONSTANT_ENCAPSED_STRING","'height'",1230],"]",["T_WHITESPACE","          ",1230],"=",["T_WHITESPACE","  ",1230],["T_VARIABLE","$this",1230],["T_OBJECT_OPERATOR","->",1230],["T_STRING","_getDimension",1230],"(",["T_VARIABLE","$piece",1230],"[",["T_CONSTANT_ENCAPSED_STRING","'params'",1230],"]","[",["T_CONSTANT_ENCAPSED_STRING","'height'",1230],"]",",",["T_WHITESPACE"," ",1230],["T_VARIABLE","$weightUnits",1230],")",";",["T_WHITESPACE","\n            ",1230],["T_VARIABLE","$piece",1231],"[",["T_CONSTANT_ENCAPSED_STRING","'params'",1231],"]","[",["T_CONSTANT_ENCAPSED_STRING","'length'",1231],"]",["T_WHITESPACE","          ",1231],"=",["T_WHITESPACE","  ",1231],["T_VARIABLE","$this",1231],["T_OBJECT_OPERATOR","->",1231],["T_STRING","_getDimension",1231],"(",["T_VARIABLE","$piece",1231],"[",["T_CONSTANT_ENCAPSED_STRING","'params'",1231],"]","[",["T_CONSTANT_ENCAPSED_STRING","'length'",1231],"]",",",["T_WHITESPACE"," ",1231],["T_VARIABLE","$weightUnits",1231],")",";",["T_WHITESPACE","\n            ",1231],["T_VARIABLE","$piece",1232],"[",["T_CONSTANT_ENCAPSED_STRING","'params'",1232],"]","[",["T_CONSTANT_ENCAPSED_STRING","'width'",1232],"]",["T_WHITESPACE","           ",1232],"=",["T_WHITESPACE","  ",1232],["T_VARIABLE","$this",1232],["T_OBJECT_OPERATOR","->",1232],["T_STRING","_getDimension",1232],"(",["T_VARIABLE","$piece",1232],"[",["T_CONSTANT_ENCAPSED_STRING","'params'",1232],"]","[",["T_CONSTANT_ENCAPSED_STRING","'width'",1232],"]",",",["T_WHITESPACE"," ",1232],["T_VARIABLE","$weightUnits",1232],")",";",["T_WHITESPACE","\n            ",1232],["T_VARIABLE","$piece",1233],"[",["T_CONSTANT_ENCAPSED_STRING","'params'",1233],"]","[",["T_CONSTANT_ENCAPSED_STRING","'dimension_units'",1233],"]",["T_WHITESPACE"," ",1233],"=",["T_WHITESPACE","  ",1233],["T_VARIABLE","$this",1233],["T_OBJECT_OPERATOR","->",1233],["T_STRING","_getDimensionUnit",1233],"(",")",";",["T_WHITESPACE","\n            ",1233],["T_VARIABLE","$piece",1234],"[",["T_CONSTANT_ENCAPSED_STRING","'params'",1234],"]","[",["T_CONSTANT_ENCAPSED_STRING","'weight'",1234],"]",["T_WHITESPACE","          ",1234],"=",["T_WHITESPACE","  ",1234],["T_VARIABLE","$this",1234],["T_OBJECT_OPERATOR","->",1234],["T_STRING","_getWeight",1234],"(",["T_VARIABLE","$piece",1234],"[",["T_CONSTANT_ENCAPSED_STRING","'params'",1234],"]","[",["T_CONSTANT_ENCAPSED_STRING","'weight'",1234],"]",",",["T_WHITESPACE"," ",1234],["T_STRING","false",1234],",",["T_WHITESPACE"," ",1234],["T_VARIABLE","$weightUnits",1234],")",";",["T_WHITESPACE","\n            ",1234],["T_VARIABLE","$piece",1235],"[",["T_CONSTANT_ENCAPSED_STRING","'params'",1235],"]","[",["T_CONSTANT_ENCAPSED_STRING","'weight_units'",1235],"]",["T_WHITESPACE","    ",1235],"=",["T_WHITESPACE","  ",1235],["T_VARIABLE","$this",1235],["T_OBJECT_OPERATOR","->",1235],["T_STRING","_getWeightUnit",1235],"(",")",";",["T_WHITESPACE","\n\n            ",1235],["T_VARIABLE","$customsValue",1237],["T_WHITESPACE"," ",1237],["T_PLUS_EQUAL","+=",1237],["T_WHITESPACE"," ",1237],["T_VARIABLE","$piece",1237],"[",["T_CONSTANT_ENCAPSED_STRING","'params'",1237],"]","[",["T_CONSTANT_ENCAPSED_STRING","'customs_value'",1237],"]",";",["T_WHITESPACE","\n            ",1237],["T_VARIABLE","$packageWeight",1238],["T_WHITESPACE"," ",1238],["T_PLUS_EQUAL","+=",1238],["T_WHITESPACE"," ",1238],["T_VARIABLE","$piece",1238],"[",["T_CONSTANT_ENCAPSED_STRING","'params'",1238],"]","[",["T_CONSTANT_ENCAPSED_STRING","'weight'",1238],"]",";",["T_WHITESPACE","\n        ",1238],"}",["T_WHITESPACE","\n\n        ",1239],["T_VARIABLE","$request",1241],["T_OBJECT_OPERATOR","->",1241],["T_STRING","setPackages",1241],"(",["T_VARIABLE","$packages",1241],")",["T_WHITESPACE","\n            ",1241],["T_OBJECT_OPERATOR","->",1242],["T_STRING","setPackageWeight",1242],"(",["T_VARIABLE","$packageWeight",1242],")",["T_WHITESPACE","\n            ",1242],["T_OBJECT_OPERATOR","->",1243],["T_STRING","setPackageValue",1243],"(",["T_VARIABLE","$customsValue",1243],")",["T_WHITESPACE","\n            ",1243],["T_OBJECT_OPERATOR","->",1244],["T_STRING","setValueWithDiscount",1244],"(",["T_VARIABLE","$customsValue",1244],")",["T_WHITESPACE","\n            ",1244],["T_OBJECT_OPERATOR","->",1245],["T_STRING","setPackageCustomsValue",1245],"(",["T_VARIABLE","$customsValue",1245],")",["T_WHITESPACE","\n            ",1245],["T_OBJECT_OPERATOR","->",1246],["T_STRING","setFreeMethodWeight",1246],"(",["T_LNUMBER","0",1246],")",";",["T_WHITESPACE","\n    ",1246],"}",["T_WHITESPACE","\n\n        ",1247],["T_DOC_COMMENT","\/**\n         * Retrieve minimum allowed value for dimensions in given dimension unit\n         *\n         * @param string $dimensionUnit\n         * @return int\n         *\/",1249],["T_WHITESPACE","\n        ",1254],["T_PROTECTED","protected",1255],["T_WHITESPACE"," ",1255],["T_FUNCTION","function",1255],["T_WHITESPACE"," ",1255],["T_STRING","_getMinDimension",1255],"(",["T_VARIABLE","$dimensionUnit",1255],")",["T_WHITESPACE","\n        ",1255],"{",["T_WHITESPACE","\n            ",1256],["T_RETURN","return",1257],["T_WHITESPACE"," ",1257],["T_VARIABLE","$dimensionUnit",1257],["T_WHITESPACE"," ",1257],["T_IS_EQUAL","==",1257],["T_WHITESPACE"," ",1257],["T_CONSTANT_ENCAPSED_STRING","\"CENTIMETER\"",1257],["T_WHITESPACE"," ",1257],"?",["T_WHITESPACE"," ",1257],["T_STRING","self",1257],["T_DOUBLE_COLON","::",1257],["T_STRING","DIMENSION_MIN_CM",1257],["T_WHITESPACE"," ",1257],":",["T_WHITESPACE"," ",1257],["T_STRING","self",1257],["T_DOUBLE_COLON","::",1257],["T_STRING","DIMENSION_MIN_IN",1257],";",["T_WHITESPACE","\n        ",1257],"}",["T_WHITESPACE","\n\n    ",1258],["T_DOC_COMMENT","\/**\n     * Do rate request and handle errors\n     *\n     * @return Mage_Shipping_Model_Rate_Result|Varien_Object\n     *\/",1260],["T_WHITESPACE","\n    ",1264],["T_PROTECTED","protected",1265],["T_WHITESPACE"," ",1265],["T_FUNCTION","function",1265],["T_WHITESPACE"," ",1265],["T_STRING","_doRequest",1265],"(",")",["T_WHITESPACE","\n    ",1265],"{",["T_WHITESPACE","\n        ",1266],["T_VARIABLE","$rawRequest",1267],["T_WHITESPACE"," ",1267],"=",["T_WHITESPACE"," ",1267],["T_VARIABLE","$this",1267],["T_OBJECT_OPERATOR","->",1267],["T_STRING","_request",1267],";",["T_WHITESPACE","\n\n        ",1267],["T_VARIABLE","$originRegion",1269],["T_WHITESPACE"," ",1269],"=",["T_WHITESPACE"," ",1269],["T_STRING_CAST","(string)",1269],["T_VARIABLE","$this",1269],["T_OBJECT_OPERATOR","->",1269],["T_STRING","getCountryParams",1269],"(",["T_WHITESPACE","\n            ",1269],["T_STRING","Mage",1270],["T_DOUBLE_COLON","::",1270],["T_STRING","getStoreConfig",1270],"(",["T_STRING","Mage_Shipping_Model_Shipping",1270],["T_DOUBLE_COLON","::",1270],["T_STRING","XML_PATH_STORE_COUNTRY_ID",1270],",",["T_WHITESPACE"," ",1270],["T_VARIABLE","$this",1270],["T_OBJECT_OPERATOR","->",1270],["T_STRING","getStore",1270],"(",")",")",["T_WHITESPACE","\n        ",1270],")",["T_OBJECT_OPERATOR","->",1271],["T_STRING","region",1271],";",["T_WHITESPACE","\n\n        ",1271],["T_IF","if",1273],["T_WHITESPACE"," ",1273],"(","!",["T_VARIABLE","$originRegion",1273],")",["T_WHITESPACE"," ",1273],"{",["T_WHITESPACE","\n            ",1273],["T_STRING","Mage",1274],["T_DOUBLE_COLON","::",1274],["T_STRING","throwException",1274],"(",["T_STRING","Mage",1274],["T_DOUBLE_COLON","::",1274],["T_STRING","helper",1274],"(",["T_CONSTANT_ENCAPSED_STRING","'usa'",1274],")",["T_OBJECT_OPERATOR","->",1274],["T_STRING","__",1274],"(",["T_CONSTANT_ENCAPSED_STRING","'Wrong Region.'",1274],")",")",";",["T_WHITESPACE","\n        ",1274],"}",["T_WHITESPACE","\n\n        ",1275],["T_IF","if",1277],["T_WHITESPACE"," ",1277],"(",["T_VARIABLE","$originRegion",1277],["T_WHITESPACE"," ",1277],["T_IS_EQUAL","==",1277],["T_WHITESPACE"," ",1277],["T_CONSTANT_ENCAPSED_STRING","'AM'",1277],")",["T_WHITESPACE"," ",1277],"{",["T_WHITESPACE","\n            ",1277],["T_VARIABLE","$originRegion",1278],["T_WHITESPACE"," ",1278],"=",["T_WHITESPACE"," ",1278],["T_CONSTANT_ENCAPSED_STRING","''",1278],";",["T_WHITESPACE","\n        ",1278],"}",["T_WHITESPACE","\n\n        ",1279],["T_VARIABLE","$xmlStr",1281],["T_WHITESPACE"," ",1281],"=",["T_WHITESPACE"," ",1281],["T_CONSTANT_ENCAPSED_STRING","'<?xml version=\"1.0\" encoding=\"UTF-8\"?>'",1281],["T_WHITESPACE","\n            ",1281],".",["T_WHITESPACE"," ",1282],["T_CONSTANT_ENCAPSED_STRING","'<req:ShipmentValidateRequest'",1282],["T_WHITESPACE"," ",1282],".",["T_WHITESPACE"," ",1282],["T_VARIABLE","$originRegion",1282],["T_WHITESPACE","\n            ",1282],".",["T_WHITESPACE"," ",1283],["T_CONSTANT_ENCAPSED_STRING","' xmlns:req=\"http:\/\/www.dhl.com\"'",1283],["T_WHITESPACE","\n            ",1283],".",["T_WHITESPACE"," ",1284],["T_CONSTANT_ENCAPSED_STRING","' xmlns:xsi=\"http:\/\/www.w3.org\/2001\/XMLSchema-instance\"'",1284],["T_WHITESPACE","\n            ",1284],".",["T_WHITESPACE"," ",1285],["T_CONSTANT_ENCAPSED_STRING","' xsi:schemaLocation=\"http:\/\/www.dhl.com ship-val-req'",1285],["T_WHITESPACE","\n            ",1285],".",["T_WHITESPACE"," ",1286],"(",["T_VARIABLE","$originRegion",1286],["T_WHITESPACE"," ",1286],"?",["T_WHITESPACE"," ",1286],["T_CONSTANT_ENCAPSED_STRING","'_'",1286],["T_WHITESPACE"," ",1286],".",["T_WHITESPACE"," ",1286],["T_VARIABLE","$originRegion",1286],["T_WHITESPACE"," ",1286],":",["T_WHITESPACE"," ",1286],["T_CONSTANT_ENCAPSED_STRING","''",1286],")",["T_WHITESPACE"," ",1286],".",["T_WHITESPACE"," ",1286],["T_CONSTANT_ENCAPSED_STRING","'.xsd\" \/>'",1286],";",["T_WHITESPACE","\n        ",1286],["T_VARIABLE","$xml",1287],["T_WHITESPACE"," ",1287],"=",["T_WHITESPACE"," ",1287],["T_NEW","new",1287],["T_WHITESPACE"," ",1287],["T_STRING","SimpleXMLElement",1287],"(",["T_VARIABLE","$xmlStr",1287],")",";",["T_WHITESPACE","\n\n        ",1287],["T_VARIABLE","$nodeRequest",1289],["T_WHITESPACE"," ",1289],"=",["T_WHITESPACE"," ",1289],["T_VARIABLE","$xml",1289],["T_OBJECT_OPERATOR","->",1289],["T_STRING","addChild",1289],"(",["T_CONSTANT_ENCAPSED_STRING","'Request'",1289],",",["T_WHITESPACE"," ",1289],["T_CONSTANT_ENCAPSED_STRING","''",1289],",",["T_WHITESPACE"," ",1289],["T_CONSTANT_ENCAPSED_STRING","''",1289],")",";",["T_WHITESPACE","\n        ",1289],["T_VARIABLE","$nodeServiceHeader",1290],["T_WHITESPACE"," ",1290],"=",["T_WHITESPACE"," ",1290],["T_VARIABLE","$nodeRequest",1290],["T_OBJECT_OPERATOR","->",1290],["T_STRING","addChild",1290],"(",["T_CONSTANT_ENCAPSED_STRING","'ServiceHeader'",1290],")",";",["T_WHITESPACE","\n        ",1290],["T_VARIABLE","$nodeServiceHeader",1291],["T_OBJECT_OPERATOR","->",1291],["T_STRING","addChild",1291],"(",["T_CONSTANT_ENCAPSED_STRING","'SiteID'",1291],",",["T_WHITESPACE"," ",1291],["T_STRING_CAST","(string)",1291],["T_VARIABLE","$this",1291],["T_OBJECT_OPERATOR","->",1291],["T_STRING","getConfigData",1291],"(",["T_CONSTANT_ENCAPSED_STRING","'id'",1291],")",")",";",["T_WHITESPACE","\n        ",1291],["T_VARIABLE","$nodeServiceHeader",1292],["T_OBJECT_OPERATOR","->",1292],["T_STRING","addChild",1292],"(",["T_CONSTANT_ENCAPSED_STRING","'Password'",1292],",",["T_WHITESPACE"," ",1292],["T_STRING_CAST","(string)",1292],["T_VARIABLE","$this",1292],["T_OBJECT_OPERATOR","->",1292],["T_STRING","getConfigData",1292],"(",["T_CONSTANT_ENCAPSED_STRING","'password'",1292],")",")",";",["T_WHITESPACE","\n\n        ",1292],["T_IF","if",1294],["T_WHITESPACE"," ",1294],"(","!",["T_VARIABLE","$originRegion",1294],")",["T_WHITESPACE"," ",1294],"{",["T_WHITESPACE","\n            ",1294],["T_VARIABLE","$xml",1295],["T_OBJECT_OPERATOR","->",1295],["T_STRING","addChild",1295],"(",["T_CONSTANT_ENCAPSED_STRING","'RequestedPickupTime'",1295],",",["T_WHITESPACE"," ",1295],["T_CONSTANT_ENCAPSED_STRING","'N'",1295],",",["T_WHITESPACE"," ",1295],["T_CONSTANT_ENCAPSED_STRING","''",1295],")",";",["T_WHITESPACE","\n        ",1295],"}",["T_WHITESPACE","\n        ",1296],["T_VARIABLE","$xml",1297],["T_OBJECT_OPERATOR","->",1297],["T_STRING","addChild",1297],"(",["T_CONSTANT_ENCAPSED_STRING","'NewShipper'",1297],",",["T_WHITESPACE"," ",1297],["T_CONSTANT_ENCAPSED_STRING","'N'",1297],",",["T_WHITESPACE"," ",1297],["T_CONSTANT_ENCAPSED_STRING","''",1297],")",";",["T_WHITESPACE","\n        ",1297],["T_VARIABLE","$xml",1298],["T_OBJECT_OPERATOR","->",1298],["T_STRING","addChild",1298],"(",["T_CONSTANT_ENCAPSED_STRING","'LanguageCode'",1298],",",["T_WHITESPACE"," ",1298],["T_CONSTANT_ENCAPSED_STRING","'EN'",1298],",",["T_WHITESPACE"," ",1298],["T_CONSTANT_ENCAPSED_STRING","''",1298],")",";",["T_WHITESPACE","\n        ",1298],["T_VARIABLE","$xml",1299],["T_OBJECT_OPERATOR","->",1299],["T_STRING","addChild",1299],"(",["T_CONSTANT_ENCAPSED_STRING","'PiecesEnabled'",1299],",",["T_WHITESPACE"," ",1299],["T_CONSTANT_ENCAPSED_STRING","'Y'",1299],",",["T_WHITESPACE"," ",1299],["T_CONSTANT_ENCAPSED_STRING","''",1299],")",";",["T_WHITESPACE","\n\n        ",1299],["T_COMMENT","\/* Billing *\/",1301],["T_WHITESPACE","\n        ",1301],["T_VARIABLE","$nodeBilling",1302],["T_WHITESPACE"," ",1302],"=",["T_WHITESPACE"," ",1302],["T_VARIABLE","$xml",1302],["T_OBJECT_OPERATOR","->",1302],["T_STRING","addChild",1302],"(",["T_CONSTANT_ENCAPSED_STRING","'Billing'",1302],",",["T_WHITESPACE"," ",1302],["T_CONSTANT_ENCAPSED_STRING","''",1302],",",["T_WHITESPACE"," ",1302],["T_CONSTANT_ENCAPSED_STRING","''",1302],")",";",["T_WHITESPACE","\n        ",1302],["T_VARIABLE","$nodeBilling",1303],["T_OBJECT_OPERATOR","->",1303],["T_STRING","addChild",1303],"(",["T_CONSTANT_ENCAPSED_STRING","'ShipperAccountNumber'",1303],",",["T_WHITESPACE"," ",1303],["T_STRING_CAST","(string)",1303],["T_VARIABLE","$this",1303],["T_OBJECT_OPERATOR","->",1303],["T_STRING","getConfigData",1303],"(",["T_CONSTANT_ENCAPSED_STRING","'account'",1303],")",")",";",["T_WHITESPACE","\n        ",1303],["T_COMMENT","\/*\n         * Method of Payment:\n         * S (Shipper)\n         * R (Receiver)\n         * T (Third Party)\n         *\/",1304],["T_WHITESPACE","\n        ",1309],["T_VARIABLE","$nodeBilling",1310],["T_OBJECT_OPERATOR","->",1310],["T_STRING","addChild",1310],"(",["T_CONSTANT_ENCAPSED_STRING","'ShippingPaymentType'",1310],",",["T_WHITESPACE"," ",1310],["T_CONSTANT_ENCAPSED_STRING","'S'",1310],")",";",["T_WHITESPACE","\n\n        ",1310],["T_COMMENT","\/*\n         * Shipment bill to account \u00e2\u0080\u0093 required if Shipping PaymentType is other than 'S'\n         *\/",1312],["T_WHITESPACE","\n        ",1314],["T_VARIABLE","$nodeBilling",1315],["T_OBJECT_OPERATOR","->",1315],["T_STRING","addChild",1315],"(",["T_CONSTANT_ENCAPSED_STRING","'BillingAccountNumber'",1315],",",["T_WHITESPACE"," ",1315],["T_STRING_CAST","(string)",1315],["T_VARIABLE","$this",1315],["T_OBJECT_OPERATOR","->",1315],["T_STRING","getConfigData",1315],"(",["T_CONSTANT_ENCAPSED_STRING","'account'",1315],")",")",";",["T_WHITESPACE","\n        ",1315],["T_VARIABLE","$nodeBilling",1316],["T_OBJECT_OPERATOR","->",1316],["T_STRING","addChild",1316],"(",["T_CONSTANT_ENCAPSED_STRING","'DutyPaymentType'",1316],",",["T_WHITESPACE"," ",1316],["T_CONSTANT_ENCAPSED_STRING","'S'",1316],")",";",["T_WHITESPACE","\n        ",1316],["T_VARIABLE","$nodeBilling",1317],["T_OBJECT_OPERATOR","->",1317],["T_STRING","addChild",1317],"(",["T_CONSTANT_ENCAPSED_STRING","'DutyAccountNumber'",1317],",",["T_WHITESPACE"," ",1317],["T_STRING_CAST","(string)",1317],["T_VARIABLE","$this",1317],["T_OBJECT_OPERATOR","->",1317],["T_STRING","getConfigData",1317],"(",["T_CONSTANT_ENCAPSED_STRING","'account'",1317],")",")",";",["T_WHITESPACE","\n\n        ",1317],["T_COMMENT","\/* Receiver *\/",1319],["T_WHITESPACE","\n        ",1319],["T_VARIABLE","$nodeConsignee",1320],["T_WHITESPACE"," ",1320],"=",["T_WHITESPACE"," ",1320],["T_VARIABLE","$xml",1320],["T_OBJECT_OPERATOR","->",1320],["T_STRING","addChild",1320],"(",["T_CONSTANT_ENCAPSED_STRING","'Consignee'",1320],",",["T_WHITESPACE"," ",1320],["T_CONSTANT_ENCAPSED_STRING","''",1320],",",["T_WHITESPACE"," ",1320],["T_CONSTANT_ENCAPSED_STRING","''",1320],")",";",["T_WHITESPACE","\n\n        ",1320],["T_VARIABLE","$companyName",1322],["T_WHITESPACE"," ",1322],"=",["T_WHITESPACE"," ",1322],"(",["T_VARIABLE","$rawRequest",1322],["T_OBJECT_OPERATOR","->",1322],["T_STRING","getRecipientContactCompanyName",1322],"(",")",")",["T_WHITESPACE","\n            ",1322],"?",["T_WHITESPACE"," ",1323],["T_VARIABLE","$rawRequest",1323],["T_OBJECT_OPERATOR","->",1323],["T_STRING","getRecipientContactCompanyName",1323],"(",")",["T_WHITESPACE","\n            ",1323],":",["T_WHITESPACE"," ",1324],["T_VARIABLE","$rawRequest",1324],["T_OBJECT_OPERATOR","->",1324],["T_STRING","getRecipientContactPersonName",1324],"(",")",";",["T_WHITESPACE","\n\n        ",1324],["T_VARIABLE","$nodeConsignee",1326],["T_OBJECT_OPERATOR","->",1326],["T_STRING","addChild",1326],"(",["T_CONSTANT_ENCAPSED_STRING","'CompanyName'",1326],",",["T_WHITESPACE"," ",1326],["T_STRING","substr",1326],"(",["T_VARIABLE","$companyName",1326],",",["T_WHITESPACE"," ",1326],["T_LNUMBER","0",1326],",",["T_WHITESPACE"," ",1326],["T_LNUMBER","35",1326],")",")",";",["T_WHITESPACE","\n\n        ",1326],["T_VARIABLE","$address",1328],["T_WHITESPACE"," ",1328],"=",["T_WHITESPACE"," ",1328],["T_VARIABLE","$rawRequest",1328],["T_OBJECT_OPERATOR","->",1328],["T_STRING","getRecipientAddressStreet1",1328],"(",")",".",["T_WHITESPACE"," ",1328],["T_CONSTANT_ENCAPSED_STRING","' '",1328],["T_WHITESPACE"," ",1328],".",["T_WHITESPACE"," ",1328],["T_VARIABLE","$rawRequest",1328],["T_OBJECT_OPERATOR","->",1328],["T_STRING","getRecipientAddressStreet2",1328],"(",")",";",["T_WHITESPACE","\n        ",1328],["T_VARIABLE","$address",1329],["T_WHITESPACE"," ",1329],"=",["T_WHITESPACE"," ",1329],["T_STRING","Mage",1329],["T_DOUBLE_COLON","::",1329],["T_STRING","helper",1329],"(",["T_CONSTANT_ENCAPSED_STRING","'core\/string'",1329],")",["T_OBJECT_OPERATOR","->",1329],["T_STRING","str_split",1329],"(",["T_VARIABLE","$address",1329],",",["T_WHITESPACE"," ",1329],["T_LNUMBER","35",1329],",",["T_WHITESPACE"," ",1329],["T_STRING","false",1329],",",["T_WHITESPACE"," ",1329],["T_STRING","true",1329],")",";",["T_WHITESPACE","\n        ",1329],["T_IF","if",1330],["T_WHITESPACE"," ",1330],"(",["T_STRING","is_array",1330],"(",["T_VARIABLE","$address",1330],")",")",["T_WHITESPACE"," ",1330],"{",["T_WHITESPACE","\n            ",1330],["T_FOREACH","foreach",1331],["T_WHITESPACE"," ",1331],"(",["T_VARIABLE","$address",1331],["T_WHITESPACE"," ",1331],["T_AS","as",1331],["T_WHITESPACE"," ",1331],["T_VARIABLE","$addressLine",1331],")",["T_WHITESPACE"," ",1331],"{",["T_WHITESPACE","\n                ",1331],["T_VARIABLE","$nodeConsignee",1332],["T_OBJECT_OPERATOR","->",1332],["T_STRING","addChild",1332],"(",["T_CONSTANT_ENCAPSED_STRING","'AddressLine'",1332],",",["T_WHITESPACE"," ",1332],["T_VARIABLE","$addressLine",1332],")",";",["T_WHITESPACE","\n            ",1332],"}",["T_WHITESPACE","\n        ",1333],"}",["T_WHITESPACE"," ",1334],["T_ELSE","else",1334],["T_WHITESPACE"," ",1334],"{",["T_WHITESPACE","\n            ",1334],["T_VARIABLE","$nodeConsignee",1335],["T_OBJECT_OPERATOR","->",1335],["T_STRING","addChild",1335],"(",["T_CONSTANT_ENCAPSED_STRING","'AddressLine'",1335],",",["T_WHITESPACE"," ",1335],["T_VARIABLE","$address",1335],")",";",["T_WHITESPACE","\n        ",1335],"}",["T_WHITESPACE","\n\n        ",1336],["T_VARIABLE","$nodeConsignee",1338],["T_OBJECT_OPERATOR","->",1338],["T_STRING","addChild",1338],"(",["T_CONSTANT_ENCAPSED_STRING","'City'",1338],",",["T_WHITESPACE"," ",1338],["T_VARIABLE","$rawRequest",1338],["T_OBJECT_OPERATOR","->",1338],["T_STRING","getRecipientAddressCity",1338],"(",")",")",";",["T_WHITESPACE","\n        ",1338],["T_VARIABLE","$nodeConsignee",1339],["T_OBJECT_OPERATOR","->",1339],["T_STRING","addChild",1339],"(",["T_CONSTANT_ENCAPSED_STRING","'Division'",1339],",",["T_WHITESPACE"," ",1339],["T_VARIABLE","$rawRequest",1339],["T_OBJECT_OPERATOR","->",1339],["T_STRING","getRecipientAddressStateOrProvinceCode",1339],"(",")",")",";",["T_WHITESPACE","\n        ",1339],["T_VARIABLE","$nodeConsignee",1340],["T_OBJECT_OPERATOR","->",1340],["T_STRING","addChild",1340],"(",["T_CONSTANT_ENCAPSED_STRING","'PostalCode'",1340],",",["T_WHITESPACE"," ",1340],["T_VARIABLE","$rawRequest",1340],["T_OBJECT_OPERATOR","->",1340],["T_STRING","getRecipientAddressPostalCode",1340],"(",")",")",";",["T_WHITESPACE","\n        ",1340],["T_VARIABLE","$nodeConsignee",1341],["T_OBJECT_OPERATOR","->",1341],["T_STRING","addChild",1341],"(",["T_CONSTANT_ENCAPSED_STRING","'CountryCode'",1341],",",["T_WHITESPACE"," ",1341],["T_VARIABLE","$rawRequest",1341],["T_OBJECT_OPERATOR","->",1341],["T_STRING","getRecipientAddressCountryCode",1341],"(",")",")",";",["T_WHITESPACE","\n        ",1341],["T_VARIABLE","$nodeConsignee",1342],["T_OBJECT_OPERATOR","->",1342],["T_STRING","addChild",1342],"(",["T_CONSTANT_ENCAPSED_STRING","'CountryName'",1342],",",["T_WHITESPACE","\n            ",1342],["T_STRING_CAST","(string)",1343],["T_VARIABLE","$this",1343],["T_OBJECT_OPERATOR","->",1343],["T_STRING","getCountryParams",1343],"(",["T_VARIABLE","$rawRequest",1343],["T_OBJECT_OPERATOR","->",1343],["T_STRING","getRecipientAddressCountryCode",1343],"(",")",")",["T_OBJECT_OPERATOR","->",1343],["T_STRING","name",1343],["T_WHITESPACE","\n        ",1343],")",";",["T_WHITESPACE","\n        ",1344],["T_VARIABLE","$nodeContact",1345],["T_WHITESPACE"," ",1345],"=",["T_WHITESPACE"," ",1345],["T_VARIABLE","$nodeConsignee",1345],["T_OBJECT_OPERATOR","->",1345],["T_STRING","addChild",1345],"(",["T_CONSTANT_ENCAPSED_STRING","'Contact'",1345],")",";",["T_WHITESPACE","\n        ",1345],["T_VARIABLE","$nodeContact",1346],["T_OBJECT_OPERATOR","->",1346],["T_STRING","addChild",1346],"(",["T_CONSTANT_ENCAPSED_STRING","'PersonName'",1346],",",["T_WHITESPACE"," ",1346],["T_STRING","substr",1346],"(",["T_VARIABLE","$rawRequest",1346],["T_OBJECT_OPERATOR","->",1346],["T_STRING","getRecipientContactPersonName",1346],"(",")",",",["T_WHITESPACE"," ",1346],["T_LNUMBER","0",1346],",",["T_WHITESPACE"," ",1346],["T_LNUMBER","34",1346],")",")",";",["T_WHITESPACE","\n        ",1346],["T_VARIABLE","$nodeContact",1347],["T_OBJECT_OPERATOR","->",1347],["T_STRING","addChild",1347],"(",["T_CONSTANT_ENCAPSED_STRING","'PhoneNumber'",1347],",",["T_WHITESPACE"," ",1347],["T_STRING","substr",1347],"(",["T_VARIABLE","$rawRequest",1347],["T_OBJECT_OPERATOR","->",1347],["T_STRING","getRecipientContactPhoneNumber",1347],"(",")",",",["T_WHITESPACE"," ",1347],["T_LNUMBER","0",1347],",",["T_WHITESPACE"," ",1347],["T_LNUMBER","24",1347],")",")",";",["T_WHITESPACE","\n\n        ",1347],["T_COMMENT","\/* Commodity\n         * The CommodityCode element contains commodity code for shipment contents. Its\n         * value should lie in between 1 to 9999.This field is mandatory.\n         *\/",1349],["T_WHITESPACE","\n        ",1352],["T_VARIABLE","$nodeCommodity",1353],["T_WHITESPACE"," ",1353],"=",["T_WHITESPACE"," ",1353],["T_VARIABLE","$xml",1353],["T_OBJECT_OPERATOR","->",1353],["T_STRING","addChild",1353],"(",["T_CONSTANT_ENCAPSED_STRING","'Commodity'",1353],",",["T_WHITESPACE"," ",1353],["T_CONSTANT_ENCAPSED_STRING","''",1353],",",["T_WHITESPACE"," ",1353],["T_CONSTANT_ENCAPSED_STRING","''",1353],")",";",["T_WHITESPACE","\n        ",1353],["T_VARIABLE","$nodeCommodity",1354],["T_OBJECT_OPERATOR","->",1354],["T_STRING","addChild",1354],"(",["T_CONSTANT_ENCAPSED_STRING","'CommodityCode'",1354],",",["T_WHITESPACE"," ",1354],["T_CONSTANT_ENCAPSED_STRING","'1'",1354],")",";",["T_WHITESPACE","\n\n        ",1354],["T_VARIABLE","$this",1356],["T_OBJECT_OPERATOR","->",1356],["T_STRING","_checkDomesticStatus",1356],"(",["T_VARIABLE","$rawRequest",1356],["T_OBJECT_OPERATOR","->",1356],["T_STRING","getShipperAddressCountryCode",1356],"(",")",",",["T_WHITESPACE","\n            ",1356],["T_VARIABLE","$rawRequest",1357],["T_OBJECT_OPERATOR","->",1357],["T_STRING","getRecipientAddressCountryCode",1357],"(",")",["T_WHITESPACE","\n        ",1357],")",";",["T_WHITESPACE","\n\n        ",1358],["T_COMMENT","\/* Dutiable *\/",1360],["T_WHITESPACE","\n        ",1360],["T_IF","if",1361],["T_WHITESPACE"," ",1361],"(",["T_VARIABLE","$this",1361],["T_OBJECT_OPERATOR","->",1361],["T_STRING","getConfigData",1361],"(",["T_CONSTANT_ENCAPSED_STRING","'content_type'",1361],")",["T_WHITESPACE"," ",1361],["T_IS_EQUAL","==",1361],["T_WHITESPACE"," ",1361],["T_STRING","self",1361],["T_DOUBLE_COLON","::",1361],["T_STRING","DHL_CONTENT_TYPE_NON_DOC",1361],["T_WHITESPACE"," ",1361],["T_BOOLEAN_AND","&&",1361],["T_WHITESPACE"," ",1361],"!",["T_VARIABLE","$this",1361],["T_OBJECT_OPERATOR","->",1361],["T_STRING","_isDomestic",1361],")",["T_WHITESPACE"," ",1361],"{",["T_WHITESPACE","\n            ",1361],["T_VARIABLE","$nodeDutiable",1362],["T_WHITESPACE"," ",1362],"=",["T_WHITESPACE"," ",1362],["T_VARIABLE","$xml",1362],["T_OBJECT_OPERATOR","->",1362],["T_STRING","addChild",1362],"(",["T_CONSTANT_ENCAPSED_STRING","'Dutiable'",1362],",",["T_WHITESPACE"," ",1362],["T_CONSTANT_ENCAPSED_STRING","''",1362],",",["T_WHITESPACE"," ",1362],["T_CONSTANT_ENCAPSED_STRING","''",1362],")",";",["T_WHITESPACE","\n            ",1362],["T_VARIABLE","$nodeDutiable",1363],["T_OBJECT_OPERATOR","->",1363],["T_STRING","addChild",1363],"(",["T_CONSTANT_ENCAPSED_STRING","'DeclaredValue'",1363],",",["T_WHITESPACE","\n                ",1363],["T_STRING","sprintf",1364],"(",["T_CONSTANT_ENCAPSED_STRING","\"%.2F\"",1364],",",["T_WHITESPACE"," ",1364],["T_VARIABLE","$rawRequest",1364],["T_OBJECT_OPERATOR","->",1364],["T_STRING","getOrderShipment",1364],"(",")",["T_OBJECT_OPERATOR","->",1364],["T_STRING","getOrder",1364],"(",")",["T_OBJECT_OPERATOR","->",1364],["T_STRING","getSubtotal",1364],"(",")",")",["T_WHITESPACE","\n            ",1364],")",";",["T_WHITESPACE","\n            ",1365],["T_VARIABLE","$baseCurrencyCode",1366],["T_WHITESPACE"," ",1366],"=",["T_WHITESPACE"," ",1366],["T_STRING","Mage",1366],["T_DOUBLE_COLON","::",1366],["T_STRING","app",1366],"(",")",["T_OBJECT_OPERATOR","->",1366],["T_STRING","getWebsite",1366],"(",["T_VARIABLE","$rawRequest",1366],["T_OBJECT_OPERATOR","->",1366],["T_STRING","getWebsiteId",1366],"(",")",")",["T_OBJECT_OPERATOR","->",1366],["T_STRING","getBaseCurrencyCode",1366],"(",")",";",["T_WHITESPACE","\n            ",1366],["T_VARIABLE","$nodeDutiable",1367],["T_OBJECT_OPERATOR","->",1367],["T_STRING","addChild",1367],"(",["T_CONSTANT_ENCAPSED_STRING","'DeclaredCurrency'",1367],",",["T_WHITESPACE"," ",1367],["T_VARIABLE","$baseCurrencyCode",1367],")",";",["T_WHITESPACE","\n        ",1367],"}",["T_WHITESPACE","\n\n        ",1368],["T_COMMENT","\/* Reference\n         * This element identifies the reference information. It is an optional field in the\n         * shipment validation request. Only the first reference will be taken currently.\n         *\/",1370],["T_WHITESPACE","\n        ",1373],["T_VARIABLE","$nodeReference",1374],["T_WHITESPACE"," ",1374],"=",["T_WHITESPACE"," ",1374],["T_VARIABLE","$xml",1374],["T_OBJECT_OPERATOR","->",1374],["T_STRING","addChild",1374],"(",["T_CONSTANT_ENCAPSED_STRING","'Reference'",1374],",",["T_WHITESPACE"," ",1374],["T_CONSTANT_ENCAPSED_STRING","''",1374],",",["T_WHITESPACE"," ",1374],["T_CONSTANT_ENCAPSED_STRING","''",1374],")",";",["T_WHITESPACE","\n        ",1374],["T_VARIABLE","$nodeReference",1375],["T_OBJECT_OPERATOR","->",1375],["T_STRING","addChild",1375],"(",["T_CONSTANT_ENCAPSED_STRING","'ReferenceID'",1375],",",["T_WHITESPACE"," ",1375],["T_CONSTANT_ENCAPSED_STRING","'shipment reference'",1375],")",";",["T_WHITESPACE","\n        ",1375],["T_VARIABLE","$nodeReference",1376],["T_OBJECT_OPERATOR","->",1376],["T_STRING","addChild",1376],"(",["T_CONSTANT_ENCAPSED_STRING","'ReferenceType'",1376],",",["T_WHITESPACE"," ",1376],["T_CONSTANT_ENCAPSED_STRING","'St'",1376],")",";",["T_WHITESPACE","\n\n        ",1376],["T_COMMENT","\/* Shipment Details *\/",1378],["T_WHITESPACE","\n        ",1378],["T_VARIABLE","$this",1379],["T_OBJECT_OPERATOR","->",1379],["T_STRING","_shipmentDetails",1379],"(",["T_VARIABLE","$xml",1379],",",["T_WHITESPACE"," ",1379],["T_VARIABLE","$rawRequest",1379],",",["T_WHITESPACE"," ",1379],["T_VARIABLE","$originRegion",1379],")",";",["T_WHITESPACE","\n\n        ",1379],["T_COMMENT","\/* Shipper *\/",1381],["T_WHITESPACE","\n        ",1381],["T_VARIABLE","$nodeShipper",1382],["T_WHITESPACE"," ",1382],"=",["T_WHITESPACE"," ",1382],["T_VARIABLE","$xml",1382],["T_OBJECT_OPERATOR","->",1382],["T_STRING","addChild",1382],"(",["T_CONSTANT_ENCAPSED_STRING","'Shipper'",1382],",",["T_WHITESPACE"," ",1382],["T_CONSTANT_ENCAPSED_STRING","''",1382],",",["T_WHITESPACE"," ",1382],["T_CONSTANT_ENCAPSED_STRING","''",1382],")",";",["T_WHITESPACE","\n        ",1382],["T_VARIABLE","$nodeShipper",1383],["T_OBJECT_OPERATOR","->",1383],["T_STRING","addChild",1383],"(",["T_CONSTANT_ENCAPSED_STRING","'ShipperID'",1383],",",["T_WHITESPACE"," ",1383],["T_STRING_CAST","(string)",1383],["T_VARIABLE","$this",1383],["T_OBJECT_OPERATOR","->",1383],["T_STRING","getConfigData",1383],"(",["T_CONSTANT_ENCAPSED_STRING","'account'",1383],")",")",";",["T_WHITESPACE","\n        ",1383],["T_VARIABLE","$nodeShipper",1384],["T_OBJECT_OPERATOR","->",1384],["T_STRING","addChild",1384],"(",["T_CONSTANT_ENCAPSED_STRING","'CompanyName'",1384],",",["T_WHITESPACE"," ",1384],["T_VARIABLE","$rawRequest",1384],["T_OBJECT_OPERATOR","->",1384],["T_STRING","getShipperContactCompanyName",1384],"(",")",")",";",["T_WHITESPACE","\n        ",1384],["T_VARIABLE","$nodeShipper",1385],["T_OBJECT_OPERATOR","->",1385],["T_STRING","addChild",1385],"(",["T_CONSTANT_ENCAPSED_STRING","'RegisteredAccount'",1385],",",["T_WHITESPACE"," ",1385],["T_STRING_CAST","(string)",1385],["T_VARIABLE","$this",1385],["T_OBJECT_OPERATOR","->",1385],["T_STRING","getConfigData",1385],"(",["T_CONSTANT_ENCAPSED_STRING","'account'",1385],")",")",";",["T_WHITESPACE","\n\n        ",1385],["T_VARIABLE","$address",1387],["T_WHITESPACE"," ",1387],"=",["T_WHITESPACE"," ",1387],["T_VARIABLE","$rawRequest",1387],["T_OBJECT_OPERATOR","->",1387],["T_STRING","getShipperAddressStreet1",1387],"(",")",".",["T_WHITESPACE"," ",1387],["T_CONSTANT_ENCAPSED_STRING","' '",1387],["T_WHITESPACE"," ",1387],".",["T_WHITESPACE"," ",1387],["T_VARIABLE","$rawRequest",1387],["T_OBJECT_OPERATOR","->",1387],["T_STRING","getShipperAddressStreet2",1387],"(",")",";",["T_WHITESPACE","\n        ",1387],["T_VARIABLE","$address",1388],["T_WHITESPACE"," ",1388],"=",["T_WHITESPACE"," ",1388],["T_STRING","Mage",1388],["T_DOUBLE_COLON","::",1388],["T_STRING","helper",1388],"(",["T_CONSTANT_ENCAPSED_STRING","'core\/string'",1388],")",["T_OBJECT_OPERATOR","->",1388],["T_STRING","str_split",1388],"(",["T_VARIABLE","$address",1388],",",["T_WHITESPACE"," ",1388],["T_LNUMBER","35",1388],",",["T_WHITESPACE"," ",1388],["T_STRING","false",1388],",",["T_WHITESPACE"," ",1388],["T_STRING","true",1388],")",";",["T_WHITESPACE","\n        ",1388],["T_IF","if",1389],["T_WHITESPACE"," ",1389],"(",["T_STRING","is_array",1389],"(",["T_VARIABLE","$address",1389],")",")",["T_WHITESPACE"," ",1389],"{",["T_WHITESPACE","\n            ",1389],["T_FOREACH","foreach",1390],["T_WHITESPACE"," ",1390],"(",["T_VARIABLE","$address",1390],["T_WHITESPACE"," ",1390],["T_AS","as",1390],["T_WHITESPACE"," ",1390],["T_VARIABLE","$addressLine",1390],")",["T_WHITESPACE"," ",1390],"{",["T_WHITESPACE","\n                ",1390],["T_VARIABLE","$nodeShipper",1391],["T_OBJECT_OPERATOR","->",1391],["T_STRING","addChild",1391],"(",["T_CONSTANT_ENCAPSED_STRING","'AddressLine'",1391],",",["T_WHITESPACE"," ",1391],["T_VARIABLE","$addressLine",1391],")",";",["T_WHITESPACE","\n            ",1391],"}",["T_WHITESPACE","\n        ",1392],"}",["T_WHITESPACE"," ",1393],["T_ELSE","else",1393],["T_WHITESPACE"," ",1393],"{",["T_WHITESPACE","\n            ",1393],["T_VARIABLE","$nodeShipper",1394],["T_OBJECT_OPERATOR","->",1394],["T_STRING","addChild",1394],"(",["T_CONSTANT_ENCAPSED_STRING","'AddressLine'",1394],",",["T_WHITESPACE"," ",1394],["T_VARIABLE","$address",1394],")",";",["T_WHITESPACE","\n        ",1394],"}",["T_WHITESPACE","\n\n        ",1395],["T_VARIABLE","$nodeShipper",1397],["T_OBJECT_OPERATOR","->",1397],["T_STRING","addChild",1397],"(",["T_CONSTANT_ENCAPSED_STRING","'City'",1397],",",["T_WHITESPACE"," ",1397],["T_VARIABLE","$rawRequest",1397],["T_OBJECT_OPERATOR","->",1397],["T_STRING","getShipperAddressCity",1397],"(",")",")",";",["T_WHITESPACE","\n        ",1397],["T_VARIABLE","$nodeShipper",1398],["T_OBJECT_OPERATOR","->",1398],["T_STRING","addChild",1398],"(",["T_CONSTANT_ENCAPSED_STRING","'Division'",1398],",",["T_WHITESPACE"," ",1398],["T_VARIABLE","$rawRequest",1398],["T_OBJECT_OPERATOR","->",1398],["T_STRING","getShipperAddressStateOrProvinceCode",1398],"(",")",")",";",["T_WHITESPACE","\n        ",1398],["T_VARIABLE","$nodeShipper",1399],["T_OBJECT_OPERATOR","->",1399],["T_STRING","addChild",1399],"(",["T_CONSTANT_ENCAPSED_STRING","'PostalCode'",1399],",",["T_WHITESPACE"," ",1399],["T_VARIABLE","$rawRequest",1399],["T_OBJECT_OPERATOR","->",1399],["T_STRING","getShipperAddressPostalCode",1399],"(",")",")",";",["T_WHITESPACE","\n        ",1399],["T_VARIABLE","$nodeShipper",1400],["T_OBJECT_OPERATOR","->",1400],["T_STRING","addChild",1400],"(",["T_CONSTANT_ENCAPSED_STRING","'CountryCode'",1400],",",["T_WHITESPACE"," ",1400],["T_VARIABLE","$rawRequest",1400],["T_OBJECT_OPERATOR","->",1400],["T_STRING","getShipperAddressCountryCode",1400],"(",")",")",";",["T_WHITESPACE","\n        ",1400],["T_VARIABLE","$nodeShipper",1401],["T_OBJECT_OPERATOR","->",1401],["T_STRING","addChild",1401],"(",["T_CONSTANT_ENCAPSED_STRING","'CountryName'",1401],",",["T_WHITESPACE","\n            ",1401],["T_STRING_CAST","(string)",1402],["T_VARIABLE","$this",1402],["T_OBJECT_OPERATOR","->",1402],["T_STRING","getCountryParams",1402],"(",["T_VARIABLE","$rawRequest",1402],["T_OBJECT_OPERATOR","->",1402],["T_STRING","getShipperAddressCountryCode",1402],"(",")",")",["T_OBJECT_OPERATOR","->",1402],["T_STRING","name",1402],["T_WHITESPACE","\n        ",1402],")",";",["T_WHITESPACE","\n        ",1403],["T_VARIABLE","$nodeContact",1404],["T_WHITESPACE"," ",1404],"=",["T_WHITESPACE"," ",1404],["T_VARIABLE","$nodeShipper",1404],["T_OBJECT_OPERATOR","->",1404],["T_STRING","addChild",1404],"(",["T_CONSTANT_ENCAPSED_STRING","'Contact'",1404],",",["T_WHITESPACE"," ",1404],["T_CONSTANT_ENCAPSED_STRING","''",1404],",",["T_WHITESPACE"," ",1404],["T_CONSTANT_ENCAPSED_STRING","''",1404],")",";",["T_WHITESPACE","\n        ",1404],["T_VARIABLE","$nodeContact",1405],["T_OBJECT_OPERATOR","->",1405],["T_STRING","addChild",1405],"(",["T_CONSTANT_ENCAPSED_STRING","'PersonName'",1405],",",["T_WHITESPACE"," ",1405],["T_STRING","substr",1405],"(",["T_VARIABLE","$rawRequest",1405],["T_OBJECT_OPERATOR","->",1405],["T_STRING","getShipperContactPersonName",1405],"(",")",",",["T_WHITESPACE"," ",1405],["T_LNUMBER","0",1405],",",["T_WHITESPACE"," ",1405],["T_LNUMBER","34",1405],")",")",";",["T_WHITESPACE","\n        ",1405],["T_VARIABLE","$nodeContact",1406],["T_OBJECT_OPERATOR","->",1406],["T_STRING","addChild",1406],"(",["T_CONSTANT_ENCAPSED_STRING","'PhoneNumber'",1406],",",["T_WHITESPACE"," ",1406],["T_STRING","substr",1406],"(",["T_VARIABLE","$rawRequest",1406],["T_OBJECT_OPERATOR","->",1406],["T_STRING","getShipperContactPhoneNumber",1406],"(",")",",",["T_WHITESPACE"," ",1406],["T_LNUMBER","0",1406],",",["T_WHITESPACE"," ",1406],["T_LNUMBER","24",1406],")",")",";",["T_WHITESPACE","\n\n        ",1406],["T_VARIABLE","$xml",1408],["T_OBJECT_OPERATOR","->",1408],["T_STRING","addChild",1408],"(",["T_CONSTANT_ENCAPSED_STRING","'LabelImageFormat'",1408],",",["T_WHITESPACE"," ",1408],["T_CONSTANT_ENCAPSED_STRING","'PDF'",1408],",",["T_WHITESPACE"," ",1408],["T_CONSTANT_ENCAPSED_STRING","''",1408],")",";",["T_WHITESPACE","\n\n        ",1408],["T_VARIABLE","$request",1410],["T_WHITESPACE"," ",1410],"=",["T_WHITESPACE"," ",1410],["T_VARIABLE","$xml",1410],["T_OBJECT_OPERATOR","->",1410],["T_STRING","asXML",1410],"(",")",";",["T_WHITESPACE","\n        ",1410],["T_VARIABLE","$request",1411],["T_WHITESPACE"," ",1411],"=",["T_WHITESPACE"," ",1411],["T_STRING","utf8_encode",1411],"(",["T_VARIABLE","$request",1411],")",";",["T_WHITESPACE","\n\n        ",1411],["T_VARIABLE","$responseBody",1413],["T_WHITESPACE"," ",1413],"=",["T_WHITESPACE"," ",1413],["T_VARIABLE","$this",1413],["T_OBJECT_OPERATOR","->",1413],["T_STRING","_getCachedQuotes",1413],"(",["T_VARIABLE","$request",1413],")",";",["T_WHITESPACE","\n        ",1413],["T_IF","if",1414],["T_WHITESPACE"," ",1414],"(",["T_VARIABLE","$responseBody",1414],["T_WHITESPACE"," ",1414],["T_IS_IDENTICAL","===",1414],["T_WHITESPACE"," ",1414],["T_STRING","null",1414],")",["T_WHITESPACE"," ",1414],"{",["T_WHITESPACE","\n            ",1414],["T_VARIABLE","$debugData",1415],["T_WHITESPACE"," ",1415],"=",["T_WHITESPACE"," ",1415],["T_ARRAY","array",1415],"(",["T_CONSTANT_ENCAPSED_STRING","'request'",1415],["T_WHITESPACE"," ",1415],["T_DOUBLE_ARROW","=>",1415],["T_WHITESPACE"," ",1415],["T_VARIABLE","$request",1415],")",";",["T_WHITESPACE","\n            ",1415],["T_TRY","try",1416],["T_WHITESPACE"," ",1416],"{",["T_WHITESPACE","\n                ",1416],["T_VARIABLE","$client",1417],["T_WHITESPACE"," ",1417],"=",["T_WHITESPACE"," ",1417],["T_NEW","new",1417],["T_WHITESPACE"," ",1417],["T_STRING","Varien_Http_Client",1417],"(",")",";",["T_WHITESPACE","\n                ",1417],["T_VARIABLE","$client",1418],["T_OBJECT_OPERATOR","->",1418],["T_STRING","setUri",1418],"(",["T_STRING_CAST","(string)",1418],["T_VARIABLE","$this",1418],["T_OBJECT_OPERATOR","->",1418],["T_STRING","getConfigData",1418],"(",["T_CONSTANT_ENCAPSED_STRING","'gateway_url'",1418],")",")",";",["T_WHITESPACE","\n                ",1418],["T_VARIABLE","$client",1419],["T_OBJECT_OPERATOR","->",1419],["T_STRING","setConfig",1419],"(",["T_ARRAY","array",1419],"(",["T_WHITESPACE","\n                    ",1419],["T_CONSTANT_ENCAPSED_STRING","'maxredirects'",1420],["T_WHITESPACE"," ",1420],["T_DOUBLE_ARROW","=>",1420],["T_WHITESPACE"," ",1420],["T_LNUMBER","0",1420],",",["T_WHITESPACE","\n                    ",1420],["T_CONSTANT_ENCAPSED_STRING","'timeout'",1421],["T_WHITESPACE"," ",1421],["T_DOUBLE_ARROW","=>",1421],["T_WHITESPACE"," ",1421],["T_LNUMBER","30",1421],",",["T_WHITESPACE","\n                    ",1421],["T_CONSTANT_ENCAPSED_STRING","'verifypeer'",1422],["T_WHITESPACE"," ",1422],["T_DOUBLE_ARROW","=>",1422],["T_WHITESPACE"," ",1422],["T_VARIABLE","$this",1422],["T_OBJECT_OPERATOR","->",1422],["T_STRING","getConfigFlag",1422],"(",["T_CONSTANT_ENCAPSED_STRING","'verify_peer'",1422],")",",",["T_WHITESPACE","\n                    ",1422],["T_CONSTANT_ENCAPSED_STRING","'verifyhost'",1423],["T_WHITESPACE"," ",1423],["T_DOUBLE_ARROW","=>",1423],["T_WHITESPACE"," ",1423],["T_LNUMBER","2",1423],",",["T_WHITESPACE","\n                ",1423],")",")",";",["T_WHITESPACE","\n                ",1424],["T_VARIABLE","$client",1425],["T_OBJECT_OPERATOR","->",1425],["T_STRING","setRawData",1425],"(",["T_VARIABLE","$request",1425],")",";",["T_WHITESPACE","\n                ",1425],["T_VARIABLE","$responseBody",1426],["T_WHITESPACE"," ",1426],"=",["T_WHITESPACE"," ",1426],["T_VARIABLE","$client",1426],["T_OBJECT_OPERATOR","->",1426],["T_STRING","request",1426],"(",["T_STRING","Varien_Http_Client",1426],["T_DOUBLE_COLON","::",1426],["T_STRING","POST",1426],")",["T_OBJECT_OPERATOR","->",1426],["T_STRING","getBody",1426],"(",")",";",["T_WHITESPACE","\n                ",1426],["T_VARIABLE","$debugData",1427],"[",["T_CONSTANT_ENCAPSED_STRING","'result'",1427],"]",["T_WHITESPACE"," ",1427],"=",["T_WHITESPACE"," ",1427],["T_VARIABLE","$responseBody",1427],";",["T_WHITESPACE","\n                ",1427],["T_VARIABLE","$this",1428],["T_OBJECT_OPERATOR","->",1428],["T_STRING","_setCachedQuotes",1428],"(",["T_VARIABLE","$request",1428],",",["T_WHITESPACE"," ",1428],["T_VARIABLE","$responseBody",1428],")",";",["T_WHITESPACE","\n            ",1428],"}",["T_WHITESPACE"," ",1429],["T_CATCH","catch",1429],["T_WHITESPACE"," ",1429],"(",["T_STRING","Exception",1429],["T_WHITESPACE"," ",1429],["T_VARIABLE","$e",1429],")",["T_WHITESPACE"," ",1429],"{",["T_WHITESPACE","\n                ",1429],["T_VARIABLE","$this",1430],["T_OBJECT_OPERATOR","->",1430],["T_STRING","_errors",1430],"[",["T_VARIABLE","$e",1430],["T_OBJECT_OPERATOR","->",1430],["T_STRING","getCode",1430],"(",")","]",["T_WHITESPACE"," ",1430],"=",["T_WHITESPACE"," ",1430],["T_VARIABLE","$e",1430],["T_OBJECT_OPERATOR","->",1430],["T_STRING","getMessage",1430],"(",")",";",["T_WHITESPACE","\n                ",1430],["T_VARIABLE","$responseBody",1431],["T_WHITESPACE"," ",1431],"=",["T_WHITESPACE"," ",1431],["T_CONSTANT_ENCAPSED_STRING","''",1431],";",["T_WHITESPACE","\n            ",1431],"}",["T_WHITESPACE","\n            ",1432],["T_VARIABLE","$this",1433],["T_OBJECT_OPERATOR","->",1433],["T_STRING","_debug",1433],"(",["T_VARIABLE","$debugData",1433],")",";",["T_WHITESPACE","\n        ",1433],"}",["T_WHITESPACE","\n        ",1434],["T_VARIABLE","$this",1435],["T_OBJECT_OPERATOR","->",1435],["T_STRING","_isShippingLabelFlag",1435],["T_WHITESPACE"," ",1435],"=",["T_WHITESPACE"," ",1435],["T_STRING","true",1435],";",["T_WHITESPACE","\n        ",1435],["T_RETURN","return",1436],["T_WHITESPACE"," ",1436],["T_VARIABLE","$this",1436],["T_OBJECT_OPERATOR","->",1436],["T_STRING","_parseResponse",1436],"(",["T_VARIABLE","$responseBody",1436],")",";",["T_WHITESPACE","\n    ",1436],"}",["T_WHITESPACE","\n\n    ",1437],["T_DOC_COMMENT","\/**\n     * Generation Shipment Details Node according to origin region\n     *\n     * @param SimpleXMLElement $xml\n     * @param Mage_Shipping_Model_Rate_Request $rawRequest\n     * @param string $originRegion\n     * @return void\n     *\/",1439],["T_WHITESPACE","\n    ",1446],["T_PROTECTED","protected",1447],["T_WHITESPACE"," ",1447],["T_FUNCTION","function",1447],["T_WHITESPACE"," ",1447],["T_STRING","_shipmentDetails",1447],"(",["T_VARIABLE","$xml",1447],",",["T_WHITESPACE"," ",1447],["T_VARIABLE","$rawRequest",1447],",",["T_WHITESPACE"," ",1447],["T_VARIABLE","$originRegion",1447],["T_WHITESPACE"," ",1447],"=",["T_WHITESPACE"," ",1447],["T_CONSTANT_ENCAPSED_STRING","''",1447],")",["T_WHITESPACE","\n    ",1447],"{",["T_WHITESPACE","\n        ",1448],["T_VARIABLE","$nodeShipmentDetails",1449],["T_WHITESPACE"," ",1449],"=",["T_WHITESPACE"," ",1449],["T_VARIABLE","$xml",1449],["T_OBJECT_OPERATOR","->",1449],["T_STRING","addChild",1449],"(",["T_CONSTANT_ENCAPSED_STRING","'ShipmentDetails'",1449],",",["T_WHITESPACE"," ",1449],["T_CONSTANT_ENCAPSED_STRING","''",1449],",",["T_WHITESPACE"," ",1449],["T_CONSTANT_ENCAPSED_STRING","''",1449],")",";",["T_WHITESPACE","\n        ",1449],["T_VARIABLE","$nodeShipmentDetails",1450],["T_OBJECT_OPERATOR","->",1450],["T_STRING","addChild",1450],"(",["T_CONSTANT_ENCAPSED_STRING","'NumberOfPieces'",1450],",",["T_WHITESPACE"," ",1450],["T_STRING","count",1450],"(",["T_VARIABLE","$rawRequest",1450],["T_OBJECT_OPERATOR","->",1450],["T_STRING","getPackages",1450],"(",")",")",")",";",["T_WHITESPACE","\n\n        ",1450],["T_IF","if",1452],["T_WHITESPACE"," ",1452],"(",["T_VARIABLE","$originRegion",1452],")",["T_WHITESPACE"," ",1452],"{",["T_WHITESPACE","\n            ",1452],["T_VARIABLE","$nodeShipmentDetails",1453],["T_OBJECT_OPERATOR","->",1453],["T_STRING","addChild",1453],"(",["T_CONSTANT_ENCAPSED_STRING","'CurrencyCode'",1453],",",["T_WHITESPACE","\n                ",1453],["T_STRING","Mage",1454],["T_DOUBLE_COLON","::",1454],["T_STRING","app",1454],"(",")",["T_OBJECT_OPERATOR","->",1454],["T_STRING","getWebsite",1454],"(",["T_VARIABLE","$this",1454],["T_OBJECT_OPERATOR","->",1454],["T_STRING","_request",1454],["T_OBJECT_OPERATOR","->",1454],["T_STRING","getWebsiteId",1454],"(",")",")",["T_OBJECT_OPERATOR","->",1454],["T_STRING","getBaseCurrencyCode",1454],"(",")",["T_WHITESPACE","\n            ",1454],")",";",["T_WHITESPACE","\n        ",1455],"}",["T_WHITESPACE","\n\n        ",1456],["T_VARIABLE","$nodePieces",1458],["T_WHITESPACE"," ",1458],"=",["T_WHITESPACE"," ",1458],["T_VARIABLE","$nodeShipmentDetails",1458],["T_OBJECT_OPERATOR","->",1458],["T_STRING","addChild",1458],"(",["T_CONSTANT_ENCAPSED_STRING","'Pieces'",1458],",",["T_WHITESPACE"," ",1458],["T_CONSTANT_ENCAPSED_STRING","''",1458],",",["T_WHITESPACE"," ",1458],["T_CONSTANT_ENCAPSED_STRING","''",1458],")",";",["T_WHITESPACE","\n\n        ",1458],["T_COMMENT","\/*\n         * Package type\n         * EE (DHL Express Envelope), OD (Other DHL Packaging), CP (Custom Packaging)\n         * DC (Document), DM (Domestic), ED (Express Document), FR (Freight)\n         * BD (Jumbo Document), BP (Jumbo Parcel), JD (Jumbo Junior Document)\n         * JP (Jumbo Junior Parcel), PA (Parcel), DF (DHL Flyer)\n         *\/",1460],["T_WHITESPACE","\n        ",1466],["T_VARIABLE","$i",1467],["T_WHITESPACE"," ",1467],"=",["T_WHITESPACE"," ",1467],["T_LNUMBER","0",1467],";",["T_WHITESPACE","\n        ",1467],["T_FOREACH","foreach",1468],["T_WHITESPACE"," ",1468],"(",["T_VARIABLE","$rawRequest",1468],["T_OBJECT_OPERATOR","->",1468],["T_STRING","getPackages",1468],"(",")",["T_WHITESPACE"," ",1468],["T_AS","as",1468],["T_WHITESPACE"," ",1468],["T_VARIABLE","$package",1468],")",["T_WHITESPACE"," ",1468],"{",["T_WHITESPACE","\n            ",1468],["T_VARIABLE","$nodePiece",1469],["T_WHITESPACE"," ",1469],"=",["T_WHITESPACE"," ",1469],["T_VARIABLE","$nodePieces",1469],["T_OBJECT_OPERATOR","->",1469],["T_STRING","addChild",1469],"(",["T_CONSTANT_ENCAPSED_STRING","'Piece'",1469],",",["T_WHITESPACE"," ",1469],["T_CONSTANT_ENCAPSED_STRING","''",1469],",",["T_WHITESPACE"," ",1469],["T_CONSTANT_ENCAPSED_STRING","''",1469],")",";",["T_WHITESPACE","\n            ",1469],["T_VARIABLE","$packageType",1470],["T_WHITESPACE"," ",1470],"=",["T_WHITESPACE"," ",1470],["T_CONSTANT_ENCAPSED_STRING","'EE'",1470],";",["T_WHITESPACE","\n            ",1470],["T_IF","if",1471],["T_WHITESPACE"," ",1471],"(",["T_VARIABLE","$package",1471],"[",["T_CONSTANT_ENCAPSED_STRING","'params'",1471],"]","[",["T_CONSTANT_ENCAPSED_STRING","'container'",1471],"]",["T_WHITESPACE"," ",1471],["T_IS_EQUAL","==",1471],["T_WHITESPACE"," ",1471],["T_STRING","self",1471],["T_DOUBLE_COLON","::",1471],["T_STRING","DHL_CONTENT_TYPE_NON_DOC",1471],")",["T_WHITESPACE"," ",1471],"{",["T_WHITESPACE","\n                ",1471],["T_VARIABLE","$packageType",1472],["T_WHITESPACE"," ",1472],"=",["T_WHITESPACE"," ",1472],["T_CONSTANT_ENCAPSED_STRING","'CP'",1472],";",["T_WHITESPACE","\n            ",1472],"}",["T_WHITESPACE","\n            ",1473],["T_VARIABLE","$nodePiece",1474],["T_OBJECT_OPERATOR","->",1474],["T_STRING","addChild",1474],"(",["T_CONSTANT_ENCAPSED_STRING","'PieceID'",1474],",",["T_WHITESPACE"," ",1474],["T_INC","++",1474],["T_VARIABLE","$i",1474],")",";",["T_WHITESPACE","\n            ",1474],["T_VARIABLE","$nodePiece",1475],["T_OBJECT_OPERATOR","->",1475],["T_STRING","addChild",1475],"(",["T_CONSTANT_ENCAPSED_STRING","'PackageType'",1475],",",["T_WHITESPACE"," ",1475],["T_VARIABLE","$packageType",1475],")",";",["T_WHITESPACE","\n            ",1475],["T_VARIABLE","$nodePiece",1476],["T_OBJECT_OPERATOR","->",1476],["T_STRING","addChild",1476],"(",["T_CONSTANT_ENCAPSED_STRING","'Weight'",1476],",",["T_WHITESPACE"," ",1476],["T_STRING","round",1476],"(",["T_VARIABLE","$package",1476],"[",["T_CONSTANT_ENCAPSED_STRING","'params'",1476],"]","[",["T_CONSTANT_ENCAPSED_STRING","'weight'",1476],"]",",",["T_LNUMBER","1",1476],")",")",";",["T_WHITESPACE","\n            ",1476],["T_VARIABLE","$params",1477],["T_WHITESPACE"," ",1477],"=",["T_WHITESPACE"," ",1477],["T_VARIABLE","$package",1477],"[",["T_CONSTANT_ENCAPSED_STRING","'params'",1477],"]",";",["T_WHITESPACE","\n            ",1477],["T_IF","if",1478],["T_WHITESPACE"," ",1478],"(",["T_VARIABLE","$params",1478],"[",["T_CONSTANT_ENCAPSED_STRING","'width'",1478],"]",["T_WHITESPACE"," ",1478],["T_BOOLEAN_AND","&&",1478],["T_WHITESPACE"," ",1478],["T_VARIABLE","$params",1478],"[",["T_CONSTANT_ENCAPSED_STRING","'length'",1478],"]",["T_WHITESPACE"," ",1478],["T_BOOLEAN_AND","&&",1478],["T_WHITESPACE"," ",1478],["T_VARIABLE","$params",1478],"[",["T_CONSTANT_ENCAPSED_STRING","'height'",1478],"]",")",["T_WHITESPACE"," ",1478],"{",["T_WHITESPACE","\n                ",1478],["T_IF","if",1479],["T_WHITESPACE"," ",1479],"(","!",["T_VARIABLE","$originRegion",1479],")",["T_WHITESPACE"," ",1479],"{",["T_WHITESPACE","\n                    ",1479],["T_VARIABLE","$nodePiece",1480],["T_OBJECT_OPERATOR","->",1480],["T_STRING","addChild",1480],"(",["T_CONSTANT_ENCAPSED_STRING","'Width'",1480],",",["T_WHITESPACE"," ",1480],["T_STRING","round",1480],"(",["T_VARIABLE","$params",1480],"[",["T_CONSTANT_ENCAPSED_STRING","'width'",1480],"]",")",")",";",["T_WHITESPACE","\n                    ",1480],["T_VARIABLE","$nodePiece",1481],["T_OBJECT_OPERATOR","->",1481],["T_STRING","addChild",1481],"(",["T_CONSTANT_ENCAPSED_STRING","'Height'",1481],",",["T_WHITESPACE"," ",1481],["T_STRING","round",1481],"(",["T_VARIABLE","$params",1481],"[",["T_CONSTANT_ENCAPSED_STRING","'height'",1481],"]",")",")",";",["T_WHITESPACE","\n                    ",1481],["T_VARIABLE","$nodePiece",1482],["T_OBJECT_OPERATOR","->",1482],["T_STRING","addChild",1482],"(",["T_CONSTANT_ENCAPSED_STRING","'Depth'",1482],",",["T_WHITESPACE"," ",1482],["T_STRING","round",1482],"(",["T_VARIABLE","$params",1482],"[",["T_CONSTANT_ENCAPSED_STRING","'length'",1482],"]",")",")",";",["T_WHITESPACE","\n                ",1482],"}",["T_WHITESPACE"," ",1483],["T_ELSE","else",1483],["T_WHITESPACE"," ",1483],"{",["T_WHITESPACE","\n                    ",1483],["T_VARIABLE","$nodePiece",1484],["T_OBJECT_OPERATOR","->",1484],["T_STRING","addChild",1484],"(",["T_CONSTANT_ENCAPSED_STRING","'Depth'",1484],",",["T_WHITESPACE"," ",1484],["T_STRING","round",1484],"(",["T_VARIABLE","$params",1484],"[",["T_CONSTANT_ENCAPSED_STRING","'length'",1484],"]",")",")",";",["T_WHITESPACE","\n                    ",1484],["T_VARIABLE","$nodePiece",1485],["T_OBJECT_OPERATOR","->",1485],["T_STRING","addChild",1485],"(",["T_CONSTANT_ENCAPSED_STRING","'Width'",1485],",",["T_WHITESPACE"," ",1485],["T_STRING","round",1485],"(",["T_VARIABLE","$params",1485],"[",["T_CONSTANT_ENCAPSED_STRING","'width'",1485],"]",")",")",";",["T_WHITESPACE","\n                    ",1485],["T_VARIABLE","$nodePiece",1486],["T_OBJECT_OPERATOR","->",1486],["T_STRING","addChild",1486],"(",["T_CONSTANT_ENCAPSED_STRING","'Height'",1486],",",["T_WHITESPACE"," ",1486],["T_STRING","round",1486],"(",["T_VARIABLE","$params",1486],"[",["T_CONSTANT_ENCAPSED_STRING","'height'",1486],"]",")",")",";",["T_WHITESPACE","\n                ",1486],"}",["T_WHITESPACE","\n            ",1487],"}",["T_WHITESPACE","\n            ",1488],["T_VARIABLE","$content",1489],["T_WHITESPACE"," ",1489],"=",["T_WHITESPACE"," ",1489],["T_ARRAY","array",1489],"(",")",";",["T_WHITESPACE","\n            ",1489],["T_FOREACH","foreach",1490],["T_WHITESPACE"," ",1490],"(",["T_VARIABLE","$package",1490],"[",["T_CONSTANT_ENCAPSED_STRING","'items'",1490],"]",["T_WHITESPACE"," ",1490],["T_AS","as",1490],["T_WHITESPACE"," ",1490],["T_VARIABLE","$item",1490],")",["T_WHITESPACE"," ",1490],"{",["T_WHITESPACE","\n                ",1490],["T_VARIABLE","$content",1491],"[","]",["T_WHITESPACE"," ",1491],"=",["T_WHITESPACE"," ",1491],["T_VARIABLE","$item",1491],"[",["T_CONSTANT_ENCAPSED_STRING","'name'",1491],"]",";",["T_WHITESPACE","\n            ",1491],"}",["T_WHITESPACE","\n            ",1492],["T_VARIABLE","$nodePiece",1493],["T_OBJECT_OPERATOR","->",1493],["T_STRING","addChild",1493],"(",["T_CONSTANT_ENCAPSED_STRING","'PieceContents'",1493],",",["T_WHITESPACE"," ",1493],["T_STRING","substr",1493],"(",["T_STRING","implode",1493],"(",["T_CONSTANT_ENCAPSED_STRING","','",1493],",",["T_WHITESPACE"," ",1493],["T_VARIABLE","$content",1493],")",",",["T_WHITESPACE"," ",1493],["T_LNUMBER","0",1493],",",["T_WHITESPACE"," ",1493],["T_LNUMBER","34",1493],")",")",";",["T_WHITESPACE","\n        ",1493],"}",["T_WHITESPACE","\n\n        ",1494],["T_IF","if",1496],["T_WHITESPACE"," ",1496],"(","!",["T_VARIABLE","$originRegion",1496],")",["T_WHITESPACE"," ",1496],"{",["T_WHITESPACE","\n            ",1496],["T_VARIABLE","$nodeShipmentDetails",1497],["T_OBJECT_OPERATOR","->",1497],["T_STRING","addChild",1497],"(",["T_CONSTANT_ENCAPSED_STRING","'Weight'",1497],",",["T_WHITESPACE"," ",1497],["T_STRING","round",1497],"(",["T_VARIABLE","$rawRequest",1497],["T_OBJECT_OPERATOR","->",1497],["T_STRING","getPackageWeight",1497],"(",")",",",["T_LNUMBER","1",1497],")",")",";",["T_WHITESPACE","\n\n            ",1497],["T_VARIABLE","$nodeShipmentDetails",1499],["T_OBJECT_OPERATOR","->",1499],["T_STRING","addChild",1499],"(",["T_CONSTANT_ENCAPSED_STRING","'WeightUnit'",1499],",",["T_WHITESPACE"," ",1499],["T_STRING","substr",1499],"(",["T_VARIABLE","$this",1499],["T_OBJECT_OPERATOR","->",1499],["T_STRING","_getWeightUnit",1499],"(",")",",",["T_LNUMBER","0",1499],",",["T_LNUMBER","1",1499],")",")",";",["T_WHITESPACE","\n\n            ",1499],["T_VARIABLE","$nodeShipmentDetails",1501],["T_OBJECT_OPERATOR","->",1501],["T_STRING","addChild",1501],"(",["T_CONSTANT_ENCAPSED_STRING","'GlobalProductCode'",1501],",",["T_WHITESPACE"," ",1501],["T_VARIABLE","$rawRequest",1501],["T_OBJECT_OPERATOR","->",1501],["T_STRING","getShippingMethod",1501],"(",")",")",";",["T_WHITESPACE","\n            ",1501],["T_VARIABLE","$nodeShipmentDetails",1502],["T_OBJECT_OPERATOR","->",1502],["T_STRING","addChild",1502],"(",["T_CONSTANT_ENCAPSED_STRING","'LocalProductCode'",1502],",",["T_WHITESPACE"," ",1502],["T_VARIABLE","$rawRequest",1502],["T_OBJECT_OPERATOR","->",1502],["T_STRING","getShippingMethod",1502],"(",")",")",";",["T_WHITESPACE","\n\n            ",1502],["T_VARIABLE","$nodeShipmentDetails",1504],["T_OBJECT_OPERATOR","->",1504],["T_STRING","addChild",1504],"(",["T_CONSTANT_ENCAPSED_STRING","'Date'",1504],",",["T_WHITESPACE"," ",1504],["T_STRING","Mage",1504],["T_DOUBLE_COLON","::",1504],["T_STRING","getModel",1504],"(",["T_CONSTANT_ENCAPSED_STRING","'core\/date'",1504],")",["T_OBJECT_OPERATOR","->",1504],["T_STRING","date",1504],"(",["T_STRING","self",1504],["T_DOUBLE_COLON","::",1504],["T_STRING","REQUEST_DATE_FORMAT",1504],")",")",";",["T_WHITESPACE","\n            ",1504],["T_VARIABLE","$nodeShipmentDetails",1505],["T_OBJECT_OPERATOR","->",1505],["T_STRING","addChild",1505],"(",["T_CONSTANT_ENCAPSED_STRING","'Contents'",1505],",",["T_WHITESPACE"," ",1505],["T_CONSTANT_ENCAPSED_STRING","'DHL Parcel'",1505],")",";",["T_WHITESPACE","\n            ",1505],["T_COMMENT","\/*\n             * The DoorTo Element defines the type of delivery service that applies to the shipment.\n             * The valid values are DD (Door to Door), DA (Door to Airport) , AA and DC (Door to\n             * Door non-compliant)\n             *\/",1506],["T_WHITESPACE","\n            ",1510],["T_VARIABLE","$nodeShipmentDetails",1511],["T_OBJECT_OPERATOR","->",1511],["T_STRING","addChild",1511],"(",["T_CONSTANT_ENCAPSED_STRING","'DoorTo'",1511],",",["T_WHITESPACE"," ",1511],["T_CONSTANT_ENCAPSED_STRING","'DD'",1511],")",";",["T_WHITESPACE","\n            ",1511],["T_VARIABLE","$nodeShipmentDetails",1512],["T_OBJECT_OPERATOR","->",1512],["T_STRING","addChild",1512],"(",["T_CONSTANT_ENCAPSED_STRING","'DimensionUnit'",1512],",",["T_WHITESPACE"," ",1512],["T_STRING","substr",1512],"(",["T_VARIABLE","$this",1512],["T_OBJECT_OPERATOR","->",1512],["T_STRING","_getDimensionUnit",1512],"(",")",",",["T_LNUMBER","0",1512],",",["T_LNUMBER","1",1512],")",")",";",["T_WHITESPACE","\n            ",1512],["T_IF","if",1513],["T_WHITESPACE"," ",1513],"(",["T_VARIABLE","$package",1513],"[",["T_CONSTANT_ENCAPSED_STRING","'params'",1513],"]","[",["T_CONSTANT_ENCAPSED_STRING","'container'",1513],"]",["T_WHITESPACE"," ",1513],["T_IS_EQUAL","==",1513],["T_WHITESPACE"," ",1513],["T_STRING","self",1513],["T_DOUBLE_COLON","::",1513],["T_STRING","DHL_CONTENT_TYPE_NON_DOC",1513],")",["T_WHITESPACE"," ",1513],"{",["T_WHITESPACE","\n                ",1513],["T_VARIABLE","$packageType",1514],["T_WHITESPACE"," ",1514],"=",["T_WHITESPACE"," ",1514],["T_CONSTANT_ENCAPSED_STRING","'CP'",1514],";",["T_WHITESPACE","\n            ",1514],"}",["T_WHITESPACE","\n            ",1515],["T_VARIABLE","$nodeShipmentDetails",1516],["T_OBJECT_OPERATOR","->",1516],["T_STRING","addChild",1516],"(",["T_CONSTANT_ENCAPSED_STRING","'PackageType'",1516],",",["T_WHITESPACE"," ",1516],["T_VARIABLE","$packageType",1516],")",";",["T_WHITESPACE","\n            ",1516],["T_IF","if",1517],["T_WHITESPACE"," ",1517],"(",["T_VARIABLE","$this",1517],["T_OBJECT_OPERATOR","->",1517],["T_STRING","getConfigData",1517],"(",["T_CONSTANT_ENCAPSED_STRING","'content_type'",1517],")",["T_WHITESPACE"," ",1517],["T_IS_EQUAL","==",1517],["T_WHITESPACE"," ",1517],["T_STRING","self",1517],["T_DOUBLE_COLON","::",1517],["T_STRING","DHL_CONTENT_TYPE_NON_DOC",1517],")",["T_WHITESPACE"," ",1517],"{",["T_WHITESPACE","\n                ",1517],["T_VARIABLE","$nodeShipmentDetails",1518],["T_OBJECT_OPERATOR","->",1518],["T_STRING","addChild",1518],"(",["T_CONSTANT_ENCAPSED_STRING","'IsDutiable'",1518],",",["T_WHITESPACE"," ",1518],["T_CONSTANT_ENCAPSED_STRING","'Y'",1518],")",";",["T_WHITESPACE","\n            ",1518],"}",["T_WHITESPACE","\n            ",1519],["T_VARIABLE","$nodeShipmentDetails",1520],["T_OBJECT_OPERATOR","->",1520],["T_STRING","addChild",1520],"(",["T_CONSTANT_ENCAPSED_STRING","'CurrencyCode'",1520],",",["T_WHITESPACE","\n                ",1520],["T_STRING","Mage",1521],["T_DOUBLE_COLON","::",1521],["T_STRING","app",1521],"(",")",["T_OBJECT_OPERATOR","->",1521],["T_STRING","getWebsite",1521],"(",["T_VARIABLE","$this",1521],["T_OBJECT_OPERATOR","->",1521],["T_STRING","_request",1521],["T_OBJECT_OPERATOR","->",1521],["T_STRING","getWebsiteId",1521],"(",")",")",["T_OBJECT_OPERATOR","->",1521],["T_STRING","getBaseCurrencyCode",1521],"(",")",["T_WHITESPACE","\n            ",1521],")",";",["T_WHITESPACE","\n        ",1522],"}",["T_WHITESPACE"," ",1523],["T_ELSE","else",1523],["T_WHITESPACE"," ",1523],"{",["T_WHITESPACE","\n            ",1523],["T_IF","if",1524],["T_WHITESPACE"," ",1524],"(",["T_VARIABLE","$package",1524],"[",["T_CONSTANT_ENCAPSED_STRING","'params'",1524],"]","[",["T_CONSTANT_ENCAPSED_STRING","'container'",1524],"]",["T_WHITESPACE"," ",1524],["T_IS_EQUAL","==",1524],["T_WHITESPACE"," ",1524],["T_STRING","self",1524],["T_DOUBLE_COLON","::",1524],["T_STRING","DHL_CONTENT_TYPE_NON_DOC",1524],")",["T_WHITESPACE"," ",1524],"{",["T_WHITESPACE","\n                ",1524],["T_VARIABLE","$packageType",1525],["T_WHITESPACE"," ",1525],"=",["T_WHITESPACE"," ",1525],["T_CONSTANT_ENCAPSED_STRING","'CP'",1525],";",["T_WHITESPACE","\n            ",1525],"}",["T_WHITESPACE","\n            ",1526],["T_VARIABLE","$nodeShipmentDetails",1527],["T_OBJECT_OPERATOR","->",1527],["T_STRING","addChild",1527],"(",["T_CONSTANT_ENCAPSED_STRING","'PackageType'",1527],",",["T_WHITESPACE"," ",1527],["T_VARIABLE","$packageType",1527],")",";",["T_WHITESPACE","\n            ",1527],["T_VARIABLE","$nodeShipmentDetails",1528],["T_OBJECT_OPERATOR","->",1528],["T_STRING","addChild",1528],"(",["T_CONSTANT_ENCAPSED_STRING","'Weight'",1528],",",["T_WHITESPACE"," ",1528],["T_VARIABLE","$rawRequest",1528],["T_OBJECT_OPERATOR","->",1528],["T_STRING","getPackageWeight",1528],"(",")",")",";",["T_WHITESPACE","\n\n            ",1528],["T_VARIABLE","$nodeShipmentDetails",1530],["T_OBJECT_OPERATOR","->",1530],["T_STRING","addChild",1530],"(",["T_CONSTANT_ENCAPSED_STRING","'DimensionUnit'",1530],",",["T_WHITESPACE"," ",1530],["T_STRING","substr",1530],"(",["T_VARIABLE","$this",1530],["T_OBJECT_OPERATOR","->",1530],["T_STRING","_getDimensionUnit",1530],"(",")",",",["T_LNUMBER","0",1530],",",["T_LNUMBER","1",1530],")",")",";",["T_WHITESPACE","\n            ",1530],["T_VARIABLE","$nodeShipmentDetails",1531],["T_OBJECT_OPERATOR","->",1531],["T_STRING","addChild",1531],"(",["T_CONSTANT_ENCAPSED_STRING","'WeightUnit'",1531],",",["T_WHITESPACE","  ",1531],["T_STRING","substr",1531],"(",["T_VARIABLE","$this",1531],["T_OBJECT_OPERATOR","->",1531],["T_STRING","_getWeightUnit",1531],"(",")",",",["T_LNUMBER","0",1531],",",["T_LNUMBER","1",1531],")",")",";",["T_WHITESPACE","\n\n            ",1531],["T_VARIABLE","$nodeShipmentDetails",1533],["T_OBJECT_OPERATOR","->",1533],["T_STRING","addChild",1533],"(",["T_CONSTANT_ENCAPSED_STRING","'GlobalProductCode'",1533],",",["T_WHITESPACE"," ",1533],["T_VARIABLE","$rawRequest",1533],["T_OBJECT_OPERATOR","->",1533],["T_STRING","getShippingMethod",1533],"(",")",")",";",["T_WHITESPACE","\n            ",1533],["T_VARIABLE","$nodeShipmentDetails",1534],["T_OBJECT_OPERATOR","->",1534],["T_STRING","addChild",1534],"(",["T_CONSTANT_ENCAPSED_STRING","'LocalProductCode'",1534],",",["T_WHITESPACE"," ",1534],["T_VARIABLE","$rawRequest",1534],["T_OBJECT_OPERATOR","->",1534],["T_STRING","getShippingMethod",1534],"(",")",")",";",["T_WHITESPACE","\n\n            ",1534],["T_COMMENT","\/*\n             * The DoorTo Element defines the type of delivery service that applies to the shipment.\n             * The valid values are DD (Door to Door), DA (Door to Airport) , AA and DC (Door to\n             * Door non-compliant)\n             *\/",1536],["T_WHITESPACE","\n            ",1540],["T_VARIABLE","$nodeShipmentDetails",1541],["T_OBJECT_OPERATOR","->",1541],["T_STRING","addChild",1541],"(",["T_CONSTANT_ENCAPSED_STRING","'DoorTo'",1541],",",["T_WHITESPACE"," ",1541],["T_CONSTANT_ENCAPSED_STRING","'DD'",1541],")",";",["T_WHITESPACE","\n            ",1541],["T_VARIABLE","$nodeShipmentDetails",1542],["T_OBJECT_OPERATOR","->",1542],["T_STRING","addChild",1542],"(",["T_CONSTANT_ENCAPSED_STRING","'Date'",1542],",",["T_WHITESPACE"," ",1542],["T_STRING","Mage",1542],["T_DOUBLE_COLON","::",1542],["T_STRING","getModel",1542],"(",["T_CONSTANT_ENCAPSED_STRING","'core\/date'",1542],")",["T_OBJECT_OPERATOR","->",1542],["T_STRING","date",1542],"(",["T_STRING","self",1542],["T_DOUBLE_COLON","::",1542],["T_STRING","REQUEST_DATE_FORMAT",1542],")",")",";",["T_WHITESPACE","\n            ",1542],["T_VARIABLE","$nodeShipmentDetails",1543],["T_OBJECT_OPERATOR","->",1543],["T_STRING","addChild",1543],"(",["T_CONSTANT_ENCAPSED_STRING","'Contents'",1543],",",["T_WHITESPACE"," ",1543],["T_CONSTANT_ENCAPSED_STRING","'DHL Parcel'",1543],")",";",["T_WHITESPACE","\n        ",1543],"}",["T_WHITESPACE","\n    ",1544],"}",["T_WHITESPACE","\n\n    ",1545],["T_DOC_COMMENT","\/**\n     * Get tracking\n     *\n     * @param mixed $trackings\n     * @return mixed\n     *\/",1547],["T_WHITESPACE","\n    ",1552],["T_PUBLIC","public",1553],["T_WHITESPACE"," ",1553],["T_FUNCTION","function",1553],["T_WHITESPACE"," ",1553],["T_STRING","getTracking",1553],"(",["T_VARIABLE","$trackings",1553],")",["T_WHITESPACE","\n    ",1553],"{",["T_WHITESPACE","\n        ",1554],["T_IF","if",1555],["T_WHITESPACE"," ",1555],"(","!",["T_STRING","is_array",1555],"(",["T_VARIABLE","$trackings",1555],")",")",["T_WHITESPACE"," ",1555],"{",["T_WHITESPACE","\n            ",1555],["T_VARIABLE","$trackings",1556],["T_WHITESPACE"," ",1556],"=",["T_WHITESPACE"," ",1556],["T_ARRAY","array",1556],"(",["T_VARIABLE","$trackings",1556],")",";",["T_WHITESPACE","\n        ",1556],"}",["T_WHITESPACE","\n        ",1557],["T_VARIABLE","$this",1558],["T_OBJECT_OPERATOR","->",1558],["T_STRING","_getXMLTracking",1558],"(",["T_VARIABLE","$trackings",1558],")",";",["T_WHITESPACE","\n\n        ",1558],["T_RETURN","return",1560],["T_WHITESPACE"," ",1560],["T_VARIABLE","$this",1560],["T_OBJECT_OPERATOR","->",1560],["T_STRING","_result",1560],";",["T_WHITESPACE","\n    ",1560],"}",["T_WHITESPACE","\n\n    ",1561],["T_DOC_COMMENT","\/**\n     * Send request for tracking\n     *\n     * @param array $trackings\n     * @return void\n     *\/",1563],["T_WHITESPACE","\n    ",1568],["T_PROTECTED","protected",1569],["T_WHITESPACE"," ",1569],["T_FUNCTION","function",1569],["T_WHITESPACE"," ",1569],["T_STRING","_getXMLTracking",1569],"(",["T_VARIABLE","$trackings",1569],")",["T_WHITESPACE","\n    ",1569],"{",["T_WHITESPACE","\n        ",1570],["T_VARIABLE","$xmlStr",1571],["T_WHITESPACE"," ",1571],"=",["T_WHITESPACE"," ",1571],["T_CONSTANT_ENCAPSED_STRING","'<?xml version=\"1.0\" encoding=\"UTF-8\"?>'",1571],["T_WHITESPACE","\n            ",1571],".",["T_WHITESPACE"," ",1572],["T_CONSTANT_ENCAPSED_STRING","'<req:KnownTrackingRequest'",1572],["T_WHITESPACE","\n            ",1572],".",["T_WHITESPACE"," ",1573],["T_CONSTANT_ENCAPSED_STRING","' xmlns:req=\"http:\/\/www.dhl.com\"'",1573],["T_WHITESPACE","\n            ",1573],".",["T_WHITESPACE"," ",1574],["T_CONSTANT_ENCAPSED_STRING","' xmlns:xsi=\"http:\/\/www.w3.org\/2001\/XMLSchema-instance\"'",1574],["T_WHITESPACE","\n            ",1574],".",["T_WHITESPACE"," ",1575],["T_CONSTANT_ENCAPSED_STRING","' xsi:schemaLocation=\"http:\/\/www.dhl.com TrackingRequestKnown.xsd\" \/>'",1575],";",["T_WHITESPACE","\n\n        ",1575],["T_VARIABLE","$xml",1577],["T_WHITESPACE"," ",1577],"=",["T_WHITESPACE"," ",1577],["T_NEW","new",1577],["T_WHITESPACE"," ",1577],["T_STRING","SimpleXMLElement",1577],"(",["T_VARIABLE","$xmlStr",1577],")",";",["T_WHITESPACE","\n\n        ",1577],["T_VARIABLE","$requestNode",1579],["T_WHITESPACE"," ",1579],"=",["T_WHITESPACE"," ",1579],["T_VARIABLE","$xml",1579],["T_OBJECT_OPERATOR","->",1579],["T_STRING","addChild",1579],"(",["T_CONSTANT_ENCAPSED_STRING","'Request'",1579],",",["T_WHITESPACE"," ",1579],["T_CONSTANT_ENCAPSED_STRING","''",1579],",",["T_WHITESPACE"," ",1579],["T_CONSTANT_ENCAPSED_STRING","''",1579],")",";",["T_WHITESPACE","\n        ",1579],["T_VARIABLE","$serviceHeaderNode",1580],["T_WHITESPACE"," ",1580],"=",["T_WHITESPACE"," ",1580],["T_VARIABLE","$requestNode",1580],["T_OBJECT_OPERATOR","->",1580],["T_STRING","addChild",1580],"(",["T_CONSTANT_ENCAPSED_STRING","'ServiceHeader'",1580],",",["T_WHITESPACE"," ",1580],["T_CONSTANT_ENCAPSED_STRING","''",1580],",",["T_WHITESPACE"," ",1580],["T_CONSTANT_ENCAPSED_STRING","''",1580],")",";",["T_WHITESPACE","\n        ",1580],["T_VARIABLE","$serviceHeaderNode",1581],["T_OBJECT_OPERATOR","->",1581],["T_STRING","addChild",1581],"(",["T_CONSTANT_ENCAPSED_STRING","'SiteID'",1581],",",["T_WHITESPACE"," ",1581],["T_STRING_CAST","(string)",1581],["T_VARIABLE","$this",1581],["T_OBJECT_OPERATOR","->",1581],["T_STRING","getConfigData",1581],"(",["T_CONSTANT_ENCAPSED_STRING","'id'",1581],")",")",";",["T_WHITESPACE","\n        ",1581],["T_VARIABLE","$serviceHeaderNode",1582],["T_OBJECT_OPERATOR","->",1582],["T_STRING","addChild",1582],"(",["T_CONSTANT_ENCAPSED_STRING","'Password'",1582],",",["T_WHITESPACE"," ",1582],["T_STRING_CAST","(string)",1582],["T_VARIABLE","$this",1582],["T_OBJECT_OPERATOR","->",1582],["T_STRING","getConfigData",1582],"(",["T_CONSTANT_ENCAPSED_STRING","'password'",1582],")",")",";",["T_WHITESPACE","\n\n        ",1582],["T_VARIABLE","$xml",1584],["T_OBJECT_OPERATOR","->",1584],["T_STRING","addChild",1584],"(",["T_CONSTANT_ENCAPSED_STRING","'LanguageCode'",1584],",",["T_WHITESPACE"," ",1584],["T_CONSTANT_ENCAPSED_STRING","'EN'",1584],",",["T_WHITESPACE"," ",1584],["T_CONSTANT_ENCAPSED_STRING","''",1584],")",";",["T_WHITESPACE","\n        ",1584],["T_FOREACH","foreach",1585],["T_WHITESPACE"," ",1585],"(",["T_VARIABLE","$trackings",1585],["T_WHITESPACE"," ",1585],["T_AS","as",1585],["T_WHITESPACE"," ",1585],["T_VARIABLE","$tracking",1585],")",["T_WHITESPACE"," ",1585],"{",["T_WHITESPACE","\n            ",1585],["T_VARIABLE","$xml",1586],["T_OBJECT_OPERATOR","->",1586],["T_STRING","addChild",1586],"(",["T_CONSTANT_ENCAPSED_STRING","'AWBNumber'",1586],",",["T_WHITESPACE"," ",1586],["T_VARIABLE","$tracking",1586],",",["T_WHITESPACE"," ",1586],["T_CONSTANT_ENCAPSED_STRING","''",1586],")",";",["T_WHITESPACE","\n        ",1586],"}",["T_WHITESPACE","\n        ",1587],["T_COMMENT","\/*\n         * Checkpoint details selection flag\n         * LAST_CHECK_POINT_ONLY\n         * ALL_CHECK_POINTS\n         *\/",1588],["T_WHITESPACE","\n        ",1592],["T_VARIABLE","$xml",1593],["T_OBJECT_OPERATOR","->",1593],["T_STRING","addChild",1593],"(",["T_CONSTANT_ENCAPSED_STRING","'LevelOfDetails'",1593],",",["T_WHITESPACE"," ",1593],["T_CONSTANT_ENCAPSED_STRING","'ALL_CHECK_POINTS'",1593],",",["T_WHITESPACE"," ",1593],["T_CONSTANT_ENCAPSED_STRING","''",1593],")",";",["T_WHITESPACE","\n\n        ",1593],["T_COMMENT","\/*\n         * Value that indicates for getting the tracking details with the additional\n         * piece details and its respective Piece Details, Piece checkpoints along with\n         * Shipment Details if queried.\n         *\n         * S-Only Shipment Details\n         * B-Both Shipment & Piece Details\n         * P-Only Piece Details\n         * Default is \u00e2\u0080\u0098S\u00e2\u0080\u0099\n         *\/",1595],["T_WHITESPACE","\n        ",1604],["T_COMMENT","\/\/$xml->addChild('PiecesEnabled', 'ALL_CHECK_POINTS');\n",1605],["T_WHITESPACE","\n        ",1606],["T_VARIABLE","$request",1607],["T_WHITESPACE"," ",1607],"=",["T_WHITESPACE"," ",1607],["T_VARIABLE","$xml",1607],["T_OBJECT_OPERATOR","->",1607],["T_STRING","asXML",1607],"(",")",";",["T_WHITESPACE","\n        ",1607],["T_VARIABLE","$request",1608],["T_WHITESPACE"," ",1608],"=",["T_WHITESPACE"," ",1608],["T_STRING","utf8_encode",1608],"(",["T_VARIABLE","$request",1608],")",";",["T_WHITESPACE","\n\n        ",1608],["T_VARIABLE","$responseBody",1610],["T_WHITESPACE"," ",1610],"=",["T_WHITESPACE"," ",1610],["T_VARIABLE","$this",1610],["T_OBJECT_OPERATOR","->",1610],["T_STRING","_getCachedQuotes",1610],"(",["T_VARIABLE","$request",1610],")",";",["T_WHITESPACE","\n        ",1610],["T_IF","if",1611],["T_WHITESPACE"," ",1611],"(",["T_VARIABLE","$responseBody",1611],["T_WHITESPACE"," ",1611],["T_IS_IDENTICAL","===",1611],["T_WHITESPACE"," ",1611],["T_STRING","null",1611],")",["T_WHITESPACE"," ",1611],"{",["T_WHITESPACE","\n            ",1611],["T_VARIABLE","$debugData",1612],["T_WHITESPACE"," ",1612],"=",["T_WHITESPACE"," ",1612],["T_ARRAY","array",1612],"(",["T_CONSTANT_ENCAPSED_STRING","'request'",1612],["T_WHITESPACE"," ",1612],["T_DOUBLE_ARROW","=>",1612],["T_WHITESPACE"," ",1612],["T_VARIABLE","$request",1612],")",";",["T_WHITESPACE","\n            ",1612],["T_TRY","try",1613],["T_WHITESPACE"," ",1613],"{",["T_WHITESPACE","\n                ",1613],["T_VARIABLE","$client",1614],["T_WHITESPACE"," ",1614],"=",["T_WHITESPACE"," ",1614],["T_NEW","new",1614],["T_WHITESPACE"," ",1614],["T_STRING","Varien_Http_Client",1614],"(",")",";",["T_WHITESPACE","\n                ",1614],["T_VARIABLE","$client",1615],["T_OBJECT_OPERATOR","->",1615],["T_STRING","setUri",1615],"(",["T_STRING_CAST","(string)",1615],["T_VARIABLE","$this",1615],["T_OBJECT_OPERATOR","->",1615],["T_STRING","getConfigData",1615],"(",["T_CONSTANT_ENCAPSED_STRING","'gateway_url'",1615],")",")",";",["T_WHITESPACE","\n                ",1615],["T_VARIABLE","$client",1616],["T_OBJECT_OPERATOR","->",1616],["T_STRING","setConfig",1616],"(",["T_ARRAY","array",1616],"(",["T_WHITESPACE","\n                    ",1616],["T_CONSTANT_ENCAPSED_STRING","'maxredirects'",1617],["T_WHITESPACE"," ",1617],["T_DOUBLE_ARROW","=>",1617],["T_WHITESPACE"," ",1617],["T_LNUMBER","0",1617],",",["T_WHITESPACE","\n                    ",1617],["T_CONSTANT_ENCAPSED_STRING","'timeout'",1618],["T_WHITESPACE"," ",1618],["T_DOUBLE_ARROW","=>",1618],["T_WHITESPACE"," ",1618],["T_LNUMBER","30",1618],",",["T_WHITESPACE","\n                    ",1618],["T_CONSTANT_ENCAPSED_STRING","'verifypeer'",1619],["T_WHITESPACE"," ",1619],["T_DOUBLE_ARROW","=>",1619],["T_WHITESPACE"," ",1619],["T_VARIABLE","$this",1619],["T_OBJECT_OPERATOR","->",1619],["T_STRING","getConfigFlag",1619],"(",["T_CONSTANT_ENCAPSED_STRING","'verify_peer'",1619],")",",",["T_WHITESPACE","\n                    ",1619],["T_CONSTANT_ENCAPSED_STRING","'verifyhost'",1620],["T_WHITESPACE"," ",1620],["T_DOUBLE_ARROW","=>",1620],["T_WHITESPACE"," ",1620],["T_LNUMBER","2",1620],",",["T_WHITESPACE","\n                ",1620],")",")",";",["T_WHITESPACE","\n                ",1621],["T_VARIABLE","$client",1622],["T_OBJECT_OPERATOR","->",1622],["T_STRING","setRawData",1622],"(",["T_VARIABLE","$request",1622],")",";",["T_WHITESPACE","\n                ",1622],["T_VARIABLE","$responseBody",1623],["T_WHITESPACE"," ",1623],"=",["T_WHITESPACE"," ",1623],["T_VARIABLE","$client",1623],["T_OBJECT_OPERATOR","->",1623],["T_STRING","request",1623],"(",["T_STRING","Varien_Http_Client",1623],["T_DOUBLE_COLON","::",1623],["T_STRING","POST",1623],")",["T_OBJECT_OPERATOR","->",1623],["T_STRING","getBody",1623],"(",")",";",["T_WHITESPACE","\n                ",1623],["T_VARIABLE","$debugData",1624],"[",["T_CONSTANT_ENCAPSED_STRING","'result'",1624],"]",["T_WHITESPACE"," ",1624],"=",["T_WHITESPACE"," ",1624],["T_VARIABLE","$responseBody",1624],";",["T_WHITESPACE","\n                ",1624],["T_VARIABLE","$this",1625],["T_OBJECT_OPERATOR","->",1625],["T_STRING","_setCachedQuotes",1625],"(",["T_VARIABLE","$request",1625],",",["T_WHITESPACE"," ",1625],["T_VARIABLE","$responseBody",1625],")",";",["T_WHITESPACE","\n            ",1625],"}",["T_WHITESPACE"," ",1626],["T_CATCH","catch",1626],["T_WHITESPACE"," ",1626],"(",["T_STRING","Exception",1626],["T_WHITESPACE"," ",1626],["T_VARIABLE","$e",1626],")",["T_WHITESPACE"," ",1626],"{",["T_WHITESPACE","\n                ",1626],["T_VARIABLE","$this",1627],["T_OBJECT_OPERATOR","->",1627],["T_STRING","_errors",1627],"[",["T_VARIABLE","$e",1627],["T_OBJECT_OPERATOR","->",1627],["T_STRING","getCode",1627],"(",")","]",["T_WHITESPACE"," ",1627],"=",["T_WHITESPACE"," ",1627],["T_VARIABLE","$e",1627],["T_OBJECT_OPERATOR","->",1627],["T_STRING","getMessage",1627],"(",")",";",["T_WHITESPACE","\n                ",1627],["T_VARIABLE","$responseBody",1628],["T_WHITESPACE"," ",1628],"=",["T_WHITESPACE"," ",1628],["T_CONSTANT_ENCAPSED_STRING","''",1628],";",["T_WHITESPACE","\n            ",1628],"}",["T_WHITESPACE","\n            ",1629],["T_VARIABLE","$this",1630],["T_OBJECT_OPERATOR","->",1630],["T_STRING","_debug",1630],"(",["T_VARIABLE","$debugData",1630],")",";",["T_WHITESPACE","\n        ",1630],"}",["T_WHITESPACE","\n\n        ",1631],["T_VARIABLE","$this",1633],["T_OBJECT_OPERATOR","->",1633],["T_STRING","_parseXmlTrackingResponse",1633],"(",["T_VARIABLE","$trackings",1633],",",["T_WHITESPACE"," ",1633],["T_VARIABLE","$responseBody",1633],")",";",["T_WHITESPACE","\n    ",1633],"}",["T_WHITESPACE","\n\n    ",1634],["T_DOC_COMMENT","\/**\n     * Parse xml tracking response\n     *\n     * @param array $trackings\n     * @param string $response\n     * @return void\n     *\/",1636],["T_WHITESPACE","\n    ",1642],["T_PROTECTED","protected",1643],["T_WHITESPACE"," ",1643],["T_FUNCTION","function",1643],["T_WHITESPACE"," ",1643],["T_STRING","_parseXmlTrackingResponse",1643],"(",["T_VARIABLE","$trackings",1643],",",["T_WHITESPACE"," ",1643],["T_VARIABLE","$response",1643],")",["T_WHITESPACE","\n    ",1643],"{",["T_WHITESPACE","\n        ",1644],["T_VARIABLE","$errorTitle",1645],["T_WHITESPACE"," ",1645],"=",["T_WHITESPACE"," ",1645],["T_STRING","Mage",1645],["T_DOUBLE_COLON","::",1645],["T_STRING","helper",1645],"(",["T_CONSTANT_ENCAPSED_STRING","'usa'",1645],")",["T_OBJECT_OPERATOR","->",1645],["T_STRING","__",1645],"(",["T_CONSTANT_ENCAPSED_STRING","'Unable to retrieve tracking'",1645],")",";",["T_WHITESPACE","\n        ",1645],["T_VARIABLE","$resultArr",1646],["T_WHITESPACE"," ",1646],"=",["T_WHITESPACE"," ",1646],["T_ARRAY","array",1646],"(",")",";",["T_WHITESPACE","\n\n        ",1646],["T_IF","if",1648],["T_WHITESPACE"," ",1648],"(",["T_STRING","strlen",1648],"(",["T_STRING","trim",1648],"(",["T_VARIABLE","$response",1648],")",")",["T_WHITESPACE"," ",1648],">",["T_WHITESPACE"," ",1648],["T_LNUMBER","0",1648],")",["T_WHITESPACE"," ",1648],"{",["T_WHITESPACE","\n            ",1648],["T_VARIABLE","$xml",1649],["T_WHITESPACE"," ",1649],"=",["T_WHITESPACE"," ",1649],["T_STRING","simplexml_load_string",1649],"(",["T_VARIABLE","$response",1649],")",";",["T_WHITESPACE","\n            ",1649],["T_IF","if",1650],["T_WHITESPACE"," ",1650],"(","!",["T_STRING","is_object",1650],"(",["T_VARIABLE","$xml",1650],")",")",["T_WHITESPACE"," ",1650],"{",["T_WHITESPACE","\n                ",1650],["T_VARIABLE","$errorTitle",1651],["T_WHITESPACE"," ",1651],"=",["T_WHITESPACE"," ",1651],["T_STRING","Mage",1651],["T_DOUBLE_COLON","::",1651],["T_STRING","helper",1651],"(",["T_CONSTANT_ENCAPSED_STRING","'usa'",1651],")",["T_OBJECT_OPERATOR","->",1651],["T_STRING","__",1651],"(",["T_CONSTANT_ENCAPSED_STRING","'Response is in the wrong format'",1651],")",";",["T_WHITESPACE","\n            ",1651],"}",["T_WHITESPACE","\n            ",1652],["T_IF","if",1653],["T_WHITESPACE"," ",1653],"(",["T_STRING","is_object",1653],"(",["T_VARIABLE","$xml",1653],")",["T_WHITESPACE"," ",1653],["T_BOOLEAN_AND","&&",1653],["T_WHITESPACE"," ",1653],"(","(",["T_ISSET","isset",1653],"(",["T_VARIABLE","$xml",1653],["T_OBJECT_OPERATOR","->",1653],["T_STRING","Response",1653],["T_OBJECT_OPERATOR","->",1653],["T_STRING","Status",1653],["T_OBJECT_OPERATOR","->",1653],["T_STRING","ActionStatus",1653],")",["T_WHITESPACE","\n                ",1653],["T_BOOLEAN_AND","&&",1654],["T_WHITESPACE"," ",1654],["T_VARIABLE","$xml",1654],["T_OBJECT_OPERATOR","->",1654],["T_STRING","Response",1654],["T_OBJECT_OPERATOR","->",1654],["T_STRING","Status",1654],["T_OBJECT_OPERATOR","->",1654],["T_STRING","ActionStatus",1654],["T_WHITESPACE"," ",1654],["T_IS_EQUAL","==",1654],["T_WHITESPACE"," ",1654],["T_CONSTANT_ENCAPSED_STRING","'Failure'",1654],")",["T_WHITESPACE","\n                ",1654],["T_BOOLEAN_OR","||",1655],["T_WHITESPACE"," ",1655],["T_ISSET","isset",1655],"(",["T_VARIABLE","$xml",1655],["T_OBJECT_OPERATOR","->",1655],["T_STRING","GetQuoteResponse",1655],["T_OBJECT_OPERATOR","->",1655],["T_STRING","Note",1655],["T_OBJECT_OPERATOR","->",1655],["T_STRING","Condition",1655],")",")",["T_WHITESPACE","\n            ",1655],")",["T_WHITESPACE"," ",1656],"{",["T_WHITESPACE","\n                ",1656],["T_IF","if",1657],["T_WHITESPACE"," ",1657],"(",["T_ISSET","isset",1657],"(",["T_VARIABLE","$xml",1657],["T_OBJECT_OPERATOR","->",1657],["T_STRING","Response",1657],["T_OBJECT_OPERATOR","->",1657],["T_STRING","Status",1657],["T_OBJECT_OPERATOR","->",1657],["T_STRING","Condition",1657],")",")",["T_WHITESPACE"," ",1657],"{",["T_WHITESPACE","\n                    ",1657],["T_VARIABLE","$nodeCondition",1658],["T_WHITESPACE"," ",1658],"=",["T_WHITESPACE"," ",1658],["T_VARIABLE","$xml",1658],["T_OBJECT_OPERATOR","->",1658],["T_STRING","Response",1658],["T_OBJECT_OPERATOR","->",1658],["T_STRING","Status",1658],["T_OBJECT_OPERATOR","->",1658],["T_STRING","Condition",1658],";",["T_WHITESPACE","\n                ",1658],"}",["T_WHITESPACE","\n\n                ",1659],["T_VARIABLE","$code",1661],["T_WHITESPACE"," ",1661],"=",["T_WHITESPACE"," ",1661],["T_ISSET","isset",1661],"(",["T_VARIABLE","$nodeCondition",1661],["T_OBJECT_OPERATOR","->",1661],["T_STRING","ConditionCode",1661],")",["T_WHITESPACE"," ",1661],"?",["T_WHITESPACE"," ",1661],["T_STRING_CAST","(string)",1661],["T_VARIABLE","$nodeCondition",1661],["T_OBJECT_OPERATOR","->",1661],["T_STRING","ConditionCode",1661],["T_WHITESPACE"," ",1661],":",["T_WHITESPACE"," ",1661],["T_LNUMBER","0",1661],";",["T_WHITESPACE","\n                ",1661],["T_VARIABLE","$data",1662],["T_WHITESPACE"," ",1662],"=",["T_WHITESPACE"," ",1662],["T_ISSET","isset",1662],"(",["T_VARIABLE","$nodeCondition",1662],["T_OBJECT_OPERATOR","->",1662],["T_STRING","ConditionData",1662],")",["T_WHITESPACE"," ",1662],"?",["T_WHITESPACE"," ",1662],["T_STRING_CAST","(string)",1662],["T_VARIABLE","$nodeCondition",1662],["T_OBJECT_OPERATOR","->",1662],["T_STRING","ConditionData",1662],["T_WHITESPACE"," ",1662],":",["T_WHITESPACE"," ",1662],["T_CONSTANT_ENCAPSED_STRING","''",1662],";",["T_WHITESPACE","\n                ",1662],["T_VARIABLE","$this",1663],["T_OBJECT_OPERATOR","->",1663],["T_STRING","_errors",1663],"[",["T_VARIABLE","$code",1663],"]",["T_WHITESPACE"," ",1663],"=",["T_WHITESPACE"," ",1663],["T_STRING","Mage",1663],["T_DOUBLE_COLON","::",1663],["T_STRING","helper",1663],"(",["T_CONSTANT_ENCAPSED_STRING","'usa'",1663],")",["T_OBJECT_OPERATOR","->",1663],["T_STRING","__",1663],"(",["T_CONSTANT_ENCAPSED_STRING","'Error #%s : %s'",1663],",",["T_WHITESPACE"," ",1663],["T_VARIABLE","$code",1663],",",["T_WHITESPACE"," ",1663],["T_VARIABLE","$data",1663],")",";",["T_WHITESPACE","\n            ",1663],"}",["T_WHITESPACE"," ",1664],["T_ELSEIF","elseif",1664],["T_WHITESPACE"," ",1664],"(",["T_STRING","is_object",1664],"(",["T_VARIABLE","$xml",1664],")",["T_WHITESPACE"," ",1664],["T_BOOLEAN_AND","&&",1664],["T_WHITESPACE"," ",1664],["T_STRING","is_object",1664],"(",["T_VARIABLE","$xml",1664],["T_OBJECT_OPERATOR","->",1664],["T_STRING","AWBInfo",1664],")",")",["T_WHITESPACE"," ",1664],"{",["T_WHITESPACE","\n                ",1664],["T_FOREACH","foreach",1665],["T_WHITESPACE"," ",1665],"(",["T_VARIABLE","$xml",1665],["T_OBJECT_OPERATOR","->",1665],["T_STRING","AWBInfo",1665],["T_WHITESPACE"," ",1665],["T_AS","as",1665],["T_WHITESPACE"," ",1665],["T_VARIABLE","$awbinfo",1665],")",["T_WHITESPACE"," ",1665],"{",["T_WHITESPACE","\n                    ",1665],["T_VARIABLE","$awbinfoData",1666],["T_WHITESPACE"," ",1666],"=",["T_WHITESPACE"," ",1666],["T_ARRAY","array",1666],"(",")",";",["T_WHITESPACE","\n                    ",1666],["T_VARIABLE","$trackNum",1667],["T_WHITESPACE"," ",1667],"=",["T_WHITESPACE"," ",1667],["T_ISSET","isset",1667],"(",["T_VARIABLE","$awbinfo",1667],["T_OBJECT_OPERATOR","->",1667],["T_STRING","AWBNumber",1667],")",["T_WHITESPACE"," ",1667],"?",["T_WHITESPACE"," ",1667],["T_STRING_CAST","(string)",1667],["T_VARIABLE","$awbinfo",1667],["T_OBJECT_OPERATOR","->",1667],["T_STRING","AWBNumber",1667],["T_WHITESPACE"," ",1667],":",["T_WHITESPACE"," ",1667],["T_CONSTANT_ENCAPSED_STRING","''",1667],";",["T_WHITESPACE","\n                    ",1667],["T_IF","if",1668],["T_WHITESPACE"," ",1668],"(","!",["T_STRING","is_object",1668],"(",["T_VARIABLE","$awbinfo",1668],")",["T_WHITESPACE"," ",1668],["T_BOOLEAN_OR","||",1668],["T_WHITESPACE"," ",1668],"!",["T_VARIABLE","$awbinfo",1668],["T_OBJECT_OPERATOR","->",1668],["T_STRING","ShipmentInfo",1668],")",["T_WHITESPACE"," ",1668],"{",["T_WHITESPACE","\n                        ",1668],["T_VARIABLE","$this",1669],["T_OBJECT_OPERATOR","->",1669],["T_STRING","_errors",1669],"[",["T_VARIABLE","$trackNum",1669],"]",["T_WHITESPACE"," ",1669],"=",["T_WHITESPACE"," ",1669],["T_STRING","Mage",1669],["T_DOUBLE_COLON","::",1669],["T_STRING","helper",1669],"(",["T_CONSTANT_ENCAPSED_STRING","'usa'",1669],")",["T_OBJECT_OPERATOR","->",1669],["T_STRING","__",1669],"(",["T_CONSTANT_ENCAPSED_STRING","'Unable to retrieve tracking'",1669],")",";",["T_WHITESPACE","\n                        ",1669],["T_CONTINUE","continue",1670],";",["T_WHITESPACE","\n                    ",1670],"}",["T_WHITESPACE","\n                    ",1671],["T_VARIABLE","$shipmentInfo",1672],["T_WHITESPACE"," ",1672],"=",["T_WHITESPACE"," ",1672],["T_VARIABLE","$awbinfo",1672],["T_OBJECT_OPERATOR","->",1672],["T_STRING","ShipmentInfo",1672],";",["T_WHITESPACE","\n\n                    ",1672],["T_IF","if",1674],["T_WHITESPACE"," ",1674],"(",["T_VARIABLE","$shipmentInfo",1674],["T_OBJECT_OPERATOR","->",1674],["T_STRING","ShipmentDesc",1674],")",["T_WHITESPACE"," ",1674],"{",["T_WHITESPACE","\n                        ",1674],["T_VARIABLE","$awbinfoData",1675],"[",["T_CONSTANT_ENCAPSED_STRING","'service'",1675],"]",["T_WHITESPACE"," ",1675],"=",["T_WHITESPACE"," ",1675],["T_STRING_CAST","(string)",1675],["T_VARIABLE","$shipmentInfo",1675],["T_OBJECT_OPERATOR","->",1675],["T_STRING","ShipmentDesc",1675],";",["T_WHITESPACE","\n                    ",1675],"}",["T_WHITESPACE","\n\n                    ",1676],["T_VARIABLE","$awbinfoData",1678],"[",["T_CONSTANT_ENCAPSED_STRING","'weight'",1678],"]",["T_WHITESPACE"," ",1678],"=",["T_WHITESPACE"," ",1678],["T_STRING_CAST","(string)",1678],["T_VARIABLE","$shipmentInfo",1678],["T_OBJECT_OPERATOR","->",1678],["T_STRING","Weight",1678],["T_WHITESPACE"," ",1678],".",["T_WHITESPACE"," ",1678],["T_CONSTANT_ENCAPSED_STRING","' '",1678],["T_WHITESPACE"," ",1678],".",["T_WHITESPACE"," ",1678],["T_STRING_CAST","(string)",1678],["T_VARIABLE","$shipmentInfo",1678],["T_OBJECT_OPERATOR","->",1678],["T_STRING","WeightUnit",1678],";",["T_WHITESPACE","\n\n                    ",1678],["T_VARIABLE","$packageProgress",1680],["T_WHITESPACE"," ",1680],"=",["T_WHITESPACE"," ",1680],["T_ARRAY","array",1680],"(",")",";",["T_WHITESPACE","\n                    ",1680],["T_IF","if",1681],["T_WHITESPACE"," ",1681],"(",["T_ISSET","isset",1681],"(",["T_VARIABLE","$shipmentInfo",1681],["T_OBJECT_OPERATOR","->",1681],["T_STRING","ShipmentEvent",1681],")",")",["T_WHITESPACE"," ",1681],"{",["T_WHITESPACE","\n                        ",1681],["T_FOREACH","foreach",1682],["T_WHITESPACE"," ",1682],"(",["T_VARIABLE","$shipmentInfo",1682],["T_OBJECT_OPERATOR","->",1682],["T_STRING","ShipmentEvent",1682],["T_WHITESPACE"," ",1682],["T_AS","as",1682],["T_WHITESPACE"," ",1682],["T_VARIABLE","$shipmentEvent",1682],")",["T_WHITESPACE"," ",1682],"{",["T_WHITESPACE","\n                            ",1682],["T_VARIABLE","$shipmentEventArray",1683],["T_WHITESPACE"," ",1683],"=",["T_WHITESPACE"," ",1683],["T_ARRAY","array",1683],"(",")",";",["T_WHITESPACE","\n                            ",1683],["T_VARIABLE","$shipmentEventArray",1684],"[",["T_CONSTANT_ENCAPSED_STRING","'activity'",1684],"]",["T_WHITESPACE"," ",1684],"=",["T_WHITESPACE"," ",1684],["T_STRING_CAST","(string)",1684],["T_VARIABLE","$shipmentEvent",1684],["T_OBJECT_OPERATOR","->",1684],["T_STRING","ServiceEvent",1684],["T_OBJECT_OPERATOR","->",1684],["T_STRING","EventCode",1684],["T_WHITESPACE","\n                                ",1684],".",["T_WHITESPACE"," ",1685],["T_CONSTANT_ENCAPSED_STRING","' '",1685],["T_WHITESPACE"," ",1685],".",["T_WHITESPACE"," ",1685],["T_STRING_CAST","(string)",1685],["T_VARIABLE","$shipmentEvent",1685],["T_OBJECT_OPERATOR","->",1685],["T_STRING","ServiceEvent",1685],["T_OBJECT_OPERATOR","->",1685],["T_STRING","Description",1685],";",["T_WHITESPACE","\n                            ",1685],["T_VARIABLE","$shipmentEventArray",1686],"[",["T_CONSTANT_ENCAPSED_STRING","'deliverydate'",1686],"]",["T_WHITESPACE"," ",1686],"=",["T_WHITESPACE"," ",1686],["T_STRING_CAST","(string)",1686],["T_VARIABLE","$shipmentEvent",1686],["T_OBJECT_OPERATOR","->",1686],["T_STRING","Date",1686],";",["T_WHITESPACE","\n                            ",1686],["T_VARIABLE","$shipmentEventArray",1687],"[",["T_CONSTANT_ENCAPSED_STRING","'deliverytime'",1687],"]",["T_WHITESPACE"," ",1687],"=",["T_WHITESPACE"," ",1687],["T_STRING_CAST","(string)",1687],["T_VARIABLE","$shipmentEvent",1687],["T_OBJECT_OPERATOR","->",1687],["T_STRING","Time",1687],";",["T_WHITESPACE","\n                            ",1687],["T_VARIABLE","$shipmentEventArray",1688],"[",["T_CONSTANT_ENCAPSED_STRING","'deliverylocation'",1688],"]",["T_WHITESPACE"," ",1688],"=",["T_WHITESPACE"," ",1688],["T_STRING_CAST","(string)",1688],["T_VARIABLE","$shipmentEvent",1688],["T_OBJECT_OPERATOR","->",1688],["T_STRING","ServiceArea",1688],["T_OBJECT_OPERATOR","->",1688],["T_STRING","Description",1688],["T_WHITESPACE","\n                                ",1688],".",["T_WHITESPACE"," ",1689],["T_CONSTANT_ENCAPSED_STRING","' ['",1689],["T_WHITESPACE"," ",1689],".",["T_WHITESPACE"," ",1689],["T_STRING_CAST","(string)",1689],["T_VARIABLE","$shipmentEvent",1689],["T_OBJECT_OPERATOR","->",1689],["T_STRING","ServiceArea",1689],["T_OBJECT_OPERATOR","->",1689],["T_STRING","ServiceAreaCode",1689],["T_WHITESPACE"," ",1689],".",["T_WHITESPACE"," ",1689],["T_CONSTANT_ENCAPSED_STRING","']'",1689],";",["T_WHITESPACE","\n                            ",1689],["T_VARIABLE","$packageProgress",1690],"[","]",["T_WHITESPACE"," ",1690],"=",["T_WHITESPACE"," ",1690],["T_VARIABLE","$shipmentEventArray",1690],";",["T_WHITESPACE","\n                        ",1690],"}",["T_WHITESPACE","\n                        ",1691],["T_VARIABLE","$awbinfoData",1692],"[",["T_CONSTANT_ENCAPSED_STRING","'progressdetail'",1692],"]",["T_WHITESPACE"," ",1692],"=",["T_WHITESPACE"," ",1692],["T_VARIABLE","$packageProgress",1692],";",["T_WHITESPACE","\n                    ",1692],"}",["T_WHITESPACE","\n                    ",1693],["T_VARIABLE","$resultArr",1694],"[",["T_VARIABLE","$trackNum",1694],"]",["T_WHITESPACE"," ",1694],"=",["T_WHITESPACE"," ",1694],["T_VARIABLE","$awbinfoData",1694],";",["T_WHITESPACE","\n                ",1694],"}",["T_WHITESPACE","\n            ",1695],"}",["T_WHITESPACE","\n        ",1696],"}",["T_WHITESPACE","\n\n        ",1697],["T_VARIABLE","$result",1699],["T_WHITESPACE"," ",1699],"=",["T_WHITESPACE"," ",1699],["T_STRING","Mage",1699],["T_DOUBLE_COLON","::",1699],["T_STRING","getModel",1699],"(",["T_CONSTANT_ENCAPSED_STRING","'shipping\/tracking_result'",1699],")",";",["T_WHITESPACE","\n\n        ",1699],["T_IF","if",1701],["T_WHITESPACE"," ",1701],"(","!",["T_EMPTY","empty",1701],"(",["T_VARIABLE","$resultArr",1701],")",")",["T_WHITESPACE"," ",1701],"{",["T_WHITESPACE","\n            ",1701],["T_FOREACH","foreach",1702],["T_WHITESPACE"," ",1702],"(",["T_VARIABLE","$resultArr",1702],["T_WHITESPACE"," ",1702],["T_AS","as",1702],["T_WHITESPACE"," ",1702],["T_VARIABLE","$trackNum",1702],["T_WHITESPACE"," ",1702],["T_DOUBLE_ARROW","=>",1702],["T_WHITESPACE"," ",1702],["T_VARIABLE","$data",1702],")",["T_WHITESPACE"," ",1702],"{",["T_WHITESPACE","\n                ",1702],["T_VARIABLE","$tracking",1703],["T_WHITESPACE"," ",1703],"=",["T_WHITESPACE"," ",1703],["T_STRING","Mage",1703],["T_DOUBLE_COLON","::",1703],["T_STRING","getModel",1703],"(",["T_CONSTANT_ENCAPSED_STRING","'shipping\/tracking_result_status'",1703],")",";",["T_WHITESPACE","\n                ",1703],["T_VARIABLE","$tracking",1704],["T_OBJECT_OPERATOR","->",1704],["T_STRING","setCarrier",1704],"(",["T_VARIABLE","$this",1704],["T_OBJECT_OPERATOR","->",1704],["T_STRING","_code",1704],")",";",["T_WHITESPACE","\n                ",1704],["T_VARIABLE","$tracking",1705],["T_OBJECT_OPERATOR","->",1705],["T_STRING","setCarrierTitle",1705],"(",["T_VARIABLE","$this",1705],["T_OBJECT_OPERATOR","->",1705],["T_STRING","getConfigData",1705],"(",["T_CONSTANT_ENCAPSED_STRING","'title'",1705],")",")",";",["T_WHITESPACE","\n                ",1705],["T_VARIABLE","$tracking",1706],["T_OBJECT_OPERATOR","->",1706],["T_STRING","setTracking",1706],"(",["T_VARIABLE","$trackNum",1706],")",";",["T_WHITESPACE","\n                ",1706],["T_VARIABLE","$tracking",1707],["T_OBJECT_OPERATOR","->",1707],["T_STRING","addData",1707],"(",["T_VARIABLE","$data",1707],")",";",["T_WHITESPACE","\n                ",1707],["T_VARIABLE","$result",1708],["T_OBJECT_OPERATOR","->",1708],["T_STRING","append",1708],"(",["T_VARIABLE","$tracking",1708],")",";",["T_WHITESPACE","\n            ",1708],"}",["T_WHITESPACE","\n        ",1709],"}",["T_WHITESPACE","\n\n        ",1710],["T_IF","if",1712],["T_WHITESPACE"," ",1712],"(","!",["T_EMPTY","empty",1712],"(",["T_VARIABLE","$this",1712],["T_OBJECT_OPERATOR","->",1712],["T_STRING","_errors",1712],")",["T_WHITESPACE"," ",1712],["T_BOOLEAN_OR","||",1712],["T_WHITESPACE"," ",1712],["T_EMPTY","empty",1712],"(",["T_VARIABLE","$resultArr",1712],")",")",["T_WHITESPACE"," ",1712],"{",["T_WHITESPACE","\n            ",1712],["T_VARIABLE","$resultArr",1713],["T_WHITESPACE"," ",1713],"=",["T_WHITESPACE"," ",1713],"!",["T_EMPTY","empty",1713],"(",["T_VARIABLE","$this",1713],["T_OBJECT_OPERATOR","->",1713],["T_STRING","_errors",1713],")",["T_WHITESPACE"," ",1713],"?",["T_WHITESPACE"," ",1713],["T_VARIABLE","$this",1713],["T_OBJECT_OPERATOR","->",1713],["T_STRING","_errors",1713],["T_WHITESPACE"," ",1713],":",["T_WHITESPACE"," ",1713],["T_VARIABLE","$trackings",1713],";",["T_WHITESPACE","\n            ",1713],["T_FOREACH","foreach",1714],["T_WHITESPACE"," ",1714],"(",["T_VARIABLE","$resultArr",1714],["T_WHITESPACE"," ",1714],["T_AS","as",1714],["T_WHITESPACE"," ",1714],["T_VARIABLE","$trackNum",1714],["T_WHITESPACE"," ",1714],["T_DOUBLE_ARROW","=>",1714],["T_WHITESPACE"," ",1714],["T_VARIABLE","$err",1714],")",["T_WHITESPACE"," ",1714],"{",["T_WHITESPACE","\n                ",1714],["T_VARIABLE","$error",1715],["T_WHITESPACE"," ",1715],"=",["T_WHITESPACE"," ",1715],["T_STRING","Mage",1715],["T_DOUBLE_COLON","::",1715],["T_STRING","getModel",1715],"(",["T_CONSTANT_ENCAPSED_STRING","'shipping\/tracking_result_error'",1715],")",";",["T_WHITESPACE","\n                ",1715],["T_VARIABLE","$error",1716],["T_OBJECT_OPERATOR","->",1716],["T_STRING","setCarrier",1716],"(",["T_VARIABLE","$this",1716],["T_OBJECT_OPERATOR","->",1716],["T_STRING","_code",1716],")",";",["T_WHITESPACE","\n                ",1716],["T_VARIABLE","$error",1717],["T_OBJECT_OPERATOR","->",1717],["T_STRING","setCarrierTitle",1717],"(",["T_VARIABLE","$this",1717],["T_OBJECT_OPERATOR","->",1717],["T_STRING","getConfigData",1717],"(",["T_CONSTANT_ENCAPSED_STRING","'title'",1717],")",")",";",["T_WHITESPACE","\n                ",1717],["T_VARIABLE","$error",1718],["T_OBJECT_OPERATOR","->",1718],["T_STRING","setTracking",1718],"(","!",["T_EMPTY","empty",1718],"(",["T_VARIABLE","$this",1718],["T_OBJECT_OPERATOR","->",1718],["T_STRING","_errors",1718],")",["T_WHITESPACE"," ",1718],"?",["T_WHITESPACE"," ",1718],["T_VARIABLE","$trackNum",1718],["T_WHITESPACE"," ",1718],":",["T_WHITESPACE"," ",1718],["T_VARIABLE","$err",1718],")",";",["T_WHITESPACE","\n                ",1718],["T_VARIABLE","$error",1719],["T_OBJECT_OPERATOR","->",1719],["T_STRING","setErrorMessage",1719],"(","!",["T_EMPTY","empty",1719],"(",["T_VARIABLE","$this",1719],["T_OBJECT_OPERATOR","->",1719],["T_STRING","_errors",1719],")",["T_WHITESPACE"," ",1719],"?",["T_WHITESPACE"," ",1719],["T_VARIABLE","$err",1719],["T_WHITESPACE"," ",1719],":",["T_WHITESPACE"," ",1719],["T_VARIABLE","$errorTitle",1719],")",";",["T_WHITESPACE","\n                ",1719],["T_VARIABLE","$result",1720],["T_OBJECT_OPERATOR","->",1720],["T_STRING","append",1720],"(",["T_VARIABLE","$error",1720],")",";",["T_WHITESPACE","\n            ",1720],"}",["T_WHITESPACE","\n        ",1721],"}",["T_WHITESPACE","\n\n        ",1722],["T_VARIABLE","$this",1724],["T_OBJECT_OPERATOR","->",1724],["T_STRING","_result",1724],["T_WHITESPACE"," ",1724],"=",["T_WHITESPACE"," ",1724],["T_VARIABLE","$result",1724],";",["T_WHITESPACE","\n    ",1724],"}",["T_WHITESPACE","\n\n    ",1725],["T_DOC_COMMENT","\/**\n     * Get final price for shipping method with handling fee per package\n     *\n     * @param float $cost\n     * @param string $handlingType\n     * @param float $handlingFee\n     * @return float\n     *\/",1727],["T_WHITESPACE","\n    ",1734],["T_PROTECTED","protected",1735],["T_WHITESPACE"," ",1735],["T_FUNCTION","function",1735],["T_WHITESPACE"," ",1735],["T_STRING","_getPerpackagePrice",1735],"(",["T_VARIABLE","$cost",1735],",",["T_WHITESPACE"," ",1735],["T_VARIABLE","$handlingType",1735],",",["T_WHITESPACE"," ",1735],["T_VARIABLE","$handlingFee",1735],")",["T_WHITESPACE","\n    ",1735],"{",["T_WHITESPACE","\n        ",1736],["T_IF","if",1737],["T_WHITESPACE"," ",1737],"(",["T_VARIABLE","$handlingType",1737],["T_WHITESPACE"," ",1737],["T_IS_EQUAL","==",1737],["T_WHITESPACE"," ",1737],["T_STRING","Mage_Shipping_Model_Carrier_Abstract",1737],["T_DOUBLE_COLON","::",1737],["T_STRING","HANDLING_TYPE_PERCENT",1737],")",["T_WHITESPACE"," ",1737],"{",["T_WHITESPACE","\n            ",1737],["T_RETURN","return",1738],["T_WHITESPACE"," ",1738],["T_VARIABLE","$cost",1738],["T_WHITESPACE"," ",1738],"+",["T_WHITESPACE"," ",1738],"(",["T_VARIABLE","$cost",1738],["T_WHITESPACE"," ",1738],"*",["T_WHITESPACE"," ",1738],["T_VARIABLE","$this",1738],["T_OBJECT_OPERATOR","->",1738],["T_STRING","_numBoxes",1738],["T_WHITESPACE"," ",1738],"*",["T_WHITESPACE"," ",1738],["T_VARIABLE","$handlingFee",1738],["T_WHITESPACE"," ",1738],"\/",["T_WHITESPACE"," ",1738],["T_LNUMBER","100",1738],")",";",["T_WHITESPACE","\n        ",1738],"}",["T_WHITESPACE","\n\n        ",1739],["T_RETURN","return",1741],["T_WHITESPACE"," ",1741],["T_VARIABLE","$cost",1741],["T_WHITESPACE"," ",1741],"+",["T_WHITESPACE"," ",1741],["T_VARIABLE","$this",1741],["T_OBJECT_OPERATOR","->",1741],["T_STRING","_numBoxes",1741],["T_WHITESPACE"," ",1741],"*",["T_WHITESPACE"," ",1741],["T_VARIABLE","$handlingFee",1741],";",["T_WHITESPACE","\n    ",1741],"}",["T_WHITESPACE","\n\n    ",1742],["T_DOC_COMMENT","\/**\n     * Do request to shipment\n     *\n     * @param Mage_Shipping_Model_Shipment_Request $request\n     * @return Varien_Object\n     *\/",1744],["T_WHITESPACE","\n    ",1749],["T_PUBLIC","public",1750],["T_WHITESPACE"," ",1750],["T_FUNCTION","function",1750],["T_WHITESPACE"," ",1750],["T_STRING","requestToShipment",1750],"(",["T_STRING","Mage_Shipping_Model_Shipment_Request",1750],["T_WHITESPACE"," ",1750],["T_VARIABLE","$request",1750],")",["T_WHITESPACE","\n    ",1750],"{",["T_WHITESPACE","\n        ",1751],["T_VARIABLE","$packages",1752],["T_WHITESPACE"," ",1752],"=",["T_WHITESPACE"," ",1752],["T_VARIABLE","$request",1752],["T_OBJECT_OPERATOR","->",1752],["T_STRING","getPackages",1752],"(",")",";",["T_WHITESPACE","\n        ",1752],["T_IF","if",1753],["T_WHITESPACE"," ",1753],"(","!",["T_STRING","is_array",1753],"(",["T_VARIABLE","$packages",1753],")",["T_WHITESPACE"," ",1753],["T_BOOLEAN_OR","||",1753],["T_WHITESPACE"," ",1753],"!",["T_VARIABLE","$packages",1753],")",["T_WHITESPACE"," ",1753],"{",["T_WHITESPACE","\n            ",1753],["T_STRING","Mage",1754],["T_DOUBLE_COLON","::",1754],["T_STRING","throwException",1754],"(",["T_STRING","Mage",1754],["T_DOUBLE_COLON","::",1754],["T_STRING","helper",1754],"(",["T_CONSTANT_ENCAPSED_STRING","'usa'",1754],")",["T_OBJECT_OPERATOR","->",1754],["T_STRING","__",1754],"(",["T_CONSTANT_ENCAPSED_STRING","'No packages for request'",1754],")",")",";",["T_WHITESPACE","\n        ",1754],"}",["T_WHITESPACE","\n        ",1755],["T_VARIABLE","$result",1756],["T_WHITESPACE"," ",1756],"=",["T_WHITESPACE"," ",1756],["T_VARIABLE","$this",1756],["T_OBJECT_OPERATOR","->",1756],["T_STRING","_doShipmentRequest",1756],"(",["T_VARIABLE","$request",1756],")",";",["T_WHITESPACE","\n\n        ",1756],["T_VARIABLE","$response",1758],["T_WHITESPACE"," ",1758],"=",["T_WHITESPACE"," ",1758],["T_NEW","new",1758],["T_WHITESPACE"," ",1758],["T_STRING","Varien_Object",1758],"(",["T_ARRAY","array",1758],"(",["T_WHITESPACE","\n            ",1758],["T_CONSTANT_ENCAPSED_STRING","'info'",1759],["T_WHITESPACE"," ",1759],["T_DOUBLE_ARROW","=>",1759],["T_WHITESPACE"," ",1759],["T_ARRAY","array",1759],"(",["T_ARRAY","array",1759],"(",["T_WHITESPACE","\n                ",1759],["T_CONSTANT_ENCAPSED_STRING","'tracking_number'",1760],["T_WHITESPACE"," ",1760],["T_DOUBLE_ARROW","=>",1760],["T_WHITESPACE"," ",1760],["T_VARIABLE","$result",1760],["T_OBJECT_OPERATOR","->",1760],["T_STRING","getTrackingNumber",1760],"(",")",",",["T_WHITESPACE","\n                ",1760],["T_CONSTANT_ENCAPSED_STRING","'label_content'",1761],["T_WHITESPACE","   ",1761],["T_DOUBLE_ARROW","=>",1761],["T_WHITESPACE"," ",1761],["T_VARIABLE","$result",1761],["T_OBJECT_OPERATOR","->",1761],["T_STRING","getShippingLabelContent",1761],"(",")",["T_WHITESPACE","\n            ",1761],")",")",["T_WHITESPACE","\n        ",1762],")",")",";",["T_WHITESPACE","\n\n        ",1763],["T_VARIABLE","$request",1765],["T_OBJECT_OPERATOR","->",1765],["T_STRING","setMasterTrackingId",1765],"(",["T_VARIABLE","$result",1765],["T_OBJECT_OPERATOR","->",1765],["T_STRING","getTrackingNumber",1765],"(",")",")",";",["T_WHITESPACE","\n\n        ",1765],["T_RETURN","return",1767],["T_WHITESPACE"," ",1767],["T_VARIABLE","$response",1767],";",["T_WHITESPACE","\n    ",1767],"}",["T_WHITESPACE","\n\n    ",1768],["T_DOC_COMMENT","\/**\n     * Check if shipping is domestic\n     *\n     * @param string $origCountryCode\n     * @param string $destCountryCode\n     * @return bool\n     *\/",1770],["T_WHITESPACE","\n    ",1776],["T_PROTECTED","protected",1777],["T_WHITESPACE"," ",1777],["T_FUNCTION","function",1777],["T_WHITESPACE"," ",1777],["T_STRING","_checkDomesticStatus",1777],"(",["T_VARIABLE","$origCountryCode",1777],",",["T_WHITESPACE"," ",1777],["T_VARIABLE","$destCountryCode",1777],")",["T_WHITESPACE","\n    ",1777],"{",["T_WHITESPACE","\n        ",1778],["T_VARIABLE","$this",1779],["T_OBJECT_OPERATOR","->",1779],["T_STRING","_isDomestic",1779],["T_WHITESPACE"," ",1779],"=",["T_WHITESPACE"," ",1779],["T_STRING","false",1779],";",["T_WHITESPACE","\n\n        ",1779],["T_VARIABLE","$origCountry",1781],["T_WHITESPACE"," ",1781],"=",["T_WHITESPACE"," ",1781],["T_STRING_CAST","(string)",1781],["T_VARIABLE","$this",1781],["T_OBJECT_OPERATOR","->",1781],["T_STRING","getCountryParams",1781],"(",["T_VARIABLE","$origCountryCode",1781],")",["T_OBJECT_OPERATOR","->",1781],["T_STRING","name",1781],";",["T_WHITESPACE","\n        ",1781],["T_VARIABLE","$destCountry",1782],["T_WHITESPACE"," ",1782],"=",["T_WHITESPACE"," ",1782],["T_STRING_CAST","(string)",1782],["T_VARIABLE","$this",1782],["T_OBJECT_OPERATOR","->",1782],["T_STRING","getCountryParams",1782],"(",["T_VARIABLE","$destCountryCode",1782],")",["T_OBJECT_OPERATOR","->",1782],["T_STRING","name",1782],";",["T_WHITESPACE","\n        ",1782],["T_VARIABLE","$isDomestic",1783],["T_WHITESPACE"," ",1783],"=",["T_WHITESPACE"," ",1783],["T_STRING_CAST","(string)",1783],["T_VARIABLE","$this",1783],["T_OBJECT_OPERATOR","->",1783],["T_STRING","getCountryParams",1783],"(",["T_VARIABLE","$destCountryCode",1783],")",["T_OBJECT_OPERATOR","->",1783],["T_STRING","domestic",1783],";",["T_WHITESPACE","\n\n        ",1783],["T_IF","if",1785],["T_WHITESPACE"," ",1785],"(",["T_VARIABLE","$origCountry",1785],["T_WHITESPACE"," ",1785],["T_IS_EQUAL","==",1785],["T_WHITESPACE"," ",1785],["T_VARIABLE","$destCountry",1785],["T_WHITESPACE"," ",1785],["T_BOOLEAN_AND","&&",1785],["T_WHITESPACE"," ",1785],["T_VARIABLE","$isDomestic",1785],")",["T_WHITESPACE"," ",1785],"{",["T_WHITESPACE","\n            ",1785],["T_VARIABLE","$this",1786],["T_OBJECT_OPERATOR","->",1786],["T_STRING","_isDomestic",1786],["T_WHITESPACE"," ",1786],"=",["T_WHITESPACE"," ",1786],["T_STRING","true",1786],";",["T_WHITESPACE","\n        ",1786],"}",["T_WHITESPACE","\n\n        ",1787],["T_RETURN","return",1789],["T_WHITESPACE"," ",1789],["T_VARIABLE","$this",1789],["T_OBJECT_OPERATOR","->",1789],["T_STRING","_isDomestic",1789],";",["T_WHITESPACE","\n    ",1789],"}",["T_WHITESPACE","\n",1790],"}",["T_WHITESPACE","\n",1791]]
[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Magento\n *\n * NOTICE OF LICENSE\n *\n * This source file is subject to the Open Software License (OSL 3.0)\n * that is bundled with this package in the file LICENSE.txt.\n * It is also available through the world-wide-web at this URL:\n * http:\/\/opensource.org\/licenses\/osl-3.0.php\n * If you did not receive a copy of the license and are unable to\n * obtain it through the world-wide-web, please send an email\n * to license@magento.com so we can send you a copy immediately.\n *\n * DISCLAIMER\n *\n * Do not edit or add to this file if you wish to upgrade Magento to newer\n * versions in the future. If you wish to customize Magento for your\n * needs please refer to http:\/\/www.magento.com for more information.\n *\n * @category    Mage\n * @package     Mage_ImportExport\n * @copyright  Copyright (c) 2006-2016 X.commerce, Inc. and affiliates (http:\/\/www.magento.com)\n * @license    http:\/\/opensource.org\/licenses\/osl-3.0.php  Open Software License (OSL 3.0)\n *\/",2],["T_WHITESPACE","\n\n",25],["T_DOC_COMMENT","\/**\n * Import controller\n *\n * @category    Mage\n * @package     Mage_ImportExport\n * @author      Magento Core Team <core@magentocommerce.com>\n *\/",27],["T_WHITESPACE","\n",33],["T_CLASS","class",34],["T_WHITESPACE"," ",34],["T_STRING","Mage_ImportExport_Adminhtml_ImportController",34],["T_WHITESPACE"," ",34],["T_EXTENDS","extends",34],["T_WHITESPACE"," ",34],["T_STRING","Mage_Adminhtml_Controller_Action",34],["T_WHITESPACE","\n",34],"{",["T_WHITESPACE","\n    ",35],["T_DOC_COMMENT","\/**\n     * Custom constructor.\n     *\n     * @return void\n     *\/",36],["T_WHITESPACE","\n    ",40],["T_PROTECTED","protected",41],["T_WHITESPACE"," ",41],["T_FUNCTION","function",41],["T_WHITESPACE"," ",41],["T_STRING","_construct",41],"(",")",["T_WHITESPACE","\n    ",41],"{",["T_WHITESPACE","\n        ",42],["T_COMMENT","\/\/ Define module dependent translate\n",43],["T_WHITESPACE","        ",44],["T_VARIABLE","$this",44],["T_OBJECT_OPERATOR","->",44],["T_STRING","setUsedModuleName",44],"(",["T_CONSTANT_ENCAPSED_STRING","'Mage_ImportExport'",44],")",";",["T_WHITESPACE","\n    ",44],"}",["T_WHITESPACE","\n\n    ",45],["T_DOC_COMMENT","\/**\n     * Initialize layout.\n     *\n     * @return Mage_ImportExport_Adminhtml_ImportController\n     *\/",47],["T_WHITESPACE","\n    ",51],["T_PROTECTED","protected",52],["T_WHITESPACE"," ",52],["T_FUNCTION","function",52],["T_WHITESPACE"," ",52],["T_STRING","_initAction",52],"(",")",["T_WHITESPACE","\n    ",52],"{",["T_WHITESPACE","\n        ",53],["T_VARIABLE","$this",54],["T_OBJECT_OPERATOR","->",54],["T_STRING","_title",54],"(",["T_VARIABLE","$this",54],["T_OBJECT_OPERATOR","->",54],["T_STRING","__",54],"(",["T_CONSTANT_ENCAPSED_STRING","'Import\/Export'",54],")",")",["T_WHITESPACE","\n            ",54],["T_OBJECT_OPERATOR","->",55],["T_STRING","loadLayout",55],"(",")",["T_WHITESPACE","\n            ",55],["T_OBJECT_OPERATOR","->",56],["T_STRING","_setActiveMenu",56],"(",["T_CONSTANT_ENCAPSED_STRING","'system\/importexport'",56],")",";",["T_WHITESPACE","\n\n        ",56],["T_RETURN","return",58],["T_WHITESPACE"," ",58],["T_VARIABLE","$this",58],";",["T_WHITESPACE","\n    ",58],"}",["T_WHITESPACE","\n\n    ",59],["T_DOC_COMMENT","\/**\n     * Check access (in the ACL) for current user.\n     *\n     * @return bool\n     *\/",61],["T_WHITESPACE","\n    ",65],["T_PROTECTED","protected",66],["T_WHITESPACE"," ",66],["T_FUNCTION","function",66],["T_WHITESPACE"," ",66],["T_STRING","_isAllowed",66],"(",")",["T_WHITESPACE","\n    ",66],"{",["T_WHITESPACE","\n        ",67],["T_RETURN","return",68],["T_WHITESPACE"," ",68],["T_STRING","Mage",68],["T_DOUBLE_COLON","::",68],["T_STRING","getSingleton",68],"(",["T_CONSTANT_ENCAPSED_STRING","'admin\/session'",68],")",["T_OBJECT_OPERATOR","->",68],["T_STRING","isAllowed",68],"(",["T_CONSTANT_ENCAPSED_STRING","'system\/convert\/import'",68],")",";",["T_WHITESPACE","\n    ",68],"}",["T_WHITESPACE","\n\n    ",69],["T_DOC_COMMENT","\/**\n     * Index action.\n     *\n     * @return void\n     *\/",71],["T_WHITESPACE","\n    ",75],["T_PUBLIC","public",76],["T_WHITESPACE"," ",76],["T_FUNCTION","function",76],["T_WHITESPACE"," ",76],["T_STRING","indexAction",76],"(",")",["T_WHITESPACE","\n    ",76],"{",["T_WHITESPACE","\n        ",77],["T_VARIABLE","$maxUploadSize",78],["T_WHITESPACE"," ",78],"=",["T_WHITESPACE"," ",78],["T_STRING","Mage",78],["T_DOUBLE_COLON","::",78],["T_STRING","helper",78],"(",["T_CONSTANT_ENCAPSED_STRING","'importexport'",78],")",["T_OBJECT_OPERATOR","->",78],["T_STRING","getMaxUploadSize",78],"(",")",";",["T_WHITESPACE","\n        ",78],["T_VARIABLE","$this",79],["T_OBJECT_OPERATOR","->",79],["T_STRING","_getSession",79],"(",")",["T_OBJECT_OPERATOR","->",79],["T_STRING","addNotice",79],"(",["T_WHITESPACE","\n            ",79],["T_VARIABLE","$this",80],["T_OBJECT_OPERATOR","->",80],["T_STRING","__",80],"(",["T_CONSTANT_ENCAPSED_STRING","'Total size of uploadable files must not exceed %s'",80],",",["T_WHITESPACE"," ",80],["T_VARIABLE","$maxUploadSize",80],")",["T_WHITESPACE","\n        ",80],")",";",["T_WHITESPACE","\n        ",81],["T_VARIABLE","$this",82],["T_OBJECT_OPERATOR","->",82],["T_STRING","_initAction",82],"(",")",["T_WHITESPACE","\n            ",82],["T_OBJECT_OPERATOR","->",83],["T_STRING","_title",83],"(",["T_VARIABLE","$this",83],["T_OBJECT_OPERATOR","->",83],["T_STRING","__",83],"(",["T_CONSTANT_ENCAPSED_STRING","'Import'",83],")",")",["T_WHITESPACE","\n            ",83],["T_OBJECT_OPERATOR","->",84],["T_STRING","_addBreadcrumb",84],"(",["T_VARIABLE","$this",84],["T_OBJECT_OPERATOR","->",84],["T_STRING","__",84],"(",["T_CONSTANT_ENCAPSED_STRING","'Import'",84],")",",",["T_WHITESPACE"," ",84],["T_VARIABLE","$this",84],["T_OBJECT_OPERATOR","->",84],["T_STRING","__",84],"(",["T_CONSTANT_ENCAPSED_STRING","'Import'",84],")",")",";",["T_WHITESPACE","\n\n        ",84],["T_VARIABLE","$this",86],["T_OBJECT_OPERATOR","->",86],["T_STRING","renderLayout",86],"(",")",";",["T_WHITESPACE","\n    ",86],"}",["T_WHITESPACE","\n\n    ",87],["T_DOC_COMMENT","\/**\n     * Start import process action.\n     *\n     * @return void\n     *\/",89],["T_WHITESPACE","\n    ",93],["T_PUBLIC","public",94],["T_WHITESPACE"," ",94],["T_FUNCTION","function",94],["T_WHITESPACE"," ",94],["T_STRING","startAction",94],"(",")",["T_WHITESPACE","\n    ",94],"{",["T_WHITESPACE","\n        ",95],["T_VARIABLE","$data",96],["T_WHITESPACE"," ",96],"=",["T_WHITESPACE"," ",96],["T_VARIABLE","$this",96],["T_OBJECT_OPERATOR","->",96],["T_STRING","getRequest",96],"(",")",["T_OBJECT_OPERATOR","->",96],["T_STRING","getPost",96],"(",")",";",["T_WHITESPACE","\n        ",96],["T_IF","if",97],["T_WHITESPACE"," ",97],"(",["T_VARIABLE","$data",97],")",["T_WHITESPACE"," ",97],"{",["T_WHITESPACE","\n            ",97],["T_VARIABLE","$this",98],["T_OBJECT_OPERATOR","->",98],["T_STRING","loadLayout",98],"(",["T_STRING","false",98],")",";",["T_WHITESPACE","\n\n            ",98],["T_DOC_COMMENT","\/** @var $resultBlock Mage_ImportExport_Block_Adminhtml_Import_Frame_Result *\/",100],["T_WHITESPACE","\n            ",100],["T_VARIABLE","$resultBlock",101],["T_WHITESPACE"," ",101],"=",["T_WHITESPACE"," ",101],["T_VARIABLE","$this",101],["T_OBJECT_OPERATOR","->",101],["T_STRING","getLayout",101],"(",")",["T_OBJECT_OPERATOR","->",101],["T_STRING","getBlock",101],"(",["T_CONSTANT_ENCAPSED_STRING","'import.frame.result'",101],")",";",["T_WHITESPACE","\n            ",101],["T_DOC_COMMENT","\/** @var $importModel Mage_ImportExport_Model_Import *\/",102],["T_WHITESPACE","\n            ",102],["T_VARIABLE","$importModel",103],["T_WHITESPACE"," ",103],"=",["T_WHITESPACE"," ",103],["T_STRING","Mage",103],["T_DOUBLE_COLON","::",103],["T_STRING","getModel",103],"(",["T_CONSTANT_ENCAPSED_STRING","'importexport\/import'",103],")",";",["T_WHITESPACE","\n\n            ",103],["T_TRY","try",105],["T_WHITESPACE"," ",105],"{",["T_WHITESPACE","\n                ",105],["T_VARIABLE","$importModel",106],["T_OBJECT_OPERATOR","->",106],["T_STRING","importSource",106],"(",")",";",["T_WHITESPACE","\n                ",106],["T_VARIABLE","$importModel",107],["T_OBJECT_OPERATOR","->",107],["T_STRING","invalidateIndex",107],"(",")",";",["T_WHITESPACE","\n                ",107],["T_VARIABLE","$resultBlock",108],["T_OBJECT_OPERATOR","->",108],["T_STRING","addAction",108],"(",["T_CONSTANT_ENCAPSED_STRING","'show'",108],",",["T_WHITESPACE"," ",108],["T_CONSTANT_ENCAPSED_STRING","'import_validation_container'",108],")",["T_WHITESPACE","\n                    ",108],["T_OBJECT_OPERATOR","->",109],["T_STRING","addAction",109],"(",["T_CONSTANT_ENCAPSED_STRING","'innerHTML'",109],",",["T_WHITESPACE"," ",109],["T_CONSTANT_ENCAPSED_STRING","'import_validation_container_header'",109],",",["T_WHITESPACE"," ",109],["T_VARIABLE","$this",109],["T_OBJECT_OPERATOR","->",109],["T_STRING","__",109],"(",["T_CONSTANT_ENCAPSED_STRING","'Status'",109],")",")",";",["T_WHITESPACE","\n            ",109],"}",["T_WHITESPACE"," ",110],["T_CATCH","catch",110],["T_WHITESPACE"," ",110],"(",["T_STRING","Exception",110],["T_WHITESPACE"," ",110],["T_VARIABLE","$e",110],")",["T_WHITESPACE"," ",110],"{",["T_WHITESPACE","\n                ",110],["T_VARIABLE","$resultBlock",111],["T_OBJECT_OPERATOR","->",111],["T_STRING","addError",111],"(",["T_VARIABLE","$e",111],["T_OBJECT_OPERATOR","->",111],["T_STRING","getMessage",111],"(",")",")",";",["T_WHITESPACE","\n                ",111],["T_VARIABLE","$this",112],["T_OBJECT_OPERATOR","->",112],["T_STRING","renderLayout",112],"(",")",";",["T_WHITESPACE","\n                ",112],["T_RETURN","return",113],";",["T_WHITESPACE","\n            ",113],"}",["T_WHITESPACE","\n            ",114],["T_VARIABLE","$resultBlock",115],["T_OBJECT_OPERATOR","->",115],["T_STRING","addAction",115],"(",["T_CONSTANT_ENCAPSED_STRING","'hide'",115],",",["T_WHITESPACE"," ",115],["T_ARRAY","array",115],"(",["T_CONSTANT_ENCAPSED_STRING","'edit_form'",115],",",["T_WHITESPACE"," ",115],["T_CONSTANT_ENCAPSED_STRING","'upload_button'",115],",",["T_WHITESPACE"," ",115],["T_CONSTANT_ENCAPSED_STRING","'messages'",115],")",")",["T_WHITESPACE","\n                ",115],["T_OBJECT_OPERATOR","->",116],["T_STRING","addSuccess",116],"(",["T_VARIABLE","$this",116],["T_OBJECT_OPERATOR","->",116],["T_STRING","__",116],"(",["T_CONSTANT_ENCAPSED_STRING","'Import successfully done.'",116],")",")",";",["T_WHITESPACE","\n            ",116],["T_VARIABLE","$this",117],["T_OBJECT_OPERATOR","->",117],["T_STRING","renderLayout",117],"(",")",";",["T_WHITESPACE","\n        ",117],"}",["T_WHITESPACE"," ",118],["T_ELSE","else",118],["T_WHITESPACE"," ",118],"{",["T_WHITESPACE","\n            ",118],["T_VARIABLE","$this",119],["T_OBJECT_OPERATOR","->",119],["T_STRING","_redirect",119],"(",["T_CONSTANT_ENCAPSED_STRING","'*\/*\/index'",119],")",";",["T_WHITESPACE","\n        ",119],"}",["T_WHITESPACE","\n    ",120],"}",["T_WHITESPACE","\n\n    ",121],["T_DOC_COMMENT","\/**\n     * Validate uploaded files action.\n     *\n     * @return void\n     *\/",123],["T_WHITESPACE","\n    ",127],["T_PUBLIC","public",128],["T_WHITESPACE"," ",128],["T_FUNCTION","function",128],["T_WHITESPACE"," ",128],["T_STRING","validateAction",128],"(",")",["T_WHITESPACE","\n    ",128],"{",["T_WHITESPACE","\n        ",129],["T_VARIABLE","$data",130],["T_WHITESPACE"," ",130],"=",["T_WHITESPACE"," ",130],["T_VARIABLE","$this",130],["T_OBJECT_OPERATOR","->",130],["T_STRING","getRequest",130],"(",")",["T_OBJECT_OPERATOR","->",130],["T_STRING","getPost",130],"(",")",";",["T_WHITESPACE","\n        ",130],["T_IF","if",131],["T_WHITESPACE"," ",131],"(",["T_VARIABLE","$data",131],")",["T_WHITESPACE"," ",131],"{",["T_WHITESPACE","\n            ",131],["T_VARIABLE","$this",132],["T_OBJECT_OPERATOR","->",132],["T_STRING","loadLayout",132],"(",["T_STRING","false",132],")",";",["T_WHITESPACE","\n            ",132],["T_DOC_COMMENT","\/** @var $resultBlock Mage_ImportExport_Block_Adminhtml_Import_Frame_Result *\/",133],["T_WHITESPACE","\n            ",133],["T_VARIABLE","$resultBlock",134],["T_WHITESPACE"," ",134],"=",["T_WHITESPACE"," ",134],["T_VARIABLE","$this",134],["T_OBJECT_OPERATOR","->",134],["T_STRING","getLayout",134],"(",")",["T_OBJECT_OPERATOR","->",134],["T_STRING","getBlock",134],"(",["T_CONSTANT_ENCAPSED_STRING","'import.frame.result'",134],")",";",["T_WHITESPACE","\n            ",134],["T_COMMENT","\/\/ common actions\n",135],["T_WHITESPACE","            ",136],["T_VARIABLE","$resultBlock",136],["T_OBJECT_OPERATOR","->",136],["T_STRING","addAction",136],"(",["T_CONSTANT_ENCAPSED_STRING","'show'",136],",",["T_WHITESPACE"," ",136],["T_CONSTANT_ENCAPSED_STRING","'import_validation_container'",136],")",["T_WHITESPACE","\n                ",136],["T_OBJECT_OPERATOR","->",137],["T_STRING","addAction",137],"(",["T_CONSTANT_ENCAPSED_STRING","'clear'",137],",",["T_WHITESPACE"," ",137],["T_ARRAY","array",137],"(",["T_WHITESPACE","\n                    ",137],["T_STRING","Mage_ImportExport_Model_Import",138],["T_DOUBLE_COLON","::",138],["T_STRING","FIELD_NAME_SOURCE_FILE",138],",",["T_WHITESPACE","\n                    ",138],["T_STRING","Mage_ImportExport_Model_Import",139],["T_DOUBLE_COLON","::",139],["T_STRING","FIELD_NAME_IMG_ARCHIVE_FILE",139],")",["T_WHITESPACE","\n                ",139],")",";",["T_WHITESPACE","\n\n            ",140],["T_TRY","try",142],["T_WHITESPACE"," ",142],"{",["T_WHITESPACE","\n                ",142],["T_DOC_COMMENT","\/** @var $import Mage_ImportExport_Model_Import *\/",143],["T_WHITESPACE","\n                ",143],["T_VARIABLE","$import",144],["T_WHITESPACE"," ",144],"=",["T_WHITESPACE"," ",144],["T_STRING","Mage",144],["T_DOUBLE_COLON","::",144],["T_STRING","getModel",144],"(",["T_CONSTANT_ENCAPSED_STRING","'importexport\/import'",144],")",";",["T_WHITESPACE","\n                ",144],["T_VARIABLE","$validationResult",145],["T_WHITESPACE"," ",145],"=",["T_WHITESPACE"," ",145],["T_VARIABLE","$import",145],["T_OBJECT_OPERATOR","->",145],["T_STRING","validateSource",145],"(",["T_VARIABLE","$import",145],["T_OBJECT_OPERATOR","->",145],["T_STRING","setData",145],"(",["T_VARIABLE","$data",145],")",["T_OBJECT_OPERATOR","->",145],["T_STRING","uploadSource",145],"(",")",")",";",["T_WHITESPACE","\n\n                ",145],["T_IF","if",147],["T_WHITESPACE"," ",147],"(","!",["T_VARIABLE","$import",147],["T_OBJECT_OPERATOR","->",147],["T_STRING","getProcessedRowsCount",147],"(",")",")",["T_WHITESPACE"," ",147],"{",["T_WHITESPACE","\n                    ",147],["T_VARIABLE","$resultBlock",148],["T_OBJECT_OPERATOR","->",148],["T_STRING","addError",148],"(",["T_VARIABLE","$this",148],["T_OBJECT_OPERATOR","->",148],["T_STRING","__",148],"(",["T_CONSTANT_ENCAPSED_STRING","'File does not contain data. Please upload another one'",148],")",")",";",["T_WHITESPACE","\n                ",148],"}",["T_WHITESPACE"," ",149],["T_ELSE","else",149],["T_WHITESPACE"," ",149],"{",["T_WHITESPACE","\n                    ",149],["T_IF","if",150],["T_WHITESPACE"," ",150],"(","!",["T_VARIABLE","$validationResult",150],")",["T_WHITESPACE"," ",150],"{",["T_WHITESPACE","\n                        ",150],["T_IF","if",151],["T_WHITESPACE"," ",151],"(",["T_VARIABLE","$import",151],["T_OBJECT_OPERATOR","->",151],["T_STRING","getProcessedRowsCount",151],"(",")",["T_WHITESPACE"," ",151],["T_IS_EQUAL","==",151],["T_WHITESPACE"," ",151],["T_VARIABLE","$import",151],["T_OBJECT_OPERATOR","->",151],["T_STRING","getInvalidRowsCount",151],"(",")",")",["T_WHITESPACE"," ",151],"{",["T_WHITESPACE","\n                            ",151],["T_VARIABLE","$resultBlock",152],["T_OBJECT_OPERATOR","->",152],["T_STRING","addNotice",152],"(",["T_WHITESPACE","\n                                ",152],["T_VARIABLE","$this",153],["T_OBJECT_OPERATOR","->",153],["T_STRING","__",153],"(",["T_CONSTANT_ENCAPSED_STRING","'File is totally invalid. Please fix errors and re-upload file'",153],")",["T_WHITESPACE","\n                            ",153],")",";",["T_WHITESPACE","\n                        ",154],"}",["T_WHITESPACE"," ",155],["T_ELSEIF","elseif",155],["T_WHITESPACE"," ",155],"(",["T_VARIABLE","$import",155],["T_OBJECT_OPERATOR","->",155],["T_STRING","getErrorsCount",155],"(",")",["T_WHITESPACE"," ",155],["T_IS_GREATER_OR_EQUAL",">=",155],["T_WHITESPACE"," ",155],["T_VARIABLE","$import",155],["T_OBJECT_OPERATOR","->",155],["T_STRING","getErrorsLimit",155],"(",")",")",["T_WHITESPACE"," ",155],"{",["T_WHITESPACE","\n                            ",155],["T_VARIABLE","$resultBlock",156],["T_OBJECT_OPERATOR","->",156],["T_STRING","addNotice",156],"(",["T_WHITESPACE","\n                                ",156],["T_VARIABLE","$this",157],["T_OBJECT_OPERATOR","->",157],["T_STRING","__",157],"(",["T_CONSTANT_ENCAPSED_STRING","'Errors limit (%d) reached. Please fix errors and re-upload file'",157],",",["T_WHITESPACE"," ",157],["T_VARIABLE","$import",157],["T_OBJECT_OPERATOR","->",157],["T_STRING","getErrorsLimit",157],"(",")",")",["T_WHITESPACE","\n                            ",157],")",";",["T_WHITESPACE","\n                        ",158],"}",["T_WHITESPACE"," ",159],["T_ELSE","else",159],["T_WHITESPACE"," ",159],"{",["T_WHITESPACE","\n                            ",159],["T_IF","if",160],["T_WHITESPACE"," ",160],"(",["T_VARIABLE","$import",160],["T_OBJECT_OPERATOR","->",160],["T_STRING","isImportAllowed",160],"(",")",")",["T_WHITESPACE"," ",160],"{",["T_WHITESPACE","\n                                ",160],["T_VARIABLE","$resultBlock",161],["T_OBJECT_OPERATOR","->",161],["T_STRING","addNotice",161],"(",["T_WHITESPACE","\n                                    ",161],["T_VARIABLE","$this",162],["T_OBJECT_OPERATOR","->",162],["T_STRING","__",162],"(",["T_CONSTANT_ENCAPSED_STRING","'Please fix errors and re-upload file or simply press \"Import\" button to skip rows with errors'",162],")",",",["T_WHITESPACE","\n                                    ",162],["T_STRING","true",163],["T_WHITESPACE","\n                                ",163],")",";",["T_WHITESPACE","\n                            ",164],"}",["T_WHITESPACE"," ",165],["T_ELSE","else",165],["T_WHITESPACE"," ",165],"{",["T_WHITESPACE","\n                                ",165],["T_VARIABLE","$resultBlock",166],["T_OBJECT_OPERATOR","->",166],["T_STRING","addNotice",166],"(",["T_WHITESPACE","\n                                    ",166],["T_VARIABLE","$this",167],["T_OBJECT_OPERATOR","->",167],["T_STRING","__",167],"(",["T_CONSTANT_ENCAPSED_STRING","'File is partially valid, but import is not possible'",167],")",",",["T_WHITESPACE"," ",167],["T_STRING","false",167],["T_WHITESPACE","\n                                ",167],")",";",["T_WHITESPACE","\n                            ",168],"}",["T_WHITESPACE","\n                        ",169],"}",["T_WHITESPACE","\n                        ",170],["T_COMMENT","\/\/ errors info\n",171],["T_WHITESPACE","                        ",172],["T_FOREACH","foreach",172],["T_WHITESPACE"," ",172],"(",["T_VARIABLE","$import",172],["T_OBJECT_OPERATOR","->",172],["T_STRING","getErrors",172],"(",")",["T_WHITESPACE"," ",172],["T_AS","as",172],["T_WHITESPACE"," ",172],["T_VARIABLE","$errorCode",172],["T_WHITESPACE"," ",172],["T_DOUBLE_ARROW","=>",172],["T_WHITESPACE"," ",172],["T_VARIABLE","$rows",172],")",["T_WHITESPACE"," ",172],"{",["T_WHITESPACE","\n                            ",172],["T_VARIABLE","$error",173],["T_WHITESPACE"," ",173],"=",["T_WHITESPACE"," ",173],["T_VARIABLE","$errorCode",173],["T_WHITESPACE"," ",173],".",["T_WHITESPACE"," ",173],["T_CONSTANT_ENCAPSED_STRING","' '",173],["T_WHITESPACE"," ",173],".",["T_WHITESPACE"," ",173],["T_VARIABLE","$this",173],["T_OBJECT_OPERATOR","->",173],["T_STRING","__",173],"(",["T_CONSTANT_ENCAPSED_STRING","'in rows:'",173],")",["T_WHITESPACE"," ",173],".",["T_WHITESPACE"," ",173],["T_CONSTANT_ENCAPSED_STRING","' '",173],["T_WHITESPACE"," ",173],".",["T_WHITESPACE"," ",173],["T_STRING","implode",173],"(",["T_CONSTANT_ENCAPSED_STRING","', '",173],",",["T_WHITESPACE"," ",173],["T_VARIABLE","$rows",173],")",";",["T_WHITESPACE","\n                            ",173],["T_VARIABLE","$resultBlock",174],["T_OBJECT_OPERATOR","->",174],["T_STRING","addError",174],"(",["T_VARIABLE","$error",174],")",";",["T_WHITESPACE","\n                        ",174],"}",["T_WHITESPACE","\n                    ",175],"}",["T_WHITESPACE"," ",176],["T_ELSE","else",176],["T_WHITESPACE"," ",176],"{",["T_WHITESPACE","\n                        ",176],["T_IF","if",177],["T_WHITESPACE"," ",177],"(",["T_VARIABLE","$import",177],["T_OBJECT_OPERATOR","->",177],["T_STRING","isImportAllowed",177],"(",")",")",["T_WHITESPACE"," ",177],"{",["T_WHITESPACE","\n                            ",177],["T_VARIABLE","$resultBlock",178],["T_OBJECT_OPERATOR","->",178],["T_STRING","addSuccess",178],"(",["T_WHITESPACE","\n                                ",178],["T_VARIABLE","$this",179],["T_OBJECT_OPERATOR","->",179],["T_STRING","__",179],"(",["T_CONSTANT_ENCAPSED_STRING","'File is valid! To start import process press \"Import\" button'",179],")",",",["T_WHITESPACE"," ",179],["T_STRING","true",179],["T_WHITESPACE","\n                            ",179],")",";",["T_WHITESPACE","\n                        ",180],"}",["T_WHITESPACE"," ",181],["T_ELSE","else",181],["T_WHITESPACE"," ",181],"{",["T_WHITESPACE","\n                            ",181],["T_VARIABLE","$resultBlock",182],["T_OBJECT_OPERATOR","->",182],["T_STRING","addError",182],"(",["T_WHITESPACE","\n                                ",182],["T_VARIABLE","$this",183],["T_OBJECT_OPERATOR","->",183],["T_STRING","__",183],"(",["T_CONSTANT_ENCAPSED_STRING","'File is valid, but import is not possible'",183],")",",",["T_WHITESPACE"," ",183],["T_STRING","false",183],["T_WHITESPACE","\n                            ",183],")",";",["T_WHITESPACE","\n                        ",184],"}",["T_WHITESPACE","\n                    ",185],"}",["T_WHITESPACE","\n                    ",186],["T_VARIABLE","$resultBlock",187],["T_OBJECT_OPERATOR","->",187],["T_STRING","addNotice",187],"(",["T_VARIABLE","$import",187],["T_OBJECT_OPERATOR","->",187],["T_STRING","getNotices",187],"(",")",")",";",["T_WHITESPACE","\n                    ",187],["T_VARIABLE","$resultBlock",188],["T_OBJECT_OPERATOR","->",188],["T_STRING","addNotice",188],"(",["T_VARIABLE","$this",188],["T_OBJECT_OPERATOR","->",188],["T_STRING","__",188],"(",["T_CONSTANT_ENCAPSED_STRING","'Checked rows: %d, checked entities: %d, invalid rows: %d, total errors: %d'",188],",",["T_WHITESPACE"," ",188],["T_VARIABLE","$import",188],["T_OBJECT_OPERATOR","->",188],["T_STRING","getProcessedRowsCount",188],"(",")",",",["T_WHITESPACE"," ",188],["T_VARIABLE","$import",188],["T_OBJECT_OPERATOR","->",188],["T_STRING","getProcessedEntitiesCount",188],"(",")",",",["T_WHITESPACE"," ",188],["T_VARIABLE","$import",188],["T_OBJECT_OPERATOR","->",188],["T_STRING","getInvalidRowsCount",188],"(",")",",",["T_WHITESPACE"," ",188],["T_VARIABLE","$import",188],["T_OBJECT_OPERATOR","->",188],["T_STRING","getErrorsCount",188],"(",")",")",")",";",["T_WHITESPACE","\n                ",188],"}",["T_WHITESPACE","\n            ",189],"}",["T_WHITESPACE"," ",190],["T_CATCH","catch",190],["T_WHITESPACE"," ",190],"(",["T_STRING","Exception",190],["T_WHITESPACE"," ",190],["T_VARIABLE","$e",190],")",["T_WHITESPACE"," ",190],"{",["T_WHITESPACE","\n                ",190],["T_VARIABLE","$resultBlock",191],["T_OBJECT_OPERATOR","->",191],["T_STRING","addNotice",191],"(",["T_VARIABLE","$this",191],["T_OBJECT_OPERATOR","->",191],["T_STRING","__",191],"(",["T_CONSTANT_ENCAPSED_STRING","'Please fix errors and re-upload file'",191],")",")",["T_WHITESPACE","\n                    ",191],["T_OBJECT_OPERATOR","->",192],["T_STRING","addError",192],"(",["T_VARIABLE","$e",192],["T_OBJECT_OPERATOR","->",192],["T_STRING","getMessage",192],"(",")",")",";",["T_WHITESPACE","\n            ",192],"}",["T_WHITESPACE","\n            ",193],["T_VARIABLE","$this",194],["T_OBJECT_OPERATOR","->",194],["T_STRING","renderLayout",194],"(",")",";",["T_WHITESPACE","\n        ",194],"}",["T_WHITESPACE"," ",195],["T_ELSEIF","elseif",195],["T_WHITESPACE"," ",195],"(",["T_VARIABLE","$this",195],["T_OBJECT_OPERATOR","->",195],["T_STRING","getRequest",195],"(",")",["T_OBJECT_OPERATOR","->",195],["T_STRING","isPost",195],"(",")",["T_WHITESPACE"," ",195],["T_BOOLEAN_AND","&&",195],["T_WHITESPACE"," ",195],["T_EMPTY","empty",195],"(",["T_VARIABLE","$_FILES",195],")",")",["T_WHITESPACE"," ",195],"{",["T_WHITESPACE","\n            ",195],["T_VARIABLE","$this",196],["T_OBJECT_OPERATOR","->",196],["T_STRING","loadLayout",196],"(",["T_STRING","false",196],")",";",["T_WHITESPACE","\n            ",196],["T_VARIABLE","$resultBlock",197],["T_WHITESPACE"," ",197],"=",["T_WHITESPACE"," ",197],["T_VARIABLE","$this",197],["T_OBJECT_OPERATOR","->",197],["T_STRING","getLayout",197],"(",")",["T_OBJECT_OPERATOR","->",197],["T_STRING","getBlock",197],"(",["T_CONSTANT_ENCAPSED_STRING","'import.frame.result'",197],")",";",["T_WHITESPACE","\n            ",197],["T_VARIABLE","$resultBlock",198],["T_OBJECT_OPERATOR","->",198],["T_STRING","addError",198],"(",["T_VARIABLE","$this",198],["T_OBJECT_OPERATOR","->",198],["T_STRING","__",198],"(",["T_CONSTANT_ENCAPSED_STRING","'File was not uploaded'",198],")",")",";",["T_WHITESPACE","\n            ",198],["T_VARIABLE","$this",199],["T_OBJECT_OPERATOR","->",199],["T_STRING","renderLayout",199],"(",")",";",["T_WHITESPACE","\n        ",199],"}",["T_WHITESPACE"," ",200],["T_ELSE","else",200],["T_WHITESPACE"," ",200],"{",["T_WHITESPACE","\n            ",200],["T_VARIABLE","$this",201],["T_OBJECT_OPERATOR","->",201],["T_STRING","_getSession",201],"(",")",["T_OBJECT_OPERATOR","->",201],["T_STRING","addError",201],"(",["T_VARIABLE","$this",201],["T_OBJECT_OPERATOR","->",201],["T_STRING","__",201],"(",["T_CONSTANT_ENCAPSED_STRING","'Data is invalid or file is not uploaded'",201],")",")",";",["T_WHITESPACE","\n            ",201],["T_VARIABLE","$this",202],["T_OBJECT_OPERATOR","->",202],["T_STRING","_redirect",202],"(",["T_CONSTANT_ENCAPSED_STRING","'*\/*\/index'",202],")",";",["T_WHITESPACE","\n        ",202],"}",["T_WHITESPACE","\n    ",203],"}",["T_WHITESPACE","\n",204],"}",["T_WHITESPACE","\n",205]]